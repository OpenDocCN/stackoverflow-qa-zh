# StackOverflow 问答 11700000-11700999

# ruby-on-rails - RoR：链接到页面

> ID：11700000
> 
> 赞同：0
> 
> 时间：2012-07-28T09:55:18.750
> 
> 标签：ruby-on-rails, ruby, routes, view-helpers

我正在尝试在“票证索引”上创建一个链接以链接到“编辑”页面。（请看下图）现在我可以输入“0.0.0.0:3000/tickets/1/edit”进入编辑页面。但是，我不确定如何链接到此页面。你能给我一些指示吗？

谢谢你的指导。

注意：我正在学习 RoR 并基于 raistutorial.org 创建此页面

![我卡在下图的位置](../Images/91ddad4769581085f855e09e4dd31d94.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:02:24.910

`config/routes.rb`根据[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html) ，当您遵循在您的 .rubyonrails.org/routing.html 中使用资源丰富的路由的约定时，您将受益于提供好的路径和 url 助手。

要查看可用的路径，只需运行`rake routes`，您将看到如下输出：

```
% rake routes

    tickets GET    /tickets(.:format)          tickets#index
            POST   /tickets(.:format)          tickets#create
 new_ticket GET    /tickets/new(.:format)      tickets#new
edit_ticket GET    /tickets/:id/edit(.:format) tickets#edit
     ticket GET    /tickets/:id(.:format)      tickets#show
            PUT    /tickets/:id(.:format)      tickets#update
            DELETE /tickets/:id(.:format)      tickets#destroy 
```

从这里，我们可以看到有一个命名的路由`edit_ticket`，所以我们可以使用`edit_ticket_path`or`edit_ticket_url`助手（后者将包含域名，并且对电子邮件之类的东西很有用）。

`rake routes`将输出与您的输出进行比较`config/routes.rb`有助于确保您对 Rails 约定和资源丰富的路线有很好的理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:02:09.657

```
<%= link_to 'edit', edit_ticket_path(ticket) %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T10:02:32.813

```
<%= link_to edit_ticket_path(ticket) %> 
```

一个提示您如何自己发现这一点：如果您使用脚手架，show.html.erb 页面上有一个编辑链接 - 您可以将其用作交换它所指的票证实例的示例。

注意：link_to 的 :method 选项指的是 http 方法，可以是 GET、PUT、POST、DELETE，但不能是控制器动作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T10:03:20.910

该`:method`属性指定 HTTP 属性，即 POST、GET、PUT、DELETE、UPDATE、HEAD 等等。

这里需要在第二个参数中提供工单编辑链接的路径。

可以这样做：

```
<%= link_to "edit", edit_ticket_path(ticket) %> 
```

然而，当你这样做时`<%= link_to "show", ticket %>`，Rails 会自动推断它是你想要的显示页面。

# postgresql - 查找每个范围的平均值的查询？

> ID：11700003
> 
> 赞同：-1
> 
> 时间：2012-07-28T09:55:41.257
> 
> 标签：postgresql, average, postgresql-9.1

这是我的桌子

```
标识 | 距离（公里） | 子距离 (KM) | Iri_avg
-------------------------------------------------
 1 | 13.952 | 0 | 0.34
 2 | 13.957 | 0.005 | 0.22
 3 | 13.962 | 0.010 | 0.33
 4 | 13.967 | 0.015 | 0.12
 5 | 13.972 | 0.020 | 0.35
 ...

```

例如，我想找到`Iri_avg`每个范围的 AVG。

每 5 米（默认） 每 10 米 每 100 米 每 500 米

解决这个问题的 PostgreSQL 查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:07:23.817

你的问题不清楚。您的数据有两个距离列，您指的是哪一个？

这是一个如何根据子距离获取平均值的示例。

```
select floor(subdistance*1000)/5.0)*5.0 as lower_bound, avg(iri_avg) as avg_ari_avg
from t
group by floor(subdistance*1000)/5.0)*5.0
order by 1 
```

表达式“floor(subdistance*1000)/5.0)*5.0”得到最接近的小于该值的 5 米增量。您可以将“5”替换为“10”或“100”以进行其他分箱。

这是为了说明。目前尚不清楚您要分箱哪一列，您想对空箱做什么，以及您是在单个查询中查找所有箱宽还是只处理一个箱宽的查询。

# macos - Applescript API 文档

> ID：11700006
> 
> 赞同：7
> 
> 时间：2012-07-28T09:56:16.727
> 
> 标签：macos, applescript

我想制作一个 AppleScript 来自动完成 MacBook Pro Retina 上切换分辨率的任务。

在互联网上搜索“applescript 系统首选项”时，我遇到了一个显示一些首选项[的页面。](http://www.macosxautomation.com/applescript/features/system-prefs.html)作为缩放分辨率的新事物，它没有记录。

这给 AppleScript 带来了一个更大的问题（请注意，除了复制粘贴我从未真正在其中编程过的东西）。例如，告诉我系统偏好设置对象实际上称为“系统偏好设置”的文档在哪里，它具有称为“窗格”的对象，它们有一个 ID，并且公开 ID 是“com.apple.preference” 。暴露”？

似乎每个程序都必须有某种“秘密”文档，并且它们必须很大，映射所有对象层次结构和可能的操作。最后，AppleScript 核心是最小的，您所做的就是操作这些程序。但是它们在哪里记录？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T11:19:39.800

好的，这就是它的工作原理：

> 例如，告诉我系统偏好设置对象实际上称为“系统偏好设置”的文档在哪里

该对象称为“系统偏好设置”，因为这是应用程序的确切名称。你用这个告诉 Applescript*我想与名为 System Preferences* ( `tell application "System Preferences" ...`)的应用程序交谈

> 它有称为“窗格”的对象

现在是有趣的部分。如果您打开您的库窗口（在 Applescript 编辑器中，窗口 > 库），您将看到有一组可编写脚本的应用程序可用，问题是“系统偏好设置”不存在。所以让我们找到它：文件 > 打开词典 > 系统偏好设置。现在你有一个窗口，它可以让你深入了解应用程序的所有可用类/命令/属性，还有一个带有相关文档的拆分窗口（如果你点击`S``System Preferences`你会看到`C``pane`，点击这个你会看到`P``id`其他） . 窗格的 id 将再次成为窗格的名称（小写并连接 - 我仍在查看文档以获取对此的严格定义）。我希望这能让你开始。

* * *

`S`:Suite `C`:Class `P`:Property （圆圈内的“C”代表`Command`）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T11:18:05.170

你完全正确。每个程序都有自己的 applescript 文档。它被称为它的applescript 字典。您可以通过以下任何方式查看任何应用程序的字典...

1) 在 AppleScript Editor 的 File 菜单下，选择 "Open Dictionary..."。您可以从那里选择一个应用程序，它将显示其字典。

2) 将应用程序拖放到 AppleScript 编辑器的图标上。

3）有一个快速访问的常用词典列表。在 AppleScript Editor 的 Window 菜单下选择“Library”。您可以双击该列表中的应用程序。您还可以修改该列表以包含列表中所需的词典。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T08:56:38.220

您可以要求 AppleScript 告诉您每个窗格的 ID。

```
tell application "System Preferences" to get the id of every pane 
```

这特别方便，因为它会告诉您已安装的任何第三方首选项窗格的 ID。例如，我能够确定我的 Microsoft Natural 键盘的窗格被称为`com.microsoft.microsoftkeyboard`

我还没有真正探索过这么多，但我希望存在类似的语法来识别任何可编写脚本的应用程序中的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-23T15:05:07.000

我有另一个问题，但你可以看看我的问题，因为我的脚本中有一些关于你的问题的提示

[如何：显示复选标记、禁用菜单项、刷新菜单栏](https://stackoverflow.com/questions/49441019/how-to-display-a-check-mark-disable-a-menu-item-refresh-a-menubar)

例如：

```
tell application "System Preferences"
    reveal anchor "displaysDisplayTab" of pane id "com.apple.preference.displays"
end tell 
```

此代码应直接将您置于系统首选项的分辨率首选项中。

然后，您可以编写代码来恢复窗格的所有 UI 元素，以便您现在可以触发哪个操作。像这样的东西也应该起作用：

```
tell application "System Events"
tell application process "System Preferences"
    set frontmost to true
    delay 1
    return every UI element of front window
    return name of every UI element of front window
end tell 
```

结束告诉

希望能帮助到你

# oauth - 我的扩展程序的自定义 URL

> ID：11700008
> 
> 赞同：2
> 
> 时间：2012-07-28T09:56:40.840
> 
> 标签：oauth, google-chrome-extension, oauth-2.0

我可以为我的 google chrome 扩展程序提供一个特殊的 URL，如 chrome://myurl 或类似的任何内容（如 Firefox 中的 about:mypage。）。

基本上我正在尝试使用 oAuth 对用户进行身份验证。oAuth 提供程序需要回调 url。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:49:24.850

扩展资源可以通过url访问

```
chrome-extension://<extension-id>/<resource> 
```

扩展 ID 可以在 Chrome 的扩展页面上找到。在扩展中，可以使用该[`chrome.extension.getURL`](http://code.google.com/chrome/extensions/extension.html#method-getURL)方法以编程方式获得它。例如：

```
console.log(chrome.extension.getURL('/'));
// "chrome-extension://jcjnnblkpjakjflggajpdalncflgbkgg/" 
```

# perl - 为什么@array ~~ $number 与@array == $number 不同？

> ID：11700014
> 
> 赞同：3
> 
> 时间：2012-07-28T09:57:37.817
> 
> 标签：perl, smartmatch

根据*Programming Perl*，使用左边的“any”和右边的数字的智能匹配检查数字是否相等：

```
------------------------------------------------------------------------------
| Left | Right |    Description    | Like (But Evaluated in Boolean Context) |
------------------------------------------------------------------------------
|  Any |   Num |  Numeric equality |               Any == Num                | 
```

因此，我希望输出以下内容`1`：

```
my @arr = ('aaa');
my $num = 1;
say @arr ~~ $num; 
```

但它实际上输出的是空字符串。

我认为`@arr`会被转换为标量`1`，因为它有 1 个元素，所以`say @arr ~~ $num`相当于`say @arr == $num`.

为什么`@arr ~~ $num`不同于`@arr == $num`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:47:14.937

smartmatch 运算符显然不将列表作为操作数。因此，它在标量上下文中评估其操作数。如果这就是故事的结局，那么以下内容将行不通

```
my @a = ('aaa', 'bbb');
my $s = 'aaa';
say $s ~~ @a; 
```

因为它会和

```
say 'aaa' ~~ 2; 
```

但很明显它确实有效。这是因为 smartmatch 会自动创建对其操作数（数组或哈希）的引用，就像`push`对其第一个操作数所做的那样。这意味着

```
say $s ~~ @a; 
```

是真的

```
say $s ~~ \@a; 
```

和（你的代码）

```
say @a ~~ $n; 
```

是相同的

```
say \@a == $n; 
```

您需要明确获取长度。以下将做你想要的：

```
say 0+@a ~~ $n; 
```

当然，也会

```
say 0+@a == $n; 
```

甚至

```
say @a == $n; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T11:41:18.523

那是因为 smartmatch 首先需要一个参考。`@array ~~ $num`将等价于`\@array == $num`，这显然不太可能是真的。

您可能想以一种不出所料的方式使用我的[Smart::Match](https://metacpan.org/module/Smart%3a%3aMatch)模块和 do`@array ~~ array_length($num)`以及`@array ~~ contains($num)`其他东西。

# java - Java SQLException ORA-00904

> ID：11700016
> 
> 赞同：0
> 
> 时间：2012-07-28T09:58:15.210
> 
> 标签：java, jdbc, oracle11g

I'm having a problem getting a java ResultSet on an Oracle XE 11g release 2 database. I am using the ojdbc6_g.jar driver from Oracle to set up the JDBC connection. I get the following error: ORA-00904: "PARSEBOOL": invalid identifier

This is my Java code:

```
st = s.getConnection().createStatement();
rs = st.executeQuery("SELECT ID, METHODNAME, BEAN, PARSEBOOL, HASHID, ALIAS, WEBTAB FROM METHODS"); 
```

I am pretty sure this is correct because it all worked while testing on HSQLDB.

The table METHODS is defined as follows in SQLDeveloper:

```
CREATE TABLE "DFOLSTAT"."METHODS"
  (
    "ID"         NUMBER(*,0) NOT NULL ENABLE,
    "METHODNAME" VARCHAR2(100 BYTE),
    "BEAN"       VARCHAR2(100 BYTE),
    "HASHID"     VARCHAR2(2 BYTE),
    "ALIAS"      VARCHAR2(100 BYTE),
    "WEBTAB"     VARCHAR2(100 BYTE),
    "PARSEBOOL"  CHAR(1 BYTE),
    CONSTRAINT "METHODS_PK" PRIMARY KEY ("ID") USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT) TABLESPACE "USERS" ENABLE,
    CONSTRAINT "METHODS_HASHID" UNIQUE ("HASHID") USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE         DEFAULT CELL_FLASH_CACHE DEFAULT) TABLESPACE "USERS" ENABLE
  ) 
```

I read about possible errors due to case sensitive column names but when performing a query in SQLDeveloper or the command line, everything works fine. What am I doing wrong?

Thanks in advance,

Siebe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:02:32.997

Maybe you have a clash with a function name. Try surrounding the column name with double quotes, just as you have in the CREATE TABLE statement.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:17:44.633

您使用的驱动程序似乎不合适...尝试使用 ojdbc14.jar 它很容易在 oracle 的网站上提供.. 其余代码还可以

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T05:55:17.227

您可以尝试如下调用您的表吗

```
 rs = st.executeQuery("SELECT METHODS.ID, METHODS.METHODNAME, 
METHODS.BEAN, METHODS.PARSEBOOL, METHODS.HASHID, METHODS.ALIAS, 
    METHODS.WEBTAB FROM DFOLSTAT.METHODS"); 
```

或试试这个

```
 rs = st.executeQuery("SELECT ID, METHODNAME, BEAN, \"PARSEBOOL\", HASHID, 
ALIAS, WEBTAB FROM METHODS"); 
```

# sh - 如何通过 shell 脚本设置 HTTP 头的 Last-Modified 日期

> ID：11700022
> 
> 赞同：1
> 
> 时间：2012-07-28T09:59:03.647
> 
> 标签：sh

我想将远程 HTTP 服务器上文件的最后修改日期设置为 shell 脚本变量。

```
CATEGORIES_DATE=$(date -d "$(curl -s -I -u ${URL} | grep Last-Modified | SOMETHING HERE)" +%Y-%m-%d) 
```

服务器响应：`Last-Modified: Sat, 28 Jul 2012 09:15:30 GMT`我想`CATEGORIES_DATE=2012-07-28`最后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:37:00.440

您可以使用 awk + ​​日期：

```
CATEGORIES_DATE="$(curl -s -I "${URL}" | awk '/^Last-Modified:/ { DATE=$3 " " $4 " " $5 ; system( "date -d \""  DATE "\" \"+%Y-%m-%d\"" ) }' )" 
```

awk 将提取所需的字段并将它们提供给日期。

# python - 在 web2py 中删除所有表时发生了一些非常奇怪的事情

> ID：11700024
> 
> 赞同：0
> 
> 时间：2012-07-28T09:59:45.140
> 
> 标签：python, database, list, web2py

我想删除数据库中的所有表`db`。我所做的就是遍历`db.tables`并一一删除它们。但是，某些表会被忽略，因此不会被删除。然后我改为`drop`，`truncate`每个表都被截断。那么，有什么问题`drop`呢？

以下是代码：

控制器/admin.py：

```
def olddo_remove():
    response.view = 'admin/do_remove.html'
    l = []
    k = []
    for table_name in db.tables:
        l.append(table_name)
        db[table_name].drop()
        #db[table_name].truncate()
    return locals()

def do_remove():
    l = []
    k = []
    for table_name in db.tables:
        l.append(table_name)
    for table_name in l:
        k.append(table_name)
        db[table_name].drop()
    return locals() 
```

意见/管理/do_remove.html：

```
{{=l}}<br />{{=k}} 
```

当我访问 admin/olddo_remove 时，我得到

```
['auth_user', 'auth_membership', 'auth_event', 'client', 'data']
[] 
```

当我访问 admin/do_remove 时，我得到

```
['auth_user', 'auth_group', 'auth_membership', 'auth_permission', 'auth_event', 'auth_cas', 'client', 'product', 'data']
['auth_user', 'auth_group', 'auth_membership', 'auth_permission', 'auth_event', 'auth_cas', 'client', 'product', 'data'] 
```

如果我在 olddo_remove 中更改为`drop`，`truncate`输出将是

```
['auth_user', 'auth_group', 'auth_membership', 'auth_permission', 'auth_event', 'auth_cas', 'client', 'product', 'data']
[] 
```

为什么？怎么了？

* * *

这**太疯狂**了！

```
def test():
    response.view = 'admin/do_remove.html'
    l = db.tables
    k = []
    for table_name in l:
        k.append(table_name)
        db[table_name].drop()
    return locals() 
```

输出：

```
['auth_group', 'auth_permission', 'auth_cas', 'product']
['auth_user', 'auth_membership', 'auth_event', 'client', 'data'] 
```

并且只删除了第二行的表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:26:37.783

这是一个 Python 问题。`db.tables`是一个列表对象（实际上是一个特殊的 SQLCallableList 对象，继承自列表）。`db[table_name].drop()`不仅从数据库中删除 table_name 表，而且从`db.tables`列表中删除 table_name。因此，在 for 循环中，您正在迭代一个列表并在迭代时改变该列表（即从中删除项目）。这就是为什么你只得到其他所有桌子的原因。在有效的示例中，您首先复制列表，然后迭代副本（在循环中不会发生变异），因此它按预期工作。截断即使在直接迭代时也有效，`db.tables`因为截断不会删除表（从数据库或从`db.tables`）。

注意，如上所述，`db.tables`是一个 SQLCallableList。这意味着`db.tables()`返回`db.tables`列表的副本，因此您可以迭代副本：

```
for table_name in db.tables():
    db[table_name].drop() 
```

.drop() 将从中删除 table_name`db.tables`但不会从`db.tables()`for 循环正在迭代的副本中删除它，因此一切都应该按预期工作。

# mysql - MySQL ORDER BY not sorting properly

> ID：11700036
> 
> 赞同：0
> 
> 时间：2012-07-28T10:02:14.023
> 
> 标签：mysql

I have this mySQL Query

```
SELECT list.*, brand.displayed_text AS brandName
FROM itemmaster_list AS list
LEFT JOIN brand_lists AS brand ON brand.cid = list.brandcode
WHERE brandcode = 'abc'
ORDER BY list.orderpriority DESC, list.date_added DESC , list.cid DESC 
```

When you run this in PHPMySQL it returns data CORRECTLY sorted by the field `[list.orderpriority]`

but when you run it in my php code (thru browser) it sorts data by the field `[list.date_added]`

PHP Code

```
$result_item = mysql_query("SELECT list.*, brand.displayed_text AS brandName FROM itemmaster_list 
AS list LEFT JOIN brand_lists AS brand ON brand.cid = list.brandcode WHERE brandcode = 'abc' 
ORDER BY list.orderpriority DESC, list.date_added DESC , list.cid DESC") or die(mysql_error());

if (mysql_num_rows($result_item) > 0) {
    while($row_item = mysql_fetch_array($result_item)) {
        [echo here the records]
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:31:23.410

问题解决了。

事实证明，我们的主机在没有告诉我们的情况下将我们转移到新服务器，所以我们有两个数据库，PHP 文件连接到新数据库，而我正在使用的 phpMySQL 是旧数据库，这就是我得到不同结果的原因。

# php - 使用 TortoiseSVN 删除冲突文件（本地文件）后无法更新文件

> ID：11700045
> 
> 赞同：2
> 
> 时间：2012-07-28T10:03:56.737
> 
> 标签：php, svn, tortoisesvn, conflict

我正在使用 TortoiseSVN。最近有一个文件处于冲突状态。我右键单击它，选择“编辑冲突”，然后选择“删除本地文件”。

我想在删除本地文件后，我可以更新以从 SVN 服务器获取文件。但事实是 TortoiseSVN 不允许我将服务器上的文件下载到本地计算机。

TortoiseSVN 只是显示没有变化。

我需要来自服务器的该文件的最新版本！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:14:34.600

如果要获取服务器的版本，最简单的方法是

1.  还原您的本地副本（如果该目录或以下目录中有任何更改，您将丢失这些，但如果该冲突是唯一的问题，它会有所帮助。为此，请执行以下操作：
    *   `Revert...`从菜单中选择![在此处输入图像描述](../Images/a91dfaa31743db628b6d16ae891e3064.png)
    *   在打开的对话框中，接受文件已还原。
2.  您现在有一个没有更改的本地副本，因此那里应该没有冲突。
3.  现在将该文件更新为存储库的当前状态。

如果这对文件本身不起作用，请尝试对文件所在的目录进行 if。通常，应该可以恢复此目录（具有冲突状态）...

我希望这种操作顺序在任何情况下都有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:07:58.973

对于编辑冲突...您需要打开编辑冲突面板并选择要保留的代码部分。

如果您删除文件，请尝试再次导入该文件。如果它不起作用，您需要制作一个新的工作副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T10:08:43.000

假设原始本地文件在您的回收站中，我会恢复它。然后，再次尝试更新，但这次说“使用他们的解决方案”。它应该用头副本替换您的本地副本。

# php - 喜欢使用 ajax 发布/打印结果

> ID：11700050
> 
> 赞同：0
> 
> 时间：2012-07-28T10:04:40.783
> 
> 标签：php, javascript, jquery, html, ajax

我为我的用户帖子创建了一个赞按钮。我正在尝试打印喜欢的数量。在我点击 LIKE 按钮的那一刻，除非我刷新页面，否则在 Like 按钮旁边什么都没有显示，然后它会显示帖子的点击量 (4)。

我面临的问题是我有一个 LIKE_DO.php 页面，该页面收集数据然后将其发送到另一个页面中名为 function_user.php 的函数。无论如何我可以使用 Ajax 来获取喜欢的打印值，我将如何去做？我真的很想在我已经拥有的 ajax 之上构建，插入数据并调用打印的喜欢以节省混淆并不得不重新编写我的所有代码。

喜欢按钮

```
echo "<div class='stream_option'><a id='likecontext_".$streamitem_data['streamitem_id']."' style='cursor:pointer;' onClick=\"likestatus(".$streamitem_data['streamitem_id'].",this.id);\">"; 
```

当前的 AJAX

```
function likestatus(postid,contextid){
var obj = document.getElementById(contextid);
if(obj.innerHTML=="Like"){
obj.innerHTML="Unlike";
}else{
obj.innerHTML="Like";
}
$.post("../include/like_do.php", { streamitem_id: postid} );
} 
```

LIKE_DO.PHP

```
<?php
session_start();
require"rawfeeds_load.php";
if(isset($_POST['streamitem_id'])){

$check = user_core::check_liked($_SESSION['id'],$_POST['streamitem_id'],1);

user_core::do_like($_SESSION['id'],$_POST['streamitem_id'],1);
if($check==0){?>
<?php }else{ ?>
<?php }
}else{
echo "<script>alert('Error liking post');</script>";
}
?> 
```

USER_CORE - （用我打印的喜欢，我需要用 ajax 来获得）

```
 function print_like_count($streamid){
        $check      =   "SELECT feedback_id FROM streamdata_feedback WHERE feedback_streamid='$streamid' AND feedback_rating=1";
        $check1     =    mysql_query($check);
        $check2     =    mysql_num_rows($check1);
        if($check2>0){
        return "(".$check2.")";
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:14:10.000

假设`user_core::do_like()`将喜欢的数据添加到数据库并`user_core::check_liked()`返回为该帖子做出的喜欢的数量。

（如我错了请纠正我）

```
if(user_core::do_like($_SESSION['id'],$_POST['streamitem_id'],1)){
echo $check; // as your user_core::check_liked() function returns number of likes.
}else{
echo "<script>alert('Error liking post');</script>";
} 
```

ALSO：由于您正在调用 X.php 并且从 X.php 调用 Y.php 中的函数。Y.php 中的函数实际上知道您要查找的值。

由于您正在调用在 Y.php 中`echo`编辑的 X.php 值，因此您的脚本将不可见。

解决方案 - 如果您正在调用 X.php，则将 Y.php 设为 X.php`return`的值，并将`echo`您的值设为 X.php 中的值。

+++++++++++++++++++++++++

更新根据当前的最新问题：

`$.post`将您的处理程序更改为

```
$.post("../include/like_do.php", { streamitem_id: postid},function(data){
//see the parameter data in this function. Data contains whatever that you echo in your php file.

$("#yourLikeDisplayDivId").html(data+" Likes");

} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:40:46.440

**如果您只需要知道有多少人喜欢该页面：** 使用 XML 或 JSON 从脚本中检索数据。这样做，您可以从脚本中检索许多数据。例子：

```
<?php 
$xml = '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<likes>
  <like>
    <number>'.getNumOfLikes().'</number>
  </like>
</likes>' ;
echo $xml ; 
?> 
```

创建一个简单的 ajax 请求：

```
var req = new XMLHttpRequest() ;
var url = "../include/like_do.php" ;

function execute(data){
  req.open("POST", url, true) ;
  req.setRequestHeader("Content-type", "application/x-www-form-urlencoded") ;
  req.onreadystatechange = function(){
    if (req.readyState == 4 and req.status == 200){
      var xml = req.responseXML ; //Get the xml response
      document.getElementById("numOfLikes").innerHTML = xml.getElementsByTagName()("number")[0].firstChild.nodeValue ; //get the value of the first "number" tag
      req.abort ;
    }
  req.send(data)
  }
}

execute("likeId=1234&anything=123") ; 
```

您在 PHP 脚本中所做的其他事情（显示什么，多少内容）。我希望这会有所帮助，因为您可以了解如何使用 AJAX 请求。

# objective-c - 快速连续发出多个请求时使用 RestKit 崩溃

> ID：11700055
> 
> 赞同：1
> 
> 时间：2012-07-28T10:05:57.147
> 
> 标签：objective-c, ios, cocoa-touch, thread-safety, restkit

我有一个带有两个按钮的按钮，它们开始使用[RestKit](http://restkit.org)从 Web 服务器下载一些数据。

现在，如果用户快速连续重复点击这两个按钮，我的应用程序将崩溃并在下面生成崩溃日志。

我像这样发起我的请求：

```
-(void)loadDataAtPath:(NSString *)path completion:(ResultArrayBlock)completionBlock failed:(ResultFailedBlock)failedBlock
{
    RKObjectMapping *groupMapping = [Group mapping];

    [self.objectManager.mappingProvider setMapping:groupMapping forKeyPath:@"groups.group"];
    [self.objectManager.mappingProvider setObjectMapping:groupMapping forKeyPath:path];  

    [self.objectManager loadObjectsAtResourcePath:path usingBlock:^(RKObjectLoader *loader) {
        loader.onDidLoadObjects = ^(NSArray *array){

            // Do the reverse mapping of the group
            for (Group *c in array) {
                for(Person *p in c.persons){
                    p.group = c;
                }
            }

            completionBlock(array);

        };
        loader.onDidFailWithError = failedBlock;
    }];
} 
```

我首先认为问题出在 for 循环中，我在其中对数据进行了一些映射后设置，但即使在评论 for 循环时问题仍然存在。

奇怪的是，即使我打开**Network Link Conditioner.prefpane ，模拟器中也不会出现这个问题**

### 迷恋;撞车;崩溃

当我在设备上调试它时，我在控制台上得到以下信息。

```
[PLCrashReport] Terminated stack walking early: Corrupted frame
[PLCrashReport] Terminated stack walking early: Corrupted frame 
```

崩溃日志如下所示：

```
Application Specific Information:
*** Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <__NSCFDictionary: 0x3c14a0> was mutated while being enumerated.'

Last Exception Backtrace:
0   CoreFoundation                      0x3734e88f __exceptionPreprocess + 162
1   libobjc.A.dylib                     0x35053259 objc_exception_throw + 32
2   CoreFoundation                      0x3734e3b3 __NSFastEnumerationMutationHandler + 162
3   MyApp                               0x0008f5bf -[RKObjectMapper performKeyPathMappingUsingMappingDictionary:] + 407
4   MyApp                               0x0008fa45 -[RKObjectMapper performMapping] + 673
5   MyApp                               0x0008ac7d -[RKObjectLoader mapResponseWithMappingProvider:toObject:inContext:error:] + 1045
6   MyApp                               0x0008b04f -[RKObjectLoader performMapping:] + 575
7   MyApp                               0x0008b22b __47-[RKObjectLoader performMappingInDispatchQueue]_block_invoke_0 + 247
8   libdispatch.dylib                   0x3046ec59 _dispatch_call_block_and_release + 12
9   libdispatch.dylib                   0x30479cab _dispatch_queue_drain + 274
10  libdispatch.dylib                   0x30479b19 _dispatch_queue_invoke$VARIANT$up + 36
11  libdispatch.dylib                   0x3047a78b _dispatch_worker_thread2 + 214
12  libsystem_c.dylib                   0x33bbddfb _pthread_wqthread + 294
13  libsystem_c.dylib                   0x33bbdcd0 start_wqthread + 8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T07:35:01.580

正如@PhillipMills 建议的那样，当您查看 performKeyPathMappingUsingMappingDictionary 内部时，您可以轻松看到答案。您的问题是使用这些行重复设置映射：

```
[self.objectManager.mappingProvider setMapping:groupMapping forKeyPath:@"groups.group"];
[self.objectManager.mappingProvider setObjectMapping:groupMapping forKeyPath:path]; 
```

如果在映射响应时调用此行，则会触发错误，因为您正在更改它试图快速枚举的同一个字典。

通常，您会在初始配置中的某处设置映射，而不是每次都这样。

# jquery - Jquery $.ajax() 响应非常慢

> ID：11700057
> 
> 赞同：0
> 
> 时间：2012-07-28T10:06:11.857
> 
> 标签：jquery, ajax, response

在我的网页（questions.php）中，我使用了一个按钮，当用户单击它时，$.ajax() 会加载一个表单供用户提问。此表单是一个单独的页面 (ask_question_form.php)。我使用了以下 jquery 代码。

```
$(document).ready(function(e) {
    $("#ask_new_question").click(function(){
    $.ajax({url:"./ask_question_form.php",success:function(result){
        $("#question_result_box").slideToggle(100,function(){
        $("#question_result").html(result)});
    }});
    });
}); 
```

当用户单击按钮（id=ask_new_quetion）时，$.ajax() 将 for 加载到 div（id=question_result）。现在的问题是当页面加载并且我第一次单击按钮时，至少需要 15 秒才能响应...之后响应大约需要 7 到 10 秒.. 有什么办法可以加快速度响应时间？？我已经在 IE、firefox 和 chrome 上对其进行了测试......给出了相同的结果......

# apache - 使用基于 query_string 的基本身份验证

> ID：11700058
> 
> 赞同：0
> 
> 时间：2012-07-28T10:06:25.587
> 
> 标签：apache, mod-rewrite, basic-authentication

我正在尝试保护包含特定字符串的 url：

```
RewriteCond %{QUERY_STRING} foo
RewriteRule - [E=NEED_AUTH:1]
Options -Indexes
AuthType Basic
AuthUserFile /etc/apache2/.htpasswd
Order allow,deny
allow from all
satisfy any
deny from env=NEED_AUTH
Require valid-user 
```

我想这应该在加载时弹出身份验证对话框

```
index.php?format=foo 
```

但它不起作用。我尝试了其他几个 RewriteConds 例如

```
RewriteCond %{QUERY_STRING} format=foo
RewriteCond %{QUERY_STRING} ^format=foo$ 
```

没有运气。使用

```
RewriteLog "/var/log/apache2/rewrite.log"
RewriteLogLevel 3 
```

不记录任何东西。

有什么建议么？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:58:44.867

为了补充乔恩的答案，我遇到了与 OP 类似的问题。但我发现这`allow from env=!NEED_AUTH`不起作用，所以我不得不在 Rewrite Condition 中反转它，`RewriteCond %{QUERY_STRING} !format=foo` 然后反转 allow `allow from env=NEED_AUTH`。因此，这是有效的代码段：

```
RewriteCond %{QUERY_STRING} !foo=bar
RewriteRule ^ - [E=NO_AUTH:1]

Order deny,allow
Deny from all
AuthType basic
AuthName "Auth Needed"
AuthUserFile "/etc/httpd/conf.d/.htpasswd"
Require valid-user
Allow from           env=NO_AUTH
Satisfy              Any 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T23:04:34.617

Make sure you've turned on the rewrite engine using `RewriteEngine On`. Also, there's an error in your RewriteRule:

```
RewriteRule - [E=NEED_AUTH:1] 
```

Needs to have 2 parameters before the flags:

```
RewriteRule ^ - [E=NEED_AUTH:1] 
```

Aside from that, it doesn't look like you've setup authentication correctly. You'll need a `AuthName` to define the realm, apache won't do authentication without it. And I don't think you can force authentication with a `allow from all`, you might need to do this the other way around, by denying all and `allow from env=!NEED_AUTH`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T01:06:18.487

如此处所述（[基于查询字符串的 Apache 权限](https://stackoverflow.com/questions/14648078/apache-permissions-based-on-querystring)），我无法在 Apache 2.4.6 中获得“RewriteRule”和“Allow from env”的组合。

# java - 这段代码有什么问题？

> ID：11700061
> 
> 赞同：2
> 
> 时间：2012-07-28T10:07:04.807
> 
> 标签：java, numbers

```
String phrase = "4556.44";
Float num = new Float(phrase);
int dollars = (int) Math.floor(num);
System.out.println(""+dollars);
int cent = (int) Math.floor((num - dollars) * 100.0F);
int cent2 =  (int) ((num - dollars) * 100.0);
System.out.println(""+cent+":"+cent2); 
```

这是一个数字到单词类代码短语，我的问题是当我运行这个代码片段时，输出结果是`4556.43`. 但输入值为`4556.44`。请告诉我为什么会发生这种情况，我需要解决这个问题的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:09:06.570

对于具有受控舍入的高精度计算，请`BigDecimal`改用`Float`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:16:02.713

浮点数不如双精度浮点数精度，而双精度浮点数不如 BigDecimal 精度。

在处理绝对必须精确的程序（如金融应用程序）时，请使用 BigDecimal。

如果这是一个小型作业和非关键应用程序，您可以尝试 Double 来查看它是否对您来说足够精确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T10:17:56.173

```
int cent = (int)(num * 100f % 100f); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T10:18:23.163

`Float`不是精密计算的好选择。

```
 int cent = (int) Math.floor((num - dollars) * 100.0F); 
```

代码中的上述语句并没有像您期望的那样为您提供准确的答案。

如果可能，请尝试使用`Double`或。`BigInteger`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T10:18:53.870

浮点数和双精度数不能表示所有可能的实数，因为它们使用的[规范](http://en.wikipedia.org/wiki/Floating_point#IEEE_754%3a_floating_point_in_modern_computers)是通过添加以下任何数字来构成数字：1、1/2、1/4、1/8、1/16 等...

如果你尝试`0.1f+0.1f+0.1f==0.3f`你会得到错误的。因此，正如其他人所说，使用 BigDecimal，它使用不同的表示形式，速度要慢得多，但不会引发这些问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T10:28:13.767

您还可以执行以下操作

```
String phrase = "4556.44";
long money = Math.round(Double.parseDouble(phrase) * 100);
long dollars = money / 100;
long cents = money % 100;
System.out.printf("%,d dollars and %d cents%n", dollars, cents); 
```

印刷

```
4,556 dollars and 44 cents 
```

# mysql - 使用 JPQL 或 SQL 确保唯一性（不同的记录）？或两者？

> ID：11700064
> 
> 赞同：0
> 
> 时间：2012-07-28T10:07:24.433
> 
> 标签：mysql, jpa, foreign-keys, persistence, jpql

如何防止 TopLink 复制现有数据？使用 Java 代码执行此操作是一个好主意，还是应该将其内置到数据库中并让插入失败？

在这种情况下，我想确保它`newsgroups.newsgroup`是唯一的，并且`articles.header_id_string`也是唯一的。

最好的方法可能是简单地运行 Java JPQL 中的唯一性查询？

架构：

```
mysql> 
mysql> show tables;
+---------------------+
| Tables_in_nntp      |
+---------------------+
| articles            |
| newsgroups          |
| newsgroups_articles |
+---------------------+
3 rows in set (0.01 sec)

mysql> describe newsgroups;
+-----------+---------+------+-----+---------+----------------+
| Field     | Type    | Null | Key | Default | Extra          |
+-----------+---------+------+-----+---------+----------------+
| id        | int(11) | NO   | PRI | NULL    | auto_increment |
| newsgroup | text    | NO   |     | NULL    |                |
+-----------+---------+------+-----+---------+----------------+
2 rows in set (0.00 sec)

mysql> describe articles;
+------------------+---------+------+-----+---------+----------------+
| Field            | Type    | Null | Key | Default | Extra          |
+------------------+---------+------+-----+---------+----------------+
| id               | int(11) | NO   | PRI | NULL    | auto_increment |
| subject          | text    | NO   |     | NULL    |                |
| content          | text    | NO   |     | NULL    |                |
| number           | int(11) | NO   |     | NULL    |                |
| sent             | date    | NO   |     | NULL    |                |
| header_id_string | text    | NO   |     | NULL    |                |
+------------------+---------+------+-----+---------+----------------+
6 rows in set (0.00 sec)

mysql> describe newsgroups_articles;
+--------------+---------+------+-----+---------+----------------+
| Field        | Type    | Null | Key | Default | Extra          |
+--------------+---------+------+-----+---------+----------------+
| id           | int(11) | NO   | PRI | NULL    | auto_increment |
| article_id   | int(11) | NO   |     | NULL    |                |
| newsgroup_id | int(11) | NO   | MUL | NULL    |                |
+--------------+---------+------+-----+---------+----------------+
3 rows in set (0.00 sec)

mysql> 
```

新闻组实体：

```
package net.bounceme.dur.usenet.model;

import java.io.Serializable;
import javax.mail.Folder;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "newsgroups", catalog = "nntp", schema = "")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Newsgroups.findAll", query = "SELECT n FROM Newsgroup n"),
    @NamedQuery(name = "Newsgroups.findById", query = "SELECT n FROM Newsgroup n WHERE n.id = :id")})
public class Newsgroup implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id", nullable = false)
    private Integer id;
    @Basic(optional = false)
    @Lob
    @Column(name = "newsgroup", nullable = false, length = 65535)
    private String newsgroup;

    public Newsgroup() {
    }

    public Newsgroup(Folder f){
        newsgroup = f.getFullName();
    }

    public Newsgroup(Integer id) {
        this.id = id;
    }

    public Newsgroup(Integer id, String newsgroup) {
        this.id = id;
        this.newsgroup = newsgroup;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getNewsgroup() {
        return newsgroup;
    }

    public void setNewsgroup(String newsgroup) {
        this.newsgroup = newsgroup;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Newsgroup)) {
            return false;
        }
        Newsgroup other = (Newsgroup) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "net.bounceme.dur.usenet.model.Newsgroups[ id=" + id + " ]";
    }

} 
```

和文章实体：

```
package net.bounceme.dur.usenet.model;

import java.io.Serializable;
import java.util.Collection;
import java.util.Date;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;
import net.bounceme.dur.usenet.controller.MessageBean;

@Entity
@Table(name = "articles", catalog = "nntp", schema = "")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Articles.findAll", query = "SELECT a FROM Article a"),
    @NamedQuery(name = "Articles.findById", query = "SELECT a FROM Article a WHERE a.id = :id"),
    @NamedQuery(name = "Articles.findByNumber", query = "SELECT a FROM Article a WHERE a.number = :number"),
    @NamedQuery(name = "Articles.findBySent", query = "SELECT a FROM Article a WHERE a.sent = :sent")})
public class Article implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id", nullable = false)
    private Integer id;
    @Basic(optional = false)
    @Lob
    @Column(name = "subject", nullable = false, length = 65535)
    private String subject;
    @Basic(optional = false)
    @Lob
    @Column(name = "content", nullable = false, length = 65535)
    private String content;
    @Basic(optional = false)
    @Column(name = "number", nullable = false)
    private int number;
    @Basic(optional = false)
    @Column(name = "sent", nullable = false)
    @Temporal(TemporalType.DATE)
    private Date sent;
    @Basic(optional = false)
    @Lob
    @Column(name = "header_id_string", nullable = false, length = 65535)
    private String headerIdString;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "newsgroupId")
    private Collection<NewsgroupsArticles> newsgroupsArticlesCollection;

    public Article() {
    }

    public Article(MessageBean messageBean) {
        subject = messageBean.getSubject();
        content = messageBean.getContent();
        sent = messageBean.getSent();
        number = messageBean.getNumber();
        headerIdString = "dummy";
    }

    public Article(Integer id) {
        this.id = id;
    }

    public Article(Integer id, String subject, String content, int number, Date sent, String headerIdString) {
        this.id = id;
        this.subject = subject;
        this.content = content;
        this.number = number;
        this.sent = sent;
        this.headerIdString = headerIdString;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getSubject() {
        return subject;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }

    public String getContent() {
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }

    public int getNumber() {
        return number;
    }

    public void setNumber(int number) {
        this.number = number;
    }

    public Date getSent() {
        return sent;
    }

    public void setSent(Date sent) {
        this.sent = sent;
    }

    public String getHeaderIdString() {
        return headerIdString;
    }

    public void setHeaderIdString(String headerIdString) {
        this.headerIdString = headerIdString;
    }

    @XmlTransient
    public Collection<NewsgroupsArticles> getNewsgroupsArticlesCollection() {
        return newsgroupsArticlesCollection;
    }

    public void setNewsgroupsArticlesCollection(Collection<NewsgroupsArticles> newsgroupsArticlesCollection) {
        this.newsgroupsArticlesCollection = newsgroupsArticlesCollection;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Article)) {
            return false;
        }
        Article other = (Article) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "net.bounceme.dur.usenet.model.Articles[ id=" + id + " ]";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:11:37.800

> *应该将其内置到数据库中并让插入失败吗？*

绝对，将其放入数据库中。

这是你的“最后一道防线”，几乎没有办法绕过它。如果你只有你的 Java 代码，你就没有受到 SQL 脚本错误或编程错误的保护。

您仍然可以签入您的代码，例如向用户显示更好的错误消息。

# mysql - MySQL - 计算多个表中的值并合并结果

> ID：11700065
> 
> 赞同：0
> 
> 时间：2012-07-28T10:07:25.400
> 
> 标签：mysql, count

我有两个表，每个表有一列，包含名称。名称可以有重复。每张桌子上都可以找到一个名字，也可以只在一张桌子上找到一个名字。我想做一个计算重复项的查询，对于每个表中的每个名称，列出这些值，如下所示：

```
| name | table1 | table2 |
| john | 12     | 23     |
| mark | 2      | 5      |
| mary |        | 10     |
| luke | 4      |        | 
```

我尝试了不同的策略，`UNION`但没有运气。提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:18:57.377

```
SELECT DISTINCT t1.name, t1.cnt1, t2.cnt2 
FROM
(SELECT name,count(name) as cnt1 FROM table1 GROUP BY name) t1
LEFT JOIN
(SELECT name,count(name) as cnt2 FROM table2 GROUP BY name) t2
ON t1.name = t2.name
UNION 
SELECT DISTINCT t2.name, t1.cnt1, t2.cnt2
FROM
(SELECT name,count(name) as cnt1 FROM table1 GROUP BY name) t1
RIGHT JOIN
(SELECT name,count(name) as cnt2 FROM table2 GROUP BY name) t2
ON t1.name = t2.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:13:43.780

```
SELECT SUM(res.cn), name
FROM
(
    SELECT name, count(name) as cn  from table1 GROUP BY name HAVING count(name) > 1
    UNION ALL
    SELECT name, count(name) as cn from table2 GROUP BY name HAVING count(name)>1
) as res
GROUP BY nam 
```

e

试试上面的方法:) 我为你做了一个小提琴来测试它： [http ://sqlfiddle.com/#!3/796b2/3](http://sqlfiddle.com/#!3/796b2/3)

它在每个表中有几个双名，并会告诉你哪些名字有双名，然后打印出来。不显示只出现一次的名称（通过 HAVING 子句实现）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T10:29:32.307

这是一个更简单的解决方案：

您可以将两个表中的名称放在一起，用一列`UNION`手动区分它们的原始表。`tbl`

然后它只是一个`GROUP BY`使用微分列的简单条件聚合：

```
SELECT a.name,
       NULLIF(COUNT(CASE a.tbl WHEN 1 THEN 1 END), 0) AS table1,
       NULLIF(COUNT(CASE a.tbl WHEN 2 THEN 1 END), 0) AS table2
FROM
(
    SELECT name, 1 AS tbl FROM table1 UNION ALL
    SELECT name, 2 FROM table2
) a
GROUP BY a.name 
```

根据您想要的结果集，`NULL`如果结果是 ，我们将计算计数值`0`。

* * *

## [SQLFiddle 演示](http://sqlfiddle.com/#!2/e9e45/1/0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T16:48:31.527

经过一番阅读，我认为这不是我想做的事情。这种情况可以通过 excel 或 libreoffice 中的数据透视表来解决。事实上，这是我使用的方法，结合一些 sql 语句来计算名称的出现并导出为 CSV。

UNION 绝对不行。一些机会是加入，但不是舒尔。

我找到了一篇与我讨论相同问题的帖子。

[MySQL - 行到列](https://stackoverflow.com/questions/1241178/mysql-rows-to-columns)

# android - Android 如何获取特定文件夹中可用的视频文件持续时间？

> ID：11700068
> 
> 赞同：3
> 
> 时间：2012-07-28T10:07:52.187
> 
> 标签：android, video, duration

我正在研究在 android 中查找视频文件持续时间。但我无法得到它。我的视频文件在 SD 卡的特定文件夹中可用。想要将它们绑定为具有持续时间和名称的列表视图。我得到了这个名字。但搜索解决方案以找到持续时间。请帮我 。提前致谢 。

拉杰什。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-02T12:31:28.500

int msec = MediaPlayer.create(context, Uri.fromFile(new File(path))).getDuration();

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-04T12:12:43.683

您不需要创建 MediaPlayer。我制作了一项功能，可以为您提供视频文件存储的 android 设备的持续时间。

```
public static long checkVideoDurationValidation(Context context, Uri uri){
    Log.d("CommonHandler", "Uri: " + uri);
    Cursor cursor = MediaStore.Video.query(context.getContentResolver(), uri, new
            String[]{MediaStore.Video.VideoColumns.DURATION});
    long duration = 0;
    if (cursor != null && cursor.moveToFirst()) {
        duration = cursor.getLong(cursor.getColumnIndex(MediaStore.Video
                .VideoColumns.DURATION));
        cursor.close();
    }

    return duration;
} 
```

如果您对此有任何疑问，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-23T03:17:02.967

> **不要使用媒体播放器！**效率低下

改为*仅*`MediaMetadataRetriever`获取您需要的元数据

 *## Java 解决方案

```
MediaMetadataRetriever retriever = new MediaMetadataRetriever();
// There are other variations of setDataSource(), if you have a different input
retriever.setDataSource(context, Uri.fromFile(videoFile));
String time = retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
long durationMs = Long.parseLong(time);
retriever.release() 
```

## Kotlin 扩展解决方案

这是在 Kotlin 中获取媒体文件持续时间的方法

```
fun File.getMediaDuration(context: Context): Long {
    if (!exists()) return 0
    val retriever = MediaMetadataRetriever()
    retriever.setDataSource(context, Uri.parse(absolutePath))
    val duration = retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION)
    retriever.release()

    return duration.toLongOrNull() ?: 0
} 
```

如果您想让它更安全（Uri.parse 可能会抛出异常），请使用此组合。其他的通常也很有用:)

```
fun String?.asUri(): Uri? {
    try {
        return Uri.parse(this)
    } catch (e: Exception) {
    }
    return null
}

val File.uri get() = this.absolutePath.asUri()

fun File.getMediaDuration(context: Context): Long {
    if (!exists()) return 0
    val retriever = MediaMetadataRetriever()
    retriever.setDataSource(context, uri)
    val duration = retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION)
    retriever.release()

    return duration.toLongOrNull() ?: 0
} 
```

这里不是必需的，但通常有用的附加 Uri 扩展

```
val Uri?.exists get() = if (this == null) false else asFile().exists()

fun Uri.asFile(): File = File(toString()) 
```*

# f# - F# 类型系统可以做到这一点吗？

> ID：11700070
> 
> 赞同：4
> 
> 时间：2012-07-28T10:07:56.743
> 
> 标签：f#

我有很多不同的类型，它们有共同的目的，但没有什么共同点。为了解释起见，它们也可能是这样的：

```
type blah<'a> = Blah of 'a

type huha<'a> = Huha of 'a 
```

我经常需要重复一大块样板文件，这些样板文件可以按照以下方式进入函数内部：

```
let f (x:something<int>) (g:something<char> -> float) : float = 
```

但这需要以某种方式强制类型中的两个东西是相同的。换句话说，我希望能够将函数 f 称为：

```
f (Blah 1) (fun (b:blah<float>) -> .... )
f (Huha 1) (fun (b:huha<float>) -> .... ) 
```

显然，一个简单的解决方案是为函数 f 可能采用的所有类型创建一个可区分的联合，并让每个 g（即 f 的第二个参数）检查它是否获得了预期的任何类型。但这意味着拥有一个庞大的类型，每次发生任何变化时都会导致 Universe 重新编译，而且在运行时检查类型也没有多大帮助。

那么，有人可以看看以类型安全的方式做我想做的事吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:07:29.287

据我了解，您不能直接在 F# 中执行此操作。

但也许运算符重载会有所帮助。但是，您必须`f`为每种类型实现。但也许你可以委托给一个通用的实现。

运算符重载的代码示例，确保正确的类型：

```
type T<'a> =
   | T of 'a
   static member (.+.) (l:T<int>, r:T<char> -> float) = 42.0

type U<'a> =
   | U of 'a
   static member (.+.) (l:U<int>, r:U<char> -> float) = 13.1

let ft (t:T<char>) = 42.0

let fu (t:U<char>) = 42.0

let t = T 42 .+. ft
let u = U 13 .+. fu

// does not compile:
let wrong = T 42 .+. fu 
```

# java - Java 文件交换教程：为什么要在加密前将文件放入 jar 中？

> ID：11700080
> 
> 赞同：0
> 
> 时间：2012-07-28T10:09:28.260
> 
> 标签：java, encryption, signature, public-key-encryption

我希望用户使用非对称密钥签署文档。

我在这里阅读了 tut [http://docs.oracle.com/javase/tutorial/security/toolfilex/index.html](http://docs.oracle.com/javase/tutorial/security/toolfilex/index.html)

我不明白为什么 tut 要求将文档放入罐子中，然后在罐子上签名。如果我需要将其放入 jar 中，我该如何在运行时为将上传任何文档以进行签名的用户执行此操作？

SUN 还有其他的 tut 可以做真正的数字签名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:23:16.713

您的问题已在本教程的[介绍页面中得到解答。](http://docs.oracle.com/javase/tutorial/security/sigcert/index.html)您确实会使用 API 而不是 JDK 工具（旨在签署 jar 文件）在运行时在应用程序中执行此类操作：

> 您可以使用 JDK 安全 API、工具或组合来生成密钥和签名以及导入证书。您可以使用这些 API 或工具功能与他人安全地交换文档。要使用这些*工具*进行文档交换，必须将文档放在 JAR（Java ARchive）文件中，该文件可以由 jar 工具创建。

[...]

> [生成和验证签名](http://docs.oracle.com/javase/tutorial/security/apisign/index.html)向您展示了如何使用 JDK 安全 API 对文档进行签名。

# java - Clojure：是否有占位符表单/功能？

> ID：11700093
> 
> 赞同：3
> 
> 时间：2012-07-28T10:12:22.417
> 
> 标签：java, clojure, lisp

我正在使用 condp 表单并在其文档中注意到：

> 如果没有提供默认表达式并且没有子句匹配，则抛出 IllegalArgumentException。

我不需要处理不匹配也不想用 try 形式包围 condp。我正在考虑在那里放置一个占位符。什么是最快和最简单的 Clojure 占位符形式？

编辑：

谢谢大家的意见，很有帮助！此行为的用例是在用户触发的强制数据恢复任务中，我的应用程序需要动态解析 Clojure 代码以从日志文件中恢复数据。损坏的数据（不匹配）应被忽略，如果用 cond 写入相同的形式，则比 condp 需要更多的击键次数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T14:36:38.223

如果您不需要处理不匹配（即您可以保证总会有匹配），那么您不需要在其中放置任何内容作为占位符。

如果您认为总会有匹配项的假设被证明是错误的，那么您将收到 IllegalArgumentException - 但这是*一件好事*，因为它会立即告诉您代码中存在逻辑错误。这是古老[的快速失败原则](http://en.wikipedia.org/wiki/Fail-fast)在行动中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T10:47:19.390

你可以说：

```
(condp = option
  :foo 1
  :bar 2
  3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T10:44:42.433

简短回答：使用`nil`.

但是您不需要默认值的原因是您确定至少有一个谓词会成立，对吧？不是说你在依赖副作用，对吧？

# android - 在 AndEngine 中使 Sprite 的颜色更深或更浅

> ID：11700106
> 
> 赞同：2
> 
> 时间：2012-07-28T10:15:29.987
> 
> 标签：android, andengine, game-engine

有什么方法可以让 AndEngine 中的 Sprite 变暗或变亮？我不想使用 Alpha 的东西。

如果可能，请回复。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:34:55.877

sprite.setColor(pRed, pGreen, pBlue, pAlpha) 可能有用。使用 alpha 有什么问题？

# sql - 当我使用简单查询时，这工作正常，但是当通过 gridview 绑定数据时，这不起作用

> ID：11700107
> 
> 赞同：0
> 
> 时间：2012-07-28T10:15:34.653
> 
> 标签：sql, sql-server, sql-server-2008-r2

```
SELECT
    CAST(date AS DATE),
    SUM(amt) AS totamt
FROM TableName
GROUP BY CAST(date AS DATE) 
```

当我使用简单查询时，这工作正常，但是当通过 gridview 绑定数据时，这不起作用并引发错误：

> DataBinding：“System.Data.Common.DataRecordInternal”不包含名为“ExpenseDate”的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:17:54.163

您没有`ExpenseDate`从数据库中选择并尝试将该列绑定到您的 gridview 中。您应该编辑您的数据库查询以选择`ExpenseDate`然后在前端绑定它或从前端删除该绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:30:08.620

我认为您应该按照 gridview 的预期重命名日期列

```
SELECT 
CAST(date AS DATE) as ExpenseDate, 
SUM(amt) AS totamt 
FROM TableName 
GROUP BY CAST(date AS DATE) 
```

# ruby - 点云上的瘦

> ID：11700109
> 
> 赞同：2
> 
> 时间：2012-07-28T10:15:47.270
> 
> 标签：ruby, thin, dotcloud

我曾尝试按照[官方文档](http://docs.dotcloud.com/tutorials/ruby/thin/)在 dotcloud 上安装 Thin ，但失败了。
“瘦：向上...”出现在 cli 上，但我无法通过打开 web 应用程序的 url 看到它运行
PS 我不使用 ruby​​ 工人运行瘦，这是否相关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:23:33.843

本教程早于“定制服务”；[通过利用https://github.com/dotcloud/ruby-on-dotcloud](https://github.com/dotcloud/ruby-on-dotcloud)应该很容易想出更好的东西。

*编辑：*我写了一个新的瘦食谱；它比前一个简单得多，现在我们已经修复了`ruby-worker`服务中的一些差异，使其与其他服务更相似。它在那里可用：[https ://github.com/jpetazzo/thin-on-dotcloud](https://github.com/jpetazzo/thin-on-dotcloud)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T21:33:03.447

你也可以从这里安装thin：[https ://github.com/jpetazzo/thin](https://github.com/jpetazzo/thin)

我让它与 4 个非常简单的命令一起工作。

1.  克隆存储库

    `$ git clone git://github.com/jpetazzo/thin.git`

2.  进入根目录

    `$ cd thin`

3.  创建精简堆栈

    `$ dotcloud create thin`

4.  将 Thin 代码推送到 dotCloud

    `$ dotcloud push thin`

这对我有用。

# php - 从投资组合页面获取图像并在主页上发布

> ID：11700110
> 
> 赞同：-2
> 
> 时间：2012-07-28T10:15:49.637
> 
> 标签：php, javascript, jquery

嗨，我已经为自己创建了一个投资组合网站。在主页的右侧页脚中，我想从投资组合页面添加四个图像，每次加载页面时都会更改。谁能告诉我如何实现？

在投资组合页面上，这是 html 的结构：

```
<ul class="ourHolder">
        <li class="item" data-id="id-1" data-type="websites" >
            <img src="img/portfolio/websites/small/1.jpg" alt="">
            <div class="full"></div>
        </li>
        </li>
            <li class="item" data-id="id-2" data-type="pdesigns">
            <img src="img/portfolio/Print/small/1.jpg" alt="" />
            <div class="full"></div> 
        </li>
        <li class="item" data-id="id-3" data-type="ldesign">
            <img src="img/portfolio/Logo/small/001.jpg" alt="" />
            <div class="full"></div>
        </li>
 ....
 </ul> 
```

我正在使用 jquery 流沙插件来创建一个不错的效果。我正在尝试从该页面随机获取 4 张图像并将它们发布在页脚的主页上。这是我的网站：

[福克斯队网](http://foxteam.net)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:23:11.103

根据您提供的信息，您可以执行以下操作

```
//Database connection here
$sql="
SELECT image_link FROM photos
ORDER BY RAND()
LIMIT 4";
//Executing the query here
while($row = $result->fetch()){
  echo '<img src="', $row['image_link'], '" />';
} 
```

**编辑：**请注意，`ORDER BY RAND()`大表存在一些性能问题，如果您的“画廊”表小于 100，那么我认为您不必担心。

# php - 在登录会话期间计算用户在不同模式下的时间

> ID：11700114
> 
> 赞同：0
> 
> 时间：2012-07-28T10:16:17.023
> 
> 标签：php, mysql, html

我想存储用户登录时间。

登录后有 4 种模式 1\. 可用 2\. 休息 3\. 培训 4\. 电子邮件

当用户选择其中一种模式时，该模式的计时器开始增加。

然后需要存储注销时间。

在管理员端...管理员可以检查所有个人模式下用户的总时间。

所以问题是如何添加计时器以及计时器时间如何以 1 秒的间隔在数据库中更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:20:52.727

当用户启动任何模式时获取 unix 时间戳，当用户停止时获取 unix 时间戳。后者减去前者得到总时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:28:57.200

参考[PHP 时间](http://www.php.net/manual/en/function.date.php)。

设置初始链接输入当前时间。注销后，您还将记录时间。从初始登录时间中减去注销时间。

至于标记模式，您可以设置它，以便每个单独的模式都有不同的变量。

# ruby-on-rails-3 - Rails 中是否有类似 http://www.django-userena.org/ 的内容

> ID：11700116
> 
> 赞同：0
> 
> 时间：2012-07-28T10:16:23.653
> 
> 标签：ruby-on-rails-3, user-interface

Rails 3 中是否有类似[http://www.django-userena.org/](http://www.django-userena.org/)的东西。我是程序员而不是 UI 人员，但我想编写一个应用程序（将我的想法转化为真正的产品）。我可以在某个地方为 Rails 3 App 获得现成的 UI 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:39:05.990

看看activeadmin也许？ [http://activeadmin.info/](http://activeadmin.info/)

# ios - iOS UITableViewCells 行被回收并且标签不起作用

> ID：11700121
> 
> 赞同：0
> 
> 时间：2012-07-28T10:17:09.967
> 
> 标签：ios, ios4, dynamic, uitableview, tags

我想在为单元格中的按钮设置标签方面寻求一些帮助。这是一个链接到我之前发布的问题：[iOS Using NSDictionary to load data into section and rows](https://stackoverflow.com/questions/11673963/ios-using-nsdictionary-to-load-data-into-section-and-rows)

然而，虽然我现在可以动态地传递数据，但我在每一行上的续订按钮似乎无法获取数据，并且只会在选择该部分中的任何行时检测到每个部分的相同书名。

根据我到目前为止所阅读的内容，这是因为按钮正在被回收，因此无法检测到正确选择了哪本书。我试图设置标签：

```
cell.renewButton.tag = indexPath.row; 
```

我的代码现在的样子：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

static NSString *CellIdentifier = @"Cell";
UserCustomCell *cell = (UserCustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
cell.bookTitle.frame = CGRectMake(12, 0, 550, 40);

if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"UserCustomCell" owner:self options:nil];
    cell = userCustomCell;
    self.userCustomCell = nil;
    cell.renewButton.tag = indexPath.row;
}

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    cell.bookTitle.frame = CGRectMake(12, 0, 550, 40);
    cell.renewButton.frame = CGRectMake(600, 14, 68, 24);
}
[cell.renewButton useBlackActionSheetStyle]; 
```

//########## 编辑从这里开始 dataSource = [[NSMutableDictionary alloc] init]; // 这需要是一个 ivar

```
for (NSDictionary *rawItem in myArray) {
    NSString *date = [rawItem objectForKey:@"date"]; // Store in the dictionary using the data as the key

    NSMutableArray *section = [dataSource objectForKey:date]; // Grab the section that corresponds to the date

    if (!section) { // If there is no section then create one and add it to the dataSource
        section = [[NSMutableArray alloc] init];
        [dataSource setObject:section forKey:date];
    }

    [section addObject:rawItem]; // add your object
}
self.dataSource = dataSource;
//NSLog(@"Data Source Dictionary: %@", dataSource); 

NSArray *sections =[[dataSource allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];
NSString *sectionTitle = [sections objectAtIndex:indexPath.section];

NSArray *items = [dataSource objectForKey:sectionTitle];

NSDictionary *dict = [items objectAtIndex:indexPath.row];
cell.bookTitle.text = [dict objectForKey:@"name"];
cell.detail.text = [NSString stringWithFormat:@"Due Date: %@ Due Time: %@", 
                    [dict objectForKey:@"date"], [dict objectForKey:@"time"]];

cell.renewButton.tag = indexPath.row;
return cell; 
```

}

但它根本不起作用。非常感谢任何建议:)谢谢！

PS：我的 xcode 副本没有更新，只更新到 version4。看到有人提到在 DataModel 中存储标签状态，但它仅在较新版本中可用。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:23:13.710

您不能使用按钮标签，因为这些标签与回收它们的单元格的标签相同。相反，使用`indexPath`来确定您在哪一行并直接使用它。无需通过按钮标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:33:44.833

我看不到您的 cell.renewButton 被分配了选择器方法（应该在点击按钮时触发的方法）。

```
[cell.renewButton addTarget:self action:@selector(renewButtonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

另外，我会指定一个带有偏移量的标签号，因为 0 的标签几乎就像根本没有标签一样。tableView 的第一行将给出 indexPath.row = 0。

在您的代码之上，

```
#define OFFSET 100 /* Or any number greater than 0 */ 
```

在 cellForRowAtIndexPath 中，

```
...
[cell.renewButton addTarget:self action:@selector(renewButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
cell.renewbutton.tag = indexPath.row + OFFSET;
... 
```

在 renewButtonPressed 方法中，

```
-(void)renewButtonPressed:(id)sender
{
    tappedNum = [sender tag] - OFFSET;
    /* do your stuff */
} 
```

tappedNum 将为您提供点击按钮的行，从 0 开始。

# php - 我可以使用哪些工具将 PHP 代码部署到生产服务器？

> ID：11700123
> 
> 赞同：0
> 
> 时间：2012-07-28T10:17:18.193
> 
> 标签：php, deployment

到目前为止，我只知道[Capifony](http://capifony.org/)，但主要是针对 Symfony 的。

我只需要一个脚本来运行测试、检查版本、打包一些文件、将它们发送到服务器并在那里运行一些命令。

我听说过持续集成，但它看起来很复杂，我不确定这是否是我需要的。

任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:19:24.647

你应该看看`r-sync`，这是我们在我公司使用的。
您可以在这里查看一些描述：[http ://en.wikipedia.org/wiki/Rsync](http://en.wikipedia.org/wiki/Rsync)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:18:42.070

你可以试试[Capistrano](http://en.wikipedia.org/wiki/Capistrano)

尽管这个工具适用于 Ruby 项目，但它也可以用于 PHP 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:26:38.670

如果您在服务器上具有 shell 访问权限，则批处理模式下的[scp](http://linux.die.net/man/1/scp)可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T01:44:21.400

对于仅部署（不运行测试），您可以使用源代码控制系统。在我的公司，我们只需将所有经过测试和工作的代码检查到一个 prod 分支中，然后登录到我们的生产帐户和`sv update`该应用程序。（我们目前正在使用 subversion 进行源代码控制）

# hadoop - 如何从具有特定分区的配置单元中选择数据？

> ID：11700127
> 
> 赞同：14
> 
> 时间：2012-07-28T10:17:39.137
> 
> 标签：hadoop, hive

每个人。以下是与蜂巢的互动：

```
hive> show partitions TABLENAME
pt=2012.07.28.08/is_complete=1
pt=2012.07.28.09/is_complete=1
pt=2012.07.28.10/is_complete=1
pt=2012.07.28.11/is_complete=1
hive> select * from TABLENAME where pt='2012.07.28.10/is_complete=1' limit 1;
OK
Time taken: 2.807 seconds
hive> select * from TABLENAME where pt='2012.07.28.10' limit 1;
OK
61806fd3-5535-42a1-9ca5-91676d0e783f    1.160.243.215.1343401203879.1   2012-07-28 23:36:37
Time taken: 3.8 seconds
hive> 
```

我的问题是为什么第一个选择无法获取数据？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-28T10:42:59.480

“is_complete”是一列，就像“pt”一样，所以正确的查询是：

```
select * from TABLENAME where pt='2012.07.28.10' and is_complete='1' limit 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-09T12:36:35.190

如果你使用的是 Ambari，可以如下查询

```
select * from TABLE NAME WHERE PARTITION NAME and AND ANOTHER PARTITION NAME LIMIT 10 
```

这里分区与表相关联，因此我们直接将它们视为表进行查询（简单类比）。这里“/”符号告诉它另一个文件夹目录。每个分区表数据将存储在关联目录中。例如，如果我们有如下分区

```
year=2017/month=11/day=1/part=1 
```

那么我们可以使用

```
select * from TABLE NAME where year=2017 AND month=11 AND day=1 AND part=1 LIMIT 10; 
```

# android - 在 Google 地图 Android 中显示路线

> ID：11700129
> 
> 赞同：3
> 
> 时间：2012-07-28T10:17:47.313
> 
> 标签：android, google-maps, android-mapview, kml

我在android中有一个谷歌地图问题。
我成功在 android 上显示地图。但是当我想显示路线方向时，它会出错。奇怪的想法是。我的代码一周前运行良好。但是当我今天运行它时，它会出错。所以我试图找到新的代码，但它失败了。这是我的代码。这是我的公路课

```
public class Road {
    public String mName;
    public String mDescription;
    public int mColor;
    public int mWidth;
    public double[][] mRoute = new double[][] {};
    public Point[] mPoints = new Point[] {};} 
```

这是我的重点课

```
public class Point {
    String mName;
    String mDescription;
    String mIconUrl;
    double mLatitude;
    double mLongitude;} 
```

这是我的地图覆盖类

```
public class MapOverlay extends com.google.android.maps.Overlay {   
 Road mRoad;
 ArrayList<GeoPoint> mPoints;

 public MapOverlay(Road road, MapView mv) {
         mRoad = road;
         if (road.mRoute.length > 0) {
                 mPoints = new ArrayList<GeoPoint>();
                 for (int i = 0; i < road.mRoute.length; i++) {
                         mPoints.add(new GeoPoint((int) (road.mRoute[i][1] * 1000000),
                                         (int) (road.mRoute[i][0] * 1000000)));
                 }
                 int moveToLat = (mPoints.get(0).getLatitudeE6() + (mPoints.get(
                                 mPoints.size() - 1).getLatitudeE6() - mPoints.get(0)
                                 .getLatitudeE6()) / 2);
                 int moveToLong = (mPoints.get(0).getLongitudeE6() + (mPoints.get(
                                 mPoints.size() - 1).getLongitudeE6() - mPoints.get(0)
                                 .getLongitudeE6()) / 2);
                 GeoPoint moveTo = new GeoPoint(moveToLat, moveToLong);

                 MapController mapController = mv.getController();
                 mapController.animateTo(moveTo);
                 mapController.setZoom(7);
         }
 }

 @Override
 public boolean draw(Canvas canvas, MapView mv, boolean shadow, long when) {
         super.draw(canvas, mv, shadow);
         drawPath(mv, canvas);
         return true;
 }

 public void drawPath(MapView mv, Canvas canvas) {
         int x1 = -1, y1 = -1, x2 = -1, y2 = -1;
         Paint paint = new Paint();
         paint.setColor(Color.GREEN);
         paint.setStyle(Paint.Style.STROKE);
         paint.setStrokeWidth(3);
         for (int i = 0; i < mPoints.size(); i++) {
                 Point point = new Point();
                 mv.getProjection().toPixels(mPoints.get(i), point);
                 x2 = point.x;
                 y2 = point.y;
                 if (i > 0) {
                         canvas.drawLine(x1, y1, x2, y2, paint);
                 }
                 x1 = x2;
                 y1 = y2;
         }
 }} 
```

这是我的道路提供者课程

```
public class RoadProvider {

    public static Road getRoute(InputStream is) {
            KMLHandler handler = new KMLHandler();
            try {
                    SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
                    parser.parse(is, handler);
            } catch (ParserConfigurationException e) {
                    e.printStackTrace();
            } catch (SAXException e) {
                    e.printStackTrace();
            } catch (IOException e) {
                    e.printStackTrace();
            }
            return handler.mRoad;
    }

    public static String getUrl(double fromLat, double fromLon, double toLat,
                    double toLon) {// connect to map web service
            StringBuffer urlString = new StringBuffer();
            urlString.append("http://maps.google.com/maps?f=d&hl=en");
            urlString.append("&saddr=");// from
            urlString.append(Double.toString(fromLat));
            urlString.append(",");
            urlString.append(Double.toString(fromLon));
            urlString.append("&daddr=");// to
            urlString.append(Double.toString(toLat));
            urlString.append(",");
            urlString.append(Double.toString(toLon));
            urlString.append("&ie=UTF8&0&om=0&output=kml");
            return urlString.toString();
    }}
class KMLHandler extends DefaultHandler {
    Road mRoad;
    boolean isPlacemark;
    boolean isRoute;
    boolean isItemIcon;
    private Stack mCurrentElement = new Stack();
    private String mString;

    public KMLHandler() {
            mRoad = new Road();
    }

    public void startElement(String uri, String localName, String name,
                    Attributes attributes) throws SAXException {
            mCurrentElement.push(localName);
            if (localName.equalsIgnoreCase("Placemark")) {
                    isPlacemark = true;
                    mRoad.mPoints = addPoint(mRoad.mPoints);
            } else if (localName.equalsIgnoreCase("ItemIcon")) {
                    if (isPlacemark)
                            isItemIcon = true;
            }
            mString = new String();
    }

    public void characters(char[] ch, int start, int length)
                    throws SAXException {
            String chars = new String(ch, start, length).trim();
            mString = mString.concat(chars);
    }

    public void endElement(String uri, String localName, String name)
                    throws SAXException {
            if (mString.length() > 0) {
                    if (localName.equalsIgnoreCase("name")) {
                            if (isPlacemark) {
                                    isRoute = mString.equalsIgnoreCase("Route");
                                    if (!isRoute) {
                                            mRoad.mPoints[mRoad.mPoints.length - 1].mName = mString;
                                    }
                            } else {
                                    mRoad.mName = mString;
                            }
                    } else if (localName.equalsIgnoreCase("color") && !isPlacemark) {
                            mRoad.mColor = Integer.parseInt(mString, 16);
                    } else if (localName.equalsIgnoreCase("width") && !isPlacemark) {
                            mRoad.mWidth = Integer.parseInt(mString);
                    } else if (localName.equalsIgnoreCase("description")) {
                            if (isPlacemark) {
                                    String description = cleanup(mString);
                                    if (!isRoute)
                                            mRoad.mPoints[mRoad.mPoints.length - 1].mDescription = description;
                                    else
                                            mRoad.mDescription = description;
                            }
                    } else if (localName.equalsIgnoreCase("href")) {
                            if (isItemIcon) {
                                    mRoad.mPoints[mRoad.mPoints.length - 1].mIconUrl = mString;
                            }
                    } else if (localName.equalsIgnoreCase("coordinates")) {
                            if (isPlacemark) {
                                    if (!isRoute) {
                                            String[] xyParsed = split(mString, ",");
                                            double lon = Double.parseDouble(xyParsed[0]);
                                            double lat = Double.parseDouble(xyParsed[1]);
                                            mRoad.mPoints[mRoad.mPoints.length - 1].mLatitude = lat;
                                            mRoad.mPoints[mRoad.mPoints.length - 1].mLongitude = lon;
                                    } else {
                                            String[] coodrinatesParsed = split(mString, " ");
                                            int lenNew = coodrinatesParsed.length;
                                            int lenOld = mRoad.mRoute.length;
                                            double[][] temp = new double[lenOld + lenNew][2];
                                            for (int i = 0; i < lenOld; i++) {
                                                    temp[i] = mRoad.mRoute[i];
                                            }
                                            for (int i = 0; i < lenNew; i++) {
                                                    String[] xyParsed = split(coodrinatesParsed[i], ",");
                                                    for (int j = 0; j < 2 && j < xyParsed.length; j++)
                                                            temp[lenOld + i][j] = Double
                                                                            .parseDouble(xyParsed[j]);
                                            }
                                            mRoad.mRoute = temp;
                                    }
                            }
                    }
            }
            mCurrentElement.pop();
            if (localName.equalsIgnoreCase("Placemark")) {
                    isPlacemark = false;
                    if (isRoute)
                            isRoute = false;
            } else if (localName.equalsIgnoreCase("ItemIcon")) {
                    if (isItemIcon)
                            isItemIcon = false;
            }
    }

    private String cleanup(String value) {
            String remove = "<br/>";
            int index = value.indexOf(remove);
            if (index != -1)
                    value = value.substring(0, index);
            remove = "&#160;";
            index = value.indexOf(remove);
            int len = remove.length();
            while (index != -1) {
                    value = value.substring(0, index).concat(
                                    value.substring(index + len, value.length()));
                    index = value.indexOf(remove);
            }
            return value;
    }

    public Point[] addPoint(Point[] points) {
            Point[] result = new Point[points.length + 1];
            for (int i = 0; i < points.length; i++)
                    result[i] = points[i];
            result[points.length] = new Point();
            return result;
    }

    private static String[] split(String strString, String strDelimiter) {
            String[] strArray;
            int iOccurrences = 0;
            int iIndexOfInnerString = 0;
            int iIndexOfDelimiter = 0;
            int iCounter = 0;
            if (strString == null) {
                    throw new IllegalArgumentException("Input string cannot be null.");
            }
            if (strDelimiter.length() <= 0 || strDelimiter == null) {
                    throw new IllegalArgumentException(
                                    "Delimeter cannot be null or empty.");
            }
            if (strString.startsWith(strDelimiter)) {
                    strString = strString.substring(strDelimiter.length());
            }
            if (!strString.endsWith(strDelimiter)) {
                    strString += strDelimiter;
            }
            while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
                            iIndexOfInnerString)) != -1) {
                    iOccurrences += 1;
                    iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
            }
            strArray = new String[iOccurrences];
            iIndexOfInnerString = 0;
            iIndexOfDelimiter = 0;
            while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
                            iIndexOfInnerString)) != -1) {
                    strArray[iCounter] = strString.substring(iIndexOfInnerString,
                                    iIndexOfDelimiter);
                    iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
                    iCounter += 1;
            }

            return strArray;
    }} 
```

这是主要活动

```
public class GoogleMap233Activity extends MapActivity {
     LinearLayout linearLayout;
     MapView mapView;
     private Road mRoad;    
     @Override
     public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      mapView = (MapView) findViewById(R.id.mapview);
      mapView.setBuiltInZoomControls(true);    
      new Thread() {
       @Override
       public void run() {
        double fromLat = 49.85, fromLon = 24.016667; 
        double toLat = 50.45, toLon = 30.523333;
        String url = RoadProvider
          .getUrl(fromLat, fromLon, toLat, toLon);
        InputStream is = getConnection(url);

        mRoad = RoadProvider.getRoute(is);
        Log.i("Road", mRoad.mRoute.length+"");
        mHandler.sendEmptyMessage(0);
       }
      }.start();
     }

     Handler mHandler = new Handler() {
      public void handleMessage(android.os.Message msg) {
       TextView textView = (TextView) findViewById(R.id.description);
       textView.setText(mRoad.mName + " " + mRoad.mDescription);
       MapOverlay mapOverlay = new MapOverlay(mRoad, mapView);
       List<Overlay> listOfOverlays = mapView.getOverlays();
       listOfOverlays.clear();
       listOfOverlays.add(mapOverlay);
       mapView.invalidate();
      };
     };

     private InputStream getConnection(String url) {
      InputStream is = null;
      try {
       URLConnection conn = new URL(url).openConnection();
       is = conn.getInputStream();
      } catch (MalformedURLException e) {
       e.printStackTrace();
      } catch (IOException e) {
       e.printStackTrace();
      }
      return is;
     }    
     @Override
     protected boolean isRouteDisplayed() {
      return false;
     }
    } 
```

此代码在 mPoints.size() 的 drawPath() 方法中的类 MapOverlay() 中显示错误。这是因为 mPoints 为空。基于 mapOverlay() 的构造函数，mPoints 为 null，因为 road.mRoute.length ==0。当我检查 roadProvider 时，日志说这部分错误

```
SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
                parser.parse(is, handler); 
```

有人可以帮我检查一下。多谢。

# java - 如何在 java 信任库中导入 jks 证书

> ID：11700132
> 
> 赞同：6
> 
> 时间：2012-07-28T10:17:55.223
> 
> 标签：java, ssl, https, keytool, jks

如何将 .jks 文件导入 java 安全的信任库？我看到的所有教程都是使用“.crt”文件。但是，我只有“.jks”文件，它也是我使用 keytool 命令生成的密钥库。

目前，我正在关注[本教程](http://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html)。

我能够根据本教程生成 Java 密钥库和密钥对，并为现有 Java 密钥库生成证书签名请求 (CSR)。但是我无法将根证书或中间 CA 证书导入现有的 Java 密钥库，也无法将签名的主证书导入现有的 Java 密钥库，因为它正在寻找“.cert”文件。

我是否遗漏了教程中列出的步骤？如果我拥有的唯一文件是“.jks”文件，我如何信任证书？“.csr”文件有什么用？

请注意，我使用的是 Windows。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-28T10:35:25.783

这`".jks"` *是*信任库，或者如果您将其分配给 JSSE 至少应该是信任库。您应该将 CA 的证书添加到该文件中。然后，软件将通过遍历证书来查找证书链。私钥应保留在（受密码保护的）`".jks"`文件中。

换句话说，您应该将证书导入而`".jks"`不是导出证书。如果您的证书请求的响应中未包含特定提供商的证书，您可能需要单独下载它们。您可能也可以从您最喜欢的浏览器中导出它们。通常这些以 X5.09 DER 格式存储（应该与 Java 兼容`keytool`）。

步骤（一般）：

1.  生成密钥对和证书请求，存储到新的或现有的密钥库 ( `.jks`)
2.  发送要签名的证书请求，获取以您请求的证书开头的链
3.  使用私钥将证书链导入密钥库
4.  为需要进行验证的一方（使用 SSL 时至少一个或多个客户端）生成新的或使用现有的密钥库，并导入证书链
5.  信任上述密钥库中证书链中的证书，可能是最顶层的证书（“根”证书）。
6.  配置和测试各方，例如使用带有私钥的密钥库的服务器和使用后一个密钥库的多个客户端。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-08T10:01:18.790

```
#Use Keytool command to generate a self-signed certificate and install the certificate in Client Machine JDK Security Key store path.

# generate a certificate using JKS format keystore
keytool -genkey -alias selfrest -keyalg RSA -keypass pass123 -storetype JKS -keystore selfsigned.jks -storepass pass123 -validity 360 -keysize 2048

# To check the content of the keystore, we can use keytool again:
keytool -list -v -keystore selfsigned.jks

#Export Self signed certificate into .cer file
keytool -exportcert -alias selfrest -keystore selfsigned.jks -file selfsigned.cer

# (Run As Administrator- to open CMD.exe)
# Install self-signed certificate into Java JDK CA Certificate key store path
# to avoid giving certificate path in the client program.
keytool -import -alias selfrest -keystore "C:\Program Files\Java\jdk1.8.0_181\jre\lib\security\cacerts" -file selfsigned.cer

# List certificates stored in JDK Key store which you have just now imported into JDK Security path.
keytool -list -keystore "%JAVA_HOME%\jre\lib\security\cacerts 
```

# ios - 如何传递非插值数据OpenGL ES（GLSL）

> ID：11700134
> 
> 赞同：3
> 
> 时间：2012-07-28T10:18:02.153
> 
> 标签：ios, opengl-es, glsl, opengl-es-2.0

我正在尝试将简单的 FLOAT 值从顶点传递到片段着色器。如何在不插值的情况下“按原样”传递它？在桌面上我可以使用平面变化来禁用插值，openGL es中是否有类似的东西，或者唯一的方法是通过纹理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T14:35:58.237

GLSL ES 目前不支持`flat`关键字，因此唯一的方法是在所有三角形顶点中使用相同的浮点值。

这里给出了相同的答案： [在opengl es 2中，有没有办法防止变化的插值](https://stackoverflow.com/questions/3409516/in-opengl-es-2-is-there-a-way-to-prevent-interpolation-of-varyings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-18T05:52:32.830

GLSL ES 2.0 不支持`flat` [插值限定符](https://www.khronos.org/opengl/wiki/Type_Qualifier_(GLSL)#Interpolation_qualifiers)，就像它不支持积分顶点着色器输出变量一样。
比较[OpenGL ES 2.0 规范](https://www.khronos.org/registry/OpenGL/specs/es/2.0/es_full_spec_2.0.pdf)和[OpenGL ES 3.0。规格](https://www.khronos.org/registry/OpenGL/specs/es/3.0/es_spec_3.0.pdf)。

# mercurial - 在做 qpush 时，我可以得到一个合并工具而不是 .rej 文件吗？

> ID：11700136
> 
> 赞同：4
> 
> 时间：2012-07-28T10:18:28.030
> 
> 标签：mercurial, hgsubversion, mercurial-queue

我最近开始使用 mq，这是一种很棒的工作方式。让我有点恼火的一件事是，当我在执行拉取和更新后 qpush 我的补丁时，如果存在冲突，我最终会得到 .rej 文件。

如果 Mercurial 可以只打开 TortoiseMerge 那就太好了，这样我就可以尽快解决冲突，而不必一个一个地打开 .rej 文件并以更手动、更慢的方式进行操作。

甚至文件中的 svn 风格的冲突标记也比 .rej 文件更容易使用。

有没有办法绕过这些 .rej 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T06:54:02.260

`hg pull --rebase`只要您想将补丁重新定位到更新的基础上，就可以工作。你需要有你想要 rebase qpushed 的补丁。如果您想要重新定位的修订版已经在您的存储库中，请将其剥离并从剥离备份包中提取。

# ruby-on-rails - Mongoid 3.0 嵌入式 1-N 查询，用于列出所有嵌入式字段

> ID：11700139
> 
> 赞同：2
> 
> 时间：2012-07-28T10:18:44.397
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

假设[嵌入式 1-N](http://mongoid.org/en/mongoid/docs/relations.html#embeds_many)模型如下：

```
class Band
  include Mongoid::Document
  field :group_name 

  embeds_many :albums
end

class Album
  include Mongoid::Document
  field :name
  field :sold

  embedded_in :band
end 
```

如何获得每个乐队的专辑名称的完整列表？

我的意思是我必须首先获得所有乐队，然后对于每个乐队我都会得到他的名字，我尝试了以下一些变体：

```
Band.all.each do |band|
  band.albums.all.each do |album|
    album.name
  end
end 
```

但不起作用，我错过了什么？

更新

在[abhas 之后](https://stackoverflow.com/users/1051778/abhas)，它只适用于添加数组：

```
album_array = []
Band.all.each do |band|
  band.albums.all.each do |album|
    album_array << album.name
  end
end 
```

然后

```
album_array.each{|a|a} 
```

取回列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:00:45.733

你给出的循环是正确的，它工作得很好，但你没有保存任何地方的任何价值`album.name`。只需将其保存在数组或其他东西中并检查数组的内容。我想它会有所有的名字。

# android - 无法获取在 ExpandableListView 中输入到编辑文本中的字符串（不是通常的焦点问题）

> ID：11700143
> 
> 赞同：1
> 
> 时间：2012-07-28T10:19:10.963
> 
> 标签：android, android-edittext, expandablelistview

嘿，所以基本上我有一个应用程序的登录/注册屏幕，我必须使用 ExpandableListView 来制作它，如图所示。

根据孩子在小组中的位置，我夸大了不同的观点。所以对于位置 0 和 1，我已经膨胀了 2 个不同的 EditText 框。

我的问题是我无法获得在两个框中输入的文本。

该框允许我连续输入，但是当我单击登录按钮时，我使用 getText 从用户名和密码框中获得的字符串都是空的！

[登录屏幕截图 http://img801.imageshack.us/img801/5544/shot000005w.png](http://img801.imageshack.us/img801/5544/shot000005w.png) [用户名 Toast 为空 http://img21.imageshack.us/img21/3825/shot000006y.png](http://img21.imageshack.us/img21/3825/shot000006y.png) [密码 Toast 为空 http:// /img542.imageshack.us/img542/8804/shot000007.png](http://img542.imageshack.us/img542/8804/shot000007.png)

这是来自 CustomExpandableAdapter 的 getChildView：

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
   v = null;

   position = 0;
   position=getChildId(groupPosition, childPosition);

   if(position==0) //draw the username editbox
   {
    v = inflater.inflate(R.layout.username, parent, false);
    Element c = (Element)getChild( groupPosition, childPosition );
    username = (EditText)v.findViewById( R.id.username);

    if( username != null )          
         username.setHint(c.getElement());

    }
   else if(position==1)
   {
       if(convertView == inflater.inflate(R.layout.password, parent, false))
        return convertView;
       v = inflater.inflate(R.layout.password, parent, false);
       convertView = inflater.inflate(R.layout.password, parent, false);
        Element c = (Element)getChild( groupPosition, childPosition );
        password = (EditText)v.findViewById( R.id.password);
    if( password != null )          
         password.setHint(c.getElement());

   }
   else if (position>1023 && position<1028)
   {
        v = inflater.inflate(R.layout.child_row, parent, false);
        Element c = (Element)getChild( groupPosition, childPosition );
        et = (EditText)v.findViewById( R.id.et);

    if( et != null )            
         et.setHint(c.getElement());
   }

   else if(position==1028)
    {

        v = inflater.inflate(R.layout.gender, parent, false);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
          context, R.array.gender, android.R.layout.simple_spinner_item );
        adapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
        s = (Spinner) v.findViewById( R.id.spinner_gend );
        s.setAdapter( adapter );
    }

   else if(position==2)  //Forgot Button
   {
       v = inflater.inflate(R.layout.forgot, parent, false);
       Button forgot = (Button)v.findViewById(R.id.fpb);
       forgot.setOnClickListener(this);

   }

   else if(position==3)  //Sign-in Button
   {
       v = inflater.inflate(R.layout.sign_in_button, parent, false);
       ImageButton sign_in = (ImageButton)v.findViewById(R.id.sign_in_button);
       sign_in.setOnClickListener(this); 

}
   return v;
} 
```

稍后在代码中我有登录按钮的 onClick ：

```
case R.id.sign_in_button: {
        String user_name = username.getText().toString();
        String pass_word=password.getText().toString();
        Toast.makeText(context,"u:"+ user_name, 3000).show();
        Toast.makeText(context, "p:"+pass_word, 3000).show();
                    //Other unrelated Database Code

    } 
```

这里 Toasts 总是只显示 u: 和 p:

有人帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:22:41.257

我只是使用了一个 TextWatcher（在此之前无法正常工作）代码在这里：

```
@Override
public void afterTextChanged(Editable s) {

    user_name=s.toString();
}
@Override
public void beforeTextChanged(CharSequence s, int start,
        int count, int after) {
    // TODO Auto-generated method stub

}
@Override
public void onTextChanged(CharSequence s, int start, int before,
        int count) {
    // TODO Auto-generated method stub

} 
```

# algorithm - Knuth 的 Dancing Links 算法的数据结构

> ID：11700147
> 
> 赞同：5
> 
> 时间：2012-07-28T10:19:45.007
> 
> 标签：algorithm, data-structures, linked-list, knuth

如果我的问题听起来很愚蠢，我很抱歉，因为我对数据结构的理解不是很好。

我一直在阅读[Knuth 的 Dancing Links](http://en.wikipedia.org/wiki/Dancing_Links)算法，并且非常了解它的基本工作原理。提到dancing link的数据结构可视化看起来像一个有列有行的表格，每个单元格都连接到它们的上、下、左、右单元格。我还读过这个算法中使用了循环双链表。

我想知道的是如何将双链表精确地制成具有列和行的表？

据我所知，大多数双链表只有 2 个指针（上和下），这是否意味着我必须制作自己的自定义链表，它有 4 个指针（上、下、左和右）？还是有其他方法？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T10:30:42.457

该算法对每一行和每一列都使用一个双向链表，而不仅仅是一个列表。

这篇[关于使用跳舞链接解决数独](https://web.archive.org/web/20110721162204/http://cgi.cse.unsw.edu.au/~xche635/dlx_sodoku/)的文章有一个很好的画面。

至少在本文的代码中，行确实表示为左右指针，列表示同一节点中的上下指针，或多或少如您描述的那样，因此列表是相互连接的。

# java - 为 audioRecord 实现 getMaxAmplitude

> ID：11700149
> 
> 赞同：13
> 
> 时间：2012-07-28T10:19:51.643
> 
> 标签：java, android, android-audiorecord

我在我的应用程序中使用 audioRecord 而不是 mediarecorder 它工作正常，但我有一个高度依赖于最大振幅的逻辑，使用音频记录很难获得这里是我在读取缓冲区时使用的

```
 private void writeAudioDataToFile(){
        byte data[] = new byte[bufferSize];

        String filename = getTempFilename();
        FileOutputStream os = null;

        try {
            os = new FileOutputStream(filename);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        int read = 0;
        max=0;
        if(null != os){
            while(isRecording){
                read = recorder.read(buffer, 0, bufferSize);
                int ab = (buffer[0] & 0xff) << 8 | buffer[1];
                amplitude = Math.abs(ab);

            if(amplitude>0&&amplitude<25000)
                isSilence=true;         
            else
                isSilence=false;

                //System.out.println(">>>>>>>>>>>"+amplitude);
                if(AudioRecord.ERROR_INVALID_OPERATION != read){
                    try {
                        os.write(buffer);
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            }

            try {
                os.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    } 
```

但这对我不起作用，因为值变化非常快，我需要为 audioRecord 实现 getMaxAmplitude() 之类的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-30T10:34:57.210

```
int amplitude = (buffer[0] & 0xff) << 8 | buffer[1];
amplitude = Math.abs(ab); 
```

你在这里犯错了吗？我认为应该是

```
int ab = (buffer[0] & 0xff) << 8 | buffer[1];
int amplitude = Math.abs(ab); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-30T23:18:17.277

这可以满足您的需求以及更多...然后它将最大点输出到在 excel 中可读的文件。（我自己解决了这个问题，所以时机很偶然。）

```
package com.example.audiorecord;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Calendar;

import android.app.Activity;
import android.media.AudioFormat;
import android.media.AudioRecord;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {
        private static final int RECORDER_SAMPLERATE = 44100;
        private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_MONO;
        private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;
        private AudioRecord recorder = null;
        private Thread recordingThread = null;
        private boolean isRecording = false;
        private String floatString = "";

        Calendar c = Calendar.getInstance();
        SimpleDateFormat df = new SimpleDateFormat("ddMMMyyyy_HHmmss");
        String formattedDate = df.format(c.getTime());

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            setButtonHandlers();
            enableButtons(false);

            int bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE,
                    RECORDER_CHANNELS, RECORDER_AUDIO_ENCODING); 
        }

        private void setButtonHandlers() {
            ((Button) findViewById(R.id.btnStart)).setOnClickListener(btnClick);
            ((Button) findViewById(R.id.btnStop)).setOnClickListener(btnClick);
        }

        private void enableButton(int id, boolean isEnable) {
            ((Button) findViewById(id)).setEnabled(isEnable);
        }

        private void enableButtons(boolean isRecording) {
            enableButton(R.id.btnStart, !isRecording);
            enableButton(R.id.btnStop, isRecording);
        }

        int BufferElements2Rec = 1024; // want to play 2048 (2K) since 2 bytes we use only 1024
        int BytesPerElement = 2; // 2 bytes in 16bit format

        private void startRecording() {
            final File logFile = new File("sdcard/log_"+formattedDate+".txt");
               if (!logFile.exists())
               {
                  try
                  {
                     logFile.createNewFile();
                  } 
                  catch (IOException e)
                  {
                     // TODO Auto-generated catch block
                     e.printStackTrace();
                  }
               }

            recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
                    RECORDER_SAMPLERATE, RECORDER_CHANNELS,
                    RECORDER_AUDIO_ENCODING, BufferElements2Rec * BytesPerElement);

            recorder.startRecording();
            isRecording = true;
            recordingThread = new Thread(new Runnable() {
                public void run() {
                    writeAudioDataToFile(logFile);
                }
            }, "AudioRecorder Thread");
            recordingThread.start();
        }

        private void writeAudioDataToFile(File logFile) {
            // Write the output audio in byte

            short sData[] = new short[BufferElements2Rec];
            while (isRecording) {
                // gets the voice output from microphone to byte format

                recorder.read(sData, 0, BufferElements2Rec);
                String sDataString = "";
                double sDataMax = 0;
                for(int i=0; i<sData.length; i++){
                    if(Math.abs(sData[i])>=sDataMax){sDataMax=Math.abs(sData[i]);};
                    sDataString += "\n" + sDataMax;

                }

               try
               {
                  //BufferedWriter for performance, true to set append to file flag
                  BufferedWriter buf = new BufferedWriter(new FileWriter(logFile, true)); 
                  buf.append(sDataString);
                  buf.newLine();
                  buf.close();
               }
               catch (IOException e)
               {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
               }
        }
        }
        private void stopRecording() {
            // stops the recording activity
            if (null != recorder) {
                isRecording = false;
                recorder.stop();
                recorder.release();
                recorder = null;
                recordingThread = null;
            }
        }

        private View.OnClickListener btnClick = new View.OnClickListener() {
            public void onClick(View v) {
                switch (v.getId()) {
                case R.id.btnStart: {
                    enableButtons(true);
                    startRecording();
                    break;
                }
                case R.id.btnStop: {
                    enableButtons(false);
                    stopRecording();
                    break;
                }
                }
            }
        };

        @Override
        public boolean onKeyDown(int keyCode, KeyEvent event) {
            if (keyCode == KeyEvent.KEYCODE_BACK) {
                finish();
            }
            return super.onKeyDown(keyCode, event);
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-01T08:38:22.420

如果你的编码是`ENCODING_PCM_16BIT`，那么你应该使用

```
private int cAmplitude= 0;

while(isRecording) {
    read = recorder.read(data, 0, bufferSize);

    for (int i=0; i<read/2; i++) {
        short curSample = getShort(data[i*2], data[i*2+1]);
        if (curSample > cAmplitude) {
            cAmplitude = curSample;
        }
    }

    Log.d("amplitude",Integer.toString(cAmplitude));
    cAmplitude = 0;
}

private short getShort(byte argB1, byte argB2) {
    return (short)(argB1 | (argB2 << 8));
} 
```

有关更多信息，请查看[如何在 Android 中以“wav”格式录制语音](https://stackoverflow.com/questions/4871149/how-to-record-voice-in-wav-format-in-android)

# oracle - 我无法连接到另一个系统中的 Oracle XE 数据库？

> ID：11700154
> 
> 赞同：0
> 
> 时间：2012-07-28T10:20:45.987
> 
> 标签：oracle

我已使用此代码连接到 XE 数据库：

```
 OracleConnection con = new OracleConnection();
        con.ConnectionString = "data source=XE;user id=hr;password=sdmo1365";
        con.Open();
        OracleCommand com = new OracleCommand();
        com.CommandText = "select * from regions;";
        com.Connection = con;
        DataTable dt = new DataTable();
        dt.Load(com.ExecuteReader());
        con.Close();
        grd.DataSource = dt;
        grd.DataBind(); 
```

它在一台电脑上工作，而在另一台电脑上不工作并给出此错误： **用户代码未处理 oracleexception** 这些电脑的 tnsnames.ora 的唯一区别在于不工作的主机更长（因为用户在domain:) (HOST = MOSININI-9.novini.mms.sti) 这是问题所在吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T03:43:37.567

I simply reinstalled it and everything get solved!(I waste 2 hours)

# css - 灵活的div定位

> ID：11700155
> 
> 赞同：1
> 
> 时间：2012-07-28T10:20:52.427
> 
> 标签：css, html, position

我在一个页面上有几个 div，它们都具有相同的宽度但不同的高度。它们都在一个 div 中，即`#note1PreviewDiv`. 他们都共享 class `.note`，该 class 具有以下 css 代码（以及其他）：

```
.note{
    width: 160px;
    padding: 10px;
    margin: 10px;
    background: #e3f0ff;
    float: left;
} 
```

我认为`float: left;`它们都会自动对齐，以便它们彼此之间很好地对齐。

这是它的外观预览：

[当前状态 http://posti.sh/img/ist.png](http://posti.sh/img/ist.png)

定位应该是这样的：

[期望的状态 http://posti.sh/img/soll.png](http://posti.sh/img/soll.png)

我想你应该已经明白了。不知何故，在我看来，最左边的 div 的高度将第二行中的其他 div 推到了右边——但这只是猜测。

谢谢你的帮助！

查尔斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:24:10.030

仅使用 CSS 将无法轻松做到这一点。

CSS3 有一个新特性叫做列布局，但是浏览器支持不是很好。IE9及以下不支持。

请参阅[http://designshack.net/articles/css/masonry/](http://designshack.net/articles/css/masonry/)和 CSS3 解决方案的最后一个示例。

查看这些 js / jQuery 选项，以便更轻松地实现和浏览器支持：

*   [石工](http://masonry.desandro.com/)
*   [同位素](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CGgQFjAB&url=http://isotope.metafizzy.co/&ei=s70TUNrXINSfiQemo4DYBg&usg=AFQjCNHzbG2dSuid3yQGg-80of_sFMnasw)
*   不需要 jQuery 的[香草砖石。](http://vanilla-masonry.desandro.com/index.html)
*   [书签](http://www.wookmark.com/jquery-plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:28:53.393

如果不采用基于列的方法并添加额外的块元素来表示每一列，那么您想要的那种布局真的很难（不可能？）。如果您想要基于屏幕大小的动态布局，这显然不适用于灵活数量的列。

也就是说，您始终可以使用 JavaScript 将元素动态放置到列中，并使其与屏幕大小相匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T10:32:57.080

父容器的高度是否给定一个固定值？如果是，请尝试将父容器的高度设置为自动，并将过低的属性设置为隐藏。

# mysql - 从现有表在 MySql 中动态创建表

> ID：11700159
> 
> 赞同：0
> 
> 时间：2012-07-28T10:22:12.337
> 
> 标签：mysql

我正在创建一个网站并通过 PHP 将其链接到 mysql 数据库。我有一个主要的表格，网站的用户可以在其中输入值，我想从那个大表格动态创建表格。

例如，我有一个包含一些学校访问记录的表，一所学校可能会在记录中出现不止一次，所以我想为每所学校独立创建表，这些表从大表中获取信息，并在每次有新的访问时更新其值为该学校输入记录。我不确定这是否可以动态完成。我是 MySql 的新手，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:23:58.243

您可以这样做，但不建议这样做。最好使用单个表。如果您需要提高性能，您可以添加索引。

如果您仍然想这样做，您可能需要考虑[创建视图](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)而不是表：

```
CREATE VIEW view_school1 AS
SELECT col1, col2, ..., coln 
FROM school WHERE name = 'school1' 
```

# javascript - Ajax html 文档 I18n

> ID：11700168
> 
> 赞同：0
> 
> 时间：2012-07-28T10:23:56.770
> 
> 标签：javascript, jquery, regex, internationalization, replace

我正在使用该代码：

```
$.get(
    'filename.html',
    function(content)
    {
        $('#container').empty().append(content);
    }
); 
```

加载一些外部文件并将内容放入当前工作页面。我加载的外部文件是纯 HTML 格式的，我想问一下，是否有任何好的方法可以使加载的页面国际化。

在我当前的页面中，我有机会创建一个包含所有翻译键的 javascript 对象，例如：

```
var i18n = {
    'doc1' : {
        'title' : 'This is a title'
    }
}; 
```

例如，外部文件看起来像这样

```
<h3>This is a title</h3>
..... 
```

有没有办法将其更改为类似于

```
<h3>{doc1.title}</h3>
..... 
```

然后在加载后替换doc1.title；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:35:37.707

可能是您正在寻找的类似的东西：

**1.更新**

JavaScript：

```
var i18n = { doc1: { title: 'Title', ... }, ... };
var doc_name = 'doc1';

$.get(doc_name + '.html', function(data) {
  for (var word in i18n[doc_name]) {
    data = data.replace(new RegExp('/' + word + '/', 'g'), i18n[doc_name][word]);
  }

  $('#container').html(data);
}); 
```

HTML：

```
<h3>{title}</h3> 
```

2.

JavaScript：

```
var doc1 = { title: 'Title', ... };

$.get("doc1.php", doc1, function(data) {
  $('#container').html(data);
}); 
```

PHP：

```
<h3><?= $_GET['title'] ?></h3> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:39:52.857

可能是这样的：

```
var i18n = {
    'doc1' : {
        'title' : 'This is a title'
    }
};

$.get(
    'filename.html',
    function(content)
    {
        for (var doc in i18n) {
            for (var key in i18n[doc]) {
                var val = i18n[doc][key];
                content = content.replace( '{' + doc + '.' + key + '}', val );
            }
        }
        $('#container').empty().append(content);
    }
); 
```

小提琴：http: [//jsfiddle.net/Kirrr/eW7Nn/](http://jsfiddle.net/Kirrr/eW7Nn/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T10:55:37.233

如果您检索的文档包含

```
<h3 id="localTitle"></h3> 
```

你可以做

```
$.get(
    'filename.html',
    function(content)
    {
        $('#container').empty().append(content);
        $('#container #localTitle').html('This is a title');
    }
); 
```

# python - 如何从重启前离开的点继续执行python脚本

> ID：11700172
> 
> 赞同：0
> 
> 时间：2012-07-28T10:24:21.580
> 
> 标签：python, reboot

我想在 python 中编写一个测试脚本，它应该在本地机器上的测试执行之间重新启动系统......（没有远程自动化服务器正在监视脚本）。即使在重新启动后如何使脚本继续执行？该脚本涵盖以下场景...

1.  在某个磁盘上创建卷
2.  创建文件系统并临时挂载文件系统
3.  重新启动系统
4.  验证文件系统是否已挂载
5.  再次挂载文件系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:41:59.683

这不是关于 python，而是关于你的整个系统配置。在给定的条件下，我建议您将脚本分成两部分。第一部分是执行 1..3 并将您需要的一些额外信息存储到持久存储中，而不是您正在试验的 fs。第二部分在每个操作系统启动时调用，读取第一部分存储的一些数据，然后执行检查动作 4..5。这似乎是最明显和最简单的方法。

# php - PHP & MySQL 中的嵌套注释

> ID：11700174
> 
> 赞同：7
> 
> 时间：2012-07-28T10:25:09.447
> 
> 标签：php, mysql

我搜索了论坛，但没有得到权威的答案。我想以这样的方式实现嵌套的注释结构：

```
<ul>
    <li>This is the parent first comment!
        <ul>
            <li>This is the reply for the first parent comment!
                <ul>
                    <li>This is a reply for the first reply of the parent comment!</li>
                    <li>This is a third reply for the first parent comment!</li>
                </ul>
            </li>
            <li>This is another reply for first parent comment!</li>
        </ul>
    </li>
    <li>This is gonna be parent second comment!
        <ul>
            <li>This is a reply for the second comment!</li>
        </ul>
    </li>
    <li>This is fourth parent comment!</li>
</ul> 
```

我的桌子的转储如下：

```
+----+------------------------------------------------------------+--------+
| id | text                                                       | parent |
+----+------------------------------------------------------------+--------+
|  1 | This is the parent first comment!                          |      0 |
|  2 | This is gonna be parent second comment!                    |      0 |
|  3 | This is the reply for the first parent comment!            |      1 |
|  4 | This is another reply for first parent comment!            |      1 |
|  5 | This is a reply for the first reply of the parent comment! |      3 |
|  6 | This is a reply for the second comment!                    |      2 |
|  7 | This is a third reply for the first parent comment!        |      3 |
|  8 | This is fourth parent comment!                             |      0 |
+----+------------------------------------------------------------+--------+ 
```

我知道如何使用`mysql_query()`和`while()`循环。PHP & MySQL 的初学者。请帮帮我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-28T10:29:13.503

在 MySQL 中存储分层数据有几种不同的方法。查看 Bill Karwin 的[演示文稿](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)，其中演示了四个选项。

*   邻接表
*   路径枚举
*   嵌套集
*   封闭表

* * *

您正在使用**邻接列表**模型来存储分层数据，但不幸的是，这是您可以选择用于查询子树的**最难的模型。**

![嵌套集查询子树](../Images/030f8e4a2f4a0c9a59a14a957a0157df.png)

您的选择是：

*   更改为不同的模型。
*   将查询限制在 n 级深。
*   使用存储过程递归查询。有关这方面的更多信息，请参阅 Quassnoi 的系列文章 - [MySQL 中的分层查询](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T10:31:18.010

我为我的博文做了类似的事情。然而，我只是尝试了相同的数据。当您说**嵌套注释**时，最好以这种方式使用**嵌套函数**：

```
function getComments($parent)
{
    # Get the data from SQL.
    # Check if it has nested comments.
    if (hasComments())
        getComments($child); # $child is the ID of the current comment.
} 
```

为此，我已将您的数据导入 MySQL 并尝试了以下操作：

```
<?php
    mysql_connect('localhost', 'root');
    mysql_select_db('nestedcomments');
    function getComments($parent)
    {
        $res = mysql_query("SELECT * FROM `nestcomm` WHERE `parent` = $parent");
        if (mysql_num_rows($res))
        {
            echo "<ul>\n";
            while (($dat = mysql_fetch_array($res)) !== false)
                echo "<li>", $dat["text"], getComments($dat["id"]), "</li>\n";
            echo "</ul>\n";
        }
        else
            echo ($parent === 0) ? 'No Comments!' : "";
    }
    getComments(0);
?> 
```

正如我之前所说，我使用了嵌套函数，并且正如你所问的那样，输出几乎相同（没有大括号）：

```
<ul>
<li>This is the parent first comment!<ul>
<li>This is the reply for the first parent comment!<ul>
<li>This is a reply for the first reply of the parent comment!</li>
<li>This is a third reply for the first parent comment!</li>
</ul>
</li>
<li>This is another reply for first parent comment!</li>
</ul>
</li>
<li>This is gonna be parent second comment!<ul>
<li>This is a reply for the second comment!</li>
</ul>
</li>
<li>This is fourth parent comment!</li>
</ul> 
```

希望这会有所帮助。

# asp.net - 命名空间“CrystalDecisions.Web”中不存在类型或命名空间名称“CrystalReportViewer”（您是否缺少程序集引用？）

> ID：11700176
> 
> 赞同：8
> 
> 时间：2012-07-28T10:25:24.887
> 
> 标签：asp.net, crystal-reports, namespaces, report, 3-tier

在我的 asp.net 3.5 a3 层应用程序中使用水晶报告时出现以下错误

> 命名空间“CrystalDecisions.Web”中不存在类型或命名空间名称“CrystalReportViewer”（您是否缺少程序集引用？）

我包含的命名空间是：

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Xml.Linq;
using MorvelNew.Report;
using System.Data.Sql;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Web; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T09:10:21.840

1.  右键单击“引用”并选择“添加引用...”
2.  转到“扩展程序”
3.  查找“CrystalDecisions.Web”

并添加命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:48:03.153

错过了 web.config 中的几个程序集

```
 <add assembly="CrystalDecisions.ReportAppServer.ClientDoc, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
    <add assembly="CrystalDecisions.Enterprise.Framework, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>

<add assembly="CrystalDecisions.Web, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
<add assembly="CrystalDecisions.Shared, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
<add assembly="CrystalDecisions.ReportSource, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
<add assembly="CrystalDecisions.CrystalReports.Engine, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
    <add assembly="CrystalDecisions.ReportAppServer.ClientDoc, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
    <add assembly="CrystalDecisions.Enterprise.Framework, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
    <add assembly="CrystalDecisions.Enterprise.InfoStore, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/></assemblies> 
```

# asp.net-mvc - .net mvc如何在表格行单击后呈现数据

> ID：11700179
> 
> 赞同：0
> 
> 时间：2012-07-28T10:25:36.217
> 
> 标签：asp.net-mvc

我是 .net mvc 的新手，在我的视图中呈现数据时被卡住了。我正在创建一个小型项目管理工具，目前正在项目管理部分工作。

我正在向管理项目的视图发送一个模型，其中包含用户拥有的所有项目的列表。项目列表呈现在表格中。该模型包含与项目、阶段、项目用户等相关的所有内容。当我单击表中的一行时，我想在该表下方呈现该项目的扩展详细信息，以便显示所选项目的用户和阶段.

使用 jquery 我可以做到这一点，但我想使用 .net 代码在视图中对此事件进行编码，而不是使用 Jquery。我的主要目标不是回调服务器，因为我在模型中拥有所有可用数据。

我四处搜索，找不到关于触发事件和在页面上呈现更多细节的详细信息。我了解 partials 的作用，但这意味着回调服务器。

解决此类问题的最佳方法是什么？我应该只使用 JQuery 吗？如果我确实使用 jquery，如果脚本不在页面中，我该如何在脚本中使用 html 助手？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:44:35.940

您可以在每一行内有一个表单和一个提交按钮来显示详细信息。单击提交按钮时，将调用控制器操作并设置选定的行项目 ID，该 ID 将使用它来检索项目详细信息并传回视图。您还需要检索整个项目列表，因为这样才能重新显示表格。您的主视图模型将包含一个表示所有项目集合的属性和另一个包含所选项目详细信息的属性。最初，详细信息属性将为空。选择项目后，您将分配它。然后在视图中，您可以测试是否分配了详细信息属性并在部分中呈现详细信息。

如果您决定使用 jQuery 和 AJAX，那么由于您不会重新显示整个页面，因此您无需在 details 操作中检索视图模型的项目列表。只有细节。然后只需使用操作返回的部分刷新 DOM 的相应部分。

# jquery - 当我单击返回时，如何导航到 phonegap 中的另一个视图

> ID：11700182
> 
> 赞同：1
> 
> 时间：2012-07-28T10:27:01.087
> 
> 标签：jquery, cordova, sencha-touch

**我已经从 db 检索数据并使用 phonegap 显示在列表中，当我单击后退按钮时，它应该导航到我在 sencha touch 中完成的另一个列表，我该怎么做？**

```
function querySuccess(tx,result){
    $('#Allwordslist').empty();
    $.each(result.rows,function(index){
        var row = result.rows.item(index);

    $('#Allwordslist').append('<li><a href="#"><h3 class="ui-li-heading">'+row['Word']+'</h3><p class="ui-li-desc">'+row['Type_Of_Word']+'</p></a></li>');

    });
    $('#Allwordslist').listview();
} 
```

# ios - 如何从 iTunes 文件共享文件夹 iOS 中删除文件

> ID：11700188
> 
> 赞同：0
> 
> 时间：2012-07-28T10:28:13.003
> 
> 标签：ios, itunes, file-sharing

获取位于 iTunes 文件共享文件夹中的文件的路径没有问题。我想要的是在按下删除按钮时完全删除它们。

还有一个问题..按下删除按钮时是否可以区分文件扩展名？例如，如果它是一个 avi 文件，那么提醒用户他将要删除一部电影？

谢谢...

感谢 Yannik L. 它现在正在工作.. 我只是想知道一件事.. 我怎样才能删除带有非英语字符的文件..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:02:59.730

iTunesFileSharing 文件夹就是文档文件夹。您可以通过执行以下代码来检索路径：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *folderPath = [paths objectAtIndex:0]; 
```

然后您可以浏览文档文件夹中可用的文件并测试它们的扩展名以检查它们是否是 AVI 文件：

```
- (BOOL)existsMovieFilesAtPath:(NSString *)folderPath
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error = nil;
    NSArray *contents = [fileManager contentsOfDirectoryAtPath:folderPath error:&error];

    if (error == nil)
    {
        for (NSString *contentPath in contents)
        {
            NSString *fileExt = [contentPath pathExtension];

            // If the current file is an AVI file
            if ([fileExt isEqualToString:@"avi"])
            {
                return YES;
            }
        }
    }

    return NO;
} 
```

要删除文件，您可以进行相同的操作：

```
- (BOOL)deleteFilesAtPath:(NSString *)folderPath
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error = nil;
    NSArray *contents = [fileManager contentsOfDirectoryAtPath:folderPath error:&error];

    if (error == nil)
    {
        for (NSString *contentPath in contents)
        {
            [fileManager removeItemAtPath:contentPath error:NULL];
        }
    }

    return NO;
} 
```

# php - 发送电子邮件时避免超过 500 行限制错误

> ID：11700189
> 
> 赞同：5
> 
> 时间：2012-07-28T10:28:16.887
> 
> 标签：php, email, phpmailer

我正在将Joomla 中[集成的 PHPMailer 库用于 Joomla](http://www.php.joomlademo.de/nav.html?libraries/phpmailer/phpmailer.php.source.html)中的电子邮件组件。它确实工作得很好，但是我遇到了用户使用 1and1 邮件服务器运行脚本的问题。他们可能会遇到这样的错误：

> 2012-06-14 18:20:34 u65913791 1x1et0-1RocCH2xzU-00qzkq EE 发送邮件文本后交易错误：msmtp.kundenserver.de[172.19.35.7] **500 超出线路限制**

另一个用户的另一个例子：

> 数据结束后来自远程邮件服务器的 SMTP 错误：主机 mx00.1and1.co.uk [212.227.15.134]：**超过 500 行限制**

[行限制不是关于多少行，而是在一行中实际使用了多少个字符，1and1 限制为 10240 个字符（支持答案）——这实际上是RFC 2822](http://www.ietf.org/rfc/rfc2822.txt)中要求的 10 倍。

我认为问题是由于在提交电子邮件时使用“错误”的行分隔符导致整个电子邮件作为单行到达电子邮件服务器。我想我需要确保在我的脚本中插入换行符，因为 PHPMailer 失败了。

目前我只是从 WYSIWYG 编辑器接收 HTML 内容并放入 PHPMailer 对象：

```
// snip, $mail2send is the JMail instance, which inherits PHPMailer
$mail2send->setSubject($mail->subject);
$mail2send->IsHTML(true);
$mail2send->setBody($mail->body);   
// snip 
```

如何插入适当的换行符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T10:34:27.743

使用[chunk_split](http://www.php.net/manual/en/function.chunk-split.php)。这个函数是为像你这样的任务设计的，甚至它的默认值（拆分为 76 个字符）也是如此。

所以你的代码将是

```
$mail2send->setSubject($mail->subject);
$mail2send->IsHTML(true);
$mail2send->setBody(chunk_split($mail->body)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:17:09.963

转换为内容传输编码，例如 base64 或quoted-printable，这两种编码都是为封装自由格式数据而设计的。QP 对于主要是 US-ASCII 数据以及偶尔的 8 位字符和/或超长行更有效。

当然，如果您的数据是 HTML 并且它对 SMTP 来说是安全的，那么仅在您有空格的地方添加行终止符是一个稍微脆弱的解决方法（您确定在任何地方都没有行首“From”等吗？ )

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T08:53:40.610

经过进一步调查，可以确定错误：在电子邮件线程中多次回复后，嵌入的 HTML 消息不再有换行符。我猜是参与对话的电子邮件客户端做到了这一点。

为了克服这个问题，我使用以下函数进行 HTML 标记安全包装：

```
/* HTML-tag-safe wordwrap
 * from http://php.net/manual/de/function.wordwrap.php
 * by nbenitezl[arroba]gmail[dot]com
 */
function htmlwrap(&$str, $maxLength=76, $char="\r\n"){
    $count = 0;
    $newStr = '';
    $openTag = false;
    $lenstr = strlen($str);
    for($i=0; $i<$lenstr; $i++){
        $newStr .= $str{$i};
        if($str{$i} == '<'){
            $openTag = true;
            continue;
        }
        if(($openTag) && ($str{$i} == '>')){
            $openTag = false;
            continue;
        }
        if(!$openTag){
            if($str{$i} == ' '){
                if ($count == 0) {
                    $newStr = substr($newStr,0, -1);
                    continue;
                } else {
                    $lastspace = $count + 1;
                }
            }
            $count++;
            if($count==$maxLength){
                if ($str{$i+1} != ' ' && $lastspace && ($lastspace < $count)) {
                    $tmp = ($count - $lastspace)* -1;
                    $newStr = substr($newStr,0, $tmp) . $char . substr($newStr,$tmp);
                    $count = $tmp * -1;
                } else {
                    $newStr .= $char;
                    $count = 0;
                }
                $lastspace = 0;
            }
        } 
    }

    return $newStr;
} 
```

# java - 如何删除java项目中未使用的类？

> ID：11700193
> 
> 赞同：9
> 
> 时间：2012-07-28T10:28:36.747
> 
> 标签：java, class, dependencies

我有一个大项目，我的经理专门为我从项目中删除未使用的类。

我为它找到了很好的工具，它给了我项目中没有使用的类的列表..

阿帕奇哈马可以做到吗？或建议任何其他工具

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T10:33:59.177

你可以试试

[未使用的代码检测器](http://www.ucdetector.org/)

一个可以帮助你的eclipse插件。除此之外，如果通过反射使用类，那么会有一些问题。

另请阅读：

UCDetector 发现的问题，只是建议。在更改代码之前，您应该真正知道自己在做什么！如果 UCDetector 告诉您，您的代码仍然没有任何引用可供以下人员使用：

```
Reflection
Frameworks like Spring, Hibernate or Eclipse which declare dependencies in property files, xml files (extension-points) ...
Third party code, which is using your API
Jars in your workspace
To be continued... 
```

更改可见性可能会导致继承、反射、实例化等问题......

最好在工作区中对要更改的代码进行全文搜索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T10:51:28.203

IntelliJ IDEA 具有出色的静态[分析器](http://www.jetbrains.com/idea/features/code_analysis.html)，其中包括死代码检测。对于一组有限的语言和框架，它也可以在免费[社区版](http://www.jetbrains.com/idea/free_java_ide.html)中获得。

# objective-c - 如何在objective-c中创建像pinterest或piictu这样的自定义标签栏

> ID：11700195
> 
> 赞同：0
> 
> 时间：2012-07-28T10:28:41.317
> 
> 标签：objective-c, ios, uitabbarcontroller

嗨，我需要创建像 pinterest 或 piictu 这样的自定义标签栏吗？如何做到这一点，任何人都可以帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:32:57.143

我强烈推荐观看 WWDC 2012 “iOS 上的高级外观定制”——该视频将向您展示入门所需的内容。

[http://developer.apple.com/itunes/?destination=adc.apple.com.16351493766](http://developer.apple.com/itunes/?destination=adc.apple.com.16351493766)

# android - Android 中的 NetworkOnMainThreadException

> ID：11700196
> 
> 赞同：0
> 
> 时间：2012-07-28T10:28:44.430
> 
> 标签：android, android-emulator, android-ndk

我有这个例外。我如何使用线程概念来做到这一点？

```
public class WebService extends AsyncTask<String, String, String>{

    private final String NAMESPACE ="http://tempuri.org/";//"http://localhost:9583/YP_Android_WebService/YP_Android_WebService.asmx";//
    private final String URL ="http://10.0.2.2:1243/YP_Android_WebService/YP_Android_WebService.asmx?WSDL";

    public boolean checkUser(String _EmailID, String _Password) {

         boolean result = false; 

        final String SOAP_ACTION ="http://tempuri.org/checkUser";//"http://localhost:9583/YP_Android_WebService/YP_Android_WebService.asmx/checkUserLogin";//
        final String METHOD_NAME = "checkUser";

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        PropertyInfo propertyInfoEmail = new PropertyInfo();
        propertyInfoEmail.setName("_EmailID");
        propertyInfoEmail.setValue(_EmailID);
        propertyInfoEmail.setType(String.class);
        request.addProperty(propertyInfoEmail);

        PropertyInfo propertyInfoPassword = new PropertyInfo();
        propertyInfoPassword.setName("_Password");
        propertyInfoPassword.setValue(_Password);
        propertyInfoPassword.setType(String.class);
        request.addProperty(propertyInfoPassword);

         final SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true; // put this only if the web service is .NET one
            envelope.setOutputSoapObject(request);
            final HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try {

            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            Log.i("myApp", response.toString());
            if(response.toString().equalsIgnoreCase("true")){
                result = true;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return result;
    }
} 
```

例外是在这一点上。

> androidHttpTransport.call(SOAP_ACTION, 信封); ti 抛出 NetworkonMainThread 异常。

谁能帮助我使用线程概念来做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:02:14.220

你没有`Asynctask`正确使用。您有未实现的方法。您必须在方法中执行所有网络/数据库操作`doInBackground()`，正如@Dirk 所说，`onPostExecute()`方法中的 UI。

本[教程](http://www.vogella.com/articles/AndroidPerformance/article.html)对您了解`AsyncTasks`和了解更多有关`Threads`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:20:00.640

您收到此异常的原因是您试图在 UI 线程上执行昂贵的操作，这会显着减慢您的应用程序并导致它强制关闭。您应该将代码包装在`AsyncTask`(or `Thread`) 中。

阅读本文了解更多信息：

## [为什么冰淇淋三明治会使您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:44:44.923

您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来解决此问题。在 doInBackground() 中做网络，在 onPostExecute() 中修改 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T21:10:21.077

您应该使用 Asynctask，但如果您不想简单地添加以下代码片段（尽管不推荐）：

```
if (android.os.Build.VERSION.SDK_INT > 9) { // disabling strict-mode
                                                    // for newer builds
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                    .permitAll().build();
            StrictMode.setThreadPolicy(policy);
        } 
```

# c# - 在c#中只减去月份和年份

> ID：11700199
> 
> 赞同：1
> 
> 时间：2012-07-28T10:28:53.253
> 
> 标签：c#, sql, linq-to-sql, datetime

我的数据库中有一个字段保存员工的开始日期。

我想知道这个月有多少员工有一周年纪念日？

例如，如果员工开始工作，`07/12/2012`那么如果当前日期是`01/12/2013`，那就是他/她的周年纪念日。

这是每个员工的开始日期的格式字符串`07/12/2012`。我只想比较月份和年份（不是日期）。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:34:41.663

Transact-SQL 中有`MONTH`和函数（假设您使用 MSSQL）。`YEAR`（[见这里](http://msdn.microsoft.com/en-us/library/ms187813.aspx)）

因此，如果您`startdate`的表中有一个 DATETIME 字段

```
SELECT * FROM employee WHERE MONTH(startdate)=12 AND YEAR(startdate)=2012 
```

将让所有员工在 2012 年 12 月迎来一周年纪念日。

**编辑**

如果您的表包含作为字符串的日期，您可以使用`SUBSTRING(startdate,3,2)`获取月份（作为字符串！）和`SUBSTRING(startdate,6,4)`年份，或者使用[CONVERT](http://msdn.microsoft.com/en-us/library/ms187928)或[PARSE](http://msdn.microsoft.com/en-us/library/hh213316)函数将其转换为日期时间（然后使用`MONTH`and`YEAR`如上所述）

**第二次编辑**

使用 Linq to SQL 将是

```
var result = from employees e 
             select e 
             where e.startdate.Month==DateTime.Now.Month 
                   && e.startdate.Year==DateTime.Now.Year; 
```

（仍然假设`startdate`您数据库中的列具有`DATETIME`数据类型......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:52:35.490

要在 SQL 中处理它，请尝试

```
SELECT *  FROM  [dbo].[Employee]
where (DATEPART(mm, [StartDate]) = Month(GetDate())
AND DATEPART(dd, [StartDate]) = Day(GetDate()) 
```

在 C# 中

```
var aniveraries = from employee in employees
                  where
                        employee.StartDate.Month == DateTime.Now.Month &&
                        employee.StartDate.Year == DateTime.Now.Year
                  select employee; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T10:42:28.313

**它很容易：**

```
SELECT  *
From    Member m
WHERE
        MONTH(m.CreatedAt) = MONTH(GETDATE()) 
```

**此外，如果您想要明年的周年纪念日，您可以使用：**

```
SELECT  *
From    Member m
WHERE
        MONTH(m.CreatedAt) = MONTH(GETDATE()) and
        YEAR(m.CreatedAt) = YEAR(GETDATE()) +1 
```

# jquery - 发布从数据库中多次删除的复选框值

> ID：11700205
> 
> 赞同：1
> 
> 时间：2012-07-28T10:29:33.823
> 
> 标签：jquery, sql, database, post

截屏：![在此处输入图像描述](../Images/9bf897405f22bfdc68499ca7fac8551f.png)

我想使用 jQuery 从数据库中删除行，如屏幕截图所示。我观看了 150 多篇关于 jQuery 的教程。不过我是菜鸟。我知道 jquery post 的用法。但我无法完全处理它。

```
<script type="text/javascript">
                        $('#cart_delete_button').click(function(){
                            var deleteditems = $('input:checkbox[name="delete_cart[]"]:checked')
                                    .map(function() { return $(this).val() })
                                    .get()
                                    .join(",");
                           //alert(deleteditems);
                           $.post('post.php',{deleteditems: deleteditems},function(data){
                               $('.loading').text(data);
                           });
                        });
                    </script> 
```

我写了这段代码来删除，但我想立即删除 tr 。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:40:20.220

相当艰巨的工作，尤其是在提供较少信息的情况下。但总得有人去做……无论如何……

第一的，

1）您必须使用数据库中的值填充表。2）在构造时，将每行的DATABASE ID分配给checkbox元素。

当您单击复选框时，获取所选复选框的 ID 并通过 $.ajax 将其传递到数据库并在那里执行删除操作...

问题不完全是 jQuery。PHP 和 jQuery 都需要以某种有趣的方式来使用。再多的 DVD 观看和书籍阅读都不会帮助您。你必须弄脏你的手。

另外，首先想想你想做什么。列出所有用例，确定一个坚定的方法，然后开始编写代码。从长远来看，它有帮助。

如何解决问题？

假设您正在使用从服务器以 JSON 格式返回的数据构建表。

假设你的 JSON 是

```
var json =  {
        "data": [
            {
                "itemID": "1",
                "itemName": "Item Name1"
            },
            {
                "itemID": "2",
                "itemName": "Item Name2"
            }
        ]
    } 
```

在构建你的桌子时，

当你创建一个复选框时，它就像

```
for(var i=0;i<json.data.length;i++){
var cBox = jQuery("<inout />",{type="checkbox",id=json.data[i].itemId});
$("#yourTargetID").append(cBox);
} 
```

将`check`处理程序附加到这些元素以进行 ajax 调用。

喜欢

```
$("#cBoxId").on('click',function(){
    if($(this).attr('checked'=='checked')){
        $.post('yourphpfile.php',{data:$(this).attr(id)},function(data){
            if(data==1){
                $(this).parent().parent().remove(); // just a placeholder as I do not know your exact DOM structure.
            }else {
                alert("Something went wrong");
            }
        });
    }
}); 
```

在你的 PHP 上

```
$id = $_POST['data'];

$query = "DELETE FROM tablename WHERE itemId = $id";
$result = mysql_query($query);

if($result){
    echo 1;
}
else {
    echo 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:03:09.510

使用例如 PHP 生成 html 时 - 您从数据库中获取行并使用主键列值将 ids 分配给复选框，之后您使用：

```
$('input[type=checkbox]').bind('change', function() {
  $.ajax({
    type: 'POST',
    url : 'delete.php',
    data : {row_id: $(this).attr('id')},
    success : function() {
      $(this).closest('tr').remove(); //or whatever html you use for displaying rows
    }
  });
}); 
```

在 delete.php 中：

```
$id = $_POST['row_id'];
if (mysql_query("DELTE FROM TABLE WHERE id = $id")) echo 'OK';
else echo 'FAIL' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T10:37:28.357

为此，我建议使用 jqGrid（或任何其他基于 jquery 的网格）。它非常简单明了。

[这](http://krams915.blogspot.in/2010/12/jqgrid-and-spring-3-mvc-integration.html)是基于 Spring 的管理的教程。

希望能帮助到你。

# php - sql查询c中的条件

> ID：11700206
> 
> 赞同：-1
> 
> 时间：2012-07-28T10:29:37.283
> 
> 标签：php, sql, codeigniter

我有

`tbl_ticket_categories(id , category_name , description , site_referers_id)`

`tbl_ticket_repliers(id , user_id , category_id , site_referers_id)`

`tbl_users(id , role_id , username , password )`

我想从哪里全`category_name`选`description``tbl_ticket_categories``site_referers_id = 1`

还有`username`那些`user_id`在`tbl_ticket_repliers`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:34:58.927

```
select category_name,description,username from tbl_ticket_categories as ttc
join tbl_ticket_repliers as ttr on ttr.category_id=ttc.id
join tbl_users as tu on tu.id=ttc.user_id
where site_referers_id = 1 
```

这是您获得确切结果的查询检查一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:32:15.793

```
SELECT category_name, description, tu.username 
   FROM tbl_ticket_categories tc 
     INNER JOIN tbl_ticket_repliers tr 
        ON tc.id = tr.category_id
     INNER JOIN tbl_users tu 
        ON tr.user_id = tu.id
   WHERE tc.site_referers_id = 1 
```

# [*看到这个小提琴*](http://sqlfiddle.com/#!3/b23b4/3)

# database - 如何在 R 中使用 SQLite 数据而不加载数据

> ID：11700207
> 
> 赞同：0
> 
> 时间：2012-07-28T10:29:43.567
> 
> 标签：database, r, sqlite

我正在使用`R Studio`一些数据分析。我有一个 500MB 的`.csv`文件。系统规格：i5 + 4GB RAM。如果我在 R 中加载文件，它会占用我大约 1.5GB 的 RAM，并且我没有足够的 RAM 用于其他操作。它给出了如下错误 -

> 错误：无法分配大小为 9.5MB 的向量

所以，为了节省空间，我决定使用`SQLite`. 我将数据存储在 SQLite 数据库文件中。我想知道是否有一种方法可以在不将数据加载到 R 的情况下对数据进行操作。直接在我的 SQLite 数据库上使用所有这些 R 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:48:56.730

无法直接在 [the] SQLite 数据库上使用所有这些 R 函数，因为对数据库的访问是不透明的。几乎所有 R 函数都希望它们的数据驻留在内存中，并且无法处理间接寻址。

也就是说，您也许可以将应用程序所需的那些 R 函数转换为 SQL 查询。然后你可以直接在 SQLite 中对数据进行操作，而不需要先加载它。特别是，您可能能够执行一些省略某些列的查询，一次只查询一组行，或者将几行合并为一个。生成的 data.frame 将小于整个表，并且可能足以满足您的应用程序。

如果一切都失败了，您可能需要考虑使用 64 位 R 和配置为提供足够交换空间的操作系统。在这样的设置中，内存密集型操作可能仍然需要相当长的时间，并且可能会使您的系统在执行时*非常*慢。但他们最终应该会成功，没有如此丑陋的错误消息。

# python - 无法从目录中的 dict python 获取键和值

> ID：11700213
> 
> 赞同：-1
> 
> 时间：2012-07-28T10:30:33.250
> 
> 标签：python

当我尝试从`wahbilogintest.py`包含字典的文件中获取键和值时遇到了问题`kids{}`。

你能帮我如何`wahbilogintest.py`在目录中搜索我的文件`C:/webbplats/mydata`并在文件中迭代以获取/带来键和值吗？

我的源代码

```
class visafilerIkatalogen :
    import os  
    folder = 'c:/webbplats/mydata/' 
    dinfil = raw_input("Enter your userprofile med prefix.txt: ")
    #dindictionary = raw_input("Enter your dictionary name: ")
    loginReadProfile = open(folder+str(dinfil),'r')
    for key, value in dinfil.iteritems():
            print 'Username is: ',key
            print 'value is: ',value

    print loginReadProfile.readlines()
    loginReadProfile.close()

Myobj12 = visafilerIkatalogen() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:16:07.117

打开一个文件`open()`会给你一个`iterable`为文件的每一行生成一个字符串。它*没有*给你一个你可以调用的对象`.iteritems()`。

要访问文件中的 python 对象，您需要`import`它，而不是打开它。给定用户输入的一种方法是：

```
import os
import sys

folder = 'c:/webbplats/mydata/'
dinfil = raw_input("Enter userprofile med prefix")
## Get the full path, the directory, and the filename
full_path = path.join(folder, dinfil)
path, filename = os.path.split(full_path)
filename, ext = os.path.splitext(filename)
## Add the directory to the sys.path and import the module
sys.path.append(path)
data_module = __import__(filename) 
```

此时你有一个对 python 的引用`module`。您可以使用点分符号访问此模块中定义的名称。因此，如果有一个名为 'kids' 的字典，您可以遍历它的键/值对，因此：

```
for key, value in data_module.kids.iteritems():
    print 'Username is: %s' % key
    print 'Value is %s': % value 
```

您应该认真重新考虑这种访问每个用户数据的方法。太复杂了 可能有很多更好的方法可以做到这一点，但如果没有更多关于你想要达到的目标的信息，我真的无法提供更多帮助。

您还可以做几件事来改进您的代码：

1.  你的类应该继承自`object`
2.  导入语句应该（几乎）总是在类定义之外
3.  用于`sys.path.join()`连接部分文件路径

# windows - 如何更改计划任务用户密码

> ID：11700214
> 
> 赞同：0
> 
> 时间：2012-07-28T10:30:33.767
> 
> 标签：windows, windows-7, wmi, wmi-query, wmic

当我使用任务计划程序 GUI 在 Windows 7 中使用用户名和密码创建计划程序任务并尝试使用以下命令行更改用户密码时，它在 CMD 中出现错误

```
SCHTASKS /Change /RP test /TN "rtest1" 
```

> 错误：
> 
> 参数不正确

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:21:40.873

为了将来的故障排除，在以下步骤失败后，我尝试了一些额外的调整，发现对我来说，我无法让我的 schtasks 密码更改工作，直到我导入 XML 减去 XML 的重复部分（即 PT10M间隔和 P1D 持续时间）。在我导入没有这些部分的 XML 后，我能够进入 GUI 并在那里进行这些更改。之后，Schtasks 帮我修改了密码。奇怪的行为！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T11:25:40.943

我为我的问题找到了以下解决方案，我想与大家分享。

我像上面建议的那样创建了一个计划任务

schtasks.exe /create /S remotemgmt /tn "Mytask" /tr "mspaint" /u admuser /p PassWord /sc "Monthly"/st "13:00" /F

然后我从 GUI 创建了 MyTask2，镜像了 schtasks 创建的任务的所有设置

如果我做：

schtasks.exe /change /S remotemgmt /tn "Mytask" /Ru domain\UberUser /Rp PassWord

这按预期工作

如果我尝试在 MyTask2 上运行相同的内容，则会失败并出现上述错误

schtasks.exe /change /S remotemgmt /tn "Mytask2" /Ru domain\UberUser /Rp PassWord

我注意到的一件事是，如果我从 MyTask 和 MyTask2 导出 XML 文件，它们是不同的，即使您可以在 GUI 中看到的所有设置都是相同的。

问题似乎出在标签中：

如果我从命令行创建了一个任务并将其导出，它看起来像这样：2010-12-06T13:00:00

如果我从 GUI 创建/导出它，我看起来像这样：2010-12-06T22:13:59.9965698

如果我打开导出的 XML 文件，并删除 .9965698 保存文件，将其重新导入计划任务

"schtasks.exe /change /S remotemgmt /tn "Mytask2" /Ru domain\UberUser /Rp PassWord" 有效

XML 文件中还有其他差异，似乎当您使用 schtasks 创建任务时，一些时间跨度是以小时为单位编写的，而如果我在 GUI 中创建它则以天为单位。

图形用户界面：P3D

命令行：PT72H

这两个没有设置，使用GUI创建任务时：

PT10M PT1H

但是，这些不会影响之后使用 schtasks.exe 更改设置的能力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T15:33:21.660

您可以使用[PowerShell 脚本来更新](http://windowsitpro.com/scripting/updating-scheduled-tasks-credentials)Bill Steward 为此目的编写的计划任务凭据（非常感谢他）。这也适用于使用 Windows 任务调度程序 GUI 而不是从命令行（或重新导入等）创建的任务。该网页有所有的解释和示例用法。

请注意，您可能需要先`set-executionpolicy unrestricted`在 powershell shell 中运行才能允许执行脚本。

# social-networking - 是否可以为 OSX Mountain Lion 创建新的帐户类型

> ID：11700218
> 
> 赞同：1
> 
> 时间：2012-07-28T10:30:59.237
> 
> 标签：social-networking, osx-mountain-lion

OSX山狮提供包括twitter在内的多种账号类型，以及针对中国的多种服务（微博、土豆等）。但是没有对 ML 的默认 Facebook 支持，我知道我可以安装它。

我的问题是，是否有可能为其他网站制作自己的服务（帐户或其他东西）？是否有一些 API 可以做这样的事情？

# asp.net-mvc-3 - 如何在 MVC3 中为包含序列化类的字符串创建编辑器

> ID：11700219
> 
> 赞同：0
> 
> 时间：2012-07-28T10:31:01.683
> 
> 标签：asp.net-mvc-3, polymorphism, editorfor

我的 ViewModel 中有一个字符串属性，其中包含十个可能的类之一的序列化表示，每个类都非常不同，因此它们没有基类。

```
public string Configuration { get; set; }
public string ConfigurationType { get; set;} 
```

理想情况下，我想为每个可以反序列化到属性中的类创建一个不同的编辑器模板，它们只是有

```
<%= Html.EditorFor(l => l.Configuration)%> 
```

我可以以某种方式通知 mvc Configuration 需要反序列化为 ConfigurationType 的对象，以便它使用正确的模板，然后再次反序列化回字符串。

我很感激我在这里对细节很清楚，但我想尽可能地抽象，所以我不会把水弄得太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:21:56.873

我认为您可能应该考虑以不同的方式处理手头的问题。我不知道你的问题的细节，但从你提供的信息来看，我认为以下可能是一个可行的解决方案：

1.  创建一个`ConfigurationBase`包含 10 个类的公共属性的类。
2.  `Configuration`与其让属性为 type ，不如`String`让它为泛型，即：`T`。因此，您的视图模型也应该是泛型类型，其中类型参数应该被限制为`ConfigurationBase`和`new()`（因为它应该被序列化/反序列化）。
3.  现在你的类是通用的，你不需要这个`ConfigurationType`属性，所以删除它。
4.  为每个子类创建一个编辑器`ConfigurationBase`。
5.  或者，您可以在视图模型上创建一个方法，将配置实例序列化为`String`实际需要的。

检查下面的代码：

```
public class MyViewModel<T> where T : ConfigurationBase, new() 
{
   public T Configuration {get; set; }

   public String SerializeConfiguration() 
   {
      //return the serialized this.Configuration
   }
} 
```

# c# - 雅虎金融 API 股票过去的价值

> ID：11700220
> 
> 赞同：2
> 
> 时间：2012-07-28T10:31:14.607
> 
> 标签：c#, yahoo-finance

我想使用 Yahoo Finance API 获取过去的股票价值。
我找到了这篇文章： http: [//www.codeproject.com/Articles/37550/Stock-quote-and-chart-from-Yahoo-in-C](http://www.codeproject.com/Articles/37550/Stock-quote-and-chart-from-Yahoo-in-C)
但我只能获得股票的最新价值。
有人知道是否可以使用此 API（或任何其他 API）按日期获取股票价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:58:19.587

您可以将 YQL Api 用于 Yahoo Finance，请参见[此处](http://www.yqlblog.net/blog/2009/06/02/getting-stock-information-with-yql-and-open-data-tables/)。

查询的url如下：
`"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.historicaldata%20where%20symbol%20%3D%20%22"+symbol+"%22%20and%20startDate%20%3D%20%22"+ startDate +"%22%20and%20endDate%20%3D%20%22"+ endDate +"%22"+ dataFormat`

其中：
-`symbol`是代码列表，例如 'AAPL'、'MSFT'、'YHOO'
-`startDate`是报价的第一天
-`endDate`是报价的最后一天
-`dataFormat`是以下字符串：

`&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys`

结果是一个 XML 文件，您可以获取该文件以检索历史值。
我建议您在开始时大量使用[YQL 控制台来创建您想要的确切请求。](http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22YHOO%22%2C%22AAPL%22%2C%22GOOG%22%2C%22MSFT%22%29%0A%09%09&env=http%3A%2F%2Fdatatables.org%2Falltables.env)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T18:24:29.537

也可以使用YAHOO！api。
[http://code.google.com/p/yahoo-finance-managed/wiki/csvHistQuotesDownload](http://code.google.com/p/yahoo-finance-managed/wiki/csvHistQuotesDownload)

# javascript - jquery 弹出注册窗口

> ID：11700230
> 
> 赞同：-2
> 
> 时间：2012-07-28T10:33:25.520
> 
> 标签：javascript, jquery, popup

你好朋友这是我的会员页面，我想这样打开页面从小到大，会起作用

[http://b1207.hizliresim.com/z/w/b5mxd.jpg](http://b1207.hizliresim.com/z/w/b5mxd.jpg) 背景会变暗谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:38:57.997

我推荐
Lightbox - [http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)
或
Colorbox - [http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

# activemq - 由于地址已在使用错误，Activemq 无法运行

> ID：11700233
> 
> 赞同：24
> 
> 时间：2012-07-28T10:33:39.427
> 
> 标签：activemq

如何解决错误？

```
Java Runtime: Oracle Corporation 1.7.0_05 E:\Program Files\Java\jdk1.7.0_05\jre
  Heap sizes: current=1004928k  free=994439k  max=1004928k
    JVM args: -Dcom.sun.management.jmxremote -Xms1G -Xmx1G -Djava.util.logging.config.file=logging.properties -Dactivemq.classpath=F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\..\conf;F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\../conf;F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\../conf; -Dactivemq.home=F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\.. -Dactivemq.base=F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\.. -Dactivemq.conf=F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\..\conf -Dactivemq.data=F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\..\data -Djava.io.tmpdir=F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\..\data\tmp
ACTIVEMQ_HOME: F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\..
ACTIVEMQ_BASE: F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\..
ACTIVEMQ_CONF: F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\..\conf
ACTIVEMQ_DATA: F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\..\data
Loading message broker from: xbean:activemq.xml
 INFO | Refreshing org.apache.activemq.xbean.XBeanBrokerFactory$1@2b9f7952: startup date [Sat Jul 28 18:10:38 CST 2012]; root of context hierarchy
 INFO | PListStore:[F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\..\data\localhost\tmp_storage ] started
 INFO | Using Persistence Adapter: KahaDBPersistenceAdapter[F:\workspace\Eclipse java\destinytalk\DestinyServer\apache-activemq-5.6.0\bin\..\data\kahadb]
 INFO | KahaDB is version 4
 INFO | Recovering from the journal ...
 INFO | Recovery replayed 1 operations from the journal in 0.071 seconds.
 INFO | ActiveMQ 5.6.0 JMS Message Broker (localhost) is starting
 INFO | For help or more information please see: http://activemq.apache.org/
ERROR | Failed to start ActiveMQ JMS Message Broker (localhost, null). Reason: java.io.IOException: Transport Connector could not be registered in JMX: Failed to bind to server socket: tcp://0.0.0.0:61616 due to: java.net.BindException: Address already in use: JVM_Bind
java.io.IOException: Transport Connector could not be registered in JMX: Failed to bind to server socket: tcp://0.0.0.0:61616 due to: java.net.BindException: Address already in use: JVM_Bind
    at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:27)
    at org.apache.activemq.broker.BrokerService.registerConnectorMBean(BrokerService.java:1836)
    at org.apache.activemq.broker.BrokerService.startTransportConnector(BrokerService.java:2327)
    at org.apache.activemq.broker.BrokerService.startAllConnectors(BrokerService.java:2243)
    at org.apache.activemq.broker.BrokerService.start(BrokerService.java:551)
    at org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBeanBrokerService.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1544)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1485) 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-07-17T08:25:48.483

如果您使用的是 Windows 7，请尝试禁用“Internet 连接共享 (ICS)”服务。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-06T06:25:11.180

转到 installation_folder/conf 文件夹并打开 activemq.xml 文件。在文件中查找传输连接器。您可以从那里更改端口值。我将它从 61616 更改为 6616。通过运行 netstat -ao 命令，我无法看到在 Windows 中使用它的进程。

```
<transportConnectors>
        <!-- DOS protection, limit concurrent connections to 1000 and frame size to 100MB -->
        <transportConnector name="openwire" uri="tcp://0.0.0.0:6616?maximumConnections=1000&amp;wireformat.maxFrameSize=104857600"/>
    </transportConnectors> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-11-05T09:13:54.203

**我遇到了同样的问题，错误是：**

错误 | 无法启动 ActiveMQ JMS 消息代理（localhost，null）。原因：java.io.IOException：无法在 JMX 中注册传输连接器：无法绑定到服务器套接字：tcp://0.0.0.0:61616 由于：java.net.BindException：地址已在使用中

以下步骤可能有用：

1.  找到正在使用此端口的进程 ID（在您的情况下为 61616）。在命令 promt 中写入：netstat -a -o -n 并查看进程 ID。
2.  接下来从任务管理器或 taskkill /F /PID "process id" 中杀死进程

[http://sourcecode-kk.blogspot.in/2013/02/kill-process-running-on-certain-port-in.html](http://sourcecode-kk.blogspot.in/2013/02/kill-process-running-on-certain-port-in.html)

干杯。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-28T11:12:22.577

该错误告诉您已经有一个代理正在运行，或者正在运行的其他一些服务正在使用 ActiveMQ 想要将其 TCP 传输和 JMX 服务绑定到的所需端口。您可以在错误字符串“无法绑定到服务器套接字：tcp://0.0.0.0:61616 由于：java.net.BindException：地址已在使用中：”和“无法在 JMX 中注册传输连接器”中看到这一点：无法绑定到服务器套接字：tcp://0.0.0.0:61616 由于：java.net.BindException：地址已在使用中：“

要解决此问题，您需要弄清楚正在使用这些端口的运行情况，或者更改配置以使用其他端口

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-02T20:17:31.593

使用错误日志中的端口号查找进程 ID。

```
fuser [port number]/tcp 
```

然后使用`kill -9 [pid]`杀死该进程。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-27T09:28:23.437

我遇到了同样的问题，似乎该端口被另一个使用 AMQ 连接的 JVM 阻塞（ServiceMix 作为 AMQ 服务的客户端）。

重新启动 ServiceMix 解锁了端口预留，并且 ActiveMQ 服务重新启动而没有问题。

请注意，以前的 ActiveMQ 进程不再运行，这似乎是两个 JVM 和 Windows 阻塞端口的限制，因为客户端仍然使用它。这不是因为两个实例试图同时启动。

这可能无法回答您的具体问题，但它也可以帮助其他具有相同设置的人。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-13T18:57:55.637

当我们遇到这个问题时，我们发现默认端口 (61616) 在“临时端口”范围内（有关背景信息，请参阅[https://en.wikipedia.org/wiki/Ephemeral_port](https://en.wikipedia.org/wiki/Ephemeral_port)）。我的理解是操作系统（在我们的例子中是 Windows 2012）可以将端口分配给它想要的任何东西，只要它还没有被使用。对我们来说，大部分时间都很好，但偶尔在服务器启动时，Windows 在 activemq 启动之前将端口 61616 分配给了其他东西，所以当 activemq 尝试启动时，我们得到了这个错误。

以下摘录摘自“ [http://blogs.technet.com/b/askds/archive/2007/08/24/dynamic-client-ports-in-windows-server-2008-and-windows-vista-or -how-i-learned-to-stop-worrying-and-love-the-iana.aspx](http://blogs.technet.com/b/askds/archive/2007/08/24/dynamic-client-ports-in-windows-server-2008-and-windows-vista-or-how-i-learned-to-stop-worrying-and-love-the-iana.aspx)讨论了如何在 Windows 中设置临时端口范围（本文称它们为“动态端口”）：

> 在 Vista 和 2008 中，网络堆栈级别的大多数事物管理都是通过 NETSH 处理的。使用 NETSH，可以查看每个服务器的动态端口范围设置：
> 
> `netsh int ipv4 show dynamicport tcp`
> 
> `netsh int ipv4 show dynamicport udp`
> 
> `netsh int ipv6 show dynamicport tcp`
> 
> `netsh int ipv6 show dynamicport udp`
> 
> 这些命令将输出当前使用的动态端口范围。一个简洁的事实是，您可以为 TCP 和 UDP 或 IPv4 和 IPv6 设置不同的范围，尽管它们都开始相同。
> 
> 在 Windows Server 2003 中，范围始终默认从 TCP 端口 1024 开始，并且是硬编码的。但在 Vista/2008 中，您可以移动范围的起点。因此，如果您需要，您可以告诉您的服务器使用端口 5000 到 15000 进行动态端口分配，或者您想要的任何连续端口范围。为此，您再次使用 NETSH：
> 
> `netsh int ipv4 set dynamicport tcp start=10000 num=1000`
> 
> `netsh int ipv4 set dynamicport udp start=10000 num=1000`
> 
> `netsh int ipv6 set dynamicport tcp start=10000 num=1000`
> 
> `netsh int ipv4 set dynamicport udp start=10000 num=1000`
> 
> 上面的示例将您的动态端口范围设置为从端口 10000 开始并通过端口 11000（1000 个端口）。
> 
> 关于端口范围需要了解的一些重要事项：
> 
> *   您可以设置的最小端口范围是 255。
>     
>     
> *   您可以设置的最低起始端口是 1025。
>     
>     
> *   最高端端口（基于您设置的范围）不能超过 65535。
>     
>     
> 
> 有关这方面的更多信息，请查看[KB 929851](http://support.microsoft.com/default.aspx?scid=kb;EN-US;929851)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-20T11:42:02.787

我尝试了这里提到的所有可能的方法

我在下面的行中将 5672 更改为 5673

```
<transportConnector name="amqp" uri="amqp://0.0.0.0:5672?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600"/> 
```

在此路径内：

> pathToActiveMQ\ActiveMQ\apache-activemq-5.16.0\conf\activemq.xml

最后，它在重新启动我的电脑后工作。

愿它帮助某人。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-03T18:02:25.677

此处的 Windows：与代理通信的软件可能具有硬编码端口，因此我无法更改 activemq.xml

我已经为其中一个连接打开了连接共享，我已经禁用了它，它有帮助，非常感谢*Bin S*获取此信息，因为 netstat 没有显示此端口被占用！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-05T01:09:20.410

通过google登陆到这个页面的，注意冲突的端口是否和你的报错信息相符。

在这个问题中，冲突的端口是`61616`（Openwire 协议）。但是如果冲突端口是`5672`（AMQP），则可能是在同一系统上安装了多个 amqp 消息代理。

[RabbitMQ 和 ActiveMQ 在同一台机器上运行](https://stackoverflow.com/questions/28565527/rabbitmq-and-activemq-running-on-the-same-machine)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-07-17T11:17:09.037

尝试让这些端口免费，如果 netstat 显示它们是免费的，但它仍然无法运行，只需在 etc/broker.xml 中将端口更改为 6613 和 6614。它应该有帮助

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-05T17:43:37.167

错误 | 无法启动 Artemis JMS 消息代理。原因：地址已被使用

在我的情况下，我必须杀死在 bootstrap.xml 中使用 8161 的进程（在 etc 文件夹中）

按照以下步骤查找 PID 并终止进程

1.  找到正在使用此端口的进程 ID（在您的情况下为 8161）。在命令提示符下写入：netstat -a -o -n 并查看进程 ID。
2.  接下来通过在管理员模式下运行命令提示符键入以下命令终止进程：taskkill /F /PID "process id"

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-06-11T11:39:18.020

尝试使用管理员权限运行它。

在 windows 中- 转到目录 -apache-activemq-5.4.3\bin 并右键单击 activemq.bat 并以管理员身份运行。

干杯

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-10-24T03:42:05.473

如果您使用的是 java 代码。试试这样的支票。

```
 if (!brokerService.isStarted()) {
            System.out.println("Bringing up the ActiveMQ Broker");
            brokerService.addConnector("tcp://localhost:61616");
            brokerService.setBrokerName("Broker");
            brokerService.setUseJmx(true);
            brokerService.start();
        } else {
            System.out.println("ActiveMQ Broker already started");
        } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-01-07T15:58:37.593

在 Windows Server 2012R2 主机上部署嵌入式活动 MQ 代理作为基于 Apache Camel 的应用程序的一部分时，我遇到了这个问题。我按照上面发布的建议更改了代理绑定的端口（从 61616 到 6616）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-05-19T09:03:34.107

有时，当您将 Mosquitto 与 ActiveMQ 一起安装时会导致此错误。这是由于 Mosquitto MQTT 服务在端口 1883 上运行而 Activemq 服务器 MQTT 功能尝试在该端口上运行而导致的端口号冲突。您需要做的是在 conf/activemq.xml 中编辑 mqtt 连接器端口，或者像这样注释掉该行

```
<!-- <transportConnector name="mqtt" uri="mqtt://0.0.0.0:1883?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600"/> --> 
```

然后再次启动服务

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-12-29T09:34:51.287

上面的帖子是有效的，将 openwire 端口更改为 6616 工作，但它可能会发生在你身上，就像我发生的那样 amqp 端口也被占用了，所以你需要根据我也更改（从 5672 到 5762（或任何其他））配置是：-

```
 <transportConnector name="openwire" uri="tcp://0.0.0.0:6616?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600"/>
        <transportConnector name="amqp" uri="amqp://0.0.0.0:5762?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600"/>
        <transportConnector name="stomp" uri="stomp://0.0.0.0:61613?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600"/>
        <transportConnector name="mqtt" uri="mqtt://0.0.0.0:1883?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600"/>
        <transportConnector name="ws" uri="ws://0.0.0.0:61614?maximumConnections=1000&amp;wireFormat.maxFrameSize=104857600"/> 
```

# jquery - 停止 jquery 扩展菜单“振荡”

> ID：11700236
> 
> 赞同：1
> 
> 时间：2012-07-28T10:33:52.827
> 
> 标签：jquery, html, animation, drop-down-menu

我已经在 jquery 中构建了一个扩展菜单，它可以正常工作，但是当我快速进出菜单多次时，菜单会振荡，并且在鼠标滚出菜单后会保持动画打开和关闭，这很烦人。这是我打开菜单的代码，非常简单。

```
$("#links").mouseenter(function(){
    $("#linksBody").slideDown(600, "easeOutExpo");
});

$("#links").mouseleave(function(){
    $("#linksBody" ).slideUp(600, "easeOutExpo");
}); 
```

这是我遇到问题的网站

[http://www.pegbarandgrill.com/blog/](http://www.pegbarandgrill.com/blog/)

它在右侧的链接和目录菜单。有谁知道解决这个振荡问题的最佳方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:37:14.303

试试这个：

```
$("#links").mouseenter(function(){
    $("#linksBody").stop(1).slideDown(600, "easeOutExpo");
});

$("#links").mouseleave(function(){
    $("#linksBody" ).stop(1).slideUp(600, "easeOutExpo");
}); 
```

另一种解决方案是使用像[hoverIntent这样的插件](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFkQFjAA&url=http://cherne.net/brian/resources/jquery.hoverIntent.html&ei=IMETUIHiN6qziQfKmYGIBw&usg=AFQjCNEID3O1NTtGoOWSwek7fDjVfcP1FQ)

此外，您可以使用`.hover()`和简化这样的事情：

```
$("#links").hover(function(){
    $("#linksBody").stop(1).slideDown(600, "easeOutExpo");
},
  function(){
    $("#linksBody").stop(1).slideUp(600, "easeOutExpo");
}); 
```

我还想知道这`easeOutExpo`是否会导致您出现问题。尝试不使用它，看看它是否有帮助？

# templates - $this->getChildHtml('topContainer'); 的 Magento 代码

> ID：11700238
> 
> 赞同：5
> 
> 时间：2012-07-28T10:33:59.230
> 
> 标签：templates, magento

我正在编写一个magento主题。我启用了路径提示，但在标题中调用`$this->getChildHtml('topContainer');` 不会显示任何路径提示。进行上述调用时，如何找出加载了哪个 .phtml 文件，以便创建适当命名和定位的 .phtml 自定义文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T11:57:08.880

topContainer 是一个“page/html_wrapper”块。这意味着没有与之关联的模板文件。

这个块的作用是在一个 html 元素中渲染它的所有子块。看看 'app/code/core/Mage/Page/Html/Wrapper.php' 中的 _toHtml() 方法。

真挚地，

乔纳森

--- 更多解释：

你可以看看一个完美的例子：

1.  layout/customer.xml（在基本主题中）
2.  layout/sales.xml（在基本主题中）

你有一个类似的块：

```
<block type="page/html_wrapper" name="my.account.wrapper" translate="label"> 
```

这是将呈现所有其他客户帐户块的区域。为了将块放置在该区域中，您必须创建一个“参考”节点，并将属性“名称”设置为“包装器”的名称。

例如，如果您（在 sales.xml 中）查看“sales_order_view”句柄，您将`<reference name="my.account.wrapper">`在该节点内看到其他块。

这些其他块是经典块（核心/模板），它们有模板文件。

因此，您可以将“page/html_wrapper”块与“core/text_list”块进行比较。唯一的区别是第一个将渲染的子块包装到一个 html 元素中。

看看上面提到的 2 个文件，它们会对你有很大帮助。

# c# - 填充文本框列表

> ID：11700243
> 
> 赞同：1
> 
> 时间：2012-07-28T10:34:59.870
> 
> 标签：c#, list, textbox

如何填充

```
List<TextBox> textBoxList = new List<TextBox>(); 
```

是否可以使用 5 个文本框填充到 textBoxList 并且这些框包含的文本说

```
textBox1.Text
textBox2.Text
textBox3.Text
textBox4.Text
textBox5.Text 
```

然后我打算像这样填充

```
for(int i=1;i<6;i++)
 {   //x is a string collection
    x[i]=textBox[i].Text= // some action
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:38:51.093

如果您使用列表，则可以使用此语法

```
List<TextBox> textBoxList = new List<TextBox>();
for (int i = 0; i < 6; i++)
    textBoxList.Add(new TextBox { Text = "text box no.:" + i.ToString() }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:40:12.513

你的问题是“有可能”吗？答：是的。

如何？好吧，您需要先将文本框添加到列表中，然后才能引用它们：

```
textBoxList.AddRange( { textBox1, textBox2, textBox3, textBox4, textBox5 } ); 
```

或者

```
textBoxList.Add(textBox1);
textBoxList.Add(textBox2);
textBoxList.Add(textBox3);
... 
```

# python - 边缘数组、ADL 和 ADM

> ID：11700245
> 
> 赞同：0
> 
> 时间：2012-07-28T10:35:08.147
> 
> 标签：python, algorithm

如果以前有人问过这个问题，我深表歉意，但我找不到“绝对”的答案。背景; 我正在尝试实现图形和路径查找算法。这与我的学习有关，但与家庭作业无关。

我将有 1 个架构师类/对象，它与用户通信并以切换链接方式控制应如何存储和处理图形信息。因此，我声明了 3 种图类型（ADM、ADL 和边列表），它们继承了其中一种的共同特征。因此架构师对象将根据条件和用户输入启动这些类之一的对象。每个图类型都有一个旅行者对象，该对象使用该图作为模板进行遍历（因此也声明了 3 个旅行者类），并测试它是否是两个用户给定节点之间的路径。因此，最重要的条件是使架构师能够根据用户给定的边数和节点数在 ADM、ADL 或边列表之间进行选择。该图将使用均匀分布或高斯曲线随机生成。我看到图密度可以是在 ADM 或 ADL 之间做出决定的一种方式，其中 ADM 在空间方面应该在低密度图中很差，以查找 v 是否孤立并找到 v 和 u 之间的路径，而 ADL 应该在这种情况下会更好。边缘列表在性能上似乎与 ADL 相似（对我而言） - 在什么情况下，边缘列表会比 ADL 更好，给定一个随机图并且条件需要连接到边缘和顶点比率/特征？

# merge - Gerrit：使用多个分支并传播更改

> ID：11700246
> 
> 赞同：7
> 
> 时间：2012-07-28T10:35:13.817
> 
> 标签：merge, branch, branching-and-merging, gerrit

我正在尝试确定在 Gerrit 上与我们的工作流程相匹配的多个分支的正确工作方式。

我们现在使用分支的方式是：我们有 master 和 feature 分支。Master 是我们想要完善并准备发布的分支，而特性显然是一个密集工作的领域。现在，在我们的特殊情况下，每当有人修复错误时，他们：

*   创建针对主分支的更改
*   樱桃选择它到特性分支的目标更改
*   gerrit 代码审查完成后，提交这两项更改。

现在我理解cherry-pick的方式，它选择单个提交并将其合并到当前更改。如果是这样的话，我希望最终不会有合并冲突，而且确实这个工作流程只适用于 GIT。然而，Gerrit 很可能由于其性质（分支不会像本地那样远程合并并获得不同的 sha 标签）最终列出了大量的冲突文件。

现在，我通过应用合并策略解决了所有这些问题（我们的在 feature 上，他们的在 master 上），但感觉不对：如果没有传播任何东西，它就会被丢弃。

我的问题是：是否有一个*安全*的工作流程，类似于上面的工作流程，最终会产生与 gerrit 的干净合并？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T19:02:39.113

我想说，在这种情况下，合并比挑选樱桃要好。

樱桃选择添加了相同的*更改*但不同的*提交*。因此，虽然樱桃挑选和合并的来源相同，但*git 树*是不同的。当树不同并且您稍后执行合并时，git 会认为您之前选择的提交丢失并尝试合并该更改，即使实际代码已经存在。这可能就是为什么你会遇到很多冲突。

我会提出另一种工作方式。

*   当你做正常的工作时，你会开发**功能**并像往常一样推送到 Gerrit。
*   当您在稳定的生产环境中进行补丁（即错误修复）时，您可以直接在**master** （或本地分支，如果您喜欢，但不是在**feature**）上执行此操作
*   当补丁在 Gerrit 中获得批准时，它会被合并到真正的**master**中，您可以提出*拉取*请求以将该更改添加到您的本地副本。您的**master**版本现在与 Gerrits **master相同**
*   现在您将**master**上的所有新更改合并到**feature**中。确保你做了一个*rebase*，以便补丁在你已经完成的任何**功能之前结束**
*   一旦需要部署所有新功能，您可以将**功能**合并到**master**中，推送到 Gerrit（如果您有权限，您可以通过直接推送到**master**而不是 refs/for/master 来传递 gerrit，因为这些更改已经过审核）
*   一旦所有更改都在 Gerrits **master**上，您可以拉上您的**master**并合并到具有*rebase的***功能**，使**功能**成为一个干净的分支来工作。当然，每个版本都有一个新**功能是完全有效的。**两者都工作正常。

 ****** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:35:48.130

我有点困惑，因为这个流程应该可以正常工作。如果其他用户在您的错误修复被审查/验证/提交之前提交更改，这可能会导致合并冲突，但这应该很少见。

如果你：

1.  修复master上的一个bug
2.  Push to review（在 gerrit 中创建变更 A）
3.  特性分支顶部的cherry-pick change A（解决从主到特性的任何冲突）
4.  推送精心挑选的变更以进行审查（创建变更 B）
5.  查看/验证/提交更改 A 和 B

一切都会好起来的。发生合并冲突的唯一方法是其他用户在第 1 步和第 5 步之间上传并提交更改。您是否看到不同的行为？你能提供更多细节吗？*****

# javascript - 如何更改单选按钮的值

> ID：11700252
> 
> 赞同：4
> 
> 时间：2012-07-28T10:36:15.447
> 
> 标签：javascript, jquery, html, radio-button

> **可能重复：**
> [如何使用 jQuery 检查单选按钮？](https://stackoverflow.com/questions/5665915/how-to-check-a-radio-button-with-jquery)

如何更改单选按钮的值。

```
jQuery('input:radio[name=search][id=search-damages]').checked = true; 
```

我已经尝试过了，但它不起作用

```
<input type="radio" name="search" id="search-vehicle" value="search-vehicle" checked>
<input type="radio" name="search" id="search-damages" value="search-damages"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T11:15:51.160

> 如何更改单选按钮的值？

*选中*的属性不会更改单选按钮的值。请注意，*选中*的属性是 DOM INPUT 元素属性之一，而不是 jQuery 对象属性之一（*通过使用 jQuery 选择一个元素，创建一个 jQuery 对象*）。如果您想更改此属性，您应该首先将 jQuery 对象转换为 DOM Element 对象。

```
$('#search-damages')[0].checked = true; 
```

或使用 jQuery 对象的`prop()`方法：

```
$('#search-damages').prop('checked', true) 
```

如果要更改单选按钮控件的值（*未选中属性*），可以使用 jQuery`val()`方法：

```
$('#search-damages').val('new value'); 
```

[请注意，`:radio`选择器已弃用，并且由于您的复选框有一个 ID，您可以通过 ID 选择器选择它。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:42:12.977

我是“在降低复杂性时使用 jQuery，在其他情况下使用 JS”的粉丝，所以我会选择：

```
$("#search-damages")[0].checked = true; 
```

否则，如果您更喜欢使用 jQuery syntanx，您可以使用：

```
$("#search-damages").prop("checked", true); 
```

见：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T10:38:30.533

试试这个：

```
$('#search-damages').attr('checked','checked'); 
```

# eclipse - eclipse indigo 的 Hibernate 映射文件插件

> ID：11700253
> 
> 赞同：0
> 
> 时间：2012-07-28T10:36:20.343
> 
> 标签：eclipse, hibernate, plugins

我是 hibernate 世界的新手，我正在寻找可以生成 hbm 文件的任何插件。是否有任何插件可以帮助我生成 hbm 映射文件，而不是简单的文件，而是关系文件......！在 eclipse indigo 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:45:28.817

[http://www.hibernate.org/subprojects/tools.html](http://www.hibernate.org/subprojects/tools.html)：Hibernate 工具之家：

> Eclipse 中提供了以下功能：
> 
> Mapping Editor：Hibernate XML 映射文件的编辑器，支持自动完成和语法高亮。编辑器甚至支持类名、属性/字段名、表名和列名的语义自动完成。

# android - 不允许使用字符串类型（在“id”处，值为“@id/bAdd”）

> ID：11700255
> 
> 赞同：7
> 
> 时间：2012-07-28T10:36:41.013
> 
> 标签：android, xml

我收到一条错误 消息，**提示不允许使用字符串类型（在“id”处，值为“@id/bAdd”）**

*   我已经清理了项目。
*   一切都在早些时候工作，我不知道发生了什么，导致这个错误。

    ```
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Your total is 0"
        android:textSize="45dp"
        android:layout_gravity="center"
        android:gravity="center"
        android:id="@+id/tvDisplay"
        tools:context=".StartingPoint" />

     <Button 
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:text="Subtract One"
        android:layout_gravity="center"
        android:textSize="20dp"
        android:id="+@id/bSub"
        />

    <Button 
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:text="Add One"
        android:layout_gravity="center"
        android:textSize="20dp"
        android:id="+@id/bAdd"

        /> 
    ```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-28T10:38:52.963

你可以给你的身份证`@+id/bAdd`

代替`+@id/bAdd`

也可以编辑

```
android:id="@+id/bSub"
            ^^ 
```

代替

```
android:id="+@id/bSub"
            ^^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T10:39:46.410

**+**符号必须在**@**符号之后。

```
android:id="+@id/bAdd" to  android:id="@+id/bAdd"

 and also change

android:id="+@id/bSub" to android:id="@+id/bSub" 
```

**或者**

你可以声明是

android:id="@id/bSub"

但是您必须在位于 values 文件夹中的 ids.xml 文件中声明 bSub 值。

# 例子

```
<resources>
  <item type="id" name="bSub" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T10:39:40.813

请使用`@+id/yourId`代替`@id/yourId`

# c# - 我无法弄清楚的数组中的 ArgumentNullException

> ID：11700256
> 
> 赞同：0
> 
> 时间：2012-07-28T10:36:41.517
> 
> 标签：c#

我已经睡了半夜，仍然试图弄清楚这个空异常。我已经阅读了一些关于这个问题的文本，但没有一个对我有任何帮助，对我来说问题是什么，因为它应该起作用：/它只是在这段代码中崩溃：

```
Private void UpdateGUI()
{
    string selectedItem  = cmbDisplayOptions.Items[cmbDisplayOptions.SelectedIndex].ToString();
    rdbtReserv.Checked = true;            
    lstReservations.Items.Clear();           
    lstReservations.Items.AddRange(m_seatMngr.GetSeatInfoStrings(selectedItem));
} 
```

`lstReservations.Items.AddRange(m_seatMngr.GetSeatInfoStrings(selectedItem));`给了我 ArgumentNullExeption，但对我来说不应该那样做。

addrange 将字符串 selectedItem 发送到另一个类：

```
 public string[] GetSeatInfoStrings(string selectedItem)
    {
        int count = GetNumOfSeats(selectedItem);

        if (count <= 0)
        {
            return null;
        }

        string[] strSeatInfoStrings = new string[count];

        for (int index = 0; index <= m_totNumOfSeats - 1; index++)
        {
            strSeatInfoStrings[index] = GetSeatInfoAt(index); 
        }

        return strSeatInfoStrings;

    } 
```

这`int count = GetNumOfSeats(selectedItem);`到这里并返回一个 int：

```
 private int GetNumOfSeats(string selectedItem)
    {
        if (selectedItem == "ReservedSeats")
        {
            return GetNumReserved();
        }
        if (selectedItem == "VacantSeats")
        {
            return GetNumVacant();
        }
        else
        {
            return m_totNumOfSeats;
        }
    } 
```

我已经检查了数组是否有正确的空格数（60）并且`selectedItem`有一个字符串（Allseats 以开头，所以它应该返回`m_totnumOfSeats`一个 60 的 int）但是随后`private int GetNumOfSeats`出现问题，它返回 null 并且......那么为什么？

我看不到问题.. 可能因为试图找到问题而失明。总是在这里得到出色的帮助，我学到了很多！所以也许有人可以指出我的代码中存在的所有问题。

预先感谢一百万的任何和所有建议！

//问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:45:01.873

查看 ObjectCollection 的源代码，当您调用 AddRange 并传递一个空值时，您会返回 ArgumentNullException。

您可以阻止这种更改此代码

```
if (count <= 0) 
{ 
    return new string[0]; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T11:20:44.503

检查您的变量是否实际初始化并返回正确的值。

GetSeatInfoStrings 方法和 GetNumofSeats 方法存在逻辑错误。

幸运的是，GetNumOfSeats 方法将始终为您返回 60，因为您比较字符串的方式错误。这不是正确的方法，因此请使用 Equals 方法进行比较，例如

```
 if (selectedItem.Equals("ReservedSeats")) 
```

这样，您将获得正确的输出形式 GetNumOfSeats(string) 方法。

接下来的事情是修复 GetSeatInfoStrings 方法中的循环，以免像这样使数组索引越界异常。

```
 string[] strSeatInfoStrings = new string[count];

    for (int index = 0; index <= count; index++)
    {
        strSeatInfoStrings[index] = GetSeatInfoAt(index); 
    }

    return strSeatInfoStrings; 
```

还要修复您的逻辑在 GetSeatInfoStrings 方法中返回 null 的部分。它应该根据您的逻辑返回一个空字符串数组

```
 return new string[0]; 
```

这可能会让你的方法起作用。在调试之前，您需要非常小心您的代码:-)

# c# - 虚方法

> ID：11700270
> 
> 赞同：0
> 
> 时间：2012-07-28T10:38:35.417
> 
> 标签：c#

例如，如果我有一个名为的类`"Parent"`。他有一个名为派生`"Print".` 类的方法，它有一个名为 的方法，但是是一个新方法。`"Kid"``"Print"`

```
new public void Print; 
```

让我们创建一个对象：

```
Parent p = new Kid(); 
```

如果我将方法 Print 与该对象的指针一起使用，则该方法将是父亲的（“Parent”）方法，而不是“Kid”。

但是当我使用虚拟方法时，该方法将是孩子的而不是父母。（如果打印是虚拟的，“孩子”中的打印会覆盖方法“）

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:42:58.660

您没有覆盖继承类中的方法 - 您正在[隐藏](https://stackoverflow.com/questions/392721/difference-between-shadowing-and-overriding-in-c)它。

代替：

```
public new void Print(); 
```

利用：

```
public override void Print(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:45:59.910

当您将 new 关键字用于与父方法具有相同签名的方法时，它会隐藏父方法。遮蔽不同于覆盖。阴影意味着如果实例和变量都是子类型，则将调用您的新方法。而覆盖确保无论变量是子类型还是父类型，都会调用覆盖的方法。

编辑：

看看 MSDN 上的[比较表](http://msdn.microsoft.com/en-us/library/ms172785.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:14:44.667

虚拟方法调用使用对象的实际类型来确定调用哪个方法，而非虚拟方法使用引用的类型。

说你有：

```
public class Parent {
  public void NonVirtualPrint() {}
  public virtual void VirtualPrint() {}
}

public class Kid : Parent {
  public new void NonVirtualPrint() {}
  override public void VirtualPrint() {}
} 
```

然后：

```
Parent p = new Parent();
Parent x = new Kid();
Kid k = new Kid();

p.NonVirtualPrint(); // calls the method in Parent
p.VirtualPrint(); // calls the method in Parent

x.NonVirtualPrint(); // calls the method in Parent
x.VirtualPrint(); // calls the method in Kid

k.NonVirtualPrint(); // calls the method in Kid
k.VirtualPrint(); // calls the method in Kid 
```

# asp.net - 数据库在服务器上无法访问，但在 localhost 上运行良好

> ID：11700277
> 
> 赞同：0
> 
> 时间：2012-07-28T10:39:21.997
> 
> 标签：asp.net, sql-server-2008

我已经用 C# 在 ASP.NET 中开发了我的第一个网站。这是一个使用 Microsoft SQL Server 2008 作为数据库的小型网站，我已将其部署在免费托管网站[www.somee.com](http://www.somee.com)上。它的数据库在我的计算机上运行良好，但是当我尝试访问服务器上的数据库时，出现以下错误：

```
[ A network-related or instance-specific error occurred while establishing a 
connection to SQL Server. 
The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. 
(provider: SQL Network Interfaces, 
error: 26 - Error Locating Server/Instance Specified)]. 
```

我在 web.config 中更新了数据库的连接字符串，并使用 getConString() 方法访问连接字符串，如下所示：

```
public string getConString()
{
    return System.Configuration.ConfigurationManager.ConnectionStrings["ConString"].ConnectionString;
} 
```

我能做些什么来解决这个问题。

网站网址是：[www.easyways.somee.com](http://www.easyways.somee.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:34:26.280

感谢大家的支持。我得到了我的问题的解决方案。实际上我在创建数据库或使用连接字符串时做错了。

现在我重新创建了一个空白数据库，然后通过导航到“用户 -> 托管产品 -> MS SQL -> 数据库 -> （数据库名称） -> 来自文件的新 SQL 查询”来执行我为我的数据库创建的 SQL 脚本。并且还更新了 web.config 文件中的新连接字符串。

这是我现在使用的连接字符串：

```
"workstation id=dataeasyways.mssql.somee.com;packet size=4096;user id=easyways_db;pwd=********;data source=dataeasyways.mssql.somee.com;persist security info=False;initial catalog=dataeasyways" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:59:00.367

您的托管服务提供商为您提供连接信息（对于您的托管服务提供商，您可以在此处查看他们的[帮助页面](http://somee.com/DOKA/DoHelpTopics.aspx?docode=false&thnid=103)，该页面向您展示如何连接到他们的数据库。

基本上它归结为登录到他们的控制面板。

```
In "User menu" navigate to "User -> Managed products -> MS SQL -> Databases -> (Database name)". 
```

还要记住，由于这是一个远程数据库，因此它受到外部世界的限制的可能性很小，并且只有本地网络服务器可以访问该数据库。

# scala - Scala 中的特征与包

> ID：11700279
> 
> 赞同：8
> 
> 时间：2012-07-28T10:39:44.093
> 
> 标签：scala, namespaces, package, traits

看完[Martin 关于反射和编译器的主题演讲](http://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2012/Reflection-and-Compilers)后，我似乎无法摆脱这个疯狂的问题。马丁谈到了“（婚礼）蛋糕模式”，其中特征起着核心作用。我想知道，当我们已经拥有特征时，为什么我们还需要包？有什么`package`可以做，什么`trait`（至少在理论上）不能做？

我不是在谈论当前的实现，我只是想想象如果我们用特征替换包会是什么样子。在我的脑海里会是这样的：

*   少一个关键字（`package`不需要）
*   不需要`package object`s

总结我所有的问题：

1.  理论上是否可以从语言中删除包并改用特征。
2.  我们将从这种变化中获得什么其他好处？（我在考虑一流的包和一流的导入，但是 mixin 组合是编译时的事情，虽然超级调用是动态绑定的）
3.  Java/JVM 兼容性是唯一的阻碍吗？

**更新**

Daniel Spiewak 在[这个主题演讲](https://www.youtube.com/watch?v=yLbdw06tKPQ)中谈到依赖注入只是蛋糕模式可以做的所有事情的冰山一角。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T23:41:11.243

Martin Odersky 曾说过 Scala 可以只使用特征、对象、方法和路径（我希望我没有忘记一些事情）。

类和包都在那里，因为 Scala 旨在成为一种宿主语言，即一种在宿主平台上运行（这实际上不是有趣的部分）并与宿主平台*互操作的*语言（这是重要的一点）。Scala 打算与之互操作的一些主机平台是 Java 平台和 CLI，它们都具有类和包（在 CLI 的情况下为命名空间）的概念，它们之间的区别非常明显，不能简单地表示为特征或对象。这与接口不同，接口可以简单地映射到纯抽象特征或从纯抽象特征映射。

上述声明是在关于可能从 Scala 中删除泛型的讨论中提出的，因为泛型可以做的所有事情也可以通过抽象类型来实现。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T11:48:10.797

在 scala 中，对象和包的用途几乎相同，对象也称为模块。对象应该被视为模块，因为它们可以包含任何定义，当然包括其他对象，尤其是类型。

一个特征可以被认为是一个抽象模块。它可以包含任何定义，任何成员都可以是抽象的，同样重要的是，类型成员。我背诵这一切只是为了强调对称性。也许 OT 但对我来说，trait 似乎是 scala 中的一项重大创新，就像对象和功能思想的融合一样。

最后给出一个答案：

1.  我认为可以删除包以支持对象（而不是特征）。
2.  好处将是简化 - 不需要显式定义包对象。
3.  我认为包与 Java/JVM 兼容性的对象不同。

更多评论：在视频中，Martin 更多地谈论特征（抽象模块）而不是具体模块，因为后者仅在最后一刻出现，以组装和具体化抽象模块的某些组合。

即使不是“混合蛋糕”，使用抽象模块也很好。例如，在草拟一些代码时，您可能会定义一个包含定义的模块。但是，一旦你找到了一个你还没有准备好填写的类型或值，就不要提供一个空值，比如 null。而是将对象切换为特征并保留成员抽象。

# javascript - Javascript全局变量问题

> ID：11700282
> 
> 赞同：-1
> 
> 时间：2012-07-28T10:39:59.123
> 
> 标签：javascript, jquery

下面的代码片段没有让我得到控制台中显示的全局变量 id 的值。我哪里错了？

```
var id;

function set_id(myid){
 id=myid;
}

function get_id(){
 return id;
}

$("#btn").click(function(){
 $.post("....", function(data){ //data reurns a JSON
  set_id(id); //success!!
 }
}

$("#show").click(function()[
 console.log(get_id()); //doesn't work, how do I get this workin.. Where am I going wrong
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:53:16.227

为什么要使用全局变量和 getter/setter？你可以在任何地方设置它，因为它是全球性的：

```
id = x; 
```

并在任何地方得到它：

```
x = id; 
```

所以你的代码是：

```
$("#btn").click(function() {
    $.post("....", function(data) {
        id = data.id;
    });
});

$("#show").click(function() {
    console.log(id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:46:52.697

这段代码在我看来很可疑：

```
$("#show").click(function()[
   console.log(get_id()); //doesn't work, how do I get this workin.. Where am I going   wrong
} 
```

也许你的意思是：

```
$("#show").click(function(){
   console.log(get_id());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T10:57:27.077

你的语法是错误的。 `[`就在 console.log 之前

# parallel-processing - 无需集群的多台机器上的并行编程

> ID：11700283
> 
> 赞同：3
> 
> 时间：2012-07-28T10:40:03.397
> 
> 标签：parallel-processing, neural-network

我将在 40 岁时成为一名大学生。我将学习 IT 并计划完成一个学士学位项目。基本思想是尝试使用神经网络来评估媒体中的偏差。训练数据将是具有众所周知的偏见的政治博客。

我需要的是一种编程语言，它可以在联网但不集群的多台机器上并行运行。我有 2 台 Linux 机器和 3 台运行 OS X。我希望该语言可以编译为二进制而不是字节码或虚拟机，但我会尽我所能。我不需要任何 GUI 库，所以这不是一个约束。我的大部分编程都是在 python 中完成的，但如果它能让并行执行更容易，我愿意学习另一种语言。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:38:30.877

我强烈建议你考虑坚持使用 Python。在您开始处理并行/分布式计算的同时学习一门新语言，很可能会在您的工作中扔出您不需要的扳手。我相信你的时间会更好地用于解决构建你想要的神经网络的问题，而不是学习一门新语言的特性。而且，就声誉而言，Python 非常适合您的计划。当然，它确实没有满足您应该编译为二进制的要求，但我不确定它来自哪里。

当您*在没有集群的情况下在多台机器上编写并行编程时，*我在想*哦，他的意思是分布式编程*。我倾向于认为并行计算是分布式计算中的一个利基，部分由所使用资源的同质性（从程序员的角度来看）定义。如果硬件的同质性支持这种明显的同质性，那么这种明显的同质性将得到极大的帮助，从而使愿景与现实之间几乎没有差距。

如果您真正拥有的是各种不同规格和不同操作系统的计算机并通过非专用网络进行通信，那么我担心您会发现很难为程序员（即为您自己）建立同质化的错觉并且会更好从一开始就着手构建分布式系统。

我只是不同意告诉你学习 C 和 MPI 的答案，我认为你会用 Python 更快地取得进步。

祝你学业顺利。

哦，如果你不接受我的建议而忘记一门新的编程语言，可以考虑 Haskell 和 Erlang。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:45:28.807

听起来像是一个有趣的项目。然而，横向思考不会是基于 GPU 的系统（即大规模并行）更适合当头一棒吗？因此可能是 C + CUDA 之类的东西？

我不知道它是否仍然存在，但[OCCAM](http://en.wikipedia.org/wiki/Occam_%28programming_language%29)（来自旧的 Transputers）被设计为一个并行系统，具有 PAR 和 SEQ 构造。我刚刚 在linux上读过[这个](http://webcache.googleusercontent.com/search?q=cache%3ahttp://www.hensa.ac.uk/parallel/occam/projects/occam-for-all/kroc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:20:51.607

对我来说，这听起来像是**C + MPI**。

# android - 如何使 IntentService 的线程保持活动状态？

> ID：11700288
> 
> 赞同：5
> 
> 时间：2012-07-28T10:40:36.813
> 
> 标签：android, multithreading, intentservice

我正在编写一个跟踪用户位置的测试应用程序。这个想法是我可以启动一个服务，然后注册位置更新。现在我正在为此使用 IntentService。

服务代码（不起作用...）如下所示：

```
public class GpsGatheringService extends IntentService {

// vars
private static final String TAG = "GpsGatheringService";
private boolean stopThread;

// constructors
public GpsGatheringService() {
    super("GpsGatheringServiceThread");
    stopThread = false;
}

// methods
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.d(TAG, "onStartCommand()");
    return super.onStartCommand(intent, flags, startId);
}

@Override
protected void onHandleIntent(Intent arg0) {
    // this is running in a dedicated thread
    Log.d(TAG, "onHandleIntent()");
    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    LocationListener locationListener = new LocationListener() {

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            Log.d(TAG, "onStatusChanged()");
        }

        @Override
        public void onProviderEnabled(String provider) {
            Log.d(TAG, "onProviderEnabled()");
        }

        @Override
        public void onProviderDisabled(String provider) {
            Log.d(TAG, "onProviderDisabled()");
        }

        @Override
        public void onLocationChanged(Location location) {
            Log.d(TAG, "onLocationChanged()");
        }
    };
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);

    while (!stopThread) {
        try {
            Log.d(TAG, "Going to sleep...");
            Thread.sleep(1500);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

@Override
public void onDestroy() {
    super.onDestroy();
    Log.d(TAG, "onDestroy()");
    stopThread = true;
} 
```

}

目前唯一发生的是“Going to sleep...”的输出。我需要一些机制来保持线程处于活动状态（因为否则侦听器无法再访问状态更新）并且不会浪费 cpu 时间（我认为忙循环不是首选方式）。即使有很多其他方法可以实现应用程序行为（记录 gps 坐标），我也对这种方式的解决方案感兴趣，以学习解决这种性质问题的技术！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T10:55:34.923

> 如何使 IntentService 的线程保持活动状态？

你没有。你不要`IntentService`在这样的场景中使用。

> 我需要一些机制来保持线程处于活动状态（因为否则侦听器无法再访问状态更新）并且不会浪费 cpu 时间（我认为忙循环不是首选方式）

不，在这种情况下 a`Service`很好，因为您控制服务何时消失，您控制您创建的任何线程的生命周期等`IntentService`不适合您的预期目的，因为*它*控制服务何时消失并且*它*控制线程的生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:46:55.223

考虑使用[远程服务](http://developer.android.com/reference/android/app/Service.html#RemoteMessengerServiceSample)。它对我有用。

# c# - 使用 xmlreader 读取 xml 文件

> ID：11700292
> 
> 赞同：-2
> 
> 时间：2012-07-28T10:41:05.813
> 
> 标签：c#

我想使用 xmlreader 读取 xml 文件。我有 xml 文件。我想在其中使用品牌代码来细化品牌名称...

```
 <Root>
- <data>
  <Companycode> TF</Companycode> 
  <Productcode>00001</Productcode> 
  <Productname>VPU</Productname> 
  <Brandcode>001</Brandcode> 
  <Brandname>DB</Brandname> 
  </data>
- <data>
  <Companycode>TF</Companycode> 
  <Productcode>00002</Productcode> 
  <Productname>SENDERCARD</Productname> 
  <Brandcode>002</Brandcode> 
  <Brandname>LINSN</Brandname> 
  </data> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:39:32.223

最好使用序列化/反序列化并定义一个映射您的节点的类，例如：

```
class Product
{
string CompanyCode;
string ProductCode;
string ProductName;
... 
```

# ruby - 更新表列

> ID：11700295
> 
> 赞同：0
> 
> 时间：2012-07-28T10:41:38.530
> 
> 标签：ruby, database, datamapper

我为数据库使用数据映射器。我有一张桌子。

```
class ZedTable
  include DataMapper::Resource
  property :id,         Serial
  property :label,       String 
  property :now,    Boolean, :default => false  

  before :save do 
    ZedTable.all.update(:now => false)
    self.now = true
  end
end 
```

也就是说，我只想要一个值 was `true`。但是当我保存数据时出现错误。

```
Failure/Error: Unable to find matching line from backtrace
 SystemStackError:
   stack level too deep 
```

为什么？我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:40:18.620

你得到了，`stack too deep`因为当你调用时`update`，它首先`before :save`再次调用钩子。您需要的方法是`update!`，它绕过了钩子。

# css - 缩放 HTML 内容并添加滚动条

> ID：11700299
> 
> 赞同：0
> 
> 时间：2012-07-28T10:42:20.797
> 
> 标签：css

如果您曾经缩小浏览器窗口，您会注意到网页内容缩小到一定程度，然后开始出现滚动条。这是如何在 CSS 中完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:44:54.123

如果我正确理解您的问题，您正在寻找[`min-width`](https://developer.mozilla.org/en/CSS/min-width)属性而不是固定的`width`，以便内容可以缩小到一定大小。

```
.some-shrinkable-element {
   width: 30%;
   min-width: 100px;
} 
```

这将创建一个为其父元素宽度的 30% 的元素，并且会随着您的窗口变小而缩小，直到元素达到 100 像素，然后它会停留在该宽度上。

# objective-c - 带有图案图像 UIScrollView 的 UIColor

> ID：11700300
> 
> 赞同：0
> 
> 时间：2012-07-28T10:42:22.423
> 
> 标签：objective-c, xcode

我有这个设置一个图像的代码：

```
NSArray *imageFilenames = [NSArray arrayWithObjects:@"background iPad retina.png", @"iPad retina send.png", nil];

UIColor *bgColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background iPad retina.png"]];
scroll1.backgroundColor = bgColor; 
```

如何在模式中设置更多图像（可能来自 NSArray），以便我看到一个图像，然后是另一个图像，然后是第一个图像，然后是第二个图像......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:53:58.333

虽然我不是 100% 确定，但我认为你不能通过设置 backgroundColor 来做到这一点，因为`colorWithPatternImage`方法将为整个视图设置重复图像。

也许您应该将图像设置为 different `UIView`，然后将它们一一添加到滚动条中。

# android - Android CookieManager setCookie 没有设置任何东西

> ID：11700310
> 
> 赞同：16
> 
> 时间：2012-07-28T10:44:15.313
> 
> 标签：android, cookies

在我的应用程序中，我从 HttpGet 请求中获取了两个 cookie，并将它们存储在 CookieManager 中，如下所示：

```
//Clear old cookies
CookieManager.getInstance().removeAllCookie();
CookieSyncManager.getInstance().sync();

//Save the two cookies: auth token and session info
List<Cookie> cookies = httpclient.getCookieStore().getCookies();
if (cookies != null) {
    for (Cookie cookie : cookies) {
        String cookieString = cookie.getName() + "=" + cookie.getValue() + "; Domain=" + cookie.getDomain();
        CookieManager.getInstance().setCookie("http://alpha.mydomainname.com", cookieString);
    }

    System.out.println(CookieManager.getInstance().hasCookies()); //Prints false in 2.3,  true in 4.0.3

    CookieSyncManager.getInstance().sync();

    System.out.println(CookieManager.getInstance().hasCookies()); //Also prints false in 2.3 and true in 4.0.3
} 
```

我正在两个不同的设备上测试相同的代码，有趣的是，cookie 在 4.0.3 中正确设置（并且也在应用程序的启动之间传输），但在 2.3.3 中没有。当我说它们未设置时，我的意思是当我提供 URL 时 hasCookies() 返回 false 并且 getCookie() 返回 null。

在调用 setCookie 时，我已经尝试了 Cookie URL 的所有可能组合：“http://alpha.mydomainname.com”、“http://www.mydomainname.com”、“http://mydomainname.com”、“ mydomainname.com”、“alpha.mydomainname.com”、“.mydomainname.com”、“www.mydomainname.com”，它们都不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-05T00:42:26.273

我最近遇到了类似的问题，以下解决方案对我有用。我在开始时创建/获取 CookieSyncManager 和 CookieManager 的实例，并在整个代码中使用它们，而不是再次创建新实例。我还必须尝试在正确的域上设置 cookie - 我必须将其设置为出现在其中一个重定向中的域。

```
final CookieSyncManager cookieSyncManager = CookieSyncManager.createInstance(context);
final CookieManager cookieManager = CookieManager.getInstance();
cookieManager.setAcceptCookie(true);
cookieManager.removeSessionCookie();

//Save the two cookies: auth token and session info
List<Cookie> cookies = httpclient.getCookieStore().getCookies();
if (cookies != null) {
    for (Cookie cookie : cookies) {
        String cookieString = cookie.getName() + "=" + cookie.getValue() + "; Domain=" + cookie.getDomain();
        cookieManager.setCookie("http://mydomainname.com", cookieString);
    }
    cookieSyncManager.sync();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-14T10:15:36.033

我遇到了同样的问题。没有很清楚如何使用`setCookie`方法。如果您的 cookie 项目很少（例如我的情况），您应该使用一些循环来使用它：

```
val cookies = "key1=someValue1;key2=someValue2;key3=someValue3"
val cookiesList = cookies.split(";")
cookiesList.forEach { item ->
 CookieManager.getInstance().setCookie("http://someHost.com", item)
} 
```

所以你**不能**像这样使用它：

```
CookieManager.getInstance().setCookie("http://someHost.com", "key1=someValue1;key2=someValue2;key3=someValue3") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-03T11:32:40.123

cookie 不能包含分号，因为分号表示分隔符 int cookie。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T11:19:11.830

我还遇到了一些奇怪的行为`CookieManager`，最终我得到了一个解决方案，它是一种解决方法——但它确实有效。
我没有使用，而是`CookieManager`使用了 http cookie 标头，因此例如使用`HttpUrlConnection`它可以如下所示：

```
//Save the two cookies: auth token and session info
List<Cookie> cookies = httpclient.getCookieStore().getCookies();
if (cookies != null) {
for (Cookie cookie : cookies) {
    String cookieString = cookie.getName() + "=" + cookie.getValue();
    myHttpURLConnection.setRequestProperty("Cookie", cookieString);
} 
```

当然，如果您需要保留这些 cookie，您将不得不自己动手，并将它们的价值保存在某个地方以备后用……

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-25T20:25:45.580

我找到了一个使用后台线程来设置 cookie 的插件。

在*iOS 9*和*Android 5*上测试：

[https://github.com/kristianhristov/cordova-cookie-master](https://github.com/kristianhristov/cordova-cookie-master)

# openerp - 在 OpenERP 中查看客户姓名

> ID：11700311
> 
> 赞同：0
> 
> 时间：2012-07-28T10:44:16.673
> 
> 标签：openerp

客户，我防止客户的名字不应该和已经存在的一样吗？如果我可以继承树视图模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T23:32:42.577

您需要在代码中放置一个 sql 约束。以下是我为您编写的代码。

你需要制作一个模块来完成这项工作。如果您需要进一步的帮助，请告诉我。

```
class res_partner(osv.osv):
_inherit = "res.partner"

_columns = {
    'name': fields.char('Name', size=128, required=True, select=True),
}

_sql_constraints = [
('name', 'unique (name)',
  'The name of the partner must be unique !')

] 
```

# solr - 太阳黑子和 Rsolr 查询

> ID：11700312
> 
> 赞同：0
> 
> 时间：2012-07-28T10:44:28.613
> 
> 标签：solr, sunspot, rsolr

我正在阅读太阳黑子文档并找到基于 RSolr 库的太阳黑子。有没有办法获得连接以执行低级请求，如这个伪代码：

```
solr = Sunspot.connection
response = solr.get 'select', :params => {:q => '*:*'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T01:29:32.753

不是当前版本 (1.3.2)。好吧，你可以，但是你必须有`instance_eval`几个对象才能到达底层的 Rsolr 对象。[欢迎访问http://github.com/sunspot/sunspot](http://github.com/sunspot/sunspot)提供补丁— 欢迎使用 RSolr 连接的良好访问器方法。

# wpf - Silverlight DataGridColumnHeader 中按钮的事件处理

> ID：11700314
> 
> 赞同：0
> 
> 时间：2012-07-28T10:44:51.090
> 
> 标签：wpf, silverlight, events, datagrid, styles

我有一个带有 Styles.xaml 的 Silverlight 5 项目和另一个在运行时创建 DataGrid 的类。我想在 DataGridColumnHeader 中有按钮来实现某种过滤功能。样式定义如下：

```
<Style x:Key="DataGridFilterStyle" TargetType="sdk:DataGridColumnHeader">
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate>
                <Grid Height="{TemplateBinding Height}" Width="Auto">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Margin="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <TextBlock Text="{Binding}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0.2"/>
                        <Button Content="Foo" Margin="5,0" x:Name="filter" />
                    </StackPanel>
                </Grid>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

然后，我在运行时生成一个 DataGrid。我不知道父页面，因为它是通用的：

```
dg = New DataGrid
dg.AutoGenerateColumns = False
dg.RowHeight = 28
' Doing some stuff here....
dg.ColumnHeaderStyle = Application.Current.Resources("DataGridFilterStyle")
gd.Children.Add(dg)  ' gd is a Grid as a parent container 
```

所以，我有我的 Styles.xaml 和一个单独的类，我可以在其中进行一些活动。如何向 DataGridColumnHeader（过滤器）中的按钮添加单击事件？通常，如果样式和代码在同一个文件中，则不会有问题。

谢谢你的帮助！

问候

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:06:41.907

您可以在设置数据网格标题样式的代码中获取按钮控件。您需要先删除 TemplateBinding **Height="{TemplateBinding Height}** "

下面是在后面的代码中获取按钮控件的代码。

```
 var style =  Application.Current.Resources["DataGridFilterStyle"] as Style;
        dataGrid1.ColumnHeaderStyle = style;
        style = dataGrid1.ColumnHeaderStyle;
        var setter = style.Setters.FirstOrDefault();
        var k = setter as Setter;
        var val = k.Value as DataTemplate;
        var obj = val.LoadContent() as Grid;
        var button = (obj.Children[0] as StackPanel).Children[1]; 
```

希望这可以解决您的问题。

干杯! 维诺德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:33:24.117

```
<StackPanel Orientation="Horizontal" Margin="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <TextBlock Text="{Binding}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0.2"/>
        <Button Content="Foo" Margin="5,0" x:Name="filter" Click="filter_Click" /> //xaml
    </StackPanel>

private void filter_Click(object sender, RoutedEventArgs e) //code behind
    {

    } 
```

我希望这个能帮上忙

# java - 字符串字面量池是对字符串对象的引用的集合，还是对象的集合

> ID：11700320
> 
> 赞同：73
> 
> 时间：2012-07-28T10:45:53.277
> 
> 标签：java, string, memory-management

阅读 SCJP Tip Line 的作者 Corey McGlone 在 javaranch 网站上的文章后，我感到很困惑。由 Kathy Sierra（javaranch 的联合创始人）和 Bert Bates 命名的 Strings、Literally 和 SCJP Java 6 程序员指南。

我将尝试引用 Corey 先生和 Kathy Sierra 女士所引用的关于字符串文字池的内容。

**1.**根据 Corey McGlone 先生的说法：

*   字符串字面量池是指向字符串对象的引用集合。

*   `String s = "Hello";` （假设 Heap 上没有名为“Hello”的对象），将`"Hello"`在堆上创建一个 String 对象，并将对该对象的引用放入 String Literal Pool (Constant Table)

*   `String a = new String("Bye");`（假设 Heap 上没有名为“Bye”的对象，`new`操作员将强制 JVM 在 Heap 上创建一个对象。

现在 `"new"`这篇文章中关于创建字符串的操作符及其参考的解释有点混乱，所以我把文章本身的代码和解释放在下面。

```
public class ImmutableStrings
{
    public static void main(String[] args)
    {
        String one = "someString";
        String two = new String("someString");

        System.out.println(one.equals(two));
        System.out.println(one == two);
    }
} 
```

在这种情况下，由于关键字，我们实际上最终会得到稍微不同的行为。`"new."` 在这种情况下，对两个字符串文字的引用仍然被放入常量表（字符串文字池）中，但是，当你来到关键字时`"new,"`JVM 必须在运行时创建一个新的 String 对象，而不是使用常量表中的那个。

这是解释它的图表..

![在此处输入图像描述](../Images/b692ec2f097593ca9dc3084f5514870d.png)

**那么这是否意味着 String Literal Pool 也有对这个 Object 的引用？**

这是 Corey McGlone 的文章的链接

[http://www.javaranch.com/journal/200409/Journal200409.jsp#a1](http://www.javaranch.com/journal/200409/Journal200409.jsp#a1)

**2.**根据 SCJP 书中 Kathy Sierra 和 Bert Bates 的说法：

*   为了让 Java 内存效率更高，JVM 预留了一块特殊的内存区域，称为“字符串常量池”，当编译器遇到 String Literal 时，它会检查池中是否已经存在相同的 String。如果不是，那么它会创建一个新的字符串文字对象。

*   `String s = "abc";` // 创建一个字符串对象和一个引用变量....

    没关系，但后来我被这个说法弄糊涂了：

*   `String s = new String("abc")`// 创建两个对象和一个引用变量。

    它在书中说......普通（非池）内存中的一个新字符串对象，“s”将引用它......而额外的文字“abc”将被放置在池中。

    书中的上述行与 Corey McGlone 的文章中的行相冲突。

    *   如果 String Literal Pool 是 Corey McGlone 提到的 String 对象的引用集合，那么为什么要将文字对象“abc”放置在池中（如书中所述）？

    *   这个字符串文字池在哪里？

请清除这个疑问，虽然在写代码的时候并没有太大的关系，但是从内存管理的角度来看是非常重要的，这就是我要清除这个基础的原因。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-07-28T12:27:32.883

我认为这里要理解的要点是`String`Java 对象及其内容之间的区别 -`char[]`在[私有`value`字段](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/String.java#String.0value)下。`String`基本上是`char[]`数组的包装器，将其封装并使其无法修改，因此`String`可以保持不可变。该类还`String`记住实际使用了该数组的哪些部分（见下文）。这一切都意味着您可以有两个不同的`String`对象（非常轻量级）指向同一个`char[]`.

我将向您展示几个示例，以及`hashCode()`每个`String`和`hashCode()`内部`char[] value`字段的示例（我将其称为*文本*以将其与字符串区分开来）。最后，我将显示`javap -c -verbose`输出，以及我的测试类的常量池。请不要将类常量池与字符串字面量池混淆。它们并不完全相同。另请参阅[了解常量池的 javap 输出](https://stackoverflow.com/questions/5546280)。

# *先决条件*

为了测试的目的，我创建了一个打破`String`封装的实用方法：

```
private int showInternalCharArrayHashCode(String s) {
    final Field value = String.class.getDeclaredField("value");
    value.setAccessible(true);
    return value.get(s).hashCode();
} 
```

它将打印`hashCode()`，`char[] value`有效地帮助我们理解这个特定`String`点是否指向相同的`char[]`文本。

# 一个类中的两个字符串文字

让我们从最简单的例子开始。

## Java 代码

```
String one = "abc";
String two = "abc"; 
```

顺便说一句，如果您简单地编写`"ab" + "c"`，Java 编译器将在编译时执行连接，生成的代码将完全相同。这仅在编译时已知所有字符串的情况下才有效。

## 类常量池

每个类都有自己的[常量池](http://en.wikipedia.org/wiki/Java_class_file#The_constant_pool)——一个常量值列表，如果它们在源代码中出现多次，则可以重用。它包括常见的字符串、数字、方法名称等。

这是上面示例中常量池的内容。

```
const #2 = String   #38;    //  abc
//...
const #38 = Asciz   abc; 
```

需要注意的重要一点是字符串指向的`String`常量对象 ( `#2`) 和 Unicode 编码文本`"abc"`( )之间的区别。`#38`

## 字节码

这是生成的字节码。请注意，`one`和`two`引用都分配有`#2`指向`"abc"`字符串的相同常量：

```
ldc #2; //String abc
astore_1    //one
ldc #2; //String abc
astore_2    //two 
```

## 输出

对于每个示例，我都打印以下值：

```
System.out.println(showInternalCharArrayHashCode(one));
System.out.println(showInternalCharArrayHashCode(two));
System.out.println(System.identityHashCode(one));
System.out.println(System.identityHashCode(two)); 
```

毫不奇怪，这两对是相等的：

```
23583040
23583040
8918249
8918249 
```

这意味着不仅两个对象都指向相同的对象`char[]`（下面的相同文本），因此`equals()`测试将通过。但更多，`one`并且`two`是完全相同的参考！也是如此`one == two`。显然，如果`one`和`two`指向同一个对象，那么`one.value`和`two.value`必须相等。

# 文字和`new String()`

## Java 代码

现在我们都在等待的示例 - 一个字符串文字和一个`String`使用相同文字的新示例。这将如何运作？

```
String one = "abc";
String two = new String("abc"); 
```

`"abc"`在源代码中使用了两次常量这一事实应该给你一些提示......

## 类常量池

和上面一样。

## 字节码

```
ldc #2; //String abc
astore_1    //one

new #3; //class java/lang/String
dup
ldc #2; //String abc
invokespecial   #4; //Method java/lang/String."<init>":(Ljava/lang/String;)V
astore_2    //two 
```

仔细地看！第一个对象的创建方式与上面相同，这不足为奇。它只是从常量池中获取对已创建`String`( ) 的常量引用。`#2`然而，第二个对象是通过普通的构造函数调用创建的。但！第一个`String`作为参数传递。这可以反编译为：

```
String two = new String(one); 
```

## 输出

输出有点令人惊讶。第二对表示对`String`对象的引用是可以理解的——我们创建了两个`String`对象——一个是在常量池中为我们创建的，第二个是手动创建的`two`。但是，为什么第一对实际上表明两个`String`对象都指向同一个`char[] value`数组？！

```
41771
41771
8388097
16585653 
```

当您查看[`String(String)`构造函数的工作原理](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/String.java#String.%3Cinit%3E(java.lang.String))时会很清楚（此处已大大简化）：

```
public String(String original) {
    this.offset = original.offset;
    this.count = original.count;
    this.value = original.value;
} 
```

看？当您`String`基于现有对象创建新对象时，它会**重用** `char[] value`. `String`s 是不可变的，因此无需复制已知永远不会修改的数据结构。

我认为这是您问题的线索：即使您有两个`String`对象，它们仍可能指向相同的内容。正如你所看到的，`String`物体本身非常小。

# 运行时修改和`intern()`

## Java 代码

假设您最初使用了两个不同的字符串，但经过一些修改后它们都是相同的：

```
String one = "abc";
String two = "?abc".substring(1);  //also two = "abc" 
```

Java 编译器（至少我的）不够聪明，无法在编译时执行这样的操作，看看：

## 类常量池

突然间，我们得到了两个指向两个不同常量文本的常量字符串：

```
const #2 = String   #44;    //  abc
const #3 = String   #45;    //  ?abc
const #44 = Asciz   abc;
const #45 = Asciz   ?abc; 
```

## 字节码

```
ldc #2; //String abc
astore_1    //one

ldc #3; //String ?abc
iconst_1
invokevirtual   #4; //Method String.substring:(I)Ljava/lang/String;
astore_2    //two 
```

第一弦是照常构造的。第二个是通过首先加载常量`"?abc"`字符串然后调用`substring(1)`它来创建的。

## 输出

这并不奇怪——我们有两个不同的字符串，指向`char[]`内存中的两个不同的文本：

```
27379847
7615385
8388097
16585653 
```

好吧，文本并没有真正的*不同*，`equals()`方法仍然会产生`true`。我们有两个不必要的相同文本副本。

现在我们应该进行两个练习。首先，尝试运行：

```
two = two.intern(); 
```

在打印哈希码之前。不仅两者都`one`指向`two`同一个文本，而且它们是同一个引用！

```
11108810
11108810
15184449
15184449 
```

这意味着`one.equals(two)`和`one == two`测试都将通过。我们还节省了一些内存，因为`"abc"`文本在内存中只出现一次（第二个副本将被垃圾收集）。

第二个练习略有不同，看看这个：

```
String one = "abc";
String two = "abc".substring(1); 
```

显然`one`和`two`是两个不同的对象，指向两个不同的文本。但是为什么输出表明它们都指向同一个`char[]`数组？！？

```
23583040
23583040
11108810
8918249 
```

我把答案留给你。它会教你如何`substring()`工作，这种方法的优点是什么，什么时候会[导致大麻烦](https://stackoverflow.com/questions/1281549)。

# java - 最好的字符串技术等于比较

> ID：11700322
> 
> 赞同：3
> 
> 时间：2012-07-28T10:46:00.687
> 
> 标签：java

哪个 if 块更好？

```
private static void checkStr(String str) {

    if (str.equals("exit")) {
        System.out.println("It is equal");
    }
    if ("exit".equals(str)) {
        System.out.println("It is equal");
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T10:47:28.037

使用第一种方法，您为`NullPointerExceptions`. 所以从我的角度来看，第二个更好。

对于常量的情况，您应该始终喜欢第二种方法而不是第一种方法。

```
"exit".equals(str) 
```

[你可以在这里](http://www.mkyong.com/java-best-practices/constant-value-should-always-come-first-in-comparison/)找到详细的解释

* * *

我个人更喜欢另一种方法。[Apache Commons-commons lang](http://commons.apache.org/lang/)有`ObjectUtils.equals(Object, Object)`. 使用这种方法，即使使用**空**值，您也始终是安全的。

从[文档](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/ObjectUtils.html#equals%28java.lang.Object,%20java.lang.Object%29)：

> 比较两个对象是否相等，其中一个或两个对象可能为空。
> 
> ```
>  ObjectUtils.equals(null, null)                  = true
>  ObjectUtils.equals(null, "")                    = false
>  ObjectUtils.equals("", null)                    = false
>  ObjectUtils.equals("", "")                      = true
>  ObjectUtils.equals(Boolean.TRUE, null)          = false
>  ObjectUtils.equals(Boolean.TRUE, "true")        = false
>  ObjectUtils.equals(Boolean.TRUE, Boolean.TRUE)  = true
>  ObjectUtils.equals(Boolean.TRUE, Boolean.FALSE) = false 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T11:17:16.100

我认为这`str.equals("exit")`是编写比较的更自然的方式，但会抛出一个`NullPointerException`if`str`为 null，而`"exit".equals(str)`只会评估为 false。

您需要知道为什么`str`可以为空。空值可能是由程序中其他地方的错误或错误引起的，例如，您最好`null`单独检查而不是忽略它，或者事先确保它不为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T10:48:10.647

我更喜欢：

```
"exit".equals(str) 
```

只是为了避免`NullPointerException`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T10:50:45.097

您将使用以下方法**躲避** `NullPointerException`案例：

```
"exit".equals(str) 
```

# c# - 如何隐藏/显示图片框的背景图片？

> ID：11700327
> 
> 赞同：1
> 
> 时间：2012-07-28T10:46:54.697
> 
> 标签：c#, image, show-hide, picturebox

我有一个里面有图像的图片框。我想要，当我单击一个按钮时，图像应该隐藏并再次单击以显示图像。

在图片框中，使用绘画事件我正在绘制一些线条。所以如果我这样做`pictureBox1.Refresh();`会画线。我希望如果我单击一个按钮，图像将不会显示/关闭。

`pictureBox1 = null;`或者`pictureBox1.Image.Dispose();`不起作用，它向我展示了带有白色背景的大红色 x。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:48:23.773

隐藏它：

```
pictureBox.Visible = false; 
```

在点击事件中隐藏/显示它：

```
void SomeButton_Click(Object sender, EventArgs e)
{
    pictureBox.Visible = !pictureBox.Visible;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T00:48:03.933

要在您的图像中切换图像，您`PictureBox`可以创建一个 1 像素位图，并在您想要隐藏图像时将其分配给图片框，然后再次分配您的图像。我有点不清楚您问题的第二部分要问什么，除非您根据某些条件将其排除在 Paint Event 中，否则图片框的 Paint Event 中的任何绘图都将保留。如果您想在框中画一条线，并从按钮打开/关闭它，请参阅我的第二个示例。

IE

```
public partial class Form1 : Form
{
    Bitmap nullBitmap = new Bitmap(1, 1); // create a 1 pixel bitmap
    Bitmap myImage = new Bitmap("Load your Image Here"); // Load your image
    bool showImage;  // boolean variable so we know what image is assigned
    public Form1()
    {
        InitializeComponent();
        pictureBox1.Image = myImage;
        showImage = true;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (showImage)
        {
            pictureBox1.Image = nullBitmap;
            showImage = false; 
        }
        else
        {
            pictureBox1.Image = myImage;
            showImage = true;
        }
    }
} 
```

**第二个例子**

```
public partial class Form1 : Form
{
    bool showLines;
    public Form1()
    {
        InitializeComponent();
        showLines = true;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (showLines)
        {
            showLines = false;
            pictureBox1.Invalidate();
        }
        else
        {
            showLines = true;
            pictureBox1.Invalidate();
        }
    }

    private void pictureBox1_Paint(object sender, PaintEventArgs e)
    {
        if(showLines)
            e.Graphics.DrawLine(Pens.Purple, 0, 0, 100, 100);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T07:35:22.867

图片框1.BackgroundImage = null

# jsf - JSF 2.0 似乎忽略了过滤器

> ID：11700329
> 
> 赞同：0
> 
> 时间：2012-07-28T10:47:10.450
> 
> 标签：jsf

我正在使用 JSF 创建一些用户授权/检查，然后在安全 / 目录下输入特定页面，但没有成功......我尝试了 phaselistener 和 filter 但仍然......非常欢迎任何帮助。

我正在使用 Eclipse Juno。

我的 web.xml 如下：

```
<filter>
<filter-name>AuthorizationFilter</filter-name>
<filter-class>login.security.AuthorizationFilter</filter-class>
</filter>
<filter-mapping>
<filter-name>AuthorizationFilter</filter-name>
<url-pattern>/secure/*</url-pattern>
</filter-mapping> 
<servlet-mapping>
<servlet-name>Faces Servlet</servlet-name>
<url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

AuthorizationFilter 看起来像这样：

```
public class AuthorizationFilter implements Filter {
@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain  chain) throws ServletException, IOException {    
HttpServletRequest req = (HttpServletRequest) request;
login.Login_bean login_bean = (login.Login_bean)
req.getSession().getAttribute("username");
if (login_bean != null && login_bean.isLoggedIn()) {
chain.doFilter(request, response);
} else {
HttpServletResponse res = (HttpServletResponse) response;
res.sendRedirect(req.getContextPath() + "/index.xhtml");
}
} 
```

使用覆盖的 destroy() 和 init。它是从周围的几个站点复制/过去的。

Login_bean 是托管和会话范围的，当用户/密码对正确时，我运行了这个：

```
if(password.equals(dbpassword)){
FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("username", username);
FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("email", email);
this.visibleLogout="true";
this.visibleLogin="false";
return "valid";
} 
```

目录结构如下：

```
WebContent
-> secure
    -> projects.xhtml
-> index.xhtml 
```

index.xhtml 我想禁止访问的地方：

```
<p:menuitem id="projects" value="#{menuBean.projectsValue}" action="#{menuBean.navTo(projects)}" icon="ui-icon-circle-triangle-e" />. 
```

最后 menuBean.navTo() 是：

```
public String navTo(String whereTo)
{
return "/secure/projects";
} 
```

我以某种方式碰壁了..即使将 url-pattern 更改为 /faces/secure/* 我仍然被转发到 projects.xhtml

全脸-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd"
    version="2.1">

    <managed-bean>
        <managed-bean-name>languageBean</managed-bean-name>
        <managed-bean-class>languageControl.LanguageBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>

    <managed-bean>
        <managed-bean-name>menuBean</managed-bean-name>
        <managed-bean-class>menuControl.MenuBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>

    <navigation-rule>
        <description>login_rule</description>
        <from-view-id>/index.xhtml</from-view-id>
        <navigation-case>
            <from-action>#{login_bean.checkValidUser}</from-action>
            <from-outcome>valid</from-outcome>
            <to-view-id>/nav.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-action>#{login_bean.checkValidUser}</from-action>
            <from-outcome>invalid</from-outcome>
            <to-view-id>/index.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>

    <application>
        <locale-config>
            <default-locale>en</default-locale>
            <supported-locale>gr</supported-locale>
        </locale-config>
        <resource-bundle>
            <base-name>languageControl.messages</base-name>
            <var>msg</var>
        </resource-bundle>
    </application>
    <validator>
        <validator-id>passwordValidator</validator-id>
        <validator-class>registration.passwordValidator</validator-class>
    </validator>
    <managed-bean>
        <managed-bean-name>Login_bean</managed-bean-name>
        <managed-bean-class>login.Login_bean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>sendMail</managed-bean-name>
        <managed-bean-class>common.sendMail</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
        <!-- <managed-property> <property-name>email</property-name> <value>#{sendMail.email}</value> 
            </managed-property> -->
    </managed-bean>

    <validator>
        <validator-id>EmailValidator</validator-id>
        <validator-class>registration.EmailValidator</validator-class>
    </validator>

    <managed-bean>
        <managed-bean-name>RegistrationBean</managed-bean-name>
        <managed-bean-class>registration.RegistrationBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
</faces-config> 
```

完整的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>personalSite</display-name>
    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

<filter>
        <filter-name>AuthorizationFilter</filter-name>
        <filter-class>login.security.AuthorizationFilter</filter-class>
 </filter>
 <filter-mapping>
        <filter-name>AuthorizationFilter</filter-name>
        <url-pattern>/secure/*</url-pattern>
 </filter-mapping> 

</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:19:59.003

你在调试器中运行它吗？我会在“doFilter()”的顶部放一个断点，看看过滤器是否正在执行。一旦你弄清楚它是否真的在执行，单步执行代码（假设它正在过滤），看看为什么逻辑没有按预期执行。如果它没有触发，您可以打赌它可能是配置中的虚假内容。

# c# - 处理列表和列表框项目

> ID：11700331
> 
> 赞同：0
> 
> 时间：2012-07-28T10:47:26.193
> 
> 标签：c#, winforms, soap, sum

嘿，我有一个非常烦人的问题，我有一个双打列表和一个列表框。用户可以在文本框中输入一个值，然后单击 EnterValue。

```
List<double> listDouble = new List<double>();

    private void EnterValue_Click(object sender, EventArgs e)
    {
        //convert input to double
        listDouble.Add(Convert.ToDouble(textBox1.Text));
        textBox1.Clear();
        //clear existing items
        listBox1.Items.Clear();
        // clear any existing list items
        for (int i = 0; i < listDouble.Count; i++)
        {
            listBox1.Items.Add(listDouble[i]);
        }
     } 
```

然后我有另一个按钮，用户可以单击该按钮将输入的双打列表相加。

```
 private void button2_Click(object sender, EventArgs e)
    {
        listBox1.Items.Clear();
        CalculateSumOfList.ServiceReference1.Service1SoapClient client = new CalculateSumOfList.ServiceReference1.Service1SoapClient();
        CalculateSumOfList.ServiceReference1.ArrayOfDouble arrayOfDoubles = new CalculateSumOfList.ServiceReference1.ArrayOfDouble();
        arrayOfDoubles.AddRange(listDouble);
        string result = client.CalculateSum(arrayOfDoubles);
        label1.Text = result;
        //for (int i = 0; i < listDouble.Count; i++)
        //{
        //      listDouble.Remove(i);
        //}
    } 
```

这里的问题是，当用户输入一个值时，它被添加到列表中，这很好，当用户输入另一个数字时，列表显示正常，当用户计算列表的总和时，该值是正确的。但是在那之后，如果用户然后返回向列表添加更多数字，那么“旧”列表会附加到末尾吗？

在计算完成后，我已经尝试了各种方法来处理那个“旧”列表。但没有任何效果。这当然会破坏第二次尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:51:55.147

用于`listDouble.Clear()`完全清除列表。

您的循环（在您的代码示例中注释掉）无法正常工作。想一想：

*   首先，您删除第一个元素，使第二个元素成为新的第一个元素。
*   现在删除*新*的第二个元素（以前是第三个元素）。原始的第二个元素永远不会被删除。
*   这一直持续到一半的元素被删除......

# objective-c - 子类化 NSComboBox 以在 PopUp 上显示 NSMenu

> ID：11700333
> 
> 赞同：2
> 
> 时间：2012-07-28T10:47:44.880
> 
> 标签：objective-c, cocoa

我想要一个类似于 的可编辑控件`NSComboBox`，它具有自动完成功能，`NSComboBox`但组合框的问题是值列表只能是文本值。然而，我想，当按下组合框的箭头按钮时，它应该显示一个 NSMenu （这样我就可以在文本前面显示图标，也可以将分隔符 NSMenuItem 作为 中的项目之一`NSMenu`）。

因此，我计划子类化`NSComboBox`，以便抑制原始列表弹出窗口，`NSComboBox`而不是`NSMenu`显示 an。

但我不知道从哪里开始。

首先，我无法抑制默认弹出窗口。其次，组合框的按钮按下没有通知，这样我就可以显示我的NSMenu。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:31:40.717

我能想到的解决方案是看看`NSControlTextEditingDelegate`. 它声明了一个委托方法：

`- (NSArray *)control:(NSControl *)control textView:(NSTextView *)textView completions:(NSArray *)words forPartialWordRange:(NSRange)charRange indexOfSelectedItem:(NSInteger *)index`

在 NSTextField 的委托中使用它来实现您的自动完成需求并自己构建下拉按钮。一个带有图像的 NSButton 加上一行用于显示菜单的代码应该可以做到这一点。

# c++ - 更新分层窗口不起作用

> ID：11700337
> 
> 赞同：-1
> 
> 时间：2012-07-28T10:48:02.550
> 
> 标签：c++, png, gdi

我尝试整天使用 UpdateLayeredWindow，但它无法工作:(，我将代码放入 OnCreate 并使用 CImage 加载一个 png 文件（由 photoshop 创建）。

```
int CMainWindow::OnCreate(LPCREATESTRUCT lpCreateStruct)
{
    SetWindowLong(this->m_hWnd, GWL_STYLE, 0);
    SetWindowLong(this->m_hWnd, GWL_EXSTYLE, 0);
    SetWindowLong(this->m_hWnd, GWL_EXSTYLE, GetWindowLong(this->m_hWnd, GWL_EXSTYLE) | WS_EX_LAYERED);
    this->SetMenu(NULL);
    ::SetWindowPos(this->m_hWnd, HWND_TOP, 50, 50, 652, 492, SWP_SHOWWINDOW);

    CBitmap imageBitmap, *oldBitmap;
    CDC *dcWindow, dcMem;
    CRect wRect;
    CPoint wPos;
    CSize wSize;
    HBITMAP hbmp;
    BLENDFUNCTION bFunc;

    m_Image.Load(_T("Img/BG_Blue.png"));
    GetWindowRect(&wRect);
    dcWindow = GetWindowDC();
    imageBitmap.CreateCompatibleBitmap(dcWindow, wRect.Width(), wRect.Height());
    dcMem.CreateCompatibleDC(dcWindow);
    oldBitmap = dcMem.SelectObject(&imageBitmap);
    m_Image.Draw(dcMem.m_hDC, 0, 0, wRect.Width(), wRect.Height(), 0, 0, wRect.Width(), wRect.Height());
    wPos.x = 0; wPos.y = 0;
    wSize.cx = wRect.left; wSize.cy = wRect.bottom;
    bFunc.SourceConstantAlpha = 125;
    bFunc.BlendFlags = 0;
    bFunc.BlendOp = AC_SRC_OVER;
    bFunc.AlphaFormat = AC_SRC_ALPHA;
    UpdateLayeredWindow(dcWindow, &wPos, &wSize, &dcMem, &wPos, 0, &bFunc, ULW_ALPHA);
    //BitBlt(dcWindow->m_hDC, 0, 0, wRect.Width(), wRect.Height(), dcMem.m_hDC, 0, 0, SRCCOPY);
    DWORD error = GetLastError();
    dcMem.SelectObject(oldBitmap);
    return 0;
} 
```

该函数返回 1 ，但屏幕上什么也没有出现，只有启动菜单上的一个图标表示程序正在运行。我想知道png文件是否有问题......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:43:59.760

`dcWindow`应该是屏幕的设备上下文而不是窗口。所以像这样初始化它：`dcWindow->Attach(::GetDC(NULL))`而不是`dcWindow = GetWindowDC();`

# ruby-on-rails - Rails 自己的 gem 和未初始化的常量

> ID：11700339
> 
> 赞同：0
> 
> 时间：2012-07-28T10:48:09.280
> 
> 标签：ruby-on-rails, gem, ruby-on-rails-3.2

我正在尝试制作自己的宝石，但仍然出现错误，

这是我的 gem 结构： order - app - controllers - order_controller.rb - lib - order order.rb

以及 order_controller.rb 的内容：

```
class Order::OrderController < ApplicationController
    def index
       puts "asd"
    end
end 
```

我已将订单 gem 添加到主应用程序 Gemfil。

我定义了我的根以导致该控制器的索引操作：

```
root :to => "order/order#index" 
```

但是当我尝试访问主页时，我得到：

> 未初始化的常量 Order::OrderController

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:06:41.920

在 Gemfile 中添加 gem 后是否运行 bundle install ？顺便说一句，你为什么要为那个结构制作一个 gem 而不是用那个结构制作一个 Rails 项目？

# css - Twitter Bootstrap CSS 编辑 bootstrap.css 还是创建新样式？

> ID：11700343
> 
> 赞同：1
> 
> 时间：2012-07-28T10:48:34.837
> 
> 标签：css, twitter-bootstrap

如果我想改变样式

```
<a class="brand" href="#">Product</a> 
```

我应该怎么做？

我认为选择是`.brand`在*bootstrap.css*中编辑或创建新的*style.css*并在新的 css 文件中替换`.brand`更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:50:29.357

在您自己的新 css 文件中覆盖框架的样式（例如 bootstrap）会更好，因为您可以随时升级到最新版本的框架，而不必担心您的更改会被吹走。

也可维护，因为您可以在一个文件中查看所有更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:50:41.853

您绝对应该创建一个新的自定义样式表并覆盖您要修改的类。这样一来，如果您改变主意，您总是可以回到引导程序提供的默认样式。

这样你就有了坚实的 CSS 基础，你可以随时返回。如果你想重新设计你的页面，你可以用一个新的来交换你的自定义样式表。而不是获得一个全新的引导文件来重新开始。此外，如果您只想在几个元素上恢复默认样式，那么记住您所做的更改将是一团糟。

# c++ - 如何设置 OpenCV 和 Qt 的链接以使用 createButton？

> ID：11700344
> 
> 赞同：0
> 
> 时间：2012-07-28T10:48:57.453
> 
> 标签：c++, opencv, qt4

我正在查看 opencv highgui 示例（如 connectedcomponents.cpp）并尝试习惯添加 GUI 元素。目前我正在尝试添加一个按钮：

```
void on_button(int, void*){
    cout << "click" << end;
}
//in main()
createButton("test",on_button); 
```

但我收到一个链接错误：

```
g++ -c -pipe -g -gdwarf-2 -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5 -Wall -W -DQT_CORE_LIB -I../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/macx-g++ -I. -I../../../QtSDK/Desktop/Qt/474/gcc/lib/QtCore.framework/Versions/4/Headers -I../../../QtSDK/Desktop/Qt/474/gcc/include/QtCore -I../../../QtSDK/Desktop/Qt/474/gcc/include -I/opt/local/include -I../../../QtSDK/Desktop/Qt/474/gcc/include -I. -F/Users/george/QtSDK/Desktop/Qt/474/gcc/lib -o main.o main.cpp
g++ -headerpad_max_install_names -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5 -o CVConnectedComponent main.o   -F/Users/george/QtSDK/Desktop/Qt/474/gcc/lib -L/Users/george/QtSDK/Desktop/Qt/474/gcc/lib /opt/local/lib/libopencv_core.dylib /opt/local/lib/libopencv_contrib.dylib /opt/local/lib/libopencv_highgui.dylib /opt/local/lib/libopencv_objdetect.dylib /opt/local/lib/libopencv_imgproc.dylib /opt/local/lib/libopencv_features2d.dylib /opt/local/lib/libopencv_video.dylib -framework QtCore -F/Users/george/Documents/Qt/CVConnectedComponent/../../../QtSDK/Desktop/Qt/474/gcc/lib/ 
Undefined symbols:
  "cv::createButton(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, void (*)(int, void*), void*, int, bool)", referenced from:
      _main in main.o
make: Leaving directory `/Users/george/Documents/Qt/CVConnectedComponent'
ld: symbol(s) not found 
```

据我所知，我没有正确链接 QtCore 库。我有这个：

```
mac: LIBS += -framework QtCore 
```

和这个：

```
mac: LIBS += -F$$PWD/../../../QtSDK/Desktop/Qt/474/gcc/lib/ -framework QtCore

INCLUDEPATH += $$PWD/../../../QtSDK/Desktop/Qt/474/gcc/include
DEPENDPATH += $$PWD/../../../QtSDK/Desktop/Qt/474/gcc/include 
```

在 Qt 项目的 .pro 文件中，但没有运气。我在 osx 10.6.8 上使用 OpenCV 2.4.1 和 Qt 4.7.4。

在 Qt Creator 中链接到 QtCore 以在 OpenCV 中使用 createButton 的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:42:28.800

我重新安装了 OpenCV，这次支持 Qt 并且代码有效。仍然值得记住的是，默认情况下按钮会进入控制面板，正如我通过[阅读一些文档](http://opencv.willowgarage.com/documentation/cpp/highgui_qt_new_functions.html)发现的那样：

![OpenCV Qt 图形用户界面](../Images/5b9cc0ec6204e8764f71d570c46172b1.png)

# php - 从 mysql 表访问加密数据

> ID：11700345
> 
> 赞同：0
> 
> 时间：2012-07-28T10:49:14.337
> 
> 标签：php, mysql

我正在尝试从 base_64 编码的 mysql 表中访问数据，但我收到警告： `Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in......`

当我尝试使用 md5 访问 md5 散列数据时，它工作正常。我想不通。这是代码：

```
("SELECT * FROM users WHERE email= base64_decode('$email')"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:51:51.713

可能是引号搞砸了。尝试这个：

```
("SELECT * FROM users WHERE email = '".base64_decode($email)."'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:52:22.057

这可能是因为您没有在`base64_decode`这里调用 php 函数，只是将字符串传递给 mysqld。顺便说一句`md5`，mysql中有一个函数，所以这对你有用。

# java - GridBagLayout 被标记为错误

> ID：11700348
> 
> 赞同：2
> 
> 时间：2012-07-28T10:49:31.217
> 
> 标签：java, swing, layout, awt, layout-manager

```
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
>>>import java.awt.GridBagLayout;
import java.awt.GridBagConstraints;
import javax.swing.JButton;
import javax.swing.BorderFactory;
public class GridBagLayout {
    public static void createWindow(){
        JFrame aWin = new JFrame("Title");
        aWin.setBounds(0,0,200,200);
        aWin.setVisible(true);

        GridBagLayout gridBag = new GridBagLayout();
        GridBagConstraints constraints = new GridBagConstraints();
        >>>aWin.getContentPane().setLayout(gridBag);

        constraints.weightx = constraints.weighty = 10.0;
        constraints.fill = GridBagConstraints.BOTH;
        addButton(" Press ",constraints,gridBag,aWin);
        constraints.gridwidth=GridBagConstraints.REMAINDER;
    }
    static void addButton(String label,GridBagConstraints constraints,GridBagLayout layout,JFrame window){
        JButton button = new JButton(label);
        button.setBorder(BorderFactory.createEtchedBorder());
        >>>layout.setConstraints(button,constraints);
        window.getContentPane().add(button);
    }
    public static void main(String[] args){
        SwingUtilities.invokeLater(new Runnable(){
            public void run(){
                createWindow();
            }
        });
    }
} 
```

标有 >>> 的行被 Eclipse IDE 标记为错误。
错误`import java.awt.GridBagLayout;`表示可能与同一文件中的类型发生冲突
错误`aWin.getContentPane().setLayout(gridBag);`表示无法应用 GridBagLayout 尽管当我尝试 FlowLayout 时，它很好。
错误`layout.setConstraints(button,constraints);`表明该方法未定义。
这个错误的原因是什么？请帮我解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:56:33.973

这些是由您命名类的事实引起的`GridBagLayout`。您需要更改类的名称或对类的所有用途使用显式完整路径，`java.awt.GridBagLayout`而不是对其使用导入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T10:57:51.200

编译错误几乎描述了问题。只需将您的类重命名为 GridBagLayoutTest。

# c++ - 如何将递归解决方案转换为自下而上或自上而下的解决方案？

> ID：11700350
> 
> 赞同：5
> 
> 时间：2012-07-28T10:49:41.810
> 
> 标签：c++, algorithm, dynamic-programming

我正在解决这个问题-

> 给定一个由 a、b 和 c 组成的字符串，我们可以取任意两个相邻的不同字符并将其替换为第三个字符。例如，如果“a”和“c”相邻，则可以将它们替换为“b”。通过重复应用此操作可以产生的最小字符串是多少？

现在我已经编写了以下递归解决方案（远非高效），但想将其转换为自上而下或自下而上的解决方案。

**问题**：我无法想出一个用于记忆的表格结构。即使我必须只输出结果字符串的长度，我如何才能在不实际解决问题的情况下解决它。字符串越来越少，那么我该如何存储它们呢？

任何关于 DP 解决方案或记忆的提示都会很棒！

**编辑**很多人提出了自上而下的记忆解决方案，请尝试自下而上。

```
#include <iostream>
#include <string>

using namespace std;

string reduce(string s)
{
    if (s.length() <= 1)
        return s;

    int k;
    char c = s[0];
    string min = s;
    for (k = 1; k < s.length() && c; ++k)
        if (s[k] != c)
            c = 0;
    if (c)
        return s;

    if (s.length() == 2){
        if (s[0] != 'a' && s[1] != 'a')
            s[0] = 'a';
        else if (s[0] != 'b' && s[1] != 'b')
            s[0] = 'b';
        else if (s[0] != 'c' && s[1] != 'c')
            s[0] = 'c';
        s.resize(1);
        return s;
    }

    for (k = 1; k < s.length(); ++k){
        string s1 = reduce(s.substr(0, k));
        string s2 = reduce(s.substr(k));

        if (s1.length() + s2.length() < min.length())
            min = s1 + s2;
        if (!s1.empty() && !s2.empty() && s1.back() != s2.front()){
            if (s1.back() != 'a' && s2.front() != 'a')
                s1.back() = 'a';
            else if (s1.back() != 'b' && s2.front() != 'b')
                s1.back() = 'b';
            else if (s1.back() != 'c' && s2.front() != 'c')
                s1.back() = 'c';
            s1 = reduce(s1 + s2.substr(1));
            if (s1.length() < min.length())
                min = s1;
        }

    }
    return min;
}

int main()
{
    string input;
    cin >> input;
    cout << reduce(input) << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:00:36.073

我有点懒得去思考这个问题，但我会给你一种通常足够有效的记忆方法。

不是直接递归，而是引入相互递归。

```
std::string reduce(std::string const &s)
{
    // ...
    string s1 = reduce_memo(s.substr(0, k));
    string s2 = reduce_memo(s.substr(k));
    // ...
} 
```

where`reduce_memo`维护一个哈希表，即一个`unordered_map`，将子问题映射到它们的解决方案。

```
// static is incredibly ugly, but I'll use it here for simplicity
static std::unordered_map<std::string, std::string> memo;

std::string reduce_memo(std::string const &s)
{
    try {
        return memo.at(s);
    } except (std::out_of_range const &) {
        std::string r = reduce(s);
        memo[s] = r;
        return r;
    }
} 
```

使用 C++98 编程时，请`std::map`使用`unordered_map`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:02:22.333

您可以通过将结果存储`reduce(s)`在`map<string,string>`.

```
string reduce(string s, map<string,string>& memo) {
    if (memo.count(s)) {
        return memo[s];
    }
    // The rest of your code follows...
    memo[s] = min;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T11:16:10.980

这并不能解决问题，但我注意到：

```
if (s.length() == 2){
    if (s[0] != 'a' && s[1] != 'a')
        s[0] = 'a';
    else if (s[0] != 'b' && s[1] != 'b')
        s[0] = 'b';
    else if (s[0] != 'c' && s[1] != 'c')
        s[0] = 'c';
    s.resize(1);
    return s;
} 
```

根据问题陈述不起作用：

> 我们可以取任意*两个* **相邻的不同**字符并将其替换为*第三个*字符。

考虑字符串`s = "bb"`。既不`s[0]`也不`s[1]`等于`'a'`，这意味着条件`s[0] != 'a' && s[1] != 'a'`将评估`true`为字符串`"bb"`。这适用于任何具有相同值的连续字符字符串，例如`"bb"`，`"cc"`。

也许在这种情况下，您可以取两个连续字符的差异，并检查它们是否非零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T10:54:21.400

无论我从问题中了解到什么，解决方案都应该是

输入的长度 - 如果所有输入字符都相同

```
aaaaa - 5
bbb - 3 
```

在其他情况下为 1。

如果我错过了问题的某些部分，请纠正我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T10:58:30.593

绝对最小值是`1`。但是，字符串和替换规则的细节可能会在`1`和之间产生`n`，其中`n`是字符串的长度。

对于具体的例子，最小的可能是`n/2`，因为你取 2 个字符并用 1 替换它们（不能进一步替换），所以即使你有`"acacacacacacacac"`，最好的情况，你仍然只能实现 2 减少的因素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T11:15:42.833

我在竞争性编程研讨会上解决了一个类似的问题，确实你提出的解决方案不够快。

我的解决方案是创建这样的向量：

```
string s;
cin >> s;
int length = s.length();
vector<vector<int> > v(length, vector<int>(length)); // 2d array of size length*length. 
```

where`v[i][j]`将是子字符串 from `i`to `j`of`s`可以达到的最小长度。

稍后您所要做的就是将这张表填得越来越大。希望有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-28T11:58:57.610

```
"a...a" (“a" * n) == > n
"b...b" (“b" * n) == > n
"c...c" (“c" * n) == > n
 any other ==> 1 or 2 with my greedy algorithm. 
```

如果我们在这个贪心算法中得到 2，我不能证明它是输入字符串的最小结果。

贪心算法

```
while the last two is the same character { // the number of the same characters
    find the last replaceable pair         // at the tail will decrease until
        reduce them                        // it become 1
}

while find the first replaceable pair
    reduce them 
```

# c# - 试图让我的窗户更轻

> ID：11700358
> 
> 赞同：1
> 
> 时间：2012-07-28T10:50:34.473
> 
> 标签：c#, winforms

我有一个包含这么多控件并执行大量交互操作的表单。这导致我的表格在使用过程中有一些延迟。其中一个控件是一个绘图工具，它可以绘制从我的服务器接收到的大量数据。我想把绘图工具移到另一个表单上，试图让我的表单更轻，减少延迟问题。一位朋友告诉我，这不会有太大帮助，因为它是处理两种形式的同一个线程，是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:04:47.170

你朋友说的是真的，但在这里不太可能适用。当一个表单有很多控件时，它会*显得迟钝。*当它需要重绘自己时，您会开始注意到每个控件绘制自己所花费的时间。通常，当表单有大约 50 个控件时会发生这种情况，但这在很大程度上取决于控件的类型。例如，按钮非常昂贵，而标签则不然。您的情节可能很昂贵，因此在它*之后*绘制的任何内容（Z 顺序较高）都会被延迟。尝试右键单击控件并单击“置于最前面”，使其最后绘制。

无论你做什么，**永远不要**像你正在考虑的那样进行剧烈的改变，而不*知道*你会改进你的程序。这需要先*测量*。您需要一个分析器来了解 CPU 周期的消耗位置。分析绘画代码并不是那么容易，因为它不经常执行。这可以修复，修改您的表单构造函数，使其看起来像这样：

```
 public Form1() {
        InitializeComponent();
        Application.Idle += new EventHandler((s, ea) => this.Invalidate());
    } 
```

您的表单现在燃烧 100% 核心，一遍又一遍地重新绘制自己。但在其他方面仍然完全正常。正是您有效分析绘画代码所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:04:07.093

如果您在应用程序启动时创建表单（绘图工具容器），那么您的启动速度会下降......

***那么你有两种方式：***

> **1)**将绘图工具容器移动到新表单，但在需要时创建它（在应用程序启动后）
> 
> **2)**将绘图工具移动到新线程。在这种情况下，您可以以另一种形式移动它并通过新线程创建它。所以如果你用这种方式你的启动速度会上升

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:29:51.507

从[这里给出的答案开始](https://stackoverflow.com/questions/1566791/run-multiple-ui-threads)

我刚刚尝试了代码并稍作修改以使其更清晰：

```
static void Main()
{
    Thread t1 = new Thread(Main1);
    Thread t2 = new Thread(Main2);

    t1.Start();
    t2.Start();

    t1.Join();
    t2.Join();
}

static void Main1()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Form1());
}

static void Main2()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Form2());
} 
```

我可以说它有效，因为我尝试在其中一个中使用 Thread.Sleep() 并且第二种形式 gui 没有锁定。

# c# - 区域特定控制器/动作

> ID：11700363
> 
> 赞同：1
> 
> 时间：2012-07-28T10:50:57.253
> 
> 标签：c#, asp.net-mvc

所以我有一个区域设置（管理员）。在管理区域中，我有一个`_ViewStart.cshtml`链接到文件的`Shared/_Layout.cshtml`文件。

我需要的是布局文件获取一些传递给它的数据（如模型）。页面右上角会有一个下拉菜单，该下拉菜单在管理区域的所有页面中都很常见。它不会在任何其他区域或应用程序的根目录中使用，仅在此区域中使用。

有没有办法将一个通用控制器分配给一个布局，或者`Partial`这是前进的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T13:38:19.310

您可以使用[子操作](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)。您可以定义一个模型：

```
public class MyViewModel
{
    public string SelectedId { get; set; }
    public IEnumerable<SelectListItem> Items { get; set; }
} 
```

然后有一个控制器：

```
public class ItemsController: Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel
        {
            Items = new[]
            {
                new SelectListItem { Value = "1", Text = "item 1" },
                new SelectListItem { Value = "2", Text = "item 2" },
                new SelectListItem { Value = "3", Text = "item 3" },
            }
        };
        return PartialView(model);
    }
} 
```

然后是相应的部分 ( `~/Areas/Admins/Views/Items/Index.cshtml`)：

```
@model MyViewModel
@Html.DropDownListFor(x => x.SelectedId, Model.Items) 
```

现在，在你的布局内，你可以渲染这个动作：

```
@Html.Action("Index", "Items", new { area = "admin" }) 
```

# iphone - 同步写入控制台

> ID：11700367
> 
> 赞同：2
> 
> 时间：2012-07-28T10:51:39.823
> 
> 标签：iphone, objective-c, ios, multithreading

我需要调试我的应用程序中的时间关键型崩溃，并且由于 NSLog 不会立即写入控制台，我想知道是否有办法从我的代码同步写入控制台。

因此，例如，`printf`这里是一个更好的选择，或者我必须处理同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:58:52.430

您可以在崩溃行之前添加断点，但我认为默认情况下 Xcode 已经挂起进程，以便您仍然可以访问调试器控制台......如果没有，您可能需要添加一些额外的诊断去 Product -> Edit Scheme ..（在上方菜单中），例如 Guard Edges、Zombie Objects 等。

此外，您可以`NSLog`从主线程调用：

```
[self performSelectorOnMainThread:@selector(log:) withObject:@"String .." waitUntilDone:YES];

- (void)log:(NSString *)message {
    NSLog(message);
} 
```

# python - 如何在带有模型的qtableview中添加带有复选框的列是qsqlmodel？

> ID：11700372
> 
> 赞同：0
> 
> 时间：2012-07-28T10:52:22.320
> 
> 标签：python, qt, checkbox, pyside, qtableview

我想在 qtableview 中添加一个带有复选框的列，模型是 qsqlmodel。模型已经有查询，qtableview 应该在第一列中显示复选框。我尝试了谷歌中的所有解决方案，但失败了。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:47:47.947

您好，您需要执行以下操作。

**设置标志**

`Qt::ItemFlags`为您希望复选框出现的列设置标志。有关设置复选框的示例，请参阅此答案，[我如何仅从 QTableView 和 QStandardItemModel 获取复选框项目？](https://stackoverflow.com/questions/1850124/how-do-i-get-a-checkbox-item-from-a-qtableview-and-qstandarditemmodel-alone)

即你的模型类应该覆盖：

`Qt::ItemFlags flags ( const QModelIndex & index ) const;`

以确保您返回`Qt::ItemIsUserCheckable`您的第一列。

**返回检查状态**

接下来，您将要修改模型类以覆盖：

`QVariant data( const QModelIndex& index, int role = Qt::DisplayRole ) const;`

以确保它返回一些东西，`Qt::CheckStateRole`例如`Qt::Unchecked, Qt::Checked, or Qt::PatriallyChecked`

希望有帮助！

# ruby - 如何在 Ruby pg gem 中使用 PG::Connection 类的 send_query？

> ID：11700377
> 
> 赞同：0
> 
> 时间：2012-07-28T10:53:25.690
> 
> 标签：ruby, multithreading, postgresql, query-optimization, pg

如何在 Ruby pg gem 中使用类 `send_query`的公共实例方法？`PG::Connection`

它可以帮助加快这样的程序的执行时间吗？

```
a = [1,2,3,4,5,6,...,100000]  # elements in no specific order
conn = PG.connect(OMITTED)
conn.transaction do |conn|
  a.each do |i]
    conn.exec("INSERT INTO numbers VALUES ($1)",[i])
  end
end 
```

**假设**：如果我不等待结果，那么我可以继续向 PostgreSQL 服务器发送查询并尽快完成。

**实验**：重写版本：

```
a = [1,2,3,4]
conn = PG.connect(OMITTED)
conn.setnonblocking(true)
conn.transaction do |conn|
  a.each do |i]
    conn.send_query("INSERT INTO numbers VALUES ($1)",[i])
  end
end 
```

**结果**：运行时间没有差异。

一些额外的问题：

*   我的假设正确吗？
*   这一定是线程的工作吗？
*   我应该以某种方式处理 exec 的输出吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T12:34:02.177

您是否尝试过将所有 SQL 插入合并为一个？在我的实验中它更快：

```
require "rubygems"
require "pg"

a = (0...10000).sort_by(&:rand)  # elements in no specific order
conn = PG.connect(:dbname => "numbers")
t = Time.now
conn.transaction do |conn|
  a.each do |i|
    conn.exec("INSERT INTO numbers VALUES ($1)",[i])
  end
end
p Time.now - t

t = Time.now
conn.transaction do |conn|
  conn.exec(
    a.map { |i|
      "INSERT INTO numbers VALUES (%d);" % i
    }.join("")
  )
end
p Time.now - t

#=> 2.658903, 0.572997 
```

# asp.net - 在 asp.net 的下拉列表中添加新城市 onselect 的“其他”选项

> ID：11700378
> 
> 赞同：0
> 
> 时间：2012-07-28T10:53:27.140
> 
> 标签：asp.net, drop-down-menu, geolocation

我正在使用 SQL Server 实现地理位置表。
我在数据库中添加了主要国家、州和城市，但我想通过在下拉菜单中选择“**其他”选项来允许添加值。**如果我在国家/地区选择“**其他**”，则应在州和城市下拉列表中选择相同的选项。它还应该为每个下拉菜单显示额外的文本框。
我正在使用 asp.net 3.5，数据库是使用 linq 的 sql server 2008。请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:35:55.003

```
 $('#states').change(function() {
    alert('Handler for .change() called.');
    var value = $(this).val();
       if(value == '')
       {
         // change other city drop down 
         var newOption = $('<option value="">Other</option>');
         $('#city').append(newOption);
       }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:39:02.190

用数据库中的值填充下拉列表后，您应该再添加一个：'Other...' 和 'other' 的值，它应该放在列表的末尾。
此外，您应该为每个下拉菜单放置一个隐藏的文本框：

```
<asp:TextBox ID="txtState" runat="server" Style="display:none;"></asp:TextBox> 
```

在客户端，您可以使用 jQuery 或 javascript 来捕捉用户何时选择此值。应该有三个功能：“其他国家”显示所有三个文本框，“其他州”显示两个，“其他城市”仅显示一个：

```
$('#countries').change(function() {
    var country= $("#states option:selected").text();
    if(country == 'other') {
        var country = $("#countries option:selected").val();
    if (country === 'other') {
        $("#states").val('other');
        $("#cities").val('other');

        $("#txtCountry").show();
        $("#txtState").show();
        $("#txtCity").show();
   }
   else {
       //if user select 'other' and later select something else, you should hide textbox
       $("#txtCountry").hide();
   }

}); 
```

以同样的方式，为州和城市创建函数。

在此之后，您可以在后面的代码中检查所选值是否为“其他”，然后使用文本框中的值。我希望你能明白。

# android - 如何让 Textview 显示一个数字？

> ID：11700379
> 
> 赞同：-1
> 
> 时间：2012-07-28T10:53:51.433
> 
> 标签：android

我是 Android 开发的新手。我试图让 Textview 显示文本或数字，但它崩溃了。请帮忙。

这是 activity_main.xml 中的按钮：

```
<Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_alignParentBottom="true"
        android:text="@string/Change" 
        android:onClick="change"/> 
```

这是主要活动：

```
public void change(){
        TextView tv = new TextView(this);
        tv.setText("" + 4);
    } 
```

应用程序在我启动时崩溃。我想创建一个带有两个文本框和一个按钮的基本计算器，当按下该按钮时，它会在两个文本框中添加值并显示它。谁能告诉我代码哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T11:02:06.357

```
 public void change()
    {
       TextView tv = new TextView(this);
       tv.setText("4");
    } 
```

如果它是任何类型的整数变量，那么

```
 public void change()
    {
       TextView tv = new TextView(this);
       tv.setText("" + integer_variable);
    } 
```

并且，检查 textView 是否与代码一起使用

TextView tv = (TextView) findViewById(R.Id.textView1);

应该工作得很好，我希望.. :)

如果它再次崩溃，那么问题中的信息可能不完整。

快乐编码..！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T11:00:11.210

```
public void change(){
        TextView tv =(TextView)findViewById(R.id.textView1);
        tv.setText(Integer.toString(4));
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-06T09:28:16.610

**layout_contact.xml：**

```
 <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="10dp"
    android:text="@string/number1" /> 
```

**字符串.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <string name="number1">0091010</string>
</resources> 
```

**联系片段.java：**

```
String num = "0091010";
textView8.setText(someContactNum); 
```

**输出：**

0091010

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T11:43:52.467

您必须在 xml 中正确提供文本视图的 id，例如

```
 <TextView 
   ....
   android:id="@+id/tvID"/> 
```

检查您是否正确提供了它。否则，请在此处从您的 xml 文件中共享您的 textview 代码。

并且还要检查一下，您在代码中导入 Textview 或不这样：

```
import android.widget.TextView; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-24T18:00:10.780

*这是如何在单个文本视图中显示动态数字的答案*

```
 StringBuilder stringBuilder = new StringBuilder();
                for (int j = fromNumber; j <= toNumber; j++) {
                    for (int i = 2; i <= j / 2; i++) {
                        if (j % i == 0) {
                            isPrimeNumber = false;
                            break;
                        } else {
                            isPrimeNumber = true;
                        }
                    }
                    if (isPrimeNumber) {

                        stringBuilder.append(j);
                        stringBuilder.append(",");
                    } else {
                    }
                }
                tvResult.setText(stringBuilder.toString()); 
```

# php - 第二个元素的 Zend_Dom_Query 选择器

> ID：11700380
> 
> 赞同：0
> 
> 时间：2012-07-28T10:53:57.983
> 
> 标签：php, zend-dom-query

```
<div id="test">
<span>Don't select me</span>
<span>Select me</span>
</div> 
```

我想选择第二个跨度`div#test`。
存在`eq()`选择器（如 jQuery）或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:23:00.997

不幸的是`Zend_Dom_Query`，不支持`:nth-child(n)`来自 css 的选择器，但恢复`xpath`到查询您可以编写：

```
 $result = $dom->queryXpath('//div[@id="test"]/span[2]'); 
```

该`Zend_Dom_Query`库在幕后使用 xpath 来执行 CSS 样式查询，因此，如果您对 xpath 语法感到震惊，您可以先看看它使用`getXpathQuery`结果对象上的方法生成了什么。

# php - Trying to test filesystem operations with VFSStream

> ID：11700397
> 
> 赞同：8
> 
> 时间：2012-07-28T10:57:29.903
> 
> 标签：php, unit-testing, phpunit, vfs-stream

I'm trying to mock a filesystem operation (well actually a read from php://input) with vfsStream but the lack of decent documentation and examples is really hampering me.

The relevant code from the class I'm testing is as follows:

```
class RequestBody implements iface\request\RequestBody
{
    const
        REQ_PATH    = 'php://input',

    protected
        $requestHandle  = false;

    /**
     * Obtain a handle to the request body
     * 
     * @return resource a file pointer resource on success, or <b>FALSE</b> on error.
     */
    protected function getHandle ()
    {
        if (empty ($this -> requestHandle))
        {
            $this -> requestHandle  = fopen (static::REQ_PATH, 'rb');
        }
        return $this -> requestHandle;
    }
} 
```

The setup I'm using in my PHPUnit test is as follows:

```
protected function configureMock ()
{
    $mock   = $this -> getMockBuilder ('\gordian\reefknot\http\request\RequestBody');

    $mock   -> setConstructorArgs (array ($this -> getMock ('\gordian\reefknot\http\iface\Request')))
            -> setMethods (array ('getHandle'));

    return $mock;
}

/**
 * Sets up the fixture, for example, opens a network connection.
 * This method is called before a test is executed.
 */
protected function setUp ()
{
    \vfsStreamWrapper::register();
    \vfsStream::setup ('testReqBody');

    $mock   = $this -> configureMock ();
    $this -> object = $mock -> getMock ();

    $this -> object -> expects ($this -> any ())
                    -> method ('getHandle')
                    -> will ($this -> returnCallback (function () {
                        return fopen ('vfs://testReqBody/data', 'rb');
                    }));
} 
```

In an actual test (which calls a method which indirectly triggers getHandle()) I try to set up the VFS and run an assertion as follows:

```
public function testBodyParsedParsedTrue ()
{
    // Set up virtual data
    $fh     = fopen ('vfs://testReqBody/data', 'w');
    fwrite ($fh, 'test write 42');
    fclose ($fh);
    // Make assertion
    $this -> object -> methodThatTriggersGetHandle ();
    $this -> assertTrue ($this -> object -> methodToBeTested ());
} 
```

This just causes the test to hang.

Obviously I'm doing something very wrong here, but given the state of the documentation I'm unable to work out what it is I'm meant to be doing. Is this something caused by vfsstream, or is phpunit mocking the thing I need to be looking at here?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T20:23:02.257

So ... how to test with streams? All vfsStream does is provide a custom stream wrapper for file system operations. You don't need the full-blown vfsStream library just to mock the behavior of a single stream argument -- it's not the correct solution. Instead, you need to write and register your own one-off stream wrapper because you aren't trying to mock file system operations.

Say you have the following simple class to test:

```
class ClassThatNeedsStream {
    private $bodyStream;
    public function __construct($bodyStream) {
        $this->bodyStream = $bodyStream;
    }
    public function doSomethingWithStream() {
        return stream_get_contents($this->bodyStream);
    }
} 
```

In real life you do:

```
$phpInput = fopen('php://input', 'r');
new ClassThatNeedsStream($phpInput); 
```

So to test it, we create our own stream wrapper that will allow us to control the behavior of the stream we pass in. I can't go into too much detail because custom stream wrappers are a large topic. *But* basically the process goes like this:

1.  Create custom stream wrapper
2.  Register that stream wrapper with PHP
3.  Open a resource stream using the registered stream wrapper scheme

So your custom stream looks something like:

```
class TestingStreamStub {

    public $context;
    public static $position = 0;
    public static $body = '';

    public function stream_open($path, $mode, $options, &$opened_path) {
        return true;
    }

    public function stream_read($bytes) {
        $chunk = substr(static::$body, static::$position, $bytes);
        static::$position += strlen($chunk);
        return $chunk;
    }

    public function stream_write($data) {
        return strlen($data);
    }

    public function stream_eof() {
        return static::$position >= strlen(static::$body);
    }

    public function stream_tell() {
        return static::$position;
    }

    public function stream_close() {
        return null;
    }
} 
```

Then in your test case you would do this:

```
public function testSomething() {
    stream_wrapper_register('streamTest', 'TestingStreamStub');
    TestingStreamStub::$body = 'my custom stream contents';
    $stubStream = fopen('streamTest://whatever', 'r+');

    $myClass = new ClassThatNeedsStream($stubStream);
    $this->assertEquals(
        'my custom stream contents',
        $myClass->doSomethingWithStream()
    );

    stream_wrapper_unregister('streamTest');
} 
```

Then, you can simply change the static properties I've defined in the stream wrapper to change what data comes back from reading the stream. Or, extend your base stream wrapper class and register it instead to provide different scenarios for tests.

This is a very basic intro, but the point is this: don't use vfsStream unless you're mocking actual filesystem operations -- that's what it's designed for. Otherwise, write a custom stream wrapper for testing.

PHP provides a prototype stream wrapper class to get you started: [http://www.php.net/manual/en/class.streamwrapper.php](http://www.php.net/manual/en/class.streamwrapper.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-28T21:36:35.697

I have struggled with finding a similar answer -- I found the documentation lacking also.

I suspect your issue was that `vfs://testReqBody/data` was not a path to an existing file, (as `php://input` will always be.)

If the accepted answer is an acceptable answer, then this is the equivalent with vfsStreamWrapper.

```
<?php
// ...
$reqBody = "Request body contents"
vfsStream::setup('testReqBody', null, ['data' => $reqBody]);
$this->assertSame($reqBody, file_get_contents('vfs://testReqBody/data')); 
```

Alternatively, if you need to split this up, such that you define the contents after calling `vfsStream::setup()`, this is how.

```
<?php
//...
$reqBody = "Request body contents"
$vfsContainer = vfsStream::setup('testReqBody');
vfsStream::newFile('data')->at($vfsContainer)->setContent($reqBody);
$this->assertSame($reqBody, file_get_contents('vfs://testReqBody/data')); 
```

One other thing to note from your original code, you do not need to call `vfsStreamWrapper::register();` when using `vfsStream::setup()`

# jsf - 运行 TomEE plus jsf 示例

> ID：11700398
> 
> 赞同：1
> 
> 时间：2012-07-28T10:57:33.580
> 
> 标签：jsf, myfaces, apache-tomee

在提取 TomEE-plus (apache-tomee-1.0.0-plus.zip) 并构建 jsf 示例（在 examples-4.0.0-src.zip\webapps\jsf 上）后，我遇到了以下`catalina.*.log`错误信息：

```
SEVERE: An error occured while initializing MyFaces: Class org.apache.openejb.jsf.CustomApplicationFactory is no javax.faces.application.ApplicationFactory
java.lang.IllegalArgumentException: Class org.apache.openejb.jsf.CustomApplicationFactory is no javax.faces.application.ApplicationFactory
    at javax.faces.FactoryFinder.newFactoryInstance(FactoryFinder.java:128)
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:107)
    at org.apache.myfaces.config.FacesConfigurator.configureApplication(FacesConfigurator.java:598)
    at org.apache.myfaces.config.FacesConfigurator.configure(FacesConfigurator.java:276)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.buildConfiguration(AbstractFacesInitializer.java:131)
    at org.apache.myfaces.webapp.Jsp21FacesInitializer.initContainerIntegration(Jsp21FacesInitializer.java:64)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces(AbstractFacesInitializer.java:83)
    at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:58)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:962)
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1603)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我是唯一一个得到这个错误的人吗？有解决方案或解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:19:45.013

我在 TomEE 的论坛上发布了同样的问题：http://openejb.979440.n4.nabble.com/Running-TomEE-plus-jsf-Examples-Fails-td4656561.html [并](http://openejb.979440.n4.nabble.com/Running-TomEE-plus-jsf-Examples-Fails-td4656561.html)得到了很好的答案。以下是在 TomEE 上运行 JSF 和 CDI 的步骤。

1.  TomEE 曾经在版本 1 上存在错误。现在已修复。这可能导致了该错误。
2.  通过查看最新版本的 TomEE 来克服这个问题：http: [//openejb.apache.org/builds.html](http://openejb.apache.org/builds.html)
3.  为了在 TomEE 上使用 cdi 运行 JSF 示例：
    *   结帐最新示例版本（来自[https://svn.apache.org/repos/asf/tomee/tomee/trunk/examples/](https://svn.apache.org/repos/asf/tomee/tomee/trunk/examples/)的 SVN 结帐）
    *   [在https://svn.apache.org/repos/asf/openejb/trunk/openejb/examples/moviefun/](https://svn.apache.org/repos/asf/openejb/trunk/openejb/examples/moviefun/)上构建项目（Maven）
    *   在最新的 TomEE 版本上运行 moviefun 示例（运行后导航到 JSF 链接）。

顺便说一句：TomEE 的稳定版本将于今年 9 月发布。这可能会涵盖问题。

# php - 使用paypal沙箱ipn模拟器时调试ipn.php

> ID：11700399
> 
> 赞同：2
> 
> 时间：2012-07-28T10:57:48.520
> 
> 标签：php, paypal, paypal-ipn, paypal-sandbox

使用paypal沙箱ipn模拟器工具时如何调试ipn.php文件？

代码如下所示：

```
// read the post from PayPal system and add 'cmd'  
$req = 'cmd=_notify-validate';

foreach($_POST as $key = > $value) {
    $value = urlencode(stripslashes($value));
    $req. = "&$key=$value";
}

// post back to PayPal system to validate  
$header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header. = "Content-Type: application/x-www-form-urlencoded\r\n";
$header. = "Content-Length: ".strlen($req)."\r\n\r\n";

$fp = fsockopen('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

if (!$fp) {
    // HTTP ERROR  
} else {
    fputs($fp, $header.$req);

    while (!feof($fp)) {
        $res = fgets($fp, 1024);

        if (strcmp($res, "VERIFIED") == 0) {

            $DBH = new PDO("mysql:host=localhost;dbname=db", "user", "pass");
            $DBH - > setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

            $STH = $DBH - > prepare("update table2 set status = :status where tracking_id = :tracking_id");

            $status = 1;
            parse_str($req, $data);

            $STH - > bindParam(':status', $status, PDO::PARAM_INT, 1);
            $STH - > bindParam(':tracking_id', 'id_goes_here', PDO::PARAM_STR, 50);

            $STH - > execute();

            $DBH = null;

        } else if (strcmp($res, "INVALID") == 0) {
            // do something else
        }
    }

    fclose($fp);
} 
```

我通常使用 netbeans 调试工具进行调试，但是如何使用沙盒模拟器进行调试？`send ipn`当我从沙盒 ipn 模拟器单击时，我在沙盒中收到一条消息说`IPN successfully sent.`，但是当我进入我的数据库检查时`status`，它仍然是`0`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:28:18.590

也许问题出在参数绑定中

```
$STH - > bindParam(':tracking_id', 'id_goes_here', PDO::PARAM_STR, 50); 
```

如果表 'table2' 不包含 tracking_id = 'id_goes_here' 的行，则更新操作将失败。

试试这个

```
<?php

$testMode = false;
$url = 'https://www.paypal.com/cgi-bin/webscr';
if ($testMode === true)
    $url = 'https://www.sandbox.paypal.com/cgi-bin/webscr';

$ipnResponse = ''; // holds the IPN response from paypal
$ipnData = array(); // array will contain the POST values for IPN

$urlParsed = parse_url($url);

$req = 'cmd=_notify-validate'; // Add 'cmd' to req (ipn command)

// Read the post from PayPal system and add them to req
foreach ($_POST as $key => $value) {
    $ipnData["$key"] = $value;
    $value = urlencode(stripslashes($value));
    $req .= "&" . $key . "=" . $value;
}

// Open the connection to paypal
$fp = fsockopen($urlParsed['host'], "80", $errno, $errstr, 30);

// If could open the connection and check response
if ($fp) {

    fputs($fp, "POST " . $urlParsed['path'] . " HTTP/1.1\r\n");
    fputs($fp, "Host: " . $urlParsed['host'] . "\r\n");
    fputs($fp, "Content-type: application/x-www-form-urlencoded\r\n");
    fputs($fp, "Content-length: " . strlen($req) . "\r\n");
    fputs($fp, "Connection: close\r\n\r\n");
    fputs($fp, $req . "\r\n\r\n");

    // Loop through the response from the server and append to variable
    while (!feof($fp)) {
        $ipnResponse .= fgets($fp, 1024);
    }
    fclose($fp);

    // Valid IPN transaction.
    if (preg_match('/^VERIFIED/', $ipnResponse)) {
        // Some action on IPN validation - update payment status etc
        die("OK. IPN Validation: Success");     
    }
    // Invalid IPN transaction
    else {
        // Some action on IPN validation - update payment status etc
        die("ERROR. IPN Validation: Failed");
    }
}
// Else no connection, so maybe wrong url or other reasons, you can do another call later
else {
    die("ERROR. IPN Connection: fsockopen error");
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T07:25:18.580

通常，当我想调试在浏览器中不提供直接输出的脚本时，我会在整个脚本中调用一个简单的日志记录函数来输出变量值或帮助确定发生错误的位置。

当我不知道脚本在哪里死亡时，我会在每行重要的代码之后在日志文件中写一行。运行脚本然后检查日志文件后，我可以确切地看到是哪一行导致脚本死机，下面是一个非常简化的示例。当然，在一切顺利运行之后，所有的日志记录都应该被删除。

```
public function logToFile($msg){
    $file = 'log.txt';
    $current = file_get_contents($file);
    $current .= $msg . "\n";
    file_put_contents($file, $current);
}

public function doOtherStuff(){

    foreach ($_POST as $key => $value) {
      $ipnData["$key"] = $value;
      $value = urlencode(stripslashes($value));
      $req .= "&" . $key . "=" . $value;
    }

    logToFile("1");

    $fp = fsockopen($urlParsed['host'], "80", $errno, $errstr, 30);

    logToFile("2");

    if ($fp) {
      logToFile("3");
      fputs($fp, "POST " . $urlParsed['path'] . " HTTP/1.1\r\n");
      logToFile("4");
      fputs($fp, "Host: " . $urlParsed['host'] . "\r\n");
      logToFile("5");
      fputs($fp, "Content-type: application/x-www-form-urlencoded\r\n");
      logToFile("6");
      fputs($fp, "Content-length: " . strlen($req) . "\r\n");
      logToFile("7");
      fputs($fp, "Connection: close\r\n\r\n");
      logToFile("8");
      fputs($fp, $req . "\r\n\r\n");
      logToFile("9");

      while (!feof($fp)) {
        logToFile("10");
        $ipnResponse .= fgets($fp, 1024);
      }
      logToFile("11");
      fclose($fp);
    }
} 
```

# java - GWT：将带有处理程序的图像添加到表头

> ID：11700403
> 
> 赞同：2
> 
> 时间：2012-07-28T10:58:11.193
> 
> 标签：java, gwt

我在 GWT 中遇到了一些关于 CellTable 的问题。

我想要做什么：我有 CellTable，我想添加带有图像的标题并向其添加操作。但它在我的代码中不起作用。

我的代码（全部）：

```
import java.util.Arrays;
import java.util.List;

import com.google.gwt.cell.client.Cell;
import com.google.gwt.cell.client.ClickableTextCell;
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.safehtml.shared.SafeHtmlBuilder;
import com.google.gwt.safehtml.shared.SafeHtmlUtils;
import com.google.gwt.user.cellview.client.CellTable;
import com.google.gwt.user.cellview.client.Header;
import com.google.gwt.user.cellview.client.TextColumn;
import com.google.gwt.user.client.ui.Image;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.VerticalPanel;`

public class HelloGWT implements EntryPoint {

    public void onModuleLoad() {

        RootPanel.get().add(new MyTable());

    }
}

class Contact {
    public Contact(String name, int number) {
        this.number = number;
        this.name = name;
    }

    public String name;
    public int number;
}

class MyTable extends VerticalPanel {

    public List<Contact> list = Arrays.asList(new Contact("contact_1", 1),
            new Contact("contact_2", 2), new Contact("contact_3", 3)

    );

    public MyTable() {
        CellTable<Contact> table = new CellTable<Contact>();
        table.addColumn(new MyColumn(), new MyHeader(new ClickableTextCell(), "MyHeader!"));
        table.setRowData(0, list);

        this.add(table);
    }
}

class MyColumn extends TextColumn<Contact> {

    public MyColumn() {

    }

    @Override
    public String getValue(Contact object) {
        // TODO Auto-generated method stub
        return object.name;
    }
}

class MyHeader extends Header<String> {

    private String columnName;
    private Image image = new Image("http://www.google.com/mobile/images/mgc3/google-mobile-app48.png");

    public MyHeader(Cell<String> cell, String columnName) {
        super(cell);
        // TODO Auto-generated constructor stub
        this.columnName = columnName;

        image.addClickHandler(new ClickHandler()
        {

            @Override
            public void onClick(ClickEvent event) {
                System.out.println("Click!");

            }

        }
                );
    }

    @Override
    public String getValue() {
        // TODO Auto-generated method stub
        return columnName;
    }

    @Override
    public void render(Cell.Context context, SafeHtmlBuilder sb) {
        StringBuilder s = new StringBuilder();
        s.append(columnName);
        image.setSize("20px", "20px");
        s.append(image);
        sb.append(SafeHtmlUtils.fromSafeConstant(s.toString()));
    }

} 
```

感谢您的任何想法...

# javascript - 如何在另一个对象内分配对象

> ID：11700407
> 
> 赞同：-1
> 
> 时间：2012-07-28T10:58:40.963
> 
> 标签：javascript

下面是做一些事情的函数。

```
ns.Line2Point = function (params) {
        points = params.points;
        // code here
}; 
```

在上面的代码中，`params object`包含一个`points object`. 所以，当我想调用`Line2Point`方法时，我必须创建一个对象，它包含点对象。但是，我不知道如何使用 Javascript。我只是有一些想法，例如下面的代码，但不知道它是真是假：

```
 var params;
    var points;
    // some code to initialize for points object
    params.points = points
    ns.Line2Point(params) 
```

请教我这个。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:05:28.883

正如你所说，你只需要初始化参数。

```
var params = {};   // initialize to an object literal
params.points = {}; // points is now an object literal, too 
```

如果你已经有`points`，初始化`params`，然后做

```
params.points = points; // assign points to the points property of params 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:04:11.977

我不太明白你的问题，但我认为这就是你要找的：

```
points = [
    {
        x: 10,
        y: 25
    },
    {
        x: 20,
        y: 35
    }
] 
```

Points 现在是一个数组，由 2 个对象组成，每个对象由 2 个变量组成：`x`和`y`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T11:05:16.507

首先将参数声明为对象。

变量参数 = {};

# plsql - 如果该行存在但我的“where”条件中没有金额，我需要输入金额“0”

> ID：11700412
> 
> 赞同：0
> 
> 时间：2012-07-28T10:59:42.367
> 
> 标签：plsql

如果该行存在但我的“where”条件中没有金额，我需要输入金额“0”。

原来的命令是：

```
select t.aaa, count (t.bbb), sum (t.ccc)
from nrb t
where t.vvv IN  ('3','4','5','6','D','E','F')
  and t.ddd like '50%'
  and t.eee >= TO_DATE('2012/03/21','YYYY/MM/DD')
  and t.eee <= TO_DATE('2012/07/21','YYYY/MM/DD')
group by t.aaa
order by t.aaa 
```

结果是：excel文件中的“结果”选项卡。

我需要这个结果：excel文件中的“结果2”选项卡。

文件：我确实发送了完整的结果。 [http://www.mediafire.com/?69cc4ay6cyt9cr9](http://www.mediafire.com/?69cc4ay6cyt9cr9)

我怎么能有这个？

pl/sql 7.0.2 无限用户许可

oci：9.2

oracle 数据库：11.1.0.6.0 企业版

操作系统：赢XP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:55:22.650

你可能想要：

```
select t1.aaa, coalesce(t2.bbb_count, 0) bbb_count,
    coalesce(t2.ccc_sum, 0) ccc_sum
from (
  select distinct aaa
  from nrb
) t1
left join (
  select t.aaa, count (t.bbb) bbb_count, sum (t.ccc) ccc_sum
  from nrb t
  where t.vvv IN  ('3','4','5','6','D','E','F')
    and t.ddd like '50%'
    and t.eee >= TO_DATE('2012/03/21','YYYY/MM/DD')
    and t.eee <= TO_DATE('2012/07/21','YYYY/MM/DD')
  group by t.aaa
) t2 on t1.aaa = t2.aaa
order by t1.aaa; 
```

# javascript - 具有固定节点位置的 JIT ForceDirected Graph

> ID：11700413
> 
> 赞同：3
> 
> 时间：2012-07-28T10:59:57.787
> 
> 标签：javascript, json, graph, jit, thejit

我的 Web 服务返回带有 grath 集的所有节点的 json。我正在使用 JIT 进行可视化。JIT 是否允许在 json 中设置每个节点的位置？或者是否有任何允许这样做的javascript库？

# javascript - JavaScript 中的 jQuery 不起作用

> ID：11700415
> 
> 赞同：0
> 
> 时间：2012-07-28T11:00:20.547
> 
> 标签：javascript, jquery

除了 jQuery 部分，以下代码有效。该代码使 6 个点变黑并停止间隔，但不会在 id 为“cs”的 div 中淡入淡出。

我的错误是什么？

```
<html>
<head>
<style type="text/css">
    .dot
    {
        background-color:#666;
        width:10px;
        height:10px;
        border:1px solid lightgray;
        margin-right:1px;
        float:left;
    }
    body {
            background:url('images/bg.png');
            width:100%;
    }
    #wrapper {
        margin-left: auto; 
        margin-right: auto; 
        width:1000px;
        position:relative;
    }
    #cs {
        visibility:hidden;
        float: left;
    }
    #loader {
        margin-top:20px;
        padding-left:10px;
    }
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript">

(function() {
    var delayInSeconds = 0.5;                           
    var num = 0;
    var changeDot = function() {
        document.getElementById('dot' + num).style.backgroundColor = "#000";
        num++;
        if(num == 6)
        {
            $('#cs').fadeIn('slow');
            window.clearInterval(int);
        }
    };
   var int = window.setInterval(changeDot, delayInSeconds * 1000);
})();
</script>
</head>
<body>
<div id="wrapper">
    <div id="name">
        <img src="images/as.png"/>
    </div>
    <div id="loader">
        <div id="dot0" class="dot"></div>
        <div id="dot1" class="dot"></div>
        <div id="dot2" class="dot"></div>
        <div id="dot3" class="dot"></div>
        <div id="dot4" class="dot"></div>
        <div id="dot5" class="dot"></div>
        <div id="dot6" class="dot"></div>
        <div id="dot7" class="dot"></div>
        <div id="dot8" class="dot"></div>
        <div id="dot9" class="dot"></div>
        <div id="dot10" class="dot"></div>
        <div id="dot11" class="dot"></div>
        <div id="dot12" class="dot"></div>
        <div id="dot13" class="dot"></div>
        <div id="dot14" class="dot"></div>
        <div id="dot15" class="dot"></div>
        <div id="dot16" class="dot"></div>
        <div id="dot17" class="dot"></div>
        <div id="dot18" class="dot"></div>
        <div id="dot19" class="dot"></div>
        <div id="dot20" class="dot"></div>
    </div>
    <div id="cs">
        <img src="images/cs.png"/>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T11:07:09.750

使用`display`代替`visibility`：

```
#cs {
    display:none;
    float: left;
} 
```

这也可能有用：[为什么 jQuery 显示/隐藏使用显示：无而不是可见性：隐藏？](https://stackoverflow.com/questions/1160196/why-does-jquery-show-hide-use-displaynone-instead-of-visibilityhidden)

# c# - 绑定一次Dataset中的重复行

> ID：11700426
> 
> 赞同：0
> 
> 时间：2012-07-28T11:02:24.520
> 
> 标签：c#, asp.net

我正在合并两个数据集，我希望重复的行只绑定一次，我该如何实现？

```
 protected void RadGrid1_NeedDataSource(object source, GridNeedDataSourceEventArgs e)
{
    showRelatedcat();
    DataSet ds = new DataSet();
    DataSet ds_frd = new DataSet();
    String frdQuery = my query
    String newquery = my other query 
    String queryString = another one 
    try
    {
        // Connect to the database and run the query.
        SqlConnection connection = new SqlConnection(connectionString);
        SqlDataAdapter adapter = new SqlDataAdapter(newquery, connection);
        SqlDataAdapter adapter1 = new SqlDataAdapter(frdQuery, connection);
        // Fill the DataSet.
        adapter1.Fill(ds_frd);
        adapter.Fill(ds);
        ds.Merge(ds_frd, true);
        connection.Close();
    }
    catch (Exception ex)
    {

        // The connection failed. Display an error message.
        //Message.Text = "Unable to connect to the database.";

    }

    RadGrid1.DataSource = ds.Tables[0].;

} 
```

两个查询都有一些共同的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:00:09.147

您可以使用 Dataset.Merge 合并数据集，使用 IEnumerable 函数 [http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/ebe7e4c2-2cad-4a9d-9134-2732d1e05664](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/ebe7e4c2-2cad-4a9d-9134-2732d1e05664) 它只允许您获得一个值在重复的情况下

# android - 线性布局的颜色受底层线性布局颜色的影响

> ID：11700428
> 
> 赞同：-1
> 
> 时间：2012-07-28T11:02:30.933
> 
> 标签：android, android-layout, colors

我在线性布局中包含了一些线性布局。但我希望顶部的线性布局（包含的）是灰色的，只有背景橙色。当我尝试这个时，一切都是橙色的！有什么办法可以防止这种情况吗？

我的：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@color/orange">

     <include
            android:id="@+id/bt_overview_list_places"
            layout="@layout/single_overview_item" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"/>
      <include
            android:id="@+id/bt_overview_list_agenda"
            layout="@layout/single_overview_item" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"/>
       <include
            android:id="@+id/bt_overview_list_shopping"
            layout="@layout/single_overview_item" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"/>
        <include
            android:id="@+id/bt_overview_list_food"
            layout="@layout/single_overview_item" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"/>

</LinearLayout> 
```

我包括的一个：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/lloverview"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical"
  android:background="@color/custom_button_grey"
  >
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="horizontal"
  >
  <ImageView
      android:id="@+id/ivoverviewimage"
      android:layout_width="50dp"
      android:layout_height="50dp" android:src="@drawable/ic_launcher" android:scaleType="centerCrop"
      android:layout_margin="10dp"
      android:layout_weight="1"/>

  <LinearLayout
      android:layout_width="225dp"
      android:layout_height="wrap_content"
      android:orientation="vertical" >

  <TextView
      android:id="@+id/tvoverviewname"
      android:layout_width="225dp"
      android:layout_height="wrap_content"
      android:layout_gravity="left|top"
      android:layout_marginLeft="10dip"
      android:text="naam"
      android:textSize="16dip" 
      android:maxLines="1"
      android:ellipsize="marquee"
      android:textColor="@color/black"/>

 <TextView
     android:id="@+id/tvoverviewtext"
     android:layout_width="225dp"
     android:layout_height="wrap_content"
     android:layout_marginLeft="10dip"
     android:maxLines="3"
     android:text="tip"
     android:textSize="12dip" 
     android:ellipsize="end"
     android:textColor="@color/black"/>

 </LinearLayout>

 <ImageView 
     android:id="@+id/arrow"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:src="@drawable/iconarrowsmall"
      android:layout_gravity="center_vertical"
      android:layout_margin="2dip"
     />

</LinearLayout>
<ImageView 
     android:id="@+id/bottom_border"
     android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:src="@drawable/custombuttonlist_bottomborder"
     />

</LinearLayout> 
```

我已经尝试以编程方式给线性布局颜色：

```
lPlaces= (LinearLayout)findViewById(R.id.bt_overview_list_places);
llPlaces.setBackgroundColor(R.color.custom_button_grey); 
```

但一切都保持橙色（颜色有所不同）。

我检查了我的颜色，我认为它应该是 100% 不透明的：

```
<color name="custom_button_grey_text">#585850</color> 
```

即使在它前面添加了 FF：

```
 <color name="custom_button_grey_text">#FF585850</color> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:24:29.647

在xml中尝试这样

```
android:background="#FF4500" 
```

代替

```
android:background="@color/custom_button_grey" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:11:51.910

您应该*覆盖*每个包含的布局的背景参数。您可以使用覆盖任何属性`android:layout_*`

[`<include>`](http://developer.android.com/training/improving-layouts/reusing-layouts.html#Include)使用标签查看官方文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T10:05:01.463

好的我明白了：

我创建了一个可绘制文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
     <!-- focused -->
    <item android:state_focused="true" android:drawable="@color/list_even" />
    <!-- focused and pressed-->
    <item android:state_focused="true" android:state_pressed="true" android:drawable="@color/list_even" />
    <!-- pressed -->
    <item android:state_pressed="true" android:drawable="@color/list_even" />
    <!-- default -->
    <item android:drawable="@color/list_odd" /> 
</selector> 
```

（现在我按下它时也有很好的颜色变化）并将其设置为背景资源：

> llPlaces.setBackgroundResource(R.drawable.overview_background_color_even);

# php - 在mysql的前序遍历树中插入动态记录

> ID：11700432
> 
> 赞同：1
> 
> 时间：2012-07-28T11:02:58.383
> 
> 标签：php, mysql, codeigniter

我的表中有以下条目：

```
id  name          unit_id   lft rgt level
------------------------------------------
1   Sports        01        1   30  0
2   Cricket       02        2   3   1
3   Hocky         03        10  13  1
4   Tennies       04        11  12  2
5   Baseball      05        14  15  1
6   Soccer        06        16  25  1
7   Carrom        07        17  22  2 
```

以上记录是手动插入的。`<ul>`现在我想在 codeigniter 中动态插入记录，以便在`<li>`标签中显示父子关系。我指的是这篇文章：

[http://www.sitepoint.com/hierarchical-data-database-3/](http://www.sitepoint.com/hierarchical-data-database-3/)

我通过引用它做了以下代码。

```
$description = $_GET['description'];
$name = $_GET['name'];
$unit_id = $_GET['unit_id'];

$parent_level = (int) $_GET['level'];
$level = (int) $_GET['level'] + 1;

$sql0 = "Select `lft`, `rgt` from tablename
Where `level` = $parent_level";

$result = $this->db->query($sql0);
$records = $result->result_array();

$lft = $records[0]['lft'];
$rgt = $records[0]['rgt'];

$sql1 = "UPDATE tablename SET rgt = rgt+2 WHERE rgt >  $rgt ";
$this->db->query($sql1);
$sql2 = "UPDATE tablename SET lft = lft+2 WHERE lft > $lft ";
$this->db->query($sql2);
$sql3 = "INSERT INTO tablename (`id`,`name`,`unit_id`,`description`, `lft`, `rgt`, `level`)        
values (NULL, '$name', '$unit_id','$description', '$lft', '$rgt', '$level')";
echo $this->db->query($sql3); 
```

但是这段代码不能正常工作，也不能维护父子关系。我认为这里有一些错误的计算，但无法弄清楚它有什么问题。

我需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:01:14.073

让我稍微更新一下代码，但首先我有一些注意事项：

1-由于信息是整数，加（int），有助于规避SQL注入

2-您在最后一个查询中混合了更新和插入语法:)（ian 注意到了这一点）

3-确保每个变量（级别、lft、rgt、级别、unit_id 和名称）都有一个值，您可以在查询前简单地回显它们以进行检查。

4-通常mysql函数一次只能处理一个查询，除非你使用多查询解决方案，这就是我命名$sql1、$sql2和$sql3的原因，你所要做的就是一个接一个地执行它们

5-字符串值应该有引号（'），mysql甚至接受这个整数

6- 字段最好有反引号 (`) 以克服与 mysql 关键字的冲突

7-检查mysql的错误输出，不确定你使用的是什么api，但默认mysql使用[mysql_error](http://php.net/mysql_error)

[8- 确保在插入之前根据您的设置使用mysql-real-escape-string](http://php.net/manual/en/function.mysql-real-escape-string.php)或等效函数转义name 和 unit_id 的值（它们似乎是 varchar），再次防止 SQL 注入

```
$level = (int) $_GET['level'] + 1;
$lft   = (int) $_GET['lft'] + 1;
$rgt   = (int) $_GET['rgt'] + 1;

$sql1  = "UPDATE tablename SET rgt = rgt+2 WHERE rgt >  $rgt ";
//in the below line, it was $rgt, but I guess you meant $lft
$sql2  = "UPDATE tablename SET lft = lft+2 WHERE lft > $lft ";  
$sql3  = "INSERT INTO tablename (`id`,`name`,`unit_id`, `lft`, `rgt`, `level`)
    values (NULL, '$name', '$unit_id', '$lft', '$rgt', '$level')"; 
```

现在上面的代码显示生成这样的东西

```
id  name        lft rgt level
------------------------------------
1   company     1   22  0
2   qa          3   24  1
3   tester      5   26  1
4   developer   7   28  1 
```

如果您想使用公司作为基础，您应该只将 1 添加到 0 级，我们已经这样做了

然后我们必须添加到主级别（在我们的例子中是级别 0）的 lft 和 rgt 而不是最后一项，这从您的评论中可以看出

你应该得到的结果如下

```
id  name        lft rgt level
------------------------------------
1   company     1   22  0
2   qa          3   24  1
3   tester      3   24  1
4   developer   3   24  1 
```

可以看到，lft 和 rgt 应该只在我们添加级别时加 2，但对于同一级别，它应该始终相同，使用此方法相同级别将一起显示

在更新代码以反映我所说的内容后，它应该如下所示

```
$description = $_GET['description'];
$name = $_GET['name'];
$unit_id = $_GET['unit_id'];

$parent_level = (int) $_GET['level'];
$level = (int) $_GET['level'] + 1;

//check lft and rgt for parent 
$sql = "Select `lft`, `rgt` from tablename
    Where `level` = $parent_level";
$result = $this->db->query($sql);
$records = $result->result_array();

$lft = $records[0]['lft'] + 2;
$rgt = $records[0]['rgt'] + 2;

//check in case there is levels after the one we will add
$sql = "count(*) from tablename
    Where `level` >= $level";
$result = $this->db->query($sql);
$records = $result->row_array();
$count = $records[0];
if ( $count > 0 ) { //we have to move child nodes one step
    $sql = "UPDATE tablename SET rgt = rgt+2, lft = lft + 2, level = level + 1 
        WHERE level >= $level";
    $this->db->query($sql);
}
$sql = "INSERT INTO tablename (`id`,`name`,`unit_id`,`description`, `lft`, `rgt`, `level`)        
    values (NULL, '$name', '$unit_id','$description', '$lft', '$rgt', '$level')";
echo $this->db->query($sql); 
```

希望这能解决它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:09:32.113

尝试这个：

```
$name = $_GET['name'];
$unit_id = $_GET['unit_id'];
$rgt = $_GET['rgt'];
$lft = $_GET['lft'];
$level = $_GET['level'] + 1;
$right = $rgt + 1;

$sql1 = "UPDATE xp_subunit SET lft = lft+2 WHERE lft >= $rgt ;";
$this->db->query($sql1);
$sql2 = "UPDATE xp_subunit SET rgt = rgt+2 WHERE rgt >= $rgt ;";
$this->db->query($sql2);
$sql3 = "INSERT INTO xp_subunit (`id`,`name`,`unit_id`,`lft`, `rgt`,   
`level`) values (NULL, '$name', '$unit_id',$rgt, $right, '$level');";
$this->db->query($sql3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:53:39.217

OK 在嵌套集合中插入元素有点复杂，但这应该有助于...

你遇到了类似的事情：

/insert.php?name=newsport&level=2&lft=11&rgt=12;

您正确地指出我们必须首先为此腾出一些空间。

我们通过为 lft >= 11 和 rgt+2 （其中 rgt >= 10）增加 lft+2 来实现这一点；

解释：

lft >= 11 肯定要向上移动。rgt >= 10 具有 rgt 的所有元素大于或等于 1，小于您要插入的 lft。

我们可以通过一个查询来做到这一点。

```
UPDATE tablename
SET lft = CASE
          WHEN lft>= $_GET['lft'] THEN lft+2
          ELSE lft END,
    rgt = rgt+2
WHERE rgt >= ($_GET['lft'] - 1); 
```

然后我们插入新元素。

```
INSERT INTO tablename
(`id`, `name`, `unit_id`, lft, rgt, level )
VALUES
(NULL, $_GET['name'], UNIT_ID, $_GET['lft'], $_GET['rgt'] ); 
```

不确定如何生成 UNIT_ID，因此您将自己完成 - 它很可能是另一个 $_GET 变量。

您的插入使用的是更新语法而不是插入。

之后，您需要开始在更新或插入时从数据库中回显错误。

# java - Java & Android & SharedPreferences & OOP

> ID：11700433
> 
> 赞同：0
> 
> 时间：2012-07-28T11:03:06.920
> 
> 标签：java, android, oop, static-methods

该函数包含在主Activity中：

```
public int checkScore(int scoreCurrent) {
         int maxscore = PreferenceConnector.readInteger(this, "maxscore", 0);
         if (scoreCurrent > maxscore) {
          PreferenceConnector.writeInteger(this, "maxscore",
                         scoreCurrent);
          maxscore = scoreCurrent;
         }
         return maxscore;
        } 
```

PreferenceConnector 类简化了 SharedPreferences 的工作。函数 checkScore() 应该在其他类中可用，所以需要做静态。但我有错误：

```
Cannot use this in a static context 
```

该怎么做以及如何解决？

**活动：**

```
public class GameScreen extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }

    public static int checkScore(int scoreCurrent) {
        int maxscore = PreferenceConnector.readInteger(GameScreen.this,
                "maxscore", 0);
        if (scoreCurrent > maxscore) {
            PreferenceConnector.writeInteger(GameScreen.this,
                    "maxscore", scoreCurrent);
            maxscore = scoreCurrent;
        }
        return maxscore;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:06:44.640

您必须将 ACTIVITY 的 CONTEXT 传递给 PreferenceConnector 类

并且您必须制作 PreferenceConnector 类的对象，那时您可以将 Activity 的 Context 传递给该类。

并且**不要让**方法**writeInteger(this, "maxscore", scoreCurrent); 静止的**

通过在 Main Activity 中创建 PreferenceConnector 类的对象来使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:14:36.257

试试下面的代码：

```
public int checkScore(int scoreCurrent) {
         int maxscore = PreferenceConnector.readInteger(YourActivityName.this, "maxscore", 0);
         if (scoreCurrent > maxscore) {
          PreferenceConnector.writeInteger(YourActivityName.this, "maxscore",
                         scoreCurrent);
          maxscore = scoreCurrent;
         }
         return maxscore;
        } 
```

（或者）

```
public int checkScore(int scoreCurrent) {
             int maxscore = PreferenceConnector.readInteger(getApplicationContext(), "maxscore", 0);
             if (scoreCurrent > maxscore) {
              PreferenceConnector.writeInteger(getApplicationContext(), "maxscore",
                             scoreCurrent);
              maxscore = scoreCurrent;
             }
             return maxscore;
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T15:17:08.060

您可以将 GameScreen 活动的引用传递给您的其他类。那么你不需要任何东西是静态的。你可以打电话`myGameScreen.checkScore()`。

# javascript - 使用 JQuery 调用 WebService 不能在所有浏览器中工作，而只能在 IE9 中工作？

> ID：11700435
> 
> 赞同：0
> 
> 时间：2012-07-28T11:03:12.537
> 
> 标签：javascript, jquery, jquery-plugins, jquery-selectors

我在一个 js 文件中有此代码，我将其包含在默认页面中，以在客户的浏览器上创建 cookie，并在Thankyou 页面中使用它来调用我的 Web 服务来跟踪付款交易。

`// Read a page's GET URL variables and return them as an associative array.`

`$(document).ready(function () {`

```
$.extend({
    getUrlVars: function () {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for (var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    },
    getUrlVar: function (name) {
        return $.getUrlVars()[name];
    },
    getCookie: function (name) {
        var dc = document.cookie;
        var prefix = name + "=";
        var begin = dc.indexOf("; " + prefix);
        if (begin == -1) {
            begin = dc.indexOf(prefix);
            if (begin != 0) return null;
        }
        else {
            begin += 2;
            var end = document.cookie.indexOf(";", begin);
            if (end == -1) {
                end = dc.length;
            }
        }
        return unescape(dc.substring(begin + prefix.length, end));
    }
});

{
    var cookieStart, cookieEnd, cookieValue, UserGuid, productId, AffiliationURL, PricePerUnit, commissionAmount;

    // Get object of URL parameters
    if ($.getUrlVars() != null) {
        var allVars = $.getUrlVars();
    }

    // Getting URL var by its name

    //Now check if the user is from Seek Site??
    //If this is not null that means the user is Refered from Seek Site
    if ($.getUrlVar('clientId') != null) {

        UserGuid = $.getUrlVar('clientId');

        if ($.getUrlVar('productId') != null) {
            productId = $.getUrlVar('productId');
        }
        if ($.getUrlVar('AffiliationURL') != null) {
            AffiliationURL = $.getUrlVar('AffiliationURL');
        }
        if ($.getUrlVar('PricePerUnit') != null) {
            PricePerUnit = $.getUrlVar('PricePerUnit');
        }
        if ($.getUrlVar('commissionAmount') != null) {
            commissionAmount = $.getUrlVar('commissionAmount');
        }

        //Now Create the cookie for the user
        var myCookie = $.getCookie("ReferedCookie");
        alert(myCookie);
        if (myCookie != null) {
            // cookie exists 
            cookieStart = myCookie.indexOf("clientId=");
            //alert(cookieStart = cookieStart + "ReferedCookie=".length);
            cookieEnd = myCookie.indexOf(";", cookieStart);

            //if there is no occurence of the semicolon character 
            //cookieEnd takes the length of the   document.cookie property
            if (cookieEnd == -1) cookieEnd = myCookie.length;

            cookieValue = myCookie.substring(cookieStart, cookieEnd);

            // check the Product Id
            if (cookieValue.indexOf(productId + "&", "productId=") != -1) {
                // that means the User clicked on the same Product again and there is already a cookie Exists for that product
                alert("User clicked on the same Product again");
            }

            else {
                // The Product Id is different ,We are going to add that product value as string to the  cookie 

            }
        }

        else {
            // Create Cookie
            var expiryDate = new Date();
            expiryDate.setTime(expiryDate.setDate(expiryDate.getDate() + 365)); // 365 days

            document.cookie = "ReferedCookie=" + "clientId=" + UserGuid + "&productId=" + productId + "&AffiliationURL=" + AffiliationURL + "&PricePerUnit=" + PricePerUnit + "&commissionAmount=" + commissionAmount + ";" + "expires=" + expiryDate.toGMTString() + ";";

        }

    }
}}); 
```

这里是我想在Thankyou页面运行但它在IE9中运行的代码（当时我不知道为什么？？？）

```
{
var cookieStart, cookieEnd, cookieValue, UserGuid, productId, AffiliationURL, PricePerUnit, commissionAmount;
$(window).load(function (e) {
    e.preventDefault();
    $.extend({
        readCookie: function (name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }
    });

    var x = new Array(3);

    cookieValue = $.readCookie("ReferedCookie");

    var s = 0;
    var pos = cookieValue.indexOf("&");
    while (pos > -1) {
        x[s] = pos;
        pos = cookieValue.indexOf("&", pos + 1);
        // alert(x[s]);
        s++;
    }

    var c1 = cookieValue.indexOf("clientId=");
    alert(UserGuid = cookieValue.substring(c1 + 9, x[0]));

    var p1 = cookieValue.indexOf("productId=");
    alert(productId = cookieValue.substring(p1 + 10, x[1]));

    var A1 = cookieValue.indexOf("AffiliationURL=");
    alert(AffiliationURL = cookieValue.substring(A1 + 15, x[2]));

    var pp1 = cookieValue.indexOf("PricePerUnit=");
    alert(PricePerUnit = cookieValue.substring(pp1 + 13, x[3]));

    var com1 = cookieValue.indexOf("commissionAmount=");
    alert(commissionAmount = cookieValue.substring(com1 + 17));

    var ServiceURL = 'http://localhost:12445/Service/TrackPayment.asmx/InsertCommissionRecord';
   // var d = '{"ProductID": "' + productId + '" , "AffiliationURL": "' + AffiliationURL + '" , "Quantitiy": "' + 15 + '" , "PricePerUnit": "' + PricePerUnit + '" , "commissionAmount": "' + commissionAmount + '"}';
    var d = '{"ProductID":"1","AffiliationURL":"1","Quantitiy":"1","PricePerUnit":"1","commissionAmount":"1"}';
    alert(d);
    $.ajax({
        type: 'POST',
        data: d,
        url: ServiceURL,
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success:
          function (data, textStatus, XMLHttpRequest) {
              alert(data);
              alert(textStatus);

              alert(XMLHttpRequest);
          },
        error:
          function (XMLHttpRequest, textStatus, errorThrown) {
              alert(textStatus);
              alert(errorThrown);
          }
    });
});} 
```

在萤火控制台它显示 data.d 为空

请帮助我，并指出我哪里出错了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:00:35.243

JS：

```
$.ajax({
    type: 'POST',
    data: {'d': d},
    url: ServiceURL,
    dataType: 'json',
    success:
        function (data, textStatus, XMLHttpRequest) {
            alert(data.ProductID); // returns '1'
        },
    error:
        function (XMLHttpRequest, textStatus, errorThrown) {
            alert(textStatus);
            alert(errorThrown);
        }
}); 
```

测试.php：

```
$data = json_decode($_POST['d']);
echo json_encode($data); 
```

# ios - 如何在ios中使用水平滚动视图时设置背景图像固定

> ID：11700436
> 
> 赞同：0
> 
> 时间：2012-07-28T11:03:13.000
> 
> 标签：ios, xcode

```
 - (void)viewDidLoad
{
    NSLog(@"Welcome to Home Page");
    [super viewDidLoad];

   self.view.backgroundColor=[[UIColor alloc]initWithPatternImage:[UIImage imageNamed:@"bg-image.png"]];

// Do any additional setup after loading the view, typically from a nib.
}

- (void)loadView {

    CGRect fullScreenRect=[[UIScreen mainScreen] applicationFrame];
    scrollView=[[UIScrollView alloc] initWithFrame:fullScreenRect];
    scrollView.contentSize=CGSizeMake(1400, 100);

    UIImageView *tempImageView2 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti01.png"]];
    tempImageView2.frame=CGRectMake(10, 60, 200, 200);
    [scrollView addSubview:tempImageView2];

    UIImageView *tempImageView3 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti02.png"]];
    tempImageView3.frame=CGRectMake(240, 60, 200, 200);
    [scrollView addSubview:tempImageView3];

    UIImageView *tempImageView4 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti03.png"]];
    tempImageView4.frame=CGRectMake(470, 60, 200, 200);
    [scrollView addSubview:tempImageView4];

    UIImageView *tempImageView5 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti04.png"]];
    tempImageView5.frame=CGRectMake(700, 60, 200, 200);
    [scrollView addSubview:tempImageView5];

    UIImageView *tempImageView6 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti05.png"]];
    tempImageView6.frame=CGRectMake(930, 60, 200, 200);
    [scrollView addSubview:tempImageView6];

    UIImageView *tempImageView7 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti06.png"]];
    tempImageView7.frame=CGRectMake(1160, 60, 200, 200);
    [scrollView addSubview:tempImageView7];

    self.view=scrollView;
    [scrollView addSubview:tempImageView2];
    [scrollView addSubview:tempImageView3];
    [scrollView addSubview:tempImageView4];
    [scrollView addSubview:tempImageView5];
    [scrollView addSubview:tempImageView6];
    [scrollView addSubview:tempImageView7];

    scrollView.userInteractionEnabled = YES;
    btn = [UIButton buttonWithType:UIButtonTypeCustom];
    btn.frame = CGRectMake(22, 100, 1800, 500);
   // [btn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [btn addTarget:self action:@selector(buttonTest:) forControlEvents:UIControlEventTouchUpInside];    
    [scrollView addSubview:btn];

}

- (IBAction)buttonTest:(id)sender {
    MSDescriptionpage *aSecondPageController = [[MSDescriptionpage  alloc] initWithNibName:@"MSDescriptionpage" bundle:nil];        
    [self.navigationController pushViewController:aSecondPageController animated:YES];        
    [aSecondPageController release];

} 
```

当我滚动使用 UISCROLLVIEW 的内容时，如何设置背景图像固定。如何在 ios.i 中使用水平滚动视图时设置背景图像固定，使用多种格式但未修复问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:15:47.947

**编辑**

![在此处输入图像描述](../Images/2c4d758436f4ba205f94bd320c0d29b5.png)

现在像这个.h文件一样为scrollView添加IBOutlate

```
@property (strong, nonatomic) IBOutlet UIScrollView *scrollView; 
```

并在 .m 文件中

```
@synthesize scrollView; 
```

并在 xib Control-Drag 从文件的所有者到 scrollView 以将 IBOutlate 分配给它

这看起来像这样

![在此处输入图像描述](../Images/e6b4d4899c150354206382e0243e12b0.png)

现在

# java - 是什么导致此按钮崩溃？

> ID：11700441
> 
> 赞同：0
> 
> 时间：2012-07-28T11:04:42.220
> 
> 标签：java, android

我正在编写一个应用程序，允许我通过单击按钮通过 TCP/IP 发送命令。但是，当我单击模拟器中的按钮时，它会返回一条消息，说明该按钮已停止工作。我想知道是否有人能在我的代码中发现错误。

**代码：**

```
package button.test;  
import java.io.IOException;  
import java.io.OutputStream;  
import java.net.Socket;  
import java.net.UnknownHostException;  
import android.app.Activity;  
import android.os.Bundle;
import android.view.View;  

public class ButtonActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
    public void onClick(View view) throws UnknownHostException, IOException
    {
        Socket socket = new Socket("192.168.2.92", 60128);
        try{
            dataOutputStream.Object BUFFER = null;
            write(BUFFER);
            String buffer="ISCP000000100000000701000000!1PWR010D";
            OutputStream os=socket.getOutputStream();
            os.write(buffer.getBytes()); 
        } catch(IOException e)
        {
            //error code
        }

    }
    private void write(Object BUFFER) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:14:19.237

**1.**您错过了声明按钮并对其进行初始化...

**例如：**

```
public class ButtonActivity extends Activity {

Button mbutt;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mbutt = (Button)findViewById(R.id.Button_Click);
    } 
```

**-**请注意，**您必须仅在 setContentView() 之后初始化视图**，否则您的**视图将无法获取 id**并使**您的应用程序崩溃。**

**2.**始终**建议保持 UI 工作在 UI 线程上，而 Non-UI 工作在 Non-UI 线程上**，但**随着 HoneyComb android 版本的到来，这成为了一种规律。**

**3.**您可以使用`Thread with a Handler` **同步UI和非UI线程。**

**4.** `AsyncTask`所谓的**Painless Threading**是在android 中专门为此引入的。

**有关线程、处理程序和 AsyncTask**的教程，请参阅此链接：

 **[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:07:56.103

看起来套接字连接工作需要很长时间。建议将此功能放在 AsyncTask 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:08:13.903

你还没有声明你的按钮`onCreate()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T11:18:16.583

如果您正在膨胀 xml，则无需声明按钮。您的问题是您在主线程上运行网络连接，这是自 api 11 以来不允许的。为此使用 asynctask 或线程。

例如

```
new Thread() {
public void run() {
    Socket socket = new Socket("192.168.2.92", 60128);
    try{
        dataOutputStream.Object BUFFER = null;
        write(BUFFER);
        String buffer="ISCP000000100000000701000000!1PWR010D";
        OutputStream os=socket.getOutputStream();
        os.write(buffer.getBytes()); 
    } catch(IOException e)
    {
        //error code
    }
  }
}.start(); 
```**

# image-processing - OCR 中的特征提取：对这些特征有任何想法吗？

> ID：11700443
> 
> 赞同：0
> 
> 时间：2012-07-28T11:04:51.920
> 
> 标签：image-processing, ocr

有没有人知道下面这些特征是什么，它们用于 OCR 的特征提取级别。

1.  垂直扫描图像最大绝对像素差数
2.  水平扫描图像最大绝对像素差数
3.  图像中连续像素的绝对差的总和。

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:19:59.673

如果***我***有这些问题，并且***如果***Google 和我的 OCR 软件的文档都没有告诉我这可能意味着什么，我会开始对其进行逆向工程：

*   创建一小组具有 1、2 和 3 行像素的简单位图图像（大小为 '20x1'`20x2`和`20x3`;

*   创建另一组具有 1、2 和 3 列像素（大小和`1x20`）的简单位图图像；`2x20``3x20`

*   用不同的简单方案为每个像素着色；

*   找出 ImageMagick 告诉您每个像素的颜色值`convert 20x1.png 20x1.txt`：

*   询问您的 OCR 软件所提到的有关示例图片的功能；

*   得出你的结论。

# c# - 如何创建一个软件来制作另一个软件？C＃

> ID：11700444
> 
> 赞同：0
> 
> 时间：2012-07-28T11:04:54.240
> 
> 标签：c#, .net

我有一个小问题。

**SOFTWARE1** 我做了一个改变FF和IE主页的软件。该软件只是在主页更改后自行打开和关闭。我在源代码中设置了新的主页，当然我可以做一个文本框或类似的东西。

**SOFTWARE2** 我想要的是制作另一个软件......其中我有一个文本框和一个按钮。在文本框中，我将写下“新主页 URL”，单击“确定”后，我想获得带有我在第一个软件中输入的“新主页 URL”的**SOFTWARE1 。**

这只是......我想获得一个应用程序，就是这样做的：

-打开 -更改主页 -关闭

我不知道如何制作制作其他软件的软件。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:22:49.553

你只需要使用 Process.Start 就像

```
Process.Start("software1.exe", textbox.text); 
```

在您的软件2代码上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:41:54.343

要以编程方式创建和编译代码，请查看`System.CodeDom`命名空间。它将允许您从 PROGRAM2 为您的 PROGRAM1 生成源代码并将其编译为工作可执行文件。

[这是](http://msdn.microsoft.com/en-us/library/saf5ce06)一个教程，查看名为“使用 CodeDOM 代码提供程序编译程序集”的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:32:20.057

通过命令在 SOFTWARE2 中打开 SOFTWARE1 并将参数传递给它。然后在 SOFTWARE1 中获取参数并通过接收到的参数设置主页

**SOFTWARE2内部：**

```
ProcessStartInfo psi = new ProcessStartInfo();        
psi.FileName = "C:\SOFTWARE1.exe";
psi.Arguments = "http://stackoverflow.com";
Process.Start(startInfo); 
```

**软件 1 内部：**

```
static void Main(string[] args)
{
    string url = "";
    if (args.Length > 0)
        url = args[0];
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new frmGetText(url));

    .... 
```

# c# - 抽象与。界面混乱

> ID：11700446
> 
> 赞同：0
> 
> 时间：2012-07-28T11:05:15.590
> 
> 标签：c#, .net, oop, interface, abstract-class

*等等，在你开始思考之前，我想明确一点，我**不会**问接口和抽象之间的常规区别。*

我已经了解了[MSDN](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFsQFjAA&url=http://msdn.microsoft.com/en-us/library/scsyfw1d%28v=vs.71%29.aspx&ei=wcETUN7RHYX4rQf2yYDYCg&usg=AFQjCNETMTxWBiRrevXYVUyhAUj8sBDAbw)中 Abstract 和 Interface 之间的区别。

据说 ：

> *通过更新基类，所有继承类都会随着更改而自动更新。*
> *另一方面，接口一旦创建就不能更改。如果需要新版本的接口，则必须创建一个全新的接口。*

看到这个： - ![抽象和接口之间的区别](../Images/0145c36a5ff96790cd6012f99188322b.png)

任何人都可以使用以下示例证明这一点：-

```
abstract class WashingMachine
{
   abstract public void Wash();
}

class Philips : WashingMachine
{
   public Philips() {  }

   override public void Wash(){//Wash code here....}
}

class Samsung : WashingMachine
{
   public Samsung() {  }

   override public void Wash(){//Wash code here....}
}

class Videocon : WashingMachine
{
   public Videocon() {  }

   override public void Wash(){//Wash code here....}
} 
```

**现在，如果我在WashingMachine**中添加了以下新的抽象方法：-

```
abstract public void Rinse(int loadSize); 
```

所有继承类（即 Philips/Samsung/Videocon）将如何随着更改***自动更新？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T11:10:11.540

它们不会得到更新 - 您仍然必须*手动*为`Rinse`每个继承自`WashingMachine`.

我相信 MSDN 说的是，如果您在抽象类中定义了一个非抽象方法并且您更改*了该*方法，那么从抽象类继承的所有类都将自动受益于更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:09:08.803

您的具体派生类型都需要提供任何继承的抽象成员的实现......因此，当您修改基础时，您的类型仍然需要提供 Rinse 实现。

[http://msdn.microsoft.com/en-us/library/sf985hc5(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/sf985hc5(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:13:36.187

这是程序员在读取接口和抽象类之间的差异时通常会遇到的困惑。仅当抽象类中的更改是具体的时，您所指的行才是正确的。我的意思是你添加了一个带有实现的属性或方法。或者，如果我更具体一点，基本抽象类的任何更改都不会使任何具体类抽象。这种变化在抽象类中是可能的，你无法在接口中添加这种变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T11:18:32.850

> 所有继承类（即 Philips/Samsung/Videocon）将如何随着更改自动更新？

它们会突然变得不可编译，这不是更新吗？

但我想指出，实际上抽象类中的抽象方法和接口中的方法没有区别。主要区别在于抽象类可以具有实现的方法，而接口则不能。

事实上，我会说我不喜欢 MSDN 的定义，并且觉得它令人困惑且有些误导。

# 64-bit - Windows 7 64 位上的 JavaCV java.lang.UnsatisfiedLinkError 错误

> ID：11700450
> 
> 赞同：0
> 
> 时间：2012-07-28T11:05:36.903
> 
> 标签：64-bit, javacv

> 我有 JDK 7（64 位）Netbeans 7.2 和 OpenCV 2.4。我已经通过添加相关的 OpenCV 路径来设置路径变量。但是程序在执行时会出现该错误。

我已经使用 JDK7(32bit) Netbeans 7.2 和 OpenCV 2.4 在 32 位环境中运行我的程序；在这种情况下，程序会完美执行。

当我使用 64 位环境时，谁能帮我解决问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:58:27.160

1.  安装 JDK7（64 位）。
2.  将 OpenCV 目录复制到 Windows (C) 驱动器。
3.  安装 microsoft c++ 2010 redistributable x64。
4.  将“C:\opencv\build\common\tbb”作为环境变量中的路径。
5.  下载 javacv-0.1.jar 并将其作为项目中的库文件。
6.  如果问题存在，请从 Internet 下载 cv100.dll、cvcam100.dll、cxcore100.dll、opencv_highgui220.dll 并将其复制到 system32。

# javascript - 两个 svg 文本元素之间的空格

> ID：11700451
> 
> 赞同：1
> 
> 时间：2012-07-28T11:05:43.573
> 
> 标签：javascript, text, svg

我目前正在使用 JavaScript 的 SVG 元素。

这是我的场景。

我有一个 svg 元素，其中有两个这样的文本元素

```
<svg>
  <g transform = "translate(0, 20)">
     <text style="font-size: 0.5em;" x="0" y="-4"> text </text>
     <text style="font-size: 0.5em;" x="70" y="-4"> value </text>
  </g> 
<svg> 
```

它看起来像这样很好

**文本值**

我使用了 font-size 0.5em 因为我想在我调整我的 svg 大小时调整我的文本大小。（通过使用 jquery resizable）它工作正常。但问题是当我调整我的 svg 大小时，文本之间的空间开始减少和在某个时间点，由于固定的 x 和 y 属性，测试变得如此之大，以至于两个文本相互重叠。

我想问有没有办法避免这个问题任何方法可以使两个文本之间的空间保持不变或者文本可以相对放置。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T11:34:22.037

转换为单个文本值似乎符合您上面概述的用例。如果您需要相对放置的文本，您可以将其转换为 tspan，然后使用 dx 和 dy 例如`<text>text <tspan dx="1em" dy="1em">value</tspan></text>`

# documentation - 链接到外部主页

> ID：11700452
> 
> 赞同：1
> 
> 时间：2012-07-28T11:05:52.627
> 
> 标签：documentation, doxygen, documentation-generation

我制作了一个 Doxygen 文档，它本身使用标签文件机制引用了另一个文档。但是在它的主页中，我现在想链接到外部文档的主页。当然，我总是可以直接指定文件：

```
... uses [OtherDoc](../../../OtherProject/doc/html/index.html) for ... 
```

更是如此，因为这些项目是相对于彼此定位的。但是尽管如此，我还是希望 Doxygen 自动化这个过程，因为无论如何它都需要知道外部文档的位置。

那么有没有办法以某种方式象征性地引用外部文档的主页，类似于：

```
[OtherDoc](\ref OtherProject::mainpage) 
```

或者

```
[OtherDoc](#OtherProject::mainpage) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:35:21.130

有一个技巧可以做到这一点。假设您有项目 A 和 B，那么在项目 A 的主页中，您可以输入如下`@anchor`命令：

```
/** @mainpage
 *  @anchor project_a
 */ 
```

然后在项目 b 的文档中，您可以简单地使用

```
 [OtherDoc](\ref project_a) 
```

请注意，锚点必须是全局唯一的，因此您需要仔细选择它们！

# javascript - 文本框失去焦点后如何调用函数

> ID：11700453
> 
> 赞同：14
> 
> 时间：2012-07-28T11:06:17.177
> 
> 标签：javascript, ajax, function, textbox, focus

我没有使用 Javascript/JQuery/AJAX 的经验，所以我试图了解在文本框失去焦点后是否可以调用在我的数据库上执行查询的函数。

我在我的页面中显示一个表（使用 PHP），其文本框包含我的 DB 上表的相同值，当有人更改文本框中的值时，我想使用 UPDATE 查询将 DB 表更改为使它们相等；这是 AJAX 或 JQuery 的一种方式吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-28T12:19:16.317

```
<input type="text" id="check">​

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript">
$("#check").blur(function() {
 alert('working');
});​
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T11:12:18.280

将处理程序绑定到`change`事件：

```
<textarea onchange='ajax_call()'></textarea> 
```

where`ajax_call`是更新数据库的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T11:17:56.707

是的你可以。首先，您需要等待诸如 onchange/onblur 之类的 JavaScript 事件。比您需要对服务器进行 Ajax 调用。它将更改 db 中的数据并产生一些数据，您可以将其放在页面上。您可以使用 jQuery 来操作您的页面。

另一种方法是等到有人按下提交按钮，然后更新数据库中的数据。

# php - 高级搜索 - 分页

> ID：11700454
> 
> 赞同：0
> 
> 时间：2012-07-28T11:06:38.880
> 
> 标签：php, mysql

你们能否建议好的高级搜索（具有多个条件字段）分页。问题是如何保存数据（由用户输入）以在转到第 2、3 页等时保持相同的搜索条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:11:13.663

您应该在 GET 请求中插入搜索参数。例如：

`search.php?page=N&someparameter=x&otherparameter=y`

这些链接应该在您的分页中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:12:00.563

**如果分页可用，使用会话存储用户输入数据并使用会话变量来搜索其他页面中的内容。**

# android - 安卓多线程游戏

> ID：11700455
> 
> 赞同：1
> 
> 时间：2012-07-28T11:06:38.610
> 
> 标签：android, multithreading, opengl-es

我正在开发一个简单的安卓游戏。我想通过多线程优化我的引擎。我正在使用 OpenGL ES，Android 2.2

现在 UpdateGame() 和 RenderScene() 在单线程中运行并在 onDrawFrame(GL10 gl) 中执行

我有一个具有 Position、Rotation、Scale 和 Color 成员的 RenderObject 类。所有 RenderObjects 都是在我开始游戏时创建的，并存储在 RenderObject 数组中。

在 UpdateGame() 函数中，我通过 RenderObject 数组中的 RenderObjects 并更新新的位置、旋转、缩放和颜色。

在 RenderScene() 函数中，我通过 RenderObject 数组中的 RenderObjects 并使用新的 Position、Rotation、Scale 和 Color 渲染它们。

这在单线程中工作正常。

于是我尝试为 UpdateGame() 创建一个线程。

所以我的想法是：

更新线程：......渲染线程：

更新第 0 帧

更新第 1 帧.............渲染第 0 帧....更新和渲染并行工作

更新第 2 帧.............渲染第 1 帧

更新第 3 帧................渲染第 2 帧

但首先我修改了 RenderObject 类，使其具有 RenderPosition、RenderRotation、RenderScale 和 RenderColor 成员。

这些成员在渲染前一帧之前被复制。这样并行更新线程就可以修改新的位置、旋转、比例、颜色。

```
Runnable pRunnable;
Thread pThread;
public int renderframe = 0;
piblic int updateframe = 0;

public void onSurfaceCreated(GL10 gl, EGLConfig config) 
{
    // I create a new thread in this function        
    pRunnable = new Runnable(){
         public void run(){
             while(true)
             {
                 while( renderframe < updateframe )
                 {
                     // WAITING for render to finish so that data does not get corrupterd
                 }
                 // 
                 // I update RenderObject Position, Rotation, Scale, Color members here
                 UpdateGame();
                 updateframe++;
             }  
         }
    };

    pThread = new Thread(pRunnable);
    pThread.start();
}

public void onDrawFrame(GL10 gl) 
{
    while( renderframe == updateframe )
    {
         // Wait for update to finish
    }

    for(int a=0;a<MAX_RENDER_OBJECTS;a++)
    {
        RenderObject ro = aRenderObjects[a];
        // I do this in a function
        ro.RenderPosition[0] = ro.Position[0];
        ro.RenderPosition[1] = ro.Position[1];
        ro.RenderPosition[2] = ro.Position[2];
        ro.RenderPosition[3] = ro.Position[3];
        // I do the same for Rotation, Scale, Color

    }

    renderframe++;

    // When rendering scene I use RenderPosition, RenderRotation members when calling OpenGL API
    RenderScene(); 

} 
```

但是当我运行我的游戏时。图形不正确。看起来好像数据不同步。

关于如何在 Update 和 Render 线程之间适当地同步 RenderObject 数据的任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:28:26.237

这种风格通常看起来效率低下（自旋等待循环会阻止两个线程同时工作）并且很危险（我不知道 Android 是如何实现的，但 Java 内存模型并不能保证来自一个线程的数据对另一个线程可见无需通过同步块）。

我的建议是：主线程是渲染线程（GL 上下文是线程本地的，所以你不能从另一个线程使用它（尽管你可以在另一个线程上创建另一个上下文来执行一些数据共享）），然后产生更新线程。然后主线程继续循环，在每次迭代时等待互斥体。更新线程更新游戏逻辑，并创建一个新对象来表示必须绘制的所有内容（例如绘制命令列表）。然后将该对象放入队列并唤醒主线程（使用 notify()）。然后主线程获取绘图数据并进行绘制。

如果更新循环比渲染循环快得多，您可能希望忽略较旧的数据集，但是这个总体思路应该可以帮助您入门。

# sockets - 什么更适合 Unix 套接字中的每种类型的通信？

> ID：11700456
> 
> 赞同：2
> 
> 时间：2012-07-28T11:06:38.740
> 
> 标签：sockets, unix, network-programming

我需要使用 Unix 域套接字构建一个服务器，看起来有几个选项可以选择通信类型。来自`man 2 socket`：

*   SOCK_STREAM
*   SOCK_DGRAM
*   SOCK_SEQPACKET

那么，什么更适合他们每个人呢？（流、数据报、数据包）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:30:19.670

这真的取决于你要实现什么样的服务器。

如果消息边界很重要，那么`SOCK_DGRAM`将是最佳选择。因为`recvfrom/recvmsg/select`将在收到完整消息时返回。

使用`SOCK_STREAM`，消息接收更加棘手：一个接收调用可能返回部分消息，或两条消息的一部分，或多条消息......等。

如果消息边界不重要，那么`SOCK_STREAM`可能是最佳选择。

`SOCK_DGRAM`of`AF_INET`是不可靠的 UDP。但是，在大多数系统中，`SOCK_DGRAM`of`AF_UNIX`是可靠的。例如：如果接收者队列已满，则发送者将被阻塞，直到有空间为止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:08:38.477

对于 TCP -> SOCK_STREAM 对于 UDP -> SOCK_DGRAM

# gwt - 如何设置 GWT CellList 的样式？

> ID：11700458
> 
> 赞同：1
> 
> 时间：2012-07-28T11:06:48.860
> 
> 标签：gwt, gwt2, gwt-2.4

我有一个要设置样式的 CellList。我想更改光标样式，选定单元格的丑陋颜色。我检查了几个关于堆栈溢出的问题和讨论，但没有一个起作用。我检查了这些：

[CellList GWT CSS 样式](https://stackoverflow.com/questions/6636192/celllist-gwt-css-style)

[如何设置 gwt 2.1 CellTables 标题的样式？](https://stackoverflow.com/questions/4194717/how-do-i-style-a-gwt-2-1-celltables-headers)

她是我的代码：

```
public interface CellListResource extends CellList.Resources {

  public static CellListResource INSTANCE = GWT.create(CellListResource.class);

  interface CellListStyle extends CellList.Style {

  }

  @Source({CellList.Style.DEFAULT_CSS, "CellTableStyle.css"})
  CellListStyle style();
}

 public SearchViewImpl() {

    CompanyCell companyCell = new CompanyCell();
//it doesn't work :S 
    companiesList = new CellList<Company>(companyCell, CellListResource.INSTANCE);

    rootElement = ourUiBinder.createAndBindUi(this);

    loadingImage.setVisible(false);
  } 
```

我错过了什么吗？我清除了浏览器缓存，重新启动服务器，F5 F5 F5 .... F5（一次又一次按下刷新），什么都没有...！提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-11T21:44:43.250

除了注入 CSS 之外，重要的是调用 CellListStyle 样式 cellListStyle() 而不仅仅是 style()：

```
public interface CellListResource extends CellList.Resources {
  public static CellListResource INSTANCE = GWT.create(CellListResource.class);
  interface CellListStyle extends CellList.Style {}

  @Override
  @Source("cellListStyle.css")
  CellListStyle cellListStyle();
} 
```

然后你做

```
CellListResource.INSTANCE.cellListStyle().ensureInjected();
companiesList = new CellList<Company>(companyCell, CellListResource.INSTANCE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T04:47:24.720

确保注入 css 资源。

```
CellTableResources.INSTANCE.cellTableStyle().ensureInjected();
myCellTable = new CellTable<T>(Integer.MAX_VALUE,CellTableResources.INSTANCE); 
```

您可以点击以下链接

[你如何改变鼠标突出显示？](https://stackoverflow.com/questions/5993918/how-do-you-change-the-mouse-over-highlighting)

# javascript - 数组与coffeescript拼接，_ref是干什么用的？

> ID：11700459
> 
> 赞同：6
> 
> 时间：2012-07-28T11:06:51.830
> 
> 标签：javascript, coffeescript, apply, array-splice

在用于[数组拼接](http://coffeescript.org/#slices)的 CoffeeScript 文档中，尾随的目的是`, _ref`什么？

咖啡脚本：

```
numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
numbers[3..6] = [-3, -4, -5, -6] 
```

编译为：

```
var numbers, _ref;
numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
[].splice.apply(numbers, [3, 4].concat(_ref = [-3, -4, -5, -6])), _ref; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T11:11:34.980

这是因为 CoffeeScript 的切片操作想要返回它刚刚分配的切片，但[splice()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)反而返回了移除的元素。

因此，为了实现这一点，它将构造编译为代码片段，该代码片段首先将切片分配给局部`_ref`变量，然后在调用后使用[逗号运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator)返回该变量`splice()`。

# iphone - 重新验证收据

> ID：11700462
> 
> 赞同：2
> 
> 时间：2012-07-28T11:07:38.037
> 
> 标签：iphone, ios, ios4, itunes

我已经使用苹果服务器成功验证了我的沙盒收据以进行自动更新订阅。我已将苹果服务器返回的最新收据内容存储到我的 php 服务器端。

现在，当我尝试重新验证存储的收据以检查是否仍然有效时，针对苹果服务器，我正在接收`{"status":21002, "exception":java.lang.IlegalArgumentException"}`

请让我知道我是否存储了苹果服务器返回的收据数据的错误部分？

我只有在重新验证收据时才会遇到这个问题。

感谢您的光临

更新：

“收据”：{“ ointer_purchase_date_pst”：“ 2012-07-24 05:41:19 America/los_angeles”，“ simelo_endentifier”：“ 46F070C011E011E0117BC168AEE9D39D39D3901DCF961DCF961F88C08C08C08C09333333333333333333333YDARSACTION？ transaction_id":"1000000053343936", "quantity":"1", "product_id":"com.XX.XXX", "original_purchase_date_ms":"1343133679239", "bid":"com.XX.XXX", "web_order_line_item_id" :"1000000026126403", "bvrs":"1.0", "expires_date_formatted":"2012-07-24 13:11:18 Etc/GMT", "purchase_date":"2012-07-24 12:41:18 Etc/ GMT", "purchase_date_ms":"1343133678998","expires_date_formatted_pst":"2012-07-24 06:11:18 America/Los_Angeles", "purchase_date_pst":"2012-07-24 05:41:18 America/Los_Angeles", "original_purchase_date":"2012-07-24 12:41:19 Etc/GMT", "item_id":"547592716"}, "latest_receipt_info":{"original_purchase_date_pst":"2012-07-24 05:41:19 America/Los_Angeles", "unique_identifier":"46f070c011e0da17bc16611ae8d9d939 ”、“original_transaction_id”：“1000000053343936”、“expires_date”：“1343135478000”、“transaction_id”：“1000000053343936”、“数量”：“1”、“product_id”：“com.XX.XXX”、“original_purchase_date_ms”： “1343133679000”，“出价”：“com.XX.XXX", "web_order_line_item_id":"1000000026126403", "bvrs":"1.0", "expires_date_formatted":"2012-07-24 13:11:18 Etc/GMT", "purchase_date":"2012-07-24 12 :41:18 Etc/GMT", "purchase_date_ms":"1343133678000", "expires_date_formatted_pst":"2012-07-24 06:11:18 America/Los_Angeles", "purchase_date_pst":"2012-07-24 05:41 :18 America/Los_Angeles", "original_purchase_date":"2012-07-24 12:41:19 Etc/GMT", "item_id":"547592716"}, "status":0, "latest_receipt":"ewoJInNpZ25hdHVyZSIgPSAiQWgvbnBVK2liUWpHR3VHWFBrNlZ0OUUzbEwwWjFPeUgyeHYxM0RKbXYxK1RuRHBZa1JCcThYbXlxd1BaUDRvNDcvY3A1RWNCMUFmYi9SbnYzQldoZWNVQ1ZsVk85b0hmTDljUVloY01TTHdyNURFcVdFTTZqbXRpRjNxN3VldmlCcE5qb2l3b3pjWmIyaXlzYTE3emVoaVplTlNRVlByYXhUSmppNFFoTjdDWkFBQURWekNDQTFNd2dnSTdvQU1DQVFJQ0NHVVVrVTNaV0FTMU1BMEdDU3FHU0liM0RRRUJCUVVBTUg4eEN6QUpCZ05WQkFZVEFsVlRNUk13RVFZRFZRUUtEQXBCY0hCc1pTQkpibU11TVNZd0pBWURWUVFMREIxQmNIQnNaU0JEWlhKMGFXWnBZMkYwYVc5dUlFRjFkR2h2Y21sMGVURXpNREVHQTFVRUF3d3FRWEJ3YkdVZ2FWUjFibVZ6SUZOMGIzSmxJRU5sY25ScFptbGpZWFJwYjI0Z1FYVjBhRzl5YVhSNU1CNFhEVEE1TURZeE5USXlNRFUxTmxvWERURTBNRFl4TkRJeU1EVTFObG93WkRFak1DRUdBMVVFQXd3YVVIVnlZMmhoYzJWU1pXTmxhWEIwUTJWeWRHbG1hV05oZEdVeEd6QVpCZ05WQkFzTUVrRndjR3hsSUdsVWRXNWxjeUJUZEc5eVpURVRNQkVHQTFVRUNnd0tRWEJ3YkdVZ1NXNWpMakVMTUFrR0ExVUVCaE1DVlZNd2daOHdEUVlKS29aSWh2Y05BUUVCQlFBRGdZMEFNSUdKQW9HQkFNclJqRjJjdDRJclNkaVRDaGFJMGc4cHd2L2NtSHM4cC9Sd1YvcnQvOTFYS1ZoTmw0WElCaW1LalFRTmZnSHNEczZ5anUrK0RyS0pFN3VLc3BoTWRkS1lmRkU1ckdYc0FkQkVqQndSSXhleFRldngzSExFRkdBdDFtb0t4NTA5ZGh4dGlJZERnSnYyWWFWczQ5QjB1SnZOZHk2U01xTk5MSHNETHpEUzlvWkhBZ01CQUFHamNqQndNQXdHQTFVZEV3RUIvd1FDTUFBd0h3WURWUjBqQkJnd0ZvQVVOaDNvNHAyQzBnRVl0VEpyRHRkREM1RllRem93RGdZRFZSMFBBUUgvQkFRREFnZUFNQjBHQTFVZERnUVdCQlNwZzRQeUdVakZQaEpYQ0JUTXphTittVjhrOVRBUUJnb3Foa2lHOTJOa0JnVUJCQUlGQURBTkJna3Foa2lHOXcwQkFRVUZBQU9DQVFFQUVhU2JQanRtTjRDL0lCM1FFcEszMlJ4YWNDRFhkVlhBZVZSZVM1RmFaeGMrdDg4cFFQOTNCaUF4dmRXLzNlVFNNR1k1RmJlQVlMM2V0cVA1Z204d3JGb2pYMGlreVZSU3RRKy9BUTBLRWp0cUIwN2tMczlRVWU4Y3pSOFVHZmRNMUV1bVYvVWd2RGQ0TndOWXhMUU1nNFdUUWZna1FRVnk4R1had1ZIZ2JFL1VDNlk3MDUzcEdYQms1MU5QTTN3b3hoZDNnU1JMdlhqK2xvSHNTdGNURXFlOXBCRHBtRzUrc2s0dHcrR0szR01lRU41LytlMVFUOW5wL0tsMW5qK2FCdzdDMHhzeTBiRm5hQWQxY1NTNnhkb3J5L0NVdk02Z3RLc21uT09kcVRlc2JwMGJzOHNuNldxczBDOWRnY3hSSHVPTVoydG04bnBMVW03YXJnT1N6UT09IjsKCSJwdXJjaGFzZS1pbmZvIiA9ICJld29KSW05eWFXZHBibUZzTFhCMWNtTm9ZWE5sTFdSaGRHVXRjSE4wSWlBOUlDSXlNREV5TFRBM0xUSTBJREExT2pReE9qRTVJRUZ0WlhKcFkyRXZURzl6WDBGdVoyVnNaWE1pT3dvSkluQjFjbU5vWVhObExXUmhkR1V0YlhNaUlEMGdJakV6TkRNeE16TTJOemd3TURBaU93b0pJblZ1YVhGMVpTMXBaR1Z1ZEdsbWFXVnlJaUE5SUNJME5tWXdOekJqTURFeFpUQmtZVEUzWW1NeE5qaGhaVGxrTXprd01XUmpaamsyTVdZNFl6QTVJanNLQ1NKdmNtbG5hVzVoYkMxMGNtRnVjMkZqZEdsdmJpMXBaQ0lnUFNBaU1UQXdNREF3TURBMU16TTBNemt6TmlJN0Nna2laWGh3YVhKbGN5MWtZWFJsSWlBOUlDSXhNelF6TVRNMU5EYzRNREF3SWpzS0NTSjBjbUZ1YzJGamRHbHZiaTFwWkNJZ1BTQWlNVEF3TURBd01EQTFNek0wTXprek5pSTdDZ2tpYjNKcFoybHVZV3d0Y0hWeVkyaGhjMlV0WkdGMFpTMXRjeUlnUFNBaU1UTTBNekV6TXpZM09UQXdNQ0k3Q2draWQyVmlMVzl5WkdWeUxXeHBibVV0YVhSbGJTMXBaQ0lnUFNBaU1UQXdNREF3TURBeU5qRXlOalF3TXlJN0Nna2lZblp5Y3lJZ1BTQWlNUzR3SWpzS0NTSmxlSEJwY21WekxXUmhkR1V0Wm05eWJXRjBkR1ZrTFhCemRDSWdQU0FpTWpBeE1pMHdOeTB5TkNBd05qb3hNVG94T0NCQmJXVnlhV05oTDB4dmMxOUJibWRsYkdWeklqc0tDU0pwZEdWdExXbGtJaUE5SUNJMU5EYzFPVEkzTVRZaU93b0pJbVY0Y0dseVpYTXRaR0YwWlMxbWIzSnRZWFIwWldRaUlEMGdJakl3TVRJdE1EY3RNalFnTVRNNk1URTZNVGdnUlhSakwwZE5WQ0k3Q2draWNISnZaSFZqZEMxcFpDSWdQU0FpWTI5dExtaHZhUzUwWlhOMExuTmhiWEJzWlhCdlpXMTBlWEJsTG5OcGVHMXZiblJvY3lJN0Nna2ljSFZ5WTJoaGMyVXRaR0YwWlNJZ1BTQWlNakF4TWkwd055MHlOQ0F4TWpvME1Ub3hPQ0JGZEdNdlIwMVVJanNLQ1NKdmNtbG5hVzVoYkMxd2RYSmphR0Z6WlMxa1lYUmxJaUE5SUNJeU1ERXlMVEEzTFRJMElERXlPalF4T2pFNUlFVjBZeTlIVFZRaU93b0pJbUpwWkNJZ1BTQWlZMjl0TG1GdVoyeGxjaTVvYjJscGJtRndjSEIxY21Ob1lYTmxkR1Z6ZEdsdVp5STdDZ2tpY0hWeVkyaGhjMlV0WkdGMFpTMXdjM1FpSUQwZ0lqSXdNVEl0TURjdE1qUWdNRFU2TkRFNk1UZ2dRVzFsY21sallTOU1iM05mUVc1blpXeGxjeUk3Q2draWNYVmhiblJwZEhraUlEMGdJakVpT3dwOSI7CgkiZW52aXJvbm1lbnQiID0gIlNhbmRib3giOwoJInBvZCIgPSAiMTAwIjsKCSJzaWduaW5nLXN0YXR1cyIgPSAiMCI7Cn0"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:13:31.677

21002 is "The data in the receipt-data property was malformed.". This means the receipt data is not properly encoded. TEXT data type is the problem, you should store it as binary base 64 encoded.

okay I have links that you may found helpful. Use [this](http://www.chrismaddern.com/validate-app-store-iap-receipt-codes-online-tool/) to verify your receipt data. Check [this](https://stackoverflow.com/questions/7586094/in-app-purcahse-server-model) & [this](https://stackoverflow.com/questions/5240231/appstore-in-app-purchase-receipt-verification-issues) questions

# asp.net-mvc - 使用没有 JavaScript/JQuery 的 Session 在 MVC 中注销

> ID：11700463
> 
> 赞同：4
> 
> 时间：2012-07-28T11:07:49.747
> 
> 标签：asp.net-mvc

嗨，我对 MVC 3 比较陌生，我正在注销我的应用程序，我设法登录，即使网站在另一个选项卡上打开，也保持登录状态。

我所有的观点（当然除了家）都是这样的：

> `<a href = "@Url.Action("Index", "Home")">Logout</a>`

在我的控制器中，我有这个：

> `public ViewResult Logout() { Session.Abandon(); return View("Index", "Home"); }`

并且应用程序没有注销，而是返回当前视图。

请帮助我了解该怎么做，我想注意我使用的是 ViewResult 而不是 ActionResult，我也不会使用 JavaScript 或 JQuery，因为我正在制作这个应用程序来展示 MVC 的工作原理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:10:27.133

您不应该指向注销操作吗？

```
<a href = "@Url.Action("Logout", "Home")">Logout</a> 
```

假设您注销操作的路径是`\Home\Logout`

**更新：**

另一种老式的方法是..

登录成功后..

```
Session["Login"] = true; //or any object that describes the user's identity 
```

在您需要检查的每一页上

```
var login = Session["Login"];
if(Convert.ToBoolean(login)){ //or cast to your expected object
  //do something
}
else{
  //redirect to logout/login page
} 
```

注销时，

```
Session["Login"] = null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T13:32:51.730

如果您使用表单身份验证，您还应该清除身份验证 cookie 并在注销后重定向：

```
public ActionResult Logout() 
{ 
    Session.Abandon(); 
    FormsAuthentication.SignOut();
    return RedirectToAction("Index", "Home"); 
} 
```

# coffeescript - Coffeescript / Zappajs 如何传递要渲染的数组

> ID：11700471
> 
> 赞同：0
> 
> 时间：2012-07-28T11:08:34.113
> 
> 标签：coffeescript, coffeekup

这是一个 zappajs/coffeescript 新手问题，我尝试编写一个从 mysql 收集并使用 div 而不是表呈现结果的脚本，到目前为止只有一行。我的问题如何传递整个结果数组以使用模板输出？下面的代码示例，欢迎任何批评，谢谢：

```
@post '/', (req, res) ->    #POST FOR SHOWSTOCK
  MysqlConnection = mysql.createConnection(
    ...
  )
  MysqlConnection.connect()
  .... 
    else
      sql = "select art.artcode,art.artname, art.artsonst, groessen.colcode,groessen.artgrb,groessen.artwidth,groessen.artist,date_format(artoffdate,'%d-%m-%y') as mydate, groessen.soreason from groessen,art where groessen.artcode = art.artcode and  art.artcode = " + MysqlConnection.escape(req.body.art.artcode)
      MysqlConnection.query sql, (err, rows) ->
        throw err if err
        ... 
        exports.art = rows
        ...
  MysqlConnection.end
  @redirect '/showstock'  # 'back' or 'home'= "/"

@get '/': ->     
  @render index: {
     }

@view index: ->    
  h1 img src: '/BW_AL_Logo_Blue.jpg', align:'left', alt:'Logo' , width:240, height:120, top:25, left:370 ,position:'absolute'
  h2 style: "font-family:sans-serif;;position: absolute; top: 10px; width: 250px; left: 350px; height: 25px; background-color: white", 'XYZ Stock Information'
  form method: "post", action: "/", ->
    div "#Artcode", style: "position: absolute; top:60px; left:680px; width: 121px; height: 21px;", ->
      input type: "text", name:"art[artcode]"
    div "#Submit", style: "position: absolute; top:60px; left: 840px; width: 121px; height: 21px;", ->
      input type: "submit", value: "Submit"

@get '/showstock': ->    
  @render showstock: {
     artname0: exports.art[0].artname
     ... 
     }

@view showstock: ->    
  h1 img src: '/BW_AL_Logo_Blue.jpg', align:'left', alt:'Logo' , width:240, height:120, top:25, left:370 ,position:'absolute'
  ...
  div style: "position: absolute; left: 10px; top: 195px; height: 400px; width:1200px; padding: 2px; border:2px solid gray;",->
    div "#colcode", style: "height: 3px;width:90px;float:left;",->
      b "COLOUR"
      br()
      @colcode0
    div ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:36:55.320

以下是如何将变量传递和使用到视图函数（来自[http://zappajs.org/docs/crashcourse/](http://zappajs.org/docs/crashcourse/)）：

```
@get '/': ->
  @render index: {foo: 'bar'}

@view index: ->
  @title = 'Inline template'
  h1 @title
  p @foo 
```

至于迭代结果集中的行，您必须执行以下操作：

```
@view index: ->
  for row in @foo.rows
    div '', "#{row.itemno}: #{row.itemname}" 
```

确切的细节取决于您使用的模板引擎（根据您编写的内容，看起来像 Coffeecup）。请记住，Coffeecup 模板实际上只是带有许多便利函数（与 HTML 标记命名相同）和一些渲染“子树”的约定（通过传递渲染子树的函数）的 Coffeescript 代码。因此，要遍历数据对象，您只需编写 Coffeescript 代码即可，调用 Coffeecup 便捷方法来生成 html 文本。

假设您的数据集可能很大，使用浏览器重定向（如您的代码所示）并不是将数据从一个视图传递到另一个视图的正确方法。

如果您将“showstock”函数中的代码重构为普通成员函数，传递任何请求/响应变量（我看到 Zappa 隐含地传递了这些变量，但我对 Zappa 的了解不够，无法提供准确的答案）和 rows 对象，只需让该函数返回呈现的文本。通过从“/”处理程序和“/showstock”处理程序调用此方法，您应该能够处理不同的用例，而无需复制代码或尝试将大量数据对象作为 HTTP 数据对象传递。

# haskell - 在 OS X Mountain Lion 上构建“文本”库失败

> ID：11700472
> 
> 赞同：3
> 
> 时间：2012-07-28T11:08:36.157
> 
> 标签：haskell, osx-mountain-lion, cabal-install

我正在尝试`text`在 OS X 10.8（Mountain Lion）上构建库，但出现以下错误：

```
beta@lucy:/tmp/text-0.11.2.2 ☺ $ cabal configure 
Resolving dependencies...
Configuring text-0.11.2.2...

/var/folders/2h/9h8d4hb57cl65ww61yxtkmv00000gn/T/4266.c:1:12:
     warning: control reaches end of non-void function [-Wreturn-type]
int foo() {}
           ^
1 warning generated.
beta@lucy:/tmp/text-0.11.2.2 ☺ $ cabal build    
Building text-0.11.2.2...
Preprocessing library text-0.11.2.2...

Data/Text.hs:6:52:  warning: missing terminating ' character
-- Copyright   : (c) 2009, 2010, 2011, 2012 Bryan O'Sullivan,
                                                   ^

Data/Text.hs:87:12:
     warning: missing terminating ' character
        , foldl'
               ^

     [snip]
                                         ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
27 warnings and 20 errors generated. 
```

我正在使用 GHC 7.4.2。安装了以下版本的 gcc/llvm-gcc（通过 XCode 的命令行工具）：

`gcc`：

```
beta@lucy:/tmp/text-0.11.2.2 ☹ $ which gcc
/usr/bin/gcc
beta@lucy:/tmp/text-0.11.2.2 ☺ $ gcc -v   
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~28/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~28/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00) 
```

`llvm-gcc`：

```
beta@lucy:/tmp/text-0.11.2.2 ☺ $ which llvm-gcc
/usr/bin/llvm-gcc
beta@lucy:/tmp/text-0.11.2.2 ☺ $ llvm-gcc -v
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~28/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~28/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00) 
```

任何指向问题可能是什么的指针？其他人可以`text`在 Mountain Lion 上进行构建吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-06T18:33:27.427

我在 10.8.5 上安装 PAKCS 时也遇到了这个问题。

我的解决方案是

1.  安装苹果 gcc-4.2
    `brew install apple-gcc42`
2.  编辑 /usr/bin/ghc 并更改 pgmgcc 如下
    `pgmgcc="/usr/local/bin/gcc-4.2"`
3.  通过参考[什么是没有“阴谋集团升级”的最佳解决方法的答案来重建所有软件包？](https://stackoverflow.com/questions/6905163/whats-the-best-workaround-for-not-having-cabal-upgrade/6905267#6905267)

最后，我可以完成我的`text`包安装。

希望你玩的开心！

另请参阅： [Cabal 在 Mac OS X Lion 上不起作用，因为 gcc 路径](https://stackoverflow.com/questions/9387983/cabal-doesnt-work-on-mac-os-x-lion-because-of-gcc-path)

# android - 未显示自己应用程序的 Android 地图

> ID：11700474
> 
> 赞同：0
> 
> 时间：2012-07-28T11:08:40.627
> 
> 标签：android, android-mapview, api-key

我的 android 应用程序有一个奇怪的问题。我实现了地图，我得到了应该完成的 api-key，将它插入到我的应用程序中......当我通过 Eclipse 直接在手机上启动应用程序时，它可以工作。当我将应用程序导出到 apk 并将其传递给朋友以便在其他手机上进行测试时，地图永远不会显示并且应用程序崩溃，因为 mapController 为 null：

```
07-24 14:52:07.425: E/AndroidRuntime(4107): FATAL EXCEPTION: main
07-24 14:52:07.425: E/AndroidRuntime(4107): java.lang.NullPointerException
07-24 14:52:07.425: E/AndroidRuntime(4107):     at com.google.android.maps.MapController.animateTo(MapController.java:232)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at com.google.android.maps.MapController.animateTo(MapController.java:203)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at com.emaborsa.cablePark.activities.MainActivity$5.onItemClick(MainActivity.java:492)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at com.emaborsa.cablePark.popUpMenu.MapPopupMenu$1.onClick(MapPopupMenu.java:163)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at android.view.View.performClick(View.java:4084)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at android.view.View$PerformClick.run(View.java:16966)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at android.os.Handler.handleCallback(Handler.java:615)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at android.os.Looper.loop(Looper.java:137)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at java.lang.reflect.Method.invokeNative(Native Method)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at java.lang.reflect.Method.invoke(Method.java:511)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-24 14:52:07.425: E/AndroidRuntime(4107):     at dalvik.system.NativeStart.main(Native Method) 
```

编码：

```
public class MainActivity extends MapActivity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.e("Log", "onCreate()");

    this.application = (CableParkApplication) getApplication();
    database = new DatabaseManager(getApplicationContext());

    if (getWindowManager().getDefaultDisplay().getRotation() == VERTICAL) {
        setContentView(R.layout.main_v);
    } else {
        setContentView(R.layout.main_h);
    }

    if (savedInstanceState != null) {
        this.currentView = savedInstanceState.getInt(CURRENT_VIEW);
        this.mapType = savedInstanceState.getBoolean(MAP_TYPE);
        this.country = savedInstanceState.getString(COUNTRY);
        showMapMenu((LinearLayout) ((ImageView) mapViewContainer.findViewById(R.id.map_menu_open)).getParent());
    }

    initViews();

    myLocationOverlay = new MyLocationOverlay(getApplicationContext(), mapView);
    mapView.getOverlays().add(myLocationOverlay);
    mapHandler = new MapHandler(this, mapView);
    mapHandler.initMap(mapType);
    addListeners();

    showActualFrame();

}

protected void initViews() {
    // initializes main view
    mainView = (LinearLayout) findViewById(R.id.mainView);
    LinearLayout main_view_vertical = (LinearLayout) getLayoutInflater().inflate(R.layout.mainview_v, null);
    mainView.addView(main_view_vertical);

    // initializes search view
    searchMainView = (LinearLayout) findViewById(R.id.searchView);
    LinearLayout search_view_vertical = (LinearLayout) getLayoutInflater().inflate(R.layout.searchview_v, null);
    searchMainView.addView(search_view_vertical);
    searchTextCountry = (TextView) findViewById(R.id.selectCountry);
    selectCountryFlag = (ImageView) searchMainView.findViewById(R.id.selectCountryFlag);
    searchEditTextKey = (EditText) findViewById(R.id.searchEditTextKey);
    searchTextView = (TextView) findViewById(R.id.searchTextView);
    searchButton = (LinearLayout) findViewById(R.id.searchButton);

    if (country != null && !country.equals("")) {
        searchTextCountry.setText(country);
        String flag = country.toLowerCase().replace(" ", "");
        int resId = getResources().getIdentifier(flag, "drawable", CableParkApplication.PACKAGE);
        selectCountryFlag.setImageResource(resId);
    }

    // initializes diary view
    diaryMainView = (LinearLayout) findViewById(R.id.diaryView);
    LinearLayout diary_view_vertical = (LinearLayout) getLayoutInflater().inflate(R.layout.diaryview_v, null);
    diaryMainView.addView(diary_view_vertical);

    // initializes map(container) view
    mapViewContainer = (LinearLayout) findViewById(R.id.mapViewContainer);
    LinearLayout map_view_container_vertical = (LinearLayout) getLayoutInflater().inflate(R.layout.mapviewcontainer_v, null);
    mapViewContainer.addView(map_view_container_vertical);
    mapView = (MapView) findViewById(R.id.mapView);

    if (!application.isLoaded()) {
        application.setLoaded(true);
        Animation myFadeInAnimation = AnimationUtils.loadAnimation(this, R.anim.fadein);
        myFadeInAnimation.setAnimationListener(new SplashAnimation(MainActivity.this, getWindowManager().getDefaultDisplay()
                .getRotation()));
        mainView.startAnimation(myFadeInAnimation);
    } else {
        findViewById(R.id.buttonsLayout).setVisibility(View.VISIBLE);
        findViewById(R.id.id).setVisibility(View.INVISIBLE);
    }

    // initializes bottom buttons
    searchImageLayout = (LinearLayout) findViewById(R.id.searchImageLayout);
    mapImageLayout = ((LinearLayout) findViewById(R.id.mapImageLayout));
    diaryImageLayout = ((LinearLayout) findViewById(R.id.diaryImageLayout));

}

private void addListeners() {

    searchButton.setOnTouchListener(new View.OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                searchButton.setBackgroundResource(R.drawable.singlebuttondown);
                searchTextView.setTextColor(Color.YELLOW);
                return true;
            } else if (event.getAction() == MotionEvent.ACTION_UP) {
                searchButton.setBackgroundResource(R.drawable.singlebutton);
                searchTextView.setTextColor(getResources().getColor(R.color.gray));
                if (doSearch()) {
                    showSearchResult();
                    hideSoftPad();
                    showMap(null);
                } else {
                    showNoResultDialog();
                }
                return true;
            }
            return false;
        }
    });

    searchEditTextKey.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            if (searchEditTextKey.getText().toString().equals("....?")) {
                searchEditTextKey.setText("");
            }
        }
    });

    searchEditTextKey.setOnEditorActionListener(new TextView.OnEditorActionListener() {

        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if (actionId == EditorInfo.IME_ACTION_SEARCH) {
                if (doSearch()) {
                    showSearchResult();
                    hideSoftPad();
                    showMap(null);
                } else {
                    showNoResultDialog();
                }
                return true;
            }
            return false;
        }
    });

}

protected void showActualFrame() {

    switch (currentView) {
    case SEARCH:
        showSearch(searchMainView);
        break;
    case MAP:
        showMap(mapView);
        break;
    case DIARY:
        showDiary(diaryMainView);
        break;
    default:
        showFrame(mainView);
    }
}

@Override
protected void onResume() {
    Log.e("Log", "onResume()");
    broadcastReceiver = new MessageReceiver();
    IntentFilter inFilter = new IntentFilter();
    inFilter.addAction(CableParkApplication.CANCEL);
    inFilter.addAction(CableParkApplication.COUNTRY);
    inFilter.addAction(CableParkApplication.SINGLE_PARK);
    registerReceiver(broadcastReceiver, inFilter);
    super.onResume();
    myLocationOverlay.enableMyLocation();
    myLocationOverlay.enableCompass();
};

@Override
protected void onPause() {
    unregisterReceiver(broadcastReceiver);
    this.zoomLevel = mapView.getZoomLevel();
    this.mapCenter = mapView.getMapCenter();
    super.onPause();
    myLocationOverlay.disableMyLocation();
    myLocationOverlay.disableCompass();
    Log.e("Log", "onPause()");
}

// customized the onBackButton
@Override
public void onBackPressed() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Leave?").setCancelable(false).setMessage("Close the application?").setCancelable(true)
            .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    finish();
                }
            }).setNegativeButton("No", null);
    AlertDialog dialog = builder.create();
    dialog.show();
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

public void showSearch(View v) {
    mapView.removeAllViews();
    currentView = SEARCH;
    searchEditTextKey.setText("");
    setBackground(searchImageLayout);
    showFrame(searchMainView);
}

public void showMap(View v) {
    currentView = MAP;
    setBackground(mapImageLayout);
    showFrame(mapViewContainer);
    mapView.setVisibility(View.VISIBLE);
}

public void showDiary(View v) {
    mapView.removeAllViews();
    currentView = DIARY;
    setBackground(diaryImageLayout);
    showFrame(diaryMainView);
}

protected void showFrame(View view) {
    mainView.setVisibility(View.INVISIBLE);
    mapView.setVisibility(View.INVISIBLE);
    mapViewContainer.setVisibility(View.INVISIBLE);
    diaryMainView.setVisibility(View.INVISIBLE);
    searchMainView.setVisibility(View.INVISIBLE);
    view.setVisibility(View.VISIBLE);
}

protected void setBackground(LinearLayout layout) {
    searchImageLayout.setBackgroundResource(R.drawable.buttons);
    mapImageLayout.setBackgroundResource(R.drawable.buttons);
    diaryImageLayout.setBackgroundResource(R.drawable.buttons);
    layout.setBackgroundResource(R.drawable.buttonsdown);
}

private boolean doSearch() {
    String key = searchEditTextKey.getText().toString();
    String country = (String) searchTextCountry.getText();
    database.connectForReading();
    Vector<Park> parks = database.getParks(country, key);
    database.disconnect();
    application.setParkSearch(parks);
    return parks.size() > 0;
}

private void showSearchResult() {
    Vector<Park> parks = application.getParkSearch();
    mapHandler.drawGeopoints(parks);
    CenterGeoPointCalculator cgpc = new CenterGeoPointCalculator(parks);
    cgpc.calc();
    mapHandler.centerMap(cgpc, getWindowManager().getDefaultDisplay().getRotation());
    mapView.getController().animateTo(cgpc.getCenterPoint());

}

public void showCountriesDialog(View v) {
    searchTextCountry.setTextColor(Color.YELLOW);
    CountriesAdapter adapter = new CountriesAdapter(MainActivity.this, application.getCountries());
    dialog = new CountriesDialog(MainActivity.this, adapter);
    dialog.show();

}

public void showNoResultDialog() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("No parks found.\nTry another country or another search key.").setCancelable(false)
            .setNegativeButton("OK", null);
    AlertDialog alert = builder.create();
    alert.show();
}

private class MessageReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (action.equals(CableParkApplication.COUNTRY)) {
            country = intent.getStringExtra("country");
            searchTextCountry.setText(country);
            String flag = country.toLowerCase().replace(" ", "");
            int resId = context.getResources().getIdentifier(flag, "drawable", CableParkApplication.PACKAGE);
            selectCountryFlag.setImageResource(resId);
            searchTextCountry.setTextColor(Color.WHITE);
            dialog.dismiss();

        } else if (action.equals(CableParkApplication.COUNTRY)) {
            searchTextCountry.setTextColor(Color.WHITE);
            dialog.dismiss();

        } else if (action.equals(CableParkApplication.SINGLE_PARK)) {
            int parkId = intent.getIntExtra("park", -1);
            if (parkId > 0) {
                mapView.removeAllViews();
                Intent i = new Intent(context, SinglePark.class);
                i.putExtra("park", parkId);
                startActivity(i);
            }

        }
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    Log.e("Log", "onSaveInstanceState()");
    super.onSaveInstanceState(outState);
    if (popupMenu != null) {
        popupMenu.dismiss();
    }
    outState.putInt(CURRENT_VIEW, currentView);
    outState.putBoolean(MAP_TYPE, mapType);
    outState.putString(COUNTRY, (String) searchTextCountry.getText());
}

public void showMapMenu(View v) {
    mapView.removeAllViews();
    popupMenu = new MapPopupMenu(this);

    final ImageView mapMenuOpen = (ImageView) v.findViewById(R.id.map_menu_open);
    mapMenuOpen.setImageResource(R.drawable.menu_close);

    Drawable image = getResources().getDrawable(R.drawable.location);
    if (mapView.getZoomLevel() < 5
            || (myLocationOverlay.isMyLocationEnabled() && !mapHandler.isMyLocationVisible(application.getCurrentLocation()))) {
        MenuEntry myLocation = new MenuEntry(ID_MOVE_TO_ME, "Show", image);
        popupMenu.addActionItem(myLocation);

    } else if (myLocationOverlay.isMyLocationEnabled()) {
        MenuEntry hideLocation = new MenuEntry(ID_DISABLE_LOC, "Hide", image);
        popupMenu.addActionItem(hideLocation);

    } else {
        MenuEntry showLocation = new MenuEntry(ID_ENABLE_LOC, "Show", image);
        popupMenu.addActionItem(showLocation);
    }

    image = getResources().getDrawable(R.drawable.compass);
    if (myLocationOverlay.isCompassEnabled()) {
        MenuEntry hideCompass = new MenuEntry(ID_DISABLE_COMP, "Hide", image);
        popupMenu.addActionItem(hideCompass);

    } else {
        MenuEntry showCompass = new MenuEntry(ID_ENABLE_COMP, "Show", image);
        popupMenu.addActionItem(showCompass);

    }

    image = getResources().getDrawable(R.drawable.map_menu);
    if (mapHandler.getShownMap() == MapHandler.SATELLITE) {
        MenuEntry showMap = new MenuEntry(ID_SHOW_MAP, "Map", image);
        popupMenu.addActionItem(showMap);

    } else {
        MenuEntry showTraffic = new MenuEntry(ID_SHOW_TRAFFIC, "Hybrid", image);
        popupMenu.addActionItem(showTraffic);

    }

    popupMenu.setAnimStyle(MapPopupMenu.ANIM_GROW_FROM_RIGHT);

    // Set listener for action item clicked
    popupMenu.setOnActionItemClickListener(new MapPopupMenu.OnActionItemClickListener() {

        public void onItemClick(MapPopupMenu source, int pos, int actionId) {
            switch (actionId) {
            case ID_DISABLE_COMP:
                myLocationOverlay.disableCompass();
                break;

            case ID_ENABLE_COMP:
                myLocationOverlay.enableCompass();
                break;

            case ID_DISABLE_LOC:
                myLocationOverlay.disableMyLocation();
                break;

            case ID_ENABLE_LOC:
                myLocationOverlay.enableMyLocation();
                mapView.getController().animateTo(application.getCurrentLocation());//line 492 controller seems to be null...
                break;

            case ID_SHOW_MAP:
                mapType = mapHandler.showMap(MapHandler.MAP);
                break;

            case ID_SHOW_TRAFFIC:
                mapType = mapHandler.showMap(MapHandler.SATELLITE);
                break;

            case ID_MOVE_TO_ME:
                myLocationOverlay.enableMyLocation();
                mapView.getController().animateTo(application.getCurrentLocation());
                mapView.getController().setZoom(MapHandler.MYLOCATION_ZOOM);
                break;
            }
            mapMenuOpen.setImageResource(R.drawable.menu_open);

        }
    });

    popupMenu.setOnDismissListener(new MapPopupMenu.OnDismissListener() {

        public void onDismiss() {
            mapMenuOpen.setImageResource(R.drawable.menu_open);
        }
    });

    popupMenu.show(v, mapMenuOpen);
}

private void hideSoftPad() {
    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(searchEditTextKey.getWindowToken(), 0);
}

@Override
protected void onRestart() {
    mapView.getController().setZoom(zoomLevel);
    mapView.getController().setCenter(mapCenter);
    Log.e("Log", "onRestart()");
    super.onRestart();
} 
```

}

我的 getCurrentLocation() 方法：

```
public GeoPoint getCurrentLocation() {

    // Get the location manager
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    // Define the criteria how to select the locatioin provider -> use
    // default
    Criteria criteria = new Criteria();
    String provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    // Initialize the location fields
    if (location != null) {
        int lat = (int) (location.getLatitude() * 1E6);
        int lng = (int) (location.getLongitude() * 1E6);
        return new GeoPoint(lat, lng);
    } else {
        return null;
    }
} 
```

...如果该方法返回 null，我理解异常。但是它怎么会在我的手机上返回一些东西，而在所有其他手机上返回 null 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:16:50.657

“因为 mapController 在 null”——不，不是。您可以通过阅读堆栈跟踪来判断这一点。如果你`MapController`是`null`，你不可能`animateTo()`在`MapController`. *指*`animateTo()`的是某物。*`null`*

 *最有可能`null`抱怨`animateTo()`的是传入的参数值，`application.getCurrentLocation()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:12:22.043

要在您导出**签名 APK**的设备上显示地图，您需要使用**release key生成****MAP API**密钥。

 **仔细阅读[本](http://samir-mangroliya.blogspot.in/p/android-map-api-key.html)教程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T12:02:57.667

**[1]**首先，在 MainActivity 中将**您的应用程序声明为 Global**

```
public class MainActivity extends MapActivity {

    public Application application;  // <---------- DECLARE IT HERE

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) { 
```

**[2]**然后将所有其他需要的对象声明为 Global

**[3]**然后将检查条件放在第 492 行，它为哪个对象提供 NullPointerException 作为

```
If(null == mapView)
    System.out.println("mapView NULL");
If(null == application)
    System.out.println("application NULL"); 
```

**[4]**对 Null Found Object 进行必要的更改。***

# git - 如何管理样板，以及使用 git 在其上构建的项目？

> ID：11700476
> 
> 赞同：1
> 
> 时间：2012-07-28T11:08:49.910
> 
> 标签：git, boilerplate

我有一个基于我也创建的样板系统的项目。

目前我有一个单一的仓库，其中包含样板和项目的分支。然而：

*   我想让只对项目（而不是样板）感兴趣的人远离样板，理想情况下，将项目放在与样板不同的仓库中。
*   我仍然想在项目发生时引入样板更新。

我对 git 子模块很满意，但由于样板和应用程序彼此处于“同一级别” - 这是一种叠加关系，而不是父/子关系 - 我不确定管理这个的最佳方法. 类似的项目是做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:13:27.993

> 因为样板和应用程序彼此处于“同一级别” - 这是一种叠加关系，而不是父/子关系

这意味着分支，而不是子模块。

而且由于您想在样板和应用程序之间保持清晰的分离，这意味着 2 个 repo。

*   一个公众，只有应用程序。
*   一个私人（仅供您使用），两个分支机构都可用。

您可以克隆第二个，将第一个添加为远程，然后只将应用分支推送到它。

# mysql - 如何通过读取和循环遍历所有行来更新？

> ID：11700477
> 
> 赞同：1
> 
> 时间：2012-07-28T11:09:01.813
> 
> 标签：mysql

下面是一个示例结构：

```
table `pligg`
#id   #alpha     #num
1       a        null
2       b        null
3       c        null
4       a        null
5       d        null
6       b        null
7       a        null
8       e        null 
```

我想在一个 mysqli 查询之后像这样更新数据库：

```
table `pligg`
#id   #alpha     #num
1       a        1
2       b        1
3       c        1
4       a        2
5       d        1
6       b        2
7       a        3
8       e        1 
```

我想要做的是`num`用重复的数量更新列。我试过这个查询，但徒劳无功

```
UPDATE pligg SET 'num' = COUNT(DISTINCT alpha) WHERE 'id'<id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T11:22:35.610

这应该可以解决问题：

```
UPDATE pligg a
INNER JOIN
(
    SELECT a.id, a.alpha, COUNT(1) AS dup_cnt
    FROM pligg a
    INNER JOIN pligg b ON a.id >= b.id AND a.alpha = b.alpha
    GROUP BY a.id, a.alpha
) b ON a.id = b.id
SET a.num = b.dup_cnt 
```

* * *

## [SQLFiddle 演示](http://sqlfiddle.com/#!2/b18b2/1/0)

# hibernate - Hibernate 中的每会话事务或每查询事务模式？

> ID：11700480
> 
> 赞同：0
> 
> 时间：2012-07-28T11:09:19.613
> 
> 标签：hibernate, exception, transactions, rollback

我们有一个 servlet 来服务许多并发请求，有时一些请求会抛出异常。我从 Hibernate 指南中看到了这个警告：

> “如果 Session 抛出异常，包括任何 SQLException，立即回滚数据库事务，调用 Session.close() 并丢弃 Session 实例。”

在我的真实场景中，一个请求对数据库进行了许多重要的更改，当我们发现异常时，我们必须回滚之前所做的所有更改。

因此，我们似乎必须实现每个请求的事务模式，而不是每个查询的事务，以确保所有更改都将被回滚。

这是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:15:02.810

这取决于您想要什么，但是是的，一般来说，您希望在请求的整个生命周期中都需要一个事务，并且您希望该请求的所有数据库操作都参与该事务。通常，这也意味着有一个会话绑定到请求。

# java - 在 Java 中将文本文件转换为 JSON

> ID：11700482
> 
> 赞同：0
> 
> 时间：2012-07-28T11:09:43.390
> 
> 标签：java, json

如何将文本文件转换为 Json 文件？我有一个原始 in.txt 文件，如下所示：

```
{“person”:{“name”:”AAAA”,”sid”:09328,”location”:”Sao Paulo”}}
{“person”:{“name”:”BBBBB”,”sid”:01934,”location”:”Brasilia”}} 
```

非常感谢一点帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-06T10:29:35.893

要转换 JSON 格式的文本文件，您可以在代码中使用 JACKSON OBJECT MAPPER jar。

创建一个简单的员工 pojo。我们将从文件中读取 JSON 字符串并将其映射到 Employee 类。

这是代码：

```
public class Employee {

private int empId;
private String name;
private String designation;
private String department;
private int salary;

public String toString(){
    StringBuilder sb = new StringBuilder();
    sb.append("************************************");
    sb.append("\nempId: ").append(empId);
    sb.append("\nname: ").append(name);
    sb.append("\ndesignation: ").append(designation);
    sb.append("\ndepartment: ").append(department);
    sb.append("\nsalary: ").append(salary);
    sb.append("\n************************************");
    return sb.toString();
}

public int getEmpId() {
    return empId;
}
public void setEmpId(int empId) {
    this.empId = empId;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getDesignation() {
    return designation;
}
public void setDesignation(String designation) {
    this.designation = designation;
}
public String getDepartment() {
    return department;
}
public void setDepartment(String department) {
    this.department = department;
}
public int getSalary() {
    return salary;
}
public void setSalary(int salary) {
    this.salary = salary;
} 
```

}

在 THIS POJO CLASS 之后 **最后这里是将 JSON 字符串值转换为 java 对象的示例**

```
import java.io.File;
import java.io.IOException; 
import org.codehaus.jackson.map.ObjectMapper; 
import com.java2novice.json.models.Employee;

public class JsonToObject {

public static void main(String a[]){

    ObjectMapper mapper = new ObjectMapper();
    try {
        File jsonInputFile = new File("C:\\jsonInput.txt");
        Employee emp = mapper.readValue(jsonInputFile, Employee.class);
        System.out.println(emp);

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
  }
} 
```

这里是您的 JSON 文件： **jsonInput.txt 文件包含以下 json 输入：**

```
 {
"empId": 1017,
"name": "Nagesh Y",
"designation": "Manager",
"department": "Java2Novice",
"salary": 30000
} 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:41:02.663

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:32:10.180

使用[这个](http://code.google.com/p/json-simple/)api，然后：

```
JsonParser parser = new JsonParser();
JsonObject o = (JsonObject)parser.parse(one_by_one_line_from_text_file); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-28T11:33:11.273

您的文本文件已包含有效的 JSON。

如果您的目标是获取 JSON 对象，您可能正在寻找[这个](http://www.json.org/javadoc/org/json/JSONObject.html#JSONObject%28java.lang.String%29)函数。

# markdown - 如何在降价表中添加换行符？

> ID：11700487
> 
> 赞同：371
> 
> 时间：2012-07-28T11:10:53.763
> 
> 标签：markdown

我在降价表中有以下单元格：

```
 |Something|Something else that's rather long|Something else| 
```

我希望能够在中间行插入一个中断，所以该列不是那么大。我怎样才能在 Markdown 中做到这一点？我需要改用 HTML 表格吗？

* * *

## 回答 #1

> 赞同：507
> 
> 时间：2012-08-25T05:03:30.157

使用 HTML 换行符 ( `<br />`) 在表格单元格中强制换行：

```
|Something|Something else<br />that's rather long|Something else| 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2015-10-10T08:42:59.610

当您导出到 HTML 时，使用`<br>`作品。但是，如果您也使用 pandoc 导出到 LaTeX/PDF，则应该使用[网格表](http://pandoc.org/README.html#extension-grid_tables)：

```
+---------------+---------------+--------------------+
| Fruit         | Price         | Advantages         |
+===============+===============+====================+
| Bananas       | first line\   | first line\        |
|               | next line     | next line          |
+---------------+---------------+--------------------+
| Bananas       | first line\   | first line\        |
|               | next line     | next line          |
+---------------+---------------+--------------------+ 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-12-24T12:59:08.407

使用`<br/>`. 例如：

```
Change log, upgrade version

Dependency | Old version | New version |
---------- | ----------- | -----------
Spring Boot | `1.3.5.RELEASE` | `1.4.3.RELEASE`
Gradle | `2.13` | `3.2.1`
Gradle plugin <br/>`com.gorylenko.gradle-git-properties` | `1.4.16` | `1.4.17`
`org.webjars:requirejs` | `2.2.0` | `2.3.2`
`org.webjars.npm:stompjs` | `2.3.3` | `2.3.3`
`org.webjars.bower:sockjs-client` | `1.1.0` | `1.1.1` 
```

网址：[https ://github.com/donhuvy/lsb/wiki](https://github.com/donhuvy/lsb/wiki)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-07-23T12:13:10.320

仅适用于那些试图在`Jira`. 只需`\\`在每一行的末尾添加，就会创建一个新行：

```
|Something|Something else \\ that's rather long|Something else| 
```

将呈现这个：

[![在此处输入图像描述](../Images/ffe3ccddff3daaf7ea6e23194ee67fa0.png)](https://i.stack.imgur.com/c5PXL.png)

资料来源：[Jira 上的文本中断](https://jira.atlassian.com/secure/WikiRendererHelpAction.jspa?section=breaks)

# symfony - 无法在 Symfony2 中嵌入模板

> ID：11700488
> 
> 赞同：0
> 
> 时间：2012-07-28T11:10:56.430
> 
> 标签：symfony

我想在**Symfony 2**中添加一些内容。我这样做如下：

```
{% embed "sub.html.twig" %}
{% block sourcecode %}
    <div class="tab-pane" id="5" name="textsource">
        <textarea id="source" class="span6"></textarea>
    </div>
{% endblock %}
{% endembed %} 
```

当我运行它时，它显示它无法找到`sub.html.twig`. 我应该怎么办？？在`sub.html.twig`我使用以下代码：

```
{% embed 'AcmeTaskBundle:Default:index.html.twig' with {} %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:40:44.360

请尝试改变

```
{% embed "sub.html.twig" %} 
```

至

```
{% embed "AcmeTaskBundle:Default:sub.html.twig" %} 
```

# ruby - 使用 1.9 哈希语法运行 Metrical

> ID：11700492
> 
> 赞同：0
> 
> 时间：2012-07-28T11:11:30.083
> 
> 标签：ruby, ruby-1.9, metrical, ruby-parser

我想在我的全新 Rails 项目中使用 Metrical，使用 Ruby 1.9 哈希语法做一些事情

```
 before_filter :guest_user,     only: [:new, :create]
  before_filter :correct_user,   only: :destroy 
```

我得到这个错误：

```
/Users/xxx/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/racc/parser.rb:351:in `on_error':  (Racc::ParseError)
parse error on value ":" (tCOLON) 
```

我做了一些调查，发现 ruby​​_parser gem 不支持 1.9 哈希语法（[请参阅 github 问题](https://github.com/seattlerb/ruby_parser/issues/39)） - 不知道哪个版本指的是我试图将 ruby​​_parser gem 更新到 2.3.1 不起作用因为 metrical 中包含的一些代码质量工具需要 ruby​​_parser 2.0 版本。

有没有办法解决这个问题（除了回滚到旧语法）？我也有点困惑，因为一些代码质量工具似乎已经过时了，检查[RubyToolBox](https://www.ruby-toolbox.com/categories/code_metrics)证实了这种印象。还是我在这里遗漏了一些基本的东西？

（这是我的 Gemfile.lock 供参考）：

```
 GEM
      remote: https://rubygems.org/
      specs:
        Saikuro (1.1.0)
        actionmailer (3.2.6)
          actionpack (= 3.2.6)
          mail (~> 2.4.4)
        actionpack (3.2.6)
          activemodel (= 3.2.6)
          activesupport (= 3.2.6)
          builder (~> 3.0.0)
          erubis (~> 2.7.0)
          journey (~> 1.0.1)
          rack (~> 1.4.0)
          rack-cache (~> 1.2)
          rack-test (~> 0.6.1)
          sprockets (~> 2.1.3)
        activemodel (3.2.6)
          activesupport (= 3.2.6)
          builder (~> 3.0.0)
        activerecord (3.2.6)
          activemodel (= 3.2.6)
          activesupport (= 3.2.6)
          arel (~> 3.0.2)
          tzinfo (~> 0.3.29)
        activeresource (3.2.6)
          activemodel (= 3.2.6)
          activesupport (= 3.2.6)
        activesupport (3.2.6)
          i18n (~> 0.6)
          multi_json (~> 1.0)
        addressable (2.2.8)
        arel (3.0.2)
        arrayfields (4.7.4)
        awesome_print (1.0.2)
        bcrypt-ruby (3.0.1)
        bootstrap-sass (2.0.4.0)
        bootstrap-will_paginate (0.0.7)
          will_paginate
        builder (3.0.0)
        capybara (1.1.2)
          mime-types (>= 1.16)
          nokogiri (>= 1.3.3)
          rack (>= 1.0.0)
          rack-test (>= 0.5.4)
          selenium-webdriver (~> 2.0)
          xpath (~> 0.1.4)
        childprocess (0.3.4)
          ffi (~> 1.0, >= 1.0.6)
        chronic (0.3.0)
        churn (0.0.13)
          chronic (>= 0.2.3)
          hirb
          json_pure
          main
          ruby_parser (~> 2.0.4)
          sexp_processor (~> 3.0.3)
        coffee-rails (3.2.2)
          coffee-script (>= 2.2.0)
          railties (~> 3.2.0)
        coffee-script (2.2.0)
          coffee-script-source
          execjs
        coffee-script-source (1.3.3)
        colored (1.2)
        cucumber (1.2.1)
          builder (>= 2.1.2)
          diff-lcs (>= 1.1.3)
          gherkin (~> 2.11.0)
          json (>= 1.4.6)
        cucumber-rails (1.3.0)
          capybara (>= 1.1.2)
          cucumber (>= 1.1.8)
          nokogiri (>= 1.5.0)
        database_cleaner (0.7.2)
        diff-lcs (1.1.3)
        erubis (2.7.0)
        execjs (1.4.0)
          multi_json (~> 1.0)
        factory_girl (3.5.0)
          activesupport (>= 3.0.0)
        factory_girl_rails (3.5.0)
          factory_girl (~> 3.5.0)
          railties (>= 3.0.0)
        faker (1.0.1)
          i18n (~> 0.4)
        fattr (2.2.1)
        ffi (1.1.0)
        flay (1.4.3)
          ruby_parser (~> 2.0)
          sexp_processor (~> 3.0)
        flog (2.5.3)
          ruby_parser (~> 2.0)
          sexp_processor (~> 3.0)
        gherkin (2.11.1)
          json (>= 1.4.6)
        growl (1.0.3)
        guard (1.2.3)
          listen (>= 0.4.2)
          thor (>= 0.14.6)
        guard-rspec (1.2.0)
          guard (>= 1.1)
        guard-spork (1.1.0)
          guard (>= 1.1)
          spork (>= 0.8.4)
        hike (1.2.1)
        hirb (0.7.0)
        i18n (0.6.0)
        journey (1.0.4)
        jquery-rails (2.0.2)
          railties (>= 3.2.0, < 5.0)
          thor (~> 0.14)
        json (1.7.3)
        json_pure (1.7.3)
        launchy (2.1.0)
          addressable (~> 2.2.6)
        libwebsocket (0.1.4)
          addressable
        listen (0.4.7)
          rb-fchange (~> 0.0.5)
          rb-fsevent (~> 0.9.1)
          rb-inotify (~> 0.8.8)
        mail (2.4.4)
          i18n (>= 0.4.0)
          mime-types (~> 1.16)
          treetop (~> 1.4.8)
        main (4.7.1)
        map (6.2.0)
        metric_fu (2.1.1)
          Saikuro (>= 1.1.0)
          activesupport (>= 2.0.0)
          chronic (~> 0.3.0)
          churn (>= 0.0.7)
          flay (>= 1.2.1)
          flog (>= 2.3.0)
          rails_best_practices (>= 0.6.4)
          rcov (>= 0.8.3.3)
          reek (>= 1.2.6)
          roodi (>= 2.1.0)
          syntax
        metrical (0.1.0)
          metric_fu (~> 2.1.1)
          rcov (~> 0.9)
        mime-types (1.19)
        multi_json (1.3.6)
        nokogiri (1.5.5)
        pg (0.14.0)
        polyglot (0.3.3)
        progressbar (0.11.0)
        rack (1.4.1)
        rack-cache (1.2)
          rack (>= 0.4)
        rack-ssl (1.3.2)
          rack
        rack-test (0.6.1)
          rack (>= 1.0)
        rails (3.2.6)
          actionmailer (= 3.2.6)
          actionpack (= 3.2.6)
          activerecord (= 3.2.6)
          activeresource (= 3.2.6)
          activesupport (= 3.2.6)
          bundler (~> 1.0)
          railties (= 3.2.6)
        rails_best_practices (1.10.1)
          activesupport
          awesome_print
          colored
          erubis
          i18n
          progressbar
          sexp_processor
        railties (3.2.6)
          actionpack (= 3.2.6)
          activesupport (= 3.2.6)
          rack-ssl (~> 1.3.2)
          rake (>= 0.8.7)
          rdoc (~> 3.4)
          thor (>= 0.14.6, < 2.0)
        rake (0.9.2.2)
        rb-fchange (0.0.5)
          ffi
        rb-fsevent (0.9.1)
        rb-inotify (0.8.8)
          ffi (>= 0.5.0)
        rcov (0.9.11)
        rdoc (3.12)
          json (~> 1.4)
        reek (1.2.12)
          ripper_ruby_parser (~> 0.0.7)
          ruby2ruby (~> 1.2.5)
          ruby_parser (~> 2.0)
          sexp_processor (~> 3.0)
        ripper_ruby_parser (0.0.8)
          sexp_processor (~> 3.0)
        roodi (2.1.0)
          ruby_parser
        rspec (2.11.0)
          rspec-core (~> 2.11.0)
          rspec-expectations (~> 2.11.0)
          rspec-mocks (~> 2.11.0)
        rspec-core (2.11.1)
        rspec-expectations (2.11.1)
          diff-lcs (~> 1.1.3)
        rspec-mocks (2.11.1)
        rspec-rails (2.11.0)
          actionpack (>= 3.0)
          activesupport (>= 3.0)
          railties (>= 3.0)
          rspec (~> 2.11.0)
        ruby2ruby (1.2.5)
          ruby_parser (~> 2.0)
          sexp_processor (~> 3.0)
        ruby_parser (2.0.6)
          sexp_processor (~> 3.0)
        rubyzip (0.9.9)
        sass (3.1.20)
        sass-rails (3.2.5)
          railties (~> 3.2.0)
          sass (>= 3.1.10)
          tilt (~> 1.3)
        selenium-webdriver (2.25.0)
          childprocess (>= 0.2.5)
          libwebsocket (~> 0.1.3)
          multi_json (~> 1.0)
          rubyzip
        sexp_processor (3.0.10)
        simplecov (0.6.4)
          multi_json (~> 1.0)
          simplecov-html (~> 0.5.3)
        simplecov-html (0.5.3)
        spork (0.9.2)
        sprockets (2.1.3)
          hike (~> 1.2)
          rack (~> 1.0)
          tilt (~> 1.1, != 1.3.0)
        sqlite3 (1.3.6)
        syntax (1.0.0)
        thor (0.15.4)
        tilt (1.3.3)
        treetop (1.4.10)
          polyglot
          polyglot (>= 0.3.1)
        tzinfo (0.3.33)
        uglifier (1.2.6)
          execjs (>= 0.3.0)
          multi_json (~> 1.3)
        will_paginate (3.0.3)
        xpath (0.1.4)
          nokogiri (~> 1.3)

    PLATFORMS
      ruby

    DEPENDENCIES
      arrayfields
      bcrypt-ruby
      bootstrap-sass
      bootstrap-will_paginate
      capybara
      coffee-rails
      cucumber-rails
      database_cleaner
      factory_girl_rails
      faker
      fattr
      growl
      guard-rspec
      guard-spork
      jquery-rails
      launchy
      map
      metrical
      pg
      rails (= 3.2.6)
      rb-fsevent
      rspec-rails
      sass-rails
      simplecov
      spork
      sqlite3
      uglifier
      will_paginate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:07:20.043

在对这个问题进行了更多研究之后，并认为 ruby​​_parser 暂时不会更新（尽管观看[https://github.com/seattlerb/ruby_parser](https://github.com/seattlerb/ruby_parser)），我决定最终去替换讨厌的黑客我的 ruby​​ 使用旧语法散列。我为此编写了一个 rake 任务，这样可以很容易地在一次运行中替换它们，运行度量然后将它们恢复为它们漂亮的 1.9 哈希语法。

[https://github.com/bkleinen/hash-reverter](https://github.com/bkleinen/hash-reverter)

更新：显然，ruby_parser 将更新为 3.0.0 版本，但大多数工具依赖于旧版本。

# c - 堆相关问题

> ID：11700500
> 
> 赞同：0
> 
> 时间：2012-07-28T11:12:43.740
> 
> 标签：c, memory, heap-memory

我知道论坛有很多关于堆等的问题，但没有什么对我有这么大的帮助（除了理解为什么它不起作用）。

我有大量数据，当然堆也跟不上。我需要存储的数据只是整数。Malloc 很早就开始返回 null。

4 个大小数组：（由 malloc 分配）

*   875715
*   875715
*   875715
*   5105043 个单元格（但它是一个二维数组）

以下是我的问题：

1）要知道所需的内存数量，是：875715 * 3 * 4 + 5105043 * 4 = 62454492？（因为整数是 4）这是否意味着大约 62 MB？（对不起，如果它看起来很愚蠢）

2）我们如何知道可用堆的大小？有没有办法增加呢？

3）我有 3 个相同大小的数组，将它们合并到一个 2D 数组中是否有优势？例如，array[875715][3] 而不是 3 个不同的数组（当然，通过使用 malloc）

我使用 Window 7、64 位、8GB 的​​ RAM。

编辑：这是我为一维数组和二维数组的开头（第一级）所做的典型分配：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <string.h>

#define FILE_NAME "SCC.txt"
#define ARRAY_SIZE 875714

void getGgraph(int mode,int **graph,int *sizeGraph);
int sizeOfArray(int *array);
void getGraphSize(int mode,int *arr);
void runThroughGraph(int node,int **graph,int *exploredNode,int *magicalPath,int *sizeGraph);
void getMagicalPath(int *magicalPath,int **graph,int *sizeGraph);

    void main()
    {
        int i, *magicalPath,*sizeGraph, **graph;

        /* ------------- creation of the array sizeGraph ------------------ */ // contain the size of each level to initiate the array
        if ((sizeGraph =(int*) malloc((ARRAY_SIZE + 1) * sizeof(sizeGraph[0]))) == NULL) {
            printf("malloc of sizeGraph error\n");
            return;
        }
        memset(sizeGraph, 0, (ARRAY_SIZE + 1) * sizeof(sizeGraph[0]));

        /* ------------- create reverse G graph, this will be a 2D array ------------------ */
        if ((graph =(int**) malloc((ARRAY_SIZE + 1) * sizeof(*graph))) == NULL) {
            printf("malloc of graph error\n");
            return;
        }

        getGgraph(1,graph,sizeGraph);

    // [..... Some more code .....]
    // end of main()
    }

void getGgraph(int mode,int **graph,int *sizeGraph) {
    char int_string[40];
    char stringToAdd[10];
    FILE *integerFile = NULL;
    int i = 0, j = 0, n = 0,stCurrentInt, tail,head,*temp;

    getGraphSize(mode,sizeGraph);

    for (i = 0; i < (ARRAY_SIZE + 1); i++) {
        if ((graph[i] =(int*) malloc((ARRAY_SIZE + 1) * sizeof(graph[i][0]))) == NULL) {
// THIS IS WHERE IT STOPS (i = 594)
            printf("Malloc of graph[%d] error\n",i);
            return;
        }
    }

    if ((temp =(int*) malloc((ARRAY_SIZE + 1) * sizeof(temp[0]))) == NULL) {
        printf("malloc of temp in getGgraph function error\n");
        return;
    }
    memset(temp, 0, (ARRAY_SIZE + 1) * sizeof(temp[0]));

    if ((integerFile = fopen(FILE_NAME, "r")) != NULL) {
        while (fgets(int_string,40, integerFile) != NULL) {
                n = 0, i = 0, stCurrentInt = 0,head = 0; // initialisation

                while (int_string[n] != NULL)   {
                    if (int_string[n] == ' ') {
                        for (j = stCurrentInt; j < n; j++) {
                            stringToAdd[j - stCurrentInt] = int_string[j];
                        }
                        if (stCurrentInt == 0) // first integer is the index
                            tail = (int) atoi(stringToAdd);
                        else {
                            head = atoi(stringToAdd);
                            if (mode == 0) {
                                graph[tail][temp[tail]] = head;
                                temp[tail]++;
                            }
                            else if (mode == 1) {
                                graph[head][temp[head]] = tail;
                                temp[head]++;
                            }
                        }
                        for (j = 0; j < 10; j++) { // empty the string for next iteration
                            stringToAdd[j] = NULL;
                        }
                        stCurrentInt = n + 1;
                    }
                    n++;
                }

        }
        free(temp);
        fclose(integerFile);
    }
    else {
        printf("\n File missing in getGgraph.\n");
        return;
    }
}

void getGraphSize(int mode,int *arr) {
    char int_string[40],stringToAdd[10];
    FILE *integerFile = NULL;
    int i = 0, j = 0, n = 0,stCurrentInt,tail,head;

    if ((integerFile = fopen(FILE_NAME, "r")) != NULL) {
        while (fgets(int_string,40, integerFile) != NULL) {
                n = 0, i = 0, stCurrentInt = 0,head = 0; // initialisation
                while (int_string[n] != NULL)   {
                    if (int_string[n] == ' ') {
                        for (j = stCurrentInt; j < n; j++) {
                            stringToAdd[j - stCurrentInt] = int_string[j];
                        }
                        if (stCurrentInt == 0) // first integer is the index
                            tail = (int) atoi(stringToAdd);
                        else
                            head = atoi(stringToAdd);

                        for (j = 0; j < 10; j++) { // empty the string for next iteration
                            stringToAdd[j] = NULL;
                        }
                        stCurrentInt = n + 1;
                    }
                    n++;
                }
                if (mode == 0 && head != 0)
                    arr[tail]++;
                else if (mode == 1 && head != 0)
                    arr[head]++;
        }
    }
    else {
        printf("\n File missing in getGraphSize.\n");
        return;
    }
} 
```

EDIT2：我的程序实际上就像一个小输入的魅力。

[.....更多代码.....]：这是在问题之后。失败的 malloc 在 getGraph 中，所以我认为其余的都不相关。我稍后在程序中释放（）数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:29:42.910

1.  没有拿出计算器，也没有你的代码，你的分析看起来是正确的。
2.  HEAP 将根据需要增长，仅受[操作系统进程限制的限制。](http://blogs.msdn.com/b/calvin_hsia/archive/2010/09/27/10068359.aspx). 默认情况下，在 Windows 下，您不会获得更多的 2Gig。这是一个[更具体的链接](http://msdn.microsoft.com/en-us/library/wz223b1z.aspx)。
3.  没有显着优势。

在您的情况下，您最好通过调整内存分配算法来分配您需要的东西而不是更多。

# python - Python/Cython/C 和回调，使用 Cython 从 C 调用 Python 函数

> ID：11700501
> 
> 赞同：8
> 
> 时间：2012-07-28T11:12:50.457
> 
> 标签：python, c, function, callback, cython

我有以下问题。我们必须将回调函数传递给 C 代码。如果函数是同一个模块中的Cython函数，情况就很简单了

在赛通：

```
def callme(int x):
    c_callme(x, <int (*)(int)>&callbackme) 

cdef int callbackme(int x):
    print <int> x
    return <int>x 
```

在 C 中：

```
int c_callme(int x, int (*f)(int))
{
    printf("---%d\n",x);
    printf("--%d\n",f(x));
    return x;
} 
```

问题如下：我们想以最 Pythonic 的方式概括此代码，以便它也可以接受 Python 函数作为回调参数（当然，需要一些额外的层），以及来自另一个模块的 C/Cython 函数。我想，对于来自单独模块的 C/Cython 函数，必须获取这些函数的地址（转换为 long int？），对于 Python 函数，需要某个包装器

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-29T12:17:05.737

在此示例中，[从 Python 包装器中提取](https://github.com/saullocastro/cubature/blob/master/cubature/_cubature.pyx)到[Cubature 集成 C 库](http://ab-initio.mit.edu/wiki/index.php/Cubature)，将 Python 函数传递给具有由 给出的原型的 C 函数`cfunction`。您可以创建一个具有相同原型的函数，称为`cfunction_cb`（回调），并返回相同的类型，`int`在本例中）：

```
cdef object f
ctypedef int (*cfunction) (double a, double b, double c, void *args)

cdef int cfunction_cb(double a, double b, double c, void *args):
    global f
    result_from_function = (<object>f)(a, b, c, *<tuple>args)
    for k in range(fdim):
        fval[k] = fval_buffer[k]
    return 0 
```

调用 C 函数时，您可以使用 C 原型强制转换回调包装器：

```
def main(pythonf, double a, double b, double c, args): 
    global f
    f = pythonf
    c_function( <cfunction> cfunction_cb,
                double a,
                double b,
                double c,
                <void *> args ) 
```

在此示例中，还展示了如何通过 C 将参数传递给 Python 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:44:30.260

我认为最简单的方法是将 C 回调包装在

```
cdef class Callback(object):
    cdef int (*f)(int)        # I hope I got the syntax right...

    def __call__(int x):
        return self.f(x) 
```

因此您可以将这种类型的对象以及任何其他可调用对象传递给必须调用回调的函数。

然而，如果你必须从 C 调用回调，那么你应该给它传递一个额外的参数，即 Python 对象的可选地址，可能转换为 `void*。

（请不要*将*函数指针强制转换为`long`，否则您可能会得到未定义的行为。我不确定您是否可以安全地将函数指针强制转换为任何东西，甚至`void*`.）

# cocoa - 核心数据应用程序不保存我的数据，为什么？

> ID：11700502
> 
> 赞同：1
> 
> 时间：2012-07-28T11:12:56.387
> 
> 标签：cocoa, core-data, load, save

我正在编写我的第一个核心数据应用程序。出于某种原因，我的编辑在退出并重新启动应用程序后消失了。保存、关闭窗口和重新打开（不退出）会保留数据。如果我在 textedit 中打开保存的文件，我会看到我编辑的字段。在阅读过程中一定会出现问题。也许我忘了在某处更改设置？有人认识这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:53:23.107

更改模型对象后是否保存 NSManagedObjectContext？

尝试

```
NSError *error;

if (![myContext save:&error]) {
    // Handle error
} 
```

保存消息返回 BOOL 表示成功。您应该检查该值以查看保存是否成功。如果没有，您传入的 NSError 引用将包含有关保存可能失败的原因的信息。

如果您发布代码，我可能会提供进一步的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:27:54.877

阵列控制器应该打开“准备内容”。否则，加载不会填充数组，并且另一个保存会永久删除编辑！

# objective-c - Objective-C if 语句输入错误

> ID：11700506
> 
> 赞同：2
> 
> 时间：2012-07-28T11:13:42.480
> 
> 标签：objective-c, xcode

我是一位经验丰富的程序员，所以这种神秘的行为对我来说完全是个谜。

我有一个简单的`if`-statement，*只有*在两个布尔变量正好是`false`. 但是，`if`当只有其中一个是 时，出于某种原因输入了 - 语句`false`。

我的代码如下所示：

```
BOOL connected = [self connected];

NSLog(@"Connected to the internet: %@", connected ? @"YES" : @"NO");

BOOL notConnectedMessageShown = ((FOLDAppDelegate *)[[UIApplication sharedApplication] delegate]).notConnectedMessageShown;

NSLog(@"notConnectedMessageShown: %@", notConnectedMessageShown ? @"YES" : @"NO");

if (!connected && !notConnectedMessageShown);
{
    NSLog(@"Entering if statement");
} 
```

并`NSLog`打印以下内容：

```
"Connected to the internet: YES"
"notConnectedMessageShown: NO"
"Entering if statement" 
```

我真的不明白。既然第一个变量在第一位，那么根据我的编程技能应该跳过`true`整个-语句吗？`if`

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T11:17:45.563

你的末尾有一个分号`if`

```
if (!connected && !notConnectedMessageShown);  <<--- this ; is wrong 
```

这样，“真”条件的块就是空的，你的代码总是在它之后进入块。

应该是这样的：

```
if (!connected && !notConnectedMessageShown)  <<-- see here
{
   NSLog(@"Entering if statement");
} 
```

# c# - 您要求的报告需要水晶报告2008，vs2008的更多信息

> ID：11700512
> 
> 赞同：0
> 
> 时间：2012-07-28T11:14:51.037
> 
> 标签：c#, asp.net, visual-studio-2008

我在水晶报告中遇到问题。我正在向您发送我的 .aspx 页面和代码隐藏页面。事情是使用相同的代码，我在 vs2005、windowsxp 中发送它的工作良好。但刚才我们进入了 window7，我正在创建另一个一个现在它没有醒来。请给我建议。 **.aspx 代码：-**

```
<%@ Page Language="C#" AutoEventWireup="true" Culture="en-AU"  CodeFile="report1.aspx.cs" Inherits="report1" %>
<%@ Register Assembly="CrystalDecisions.Web,Version=10.5.3700.0,Culture=neutral,PublicKeyToken=692fbea5521e1304" 
Namespace="CrystalDecisions.Web" TagPrefix="CR" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Jumbo Bags Report Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div>
    <CR:CrystalReportViewer ID="CrystalReportViewer1"
       runat="server" 
       AutoDataBind="True" 
       Height="1116px" 
       ReportSourceID="CrystalReportSource1" 
       Width="887px" DisplayGroupTree="False" />
       <CR:CrystalReportSource ID="CrystalReportSource1" runat="server">
            <Report FileName="CR_rpt1.rpt">
            </Report>
        </CR:CrystalReportSource>
    </div></form>
</body></html> 
```

**代码隐藏页面：-**

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Shared;
using JumboBagsApp.Library;
public partial class report1 : System.Web.UI.Page
{
    private void setDBLOGONforREPORT(ConnectionInfo myconnectioninfo)
    {
        TableLogOnInfos mytableloginfos = new TableLogOnInfos();
        mytableloginfos = CrystalReportViewer1.LogOnInfo;
        foreach (TableLogOnInfo myTableLogOnInfo in mytableloginfos)
        {
            myTableLogOnInfo.ConnectionInfo = myconnectioninfo;
        }
    }
    protected void Page_Load(object sender, EventArgs e)

            ConnectionInfo myConnectionInfo = new ConnectionInfo();
            myConnectionInfo.ServerName = "xxxxxxxx";
            myConnectionInfo.DatabaseName = "xxxxx";
            myConnectionInfo.UserID = "xxx";
            myConnectionInfo.Password = "xxxxxxx";
            myConnectionInfo.Type = ConnectionInfoType.SQL;
            myConnectionInfo.IntegratedSecurity = false;

            setDBLOGONforREPORT(myConnectionInfo);
            ReportDocument reportDocument = new ReportDocument();
            ParameterField paramField = new ParameterField();
            ParameterFields paramFields = new ParameterFields();
            ParameterDiscreteValue paramDiscreteValue = new ParameterDiscreteValue();
            string scompany = "";
            string sempcode = "";
            string ssr_no = "";
            string sappln_no = "";
            if (Request.QueryString["comcode"] != null &&     Request.QueryString["comcode"].ToString() != "")
            {
                scompany = Request.QueryString["comcode"].ToString();
            }
            if (Request.QueryString["empcode"] != null && Request.QueryString["empcode"].ToString() != "")
            {
                sempcode = Request.QueryString["empcode"].ToString();
            }

            //DateTime dtSysdate4 = DateTime.Parse(txtfrom_date2.Text, CultureInfo.CreateSpecificCulture("en-AU"), DateTimeStyles.AssumeLocal);
            //string txtdate4 = dtSysdate3.ToString("yyyy/MM/dd");
            //string strcur_date4 = txtdate4;
            if (Request.QueryString["cur_date"] != null && Request.QueryString["cur_date"].ToString() != "")
            {
                sappln_no = Request.QueryString["cur_date"].ToString();
            }
            Library lib = new Library();
            //library lib = new library();
            DataTable dtdetailed = new DataTable();
            //dtdetailed = lib.GetDetaileddbySrno(sappln_no.Trim());
            if (sappln_no != "")
            {
                paramField = new ParameterField();
                paramField.Name = "@cur_date";
                paramDiscreteValue = new ParameterDiscreteValue();
                paramDiscreteValue.Value = sappln_no.Trim();
                paramField.CurrentValues.Add(paramDiscreteValue);
                paramFields.Add(paramField);
                CrystalReportViewer1.ParameterFieldInfo = paramFields;
                CrystalReportViewer1.RefreshReport;
            }
        else
        {
            Response.Write("SrNo Not Found");
            return;
        }
     }
} 
```

请给我建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:18:38.303

VS 2008 中 CrystalReportViewer 的 DisplayGroupTree 属性已过时。删除它。

您可以使用 ToolPanelView 属性设置为 ToolPanelViewType.GroupTree 或 ToolPanelViewType.ParameterPanel。

# javascript - 页面刷新后使用 cookie.js 在 div 上保持切换状态

> ID：11700513
> 
> 赞同：0
> 
> 时间：2012-07-28T11:14:53.653
> 
> 标签：javascript, jquery, html

我有一个简单的代码，它允许我在两个 div 之间切换，它们是两个子导航的包装（#sub-nav-wrap 是替代导航）。它们固定在浏览器的底部：

```
$(function(){
$('.button').click(function(){
    $('#sub-nav-wrapmin').toggle();
    $('#sub-nav-wrap').toggle();
  });   
}); 
```

我希望做的是保持每个 div 的状态与用户在页面刷新后选择的状态相同，即使单击新的子标题菜单也将保持不变，而不是诉诸默认状态。

html是这样的：

```
<!--- Main Sub Wrap --->
<div id="bottom-wrap">
<!-- Mini Sub Nav -->

<div id="sub-nav-wrapmin" class="snWrap divone">
        <div id="sn-contentmin">
            <div id="sn-likemin"></div> 
            <div id="sn-coffeesml"></div>
            <div id="sn-sharemin"></div>
            <div id="sn-commentsml"></div>
            <div id="toggle-barmin">
                    <div id="sn-sidebrdrmin"></div>
                    <div class="sn-toggle button"></div>
           </div>
              <ul class="sn-comicsmin menu">
                <li><a class="sn-comics" style="background-position: right top" href="#comic.html">Comic</a></li>
                <li><a class="sn-archive" href="#archive.html">Archive</a></li>
                <li><a class="sn-vote" href="#vote.html">Vote</a></li>
                <li><a class="sn-spotlight" href="#spotlight.html">Spotlight</a></li>
            </ul>
      </div>
</div>
<!-- Sub Nav -->
<div id="sub-nav-wrap" class="snWrap divtwo">
    <div id="sub-nav-container">
         <div id="sub-nav-content">

                <div id="sn-bnrlft"></div>
                <div id="sn-bnrrgt"></div>
                <div class="sn-dividelft"></div>
                <div class="sn-dividergt"></div>
                <div id="sn-likebg"></div>
                <div id="sn-coffeebtn">
                </div>
                <div id="sn-sharebtn"></div>
                <div id="sn-commentbtn"></div>    
                <div id="toggle-bar">
                    <div id="sn-sidebrdr"></div>
                    <div class="toggle button"></div>
                </div>            
        </div>
        <div id="sub-nav-brdr">
            <ul class="sub-nav-comics menu">
                <li><a class="comics" style="background-position: right top" href="#comic.html">Comic</a></li>
                <li><a class="archive" href="#archive.html">Archive</a></li>
                <li><a class="vote" href="#vote.html">Vote</a></li>
                <li><a class="spotlight" href="#spotlight.html">Spotlight</a></li>
            </ul>
        </div>
    </div>
</div> 
```

CSS是这样的：

```
#sub-nav-wrap {
    display: none;  
} 
```

这是我第一次问，我一直在绞尽脑汁想用这个网站上的其他类似代码让它工作，但没有任何效果。请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:05:41.657

你几乎做对了，只是写了很多多余的:)

```
$(function(){
    if($.cookie('submin_visible') == 'true') {
        $('#sub-nav-wrapmin').show();
        $('#sub-nav-wrap').hide();
    } else {
        $('#sub-nav-wrapmin').hide();
        $('#sub-nav-wrap').show();
    }

    $('.button').click(function(){
        $('#sub-nav-wrapmin').toggle();
        $('#sub-nav-wrap').toggle();

        var isVisible = $('#sub-nav-wrapmin').is(':visible').toString();
        $.cookie('submin_visible', isVisible);
    });
}); 
```

# joomla - 为什么 Joomla 2.5.6 中没有加载 CSS？

> ID：11700514
> 
> 赞同：0
> 
> 时间：2012-07-28T11:15:01.383
> 
> 标签：joomla, joomla2.5

我最近将我的 Joomla 网站从本地主机迁移到测试服务器，在完成数据库导入和配置（在 configuration.php 中）之后，css 似乎没有加载，尽管我可以看到 css 文件具有正确的权限 [ 644]。我所看到的只是未对齐的文本。

起初，我以为我的模板是自定义的，所以问题出在它上，但是当我登录管理员时，出现了同样的问题，尽管这里的文本似乎正确对齐。

我的网站的链接是：[www.wdwdi.com/calderoni](http://www.wdwdi.com/calderoni)

请协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:30:31.790

[使用AkeebaBackup](https://www.akeebabackup.com/)和相应的 Kickstart-Script再次尝试迁移。在我的使用中它从未失败过。这将节省您现在用于调试的时间。

# php - PHP 警告：file_get_contents 无法打开流：HTTP 请求失败！HTTP/1.0 400 错误请求

> ID：11700516
> 
> 赞同：0
> 
> 时间：2012-07-28T11:15:35.250
> 
> 标签：php, http

我在点击“http://Google.com”时收到以下错误“警告：file_get_contents 无法打开流：HTTP 请求失败！HTTP/1.0 400 错误请求”

```
 <?php
        $content = file_get_contents("http://www.google.com");
        if (strpos($http_response_header[0], "200")) { 
         echo "SUCCESS";
       } 
       else { 
              echo "FAILED";
            }
   ?> 
```

由于这个问题，我无法解析 URL。我正在使用 WAMP（Apache 版本-2.2.22，PHP 版本 5.4.3）。

采取的步骤：- 1.allow_url_fopen 在 php.ini 中启用 2.Tried 对 URL 进行编码 3.Even 使用 Curl php 函数遇到同样的问题。4.允许防火墙开启

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T11:24:14.973

```
$html = @file_get_html($url);   
if($html==FALSE) {
  echo 'error';
} else {
  echo 'success';
} 
```

在这里检查一下 $url 是 www.google.com.then 你得到正确的结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T11:22:03.163

请求实际上成功了，你在 $content 中有页面。但是你对成功进行了错误的测试。url 不返回 200，而是 302。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:24:11.410

这是因为它返回状态 302 (FOUND)

`echo $http_response_header[0];`// 返回 'HTTP/1.0 302 Found'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T11:24:46.780

某些服务器配置不允许使用`file_get_contents`(via `fopen`) 打开远程地址。您可能想要更改配置，但他更喜欢使用[cURL](http://www.php.net/curl)打开远程站点（更可靠且速度快 20 倍）的方法。

可以在[此处的 PHP 文档中找到一个快速而简单的示例](http://www.php.net/manual/en/function.fopen.php#55922)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-01-08T17:58:27.620

我和你有同样的问题。我在 Windows 7 上使用 WAMP，直到最终找到解决方案。

您需要确保在 php.ini 文件中取消注释 extension=php_openssl.dll

C:\wamp\bin\php 文件夹。如果您通过 WAMP 服务器菜单 PHP >> PHP 扩展设置 openssl，它不会影响 php.exe

希望这对你也有用。

# google-maps-api-3 - 如何通过谷歌地图 api 从可拖动路线中获取纬度

> ID：11700520
> 
> 赞同：1
> 
> 时间：2012-07-28T11:15:53.413
> 
> 标签：google-maps-api-3, routing, latitude-longitude, direction

是否有可能在可拖动路由期间我们可以沿路由方式获取纬度和经度值

如果有请给我一个链接或解决方案

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:53:38.610

1.  使用拖动事件。
2.  向路由添加监听器
3.  当 dragend 事件触发时，将点从路线中取出。

[如何遍历被拖动路线中的坐标的示例](http://www.geocodezip.com/v3_GoogleEx_directions-draggable2Xml.html)（查看 getPolylineXml 函数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-20T08:00:57.393

请参阅我的示例以获取路线中所有点的 LatLng

```
directionsRenderer.addListener("directions_changed", function() {             
  var lat = [];
  var lng = [];
  result = directionsRenderer.getDirections()               
  var myroute = result.routes[0];
  for (var i = 0; i < myroute.legs.length; i++) 
  {
    //console.log(myroute.legs[i].start_location.lat())
    lat[i] = myroute.legs[i].start_location.lat();
    lng[i] = myroute.legs[i].start_location.lng();
  }

    i=myroute.legs.length-1;
    lat[i+1] = myroute.legs[i].end_location.lat();
    lng[i+1] = myroute.legs[i].end_location.lng();

    console.log(lat)
    console.log(lng)                                
}); 
```

# objective-c - GDataXML -[CFString release]：消息发送到释放的实例

> ID：11700529
> 
> 赞同：1
> 
> 时间：2012-07-28T11:16:29.623
> 
> 标签：objective-c, ios, debugging, dealloc, gdataxml

最初我得到了一个令人讨厌的模糊**malloc：对象 0x6ad4590 的错误：双重释放**错误。
然后我按照[这篇文章](https://stackoverflow.com/a/7940254/1525229)中的建议得到了一个更有用的错误：**-[CFString release]: message sent to deallocated instance** and the following trace stack:

```
Alloc: Block address: 0x40bd6fe0 length: 32
Stack - pthread: 0xac4292c0 number of frames: 35
0: 0x34d22 in GMmalloc_zone_malloc_internal
1: 0x34ebb in GMmalloc_zone_malloc
2: 0x1610a88 in __CFAllocatorSystemAllocate
3: 0x1610a63 in CFAllocatorAllocate
4: 0x16108de in _CFRuntimeCreateInstance
5: 0x1612d13 in __CFStringCreateImmutableFunnel3
6: 0x161a4be in CFStringCreateWithBytes
7: 0xa6da69 in -[NSPlaceholderString initWithBytes:length:encoding:]
8: 0xa6d9bc in +[NSString stringWithUTF8String:]
9: 0x67e9 in -[GDataXMLNode stringFromXMLString:] at/Users/MyUserName/MyDirectory/MyApp/MyApp/GDataXMLNode.m:372
10: 0x6b27 in -[GDataXMLNode stringValue] at/Users/MyUserName/MyDirectory/MyApp/MyApp/GDataXMLNode.m:434
11: 0x165b4 in -[MyTableViewController continueGetSOAPData] at/Users/MyUserName/MyDirectory/MyApp/MyApp/../MyTableViewController.m:295
12: 0x17f53 in -[FVDashViewController connectionDidFinishLoading:] at/Users/MyUserName/MyDirectory/MyApp/MyApp/../MyTableViewController.m:582
13: 0xb70a49 in ___NSURLConnectionDidFinishLoading_block_invoke_0
14: 0xb6ee84 in __65-[NSURLConnectionInternal_withConnectionAndDelegate:onlyActive:]_block_invoke_0
15: 0xb6fea7 in -[NSURLConnectionInternalConnection invokeForDelegate:]
16: 0xb6ee3f in -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]
17: 0xb6efc5 in -[NSURLConnectionInternal _withActiveConnectionAndDelegate:]
18: 0xab3f5a in _NSURLConnectionDidFinishLoading
19: 0x3cdfa39 in_ZN19URLConnectionClient23_clientDidFinishLoadingEPNS_26ClientConnectionEventQueueE
20: 0x3dac596 in_ZN19URLConnectionClient26ClientConnectionEventQueue33processAllEventsAndConsumePayloadEP20ConnectionEventInfoI12XClientEvent18XClientEventParamsEl
21: 0x3dac861 in _ZN19URLConnectionClient26ClientConnectionEventQueue33processAllEventsAndConsumePayloadEP20XConnectionEventInfoI12XClientEvent18XClientEventParamsEl
22: 0x3cd6120 in _ZN19URLConnectionClient13processEventsEv
23: 0x3dac117 in _ZThn52_N25URLConnectionInstanceData24multiplexerClientPerformEv
24: 0x3cd5fbf in _ZN17MultiplexerSource7performEv
25: 0x16e094f in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__
26: 0x1643b43 in __CFRunLoopDoSources0
27: 0x1643424 in __CFRunLoopRun
28: 0x1642d84 in CFRunLoopRunSpecific
29: 0x1642c9b in CFRunLoopRunInMode
30: 0x15f57d8 in GSEventRunModal
31: 0x15f588a in GSEventRun
32: 0x16d626 in UIApplicationMain
33: 0x3e65 in main at /Users/MyUserName/MyDirectory/MyApp/MyApp/main.m:16
34: 0x24d5 in start 
```

我不是很擅长调试，所以我不知道该怎么做。有趣的是，我的代码中对应于跟踪堆栈第 10 行对 GDataXMLNode stringValue 的调用的行是一个 NSLog 语句：

```
NSLog(@"Element Name: %@", element.stringValue); 
```

如果我注释掉这一行，错误就会消失，但我认为这里有一个更大的问题，只是被掩盖了。任何帮助表示赞赏！

****EDIT**** 这里是 GDataXMLNode.h 中的相关函数（对应于跟踪堆栈行#9）：

```
// returns an autoreleased NSString*, from the current node's document strings
// cache if possible
- (NSString *)stringFromXMLString:(const xmlChar *)chars {

#if DEBUG NSCAssert(chars != NULL, @"GDataXMLNode sees an unexpected empty string");
#endif
if (chars == NULL) return nil;

  CFMutableDictionaryRef cacheDict = NULL;

  NSString *result = nil;

  if (xmlNode_ != NULL
    && (xmlNode_->type == XML_ELEMENT_NODE
        || xmlNode_->type == XML_ATTRIBUTE_NODE
        || xmlNode_->type == XML_TEXT_NODE)) {
    // there is no xmlDocPtr in XML_NAMESPACE_DECL nodes,
    // so we can't cache the text of those

    // look for a strings cache in the document
    //
    // the cache is in the document's user-defined _private field

    if (xmlNode_->doc != NULL) {

      cacheDict = xmlNode_->doc->_private;

      if (cacheDict) {

        // this document has a strings cache
        result = (__bridge_transfer NSString *) CFDictionaryGetValue(cacheDict, chars);
        if (result) {
          // we found the xmlChar string in the cache; return the previously
          // allocated NSString, rather than allocate a new one
          return result;
        }
      }
    }
  }

  // allocate a new NSString for this xmlChar*
  result = [NSString stringWithUTF8String:(const char *) chars];
  if (cacheDict) {
    // save the string in the document's string cache
    CFDictionarySetValue(cacheDict, chars, (__bridge_retained const void *) result);
  }

  return result;
} 
```

如果您返回跟踪堆栈，则上述函数中的这一行似乎导致了问题（参见跟踪堆栈第 8 行）：

```
 result = [NSString stringWithUTF8String:(const char *) chars]; 
```

# objective-c - ARC 似乎正在释放我的 NSViewController 的视图

> ID：11700530
> 
> 赞同：0
> 
> 时间：2012-07-28T11:16:49.327
> 
> 标签：objective-c, cocoa, automatic-ref-counting

我正在尝试解决一个更大的问题，并且我认为 ARC 显然过早地向我的 NSViewController 发布了视图。我认为 :) 所以我创建了一个简单的应用程序来重建这种情况。

我有一个简单的 ARC Cocoa 应用程序。在`MainMenu.xib`I 的窗口中，将 a`Custom View`连接到`@property (strong) IBOutlet NSView *theView;`在`AppDelegate.h`

在`AppDelegate.m`我综合属性然后调用以下：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    TestViewController *tvc =  [[TestViewController alloc] initWithNibName:@"TestViewController" bundle:nil];
    [_theView addSubview:[tvc view]];
} 
```

得到显示`TestViewController`在`Custom View`- 没问题。它包含一个 NSButton。它连接到一个名为的方法`-(IBAction)btnPressed:(id)sender`和一个 NSTextView，该方法也连接为`IBOutlet`.

在`TestViewController.h`我声明中：

```
@property (nonatomic, strong) IBOutlet NSTextField *textField;
@property (nonatomic, strong) NSString *theString;

-(IBAction)btnPressed:(id)sender; 
```

在`TestViewController.m`我然后做

```
@synthesize theString = _theString;
@synthesize textField = _textField;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Initialization code here.
        _theString = @"Hello World";
    }

    return self;
}

-(IBAction)btnPressed:(id)sender
{
    [_textField setStringValue:_theString];
} 
```

当我运行应用程序并按下按钮时，它会崩溃。如果我检查它是否有僵尸，我会收到以下信息：

```
#   Address Category    Event Type  RefCt   Timestamp   Size    Responsible Library Responsible Caller
0   0x7f97a3047560  TestViewController  Malloc  1   00:00.652.631   128 TestARC -[AppDelegate applicationDidFinishLaunching:]
1   0x7f97a3047560  TestViewController  Retain  2   00:00.653.088   0   TestARC -[TestViewController initWithNibName:bundle:]
2   0x7f97a3047560  TestViewController  Release 1   00:00.653.089   0   TestARC -[TestViewController initWithNibName:bundle:]
3   0x7f97a3047560  TestViewController  Retain  2   00:00.653.912   0   AppKit  -[NSNib instantiateNibWithOwner:topLevelObjects:]
4   0x7f97a3047560  TestViewController  Release 1   00:00.658.831   0   AppKit  -[NSNib instantiateNibWithOwner:topLevelObjects:]
5   0x7f97a3047560  TestViewController  Release 0   00:00.662.377   0   Foundation  -[NSNotificationCenter postNotificationName:object:userInfo:]
6   0x7f97a3047560  TestViewController  Zombie  -1  00:01.951.377   0   AppKit  -[NSApplication sendAction:to:from:] 
```

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:10:42.893

添加一个属性来保存视图控制器。在分配它的方法结束后，您的控制器目前没有任何东西可以让它保持活力。

添加：

```
@property (strong) TestViewController *tvc; 
```

调整：

```
self.tvc =  [[TestViewController alloc] initWithNibName:@"TestViewController" bundle:nil]; 
```

（我很好奇......如果你想要的只是它包含的视图，你认为创建视图控制器的意义是什么？）

* * *

关于一般方法，这似乎是应该使用容器视图控制器实现的更正确的行为。该机制允许多个视图控制器以有组织的方式共享屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:06:07.340

您需要添加一个 ivar 或属性来保存 TextViewController。目前，对它的唯一引用是在结束时消失，`applicationDidFinishLaunching:`这会导致它被释放。

这很糟糕，因为您的按钮需要控制器在附近来处理按钮按下。视图不会保留它的控制器，因为这会导致保留周期。因此，如果您不希望按钮与已释放的对象通信，则您有责任保持控制器在身边。

# iphone - 为什么要使用像 CGRectMake 这样的函数？

> ID：11700535
> 
> 赞同：19
> 
> 时间：2012-07-28T11:17:37.827
> 
> 标签：iphone, objective-c, cocoa-touch, core-graphics, compound-literals

我很好奇为什么像 CGRectMake 和 CGPointMake 这样的函数存在并且被广泛使用。相反，您可以这样做：

```
(CGRect){{x, y}, {width, height}} 
```

由于没有函数调用，这肯定会更有效（尽管我猜不是很多）？

您还可以设置原点和大小，如：

```
 (CGRect){origin, size} 
```

并作为混合物：

```
 (CGRect){origin, {width, height}} 
```

不使用它并更喜欢 Make 功能的原因是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T07:22:01.950

实际上，它并没有更有效。该`CGRectMake`函数（和其他函数）被声明为`static inline`，这意味着编译器副本将函数代码直接粘贴到它使用的每个地方：

```
CG_INLINE CGRect
CGRectMake(CGFloat x, CGFloat y, CGFloat width, CGFloat height) 
```

在哪里

```
#  define CG_INLINE static inline 
```

你从

```
// code
CGRect myRect = CGRectMake(1,2,3,4);
// code 
```

至

```
// code
CGRect myRect;
myRect.origin.x = 1; myRect.origin.y = 2;
myRect.size.width = 3; myRect.size.height = 4; 
```

原则上与

```
CGRect myRect = (CGRect){1,2,3,4}; 
```

经过编译器优化等。

如上所述，您添加了对`CGRect`以某种方式对齐的 4 个数字的结构的依赖，而不是使用对其有更多保证的函数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-28T11:28:29.103

我想这是相同的旧区别：

1.  从数据结构的内部定义中在代码中添加依赖项；

2.  使用封装该知识并且可以“掩盖”底层数据结构中的任何更改的函数。

原则上，`CGRect`可能会演变成一个成熟的类，它`origin`的`size,`等，访问器等......我并不是说这会是明智的或很可能，只是你使用函数创建实例的原因数据结构与代码对更改的弹性有关。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-07T07:58:17.740

C99 的复合文字语法是一个*有点*晦涩的特性。有些人发现 Make 函数更易于阅读，或者他们发现它更熟悉。在工具链支持的这个阶段，它只是偏好。

> 我很好奇为什么存在像 CGRectMake 和 CGPointMake 这样的函数……</p>

`CGRectMake`（自 10.0 起可用）在 OS X 的编译器支持复合文字之前。复合文字在 GCC 3.1（2002 年 5 月）中正式完成。

# android - Yarvik TAB 没有出现在 Ubuntu 上的 Eclipse 中

> ID：11700536
> 
> 赞同：0
> 
> 时间：2012-07-28T11:17:44.810
> 
> 标签：android, eclipse, ubuntu-12.04

我开发了一个 Android 应用程序。当我通过 USB 端口连接到手机时，我可以在手机上运行应用程序并调试应用程序。

但是，如果我连接到 Yarvik TAB461EUK，通过 USB 连接并允许在设备上打开调试，它不会显示在 Elipse 中。Eclipse 外部显示为“TAB461”USB 设备（TAB 的外部存储）和另一个“2,0 GB 文件系统”。

为什么它适用于手机而不适用于平板电脑？

平台信息：PC：Eclipse 3.7.2，Ubuntu 12.04；平板电脑：Yarvik TAB461EUK，Android 4.0.3；手机：HTC-HD2，ROM Android 2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:48:54.677

我的 Xenta Tab9-200 也有同样的问题。USB 调试图标显示在通知区域中，但 Eclipse 和`adb devices`平板电脑均未显示。我通过编辑`~/.android/adb_usb.ini`文件并为 Rockchip 添加供应商 ID 并重新启动 adb 解决了这个问题：

```
echo 0x2207 >> adb_usb.ini
sudo adb kill-server
sudo adb start-server 
```

该解决方案来自 Yarvik 支持论坛： http: [//forum.yarvik.com/showthread.php? 4270-Xenta-Driver-for-eclipse-connection](http://forum.yarvik.com/showthread.php?4270-Xenta-Driver-for-eclipse-connection)

# python - 如何删除python中的符号链接？

> ID：11700545
> 
> 赞同：32
> 
> 时间：2012-07-28T11:18:26.613
> 
> 标签：python, symlink

我一直在尝试删除我的工作目录中的一些符号链接，但我遇到了一些问题。

`os.remove`还删除了链接的原始文件夹的实际内容

`os.shutil`在符号链接的情况下引发错误。

有没有办法在不破坏原始内容的情况下使用 python 命令删除符号链接？

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-28T21:56:30.067

[`os.unlink()`](https://docs.python.org/3/library/os.html)为我工作。它删除符号链接而不删除它链接到的目录。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-05T07:15:37.097

接受的答案不适用于通过`mklink /D`. 如果这是您的问题，答案已发布在此问题中：[删除符号链接到 Windows 上的目录](https://stackoverflow.com/questions/26554135/cant-delete-unlink-a-symlink-to-directory-in-python-windows)

以下代码应适用于两个系统：

```
if(os.path.isdir(targetLink)):
    os.rmdir(targetLink)
else:
    os.unlink(targetLink) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-29T10:00:01.357

对不起，我的坏，我犯了一个愚蠢的编程错误：我愚蠢地删除了源代码而不是链接。

正确答案是@samfrances。

`os.unlink`成功了。

除此之外，如果您想使用 python 清除目录，这里还有一些其他提示：

绝对不是线程安全的，但你明白了......

```
def rm(obj):

    if os.path.exists(obj):
        if os.path.isdir(obj):
            if os.path.islink(obj):
                 os.unlink(obj)
            else:
                shutil.rmtree(obj)
        else:
            if os.path.islink(obj):
                os.unlink(obj)
            else:
                os.remove(obj) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-28T11:30:31.337

如果目录名称包含尾部斜杠，linux`rm`命令将跟随链接并尝试删除该目录。请参阅[删除目录的符号链接](https://stackoverflow.com/questions/210120/remove-a-symlink-to-a-directory)。`os.remove` [文档](http://docs.python.org/library/os.html#os.remove)说，如果您尝试删除目录，它会给您一个提示，`OSError`但在符号链接的情况下，这可能并不总是发生。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-22T15:48:39.837

在 Python 3.4 及更高版本中，如果链接是文件，请使用`unlink()`.

```
>>> from pathlib import Path
>>> p = Path('/some/file/')
>>> p.unlink() 
```

如果路径指向目录，请改用 Path.rmdir()。

```
>>> from pathlib import Path
>>> p = Path('/some/dir/')
>>> p.rmdir() 
```

# oracle - Oracle SQL Developer 查询结果表中的小数位数

> ID：11700546
> 
> 赞同：1
> 
> 时间：2012-07-28T11:18:28.680
> 
> 标签：oracle, numbers, decimal, oracle-sqldeveloper

Oracle SQL Developer中可以自定义日期格式，如何指定十进制格式？我的意思是小数位数。

在 Tools>Preferences>Database>NLS 我们只有小数点分隔符，没有别的。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T18:01:50.830

据我所知，偏好中没有选项。您可以使用[to_char](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm#g195443)函数来显示十进制数字。

一个例子：

在 HR 模式中试试这个：

```
select to_char(salary,'999999.000'), employee_id from employees; 
```

# programming-languages - 为什么关联性是运算符的基本属性，而不是优先级的基本属性

> ID：11700550
> 
> 赞同：3
> 
> 时间：2012-07-28T11:18:39.843
> 
> 标签：programming-languages, operators, operator-precedence, associativity

在任何编程语言教科书中，我们总是被告知该语言中的每个运算符如何具有左关联性或右关联性。似乎关联性是任何运算符的基本属性，无论它采用多少操作数。在我看来，无论我们如何将关联性分配给其他运算符，我们都可以将任何关联性分配给任何运算符。

但为什么会这样呢？也许举个例子更好。假设我想设计一种假设的编程语言。以这种任意方式为这些运算符分配关联性是否有效（都具有相同的优先级）：

```
unary operator: 
! right associative 
binary operators:
+ left associative
- right associative
* left associative 
/ right associative 
```

！+ - * / 是我的 5 个运算符都具有相同的优先级。

如果是的话，我假设的解析器如何将像 2+2!3+5*6/3-5!3!3-3*2 这样的表达式括起来？以及为什么。

编辑：

第一个示例 (2+2!3+5*6/3-5!3!3-3*2) 不正确。也许忘记一元操作，让我这样说吧，我们可以像我上面那样分配具有相同优先级不同关联性的运算符吗？如果是，将如何评估示例，例如 2+3-4*5/3+2？因为大多数编程语言似乎为具有相同优先级的运算符分配了相同的关联性。但是我们总是谈论操作员关联性，就好像它是单个操作员的属性——而不是优先级的属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T20:27:18.460

让我们记住关联性的含义。以任何运算符为例`@`。众所周知，它的结合性是消除形式表达式歧义的规则`a @ b @ c`：如果`@`是左结合的，则将其解析为`(a @ b) @ c`; 如果它是正确的联想，`a @ (b @ c)`. 它也可能是非关联的，在这种情况下`a @ b @ c`是语法错误。

如果我们有两个不同的运算符，比如说`@`and ，会`#`怎样？如果一个优先级高于另一个，则无话可说，关联性没有工作可做；优先级负责消除歧义。但是，如果它们具有相同的优先级，我们需要关联性来帮助我们。有三种简单的情况：

*   如果两个运算符都是左关联的，`a @ b # c`则表示`(a @ b) # c`.
*   如果两个运算符都是右结合的，`a @ b # c`则表示`a @ (b # c)`.
*   如果两个运算符都是非关联的，`a @ b @ c`则为语法错误。

在其余情况下，运营商不同意关联性。哪个运营商的选择优先？你可能会设计出这样的关联性优先规则，但我认为最自然的规则是声明任何这样的案例语法错误。毕竟，如果两个运算符具有相同的优先级，为什么一个会比另一个具有关联性优先级？

根据我刚刚给出的自然规则，您的示例表达式是语法错误。

现在，我们当然可以为具有相同优先级的运算符分配不同的关联性。但是，这意味着存在相同优先级的运算符组合（例如您的示例！）是语法错误。大多数语言设计者似乎更愿意避免这种情况，并为所有具有相同优先级的运算符分配相同的关联性。这样，所有组合都是合法的。我认为这只是美学。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:26:03.617

您必须以某种方式定义关联性，并且大多数语言选择“自然地”分配关联性（和优先级） - 以匹配普通数学的规则。

然而，也有明显的例外——APL 具有严格的从右到左的关联性，所有运算符都具有相同的优先级。

# html - 带有边缘和边框的页脚 div

> ID：11700551
> 
> 赞同：1
> 
> 时间：2012-07-28T11:19:38.487
> 
> 标签：html, css, css-transforms

我正在构建一个具有顶部和边框的页脚：

![在此处输入图像描述](../Images/e78891820d76ae5d8fcf14329fb88d7b.png)

有没有办法在 CSS 中实现这一点（也许有转换）而不必求助于 SVG ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:39:07.090

试试这个 - [http://jsfiddle.net/QBxhd/](http://jsfiddle.net/QBxhd/)

```
body {
    overflow-x: hidden;
}

footer {
    height: 100px;
    position: relative;
    background: #000;
    margin-top: 200px;
}

footer:before, footer:after {
    content: '';
    display: block;
    position: absolute;
    height: 40px;
    width: 102%;
    background: #ccc;
    top: -30px;

    -webkit-transform: rotate(-3deg); 
       -moz-transform: rotate(-3deg); 
        -ms-transform: rotate(-3deg); 
         -o-transform: rotate(-3deg); 
            transform: rotate(-3deg); 
                 zoom: 1;
}

footer:after {
    background: #000;
    top: -23px;

    -webkit-transform: rotate(-2deg); 
       -moz-transform: rotate(-3deg); 
        -ms-transform: rotate(-3deg); 
         -o-transform: rotate(-3deg); 
            transform: rotate(-2deg); 
                 zoom: 1;
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:25:09.297

我认为使用两个`div`相互重叠的灰色和黑色作为颜色可以做到这一点。将它们定位到想要的位置，并使用 z-index 对它们进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:39:52.470

或者这个：http: [//jsfiddle.net/faceleg/tQtZY/](http://jsfiddle.net/faceleg/tQtZY/)

```
<div class="grey"></div>
<div class="black"></div>​

.grey, .black {
    width: 100%;
height: 100px;   
    position: absolute;  
    margin-bottom: -20px; 

    bottom: 0px;    
}
.grey {
    background-color: gray;   
    z-index: 10;
    -moz-transform: scale(1) rotate(-2deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
        -webkit-transform: scale(1) rotate(-2deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
        -o-transform: scale(1) rotate(-2deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
        -ms-transform: scale(1) rotate(-2deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
        transform: scale(1) rotate(-2deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
}
.black {
    background-color: black;   
    z-index: 11;
    -moz-transform: scale(1) rotate(-1deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
        -webkit-transform: scale(1) rotate(-1deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
        -o-transform: scale(1) rotate(-1deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
        -ms-transform: scale(1) rotate(-1deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
        transform: scale(1) rotate(-1deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T12:00:54.797

只是另一种方式[http://jsfiddle.net/uttara/XrVzx/3/](http://jsfiddle.net/uttara/XrVzx/3/)

```
<div id="footer"></div>

#footer{
    width:500px;
    height:100px;
    margin:50px auto;
    background-color:black;   
}

#footer:after{
    border-bottom: 30px solid black;
    border-left: 500px solid transparent;
    height: 0;
    width: 0;
    top:20px;
    content:"";
    position:absolute;
 }

#footer:before{
    border-bottom: 40px solid grey;
    border-left: 500px solid transparent;
    height: 0;
    width: 0;
    top:10px;
    content:"";
    position:absolute;
 }
​ 
```

# css - @import 用于构建 css

> ID：11700555
> 
> 赞同：0
> 
> 时间：2012-07-28T11:19:44.503
> 
> 标签：css

我只是想确认我是否理解`@import`正确，

基本上，它可以为您做的至少其中一件事是通过将不同的布局分隔在不同的类别中来为您的 css 提供一些结构。

现在我的每个 css 文件看起来都很疯狂，我有大约 10 个用于一个站点，其中很多都为相同的代码占用了空间，并且只添加了一些新的东西。

我猜我`@import`只能在需要的地方添加样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:23:55.843

是的，它的工作原理与 PHP 中的函数`include`非常相似。`require`

您可以将您的样式分隔在多个文件中，并在需要的地方包含其中的一些。

* * *

与 PHP 不同，CSS 使用 HTTP 请求来导入文件，这意味着如果您将 CSS 分成许多文件（尽量保持在 3 个，但最好只有 1 个），您的网站会很慢。

我建议您仅在开发期间分离文件，这样您可以更轻松地管理文件，但在启动站点之前将所有内容放入 1 个文件中。

# r - 在 R 中以编程方式创建 X 个 nnet 模型

> ID：11700556
> 
> 赞同：0
> 
> 时间：2012-07-28T11:20:08.080
> 
> 标签：r, formula

我希望我能在以下问题上得到一些帮助。基本上，我想根据特定向量 PredVector 的长度以编程方式创建许多 nnet 模型。PredVector 中的每个值都间接引用了我的数据集 PSTrain 中的一列。

代码如下：

```
PredVector <- c(1, 3, 5)
for (i in 1:length(PredVector)) {
   modelName <- paste("nnModel", PredVector[i], sep="")
   modelForm <- paste("TPlus", PredVector[i], "~.", sep="")
   as.formula(paste(modelName, "<- nnet(", modelForm, ", PSTrain, size=5, maxit=2000, linout=F)"))
} 
```

我希望创建三个模型：nnModel1、nnModel3 和 nnModel5。但是，虽然代码在所需设置下成功运行了 nnet 模型三次，但模型并未保存到我的工作区。

关于如何解决这个问题的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:22:00.977

列出模型：

```
models <- list()
for(i in seq(length(ProdVector))) {
   models[[i]] <- # run model here
} 
```

如果您想在循环中保存其他内容，请制作更多列表并存储更多结果。

# jquery - jQuery 对话框进入 div

> ID：11700557
> 
> 赞同：0
> 
> 时间：2012-07-28T11:20:26.513
> 
> 标签：jquery, html, dialog, click

问题是：我有一个带有链接的 div，单击时应该在 div 本身上方/内部打开一个带有淡入和淡出的 jQuery 对话框。我创建了这个：

```
 $(function() {
      $( ".div" ).click(function() {
          $("#dialog").fadeIn(1000).delay(400).fadeOut(1000)
      });
 });

<div id="dialog" title="Basic dialog" style="display: none">Add to cart</div>

#dialog{
background-color: #FFFEDF;
border: 1px solid #FFECA2;
width: 123px;
text-align: center;
padding: 3px 9px;} 
```

这是一个例子:)

[http://img593.imageshack.us/img593/9852/exampled.jpg](http://img593.imageshack.us/img593/9852/exampled.jpg)

我怎样才能做到这一点？

另一个问题是：如果我有很多 div，我必须`<div id="dialog"> Add to cart </ div>`为每个 div 输入吗？

像这样的东西？

```
$('.div').each(function(){
  $(this).click(function(){
    $('#dialog').fadeToggle();
  })
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:32:08.277

这是工作小提琴：http: [//jsfiddle.net/surendraVsingh/NyuNa/2/](http://jsfiddle.net/surendraVsingh/NyuNa/2/)

**jQuery**

```
$('.div').click(function(){

    $('#dialog').fadeToggle();

})​ 
```

**CSS**

```
.div{
background-color: #fff;
border: 1px solid #FFECA2;
width: 123px;
text-align: center;
padding: 3px 9px;
position:relative;
}

#dialog{
    display:block;
    position:absolute;
    display:none;
    left:0; top:0;
    width:100%; height:100%;
background-color: #FFFEDF;
border: 1px solid #FFECA2;
width: 123px;
text-align: center;
padding: 3px 9px;
}​ 
```

# android - coverflow android：如何从coverflow中的url获取图像

> ID：11700558
> 
> 赞同：13
> 
> 时间：2012-07-28T11:20:28.807
> 
> 标签：android, bitmap, android-gallery, coverflow

您好我目前正在测试 android [coverflow](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html) 我试图从 url 获取图像并将其显示在 coverflow 中我已成功下载图像但无法放入位图。这是我尝试过的代码...

```
package com.example.coverflow;

import java.io.FileInputStream;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.LinearGradient;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.PorterDuff.Mode;
import android.graphics.PorterDuffXfermode;
import android.graphics.Shader.TileMode;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.Toast;
import android.widget.ImageView.ScaleType;

import com.example.coverflow.CoverAdapterView.OnItemClickListener;

public class CoverFlowExample extends Activity  {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        CoverFlow coverFlow;
        coverFlow = new CoverFlow(this);

        coverFlow.setAdapter(new ImageAdapter(this));

        ImageAdapter coverImageAdapter = new ImageAdapter(this);

        coverImageAdapter.createReflectedImages();

        coverFlow.setAdapter(coverImageAdapter);

        coverFlow.setSpacing(-15);
        coverFlow.setSelection(8, true);

        setContentView(coverFlow);
        coverFlow.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(CoverAdapterView<?> parent, View view,
                    int position, long id) {
                // TODO Auto-generated method stub
                Log.v("possition ", " this position :"+position );
                Toast.makeText(getApplicationContext(), "position "+position, Toast.LENGTH_SHORT).show();
            }
        });

        // Use this if you want to use XML layout file
        // setContentView(R.layout.main);
        // coverFlow = (CoverFlow) findViewById(R.id.coverflow);

    }

    public class ImageAdapter extends BaseAdapter {
        int mGalleryItemBackground;
        private Context mContext;

        private FileInputStream fis;
        //public Integer[] mImageIds ;

        private Integer[] mImageIds ={1,2,3,4,5};
        /*private Integer[] mImageIds = { R.drawable.kasabian_kasabian,

        R.drawable.killers_day_and_age, R.drawable.garbage_bleed_like_me,
                R.drawable.death_cub_for_cutie_the_photo_album,
                R.drawable.kasabian_kasabian, R.drawable.kasabian_kasabian,
                R.drawable.killers_day_and_age,
                R.drawable.garbage_bleed_like_me,
                R.drawable.massive_attack_collected,
                R.drawable.kasabian_kasabian, R.drawable.kasabian_kasabian,
                R.drawable.kasabian_kasabian

        };*/

        public int getCount2()
        {
            for(int i=0;i<5;i++)
            {
                ImageView imageView = new ImageView(mContext);
                URL url;
                try {
                    url = new URL("http://www.psdgraphics.com/file/retro-tv-icon.jpg");

                Bitmap bmp = BitmapFactory.decodeStream(url.openConnection().getInputStream());

                imageView.setImageBitmap(bmp);
                imageView.setId(i);
                //mImageIds[i]=i;

                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            return mImageIds.length;
        }

        private ImageView[] mImages;

        public ImageAdapter(Context c) {
            mContext = c;
            mImages = new ImageView[getCount2()];
        }

        public boolean createReflectedImages() {
            // The gap we want between the reflection and the original image
            final int reflectionGap = 4;

            int index = 0;
            for (final int imageId : mImageIds) {
//              Bitmap originalImage = BitmapFactory.decodeResource(
//                      getResources(), imageId);
                URL url;
                Bitmap originalImage= null;
                try {
                url = new URL("http://image10.bizrate-images.com/resize?sq=60&uid=2216744464");

                 originalImage = BitmapFactory.decodeStream(url.openConnection().getInputStream());
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                int width = originalImage.getWidth();
                int height = originalImage.getHeight();
                Log.v("width:",""+width+","+height);

                // This will not scale but will flip on the Y axis
                Matrix matrix = new Matrix();
                matrix.preScale(1, -1);

                Log.v("errer her", "aftr originalImage");
                // Create a Bitmap with the flip matrix applied to it.
                // We only want the bottom half of the image
                Bitmap reflectionImage = Bitmap.createBitmap(originalImage, 0,
                        height / 2, width, height / 2, matrix, false);

                // Create a new bitmap with same width but taller to fit
                // reflection
                Bitmap bitmapWithReflection = Bitmap.createBitmap(width,
                        (height + height / 2), Config.ARGB_8888);

                // Create a new Canvas with the bitmap that's big enough for
                // the image plus gap plus reflection
                Canvas canvas = new Canvas(bitmapWithReflection);
                // Draw in the original image
                canvas.drawBitmap(originalImage, 0, 0, null);
                // Draw in the gap
                Paint deafaultPaint = new Paint();
                canvas.drawRect(0, height, width, height + reflectionGap,
                        deafaultPaint);
                // Draw in the reflection
                canvas.drawBitmap(reflectionImage, 0, height + reflectionGap,
                        null);
                Log.v("errer her", "aftr reflectionImage");
                // Create a shader that is a linear gradient that covers the
                // reflection
                Paint paint = new Paint();
                LinearGradient shader = new LinearGradient(0,
                        originalImage.getHeight(), 0,
                        bitmapWithReflection.getHeight() + reflectionGap,
                        0x70ffffff, 0x00ffffff, TileMode.CLAMP);
                // Set the paint to use this shader (linear gradient)
                paint.setShader(shader);
                // Set the Transfer mode to be porter duff and destination in
                paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));
                // Draw a rectangle using the paint with our linear gradient
                canvas.drawRect(0, height, width,
                        bitmapWithReflection.getHeight() + reflectionGap, paint);
                Log.v("errer her", "aftr drawrect");
                ImageView imageView = new ImageView(mContext);
                imageView.setImageBitmap(bitmapWithReflection);
                imageView.setLayoutParams(new CoverFlow.LayoutParams(120, 180));
                imageView.setScaleType(ScaleType.MATRIX);
                mImages[index++] = imageView;

            }
            return true;
        }

        public int getCount() {
            // Log.v("getCoutn(int count)", "" + mImageIds.length);
            return mImageIds.length;
        }

        public Object getItem(int position) {
            // Log.v("getItem(int position)", "" + position);
            return position;
        }

        public long getItemId(int position) {
            // Log.v("getItemID(int position)", "" + position);
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            // Use this code if you want to load from resources
            // ImageView i = new ImageView(mContext);
            // i.setImageResource(mImageIds[position]);
            // i.setLayoutParams(new CoverFlow.LayoutParams(130, 130));
            // i.setScaleType(ImageView.ScaleType.MATRIX);
            // return i;

            // Log.v("getview int position mImages", ""+position);
            ImageView imageView = new ImageView(mContext);
            URL url;
            try {
                url = new URL("http://image10.bizrate-images.com/resize?sq=60&uid=2216744464");

            Bitmap bmp = BitmapFactory.decodeStream(url.openConnection().getInputStream());
            imageView.setImageBitmap(bmp);
            imageView.setId(position);

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return imageView;
            //return mImages[position];
        }

        /**
         * Returns the size (0.0f to 1.0f) of the views depending on the
         * 'offset' to the center.
         */
        public float getScale(boolean focused, int offset) {
            /* Formula: 1 / (2 ^ offset) */
            Log.v("getScale float ", " " + focused + " " + offset);
            return Math.max(0, 1.0f / (float) Math.pow(2, Math.abs(offset)));
        }

    //  View v=getView(position, convertView, parent);

    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T12:27:55.817

**1.**创建ImageAdater.java

 **```
package com.sample.Adapters;

import java.util.ArrayList;
import android.app.Activity;
import android.graphics.BitmapFactory;
import android.graphics.drawable.BitmapDrawable;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.BaseAdapter;
import android.widget.ImageView;
public class ImageAdapter extends BaseAdapter {
     int mGalleryItemBackground;
     private Activity mContext;
     ArrayList<byte[]> imgarray ;
     public ImageAdapter(Activity c,ArrayList<byte[]> array) {
      mContext = c;
      this.imgarray = array ;
     }
     public int getCount() {
         return imgarray.size();
     }

     public Object getItem(int position) {
         return position;
     }
     public long getItemId(int position) {
         return position;
     }
     public View getView( final int position, View convertView, ViewGroup parent) {
         ImageView i = new ImageView(mContext);
         i.setImageBitmap(BitmapFactory.decodeByteArray(imgarray.get(position),  0, imgarray.get(position).length));
         i.setLayoutParams(new com.sample.custom.CoverFlow.LayoutParams(LayoutParams.WRAP_CONTENT-20, LayoutParams.WRAP_CONTENT-20));
         i.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
         BitmapDrawable drawable = (BitmapDrawable) i.getDrawable();
         drawable.setAntiAlias(true);
         return i;
     }
      public float getScale(boolean focused, int offset) { 
        /* Formula: 1 / (2 ^ offset) */ 
          return Math.max(0, 1.0f / (float)Math.pow(2, Math.abs(offset))); 
      } 

 } 
```

2.**图片下载方法**

```
public static byte[] getLogoImage(String url){
        try {
            URL imageUrl = new URL(url);
            URLConnection ucon = imageUrl.openConnection();

            InputStream is = ucon.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);

            ByteArrayBuffer baf = new ByteArrayBuffer(500);
            int current = 0;
            while ((current = bis.read()) != -1) {
                baf.append((byte) current);
            }

            return baf.toByteArray();
        } catch (Exception e) {
            Log.d("ImageManager", "Error: " + e.toString());
        }
        return null;
    } 
```

3.声明一个`ArrayList<byte[]> arraylistgallery = new ArrayList<byte[]>();`

在这里，我假设即将到来的图像总数为 10

```
for(int i=0 ; i<10 ; i++){
arraylistgallery.add(i,getLogoImage("http://www.psdgraphics.com/file/retro-tv-icon.jpg"));
} 
```

在 AsyncTask 中下载图片并保存在中`arraylistgallery ArrayList` 并像这样传递

```
 coverFlow.setVisibility(View.VISIBLE);
        coverFlow.setAdapter(new ImageAdapter(this,arraylistgallery));
        coverFlow.setSpacing(5);
        coverFlow.setSelection(arraylistgallery.size()-1, true);
        coverFlow.setAnimationDuration(1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:40:18.790

使用下面的代码。

```
coverFlow = new CoverFlow(this);
ImageAdapter coverImageAdapter = new ImageAdapter(this);
coverFlow.setAdapter(coverImageAdapter);
coverFlow.setSpacing(0);
coverFlow.setSelection(0, true);
coverFlow.setLayoutParams(params);
coverFlow.setOnItemClickListener(this);

coverFlow.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(CoverAdapterView<?> parent, View view, int position, long id){
        // TODO Auto-generated method stub
    }

    @Override
    public void onNothingSelected(CoverAdapterView<?> parent) {
        // TODO Auto-generated method stub
    }
}); 
```

ImageAdapter.java

```
public class ImageAdapter extends BaseAdapter {
    public ImageLoader imageLoader;
    public ImageAdapter(Context c) {
        Constants.ctx = c;
        imageLoader = new ImageLoader(Constants.ctx.getApplicationContext());
        }

        public int getCount() {
            return Constants.mIsFeaturedTrueImage.size();
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            System.gc();
            ImageView i = new ImageView(Constants.ctx);
            if (Constants.mIsFeaturedTrueImage.get(position).equals("null") || Constants.mIsFeaturedTrueImage.get(position).equals("")) {
                System.out.println("Hello if");
                i.setImageResource(R.drawable.icon);
            } else {
                System.out.println("Hello else if");
                imageLoader.DisplayImage(Constants.mIsFeaturedTrueImage.get(position), i);
            }

            i.setLayoutParams(new CoverFlow.LayoutParams(
            mConstant.mImageWidth + 28, mConstant.mImageHeight + 28));
            i.setScaleType(ImageView.ScaleType.MATRIX);
            return i;
        }

        /**
        * Returns the size (0.0f to 1.0f) of the views depending on the
        * 'offset' to the center.
        */
        public float getScale(boolean focused, int offset) {
            /* Formula: 1 / (2 ^ offset) */
            return Math.max(0, 1.0f / (float) Math.pow(2, Math.abs(offset)));
        }
    }
} 
```

并使用 imageLoader 类从 URL 加载图像，并且 Constants.mIsFeaturedTrueImage.get(position) 是图像 URL 的数组列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T13:32:05.450

我写了一个demo来实现这个问题，我结合了图库流程和通用图像加载，你可以试试，谢谢！演示可以从这个网站下载： [https ://github.com/Jonguo/galleryflow](https://github.com/Jonguo/galleryflow)**

# visual-studio-2012 - 我可以从 Visual Studio 2012 (11) RC 升级到 Final / RTM 吗？

> ID：11700562
> 
> 赞同：3
> 
> 时间：2012-07-28T11:21:51.820
> 
> 标签：visual-studio-2012, rc, rtm

我注意到 Visual Studio 11 在设计器方面有很多改进，我真的很想尽快切换到 2012。

问题是 - 如果我现在下载候选发布版，我是否可以“重新安装”或升级到 RTM/最终版本，或者我需要卸载并搞砸？

[这个](https://stackoverflow.com/questions/2626077/upgrading-visual-studio-2010-rc-to-rtm-retail-final)问题，关于 VS 2010，它的回答说你需要卸载所有东西，但是当谈到 2012 年时，我读到从 BETA 升级到 RC 只是一个安装，不需要卸载。

我曾尝试寻找答案，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:12:23.670

哦，该死的，我让它工作了。

刚刚找到答案，我认为“支持：从 Visual Studio 2012 Release Candidate 升级到 Release (RTM)（仅相同版本 - 例如，Professional RC 到 Professional RTM）”（microsoft.com/visualstudio/11/en-us/products /兼容性）

# c# - 如何在 C# 中显示来自 URL 的图像？

> ID：11700563
> 
> 赞同：-1
> 
> 时间：2012-07-28T11:21:54.627
> 
> 标签：c#, image, url

听说framework 2.0 支持图片url，但是找不到。有没有办法在 C# 中直接从 Url 显示图像？（桌面应用）

通常我遵循的方式是在返回图像后下载图像。这是我的代码..但我不想遵循那种方式。所以我正在寻找一种不使用 Httpwebrequest 或类似的方法..

```
 public Image DownloadImage(string _URL)
        {
            Image _tmpImage = null;

            try
            {
                // Open a connection
                System.Net.HttpWebRequest _HttpWebRequest = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(_URL);

                _HttpWebRequest.AllowWriteStreamBuffering = true;

                // You can also specify additional header values like the user agent or the referer: (Optional)
                _HttpWebRequest.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)";
                _HttpWebRequest.Referer = "http://www.google.com/";

                // set timeout for 20 seconds (Optional)
                _HttpWebRequest.Timeout = 20000;

                // Request response:
                System.Net.WebResponse _WebResponse = _HttpWebRequest.GetResponse();

                // Open data stream:
                System.IO.Stream _WebStream = _WebResponse.GetResponseStream();

                // convert webstream to image
                _tmpImage = Image.FromStream(_WebStream);

                // Cleanup
                _WebResponse.Close();
                _WebResponse.Close();
            }
            catch (Exception _Exception)
            {
                // Error
                Console.WriteLine("Exception caught in process: {0}", _Exception.ToString());
                return null;
            }

            return _tmpImage;
        } 
```

我正在寻找另一种方法。我不知道可以是什么..？我想学习如何处理它..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T11:35:51.067

你可以使用这个代码

```
string remoteUri = "http://www.yourSite.com/library/homepage/images/";
string fileName = "YourImagegif", 
myStringWebResource = null;
// Create a new WebClient instance.
WebClient myWebClient = new WebClient();
// Concatenate the domain with the Web resource filename.
myStringWebResource = remoteUri + fileName;
Console.WriteLine("Downloading File \"{0}\" from \"{1}\" .......\n\n", fileName, myStringWebResource);
// Download the Web resource and save it into the current filesystem folder.
myWebClient.DownloadFile(myStringWebResource,fileName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T11:31:16.897

您想在桌面应用程序上显示图像 url。所以你必须先下载图像。通过调用 DownloadFile 方法使用 WebClient

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T11:30:48.810

尝试使用图片框控件。使用它从网络加载图像

```
string imageLink="http://where.is/image.tld";
pictureBox1.ImageLocation= imageLink; 
```

创建一个带有文本框、数据网格视图、图片框和按钮的表单；将数据网格选择模式设置为全行选择。使用此代码：

```
 private void button1_Click(object sender, EventArgs e)
        {
            string imageLink= textBox1.Text;
           try
                    {
                        int i;
                        i = dataGridView1.Rows.Add(new DataGridViewRow());
                        dataGridView1.Rows[i].Cells["Column1"].Value = imageLink;

                    }
                    catch (Exception ex)
                    {

                        MessageBox.Show("error");
                    }
        }

        private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {

            string img = dataGridView1.SelectedRows[0].Cells["Column1"].Value.ToString();

            pictureBox1.ImageLocation = img;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T11:36:29.007

看看这个主题 [http://social.msdn.microsoft.com/Forums/en/winforms/thread/312a7fb2-9411-450a-8032-ee169397fd96](http://social.msdn.microsoft.com/Forums/en/winforms/thread/312a7fb2-9411-450a-8032-ee169397fd96) 可能就是你要找的

# c++ - 提升deadline_timer问题

> ID：11700566
> 
> 赞同：3
> 
> 时间：2012-07-28T11:22:13.300
> 
> 标签：c++, boost, boost-asio

下面是一个用计时器包装线程的测试类的实现。奇怪的是，如果最后期限设置为 500 毫秒，它可以工作，但如果我将其设置为 1000 毫秒，它不会。我究竟做错了什么？

```
#include "TestTimer.hpp"
#include "../SysMLmodel/Package1/Package1.hpp"

TestTimer::TestTimer(){
    thread = boost::thread(boost::bind(&TestTimer::classifierBehavior,this));
    timer = new      boost::asio::deadline_timer(service,boost::posix_time::milliseconds(1000));
    timer->async_wait(boost::bind(&TestTimer::timerBehavior, this));

};

TestTimer::~TestTimer(){
}

void TestTimer::classifierBehavior(){
 service.run();
};

void TestTimer::timerBehavior(){
std::cout<<"timerBehavior\r";
timer->expires_at(timer->expires_at() + boost::posix_time::milliseconds(1000));
timer->async_wait(boost::bind(&TestTimer::timerBehavior,this));
} 
```

**更新 1** 我注意到程序卡住了（或者至少在控制台中的标准输出停留了很多秒，大约 30 秒）然后很多“timerBehavior”字符串被一起打印出来，就好像它们已经在某个地方排队一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T14:19:53.477

你的程序可能有几个问题。从您所展示的内容来看，很难说程序是否在计时器有机会触发之前停止。而且，如果您想在换行符之后刷新输出，请不要刷新输出，请使用 std::endl。第三，如果你的线程要运行 io_service.run() 函数，可能是线程找到了一个空的 io 队列，run() 会立即返回。为了防止这种情况，有一个工作班可以防止这种情况发生。这是我的示例，来自您的代码，可能会按预期工作：

```
#include <boost/asio.hpp>
#include <boost/thread.hpp>
#include <iostream>

class TestTimer
{
public:
    TestTimer()
        : service()
        , work( service )
        , thread( boost::bind( &TestTimer::classifierBehavior,this ) )
        , timer( service,boost::posix_time::milliseconds( 1000 ) )
    {
        timer.async_wait( boost::bind( &TestTimer::timerBehavior, this ) );
    }

    ~TestTimer()
    {
        thread.join();
    }
private:
    void classifierBehavior()
    {
        service.run();
    }

    void timerBehavior() {
        std::cout << "timerBehavior" << std::endl;
        timer.expires_at( timer.expires_at() + boost::posix_time::milliseconds( 1000 ) );
        timer.async_wait( boost::bind( &TestTimer::timerBehavior,this ) );
    }

    boost::asio::io_service         service;
    boost::asio::io_service::work   work;
    boost::thread                   thread;
    boost::asio::deadline_timer     timer;
};

int main()
{
    TestTimer test;
} 
```

# iphone - 将字符串格式化程序作为参数传递

> ID：11700567
> 
> 赞同：0
> 
> 时间：2012-07-28T11:22:13.803
> 
> 标签：iphone, objective-c

我有一个名为 showMessage 的函数，它显示警报消息对话框。此函数将字符串作为参数，并将此字符串显示为对话框消息。在开始时，我想要传递字符串的方式，以及与它一起传递字符串格式化程序的方式，如下所示：

```
[self showMessageDialog:@"Hello %@", self.studentName]; 
```

如您所见，我想要实现的目标。所以我让我的函数签名是这样的：

```
- (void) showMessageDialog:(NSString *)message, ...{
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" 
                                                message:message 
                                               delegate:nil 
                                      cancelButtonTitle:@"OK"
                                      otherButtonTitles:nil];
[alert show];
[alert release];
} 
```

有了这个，我可以在函数调用期间传递多个格式化程序（我的意思是占位符的参数），但是我缺少一些不允许我在消息上显示格式化程序参数的东西。我的意思是我总是在消息对话框中收到这条消息：“Hello %@”。

我知道我错过了一些事情，比如我已经将多个参数传递给函数调用，但我认为我还没有弄清楚如何将这些参数放在它们的占位符上。

注意：我想让函数像 NSLog 一样工作，我们调用 NSLog 并传递参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:34:54.813

您要做的是构建一个可变参数函数。请查看本[教程](http://www.eskimo.com/~scs/cclass/int/sx11b.html)以了解如何执行此操作。

具体来说，据我了解，您还将对如何将变量参数列表从您的方法传递到另一个采用变量参数列表的函数感兴趣（假设您想`sprintf`从您的`showMessageDialog:`. 这是解释[here](http://www.eskimo.com/~scs/cclass/int/sx11c.html)。实际上，这很容易做到（例如，使用 NSLog）：

```
- (void) showMessageDialog:(NSString *)message, ... {

    va_list argp;

    va_start(argp, msg);
    NSLog(msg, argp);
    va_end(argp);

} 
```

# java - Java 中的 Thread.Sleep 替代方案

> ID：11700571
> 
> 赞同：6
> 
> 时间：2012-07-28T11:22:58.497
> 
> 标签：java, multithreading, swing, jframe, thread-sleep

有人告诉我`Thread.Sleep()`，有时使用是一个糟糕的解决方案，人们希望在同步方法中的动作循环中设置一些时间间隔。

另一方面，我有两个不同的线程，它们在我的程序运行期间处于活动状态，还有一个共享对象，当我在该共享对象中使用 Object.wait(long) 时，它会导致我的 GUI 冻结一段时间。

对于这个问题有什么更好的解决方案？

* * *

更新这部分代码包括在 GUI 中启动的线程之一：

```
`class temperatureUp extends Thread 
    {
        @Override
        public void run()
        {
        while(true)
        {
            try
            {
                GBC.increaseTemp();
                updateSystemStatus();
            }
            catch(Exception ex)
            {
                StringWriter w = new StringWriter();
                ex.printStackTrace(new PrintWriter(w));
                txtLog.setText(w + "\n" + txtLog.getText());
            }
        }
        }
    };`
```

这是共享对象 GBC 中的同步方法：

```
public synchronized void increaseTemp() throws InterruptedException{
    // don't increase the temperature if the boiler 
    // is not turned on...
    while (!isBoilerOn) 
        wait(); 

    // increase the current temperature 
    if ((currentTemp + 1) < MAX_TEMP && currentTemp < desiredTemp) {
        Thread.sleep(2000); ///what should put here if not thread sleep?
        currentTemp ++;    
        updateGasBoilerStatus();
    } 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T11:35:12.813

不要在同步方法中睡觉！不要在 GUI 事件处理程序/方法中等待！

拆分同步操作，以便在 GUI 线程上下文中不调用 Sleep() 调用。

也许使用 InvokeLater() 作为第二位。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T11:33:36.140

您可以缩小`synchronize`声明的范围。例如，如果您正在同步整个方法

```
public synchronized void foo() 
```

您可以删除修饰符并改用同步块

```
synchronized (this) {
   // ...
} 
```

如果可能的话，移动`Thread.sleep()`这个块的外部。仅同步那些修改共享数据状态的语句。

很多关于 Swing 的线程问题都与[Event Dispatcher Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)相关，并且可以很容易地用它来解决。我建议你阅读它。

一点背景知识，为什么不应该`Thread.sleep()`在同步块内调用：

> **拿着锁睡觉或等待。**在持有锁的情况下调用 Thread.sleep 会导致其他线程长时间无法取得进展，因此存在潜在的严重活性危害。在持有两个锁的情况下调用 Object.wait 或 Condition.await 会带来类似的危险。[[JCIP]](http://jcip.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:39:23.717

我会使用监视器：[http](http://www.artima.com/insidejvm/ed2/threadsynch4.html) ://www.artima.com/insidejvm/ed2/threadsynch4.html 也许用 notify 或 notifyAll 你可以解决它。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T16:17:31.440

始终让负责处理 GUI 的事件调度程序线程 (EDT) 远离任何非 UI 工作。另外，不要同步整个方法，而是同步原子语句

```
synchronized(this){
    //...
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-09-20T15:53:01.940

您可以尝试以下代码：

```
public static void delay(int waitTime) {
        long endTime = System.currentTimeMillis() + (waitTime * 1000);
        while (System.currentTimeMillis() < endTime) {}
    } 
```

调用延迟（5）。控制将等待 5 秒。

# matlab - 如何在图表上绘制不同颜色的标记

> ID：11700573
> 
> 赞同：1
> 
> 时间：2012-07-28T11:23:10.980
> 
> 标签：matlab, plot, markers

我现在有这样的代码：

```
fDeals = fopen([logsFolder stock '_deals.log']);
data = textscan(fDeals, '%f:%f:%f:%f %f,%f %f,%f %f,%f %f');
fclose(fDeals);

% hh:min:sec:millisec
secvec = [60*60 60 1 1e-3];
x = [data{1:4}] * secvec';

flvec = [1 1e-16];
y = [data{5:6}] * flvec';

ammount = data{11};

xindays = x / (24*60*60);

plot(xindays, y, 'go','MarkerSize',6,'LineWidth',3); 
```

它工作正常，但它总是创建绿色标记。如果数量 > 0，我需要创建绿色标记，否则我想创建红色标记。怎么做？

可能我应该创建单独`xGreen`的 , `xRed`, `yGreen`,`yRed`数组，但是我需要以某种方式将文件行分成两组 - 数量 > 0 的行和数量 <0 的行（数量永远不是 0）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:06:33.610

你可以试试这个：

```
markerIDX = ammount > 0;

plot(xindays(markerIDX), y(markerIDX), 'go','MarkerSize',6,'LineWidth',3);
plot(xindays(~markerIDX), y(~markerIDX), 'ro','MarkerSize',6,'LineWidth',3); 
```

但是请注意，这只适用于`xindays`、`y`和`ammount`的大小相同的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T01:07:31.130

您还可以使用统计工具箱中的[GSCATTER](http://www.mathworks.com/help/toolbox/stats/gscatter.html)函数：

```
group = ammount > 0;
h = gscatter(xindays, y, group, 'gr', 'o', 6);
set(h, 'LineWidth',3)
legend(h, {'group 1','group 2'}) 
```

# javascript - 使用 setDate 添加天数后，月份没有变化

> ID：11700574
> 
> 赞同：0
> 
> 时间：2012-07-28T11:23:11.713
> 
> 标签：javascript, date

我在 Javascript 中进行日期操作时遇到了一些麻烦。

我有一个变量，`firstDay`即我正在操作的日期。

`firstDay`我从一个变量添加天`X`数，从另一个变量添加天`Y`数：

```
var from_date = new Date(firstDay); // firstDay is a string with date: 2012/07/28
var to_date = new Date(firstDay);

var X = 1;
var Y = 5;

from_date.setDate(from_date.getDate() + X);
to_date.setDate(to_date.getDate() + Y); 
```

所以`from_date`现在包含日期 29.07.2012 和 to_date 是 02.08.2012。我不知道为什么日期会正确更改，但月份保持不变。

我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:32:22.557

复制并粘贴您的代码，它按预期工作：http: [//jsfiddle.net/kDYdW/4/](http://jsfiddle.net/kDYdW/4/)

唯一的区别是`firstDay`，所以我认为您可能对此有疑问。

您还说“月份保持不变”，但您报告在（29.07.2012 和 02.06.2012）有 7 月`from_date`和 6 月。`to_date`

**更新**：添加了 jsfiddle 的正确修订

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:32:46.110

`setDate(d)`只是为给定的月份设置月份的日期（而例如`setMonth(m)`只是更改月份）。

您可能希望使用`setTime(t)`which 设置完整的时间戳，假设`X`和`Y`是天：

```
from_date.setTime(from_date.getTime() + (X * 24 * 60 * 60 * 1000));
to_date.setTime(to_date.getTime() + (Y * 24 * 60 * 60 * 1000)); 
```

# android - 如何将水平滚动视图移动到特定位置？

> ID：11700581
> 
> 赞同：4
> 
> 时间：2012-07-28T11:24:09.493
> 
> 标签：android, scroll, horizontalscrollview

我正在使用没有任何 listView 或 gridview 的 scrollView 。我刚刚添加了相同的视图，但我知道我想以编程方式滚动到特定位置。这可能吗 ？

请帮助我使用水平滚动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T11:26:26.993

你可以使用这个方法

```
horizontalScrollView.scrollBy(160, 0); 
```

**或者**

```
horizontalScrollView.scrollTo(160, 0); 
```

# xslt - XSL 分析字符串-> 匹配子字符串成多个变量

> ID：11700584
> 
> 赞同：8
> 
> 时间：2012-07-28T11:24:26.003
> 
> 标签：xslt, xslt-2.0

我想知道是否可以`analyze-string`在 RegEx 中使用和设置多个组，然后将所有匹配的组存储在变量中以供以后使用。

像这样：

```
<xsl:analyze-string regex="^Blah\s+(\d+)\s+Bloo\s+(\d+)\s+Blee" select=".">
  <xsl:matching-substring>
    <xsl:variable name="varX">
      <xsl:value-of select="regex-group(1)"/>
    </xsl:variable>                                
    <xsl:variable name="varY">
      <xsl:value-of select="regex-group(2)"/>
    </xsl:variable>        
  </xsl:matching-substring>
</xsl:analyze-string> 
```

这实际上不起作用，但这就是我所追求的那种东西，我知道我可以将它包装`analyze-string`在一个变量中，但这似乎很愚蠢，对于每个组我都必须处理 RegEx，效率不高，我应该是能够处理一次正则表达式并存储所有组以供以后使用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T12:06:50.660

不错

```
<xsl:variable name="groups" as="element(group)*">
<xsl:analyze-string regex="^Blah\s+(\d+)\s+Bloo\s+(\d+)\s+Blee" select=".">
<xsl:matching-substring>
  <group>
     <x><xsl:value-of select="regex-group(1)"/></x>
     <y><xsl:value-of select="regex-group(2)"/></y>
  </group>   
</xsl:matching-substring>
</xsl:analyze-string>
</xsl:variable> 
```

帮助？这样你就有了一个名为的变量，它是一个带有捕获`groups`的元素序列。`group`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T16:19:50.520

**这种转换表明，`xsl:analyze-string`获得想要的结果并不是必需的——存在一个更简单和通用的解决方案。**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="*[matches(., '^Blah\s+(\d+)\s+Bloo\s+(\d+)\s+Blee')]">

    <xsl:variable name="vTokens" select=
      "tokenize(replace(., '^Blah\s+(\d+)\s+Bloo\s+(\d+)\s+Blee', '$1 $2'), ' ')"/>

  <xsl:variable name="varX" select="$vTokens[1]"/>  
  <xsl:variable name="varY" select="$vTokens[2]"/>  

  <xsl:sequence select="$varX, $varY"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**：

```
<t>Blah  123   Bloo  4567  Blee</t> 
```

**这会产生想要的正确结果**：

```
123 4567 
```

在这里，我们不依赖于知道 RegEx（可以作为参数提供）和字符串——我们只是用 RegEx 组的分隔字符串替换字符串，然后我们对其进行标记，并且`tokenize()`可以轻松地生成序列中的每个项目分配给相应的变量。

**我们不必在临时文件中找到想要的结果。树——我们只是把它们都放在一个结果序列中**。

# android - AdMob adrequest 快疯了？

> ID：11700585
> 
> 赞同：0
> 
> 时间：2012-07-28T11:24:28.797
> 
> 标签：android, admob

所以过去一天我的 AdMob 广告发生了一些奇怪的事情。

首先您应该知道，我们通常知道有人在使用我们的 Android 应用程序，因为它会在他们完成后立即将他们的分数发送到我们的服务器。

所以似乎没有人在使用它，突然之间，请求不断上升，没有任何点击。为了节省我相对较高的点击率 (CTR)，我禁用了刷新，希望只是有人打开手机并且屏幕没有休眠。然而，这并没有起到任何作用，并且在撰写本文时请求不断涌入。

有没有人经历过类似的事情？我在想这可能是一个小故障，或者 AdMob 故意搞砸了我的点击率？到现在为止，过去 2 周一切都很好。

更新：它在大约 8 小时的连续广告请求和展示后停止。原因仍然未知。但我的点击率因此受到影响，现在低于 1%。希望这不会再次发生。

# android - 设置应用程序的主题

> ID：11700587
> 
> 赞同：1
> 
> 时间：2012-07-28T11:24:42.113
> 
> 标签：android

在[*本*](http://developer.android.com/design/style/themes.html)教程中，据说应用程序有 3 个主题，但没有提到如何设置我的应用程序的主题。
所以我的问题是如何为我的应用设置主题？
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:30:41.133

## 从 SDK 源将现有主题设置为应用程序

```
<activity android:name=".MainActivity" android:theme="@android:style/Theme.NoTitlebar" /> 
```

只需您可以为您的应用设置主题..

## 设置自己的主题

而且，您还可以为您的应用创建自己的主题。为此，您必须将其放置在一个 xml 文件下`res/styles.xml`，例如 -

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="OwnTheme" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">true</item>
  </style>
</resources> 
```

这是一个主题的例子。您可以像这样创建自己的主题。创建主题后，您可以在清单文件中将其设置为您的活动 -

```
<activity android:name=".ShowZoomedImage" android:theme="@style/OwnTheme"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:30:20.617

在清单中使用它：

```
<activity
    android:name="MyActivity"
    android:theme="@android:style/Theme.Light" >
</activity> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T11:31:13.573

在你的清单文件中使用它

```
<activity
   android:name=".yourActivity"
   android:theme="@android:style/Theme.Dialog" >
</activity>

<activity
    android:name=".YourActivity2"
    android:theme="@android:style/Theme.Holo" >
</activity> 
```

# ruby-on-rails-3 - Rails 资产管道 + knockout.js

> ID：11700588
> 
> 赞同：1
> 
> 时间：2012-07-28T11:24:42.170
> 
> 标签：ruby-on-rails-3, knockout.js, asset-pipeline

我正在尝试在 Rails 3.2.6 中实现 knockout.js。我正在使用宝石[https://github.com/jswanner/knockoutjs-rails](https://github.com/jswanner/knockoutjs-rails)。

我在加载 ViewModel 时遇到问题。

这是我用于调试的 HTML

```
<div data-bind="text: ko.toJSON(users)"></div> 
```

这是从 CoffeeScript 编译的 JavaScript。该文件`users.js.coffee`通过`//= require_tree .`in包含在资产管道中`application.js`

```
(function() {

  jQuery(function() {
    var User, UserViewModel;    
    User = function(id, name) {
      var self;
      self = this;
      self.id = ko.observable(id);
      self.name = ko.observable(name);
      return self.followers_count_message = ko.computed(function() {});
    };
    UserViewModel = function() {
      var self;
      self = this;
      self.users = ko.observableArray([new User('1111', 'test name'), new User('1112', 'test name2')]);
      self.addUsers = function() {
        return self.users.push(new User('1113', 'test name'));
      };
      return self.addUsers();
    };
    ko.applyBindings(new UserViewModel());
    return alert('done');
  });

}).call(this); 
```

加载后，div 显示如下：`[null,null,null]`

奇怪的是，如果我在 jsFiddle 中实现它，它似乎可以工作。看到这个：http: [//jsfiddle.net/netwire88/HXYHU/2/](http://jsfiddle.net/netwire88/HXYHU/2/)

想法，想法？

**更新：2012 年 7 月 31 日**

我可以通过更改函数来删除`return`. 但是，我想将其移至另一个 CoffeeScript 文件。

我试过这个`users.js.coffee`，但是，我得到了错误`Uncaught TypeError: Cannot read property 'nodeType' of null`

```
User = (id, name) ->
  self = undefined
  self = this
  self.id = ko.observable(id)
  self.name = ko.observable(name)
  @

UserViewModel = ->
  self = this
  self.users = ko.observableArray([new User("1111", "test name"), new User("1112", "test name2")])
  self.addUsers = ->
    self.users.push new User("1113", "test name")
  self.addUsers()
  @

ko.applyBindings new UserViewModel() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T22:07:02.410

您应该注意到您发布的代码和小提琴中的代码之间非常*非常*重要的区别：您的视图模型返回单个属性，小提琴的视图模型没有返回。

您的代码正在创建无效的视图模型。如果您在小提琴中取消注释这些返回，它会以完全相同的方式中断。您没有发布咖啡脚本供我们查看，但这绝对是问题所在。

错误的视图模型：

```
User = function(id, name) {
      var self;
      self = this;
      self.id = ko.observable(id);
      self.name = ko.observable(name);
      return self.followers_count_message = ko.computed(function() {});
    }; 
```

好的视图模型

```
User = function(id, name) {
      var self;
      self = this;
      self.id = ko.observable(id);
      self.name = ko.observable(name);
    }; 
```

对于`UserViewModel`.

# python - 通过 Python 创建文件和目录

> ID：11700593
> 
> 赞同：28
> 
> 时间：2012-07-28T11:25:22.743
> 
> 标签：python, file, directory

我在创建目录然后打开/创建/写入指定目录中的文件时遇到问题。原因对我来说似乎不清楚。我正在使用 os.mkdir() 和

```
path=chap_name
print "Path : "+chap_path                       #For debugging purposes
if not os.path.exists(path):
    os.mkdir(path)
temp_file=open(path+'/'+img_alt+'.jpg','w')
temp_file.write(buff)
temp_file.close()
print " ... Done" 
```

我得到错误

```
OSError：[Errno 2] 没有这样的文件或目录：“某些路径名”
```

路径的形式为“带有未转义空格的文件夹名称”

我在这里做错了什么？

* * *

更新：我尝试在不创建目录的情况下运行代码

```
path=chap_name
print "Path : "+chap_path                       #For debugging purposes
temp_file=open(img_alt+'.jpg','w')
temp_file.write(buff)
temp_file.close()
print " ... Done" 
```

还是报错。更迷惑了。

* * *

更新 2：问题似乎是 img_alt，在某些情况下它包含一个“/”，这导致了麻烦。

所以我需要处理'/'。无论如何要逃避'/'还是删除是唯一的选择？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-07-28T11:33:08.357

```
import os

path = chap_name

if not os.path.exists(path):
    os.makedirs(path)

filename = img_alt + '.jpg'
with open(os.path.join(path, filename), 'wb') as temp_file:
    temp_file.write(buff) 
```

关键是`os.makedirs`用`os.mkdir`. 它是递归的，即它生成所有中间目录。见[http://docs.python.org/library/os.html](http://docs.python.org/library/os.html)

在存储二进制 (jpeg) 数据时以二进制模式打开文件。

作为对**Edit 2**的回应，如果 img_alt 有时在其中包含“/”：

```
img_alt = os.path.basename(img_alt) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-31T17:40:38.737

```
 import os
    os.mkdir('directory name') #### this command for creating directory
    os.mknod('file name') #### this for creating files
    os.system('touch filename') ###this is another method for creating file by using unix commands in os modules 
```

# c# - ASP.NET 如何处理未处理的异常？

> ID：11700595
> 
> 赞同：1
> 
> 时间：2012-07-28T11:25:53.957
> 
> 标签：c#, asp.net, exception, exception-handling, visual-studio-debugging

在为 ASP.NET 编写代码时，在附加调试器的情况下，如果您访问引发异常的网页，则会在导致异常的代码行处启动未处理的异常帮助程序。

即使您只捕获未处理的异常并且没有捕获抛出的异常，也会发生这种情况。但是，按 F5、忽略异常或未附加调试器不会导致 AppDomain 被拆除。相反，ASP.NET 无论如何都会处理未处理的异常。

这是如何工作的，并且可以在其他地方实现这样的异常处理，以便可以吞下其他未处理的异常而不是杀死整个 AppDomain 或进程？

编辑：为了澄清，我了解异常处理和 try...catch 块是如何工作的。但是，在这种情况下，调试器似乎正在考虑**未处理**的异常，同时 ASP.NET 正在将异常包装在 try...catch 中。这就是我想要效仿的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:36:20.527

> 这是如何运作的，

[asp.net](/questions/tagged/asp.net "显示标记为“asp.net”的问题")只是将执行代码包装在他们想要的任何异常处理代码中。asp.net 网页（或视图，或控制器）只是一个类，如何使用它完全取决于主机（在我们的例子中是 asp.net）。

> 如果处理它，为什么VS调试器会中断它？

[MSDN 文档](http://msdn.microsoft.com/en-us/library/x85tt0dd.aspx)中引用了一段话：

> ASP.NET 有一个顶级异常处理程序，它处理异常以向浏览器用户显示错误页面。除非打开了“仅我的代码”，否则该顶级异常处理程序将阻止未处理的异常闯入调试器。确保为 ASP.NET 调试启用“仅我的代码”。

这意味着如果您在 VS 调试选项中启用了“仅我的代码”（并且默认情况下启用），您将在您自己的代码中未处理的异常处中断，无论它们是否在您的调用者中处理。

> 可以在其他地方实现这样的异常处理，以便可以吞下其他未处理的异常而不是杀死整个 AppDomain 或进程？

你不能这样做，这是一种安全措施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:50:24.480

您的网页只是来自 IIS 和 ASP.NET 运行时的一堆方法调用，您的网页并不是在您的 appdomain 中单独运行。调用您的代码的代码在该方法调用周围有一个普通的 try/catch 块。

您可以自己创建类似的设置：

*   对于 ConsoleApplication，通过在 Main 中的所有内容周围放置一个 try/catch 块，这意味着您将捕获应用程序其他地方未处理的任何异常。
*   对于 Windows 窗体应用程序，通过处理[Application.ThreadException 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)（这允许您挂钩到 Windows 窗体的消息循环的 try/catch 块）
*   对于 WPF 应用程序，通过处理[Application.DispatcherUnhandledException 事件](http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception.aspx)（这允许您挂钩到 WPF 的消息循环的 try/catch 块）
*   ...或者也许您可以使用[AppDomain.UnhandledException 事件](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

这类程序的问题是：您应该在应用程序的哪个位置继续？

最后一个问题在 ASP.NET 中很容易解决，因为每个页面调用都是相互隔离的。用户只需再次导航到页面继续。

# java - Java字符串修剪没有效果

> ID：11700598
> 
> 赞同：21
> 
> 时间：2012-07-28T11:26:32.767
> 
> 标签：java, string, unicode, trim, spaces

Java String trim 不会为我删除空格字符。

```
String rank = (some method);
System.out.println("(" + rank + ")"); 
```

输出是`(1 )`。注意 1 右边的空格。

我必须从字符串中删除尾随空格，`rank`但既不`rank.trim()`也不`rank.replace(" ","")`删除它。

无论哪种方式，字符串`rank`都保持不变。

**编辑：完整代码**：：

```
Document doc = Jsoup.connect("http://www.4icu.org/ca/").timeout(1000000).get();
Element table = doc.select("table").get(7);
Elements rows = table.select("tr");
for (Element row: rows) {
  String rank = row.select("span").first().text().trim();
  System.out.println("("+rank+")");
} 
```

为什么我不能删除那个空间？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-28T12:22:28.927

该网站的源代码显示了特殊的 html 字符`&nbsp;`。`\u00A0`尝试在您的 java String:中搜索或替换以下内容：

那是一个牢不可破的空间。请参阅：[我有一个带有“\u00a0”的字符串，我需要用“”替换它 str_replace 失败](https://stackoverflow.com/questions/2592502/i-have-string-with-u00a0-and-i-need-to-replace-it-with-str-replace-fails)

```
rank = rank.replaceAll("\u00A0", ""); 
```

应该管用。也许添加一个 double`\\`而不是`\`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-28T11:29:24.370

您应该将修剪的结果分配回`String`变量。否则它是行不通的，因为 Java 中的字符串是*不可变*的。

```
String orig = "    quick brown fox    ";
String trimmed = original.trim(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-28T12:23:05.753

该字符是一个不间断的空格，因此不会被该`trim()`方法删除。遍历字符并打印每个字符的 int 值，以了解必须用空字符串替换哪个字符才能获得所需的内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-28T11:29:19.277

你在分配字符串吗？

```
String rank = " blabla "; 
rank = rank.trim(); 
```

不要忘记第二个作业，否则修剪后的字符串将无处可去。

您也可以在 API 中查看此类内容：http: [//docs.oracle.com/javase/7/docs/api/java/lang/String.html#trim](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#trim) ()

正如你所看到的，这个方法返回一个字符串，就像大多数对字符串进行操作的方法一样。他们返回修改后的字符串并保留原​​始字符串。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-25T08:34:06.387

我遇到了同样的问题，并且对 java 的 trim() 方法做了很少的操作。
您可以使用此代码修剪：

```
public static String trimAdvanced(String value) {

        Objects.requireNonNull(value);

        int strLength = value.length();
        int len = value.length();
        int st = 0;
        char[] val = value.toCharArray();

        if (strLength == 0) {
            return "";
        }

        while ((st < len) && (val[st] <= ' ') || (val[st] == '\u00A0')) {
            st++;
            if (st == strLength) {
                break;
            }
        }
        while ((st < len) && (val[len - 1] <= ' ') || (val[len - 1] == '\u00A0')) {
            len--;
            if (len == 0) {
                break;
            }
        }

        return (st > len) ? "" : ((st > 0) || (len < strLength)) ? value.substring(st, len) : value;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T11:35:41.677

Trim 函数返回字符串的新副本，省略了前导和尾随空格。

```
rank = rank.trim();// This will remove and save rank without leading and trailing spaces 
```

会给出你想要的结果。

如果您传递空字符串进行替换，替换方法将不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-28T11:36:19.560

由于 Java 中的 String 是不可变的，即它们无法更改。您需要将其重新分配给一些临时字符串。然后使用该字符串，您可以将其转换为 int。

```
String temp=rank.trim()
int te= Integer.parseInt(temp) 
```

# database - 如何将数据库附加到 Heroku 中的应用程序？

> ID：11700602
> 
> 赞同：21
> 
> 时间：2012-07-28T11:27:25.843
> 
> 标签：database, postgresql, heroku

我正在使用 Heroku 的 Postgres 插件，并从 Heroku Postgres 插件页面创建了一个新的生产数据库。我没有使用我的应用程序的资源页面将它直接添加到我的应用程序中。

现在我想将此数据库附加到我的应用程序，以便**heroku pg**命令识别它。

**在将我的应用程序的DATABASE_URL**配置变量设置为指向它之后，我可以使用数据库 btw ，但是**heroku pg**命令还不能识别它。

附加信息：以前的数据库是共享的，新的数据库是生产的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T21:22:56.587

您是否使用独立于应用程序的[https://postgres.heroku.com/](https://postgres.heroku.com/)站点添加了数据库？还是您只是在 Heroku 控制面板中创建了一个 postgresql 数据库？

如果您在[https://postgres.heroku.com/](https://postgres.heroku.com/)上创建了数据库，您将*无法*`heroku pg:info`通过命令看到该数据库。但是，您可以将数据库添加到应用程序中的方法是：

1.  登录[https://postgres.heroku.com/](https://postgres.heroku.com/)。
2.  单击要附加到应用程序的数据库。
3.  在“连接设置”下，单击右上角的配置按钮。
4.  然后单击“URL”选项。
5.  复制您的数据库 URL，这应该类似于“postgres://blah:blah@ec2-23-23-122-88.compute-1.amazonaws.com:5432/omg”。
6.  在您的应用程序中，在命令行上运行`heroku config:set DATABASE_URL=postgres://blah:blah@ec2-23-23-122-88.compute-1.amazonaws.com:5432/omg`

我们在那里所做的是将您的数据库分配给`DATABASE_URL`应用程序中的环境变量。这是您在本地为应用程序提供数据库时默认使用的变量，因此理论上，分配此值对您来说应该可以正常工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-11-28T16:40:54.287

> Heroku 插件现在可以跨应用程序附加，并且可以在单个应用程序上多次附加。

```
heroku addons:attach ADDON_NAME -a APP_NAME 
```

*来源：[https ://devcenter.heroku.com/changelog-items/646](https://devcenter.heroku.com/changelog-items/646)*

* * *

要知道插件的名称，请执行以下操作：

```
heroku addons 
```

*来源：[https ://devcenter.heroku.com/articles/managing-add-ons](https://devcenter.heroku.com/articles/managing-add-ons)*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:39:04.180

要将您在[https://postgres.heroku.com/](https://postgres.heroku.com/)创建的数据库附加到您正在使用的实际 heroku 应用程序中，您不能使用任何[pg 备份命令](https://devcenter.heroku.com/articles/pgbackups)，据我所知，没有支持 Heroku 将数据库附加到 Heroku 应用程序的方式。

但是，您可以使用 pg_dump 创建数据库备份，然后使用 pg_restore 填充附加到应用程序的新数据库：

```
pg_dump -i -h hostname -p 5432 -U username -F c -b -v -f "backup-filename" database_name 
```

完成后，您可以使用以下内容填充新数据库：

```
pg_restore -i -h new_hostname -p 5432 -U new_username -d new_database_name -v "same_backup_filename" 
```

即使您从“基本计划”升级到“起重机计划”，您仍然需要进行备份和恢复，但是由于数据库已经附加到您的应用程序，您可以使用 heroku 备份命令。

# php - URL Router 和 Dispatcher 有什么区别？

> ID：11700603
> 
> 赞同：34
> 
> 时间：2012-07-28T11:27:45.457
> 
> 标签：php, oop, url-rewriting, url-routing

我想知道 URL Router 和 Dispatcher 的区别，因为在网上搜索了一些有趣的东西，只是不知道是因为它们相似，还是因为它们将各自的功能颠倒了。谁能告诉我它是什么，每个是什么，以及一个例子？

不知道URL Router 和Dispatcher 的区别，他们在网上的内容问题，有时候Dispatcher 好像Router，Router 好像Dispatcher，结果不知道各自的权限是什么每一项，以及如何实施每一项。

谢谢你。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-07-29T17:50:34.620

框架和库如何解释 Router 和 Dispatcher 的职责将有所不同。我在下面详细介绍的是我如何**解释**这两个服务的职责。这并不是说这是解释它的唯一方法或其他解释是错误的。

## 概念

### 路由

这有点像在加油站或便利店问路。你正在穿过城镇，你需要弄清楚如何到达最近的酒店。你进去问服务员，他们会指出你正确的方向，或者至少你希望方向是正确的。路由就是这样。请求进入资源，路由器提供请求到达正确资源所需的方向。

在大多数主要框架中，您会将特定的请求 URL 路由到将被调用以完成请求的对象和方法。您经常会看到路由器还从 URL 中解析出动态参数。例如，如果您通过`/users/1234`where `1234`is the user ID 访问用户，路由器将解析出 ID 部分并将其作为资源方向的一部分提供。

### 调度

调度使用来自路由步骤的信息来实际生成资源。如果路由步骤是询问方向，那么调度是遵循这些方向的实际过程。调度确切地知道要创建什么以及生成资源所需的步骤，但只有在从路由器获得指示之后。

## 实现

这些示例实现故意非常简单和幼稚。如果没有大幅改进，您不会希望在任何类型的生产环境中使用它。

在这个例子中，我们只是路由到一个可调用函数，而不是路由到一个对象和方法。这也表明您*不需要*路由到对象；只要调度程序可以正确获取正确的资源，您就可以路由到您想要的任何数据。

首先，我们需要一些东西来对抗。让我们创建一个可以匹配的简单请求对象。

```
<?php

class Request {

    private $method;
    private $path;

    function __construct($method, $path) {
        $this->method = $method;
        $this->path = $path;
    }

    function getMethod() {
        return $this->method;
    }

    function getPath() {
        return $this->path;
    }

} 
```

现在我们可以匹配一些东西了，让我们来看看一个简单的路由器实现。

```
<?php

class Router {

    private $routes = [
        'get' => [],
        'post' => []
    ];

    function get($pattern, callable $handler) {
        $this->routes['get'][$pattern] = $handler;
        return $this;
    }

    function post($pattern, callable $handler) {
        $this->routes['post'][$pattern] = $handler;
        return $this;
    }

    function match(Request $request) {
        $method = strtolower($request->getMethod());
        if (!isset($this->routes[$method])) {
            return false;
        }

        $path = $request->getPath();
        foreach ($this->routes[$method] as $pattern => $handler) {
            if ($pattern === $path) {
                return $handler;
            }
        }

        return false;
    }

} 
```

现在我们需要一些方法来调用`$handler`为给定请求配置的。

```
<?php

class Dispatcher {

    private $router;

    function __construct(Router $router) {
        $this->router = $router;
    }

    function handle(Request $request) {
        $handler = $this->router->match($request);
        if (!$handler) {
            echo "Could not find your resource!\n";
            return;
        }

        $handler();
    }

} 
```

现在，让我们将它们放在一起并展示如何使用这些简单的实现。

```
<?php

$router = new Router();
$router->get('foo', function() { echo "GET foo\n"; });
$router->post('bar', function() { echo "POST bar\n"; });

$dispatcher = new Dispatcher($router);

$dispatcher->handle(new Request('GET', 'foo'));
$dispatcher->handle(new Request('POST', 'bar'));
$dispatcher->handle(new Request('GET', 'qux')); 
```

您可以通过查看[http://3v4l.org/gbsoJ](http://3v4l.org/gbsoJ)查看此实现的示例。

## 总结

这个示例实现应该传达路由和调度的概念。实际上，执行这些操作比我的示例要多得多。路由器通常会使用正则表达式来匹配请求，并且在匹配时可能会查看其他请求属性。此外，您将看到一些库使用与路由器交互的解析器，以便您可以传递的不仅仅是可调用函数。基本上，解析器将确保`$handler`匹配的对象可以转换为可调用的函数。

此外，您应该考虑使用大量示例和实现。对于我的个人项目，我喜欢[FastRoute](https://github.com/nikic/FastRoute)的易用性和性能。但是，几乎所有主要框架都有自己的实现。你也应该检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-23T12:24:25.787

Route 是对资源的引用，而 Dispatching 是获取所述资源的动作。

# android - 如果您有设备密钥，是否可以访问另一个应用程序数据库？

> ID：11700611
> 
> 赞同：2
> 
> 时间：2012-07-28T11:28:37.827
> 
> 标签：android

我正在尝试访问另一个应用程序数据库，我知道它位于

```
 "/data/data/jp.co.xxx.xxx.framework.database/databases/SETTING". 
```

我有设备密钥并已使用设备密钥签署了我的 apk，但我仍然无法`open the database.`

只是我没有共享用户ID吗`this possible`？`device key,`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:04:02.863

> 这是否可能仅使用设备密钥，我没有共享用户 ID？

不正常。您的进程仍将作为不同的用户 ID 运行。使用设备密钥签名将有助于获得`signature`Android 级别的权限，但不会影响您读取其他应用程序文件的能力。

*如果*另一个应用程序也由相同的密钥签名并且*您*可以同步`sharedUserId`值，那么您可以访问数据。或者，如果您以 root 身份运行，则可以访问数据。或者，最好的答案是让其他应用程序的作者与您一起公开您可以使用的 API，而不是直接侵入他们的数据库。

# php - 使用 PHP 获取来自错误 404 页面的 URL 用户？

> ID：11700612
> 
> 赞同：0
> 
> 时间：2012-07-28T11:28:50.027
> 
> 标签：php, apache, .htaccess, url, http-status-code-404

我目前正在为网站项目构建错误 404 页面。如果找不到他们请求的页面，则使用 .htaccess 将人们重定向到此页面。

我想在自定义错误页面上显示它们来自的 URL 或链接，但我不知道如何。我试了一下：

```
<?php
function curPageURL() {
  $pageURL = 'http';
  if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
  $pageURL .= "://";
  if ($_SERVER["SERVER_PORT"] != "80") {
    $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 }
 return $pageURL; // Finally, Returns the page URL
}
?> 
```

然后我将 PHP 函数添加到我的错误页面：

```
The Page You Came From Was: <?php echo curPageURL(); ?> 
```

可悲的是，这最终所做的只是显示我的错误页面的 URL，而不是用户刚刚被重定向的页面。

有人有想法么？

亚当。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T11:33:57.917

你应该使用

```
$_SERVER['HTTP_REFERER'] 
```

但它不会总是被设置。

# php - 无法在在线服务器中设置会话变量

> ID：11700617
> 
> 赞同：1
> 
> 时间：2012-07-28T11:29:47.637
> 
> 标签：php, session

我使用会话变量进行登录表单验证。当用户提供正确的名称和密码时，会话变量将设置并且页面将重定向。该页面检查会话变量并加载相关内容。
我的代码在本地服务器中运行良好，但在在线服务器中，会话变量未设置。

**管理员.php**

```
<?php
    session_start();
    $admin = 0;
    if(isset($_SESSION['admin'])){
          $admin = $_SESSION['admin'];
    }
    if($admin == 0){
?>
 <form action="" class="login">
      <label>User Name :</label>
      <input type="text" class="uname"/>
      <label>Password :</label>
      <input type="password" class="pwd"/>
      <input type="submit" class="lSubmit" value="SUBMIT"/>
      <p class="alert lAlert">test alert</p>
 </form>
<?php }elseif($admin == 1){ ?>
      <h1>Welcome Site Admin..!!</h1>
<?php } ?> 
```

**jQuery**

```
$('.lSubmit').click(function(){
var name = $('.uname').val();
var pwd = $('.pwd').val();
    $.post("validation/login.php",{name:name,pwd:pwd}).success(function(data){
       var obj = jQuery.parseJSON(data);
       if(obj.success == 1){
           $('.alert').css('color','#067800');
           window.location = "/admin.php";
       }else{
           $('.alert').css('color','#CC0000');
       }
       $('.lAlert').text(obj.msg);
       $('.lAlert').fadeIn('slow');
    });
    return false;
}); 
```

**验证/login.php**

```
<?php
     session_start();
     $name = $_POST['name'];
     $pwd = $_POST['pwd'];
     $err['success'] = 0;
     $err['msg'] = '';
     if($name == ''){
         $err['msg'] = 'Name required';
     }else if($pwd == ''){
         $err['msg'] = 'Password required';
     }else if($name != 'admin'){
         $err['msg'] = 'Wrong username';
     }else if($pwd != 'admin'){
         $err['msg'] = 'Wrong password';
     }else{
         $err['msg'] = 'Success';
         $err['success'] = 1;
         $_SESSION['admin'] = 1;
     }
     echo json_encode($err);
 ?> 
```

当用户提供名称和密码为**admin**时，它已成功在本地服务器中加载欢迎文本。但在在线服务器中，表单只是再次加载。未`$_SESSION['admin']`在在线服务器中设置。有谁能够帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T11:43:26.737

看起来您的在线服务器没有为网络服务器用户提供足够的权限来将会话存储在`/var/lib/php5`.

你应该让你的主人检查一下。检查是否是会话问题的最简单方法是编写简单的脚本：

```
if (empty($_SESSION['some_counter'])) {
    $_SESSION['some_counter'] = 0;
}

echo $_SESSION['some_counter']++; 
```

然后只需刷新页面几次。如果变量未更改 - 那么您可以确定这是会话管理问题，应该由您的托管服务提供商解决。

如果他们不想帮助您 - 您可以将会话[文件夹更改](http://php.net/manual/en/function.session-save-path.php)为另一个目录，看看会发生什么。

**编辑**：

您可以尝试将存储文件夹更改`/tmp`为例如，只是为了检查 - 通常，它是服务器上所有用户的公共文件夹。但是将会话存储在公共场所是不好的做法......

```
session_save_path('/tmp'); 
```

如果它没有帮助 - 尝试使用`ini_set()`

```
ini_set('session.save_path', '/tmp'); 
```

您应该在会话开始**之前**调用这些函数之一。

应该有帮助；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:48:20.583

**尝试这个：**

```
<?php
session_start() ;
$err = array() ;

if ((empty($_POST["name"])) or ($_POST["name"] != "admin")) {
  $err[] = "Wrong username" ;
}

if ((empty($_POST["pwd"])) or ($_POST["pwd"] != "admin")) {
  $err[] = "Wrong password" ;
}

if (count($err) == 0){
  $message = "Success" ;
   $_SESSION['admin'] = true;  
}
?> 
```

**注意：**在将任何内容输出到您的网页之前， 您必须使用**session_start() 。**在启动此功能之前没有回声，没有符号，没有 html。将其放在网页的顶部。此外，如果您将它放在顶部，但仍无法启动会话，则**编码**可能是问题，因为**空字符串**也被视为符号。**在没有 BOM 的情况下以 UTF-8**编码您的文件

 **[使用记事本++](http://notepad-plus-plus.org/)

希望这可以帮助 ：）**

# c# - 在简单的射击游戏中实现子弹/敌人碰撞检测有困难 (C# 2010/XNA 4.0)

> ID：11700619
> 
> 赞同：0
> 
> 时间：2012-07-28T11:29:56.530
> 
> 标签：c#, xna, 2d, collision-detection

首先，我很抱歉让另一个线程问同样的问题（或多或少），但我迫切需要一个答案，而另一个线程已经死了。

我目前正在为学校做一个项目，我正在尝试制作一个简单的 2d 射击游戏。问题是，我不知道如何在我的两个列表（如标题中所述的子弹和敌人）之间实现碰撞检测。我对编程很陌生，一直在使用各种教程作为指导，一些教程说使用嵌套的 for 循环和 if 语句，而我看到其他人使用 if 语句，哦，我使用的是矩形碰撞方法而不是我认为它被逐个像素地调用。提前致谢！:)

这是我的代码：

**主要的：**

```
namespace Software_Design_Major_Project 
```

{

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    Texture2D ship; // Declaring the sprite
    Vector2 shipposition = Vector2.Zero; // Creating a vector for the sprite.

    List<bullets> bullets = new List<bullets>(); // a list is created here so that there can be multiple copies of this item at once without writing the extra code.
    Texture2D texture;

    KeyboardState pastkey;

    //bullet sound effect.
    SoundEffect effect;

    List<enemies> Enemies = new List<enemies>();       
    Random random2 = new Random();        

    float spawn = 0;

    public enum GameState 
    {
        MainMenu,            
        Playing,

    }
    GameState CurrentGameState = GameState.MainMenu;

    int screenWidth = 600, screenHeight = 480;

    cButton play;                    

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
        //changes width of screen to 600px.
        graphics.PreferredBackBufferWidth = 600;

    }

    protected override void Initialize()
    {

        base.Initialize();
    }

    protected override void LoadContent()
    {

        spriteBatch = new SpriteBatch(GraphicsDevice);
         // This statement positions the ship.
        ship = Content.Load<Texture2D>("ship"); // Loads the ship into the memory.
        shipposition = new Vector2((graphics.GraphicsDevice.Viewport.Width / 2) - (ship.Width / 2), 420); 
        // loads bullet sprite
        texture = Content.Load<Texture2D>("bullet");

        graphics.PreferredBackBufferWidth = screenWidth;
        graphics.PreferredBackBufferHeight = screenHeight;            

        graphics.ApplyChanges();
        IsMouseVisible = true;

        play = new cButton(Content.Load<Texture2D>("play"), graphics.GraphicsDevice);
        play.setPosition(new Vector2(225, 220));

        effect = Content.Load<SoundEffect>("laser");            

    }

    protected override void UnloadContent()
    {

    }

    protected override void Update(GameTime gameTime)
    {
        spawn += (float)gameTime.ElapsedGameTime.TotalSeconds;
        // spawns enemy every second.
        foreach (enemies enemy in Enemies)
            enemy.update(graphics.GraphicsDevice);

        MouseState mouse = Mouse.GetState();

        switch (CurrentGameState)
        {
            case GameState.MainMenu:

                if (play.isClicked == true)
                    CurrentGameState = GameState.Playing;

                play.Update(mouse);

                break;

            case GameState.Playing:

                if (Keyboard.GetState(PlayerIndex.One).IsKeyDown(Keys.E))
                {
                    Exit();
                }

                break;

        }

        // Allows the ship to move left and stops the ship going off the screen.          
        if (Keyboard.GetState(PlayerIndex.One).IsKeyDown(Keys.Left) && shipposition.X >= 0)
        {
            shipposition.X -= 7;
        }// same as above except for the right direction.
        if (Keyboard.GetState(PlayerIndex.One).IsKeyDown(Keys.Right) && shipposition.X < ((graphics.GraphicsDevice.Viewport.Width) - (ship.Width)))
        {
            shipposition.X += 7;
        }

        // this prevents the player from holding down space to spam bullets.
        if (Keyboard.GetState().IsKeyDown(Keys.Space) && pastkey.IsKeyUp(Keys.Space))
        {
            bullets bullet = new bullets(texture);
            // the ships coordinates are gathered from the top left hand corner of the sprites rectangle therefore 'new Vector2(shipposition.X + 32, shipposition.Y)' had to
            // be added rather than just = 'shipposition' to avoid having the bullets shoot from the wing. 
            bullet.position = new Vector2(shipposition.X + 32, shipposition.Y);
            bullets.Add(bullet);
            effect.Play();

        }

        pastkey = Keyboard.GetState();

        //calls upon the update method from the bullets class.

        foreach (bullets bullet in bullets)
            bullet.update();

            LoadEnemies();
        base.Update(gameTime);

    }       

        public void LoadEnemies() 
        {
            int randX = random2.Next(10, 540);

            if (spawn <= 1) 
            {
                spawn = 0;
                //limits amount of enemies on screen to 5.
                if (Enemies.Count() < 5)
                    Enemies.Add(new enemies(Content.Load<Texture2D>("enemy"), new Vector2(randX, -100)));
            }
            for (int i = 0; i < Enemies.Count; i++) 
            {
                if (!Enemies[i].enemyVisble)
                {
                    //removes the enemies when they go off screen.
                    Enemies.RemoveAt(i);
                    i--;
                }

            }
        }

        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);
            // calls draw method in bullets class
            foreach (bullets bullet in bullets)
            {
                bullet.Draw(spriteBatch);
            }
            spriteBatch.Begin(SpriteSortMode.BackToFront, BlendState.AlphaBlend);
            spriteBatch.Draw(ship, shipposition, Color.White); // draws ship sprite 

            switch (CurrentGameState)
            {
                case GameState.MainMenu:
                    play.draw(spriteBatch);
                    spriteBatch.Draw(Content.Load<Texture2D>("menu"), new Rectangle(0, 0, screenWidth, screenHeight), Color.White);

                    break;

                case GameState.Playing:

                    break;

            }

            foreach (enemies enemy in Enemies)
            {
                enemy.draw(spriteBatch);
            }

             spriteBatch.End();

            base.Draw(gameTime);
        }            

} 
```

}

**子弹类：**

```
namespace Software_Design_Major_Project 
```

{

```
 class bullets // A new class needs to be created to allow for bullets.
      {
            public Texture2D texture;
            public Vector2 position;     
            public bool isvisible;                                  

            public bullets(Texture2D newtexture) 
            {
                texture = newtexture;
                isvisible = false;
            }

            public void update() 
            {
                position.Y -= 3; // velocity of the bullet                    

            } 

            public void Draw(SpriteBatch spriteBatch) 
            {
                spriteBatch.Begin();
                spriteBatch.Draw(texture, position, Color.White);
                spriteBatch.End();
            }
      } 
```

}

**敌人等级：**

```
namespace Software_Design_Major_Project
{
    public class enemies
    {
        public Texture2D enemyTexture;
        public Vector2 enemyPosition;        
        public bool enemyVisble = true;
        public float enemyMoveSpeed;
        public int Value;
        Random random = new Random();
        int randY; 

        public enemies (Texture2D newEnemyTexture, Vector2 newEnemyPosition) 
        {
            enemyTexture = newEnemyTexture;
            enemyPosition = newEnemyPosition;
            randY = random.Next(1, 4);
            enemyMoveSpeed = randY;
            enemyVisble = true;                        
            Value = 100;            

        }

        public void update(GraphicsDevice graphics) 
        {
            enemyPosition.Y += enemyMoveSpeed;

            if (enemyPosition.Y > 500)
                enemyVisble = false;             

        }

        public void draw(SpriteBatch spriteBatch) 
        {

            spriteBatch.Draw(enemyTexture, enemyPosition, Color.White);            
            enemyVisble = true;

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:24:00.600

你有几种方法可以做到这一点......其中一种可能会为敌人和子弹添加无线电属性......

```
 for (int bi=0; bi<bullets.count; )
  {
      bool should_destroy_bullet = false;
      Bullet b = bullets[bi];
      for (int ei=0; ei<enemies.count; )
      {
         Enemy e = ememies[ei];
         if (b.radio + e.radio < Vector2.Distance(b.Pos, e.Pos))  // Check collision
         {
             e.Died();
             enemies[ei] = enemies[enemies.Count-1];
             enemies.RemoveAt(enemies.Count-1);
             should_destroy_bullet = true;  // This lets a bullet kill more than one enemy
         } else ei++;
      }

      if (should_destroy_bullet) {
            b.Died();
            bullets[bi] = bullets[bullets.count-1];
            bullets.RemoveAt(bullets.count-1);
      } else bi++;
  } 
```

或者你可以为每个精灵建立一个矩形并检查它们是否相交......

```
 if (b.Bounds.Intersects(e.Bounds)) .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T01:39:21.730

勾股定理可以为你工作。（A平方加B平方=C平方）让你的玩家和敌人有一个半径。把它放在你的构造函数中。

```
public float radius = 15; 
```

将以下内容放入更新无效/子类中，以便每秒发生一次。使玩家的 X 位置浮动并减去子弹的 X 位置。平方它。

```
float XDist = Math.Pow(player1.location.X - bullet.location.X,2); 
```

使播放器的 Y 位置浮动并减去它的 Y 位置`bullet.Square`。

```
float YDist = Math.Pow(player1.location.X - bullet.location.X,2); 
```

做一个浮点数来计算 Xdist 和 Ydist 之和的平方根。

```
float actualDist = Math.Sqrt(Xdist + Ydist); 
```

现在如果你的玩家的半径小于玩家和子弹之间的距离，子弹已经击中了玩家。

```
if(actualDist < radius)
   bullethit == true; 
```

# django - 其他模型字段上的 Django 模型继承

> ID：11700631
> 
> 赞同：3
> 
> 时间：2012-07-28T11:31:06.710
> 
> 标签：django, django-models, django-orm, django-inheritance

我有以下型号：

```
class Engine(models.Model):
    ...
    def speed(self):
        return 100
    objects = InheritanceManager()

class TurboEngine(Engine):
    ...
    def speed(self):
        return 500

class Car(models.Model):
    ...
    engine = models.ForeignKey(Engine) 
```

不，我在 a 上使用 DetailView `Car`，`TurboEngine`但`car.engine.speed()`返回 100。如何让它选择正确的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T12:08:16.653

这是一个非常好的和有趣的问题，我们在 2 或 3 年前遇到了同样的问题：

```
class RealInstaceProvider(object):
    def get_real_instance(self):
        """
        Makes a SQL sentence which does the JOIN with its real model class
        """

        if hasattr(self, '_real_instance'):  # try looking in our cache
            return self._real_instance
        subclasses = self.__class__.__subclasses__()
        if not subclasses:  # already real_instance
            real_instance = getattr(self, self.__class__.__name__, self)
            self._real_instance = real_instance
            return real_instance
        else:
            subclasses_names = [cls.__name__.lower() for cls in subclasses]
            for subcls_name in subclasses_names:
                if hasattr(self, subcls_name):
                    self._real_instance = getattr(self, subcls_name, self).get_real_instance()
                    return self._real_instance
            self._real_instance = self
            return self

class Engine(models.Model, RealInstaceProvider):
    ...
    def speed(self):
        return 100
    objects = InheritanceManager()

class TurboEngine(Engine):
    ...
    def speed(self):
        return 500

class Car(models.Model):
    ...
    engine = models.ForeignKey(Engine) 
```

你必须访问下一个方法：car.engine.get_real_provider().speed()

# c# - 如何创建嵌套的项目符号列表

> ID：11700632
> 
> 赞同：2
> 
> 时间：2012-07-28T11:31:09.667
> 
> 标签：c#, asp.net, listitem, bulletedlist

我正在将 ASP.net 与 C# 一起使用，我想要一个可以动态编码的列表，看起来像这样：

*   菜单项 A
    *   子菜单链接 1
    *   子菜单链接 2
    *   子菜单链接 3

到目前为止，我已经设法通过这样做创造了第一个过去：

```
BulletedList MainUl = new BulletedList();
MainUl.DisplayMode = BulletedListDisplayMode.HyperLink;
ListItem item = new ListItem("Menu Item A", "http://www.google.com");
MainUl.Items.Add(item);            
panel.Controls.Add(MainUl); 
```

问题是我不知道如何将其他子项嵌套在主“菜单项 A”下

任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:47:13.167

或者，您可以将`DataControl`（DataList、Repeater、GridView）与`BulletedList`. 您应该尝试[Menu 或 TreeView](http://msdn.microsoft.com/en-us/library/ecs0x9w5%28v=vs.80%29.aspx)控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:50:24.907

尝试使用此代码

```
<asp:Menu ID="Menu1" runat="server" StaticDisplayLevels="3">
  <Items>
    <asp:MenuItem Text="Menu Item A" Value="0">
      <asp:MenuItem Text="Sub Menu Link 1" Value="1"></asp:MenuItem>
      <asp:MenuItem Text="Sub Menu Link 2" Value="2"></asp:MenuItem>
      <asp:MenuItem Text="Sub Menu Link 3" Value="3"></asp:MenuItem>
    </asp:MenuItem>
  </Items>
</asp:Menu> 
```

或者这段代码

```
<asp:TreeView ID="MyTreeView" Runat="server">
  <Nodes>
    <asp:TreeNode Value="0" Expanded="True" Text="Menu Item A">
      <asp:TreeNode Text="Sub Menu Link 1" Value="1" />
      <asp:TreeNode Text="Sub Menu Link 2" Value="2" />
      <asp:TreeNode Text="Sub Menu Link 3" Value="3" />
    </asp:TreeNode>
  </Nodes>
</asp:TreeView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:54:37.110

使用树视图

```
 protected void Page_Load(object sender, EventArgs e)
 {
 TreeNode pn = new TreeNode("Menu Item A");
     TreeNode cn1 = new TreeNode("<a href='http://www.google.com.pk/' >Sub Menu Link 1</a>");
    TreeNode cn2 = new TreeNode("<a href='http://www.google.com.pk/' >Sub Menu Link 2</a>");
    TreeNode cn3 = new TreeNode("<a href='http://www.google.com.pk/' >Sub Menu Link 3</a>");

    TreeView tv = new TreeView();
    tv.Nodes.Add(pn);

    tv.Nodes[0].ChildNodes.Add(cn1);
    tv.Nodes[0].ChildNodes.Add(cn2);
    tv.Nodes[0].ChildNodes.Add(cn3);        

    panel.Controls.Add(tv);
 } 
```

输出：

```
Menu Item A
Sub Menu Link 1
Sub Menu Link 2
Sub Menu Link 3 
```

# javascript - 合并属性上的javascript对象

> ID：11700636
> 
> 赞同：0
> 
> 时间：2012-07-28T11:31:38.467
> 
> 标签：javascript, object, join

我所拥有的是一个具有三个成员的对象。这些成员中的每一个都有一个对象数组，每个对象都有新成员。因此访问“内部”成员将像这样完成。

```
outerObject.outerObjectMember[innerObjectPlacementInArray].innerObjectMember; 
```

在三个外部成员中的每一个中，数组中都有一个内部对象，其值 (id) 等于其他两个外部成员内部对象成员中的值。两个外部成员中都没有重复的 ID。我想要做的是创建通过在 (id) 值上连接所有内部对象来创建的对象，从而产生具有相同 id 的每个内部成员的属性的对象。

最后，这些对象应该在一个数组中。

我知道它可能可以使用很多循环和 ifs 来完成，但我想知道是否存在任何方法，或者是否有人有一个很好且快速（性能方面）的解决方案

这有意义还是需要进一步澄清？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:05:23.597

所以你想改变这个：

```
var outer = {
    om1 = [
        im1_1, common_id, im1_3...
    ],
    om2 = [
        im2_1, im2_2, common_id...
    ],
    om3 = [
        common_id, im3_2, im3_3...
    ]
} 
```

进入……究竟是什么？

我知道这不太对，但我正在看奥运会，我需要睡觉。也许这可以帮助您为其他人澄清。

无论如何，您需要使用一两个循环:)

# sqlite - SQLite 在 C# 中没有这样的表

> ID：11700638
> 
> 赞同：0
> 
> 时间：2012-07-28T11:31:43.760
> 
> 标签：sqlite

**我编写了这个 C# 代码来将一个文本数据插入到我的数据库表中：**

```
SQLiteConnection con = new SQLiteConnection("Data Source=tDB1.sqlite;Version=3;");
string q1 = "INSERT INTO tMembers(mName) VALUES(?)";

SQLiteCommand cmd1 = new SQLiteCommand(q1, con);
cmd1.Parameters.AddWithValue("@mName", txtName.Text);

con.Open(); 
cmd1.ExecuteNonQuery(); 
con.Close(); 
```

我将 tDB1.sqlite 复制到我的程序文件夹并在 sqlite 中创建 tMembers 表。

当我运行我的程序时，程序调试器显示 ""cmd1.ExecuteNonQuery();"" 行并向我显示：SQLite 错误没有这样的表

有什么可以帮助我的吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:45:09.250

仅基于当前目录查找文件有点弱。如果您确定数据库完全放置在可执行文件的相同目录中（即从 Visual Studio $ 调试时，`projectdir$\bin\debug`您可以强制执行路径，如下面的代码所示：

```
SQLiteConnection con = new SQLiteConnection(string.Format("Data Source={0};Version=3;"
Path.Combine(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location),"tdb1.sqlite"))
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T02:53:20.817

更改命令字符串

```
string q1 = "INSERT INTO tMembers(mName) VALUES(?)"; 
```

至

```
string q1 = "INSERT INTO tMembers(@mName) VALUES(?)"; 
```

列名不需要保持对应，但在执行整个命令时必须与args名一致。有关此的更多信息，您可以在 google 中搜索“ [PL/SQL ”。](http://en.wikipedia.org/wiki/PL/SQL)

此外，您是否使用“VALUES（？）”执行此命令？我不确定这是否可行`INSERT INTO tMembers(@mName) DEFAULT VALUES`，如果没有 NOT NULL 约束，您可以改为执行。

# visual-studio-2010 - 无法让 GLEW 与 VS2010 一起工作，链接器错误

> ID：11700643
> 
> 赞同：1
> 
> 时间：2012-07-28T11:32:09.907
> 
> 标签：visual-studio-2010, opengl, linker, glew

我正在尝试学习 OpenGL 并使用 openglbook.com 作为我的参考。我正在尝试让 GLEW 和 freeglut 在我的计算机上工作，所以我开始通过他为让他们在这里与 Visual Studio 一起工作而制定的步骤开始：http: [//openglbook.com/setting-up -opengl-glew-and-freeglut-in-visual-c](http://openglbook.com/setting-up-opengl-glew-and-freeglut-in-visual-c)。我正在认真对待它，唯一的区别是我使用的是 Visual Studio 2010 Ultimate。

当我尝试使用 GLEW 时出现此问题；发生这种情况时，我收到链接器错误。以下是错误消息的全文：

```
1>------ Build started: Project: gl1, Configuration: Debug Win32 ------
1>Build started 2012/07/28 20:12:19.
1>InitializeBuildStatus:
1>  Touching "Debug\gl1.unsuccessfulbuild".
1>ClCompile:
1>  All outputs are up-to-date.
1>ManifestResourceCompile:
1>  All outputs are up-to-date.
1>main.obj : error LNK2019: unresolved external symbol __imp__glewGetErrorString@4 referenced in function _Initialize
1>main.obj : error LNK2019: unresolved external symbol __imp__glewInit@0 referenced in function _Initialize
1>c:\users\magpie\documents\visual studio 2010\Projects\gl1\Debug\gl1.exe : fatal error LNK1120: 2 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.84
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

有什么帮助吗？当我第一次遇到这个错误时，我尝试从源代码编译 GLEW，但这也没有解决它（假设我做得正确）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T18:25:53.577

这个错误意味着编译器找不到头文件中描述的方法的实现。要使用您的应用程序静态编译 GLEW，请将 glew32.lib 文件添加到库搜索目录（项目属性 -> VC 搜索目录）。

# python - 必须使用全局访问本地变量（不知道为什么）python；基维

> ID：11700648
> 
> 赞同：0
> 
> 时间：2012-07-28T11:33:05.703
> 
> 标签：python, global, local, kivy

我最近下载了 Kivy，因为它为我提供了最易理解的教程和文档等。我尝试过 pygame 和 cocos，但从来没有打过基础，而使用 Kivy 很容易。

所以这是我的问题，我做了一个乒乓球游戏，我试图通过停止乒乓球来暂停游戏，然后在它未暂停时重新开始（通过改变它的速度）。

这是我的代码：

```
class PongGame(Widget):
   ...

    def _on_keyboard_down(self, keyboard, keycode, text, modifiers):
        if keycode[1] == 'escape':
        #Why doesnt it work without global?
        #If I don't use a global i get "tempBallVelocity referenced before assignment
            global tempBallVelocity
            tempBallVelocity = self.ball.velocity
            self.ball.velocity = 0,0

        if keycode[1] == '`':
            #Make the ball go again, thus exiting pause
            #This is where the error occurs if I don't use global
            self.ball.velocity = tempBallVelocity 
```

正如您在评论中看到的，如果我不使用全局，我会在分配错误之前被引用。但这是一个局部变量，我不明白为什么会这样。

有人有想法么？谢谢？

编辑：为了确保每个人都清楚我的意图，我不想使用全局变量，但这是唯一可行的方法。我宁愿不使用全局变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:45:29.793

您在函数中的代码没有缩进，这只是一个复制错误吗？如果不是，我想知道为什么您没有收到错误消息。

`tempBallVelocity`编辑：好的，当你调用函数时设置变量很容易，`'escape'`但是函数退出并且你丢失了变量。如果你然后用'backtick'调用它，你还没有设置变量`tempBallVelocity`，最好的解决方案可能是： `self.tempBallVelocity = self.ball.velocity`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:03:03.493

~~如果您再次修复缩进错误，您将看到：~~ 您可以看到：

1.  转义`escape`应该在没有全局变量的情况下工作，但是`tempBallVelocity`将被视为局部变量。如果要修改全局变量，则需要添加全局声明以告诉 python`tempBallVelocity`不是本地的而是全局的。

2.  在第二种情况下，`tempBallVelocity`如果您不输入转义块，则不会在本地初始化，因此不能用作本地[RValue](http://en.wikipedia.org/wiki/Value_%28computer_science%29)。在这种情况下，python 应该在类之外寻找变量。真的`tempBallVelocity`是全局变量吗？

备注：如果情况是排他的，你应该使用`elif`而不是`if`第二种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-23T03:01:27.350

每次你在一个标识的代码块中设置一个变量，一旦你离开那个代码块，变量就会被销毁，回到之前的标识；

如果你写

```
if True:
    foo = 'foo value, which is a string (?)'
    print foo 
```

在一个巨大的脚本中，python 只在 if 语句“内部”处理 foo 变量，一旦它结束并退出，为了使事情更快， foo 会被完全忘记，据了解，如果你将变量设置在 a语句，您只能在该语句中使用它。

如果你想做这样的事情

```
if True:
    foo = 'foo value'

# Right now foo has been trashed

if True:
    print foo
    # Raises an error 
```

您必须在“if”语句之外设置 foo 变量

```
foo = ''

if True:
    foo = 'foo value'

# Right now foo still exists and keeps it's recently changed value

if True:
    print foo
    # prints 'foo value' 
```

或者您也可以通过将 foo 设置为全局变量来做到这一点，这样一旦您超出“if”语句，它就不会被破坏

```
if True:
    global foo
    foo = 'foo value'

# foo still exists as it's a global variable

if True:
    print foo
    # There's no reason so it wouldn't work 
```

但在大多数情况下，这可能是不必要的和令人困惑的，如果您开始将所有内容都设为全局，那么这可能会产生问题，因此您只使用一次的变量在程序期间会在您的设备内存中无用地累积。

现在你正在写一个类，所以做你正在做的事情的正确方法是（从我的角度来看）像这样在类中存储“tempBallVelocity”变量

```
class PongGame(Widget):
   ...

    def _on_keyboard_down(self, keyboard, keycode, text, modifiers):
        if keycode[1] == 'escape':
            self.tempBallVelocity = self.ball.velocity
            self.ball.velocity = 0,0

        if keycode[1] == '`':
            self.ball.velocity = self.tempBallVelocity 
```

看起来它不尊重我刚刚告诉你的规则，但这里的问题是，当你写 'self.tempBallVelocity = ...' 时，你将信息存储在 self 中，这是 PongGame 对象的快捷方式您将实例化以运行将运行该方法的游戏，因此当您退出该方法时变量就存储在那里。

我希望这个答案对你有帮助，你应该对 python 有更扎实的了解，[Learn Python The Hard Way](http://learnpythonthehardway.org/)是一个免费的 html 版本的书的网站，对我很有用。

再见！:D

# java - java中的返回类型[]double问题

> ID：11700655
> 
> 赞同：2
> 
> 时间：2012-07-28T11:34:10.260
> 
> 标签：java, arrays

这段代码有问题，返回类型有错误。

```
 public static []double convertLatLong(String lat, String lng) {
        ........
     double latitude=....;
     double longitude=....;

     return (new []double{latitude,longitude});
     } 
```

但它适用于...

```
public static double[] convertLatLong(String lat, String lng) {
        ........
     double latitude=....;
     double longitude=....;

     return (new double[]{latitude,longitude});
     } 
```

那么，它们之间有什么区别呢？虽然 java 支持声明`data_type [] var_name`以及`data_type var_name []`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T11:53:20.600

（在编辑之前引用问题......）

> 而 java 支持声明 data_type [] 以及 [] data_type。

不，它没有。在某些情况下，它*确实*支持（可怕地）是`[]` *后者。*例如，这两个都是有效但讨厌的 IMO：

```
double foo[]; // Ugly

// Completely insane
public double theGogglesTheyDoNothing()[] {
    return new double[10];
} 
```

我从未见过后者在实际代码中使用过——这太可怕了。第一个偶尔会出现，但强烈建议不要这样做。

但据我所知，`[]double`它*永远不会有效。*

首选形式是将方括号直接放在类型名称之后，因此您的代码将是：

```
public static double[] convertLatLong(String lat, String lng) {
    double latitude=....;
    double longitude=....;

    return new double[] { latitude, longitude };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T11:36:12.837

采用：

```
public static double[] convertLatLong(String lat, String lng) {
    double latitude = ...
    double longitude = ...;

    return new double[] { latitude, longitude };
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T12:47:29.253

你问：“那么，它们之间有什么区别？虽然 java 支持声明 data_type [] var_name 以及 data_type var_name []。”

仔细比较：

> public static []double convertLatLong(String lat, String lng) // 错误

是

> public static double[] convertLatLong(String lat, String lng) // 正确

作为

> []data_type var_name // 错误

是

> data_type[] var_name // 正确

尽管

> data_type var_name[] // 也有效

与任何一个函数声明都没有共同点（egads @ Jon）

这有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T11:37:10.977

该方法的签名应该是这样的：

```
public static double[] convertLatLong(String lat, String lng) 
```

或像这样：

```
public static double convertLatLong(String lat, String lng)[] 
```

* * *

另外，return 语句应该是这样的：

```
return new double[]{latitude, longitude}; 
```

# facebook - TypoScript：当前页面的文本内容

> ID：11700656
> 
> 赞同：0
> 
> 时间：2012-07-28T11:34:17.090
> 
> 标签：facebook, meta-tags, typo3, typoscript

我正在尝试`og:description`从显示页面的内容中动态生成 Facebook 所需的标签。如果没有给出元描述，我的想法是使用页面的内容文本。我试过这个脚本：

```
page.headerData.838 = CONTENT
page.headerData.838 {
  table=tt_content
  select {
    where = (CType = "text")
  }
  renderObj=TEXT
  renderObj{
    field=bodytext
    stdWrap.stripHtml=1
    noTrimWrap =|<meta property="og:description" content="|" />| 
  }
} 
```

问题是这个标签甚至没有出现在页面上。那么有什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:53:28.967

尽量避免使用渲染`tt_content`元素作为元标记，因为它们是 RTE 字段，所以这可能会很棘手，因此，即使使用 stripHtml，也有可能破坏您的 HTML 代码。

相反，最好使用属性`Meta > Description`字段来完成这项任务，这样更安全。`Page`请注意，如果您将在页面上使用多个文本类型的 tt_content，您的代码将创建相同数量的`<meta />`标签。

顺便说一句：您的代码段相当正确 - 它可以正常工作，也许您在某些页面上有一些缓存问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:21:10.543

也许您可以只渲染中间列的内容，剥离 HTML 并将其包装到 og:description 中？我想你会有一个最大长度的描述。

```
page.headerData.838 < styles.content.get
page.headerData.838.stdWrap {
  stripHtml = 1
  crop = 180 | ... | 1
  wrap = <meta property="og:description" content="|" />
} 
```

（未经测试！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:42:27.703

试试这个...

默认说明：

```
page.meta{
  description.field = description
} 
```

如果默认说明为空，则说明：

```
page.meta.description.ifEmpty.stdWrap.cObject = CONTENT
page.meta.description.ifEmpty.stdWrap.cObject {
 table= tt_content
 select {              
   selectFields = bodytext
 }
 renderObj =COA
 renderObj {
   10=TEXT
   10 {
     field = bodytext     
     stripHtml=1
     crop = 300 | ... | 1        
   }
 }
} 
```

和 og：描述：

```
temp.OpenGraphDescription = COA
temp.OpenGraphDescription{
 10=CONTENT
 10.table= tt_content
 10.select {              
   selectFields = bodytext
 }
 10.renderObj =COA
 10.renderObj {
   10=TEXT
   10 {
     field =  bodytext     
     stripHtml=1
     crop = 300 | ... | 1        
   }
 }
 wrap = <meta property="og:description" content="|" />
}
page.headerData.55 < temp.OpenGraphDescription 
```

# java - Java：哈希图中的复合键

> ID：11700659
> 
> 赞同：36
> 
> 时间：2012-07-28T11:35:11.347
> 
> 标签：java, collections, hash, hashmap

我想将一组对象存储在 hashmap 中，其中键应该是两个字符串值的组合。有没有办法做到这一点？

我可以简单地连接两个字符串，但我确信有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-28T11:38:01.960

您可以有一个包含两个字符串的自定义对象：

```
class StringKey {
    private String str1;
    private String str2;
} 
```

问题是，您需要确定两个此类对象的相等性测试和哈希码。

相等可能是两个字符串的匹配，而哈希码可能是连接成员的哈希码（这是有争议的）：

```
class StringKey {
    private String str1;
    private String str2;

    @Override
    public boolean equals(Object obj) {
        if(obj != null && obj instanceof StringKey) {
            StringKey s = (StringKey)obj;
            return str1.equals(s.str1) && str2.equals(s.str2);
        }
        return false;
    }

    @Override
    public int hashCode() {
        return (str1 + str2).hashCode();
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-07-07T10:24:30.647

你不需要重新发明轮子。只需使用[Guava](https://github.com/google/guava)的接口`HashBasedTable<R,C,V>`实现`Table<R,C,V>`，即可满足您的需要。这是一个例子

```
Table<String, String, Integer> table = HashBasedTable.create();

table.put("key-1", "lock-1", 50);
table.put("lock-1", "key-1", 100);

System.out.println(table.get("key-1", "lock-1")); //prints 50
System.out.println(table.get("lock-1", "key-1")); //prints 100

table.put("key-1", "lock-1", 150); //replaces 50 with 150 
```

快乐编码！

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-08-02T18:37:46.703

```
public int hashCode() {
    return (str1 + str2).hashCode();
} 
```

这似乎是一种生成 hashCode 的糟糕方法：每次计算 hash 码时都创建一个新的字符串实例太糟糕了！（即使生成一次字符串实例并缓存结果也是不好的做法。）

这里有很多建议：

[如何为字符串列表计算一个好的哈希码？](https://stackoverflow.com/questions/2730865/how-do-i-calculate-a-good-hash-code-for-a-list-of-strings)

```
public int hashCode() {
    final int prime = 31;
    int result = 1;
    for ( String s : strings ) {
        result = result * prime + s.hashCode();
    }
    return result;
} 
```

对于一对字符串，它变为：

```
return string1.hashCode() * 31 + string2.hashCode(); 
```

这是一个非常基本的实现。通过链接提供了很多建议，以建议更好的调整策略。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-28T11:36:59.353

为什么不创建一个（比如说）`Pair`对象，其中包含两个字符串作为成员，然后使用它作为键？

例如

```
public class Pair {
   private final String str1;
   private final String str2;

   // this object should be immutable to reliably perform subsequent lookups
} 
```

不要忘记[equals()](http://www.javapractices.com/topic/TopicAction.do?Id=17)和[hashCode()](http://www.javapractices.com/topic/TopicAction.do?Id=28)。有关HashMap 和键的更多信息，请参阅[此博客条目，包括关于不变性要求的背景。](http://javarevisited.blogspot.co.uk/2011/02/how-hashmap-works-in-java.html)如果您的密钥不是不可变的，那么您可以更改其组件，随后的查找将无法找到它（这就是为什么不可变对象例如`String`是密钥的良好候选者的原因）

你是对的，连接并不理想。在某些情况下它会起作用，但它通常是一个不可靠且脆弱的解决方案（例如**AB/C**与**A/BC**是否不同？）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-28T12:06:25.923

我有一个类似的案例。我所做的就是连接两个由波浪号 ( ~ ) 分隔的字符串。

所以当客户端调用服务函数从地图中获取对象时，它看起来是这样的：

```
MyObject getMyObject(String key1, String key2) {
    String cacheKey = key1 + "~" + key2;
    return map.get(cachekey);
} 
```

这很简单，但它有效。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-02-03T16:11:38.197

我看到很多人使用嵌套地图。也就是说，要映射`Key1 -> Key2 -> Value`（我使用计算机科学/又名 haskell 通用符号进行`(Key1 x Key2) -> Value`映射，它有两个参数并产生一个值），您首先提供第一个键 - 这会返回一个[（部分）映射](https://en.wikipedia.org/wiki/Partial_application) `Key2 -> Value`，您在下一步。

例如，

```
Map<File, Map<Integer, String>> table = new HashMap(); // maps (File, Int) -> Distance

add(k1, k2, value) {
  table2 = table1.get(k1);
  if (table2 == null) table2 = table1.add(k1, new HashMap())
  table2.add(k2, value)
}

get(k1, k2) {
  table2 = table1.get(k1);
  return table2.get(k2)
} 
```

我不确定它是否比普通的复合键结构更好。你可以对此发表评论。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-06-04T17:14:43.240

阅读 spaguetti/cactus 堆栈时，我想出了一个可以用于此目的的变体，包括以任何顺序映射键的可能性，以便 map.lookup("a","b") 和 map.lookup(" b","a") 返回相同的元素。它也适用于任意数量的键，而不仅仅是两个。

我将它用作试验数据流编程的堆栈，但这是一个快速而肮脏的版本，可用作多键映射（应该改进：应该使用集合而不是数组来避免查找键的重复出现）

```
public class MultiKeyMap <K,E> {
    class Mapping {
        E element;
        int numKeys;
        public Mapping(E element,int numKeys){
            this.element = element;
            this.numKeys = numKeys;
        }
    }
    class KeySlot{
        Mapping parent;
        public KeySlot(Mapping mapping) {
            parent = mapping;
        }
    }
    class KeySlotList extends LinkedList<KeySlot>{}
    class MultiMap extends HashMap<K,KeySlotList>{}
    class MappingTrackMap extends HashMap<Mapping,Integer>{}

    MultiMap map = new MultiMap();

    public void put(E element, K ...keys){
        Mapping mapping = new Mapping(element,keys.length);
        for(int i=0;i<keys.length;i++){
            KeySlot k = new KeySlot(mapping);
            KeySlotList l = map.get(keys[i]);
            if(l==null){
                l = new KeySlotList();
                map.put(keys[i], l);
            }
            l.add(k);
        }
    }
    public E lookup(K ...keys){
        MappingTrackMap tmp  = new MappingTrackMap();
        for(K key:keys){
            KeySlotList l = map.get(key);
            if(l==null)return null;
            for(KeySlot keySlot:l){
                Mapping parent = keySlot.parent;
                Integer count = tmp.get(parent);
                if(parent.numKeys!=keys.length)continue;
                if(count == null){
                    count = parent.numKeys-1;
                }else{
                    count--;
                }
                if(count == 0){
                    return parent.element;
                }else{
                    tmp.put(parent, count);
                }               
            }
        }
        return null;
    }
    public static void main(String[] args) {
        MultiKeyMap<String,String> m = new MultiKeyMap<String,String>();
        m.put("brazil", "yellow", "green");
        m.put("canada", "red", "white");
        m.put("USA", "red" ,"white" ,"blue");
        m.put("argentina", "white","blue");

        System.out.println(m.lookup("red","white"));  // canada
        System.out.println(m.lookup("white","red"));  // canada
        System.out.println(m.lookup("white","red","blue")); // USA
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-15T15:10:51.300

```
public static String fakeMapKey(final String... arrayKey) {
    String[] keys = arrayKey;

    if (keys == null || keys.length == 0)
        return null;

    if (keys.length == 1)
        return keys[0];

    String key = "";
    for (int i = 0; i < keys.length; i++)
        key += "{" + i + "}" + (i == keys.length - 1 ? "" : "{" + keys.length + "}");

    keys = Arrays.copyOf(keys, keys.length + 1);

    keys[keys.length - 1] = FAKE_KEY_SEPARATOR;

    return  MessageFormat.format(key, (Object[]) keys);} 
```

```
公共静态字符串 FAKE_KEY_SEPARATOR = "~";

输入：
fakeMapKey("keyPart1","keyPart2","keyPart3");

输出：keyPart1~keyPart2~keyPart3
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-08T15:38:50.937

我想提两个我认为其他答案未涵盖的选项。它们是否适合您的目的，您必须自己决定。

## 地图<String, Map<String, YourObject>>

您可以使用映射映射，在外部映射中使用字符串 1 作为键，在每个内部映射中使用字符串 2 作为键。

我不认为这在语法方面是一个非常好的解决方案，但它很简单，而且我已经看到它在某些地方使用过。它还应该在时间和内存上是有效的，而这在 99% 的情况下不应该是主要原因。我不喜欢它的是我们丢失了关于密钥类型的显式信息：它只是从代码中推断出有效密钥是两个字符串，阅读不清楚。

## 地图<你的对象，你的对象>

这是针对特殊情况的。我不止一次遇到过这种情况，所以没有比这更特别的了。如果您的对象包含用作键的两个字符串，并且基于两者定义对象相等性是有意义的，则定义`equals`并`hashCode`根据并将对象用作键和值。

在这种情况下，人们可能希望使用 a`Set`而不是 a `Map`，但是 Java`HashSet`没有提供任何方法来从基于相等对象的集合中检索对象。所以我们确实需要地图。

一个责任是您需要创建一个新对象才能进行查找。这也适用于许多其他答案中的解决方案。

## 关联

[Jerónimo López：HashMaps 中的复合键](https://www.jeronimo.dev/composite-key-in-hashmaps/)关于地图映射的效率。

# ios - 动态故事板或 Xibs/Nibs

> ID：11700673
> 
> 赞同：9
> 
> 时间：2012-07-28T11:36:57.337
> 
> 标签：ios, storyboard, customization, xib, nib

我们公司正在为 iPad 开发一个相当大的应用程序。最终，我们希望能够为每个客户（租户）甚至每个用户（该客户）定制 UI。我们从 HTML5 开始，但正在转向原生。

我已经阅读了一些关于从服务器下载 XML（甚至生成的 XIB/NIB 文件）并将它们动态添加到您的应用程序的内容。

现在有了 iOS 5（甚至在 6 中更进一步），故事板正在发挥重要作用。

我的问题：
- 使用（多个？）故事板或 XIB 会更好吗？
- 如果我想提供动态用户界面，我有哪些选择？

我不是在寻找灵丹妙药，也不是在讨论 HTML5 与原生的对比，只是关于如何提供动态界面以及哪些技术可以帮助实现这一点的一些信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T19:04:43.893

我对你的两个问题的回答是：

1.  故事板非常适合场景管理；它在您的各种场景/视图之间创建视觉连接。我更喜欢在我的 UI 中尽可能多地使用故事板。但是，我在某些应用程序中有一些元素可以获取现有的或可重用的或其他动态的 XIB。我只是将这些与我的故事板联系在一起，方法是将 XIB 加载到我想要它们的位置的代码中。因此，我对您的第一个问题的最终答案是**“两者”**，其中尽可能使用情节提要，而 XIB 用于动态场景/视图。

2.  您的动态用户界面选项至少包括以下两个选项（其中，如上所述，我更喜欢第二个选项）：

    1.  使用 XIB 文件创建所有代码，并在代码中执行所有没有情节提要的 UI 转换
    2.  创建尽可能多的 UI 将在 viewController 与故事板之间的关系方面保持相对静态，然后使用 initWithNibName:bundle 加载 UI 的动态部分：

最后，如果情况允许，您可以使用多个故事板，这甚至可以应用于动态 UI，无论它来自故事板其他地方创建并单独维护的可重用组件，还是故事板 XML（如果您查看故事板源，它是只是引擎盖下的 XML）无论是从生成的东西还是从任何地方获取的。如果您的应用程序将有几个复杂的互连视图控制器场景（例如，UITabBarController 中的每个选项卡可能有自己的故事板，其中每个故事板的场景 rootController 连接/加载时，您甚至可以决定在设计阶段使用多个故事板管理您的 UI选择了一个选项卡）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T00:02:32.303

故事板一路！我曾经绝对不喜欢故事板，但后来我习惯了它们，现在我爱上了它们。故事板是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-10T09:17:36.880

[布局](http://bytes.schibsted.com/layout-declarative-ui-framework-ios/)似乎是在 iOS 上开发动态 GUI 的一个非常强大的框架。

免责声明：我不是该框架的作者；作者是 Nick Lockwood，他似乎在 SO 上有一个帐户。我通过谷歌搜索“ios dynamic gui”找到了这个问题和 Nick Lockwood 的布局框架。

我还没有尝试过，但它看起来很有希望。

该项目甚至托管在[此处](https://github.com/schibsted/layout)的 GitHub 上，并且拥有 MIT 许可证。

# opengl - Box2D OpenGL 2D 旋转奇怪的行为

> ID：11700675
> 
> 赞同：0
> 
> 时间：2012-07-28T11:37:02.847
> 
> 标签：opengl, box2d

**编辑** **已解决。源代码更新到工作版本！**

我正在尝试使用 OpenGL 和 Box2D 为我的下一个游戏制作一个简单的游戏引擎。

问题是我不能很好地工作这两个。如果我关闭 OpenGL 旋转，一切看起来都像我在现实世界中的样子。问题在于旋转。

[http://cl.ly/image/0I0M3C3K1c3c](http://cl.ly/image/0I0M3C3K1c3c) - 旋转关闭 [http://cl.ly/image/421v321t201D](http://cl.ly/image/421v321t201D) - 旋转开启

我不知道是 Box2D 还是 OpenGL 的问题，但我认为如果右框在平坦的地面上处于平静状态或明显违反物理定律，则不应旋转它。这不仅是一个问题，而且这个问题仅通过图片清晰可见。我个人为此责怪OpenGL :)

这是我的渲染代码

```
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glPushMatrix();

GLuint texture_handle;

/* texture load logic */
...
...

glTranslatef(this->xPos + this->width / 2, this->yPos + this->height / 2, 0.0f);
glRotatef(this->angle, 0.0f, 0.0f, 1.0f);
glTranslatef(-this->width / 2, -this->height / 2 , 0);

/* Creates 3D cube */
glBegin(GL_QUADS);
glVertex2f(0, 0);
glTexCoord2f(1, 0);
glVertex2f(this->GetWidth(), 0);
glTexCoord2f(1, 1);
glVertex2f(this->GetWidth(), this->GetHeight());
glTexCoord2f(0, 1);
glVertex2f(0, this->GetHeight());
glTexCoord2f(0, 0);
glEnd();

glDeleteTextures(1, &texture_handle);
glPopMatrix();  
glFlush(); 
```

为了完成，这里是 Box2D 部分

```
/* define body for box */
b2BodyDef bodyDef;
bodyDef.type = b2_dynamicBody;
bodyDef.position.Set(this->xPos / RATIO, this->yPos / RATIO);
bodyDef.angle = this->angle * (M_PI / 180);

body = this->world->CreateBody(&bodyDef);

b2PolygonShape box;
box.SetAsBox((this->width / 2) / RATIO, (this->height / 2) / RATIO);

b2FixtureDef shapeDef;
shapeDef.shape = &box;
shapeDef.density = 1f;
shapeDef.friction = 0.8f;

body->CreateFixture(&shapeDef);

this->body = body;

/* apply physics */
b2Vec2 position = this->body->GetPosition();

this->angle = this->body->GetAngle() / (M_PI / 180);

this->xPos = (position.x * RATIO);
this->yPos = (position.y * RATIO); 
```

# c# - if 语句后的输入验证

> ID：11700676
> 
> 赞同：0
> 
> 时间：2012-07-28T11:37:04.937
> 
> 标签：c#, regex, winforms

当尝试没有字符的正则表达式时，我的 winforms EnterValue 在 if 语句之后仍然被触发，我怎样才能阻止它在触发后继续前进？

```
 private void EnterValue_Click(object sender, EventArgs e)
    {
        if (textBox1.Text != string.Empty && !Regex.IsMatch(textBox1.Text, @"^[0-9]+$"))
        {
            MessageBox.Show("Please only enter numbers");
            textBox1.Clear();
        }

        //convert input to double
        listDouble.Add(Convert.ToDouble(textBox1.Text)); // this line still throws exception
        textBox1.Clear();
        //clear existing items
        listBox1.Items.Clear();
        // clear any existing list items
        for (int i = 0; i < listDouble.Count; i++)
        {
            listBox1.Items.Add(listDouble[i]);
        }
        //for each value added, add this to our list 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T11:38:39.523

从方法返回：

```
if (textBox1.Text != string.Empty && !Regex.IsMatch(textBox1.Text, @"^[0-9]+$"))
{
    MessageBox.Show("Please only enter numbers");
    textBox1.Clear();
    return; // nothing after this will execute
} 
```

这将仅在`if`谓词为真时执行，并且该方法将在`return;`语句被命中后立即返回，而不会运行任何其他代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:40:26.990

第一种选择是使用`return`：

```
 if (textBox1.Text != string.Empty && !Regex.IsMatch(textBox1.Text, @"^[0-9]+$"))
    {
        MessageBox.Show("Please only enter numbers");
        textBox1.Clear();
        return; // exit method
    } 
```

第二种选择是使用`else`：

```
 if (textBox1.Text != string.Empty && !Regex.IsMatch(textBox1.Text, @"^[0-9]+$"))
    {
        MessageBox.Show("Please only enter numbers");
        textBox1.Clear();
    }
    else
    {
        // your statements
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T11:45:04.367

使用[`Decimal.TryParse`](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.DECIMAL.TRYPARSE%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k%28DevLang-CSHARP%29&rd=true). 并[`return`](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28RETURN_CSHARPKEYWORD%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)在检查条件后使用退出当前方法：

> 该**`return`**语句终止其出现的方法的执行并将控制权返回给调用方法。

```
Decimal dec;
if (!Decimal.TryParse(textBox1.Text, out dec))
{
    MessageBox.Show("Please only enter numbers");
    textBox1.Clear();
    return;
} 
```

# android - sqlite中的错误“如果存在则删除表”android

> ID：11700686
> 
> 赞同：20
> 
> 时间：2012-07-28T11:38:10.383
> 
> 标签：android, sql, database, sqlite, drop-table

所以我的 DBAdapter 类中有一个问题，当我尝试打开数据库时它会崩溃：从 LogCat 我猜问题出在 onUpgrade 函数中：

```
 public void onUpgrade(SQLiteDatabase db, int oldVersion,
 int newVersion)
  {
       Log.w("SingleDBAdapter", "Upgrading database from version " + oldVersion
       + " to "
       + newVersion + ", which will destroy all old data");
       db.execSQL("DROP TABLE IF EXISTS "+DATABASE_TABLE);
       onCreate(db);
  }
 } 
```

这是错误：

```
07-28 11:32:49.443: E/Database(1244): Failure 1 (near "122": syntax error) on 0x2435b0 when preparing 'DROP TABLE IF EXISTS 122'.
07-28 11:32:49.463: D/AndroidRuntime(1244): Shutting down VM
07-28 11:32:49.463: W/dalvikvm(1244): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-28 11:32:49.473: E/AndroidRuntime(1244): FATAL EXCEPTION: main
07-28 11:32:49.473: E/AndroidRuntime(1244): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.shop.list/com.shop.list.main}: android.database.sqlite.SQLiteException: near "122": syntax error: **DROP TABLE IF EXISTS 122**
07-28 11:32:49.473: E/AndroidRuntime(1244):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at android.os.Looper.loop(Looper.java:123)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at java.lang.reflect.Method.invokeNative(Native Method)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at java.lang.reflect.Method.invoke(Method.java:521)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at dalvik.system.NativeStart.main(Native Method)
07-28 11:32:49.473: E/AndroidRuntime(1244): Caused by: android.database.sqlite.SQLiteException: near "122": syntax error: DROP TABLE IF EXISTS 122
07-28 11:32:49.473: E/AndroidRuntime(1244):     at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1727)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at com.shop.list.ListDBAdapter$DatabaseHelper.onUpgrade(ListDBAdapter.java:51)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:108)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at com.shop.list.ListDBAdapter.open(ListDBAdapter.java:60)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at com.shop.list.main.onCreate(main.java:60)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-28 11:32:49.473: E/AndroidRuntime(1244):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-28 11:32:49.473: E/AndroidRuntime(1244):     ... 11 more 
```

我强调了这个问题，但我无法解决它：/

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-28T11:53:12.760

问题似乎出在这句话上：

```
DROP TABLE IF EXISTS 122 
```

其中`122`，如果它确实是要删除的表的名称，则没有分隔（`'`例如，用 ），因此不能被视为名称。但是解析器期望那里有一个名字。只需将名称用单引号或双引号括起来，它应该可以工作：

```
db.execSQL("DROP TABLE IF EXISTS **'**" + DATABASE_TABLE **+ "'"**); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-08T19:55:31.257

如果表名都是字母字符，那么您的原始代码就可以工作。由于表名不全是字母，因此需要用单引号括起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:41:38.047

我认为你缺少一个';' 在 SQL 语句的末尾

除此之外，我刚刚在 sqlite3 控制台上进行了检查，似乎“122”是一个无效的表名：

```
sqlite> drop table if exists 122;
Error: near "122": syntax error
sqlite> drop table if exists test;
sqlite> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-16T11:07:18.750

db = 这是您的数据库处理程序类

```
db.execSQL("DROP TABLE IF EXISTS YourTableName"); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-04-29T05:34:43.943

嗨，您应该使用调用语句：“context.deleteDatabase(DATABASE_NAME);”

在调用“onCreate();”之前

```
public void onUpgrade(SQLiteDatabase db, int oldVersion,
 int newVersion)
  {
       Log.w("SingleDBAdapter", "Upgrading database from version " + oldVersion
       + " to "
       + newVersion + ", which will destroy all old data");
       context.deleteDatabase(DATABASE_NAME);
       onCreate(db);
  }
 } 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-08-15T15:47:38.357

你应该改变你的：

```
db.execSQL("DROP TABLE IF EXISTS "+DATABASE_TABLE); 
```

和：

```
db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE + ";"); 
```

此外，您需要检查 newVersion > oldVersion

# linux - 如何在slitaz中为root用户设置空白密码

> ID：11700690
> 
> 赞同：55
> 
> 时间：2012-07-28T11:39:22.927
> 
> 标签：linux, authentication, user-accounts, passwd

我正在运行 slotaz 发行版，并想完全删除 root 密码。我曾尝试为该`passwd`命令提供一个空白密码，但这似乎并没有奏效。它给了我一个错误密码太短，当我 ssh-ed 时它仍然要求我输入密码。密码只是按“Enter”键。

**更新：**
也许这与slitaz 使用dropbear 进行ssh 的事实有关？因为即使 root in 的密码为空`/etc/shadow`，它仍然会提示输入密码。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-07-28T11:52:37.347

你试过了**`passwd -d root`**吗？最有可能的是，这会做你想做的事。

* * *

您也可以手动编辑`/etc/shadow`：（创建备份副本。确保即使您搞砸了也可以登录，例如从救援系统。）搜索“root”。通常，根条目看起来类似于

```
root:$X$SK5xfLB1ZW:0:0... 
```

在那里，删除第二个字段（第一个和第二个冒号之间的所有内容）：

```
root::0:0... 
```

有些系统会让您在密码字段中添加星号 (*) 而不是空白，其中空白字段将不允许密码（例如 CentOS 8）

```
root:*:0:0... 
```

保存文件，然后尝试以 root 身份登录。它应该跳过密码提示。（`passwd -d`例如，这是一个“无密码”解决方案。如果您真的在寻找“空白密码”，即“要求输入密码，但如果用户只是按 Enter 则接受”，请查看 的手册页`mkpasswd`，然后使用`mkpasswd`为 /etc/shadow 创建第二个字段。）

# php - 离开前执行操作

> ID：11700694
> 
> 赞同：0
> 
> 时间：2012-07-28T11:39:59.197
> 
> 标签：php, javascript, jquery, ajax

我正在开发一个聊天系统，我必须在用户离开聊天之前删除数据库中的数据......

是否可以执行用户试图离开时触发的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:41:59.520

要检测用户何时离开，我建议您对用户进行定期 ping（或通过让 AJAX 每 X 分钟向服务器发布一次 pong 来从用户那里）。

如果服务器在 X * Y 分钟内没有收到任何 pong，则删除数据。

对于您的情况，X 可以是 1，Y 可以是 10，因此离开聊天室的用户的数据永远不会超过 10 分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:51:25.990

用户通过**关闭浏览器**或**按下退出按钮**离开聊天。

在后者的情况下，它是直截了当的。客户端的浏览器会发送一个 AJAX 请求通知浏览器。在前一种情况下，[检测用户何时离开网页的最佳方法是什么？](https://stackoverflow.com/questions/147636/best-way-to-detect-when-user-leaves-a-web-page)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T14:29:56.367

你可以这样做...使用 xmlhttp 请求和`window.onbeforeunload`javascript

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-28T11:45:23.930

你不能这样做——例如，如果我刚刚拔掉了电脑上的插头，你的软件应该做什么？

你最好的选择是暂停。

# .net - 在 BindingList 中查找

> ID：11700697
> 
> 赞同：8
> 
> 时间：2012-07-28T11:40:27.043
> 
> 标签：.net, winforms, bindinglist

如何在 BindingList 中找到属性等于特定值的对象。下面是我的代码。

```
public class Product
{
    public int ProductID { get; set; } 
    public string ProductName { get; set; }  
}

BindingList<Product> productList = new BindingList<Product>(); 
```

现在考虑 productList 有 100 个产品，我想找到 id 为 10 的产品对象。

我可以找到它使用

```
productList.ToList<Product>().Find(p =>p.ProductID == 1); 
```

但我觉得在这里使用 ToList() 是不受欢迎的。有没有直接的方法可以做到这一点，没有“查找”方法`BindingList<T>`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-28T11:48:57.870

您可以使用[`SingleOrDefault`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.singleordefault.aspx)LINQ 代替`Find`：

```
Product product = productList.SingleOrDefault(p => p.ProductID == 1); 
```

`product`如果没有此类产品，则为 null。如果有多个匹配项，则会引发异常。

您真的应该研究 LINQ to Objects - 它使对数据的许多操作变得更加*简单*。

# python - Flask 路由查询参数

> ID：11700698
> 
> 赞同：1
> 
> 时间：2012-07-28T11:40:43.080
> 
> 标签：python, rest, flask, routes, werkzeug

假设我用 Flask 设置了两条路线：

```
app.add_url_rule('/example', view_func = example.Index.as_view('example'))
app.add_url_rule('/example/<string:example_key>', view_func = example.Show.as_view('example'), methods=['GET']) 
```

这会将 /example 路由到 example.Index 并将 /example/1 路由到 example.Show。

但是当我转到 /example?parameter=miau 时，它会路由到 example.Show 而不是 example.Index。

为什么会发生这种情况，我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:06:16.653

发现了，注意“example.Index.as_view('example')”，应该是：

```
app.add_url_rule('/example', view_func = example.Index.as_view('example_index'))
app.add_url_rule('/example/<string:example_key>', view_func = example.Show.as_view('example_show'), methods=['GET']) 
```

# c# - 从 C# 中的 activex 插件中获取信息

> ID：11700700
> 
> 赞同：0
> 
> 时间：2012-07-28T11:40:48.330
> 
> 标签：c#, .net, streaming, activex, media-player

我在我的一个 C# 应用程序中使用了 Sopcast activex 插件 (sopocx.ocx)。我想检索播放器状态（“正在缓冲频道”、“正在播放频道”、“频道离线...”）和缓冲百分比。这两个信息都显示在播放器上（我试图发布图片但我还没有足够的声誉）。

问题是 Sopcast activex 插件没有提供任何方法来检索这些信息。

有人知道如何做到这一点吗？

GetWindowText 产生一个空字符串...

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace test
{

public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)] 
    static extern int GetWindowText(IntPtr hWnd, StringBuilder lpString, int nMaxCount);

    private void testToolStripMenuItem_Click(object sender, EventArgs e)
    {
        IntPtr hwnd = sopcast.Handle;
        StringBuilder lpString = new StringBuilder(256);

        GetWindowText(hwnd, lpString, 256);

        MessageBox.Show(lpString.ToString());
    }

    private void playToolStripMenuItem_Click(object sender, EventArgs e)
    {
        sopcast.SetSopAddress("sop://broker.sopcast.com:3912/123456789");
        sopcast.SetChannelName("Channel");
        sopcast.Play();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:16:03.133

这里有一个代码示例（用您的应用程序名称替换记事本）对您来说最重要的是从您的应用程序中获得一种方法来获得对您的 ocx 窗口的 ID 控制

```
using System; 
```

使用 System.Runtime.InteropServices；

使用 System.Text；

使用 System.Security；

命名空间应用程序

{

```
public class Program

{

    public static void Main ( )

    {

        IntPtr hwnd = UnsafeNativeMethods.FindWindow("Notepad", null);

        StringBuilder stringBuilder = new StringBuilder(256);

        UnsafeNativeMethods.GetWindowText(hwnd, stringBuilder, stringBuilder.Capacity);

        Console.WriteLine(stringBuilder.ToString());

    }

}

[SuppressUnmanagedCodeSecurity]

internal static class UnsafeNativeMethods

{

    [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]

    internal static extern int GetWindowText ( IntPtr hWnd, [Out] StringBuilder lpString, int nMaxCount );

    [DllImport("user32.dll", SetLastError = true)]

    internal static extern IntPtr FindWindow ( string lpClassName, string lpWindowName );

} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:51:57.907

可以通过 api 窗口识别 I​​d 控件并获取文本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T03:41:47.477

I download sopcast and try to get status using spy++: ![enter image description here](../Images/ffc0a2d4128febeebce03b44a1611c85.png)

As you see, caption is status not the channel... so you can not get it easier ![enter image description here](../Images/d3d2e5829679685049adf726eacf3180.png)

the handle you have catched is for the whole control

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-24T12:11:37.387

Sopcast 使用 DrawText 绘制状态文本（我使用 API Monitor [http://www.rohitab.com/apimonitor](http://www.rohitab.com/apimonitor)发现）。因此无法使用常规的 GetWindowText 函数或类似函数获取文本。我能够通过挂钩 DrawText 函数来获取文本。对于 .NET，EasyHook 将使您能够做到这一点。我的场景：我有一个承载 activex 控件的 winforms 应用程序，我想获取状态文本。

```
public class hooklocal : EasyHook.IEntryPoint
{
    [DllImport("user32.dll")]
    static extern int DrawText(IntPtr hDC, string lpString, int nCount, IntPtr lpRect, uint uFormat);

    [UnmanagedFunctionPointer(CallingConvention.StdCall,CharSet = CharSet.Auto,SetLastError = true)]
    delegate int DDrawText(IntPtr hDC, string lpString, int nCount, IntPtr lpRect, uint uFormat);

    int DrawTextH(IntPtr hDC, string lpString, int nCount, IntPtr lpRect, uint uFormat)
    {
        //lpString contains the status text 
        return DrawText(hDC, lpString, nCount, lpRect, uFormat);
    }

    public hooklocal()
    {
        try
        {
            var CreateHook = LocalHook.Create(
                 LocalHook.GetProcAddress("user32.dll", "DrawTextW"),
                 new DDrawText(DrawTextH),
                 this);

            CreateHook.ThreadACL.SetExclusiveACL(new Int32[] { 0 });
        }
        catch (Exception ExtInfo)
        {
            Debugger.Break();
        }

    }

} 
```

要使用，请在程序启动时在新线程中实例化 hooklocal 类。

EasyHook 下载 [https://easyhook.github.io/downloads.html](https://easyhook.github.io/downloads.html)

# python - Python递归替换嵌套字典键中的字符？

> ID：11700705
> 
> 赞同：34
> 
> 时间：2012-07-28T11:41:51.473
> 
> 标签：python, dictionary, replace, nested, character

我正在尝试创建一个通用函数来替换嵌套字典键中的点。我有一个非泛型函数，深度为 3 级，但必须有一种方法来实现这个泛型。任何帮助表示赞赏！到目前为止我的代码：

```
output = {'key1': {'key2': 'value2', 'key3': {'key4 with a .': 'value4', 'key5 with a .': 'value5'}}} 

def print_dict(d):
    new = {}
    for key,value in d.items():
        new[key.replace(".", "-")] = {}
        if isinstance(value, dict):
            for key2, value2 in value.items():
                new[key][key2] = {}
                if isinstance(value2, dict):
                    for key3, value3 in value2.items():
                        new[key][key2][key3.replace(".", "-")] = value3
                else:
                    new[key][key2.replace(".", "-")] = value2
        else:
            new[key] = value
    return new

print print_dict(output) 
```

**更新：为了回答我自己的问题，我使用 json object_hooks 做了一个解决方案：**

```
import json

def remove_dots(obj):
    for key in obj.keys():
        new_key = key.replace(".","-")
        if new_key != key:
            obj[new_key] = obj[key]
            del obj[key]
    return obj

output = {'key1': {'key2': 'value2', 'key3': {'key4 with a .': 'value4', 'key5 with a .': 'value5'}}}
new_json = json.loads(json.dumps(output), object_hook=remove_dots) 

print new_json 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-28T11:58:01.453

是的，有更好的方法：

```
def print_dict(d):
    new = {}
    for k, v in d.iteritems():
        if isinstance(v, dict):
            v = print_dict(v)
        new[k.replace('.', '-')] = v
    return new 
```

（编辑：这是递归，更多关于[维基百科](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)。）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-07-08T15:06:52.243

实际上，所有答案都包含一个错误，可能导致结果输入错误。

我会接受@ngenain 的答案并在下面稍微改进一下。

我的解决方案将关注从`dict`( `OrderedDict`, `defaultdict`, 等) 派生的类型，并且不仅关注`list`,还关注`set`和`tuple`类型。

我还在函数的开头对最常见的类型进行了简单的类型检查，以减少比较次数（在大量数据中可能会加快速度）。

适用于 Python 3。替换`obj.items()`为`obj.iteritems()`Py2。

```
def change_keys(obj, convert):
    """
    Recursively goes through the dictionary obj and replaces keys with the convert function.
    """
    if isinstance(obj, (str, int, float)):
        return obj
    if isinstance(obj, dict):
        new = obj.__class__()
        for k, v in obj.items():
            new[convert(k)] = change_keys(v, convert)
    elif isinstance(obj, (list, set, tuple)):
        new = obj.__class__(change_keys(v, convert) for v in obj)
    else:
        return obj
    return new 
```

如果我理解正确的需求，大多数用户都希望转换键以将它们与不允许键名中的点的 mongoDB 一起使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-12T09:43:46.450

我使用了@horejsek 的代码，但我对其进行了调整以接受带有列表的嵌套字典和一个替换字符串的函数。

我有一个类似的问题要解决：我想将下划线小写约定中的键替换为骆驼大小写约定，反之亦然。

```
def change_dict_naming_convention(d, convert_function):
    """
    Convert a nested dictionary from one convention to another.
    Args:
        d (dict): dictionary (nested or not) to be converted.
        convert_function (func): function that takes the string in one convention and returns it in the other one.
    Returns:
        Dictionary with the new keys.
    """
    new = {}
    for k, v in d.iteritems():
        new_v = v
        if isinstance(v, dict):
            new_v = change_dict_naming_convention(v, convert_function)
        elif isinstance(v, list):
            new_v = list()
            for x in v:
                new_v.append(change_dict_naming_convention(x, convert_function))
        new[convert_function(k)] = new_v
    return new 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-02-10T10:55:34.357

这是一个处理嵌套列表和字典的简单递归解决方案。

```
def change_keys(obj, convert):
    """
    Recursivly goes through the dictionnary obj and replaces keys with the convert function.
    """
    if isinstance(obj, dict):
        new = {}
        for k, v in obj.iteritems():
            new[convert(k)] = change_keys(v, convert)
    elif isinstance(obj, list):
        new = []
        for v in obj:
            new.append(change_keys(v, convert))
    else:
        return obj
    return new 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-31T23:57:31.190

您必须删除原始键，但不能在循环体中执行此操作，因为它会在迭代期间抛出 RunTimeError: dictionary changed size。

为了解决这个问题，迭代原始对象*的副本*，但修改原始对象：

```
def change_keys(obj):
    new_obj = obj
    for k in new_obj:
            if hasattr(obj[k], '__getitem__'):
                    change_keys(obj[k])
            if '.' in k:
                    obj[k.replace('.', '$')] = obj[k]
                    del obj[k] 
```

* * *

```
>>> foo = {'foo': {'bar': {'baz.121': 1}}}
>>> change_keys(foo)
>>> foo
{'foo': {'bar': {'baz$121': 1}}} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-10T23:34:26.657

虽然 jllopezpino 的答案有效，但仅限于以字典开头，但这是我的，与原始变量一起使用的是列表或字典。

```
def fix_camel_cases(data):
    def convert(name):
        # https://stackoverflow.com/questions/1175208/elegant-python-function-to-convert-camelcase-to-snake-case
        s1 = re.sub('(.)([A-Z][a-z]+)', r'\1_\2', name)
        return re.sub('([a-z0-9])([A-Z])', r'\1_\2', s1).lower()

    if isinstance(data, dict):
        new_dict = {}
        for key, value in data.items():
            value = fix_camel_cases(value)
            snake_key = convert(key)
            new_dict[snake_key] = value
        return new_dict

    if isinstance(data, list):
        new_list = []
        for value in data:
            new_list.append(fix_camel_cases(value))
        return new_list

    return data 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-02T18:48:48.920

这是 @horejsek 的答案的 1-liner 变体，对喜欢的人使用 dict 理解：

```
def print_dict(d):
    return {k.replace('.', '-'): print_dict(v) for k, v in d.items()} if isinstance(d, dict) else d 
```

我只在 Python 2.7 中测试过这个

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-10T10:47:57.630

您可以通过整个字符串将所有内容转储到 JSON 替换并重新加载 JSON

```
def nested_replace(data, old, new):
    json_string = json.dumps(data)
    replaced = json_string.replace(old, new)
    fixed_json = json.loads(replaced)
    return fixed_json 
```

或使用单线

```
def short_replace(data, old, new):
    return json.loads(json.dumps(data).replace(old, new)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-27T08:43:00.417

我猜你和我有同样的问题，将字典插入到 MongoDB 集合中，在尝试插入包含点 (.) 键的字典时遇到异常。

此解决方案与此处的大多数其他答案基本相同，但它更紧​​凑，并且可能不太可读，因为它使用单个语句并递归调用自身。对于 Python 3。

```
def replace_keys(my_dict):
    return { k.replace('.', '(dot)'): replace_keys(v) if type(v) == dict else v for k, v in my_dict.items() } 
```

# objective-c - 如何获得本周的天数？

> ID：11700707
> 
> 赞同：1
> 
> 时间：2012-07-28T11:41:56.333
> 
> 标签：objective-c, ios, ipad

如何获得当前一周的几天？
例如 - 今天是`saturday - 28 july`.
我需要带有'28 Saturday'的数组`27 Friday`，，，，`26 Thursday`... `25 Wednesday`？`22 Sunday`

[代码] NSCalendar *myCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

```
NSDateComponents *currentComps = [myCalendar components:( NSYearCalendarUnit | NSMonthCalendarUnit | NSWeekOfYearCalendarUnit | NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:weekDate];
int ff = currentComps.weekOfYear;
NSLog(@"1  %d", ff);

[currentComps setWeekday:1]; // 1: sunday
NSDate *firstDayOfTheWeek = [myCalendar dateFromComponents:currentComps];
[currentComps setWeekday:7]; // 7: saturday
NSDate *lastDayOfTheWeek = [myCalendar dateFromComponents:currentComps];

NSLog(@"first - %@ \nlast - %@", firstDayOfTheWeek, lastDayOfTheWeek); [code] 
```

我这样做了，但我有 'firstDayOfWeek' - 2012-07-29 和 'lastDayOfWeek' - 2012-08-04

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T17:20:22.650

这就是您要查找的内容 - 您只需要相应地格式化结果：

```
NSDate *weekDate = [NSDate date];
NSCalendar *myCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *currentComps = [myCalendar components:( NSYearCalendarUnit | NSMonthCalendarUnit | NSWeekOfYearCalendarUnit | NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:weekDate];
int ff = currentComps.weekOfYear;
NSLog(@"1  %d", ff);

[currentComps setWeekday:1]; // 1: sunday
NSDate *firstDayOfTheWeek = [myCalendar dateFromComponents:currentComps];
[currentComps setWeekday:7]; // 7: saturday
NSDate *lastDayOfTheWeek = [myCalendar dateFromComponents:currentComps];

NSDateFormatter *myDateFormatter = [[NSDateFormatter alloc] init];
myDateFormatter.dateFormat = @"dd EEEE";
NSString *firstStr = [myDateFormatter stringFromDate:firstDayOfTheWeek];
NSString *secondStr = [myDateFormatter stringFromDate:lastDayOfTheWeek];

NSLog(@"first - %@ \nlast - %@", firstStr, secondStr); 
```

# algorithm - 大 O 表示法 - 数量级

> ID：11700713
> 
> 赞同：3
> 
> 时间：2012-07-28T11:43:31.210
> 
> 标签：algorithm, complexity-theory

我目前正在尝试找出二次算法、三次算法和指数算法之间的主要定量差异。

我不明白“定量”是什么意思，它真正要问的是什么？我尝试搜索这方面的信息，但没有运气。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T11:56:02.687

当您使用大 O 表示法来估计算法的计算复杂度时，目标是提供关于*N*的变化如何随着*N*变大而影响算法性能的*定性洞察。*

 ***如果您消除任何随着N*变大而对总数的贡献不再显着的项并消除任何常数因素，我想您可以说您只剩下主要的*数量*差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T11:52:35.867

数量上的差异仅仅意味着数量上的差异——即这些不同类型的算法之间的大小差异是多少？给出数字示例是个好主意，例如，显示一些示例问题大小的二次、三次和指数算法的运行时间。**

# xcode - xcode 无法识别 Info.plist 中的本地化

> ID：11700715
> 
> 赞同：2
> 
> 时间：2012-07-28T11:43:52.183
> 
> 标签：xcode, localizable.strings, xcode4.4, info-plist

我正在使用 Xcode 4.4。您可能都知道，在 Xcode 中本地化资源文件有一个简单的选项。您还可以国际化您的 plist 文件，这是我的方法。

但是从 4.​​4 开始，它似乎不再正常工作了。

您所要做的就是：

1.  在`<project>-Info.plist`文件中添加键“Localization”，它添加了一个子数组，您可以在其中添加您的国家代码作为项目
2.  现在您可以本地化您的资源文件（如`Localizable.strings`），例如：![使资源可本地化](../Images/d65a2727e490da67b91c59c15683419b.png)然后是一个模态屏幕，您可以在其中选择 plist 文件中定义的语言![选择可本地化的语言](../Images/289f58cc7b38eb47e9f9875e1ab6ebb5.png)
3.  进入！资源文件现在位于`<country identifier>.lproj`文件夹中。

在 Xcode 4.4 中，您无法选择在 plist 文件中定义的语言。只能说英语。
我什么都试过了。不想手动本地化。

同样在 4.4 以下的 Xcode 版本中，可以使用“+”按钮添加新语言。这是不可能的：看看这个：
![本地化](../Images/67bea2f4bb94d9300507dd7dd0618370.png)

有什么建议么。还是我做错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T12:08:31.040

以下是在 Xcode 4.4+ 中本地化资源的方法：

1.  单击您的项目（导航器）
2.  在项目下的“信息”选项卡上，您将看到“本地化”部分
3.  点击 + 添加语言
4.  在要显示的工作表中选择要本地化的文件

现在 Xcode 将自动创建文件并将其放在相应的语言文件夹下。最后，如果您想本地化其他来源（例如图像文件），请单击您的文件，打开文件检查器窗格，然后单击“本地化”部分下的“本地化...”按钮。Xcode 将使用可用的语言启动另一张表，选择语言，您就准备好了。我希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:15:21.047

问题也是，如何为多个目标本地化多个 Info.plist 文件。

这很容易完成。如上所述，只需将您希望本地化的语言添加到射弹中。

![项目设置](../Images/8cbf445e9e16bc8d865d9b95847936c6.png)

*   然后单击您的几个 Info.plist 文件，每个文件都针对每个目标。
*   打开实用程序侧边栏
*   点击“本地化”

![文件的本地化](../Images/55789beaf21706c1ea65caaad9fe07fc.png)

然后在项目文件设置语言中进行选择，您就完成了。

# .net - 如何在 WinForms 中上传文件？

> ID：11700716
> 
> 赞同：0
> 
> 时间：2012-07-28T11:44:42.687
> 
> 标签：.net, vb.net

您好，我在 VB 网络和 WinForms 中比较新，所以也许我的问题看起来很幼稚。

我正在使用.net2。

我需要将文件上传到 WinForms 应用程序并将其存储在特定文件夹中。在 Web 应用程序中，我借助 fileUpload 控件实现了它。

知道如何在 WinForms 应用程序中实现它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:02:59.333

将文件上传到目标 URL 的一种简单方法是`UploadFIleAsync`使用`System.Net.WebClient()`.

**例如：**

```
Dim WithEvents myClient As New System.Net.WebClient()

Public Function Upload(ByVal tURL As String, ByVal file As String) As Boolean
        Dim uri As New System.Uri(tURL)
        Me.myClient.UploadFileAsync(uri, file)

Return true 'Needs some modification, this is a simple code, but should work as it is
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T08:46:09.290

您的问题令人困惑，因为您提到上传会表明与互联网位置之间的传输，但在您的评论中，您似乎只想将文件从桌面复制到 D 驱动器。

这段代码应该做你想做的事：

```
Dim sourceFile As String = Path.Combine(My.Computer.FileSystem.SpecialDirectories.Desktop, "foo.txt")
Dim destinationFile As String = "D:\folder\foo.txt"
File.Copy(sourceFile, destinationFile) 
```

注意：您可以使用相同的代码在不需要使用 FileUpload 控件的 Web 应用程序中复制文件

# compilation - 无法编译简单的 CUDA 示例

> ID：11700718
> 
> 赞同：3
> 
> 时间：2012-07-28T11:44:46.167
> 
> 标签：compilation, cuda, nvidia

测试.cu：

```
#include <iostream> 
#include "book.h"
__global__ void add( int a, int b, int *c ) {
    *c = a + b; 
}
int main( void ) {
    int c;
    int *dev_c;
    HANDLE_ERROR( cudaMalloc( (void**)&dev_c, sizeof(int) ) );
    add<<<1,1>>>( 2, 7, dev_c );
    HANDLE_ERROR( cudaMemcpy( &c, 
                              dev_c, 
                              sizeof(int), 
                              cudaMemcpyDeviceToHost ) );
    printf( "2 + 7 = %d\n", c );
    cudaFree( dev_c );
    return 0; 
} 
```

我正在尝试编译上面的示例 test.cu。我尝试使用 nvcc test.cu 但编译器给出错误

```
4.cu:2:18: fatal error: book.h: No such file or directory
compilation terminated. 
```

如何告诉编译器 book.h 在哪里？我已经在 /usr/local/cuda 中安装了 CUDA。我需要制作 Makefile 吗？我是 CUDA 和 Makefile 的新手，所以问题可能看起来微不足道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T12:22:11.370

Book.h 不是 CUDA。它被“Cuda by Example”用于一些简单的东西。
在这个例子中需要提供 HANDLE_ERROR，你应该编写自己的代码来处理错误。

在这里您可以找到 book.h 代码：[http ://code.google.com/p/cuda-examples/source/browse/trunk/common/book.h?r=3](http://code.google.com/p/cuda-examples/source/browse/trunk/common/book.h?r=3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T12:06:06.783

我相信使用引号 ("") 会告诉编译器在与代码文件相同的目录中查找，因此您可能想尝试`<book.h>`而不是`"book.h`.

假设 book.h 是包含在 CUDA 中的文件。我以前从未使用过它。

# datagridview - 在线程和 DataGridViewComboBoxColumn 中打开 webcontrol

> ID：11700719
> 
> 赞同：0
> 
> 时间：2012-07-28T11:44:49.750
> 
> 标签：datagridview, webrequest

我希望我的表单应用程序启动多个线程以从站点并行下载源代码。

这只是主应用程序的一部分。

图片链接：[http](http://www.abload.de/img/pic9aym7.png)
://www.abload.de/img/pic9aym7.png 我不允许发布图片。

```
 private void buttonstart_Click(object sender, EventArgs e)
    {
         //check the list below
    }

    private void buttonabort_Click(object sender, EventArgs e)
    {
         //should always could abort the process/threads. (close all webcontrols ect)
    } 
```

1.  它应该开始读取框中的数字。
2.  对于每个数字，它应该打开一个网络浏览器或 httpwebrequest 以下载一些源代码并计算运行次数（在本例中为 4 次运行）。
    因此，如果网站类似于“http://www.bla.com/”，则应将运行添加到变量的末尾（http://www.bla.com/1-4）。
3.  将源解析为不同的字符串。（strWebsiteString1、strWebsiteString2 等等。我稍后会用到它们）

4.  如果这样做了，它应该读取一些表（从字符串）并将它们解析为数组。（此处相同，array1[3]、array2[3]，供将来使用）
    为了获取表格，我想我将使用 htmlagilitypack。我已经为控制台编写了这个 htmlagilitything。我只需要为我的表单应用程序重建它，并更改控制台写入行以将其放入一些数组中。

    但我对其他/更好的解决方案持开放态度。

5.  我解析到数组中的所有数据现在应该显示在 datagridcolumns 中。每次运行都会得到自己的行。但是，当我尝试将项目添加到组合框列中时，我在每个组合框列中都会遇到错误。
6.  为了以正确的顺序获取它们并知道它来自哪个浏览器数据，column1 将获取运行次数。

我自己已经试过了。我被线程分别卡住了。而且datagridview也很麻烦。

帮我一个忙，帮助我解决这个问题，并向我展示一个片段/示例可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:03:09.243

这是一个清楚的例子，展示了我在上面的评论中所说的内容。它使用锁而不是互斥锁，但你会明白的。这是一个使用多线程作业生产者的简单代码，所有生产者都将信息添加到相同的（锁定的）资源中，并且一个消费者每秒运行一次以与表单控件（在这种情况下为 ListBox）交互并清除作业缓存。

您可以在此处找到更多信息[http://www.albahari.com/threading/part2.aspx](http://www.albahari.com/threading/part2.aspx)

```
public partial class Form1 : Form
{
    static readonly Queue<Job> queue = new Queue<Job>();

    public Form1()
    {
        InitializeComponent();
        //starts the timer to run the ProcessJobs() method every second
        System.Threading.Timer t = new System.Threading.Timer(obj => { ProcessJobs(); }, null, 5000, 1000);                
    }               

    /// <summary>
    /// Called by informations producers to add jobs to the common queue
    /// </summary>        
    private void AddJob(Job job)
    {
        lock (queue)
        {
            queue.Enqueue(job);
        }
    }

    /// <summary>
    /// Common queue processing by the consumer
    /// </summary>
    private void ProcessJobs() {            
        Job[] jobs;
        lock (queue)
        {
            jobs = queue.ToArray();
            queue.Clear();
        }
        foreach(Job job in jobs){       
            this.Invoke(new Action(delegate {
                listBox1.Items.Add(job.Name);
            }));
        }
    }

    /// <summary>
    /// Producer
    /// </summary>        
    private void JobsProducer(string name) {
        for (int i = 0; i < 10; i++)
        {
            Random r = new Random();
            System.Threading.Thread.Sleep(r.Next(1,10)*50);
            this.AddJob(new Job(string.Format("Job({0}) n.{1}", name, i)));
        }
    }

    /// <summary>
    /// Starts the jobs producers
    /// </summary>        
    private void button1_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < 10; i++)
        {
            string producerName = string.Format("Producer{0}", i);
            new System.Threading.Timer(obj => { JobsProducer(producerName); }, null, 0, System.Threading.Timeout.Infinite);
        }
    }       
}

public class Job
{
    //whatever -informations you need to exchange between producer and consumer
    private string name;
    public string Name { get { return name; } }
    public Job(string name) {
        this.name = name;
    }
} 
```

在这里您可以找到一个使用 Dictionary 来保存多个作业结果的示例：

```
Dictionary<string, string[]> jobs = new Dictionary<string, string[]>();
//adds an array to the dictionary
//NB: (array it's not well suited if you don't know the values or the size in advance...you should use a List<string>)
jobs.Add("jobNumber1", new string[]{"a","b"});
//gets an array from the dictionary
string[] jobNumber1;
if (!jobs.TryGetValue("jobNumber1", out jobNumber1))
     throw new ApplicationException("Couldn't find the specified job in the dictionary"); 
```

# android - 如何在android中的微调器内设置字体

> ID：11700722
> 
> 赞同：1
> 
> 时间：2012-07-28T11:45:08.253
> 
> 标签：android, spinner

```
I want to show the custom font In my Application. I want to show the custom font inside the spinner. For that I have used the custom adapter for creating the spinner. 

I am getting the output that I want when spinner opens And I am getting the custom fonts. But when spinner close that time word is not readable font is not setting.

Image1: Inside the spinner the word is not readable.![enter image description here][1]  

Image2: when spinner open the word is readable:
![enter image description here][2]

I have used the 
**Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/kalpurush.ttf");**

**textViewlistview.setTypeface(tf);**

But how should I set the font inside the spinner. when settext inside the spinner.

  [1]: http://i.stack.imgur.com/i02XA.png
  [2]: http://i.stack.imgur.com/Vkydk.png 
```

下面是我使用微调器的适配器

```
private class CustomAdapterSpinner extends ArrayAdapter
    {
        public CustomAdapterSpinner() {
            //super(context, android.R.layout.simple_spinner_item, objects);
            super(CustomizeFontsAndroid.this, R.layout.simple_spinner1,R.id.textviewSpinner,strarraySpinner);
            // TODO Auto-generated constructor stub
            tf1=Typeface.createFromAsset(CustomizeFontsAndroid.this.getAssets(), "fonts/kalpurush.ttf");
        }

        @Override
        public View getDropDownView(int position, View convertView,
                ViewGroup parent) {

            View view = super.getView(position, convertView, parent);

            TextView textviewSpinner = (TextView)view.findViewById(R.id.textviewSpinner);
            textviewSpinner.setTypeface(tf1);
            textviewSpinner.setCompoundDrawables(null, null, null, null);
            textviewSpinner.setTextSize(16);
            textviewSpinner.setText(strarraySpinner[position].toString()+"\n");
            //textviewSpinner.setText(R.string.bangla);

            return view;
        }
  }//end of the Spinner Adapter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:50:33.603

您需要使用适配器为微调器创建视图。即使适配器创建的视图只是一个`TextView`. 这样做会让你调用`setTypeface()`.`TextView`

我阅读了您的评论，但您需要在`getView()`您的`Adapter`. 确保你的`Adapter`工具`SpinnerAdapter`。 `SpinnerAdapter`有两个返回视图的方法，`getView()`和`getDropDownView()`.

`getView()`返回用于显示目的的视图，即当微调器的弹出窗口未显示时（未为您使用正确字体的视图）。

`getDropDownView()`返回在微调器的项目列表中使用的视图。

在此处查看[SpinnerAdapter](http://developer.android.com/reference/android/widget/SpinnerAdapter.html)的参考。

# jquery - 悬停事件结束后 div 的动画不会停止

> ID：11700724
> 
> 赞同：2
> 
> 时间：2012-07-28T11:45:14.120
> 
> 标签：jquery, css

所以，这是我来自社区的第一个问题。

**问题：**我正在尝试用动画显示`div`& 增加悬停的宽度。`div`

**问题：** 我通过*jquery* & *css*实现了这一点，但是问题在于连续悬停动画不会停止。所以，一旦鼠标离开 div，我想从内存中刷新上一个动画。

*我搜索并找到了类似`stop()`的东西，但我没有得到想要的结果。*

[检查我已经取得的成就](http://jsfiddle.net/surendraVsingh/fsF3W/1/)

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T11:49:17.253

您应该使用`stop()`before`animate()`方法，尝试以下方法：

```
$('#slider_thumbnail li .slide_thumb').hover(function(e){
     $(this).find('.slide_btn').stop().animate({width:240});
     $(this).find('.image-wrapper').show('slow');
 },function(e){
     $(this).find('.slide_btn').stop().animate({width:125});
     $(this).find('.image-wrapper').hide('slow');
}); 
```

[演示](http://jsfiddle.net/fsF3W/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:49:22.917

我之前使用[过 hoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html)插件来解决这个问题，效果很好。也许你想试试这个：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:16:51.857

所以，感谢大家的回答，特别感谢@Raminson。

我试图阅读和理解`stop()`，最后我想出了我想要的

我用了`stop(true, false)`

**true**将删除排队的动画。 **false**不会让动画跳到结尾

它奏效了：**[演示](http://jsfiddle.net/surendraVsingh/fsF3W/12/)**

**jQuery代码：**

```
$('#slider_thumbnail li .slide_thumb').hover(function(e){ 

                 $(this).find('.slide_btn').stop(true, false).animate({width:240});
                 $(this).find('.image-wrapper').stop(true, false).show('slow');
             },function(e){

                 $(this).find('.slide_btn').stop(true, false).animate({width:125});
                 $(this).find('.image-wrapper').stop(true, false).hide('slow');
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T12:20:12.443

我很感激这不是你想要的，但我很无聊，想这样做。

你想要的（我认为）的纯 CSS 版本：http: [//jsfiddle.net/fsF3W/5/](http://jsfiddle.net/fsF3W/5/)

# linux - xprop 设置 atom 属性的多个字段

> ID：11700728
> 
> 赞同：9
> 
> 时间：2012-07-28T11:45:32.353
> 
> 标签：linux, x11, xorg

我在互联网上搜索并找到了仅设置一个属性字段的示例：

```
xprop -id "$windowid" -f _NET_WM_STATE 32a -set _NET_WM_STATE _NET_WM_STATE_ABOVE 
```

但是如何设置多个字段？我试过：

```
xprop -id "$windowid" -f _NET_WM_STATE 32a -set _NET_WM_STATE '_NET_WM_STATE_ABOVE, _NET_WM_STATE_SKIP_TASKBAR' 
```

和

```
xprop -id "$windowid" -f _NET_WM_STATE 32aa -set _NET_WM_STATE _NET_WM_STATE_ABOVE,_NET_WM_STATE_SKIP_TASKBAR 
```

以及许多其他没有运气的变体。是否可以 ？:)

* * *

# 行....

我为 xprop 写了一个补丁来解决这个问题，它可以工作，但不知道它是否正确。
感谢@MichałGórny。
(xprop.c,v 1.6)

```
--- xprop.c 2012-07-31 11:24:01.178117974 +0400
+++ xprop.mod   2012-07-31 11:23:19.434784430 +0400
@@ -1487,11 +1487,20 @@
    break;
       }
       case 'a': {
-   static Atom avalue;
-   avalue = Parse_Atom(value, False);
-   type = XA_ATOM;
-   data = (unsigned char *) &avalue;
-   nelements = 1;
+   static unsigned long data32[MAXELEMENTS];
+    char * value2 = strdup(value);
+    char * tmp = strtok(value2,",");
+    nelements = 0;
+    while( NULL != tmp ){
+      data32[nelements] = Parse_Atom(tmp, False);
+      nelements +=1;
+      if(nelements >= MAXELEMENTS)
+        break;
+      tmp = strtok(NULL,",");
+    }
+    type = XA_ATOM;
+    data = (unsigned char *) data32;
+    free(value2);
    break;
       }
       case 'm': 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-28T12:55:38.160

查看 xprop 的代码，这是不可能的。

```
case 'a': {
    static Atom avalue;
    avalue = Parse_Atom(value, False);
    type = XA_ATOM;
    data = (unsigned char *) &avalue;
    nelements = 1;
    break;
} 
```

这是将值解析为的代码`-set`。

```
static Atom
Parse_Atom (const char *name, int only_if_exists)
{
    /* may return None = 0 */
    return XInternAtom(dpy, name, only_if_exists);
} 
```

所以它只解析一个原子。

* * *

我还为它打开[了一个错误](https://bugs.freedesktop.org/show_bug.cgi?id=52633)；也许他们会添加这个。

# qt4 - 如何在单行中创建 Qlabel 下拉列表和 QEditLineText？

> ID：11700730
> 
> 赞同：0
> 
> 时间：2012-07-28T11:45:57.413
> 
> 标签：qt4

我是 Qt 开发的新手。我需要您的帮助来在屏幕中开发多行，每行将包含 Qlabel 下拉列表和 QEditLineText。行将动态生成，屏幕将可垂直滚动。

你能给我一个示例代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:16:34.360

Qt 为其各种模块提供了大量示例（请参阅[http://qt-project.org/doc/qt-4.8/all-examples.html](http://qt-project.org/doc/qt-4.8/all-examples.html)）。如果我正确理解您的问题，您正在尝试创建一个包含可编辑项目的表格，在这种情况下，您需要特别注意[项目视图示例](http://qt-project.org/doc/qt-4.8/examples-itemviews.html)（包括示例代码）。

[如果您是 Qt 开发的新手，那么至少阅读基本的Qt 教程](http://qt-project.org/doc/qt-4.8/tutorials.html)可以为您节省大量时间。在您的情况下，[模型/视图教程](http://qt-project.org/doc/qt-4.8/modelview.html)特别重要。

# python - Facebook 时间戳到 Python DateTime 对象

> ID：11700732
> 
> 赞同：5
> 
> 时间：2012-07-28T11:46:06.853
> 
> 标签：python, facebook, facebook-graph-api, datetime, python-datetime

Facebook 以这种格式返回“created_time”：

```
2012-07-23T08:52:04+0000 
```

我想将此时间戳转换为普通的 Python DateTime 对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T11:51:28.020

你试过[dateutil](http://labix.org/python-dateutil/)

它非常易于使用

```
import dateutil.parser as dateparser
dateparser.parse('2012-07-23T08:52:04+0000') 
```

`dateutil`对处理信息很有帮助`timezone`，它可以处理很多时间格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T11:52:58.763

```
s = "2005-12-06T12:13:14"
from datetime import datetime
from time import strptime
print datetime(*strptime(s, "%Y-%m-%dT%H:%M:%S")[0:6]) 
```

# select - 与选择驱动的守护进程一起使用的 rpc 机制

> ID：11700734
> 
> 赞同：1
> 
> 时间：2012-07-28T11:46:45.927
> 
> 标签：select, asynchronous, daemon, rpc

我想向我的 unix 守护程序添加一个 RPC 服务。守护进程是用 C 语言编写的，并且有一个使用 select() 实现的事件驱动循环。我查看了许多 RPC 实现，但它们似乎都涉及调用库例程或自动生成的代码，它们会无限期地阻塞。

是否有任何 RPC 框架，其中库代码/自动生成的代码不会阻塞或启动线程。理想情况下，我想自己创建输入/输出套接字并将它们传递到我的选择循环中。

问候，

亚历克斯 - 第一次海报！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:05:00.053

我假设您可以使用 C++ [Apache Thrift](http://thrift.apache.org/)很好 - [FAST RPC](http://fastrpc.sourceforge.net/?page=example&sub=example-c)也很有用。

我在 2012 年初评估了相当多的库，最终选择了[ZeroMQ](http://www.zeromq.org/)，因为它更具适应性并且（我发现它）更容易且更灵活。我确实考虑过使用[Google protobuf](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns#RPC_Implementations)实现，但最终使用了更简单的结构化命令文本方法。

除非我必须这样做，否则我可能不会考虑在 C 中执行此操作，在这种情况下，我可能会从标准 rpc(3) 内容开始，要获得一个很好的概述，请参阅 [Remote Procedure Calls (RPC) 概述](http://www.cs.cf.ac.uk/Dave/C/node33.html)。

# php - 建议的 MongoDB 文档结构

> ID：11700739
> 
> 赞同：1
> 
> 时间：2012-07-28T11:47:09.293
> 
> 标签：php, json, mongodb

我想知道 MongoDB 中“客户服务”文档的最佳布局是什么。我想过这样的事情，但不确定。

```
{
"userid":(MONGODBUSERID),
"subject":"subjectofissue",
"issue":"issue that the user has",
"replies":[{
   "whoreplied":"staff/customer",
   "uid":"userid of replier",
   "msg":"msg of reply"
}]
} 
```

这是最好的方法吗？如果是这样，我将如何使用 PHP 更新回复数组？我需要插入回复数组而不覆盖过去的回复。

我绑了这个但得到了以下错误

**致命错误**：未捕获的异常“MongoException”，消息“不允许使用零长度的键，您是否使用带有双引号的 $？” 在 /home/MYSITE/public_html/core.php:347 堆栈跟踪：

我的代码

```
$array = array(
    "$push" => array(
        "replies" => array(
            "whoreplied" => "user",
            "uid" => new MongoId($this->data['uid']), 
            "msg" => $this->data['issue']
        )
     )
);

$collection->update(array(
    "_id" => new MongoId($this->data['customerID'])
), $array); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:50:05.023

您需要将`$push`第 2 行的命令用单引号 ( `'`) 而非双引号 ( `'"`) 括起来。

```
$array = array(
    '$push' => array(
        "replies" => array(
            "whoreplied" => "user",
            "uid" => new MongoId($this->data['uid']), 
            "msg" => $this->data['issue']
        )
     )
); 
```

双引号将导致 PHP 将其`$push`视为变量并尝试将其替换为变量的值。

# javascript - Facebook 点赞和评论框：点赞数会自动增加

> ID：11700741
> 
> 赞同：1
> 
> 时间：2012-07-28T11:47:46.473
> 
> 标签：javascript, facebook, facebook-like, facebook-javascript-sdk, facebook-comments

我在我网站的每个页面上都包含 Facebook 的“喜欢按钮”和“评论框”。网站处于测试阶段。

**问题 1：**当我在任何页面上发表评论时，当我注销 facebook 并刷新同一页面时，它不会显示。一旦再次登录 Facebook，我的评论就会对我可见。这意味着其他人看不到我的评论。

**问题2：**随着上面的问题，当我在一个页面上评论时，它会自动将'like button'计数增加1。假设我输入2条评论，那么计数增加2。

有人能在这里找出问题吗？请帮忙。

注意：我在打开标签后就包含了 FB Javascript SDK 代码（根据他们的指南）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:13:37.653

我不确定你的第一个问题；它可能与您的评论框的设置有关。如果您还没有这样做，您应该转到[Facebook 开发者页面](http://developers.facebook.com/)并获取该框的 App ID，以便您可以轻松更改其设置和审核评论。

至于你的第二个问题，这是一种预期的行为。正如它在[Like 按钮文档](https://developers.facebook.com/docs/reference/plugins/like/)中所说：

> 我的“赞”按钮上显示的数字是由什么组成的？
> 
> 显示的数字是以下各项的总和：
> 
> *   此网址的点赞数
> *   此 URL 的共享数量（这包括将链接复制/粘贴回 Facebook）
> *   Facebook 上有关此 URL 的故事的点赞数和评论数

# html - 使用JSP 上的标签打印包含图像名称的字符串

> ID：11700742
> 
> 赞同：0
> 
> 时间：2012-07-28T11:47:55.400
> 
> 标签：html, jsp, jquery-mobile, jstl, struts-1

我有一个名为的字符串`strImage`，其中包含图像名称，例如： http: [//m.sears.com/ecircular/SearsLocalAd.jpg](http://m.sears.com/ecircular/SearsLocalAd.jpg)，我需要在我的 JSP 上打印这些图像。我正在使用以下 2 行代码来打印图像：

```
<img src="<%=strImage%>" alt="Test Image 1" width="270" height="190"/> 
```

我也用过

```
<img src="<c:url value="<%=strImage%>"/> alt="Test Image 1" width="270" height="190"/> 
```

但我无法打印图像。请建议如何打印图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:52:05.240

你也试过了吗

```
<img src="<%= out.print(strImage); %>" alt="Test Image 1" width="270" height="190"/> 
```

?

# r - 为什么数字 1e9999... (31 9s) 会在 R 中引起问题？

> ID：11700748
> 
> 赞同：37
> 
> 时间：2012-07-28T11:48:41.197
> 
> 标签：r

当进入`1e9999999999999999999999999999999`R 时，R 挂起并且不会响应 - 要求它被终止。

它似乎发生在 3 台不同的计算机、操作系统（Windows 7 和 Ubuntu）上。它发生在 RStudio、RGui 和 RScript 中。

这是一些更容易生成数字的代码：

```
boom <- paste(c("1e", rep(9, 31)), collapse="")
eval(parse(text=boom)) 
```

现在显然这不是一个实际问题。我不需要使用这种数量级的数字。这只是一个好奇的问题。

奇怪的是，如果你尝试`1e9999999999999999999999999999998`或`1e10000000000000000000000000000000`（从幂中加或减一），你会分别得到`Inf`和`0`。这个数字显然是某种界限，但在什么和为什么之间呢？

我认为它可能是：

*   一个浮点问题，但我认为它们的最大值为 1.7977e308，远早于所讨论的数字。
*   32 位整数的问题，但 2^32 是 4294967296，比所讨论的数字小得多。
*   真的很奇怪。这是我的主导理论。

编辑：最迟在 2015 年 9 月 15 日，这不再导致 R 挂起。他们一定已经修补过了。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-30T16:02:40.387

这看起来像是解析器中的一个极端情况。该`XeY`格式在[第 10.3.1 节：](http://cran.r-project.org/doc/manuals/R-lang.html#Literal-constants)[R 语言定义](http://cran.r-project.org/doc/manuals/R-lang.html)的文字常量中进行了描述，并指向`?NumericConstants`“当前接受格式的最新信息”。

问题似乎是解析器如何处理指数。数字常量由`NumericValue`（第 4361 行`main/gram.c`）处理，它调用`mkFloat`（第 4124 行`main/gram.c`），它调用`R_atof`（第 1584 行`main/util.c`），它调用`R_strtod4`（第 1461 行`main/util.c`）。（所有内容截至修订版 60052。）

`main/utils.c`显示的第 1464 行`expn`声明为`int`，如果指数太大，它将在第 1551 行溢出。有符号整数溢出会导致未定义的行为。

例如，下面的代码生成指数 < 308 左右和`Inf`指数 > 308 的值。

```
const <- paste0("1e",2^(1:31)-2)
for(n in const) print(eval(parse(text=n))) 
```

您可以看到指数 > 2^31 的未定义行为（对于指数 = 2^31，R 挂起）：

```
const <- paste0("1e",2^(31:61)+1)
for(n in const) print(eval(parse(text=n))) 
```

我怀疑这会引起 R-core 的任何关注，因为 R 只能存储大约 2e-308 到 2e+308 之间的数值（请参阅 参考资料`?double`），而这个数字*远*不止于此。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T12:28:01.103

这很有趣，但我认为 R 在解析具有非常大指数的数字时存在系统性问题：

```
> 1e10000000000000000000000000000000
[1] 0
> 1e1000000000000000000000000000000
[1] Inf
> 1e100000000000000000000
[1] Inf
> 1e10000000000000000000
[1] 0
> 1e1000
[1] Inf
> 1e100
[1] 1e+100 
```

我们走了，终于有一些合理的东西了。根据此输出和下面 Joshua Ulrich 的评论，R 似乎支持表示高达约 2e308 的数字并解析指数高达约 +2*10^9 的数字，但它不能表示它们。之后，显然由于溢出而出现未定义的行为。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-28T11:53:55.623

*R*有时可能会使用[bignums](http://en.wikipedia.org/wiki/Bignums)。可能`1e9999999999999999999999999999999`是某个阈值，或者解析例程用于读取指数的缓冲区有限。您的观察结果与指数的 32 个字符（以空字符结尾）缓冲​​区一致。

我宁愿在论坛或特定于*R*的邮件列表上问这个问题，据传它们很友好。

或者，由于*R*是免费软件，您可以研究它的源代码。

# vb.net - 如何使这个 VB.NET 代码更高效、更快？

> ID：11700751
> 
> 赞同：-1
> 
> 时间：2012-07-28T11:49:16.420
> 
> 标签：vb.net, if-statement, performance

几天来，我一直在努力让这段代码更快、更高效，但它似乎仍然没有达到应有的效率。

```
Sub Main()
    Dim watch As Stopwatch = Stopwatch.StartNew()

    Dim l As New List(Of ULong)(CType(My.Application.CommandLineArgs.Item(0), ULong))
    For i As ULong = 1 To l.Capacity
        ' ONE LINE IF STMT: If l.Capacity And 1 <> 0 Then If i And 1 = 0 Then l.Add((i * i) - 1) Else l.Add((i * i) + 1) Else If i And 1 = 0 Then l.Add((i * i) + 1) Else l.Add((i * i) - 1)
        If l.Capacity And 1 <> 0 Then
            If i And 1 = 0 Then
                l.Add((i * i) - 1)
            Else
                l.Add((i * i) + 1)
            End If
        Else
            If i And 1 = 0 Then
                l.Add((i * i) + 1)
            Else
                l.Add((i * i) - 1)
            End If
        End If
    Next i
    Console.WriteLine(String.Join(","c, l.ToArray))

    watch.Stop()
    Console.WriteLine(watch.Elapsed.TotalMilliseconds)
    Console.ReadLine()
End Sub 
```

它目前在 4.3 毫秒内运行 100 次 i 迭代。我觉得嵌套的 if 语句是这里的主要瓶颈，但我不确定有什么方法可以改变它们。

那么，这段代码可以变得更高效吗？

谢谢... ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:01:49.130

首先，`If l.Capacity And 1 <> 0`退出循环，因为它总是一样的。

然后，放弃位操作以支持更具可读性的`i Mod 2 = 0`测试：您似乎认为这更有效，但实际上这种微不足道的优化最好留给编译器和运行时，它们在您的代码中没有位置，我严重怀疑他们有*任何*可衡量的影响。

如果这仍然效率低下，请不要使用初始容量和`Add`. 相反，使用`Resize`和索引访问元素。然后，您还可以通过使用两个循环来摆脱其他`If`语句：一个用于偶数元素，一个用于奇数元素。

也就是说，**该`Join`操作可能是迄今为止最慢的步骤**（除了实际打印到控制台之外，也许）并且**您无法优化它。**

最后，我发现`CType`非常难以理解：你在这里所做的不是强制转换，而是*解析操作*。为什么不把它写成一个呢？`ULong.Parse(…)`. 另外，您为什么使用笨拙的`My.Application.CommandLineArgs.Item`而不是接受命令行参数作为参数`Main`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:32:34.200

一旦我只更正了您的错误，正如我认为您所希望的那样，当使用 Ctrl+F5 和带有发布版本的 Visual Studio 2010 时，我会得到以下输出：

> 0,5,8,17,24,37,48,65,80,101,120,145,168,197,224,257,288,325,360,401,440,485,528,577,624,677,728,785,840,901,960,1025,1088,1157,1224,1297,1368,1445,1520,1601,1680,1765,1848,1937,2024,2117,2208, 2305,2400,2501,2600,2705,2808,2917,3024,3137,3248,3365,3480,3601,3720,3845,3968,4097,4224,4357,4488,4625,4760,4901,5040,5185, 5328,5477,5624,5777,5928,6085,6240,6401,6560,6725,6888,7057,7224,7397,7568,7745,7920,8101,8280,8465,8648,8837,9024,9217,9408, 9605,9800,10001
> 33.9106

这就是这段代码：

```
Sub Main()
    Dim watch As Stopwatch = Stopwatch.StartNew()

    Dim l As New List(Of ULong)(CInt(My.Application.CommandLineArgs(0)))

    For i As ULong = 1 To CULng(l.Capacity)
        ' ONE LINE IF STMT: If l.Capacity And 1 <> 0 Then If i And 1 = 0 Then l.Add((i * i) - 1) Else l.Add((i * i) + 1) Else If i And 1 = 0 Then l.Add((i * i) + 1) Else l.Add((i * i) - 1)
        If (l.Capacity And 1) <> 0 Then
            If (i And 1UL) = 0UL Then
                l.Add((i * i) - 1UL)
            Else
                l.Add((i * i) + 1UL)
            End If
        Else
            If (i And 1UL) = 0UL Then
                l.Add((i * i) + 1UL)
            Else
                l.Add((i * i) - 1UL)
            End If
        End If
    Next i
    Console.WriteLine(String.Join(","c, l.ToArray))

    watch.Stop()
    Console.WriteLine(watch.Elapsed.TotalMilliseconds)
    Console.ReadLine()
End Sub 
```

使用 LINQ：

> 0,5,8,17,24,37,48,65,80,101,120,145,168,197,224,257,288,325,360,401,440,485,528,577,624,677,728,785,840,901,960,1025,1088,1157,1224,1297,1368,1445,1520,1601,1680,1765,1848,1937,2024,2117,2208, 2305,2400,2501,2600,2705,2808,2917,3024,3137,3248,3365,3480,3601,3720,3845,3968,4097,4224,4357,4488,4625,4760,4901,5040,5185, 5328,5477,5624,5777,5928,6085,6240,6401,6560,6725,6888,7057,7224,7397,7568,7745,7920,8101,8280,8465,8648,8837,9024,9217,9408, 9605,9800,10001
> 13.0721

那是：

```
Sub Main()
    Dim watch As Stopwatch = Stopwatch.StartNew()

    Dim arg = CInt(My.Application.CommandLineArgs(0))
    Console.WriteLine(String.Join(","c, Enumerable.Range(1, arg).Select(
                                  Function(i) ((i * i +
                                               If((arg And 1) <> 0,
                                                   If((i And 1) = 0, -1, 1),
                                                   If((i And 1) = 0, 1, -1))).ToString()))))

    watch.Stop()
    Console.WriteLine(watch.Elapsed.TotalMilliseconds)
    Console.ReadLine()
End Sub 
```

现在优化：

> 0,5,8,17,24,37,48,65,80,101,120,145,168,197,224,257,288,325,360,401,440,485,528,577,624,677,728,785,840,901,960,1025,1088,1157,1224,1297,1368,1445,1520,1601,1680,1765,1848,1937,2024,2117,2208, 2305,2400,2501,2600,2705,2808,2917,3024,3137,3248,3365,3480,3601,3720,3845,3968,4097,4224,4357,4488,4625,4760,4901,5040,5185, 5328,5477,5624,5777,5928,6085,6240,6401,6560,6725,6888,7057,7224,7397,7568,7745,7920,8101,8280,8465,8648,8837,9024,9217,9408, 9605,9800,10001
> 12.5956

在这一点上，我认为我清楚地达到了`Console.WriteLine`时间范围内的差异，但即使使用下面的代码，我仍然得到 12 到 15 毫秒......

```
Sub Main()
    Dim watch As Stopwatch = Stopwatch.StartNew()

    Dim arg = CInt(My.Application.CommandLineArgs(0))

    Dim fn As Func(Of Integer, String) = If((arg And 1) <> 0,
                                            Function(i As Integer) ((i * i + If((i And 1) = 0, -1, 1)).ToString()),
                                            Function(i As Integer) ((i * i + If((i And 1) = 0, 1, -1)).ToString()))

    Dim s = String.Join(","c, Enumerable.Range(1, arg).Select(fn))

    watch.Stop()
    Console.WriteLine(s)
    Console.WriteLine(watch.Elapsed.TotalMilliseconds)
    Console.ReadLine()
End Sub 
```

# java - 将 SHA1 字节数组从 java 转换为 PHP

> ID：11700753
> 
> 赞同：0
> 
> 时间：2012-07-28T11:49:34.087
> 
> 标签：java, php, variables, type-conversion, sha1

我必须将一个 Web 应用程序从 Java 更新为 PHP，但我发现了一些难题……最大的问题是将 SHA1 从 Java 转换为 PHP，因为在我之前有人开发了一个浏览器扩展，需要特定的身份验证代码才能工作。 . 我不能更改插件，我只需要将网络应用程序从 java 转换为 php ...

这是代码：

```
 private static final byte[] SecretKey;

  public static String AuthCode(String url) {

    byte[] urlBytes = url.getBytes("US-ASCII");

    byte[] concatenated = new byte[SecretKey.length + urlBytes.length];
    System.arraycopy(SecretKey, 0, concatenated, 0, SecretKey.length);
    System.arraycopy(urlBytes, 0, concatenated, SecretKey.length, urlBytes.length);

    byte[] hash = HashTools.calculateHash(concatenated, "SHA1");
    return CodecTools.encodeBASE64(hash);
  }

  static {
    SecretKey = new byte[] { 18, -15, -48, 73, 54, -115, 34, -87 };
  } 
```

现在，我发现很难将 SecretKey 从字节转换为 php 中的其他内容。因为 php 没有字节变量……而且我读到 php 中的 sha1 与 java 不同。

在 PHP 中，我无法制作数组字符的 sha1，它只需要一个字符串 ...

（其他stackoverflow答案仅建议如何将Java代码更改为等于php ..我需要PHP代码应该等于Java ...）

我希望有人能帮助我，因为我真的不了解 Java ......

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:09:13.547

使用简单`string`的字节容器。

例如，如果要存储密钥：

```
$secretKeyArray = array(18, -15, -48, 73, 54, -115, 34, -87);

$secretString = '';
foreach($secretKeyArray as $k => $v) {
   $secretString.= chr($v & 0xFF); // trim to 8 bits (for the negative values)
} 
```

现在您将密钥存储在`$secretString`.

***编辑：***

连接的数组将是：

```
$concatenated = $secretString . $url; 
```

进而

```
return base64_encode(sha1($concatenated, true)); 
```

# android - 从 sdcard 读取图像时获取 bitmap.getWidth() 的 nullpointerexception

> ID：11700754
> 
> 赞同：1
> 
> 时间：2012-07-28T11:49:41.257
> 
> 标签：android, image, bitmap, nullpointerexception

我使用 BitmapFactory 从 sd 卡读取图像：

```
String myJpgPath = "/sdcard/yourdollar/img001.jpg"; 
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 2;
Bitmap bm = BitmapFactory.decodeFile(myJpgPath, options); 
```

如果我写：

```
Log.i("width and height: ", bm.getWidth() + " " + bm.getHeight()); 
```

我得到一个空指针异常。我试图扩展，`Bitmap.createScaledBitmap()`但我得到了同样的错误。之后我正在处理位图，所以我希望最后有一个具有任何宽度或高度的位图，因为看起来我没有为位图提供参数。但是我无法缩放它，那么我怎样才能将这个图像作为一个宽度为 500 高度为 500 的位图呢？

***更新

```
 buttonClick = (Button) findViewById(R.id.buttonClick);
    buttonClick.setOnClickListener(new OnClickListener() {
      public void onClick(View v) { // <5>
        preview.camera.takePicture(shutterCallback, rawCallback, jpegCallback);

            Intent intentstart = new Intent(CameraActivity.this, Intent2.class);
          startActivity(intentstart);

      }
    }); 
```

好的，事情就是这样。此按钮使用相机拍照，然后更改活动。如果我这样做，应用程序没有时间创建，所以当我在第二个活动中使用它来读取它时，它会抛出 nullpointerexception。所以我变得棘手（也错了）并提出：

```
preview.camera.takePicture(shutterCallback, rawCallback, jpegCallback);

try {
        Thread.sleep(1200);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
       Intent intentstart = new Intent(CameraActivity.this, Intent2.class);
      startActivity(intentstart); 
```

所以它有 1.2 秒的时间来创建文件，然后更改活动。有什么方法可以检查文件是否创建？当然，如果它是真的，那么它应该改变活动。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:07:15.060

首先检查您的图像是否在您所需的目录中`/sdcard/yourdollar/img001.jpg`，然后尝试这样 -

```
String myJpgPath = "/sdcard/yourdollar/img001.jpg"; 
Bitmap bm = BitmapFactory.decodeFile(myJpgPath); 
```

并在您的 Logcat 中获取图像高度和宽度

```
Log.i("width and height: ", bm.getWidth() + " " + bm.getHeight()); 
```

# javascript - 删除所有不具有特定属性的元素

> ID：11700756
> 
> 赞同：1
> 
> 时间：2012-07-28T11:50:03.473
> 
> 标签：javascript, jquery, html

我有一个小文档，其中每个标签都有一个属性，例如

`keep="true"`

我如何遍历整个`<body></body>`并删除这些没有设置此属性的标签的整个 innerHTML（也将它们本身删除）。

如果可能的话，我更喜欢使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T11:54:25.930

您可以将[:not()](http://api.jquery.com/not-selector/)选择器与[Attribute Equals](http://api.jquery.com/attribute-equals-selector/)选择器结合使用：

```
$(":not([keep='true'])").remove(); 
```

或者甚至是一个简单的[Has Attribute](http://api.jquery.com/has-attribute-selector/)选择器，具体取决于您的标记语义：

```
$(":not([keep])").remove(); 
```

*编辑：*如果要删除匹配的元素但保留其内容，则可以将[children()](http://api.jquery.com/children/)链接到[unwrap()](http://api.jquery.com/unwrap/)中：

```
$(":not([keep])").children().unwrap(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:57:07.803

`keep`不是有效属性，您可以使用`data-*`属性并尝试：

```
$('*:not([data-keep="true"])').empty() 
```

* * *

```
$('div:not([data-keep="true"])').empty() 
```

# eclipse-plugin - 在 RCP 项目中完成自定义“新文件向导”时出现异常

> ID：11700758
> 
> 赞同：0
> 
> 时间：2012-07-28T11:50:07.347
> 
> 标签：eclipse-plugin, eclipse-rcp, wizard

我正在使用自定义的“新文件向导”。当我按下完成按钮时，我希望 eclipse 添加一个新文件并正确显示它，但是会发生异常并且我无法打开创建的文件。但是，如果我第二次使用此向导，则不会发生异常并且文件可以正确打开。为什么？

此行`getContainer().run(true, false, op)`执行时发生异常。

它是例外的一部分：

```
!ENTRY org.eclipse.e4.ui.workbench 4 0 2012-07-28 16:15:01.239
!MESSAGE Unable to create class 'org.eclipse.ui.internal.e4.compatibility.CompatibilityEditor' from bundle '33'
!STACK 0
org.eclipse.e4.core.di.InjectionException: java.lang.IllegalArgumentException: can't find IDfind.ext
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:63)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:857)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:837)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:318)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:889)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:623)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
.
.
. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:28:16.827

所以问题是你的应用程序中的一个插件需要一个名为 find.ext 的标记。错误日志显示 IDfind.ext，因为错误消息是在没有空格的情况下连接在一起的。

如果您有自定义应用程序，就会发生这种情况。解决方案非常简单：找到扩展 ActionBarAdvisor 并定义应用程序初始菜单和工具栏（如文件、帮助等）的 WindowActionBarAdvisor。

添加这一行：menu.add(new GroupMarker(IWorkbenchActionConstants.FIND_EXT)); fe 到方法 createEditMenu。或任何其他菜单条目。

# java - 线程池与许多单独的线程

> ID：11700763
> 
> 赞同：8
> 
> 时间：2012-07-28T11:50:38.097
> 
> 标签：java, multithreading, pool, pooling, spawning

我正处于一个问题之中，我无法决定采用哪种解决方案。

这个问题有点独特。这么说吧，我不断地从网络接收数据（每秒 2 到 4 次）。现在每个数据都属于一个不同的，比如说，组。现在，让我们将这些组称为 group1、group2 等。

每个组都有一个专用的作业队列，来自网络的数据被过滤并添加到相应的组中进行处理。

起初，我为每个组创建了一个专用线程，该线程将从作业队列中获取数据，对其进行处理，然后进入阻塞状态（使用链接阻塞队列）。

但是我的学长建议我应该使用线程池，因为这样线程不会被阻塞，并且可以被其他组用于处理。

但事情是这样的，我获取的数据足够快，线程处理它所花费的时间足够长，线程可能不会进入阻塞模式。这也将保证数据按顺序处理（作业 1 在作业 2 之前完成），在池中，这种情况很少发生，可能不会发生。

我的学长也坚持这样一个事实，即池化也会为我们节省大量内存，因为线程是 POOLED 的（我认为他真的很喜欢这个词；））。虽然我不同意这一点，因为我个人认为，是否每个线程都获得了自己的堆栈内存。除非线程池中有我不知道的东西。

最后一件事，我一直认为汇集有助于短期内大量出现工作。这是有道理的，因为线程生成会导致性能下降，因为初始化线程所花费的时间远远超过完成工作所花费的时间。因此，池化在这里有很大帮助。

但在我的情况下，group1、group2、...、groupN 始终保持活动状态。因此，无论是否有数据，它们仍然会存在。所以线程生成不是这里的问题。

我的上级不相信，并希望我使用池解决方案，因为它的内存占用很大。

那么，该走哪条路呢？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T11:57:49.227

*创建*线程会消耗资源，包括每个线程的默认堆栈（IIR 512Kb，但可配置）。因此，池化的优势在于您会受到有限的资源影响。当然，您需要根据您必须执行的工作来调整池的大小。

对于您的特定问题，我认为关键是在每种情况下实际测量性能/线程使用情况等。除非您遇到限制，否则我可能不会担心任何一种方式，除了确保您可以将一种实现换成另一种而不会对您的应用程序产生重大影响。请记住，*过早的优化是万恶之源*。[请注意](http://en.wikipedia.org/wiki/Program_optimization)：

> “过早优化”是一个短语，用于描述程序员让性能考虑影响一段代码的设计的情况。这可能会导致设计不如预期的干净或代码不正确，因为代码因优化而变得复杂，而程序员因优化而分心。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T12:11:57.180

好问题。正如您所说，池化确实可以节省您的初始化时间。但它还有另一个方面：资源管理。我在这里问你这个——你有多少组（阅读专用线程）？它们是否在应用程序的执行期间动态增长？

例如，考虑这个问题的答案是肯定的情况。新的组类型是动态添加的。在这种情况下，您可能不想为每个线程专门分配一个线程，因为从技术上讲，对将创建的组的数量没有限制，您将创建大量线程并且系统将进行上下文切换而不是实际工作. *到救援线程池的线程池允许您指定对可能*创建的最大线程数的限制，而不考虑负载。因此，应用程序可能会拒绝某些请求的服务，但通过的请求会得到妥善处理，而不会严重耗尽系统资源。

考虑到上述情况，我很有可能在您的情况下，为每个组设置一个专用线程是非常好的！

你的前辈相信它会节省内存也是如此。确实，一个线程占用了堆上的内存，但它真的有这么多吗，如果它是一个预定义的数量，比如 5。即使是 10-也可能没问题。无论如何，除非您是先验的并且绝对确信您确实有问题，否则您不应该使用池化！

池化是一种设计决策，而不是架构决策。您可以在开始时不进行池化并继续进行优化，以防在遇到性能问题*后发现池化是有益的。*

考虑到请求的序列化（按顺序执行），无论您使用的是线程池还是专用线程。顺序执行是*队列*与单个处理程序线程相结合的属性。

# jpanel - 将 JPanel 动态添加到 CardLayout 时组件无法正确显示

> ID：11700774
> 
> 赞同：0
> 
> 时间：2012-07-28T11:52:35.490
> 
> 标签：jpanel, jcomponent, cardlayout

我希望有人能够帮助我解决以下问题。我正在创建一个 Java 桌面应用程序，其中有一个 JPanel topicPanel，其中包含两个 JPanel；topicButtonsPanel 包含 JButton createEntryButton 和实现 CardLayout 的 topicTabCardsPanel。单击 createEntryButton 时，我试图动态创建并添加一个新的 JPanel entryPanel，其中包含 JTextlabels、JTextFIelds 和 JButtons。在 topicPanel 类中执行的操作方法中使用的代码是：

```
private void createEntryButtonActionPerformed(java.awt.event.ActionEvent evt)    {                                                  
    EntryPanel entryPanel = new EntryPanel();
    add(entryPanel);

    CardLayout cards = (CardLayout) topicTabCardsPanel.getLayout();
    cards.addLayoutComponent(entryPanel, "entryPanelCard");
    cards.show(topicTabCardsPanel, "entryPanelCard");
} 
```

但是，尽管 entryPanel 已添加到 topicPanel，但 topicPanel 中的组件并未正确显示。只有 JTextFields 似乎正确显示，JLabels 根本不显示，JButtons 只在悬停时出现？我还有一个 JTextArea，当鼠标悬停在上面时，除了滚动条之外不显示。

以下是 topicPanel 和 entryPanel 类的代码：

```
import java.awt.CardLayout;

public class TopicTab extends javax.swing.JPanel {

private ProjectPanel projectPanel;

/**
 * Creates new form TopicTab
 */
public TopicTab(ProjectPanel projectPanel) {
    initComponents();
    this.projectPanel = projectPanel;
}

public TopicTab() {
    initComponents();
}

public static void main(String args[]) {

    TopicTab topicTab = new TopicTab();
    topicTab.setVisible(true);
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    topicButtonsPanel = new javax.swing.JPanel();
    createEntryButton = new javax.swing.JButton();
    importEntryButton = new javax.swing.JButton();
    topicTabCardsPanel = new javax.swing.JPanel();
    timelinePanel = new Timeline.TimelinePanel();

    setMinimumSize(new java.awt.Dimension(1275, 672));
    setPreferredSize(new java.awt.Dimension(1275, 672));
    setLayout(new java.awt.BorderLayout());

    topicButtonsPanel.setBackground(new java.awt.Color(255, 255, 255));

    createEntryButton.setText("Create Entry");
    createEntryButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            createEntryButtonActionPerformed(evt);
        }
    });

    importEntryButton.setText("Import Entry");

    javax.swing.GroupLayout topicButtonsPanelLayout = new javax.swing.GroupLayout(topicButtonsPanel);
    topicButtonsPanel.setLayout(topicButtonsPanelLayout);
    topicButtonsPanelLayout.setHorizontalGroup(
        topicButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(topicButtonsPanelLayout.createSequentialGroup()
            .addContainerGap()
            .addComponent(createEntryButton)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(importEntryButton)
            .addContainerGap(1071, Short.MAX_VALUE))
    );
    topicButtonsPanelLayout.setVerticalGroup(
        topicButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(topicButtonsPanelLayout.createSequentialGroup()
            .addContainerGap()
            .addGroup(topicButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(createEntryButton)
                .addComponent(importEntryButton))
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );

    add(topicButtonsPanel, java.awt.BorderLayout.PAGE_START);

    topicTabCardsPanel.setLayout(new java.awt.CardLayout());

    javax.swing.GroupLayout timelinePanelLayout = new javax.swing.GroupLayout(timelinePanel);
    timelinePanel.setLayout(timelinePanelLayout);
    timelinePanelLayout.setHorizontalGroup(
        timelinePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 1275, Short.MAX_VALUE)
    );
    timelinePanelLayout.setVerticalGroup(
        timelinePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 627, Short.MAX_VALUE)
    );

    topicTabCardsPanel.add(timelinePanel, "card2");

    add(topicTabCardsPanel, java.awt.BorderLayout.CENTER);
}// </editor-fold>                        

private void createEntryButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                  
    EntryPanel entryPanel = new EntryPanel();
    add(entryPanel);

    CardLayout cards = (CardLayout) topicTabCardsPanel.getLayout();
    cards.addLayoutComponent(entryPanel, "entryPanelCard");
    cards.show(topicTabCardsPanel, "entryPanelCard");
}                                                 

// Variables declaration - do not modify                     
private javax.swing.JButton createEntryButton;
private javax.swing.JButton importEntryButton;
private Timeline.TimelinePanel timelinePanel;
private javax.swing.JPanel topicButtonsPanel;
private javax.swing.JPanel topicTabCardsPanel;
// End of variables declaration                   
}

public class EntryPanel extends javax.swing.JPanel {

/**
 * Creates new form EntryViewPanel
 */
public EntryPanel() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialise the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    createEntryDetails = new javax.swing.JPanel();
    jLabel2 = new javax.swing.JLabel();
    entryTitleLabel = new javax.swing.JLabel();
    entryDateLabel = new javax.swing.JLabel();
    entryNotesLabel = new javax.swing.JLabel();
    jScrollPane2 = new javax.swing.JScrollPane();
    entryNotesTextArea = new javax.swing.JTextArea();
    entryDayTextField = new javax.swing.JTextField();
    entryTitleTextField = new javax.swing.JTextField();
    entryMonthTextField = new javax.swing.JTextField();
    entryYearTextField = new javax.swing.JTextField();
    newEntryDateBackslashLabel = new javax.swing.JLabel();
    newEntryDateBackslashLabel1 = new javax.swing.JLabel();
    sourceDetailsTabbedPane = new javax.swing.JTabbedPane();
    addSourcePanel = new javax.swing.JPanel();
    addSourceLabel = new javax.swing.JLabel();
    buttonsPanel = new javax.swing.JPanel();
    createEntryButtonsPanel = new javax.swing.JPanel();
    createEntryButton = new javax.swing.JButton();
    backButton = new javax.swing.JButton();
    updateEntryButtonsPanel = new javax.swing.JPanel();
    backButton1 = new javax.swing.JButton();
    updateEntryButton = new javax.swing.JButton();

    setMaximumSize(new java.awt.Dimension(1045, 591));
    setMinimumSize(new java.awt.Dimension(1275, 672));
    setPreferredSize(new java.awt.Dimension(1275, 672));
    setLayout(new java.awt.BorderLayout());

    jLabel2.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
    jLabel2.setText("Enter new entry details:");

    entryTitleLabel.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
    entryTitleLabel.setText("Title:");

    entryDateLabel.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
    entryDateLabel.setText("Date (dd/mm/yy):");

    entryNotesLabel.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
    entryNotesLabel.setText("Notes:");

    entryNotesTextArea.setColumns(20);
    entryNotesTextArea.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
    entryNotesTextArea.setRows(5);
    jScrollPane2.setViewportView(entryNotesTextArea);

    entryDayTextField.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N

    entryTitleTextField.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N

    entryMonthTextField.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N

    entryYearTextField.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N

    newEntryDateBackslashLabel.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
    newEntryDateBackslashLabel.setText("/");

    newEntryDateBackslashLabel1.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
    newEntryDateBackslashLabel1.setText("/");

    javax.swing.GroupLayout createEntryDetailsLayout = new javax.swing.GroupLayout(createEntryDetails);
    createEntryDetails.setLayout(createEntryDetailsLayout);
    createEntryDetailsLayout.setHorizontalGroup(
        createEntryDetailsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(createEntryDetailsLayout.createSequentialGroup()
            .addContainerGap()
            .addGroup(createEntryDetailsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(createEntryDetailsLayout.createSequentialGroup()
                    .addComponent(entryTitleLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 49, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(69, 69, 69)
                    .addComponent(entryTitleTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 348, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(54, 54, 54)
                    .addComponent(entryDateLabel)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(entryDayTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(newEntryDateBackslashLabel)
                    .addGap(9, 9, 9)
                    .addComponent(entryMonthTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(newEntryDateBackslashLabel1)
                    .addGap(10, 10, 10)
                    .addComponent(entryYearTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 55, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 241, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGroup(createEntryDetailsLayout.createSequentialGroup()
                    .addGap(118, 118, 118)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 348, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addComponent(entryNotesLabel))
            .addContainerGap(437, Short.MAX_VALUE))
    );
    createEntryDetailsLayout.setVerticalGroup(
        createEntryDetailsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(createEntryDetailsLayout.createSequentialGroup()
            .addComponent(jLabel2)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addGroup(createEntryDetailsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(entryTitleLabel)
                .addComponent(entryTitleTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(entryDateLabel)
                .addComponent(entryDayTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(entryMonthTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(entryYearTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(newEntryDateBackslashLabel)
                .addComponent(newEntryDateBackslashLabel1))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addGroup(createEntryDetailsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(entryNotesLabel)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(0, 9, Short.MAX_VALUE))
    );

    add(createEntryDetails, java.awt.BorderLayout.PAGE_START);

    addSourceLabel.setFont(new java.awt.Font("Tahoma", 0, 24)); // NOI18N
    addSourceLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
    addSourceLabel.setText("Click here to add a new Source");
    addSourceLabel.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);

    javax.swing.GroupLayout addSourcePanelLayout = new javax.swing.GroupLayout(addSourcePanel);
    addSourcePanel.setLayout(addSourcePanelLayout);
    addSourcePanelLayout.setHorizontalGroup(
        addSourcePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(addSourcePanelLayout.createSequentialGroup()
            .addContainerGap()
            .addComponent(addSourceLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 1250, Short.MAX_VALUE)
            .addContainerGap())
    );
    addSourcePanelLayout.setVerticalGroup(
        addSourcePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(addSourcePanelLayout.createSequentialGroup()
            .addContainerGap()
            .addComponent(addSourceLabel, javax.swing.GroupLayout.DEFAULT_SIZE, 437, Short.MAX_VALUE)
            .addContainerGap())
    );

    addSourceLabel.getAccessibleContext().setAccessibleName("addSourcePanel");

    sourceDetailsTabbedPane.addTab("add source", addSourcePanel);

    add(sourceDetailsTabbedPane, java.awt.BorderLayout.CENTER);
    sourceDetailsTabbedPane.getAccessibleContext().setAccessibleDescription("sourceDetailsTabbedPane");

    buttonsPanel.setMaximumSize(new java.awt.Dimension(1045, 68));
    buttonsPanel.setLayout(new java.awt.CardLayout());

    createEntryButtonsPanel.setMaximumSize(new java.awt.Dimension(1045, 68));
    createEntryButtonsPanel.setName("createEntryButtonsPanel");
    createEntryButtonsPanel.setPreferredSize(new java.awt.Dimension(1045, 68));

    createEntryButton.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
    createEntryButton.setText("Create");

    backButton.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
    backButton.setText("Back");

    javax.swing.GroupLayout createEntryButtonsPanelLayout = new javax.swing.GroupLayout(createEntryButtonsPanel);
    createEntryButtonsPanel.setLayout(createEntryButtonsPanelLayout);
    createEntryButtonsPanelLayout.setHorizontalGroup(
        createEntryButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(createEntryButtonsPanelLayout.createSequentialGroup()
            .addContainerGap()
            .addComponent(backButton, javax.swing.GroupLayout.PREFERRED_SIZE, 143, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(createEntryButton, javax.swing.GroupLayout.PREFERRED_SIZE, 141, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(971, Short.MAX_VALUE))
    );
    createEntryButtonsPanelLayout.setVerticalGroup(
        createEntryButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(createEntryButtonsPanelLayout.createSequentialGroup()
            .addContainerGap()
            .addGroup(createEntryButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(backButton, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(createEntryButton, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addContainerGap(16, Short.MAX_VALUE))
    );

    buttonsPanel.add(createEntryButtonsPanel, "createEntryButtonsPanel");

    updateEntryButtonsPanel.setMaximumSize(new java.awt.Dimension(1045, 68));
    updateEntryButtonsPanel.setMinimumSize(new java.awt.Dimension(1045, 68));
    updateEntryButtonsPanel.setName("updateEntryButtonsPanel");
    updateEntryButtonsPanel.setPreferredSize(new java.awt.Dimension(1045, 68));

    backButton1.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
    backButton1.setText("Back");

    updateEntryButton.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
    updateEntryButton.setText("Update");

    javax.swing.GroupLayout updateEntryButtonsPanelLayout = new javax.swing.GroupLayout(updateEntryButtonsPanel);
    updateEntryButtonsPanel.setLayout(updateEntryButtonsPanelLayout);
    updateEntryButtonsPanelLayout.setHorizontalGroup(
        updateEntryButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(updateEntryButtonsPanelLayout.createSequentialGroup()
            .addContainerGap()
            .addComponent(backButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 143, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(updateEntryButton, javax.swing.GroupLayout.PREFERRED_SIZE, 141, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(971, Short.MAX_VALUE))
    );
    updateEntryButtonsPanelLayout.setVerticalGroup(
        updateEntryButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(updateEntryButtonsPanelLayout.createSequentialGroup()
            .addContainerGap()
            .addGroup(updateEntryButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(backButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(updateEntryButton, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addContainerGap(16, Short.MAX_VALUE))
    );

    buttonsPanel.add(updateEntryButtonsPanel, "updateEntryButtonsPanel");

    add(buttonsPanel, java.awt.BorderLayout.PAGE_END);
}// </editor-fold>                        

// Variables declaration - do not modify                     
private javax.swing.JLabel addSourceLabel;
private javax.swing.JPanel addSourcePanel;
private javax.swing.JButton backButton;
private javax.swing.JButton backButton1;
private javax.swing.JPanel buttonsPanel;
private javax.swing.JButton createEntryButton;
private javax.swing.JPanel createEntryButtonsPanel;
private javax.swing.JPanel createEntryDetails;
private javax.swing.JLabel entryDateLabel;
private javax.swing.JTextField entryDayTextField;
private javax.swing.JTextField entryMonthTextField;
private javax.swing.JLabel entryNotesLabel;
private javax.swing.JTextArea entryNotesTextArea;
private javax.swing.JLabel entryTitleLabel;
private javax.swing.JTextField entryTitleTextField;
private javax.swing.JTextField entryYearTextField;
private javax.swing.JLabel jLabel2;
private javax.swing.JScrollPane jScrollPane2;
private javax.swing.JLabel newEntryDateBackslashLabel;
private javax.swing.JLabel newEntryDateBackslashLabel1;
private javax.swing.JTabbedPane sourceDetailsTabbedPane;
private javax.swing.JButton updateEntryButton;
private javax.swing.JPanel updateEntryButtonsPanel;
// End of variables declaration                   
} 
```

我正在使用 NetBeans IDE 7.1.2 和 Java：1.7.0_04。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:53:09.270

所以看起来我已经解决了这个问题。代替

```
add(entryPanel); 
```

将 entryPanel 添加到 topicTab 面板，我应该将 entryPanel 添加到 topicTabsCardPAnel

```
topicTabCardsPanel.add(entryPanel); 
```

愚蠢的错误！

# xcode - 带有包含 Javascript 和“坏”字符的 HTML 的 NSXMLParser

> ID：11700776
> 
> 赞同：0
> 
> 时间：2012-07-28T11:52:38.103
> 
> 标签：xcode, cocoa, osx-lion

我正在使用 NSXMLParser 从网站解析 HTML。测试站点在我的控制之下，但在操作站点不会。

问题是当解析器遇到包含“坏”字符的 javascript 时。例如，包含`if(screen.width<=521)`. 问题是代码中的 <。我可以看到问题，但不确定是否有任何好的解决方法。（NSXMLParser 报告 NSXMLParserErrorDomain 错误 68。我明白了原因 - 它将 <= 视为新标签的开始，但 = 不是有效的标签名称字符......）。但是那我该怎么办 eg `if(var<20)`？

我实际上对特定内容不感兴趣，因此可以执行全局替换/删除例如“<=”和“>=”（等）之类的操作，但在某些方面这似乎有点混乱，因为我使用 NSXMLParser 来避免不得不开始弄乱内容。如果替换是最好的前进方式，我可以设想“<=”和“>=”，但我应该包括任何其他序列吗？

我是 Cocoa 的新手，所以很容易错过了一些明显的东西——在这种情况下，我很抱歉。我确实看到其他人也发现了类似的问题，但无法从这些问题中找到一个好的方法。

我正在处理错误（以整洁的方式），但它阻止了我的应用程序做它应该做的事情 - 即我需要避免错误而不是处理它。

背景：该应用程序正在对 html 进行“之前”和“之后”比较并寻找更改。我可以将“<=”换成非常奇怪的东西，然后在必要时将其换回去。我什至可以先检查替换内容的数据以消除可能的歧义（例如，找到下载页面中没有的 UID 序列，将“<=”替换为 UID 序列，解析页面，如果需要，将 UID 替换为“<=” ，同样适用于“>=”。

（我查看了例如 libxml2 的 libtidy，但找不到简单的文档，并且如果它不能解决问题，我对启动这样的路线持谨慎态度。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:33:08.117

`NSXMLParser`，顾名思义，并不是用来解析 HTML 的。XML 比 HTML 严格得多，您遇到的错误肯定不是真实世界 HTML 中唯一可能出现的错误。有些 HTML 文档也是有效的 XML，但这是例外，而不是常态。

我建议改用适当的 HTML 解析器，例如[this one](https://github.com/zootreeves/Objective-C-HMTL-Parser)，它是一个围绕 libxml 的 HTML 解析函数的 Objective-C 包装器。

# java-3d - java3d 拾取对象

> ID：11700779
> 
> 赞同：2
> 
> 时间：2012-07-28T11:52:57.127
> 
> 标签：java-3d, scenegraph, mouse-picking, ray-picking

我正在构建一个 java3d GUI，用户可以使用它创建自定义场景图，而无需知道代码，我想使用鼠标选择特定的框，并且我希望能够移动它们......所以我需要选择..

我的场景图中有 2 个盒子和 2 个球体。我只想选择其中一个，并知道选择了哪一个。我可以找出单击了哪种类型的对象，例如，如果我单击特定的球体或框，我可以找到它，但是我不知道如何找出它是哪个对象，因此我可以对其进行处理。

谁能建议我解决这个问题？我只想知道选择了哪个对象。就这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T20:26:37.047

好的，现在问题已经解决了。
每当您在场景图中添加一个框或球体时，您都需要将自定义 userData 添加到这些对象。

例如，如果你要添加一个 Box 对象，那么

boxOb.setUserData("box1"); //这可以是任何数据类型

，当您从拾取中检索数据时，您只需在*getNode()*方法上调用*getUserData(* )方法。砰！您将获得您设置的自定义数据类型，您可以根据您的应用程序进一步处理。干杯:)

# c# - C# 如果不再使用 TCPClient.Close 是否需要关闭它？

> ID：11700781
> 
> 赞同：3
> 
> 时间：2012-07-28T11:53:00.833
> 
> 标签：c#, tcp, tcpclient

我正在制作一个向许多 TCP 侦听器发送数据的程序。如果其中一个 TCP 发送通道不再使用，我们是否需要使用 TCPClient.close 将其关闭。如果我们让它打开会发生什么？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T11:58:09.693

我不会`Close`明确使用 - 我只是通过`using`声明处理它：

```
using (TcpClient client = ...)
{
    // Use the client
} 
```

> 如果我们让它打开会发生什么？

如果双方都没有关闭连接，它将毫无意义地坐在那里无所事事。

如果另一端关闭连接，我怀疑你会在 TIME_WAIT 或类似的时间有一个本地连接；我不知道确切的细节，但这并不理想。

关键是它*可能会*占用一些系统资源，从根本上来说并不理想。它会导致你的程序崩溃和你的系统发疯吗？可能不会——至少除非你要创建大量这样的东西。不过，用非内存资源处理任何东西仍然是一个好主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T12:03:13.257

如果您将其保持打开状态，GC（垃圾收集器）将及时处理您的对象。

使用 TCPClient，终结器（GC 清理对象时运行的代码）调用 Dispose()，这反过来关闭连接并释放它使用的任何操作系统资源。

您不知道 GC 何时进行清理，因此这种方法是不确定的。这可能不是一个或两个打开连接的问题，但是如果您打开大量这些连接，您可能会使系统资源匮乏。

一个好的做法是在使用完 TCPClients 后始终对其进行处置，这可以通过`using`块轻松完成。（如 Jon Skeets 的回答所示......）

# html - 类似 Google 的 jQuery UI 自动完成

> ID：11700785
> 
> 赞同：0
> 
> 时间：2012-07-28T11:53:52.300
> 
> 标签：html, jquery-ui, autocomplete

是否可以仅向服务器发送文本区域中的最后 3 个单词并自动填充最佳结果，让用户继续输入（类似于 Google 自动完成）？

我希望行为是：

1.  **新**[新]
2.  **新**[呃]
3.  新（*空间*）[er]
4.  **纽约**[纽约]
5.  **新 c** [ar]
6.  **新猫**[食物]
7.  新猫（*TAB*）[食物]
8.  **新猫粮**[制作]
9.  ...
10.  新的猫粮**对你的猫**有好处[健康]

（澄清：[方括号]表示自动输入的建议，**粗体文本**表示正在发送到服务器的部分，（*TAB*）和（*SPACE*）表示制表符和空格键按下）

我已经在服务器上有一个用于预测下一个单词的功能（使用马尔可夫链），并且我已经集成了 jQuery UI 自动完成功能，但目前它只是将所有文本发送到服务器并创建一个列表，其中包含所有可供选择的建议，一次您选择它会更改整个文本。

所以最终会涉及到这些问题：

1.  如何只发送最后一部分？
2.  如何附加+选择建议的单词？
3.  如何在 Tab 键上进行选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:44:52.250

好的 - 这是解决方案（这是[结果](http://text-gen.herokuapp.com/)）：

1 + 2：我没有管理单个输入框，而是使用两个相同大小的文本区域，第一个 ( `#text-area`) 启用并具有透明背景，另一个 ( `#suggestions`) 禁用并具有灰色文本颜色。我使用`source`回调来完成所有工作：

```
$('#text-area').autocomplete({ ...

source: function( request, response ) {
        if (request.term.length < 3) {
          return false;
        }
        $.getJSON( $SCRIPT_ROOT + '/_get_word', {
          term: request.term
        }, function(data) {
            $('#suggestions').val(data.result) //suggestion is the disabled textarea
          }
          );
        return false;
      }, 
 ...
    });
}); 
```

3：tab键选择是通过触发自动完成搜索事件完成的：

```
$('#text-area').live( "keydown",'textarea', function( event ) {
        if ( event.keyCode === $.ui.keyCode.TAB) {
          event.preventDefault();
          $('#text-area').val($('#suggestions').val());
          $("#text-area").autocomplete('search', $('#text-area').val());
      }
}); 
```

# .htaccess - 带有 htaccess 的子域别名

> ID：11700788
> 
> 赞同：0
> 
> 时间：2012-07-28T11:54:01.410
> 
> 标签：.htaccess

我有用于管理子域别名的代码：浏览 sub.domain.com 它显示 domain.com/fp/sub。

```
RewriteCond %{HTTP_HOST} ^sub\.domain\.com$
RewriteRule (.*) /fp/sub/$1 
```

我有很多这些子域要设置。有没有办法让这个过程自动化，放置一些变量而不是正确的子域/文件夹名称？

我试过这段代码没有成功

```
RewriteCond %{HTTP_HOST} ^(sub1|sub2)\.domain\.com$
RewriteRule (.*) /fp/$1/$2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:13:13.677

Francesco，首先纠正你的例子，规则应该是：

```
RewriteRule ^(.*) fp/%1/$1         [L] 
```

% 变量在最后一次成功的 cond 正则表达式匹配中设置。

*其次，如果*您可以访问系统或虚拟主机配置，则有很多选择，例如使用[Rewrite Maps](http://httpd.apache.org/docs/current/rewrite/rewritemap.html)或[大量虚拟主机](http://httpd.apache.org/docs/current/rewrite/vhosts.html)。如果您没有此类访问权限，仅限于 .htaccess，那么您需要使用一个或多个规则，就像您已经在做的那样。一种变体是使用目标目录的存在性检查，例如：

```
RewriteCond %{HTTP_HOST}            ^(\w+)\.domain\.com$
RewriteCond %{DOCUMENT_ROOT}/fp/%1 -d
RewriteRule (.*)                   fp/%1/$1            [L] 
```

请注意，如果您使用的是共享托管服务，则 DOCUMENT_ROOT 可能在重写执行时未正确设置，在这种情况下，您的 SHS 提供者将设置一个环境变量来执行相同操作，例如 %{ENV:DOCUMENT_ROOT_REAL}。做一个phpinfo找出来。有关如何调试的更多建议，请参阅[调试 .htaccess 重写规则的提示。](https://stackoverflow.com/questions/9153262/tips-for-debugging-htaccess-rewrite-rules)

# jquery - 如何在 phonegap 中动态导航到另一个页面

> ID：11700794
> 
> 赞同：3
> 
> 时间：2012-07-28T11:54:38.347
> 
> 标签：jquery, html, cordova

我已经从本地数据库中检索了一个数据并使用 jquery 显示在一个列表中，但是我想知道当我单击每个项目时它应该动态导航到另一个视图。

```
$('#Allwordslist').append('<li><a href="#"><h3 class="ui-li-heading">'+row['Word']+'</h3><p class="ui-li-desc">'+row['Type_Of_Word']+'</p></a></li>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:10:27.167

如果您使用的是 jQuery mobile，您应该查看[动态注入页面](http://jquerymobile.com/demos/1.1.1/docs/pages/page-dynamic.html)。简而言之，jQuery mobile 通过劫持链接上的点击事件来处理页面导航。因此，有一种明显的方法可以让 jQuery 处理页面导航：

放入`<a href="page/to/go">`你的`li`. 然后 jQuery 会为你导航。当然，`page/to/go`应该已经注入`DOM`.

还有另一种方法可以做到这一点，jQuery mobile 提供了一个 API`$.mobile.changePage`来允许您浏览视图。

```
function buildData(){
    //build *li*s based on your local data
    ...
    $('all lis').each(function(){
        $(this).click(function(){
            $.mobile.changePage(xxx, xxx);
        }
    });
} 
```

在[文档](http://jquerymobile.com/demos/1.1.1/docs/pages/page-dynamic.html)中，还有示例代码展示了如何动态注入页面，请仔细阅读。

如果您使用的是原始 HTML 页面，那么您只需要使用`<a href="next/page/you/go">`, 而不是`<a href="#">`. 因此，当您单击此锚点时，`WebView`将加载该页面。

# node.js - Node.JS 套接字数据调用

> ID：11700795
> 
> 赞同：1
> 
> 时间：2012-07-28T11:54:47.483
> 
> 标签：node.js

```
 socket.on('data', function(data, socket){
        console.log(socket);
        worker.handle(data, socket); 
```

当我这样做时，输出是`undefined`. 为什么我得到它而不是套接字数据？这会将一个（未定义的）套接字传递给我的工作脚本，然后该脚本会尝试写入该未定义的套接字，从而使服务器崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:01:46.953

你的回调是错误的。socket.on('data') 接受一个只有一个参数的函数——数据。您的第二个参数无效，不会被调用。

您应该（恕我直言）只能在回调的上下文中引用您的“套接字”变量。

# python - 访问嵌套在字典中的值

> ID：11700798
> 
> 赞同：9
> 
> 时间：2012-07-28T11:55:25.780
> 
> 标签：python, dictionary, nested

我有一本包含字典的字典，其中也可能包含字典，例如

```
dictionary = {'ID': 0001, 'Name': 'made up name', 'Transactions':
               {'Transaction Ref': 'a1', 'Transaction Details':
                  {'Bill To': 'abc', 'Ship To': 'def', 'Product': 'Widget A'
                      ...} ...} ... } 
```

目前我正在拆包以获取 ID 001 的“Bill To”，“Transaction Ref”a1 如下：

```
if dictionary['ID'] == 001:
    transactions = dictionary['Transactions']
        if transactions['Transaction Ref'] == 'a1':
            transaction_details = transactions['Transaction Details']
            bill_to = transaction_details['Bill To'] 
```

我不禁认为这有点笨拙，尤其是最后两行-我觉得以下内容应该可行：

```
bill_to = transactions['Transaction Details']['Bill To'] 
```

有没有一种更简单的方法可以深入到嵌套字典中而不必解压缩到临时变量中？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-28T13:43:05.447

你可以使用这样的东西：

```
>>> def lookup(dic, key, *keys):
...     if keys:
...         return lookup(dic.get(key, {}), *keys)
...     return dic.get(key)
...
>>> d = {'a':{'b':{'c':5}}}
>>> print lookup(d, 'a', 'b', 'c')
5
>>> print lookup(d, 'a', 'c')
None 
```

此外，如果您不想将搜索键定义为单独的参数，则可以将它们作为列表传递，如下所示：

```
>>> print lookup(d, *['a', 'b', 'c'])
5
>>> print lookup(d, *['a', 'c'])
None 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-28T12:03:51.027

```
bill_to = transactions['Transaction Details']['Bill To'] 
```

确实有效。`transactions['Transaction Details']`是一个表示 a 的表达式`dict`，因此您可以在其中进行查找。不过，对于实际程序，我更喜欢嵌套字典的 OO 方法。`collections.namedtuple`对于快速设置一堆只包含数据（并且没有它们自己的行为）的类特别有用。

有一个警告：在某些设置中，您可能希望`KeyError`在进行查找时捕获，并且在此设置中，这也有效，很难判断哪个字典查找失败：

```
try:
    bill_to = transactions['Transaction Details']['Bill To']
except KeyError:
    # which of the two lookups failed?
    # we don't know unless we inspect the exception;
    # but it's easier to do the lookup and error handling in two steps 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-16T11:51:53.003

以下是访问嵌套字典的另一种方式

```
>>> dbo={'m':{'d':{'v':{'version':1}}}}
>>> name='m__d__v__version' # it'll refer to 'dbo['m']['d']['v']['version']', '__' is the separator
>>> version = reduce(dict.get, name.split('__'), dbo)
>>> print version
1
>>> 
```

在这里，变量 'name' 指的是 'dbo['m']['d']['v']['version']'，看起来更短更简洁。

此方法不会抛出 KeyError。如果未找到密钥，则您将得到“无”。

参考：[http ://code.activestate.com/recipes/475156-using-reduce-to-access-deeply-nested-dictionaries/](http://code.activestate.com/recipes/475156-using-reduce-to-access-deeply-nested-dictionaries/)

# cakephp - 如何在 cakephp 2 中为 compact() 设置条件

> ID：11700799
> 
> 赞同：0
> 
> 时间：2012-07-28T11:55:28.150
> 
> 标签：cakephp, cakephp-2.0

我必须控制：上传和论文

一篇论文有很多上传。在添加控制器中，我有选择纸张的代码：

```
$this->set(compact('paper')); 
```

现在我如何设置条件以在仅显示用户提交的论文的下拉列表中显示论文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:40:03.943

您可以使用返回上传表中所有论文 ID 的子查询。然后调用 id 匹配的文件。

Cakephp 文档：[子查询](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#sub-queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T19:47:11.063

您的代码中也有 find('list') ，添加查找条件。例子：

```
$papers = $this->Upload->Paper->find('list', array('conditions' => array('Paper.active' => true))); 
```

# c# - Unicode 字符串

> ID：11700800
> 
> 赞同：22
> 
> 时间：2012-07-28T11:55:47.347
> 
> 标签：c#, unicode

我有以下`String`字符。

```
string s = "\\u0625\\u0647\\u0644"; 
```

当我打印上述序列时，我得到：

```
\u0625\u0647\u062 
```

我怎样才能得到真正的可打印 Unicode 字符而不是这个 \uxxxx 表示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T12:05:54.203

如果你真的不控制字符串，那么你需要用它们的值替换那些转义序列：

```
Regex.Replace(s, @"\u([0-9A-Fa-f]{4})", m => ((char)Convert.ToInt32(m.Groups[1].Value, 16)).ToString()); 
```

并希望你那里也没有`\\`逃脱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:04:21.813

尝试`Regex`：

```
String inputString = "\\u0625\\u0647\\u0644";

var stringBuilder = new StringBuilder();
foreach (Match match in Regex.Matches(inputString, @"\u([\dA-Fa-f]{4})"))
{
    stringBuilder.AppendFormat(@"{0}", 
                               (Char)Convert.ToInt32(match.Groups[1].Value));
}

var result = stringBuilder.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-30T19:43:05.113

Asker 将其发布为对他们问题的回答：

> 我找到了答案：
> 
> ```
> s = System.Text.RegularExpressions.Regex.Unescape(s); 
> ```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-12-04T07:43:08.070

我有以下字符串“\u0001”，我想得到它的值。
我尝试了很多，但这对我有用

```
int val = Convert.ToInt32(Convert.ToChar("\u0001")); // val = 1; 
```

如果您有多个字符，则可以使用以下技术

```
var original ="\u0001\u0002";
var s = "";
for (int i = 0; i < original.Length; i++)
{
    s += Convert.ToInt32(Convert.ToChar(original[i]));
}

// s will be "12" 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-28T12:11:54.843

我建议使用`String.Normalize`. 你可以在这里找到一切：

[http://msdn.microsoft.com/it-it/library/8eaxk1x2.aspx](http://msdn.microsoft.com/it-it/library/8eaxk1x2.aspx)

# sql - 对于大型（2000 万条记录）数据库，libpq 非常慢

> ID：11700801
> 
> 赞同：0
> 
> 时间：2012-07-28T11:55:54.850
> 
> 标签：sql, postgresql, visual-c++

我是 SQL/RDBMS 的新手。

我有一个应用程序，它使用 libpq 库在 PostgreSQL 服务器中添加 10 列的行。现在，我的服务器与我的 Visual C++ 应用程序在同一台机器上运行。

我添加了大约 15-20 百万条记录。获取总数的简单查询使用 4-5 分钟`select count(*) from <tableName>;`。

我已经用输入数据的时间（时间码）索引了我的表。大多数时候，我需要添加不同的`WHERE`/`AND`子句。

有什么方法可以让事情变得快速吗？我需要让它尽可能快，因为一旦服务器移动到网络，事情就会变得慢得多。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:08:37.340

我认为网络延迟不会成为查询需要多长时间的重要因素。所有处理都在 PostgreSQL 服务器上完成。

PostgreSQL MVCC 设计意味着必须遍历表中的每一行——不仅仅是索引——来计算计数（*），这是一项昂贵的操作。在您的情况下，涉及很多行。

这里有一个很好的关于这个主题的 wiki 页面[http://wiki.postgresql.org/wiki/Slow_Counting](http://wiki.postgresql.org/wiki/Slow_Counting)和建议。

此链接有两个建议，一个是使用索引列：

```
select count(index-col) from ...; 
```

...虽然这仅在某些情况下有效。

如果您有多个索引，请使用以下方法查看哪个索引成本最低：

```
EXPLAIN ANALYZE select count(index-col) from ...; 
```

如果您可以接受近似值，另一种方法是使用 Postgres 特定函数来获取近似值，例如：

```
select reltuples from pg_class where relname='mytable'; 
```

这个近似值的好坏取决于 autovacuum 设置运行的频率和许多其他因素；见评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:43:59.643

考虑`pg_relation_size('tablename')`并除以花费的秒数

```
select count(*) from tablename 
```

这将在对该表进行完整扫描时提供磁盘的吞吐量。如果它太低，您首先要专注于改进它。拥有良好的 I/O 子系统和性能良好的操作系统磁盘缓存对于数据库至关重要。

默认的 postgres 配置是为了不消耗太多资源来与其他应用程序一起玩。根据您的硬件和机器的整体利用率，您可能需要向上调整几个性能参数，例如**shared_buffers**、**Effective_cache_size**或**work_mem**。请参阅特定版本的文档和 wiki 的[性能优化](http://wiki.postgresql.org/wiki/Performance_Optimization)页面。

另请注意，`select count(*)`样式查询的速度与网络无关`libpq`，因为只检索到一个结果行。它完全发生在服务器端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T01:28:33.577

您没有说明您的数据是什么，但通常处理具有大量数据的表的原因是对表进行分区。[http://www.postgresql.org/docs/9.1/static/ddl-partitioning.html](http://www.postgresql.org/docs/9.1/static/ddl-partitioning.html)

这不会加快您的`select count(*) from <tableName>;`查询速度，甚至可能减慢查询速度，但如果您通常只对表中的一部分数据感兴趣，这可能会有所帮助。

# zend-framework - 我在使用 MongoDb 时会遇到关于文档大小的问题吗？

> ID：11700802
> 
> 赞同：1
> 
> 时间：2012-07-28T11:56:02.263
> 
> 标签：zend-framework, mongodb

我正在尝试开发一个专业的社交网络，我使用 mongodb 到数据库，我想问一下我是否不会对数据库有问题，关于文档的大小。知道我们计划在社交网络中拥有大量用户。我希望我能从你那里得到有用的反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T12:24:17.857

“大量用户”有些模糊。粗略估计会有所帮助。无论如何，MongoDB 中的文档大小限制为 16MB，看起来足以存储用户的个人资料详细信息。但是，在您的“网络”用例中，您可能计划保留追随者/朋友。是否将它们存储在与 User-profile 文档相同的文档中，这本身就是一个不同的问题。您可能想查看这些：

[对于最有效地查询用户关注者/关注者，什么是好的 MongoDB 文档结构？](https://stackoverflow.com/questions/11500294/what-is-a-good-mongodb-document-structure-for-most-efficient-querying-of-user-fo)
[http://www.10gen.com/events/common-mongodb-use-cases](http://www.10gen.com/events/common-mongodb-use-cases)
[http://docs.mongodb.org/manual/use-cases/](http://docs.mongodb.org/manual/use-cases/)
[http://nosql.mypopescu.com/post/316345119/mongodb -用例](http://nosql.mypopescu.com/post/316345119/mongodb-usecases)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:09:29.350

您可能会遇到的一个问题是 MongoDB 为每个文档中的每个字段存储字段名称的文本。因此，如果您有一个名为“名称”或“地址”的字段，您想要一组文档，那么文本将出现在每个文档中，占用空间。这与具有模式的关系数据库不同，其中列的名称只存储一次。

几年前，我参与了一个项目，工程师在模拟数百万用户时对他们的数据集大小感到有点惊讶，因为他们没有考虑到这一点。他们优化了数据的大小（即“loc1”而不是“Location 1”），但对字段名称没有做同样的事情。当习惯于 RDBM 开发的开发人员对 NoSQL 解决方案做出假设时，就会出现问题，他们只计算数据的大小，而不是字段名加字段值。

他们很高兴在上线之前的测试中发现了这一点，否则他们将不得不迁移每个实时文档才能实现他们想要的更改。

这没什么大不了的，当然也不是不使用 MongoDB 的理由（少架构并将每个文档视为一个独特的项目毕竟是一个特性，而不是错误或设计缺陷）。只是要记住的事情。

# php - 正则表达式删除特定字符串周围的标签

> ID：11700804
> 
> 赞同：1
> 
> 时间：2012-07-28T11:56:15.120
> 
> 标签：php, regex, html-parsing

这是我的字符串：

```
$str="<p>Some <a href="#">link</a> with <a href="http://whatever.html?bla">LINK2</a> and <a href="http://whatever.html?bla" target="_blank">LINK3</a> and</p> more html" 
```

我想使用 php 删除链接 LINK1 和 LINK2 以获得：

```
"<p>Some <a href="#">link</a> with and and</p> more html" 
```

这是我认为接近我需要的东西：

```
$find = array("<a(.*)LINK1(.*)</a>", "<a(.*)LINK2(.*)</a>");
$replace = array("", "");
$result=preg_replace("$find","$replace",$str); 
```

这是行不通的。我已经搜索了几天并尝试了许多其他选项，但从未设法让它按预期工作。此外，我真的不介意 LINK1 和 2 是否会在删除 a 标签后立即出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:15:53.317

您非常接近可行的解决方案。您面临的问题是，默认情况下正则表达式会尝试尽可能多地匹配。如果模式介于两者之间，则该模式`<a(.*)LINK1(.*)</a>`实际上将匹配第*一个* `<a`到*最后一个。* 你想要的只是得到最近的标签。`</a>``LINK1``<a>`

有几种方法可以做到这一点，但我通常会让匹配变得不贪心。然后它将尝试找到最小的可能匹配项。这样做的两种方法是`?`在量词之后附加 a 或使用[ungreedy 修饰符`U`](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)。我更喜欢第一个。

使用`?`：

```
/<a(.*?)LINK1(.*?)<\/a>/ 
```

使用修饰符：

```
/<a(.*)LINK1(.*)<\/a>/U 
```

两者在这里都应该同样有效。因此，整个源代码如下（使用`?`）：

```
$find = array("/<a(.*?)LINK1(.*?)<\/a>/", "/<a(.*?)LINK2(.*?)<\/a>/");
$replace = array("", "");
$result = preg_replace($find, $replace, $str); 
```

是的，正如在其他评论中指出的那样，您不应该依赖正则表达式来操作 HTML 代码（因为构造有效的 HTML 代码真的很容易，而不会注意到表达式）。但是，我相信如果您信任您解析的 HTML 代码，或者这种匹配的结果对于其他重要功能并不重要，那是完全可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:05:49.463

试试这个：

```
<?php
$str='<p>Some <a href="#">link</a> with <a href="http://whatever.html?bla">LINK2</a> and <a href="http://whatever.html?bla" target="_blank">LINK3</a> and</p> more html';
$find = array("/<a(.*)LINK1(.*)<\/a>/si", "/<a(.*)LINK2(.*)<\/a>/si");
$replace = array("", "");
$result=preg_replace($find, $replace, $str); 
```

# javascript - jQuery停止功能

> ID：11700809
> 
> 赞同：0
> 
> 时间：2012-07-28T11:57:03.553
> 
> 标签：javascript, jquery, html

我有一个这样的jquery函数：

```
function get()
 {
$.ajax({
     url: 'get.php',
     success: function(data) {
     $('#get').html(data);
     $('#get').fadeIn(2000);
     setTimeout(posts,2000);
    }
    });
 }
 get(); 
```

当我单击网页中的某个元素时，我想停止此功能，我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T11:59:43.647

为您的 AJAX 请求设置一个变量。

```
var getajax;

function get() {
    getajax = $.ajax({

     ......
    });
} 
```

当你想中止它时，只需

```
getajax.abort(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:00:11.657

在您可能无法全局定义所有`.ajax()`调用变量的情况下（如[@uzyn的](https://stackoverflow.com/users/718763/uzyn)[另一个答案](https://stackoverflow.com/a/11700826/558021)所示），这可能是一个合适的解决方案。

你可以简单地`success`用一个标志来包装你的回调，指示你是否要取消结果。

```
var ajax_canceled = false;

function get(){
  $.ajax({
    url: 'get.php',
    success: function(data) {
      if (!ajax_canceled){
          //...
      }
    }
  });
}
get();

$("#cancel_ajax").on('click',function(){
  ajax_canceled = true;
}); 
```

# c# - C# 字节[][] SHA1

> ID：11700813
> 
> 赞同：0
> 
> 时间：2012-07-28T11:57:27.497
> 
> 标签：c#, byte, sha1

我在 C# 中有这段代码，它使用 IKVM 来利用 Java 的 SHA1 加密。

```
 public static string ComputeHash(params byte[][] bytes)
    {
        if (bytes == null) throw new ArgumentNullException("bytes");
        MessageDigest digest = MessageDigest.getInstance("SHA-1");
        foreach (var item in bytes)
        {
            if (item == null)
                if (bytes == null) throw new ArgumentNullException("bytes", "Inner array is null");
            digest.update(item);
        }
        string s = (new java.math.BigInteger(digest.digest())).toString(16);
        return s;
    } 
```

有没有替代方法而不是为此使用 IKVM？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:02:23.103

如果我正确理解了这个问题，您可以使用 System.Security.Cryptography 中的[Sha1CryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha1cryptoserviceprovider.aspx)类。

这是该页面的代码示例：

```
byte[] data = new byte[DATA_SIZE];

byte[] result; 

SHA1 sha = new SHA1CryptoServiceProvider(); 
    // This is one implementation of the abstract class SHA1.

result = sha.ComputeHash(data); 
```

我不希望将该示例更改为采用锯齿状数组的示例太难。

# javascript - 为什么 xpath 选择空格？

> ID：11700814
> 
> 赞同：2
> 
> 时间：2012-07-28T11:57:44.080
> 
> 标签：javascript, xpath

我有一个国家/地区的 XML 列表，如下所示：

```
<countries>
  <country>
    <code>CA</code>
    <country>Canada</country>
  </country>
  ... etc...
</countries> 
```

我想选择节点并遍历它们，所以使用

```
path "/countries/*" 
```

然后在 JavaScript 中：

```
nodes = xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null); 
```

当我迭代时，我发现第一个和第三个节点是空格（换行符），第二个和第四个节点是我想要的实际 XML。

如何使用 XPath 忽略空白节点？我只对 XML 部分感兴趣，我不能保证 XML 会包含换行符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:15:41.750

你不能用这样一个简单的程序吗？

```
NodeList countries = (NodeList) xpath.evaluate("//countries/country",
    builder.parse(inputStream),
    XPathConstants.NODESET);

for (int i = 0; i < countries.getLength(); i++) {
    Node country = notes.item(i);
    String code = (String) xpath.evaluate("./code/text()", country,
        XPathConstants.STRING);
    String name = (String) xpath.evaluate("./country/text()", country, 
        XPathConstants.STRING);

    System.out.println(String.format("%s has country code %s", name, code));
} 
```

与输入

```
<countries>
  <country>
    <code>CA</code>
    <country>Canada</country>
  </country>
  <country>
    <code>FR</code>
    <country>France</country>
  </country>
  <country>
    <code>IT</code>
    <country>Italy</country>
  </country>
  <country>
    <code>US</code>
    <country>United States</country>
  </country>
</countries> 
```

输出

```
Canada has country code CA
France has country code FR
Italy has country code IT
United States has country code US 
```

# objective-c - 带整数的 NSMutableArray

> ID：11700816
> 
> 赞同：-1
> 
> 时间：2012-07-28T11:57:54.823
> 
> 标签：objective-c, xcode

我有这个可变数组：

```
myIntegers = [NSMutableArray array];

[myIntegers addObject:[NSNumber numberWithInteger:indexDelete - 1]];

NSLog (@"Array: %@", myIntegers); 
```

如果我执行代码两次，indexDelete 首先是 1，然后是 2，我会得到以下结果：

```
Array: (
1
) 
```

进而：

```
Array: (
2
) 
```

但我想像这样存储两个数字：

```
Array: (
1
2
) 
```

为什么不添加，而是替换对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T11:59:57.257

每次执行代码时，您都会在这一行创建一个新的空数组：

```
myIntegers = [NSMutableArray array]; 
```

将一个对象添加到一个空数组总是会导致该数组中有一个对象。

# google-chrome-extension - `chrome.*` 扩展 API 可以在内容脚本中使用吗？

> ID：11700822
> 
> 赞同：2
> 
> 时间：2012-07-28T11:58:49.807
> 
> 标签：google-chrome-extension

我正在尝试使用`chrome.windows.onCreated`，但我得到了`Uncaught TypeError: Cannot read property 'onCreated' of undefined`. 我在示例中注意到，对`chrome.*`API 的所有调用似乎都来自后台脚本？我不能在内容脚本中使用它们吗？

我想在浏览器中触发点击。然后在弹出窗口中获取一些信息（抓取）。为此，我想我需要知道何时打开窗口。所以我需要`windows.onCreated`？我可以在内容脚本中使用它吗？或者我将如何结合背景和内容脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T12:08:54.123

从[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)的文档中：

> 但是，内容脚本有一些限制。他们**不能**：
> 
> *   使用`chrome.*`API（部分除外[`chrome.extension`](http://code.google.com/chrome/extensions/extension.html)）
> *   使用由其扩展页面定义的变量或函数
> *   使用由网页或其他内容脚本定义的变量或函数

这些限制可以**间接**避免，主要是通过在扩展中[发送消息。](http://code.google.com/chrome/extensions/messaging.html)该文档提供了几个涉及消息传递的[示例。](http://code.google.com/chrome/extensions/samples.html)在 Chrome 20 之前，消息 API 方法被调用`onRequest`并且`sendRequest`. 从版本 20 开始，它们被称为`onMessage`and `sendMessage`。

这是一个答案，其中提到了如何将消息从内容脚本传递到弹出窗口的步骤： [https ://stackoverflow.com/a/11617742](https://stackoverflow.com/a/11617742)

# android - 设备检查（三星与其他）

> ID：11700824
> 
> 赞同：21
> 
> 时间：2012-07-28T11:59:34.437
> 
> 标签：android, android-layout, android-2.2-froyo

我正在开发一个应用程序，其中三星和 htc 的代码实现存在一些差异，请查看我的 SO 问题

[向多个收件人发送短信（三星与 HTC）](https://stackoverflow.com/questions/11687092/sending-sms-to-multiple-recepients-samsung-vs-htc)

我如何检查设备是三星还是其他（htc）

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-28T12:17:01.907

```
String manufacturer = android.os.Build.MANUFACTURER; 
```

例子：

`Sony Ericsson`

`samsung`

`HTC`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-28T12:07:49.390

试试这个代码。

```
String strManufacturer = android.os.Build.MANUFACTURER; 
```

它将返回制造商的名称。前宏达电

```
String str = android.os.Build.MODEL; 
```

它将返回设备的名称。前 HTC Explorer , HTC 史密斯

查看[此链接](http://developer.android.com/reference/android/os/Build.html)以获取更多信息。

# java - 在JAVA中获取DefaultTableModel中的字段值

> ID：11700828
> 
> 赞同：0
> 
> 时间：2012-07-28T12:00:00.587
> 
> 标签：java, defaulttablemodel

**用户已经连续选择了一个字段的值，我如何获得所选行中的 id 字段的值？比如用户选择第2行name字段的值，我想了解第2行id字段的值。TableModelListener应该怎么写？**

```
public class Main {
    public static DefaultTableModel model;

    public static void main(String[] args) throws Exception {
        model = new DefaultTableModel();
        JFrame frame = new JFrame("Creating a Scrollable JTable!");
        JPanel panel = new JPanel();
        model.addColumn("id");
        model.addColumn("name");
        model.addColumn("family");
        Class.forName("oracle.jdbc.driver.OracleDriver");
        java.sql.Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe", "SYSTEM", "1234");
        PreparedStatement st = con.prepareStatement("select * from person");
        ResultSet r = st.executeQuery();
        while (r.next()) {
            model.addRow(new Object[]{r.getString("id"), r.getString("name"), r.getString("family")});
        }
        st.close();
        con.close();
        model.addTableModelListener(new TableModelListener() {
            public void tableChanged(TableModelEvent e) {
                System.out.println(model.getValueAt(e.getFirstRow(), e.getColumn()));
            }
        });
        JTable table = new JTable(model);
        frame.add(panel);
        panel.add(table);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:08:56.660

使用 ListSelectionListener 而不是 TableModelListener：

```
 table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
        public void valueChanged(ListSelectionEvent e) {
            if (e.getValueIsAdjusting()) return;
            int selectedRow = table.convertRowIndexToModel(table.getSelectedRow());
            int selectedColumn = table.convertColumnIndexToModel(0);

            String selectedId = (String)model.getValueAt(selectedRow, selectedColumn);
            System.out.println(selectedId);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:07:06.700

当 id 列索引为 0 时： System.out.println(model.getValueAt(e.getFirstRow(),0))

# mysql - 在 Mysql 5.1 中创建过程时出错

> ID：11700833
> 
> 赞同：0
> 
> 时间：2012-07-28T12:01:12.137
> 
> 标签：mysql, stored-procedures, syntax-error

我在 Mysql 中执行以下过程。

```
DROP procedure IF EXISTS `wm_batch_list`;

DELIMITER $$

/*!50003 SET @TEMP_SQL_MODE=@@SQL_MODE, SQL_MODE='STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ $$
CREATE DEFINER=`root`@`localhost` procedure `wm_batch_list`(IN p_start int(11),IN p_range int(11))
BEGIN
select * from batch ORDER BY start_year DESC limit p_start,p_range;
END $$
/*!50003 SET SESSION SQL_MODE=@TEMP_SQL_MODE */  $$

DELIMITER ; 
```

**但我收到此错误：**

```
Error code 1064, SQL state 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'p_start,p_range;
END' at line 3 
```

请建议我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:36:45.580

谷歌搜索了一下，我在[将 LIMIT 作为参数传递给 MySQL sproc时发现了一个与你相关的问题](https://stackoverflow.com/questions/2875238/passing-limit-as-parameters-to-mysql-sproc)

从[http://dev.mysql.com/doc/refman/5.1/en/select.html](http://dev.mysql.com/doc/refman/5.1/en/select.html)：

*LIMIT 子句可用于限制 SELECT 语句返回的行数。LIMIT 接受一个或两个数字参数，它们都必须是非负整数常量（使用准备好的语句时除外）。*

所以解决它的方法是使用准备语句

```
SET @skip=p_start;
SET @rows=p_range;

PREPARE STMT FROM 'SELECT * FROM table LIMIT ?, ?';
EXECUTE STMT USING @skip, @rows; 
```

# php - APC 没有加速 PHP 5.4

> ID：11700835
> 
> 赞同：6
> 
> 时间：2012-07-28T12:01:37.647
> 
> 标签：php, apc

我[以前在 WAMP Server 和 PHP 5.3 上遇到过这个问题](https://stackoverflow.com/q/6574999/759866)，现在用 PHP 5.4 在 Linux 上遇到了这个问题。

基本上，启用或禁用 APC 对性能没有影响，尽管 apc.php 中的统计数据说明了什么。

这是一个示例测试脚本，其中包含 30 多个 Doctrine PHP 文件，并对其进行了计时：

```
$t = microtime(true);
include 'Doctrine/ORM/Mapping/Driver/DoctrineAnnotations.php';
printf('%.3f s', microtime(true)-$t); 
```

*   Windows 上的结果（*Zend Server CE，PHP 5.4*）：`0.001 s`
*   Linux 上的结果（*PHP 5.4 和 APC 3.1.11*）：`0.106 s`

**注意：即使上面的脚本中没有显示，我实际上使用的是文件的完整路径，而不是依赖于 include_path。**

`apc.enabled`无论is`0`还是，我在 Linux 上得到的结果都是一样的`1`，所以看起来操作码缓存不起作用。

然而，`apc.php`说：

![apc.php](../Images/7370f2ec9778112fedad0f4994c945a8.png)

软件包（来自[remi 存储库](http://rpms.famillecollet.com/)，CentOS 6.3）：

```
php-5.4.5-1.el6.remi.x86_64
php-pecl-apc-3.1.11-1.el6.remi.1.x86_64 
```

APC配置：

```
apc.enabled=1 
apc.shm_segments=1
apc.shm_size=64M
apc.num_files_hint=1024
apc.user_entries_hint=4096
apc.ttl=7200
apc.use_request_time=1
apc.user_ttl=7200
apc.gc_ttl=3600
apc.cache_by_default=1
apc.file_update_protection=2
apc.enable_cli=1
apc.max_file_size=1M
apc.stat=1
apc.stat_ctime=0
apc.canonicalize=0
apc.write_lock=1 
```

最后一件事，*是*的，PHP 确实报告 APC 已启用：

```
var_dump(extension_loaded('apc')); // (bool) true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:10:29.857

我忘了提到问题的一个重要部分：Web 服务器在 Windows 7 下的 linux 虚拟机上运行，​​并且正在从主机上的共享文件夹中读取文件。

我注意到减慢 APC 的原因是必须访问`stat`此共享文件夹中的文件。

将文件复制到虚拟机可以解决此问题。

然而，令我惊讶的是，`apc.stat=0`它并不能单独解决问题，我本来希望它只对`stat`文件进行一次，然后无条件地从内存缓存中读取所有内容。

# matlab - 如何在 GUI 指南中保存编辑框数据？

> ID：11700838
> 
> 赞同：1
> 
> 时间：2012-07-28T12:01:54.860
> 
> 标签：matlab, user-interface, matlab-guide, editbox

我正在制作一个 GUI，其中有一个多行编辑框。

用户必须一次在此编辑框中输入 3 个 xy 坐标：

```
[345.567 123.123] 
[390.567 178.098]
[378.000 125.987] 
```

通过单击按钮，我希望这些坐标以*矩阵的形式***“保存”**在 Matlab GUI 工作区中，并通过单击工作区中的另一个按钮**“重新加载”**，以便它们可供将来使用。

 ***我怎样才能做到这一点？

任何人都可以指导我吗？帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T01:00:20.590

有多种方法可以[管理](http://www.mathworks.com/help/techdoc/creating_guis/f5-998352.html)GUIDE 生成的 GUI 中的数据。最简单的 IMO 是使用`guidata`.

例如，在“保存”按钮回调中，您将访问编辑框字符串内容，将其解析为数字矩阵并将其保存在`handles`结构中。

```
function pushbuttonSave_Callback(hObject, eventdata, handles)
    handles.M = str2num(get(handles.edit1, 'String'));
    guidata(hObject, handles);
end 
```

接下来在“加载”按钮中，我们做相反的事情，从`handles`结构中加载矩阵，将其转换为字符串，并设置编辑框内容：

```
function pushbuttonLoad_Callback(hObject, eventdata, handles)
    s = num2str(handles.M, '%.3f %.3f\n');
    set(handles.edit1, 'String',s)
end 
```

![截屏](../Images/b3b234da6b45a6fc516f34e343271e21.png)

如果要将数据导出/导入“工作区”，可以使用 ASSIGNIN/EVALIN 函数：

```
assignin('base','M',handles.M); 
```

和

```
handles.M = evalin('base','M'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:46:12.797

保存数据：

```
setappdata(h,'name',value) 
```

加载数据：

```
value = getappdata(h,'name')
values = getappdata(h) 
```

其中 h 是您存储数据的句柄，name 是数据的变量，value 是实际数据。***

# c# - 微工具在应用架构中的位置

> ID：11700846
> 
> 赞同：2
> 
> 时间：2012-07-28T12:03:09.543
> 
> 标签：c#, data-access-layer, business-logic-layer, ormlite-servicestack, micro-orm

像这样的简单语句：“Select x,y,z From Customer”位于数据访问层中。

如果查询中有逻辑，比如过滤来自某个城市的客户，我将不得不将过滤放在我的业务层中，并在内存中的客户集合上进行。

当我现在考虑 Micro ORM 工具时，它们经常显示带有如下逻辑的 Sql 语句：

```
var a = db.SingleOrDefault<Product>("SELECT * FROM SalesLT.Product WHERE ProductID = @0, 123); 
```

我现在应该把这行代码放在哪里？在业务层还是数据访问层？

语句内部有逻辑，应该属于业务层。但后来我有

在我的 BLL 中选择语句？？

这一切都令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T16:37:15.567

在我看来，这是个人喜好。我喜欢接近使用它们的方法的 SQL，除非需要在不同的 BLL 类之间共享它们。它使更改更容易。对于简单的操作，您可以使用[Dapper.Simple Crud](https://github.com/ericdc1/Dapper.SimpleCRUD/)之类的扩展方法，这样您就不必一遍又一遍地编写相同的操作。你可以看看我的[github repo](https://github.com/YogirajA/MicroStackOverflow)来实现。我把它放在一起[讨论](http://www.ctdotnet.org/code-camp-6/)Micro-ORM。该解决方案具有 Massive、Dapper、PetaPoco 和 Simple.Data 的示例用法。这是其中一个服务类的[链接](https://github.com/YogirajA/MicroStackOverflow/blob/master/MicroStackOverflow.Services/Petapoco/PetaPocoPostsServices.cs)，因此您不必深入研究。如果您有任何建议，请告诉我，或者更好地向我发送拉取请求。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:05:09.930

如果您想要一个 3 层模型，则需要在数据访问层上使用 db 上下文或 micro orm。

# xquery - XQuery 更新工具

> ID：11700849
> 
> 赞同：0
> 
> 时间：2012-07-28T12:03:33.297
> 
> 标签：xquery, xquery-update

我有一个关于 XQuery 更新的快速问题，Dose XQJ 是否支持实现`XQuery update facility`将元素插入 XML 文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:18:54.267

这取决于您正在使用的 XQuery 处理器和 XQJ 实现。例如，[BaseX](http://basex.org)和 Charles Foster 的XQJ[实现](http://xqj.net/basex/)是一种实际上支持 XQuery 更新工具的组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T14:24:10.030

Zorba 还支持 XQJ 和 XQuery 更新。[您可以在http://www.zorba-xquery.com/html/entry/2012/07/27/XQJ_From_Zorba](http://www.zorba-xquery.com/html/entry/2012/07/27/XQJ_From_Zorba)找到更多信息

# c++ - 如何在函数中初始化 MPI？

> ID：11700850
> 
> 赞同：8
> 
> 时间：2012-07-28T12:03:36.073
> 
> 标签：c++, c, parallel-processing, mpi

我想在一个函数中使用多进程，我该怎么做。

如您所知，MPI_Init 需要两个参数：“int argc, char **argv”。这是否意味着我必须在函数定义中添加这两个参数？

我的要求是我想并行化函数中的一个步骤而不是主程序中的步骤。

例如，

```
func(mat &A, vec &x) {
  some computation on A;
  auto B = sub_mat(A, 0, 10);
  B*x; // I want to parallelize this computation
}
main(){
  mat A;
  vec x;
  func(A, x);
} 
```

我只想在B*x中使用MPI，但是不知道如何初始化MPI？顺便说一句，如果我可以初始化MPI int func，那么此时每个进程中是否都存在A？

帮助我，谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T14:27:08.860

由于 MPI-2 取消了 MPI-1 中的限制，即编译实现*可能*要求参数与`argc`以下参数相同，因此您无需四处走动：`argv`*`MPI_Init``main`*

 *> 在 MPI-2 实现中不允许强加此要求。需要符合 MPI 的实现以允许应用程序`NULL`同时传递.`argc``argv``main`

但是您仍然必须测试 MPI 是否已经初始化，因为`MPI_Init()`(or `MPI_Init_thread()`) 应该被调用不超过一次。这是使用 完成的`MPI_Initialized()`，因此您的代码应如下所示：

```
int initialized, finalized;

MPI_Initialized(&initialized);
if (!initialized)
   MPI_Init(NULL, NULL);

// Perform work in parallel
...

// You also need this when your program is about to exit
MPI_Finalized(&finalized);
if (!finalized)
   MPI_Finalize(); 
```

请注意，在应用程序的整个生命周期内，MPI 只能被初始化然后最终完成一次。如果要多次调用该函数，则围绕一个函数代码块`MPI_Init() ... MPI_Finalize()`将不起作用，即 MPI 的运行方式与具有并行区域的 OpenMP 的运行方式不同。

> 顺便说一句，如果我可以初始化MPI int func，那么此时每个进程中是否都存在A？

一个正在运行的 MPI 程序由多个*进程*组成，这些进程具有自己的私有地址空间。通常这些是同一程序代码的多个副本（所谓的单程序多数据或 SPMD 范例），但也可以是多个程序的多个副本，编写为一起工作（也称为多程序多数据或 MPMD）。SPMD 是更简单和更常见的情况，其中所有进程执行完全相同的代码，直到它们的 MPI 等级用于将执行分支到多个方向。所以是的，`A`存在于每个进程中，如果前面的计算中不涉及（伪）随机数/事件，那么`A`在初始化 MPI 库之前，每个 MPI 进程中都将具有相同的值。注意`MPI_Init()`与任何其他库调用一样，它只是一个常规库调用。它不会改变用户内存的内容——它只会让大量正在运行的 MPI 进程相互了解，并使它们能够相互通信，从而使它们能够共同工作以解决特定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:26:56.080

如果你想`MPI_Init`在子函数中使用，你必须传递`int argc, char **argv`给函数，以便传递它。

但是，即使您只想并行化子功能的一部分，您也可以（并且应该为更透明的代码）`MPI_Init`在程序的早期使用。例如，在其他初始化内容完成之后，或者如果你想在你的并行函数附近使用它，就在你调用函数之前。

原则上，函数不必知道`argc`and `argv`，不是吗？*

# objective-c - xCode：setView 总是纵向虽然设备在横向

> ID：11700855
> 
> 赞同：0
> 
> 时间：2012-07-28T12:04:20.427
> 
> 标签：objective-c, xcode, ipad, uiinterfaceorientation, autorotate

我在使用 xCode 开发 iPad 应用程序时遇到了问题。

当我像这样将视图加载到我的 rootViewController 中时

```
[self setView:viewController.view]; 
```

即使设备旋转为横向，视图也始终以纵向显示。

我检查了所有选项并尝试更改 shouldAutoRotateToOrientation 方法，它似乎与它无关。如果我将设备旋转到纵向，然后再转回横向，它就可以工作。

有谁知道为什么会这样？

此致，

马泰奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:25:38.200

问题是我嵌套了 viewControllers，这会导致不良行为，比如旋转通知没有发送到某些 ViewControllers。

# php - 在 PHP 中复制和重命名文件夹

> ID：11700859
> 
> 赞同：0
> 
> 时间：2012-07-28T12:04:58.307
> 
> 标签：php, exec, directory

嗨，我需要在用户注册中复制一个文件夹，并将跟踪文件夹中的新用户名，我在服务器上找到此代码但不起作用

```
 //Bulder Blog Folder
    $Default='blog\Default';
    $New='blog\\';
    $Blog=$New.$BlogName;
    exec("xcopy $Default $Blog /e/i", $a, $a1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T20:40:21.987

我找到了答案

```
//Windows Server
$Default='User\Default';
$New='User\'.$_POST['UserAddress'];
exec("xcopy $Default $New /e/i");

//Linux Server
$Default='User/Default';
$New='User/'.$_POST['UserAddress'];
exec("cp -r $Default $New"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:19:03.777

有关信息，请参阅[php.net](http://www.php.net/manual/en/function.copy.php#104020)。

由于没有内置复制完整文件夹 - 您应该编写自己的函数来执行此操作：

1.  创建新目录来存储文件的副本 [function:mkdir]
2.  列出文件夹 [function:glob] 的内容
3.  Foreach 这个列表并使用 [function:copy] 复制每个文件

如果你懒得自己写这个 - 去这里[rcopy](http://www.php.net/manual/en/function.copy.php#104020)。

# jquery - 新闻收录器在 wordpress 页面上不起作用

> ID：11700864
> 
> 赞同：0
> 
> 时间：2012-07-28T12:05:26.077
> 
> 标签：jquery, wordpress-theming, wordpress, news-ticker

Jquery 代码在我的网站[主页上](http://www.news.shreshthbharat.in/)完美运行，但在页面上不工作。我不知道为什么。

在此代码不显示帖子的页面上，它仅显示页面列表。

这是标题上的 TICKER 代码

```
 <div class="fl" id="hotnews">
 <ul id="shreshth_news" class="shr_news">
 <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
 <li><span class="heading"><a href="<?php the_permalink(); ?>"><?php the_title(); ?> </a>  </span><span class="info"></span></li>
 <?php endwhile; ?>
 </ul></div> 
```

这个代码在 single.php index.php 等上运行顺利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:28:57.800

添加这个而不是上面的代码

```
<div class="fl" id="hotnews">
<ul id="js-news" class="js-hidden">
<?php $the_query = new WP_Query('showposts=5&orderby=post_date&order=desc');
            while ($the_query->have_posts()) : $the_query->the_post(); ?> 
<li><span class="heading"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>    </span><span class="info"></span></li>
<?php endwhile; ?>
            <?php wp_reset_query(); ?>
</ul></div> 
```

# php - 令牌验证重置表单后未处理

> ID：11700865
> 
> 赞同：0
> 
> 时间：2012-07-28T12:05:25.823
> 
> 标签：php

用户忘记了我网站上的密码。他们输入用户名，然后发送一封电子邮件，其中包含一个链接，该链接带有一个附加到重置页面的 url 的令牌。单击链接时，将验证令牌的存在和到期。如果良好，将显示重置密码表单，否则会显示错误消息并重试。到这里一切都好。当用户输入新密码并点击提交时，url 的附加部分消失，只有常规页面 url 在地址栏中。重置密码表格只是空白。由于我使用 $_GET 来检索令牌并使用 $_POST 来处理表单，这可能是我的问题吗？我在此处包含页面代码：

```
<?php
require_once ('functions.inc.php');
include("header.php");
require_once ('config.inc.php');
?>
<body> 
<div data-role="page" id="resetpassword">
    <div data-role="header">
        <h1>Reset Password</h1>
    </div>
    <div data-role="content">
<?php
$page_title = 'ResetPassword';
if ($_SERVER['REQUEST_METHOD'] == 'GET') { 
$tk = ($_GET['token']);
$q1 = "SELECT uname, request_time FROM users WHERE token = '$tk'";
    $r1 = mysqli_query($dbconn,$q1)or die("Error: ".mysqli_error($dbconn));
    $row = mysqli_fetch_array($r1); 
    $user = $row['uname'];
    $then = $row['request_time'];
    //echo $then;
    $now = time();
    //echo $now;
    $expired = ($now - $then);
    //echo $expired;
    $num_rows = mysqli_num_rows($r1);       
    if ($num_rows !== 1 || $expired > 900){
    echo "An error has prevented a password change.<br />Most likely the link has       expired.<br />Please try again.";   
    ?>
    </div>
    <div data-role="footer" class="ui-bar">
    <a href="../index.php" data-role="button">Try Again</a> 
    </div><!-- /footer -->
    </div>
    <?php
    exit();
}           
        if ($_SERVER['REQUEST_METHOD'] == 'POST') {         
        $trimmed = array_map('trim', $_POST);
        if (preg_match ('/^[[:alnum:]]{8,20}$/', ($trimmed['password']))) {
            $p = mysqli_real_escape_string($dbconn, ($trimmed['password']));
            // hash the password
            require ("passhash.php");
            $pass_hash = PassHash::hash($p);
            } else {
            echo '<p>Please enter a valid password!</p>';
            }
            if ($pass_hash) {
            $q2 = "UPDATE `users` SET upass='$pass_hash' WHERE uname='$user'";
            $r2 = mysqli_query($dbconn, $q2)or die("Error: ".mysqli_error($dbconn));
            if ($r2 == TRUE) {
            echo "<p>Password Changed!</p>";
            }
            }               
?>
</div><!-- /content -->
    <div data-role="footer" class="ui-bar">
<a href="../index.php" data-role="button">Login</a> 
    </div><!-- /footer -->
</div><!-- /page -->
<?php
}
}
?>
<form id="passwordreset" method="post" action="<?php echo $_SERVER['PHP_SELF'];?>?token=<?php echo $tk;?>" data-ajax="false"> 
<p>Choose a new password.<br />
Letters and numbers only.<br />
Minimum of 8 Maximum of 20 characters.</p>
<label for="password" class="ui-hidden-accessible">New Password:</label> 
<input type="password" name="password" id="password" value="" placeholder="New Password"/>
<button type="submit" name="submit" value="submit"/>Submit</button>  
</form>
</div><!-- /content -->
    <div data-role="footer" class="ui-bar">
    </div><!-- /footer -->
</div><!-- /page -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:11:20.567

使用 POST 和 GET 不会导致任何问题，因为它在此处声明： [想要同时使用 GET 和 POST 方法](https://stackoverflow.com/questions/2036858/want-to-use-both-get-and-post-methods)

但是当表单发布数据时，POST url 还需要包含 GET 参数（令牌）。因此，修改帖子网址以发送您需要的全部数据。

# php - 为什么 PHP 日期迭代数周会出错？

> ID：11700866
> 
> 赞同：2
> 
> 时间：2012-07-28T12:05:26.527
> 
> 标签：php, date, dst

我正在编写一个 php 脚本，该脚本在每周的星期一进行迭代。

然而，脚本在 10 月 22 日之后似乎变得不同步。

```
<?php

$october_8th = strtotime("2012-10-08");

$one_week = 7 * 24 * 60 * 60;

$october_15th = $october_8th + $one_week;
$october_22nd = $october_15th + $one_week;
$october_29th = $october_22nd + $one_week;
$november_5th = $october_29th + $one_week;

echo date("Y-m-d -> l", $october_8th) . '<br />';
echo date("Y-m-d -> l", $october_15th) . '<br />';
echo date("Y-m-d -> l", $october_22nd) . '<br />';
echo date("Y-m-d -> l", $october_29th) . '<br />';
echo date("Y-m-d -> l", $november_5th) . '<br />'; 
```

这将输出：

```
2012-10-08 -> Monday
2012-10-15 -> Monday
2012-10-22 -> Monday
2012-10-28 -> Sunday
2012-11-04 -> Sunday 
```

我希望它会说是 10 月 29 日，但它被困在 28 日。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T13:04:45.640

首选是使用 PHP 的日期相关类来获取日期。

这些类重要地为您处理夏令时边界，其方式是手动将给定的秒数添加到 Unix 时间戳（`strtotime()`您使用的数字）不能。

以下示例采用您的开始日期并循环四次，每次都在日期上增加一周。

```
$start_date  = new DateTime('2012-10-08');
$interval    = new DateInterval('P1W');
$recurrences = 4;

foreach (new DatePeriod($start_date, $interval, $recurrences) as $date) {
    echo $date->format('Y-m-d -> l') . '<br/>';
} 
```

PHP手册链接：

*   [`DatePeriod`班级_](http://php.net/dateperiod)
*   [`DateInterval`班级_](http://php.net/dateinterval)
*   [`DateTime`班级_](http://php.net/datetime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:05:26.527

在写这个问题时，我发现夏令时在 10 月 28 日结束。

因为初始化时的日期不包含特定时间，所以会自动分配午夜。然而，当夏季结束时，这会产生一个问题。突然间，时间不再是午夜，而是在那之前一小时，因此比您预期的要早一天。

一个简单的解决方法是将时间初始化为中午而不是午夜：

```
$october_8th = strtotime("2012-10-08 12:00"); 
```

也许可能有更优雅的解决方案（欢迎您留下一个），但这将用于此目的。

# php - 带分页的 MySQL PHP 搜索

> ID：11700868
> 
> 赞同：0
> 
> 时间：2012-07-28T12:05:32.857
> 
> 标签：php, mysql

我正在尝试搜索我目前正在从事的项目。我面临的问题是当我转到第二页时，搜索结果将是错误的。

这是我的 header.php 中的搜索表单

```
<form name="search" id="search" method="post" action="search.php">
<input type="text" tabindex="1" class="input" id="term" name="term" value=""/>
<input type="submit" tabindex="2" id="submit" value="SEARCH" /> 
```

这是我的搜索页面 php 代码

```
<?php include ('header.php'); 

$term = $_POST['term'];

    $queryn = mysql_query("select * from scripts where title like '%$term%' or discription like '%$term%' and approved='1'") or die (mysql_error());
    $search_num_rows = mysql_num_rows($queryn);
    ?>  
    <div class="cat_script_container">
    <div class="nresults">Found <?php echo $search_num_rows;?> results for "<?php echo $term;?>"</div>
    <?php   
    // How many adjacent pages should be shown on each side?
    $adjacents = 3;

    /* 
       First get total number of rows in data table. 
       If you have a WHERE clause in your query, make sure you mirror it here.
    */
    //$query = "SELECT COUNT(*) as num FROM $tbl_name";
    $query = "select COUNT(*) as num from scripts where title like '%$term%' or discription like '%$term%' and approved='1' order by script_id  desc";
    $total_pages = mysql_fetch_array(mysql_query($query));
    $total_pages = $total_pages['num'];

    /* Setup vars for query. */
    //$targetpage = "category-$cr[cname]-$cid.html";    //your file name  (the name of this file)
    $catn = strtolower($cr['cname']);   //Turn category name in to lowercase
    $catn = preg_replace("![^a-z0-9]+!i", "-", $catn);
    $limit = 2;                                 //how many items to show per page
    $page = $_GET['page'];

    if($page) 
        $start = ($page - 1) * $limit;          //first item to display on this page
    else
        $start = 0;                             //if no page var is given, set start to 0
    /* Get data. */
    $sql = "select * from scripts where title like '%$term%' or discription like '%$term%' and approved='1' order by script_id  desc LIMIT $start, $limit";

    $result = mysql_query($sql);

    /* Setup page vars for display. */
    if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
    $prev = $page - 1;                          //previous page is page - 1
    $next = $page + 1;                          //next page is page + 1
    $lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
    $lpm1 = $lastpage - 1;                      //last page minus 1

    /* 
        Now we apply our rules and draw the pagination object. 
        We're actually saving the code to a variable in case we want to draw it more than once.
    */
    $pagination = "";
    if($lastpage > 1)
    {   
        $pagination .= "<div class=\"pagination\">";
        //previous button
        if ($page > 1) 
            $pagination.= "<a href=\"search-$prev.html\">« previous</a>";
        else
            $pagination.= "<span class=\"disabled\">« previous</span>"; 

        //pages 
        if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
        {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"search-$counter.html\">$counter</a>";                  
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
        {
            //close to beginning; only hide later pages
            if($page < 1 + ($adjacents * 2))        
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"search-$counter.html\">$counter</a>";                  
                }
                $pagination.= "...";
                $pagination.= "<a href=\"search-$lpm1.html\">$lpm1</a>";
                $pagination.= "<a href=\"search-$lastpage.html\">$lastpage</a>";        
            }
            //in middle; hide some front and some back
            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {
                $pagination.= "<a href=\"search-1.html\">1</a>";
                $pagination.= "<a href=\"search-2.html\">2</a>";
                $pagination.= "...";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"search-$counter.html\">$counter</a>";                  
                }
                $pagination.= "...";
                $pagination.= "<a href=\"search-$lpm1.html\">$lpm1</a>";
                $pagination.= "<a href=\"search-$lastpage.html\">$lastpage</a>";        
            }
            //close to end; only hide early pages
            else
            {
                $pagination.= "<a href=\"search-1.html\">1</a>";
                $pagination.= "<a href=\"search-2.html\">2</a>";
                $pagination.= "...";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"search-$counter.html\">$counter</a>";                  
                }
            }
        }

        //next button
        if ($page < $counter - 1) 
            $pagination.= "<a href=\"search-$next.html\">next »</a>";
        else
            $pagination.= "<span class=\"disabled\">next »</span>";
        $pagination.= "</div>\n";       
    }

    $q=mysql_query("select * from scripts where title like '%$term%' or discription like '%$term%' and approved='1' order by script_id  desc limit $start,$limit");
    $numr=mysql_num_rows($q);
    if ($numr==0)
    {
    echo '<div class="msg_info_box">No results were found. Please try a different search.</div>';
    }
    while($script=mysql_fetch_assoc($q)){
    $str = $script['discription'];
    $wcount = strlen($str);
    if ($wcount > 295){
    $dis = substr($str, 0, 295).'...';
    }else{
    $dis = $str;

}
    $sname = $script['title'];
    $sname = preg_replace("![^a-z0-9]+!i", "-", $sname);
    $sname = strtolower($sname);
    $lid = $script['licens_id'];

$license= mysql_query("SELECT * FROM licens WHERE id='$lid' LIMIT 1") or die (mysql_error());
$lrow = mysql_fetch_array($license);

?>
<div class="new_scripts">
<div class="n_title"><a href="script-<?php echo $script['script_id'];?>-<?php echo $sname;?>.html"><?php echo $script['title'];?></a></div>
<div class="n_dis"><?php echo $dis;?></div>
<div class="n_menu">
<!--#--> 
<div class="ii_info"><span class="is_lable"><a class="s_link" href="<?php echo $script['script_url'];?>" target="_blank">Visit Publisher Site</a></span> | </div>
<div class="ii_info"><span class="is_lable"><a class="s_link" href="<?php echo $script['script_demo'];?>" target="_blank">View Demo</a></span></div>
<div class="i_info"><span class="is_lable">License Type:</span><span class="license"> <?php echo $lrow['lname'];?></span></div>
<!--#-->
</div>
</div> 
<?php } ?>

<div class="pagediv"><?php echo $pagination;?></div>
</div> 
```

我想知道是否有任何方法可以提供像 action="search.php?term=keyword 这样的搜索表单操作。我想如果我可以像这样发布 url，我可以使用 $_GET 来获取 keyworkd。如果有人可以帮助我无论如何，我真的很喜欢。在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T12:08:46.607

`action`将您的属性更改为`get`

```
<form name="search" id="search" method="get" action="search.php"> 
```

这样，您的表单值将`search.php`在提交时附加到。

例如：

```
search.php?term=the_term 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:20:25.820

而不是内联分页代码，你有一个类，然后可以通过调用它的函数来使用它。这样您就可以避免重新编码，这是一种更好的编程方式。

你不需要对类做任何事情，只需要检查调用。

**致电**：

```
 $paging = new Pager;
    $pagesize=$_GET['pagesize']; 
    $sql="select * from tbl where 1 order by tbl_id desc ";
    $limit=$paging->pageSize($pagesize);
    $start = $paging->findStart($limit);
    $ExecQuery=mysql_query($sql) or die(mysql_error());
    $count=mysql_num_rows($ExecQuery);
    $pages =$paging->findPages($count, $limit);
    $pagelist = $paging->pageList($_GET['page'], $pages,$pagesize , "srchfield=234&srcfield2=455");
    $showingR=$paging->showingRecords($start,$limit,$count);

    $orderBy=$_REQUEST['order_by'];
    $orderBy2=$_REQUEST['order_by2'];
    $Exec=mysql_query("$sql $orders LIMIT  $start , $limit") or die(mysql_error());
    $countrecord=mysql_num_rows($Exec); 
```

**寻呼机类**

```
class Pager {

        function pageSize($size) 
        {
            if(!empty($size)) 
            {
                return $size;
            }else{
                return 10;
            }   
        }

        function findStart($limit) {
            if ((!isset($_GET['page'])) || ($_GET['page'] == "1"))  {

                $start = 0;
                $_GET['page'] = 1;
            }
            else {
                $start = ($_GET['page']-1) * $limit;
            }
            return $start;
        }
        function findPages($count, $limit) {

                $pages = (($count % $limit) == 0) ? $count / $limit : floor($count / $limit) + 1;

                return $pages;
        }
        function pageList($curpage, $pages,$pagesize,$queryString=false) 
        {
            $page_list = "";
            if (($curpage-1) > 0) 
            {
                if($pages<=5)
                {
                    $page_list .= "<a href=\"".$_SERVER['PHP_SELF']."?page=".($curpage-1)."&".$queryString."&pagesize=".$pagesize."\" title=\"Previous Page\">Previous</a>                       &nbsp;&nbsp;";
                }
                else
                {
                    $page_list .= "<a href=\"".$_SERVER['PHP_SELF']."?page=".'1'."&".$queryString."&pagesize=".$pagesize."\" title=\"First Page\">First</a>&nbsp;&nbsp;&nbsp;&nbsp;                       <a href=\"".$_SERVER['PHP_SELF']."?page=".($curpage-1)."&".$queryString."&pagesize=".$pagesize."\" title=\"Previous Page\">Previous</a>                       &nbsp;&nbsp;";
                }
            }
            $limit=$pages-4;
            $startpage=$curpage;
            if($pages<=5)
                {
                    $startpage=1;
                    $lastpage=$pages;
                }
            elseif($startpage>$limit)
                    {
                        $startpage=$limit;
                        $lastpage=$pages;
                    }
                    else
                    {
                        $lastpage=$startpage+4;
                    }
        for ($i=$startpage; $i<=$pages and $i<=$lastpage; $i++) 
        {
            if ($i == $curpage) 
            {
             $page_list .= "<b>".$i."</b>";
            }
            else 
            {
             $page_list .= "<a href=\"".$_SERVER['PHP_SELF']."?page=".$i."&".$queryString."&pagesize=".$pagesize."\" title=\"Page ".$i."\">".$i."</a>";
            }
            $page_list .= " ";
        }

        /* Print the Next and Last page links if necessary */
            if (($curpage+1) <= $pages)
            {
               if(($curpage+1) <= $limit)
               {  
                    $page_list .= "&nbsp;&nbsp;<a href=\"".$_SERVER['PHP_SELF']."?page=".($curpage+1)."&".$queryString."&pagesize=".$pagesize."\" title=\"Next Page\">Next</a>
                    &nbsp;&nbsp;&nbsp;&nbsp;<a href=\"".$_SERVER['PHP_SELF']."?page=".$pages."&".$queryString."&pagesize=".$pagesize."\" title=\"Last Page\">Last</a> ";
               }
               else
               {
                    $page_list .= "&nbsp;<a href=\"".$_SERVER['PHP_SELF']."?page=".($curpage+1)."&".$queryString."&pagesize=".$pagesize."\" title=\"Next Page\">Next</a>";
               }
            }

            $page_list .= "</td>\n";

            return $page_list;
        }
        function nextPrev($curpage, $pages,$pagesize) {

            $next_prev = "";

            if (($curpage-1) <= 0) {

                $next_prev .= "Previous";
        }else {

            $next_prev .= "<a href=\"".$_SERVER['PHP_SELF']."?page=".($curpage-1)."&pagesize=".$pagesize."\">Previous</a>";
        }

            $next_prev .= " | ";

        if (($curpage+1) > $pages) {

            $next_prev .= "Next";

        }else {

            $next_prev .= "<a href=\"".$_SERVER['PHP_SELF']."?page=".($curpage+1)."&pagesize=".$pagesize."\">Next</a>";
        }

            return $next_prev;
        }

        function showingRecords($start,$limit,$count) {

            $toEnd=$start+$limit;

            if($toEnd>$count) {

                $endPoint=$count;

            }else {

                $endPoint=$toEnd;
            }

            return ($start+1)." to ".$endPoint." of ".$count;
        }

        }
         ?> 
```

# java - 泛型语法 map.entry

> ID：11700871
> 
> 赞同：3
> 
> 时间：2012-07-28T12:05:56.953
> 
> 标签：java, generics, syntax

我有一个变量：

```
Class<Map.Entry<String, Boolean>> clazz; 
```

我想为它分配一个类而不实例化任何东西。但编译器不允许我写：

```
Class<Map.Entry<String, Boolean>> clazz = Map.Entry<String, Boolean>.class; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:21:13.623

```
Class<Map.Entry<String, Boolean>> clazz =
    (Class<Map.Entry<String, Boolean>>)(Class<?>)Map.Entry.class; 
```

啊，类型擦除的乐趣。

Java 编译器区分类型`Map.Entry`（原始）和`Map.Entry<String, Boolean>`（参数化）。不幸的是，您不能使用`.class`. 所以你必须投。但是你不能直接这样做；您将不得不“绕道” `Class<?>`。我不记得为什么，确切地说，我很抱歉:)。

此外，您将收到一个“未经检查”的警告，您可以将其取消，因为您知道（在这种情况下）演员将始终成功。所以：

```
@SuppressWarnings("unchecked")
Class<Map.Entry<String, Boolean>> clazz =
    (Class<Map.Entry<String, Boolean>>)(Class<?>)Map.Entry.class; 
```

（不需要在这个赋值发生的方法上加上警告；你可以直接把它放在赋值前面。）

享受！:)

# javascript - 是否可以在将文件发送到服务器之前使用 javascript 将文件上传到内存中进行处理？

> ID：11700872
> 
> 赞同：4
> 
> 时间：2012-07-28T12:06:05.680
> 
> 标签：javascript, html, local-storage

假设我想使用一些 js 加密库（不是 java）来加密文件。是否可以在将文件发送到服务器之前在客户端执行此操作，然后通过 javascript 在客户端的某些内存中上传文件？

例如，我可以至少为最新的浏览器使用本地存储吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T12:09:52.447

您可以使用[文件 API](https://developer.mozilla.org/en/DOM/File)

这里有一些例子：[https](https://developer.mozilla.org/en/Using_files_from_web_applications) ://developer.mozilla.org/en/Using_files_from_web_applications ）

当然，正如您想象的那样，您需要最新的浏览器。

# c++ - 每次我需要时将整个文件从磁盘复制到内存以处理或读取文件中的数据，直到文件全部读取

> ID：11700874
> 
> 赞同：1
> 
> 时间：2012-07-28T12:06:11.560
> 
> 标签：c++, c, memory-efficient

我正在做一些非常关心效率的事情。文件数以千计，每个文件最大300M。每个文件至少包含 50 万个项目。我的工作是尽可能快地处理每个项目。物理内存大小不是问题。所以。我会从将整个文件复制到内存中并从内存中获取每个项目而不是从磁盘中获取每个项目中受益吗？还有其他方法可以节省 IO 过程的时间吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T12:13:02.003

您可以使用[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)、[madvise(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/madvise.2.html)、[posix_fadvise(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/posix_fadvise.2.html)和[readahead(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/readahead.2.html)系统调用（请注意，这`readahead`是 Linux 特定的且阻塞的，您可能需要提前调用它，或者在单独的线程中调用它）。

您可能不太在意：只需提前读取每个 200Mb 文件，在处理之前几秒钟，可能就足够了。内核文件系统和磁盘缓存做了很多工作；有很多 RAM 数据已经在内存中。

而且你没有告诉我们你的程序是否是一个单一的长期进程，或者你是否通过一些重复的脚本来驱动它，在每个大文件上调用相同的程序。

系统配置和硬件确实很重要。`mke2fs`您可以（有时）用大块（例如 16Kb 或 64Kb）配置文件系统。如果你买得起，SSD磁盘会带来很​​多。

您还可以设计您的应用程序以仔细使用一些巧妙设置的数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T12:15:24.407

对于初学者：

```
std::vector<char> input;
std::ifstream file("filename.txt")'
// maybe find file size and do a reserve on input
std::copy(std::istream_iterator<char>(file), std::istream_iterator<char>()
          std::back_inserter(input)); 
```

如果这实际上对您来说不够快，内存映射文件通常会减少很多 IO 开销。

[Boost.Iostream](http://www.boost.org/doc/libs/1_50_0/libs/iostreams/doc/classes/mapped_file.html)库提供具有现代界面的可移植内存映射文件，而且速度非常快。

无论如何：首先尝试简单的解决方案，构建您的程序以将文件 IO 过程与解析器和实际处理分开，然后优化实际上昂贵的部分。这样的程序结构也将允许轻松实现生产者/消费者并行性。

一个重要的部分也是你`items`是什么。它们可以直接映射到 a`struct`还是必须进行处理。如果是这样，实际解析有多复杂？

# android - Android - 当我在手机上使用 my_app 背景时看不到它

> ID：11700879
> 
> 赞同：0
> 
> 时间：2012-07-28T12:06:41.243
> 
> 标签：android, android-layout, android-emulator, background

这是我的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/my_background"
android:paddingBottom="16dp"
android:paddingLeft="16dp"
android:paddingRight="16dp"
android:paddingTop="16dp" > 
```

我不知道为什么，但是当我在 avd 上测试 my_app 时，我完美地看到了它，但是当我使用我的手机（galaxy nexus）时，一切正常，但我在活动中看不到我的自定义背景！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:29:56.180

可绘制文件夹也有不同的茎。确保它位于 res/drawable 文件夹中，而不是像 drawable-xhdpi 这样的某个文件夹中，因为您的手机可能与该文件夹不同，尽管您的模拟器可能是。这意味着当您将其加载到手机上时，它会在错误的目录中查找，因为您的手机不是 xhdpi 或其他任何东西，因此找不到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-18T17:57:42.527

我遇到了同样的问题，当我运行应用程序时，背景图像显示在 eclipse 的编辑器中，但没有显示在我的设备上。

我做了以下并解决了问题：

1.  使用图像编辑器（paint 或 photoshop）打开背景图像。

2.  保存图像。

3.  用最近保存的图像覆盖可绘制文件夹中的背景图像。
4.  运行应用程序。

# php - 自动城市查找器

> ID：11700888
> 
> 赞同：0
> 
> 时间：2012-07-28T12:08:26.480
> 
> 标签：php, javascript, location

如何将城市的会员表格（输入）打印到访客中？

> ```
>  Member Register Form
>  Name: Emre
>  Email:---
>  Pass:---
>  City: Istanbul  // Automatic location detection 
> ```

自动检测用户的位置（城市），怎么做？

*对不起英语不好*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:19:13.967

某些浏览器可能会发送有关[用户当前位置 (GPS) 的](https://stackoverflow.com/questions/2577305/how-to-get-gps-location-from-the-web-browser)信息。然后询问用户是否要共享此信息。

根据另一个表（[地理信息系统](http://en.wikipedia.org/wiki/Geographic_information_system)），您可以找出该位置附近的城镇（最小距离）。我想最艰巨的任务是为您所在的地区找到这样的 GIS。

另一种可能性是获得大约。通过IP地址定位，但是这个很不详细。我通常用这种方法被分配到离我真实的地方大约 100 公里的位置。

# java - 此反射 Java 代码如何捕获 System.out.println 中的字符串？

> ID：11700891
> 
> 赞同：12
> 
> 时间：2012-07-28T12:08:42.193
> 
> 标签：java, reflection

你能向我解释一下执行这段代码会发生什么吗？我知道它会打印出“G'Day Mate。”，但是反射如何捕获 System.out.println？**在堆栈/堆级别会发生什么？**非常感谢。

```
 public static void main(String... args) {
          System.out.println("Hello World");
    }

    static {
        try {
           Field value = String.class.getDeclaredField("value");
           value.setAccessible(true);
           value.set("Hello World", value.get("G'Day Mate."));
        } catch (Exception e) {
          throw new AssertionError(e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T12:28:08.780

反射不会“捕捉” System.out。当然，您已经选择了最难的示例 - String，这是因为 java String 类是一个非常“有趣”的类，其中每个 String 都不是对象，而是在字符串池中产生并且本身是不可变的。

您的代码所做的是在 java String 类中它静态地（这意味着在执行时间之前）将字符串“Hello World”的值设置为“G`Day Mate。”。这意味着每当您使用字符串“Hello World”时，它都会更改为“G`Day Mate.”。例子：

```
String h ="Hello World";
System.out.println(h);
>>>G`Day Mate. 
```

希望这个例子能有所帮助。有趣的评论，代码：

```
public static void main(String[] args){
        String h = "Hello";
        System.out.println(h);
        System.out.println("Hello");
    }
     static {
            try {
               Field value = String.class.getDeclaredField("value");
               value.setAccessible(true);
               value.set("Hello", value.get("G'Day Mate."));
            } catch (Exception e) {
              throw new AssertionError(e);
            }
        } 
```

产生输出：

```
>>>G`Day
>>>G`Day 
```

这意味着在映射中空白会产生一些差异，但我不知道这如何影响 String 对象和反射的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:29:44.417

很好的问题......我能理解的是

```
value.set("Hello World", value.get("G'Day Mate.")); 
```

替换字符串内存池中的值并保持引用相同。意味着在这个程序`Hello World`中提到的任何地方都会打印`G'Day Mate.`。

这类似于在**C 语言中使用指针修改变量内容的情况**。

```
static{
try {
    Field value = String.class.getDeclaredField("value");
    value.setAccessible(true);
    value.set("Hello World", value.get("G'Day Mate."));
 } catch (Exception e) {
   throw new AssertionError(e);
 }
}
public static void main(String[] args){
    System.out.println("Hello World");
    System.out.println("Hell World");
    System.out.println("Hello orld");
    System.out.println("Hello World");
    String s = "Hello World";
    System.out.println(s);
} 
```

印刷

```
G'Day Mate.
Hell World 
Hello orld
G'Day Mate.
G'Day Mate. 
```

所以在`String Pool`String 已被修改但 key 仍然存在`Hello World`。

有趣的是，如果在声明中

```
value.set("Hello World", value.get("G'Day Mate.")); 
```

后面的 String 的长度更小......`ArrayIndexOutOfBoundException`每当`Hello World`访问 String 时它都会抛出。

希望这可以帮助！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T12:31:12.040

[java.lang.reflect.Field.set(object, value) 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Field.html#set%28java.lang.Object,%20java.lang.Object%29)

将指定对象参数上的此 Field 对象表示的字段设置为指定的新值。如果基础字段具有原始类型，则新值会自动展开。

操作如下：

如果底层字段是静态的，则忽略 obj 参数；它可能为空。

否则，基础字段是实例字段。如果指定的对象参数为 null，则该方法将引发 NullPointerException。如果指定的对象参数不是声明基础字段的类或接口的实例，则该方法将引发 IllegalArgumentException。

如果此 Field 对象正在强制执行 Java 语言访问控制，并且基础字段不可访问，则该方法将引发 IllegalAccessException。

如果基础字段是最终字段，则该方法将引发 IllegalAccessException，除非此 Field 对象的 setAccessible(true) 已成功并且该字段是非静态的。以这种方式设置最终字段仅在反序列化或重建具有空白最终字段的类实例期间才有意义，然后它们才可供程序的其他部分访问。在任何其他上下文中使用可能会产生不可预知的影响，包括程序的其他部分继续使用该字段的原始值的情况。

如果基础字段是原始类型，则尝试展开转换以将新值转换为原始类型的值。如果此尝试失败，该方法将引发 IllegalArgumentException。

如果在可能的展开之后，新值无法通过标识或扩展转换转换为基础字段的类型，则该方法将引发 IllegalArgumentException。

如果基础字段是静态的，则声明该字段的类在尚未初始化的情况下被初始化。

该字段设置为可能展开和扩展的新值。

如果字段隐藏在 obj 的类型中，则按照前面的规则设置字段的值。参数： obj - 字段应该被修改的对象 value - 被修改的 obj 字段的新值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-17T21:37:24.597

这个源代码开启了一些有趣的java技术。让我们一一检查。

首先我们需要了解代码的流程。代码的哪一部分将首先执行？

静态初始化块。为什么？让我们查阅[Java 语言规范 (12.4)](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4)：

`Initialization of a class consists of executing its static initializers and the initializers for static fields (class variables) declared in the class.`

什么时候发生？再次来自[JLS (12.4.1)](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.1)：

`T is a class and a static method declared by T is invoked.`

所以我们可以得出结论，static initiazlier 会在 main 方法之前先执行。

现在，这两行正在使用反射：

```
Field value = String.class.getDeclaredField("value");
value.setAccessible(true); 
```

为简单起见，我们可以将第一行分成两行：

```
Class<String> c=String.class;
Field value=c.getDeclaredField("value"); 
```

第一行是检索[反射类对象](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredField%28java.lang.String%29)，第二行是检索`Field`表示类`value`字段的a `String`。

`value.setAccessible(true)`表示反射的类对象在使用时应该禁止 Java 语言访问检查。（[参考](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28java.lang.reflect.AccessibleObject%5B%5D,%20boolean%29)）。

有问题的下一行是

```
value.set("Hello World", value.get("G'Day Mate.")); 
```

如果我们深入[研究 .set() 文档](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Field.html#set%28java.lang.Object,%20java.lang.Object%29)，我们可以看到我们正在调用 .set() 的`set(Object aObject,Object value)`版本`set`。`value.get("G'Day Mate.")`正在返回`"G'Day Mate."`的`value`字段值实际上是一个`char[]`. 并通过它的调用将对象的值字段的值`set`替换为对象的值字段。`"Hello World"``"G'Day Mate."`

解释了`static`块的代码。

让我们深入了解主要功能。这很简单。它应该输出`Hello, world`. 但它正在输出`G'Day Mate`。为什么？因为`Hello, world`我们在初始化器中创建的 String 对象与我们在 main 函数中使用的对象`static`相同。`Hello, world`再次与[JLS 协商](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)将阐明这一点

> 此外，字符串字面量总是引用 String 类的同一个实例。这是因为字符串字面量 - 或者更一般地说，作为常量表达式值的字符串（第 15.28 节） - 是“内部的”，以便使用 String.intern 方法共享唯一实例。

这个[答案](https://stackoverflow.com/a/19210979/1426743)可以帮助您更简洁地理解事实。

因此它显示了不同的值，因为我们已经将`Hello,world`对象的值更改为`G'Day, Mate`.

但是，如果您`new String("Hello world")`在 main 函数中使用，它将直接创建一个新实例，`String`而不是检入其池中。所以`Hello world`main 函数`Hello world`与我们改变了值的静态初始化器不同。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-07-28T12:13:55.917

来自 Oracle (Java) 文档：

*一个类可以有任意数量的静态初始化块，它们可以出现在类主体的任何位置。运行时系统保证静态初始化块按照它们在源代码中出现的顺序被调用。*

这是整个[链接](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

# iphone - Core Data 简单获取和更新

> ID：11700895
> 
> 赞同：0
> 
> 时间：2012-07-28T12:09:00.303
> 
> 标签：iphone, ios, xcode

我有一个包含类别实体的核心数据文件，它有 2 个属性 - id 和 name。

有人可以为我提供一种从这两个属性中获取值并更新它们的方法。我已经尝试过并且失败了。

这是我当前的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIBarButtonItem *addButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addCategory:)];
    self.navigationItem.rightBarButtonItem = addButtonItem;

}

-(IBAction)addCategory:(id)sender
{
    UIAlertView *addCategoryAlertView = [[UIAlertView alloc] initWithTitle:@"Add Category" message:@"" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Add", nil];
    addCategoryAlertView.alertViewStyle = UIAlertViewStylePlainTextInput;
    self.textField = [addCategoryAlertView textFieldAtIndex:0];
    self.textField.placeholder = @"Enter category name";
    [addCategoryAlertView show];
} 
```

并在 UIAlertView Delegate 方法中

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

我必须为这些类别添加价值。

这是我现在的做法：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

    if (buttonIndex == kAddCategoryButtonIndex) {
        AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
        NSManagedObjectContext *context = [appDelegate managedObjectContext];
        NSError *error;

        //NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription insertNewObjectForEntityForName:@"Categories" inManagedObjectContext:context];
        //[fetchRequest setEntity:entity];
        [entity setValue:self.textField.text forKey:@"name"];
        NSLog(@"%@",[entity valueForKey:@"name"]);
        [context save:&error];
    }
} 
```

而且我认为它有效，但我无法从这两个属性中获取值。

如果有人可以帮助我，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:06:05.910

方法

```
+ (id)insertNewObjectForEntityForName:(NSString *)entityName inManagedObjectContext:(NSManagedObjectContext *)context 
```

回报`NSManagedObject`，不是`NSEntityDescription`。

所以，这样做

```
NSManagedObject *managedObject = [NSEntityDescription insertNewObjectForEntityForName:@"Categories" inManagedObjectContext:context];
[managedObject setValue:self.textField.text forKey:@"name"]; 
```

你应该很高兴。

# php - PHP 中没有字符串

> ID：11700896
> 
> 赞同：0
> 
> 时间：2012-07-28T12:09:05.000
> 
> 标签：php

我如何显示`'NOTHING'`为字符串？

我需要显示它而不是显示空字符串值作为结果。

```
else if ($colorByChance == 5)
{
    $color='NOTHING';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:10:45.780

只是先检查一下。

```
if(empty($color))
{
    $color='nothing';
} 
```

或者也许（如果它甚至没有设置）

```
if(!isset($color))
{
    $color='nothing';
} 
```

# ruby-on-rails - 正则表达式红宝石对字母数字和数字有效

> ID：11700899
> 
> 赞同：1
> 
> 时间：2012-07-28T12:09:23.610
> 
> 标签：ruby-on-rails, ruby, regex

我在 ruby​​ 中有 2 个正则表达式。第一个正则表达式用于字母和数字，例如：

```
letter_digits = /^([0-9]*[a-zA-Z][a-zA-Z0-9]*)$/ 
```

如果我只写数字`564521`不匹配，使用这个正则表达式！

但是我只有数字的这个正则表达式：

```
only_digits = /^([0-9])*$/ 
```

但是如果我写的这个正则表达式`s45xo`不匹配！

我只需要**1**个对**字母/数字**和**数字**都有效的正则表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T12:12:35.160

尝试：`letter_digits = /^[0-9a-zA-Z]*$/`

您的第一个正则表达式`/^([0-9]*[a-zA-Z][a-zA-Z0-9]*)$/`说应该有数字（0 或更多），然后是字母（1），然后是数字或字母（0 或更多）。

我的建议是阅读一些关于正则表达式的内容，例如[教程](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T13:01:59.217

最简单的正则表达式是：

```
/\A[a-z\d]*\Z/i 
```

# c# - C# - 无论我尝试什么，Base64 字节数组都会导致图像失败

> ID：11700901
> 
> 赞同：4
> 
> 时间：2012-07-28T12:09:43.877
> 
> 标签：c#, image, bitmap, system.drawing

我在 C# 中从 base64 编码的字节数组创建图像/位图对象时遇到问题。

**这是我正在处理的问题：**

* * *

我有一个前端，用户可以在其中裁剪图像。当用户通过 a 选择图像时`input[type=file]`，我的 javascript 代码使用 HTML5 的 FileReader 将`DataUrl`（base64 字符串）保存到 a `hidden field`，它与裁剪坐标和尺寸以及其中的所有其他内容一起发布`form`。

**精华：**

base64 数据，如果你想测试自己：

[http://kristianbak.com/test_image.txt](http://kristianbak.com/test_image.txt)

1.  base64 字符串发布到动作，并作为参数接收`imageData`
2.  该操作将字符串转换为 base64 字节数组，如下所示：
3.  `byte[] imageBytes = Convert.FromBase64String(imageData.EncodeTo64());`

**EncodeTo64 扩展方法：**

```
public static string EncodeTo64(this String toEncode)
{
    var toEncodeAsBytes = Encoding.ASCII.GetBytes(toEncode);
    var returnValue = Convert.ToBase64String(toEncodeAsBytes);
    return returnValue;
} 
```

将 base64 字符串转换为字节数组后，我使用 a 将字节读入内存`MemoryStream`：

```
using (var imageStream = new MemoryStream(imageBytes, false))
{
    Image image = Image.FromStream(imageStream); //ArgumentException: Parameter is not valid.
} 
```

* * *

**我还尝试了以下变体：**

**一种）**

```
using (var imageStream = new MemoryStream(imageBytes))
{
    Bitmap image = new Bitmap(imageStream); //ArgumentException: Parameter is not valid.
} 
```

**b)**

```
using (var imageStream = new MemoryStream(imageBytes))
{
    imageStream.Position = 0;
    Image image = Image.FromStream(imageStream); //ArgumentException: Parameter is not valid.
} 
```

**C）**

```
TypeConverter typeConverter = TypeDescriptor.GetConverter(typeof(Bitmap));
Bitmap image = (Bitmap)typeConverter.ConvertFrom(imageBytes); 
```

**d)**

使用这种方法：

```
private Bitmap GetBitmap(byte[] buf)
{
    Int16 width = BitConverter.ToInt16(buf, 18);
    Int16 height = BitConverter.ToInt16(buf, 22);

    Bitmap bitmap = new Bitmap(width, height); //ArgumentException: Parameter is not valid.

    int imageSize = width * height * 4;
    int headerSize = BitConverter.ToInt16(buf, 10);

    System.Diagnostics.Debug.Assert(imageSize == buf.Length - headerSize);

    int offset = headerSize;
    for (int y = 0; y < height; y++)
    {
        for (int x = 0; x < width; x++)
        {
            bitmap.SetPixel(x, height - y - 1, Color.FromArgb(buf[offset + 3], buf[offset], buf[offset + 1], buf[offset + 2]));
            offset += 4;
        }
    }
    return bitmap;
} 
```

**结论：**

感觉还有点不对劲，希望你能回答这个问题。

**编辑：**

前端代码示例：

```
<script>
    $(function() {
        var reader = new window.FileReader();

        function readImage(file, callBack) {
            reader.onload = function (e) {
                var image = new Image();
                image.onload = function (imageEvt) {
                    if (typeof callBack == "function") {
                        callBack(e.target.result);
                    }
                };
                image.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        $j('#file').change(function (e) {
            var file = e.target.files[0];

            readImage(file, function(imageData) {
                $('#imageData').val(imageData);
            });
        });
    });
</script>

@using (Html.BeginForm("UploadImage", "Images", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)
    <input name="PostedImage.ImageData" type="hidden" id="imageData" value="" />

    @* REST OF THE HTML CODE HERE *@

    <p>Choose an image:</p>
    <input type="file" name="file" id="file" />

    <input type="submit" value="Upload" />
} 
```

控制器/动作示例：

```
[HttpPost]
public ActionResult Opret(PostedImage postedImage)
{
    String imageData = PostedImage.ImageData;

    byte[] imageBytes = Convert.FromBase64String(imageData.EncodeTo64());

    using (var imageStream = new MemoryStream(imageBytes, false))
    {
        Image image = Image.FromStream(imageStream);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T12:58:02.977

我认为您的问题是您正在获取一个发布到您的控制器的 base64 字符串，将其视为 ASCII，然后再次将其转换为 base64。

我认为你需要改变这条线

```
byte[] imageBytes = Convert.FromBase64String(imageData.EncodeTo64()); 
```

到

```
byte[] imageBytes = Convert.FromBase64String(imageData); 
```

从那里你的字节应该是正确的，你应该能够创建你的图像

- 编辑 -

我获取了您在文本文档中提供的示例数据并在将其加载到位图中之前对其进行了解析。我能够将图像保存到我的硬盘驱动器并受到斯巴达人的欢迎（Go Green!!）

试试这个代码，看看会发生什么。

请注意 imageData 正是[http://kristianbak.com/test_image.txt](http://kristianbak.com/test_image.txt)上公开的内容。我会提供初始化，但它是一个相当大的字符串，可能会破坏事情。

```
string imageDataParsed = imageData.Substring( imageData.IndexOf( ',' ) + 1 );
byte[] imageBytes = Convert.FromBase64String( imageDataParsed );
using ( var imageStream = new MemoryStream( imageBytes, false ) )
{
   Bitmap image = new Bitmap( imageStream );
} 
```

# php - 如何在 php 中创建一个 30 分钟倒计时计时器

> ID：11700904
> 
> 赞同：-2
> 
> 时间：2012-07-28T12:10:17.523
> 
> 标签：php, timer, countdown

> **可能重复：**
> [基于 PHP 和 jQuery 构建的倒数计时器？](https://stackoverflow.com/questions/7115620/countdown-timer-built-on-php-and-jquery)

我需要创建一个 30 分钟倒计时计时器并在 30 分钟后显示消息框

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T12:14:24.390

您不能直接在 PHP 中执行此操作，因为 PHP 在服务器上运行。

您可以弹出一些运行倒数计时器的 javascript - 您可以在谷歌上搜索大量教程。

但是，您可以在数据库中插入一行，并在脚本运行时定期检查它 - 然后在时间到期后加载的下一页显示它。

编辑：正如丹尼尔在下面的评论中正确指出的那样（+1 btw），您可以拥有一个由 javascript 调用的 PHP 文件，该文件检查数据库并在计时器到期时弹出您的消息。

# php - 使用 javascript 或 Php 将数据写入服务器端 .xml 文件

> ID：11700915
> 
> 赞同：-3
> 
> 时间：2012-07-28T12:11:43.220
> 
> 标签：php, javascript, html, xml

我有一个基于 html 和 javascript 的网站。

在该站点上，数据取自服务器端的 .xml 文件。这很完美！

此外，我希望用户能够将数据输入字段并将该数据保存在另一个服务器端 .xml 文件中。我不能让它工作！我将数据存储在变量中并准备传递给 php，但无法让任何 php 代码工作。（我是php新手）

我已更改服务器上 .xml 文件的读写权限。

过去几天我一直在扫描网络以尝试让一些代码工作，但我还没有任何工作。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-28T12:15:58.247

[使用AJAX](http://api.jquery.com/jQuery.ajax/)调用将变量中存在的所有数据发布到 PHP 脚本。将数据发送到 PHP 脚本后，您可以使用[simpleXML](http://in3.php.net/simplexml)动态生成 xml 文件并使用[file_put contents](http://php.net/manual/en/function.file-put-contents.php)将其保存在服务器中。

# c++ - C++ 中的字符串数组：打印的额外字符

> ID：11700920
> 
> 赞同：0
> 
> 时间：2012-07-28T12:12:47.900
> 
> 标签：c++, string, visual-studio-2008, multidimensional-array, memcpy

我在理解我的代码的此输出时遇到了一些麻烦：

```
#define MAX 5

char pipeNames[MAX][1024];
string s1 = "\\\\.\\p\\p1";
string s2 = "\\\\.\\p\\p2";
int len1 = strlen(s1.c_str());
int len2 = strlen(s2.c_str());
memcpy((void*)pipeNames[0], (void*)s1.c_str(), len1);
memcpy((void*)pipeNames[1], (void*)s2.c_str(), len2);
cout<<pipeNames[0];
cout<<endl<<len1;
cout<<endl<<pipeNames[1];
cout<<endl<<len2; 
```

实际输出：

```
\\.\p\p1É┼é|
8
\\.\p\p2
8 
```

预期输出：

```
\\.\p\p1
8
\\.\p\p2
8 
```

为什么在 pipeNames[0] 的末尾会打印额外的字符。我正在使用 string::c_str() 自动附加空字符，那么为什么会出错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:18:41.987

你不是在复制空字符。strlen 不计算空字符。试试这个

```
memcpy(pipeNames[0], s1.c_str(), len1 + 1);
memcpy(pipeNames[1], s2.c_str(), len2 + 1); 
```

也不需要你的演员表。强制转换是危险的，因为它们可以掩盖编译器错误，所以如果你不需要它们就不要使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T12:19:22.577

这会更好

```
memcpy((void*)pipeNames[0], (void*)s1.c_str(), len1 + 1);
                                                      ^
memcpy((void*)pipeNames[1], (void*)s2.c_str(), len2 + 1);
                                                      ^ 
```

以确保您 null 终止复制的字符串。您的初始数组未初始化，因此您的数组中的数据可以是任何开始 - 所以如果它不是零，您的打印函数将继续输出，直到它们找到一个空字符。

正如您的评论之一所建议的那样更好，请`strcpy`改用

# python - 在python中修改for中的条件

> ID：11700922
> 
> 赞同：1
> 
> 时间：2012-07-28T12:13:13.257
> 
> 标签：python, for-loop

嘿，这是一个运行良好的代码。我正在使用更大的代码，该程序可以快速回答 999999 或 9999999。

```
prime=[2,3,5]
f=7
def next_prime(f): #whenever called, measures the next prime of the list and returns it
    j=len(prime)
    while j==len(prime):
        for x in prime:
            if f%x==0:
                f+=2
                break
        else:
            prime.append(f)
    return f 
```

但是如果我稍微修改一下代码（我想添加 x 应该小于 f**.5 的条件），程序不会给出任何结果。

```
prime=[2,3,5]
f=7
main=[]
power=[]
def next_prime(f):
    j=len(prime)
    while j==len(prime):
        for x in prime:
            if (x<int(f**.5)+1) and f%x==0:
                f+=2
                break
        else:
            prime.append(f)
    return f 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:30:27.827

这两个版本在我的 python 解释器（2.7）中都可以正常工作。尽管您的两个版本都不会返回任何偶数结果，但您可能应该为这种情况添加检查：

```
f=7
main=[]
power=[]
prime = [2,3,5]
def next_prime(f):

    #Added check:
    if not f%2:
        f += 1

    j=len(prime)
    while j==len(prime):
        for x in prime:
            if (x<int(f**.5)+1) and f%x==0:
                f+=2
                break
        else:
            prime.append(f)
    return f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:48:34.017

首先，此代码不适用于偶数。您应该编写类似的代码。

```
def next_prime(n):
   assert(n>0)
   while 1:
      n+=1
      if isprime(n):
          return n 
```

如果您可以使用任何 isprime() 实现。

您可以自己编写它，也可以使用著名的 miller-rabin 算法，只要您有足够的内存来保存计算，该算法对任何素数都可以快速运行。

[http://ideone.com/XO74b](http://ideone.com/XO74b)

# html - 在 div 中使用鼠标滚轮进行水平滚动

> ID：11700927
> 
> 赞同：35
> 
> 时间：2012-07-28T12:13:56.653
> 
> 标签：html, scroll

如何使用鼠标滚轮在 na div 中水平滚动，或使用 jquery 拖动？

* * *

我试过可拖动，但在我的代码中它没有用。

现在我有一个水平滚动条。是否可以使用鼠标滚轮滚动 div 中的内容？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-11T16:43:01.357

尝试使用鼠标滚轮进行水平滚动。这是纯 JavaScript：

```
(function() {
    function scrollHorizontally(e) {
        e = window.event || e;
        var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));
        document.getElementById('yourDiv').scrollLeft -= (delta * 40); // Multiplied by 40
        e.preventDefault();
    }
    if (document.getElementById('yourDiv').addEventListener) {
        // IE9, Chrome, Safari, Opera
        document.getElementById('yourDiv').addEventListener('mousewheel', scrollHorizontally, false);
        // Firefox
        document.getElementById('yourDiv').addEventListener('DOMMouseScroll', scrollHorizontally, false);
    } else {
        // IE 6/7/8
        document.getElementById('yourDiv').attachEvent('onmousewheel', scrollHorizontally);
    }
})(); 
```

这是一个演示，但带有`document.body`和`window`作为目标元素：[https ://taufik-nurrohman.github.io/dte-project/full-page-horizo​​ntal-scrolling.html](https://taufik-nurrohman.github.io/dte-project/full-page-horizontal-scrolling.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-07-21T07:05:30.657

我已经根据@Anonymous-Lettuce 的答案重写了代码。元素的宽度重新计算被跳过，因为它是不必要的，有时是不可取的。这还提供了传递给插件的`scroll-amount`附加功能。`px`

像这样使用它：

```
$(document).ready(function(){
    $('#your_div').hScroll(100); // You can pass (optionally) scrolling amount
}); 
```

这是升级的插件`jquery.hscroll.js`：

```
jQuery(function ($) {
    $.fn.hScroll = function (amount) {
        amount = amount || 120;
        $(this).bind("DOMMouseScroll mousewheel", function (event) {
            var oEvent = event.originalEvent, 
                direction = oEvent.detail ? oEvent.detail * -amount : oEvent.wheelDelta, 
                position = $(this).scrollLeft();
            position += direction > 0 ? -amount : amount;
            $(this).scrollLeft(position);
            event.preventDefault();
        })
    };
}); 
```

这是相同的缩小版本`jquery.hscroll.min.js`：

```
jQuery(function(e){e.fn.hScroll=function(l){l=l||120,e(this).bind("DOMMouseScroll mousewheel",function(t){var i=t.originalEvent,n=i.detail?i.detail*-l:i.wheelDelta,o=e(this).scrollLeft();o+=n>0?-l:l,e(this).scrollLeft(o),t.preventDefault()})}}); 
```

> 这是[JSFiddle](https://jsfiddle.net/q3pf2hge)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-26T11:22:49.810

几天前写了这个插件。

```
 $.fn.hScroll = function( options )
 {
   function scroll( obj, e )
   {
     var evt = e.originalEvent;
     var direction = evt.detail ? evt.detail * (-120) : evt.wheelDelta;

     if( direction > 0)
     {
        direction =  $(obj).scrollLeft() - 120;
     }
     else
     {
        direction = $(obj).scrollLeft() + 120;
     }

     $(obj).scrollLeft( direction );

     e.preventDefault();
   }

   $(this).width( $(this).find('div').width() );

   $(this).bind('DOMMouseScroll mousewheel', function( e )
   {
    scroll( this, e );
   });
} 
```

试试看

```
$(document).ready(function(){
     $('#yourDiv').hScroll();
}); 
```

div的子元素的宽度应该比父元素宽。

比如 4000 像素什么的。

```
 <div id="yourDiv">
       <div style="width: 4000px;"></div>
 </div> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-08-31T16:32:03.197

我想对@Taufik 给出的答案稍加改进。

在`es2015`模块的上下文中：

```
const el = document.querySelector('#scroller');

function scrollHorizontally(e) {
  e = window.event || e;
  e.preventDefault();
  el.scrollLeft -= (e.wheelDelta || -e.detail);
}

function init() {
  if (!el) {
    return;
  }

  if (el.addEventListener) {
    el.addEventListener('mousewheel', scrollHorizontally, false);
    el.addEventListener('DOMMouseScroll', scrollHorizontally, false);
  } else {
    el.attachEvent('onmousewheel', scrollHorizontally);
  }
}

export default init; 
```

主要区别在于：`el.scrollLeft -= (e.wheelDelta || -e.detail);`

`e.wheelData`直接在滚动偏移量中使用意味着我们可以拥有*惯性*，使滚动可以逐渐减慢。我发现这对我很有效。

像这样在你的代码中使用（假设上面的代码在一个名为*scroller.js*的文件中）：

```
import scroller from './scroller.js';
scroller(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-21T08:24:59.877

您可以只使用 javascrpt（没有 Jquery）以一种清晰的方式做到这一点，并且还允许垂直滚动：

```
const target = document.querySelector('div')

target.addEventListener('wheel', event => {
  const toLeft  = event.deltaY < 0 && target.scrollLeft > 0
  const toRight = event.deltaY > 0 && target.scrollLeft < target.scrollWidth - target.clientWidth

  if (toLeft || toRight) {
    event.preventDefault()
    target.scrollLeft += event.deltaY
  }
}) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-26T15:20:56.660

### 纯`CSS`溶液

**您不需要`Javascript`或`JQuery`为此**
有关更多信息：[https ://css-tricks.com/pure-css-horizo​​ntal-scrolling/](https://css-tricks.com/pure-css-horizontal-scrolling/)

```
::-webkit-scrollbar {
  width: 1px;
  height: 1px;
}

::-webkit-scrollbar-button {
  width: 1px;
  height: 1px;
}

body {
  background: #111;
}

div {
  box-sizing: border-box;
}

.horizontal-scroll-wrapper {
  position: absolute;
  display: block;
  top: 0;
  left: 0;
  width: calc(250px + 1px);
  max-height: 750px;
  margin: 0;
  padding-top: 1px;
  background: #abc;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-transform: rotate(-90deg) translateY(-250px);
          transform: rotate(-90deg) translateY(-250px);
  -webkit-transform-origin: right top;
          transform-origin: right top;
}
.horizontal-scroll-wrapper > div {
  display: block;
  padding: 5px;
  background: #cab;
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
  -webkit-transform-origin: right top;
          transform-origin: right top;
}

.squares {
  padding: 250px 0 0 0;
}
.squares > div {
  width: 250px;
  height: 250px;
  margin: 10px 0;
}
```

```
<div class="horizontal-scroll-wrapper squares">
  <div>item 1</div>
  <div>item 2</div>
  <div>item 3</div>
  <div>item 4</div>
  <div>item 5</div>
  <div>item 6</div>
  <div>item 7</div>
  <div>item 8</div>
</div>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-09T05:07:26.770

在我的情况下，我需要在调整浏览器大小时将滚动重置为正常，所以我稍微修改了[Izhar 的](https://stackoverflow.com/users/887108/izhar-aazmi)代码以使其适用于我的应用程序：

在浏览器调整大小时启动 hScroll：

```
$(function () {
     $(window).resize($('.horizontal-scroll').hScroll(60));
}); 
```

检查容器是否将空白属性设置为“nowrap”，如果没有则返回：

```
$.fn.hScroll = function (amount) {
    var $this = $(this);
    amount = amount || 120;
    $this.bind('DOMMouseScroll mousewheel', function (event) {
         var isHorizontal = $('.horizontal-scroll').css('white-space') == 'nowrap';
         if (!isHorizontal) return;
         var oEvent = event.originalEvent,
        direction = oEvent.detail ? oEvent.detail * -amount : oEvent.wheelDelta,
        position = $this.scrollLeft();
    position += direction > 0 ? -amount : amount;
    $this.scrollLeft(position);
    event.preventDefault();
}); 
```

};

我使用这个媒体查询来更新 white-space 属性：

```
@media (min-width: 768px) {
    .horizontal-scroll { white-space: nowrap !important; }
} 
```

希望这可以帮助任何想要做同样的事情的人。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2022-02-11T16:11:14.717

```
why is mine failing?

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style type="text/css">

        * {
          margin:0;
          padding:0;
        }

        #page-wrap {
          width:500%; /* 100% x length of panel */
          height:100%;
          overflow:hidden;
        }

        .panel {
          width:20%; /* 100% / length of panel */
          float:left;
          height:100%;
        }

        .panel .inner {padding:2em}

        /* Details (Ignore this!) */
        body {
          font:italic normal 13px/1.4 Georgia,Serif;
          color:#666;
        }

        h2 {
          font-weight:bold;
          font-size:200%;
          margin:0 0 1em;
        }

        p {margin:1.5em 0}

        #panel-1 {
          background-color:black;
          color:white;
        }

        #panel-2 {
          background-color:magenta;
          color:yellow;
        }

        #panel-3 {
          background-color:darkblue;
          color:lightgreen;
        }

        #panel-4 {
          background-color:pink;
          color:brown;
        }

        #panel-5 {
          background-color:darkred;
          color:cyan;
        }

        </style>
</head>
<body >
    <div  >
        <section style="height:500px;width:100%;color: rgb(29, 121, 202);">
            <h2>WWF History</h2>
            <p>The World Wide Fund for Nature (WWF) is an international organization working on issues regarding the conservation, research and restoration of the environment, formerly named the World Wildlife Fund. WWF was founded in 1961.</p>
          </section>

          <section style="height:500px;width:100%;color: rgb(223, 12, 135);">
            <h2>WWF's Symbol</h2>
            <p>The Panda has become the symbol of WWF. The well-known panda logo of WWF originated from a panda named Chi Chi that was transferred from the Beijing Zoo to the London Zoo in the same year of the establishment of WWF.</p>
          </section>
          <section id="vane">
                <div id="page-wrap">
            <div class="panel" id="panel-1">
                <div class="inner"><h2>Eodem Modo Typi</h2><div style="-webkit-column-count:4;-moz-column-count:4;column-count:4;-webkit-column-gap:1em;-moz-column-gap:1em;column-gap:1em;text-align:right;"><p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</p><p>Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum.</p><p>Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.</p></div><p style="font-size:500%;font-style:normal;text-align:right;">&rArr;</p></div>
            </div>
            <div class="panel" id="panel-2">
                <div class="inner"><h2>Facilisis At Vero Eros</h2><div style="-webkit-column-count:2;-moz-column-count:2;column-count:2;-webkit-column-gap:2em;-moz-column-gap:2em;column-gap:2em;"><p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</p><p>Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum.</p><p>Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.</p></div></div>
            </div>
            <div class="panel" id="panel-3">
                <div class="inner"><img src="http://lorempixel.com/400/400/food/" alt="Image" width="400" height="400" style="float:right;margin:0 0 0 3em;"><h2>Euismod Tincidunt</h2><div><p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</p></div></div>
            </div>
            <div class="panel" id="panel-4">
                <div class="inner"><h2>Claritas est Etiam Processus Dynamicus</h2><img src="http://lorempixel.com/200/200/food/" alt="Image" width="200" height="200" style="float:right;margin:0 0 0 3em;"><div style="-webkit-column-count:2;-moz-column-count:2;column-count:2;-webkit-column-gap:2em;-moz-column-gap:2em;column-gap:2em;"><p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</p><p>Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum.</p><p>Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.</p></div></div>
            </div>
            <div class="panel" id="panel-5">
                <div class="inner"><img src="http://lorempixel.com/400/400/food/" alt="Image" width="400" height="400" style="float:left;margin:0 3em 0 0;"><h2>Vulputate Velit Esse Molestie</h2><div style="-webkit-column-count:4;-moz-column-count:4;column-count:4;-webkit-column-gap:1em;-moz-column-gap:1em;column-gap:1em;"><p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</p><p>Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum.</p><p>Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.</p></div></div>
            </div>
        </div>
          </section>

          <section  style="height:500px;width:200%; color: rgb(29, 121, 202);  ">
          <div  >
            <h2>WWF History</h2>
            <p >The World Wide Fund for Nature (WWF) is an international organization working on issues regarding the conservation, research and restoration of the environment, formerly named the World Wildlife Fund. WWF was founded in 1961.</p>
          </div>  
          </section>

          <section style="height:500px;width:100%;color: rgb(223, 12, 135);">
            <h2>WWF's Symbol</h2>
            <p>The Panda has become the symbol of WWF. The well-known panda logo of WWF originated from a panda named Chi Chi that was transferred from the Beijing Zoo to the London Zoo in the same year of the establishment of WWF.</p>
          </section>
    </div>

</body>
<script>
     (function() {
    function scrollHorizontally(e) {
        e = window.event || e;
        var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));
        console.log(delta)
      var resultado =  document.getElementById('vane').scrollLeft -= (delta * 40 ); // Multiplied by 40
        e.preventDefault();
        console.log()
    }
    if (document.getElementById('vane').addEventListener) {
        // IE9, Chrome, Safari, Opera
        document.getElementById('vane').addEventListener('mousewheel', scrollHorizontally, false);
        // Firefox
        document.getElementById('vane').addEventListener('DOMMouseScroll', scrollHorizontally, false);
    } else {
        // IE 6/7/8
        document.getElementById('vane').attachEvent('onmousewheel', scrollHorizontally);
    }
})();
</script>
</html> 
```

# sql - 按相关性返回结果的 NoSQL/SQL 数据库

> ID：11700928
> 
> 赞同：1
> 
> 时间：2012-07-28T12:14:01.237
> 
> 标签：sql, database, search, nosql

我正在寻找任何提供类似于 Lucene/Solr erc 功能的 NoSQL/SQL 数据库。结果按与查询的**相关性排序。**例如，NumVal1 介于 1 和 3 之间，NumVal2 介于 4 和 5 之间，依此类推...

我了解到[MongoDB](https://stackoverflow.com/questions/11696627/mongodb-query-results-ordering-numeric-range-query)不会这样做，AFAIK 也不会这样做。

我的需求示例：

```
Doc1: 
 - NumField 1 : 9.9
 - NumField 2: 8.2

Doc2:
 - NumField 1 : 5.9
 - NumField 2: 8.9

**Query**
 - NumField 1: Between 7 & 10
 - NumField 2: Between 8 & 10 
```

我希望 Doc1 在 Doc2 之前出现。

有什么建议么？我对 Lucene/Solr 非常熟悉，但正在寻找替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:45:42.880

Elastic Search（Lucene 的另一种说法）将是我在这个用例中的首选组件。

# php - 将数据从服务器同步到 android 设备的建议

> ID：11700929
> 
> 赞同：0
> 
> 时间：2012-07-28T12:14:06.370
> 
> 标签：php, android, mysql, sync

我在 php 中开发了一个 android 应用程序和 json api。应用程序使用托管在服务器上的 json api 来接收产品列表（食品）的数据，应用程序中的用户可以对这些项目进行评分、分享等

产品在开发的 Web 界面中以 php 进行管理。

我的问题是，每当产品数据发生变化时，我希望应用程序更新这些数据，而不是每次更新，而是批量更新。

对于产品图像，我只希望那些已更改的应用程序下载这些图像。

以简单的方式实现这一点的任何建议，以便应用程序在同步数据时没有太多负载......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:17:57.137

为此，您需要在服务器端获取一个名为 updated_date 的字段。在服务器端更改任何数据时，它将更改。

因此，当您调用 web 服务以获取更新的数据时，您需要将上次同步时间（每次您需要将上次同步时间存储在应用程序共享首选项中）传递给服务器，因此服务器将花费该时间并发送回更新的数据在那之后。

我认为这是满足您要求的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T03:02:51.080

在每个表中添加 last_modified_date 字段并在单独的表中管理图像。您必须在调用 Web 服务时维护 last_sync_date。在 Web 服务中，您需要传递 last_sync_date。取决于 last_sync_date 修改后的数据可以发送到应用程序。

# postgresql - 如何在 PostgreSQL 中修剪文本数组？

> ID：11700930
> 
> 赞同：5
> 
> 时间：2012-07-28T12:14:19.427
> 
> 标签：postgresql, trim

是否可以在 PostgreSQL 中修剪文本数组？如果是这样，怎么做？

我想得到类似的东西：

```
 select trim(myTextArrayColumn) from myTable; 
```

其中 myTextArrayColumn 的类型为 text[]。

列值示例：

```
 {"someData1 ", "someData2 "}

    {" someData3 "} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T07:40:45.340

这应该这样做：

```
select array_agg(trim(e))
from (
  select row_number() over () as rn, 
         unnest(myTextArrayColumn) e
  from mytable
) t
group by rn 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T02:01:54.840

试试这个，我觉得适合你

```
select string_to_array(replace(array_to_string(arrColumn, '::'), ' ', ''), '::') from myTable 
```

**注意**：1.所有空格都将被删除2.您的值必须不包含'::'，如果包含使用其他分隔符

# css - Safari 6 / Webinspector 2 - CSS 行号和样式表

> ID：11700932
> 
> 赞同：6
> 
> 时间：2012-07-28T12:14:25.003
> 
> 标签：css, safari, stylesheet, web-inspector

如果我在新的开发者控制台中检查 CSS 属性，由于某种原因没有行号，而是一个小箭头，您可以将其悬停或单击以获取行号或样式表。在旧的 Webinspector 中，这要快得多，因为包含行号的样式表已经作为链接写在那里。

有谁知道如何改变这个或解决方法？我已经查看了默认值，但找不到任何东西。

我看到这个[https://devforums.apple.com/message/705663](https://devforums.apple.com/message/705663)已经有一个错误票，所以希望它可以改变为旧的行为......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:33:03.543

我发现可以选择在 Mountain Lion的[每晚构建中使用 webkit 检查器。](http://nightly.webkit.org)您可以从开发人员菜单中选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-08T07:41:10.110

试试 cmd+p 然后输入`:40`

光标将转到第 40 行

# node.js - 使用 NodeJS 将 POST 数据保存到本地服务器

> ID：11700933
> 
> 赞同：0
> 
> 时间：2012-07-28T12:14:34.183
> 
> 标签：node.js, express

将 nodeJs 与 express 一起使用。

POST 数据正在由正文解析器解析。现在我想将接收到的图像文件保存在名为 images 的快速应用程序文件夹中。该图像正在发布到 nodeJs 应用程序。当我查看回调函数中的 res.body 变量时，它包含图像，但我很困惑如何保存它。

我查看了stackflow，但找不到任何答案。于是自己发帖。

我尝试过使用 fs 库及其 fs.writeFile() 函数。它保存文件，但它都已损坏。

image1 是发布数据中图像的名称。使用 bodyparser()

```
var image = req.body.image1;
        fs.writeFile('images/newImage.jpg', image, function(err){
            if (err) throw err;
            console.log('It is saved');
        }); 
```

这会将文件保存在图像目录中，但它不是图像。

我正在使用 curl 将数据发布到 nodejs 应用程序，代码是

```
$curl = curl_init();
$data = array('name' => 'First','file' => "image1=@".__dir__."/images/1.jpg");

curl_setopt($curl, CURLOPT_URL, "http://localhost:3000/api/");
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

curl_exec($curl);
curl_close($curl); 
```

我正在记录这两个 console.log 函数

```
 console.log(req.files);
   console.log(req.body); 
```

日志给出

```
{}
{ name: 'First',
  file: 'image1=@C:\\xampp\\htdocs\\curltest/images/1.jpg' } 
```

请帮助这让我发疯：-/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:34:12.593

首先正确的参数顺序[`fs.writeFile`](http://nodejs.org/docs/latest/api/fs.html#fs_fs_writefile_filename_data_encoding_callback)是文件名在前，然后是内容。

如果您正在使用`express.bodyParser()`，您将在该`req.files`字段中拥有上传的文件。

当然，您应该编写回调：

```
fs.writeFile('newImage', req.files.image, function (err) {
  if (err) throw err;
  console.log("It's saved");
}); 
```

### 更新

您还应该检查您的 HTML 端，因为您的表单的编码必须是`multipart/form-data`.

例子：

```
<form action="/somewhere/to/post" method="post" enctype="multipart/form-data">
  <input type="file" name="image1"/>
  <input type="submit"/>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T11:50:02.633

如果您使用的是 Express 4，则不包括 bodyParser，但您真正需要的是使用多方包，我使用[它](https://www.npmjs.org/package/multiparty)，您的代码将如下所示：

在您的 POST 路由器中

```
var form = new multiparty.Form();

form.parse(req, function(err, fields, files) {
        if(err){
            res.status(500).send('not file');
        }
     res.send(util.inspect({fields: fields, files: files}));
}); 
```

希望这可以帮助

# emacs - Emacs：设置和切换显示尾随空白

> ID：11700934
> 
> 赞同：12
> 
> 时间：2012-07-28T12:14:38.910
> 
> 标签：emacs

在 linux 上使用 emacs 23.3.1 的两个相关问题：

首先，为什么我不能设置`show-trailing-whitespace`to `t`with的值，`setq`如下所示？当我将`setq`版本放入其中时，`.emacs`它不会更改值（如功能上和使用所示`M-x describe-variable`）。

```
(setq show-trailing-whitespace t)  ; Does not change variable value or give error

(custom-set-variables              ; Sets show-trailing-whitespace as expected
 '(show-trailing-whitespace t)) 
```

其次，如何在`t`和之间切换值`nil`？我认为[这个答案](https://stackoverflow.com/questions/530461/emacs-lisp-function-to-toggle-variable-tab-width-between-4-8)正是我所需要的，但在这种情况下它不起作用。我用了：

```
(global-set-key "\M-ow" 'tf-toggle-show-trailing-whitespace)

(defun tf-toggle-show-trailing-whitespace ()
    "Toggle show-trailing-whitespace between t and nil"
    (interactive)
    (setq show-trailing-whitespace (if (= show-trailing-whitespace nil) t nil))
    (redraw-display)) 
```

当我点击时，`M-ow`我得到一个错误`Wront type argument: number-or-marker-p, nil`。有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-28T14:32:19.830

第一：正如`describe-variable`告诉你`show-trailing-whitespace`的是一个缓冲区变量。这意味着做 a只为当前缓冲区设置它，因此在文件`setq`中完成时没有效果。`.emacs`要拥有类似于您需要使用什么自定义的东西，`setq-default`而不是`setq`. 这将适用于所有缓冲区。

`setq`第二：对于切换，如果您想在每个缓冲区的基础上切换，您可能想要使用。您得到的错误是您使用`=`which 来测试两个数字是否相等。使用 以更简洁的方式进行切换`not`。作为旁注，该`(redraw-display)`命令似乎没有做任何事情。

```
(defun tf-toggle-show-trailing-whitespace ()
  "Toggle show-trailing-whitespace between t and nil"
  (interactive)
  (setq show-trailing-whitespace (not show-trailing-whitespace))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:39:23.923

写（eq show-trailing-whitespace nil）

或更短——但相反——

（如果显示尾随空白

# c# - 哪种 IEnumerable To a List 方式更好？

> ID：11700935
> 
> 赞同：2
> 
> 时间：2012-07-28T12:14:45.157
> 
> 标签：c#, .net, linq, collections, ienumerable

我想知道以下事实。我有一个数据存储库，它返回我所有的`IEnumerable<Customer>`.

在我的业务逻辑中，有时我需要列表，以便我可以添加一些东西。

当我检索时，`IEnumerable<Customer>`我有 2 个选项可以从中获取列表。

像这样使用 Linq 扩展方法`.ToList()`或强制转换（我认为它不是转换）`(List<Customer>)IEnumerable<Customer>`。

必须提到我不使用列表进行迭代，所以我不需要每次都使用我的枚举的新副本。在这种情况下，在我的简单情况下，我必须使用 cast 方法而不是`.ToList`（这会创建一个新副本）吗？

```
// use simple cast?
List<Customer> customers = (List<Customers>)DataSource.GetCustomers(); 

// or if i use this i get a bit of performance loss?
List<Customer> customers = DataSource.GetCustomers().ToList(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T12:20:11.250

我会选择`ToList()`，因为该方法返回 an`IEnumerable<Customer>`并且您无法确定内部实现。

也许现在`GetCustomers()`返回一个`List<>`被 an 掩蔽的`IEnumerable<>`，但是如果将来内部实现发生变化怎么办？

**编辑 ：**

`List<Customer>`实现了 interface `IEnumerable<Customer>`，以及一个类似`Customer[]`或 a的数组`LinkedList<Customer>`。因此，当您收到一个类型的对象时，`IEnumerable<WhateverClass>`您不能确定它是 a `List<Customer>`，当然，只有当您要转换的类型在接口后面相同时，转换才有效，否则您将收到异常。

使用`ToList()`，正如您正确所说的，您创建了一个包含 元素的新对象`IEnumerable<>`，但至少您可以安全地迭代/修改该对象而没有任何异常。

方法返回`IEnumerable<T>`是因为通过这种方式它不会绑定到任何特定的集合实现，并且将来它可以从列表切换到数组或其他任何方式而不更改方法签名......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T12:25:49.547

这取决于。如果大小很小，我会使用 .ToList()，但您必须了解这将复制列表。

如果它很大或者你做了很多（并且它会造成性能损失），你可以检查从 .GetCustomers() 返回的对象是否是一个列表，如果是 - 强制转换，否则使用 .ToList() 创建一个副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T12:30:01.380

您可以通过使用条件来进行转换，以防止未来的实现更改。就像是

```
List<Customer> customers = null;
try
{
     customers = (List<Customers>)DataSource.GetCustomers();
}
catch
{
    customers = DataSource.GetCustomers().ToList();
} 
```

这样，只要 IEnumerable 是一个列表，您就可以避免复制列表，但是如果将来由于某种原因内部实现发生更改，您的代码将继续工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T12:21:09.503

我建议使用 .ToList()。它的性能会更差，但是如果您使用有关 API 实现细节的信息，并且您正在做出无根据的假设。明天有人会将 IEnumerable 更改为不是列表的内容，您的代码将开始抛出异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T12:23:40.860

返回 IEnumerable 的存储库的全部意义在于它不能保证实际上是一个列表。（现在可能是，但使用 IEnumerable 允许以后更改实现）。

要么使用 .ToList() 方法，要么让存储库返回 List 或 IList。

# spring - testExecute(com.abc.action.PasswordHintActionTest): 加载 ApplicationContext 失败

> ID：11700936
> 
> 赞同：1
> 
> 时间：2012-07-28T12:15:01.487
> 
> 标签：spring, unit-testing, maven, junit, spring-test

我正在使用 Spring 测试框架编写单元测试，使用 maven 作为构建工具。我已将我的 applicationcontext.xml 文件放在 WEB-INF 目录中，如下所示。

![在此处输入图像描述](../Images/5d63474164aec45fb104e33709d3257c.png)

我也将相同的配置文件放在 src/main/resources 目录中（这是因为，maven 抱怨它在打开这些测试用例时找不到这些配置文件）

以下是我在运行 maven clean install 时收到的错误消息

![在此处输入图像描述](../Images/90b4ead07a4582557a91c6e4a169ff91.png)

这就是我为单元测试加载 applicationcontext.xml 文件的方式

![在此处输入图像描述](../Images/8bb7876dc925648a83b5521c8e23a493.png)

任何人都可以帮助我找出为什么当我放置这些文件时它说找不到这些配置文件事件。

更新 ：

```
 <error message="Failed to load ApplicationContext" type="java.lang.IllegalStateException">java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:46)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)
    at org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:220)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [applicationContext-service.xml]; nested exception is java.lang.NoSuchMethodError: org.springframework.beans.MutablePropertyValues.add(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/beans/MutablePropertyValues;
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:420)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:212)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:81)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
    ... 30 more
Caused by: java.lang.NoSuchMethodError: org.springframework.beans.MutablePropertyValues.add(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/beans/MutablePropertyValues;
    at org.springframework.aop.config.AopConfigUtils.registerOrEscalateApcAsRequired(AopConfigUtils.java:123)
    at org.springframework.aop.config.AopConfigUtils.registerAspectJAutoProxyCreatorIfNecessary(AopConfigUtils.java:82)
    at org.springframework.aop.config.AopNamespaceUtils.registerAspectJAutoProxyCreatorIfNecessary(AopNamespaceUtils.java:67)
    at org.springframework.aop.config.ConfigBeanDefinitionParser.configureAutoProxyCreator(ConfigBeanDefinitionParser.java:130)
    at org.springframework.aop.config.ConfigBeanDefinitionParser.parse(ConfigBeanDefinitionParser.java:103)
    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:69)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1297)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1287)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:92)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:507)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:398)
    ... 40 more
</error> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:12:23.190

这是您的问题的根本原因：

> java.lang.NoSuchMethodError: org.springframework.beans.MutablePropertyValues.add(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/beans/MutablePropertyValues;

[`MutablePropertyValues.add(String, Object)`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/beans/MutablePropertyValues.html#add%28java.lang.String,%20java.lang.Object%29)方法是在 Spring 3.x 中添加的。显然你（maven）正在使用 pre 3.x `spring-beans*.jar`。查看Eclipse 中的*Libraries*节点来证明这一点。

如果`spring-beans`尚未在您的 中`pom.xml`，请[明确添加](http://repo1.maven.org/maven2/org/springframework/spring-beans/3.1.2.RELEASE/)：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-beans</artifactId>
    <version>3.1.2.RELEASE</version>
</dependency> 
```

此外，通过调用确保所有 Spring JAR 具有相同的版本：

```
$ mvn dependency:tree 
```

# c# - 如何使用 opendicom.net 库进行 dicom 处理

> ID：11700938
> 
> 赞同：3
> 
> 时间：2012-07-28T12:15:16.930
> 
> 标签：c#, windows-runtime, dicom

有没有人使用 opendicom.net 库进行 dicom 图像解析。在示例代码中，它指的是以下几行：

```
 DataElementDictionary dataElementDictionary = new DataElementDictionary();
        UidDictionary uidDictionary = new UidDictionary();

        try
        {
            dataElementDictionary.LoadFrom("**dicom-elements-2004.dic**",
             DictionaryFileFormat.BinaryFile);
            uidDictionary.LoadFrom("**dicom-uids-2004.dic**",
            DictionaryFileFormat.BinaryFile);

        }
        catch (Exception dictionaryException)
        {

            //Console.Error.WriteLine ("Problems processing dictionaries:\n" +  
            //   dictionaryException); 
            return;
        } 
```

我在哪里可以获得文件 dicom-elements-2004.dic 和 dicom-uids-2004.dic？我没有在网站上得到这些。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:17:58.170

[openDICOM.NET](http://opendicom.sourceforge.net/)是一个非常简单的 DICOM 文件处理库。该库本身被设计为与*平台*无关，即应该可以在各种操作系统中使用 .NET Framework 和 Mono 进行构建。但是，开箱即用不可能构建为 WinRT/Metro 库，因此除非您进行了大量重构，否则我假设您已将该库编译为常规 C# 类库 .NET Framework 4.5？

假设您真的在开发 Windows WPF 或 Forms 应用程序，并假设您已经设法使用*openDICOM.NET*读取了 DICOM 数据集，那么您应该能够构造一个`PixelData`对象：

```
var pixelData = new PixelData(dataset); 
```

从`PixelData`对象中，您可以将像素数据作为字节数组访问：

```
byte[][] byteArray = pixelData.ToBytesArray(); 
```

然后，您需要使用对象的以下属性将字节二维数组转换为可用于构造位图图像的一维数组`PixelData`：

```
Rows
Columns
BitsAllocated
(BitsStored) 
```

在 WPF 应用程序中，您应该能够创建[WriteableBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)对象，并在 Windows 窗体中创建[Bitmap](http://msdn.microsoft.com/en-us/library/4e7y164x)对象。

**但是**，*openDICOM.NET*已经很多年没有维护了，我强烈建议您使用不同的、更新的库作为 DICOM 处理的基础。例如，请查看轻量级库[Evil DICOM](http://evildicom.rexcardan.com/)。这里有现成的创建 (Windows Forms) 的方法`Bitmap`，只需使用文件名创建一个 DICOM 图像对象并立即访问相应的位图图像：

```
var imageMtx = new EvilDicom.Image.ImageMatrix(name_of_dicom_file);
var dicomImage = imageMtx.GetImage(slice_numeber); 
```

*Evil DICOM*目前仅适用于 Windows 窗体，但重构所需的类以改用 WPF 可能是一项相对较小的工作。

其他值得探索的开源类库是[mdcm](https://github.com/rcd/mdcm)和更新的[fo-dicom](https://github.com/rcd/fo-dicom)，它们都是由 Colby Dillion 开发的。至少*mdcm*提供完整的 WPF 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T15:47:11.080

我知道这是一个老问题，但我遇到了这个问题，刚刚使用 openDicom.NEt 打开了一个文件

```
 var columns = df.PixelData.Columns;
 var rows = df.PixelData.Rows;
 int displayStride = ((int)columns * PixelFormats.Gray16.BitsPerPixel + 7) / 8; //truncating
 var fromArr = df.PixelData.ToBytesArray()[0];

 theImage.Source = BitmapSource.Create((int)columns, (int)rows, 96, 96,
                   PixelFormats.Gray16, null, fromArr, displayStride); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-16T09:17:24.367

这是您请求的文件。

```
dataElementDictionary.LoadFrom("**dicom-elements-2004.dic**",
         DictionaryFileFormat.BinaryFile);
        uidDictionary.LoadFrom("**dicom-uids-2004.dic**",
        DictionaryFileFormat.BinaryFile); 
```

它位于该位置的以下指定路径中 `DicomTagSeeker-source.zip\DicomTagSeeker\bin\Debug\libraries\dictionary`

[Dicom 标签搜索器](https://www.codeproject.com/Articles/580232/DicomTagSeeker-A-DiCOM-repository-tag-searcher)

# html - chrome 和 firefox 中的 onpopstate

> ID：11700941
> 
> 赞同：2
> 
> 时间：2012-07-28T12:15:32.563
> 
> 标签：html, firefox, google-chrome

我使用**pushState**和**onPopState**来创建 ajax 导航。

但是这里有一个小问题。

在第一次访问页面或页面刷新时，chrome 会触发 onPopState 事件，但 firefox 不会。

这会导致 chrome 加载内容两次，但 Firefox 运行良好。

我不知道哪个工作正确，我该如何解决？

似乎这种行为在旧版本中是相反的:))

[页面加载时的 HTML5 onpopstate](https://stackoverflow.com/questions/3700440/html5-onpopstate-on-page-load)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:38:05.453

我解决了这个问题：

```
window.onpopstate = function(event) 
{
    if (!event.state) return;
    ajaxPage(document.location.href);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-30T09:02:12.703

这在我早期的 Safari 版本中不起作用。我们可以使用 domReady 监听器实现我们自己的 window.onpopstate，如果

*   在 dom 准备好之前我们不会使用它
*   Chrome 的初始 onpopstate 之前被触发

一般问题是Chrome：

当前的 HTML5 规范说在初始页面加载时永远不应该触发“popstate”。Chrome 和大多数 Safari 版本不遵循这一点。Chrome 团队应注意 - 请“star”

[http://code.google.com/p/chromium/issues/detail?id=63040](http://code.google.com/p/chromium/issues/detail?id=63040)

# jquery - 具有包含单词的类的对象的 Jquery 单击事件

> ID：11700946
> 
> 赞同：1
> 
> 时间：2012-07-28T12:16:30.783
> 
> 标签：jquery

我正在尝试使用这个：

```
$("[class*=welcome]").click( function(){  e.t.c........ 
```

选择器不工作？当任何对象中包含“欢迎”一词时，我希望这会触发。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T12:18:47.040

```
<div class="welcome_something"></div> 
```

将与

```
$("[class*='welcome']") 
```

和

```
<div class="something">You are welcome</div> 
```

将与

```
$("div:contains('welcome')") 
```

# multithreading - 并发不是并行？

> ID：11700953
> 
> 赞同：23
> 
> 时间：2012-07-28T12:17:19.790
> 
> 标签：multithreading, concurrency, parallel-processing

[这](http://concur.rspace.googlecode.com/hg/talk/concur.html#title-slide)是 Rob Pike 的幻灯片。每次经过这个我都觉得自己像个白痴。我无法弄清楚它的要点。众所周知，并发是将复杂问题分解为更小的组件。如果你不能正确地将某些东西分成更小的部分，那么使用并发就很难解决它。

但是，幻灯片中没有太多关于在实现并发后如何获得并行性的详细信息。在课程幻灯片（编号 52）中，他说并发 - “甚至可能是并行的”。但问题是——**并发何时以及如何正确有效地导致并行？**

我的猜测是，Rob 指出开发人员应该在并发级别上工作——并行性应该是语言/虚拟机的关注点（gomaxprocs？）。只关心智能分解成更小的单元，只关心正确的并发性——并行性将由“系统”来处理。

请阐明一些观点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T12:52:15.853

**罗布·派克是什么意思**

当您考虑到算法的抽象形式时，您必须选择是否使用消息传递或共享内存或混合来实现它。您还必须考虑内存访问的类型（NUMA、UMA 等）和使用的拓扑（Hypercube、Torus、Ring、Mesh、Tree 等）

对于只想要一些东西的人来说，这似乎是很多工作，甚至可能很简单，以并行方式完成（例如并行）。

这需要做很多工作，尤其是如果您更改拓扑（这样您就可以拥有它的所有优势）。

因此，您编写并行代码（无论是简单的还是复杂的），VM 或编译器将选择似乎是最好的方法，**甚至以顺序方式运行它！**（一个例子是 .net 的任务并行库）

**重要编辑：**

我应该提一下，我说的是程序/算法中的并发，而不是系统中运行的独立程序之间的并发。

你之前这么说

> 众所周知，并发是将复杂问题分解为更小的组件。如果你不能正确地将某些东西分成更小的部分，那么使用并发很难解决它

但是错误的 b/c**那些较小的组件可能会以顺序的方式相互依赖**来完成，因此即使您分成小组件，也并不意味着您实现了并发/并行。

**在我所有的并行和分布式算法类中**（在 BS 和 MS 中），我们从未谈论过“*我们获得的并发性，现在让我们看看如何获​​得并行性*”。如果您使用并发这个词来描述和算法，那么您暗示并行性，反之亦然。

在文献中，您还会发现分布式和并行之间的细线。

从算法的角度来看，您可以使用并发、并行和分布式，并且您会得到相同的想法。

从实现的角度来看，如果说“并行”，通常是指在本地计算机或集群上运行的程序（共享内存通信），而在网格上运行程序时是“分布式”（消息传递通信） .

现在，分布式和并行性都意味着并发。

我认为您应该对这些术语的确切含义持怀疑态度，因为即使在文献中（我谈论的是实际上为该领域做出贡献的人，而不仅仅是某些语言的创造），它们也被用来表达抽象概念。

算法（无论是程序）的并发性意味着拥有可以独立于其他代码段运行的代码片段，即使它们最终会等待其他一些代码片段（检查阿姆达尔定律以准确了解这一点）。

因此，每当您在算法/程序中具有并发性时，您也具有并行性。

我认为最好只实现一些并行和分布式算法以更好地理解其背后的想法。如果您了解 C/C++，则可以将 OpenMPI 用于分布式（消息传递）实现，将 OpenMP 用于并行（共享内存）实现。

**编辑：**

他还可以将并发作为抽象原则，将并行作为实现方式[共享内存，消息传递，两者之间的混合；内存访问类型（numa、uma 等）]。

# c# - 如何比较图像（缓存图像）？

> ID：11700955
> 
> 赞同：0
> 
> 时间：2012-07-28T12:17:22.513
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我正在我的 Metro 风格应用程序中进行简单的图像缓存。这是我已经完成的：

```
 private async void GetImage()
    {
        bool isFolderExisting = true;
        bool isFileExisting = true;
        StorageFolder storageFolder = null;
        StorageFile storageFile = null;

        // get screenshots folder    
        try
        {
            storageFolder = await ApplicationData.Current.TemporaryFolder.GetFolderAsync("screenshots");
        }
        catch (System.IO.FileNotFoundException ex)
        {
            isFolderExisting = false;
        }
        // if folder doesn't exist, create new one
        if (isFolderExisting == false)
            storageFolder = await ApplicationData.Current.TemporaryFolder.CreateFolderAsync("screenshots");

        // get screenshot
        try
        {
            storageFile = await storageFolder.GetFileAsync(this.LinkId);
            //IAsyncAction threadPoolWorkItem = ThreadPool.RunAsync((source) => { updateImage(storageFile); });
        }
        catch (System.IO.FileNotFoundException ex)
        {
            isFileExisting = false;
        }

        // if file doesn't exists, download and save new one
        if (isFileExisting == false)
        {
            var uri = new Uri(WebServiceAddress + "/screenshot/" + this.LinkId, UriKind.Absolute);
            var thumbnail = Windows.Storage.Streams.RandomAccessStreamReference.CreateFromUri(uri);
            storageFile = await StorageFile.CreateStreamedFileFromUriAsync(this.LinkId, uri, thumbnail);
            await storageFile.CopyAsync(storageFolder, storageFile.Name, NameCollisionOption.ReplaceExisting);
        }

        //this.ImageSource = new Windows.UI.Xaml.Media.Imaging.BitmapImage(new Uri("ms-appdata:///temp/screenshots/" + this.LinkId)); 
        this.Image = "ms-appdata:///temp/screenshots/" + this.LinkId;
    } 
```

现在我必须处理比较图像的最后一部分。我正在检查临时文件夹中是否存在图像。如果它不存在，我只是在下载新的，但如果存在，我需要检查它是否与服务器上的相同。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:25:40.397

对 StorageFile 类使用[GetBasicPropertiesAsync方法。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.getbasicpropertiesasync.aspx)[BasicProperties](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.fileproperties.basicproperties.aspx)对象包含一个 DateModified 属性，您可以使用该属性在客户端和服务器之间进行比较。

# mysql - MYSQL 触发器生成 1329 错误

> ID：11700968
> 
> 赞同：0
> 
> 时间：2012-07-28T12:20:00.723
> 
> 标签：mysql, triggers, warnings

我有两张表，一张列出条目，另一张列出结果。

我正在尝试在条目表上创建一个 After 触发器，该触发器在结果表中创建相应的记录，如果该记录的所有条目信息都已完成。如果应创建结果表，则列队列不为 NULL。

```
IF (NEW.fleet IS NOT NULL) THEN

INSERT INTO race_results (race_id,yr,race_num,owner_id,checked_in,flt)VALUES(NEW.race_id,NEW.yr,NEW.race_num,NEW.owner_id,"N",NEW.fleet)ON DUPLICATE KEY UPDATE flt =NEW.fleet;

END IF 
```

此代码运行良好，除非它在 ​​NEW.fleet 等于 NULL 的行上运行时会引发 #1329 错误。

提前致谢。

根据输入，这是我最近的尝试。仍然不工作 桌球俱乐部只是一个不同的桌子，可以在最后进行成功的选择。

```
BEGIN
DECLARE clb INT(10);
declare exit handler for not found

IF (NEW.fleet IS NOT NULL) THEN

INSERT INTO race_results (race_id,yr,race_num,owner_id,checked_in,flt)
VALUES(NEW.race_id,NEW.yr,NEW.race_num,NEW.owner_id,"N",NEW.fleet)
ON DUPLICATE KEY UPDATE flt =NEW.fleet;

END IF;
SELECT club_id INTO clb from clubs WHERE club_id=1;
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:13:04.727

“不使用处理程序”

在存储过程中使用以下查询时出现空指针问题...

```
Select col1 into Var from table1; 
```

相反，我将其更改为

```
Set var = (select col1 from table1); 
```

在这里它不是致命的错误......

尝试将更新的（new.fleet）值存储在变量中，然后使用它..希望它应该解决。

# localhost - 使用 YSlow 在 localhost 上进行缓慢的 Internet 模拟

> ID：11700973
> 
> 赞同：0
> 
> 时间：2012-07-28T12:20:31.080
> 
> 标签：localhost, yslow

我想在我的本地服务器上创建缓慢的互联网模拟（我使用 xammp）。为此我为谷歌浏览器安装了YSlow，但我在这个程序中没有找到，如何进行缓慢的互联网速度模拟，有人可以帮助我吗？这是哪里的设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:03:51.760

YSlow 是一种根据一组性能规则测量网页的工具。尽管名称中有“慢”这个词，但它不是一个可以用来模拟慢速网络连接的工具。

以下是一些问答，涵盖了模拟慢速网络连接的不同选项：

*   [模拟慢速网络连接的网络工具](https://stackoverflow.com/questions/1094760/network-tools-that-simulate-slow-network-connection)
*   [模拟慢速 Internet 连接](https://stackoverflow.com/questions/3536249/simulating-slow-internet-connection)
*   [https://superuser.com/questions/297103/how-to-simulate-slow-internet-connection](https://superuser.com/questions/297103/how-to-simulate-slow-internet-connection)

# android - 设置android view可点击

> ID：11700975
> 
> 赞同：1
> 
> 时间：2012-07-28T12:21:01.310
> 
> 标签：android, view, clickable

我设置了启动活动，几秒钟后开始另一个活动。无论如何，我想再添加一项功能：不仅在 5 秒后开始第二个活动，而且在单击我的启动视图后开始。一旦我设置了下一个：

```
View v = (View)findViewById(R.layout.splash); 
    v.setOnClickListener(this);
    setContentView(v); 
```

代替

```
setContentView(R.layout.splash); 
```

我的项目没有运行。哪里有问题？

这是我的代码：

```
public class SlashC extends Activity implements Runnable, OnClickListener {
Thread timer;
MediaPlayer hTree;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    View v = (View)findViewById(R.layout.splash); // problems start here
    v.setOnClickListener(this);
    setContentView(v);

    hTree = MediaPlayer.create(this, R.raw.happy_tree);
    hTree.start();
    timer = new Thread(this);
    timer.start();

}
public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent class2 = new Intent("com.roger.calc.MainActivity");
    startActivity(class2);
}
public void run() {
    // TODO Auto-generated method stub
    try {
        timer.sleep(5000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally{
        Intent class2 = new Intent("com.roger.calc.MainActivity");
        startActivity(class2);
    }       
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    hTree.release();
    finish();
}} 
```

和 XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/splash2"
android:clickable="true" >
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T12:32:30.993

`android:clickable="true"`通过设置布局属性，`android:focusable="true"`以及`android:focusableInTouchMode="true"`从 xml 或`setClickable(true)`代码中使 LinearLayout 可点击。将 onClickListener 设置为

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/splash"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:focusableInTouchMode="true"
    android:clickable="true"
    android:focusable="true" 
    android:orientation="vertical"
    android:background="@drawable/splash2"/> 
```

在代码部分：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    ((LinearLayout)findViewById(R.id.splash)).setOnClickListener(this);

    /// YOUR CODE HERE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:25:27.290

可能是你在你的 xml 布局中遗漏了这个

```
android:id="@+id/splash" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T12:28:16.900

XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/splash2"
android:id="@+id/splash"
android:clickable="true" >
</LinearLayout> 
```

setContentView(R.layout.name);

线性布局 v = (LinearLayout)findViewById(R.layout.splash);

v.setOnClickListener(this);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-11T23:46:57.643

您不能在布局充气器之前`findViewById(int id)`使用set和布局。`setContentView()``android:clickable="true"``android:focusable="true"``android:focusableInTouchMode="true"`

# msbuild - Ajax Minifier：通过项目文件/ msbuild 任务组合时的 JS 文件重复

> ID：11700978
> 
> 赞同：0
> 
> 时间：2012-07-28T12:21:15.793
> 
> 标签：msbuild, projects-and-solutions, csproj, microsoft-ajax-minifier, ajaxmin

一段时间以来，我一直在尝试对我的 MVC3 项目进行缩小和捆绑，尝试了很多不同的压缩器和方法。我终于决定通过我的项目文件中的 msbuild 任务来使用 Microsoft Ajax Minifier。我对我的配置只有这么远，但我遇到了一个直接的绊脚石；当我将我的 JS 脚本缩小并组合到一个文件中时（使用下面的任务定义），我的组合文件总是包含每个脚本的两个缩小副本。

我已经删除了我添加的所有其他复杂的 msbuild 任务，删除了除了一个 JS 脚本之外的所有任务，它仍在发生。以下标签是我手动修改的项目文件的唯一部分：

```
<UsingTask TaskName="AjaxMin" AssemblyFile="$(MSBuildProjectDirectory)\..\_Build\AjaxMinTask.dll" />
<Target Name="AfterBuild">
    <ItemGroup>
        <JsFiles Include="**\res\js\libs\jquery.js" />
    </ItemGroup>
    <AjaxMin Switches="-global:jQuery,$" JsSourceFiles="@(JsFiles)" JsCombinedFileName="Combined.min.js" />
</Target> 
```

Combined.min.js 在我的 Web 项目的根目录中创建（如预期的那样），但它包含 jquery.js 文件的两个缩小副本。

我正在使用 Microsoft Visual Studio Ultimate 2012 RC（版本 11.0.50706.0 QRELRC，2012 年 7 月），并且参考“AjaxMinTask.dll”文件是来自[此处](http://ajaxmin.codeplex.com/releases/view/91030)的最新版本 (4.59.4576.13505) 。

现在，这是最奇怪的事情。此外，我在 VS 2010 和 VS 2012 中都创建了全新的 MVC3 项目，并将上述行复制并粘贴到他们的项目文件中 - 仅更改 AjaxMinTask.dll 的路径（使用与损坏的项目相同的路径）和JQuery 文件 (\scripts\jquery..js) 的路径，***它们工作得很好***。

不幸的是，我无法粘贴项目文件，因为它对于堆栈溢出来说太长了，所以我将它与我试图缩小/组合的原始 jquery 文件、生成的“缩小”文件和我的 AjaxMin 程序集一起压缩正在使用：

[网址已编辑]

或者，我非常愿意接受任何其他建议的方法，当我使用 .Net 4.0 和 MVC 3 在 Visual Studio 2012 中以发布模式构建时，这些方法将允许我缩小/合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:27:24.010

好吧，这是一个奇怪的问题......我已经设法通过将“js”目录更改为另一个名称（“javascript”）来解决这个问题（经过几天的烦恼！）：

```
<JsFiles Include="**\res\javascript\libs\jquery.js" /> 
```

或从路径的开头删除“**\”：

```
<JsFiles Include="res\js\libs\jquery.js" /> 
```

我怀疑这是某种错误。

# php - 出现错误“列计数与第 1 行的值计数不匹配”，但列 = 行

> ID：11700982
> 
> 赞同：-1
> 
> 时间：2012-07-28T12:22:02.000
> 
> 标签：php, mysql

正如标题所示，我收到“列数与第 1 行的值计数不匹配”错误。在将我想发送到数据库的值与我的数据库进行比较并且没有发现错误之后，我查看了互联网并尝试了各种解决方案。到目前为止，他们都没有工作。我也尝试使用 SET 而不是 VALUES。像 'Passwort' = '$passwort' - 也没有成功。这是我的代码，也许有人发现了我错过的明显错误？

```
 $name = ($_GET["name"]);
 $sql = "INSERT INTO $DB_Table VALUES('$name')";

 $passwort = ($_GET["passwort"]);
 $sql = "INSERT INTO $DB_Table VALUES('$passwort')";

 $con = mysql_connect($DB_HostName,$DB_User,$DB_Pass) or die (mysql_error()); 
 mysql_select_db($DB_Name,$con) or die(mysql_error()); 
 mysql_set_charset('utf8', $con);

 mysql_query("INSERT INTO $DB_Table (Name,Passwort) VALUES ('$name','$passwort')");
 $res = mysql_query($sql,$con) or die(mysql_error());
 mysql_close($con);
if ($res) {
    echo "Der Benutzer wurde neu angelegt!";
}else{
    echo "Der Benutzername ist bereits vergeben";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:25:56.563

好的，你应该改变一些事情。要回答您的问题，您的变量之一在插入时可能为空。

话虽如此，您的代码很容易受到注入攻击。在将变量放入数据库之前检查它们。如果我输入我的名字为“Tom; drop table users;”，你会怎么做？而你的代码刚刚运行它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:29:01.257

```
$sql = "INSERT INTO $DB_Table VALUES('$name')";

$sql = "INSERT INTO $DB_Table VALUES('$passwort')"; 
```

在这里你只是覆盖了前一个变量，那么拥有前一个变量有什么意义呢？

然后您尝试执行查询，该查询将失败，因为该表有更多列。

```
$res = mysql_query($sql,$con) or die(mysql_error()); 
```

我什至不知道你为什么要这样做，因为上一行已经插入了。你是故意的吗？：

```
$sql = "INSERT INTO $DB_Table (Name,Passwort) VALUES ('$name','$passwort')");
$res = mysql_query($sql,$con) or die(mysql_error()); 
```

话虽如此，您的代码很容易受到 SQL 注入攻击，而且它使用的是旧的 mysql 接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T12:30:58.700

明显的错误是您只为至少有两列的表插入一个值。在行

```
$res = mysql_query($sql,$con) or die(mysql_error()); 
```

$sql 包含字符串

```
"INSERT INTO $DB_Table VALUES('$passwort')"; 
```

# xcode - Macosx 10.7 sdk 无法找到“stdarg.h”

> ID：11700983
> 
> 赞同：2
> 
> 时间：2012-07-28T12:22:02.933
> 
> 标签：xcode, intel, core-foundation

嗨，我有一个可以用 10.6 sdk 编译的项目。我在狮子的 xcode 3 上。我用icc编译。

现在我想将它传递给 10.7 sdk，但我有这个错误：

/Applications/XCode3/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/CoreFoundation.framework/Headers/CoreFoundation.h:12:0 灾难性错误：无法打开源文件“stdarg.h”

我试图手动查找并设置该文件的路径（有很多），但它给了我更多和更多的错误。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T02:20:13.643

在 sdk 10.7 stdarg.h 中不存在。您有两种方法：从源中删除 #include 或复制/创建新的，如下所示：

```
/* This file is public domain.  */
/* GCC uses its own copy of this header */
#if defined(__GNUC__)
//#include_next <stdarg.h> /* originaly uncomment */
#elif defined(__MWERKS__)
#include "mw_stdarg.h"
#else
//#error "This header only supports __MWERKS__." /* originaly uncomment */
#endif 
```

ICC 2011 不包含此内容。在 BSD 中看起来像这样，但取消注释。

编辑：或者尝试不使用 ICC_PRECOMPILE_PREFIX_HEADER = YES

旧源 stdarg.h

```
 /* Copyright (C) 1989, 1997, 1998, 1999, 2000 Free Software Foundation, Inc.

This file is part of GCC.

GCC is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2, or (at your option)
any later version.

GCC is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with GCC; see the file COPYING.  If not, write to
the Free Software Foundation, 59 Temple Place - Suite 330,
Boston, MA 02111-1307, USA.  */

/* As a special exception, if you include this header file into source
   files compiled by GCC, this header file does not by itself cause
   the resulting executable to be covered by the GNU General Public
   License.  This exception does not however invalidate any other
   reasons why the executable file might be covered by the GNU General
   Public License.  */

/*
 * ISO C Standard:  7.15  Variable arguments  <stdarg.h>
 */

#ifndef _STDARG_H
#ifndef _ANSI_STDARG_H_
#ifndef __need___va_list
#define _STDARG_H
#define _ANSI_STDARG_H_
#endif /* not __need___va_list */
#undef __need___va_list

/* Define __gnuc_va_list.  */

#ifndef __GNUC_VA_LIST
#define __GNUC_VA_LIST
typedef __builtin_va_list __gnuc_va_list;
#endif

/* Define the standard macros for the user,
   if this invocation was from the user program.  */
#ifdef _STDARG_H

#define va_start(v,l)   __builtin_va_start(v,l)
#define va_end(v)   __builtin_va_end(v)
#define va_arg(v,l) __builtin_va_arg(v,l)
#if !defined(__STRICT_ANSI__) || __STDC_VERSION__ + 0 >= 199900L
#define va_copy(d,s)    __builtin_va_copy(d,s)
#endif
#define __va_copy(d,s)  __builtin_va_copy(d,s)

/* Define va_list, if desired, from __gnuc_va_list. */
/* We deliberately do not define va_list when called from
   stdio.h, because ANSI C says that stdio.h is not supposed to define
   va_list.  stdio.h needs to have access to that data type, 
   but must not use that name.  It should use the name __gnuc_va_list,
   which is safe because it is reserved for the implementation.  */

#ifdef _HIDDEN_VA_LIST  /* On OSF1, this means varargs.h is "half-loaded".  */
#undef _VA_LIST
#endif

#ifdef _BSD_VA_LIST
#undef _BSD_VA_LIST
#endif

#if defined(__svr4__) || (defined(_SCO_DS) && !defined(__VA_LIST))
/* SVR4.2 uses _VA_LIST for an internal alias for va_list,
   so we must avoid testing it and setting it here.
   SVR4 uses _VA_LIST as a flag in stdarg.h, but we should
   have no conflict with that.  */
#ifndef _VA_LIST_
#define _VA_LIST_
#ifdef __i860__
#ifndef _VA_LIST
#define _VA_LIST va_list
#endif
#endif /* __i860__ */
typedef __gnuc_va_list va_list;
#ifdef _SCO_DS
#define __VA_LIST
#endif
#endif /* _VA_LIST_ */
#else /* not __svr4__ || _SCO_DS */

/* The macro _VA_LIST_ is the same thing used by this file in Ultrix.
   But on BSD NET2 we must not test or define or undef it.
   (Note that the comments in NET 2's ansi.h
   are incorrect for _VA_LIST_--see stdio.h!)  */
#if !defined (_VA_LIST_) || defined (__BSD_NET2__) || defined (____386BSD____) || defined (__bsdi__) || defined (__sequent__) || defined (__FreeBSD__) || defined(WINNT)
/* The macro _VA_LIST_DEFINED is used in Windows NT 3.5  */
#ifndef _VA_LIST_DEFINED
/* The macro _VA_LIST is used in SCO Unix 3.2\.  */
#ifndef _VA_LIST
/* The macro _VA_LIST_T_H is used in the Bull dpx2  */
#ifndef _VA_LIST_T_H
/* The macro __va_list__ is used by BeOS.  */
#ifndef __va_list__
typedef __gnuc_va_list va_list;
#endif /* not __va_list__ */
#endif /* not _VA_LIST_T_H */
#endif /* not _VA_LIST */
#endif /* not _VA_LIST_DEFINED */
#if !(defined (__BSD_NET2__) || defined (____386BSD____) || defined (__bsdi__) || defined (__sequent__) || defined (__FreeBSD__))
#define _VA_LIST_
#endif
#ifndef _VA_LIST
#define _VA_LIST
#endif
#ifndef _VA_LIST_DEFINED
#define _VA_LIST_DEFINED
#endif
#ifndef _VA_LIST_T_H
#define _VA_LIST_T_H
#endif
#ifndef __va_list__
#define __va_list__
#endif

#endif /* not _VA_LIST_, except on certain systems */

#endif /* not __svr4__ */

#endif /* _STDARG_H */

#endif /* not _ANSI_STDARG_H_ */
#endif /* not _STDARG_H */ 
```

# css - Margin-Top 不适用于 span 元素？

> ID：11700985
> 
> 赞同：234
> 
> 时间：2012-07-28T12:22:17.440
> 
> 标签：css, margin, html

有人可以告诉我我编码错误吗？一切正常，唯一的问题是顶部没有边距。

**HTML**：

```
<div id="contact_us"> <!-- BEGIN CONTACT US -->
  <span class="first_title">Contact</span>
  <span class="second_title">Us</span>
  <p class="content">For any questions whatsoever please contact us through the following e-mail address:</p></br></br>
  <p class="e-mail">info@e-mail.com</p></br></br></br></br>
  <p class="read_more"><a href="underconstruction.html">Read More</a></p>
</div> <!-- END CONTACT US --> 
```

**CSS**：

```
span.first_title {
  margin-top: 20px;
  margin-left: 12px;
  font-weight: bold;
  font-size: 24px;
  color: #221461;
}

span.second_title {
  margin-top: 20px;
  font-weight: bold;
  font-size: 24px;
  color: #b8b2d4;
} 
```

* * *

## 回答 #1

> 赞同：368
> 
> 时间：2012-07-28T12:25:01.763

与¹`div`不同，它是可以占据所有边的[块级元素，](http://www.w3.org/TR/CSS2/visuren.html#block-boxes) ²不能，因为它是仅水平占据边距的[内联元素。](http://www.w3.org/TR/CSS2/visuren.html#inline-boxes)`p` ^(`margin``span`)

从[规范](http://www.w3.org/TR/CSS21/box.html#margin-properties)：

> 边距属性指定框的边距区域的宽度。'margin' 速记属性设置所有四个边的边距，而其他边距属性只设置它们各自的边。这些属性适用于所有元素，但垂直边距不会对未替换的内联元素产生任何影响。

[演示 1](http://jsfiddle.net/Z9VJS/)（垂直`margin`不作为`span`元素`inline`应用）

解决方案？制作你的`span`元素，`display: inline-block;`或`display: block;`.

[演示 2](http://jsfiddle.net/Z9VJS/1/)

建议您使用`display: inline-block;`，因为它会`inline`和`block`. 只制作它`block`会导致您的元素[*在另一行*](http://jsfiddle.net/Z9VJS/2/)上渲染，因为`block`水平元素会占用`100%`页面上的水平空间，除非它们是制作的`inline-block`或它们是`floated`或`left`的`right`。

* * *

^(1.[块级元素](https://developer.mozilla.org/en-US/docs/HTML/Block-level_elements)- MDN Source)

^(2.[内联元素](https://developer.mozilla.org/en-US/docs/HTML/Inline_elements)- MDN 资源)

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2015-08-11T18:53:17.403

看起来您错过了一些选项，请尝试添加：

```
position: relative;
top: 25px; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-28T12:24:11.827

`span`是不支持垂直边距的内联元素。把边距放在外面`div`。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-10-17T05:23:34.773

`span``display:inline;`默认情况下，您需要制作元素，`inline-block`或者`block`

将您的 CSS 更改为这样

```
span.first_title {
    margin-top: 20px;
    margin-left: 12px;
    font-weight: bold;
    font-size:24px;
    color: #221461;
    /*The change*/
    display:inline-block; /*or display:block;*/
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-16T16:11:00.883

永远记住一件事：我们不能将边距垂直应用于内联元素。如果要应用垂直边距，请将其显示类型更改为`block`或`inline-block`

```
span {
    display: inline-block;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-08T17:14:54.027

`<span>`tag 不接受 `margin`,`padding`你需要添加一些 css 样式并将你的`<span>`标签设置为`block`or`inline-block`才能使用`margin`, `padding`for`<span>`标签，但最好的使用方式是`div`tag

```
span{ display:inline-block or block;} 
```

# java - 如何在 android 中检索 facebook 用户名和通知？

> ID：11700991
> 
> 赞同：0
> 
> 时间：2012-07-28T12:23:29.717
> 
> 标签：java, android, facebook

您好，我需要从 facebook 个人资料中检索用户名和通知，这是我的 facebook 连接器代码：

```
import com.FeedPass.SessionEvents.AuthListener;
import com.FeedPass.SessionEvents.LogoutListener;

public class FacebookConnector {
private Facebook facebook = null;
private Context context;
private String[] permissions;
private Handler mHandler;
private Activity activity;
private SessionListener mSessionListener = new SessionListener();
private String _accessToken;

public FacebookConnector(String appId,Activity activity,Context context,String[] permissions){
    this.facebook = new Facebook(appId);

    SessionStore.restore(facebook, context);

    SessionEvents.addAuthListener(mSessionListener);
    SessionEvents.addLogoutListener(mSessionListener);
    this.context=context;
    this.permissions=permissions;
    this.mHandler = new Handler();
    this.activity=activity;
}

public void login() {
    if (!facebook.isSessionValid()) {
        facebook.authorize(this.activity, this.permissions,new LoginDialogListener());
    }
}

public void logout() {
    SessionEvents.onLogoutBegin();
    AsyncFacebookRunner asyncRunner = new AsyncFacebookRunner(this.facebook);
    asyncRunner.logout(this.context, new LogoutRequestListener());
}

public void postMessageOnWall(String msg) {
    if (facebook.isSessionValid()) {
        Bundle parameters = new Bundle();
        parameters.putString("message", msg);
        try {
            String response = facebook.request("me/feed", parameters,"POST");
            System.out.println(response);
        } catch (IOException e) {
            e.printStackTrace();
        }
    } else {
        login();
    }
}   

public String getNotifications(){
    String result = null;
    if(facebook.isSessionValid()){
        Bundle bundle = new Bundle();
        bundle.putString(Facebook.TOKEN, _accessToken);
        try{
            result = facebook.request("me/notifications", bundle, "GET");
        }
        catch(IOException e){
            e.printStackTrace();
        }
    }
    else{
        login();
    }
    return result;
}

private final class LoginDialogListener implements DialogListener {
    public void onComplete(Bundle values) {
        SessionEvents.onLoginSuccess();
    }

    public void onFacebookError(FacebookError error) {
        SessionEvents.onLoginError(error.getMessage());
    }

    public void onError(DialogError error) {
        SessionEvents.onLoginError(error.getMessage());
    }

    public void onCancel() {
        SessionEvents.onLoginError("Action Canceled");
    }
}

public class LogoutRequestListener extends BaseRequestListener {
    public void onComplete(String response, final Object state) {
        // callback should be run in the original thread, 
        // not the background thread
        mHandler.post(new Runnable() {
            public void run() {
                SessionEvents.onLogoutFinish();
            }
        });
    }
}

private class SessionListener implements AuthListener, LogoutListener {

    public void onAuthSucceed() {
        SessionStore.save(facebook, context);
    }

    public void onAuthFail(String error) {
    }

    public void onLogoutBegin() {           
    }

    public void onLogoutFinish() {
        SessionStore.clear(context);
    }
}

public Facebook getFacebook() {
    return this.facebook;
}
} 
```

如您所见，我有一种检索用户通知的方法，但我不确定它是否有效，有人知道如何以简单的方式执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:28:51.557

您可以从中获取 facebook 用户名

```
String User_name = null; 
try {
    User_name = new JSONObject(facebook.request("username"));

} catch (MalformedURLException e) {
    e.printStackTrace();
} catch (JSONException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:27:17.530

您可以使用以下代码检索 facebook 用户的名称：

```
public static String getName() {
        String response;
        String name = "";
        try {
            response = ParseFacebookUtils.getFacebook().request("me");
            JSONObject json = Util.parseJson(response);
            name = json.getString("first_name");
        } 
        catch (MalformedURLException e) {
            e.printStackTrace();
        } 
        catch (IOException e) {
            e.printStackTrace();
        } 
        catch (FacebookError e) {
            e.printStackTrace();
        } 
        catch (JSONException e) {
            e.printStackTrace();
        }

        return name;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T21:31:00.307

这就是您检索通知的方式。即使这是一个老问题。我会发布它以防有人发现它有帮助

```
private void onSessionStateChange(Session session, SessionState state, Exception exception) {
if (state.isOpened()) {
    InboxMessage.setVisibility(View.VISIBLE);

    new Request(session,"/me/notifications", null,HttpMethod.GET,new Request.Callback() {

                public void onCompleted(Response response) {
                    GraphObject object = response.getGraphObject();
                        if (object != null) {
                            InboxMessage.setText(object.getProperty("data").toString());
                        } else {
                            InboxMessage.setText("Notifications returns null");
                        }
                }
            }
        ).executeAsync();
} else {
    InboxMessage.setVisibility(View.INVISIBLE);
    Log.i(TAG, "Logged out...");
}
} 
```

# css - 通过 CSS 修改父元素来影响子元素。是否可以？

> ID：11700993
> 
> 赞同：5
> 
> 时间：2012-07-28T12:23:52.353
> 
> 标签：css, hover

也许这是一个愚蠢的问题，但我相信它对许多初学者很有用。我已经构建了一个代码。我要做的是仅在实际悬停时才显示`<p>`当前隐藏的文本（在标签中） 。`<a>`没有js可以吗？可以只对css/html进行操作吗？html代码在这里：

```
 <div class="promo2">
                    <a href="speakers-hire.html">
                        <div class="promo2a">
                            <p>SPEAKERS</p>
                        </div>
                    </a>

                    <a href="decks-hire.html">
                         <div class="promo2a">
                            <p>CD PLAYERS</p>
                        </div>
                    </a>

                </div> 
```

以及对应于上述html的css：

```
.promo2a:hover{
background:url(../_images/generic/glass5.png);
display:inline-block; 
```

}

```
.promo2a p{
display:none; 
```

}

所以基本上我希望在`<p>`整个 div`promo2a`悬停时显示文本。

任何帮助都将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-28T12:27:14.003

尝试

```
.promo2a:hover > p {display:block;} 
```

或任何适合您的需求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:28:12.610

你已经很接近了，我只需要使用 :hover 来显示，例如：

```
.promo2a:hover p { display: block; } 
```

# jquery - 将最后一个孩子移动到第一个位置

> ID：11700995
> 
> 赞同：8
> 
> 时间：2012-07-28T12:24:04.947
> 
> 标签：jquery

我的 HTML：

```
 <div id="my-slider">
    <img src="/slider/pic/bf3.jpg" alt="picture">
    <img src="/slider/pic/bf3_cq.jpg" alt="picture">
    <!-- etc -->
  </div> 
```

在特定事件中，我想将最后一个 img 标签移动到第一个位置（根据父级）

我尝试：

```
 curr.css('left', 0);
    curr.prepend(curr.parent()); 
```

我可以更改 css，但第二行引发错误：

> HierarchyRequestError：无法在层次结构中的指定点插入节点

有人可以给我任何建议吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-28T12:27:24.107

```
curr.parent().prepend(curr); 
```

或者

```
curr.prependTo(curr.parent()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T12:30:52.493

您可以使用`prepend()`：

```
$('#my-slider').prepend($('#my-slider img:last')) 
```

[http://jsfiddle.net/Uttv8/](http://jsfiddle.net/Uttv8/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-28T12:32:49.870

试试这个 [http://jsfiddle.net/uttara/TFYXA/](http://jsfiddle.net/uttara/TFYXA/)

```
$("#my-slider img:last-child").prependTo("#my-slider") 
```

# java - Tomcat7无法在eclipse indigo上启动

> ID：11700998
> 
> 赞同：0
> 
> 时间：2012-07-28T12:24:39.073
> 
> 标签：java, tomcat7

在eclipse中声明新服务器并运行它之后..tomcat 7无法启动并在控制台中打印：

```
Starting Servlet Engine: Apache Tomcat/7.0.12
java.lang.NoSuchMethodError: javax.servlet.ServletContext.getSessionCookieConfig()Ljavax/servlet/SessionCookieConfig;
    at org.apache.catalina.deploy.WebXml.configureContext(WebXml.java:1281)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1332)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:882)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:317)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5081)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:620)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:11:07.517

正如其他人所指出的，您的类路径中可能有旧版本`servlet-api.jar`。您可以打开详细类加载（VM 参数`-verbose:class`）以查看从哪个 .jar 文件`javax.servlet.ServletContext`加载。Tomcat 7 使用 API 版本 3.0。在我们的（测试）案例中，类路径中有 2.4 版；在surefire插件（我们是基于Maven的）的测试类路径中排除它工作，即`<classpathDependencyExcludes>javax.servlet:servlet-api</classpathDependencyExcludes>`. Tomcat 7 然后选择了自己的兼容版本。如果您需要在类路径中有 .jar，您可以获得与这些 Maven 工件坐标兼容的 .jar `javax.servlet:javax.servlet-api:3.0.1`。