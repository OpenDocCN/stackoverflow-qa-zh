# StackOverflow 问答 11500000-11500999

# grails - 将数据库相关代码放在 Grails 中的什么位置

> ID：11500002
> 
> 赞同：0
> 
> 时间：2012-07-16T07:42:00.457
> 
> 标签：grails, grails-2.0

我有一段连接到数据库并执行查询的代码，我不清楚放置此代码（模型/服务）。

```
def value
def url      = ConfigurationHolder.config.dataSource.url
def username = ConfigurationHolder.config.dataSource.username
def password = ConfigurationHolder.config.dataSource.password
def driver   = ConfigurationHolder.config.dataSource.driverClassName
def sql      = Sql.newInstance(url, username, password, driver)

sql.eachRow("select field_value from application_configuration where field_name=?", [field]) {
        value=it.field_value
} 
```

我有一个名为 ApplicationConfiguaration 的类，我在这个域上进行查询。

我有两个疑问

1) 数据库连接逻辑放在哪里 2) 查询执行逻辑放在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:19:43.073

如果您还没有创建域对象来表示`application_configuration`，您应该考虑这一点，并使用[域对象查找器](http://grails.org/doc/latest/guide/GORM.html#finders)或[HQL](http://grails.org/doc/latest/guide/GORM.html#hql)。

如果您需要在 GORM 之外执行查询，它可能应该放在服务中。请注意，可以将 DataSource 对象自动注入到您的服务中，并且可以直接从中创建 Sql 对象。你可以有这样的东西：

```
import groovy.sql.Sql

class ApplicationConfigurationService {
    def dataSource

    def valueForName(name) {
        def sql = new Sql(dataSource)

        sql.eachRow(...) {
            value=it.field_value
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T07:48:14.087

查询执行在服务端进行。

视图与控制器交互，这个与服务交互，最后一个与数据库的数据进行交互，将其映射到定义的模型对象。

数据库连接登录继续 DataSource.groovy con /Conf

```
DataSource {
pooled = true
driverClassName = "com.mysql.jdbc.Driver"
}
hibernate {
cache.use_second_level_cache=true
cache.use_query_cache=true
cache.provider_class='net.sf.ehcache.hibernate.EhCacheProvider'
}
// environment specific settings
environments {
development {
    dataSource {
        dbCreate = "update" // one of 'create', 'create-drop','update'
        url = "jdbc:mysql://localhost:3306/"
        username=""
        password=""
    }
}
test {
    dataSource {
        dbCreate = "update"
        url = "jdbc:mysql://localhost:3306/"
        username=""
        password=""

    }
}
production {
    dataSource {
        dbCreate = "update"
        jndiName = "java:comp/env/"
    }
}
} 
```

# android - Android ListView 平滑导航，而来自 SDCard 的图像

> ID：11500003
> 
> 赞同：1
> 
> 时间：2012-07-16T07:42:17.957
> 
> 标签：android, listview

我看到了很多从网络平滑下载图像并在带有缓存的 listView 中显示它们的实现。现在我有以下情况：我将图像存储到 SDCard，有时我的 listView 显示它们而不是来自网络资源的图像。在这种情况下，listView 中的导航不流畅。您知道使用 sdCard 中的图像的 listView 有什么好的实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:51:18.143

多线程就是答案！ [http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html) 只是忽略下载的部分，但想法是一样的！

然后检查此代码： [ListView 中的图像延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)

# mysql - Rails 中的批处理

> ID：11500005
> 
> 赞同：0
> 
> 时间：2012-07-16T07:42:29.983
> 
> 标签：mysql, sql, ruby-on-rails, ruby, batch-processing

轨道查询：

```
 Detail.created_at_gt(15.days.ago.to_datetime).find_each do |d|
      //Some code
  end 
```

等效的mysql查询：

```
 SELECT * FROM `details` WHERE (details.id >= 0) AND
                 (details.created_at > '2012-07-01 12:22:32')
                  ORDER BY details.id ASC LIMIT 1000 
```

通过在 rails 中使用 find_each 它检查 details.id >= 0 并按升序排列细节。

在这里，我想避免这两个操作，因为在我的情况下，当我有大量数据要处理（即）created_at 上的索引失败时，它正在扫描整个表。所以这样做是低效的。请任何人帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:12:47.450

在这里，您`find_in_batches`使用的来源`find_each`：

[http://apidock.com/rails/ActiveRecord/Batches/find_in_batches](http://apidock.com/rails/ActiveRecord/Batches/find_in_batches)

单击**显示源**链接。基本线路是：

```
relation = relation.reorder(batch_order).limit(batch_size)
records = relation.where(table[primary_key].gteq(start)).all 
```

和

```
records = relation.where(table[primary_key].gt(primary_key_offset)).to_a 
```

您必须按主索引或其他唯一索引对记录进行排序，以便批量处理并选择下一批。您不能按批次进行，`created_at`因为它不是唯一的。但是您可以混合排序`created_at`和选择 unique `id`：

```
relation = relation.reorder('created_at ASC, id ASC').limit(batch_size)
records = relation.where(table[primary_key].gteq(start)).all

#....

while records.any?
    records_size = records.size
    primary_key_offset = records.last.id
    created_at_key = records.last.created_at

    yield records

    break if records_size < batch_size

    if primary_key_offset
      records = relation.where('created_at>:ca OR (created_at=:ca AND id>:id)',:ca=>created_at_key,:id=>primary_key_offset).to_a
    else
      raise "Primary key not included in the custom select clause"
    end
end 
```

如果您绝对确定没有具有相同`created_at`值的记录将重复`bach_size`多次，您可以将其`created_at`用作批处理中的唯一键。

无论如何，您需要索引`created_at`才能有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:03:07.093

```
Detail.where('created_at > ? AND id < ?', 15.days.ago.to_datetime, 1000).order('details.id ASC') 
```

你不必`details.id >= 0`像 Rails 默认为你做的那样显式地检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:26:49.793

如果您将使用范围和 ARel 风格的查询，那就更好了：

```
class Detail < ActiveRecord::Base
  table = self.arel_table

  scope :created_after, lambda { |date| where(table[:created_at].gt(date)).limit(1000) }
end 
```

您可以找到在某个日期之后创建的 1000 条记录：

```
@details = Detail.created_after(15.days.ago.to_date_time) 
```

# c# - 将DataGridView表单form2的一个单元格传递给form1的文本框

> ID：11500015
> 
> 赞同：0
> 
> 时间：2012-07-16T07:43:11.657
> 
> 标签：c#, visual-studio-2010

我的 Form2 上有一个 DataGridView，form1 上有一个文本框。当我单击 DataGridView 行之一时，我想在 form1 的 texboxes 中显示 DataGridView 副本的每个单元格。

我试图将文本框的类型更改为“公共”，然后我在 form2 中写了这个：

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    if (e.RowIndex < 0 || e.ColumnIndex < 0)
       return;

    Form1 fr1 = new Form1();
    fr1.textBox1.Text = "123";  
    Form2.ActiveForm.Close();
} 
```

但在 form1 的 texbox1 中没有复制任何内容。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:47:25.007

这是一个常见的错误：

线

```
Form1 fr1 = new Form1(); 
```

创建 Form1 的新实例，并且 var fr1 不引用显示的原始 Form1。
要解决此类问题，您需要将 Form1 的原始实例传递给 Form2 的构造函数，将引用保存在全局实例 var 中并在 form2 中使用该引用。例如：

调用：Form2 fr2 = new Form2(this)

FORM2 构造函数：

```
public class Form2 : Form
{
     private Form1 _caller = null;

     public Form2(Form1 f1)
     { 
         _caller = f1;
     }
} 
```

DATAGRIDVIEW_CELLCLICK

```
private void dataGridView1_CellClick(....)
{
    if (e.RowIndex < 0 || e.ColumnIndex < 0)     
       return;     

    _caller.textBox1.Text = "123";       
    this.Close();
} 
```

# python - Google API 服务帐号

> ID：11500018
> 
> 赞同：0
> 
> 时间：2012-07-16T07:43:30.207
> 
> 标签：python, google-api, google-api-python-client

我正在尝试使用 python 客户端库通过服务帐户（客户端电子邮件和 p12 证书）连接到 google doubeclick api，如下例所示：

[http://code.google.com/p/google-api-python-client/source/browse/samples/service_account/tasks.py](http://code.google.com/p/google-api-python-client/source/browse/samples/service_account/tasks.py)

它返回给我一个空的 access_token：

```
In [9]: type(credentials.access_token)
Out[9]: <type 'NoneType'> 
```

这有什么意义？有什么我可能做错了吗？我也尝试过访问示例中的任务 api（认为双击 api 可能不是受支持的范围），但结果相同。

**更新（示例代码）：**

```
from oauth2client.client import SignedJwtAssertionCredentials
import httplib2
from adspygoogle.dfp import DfpClient

f = file('/path/to/.ssh/google-api.p12', 'rb')
key = f.read()
f.close()

credentials = SignedJwtAssertionCredentials('<email>', key, scope='https://www.google.com/apis/ads/publisher')
credentials.refresh(http)
http = httplib2.Http()
http = credentials.authorize(http)

client = DfpClient.DfpClient(headers={'networkCode': '<code>', 'applicationName': 'test', 'userAgent': 'test', 'oauth2credentials': credentials})

inventory_service = client.GetInventoryService()
inventory_service.getAdUnitsByStatement({'query':''}) 
```

**错误：**

`DfpAuthenticationError: [AuthenticationError.NO_NETWORKS_TO_ACCESS @ ]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:59:16.407

NO_NETWORKS_TO_ACCESS 错误特别表示您确实对 API 端点进行了身份验证，但您的帐户未与网络关联。[在此页面https://developers.google.com/doubleclick-publishers/docs/reference/v201203/InventoryService?hl=en](https://developers.google.com/doubleclick-publishers/docs/reference/v201203/InventoryService?hl=en)上搜索该错误。

您需要通过 DoubleClick 用户界面邀请您正在验证的 Google 帐户加入网络，或者您需要使用模拟。

最近在文档中发布了有关 DFP API 和服务帐户的更具体的文章[https://developers.google.com/doubleclick-publishers/docs/service_accounts](https://developers.google.com/doubleclick-publishers/docs/service_accounts)。我建议您查看该文档的替代部分，以确定您是否更喜欢安装 OAuth 2.0 的流程。

# asp.net-mvc - asp.net mvc 中的外键

> ID：11500020
> 
> 赞同：0
> 
> 时间：2012-07-16T07:43:32.717
> 
> 标签：asp.net-mvc, dependency-injection, repository-pattern, asp.net-mvc-4

我有一个视图，我想在其中显示对一本书的评论。我渲染了我展示这样一本书的视图：

```
public ActionResult Show(int id)
    {
        var model = _repository.GetSeriesById(id);
        return View(model);
    } 
```

在视图中，我使用模型显示评论。（系列有评论，评论有用户ID）。

```
@model Models.Series @{

var comments = Model.Comments.ToList(); 
```

}

然后我可以循环浏览评论以显示消息等。

```
 @foreach(var comment in comments)
    {

   @comment.Created 
    @comment.Message  

     } 
```

我的问题是当我尝试这样做时：

```
@comment.User.id 
```

我得到一个空引用错误。我了解您可以使用存储库中的 include 属性来包含如下外键：

```
var comments = _db.Comments.Include("User").Where(sId => sId.Id == seriesId).ToList(); 
```

但是由于我发送的是系列模型，因此无法在我的控制器中执行此操作。那么如何在我的视图中显示发布评论的用户呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:51:44.430

看起来您正在使用实体框架？在运行实际查询时，您应该包括您的外键依赖对象。当您在视图中执行此操作时为时已晚，查询已经返回而未加载外键关系。

# javascript - facebook从javascript设置流体

> ID：11500022
> 
> 赞同：0
> 
> 时间：2012-07-16T07:43:45.760
> 
> 标签：javascript, facebook, canvas, size

> **可能重复：**
> [如何在 facebook 应用程序中动态增加高度](https://stackoverflow.com/questions/11323299/how-to-dynamically-increse-the-height-in-facebook-app)

我正在为 Facebook 开发 Flash 应用程序，流畅的布局最适合我，除非我的用户分辨率很小，我希望 Facebook 具有画布大小的最小属性。

因此，在他们实施之前，我希望从 JavaScript 更改我的画布设置，是否可以动态设置我的画布设置大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:07:42.660

我不这么认为。但是，您应该能够使用这些方法[`FB.Canvas.setSize`](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setSize/)并[`FB.Canvas.setAutoGrow`](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setAutoGrow/)根据用户分辨率来实现您想要的用户体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:59:23.163

我已经在这里回答了一个类似的问题：
[how to dynamic increse the height in facebook app](https://stackoverflow.com/questions/11323299/how-to-dynamically-increse-the-height-in-facebook-app/11324976#11324976)

您必须设置`FB.Canvas.setSize()`并稍后检查画布是否已加载，`FB.Canvas.setDoneLoading()`并且在响应中您可以运行`FB.Canvas.setAutoGrow()`

一个例子：

```
FB.Canvas.setSize({ width: 810, height: 950 });

FB.Canvas.setDoneLoading( function(response) {
    console.log(response.time_delta_ms);
    FB.Canvas.setAutoGrow();
}); 
```

# javascript - appMobi / phonegap 设置/删除cookie点击操作需要2次才能工作？

> ID：11500028
> 
> 赞同：0
> 
> 时间：2012-07-16T07:44:36.190
> 
> 标签：javascript, jquery, cookies, cordova, appmobi

我这辈子都想不通这是怎么回事。我不知道这是否以 appMobi/phonegap 为中心，因为他们有自己的特殊方法来设置和处理 cookie。但我总体上似乎有一个独特的问题，它只发生在第一次实际编写 cookie 的过程中。或者如果它存在就删除它，这有点像写它。

无论如何，我有 2 个功能可以完美运行，直到将 cookie 介绍给它们为止。但我还需要 cookie 作为登录检查的一部分，以及其他一些东西。所以这是我的问题。

我输入我的用户/密码，点击登录。一无所获。再次点击登录，工作。我登录后点击注销，没有任何效果。再打一次..有效..

这些也是 ajax 驱动的函数。不知道这是否与它有关，但是在这两种情况下，cookie 都以一种或另一种形状形式编写，而当我需要单击触发它们两次的按钮这一事实时，功能似乎中断了尽管它们是单击操作，但仍可获得所需的效果。

如果我从我的函数中删除 cookie 行，一切都会再次正常工作，没有问题，除了 cookie 需要实际使用我正在构建的一半东西。它也是一个用数值写入的唯一cookie。

想法？

`AppMobi.cache.setCookie('AutoRemember', uid, 90);`

如果有这一行，我必须双击我的功能才能工作，如果它不在那里，我的功能按预期工作..

我的一个功能示例是（例如，在这里快速输入一个）

```
$('#buttonX').click(function(){
   url = 'http://www.domain.com';
   $.post(url, function(data)
   {
      if(data.status == "good")
      {
         AppMobi.cache.setCookie('AutoRemember', uid, 90);
         window.location = 'dashboard.html';
      }
   }, 'json')
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:24:05.947

啊，是的，我遇到了同样的事情。您需要下载并初始化 local_bootstrap.js 库以及“在 Eclipse 中开发 Android ”中的一些内容（我下载了 .zip“用于 PhoneGap Android 开发的 appMobi 云服务库”）。我正在用 Eclipse 做 Android 应用程序，我假设你也是，你的帖子没有提到你使用的是什么 IDE。

.zip 文件有一个很棒的 readme.txt 文件，说明了复制的位置和内容（.java 文件、jar 文件等）

在这里找到： http: [//www.appmobi.com/?q= node/85](http://www.appmobi.com/?q=node/85)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:53:09.203

好吧，至少来了解一下或据我所知。这似乎是浏览器和模拟器之间的一个小故障，而不是我的编码。当我在“Test Anywhere”的沙盒 appMobi 应用程序中运行该应用程序时，一切都按预期工作。

我将在 appMobi 上打开一个错误，他们每个人都会收到错误报告，我稍后会返回这里提供一个链接，以便其他人在遇到类似问题时也可以关注它。

# php - 在 symfony 2 中使用 JMS Bundle 出现“CG\Proxy\InterceptorLoaderInterface”错误

> ID：11500035
> 
> 赞同：0
> 
> 时间：2012-07-16T07:45:12.403
> 
> 标签：php, symfony, bundle

我正在尝试安装 symfony2 JMS DI Extra 捆绑包。但我不断收到这个错误

> 致命错误：在第 30 行的 /home/xxxxx/public_html/XXXX/Symfony/vendor/bundles/JMS/AopBundle/Aop/InterceptorLoader.php 中找不到接口“CG\Proxy\InterceptorLoaderInterface”

我在这里找到了解决方案

[https://github.com/schmittjoh/JMSAopBundle/issues/7](https://github.com/schmittjoh/JMSAopBundle/issues/7)

但无法理解在哪里修复路径

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:48:04.747

我认为缺少 cg-library。在 Symfony 供应商文件夹中打开命令提示符并发出：

```
git clone https://github.com/schmittjoh/cg-library.git cg-library 
```

将 cg-library 添加到您的 deps 文件中：

```
[cg-library]
    git=https://github.com/schmittjoh/cg-library.git
    target=/cg-library 
```

# asp.net - 在 asp.net 中作为弹出窗口的图像描述

> ID：11500039
> 
> 赞同：2
> 
> 时间：2012-07-16T07:45:33.480
> 
> 标签：asp.net

我正在制作一个 ASP.NET 网站，其中有一个静态图片库。现在，当我单击此图库中的图像时，我想显示一个包含描述图像的文本（10-15 行）的弹出窗口。

我怎样才能做到这一点？我不知道我应该如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:48:35.340

您可以使用[jQueryUI 对话框](http://jqueryui.com/demos/dialog/)或简单地使用 javascript[打开页面](http://www.w3schools.com/jsref/met_win_open.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:00:25.130

存档有两个步骤。

**第一步**是使用 css 制作弹出窗口。

谷歌上有很多关于这个的例子。

[在谷歌上搜索](https://www.google.com/search?hl=en&q=css+popup+window&oq=css+popu&gs_l=serp.3.1.0l10.1351.3270.0.4781.8.8.0.0.0.0.113.740.7j1.8.0.ciatsh..0.0...1.YnHFQ3hbOiQ)

[打开 CSS 弹出窗口](http://www.pat-burt.com/web-development/how-to-do-a-css-popup-without-opening-a-new-window/)

[简单的CSS弹出](http://bucarotechelp.com/design/csseasy/97112700.asp)

**第二步**是让你`javascript`打开它并显示你的实际文本。如果你使用像 jQuery 这样的库，你可以让很多想法变得更容易，但如果你希望纯 javascript，你也可以让它工作。

例如，在最后一个链接“Easy Css pop up”上，打开它的 javascript 是：

```
<a href="javascript:void(0);" onMouseover="ShowPop('pop');"
                 onMouseout="HidePop('pop');"><img src="myimage.jpg" alt=""></a> 
```

因此，您所做的是将图像的文本呈现到具有此 css 弹出窗口的 div 中，然后在每个图像上放置类似的代码以打开正确的弹出窗口。

当然，您可以找到像[http://highslide.com/这样的即用型图库](http://highslide.com/)

# image - 使用 AX 2009 从 Web 服务器下载图像

> ID：11500040
> 
> 赞同：0
> 
> 时间：2012-07-16T07:45:38.317
> 
> 标签：image, dynamics-ax-2009, x++, ax

我想从网页下载图像并将它们本地保存在我的系统上，然后将它们连接到 AX 中的项目。有没有人有一个示例如何使用 AX 2009 从 Internet 下载图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:59:42.773

为此，您可能需要使用 .Net 框架，从 X++调用[System.Net.HttpWebRequest 库。](http://blogs.msdn.com/b/emeadaxsupport/archive/2009/05/19/how-to-cast-between-webrequest-and-httpwebrequest.aspx)

一旦你有了它，[将响应转换为你的图像文件](https://stackoverflow.com/questions/2368115/how-to-use-httpwebrequest-to-pull-image-from-website-to-local-file)会有点棘手，但只有一点:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:08:40.913

我过去做过类似的事情。使用 .NET 下载文件并将其保存在文件系统上的共享文件夹中，然后返回新创建文件的完整路径。然后，您可以从 AX 作为“参考”调用 DLL，如果它成功从接收到的路径中读取文件，对它执行任何您需要的操作，最后删除（或运行定期批处理作业以删除旧文件）。

这样对我来说效果很好。

# c# - BackgroundWorker ReportProgress 事件队列

> ID：11500047
> 
> 赞同：2
> 
> 时间：2012-07-16T07:46:19.130
> 
> 标签：c#, .net, backgroundworker

我有一个 BackgroundWorker，它以 1 秒的间隔监视文件夹中的文件。如果它找到文件，那么它会为每个找到的文件引发 ReportProgress(0, fileName)。

在主线程上，我订阅该事件并处理每个文件。

这是：一个找到的文件 = 一个引发的事件 = 一个已处理的文件

如果主线程很慢，我的问题是关于排队事件。例如，“文件观察者”每秒可以找到并引发 1000 个事件，但在处理每个文件的主线程上需要 1 秒。所以事件是排队的。

.NET 中的这种排队有什么限制吗？

谢谢， 巴特克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:49:31.440

没有主线程*最终会*处理所有文件。但是，如果您有某种 GUI，我建议您在单独的线程上进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:52:02.733

`BackgroundWorker`内部使用`SynchronizationContext`异步`Post`消息。如果它是启动 BW 的 GUI 线程，它将使用专门的 WinForms`SynchronizationContext`并使用消息循环向该主线程报告进度。

在您的情况下，它是一个 Windows 服务线程，因此没有`SynchronizationContext`. 发生的情况是默认值`SynchronizationContext`被实例化和使用。然后行为完全不同，并且新`ThreadPool`的用于异步消息。因此，您的文件处理将在由该 internal 启动的单独线程中进行`ThreadPool`，与 WinForms 中的主线程相反。

虽然`ThreadPool`应该正确处理大型队列（无法立即找到对 ThreadPool 队列大小的任何硬限制 - 任何人都知道吗？），但要知道在这种模式下您不能假设确定性顺序文件处理。

# android - phonegap 是否支持 Android 1.6？

> ID：11500049
> 
> 赞同：2
> 
> 时间：2012-07-16T07:46:22.870
> 
> 标签：android, cordova

我正在遵循[本](http://docs.phonegap.com/en/1.9.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)指南并基于[此处](http://wiki.phonegap.com/w/page/30862722/phonegap-android-eclipse-quickstart)，它说

> 不要费心使用旧版本的 Android。使用可用的最高 SDK 目标。Phonegap 将为您处理向后兼容性。

所以我使用这些目标：

构建目标

> 安卓 2.3.3

和

> 最低 SDK 4

并使用

> 科尔多瓦-1.9.0.jar

但是当我尝试在 Android 1.6 上运行它时出现以下错误

```
E/dalvikvm(200): Could not find method android.webkit.WebView.<init>, referenced from method org.apache.cordova.CordovaWebView.<init>
W/dalvikvm(200): VFY: unable to resolve direct method 285: Landroid/webkit/WebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
W/dalvikvm(200): VFY:  rejecting opcode 0x70 at 0x0001
W/dalvikvm(200): VFY:  rejected Lorg/apache/cordova/CordovaWebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
W/dalvikvm(200): Verifier rejected class Lorg/apache/cordova/CordovaWebView;
D/AndroidRuntime(200): Shutting down VM
W/dalvikvm(200): threadid=3: thread exiting with uncaught exception (group=0x4001aa28)
E/AndroidRuntime(200): Uncaught handler: thread main exiting due to uncaught exception
E/AndroidRuntime(200): java.lang.VerifyError: org.apache.cordova.CordovaWebView
E/AndroidRuntime(200):  at org.apache.cordova.DroidGap.init(DroidGap.java:297)
E/AndroidRuntime(200):  at org.apache.cordova.DroidGap.loadUrl(DroidGap.java:343)
E/AndroidRuntime(200):  at phone.gap.test.PhonegapTestActivity.onCreate(PhonegapTestActivity.java:13)
E/AndroidRuntime(200):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1123)
E/AndroidRuntime(200):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2364)
E/AndroidRuntime(200):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2417)
E/AndroidRuntime(200):  at android.app.ActivityThread.access$2100(ActivityThread.java:116)
E/AndroidRuntime(200):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1794)
E/AndroidRuntime(200):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(200):  at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(200):  at android.app.ActivityThread.main(ActivityThread.java:4203)
E/AndroidRuntime(200):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(200):  at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(200):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
E/AndroidRuntime(200):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
E/AndroidRuntime(200):  at dalvik.system.NativeStart.main(Native Method) 
```

但是，当我在 Android 2.3.3 上运行它时，它运行良好。Phonegap 不支持 Android 1.6 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:59:59.477

PhoneGap 1.0 删除了对 2.1 之前的 Android 版本的支持。您可以在Android 1.6中使用[0.9.x 版本之一。](https://github.com/phonegap/phonegap/tags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:58:26.320

由于您使用的是 PhoneGap 1.9，请查看以下内容： http: [//docs.phonegap.com/en/1.9.0/guide_cordova-webview_android.md.html#Embedding%20Cordova%20WebView%20on%20Android](http://docs.phonegap.com/en/1.9.0/guide_cordova-webview_android.md.html#Embedding%20Cordova%20WebView%20on%20Android)

虽然支持回到 1.6 是理想的，但如果您升级到 2.1，您只会放弃不到 1% 的潜在市场范围。以前关于这个主题的答案也建议使用 2.1 (minSdkLevel="7") 作为你的底端。

# xpath - 使用 xpath 保留属性值中的空格

> ID：11500051
> 
> 赞同：0
> 
> 时间：2012-07-16T07:46:26.693
> 
> 标签：xpath, vbscript

请考虑这个文件：[http](http://www.w3schools.com/dom/books.xml) ://www.w3schools.com/dom/books.xml其中行：

`<book category="children">`

替换为：

`<book category=" children ">`

在 vbscript 中执行 xpath 查询以获取`category`属性值：

```
For Each n In objXML.selectNodes("//book/@category")
    WScript.Echo n.text
Next 
```

返回删除前导和尾随空格的结果：

`children`

我尝试过的任何其他 xpath 评估器都不会发生这种情况。

那么 MS 是否可以在不删除空格的情况下按原样返回属性值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T22:17:09.460

可以通过`value`属性代替`text`。
您想知道这两个属性之间的区别。
请阅读参考资料，尤其是**备注**部分。

[value 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/ms757007%28v=vs.85%29.aspx)
[text 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762687%28v=vs.85%29.aspx)

如您所见，在这种情况下，`value`和之间的主要区别`text`在于**text**标准化，而**value**没有。

```
For Each n In objXML.selectNodes("//book/@category")
    WScript.Echo n.text
    WScript.Echo n.value
Next 
```

# python - 如何同时使用 python 运行 2 个不同的进程？

> ID：11500053
> 
> 赞同：1
> 
> 时间：2012-07-16T07:46:29.107
> 
> 标签：python, performance, multiprocessing

我有一个循环脚本，用于获取法国网站上的信息。它看起来像这样：

```
def getInfos(a,b,c)

def MyLoop(filename) 
```

我通过其中调用 getinfos

```
def MyLoop(filename) 
    values = getInfos() 
```

它运作良好。但有时，脚本会变慢并最终停止。所以我尝试了几个具有不同想法的模块。第一个模块；信号。但是（主观上）有趣的功能在 Windows 上不可用。但是，当它被冻结时，我试图刺激执行：

```
def reboot(signal, frame):
    print '??FROZEN??'
    time.sleep(1)
    #sys.exit(0)
signal.signal(signal.SIGINT, reboot) 
```

如您所见，我尝试过`sys.exit(0)`，但太突然了，而且我不知道真正做了什么。无论如何......经过两个小时的循环，我没有得到这个转换后的“ `keyboard interrupt`”函数的答案。

然后我试图限制执行时间。所以我发现：`Multiprocessing`，，，`pp`。`signal (~5%avalaibleOnWindows)`第一个打开了 30 或 40 个其他封闭的 python 进程。第二个，pp，不允许并行化两个不同的函数。不是吗？

你有什么对我有用的吗？或者至少，我可以尝试一些方法来弄清楚第一步在哪里？

14 个月后... 最后，由于缺乏经验，我决定使用多处理。让一些机器人作为执行者，其中 1 个作为可能冻结的外部进程的检查器/杀手。

一、多处理方法：

```
#my_mp.py
import multiprocessing as mp
import actions as ac
bot_ids = list('ab')
if __name__ == '__main__':
    jobs = []
    for bot_id in bot_ids:
        p = mp.Process(target=ac.Act , args=(bot_id,))
        jobs.append(p)  ;  p.start() 
```

然后，什么是多处理：

```
#actions.py
import time,random,glob,os,psutil
#________________________
def check_or_kill(eXe,bTm):
    age_max = 900
    if time.time() - bTm > age_max:
        for proc in psutil.process_iter():
            if  (proc.name == eXe):proc.kill()
    return
#________________________
def Act(bot_id):
    checker = random.choice(list('ab'))
    if bot_id not in checker:
        f = open('stTime_%s.txt'%bot_id , 'w')  ;  f.write('%s'%(time.time()))  ; f.close()
        #launch the execution file and then, when it's done :
        os.remove('stTime_%s.txt'%bot_id)
    else:
        #get their inner birthtime.
        while glob.glob('localfolder_path','stTime_*.txt') != []: check_or_kill('soft.exe',birthtime)
    return 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:22:54.850

您的进程是否被 Web 请求挂起？在标准库[urllib2](http://docs.python.org/library/urllib2.html)中有一个函数`urllib2.urlopen`接受一个可选`timeout`参数。如果这是您正在使用的，请尝试设置超时参数并处理您的请求失败的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:50:41.527

对于异步编程尝试[扭曲](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions)

这是一本适合初学者的好书：[Twisted Introduction](http://krondo.com/?page_id=1327)

# asp.net - 添加多个Web用户控件时，出现“页面中只能添加一个ScriptManager实例”的错误

> ID：11500054
> 
> 赞同：0
> 
> 时间：2012-07-16T07:46:31.297
> 
> 标签：asp.net, exception, webforms, controls, scriptmanager

我创建了一个 ajax 日期扩展器的用户控件“日历”以及一个用于获取日期的文本框。现在我试图为我的表中填充的所有行动态创建这个控件。它给出了以下错误：- 只能将 ScriptManager 的一个实例添加到页面中。

这是代码：-

```
tc = new TableCell();
            tc.Style["width"] = "15%";
            Calendar1 = (ASP.Calendar)LoadControl("../Calendar.ascx");
            Calendar1.ID = "tbDate" + Convert.ToString(_id);
            tc.Controls.Add(Calendar1);
            tr.Cells.Add(tc);
            tc.Dispose();
            tc = null; 
```

我已经声明了一个全局变量：- public ASP.Calendar Calendar1;

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:58:49.730

您需要在 Web 用户控件中使用 ScriptManagerProxy 组件，而不是使用成熟的 ScriptManager。ScriptManagerProxy 是为您想要的这种用途而创建的。

“当 ScriptManager 控件已在父元素中定义时，允许嵌套组件（例如内容页面和用户控件）向页面添加脚本和服务引用。” - [http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanagerproxy.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanagerproxy.aspx)

所以基本上确保您在调用页面本身上使用 ScriptManager 并在 Calendar.ascx Web 用户控件中使用 ScriptManagerProxy 组件。

如果您的设计确实不允许这样做，那么创建第二个版本的 Calendar.ascx 仅用作嵌套控件怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:54:25.157

您在页面中多次包含脚本管理器，可能在用户控件本身中。

# html - 我们如何在html5中实现拖放功能

> ID：11500055
> 
> 赞同：0
> 
> 时间：2012-07-16T07:46:33.133
> 
> 标签：html

大家好，请建议我如何使用 kineticJS 在 html5 的 CANVAS 中实现拖放功能，拖放对象应该能够显示对象的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T14:54:51.917

也许这个教程可以帮助你！？

[拖放事件](http://www.tutorialspoint.com/html5/html5_drag_drop.htm)

# ruby - Ruby - 使用索引过滤的函数式方法

> ID：11500070
> 
> 赞同：3
> 
> 时间：2012-07-16T07:47:48.280
> 
> 标签：ruby, functional-programming

我有一个这样的数组：

```
stuff = ["A", " ", "C", " ", "E", " ", "G"] 
```

我想返回一个数据为空格的所有索引的数组。例如：

```
[1, 3, 5] 
```

有没有很好的功能性方法来做到这一点？我知道有一种`each_with_index`方法返回一个`Enumerable`，但我不知道如何使用过滤器来使用它。

**编辑：NVM，尝试 30 分钟后才解决。这是我的方法。**

```
indexes = stuff.collect.with_index { |elem, index| index if elem == " "}.
             select { |elem| not elem.nil? } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T08:33:38.327

让我为你缩短一点：

```
['A', ' ', 'C', ' ', 'E', ' ', 'G'].map.with_index { |e, i| i if e == ' ' }.compact 
```

问题是你可以使用`Enumerable#compact`而不是做一个`select`. 此外，我发现`#map`它是更流行的术语，尤其是当您谈论函数式编程时，但归根结底就是苹果和橘子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-07T11:24:53.743

[多年后](https://bugs.ruby-lang.org/issues/5663)，Ruby 2.7 提供[`Enumerable#filter_map()`](https://ruby-doc.org/core-2.7.0/Enumerable.html#method-i-filter_map)了使这更简单的：

```
stuff.filter_map.with_index { |e, i| i if e == ' ' } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T11:07:36.187

如果您在多个地方使用它，我将使用此方法扩展 Array 类

```
class Array
  def index_all( val = nil )
    ary = []
    each_with_index { |x, i|
      ary.push(i) if x == val or block_given? && yield(x)
    }
    ary
  end
end

['A', ' ', 'C', ' ', 'E', ' ', 'G'].index_all(" ") #=> [1, 3, 5] 
```

# java - 如何让活动在Android中自行跳转到下一个活动之前等待？

> ID：11500071
> 
> 赞同：2
> 
> 时间：2012-07-16T07:47:51.233
> 
> 标签：java, android, multithreading, wait

我想创建一个在我启动应用程序时打开的活动，等待一段时间并跳转到下一个活动，而无需用户按任何操作。

这是我的代码：

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Thread thread = new Thread();
    thread.start();
}

public class waitSeconds extends Thread {

    public void run() {
        Log.i("MyActivity", "MyClass");
        try {
            wait(300);
            Intent intent = new Intent(MainActivity.this, main_window.class);
            startActivity(intent);

        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

似乎它永远不会采用“运行”方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:59:34.050

## 你需要这样的东西：

```
public class SplashScreenActivity extends Activity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        new Thread() {

            public void run() {

                try {
                    Intent i = new Intent(SplashScreenActivity.this,
                            MainActivity.class);

                    Thread.sleep(2000);

                    startActivity(i);

                    finish();

                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }.start();

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:51:13.860

将此包含在您的活动中：

```
 public class MainActivity extends Activity{
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    SplashHandler handler=new SplashHandler();
    Message msg = new Message();
    msg.what = 0;
    handler.sendMessageDelayed(msg, 3000);

}

private class SplashHandler extends Handler {

            public void handleMessage(Message msg)
              {
                switch (msg.what)
                {
                default:
                case 0:
                  super.handleMessage(msg);

                  Intent intent = new Intent(MainActivity.this,main_window.class);
                  startActivity(intent);
                  MainActivity.this.finish();
                }
              }
        } 
```

# c# - 防止多次调用 Web 服务

> ID：11500076
> 
> 赞同：9
> 
> 时间：2012-07-16T07:48:06.240
> 
> 标签：c#, asp.net, web-services

我为我的客户提供了一个 Web 服务，允许他将记录添加到生产数据库中。

我最近发生了一个事件，其中我的客户的程序员循环调用服务，迭代调用我的服务数千​​次。

我的问题是防止这种事情发生的最好方法是什么。

我想了一些办法： 1.在服务入口处，我可以为每个调用该服务的客户端更新计数器，但这看起来太笨拙了。2.检查调用该服务的客户端的IP，每次调用该服务时都会升一个flag，然后每隔一小时重置一次flag。

我很肯定有更好的方法，并且会提出任何建议。

谢谢，大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:12:15.043

方法是在会话中存储一个计数器并使用该计数器来防止每次调用过多。

但是，如果您的用户可能试图避免这种情况并每次发送不同的 cookie*，那么您需要创建一个自定义表，其行为类似于会话，但将用户与 ip 连接，而不是与 cookie。

这里还有一个问题是，如果您在 ip 上阻止 basic，您可能会阻止整个公司从代理中出来。所以最后一个正确但更复杂的方法是让**ip 和 cookie 都与用户连接，**并知道浏览器是否允许 cookie。如果没有，那么你用 ip 阻止。这里的困难部分是了解 cookie。**好吧，在每次通话时，您都可以强制他发送与现有会话连接的有效 cookie**。如果没有，则浏览器没有 cookie。

[ * ] cookie 与会话相关联。
[ * ] 通过创建新表来保持计数器并与会话断开连接，您还可以避免会话锁定。

过去我使用过用于 DosAttack 的代码，但是当您有很多池和困难的应用程序时，它们都不能正常工作，所以我现在使用自定义表来描述它。这是我测试和使用的两个代码

[Web 应用程序中的 Dos 攻击](http://omaralzabir.com/prevent_denial_of_service__dos__attacks_in_your_web_application/)

[在 asp.net 上轻松阻止 Dos 攻击](http://madskristensen.net/post/Block-DoS-attacks-easily-in-ASPNET.aspx)

如何查找保存在表格中的每秒点击次数。这是我的 SQL 计算每秒点击次数的部分。其中一个技巧是，如果我距离最后一次检查还有 6 秒或更多秒，我会继续添加点击次数并计算平均值。这是从计算中截取的代码作为一个想法

```
set @cDos_TotalCalls = @cDos_TotalCalls + @NewCallsCounter

SET @cMilSecDif = ABS(DATEDIFF(millisecond, @FirstDate, @UtpNow))

-- I left 6sec diferent to make the calculation
IF @cMilSecDif > 6000
    SET @cClickPerSeconds = (@cDos_TotalCalls * 1000 / @cMilSecDif)
else
    SET @cClickPerSeconds = 0

IF @cMilSecDif > 30000
    UPDATE ATMP_LiveUserInfo SET cDos_TotalCalls = @NewCallsCounter, cDos_TotalCallsChecksOn = @UtpNow WHERE cLiveUsersID=@cLiveUsersID         
ELSE IF @cMilSecDif > 16000
    UPDATE ATMP_LiveUserInfo SET cDos_TotalCalls = (cDos_TotalCalls / 2), 
    cDos_TotalCallsChecksOn = DATEADD(millisecond, @cMilSecDif / 2, cDos_TotalCallsChecksOn)
        WHERE cLiveUsersID=@cLiveUsersID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T08:18:54.137

首先，您需要了解您的情况的*法律*方面：**与您的客户签订的合同是否允许您限制客户的访问权限？**

这个问题超出了 SO 的范围，但是您必须找到一种方法来回答它。因为如果您在法律上有义务处理所有请求，那么就没有办法绕过它。此外，对您的情况的法律分析可能已经包含一些限制，您可以通过这种方式限制访问。这反过来又会对您的解决方案产生影响。

除了所有这些问题，只关注*技术*方面，您是否使用某种用户身份验证？（如果不是，为什么不呢？）如果你这样做了，你可以在每个用户群上实施你决定使用的任何方案，我认为这将是最干净的解决方案（你不需要依赖 IP 地址，这是一个某种丑陋的解决方法）。

一旦你有了识别单个用户的方法，你就可以实施几个限制。我首先想到的是这些：

1.  *同步处理*
    只有在处理完所有先前的请求后才开始处理请求。这甚至可以通过`lock`您的主要处理方法中的一条语句来实现。如果你采取这种方法，
2.  *处理请求之间的时间延迟*
    要求在一个处理调用之后必须经过特定时间才能允许下一次调用。最简单的解决方案是在用户会话中存储`LastProcessed`时间戳。如果您采用这种方法，您需要开始考虑在允许处理新请求之前如何响应 - 您是否向调用者发送错误消息？我想你应该...

**编辑**
声明 ，`lock`简要说明：

它旨在用于线程安全操作。语法如下：

```
lock(lockObject)
{
    // do stuff
} 
```

`lockObject`需要是一个对象，通常是当前类的私有成员。效果是，如果你有 2 个线程都想执行这段代码，那么第一个到达`lock`语句的线程会锁定`lockObject`. 虽然它确实是，但第二个线程无法获取锁，因为对象已经被锁定。所以它只是坐在那里等待，直到第一个线程在退出块时释放锁`}`。只有这样，第二个线程才能锁定`lockObject`并完成它的工作，阻止`lockObject`任何第三个线程出现，直到它也退出该块。

小心，线程安全的整个问题绝非微不足道。（可以说，唯一无关紧要的是程序员可能犯的许多琐碎错误；-) [请参阅此处](http://www.albahari.com/threading/)了解 C# 中的线程介绍

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:52:30.360

获取用户 ip 并在使用 web 服务后将其插入缓存一小时，这是缓存在服务器上：

```
HttpContext.Current.Cache.Insert("UserIp", true,  null,DateTime.Now.AddHours(1),System.Web.Caching.Cache.NoSlidingExpiration); 
```

当您需要检查用户是否在最后一小时输入时：

```
if(HttpContext.Current.Cache["UserIp"] != null)
{
 //means user entered in last hour
} 
```

# javascript - 使用getCell jqgrid获取html值

> ID：11500085
> 
> 赞同：1
> 
> 时间：2012-07-16T07:48:34.070
> 
> 标签：javascript, jquery, jqgrid

长话短说，当我试图用这个获得任何列的价值时

```
var Id=jQuery("#grid").jqGrid('getCell',id,'Id'); 
```

我得到这个值

```
<INPUT style="WIDTH: 98%" id=2_Id class=editable role=textbox value=86 name=Id> 
```

我只期待 86。你猜有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:56:44.250

它将内容作为文本获取，在这种情况下是控件。您可以使用

```
var Id=jQuery("#grid").jqGrid('getCell',id,'Id').attr("value"); 
```

如果这足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-23T13:48:44.563

var rowData = $("#jqGridTableId").getRowData(rowId);

rowData 将类似于： Object {seriesId: "", name: `"<input type='text' value='Initial Jobless Claims' id='txtChartSeriesName_0'">`}

要从 rowData 获取这个 html 元素的值......你可以有一个简单的代码，比如： **$(rowData.name).val()**

# php - PHP：用文字表达数字

> ID：11500088
> 
> 赞同：64
> 
> 时间：2012-07-16T07:48:37.080
> 
> 标签：php, numbers, words

是否有一个函数可以用文字表达任何给定的数字？

例如：

如果一个数字是`1432`，那么这个函数将返回“一千四百三十二”。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2014-10-29T13:01:51.780

使用 php 中的[NumberFormatter 类](http://dk2.php.net/manual/en/class.numberformatter.php)；）

```
$f = new NumberFormatter("en", NumberFormatter::SPELLOUT);
echo $f->format(1432); 
```

那将输出“一千四百三十二”

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-05-18T09:31:08.280

您可以通过多种方式执行此操作，我在这里提到两种方式，方法是使用[Martindilling](https://stackoverflow.com/questions/11500088/php-express-number-in-words/26631086#26631086)答案中提到[的 NumberFormatter 类](http://dk2.php.net/manual/en/class.numberformatter.php)（如果您有 php 版本 5.3.0 或更高版本以及 PECL 扩展 1.0.0 或更高版本）或使用以下自定义功能。

```
function convertNumberToWord($num = false)
{
    $num = str_replace(array(',', ' '), '' , trim($num));
    if(! $num) {
        return false;
    }
    $num = (int) $num;
    $words = array();
    $list1 = array('', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven',
        'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'
    );
    $list2 = array('', 'ten', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety', 'hundred');
    $list3 = array('', 'thousand', 'million', 'billion', 'trillion', 'quadrillion', 'quintillion', 'sextillion', 'septillion',
        'octillion', 'nonillion', 'decillion', 'undecillion', 'duodecillion', 'tredecillion', 'quattuordecillion',
        'quindecillion', 'sexdecillion', 'septendecillion', 'octodecillion', 'novemdecillion', 'vigintillion'
    );
    $num_length = strlen($num);
    $levels = (int) (($num_length + 2) / 3);
    $max_length = $levels * 3;
    $num = substr('00' . $num, -$max_length);
    $num_levels = str_split($num, 3);
    for ($i = 0; $i < count($num_levels); $i++) {
        $levels--;
        $hundreds = (int) ($num_levels[$i] / 100);
        $hundreds = ($hundreds ? ' ' . $list1[$hundreds] . ' hundred' . ' ' : '');
        $tens = (int) ($num_levels[$i] % 100);
        $singles = '';
        if ( $tens < 20 ) {
            $tens = ($tens ? ' ' . $list1[$tens] . ' ' : '' );
        } else {
            $tens = (int)($tens / 10);
            $tens = ' ' . $list2[$tens] . ' ';
            $singles = (int) ($num_levels[$i] % 10);
            $singles = ' ' . $list1[$singles] . ' ';
        }
        $words[] = $hundreds . $tens . $singles . ( ( $levels && ( int ) ( $num_levels[$i] ) ) ? ' ' . $list3[$levels] . ' ' : '' );
    } //end for loop
    $commas = count($words);
    if ($commas > 1) {
        $commas = $commas - 1;
    }
    return implode(' ', $words);
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-06-16T04:26:33.343

如果使用 Yii2，你可以像下面这样简单地做到这一点：

```
$sum = 100500;
echo Yii::$app->formatter->asSpellout($sum); 
```

这以您的应用程序的语言拼写出来`$sum`。

文档[参考](http://www.yiiframework.com/doc-2.0/yii-i18n-formatter.html#asSpellout()-detail)

# maven - 在 Maven 中运行定制的 PMD 规则集

> ID：11500089
> 
> 赞同：0
> 
> 时间：2012-07-16T07:48:45.853
> 
> 标签：pmd, maven, customization, rules, pmd

我想运行我的本地磁盘 D:\rulesets\java 中的自定义[pmd](/questions/tagged/pmd "显示标记为“pmd”的问题")规则集。我正在使用 Maven 来构建我的应用程序。我将以下条目放入 maven POM.xml

```
<reporting>
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-pmd-plugin</artifactId>
        <configuration>
            <rulesets>
                <ruleset>D:\rulesets\java\basic.xml</ruleset>
                <ruleset>D:\rulesets\java\braces.xml</ruleset>
                <ruleset>D:\rulesets\java\clone.xml</ruleset>
                <ruleset>D:\rulesets\java\codesize.xml</ruleset>
            </rulesets>
        </configuration>
    </plugin>
</plugins> 
```

当我运行我的 PMD 报告 (mvn pmd:pmd) 时，它没有采用我在 pom 文件中定义的自定义 pmd 规则集。如何解决这个问题？

提前致谢。

# asp.net-mvc-2 - 如何从Controller调用对象在ASP.net MVC的视图中显示

> ID：11500090
> 
> 赞同：0
> 
> 时间：2012-07-16T07:48:52.130
> 
> 标签：asp.net-mvc-2

我的控制器中有一个动作：

```
public ActionResult GiftVochure()
{
  if (Request.QueryString["gc"] != "")
  {
    var obj = from b in context.GiftCards
              join cus in context.Customers on b.CustomerID equals cus.ID
              where b.ID == int.Parse(Request.QueryString["gc"])
              select new
              {
                  b.ID,
                  b.Date,
                  b.CardNo,
                  b.Price,
                  CustomerName = cus.FirstName + " " + cus.LastName
              };
      return View(obj.ToList());
  }
  return View();
} 
```

我想用“obj”循环显示在GiftVochure Views中，有谁知道，怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:56:13.640

您应该首先定义一个模型类型来替换查询投射的匿名类型。

```
public class CardInfo
{
    int ID { get; set; }
    DateTime Date { get; set; }
    int CardNo { get; set; }
    double Price { get; set; }
    string CustomerName { get; set; }
} 
```

修改您的操作方法：

```
var obj = from b in context.GiftCards
          join cus in context.Customers on b.CustomerID equals cus.ID
          where b.ID == int.Parse(Request.QueryString["gc"])
          select new CardInfo
          {
              ID = b.ID,
              Date = b.Date,
              CardNo = b.CardNo,
              Price = b.Price,
              CustomerName = cus.FirstName + " " + cus.LastName
          };
return View(obj); 
```

然后，您应该将您的 GiftVochure 视图强输入到此类型的序列中。

```
@model IEnumerable<CardInfo> 
```

最后，您可以迭代视图中的项目。

```
@foreach(CardInfo current in Model) {
   //display info
} 
```

您可能应该将用于显示单个对象的标记移动到局部视图。然后在你的循环中渲染它。

# c# - 动态文字控件内的动态按钮

> ID：11500091
> 
> 赞同：4
> 
> 时间：2012-07-16T02:09:40.937
> 
> 标签：c#, asp.net

我想添加动态文字控件和动态按钮。

所以我尝试这样：

```
 Literal lit = new Literal();        
            lit.Text = lit.Text + theRow["CaseExampleDescription"].ToString() + "\n\n";
            Button btn = new Button();
            btn.ID = "btn1";

            lit.Controls.Add(btn); 
```

但有错误-System.Web.UI.WebControls.Literal' 不允许子控件。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:52:49.813

您需要**使用一个**可以容纳您的容器，`child controls (like button, literal, etc.),`因此它需要**实现 WebControl 类。**

**文字**不是从 system.Web.UI.WebControls 命名空间派生的。因此不能有控件的集合。

基本上，您需要使用服务器控件作为定义 System.Web.UI.WebControls 命名空间中所有控件通用的方法、属性和事件的基类。

**如何完成你的任务？**

阅读以下 MSDN 文章 -[如何：以编程方式将控件添加到 ASP.NET 网页](http://msdn.microsoft.com/en-us/library/kyt0fzt1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T02:42:22.557

正如[本文](http://www.w3schools.com/aspnet/control_literal.asp)所指出的，文字控件只不过是在页面上显示文本的一种方式。因此，它不支持子控件。它拥有控件集合的原因是因为它继承自 system.web.ui.control。

您将要使用支持子控件的东西，例如 asp.net[面板](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel)。

# iphone - 增强按钮延迟

> ID：11500094
> 
> 赞同：0
> 
> 时间：2012-07-16T07:48:58.907
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我正在制作一个带有增强按钮的游戏。当然，只要让它保持启用状态就可以让玩家不断地点击它。所以，我需要 20 秒的延迟才能再次按下按钮。此外，是否可以在按钮上显示此进度，最好是在按钮本身上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:09:26.180

以后请尝试展示您为解决问题所做的尝试。不过，既然你是新来的，我就让它滑一次！

此代码使用`NSTimer`每秒调用一次的 a。它将触发您为“Boost”指定的任何代码。它还将禁用您的按钮上的用户交互，直到从按下按钮开始 20 秒后，它将允许用户再次按下按钮，最后，此代码显示距离“Boost”还剩多少秒可以在`titleLabel`按钮的属性上再次使用。

```
- (IBAction)buttonPressed:(id)sender
{
    myTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(activateBoost) userInfo:nil repeats:YES];
}

- (void)activateBoost
{

    if (myButton.userInteractionEnabled == YES) {
        //Put your Boost code here!

    }

    if ([myButton.titleLabel.text intValue] == 0) {
        [myTimer invalidate];
        [myButton setTitle:@"20" forState:UIControlStateNormal];
        myButton.userInteractionEnabled = YES;
    }else{
        myButton.userInteractionEnabled = NO;
        int currentTime = [myButton.titleLabel.text intValue];
        int newTime = currentTime - 1;
        myButton.titleLabel.text = [NSString stringWithFormat:@"%d",newTime];
    }

} 
```

为了使上述代码正常工作，您需要声明一个`NSTimer`名为“myTimer”和一个`UIButton`“myButton”。您还需要将按钮的初始文本设置为“20”。

# delphi - 如何使用 webCal 发布日历

> ID：11500095
> 
> 赞同：2
> 
> 时间：2012-07-16T07:49:02.123
> 
> 标签：delphi, delphi-xe2, webcal

我的应用程序在运行时生成一个复杂的日历，因此任何用户都有特定日期/时间的任务，并且每个任务都有描述 + 一些属性。

我被要求将此日历“发布”为 webCal。我对webcal一无所知，无论如何我想知道你们中是否有人已经尝试过并可以写下他的意见或建议。

一个问题是“如何识别用户”？由于我有一个多用户日历，如何为每个用户发布单独的日历？

我认为是一种持续运行的Delphi服务应用程序，发布日历。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:19:04.357

这取决于您的用户是否需要对其日历的写入权限。

我曾经写过一个简单的（命令行）实用程序，可以导出单个（.ics）日历文件。如果发生更改，它会将导出的 .ics 文件上传到 Web 服务器，日历客户端（例如 Google Calendar、iCalendar、Sunbird、Outlook）可以在其中获取该文件。通过将 .ics 文件上传到每个用户的不同文件夹，可以轻松地为不同用户发布。

接下来，我安排此实用程序定期运行。当然，您可以让您的 Delphi 服务定期执行此操作。

许多日历客户端既了解`http://`URL，也了解`webdav://`URL。可以使用常规 HTTP 身份验证方案之一来安排身份验证。当然，您会希望使用 SSL 来保护事物。

这种方法的唯一限制是生成的日历实际上是只读的。

如果您想提供写访问权限，您将需要一个真正的 webcal 服务器。真正的 webcal 实现意味着在服务器上支持[webdav](http://en.wikipedia.org/wiki/WebDAV)协议（它本身是 HTTP 协议的扩展），并从您的 Delphi 服务中获取更改。要么，要么在 Delphi 中编写 WebDav/CalDav 服务器（~~例如，~~通过扩展组件来使用 Indy TIdWebdav 组件`TIdHTTPServer`，因为 Indy 不支持 TIdWebdavServer 组件）。

`OnCommandOther`根据[WebDAV 规范](http://webdav.org/specs/)，您必须自己处理所有特定于 webdav 的命令（使用事件） 。这个[关于编写 WebDAV 服务器的问题](https://stackoverflow.com/questions/1316459/how-can-i-write-a-webdav-server-with-delphi)可能会提供一些指针......

或者，您可以使用 3rd-party webdav 服务器，并从您的 Delphi 服务中获取任何更改。

# android - 使用 3 个 TextView 自定义 ListView 项

> ID：11500096
> 
> 赞同：2
> 
> 时间：2012-07-16T07:49:03.883
> 
> 标签：android, listview, customization

我的数据库中有一个表，我查询该表（选择表的 3 个文本字段）并将所有查询结果从我的光标保存到 3 个单独的列表中。（用于保存一个字段值的每个列表）现在我想在 ListView 中显示这个结果，它的每一行都有 3 个 TextView，每个 TextView 显示我的列表中的一项（ListView 的每一行都有每个列表中的一项，所以每个行有三个TextView）...有什么帮助吗？问候...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:29:03.153

您需要构建一个自定义适配器和一个 CacheView 以在您的 listView 中使用您的自定义布局。在这里：[http](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/) ://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/ 您可能会在项目中找到一个很好的教程附件中的例子。

# iphone - 使用后台线程导入、保存和显示大型数据集

> ID：11500097
> 
> 赞同：1
> 
> 时间：2012-07-16T07:49:03.977
> 
> 标签：iphone, objective-c, ios, multithreading

我已经关注了 Cocoa 是我女朋友的教程[，](http://www.cimgf.com/2011/08/22/importing-and-displaying-large-data-sets-in-core-data/)它基于一个子类`NSOperation`在后台线程中获取和加载大量记录，但在我的情况下，我有数千条记录，需要 1-2 分钟的连续加载从远程 Web 服务。[该应用程序具有使用SudzC](http://sudzc.com/)生成的 Web 服务代理类. 没有检测到内存泄漏。问题发生在应用程序完成将大量记录加载并保存到sqlite数据库（使用核心数据）后，我注意到这个导入/保存操作消耗了很多内存，即在这个操作完成后，我使用了应用程序的功能分钟（打开表格视图，编写文本等...），然后我会看到由于内存不足而发生的崩溃，如果我不包括导入/保存操作，应用程序可以正常工作而没有任何内存不足的崩溃！

有人知道这个问题吗？提前致谢。

# sql - 在sql中获取两个日期之间的差异 In Months 和 days

> ID：11500098
> 
> 赞同：14
> 
> 时间：2012-07-16T07:49:08.910
> 
> 标签：sql, oracle, date-arithmetic

我需要得到两个日期之间的差异，如果差异是 84 天，我可能应该有 2 个月和 14 天的输出，我刚刚给出的代码给出了总数。这是代码

```
SELECT Months_between(To_date('20120325', 'YYYYMMDD'),
       To_date('20120101', 'YYYYMMDD'))
       num_months,
       ( To_date('20120325', 'YYYYMMDD') - To_date('20120101', 'YYYYMMDD') )
       diff_in_days
FROM   dual; 
```

输出是：

```
NUM_MONTHS    DIFF_IN_DAYS
2.774193548       84 
```

例如，我需要此查询的输出为 2 个月和最坏的 14 天，否则我不介意我是否可以在月份数字之后获得确切的天数，因为那些天并不是真正的 14 天，因为所有月份都没有30天。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-13T16:00:15.603

```
select 
  dt1, dt2,
  trunc( months_between(dt2,dt1) ) mths, 
  dt2 - add_months( dt1, trunc(months_between(dt2,dt1)) ) days
from
(
    select date '2012-01-01' dt1, date '2012-03-25' dt2 from dual union all
    select date '2012-01-01' dt1, date '2013-01-01' dt2 from dual union all
    select date '2012-01-01' dt1, date '2012-01-01' dt2 from dual union all
    select date '2012-02-28' dt1, date '2012-03-01' dt2 from dual union all
    select date '2013-02-28' dt1, date '2013-03-01' dt2 from dual union all
    select date '2013-02-28' dt1, date '2013-04-01' dt2 from dual union all
    select trunc(sysdate-1)  dt1, sysdate               from dual
) sample_data 
```

结果：

```
|                        DT1 |                       DT2 | MTHS |     DAYS |
----------------------------------------------------------------------------
|  January, 01 2012 00:00:00 |   March, 25 2012 00:00:00 |    2 |       24 |
|  January, 01 2012 00:00:00 | January, 01 2013 00:00:00 |   12 |        0 |
|  January, 01 2012 00:00:00 | January, 01 2012 00:00:00 |    0 |        0 |
| February, 28 2012 00:00:00 |   March, 01 2012 00:00:00 |    0 |        2 |
| February, 28 2013 00:00:00 |   March, 01 2013 00:00:00 |    0 |        1 |
| February, 28 2013 00:00:00 |   April, 01 2013 00:00:00 |    1 |        1 |
|   August, 14 2013 00:00:00 |  August, 15 2013 05:47:26 |    0 | 1.241273 | 
```

测试链接：[SQLFiddle](http://sqlfiddle.com/#!4/d41d8/15878)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-14T11:12:12.530

更新的正确性。最初由@jen 回答。

```
with DATES as (
   select TO_DATE('20120101', 'YYYYMMDD') as Date1,
          TO_DATE('20120325', 'YYYYMMDD') as Date2
   from DUAL union all
   select TO_DATE('20120101', 'YYYYMMDD') as Date1,
          TO_DATE('20130101', 'YYYYMMDD') as Date2
   from DUAL union all
   select TO_DATE('20120101', 'YYYYMMDD') as Date1,
          TO_DATE('20120101', 'YYYYMMDD') as Date2
   from DUAL union all
   select TO_DATE('20130228', 'YYYYMMDD') as Date1,
          TO_DATE('20130301', 'YYYYMMDD') as Date2
   from DUAL union all
   select TO_DATE('20130228', 'YYYYMMDD') as Date1,
          TO_DATE('20130401', 'YYYYMMDD') as Date2
   from DUAL
), MONTHS_BTW as (
   select Date1, Date2,
          MONTHS_BETWEEN(Date2, Date1) as NumOfMonths
   from DATES
)
select TO_CHAR(Date1, 'MON DD YYYY') as Date_1,
       TO_CHAR(Date2, 'MON DD YYYY') as Date_2,
       NumOfMonths as Num_Of_Months,
       TRUNC(NumOfMonths) as "Month(s)",
       ADD_MONTHS(Date2, - TRUNC(NumOfMonths)) - Date1 as "Day(s)"
from MONTHS_BTW; 
```

**[SQLFiddle](http://www.sqlfiddle.com/?_escaped_fragment_=4/e819e/45/0#!4/e819e/60/0)**演示：

```
    +--------------+--------------+-----------------+- ----------+--------+
    | DATE_1 | DATE_2 | NUM_OF_MONTHS | 月(S) | 天(S) |
    +--------------+--------------+-----------------+- ----------+--------+
    | 2012 年 1 月 1 日 | 2012 年 3 月 25 日 | 2.774193548387 | 2 | 24 |
    | 2012 年 1 月 1 日 | 2013 年 1 月 1 日 | 12 | 12 | 0 |
    | 2012 年 1 月 1 日 | 2012 年 1 月 1 日 | 0 | 0 | 0 |
    | 2013 年 2 月 28 日 | 2013 年 3 月 1 日 | 0.129032258065 | 0 | 1 |
    | 2013 年 2 月 28 日 | 2013 年 4 月 1 日 | 1.129032258065 | 1 | 1 |
    +--------------+--------------+-----------------+- ----------+--------+

```

请注意，对于最后两个日期，Oracle 如何错误地报告月份的小数部分（给出天数）。`0.1290`恰好对应于`4`Oracle 考虑`31`一个月中的天数（3 月和 4 月）的天数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-15T07:13:49.530

我认为您的问题定义得不够好，原因如下。

依赖于months_between的答案必须处理以下问题：该函数在2013-02-28和2013-03-31之间，2013-01-28和2013-02-28之间，以及2013-之间准确报告一个月01-31 和 2013-02-28（我怀疑有些回答者在实践中没有使用这些功能，或者现在将不得不审查一些生产代码！）

这是记录在案的行为，其中日期都是各自月份的最后一个日期或属于该月的同一天的日期被判断为相隔整数个月。

因此，将 2013-02-28 与 2013-01-28 或 2013-01-31 进行比较时，您会得到相同的“1”结果，但将其与 2013-01-29 或 2013-01-30 进行比较会得到 0.967741935484 和分别为 0.935483870968 - 因此当一个日期接近另一个日期时，此函数报告的差异可能会增加。

如果这不是可接受的情况，那么您将不得不编写一个更复杂的函数，或者仅依靠假设每月 30（例如）天的计算。在后一种情况下，您将如何处理 2013-02-28 和 2013-03-31？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-15T04:53:32.613

这是你说的吗？

```
select trunc(months_between(To_date('20120325', 'YYYYMMDD'),to_date('20120101','YYYYMMDD'))) months,
             round(To_date('20120325', 'YYYYMMDD')-add_months(to_date('20120101','YYYYMMDD'),
                           trunc(months_between(To_date('20120325', 'YYYYMMDD'),to_date('20120101','YYYYMMDD'))))) days
        from dual; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-08T00:24:19.573

这里我只是在做今天和`CREATED_DATE` `DATE`表中的一个字段之间的区别，这显然是过去的一个日期：

```
SELECT  
((FLOOR(ABS(MONTHS_BETWEEN(CREATED_DATE, SYSDATE))) / 12) * 12) || ' months, '  AS MONTHS,
-- we take total days - years(as days) - months(as days) to get remaining days
FLOOR((SYSDATE - CREATED_DATE) -      -- total days
(FLOOR((SYSDATE - CREATED_DATE)/365)*12)*(365/12) -      -- years, as days
-- this is total months - years (as months), to get number of months, 
-- then multiplied by 30.416667 to get months as days (and remove it from total days)
FLOOR(((SYSDATE - CREATED_DATE)/365)*12 - (FLOOR((SYSDATE - CREATED_DATE)/365)*12)) * (365/12))
|| ' days ' AS DAYS 
FROM MyTable 
```

我使用 (365/12) 或 30.416667 作为我的转换因子，因为我使用总天数并删除年份和月份（天数）来获得剩余的天数。无论如何，这对我的目的来说已经足够了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-14T12:10:39.913

我发布的解决方案将考虑一个月 30 天

```
 select CONCAT (CONCAT (num_months,' MONTHS '), CONCAT ((days-(num_months)*30),' DAYS '))
  from ( 
  SELECT floor(Months_between(To_date('20120325', 'YYYYMMDD'),
   To_date('20120101', 'YYYYMMDD')))
   num_months,
   ( To_date('20120325', 'YYYYMMDD') - To_date('20120101', 'YYYYMMDD') )
   days
  FROM   dual); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-09-17T05:28:40.713

在 Orale Sql 中找出两天之间的年-月-日

* * *

```
select 
trunc(trunc(months_between(To_date('20120101', 'YYYYMMDD'),to_date('19910228','YYYYMMDD')))/12) years ,
trunc(months_between(To_date('20120101', 'YYYYMMDD'),to_date('19910228','YYYYMMDD'))) 
-
(trunc(trunc(months_between(To_date('20120101', 'YYYYMMDD'),to_date('19910228','YYYYMMDD')))/12))*12
months,
             round(To_date('20120101', 'YYYYMMDD')-add_months(to_date('19910228','YYYYMMDD'),
                           trunc(months_between(To_date('20120101', 'YYYYMMDD'),to_date('19910228','YYYYMMDD'))))) days
        from dual; 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-07-16T09:34:47.350

```
SELECT   (MONTHS_BETWEEN(date2,date1) +  (datediff(day,date2,date1))/30) as num_months,
datediff(day,date2,date1) as diff_in_days  FROM  dual;

// You should replace date2 with TO_DATE('2012/03/25', 'YYYY/MM/DD')
// You should replace date1 with TO_DATE('2012/01/01', 'YYYY/MM/DD')
// To get you results 
```

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2013-08-13T21:23:33.080

请参阅下面的查询（假设 @dt1 >= @dt2）；

```
Declare @dt1 datetime = '2013-7-3'
Declare @dt2 datetime = '2013-5-2'

select abs(DATEDIFF(DD, @dt2, @dt1)) Days,
case when @dt1 >= @dt2
    then case when DAY(@dt2)<=DAY(@dt1)
        then Convert(varchar, DATEDIFF(MONTH, @dt2, @dt1)) + CONVERT(varchar, ' Month(s) ') + Convert(varchar, DAY(@dt1)-DAY(@dt2)) + CONVERT(varchar, 'Day(s).')
        else Convert(varchar, DATEDIFF(MONTH, @dt2, @dt1)-1) + CONVERT(varchar, ' Month(s) ') + convert(varchar, abs(DATEDIFF(DD, @dt1, DateAdd(Month, -1, @dt1))) - (DAY(@dt2)-DAY(@dt1))) + CONVERT(varchar, 'Day(s).')
    end
    else 'See asumption: @dt1 must be >= @dt2'
end In_Months_Days 
```

回报：

```
Days | In_Months_Days

62   |   2 Month(s) 1Day(s). 
```

# jquery - 当我使用 $.getJSON 方法时，ASP.NET MVC 部分视图不会调用我的操作

> ID：11500102
> 
> 赞同：2
> 
> 时间：2012-07-16T07:49:21.290
> 
> 标签：jquery, asp.net-mvc-3

我在ASP.NET MVC3上为文档管理系统构建一个网站，在我使用局部视图的页面中，部分视图表示一个简单的表单。下拉列表，选择一个选项时选定选项的ID应该采取行动结果。为此，我使用**$.getJSON**方法将值传递给操作方法。但问题是 ID 不会转到 ActionResult。谁能帮我解决这个问题？

cshtml代码

```
<div >
  @using (Html.BeginForm("GetFilteredActivityLogs", "Document", FormMethod.Post, new
    {
        id = "activityLog",
        @class = "form-horizontal",

    }))
  {
<h3>Activity Log</h3>
   <div>
    <div style="float: left" class="control-label">
        <label>
            Action Type
        </label>
    </div>
    <div class="controls">
    @Html.DropDownListFor(model => model.SelectedActionId, Model.ActionTypes as SelectList, "All", new { 
        id = "SelectedActionId" 
})
    </div>
    <table class="table table-bordered" style="margin-top: 20px;  width: 100%;">
        <thead>
            <tr>
                <th style="width: 15%; text-align: center">
                    Employee No

                </th>
                <th style="width: 20%; text-align: center">
                    Employee Name
                </th>
                <th style="width: 45%; text-align: center">
                    Action
                </th>
                <th style="width: 20%; text-align: center">
                    Date and Time
                </th>
            </tr>
        </thead>
        <tbody id="Activities">
        </tbody>
    </table>
    </div>
  }
</div> 
```

控制器：

```
 public ActionResult GetFilteredActivityLogs(int actionTypeId)
    {
        return View();
    } 
```

脚本：

```
<script type="text/javascript">
    $(function ()
    {
        $('#SelectedActionId').change(function ()
        {
            var selectedActivityId = $(this).val();

            $.getJSON('@Url.Action("GetFilteredActivityLogs", "Document")', { activityId: selectedActivityId }, function (FilteredActivities)
            {
                var ActivitySelect = $('#Activities');
                // GroupSelect.empty();
                $.each(FilteredActivities, function (index, activity)
                {
                    // some code goes here...
                });
            });
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:41:11.053

正如 BuildStarted 所说，我认为您需要使您在 getJSON 请求（“activityId”）中发送的数据密钥与您的操作参数相匹配。当有一个参数时，我经常只使用“id”，以便在默认路由上获得匹配，从而获得一个不错的 URL（即 /Document/GetFilteredActivityLogs/123）。

这里的另一个观察：我认为值得一看 jQuery 表单插件 ( [http://malsup.com/jquery/form/](http://malsup.com/jquery/form/) )。就目前而言，您定义了两次参数，一次在 BeginForm 中，另一次在您的 javascript 中。如果您使用插件在表单本身上启用 ajax，则只能在 BeginForm 中定义参数，然后在“更改”事件处理程序中提交表单。

# c++ - openCV 2.4.2 上的 calcOpticalFlowPyrLK

> ID：11500109
> 
> 赞同：0
> 
> 时间：2012-07-16T07:49:45.037
> 
> 标签：c++, opencv

`calcOpticalFlowPyrLK`我对 opencv 2.4.2 上的新功能有一些问题。这是我的旧函数和参数：

```
calcOpticalFlowPyrLK(prevImg, currentImg, prevPts, nextPts, status, err, Size(15,15),3, TermCriteria(TermCriteria::COUNT+TermCriteria::EPS, 100, 0.02),OPTFLOW_USE_INITIAL_FLOW,0.0001); 
```

它适用于 OpenCV 2.4.1 但现在我尝试在 OpenCV 2.4.2 上使用它。它给出了这个错误：

```
/src/NaturalFeatureRecognition/OpticalFlowTracker.cpp:164: error: undefined reference to 'cv::calcOpticalFlowPyrLK(cv::_InputArray const&, cv::_InputArray const&, cv::_InputArray const&, cv::_OutputArray const&, cv::_OutputArray const&, cv::_OutputArray const&, cv::Size_<int>, int, cv::TermCriteria, int, double)' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:10:45.083

确保您在项目设置中链接了所有 OpenCV 库 - 我认为此函数的原型在新的 OpenCV 版本中没有更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-20T18:19:43.983

您忘记将其添加为标题：

```
#include <opencv2/video/tracking.hpp> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T11:06:25.183

就我而言（Opencv2.4.8 +QT），我必须在项目的配置文件中添加**libopencv_video248.dll.a**的路径： `LIBS += C:\\Opencv2.4.8\\install\\x64\\mingw\\lib\\libopencv_video248.dll.a`

# iphone - 根据用户触摸位置旋转精灵图像？

> ID：11500112
> 
> 赞同：5
> 
> 时间：2012-07-16T07:49:47.297
> 
> 标签：iphone, ios, cocos2d-iphone, cocos2d-x

我开始学习游戏开发。作为初学者，我创建了一个演示游戏，其中一门大炮将子弹击中敌人（从不同方向射向大炮）。现在我坚持在用户触摸屏幕或敌人的任何地方进行大炮精灵图像旋转。我是怎么做到的，我的初始代码如下，

```
void HelloWorld:: ccTouchesBegan(CCSet *touches, CCEvent * event)
{
    CCSize winSize = CCDirector::sharedDirector()->getWinSize(); 
    CCTouch* touch = (CCTouch*)( touches->anyObject() );
    CCPoint location = touch->locationInView(touch->view());
    location = CCDirector::sharedDirector()->convertToGL(location);

    //Rotate cannon direction toward touch point
    CCPoint diffPoint = ccpSub(_cannonImage->getPosition(), location);
    float angleRadians = atanf((float)diffPoint.y/(float)diffPoint.x);
    float angleOffset = CC_DEGREES_TO_RADIANS(180);

    if(diffPoint.x < 0){
        angleRadians += angleOffset;
    }else{
        angleRadians -= angleOffset;
    }

    CCLog("angle to be rotate = %f", angleRadians);

    _cannonImage->runAction(CCRotateBy::actionWithDuration(0.1, angleRadians));

} 
```

代码是用 cocos2d-x 编写的。我也接受用普通 cocos2d 编写的人的回答。

谢谢 iHungry

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T10:52:18.210

完美答案如下，

```
float HelloWorld::changingAngleAccordingToCoordinateSystem(CCPoint imageCenter, CCPoint touchLocation, float calculatedAngle){

//Consideration :- all Angles is in Degree 
if((calculatedAngle >= 0 && calculatedAngle <= 90) || (calculatedAngle >= 90 && calculatedAngle <= 180)){
    //Ist quardant
    calculatedAngle = calculatedAngle;
}
else if(calculatedAngle < 0 && calculatedAngle >= -90){
    //IInd quardant
    calculatedAngle = 270 + (90 + calculatedAngle);
} 
else if(calculatedAngle < -90 && calculatedAngle >= -180){
    calculatedAngle = 180 + (180 + calculatedAngle);
}

return calculatedAngle;
}

//Rotate cannon direction toward touch point
float diff_X = touchLocation.x - myImage->getPosition().x;
float diff_Y = touchLocation.y - myImage->getPosition().y;
CCPoint diffPoint = CCPoint(diff_X, diff_Y);
float angleRadians = atan2f(diffPoint.y,diffPoint.x);
angleRadians = CC_RADIANS_TO_DEGREES(angleRadians);
angleRadians = HelloWorld::changingAngleAccordingToCoordinateSystem(myImage->getPosition(), touchLocation, angleRadians);
myImage->setRotation(-angleRadians); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T04:45:48.593

我用这段代码来旋转我的精灵。我正在根据我的加速度计读数移动精灵。

```
float angleRadians =-accelX;
float angleDegrees = CC_RADIANS_TO_DEGREES(angleRadians);
objGlider->sprite_Glider.rotation = cocosAngle; 
```

核实。慢的原因可能是你可能在代码中使用了 CClog 或 NSLog。

这是完整的代码。

```
if(!boolPlayerDied)
{
    static float prevX=0, prevY=0;
    #define kFilterFactor 1.0f// don't use filter. the code is here just as an example
    float accelX = (float) acceleration.x * kFilterFactor + (1- kFilterFactor)*prevX;
    float accelY = (float) acceleration.y * kFilterFactor + (1- kFilterFactor)*prevY;
    prevX = accelX;
    prevY = accelY;
    accelX = accelX-0.5;// Angle check fot tgfor the player to play
    float angleRadians =-accelX;
    float angleDegrees = CC_RADIANS_TO_DEGREES(angleRadians);
    if(accelX>0)
    {
        cocosAngle = 1.1 * angleDegrees;
    }
    else
    {
        if(accelX<-0.5)
            accelX=-0.5;
        cocosAngle = 1.1  * angleDegrees;
    }
    objGlider->sprite_Glider.rotation = cocosAngle;
} 
```

objGlider 是创建滑翔机精灵的类的对象，而 sprite_Glider 是滑翔机类中使用的精灵。

你可以使用`rotation`属性来旋转你的精灵。在 cocos2Dx 中可能是`setRotation`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T06:13:09.997

首先，更换

```
float angleRadians = atanf((float)diffPoint.y/(float)diffPoint.x);
float angleOffset = CC_DEGREES_TO_RADIANS(180);

if(diffPoint.x < 0){
    angleRadians += angleOffset;
}else{
    angleRadians -= angleOffset;
} 
```

经过

```
float angleRadians = atan2f(diffPoint.y, diffPoint.x); 
```

那么最好立即设置旋转（无需操作）以处理多次频繁触摸。

```
_cannonImage->setRotation(angleRadians); 
```

也许您需要像`setRotation(-angleRadians)`或一样调整旋转`setRotation(angleRadians+90)`- 这取决于您的坐标系。

# c# - c# 每分钟循环一次 - 将代码放在哪里？

> ID：11500119
> 
> 赞同：2
> 
> 时间：2012-07-16T07:50:23.617
> 
> 标签：c#

目前我正在从 java 迁移到 c#，而且我充满了疯狂的问题。我正在 Windows 窗体应用程序上尝试新事物，现在，我想创建一个循环，每 1 分钟执行一次代码，问题是我不知道将这段代码放在哪里。例如，表单结构如下：

```
using System;

namespace Tray_Icon
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {
            notifyIcon1.ShowBalloonTip(5000);

        }

        private void notifyIcon1_BalloonTipClicked(object sender, EventArgs e)
        {
            label1.Text = "Baloon clicked!";
        }

        private void notifyIcon1_BalloonTipClosed(object sender, EventArgs e)
        {
            label1.Text = "baloon closed!";
        }

        private void contextMenuStrip1_Opening(object sender, CancelEventArgs e)
        {

        }

        private void option1ToolStripMenuItem_Click(object sender, EventArgs e)
        {
            //some code here
        }

        private void option2ToolStripMenuItem_Click(object sender, EventArgs e)
        {
            //some code here
        }

        private void option3ToolStripMenuItem_Click(object sender, EventArgs e)
        {
            label1.Text = "Option 3 clicked!";
        }

        private void notifyIcon1_MouseDoubleClick(object sender, MouseEventArgs e)
        {
            option1ToolStripMenuItem_Click(this, null);
        }

        private void closeToolStripMenuItem_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void btnWrite_Click(object sender, EventArgs e)
        {
//code here

        }
    }
} 
```

我应该把循环代码放在哪里？:(

提前感谢任何重播！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T07:51:39.467

在表单中添加计时器：

![在此处输入图像描述](../Images/8fd8f114d071013c0856d862771bc5f6.png)

将其`Interval`属性设置为 60000（以毫秒为单位的一分钟）并`Enabled`设置为`True`：

![在此处输入图像描述](../Images/be59d8aed0fd3aef15f2da1cb0c8427c.png)

并将事件处理程序附加到`Timer.Tick`事件，例如通过双击表单设计器中的计时器：

![](../Images/1c690beb88228fab12aa9ee2366ea011.png)

```
private void timer1_Tick(object sender, EventArgs e)
{
    // do something here. It will be executed every 60 seconds
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-16T07:51:35.927

您必须添加一个计时器，并将间隔设置为 1000 毫秒，然后在 OnTick 事件中添加带有循环的代码

```
Timer tmr = null;
    private void StartTimer()
    {
       tmr = new Timer();
       tmr.Interval = 1000;
       tmr.Tick += new EventHandler<EventArgs>(tmr_Tick);
       tmr.Enabled = true;
    }

    void tmr_Tick(object sender, EventArgs e)
    {
        // Code with your loop here
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:52:50.317

您不能在此处放置任何循环代码。

在您的设计器中查找`Timer`控件。当您拥有它时，将其配置为每分钟运行一次并将您的代码放入`Timer_Tick`事件中。

或者在代码中手动创建一个计时器并响应事件 :) 但是对于初学者来说，由设计师来做会更容易！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T07:54:11.293

将 Timer 组件拖到 Form 上并双击它。你去那里的代码。

Timer 组件在主线程中运行，因此您可以修改 UI 组件而无需担心。

或者，您可以创建一个 System.Timers.Timer，它有自己的线程并具有一些优势，但在修改 UI 组件时可能需要注意。请参阅[http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T07:54:18.407

尝试使用[Background Worker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx?ppud=4)并将代码放在 backgroundWorker.DoWork 或使用 Timer

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T07:56:17.100

使用[`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)：

```
System.Timers.Timer aTimer;

{
    aTimer = new System.Timers.Timer();
    aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
    aTimer.Interval = 60000;
    aTimer.Enabled = true;
}

private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    Console.WriteLine("The Elapsed event was raised at {0}", e.SignalTime);
} 
```

要使用 Timer，请参阅本教程：[C# Timer](http://www.dotnetperls.com/timer)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-16T08:22:17.077

你在Java平台上是怎么做的？

我认为Java应该与.net相同。
实际上，表单程序只是包含事件调度程序的普通程序。事件分派器侦听 UI 事件并将它们分派给事件处理程序。我认为所有的 UI 模式都应该这样，无论是 Java 还是 .net 平台。

所以一般来说，你有两个选择：

1.  从头开始循环。在这种情况下，您应该在 Form 的构造函数中插入代码。
2.  当用户单击按钮时开始循环。在这种情况下，您应该在事件处理函数中插入您的代码。

是的，正如其他人提到的，您应该使用计时器。但这应该在你知道你的代码应该放在哪里之后。您还可以在睡眠呼叫中使用无限循环。但是计时器是一个更好的解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-16T08:23:43.993

计时器的想法更好。但是如果你想使用线程。然后按照这个

1.  让我假设您想从程序开始就这样做
2.  您可以在名为 Form1_Load 的函数体（实际上是事件）中编写为
3.  您的实际代码就在while循环中，其他代码仅用于指导
4.  如果您不知道 C# 中线程的使用，我可以指导

* * *

```
bool button2Clicked = false;
private void Form1_Load(object sender, EventArgs e)
{    
    // A good Way to call Thread
    System.Threading.Thread t1 = new System.Threading.Thread(delegate()
    {
       while (!button2Clicked)
       {
          // Do Any Stuff;
          System.Threading.Thread.Sleep(60000);  //60000 Millieconds=1M
       }
    });
    t1.IsBackground = true;  // With above statement Thread Will automatically
    // be Aborted on Application Exit
    t1.Start();
} 
```

# python - Python 在日志配置文件中设置文件模式

> ID：11500128
> 
> 赞同：4
> 
> 时间：2012-07-16T07:51:21.653
> 
> 标签：python

我正在尝试使用 Python 在文本配置文件中配置记录器。以下是部分内容：

```
[logger_root]
handlers=result
level=NOTSET

[handler_result]
class=handlers.TimedRotatingFileHandler
interval=midnight
backupCount=5
formatter=simple
level=DEBUG
args=('result_log.txt') 
```

我想在每次运行系统时重写日志文件。但不知道如何在文件中设置它。我尝试这个但失败了：

```
args=('result_log.txt',filemode='w') 
```

很多文章都在讨论如何从 Python 代码中设置它。但我想在文件中设置它。怎么做？谢谢。

========================================

编辑：我可以通过以下方式将一些信息写入日志文件“result_log.txt”：

```
result_logger = logging.getLogger('result')
result_logger.debug("info to write") 
```

但我只能“附加”到文件中。我想每次运行时都重写文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:13:56.383

您可以使用以下两种方法之一：-

1.  备份旧的日志文件并使用`RotatingFileHandler`

2.  替换文件本身（前提是您不再需要旧日志）。你可以看看[这个](https://stackoverflow.com/a/5296208/1322460)步骤

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:21:14.907

除了使用 logger 模块，您还可以使用以下模块吗？

```
open("result_log.txt", "w").write("result") 
```

我知道这暂时是一种解决方法，直到有人能够更好地回答这个问题。

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-15T19:55:47.507

实际上，您*可以*从配置文件中设置`filemode`为。`w`您只需要删除显式参数命名，如下所示：

`args=('result_log.txt','w')`

# jquery - 如何在两个 html 元素上绑定事件

> ID：11500134
> 
> 赞同：1
> 
> 时间：2012-07-16T07:51:43.693
> 
> 标签：jquery, html, events, javascript-events

我创建了一个下拉菜单。此菜单通过指向父 div 来打开。当用户离开父 div 或下拉菜单时，我想隐藏这个 div

```
$(function(){
$('.a').live('mouseenter',function(){
    $('#dropdown').stop(false, true).hide();

    var id = $(this).attr('id');
    $('#dropdown').css({
        position:'absolute',
        top: $(this).offset().top + $(this).height() + 'px',
        right: '115px',
        left: $(this).offset().left + 'px',
        zIndex:1000,
        width:'100px'
    });

    $('#dropdown').stop().slideDown(500);

    if($('#dropdown').mouseleave() && $('#'+id).mouseleave()){
        $('#dropdown').slideUp(500);
    }
 });
}); 
```

​现场 **[演示](http://jsfiddle.net/ranasaani/ThzuL/1/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:55:23.167

您可以通过在选择器中用逗号分隔多个元素来绑定到多个元素

```
$('.a, .this, .that, div, form').live(.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:58:10.537

按照@Dale 的建议使用多个选择器，或者对元素使用相同的类并使用

```
$(".commonClass").live(function(){

}); 
```

如果您想将相同的事件绑定到更多元素，您只需要应用`commonClass`到它们而不是添加新的选择器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:58:17.127

试试这个演示： http: [//jsfiddle.net/AQweU/](http://jsfiddle.net/AQweU/) **或** [http://jsfiddle.net/k986c/](http://jsfiddle.net/k986c/)

一些事情;

*   使用`.on`事件而不是现场。
*   使用`this.id`而不是`$(this).attr('id')`.
*   不确定这种情况`if($('#dropdown').mouseleave() && $('#'+id).mouseleave()){`，请参阅下面我所做的代码

请注意问题中的演示有 Jq 1.7.2 因此`.on`使用。

休息结帐代码：（希望它有助于案件）`:)`

```
$(function(){
    $('.a,#dropdown').on('mouseenter',function(){
        $('#dropdown').stop(false, true).hide();

        var id = this.id;
        $('#dropdown').css({
            position:'absolute',
            top: $(this).offset().top + $(this).height() + 'px',
            right: '115px',
            left: $(this).offset().left + 'px',
            zIndex:1000,
            width:'100px'
        });

        $('#dropdown').stop().slideDown(500);

        $('#dropdown, #'+id).mouseleave(function(){   
            $('#dropdown').slideUp(500);

        });
    });
});
​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T08:58:27.693

您必须添加 mouseleave 事件并检查下拉列表，以保持简短，试试[这个](http://jsfiddle.net/ThzuL/7/)

我希望这是你想要的

# android - 使用 Jelly Bean 的简单安全配对（蓝牙）与 NFC 配对

> ID：11500140
> 
> 赞同：7
> 
> 时间：2012-07-16T07:52:25.163
> 
> 标签：android, bluetooth, nfc

从#io2012 和[JellyBean 文档](http://www.android.com/about/jelly-bean/)开始，现在可以通过 NFC 配对蓝牙设备。

这听起来很不错，但我找不到任何关于它的文档。

我特别想知道这是否适用于不支持 SDP 的 SPP 模块——我可以简单地用 PIN-Info 编写一些 NFC 标签并且设备配对吗？会帮助很多在 PIN 配对过程中遇到问题的用户。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T18:47:40.520

JellyBean 支持两种蓝牙配对 NDEF 消息。[由蓝牙 SIG 与 NFC 论坛一起](http://members.nfc-forum.org/resources/AppDocs/NFCForum_AD_BTSSP_1_0.pdf)定义的标准化格式，以及由诺基亚定义的（较旧的）专有格式（请参阅“将诺基亚 6131 NFC 与蓝牙成像设备连接的标签格式是什么？”，[网址：http://www .developer.nokia.com/Community/Wiki/Nokia_6131_NFC_-_FAQs#SDK_APIs](http://www.developer.nokia.com/Community/Wiki/Nokia_6131_NFC_-_FAQs#SDK_APIs)了解一些细节）。

标准化的不提供对 PIN 的支持。它只支持新的简单配对方法。诺基亚类型的消息支持 PIN。但是，当从 Android 读取解析此类蓝牙配对 NDEF 消息的相关源代码时（`parseNokia()`在[HandoverManager](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/nfc/handover/HandoverManager.java)中），您可以看到 PIN 甚至没有从 NDEF 消息中读出。因此，如果在读取标签之前设备未知且之前已配对（在这种情况下NFC 标签仅用作激活连接的一种方式）。

我也有这样的印象，Android 中的这个新功能首先应该适用于耳机等音频设备。我不知道它是否也适用于 SSP 设备（没有设备可以自己测试）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T13:54:08.303

是的，您可以非常简单地创建一个带有蓝牙配对信息的 NFC 标签。无论如何，它仅在设备使用默认引脚时才有效，因为 Android 只会尝试默认引脚 0000 到我所知道的。您可以使用 NXP 的 NFC TagWriter 对此类标签进行编程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T10:45:06.383

您可能想在 GitHub 上查看斯坦福的[EasyNFC 库](https://github.com/Mobisocial/EasyNFC)。

特别是[BluetoothConnector](http://mobisocial.github.com/EasyNFC/apidocs/reference/mobisocial/nfc/addon/BluetoothConnector.html)似乎很有趣，因为它“帮助开发人员在设备之间建立持久的蓝牙连接”。

# sql - Sqlite 联合和排序顺序

> ID：11500143
> 
> 赞同：3
> 
> 时间：2012-07-16T07:52:49.357
> 
> 标签：sql, sqlite, sql-order-by, union

```
select 'none', '0'
union
select * from category where id='2' 
```

我可以检索上述sqlite 查询的输出，因为'none' 应该始终是第一项吗？即我想阻止两个结果集的组合排序。请帮助...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T07:58:42.010

```
select * from
(
select 'none' as col1, '0' as col2 union  select  * from category where id='2' 
) t
order by case when col1='none' then 0 else 1 end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T07:57:12.103

我会避免`SELECT *`在联合查询中使用

```
SELECT 'none', '0', 0 AS sort
UNION
SELECT col1, col2, 1 AS sort
FROM category
WHERE id = '2'
ORDER BY sort ASC 
```

# iphone - 如何随时间将 NSString 转换为 NSDate？

> ID：11500147
> 
> 赞同：1
> 
> 时间：2012-07-16T07:53:06.457
> 
> 标签：iphone, objective-c, ios, nsdate, nsdateformatter

我正在尝试将 an 转换`NSString`为`NSDate`time 。这就是我现在正在做的事情：

```
 NSString *myDateIs= @"2012-07-14 11:30:40 AM ";
 NSDateFormatter* startTimeFormat = [[NSDateFormatter alloc] init];
 [startTimeFormat setDateFormat:@"YYYY-MM-dd hh:mm:ss a "];
 NSDate*newStartTime = [startTimeFormat dateFromString:myDateIs]; 
```

输出是`2012-07-14 06:00:40 +0000`。日期正确，但时间不正确。我怎样才能得到正确的时间？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:01:49.277

你得到的时间是格林威治标准时间，把它转换成当地时间。

```
NSDateFormatter* local = [[[NSDateFormatter alloc] init] autorelease];        
[local setTimeZone:[NSTimeZone timeZoneWithName:@"EST"]];
[local setDateFormat:@"YYYY-MM-dd hh:mm:ss a"];

NSString* localSTR = [local stringFromDate: newStartTime]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:01:28.100

时区。NSDate 将以 GMT 格式存储时间。但是，您的本地时区可能完全不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:06:17.187

您需要设置时区。

```
NSString *myDateIs= @"2012-07-14 11:30:40 AM ";
NSDateFormatter* startTimeFormat = [[NSDateFormatter alloc] init];
startTimeFormat.timeZone=[NSTimeZone timeZoneWithName:@"UTC"];
[startTimeFormat setDateFormat:@"YYYY-MM-dd hh:mm:ss a"];
NSDate*newStartTime = [startTimeFormat dateFromString:myDateIs];
NSLog(@"%@", newStartTime); 
```

输出：

```
 2012-07-14 11:30:40 +0000 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T08:08:22.470

这个对你有用：

```
[startTimeFormat setDateFormat:@"YYYY-MM-dd hh:mm:ss aa"];
[startTimeFormat setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]]; 
```

您错过了 dateFormat 的 a 并且必须设置 timeZone。

# linux - 如何使用 awk 或 sed 在 linux 中进行算术运算并将结果通过管道传输到文件

> ID：11500149
> 
> 赞同：2
> 
> 时间：2012-07-16T07:53:14.320
> 
> 标签：linux, awk, arithmetic-expressions

遇到这个问题，我正在用墙壁敲打我的头，请帮忙。

我有两个文件 Sheetthickness.k 包含一个初始厚度值和 minThick.k 包含最终厚度只有一个数字。我想计算厚度减少的百分比，所以我使用了。

```
fina="$(cat minThick.k)";
echo $fina
init="$(cat Sheetthickness.k)";
echo $init 

echo |awk "{ print ($init-$fina)/($init) }" > LSDynaResponse.txt 
```

在没有其他命令且文件已经存在的 shell 中，它可以完美运行，但是当文件由软件创建然后使用这些命令时，它会出错。

```
awk: { print (-)/() }  
awk:           ^ syntax error
awk: { print (-)/() }
awk:            ^ syntax error
awk: { print (-)/() }
awk:             ^ unterminated regexp 
```

还有其他优雅的方式来完成这项任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:13:43.483

听起来你有空文件或根本没有文件，试试这样：

```
fina="$(cat minThick.k)"       || echo "No min file!!"
[[ -z $fina ]]                 && echo "Null min value!!"
echo $fina
init="$(cat Sheetthickness.k)" || echo "No init file!!"
[[ -z $init ]]                 && echo "Null init value!!"
echo $init
echo "($init-$fina)/($init)"   | bc -l > LSDynaResponse.txt 
```

# mysql - MYSQL Left Join 如何选择 NULL 值？

> ID：11500150
> 
> 赞同：35
> 
> 时间：2012-07-16T07:53:14.727
> 
> 标签：mysql, sql, join

这是我关于 MySQL 中表连接的最后一个问题的后续问题

我需要能够从左连接表中选择 NULL 值。

这是我的加入：

```
table1.id | table1.name | table2.id | table2.surname
        1 |        John |         1 |            Doe
        2 |     Michael |         2 |       Anderson
        3 |        Anna |      NULL |           NULL
        4 |         Sue |      NULL |           NULL 
```

我想要`select WHERE table2.surname = NULL`，但是这样的查询不起作用：

```
SELECT table1.*,table2.*
FROM table1
LEFT JOIN table2
    ON table1.id=table2.id
WHERE table2.surname=NULL 
```

我可以稍微理解它背后的逻辑，没有给我任何结果，但一定有办法抓住它们的结果吗？

感谢任何帮助。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-16T07:54:43.733

要比较`NULL`值，您必须使用`IS NULL`谓词，如下所示：

```
SELECT table1.*, table2.*
FROM table1
LEFT JOIN table2 ON table1.id=table2.id
WHERE table2.surname IS NULL 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-16T07:54:57.407

您必须使用`IS NULL`而不是`= NULL`：

```
WHERE table2.surname IS NULL 
```

你不能简单地做`= NULL`的原因是因为`NULL`本质上是一个“未知”并且不能***等于***或***不等于***任何东西（甚至不是它自己），所以试图将它与某个东西进行比较，就好像它应该是一个完全匹配的东西只会返回`NULL`而不是预期的布尔值`0`or `1`，这正是您的查询返回空结果的原因。

*"is unknown"*和*"equals unknown"*之间有明显的区别。您当然可以测试某事物**是否**未知或**不**未知，但您无法测试某事物是否***“等于”***未知，因为 unknown 是*unknown*，而且它没有意义。

此外，由于您使用的是 MySQL，因此另一个选项是使用`table2.surname <=> NULL`，其中`<=>`是 MySQL 特定的 NULL 安全比较运算符，但尽量不要使用它并坚持使用标准 SQL 方式（`IS NULL`/ `IS NOT NULL`）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-16T07:54:50.417

尝试：

```
SELECT table1.*,table2.* 
FROM table1 
  LEFT JOIN table2 ON table1.id=table2.id 
WHERE table2.surname IS NULL 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T03:08:19.500

根据[MySQL 规范](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)，您应该使用“IS NULL”而不是“= NULL”。它说“（NULL = NULL）等于NULL”。但是 NULL 在用作布尔值时等于 False。

# google-analytics - 谷歌分析分割内容

> ID：11500151
> 
> 赞同：0
> 
> 时间：2012-07-16T07:53:22.783
> 
> 标签：google-analytics

我正在尝试按 url 分割我的页面。因此，例如，我创建了一个段，说明我的页面必须以：

```
/viewtopic.php?f=4 
```

看起来没问题，因为它只在统计图中显示了我全部流量的百分比。我不明白为什么它会在图表下方的表格中显示我的所有流量？它不应该只显示“分段”页面吗？我是否必须使用表格顶部的“搜索”再次过滤它？我只显示此段，而不是默认查看所有流量。

编辑：事实上，它并没有在表格中显示我的全部流量，但它仍然显示了以我的模式开头的页面之外的其他页面。我不明白它是如何过滤的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:29:16.287

我遇到了同样的问题——我目前的工作理论是，这与这些高级细分基于访问量而不是页面浏览量这一事实有关。因此，您在下面看到的页面列表是在同一次访问中看到符合您的细分标准的页面的人查看的页面列表。如果您真正想要的只是该段中页面的列表，那么这不是很有帮助。

# ruby - WebDriver 测试后关闭 Internet Explorer

> ID：11500155
> 
> 赞同：3
> 
> 时间：2012-07-16T07:53:35.667
> 
> 标签：ruby, internet-explorer, webdriver

我在**Ruby中运行****WebDriver**测试，但在关闭**Internet Explorer**浏览器时遇到问题：当我想关闭浏览器的窗口时，IE 会弹出提示“**您确定要离开此页面**”，并且有两个选项是可用“离开此页面”和“留在此页面上”。

 ******我尝试了几种关闭浏览器的方法，但都没有成功：

```
driver.quit
driver.close 
```

WebDriver 也不会将此弹出窗口识别为 JavaScript 弹出窗口，因此

```
driver.alert.ok 
driver.switch_to.alert 
```

方法也不适用。我正在使用**IE9**和**IEDriverServerx86 v. 2.24.2**

感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T08:16:41.873

您需要先抑制`onbeforeunload`事件：

```
driver.execute_script "window.onbeforeunload = function(e){};"
driver.quit 
```******

# c# - 静态构造函数的用处

> ID：11500159
> 
> 赞同：1
> 
> 时间：2012-07-16T07:53:53.723
> 
> 标签：c#, static, constructor

> **可能重复：**
> [静态构造函数有什么用？](https://stackoverflow.com/questions/4506990/what-is-the-use-of-static-constructors)

*来自 MSDN：* - **“如果静态构造函数引发异常，运行时将不会再次调用它，并且该类型将在程序运行的应用程序域的生命周期内保持未初始化。”**

您还会使用静态构造函数进行编程构造吗？在这里，我试图列出不应该通过使用静态构造函数来利用 CLR 提供的好处的场景。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T08:00:10.417

> 您还会使用静态构造函数进行编程构造吗？

有时，是的 - 但仅适用于极不可能引发异常的小事情*......*或者失败代表应用程序根本无法使用的灾难场景。

请注意，您引用的所有内容都适用于*任何*静态初始化 - 不仅仅是静态构造函数。因此，如果您有：

```
private static readonly List<int> SomeValues = new List<int> { 1, 2, 3 }; 
```

那么这仍然受到相同的限制。从根本上说，如果类型初始化失败，您的类型将无法使用。这真的不足为奇，并不意味着它没有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:04:07.200

> 您还会使用静态构造函数进行编程构造吗？

是的。但是静态构造函数永远不应该抛出异常，我们不应该责怪静态构造函数......

```
When not use static constructor 
```

真正花费很多的初始化，我会改用惰性属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:58:50.740

由于在第一次访问*类型*的精确时刻`static constructor`仅调用*一次*，因此在程序运行时跟踪该信息可能会变得有用。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T07:59:57.343

它用于初始化静态变量，所以如果你有它们，你可能应该使用它。

看看这个另一个问题，它甚至可能是重复 [的：静态构造函数有什么用？](https://stackoverflow.com/questions/4506990/what-is-use-of-static-constructors)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T08:13:05.440

如果您想以稍微复杂的方式初始化静态成员，有时您必须使用它。

当然，如果您编写复杂的代码，您可能会遇到一些异常，例如文件不存在，网络无法正常工作。但是，如果你真的知道你在做什么，你就可以做到。

所以问题不在于你是否应该使用静态构造函数，而在于你如何设计你的软件？为什么要使用具有复杂初始化需求的静态对象？如果你只想拥有一个全局唯一的对象，你可以考虑单例模式。*

# c# - 关于使用带有外键的 linq 保存数据

> ID：11500162
> 
> 赞同：0
> 
> 时间：2012-07-16T07:54:00.113
> 
> 标签：c#, linq, foreign-keys

我遇到了一个问题，其中涉及使用 linq 查询的外键。就像这样，我有 2 个表，“站”和“位置”。它们使用它们的主要链接到另一个表“locationstation”。我需要从“站”表中获取站名和“位置”表中的位置。

这是我用来连接所有 3 个表并在数据网格视图中显示的代码。

```
private void Create_LS_Load(object sender, EventArgs e)
    {
        using (testEntities Setupctx = new testEntities())
        {
            var storeStation = (from SLS in Setupctx.locationstations
                                        join station s in Setupctx.stations on SLS.idStation equals s.idstations
                               select s.Station1).Distinct().ToList();                                   
            foreach (var LocationStation in storeStation)
            {
                cbStation.Items.Add(LocationStation);
            }

            var storeLocation = (from SLS in Setupctx.locationstations
                                join location l in Setupctx.locations on SLS.idLocation equals l.idlocation
                                select l.Location1).Distinct().ToList();                                      
            foreach (var LocationStation1 in storeLocation)
            {
                cbLocation.Items.Add(LocationStation1);
            }
        }
    } 
```

在完成显示到数据网格视图后，我将站名和位置名绑定到两个相应的组合框中。这是我绑定的代码。

```
string selectStation = cbStation.SelectedItem.ToString();
            string selectLocation = cbLocation.SelectedItem.ToString(); 
```

之后，我需要通过使用组合框选择站点和位置来创建新的“locationstation”。我怎么做？“locationstation”下的列名仍然是“station”和“location”的id 如何实际创建新的locationstation？我迷路了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:39:17.343

You're close - you just need to grab the **whole** selected object when you're done - not just the name as a string:

```
Station selectedStation = cbStation.SelectedItem as Station;
Location selectedLocation = cbLocation.SelectedItem as Location; 
```

Now, you have access to all the necessary properties on that object - you can extract the `Name`, the `ID` and whatever else you might need to build up your new entity (or entities).

# .net - 将 OperationContext 保存在任务并行库中

> ID：11500164
> 
> 赞同：4
> 
> 时间：2012-07-16T07:54:04.233
> 
> 标签：.net, wcf, task-parallel-library, operationcontext

我们在深度抽象程序集中的某个地方有一个从 OperationContext.Current 读取数据的 WCF 行为，当从任务中执行此代码时，OperationContext.Current 为空，是否可以在抽象程序集中解决这个问题，或者我们会需要向这个程序集的所有消费者添加一些代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-12T10:38:41.370

面临着类似的问题。正在通过任务调用服务。下面的代码片段解决了。是通过在调用服务完成之前强制转换提供的变量来`OperationContext.Current`显式设置的。`state``Task`

```
Task<int> taskContactsCount = Task.Factory.StartNew<int>((state) =>
        {
            int count = 0;
            try
            {
                OperationContext.Current = (OperationContext)state;
                TestServiceClient testServiceProxy = new TestServiceClient();
                var count = testServiceProxy.GetCount();
            }
            catch (Exception ex)
            {
            }
            return contactsCount;
        }, OperationContext.Current); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T19:46:02.193

在创建[`Task`实例](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)时，您应该使用闭包，如下所示：

```
// The operation context.
OperationContext oc = OperationContext.Current;

Task t = Task.Factory.StartNew(() => {
    // Do something with context here, it will be valid for
    // the life of the operation.
}; 
```

您还可以调用带参数的[重载并将`StartNew`](http://msdn.microsoft.com/en-us/library/dd321456)[实例](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.aspx)传入，在需要时在 中进行转换和使用，如下所示：`state`[`OperationContext`](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.aspx)`Task`

```
Task t = Task.Factory.StartNew(s => {
    // s is an object, so need to cast here.
    var oc = (OperationContext) c;

    // Work with the OperationContext.
},
// Note, this is passed to the delegate through the 's' parameter.
OperationContext.Current); 
```

请注意，在这两种情况下，`OperationContext`这只会对操作的生命周期有益。操作的完成应该依赖于`Task`.

如果您正在启动一个`Task`将在操作完成*后*运行的，那么您应该将您需要的值从另一个结构中复制`OperationContext`到另一个结构中并将它们传递*给*您`Task`的处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T14:26:51.263

似乎唯一的方法是向 CallContext 添加一些东西，就像存储当前的 Principal 一样......

# css - 检查 CSS 文件中是否存在所有背景图像

> ID：11500171
> 
> 赞同：3
> 
> 时间：2012-07-16T07:54:32.537
> 
> 标签：css, background-image

是否有可能检查 CSS 文件中是否存在所有背景图像？

不使用页面上的每个选择器，以便它出现在 Firebug NET 选项卡中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:01:07.560

CSS 中没有办法做到这一点，因为标准规定*“图像为空（零宽度或零高度）、无法下载或无法显示（例如，因为它不在受支持的图像中）格式）[...] 什么都不画”*（[引用](http://www.w3.org/TR/css3-background/#the-background-image)）。

您必须解析 CSS 文件并检查所有路径。您可以在浏览器中使用 JavaScript 执行此操作，但是我相信编写 Python 脚本甚至是解析 CSS 文件并检查文件是否实际存在的小型二进制应用程序会更容易。

# iphone - Index 0 beyond bounds [0 .. 0], but not an empty array

> ID：11500176
> 
> 赞同：0
> 
> 时间：2012-07-16T07:55:05.317
> 
> 标签：iphone, xcode, nsarray, nsurl, nslog

I have a `UITableView` for an app I am creating that will show Movie Trailers.

In my `RootViewController.h` file I have this code (well all of the relevant code needed is supplied here):

```
@interface RootViewController : UITableViewController {
    NSMutableArray *listOfLinks;
} 
```

In my .m is this code:

```
- (void)viewDidLoad {
    [super viewDidLoad];
    listOfLinks = [[NSMutableArray alloc] init];
    NSURL *myurl2 = [NSURL URLWithString:@"http://website.com/movietrailers.plist"];
    NSDictionary *plistDict2 = [NSDictionary dictionaryWithContentsOfURL:myurl2];
    NSArray *plistArray2 = [plistDict2 objectForKey:@"MovieLinks"];
    NSDictionary *dic = [NSDictionary dictionaryWithObject:plistArray2 forKey:@"MovieLinks"];
    [listOfLinks addObject:dic];
    NSLog(@"%@", listOfLinks);
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSURL *movieURL = [listOfLinks objectAtIndex:indexPath.row];
    MPMoviePlayerViewController *moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
    [self presentMoviePlayerViewControllerAnimated:moviePlayer];
    [moviePlayer release];
} 
```

My plist looks like this:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>MovieTitles</key>
    <array>
        <string>Movie 1</string>
        <string>Movie 2</string>
    </array>
    <key>MovieLinks</key>
    <array>
        <string>http://trailerserver.com/movie1.mp4</string>
        <string>http://trailerserver.com/movie2.mp4</string>
    </array>
</dict>
</plist> 
```

But I am essentially getting the error that `listOfLinks` is empty. The error looks like this:

```
Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 6 beyond bounds [0 .. 0]' 
```

When I `NSLog` the array it prints out it's strings. What is the reason for this? Thanks for your help!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:01:38.480

You added 1 dictionary to an array and are now trying to get the 6th item, you only have one. When you log it, you see the contents of the single dictionary you have there.

When you are doing the numberOfRowsInSection you are probably returning the count of the dictionary, not the array, and I am guessing you want the dictionary, so you should have

```
NSDictionary* d = [listOfLinks objectAtIndex:0];
NSURL *movieURL = [[listOfLinks [d allKeys]] objectAtIndex: indexPath.row];
MPMoviePlayerViewController *moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL] 
```

or something along those lines

*EDIT* for your updated question.

I am not sure why you are storing the info in a dictionary. In fact you are getting an array of elements from a dictionary, then creating a dictionary with it and putting it in an array. That makes no sense.

In your part of the code where you go:

```
NSDictionary *plistDict2 = [NSDictionary dictionaryWithContentsOfURL:myurl2];
NSArray *plistArray2 = [plistDict2 objectForKey:@"MovieLinks"]; 
```

this would appear you have an array at that moment, so why do you do this:

```
NSDictionary *dic = [NSDictionary dictionaryWithObject:plistArray2 forKey:@"MovieLinks"];
[listOfLinks addObject:dic]; 
```

which creates a dictionary and puts the dictionary in element 0 of an array?

If you want listOfLinks to contain a list of links that you get from the MovieLinks key, why not put them straight into the array?

```
if(plistArray2 != nil && [plistArray2 count] > 0)
    [listOfLinks addObjectsFromArray:plistArray2]; 
```

then in your accessors:

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if(section == WHATEVERSECTION)
        return [listOfLinks count];
    return 0;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    NSURL *movieURL = [listOfLinks objectAtIndex:indexPath.row];
    MPMoviePlayerViewController *moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
    [self presentMoviePlayerViewControllerAnimated:moviePlayer];
    [moviePlayer release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:01:01.007

Check table view's numberOfRowsInSection method. What you are returning in this method. write

```
 [listOfLinks count] 
```

in this method

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:01:12.040

You are putting a NSDictionary inside the listOFLinks and then you are trying to retrieve a NSURL, that's wrong.

You need to get the URL that is inside the dictionary and inside the array.

Good luck!

# git - 接收本地仓库推送时如何识别分支名称？

> ID：11500183
> 
> 赞同：1
> 
> 时间：2012-07-16T07:56:00.020
> 
> 标签：git, version-control, githooks

每次从本地存储库接收到传入推送时，我都想用传入的推送来识别分支的名称。我打算在更新挂钩中使用分支名称。请让我知道如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:38:38.783

分支名称是更新前挂钩中的第一个参数。第二个是旧版本，第三个是新版本。最后两个参数为您提供了被推送的图形的范围。

# .htaccess - htaccess 允许国家域名

> ID：11500192
> 
> 赞同：0
> 
> 时间：2012-07-16T07:57:07.903
> 
> 标签：.htaccess, dns, block, country

我想屏蔽除我的文莱以外的所有国家。域名是.bn

```
<Limit GET POST PUT>
order deny,allow
deny from all
allow from .bn
allow from *.bn
allow from *.*.bn
allow from *.*.*.bn
</Limit> 
```

我的姓名地址：smp-85-139.simpur.net.bn 所以我相信下面的代码有效：

```
allow from *.*.*.bn 
```

但我仍然被禁止访问。这里有什么遗漏吗？

* * *

我尝试了IP但仍然被阻止..

```
<Limit GET POST PUT>
order deny,allow
deny from all
allow from 202.152.*.*
</Limit> 
```

我的IP是202.152.85.139

* * *

更新：看来我的网络主机正在使用 nginx，所以如果我是对的，这个设置根本不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:14:07.027

这是文莱达鲁萨兰国的 .htaccess 允许列表，由[Country IP Blocks](https://www.countryipblocks.net)提供。截至 2013 年 4 月 20 日，数据是正确且最新的。

如果您的托管公司允许您使用 .htaccess，您可以将以下数据复制并粘贴到 .htaccess 文件中，然后将其加载到您的根目录中：

```
<Limit GET POST>
order deny,allow
allow from 61.6.192.0/18
allow from 103.4.188.0/22
allow from 103.12.208.0/23
allow from 103.16.120.0/22
allow from 103.17.24.0/22
allow from 103.18.172.0/22
allow from 103.20.24.0/22
allow from 118.103.248.0/21
allow from 119.160.128.0/18
allow from 156.31.0.0/16
allow from 158.161.0.0/16
allow from 192.94.122.0/24
allow from 202.12.26.0/24
allow from 202.59.230.0/24
allow from 202.90.36.0/24
allow from 202.93.208.0/20
allow from 202.152.64.0/19
allow from 202.160.0.0/19
allow from 202.160.32.0/20
deny from all
</Limit> 
```

# c - 使用正则表达式匹配 C 中的函数和函数调用

> ID：11500194
> 
> 赞同：4
> 
> 时间：2012-07-16T07:57:19.210
> 
> 标签：c, regex, syntax-highlighting

我对正则表达式相当陌生，因此我使用正向前瞻编写了以下简单的正则表达式，该正则表达式检测 C 源文件中的函数和函数调用-

```
\w+(?=\s*\() 
```

它工作正常，但问题是它也检测到非函数语法，如`if()`,`while()`等等。我可以很容易地避免这种情况：

```
(if(?!\()) | (while(?!\()) 
```

但问题是如何将第二个正则表达式与第一个正则表达式结合起来？我不能`OR`，因为第一个仍然匹配`if()`，`while()`等等，并且在`OR`表达式中，如果其中一个术语匹配就足够了。

如何组合这些正则表达式或有一个更好更简单的不匹配非函数语法，如`if()`，`while()`

**PS**：我使用以下工具来测试我的正则表达式

[斯金纳](http://www.gskinner.com/RegExr/)

[正则表达式](http://regexpal.com/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T08:44:58.483

当您使用正则表达式在 C 中搜索函数调用时，有很多假设。除此之外，如果您对匹配的内容感到满意（存在不会匹配的有效函数调用），并且您想从结果列表中排除`if`并`while`从结果列表中排除，则可以使用以下正则表达式：

```
(?!\b(if|while|for)\b)\b\w+(?=\s*\() 
```

正则表达式使用单词边界`\b`来确保匹配全名（防止`hile`in 的部分匹配`while`），并且全名不是关键字（防止拒绝`whilenothinghappens`）。

# c# - 想在asp .net mvc 3中更新表行

> ID：11500198
> 
> 赞同：1
> 
> 时间：2012-07-16T07:57:49.887
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4.1

我的表中有 2 列名为`CreatedOn`and `ModifiedOn`。当然，在表单中我不想显示这两个字段，即使在隐藏字段中也是如此。当我发布相同的表格时，我想`ModifiedOn`通过 Current DateTime 更改并希望保持`CreatedOn`原样。但由于我没有隐藏的文件名 CreatedOn，它在数据库中将其设置为 null。所以我然后我使用了下面的代码

```
public ActionResult Edit(User user)
{ 
            if (ModelState.IsValid)
            {

                var OldInsObj = db.Users.Find(user.UserId);
                DateTime UsersDateCreated = (DateTime)db.Entry(OldInsObj).Property("UsersDateCreated").CurrentValue;

                user.UsersDateCreated = UsersDateCreated;

                user.UsersDateModified = DateTime.Now;

                db.Entry(user).State = EntityState.Modified;

                db.SaveChanges();
                return RedirectToAction("Index");
                }
} 
```

我收到此错误

```
An object with the same key already exists in the ObjectStateManager. The ObjectStateManager cannot track multiple objects with the same key. 
```

我该如何解决这个问题？

请不要提供任何博客链接以供阅读，我已经阅读了其中一些但无法阅读。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:24:18.550

有几种方法可以解决此问题。您可以在附加新实例之前分离旧对象

```
public ActionResult Edit(User user)
{ 
        if (ModelState.IsValid)
        {
            var OldInsObj = db.Users.Find(user.UserId);
            DateTime UsersDateCreated = OldInsObj.UsersDateCreated;

            user.UsersDateCreated = UsersDateCreated;
            user.UsersDateModified = DateTime.Now;

            db.Entry(OldInsObj).State = EntityState.Detached;

            db.Entry(user).State = EntityState.Modified;

            db.SaveChanges();
            return RedirectToAction("Index");
        }
 } 
```

您可以更新从数据库中检索到的实体实例。

```
public ActionResult Edit(int userId)
{ 
        var user = db.Users.Find(userId);

        if (TryUpdateModel(user))
        {                
            user.UsersDateCreated = UsersDateCreated;

            user.UsersDateModified = DateTime.Now;

            db.SaveChanges();
            return RedirectToAction("Index");
        }
 } 
```

或者您可以使用 Automapper 将实例的值复制`user`到`OldInsObj`实例。

```
public ActionResult Edit(User user)
{ 
        if (ModelState.IsValid)
        {
            var OldInsObj = db.Users.Find(user.UserId);
            DateTime UsersDateCreated = OldInsObj.UsersDateCreated;

            OldInsObj = Mapper.Map(user);

            OldInsObj.UsersDateCreated = UsersDateCreated;
            OldInsObj.UsersDateModified = DateTime.Now;

            db.SaveChanges();
            return RedirectToAction("Index");
        }
 } 
```

# iphone - 更改枚举类型值

> ID：11500199
> 
> 赞同：1
> 
> 时间：2012-07-16T07:57:52.910
> 
> 标签：iphone, objective-c, ios, xcode, enums

您好，我正在使用图书馆。它在枚举中嵌入了一些选项，但我不知道如何配置它们。该库称为[PPRevealSideViewController](https://github.com/ipup/PPRevealSideViewController/ "PPRevealSideViewController")。它有一个属性：

```
@property (nonatomic, assign) PPRevealSideOptions options; 
```

这是枚举代码：

```
enum {
    PPRevealSideOptionsNone = 0,
    PPRevealSideOptionsShowShadows = 2 << 1, /// Disable or enable the shadows. Enabled by default
    PPRevealSideOptionsBounceAnimations = 1 << 2, /// Decide if the animations are boucing or not. By default, they are
    PPRevealSideOptionsCloseCompletlyBeforeOpeningNewDirection = 1 << 3, /// Decide if we close completely the old direction, for the new one or not. Set to YES by default
    PPRevealSideOptionsKeepOffsetOnRotation = 1 << 4, /// Keep the same offset when rotating. By default, set to no
    PPRevealSideOptionsResizeSideView = 1 << 5, /// Resize the side view. If set to yes, this disabled the bouncing stuff since the view behind is not large enough to show bouncing correctly. Set to NO by default
};
typedef NSUInteger PPRevealSideOptions; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:01:31.610

```
obj.options = opt0 | opt1 | ... etc 
```

例如：`obj.options = PPRevealSideOptionsBounceAnimations | PPRevealSideOptionsResizeSideView;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:49:43.320

为此，我制作了这个控制器的文档。好吧，我的错，这种方法不是很突出，但确实存在：您可以使用重置选项`- (void) resetOption:(PPRevealSideOptions)option;`（后面，它是低级`_options ^= option;`的：）或使用设置选项`- (void) setOption:(PPRevealSideOptions)option`。甚至还有一个 setOptionS 方法；）

# sql-server-2008 - SQl 查询以 HH:MM 格式计算总计

> ID：11500201
> 
> 赞同：0
> 
> 时间：2012-07-16T07:58:07.740
> 
> 标签：sql-server-2008

我有一个表（生产），它有一个名为 TimeSpent 的列，该列的数据类型是 varchar，它以 HH:MM 格式存储数据，例如 10:23,14:59,11:00 等。我想写sql 中的一个查询将对此求和，并仅以 HH:MM 格式给我一个总数。我尝试了这样的事情，但收到错误“从字符串转换日期和/或时间时转换失败。”：-

```
select CAST
(
(SUM (datepart(hh, convert (varchar, timespent, 108))) +
(sum(datepart(mi, convert (varchar, timespent, 108)))/60) ) AS VARCHAR(2)
)
+ ':' +
CAST
(
sum(datepart(mi, convert (varchar, timespent, 108))) - 60 * (sum(datepart(mi, convert (varchar, timespent, 108)))/60)
 as VARCHAR(2)) from production 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:38:27.253

查询对我有用，我刚刚更新了我的表并将 TimeSpent 的大小从 varchar(60) 减小到 Varchar(25) 并且它是固定的。

```
select CAST
(
(SUM (datepart(hh, convert (varchar, timespent, 108))) +
(sum(datepart(mi, convert (varchar, timespent, 108)))/60) ) AS VARCHAR(2)
)
+ ':' +
CAST
(
sum(datepart(mi, convert (varchar, timespent, 108))) - 60 * (sum(datepart(mi, convert (varchar, timespent, 108)))/60)
 as VARCHAR(2))from production 
```

# node.js - 如何仅在丢失的路线上将 Express.js 设置为 404？

> ID：11500204
> 
> 赞同：54
> 
> 时间：2012-07-16T07:58:18.370
> 
> 标签：node.js, express

目前，我在所有其他路线下方有以下内容：

```
app.get('*', function(req, res){
  console.log('404ing');
  res.render('404');
}); 
```

根据日志，即使上面匹配了路由，它也会被触发。我怎样才能让它只在没有匹配的时候触发？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-07-16T08:05:09.460

您只需将其放在所有路线的末尾即可。

看一下[Passing Route Control](http://expressjs.com/guide.html#passing-route%20control)的第二个例子：

```
var express = require('express')
  , app = express.createServer();

var users = [{ name: 'tj' }];

app.all('/user/:id/:op?', function(req, res, next){
  req.user = users[req.params.id];
  if (req.user) {
    next();
  } else {
    next(new Error('cannot find user ' + req.params.id));
  }
});

app.get('/user/:id', function(req, res){
  res.send('viewing ' + req.user.name);
});

app.get('/user/:id/edit', function(req, res){
  res.send('editing ' + req.user.name);
});

app.put('/user/:id', function(req, res){
  res.send('updating ' + req.user.name);
});

app.get('*', function(req, res){
  res.send('what???', 404);
});

app.listen(3000); 
```

或者，您可以什么都不做，因为所有不匹配的路由都会产生 404。然后您可以使用此代码显示正确的模板：

```
app.error(function(err, req, res, next){
    if (err instanceof NotFound) {
        res.render('404.jade');
    } else {
        next(err);
    }
}); 
```

它记录在[错误处理](http://expressjs.com/guide/error-handling.html)中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-10T21:43:35.477

我敢打赌，您的浏览器正在跟进对 favicon 的请求。这就是为什么您在请求页面的 200 成功之后在日志中看到 404 的原因。

设置网站图标路由。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-11T05:07:57.993

希望对您有所帮助，我在路线底部使用了此代码

```
router.use((req, res, next) => {
    next({
        status: 404,
        message: 'Not Found',
    });
});

router.use((err, req, res, next) => {
    if (err.status === 404) {
        return res.status(400).render('404');
    }

    if (err.status === 500) {
        return res.status(500).render('500');
    }

   next();
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-25T16:00:43.650

你可以在所有路线的尽头，

```
const express = require('express');
const app = express();
const port = 8080;

// All your routes and middleware here.....

app.use((req, res, next) => {
    res.status(404).json({
        message: 'Ohh you are lost, read the API documentation to find your way back home :)'
    })
})

// Init the server here,
app.listen( port, () => {
    console.log('Sever is up')
})
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-08T04:41:33.173

我想要一个只能在丢失的路线上呈现我的 404 页面的所有内容，并在错误处理文档[https://expressjs.com/en/guide/error-handling.html中找到它](https://expressjs.com/en/guide/error-handling.html)

```
app.use(function (err, req, res, next) {
  console.error(err.stack)
  res.status(404).render('404.ejs')
}) 
```

这对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-20T18:08:24.457

你可以用这个

```
const express = require('express');
const app=express();
app.set('view engine', 'pug');
app.get('/', (req,res,next)=>{
    res.render('home');
});
app.use( (req,res,next)=>{
    res.render('404');
})
app.listen(3000); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-24T11:40:30.947

很简单，你可以添加这个中间件。

```
app.use(function (req, res, next) {
//Capture All 404 errors
  res.status(404).render("404.ejs")
}) 
```

服务中的 404 错误通常用于表示请求的资源不可用。在本文中，我们将了解如何处理 express 中的 404 错误。

# ios - IOS视频文件在应用程序启动时自动播放

> ID：11500207
> 
> 赞同：0
> 
> 时间：2012-07-16T07:58:31.690
> 
> 标签：ios, file, video

如何自动播放视频而无需按下播放按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:26:50.153

```
 MPMoviePlayerController *player = [[MPMoviePlayerController alloc]initWithContentURL:[NSURL fileURLWithPath:@"yourVideoPath"]];
player.shouldAutoplay=YES;
player.view.frame = CGRectMake(0.0, 0.0, 480.0, 320.0);
player.movieSourceType = MPMovieSourceTypeFile;    
player.controlStyle = MPMovieControlStyleEmbedded;

[self.view  addSubview:player.view]; 
```

这应该可以解决您的问题。久经考验

# c# - 将图像从 asp.NET (C#) 上传到 Oracle 11g

> ID：11500208
> 
> 赞同：1
> 
> 时间：2012-07-16T07:58:40.060
> 
> 标签：c#, asp.net, oracle11g

我想将图像从 asp.NET Web Forms (4.0) 应用程序上传到 Oracle 11g 数据库。最终，我还需要检索图像。

有人告诉我使用 blob 类型，但如果找到更好的解决方案，这可能会改变。

从前端的角度来看，我正在使用 asp.NET 文件上传组件，并且非常适合选择文件的路径。

最好的解决方法是什么？使用blob？使用 bfile 的？将图像上传到服务器并仅存储路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T08:58:17.910

假设您有一个名为 IMAGES 的表，其中包含 BLOB 列，您需要执行以下操作：

```
byte[] imageData = FileUpload1.FileBytes;

OracleCommand cmd = new OracleCommand("INSERT INTO IMAGES(PARENT_ID, IMAGE_DATA) VALUES(:1, :2)", connection);
cmd.Parameters.Add("1", OracleDbType.Int32, parentID, ParameterDirection.Input);
cmd.Parameters.Add("2", OracleDbType.Blob, imageData, ParameterDirection.Input);

cmd.ExecuteNonQuery(); 
```

**更新**：在显示图像时，您主要需要了解 HTML 页面仅包含对图像的引用 ( `<img src="ImageFromDatabase.ashx?id=1234">`)，并且图像本身是由单独的请求提供的。以下示例使用*通用处理程序*：

```
public void ProcessRequest (HttpContext context) {
    HttpRequest request = context.Request;
    int parentID = Int32.Parse(request.QueryString["id"]);

    OracleCommand cmd = new OracleCommand("SELECT * FROM IMAGES WHERE PARENT_ID = :1", connection);
    cmd.Parameters.Add("1", OracleDbType.Int32, parentID, ParameterDirection.Input);
    OracleDataReader reader = cmd.ExecuteReader();

    byte[] imageData = ((OracleBlob)reader["IMAGE_DATA"]).Value;
    context.Response.ContentType = "image/jpeg";
    context.Response.BinaryWrite(imageByte);
} 
```

我省略了应该在实际应用程序中添加的所有错误处理。

**更新 2：**

如果你有一个网格视图，你可以像这样定义图像列：

```
<asp:Image ID="Image1" runat="server" ImageUrl='<%# "ImageFromDatabase.ashx?id=" + Eval("ImageID")%>'/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:17:27.103

最好将图像上传到服务器并存储路径。

你为什么问？

1.  现代操作系统具有快速的文件系统，因此获取图像会很快，比从数据库提供服务要快得多。
2.  如果将图像存储在数据库中，则会给数据库增加过度的压力。
3.  由于图像在文件系统上，您可以简单地使用路径，而不是服务来提供图像。

# java - JSF 2.0 通过 EL 检查组件是否在复合组件内有效

> ID：11500209
> 
> 赞同：3
> 
> 时间：2012-07-16T07:58:41.007
> 
> 标签：java, jsf-2

我想在我的 JSF 复合组件中实现一个示例：

```
<h:inputText id="name" value="#{cc.attrs.value.name}" styleClass="#{(component.valid) ? 'required' : 'required invalid'}" validatorMessage="bad name" requiredMessage="name required" immediate="true" required="true">
    <f:validateRegex pattern="^[\p{L}' ]{2,19}$" />
    <f:ajax event="blur" execute="name" render="name testPanel" immediate="true"/>
</h:inputText>

<h:inputText id="surname" value="#{cc.attrs.value.surname}" styleClass="#{(component.valid) ? 'required' : 'required invalid'}" validatorMessage="bad surname" requiredMessage="surname required" immediate="true" required="true">
    <f:validateRegex pattern="^[\p{L}' ]{2,19}$" />
    <f:ajax event="blur" execute="name" render="surname testPanel" immediate="true"/>
</h:inputText>

<h:panelGroup id="testPanel" styleClass="#{(!name.valid || !surname.valid) ? 'warning' : 'none'}">
    <h:message id="msgName" for="name" showSummary="true" showDetail="false" />
    <h:message id="msgSurname" for="surname" showSummary="true" showDetail="false" />
</h:panelGroup> 
```

问题是如何评估姓名或姓氏在“testPanel”上是否有效/无效。我希望消息 'msgName' 和 'msgSurname' 都用样式化跨度（html 输出）包装，如果没有“名称”或“姓氏”的错误消息，这些跨度将不存在。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T14:13:17.887

`binding`使用属性将组件绑定到 EL 范围：

```
<h:inputText binding="#{name}" ... />
<h:inputText binding="#{surname}" ... /> 
```

这样，您在`styleClass`属性中的 EL 尝试将起作用。

# javascript - 用于甘特图的 JavaScript / jQuery 库

> ID：11500211
> 
> 赞同：2
> 
> 时间：2012-07-16T07:58:41.770
> 
> 标签：javascript, jquery, charts, gantt-chart

我需要创建一个堆叠条形图，显示一天中的引擎状态。这是我想要的示例：

![在此处输入图像描述](../Images/2b3e52b2eac3d86f222b6552a300c4c9.png)

它看起来像一个甘特图，但可能比普通的甘特图简单得多。**我正在寻找一个支持这种图表的 JavaScript/jQuery 图表库。**我知道很多可用的甘特图库，但想知道哪个库有我想要的图表的选项/设置。

我的数据将采用以下格式：

```
[
    {
        "day": "2009-07-13",
        "work": ["11:16:35-12:03:12", "12:32:48-13:26:28", "13:39:09-13:39:12", "13:41:03-13:41:05", "14:18:09-24:00:00"]
    }, {
        "day": "2009-07-14",
        "work": ["00:00:00-07:22:25", "07:22:25-07:22:28", "10:10:04-10:10:31", "10:10:32-10:15:33", "10:18:07-10:21:19", "11:04:49-11:06:15", "11:12:50-11:19:05", "11:19:11-11:19:19", "11:45:50-11:51:42", "11:51:43-11:53:55", "14:03:13-14:13:04", "14:23:55-14:31:28", "14:31:28-14:38:00", "14:38:00-14:49:04", "16:34:56-16:44:33", "16:46:37-16:48:10", "16:48:11-24:00:00"]
    }, {
        "day": "2009-07-15",
        "work": ["00:00:00-08:16:23", "09:57:57-10:15:05"]
    }, {
        "day": "2009-07-16",
        "work": ["10:02:40-10:05:56", "10:07:16-10:09:26", "10:09:27-10:09:28", "13:18:31-24:00:00"]
    }, {
        "day": "2009-07-17",
        "work": ["00:00:00-08:56:41", "16:07:58-16:08:23"]
    }, {
        "day": "2009-07-20",
        "work": ["14:44:47-14:48:35", "15:09:14-16:47:06", "16:47:05-16:47:10", "16:47:13-16:47:15", "16:47:16-16:47:20"]
    }, {
        "day": "2009-07-21",
        "work": ["10:52:51-16:37:07"]
    }, {
        "day": "2009-07-24",
        "work": ["14:54:38-16:03:07", "16:16:23-16:35:14", "16:35:17-16:41:22", "16:43:37-23:56:37"]
    }, {
        "day": "2009-07-25",
        "work": ["20:36:34-21:24:28", "21:24:43-23:45:53"]
    }, {
        "day": "2009-07-26",
        "work": ["13:46:59-18:09:09"]
    }, {
        "day": "2009-07-28",
        "work": ["13:48:30-13:51:10", "13:51:18-13:51:27", "13:52:17-14:57:31"]
    }, {
        "day": "2009-07-29",
        "work": ["14:50:15-14:50:16", "15:36:17-15:43:51", "15:53:31-16:29:30", "16:57:50-23:07:28"]
    }, {
        "day": "2009-07-30",
        "work": ["11:25:29-11:41:32", "16:06:37-16:33:09", "21:14:04-21:20:18", "21:53:57-22:18:59"]
    }
] 
```

`work`属性时隙是引擎工作时，时隙之间的时隙`work`是引擎关闭时。

一直在寻找这个。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:36:31.260

你可以试试[Flot](http://code.google.com/p/flot/)，它有一个好看的[甘特图插件](http://jumware.com/Includes/jquery/Flot/Examples/Gantt.html)。

示例数据：

```
var d1 = [
    [Date.UTC(2010, 0, 1, 11, 23), 5, Date.UTC(2010, 0, 1, 11, 25), "Put Water into Pot"],
    [Date.UTC(2010, 0, 1, 11, 35), 5, Date.UTC(2010, 0, 1, 11, 47), "Clean Cooker"],
    [Date.UTC(2010, 0, 1, 11, 25), 4, Date.UTC(2010, 0, 1, 11, 27), "Put Pot on Cooker"]
] 
```

[从插件规范](http://jumware.com/Includes/jquery/Flot/Doc/JQuery.Flot.gantt.html)：

```
var data = [
    [Date.UTC(2010,0,25,12,45),1,Date.UTC(2010,0,25,13,15],"Name of Step"] 
```

*   第一个参数是步骤的开始。
*   其次是资源数量。
*   第三步是结束。
*   第四描述步骤的名称（用于工具提示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:25:11.283

您可以使用[JavaScript InfoVis Toolkit](http://thejit.org/)或制作您自己的自定义渲染器。

也许您可以修改[BarChart example](http://thejit.org/static/v20/Jit/Examples/BarChart/example1.html)，以便在 y 轴上显示时间。

如果您决定编写自己的控件，那么像[Raphael](http://raphaeljs.com/)这样的库将对您有很大帮助。

无论如何，它似乎是一个非常简单的控制，因此不需要外部依赖于 Flash、Silverlight 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:31:58.103

我正在为 jqplot 开发时间线功能。[http://www.jqplot.com/](http://www.jqplot.com/)

我有一个 JsFiddle，这里有一个例子：http: [//jsfiddle.net/NVbjv/8/](http://jsfiddle.net/NVbjv/8/)

它仍在进行中，我需要弄清楚一些事情。如果您想了解更多信息，请查看我在 stackoverflow 上的一些问题。我希望能够在某种插件中发展它。（[在荧光笔 jqplot 中显示点](https://stackoverflow.com/questions/11684919/display-pointlabel-in-highlighter-jqplot)标签[，在 y 轴上显示 jqplot 文本标签](https://stackoverflow.com/questions/11504107/jqplot-text-labels-on-y-axis)）

# javascript - 在球形条件下，给定 3 个点和它们各自到第 4 个点的距离，如何找到它的地理位置？

> ID：11500217
> 
> 赞同：1
> 
> 时间：2012-07-16T07:59:12.633
> 
> 标签：javascript, geolocation, triangulation, great-circle

> **可能重复：**
> [使用 3 个纬度和经度点以及 3 个距离进行三边测量](https://stackoverflow.com/questions/2813615/trilateration-using-3-latitude-and-longitude-points-and-3-distances)

这更像是一个数学问题而不是编程问题。基本上，我有 P1:(lat1, lon1), P2:(lat2, lon2), P3:(lat3, lon3) 和 D1, D2, D3，以及第四个未知点 Px:(latx, lonx); P1、P2、P3也不在大圆的同一条路径上，D1是P1到Px的距离，D2是P2到Px的距离，以此类推。

如何计算 Px 的坐标？

=根据回复编辑=

非常感谢！

PS。如果您要指向任何 API，我希望它使用 JavaScript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:07:37.403

您必须了解**这里会有多个**满足数学约束的点。想清楚，如果你在一个球体上有两个点（暂时忽略测地线形式），P1 和 P2，并且你有另一个点 T1，距离 P1 的距离为 x，距离 P2 的距离为 y，那么你将有另一个对称的点（镜像) 点 T1' 将满足相同的距离条件，在另一边，可以这么说。

更糟糕的是：考虑一个直径为 D 的球体的情况。你的 P1 在北极，你的 P2 在南极。你看到赤道上的所有点都满足你的条件了吗？

将此应用于您的示例：考虑北极的 P1。考虑南极点的​​ P2。考虑到 Px 的距离，即 D1 = D2 = (2.pie.r)/4。看到问题了吗？赤道上的所有点都满足这一点，而不是一个独特的点。事实上，对于这种情况，即使 D1 != D2，您也有更小的同心线（与赤道同心），其点满足这些约束。

在您的情况下，Px 太多，一个也没有。为了得出球面上的奇点，描述约束将更加具体。

最后，确定上下文的**正确性**很重要。您的算法是否应该支持所有符合条件的点？或者是否应该更改您的标准，以使算法始终评估为奇异点。当心。

一些可以帮助您的链接：

维基百科：[http](http://en.wikipedia.org/wiki/Spherical_coordinates)
://en.wikipedia.org/wiki/Spherical_coordinates SO：[在球体边缘绘制一个点](https://stackoverflow.com/questions/969798/plotting-a-point-on-the-edge-of-a-sphere)

**更新，基于您的三点示例：**

* * *

同样，可以有多个点满足您的标准。如果 P1、P2、P3 位于同一弧上怎么办？见下图。即使有三个点，也不能保证会有一个第四个点满足距离标准。即使有 n 个点，也没有这样的保证。

在数学语言中，对于一组 n 个随机点，以及到这些单独点的一组距离，满足距离标准的结果点集**可能**有多个元素。

![在此处输入图像描述](../Images/f03b3732da6f86b875c515ce6def72e8.png)

你可能会误以为：哦，这家伙总是假设点位于同一弧线上。好吧，你不是在做一个特殊的算法，是吗？你的算法将是一个通用的解决方案，不是吗？

您需要保证这些点不在同一弧上（在一组 n 个点中，我认为至少有一个点不能在同一弧上）。

为了将源点保持在最低限度：您需要在点之间建立训练关系，因为这样，仅使用两个点，三角形关系将恰好产生一个点。

什么三角形？想象一下：你有两个点，第三个未知点。您提到的所有距离都是球形的，即曲面距离。你看到这些点之间也有平坦的距离吗？你能想象，会有一个平面穿过这些点，切割球体，对吗？我这样说是为了强调您不需要担心表面曲率（因此是 3d 球面角）。你可以看到底层的二维三角形，它的未知顶点也将是球面上的第三个点。

我知道这对您来说可能很难想象，我会尝试为此制作图表。（找不到任何好的在线工具！）。

最后，这将有很大帮助：请仔细阅读。

**取自维基百科：[http](http://en.wikipedia.org/wiki/Great-circle_distance)**

://en.wikipedia.org/wiki/Great-circle_distance 大圆或正交距离是球体表面上任意两点之间沿球体表面上的路径测量的最短距离（而不是穿过球体的内部）。因为球面几何不同于普通的欧几里得几何，所以距离方程采用不同的形式。欧几里得空间中两点之间的距离是从一点到另一点的直线的长度。然而，在球面上，没有直线。在非欧几里得几何中，直线被测地线代替。球体上的测地线是大圆（球体上的圆，其中心与球体的中心重合）。

**更多更新：**

经纬度到笛卡尔坐标之间的转换可以通过 Haversine 公式完成。去谷歌上查询。见这里：[从经度\纬度转换为笛卡尔坐标](https://stackoverflow.com/questions/1185408/converting-from-longitude-latitude-to-cartesian-coordinates) 和这里：[http ://en.wikipedia.org/wiki/World_Geodetic_System](http://en.wikipedia.org/wiki/World_Geodetic_System)

# jsf - PrimeFaces commandButton 需要验证两个日历组件，然后将包含两个日历值的外部 URL 重定向到新页面

> ID：11500221
> 
> 赞同：1
> 
> 时间：2012-07-16T07:59:19.233
> 
> 标签：jsf, redirect, primefaces

我是 JSF 和 primefaces 的新手，我正在尝试执行以下操作：我必须创建一个包含两个日期的 URL，然后在新页面中打开它。我使用的是 primefaces，所以我创建了两个 p:calendar 组件和 ap:commandButton。

我的问题是，我设法验证了日历，然后打开了 URL，但在同一个窗口中。如果我将 ajax="false" 设置为命令按钮，并将 target="_blank" 设置为表单，那么它会在新页面中打开 URL，但如果日历值无效，那么它也会在新页面中打开原始页面带有验证消息的页面。对于重定向，我在我的 bean 中使用 FacesContext.getCurrentInstance().getExternalContext().redirect(URL)。

我还尝试使用 h:outputLink 重定向并将其值设置为 bean.url 和 target="_blank"。它重定向到一个新页面，但在这种情况下，我没有设法验证日历。

我怎样才能做到这一点？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:20:11.803

`<h:outputScript>`根据`window.open()`验证有条件地渲染一个：

```
<h:form>
    <p:calendar validator="yourValidator" />
    <p:calendar validator="yourValidator" />
    <p:commandButton action="#{bean.submit}" update="@form" />
    <h:outputScript rendered="#{facesContext.postback and not facesContext.validationFailed}">
        window.open('someURL');
    </h:outputScript>
</h:form> 
```

`RequestContext#execute()`或使用PrimeFaces' `window.open()`：

```
public void submit() { 
    RequestContext.getCurrentInstance().execute("window.open('someURL');");
} 
```

# c# - 如何将 NAudio WaveStream 写入内存流？

> ID：11500222
> 
> 赞同：6
> 
> 时间：2012-07-16T07:59:19.370
> 
> 标签：c#, stream, naudio

我有一个程序可以接收字节数组中的 mp3 数据。它必须将该 mp3 数据转换为 wav 格式并将其存储在字节数据中。我正在尝试为此目的使用 NAudio。为此，我正在使用以下代码。

```
Stream inputStream = ...;
Stream outputStream = ...;

using (WaveStream waveStream = WaveFormatConversionStream.CreatePcmStream(new Mp3FileReader(inputStream)))
using (WaveFileWriter waveFileWriter = new WaveFileWriter(outputStream, waveStream.WaveFormat))
{
    byte[] bytes = new byte[waveStream.Length];
    waveStream.Read(bytes, 0, waveStream.Length);
    waveFileWriter.WriteData(bytes, 0, bytes.Length);
    waveFileWriter.Flush();
} 
```

当我运行上面的代码时，我收到的只是字节数组中的 0。但是如果使用 WaveFileWriter 将数据直接写入文件，则文件会接收到正确的数据。有什么理由吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:45:07.520

试试这个：

```
using (WaveStream waveStream = WaveFormatConversionStream.CreatePcmStream(new Mp3FileReader(inputStream))) 
using (WaveFileWriter waveFileWriter = new WaveFileWriter(outputStream, waveStream.WaveFormat)) 
{ 
    byte[] bytes = new byte[waveStream.Length]; 
    waveStream.Position = 0;
    waveStream.Read(bytes, 0, waveStream.Length); 
    waveFileWriter.WriteData(bytes, 0, bytes.Length); 
    waveFileWriter.Flush(); 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-05T10:27:45.093

如果您正在写入 a `MemoryStream`，则需要注意`WaveFileWriter`在`MemoryStream`您处理`WaveFileWriter`.

这是使用`IgnoreDisposeStream`. （另请注意，这`WaveFormatConversionStream.CreatePcmStream`是不必要的 -`Mp3FileReader`已经从 PCM 返回`Read`）。我也更喜欢读取试图通过整个文件的较小块。

```
var path = @"mytestFile.mp3";
var mp3ByteArray = File.ReadAllBytes(path);

var outputStream = new MemoryStream();
using (var mp3Stream = new MemoryStream(mp3ByteArray))
using (var reader = new Mp3FileReader(mp3Stream))
using (var waveFileWriter = new WaveFileWriter(new IgnoreDisposeStream(outputStream), 
                                               reader.WaveFormat))
{
    byte[] buffer = new byte[reader.WaveFormat.AverageBytesPerSecond];
    int read;
    while((read = reader.Read(buffer,0, buffer.Length)) > 0)
    {
        waveFileWriter.Write(buffer, 0, read);
    }
}

// outputStream has not yet been disposed so we can get the byte array from it
var wavBytes = outputStream.GetBuffer();

// or we could play it like this
outputStream.Position = 0;
using (var player = new WaveOutEvent())
using (var reader = new WaveFileReader(outputStream))
{
    player.Init(reader);
    player.Play();
    while(player.PlaybackState != PlaybackState.Stopped)
    {
        Thread.Sleep(1000);
    }
} 
```

# actionscript-3 - Actionscript-3：动态文本

> ID：11500228
> 
> 赞同：1
> 
> 时间：2012-07-16T07:59:46.770
> 
> 标签：actionscript-3, variables, text, format

首先，我是 Actionscipt 的新手，所以请多多包涵。我正在尝试制作一个随着变量*日期*的增加而变化的文本字段。这是我的编码（它在一个层上）：

```
var day:int = 1;
var date:TextField = new TextField();
if (day = 1) date.txt = "August 1";
if (day = 2) date.txt = "August 2";
date.x = 548.1
date.y = 58.5

var format: TextFormat = new TextFormat
format.color = 0xFFFFFF;
format.font = "Constantia";
format.bold = false
txt.setTextFormat( format);

 stage.addChild(date) 
```

然而，我收到了错误，我对为什么感到困惑。错误是这样的：

1151: 与命名空间内部的定义日期存在冲突。来源：var date:TextField = new TextField();

再说一次，我对这一切都很陌生，如果有任何帮助，我将不胜感激。谢谢。

**（编辑）**

我已经解决了这些问题，并为我的文本字段提供了实例名称*dateTextField*。现在的编码是：

```
var day:int = 1;

var dateTextField:TextField = new TextField();
if (day == 1) dateTextField.text = "August 1";
if (day == 2) dateTextField.text = "August 2";
dateTextField.x = 548;
dateTextField.y = 58;

var format: TextFormat = new TextFormat ();
format.color = 0xFFFFFF;
format.font = "Constantia";
format.bold = false;
txt.setTextFormat( format);

 stage.addChild(dateTextField); 
```

然而我仍然得到同样的错误？

1151: 与内部命名空间中的定义 dateTextField 存在冲突。

来源：var dateTextField:TextField = new TextField();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:02:43.503

很可能，您已经在`date`其他地方定义了。将变量重命名为更具体的名称，例如`dateTextField`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:22:59.233

您缺少一些冒号和 = 的符号。更改此 var 格式：TextFormat = new TextFormat format.color - 0xFFFFFF; 到

```
var format: TextFormat = new TextFormat();
format.color = 0xFFFFFF; 
```

并检查在每一行的末尾是否有一个“;” 我可以看到另一行缺少 ;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:35:25.503

第 3 行和第 4 行应该是：

`if (day == 1) dateTextField.text = "August 1";`

`if (day == 2) dateTextField.text = "August 2";`

1.  如果您只使用一个“=”而不是两个“==”，您将分配该值而不是检查它。
2.  您再次使用日期，只在第一行更改
3.  设置文本的成员不是“txt”而是“文本”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T20:06:40.127

哇，我才意识到我做这一切是多么复杂。我只是将文本字段命名为*date*，在那里设置我的字体和大小，然后进行编码：

```
var day:int = 1;

if (day==1) date.text = "July 1"; 
```

但是感谢您的帮助，它帮助我从新的角度看待编码。

# xml - 如何在 Java ME 中编辑 XML 文件？

> ID：11500237
> 
> 赞同：1
> 
> 时间：2012-07-16T08:00:32.213
> 
> 标签：xml, file, java-me

我知道如何读取或解析 .xml 文件。我需要知道如何编辑这个 .xml 文件并将其保存在同一位置（手机内存/sd 卡）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:26:26.327

我可以给它一个线索/逻辑。

假设您的 xml 文件为

```
<XML>
     <NAME>ABC</NAME>
     <JOB>DEV</JOB>
     ...
</XML> 
```

现在您需要阅读此 xml 并在阅读后进行编辑，例如这将是生成的 xml 文件。

```
<XML>
     <NAME>XYZ</NAME>
     <JOB>DEVELOPER</JOB>
     ...
</XML> 
```

所以为此目的，您需要同时打开两个文件连接，如下所示，

```
FileConnection fc1 = (FileConnection) Connector.open("<File URL>");
FileConnection fc2 = (FileConnection) Connector.open("<File URL>"); 
```

对于 fc2，您的文件名将被更改。

现在开始从第一个文件中读取字符并将它们写入第二个文件（简单的 C 语言逻辑）。您可以在任何地方进行更改，例如在解析并获取 ABC 时，将其替换为 XYZ 相同的其他字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:18:17.417

@Lucifer 拿出你的想法，我开发了一些可以编辑现有.XML 的东西。**谢谢**。

```
OutputStream os = fc.openDataOutputStream();
                        os.write(ReadChangedXml(result).getBytes());
                        os.close(); 
```

**您的对象应包含旧值**

```
 public synchronized String ReadNChangeXml(<your object>) {
    StringBuffer buf = new StringBuffer();
    StringBuffer key = new StringBuffer();
    byte c;

    try {
         in = fc.openInputStream();
        } catch (Exception e) 
        {
        do_alert("Open failed for Change Xml.", 1000);
        }

    try {
        boolean scan = false;
        while (((c = (byte) in.read()) != -1)) {

            if (c == '>' ) {
                scan = true;
                buf.append((char) c);
                continue;
            }

            if (scan == true && c != '<') {
                key.append((char) c);
            }

            if (scan == true && c == '<') 
               {
                 scan = false;
                  if (key.toString().equalsIgnoreCase(<your object variable>))
                        buf.append(<new value>);
                  else
                     buf.append(key.toString());
               }
                buf.append((char) c);
                key = new StringBuffer();
                continue;
            }
            if (scan == false) {
                buf.append((char) c);
            }
      }

    } catch (Exception E) {
        do_alert("Read failed for Change Xml.", 1000);
    }

   return buf.toString();
} 
```

# flurry - 如何从 Flurry 分析中删除应用程序

> ID：11500238
> 
> 赞同：2
> 
> 时间：2012-07-16T08:00:34.863
> 
> 标签：flurry

我有开发和生产应用程序。我们决定删除 dev，因为它根本不会影响实时统计数据。

不幸的是，我没有找到如何在 Flurry 中删除应用程序的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T08:01:25.877

弄清楚我没有删除应用程序的权限。这就是为什么我没有看到带有删除应用程序按钮的页面。

# python - 如何使用 SQLAlchemy 确定表中的字段？

> ID：11500239
> 
> 赞同：4
> 
> 时间：2012-07-16T08:00:34.777
> 
> 标签：python, sqlalchemy

是否可以使用 SQLAlchemy 或任何其他 python 库在运行时务实地确定表（MySQL DB）中可用的字段？对此的任何帮助都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:50:56.150

反射可以做到这一点。

使用 sqlalchemy 一次反映数据库

```
meta = MetaData()
meta.reflect(bind=someengine)
users_table = meta.tables['users']
addresses_table = meta.tables['addresses']
# fields of address_table
fields = addresses_table.columns.keys() 
```

[在http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#reflecting-database-objects](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#reflecting-database-objects)查看更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:18:07.277

这是 python ( [pep 249](http://www.python.org/dev/peps/pep-0249/) ) 的 std DB api 规范的一部分，即游标上的描述成员，因此您不需要 SQLAlchemy。

例如使用[http://www.pymysql.org/](http://www.pymysql.org/)，**用户**是你的表

```
import pymysql

conn = pymysql.connect(host='127.0.0.1', port=3306, user='root', passwd='', db='mysql')
cur = conn.cursor()
cur.execute("SELECT * FROM user")
print cur.description 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:12:54.050

您可以运行`SHOW TABLE TABLENAME`并获取表的列。

# php - PHP：如何按键创建关联数组？

> ID：11500240
> 
> 赞同：1
> 
> 时间：2012-07-16T08:00:43.660
> 
> 标签：php, arrays

我有简单的数组

```
array( 
   array( 'id'=>5, 'something' => 2, 'dsadsa' => 'fsfsd )
   array( 'id'=>20, 'something' => 2, 'dsadsa' => 'fsfsd )
   array( 'id'=>30, 'something' => 2, 'dsadsa' => 'fsfsd )
) 
```

如何以正确的方式通过 id 字段（或其他内容）创建关联数组？

```
array( 
   '5' => array(  'something' => 2, 'dsadsa' => 'fsfsd )
   '20' => array(  'something' => 2, 'dsadsa' => 'fsfsd )
   '30' => array(  'something' => 2, 'dsadsa' => 'fsfsd )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:03:25.287

沿着这些思路。

```
$new_array = array();
foreach ($original_array as &$slice)
    {
    $id = (string) $slice['id'];
    unset($slice['id']);
    $new_array[$id] = $slice;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:28:01.390

@NikitaKuhta，不。没有切片函数可以返回与给定键或列标题关联的二维键控表中的一列值。您可以使用一些回调 array_... 函数，但您仍然需要为每个元素执行一个自定义函数，所以它不值得。我不喜欢 Core Xii 的解决方案，因为这会破坏原始数组作为副作用。我建议你*不要*在这里使用引用：

```
$new_array = array();
foreach ($original_array as $slice) {
    $id = (string) $slice['id'];
    unset($slice['id']);
    $new_array[$id] = $slice;
}
# And now you don't need the missing unset( $slice) 
```

# mysql - MySQL：显示一个用户未投票的随机结果

> ID：11500241
> 
> 赞同：7
> 
> 时间：2012-07-16T08:00:45.460
> 
> 标签：mysql, sql, voting-system

我需要帮助来显示一个当前用户尚未投票的随机结果。

目前我的数据库设置和我尝试过的最后一个查询可以在[http://sqlfiddle.com/#!2/2f91b/1上找到](http://sqlfiddle.com/#!2/2f91b/1)

基本上我可以使用这个查询来隔离每个单独的项目：

```
SELECT a.img_url, a.item_id, a.user_id, a.img_status, b.item_question, c.user_name, c.user_fbid, d.voter_id, count(d.img_id) AS totalVotes
FROM os_photos a 
LEFT JOIN os_items b ON a.item_id = b.item_id
LEFT JOIN os_users c ON a.user_id = c.user_id
LEFT JOIN os_votes d ON a.img_id = d.img_id
GROUP BY a.img_id
ORDER BY RAND()
LIMIT 1 
```

我的问题是：凭借我所拥有的 SQL 知识，我无法隔离结果以仅显示用户 #2 未投票的行。我意识到问题是当我使用 group by 时，它结合了 voter_id，因此我无法检查用户 #2 是否对该项目有任何输入。

例子：

```
Item #  |  voter_id
1       |      2
1       |      3
2       |      2
3       |      1
3       |      4
4       |      3
4       |      1
5       |      1
5       |      2 
```

使用上述样本集，生成的项目应该是项目#3、#4 或任何其他尚未投票的项目。

非常感谢您的帮助、建议和知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:33:24.120

要获取*不存在*的项目，您需要一个`LEFT JOIN`with 条件，否则会进行正匹配，然后添加一个`WHERE`与结果列之一匹配的子句`NULL`：

```
SELECT a.img_url, a.item_id, a.user_id, a.img_status, b.item_question, c.user_name,c.user_fbid, d.voter_id, count(d.img_id) AS totalVotes
FROM os_photos a 
LEFT JOIN os_items b ON a.item_id = b.item_id
LEFT JOIN os_users c ON a.user_id = c.user_id
LEFT JOIN os_votes d ON a.img_id = d.img_id
LEFT JOIN os_votes d2 ON a.img_id = d2.img_id AND d2.voter_id=2
WHERE d2.voter_id IS NULL
GROUP BY a.img_id
ORDER BY RAND()
LIMIT 1 
```

# batch-file - 批处理文件根据文件名中的字符复制文件

> ID：11500242
> 
> 赞同：1
> 
> 时间：2012-07-16T08:00:58.293
> 
> 标签：batch-file

我需要一个批处理文件来根据文件名将文件从单个文件夹复制到多个文件夹。这些文件的格式为 aBBccccc.txt，其中 a 和 ccccc 无关紧要，但 BB 是 2 个字符代码。例如文件 aQWertyu.txt aWErtyui.txt 应分别复制到文件夹 QW 和 WE，这些文件夹将由脚本创建。

我见过使用 FOR /f 的示例脚本，但看不到如何解析文件、检查字符 2 和 3、然后创建文件夹并复制文件。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T08:09:23.000

这需要多个部分：

1.  延迟扩张。这是从以下循环中获取子字符串所必需的：

    ```
    setlocal enableextensions enabledelayedexpansion 
    ```

2.  `for`用于迭代文件的循环

    ```
    for %%x in (*.txt) do ( 
    ```

3.  找到相关的子字符串：

    ```
     set "filename=%%x"
        set "folder=!filename:~1,2!" 
    ```

    注意`!filename!`这里的使用。这是使用延迟扩展。通常环境变量会被引用，但是在*解析*完整的循环`%filename%`时会扩展这些变量，然后会减少到零。延迟扩展，使用解决了这个问题。*`%filename%``!`*

**   创建文件夹：

    ```
     if not exist !folder! mkdir !folder! 
    ```

    如果文件夹尚不存在，这只会创建该文件夹。

    *   复制文件：

    ```
     copy "%%x" !folder!
    ) 
    ```* 

 *把它们放在一起：

```
@echo off
setlocal enableextensions enabledelayedexpansion
for %%x in (*.txt) do (
  set "filename=%%x"
  set "folder=!filename:~1,2!"
  if not exist !folder! mkdir !folder!
  copy "%%x" !folder!
) 
```*

# python - 使用 PGloader 将 CLOB 导入 PostgreSQL

> ID：11500245
> 
> 赞同：0
> 
> 时间：2012-07-16T08:01:08.090
> 
> 标签：python, postgresql, csv, import, clob

我需要将从其他 DBMS 导出的 CLOB 和 BLOB 对象导入 PostgreSQL。此类 LOB 是一个单独的文件，其路径引用放置在 CSV 文件中。表的结构是（id int PK, clobcol text）。这是示例结构：

*   **数据.csv**

    ```
    1|some_clob.dat
    2|some_clob.dat 
    ```

*   配置文件：**pgloader.conf**

    ```
    [pgsql]
    host = localhost
    port = 5432
    base = test
    user = some_user
    pass = 

    log_file            = d:/tmp/pgloader.log
    log_min_messages    = DEBUG
    client_min_messages = WARNING
    lc_messages         = C

    client_encoding = 'utf-8'
    copy_every      = 5
    commit_every    = 5
    #copy_delimiter  = %

    null         = ""
    empty_string = "\ "

    [clob]
    table           = clob_table
    format          = text
    filename        = D:/pgloader-2.3.2/test/data.csv
    field_sep       = |
    quotechar       = "
    columns         = id:1, clobcol:2
    index           = id:1
    blob_columns    = clobcol:2:ifx_clob 
    ```

对于该导入，我决定使用 PGloader 工具（Python 脚本，我在 Windows BTW 上）。但是当我执行时：

> pgloader.py -c pgloader.conf

我在日志文件中收到**错误：**

```
Warning: column 'clobcol' is not a valid blob reference: d:/pgloader-2.3.2/test/clob.out
need more than 1 value to unpack

COPY error on lines 1 
```

并且记录以以下形式登陆数据库：（id：1，clobcol：'some_clob.dat'）。我不知道出了什么问题以及如何纠正。你能给我一些建议吗？谢谢

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:56:20.087

已解决：缺少要复制的 CLOB 数据范围。例如：

```
 1|0,25,some_clob.dat 
```

# javascript - IE 中的 AJAX 请求（所有版本）

> ID：11500248
> 
> 赞同：0
> 
> 时间：2012-07-16T08:01:13.400
> 
> 标签：javascript, ajax, internet-explorer

[http://kiwilocals.com.au/dev/](http://kiwilocals.com.au/dev/)

您好，这里是页面中间横幅下的一个类别的 ajax 请求。除了所有版本的 IE 之外，可以在任何地方工作。我检查了开发人员的工具，查询给出了正确的结构，但是加载后没有出现加载图标上的任何内容。可能是什么原因？谢谢你。

```
function scat(th) {
wait_loading('sub_lst');

if (request = create_request()) {

    request.open("GET", "get_subcat.php?id=" + th + "&site=1", true);
    request.onreadystatechange = function () {
        //alert(request);
        if (this.status == 200) {
            if (this.readyState == 4) {

                var doc3 = document.getElementById('sub_lst');
                //alert(doc3);
                doc3.innerHTML = this.responseText;
                if (!scroll_start) {
                    $('.sub_scroll').jScrollPane({
                        animateScroll: true
                    });
                    $('.hidden_control').show();
                    scroll_start = true;
                }
            }
        }
    }
    request.send(null);
}
}

function create_request() {
var request = false;
try {
    request = new ActiveXObject("Msxml2.XMLHTTP");
} catch (e) {
    try {
        request = new ActiveXObject("Microsoft.XMLHTTP");
    } catch (e2) {
        try {
            request = new XMLHttpRequest();
        } catch (e3) {
            request = false;
        }
    }
}
if (!request) {
    alert("Невозможно выполнить Ajax запрос.");
    return false;
} else return request;
}

function wait_loading(el_id) {
document.getElementById(el_id).innerHTML = "<center><img style=\"padding-top: 60px;\" width=\"64\" height=\"64\" src=\"images/loading.gif\"></center>"; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:41:52.140

问题在于您在 readstatechange 事件中使用了“this”。

试一试。

```
if(request = create_request()) {

    request.open("GET", "get_subcat.php?id="+th+"&site=1", true);
    request.onreadystatechange = function() {

        if(request.status == 200) {
            if( request.readyState == 4 ) {
                var doc3 = document.getElementById('sub_lst');
                doc3.innerHTML=request.responseText;

                if(!scroll_start) {
                    $('.sub_scroll').jScrollPane({animateScroll: true});
                    $('.hidden_control').show();
                    scroll_start=true;
                } 
            }
        }
    }
    request.send(null);
} 
```

但是有一个问题......您在整个代码中都使用 jQuery，除了这个。为什么不使用：

```
$('#sub_lst').load("get_subcat.php?id="+th+"&site=1", function(){
    if(!scroll_start) {
        $('.sub_scroll').jScrollPane({animateScroll: true});
        $('.hidden_control').show();
        scroll_start=true;
    } 
}); 
```

# solr - 哪种解决方案可以进行详细的产品搜索？

> ID：11500251
> 
> 赞同：1
> 
> 时间：2012-07-16T08:01:29.997
> 
> 标签：solr, amazon-web-services, elasticsearch, amazon-cloudsearch

我需要建立某种产品搜索，但我不确定我应该走哪条路。

要求：

*   邻近搜索
*   自定义排名
*   自动更正建议，例如在 Google 中，当您键入“Winipedia”时，它会建议“Wikipedia”。
*   将 PDF 索引为搜索实体的字段值
*   自动更正建议的德语支持
*   自动完成支持

我使用 AWS CloudSearch 进行了尝试，但是如果您不支付额外的支持费用并且他们还不支持德语，也不支持自动完成，他们的支持就会很糟糕。

有没有我需要的所有功能的搜索解决方案？Elasticsearch 看起来不错，但我找不到任何关于它的详细功能列表。

提前感谢您的帮助！

问候尼尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:10:22.647

Solr 和 ElasticSearch 都有您需要的功能，在它们之间进行选择只是个人喜好问题。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T14:42:37.397

市场上有 3 种积极营销的解决方案：1\. Swiftype 2\. Easyask 3\. Unbxd

所有这些解决方案都能很好地处理它，并且比 Lucene 和 Solr（经过试验和测试）更好。如果您有时间和金钱自行改进，请选择 Lucene / Slor……或者只是购买现成的解决方案。

# javascript - 在javascript中访问div的高度

> ID：11500253
> 
> 赞同：5
> 
> 时间：2012-07-16T08:01:36.940
> 
> 标签：javascript, jquery

我有一个 div ：

**css**

```
 div { width: 200px; height:auto } 
```

**标记**

```
 <div contenteditable="true"> Text is editable </div> 
```

现在我应该怎么做才能`height ( numeric value )`在 javascript 中访问上述 div ？我试过了

`$('div').height()`&`$('div').css("height");`都返回`auto`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T08:06:08.527

您可能想尝试[`.innerHeight()`](http://api.jquery.com/innerHeight/)或[`.outerHeight()`](http://api.jquery.com/outerHeight/)，这取决于您想要什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:07:36.013

尝试使用

```
$('div').innerHeight() 
```

或者

```
$('div').outerHeight() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:08:16.140

尝试这个

```
var divs = document.getElementsByTagName('div');
if(divs.length>0)
     divs[0].offsetHeight; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T14:43:36.607

返回**NUMERIC 高度值**：

```
document.getElementsById('myElementId').offsetHeight; // Without jQuery

$('#myElementId').outerHeight(); // With jQuery 
```

*注 1：outerHeight(true) 返回包含边距和内边距的大小，更多信息请参见[http://api.jquery.com/outerHeight/](http://api.jquery.com/outerHeight/)*

*注意 2：innerHeight() 返回匹配元素集中第一个元素的当前计算高度，包括填充但不包括边框。*

*注 3： $('div').height() 或 $('div').css("height") 仅返回 css 值。*

# java - 哪个更快：JDBC 还是 JNDI？

> ID：11500257
> 
> 赞同：18
> 
> 时间：2012-07-16T08:01:48.580
> 
> 标签：java, mysql, database, jdbc, jndi

我有两个选项来配置我的应用程序数据库连接 - 一个是使用 JDBC，另一个是使用 JNDI。就这些连接类型与数据库的工作速度而言，最佳选择是什么。

我了解这是使用不同原理的两种不同类型的数据库连接（JDBC 是直接 db 连接，JNDI 是应用程序服务器端的数据库连接池配置）。但是还有其他一般的 JDBC/JNDI 优缺点可能比运行速度更重要吗？如果是，它们是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-16T08:05:46.233

数据库连接始终使用 JDBC。使用 JNDI，您可以在目录服务中注册一个数据源，该目录服务可以通过其名称进行查找。因此 JDBC 和 JNDI 完全不同，不可互换。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-16T08:11:57.157

我敢打赌你的意思是选择

1.  在您的应用程序中手动创建数据源或 jdbc 连接，或者
2.  在容器中设置数据源，应用程序通过 JNDI 查找数据源

如果是这种情况，请尽可能坚持使用 2。

选择的主要原因绝不是性能差异。坚持 2 的原因在大多数情况下是，您需要 2 才能从容器中获得更高级的功能，例如分布式事务。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T10:05:34.417

这就是我发现的关于 JNDI 和 JDBC 的内容。

**JNDI：**这是一种类似于电话簿的技术，用于远程搜索服务器和数据源上的名称。

JNDI 创建一个连接池。连接池是服务器上的一个环境，其中 JNDI 和数据库封装到其中以实现 Type4 连接。

**JDBC：**一种 Java API，使 Java 程序能够执行 SQL 语句。这允许 Java 程序与任何 SQL 兼容的数据库进行交互。

JDBC 类似于 ODBC，但专为 Java 程序设计，而 ODBC 与语言无关。

JDBC 由 Sun Microsystems 开发。**JNDI 更快更高效。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T08:05:55.357

这个问题并不完全清楚。

JNDI 不是一种数据库连接。您可以使用 JNDI 查找 DataSource，它是连接工厂。不过，DataSource 是 JDBC API 的一部分，因此 JNDI 与 JDBC 一起工作，而不是这里的替代品。

您是在谈论对数据库使用 JDBC 来获取目录信息，还是对 LDAP 存储库使用 JNDI？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-16T08:08:35.723

真正的速度优势来自能够重用数据库连接。

因此，您需要使用一种提供数据库连接池的方法，然后使用适当的技术来访问池。根据实现，这可以是 JDBC（如果驱动程序本身支持它）或 JNDI 或完全不同的东西。

如果您的应用程序在 Web 容器中运行，则通常使用 JNDI 来允许在 Web 容器中而不是在您的应用程序中配置和管理池。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-16T10:46:25.877

这个问题毫无意义。在什么方面更快？没有什么可以比较的。JDBC 是关系数据库的通用接口。JNDI 是命名系统的通用接口。很可能两者的效率都取决于与之通信的目标系统的 99%。在任何情况下，关系数据库和命名系统都满足完全不同的需求，这些需求在很大程度上是不可比的。通常使用 JNDI 来获取连接，然后使用 JDBC 来操作该连接。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-16T08:09:34.910

前面的回答提到过，从技术上讲，使用Datasource和使用JDBC是一样的。

然而，使用数据源通常是首选的方式，因为这样您就可以让服务器管理您的数据库连接池。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-16T08:10:27.857

是否使用连接池不会影响应用程序代码。它不需要对应用程序进行任何代码更改，因为应用程序会查找先前注册的数据源的 JNDI 名称。如果数据源在 JNDI 注册期间指定了连接池实现（如[使用 DataDirect 连接池管理器创建数据源一](http://www.datadirect.com/resources/jdbc/connection-pooling/creating-data-source.html)节中所述），客户端应用程序将受益于通过连接池实现的更快连接。

# apache-flex - 是否有将 .actionScriptProperties 转换为 flex-config.xml 的工具？

> ID：11500260
> 
> 赞同：1
> 
> 时间：2012-07-16T08:01:52.817
> 
> 标签：apache-flex, flash-builder, mxmlc

我正在寻找一种工具，它可以将 Flash Builder 中设置的 Flex 设置（存储在`.actionScriptProperties`and`.flexProperties`中）转换为类似`flex-config.xml`文件的文件，该文件可用作 Flex 编译器和工具（`mxmlc`和`compc`）的输入`asdoc`。有这样的事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:57:44.030

如果没有转换工具，那么最好的选择可能是`-dump-config=c:\xyz.xml`在 Flash Builder 中添加编译器选项。

# php - PHPExcel 从数据库生成真正的 xls 和 xlsx 文件

> ID：11500263
> 
> 赞同：0
> 
> 时间：2012-07-16T08:02:26.093
> 
> 标签：php, phpexcel

我尝试了PHPExcel下载包test 01。该示例使用对象来指定哪个单元格包含什么，并生成一个excel文件。

此外，我尝试了以下代码从数据库生成 excel 文件：-

```
 $file_type = "vnd.ms-excel";
    $file_ending = "xls";

//header info for browser: determines file type ('.doc' or '.xls')
header("Content-Type: application/$file_type");
header("Content-Disposition: attachment; filename=$file_name.$file_ending");
header("Pragma: no-cache");
header("Expires: 0");

$xls_header = '<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:x="urn:schemas-microsoft-com:office:excel"
xmlns="http://www.w3.org/TR/REC-html40">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=utf-8" />
</head>
<body>
<table border="1" align="center">';

$xls_footer = '</table>
</body>
</html>';
print $xls_header;

/*  Start of Formatting for  Excel  */

    /*  FORMATTING FOR EXCEL DOCUMENTS ('.xls')   */
    //create title with timestamp:
    if ($Use_Title == 1)
    {
        echo "<tr><td colspan='".mssql_num_fields($result)."'>";
        echo("$title");
        echo "</td></tr>";
    }
    //define separator (defines columns in excel & tabs in word)
    //$sep = "\t"; //tabbed character

        echo "<tr>";
    //start of printing column names as names of MySQL fields
    for ($i = 0; $i < mssql_num_fields($result); $i++)
    {
        echo "<td>";
        echo mssql_field_name($result,$i);
        echo "</td>";
    }
    print("</tr>");
    //end of printing column names

    //start while loop to get data
    while($row = mssql_fetch_array($result))
    {
        $schema_insert .= "<tr>";
        //set_time_limit(60); // HaRa
        $schema_insert = "";
        for($j=0; $j< mssql_num_fields($result);$j++)
        {
            $schema_insert .= "<td>";
            if(!isset($row[$j]))
                $schema_insert .= "NULL".$sep;
            elseif ($row[$j] != "")
                $schema_insert .= "$row[$j]".$sep;
            else
                $schema_insert .= "".$sep;
            $schema_insert .= "</td>";
        }
        $schema_insert .= "<tr>";
        $schema_insert = str_replace($sep."$", "", $schema_insert);
        //following fix suggested by Josue (thanks, Josue!)
        //this corrects output in excel when table fields contain \n or \r
        //these two characters are now replaced with a space
        $schema_insert = preg_replace("/\r\n|\n\r|\n|\r/", " ", $schema_insert);
        $schema_insert .= "\t";
        print(trim($schema_insert));
        print "\n";
    }
    print $xls_footer; 
```

但 excel 程序告诉我它不是一个真正的 excel 文件。如果我想用数据库中的数据为 xls 和 xlsx 格式生成真正的 excel 文件，有什么好的例子吗？

谢谢！

# java - 线细分算法

> ID：11500265
> 
> 赞同：4
> 
> 时间：2012-07-16T08:02:38.373
> 
> 标签：java, algorithm, geometry, vector-graphics

我正在尝试在任意数量的段的弧上绘制刻度线。弧是一个`GeneralPath`对象。

我想沿弧线绘制**n 个**刻度线（其中 n 是算法的输入）。我还需要在弧的开始和结束处画一个刻度。

有谁知道我在哪里可以找到这样的算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:16:58.977

您真的想使用[PathIterator](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/PathIterator.html)（通过 GeneralPath.getPath [）](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/GeneralPath.html#getPathIterator%28java.awt.geom.AffineTransform%29)沿着构成您的弧线的（略微扁平的）段行走。您可以进行两次传递 - 一次计算这些段的总长度，另一次实际绘制刻度。在两次通过之间，您可以计算最接近所需刻度长度的刻度数，同时仍保证开始和结束的刻度（或者您可以允许开始或结束刻度距离其他刻度太近，并且那么你只需要一次通过）。

实际的绘图代码与 Thomas 的代码类似，但随着迭代器通过扁平路径前进时会发生段跳跃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:06:00.573

嗯，一条线是一个二维向量。取它的方向，得到长度，除以 n，然后使用起点、方向向量以及起点和刻度之间的距离计算刻度的位置。

*编辑：*

还有一些伪代码：

```
double unnormalizedDir.x = end.x - start.x;
double unnormalizedDir.y = end.y - start.y;

double length = sqrt(unnormalizedDir.x * unnormalizedDir.x + unnormalizedDir.y * unnormalizedDir.y );

double dir.x = unnormalizedDir.x / length;
double dir.y = unnormalizedDir.y / length;

double tickLength = length / n;

for( int i = 1; i <= n; i++ ) {
  double tick.x = start.x + dir.x * i * ticklength;
  double tick.y = start.y + dir.y * i * ticklength;    
} 
```

这应该为您提供线上刻度线的位置。请注意，您可能应该将计算放入表示 2D 矢量的类中 - 或者更好的是，使用现有的几何库。

**更新**：

由于您使用的是`GeneralPath`这种方法，因此仅部分适用。我目前无法想出一个聪明的算法，但您始终可以将路径段视为直线或弧线并对其进行迭代。刻度之间的距离将是路径长度除以 n，路径长度将是各个段长度的总和。

然后遍历分段，如果两个记号之间有一个顶点（段的开始/结束点），则计算该顶点到最后一个记号的距离，并使用该顶点到下一个记号的距离启动上述算法.

像这样的东西：

```
double distToNextTick = pathLength / n;
double distLastTickToNextVertex = ... ; //calculate
while( distToNextTick > distLastTickToNextVertex ) {
   Point2D nextVertex = ... // get the vertex
   distToNextTick -= distLastTickToNextVertex;

   distLastTickToNextVertex = ...;// calculate again
}

if( distToNextTick == 0.0 ) {
  //the tick is exactly on a vertex
}
else {
  //the tick is on the segment starting at the last vertex
  //for straight lines calculate as above
  //for curves use an appropriate algorithm (depending on the type of curve)
} 
```

# mysql - 如何修复 Glassfish 中的部署错误？

> ID：11500267
> 
> 赞同：0
> 
> 时间：2012-07-16T08:02:44.877
> 
> 标签：mysql, hibernate, glassfish, glassfish-3, hibernate-mapping

在 Glassfish 服务器中部署应用程序时出现以下错误，

“**部署期间发生错误：准备应用程序时出现异常：java.lang.ClassNotFoundException：org.hibernate.ejb.HibernatePersistence。有关详细信息，请参阅 server.log** ”

请帮我。

提前致谢， Gnik

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:37:10.173

GlassFish 中的内置 JPA 提供程序是 EclipseLink。这就是为什么 GlassFish 没有 Hibernate 的类文件的原因。

需要一些努力。应该做的是将休眠库部署为应用程序的一部分。详细说明可以从[这里](https://wikis.oracle.com/display/GlassFish/Detailed+Logging+Output+with+GlassFish+Server,+Hibernate,+and+Log4j)找到。

# firefox - 使用 SDK 密码保护卸载 Firefox 插件

> ID：11500270
> 
> 赞同：1
> 
> 时间：2012-07-16T08:03:00.100
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

这个问题的背景：在公司内部，我们正在开发一个插件来帮助我们做一些漂亮的事情。为了更容易管理，我们希望至少需要一个密码才能删除附加组件，但也可能需要禁用它。

例如，我已经在[Public Fox](https://addons.mozilla.org/en-US/firefox/addon/public-fox/?src=search)中看到了这一点，但这是非 sdk 样式的附加组件。所以我的问题是，是否有一种简单的方法可以使用 SDK 做到这一点？我浏览了文档，但没有找到任何东西，可能是因为我不知道我在寻找什么。

预见到“为什么不也使用该插件？”这个问题。我认为确保每个人都安装一个附加组件已经足够麻烦了，更不用说两个了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:54:57.180

如果您想锁定用户，您真正需要的是一种部署技术，您的 Firefox 部署默认安装您的扩展，并且安装到用户没有写入/删除权限的硬盘驱动器区域。有关 ESR 构建和企业部署的更多详细信息，请参阅 Mozilla Wiki：

[https://wiki.mozilla.org/Deployment:Deploying_Firefox#Firefox_Customization_.28CCK_and_Repackaging_Tools.29](https://wiki.mozilla.org/Deployment:Deploying_Firefox#Firefox_Customization_.28CCK_and_Repackaging_Tools.29)

# mysql - “group by 用于在其他子句之前组织数据 - 例如 where、order by 和 functions...”，真的吗？参考：学习 MySQLupdate

> ID：11500279
> 
> 赞同：0
> 
> 时间：2012-07-16T08:03:54.173
> 
> 标签：mysql, group-by, where, clause

“group by 用于在应用其他子句（例如 where、order by 和函数）之前组织数据。相反，order by 最后应用（在查询解决后）以重新组织查询输出以进行显示。” ，真的？参考：学习 MySQL

我已经在网上冲浪，但找不到这样的东西。这是书上的错误吗？

* * *

更新：我只是注意到别名在 group by 中工作，这意味着它在 select 之后执行，因为 select 在 where 之后执行，我们可以肯定地说这是 book 的错误，group by 在 where 子句之后执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:11:52.720

更好的解释在这里 [http://www.bennadel.com/blog/70-SQL-Query-Order-of-Operations.htm](http://www.bennadel.com/blog/70-SQL-Query-Order-of-Operations.htm)

# wordpress - WordPress 后期修订

> ID：11500285
> 
> 赞同：0
> 
> 时间：2012-07-16T08:04:17.310
> 
> 标签：wordpress, revisions

好的，这里比较简单的问题。我只想在我的编辑帖子页面上显示自动保存/修订，以便我的客户可以在旧的自动保存等之间交替。

任何想法我如何打开它？

谢谢！！！

****编辑：已回答

在编辑帖子页面上，我只需单击顶部的“屏幕选项”即可显示帖子修订模块。没想到这么简单！

![启用后期修订模块](../Images/1312a83452952b038f95f14f2718a196.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:02:11.420

过了一会儿，我能够解决这个问题。只需查看我对问题本身所做的编辑。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-06T13:57:58.383

我只想在这里添加我的解决方案。我遇到了相对相同的问题（尽管有多次编辑，但 cpt 帖子在屏幕选项中不显示修订元框或复选框）。

对于我的问题，我不得不深入研究活生生的项目，我之前的许多开发人员都曾接触过它。

我在数据库中找到了答案——“修订”作为子帖子存储到他们所属的 cpt 帖子中。这意味着它们本身就是一个 post_type。这也意味着，他们通过“post_parent”列中的值来识别他们的父级 - 帖子的 ID 所在的位置。

我的项目中有一个自定义函数用于覆盖自定义帖子的 post_parent（主要用于自定义面包屑）。由于某种原因，它还覆盖了修订版 post_parent 值。

我只是添加`$post->post_type != 'revision'` 到函数的参数，然后

```
if($post->post_type != 'revision') {
        $data['post_parent'] = $post->ID;
    } 
```

只是要确定。

我希望它至少能帮助一个人，像我今天一样拼命寻找答案。

# epson - 我无法获取 pos 打印机的实例

> ID：11500288
> 
> 赞同：0
> 
> 时间：2012-07-16T08:04:29.977
> 
> 标签：epson, thermal-printer, pos-for-.net

我正在研究 EPOS pos 打印机 (EPOS TM-T88III)。我停止了它的驱动程序、EPOS ADK 和 .NET 的 POS 我可以使用 PrintDocument 功能从我的 pos 打印机打印，但我想使用 EPOS ADK。我尝试了它的“Hello OPOS for .NET”示例，但它不起作用。因为，

```
deviceInfo = posExplorer.GetDevice(DeviceType.PosPrinter, strLogicalName)
m_Printer = posExplorer.CreateInstance(deviceInfo) 
```

我可以获得 deviceInfo，但是 posExplorer.CreateInstance(deviceInfo) 什么也不返回。我无法解决这个问题。我该如何解决这个问题才能成功从 posExplorer.CreateInstance(deviceInfo) 返回一些东西，或者是否有任何示例代码来使用 EPOS ADK 打印一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:07:59.900

您必须将其投射到 PosPrinter。这是正确的方法。

```
m_Printer = (PosPrinter)posExplorer.CreateInstance(deviceInfo) 
```

对于示例：当您安装 OPOS for .net ADK for EPSON 时，您将获得许多示例应用程序。您可以在安装目录中找到它们。

还要检查您使用的操作系统版本和 IDE，对于某些操作系统和 IDE，PosPrinter 的对象初始化不会发生。

# javascript - Hybrid App - 使用 iPhone 数字键盘，我可以添加小数点吗？

> ID：11500289
> 
> 赞同：1
> 
> 时间：2012-07-16T08:04:30.540
> 
> 标签：javascript, objective-c, ios, html, hybrid

我正在使用 html 来告诉 Safari 在我的混合应用程序中使用 iPhone 的数字键盘。由于我想添加十进制数字，这很接近，但对于它的使用目的来说还不够好。有谁知道在这个键盘上添加小数点有多容易/难？是否可以通过 Javascript 或等价物实现？或者这是一个专门的本地修复？欢迎任何想法。有关我要实现的目标的示例，请参见下面的链接。

[http://www.kalekold.net/index.php?post=15](http://www.kalekold.net/index.php?post=15)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:15:59.543

这是不可能的，但是有一个小技巧，您可以使用它。

看看这个链接 - [http://www.brownphp.com/2011/05/iphone-currency-input-web-apps/](http://www.brownphp.com/2011/05/iphone-currency-input-web-apps/)

一旦用户开始在字段中写入/键入，它就会开始以这种方式添加数字 - 0.01 -> 0.12 -> 1.23 -> 12.34 。所以这可以用于类似的效果。

这里还概述了 Web 应用程序的输入类型，您可以在其中看到不能使用带有数字和小数点的输入类型。

[http://www.fabianpimminger.com/web-development/how-to-change-the-iphone-on-screen-keyboard-in-web-apps/](http://www.fabianpimminger.com/web-development/how-to-change-the-iphone-on-screen-keyboard-in-web-apps/)

# linux - 从用户空间访问 NOR 内存

> ID：11500291
> 
> 赞同：1
> 
> 时间：2012-07-16T08:04:34.147
> 
> 标签：linux, linux-kernel, embedded, flash-memory

在我的 Compulab cm-x270 CoM Linux 内核上放置在 NOR 中。这个内核没有 MTD 支持，启动后我无法访问 NOR 作为 MTD 分区。我的目标是从用户空间更新这个内核。是的，通过 tftp 从引导加载程序更新最简单的方法，但我不能在这个任务中使用它。是否可以在 /dev/mem 或任何其他方式中映射 NOR？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:46:41.990

我对 SRAM 也有类似的情况。我为`/dev/sram`. 通过设备驱动程序访问会保留所有 Linux 安全规则。

您没有提到如何访问此 NOR 内存。如果它在物理内存地址空间中，那么驱动程序将执行`request_mem_region()`并将`ioremap()`NOR 内存映射到虚拟内核内存空间。然后用户程序可以在这个块（或字符）设备上使用标准文件 I/O。

# php - 在 PHP 提交按钮的 onclick() 事件中创建 Session 变量

> ID：11500293
> 
> 赞同：0
> 
> 时间：2012-07-16T08:04:41.147
> 
> 标签：php, onclick, session-variables

我创建了一个表单，并且在 Stackoverflow 上也遇到了一个[类似的问题](https://stackoverflow.com/questions/8524310/set-a-variable-in-session-when-the-submit-button-is-clicked-in-struts)，涉及将变量从一个页面发送到另一个页面的领域。

我需要传递这个值 $id=$row['id']; 到下一页，但如果我将它存储在会话变量中（在 while lopp 内），那么它只存储最后一项而不是当前值。

```
<form name="send" method="POST" action="got.php">
 <hidden id="value" name="value"/>
//<input type="text" id="value">
//<input type="hidden" name="myVariable" value="'.  htmlentities("myVariable").'">;
<input type=submit name=submit value="submit"  onclick="<?php session_start(); $_SESSION(this.id) ?>">
</form> 
```

完整的代码如下，

```
echo "<form name=payment action='properties_details.php'>";
echo "Results <br>";
while ($row= mysql_fetch_array($result)) {
echo " <table border=3 cell padding=1> <tr> <td> ";

$id=$row['id'];
$pid=$row['pref'];
//And the remaining values as well      

//<input type="hidden" name="myVariable" value="'.  htmlentities($pid).'">;
//<input type="hidden" name="myVariable" value="'.  $pid.'">;

echo "<p>Property ID &nbsp".$pid;
echo "<br> <p> Name &nbsp";
echo $row["name"];
echo "<br>  Properties &nbsp";
echo $row["catergory"];
// And printing the remaining values

echo "<input type=submit name=btnbuy value=Details> "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:09:34.280

*   您没有正确处理 PHP 会话。
*   您的 onclick 事件应该触发 JS 代码，而不是 PHP 代码。
*   PHP是后端脚本语言，JS是前端脚本语言。他们不混合。

**建议**：在继续编码之前，请阅读有关 html、表单、将表单变量传递给 php、php 会话等的更多信息。

**资源/教程：**

*   处理 PHP 会话的教程：http: [//php.about.com/od/advancedphp/ss/php_sessions.htm](http://php.about.com/od/advancedphp/ss/php_sessions.htm)
*   将表单变量传递给 PHP 教程： [http ://www.html.net/tutorials/php/lesson11.php](http://www.html.net/tutorials/php/lesson11.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-29T06:45:51.363

您可以轻松地使用查询字符串在另一个页面上传递您的 $id=$row['id'] 。

在您的按钮上传递这样的查询字符串。

href="page_name.php?xyz=你想在第二页传递的值"

1.这里page_name.php是你要传递$row['id']值的页面名；

2.xyz 是查询字符串名称，借助这个我们可以在 page_name.php 上获取 id

在 page_name.php 上获取查询字符串为：

$id=$_GET["xyz"];

这里 xyz 是按钮单击时传递的查询字符串变量

之后，您可以通过使用 $id 变量在第二页上轻松使用此 $row ['id'] 。

像这样

回声 $id;

# mongodb - 什么是最有效地查询用户关注者/关注者的好 MongoDB 文档结构？

> ID：11500294
> 
> 赞同：9
> 
> 时间：2012-07-16T08:04:41.493
> 
> 标签：mongodb, documents

我一直想知道在各种情况下最大查询效率的理想文档结构，我想问一个。我真的不知道在这种特定情况下 MongoDB 在内存中的行为方式。让我给你一个假设的场景。

想象一个 Twitter 风格的追随者和追随者系统。经过公认的粗略一瞥，主要选项似乎是：

1.  在每个用户文档中，一个“关注者”数组包含对他们关注的其他用户的所有文档的引用。通过在其他用户的“user.followers”数组中找到我们当前的用户来找到关注者。主要缺点似乎是 Followee 搜索的潜在查询开销。此外，对于专门针对“user.followers”内容的查询，MongoDB 是只访问用户文档中的必填字段，还是找到整个用户文档，然后从那里查找必填字段值，这是缓存/以这样一种方式存储，即对大型用户群的查询将需要更多的内存？

2.  在每个用户文档中，存储“followers”和“followees”，以便更快地访问每个用户文档。这显然具有重复数据的缺点，因为用户 A 跟随用户 B 的条目存在于相应字段的两个用户文档中，并且从 from 中删除需要在另一个中匹配删除。从技术上讲，这可能是考虑将简单删除的潜在故障点数加倍。并且当删除发生时，MongoDB 是否仍然遭受我所听到的对它的内存存储数据的“瑞士奶酪”的影响，因此从 2 个字段而不是 1 个字段中删除会使内存漏洞问题的影响加倍？

3.  用于存储用户关注者的单独集合，以与 1 中的用户文档类似的方式进行查询，除了显然唯一被访问的数据是关注者，因此如果用户文档包含与每个用户相关的大量其他数据，我们避免访问该数据。虽然这似乎有点关系数据库的感觉，虽然我知道这并不总是一种糟糕的方法，但显然如果提到的其他方法之一（或我没有考虑过的方法）在 Mongo 的架构下更好，我很想学习！

如果有人对此有任何想法，或者想告诉我我在某个地方错过了一个非常相关且明显的文档页面，或者甚至想告诉我我只是愚蠢（想解释一下原因，请； ) ) 我很想收到你的来信！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T20:18:17.150

这是一个经典的追随者问题，没有一个答案。查看此链接：

[mongo db design of following and feeds，我应该在哪里嵌入？](https://stackoverflow.com/questions/8213637/mongo-db-design-of-following-and-feeds-where-should-i-embed)

实际上，如果 MongoDB 和 SQL 服务器是您唯一的选择，那么这种情况非常适合关系模式。但这是一种特殊类型的关系问题，其中你有一个双向关系。这可能可以通过图形数据库更好地处理：http:

[//forum.kohanaframework.org/discussion/10130/followers-and-following-database-design-like-twitter/p1](http://forum.kohanaframework.org/discussion/10130/followers-and-following-database-design-like-twitter/p1)

问题是，您可以保留关注者或用户文档中的关注者，但不能同时关注，以避免双重删除问题。因此，如果您必须坚持使用 MongoDB，那么一种出路可能是……（假设人们不关注/取消关注*任何*经常），

只保留文档中的关注者，因为当我查看我的个人资料时，我会对我关注的人感兴趣..（这就是我关注他们的原因，对吧？）..然后做像这样的查询：

`db.Users.find({ user_id : { $in : followees })`

这将告诉谁都在关注我（比如我的 id 是'user_id'）。

我不建议反过来的另一个原因是.. 最多可以关注 30-40 人，因此存储 30-40 个关注者的用户文档应该可以与存储数千个关注者的用户文档相比！使用文档中的跟随者方法，您将获得大致均匀大小的用户文档。在文档中的跟随者方法中，您将获得一些非常小但也非常庞大的文档。并且根据您输入的关注者数据的数量（如果有，除了 follower_id），您*可能*需要注意文档大小限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T20:04:52.323

鉴于它是多对多关系，选项（2）对我来说看起来不错。至于匹配删除，这通常不是问题，只要您在两个文档之间有某种协调机制即可。

碎片通常取决于应用程序的访问模式，并且通常是大多数数据系统的问题。为了避免内部碎片，对 mongo 进行了一些重大更改。此外，如果发生碎片，还有离线压缩替代方案可以修复碎片。

# c# - Visual Studio 错误列表中的输出设计时错误？

> ID：11500295
> 
> 赞同：2
> 
> 时间：2012-07-16T08:04:51.600
> 
> 标签：c#, .net, visual-studio-2010, entity-framework, compiler-errors

我扩展了实体框架设计器以包含我自己的自定义属性。但是，当用户在这些属性中添加输入时，我想验证属性值在格式方面是否正确，例如，我有一个名为“FilterColumns”的自定义实体框架设计器属性，用户必须在其中添加以下格式的字符串，'|By:FirstName(string),Surname(string),Location(string)|'。我有代码可以验证此字符串的格式是否正确，但我想在 Visual Studio 的正常错误列表中的设计时通知用户，例如，他们忘记添加逗号或数据类型不是有效的。有没有办法做到这一点。请协助？

# c++ - 在同一解决方案中开发 64 位 DLL 和 32 位 DLL

> ID：11500296
> 
> 赞同：0
> 
> 时间：2012-07-16T08:04:56.017
> 
> 标签：c++, visual-studio-2010, dll, linker, 32bit-64bit

我们正在为 32 位和 64 位目标开发 DLL。此 DLL 引用 WinDDK 中的库。因此，对于我们的 32 位目标 DLL，我们必须引用 32 位 DDK 库，对于 64 位目标 DLL，我们必须引用 64 位 DDK 库。

最好的方法是什么？现在，在我们的代码中，我们有：

```
#pragma comment (lib , "c:\winddk\i386\..."); 
```

但对于 x64 目标，该路径不正确。我们不想在我们的代码中手动修改这些路径，因为这很容易出错。如果重要的话，我们在 VS2010 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:10:07.573

你可以使用`#ifdef`：

```
#ifdef _WIN64
    #pragma comment (lib , "c:\winddk\x64\...")
#else
    #pragma comment (lib , "c:\winddk\i386\...")
#endif 
```

[`_WIN64`](http://msdn.microsoft.com/en-us/library/b0084kay.aspx)是 Microsoft 特定的预定义宏。

# android - 在自定义通知中自定义进度条

> ID：11500302
> 
> 赞同：1
> 
> 时间：2012-07-16T08:05:24.333
> 
> 标签：android, android-custom-view, android-notifications, android-progressbar

我正在尝试实现一个带有两个进度条的通知。[我从这里](https://stackoverflow.com/a/10390258/1455531)提到自定义通知的进度条。我不断收到此错误并且无法找到解决方案。请帮忙。

```
 07-16 13:26:30.523: E/StatusBarService(1525): couldn't inflate view for notification mobishare.notify/0x50ae95c1
    07-16 13:26:30.523: E/StatusBarService(1525): android.view.InflateException: Binary XML file line #46: Error inflating class mobishare.notify.customProgressBar
    07-16 13:26:30.523: E/StatusBarService(1525):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
    07-16 13:26:30.523: E/StatusBarService(1525):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
    07-16 13:26:30.523: E/StatusBarService(1525):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
    07-16 13:26:30.523: E/StatusBarService(1525):   at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    07-16 13:26:30.523: E/StatusBarService(1525):   at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    07-16 13:26:30.523: E/StatusBarService(1525):   at android.widget.RemoteViews.apply(RemoteViews.java:1303)
    07-16 13:26:30.523: E/StatusBarService(1525):   at com.android.systemui.statusbar.StatusBarService.makeNotificationView(StatusBarService.java:597)
    07-16 13:26:30.523: E/StatusBarService(1525):   at com.android.systemui.statusbar.StatusBarService.addNotificationViews(StatusBarService.java:634)
    07-16 13:26:30.523: E/StatusBarService(1525):   at com.android.systemui.statusbar.StatusBarService.addNotification(StatusBarService.java:431)
    07-16 13:26:30.523: E/StatusBarService(1525):   at com.android.systemui.statusbar.CommandQueue$H.handleMessage(CommandQueue.java:201)
    07-16 13:26:30.523: E/StatusBarService(1525):   at android.os.Handler.dispatchMessage(Handler.java:99)
    07-16 13:26:30.523: E/StatusBarService(1525):   at android.os.Looper.loop(Looper.java:130)
    07-16 13:26:30.523: E/StatusBarService(1525):   at android.app.ActivityThread.main(ActivityThread.java:3687)
    07-16 13:26:30.523: E/StatusBarService(1525):   at java.lang.reflect.Method.invokeNative(Native Method)
    07-16 13:26:30.523: E/StatusBarService(1525):   at java.lang.reflect.Method.invoke(Method.java:507)
    07-16 13:26:30.523: E/StatusBarService(1525):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    07-16 13:26:30.523: E/StatusBarService(1525):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    07-16 13:26:30.523: E/StatusBarService(1525):   at dalvik.system.NativeStart.main(Native Method)
    07-16 13:26:30.523: E/StatusBarService(1525): Caused by: java.lang.ClassNotFoundException: mobishare.notify.customProgressBar in loader dalvik.system.PathClassLoader[.]
    07-16 13:26:30.523: E/StatusBarService(1525):   at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
    07-16 13:26:30.523: E/StatusBarService(1525):   at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
    07-16 13:26:30.523: E/StatusBarService(1525):   at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
    07-16 13:26:30.523: E/StatusBarService(1525):   at android.view.LayoutInflater.createView(LayoutInflater.java:471)
    07-16 13:26:30.523: E/StatusBarService(1525):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
    07-16 13:26:30.523: E/StatusBarService(1525):   ... 17 more 
```

**编辑：** 或者如果有任何机构可以告诉我如何在通知中添加 2 个进度条。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:08:22.393

确保自定义进度条的路径在 XML 文件中写入正确.. 因为问题是系统找不到类..`java.lang.ClassNotFoundException: mobishare.notify.customProgressBar`

# excel - 使用登录页面将数据导入 Excel 2003

> ID：11500304
> 
> 赞同：5
> 
> 时间：2012-07-16T08:05:42.490
> 
> 标签：excel, excel-2003, vba

我正在构建一个项目，并且我了解 Excel 2003 支持通过“数据 -> 导入外部数据 -> 新 Web 查询”从外部网页导入数据。

这可以通过此处列出的几个步骤来完成：http: [//www.internet4classrooms.com/excel_import.htm](http://www.internet4classrooms.com/excel_import.htm)

但是，我从中导入数据的站点是一个内部网站（Intranet），每次访问它时都需要登录。

该网站不记得密码，每次我点击“导入”按钮时，由于登录，它什么也不做。

在 Excel 2003 中从外部网站导入数据时，如何提示输入用户名 + 密码并登录网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:08:13.463

大约一年前我遇到了这个问题，正如 JimmyPena 建议的那样，IE 自动化可能是要走的路。这看起来比你预期的要复杂得多，但相信我，我花了几个小时试图找到一种更简单的方法，但找不到。

花一些时间了解 HTML 和 DOM 对象。对于您正在做的事情来说，这似乎有些矫枉过正，但如果您想从网站获取数据，它将派上用场。这是一个脚本，可让您指出正确的方向：

1.  创建一个带有两个文本框和一个按钮的用户窗体
2.  Textbox1 将是用户名输入，而 textbox2 将是您的密码
3.  您应该通过在属性窗口中选择一个密码字符来屏蔽密码输入（在 VBA 编辑器中按 F4，从下拉列表中选择 textbox2 并在 PasswordChar 旁边输入一个字符）
4.  双击刚刚创建的按钮并粘贴以下代码：

    ```
    Option Explicit

    Private Sub CommandButton1_Click()
    Const READYSTATE_COMPLETE = 4
    Const tempDir As String = "C:\Windows\Temp\"

    Dim userName$, passWord$, URL$, s_outerhtml$ ''These are strings
    Dim IE As Object, IE_Element As Object, IE_HTMLCollection As Object
    Dim i_file% ''This is an integer
    Dim blnUsernameEntered As Boolean, blnPasswordEntered As Boolean, blnSheetFnd As Boolean
    Dim ws As Excel.Worksheet

    ''Test for missing username or password
    If Me.TextBox1 = vbNullString Then MsgBox "Enter a User Name", vbOKOnly, "User Name Missing": Exit Sub
    If Me.TextBox2 = vbNullString Then MsgBox "Enter a Password", vbOKOnly, "Password Missing": Exit Sub

    ''Set the username and password based on the userform inputs
    userName = Me.TextBox1.Value
    passWord = Me.TextBox2.Value

    ''Hide the form
    Me.Hide

    ''Enter your address to navigate to here
    URL = "http://theofficialjbfansite.webs.com/apps/auth/login"

    ''Create an Internet Explorer object if it doesn't exist
    If IE Is Nothing Then Set IE = CreateObject("InternetExplorer.Application")

    ''Make the window visible with true, hidden with false
    IE.Visible = True
    ''navigate to the website
    IE.Navigate URL

    '' use this loop to make wait until the webpage has loaded
    Do While IE.Busy Or IE.readyState <> READYSTATE_COMPLETE
       DoEvents
    Loop

    ''This is where it will get tricky - see my notes on DOM at the end of this post
    ''build a collection of input elements
    Set IE_HTMLCollection = IE.document.getElementsByTagName("input")
    ''for each html element in the "input" collection
    For Each IE_Element In IE_HTMLCollection
      If IE_Element.Name = "email" Then IE_Element.innerText = userName:   blnUsernameEntered = True
      If IE_Element.Name = "password" Then IE_Element.innerText = passWord: blnPasswordEntered = True
      If blnUsernameEntered = True And blnPasswordEntered = True Then Exit For
      ''Unblock line below if you are having trouble finding the element name,
      ''view the output in the Immediate Window (Ctrl + G in the VBA Editor)
      ''Debug.Print IE_Element.Name
    Next

    ''Find the form and submit it
    Set IE_HTMLCollection = IE.document.getElementsByTagName("form")
    For Each IE_Element In IE_HTMLCollection
       If IE_Element.Name = "loginForm" Then IE_Element.submit
    Next

    Do While IE.Busy Or IE.readyState <> READYSTATE_COMPLETE
       DoEvents
    Loop

    ''The next line helps ensure that the html has been fully loaded
    Application.Wait Now() + TimeValue("0:00:02")
    s_outerhtml = IE.document.body.OuterHtml
    i_file = FreeFile

    ''This is a modification of some code I found at www.tek-tips.com <--great resource
    ''the code saves a temporary copy of the webpage to your temp file
    Open tempDir & "\tempFile.htm" For Output As #i_file
    Print #i_file, s_outerhtml

    Close #i_file

    ''Creating a "Data" sheet if it doesn't exist
    For Each ws In ThisWorkbook.Worksheets
       If ws.Name = "Data" Then blnSheetFnd = True: Exit For
    Next

    If blnSheetFnd = False Then Sheets.Add: ActiveSheet.Name = "Data"

    Sheets("Data").Cells.Clear

    ''Here is your webquery, using the temporary file as its source
    ''this is untested in 2003, if it errors out, record a macro
    ''and replace the property that throws the error with your recorded property
    With Sheets("Data").QueryTables.Add(Connection:= _
        "URL;" & tempDir & "tempFile.htm" _
        , Destination:=Range("$A$1"))
        .Name = "Data"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .BackgroundQuery = True
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .WebSelectionType = xlEntirePage
        .WebFormatting = xlWebFormattingAll
        .WebPreFormattedTextToColumns = True
        .WebConsecutiveDelimitersAsOne = True
        .WebSingleBlockTextImport = False
        .WebDisableDateRecognition = False
        .WebDisableRedirections = False
        .Refresh BackgroundQuery:=False
    End With

    ''delete the temporary file
    Kill tempDir & "\tempFile.htm"

    ''clean up after yourself, foo!!
    IE.Quit
    Set IE = Nothing
    Set IE_HTMLCollection = Nothing
    Unload UserForm1

    End Sub 
    ```

5.  更改您网站的 URL 并修改`getelement`方法以使用您的网页

对于不熟悉 HTML 和 DOM（文档对象模型）的人来说，最棘手的部分是在页面上找到正确的元素。

一个好的技巧是使用 Internet Explorer 的开发者工具。在 IE 中打开您的 Intranet 页面，然后按 F12。这将打开开发者工具。单击工具栏中的箭头图标（箭头指向上方和左侧）并切换回您的 Intranet 页面。将鼠标悬停在页面上，您将看到在每个元素周围绘制的蓝色框。将鼠标悬停在用户名登录上，然后单击输入框。这将突出显示源代码中的 HTML。

从这里您可以识别元素 id、名称、标记名和类（如果有的话）。`getelementbyID`对,等做一些研究，`getelementsbytagname`或者单步执行上面的代码以了解它是如何工作的。

最后一点，如果您的 Intranet 页面有一个表单元素，您将必须使用上述`getelement`方法获取表单对象并使用`.submit`. 如果页面使用按钮对象，则获取按钮元素并使用`.click`. 祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T09:08:46.440

不确定它是否仍然相关，但我有一个通过宏的解决方案

以下是步骤：

1：在导入新的网络查询时记录你的宏（什么都可以）

2：刷新所有查询。

编辑您的 Web 查询以包括内联用户名/密码。

下面是我的宏：

```
 Sub xmlUpdate()
'This will enable the import of our XML data. The first part is a dummy import, to    authenticate the Excel file with the iJento servers. The second part (Web_Query_1 is the actual import)
'The sheet is initially inserted as "Dummy" and then promptly deleted.
    Sheets.Add.Name = "Dummy"
    ActiveWorkbook.XmlImport URL:= _
        "https://USERNAME:PASSWORD@SERVER.com/query/app?service=file=201" _
        , ImportMap:=Nothing, Overwrite:=True, Destination:=Range("$A$1")
    Sheets("Dummy").Select
    Application.DisplayAlerts = False
    ActiveWindow.SelectedSheets.Delete
    ActiveWorkbook.XmlMaps("Web_Query_1").DataBinding.Refresh
    End Sub 
```

# java - 获取相同的对象休眠到不同的对象

> ID：11500310
> 
> 赞同：0
> 
> 时间：2012-07-16T08:06:05.623
> 
> 标签：java, hibernate

我今天发现了这个问题，还没有找到任何解决方案，我现在正在学习如何使用休眠，所以我会尽力解释这种情况。

我有一个非常简单的课程：

```
public class Descripcion {
    private long id;
    private String descripcion;
    private AuxTitularidad titularidad = new AuxTitularidad();
    private AuxTitularidad titularidad2 = new AuxTitularidad();

    //getters and setters below... all of them auto-generated
} 
```

这是我的映射文件

```
<class name="Descripcion" table="DESCRIPCION">
    <id name="id" type="long" column="id">
        <generator class="identity"></generator>
    </id>
    <property name="descripcion" column="descripcion"/>
    <many-to-one name="titularidad" class="AuxTitularidad" column="id_titularidad1"  />
    <many-to-one name="titularidad2" class="AuxTitularidad" column="id_titularidad2"/>
</class> 
```

这种映射对我有用，除非“titularidad”和“titularidad2”具有相同的值（引用相同的对象），否则根本没有问题。发生这种情况时，hibernate 只获取 AuxTitularidad 类的单个对象并将其用于“titularidad”和“titularidad2”。

如果我只是为了阅读而获取它们应该不是问题，但是我需要使用 HTML 表单进行更新，并且由于“Description”的实例持有对“AuxTitularidad”的同一个实例的两个引用，它只保留一个值。

例子：

数字 1：这些是存储在我的数据库中的值：

```
 titularidad: 17
 titularidad2: 23 
```

所以我使用 HTML 表单进行更新，并为它们分配这些新值：

```
 titularidad: 30
 titularidad2: 28 
```

作品！

数字 2：这些是存储在我的数据库中的值：

```
 titularidad: 18
 titularidad2: 18 
```

所以我使用 HTML 表单进行更新，并为它们分配这些新值：

```
 titularidad: 12
 titularidad2: 32 
```

不工作。它将其保存在数据库中：

```
 titularidad: 32
 titularidad2: 32 
```

我已经从 HTML 表单检查了对象的绑定，它是正确的，我确定问题是“titularidad”和“titularidad2”都持有对同一个对象的引用（甚至查看了对象的 id ）。¿ 无论如何告诉休眠将这些放入单独的对象中？¿ 一些配置或参数？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T08:22:24.553

这是预期的行为。在给定会话中，给定实体仅存在一次。

如果您想为您的描述实体分配另一个标题，则不应修改现有标题的字段。相反，您应该获得对要分配的 titularidad 的引用，并分配此引用：

```
Titularidad newTitularidad = session.load(Titularidad.class, newTitularidadId);
Titularidad newTitularidad2 = session.load(Titularidad.class, newTitularidad2Id);
descripcion.setTitularidad(newTitularidad);
descripcion.setTitularidad2(newTitularidad2); 
```

# eclipse - Spring Eclipse (STS) @RequestMapping 视图是空白的，是因为 Maven 项目吗？

> ID：11500318
> 
> 赞同：3
> 
> 时间：2012-07-16T08:06:46.997
> 
> 标签：eclipse, spring, maven, spring-mvc, ide

我将 STS 2.7.2 用于现有的 Maven 项目。Web 应用程序在 Tomcat 中运行良好。结构如下：

1.  核
2.  服务
3.  网络
4.  战争

所以这实际上是 Maven 的 4 个项目。我已经为所有 4 个项目添加了 Spring 项目性质，并为每个项目添加了 bean 配置 (xml)，但是 Spring Tools > Show RequestMapping 仍然是空白的。我已经尝试在所有 4 个项目的配置中触发此命令，包括战争的配置集 web-context。

我只是想知道是否其他人可能有类似的项目设置并已成功查看 STS 中的 RequestMapping 功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-05T10:57:21.953

要查看 RequestMappings 中的任何内容，`view(@RequestMappings)`请执行以下操作：右键单击项目或配置文件（如果有，则为 applicationContext）>properties>Spring

在配置文件中，选择您的 bean 配置文件。

# java - 了解java中的instanceof以及if条件？

> ID：11500325
> 
> 赞同：3
> 
> 时间：2012-07-16T08:07:33.830
> 
> 标签：java, instanceof

我不确定在我的示例程序 53,00 中树（参考变量）如何成为对象树的实例？我期待“Pine”和“oops”作为输出，但为什么“Tree”包含在输出中？我根本没有给 Tree tree = new Tree() 。

```
 class Tree{}  
class Pine extends Tree{}  
class Oak extends Tree{}  
public class forrest {    

    public static void main( String[] args )      
    {    
        Tree tree = new Pine();   

        if( tree instanceof Pine )      
            System.out.println( "Pine" );   
        if( tree instanceof Tree )       
            System.out.println( "Tree" );  
        if( tree instanceof Oak )      
            System.out.println( "Oak" );   
        else System.out.println( "Oops" );  
    }  
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T08:10:23.037

由于 a`Pine`或 an`Oak`也是 IS-A ，因此无论是还是，`Tree`您`tree instanceof Tree`都将返回 true 。您可以在[Java 教程](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html) 中阅读更多内容。`tree``Tree``Pine``Oak`
`Inheritance`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T08:15:58.357

正如 Keppil 所说，instanceof 在祖先上也返回 true。基于此，将发生以下情况：

```
Tree tree = new Pine()

tree instanceof Pine; // true
tree instanceof Oak; // false
tree instanceof Tree; // true
tree instanceof Object; // true

Object something = new Oak();

something instanceof Pine; // false
something instanceof Oak; // true
something instanceof Tree; // true
something instanceof Object; // true 
```

事实上，instanceof Object 总是会返回 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:17:29.490

您的 Pine 类有一个隐式构造函数（除非您手动定义自己的构造函数，否则编译器会将其放置在那里，在这种情况下将使用您的构造函数）。所有子类都必须调用其父类（超类）作为其构造函数的一部分。不这样做会导致抛出异常。所以你有一个隐含的

```
Pine Pine() { super(); } 
```

调用它的超类的隐式构造函数（Tree；这就是“super（）”所做的），看起来像

```
Tree Tree() { super(); } 
```

这是调用它的超类（对象）的隐式构造函数......

因此，如果树是松树，那么

```
tree instanceof Pine
tree instanceof Tree
tree instanceof Object 
```

全部返回真

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T08:13:37.293

一个孩子是它自己的实例和它的父类的子类型。每个类都是 java.lang.Object 类的子类型。在您的示例中，Pine 和 Oak 是 Tree 的子类，或者可以写成 Pine 和 Oak 是 Tree 类的子类型，所以

```
if( tree instanceof Tree ) 
```

是真的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T08:15:08.077

每个子类“都是”其超类的一种。由于您的“树”是从 Tree 类扩展的 Pine 类的实例，因此它是 Tree 的实例。

对于您的编码风格，我建议阅读[Beware of instanceof operator](http://www.javapractices.com/topic/TopicAction.do?Id=31)

# java - VPN下navision web服务中的认证

> ID：11500328
> 
> 赞同：1
> 
> 时间：2012-07-16T08:07:38.917
> 
> 标签：java, web-services, authentication, vpn, navision

我正在 Java 下开发一个应用程序，它必须在某个时候调用在 navision 下开发的 Web 服务，该服务需要我提供的域用户/通行证。

现在这个 WS 不是公开的，我必须使用不同的用户/密码连接到特定的 VPN 才能调用 Web 服务，这样我才能正确测试我的代码。

每次我调用它时，我都会收到一个 401 代码作为响应，拒绝我的身份验证。

我尝试使用 java.net.authenticator 设置默认身份验证器和 org.apache.commons.httpclient 在适当范围内设置默认凭据，但仍然没有收到肯定的答案。

我也尝试过使用soapUI进行外部测试但没有成功，尽管我不是100%的配置是正确的。

无论如何，如何确定身份验证问题的根源？

我不确定这是否是因为我在 vpn 连接或其他 navision Web 服务下进行测试需要某种特殊处理，或者这两种情况同时进行。

我欢迎任何想法、方法或评论。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:21:48.520

要检查的一件事是 NAV 的中间层“CustomSettings.config”文件中的“WebServicesUseNTLMAuthentication”设置。我的理解是，当您不（或不能）使用 SPNEGO 进行身份验证时，需要将此属性设置为“true”，这是 Microsoft 的首选和默认方法。

可以在此[MSDN 文章](http://msdn.microsoft.com/en-us/library/dd355055.aspx)中找到一些其他详细信息。

此外，[Freddy Kristiansen](http://blogs.msdn.com/b/freddyk/)（NAV 团队的软件架构师）在他的博客上写了一系列关于如何从各种不同平台连接到 NAV Web 服务的文章。与您的项目最相关的是[一般](http://blogs.msdn.com/b/freddyk/archive/2010/01/19/connecting-to-nav-web-services-from.aspx)连接到 NAV Web 服务和[从 Java 连接到 NAV Web 服务](http://blogs.msdn.com/b/freddyk/archive/2010/01/19/connecting-to-nav-web-services-from-java.aspx)。

希望有帮助。

# regex - 日期格式的正则表达式

> ID：11500330
> 
> 赞同：-4
> 
> 时间：2012-07-16T08:07:45.967
> 
> 标签：regex

我想要这种日期格式的正则表达式 **Wed Jul 16 00:00:00 UTC 2008**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:13:12.080

```
(?<WeekDay>\w+)\s+(?<Month>\w+)\s+(?<MonthDay>\d+)\s+(?<Hour>\d+):(?<Min>\d+):(?<Sec>\d+)\s+(?<TimeZone>\w+)\s+(?<Year>\d+) 
```

并得到这些组

```
${WeekDay}
${Month}
${MonthDay}
${Hour}
${Min}
${Sec}
${TimeZone}
${Year} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:10:49.133

使用这个正则表达式 `([a-zA-Z]{3}\s){2}\d{2}\s\d{2}:\d{2}:\d{2}\sUTC\s\d{4}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:11:40.680

```
$subject = "Wed Jul 16 00:00:00 UTC 2008   Tue Jul 12 15:00:04 UTC 2009";
$pattern = '![a-zA-Z]{3}\s+[a-zA-Z]{3}\s+\d{2}\s+\d{2}\:\d{2}\:\d{2}\s+[a-zA-Z]{3}\s+\d{4}!';
preg_match_all($pattern, $subject, $matches);
print_r($matches); 
```

输出：

```
Array ( [0] => Array ( [0] => Wed Jul 16 00:00:00 UTC 2008 [1] => Tue Jul 12 15:00:04 UTC 2009 ) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T08:14:38.977

```
EEE MMM dd HH:mm:ss z yyyy 
```

如果你`Java`使用`SimpleDateFormat`

# javascript - 均衡容器行上的 div 高度

> ID：11500331
> 
> 赞同：1
> 
> 时间：2012-07-16T08:07:52.127
> 
> 标签：javascript, jquery, css, html, height

我已经尝试了很多东西（css & js）并且无法在以下站点上获得一些具有相同高度的框：

[http://www.ancoris.com](http://www.ancoris.com)

我所说的方框从“ **Ancoris Success Stories** ”（橙色方框）和右边的 2 开始。

我正在谈论的区域如下（我没有包含所有代码，只包含我需要均衡的容器和 3 个 div）：

```
<div id="below-content" class="row-fluid">
   <div class="moduletable first orangebox h3 span4">
   <div class="moduletable blueboxonly span4">
   <div class="moduletable orangebox h3 span4">
</div> 
```

如果可能的话，我最好用 CSS 来做这件事——但就是做不到。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T08:10:11.143

为此，您可以使用**display:table**属性。像这样写：

```
#below-content{
 display:table;
}
.moduletable{
 display:table-cell;
} 
```

*注意：`display:table`直到 IE8 及以上*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:17:06.773

您可以将所有 div 高度设置为具有最大高度的 div 的高度。

```
var maxHeight = 0;

var divs = jQuery("#below-content .moduletable");

jQuery.each(divs, function(){
    var height = jQuery(this).height();
    if(maxHeight<height)
        maxHeight = height;

});
divs.height(maxHeight); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:33:27.163

创建一个新的**CSS 样式规则，以对该**[**文件**](http://www.ancoris.com/templates/ancoris/css/bootstrap-responsive.min.css)中**第 15 行**中的现有 CSS 选择器具有最小高度要求。

根据当前使用的 CSS，中心框被锁定在该元素的顶部和底部`height:256px`。`padding:9px`也就是说，总最小高度为`274px`(9 + 256 + 9)。

```
.row-fluid .span4{
  min-height: 274px;
} 
```

上面的 CSS 选择器规定了整行盒子的最小高度。

**截屏：**

![在此处输入图像描述](../Images/1a9beeb6694ff6a21b10c3addd9c2def.png)

* * *

**状态更新：**

因为橙色和蓝色框中的**内容具有动态内容**，您实际上可以定义任何***所需*** `min-height`的网页布局要求。之前`274px`是根据当时的蓝框内容。

请注意，如果内容超过此设置的阈值，您将再次出现不均匀的框。

解决方案是找出所需的**实际**最小高度。这是通过查看每个橙色框和蓝色框来了解**最大项目数**以及**最大项目高度**来实现所需的最终垂直高度来实现的。

然后，当**所有框**都以***100% 的容量***或小于此容量的值显示*动态数据*时，所有内容的高度仍将**相等**。

 ***将**布局管理**更进一步，您可以对*右侧*的框执行相同操作，使***博客框***底部与该行的其他底部对齐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T08:49:40.647

桌子呢？似乎人们正试图使 div 表现得像使用 css 规则的表，但是添加一个适当的表来呈现你的块呢？

我知道，如果使用不当，表格会很糟糕。“正确”在这里意味着您不应该使用表格来渲染不需要渲染表格的东西......我从许多文章中得到了这一点：不推荐使用表格，只是要小心使用。这里的问题是你真的没有太多选择！CSS 太脆弱而无法实现，而 Javascript 在我看来就像是一把可以杀死苍蝇的锤子。

我建议你试一试桌子，看看效果如何。当然，让我们知道。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-23T09:57:18.250

```
function equalHeight(group) {
    jQuery(group).css("height", "auto");

    eqheight = 0;
    group.each(function () {
        thisHeight = jQuery(this).height();
        if (thisHeight > eqheight) {
            eqheight = thisHeight;
        }
    });
    group.height(eqheight);
}
jQuery(document).ready(function () {
    equalHeight(jQuery(".moduletable"));
});
jQuery(window).resize(function () {
    equalHeight(jQuery(".moduletable"));
});
```

```
function equalHeight(group) {
    jQuery(group).css("height", "auto");

    eqheight = 0;
    group.each(function () {
        thisHeight = jQuery(this).height();
        if (thisHeight > eqheight) {
            eqheight = thisHeight;
        }
    });
    group.height(eqheight);
}
jQuery(document).ready(function () {
    equalHeight(jQuery(".moduletable"));
});
jQuery(window).resize(function () {
    equalHeight(jQuery(".moduletable"));
});
```

```
.blueboxonly{
  background-color: blue;
  color: #fff;
  padding: 15px;
  float: left;
  margin-right: 5px;
}

.orangebox{
  background-color: orange;
  color: #fff;
  padding: 15px;
  float: left;
  margin-right: 5px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div id="below-content" class="row-fluid">
   <div class="moduletable first orangebox h3 span4"> 01 div</div>
   <div class="moduletable blueboxonly span4"> 02 div<br/>02 div</div>
   <div class="moduletable orangebox h3 span4"> 03 div<br/>03 div<br/>03 div</div>
</div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-23T10:01:02.860

```
function equalHeight(group) {
    jQuery(group).css("height", "auto");

    eqheight = 0;
    group.each(function () {
        thisHeight = jQuery(this).height();
        if (thisHeight > eqheight) {
            eqheight = thisHeight;
        }
    });
    group.height(eqheight);
}
jQuery(document).ready(function () {
    equalHeight(jQuery(".moduletable"));
});
jQuery(window).resize(function () {
    equalHeight(jQuery(".moduletable"));
});
```

```
.blueboxonly{
  background-color: blue;
  color: #fff;
  padding: 15px;
  float: left;
  margin-right: 5px;
}

.orangebox{
  background-color: orange;
  color: #fff;
  padding: 15px;
  float: left;
  margin-right: 5px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div id="below-content" class="row-fluid">
   <div class="moduletable first orangebox h3 span4"> 01 div</div>
   <div class="moduletable blueboxonly span4"> 02 div<br/>02 div</div>
   <div class="moduletable orangebox h3 span4"> 03 div<br/>03 div<br/>03 div</div>
</div>
```***

# c - 为什么使用 printf(%x) 指针的值不同？

> ID：11500347
> 
> 赞同：0
> 
> 时间：2012-07-16T08:09:27.417
> 
> 标签：c, pointers, printf

```
#include <stdio.h>
int main(void)
{
  int *ptr;
  printf("The Hex value of ptr is 0x%x",ptr);
  printf("The pointer value of ptr is %p",ptr);
} 
```

并且输出有点不同，我不知道为什么

```
The Hex value of ptr is 0x24a77950
The pointer value of ptr is 0x7fff24a77950 
```

它显示 ptr 的值是一个十六进制整数，但十六进制输出缺少部分`7fff`。

这是 printf 格式问题还是其他问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T14:42:34.873

%x 将指针转换为无符号整数（32 位长度）。在 64 位机器上，您的指针是 8 字节（64 位）长度。

使用 %p 打印以完整大小（64 位）打印整个指针。但是当你用 %x 打印时，只打印低 32 位。因此，使用 %p 打印指针总是安全的。

您可以添加额外的 2 行，如下所示并验证：

```
printf("size of unsigned int is %lu\n", sizeof(unsigned int));
printf("size of pointer is %lu\n", sizeof(int *)); 
```

在具有 64 位操作系统的 64 位机器上，这应该分别给您 4 和 8。

查看已回答的两个类似问题：[问题 1](https://stackoverflow.com/questions/2369541/where-is-p-useful-with-printf)和[问题 2](https://stackoverflow.com/questions/399003/is-the-sizeofsome-pointer-always-equal-to-four)

# rubymotion - 如何在 RubyMotion 中使图像旋转？

> ID：11500348
> 
> 赞同：0
> 
> 时间：2012-07-16T08:09:28.400
> 
> 标签：rubymotion

如何在 RubyMotion 中旋转图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T04:03:50.583

终于找到了，用[Teacup](https://github.com/rubymotion/teacup)。

```
Teacup::Stylesheet.new :main do
  style :rpng,
    image: UIImage.imageNamed("image.png"),
    frame: ([[50, 50], [70, 30]]),
    layer: {
      transform: rotate(identity, pi/3, 0.3, 0.3, 0.3)
    }
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T21:09:31.257

如果您正在寻找原始的 Obj-C 到 RubyMotion 的转换，我们已[在此处](https://github.com/IconoclastLabs/rubymotion_cookbook/blob/master/ch_15/15_animate_rotation/app/root_controller.rb)完成。

```
class RootController < UIViewController

  def viewDidLoad
    super
    xcode_image = UIImage.imageNamed("ilabs.png")

    @xcode_image_view1 = UIImageView.alloc.initWithImage(xcode_image)

    @xcode_image_view1.setFrame(CGRectMake(0,0,100,100))

    view.backgroundColor = UIColor.whiteColor
    view.addSubview(@xcode_image_view1)
  end

  def viewDidAppear paramAnimated
    super

    @xcode_image_view1.center = view.center
    UIView.beginAnimations("xcodeImageView1Animation", context:nil)

    UIView.setAnimationDuration(5)

    UIView.setAnimationDelegate(self)

    UIView.setAnimationDidStopSelector('clockwiseRotationDidStop:finished:context:')

    @xcode_image_view1.transform = CGAffineTransformMakeRotation(3.141592654 / 2)

    UIView.commitAnimations

  end

  def clockwiseRotationDidStop(paramAnimationID, finished:paramFinished, context:paramContext)
    p "Animation Finished now rotate back"

    UIView.beginAnimations("xcodeImageView1AnimationBack", context:nil)

    UIView.setAnimationDuration(5)

    @xcode_image_view1.transform = CGAffineTransformIdentity

    UIView.commitAnimations
  end
end 
```

# java - Android : 为 ClipboardManager 实现广播接收器

> ID：11500349
> 
> 赞同：4
> 
> 时间：2012-07-16T08:09:29.210
> 
> 标签：java, android, broadcastreceiver, listener, clipboardmanager

我想实现一个监听器，如果有人从任何应用程序复制了任何东西，它将监听。

我听说`ClipboardManager.OnPrimaryClipChangedListener()`哪个会听复制动作，但这不是接收器（据我了解）。我有一个[示例应用程序](http://code.google.com/p/my-clips/source/checkout)，该应用程序背后的逻辑是，从系统启动启动服务并运行一个将监听复制操作的服务，但我认为这会耗尽电池电量。我对吗？

***那么我怎样才能实现一个可以监听复制动作的广播接收器。***

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T09:06:06.557

这是听众：

```
class ClipboardListener implements ClipboardManager.OnPrimaryClipChangedListener
{
   public void onPrimaryClipChanged()
   {
      // do something useful here with the clipboard
      // use getText() method
   }
} 
```

只需注册它：

```
ClipboardManager clipBoard = (ClipboardManager)getSystemService(CLIPBOARD_SERVICE);
clipBoard.addPrimaryClipChangedListener( new ClipboardListener() ); 
```

# spring - AppFuse 一次保存两个新实体

> ID：11500351
> 
> 赞同：0
> 
> 时间：2012-07-16T08:09:33.517
> 
> 标签：spring, hibernate, jpa, appfuse

我正在尝试一次在 AppFuse（Struts2、Hibernate 和 Spring）中保存 2 个实体，这是一个示例（地址和人员是新对象）：

```
person.setAddress(address);
personManager.save(person); 
```

但这不起作用，我得到了这个例外：

```
object references an unsaved transient instance - save the transient
instance before merge 
```

我要做：

```
addressManager.save(address);
person.setAddress(address);
personManager.save(person); 
```

在个人模型中，我已经声明了这样的地址：

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "person", cascade= CascadeType.ALL)
public Address getAddress() {
    return this.address
} 
```

有没有办法一次保存这个新实体？

提前致谢..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:35:15.743

下面可能对你有帮助

您是否按照[docs_oracle_javax_persistence_OneToMany.html](http://docs.oracle.com/javaee/5/api/javax/persistence/OneToMany.html)

**示例 1：**使用泛型的一对多关联

在客户类中：

```
@OneToMany(cascade=ALL, mappedBy="customer")
public Set getOrders() { return orders; } 
```

在订单类中：

```
@ManyToOne
@JoinColumn(name="CUST_ID", nullable=false)
public Customer getCustomer() { return customer; } 
```

**示例 2：**不使用泛型的一对多关联

在客户类中：

```
@OneToMany(targetEntity=com.acme.Order.class, cascade=ALL,
        mappedBy="customer")
public Set getOrders() { return orders; } 
```

在订单类中：

```
@ManyToOne
@JoinColumn(name="CUST_ID", nullable=false)
public Customer getCustomer() { return customer; } 
```

您可以按照此示例[OneToManyTargetEntity](http://www.java2s.com/Code/Java/JPA/OneToManyTargetEntity.htm)中给出的方式进行操作。

看看这些线程：
[stackoverflow_4011472](https://stackoverflow.com/questions/4011472/mappedby-reference-an-unknown-target-entity-property)
[stackoverflow_9032998](https://stackoverflow.com/questions/9032998/hibernate-cascades-object-references-an-unsaved-transient-instance-save-the)

# wpf - 以高质量捕获 3DModel

> ID：11500365
> 
> 赞同：0
> 
> 时间：2012-07-16T08:10:31.773
> 
> 标签：wpf, 3d

我正在尝试捕获我的 WPF Viewport3D，问题是无论我做什么都不能以高质量捕获，RenderTargetBitmap 的参数应该是什么以获得最佳质量？

```
 RenderTargetBitmap bmp = new RenderTargetBitmap(
                          (int)viewport3D.ActualWidth, (int)viewport3D.ActualHeight, 96, 96, PixelFormats.Pbgra32);

bmp.Render(viewport3D);
PngBitmapEncoder png = new PngBitmapEncoder();
png.Frames.Add(BitmapFrame.Create(bmp));

using (Stream stm = File.Create(m_captureWithoutMainModelFileName))
{
   png.Save(stm);
} 
```

我也尝试将图像另存为 BMP，但它并没有提高质量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:46:03.953

也许您的问题是 Dpi 设置为 96,96。在高分辨率屏幕上，Vista/7 不再是这种情况。

```
PresSource = PresentationSource.FromVisual( TheViewPort3D );
dpiX = 96 * PresSource.CompositionTarget.TransformToDevice.M11;  
dpiY = 96 * PresSource.CompositionTarget.TransformToDevice.M22; 
```

# php - 将字符串编码为 json

> ID：11500366
> 
> 赞同：0
> 
> 时间：2012-07-16T08:10:39.973
> 
> 标签：php, mysql, json, google-visualization

我在将字符串编码为 json 时遇到问题。我正在做一个谷歌饼图。图表将填充数据库中的数据。谷歌图表需要 json 格式的数据。

下面是一个字符串的示例，它应该是什么样子。现在我遇到了用数据库中的数据动态“组装”字符串的问题。JSON_encode 是不够的，它的格式必须像这个带有 cols 和 rows 的字符串！请帮忙。

```
<?php 

 $db=new DB();
 $db->connect();
 $db->selectBase();

 $rows = array();
 $sth=$db->st_glede_na_tip() or die(mysql_error());
 while($r = mysql_fetch_assoc($sth)) {
     $rows[] = $r;
}

 $string= '{
     "cols": [
        {"id":"","label":"Content","pattern":"","type":"string"},
        {"id":"","label":"Slices","pattern":"","type":"number"}
       ],
    "rows": [
        {"c":[{"v":"Books"},{"v":3}]},
        {"c":[{"v":"Video"},{"v":1}]},
        {"c":[{"v":"Audio"},{"v":1}]},
        {"c":[{"v":"Movie"},{"v":1}]},
      ]
   }';

   echo $string;

 ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T08:17:37.983

我猜你的问题是不知道如何从 PHP 对象生成这样的 JS 对象。您需要这样创建一个 PHP 数组，然后使用 json_encode 函数：

```
$data = array(
    'cols' => array(
        array('id' => '', 'label' => 'Content', 'pattern' => '', 'type' => 'string'),
        array('id' => '', 'label' => 'Slices', 'pattern' => '', 'type' => 'number')     
    ),
    'rows' => array(
        array('c' => array(
            array('v' => 'Books'),
            array('v' => 3)         
        )), 
        array('c' => array(
            array('v' => 'Video'),
            array('v' => 1)         
        )),     
        array('c' => array(
            array('v' => 'Audio'),
            array('v' => 1)         
        )),     
        array('c' => array(
            array('v' => 'Movie'),
            array('v' => 1)         
        ))      
    )   
);  

echo json_encode($data); 
```

# c# - 从 `XPathNodeIterator` 到 `linq` 的转换

> ID：11500367
> 
> 赞同：1
> 
> 时间：2012-07-16T08:10:41.877
> 
> 标签：c#, xml, linq

我正在更新我的一些旧代码，并决定将所有与 XML 相关的东西从 XPath 更改为 Linq（所以同时学习 linq）。我遇到了这段代码，有人可以告诉我如何将它翻译成 linq 语句吗？

```
var groups = new List<string>();
XPathNodeIterator it = nav.Select("/Document//Tests/Test[Type='Failure']/Groups/Group/Name");

foreach (XPathNavigator group in it)
{
    groups.Add(group.Value);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:17:59.193

```
XPathNodeIterator it = nav.Select("/Document//Tests/Test[Type='Failure']/Groups/Group/Name");
var groups = (from XPathNavigator @group in it select @group.Value).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:34:16.030

`Group`这是通过 LINQ获取名称的粗略且现成的示例：

```
static void Main(string[] args)
        {
            var f = XElement.Parse("<root><Document><Tests><Test Type=\"Failure\"><Groups><Group><Name>Name 123</Name></Group></Groups></Test></Tests></Document></root>");

            var names =
                f.Descendants("Test").Where(t => t.Attribute("Type").Value == "Failure").Descendants("Group").Select(
                    g => g.Element("Name").Value);

            foreach (var name in names)
            {
                Console.WriteLine(name);    
            }
        } 
```

就个人而言，这是我一直喜欢为其编写单元测试的代码，给出特定的 XML 并期望返回特定的值。

# java - 如何以编程方式更改 ADF 表中的样式

> ID：11500371
> 
> 赞同：2
> 
> 时间：2012-07-16T08:11:14.297
> 
> 标签：java, jdeveloper

我从我的数据控件中生成了一个 ADF 表。但是我需要改变我的 backing bean 中每个单元格的样式。我在谷歌上找不到任何有用的东西，希望你能给我一些有用的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T17:01:30.780

你能更具体一点吗？哪个jdev版本？如果您需要更改每个单元格，为什么不使用皮肤？

根据评论，我们现在知道您使用的是 jdev 11.1.2.2.0。您可以做的是将表的 styleClass 属性绑定到支持 bean 属性。bean 中的属性有一个getter 和一个setter 方法。在 setter 方法中，您可以从行中获取所需的所有值并进行计算。根据结果​​，您返回适合单元格的样式类的名称。您在应用程序的皮肤中定义的不同样式类。例如，如果您在您的皮肤中定义以下样式类

```
.high_value { background-color:green; }
.negative_value { background-color:red;} 
```

并在请求范围内的 bean 中，您可以从表所在的页面访问它

```
 private String styleForCell;

public String getStyleForCell()
{
    // get the value of the cell
    FacesContext lContext = FacesContext.getCurrentInstance();
    ELContext lELContext = lContext.getELContext();
    ExpressionFactory lExpressionFactory = lContext.getApplication().getExpressionFactory();
    Number val;
    val = (Number) lExpressionFactory.createValueExpression(lELContext, "#{row.valargument}", Object.class).getValue(lELContext);
    if (val == null)
        return "";

    // do the calculation and return the suitable style class
    int ival = val.intValue();
    if (ival >= 100000 )
        return "high_value";
    else if (ival < 0)
        return "negative_value";
    else 
        return "";         
}

public void setStyleForCell(String aStyleForCell)
{
    this.styleForCell = aStyleForCell;
} 
```

现在您可以从表格列 styleClass 属性中访问计算的样式类 #{beanname.styleForCell} 这将为列的每个单元格调用该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T22:31:47.063

在字段的 inlineStyle 中使用条件 EL 根据值设置样式。#{binding.value > 1000 之类的东西？“字体=粗体”：“字体=常规”}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T06:22:39.390

对上一个答案+1。请注意，更改单元格颜色的方式很大程度上取决于用例。如果您的用例需要动态的临时颜色编码，那么答案会有所不同，就像要求更改颜色编码以实施企业品牌一样

坦率

# android - 如何在 android 中使用 TranslateAnimation？

> ID：11500375
> 
> 赞同：0
> 
> 时间：2012-07-16T08:11:32.470
> 
> 标签：android

我已经使用 TranslateAnimation 从左到右移动了按钮，但是在该按钮之后单击listiner 不适用于新位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:20:21.417

使用时，您的实际按钮位置不会改变`TranslateAnimation`。它只更新`Canvas`用于绘制按钮的转换矩阵。因此，您的按钮位于同一位置并从原始区域调度触摸事件，并且仅在新位置绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:15:50.353

只需`setFillAfter(true)`在代码或`android:fillAfter`xml 中使用。

[http://developer.android.com/reference/android/view/animation/Animation.html#attr_android:fillAfter](http://developer.android.com/reference/android/view/animation/Animation.html#attr_android:fillAfter)

[http://developer.android.com/reference/android/view/animation/Animation.html#setFillAfter(boolean](http://developer.android.com/reference/android/view/animation/Animation.html#setFillAfter(boolean) )

这里还有另一个解决方案，在结束事件上使用动画并设置对象的布局。

[http://pastebin.com/5dwzdJjG](http://pastebin.com/5dwzdJjG)

另一方面，您可以使用两个按钮，一个是您当前的按钮，第二个按钮放置在动画的最后一个位置，直到动画结束才可见，在动画结束时，只需将第一个按钮设置为不可见并且可见第二个。

# oracle - 如何在PL SQL中逐列动态确定两条记录之间的差异

> ID：11500377
> 
> 赞同：1
> 
> 时间：2012-07-16T08:11:40.973
> 
> 标签：oracle, plsql

我在包含审计日志的表上创建了一个触发器。插入新条目时，我想逐列将新记录与表中的最新现有记录（匹配 ID）进行比较。如果一列的值发生了变化，我想在另一个表中执行插入语句。我创建了以下 PL SQL 过程：

```
CREATE OR REPLACE
TRIGGER PROJECT_BASELINE_ATTR_AUD_BI BEFORE INSERT
ON PROJECT_BASELINE_ATTR_AUD 
FOR EACH ROW
DECLARE 
  tab_name constant varchar2(32) := 'PROJECT_BASELINE_ATTR_AUD';
  col_name varchar2(32);
  v_latest_row PROJECT_BASELINE_ATTR_AUD%rowtype;
BEGIN
  -- get the record to compare with
  EXECUTE IMMEDIATE 'select * from  '||tab_name||
            ' where rev = (select max(rev) from '||tab_name||' where id = '|| :new.ID ||')' into v_latest_row;
FOR x IN (SELECT DISTINCT(COLUMN_NAME) FROM ALL_TAB_COLUMNS WHERE TABLE_NAME = upper(tab_name)) 
  LOOP
  BEGIN
    col_name := x.column_name;
    -- do insert if the values are unequal
    -- IF :new.col_name <> v_latest_row.col_name
    --   INSERT INTO AUD_CHANGE_LOG VALUES (AUD_CHANGE_LOG_ID_SEQ.nextVal, :new.ID, :new.REV, tab_name, col_name);
  END;
  END LOOP;
END; 
```

我知道我可以用真实的列名来实现它，例如

```
IF :new.FOO <> v_latest_row.FOO
IF :new.BAR <> v_latest_row.BAR
... 
```

但这将在很长的情况下结束。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:53:26.920

无法动态引用触发器的新旧值。

您可以开发一个系统，为您需要的每个表结构动态定义触发器，但无论如何这都是一项艰巨的工作。

我做了类似的事情，这不是你可以在几天内完成的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:54:29.660

我同意 Alessandro 的观点，即您不能动态引用列名。您必须手动为每个插入。就个人而言，我认为这种复杂的逻辑最好在编译过程中完成，而不是直接在触发器中完成。费尔斯坦同意。

因此，我会将新表行传递给存储过程，并通过将新列值放在 WHERE 子句中，让它完成将每一列与审计表进行比较的繁重工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T14:25:04.407

是的。仅当操作发生在同一个表上时才会发生变异表错误。

对于看起来像审计表触发器的东西，我不认为有一种方法可以解决我所知道的逐列比较。

# php - 在php中上传文件大小> 5MB时出错？

> ID：11500382
> 
> 赞同：3
> 
> 时间：2012-07-16T08:11:59.397
> 
> 标签：php

我上传的文件大小 > 5MB 并在`php.ini`

![php.ini](../Images/7ed3caa7c414520d2b01fbc45e9b4085.png)

但是当上传文件是结果时`error File Error size ini`，如何配置它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:13:35.730

还有另一个影响此行为的配置条目：`post_max_size`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T08:19:35.103

实际上，在这种情况下，您应该担心三个额外的配置条目。

> 两个 PHP 配置选项控制最大上传大小：**upload_max_filesize**和**post_max_size**。对于 10 兆字节的文件大小，两者都可以设置为“10M”。
> 
> 但是，您还需要考虑完成上传所需的时间。PHP 脚本通常会在 30 秒后超时，但在正常的宽带连接上上传一个 10MB 的文件至少需要 3 分钟（请记住，上传速度通常比下载速度慢五倍）。此外，操作或保存上传的图像也可能导致脚本超时。因此，我们需要将 PHP 的**max_input_time**和**max_execution_time**设置为 300（以秒为单位指定 5 分钟）。

来源：[http ://www.sitepoint.com/upload-large-files-in-php/](http://www.sitepoint.com/upload-large-files-in-php/)

# logging - 看不到 jrebel.log

> ID：11500383
> 
> 赞同：1
> 
> 时间：2012-07-16T08:12:07.373
> 
> 标签：logging, intellij-idea, jrebel

JRebel 设置： ![在此处输入图像描述](../Images/fa41da8635d06e60c07538356d2b926e.png)

![在此处输入图像描述](../Images/46bb31796cf230765a08c890bbfebc47.png)

C:\JRebel-5.0:

```
16.07.2012  13:29    <DIR>          .
16.07.2012  13:29    <DIR>          ..
16.07.2012  04:23            71 264 3rd-party-licenses.txt
16.07.2012  05:04    <DIR>          bin
16.07.2012  04:08            48 511 Changelog.txt
16.07.2012  05:04    <DIR>          doc
16.07.2012  04:18             1 150 jrebel.ico
16.07.2012  13:29                20 jrebel.info
16.07.2012  13:29                20 jrebel.info.tmp
16.07.2012  04:23         4 398 694 jrebel.jar
16.07.2012  05:05            23 977 jrebel.plugininfo
16.07.2012  04:23               685 jrebel.png
16.07.2012  04:23            29 499 License.txt
16.07.2012  13:29               123 licensing.info
16.07.2012  04:23               188 readme.txt
16.07.2012  04:23               237 ZeroTurnaround.url 
```

c:\Users\Abbas\.IntelliJIdea11\config\plugins\jr-ide-idea\lib\jrebel：

```
16.07.2012  12:09    <DIR>          .
16.07.2012  12:09    <DIR>          ..
16.07.2012  04:59            71 264 3rd-party-licenses.txt
16.07.2012  04:59    <DIR>          bin
16.07.2012  04:59            48 511 Changelog.txt
16.07.2012  04:59    <DIR>          conf
16.07.2012  04:59    <DIR>          doc
16.07.2012  04:59    <DIR>          extras
16.07.2012  04:59             1 150 jrebel.ico
16.07.2012  04:23         4 398 694 jrebel.jar
16.07.2012  12:09            23 977 jrebel.plugininfo
16.07.2012  04:59               685 jrebel.png
16.07.2012  04:59            29 499 License.txt
16.07.2012  05:03               156 licensing.info
16.07.2012  04:59               188 readme.txt
16.07.2012  04:59               237 ZeroTurnaround.url 
```

运行/调试配置： ![在此处输入图像描述](../Images/41f106018321e1877e3aa5c72353dbcd.png)

![在此处输入图像描述](../Images/0e46dfc0aa72afee3d75e3159cd38817.png)

![在此处输入图像描述](../Images/8f350a698720affbde322db34426f315.png)

使用“JBoss 4.2.3 GA Local”运行 Jrebel 后，我看不到 Jrebel 消息：

```
C:\JBOSS\jboss-portal-2.7.2\bin\run-jrebel.cmd -c default
[2012-07-16 01:55:53,831] Artifact app-ear:ear: Server is not connected. Press 'Deploy' to start deployment.
[2012-07-16 01:55:53,832] Artifact my-portlet:war: Server is not connected. Press 'Deploy' to start deployment.
===============================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: C:\JBOSS\jboss-portal-2.7.2

  JAVA: C:\Program Files\Java\jdk1.6.0_25\bin\java

  JAVA_OPTS: -Xdebug -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=n -Dhttp.proxyHost=188.173.32.78 -Dhttp.proxyPort=3128 -DproxySet=true -Dprogram.name=run.bat -server -Xms256m -Xmx512m -XX:MaxPermSize=256m -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000

  CLASSPATH: C:\Program Files\Java\jdk1.6.0_25\lib\tools.jar;C:\JBOSS\jboss-portal-2.7.2\bin\run.jar

===============================================================================

Listening for transport dt_socket at address: 8787
13:55:54,459 INFO  [Server] Starting JBoss (MX MicroKernel)...
13:55:54,462 INFO  [Server] Release ID: JBoss [Trinity] 4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181417)
13:55:54,464 INFO  [Server] Home Dir: C:\JBOSS\jboss-portal-2.7.2
13:55:54,464 INFO  [Server] Home URL: file:/C:/JBOSS/jboss-portal-2.7.2/
13:55:54,465 INFO  [Server] Patch URL: null
13:55:54,466 INFO  [Server] Server Name: default
13:55:54,466 INFO  [Server] Server Home Dir: C:\JBOSS\jboss-portal-2.7.2\server\default
13:55:54,466 INFO  [Server] Server Home URL: file:/C:/JBOSS/jboss-portal-2.7.2/server/default/
13:55:54,467 INFO  [Server] Server Log Dir: C:\JBOSS\jboss-portal-2.7.2\server\default\log
13:55:54,467 INFO  [Server] Server Temp Dir: C:\JBOSS\jboss-portal-2.7.2\server\default\tmp
13:55:54,467 INFO  [Server] Root Deployment Filename: jboss-service.xml
13:55:55,092 INFO  [ServerInfo] Java version: 1.6.0_25,Sun Microsystems Inc.
13:55:55,093 INFO  [ServerInfo] Java VM: Java HotSpot(TM) 64-Bit Server VM 20.0-b11,Sun Microsystems Inc.
13:55:55,093 INFO  [ServerInfo] OS-System: Windows 7 6.1,amd64
13:55:56,147 INFO  [Server] Core system initialized 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T21:14:24.267

这是 5.0 中的一个错误。将 -Drebel.log=true 添加到 VM 参数，日志将写入 {user.home}/.jrebel/jrebel.log

你最好从“Run with JRebel”按钮开始，而不是替换启动脚本。

# java - JLS 如何指定不能在方法中正式使用通配符？

> ID：11500385
> 
> 赞同：4
> 
> 时间：2012-07-16T08:12:09.277
> 
> 标签：java, generics, wildcard, jls

我一直想知道 Java 泛型的一些奇怪方面以及通配符的使用。假设，我有以下 API：

```
public interface X<E> {
    E get();
    E set(E e);
} 
```

然后，假设我们声明了以下方法：

```
public class Foo {
    public void foo(X<?> x) {
        // This does not compile:
        x.set(x.get());
    }

    public <T> void bar(X<T> x) {
        // This compiles:
        x.set(x.get());
    }
} 
```

根据我的“直觉”理解，`X<?>`实际上与 相同`X<T>`，只是未知对于客户端代码`<T>`来说是*形式上未知的。*但是在里面`foo()`，我猜编译器可以推断（伪 JLS 代码）`<T0> := <?>[0], <T1> := <?>[1], etc...`。这是大多数程序员明确而直观地做的事情。他们委托给一个私有的辅助方法，这导致了很多无用的样板代码：

```
public class Foo {
    public void foo(X<?> x) {
        foo0(x);
    }

    private <T> void foo0(X<T> x) {
        x.set(x.get());
    }
} 
```

另一个例子：

```
public class Foo {
    public void foo() {
        // Assuming I could instanciate X
        X<?> x = new X<Object>();
        // Here, I cannot simply add a generic type to foo():
        // I have no choice but to introduce a useless foo0() helper method
        x.set(x.get());
    }
} 
```

换句话说，编译器知道通配符 in`x.set()`形式上与通配符 in 相同`x.get()`。为什么它不能使用这些信息？[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)中是否有一个正式的方面来解释这个缺乏编译器的“功能”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:04:28.157

你想知道**为什么不支持它？**一个同样有效的问题是，**为什么要支持它？**

通配符的工作方式，给定声明`X<? extends Y> x`，表达式的类型`x.get()`不是`? extends Y`或编译器推断的某种类型，而是`Y`. 现在，`Y`不能分配给`? extends Y`，因此您不能将.的有效签名传递`x.get()`给哪个。唯一可以真正传递给它的是，它可以分配给每个引用类型。`x.set``void set(? extends Y e)``null`

我非常密切地关注 JDK 开发人员邮件列表，其中的一般精神是 JLS 指定的每个功能都应该发挥自己的作用——成本/收益比在收益方面应该是沉重的。现在，跟踪一个值的来源是很有可能的，但它只能解决一种特殊情况，它还有其他几种解决方法。考虑这些类：

```
class ClientOfX {
    X<?> member;
    void a(X<?> param) {
        param.set(param.get());
    }
    void b() {
        X<?> local = new XImpl<Object>();
        local.set(local.get());
    }
    void c() {
        member.set(member.get());
    }
    void d() {
        ClassWeCantChange.x.set(ClassWeCantChange.x.get());
    }
}

class ClassWeCantChange {
    public static X<?> x;
} 
```

这显然不能编译，但是通过您提出的增强，它可以编译。但是，我们可以在不更改 JLS 的情况下编译四种方法中的三种：

1.  因为`a`，当我们接收泛型对象作为参数时，我们可以使方法泛型并接收一个`X<T>`代替`X<?>`。
2.  对于`b`and `c`，当使用本地声明的引用时，我们不需要使用通配符来声明引用（微软 C# 编译器团队的[Eric Lippert](http://blogs.msdn.com/ericlippert/default.aspx)称这种情况为“如果这样做会造成伤害，那就*不要这样做！* ” ）。
3.  对于`d`，当使用我们无法控制其声明的引用时，我们别无选择，只能编写一个辅助方法。

因此，更智能的类型系统只会在我们无法控制变量声明的情况下有所帮助。在那种情况下，做你想做的事情的情况有点粗略——通配泛型类型的行为通常意味着对象要么仅作为对象的生产者（`? extends Something`）或消费者（`? super Something`）工作， 不是都。

TL;DR 版本是它不会带来什么好处（并且要求通配符与现在不同！）同时增加了 JLS 的复杂性。如果有人想出一个非常有说服力的案例来添加它，则可以扩展规范 - 但是一旦它存在，它就会永远存在，并且它可能会导致无法预料的问题，所以在你真正需要它之前不要使用它。

**编辑：**评论包含更多关于通配符是什么和不是什么的讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T07:32:51.063

我刚刚看到了这种特殊的实现[`Collections.swap()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#swap%28java.util.List,%20int,%20int%29)：

```
public static void swap(List<?> list, int i, int j) {
    final List l = list;
    l.set(i, l.set(j, l.get(i)));
} 
```

JDK 家伙求助于原始类型，以便在本地处理这个问题。对我来说，这是一个强有力的声明，表明编译器可能*应该*支持这一点，但由于某种原因（例如，没有时间正式指定这一点）还没有完成

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T09:00:35.460

没有参与编写 JLS，我最好的猜测是简单。想象一下愚蠢但（在语法上）有效的表达式，例如`(x = new X<Integer>()).set(x.get());`. 跟踪通配符的捕获可能会变得很棘手。

我认为捕获通配符不是样板，而是做了正确的事情。这表明您的 API 没有客户端代码不需要的类型参数。

编辑：当前行为在[JLS §4.5.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5.2-200-A)中指定。为每个`x`成员访问进行捕获转换——一次为`x.set(...)`一次，一次为`x.get()`. 捕获是不同的，因此不知道代表相同的类型。

# nutch - Nutch：在一定深度内抓取每个 URL

> ID：11500387
> 
> 赞同：3
> 
> 时间：2012-07-16T08:12:19.620
> 
> 标签：nutch

我的问题是从某个种子列表开始抓取每个页面和每个文档。

我已经安装了 nutch 并使用以下命令运行它：

```
bin/nutch crawl urls -solr http://localhost:8983/solr/ -depth 3 -topN 5 
```

我预计 nutch 进程会抓取类似 100 个 url 的内容，但它说它只找到了 11 个文档。所以我尝试用这个命令运行 nutch：

```
bin/nutch crawl urls -solr http://localhost:8983/solr/ -depth 3 -topN 4 
```

它找到了 23 个文件。

我正在从测试种子[http://nutch.apache.org开始运行该过程](http://nutch.apache.org)

为什么nutch有这种行为？如何设置 nutch 从我的种子开始以一定深度抓取每个网址？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T16:09:07.553

topN 设置要在每个深度中获取的 url 的数量。在您的第一个示例中，深度为 3。深度 1 是种子网址。在 depth2 和 depth3 中，将获取 5(topN value) 个 url。5 * 2（深度2和深度3）+ 1（种子网址，即深度1）= 11。要获取更多网址，您可以增加topN。如果您不想限制，则可以跳过 topN 参数。

# android - 三星 Galaxy S2 上的 MJPEG-Stream 比三星 Galaxy Tab2 更快？

> ID：11500388
> 
> 赞同：1
> 
> 时间：2012-07-16T08:12:21.617
> 
> 标签：android, webcam, tablet, samsung-mobile, mjpeg

我已经实现了一个 android-app 来在网络摄像头之间切换。我使用此代码[Android ICS 和 MJPEG 使用 AsyncTask](https://stackoverflow.com/questions/10550139/android-ics-and-mjpeg-using-asynctask)。它工作得很好。但现在问题来了。在对三星 Galaxy S2 进行详细测试后，我给我买了三星 Galaxy Tab2。在平板电脑上，Mjpeg-View 只能延迟（5 秒）工作。是设置问题（平板电脑）吗？或者有人有其他想法吗？提前感谢所有答案。;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:37:58.340

好吧，三星 Galaxy S2 的处理器稍强，屏幕更小，也许这就是它比标签更快的原因。虽然 5 秒似乎很多......他们运行的是相同的 Android 版本吗？

# objective-c - 使用 UIImageJPEGRepresentaion() 将 UIImage 转换为 NSData 并将其保存到文件会增加文件大小（以字节为单位）

> ID：11500396
> 
> 赞同：3
> 
> 时间：2012-07-16T08:12:45.450
> 
> 标签：objective-c, uiimage, size, nsdata

我有一个要求，用户可以从中选择图像`camera roll`，我的应用程序需要优化图像并将其上传到服务器。我正在使用`ALAssets`库和自定义选择器让用户从中选择照片`camera roll`。我能够完美地实现这一点，但文件大小增加时遇到问题。

问题如下：
当用户选择一张 1.7MB 的照片时（这是`iOS`我尝试邮寄照片时报告的完整大小），当我直接从中获取字节`ALAssetRepresentation`并将`ALAsset`其转换`NSData`为数据大小也是1.7MB。`ALAssetRepresentation`但是，当我使用以下代码 获得 UIImage 时..

UIImage *selImage = [UIImage imageWithCGImage:[assetRepresentation fullResolutionImage] scale:[assetRepresentation scale]orientation:[assetRepresentationorientation]];

并将其转换`UIImage`为`NSData`使用`UIImageJPEGRepresentation()`压缩质量 = 1.0f，NSData 大小几乎是原始大小（3.2MB）的两倍。

理想情况下不应该只有 1.7MB 吗？

正如预期的那样，当我将它保存到文件时，文件大小仍然为 3.2MB（我通过导入沙盒应用程序的文档文件夹使用 xcode 4.2 检查它）。但有趣的是，当我`Preview`在我的 Mac 上打开文件并检查字节大小时，它显示为 1.7MB（原为 3.2MB），这非常令人困惑。

请帮忙..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:58:54.710

您指定什么压缩质量？这与原始图像上使用的相同还是不同？如果不一样，就用同样的压缩系数试试，看大小是否一样。

```
NSData * UIImageJPEGRepresentation (
   UIImage *image,
   CGFloat compressionQuality
); 
```

# ruby-on-rails - Rails动态子路径路由？

> ID：11500401
> 
> 赞同：0
> 
> 时间：2012-07-16T08:13:30.283
> 
> 标签：ruby-on-rails, routes

这似乎应该很容易做到，但我不确定如何随手。

我有 State 和 Statute 模型，目前使用如下路径：

```
/california/statutes/robbery
/newyork/statutes/burglary 
```

使用这条路线：

```
match '/:state_id/statutes/:id' => 'statutes#show', :as => :state_statute, :id => /[^\/]+/ 
```

但问题是，在加利福尼亚，法规被称为*代码*。在纽约，它们是*法律*。

我的问题是，我怎样才能自动支持这些更有意义的路径：

```
/california/codes/robbery
/newyork/laws/burglary 
```

我将这些信息存储在模型中，可以使用；Statute.meta_name。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:28:29.823

这应该有效：

```
match '/:state_id/:law/:id' => 'statutes#show', :as => :state_statute, :id => /[^\/]+/, :law => Regexp.new(Statute.meta_name.join("|")) 
```

这样做的问题是这两个网址都可以工作：

```
/california/laws/robbery
/newyork/laws/burglary 
```

这通常对 SEO 不利。您可以通过添加一个 before 过滤器来解决这个问题，例如：

```
before_filter :validate_law_title

def validate_law_title
    unless <condition to check if the title used is correct, ie, codes for cali, laws for NY>
        redirect_to <correctly generated url>, :status=>:moved_permanently
    end
end 
```

- 编辑 -

为了使路线的生成更容易，请使用如下路线：

```
match '/:state_id/:law/:id' => 'statutes#show', :as => "_state_statute", :id => /[^\/]+/, :law => Regexp.new(Statute.meta_name.join("|")) 
```

在 application_controller，或者最好是一个 lib 文件中，您可以添加：

```
# law is the law/rule, etc object
def state_statute_path(law, options={})
    options.merge!(:law => <figure out the label to use from the law object>)
    _state_statute_path(options)
end 
```

# ssl - TLS 相互认证

> ID：11500402
> 
> 赞同：1
> 
> 时间：2012-07-16T08:13:31.313
> 
> 标签：ssl, ssl-certificate

下面的信息显示了我的 ssl 连接到我的一台 ldap 服务器的 Wire Shark 日志。在此客户端证书长度为零。请让我知道这是什么意思。是因为缺少客户端身份验证吗？对于相互身份验证，是否必须包含客户端证书？

```
329 SSLv2   Client Hello
332 TLSv1   Server Hello, Certificate, Certificate Request, Server Hello Done
334 TLSv1   Certificate, Client Key Exchange
336 TLSv1   Change Cipher Spec, Encrypted Handshake Message
337 TLSv1   Change Cipher Spec, Encrypted Handshake Message 
```

在第 332 帧中显示完整的证书信息，在第 334 帧中显示证书长度：0。在第 334 帧中，客户端密钥交换包含足够的信息来传递预主密钥。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:52:23.400

该`Certificate Request`消息意味着服务器请求了客户端证书（强制或非强制）。

客户端响应发送的空`Certificate`消息意味着客户端没有找到合适的客户端证书来使用（或选择不使用它）。

服务器是否要继续此连接取决于其配置。客户端证书身份验证可以是可选的。

[TLS 规范][1] 中描述了这种行为：

> 仅当服务器请求证书时才会发送此消息。如果没有合适的证书可用，客户端必须发送不包含证书的证书消息。也就是说，certificate_list 结构的长度为零。如果客户端没有发送任何证书，服务器可以自行决定是否继续握手而无需客户端身份验证，或者以致命的握手失败警报响应。

（这来自 TLS 1.2 规范，在 TLS 1.1 及更低版本中，它只是*[...] 应该发送证书消息 [...]*。） [1]：[https ://www.rfc-editor.org /rfc/rfc5246#section-7.4.6](https://www.rfc-editor.org/rfc/rfc5246#section-7.4.6)

# iphone - 未调用委托方法

> ID：11500406
> 
> 赞同：0
> 
> 时间：2012-07-16T08:13:56.710
> 
> 标签：iphone, objective-c, xcode, delegates

作为初学者，我发现很难理解代表，所以我会尽可能地提出我的问题：

我希望 Connection.m 成为 Controller.h 的代表。在我的 Controller.h 我有

```
@protocol HeliControllerDelegate <NSObject>

@optional
- (void) measurementUpdated:(NSNumber *) measurement;
- (void) didDiscoverCharacteristic; // neh

@end

@interface HeliController : UIViewController <CBPeripheralDelegate>
@property (nonatomic, assign) id<HeliControllerDelegate> delegate;
@end 
```

并在 Controller.m 中合成：

```
@synthesize delegate = _delegate; 
```

在接口声明之前。在 Controller.m 我调用 didDiscoverCharacteristic

```
- (void) peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error{

NSLog(@"Did discover characteristic for service %@", [service.peripheral UUID]);

for(CBCharacteristic *c in [service characteristics]){

    if([[c UUID] isEqual:HeliController.throttleCharacteristicUUID]){

        NSLog(@"Found throttle characteristic");

        self.throttleCharacteristic = c;

        [self.delegate didDiscoverCharacteristic];

    }
}
} 
```

在委托文件 Connection.h 我开始

```
@interface Connection : UIViewController <CBCentralManagerDelegate, ControllerDelegate> {
} 
```

这样我就可以使用Controller.h协议中的方法，但是即使程序执行了didDiscoverCharacteristic调用，Connection.m中的方法实现也没有任何反应。

对此的所有帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:21:40.497

您是否在 Controller.h 文件中声明了委托？

```
@接口控制器
{
    id (ControllerDelegate) 控制器委托；
}
@property (nonatomic, assign) id (ControllerDelegate) controllerDelegate;

```

对 ControllerDelegate 使用 <> 括号而不是 () 并在 .m 文件中添加以下内容

```
@synthesize 控制器委托
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:25:19.407

你仍然想念一些东西：

你必须告诉你的“Controller”实例哪个实例是它的委托，这意味着你必须创建一个属性（称之为“delegate”或类似于“myDelegate”的东西）并将其设置为指向使用的类的实例该协议（在您的情况下为 Connection ）。

它应该像 UITable 的代表一样工作（例如，使用协议 UITableViewDelegate）

你需要告诉你的 UITableView 谁是（哪个实例）可以“听到”调用 tableView:didSelectRowAtIndexPath: 和其他委托方法

设置指向它的表实例属性：

yourTable.delegate = anInstanceOfADelegateClass;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:24:40.807

在 Controller.m`self.delegate`中调用时可能为零`didDiscoverCharacteristic`。您可以使用调试器或 NSLog() 进行检查。确保将`@property`Controller 对象的委托设置为正确的 Connection 实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T08:24:57.933

1.  ControllerDelegate 之后的 NSObject 没有意义

2.  在您的控制器类中声明一个委托属性

# c - C: `int a[10]` 是什么意思

> ID：11500407
> 
> 赞同：4
> 
> 时间：2012-07-16T08:14:02.843
> 
> 标签：c, arrays, pointers

例如，我有这个声明：

```
int a[10]; 
```

之前我是这样理解的：`a`其实是一个指针，它会连续指向内存中的10个元素。

但是今天老师教我的时候说：会是一个指针数组，每个指针都指向它的值。

我不知道哪个是真的。请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T08:16:23.433

> 之前，我是这样理解的：a 实际上是一个指针，它会连续指向内存中的 10 个元素。

这是错误的，它是一个数组。它在内存中有一个特定的位置，可以保存 10 个整数。使用指针可以做到`a = &some_int`，但是，这不适用于数组。如果您传递`a`给期望指针的函数，它将被衰减（转换为）指针，但这是不同的。

> 但是，今天，当我的老师教我时，他说：它会有一个指针数组，每个指针都指向它的值。

这也是错误的，它是一个 10 个整数的数组。要拥有 10 个整数指针，您需要将其定义为`int *a[10]`. Still 元素不指向它们的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T08:18:05.790

你和你的老师都错了。

`a`将具有指针的一些特性`int`，您可以将其作为指针传递给函数并执行标准指针运算，但它仍然是 C 术语中的数组；例如，您无法更改它（将其视为`int * const`）。

但是，您是对的， 的元素`a`将作为连续数组放置在内存中，而不是指向随机位置的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:29:30.730

我敢打赌你误解了你的老师。

> a 实际上是一个指针，它将连续指向内存中的 10 个元素。

这**几乎**没问题。（在某些情况下，您可以这样想。但它过于简单化了，其他人解释了原因。）

> 它将是一个指针数组

这是完全错误的。

> 每个指针都指向它的值。

这是完全错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T10:37:10.427

简单来说，“'a' 是一个在内存中连续保存 10 个元素的变量”，这就是我们将其称为数组的原因。访问变量的元素需要索引。即，要访问变量“a”的第 5 个元素，我们需要指定 a[5]。指定“a”指向连续内存位置的起始地址，指定 a+5 指向从第一个连续内存开始的第 5 个元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-02T17:41:39.780

您可以在此处参考有关数组和指针的一个很好的常见问题解答：http: [//c-faq.com/aryptr/index.html](http://c-faq.com/aryptr/index.html)。

`int a[10];` 指在内存中分配的 10 个整数单元。

`int *b = a;`等价于`int *b = &a[0];`并且意味着 b 指向 a 的第一个单元格。

# facebook - 群组成员的 Facebook 请求对话框

> ID：11500410
> 
> 赞同：0
> 
> 时间：2012-07-16T08:14:24.513
> 
> 标签：facebook, dialog, request

是否可以让请求对话框显示组成员，无论您是否与他们成为朋友？或者您是否必须与此人成为朋友才能在列表中看到他们？另一种选择是只传入我想要作为对话框选择的 ID 列表。

# objective-c - urlConnection 委托处理同一类中的多个答案

> ID：11500411
> 
> 赞同：1
> 
> 时间：2012-07-16T08:14:29.697
> 
> 标签：objective-c, delegates, urlconnection

我有一个 ViewController.m 文件，其中有 2 个打开 urlConnection 的按钮，我需要处理响应。我的问题是当连接来自按钮 1(abilita) 或按钮 2(登录) 时，我不明白代表的意思。我能做些什么？

```
-(IBAction)abilita {

    NSString *usernameEncoded = [username.text urlencode];
    NSString *passwordEncoded = [password.text urlencode];
    NSString *mittenteEncoded = [abilitaField.text urlencode];
    NSString *code=@"abcdef";

    NSString * address = [NSString stringWithFormat:@"http://www.xxx.net/smsweb/setsender/recsender.php?login=%25%40&password=%25%40&codice%@",usernameEncoded, passwordEncoded,code];

    NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:address]];
    urlConnectionRecsender=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
}

- (IBAction)login {
    NSString * address = [NSString stringWithFormat:@"http://www.xxx.net/smsscript/sendsms.php?login=%25%40&password=%25%40&tipo=2",usernameEncoded, passwordEncoded];

    NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:address]];
    urlConnectionLogin=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
}

//DELEGATE:

- (void)connection:(NSURLConnection *)conn didReceiveResponse:(NSURLResponse *)response
{
      mutableData = [NSMutableData data] ;
      if ([conn isEquals:urlConnectionRecsender]){
             // this is request urlConnectionRecsender
      }
      if ([conn isEquals:urlConnectionLogin]){
             // this is request urlConnectionLogin
      }
}

- (void)connectionDidFinishLoading:(NSURLConnection *)conn
{
    NSMutableString *stringData = [[NSMutableString alloc] initWithData:mutableData encoding: NSASCIIStringEncoding];
} 
```

你能以我在connectionDidFinishLoading中我能理解的方式编写代码吗？我在处理什么连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:00:38.867

将 urlConnection1 和 urlConnection2 作为 2 个不同的变量，然后在 connectionDidFinishLoading 或 didReceiveResponse 方法中进行比较，如下所示：

```
if ([conn isEquals:urlConnection1]){
    // First urlConnection
}
if ([conn isEquals:urlConnection2]){
    // Second urlConnection
} 
```

希望能帮助到你...

# c++ - 如何在 Xcode 中使用像“libstk.a”这样的静态库？

> ID：11500422
> 
> 赞同：0
> 
> 时间：2012-07-16T08:15:21.360
> 
> 标签：c++, ios, xcode, static-libraries

我正在尝试在我的 Xcode[中使用 C++ (STK)](https://ccrma.stanford.edu/software/stk/index.html)库中的 Synthesis ToolKit。我使用“--with-core”配置选项在我的 Mac 上编译了它的源代码。我将“libstk.a”添加到框架下的 Xcode 中。

我想我可以在我的源代码中执行以下操作来使用 stk 库：

```
#include "Stk.h" 
```

但是，“找不到文件”的 Xcode 错误，这是有道理的，因为该文件不在我的项目中。我该如何使用它？我知道我在这里遗漏了一些非常基本的东西。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:23:21.200

您将需要配置 Xcode 项目的标头搜索路径。使其相对于当前项目，而不是绝对；例如：

```
$(PROJECT_DIR)/../libstk/include 
```

# button - 保存，取消按钮在 joomla 2.5 中不起作用

> ID：11500423
> 
> 赞同：1
> 
> 时间：2012-07-16T08:15:24.817
> 
> 标签：button, joomla, save

我在 joomla 联系组件中更改了一些东西，基本上我不想在联系组件中使用编辑器而不是这个我想放置一些东西，当我删除编辑器时，保存，取消按钮不起作用。有人知道程序是什么吗用于删除编辑器并放置我自己的图表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:17:02.383

我想这就是您要找的东西，请访问此 Web 链接。

[http://www.phpeveryday.com/articles/Joomla-Fast-Road-to-Understand-Component-Programming-P66.html](http://www.phpeveryday.com/articles/Joomla-Fast-Road-to-Understand-Component-Programming-P66.html)

# c - 可移植的 C 二进制序列化原语

> ID：11500425
> 
> 赞同：10
> 
> 时间：2012-07-16T08:15:31.853
> 
> 标签：c, portability, binaryfiles, endianness, htonl

据我所知，C 库在将数值序列化为非文本字节流方面没有提供任何帮助。如我错了请纠正我。

使用中最标准的工具是[`htonl`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/ntohl.html)来自 POSIX 的 et al。这些功能有缺点：

*   没有 64 位支持。
*   没有浮点支持。
*   没有签名类型的版本。反序列化时，无符号到有符号的转换依赖于有符号整数溢出，即 UB。
*   它们的名称没有说明数据类型的大小。
*   它们取决于 8 位字节和精确大小 uint_N_t 的*存在*。
*   输入类型与输出类型相同，而不是引用字节流。
    *   这需要用户执行指针类型转换，这可能是不安全的对齐方式。
    *   执行该类型转换后，用户可能会尝试在其本机内存布局中转换和输出结构，这是一种糟糕的做法，会导致意外错误。

用于将任意大小序列化为`char`8 位标准字节的接口介于 C 标准之间，该标准并不真正承认 8 位字节，而任何标准（ITU？）都将八位字节设置为基本的传输单元。但是旧的标准没有得到修订。

现在 C11 有许多可选组件，二进制序列化扩展可以与线程之类的东西一起添加，而不需要对现有实现提出要求。

这样的扩展会有用吗，还是担心非二进制补码机器就没有意义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T01:50:22.147

我从未使用过它们，但我认为 Google 的[Protocol Buffers](https://developers.google.com/protocol-buffers/)可以满足您的要求。

*   [支持](https://developers.google.com/protocol-buffers/docs/proto)64 位类型、有符号/无符号和浮点类型。
*   生成的 API 是类型安全的
*   可以对流进行序列化

本教程[似乎是一个很好的介绍](https://developers.google.com/protocol-buffers/docs/cpptutorial)，您可以[在此处](https://developers.google.com/protocol-buffers/docs/encoding)阅读有关实际二进制存储格式的信息。

* * *

从他们的[网页](https://developers.google.com/protocol-buffers/)：

> 什么是协议缓冲区？
> 
> 协议缓冲区是 Google 用于序列化结构化数据的语言中立、平台中立、可扩展机制——想想 XML，但更小、更快、更简单。您只需定义一次数据的结构化方式，然后就可以使用特殊生成的源代码轻松地在各种数据流中写入和读取结构化数据，并使用各种语言（Java、C++ 或 Python）。

纯 C（只有 C++）没有官方实现，但有两个 C 端口可能满足您的需求：

*   Nanopb，位于[http://koti.kapsi.fi/jpa/nanopb/](http://koti.kapsi.fi/jpa/nanopb/)

*   [位于http://code.google.com/p/protobuf-c/](http://code.google.com/p/protobuf-c/)的 Protobuf-c

我不知道在存在非 8 位字节的情况下它们的表现如何，但应该相对容易找出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T13:56:10.707

在我看来，类似函数的主要缺点`htonl()`是它们只完成了序列化工作的一半。如果您的机器是小端序，它们只会翻转多字节整数中的字节。序列化时必须完成的另一件重要事情是处理对齐，而这些函数不这样做。

许多 CPU 无法（有效地）访问未存储在地址不是整数字节大小的倍数的内存位置的多字节整数。这就是永远不要使用结构覆盖来（反）序列化网络数据包的原因。我不确定这是否是您所说的“就地转换”。

我经常使用嵌入式系统，并且我在自己的库中使用了这些函数，我在生成或解析网络数据包（或任何其他 I/O：磁盘、RS232 等）时总是使用这些函数：

```
/* Serialize an integer into a little or big endian byte buffer, resp. */
void SerializeLeInt(uint64_t value, uint8_t *buffer, size_t nrBytes);
void SerializeBeInt(uint64_t value, uint8_t *buffer, size_t nrBytes);

/* Deserialize an integer from a little or big endian byte buffer, resp. */
uint64_t DeserializeLeInt(const uint8_t *buffer, size_t nrBytes);
uint64_t DeserializeBeInt(const uint8_t *buffer, size_t nrBytes); 
```

除了这些函数之外，还定义了一堆宏，例如：

```
#define SerializeBeInt16(value, buffer)     SerializeBeInt(value, buffer, sizeof(int16_t))
#define SerializeBeUint16(value, buffer)    SerializeBeInt(value, buffer, sizeof(uint16_t))
#define DeserializeBeInt16(buffer)          DeserializeBeType(buffer, int16_t)
#define DeserializeBeUint16(buffer)         DeserializeBeType(buffer, uint16_t) 
```

(de)serialize 函数逐字节读取或写入值，因此不会发生对齐问题。您也不必担心签名。首先，如今所有系统都使用 2s 补码（可能除了一些 ADC，但您不会使用这些功能）。然而，它甚至应该在使用 1s 补码的系统上工作，因为（据我所知）有符号整数在转换为无符号时会转换为 2s 补码（并且函数接受/返回无符号整数）。

您的另一个论点是它们取决于 8 位字节和存在的确切大小`uint_N_t`。这对我的函数也很重要，但在我看来这不是问题（这些类型总是为我使用的系统及其编译器定义的）。如果您愿意，您可以调整函数原型以使用`unsigned char`代替`uint8_t`和类似`long long`或`uint_least64_t`代替的东西`uint64_t`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:12:03.743

请参阅[xdr](http://linux.die.net/man/3/xdr)库和 XDR 标准[RFC-1014](https://www.rfc-editor.org/rfc/rfc1014) [RFC-4506](https://www.rfc-editor.org/rfc/rfc4506)

# android - Linux：当网络不可达时，Udp 数据包被保存在缓冲区中或被丢弃？我怎样才能证明呢？

> ID：11500428
> 
> 赞同：1
> 
> 时间：2012-07-16T08:16:07.083
> 
> 标签：android, linux, udp

我有一个客户端通过路由器通过 Wifi 连接不断向主机发送 UDP 数据包。如果我突然关闭路由器，我想知道数据包会发生什么。udp 数据包会被丢弃还是保存在某个缓冲区中？

另外，我想知道如果我在关闭 wifi 后立即重新打开 wifi，数据包会发生什么情况。

我需要android linux中的哪些工具来证明数据包是否被丢弃（以及在哪一层）或保存在某个缓冲区（访问缓冲区以验证它是我发送的数据包）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:49:26.997

根据 UDP 的性质，如果网络不可达，数据包将开始丢弃（丢失）。

一旦网络重新建立，数据包将开始尽最大努力到达目的地（但不是丢失的数据包）。

要测试这种行为，您可以简单地创建一个*客户端-服务器*模型应用程序（在 Android、.NET 或任何您喜欢的语言中），其中客户端开始向服务器发送 UDP 数据包（包括序列号和日期戳）并且服务器审核到达/丢失的数据包。在传输过程中，您可以关闭网络以观察行为并测试您需要的情况。

一旦网络关闭，您的客户端应用程序将继续发送数据包而不知道网络不可用，同时所有刷新的数据包都将丢失。一旦网络恢复，传输也将恢复。

# java - Hibernate 主键约束违反

> ID：11500434
> 
> 赞同：5
> 
> 时间：2012-07-16T08:16:40.007
> 
> 标签：java, sql, hibernate

我正在尝试编写一个 SQL 脚本来将数据从某个旧表迁移到新表。新表的主键（id）由hibernate管理，旧表的主键也是如此。我不知道如何使用普通 SQL 为新表分配 id，所以我正在做的是从旧表中获取 id。迁移脚本按预期工作。

在某些时候，我的应用程序尝试使用 Hibernate 将数据插入到新表中，并且我得到主键约束违规异常。我怀疑这是因为休眠分配的键与我在迁移旧数据时提供的键发生冲突。顺便说一句 - hibernate 被配置为为每个表分配唯一的主键。

我究竟做错了什么？我应该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:45:20.513

如果您对主要（例如 mysql、MSSQL）键列使用具有自动增量的数据库，则必须将自动增量值设置为现有 id 的最大值（迁移后）。如果您使用序列生成 id（例如 oracle、postgree），则必须将当前序列值从现有 id 更改为最大值（迁移后）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:43:31.147

好的 - 事实证明，当将 @GeneratedValue(strategy = GenerationType.TABLE) 与 Hibernate 一起使用时，我们有 hibernate_sequences 表来跟踪我的数据库中每个表的下一个 id。所以我所要做的就是更新这个表并正确设置下一个 id - 正如之前所说的。

谢谢！

# php - (PHP&JavaScript) href 添加按钮在 Mozilla 上不起作用，但在 IE 和 Google 上起作用

> ID：11500435
> 
> 赞同：0
> 
> 时间：2012-07-16T08:16:40.130
> 
> 标签：php, javascript, button

我不确定添加按钮是否是造成问题的原因，因为它可以在其他浏览器上完美运行。我希望你能以某种方式帮助我。谢谢你。顺便说一下，这是完整的 .php 代码。

```
<html>

<head>

<LINK REL=StyleSheet HREF="addOfficerStyle.css" TYPE="text/css" MEDIA=screen>

<script type="text/javascript">
    function validateForm(action)
        {
            var lname=document.forms["validation"] ["lname"].value;
            var fname=document.forms["validation"] ["fname"].value;
            var mname=document.forms["validation"] ["mname"].value;
            var address=document.forms["validation"] ["address"].value;
            var contact=document.forms["validation"] ["contact"].value;

                if (lname==null || lname=="" || fname==null || fname=="" || mname==null || mname=="" || address==null || address=="" || contact==null || contact=="")
                    {
                    alert("Fill all required fields");
                    return false;
                    }
                else{
                    form = document.getElementById('userLocation');
                    form.action = action;
                    form.submit();
                    }
        }

    function numeric(e)
        {
            var unicode=e.charCode ? e.charCode : e.keyCode;
                if (unicode==8 || unicode==9 || (unicode >=48 && unicode <=57))
                    {
                    return true;
                    }
                else
                    {
                    return false;
                    }
        }

    function inputLimiter(e,allow)
        {
            var AllowableCharacters = '';

                if (allow == 'Letters'){AllowableCharacters=' ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';}

            var k = document.all?parseInt(e.keyCode): parseInt(e.which);
                if (k!=13 && k!=8 && k!=0)
                    {
                        if ((e.ctrlKey==false) && (e.altKey==false))
                            {
                                return (AllowableCharacters.indexOf(String.fromCharCode(k))!=-1);
                            }
                        else
                            {
                                return true;
                            }
                    } 
                else
                    {
                        return true;
                    }
        } 
</script>

</head>

<body onunload="opener.location=('PromoOfficer.php')">

<br><br>

<form  id="userLocation" name="validation" method="post" onsubmit="return validateForm()">
    <div id="tableAlign">
     <table>
        <tr>
            <td><b>ADD: Promo Officer</td></b>
        </tr>
        <tr> 
              <td>Last name:</td>    <td><input type="text" name="lname" maxlength="20" onkeypress="return inputLimiter(event,'Letters')" /></td>
        </tr>                
        <tr>
              <td>First name:</td>   <td><input type="text" name="fname" maxlength="20" onkeypress="return inputLimiter(event,'Letters')" /></td>
        </tr>     
        <tr>    
              <td>Middle name:</td>  <td><input type="text" name="mname" maxlength="20" onkeypress="return inputLimiter(event,'Letters')" /></td>
        </tr>
        <tr>
              <td>Address:</td>     <td><input type="text" name="address" maxlength="50" /></td>
        </tr>
        <tr>
              <td>Contact:</td>      <td><input type="text" name="contact" maxlength="11" onkeypress="return numeric(event);" /></td>
        </tr>
        <tr>
              <td>User Type:</td>    <td><input type name = "usertype" readonly = "true" value = "Promo Officer"></td>
        </tr>
    </table>
    </div>
<div id="addBtn">   
        <a href="#" onclick="javascript: validateForm(action);return false;"><img src="images/add.png" height="27" width="60"></a>
</div>      
<!-- PHP -->
<?
    include('global.php');

    if(isset($_REQUEST['salesID']))
        $pID = $_REQUEST['salesID'];
    else
        $pID = "";

    if(isset($_REQUEST['lname']))
        $lname = $_REQUEST['lname'];
    else
        $lname = "";

    if(isset($_REQUEST['fname']))
        $fname = $_REQUEST['fname'];

    if(isset($_REQUEST['mname']))
        $mname = $_REQUEST['mname'];

    if(isset($_REQUEST['address']))
        $address = $_REQUEST['address'];

    if(isset($_REQUEST['contact']))
        $contact = $_REQUEST['contact'];

    if(isset($_REQUEST['usertype']))
        $usertype = $_REQUEST['usertype'];

            if($_POST)
                {

                    $query = "INSERT INTO promoofficerform SET ";
                    $query = $query."LastName='".$lname."', ";
                    $query = $query."FirstName='".$fname."', ";
                    $query = $query."MiddleName='".$mname."', ";
                    $query = $query."Address='".$address."', ";
                    $query = $query."Contact='".$contact."', ";
                    $query = $query."UserType='".$usertype."' ";
                    //$query = $query."WHERE PromoNameID='".$pID."'";   
                    //echo $query;
                    ExecuteQuery($query);
                    echo "<script type=\"text/javascript\">
                        <!--
                        window.close();
                        //-->
                        </script>";
                }
?>

<!-- EndOfPHP -->

</form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:33:27.747

你可以不放入`javascript:`属性`onclick`。`on`带前缀的属性是回调（有效的 JS 函数）。`javascript:`类似于协议规范。所以你`javascript:`只能在`href`属性中使用。就像是：

```
<a href="javascript: alert(123)">test</a> 
```

要解决您的问题，只需`javascript:`从`onlick`.

```
<div id="addBtn">   
        <a href="#" onclick="validateForm(action);return false;"><img src="images/add.png" height="27" width="60"></a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:24:38.210

这段代码有问题：

```
<a href="#" onclick="javascript: validateForm(action);return false;"> 
```

它应该写成：

```
<a href="#" onclick="validateForm(document.forms['userLocation'].action);return false;"> 
```

将您的验证器指向表单的操作。

# spring - 将 Spring Security Attribute 加载到 JSP 变量中

> ID：11500437
> 
> 赞同：1
> 
> 时间：2012-07-16T08:16:41.420
> 
> 标签：spring, security, jsp, variables

我想将 Spring Security 属性加载到变量中。

变量：

*   `edit`正文中提供的布尔值`POST`（加载正常）
*   如果用户具有角色主管，则布尔值`isSupervisor`应该为真（我不知道如何将其加载到可访问的变量中。我尝试了许多不同的方法，但没有奏效。）

**代码：**

```
//set somehow the isSupervisor variable
//var isSupervisor = hasRole('ROLE_SUPERVISOR')    
<c:if test="${edit} and not isSupervisor">
... do something
</c:if> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T07:43:33.537

我找到了这个解决方案：

```
<!-- Boolean isSupervisor -->
<!-- needed for creating the boolean: !isSupervisor -->
<c:set var="isSupervisor" value="false" />
<sec:authorize ifAllGranted="ROLE_SUPERVISOR">
    <c:set var="isSupervisor" value="true" />
</sec:authorize>

<c:if test="${!edit || (edit && !isSupervisor)}">
    // do some opertations...
</c:if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:30:01.040

看看[Spring Security JSP Taglib Reference](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/taglibs.html)

它提供了以下示例：

```
<sec:authorize access="hasRole('supervisor')">

  This content will only be visible to users who have
  the "supervisor" authority in their list of <tt>GrantedAuthority</tt>s.

</sec:authorize> 
```

# google-analytics - 检查是否已包含 Google Analytics 库

> ID：11500438
> 
> 赞同：0
> 
> 时间：2012-07-16T08:16:43.120
> 
> 标签：google-analytics, loading, inclusion

使用 Google Analytics 实施自定义解决方案以跟踪页面、事件和其他内容，我想检查该`ga.js`库是否已被包含以避免双重包含，因为我在一个有多个利益相关者的环境中工作，这些利益相关者也使用 Google Analytics，并且重叠是一种可能。

起初，我想循环所有当前脚本，寻找`src`属性：

```
// load the Google Analytics library only if it has not been already loaded:
var gaScripts = 0; // number of ga.js scripts in the current document
var scripts = document.getElementsByTagName('script');

for (var i in scripts) {
    // go through all the scripts:
    if (typeof(scripts[i].src) !== 'undefined' && scripts[i].src.split('?')[0].match(/ga\.js$/)) {
        // update the counter if ga.js has been found:
        gaScripts++;
    }
}

if (gaScripts === 0) {
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    // update the counter:
    gaScripts++;

} else if (gaScripts > 1) {
    // the ga.js library has been loaded more than once, log this error:
    if (window.console) {
        console.log('Warning: the ga.js script has been included ' + gaScripts + ' times in the page');
    }
} 
```

它可以工作，并且还会记录多个包含的潜在错误。`_gaq`然后通过检查堆栈的对象原型，我想到了一些更聪明的方法：

```
with (window) {
    if (_gaq instanceof Array) {
        // not loaded, so include it...
    } else {
        // it's been included
    }
} 
```

当`_gaq`对象还没有被`ga.js`库初始化时，它是一个简单的数组，所以第一个条件为真。当它被初始化时，它被覆盖为一个对象，它不再是 Array 原始对象的实例。

**缺点**

我想知道`window.onload`史诗般的问题：将解决方案实现为同步代码（在它所在的位置进行评估），如果该`ga.js`库已包含但尚未加载到 DOM 中，因为异步调用，它无论如何都会导致双重包含。因此，`DOMContentLoaded`应该触发该事件以在此期间调用两个解决方案之一。

我在网上搜索了有关此主题的类似问题，但官方 GA 文档缺乏有关它的信息，流行资源上的结果似乎都没有处理它。

我向我提出的另一个问题是双重包含是否是一个问题：从纯粹的技术角度来看，我认为 Google Analytics 可以预测这种用户错误并对其进行管理，就像在某些情况下那样（有人知道是不是这样吗？ ？）。但是从用户的角度来看，第二个无用的 HTTP 请求的时间很烦人，希望可以避免。

有人遇到这个问题或有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:37:46.227

尝试对 ga.js 中定义的 _gat 对象进行类型检查。至于这一切的时间安排和双重包含问题，我认为没有功能性原因不能包含两次。这是额外的开销，但 ga.js 所做的只是提供一些函数来调用。

尝试使用双重包含，看看 GA 调试工具是否有什么要说的： [https ://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna](https://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna)

# c# - 使用 LINQ 从 ObservableCollection 源中删除元素

> ID：11500442
> 
> 赞同：6
> 
> 时间：2012-07-16T08:17:13.943
> 
> 标签：c#, linq, foreach

> **实际上，它更接近于：**
> [RemoveAll for ObservableCollections?](https://stackoverflow.com/questions/5118513/removeall-for-observablecollections)

 ~~> ~~**可能重复：**
> [使用 LINQ 删除 List<T> 中的对象](https://stackoverflow.com/questions/853526/using-linq-to-remove-objects-within-a-listt)~~

这是我正在使用的代码，但它的可读性不是很好。我可以使用 LINQ 来缩短下面的代码，同时仍然具有相同的功能吗？

```
int index = 0;
int pos = 0;

foreach (var x in HomeViewModel.RecentPatients)
{
   if (x.PID == p.PID)
       pos = index;
   else
       index++;

}

HomeViewModel.RecentPatients.RemoveAt(pos); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T08:27:30.840

为重复的关闭混乱道歉。这个问题和标记的答案将使您拥有从可观察集合中删除的扩展方法支持：

[为 ObservableCollections 移除全部？](https://stackoverflow.com/questions/5118513/removeall-for-observablecollections)

它不会支持`from x in y`语法，但它会让你这样做：

```
var c = new ObservableCollection<SelectableItem>();
c.Remove(x => x.IsSelected); 
```

但是，通过检查`x.PID == p.PID`和有关您的其他问题的注释...如果实际上您想删除两个列表中的项目，这可能不是最佳选择。

扩展方法将产生一个项目的可枚举项，这些[`Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)项目排除作为参数提供的可枚举项中的项目，在您的情况下是第二个列表。此方法不会改变现有的可枚举，就像大多数操作一样，它会返回一个新的，因此您需要将其设置为 new `ObservableCollection`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T08:30:13.523

你可以试试这个。

```
var toRemove = HomeViewModel.RecentPatients.Where(x=>x.PID == pid).ToList();
foreach (var item in toRemove)
    HomeViewModel.RecentPatients.Remove(item); 
```~~

# qt - QWebView 未正确调整大小

> ID：11500454
> 
> 赞同：0
> 
> 时间：2012-07-16T08:17:58.677
> 
> 标签：qt

我有一个水平布局的 QMainWindow 作为中央小部件。水平布局包含三个小部件。这是代码：

```
this.navigationTree=new NavigationTree();
Browser browser = new Browser();
this.clusteringPlot=new ClusteringPlot();
QWidget centralWidget=new QWidget();
QHBoxLayout layout=new QHBoxLayout();
layout.addWidget(navigationTree);
layout.addWidget(clusteringPlot);
layout.addWidget(browser);
centralWidget.setLayout(layout);
this.setCentralWidget(centralWidget);` 
```

其中浏览器是一个 QWebView。

每当我调整主窗口的大小时，浏览器不会调整大小，而 clusteringPlot(extends QWidget) 和 navigationTree(extends QTreeWidget) 会调整大小。

如何更改我的代码以便浏览器也调整大小？我看了类似的问题，但找不到解决问题的方法。

非常感谢罗塞拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:01:01.093

布局在决定如何分配空间时会查询其子级的最小尺寸。因此，您的首要任务是确保占据您的所有小部件`QHBoxLayout`都知道它们的最小有用尺寸是多少：

*   由于`NavigationTree`继承`QTreeWidget`，我假设它已经提供了一个合理的最小尺寸（通过`minimumSizeHint()`继承自`QAbstractScrollArea`））。如果这需要更改，请`QWidget::minimumSizeHint()`按如下方式重新实现。
*   如果`ClusteringPlot`直接继承自`QWidget`，则可能没有为布局提供合理的最小尺寸，因此您需要提供一个。您可以**重新**实现[`QWidget::minimumSizeHint()`](http://qt-project.org/doc/qt-4.8/qwidget.html#minimumSizeHint-prop)为虚拟函数`ClusteringPlot`（如果您能够根据对象的状态计算大小，则特别有用）**或**调用 `clusteringPlot->setMinimumSize(...);`.
*   由于您要为您的 指定最小尺寸，请`QWebView`致电`browser->setMinimumSize(1024, 768);`.

一旦分配了足够的空间来满足其每个子部件的`minimumSizeHint()`s，a`QBoxLayout`就开始根据[`stretchFactor`](http://doc.qt.nokia.com/4.7-snapshot/qboxlayout.html#setStretchFactor)每个部件的 s 分配剩余空间。设置拉伸因子的最简单方法是将小部件添加到布局中。尝试将您的代码更改为：

```
layout.addWidget(navigationTree, 1);
layout.addWidget(clusteringPlot, 1);
layout.addWidget(browser, 2); 
```

这告诉布局应该以 1:1:2 的比例分配任何空闲空间，即如果有 40 个额外像素可用，则 10 到`navigationTree`10 到 10 到`clusteringPlot`20 到`browser`。

# c++ - 如何使用 IPropertyStore 接口修改 PKEY_COPYRIGHT 字段

> ID：11500456
> 
> 赞同：1
> 
> 时间：2012-07-16T08:18:04.200
> 
> 标签：c++, winapi, windows-7, windows-shell

尝试修改此字段时，IProertyStore::SetValue() 返回 AccessDenied 错误代码。我的界面是用 ReadWrite 标志初始化的。

我还尝试在文件的处理程序保持打开状态时修改此属性，但我从 SHGetPropertyStoreFromParsingName() 收到 HRESULT 错误代码，说明文件已在使用中（嗯，这是有道理的：O？）

顺便提一下，更新 PKEY_TITLE、PKEY_Comment 等值成功结束。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:06:29.277

如果您想更改版权和其他字符串的程序，您可以使用 Restorator 2007 或 Resource Hacker

# iphone - UITextView 对齐方式正在自行改变

> ID：11500459
> 
> 赞同：3
> 
> 时间：2012-07-16T08:18:19.390
> 
> 标签：iphone, objective-c, xcode, uitextview, right-to-left

我有一个`UITextView`与 RTL 对齐。

如果用户输入文本并关闭键盘，则对齐保持 - RTL。

但如果用户选择空字符串，我将字符串更改为占位符，对齐方式翻转为 LTR。

我试图明确要求 RTL，但没有帮助。

```
-(void)cancelPad{
    [userTextView resignFirstResponder];
    userTextView.textAlignment = UITextAlignmentRight;
    userTextView.text = @"place holder text";
}

-(void)doneWithNumberPad{
    if ([userTextView.text isEqualToString:@""]) {
        [self cancelPad];
    }
    [userTextView resignFirstResponder];
    userTextView.textAlignment = UITextAlignmentRight;
} 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:28:57.283

最后我只是添加了一个带有占位符文本的标签。当键盘显示时，placeholderLabel 被隐藏。如果键盘以空文本消失，则 placeholderLabel 将再次显示。如果有更合适的解决方案，请不要犹豫在此处发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:43:30.413

代替：

```
userTextView.text = "" 
```

你应该把：

```
userTextView.text = [NSString stringWithFormat:@"\u202b"]; 
```

这是“开始 RTL”的 UTF-8 字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:37:38.857

首先：在 .h 文件中添加这个

```
UIViewController<UITextFieldDelegate> 
```

将您的文本字段分配给此

```
userTextView.delegate =self; 
```

然后使用此方法并将您的代码放入

```
-(BOOL) textFieldShouldBeginEditing:(UITextField *)textField{

 }     
-(BOOL)textFieldShouldEndEditing:(UITextField *)textField{

}
-(BOOL) textFieldShouldReturn:(UITextField *)textField{

} 
```

例子 ：

```
-(BOOL)textFieldShouldEndEditing:(UITextField *)textField{

if ([userTextView.text isEqualToString:@""]) {
    [self cancelPad];
}
[userTextView resignFirstResponder];
userTextView.textAlignment = UITextAlignmentRight;
} 
```

# opengl - 绘制 3D 孔的图形技术是什么？

> ID：11500464
> 
> 赞同：3
> 
> 时间：2012-07-16T08:18:50.360
> 
> 标签：opengl, graphics, 3d

如何绘制一个有厚度的圆盘，然后在运行时在其中“钻孔”（任何形状）？期望的结果看起来像没有纹理的 CAD 图纸。

我正在使用 OpenGL，但我想这与图形 API 无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:27:33.270

我猜你追求的是[Constructive solid geometry](http://en.wikipedia.org/wiki/Constructive_solid_geometry)。一些当前的图形/游戏引擎（如[Unreal](http://www.unrealengine.com/)）使用它，但大多数不做真实的事情，而是使用纹理近似（假）结果或使用准备好的多部分模型切换实体几何。另一种方法是使用体素，例如 Minecraft 或[Voxatron](http://www.lexaloffle.com/voxatron.php/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T15:00:51.563

[OpenCSG](http://www.opencsg.org/)应该做你想做的。

如果您需要 CSG 几何而不只是渲染图像，请查看[OpenSCAD](http://www.openscad.org/)的 CGAL 内部结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:24:35.447

这可能是[几何着色器](http://www.lighthouse3d.com/tutorials/glsl-core-tutorial/geometry-shader/)的一个有趣用途。获取圆盘几何形状并为孔添加额外的顶点，然后传递给片段着色器。

# delphi - 如何从 TDUMP.EXE 捕获控制台输出？

> ID：11500466
> 
> 赞同：0
> 
> 时间：2012-07-16T08:18:52.377
> 
> 标签：delphi

TDUMP.exe 是 Delphi RAD Studio 的文件转储工具。如果我跑

```
tdump.exe myapp.exe 
```

它将返回有关 myapp.exe 的一些信息。

我想将 tdump.exe 的控制台输出捕获到我的 VCL gui 应用程序。我已经尝试`RunDosInMemo`过[http://delphi.about.com/cs/adptips2001/a/bltip0201_2.htm](http://delphi.about.com/cs/adptips2001/a/bltip0201_2.htm)。输出结果与命令行控制台输出不同。它总是返回：

```
ERROR: Can not open output file myapp.exe. 
```

并且 myapp.exe 文件将被覆盖。

运行其他控制台命令`RunDosInMemo`按预期工作，但不是 Delphi tdump.exe。

任何想法为什么重定向控制台输出不适用于 tdump？

我正在使用以下代码来调用`RunDosInMemo`：

```
RunDosInMemo('tdump.exe ' + ParamStr(0), Memo1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T23:56:14.803

从 'tdump' 给出的错误消息中可以明显看出，它并没有尝试读取您传递给它的文件名的内容，相反，它使用文件名进行输出。

'tdump' 实际期望的是从它的'stdin' 中读取文件内容。您在问题中链接的代码不合适。你需要创建至少两个管道，将输入文件的内容写入'tdump'标准输入的写端，并通过输出管道的读端读取'tdump'的输出。

但这不是必需的，您可以告诉 'tdump' 读取带参数传递的文件，而不是从标准输入。在控制台发出 a`tdump -?`并查看帮助。你会注意到这个选项：

> -ns 禁用对重定向标准输入的支持

您只需要更改您的呼叫即可使您的程序正常工作：

```
 RunDosInMemo('tdump.exe -ns ' + ParamStr(0), Memo1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:19:43.677

ParamStr(0) 将全名返回给您的 exe，包括可能包含需要引用的空格的路径。尝试：

```
RunDosInMemo('tdump.exe "' + ParamStr(0) + '"', Memo1); 
```

# image - Qt jpeg 无法在我朋友的电脑上运行

> ID：11500468
> 
> 赞同：2
> 
> 时间：2012-07-16T08:18:53.910
> 
> 标签：image, qt, qt4, jpeg

我正在完成一个 Qt 应用程序，但我遇到了一个问题。就这个：

我使用此代码将图像加载到 QGraphicsScene 中：

```
QFile file(fileName);
        if(file.open(QFile::ReadOnly)){
            QByteArray data=file.readAll ();
            pixmapItem.loadFromData (data,"jpeg");
        } 
```

它可以在我的电脑上运行，但是当我将此应用程序提供给我的朋友时，他无法显示此图像。我在 Google 上搜索并搜索了有关此问题的 Stack Overflow，听起来我需要 jpeg 插件。

所以，我这样做：

1.  我将 qjpeg4.dll 从 C:\QtSDK\QtCreator\bin\imageformats 复制到我的应用程序根目录中。---->失败。
2.  我将整个 imageformats 目录复制为我的应用程序目录的子目录。---->也失败了。

那么，如何将我的应用分发给我的朋友呢？它在我的电脑上工作，所以，它可以在别人的电脑上工作，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:55:56.163

[您必须部署 Qt DLL 和插件目录，请参阅我对Qt dll deployment on Windows](https://stackoverflow.com/questions/4047366/qt-dll-deployment-on-windows)问题的回答。

# gnuplot - 通过使用 GnuPlot 调用标题来绘制列

> ID：11500469
> 
> 赞同：8
> 
> 时间：2012-07-16T08:18:59.813
> 
> 标签：gnuplot

我有这种格式的文件：

```
x y1 y2 y3 ei1 ei2 ei3 es1 es2 es3
1 4 5 4 7 7 2 4 7 7
2 7 3 3 3 8 3 3 3 8
3 2 1 4 4 9 6 4 4 9 
```

我想生成类似于以下命令给出的图

```
plot "filename" using 1:2:5:8  with yerrorbars 
```

但使用列标题（`x`、、`y1`和）`ei1`来`es1`调用它们。如何才能做到这一点？

gnuplot 手册（记录`using`命令）的第 84 页内容如下：

```
Height Weight Age
val1   val1   val1
...    ...    ... 
```

> 那么下面的绘图命令都是等价的

```
plot ’datafile’ using 3:1, ’’ using 3:2

plot ’datafile’ using (column("Age")):(column(1)), \
’’ using (column("Age")):(column(2))

plot ’datafile’ using "Age":"Height", ’’ using "Age":"Weight" 
```

但是，当我尝试它们时，我只得到了行索引与它们自己的对比。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T12:22:57.757

快速浏览一下 gnuplot 4.4 vs gnuplot 4.6（当前稳定版本）的文档，看来您尝试使用的功能可能是在 gnuplot 4.5 中引入的（奇数是开发分支——当它们被认为稳定时，它们会增加到偶数）。可以想到的唯一方法是用其他语言编写一个简单的脚本，该脚本返回列号（到标准输出）。这是一个使用 python 的简单示例，尽管我很肯定`awk`如果您想留在全 POSIX 环境中，您可以这样做：

```
#python indexing is 0 based, gnuplot datafile indexing 1 based
COL_AGE=`python -c 'print(open("datafile").readline().split().index("AGE")+1)'`
COL_HEIGHT=`python -c 'print(open("datafile").readline().split().index("HEIGHT")+1)'`
plot "datafile" u COL_AGE:COL_HEIGHT 
```

这个小脚本没有做任何花哨的事情（例如，它假设列标题在第一行），但是使用 python 的强大功能，进一步扩展脚本会很容易：

```
#!/usr/bin/env python
import sys
with open(sys.argv[1]) as f
   for line in f:
       if (line.strip()):
           print (line.split().index(sys.argv[2])+1)
           sys.exit(0) 
```

现在您可以将此脚本称为： `python script.py datafile AGE`找出“AGE”在哪个列中。如果“AGE”不在任何列中，则这是一个错误。

# php - 将增加的时间添加到日期（php）

> ID：11500472
> 
> 赞同：0
> 
> 时间：2012-07-16T08:19:27.050
> 
> 标签：php, mysql

大家好，感谢您花时间阅读本文；

如果我有一个包含这样的格式化日期的变量，我会在徘徊：

```
07/02/2012 
```

我通过以下查询获得

```
date_format(data,'%d/%m/%Y') as data_scadenza, 
```

我怎样才能循环这个日期有这样的东西：

```
2012-02-07 11:53:00, 2012-02-07 11:54:00, 2012-02-07 11:55:00, etc. 
```

提前感谢大家，正在徘徊如何在 PHP 中或直接在 MySQL 查询中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:23:19.920

在 PHP 中循环遍历它。

```
$num = 5; //5 values will be printed
$phpdate = strtotime('07/02/2012'); //converts to timestamp
$phpdate += 11*3600 + 53*60; //to set initial offset to 11:53:00
for($i=0;$i<$num;$i++)
echo date( 'Y-m-d H:i:s', $phpdate + 60*$i).","; 
```

输出：

```
2012-07-02 11:53:00,2012-07-02 11:54:00,2012-07-02 11:55:00,2012-07-02 11:56:00,2012-07-02 11:57:00, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:24:53.120

有一个数值从 1 到 100 的数字表并使用它

```
select date_format(data+interval number minute,'%d/%m/%Y') as data_scadenza your_table as t1
cross join number_table as num 
```

# amazon-rds - Amazon RDS 试用的限制

> ID：11500476
> 
> 赞同：1
> 
> 时间：2012-07-16T08:19:43.997
> 
> 标签：amazon-rds

我不确定这是否适合提出这个问题，但我想试一试 Amazon RDS。以前我使用过 Microsoft SQL Azure 的试用版，一旦我超过限制，他们就将我切断，阻止我支付一分钱。

但是，随着 Amazon RDS 的试用，似乎一旦超过他们的限制，我就会被收费。我只是想知道是否有什么特别需要注意的，我可能会错过，并因此而被指控。

当然，如果有办法阻止我超出免费限制，我会更喜欢它。

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:22:12.957

据我所知，您无法设置硬性限制。据我所知，您可以达到的唯一限制是时间限制或 IO 限制：RDS 不会神奇地为您增加存储大小或实例大小。

但是，您可以设置计费警报：亚马逊计费费用可作为 Cloud Watch（亚马逊的监控系统）中的一个指标，因此您可以根据它们创建警报（例如向您发送电子邮件）。您可以从[帐户活动页面](https://aws-portal.amazon.com/gp/aws/developer/account/index.html?ie=UTF8&action=activity-summary)进行设置，也可以像使用任何其他 cloudwatch 指标一样配置警报。

# iphone - 在添加新行时保持 UITableView 滚动到底部

> ID：11500477
> 
> 赞同：1
> 
> 时间：2012-07-16T08:19:45.400
> 
> 标签：iphone, uitableview

我正在开发的应用程序的一部分涉及一个消息传递界面，我正在尝试制作类似于 iOS 消息应用程序的界面。当收到或发送新消息时，我希望表格视图向下滚动并显示插入动画。

到目前为止，我基本上已经这样做了：

```
- (void)didReceiveNewMessage:(...) {
    [messages addObject:...];                            // add the new message to an array
    NSIndexPath *newIndexPath = [NSIndexPath ...];       // find out where the new cell goes
    [tableView insertRowAtIndexPath:newIndexPath ...];   // animate the insertion of the new message
    [tableView scrollToRowAtIndexPath:newIndexPath ...]; // do the scrolling
} 
```

如果消息传入缓慢，则此方法有效。但是，如果我非常快地给自己发送一堆消息，我注意到表格视图会“变得混乱”。

例如，如果我快速发送消息 1、2、3、4、5、6，表格视图将动画插入 1、2、3 和 4，然后停止滚动。如果我真的手动向下滚动表格视图，我可以看到下面的 5 和 6。有谁知道更好的方法来做到这一点？

我确实尝试`setContentOffset:`滚动表格视图，但这具有相同的效果。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T23:56:05.497

这里的根本问题是我很懒惰并且使用`CGAffineTransformMakeTranslation`而不是手动计算新帧，因为我忘记了当`transform`属性更改时，根据 Apple 文档，帧变为“未定义”。

它最终工作正常，直到大量消息进入，此时表格视图的框架会变得混乱并以某种方式偏移，这会导致表格视图的底部显示得比它应该的略低。

经验教训：不要在一个动画中混合帧计算和变换。要么按照框架保留所有内容，要么按照转换保留所有内容并使用`center`+ `bounds`。

# c# - Emgu CV EigenObjectRecognizer 不工作

> ID：11500479
> 
> 赞同：1
> 
> 时间：2012-07-16T08:19:58.590
> 
> 标签：c#, face-recognition, emgucv

我试图编写一个人脸识别程序，需要社区的帮助。下面发布的代码编译没有错误，但识别器似乎不起作用？基本上 target.jpg 包含一个从 pic1.jpg 中裁剪出来的人（里面有 3 个人），所以识别器应该能够更容易地检测到它。

下面的代码运行没有错误，但是 pic1.jpg 中的所有 3 个人都被装箱了，所有 3 个面孔的 GetEigenDistances 都是 0。正确地，只有 pic1.jpg 中的人（target.jpg 中的人）应该被装箱。

知道我哪里出错了吗？提前致谢。

我正在使用带有 c# 2010 express 的 emgu cv 2.4

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Emgu.CV;
using Emgu.Util;
using Emgu.CV.Structure;
using Emgu.CV.UI;
using Emgu.CV.CvEnum;

namespace FaceReco
{
    public partial class Form1 : Form
    {
        private HaarCascade haar;
        List<Image<Gray, byte>> trainingImages = new List<Image<Gray, byte>>();
        Image<Gray, byte> TrainedFace, UnknownFace = null;
        MCvFont font = new MCvFont(FONT.CV_FONT_HERSHEY_TRIPLEX, 0.5d, 0.5d);

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            // adjust path to find your XML file 
            haar = new HaarCascade("haarcascade_frontalface_alt_tree.xml");

            //Read an target image
            Image TargetImg = Image.FromFile(Environment.CurrentDirectory + "\\target\\target.jpg");
            Image<Bgr, byte> TargetFrame = new Image<Bgr, byte>(new Bitmap(TargetImg));

            //FACE DETECTION FOR TARGET FACE
            if (TargetImg != null)   // confirm that image is valid
            {
                //convert the image to gray scale
                Image<Gray, byte> grayframe = TargetFrame.Convert<Gray, byte>();
                var faces = grayframe.DetectHaarCascade(haar, 1.4, 4,
                                        HAAR_DETECTION_TYPE.DO_CANNY_PRUNING,
                                        new Size(25, 25))[0];
                foreach (var face in faces)
                {
                    //add into training array
                    TrainedFace = TargetFrame.Copy(face.rect).Convert<Gray, byte>().Resize(100, 100, Emgu.CV.CvEnum.INTER.CV_INTER_CUBIC);
                    trainingImages.Add(TrainedFace);
                    break;
                }
                TargetImageBox.Image = TrainedFace;
            }

            //Read an unknown image
            Image UnknownImg = Image.FromFile(Environment.CurrentDirectory + "\\img\\pic1.jpg");
            Image<Bgr, byte> UnknownFrame = new Image<Bgr, byte>(new Bitmap(UnknownImg));

            //FACE DETECTION PROCESS
            if (UnknownFrame != null)   // confirm that image is valid
            {
                //convert the image to gray scale
                Image<Gray, byte> grayframe = UnknownFrame.Convert<Gray, byte>();

                //Detect faces from the gray-scale image and store into an array of type 'var',i.e 'MCvAvgComp[]'
                var faces = grayframe.DetectHaarCascade(haar, 1.4, 4,
                                        HAAR_DETECTION_TYPE.DO_CANNY_PRUNING,
                                        new Size(25, 25))[0];

                //draw a green rectangle on each detected face in image
                foreach (var face in faces)
                {
                    UnknownFace = UnknownFrame.Copy(face.rect).Convert<Gray, byte>().Resize(100, 100, Emgu.CV.CvEnum.INTER.CV_INTER_CUBIC);
                    MCvTermCriteria termCrit = new MCvTermCriteria(16, 0.001);
                    //Eigen face recognizer
                    EigenObjectRecognizer recognizer = new EigenObjectRecognizer(trainingImages.ToArray(), ref termCrit);

                    // if recognise face, draw green box
                    if (recognizer.Recognize(UnknownFace) != null)
                    {
                        UnknownFrame.Draw(face.rect, new Bgr(Color.Green), 3);
                    }

                    float f = recognizer.GetEigenDistances(UnknownFace)[0];
                    // display threshold
                    UnknownFrame.Draw(f.ToString("R"), ref font, new Point(face.rect.X - 3, face.rect.Y - 3), new Bgr(Color.Red));

                }

                //Display the image
                CamImageBox.Image = UnknownFrame;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T10:18:01.700

这个领域还不是我的专长，但如果我能帮上忙，我会尝试。这就是我正在使用的，它的工作非常好。

尝试使用 GPU 完成所有工作，它比 CPU 快得多！

```
List<Rectangle> faces = new List<Rectangle>();

List<Rectangle> eyes = new List<Rectangle>();

RightCameraImage = RightCameraImageCapture.QueryFrame().Resize(480, 360, Emgu.CV.CvEnum.INTER.CV_INTER_CUBIC); //Read the files as an 8-bit Bgr image

//Emgu.CV.GPU.GpuInvoke.HasCuda
if (GpuInvoke.HasCuda)
{
Video.DetectFace.UsingGPU(RightCameraImage, Main.FaceGpuCascadeClassifier, Main.EyeGpuCascadeClassifier, faces, eyes, out detectionTime);
}
else
{
Video.DetectFace.UsingCPU(RightCameraImage, Main.FaceCascadeClassifier, Main.EyeCascadeClassifier, faces, eyes, out detectionTime);
}

string PersonsName = string.Empty;

Image<Gray, byte> GreyScaleFaceImage;

foreach (Rectangle face in faces)
{
RightCameraImage.Draw(face, new Bgr(Color.Red), 2);

GreyScaleFaceImage = RightCameraImage.Copy(face).Convert<Gray, byte>().Resize(200, 200, Emgu.CV.CvEnum.INTER.CV_INTER_CUBIC);

if (KnownFacesList.Count > 0)
{
// MCvTermCriteria for face recognition...
MCvTermCriteria mCvTermCriteria = new MCvTermCriteria(KnownFacesList.Count, 0.001);

// Recognize Known Faces with Eigen Object Recognizer...
EigenObjectRecognizer recognizer = new EigenObjectRecognizer(KnownFacesList.ToArray(), KnownNamesList.ToArray(), eigenDistanceThreashhold, ref mCvTermCriteria);

EigenObjectRecognizer.RecognitionResult recognitionResult = recognizer.Recognize(GreyScaleFaceImage);

if (recognitionResult != null)
{
// Set the Persons Name...
PersonsName = recognitionResult.Label;

// Draw the label for each face detected and recognized...
RightCameraImage.Draw(PersonsName, ref mCvFont, new Point(face.X - 2, face.Y - 2), new Bgr(Color.LightGreen));
}
else
{
// Draw the label for each face NOT Detected...
RightCameraImage.Draw(FaceUnknown, ref mCvFont, new Point(face.X - 2, face.Y - 2), new Bgr(Color.LightGreen));
}
}
} 
```

我在课堂上的代码：Video.DetectFace：

```
using System;
using Emgu.CV;
using Emgu.CV.GPU;
using System.Drawing;
using Emgu.CV.Structure;
using System.Diagnostics;
using System.Collections.Generic;

namespace Video
{
//-----------------------------------------------------------------------------------
//  Copyright (C) 2004-2012 by EMGU. All rights reserved. Modified by Chris Sykes. 
//-----------------------------------------------------------------------------------

public static class DetectFace
{
// Use me like this:
/*
//Emgu.CV.GPU.GpuInvoke.HasCuda
if (GpuInvoke.HasCuda)
{
DetectUsingGPU(...);
}
else
{
DetectUsingCPU(...);
}
*/

private static Stopwatch watch;

public static void UsingGPU(Image<Bgr, Byte> image, GpuCascadeClassifier face, GpuCascadeClassifier eye, List<Rectangle> faces, List<Rectangle> eyes, out long detectionTime)
{
watch = Stopwatch.StartNew();

using (GpuImage<Bgr, Byte> gpuImage = new GpuImage<Bgr, byte>(image))
using (GpuImage<Gray, Byte> gpuGray = gpuImage.Convert<Gray, Byte>())
{
Rectangle[] faceRegion = face.DetectMultiScale(gpuGray, 1.1, 10, Size.Empty);
faces.AddRange(faceRegion);
foreach (Rectangle f in faceRegion)
{
using (GpuImage<Gray, Byte> faceImg = gpuGray.GetSubRect(f))
{
//For some reason a clone is required.
//Might be a bug of GpuCascadeClassifier in opencv
using (GpuImage<Gray, Byte> clone = faceImg.Clone())
{
Rectangle[] eyeRegion = eye.DetectMultiScale(clone, 1.1, 10, Size.Empty);

foreach (Rectangle e in eyeRegion)
{
Rectangle eyeRect = e;
eyeRect.Offset(f.X, f.Y);
eyes.Add(eyeRect);
}
}
}
}
}
watch.Stop();
detectionTime = watch.ElapsedMilliseconds;
}
public static void UsingCPU(Image<Bgr, Byte> image, CascadeClassifier face, CascadeClassifier eye, List<Rectangle> faces, List<Rectangle> eyes, out long detectionTime)
{
watch = Stopwatch.StartNew();
using (Image<Gray, Byte> gray = image.Convert<Gray, Byte>()) //Convert it to Grayscale
{
//normalizes brightness and increases contrast of the image
gray._EqualizeHist();

//Detect the faces  from the gray scale image and store the locations as rectangle
//The first dimensional is the channel
//The second dimension is the index of the rectangle in the specific channel
Rectangle[] facesDetected = face.DetectMultiScale(gray, 1.1, 10, new Size(20, 20), Size.Empty);
faces.AddRange(facesDetected);

foreach (Rectangle f in facesDetected)
{
//Set the region of interest on the faces
gray.ROI = f;
Rectangle[] eyesDetected = eye.DetectMultiScale(gray, 1.1, 10, new Size(20, 20), Size.Empty);
gray.ROI = Rectangle.Empty;

foreach (Rectangle e in eyesDetected)
{
Rectangle eyeRect = e;
eyeRect.Offset(f.X, f.Y);
eyes.Add(eyeRect);
}
}
}
watch.Stop();
detectionTime = watch.ElapsedMilliseconds;
}
} // END of CLASS...
}// END of NAMESPACE... 
```

# php - PHP - 如果 html 注释

> ID：11500481
> 
> 赞同：0
> 
> 时间：2012-07-16T08:20:13.387
> 
> 标签：php, dynamic, if-statement

我想根据 url 隐藏部分页面内容。

目前，如果我输入：

example.co.uk/index.php?brand=apple

然后将显示苹果内容 - 但是如果没有显示任何品牌，我想隐藏页面上的一些默认 div。

我的思路是：

```
 <?php if brand==""
echo "<!----- comment out all the default HTML"
/>

default html here

<?php if brand==""
echo "-->"
/> 
```

如果网址中没有提到品牌，那是否是清除页面的正确方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:23:17.567

你不需要注释掉 HTML，你只需要不*输出*你不想显示的 HTML。

```
<?php if (/* something */) : ?>

    Output HTML for something.

<?php endif; ?> 
```

`true`除非条件是... ，否则不会输出“HTML for something”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:27:40.247

您需要注意，即使您用注释“隐藏”您的 html，它也不是真正隐藏的，因为首先它在源代码中仍然可见，其次，您很容易遇到麻烦，例如：

您在其中有一个评论`<!-- text 1`和另一个评论`<!-- text 2 -->`，然后想要关闭第一个评论`-->`。

文本 2 的关闭实际上会关闭文本 1，等等。所以这真的不是一个干净的解决方案。如果您使用 PHP，最好只在您的 html 中打印您想要显示的代码。

如果您已经`$_GET['brand']`使用`if`or`switch`来回显您想要显示的内容。

编辑：看来，你只想显示一些元素，如果`$_GET['brand']`不是空的，对吧？在这种情况下：

```
if(isset($_GET['brand'])) {
    // echo your html here...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:24:40.140

不要隐藏你不需要的东西，只显示你需要的东西：

```
<?php

switch ( $type ) {

case "apple":
  // apple content
break;

case "peaches":
    // peaches content
break;

...

}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T08:22:04.087

你甚至不需要评论；只是 PHP if 块就可以了：

```
<?php if ($brand) { ?>

...html - note this section is bounded by PHP, but is not PHP code...

<?php } ?> 
```

或者，将您的“默认 html”存储在一个字符串中，并回显它：

```
<?php
if ($brand) {
  echo $strHTML;
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T08:23:36.647

不，在 HTML 4 和 XHTML 中表示“注释开始”和“注释结束”的注释语法是`--`这样的，因此您的语法在第 1 行有一个封闭的注释。

你想要`<!--`。

如果 HTML 包含注释，这将中断。

您还需要一些`()`用于`if`.

如果匹配匹配，您最好不要在输出中包含 HTML。

```
<?php 
    if (brand != "") {
?>
HTML here
<?php
    }
?> 
```

# regex - 正则表达式在字符串中查找整数和小数

> ID：11500482
> 
> 赞同：4
> 
> 时间：2012-07-16T08:20:20.170
> 
> 标签：regex, string, integer, decimal

我有一个像这样的字符串：

```
$str1 = "12 ounces";
$str2 = "1.5 ounces chopped; 
```

我想从字符串中获取数量，无论它是否为小数（12 或 1.5），然后获取前一个测量值（盎司）。

我能够使用一个非常基本的正则表达式来获取测量值，但是获取小数/整数一直给我带来问题。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T08:24:04.353

如果您只想获取数据，则可以使用松散的正则表达式：

```
([\d.]+)\s+(\S+) 
```

*   `([\d.]+)`:`[\d.]+`将匹配一系列严格的数字和`.`（这意味着`4.5.6`或`....`将匹配，但这些情况并不常见，这只是为了抓取数据），括号表示我们将捕获匹配的文本。这里`.`在字符类里面`[]`，所以不需要转义。

*   后跟任意空格`\s+`和非空格字符的最大序列（由于贪心量词）`\S+`（非空格真的是非空格：它将匹配 Unicode 中的几乎所有内容，除了空格、制表符、换行符、回车符）。

您可以获取第一个捕获组中的编号，以及第二个捕获组中的单元。

您可以对数字更严格一些：

```
(\d+(?:\.\d*)?|\.\d+)\s+(\S+) 
```

*   唯一的变化是`(\d+(?:\.\d*)?|\.\d+)`，所以我只解释这部分。这有点严格，但是否更严格取决于输入域和您的要求。它将匹配整数`34`，带小数部分的数字，`3.40000`并允许`.5`和`34.`案例通过。它将拒绝带有过多的数字`.`，或者只包含一个`.`。`|`充当分隔 2 种不同模式的 OR ：`\.\d+`和`\d+(?:\.\d*)?`.
*   `\d+(?:\.\d*)?`：这将匹配并（隐式）声明整数部分中的至少一位数字，然后是*可选* `.`的（需要转义，`\`因为`.`表示任何字符）和小数部分（可以是 0 位或更多位）。可选性`?`在末尾表示。`()`可用于分组和捕获 - 但如果不需要捕获，`(?:)`则可用于禁用捕获（节省内存）。
*   `\.\d+`: 这将匹配诸如`.78`. 它匹配`.`后跟至少一个（由 表示`+`）数字。

如果您想确保从输入字符串中获得有意义的内容，这不是一个好的解决方案。您需要先定义所有预期单位，然后才能编写仅捕获有效数据的正则表达式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T08:28:15.390

使用这个正则表达式`\b\d+([\.,]\d+)?`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:41:13.803

要获取使用逗号或点加上下一个单词的整数和小数，请使用以下正则表达式：

```
/\d+([\.,]\d+)?\s\S+/ 
```

# python - 自动将网页复制到剪贴板

> ID：11500485
> 
> 赞同：2
> 
> 时间：2012-07-16T08:20:32.307
> 
> 标签：python, python-2.7, clipboard

是否可以使用 python / javascript 将网页（无论我看到什么，而不是源代码）自动复制到剪贴板（不使用 ctrl+c）。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T01:24:14.527

如果你只想从网页中提取可用的文本，你可以使用[BeautifulSoup](https://stackoverflow.com/questions/3172343/extracting-readable-text-from-html-using-python)之类的东西。如果要将其复制到剪贴板，可以使用[pyperclip](https://stackoverflow.com/a/4308279/125377)。

# ruby-on-rails - 如何包含自定义 SQL 函数

> ID：11500489
> 
> 赞同：2
> 
> 时间：2012-07-16T08:20:57.467
> 
> 标签：ruby-on-rails

我`find_by_sql`用来执行 SQL 查询。我希望能够使用 Soundex 和 Levenshtein，但为了使用 Levenshtein，我需要将函数作为文件包含在内。

到目前为止，这是我的代码：

```
info = params[:email].split('@')
name = info[0]
domain = info[1]

levenshtein = File.open("./lib/assets/mysql-function-levenshtein.sql")

results = Domain.find_by_sql(
    "" + levenshtein + "
    SELECT *
    FROM domains
    WHERE domain = '" + domain + "'"
) 
```

我不知道只是将它包含在查询中是否有效。

最好的实现是什么？

顺便说一下，我要包含的文件是： [https ://github.com/vyper/levenshtein-sql](https://github.com/vyper/levenshtein-sql)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:13:32.733

首先，我认为您最好通过迁移在数据库中定义该函数，这样您就不必为要使用它的每个查询再次定义它：

```
class AddLevenShteinFunctionToDatabase < ActiveRecord::Migration
  def up
    levenshtein = File.read("/path/to/levenshtein.sql")
    execute levenshtein
  end

  def down
    # maybe put some code here to delete the function
  end
end 
```

完成此操作后，您还可以为`Domain`模型添加范围以执行以下类型的查询：

```
scope :levenshtein, lambda {|s1, s2| select("levenshein(#{s1}, #{s2})") } 
```

有了这个，您应该能够编写如下查询：

```
results = Domain.levenshtein("LEONARDO", "LEONARDU").where(:domain => domain) 
```

# javascript - 在 Javascript 中声明数组时要遵循的最佳实践是什么？

> ID：11500492
> 
> 赞同：176
> 
> 时间：2012-07-16T08:21:04.723
> 
> 标签：javascript

当我需要声明一个新数组时，我使用这个符号

```
var arr = new Array(); 
```

但是当在线测试时，例如在[jsbin](http://jsbin.com/#javascript,html)上，一个警告信号告诉我“使用数组文字符号 []”。

我没有找到避免使用构造函数的理由。在某种程度上比使用效率低`[]`吗？或者这是不好的做法？

是否有充分的理由使用`var arr = [];`而不是`var arr = new Array();`？

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2012-07-16T08:25:09.383

*大多数情况下*，人们使用Douglas Crockford 是`var a = []`因为[Douglas Crockford 这么说](http://yuiblog.com/blog/2006/11/13/javascript-we-hardly-new-ya/)的。

他的原因包括以下非直觉和不一致的行为`new Array()`：

```
var a = new Array(5);     // an array pre-sized to 5 elements long
var b = new Array(5, 10); // an array with two elements in it 
```

请注意，无法`new Array()`创建仅*包含一个*预先指定的数字元素的数组！

使用`[]`实际上更有效，[也更安全](https://stackoverflow.com/questions/2280285/what-does-mean-in-javascript)！可以覆盖`Array`构造函数并让它做一些奇怪的事情，但你不能覆盖`[]`.

就个人而言，我总是使用`[]`语法，同样总是使用`{}`语法代替`new Object()`.

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-07-16T14:10:23.203

一个显着的区别是它*总是*`[]`会实例化一个新的 Array，而可能会被[劫持以创建一个不同的对象](http://jsfiddle.net/ASvqT/)。*`new Array`*

 *```
(function () {
    "use strict";
    var foo,
        bar;
    //don't do this, it's a bad idea
    function Array() {
        alert('foo');
    }
    foo = new Array();
    bar = [];
}());​ 
```

在我的示例代码中，我将`Array`函数从文档范围的其余部分隐藏起来，但是如果您遇到此类问题，代码将不会被留在一个很好的闭包中，并且会可能很难找到。

[**免责声明**`Array`：劫持构造函数不是一个好主意。]

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-07-17T05:18:58.920

# 为了可维护性，使用`[]`

数组字面量更具可预测性，因为大多数开发人员都使用它。大多数数组使用都将使用文字，并且让您的代码与其他开发人员使用的代码相匹配是有价值的。

# 对于空数组，使用`[]`

```
var ns = [];
var names = [ 'john', 'brian' ]; 
```

[如此处](http://jsperf.com/array-constructor-versus-literal)所示，使用文字表示空元素和几个已知元素比 Array 构造函数更胖。

# 对于已知大小的数组，使用`new Array(size)`

如果大小已知，则使用 Array 构造函数可显着提高性能。但是，这也意味着您必须处理一个已经有“未定义”填充其所有值的数组。

[如此处](http://jsperf.com/array-filling-speed/)所示

```
// fill an array with 100 numbers
var ns = new Array( 100 );
for ( var i = 0; i < 100; i++ ) {
    ns[i] = i;
} 
```

这也适用于[非常小的数组](http://jsperf.com/array-filling-speed/2)。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-07-16T08:25:16.067

不，实际上没有理由对空数组使用一种表示法而不是另一种表示法。

`x = [];`但是，大多数浏览器使用比调用*Constructor*显示出更好的性能。

如果您需要创建一个具有特定大小的数组，您*需要*使用`x = new Array(10);`例如，这将创建一个具有 10`undefined`个插槽的数组。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-07-16T11:04:11.907

*   var arr=[] 使用数组/对象字面量
*   var arr = new Array() 使用数组/对象构造函数

定义数组或对象的最快方式是字面量方式，因为您不需要调用构造函数

```
var arr1 = new Array(1, 2, 3, 4);
var arr2 = [1, 2, 3, 4];

alert(arr1[0]); // 1
alert(arr2[0]); // 1

var arr3 = new Array(200);
var arr4 = [200];

alert(arr3[0]); // 'undefined'
alert(arr4[0]); // 200 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-07-16T08:35:36.950

两者都是正确的。但是大部分人用`var a = []`

在 JavaScript 中声明数组的三种方法。

**方法1**：我们可以显式地声明一个数组，使用JavaScript“new”关键字来实例化内存中的数组（即创建它，并使其可用）。

```
// Declare an array (using the array constructor)
var arlene1 = new Array();
var arlene2 = new Array("First element", "Second", "Last"); 
```

**方法2**：我们使用另一种方法来声明数组。

```
// Declare an array (using literal notation)
var arlene1 = [];
var arlene2 = ["First element", "Second", "Last"]; 
```

**方法 3**：JavaScript 还允许您通过调用特定方法间接创建数组。

```
// Create an array from a method's return value
var carter = "I-learn-JavaScript";
var arlene3 = carter.split("-"); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-16T08:25:04.657

构造函数可以作为参数有一个限制。

在我遇到的大多数系统上，限制是 2^16（2 个字节）：

```
var myFreshArr = new Array(0,1,2,3 ..... 65536); 
```

这将导致错误（参数过多....）

使用文字 [] 时，您不会遇到此类问题。

如果你不关心这么大的数组，我想你可以使用你喜欢的任何东西。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-07-16T13:58:32.687

```
var array = [ 1, 2, 3, 4]; 
```

是糖

```
var array = new Array(1, 2, 3, 4); 
```

是盐

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-07-16T08:25:11.200

就是因为`new Array()`模棱两可。这些是正确的构造函数：

```
// Using brackets
[element0, element1, ..., elementN]

// Using new AND a list of elements
new Array(element0, element1, ..., elementN)

// Using new AND an integer specifying the array length
new Array(arrayLength) 
```*

# python - set_default 上的 OptionParser 错误

> ID：11500493
> 
> 赞同：2
> 
> 时间：2012-07-16T08:21:14.323
> 
> 标签：python, command-line-arguments

使用 optparse 我遇到了这个错误，我无法弄清楚发生了什么，文档并没有帮助我澄清为什么会发生这种情况。

代码：

```
formats = ['xml', 'json', 'yaml']
parser = optparse.OptionParser(usage = u, version = v)
parser.add_option('-s', '--src', dest = 'source_file', metavar = 'single source file')
parser.add_option('-f', '--format', dest = 'frmt', type = 'choice', choices = formats)
parser.add_option('-o', '--output', dest = 'output_file')

parser.set_default(frmt = 'xml', output_file = 'doc.xml')
opts, args = parser.parse_args()

gen_doc(opts.source_file, opts.frmt, opts.output_file) 
```

错误：

```
$ python main.py -s a -f xml -o a
Traceback (most recent call last):
  File "main.py", line 35, in <module>
    main()
  File "main.py", line 29, in main
    parser.set_default(frmt = 'xml', output_file = 'doc.xml')
TypeError: set_default() got an unexpected keyword argument 'frmt' 
```

据我所知`set_default`应该认出实例成员设置在`add_option`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:26:52.550

方法是`set_defaults`；注意复数。 `set_default`（单数）有两个参数；选项的名称及其值。

# android - 4.1：XML布局LinkedHashMap错误

> ID：11500496
> 
> 赞同：0
> 
> 时间：2012-07-16T08:21:32.717
> 
> 标签：android, android-4.2-jelly-bean

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingLeft="10dp"
        android:paddingRight="10dp">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Some Text"
            android:layout_margin="5dp"
            android:textSize="22sp"
            />
        <View
            android:layout_width="fill_parent"
            android:layout_height="1dp"
            android:background="@android:color/black"
            />
        <EditText
            android:id="@+id/edit_firstname"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:inputType="text"
            />
    </LinearLayout>
</LinearLayout> 
```

我在上面有这个 XML 布局，在 4.0.3 中一切正常，但是当我将它应用到 4.1 时，它会在下面产生这个错误。当我删除 EditText 布局很好。

![在此处输入图像描述](../Images/25bbb336c716e92f7ee8ec6d5ecd1acf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:52:26.147

不知道原因，但放入`android:inputType="textNoSuggestions"`EditText 是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:28:47.960

现在是个问题 它不是来自 ADT 20，而是来自 Jelly Bean 的渲染库。所以我们需要等待 JB 的更新来修复。

但作为一种解决方法，我们可以通过禁用*SpellChecker*来解决这个问题。

```
java.lang.NoSuchMethodError: java.util.LinkedHashMap.eldest()Ljava/util/Map$Entry;
    at android.util.LruCache.trimToSize(LruCache.java:206)
    at android.util.LruCache.evictAll(LruCache.java:306)
    at android.widget.SpellChecker.resetSession(SpellChecker.java:141)
    at android.widget.SpellChecker.setLocale(SpellChecker.java:147) 
```

因此，添加 `android:inputType="textNoSuggestions"`到您的 EditText 中，您将解决此问题。

有关更多详细信息，请参阅此[链接](http://android.foxykeep.com/dev/small-issue-with-adt-20-and-sdk-16-and-how-to-fix-it)。

# java - 用声明初始化变量

> ID：11500504
> 
> 赞同：2
> 
> 时间：2012-07-16T08:22:10.903
> 
> 标签：java

我是一名 C# 开发人员，我非常习惯于在相同的声明语句中初始化一个变量

```
ClassA myClass = new ClassA(); 
```

在我看来，这种做法更简洁、更具可读性并且看起来很整洁。

现在，我正在为android学习java。到目前为止，无论我面对什么 java 代码片段，我都看到代码片段编写者正在使用这样的代码：

```
ClassA myClass;
myClass = new ClassA(); 
```

现在，我明白了，我的问题可能听起来很傻，但真的很想知道，这两种方法之间是否有任何影响/效果或有什么区别？我的意思是，如果我像这样在 java 中编译代码：

```
ClassA myClass = new ClassA(); 
```

内部有什么重要的吗？我只是想确定我没有做错任何事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T08:23:50.447

不，这不是 C#/Java 的区别，您的习惯是合适的。除非由于初始化是有条件的（`if`/ `else`），否则没有充分的理由将声明和初始化分开。

我确信有很多编写得当的 Android 代码，*就像*那里有很多*糟糕*的C# 代码一样。听起来你只是运气不好（或者可能阅读了同一作者的大量代码，他的风格很不幸）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:25:29.837

这两种方法都是有效的，没有人可以在构造时停止初始化变量。

在第二种方法中，您在需要时按需构造对象。

如果您有参数化构造函数。

```
ClassA myClass = new ClassA(xyz); 
```

在上述方法中，您使用默认对象创建引用。

```
ClassA myClass;

//    some condition 
 myClass=new ClassA(abc);
// some other

 myClass=new ClassA(xyz); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:28:22.947

不确定您查看了哪些片段，但没有什么可以阻止您执行以下操作：

```
ClassA myClass = new ClassA(); 
```

不同之处在于 java 不允许您像 C# 那样忽略异常，因此在很多情况下您会遇到这样的情况：

```
try{
 ClassA myClass = new ClassA();
}
catch(Exception e)
{
} 
```

在这种情况下，如果您想在 try 块之外使用 myClass 变量，则必须在 try 块之外定义它并在 try 中初始化它：

```
ClassA myClass = null;

  try{
     myClass = new ClassA();
    }
    catch(Exception e)
    {
    }
    if(myClass != null){
        myClass.doSomething();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T08:30:02.383

A类我的类；

此时，在调用“new”关键字之前，它不会创建新的 java 对象。但关键是，如果您的变量是全局变量，请不要使用直接声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T08:30:50.760

它可能产生的唯一“区别”是您的 myClass 在 try-catch 块中使用时。

```
ClassA myClass;

try {
    myClass = new ClassA(); // exception may occur here
} catch {
    // catch and process exception
} finally {
    // always do something
}

doSomethingWith(myClass); 
```

如果你在 try 块中声明和初始化，那么它在外面是不可见的。
这是这样做的唯一原因，从我的 POV，ATM。

# c - C中的位移位-是i位吗？

> ID：11500506
> 
> 赞同：1
> 
> 时间：2012-07-16T08:22:19.277
> 
> 标签：c, bit-shift

我试图理解以下决定是否开启的函数：

```
int isBitISet( char ch, int i )
{
   char mask = 1 << i ;
   return mask & ch ;
} 
```

首先，为什么我会得到一个字符？for`ch=abcdefgh`和`i=5`函数假设返回右数第五位 (?) , `d`. 所以 `mask=00000001<<5=00100000`和`00100000 & abcdefgh = 00c00000`。

你能解释一下我们为什么会得到 char 并且我们可以在没有任何演员表的情况下完成所有这些转变吗？为什么我们没有得到第五位，为什么返回值实际上是该位是否打开的指示？

编辑：'abcdefg' 只是位的符号，我并不是要以 char 类型表示字符串。

我曾经认为 char 是`'a'`而不是实际的 8 位，所以这可能是我第一个问题的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:29:58.000

它不会给你第五位。二进制数从 2 ⁰开始，因此第一位实际上是用 索引的`0`，而不是用索引`1`。相反，它将返回您的第六位。

例子：

```
ch & (1 << 0); // first bit
ch & (1 << 1); // second bit
ch & ((1 << 3) | (1 << 2)); // third and fourth bit. 
```

此外，char 只是数字的解释。在大多数机器上，它的大小为 8 位，您可以将其解释为无符号值（0 到 255）或有符号值（-128 到 127）。所以基本上它是一个范围非常有限的整数，因此您可以在不强制转换的情况下应用位移。

此外，当且仅当未设置给定位时，您的函数将返回一个等于零的整数值。否则它是一个非零值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:26:54.110

该函数可能返回一个字符，因为它所处理的输入也只是一个字符。您当然不能传入 ch=abcdefgh，因为那将是一个 8 个字符的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:32:05.067

您可以对字符进行转换，因为 C 允许这样做。`char`只是一个 8 位整数类型，所以没有必要禁止它。

你是对的，如果字母 a、b 等是数字二进制表示中的位，则`isBitISet(abcdefgh, 5)`返回。`00c00000`返回值不是`the fifth bit from the right`，它与输入中的数字相同，但除了第五位之外的所有位都归零。您还必须记住，位的编号是从零开始的，所以第五位`c`是正确的，就像第零位是`h`.

此示例使用整数类型来表示布尔值。这在 C99 之前的 C 代码中很常见，因为 C 没有`bool`类型。如果您将返回值视为布尔值，请记住，所有非零都是真，零是假。因此，`isBitISet`如果设置了位，则 C 的输出为真，`i`否则为假。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T08:32:38.297

您现在应该知道，在计算机中，一切都是从 0 开始的。也就是说，第 5 位实际上是第 6 位（不是第 5 位）。

你的分析实际上是正确的，如果你给它`abcdefgh`，`5`你得到`00c00000`。

当你做“和”时：

```
return mask & ch; 
```

因为`mask`有 type `int`，`ch`也将自动转换为`int`（与许多其他运算符相同）。这就是您不需要显式转换的原因。

最后，这个函数的结果是 0..0z0..0 的形式。如果`z`，您要检查的位为 0，则此值为 0，只要涉及 an 即为假`if`。如果它不为零，那么对于`if`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T08:36:28.277

做：

```
return 0 != (mask & ch) ; 
```

如果你想要一个布尔值（0x00000000 或 0x00000001）返回。`mask & ch`独自一人会给你在正确位置询问的位。

（其他人说的不仅仅是关于 i=5 是第六位）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T08:36:04.200

1.  首先，此函数不返回第 i 位，而是告诉您该位是打开还是关闭。

2.  is implementation的用法`char mask`取决于这里。只需定义一个 8 位掩码，因为应用此掩码的值是`char`.

3.  为什么在`1`char 时需要演员表？`i`只是 << 运算符的值。

4.  `ch=abcdefgh`作为输入毫无意义。`ch`是 char，所以`ch`只能是一个字符。

5.  工作如下：首先构建一个掩码，将所有不需要的位归零。例如，如果输入是`ch = 204`( `ch = 11001100`) 并且我们想知道第 6 位是否打开，所以 i = 5。所以`mask = 1 << 5 = 00100000`。然后通过 AND 操作将此掩码应用于该值。这将使除了有问题的位之外的所有内容都归零：`11001100 & 00100000 = 00000000 = 0`. 由于在 C 中 0 为假，因此不设置第 6 位。`ch`相同输入和 i = 6的另一个示例`mask = 1 << 6 = 01000000`：`11001100 & 01000000 = 01000000 = 64`，这不是 0，因此为真，因此设置了第 7 位。

# arrays - powershell 函数的逗号分隔输入

> ID：11500513
> 
> 赞同：0
> 
> 时间：2012-07-16T08:22:55.003
> 
> 标签：arrays, powershell, multidimensional-array, powershell-2.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:41:16.340

Try this:

```
Function ListFiles($Path,$Exclude)
{
    Get-ChildItem -Path $FilesToList -Force -Recurse  | 
    Where-Object {!$_.PSIsContainer -and $_.Extension -notmatch ($Exclude -join '|') }
}

Listfiles -Pathc:\tools –Exclude avi,txt,bmp 
```

# javascript - 如何禁用 IE9 的 ShareThis？

> ID：11500521
> 
> 赞同：0
> 
> 时间：2012-07-16T08:23:24.477
> 
> 标签：javascript, if-statement, internet-explorer-9, sharethis

ShareThis 小部件在 IE9 中会导致严重问题，因此我想为浏览器禁用它。您可以在下面看到 ShareThis 代码和我尝试禁用它的尝试。为什么if语句不起作用？如何为 IE9 禁用此代码？我感谢任何有用的意见或建议。

```
<script type="text/javascript">var switchTo5x=true;</script>
     <script type="text/javascript"
     src="http://w.sharethis.com/button/buttons.js"></script>
     <script type="text/javascript" src="http://s.sharethis.com/loader.js"></script>

     REST OF CODE

     <script>
     var options={ "publisher": "3662a59e-5e0d-4969-8567-735aca70d6d1",
     "position": "left", "ad": { "visible": false, "openDelay": 5,
     "closeDelay": 0}, "chicklets": { "items": ["facebook", "twitter",
     "linkedin", "email", "pinterest", "sharethis"]}};
     var st_hover_widget = new sharethis.widgets.hoverbuttons(options);
     </script> 
```

Bellow 是我尝试使用 if 语句禁用它。但是 ShareThis 仍然出现在 IE9 上。

```
 <script type="text/javascript">
 if (navigator.appName="Microsoft Internet Explorer")
 {
 }
 else
 {

 <script type="text/javascript">

 var switchTo5x=true;</script>

 <script type="text/javascript"
 src="http://w.sharethis.com/button/buttons.js"></script>
 <script type="text/javascript" src="http://s.sharethis.com/loader.js"></script>
 }
 </script>

 REST OF CODE

 if (navigator.appName="Microsoft Internet Explorer")
 {
 }
 else
 {
 <script>
 var options={ "publisher": "3662a59e-5e0d-4969-8567-735aca70d6d1",
 "position": "left", "ad": { "visible": false, "openDelay": 5,
 "closeDelay": 0}, "chicklets": { "items": ["facebook", "twitter",
 "linkedin", "email", "pinterest", "sharethis"]}};
 var st_hover_widget = new sharethis.widgets.hoverbuttons(options);
 </script>
 }
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:28:09.420

您可以使用条件注释：

```
<!--[if !IE 9]>
<script src="...sharethis..."></script>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:29:33.710

IE 有这个“很棒的”功能，叫做“条件注释”:)

在您的情况下，以下代码段将禁止 ShareThis 代码在大于 8 的 IE 版本中加载。

```
<!--[if lt IE 9]> 
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script> 
<script type="text/javascript" src="http://s.sharethis.com/loader.js"></script> 
<script> // .. rest of sharethis init code</script>
<![endif]--> 
```

# c# - 分析可执行文件的工具

> ID：11500522
> 
> 赞同：2
> 
> 时间：2012-07-16T08:23:25.850
> 
> 标签：c#, java, c++, compiler-construction, pascal

是否有工具可以分析可执行文件并检测： - 使用的编程语言（编译器）， - 使用的框架（Qt、Gtk、.Net、WxWidgets 等）， - 其他有用的信息（压缩等）。

我知道有时很难说出编程语言（尤其是在 C 或 Pascal exe 中），但是可以说出使用的语言或编译器吗？（Delphi 生成 exe 的方式不同，例如 VB6）。

这可能是可能的，例如。对 dll、头文件等进行依赖分析。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:03:06.033

在 GNU 上，您可以使用多种工具来尝试猜测您想要的信息：

*   ldd 解析链接到二进制文件的共享库
*   nm 列出由二进制文件导入/导出的符号
*   字符串，它可以转储嵌入在二进制文件中的字符串
*   objdump 也很有用
*   十六进制编辑器也很有用。

我猜windows平台上有类似的工具。Dumpbin.exe 类似于 nm，depends.exe 类似于 ldd iirc。

顺便说一句，java 通常是编译的字节码，而不是本机的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:36:39.710

我过去曾使用过（uni）[PEInfo](http://www.pazera-software.com/products/peinfo/)，但它没有提供您想要的信息。之后我使用了反射器，因为我知道我的 dll/exe 在哪里 .net

但**我认为没有软件可以做到这一点**。

**解决方法：**您可以做的最好的事情是查看 exe 的字符串（例如使用 Process explorer）并自己猜测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:44:04.210

在二进制文件查看器中打开您的可执行文件并查找看起来像函数名称的字符串。这些字符串并不总是可用，但在某些情况下它们是存在的。例如，它们可用于解析与 DLL 的链接。之后谷歌这些字符串。他们有可能会告诉你一些事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T08:35:28.700

我不认为有一种可能的方法来正确地做到这一点。也许可以检测到一些基本的编程语言，但没有人可以检测到使用的框架。有成千上万的框架。

# .net - 水平复选框

> ID：11500532
> 
> 赞同：1
> 
> 时间：2012-07-16T08:24:04.430
> 
> 标签：.net, winforms, checklistbox

我的winform上有多个复选框列表，但列表的向下流动看起来不太吸引人。

我想知道是否有办法强制复选框水平显示其项目，而不是垂直显示。

我已经尝试过 MiltiColumn 和 ColumnWidth，但这些项目仍然是垂直列出的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:44:10.707

最有效的方法是`FlowLayoutPanel`您可以添加复选框。然后它们将从左到右排序。

# java - 访问 pom 中定义的 maven 属性

> ID：11500533
> 
> 赞同：87
> 
> 时间：2012-07-16T08:24:08.860
> 
> 标签：java, maven

如何在普通 maven 项目和 maven 插件项目中访问 pom 中定义的 maven 属性？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2014-10-27T14:23:51.497

使用[properties-maven-plugin](http://www.mojohaus.org/properties-maven-plugin/)在编译时将特定的 pom 写入`properties`文件，然后在运行时读取该文件。

在你的**pom.xml**中：

```
<properties>
     <name>${project.name}</name>
     <version>${project.version}</version>
     <foo>bar</foo>
</properties>

<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>properties-maven-plugin</artifactId>
            <version>1.0.0</version>
            <executions>
                <execution>
                    <phase>generate-resources</phase>
                    <goals>
                        <goal>write-project-properties</goal>
                    </goals>
                    <configuration>
                        <outputFile>${project.build.outputDirectory}/my.properties</outputFile>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

然后在**.java**：

```
java.io.InputStream is = this.getClass().getResourceAsStream("my.properties");
java.util.Properties p = new Properties();
p.load(is);
String name = p.getProperty("name");
String version = p.getProperty("version");
String foo = p.getProperty("foo"); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-16T08:32:22.893

从 Maven设置[系统变量](https://stackoverflow.com/questions/3231797/specify-system-property-to-maven-project)并在 java 中使用[以下调用](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperty%28java.lang.String%29)

```
System.getProperty("Key"); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-16T08:29:55.960

Maven 已经有一个解决方案来做你想做的事：

[仅从 POM.xml - pom 解析器获取 MavenProject？](https://stackoverflow.com/questions/4381460/get-mavenproject-from-just-the-pom-xml-pom-parser)

顺便说一句：第一次点击谷歌搜索；）

```
Model model = null;
FileReader reader = null;
MavenXpp3Reader mavenreader = new MavenXpp3Reader();

try {
     reader = new FileReader(pomfile); // <-- pomfile is your pom.xml
     model = mavenreader.read(reader);
     model.setPomFile(pomfile);
}catch(Exception ex){
     // do something better here
     ex.printStackTrace()
}

MavenProject project = new MavenProject(model);
project.getProperties() // <-- thats what you need 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-16T08:32:15.733

这可以通过标准的 java 属性结合`maven-resource-plugin`启用的属性过滤来完成。

有关更多信息，请参阅[http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)

这将适用于标准 Maven 项目和插件项目

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-11T08:57:03.417

我在**spring-boot-maven-plugin中使用****build-info**目标：

 **在我的 pom.xml 中：

```
<plugin>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-maven-plugin</artifactId>
    <executions>
    ...
      <execution>
        <id>build-info</id>
        <goals>
          <goal>build-info</goal>
        </goals>
      </execution>
    </executions>
    <configuration>
    ...
    </configuration>
</plugin> 
```

在我的代码中：

```
@Autowired
BuildProperties buildProperties;

...

@GetMapping
public Map<String, String> getVersion() {
    return Map.of(
            "build.name", buildProperties.getName(), 
            "build.version", buildProperties.getVersion(), 
            "build.date", buildProperties.getTime().toString());
} 
```

关于这个插件目标的更多信息可以在这里找到：[https ://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#goals-build-info](https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#goals-build-info)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-28T10:15:09.953

**[Leif Gruenwoldt](https://stackoverflow.com/users/52176/leif-gruenwoldt) [答案](https://stackoverflow.com/a/26589696/10423604)的更新：**

使用很重要

```
this.getClass().getClassLoader().getResourceAsStream("maven.properties"); 
```

而不仅仅是

```
 this.getClass().getResourceAsStream("maven.properties"); 
```

特别是，如果您将`maven.properties`文件写入权限`project.build.outputDirectory`：

```
<plugin>
   <groupId>org.codehaus.mojo</groupId>
   <artifactId>properties-maven-plugin</artifactId>
   <version>1.0.0</version>
   <executions>
      <execution>
         <phase>generate-resources</phase>
         <goals>
            <goal>write-project-properties</goal>
         </goals>
         <configuration>
            <outputFile>${project.build.outputDirectory}/maven.properties</outputFile>
         </configuration>
      </execution>
   </executions>
</plugin> 
```

解释就[在那里](https://stackoverflow.com/questions/6608795/what-is-the-difference-between-class-getresource-and-classloader-getresource)。

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2012-07-16T08:27:42.490

您可以使用 JDOM (http://www.jdom.org/) 解析 pom 文件。**

# python - Python IndexError：列表索引超出范围

> ID：11500539
> 
> 赞同：3
> 
> 时间：2012-07-16T08:24:30.430
> 
> 标签：python, list, indexing, range, stocks

我试图让 Python 用 500 只股票的收盘价填充列表。虽然代码似乎只适用于少数股票，但数量过多会带来问题。Python 不断给我以下错误：“ `OneClose.append(Data[i][4]) IndexError: list index out of range.`”我不知道如何解决这个问题。无论我似乎在范围字段中输入了什么（在本例中为 31），错误仍然存​​在。

```
raw = open('C:\Model\Stocks\list.txt', 'r').read()
stocks = raw.split('\n')

for stock in stocks:
    Data = ystockquote.get_historical_prices(stock, '20120501', '20120716')

# Create empty lists, quick and dirty
    OneClose = [ ]
    OneDate = [ ]

# Populate lists from downloaded data
    for i in range(1, 31):
        OneDate.append(Data[i][0])
        OneClose.append(Data[i][4]) 
```

`Data`包含：

```
Data = [['Date', 'Open', 'High', 'Low', 'Close', 'Volume', 'Adj Clos'], 
        ['2012-07-13', '86.32', '87.83', '86.32', '87.54', '1937700', '87.5'], 
        ['2012-07-13', '86.32', '87.83', '86.32', '87.59', '2599300', '87.5'], 
        ['2012-07-12', '86.60', '86.97', '85.34', '86.41', '4938300', '86.4'], 
        ['2012-07-11', '88.38', '88.76', '87.01', '87.85', '4208600', '87.8'], 
        ['2012-07-10', '89.08', '89.82', '87.96', '88.25', '3356800', '88.2'], 
        ['2012-07-09', '88.86', '89.08', '88.31', '88.96', '2600900', '88.9'], 
        ['2012-07-06', '88.81', '89.38', '88.35', '88.99', '2192900', '88.9'], 
        ['2012-07-05', '89.20', '89.95', '88.86', '89.57', '1924800', '89.5'], 
        ['2012-07-03', '89.11', '89.75', '89.08', '89.70', '1410400', '89.7'], 
        ['2012-07-02', '89.29', '89.69', '88.28', '89.28', '2289700', '89.2'], 
        ['2012-06-29', '88.62', '89.60', '88.35', '89.60', '4629400', '89.6'], 
        ['2012-06-28', '86.36', '87.25', '85.98', '87.16', '3267100', '87.1'], 
        ['2012-06-27', '86.39', '87.60', '86.24', '87.16', '2887800', '87.1'], 
        ['2012-06-26', '85.91', '86.47', '85.29', '86.18', '2389100', '86.1'], 
        ['2012-06-25', '85.87', '86.31', '85.46', '85.85', '2908900', '85.8'], 
        ['2012-06-22', '87.11', '87.14', '86.38', '86.83', '3026000', '86.8'], 
        ['2012-06-21', '88.04', '88.38', '86.62', '86.73', '3722800', '86.7'], 
        ['2012-06-20', '87.93', '88.28', '87.35', '87.54', '3446800', '87.5'], 
        ['2012-06-19', '87.82', '88.17', '87.52', '87.82', '3212500', '87.8'], 
        ['2012-06-18', '87.07', '87.61', '86.67', '87.31', '2950600', '87.3'], 
        ['2012-06-15', '87.57', '87.91', '87.01', '87.44', '4696100', '87.4'], 
        ['2012-06-14', '86.31', '87.23', '86.06', '86.86', '3334900', '86.8'], 
        ['2012-06-13', '86.30', '86.80', '85.72', '86.13', '3370500', '86.1'], 
        ['2012-06-12', '85.67', '86.74', '85.22', '86.73', '2570900', '86.7'], 
        ['2012-06-11', '86.54', '86.54', '85.08', '85.18', '2098200', '85.1'], 
        ['2012-06-08', '85.18', '86.09', '84.99', '86.00', '2146200', '86.0'], 
        ['2012-06-07', '85.59', '86.19', '85.33', '85.50', '3032400', '85.5'], 
        ['2012-06-06', '83.22', '84.64', '83.03', '84.63', '2776300', '84.6'], 
        ['2012-06-05', '82.59', '82.86', '82.25', '82.51', '3268700', '82.5'], 
        ['2012-06-04', '82.79', '82.99', '81.99', '82.62', '2899900', '82.6'], 
        ['2012-06-01', '83.05', '83.98', '82.72', '82.85', '3539200', '82.8'], 
        ['2012-05-31', '84.45', '85.05', '83.87', '84.41', '3683200', '84.4'], 
        ['2012-05-30', '85.06', '85.12', '84.10', '84.45', '2697100', '84.4'], 
        ['2012-05-29', '85.38', '86.00', '85.13', '85.73', '2142200', '85.7'], 
        ['2012-05-25', '84.87', '85.20', '84.40', '84.78', '2346000', '84.7'], 
        ['2012-05-24', '84.96', '85.00', '84.03', '84.98', '2322100', '84.9'], 
        ['2012-05-23', '83.37', '84.88', '82.95', '84.80', '3200000', '84.8'], 
        ['2012-05-22', '84.69', '84.99', '83.68', '84.13', '3000900', '84.1'],
        ['2012-05-21', '83.88', '84.63', '83.75', '84.46', '2450000', '84.4'],
        ['2012-05-18', '84.78', '84.78', '83.27', '83.51', '3602900', '83.5'],
        ['2012-05-17', '85.56', '85.64', '84.25', '84.34', '2777200', '84.3'],
        ['2012-05-16', '85.91', '86.27', '85.26', '85.35', '2770600', '85.3'],
        ['2012-05-15', '85.95', '86.46', '85.50', '85.78', '2611300', '85.1'],
        ['2012-05-14', '85.46', '86.55', '85.24', '85.83', '2631900', '85.2'],
        ['2012-05-11', '86.47', '87.48', '86.24', '86.73', '2601800', '86.1'],
        ['2012-05-10', '87.14', '87.69', '86.88', '87.13', '2828500', '86.5'],
        ['2012-05-09', '86.64', '87.84', '85.98', '87.27', '3192800', '86.6'],
        ['2012-05-08', '87.12', '87.88', '86.30', '87.56', '2710400', '86.9'],
        ['2012-05-07', '87.70', '88.62', '87.70', '88.01', '2753500', '87.4'],
        ['2012-05-04', '89.17', '89.24', '88.30', '88.67', '2823800', '88.0'],
        ['2012-05-03', '89.50', '89.85', '89.11', '89.39', '2343600', '88.7'],
        ['2012-05-02', '89.16', '89.59', '88.89', '89.52', '2100200', '88.9'],
        ['2012-05-01', '89.13', '89.95', '88.74', '89.60', '2294200', '88.9']
      ] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T08:27:33.727

代替：

```
for i in range(1, 31): 
```

和：

```
for d in Data[1:31]: #since you have range(1,31). Do Data[1:] if you just want to skip the first
    OneDate.append(d[0])
    OneClose.append(d[4]) 
```

这通常发生在`Data`数组的索引少于 31 个时。还要确保`d`数组至少有 5 个项目，否则`d[4]`也会抛出类似的错误。采用：

```
if len(d) >= 5:  #check first.
    OneDate.append(d[0])
    OneClose.append(d[4]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:26:55.687

可能会发生两件事`Data[i][4]`：

*   该列表`Data`在 position 没有元素`i`。
*   该列表`Data[i]`在 position 没有元素`4`。

Python 会`IndexError`在这两种情况下引发一个。您是否检查过您的数据是否有效，并且不会发生上述情况？

可能是您的文本文件中缺少数据，`ystockquote.get_historical_prices`并且无法使用预期格式的数据创建列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:00:36.863

的元素之一`Data`少于 5 项。

你的代码有

```
OneDate.append(Data[i][0])
OneClose.append(Data[i][4]) 
```

并且，第二行是例外。`Data`因此，您可以确定在, 在 position中肯定有一个元素`i`。（因为，如果不存在，异常将在第一行本身）。

所以，错误是因为`Data[i]`没有 5 个元素。（例如，如果 Data[i] 是一个字符串，它的字符数少于 5 个）。

您的解决方案可能是`Data[i]`在尝试读取它们之前检查它们的长度并确保它有足够的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-15T11:37:00.403

当代码触发并同时交换数据更新时会发生此错误。换句话说，当数据在恰好 5、10 或 60 分钟收盘时更新每个报价时，实时更新将存在毫秒差距，因此在该毫秒时间范围内列表将为空。并且因此发生此错误。

# php - php代码在html中不起作用

> ID：11500540
> 
> 赞同：0
> 
> 时间：2012-07-16T08:24:36.297
> 
> 标签：php, mysql, html, joomla, virtuemart

我正在尝试显示图像。我已经从数据库存储中获取了我的 URL。我在图像标签中使用了 php 变量。但代码不显示任何图像。

问题是什么？确切地！

这是我下面的代码

```
 <?php $db =& JFactory::getDBO();

            $query88=$sql = "SELECT file_url_thumb FROM fs01_virtuemart_medias WHERE virtuemart_media_id=1 LIMIT 0, 30 ";

            $result88 = mysql_query($query88) or die(mysql_error());

      ?><img src="<?php while($row = mysql_fetch_array($result88)){
            echo $row['file_url_thumb'];
            echo "<br />";
            } ?>" border="0" style="border: 0; vertical-align: top;" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:25:48.690

您正在遍历您的结果并将它们全部放入（每个后跟一个 img 标签的属性`<br />` **内部**`src`。这似乎不太可能不是 404。

您可能想要更多类似的东西：

```
<ul>
  <?php while($row = mysql_fetch_array($result88)){ ?>
    <li><img src="<?php echo htmlspecialchars($row['file_url_thumb']); ?>" /></li>
  <?php } ?>
</ul> 
```

（使用来自外部样式表的一些 CSS 来应用您的演示文稿）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:28:32.217

```
<?php

$db = &JFactory::getDBO();

$query88 = "SELECT file_url_thumb FROM fs01_virtuemart_medias WHERE virtuemart_media_id=1 LIMIT 0, 30 ";

$result88 = mysql_query( $query88 ) or die( mysql_error() );

while( $row = mysql_fetch_array( $result88 ) ) {
    echo '<img src="' . $row[ 'file_url_thumb' ] . '" border="0" style="border: 0; vertical-align: top;" /><br />';
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:29:20.980

用这个

```
 <?php
$db = &JFactory::getDBO();

$query88 = "SELECT file_url_thumb FROM fs01_virtuemart_medias WHERE virtuemart_media_id=1 LIMIT 0, 30 ";

$result88 = mysql_query( $query88 ) or die( mysql_error() );

    while($row = mysql_fetch_array($result88)){ 
                echo '<img src="'.$row['file_url_thumb'].'" style=" border="0" style="border: 0; vertical-align: top;"/>';
                echo '</br>';
                }
                ?> 
```

# ffmpeg - 在没有命令行的情况下使用 libav？

> ID：11500544
> 
> 赞同：3
> 
> 时间：2012-07-16T08:24:48.283
> 
> 标签：ffmpeg, command, libav

我使用下面的这个命令来转换文件

`./avconv -i inputFile -vcodec libx264 -trellis 2 -crf 23 -tune psnr -vf crop='trunc(iw/2)*2:trunc(ih/2)*2' -y outputFile`

但是，我不想使用这个命令，我想做一个像

`convert(char *inputFile, char *outputFile). (The option of my function like option in command line)`

然后我将从我的 main 函数中调用它，例如

```
int main(){ 
    convert(in01, out01); 
    convert(in02, out02); 
    convert(in03, out03); 
    return 0; 
} 
```

我也读过[这篇文章](https://stackoverflow.com/questions/2401764/can-ffmpeg-be-used-as-a-library-instead-of-a-standalone-program)。但我不清楚。
谁能告诉我如何解决这个问题？我用谷歌搜索了很多次，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:40:07.200

假设您使用的是 Linux 操作系统...

您的问题的解决方案更多是关于如何在 C 中执行进程。因此，与 ffmpeg 无关，而是与 Linux C 中的编程有关。

基本上，您需要首先从 C 函数中“分叉”一个进程，然后将分叉的进程与“avconv”交换（执行）并将参数传递给该进程。

[http://www.yolinux.com/TUTORIALS/ForkExecProcesses.html](http://www.yolinux.com/TUTORIALS/ForkExecProcesses.html)

# ms-access - MS Access“ORDER BY”排序算法

> ID：11500546
> 
> 赞同：2
> 
> 时间：2012-07-16T08:24:53.620
> 
> 标签：ms-access, sorting, comparison

好人，

我观察到 MS Access ORDER BY 子句以非 ASCII 方式对记录进行排序。这与 MySQL 不同——它通常是 ASCII 兼容的。让我给你一点背景，让你明白为什么这对我来说是个问题。

早在 2010 年，我就编写了一个通用数据库事务记录器。目标是检测（理论上）任何 SQL 数据库上发生的更改并将它们记录在另一个数据库中。为此，我使用了一个影子 MySQL 数据库，我在其中维护了整个源数据库的副本。影子数据库是使用 EAV 模型设计的，因此它与源数据库模式无关。

每隔一段时间，我都会读取源数据库和影子数据库，根据记录的主键对记录进行排序，并将记录格式化为一一对应。然后，我使用合并算法进行完整的数据库比较。

直到上周，当用户使用不总是字母数字的字符串主键针对 Access 数据库设置它时，此解决方案一直运行良好。突然间，该软件开始记录源数据库上未发生的幽灵事务。

经过仔细检查，我发现 MS Access 以不同于 MySQL 的方式对非字母数字字符进行排序。因此，我的合并算法（假定源记录和影子记录的排序顺序相似）开始失败。

现在，我想出了一种方法，我可以在使用它们之前调整我的软件以“治愈”这些主键，但如果我确切地知道 MS Access 排序方案的性质是什么，这将有很大帮助。任何想法都将受到高度赞赏。

PS：如果有什么需要澄清的，请告诉我。我试图避免输入太多可能无用的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:58:04.050

几年前，我在这方面遇到了困难。很抱歉我没有保留该解决方案，但它使用了 VBA，而且不简洁或优雅。

我将表作为 DAO 记录集打开，在记录中前进，并使用该`strcomp()`功能来比较键。我用二进制/文本选项做了很多实验`strcomp()`，我相信最终有必要插入一个错误处理组件！

这个[讨论](http://www.access-programmers.co.uk/forums/showthread.php?p=1115544)可能是相关的。还有[这个](http://www.bigresource.com/VB-How-to-sort-alphanumeric-field-in-access-database--4V5syuZv4B.html)和[这个](http://www.access-programmers.co.uk/forums/showthread.php?t=120275)。

# iphone - 如何创建音频歌曲的播放列表

> ID：11500559
> 
> 赞同：0
> 
> 时间：2012-07-16T08:25:52.410
> 
> 标签：iphone, objective-c

我正在创建一个下载应用程序，我在应用程序内的不同文件夹中有多个音频文件，我想创建音频歌曲的播放列表。我不知道应该从哪里开始。目前正在使用 avaudio 播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:29:49.763

尝试这个

```
NSArray *array = [[NSMutableArray alloc]init ];
[array insertObject: [[NSString alloc] initWithFormat:[[NSBundle mainBundle] pathForResource:@"firstTrack" ofType:@"mp3"]] atIndex:0];
[array insertObject:[[NSString alloc] initWithFormat: [[NSBundle mainBundle] pathForResource:@"secondTrack" ofType:@"mp3"]] atIndex:1];
[array insertObject:[[NSString alloc] initWithFormat: [[NSBundle mainBundle] pathForResource:@"thirdTrack" ofType:@"mp3"]] atIndex:2];
[array insertObject:[[NSString alloc] initWithFormat: [[NSBundle mainBundle] pathForResource:@"forthTrack" ofType:@"mp3"]] atIndex:3]; 
```

然后在播放器中：

```
 path = [array objectAtIndex:currentTrack]; 
```

或使用这个：

```
path=[[NSBundle mainBundle] pathForResource:@"sounds" ofType:@"plist"];
dict=[NSDictionary dictionaryWithContentsOfFile:path];

animalaudio=[dict valueForKey:@"audio"];
  audiolist=[animalaudio objectAtIndex:currentsound];
NSLog(@"audiolist:%@",audiolist);
url=[NSURL fileURLWithPath:audiolist];
NSLog(@"url:%@",url);
 audioplayer=[[AVAudioPlayer alloc]initWithContentsOfURL:url error:&error];
NSLog(@"audioplayer:%@",audioplayer);
 if( audioplayer == nil ){

    NSLog(@"Failed with reason: %@", [error localizedDescription]);
}
else{
    [audioplayer play];
} 
```

# c# - WinForm 多线程。是否使用 backgroundWorker？

> ID：11500563
> 
> 赞同：11
> 
> 时间：2012-07-16T08:26:27.253
> 
> 标签：c#, winforms, multithreading

我有一个简单的应用程序，可以触发一系列数据密集型任务。我对 WinForms 不是很有经验，我想知道在不锁定界面的情况下最好的方法。backgroundWorker 可以重复使用，还是有其他方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T08:44:40.977

`BackgroundWorker`是一个还包括通知同步的线程。例如，如果您想在扫描完成时更新您的 UI，则常规`Thread`无法访问 UI 对象（只有 UI 线程可以这样做）；因此，`BackgroundWorker`提供了一个 Completed 事件处理程序，该处理程序在操作完成时在 UI 线程上运行。

有关更多信息，请参阅：[演练：使用 BackgroundWorker 组件进行多线程](http://msdn.microsoft.com/en-us/library/ywkkz4s1%28v=vs.110%29.aspx) *(MSDN)*

和一个简单的示例代码：

```
var worker = new System.ComponentModel.BackgroundWorker();
worker.DoWork += (sender,e) => Thread.Sleep(60000);
worker.RunWorkerCompleted += (sender,e) => MessageBox.Show("Hello there!");
worker.RunWorkerAsync(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-16T08:28:18.643

`backgroundWorker` *可以*使用。

它的好处 - 它允许您更新进度条并与 UI 控件交互。( `WorkerReportsProgress`)

它还具有取消机制。( `WorkerSupportsCancellation`)

![在此处输入图像描述](../Images/a35558b9d32a95c593d9821b8e73325f.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-16T09:03:21.943

您可以使用 BackgroundWorker 来满足此类要求。下面是一个示例`updates a label status based on percentage task [long running] completion`。`ProgressChanged`此外，还有一个示例业务类，它设置了一些值，并通过处理程序将值设置回 UI 。`DoWork`是您编写长时间运行的任务逻辑的地方。在 Winforms 应用程序上添加标签和 backgroundworker 组件后复制粘贴下面的代码并试一试。您可以调试各种处理程序`[RunWorkerCompleted, ProgressChanged, DoWork]`并查看`InitWorker`方法。也请注意`cancellation feature`。

```
using System.ComponentModel;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form3 : Form
    {
        private BackgroundWorker _worker;
        BusinessClass _biz = new BusinessClass();
        public Form3()
        {
            InitializeComponent();
            InitWorker();
        }

        private void InitWorker()
        {
            if (_worker != null)
            {
                _worker.Dispose();
            }

            _worker = new BackgroundWorker
            {
                WorkerReportsProgress = true,
                WorkerSupportsCancellation = true
            };
            _worker.DoWork += DoWork;
            _worker.RunWorkerCompleted += RunWorkerCompleted;
            _worker.ProgressChanged += ProgressChanged;
            _worker.RunWorkerAsync();
        }

        void DoWork(object sender, DoWorkEventArgs e)
        {
            int highestPercentageReached = 0;
            if (_worker.CancellationPending)
            {
                e.Cancel = true;
            }
            else
            {
                double i = 0.0d;
                int junk = 0;
                for (i = 0; i <= 199990000; i++)
                {
                    int result = _biz.MyFunction(junk);
                    junk++;

                    // Report progress as a percentage of the total task.
                    var percentComplete = (int)(i / 199990000 * 100);
                    if (percentComplete > highestPercentageReached)
                    {
                        highestPercentageReached = percentComplete;
                        // note I can pass the business class result also and display the same in the LABEL  
                        _worker.ReportProgress(percentComplete, result);
                        _worker.CancelAsync();
                    }
                }

            }
        }

        void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if (e.Cancelled)
            {
                // Display some message to the user that task has been
                // cancelled
            }
            else if (e.Error != null)
            {
                // Do something with the error
            }
        }

        void ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            label1.Text =  string.Format("Result {0}: Percent {1}",e.UserState, e.ProgressPercentage);
        }
    }

    public class BusinessClass
    {
        public int MyFunction(int input)
        {
            return input+10;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-16T08:28:02.367

后台工作人员将是一个不错的选择

有关更多信息，请查看此处 [http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# actionscript-3 - Actionscript-3：使变量保持不变

> ID：11500564
> 
> 赞同：1
> 
> 时间：2012-07-16T08:26:33.487
> 
> 标签：actionscript-3, flash, variables

我正在尝试制作一个游戏，其中一个按钮被点击，一个健康栏的 45 个健康点下降。我有我所有的编码，它运行良好，但我想制作按钮，以便如果健康低于 45，则不会从健康栏中获取任何内容。我尝试使用：

```
if(health < 45) health = health; 
```

但它没有成功。我觉得解决这个问题很容易，但我就是想不通。显然，我对这一切都很陌生，仍然很难理解一些概念。这是我的编码：

```
fortyfivedown_btn.addEventListener(MouseEvent.CLICK, fortyfivedownClick);

    var health:int = 100;

    lifebar.gotoAndStop(101);

    function fortyfivedownClick(event:MouseEvent):void{
        health -= 45;
        if(health < 0) health = 0;
        else if(health > 100) health = 100;

        lifebar.gotoAndStop(health + 1);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:29:40.477

如果健康值小于或等于 45，干脆什么都不做有什么问题吗？例如，像这样：

```
function fortyfivedownClick(event:MouseEvent):void {
    if (health <= 45) {
        return;
    }
    // Perform action
} 
```

如果玩家没有足够的生命值，这将导致函数提前退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:34:23.987

如果我理解这个问题：

```
if(health>=45) // just add this
    lifebar.gotoAndStop(health + 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:34:57.223

实际上它非常简单，您的事件告诉您的健康下降 45，然后检查健康是否低于 0，您只需要在方法开始时检查您有多少健康，如果是则跳出方法45或以下。

不知道“break”是否在 Flash 中有效，但这将是最简单的解决方案

例如：

```
function fortyfivedownClick(event:MouseEvent):void{
    if (health <= 45) {
        break;
    }
    health -= 45;
    if(health < 0) health = 0;
    else if(health > 100) health = 100;
    lifebar.gotoAndStop(health + 1);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T09:19:46.587

使用 Math.max 方法。IT 非常方便的地方，比如价值规范化。

```
function fortyfivedownClick(event:MouseEvent):void{
   health = Math.max( 45, health -= 45 );
} 
```

# xml - 使用 jaxb 解析无效的 xml - 解析器可以更宽松吗？

> ID：11500565
> 
> 赞同：1
> 
> 时间：2012-07-16T08:26:37.263
> 
> 标签：xml, parsing, jaxb

我一直在使用 JAXB 来解析看起来大致如下所示的 xml：

```
<report>    <-- corresponds to a "wrapper" object that holds 
                some properties and two lists - a list of A's and list of B's
    <some tags with> general <info/>
    ...
    <A>   <-- corresponds to an "A" object with some properties
        <some tags with> info related to the <A> tag <bla/>
        ...
    <A/>
    <B>   <-- corresponds to an "B" object with some properties
        <some tags with> info related to the <B> tag <bla/>
        ...
    </B>
</report> 
```

负责编组 xml 的一方很糟糕，但我无法控制。
它经常发送无效的 xml 字符和/或格式错误的 xml。
我与负责方交谈并修复了许多错误，但有些错误似乎无法修复。
我希望我的解析器尽可能宽恕这些错误，并且在不可能的情况下，从包含错误的 xml 中获取尽可能多的信息。
因此，如果 xml 包含 100 个 A 并且一个有问题，我仍然希望能够保留其他 99 个。
这些是我最常见的问题：

```
1\. Some info tag inner value contains invalid chars
    <bla> invalid chars here, either control chars or just &>< </bla>
2\. The root entity is missing a closing tag
    <report> ..... stuff here .... NO </report> at the end!
3\. An inner entity (A/B)  is missing it's closing tag, or it's somehow malformed.
    <A> ...stuff here... <somethingMalformed_blabla_A/>
    OR
    <A> ...  Something malformed here...</A> 
```

我希望我能很好地解释自己。
我真的很想从这些 xml 中获取尽可能多的信息，即使它们有问题。
我想我需要采用一些使用 stax/sax 和 JAXB 的策略，但我不确定如何。
如果在 100 个 A 中，一个 A 有 xml 问题，我不介意只扔掉那个 A。
虽然如果我能得到一个 A 对象，该对象的数据量尽可能多，直到出现错误之前都可以解析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:06:52.613

The philosphy of XML is that creators of XML are responsible for creating well-formed XML, recipients are not responsible for repairing bad XML on arrival. XML parsers are required to reject ill-formed XML. There are other "tidy" tools that may be able to convert bad XML into good XML, but depending on the nature of the flaws in the input, it's unpredictable how well they will work. If you're going to get the benefits of using XML for data interchange, it needs to be well-formed. Otherwise you might just as well use your own proprietary format.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-31T17:34:25.800

This answer really helped me:

[JAXB - unmarshal XML exception](https://stackoverflow.com/questions/8489510/jaxb-unmarshal-xml-exception)

In my case, I'm parsing results from Sysinternals Autoruns tool with the XML switch (-x). Either because the results were being written to a file share or for some buggy reason in the newer version, the XML would be malformed *near the end*. Since this Autoruns capture is critical for malware investigations, I really wanted the data. Plus I could tell from the file size that the results were nearly complete.

The solution in the linked question works really well when you have a document with many sub-elements as suggested by the OP. In particular, the Autoruns XML output is really simple and consists of many "items", each consisting of a many simple elements with text (i.e. String properties as generated by XJC). So if a few items are missed at the end, no big deal... unless of course it's something related to malware. :)

Here's my code:

```
public class Loader {

    private List<Exception> exceptions = new ArrayList<>();

    public synchronized List<Exception> getExceptions() {
        return new ArrayList<>(exceptions);
    }

    protected void setExceptions(List<Exception> exceptions) {
        this.exceptions = exceptions;
    }

    public synchronized Autoruns load(File file, boolean attemptRecovery)
      throws LoaderException {
        Unmarshaller unmarshaller;
        try {
            JAXBContext context = newInstance(Autoruns.class);
            unmarshaller = context.createUnmarshaller();
        } catch (JAXBException ex) {
            throw new LoaderException("Could not create unmarshaller.", ex);
        }
        try {
            return (Autoruns) unmarshaller.unmarshal(file);
        } catch (JAXBException ex) {
            if (!attemptRecovery) {
                throw new LoaderException(ex.getMessage(), ex);
            }
        }
        exceptions.clear();
        Autoruns autoruns = new Autoruns();
        XMLInputFactory inputFactory = XMLInputFactory.newInstance();
        try {
            XMLEventReader eventReader = 
              inputFactory.createXMLEventReader(new FileInputStream(file));
            while (eventReader.hasNext()) {
                XMLEvent event = eventReader.peek();
                if (event.isStartElement()) {
                    StartElement start = event.asStartElement();
                    if (start.getName().getLocalPart().equals("item")) {
                         // note the try should allow processing of elements
                         // after this item in the event it is malformed
                         try {
                            JAXBElement<Autoruns.Item> jax_b = 
                              unmarshaller.unmarshal(eventReader,
                                                     Autoruns.Item.class);
                            autoruns.getItem().add(jax_b.getValue());
                        } catch (JAXBException ex) {
                            exceptions.add(ex);
                        }
                    }
                }
                eventReader.next();
            }
        } catch (XMLStreamException | FileNotFoundException ex) {
            exceptions.add(ex);
        }
        return autoruns;
    }

    public static Autoruns load(Path path) throws JAXBException {
        return load(path.toFile());
    }

    public static Autoruns load(File file) throws JAXBException {
        JAXBContext context = JAXBContext.newInstance(Autoruns.class);
        Unmarshaller unmarshaller = context.createUnmarshaller();
        return (Autoruns) unmarshaller.unmarshal(file);
    }

    public static class LoaderException extends Exception {

        public LoaderException(String message) {
            super(message);
        }

        public LoaderException(String message, Throwable cause) {
            super(message, cause);
        }
    }
} 
```

# c# - 两个同名的泛型方法

> ID：11500569
> 
> 赞同：10
> 
> 时间：2012-07-16T08:26:51.137
> 
> 标签：c#, generics

不可能（除了使用不同的名称）有几个具有相同名称但实现不同接口的泛型方法吗？

```
public IList<T> List<T>() where T : class, IMyInterface1
{

    return mylist
}

public IList<T> List<T>() where T : class, IMyInterface2
{

    return mylist
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T08:29:05.453

不，您不能仅通过泛型类型约束来重载。*您可以通过类型参数的数量*重载，但不能根据它们的约束。

如果你正在*实现*一个接口，你可以使用显式接口实现——否则我建议只使用不同的名称。老实说，我经常发现使用不同的名字会让事情更清楚。

请记住，您给出的示例无论如何都会引入自然歧义 - 如果类型参数实现*了两个*接口，您希望调用什么？

# html - 选择菜单中的按钮重复

> ID：11500573
> 
> 赞同：1
> 
> 时间：2012-07-16T08:27:05.723
> 
> 标签：html, jquery-mobile

我正在尝试用 5 个字段做一个页脚。其中一个是选择按钮，但我不知道为什么我有两个选择按钮！

这是我的代码：

```
<div class="ui-bar ui-grid-c" style="height:30px;width:100%;border-top:solid 2px black;">
    <div class="ui-block-a" style="width:55%;">
        <div class="ui-bar ui-grid-a" style="display:inline;">
            <div class="ui-block-a" style="width:35%;text-align:left;">
                    <label for="mydate" style="margin-top:10px;font-size:10pt;"><b>Compare:</b></label></div>
            <div class="ui-block-b" style="width:65%;text-align:left;margin-top:-10px;"><input name="CompareDate" id="mydate" style="height:35px;" type="date" data-role="datepicker" data-options='{"hideInput": true,"mode": "calbox", "useTodayButton": true}'></div></div></div>
    <div class="ui-block-b" style="width:20%;text-align:left;margin-left:-5px;">
            <select name="select-choice" id="select-choice" data-native-menu="false" data-icon="gear" data-iconpos="notext" >
                <option></option>
                <option value="auto">Auto</option>
                <option value="mix">Mix</option>
                <option value="superpose">Superpose</option>
            </select></div>
    <div class="ui-block-c" style="width:12%;text-align:right;margin-left:2px;"> 
           <a href="#" data-role="button" data-iconpos="notext" data-icon="arrow-l">-12 hours</a></div>
    <div class="ui-block-d" style="width:12%;text-align:left;margin-left:3px;">
           <a href="#" data-role="button" data-iconpos="notext" data-icon="arrow-r">+12 hours</a></div>
</div><!-- Footer --> 
```

答案是这样的： ![在此处输入图像描述](../Images/f3b746bb1c05ca6cdc40732ca4506076.png)

正如你所看到的，我得到一个没有图标的按钮，而另一个右下方带有齿轮图标的按钮。两者都显示相同的选择菜单。

代码在：http: [//jsfiddle.net/a7pBW/6/](http://jsfiddle.net/a7pBW/6/)

任何人都知道为什么会这样？我确定这是一个愚蠢的事情，但我无法看到它！

非常感谢！！

更新：

我发现它与 data-native-menu 选项有关，但我还不知道如何解决它。

我认为这是一个 JQuery 错误，因为当我使用 Fire Bug 运行代码时，我可以看到当您在 HTML 内部放置带有图标的选择时，我可以找到对按钮的两个引用，这就是它重复的原因。我仍然不知道如何解决它，我刚刚将两者定位在相同的确切位置，所以你看不到有两个按钮而不是一个，但我会继续工作，因为这不是一个好方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:28:44.670

这个问题是一个CSS问题。在按钮背景图像 css 中使用 no-repeat 选项。

# xml - Zend：从 Iphone 获取以 xml 形式发布的数据

> ID：11500581
> 
> 赞同：0
> 
> 时间：2012-07-16T08:27:39.407
> 
> 标签：xml, zend-framework, xml-parsing, xmlhttprequest

我不太喜欢移动/iPhone 开发。那么我如何从手机获取 xml 数据以及如何访问数据？

这是从移动设备发送xml数据的方式吗？

```
data = "some xml data goes in here". 
```

因此，由于它是一个帖子，我必须按照@drew010 在评论中的建议获得帖子：

```
$this->getRequest->getParam('data') 
```

因此，如果这是正确的，Zend 库是否需要访问 XML 数据。

我在这里查看了一些关于 Zend_XmlRpc 库的问题，我不明白如何在我的上下文中使用这些问题。

任何人都可以建议它是如何完成的或指向我一些链接吗？

谢谢。

# visual-studio-2010 - 为多个 Windows 版本（xp、win7、vista）开发驱动程序

> ID：11500583
> 
> 赞同：-1
> 
> 时间：2012-07-16T08:27:45.317
> 
> 标签：visual-studio-2010, driver, 32bit-64bit, wdk

我们正在开发一个 DLL，它从 WinDDK 调用通用 WinUsb 函数。此 DLL 需要在 32 位和 64 位版本的 Windows 中工作，包括 xp、vista、win7，可能还有 win8。

我的问题是，我们如何通过针对所有这些平台来管理 Visual Studio 2010 解决方案？WinDDK 库对于每个操作系统都是不同的，所以如果我从代码中引用一个库：

```
#### #pragma comment (lib , "C:\\WinDDK\\7600.16385.1\\lib\\wlh\\i386\\winmm.lib" ) 
```

或者通过从 中引用库`project options->includes section`，这个项目只对特定的目标架构变得正确。（在本例中，Vista 32 位，因为我包括了 'wlh'）。

我们是否应该为每个不同的操作系统目标创建不同的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:57:29.297

*我认为您应该通过DDK*构建 DLL并在您的 VS 项目中使用它。

您可以为您的 VS 项目编写预构建事件来运行一个批处理文件，该批处理文件将构建 DLL 并将其放在项目的某个知名位置。

此外，您可能必须为要构建的每个平台创建不同的项目配置（至少对于 32 位和 64 位不同）并为 DLL 运行适当的构建命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:24:38.713

WDK/DDK 版本不限制您构建的操作系统版本。您可以将目标操作系统作为构建环境/编译参数传递。

# c# - 现场显示数据库连接

> ID：11500584
> 
> 赞同：0
> 
> 时间：2012-07-16T08:27:46.420
> 
> 标签：c#, asp.net, sql-server-2008

只是想知道是否有人知道如何在页面上显示数据库连接的状态。

我想知道是否有良好的连接，或者它是否已关闭。在这种情况下，我也会显示原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:38:47.627

在使用 asp.net 处理数据库时，您的连接不应该一直打开。牢记这一点，您不必（也不应该）一直显示数据库的连接状态。您应该做的是在使用 ado.net 或其他 OR/M 执行查询时捕获 SqlException[并向](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.aspx)您的用户提供有意义的错误。

来自 msdn 文章：

```
try {
   // code here
}
catch (SqlException odbcEx) {
   // Handle more specific SqlException exception here.
}
catch (Exception ex) {
   // Handle generic ones here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:29:22.150

只需捕获数据库异常，因为一旦没有连接就会触发异常/错误。

如果有联系，你会知道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:41:33.973

理想情况下，向用户介绍数据库并不是一个好习惯。任何数据库错误都应该被记录并替换为更用户友好的错误消息。

如果您仍需要在屏幕上显示连接状态，您可以处理 SQLConnection 的 StateChange 事件并显示相应的消息。

更新：我建议您只记录错误并有一个程序向您发送失败的电子邮件或手动查看系统，而不是用户告诉您您的数据库已关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T08:45:18.650

检查连接状态的方法有很多，您可以使用 ASP.Net Timer 定期检查连接，（[请记住](http://msdn.microsoft.com/en-us/library/bb386404.aspx)，每个计时器间隔都会导致回发到服务器并导致网络流量），请参阅[演练：使用 ASP。具有多个 UpdatePanel 控件的 NET 计时器控件](http://msdn.microsoft.com/en-us/library/bb386404.aspx)

在这种情况`Timer_Tick`下，您可以检查连接并在标签中发布消息。以下几行的内容...

```
protected void Timer1_Tick(object sender, EventArgs e)
{
   try
       {
        using (SqlConnection sqlConn =
            new SqlConnection("YourConnectionString"))
            {
                sqlConn.Open();
                Label1.Text = "Database Available";

            }
        }
    catch (Exception ex)
        {
                Label1.Text = "Database Un-Available, " + "Possible Reason:"+ ex.Message;
        }
    } 
```

捕获泛型异常 () 不是一个好习惯`Exception`，您可能会捕获 SQLException，然后使用另一个块来处理泛型异常。

# html - 我可以在带有溢出-y的div中使用高度百分比：滚动吗？

> ID：11500585
> 
> 赞同：0
> 
> 时间：2012-07-16T08:27:46.770
> 
> 标签：html, css

我可以在带有溢出-y的div中使用高度百分比：滚动吗？标记：

```
<div id="container">
<div class="messages_container">
<ol class="messages">
<li>sample message here</li>
<li>sample message here</li>
<li>sample message here</li>
</ol>
</div>
<div class="reply">
<form>
<fieldset>
<textarea cols="60" rows="1" name="message"></textarea>
<input type="checkbox" checked="checked">
<input type="submit" value="Submit"/>
</fieldset>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:29:36.707

据我所知，你不能。

尝试用 JS 做这件事，应该比用 CSS 更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-16T14:28:35.557

而不是使用百分比，而是使用这个[stackoverflow线程](https://stackoverflow.com/questions/30141991/why-does-the-overflow-y-property-not-work-with-percent-height)中解释的视口高度（vh），我还做了一个[jsfiddle](https://jsfiddle.net/headwinds/q5j9x0k4/)来自己看看

所以而不是：

```
display: block;
width: 100%    
height: 50%;
overflow: hidden;
overflow-y: auto; 
```

利用：

```
display: block;
width: 100vh;    
height: 50vh;
overflow: hidden;
overflow-y: auto; 
```

# grails - grails 资源插件可在本地工作，但不能在服务器上工作

> ID：11500593
> 
> 赞同：3
> 
> 时间：2012-07-16T08:28:17.483
> 
> 标签：grails

我在我的项目中使用**grails 资源插件。**我所有的静态应用程序都存储在那里并被检索。但是，当我在本地运行时它可以工作，但是当我在服务器上执行相同操作时，静态内容仅从服务器而不是缓存中检索。我正在使用***Tomcat 服务器***。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:16:59.823

尝试安装缓存资源插件： http: [//grails.org/plugin/cached-resources](http://grails.org/plugin/cached-resources)

# google-apps-script - 如何在 Google 文档中复制行范围？

> ID：11500600
> 
> 赞同：0
> 
> 时间：2012-07-16T08:28:36.553
> 
> 标签：google-apps-script, google-sheets

我有一个电子表格，比如 Google Docs 上的 excel。我同时使用 Mozilla Firefox 和 Google Chrome，无论哪个有效。几乎我所有的列都有下拉列表验证（你知道，每个单元格都有一个下拉列表可供选择，我希望我说清楚了）。我在第一次创建电子表格时对它们进行了排列，对我创建的范围内的所有列进行了验证。我的问题是，每当我添加新行时，该行都没有任何验证，所有验证都消失了。旧行仍然有验证。

因此，每次添加新行时，我都会设置验证。这令人沮丧。有的人也有同样的问题，在网上问了，没有人回答。

当我复制带有验证的空行并将其粘贴到新行时，它工作正常。所以，我的意思是，你能帮我写一个脚本吗？就像我执行脚本时复制 5 行一样？

我正在尝试研究脚本，但到目前为止我什么也没做。我认为

```
var actSc = SpreadsheetApp.getActiveSpreadsheet();
var range = actSc.getRange("A1:B1"); 
```

这就是我从我看到的例子中得到的。我是认真的。我什么都没有。如果这复制了一个单元格的范围，那么我想我应该为我的所有列都这样做。但是如何将它们放在新行中？有没有类似 setRange 的东西？我真的可以使用一些帮助。这让我发疯，我真的不明白这个脚本的东西。

我所说的范围是指我有像“STATES”这样的范围，它包括“NY、LA、CA”等。这个 NY、LA、CA 填充了该 STATES 列的单元格中的下拉列表。我希望这个 getRange 意味着这个范围。

对不起我的英语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-14T04:41:41.703

如果我理解正确，您想要编写一个函数，该函数将向工作表添加新行并维护列的现有验证。这当然是可能的，也不是太难。一种方法可能是“刷新验证”功能，如果您想在其他工作表中重用它，它可以一次更新整个工作表。不过，首先，听起来您可以简要概述一下您需要了解的对象类来执行基本的 Google Apps 脚本：

*   [SpreadsheetApp](https://developers.google.com/apps-script/reference/spreadsheet/spreadsheet-app) - 将此类视为电子表格服务的基础。它提供了与特定电子表格本身无关的文件 I/O 和功能，例如 UI 和数据验证集的创建。它是您所有个人电子表格文档的界面。
*   [电子表格](https://developers.google.com/apps-script/reference/spreadsheet/spreadsheet)- 电子表格文档文件，可以包含多个工作表。这是您在云端硬盘中创建新的 Google 表格文档时创建的内容。提供文档级功能，例如管理所有权、设置权限、访问元数据等的能力。与 Sheet 类有一些重叠，所以这个看起来有点混搭。
*   [工作表](https://developers.google.com/apps-script/reference/spreadsheet/sheet)- 单个工作表是您通常认为的电子表格：一组行和列。每个电子表格文档可以包含许多不同的表格。Sheet 类允许您修改工作表的整体外观。您可以冻结或隐藏行，保护单元格范围不被编辑，添加/删除行和列等。您还可以获取有关工作表的数据，例如具有内容的最后一行或整个工作表的最大范围。
*   [Range](https://developers.google.com/apps-script/reference/spreadsheet/range) - 下拉到另一个级别，我们到达 Range 对象，它代表某个矩形的单元格区域。这可以像单个单元格一样小，也可以像整个工作表一样大。然而，范围似乎不可能代表不连续的单元格。这是您遇到麻烦的地方，因为您将 Range 对象视为可以复制并粘贴到工作表中的内容，这是可以理解的。但是 Range 不是它所代表的单元格中的数据。它只是这些单元格的接口。如果要访问数据本身，则必须下拉到层次结构的底层：
*   值 - 工作表的实际内容是普通的 JavaScript 值：字符串、整数、布尔值等，您可以使用 Google Apps 脚本支持的 JavaScript 子集对其进行操作。

为了对工作表中的值进行处理，首先从工作表中获取 Range 对象（从 SpreadsheetApp 中获取），然后从 Range 中获取值：

```
var values = SpreadsheetApp.getActiveSheet().getRange("A1:B1").getValues(); // returns [[]] 
```

请注意，getValues() 返回一个多维数组。作为工作表中值的表示，它看起来像这样：

```
// row 1 [[column A, column B, column C, column D, ...],
// row 2 [column A, column B, column C, column D, ...],
// row 3 [column A, column B, column C, column D, ...],
// row 4 [column A, column B, column C, column D, ...],
// row 5 [column A, column B, column C, column D, ...], ...] 
```

因此，如果范围 A1:B1 是一行两列的范围，您可以使用 A1 表示法或通过指定范围的左上角行和列，以及您想要的行数和列数来检索值取回：

```
var sheet = SpreadsheetApp.getActiveSheet();
var range = sheet.getRange("A1:B1");
var range = sheet.getRange(1, 1, 1, 2); // row 1, column 1, 1 row, 2 columns
var values = range.getValues(); // returns [[50, 100]] 
```

如果 A1 中的值为 50，而 B1 中的值为 100，则上面的最后一个函数将返回`[[50, 100]]`。您也可以直接访问单个单元格值：

```
var range = sheet.getRange("A1");
var value = range.getValue(); // returns 50
var cell = range.getCell().getValues(); // returns [[50]] 
```

显然，您也可以设置范围的值：

```
var range = sheet.getRange("A1:B2");
range.setValues([[50, 100]]);
range = sheet.getRange(1, 1); // same as sheet.getCell(1, 1)
range.setValue(50); // the value of A1, or row 1 column 1, is now 50 
```

下一步是弄清楚[数据验证](https://developers.google.com/apps-script/reference/spreadsheet/data-validation)类是如何工作的。[您可以使用Data Validation Builder](https://developers.google.com/apps-script/reference/spreadsheet/data-validation-builder)创建一个 Data Validation 对象，它允许您将一系列规则链接在一起以应用于一个范围。然后将范围设置为该数据验证规则集：

```
var stateList = ["AK", "AL", "AR", ...];
var rules = SpreadsheetApp.newDataValidation() // create a new Data Validation Builder object and use method chaining to add rules to it
        .requireValueInList(stateList, true) // first param is the list of values to require, second is true if you want to display a drop down menu, false otherwise
        .setAllowInvalid(false) // true if other values are allowed, false otherwise
        .setHelpText("Enter a state") // help text when user hovers over the cell
        .build();
range.setDataValidation(rules); // apply the rules to a range 
```

现在您可以插入行，规则应自动复制到其中：

```
var lastRow = sheet.getLastRow(); // get the last row that contains any content
sheet.insertRowAfter(lastRow); 
```

或者复制规则并在其他地方使用它们：

```
var cell = sheet.getRange(1, 1, 1, 1);
var rule = sheet.getDataValidation(); // returns rule
var range = sheet.getRange("A1:B1");
var rules = range.getDataValidations(); // returns [[rules, rules]]
var lastRow = sheet.getLastRow(); // or sheet.getMaxRows()
range.setDataValidations(rules); 
```

因此，您可以非常轻松地将这些概念组合在一起，以编写添加行、构建验证规则集以及向新的单元格范围添加验证所需的任何类型的函数。您可以比我在这里更简洁地完成大多数这些事情，但听起来您正在寻找更深入的解释。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:14:31.037

```
 var sheetToUpdate = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();  
    sheetToUpdate.insertRowAfter(sheetToUpdate.getLastRow());

   var rangeToUpdate = sheetToUpdate.getRange(sheetToUpdate.getLastRow()+1,1,1,sheetToUpdate.getMaxColumns());
   sheetToUpdate.getRange(sheetToUpdate.getLastRow(),1,1,sheetToUpdate.getMaxColumns()).copyTo(rangeToUpdate, {formatOnly:true}); 
```

# mysql - 为什么增加 innodb_buffer_pool_size 会减慢选择速度？

> ID：11500615
> 
> 赞同：0
> 
> 时间：2012-07-16T08:29:42.417
> 
> 标签：mysql, innodb

我有一个32G的服务器，一个20G的数据库。我以 10G 的 innodb_buffer_pool_size 运行 MySQL，试图提高性能，将值增加到 20G 只会减慢选择查询的速度。谁能解释我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:43:06.343

1.  尝试[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.0/en/explain.html)了解查询速度慢的原因。

2.  试着[`SHOW ENGINE INNODB STATUS`](http://dev.mysql.com/doc/refman/5.0/en/innodb-monitors.html)看看缓冲池是如何使用的以及你的 InnoDB 引擎在做什么。

3.  这里可能还有很多其他因素在起作用。增加`buffer_pool_size`您可能会超出物理 RAM（根据其他配置选项），然后进入磁盘上的虚拟内存......并且磁盘操作总是很慢......

# android - 如何在 Android 中获取 Twitter 用户的最新推文

> ID：11500617
> 
> 赞同：0
> 
> 时间：2012-07-16T08:29:46.360
> 
> 标签：android, twitter

我正在开发一个小型应用程序，给定用户名，它会获取用户的推文。它应该定期检查新推文。问题是如何检测新推文？

我使用通过在链接上发送获取请求来获取推文提要的简单方法

> [http://twitter.com/statuses/user_timeline/userName.json](http://twitter.com/statuses/user_timeline/userName.json) "。

没有身份验证，没有登录，没有硬的东西（如果这种方法有一些缺点，我也需要你的评论）

然后，我解析输出 JSON 对象并获取推文。

为了检查新推文，我正在考虑将我收到的最后一条推文的日期与推文提要（例如 5 条推文）进行比较，直到我到达某个日期小于或等于我拥有的最后一条推文的日期。

所以简而言之，我的问题是：

我用来获取推文的方法是一个好的解决方案还是有问题？有没有比我建议的更好的方法来获取新推文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:47:50.110

有更好的方法。看看[文档](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)。

你想用

```
since_id 
```

这将使所有推文都比您检索到的推文更新。

所以，这个电话得到了我所有的推文：

```
https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=edent 
```

我最近的推文 ID 为“224794768041984001”

所以，要在那之后得到所有的，你打这个电话：

```
https://api.twitter.com/1/statuses/user_timeline.json?since_id=224794768041984001&include_entities=true&include_rts=true&screen_name=edent 
```

# scala - 从期货链初始化的值

> ID：11500620
> 
> 赞同：4
> 
> 时间：2012-07-16T08:29:56.487
> 
> 标签：scala, future

考虑以下代码片段：

```
class MyClass {
  var a = _
  var b = _
  ...
  var y = _

  val z = (for {
    a0 <- someMethodReturningFuture
    b0 <- someMethodReturningFuture(a0)
    ...
    z0 <- someMethodReturningFuture(y0)
  } yield {
    a = a0
    b = b0
    ...
    y = y0
    someCalculation(y)
  }).result
} 
```

是否可以执行这样的初始化但使用`val`s 而不是`var`s (不知何故)？关键是，我不想阻塞并等待每个中间结果，只等待最后一个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T08:46:06.073

除非您有超过 22 个变量：

```
val (a, b, c, d, ..., v) = (for {
  a0 <- someMethodReturningFuture
  b0 <- someMethodReturningFuture(a0)
  ...
  u0 <- someMethodReturningFuture(t0)
} yield {
  (a0, b0, ..., u0, someCalculation(u0))
}).result 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T11:11:52.197

`result`您可以通过使用`lazy`values来延迟评估吗？就像是：

```
class MyClass {

  lazy val a = myFutures.a.result
  lazy val b = myFutures.b.result

  private val myFutures = new AnyRef {
    val a = someMethodReturningFuture
    val b = a.map( a0 => someMethodReturningFuture(a0) )
  }

} 
```

所有期货都是在初始化时创建的，没有阻塞，但是当你第一次真正尝试使用结果时，你会阻塞。

# php - 正则表达式从字符串中查找名称和 ID，如 [thename id=432]

> ID：11500626
> 
> 赞同：0
> 
> 时间：2012-07-16T08:30:21.683
> 
> 标签：php, regex

我需要一个正则表达式，它可以从某个字符串中找到括号并从中提取 id 的值。例如：

```
$string = "Hey how are you, this is [ads id=432] going to be fun!"; 
```

我需要 name like`ads`和 id like `432`。

以及如何用其他值替换这些括号，例如`$ads = "ads here";`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:33:28.900

```
$regexp = "#\[(?<name>[^\]]+) id=(?<id>[0-9]+)\]#"; 
```

**例子**

```
<?php
   $regexp = "#\[(?<name>[^\]]+) id=(?<id>[0-9]+)\]#";
   $string = "Hey how are you, this is [ads id=432] going to be fun!";
   preg_match($regexp, $string, $match);
   print_r($match);
?>

Array
(
    [0] => [ads id=432]
    [name] => ads
    [1] => ads
    [id] => 432
    [2] => 432
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:32:47.163

`(?<=\[ads\s+id=)(\d+?)(?=\])` 如果您需要类似广告的想法，请使用此正则表达式将此``(?<=\[)(\w+)\s+id=(\d+?)(?=\])`名称和值用于正则表达式组

# c# - 如何使用 ASP.NET 从另一个程序集中呈现 HTML 页面？

> ID：11500627
> 
> 赞同：0
> 
> 时间：2012-07-16T08:30:24.747
> 
> 标签：c#, asp.net, html, render

我正在运行可执行应用程序（`WinForms`一个），并且我需要渲染几个 HTML 页面（一种“活动” - 它使用模型并生成整个页面的 HTML 代码）。

我正在寻找引用 MVC 或 ASP.NET 项目。使用这些（或者可能是其他工具；如果是，它们是什么？）项目从模型渲染原始 HTML 代码的最佳方式是什么`View Page`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:39:58.583

See the following SO question about hosting ASP.Net in WinForms projects - its entirely doable!

[Hosting ASP.NET within my application](https://stackoverflow.com/questions/1365344/hosting-asp-net-within-my-application)

In reply to AgentFires comment about doing it without a http host involved (which Im assuming he means a web server), try these two articles from Rick Strahl about hosting the ASP.Net runtime directly.

[http://www.west-wind.com/presentations/aspnetruntime/aspnetruntime.asp](http://www.west-wind.com/presentations/aspnetruntime/aspnetruntime.asp)

[http://www.west-wind.com/weblog/posts/2005/Jul/20/AspNET-Runtime-Hosting-Update](http://www.west-wind.com/weblog/posts/2005/Jul/20/AspNET-Runtime-Hosting-Update)

They are fairly old, but they should get you started.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:37:39.850

如果您得到一个 html 字符串，那么您可以将该 html 代码注入到浏览器控件中

# jquery - jQuery淡出替换悬停时的两个图像

> ID：11500632
> 
> 赞同：0
> 
> 时间：2012-07-16T08:31:00.113
> 
> 标签：jquery, replace, hover, fade

我的脚本有问题。

我有 ID 为“web_click”的对象和 ID 为“web”的图像。我想当我悬停（或鼠标悬停）图像“web”源中的“web_click”时，将使用淡入淡出效果从“web.png”替换为“web_hover.png”（这些图像具有相同的尺寸）。当然，在“mouseout”或完成悬停源必须用淡入淡出替换为非悬停图像。

但是现在这个脚本在悬停到'web_hover.png'并消失（两个图像都没有显示）并且当我将光标从“web_click”图像移出时返回到'web.png'并具有淡入淡出效果。为什么我悬停时它会隐藏？

```
$(document).ready(function(){
$("#web_click").hover(function() {
$('#web').fadeOut();
    $("#web").attr ("src","png/two/web_hover.png");
        }, function() {
            $('#web').fadeIn();
    $("#web").attr ("src","png/two/web.png");
});

}); 
```

更新：我做了这个方法并且淡入淡出工作但是图像之间的延迟。第一个图像淡出，这里有一点停顿，两个图像都没有显示，第二个图像淡入。我怎样才能做到这一点没有这些之间的中断？

```
<script>
$(document).ready(function(){
    $("#web_click").mouseover(function() {
        $("#web").fadeOut('100', function(){
            $("#web").attr ("src","png/two/web_hover.png"); 
            $('#web').fadeIn('100');    
    });
    });
$("#web_click").mouseout(function() {
    $("#web").fadeOut('100', function(){
        $("#web").attr ("src","png/two/web.png");
        $('#web').fadeIn('100');
    });
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:49:01.517

尝试这个

```
 <style type="text/css">
        img
        {
            position:absolute;
        }
    </style>
    <div id="web_click">
        <img src="png/two/web_hover.png" alt="Alternate Text" />
        <img style="display:none" src="png/two/web.png" alt="Alternate Text" />
    </div>

    <script type="text/javascript">
        $("#web_click").hover(function () {
            $('#web_click img').fadeToggle()
        }, function () {
            $('#web_click img').fadeToggle()
        });
    </script> 
```

img 的样式用于将两个图像放在同一个位置

# facebook - FB.Canvas.setSize() 不起作用

> ID：11500633
> 
> 赞同：0
> 
> 时间：2012-07-16T08:31:02.097
> 
> 标签：facebook, resize

调整应用程序框架的大小对我不起作用。

这是我的一段代码：

```
 window.fbAsyncInit = function() {
  FB.init({
    appId      : xxx
    channelUrl : '//channel.html',
    status     : true,
    cookie     : true,
    xfbml      : true
  });

  FB.Canvas.setSize({height: 8000});
 } 
```

不幸的是， setSize 什么都不做。我的画布仍然有一个初始高度。在应用程序设置中，我有：画布高度：固定为 800 像素。

# html - dt 标签在 IE 7 中相互浮动

> ID：11500635
> 
> 赞同：0
> 
> 时间：2012-07-16T08:31:11.527
> 
> 标签：html, css, internet-explorer-7

我在 IE 7 页面上的另一个标签上浮动了 dt 标签，有谁知道如何解决这个问题-

这是屏幕截图：![IE 7 中的错误屏幕](../Images/417400c831c6cc45feb1e8f9f0ea4fbc.png)

这是一些示例代码的小提琴：[小提琴](http://jsfiddle.net/Trcbc/)，我必须补充一点，这只是常见问题代码的一部分，而不是完整的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:35:13.223

嗨，现在您可以像这样定义您的 dd 显示块

```
dd{
display:block;
} 
```

现场演示[http://jsfiddle.net/Trcbc/1/](http://jsfiddle.net/Trcbc/1/)

* * *

更新

```
#faq dt { 
display:inline-block;  //remove this
display: block;  // add this 
*display: inline;   //remove this 
*zoom: 1; //remove this
 } 
```

现场演示[http://jsfiddle.net/S7mb9/3/](http://jsfiddle.net/S7mb9/3/)

# delphi - Delphi Form 使用 Timer 通过标题栏上的关闭按钮关闭

> ID：11500636
> 
> 赞同：0
> 
> 时间：2012-07-16T08:31:22.827
> 
> 标签：delphi, delphi-xe2

我有一个带有一个 FadeIn Timer 和一个 FadeOut Timer 的项目。我的表单由 FadeIn Timer 创建并由 FadeOut Timer 关闭。最初启用 FadeIn Timer 并禁用 FadeOut Timer。淡入定时器代码：

```
if MainForm.AlphaBlendValue >= 235 then
  Timer01.Enabled := false 
else 
  MainForm.AlphaBlendValue := MainForm.AlphaBlendValue + 5; 
```

淡出定时器代码：

```
if MainForm.AlphaBlendValue <= 0 then 
  Timer02.Enabled := false 
else 
  MainForm.AlphaBlendValue := MainForm.AlphaBlendValue - 5; 
close; 
```

我的要求是，如果我单击标题栏的“X”按钮，淡出计时器将处于活动状态。所以我定义

```
if Msg.Result=htClose then 
  FadeOutTimer.Enabled:=true; 
```

但它不起作用。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T20:17:42.560

如果表单立即关闭，那么您需要一个全局表单变量，就像`FAllowClose`您`False`在创建表单时设置的那样。然后你需要为`Form.CloseQuery`事件编写代码。像这样简单的东西应该可以工作：

```
procedure Form.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
begin
  if FAllowClose then
    Exit;

  CanClose := False;
  FadeOut.Enabled := True;
end;

procedure Form.FadeOutOnTimer(Sender: TObject);
begin
  // do fade out
  FAllowClose := True;
  Self.Close
end; 
```

<<< 2012/07/17 编辑 >>>

当用户单击表单上的“X”按钮时，阻止表单关闭的唯一方法是在`OnCloseQuery`事件中取消它。然后，当您完成淡出表单时，关闭表单。您将需要一个全局变量`FAllowClose`来`OnCloseQuery`表示*您*正在关闭表单而不是用户的事件。这段代码更具说明性，应该处理用户在“X”淡出时再次单击它的情况。

```
interface

  type TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
    procedure FormCloseQuery(Sender: TObject; var CanClose: Boolean);
    procedure FadeOutTimer(Sender: TObject);
  private
    FAllowClose: Boolean;
  public
  end;

implementation

  procedure TForm1.FormCreate(Sender: TObject);
  begin
    FAllowClose := False;
  end;

  procedure TForm1.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
  begin
    if FAllowClose then // <- is 'False' when user clicks "X"
      Exit;

    CanClose := False; // <- cancels close when user clicks "X"
    FadeOut.Enabled := True;
  end;

  procedure TForm1.FadeOutTimer(Sender: TObject);
  begin
    if Form1.AlphaBlendValue > 0 then
      Form1.AlphaBlendValue := Form1.AlphaBlendValue - 5
    else
    begin
      FadeOut.Enabled := False;
      FAllowClose := True;
      Self.Close;
    end;
  end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:18:40.167

[我认为这是James L 答案](https://stackoverflow.com/questions/11500636/delphi-form-closing-by-close-button-on-caption-bar-using-timer/11511886#11511886)的正确淡出代码：

```
procedure Form.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
begin
  if FAllowClose then
  begin
    CanClose := True;
    Exit;
  end;

  CanClose := False;
  FadeOut.Enabled := True;
end;

procedure Form.FadeOutOnTimer(Sender: TObject);
begin
  if MainForm.AlphaBlendValue <= 0 then
  begin
    FadeOut.Enabled := false 
    FAllowClose := True;
    Self.Close
  end
  else 
    MainForm.AlphaBlendValue := MainForm.AlphaBlendValue - 5; 
end; 
```

# .net - vb.net中的cmd按钮数组

> ID：11500640
> 
> 赞同：0
> 
> 时间：2012-07-16T08:31:41.657
> 
> 标签：.net, arrays, vb.net, button, handler

这是我在 vb 中的代码，我想将其转换为 vb.net...即我想要三个 > 按钮在我单击它们时以相同的形式访问它们上的相同代码

```
Private Sub cmdButton_Click(Index As Integer)
    Dim iAnswer As Long
    Dim Ret As Long
    Dim WrongAnswer(70000) As Long
    Dim rss As ADODB.Recordset
    Dim oDatabase As ADODB.Connection : oDatabase = New ADODB.Connection
    Dim oRs As ADODB.Recordset
    Dim oQuestion As mcQuestion

    If oQuestions(CLng(lblQuestion.Tag)).Multiple Then
        If chkAnswer(1).Value Then iAnswer = iAnswer Or 1
        If chkAnswer(2).Value Then iAnswer = iAnswer Or 2
        If chkAnswer(4).Value Then iAnswer = iAnswer Or 4
        If chkAnswer(8).Value Then iAnswer = iAnswer Or 8
        If chkAnswer(16).Value Then iAnswer = iAnswer Or 16
    Else
        If optAnswer(1).Value Then iAnswer = 1
        If optAnswer(2).Value Then iAnswer = 2
        If optAnswer(4).Value Then iAnswer = 4
        If optAnswer(8).Value Then iAnswer = 8
        If optAnswer(16).Value Then iAnswer = 16
    End If

    oQuestions(CLng(lblQuestion.Tag)).UserAnswer = iAnswer

    Ret = GetQuestion(Index) ' Index is 0 or 1 - (cmdButton_Click(0) or        cmdButton_Click(1))

    If Ret > 0 Then
        ShowQuestion(Ret) 'Ret = Question number
        If Index = 1 Then
            If oQuestions(CLng(lblQuestion.Tag)).Index = 1 Then ' Previous
                cmdButton(1).Enabled = False
            Else
                cmdButton(1).Enabled = True
            End If
            cmdButton(0).Enabled = True
            cmdButton(2).Visible = False
        Else
            If oQuestions(CLng(lblQuestion.Tag)).Index = oQuestions.Count Then   ' Next
                'Last question
                cmdButton(0).Enabled = False
                cmdButton(2).Visible = True
            Else
                cmdButton(0).Enabled = True
                cmdButton(2).Visible = False
            End If
            cmdButton(1).Enabled = True
        End If
    End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:41:41.567

I'd suggest having a look at a few tutorials on creating Buttons in VB.net. Here are 2 great links:

*   [Add a Button to your VB .NET Forms](http://www.homeandlearn.co.uk/net/nets1p11.html)
*   [All you need to know about the button control.](http://www.dreamincode.net/forums/topic/39912-all-you-need-to-know-about-the-button-control/)

to add a click method for the Button:

```
Private Sub btn1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn1.Click
    //do something when clicked
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:49:35.760

在 VB.NET 中，您可以修改`Handles`语句，以便一个事件处理程序处理多个按钮单击：

```
Private Sub Button_Click(sender As System.Object, e As System.EventArgs) _
    Handles Button22.Click, Button23.Click, Button24.Click

    If CType(sender, Button).Text = "Button22" Then
        'button 22 was clicked
    ElseIf CType(sender, Button).Text = "Button23" Then
        'button 23 was clicked
    ElseIf CType(sender, Button).Text = "Button24" Then
        'button 24 was clicked
    End If

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-11T05:20:08.900

正如@Matt Wilko 建议的那样，您可以使用一个过程处理多个按钮的按钮单击事件。如果您真的想引用按钮索引，可以将以下内容添加到表单级别：

```
Private _myButtons() As Button = New Button() {Button1, Button2, Button3} 
```

您的按钮单击事件过程可能如下所示：

```
Private Sub Button_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click, Button2.Click, Button3.Click

Dim sButtonName As String = CType(sender, Button).Name
Dim iButtonIndex As Integer 
Dim Ret As Long 

For i As Integer = 0 to _myButtons.GetUpperBound(0) 
    If _myButtons(i).Name = sButtonName Then 
        iButtonIndex = i
        Exit For
    End If
Next i

Ret = GetQuestion(iButtonIndex)

'Etc, etc...

End Sub 
```

# spring - Spring 安全性与 Apache Shiro

> ID：11500646
> 
> 赞同：47
> 
> 时间：2012-07-16T08:32:16.563
> 
> 标签：spring, apache, security, spring-security, shiro

到目前为止，我所研究的大多数人都说 Apache Shiro 易于使用且易于与 CAS 集成（用于 SSO 等）。只是想问是否有人有使用它们的经验以及使用哪一个以及为什么一个比另一个更好？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-24T18:37:48.177

许多 Shiro 开发人员在他们的应用程序中使用 Spring，因此 Shiro 在 Spring 环境中运行良好。到目前为止，我们收到的一般反馈是 Shiro 也比 Spring Security 更容易理解（对于大多数人来说）。

但是，如果您想要跨任何 Web 容器的完整 Session 集群支持，那么只有 Shiro 可以轻松支持。Shiro 的加密也非常简单/易于使用。

选择最适合您的心理模型的 - 两者都可以在 Spring 环境中很好地工作。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-07-16T08:40:13.107

我最近不得不评估 shiro 和 spring 安全性。我们使用了 spring security（事实上，我们扩展了 spring security 以更好地使用 shiro 权限字符串 - 在注释上使用实例变量）。

**春季安全**

*   正在积极开发中。
*   有更多的社区支持。
*   [Spring security 具有扩展，为Oauth](https://github.com/spring-projects/spring-security-oauth)和[kerberos](http://docs.spring.io/spring-security/site/extensions.html) 和[SAML](http://docs.spring.io/spring-security/site/extensions.html)提供支持。

**四郎**

*   不支持 saml 或 Oauth。
*   没有提及在安全策略之前和之后的支持。
*   积极发展似乎有限，网站仍然 [包含错误信息](http://shiro-user.582556.n2.nabble.com/Shiro-and-Kerberos-td6527819.html)。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-03-21T15:50:28.330

我已经评估了 Shiro 和 Spring 的安全性。人们声称 Shiro 的主要优点是简单，但我相信 Spring Security (3.0) 并不复杂。我花了几乎相同数量的配置行来设置。此外，Spring Security 的文档记录也比 Shiro 好得多。但 Shiro 的主要问题是它不支持 OAuth 或 Digest Authetication（他们计划在未来将其包含在[https://issues.apache.org/jira/browse/SHIRO-20](https://issues.apache.org/jira/browse/SHIRO-20)中）。我的结论：今天我会去参加春季安保。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-05T12:50:17.093

Shiro 更好用。它的代码非常简单，让您可以灵活地扩展它并在需要时提供您的自定义行为。它还提供了 Ehcache 的内部缓存实现，您可以通过它在服务器集群上复制会话。如果您要为您的应用程序设计 RBAC（基于角色的访问控制）系统，它将为您提供处理资产级别权限的灵活性，并且与 Spring Security 相比，它的访问控制机制更加灵活。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-03-10T15:17:44.563

Spring Security 和 Shiro 都与 Spring 框架相得益彰。我已经测试了他们两个。对我来说，spring security 很容易集成，并且从开发人员的角度来看是完全可以理解的。Shiro 也很容易集成，但对我来说 Spring 更容易集成。

# bash - 如何创建新的终端会话并执行多个命令

> ID：11500649
> 
> 赞同：8
> 
> 时间：2012-07-16T08:32:36.300
> 
> 标签：bash

我正在寻找一种方法来自动化我的开发环境的启动。我有三个必须启动的虚拟机，然后必须启动`ssh`它们并在它们上打开 VPN。

到目前为止，我已经让他们开始并设法通过 ssh 访问他们：

```
#!/bin/sh 
virsh start virtual_1
virsh start virtual_2
virsh start virtual_3
sleep 2m

gnome-terminal --title "virtual_3: server" -x ssh root@192.168.1.132 &
gnome-terminal --title "virtual_2: 11.100" -x ssh root@192.168.11.100 &
gnome-terminal --title "virtual_1: 12.100" -x ssh root@192.168.12.100 & 
```

如何在每个启动 openvpn 的终端中执行附加命令？

为简单起见，我尝试`echo 1`在每个终端中而不是启动 VPN。

我发现终端启动上的多个命令可以像这样运行：

```
gnome-terminal -x bash -c "cmd1; cmd2" 
```

所以为了让一个终端保持简单，我改变了：

```
gnome-terminal --title "virtual_3: server" -x ssh root@192.168.1.132 & 
```

到：

```
gnome-terminal --title "virtual_3: server" -x bash -c "ssh root@192.168.1.132 ; echo 1" & 
```

但`1`没有打印在 virtual_3 的终端上。然后我想，也许在终端准备好之前命令执行得太快了，所以我尝试添加`&&`：

```
gnome-terminal --title "virtual_3: server" -x bash -c "ssh root@192.168.1.132 &&; echo 1" & 
```

但这也没有结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T08:43:14.857

首先，如果你运行

```
gnome-terminal -x bash -c "cmd1; cmd2" 
```

你可以`bash`执行`cmd1`and `cmd2`. 它不会先执行`cmd1`然后给出`cmd2`结果。`ssh`是在终端中运行的程序，在`cmd2`完成之前不会执行。

所以你需要运行`ssh`并告诉*它*执行你的命令。

你可以这样做：

```
ssh user@address "command_to_execute" 
```

但是，`ssh`在命令完成后退出。正如您在“[使用 ssh，如何在不退出的情况下在远程机器上运行命令？](https://superuser.com/a/261619/105764) ”中看到的那样，您可以`ssh`使用该`-t`选项执行，这样它就不会退出：

```
ssh -t user@address "command_to_execute" 
```

所以你的命令最终变成：

```
gnome-terminal --title "virtual_3: server" -x bash -c "ssh -t root@192.168.1.132 'echo 1'" 
```

* * *

你是对的，`-t`仅仅给予是不够的（尽管是必要的）。`-t`为您分配缓冲区，`tty`但不为您执行 bash。从手册`ssh`：

> -t **强制伪 tty 分配。这可用于在远程机器上执行任意基于屏幕的程序**，这非常有用，例如在实现菜单服务时。多个 -t 选项强制分配 tty，即使 ssh 没有本地 tty。
> 
> 如果`command`指定，它将在远程主机**而不是登录 shell 上执行。**

所以你需要的是，执行 bash 你自己。所以：

```
ssh -t user@address "command_to_execute; bash" 
```

# .net - 实体框架代码拳头关系映射

> ID：11500654
> 
> 赞同：0
> 
> 时间：2012-07-16T08:32:49.930
> 
> 标签：.net, sql-server-2008, entity-framework, ef-code-first

我有一个具有此架构的数据库，是否可以在 Employee 和 Clinic 中添加 TimeSlots 列表？如果是，其映射的配置是什么。

![在此处输入图像描述](../Images/95cbf1ed400561ca2af13a3cfbae7548.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:46:43.063

不，您必须拥有`ClientEmployee`包含`TimeSlots`导航属性的实体。如果您想拥有`TimeSlots`实体`Employee`，`Clinic`则只能通过将访问相关的非映射属性来实现`ClientEmployee`：

```
// This is from Employee or Clinic class
[NotMapped]
public IEnumerable<TimeSlot> TimeSlots
{
    get 
    {
        // ClientEmployees is mapped navigation property
        return ClientEmployees.SelectMany(ce => ce.TimeSlots);
    }
} 
```

你看到问题了吗？`Employee`并且`Clinic`可以有多个相关`ClientEmployees`的，每个`ClientEmployee`可以有多个 TimeSlots - 此属性将为您提供所有相关的所有时间段`ClientEmployees`- 如果您只想要一个，您需要一个方法并传递`ClientEmployeeId`as 参数：

```
public IEnumerable<TimeSlot> GetTimeSlots(int id)
{
    // ClientEmployees is mapped navigation property
    return ClientEmployees.Where(ce => ce.ClientEmployeeId == id)
                          .Select(ce => ce.TimeSlots);
} 
```

# objective-c - 如何在 iPad 的横向模式下创建左侧有一个单独的视图控制器，右侧有一个单独的视图控制器的效果？

> ID：11500655
> 
> 赞同：1
> 
> 时间：2012-07-16T08:33:06.173
> 
> 标签：objective-c, ipad, uinavigationcontroller, viewcontroller

我想创建与 imdb 应用程序（风景）相同的效果。它们在左侧有一个静态视图，在右侧有另一个视图，给人的印象是有一个导航控制器，它只从视图的中间开始。您必须查看应用程序 imdb 才能理解。

# iphone - didReceiveResponse 需要很长时间

> ID：11500657
> 
> 赞同：1
> 
> 时间：2012-07-16T08:33:15.453
> 
> 标签：iphone, ios, nsurlconnection

在我的应用程序中，每次我从 applicationWillEnterForeground 从后台到前台时，我都会设置 NSURLConnection。它正常工作（获取 didReceiveResponse 需要 1 秒），但是当我将应用程序置于后台超过 5 分钟以上时，获取响应需要很长时间（didReceiveResponse 在 7 - 8 秒内）。更多是在后台的时间，需要更多的时间。可能是什么原因？谢谢！

# sql - 使用存储过程选择所有行

> ID：11500658
> 
> 赞同：0
> 
> 时间：2012-07-16T08:33:15.633
> 
> 标签：sql, postgresql, stored-procedures

我有一个 postgresql 表：

```
|  words  |  repl |
|  word1  | repl1 |
|  word2  | repl2 |
|  word3  | repl3 | 
```

如何使用存储过程返回一组所有单词和 repl。

我尝试：

```
create function get_words() returns setof text as
$$
declare
    r varchar;
begin
  for r in
      select word,repl from my_table
      loop
        return next r;
    end loop;
    return;
end
$$ language plpgsql; 
```

当我执行它时，我只得到一个字：

```
select * from get_words();
 get_words 
-----------
 word1
 word2
 word3 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:01:58.833

您的函数被定义为仅返回一列 ( `returns text`)。此外，您正在读取值的变量也是一个标量，并且不能包含多个值，因此只有单词 column 被放入`r`变量中。

您需要将函数更改为 eg`returns set of my_table`并更改循环变量的定义：

```
create or replace function get_words() 
   returns setof my_table as
$$
declare
    r words%rowtype;
begin
  for r in select w.word, w.repl from my_table w
  loop
     return next r;
  end loop;
  return;
end
$$ language plpgsql; 
```

如果您不打算在循环中执行任何操作，则使用`return query`会使事情变得更容易：

```
create or replace function get_words() 
  returns table (word text, repl text)
as
$$
begin
  return query select w.word, w.repl from words w;
end
$$ language plpgsql; 
```

如果您不使用 PL/pgSQL 而是使用普通的 SQL 函数，则可以进一步缩短它：

```
create or replace function get_words() 
   returns table (word text, repl text)
as
$$
  select w.word, w.repl from words w;
$$ language sql; 
```

# c# - 如何在 DataGrid 和 CollectionViewSource 之间同步排序标记？

> ID：11500666
> 
> 赞同：3
> 
> 时间：2012-07-16T08:33:39.043
> 
> 标签：c#, wpf, xaml

您如何实现（最好纯粹在 XAML 中）WPF DataGrid 的列标题中的排序标记与 CollectionViewSource 中的当前排序顺序同步？

例如，我有以下示例代码，它显示了 C:\ 中所有文件的属性，按长度排序：

```
<Window x:Class="DataGridSortTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:cm="clr-namespace:System.ComponentModel;assembly=WindowsBase" 
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <CollectionViewSource x:Key="items" Source="{Binding Files}">
            <CollectionViewSource.SortDescriptions>
                <cm:SortDescription PropertyName="Length"/>
            </CollectionViewSource.SortDescriptions>
        </CollectionViewSource>
    </Window.Resources>
    <Grid>
        <DataGrid ItemsSource="{Binding Source={StaticResource items}}"/>
    </Grid>
</Window> 
```

MainWindow.xaml.cs 中的代码隐藏是：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        Files = Directory.GetFiles(@"C:\").Select(f => new FileInfo(f)).ToList();

        DataContext = this;
    }

    public IEnumerable<FileInfo> Files { get; private set; } 
} 
```

当我启动这个程序时，它看起来像这样：

![截屏](../Images/f5d818f85b684bc987c69ce72f9523b6.png)

即文件排序正确，但标题中的标记丢失。使用“标记”，我的意思是：

![排序标记](../Images/60c20f3c9ee6cae0b647edd47e595dbf.png)

**注意**：我正在寻找**通用**解决方案。只是设置`DataGridColumn.SortDirection`不是解决方案。我正在寻找一种方法来指示 DataGrid 从集合视图中自动检索排序顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-09T22:46:25.323

这似乎是一个老问题，但今天我遇到了同样的问题并找到了一个通用的解决方案。所以，这个想法是 SortDescriptions 集合隐式地实现了 INotifyCollectionChanged，因此我们有能力观察它并适当地设置 DataGrid“排序标记”。我在单独的行为中实现了这一点：

```
public class DataGridSortDescriptionsSyncBehavior : Behavior<DataGrid>
{
    protected override void OnAttached()
    {
        base.OnAttached();

        var view = CollectionViewSource.GetDefaultView(AssociatedObject.ItemsSource);
        var notifyCollection = view.SortDescriptions as INotifyCollectionChanged;
        if (notifyCollection != null)
            notifyCollection.CollectionChanged += SortDescriptions_CollectionChanged;
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();

        var view = CollectionViewSource.GetDefaultView(AssociatedObject.ItemsSource);
        var notifyCollection = view.SortDescriptions as INotifyCollectionChanged;
        if (notifyCollection != null)
            notifyCollection.CollectionChanged -= SortDescriptions_CollectionChanged;
    }

    private void SortDescriptions_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == NotifyCollectionChangedAction.Reset)
        {
            // clear all columns sort directions
            foreach (var column in AssociatedObject.Columns)
                column.SortDirection = null;
        }

        if (e.NewItems != null)
        {
            // set columns sort directions
            foreach (SortDescription descr in e.NewItems)
                SetSortDirection(descr.PropertyName, descr.Direction);
        }

        if (e.OldItems != null)
        {
            // reset columns sort directions
            foreach (SortDescription descr in e.OldItems)
                SetSortDirection(descr.PropertyName, null);
        }
    }

    private void SetSortDirection(string sortMemberPath, ListSortDirection? direction)
    {
        var column = AssociatedObject.Columns.FirstOrDefault(c => c.SortMemberPath == sortMemberPath);
        if (column != null)
        {
            column.SortDirection = direction;
        }
    }
} 
```

对于那些不了解行为的人 - 您需要添加对 System.Windows.Interactivity 程序集的引用并将行为应用于 DataGrid：

```
<DataGrid ItemsSource="{Binding Data}">
    <i:Interaction.Behaviors>
        <local:DataGridSortDescriptionsSyncBehavior />
    </i:Interaction.Behaviors>
</DataGrid> 
```

现在，当您修改收藏时，“排序标记”会自动调整。另外，请注意，此行为仅适用于默认集合视图。如果您正在使用显式创建的集合视图 - 只需将其发送到行为（例如，通过行为的属性）并使用它而不是默认集合视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T19:01:39.907

对于您的通用解决方案，我有两个建议。

**第一的：**

您可以创建新的 DataGrid 类并自动检查 SortDescriptions。

```
 class ExDataGrid : DataGrid
    {
        bool isFirstRow = true;

        protected override void OnLoadingRow(DataGridRowEventArgs e)
        {
            base.OnLoadingRow(e);
            if (isFirstRow)
                SortDirectionHelper(this);
        }

        private void SortDirectionHelper(DataGrid dg)
        {
            var tmp = dg.Items.SortDescriptions;

            foreach (SortDescription sd in tmp)
            {
                var col = dg.Columns.Where(x => (((Binding)x.ClipboardContentBinding).Path.Path == sd.PropertyName)).FirstOrDefault();
                if (col != null)
                {
                    col.SortDirection = sd.Direction;
                }
            }

            isFirstRow = false;
        }
    } 
```

Xaml 文件：

```
<Window x:Class="DataGridSortTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:cm="clr-namespace:System.ComponentModel;assembly=WindowsBase" 
        Title="MainWindow" Height="350" Width="525"
        xmlns:dg="clr-namespace:DataGridSortTest"
        >
    <Window.Resources>
        <CollectionViewSource x:Key="items" Source="{Binding Files}" >
            <CollectionViewSource.SortDescriptions>
                <cm:SortDescription PropertyName="Length"/>
            </CollectionViewSource.SortDescriptions>
        </CollectionViewSource>
    </Window.Resources>
    <Grid>      
        <dg:ExDataGrid x:Name="grid" ItemsSource="{Binding Source={StaticResource items}}" />
    </Grid>
</Window> 
```

**第二：**

您可以在每个网格中为 Loaded 事件创建 EventHandler

```
 private void grid_Loaded(object sender, RoutedEventArgs e)
        {
            SortDirectionHelper(sender as DataGrid);
        }

        public void SortDirectionHelper(DataGrid dg)
        {
            var tmp = dg.Items.SortDescriptions;

            foreach (SortDescription sd in tmp)
            {
                var col = dg.Columns.Where(x => (((Binding)x.ClipboardContentBinding).Path.Path == sd.PropertyName)).FirstOrDefault();
                if (col != null)
                {
                    col.SortDirection = sd.Direction;
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T07:53:36.830

来自msdn论坛

> 您需要在 DataGrid Columns 上显式指定 SortDirection 属性以使标记显示在列标题中，因为标记功能是 DataGrid 的而不是绑定源。

所以也许你最好使用@kmatyaszek 解决方案

# javascript - 通过放置在对象中来识别对象属性

> ID：11500667
> 
> 赞同：1
> 
> 时间：2012-07-16T08:33:48.677
> 
> 标签：javascript, jquery

您如何通过对象在对象中的位置来识别对象。

```
myObj.b = 2 
```

我可以去`myObj[1] to show 2 also`吗？

```
var myObj = {
    a: 1,
    b: 2,
    c: 3,
    d: 4,
    e: 5,
    f: 6
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T08:35:55.393

不，这是不可能的。对象属性没有位置，因为对象没有排序。

您必须选择：

*   数组：范围内的连续键`[0..length)`，按顺序排列。
*   对象：任意键，无保证顺序。

一种可能的解决方法是创建一个对象和一个数组，然后将对象用于基于键的访问，将数组用于基于索引的访问。然后，您可以使用数组来获取给定值的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:39:12.303

不，myObj[1] 将导致未定义。对象文字是哈希映射（键、值存储），不支持基于索引的访问。之所以如此，是因为散列中的项目没有可预测的迭代顺序。

您可以做的是：（在 jQuery 中）

```
$.each(myObj, function(index, element) {
    console.log(index + ' : ' + element)
}); 
```

在纯 javascript 中，您可以使用 for in 循环遍历字段，如下所示：

```
for (key in myObj) {
   console.log(key);
   console.log(myObj[key]);
} 
```

（注意：您的文字有语法错误）。

# asp.net - 将表单发布到另一个应用程序中的 aspx 页面

> ID：11500668
> 
> 赞同：0
> 
> 时间：2012-07-16T08:34:04.033
> 
> 标签：asp.net

我需要将表单提交到另一个 Web 应用程序。

我在我的 IIS 中托管了 2 个网站。在 website1 中，我有一个页面“Register.aspx”，并将 PostBackUrl 的提交按钮设置为 website2 中的页面（Receiver.aspx）。但我无法在 Receiver.aspx 中获得发布的值。如果我将 PostBack url 设置为 website1 中的页面，我可以使用 Request.Form["tbUserName"] 获取发布的值。请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:53:21.570

我找到了原因。问题是我在 website2 中设置了 Cookieless="true"，如果我将它设置为 UseCookies 它工作正常。

# java - 如何在控制台上显示日志消息？

> ID：11500673
> 
> 赞同：0
> 
> 时间：2012-07-16T08:34:39.980
> 
> 标签：java, spring, hibernate, log4j

我在一个独立的应用程序中使用 Spring 和 Hibernate。我需要在控制台上查看记录器消息，如下所示...

```
2011-02-10 12:24:17 DriverManagerDataSource [INFO] Loaded JDBC driver: org.h2.Driver
2011-02-10 12:24:17 JdbcTemplate [DEBUG] Executing SQL statement [SELECT 1]
2011-02-10 12:24:17 DataSourceUtils [DEBUG] Fetching JDBC Connection from DataSource
2011-02-10 12:24:17 DriverManagerDataSource [DEBUG] Creating new JDBC DriverManager Connection to [jdbc:h2:/data/h2/testa]
2011-02-10 12:24:17 DataSourceUtils [DEBUG] Returning JDBC Connection to DataSource
2011-02-10 12:24:17 JdbcTemplate [DEBUG] Executing SQL statement [SELECT 1]
2011-02-10 12:24:17 DataSourceUtils [DEBUG] Fetching JDBC Connection from DataSource
2011-02-10 12:24:17 DriverManagerDataSource [DEBUG] Creating new JDBC DriverManager Connection to [jdbc:h2:/data/h2/testa]
2011-02-10 12:24:17 DataSourceUtils [DEBUG] Returning JDBC Connection to DataSource 
```

我有 log4j 属性文件。我需要设置哪些属性才能看到上面提到的控制台？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:37:16.867

您需要定义一个控制台附加程序：

```
<appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%-12d{HH:mm:ss,SSS} - %p - %C{1}.%M(%-3L) | %m%n" />
    </layout>
</appender> 
```

然后将其添加到根目录：

```
<root>
    <appender-ref ref="CONSOLE" />
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:17:39.980

从您的评论看来，您只有一个附加程序，即标准输出，并且正如您要求在控制台上显示的那样，您需要在包定义中提及该附加程序，如下所示。

```
log4j.log4j.rootLogger=DEBUG, stdout
log4j.logger.org.hibernate=DEBUG, stdout   
log4j.logger.org.springframework=DEBUG, stdout    
log4j.logger.org.apache.axis=DEBUG, stdout    
log4j.appender.stdout=org.apache‌​.log4j.ConsoleAppender    
log4j.appender.stdout.threshold=DEBUG     
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout    
log4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - %m%n 
```

它将打印来自 DEBUG 级别可用的 'org.hibernate'、'org.springframework'、'org.apache.axis' 包的日志。

注意：如果您只想从 spring/hibernate 捕获特定包的日志，您可以使用 appender 提及该包，如下所示

```
log4j.logger.org.springframework.transaction=DEBUG, stdout 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:40:15.543

below i give you an example of a log4j configuration:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

    <!-- Appenders -->
    <appender name="console" class="org.apache.log4j.ConsoleAppender">
        <param name="Target" value="System.out" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %-5p [%t] %c (%L) - %m%n" />
        </layout>
    </appender>

    <logger name="com.opensymphony.xwork2">
        <level value="error" />
    </logger>

    <!-- Root Logger -->
    <root>
        <priority value="info" />
        <appender-ref ref="console" />
    </root>

</log4j:configuration> 
```

then in the class that you want logging you need to declare the logger like this :

> private final static Logger logger = Logger.getLogger(Giannis.class);

and then you do something like

> logger.debug("Hello there");

you shoudl see this in the logs when the program is run

# .htaccess - 使用 htaccess 进行移动重定向

> ID：11500679
> 
> 赞同：1
> 
> 时间：2012-07-16T08:35:32.277
> 
> 标签：.htaccess, redirect

我正在尝试让 htaccess 文件重定向。这样当 URL 为 - [http://mobile.domain.tld/index.php?page=home](http://mobile.domain.tld/index.php?page=home)

Apache 实际请求[http://mobile.domain.tld/index.php?page=home&template=mobile](http://mobile.domain.tld/index.php?page=home&template=mobile)

我现在拥有的是——

```
Options +FollowSymLinks
RewriteEngine on

RewriteBase /

RewriteCond %{HTTP_HOST} ^mobile\.domain\.tld\/index\.php?page=(.+)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f [NC]
RewriteCond %{REQUEST_FILENAME} !-d [NC]
RewriteRule ^index.php?page=(.+)$ index\.php?page=$1&template=mobile [QSA,L] 
```

手机。子域指向 public_html 但目前`&template=mobile`似乎没有附加“”参数。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:14:42.197

这应该有效。

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteCond %{QUERY_STRING} page=(.*)
RewriteRule ^page\.php$ page\.php?template=mobile [QSA,L] 
```

你错过了`RewriteCond %{QUERY_STRING}`。

# ssl-certificate - 生产环境中的 Apple 推送通知：无法获取本地颁发者证书

> ID：11500684
> 
> 赞同：1
> 
> 时间：2012-07-16T08:35:37.963
> 
> 标签：ssl-certificate, apple-push-notifications

我使用我的应用程序的推送开发证书在我的服务器中应用了 APNS 推送通知。在我尝试将证书更改为推送生产证书之前，它工作正常。

我尝试使用以下方式测试连接：

```
openssl s_client -connect gateway.push.apple.com:2195 -cert myCert.pem -key myKey.pem 
```

输入正确密码后，会显示摘要：

```
New, TLSv1/SSLv3, Cipher is AES256-SHA
Server public key is 2048 bit
Secure Renegotiation IS supported
Compression: NONE
Expansion: NONE
SSL-Session:
    Protocol  : TLSv1
    Cipher    : AES256-SHA
    Session-ID:
    Session-ID-ctx:
    Master-Key: FB8BCFEA572E9C75330E15C11945D35F681C9561136FB0FCA42C9FE3E96E1E73E7D4EF255CC1AE94AF947D69D3CEEFC7
    Key-Arg   : None
    Start Time: 1342426207
    Timeout   : 300 (sec)
    Verify return code: 20 (unable to get local issuer certificate) 
```

但是，在我的本地计算机中，相同的命令返回：

```
New, TLSv1/SSLv3, Cipher is AES256-SHA
Server public key is 2048 bit
Secure Renegotiation IS supported
Compression: NONE
Expansion: NONE
SSL-Session:
    Protocol  : TLSv1
    Cipher    : AES256-SHA
    Session-ID: 
    Session-ID-ctx: 
    Master-Key: A08BDD17603F062305F47EBC36B55DC03CED501B6C03CFBDEFFB519E5F1586DF2CCC689816AA0C18C19931D7FE2DF85F
    Key-Arg   : None
    Start Time: 1342422311
    Timeout   : 300 (sec)
    Verify return code: 0 (ok) 
```

我错过了什么 ？我需要在我的 PHP 代码中配置一些东西吗？

我怀疑我必须在我的 Ubuntu 服务器中安装中间的 Apple 全球开发者授权证书，但不太确定。

# coldfusion - “网络错误：500 内部服务器错误”

> ID：11500690
> 
> 赞同：0
> 
> 时间：2012-07-16T08:36:13.690
> 
> 标签：coldfusion

这是 ColdFusion index.cfm 中的 jquery 代码，它正在调用 cfc 文件的 chkUsername。

```
<script type="text/javascript">
 chkUsernameUnique = function(theUsername){
  $.getJSON("selectuser.cfc", {
    method: 'chkUsername',
    Username: theUsername,
    returnformat: 'json'
}, function(isUsernameUnique){

    if (isUsernameUnique == true) {
        $("#theErrorDivID").html('Username is unique');
    }
    else {
        $("#theErrorDivID").html('Please select a new username');
    }
});
};
</script> 
```

这是我从 cfm 文件中调用的组件。

```
<cfcomponent>
<cffunction name="chkUsername" returnformat="json" output="false">
    <cfargument name="username" required="true">

    <cfquery name="chkUsername" datasource="myDataSource">
    SELECT ID FROM employees_login WHERE username = <cfqueryparam value="#arguments.username#" cfsqltype="cf_sql_varchar" />
    </cfquery>

    <cfreturn yesNoFormat(chkUsername.recordCount) />
</cffunction>
</cfcomponent> 
```

什么都没有显示。我试图检查火灾错误的错误，我收到了这个错误 -

`"NetworkError: 500 Internal Server Error:http://localhost:8500/workspace/UniqueUsername/selectuser.cfc?method=chkUsername&Username=admin&returnformat=json"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:09:53.290

我一直在努力。最后我得到了答案。您需要像这样在 cffunction 标记中写入 access="remote" -

```
<cfcomponent>
 <cffunction name="chkUsername" returnformat="json" access="remote" output="false">
  <cfargument name="username" required="true">

  <cfquery name="chkUsername" datasource="myDataSource">
   SELECT ID FROM employees_login WHERE username = <cfqueryparam value="#arguments.username#" cfsqltype="cf_sql_varchar" />
  </cfquery>

  <cfreturn yesNoFormat(chkUsername.recordCount) />
  </cffunction>
</cfcomponent> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:01:04.487

尝试替换这个：`<cffunction name="chkUsername"returnformat="json" output="false">`

有了这个：`<cffunction name="chkUsername" returnformat="json" output="false">`

# wcf - 在合约操作执行期间调用回调

> ID：11500691
> 
> 赞同：3
> 
> 时间：2012-07-16T08:36:16.787
> 
> 标签：wcf, wcf-callbacks, asynchronous-wcf-call

我正在 Azure 上编写 WCF 服务。

在我的服务中，我需要在合约操作执行期间调用回调。当我尝试这样做时，会抛出异常并且客户端将被锁定。我认为这是由于为合约操作打开了通道，在当前通道中调用回调会锁定线程，对吗？我想获得这种情况的解决方案。

这是超时异常消息：

> 发送到 net.tcp://127.255.0.0:8000/MytestWCFService 的此请求操作在配置的超时 (00:00:59.9889989) 内未收到回复。分配给此操作的时间可能是较长超时的一部分。这可能是因为服务仍在处理操作，或者因为服务无法发送回复消息。请考虑增加操作超时（通过将通道/代理转换为 IContextChannel 并设置 OperationTimeout 属性）并确保服务能够连接到客户端。

编辑：代码示例

```
[ServiceContract(Namespace="testnamespace")]   
public interface ICallback   
{   
    [OperationContract(IsOneWay=true)]   
    void Callbackmethod();   
} 
```

然后我在服务端实现 IContract：

```
[ServiceBehavior(InstanceContextMode=InstanceContextMode.Single,   
    ConcurrencyMode=ConcurrencyMode.Reentrant,   
    AddressFilterMode=AddressFilterMode.Any)]   
public class WCFService : IContract   
{      
   public int Add(int a, int b)   
   {   
       int result = a + b;  
       ICallback callback = OperationContext.Current.GetCallbackChannel<ICallback>();   
       callback.Callbackmethod();   
       return result;   
   }   
} 
```

我在当前频道回拨，这是一个双工频道。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T09:36:34.280

如果您的操作和回调是两种方式，那么您很可能会遇到死锁问题。使用此属性标记您的服务类：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Reentrant)]
public class MyService : IMyServiceContract { ... } 
```

编辑：

同样在您的 WPF 应用程序中将其添加到回调实现的实现中：

```
[CallbackBehavior(UseSynchronizationContext = false)] 
```

# regex - Notepad++：要替换的正则表达式

> ID：11500695
> 
> 赞同：0
> 
> 时间：2012-07-16T08:36:25.977
> 
> 标签：regex, notepad++

我有一堆要替换的文件

```
request.getParameter("thischangesallthetime") 
```

至

```
stringescapeutils.escapehtml(request.getParameter("thischangesallthetime")); 
```

我可以在记事本++中做到这一点吗？我可以使用什么正则表达式？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:41:19.193

Search:

```
request.getParameter\("(.*?)"\) 
```

Replace

```
stringescapeutils.escapehtml\(request.getParameter\("\1"\)\); 
```

EDIT: as duncan correctly points out, the matching on the search regex needs to be non-greedy if you have more than one replaceable expression on one line. I corrected the search regex to take this into account.

PS: next time please show us what you tried.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:09:52.460

m0skit0 的答案是一个入门者，但如果您的字符串中应该有多个这些值，则需要对其进行修改。例子：

> 你好 request.getParameter("thischangesallthetime") lorem ipsum request.getParameter("foobar") 等等

需要这个正则表达式：

寻找：

```
request.getParameter\("(.*?)"\) 
```

用。。。来代替：

```
stringescapeutils.escapehtml(request.getParameter("\1")); 
```

这 ？在正则表达式中使其不贪婪。否则第一场比赛（在'thisvaluechangesallthetime'）将在第二场比赛（在'foobar'）中抓住最后一个“）

而且您不需要在正则表达式的替换部分中转义括号。

如果没有 ?，您最终会得到以下结果：

```
hello stringescapeutils.escapehtml(request.getParameter("thischangesallthetime") lorem ipsum request.getParameter("foobar")); blah 
```

请注意，在 ("foobar") 参数之后，escapehtml 括号才结束！

# iphone - 如何在不使用 Apple 命令行工具的情况下将静止图像嵌入到 HTTP 实时流式纯音频流中

> ID：11500700
> 
> 赞同：2
> 
> 时间：2012-07-16T08:36:36.100
> 
> 标签：iphone, audio, video, video-streaming, http-live-streaming

我们使用的是基于 Linux 的服务器，因此 Apple 的工具（mediafilesegmenter）不是一个选项。

HLS[指南](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/UsingHTTPLiveStreaming/UsingHTTPLiveStreaming.html)规定：

> ...此外，您应该为支持蜂窝的客户端提供 64 Kbps 或更低的备用流，以实现较慢的数据连接。如果您无法以 64 Kbps 或更低的速度提供可接受质量的视频，则应提供纯音频流或带有静止图像的音频。

我们想尝试一下“带有静止图像的音频”选项。

他们有[一个实施常见问题解答](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/FrequentlyAskedQuestions/FrequentlyAskedQuestions.html)，建议使用他们的工具，效果很好：

```
mediafilesegmenter -a --meta-file=imgres.jpeg --meta-type=picture sample.mp3 
```

我在 iPhone 上播放音频时看到图像。我看了一开始有一些废话的片段，它可能告诉播放器有一个嵌入的 jpeg。

```
ID3 ?PRIV 5 com.apple.streaming.transportStreamTimestamp 
ª†ID3 $APIC $u image/jpeg ˇÿˇ‡ JFIF ˇ€ Ñ    &$/ #')8/-150*A&+,) 
```

如何在不使用 Apple 工具的情况下使用此嵌入图像制作仅音频片段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:13:39.713

有关如何以 m3u 文件格式存储图像的相关文档可在[M3U 规范](http://www.id3.org/d3v2.3.0)中找到。m3u8 格式是 m3u 的超集，因此 m3u 支持的任何内容都应该在 m3u8 文件中得到支持。

Winamp 可以创建包含图像的 m3u 文件。我确信必须有其他工具能够做到这一点。然后，您必须将适当的标签添加到 m3u 文件以使其成为 m3u8 文件。或者最简单的方法是将部分 m3u 文件复制到您的 m3u8 文件中。

# php - 记录用户活动的最佳实践是什么？

> ID：11500706
> 
> 赞同：10
> 
> 时间：2012-07-16T08:37:13.690
> 
> 标签：php, mysql, logging

我想为我的网络应用程序（`php`++ `js`）实现用户的活动记录`mysql`。

以前，我使用过这种方法：

*   在用户登录时在数据库中创建一个临时表来存储用户 ID
*   `activity`为使用该临时表中的用户 ID在表中插入行的所有表创建触发器

现在我真的不想在数据库中放这么多逻辑，所以我的问题是：最佳实践是什么？我应该继续使用所描述的方法，还是应该使用其他方法？

**编辑 1**

我已经看到[了这个](https://stackoverflow.com/questions/2488267/how-to-log-user-actions-with-php-and-mysql)问题，但我很想将所描述的方法与答案中的方法进行比较。

**编辑 2**

为什么我需要日志：如果出现问题，我需要知道应该责备哪个用户 =)

日志必须包含更改的数据和新数据，以查看实际更改的内容。

不会有很多用户，因为它是一个企业应用程序，我们公司不是那么大。

主要问题是我应该在哪里放置日志记录逻辑：数据库或应用程序（php 后端）级别？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T11:08:14.313

一如既往，“这取决于”。

如果您的核心业务概念随着时间的推移而演变很重要，那么它应该是您的数据库设计和 PHP 逻辑中的一流概念。Fowler 在“[分析模式](http://www.martinfowler.com/eaaDev/timeNarrative.html)”中对此进行了描述。这使您可以捕获谁对您的业务对象进行了哪些更改，并回答诸如“谁在日期 z 将项目从类型 x 更改为 y？”、“用户 x 多久更改一次产品 y？”之类的问题。等等。它确实使域模型更加复杂。

如果您不需要这种级别的集成，我的首选是将日志功能放在 PHP 中；触发器有一种可怕的方式来减慢数据库的速度，或者导致意想不到的副作用，或者被开发人员对架构进行更改而忘记。因此，在 PHP 中，我会包含显式的“记录此”语句，可能使用面向方面的框架（尽管我从未在 PHP 中使用过，仅在 Java 中使用过）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-16T08:40:48.167

对于日志记录，您需要一个 table `logs`，在其中记录会话 ID `$_SESSION['id']`（假设您有会话？）和用户的活动。然后使用延迟的 MySQL 查询插入它（因为日志不是高优先级）：

```
INSERT DELAYED INTO table (session_id, activity) VALUES ('1234', 'blah'); 
```

有关延迟插入的更多信息，请参阅[此链接](http://dev.mysql.com/doc/refman/5.5/en/insert-delayed.html)。

换句话说，将所有逻辑放在 PHP 端，只需要一个 MySQL 表，您可以在其中记录任何使用延迟的活动。这将是一个函数 log_activity($session_id, $activity)，您可以从任何有可记录活动的地方调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-24T23:37:50.387

我真的会避免在您当前的 PHP+MySQL 设置之上添加另一层逻辑。扩展该服务将很困难，您要做的最后一件事是在您已经执行的操作之上运行查询，以获取用户采取的不同操作。我知道不会有很多用户，嗯，不是现在他们没有，但谁能知道从现在起 12 或 24 个月会发生什么。

一种更简单的方法是记录所有内容，然后使用一个工具来汇总这些日志并为您管理这些日志。以[sematext.com](https://sematext.com/logsene/)为例。他们免费提供他们的日志应用程序，但有一些限制，但它应该足以让您了解这是否是您可以使用的东西。

查看小日志预览屏幕。您所有的日志数据都在那里，易于阅读和理解，它们也有一个非常简洁的过滤和搜索选项。

[Sematext.com 中的日志应用程序](https://i.stack.imgur.com/kvreL.png)

其他类似的工具是

1.  数据狗网
2.  Logdna.com
3.  logz.io

它们中的大多数都带有免费套餐或免费试用版，因此您可以先试一试，然后再坚持使用，因为每种工具都有自己的长处。

# php - 如何使用 PHP 删除段落中的特定单词？

> ID：11500708
> 
> 赞同：-2
> 
> 时间：2012-07-16T08:37:19.213
> 
> 标签：php

我有一段包含“manish”一词的几个实例。我想删除那些包含单词“manish”的行，而不改变剩余的行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T08:39:45.633

最便宜和最简单的方法是简单地做：

```
$text = str_replace('yourword','',$text); 
```

如果你有更多的话，你可以在第一个参数中传递一个数组（http://www.php.net/str_replace）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T08:39:26.383

```
str_replace ('manish', '', $string); 
```

`$string`你的段落在哪里。

# extjs4 - 如何打包（缩小）一个 extjs 4 应用程序

> ID：11500713
> 
> 赞同：6
> 
> 时间：2012-07-16T08:37:39.773
> 
> 标签：extjs4, minify, yui-compressor, sencha-cmd

我正在寻找有关打包和缩小 Ext JS 4 应用程序的实际说明。

一切似乎都指向 Sencha SDK，但围绕此的一切都针对 Sencha Touch，无论如何，当我按照说明 ( `sencha app build testing`) 操作时，我会收到：

“当前工作目录 (C:...) 不是可识别的 Sencha SDK 或应用程序文件夹”

这让我很震惊，因为我使用的结构是由 Sencha Architect 生成的。查看[此处的文档](http://docs.sencha.com/touch/2-0/#!/guide/command)，Architect 生成的文件夹结构是正确的，但某些文件名不同。似乎有一些我不知道的打包文件（app.json packager.json）。

我希望有大量关于此的帖子/指南/博客/文章，考虑到开发过程中创建的 .js 文件的卸载负载，您认为这是一个常见的要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:49:07.893

[在本文](http://existdissolve.com/2011/08/extjs-4-my-first-build/)的帮助下，我能够准备好我们的应用程序生产。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-04T16:24:01.073

这篇文章已经过时了。我们需要使用`Sencha Cmd`.

*   [http://docs.sencha.com/extjs/4.2.1/#!/guide/command](http://docs.sencha.com/extjs/4.2.1/#!/guide/command)
*   [http://www.sencha.com/blog/all-new-sencha-cmd](http://www.sencha.com/blog/all-new-sencha-cmd)

下载：[http ://www.sencha.com/products/sencha-cmd/download](http://www.sencha.com/products/sencha-cmd/download)

一旦你跨越了短暂的学习曲线，这是一件很棒的事情。

它就像运行一样简单`sencha app build`，它创建 YUI 压缩的 javascript 和样式表文件，并通过巧妙的处理确保只包含您的应用程序需要的内容 - 进一步减小了大小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-20T16:26:41.003

我对使用 Sencha.Cmd 不满意。它很大，很难设置，通常会因琐碎的错误而中断。

此外，我尝试使用[Nicholas Zakas 的 JS 组合器](https://github.com/nzakas/combiner)，但我总是要跟踪依赖关系并准确地将它们写入注释命令中。即使 ExtJS 类在输出构建文件中经常被弄乱。

然后我决定自己为 ExtJS 应用程序编写轻量级构建工具。这里是：

[Extapp - https://github.com/liberborn/extapp](https://github.com/liberborn/extapp)。

无需添加其他评论。它“理解”本机 ext 类定义。默认配置文件足以依赖 ExtJS 使用的所有依赖项类型。

请放心使用。

```
Usage: java -jar extapp-yyyy.mm.jar [options] [base path] [config file] [source file] [output file] 
```

它可以包含在 ant 和 gradle 部署脚本中。

Extapp tool is working with ExtJS 5 too. Probably it is working also with Sencha Touch but I did not have a chance to test it.

# asp.net - 从字符串转换日期和/或时间时转换失败

> ID：11500714
> 
> 赞同：1
> 
> 时间：2012-07-16T08:37:47.127
> 
> 标签：asp.net, sql, vb.net

从字符串转换日期和/或时间时转换失败。我的类型数据列是时间（7）

我的代码是

```
Protected Sub insertdata()
        Dim cls As New Class1

        cls.openconnections()
        Dim cmd As New SqlClient.SqlCommand
        cmd.Connection = cls.cn

        cmd.CommandText = "Insert Into Schedule (Room ,Hostel,Tanggal,Jam)"
        cmd.CommandText &= "Values (@room,@hostel,@tanggal,@jam:@menit:00)"

        cmd.Parameters.AddWithValue("@hostel", listhotelx.SelectedValue)
        cmd.Parameters.AddWithValue("@room", listroomx.SelectedValue)
        cmd.Parameters.AddWithValue("@tanggal", Calendar1.SelectedDate.ToShortDateString)
        cmd.Parameters.AddWithValue("@jam", jam.SelectedValue)
        cmd.Parameters.AddWithValue("@menit", menit.SelectedValue)

        cmd.ExecuteNonQuery()
        cls.closeconnection()
    End Sub 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:43:03.577

您必须以时间格式*连接*`hh:mm:ss`字符串，然后分配给参数。

```
cmd.CommandText = "Insert Into Schedule (Room ,Hostel,Tanggal,Jam)
                      Values (@room,@hostel,@tanggal,@jam)"

str=String.format("{0}:{1}:00",jam.SelectedValue,menit.SelectedValue)
...
cmd.Parameters.AddWithValue("@jam", str) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:43:26.167

Time sql-Type 映射到代码中的 TimeSpan 类型。将您的日期时间转换为时间跨度，即：

```
Calendar1.SelectedDate.TimeOfDay 
```

欲了解更多信息：http: [//msdn.microsoft.com/en-us/library/ms131092.aspx](http://msdn.microsoft.com/en-us/library/ms131092.aspx)

类似的答案：[如何在 .net 应用程序中使用 sql server 时间数据类型？](https://stackoverflow.com/questions/5301607/how-to-use-sql-server-time-data-type-in-net-application)

# jquery - data is null if(data.success) getting this error when making the call below

> ID：11500718
> 
> 赞同：0
> 
> 时间：2012-07-16T08:38:10.840
> 
> 标签：jquery, ajax, null

```
 <script type="text/javascript">
    function submitcustomerservice()

    {
        var formArray = $('#addcustomerservicesform').serialize();
        $.post('<?php echo base_url();?>index.php/home/save_customer_service', formArray, function (data) {
            if (data.success) {
                var customerid = $('#customerid').val();
                window.location.replace('<?php echo base_url();?>index.php/home/customer_profile/' + customerid);
            } else

            {
                for (var i in data.errors)

                {
                    $('#' + i).validationEngine('showPrompt', data.errors[i], '', 'topRight', true);
                }

                for (var z in data.hidden)

                {
                    $('#addcustomerservicesform #' + data.hidden[z]).validationEngine('hide');
                }

            }

        }, 'json');

        return false;

    } 
```

This above code is triggered when I hit my save button, it is supposed to check and save all data in the form, upon adding `data['success']` is set to true, and if there are any errors `data['errors']` is set to respective errors. I have it working on the localhost but when I uploaded to my main website it is giving me error of data is `null`. Please let me know what you think about it. What might be a possible problem here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:41:39.537

Probably the page it is requesting is not actually working like you think it is.

Install firebug, and watch the net tab. Then take a look at what the actual page is returning.

BTW Are you sure about the `base_url()` function? You probably don't need it - you can do a relative url.

# android - 进度对话框未出现

> ID：11500720
> 
> 赞同：0
> 
> 时间：2012-07-16T08:38:18.230
> 
> 标签：android, android-layout, android-activity, progressdialog

我有一个`ListView`在`Activity1`. `OnItemClick`，我正在导航到另一个 `Activity2`我有一些数据库代码的活动。

现在的问题是从 DB 获取数据需要一些时间，因此在从 导航 `Activity1`到 时 `Activity2`，会出现几秒钟的空白屏幕。

为了克服这个问题，我尝试了`ProgressDialog`但`ProgressDialog`根本没有出现。

**活动 2 中的代码片段：**

```
public class Activity2 extends Activity implements Runnable {
@Override
public void onCreate(Bundle savedInstanceState) {
Thread thread = new Thread();
        thread.start();
        run();
} 
```

* * *

```
@Override
    public void run() {
        plansDesc = dbMgr.chkRecord(
                "SELECT Description FROM SubPlan where Title='" + subTitle
                        + "'", "Description");

        ProgressDialog progDailog = ProgressDialog.show(
                SubPlanDescActivity.this, "Plan Information", "Loading...",
                true);
        try {
            if (plansDesc != "") {
                tvDesc.setText(Html.fromHtml(plansDesc));
            } else {
                tvDesc.setText(Html
                        .fromHtml("<b>No Information Available...</b>"));
            }
        } catch (Exception e) {
        }
        handler.sendEmptyMessage(0);
        progDailog.dismiss();
    }

private Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
    }
}; 
```

*任何帮助表示赞赏。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T08:55:38.003

尝试 AsyncTask 而不是线程

请参阅下面的代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
   new ProgressTask().execute();
} 
```

现在创建类

```
private class ProgressTask extends AsyncTask<String, Void, Boolean> {

  private ProgressDialog dialog = new ProgressDialog(HomeActivity.this);

  protected void onPreExecute() {
    this.dialog.setMessage("Please wait");
    this.dialog.show();
  }

  protected Boolean doInBackground(final String... args) {
    try {

        plansDesc = dbMgr.chkRecord(
            "SELECT Description FROM SubPlan where Title='" + subTitle
                    + "'", "Description");
        return true;
    } catch (Exception e) {
        Log.e("tag", "error", e);
        return false;
    }
  }

  @Override
  protected void onPostExecute(final Boolean success) {

    if (dialog.isShowing()) {
        dialog.dismiss();
    }

    if (success) {
        // display UI
        if (plansDesc != "") {
            tvDesc.setText(Html.fromHtml(plansDesc));
        } else {
            tvDesc.setText(Html
                    .fromHtml("<b>No Information Available...</b>"));
        }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:39:45.013

您必须关闭处理程序中的进度对话框。

```
 private Handler handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
        progDailog.dismiss();
        }
    }; 
```

尝试像这样修改代码，

```
@Override
public void run() {
     handler.sendEmptyMessage(1);
    plansDesc = dbMgr.chkRecord(
            "SELECT Description FROM SubPlan where Title='" + subTitle
                    + "'", "Description");

    try {
        if (plansDesc != "") {
            tvDesc.setText(Html.fromHtml(plansDesc));
        } else {
            tvDesc.setText(Html
                    .fromHtml("<b>No Information Available...</b>"));
        }
    } catch (Exception e) {
    }
    handler.sendEmptyMessage(0);

} 
```

而你的处理程序是这样的，

```
private Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
      if(msg.what==0)
            {
             progDailog.dismiss();
               }
      if(msg.what==1)
      {
          ProgressDialog progDailog = ProgressDialog.show(
            SubPlanDescActivity.this, "Plan Information", "Loading...",
            true);
         }

    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:43:04.597

写这个：

```
public class Activity2 extends Activity implements Runnable {
Thread thread;
ProgressDialog dialog;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(yourLayout);

dialog=ProgressDialog.show(this, "","Loading...",true);
dialog.show();
thread = new Thread(this);
thread.start();

}

public void run() {
        plansDesc = dbMgr.chkRecord(
            "SELECT Description FROM SubPlan where Title='" + subTitle
                    + "'", "Description");

    try {
        if (plansDesc != "") {
            tvDesc.setText(Html.fromHtml(plansDesc));
        } else {
            tvDesc.setText(Html
                    .fromHtml("<b>No Information Available...</b>"));
        }
    } catch (Exception e) {
    }

        handler.sendEmptyMessage(0);        
    }

 private Handler handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
              if(dialog!=null && dialog.isShowing()){
                 dialog.dismiss();
                 }
        }
   }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T08:49:08.617

如果你想加载数据，那么使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)是最好的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T08:52:36.200

在您的 onCreate 方法中，您必须将“Runnable”元素（此处为“this”）作为线程对象参数。然后，您不需要调用“运行”方法，它会使用 Thread 对象的 start() 方法自动调用。

代码示例：

```
Thread thread = new Thread(this);
thread.start(); 
```

我不确定，这完全解决了你的问题，但这是使用带有可运行接口的线程的好方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T08:55:05.373

```
 new AsyncTask<Void, Void, Cursor>() {

        protected void onPreExecute() {
            showProgress...
        }

        protected Cursor doInBackground(Void... structs) {
            Loading data...

            return result;
        }

        protected void onPostExecute(Cursor result) {
            Hide progress...

        }

    }.execute(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-16T09:04:53.427

在 Activity 中显示进度对话框，而不是在数据库线程中。完成后使用 Handler 从线程发送消息并隐藏对话框。

# android - Web服务中的编组，Searlizing，Desearlizing

> ID：11500722
> 
> 赞同：0
> 
> 时间：2012-07-16T08:38:33.980
> 
> 标签：android, web-services, marshalling

我正在使用 webservices 使用 ksoap2 库将 android 应用程序与服务器端连接起来。问题是，尽管阅读了各种相关的东西，我仍然对 marshaling、searlizing、desearlizing 等术语感到困惑。它们之间究竟有什么区别？以及为什么我们需要这样做。我只知道它只与网络服务有关，它基本上是为从网络服务传递或返回值而完成的。为什么我们实际上需要它们，以及我们如何实际对这些东西进行searlize 或desearlize 或网络服务器本身为我们提供了这个功能？？？我们需要在客户端或 Web 服务本身编写编组或序列化代码吗？无论如何，我们没有' 不必这样做并以不需要对这些东西进行searlize或desearlize的方式调用Web服务，或者我们可以在项目中包含的任何库来自动执行它？请指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:03:13.223

编组/序列化、解组/反序列化在 Web 服务世界中经常互换使用，基本上它们的含义相同。

向 Web 服务发送请求时，您需要以某种方式构建它，如果它是[REST](http://rest.elkstein.org/2008/02/what-is-rest.html) Web 服务，则请求/响应的格式通常为[XML](http://www.w3schools.com/xml/)或[JSON](http://www.json.org/)。

如果它是[SOAP](http://www.w3schools.com/soap/default.asp) Web 服务，则格式为 XML。

因此，每次发送请求时，都需要以正确的格式构建它，这称为编组/序列化。

每次收到响应时，都需要对其进行解析，这称为解组/反序列化。

我建议您学习 REST Web 服务，因为它们更简单、更灵活。

**编辑：**

为了连接到 Java 中的 REST 服务，您应该使用[HttpURLConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)。

这是它的外观示例代码：

```
public static String httpPost(String urlStr) throws Exception {
URL url = new URL(urlStr);
HttpURLConnection conn =
(HttpURLConnection) url.openConnection();
conn.setRequestMethod("POST");
conn.setDoOutput(true);
conn.setDoInput(true);
conn.setUseCaches(false);
conn.setAllowUserInteraction(false);
conn.setRequestProperty("Content-Type",
"application/x-www-form-urlencoded");

if (conn.getResponseCode() != 200) {
throw new IOException(conn.getResponseMessage());
}

// Buffer the result into a string
BufferedReader rd = new BufferedReader(
new InputStreamReader(conn.getInputStream()));
StringBuilder sb = new StringBuilder();
String line;
while ((line = rd.readLine()) != null) {
sb.append(line);
}
rd.close();

conn.disconnect();
return sb.toString();
} 
```

# php - 用于下载文件的单元测试

> ID：11500724
> 
> 赞同：2
> 
> 时间：2012-07-16T08:38:56.450
> 
> 标签：php, unit-testing, codeigniter, phpunit

首先，我使用 codeigniter 作为我的 PHP 框架。很抱歉问这个问题，我正在尝试掌握单元测试的想法。他们说在开发站点功能之前进行单元测试是一种很好的做法。所以在这里我很想学习这个：

我的方法：

```
function download()
{
    $data = file_get_contents("resources/temp/file.doc");
    $name = "new_file.doc";

    force_download($name, $data);
} 
```

然后我用 testDownload 方法创建了一个测试控制器：

```
public function testDownload()
{       
    //Call the controller method
    $this->CI->download();

    //Fetch the buffered output
    $out = output();

    $this->assertFalse(preg_match('/(error|notice)/i', $out));
} 
```

然后我测试它： phpunit test.php 并给了我这个：

```
F[CIUnit] PHP Error: Warning - file_get_contents(resources/temp/file.doc): failed to open stream: No such file or directory File Path: controllers/contract.php (line: 22)

Time: 4 seconds, Memory: 7.50Mb

There was 1 failure:

1) ContractTest::testDownload
Failed asserting that 0 is false. 
```

我只是想测试它是否有正确的路径。或者我真的需要一个测试脚本来下载文件吗？对不起，我只是困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:39:19.227

“没有这样的文件或目录”的原因：

当您使用 PHPUnit 进行测试时，当前工作目录将相对于您运行 phpunit 的目录。但是在代码中，你会写相对于你的 webserver 目录。

顺便说一句，单元测试应该测试您编写的代码。在单元测试中测试外部资源似乎不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:41:26.263

可能是因为 0 只是一个假值，但并非字面意义上的假，而 assertFalse 使用 ===。使用 assertEquals 或其他东西来检查 0 。

# twitter-bootstrap - Setting overflow property with twitter bootstrap thumbnails

> ID：11500726
> 
> 赞同：0
> 
> 时间：2012-07-16T08:39:05.920
> 
> 标签：twitter-bootstrap, thumbnails, css

I am trying to display images of varying height and width in thumbnails of fixed dimensions. To achieve this, i am attempting to resize the image without affecting the aspect ratio, and then hiding the parts of the image that overflows from the thumbnail height and width.

I tried using "overflow:hidden" css property on the thumbnail class, but the supposedly overflowing parts of the pictures still appeared nevertheless.

Here is a js fiddle of my dismal attemp to prevent the thumbnail from showing overflows [http://jsfiddle.net/smallfonts/ARn4N/](http://jsfiddle.net/smallfonts/ARn4N/)

I have also come across this gem of an article about how to set overflowing parts of an image to be hidden in a thumbnail. However, i could not create the same effect on twitter bootstrap thumbnails.

[http://cssglobe.com/post/1305/create-resizing-thumbnails-using-overflow-property/](http://cssglobe.com/post/1305/create-resizing-thumbnails-using-overflow-property/)

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:44:54.327

这是你需要的吗：http: [//jsfiddle.net/ARn4N/10/](http://jsfiddle.net/ARn4N/10/)

# ruby-on-rails - 在 Ruby on Rails 中使用 I18n 设置 OAuth 回调

> ID：11500731
> 
> 赞同：2
> 
> 时间：2012-07-16T08:39:23.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, oauth, internationalization, routes

在我的 Ruby on Rails 应用程序中，我设置了 OAuth 以使用omniauth gem。一切顺利；但是，将 I18n 添加到应用程序后，我无法让它工作。具体来说，问题在于回调。如何调整我的 routes.rb 代码以使用 I18n 正确处理回调？

**路线.rb**

```
 scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
   resources :sessions, only: [:new, :create, :destroy]
   root to: 'static_pages#home'

   match 'auth/:provider/callback', to: 'sessions#create'
   match 'auth/failure', to: redirect('/')
   match 'signout', to: 'sessions#destroy', as: 'signout'

   match '/signin',  to: 'sessions#new'
   match '/signout', to: 'sessions#destroy', via: :delete
 end

  match '*path', to: redirect {|params| "/#{I18n.default_locale}/#{CGI::unescape(params[:path])}" }, constraints: lambda { |req| !req.path.starts_with? "/#{I18n.default_locale}/" }
  match '', to: redirect("/#{I18n.default_locale}") 
```

**application_controller.rb**

```
 before_filter :set_locale
     def set_locale
       I18n.locale = params[:locale] if params[:locale].present?
     end

     def default_url_options(options = {})
       {locale: I18n.locale}
     end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:17:08.253

这个问题的答案可以在[这里](https://stackoverflow.com/questions/11900085/devise-and-i18n-reset-password-routing-issues)找到。:locale 需要在括号中：`scope "(:locale)"`

# mysql - 在 MySql + Hibernate 中未使用更改的 AutoIncrement Id

> ID：11500737
> 
> 赞同：0
> 
> 时间：2012-07-16T08:39:45.103
> 
> 标签：mysql, hibernate, insert, auto-increment

我使用 Hibernate 和 mySql。

我已将 db 脚本定义如下：

```
CREATE TABLE `Foo` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `version` int(11) NOT NULL DEFAULT '0',
  `data` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id`)
);
ALTER TABLE Foo AUTO_INCREMENT = 34324; 
```

这是我的休眠映射：

```
<class name="org.xyz.Foo" table="Foo">
    <cache usage="read-write"/>
    <id name="id" column="id">
         <generator class="increment"/>
    </id>
    <version name="version" column="version"/>
    <property name="data" column="data"/>
</class> 
```

问题：插入不遵守设置为的 AutoIncrement Id `34324`。正如我所料，插入的 ID 从 1 而不是 34324 开始。我自己没有设置 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:50:04.170

根据您的休眠映射首选生成策略是`increment`. 这意味着 Hibernate 产生了价值。但是根据 DDL 列应该是 AUTO_INCREMENT，这意味着值是由 MySQL 分配的。

如果 AUTO_INCREMENT 是您想要的，解决方案是使用以下 Hibernate 映射：

```
<generator class="identity"/> 
```

# .htaccess - .htaccess 301 重定向友好 url

> ID：11500745
> 
> 赞同：0
> 
> 时间：2012-07-16T08:40:13.970
> 
> 标签：.htaccess, url, redirect

我正在尝试进行 301 重定向。

[http://www.myweb.de/entdecke-panama/sternstunden-panamas](http://www.myweb.de/entdecke-panama/sternstunden-panamas)到[http://www.myweb.de/panama-urlaub/sternstunden/](http://www.myweb.de/panama-urlaub/sternstunden/)

.htaccess 中的 mi 代码：

```
Redirect 301 /entdecke-panama/sternstunden-panamas http://www.myweb.de/panama-urlaub/sternstunden 
```

但结果是：[http](http://www.myweb.de/panama-urlaub/sternstunden-panamas) ://www.myweb.de/panama-urlaub/sternstunden-panamas 只重定向第一个“文件夹”。

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:12:18.617

您是否像 Joomla/Wordpress 一样同时使用两个 CMS？也许您必须将内容“Redirect 301 /entdecke-panama/sternstunden-panamas [http://www.myweb.de/panama-urlaub/sternstunden](http://www.myweb.de/panama-urlaub/sternstunden) ”放在 .htaccess 文件的开头。

# php - 停止客户端查看缓存的网页

> ID：11500761
> 
> 赞同：1
> 
> 时间：2012-07-16T08:41:18.930
> 
> 标签：php, browser-cache

我发现这个词很难说，所以请多多包涵。

当我更新网站并要求客户查看更改时，他们总是会看到上次缓存的结果。现在这不是问题，因为我可以要求他们按 ctrl f5 刷新所有缓存。

我的问题是，有没有一种方法可以强制客户端浏览器自动刷新所有内容？什么是通常的标准？我仍然想使用缓存，因为这样可以加快网站速度，只要能够在更新时告诉它。

我知道对于 javascript 文件和 css 文件，您可以更改文件的名称，以便浏览器将其视为新文件并重新下载它，例如 myCssFilev1.2.css 但实际的 HTML 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:44:25.840

有几个元标记可以做到这一点：

```
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" /> 
```

cache-control、expires 和 pragma 设置都在不同的浏览器中工作，所以最好包括所有这些。那应该可以解决您的问题。

**编辑**

正如 Ariel 所指出的，你必须小心这一点。如果这是高负载情况，您可能希望找到另一种解决方案。您可以尝试找到“中间地带”，但调整参数（将 expires 或缓存控制的 max-age 设置为某个值）。但是，如果您没有疯狂的服务器负载，那么这应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:45:20.270

是的。假设您有一个 javascript 包含。

做：

```
<SCRIPT src="file.js?<?=filemtime('file.js')?>"></SCRIPT> 
```

这样做是将文件修改时间添加到文件的 url。因此，当您更改文件时，在浏览器中它将看起来像一个新文件，并且不会被缓存。

请注意，不断的`filemtime`调用可能会减慢速度。

您可以使用`dirname()` `__FILE__`和的组合`PHP_SELF`从相对页面自动计算物理文件页面，然后将其放入一个函数中，这样您就不必自己手动输入两次文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:52:52.657

它比看起来更棘手。老实说，我认为指示用户清空浏览器缓存是最直接的方法。如今，点击`Ctrl+Shift+Del`速度很快，并且适用于大多数浏览器，包括 Internet Explorer。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T09:12:55.140

HTTP 标头 Last-Modified 和 Etag 用于减少网络上的流量。

浏览器请求带有`Last-Modified`标头的 Web 服务器。如果日期时间与服务器文件时间相同，服务器只响应304。或者，时间不同，服务器响应200和完整内容。

Etag 执行相同的过程。

还有更多类似 If-Modified-Since 、 If-Unmodified-Since ，请参阅 [etag](http://en.wikipedia.org/wiki/HTTP_ETag)和[rfc2616的更多信息](http://www.ietf.org/rfc/rfc2616.txt)

# html - 如何在 twitter 引导元素后换行？

> ID：11500764
> 
> 赞同：35
> 
> 时间：2012-07-16T08:41:26.607
> 
> 标签：html, twitter-bootstrap, css-float, html-lists, clearfix

我很抱歉，因为这似乎是一件很简单的事情。

以下一个元素在换行符上的方式插入换行符的正确方法是什么？似乎有些事情会自动执行此操作（例如`<p>`在`中），但我看到下一个元素可以出现在最后一个元素旁边的行为。

HTML：

```
<ul class="nav nav-tabs span2">
    <li><a href="./index.html"><i class="icon-black icon-music"></i></a></li>
    <li><a href="./about.html"><i class="icon-black icon-eye-open"></i></a></li>
    <li><a href="./team.html"><i class="icon-black icon-user"></i></a></li>
    <li><a href="./contact.html"><i class="icon-black icon-envelope"></i></a></li>
</ul>
<BR /> <!-- It seems dumb to need this!  Is this really how -->
<BR /> <!-- to get a newline? -->
<BR /> <!-- Well, it's what -->
<BR /> <!-- I'm doing now, I suppose... -->
<BR />

<div class="well span6">
    <h3>I wish this appeared on the next line without having to gratuitously use BR!</h3>
</div> 
```

在 or 之后处理换行符的正确或优雅的方法是`ul`什么`div`？我是否忽略了处理此问题的代码的一般设置？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-16T08:54:12.403

您正在使用`span6`和`span2`。这两个班级都是“ `float:left`”的意思，如果可能的话，他们会总是尝试坐在彼此旁边。Twitter bootstrap 基于 12 格系统。所以你通常应该总是得到`span**#**`12。

例如： `span4`+ `span4`+`span4`或`span6`+`span6`或`span4`+ `span3`+ `span5`。

`clearfix`但是，要强制缩小跨度，您可以使用 twitter bootstraps类，而无需收听先前的浮动。为此，您的代码应如下所示：

```
<ul class="nav nav-tabs span2">
  <li><a href="./index.html"><i class="icon-black icon-music"></i></a></li>
  <li><a href="./about.html"><i class="icon-black icon-eye-open"></i></a></li>
  <li><a href="./team.html"><i class="icon-black icon-user"></i></a></li>
  <li><a href="./contact.html"><i class="icon-black icon-envelope"></i></a></li>
</ul>
<!-- Notice this following line -->
<div class="clearfix"></div>
<div class="well span6">
  <h3>I wish this appeared on the next line without having to gratuitously use BR!</h3>
</div> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-16T08:44:12.307

我相信 Twitter Bootstrap 有一个名为的类`clearfix`，您可以使用它来清除浮动。

```
<ul class="nav nav-tabs span2 clearfix"> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-30T11:20:19.273

就像[评论中提到的 KingCronus](https://stackoverflow.com/a/11500938/664054)一样，您可以使用[row](https://stackoverflow.com/a/11500938/664054)类在自己的行上制作列表或标题。您可以在一个或两个元素上使用行类：

```
<ul class="nav nav-tabs span2 row">
  <li><a href="./index.html"><i class="icon-black icon-music"></i></a></li>
  <li><a href="./about.html"><i class="icon-black icon-eye-open"></i></a></li>
  <li><a href="./team.html"><i class="icon-black icon-user"></i></a></li>
  <li><a href="./contact.html"><i class="icon-black icon-envelope"></i></a></li>
</ul>

<div class="well span6 row">
  <h3>I wish this appeared on the next line without having to gratuitously use BR!</h3>
</div> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-23T11:18:33.473

引导程序 4：

```
<div class="w-100"></div> 
```

来源：[https ://v4-alpha.getbootstrap.com/layout/grid/#equal-width-multi-row](https://v4-alpha.getbootstrap.com/layout/grid/#equal-width-multi-row)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-17T16:08:22.827

使用`br`元素很好，只要元素之间不需要太多空间，这实际上是合乎逻辑的事情，因为任何人都可以阅读您的代码并了解您使用的间距逻辑。

另一种方法是为空白创建一个自定义类。在引导程序 4 中，您可以使用

```
<div class="w-100"></div> 
```

在页面上创建一个空白行，但这与使用`<br>`标签没有什么不同。为空白创建自定义类的缺点是，对于查看您的代码的其他人来说阅读起来可能会很痛苦。自定义类在您每次使用时也会应用相同数量的空白，因此如果您希望在同一页面上使用不同数量的空白，则需要创建多个空白类。

在大多数情况下，它只是更容易使用`<br>`或`<div class="w-100"></div>`为了方便和可读性。它看起来不漂亮，但它有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-27T02:27:24.733

可能是解决方案可以使用填充属性。

```
<div class="well span6" style="padding-top: 50px">
    <h3>I wish this appeared on the next line without having to 
        gratuitously use BR!
    </h3>
</div> 
```

# iphone - 点击屏幕时身体连续移动

> ID：11500772
> 
> 赞同：0
> 
> 时间：2012-07-16T08:41:57.430
> 
> 标签：iphone, cocos2d-iphone, box2d-iphone

当我触摸屏幕时我想连续移动我的身体，当我释放触摸时停止。我正在使用 box2d 和 cocos2d，我真的不知道为什么我的代码不能很好地执行。我使用 touchesBegan 进行精灵身体运动

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
    {
        ccTime dt;
        UITouch *touch = [touches anyObject];
        CGPoint location = [touch locationInView: [touch view]];
         location=[[CCDirector sharedDirector]convertToGL:location];
        [self moveRight:dt];

    //    [self doWhateverYouWantToDo];
    //    [self doItWithATouch:touch];
    }
-(void)moveRight:(ccTime)dt
{
    CCSprite *ballright=(CCSprite *)ballbody->GetUserData();
    NSLog(@"Ball PositionX: %f",ballbody->GetPosition().x);
     NSLog(@"Ball PositionY: %f",ballbody->GetPosition().y);
    [ballright runAction:[CCMoveTo actionWithDuration:1 position:ccp(ballbody->GetPosition().x,ballbody->GetPosition().y+5*dt)]];

} 
```

所以如果它错了，请告诉我写逻辑和​​代码请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T06:53:31.803

在 ccTouchBegan 和 ccTouchEnd 中应用 LinearImpuls 或 LinearVelocity 来移动精灵体，停止精灵时应用速度为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:33:45.077

对于连续移动，CCMove* 动作没有用处。在最坏的情况下，如果您每帧创建一个新的 CCMove* 动作，对象将有效地停止移动，因为在移动开始之前有一个内置的 1 帧延迟。

使用和修改速度矢量 (CGPoint) 并将其与每帧的位置相结合以移动对象。

# javascript - 使用 MVC2/visual Studio 2008 下的默认 htm 页面在 IE8 中最大化屏幕大小？

> ID：11500774
> 
> 赞同：0
> 
> 时间：2012-07-16T08:42:23.610
> 
> 标签：javascript, jquery, asp.net-mvc-2, .net-3.5, visual-studio-2008-sp1

我有一个使用 VS2008 使用 MVC2/.net 3.5 编程的 Intranet 网站。（奇怪的）要求之一是以全屏运行 Web 应用程序（所以隐藏所有工具栏的东西）。我已经使用 javascript 创建了一个 default.htm 页面，该页面执行此操作并包含在 MVC2 项目中......我在 Visual Studio 2008 中设置了“默认页面”并且它运行正常......问题是当我部署到 IIS6 时只是忽略“default.htm”页面，因此网站不会全屏显示。

我有点认为这与默认路由有关..但是我可以就如何克服这个障碍提供一些建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:08:12.840

无论如何，通过创建一个带有空模型的新视图页面并更改默认路由以指向新页面来使其正常工作。

# visual-studio-2010 - 通过评论回滚 SourceSafe

> ID：11500775
> 
> 赞同：1
> 
> 时间：2012-07-16T08:42:33.843
> 
> 标签：visual-studio-2010, visual-sourcesafe

我使用 VSS (SourceSafe) 并想知道如何获取带有注释的文件列表（例如，所有带有注释“我的不稳定版本”的文件）并回滚这些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:08:34.580

我认为没有办法通过评论自动回滚更改，但您可以从 SourceSafe 历史记录中创建报告。该报告实际上只是一个文本文件，但它包含有关每个签入的详细信息，包括标签以及有关该签入的行更改。

您从历史对话框创建一个报告（您可以从工具->历史或 Ctrl+H 获得它），您可以按下帮助上方的一个按钮。不要忘记检查历史记录的递归，否则报告将不包含来自子文件夹的签入。

哦，顺便说一句，我是通过遵循 visual-sourcesafe 标签来到这里的 :)

# c++ - 如何编写一个可以在 BitDefender 下运行的无窗口程序？

> ID：11500776
> 
> 赞同：2
> 
> 时间：2012-07-16T08:42:37.143
> 
> 标签：c++, c, security

我发现 BitDefender 非常严格！

我无法编写没有可以在 BitDefender2012 下运行的窗口的 win32 程序。

有人可以编写没有窗口并在 BitDefender2012 下运行的 ac/c++ 程序吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:05:48.233

是的，参考它的网站并下载 SDK 以根据需要进行开发，另一件事是在命令行中运行它。

看看[http://www.bitdefender.com/oem/](http://www.bitdefender.com/oem/)

# asp.net - IIS 7.0 部署问题

> ID：11500779
> 
> 赞同：0
> 
> 时间：2012-07-16T08:42:45.297
> 
> 标签：asp.net, iis, iis-7

我们已成功迁移到 Moss 到 SharePoint 2010。现在我们当前的系统配置是：系统类型：64 位，操作系统：Windows Server 2008 R2，数据库：SQL SERVER 2008 R2，IIS 7.0，Sharepoint 2010 Server。

我有一些已经在 Windows server 2003-32 位系统中的 Asp.net Web 应用程序。我拥有所有 Web 应用程序的代码。

我想将所有 Asp.net Web 应用程序部署到 IIS 7.0。

我使用下面的参考进行部署。但我没有得到任何成功。

[http://www.codeproject.com/Tips/383492/Configuring-IIS-7-for-ASP-NET-Applications-Deploym](http://www.codeproject.com/Tips/383492/Configuring-IIS-7-for-ASP-NET-Applications-Deploym)

[http://www.codeproject.com/Articles/28693/Deploying-ASP-NET-Websites-on-IIS-7-0](http://www.codeproject.com/Articles/28693/Deploying-ASP-NET-Websites-on-IIS-7-0)

[http://gilbertadjin.wordpress.com/2009/10/10/deploying-asp-net-apps-using-iis-7/](http://gilbertadjin.wordpress.com/2009/10/10/deploying-asp-net-apps-using-iis-7/)

错误： 1\. 该网站拒绝显示此网页 2\. Internet Explorer 无法显示该网页 - 它未重定向到特定页面和文件夹。

请提出一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:45:28.910

是否安装了 ASP.NET？
你跑了`aspnet_regiis -i`吗？
应用程序池是否在所需的 ASP.NET 版本上运行？
**IIS\ISAPI 和 CGI​​ 限制中是否启用了 ASP.NET？**（这会导致 404 错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:08:42.923

检查应用程序池。有时它会解决问题

# asp.net - ASP.NET 异步页面用户界面

> ID：11500780
> 
> 赞同：1
> 
> 时间：2012-07-16T08:42:46.087
> 
> 标签：asp.net, asynchronous

我在 ASP.NET 4.0 上的 Web 应用程序中使用了 ASP.NET 2.0 的异步页面功能。我已经通过方法设置了开始和结束任务操作`AddOnPreRenderCompleteAsync`，并且在页面加载时我有一个标签，上面写着“ `operation started`”，然后开始任务开始。

为什么在异步操作完成之前我看不到这个标签？实际上，它与同步操作一样好。

异步任务同时执行时，页面不应该加载并显示标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:53:51.670

> 为什么在异步操作完成之前我看不到这个标签？

因为您只在服务器端创建异步操作。要完全理解这个概念，您需要了解[ASP.Net 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。**简而言之，在页面完全处理之前，对用户的响应不会返回**

所以你可能想知道……那有什么好处呢？那么实际的好处是*可扩展性*。ASP.Net 提供了**固定数量的线程**用于处理请求，当使用了最大线程数时，传入的请求将被放入队列中，从而可能阻塞 Web 应用程序。

当您调用异步方法（如您的情况）时，您正在**释放 ASP.Net 使用的线程**，然后可用于处理传入请求。当您的耗时操作完成后，将在新线程中重新创建页面的轻量级实例以处理您的*end 方法*

如果要显示操作的进度，则需要使用 AJAX 调用 server-method

> 异步任务同时执行时，页面不应该加载并显示标签吗？

没有

了解更多信息：

[如何在 asp.netweb 应用程序中显示第一个异步结果？](https://stackoverflow.com/q/11080860/1268570)

# text - 破解一个加密的德国食谱文本

> ID：11500781
> 
> 赞同：0
> 
> 时间：2012-07-16T08:42:56.183
> 
> 标签：text, encryption

我遇到了问题，我必须解决一个必须解密烹饪食谱文本文件的任务。我没有关于内容的任何信息，除了标题在第一行。食谱本身是德文的。我尝试了一些chifre，但没有任何效果。我认为它可能是某种转换块 chiffre，其中文本被分成不同的块，并且这些块用密钥加密。也许你有一个想法，因为不幸的是我没有想法：

```
HprTincw.Mn clnsli vc
rcean rhneettHhtden is
öretMnil ve egtanme nisirrt
n tMeesSemddmnicc ue
2set nlo ozefhn acf)nieg äantgefk
E iean emwglsh
etn ameemdun feDen es ei bl b e.ekvzbtzw Cn a nrres
r bret lnve fh. nk
efemceeKrrneu ee Ss Wm ffgewinera e
Bi e lMü tht leofü edeheihrän ei eRshe e oätmtrH esh
eihTittudelamanizgni aei aürä ente zanegt
nahce f ew ie enganT ebi.DTiuek lna e mntgnle,bs isca gör .
e glh ebsbnu cslhen eeee etähohsgdrnt
/e gsew0cagolfr.DRl unmp ctudfeBceheet e.MtnriredLnncierin dnp ce
ibmMlvrlgudeVif itaieicetce
Vdmsle g3w c g lnren asefsenZ ltn
elie fadnösnii teglnueelstElmhbrin
Dnco oieOeneteta0G )e fnmloleaieamOthnse
be hstaegsra.sBbei ohinBoecin a3i.ce
DHfp i iakirlg unoeke snZtnfdnft:2 cga,5 ene 1reee0 krtaZtesl,PiSl2E,1wi
eec:1gl1Eic efreAisceetrdBefz
Fdni a etereDsh enürüsgbudrfi eeerie.Desle gue iaweSehuü.DZtnmdmnrgrmtnKhkkru die,dnu htSui a5ntz e teegrrtne gzdcs g enwr reeas
rc hbvrseht
DTiecmth tu,adrhs enuafrbhtAbslenmlu cke.As3dTi a4mleRe mni ln i ofee ui kl gtelg
i eole g he eeui odün
Dsgli c she ietugtesElmhbrin o eihTi t3 lnRl onudr balieofeh.
nknrZpu reendVrfneen na iieicetce
afnren(rUri:e 8rd.DZpohssagnemwe e an i scihrvrsth aakc dnrezeaknseeEw5m an e eoafnmtBpp etnces atls.
aeü eeg5ghahe0gieh, ülH,8Zc,es rnca s z ir is
Zmsrhn ib LMh h irefä,F üa ce
egSl malihsenggdfmnitnzndu f u edei aufrrafstn uumtiaen eoeiaOhs
ehtesa
eiilä eün u lrf athnu e3 neeeeZlnanb(te
eTlre VfnZr.aethcndrn b e.nrcee5aof aelnpc eofgr eugdfmglsh
Beh /h 1a oc n ngl,sic ö Dchegtc bt b.nzue abehtla
trHi0ln0zlW u .oh1e,eEsuteE, ,ldbl fsh 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:30:42.983

这几乎可以肯定是某种经典密码，因为它似乎仍然有单词和空格。它有一些额外的复杂性，因为数字和标点符号 ,`.:,)/`似乎是密码字母表的一部分。

从尝试凯撒轮班开始。之后看一个扩展的单字母替换密码。如果它是一个食谱，那么你有一些可能的词，“Ingredients”、“boil”、“slice”、“kg”、“grammes”等的德语等价词。预期的字母频率对单字母密码有很大帮助。

如果它不是单字母的，那么它很可能是一个[Vigenère cipher](http://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher)。那里有可能的技术，但它们更复杂。

我的猜测是它可能是单字母的，并用额外的字符进行了扩展。

* * *

**ETA：**让我们假设它是一个转置密码。字母是正确的，但顺序不正确。首先假设换行符在正确的位置。如果它不起作用，我们可以稍后改变这个假设。

第一行是“HprTincw.Mn clnsli vc”，它有两个空格，因此是三个单词。大概这些词以大写字母开头：H、T、M，并且很可能形成标题：“热烤松饼”。或任何食谱。句号的位置为我们提供了结束字符交换位置的线索。

我们现在有一个问题，看起来元音太少，无法组成三个单词。也许我们需要在换位中包含行尾字符？第二行，“rcean rhneettHhtden is”有很多元音，所以句号可能足够长，可以包含部分或全部元音。

沿着这些路线前进。一旦你完成了一些交换，以及交换的期限，其余部分的解码将变得更容易。大写字母几乎总是跟在空格或换行符之后。标点符号通常位于空格或换行符之前。数字可以表示编号列表的元素，或者可能是数量：“克”。

可以很容易地测试一个简单的换位，查看每个第 2 个、第 3 个、第 4 个等字符。置换转置更加困难。

# c# - 基于复选框隐藏网站的一部分

> ID：11500786
> 
> 赞同：0
> 
> 时间：2012-07-16T08:43:07.633
> 
> 标签：c#

我基本上是在尝试编写一段适用于我正在从事的当前项目的 c#，其背后的想法是它将是一个可以勾选的复选框，当它被勾选时，它将写入某个数据库应该写入页面上的图像（如果有更好的方法，则不必使用写入 db 部分）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:47:37.743

假设这是 ASP.Net，您可以使用 a`Panel`并在未选中复选框时隐藏图像：

```
<asp:Panel id="panel" runat="server" Visible="false">
     <img src="" alt="MY IMAGE" />
</panel> 
```

在后面的代码中：

```
panel.Visible = tickbox.Checked; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:59:50.153

如果您只需要在勾选框上单击一次来存储信息，那么您必须将勾选框事件包含为

```
If tickbox.box_name=enable
{
  Enter here SQL coding for data insert
} 
```

这是一个基本概念，肯定会对您有所帮助。

# php - 在多个简单字符串上使用 Pregreplace

> ID：11500793
> 
> 赞同：0
> 
> 时间：2012-07-16T08:43:50.053
> 
> 标签：php, preg-replace, head.js

我正在尝试实现 head.js 以异步加载我的所有 js 文件。

为此，应按以下方式加载 javascript 文件：

```
<script>head.js("file1.js")</script>
<script>head.js("file2.js")</script>
<script>head.js("file3.js")</script> 
```

如果我的文件的样式正常，例如：

```
<script src="file1.js"></script>
<script src="file2.js"></script>
<script src="file3.js"></script> 
```

我将能够使用这样的东西来获得我想要的结果：

```
$pattern = '~\<script src=(.*?)\>~';
$replacement = '<script>head.js($1)>';
$html = preg_replace($pattern,$replacement,$html); 
```

但是，目前我的安装中有一个缩小器，它将 javascript 文件组合成以下样式：

```
<script src="http://mysite.com/js/file1.js,/js/file2.js,/js/file3.js"></script> 
```

我对 reg 表达式感到很糟糕......有人能帮我解决一个可以将其转换为 head.js 格式的替换模式吗？

差点忘了……文件的数量不限于三个，会更多，但数量不详。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:56:15.360

```
$pattern = '!(\w+\.)+js!';
$html = '<script src="http://mysite.com/js/file1.js,/js/file2.js,/js/file3.js"></script>';
preg_match_all($pattern,$html, $match);
print_r($match); 
```

输出：

```
Array ( [0] => Array ( [0] => file1.js [1] => file2.js [2] => file3.js ) ) 
```

你可以像这样得到你的第一个文件：`print $match[0][0];`，第二个`print $match[0][1];`等等。

# android - 从一个活动切换到另一个活动时如何在两个活动中显示进度对话框

> ID：11500794
> 
> 赞同：1
> 
> 时间：2012-07-16T08:43:51.830
> 
> 标签：android, android-layout, android-intent, android-widget

在我的 android 应用程序中，第一个活动调用 REST API 以使用凭据获取项目列表。现在单击任何项​​目时，都会传递项目 ID，并使用意图调用第二个活动。第二个活动使用传递的 id 调用 REST API，并显示该 id 的子项列表。

我在第一个活动中使用进度对话框。这工作正常。我希望这个进度对话框也在第二个活动中继续，直到子项目列表不显示。

目前进度对话框随着第二个活动的开始而消失，并且出现一个空白屏幕，直到子列表未获取。

**谁能指导我如何在第二个活动中继续进度对话框并在出现子列表时关闭。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:31:24.170

这是一个黑客：

在 ActivityA.java 中将 ProgressDialog pd 声明为静态

```
public static ProgressDialog pd; 
```

在 ActivityB.java 中使用静态引用`ActivityA.pd`，然后使用下面的代码。

```
if (ActivityA.pd != null) {
            if (ActivityA.pd.isShowing()) {
                ActivityA.pd.dismiss();
            }
            else {
                Log.e(Vars.TAG, "It is NOT SHOWING");
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:59:26.353

你应该使用 AsyncTask

```
class FetchTask extends AsyncTask<Object, Object, Object>
{
    ProgressDialog progress;

    @Override
    protected void onPreExecute() 
    {
         super.onPreExecute();
         progress=ProgressDialog.show(Context, "", "Loading...");
    }

    @Override
    protected Object doInBackground(Object... params) 
    {

        // fetch your data here 

         return null;
    }

    @Override
    protected void onPostExecute(Object result) 
    {
        super.onPostExecute(result);
        progress.dismiss();
    }
} 
```

然后你可以在你的`onCreate`as中执行这个任务

```
new FetchTask().execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:54:25.310

您可以使用两个选项：

1.  `Activity`您可以在第一个被关闭时停止对话框，然后`onCreate`在第二个的方法中再次显示它`Activity`。正如 AkashG 在评论中提到的那样。
2.  如果您真的希望在过渡到第二个时显示对话框`Activity`，您可以使用一个`Activity`而不是两个，并将其布局更改`Activity`为使用第二个的布局`Activity`而不是调用另一个`Activity`。但是，这可能会很复杂，因为您会将两者的功能`Activities`集成到一个中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T09:23:29.723

这是您在第二个活动的 onCreate 上的答案显示对话框的唯一解决方案

正如你所说 - 当第二个活动开始时进度对话框消失并且出现一个空白屏幕直到子列表没有获取。解决方案可以是当列表中的数据完全设置时关闭对话框我的意思是在将适配器设置为列表之后你可以关闭对话框，它不会显示空白屏幕。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T09:52:54.893

我宁愿在您的情况下使用片段（如果需要，使用支持库）。然后将这两个活动更改为片段并在（父）活动上创建 showProgressDialog 和 hideProgressDialog 方法。进度对话框将始终可见，因为它在同一个活动中，但片段将具有完全分离的逻辑，与活动相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-30T15:13:17.720

如果您将其作为 2 项活动。最好的方法是在你的第二个活动中也有进度对话框。因为一旦你的第二个活动开始，第一个活动就会进入后台。你不能期望第一个活动的进度对话框仍然可见移到后面。最好的方法是在您的第二个活动中显示一个进度对话框，并在您尝试检索子列表时显示。填充子列表 UI 后关闭进度对话框。

# java - 如何在 Spring-Data-JPA 的自定义实现存储库中使用我的基本存储库方法？

> ID：11500796
> 
> 赞同：4
> 
> 时间：2012-07-16T08:44:00.303
> 
> 标签：java, spring-data-jpa

我遵循了创建和自定义存储库的参考指南，并提出了以下内容：

```
public class MyBasicRepositoryFactoryBean<R extends JpaRepository<T, I>, T extends BaseEntity, I extends Serializable>
    extends JpaRepositoryFactoryBean<R, T, I> {

    @Override
    protected RepositoryFactorySupport createRepositoryFactory(
        EntityManager entityManager) {

        return new MyBasicRepositoryFactory<T, I>(entityManager);
    }

    private static class <T extends AlisEntity, I extends Serializable>
        extends JpaRepositoryFactory {

        private EntityManager entityManager;

        public AlisDaoFactory(EntityManager entityManager) {
        super(entityManager);

            this.entityManager = entityManager;
        }

        @Override
        protected Object getTargetRepository(RepositoryMetadata metadata) {

            return new AlisDaoImpl<T, I>((Class<T>) metadata.getDomainType(),
                entityManager);
        }

        @Override
        protected Class<?> getRepositoryBaseClass(RepositoryMetadata metadata) {

            // The RepositoryMetadata can be safely ignored, it is used by the
            // JpaRepositoryFactory
            // to check for QueryDslJpaRepository's which is out of scope.
            return MyBasicRepository.class;
        }
}

@NoRepositoryBean
public interface MyBasicRepository<T extends MyEntity, KEY extends Serializable> extends CrudRepository<T, KEY> {

    void customBaseFoo(T entity);

}

public interface ChildCustomRepository{

    void customChildFoo();
}

public interface ChildRepository extends MyBasicRepository<Child, Integer>, ChildCustomRepository {

    void findByName(String name);
} 
```

现在关于执行`customChildFoo()`，我想打电话`ChildRepository.findByName`或什至`MyBasicRepository.customBaseFoo()`。

这些当然是不可访问的，因为`ChildRepositoryImpl`implements`ChildCustomRepository`而不是`ChildRepository`，否则我将不得不为基本的 CRUD 和自定义接口编写实现。

所以我尝试`ChildRepository`像这样注入到 Impl 中：

```
public class ChildRepositoryImpl implements ChildCustomRepository{
    @Resource
    private ChildRepository base;

    @Override
    public void customChildFoo(){
        Child child = base.findByName();
        // do some logic with found child here
        base.customBaseFoo(child);            
    } 
```

但它失败的原因是： `Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'childDao': FactoryBean threw exception on object creation; nested exception is java.lang.NullPointerException at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149) at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:109) at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1442) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:248) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848) at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790) at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707) at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:438) at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:416) at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:549) at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:150) at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87) at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:303) ... 65 more Caused by: java.lang.NullPointerException at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:125) at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:41) at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142) ... 78 more`

那么，如何才能做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:27:05.143

`ApplicationContextAware`我知道的一种解决方案是在类中实现接口`ChildRepositoryImpl`并像`applicationContext.getBean(<bean name>)`. 我不想实现这一点，但这是我目前知道的唯一选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-19T12:40:15.983

命名时必须非常小心，以避免循环引用。

例如，假设您想将自定义方法添加到

```
UserDAO 
```

为此，您需要创建一个名为的新存储库接口

```
UserDAOCust 
```

然后，为了能够在您的 UserDAOCust 实现中使用 UserDAO 存储库方法，您的实现必须命名为：

```
UserDAOImpl 
```

并将 UserDAO 作为片段的成员注入。

（通过阅读 Spring JPA 文档，您似乎必须将您的实现命名为 UserDAOCustImpl，但这实际上会导致循环引用）

完整源代码（在 Kotlin 中）：

```
@Repository
interface UserDAO : CrudRepository<User, Int>, UserDAOCust
{}

interface UserDAOCust
{
    fun findByType(): Optional<List<User>>
}

class UserDAOImpl : UserDAOCust
{
    @Autowired
    private lateinit var userDAO: UCUserDAO

    override fun findByType(): Optional<List<User>>
    {
        // use this.userDAO here
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T11:19:03.600

可以将父存储库注入自定义实现，它对我有用。但我没有使用任何 `RepositoryFactoryBean`来自定义我的存储库。目前使用 Spring Data JPA 1.3.0，也许你应该尝试使用最新版本。

# php - 为什么这个 HTML 表单只产生 8 个参数而不是 9 个？

> ID：11500801
> 
> 赞同：-1
> 
> 时间：2012-07-16T08:44:20.130
> 
> 标签：php, html

我想通过表单将一些参数发送到一个php文件以插入数据库，

```
<html>
<head>
    <title>Self</title>
</head>
<body>
<?php

    function selfcheck($DB, $TechID, $ClientID, $SiteID, $Type, $LogTime){
        $dbConnection = mysql_connect($DB['server'], $DB['loginName'], $DB['password']);
        if(!$dbConnection){
            die('Error! ' . mysql_error());
            }
        mysql_select_db($DB['database'], $dbConnection);
        $result = mysql_query("SELECT COUNT(*) FROM Log") or die('Error! ' . mysql_error());
        while($row = mysql_fetch_array($result)){
            $count = $row['COUNT(*)'];
            $count = $count+1;
            print $count.", ".$TechID.", ".$ClientID.", ".$SiteID.", ".$LogTime.", ".$Type."<br>";
            $query = "INSERT INTO Log (LogID, TechID, ClientID, SiteID, LogTime, Type)
                        VALUES (".$count.", ".$TechID.", ".$ClientID.", ".$SiteID.", ".$LogTime.", ".$Type.")";
            mysql_query($query);
        }
    }

    $LogTime = date('Y/m/d H:i', mktime($_GET['Hour'], $_GET['Minute'], 0, $_GET['Month'], $_GET['Day'], $_GET['Year']));
    selfcheck($DB, $_GET['TechID'], $_GET['ClientID'], $_GET['SiteID'], $_GET['Type'], $LogTime);
?>
</body> 
```

如您所见，有九个 Get 值，但是，当我尝试执行代码时，服务器回复

```
"Undefined index: Minute in C:\wamp\www\NFC\self.php on line 29", and show in the URL, minute parameter has not been sent. Why does this happen? And how can I solve this problem? 
```

这是发送请求的代码。

```
print "<form method='get' name='check' action='self.php'>";
    $result = mysql_query("SELECT * FROM Tech") or die('Error! '.mysql_error());
    print "Name<select id='tech' name='TechID'>";
    while($row = mysql_fetch_array($result)){
        print "<option value=".$row['TechID'].">".$row['TechName']."</option>";
    }
    print "</select>";
    $result = mysql_query("SELECT * FROM Client") or die('Error! '.mysql_error());
    print "Name<select id='client' name='ClientID'>";
    while($row = mysql_fetch_array($result)){
        print "<option value=".$row['ClientID'].">".$row['ClientName']."</option>";
    }
    print "</select>";
    $result = mysql_query("SELECT * FROM Site") or die('Error! '.mysql_error());
    print "Name<select id='site'name='SiteID'>";
    while($row = mysql_fetch_array($result)){
        print "<option value=".$row['SiteID'].">".$row['SiteName']."</option>";
    }
    print "</select>";
    print "Type<select id='type' name='Type'>";
    print "<option value='Checkin'>Check In</option>";
    print "<option value='Checkout'>Check Out</option>";
    print "</select><br>";
    print "Year<input type='text' id='year' size='4' name='Year'/>";
    print "Month<input type='text' id='month' size='2' name='Month'/>";
    print "Day<input type='text' id='day' size'2' name='Day'/>";
    print "Hour in 24<input type='text' id='hour' size='2' name='Hour'/>";
    print "Minute<input type='text' id='minute' size'2'name='Minute'/>";
    print "<input type='submit' value='Manual check' onclick='self.php'/>";
    print "</form>"; 
```

对于某些选择，它位于 PHP 文件中，我想从数据库中获取选项，而不是对它们进行硬编码。我曾尝试通过 javascript 文件发送参数，但情况无法解决。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T08:51:03.543

以这种方式构建标记实际上并没有帮助自己。

我怀疑你的答案在这里： -

```
print "Minute<input type='text' id='minute' size'2'name='Minute'/>"; 
```

**size**属性的结尾和**name**属性的开头之间没有空格。就拾取该值的页面而言，“分钟”值不存在。

将其更改为：-

```
print "Minute<input type='text' id='minute' size='2' name='Minute'/>"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T08:49:13.017

使用 GET 方法提交表单数据。此方法对提交数据有限制。使用 POST 方法。提交数据的空间非常无限。

PS：尽量避免用php写Html，改用正常方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T08:52:07.837

在 PHP ini 文件中，您可以发现`max_input_time`&`post_max_size`这两个常量都会影响 POST 或 GET 数据。在 GET 的情况下，最大 URL 长度也适用。

# vbscript - 使用 OTA 和 JACOB 在 ALM 中创建测试脚本的问题

> ID：11500803
> 
> 赞同：0
> 
> 时间：2012-07-16T08:44:33.827
> 
> 标签：vbscript, jacob, hp-quality-center

我在 vbscript 中创建了一段代码，通过它我可以通过 OTA 在 ALM 中创建测试脚本。现在我试图通过使用 JACOB 作为 Java 2 Com 桥的 Java 做同样的事情，我已经能够使用它创建一个空的测试脚本，但我不确定如何设置各种字段值。

VBScript 代码（完美运行）：

```
 Set tdc = CreateObject("TDAPIOLE80.TDConnection")
           If (tdc Is Nothing) Then
             MSGBOX "Connection is not created"
           Else
            MSGBOX "Connection is created"
           End If
           tdc.InitConnectionEx connectionString
           tdc.Login userName, password
           tdc.Connect domain, project
           Set TreeMgr = tdc.TreeManager
           Set testFolder = TreeMgr.NodeByPath(uploadDirectoryPath)
           Set testFactory = testFolder.TestFactory
           Set testItem = testFactory.AddItem (NULL)
           testItem.Field("TS_DESCRIPTION")="Test script description"
           ... 
```

Java 代码（只有这么多有效）

```
 ActiveXComponent almConnection=new ActiveXComponent("TDAPIOLE80.TDConnection");
    Dispatch.call(almConnection, "InitConnectionEx", "conn string");        
    Dispatch.call(almConnection, "login", "uname","pword");
    Dispatch.call(almConnection, "connect","project","domain");     
    Dispatch treeMgr=Dispatch.get(almConnection, "TreeManager").toDispatch();
    Dispatch testFolder=Dispatch.call(treeMgr,"NodeByPath", "project path").toDispatch();
    Dispatch testFactory=Dispatch.get(testFolder, "TestFactory").toDispatch();              
    Dispatch testItem=Dispatch.call(testFactory,"AddItem","TO_BE_DELETED_SCRIPT9").toDispatch(); 
```

现在问题是 VBScript 代码的最后一行，

```
 testItem.Field("TS_DESCRIPTION")="Test script description" 
```

如何使用 JACOB 在 Java 中对此进行编码？请帮忙。我做了很多谷歌搜索，但没有找到任何实质性的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T21:16:59.663

这对我有用：

```
Dispatch testItem=Dispatch.call(testFactory,"AddItem","TestName").toDispatch();
Dispatch.put(testItem, "Name", "newTestName");
Dispatch.call(testItem,"Post"); 
```

如何使用 JACOB 更改 HPQC 中的字段值：

[http://sourceforge.net/projects/jacob-project/forums/forum/375946/topic/4830213](http://sourceforge.net/projects/jacob-project/forums/forum/375946/topic/4830213)

# java - spring DriverManagerDataSource 打开了很多连接？

> ID：11500804
> 
> 赞同：5
> 
> 时间：2012-07-16T08:44:35.123
> 
> 标签：java, spring, hibernate, connection, connection-pooling

我正在使用 spring 和 hibernate 独立应用程序。我正在使用以下配置。

```
<bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${driverClassName}" />
        <property name="url" value="${db.url}" />
        <property name="username" value="${db.username}" />
        <property name="password" value="${db.password}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.some.SomePojo</value>
            </list>
        </property>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${mdm.db.dialect}</prop>

            </props>
        </property>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean> 
```

DriverManagerDataSource 每次请求数据时都会打开数据库连接吗？或者它是否重用已经打开的连接？另外，它会关闭空闲连接吗？要使用连接池概念，我需要 c3p0 吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T08:48:43.317

Java 文档状态；

> 这个类不是一个实际的连接池；它实际上并不池连接。

查看更多信息

[http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/jdbc/datasource/DriverManagerDataSource.html](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/jdbc/datasource/DriverManagerDataSource.html)

# winforms - 如何在第二和第三区域之间重新创建这种阴影效果？

> ID：11500815
> 
> 赞同：0
> 
> 时间：2012-07-16T08:45:33.097
> 
> 标签：winforms

我需要复制此窗口的底部以在我自己的表单中使用。

![在此处输入图像描述](../Images/3b5ee03da53bd365e7009c6552776132.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:55:08.610

您需要做的是覆盖现有控件的绘制或创建自己的控件。就个人而言，我会覆盖`Panel`控件的绘制，然后它将成为窗口整个底部的面板。

渐变面板是一个常见的要求，这里有一篇博客文章[（](http://weblogs.asp.net/cfrazier/archive/2005/08/10/422179.aspx)代码如下）。

显然您不想绘制完整的渐变，但它演示了绘制如何在控件上进行。

您可以使用整个面板的较小子集绘制渐变，也可以使用类似的东西[`Graphics.DrawPath`](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawpath)绘制并以正确的颜色绘制直线。

* * *

**博客文章代码**（避免死链接）：

```
using System;
using System.ComponentModel;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Windows.Forms;

namespace PostXING.Controls
{
    /// <summary>
    /// GradientPanel is just like a regular panel except it optionally  
    /// shows a gradient.
    /// </summary>
    [ToolboxBitmap(typeof(Panel))]
    public class GradientPanel : Panel
    {
        /// <summary>
        /// Property GradientColor (Color)
        /// </summary>
        private Color _gradientColor;
        public Color GradientColor {
            get { return this._gradientColor;}
            set { this._gradientColor = value;}
        }

        /// <summary>
        /// Property Rotation (float)
        /// </summary>
        private float _rotation;
        public float Rotation {
            get { return this._rotation;}
            set { this._rotation = value;}
        }

        protected override void OnPaint(PaintEventArgs e) {
                        if(e.ClipRectangle.IsEmpty) return; //why draw if non-visible?

            using(LinearGradientBrush lgb = new 
                           LinearGradientBrush(this.ClientRectangle, 
                      this.BackColor, 
                      this.GradientColor, 
                      this.Rotation)){
                e.Graphics.FillRectangle(lgb, this.ClientRectangle);
            }

                        base.OnPaint (e); //right, want anything handled to be drawn too.
        }
    }
} 
```

# c# - mysql 和 asp.net 连接

> ID：11500816
> 
> 赞同：0
> 
> 时间：2012-07-16T08:45:38.397
> 
> 标签：c#, asp.net, mysql

我正在尝试开发asp.net 网站。根据要求，我必须
从我的sql db 中获取一些数据并更新到ms sql server。

我想从我的 sql 数据库中获取一些更新的信息。如何使用 asp.net 在我的 sql db 中跟踪更新的字段或 id。

需要网络服务或任何技术？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:52:00.830

这听起来像是一个不需要大量用户交互的后台作业。这是我的建议：

1.  在您的 MySQL 数据库中，具有 UpdatedDate 字段并确保每次更改数据时都会更新该字段。
2.  创建一个 SSIS 包，检查今天更新的行所需的表，并将其插入/更新到 SQL 数据库中。
3.  在 SQL 中创建一个作业并使用它来配置每天的 SSIS 包执行。

更新：您可以在 SQL 数据库中创建包。在包中，您的源将是 MySQL 数据库，而接收器将是 SQL 数据库。

# html - HTML Div 对齐问题（没有固定宽度）

> ID：11500822
> 
> 赞同：0
> 
> 时间：2012-07-16T08:45:56.767
> 
> 标签：html, css

我有一个 HTML，如[http://jsfiddle.net/Lijo/9sWbc/1/](http://jsfiddle.net/Lijo/9sWbc/1/)所示。我需要在一行中制作地址，在第二行中制作其他三列（城市州和国家/地区）。每列的宽度不应该是固定的。我们怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:55:44.570

我想这就是你需要的：http: [//jsfiddle.net/9sWbc/6/](http://jsfiddle.net/9sWbc/6/)

编辑的CSS：

```
#infoDiv
{
     width:550px;
     border:1px solid Red;
}
.dataLine
{    
    width:100%;
    min-width:650px;
    height:auto;
    margin:1px 1px 1px 1px;
    padding: 0 0 0 0px;
    /*border:1px solid Cyan;*/
}
.freeTwoColumnFirstEntry
{    
    height:auto;
    margin:0 0 0 0px;
    padding:0 0 0 2px;
    font:normal 9pt Arial;
    display:inline;

}
.freeTwoColumnSecondEntry
{    
    height:auto;
    margin:0 0 0 0px;
    padding:0 0 0 2px;
    font:normal 9pt Arial;
    display:inline;

}
#cityDiv, #cityDivVal, #stateDiv, #stateDivVal, #countryDiv, #countryDivVal{
    display:inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:59:14.320

[http://jsfiddle.net/9sWbc/7/](http://jsfiddle.net/9sWbc/7/) 检查这个 jsfiddle 链接，它在第一行显示地址，在第二行显示 abd 市州县。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:10:52.150

此代码段将使地址在一行中，其他三列（城市州和国家/地区）在第二行中。

```
<div id="wrapper1">
    <div id="container1">
        <div id="header1">
        </div>
        <div class="clear">
        </div>
        <div id="centralContainer1">
            <div id="mainContainer1">
                <div id="contentHolderDiv1" class="contentHolderDiv1">
                    <div id="searchContainer" class="searchContainer">
                        <div id="entryValues" class="searchValuesDiv">
                            <div id="infoDiv">

                                <div id="address1Div" class="dataLine">
                                    <span class="freeTwoColumnFirstEntry">
                                        Address:
                                    </span>
                                    <span class="freeTwoColumnSecondEntry">
                                        <span id="detailContentPlaceholder_lblAddress1">Santhom Avenue, 3456</span>
                                    </span>
                                </div>

                                <div id="cityStateCountryDiv" class="dataLine">
                                    <span id="cityDiv" class="freeTwoColumnFirstEntry">
                                        City:
                                    </span>
                                    <span id="cityDivVal" class="freeTwoColumnSecondEntry">
                                        <span id="detailContentPlaceholder_lblCity">Akron</span>
                                    </span>
                                    <span id="stateDiv" class="freeTwoColumnFirstEntry">
                                        State:
                                    </span>
                                    <span id="stateDivVal" class="freeTwoColumnSecondEntry">
                                        <span id="detailContentPlaceholder_lblState">OH</span>
                                    </span>
                                    <span id="countryDiv" class="freeTwoColumnFirstEntry">
                                        Country:
                                    </span>
                                    <span id="countryDivVal" class="freeTwoColumnSecondEntry">
                                        <span id="detailContentPlaceholder_lblCountry">United States</span>
                                    </span>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="clear">
                    </div>
                </div>
            </div>
            <div class="clear">
            </div>
        </div>
    </div>
</div> 
```

# ios - 搜索网页并在本机应用程序中显示结果

> ID：11500832
> 
> 赞同：0
> 
> 时间：2012-07-16T08:46:26.330
> 
> 标签：ios, objective-c

我现在一直在研究搜索应用程序，昨天我遇到了问题。我可以说我的应用类似于那些酒店搜索应用。我正在浏览互联网，但找不到可靠的“网络数据处理”教程或它的名称。

所以我的问题是，当用户按下搜索按钮时，如何将结果或数据获取到我的应用程序？假设我想在某个位置搜索一些酒店，通常用于将结果获取到我的应用程序并将其显示在 TableView 中的概念是什么？

现在有人怎么做，我不需要一步一步的指南:)只是基本概念？我会在这里接受一切帮助，我迷路了：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:07:36.930

我不确定我是否正确，但你可以这样做。（只是一个概念，不是教程）

您可以使用 Google Maps API，不确定哪一个，但 Places API 看起来最适合您 - [https://developers.google.com/places/](https://developers.google.com/places/)。

然后只需发送请求，接收并处理服务器的 JSON 响应，并在您的应用程序中显示结果。

实现起来应该不难，一定要通读文档:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:32:36.620

Google Map API 是您可以找到的东西。您可以使用 xml 文件或数据库来存储地点详细信息（经纬度、地址等）。在搜索时，您可以读取 xml 或数据库。如果你喜欢 jQuery，你可以使用自动完成来简化这个搜索过程：D

# android - 如何找到 MapView 上的 Overlay ？

> ID：11500833
> 
> 赞同：0
> 
> 时间：2012-07-16T08:46:34.997
> 
> 标签：android, overlay, android-mapview

我确实有一个覆盖在几种 MapViews 上。现在，我需要在一种情况下从 Overlay 中使 MapView 无效。

我找不到获取此 Overlay 绘制的 MapView 的方法。有没有办法从 Overlay 中找到 MapView？

是的，我知道，我可以将 MapView 放在 Overlay 的附加构造函数中，但首先我想尝试在没有附加构造函数的情况下是否可行。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:54:21.550

尝试将 Overlay 放在 MapView 中以使其成为内部类，但在这种情况下，您可能无法在其他地方使用它，或者尝试使用好的旧模式观察器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:53:20.763

MapView 被传递给大多数方法 - 真的取决于你什么时候必须使无效：

```
public void draw(android.graphics.Canvas canvas,
        MapView mapView,  <<<<<<<<<<<<<<<
        boolean shadow) 
```

也传递给 onKeyDown、onKeyUp、OnTap、OnTouchEven、onTrackballEvent

# xslt - 转换异常。在子元素后添加属性

> ID：11500835
> 
> 赞同：0
> 
> 时间：2012-07-16T08:46:43.563
> 
> 标签：xslt

我有这个 XML：

```
 <root>   
      <tab name="Detail">
        <section name="mysection">
          <items level="1">
            <Idx_name>9</Idx_name>
            <Type>mytype</Type>
            <item name="myname">
              <Grams um="(g)">9,0</Grams>
              <Pre-infusion>Max</Pre-infusion>
            </item>
            <Std._Mode>On</Std._Mode>
            <Price>100</Price>
          </items>
        </section>   
    </tab> 
</root> 
```

这个 XSLT：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>
  <xsl:template match="node()">
    <xsl:copy>
      <xsl:copy-of select="@*"/>
      <xsl:apply-templates select="node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="items/*">
    <xsl:choose>
      <xsl:when test="not(name()='item')">
        <xsl:attribute name="{name()}"><xsl:value-of select="."/></xsl:attribute>
      </xsl:when>
      <xsl:otherwise>
        <xsl:copy>
          <xsl:copy-of select="@*"/>
          <xsl:value-of select="."/>
        </xsl:copy>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

现在，我想要的是：

```
<root>
  <tab name="Detail">
    <section name="mysection">
      <items level="1" Idx_name="9" Type="mytype" Std._Mode="On" Price="100">
        <item name="myname">9,0Max</item>
      </items>
    </section>
  </tab>
</root> 
```

我收到错误消息：“不能在孩子之后添加属性”

不幸的是，我无法更改原始 XML 的节点项中的元素顺序

我该怎么做 ？

谢谢

伊万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:44:33.113

确保首先处理要转换为属性的元素，例如使用 XSLT 2.0，您可以在其中处理具有您可以简单执行的顺序的序列

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@*, node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="items">
  <xsl:copy>
    <xsl:apply-templates select="@*, * except item, item"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="items/*[not(self::item)]">
  <xsl:attribute name="{name()}" select="."/>
</xsl:template>

<xsl:template match="items/item">
  <xsl:copy>
    <xsl:apply-templates select="@*"/>
    <xsl:value-of select="."/>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

使用 XSLT 1.0，您需要按您想要的顺序拼出几个`apply-templates`。

# ios - iOS：将目标切换到 ios 4.3 (arc) 时找不到符号 _ojbc_loadweakretained

> ID：11500836
> 
> 赞同：0
> 
> 时间：2012-07-16T08:46:49.317
> 
> 标签：ios, memory-management, automatic-ref-counting

一开始，我们构建了面向 5.0+ 的 iOS 应用程序，并使用 ARC 来简单地进行内存管理。后来为了向后兼容，我们决定支持 iOS 4.3。然后我只是

1.  安装 iOS 4.3 模拟器
2.  将应用部署目标修改为 4.3
3.  清理、构建、运行

但是应用程序意外退出，输出如下

> dyld：找不到符号：_objc_loadWeakRetained
> 
> 引用自：/Users/xxx/Library/Application Support/iPhone Simulator/4.3.2/Applications/16E98912-33B5-4660-A9A3-879D92735E44/myApp.app/myApp
> 
> 预期在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk/System/Library/Frameworks/Foundation.framework/Foundation

我知道 4.3 不支持弱引用，但奇怪的是编译器在编译时从来没有抱怨过，它只是在运行时崩溃了。

**更新：**
我使用**unsafe_unretained**而不是弱关键字，该应用程序仍然运行。但是我收到了很多警告，例如

> __NSAutoreleaseNoPool(): __NSArrayM 类的对象 0x564bd90 自动释放，没有适当的池 - 只是泄漏"* '

正常吗？如何消除这些警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:42:20.963

好吧，如果问题消失，看看您是否将部署目标更改回 5.1 会很有趣。我的猜测是不会。

我知道得到这种错误的唯一方法是：

1) 是创建一个并发 NSOperation，然后不为其提供运行循环/自动释放池 2) 不要在 main.m 中创建一个自动释放池 3) 使用一个对象创建一个 NSThread，然后尝试在该线程上向一个对象发送消息没有创建自动释放池

[假设问题很可能是 3)，您可以在过去的讨论](https://stackoverflow.com/questions/5350174/how-to-set-up-an-autorelease-pool-when-using-nsthread-detachnewthreadselectort)中了解如何为线程创建池

# javascript - Slickgrid 移动外观

> ID：11500842
> 
> 赞同：0
> 
> 时间：2012-07-16T08:47:08.757
> 
> 标签：javascript, jquery, html, css, slickgrid

是否可以更改[Slickgrid](https://github.com/mleibman/SlickGrid/wiki)的外观，以便在移动应用程序中每一行看起来都像一个按钮？此外，似乎将格式化程序应用于列（以便在其中放置一个按钮），如下所示：

```
function linkFormatter(row, cell, value, columnDef, dataContext) {
   return "<a href='myUrl' data-role='button'>View... </a>";
} 
```

不影响单元格的外观，其内容总是看起来像一个正常的链接。任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:00:35.493

Slickgrid 不是为移动客户端设计的。参考这个问题的答案：

[Android 浏览器中的 Slickgrid（内部 div 滚动）](https://stackoverflow.com/questions/10051694/slickgrid-in-the-android-browser-inner-div-scrolling)

还有这个网址：[https ://groups.google.com/forum/#!msg/slickgrid/eP7dhCo3ZhE/fnX-DV9mRxMJ](https://groups.google.com/forum/#!msg/slickgrid/eP7dhCo3ZhE/fnX-DV9mRxMJ)

# qt - QTest：可以测试拖放吗？

> ID：11500844
> 
> 赞同：5
> 
> 时间：2012-07-16T08:47:35.200
> 
> 标签：qt, unit-testing, qtestlib

我尝试使用简单的序列来测试拖放：mousePress + mouseMove + mouseRelease。但这是行不通的。

我调查了 qtest 源并发现，移动事件是通过主调度程序 processEvent() 测试的。我还在 qt bug-tracker 中发现了一些错误：[1](https://bugreports.qt-project.org/browse/QTBUG-13397) , [2](https://bugreports.qt-project.org/browse/QTBUG-5232)

所以，我认为，在最新的稳定 Qt4 下测试拖放是不可能的。有这方面的成功案例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T23:06:37.900

我没有运气通过 QTest 鼠标功能模拟拖放，[digia 说](https://bugreports.qt-project.org/browse/QTBUG-13397) 他们没有将该功能添加到 QT4。我通过类似于上述链接中建议的方法实现了拖放测试：

创建您的 mime_data，例如：

```
mime_data = widget_model.mimeData(indexes) 
```

或者

```
mime_data = QMimeData()
mime_data.setText(widget.text()) 
```

然后使用这样的函数来删除数据：

```
def dropOnto(self, widget, mime_data):
    action = Qt.CopyAction|Qt.MoveAction
    pt = widget.rect().center()
    drag_drop = QDropEvent(pt, action, mime_data, Qt.LeftButton, Qt.NoModifier)
    drag_drop.acceptProposedAction()
    widget.dropEvent(drag_drop) 
```

# php - PHP CURL 错误 - curl: (56) Recv failure: Connection reset by peer

> ID：11500847
> 
> 赞同：11
> 
> 时间：2012-07-16T08:48:14.547
> 
> 标签：php, curl

基本上，这个错误只发生在 CURL

```
curl: (56) Recv failure: Connection reset by peer 
```

但是当我直接在浏览器上直接访问它时，它可以工作！

您对修复此问题或此错误的原因有何建议？

注意：服务器是用 ASP 编码的，它只发生在一次 API 调用上

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-05T05:16:45.200

我通过从 URL 中删除**空格字符解决了这个问题。**在我的情况下，出错的是代理服务器，而不是 Web 服务器。

在 PHP 中：

```
 curl_setopt($ch, CURLOPT_URL, trim($url)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T07:50:02.603

我记得很久以前也遇到过同样的问题。虽然我不记得究竟是什么解决了这个问题，但我记得尝试过以下操作：

1.  我试图直接在 URL 中传递查询参数，我尝试通过 POST 方法

2.  我尝试使用带有 curl 的代理来查看我是否可能被另一台服务器阻止

3.  我相信我还要求我的主人调查一下，他们做了一些 Apache 设置更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T13:26:43.900

我对这段代码有类似的问题：

```
 $url = "http://xxx.xxx.xxx.xxx";
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_PORT, 44455); //Set the port to connect to
        //curl_setopt($ch, CURLOPT_RETURNTRANSFER, 44455); 
        curl_setopt($ch, CURLOPT_URL, $url);
        echo $xml = curl_exec($ch);
        if(curl_errno($ch))
        {
            echo 'error:' . curl_error($ch);
        }
        curl_close($ch); 
```

通过禁用它解决了这个问题：

```
 //curl_setopt($ch, CURLOPT_RETURNTRANSFER, 44455); 
```

# logout - 注销后浏览器缓存

> ID：11500848
> 
> 赞同：1
> 
> 时间：2012-07-16T08:48:19.113
> 
> 标签：logout

从应用程序注销后，如果我按下返回按钮，则页面被浏览器缓存。

我在母版页中放置元标记不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:53:31.317

我不确定您在谈论哪些元标签，但通常这些标签会使页面“过期”，您可以将其放入模板中。

```
 <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
  <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
  <META HTTP-EQUIV="EXPIRES" CONTENT="0"> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T05:29:18.177

正如@m1ke 所说，通过设置正确的 HTTP 标头而不是尝试设置元标记来控制缓存会更好，因为您可能已经发现，许多浏览器会忽略元标记中的缓存指令。

不过，我几乎不担心 Web 应用程序中的 HTTP 标头或缓存。我只是将 Web 服务器中的默认缓存策略设置为“访问加 0 天”（即不缓存任何内容），然后为 jpg、png 和其他我想要缓存的资产放入特定*条目*。你真正需要担心的是在注销时清除会话，你应该没问题。

我强烈建议阅读以下关于缓存的文章：[http ://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)

# c# - 通过循环将项目添加到 DataContext

> ID：11500864
> 
> 赞同：1
> 
> 时间：2012-07-16T08:49:18.927
> 
> 标签：c#, wpf, loops, datatemplate, datacontext

我在 C#，WPF 中有以下代码：

```
base.DataContext = new DataTemplate[]
                {
                    new DataTemplate
                    {
                        lblText = "First",
                        txtBoxContent = ""
                    },

                    new DataTemplate
                    {
                        lblText = "Second",
                        txtBoxContent = "Something"
                    }
                }; 
```

但我需要从数据库中动态填充 DataContext。我的想法是这样的：

```
base.DataContext = new DataTemplate[]
        {
            for(int i = 0; i< dsTmp.Tables[0].Rows.Count; i++)
            {
                new DataTemplate
                {
                    lblText = "Count: ",
                    txtBoxContent = dsTmp.Tables[0].Rows[i][0].ToString();
                }
            }
        }; 
```

当我输入这个时，它会对我大喊一些语法错误；

谁能告诉我，如何正确写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:01:13.273

您不能在[对象初始值](http://msdn.microsoft.com/en-us/library/bb384062.aspx)设定项语法中包含代码。为什么不简单地这样做：

```
 var list = new DataTemplate[dsTmp.Tables[0].Rows.Count];
   for(int i = 0; i< dsTmp.Tables[0].Rows.Count; i++)
    {
        var item = new DataTemplate
        {
            lblText = "Count: ",
            txtBoxContent = dsTmp.Tables[0].Rows[i][0].ToString();
        };
        list[i] = item;
    }

    this.DataContext = list; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:12:58.517

MBen 和 Habib 已经回答了 for 失败的原因，因为您不能在对象初始化程序中执行循环，并且提供了循环替代方案。

或者，您可以使用 linq 执行初始化。

```
this.DataContext=dsTmp.Tables[0].Rows.Select(
  x=>new DataTemplate { 
                        lblText = "Count: ",
                        txtBoxContent=x[0].ToString()
                      }).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T09:01:21.567

缺少的错误`;`有点误导。实际问题是您正在尝试使用循环创建 DataTemplate 数组，您不能在数组/对象初始化中使用循环。试试下面的。

```
DataTemplate[] tempDataTemplate = new DataTemplate[ds.Temp.Tables[0].Rows.Count]();
for(int i = 0; i< dsTmp.Tables[0].Rows.Count; i++)
            {

             tempDataTemplate[i] =   new DataTemplate
                                             {
                                             lblText = "Count: ",
                                             txtBoxContent = dsTmp.Tables[0].Rows[i][0].ToString();
                                             };
            }

base.DataContext = tempDataTemplate; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T09:06:24.660

我不知道你想实现什么，但你有没有尝试过使用 viewmodel first 方法的 mvvm？

创建一个视图模型类，例如具有 2 个公共属性 MyText、MyContent 的 MyData。创建这些对象的集合并从您的数据库中填充它。

至少您需要一个将 itemssource 绑定设置为您的集合的 itemscontrol 和一个用于 MyData 对象的数据模板。

```
<DataTemplate DataType="{x:Type local:MyData}">
  <view:MyDataViewControl />
</DataTemplate> 
```

现在您可以在 itemscontrol 中看到所有动态对象。

# ipa - 编辑和编译 install_name_tool

> ID：11500865
> 
> 赞同：0
> 
> 时间：2012-07-16T08:49:26.030
> 
> 标签：ipa, install-name-tool

我想将 LC_LOADDYLIB 命令添加到 ipa 文件中存在的我的 mach o 二进制文件中。install_name_tool 用于更改链接到另一个库的任何现有库。我想向 ipa 添加一个新库。所以我想如果我编辑 install_name_tool.c 文件，我将能够添加这个功能。我从 Apple 开源下载了 cctools 项目。问题是我无法编译 c 文件。我收到错误。谁能建议任何将库链接到 IPA 或编译 install_name_tool 文件的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:48:27.530

安装 Xcode 命令行工具，你应该可以编译它。

install_name_tool 只能在现有 LC_LOAD_DYLIB 命令中就地编辑库路径。添加命令需要你做更多的事情......

# jquery - jquery 等到 iframe 被加载

> ID：11500868
> 
> 赞同：4
> 
> 时间：2012-07-16T08:49:31.257
> 
> 标签：jquery, iframe, load

您好，当我以这种方式单击它时，我正在使用一个按钮来更改 iframe 的 src：

```
$("#iframe").attr('src',"someurl"); 
```

在加载新 URL 之前，有什么方法可以显示“请稍候”消息或 gif 加载器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:00:33.097

为什么不使用具有回调来管理显示文本的 jQuery.load 函数：

HTML

```
<button id="myLoadButton">Load</button>
<div id="Myiframe"></div> 
```

JS

```
$('#myLoadButton').click(function(){
   $(this).text('Please wait...');
   $('#Myiframe').load('ajax/test.html', function(){
      $('#myLoadButton').text('Content loaded!');
   });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-19T09:19:42.260

src 属性只是设置了框架的 url，但加载功能由 jquery 引擎维护。所以 ajax 全局函数等待 load() 函数完成

```
 $("#iframe").attr('src',"someurl"); 
```

首先确保 ajax 事件是异步的并使用它，

```
 $('#iframe').load('someurl'); 
```

这是在加载新 URL 之前显示“请稍候”消息或 gif 加载器的唯一方法

# git - 让 github 与 svn 同步

> ID：11500872
> 
> 赞同：1
> 
> 时间：2012-07-16T08:49:47.497
> 
> 标签：git, svn, github

历史上，一个开源项目的所有者使用 svn，并希望继续使用 svn。新人希望使用 github 来使用所有的 DVCS 和 github 工具一起工作。

我们可以获取 svn 并定期提交到 github，但在这种情况下，我们会丢失 svn 提交和评论。

是否有可能有一个自动系统接受新的 svn 提交，并使用用户名和评论重新创建 github 中的所有提交？

我们不需要将我们的更改放回 svn（没有提交到 svn，svn 对我们来说只是只读的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:49:06.177

您可以将[SubGit](http://subgit.com)安装到您的 SVN 服务器中。然后为 SVN 存储库创建一个 Git 接口。您只需设置对新创建的 Git 存储库的读/写访问权限。推送到 Git 接口的每个提交都会转换为 SVN 修订版，反之亦然。SubGit 关心并发。所以这个 Git 界面可能会被你的新人使用。

如果您需要 GitHub 上的只读镜像，您可以在某个 cron 脚本中运行“git push --all --tags”以从本地 Git 界面推送到 GitHub。

不幸的是，我不知道任何允许推送到 GitHub 并允许另一个开发人员同时提交到您的本地 SVN 存储库的并发安全解决方案，而不会让 SVN 和 GitHub 的历史发生分歧。

# email - HTML 电子邮件黑莓

> ID：11500875
> 
> 赞同：1
> 
> 时间：2012-07-16T08:50:21.140
> 
> 标签：email, blackberry, html-email

我有以下代码可以使用预定义的电子邮件打开 Blackberry 电子邮件编写器：

```
Message m = new Message();
m.setContent("Body");
m.setSubject("Subject");

Invoke.invokeApplication(Invoke.APP_TYPE_MESSAGES, new MessageArguments(m)); 
```

我可以将 HTML 代码作为电子邮件内容吗？我想要一些**粗体**文本和一个网络链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:48:34.250

如果你看看[这个黑莓论坛](http://supportforums.blackberry.com/t5/Java-Development/Create-Message-with-embedded-image/td-p/581373)，看起来人们在使用时遇到了麻烦`Message.setContent(String)`。您可能想尝试将消息内容添加为多部分 html 部分。

这是一些[示例代码](http://www.rgagnon.com/javadetails/java-0504.html)。不过，那是标准的 Java，所以它只是为了让您大致了解多部分消息所涉及的内容。

这是一个[BlackBerry 多部分示例](http://docs.blackberry.com/en/developers/deliverables/11935/Send_msg_with_attachment_565471_11.jsp)。我认为您可以通过将身体部位的内容类型设置为`text/html`.

# c# - 如何让我的 Windows 服务以特定的时间间隔运行？

> ID：11500877
> 
> 赞同：3
> 
> 时间：2012-07-16T08:50:34.017
> 
> 标签：c#, windows, windows-services

我想写一个windows服务。但它需要在特定时间运行。例如，我的服务应该每 5 分钟向我发送一次电子邮件。

```
private Timer _timer;
private DateTime _lastRun = DateTime.Now;

protected override void OnStart(string[] args)
{
    _timer = new Timer(10 * 60 * 1000); // every 10 minutes
    _timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
    //...
}

private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    // ignore the time, just compare the date
    if (_lastRun.Date < DateTime.Now.Date)
    {
        // stop the timer while we are running the cleanup task
        _timer.Stop();
        //
        // do cleanup stuff
        //
        _lastRun = DateTime.Now;
        _timer.Start();
    }
} 
```

我希望我的服务每 5 分钟向我发送一次电子邮件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T08:56:25.243

好吧，我也看到了另一个讨论[Windows 服务与计划任务](https://stackoverflow.com/questions/390307/windows-service-vs-scheduled-task)的[问题](http://haacked.com/archive/2005/10/24/10997.aspx)。因此，您可能想看看除此之外的 2 个类似问题，这可能会有所帮助：

*   [如何安排 C# Windows 服务每天执行任务？](https://stackoverflow.com/questions/503564/how-might-i-schedule-a-c-sharp-windows-service-to-perform-a-task-daily)
*   [如何安排 C# Windows 服务每天运行一个方法？](https://stackoverflow.com/questions/922444/how-to-schedule-a-c-sharp-windows-service-to-run-a-method-daily)

这里也有一些很棒的链接：

*   [C# 调度程序](http://www.codeproject.com/Articles/2478/C-Scheduler)
*   [通过 C# 代码安排 Windows 服务每周运行两次](http://www.codeproject.com/Answers/157909/Schedule-Windows-Service-to-run-twice-a-week-throu.aspx#answer1)
*   [如何在 C# 中安排 Windows 服务？](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/268a194c-747d-40b6-8b9e-903e44e47686/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:56:25.307

查看[Quartz.NET](http://quartznet.sourceforge.net)或搜索“Windows 任务调度”。

第一种方法是编程的，后者是配置的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:54:11.257

为什么不向您的服务添加一个计时器，该计时器在您配置的时间间隔内执行您想要的操作？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T08:55:09.360

这篇文章给出了如何创建 windows 服务[http://msdn.microsoft.com/en-us/library/zt39148a(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/zt39148a(v=vs.80).aspx)

并在特定时间运行它，您可以设置计划作业

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T08:56:13.523

你可能想在你的服务中使用类似[Quartz.net的东西。](http://quartznet.sourceforge.net/)然后，您可以使用 cron 表达式在您的服务中安排“作业”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-16T08:56:19.723

您的代码看起来不错，但您是否在 OnStart 期间首先调用了 timer.start()？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-16T08:56:43.157

如果您需要对计时器进行操作，那么您有两种选择

1.  创建一个 Windows 服务并实现某种调度。这可能很复杂，因此请做好准备，您可能会花费大量时间来解决已经解决的问题。
2.  您可以设置一个计划任务来调用您的应用程序。

这完全取决于您真正需要多少控制。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-16T10:55:09.590

对于上述功能，您可以使用控制台应用程序与 Windows 调度程序的组合。

安排您的 exe 每 5 分钟执行一次。您的 exe 会向您发送电子邮件并停止。您想通过 Windows 服务实现什么特定的目标？

# c - sem_open 不适用于 Ubuntu：未定义对 `sem_open' 的引用

> ID：11500879
> 
> 赞同：1
> 
> 时间：2012-07-16T08:50:43.407
> 
> 标签：c, linux, ubuntu, pipe, shared-memory

鉴于此代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/wait.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <sys/shm.h>
#include <semaphore.h>
#include <pthread.h>

#define BUF_SIZE 256
int main()
{
    key_t key;
    char *virtualaddr;
    sem_t *get, *put;
    int shmid;

   const char* messageOne = "Hello world , I'm child number 1\n";
   const char* messageTwo = "Hello world , I'm child number 2\n";

   char buf[BUF_SIZE];

   key = ftok("anyfile",'R');

  shmid = shmget(key,1024,0644|IPC_CREAT);
...
...
shmctl (shmid, IPC_RMID, NULL);
exit(EXIT_SUCCESS);
} 
```

我从 eclipse 得到`undefined reference to sem_open`。

我已经检查了这篇[文章](https://stackoverflow.com/questions/4916881/sem-open-error-undefined-reference-to-sem-open-on-linux-ubuntu-10-10)，因为这个问题与我的非常相似，但不明白我的错误在哪里，

您能否解释一下我需要在哪里修复它/添加另一个编译命令（如果确实如此）？

非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:04:17.713

`-lpthread`编译时需要包含。链接器使用它来将二进制文件与库链接。

*其他答案已经涵盖了如何在命令行上执行此操作。*

**要在 Eclipse 中执行此操作，您需要按照[此处](https://stackoverflow.com/q/4201129/274261)的说明进行操作：**

> 在项目属性中，转到：C/C++ Build --> Settings。然后“工具设置”，选择“链接器”下的“库”。您可以在那里添加所有项目库（没有“-l”）。同样在下部，您可以添加自定义路径到搜索库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:56:01.267

链接时，您必须添加标志`-pthread`或`-lrt`命令行。它就在[手册页](http://linux.die.net/man/3/sem_open)中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:56:24.490

正如您链接的问题的第一个答案中所写，您需要以这种方式编译它：

`gcc source.c -lpthread`

`-lrt`或者`-pthread`也会这样做。

# c++ - lambda 上的模板参数推导

> ID：11500881
> 
> 赞同：0
> 
> 时间：2012-07-16T08:50:51.000
> 
> 标签：c++, templates, lambda, c++11

> **可能重复：**
> [是否可以找出 lambda 的参数类型和返回类型？](https://stackoverflow.com/questions/7943525/is-it-possible-to-figure-out-the-parameter-type-and-return-type-of-a-lambda)

我想做一个接受整数和任意函数（具有任意返回类型和参数）的函数，像这样调用：

```
server.bind(tag, [&](std::string greeting) { return greeting + " earth."; }); 
```

关于如何设置模板以获取 lambda 的返回类型和减去 lambda 参数的类型的任何想法？

以下代码尽可能接近，但使用上述代码推导模板参数失败：

```
template <typename Return, typename... Args>
void service::bind(uint16_t tag, 
                   std::function<Return (Args...)> function)
{
    ...
} 
```

# zend-framework - 将变量传递给 viewScript 装饰器

> ID：11500882
> 
> 赞同：0
> 
> 时间：2012-07-16T08:50:51.593
> 
> 标签：zend-framework, arguments, zend-form, partial, zend-decorators

我尝试使用 Zend Form 的 viewScript 装饰器向我的表单添加一个部分，但是我似乎无法将变量传递给部分。这是我的代码：

在控制器中，我添加了表单：

```
$form = new Content_Form_ContentForm(array("categories" => $sortedCategories));
$form->submit_button->setLabel("Add content");
$this->view->form = $form; 
```

然后在表单中添加视图脚本：

```
public function setCategories($categories) {
    $this->setDecorators(array(array('ViewScript', array(
            'viewScript' => 'partials/dtreePartial.phtml',
            'List'=>"{$categories}",
    ))));
} 
```

我尝试使用`print_r($this->getDecorator('ViewScript')->getOptions());`wich 结果打印视图脚本的选项`Array ( [viewScript] => partials/dtreePartial.phtml [List] => Array )` 但是当我全部运行时，脚本返回有关列表不存在的错误。

我觉得我错过了一些东西，但我不确定它是什么。任何建议或解决方案将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:12:44.920

问题在于这一行：

```
'List'=>"{$categories}", 
```

因为您将变量放在引号内，所以它被转换为字符串。在 PHP 中，当您将数组转换为字符串时，结果总是单词`Array`。

只需更改为：

```
'List'=> $categories, 
```

它应该可以按您的预期工作。

# xquery - 如何在 Marklogic 中搜索并返回文档名称？

> ID：11500892
> 
> 赞同：0
> 
> 时间：2012-07-16T08:51:27.803
> 
> 标签：xquery, marklogic

如何在 Marklogic 中搜索文档内容并返回对应的文档名称？假设我的文档名称是`test.doc`并且它包含一个文本，**例如 "hello world"**。现在我在 Marklogic Server 中上传这个文档，内容处理器将生成相应的 XML 文件。现在我正在这样搜索：-

```
import module namespace search="http://marklogic.com/appservices/search" at "/Marklogic/appservices/search/search.xqy";
declare variable $options:=
<options xmlns="http://marklogic.com/appservices/search">
<transform-results apply="raw"/>
</options>;

for $d in search:search("hello world", $options)/search:result
return tokenize(data($d/@uri), "/")[last()] 
```

**它返回包含文本“ hello world** ”的相应 XML 和 XHTML 文件名，但我只想返回原始文档名 ( `test.doc`) 而不是相应的 XML 文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-14T07:02:15.137

可能已经过时，但很有用。

[http://docs.marklogic.com/xdmp:node-uri](http://docs.marklogic.com/xdmp:node-uri)

```
xdmp:node-uri

xdmp:node-uri(
   $node as node()
) as xs:string?
Summary 
```

返回`document-uri`参数或其祖先的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:29:57.120

此信息不会自动保留，因此您需要在内容管道中以某种方式明确支持它。

您可以修改管道以将原始文档名称存储在目标 XML 文档的文档属性中，您可以将文档名称作为元数据存储在文档中，或者您可以将原始文档名称存储为 URI 的一部分。

# google-app-engine - 谷歌应用引擎上的一对多关系不起作用？

> ID：11500895
> 
> 赞同：0
> 
> 时间：2012-07-16T08:51:47.823
> 
> 标签：google-app-engine, servlets, one-to-many, jdo, datanucleus

> **可能重复：**
> [java google ap 引擎中的一对多关系导致错误？](https://stackoverflow.com/questions/11494240/one-to-many-relationship-in-java-google-ap-engine-caused-error)

我已经实现了一个系统来保存有关用户的信息。所以我在我的班级有聚合所以用户类有来自联系人类的列表......等等在第一页“测试它只是为了通过电话号码注册用户”必须将用户保存在数据库中但这会导致错误当我在 Google 应用引擎中部署我的项目 < **500 服务器错误**>

另一个页面用于更新先前已注册的现有用户，因此这将添加到用户对象拥有的列表中。

*用户类*

```
@PersistenceCapable
public class User implements Serializable{
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key key;

 @Persistent
public String userNumber;

 @Persistent (mappedBy = "userC")
 public List<Contact> UserContacts =new  ArrayList<Contact>();

 public void AddContact(String name,String number) {
     Contact C=new Contact();
     C.ContactName=name;
     C.PhoneNumber=number;
     this.UserContacts.add(C);   }
     } 
```

*接触类*

```
 @PersistenceCapable
public class Contact implements Serializable{
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;

     @Persistent
        public String ContactName;

     @Persistent
    public String PhoneNumber;  
             @Persistent
    public User userC; } 
```

**此页面原因注册用户测试将获取用户电话号码并注册应使用此号码** *测试页面创建新用户*

```
@SuppressWarnings("serial") 
```

公共类测试扩展 HttpServlet {

```
public void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
        resp.setContentType("text/html");
        resp.getWriter().println("<html><body><form  method = \"POST\"     action=\"/signup\">" + "please enter ur number :"+"<h4><label>name :  <input name =  \"userphoneNUMBER\" type =  \"text \" size =  \"25 \" />  </label>"+"<p> <input type = \"submit\" value = \"Submit\" />"+ "</form></body></html>");

    }
} 
```

**本页取号创建用户**

```
@SuppressWarnings("serial")
public class SignUP extends HttpServlet {
    public void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/plain");
        String user_PhoneNumber=req.getParameter("userphoneNUMBER");
        User obj = new User();
    obj.userNumber=user_PhoneNumber;
    resp.getWriter().println(obj.userNumber );
        PersistenceManager pm = PMF.get().getPersistenceManager();

        try {
            pm.makePersistent(obj);
        } finally {
            pm.close();

        } }  } 
```

***此页面继续更新已经存在的用户对象的值***

```
 @SuppressWarnings("serial")
public class Testinfo extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/html");
        resp.getWriter().println("<html><body><form  method = \"POST\" action=\"/saveinfo\">" +
                "<center> <h2>please fill this form :</h2> </br> "+
"<h4><label> ContactName :  <input name =  \"ContactName\" type =  \"text \" size =  \"25 \" />  </label>"
+
"<p> <input type = \"submit\" value = \"Submit\" />"+
                "</form></body></html>");
    } 
```

}

**此页面用于保存导致错误的信息，并且不会在应用引擎中保存任何值**

```
 @SuppressWarnings("serial")
public class SaveInfo extends HttpServlet {
    public void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/plain");

        String ContactName = req.getParameter("ContactName");
        String ContactNumber = req.getParameter("ContactNumber");
                   PersistenceManager pm = PMF.get().getPersistenceManager();
        Query query = pm.newQuery("select * from " + User.class.getName());
        List<User> list = (List<User>) query.execute();
        for (User obj : list) {

            if (obj.userNumber.equals("111")) {
                 pm.currentTransaction().begin();
                                     obj.AddContact(ContactName, ContactNumber);

                pm.makePersistent(obj);

                 pm.currentTransaction().commit(); }
            }
                          pm.close(); }  } 
```

这个*111*用于测试，我之前输入的用户电话号码。

那么我该如何处理列表和聚合问题呢？

**当要更新用户信息时发生此错误**

```
Uncaught exception from servlet
javax.jdo.JDOUserException: Identifier expected at character 1 in "*" at         org.datanucleus.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:375)
at org.datanucleus.jdo.JDOQuery.execute(JDOQuery.java:230)
at sstooree.SaveInfo.doPost(SaveInfo.java:44)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:08:32.543

通过尝试将查询从

```
 Query query = pm.newQuery("select * from " + User.class.getName()); 
```

至

```
 Query query = pm.newQuery("select from " + User.class.getName()); 
```

使代码成功运行而没有任何错误:)

# json - Play Framework Secure Module：登录JSON响应接口

> ID：11500898
> 
> 赞同：0
> 
> 时间：2012-07-16T08:52:06.600
> 
> 标签：json, playframework, playframework-1.x

我正在使用播放框架提供的安全模块。现在我尝试访问受安全模块保护的控制器方法以获取 JSON 响应。有没有办法在不使用提供的登录表单的情况下访问此方法？例如使用用户名和密码作为 url 参数

谢谢，乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T20:47:27.943

不直接，不。Secure 模块专为基于 UI 的身份验证而设计。也就是说，使用 HTTP 身份验证围绕控制器构建安全性非常简单。

有许多选项，这取决于您的用例如何使这项工作。如果您正在构建 RESTful Web 服务，那么使用 HTTP Auth 可能是要走的路，但如果您使用的是 AJAX，已经使用了登录页面，那么检查 cookie 可能是您的答案。

如果您查看该`Http.Request`对象，您将看到它包含用户名和密码字段。这些专门用于 HTTP 身份验证。因此，您可以执行以下操作

```
public static void myJSONAction() {
    if ("secretuser".equals(request.user) && "secret".equals(request.password)) {
        // do some JSON
    }
    else {
        // tell them they are not authorised to this content
        unauthorized( "Secret Realm" ); 
    }
} 
```

或者，如果您的 JSON 在网站上用作 AJAX，我会很想检查安全模块的 cookie（查看源以找到 cookie 的名称）以确定登录用户是谁。

# java - 用Java从数据库中“选择或创建”

> ID：11500901
> 
> 赞同：1
> 
> 时间：2012-07-16T08:52:14.157
> 
> 标签：java, mysql, orm

在过去的几年里，我用 Ruby 完成了我所有的数据库开发，主要是使用 ActiveRecord。现在我被困在一个项目中使用Java，感觉**如此**冗长和笨拙，我想知道我是否做错了。

在 ORM 范式中，如果我想插入相关表，我会这样

```
# Joe Bob got a new car
p = Person.find_or_create_by_name("Joe Bob");
Car.new({:make=>"Toyota", :plate=>"ABC 123", :owner=>p}); 
```

在 Java 中，至少直接使用 JDBC，我将不得不手动进行 Person 查找，如果不存在则插入，然后创建 Car 条目。

当然，在现实生活中，不仅仅是两张桌子，而且痛苦呈指数级增长。肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:58:30.463

您可以使用 Java 的 ORM 解决方案 - 有各种可用的解决方案。

值得一看的链接：

*   Hibernate - [http://www.hibernate.org/](http://www.hibernate.org/) - 可能是领先的 Java ORM 解决方案
*   SO 问题 - [Hibernate、iBatis、Java EE 或其他 Java ORM 工具](https://stackoverflow.com/questions/716532/hibernate-ibatis-java-ee-or-other-java-orm-tool)

话虽如此，我通常发现对于复杂的应用程序，ORM 经常会带来比其价值更多的麻烦（是的，这确实包括带有 Activerecord 的 Ruby 项目）。有时，直接通过 SQL 获取数据而不是试图在其之上强制使用面向对象的外观确实很有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:56:27.200

更好的方法是学习 SQL！你非常喜欢的 ORM 在幕后为你编写 SQL。

因此，您可以创建一个快速帮助函数来尝试选择记录，如果它不存在，则为您创建它。

在 MySQL 中，您可以使用`INSERT IGNORE .....`which 仅在行不存在时才插入该行。

这里有一段你可能喜欢的特殊 SQL（仅限 MySQL）：

```
INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id), c=3; 
```

这会尝试插入记录，如果它不存在，它会像往常一样返回您在程序中检索的 auto_increment。

但是：如果它确实存在，那么它会更新它 - （在这种情况下，只有 c 被设置为更新），但很酷的部分是它设置`LAST_INSERT_ID()`就像在插入时一样。

因此，无论哪种方式，您都会获得 ID 字段。所有这些都在一个 SQL 中。

SQL 是一门非常好的语言——你应该学习它而不是依赖 orm 的伪语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:57:13.447

如果您使用的是 JDBC，则需要自己查找并创建人员（如果不存在）。如果您使用 JDBC，则没有更好的方法。

但是您可以使用 Hibernate，它将帮助您减少自己编写 OR 映射并减少样板。

由于您来自 Ruby，如果您发现编写所有 SQL 查询、JDBC 样板文件很痛苦，那么更好的方法是使用 ORM。我推荐以下之一，

1.  休眠
2.  JPA（如果要更改 ORM 实现，请使用 JPA）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T17:56:09.320

Sormula 包含一个[活动记录包](http://sormula.org/javadoc/org/sormula/active/package-summary.html)。如果不存在记录，[save 方法](http://sormula.org/javadoc/org/sormula/active/ActiveRecord.html#save%28%29)将更新现有记录或插入。

请参阅网站上的[活动记录示例。](http://sormula.org/activerecord/)

另请参阅项目中的 org.sormula.tests.active.SaveTest.java：

```
SormulaTestAR record = new SormulaTestAR();  
record.attach(getActiveDatabase()); // record needs to know data source
record.setId(8002);
record.setType(8);
record.setDescription("Save one AR 2");
record.save(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-31T03:23:42.620

看起来我来晚了，但是，ActiveJDBC 会在 Java 中做你想做的事情：

```
Person p = Person.findOrCreateIt("name", "Joe Bob");
Car car = Car.createIt("make", "Toyota", "plate", "ABC 123", "owner", p); 
```

它可以做的还有很多，请查看：http: [//javalite.io/](http://javalite.io/)

# sql-server - 识别 SQL Server 中查询计划的某些部分

> ID：11500902
> 
> 赞同：0
> 
> 时间：2012-07-16T08:52:23.590
> 
> 标签：sql-server, xml, sql-execution-plan

我最近遇到了一个我很难解决的问题。我必须调整一个相当讨厌的查询，该查询广泛使用——以多种形式和多层——XML。问题在于，虽然很容易发现整个过程的缓慢部分 - 表值函数 [XML 阅读器] - 但很难将其映射到查询的任何特定部分。这些属性并没有指出这个特定对象在哪个 XML 列上起作用，我真的很困惑为什么会这样。通常，将对象映射到查询的一部分相对容易，但是这些 XML 对象让我停下来。

提前致谢。

# ios - Twitter iOS API 是否提供任何方法来确定推文是否成功？

> ID：11500905
> 
> 赞同：3
> 
> 时间：2012-07-16T08:52:27.180
> 
> 标签：ios, ios5, twitter

我正在使用以下代码片段在我的 iOS 5 应用程序中发布推文：

```
- (IBAction)postToTwitterClicked:(id)sender 
{
    if ([TWTweetComposeViewController canSendTweet])
    {
        TWTweetComposeViewController *tweetSheet = [[TWTweetComposeViewController alloc]init];
        [tweetSheet setInitialText:@"Some sample message here"];
        [tweetSheet addURL:[NSURL URLWithString:@"http://myURL"]];

        [self presentModalViewController:tweetSheet animated:YES];
    }
    else 
    {
        UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"Unable to tweet"
                                                     message:@"Please ensure that you have at least one twitter account setup and have internet connectivity. You can setup a twitter account in the iOS Settings > Twitter > login."
                                                    delegate:self 
                                           cancelButtonTitle:@"OK" 
                                           otherButtonTitles:nil];
        [av show]; 
    }
} 
```

这很好用，但我怎么知道用户确实发布了一条推文，或者是否有问题？

由于这没有实现委托，因此没有我可以覆盖的“onError”方法。

我想知道用户是否确实成功发布了推文，所以我可以采取一些行为，例如

1.  禁用一个按钮，这样他们就不能再这样做了
2.  通知他们帖子已成功，并将很快显示在他们的提要中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:12:51.770

在 iOS Twitter API 中，您无法看到一条推文实际上已发布在服务器上。但是您可以分析`TWTweetComposeViewControllerResult`推文是否已成功完成撰写或推文是否被取消。

```
twitter.completionHandler = ^(TWTweetComposeViewControllerResult res) {
    if (res == TWTweetComposeViewControllerResultDone) {
         // Composed
    } else if (res == TWTweetComposeViewControllerResultCancelled) {
        // Cancelled
    }
    [self dismissModalViewControllerAnimated:YES];
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:16:40.467

好吧，实际上，您只能设置一个处理程序以在用户完成撰写推文时调用：`TWTweetComposeViewControllerCompletionHandler`. 此[处理程序](http://developer.apple.com/library/ios/#DOCUMENTATION/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html)有一个参数，指示用户是完成还是取消了撰写推文。

您可以尝试发送一条推文并使其无法检查结果代码（幸运的是它被取消了？）。

实现所需行为的另一种方法是使用另一个 API。

# c - 我可以在 c 源代码中找到具有一定大小的结构吗？

> ID：11500912
> 
> 赞同：1
> 
> 时间：2012-07-16T08:53:02.283
> 
> 标签：c, gdb, sizeof, coredump

我正在尝试调试一个核心转储（主要使用 gdb），到目前为止我发现的只是有一个正好 124 字节的结构，这会导致问题。鉴于该程序的所有来源，有没有办法找到该结构？（我的意思是有办法找到结构，其大小为 124 字节）

*   PS。我知道这个结构在记忆中的确切位置，但如果我看它，就无法知道它的用途。它也是常见的结构，所以我可以根据需要制作尽可能多的核心转储。

*   PS2。到目前为止，我尝试过：

    1.  要使用正则表达式`grep '^ *[a-zA-Z][^ ;,."()]* [a-zA-Z][^ ;,."()]*' * | grep -v 'return' | sed 's/[^:]*: *\([^ ]*\).*/\1/' | sort | uniq > tmp.txt`，添加`p sizeof(x)` 到每个找到的行并输入到 gdb。
    2.  要`info variables`在 gdb 中使用，记录输出，提取变量类型并将 sizeof(x) 添加到每种类型并输出到 gdb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:47:57.630

尝试使用这个：

```
objdump -W <elf-name> | grep -B 2 "DW_AT_byte_size   : 124" 
```

此命令转储 ELF 文件中的所有调试符号，并发现这些大小为 124。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:03:52.770

在所有源文件包含的头文件中，定义一个宏，

```
#define malloc(size) my_malloc(size, __FILE__, __LINE__) 
```

然后在实现中：

```
#undef malloc
void * my_malloc(size_t size, const char* file, int line)
{
    //if the size equal to 124 bytes, log it, then you will have a chance know where this kind of allocation happens, so you know the struct.
    if(124==size) printf(...);

    return malloc(size);
} 
```

# vba - 根据另一列中的子字符串检索列中的文本

> ID：11500914
> 
> 赞同：1
> 
> 时间：2012-07-16T08:53:07.557
> 
> 标签：vba, excel, excel-2007, substring

假设它在 A2、A4、A5、A6 中找到一些特定文本，如“sa”，我需要分别在 B2、B4、B5、B6 中复制“sohail”，就像这样......

```
ImageName                   PhotographerName
pirf_20120523_sa0001.jpg    sohail
pirf_20120523_ml0001.jpg    manav
pirf_20120523_sa0001.jpg    sohail
pirf_20120523_sa0001.jpg    sohail
pirf_20120523_sa0001.jpg    sohail
pirf_20120529_sh0005.jpg    shirazi
pirf_20120523_ml0001.jpg    manav 
pirf_20120529_sh0005.jpg    shirazi 
```

我试图检索它找到文本的地址...

```
Sub FindinTextInEachCell()

Dim rngX As Range

Set rngX = Worksheets("Sheet1").Range("A1:A10").Find("sa", lookat:=xlPart)
If Not rngX Is Nothing Then
    MsgBox "Found at " & rngX.Address
End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:40:55.423

您没有`Find`正确使用方法，它只会返回`Range`找到的第一个，您必须`findnext()`对后续范围使用方法，但由于后续范围会重复，您必须将其与找到的第一个地址进行比较。

```
Sub foo()
On Error Resume Next

Dim rng As Range
Dim prng As Range
Dim firstAddress As String

With Worksheets(1).Range("A1:A10")
    Set rng = .Find("sa", LookIn:=xlValues, LookAt:=xlPart)
    If Not rng Is Nothing Then
        firstAddress = rng.Address
        Do
            Set prng = rng
            rng.Offset(0, 1) = "Sohail"
            Set rng = .FindNext(After:=prng)
        Loop While Not rng Is Nothing And rng.Address <> firstAddress
    End If
End With

End Sub 
```

# iphone - 横向模式下的图像封面流

> ID：11500916
> 
> 赞同：4
> 
> 时间：2012-07-16T08:53:08.743
> 
> 标签：iphone, ios, ios5

我正在使用 AFOpenFlow 来显示图像。现在我想在横向模式下显示相同的东西。我想像这样显示所有图像：![在此处输入图像描述](../Images/97a5b22dd4d2c8e58c3bab4ff64cd11c.png)

有人对此有想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T12:08:38.917

我建议，你试试Nick Lockwood 的[iCarousel](https://github.com/nicklockwood/iCarousel)，它有你需要的功能，让它垂直，然后添加你想要放入的图像。它可以在横向，因为我已经尝试过了。

# c# - 无法设置树视图节点的图标

> ID：11500917
> 
> 赞同：2
> 
> 时间：2012-07-16T08:53:11.047
> 
> 标签：c#, winforms

我有一个包含 1 个图标（folder.ico）的树视图和一个 imageList，我只想为根节点设置图标，子节点没有图标，所以我尝试为子节点设置图像索引，但它有一些问题，看图： ![在此处输入图像描述](../Images/f0cf8db75787ab3356e7e34b59f0d863.png)

我的代码：

```
 ImageList imageList = new ImageList();
        imageList.Images.Add(Image.FromFile(System.AppDomain.CurrentDomain.BaseDirectory.Replace("\\bin\\Debug\\","") + "\\Images\\folder.ico"), Color.Transparent);
        treeView1.ImageList = imageList;
        foreach (TreeNode node in treeView1.Nodes)
        {
            foreach (TreeNode node2 in node.Nodes)
            {
                node2.ImageIndex = 100;
                node2.SelectedImageIndex = 100;
            }
        } 
```

谢谢

**编辑** 我在@Killercam 的回答中创建了一个自定义 TreeView：

```
class CustomTreeView : TreeView
{
public const int NOIMAGE = -1;

public CustomTreeView()
    : base()
{
    // .NET Bug: Unless LineColor is set, Win32 treeview returns -1 (default), .NET returns Color.Black!
    base.LineColor = SystemColors.GrayText;
    base.DrawMode = TreeViewDrawMode.OwnerDrawAll;
}

protected override void OnDrawNode(DrawTreeNodeEventArgs e)
{
    // Space between Image and Label.
    const int SPACE_IL = 3;  

    // We only do additional drawing.
    e.DrawDefault = true;
    base.OnDrawNode(e);
    if (base.ShowLines && base.ImageList != null && e.Node.ImageIndex == NOIMAGE
        // exclude root nodes, if root lines are disabled
        //&& (base.ShowRootLines || e.Node.Level > 0))
            )
    {
        // Using lines & images, but this node has none: fill up missing treelines

        // Image size
        int imgW = base.ImageList.ImageSize.Width;
        int imgH = base.ImageList.ImageSize.Height;

        // Image center
        int xPos = e.Node.Bounds.Left - SPACE_IL - imgW / 2;
        int yPos = (e.Node.Bounds.Top + e.Node.Bounds.Bottom) / 2;

        // Image rect
        Rectangle imgRect = new Rectangle(xPos, yPos, 0, 0);
        imgRect.Inflate(imgW / 2, imgH / 2);

        using (Pen p = new Pen(base.LineColor, 1))
        {
            p.DashStyle = DashStyle.Dot;

            // Account uneven Indent for both lines.
            p.DashOffset = base.Indent % 2;

            // Horizontal treeline across width of image
            // account uneven half of delta ItemHeight & ImageHeight.
            int yHor = yPos + ((base.ItemHeight - imgRect.Height) / 2) % 2;

            //if (base.ShowRootLines || e.Node.Level > 0)
            //{
            //    e.Graphics.DrawLine(p, imgRect.Left, yHor, imgRect.Right, yHor);
            //}
            //else
            //{
            //    // for root nodes, if root lines are disabled, start at center
            //    e.Graphics.DrawLine(p, xPos - (int)p.DashOffset, yHor, imgRect.Right, yHor);
            //}

            e.Graphics.DrawLine(p,
                    (base.ShowRootLines || e.Node.Level > 0) ? imgRect.Left : xPos - (int)p.DashOffset,
                    yHor, imgRect.Right, yHor);
            if (!base.CheckBoxes && e.Node.IsExpanded)
            {
                // Vertical treeline , offspring from NodeImage center to e.Node.Bounds.Bottom
                // yStartPos: account uneven Indent and uneven half of delta ItemHeight & ImageHeight
                int yVer = yHor + (int)p.DashOffset;
                e.Graphics.DrawLine(p, xPos, yVer, xPos, e.Node.Bounds.Bottom);
            }
        }
    }
}

protected override void OnAfterCollapse(TreeViewEventArgs e)
{
    base.OnAfterCollapse(e);
    if (!base.CheckBoxes && base.ImageList != null && e.Node.ImageIndex == NOIMAGE)
    {
        // DrawNode event not raised: redraw node with collapsed treeline
        base.Invalidate(e.Node.Bounds);
    }
}
} 
```

然后在我的代码中使用它：

```
private void TestCustomTreeView_Load(object sender, EventArgs e)
    {
        // @Killercam EDIT: Set the default Image to one that is not used.
        valForm.siteTreeView.ImageIndex = 100;
        valForm.siteTreeView.SelectedImageIndex = 100;

        TemplateCustomTreeView myTree = new TemplateCustomTreeView();
        myTree.Font = new System.Drawing.Font("Tahoma", 8.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));

        myTree.Location = new System.Drawing.Point(6, 26);
        myTree.Name = "tree";
        myTree.Scrollable = true;
        myTree.Size = new System.Drawing.Size(320, 296);
        myTree.ImageList = imageList1;
        /*Add item*/
        TreeNode node = new TreeNode();
        node.Name = "abc1";
        node.Text = "abc1";
        node.ImageIndex = 0;
        myTree.Nodes.Add(node);
        TreeNode node3 = new TreeNode();
        node3.Name = "abc2";
        node3.Text = "abc2";
        node3.ImageIndex = -1;            
        node.Nodes.Add(node3);
        ////
        TreeNode node2 = new TreeNode();
        node2.Name = "abc3";
        node2.Text = "abc3";
        node2.ImageIndex = 0;
        myTree.Nodes.Add(node2);
        this.Controls.AddRange(new System.Windows.Forms.Control[] { myTree });

    }
} 
```

结果还是不行，文字前还有一个文件夹图标！ ![在此处输入图像描述](../Images/c887343317daa2f163b845208301ec39.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:12:56.270

你不能做你需要的

```
"All I want is don't show icon at child node." 
```

在不覆盖控件的情况下。我还发现您不能使用标准 WinForms 为不同的节点显示不同的图像`TreeView`。下面是一些使 TreeView 看起来更好的代码；这将为子节点绘制树线的一小部分。

```
class CustomTreeView : TreeView
{
    public const int NOIMAGE = -1;

    public CustomTreeView()
        : base()
    {
        // .NET Bug: Unless LineColor is set, Win32 treeview returns -1 (default), .NET returns Color.Black!
        base.LineColor = SystemColors.GrayText;
        base.DrawMode = TreeViewDrawMode.OwnerDrawAll;
    }

    protected override void OnDrawNode(DrawTreeNodeEventArgs e)
    {
        // Space between Image and Label.
        const int SPACE_IL = 3;  

        // We only do additional drawing.
        e.DrawDefault = true;
        base.OnDrawNode(e);
        if (base.ShowLines && base.ImageList != null && e.Node.ImageIndex == NOIMAGE
            // exclude root nodes, if root lines are disabled
            //&& (base.ShowRootLines || e.Node.Level > 0))
                )
        {
            // Using lines & images, but this node has none: fill up missing treelines

            // Image size
            int imgW = base.ImageList.ImageSize.Width;
            int imgH = base.ImageList.ImageSize.Height;

            // Image center
            int xPos = e.Node.Bounds.Left - SPACE_IL - imgW / 2;
            int yPos = (e.Node.Bounds.Top + e.Node.Bounds.Bottom) / 2;

            // Image rect
            Rectangle imgRect = new Rectangle(xPos, yPos, 0, 0);
            imgRect.Inflate(imgW / 2, imgH / 2);

            using (Pen p = new Pen(base.LineColor, 1))
            {
                p.DashStyle = DashStyle.Dot;

                // Account uneven Indent for both lines.
                p.DashOffset = base.Indent % 2;

                // Horizontal treeline across width of image
                // account uneven half of delta ItemHeight & ImageHeight.
                int yHor = yPos + ((base.ItemHeight - imgRect.Height) / 2) % 2;

                //if (base.ShowRootLines || e.Node.Level > 0)
                //{
                //    e.Graphics.DrawLine(p, imgRect.Left, yHor, imgRect.Right, yHor);
                //}
                //else
                //{
                //    // for root nodes, if root lines are disabled, start at center
                //    e.Graphics.DrawLine(p, xPos - (int)p.DashOffset, yHor, imgRect.Right, yHor);
                //}

                e.Graphics.DrawLine(p,
                        (base.ShowRootLines || e.Node.Level > 0) ? imgRect.Left : xPos - (int)p.DashOffset,
                        yHor, imgRect.Right, yHor);
                if (!base.CheckBoxes && e.Node.IsExpanded)
                {
                    // Vertical treeline , offspring from NodeImage center to e.Node.Bounds.Bottom
                    // yStartPos: account uneven Indent and uneven half of delta ItemHeight & ImageHeight
                    int yVer = yHor + (int)p.DashOffset;
                    e.Graphics.DrawLine(p, xPos, yVer, xPos, e.Node.Bounds.Bottom);
                }
            }
        }
    }

    protected override void OnAfterCollapse(TreeViewEventArgs e)
    {
        base.OnAfterCollapse(e);
        if (!base.CheckBoxes && base.ImageList != null && e.Node.ImageIndex == NOIMAGE)
        {
            // DrawNode event not raised: redraw node with collapsed treeline
            base.Invalidate(e.Node.Bounds);
        }
    }
} 
```

这将为您提供如下所示的 TreeView：

![自定义树视图](../Images/d6b6f5556a9e76ecd69be33d9f1e0036.png)

在这里，我的主节点 ( `Node[0]`) 是没有指定的节点`Image`，它是您的`File1`/`File2`节点所需要的。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:01:46.723

目前您创建了一个只有一张图像的图像列表（在索引 0 处）

该行`treeView1.ImageList = imageList;`链接到树视图

该行`node2.ImageIndex = 100;`链接要显示的列表上索引 100（不存在）处的图像

列表中只有一个图像，这意味着您只有索引 0 处的图像。

所以试试：

```
node2.ImageIndex = 0;
node2.SelectedImageIndex = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T12:28:05.527

尝试使用空白图像文件？

（或仅包含水平点画线或箭头的...）

# apache - .htaccess 在 Windows 上不起作用

> ID：11500919
> 
> 赞同：8
> 
> 时间：2012-07-16T08:53:16.247
> 
> 标签：apache, .htaccess, mod-rewrite

我的 Windows 机器上安装了 Apache 2.2，.htaccess 似乎有问题。

我在 `httpd.conf` 文件中启用了 `mod_rewrite`，并在我的 .htaccess 中写入了一些条件，但没有任何效果。我尝试在其中放入一些垃圾，看看它是否会返回内部服务器错误，但即使这样也行不通。可能是什么问题呢？

问题可能是，我的 Apache 位于“C:\Program Files\Apache Software Foundation”，而我的服务器根目录位于“C:\Users\Grega\Server”？我在 httpd.conf 中找不到任何指向 .htaccess 的内容

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-26T07:10:48.057

确保您没有`AllowOverride None`为目录设置`C:\Users\Grega\Server`。否则 htaccess 文件可能会被完全忽略。`AllowOverride All`您可以通过或至少打开所有覆盖`AllowOverride FileInfo`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-11-15T17:38:26.160

> 确保没有为目录 C:\Users\Grega\Server 设置 AllowOverride None。否则 htaccess 文件可能会被完全忽略。您可以通过 AllowOverride All 或至少 AllowOverride FileInfo 打开所有覆盖。
> 
> 乔恩·林

对我来说，这行不通。但我找到了解决方案。转到 \wamp\bin\apache\apache2.4.9\conf\httpd.conf 并找到

```
<IfModule dir_module>
    DirectoryIndex first_page.html if_not_found.html
</IfModule>` 
```

更改`first_page.html`为您想要的任何内容。

（我不是以英语为母语的人，所以我为我糟糕的英语道歉。）

# json - WCF 服务中的 DataContract 和 Serializable

> ID：11500920
> 
> 赞同：0
> 
> 时间：2012-07-16T08:53:18.597
> 
> 标签：json, wcf, rest, service, datacontract

我尝试使用 WCF (REST) 服务编写演示，并使用 LinqToSQL 作为我的数据库运算符。当我尝试在我的域对象上发布 [DataContract] 或 [Serializable] 时，它无法序列化为 JSON。我只能在浏览器中获得一对“{}”。去掉 [DataContract] 或 [Serializable] 属性后，又恢复正常。

```
[DataContract]
public partial class MyDoc{ } // a Linq To SQL domain class 
```

获取方法：

```
 [WebGet(UriTemplate = "GetMyDoc/{docID}",ResponseFormat=WebMessageFormat.Json)]       
    [ServiceKnownType(typeof(MyDoc))]
    public WcfRESTfulTest.Db.MyDoc GetMyDoc(string docID)
    {
        WcfRESTfulTest.Db.DbDataContext db = new DbDataContext();
        var query = db.MyDocs.Where(d => d.DocID.Equals(Int32.Parse(docID)));
        return query.FirstOrDefault();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:05:43.317

如果不使用该`[DataContract]`属性，所有公共属性都将被序列化。如果确实使用它，则必须使用属性选择加入要序列化的 `[DataMember]`属性。

# android - BURP 套件测试

> ID：11500925
> 
> 赞同：-2
> 
> 时间：2012-07-16T08:53:36.910
> 
> 标签：android, jquery-mobile

我正在开发一个移动应用程序。我想使用 BURP 套件测试这个移动应用程序。我是使用 BURP Suite 进行测试的新手。我不知道该怎么做。请让我知道是否有任何网页或论坛提供使用此 BURP 套件的指南？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:57:02.810

你看过[这里](http://www.securityninja.co.uk/hacking/burp-suite-tutorial-the-intruder-tool/)吗？也许它可以帮助一点。

**编辑**

您想查看[ProxyDroid](https://play.google.com/store/apps/details?id=org.proxydroid)以便从您的设备创建代理。[教程](http://madteam.co/news/2011/11/tutorial-app-review-proxy-droid/)在这里;）

# c - C 解释器的测试用例

> ID：11500928
> 
> 赞同：0
> 
> 时间：2012-07-16T08:53:45.637
> 
> 标签：c, testing, compiler-construction, case, interpreter

我想测试一个小的 ANSI C 解释器。我的工具解释了我的 C 程序。它不产生机器码；执行后我无法访问堆/堆栈！我正在考虑针对 GCC 或类似的东西验证返回值/输出。

我正在寻找适合我的东西，但我几乎找不到任何免费或开源的东西。

有人对如何测试我的口译员有想法/建议吗？任何人都可以推荐类似测试套件的东西吗？还是一包测试用例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-09T06:22:58.423

我还写了一个 C 解释器，主要依靠 gcc.c - 折磨/执行测试用例。该测试套件由[“历史上很容易破坏的代码片段”](http://gcc.gnu.org/onlinedocs//gccint/C-Tests.html)组成。该测试用例的优点是，它们必须被执行以提供结果（而不是，例如，仅编译），然后将结果与预期结果相匹配。您不需要将它与由 GCC 编译的执行程序的结果进行比较。您基本上只需要在目录中包含文件并执行它们，这与其他一些测试套件形成对比，您必须从配置文件或类似文件中解析预期结果。您可以从[GCC 存储库](http://gcc.gnu.org/onlinedocs//gccint/C-Tests.html)下载测试。

对您来说一个缺点可能是，测试用例通常很广泛，并且还可以包括 GNU 扩展，例如用于执行汇编代码的*asm*语句或有关如何对齐内存内容的属性。它们还包括一些旧的 K&C 函数样式符号的测试用例，如下例所示（不是从套件中获取的）：

```
int func(a)
int a; 
{
    return a + 1;
} 
```

但是，我仍然建议您查看测试用例，看看您可以执行什么，因为它们还测试了 ASNI C 的许多“正常”极端情况。

# database - 与存储系统性质相关的大型存储图像格式

> ID：11500929
> 
> 赞同：1
> 
> 时间：2012-07-16T08:53:45.727
> 
> 标签：database, oracle, filesystems, erlang, couchdb

现在，我已经阅读了这些可能与这个问题有关的问题：[可扩展的图像存储](https://stackoverflow.com/q/1961191/431620)，[大规模图像存储](https://stackoverflow.com/q/4580862/431620)，[https://serverfault.com/q/95444](https://serverfault.com/q/95444)。

在我问我的问题之前，我发现了以下几点：

```
1\. Facebook 使用Haystack（开源世界的 CLOSED-SOURCE）
，非常高效。它是一种文件系统存储形式，专为速度
和大型元数据管理而设计。
2\. 任何操作系统在目录中都有一个文件限制，
当超过这个限制时，可能会开始执行极差。3\. 大多数 NoSQL 开发人员发现使用CouchDB / CouchBase Server
处理图像很容易，因为它将图像作为附件处理，粘贴到文档（数据库中的记录）。但是，这仍然是文件系统存储。4、HDFS、NFS、ZFS，都是可以轻松处理大型文件的文件系统 分布式数据。然而，在像 facebook 这样的应用程序中，他们无能为力5\. 任何适当形式的缓存对于高度依赖图像的应用程序
都非常重要6\. 一些 PHP 开发人员（大多数）在创建文件夹和子文件夹时使用 MySQL 来保存图像元数据（匹配元信息）在文件系统上。每个图像将具有与数据库中的元数据相关的随机散列名称，以实现在文件系统上的快速定位 
```

 **在理解了这些陈述和更多其他陈述之后，我开始意识到在文件系统上保留数十亿不断增长的图像非常昂贵。如果有人使用云存储之类`Amazon S3`的，它会因为高图像流量以及来自您的应用程序的存储而扼杀业务。

我已经评估了[CouchBase Server](http://www.couchbase.com/)的使用，将图像作为附件进行管理。然而，对于一个图像增长的应用程序，这也是一个文件系统存储，我想知道如果成百上千的人同时访问图像，Couch base 会如何表现。我可以使用[Cloudant/Big Couch](https://cloudant.com/)它具有自动分片/负载平衡。要点仍然是，NoSQL 解决方案还将图像保存在文件系统上，并且当以高并发率请求图像时，这可能会导致整个服务下降（图像可能很重）。

**我的想法**

我正在考虑将我的图像管理为[`SVG`](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)格式。这是因为，我认为我可以将此 SVG 数据视为存储中的文本。现在，大多数 NoSQL 数据库对文档（记录）大小的大小限制至少不大于 4MB（不确定）。这带来了一个问题，因为 SVG 文件甚至可以达到 6-10MB，具体取决于图像。所以，我认为我不能将 Couch 基础服务器用于 SVG 存储。此外，应用程序的性质是，图像数据不断增长并且从不存档/从不删除：并且沙发库不适用于此类数据（高度持久且不变的数据）。

这让我回到了以良好的文本压缩而闻名的 RDBMS（尤其是 Oracle）。如果我获得 SVG 数据及其元数据并将其存储为`BLOB`在 Oracle 数据库中，我觉得这可行。我听说 Oracle 表甚至可以增长到 TB，可能带有分区或某种碎片。但重点是，对于一个包含文本的 20GB 的 oracle 表，我认为这将是很多数据。
现在，我的问题来自上述所有发现：

1\. 为什么开发人员一直选择文件系统存储图像而不是 SVG，在我（可能是幼稚的）想法中，SVG 可以作为文本处理，因此可以压缩，加密，消化，拆分，易于存储等？

2\. 当应用程序将图像完全作为 SVG 工作，将 SVG 提供给浏览器而不是实际的图像文件时，会有什么复杂性？

3\. 从技术上讲，这对 Web 服务器造成更大的内存干扰：提供从文件系统（.png、.jpg、.gif）读取的图像并将图像作为 SVG（可能来自数据库或来自中间层）提供服务，尤其是在重负载下， Facebook 的一个示例场景？

4\. 在不同的“缩放”或分辨率下渲染时，SVG 似乎并没有降低质量，为什么仍然没有开发人员在图像动态应用程序中大量使用 SVG？我的意思是，在从 PNG、JPG 或 GIF 转换为 GIF 时是否有任何已知的质量损失`SVG`？

5\. 我对使用像 Oracle/MySQL Cluster 这样的 RDBMS 来存储高度持久的元数据以及持久的 SVG 数据的看法是不是很幼稚？

请突出显示，并就大型图像存储格式提出您的建议。谢谢

**编辑/更新**

有像[Image Magick](http://www.imagemagick.org/script/command-line-tools.php?ImageMagick=bd20m8amftcrr5j3f1p7j2j3r6)这样的工具提供了用于操作图像的命令行选项。我需要的最重要的想法可能是：**CouchBase Server（是否`single server`能够`version 2.0`以“用户体验可接受的性能”或“社交网络规模”提供图像？）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:18:52.040

首先，我想提一下，您对图像文件格式的理解*可能*很幼稚，因为您没有提供很多细节。您打算如何存储（例如）PNG 图像“作为 SVG 格式”？

我不能回答你所有的问题，但我会尽力的。

1.  “文件系统或 SVG”是一种错误的二分法，很容易将 JPG blob 存储在数据库中，或者将 SVG 文件存储在文件系统存储中。您也可以将任何位图图像格式作为文本处理。如果您想要一个示例，请尝试打开一个带有嵌入位图数据的 PostScript 文件。您关于“为什么不”的问题意味着两者是可以互换的，而且通常不是。例如，我的公司评估了一系列不同的文件存储格式，根据具体情况，我们选择了 PDF（不寒而栗）和 PS。我们没有使用 SVG 有两个原因；首先是[多页文档](http://www.w3.org/TR/2004/WD-SVG12-20041027/multipage.html)在官方标准中，SVG 编辑器和查看器似乎对它们有不稳定的支持。其次，SVG 在以自动化方式打印时会出现一些复杂情况（为了演示，请尝试这个实验：创建一个 SVG 文件和一个等效的 PostScript 文件，然后尝试使用 打印两者`lp`）。

2.  我已经提到了两个（尽管如果你正在处理一个网络应用程序，那么两者都不应该咬你，因为你的客户可能会使用浏览器的渲染引擎，你可能不需要超过一页）。唯一的另一个是浏览器支持，这在旧版本的 IE 上一如既往地不稳定。您还必须了解字体情况；要么确保任何花哨的排版被视为路径，要么确保只使用你知道观众可以访问的字体（对于网络应用程序，[CSS3 在那里有点帮助](http://www.w3schools.com/css3/css3_fonts.asp)）。

3.  SVG 和其他矢量/过程表示往往更小，所以我倾向于说它们对服务器来说更容易处理。这不是基于任何测试，因此请谨慎对待。请记住，它们确实倾向于在客户端消耗更多资源，但这在 Web 情况下应该不是什么大问题。

4.  如果您的图像可以表示为 SVG，是的，非常好的主意。然而，将任意位图转换为矢量表示是 AFAIK 一个未解决的问题。有些东西不能很好地转换，即使是手动转换，有些东西在以 SVG 表示时实际上比以 JPG 表示时更大。对于诸如商业文档、流程图或排版之类的东西，矢量绝对是更好的（除了我上面提到的字体问题）。某些类型的插图作为矢量效果更好，有些作为光栅效果更好。最后，如果您从位图（例如照片）开始，将其转换为 SVG 会明显降低质量，或者需要大量的手动时间（如果可以做得很好的话）。

5.  这是我无法真正回答的问题，因为我从来没有按照您的目标建造任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:25:19.950

**关于数据库**

什么是文件而不是数据，什么是文件系统而不是数据库？数据库中的记录、文件系统中的文件、KV 存储中的键和值——这些都是同一棵树的果实。

纯文件系统已经开发了数十年，以服务于在本地交付文件的目的——在此之上，您可以构建一个分发模型。

HDFS 之类的东西包括作为文件​​系统本身一部分的分发，但是当您尝试在本地处理文件时会产生不必要的开销。

诸如关系数据库或 KV 存储之类的东西可能会帮助您布置图表或轻松存储更多元数据位，但除非它们专门设计为用作文件存储系统，否则它们会失败。

挑选存储系统就是权衡取舍，由您决定什么是解决问题的最佳方案。您的问题可能与 facebook 的问题相差甚远。很少有带有cdn的服务器，你会没事的。

**关于文件格式**

1.  SVG 不适用于常规图片，甚至不要梦想它。
2.  在接受文件时，您希望在大规模上进行最少的转换：如果图像不符合您的要求并存储它，请重新缩放/压缩/裁剪图像。除非你对这些图像做了一些魔法，否则你不想将它们转换成不同的格式或在没有真正需要的情况下压缩它们。
3.  在大规模上，您希望您的文件是（按优先级排序）：
    *   从客户端的缓存中提供
    *   从操作系统缓存/内存提供
    *   直接从文件系统提供

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T04:21:12.213

我建议将您的图像存储在 S3 中——不要担心自己滚动，直到经济迫使您这样做。与您的 blob 的存储方式相比，担心用户关心的事情要好得多。

就 Couchbase（我是联合创始人）而言，我们看到人们在类似的用例中使用它：通常用于元数据和图像跟踪（谁拥有它、时间戳、标签，基本上是您想要存储或查询的任何东西。） Couchbase 记录然后将只包含存储在 S3 上的实际图像的 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T00:21:17.960

“SVG 不适用于常规图片，甚至不要梦想它。”

“然而，将任意位图转换为矢量表示是 AFAIK 的一个悬而未决的问题。有些东西不能很好地转换，即使是手动的，有些东西在以 SVG 表示时实际上比以 JPG 表示时更大。”

我认为这两种说法都是错误的。

[https://sites.google.com/site/jcdsvg/svg_paradoxes.svg](https://sites.google.com/site/jcdsvg/svg_paradoxes.svg)

参见示例三和四。猫图像保存为中等分辨率的 png 文件，允许图像的缩放为高分辨率。它的文件大小比普通的网络图像要大，但这是故意的。

将位图图像存储为 SVG 就像将它们放入 SVG 容器中一样简单。**

# windows - Safari 无法打开从 Windows PC 发送的网络链接。

> ID：11500931
> 
> 赞同：0
> 
> 时间：2012-07-16T08:53:50.477
> 
> 标签：windows, macos, share, smb

我想将网络链接 \172.16.100.78\AboutViewController.m.html（位于我的 windows pc 中，由 SMB 共享）共享给我的 MAC 对等体，但无法通过 Safari 打开它。有没有格式错误？如何纠正？

似乎总是在两台 Windows PC 之间运行良好。

谢谢你。

# c# - 从远程 SQL Server 安装的硬盘中查找硬盘序列号

> ID：11500934
> 
> 赞同：1
> 
> 时间：2012-07-16T08:54:00.420
> 
> 标签：c#

我有一个带有 SQL Server 的 C#.net Windows 窗体应用程序。我的应用程序通过本地网络在多个用户中使用。现在我需要找到安装 sql server 的硬盘的硬盘序列号（注意：通过使用 C#.net 应用程序数据源）。

如何找到应用程序数据源抛出的硬盘序列号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:57:49.213

您需要求助于 WMI。使用 SQL Server 计算机上的适当权限，您可以获得其上硬盘驱动器的序列号。有关使用 WMI 检索硬盘序列号的示例，请参见[此处。](http://www.codeproject.com/Articles/6077/How-to-Retrieve-the-REAL-Hard-Drive-Serial-Number)

您需要弄清楚哪个磁盘保存 SQL Server 以及如何自行访问 SQL Server 机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:02:35.230

这可能有用

```
using System;
using System.Management;
using System.Collections;

namespace WmiControl
{
    public class WMI
    {
        public bool GetDiskSerial(string Computername)
        {

            try
            {
                ManagementScope scope = new ManagementScope(@"\\" + Computername + @"\root\cimv2");
                scope.Connect();
                ArrayList hdCollection;
                ManagementObjectSearcher searcher;
                if (GetDiskDrive(scope, out hdCollection, out searcher) || GetDiskSerial(scope, hdCollection, ref searcher))
                    return true;
                else 
                    return false;
            }
            catch (ManagementException)
            {
                return false;
            }

        }

        private bool GetDiskSerial(ManagementScope scope, ArrayList hdCollection, ref ManagementObjectSearcher searcher)
        {
            try
            {

                ObjectQuery query1 = new ObjectQuery("SELECT * FROM Win32_PhysicalMedia");

                searcher = new ManagementObjectSearcher(scope, query1);
                int i = 0;
                string sDiskSerial = "";
                foreach (ManagementObject wmi_HD in searcher.Get())
                {
                    // get the hard drive from collection
                    // using index
                    if (i < hdCollection.Count)
                    {
                        HardDrive hd = (HardDrive)hdCollection[i];
                        if (wmi_HD["SerialNumber"] == null)
                            hd.SerialNo = "";
                        else
                            hd.SerialNo = wmi_HD["SerialNumber"].ToString();
                    }
                    ++i;
                }
                foreach (HardDrive hd in hdCollection)
                {
                    if (!String.IsNullOrEmpty(hd.SerialNo))
                    {
                        sDiskSerial = hd.SerialNo;
                        break;
                    }
                }
                return true;
            }
            catch (Exception)
            {
                return false;
            }
        }

        private bool GetDiskDrive(ManagementScope scope, out ArrayList hdCollection, out ManagementObjectSearcher searcher)
        {
            try
            {
                ObjectQuery query = new ObjectQuery("SELECT * FROM Win32_DiskDrive");
                hdCollection = new ArrayList();
                searcher = new ManagementObjectSearcher(scope, query);
                foreach (ManagementObject wmi_HD in searcher.Get())
                {
                    HardDrive hd = new HardDrive();
                    hd.Model = wmi_HD["Model"].ToString();
                    hd.Type = wmi_HD["InterfaceType"].ToString();
                    hdCollection.Add(hd);
                    return true;
                }
                return true;
            }
            catch (Exception)
            {
                hdCollection = null;
                searcher = null;
                return false;
            }
        }
    }
    class HardDrive
    {
        private string model = null;
        private string type = null;
        private string serialNo = null;
        public string Model
        {
            get { return model; }
            set { model = value; }
        }
        public string Type
        {
            get { return type; }
            set { type = value; }
        }
        public string SerialNo
        {
            get { return serialNo; }
            set { serialNo = value; }
        }
    }
} 
```

[请参阅此处了解更多信息](http://social.msdn.microsoft.com/Forums/en/sqlnetfx/thread/aaaeda1c-22dc-47f0-b0ff-6adc7aa8f1ac)

[您可能还想学习 CLR](http://msdn.microsoft.com/en-us/library/ms131077.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:06:54.107

您必须分 3 个阶段完成：

*   数据源的连接字符串为您提供安装 SQL Server 的计算机的名称
*   然后，您必须查询计算机以找出安装了 SQL Server 的驱动器
*   然后您可以在这里使用其他人提供的代码来获取序列号

# php - 解析错误：语法错误，意外的 T_BOOLEAN_AND，期待 '(' in

> ID：11500935
> 
> 赞同：1
> 
> 时间：2012-07-16T08:54:03.657
> 
> 标签：php

```
$command = $_POST['cmd'];
$args = $_POST['args'];

if($args == !empty && $command != 'reload'){

} 
```

谢谢各位，搞定了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:56:11.340

空是一个函数。

```
$command = $_POST['cmd'];
$args = $_POST['args'];
if(!empty($args) && $command != 'reload'){

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:56:22.057

`empty()`是构造，你应该像这样使用它：

```
if(!empty($args) && $command!='reload'){

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:56:29.273

检查是否条件：

```
if(!empty($args) && $command != 'reload') 
```

# php - 消息系统：保存并发送 - 何时插入新消息？

> ID：11500940
> 
> 赞同：2
> 
> 时间：2012-07-16T08:54:15.897
> 
> 标签：php, mysql, user-interface

在使用 PHP 和 MySQL 构建的私人消息系统中，用户可以编写新消息并回复消息。有两个按钮：“发送”和“保存”。消息状态存储在数据库中（0=尚未发送，1=已发送）。此外，消息会通过 ajax 调用每 3 分钟自动保存一次。

发送的消息和草稿都存储在数据库的同一个表中。现在，你什么时候做`INSERT INTO messages ...`？

如果用户点击撰写新消息或回答？如何清除所有未发送的消息，如果用户不发送消息，关闭窗口，按下返回按钮？

你会建议什么其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:27:52.503

> 自动保存的消息不显示为草稿版本吗？然后他们会自己清理大部分

根据要求回答;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:03:12.617

当用户单击“撰写消息”时，我会插入一条状态为“待处理”的新消息。例如，您可以删除一天内不活动的所有“待处理”消息。

当用户忙于处理该特定消息时，例如 1 分钟，您将消息保存为“概念”，以便用户稍后离开页面时查看。我永远不会删除概念并让用户自己这样做。

当用户单击“保存”（而不是“发送”）时，您也会为消息提供“概念”状态（如果之前没有的话）。

消息发送后，您将其设置为“已发送”状态。但是在以这种方式开发消息系统之前，您需要考虑一些事情：

问自己一个问题：什么*是*消息？消息是否具有自身的状态？该状态适用于谁？一条已读消息的状态可以是“已读”，但如果您将消息发送给多个收件人怎么办？当所有收件人都阅读时，您是否更改状态？不是很方便。

我建议您稍微更改您的数据库模型，以启用多个收件人。您将标题、正文等保存在一条记录中，并为每个持有邮件状态的收件人添加新记录（在不同的表中）。发件人一个，*每个*收件人一个。通过这种方式，您可以单独操作每个收件人的邮件状态，并且您可以通过查看所有这些记录来计算整体邮件状态。（*10 个收件人中有 5 个已阅读您的消息*）。

# php - 为什么 smarty 函数 date_format 得到错误的时间

> ID：11500944
> 
> 赞同：0
> 
> 时间：2012-07-16T08:54:44.117
> 
> 标签：php, datetime, timezone, smarty

```
echo date('Y-m-d',time()) 
```

我得到 2012-07-16 ，但是当 smarty 输出是

```
{$smarty.now | date_format : "%Y-%I-%d"} 
```

我得到 2012-04-16

我已经确定 time_zone 设置正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:01:54.037

因为`%I`是小时......尝试：

```
{$smarty.now | date_format : "%Y-%m-%d"} 
```

> %m - 十进制数的月份（范围 01 到 12）

[文档在这里`date_format`](http://www.smarty.net/docsv2/en/language.modifier.date.format)

# android - 在 imageview 中显示随机 jpg

> ID：11500945
> 
> 赞同：0
> 
> 时间：2012-07-16T08:54:52.853
> 
> 标签：android, imageview

我的原始文件夹中有一堆图像，名称范围从 1.jpg 到 100.jpg。我想生成一个介于 1 - 100 之间的随机数，然后根据生成的数字在图像视图中显示相应的图像，例如随机数 5，因此显示 5.jpg。

我怎样才能做到这一点？谢谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:02:14.283

```
 Random random = new Random();

  // The +1 because nextInt(100) delivers between 0-99
  int drawableNumber = random.nextInt(100) +1;

  String drawableName = recourceNum + ".jpg";

  yourImageView.setImageDrawable(getRecource().getDrawable(getRecources().getIdentifier(drawableName, "res/drawable", yourPackageName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:02:02.650

尝试这个：

```
oncreate(){

1- initialize your imageView say imgView.
2- generate a random number between 1 to 100, say random.
3- make sure you have all those 100 images in your res/drawable folder.

4- get the res ID related to the random by using following code:

    int id = context.getResources().getIdentifier(String.valueOf(random), "drawable", context.getPackageName());

5- imgView.setImageResource(id);

} 
```

希望这对你有帮助！！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T09:02:58.167

```
private static int getRandomInteger(int aStart, int aEnd) {
    long range = (long) aEnd - (long) aStart + 1;
    long fraction = (long) (range * new Random().nextDouble());
    int randomNumber = (int) (fraction + aStart);
    return randomNumber;
} 
```

# javascript - EffectComposer 和带三个.js 的 alpha 通道

> ID：11500951
> 
> 赞同：2
> 
> 时间：2012-07-16T08:55:17.807
> 
> 标签：javascript, three.js

这是我的代码：

```
renderTargetParametersRGBA = { 
minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter,
 format: THREE.RGBAFormat,stencilBuffer: true 
 };
colorTarget = new THREE.WebGLRenderTarget(
 SCALE * SCREEN_WIDTH, SCALE * SCREEN_HEIGHT, renderTargetParametersRGBA
 );
composer = new THREE.EffectComposer( 
renderer,colorTarget 
);
var renderScene = new THREE.RenderPass(scene,camera);
var effect2 = new THREE.ShaderPass(THREE.ShaderExtras[ "shader1" ]);
composer.addPass(renderScene);
composer.addPass(effect2); 
```

在 renderScene 中，我将场景的 alpha 通道设置为某个值，但在我的 shader1 中，我没有找到 alpha 通道的相同值，似乎 alpha 通道被破坏了。怎么了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T19:02:30.400

Three.js EffectComposer 层（纹理）中并没有真正的“透明度”。默认情况下，透明像素只是简单地呈现为黑色 (0,0,0) 或背景色，因此当您在着色器中组合像素值时，请进行数学计算，以使它们产生颜色的方式来解释这些“透明”值如果它是透明的，你会期望的组合。

如果您将值作为统一或属性传递（取决于您的目标），还有一种方法可以直接控制着色器中的 alpha。对我来说，我传入一个单独的 alpha 值属性数组，然后使用它们来控制着色器本身中的 alpha。

```
varying float vAlpha;
varying vec3 vColor;

void main() {
gl_FragColor = vec4( vColor, vAlpha );
... 
```

# svn - svn：数据库被锁定，正在执行语句'RELEASE s0'

> ID：11500954
> 
> 赞同：23
> 
> 时间：2012-07-16T08:55:40.363
> 
> 标签：svn, tortoisesvn

在尝试从私有分支合并时，我不断收到列出的错误：

> 数据库已锁定，正在执行语句“RELEASE s0”

我运行 collabnet subversion 边缘服务器：1.7.5-3220.94

我运行 Tortoise svn 客户端： TortoiseSVN 1.7.7, Build 22907 - 64 Bit , 2012/05/15 12:16:05

谁能告诉我是什么原因造成的，以及如何解决这个问题。Web 上的参考资料表明某些进程正在使用 sqlite 后端。来自 svn 客户端上下文菜单的通用“释放锁定”操作似乎没有帮助？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-29T13:06:21.977

如果您使用的是 Windows 版本，请执行以下操作：

右键单击 repo 文件夹并转到`TortoiseSVN`选项，然后在此旁边选择选项`Clean Up`。

在清理的选项中选择：

```
Clean Up working copy status
Refresh Shell Overlays
Include external 
```

笑

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-18T11:06:56.973

我有同样的问题。我同时使用 Tortoise 和 Eclipse。关闭 Eclipse 解决了这个问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-16T13:21:20.480

当我尝试更新本地副本但合并窗口保持打开状态时出现此错误。我关闭了合并窗口，更新和清理工作正常。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-16T19:23:13.887

如果我打开一个 shell 并运行一个颠覆命令，然后尝试使用 Tortoise 进行合并，我会收到此错误。

关闭 shell 窗口，然后从 Tortoise 再次进行合并。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-04-06T21:52:48.583

如果您使用另一个程序 (netbeans) ，则您已配置程序 Netbeans ：

options > Team > versioning > subversion > Preferential client 为“CLI”更改此选项，然后在目录 TortoiseSVN\BIN 中选择 SVN.exe

这解决了锁定数据库的问题

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-03T04:54:52.327

做SVN清理。问题将得到解决。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-24T18:15:27.283

我有一个朋友被这个卡住了。他重新启动了计算机，一切正常，没有丢失任何东西，他可以再次工作。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-02-20T17:36:24.053

这通常是因为另一个程序正在同一个工作副本上执行版本控制。

关闭程序（Eclipse、Netbeans、...），然后在对工作副本执行“清理”后重试

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-05T04:25:58.950

如果上述答案没有任何效果，那么只需从任务管理器中终止该进程并重试。**无需重新启动。**这个对我有用

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-25T07:21:53.450

使用 lsof 列出 svn 的文件句柄并杀死它然后运行 ​​svn cleanup

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-16T23:04:02.597

感谢大家。我认为这可能是我的工作副本进行了本地修改的情况。我刚刚浏览了 TortoiseSVN 1.7 作者：Lesley A. Harrison，它建议确保顺利合并：确保您的工作副本是干净的并且没有本地修改。我认为我的情况并非如此。

干杯。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-17T19:51:23.107

我遇到了同样的问题。对我来说，这是因为**项目文件夹在 OneDrive**中，而 OneDrive 正在同步同一个文件夹。当我**停止同步 OneDrive 并关闭它时**，事情就解决了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-08-22T11:37:47.237

这帮助我解决了问题（颠覆 1.7.10）：

```
 $ cd /my/repository/.svn
 $ mv wc.db wc.db.old
 $ sqlite3 wc.db.old
 sqlite> .backup main wc.db
 sqlite> .exit 
```

确保它可以工作后，您可以删除 wc.db.old。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-09-10T14:46:50.673

在 Linux 上，首先要检查的是是否有任何其他“svn 更新”正在进行中。如果是，要么等待它完成，要么杀死它（如果你杀死了它，你将需要运行“svn cleanup”）。在此之后，svn 应该会正常运行。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-09-10T15:38:12.020

在 Windows 2008 R2 上，操作系统重新启动修复了它。

# wcf - 新手：使用 busyindicator（silverlight 和 wcf 服务）进行的跨线程访问无效

> ID：11500957
> 
> 赞同：0
> 
> 时间：2012-07-16T08:55:54.823
> 
> 标签：wcf, silverlight, multithreading, busyindicator

我对silverlight 的busyindicator 控制有疑问。我有一个数据网格（datagrid1），其源设置为 wcf 服务（客户端）。当数据网格自行加载时，我想使用silvelright 工具包的busyindicator 控件（bi）。

但是当我使用“ThreadPool”时，我有一个“无效的跨线程访问”。

```
Sub LoadGrid()
        Dim caisse As Integer = ddl_caisse.SelectedValue
        Dim env As Integer = ddl_env.SelectedValue

        bi.IsBusy = True
        ThreadPool.QueueUserWorkItem(Sub(state)
                                         AddHandler client.Get_PosteSPTCompleted, AddressOf client_Get_PosteSPTCompleted
                                         client.Get_PosteSPTAsync(caisse, env)
                                         Dispatcher.BeginInvoke(Sub()
                                                                    bi.IsBusy = False
                                                                End Sub)
                                     End Sub)
End Sub

Private Sub client_Get_PosteSPTCompleted(sender As Object, e As ServiceReference1.Get_PosteSPTCompletedEventArgs)
    DataGrid1.ItemsSource = e.Result ' Here, Invalid cross thread access
End Sub 
```

我知道“新线程”中不存在数据网格控件，但是我必须如何避免这个错误？

谢谢你。

威廉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:35:55.210

*   First point: Why are you using the `ThreadPool`?

Using a `ThreadPool` would be a good idea if your service was synchronous, but your WCF service is asynchronous: it won't block your UI thread after being called using `Get_PosteSPTAsync`.

*   Second point: there seems to be an issue with your `IsBusy` property. You're first setting it to `true`, then you starts an operation asynchronously, then you set it to `false` immediately. You should set it to false in the `Completed` handler.
*   Third point: the `client_Get_PosteSPTCompleted` handler won't be executed in the same thread as the UI thread (even if you don't use the `ThreadPool`). That's why you'll have to use the dispatcher here so force using the UI thread.

Your `DataGrid1.ItemsSource = e.Result` must be modified to:

```
Dispatcher.BeginInvoke(Sub()
    DataGrid1.ItemsSource = e.Result     ' Fixes the UI thread issue
    bi.IsBusy = False     ' Sets busy as false AFTER completion (see point 2)
End Sub) 
```

(note sure about the VB.Net syntax, but that's the idea)

*   Last point: I don't know about the `client` object lifetime, but you're adding a new handler to the `Get_PosteSPTCompleted` each time you call `LoadGrid`. Maybe you could think of detaching handlers after use.

# powershell - 如何在 Powershell 中将键盘焦点设置为文本框

> ID：11500962
> 
> 赞同：4
> 
> 时间：2012-07-16T08:56:09.613
> 
> 标签：powershell

我正在寻找如何将键盘焦点自动设置为 powershell 中的文本框。

我有一个脚本，要求用户从下拉菜单中选择一个选项，然后根据该选择，他们必须输入某些参数。这一切都很好。

为了便于使用，我希望每次显示新键盘时，键盘的焦点都会转移到输入框，这样用户就不必一直点击它来输入一些文本。

到目前为止我的代码：

```
function inputBox($parameter)
{
$objForm = New-Object System.Windows.Forms.Form 
$objForm.Text = $parameter
$objForm.Size = New-Object System.Drawing.Size(300,200) 
$objForm.StartPosition = "CenterScreen"

$objForm.KeyPreview = $True
$objForm.Add_KeyDown({if ($_.KeyCode -eq "Enter") 
    {$paramValue=$objTextBox.Text;$objForm.Close()}})
$objForm.Add_KeyDown({if ($_.KeyCode -eq "Escape") 
    {$objForm.Close()}})

$OKButton = New-Object System.Windows.Forms.Button
$OKButton.Location = New-Object System.Drawing.Size(75,90)
$OKButton.Size = New-Object System.Drawing.Size(75,25)
$OKButton.Text = "OK"
$OKButton.Add_Click({$paramValue=$objTextBox.Text;$objForm.Close()})
$objForm.Controls.Add($OKButton)

$objLabel = New-Object System.Windows.Forms.Label
$objLabel.Location = New-Object System.Drawing.Size(10,20) 
$objLabel.Size = New-Object System.Drawing.Size(280,20) 
$objLabel.Text = $parameter
$objForm.Controls.Add($objLabel) 

$objTextBox = New-Object System.Windows.Forms.TextBox 
$objTextBox.Location = New-Object System.Drawing.Size(10,40) 
$objTextBox.Size = New-Object System.Drawing.Size(260,20) 
$objForm.KeyPreview = $True
$objForm.Controls.Add($objTextBox) 

$objForm.Topmost = $True

$objForm.Add_Shown({$objForm.Activate()})
[void] $objForm.ShowDialog()

return $paramValue 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T09:09:21.007

按照您的代码，我可以在其中找到一个下拉菜单，以便在显示表单时将焦点放在文本框上：

```
$objForm.Add_Shown({$objForm.Activate(); $objTextBox.focus()}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:08:31.540

尝试以下`Select`方法以防万一`Focus()`：

```
if($textbox.CanFocus)
{
   $textbox.Focus()
}
else
{
   $textbox.Select()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-06T10:14:02.897

效果很好，但我需要使`paramValue`变量脚本全局（`Add_Click`例程内的范围不是脚本范围，`paramValue`设置丢失）。使用`$Global:paramValue`对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-18T13:27:18.283

这是@CB 和@Shay Levy 答案的替代方案（它们都不适合我）：

```
$objForm.Add_Shown( { $objTextBox.Select() }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-12T05:51:58.533

我想为这个问题添加两个额外的替代解决方案。

只需将您的`$objTextBox`创建代码移动到上面的第一个位置`$OKButton`。

代码始终从上到下进行初始化和优先排序。有了这个小小的改变，它会选择你的`TextBox`第一个。

对于第二个解决方案，手动添加一个`TabIndex`优先级。

```
$objTextBox.TabIndex = 0

$OKButton.TabIndex = 1 
```

较低的数字被优先考虑并首先得到关注。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-11-21T15:44:31.440

与原始帖子和焦点一起使用的代码是：

```
if ( $objTextBox.CanFocus )
{
$objTextBox.Focus()
}
else
{
$objTextBox.Select()
} 
```

# c# - 为什么 Marshal.WriteInt64 方法的代码如此复杂？

> ID：11500965
> 
> 赞同：5
> 
> 时间：2012-07-16T08:56:13.577
> 
> 标签：c#, marshalling, unsafe

下面的代码反映在 .Net Framework 中：

```
[SecurityCritical]
public static unsafe void WriteInt64(IntPtr ptr, int ofs, long val){
    try{
        byte* numPtr = (byte*) (((void*) ptr) + ofs);
        if ((((int) numPtr) & 7) == 0){
            *((long*) numPtr) = val;
        }
        else{
            byte* numPtr2 = (byte*) &val;
            numPtr[0] = numPtr2[0];
            numPtr[1] = numPtr2[1];
            numPtr[2] = numPtr2[2];
            numPtr[3] = numPtr2[3];
            numPtr[4] = numPtr2[4];
            numPtr[6] = numPtr2[6];
            numPtr[7] = numPtr2[7];
        }
    }
    catch (NullReferenceException){
        throw new AccessViolationException();
    }
} 
```

在我看来，`*((long*) numPtr) = val`已经足够了，而且效率很高。

为什么这么复杂？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:00:59.963

尽管经过优化，但它看起来相当简单。

注意外部 if - 它检查您是否可以在一个操作中写入 Int64（如果您提供该方法的指针是对齐的，则会发生这种情况 - 指向内存中 Int64 的开头 - 地址需要是8）。

如果您不能在一个操作中写入，则代码一次只写入一个字节，跳过循环以节省一些时间（这称为“循环展开”）

# php - #2101: 传递给 URLVariables.decode() 的字符串必须是包含名称/值对的 URL 编码查询字符串

> ID：11500974
> 
> 赞同：2
> 
> 时间：2012-07-16T08:56:30.607
> 
> 标签：php, actionscript-3, flash

我有这个闪存代码。它将我游戏中的分数和用户名发送到 savescores.php。但我有上面的错误。我已将 URLLoaderDataForma.VARIABLES 更改为 TEXT，但仍然发生相同的错误。我应该怎么做才能解决这个问题？提前致谢..

```
private function SendScore(score:int) 
    {
        var variables:URLVariables = new URLVariables();
        variables.score = score;
        variables.username = username;
        var urlloader:URLLoader = new URLLoader();

        var urlrequest:URLRequest = new URLRequest('http://localhost:90/savescores.php');
        urlrequest.method = URLRequestMethod.POST;
        urlrequest.data = variables;
        urlloader.dataFormat = URLLoaderDataFormat.TEXT;

        urlloader.load(urlrequest);
        urlloader.addEventListener(Event.COMPLETE, CompleteHandler, false, 0, true);
        urlloader.addEventListener(IOErrorEvent.IO_ERROR , ErrorHandler, false, 0, true);
    }

    private function CompleteHandler(e:Event) 
    {
        var vars:URLVariables = new URLVariables(e.target.data);
        if(vars.success) trace('Saving succeeded');
        else ('Saving failed');
    }

    private function ErrorHandler(e:IOErrorEvent) 
    {
        trace('Error occured');
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-20T02:56:52.683

**答案：问题出在 PHP 上**

-- 你必须返回一个 var 到 AS3 否则你会得到这个错误。

我发布这个是因为除非观众阅读评论，否则他们不会知道问题所在和解决方案。提出这个问题的 Anil 表示这是 PHP 而不是 as3 的问题，但没有说明原因。上面标记为正确的答案似乎不是一个充分的答案，因为它只提出了一个可能的解决方案。Anil 承认这是 php.ini 的问题。我相信这个答案更完整，可以帮助遇到同样问题的人。

我有一个类似的问题。问题出在 php.ini 中。除非你从 php 输出一些东西，否则你会得到这个错误。

Flash 不喜欢从 php 返回任何内容，并给出以下错误：

错误：错误 #2101：传递给 URLVariables.decode() 的字符串必须是包含名称/值对的 URL 编码查询字符串。在 Flash.net::URLVariables/decode() 的 Error$/throwError() 在 flash.net::URLVariables() 在 flash.net::URLLoader/onComplete()

这是我的 PHP 的一部分，它没有返回任何内容：

```
if($ConfirmedEmail=="true")
{
    echo "Status=true";
}
if($ConfirmedEmail=="false")
{
    echo "Status=false";
} 
```

**但如果它既不是真/假，它也不会输出任何东西。= Flash 不喜欢！**

所以 PHP 代码必须是这样的：

```
if($ConfirmedEmail=="true")
{
    echo "Status=true";
}
else if($ConfirmedEmail=="false")
{
    echo "Status=false";
}
else
{
    echo "Status=Nada";
} 
```

这是我的AS3代码供您查看。希望它可以帮助某人。

```
public function checkEmail(e:Event = null)
{

    var urlreq = new URLRequest("http://www.MyWebsite.com/myScript.php");
    urlreq.method = URLRequestMethod.POST;

    var urlvars = new URLVariables();
    urlvars.userID = Main.userID;

    urlreq.data = urlvars;

    var loader:URLLoader = new URLLoader(urlreq);
    loader.addEventListener(Event.COMPLETE, completed);
    loader.dataFormat = URLLoaderDataFormat.VARIABLES;
    loader.load(urlreq);
}

public function completed(event:Event):void
{
    var variables:URLVariables = new URLVariables(event.target.data);
    trace("Email Confirmed: " + variables.Status);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:36:01.260

我认为问题不在于请求，而在于响应处理。您将 var 实例化为*URLVariables*，但可能*e.target.data*不符合预期的格式。跟踪*e.target.data*值以获取更多信息。

# git - 完全 fork 一个 git repo？

> ID：11500979
> 
> 赞同：0
> 
> 时间：2012-07-16T08:56:48.547
> 
> 标签：git

我还没有从这里的众多答案和博客文章中拼凑出我想知道的东西，所以我问了这个问题：

如何分叉一个 git repo 以便获得上游的所有分支和标签？

我试过的是：

```
git init
git remote add origin <ORIGIN_URL> # i.e. my repo
git remote add upstream <UPSTREAM_URL> # i.e. the repo I want to fork
git fetch upstream
git push --all origin 
```

但是当我期望它起作用时，最后一行失败了。我明白了：

```
$ git push --all origin
No refs in common and none specified; doing nothing.
Perhaps you should specify a branch such as 'master'.
fatal: The remote end hung up unexpectedly
error: failed to push some refs to <ORIGIN_URL> 
```

有任何想法吗？

编辑：

也许你可以把这个问题想象成“当你点击 fork 按钮时 GitHub 实际上做了什么？”，因为这就是我想要复制的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:07:25.797

试试镜子：

```
git clone --mirror 
```

这样，`origin`在没有分支命名空间的情况下创建了远程（命名）。IOW，镜像中的 refs/heads/master 完全对应（并绑定到）原始存储库中的 refs/heads/master。

现在只需使用此存储库而不是原始上游存储库。如果您想更新镜像，请在其中执行以下操作：

```
cd upstream-mirror.git && git --bare fetch upstream 
```

警告：如果你推入你的镜像，修改上游分支，上游 repo 和你的镜像将会发散。并且 push （没有`-f`选项）将失败，以防止这种情况发生。

Mirror 实际上是上游 repo 的精确镜像，作为它的所有者，您可以选择对其进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:20:05.490

这是我想出的最好的方法来做我想做的事情，这似乎可行，并且与 GitHub 的行为相似：

```
git clone --mirror <UPSTREAM> myrepo
cd myrepo
git remote rename origin upstream
git remote add origin <MY_ORIGIN>
git push --all
git push --tags 
```

然后调整`.git/config`以将`upstream`遥控器更改为不再镜像，因为这肯定不是我现在想要的。

# c# - 数据网格列中的 System.Byte

> ID：11500981
> 
> 赞同：0
> 
> 时间：2012-07-16T08:56:55.927
> 
> 标签：c#, sql, wpf, datagrid

我正在使用以下查询：

```
string query = @"SELECT r.id, user_name, user_phone, date_create, REPLACE( date_payment,  '0000-00-00 00:00:00',  'Не оплачено' ) as 
                date_payment, payment_method, amount, rs.name_ru
                FROM request AS r, request_status AS rs
                WHERE r.status = rs.id"; 
```

我正在通过以下方式绑定数据模板：

```
DataTemplate>
    <TextBlock VerticalAlignment="Center" Text="{Binding date_payment}" Width="135" />
</DataTemplate> 
```

**除了“ date_payment** ”之外，它的抛出正确输出它的输出值来自“ **System.Byte []** ”。请帮忙！！！

**来自 MBen 的感谢**

```
class ByteArrayToString : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value != null)
            {
                var listOfBytes = value as Byte[];
                string output = "";
                output = System.Text.Encoding.UTF8.GetString(listOfBytes);
                return output;
            }

            return "";
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return DependencyProperty.UnsetValue;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:06:21.977

`date_payment` 是一个数组，并且您没有为 WPF 提供任何显示它的方式，因此它调用`ToString`. 你可以为它提供一个数据转换器。

将资源添加到您的窗口或页面：

```
 <Window.Resources>
        <local:ByteArrayToString x:Key="ByteArrayConverter" />
    </Window.Resources> 
```

在你`TextBlock`的这样使用它：

```
<TextBlock VerticalAlignment="Center" Text="{Binding date_payement, Converter={StaticResource ByteArrayConverter}}" Width="135" /> 
```

现在您需要添加一个进行转换的新类：

```
 class ByteArrayToString : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value != null)
            {
                var listOfBytes = value as Byte[];
                string output ="";
                output = listOfBytes.Aggregate(output, (current, elemt) => current + elemt.ToString());
                return output;
            }

            return "";
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return DependencyProperty.UnsetValue;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:04:54.830

这件事发生在我身上。这似乎是由于连接器中的错误造成的。尝试将日期列转换为 CHAR。它对我有用。

# php - 来自服务器的排队请求 [Apache]

> ID：11500982
> 
> 赞同：0
> 
> 时间：2012-07-16T08:56:59.883
> 
> 标签：php, mysql, apache, apache2

我有一个拍卖网站项目，现在已经使用了将近 2 个月。现在唯一的问题是，有时来自客户端的请求会延迟 2-3 秒。假设有人在 00:00:01 出价，请求在 3 秒后收到，这意味着拍卖现已结束，无法再处理该出价。我确信当有人出价时特定的拍卖仍然有效，因为我进行了验证，并且如果拍卖已经结束，则不允许用户出价。

`user   date/time of bid request was received   date/time auction closed
ABC     2012-07-16 15:08:48                     2012-07-16 15:08:46`

我还使用 ping -t 监控 ping 延迟。出现此问题的同时，请求超时也频繁出现。通常平均时间少于 6 毫秒 - 仅 100 毫秒

无论如何，这种情况每天随机发生一次或两次。我不确定是什么触发了这个问题，我试图搜索，其中一些人说增加 MaxClient（从 150 更改为 256。）可以解决这个问题，但事实并非如此。

PHP、Mysql、Windows 服务器、Apache

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:03:54.770

您描述的延迟取决于服务器容量、净负载和当前服务器负载。如果它每天只发生两次，那么它可能只是一个统计异常值。在我看来，除了提供更好的互联网连接或更快的服务器之外，您无能为力。

请参阅这篇文章以进一步阅读[Apache webserver - 当所有工作线程都忙时，请求会发生什么](https://stackoverflow.com/questions/5963460/apache-webserver-what-happens-to-requests-when-all-worker-threads-are-busy)

# nhibernate - 删除不在子查询中的行 - 以 NHibernate.QueryException 结尾：

> ID：11500983
> 
> 赞同：0
> 
> 时间：2012-07-16T08:57:02.417
> 
> 标签：nhibernate, fluent-nhibernate, sql-server-ce

我想从表 A 中删除表 B 中不存在的所有行。为了做到这一点，我使用 session.Delete(query) 如下：

```
Session.Delete<A>("FROM A WHERE id NOT IN (SELECT vpg_id FROM B)"); 
```

我收到以下错误：

```
NHibernate.QueryException: could not resolve property: vpg_id of: A [FROM A WHERE Id NOT IN (SELECT vpgid FROM B)] 
```

我也尝试使用 HQL 进行如下操作：

```
Session.CreateQuery("DELETE A WHERE id NOT IN (SELECT vpg_id FROM B)").ExecuteUpdate(); 
```

并得到这个异常：

```
 NHibernate.QueryException: No data type for node: IdentNode vpg_id [DELETE A WHERE id NOT IN (SELECT vpg_id FROM B)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:56:34.520

您应该尝试为您的类设置别名（来自 NHibernate 参考： http: [//nhibernate.info/doc/nhibernate-reference/queryhql.html#queryhql-subqueries](http://nhibernate.info/doc/nhibernate-reference/queryhql.html#queryhql-subqueries)）

```
from A as aClass 
where aClass.id not in ( 
    select bClass.vpg_id from B as bClass
) 
```

或尝试存在

```
from A as aClass 
where not exists ( 
    select bClass.vpg_id from B as bClass where aClass.id = bClass.vpg_id
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:13:09.397

我只能通过使用带有 SQL native 的 CreateSQLQuery 来做到这一点：

```
const string deleteSql = @"DELETE FROM CheckpointStorageObject WHERE NOT EXISTS (Select 1 from CheckpointToProtectionGroup WHERE CheckpointToProtectionGroup.checkpoint_id = CheckpointStorageObject.id)";
Session.CreateSQLQuery(deleteSql).ExecuteUpdate(); 
```

我不能使用 CreateQuery，因为 CheckpointToProtectionGroup 表是一个关联表，它有 2 个对 2 个不同表的引用。结果 NHibernate 无法解析 CheckpointToProtectionGroup.checkpoint_id 属性（即使我使用了别名），因为 checkpoint_id 列仅存在于数据库中，但不存在于 CheckpointToProtectionGroup 类中。

如果您在包含在 CreateSQLQuery 之前调用的其他 HQL 并可能影响您的本机 SQl 的事务中使用 CreateSQLQuery - 您应该在调用 CreateSQLQuery 之前调用 session.flush()。

# android - 旋转动画在 android 4.0 中不起作用

> ID：11500985
> 
> 赞同：1
> 
> 时间：2012-07-16T08:57:03.557
> 
> 标签：android, android-4.0-ice-cream-sandwich

在我的 Android 应用程序中，我以编程方式将旋转动画应用于可绘制对象：

```
 Animation rotation = AnimationUtils.loadAnimation(this, R.animator.rotate);
    rotation.setRepeatCount(Animation.INFINITE);
    progressDialog.findViewById(R.id.progress).startAnimation(rotation); 
```

这在 Android 2.3 中运行良好，但在 4.0 中失败。drawable 在 4.0 中没有动画。这里可能是什么问题？

**编辑** 这是我的`rotate.xml`文件：

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false">
    <rotate
        android:fromDegrees="0"
        android:toDegrees="360"
        android:pivotX="50%"
        android:pivotY="50%" 
        android:duration="2000"
        android:repeatCount="-1"
        android:interpolator="@android:anim/linear_interpolator"/>
</set> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:14:53.670

我在调用容器视图的方法之前移动了代码`show`，它现在可以在 2.3 和 4.0 中工作：

```
Animation rotation = AnimationUtils.loadAnimation(MainView.this, R.animator.rotate);
progressDialog.findViewById(R.id.progress).startAnimation(rotation);
progressDialog.show(); 
```

# eclipse - 获取 java.lang.IllegalStateException: Profile not locked due to exception in eclipse while trying to open 安装新软件

> ID：11500986
> 
> 赞同：0
> 
> 时间：2012-07-16T08:57:11.063
> 
> 标签：eclipse, rcp

我正在使用 Eclipse Gallileo，一旦我尝试打开安装新软件，我收到错误，因为安装新软件窗口没有打开

```
java.lang.IllegalStateException: Profile not locked due to exception:
C:\WORK\GALILEO\eclipse_STT - Offline\p2\org.eclipse.equinox.p2.engine\profileRegistry\
epp.package.rcp.profile\.lock (Access is denied)
  at org.eclipse.equinox.internal.p2.engine.ProfileLock.lock(ProfileLock.java:106)
  at org.eclipse.equinox.internal.p2.engine.SimpleProfileRegistry.restore(SimpleProfileRegistry.java:377)
  at org.eclipse.equinox.internal.p2.engine.SimpleProfileRegistry.getProfileMap(SimpleProfileRegistry.java:247)
  at org.eclipse.equinox.internal.p2.engine.SimpleProfileRegistry.internalGetProfile(SimpleProfileRegistry.java:207)
  at org.eclipse.equinox.internal.p2.engine.SimpleProfileRegistry.getProfile(SimpleProfileRegistry.java:137)
  at org.eclipse.equinox.internal.provisional.p2.ui.operations.ProvisioningUtil.getProfile(ProvisioningUtil.java:217)
  at org.eclipse.equinox.internal.p2.ui.sdk.ProvSDKUIActivator.getSelfProfileId(ProvSDKUIActivator.java:161)
  at org.eclipse.equinox.internal.p2.ui.sdk.PreloadingRepositoryHandler.execute(PreloadingRepositoryHandler.java:49)
  at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:294)
  at org.eclipse.core.commands.Command.executeWithChecks(Command.java:476)
  at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:508)
  at org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:169)
  at org.eclipse.ui.internal.handlers.SlaveHandlerService.executeCommand(SlaveHandlerService.java:241)
  at org.eclipse.ui.menus.CommandContributionItem.handleWidgetSelection(CommandContributionItem.java:770)
  at org.eclipse.ui.menus.CommandContributionItem.access$10(CommandContributionItem.java:756)
  at org.eclipse.ui.menus.CommandContributionItem$5.handleEvent(CommandContributionItem.java:746)
  at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
  at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003)
  at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3880)
  at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3473)
  at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2405)
  at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2369)
  at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2221)
  at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:500)
  at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
  at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:493)
  at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
  at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:113)
  at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:194)
  at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
  at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
  at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:368)
  at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
  at java.lang.reflect.Method.invoke(Unknown Source)
  at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:559)
  at org.eclipse.equinox.launcher.Main.basicRun(Main.java:514)
  at org.eclipse.equinox.launcher.Main.run(Main.java:1311) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:53:31.330

通过异常很清楚地证明了这个问题。

您需要检查您运行 Eclipse 的帐户是否有权创建锁定文件（**C:\WORK\GALILEO\eclipse_STT - Offline\p2\org.eclipse.equinox.p2.engine\profileRegistry\epp.package.rcp.profile。锁**）。或者如果它已经存在，则手动删除它。

# mysql - MySQL 中的 Order by 子句在 foreach 循环中不起作用

> ID：11500992
> 
> 赞同：0
> 
> 时间：2012-07-16T08:57:52.587
> 
> 标签：mysql, sql-order-by

我正在尝试获取分配给 id=9 的特定子类别的配置文件名称。当我运行下面的代码时，我得到了我想要的配置文件，但由于某种原因，foreach 循环中的 ORDER BY 子句没有按其名称的字母顺序对它们进行排序。相反，它们的排序方式与它们在“子类别”表中的“配置文件”字段中的排序方式相同（配置文件的 ID 以逗号分隔）。例如，如果在 subcategories['profiles'] 我有 ',5,1,2' 配置文件名称将按以下顺序显示：

1.  ID=5 的配置文件
2.  ID=1 的配置文件
3.  ID=2 的配置文件

我正在使用explode() 函数获取“子类别”表中每个配置文件的ID，然后使用该ID 使用foreach 循环内的查询从“配置文件”表中检索它们的信息。

我在这里错过了什么吗？谢谢你的帮助。

这是我的代码：

```
<?php
$subcategories=mysql_query("select * from subcategories where id='9'");

while ($subcategories = mysql_fetch_array($subcategories)) 

{
 $profiles = $subcategories['profiles'];
 $profiles = explode(',', $profiles);

       foreach ($profiles as $p)
       {
         $all_places = mysql_query("select * from profile where id='$p' and active='1' order by name asc");

           while ($profile = mysql_fetch_array($all_places)) 
           {

               echo $profile['name'];                   

           }

       }

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:05:28.983

您的结果不按名称排序的原因是因为您在 foreach 循环中为 $profiles 使用新的 SQL 查询检索每个配置文件。在您的场景中如此有效，您最终将得到 3 个 SQL 查询，每个查询返回 1 个配置文件。因此，当声明“order by”子句时，它在每个查询中按名称排序，每个查询仅包含 1 个结果。

使用 IN 语句对您有用吗？例如。

```
 <?php
$subcategories=mysql_query("select * from subcategories where id='9'");

while ($subcategories = mysql_fetch_array($subcategories)) 

{

//i assume $subcategories['profiles'] are integers separated by comma as mentioned
 $profiles = $subcategories['profiles'];

                 $all_places = mysql_query("select * from profile where id IN ($profiles) and active='1' order by name asc");

                     while ($profile = mysql_fetch_array($all_places)) 
                     {

                       echo $profile['name'];                   

                     }

}
?> 
```

# java - 转置存储在一维数组中的矩阵而不使用额外的内存

> ID：11500993
> 
> 赞同：6
> 
> 时间：2012-07-16T08:58:01.103
> 
> 标签：java, c++, algorithm, sorting

> **可能重复：**
> [矩阵的就地转置](https://stackoverflow.com/questions/9227747/in-place-transposition-of-a-matrix)

最近参加了一次技术书面面试。通过以下问题。

我有一个数组说

```
testArray = {a1,a2,a3,...an,b1,b2,b3,....bn,c1,c2,c3,.....,cn} 
```

我需要将此数组排序为`

```
testArray = {a1,b1,c1,a2,b2,c2,a3,b3,c3,.....,an,bn,cn} 
```

约束是我不应该使用额外的内存，不应该使用任何内置函数。应该写完整的代码，可以是任何语言，也可以使用任何数据结构。

例如：

```
Input: {1,2,3,4,5,6,7,8,9}, n = 3

Output: {1,4,7,2,5,8,3,6,9} 
```

我无法在约束范围内得到任何解决方案，任何人都可以提供解决方案或建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T09:07:35.703

这只是一个矩阵转置操作。维基百科上甚至还有一个[就地矩阵转置的问题和解决方案。](http://en.wikipedia.org/wiki/In-place_matrix_transposition)

没有多余的空间是不可能的，因为您至少需要遍历数组。`O(1)`额外的内存是可能的，但会严重影响时间复杂度。

该解决方案基于维基百科页面中的循环算法：对于每个单元格，我们将找到循环中索引最小的单元格。如果索引最小的单元格大于或等于（>=）当前单元格的索引，我们将执行链交换。否则，我们忽略该单元格，因为它已正确交换。时间复杂度的（粗略分析的）上限可以高达 O((MN) ² )（我们经过 M * N 个单元，并且周期只能与单元的总数一样长）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T09:49:04.087

# 不可能

如果不额外使用内存和任意长度，就不可能实现此算法，因为您需要一个迭代器来遍历列表并且占用空间。

# 寻找合适的索引进行交换

对于数组的固定长度和固定*n*，您可以使用矩阵转置算法。并且为了交换元素 y

您正在寻找的算法是矩阵转置算法。因此，您必须在迭代每个元素时准确地交换它。

[http://en.wikipedia.org/wiki/Transpose](http://en.wikipedia.org/wiki/Transpose)

基本上，您必须将第*n*个组件中的第*m 个元素与第 m*个*组件中的第**n*个元素交换。这可以通过双循环来完成。

 **```
m = length(array)/n;
for (i = 0; i < m; i++)
  for (j = 0; j < n;  j++)
  {
     index_1 = i * m + j;
     index_2 = j * m + i
     swap(index_1, index_2);
  } 
```

**注意**：对于固定的*m*和*n* ，这个循环可以完全展开，因此*m, i, j*可以用一个常数代替。

# 无内存消耗的交换

为了在不使用额外空间的情况下交换每个元素，您可以使用注释中指出的 XOR 交换算法：

```
X := X XOR Y
Y := Y XOR X
X := X XOR Y 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T09:19:59.017

在不使用临时变量的情况下交换两个数字（a 和 b）的最简单方法如下：

```
 b = b + a;
  a = b - a;
  b = b - a; 
```

如果你把它写在一个函数中，那么你就是其中的一部分。您如何在不使用临时变量的情况下跟踪要在数组中交换的变量，现在让我难以理解。

请记住选民：他实际上不需要对数组进行排序，只需交换正确的值。

**编辑：这将适用于 Java 中的大值（以及 C/C++ 中，除非您打开一些非常激进的编译器优化 - 行为未定义但[默认为 sane](http://www.gnu.org/software/autoconf/manual/autoconf-2.67/html_node/Signed-Overflow-Examples.html)）。这些值只会环绕。**

第二次编辑 - 一些（相当未经测试的）代码来翻转数组，我认为超过内存限制的 4 个整数。虽然从技术上讲它是非线程安全的，但它是可并行的，因为您最多只能访问每个数组位置一次：

```
static int[] a = {1,2,3,4,
                  5,6,7,8,
                  9,10,11,12,
                  13,14,15,16};

static int n = 4;

public static void main(String[] args) 
{
    for(int i = 0; i < a.length/n; i++)     //  1 integer
        for(int j = 0; j < n; j++)          //  1 integer
            if(j > i)
                swap(i*n+j, j*n+i);
}

static void swap(int aPos, int bPos)        //  2 integers
{
    if(a[aPos] != a[bPos])
    {
        a[bPos] = a[aPos] + a[bPos];
        a[aPos] = a[bPos] - a[aPos];
        a[bPos] = a[bPos] - a[aPos];
    }
} 
```

如果这误解了这个问题，我们深表歉意；我仔细阅读了它，无法弄清楚除此之外还需要什么。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-16T09:06:58.217

看一下[快速排序算法](http://en.wikipedia.org/wiki/Quicksort)

有关可用算法的更多信息，请转到[排序算法](http://en.wikipedia.org/wiki/Sorting_algorithm)页面。**