# StackOverflow 问答 11884000-11884999

# erd - 查看 .ERWIN 文件

> ID：11884001
> 
> 赞同：4
> 
> 时间：2012-08-09T12:58:29.763
> 
> 标签：erd, erwin

如果您的公司没有 ERWIN 许可证，如何打开/查看 .erwin 文件？

是否可以？

请求其他格式的文件不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:13:58.830

您可以尝试 ERwin 的[社区版软件](http://erwin.com/products/data-modeler/community-edition)，尽管正如评论指出的那样，25 个对象的限制将使复杂的模型无法查看。

# c# - 通过 RedirectToRoute 发送列表

> ID：11884003
> 
> 赞同：3
> 
> 时间：2012-08-09T12:58:38.223
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-routing

我正在使用具有模型视图控制器结构的 Razor 应用程序，我尝试编辑某些内容，然后使用重定向路由以返回到索引页面，但我也尝试将错误作为字符串列表传递。

我有这样的事情：

```
var errorMessages = new List<string>();
{...}
return RedirectToRoute("Default", new { controller = "Controller", action = "Action",  errorMessages = errorMessages }); 
```

这就是我的其他控制器方法的样子：

```
public ActionResult Action(List<string> errorMessages)
{
...
} 
```

问题是无论在我的第一个控制器中发生什么，在该`Action`方法中，我总是得到一个包含一个元素的集合，该元素的内容为`"System.Collections.Generic.List'1[System.String]"`. 而我期望收到实际的收藏。

任何想法为什么会发生这种情况？或如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:26:19.380

您需要`RouteValueDictionary`使用项目列表填充 。现在，您所做的只是设置`errorMessages`类型的名称`List<string>`。

为了解决这个问题，您需要`RouteValueDictionary`手动填充，确保您以默认模型绑定器期望的格式进行填充。这意味着，为了绑定到集合，您需要向它传递以下格式的项目列表：

```
errorMessages[0]
errorMessages[1]
...
errorMessages[n] 
```

要了解为什么这是必要的，请阅读 Phil Haack 的博客文章：[模型绑定到列表](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)。这是一个简单的示例，向您展示如何执行此操作：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var errorMessages = new List<string>() { "test", "test2" };

        RouteValueDictionary rvd = new RouteValueDictionary()
        {
            { "controller", "home" },
            { "action", "action" }
        };

        for (int i = 0; i < errorMessages.Count; i++)
            rvd["errorMessages[" + i + "]"] = errorMessages[i];

        return RedirectToRoute("Default", rvd);
    }

    public ActionResult Action(List<string> errorMessages)
    {
        // Do stuff

        return View();
    }
} 
```

`errorMessages`参数 for`Action`现在将包含和`test`的值`test2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:18:16.140

您可以使用`TempData`.

在行动方法中，您应该将消息保存到`TempData`

```
var errorMessages = new List<string>();
{...}
TempData["Errors"] = errorMessages;
return RedirectToRoute("Default", new { controller = "Controller", action = "Action" }); 
```

然后您可以在 Razor 视图页面或操作中获取它

```
@{
    var errorMessages = TempData["Errors"] as List<string>;
}

<ul>
@foreach(var errorMessage in errorMessages ){
    <li>@errorMessage</li>
}
</ul> 
```

在这里阅读[http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications)

# c# - 如何解决此错误调用谷歌位置地址服务“目标机器主动拒绝它”

> ID：11884007
> 
> 赞同：1
> 
> 时间：2012-08-09T12:58:48.520
> 
> 标签：c#, asp.net, xml, web-services, google-api

当试图调用谷歌位置来寻址服务时，它给了我这个消息：

> 无法建立连接，因为目标机器主动拒绝它 173.194.66.95:80

我将 ASP.net 4 与 C# 一起使用。
这是我的代码：

```
protected void btn_FindAddress_Click(object sender, EventArgs e)
{
    url = "http://maps.googleapis.com/maps/api/geocode/xml?latlng=";
    query = LatY.Text + "," + LongX.Text + "&sensor=true";

    Address.Text = url;
    Uri uri = new Uri (url + query);

    // Create a request for the URL. 
    WebRequest request = WebRequest.Create(uri);
    //// If required by the server, set the credentials.
    request.Credentials = CredentialCache.DefaultCredentials;
    // Get the response.
    WebResponse response = request.GetResponse();
    // Display the status.
    Status.Text = (((HttpWebResponse)response).StatusDescription);
    // Get the stream containing content returned by the server.
    Stream dataStream = response.GetResponseStream();
    // Open the stream using a StreamReader for easy access.
    StreamReader reader = new StreamReader(dataStream);
    // Read the content.
    string responseFromServer = reader.ReadToEnd();
    // Display the content.
    Address.Text = responseFromServer;
    // Clean up the streams and the response.
    reader.Close();
    response.Close(); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:10:39.810

最常见的是，可以建立出站连接（可以到达远程服务器*并*及时发送响应），但您尝试使用的端口被阻止（防火墙或代理是最有可能的两个选项我能想到）。

它也*可能*源于连接的另一端没有服务器这一事实：例如，如果您将端口 80 NAT 到没有 Web 服务器的系统，则可能会发生这种情况。由于您正在调用 Google 的 url，我怀疑情况是否如此，但我认为值得指出。

# c - C中char**的动态分配

> ID：11884008
> 
> 赞同：0
> 
> 时间：2012-08-09T12:58:51.410
> 
> 标签：c, dynamic-memory-allocation

我有一个日期类型定义为 typedef char* DateTime; 格式为“dd/mm/yyyy-hh:mm”，例如“08/08/2012-12:00”

我想分配n个“日期”字符串。以下有什么问题？

```
 DateTime*  dates = (DateTime* ) malloc(sizeof(char*) * n);  
for (int i = 0; i <= n; i++) {
    dates[i] =  malloc(sizeof(char)*16);
    if (dates[i] == NULL) {
        free(dates);

        return NULL;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T13:00:47.507

```
for (int i = 0; i <= n; i++) {
                   ^ 
```

在 C 中，数组从`0`所以`dates[n]`无法访问。放下`=`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T13:28:20.273

除了@Dan 和@cnicutar 的回复（两者都在现场），请注意字符串文字 "08/08/2012-12:00" 包含**17 个**字符（不是*16*）。虽然它的字符串长度为 16，但它包含您看到的 16 个字符加上末尾的 '\0' 字符作为终止符。此外， sizeof(char) 是定义之一。最后，使用 malloc 分配内存的惯用方法是 -

```
DateTime *dates = malloc(n * sizeof *dates); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T13:12:51.663

除了 cnicutar 的回答还有这个：

如果此条件为真：

```
if ( dates[i] == NULL ) 
```

你只是调用`free`整个数组，而不是释放数组中的元素`i`。这可能导致严重的内存泄漏

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T05:24:37.020

正如在评论中指出的那样，无论是我还是其他人，循环

```
for (int i = 0; i <= n; i++) { 
```

循环一次到多次。

另一个问题是这样的：

```
dates[i] =  malloc(sizeof(char)*16); 
```

实际的字符串是 16 个字符，但是由于 C 中的字符串需要一个额外的终止符 ( `'\0'`)，因此您需要多分配*一个字符*，这意味着您应该乘以 17。

正如 Dan F 所指出的，您还存在潜在的内存泄漏。

最大的两个问题是循环和分配，因为这会在覆盖未分配的内存时导致所谓的*未定义行为。*

# javascript - 甘特图不适用于 chrome

> ID：11884010
> 
> 赞同：0
> 
> 时间：2012-08-09T12:58:55.137
> 
> 标签：javascript, asp.net, asp.net-mvc, asp.net-mvc-3, xml-parsing

我正在开发一个 mvc .net 应用程序，并且正在使用 jsgantt 来显示甘特图。我使用 xml 文件从数据库中提取数据。问题是当我使用 Chrome 作为导航器时它不显示图表但是使用 Firefox 和 IE 它可以正常工作

下面是读取xml文件的代码（默认代码）

```
JSGantt.parseXML = function(ThisFile,pGanttVar){
    var is_chrome = navigator.userAgent.toLowerCase().indexOf('Chrome') > -1;   // Is this Chrome 

    try { //Internet Explorer  
        xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
        }
    catch(e) {
        try { //Firefox, Mozilla, Opera, Chrome etc. 
            if (is_chrome==false) {  xmlDoc=document.implementation.createDocument("","",null); }
        }
        catch(e) {
            alert(e.message);
            return;
        }
    }

    if (is_chrome==false) {     // can't use xmlDoc.load in chrome at the moment
        xmlDoc.async=false;
        xmlDoc.load(ThisFile);      // we can use  loadxml
        JSGantt.AddXMLTask(pGanttVar)
        xmlDoc=null;            // a little tidying
        Task = null;
    }
    else {
        JSGantt.ChromeLoadXML(ThisFile,pGanttVar);  
        ta=null;    // a little tidying 
    }
} 
```

有谁知道如何解决这个问题？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T06:26:53.073

```
var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;   // Is this Chrome 
    var is_safari = navigator.userAgent.toLowerCase().indexOf('safari') > -1;   // Is this safari 
    var is_mozila = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;   // Is this mozila 
    var is_Opera = navigator.userAgent.toLowerCase().indexOf('opera') > -1;   // Is this opera 

if(is_safari==true)
{var is_chrome= is_safari;}
else if(is_mozila==true)
{var is_chrome= is_mozila;}
else if(is_Opera==true)
{var is_chrome= is_Opera;}

try { //Internet Explorer   
        xmlDoc=new ActiveXObject("Microsoft.XMLDOM");

    }
catch(e)
  {
    try { 

        //Firefox, Mozilla, Opera, Chrome etc. 
        if (is_chrome==false) { xmlDoc=document.implementation.createDocument("","",null); }
        //if (is_safari==false) { xmlDoc=document.implementation.createDocument("","",null); }
    }
    catch(e) {
        alert(e.message);
        return;
    }       
}

if (is_chrome==false) {     // can't use xmlDoc.load in chrome at the moment
    xmlDoc.async=false;
    xmlDoc.load(ThisFile);      // we can use  loadxml
    JSGantt.AddXMLTask(pGanttVar);
    xmlDoc=null;            // a little tidying
    Task = null;
}
else {
    JSGantt.loadXML(ThisFile,pGanttVar; 
    ta=null;    // a little tidying 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T04:05:15.707

我会检查[jsGanttImproved](https://github.com/jsGanttImproved/jsgantt-improved)，它适用于 Chrome 和所有主要浏览器。此外，它不需要任何额外的库，而且是免费的。

# c++ - TabControl中的StaticText背景...应该处理哪些事件？

> ID：11884013
> 
> 赞同：0
> 
> 时间：2012-08-09T12:59:03.680
> 
> 标签：c++, user-interface, windows-7, tabcontrol, wtl

我正在重写旧应用程序以在 Windows 7 中获得*现代*外观。GUI 元素是通过显式代码创建和移动的（没有特殊的布局管理器）。由于一些历史原因，GUI 事件没有以标准方式处理。他们被重定向了。跟踪它们相当困难，尤其是当我不知道应该关注什么时。

这是应该抛光的窗户的例子。它不是一个对话框。它是经典的、相当大的窗户，位于顶部。但是，它应该模仿对话框的外观。窗口使用`WTL::CTabControlT<CControl>`where`CControl`是我基于 ATL::CWindow 的类——先看图片：

![带有 TabControls 的窗口](../Images/842d21ed3bfe58ece8983fc6b874fc53.png)

从图片中看不太清楚，但红色箭头的末端显示了静态文本的灰色背景。但是，选项卡本身的背景是白色的。

1.  什么事件导致静态文本的灰色背景？是不是`WM_CTLCOLORSTATIC`。或者，问题出在哪里？选项卡的背景是白色还是灰色（标准行为）？
2.  是否建议（由视觉界面的设计者、用户体验）让选项卡中的列表框也具有相同的（白色）背景？
3.  外部窗口已`COLOR_3DFACE`通过 ATL 宏定义`DECLARE_WND_CLASS_EX`。什么事件负责在选项卡窗口周围绘制免费？

谢谢你的帮助，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:07:26.600

通过显式处理消息解决了选项卡周围缺少的灰色背景`WM_ERASEBKGND`（重定向以某种方式阻止了默认处理）：

```
if (uMsg == WM_ERASEBKGND)
{
    WTL::CDCHandle dc(reinterpret_cast<HDC>(wParam));
    RECT rc;
    GetClientRect(&rc);
    dc.FillRect(&rc, GetWndClassInfo().m_wc.hbrBackground);
    return TRUE;
} 
```

`WM_CTLCOLORSTATIC`同样，通过在`ProcessWindowMessage`TabControl 窗口中以这种方式处理，白色选项卡上的静态文本的灰色背景变白：

```
else if (uMsg == WM_CTLCOLORSTATIC)
    return TRUE; 
```

# c# - IEnumerable 中一个属性的平均值的 IEnumerable > 其中 T 有两个属性

> ID：11884017
> 
> 赞同：3
> 
> 时间：2012-08-09T12:59:09.373
> 
> 标签：c#, .net-3.5

我有一个`IEnumerable<IEnumerable<CustomObject>>`s 其中`CustomObject`有一个`x`（用作键（在本例`1`中为 , `2`, `3`））和一个`y`值。一些假数据：

```
{
  { {1, 2}, {2, 4}, {3, 6}, {4, 8} }, 
  { {1, 2}, {2, 0}, {3, 0}, {4,-2} },
  { {1, 2}, {2, 2}, {3, 0}, {4, 0} }
} 
```

我可以检索以下内容的最佳方法是什么`IEnumerable<CustomObject>`：

`{ {1, 2}, {2, 2}, {3, 2}, {4, 2} }`

即`y`每个元素的平均值。

性能需要合理，所以不能`.ToList()`使用或类似。我一直在尝试使用 LINQ 进行各种尝试，但无济于事。

## 更新

@Bort，@Rawling，我已经测试了你的答案，@Rawling 的答案要快得多。但是，@Bort 的答案更具可读性，所以我想我现在会继续这样做。请随时保持答案！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:19:58.967

`SelectMany`使用 LINQ，您可以使用、`GroupBy`x 和`Select`平均值来展平列表列表：

```
var averages = customObjectLists
    .SelectMany(l => l)
    .GroupBy(co => co.x)
    .Select(g => new CustomObject { x => g.Key, y = g.Average(co => co.y) }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:17:16.240

像这样的东西应该会给你你正在寻找的结果。它将列表列表扁平化为单个`List<CustomObject>`，然后按值分组并对`X`值进行平均`Y`，从而为您留下具有和属性`IEnumerable`的匿名类型。您可以更改为 调用构造函数，您将得到一个.`X``Y``select new {} ...``CustomObject``IEnumerable<CustomObject>`

```
var myComplexObject = //your IEnumerable<IEnumerable<CustomObject>>
var result = from firstList in myComplexObject
        from secondList in firstList
        group secondList by secondList.X into grp
        select new {X = grp.Key, Y = (int)grp.Average(p=>p.Y)}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:35:31.420

如果您不介意固化*外部*枚举器，以下 LINQy 方法将推迟*内部*枚举器的执行。

```
IEnumerable<V> AggregateAcross<T, U, V>(
            IEnumerable<IEnumerable<T>> input,
            Func<T, U> select,
            Func<IEnumerable<U>, V> aggregate)
    {
        var enumerators = input.Select(ie => ie.GetEnumerator()).ToArray();
        while (enumerators.All(e => e.MoveNext()))
        {
            yield return aggregate(enumerators.Select(e => select(e.Current)));
        }
    } 
```

调用例如

```
foreach (var avg in AggregateAcross(
                     input,
                     pair => pair.y,
                     e => e.Average(y => y)))
{
    Console.WriteLine(avg);
} 
```

请注意，一旦内部枚举器之一用完元素，这就会停止。此外，当你完成后，它需要一些东西来处理所有的枚举器。看看[这个答案](https://stackoverflow.com/questions/3989319/zip-n-ienumerablets-together-iterate-over-them-simultaneously)以获得更多的想法。

（另请注意，这完全忽略了这些`x`值。由于您的所有输入都是有序的，并且您想要的输出也是有序的，因此这些`x`值不会添加任何内容。）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T13:14:05.423

我没有测试它，但我认为这应该工作。

```
public void Test() {
    IEnumerable<IEnumerable<CustomObject>> data = ...;
    var result = data
        .SelectMany(x => x)
        .GroupBy(
            item => item.x,
            (key, r) => new { x = key, data = r.Select(z => z.y) }
        )
        .Select(x => new CustomObject { x = x.x, y = (int)x.data.Average() })
        .ToList();
} 
```

# java - 业务层（JAVA）或数据库层（存储过程）中的大数据聚合好吗？

> ID：11884018
> 
> 赞同：1
> 
> 时间：2012-08-09T12:59:10.160
> 
> 标签：java, architecture, database-performance, n-tier-architecture

在我们的应用程序中，我们有非常大的数据。我们需要对各种条件进行聚合和计算（基于用户在 UI 中选择的内容）。

1）由于数据非常大，是否建议
在数据库（过程）中进行所有聚合（业务逻辑）？或者 2）如果从数据库中获取数据后在业务层中进行，是否会产生重大影响？因为所有数据都将转换为对象，然后完成聚合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:02:57.100

我怀疑您应该使用数据库来完成大部分工作，但是您可以使用由业务逻辑驱动的即席查询而不是存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:07:10.997

我假设您的应用程序/Web 服务器和您的数据库服务器是分开的。您将希望最大限度地减少需要通过网络传输的数据量。此外，数据聚合是数据库引擎非常擅长的事情，所以你应该让他们做他们擅长的事情。所以我建议你在你的数据库中进行聚合。

# c - C 文字常量：在头文件或 C 文件中？

> ID：11884019
> 
> 赞同：7
> 
> 时间：2012-08-09T12:59:15.600
> 
> 标签：c, header, constants

我想在单个静态 C 程序中包含一堆数据（例如，图像，还有其他数据，嵌入在可执行文件中，因为我在没有文件的嵌入式平台上工作）。

因此，我写了一个小 img2c 从我的数据文件创建 const 数据，创建一个带有静态 const 数组初始化器的文件以放入闪存（使用 C99 不错的功能）

我的问题是，我应该把它们放在一个 .h 文件中，就像我见过很多次一样 - 例如 gimp 可以保存为 .h 文件，而不是 .c 文件 - 或者放在一个 .c 文件中，在标头中仅引用const extern 声明以供进一步引用，而不必包含所有数据并将其全部传递给编译器，并在每次使用时重新声明它？

预处理器宏是不可能的，因为我会引用它们的地址，而不是每次都包含整个数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:09:18.490

如果您将数据放入标头中，则每个拉入该标头的编译单元都将获得自己的数据副本。想象一下两个 .c 文件，每个文件都转到一个 .o。每个 .o 都会有一个数据副本，并且您的最终可执行文件可能比它需要的更大。

如果你把它放在一个 .c 中并在一个头文件中 extern 它，只有一个 .o 将包含数据，你的最终可执行文件可以更小。此外，如果您更改内容，如果只是更改单个 .c 而不是包含您的标头的所有 .c 文件，则重新编译会更快。

正如您所指出的，您也可能会遇到链接器问题，因为符号将被多次定义，请参阅[Repeated Multiple Definition Errors 的答案，包括在多个 cpps 中包含相同的标头](https://stackoverflow.com/questions/223771/repeated-multiple-definition-errors-from-including-same-header-in-multiple-cpps)。将 extern 放在标头中并将数据放在 .c 中会更好

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T13:11:49.597

C 中的头文件没有什么特别之处。`.h`扩展不会改变编译器处理它们的方式。这更像是对人类的暗示“这个文件*可能*不包含任何代码”。

因此，如果您将实际的二进制数据放入其中，编译器将在包含标头的每个文件中创建数组的副本（而不是简单地添加对共享全局数组的引用）。

GIMP 会创建一个头文件，因为它不知道您打算如何使用这些数据。这个想法是，您将在一个文件中只包含这个头文件一次`.c`，然后以某种方式处理数据。如果它编写了一个`.c`文件并且您对代码进行了更改，那么当您要求 GIMP 更新数据时，它必须合并这些更改——这会很混乱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T13:09:26.553

与 C 中的所有内容一样，这里对于最佳实践存在一些争论。*常见*的做法是将实际值放在您的实现 (.c) 中，将声明 ( `extern something something`) 放在头文件 (.h) 中。这样，您可以更新这些值，而无需重新编译包含标头的每个文件。

答案几乎从不“每次使用时都重新声明”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T13:10:59.350

这可以通过确保仅在单个源文件中定义变量来完成。为此，需要一点预处理器“编程”。

头文件：

```
/* Standard include guard */
#ifndef X_H
#define X_H

#ifdef X_SOURCE
uint8_t data[] = { /* ... */ };
#else
extern uint8_t data[];
#endif

#endif  /* End of include guard */ 
```

源文件：

```
#define X_SOURCE
#include "x.h"

/* ... */ 
```

所有其他源文件只需要包含该文件`"x.h"`，它们就可以引用`data`.

# c++ - C++：为什么这个窗口标题会被截断？

> ID：11884021
> 
> 赞同：18
> 
> 时间：2012-08-09T12:59:26.413
> 
> 标签：c++, winapi

Visual C++ 2012 RC, Win7

简体中文

项目属性 > 使用多字节字符集

当我运行这个程序时，窗口的标题显示一个字母“S”，而不是整个单词“Sample”。

```
#pragma comment(linker, "/SubSystem:Windows")

#include <windows.h>

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE, PSTR, int) {
    WNDCLASSW wc = { 0 };

    wc.style            = CS_VREDRAW | CS_HREDRAW;
    wc.hInstance        = hInstance;
    wc.hIcon            = LoadIcon(nullptr, IDI_APPLICATION);
    wc.hCursor          = LoadCursor(nullptr, IDC_ARROW);
    wc.hbrBackground    = reinterpret_cast<HBRUSH>(GetStockObject(WHITE_BRUSH));
    wc.lpszClassName    = L"MyWindowClass";

    wc.lpfnWndProc = [](HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam) {
        if (uMsg - WM_DESTROY)
            return DefWindowProc(hWnd, uMsg, wParam, lParam);
        else {
            PostQuitMessage(0);
            return HRESULT();
        }
    };

    RegisterClassW(&wc);

    CreateWindowExW(0, L"MyWindowClass", L"Sample",
        WS_OVERLAPPEDWINDOW | WS_VISIBLE, CW_USEDEFAULT, SW_SHOW, CW_USEDEFAULT, 0,
        nullptr, nullptr, hInstance, nullptr);

    for (MSG msg; GetMessage(&msg, nullptr, 0, 0); DispatchMessage(&msg));
} 
```

如果我使用 Unicode（项目属性），保持源代码不变，窗口标题显示“示例”，看起来是正确的。

如果我使用多字节，在源代码中我使用 WNDCLASS = { ..., "MyWindowClass" } 和 RegisterClassA，保持 CreateWindowExW 不变，窗口标题显示单词“Sample”，看起来正确。

如果我使用多字节，在源代码中我使用 CreateWindowExA("MyWindowClass", "Sample")，保持 WNDCLASSW 和 RegisterClassW 不变，窗口标题显示字母“S”。

是什么让它显示一个“S”，我做错了什么吗？

**附加**

如果我保持所有不变，即使用多字节，使用上面显示的代码，窗口标题显示字母“S”。

（如果您运行此程序并在窗口标题上看到“Sample”，而不是“S”，那么它更可能是 vc++ 2012（或 OS）的 chs 版本的特定问题）。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-09T13:16:56.223

您的代码中的问题是您使用`DefWindowProc`的是`DefWindowProcW`. 更改它将修复代码。

理想情况下，您应该将项目设置更改为使用 Unicode，而不是多字节字符集。这将简化一切，您可以使用宏，而不是像您一样`CreateWindowEx`显`RegisterClassEx`式使用 Unicode / ANSI 版本。

正如其他人所说，这是字符集之间的不匹配。

理想情况下，您应该在所有相互交互的 API 调用之间匹配字符集。所以如果你使用`CreateWindowExW`你也应该使用`RegisterClassExW`, `DefWindowProcW`, `DispatchMessageW`...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T14:20:42.550

这个很不错，学到了新东西！

你需要改变

```
return DefWindowProc(hWnd, uMsg, wParam, lParam); 
```

到

```
if(IsWindowUnicode(hWnd))  
  return DefWindowProcW(hWnd, uMsg, wParam, lParam);  
else  
  return DefWindowProcA(hWnd, uMsg, wParam, lParam); 
```

甚至更好：坚持一种字符编码。充其量只是使用`RegisterClass`,`CreateWindowEx`等等，让编译器采用正确的 Unicode 或 ANSI 函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T13:06:05.140

CreateWindowExA 将字符串解释为 8 位字符。L"Sample" 的后 8 位为零，因为它的第一个字符是 0x0053 - L 表示使用宽字符。因此，该函数将其解释为 1 个字符的以空字符结尾的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T13:41:40.543

我认为[msdn 页面`RegisterClass`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633586%28v=vs.85%29.aspx)提示了此处失败的原因，在备注部分它提到如果您使用宽字符或 ansi 支持，那么它将以这种格式传递内部文本参数/消息（宽字符/ansi ）。很可能这就是窗口标题所发生的事情，即使我们说的是 use `CreateWindowExA`，这在内部不起作用，因为 Windows SDK 已将该字符串编码为宽字符串，并且`CreateWinowExA`尝试将其输出为 Ansi 字符串.

简而言之，除非您有充分的理由这样做，否则不要混合 W 和 A 方法，如果您想要宽字符支持定义您的 UNICODE 宏，请让 windows 标题为您处理它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T13:06:03.993

在您的最后一种情况下，您的 L"Sample" 仍然是 Unicode，不是吗？您可以使用 _T() 宏，它会根据项目的 Unuicode 设置自动添加或删除 L 前缀。

正如@Pete 已经说过的那样，Unicode L"Sample" 在 ascii 中是 "S\0..."，这就是为什么只打印一个符号的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T05:26:33.893

我很高兴我找到了这个。我一直在寻找答案，似乎很难用 Google 等正确找到。我确实发现针对特定程序报告的类似问题，总是归咎于“某些插件”。

这令人抓狂，因为 WndProc 的问题与调用 CreateWindowEx 或 RegisterClassEx 相去甚远！

顺便说一句，我明确使用 -W 后缀，因为我想制作一个适用于任何一种方式构建的程序的 DLL，或者克服我正在添加的程序的非 Unicode 设置。

# android - 无法按标签找到片段

> ID：11884025
> 
> 赞同：15
> 
> 时间：2012-08-09T12:59:41.423
> 
> 标签：android, android-fragments

我正在使用支持包 v4。

```
mFragmentManager = getSupportFragmentManager();

FragmentTransaction ft = mFragmentManager.beginTransaction();
ft.add(R.id.fragContainer1, new ModelListFragment(), FRAG_MODEL_LIST);
ft.add(R.id.fragContainer2, new TrimListFragment(), FRAG_TRIM_LIST);
ft.commit();

Fragment fragment = mFragmentManager.findFragmentByTag(
            MainActivity.FRAG_MODEL_LIST);
Log.d("MY", "found fragment: " + (fragment != null)); 
```

总是返回“找到的片段：假”。我在这里遗漏了一些非常明显的东西，它是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T13:06:36.673

正如您在[文档](http://developer.android.com/reference/android/app/FragmentTransaction.html#commit%28%29)中看到的：

> 提交不会立即发生；它将被安排在主线程上的工作，以便在该线程下一次准备好时完成。

这就是为什么在 commit() 之后看不到片段的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T10:25:33.610

我同意[Roosmaa](https://stackoverflow.com/users/188083/roosmaa)的观点， [`executePendingTransactions`](http://developer.android.com/reference/android/app/FragmentManager.html#executePendingTransactions%28%29)经过`commit()`完全正常的工作。

# jquery - 将表格中的第 th 个元素垂直居中

> ID：11884031
> 
> 赞同：0
> 
> 时间：2012-08-09T12:59:53.527
> 
> 标签：jquery, html, css

我在表格中有一个文本“2012 年”，我想将它垂直居中放置。文字旁边有一个collapseIcon。

[演示](http://jsfiddle.net/zhshqzyc/3pajE/6/)。

我的问题：

1）我们可以准确地将它定位在中心吗？请不要使用 padding-top，我怀疑它不准确，因为我们不知道单元格的高度。

2) 有点跑题了，表中没有tbody元素，代码为什么

```
 $('table.collapsible tbody').each(function() { 
```

还在工作吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:05:38.893

这可以通过 CSS 属性 valign:middle 来完成

如果你想用 JQuery 来做，你可以这样做

```
$('table.collapsible tbody tr td').each(function() {
    $(this).css('valigh','middle');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:08:09.657

添加`line-height: 60px`到`.tabletitle`. 是 60px 高，`<img>`文本将显示在 line-height 60px 中间。

[小提琴](http://jsfiddle.net/3pajE/7/ "小提琴")

# macos - MacOS X 上的 GNU Make 模式规则

> ID：11884033
> 
> 赞同：1
> 
> 时间：2012-08-09T12:59:56.760
> 
> 标签：macos, build, makefile, gnu, gnu-make

我正在为 OS X Lion 上的 makefile 苦苦挣扎。我正在尝试使用 % 模式规则将我的所有 .c 文件编译为当前目录中的对象。我正在使用规则：

```
%.o : %.c                                                                      
    $(CC) -c $(CFLAGS) $< -o $@ 
```

但是make说没有目标。我知道 % 模式是 gMake 的功能，但是 -v 说我已经安装了 GNU make。我也尝试过旧式：

```
 .cpp.o:
        gcc $^ -o $@ 
```

但它是不工作的。我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:00:02.940

如果那是您的整个 Makefile，那么它确实不包含任何目标。调用它`make file.o`或添加一个虚假目标`all`，其中列出了您要构建的文件的名称。它可能很简单

```
.PHONY: all
all: $(patsubst %.cpp,%.o,$(wildcard *.cpp)) 
```

你所拥有的是模式规则，它指定“如果你想构建一个类型的目标`*.o`，这里是如何做到这一点”，但没有指定“这是我们想要构建的文件”的实际目标。

顺便说一句，GNU Make 已经知道如何编译 C 文件，因此您实际上不需要定义它，除非您有特定需要覆盖内置模式规则。

# java - 如何将 JFrame 放入 FullScreen 并自动重新缩放内容

> ID：11884035
> 
> 赞同：4
> 
> 时间：2012-08-09T13:00:07.673
> 
> 标签：java, swing, awt, fullscreen

我想要全屏并保持里面的一切井井有条。

我应该如何将 JFrame 放入全屏***并***重新缩放里面的所有内容：图像、生成的图纸等（比如放大它以使内容适合屏幕）。

问题是我正在制作全屏应用程序，但我不知道它将在哪个屏幕上显示。

这将使框架进入全屏状态，但内容不会重新缩放

```
 frame.dispose();
   frame.setUndecorated(true);
   frame.setLocation(0, 0);
   frame.setSize(java.awt.Toolkit.getDefaultToolkit().getScreenSize());
   frame.setVisible(true);
   frame.repaint(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:14:08.107

取决于你想要扩展的是什么。

*   如果您使用 Java2D 绘制它的图形，只需弄清楚需要放大多少东西并使用 Graphics2D.scale() 适当地缩放 gfx。

*   如果它带有 Swing 布局，请使用布局管理器来制作自适应布局。

*   如果是其他问题，请详细说明您的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T20:40:42.550

如果这确实是您想要做的（请参阅其他答案的警告），那么做起来并不难（但需要一点时间才能弄清楚）。基本上，它涉及扩展`JPanel`，然后覆盖该`paint`方法。

这是我想出的一个示例：

```
import java.awt.*;
import java.awt.image.BufferedImage;    
import javax.swing.*;

public class CustomPanel extends JPanel{ 

    Component myComponent;

    public CustomPanel(){
        super();
        setLayout(null);
    }

    /**
     * Only allows one component to be added
     */
    @Override
    public Component add(Component c){
        super.add(c);
        c.setLocation(0, 0);
        c.setSize(c.getPreferredSize());
        myComponent = c;
        return c;
    }

    @Override
    public void paint(final Graphics g){

        Dimension d = this.getSize();               
        Dimension p = myComponent.getPreferredSize();

        // Paints the child component to a image
        BufferedImage newImg = new BufferedImage(p.width, p.height, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = newImg.createGraphics();
        super.paint(g2d);

        // Resizes the image if necessary
        Image img;
        if(d.height > p.height && d.width > p.width){
            System.out.println("Scaled");

            float changePercentage = 0;
            if(d.height/p.height > d.width/p.width){
                changePercentage = (float)d.width/(float)p.width;
            } else{
                changePercentage = (float)d.height/(float)p.height;
            }
            System.out.println(changePercentage);

            int newHeight = ((Float)(p.height * changePercentage)).intValue();
            int newWidth = ((Float)(p.width * changePercentage)).intValue();

            img = newImg.getScaledInstance(newWidth, newHeight, 0);             
        } else{
            System.out.println("Not Scaled");
            img = newImg;
        }

        // Paints the image of the child component to the screen.
        g.drawImage(img, 0, 0, null);
    }

    public static void main(String[] args) { 
        // TODO Auto-generated method stub 
        SwingUtilities.invokeLater(new Runnable(){public void run(){

            JFrame frame = new JFrame("Zoom Panel"); 
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
            frame.setSize(300, 200); 

            CustomPanel buffer = new CustomPanel();
            JPanel content = new JPanel();
            content.add(new JLabel("Bogus"));
            content.setBackground(Color.red);
            buffer.add(content);
            frame.setContentPane(buffer);

            frame.setVisible(true); 
            new CustomPanel();

        }}); 
    } 

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:50:31.933

几天前，我刚刚使用了一个 java 全屏应用程序。看看下面的链接。如果这是您的要求，我可以在一定程度上帮助您。

[https://docs.google.com/open?id=0B9U-BwYu62ZaeDM3SWZhaTdSYzQ](https://docs.google.com/open?id=0B9U-BwYu62ZaeDM3SWZhaTdSYzQ)

# javascript - 使用 javascript/prototype/script.acuo.us 在另一个 div 之前插入一个 div

> ID：11884036
> 
> 赞同：0
> 
> 时间：2012-08-09T13:00:09.347
> 
> 标签：javascript, ajax, prototypejs, scriptaculous

我有一个功能，可以将产品添加到购物篮，然后在页面主要内容区域的顶部显示成功消息。我已经对 onsuccess 函数进行了 ajax 调用。但是，我无法将成功消息插入到页面上的 id 为 breadcrumbBar 的 div 之前。这是我的 onSuccess 函数：

```
 onSuccess: function(transport) {

    if(transport.responseText == "oos") {

        alert("We're sorry, this product is out of stock. If the product has different options, why not try a diffrent combination?");

    }
    else
    {

        container.update(button);

        successMessage = document.createElement('div');
        successMessage.id = "basketAddSuccess";
        successMessage.insert('<p>Test</p>');
        alert($('breadcrumbBar'));
        document.body.insertBefore(successMessage, $('breadcrumbBar'));

    }

} 
```

这是为我的内容开始生成 html 的 php：

```
<div id="content" style="overflow: visible;">
    <section role="main">
        <div class="breadcrumbs floatLeft" id="breadcrumbBar">
            <p class="floatLeft"><a href="/products/category/<?php echo $product->parent_cat_url."/".$product->cat_url."/1"; ?>" target="_self"><?php echo $product->cat_name; ?></a>&nbsp;&gt;&nbsp;<span class="green" style="font-weight: bold;"><?php echo $product->prod_title; ?></span></p>
            <?php genSaleIcon($product->sale); ?>
        </div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:02:06.367

`insertBefore`必须在父节点上执行，在您的情况下，在“主”部分。

```
$('breadcrumbBar').parentNode.insertBefore(successMessage, $('breadcrumbBar')) 
```

# jquery - 同时播放背景音乐和音效

> ID：11884039
> 
> 赞同：2
> 
> 时间：2012-08-09T13:00:28.193
> 
> 标签：jquery, xcode, ipad, html

我有一个需要播放背景音乐的游戏，当我单击一个按钮时它应该播放声音。它播放声音但停止音乐。

重新打开音乐的唯一方法是进行另一个事件，例如单击按钮。有没有办法在背景音乐继续播放的同时播放声音？

到目前为止，这是我的代码。

```
var a = new Audio("Latin Groove Hype App.mp3");

function init()
{  
    playBackGroundLoop();

}// in html(<body onload = "init()">)

function playSoundEffect()
{
    var playSoundCorrect = new Audio("Correct synth.mp3");
    playSoundCorrect.play();
}

function playBackGroundLoop()
{
    a.addEventListener('ended', function() 
                   {
                       this.currentTime = 0;
                       this.play();//plays music on loop
                   }, true);
    a.play();
}

$(function()
  {
  $("#playButton").on("click",function()
                {
                 playSoundEffect();
                }
  }); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:32:55.417

花点时间传递我的脚本以适应您的项目：

**HTML：**

```
<ul id=nav>
    <li><a href="javascript:;">Item 1</a></li>
    <li><a href="javascript:;">Item 2</a></li>
</ul>

<audio id="audio-nav">
    <source src="click.mp3"></source>
    <source src="click.ogg"></source>
    Your browser isn't invited for super fun audio time.
</audio>
<audio id="audio-bg">
    <source src="bg.mp3"></source>
    <source src="bg.ogg"></source>
    Your browser isn't invited for super fun audio time.
</audio>

<a id="toggle" href="javascript:;">PLAY/PAUSE</a> 
```

**JS：**

```
var bgMusic = $('#audio-bg')[0],
    navMusic = $('#audio-nav')[0],
    playing = true;

bgMusic.addEventListener('ended', function() {
    this.currentTime = 0;
    if (playing) {
        this.play();
    }
}, false);

bgMusic.play();

$('#toggle').click(function() {
    if (!bgMusic.paused) {
        bgMusic.pause();
        playing = false;
    } else {
        bgMusic.play();
        playing = true;
    }
});

$('#nav a').click(function() {
    navMusic.play();
});​ 
```

...在这里，一个[功能齐全的演示](http://jsfiddle.net/ARTsinn/HnMe9/)

# iphone - 从 ZXing QR 阅读器项目创建单个 iOS 框架文件

> ID：11884045
> 
> 赞同：0
> 
> 时间：2012-08-09T13:00:46.367
> 
> 标签：iphone, ios, xcode, qr-code

我一直在寻找 2 天，试图找到一种方法来为 ZXing QR 阅读器获取单个 iOS 框架文件。我唯一能找到的是一个 ZXingWidget 项目，可以包含在我自己的项目中。但是在这里，我必须添加路径、依赖项等才能使其正常工作。

有没有一种方法可以创建一个可以轻松添加到任何需要此功能的新项目的单个 .framework 文件？

我找到了一个 kstenerud iOS 框架模板来创建框架，但我无法使其与 ZXing 项目一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:54:12.300

不，iOS 没有很好的解决方案。

框架通常（总是？）动态链接库，Apple 不允许在 iOS 上使用 DLL。请注意，[现在有适用于 OS X 的框架构建](https://groups.google.com/d/topic/zxing/3_9RVmR7xIw/discussion)。

有可能破解 Xcode 以生成带有静态链接库的框架，但这与 Apple 的模式背道而驰，这意味着我怀疑它会将 Xcode 推入极端情况，这些情况以微妙且难以调试的方式失败，并且很有可能突破 Xcode 版本。

这一观点部分来自于与 WWDC 上的 Apple Xcode 工程师讨论清理 ZXing 项目文件的问题。现在有新的项目文件遵循他们推荐的所有最佳实践，但在 iOS 上，它们仍然需要旧项目文件所需的相同包含路径和库链接项目自定义。

# asp.net-mvc-3 - 仅适用于新对象 ASP.NET MVC 所需的 ModelValidation

> ID：11884048
> 
> 赞同：0
> 
> 时间：2012-08-09T13:00:58.083
> 
> 标签：asp.net-mvc-3, modelstate, model-validation

我从昨天开始就有这个问题。在我的用户模型中，我有一个名为“ **ConfirmPassword ”的****[NotMapped]**。我没有将它保存在数据库中，但我总是在我的 Create 表单中使用它来验证新用户的数据输入。

 **从那以后，没关系。问题出在我的 [HttpPost] 编辑操作上。我应该能够在没有输入的情况下编辑一些用户的数据并确认密码。如果我想更改密码，我同时使用 Password 和 ConfirmPassword 作为确认旧密码并通知新密码的一种方式。但是，如果我不这样做，我会将它们留空。

我已经使用下面的代码来传递 ModelState.IsValid() 条件并且它起作用了：

```
ModelState["Password"].Errors.Clear();
ModelState["ConfirmPassword"].Errors.Clear(); 
```

但是，就在 db.SaveChanges() 之前，考虑到 User 用户视图模型，它的两个属性都是空的，我得到了：

```
Property: ConfirmPassword Error: The field ConfirmPassword is invalid. 
```

问题是：当我想更新对象时，如何跳过所需的模型验证？

我已经阅读了自定义 ModelValidations 以及扩展**ValidationAttribute**和 **DataAnnotationsModelValidator**的类，但我做得不对。

任何的想法？我如何创建一个自定义模型验证来检查 UserId 属性是否为空。这是检查我是否处于创建或编辑操作的好方法。

谢谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:18:30.993

使用域对象作为您的 ViewModel 将导致您的可伸缩性降低。我会选择特定于视图的单独视图模型。当我必须保存数据时，我将 ViewModel 映射到域模型并保存。在您的具体情况下，我将创建 2 个 ViewModel

```
public class CustomerViewModel
{
  public string FirstName { set;get;}
  public string LastName { set;get;}
} 
```

我将拥有另一个`ViewModel`继承**自**上述类的`Create`视图

```
public class CustomerCreateViewModel :CustomerViewModel
{
   [Required]
   public string Password { set;get;}

   [Required]
   public string ConfirmPassword { set;get;}
} 
```

现在在我的 Get 操作中，我使用了这个 ViewModel

```
public ActionResult Create()
{
  var vm=new CustomerCreateViewModel();
  return View(vm);
} 
```

当然我的 View( `create.cshtml`) 现在绑定到这个 ViewModel

```
@model CustomerCreateViewModel
<h2>Create Csustomer</h2/>
//Other form stuff 
```

同样对于我的`Edit`行动，

```
public ActionResult Edit(int id)
{
  var vm=new CustomerViewModel();
  var domainCustomer=repo.GetCustomerFromID(id);
  if(domainCustomer!=null)
  {
      //This manual mapping can be replaced by AutoMapper.
      vm.FirstName=domainCustomer.FirstName;
      vm.LastName=domainCustomer.LastName;
  }
  return View(vm);
} 
```

此视图绑定到 CustomerViewModel

```
@model CustomerViewModel
<h2>Edit Info of @Model.FirstName</h2>
//Other form stuff 
```

在您的`POST`操作中，将其映射回域对象并保存

```
[HttpPost]
public ActionResult Create(CustomerCreateViewModel model)
{
  if(ModelState.IsValid)
  {
      var domainCust=new Customer();
      domainCust.FirstName=model.FirstName;
      repo.InsertCustomer(domainCust);
      //Redirect if success (to follow PRG pattern)
  }
  return View(model);
} 
```

您可以考虑使用 AutoMapper 库来为您完成，而不是自己编写映射。**

# html - Chrome 未捕获语法错误：意外令牌非法

> ID：11884049
> 
> 赞同：1
> 
> 时间：2012-08-09T13:00:59.460
> 
> 标签：html, extjs, sencha-touch, aptana, sencha-touch-2

我不断收到此错误：Uncaught Syntax Error: Unexpected Token ILLEGAL while running Ext JS 4，我在 Aptana studio 3 上使用 Sencha Touch 2。

这是我的代码：

Ext.application({ name: 'Sencha', launch: function () {

```
 Ext.create('Ext.tab.Panel', {
            fullscreen: true,
            tabBarPosition: 'bottom',
            defaults: {
                styleHtmlContent: true
            },

            items: [
                {
                    title: 'Home Page',
                    iconCls: 'home',
                    html: [
                        '<img width="30%" src="http://staging.sencha.com/img/sencha.png" />',
                        '<h1>Welcome to Sencha Touch</h1>',
                        "<p>you're creating the Getting Started app. This demonstrates how ",
                        "to use tabs, lists and forms to create a simple app</p>",
                        '<h2>Sencha Touch 2 </h2>
                    ].join("")
                }
            ]

        });

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:11:20.773

失踪 '

`'<h2>Sencha Touch 2 </h2>'`

# windows - 从 Jenkins 发送电子邮件通知

> ID：11884050
> 
> 赞同：20
> 
> 时间：2012-08-09T13:01:00.557
> 
> 标签：windows, jenkins

我想在任何工作完成时发送电子邮件通知。请让我知道我们如何传播。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T05:46:12.053

您可以将 Jenkins 配置为在作业完成时发送电子邮件，无论是否使用插件。

# 内置

首先，您必须通过单击`Manage Jenkins > Configure System`并找到`E-mail Notification`页面底部附近的部分来配置您的邮件服务器设置。`System Admin e-mail address`还可以选择在该`Jenkins Location`部分中进行配置。

然后对每个作业进行配置`Add post-build action`，并根据需要进行选择`E-mail Notification`和配置。

# 插入

默认 jenkins 电子邮件机制的问题在于它的自定义非常有限。

另一种方法是使用[Email-Ext 插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)，这是一种强大的电子邮件通知机制。您可以定义一些全局触发器，但也可以自定义每个作业的设置。支持发送成功、失败或任何其他构建状态的电子邮件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-20T09:35:57.420

1.  转到：管理詹金斯->管理插件->“可用”选项卡->选择“电子邮件扩展插件”->单击按钮“无需重启即可安装”

2.  管理 jenkins --> 配置系统 --> 在“电子邮件通知”中输入详细信息

填写以下详细信息并保存：

[![在此处输入图像描述](../Images/870a26a49f3bbc7540c0314651e1608b.png)](https://i.stack.imgur.com/Kv7Tx.png)

3.  在项目/工作的配置中，勾选“电子邮件通知”--->输入详细信息--->保存--->构建工作/项目

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-09T20:34:18.723

有一个[Jenkins email-ext](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)插件可以添加触发器和收件人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-18T04:35:10.453

此答案适用于通过 Jenkins 使用 python 脚本和 Outlook 发送邮件。

为此，您需要拥有 PsExec.exe。这将远程运行应用程序。

创建一个自由式项目并在其中运行以下 dos shell 命令：

path\to\psexec.exe -u 用户名 -p 密码 -i 1 cmd -accepteula /c python path\to\SendMail.py

用户名和密码用于运行 Outlook 的 Windows 用户帐户。path\to\SendMail.py 是 python 脚本的位置。SendMail.py 看起来像这样：

```
import win32com.client as win32
outlook=win32.Dispatch('outlook.application')
mail=outlook.CreateItem(0)
mail.To='abc@xyz.com'
mail.Subject="Test Mail"
mail.HTMLBody="Hiii, This is just a test mail."
mail.Send() 
```

这里我使用wind32com 来执行outlook。邮件将使用登录到 Outlook 的默认帐户发送。

每次作业完成后，您都可以触发构建此项目。

希望这对任何人都有帮助:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-11T09:31:52.837

以上所有答案都是关于插件及其用法，而不是如何在管道执行中使用它。假设 jenkins 中配置了 smtp 服务器，并且安装了[https://plugins.jenkins.io/email-ext/](https://plugins.jenkins.io/email-ext/)插件，我们可以编写或使用如下格式的插件 ij。

```
def csproj_path = 'dotnetcore_sample.csproj'

pipeline {
    agent{
        node {
            label 'dotnet-31' 
        }
    }

    stages {
        stage ('build locally'){
            steps{
                sh "dotnet build ${csproj_path}"
            }
        }
         stage ('Prompt check'){
            steps {
            mail to: 'bruce.wayne@gmail.com',
                 cc : 'clark.kent@gamil.com'
                subject: "INPUT: Build ${env.JOB_NAME}", 
                body: "Awaiting for your input ${env.JOB_NAME} build no: ${env.BUILD_NUMBER} .Click below to promote to production\n${env.JENKINS_URL}job/${env.JOB_NAME}\n\nView the log at:\n ${env.BUILD_URL}\n\nBlue Ocean:\n${env.RUN_DISPLAY_URL}"
                timeout(time: 60, unit: 'MINUTES'){
                    input message: "Promote to Production?", ok: "Promote"
                }
            }
        }

    }

    post {
        failure {
              mail to: 'mymail@gmail.com',
                 cc : 'ccedpeople@gamil.com'
                subject: "FAILED: Build ${env.JOB_NAME}", 
                body: "Build failed ${env.JOB_NAME} build no: ${env.BUILD_NUMBER}.\n\nView the log at:\n ${env.BUILD_URL}\n\nBlue Ocean:\n${env.RUN_DISPLAY_URL}"
        }

    success{
            mail to: 'mymail@gmail.com',
                 cc : 'ccedpeople@gamil.com'
                subject: "SUCCESSFUL: Build ${env.JOB_NAME}", 
                body: "Build Successful ${env.JOB_NAME} build no: ${env.BUILD_NUMBER}\n\nView the log at:\n ${env.BUILD_URL}\n\nBlue Ocean:\n${env.RUN_DISPLAY_URL}"
        }

        aborted{
            mail to: 'mymail@gmail.com',
                 cc : 'ccedpeople@gamil.com'
                subject: "ABORTED: Build ${env.JOB_NAME}", 
                body: "Build was aborted ${env.JOB_NAME} build no: ${env.BUILD_NUMBER}\n\nView the log at:\n ${env.BUILD_URL}\n\nBlue Ocean:\n${env.RUN_DISPLAY_URL}"
        }
    }
} 
```

上述声明性管道包含以下功能

1.  为相应的用户发送电子邮件以将构建提升到下一个级别。
2.  构建成功时发送电子邮件。
3.  构建失败以及通过日志链接中止时发送电子邮件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-21T09:55:01.627

1.  启动詹金斯。
2.  从主页访问管理 Jenkins 链接。

3.  转到页面末尾并填写电子邮件通知详细信息： [![在此处输入图像描述](../Images/a3982898d98a9edece8627eeab684da5.png)](https://i.stack.imgur.com/HGnLB.png)

4.  单击测试通知以验证它正在发送电子邮件。

5.  请参阅 Jenkins 发送的电子邮件。 [![在此处输入图像描述](../Images/0f8476db134920072b2cad9890da0c81.png)](https://i.stack.imgur.com/Hm01f.png)

[![在此处输入图像描述](../Images/2f6c7acca421862c216b7ed04d9ee71f.png)](https://i.stack.imgur.com/Z4uS1.png)

# wordpress - 自定义页面类型和 slug 的相同字符串

> ID：11884052
> 
> 赞同：0
> 
> 时间：2012-08-09T13:01:06.443
> 
> 标签：wordpress, wordpress-theming

我有一个自定义帖子类型`team`和一个标题为“团队”的页面，其 slug 也是`team`.

团队页面分配给`page-team.php`（模板名称“团队”）。`team`自定义帖子类型使用`single-team.php`模板文件。当我的浏览器指向它时，`/team`它使用`index.php`模板而不是我想要的页面（团队页面文件）。

我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:42:30.777

来自[Wordpress Codex：帖子类型部分 URL](http://codex.wordpress.org/Post_Types)：

> 新的帖子类型还将获得自己的网站布局特殊部分。在上面的示例中，这种新的“产品”类型的帖子可以显示在[http://example.com/product/%product_name%](http://example.com/product/%product_name%)（其中 %product_name% 是您的产品的 URL 化名称，即[http:// example.com/product/foobrozinator](http://example.com/product/foobrozinator)。）您可以看到此链接出现在您的新类型的编辑页面中，就像其他帖子一样。

这表示：

1.  您的自定义类型**团队**页面都可以在[http://example.com/team/%slug%](http://example.com/team/%slug%)下访问。
2.  由于您的 slug 是**团队**，因此 url 是[http://example.com/team/team](http://example.com/team/team)。

说得通。关于自定义帖子类型的 Codex 页面值得一读。

**编辑**：如果您不满意`/team/team`，请尝试[自定义帖子类型永久链接](http://wordpress.org/extend/plugins/custom-post-type-permalinks/)插件。

# syntax - if 语句后跟一个循环

> ID：11884053
> 
> 赞同：-3
> 
> 时间：2012-08-09T13:01:08.690
> 
> 标签：syntax, scope, pseudocode

if 语句具有特定条件，然后我在 if 语句中使用带有另一个条件的 while 循环，是否会在每次迭代中测试 if 语句中的条件？

```
LIST-SEARCH'(L,k)
x=L.nil.next
if x!=L.nil
   while x.key!=k
         x=x.next
return x 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T13:04:31.887

如果你描述的是这样的：

```
if(conditionA)
{
     while(conditionB)
     {
          /* ... */
     }
} 
```

那就不要。`conditionA`只测试一次，while`conditionB`被测试以检查是否应该为每个循环运行再次执行循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:48:50.880

无需询问即可了解这些事情的方法是通过调试器运行程序并逐步执行每一行。您应该注意到 if-test 行只被命中一次，而 while() 循环中的测试在每次迭代时都会被命中。大多数 IDE 都包含具有此功能的调试器，或者您可以使用 gdb 等命令行实用程序。

# database - MS Access 中的多会话变量

> ID：11884056
> 
> 赞同：0
> 
> 时间：2012-08-09T13:01:13.107
> 
> 标签：database, ms-access, persistence

有没有办法在访问中存储变量，即使在访问重新启动后仍保留其数据？这个想法是我将记录上次打开表单的日期和时间，这样我就可以只显示上次打开后的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:02:40.823

由于您在 Access 内部，因此只需创建一个表来存储此类信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T14:43:10.750

万一有人来这里寻找一种不使用 Access 表来存储永久变量（又名多会话变量）的方法。这是实现这一目标的技术。

> Crux ：`TextBox` `DefautlValue`用于存储数据。

```
Dim strForm As String
Dim frm As Form
strForm = "FormName"
DoCmd.OpenForm strForm, acDesign, , , , acHidden
Set frm = Forms(strForm)
frm.Text0.Caption = "Test"
frm.Text0.DefaultValue = 4
Set frm = Nothing
DoCmd.Close acForm, strForm, acSaveYes 
```

重要提示：表单需要在设计视图中打开。

# vb.net - 默认方法重载

> ID：11884057
> 
> 赞同：1
> 
> 时间：2012-08-09T13:01:13.933
> 
> 标签：vb.net, overloading

我在这里有一点问题：但这个问题适用于任何方法重载。

我有一个方法声明，例如：（女巫不完全符合要求）

```
Public Shared Sub SetGridFormat(ByRef grid As DataGrid, ByVal width As Integer, ByVal height As Integer, ByVal paging As Boolean) 
```

所以我想为我需要这个的情况写一个重载：

```
 Public Shared Sub SetGridFormat(ByRef grid As DataGrid, ByVal width As Unit, ByVal height As Unit, ByVal paging As Boolean) 
```

这两个声明是相同的，但高度和宽度的类型。我收到“重载解析失败，因为没有可访问的 'SetGridFormat' 最适合这些参数”错误。

问题是：vb.net 是否允许“默认”定义方法，以防构建器无法决定使用哪一个以及语法是什么？

帮助的坦克。

**编辑：这两个电话看起来像：**

```
SetGridFormat(dg, New Unit(100, UnitType.Percentage), New Unit(100, UnitType.Percentage), True)
SetGridFormat(dg, 100, 100,True) 
```

从回复中，我只需要指定一些内容：大多数答案在大多数情况下都可以使用，但排除我必须处理的有问题的情况，其中 2 个值可以设置为空（不需要特定大小）。

```
SetGridFormat(dg, Nothing, Nothing, True) 
```

在这种情况下，从编译器的角度来看，两个方法声明是相同的：

这可能是问题的根本原因。如果这些情况不存在，我会非常失望。:(

我的问题是有没有办法强制编译器在这种情况下使用特定的方法调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:04:09.580

当然没有办法指定默认值。但是，您可以使用以下语法来执行缩小转换（如果我正确阅读了问题）：

```
Public Shared Sub SetGridFormat(ByRef grid As DataGrid, ByVal iWidth As Integer, ByVal iHeight As Integer, ByVal paging As Boolean)
Public Shared Sub SetGridFormat(ByRef grid As DataGrid, ByVal uWidth As Unit, ByVal uHeight As Unit, ByVal paging As Boolean)

SetGridFormat(dg, iWidth:=50, iHeight:=50, true)
SetGridFormat(dg, uWidth:=50, uHeight:=50, true) 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:16:48.277

我认为没有默认说明符，但您不需要指定默认值，因为编译器将根据参数类型决定调用哪一个：

考虑以下：

```
Dim dg as DataGrid = Nothing
Dim widthInt as Integer = 0, HeightInt as Integer = 0
Dim pg as Boolean = False
Dim widthUnit as Unit = "Defaultvalue", heightUnit as Unit = "Defaultvalue"

SetGridFormat(dg, widthInt, heightInt, pg) ' Calls your first method
SetGridFormat(dg, widthUnit, heightUnit, pg) ' Calls your second method 
```

如果您真的需要，您可以通过将类型转换为所需的类型来强制编译器使用特定方法（如果无法将对象转换为所需的类型，这显然会失败）：

```
SetGridFormat(dg, CType(AnyObject,Integer), CType(AnyObject,Integer), pg) ' Calls your first method
SetGridFormat(dg, CType(AnyObject,Unit), CType(AnyObject,Unit), pg) ' Calls your first method 
```

* * *

因此，在您想要调用特定方法的情况下，`Nothing`您*可以*这样做：

```
SetGridFormat(dg, CType(Nothing,Integer), CType(Nothing,Integer), pg) ' Calls your first method
SetGridFormat(dg, CType(Nothing,Unit), CType(Nothing,Unit), pg) ' Calls your first method 
```

但这首先对我来说似乎是糟糕的设计，因为使用`Nothing`as 参数调用一个或另一个应该具有相同的效果，所以在这种情况下调用哪个并不重要，所以我想你应该真正定义一个新的重载：

```
Public Shared Sub SetGridFormat(ByRef grid As DataGrid, ByVal paging As Boolean) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:25:45.490

不，使用的方法必须由您定义，并且它将是所使用参数的最具体（按类型接近）。
如果你有 并且
`yourMethod1(var1 as DataType1);
yourMethod1(var1 as DataType2);`

`DataType1 [extends DataType0];
DataType2 [extends DataType0];`

那么您将不得不在对 yourMethod1(...) 的调用中使用 DataType1 或 DataType2（或扩展它们的某些类型）参数，否则调用将失败。

另一方面，如果
`DataType1 [extends DataType0];
DataType2 extends DataType1;`

那么您使用扩展 DataType2 类型的任何参数调用 to`yourMethod1(...)`将执行`yourMethod1(var1 as DataType2)`唯一的执行方式`yourMethod1(var1 as DataType1)`是使用 DataType1 类型的参数调用 yourMethod1(...) （或直接扩展 DataType1 - 不通过 DataType2）。

# c - 我正在从标准输入文件中读取 Integer 并且必须在用户停止输入整数时停止。如何做到这一点？

> ID：11884060
> 
> 赞同：0
> 
> 时间：2012-08-09T13:01:30.530
> 
> 标签：c, stdin

我正在编写一个算法，我最多接受 10 个输入。允许用户输入任意数量的输入。问题是我不能告诉用户最后输入你必须输入 -1 或其他任何东西。我需要找到一种机制来做到这一点。有人对此有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:09:31.600

该`scanf()`函数返回它成功写入的对象数。使用该值！

```
int n, a[10];
n = scanf("%d%d%d%d%d%d%d%d%d%d", a+0, a+1, a+2, a+3, a+4, a+5, a+6, a+7, a+8, a+9);
printf("You entered %d values\n", n); 
```

请注意，对于特定代码段，用户必须使用一些错误值（如“42 13 -100 boo”）或 EOF（“42 13 -100 CTRL+D CTRL+D”）表示输入结束。只需键入 ENTER 没有任何效果：`"%d"`转换规范会忽略它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:06:09.717

伪代码：

```
get count limit
saturate to 10

start loop (for count-limit times)
scanf
put value to array
end loop 
```

或者：

```
start loop 
scanf
put value to array
increment counter
check if counter==10 or input is blank then quit
end loop 
```

# xml - XSLT 在生成文本时产生很好的缩进

> ID：11884063
> 
> 赞同：1
> 
> 时间：2012-08-09T13:01:41.377
> 
> 标签：xml, xslt, xslt-1.0

我想创建一个 XSLT-Transformation，它将 xml 文档转换为文本格式。这种文本格式是结构化的，因此应该相应地格式化，即缩进。

例如：

鉴于这份文件，

```
<root>
    <l1>
        <l2>
            <l3>
                <l4>
                </l4>
            </l3>
            <l3>
                <l4>
                </l4>
            </l3>
        </l2>
    </l1>
</root> 
```

我想要这个作为输出：

```
l1 (
    l3 (
        foo (
            l4 (
            )
        )
    )
    l3 (
        foo (
            l4 (
            )
        )
    )
) 
```

如果有更多的级别，它们应该缩进更深。xml 文档的确切深度是可变的。此外，应该可以删除或添加某些节点，如节点“foo”和“l2”的示例中所示。

这是否可以使用 xslt 以可维护的方式进行？版本是带有 exslt 的 xslt-1.0。

问候，
约斯特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:27:11.887

**类似于以下内容**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vSpaces" select=
 "'                                                                 '"/>

 <xsl:template match="*/*">
  <xsl:param name="pIndent" select="0"/>
     <xsl:value-of select="substring($vSpaces, 1, $pIndent)"/>
     <xsl:value-of select="concat(name(), ' (')"/>
     <xsl:text>&#xA;</xsl:text>
     <xsl:apply-templates select="*">
       <xsl:with-param name="pIndent" select="$pIndent+string-length(name())+3"/>
     </xsl:apply-templates>
     <xsl:value-of select=
     "substring($vSpaces, 1, $pIndent+ string-length(name()))"/>
     <xsl:text>)&#xA;</xsl:text>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <l1>
        <l2>
            <l3>
                <l4>
                </l4>
            </l3>
            <l3>
                <l4>
                </l4>
            </l3>
        </l2>
    </l1>
</root> 
```

**产生正确缩进的输出**：

```
l1 (
     l2 (
          l3 (
               l4 (
                 )
            )
          l3 (
               l4 (
                 )
            )
       )
  ) 
```

> 此外，应该可以删除或添加某些节点，如节点“foo”和“l2”的示例中所示。

**将您的转换组织**成两遍，在第一遍中，您将源 XML 文档转换为所需的最终 XML 文档。然后在第二遍中应用上述转换来产生想要的文本结果。

有关更多信息，请搜索“XSLT 多通道转换”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:11:21.937

是的，您需要做的就是为每个迭代级别在输出中添加一些制表符/空格。

# jquery - jQuery 自定义对象排序

> ID：11884064
> 
> 赞同：0
> 
> 时间：2012-08-09T13:01:44.650
> 
> 标签：jquery, sorting, object

我是新手，而且我的英语也不是那么好。我的问题是我正在尝试从数组构建对象表，但没有成功。目标是构建简单的发票脚本，但我卡住了。假设我有一个包含一些位置的数组：

recordArr = [值，valueWithTax，taxInPercent]

我想构建一个对象数组，通过键“taxInPercent”对位置（值，valueWithTax）求和。我现在做的是：

```
for(key in recordArr){   
    if ( isNaN(SortrRecordArr[recordArr[key][2]]) ) {
        SortrRecordArr[recordArr[key][2]] = [recordArr[0], recordArr[1]]
       }
       else {
          newValue = SortrRecordArr[recordArr[key][2]][0] + recordArr[0]
          newValueWithTax = SortrRecordArr[recordArr[key][2]][1] + recordArr[1]

          SortrRecordArr[recordArr[key][2]] = [newValue, newValueWithTax];
       }        
} 
```

但这仅保留出现在 recordArr 中的最后一个值

当然，我之前已经定义了对象和变量。我希望我自己清楚。

所以它是这样的：

假设我有一个数组：

```
recordArr[1] = [1 , 2 , 23]
recordArr[2] = [1 , 2 , 23]
recordArr[3] = [2 , 3 , 8]
recordArr[4] = [2 , 3 , 8]
recordArr[5] = [3 , 4 , 5]
recordArr[6] = [3 , 4 , 5] 
```

我正在搜索结果，例如：

```
SortRecordArray[23] = [2 , 4]
SortRecordArray[8] = [4 , 6]
SortRecordArray[5] = [6 , 8] 
```

我希望更清楚地了解我正在尝试做什么。

谢谢你的建议，请温柔一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:14:13.123

如果项目存在于对象中，您应该使用[.hasOwnProperty()检查。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)

这是您需要的完整编辑代码，

```
var recordArr = [];
var SortrRecordArr = [];

recordArr[1] = [1 , 2 , 23];
recordArr[2] = [1 , 2 , 23];
recordArr[3] = [2 , 3 , 8];
recordArr[4] = [2 , 3 , 8];
recordArr[5] = [3 , 4 , 5];
recordArr[6] = [3 , 4 , 5];

for(var key in recordArr){   
    if (!SortrRecordArr.hasOwnProperty(recordArr[key][2])) {
        SortrRecordArr[recordArr[key][2]] = [recordArr[key][0], recordArr[key][2]];
    } else {
        newValue = SortrRecordArr[recordArr[key][2]][0] + recordArr[key][0];
        newValueWithTax = SortrRecordArr[recordArr[key][2]][3] + recordArr[key][4];
        SortrRecordArr[recordArr[key][2]] = [newValue, newValueWithTax];
     }        
}

console.log(SortrRecordArr)
​ 
```

[演示](http://jsfiddle.net/ocanal/LJ5QL/1/)

# javascript - JavaScript 未在在线版本中执行

> ID：11884067
> 
> 赞同：-1
> 
> 时间：2012-08-09T13:02:02.453
> 
> 标签：javascript

我一直在尝试上线一个测试页面，除了 JavaScript 没有执行之外，一切都按预期工作。首先，我认为这是文件中的路径问题或错误，但现在，文件是空的（几乎），并且为 CSS 文件设置了相同的路径并且加载正常。

这可能是非常明显的事情，但我就是看不到。关于如何拍摄的建议？

页面在[这里](http://viltersten.somee.com/TvGuide/TvGuide.aspx)。我只需要`alert()`在加载页面上执行（[这里](http://viltersten.somee.com/TvGuide/global.js)是 JS 文件）。

在本地测试页面效果很好。提交也可以在线进行。它只是一个不加载（或至少不执行）的小而邪恶的 JS 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:04:16.347

global.js 中的这段代码在 firebug 中给了我一个错误

```
$(document).ready(function () {
alert();
}); 
```

错误是

```
 Not enough arguments [nsIDOMWindow.alert]
   alert(); 
```

# extjs4.1 - Extjs4.1，存储同步后检索响应消息

> ID：11884086
> 
> 赞同：5
> 
> 时间：2012-08-09T13:03:04.743
> 
> 标签：extjs4.1

如何在失败功能中检索响应消息？

```
store.sync({
 success : function(){},
 failure : function(response, options){
   console.log(response.responseText); //it does not work, because there is responseText attr in response
 }  
}); 
```

响应文本是这样的，

```
{"success":false,"message":"Test Error"} 
```

有谁知道，请指教。

谢谢

[编辑]

```
console.log(response); 
```

然后，

![在此处输入图像描述](../Images/b612c437618abf6b565ed4ae26c9b169.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T02:46:10.873

我不确定你是否想过这一点，但我很确定上面的建议是错误的。您需要查看存储代理的请求异常。

这是在进行存储同步之前要调用的一些代码。

```
Ext.Ajax.on('requestexception', function (conn, response, options) {

  if (response.status != 200) {
    var errorData = Ext.JSON.decode(response.responseText);
    Ext.Msg.alert('Creating User Failed',errorData.message);
  }

}); 
```

很抱歉挖掘了这篇旧帖子，但看到上面的答案很痛苦，因为我刚刚经历了同样的挣扎。

HTH的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T00:55:57.917

这是您需要的：

```
store.sync({
    success: function(batch) {
        Ext.Msg.alert('Success!', 'Changes saved successfully.');
    },
    failure: function(batch) {
        Ext.Msg.alert("Failed", batch.operations[0].request.scope.reader.jsonData["message"]);
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T23:37:32.553

总而言之，所有这些答案都是不正确或低效的。

1.  可以使用 Ext.Ajax.on，但您将不得不担心请求的竞争条件。不要使用此解决方案，因为它很容易使您陷入困境。Ext.Ajax.on 可能会因为同步以外的原因而被解雇。见展览a。
2.  batch.operations[0].response.responseText 也可以使用，但这不是获取响应的可靠方式，因为“响应”对象不会总是被填充（这取决于请求，如果有异常，404， 500，成功：假等）

**展品**

```
 // This picked up my autocomplete comboboxes load - not what I wanted!
    Ext.Ajax.on({
        requestcomplete: {
            fn: callback,
            scope: this,
            single: true
        },
        requestexecption: {
            fn: callback,
            scope: this,
            single: true
        }
    }); 
```

**当前解决方案**

*这仍然没有我正在寻找的响应，但是嗯。*

```
 store.sync({
        failure: function (batch, eOpts) {
            // 'this' is the Ext.data.proxy.Ajax object
            // or whatever proxy you are using
            var data = this.getReader().jsonData,
                raw_data = this.getReader().rawData;
        }
    }); 
```

**我不确定这将如何处理我的全部异常情况堆栈，但我将根据我发现的服务器端异常（404、500 等）修改我的帖子**

# java - 如何告诉 java.lang.String.split 跳过分隔符？

> ID：11884092
> 
> 赞同：2
> 
> 时间：2012-08-09T13:03:43.480
> 
> 标签：java

作为输入，我的程序得到一个包含 IP 地址的字符串，由行分隔符分隔，即每行一个 IP 地址。要验证我所做的每个地址：

```
String[] temp;
temp = address.split(System.getProperty("line.separator")); 
```

然后我循环遍历字符串数组。

我想知道为什么除了最后一个 IP 地址之外的所有地址总是无效的。我发现它们看起来像 10.1.1.1^M

有没有办法告诉 java.lang.String.split 在将令牌放入数组之前删除分隔符？或者我在这里还有什么其他选择？抱歉，我不是 Java Ninja，所以我想在开始搜索几个小时之前先问问你们。

谢谢托马斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T13:06:49.657

问题是文件中的分隔符是`"\r\n"`，但值`System.getProperty("line.separator")`是`"\n"`。这意味着`"\r"`不被视为分隔符的一部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T13:06:12.563

你为什么不直接使用`address.split("\\s+")`，因为*有效*的 IP 地址不能包含空格？

**预定义的字符类**

```
.     Any character (may or may not match line terminators) 
\d    A digit: [0-9] 
\D    A non-digit: [^0-9] 
\s    A whitespace character: [ \t\n\x0B\f\r] 
\S    A non-whitespace character: [^\s] 
\w    A word character: [a-zA-Z_0-9] 
\W    A non-word character: [^\w] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:34:05.930

看来您使用的回车与平台的回车不同。（例如在 MS-DOS/Windows 上编辑并在 Linux 上运行）

我会`\\s+`用来打破任意数量的空白。这也将修剪前导或尾随空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:11:16.437

您的 line.separator 无效。这取决于您使用的系统：

```
\n = CR (Carriage Return) // Used as a new line character in Unix
\r = LF (Line Feed) // Used as a new line character in Mac OS
\n\r = CR + LF // Used as a new line character in Windows 
```

# ios - 使用块加载表中的图像 - dispatch_async 返回值

> ID：11884093
> 
> 赞同：1
> 
> 时间：2012-08-09T13:03:46.913
> 
> 标签：ios, uitableview, objective-c-blocks

我在 SO 和网络上环顾四周，并没有找到具体的答案。

很简单，我有一个从 Flickr 加载图像信息的表格。我想在每个单元格的左侧显示图像的缩略图。

为了在不阻塞主（UI）线程的情况下做到这一点，我使用了块：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"top50places";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  //getting the selected row image 
  NSDictionary* currentImageDictionary=[self.topfifty objectAtIndex:indexPath.row];//topFifty is an array of image dictionaries

  //creating the download queue 
  dispatch_queue_t downloadQueue=dispatch_queue_create("thumbnailImage", NULL);

  dispatch_async(downloadQueue, ^{

    UIImage *downloadedThumbImage=[self getImage:currentImageDictionary] ;

    //Need to go back to the main thread since this is UI related
    dispatch_async(dispatch_get_main_queue(), ^{

        cell.imageView.image = downloadedThumbImage ;

    });

  });

  dispatch_release(downloadQueue);

  return cell;

} 
```

现在这行不通了。因为返回单元格可能会在执行块之前发生。但同时，我无法返回主队列块中的单元格，因为该块不接受返回参数。

我想避免创建 UITableViewCell 子类。

任何使用块的简单答案？

谢谢九巴

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:16:35.837

这样做的问题`cell.imageView.image = downloadedThumbImage;`是这个单元格现在可能被重用并用于另一行。

相反，您需要更新特定 indexPath 中的当前单元格（indexPath 将相同）

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
cell.imageView.image = image; 
```

或者有时我所做的是更新模型，然后在特定的 indexPath 处重新加载单元格：

```
myModel.image = downloadedThumbImage;
[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                                      withRowAnimation:UITableViewRowAnimationNone];  

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"top50places";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  //getting the selected row image 
  NSDictionary* currentImageDictionary=[self.topfifty objectAtIndex:indexPath.row];//topFifty is an array of image dictionaries

  UIImage *currentImage = [currentImageDictionary objectForKey:@"image"];

  if (currentImage) { 
      // we already fetched the image, so we just set it to the cell's image view
      cell.imageView.image = currentImage;
  }
  else {
      // we don't have the image, so we need to fetch it from the server  

      // In the meantime, we can set some place holder image
      UIImage *palceholderImage = [UIImage imageNamed:@"placeholder.png"];
      cell.imageView.image = palceholderImage;

      // set the placeholder as the current image to your model, so you won't 
      // download the image multiple times (can happen if you reload this cell while 
      // download is in progress)
      [currentImageDictionary setObject:palceholderImage forKey:@"image"];

      // then download the image
      // creating the download queue 
      dispatch_queue_t downloadQueue=dispatch_queue_create("thumbnailImage", NULL);

      dispatch_async(downloadQueue, ^{
         UIImage *downloadedThumbImage=[self getImage:currentImageDictionary] ;

         //Need to go back to the main thread since this is UI related
         dispatch_async(dispatch_get_main_queue(), ^{
                // store the downloaded image in your model
                [currentImageDictionary setObject:image forKey:@"image"];

                // update UI
                UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
                cell.imageView.image = image;    
         });
      });
      dispatch_release(downloadQueue);
  }

  return cell;
} 
```

# android - 当我的倒数计时器处于活动状态时，后退按钮调用 onDestroy()

> ID：11884102
> 
> 赞同：0
> 
> 时间：2012-08-09T13:04:20.007
> 
> 标签：android, android-fragments, back-button, countdowntimer, ondestroy

我在片段中运行倒数计时器，每次按下后退按钮`onDestroy()`都会被调用并终止我的倒计时。当我再次启动我的应用程序时，一个新的活动已经开始并且倒计时消失了。

`onDestroy() isFinished()`返回`true`。

如果我按下主页按钮，这不会发生。

我怎样才能防止这种情况发生？使用服务？设置标志？覆盖后退按钮？我在这里迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:09:08.690

如果用户回击是因为他无论如何都想离开您的应用程序，那么您正在使用这种方法打破正常的 Android 生命周期。
但无论如何，您可以避免覆盖 onBackPressed 的行为并使 Back 键的行为类似于 Home 键。看看这里[覆盖后退按钮就像主页按钮一样](https://stackoverflow.com/questions/2000102/android-override-back-button-to-act-like-home-button)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:10:51.257

当按下后退按钮时，活动/进程被破坏。所以是的，要解决这个问题，请使用 a `Service`，如果此计时器继续运行至关重要，则使用 a `Foreground Service`（需要一个常量`Notification`）。A`Foreground Service`不能被销毁，`Service`如果系统内存不足需要回收，则正常可以。根据我的经验，这种情况并不经常发生（尤其是在新设备上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:11:53.607

您的计时器在 Activity 的上下文中运行，因此当 Activity 被销毁时，计时器也是如此。当 home 被按下时，活动被置于暂停状态，因此不同的动作。

移动到后台服务，该服务可以在需要时启动，并在活动被销毁时继续在后台运行。请注意，即使您有后台服务，如果需要内存，它仍然可能被设备杀死，因此您也需要处理它。

将倒数计时器与设备时间同步。这样，如果服务被破坏，您可以使用设备当前时间重新同步倒计时时间。

另请查看 AlarmManager，它在这种情况下会很有用 - [http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:12:13.463

你的活动的破坏是你无法控制的。它完全取决于垃圾收集器。如果它需要清理内存，并且您的活动在后台，它很可能会破坏它。

您应该使用服务`startForeground(...)`以确保仅在绝对必要时才将其销毁。`WakeLock`如果您想在屏幕锁定时保持其活动状态，也不要忘记在您的服务中获取一个。

# rest - Symfony2 + FOSRestBundle：启用/禁用每个控制器/动作的 REST 功能？

> ID：11884104
> 
> 赞同：5
> 
> 时间：2012-08-09T13:04:20.820
> 
> 标签：rest, symfony, fosuserbundle, fosrestbundle

我的应用程序的一部分将作为**API**提供，因此**我的一些页面**需要以 JSON 或 XML 的形式提供（基于 Accept 标头“内容类型”）。

我使用了**FOSRestBundle**，它运行良好，但现在在发送 Accept 标头“内容类型：应用程序/xml”时，我的**所有**页面都可以在 XML（或 JSON）中使用。

所以，我想为我的一些控制器/操作启用/禁用此功能。我将是理想的使用注释来做到这一点。

那可能吗？

*我的 config.yml：*

```
fos_rest:
    view:
        formats:
            rss: false
            xml: true 
            json: true
        templating_formats:
            html: true
        force_redirects:
            html: false
        failed_validation: HTTP_BAD_REQUEST
        default_engine: twig
        view_response_listener: force
    body_listener:
        decoders:
            json: acme.decoder.json
            xml: fos_rest.decoder.xml
    format_listener:
        default_priorities: ['html', 'xml', 'json', '*/*']
        fallback_format: html
        prefer_extension: false 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T09:24:32.437

根据[RestBundle 的文档](https://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/)，如果您不在`View`控制器中使用 a，您将不会获得 XML 输出。因此，如果您在操作中不使用`@View`注释或 a `View::create()`，并且返回经典响应，您将获得 HTML 输出。

如果出于某些原因要强制格式化，可以将`prefer_extension`to转为`true`并调整路由定义：

```
my_route:
    pattern:  /my-route
    defaults: { _controller: AcmeDemoBundle:action, _format: <format> } 
```

`<format>`您要强制使用的格式在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:12:18.870

您可以设置`view_response_listener`为`false`（默认为`force`）。然后将`@View`注释添加到您要使用 REST 的每个控制器类。

示例将使其更清楚。

没有 REST 的控制器：

```
/**
 * @Route("/comments")
 */
class CommentsControler extends Controller
{
    /**
     * @Route("/")
     * @Method({"POST"})
     */
    public function newAction() { ... }

    /**
     * @Route("/{id}")
     */
    public function detailAction($id) { ... }

    ...
} 
```

另一个带有 REST 的控制器。请注意，只`@View`需要类的注释（除非您想覆盖响应状态代码）。

```
/**
 * @View
 * @Route("/api/comments")
 */
class RestfulCommentsControler extends Controller
{
    /**
     * @Route("/")
     * @Method({"POST"})
     */
    public function newAction() { ... }

    /**
     * @Route("/{id}")
     */
    public function detailAction($id) { ... }

    /**
     * @View(statusCode=204)
     * @Route("/{id}/delete")
     */
    public function deleteAction($id) { ... }

    ...
} 
```

*   `View`是`FOS\RestBundle\Controller\Annotations\View`
*   `Route`是`Symfony\Component\Routing\Annotation\Route`

# javascript - 为什么 context.restore() 不会将上下文的比例设置回 (1, 1)？

> ID：11884108
> 
> 赞同：1
> 
> 时间：2012-08-09T13:04:40.557
> 
> 标签：javascript, html, canvas

我正在制作一个 HTML5 游戏引擎，我希望我的`Camera`对象有一个`zoom`属性。在渲染器中，我认为我可以轻松实现它，如下所示：

```
context.save();
context.scale(camera.zoom, camera.zoom);
draw();
context.restore(); 
```

但是，有一个问题。当我第一次测试这个时，相机似乎永远变焦了！我认为这可能没有按预期工作，`context.save()`并且上下文的内部缩放因子正无限`context.restore()`地乘以相机的广告。`zoom`

这解决了这种情况：

```
context.save();
context.scale(camera.zoom, camera.zoom);
draw();
context.scale(1/camera.zoom, camera.zoom);
context.restore(); 
```

这现在有效，但恐怕这不是最优雅/最快速的解决方案。另外，我认为由于浮点计算的不精确性，比例因子可能总是略有变化。也就是说，`1/camera.zoom`可能并不总是产生相同的结果。

所以，两个问题：

1.  为什么 context.restore() 不会将上下文的比例设置回 (1, 1)？
2.  如何手动操作上下文的缩放？

* * *

编辑：

有人指出`context.save()`' 和`context.restore()`' 的数量可能不同，但事实并非如此。

这是我测量它的方法：

```
renderer.context.save = (function()
{
    var original = renderer.context.save;

    return function()
    {
        renderer.saved ++;
        original.call(renderer.context);
    }
})();

renderer.context.restore = (function()
{
    var original = renderer.context.restore;

    return function()
    {
        renderer.saved --;
        original.call(renderer.context);
    }
})(); 
```

该`renderer.saved`值`1`恰好在最后一次恢复上下文之前（绘制之后）和`0`每次渲染之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:02:52.153

好像我不小心解决了这个问题。现在可以了。

主要嫌疑人是这部分代码：

```
renderer.context.save();

//Erase everything.
renderer.context.globalAlpha = 1;
renderer.context.fillStyle = renderer.settings.fillStyle;
renderer.context.fillRect(0, 0, renderer.width, renderer.height);

//Zoom.
renderer.context.scale(camera.zoom, camera.zoom); 
```

我相信我曾经在实际保存上下文之前进行缩放，导致恢复对缩放没有影响。

# java - 在下拉选择中设置 bean 属性的值：Spring

> ID：11884115
> 
> 赞同：1
> 
> 时间：2012-08-09T13:05:05.710
> 
> 标签：java, spring, spring-mvc, jstl, javabeans

我`JSTL`用来填充下拉项目，其中国家是具有 `{ id, name, code }`属性的项目。

***我需要获取所选国家/地区的名称和代码。***

*例如：*

`Country{c_id, c_name, c_code}`是country bean的结构。当用户选择此项时，我需要检索两个值 c_name、c_code。

***我还做了什么：***

据我所知，只能将一个值分配给`itemValue`或。我尝试填充所有国家/地区并匹配所选国家/地区，然后设置为另一个路径变量，但这也不起作用。`c_name``c_code`

***我的代码是***

```
<form:select path="selectedCountry" id="ddlCountryId">
<c:forEach items="${countries}" var="country">
    <option value="${country.countryName}" ${country.countryName == selectedCountry ? 'selected' : ''}>${country.countryName}</option>
    </c:forEach>
    </form:select>
    <input class="login_submit" type="submit" value="Login" id="btnSubmitId">

    <!-- Read country code of selected country -->
    <c:forEach var="country" items="${countries}">
        <c:out value="country"></c:out>
        <c:choose>
        <c:when test="${country.countryName==loginCreadetials.selectedCountry}">
        <input name="countryCode" type="hidden" value="${country.countryCode}"/>

        </c:when>
        </c:choose>
    </c:forEach> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:25:01.703

例如，将选项标签的值设置为可以轻松解析的字符串

> value="${country.countryName}:${country.countryName}"

然后，在您的控制器中，您可以在“：”字符上拆分字符串以检索您的两个值。

# c# - 处理长时间运行的任务时请求超时错误

> ID：11884116
> 
> 赞同：0
> 
> 时间：2012-08-09T13:05:06.047
> 
> 标签：c#, asp.net

我正在我的 ASP.NET 站点中处理和打印 1000 条记录。当我单击提交按钮时，页面会加载一段时间并转到请求超时错误。我试图增加请求超时，但这看起来不是一个好的解决方案。请提出最佳解决方案。

此外，如何在处理请求时更新 UI。我需要显示到目前为止已经处理了多少条记录。

创建一个新线程怎么样。？ASP.NET 中的多线程有哪些缺陷？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:10:24.153

您可以利用 SignalR 在服务器和客户端之间创建双向通信通道，该通道将根据需要进行处理和反馈 SignalR 可以在 NuGet 上的[http://nuget.org/packages/SignalR中找到。](http://nuget.org/packages/SignalR)

# ruby - 在本地创建 gem 并跳过 rake install

> ID：11884117
> 
> 赞同：0
> 
> 时间：2012-08-09T13:05:11.730
> 
> 标签：ruby, gem, bundler

我正在使用 Bundler 为一个简单的机架应用程序（不是 Rails）创建一个 ruby​​ gem。运行 rake install 然后每次都重新启动网络服务器真的很痛苦。在大多数情况下，这没关系，因为我使用 rspec 而不是设计来测试所有内容。我的 gem 包含大量设计，每次更新我的 gem 时，我都必须执行相同的程序。

是否可以在本地构建 gems 而不必`rake install`每次都运行然后重新启动我的机架服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:54:30.237

如果您使用 Bundler 来管理应用程序中的 gem，则可以使用 Bundler 的`path`指令来使用当前正在开发的 gem。

在您的 Gemfile 中：

```
# My awesome gem that I'm developing
gem 'some-awesome-gem', :path => '~/Projects/some_awesome_gem' 
```

本质上，只需将路径指向您的 gem 所在的目录，您就不必在积极开发 gem 时打包新版本的 gem。

有关更多详细信息，请参阅[Bundler 主页](http://gembundler.com/)和[Gemfile 手册](http://gembundler.com/man/gemfile.5.html)。

# java - 动态输入文本字段

> ID：11884121
> 
> 赞同：2
> 
> 时间：2012-08-09T13:05:22.247
> 
> 标签：java, jsf, primefaces

我正在尝试使用 primefaces 创建带有标签的动态输入文本字段。
就像我单击添加按钮一样，它应该继续添加标签和输入文本字段。
我可以使用什么组件？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:13:41.317

为此，您可以将 a与bean`<h:dataTable>`结合使用。`@ViewScoped`

例如

```
<h:form>
    <h:dataTable id="inputs" value="#{bean.inputs}" var="input">
        <h:column>
            <p:outputLabel for="input" value="#{input.label}" />
        </h:column>
        <h:column>
            <p:inputText id="input" value="#{input.value}" />
        </h:column>
    </h:dataTable>
    <p:commandButton value="Add" action="#{bean.add}" update="inputs" />
</h:form> 
```

和

```
@ManagedBean
@ViewScoped
public class Bean implements Serializable {

    private List<Input> inputs;

    @PostConstruct
    public void init() {
        inputs = new ArrayList<Input>();
    }

    public void add() {
        Input input = new Input();
        input.setLabel("Input " + (inputs.size() + 1));
        inputs.add(input);
    }

    public List<Input> getInputs() {
        return inputs;
    }

} 
```

和

```
public class Input {

    private String label;
    private String value;

    public String getLabel() {
        return label;
    }

    public void setLabel(String label) {
        this.label = label;
    }

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

} 
```

您当然也可以使用 a `<p:dataTable>`，但这只会增加一些花哨的外观，这对于这个特定的用例来说可能是不必要的。

### 也可以看看：

*   [推荐的 JSF 2.0 CRUD 框架](https://stackoverflow.com/questions/3180400/recommended-jsf-2-0-crud-frameworks/3180885#3180885)

# c# - 如何选择较低级别的项目作为 ListBox 的显示成员

> ID：11884128
> 
> 赞同：2
> 
> 时间：2012-08-09T13:05:41.690
> 
> 标签：c#, listbox

我有一个 FLECk.IWebSocketConnection 列表

我正在尝试使用 IWebSocketConnection.ConnectionInfo.ClientIpAddress 属性在列表框中显示此列表，但我一定做错了什么

```
Sockets= new List<IWebSocketConnection>();
ListBox1.DataSource=Sockets;
ListBox1.DisplayMember="ConnectionInfo.ClientIpAddress"; 
```

当我使用添加到套接字时

```
Sockets.Add(socket); 
```

我必须重新绑定数据源

```
ListBox1.DataSource=Sockets;
ListBox1.DisplayMember="ConnectionInfo.ClientIpAddress"; 
```

但是 lisbox 中的显示是“Fleck.WebSocketConnection”，而不是预期的 Ip 号。

只是为了澄清，列出了写入的连接数。我只是得到错误的显示信息。如果我创建一个标签并将其文本设置为

```
label1.Text =((IWebSocketConnection)SocketList.Items[0]).ConnectionInfo.ClientIpAddress; 
```

它显示IP号码

有人可以告诉我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:14:04.010

可能有另一种方法，但您可以做的一件事是将需要显示的列表成员展平并绑定到该列表成员。

例如：

```
var SocketInfos = sockets.Select((s) => new {ClientIpAddress = s.ConnectionInfo.ClientIpAddress,
                                             Socket = s}).ToList();

ListBox1.DataSource=SocketInfos ;
ListBox1.DisplayMember="ClientIpAddress"; 
```

但是，每当您更改源列表时，您都需要重新生成列表。

这样，您仍然可以从选定的 ListBox 项返回到选定的 Socket 实例。

# javascript - 使用 jQuery 获取选定下拉项的值

> ID：11884136
> 
> 赞同：2
> 
> 时间：2012-08-09T13:06:16.277
> 
> 标签：javascript, jquery

默认情况下，我将下拉值设置为 1。但是当我想在点击事件中检索该值时，我得到了错误。该项目的价值我将其视为“未定义”

```
$("#cmbTicketType option[value='1']").prop("selected", true); 
```

我试过这个

```
var sTicketType = $('#cmbTicketType').val();
alert(sTicketType ); 
```

HTML：

```
 <select id="cmbTicketType" name="cmbTicketType" multiple="multiple" style="display: none; ">                             
<option value="1">FLM</option>
<option value="7">Bank</option>
<option value="5">Electrical</option>
<option value="3">Network</option>
<option value="6">Power Failure</option>
<option value="2">SLM</option>
<option value="8">Suspect</option>
<option value="4">UPS</option>
                            </select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:08:42.810

您可以像**提取**元素的选定值一样设置元素的**“**选定”值。`<select>`

 **设置值 -

```
$("#cmbTicketType").val(1); 
```

然后您可以像现在一样检索该值 -

```
var sTicketType = $("#cmbTicketType").val(); 
```

* * *

## [这是一个简单的 jsFiddle 演示](http://jsfiddle.net/GHyCL/2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T13:12:21.010

问题有点不清楚。假设`#cmbTicketType`是选择标签的id，你可以通过

```
var sTicketType = $('#cmbTicketType option:selected').val(); 
```**

# java - 在 JUnit 中删除文件和目录

> ID：11884141
> 
> 赞同：8
> 
> 时间：2012-08-09T13:06:29.033
> 
> 标签：java, file, junit, delete-file

我正在为在目录中创建文件的方法编写测试。这是我的 JUnit 测试的样子：

```
 @Before
  public void setUp(){
      objectUnderTest = new ClassUnderTest();
      //assign another directory path for testing using powermock
      WhiteBox.setInternalState(objectUnderTest, "dirPathField", mockDirPathObject);

      nameOfFile = "name.txt";
      textToWrite = "some text";
  }

  @Test
  public void shouldCreateAFile(){

      //create file and write test
      objectUnderTest.createFile(nameOfFile, textToWrite);
      /* this method creates the file in mockPathObject and performs
         FileWriter.write(text);
         FileWriter.close();
      */

      File expect = new File(mockPathObject + "\\" + nameOfFile);
      assertTrue(expect.exist());

      //assert if text is in the file -> it will not be called if first assert fails
  }

  @After
  public void tearDown(){
       File destroyFile = new File(mockPathObject + "\\" + nameOfFile);
       File destroyDir = new File(mockPathObject);

       //here's my problem
       destroyFile.delete(); //why is this returning false?
       destroyDir.delete(); //will also return false since file was not deleted above

  } 
```

我可以使用 deleteOnExit() 删除文件，但无法使用 delete 或 deleteOnExit 删除目录。我还将在此测试脚本中针对其他场景执行其他测试，因此我不想使用 deleteOnExit。

我不知道为什么我不能在 JUnit 测试脚本中删除它，而当代码不是 JUnit 测试时，我可以删除 FileWriter 在运行时创建和修改的文件。我还尝试在测试方法之后执行无限循环并手动删除文件，但它告诉我其他程序仍在使用该文件，尽管我能够修改其内容。

希望有人可以建议一种方法来删除测试期间创建的文件和目录。感谢：D

为了更清楚，我测试的方法看起来像这个[调用 FileWriter 的单元测试方法](https://stackoverflow.com/questions/11878716/unit-testing-method-that-invokes-filewriter)

编辑：这是测试的方法

```
 public void createFile(String fileName, String text){

           //SOME_PATH is a static string which is a field of the class
           File dir = new File(SOME_PATH); //I modified SOME_PATH using whitebox for testing

           if(!dir.exists()){
                booelan createDir = dir.mkdirs();
                if(!createDir){
                           sysout("cannot make dir");
                           return;
                }
           }

           try{
                 FileWriter fileWrite = new FileWriter(dir.getAbsolutePath() + "/" + fileName, true);
                 fileWrite.write(text);
                 fileWrite.close();
           }
           catch(Exception e){
                 e.printStackTrace();
           }

    } 
```

我无法修改此方法，因为其他开发人员创建了它。我只是被指示为测试自动化创建单元测试。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T13:09:02.147

使用@Rule 注释和`TemporaryFolder`您需要删除的文件夹的类。

*http://kentbeck.github.com/junit/javadoc/4.10/org/junit/Rule.html（404*未找到）

[通过http://junit.org/junit4/javadoc/4.12/org/junit/rules/TemporaryFolder.html](http://junit.org/junit4/javadoc/4.12/org/junit/rules/TemporaryFolder.html)更新使用示例：

```
public static class HasTempFolder {

  @Rule
  public TemporaryFolder folder= new TemporaryFolder();

  @Test
  public void testUsingTempFolder() throws IOException {
    File createdFile= folder.newFile("myfile.txt");
    File createdFolder= folder.newFolder("subfolder");
    // ...
  }

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T13:32:43.620

这就是我通常清理文件的方式：

```
@AfterClass
public static void clean() {
    File dir = new File(DIR_PATH);
    for (File file:dir.listFiles()) {
        file.delete();
    }
    dir.delete();
} 
```

您的目录必须为空才能删除它，确保没有其他测试方法在那里创建更多文件。

**确保您在 finally 块中关闭 FileWriter 实例**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T13:09:18.787

确保该方法`objectUnderTest.createFile(nameOfFile, textToWrite)`实际上关闭了任何打开的流？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-27T13:20:44.220

我认为最好的方法是在 JVM 退出后删除：

```
Path tmp = Files.createTempDirectory(null);
tmp.toFile().deleteOnExit(); 
```

# java - Java webstart 日志记录

> ID：11884142
> 
> 赞同：2
> 
> 时间：2012-08-09T13:06:33.840
> 
> 标签：java, logging, log4j, slf4j, java-web-start

我习惯于将日志记录添加到独立的 Java 应用程序并使用 log4j 和 sl4j 将日志写入文件。我正在将一些应用程序转换为 Java Web 启动格式，但我不清楚执行日志记录以监视应用程序行为的最佳方法是什么。我想到了两个选择

1.  将日志写入本地机器，并提供在某些条件下（时间、错误等）将信息发送到中央服务器的选项

2.  将日志的输出直接发送到服务器

什么是最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T23:46:10.450

1.  我见过 1\. 由许多程序实现。
2.  但是 2\. 似乎是带宽密集型、侵入性和矫枉过正的。

> 同意，2 似乎不是一个好的选择。在这种情况下，不会记录 web 服务的错​​误。我想知道是否还有其他选择，但我想不出。

我正在考虑连接到服务器的完全本地问题来源，但很好。

> 什么是最佳实践？

坚持大多数并使用方法 1。除非您对如何改进整个日志记录/报告系统有奇妙的灵感，否则我会选择“尝试和测试”。它可能是最简单的，由现有框架提供最好的支持，并且如果您的代码出现问题，那么有最多的人“去过那里，做过那个”以提供潜在的帮助。

# android - 启动默认的 Android 图库

> ID：11884148
> 
> 赞同：0
> 
> 时间：2012-08-09T13:07:05.460
> 
> 标签：android, android-intent, air

我正在尝试制作一个可以启动本地图库应用程序的应用程序。只是针对不同的设备测试以下意图，我得到的结果好坏参半。通过悬挂或闪烁画廊，似乎在许多设备上都失败了。该应用程序将在 adobe air 中，因此这将被捆绑为一个简单的本机扩展。

adb shell am start -a android.intent.action.VIEW -t image/*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:41:14.743

我只是用

```
 Intent intent = new Intent();
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        intent.addCategory(Intent.CATEGORY_OPENABLE);
        startActivityForResult(intent, SELECT_PICTURE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:09:00.107

尝试这个

```
Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            intent.addCategory(Intent.CATEGORY_OPENABLE);
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                    Uri.parse("file://"
                            + Environment.getExternalStorageDirectory())));
            startActivityForResult(
                    Intent.createChooser(intent, "Select Picture"), 0); 
```

# c# - 从列表中添加/删除项目作为视图中模型的属性

> ID：11884150
> 
> 赞同：2
> 
> 时间：2012-08-09T13:07:09.703
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我正在使用此处找到的指南[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style)并且正在使用 MVC2。

我已经让它与控制器方法一起工作：

```
[HttpPost]
public ActionResult CreateStockRequest(StockRequestModel viewModel, List<StockRequestModel.StockRequestItem> items)
{
    viewModel.Items = items;

    // Validate the request and submit it
    return View(viewModel);
} 
```

如您所见，即使我的模型包含一个`Items`方法，我也必须添加一个`items`参数，因为模型上的属性没有被填充。

我尝试在方法中更改`items`为，并尝试了各种其他值，但如果不在控制器方法中添加单独的参数，我无法让它工作。`Items``BeginCollectionItem``items`

**tl;dr：**如何从视图中添加/删除/编辑模型列表属性中的项目？

* * *

## 看法

```
<table>
    <thead>
        <tr>
            <td><%= Html.LabelFor(m => m.Items[0].Item )%></td>
            <td><%= Html.LabelFor(m => m.Items[0].Quantity )%></td>
        </tr>
    </thead>
    <tbody id="editorRows">
        <% foreach (var item in Model.Items)
           {
               Html.RenderPartial("StockRequestItemEditor", item);
        }%>
    </tbody>
    <tfoot>
        <tr><td colspan="2">&nbsp;</td></tr>
        <tr>
            <td colspan="2"><%= Html.ActionLink("Add Item...", "BlankEditorRow", null, new { id = "addItem" })%></td>
            <script type="text/javascript">
                $("#addItem").click(function() {
                    $.ajax({
                        url: this.href,
                        cache: false,
                        success: function(html) { $("#editorRows").append(html); }
                    });
                    return false;
                });
            </script>
        </tr>
    </tfoot>
</table> 
```

## 局部视图

```
<tr>
    <% using(Html.BeginCollectionItem("Items")) { %>
        <td>
            <%= Html.ComboBoxFor(m => m.Item,
                                 null,
                                 Url.Action("Products", "Data", new { area = (string)null }),
                                 Model.Item,
                                 2)%>
        </td>
        <td><%= Html.TextBoxFor(m => m.Quantity)%></td>
    <% } %>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:36:57.133

这是一个很长的镜头，但也许这就是问题所在：

```
Html.RenderPartial("StockRequestItemEditor", item); 
```

我注意到在 POST 操作中检查 viewModel 时，它会在集合中拥有正确数量的项目，但它们都将为空。这向我表明这是模型绑定器的前缀问题。所以也许这样的事情会起作用：

```
var dictPrefix = new ViewDataDictionary();
dictPrefix.TemplateInfo.HtmlFieldPrefix = "SomePrefix";

Html.RenderPartial("StockRequestItemEditor", item, dictPrefix); 
```

我认为`RenderPartial()`不使用此重载就不会传递前缀（尽管可能是错误的）。我不完全确定绑定前缀是如何工作的，所以我实际上并不知道名称是什么，但它似乎在这里相关。该集合对我来说肯定有正确数量的项目，但没有一个是正确绑定的。

希望这足以促使其他人给你正确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:12:01.253

为什么不使用视图模型？

```
public class StockRequestModel 
{
    public List<StockRequestItem> Items { get; set; }

    ... some other properties
} 
```

然后让您的控制器操作将此视图模型作为参数：

```
[HttpPost]
public ActionResult CreateStockRequest(StockRequestModel viewModel)
{
    // TODO: do something with viewModel.Items ...

    return View(viewModel);
} 
```

在你的视野内：

```
<div class="editorRow">
    <% using(Html.BeginCollectionItem("Items")) { %>
        ...
    <% } %>
</div> 
```

# centos - VPS 上的 IP 表

> ID：11884154
> 
> 赞同：-1
> 
> 时间：2012-08-09T13:07:29.330
> 
> 标签：centos, ip, firewall, iptables, vps

我正在尝试使用以下命令在 GoDaddy 虚拟主机上设置 iptables：

```
iptables -P INPUT ACCEPT
iptables -F
iptables -A INPUT -i lo -j ACCEPT
iptables -A INPUT -i eth0 -j ACCEPT
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
iptables -A INPUT -p tcp --dport 22 -j ACCEPT
iptables -P INPUT DROP
iptables -P FORWARD DROP
iptables -P OUTPUT ACCEPT
iptables -L -v

## open port ssh tcp port 22 ##
iptables -A INPUT -p tcp --dport 22 -j ACCEPT

## open tcp port 25 (smtp) for all ##
iptables -A INPUT -p tcp --dport 25 -j ACCEPT

## open dns server ports for all ##
iptables -A INPUT -p udp --dport 53 -j ACCEPT
iptables -A INPUT -p tcp --dport 53 -j ACCEPT

## open http/https (Apache) server port to all ##
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
iptables -A INPUT -p tcp --dport 443 -j ACCEPT

## open tcp port 110 (pop3) for all ##
iptables -A INPUT -p tcp --dport 110 -j ACCEPT

## open tcp port 143 (imap) for all ##
iptables -A INPUT -p tcp --dport 143 -j ACCEPT 
```

每次我启动 iptables 服务时，这台服务器上的网站都没有运行，我无法访问 Plesk。

如果我停止服务 iptables，一切都会再次运行。这里有简单的语法错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:30:52.007

您是否正在运行`/etc/init.d/iptables save`以保存您的规则？如果您使用的是 CentOS 6，则需要先运行`yum install policycoreutils`，`/etc/init.d/iptables save`否则会出现错误。保存规则后，您需要重新启动 iptables。

此外，您需要为端口 8443 添加规则才能访问 Plesk。

# java - Maven，配置文件结果的顺序更改不同的构建目录结构

> ID：11884155
> 
> 赞同：0
> 
> 时间：2012-08-09T13:07:29.533
> 
> 标签：java, maven

我在这里面临非常荒谬的问题，我有一个`pom.xml`用于构建war文件的文件。我已经介绍`profile`了它可以在不同的环境中使用。`(dev/prod)`但是问题是当我创建构建时，它会为下面的配置文件创建正确的构建目录订购`pom.xml`

请协助这里有什么问题。

```
 <build>
    <pluginManagement>
        <plugins>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

        </plugins>
    </pluginManagement>
</build>

<profiles>
    <profile>
        <activation>
            <property>
                <name>lifecycle</name>
                <value>prod</value>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-war-plugin</artifactId>
                        <version>2.1.1</version>
                        <configuration>
                            <warSourceExcludes>**login.jsp</warSourceExcludes>
                        </configuration>
                </plugin>
            </plugins>
            <directory>target/${lifecycle}</directory>
            <finalName>testapp</finalName>
            <resources>
               <resource>
                <directory>src/main/resources/${lifecycle}</directory>
               </resource>
            </resources>
        </build>
    </profile>
    <profile>
        <activation>
            <property>
                <name>lifecycle</name>
                <value>dev</value>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-war-plugin</artifactId>
                        <version>2.1.1</version>
                </plugin>
            </plugins>
            <directory>target/${lifecycle}</directory>
            <finalName>testapp</finalName>
            <resources>
               <resource>
                <directory>src/main/resources/${lifecycle}</directory>
               </resource>
            </resources>
        </build>
    </profile>
</profiles> 
```

正确的构建目录应该是

如果**-Dlifecycle=dev**

`target/dev/testapp/`

如果**-Dlifecycle=prod**

`target/prod/testapp/`但在这里我得到'target/testapp-xx.x'

为什么这是不同的行为？

**触发构建的命令：**`mvn clean install -Dlifecycle=prod`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:37:59.077

将 id 元素添加到 prod 配置文件可以解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:33:44.637

您可以做的一件事是指定应该构建哪个配置文件。

为每个配置文件定义一个 ID：

```
 <profiles>
    <profile>
        <id>dev</id>
...
    <profile> 
```

构建时，使用参数**-P**通知 maven 要激活哪些配置文件

> mvn 干净安装 -P dev

# c# - WebForms - Response.Redirect() 不会更改 URL

> ID：11884156
> 
> 赞同：1
> 
> 时间：2012-08-09T13:07:30.497
> 
> 标签：c#, asp.net, response.redirect

我确实有一个大问题，找不到任何解决方案。

我有三个 .aspx 页面。1) 登录 2) 菜单 3) 天数

登录页面有一个按钮：

```
<asp:Button ID="bt_login" onClick="bt_login_Click" runat="server" Text="Login" /> 
```

这个方法：

```
protected void bt_login_Click(object sender, EventArgs e)
{
     Response.Redirect("~/Menu.aspx");        
} 
```

当我单击按钮时，它会重定向到 Menu.aspx，但 URL 仍然显示 Login.aspx 所以当我单击 Menu.aspx 中的任何按钮时，它会将我引导回 Login.aspx

当我尝试将 Redirect 放入 Page_Load 方法时它起作用了，为什么？

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:30:09.910

您可能正在使用某种身份验证（Windows/Forms/etc）并且您没有登录。检查您的 web.config，因为它可能会重定向到登录页面，直到您登录为止。menu.aspx 页面除非您登录，否则不允许，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:02:16.283

当我使用 jquery mobile 时，我遇到了同样的问题。

```
 If FormsAuthentication.Authenticate(strUsername, strPassword) Then
            FormsAuthentication.RedirectFromLoginPage(strUsername, False)
        Else
            ' show login error
            lblLoginError.Visible = True
        End If 
```

在我进行身份验证后，它会将我带到 default.aspx 页面，但该页面的 url 列出了返回 url 并且 css 无法正常工作。

我对此进行了评论（如下）并且它有效：

```
 <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

# .net - 无法覆盖访问权限低于基本方法的方法

> ID：11884163
> 
> 赞同：0
> 
> 时间：2012-08-09T13:07:54.170
> 
> 标签：.net, overriding, warnings, delphi-prism, oxygene

我几乎完成了为 .NET 环境迁移我的软件的工作。现在我正在检查所有警告并清理它们。然后，我遇到了这个问题。

这是我的课：

```
 TColorObj = class
   value:double;
   thecolor:Color;
   Constructor;
   method ReadColor(bdr:BinaryReader);
   method WriteColor(bdw:BinaryWriter);
   method Clone:TColorObj;
   method ToString:String; Override;  <<<<----this method is raising error.
 end; 
```

错误是“**无法覆盖访问权限低于基本方法的方法**。” 但是，如果我删除关键字**Override**，它会引发一条警告消息，“ToString”隐藏了一个父方法。” TColorObj 类不是从任何基类继承的，如您所见。

那么，我是否将 TColorObj 类公开？

任何帮助或提示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:12:01.100

您需要`ToString`在可见性中公开该方法，这就是它在`TObject`. 您不能将其从“公共”移动到后代中较低的可见性。

```
TColorObj = class
   value:double;
   thecolor:Color;
   Constructor;
   method ReadColor(bdr:BinaryReader);
   method WriteColor(bdw:BinaryWriter);
public
   method Clone:TColorObj;
   method ToString:String; Override;  <<<<----this method is raising error.
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:18:07.193

每个类都继承自另一个类，如果您不指定从该类继承的`Object`类。

您正在覆盖公开的`ToString`方法，因此您还必须将覆盖的方法公开。

# javascript - 循环遍历 JSON 对象

> ID：11884164
> 
> 赞同：0
> 
> 时间：2012-08-09T13:07:56.310
> 
> 标签：javascript, jquery, raphael

使用 Chrome 开发者控制台，如果我这样做：

```
> target_url = "https://www.google.com/fusiontables/api/query?sql=SELECT%20*%20from%201g5DrXcdotCiO_yffkdW0zhuJk0a1i80SPvERHI8"

> $.getJSON(target_url + '&jsonCallback=?', function(data) { console.log(JSON.stringify(data)); }); 
```

这将返回 Fusion Table 中的所有航班信息，提取数据并在 javascript 中使用它的正确方法是什么，特别是我有兴趣将飞行路径绘制/动画到拉斐尔地图上？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:14:10.773

我想到了

```
$.getJSON(target_url + '&jsonCallback=?', function(data) { 
  console.log(data.table.cols);
  for(var i = 0; i < data.table.rows.length; i++) { 
    console.log(data.table.rows[i]);
  }
 }); 
```

谢谢

# c++ - 显式调用时，析构函数被调用两次

> ID：11884168
> 
> 赞同：23
> 
> 时间：2012-08-09T13:08:11.563
> 
> 标签：c++, destructor

我正在用这段代码在 C++ 中尝试析构函数：

```
#include <iostream>

struct temp
{
    ~temp() { std::cout << "Hello!" << std::endl; }
};

int main()
{
    temp t;
    t.~temp();
} 
```

我看到“你好！” 正在打印两次。析构函数的调用不应该释放对象并且当它超出范围时不应该再次调用析构函数？还是有其他概念？

（我不打算在实践中这样做。我只是想了解这里发生了什么。）

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-09T13:11:58.690

它发生是因为你告诉它发生。当变量超出范围时，*总是*调用自动变量的析构函数。你也叫它。总共是两个电话。

调用对象的析构函数并不会向 C++ 发出不再调用它的信号，因为在正常执行中不需要跟踪。

解决方案是永远不要手动调用你的析构函数。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-09T13:13:43.020

调用析构函数不会*释放*对象。

析构函数用于清理对象的内部，然后在析构函数完成后释放对象本身。

执行您正在执行的操作类似于您*可以*在一个对象上调用两次 delete 的方式是错误的，但这样做是错误的。

只有极少数情况下您想要手动调用析构函数，而这不是其中之一。当您使用placement new 在内存位置手动构造对象然后需要能够在不释放内存的情况下销毁它时，它确实存在。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T13:18:44.477

> 我看到“你好！” 正在打印两次。析构函数的调用不应该释放对象，并且当它超出范围时不应再次调用析构函数。还是有其他概念？

这是正确的。

> 我必须提到，我不打算在实践中这样做。我只是想了解这里发生了什么。

你已经调用了析构函数，准备一个要被销毁的对象。但这也是在对象超出范围时自动完成的，在它实际被解除分配之前。

要理解的是：如果你做的事情没有意义，那么坏事就会发生。所以不要做没有意义的事情。如果你手动调用析构函数，析构函数就会运行。除非析构函数确实做了一些有影响的事情，否则这对其他任何事情都没有影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T13:15:33.310

如果对象在堆栈中（如本例所示），则当对象超出范围时调用析构函数，或者在使用 new 运算符在堆上创建对象时使用 delete 显式销毁它时调用。

编译器或运行时系统无法跟踪析构函数是否由您手动调用。调用析构函数也是一种非常糟糕的做法。

如果您想在对象被删除之前进行一些手动清理（除了从内存中删除或从堆栈中删除的对象），您可以执行类似的操作。

在这里，您希望允许客户端手动清理内容，甚至在对象被删除之前。但除此之外，如果客户错过清理它，你会清理它。

```
class A
{
public:
    A() : _closed(false)
    {}

    ~A()
    {
        close();
    }

    void close()
    {
        if (! _closed()) {
            // close file handles etc.
        }
    }

private:
    bool _closed
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T13:18:52.257

您只需调用析构函数，实际上并没有释放任何内存（它是静态分配的）。如果你使用 new 然后 delete 析构函数只会被调用一次。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-09T21:00:55.030

析构函数不是对象的“破坏者”。它只是一个普通的函数，但在销毁之前由语言自动调用。

它的正式名称是析构函数，但如果我们称它为“Before-Destruction”函数可能会更容易理解。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-13T12:52:00.610

您不需要调用析构函数，尽管可以这样做。当不再使用对象时，编译器应该为您隐式运行析构函数。创建对象时，如果已使用类成员的特定和初始化值声明了该对象，则该对象将使用您的构造函数。当您不再需要您的对象时，您的析构函数将运行并删除成员变量声明及其值。这对于不使用自动垃圾收集的语言（如 C++）最有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-09T13:13:54.867

您实际上不应该调用解构器。运行时支持会为您调用它。因此，您调用它一次，运行时支持将第二次调用它。

这里有一些关于析构函数的思考：

[http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr380.htm](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr380.htm)

您可以显式调用解构器，但不建议这样做，通常它们会被隐式调用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-09T13:14:17.703

您不会显式调用析构函数，它会在变量超出范围时自动调用（在`return 0;`语句之后）。这就是为什么它被调用两次，你调用它，然后系统调用它。

如果您希望能够自己删除此类的实例，则需要明确地动态分配它：

```
temp *t = new temp;     
// do stuff with t...
delete t;    // do not forget this, or the constructor is not being called at all 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-13T13:37:44.780

可以调用类的析构函数：

1.  **明确地**

    当使用类的对象显式调用析构函数时，就像调用类的另一个成员函数一样。

2.  **隐式**

    当类的对象超出范围或使用 new 运算符创建的对象使用 delete 运算符销毁时。

在您的示例程序中，您同时执行

```
int main()
{
  temp t;

  t.~temp(); //1\. Calling destructor explictly using the object `t`

  return 0;
} // 2\. object `t` goes out of scope. So destructor invoked implictly 
```

这就是你看到析构函数被调用两次的原因。

正如您所想的那样，析构函数将破坏由构造函数创建的资源。所以不应该显式调用析构函数，因为它会导致销毁已经销毁的资源，这可能是致命的。

# c# - 如何在 HLSL 中启用兼容模式？

> ID：11884171
> 
> 赞同：2
> 
> 时间：2012-08-09T13:08:14.893
> 
> 标签：c#, xna, hlsl

如何在 HLSL 中启用兼容模式？我正在使用 Visual Studio 和 xna。

我希望能够从像素着色器中更改全局变量，然后在通过像素着色器后从像素着色器中检索它们，但是我无法从像素着色器中更改全局变量而不会出现错误提示我他们是不变的，我必须启用兼容模式。

那么我该如何启用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:43:03.167

虽然我以前没有看到过这个错误，但我会冒险说你误解了它。

我很确定你想要做的事情是不可能的，因为像素着色器是并行运行多次的。哪个像素应该是设置要读取的全局变量的像素？

（在内部，这些全局变量映射到“常量寄存器”——这里的关键字是常量。它们是在您进行绘图调用时设置的，并且从着色器的角度来看是只读的。）

# android - 纹理仅显示为黑色

> ID：11884173
> 
> 赞同：2
> 
> 时间：2012-08-09T13:08:19.433
> 
> 标签：android, opengl-es, opengl-es-2.0, textures

注意：我现在已将此代码更新为工作表单，并在答案中提供了我尝试的所有内容。希望它可以帮助其他人解决同样的问题。

我的纹理显示为黑色（即没有纹理）。我在这里遇到了同样的问题，但找不到解决方案。我确定我错过了一些非常简单的东西（可能是订购），但无法弄清楚。

我像这样设置我的纹理（GLProgram.checkError 检查GL错误并记录它们——我在任何地方都没有错误）：

```
 /*Bitmap*/ bitmap = BitmapFactory.decodeResource( context.getResources(), 
        R.drawable.gears );

    int textures[] = new int[1];
    GLES20.glGenTextures( 1, textures, 0 );
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textures[0]);
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST);

    GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);
    GLProgram.checkError( "texImage2D" );

    texture = textures[0]; 
```

要绘制一个应该有纹理的正方形，我这样做：

```
 GLES20.glVertexAttribPointer(glProgram.hATex, 2, GLES20.GL_FLOAT, false, 
        2*SIZEOF_FLOAT, texBuffer.under);
    GLProgram.checkError( "hATex" );

    GLES20.glActiveTexture(GLES20.GL_TEXTURE0 );
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, texture);
    GLES20.glUniform1i(glProgram.hUTex, 0);
    GLProgram.checkError( "Uniform" );

    GLES20.glVertexAttribPointer( glProgram.hAttribPosition, COORDS_PER_VERTEX,
        GLES20.GL_FLOAT, false,
        vertexStride, vertexBuffer.under );
    GLProgram.checkError( "Vertex" );
    GLES20.glDrawArrays( GLES20.GL_TRIANGLE_FAN, 0, vertexBuffer.size/COORDS_PER_VERTEX );
    GLProgram.checkError( "draw" ); 
```

我的顶点着色器是：

```
precision mediump float;
attribute vec4 vPosition;
uniform mat4 mTransform;

attribute vec2 aTex;
varying mediump vec2 vTex;

void main() {
  gl_Position = mTransform * vPosition;
  vTex = aTex;
} 
```

我的片段着色器是：

```
precision mediump float;
uniform vec4 vColor;
uniform sampler2D uTex;
varying mediump vec2 vTex;

void main(void)
{
//gl_FragColor = vColor;
//testing vTex, and it is fine
//gl_FragColor = vec4( vTex[0], vTex[1], 0, 1.0 );
//so it must be uTex which is program
    gl_FragColor = texture2D(uTex,vTex);
} 
```

我留下了评论位以显示我检查的内容。我的`vTex`参数是正确的，因为该位会产生预期的红色/绿色扫描。所以我认为它一定是纹理本身。

此外，uTex、aTex 位于：

```
 hATex = GLES20.glGetAttribLocation( hProgram, "aTex" );
    checkError( "aTex" );
    hUTex = GLES20.glGetUniformLocation( hProgram, "uTex" );
    checkError( "uTex" ); 
```

我的纹理是 JPG 格式，大小为 64x64。我在加载后检查了一下，它的大小正确，并且确实具有像素颜色（随机倾倒一些非零）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:28:23.883

所呈现的代码现在可以工作了。我在尝试和评论时修改了它。我不能确定它实际上是从哪一步开始工作的，因为它以前没有工作过。以下是我在此过程中检查/仔细检查的一些事情——我认为它必须以某种方式结合起来：

1.  验证源图像是否为正方形且大小为 2 的幂
    *   非正方形的作品，只要在两个维度上都是 2 的幂
    *   只要 TEXTURE_WRAP 设置为 CLAMP_TO_EDGE，non-power 2 就可以工作
2.  将 Min/Mag 设置为最近的
3.  在设置期间和每次绘制中调用 bindTexture

这些是我尝试过的东西，现在又试了一次，似乎没有什么不同（也就是说，它可以用任何一种方式）：

1.  使用位图 options.inScaled = false （使用默认选项可以正常工作）
2.  将 texImage2d 放在 glTexParameter 函数之前/之后
3.  从 vTex 添加/删除 mediump（不匹配可以正常工作，可能是因为默认）
4.  不调用 glEnableVertexAttribArray （这会导致一个白框，所以这不是我的问题）
5.  改变顶点和纹理坐标的顺序（一旦其他事情正确，所有顺序都会起作用——纹理可能会倾斜，但确实会出现）
6.  更改资源格式 (JPG/PNG) (RGB/灰度)
7.  改变对象变换矩阵
8.  TEXTURE_WRAP 设置（在这种情况下不需要，没有）

在它不工作的情况下，错误是沉默的：对 glGetError 的调用返回正常并且 glGetProgramInfoLog 是空的。

# c# - 使用 LINQ 确定序列不包含任何元素

> ID：11884177
> 
> 赞同：33
> 
> 时间：2012-08-09T13:08:28.003
> 
> 标签：c#, .net, linq

> **可能重复：**
> [LINQ：最大还是默认？](https://stackoverflow.com/questions/341264/linq-max-or-default)

我有一些 LINQ 来过滤`DateTime`变量。

```
List<DateTime> lst1 = new List<DateTime>();

 //.... add DataTime here

var d = lst1.Where(q => q <= DateTime.Now).Max(); 
```

**如果我没有匹配的项目，则会发生异常。**

我需要清空`d`，或者至少`null`我不需要这里的异常。

我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-09T13:14:05.320

尝试

```
var d = lst1.Where(q => q <= DateTime.Now).DefaultIfEmpty().Max(); 
```

`DateTime.MinValue`如果没有匹配项，您的结果现在将包含

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T13:29:42.010

如果源没有任何元素，Max() 将引发 ArgumentNullException。您可以编写一个扩展方法来检查这一点，如果没有任何元素，则返回 null（或任何您想要的）。

```
public static Nullable<DateTime> MaxOrNull(this IEnumerable<DateTime> source)
{
    if (source.Count() == 0)
        return null;
    else
        return source.Max();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:30:10.057

我喜欢：

```
var d = lst1.Where(q => q <= DateTime.Now).OrderByDescending(q => q.DateField).FirstOrDefault(); 
```

如果列表为空，这将返回 null。

# sharepoint - 获取网站所有列表的正确方法是什么

> ID：11884178
> 
> 赞同：0
> 
> 时间：2012-08-09T13:08:35.670
> 
> 标签：sharepoint, sharepoint-2010

我需要获取我网站中使用的所有列表并呈现它们的项目。由于我不允许使用代码，因此我必须依赖 xlst 之类的东西。但是经过几天的搜索，我还没有提出解决方案。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:17:50.090

Alex 取决于您尝试使用客户端对象模型执行的操作。这使您无需在服务器本身上编写代码即可访问 SharePoint 对象。这确实需要编写一些代码，但场管理员通常不会介意它，因为它不会以任何方式影响 SharePoint。

javascript 对象模型可能会为您提供您想要的。

这是获取 SharePoint 网站中所有列表的链接

[http://msdn.microsoft.com/en-us/library/hh185009](http://msdn.microsoft.com/en-us/library/hh185009)

然后从列表中获取项目

[http://msdn.microsoft.com/en-us/library/hh185007](http://msdn.microsoft.com/en-us/library/hh185007)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T04:48:43.767

您可以使用 *.asmx Sharepoint 服务[SharePoint 2010 Web 服务](http://msdn.microsoft.com/en-us/library/ee705814)。来自 Visual Studio 的示例：[连接到 SharePoint Online Web 服务](http://blogs.msdn.com/b/sharepointdev/archive/2011/05/12/connecting-to-sharepoint-online-web-services.aspx) 和来自 Sharepoint Designer：[连接到 SharePoint Designer 2010 中的另一个库](http://blogs.microsoft.co.il/blogs/cizi/archive/2010/08/01/connect-to-another-library-in-sharepoint-designer-2010.aspx)

祝你好运！

# c++ - 无法将对象上的指针添加到集合中

> ID：11884183
> 
> 赞同：0
> 
> 时间：2012-08-09T13:08:59.587
> 
> 标签：c++, templates, stl, set

请帮帮我。

“对象.cpp”：

```
bool OBJECT::operator== (const OBJECT &object) const
{
    return *this == object;
}

bool OBJECT::operator< (const OBJECT &object) const
{
    return this->m_numberOfObject < object.m_numberOfObject;
} 
```

“其他_object.h”

```
class other_object{
...
set<OBJECT*>* m_imitatedObjects
... } 
```

“其他对象.cpp”

`m_imitatedObjects.insert(pointer on some instance of class OBJECT)`-

在运行时引发错误，因为我认为由于 cmp 函数没有正确定义。

怎么办，我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T13:10:47.527

```
bool OBJECT::operator== (const OBJECT &object) const
{
    return *this == object;
} 
```

该函数调用自身，导致[堆栈溢出](http://stackoverflow.com)。你应该用你想用来判断两个对象是否等价的任何逻辑替换这个函数。

此外，除非每个`OBJECT`都具有唯一`m_numberOfObject`值，否则您`operator<`不会创建严格的排序。（因为具有相同`m_numberOfObject`值但在其他方面不同的两个对象中的任何一个都不会小于另一个。）这可能会导致您`set`的工作方式与您的预期不同。

# python - python csv unicode'ascii'编解码器无法在位置 1 编码字符 u'\xf6'：序数不在范围内（128）

> ID：11884190
> 
> 赞同：42
> 
> 时间：2012-08-09T13:09:18.993
> 
> 标签：python, csv

我已经从 [python 网站][1] 复制了这个脚本这是另一个问题，但现在编码问题：

```
import sqlite3
import csv
import codecs
import cStringIO
import sys

class UTF8Recoder:
    """
    Iterator that reads an encoded stream and reencodes the input to UTF-8
    """
    def __init__(self, f, encoding):
        self.reader = codecs.getreader(encoding)(f)

    def __iter__(self):
        return self

    def next(self):
        return self.reader.next().encode("utf-8")

class UnicodeReader:
    """
    A CSV reader which will iterate over lines in the CSV file "f",
    which is encoded in the given encoding.
    """

    def __init__(self, f, dialect=csv.excel, encoding="utf-8", **kwds):
        f = UTF8Recoder(f, encoding)
        self.reader = csv.reader(f, dialect=dialect, **kwds)

    def next(self):
        row = self.reader.next()
        return [unicode(s, "utf-8") for s in row]

    def __iter__(self):
        return self

class UnicodeWriter:
    """
    A CSV writer which will write rows to CSV file "f",
    which is encoded in the given encoding.
    """

    def __init__(self, f, dialect=csv.excel, encoding="utf-8", **kwds):
        # Redirect output to a queue
        self.queue = cStringIO.StringIO()
        self.writer = csv.writer(self.queue, dialect=dialect, **kwds)
        self.stream = f
        self.encoder = codecs.getincrementalencoder(encoding)()

    def writerow(self, row):
        self.writer.writerow([s.encode("utf-8") for s in row])
        # Fetch UTF-8 output from the queue ...
        data = self.queue.getvalue()
        data = data.decode("utf-8")
        # ... and reencode it into the target encoding
        data = self.encoder.encode(data)
        # write to the target stream
        self.stream.write(data)
        # empty queue
        self.queue.truncate(0)

    def writerows(self, rows):
        for row in rows:
            self.writerow(row) 
```

这次编码问题，当我运行它时，它给了我这个错误：

```
Traceback (most recent call last):
  File "makeCSV.py", line 87, in <module>
    uW.writerow(d)
  File "makeCSV.py", line 54, in writerow
    self.writer.writerow([s.encode("utf-8") for s in row])
AttributeError: 'int' object has no attribute 'encode' 
```

然后我将所有整数转换为字符串，但这次我得到了这个错误：

```
Traceback (most recent call last):
  File "makeCSV.py", line 87, in <module>
    uW.writerow(d)
  File "makeCSV.py", line 54, in writerow
    self.writer.writerow([str(s).encode("utf-8") for s in row])
UnicodeEncodeError: 'ascii' codec can't encode character u'\xf6' in position 1: ordinal not in range(128) 
```

我已经在上面实现了处理 unicode 字符，但它给了我这样的错误。有什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-08-09T13:14:47.593

> 然后我将所有整数转换为字符串，

您将整数*和*字符串都转换为*字节字符串*。对于字符串，这将使用恰好是 ASCII 的默认字符编码，当您有非 ASCII 字符时，这将失败。你想要`unicode`而不是`str`.

```
self.writer.writerow([unicode(s).encode("utf-8") for s in row]) 
```

在调用该方法之前将所有内容转换为 unicode 可能会更好。该类是专门为解析 Unicode 字符串而设计的。它不是为支持其他数据类型而设计的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:20:33.940

从文档中：

*   [http://docs.python.org/library/stringio.html?highlight=cstringio#cStringIO.StringIO](http://docs.python.org/library/stringio.html?highlight=cstringio#cStringIO.StringIO)

> 与 StringIO 模块不同，该模块不能接受无法编码为纯 ASCII 字符串的 Unicode 字符串。

即只能存储 7 位干净的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T16:24:30.657

如果您使用的是 Python 2：

使编码为：**str(s.encode("utf-8"))** 即

```
def writerow(self, row):
    self.writer.writerow([str(s.encode("utf-8")) for s in row])
    # Fetch UTF-8 output from the queue ...
    data = self.queue.getvalue()
    data = data.decode("utf-8")
    # ... and reencode it into the target encoding
    data = self.encoder.encode(data)
    # write to the target stream
    self.stream.write(data)
    # empty queue
    self.queue.truncate(0) 
```

# r - 精算生存分析，分为区间

> ID：11884191
> 
> 赞同：4
> 
> 时间：2012-08-09T13:09:19.737
> 
> 标签：r, statistics, stata, spss, survival-analysis

我正在尝试在 R 中创建精算生存分析（我正在关注一些工作示例）。我认为最好的方法是使用`survival`包。所以像：

```
library(survival)
surv.test <- survfit(Surv(TIME,STATUS), data=test) 
```

但是，为了得到正确的答案，我需要将`TIME`变量划分为 365 天的间隔，我无法完全弄清楚如何做到这一点，以便它与给定的结果相匹配。

据我所知，函数中没有选项`survfit`可以做到这一点。我浏览了几个文档示例，但没有一个试图创建阶梯类型的情节（有一个`type='interval'`选项，但似乎做了一些不同的事情）。所以我想我需要在应用该功能之前重新组合我的数据`survival`？

有任何想法吗？

PS：在 SPSS 这将是`INTERVAL = THRU 10000 BY 365`；在Stata`intervals(365) ... connect(stairsteps)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:21:09.033

我猜您想将`TIME`变量划分为多个区间，因为您想绘制 Kaplan-Meier 曲线。在 R 中，这不是必需的，您可以在`survfit`对象上调用 plot 。例如，

```
s=survfit(Surv(futime, fustat)~rx, data=ovarian)
plot(s) 
```

![在此处输入图像描述](../Images/97215486f8c5a4f8783de326495a146a.png)

* * *

我想我更好地理解了你的问题。你得到一条粗黑线的原因是因为你有很多审查，并且`+`在有审查的每个点上都绘制了 a，你可以用 关闭它`mark.time=F`。（您可以在 中查看其他选项`?survival:::plot.survfit`）

但是，如果您仍想按年份汇总，只需将您的跟进时间除以 365，然后四舍五入即可。`ceiling`用于四舍五入。这是一个在不同时间级别聚合而不进行审查的示例。

```
par(mfrow=c(1,3))
plot(survfit(Surv(ceiling(futime), fustat)~rx, data=ovarian),col=c('blue','red'),main='Day',mark.time=F)
plot(survfit(Surv(ceiling(futime/30), fustat)~rx, data=ovarian),col=c('blue','red'),main='Month',mark.time=F)
plot(survfit(Surv(ceiling(futime/365), fustat)~rx, data=ovarian),col=c('blue','red'),main='Year',mark.time=F)
par(mfrow=c(1,1)) 
```

但我认为绘制没有审查符号的 Kaplan-Meier 看起来会非常好，并提供更多洞察力。

![在此处输入图像描述](../Images/17ea196ba6ba1b7e1ec688faf179d931.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:07:32.133

万岁，我现在应该可以发布图片了：

1）这就是 R 基本生存图目前的样子 ![在此处输入图像描述](../Images/af0dde250b62986881b89c960e5e7d61.png)

2）这就是它的样子（SPSS示例） ![在此处输入图像描述](../Images/e61803ad417c992f30973cba2add9f5a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:11:00.843

这正是我所缺少的！谢谢！

![在此处输入图像描述](../Images/784c90d4315d071b96db821df9899ffd.png)

**解决方案：**

```
vas.surv <- survfit(Surv(ceiling(TIME/365), STATUS)~1, conf.type="none", data=vasectomy)
plot(vas.surv, ylim=c(0.975,1), mark.time=F, xlab="Years", ylab="Cumulative Survival") 
```

一个不错的方法是在 x 轴上显示日期而不是年份（如在 SPSS 中）示例，但我对此并不太在意。

# android - java.lang.OutOfMemoryError：位图大小超过 ListView 中的 VM 预算和延迟加载图像

> ID：11884192
> 
> 赞同：5
> 
> 时间：2012-08-09T13:09:23.597
> 
> 标签：android, listview, bitmap, android-listview, out-of-memory

我有一个列表视图，它可能在无限滚动时加载了无限项。

列表视图中的每个项目都有一个或两个我延迟加载的图像。

一切都很好，但是当我滚动很长时间时，它会在 log cat 中崩溃

```
 08-07 15:26:25.231: E/AndroidRuntime(30979): FATAL EXCEPTION: Thread-60
08-07 15:26:25.231: E/AndroidRuntime(30979): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
08-07 15:26:25.231: E/AndroidRuntime(30979):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
08-07 15:26:25.231: E/AndroidRuntime(30979):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
08-07 15:26:25.231: E/AndroidRuntime(30979):    at com.test.android.helper.LazyImageLoader.decodeFile(LazyImageLoader.java:171)
08-07 15:26:25.231: E/AndroidRuntime(30979):    at com.test.android.helper.LazyImageLoader.getBitmap(LazyImageLoader.java:112)
08-07 15:26:25.231: E/AndroidRuntime(30979):    at com.test.android.helper.LazyImageLoader.access$2(LazyImageLoader.java:106)
08-07 15:26:25.231: E/AndroidRuntime(30979):    at com.test.android.helper.LazyImageLoader$ImageLoader.run(LazyImageLoader.java:197) 
```

在我的惰性图像加载器中，我将位图存储在`WeakHashMap`. 所以垃圾收集器应该收集位图对吗？

我的惰性图像加载器的工作原理是这样的。

`displayImage()`我使用 url 和对 imageview 的引用从我的适配器调用

```
public void displayImage(String url, ImageView imageView, int defaultImageResourceId){

        latestImageMetaData.put(imageView, url);

        if(weakhashmapcache.containsKey(url)){
            imageView.setImageBitmap(weakhashmapcache.get(url));
        }
        else{
            enqueueImage(url, imageView, defaultImageResourceId);
            imageView.setImageResource(defaultImageResourceId);
        }
    } 
```

所以如果我在缓存中找到图像，我直接设置它，否则我用 function 将它排队`enqueueImage()`。

private void enqueueImage(String url, ImageView imageView, int defaultImageResourceId){ Image image = new Image(url, imageView, defaultImageResourceId); 下载队列.add（图像）；// downloadQueue 是一个等待添加图像的阻塞队列 //如果队列即将满，则删除队列中前面的元素，因为它们无论如何都不可见 Iterator iterator = downloadQueue.iterator(); while(iterator.hasNext() && downloadQueue.remainingCapacity() < 80){ downloadQueue.remove(iterator.next()); } }

```
And my image loader thread is this - 

class ImageLoader extends Thread {

    public void run() {
        Image firstImageInQueue;

        try {
            while((firstImageInQueue = downloadQueue.take()) != SHUTDOWN_TOKEN)
            {
                Bitmap imageBitmap = getBitmap(firstImageInQueue.url);

                if(imageBitmap != null){
                    weakhashmap.put(firstImageInQueue.url, imageBitmap);
                    BitmapDisplayer displayer = new BitmapDisplayer(imageBitmap, firstImageInQueue.imageView, firstImageInQueue.url, firstImageInQueue.defaultImageResourceId);
                    Activity activity = (Activity)firstImageInQueue.imageView.getContext();
                    activity.runOnUiThread(displayer);
                }
            }
        }
        catch (InterruptedException e) {
            e.printStackTrace();
        }
        finally {
            imageLoaderTerminated = true;
        }
    } 
} 
```

`getBitmap()`只需从 url 缩放中获取图像并将其解码为 Bitmap 对象。`BitmapDisplayer`只是一个 Runnable，它在 UI 线程上将图像设置为 imageview。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:55:56.887

试试[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

这是一个开源项目，他们有关于如何使用它的博客文章。我已经在几个项目中使用过它，即使在长长的列表中也没有问题。

享受！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:17:13.503

这是一场噩梦，经过日日夜夜的研究，这里有几点可能对其他人有用。

不要将所有位图存储在缓存中。保持它在磁盘缓存和内存缓存之间交换。您存储的位图数量可能取决于您通过调用获得的堆限制

`int memClass = ((ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE)) .getMemoryClass();`

我使用了一个[`LruCache`](http://developer.android.com/reference/android/util/LruCache.html)而不是`WeakHashMap`缓存。`LruCache`在支持包中可用。`WeakHashMap`用`LruCache`. _ Android 也有关于[缓存位图](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)的漂亮文档。

Jake Wharton's[`DiskLruCache`](https://github.com/JakeWharton/DiskLruCache)是管理磁盘缓存的好方法。

如果不需要，请不要下载巨大的位图。尝试获得足以满足您需要的尺寸。

使用 BitmapFactory.Options，您可以在图像质量方面做出一些权衡，以在内存缓存中保存更多图像。

如果您认为我们还有什么可以做的，请补充。

# python - Python在样条插值中保留点

> ID：11884195
> 
> 赞同：5
> 
> 时间：2012-08-09T13:09:32.880
> 
> 标签：python, numpy, interpolation, spline

我写了一个执行样条插值的代码：

```
x1 = [ 0., 13.99576991, 27.99153981, 41.98730972, 55.98307963, 69.97884954, 83.97461944, 97.97038935, 111.9661593, 125.9619292, 139.9576991, 153.953469 ]
y1 = [ 1., 0.88675318, 0.67899118, 0.50012243, 0.35737022, 0.27081293, 0.18486778, 0.11043095, 0.08582272, 0.04946131, 0.04285015, 0.02901567]

x = np.array(x1) 
y = np.array(y1)

# Interpolate the data using a cubic spline to "new_length" samples
new_length = 50
new_x = np.linspace(x.min(), x.max(), new_length)
new_y = sp.interpolate.interp1d(x, y, kind='cubic')(new_x) 
```

但是在生成的新数据集中 `new_x`，`new_y`去除了原始点，只保留了第一个和最后一个值。我想保留原来的观点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T13:32:06.093

是的，除了您传递给它的值（和）之外，`linspace`不会生成任何值。`x``x.min()``x.max()`

我没有一个很好的快速答案，但这是一种方法：

```
# Interpolate the data using a cubic spline to "new_length" samples
new_length = 50
interpolated_x = np.linspace(x.min(), x.max(), new_length - len(x) + 2)
new_x = np.sort(np.append(interpolated_x, x[1:-1]))  # include the original points
new_y = sp.interpolate.interp1d(x, y, kind='cubic')(new_x) 
```

此代码使用：

*   `np.linspace`根据需要创造尽可能多的额外积分
*   `np.append`将额外点的数组与原始点结合起来`x`
*   `np.sort`将组合数组按顺序排列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-22T08:54:56.947

如果您的数据是统一的，这是另一种方式：

```
import numpy as np

def interpolate_add(x_add,num):
    x_add_ls=[]
    for i in range(x_add.shape[0]-1):
        x_add_ls += (np.linspace(x_add[i],x_add[i+1],num+2)[0:-1]).tolist()
    x_add_ls.append(x[-1])    
    return np.array(x_add_ls)

x=np.linspace(1,5,5)
print(x)
print(interpolate_add(x,3)) 
```

它打印：</p>

**[1。2\. 3\. 4\. 5.]**

**[1。1.5 2\. 2.5 3\. 3.5 4\. 4.5 5.]**

在代码中，`interpolate_add`有两个参数

*   `x_add`是你的数据（numpy.array）。数据形状为 (N,)

*   `num`是两个原始数据之间的插入数据编号。

例如，如果您的数据是`array([1, 3])`并且`num`是 1，则结果是`array([1, 2, 3])`

# c# - 指数超出范围。必须为非负数且小于 datagridview 中 collection.parameter 名称的大小？

> ID：11884198
> 
> 赞同：1
> 
> 时间：2012-08-09T13:09:45.467
> 
> 标签：c#, .net, datagridview

我在页面加载事件中动态地在 datagridview 中添加数据。但我收到一个错误，指出索引超出范围。（“必须为非负数且小于 datagridview 中 collection.parameter 名称的大小。”）

以下是代码：

```
 dataGridView1.Rows.Add();

        dataGridView1.Rows[0].Cells[0].Value = "Basic";
        dataGridView1.Rows[0].Cells[1].Value = "Basic";
        dataGridView1.Rows[1].Cells[0].Value = "PDALLW";
        dataGridView1.Rows[1].Cells[1].Value = "Professional Development Allow";
        dataGridView1.Rows[2].Cells[0].Value = "BPAllw";
        dataGridView1.Rows[2].Cells[1].Value = "Business Promotion Allowance"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:29:06.520

调用`Add(3)`而不是`Add()`. 您还可以扩展它以在任何给定时间根据需要添加尽可能多的行。[MSDN 链接](http://msdn.microsoft.com/en-us/library/s426bkhx.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:11:26.220

您的网格没有行。您一定没有绑定它，或者您超出了它拥有的行数。

1.  确保在访问其行之前绑定网格。

2.  确保您不访问不存在的行索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:11:26.290

您似乎只添加了一行。因此，您只能访问第 0行。除非您创建三行，否则调用`dataGridView1.Rows[1]`和将失败。`dataGridView1.Rows[2]`

**解释：**

dataGridView1.Rows.Add();

这会向 DataGridView 添加一行。所以你有一个索引为 0 的行（行索引从 0 开始）。您可以像之前那样设置第 0 行的值：

```
dataGridView1.Rows[0].Cells[0].Value = "Basic"; 
```

但是然后您尝试将值设置为索引为 1 的行（第二行）：

```
dataGridView1.Rows[1].Cells[0].Value = "PDALLW"; 
```

这将失败，因为您只添加了一行（调用`Rows.Add`一次）。如果您想要三行，请`dataGridView1.Rows.Add();`在设置单元格值之前调用三次。

# ios - 我可以在 iOS 应用程序的文档目录中写入文件吗？

> ID：11884200
> 
> 赞同：2
> 
> 时间：2012-08-09T13:09:51.497
> 
> 标签：ios, cocoa-touch

我正在创建 iPad 应用程序来查看书籍，它是一种出版书籍。最终用户可以下载该书以在离线模式下查看。因此，我将整本书的内容（PNG 和 XML）写入应用程序的文档目录。图书内容大小大于500MB。由于内存大小，苹果商店会拒绝申请吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:15:22.227

您可以在其中写任何内容（文档目录）。您需要注意的唯一问题是在备份期间标记哪些内容不应同步到 iTunes/iCloud。那会让你被拒绝。

请查看 Apple 提供的此文档：http: [//developer.apple.com/library/ios/#qa/qa1719/_index.html](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)

基本思想是只有用户设置和创建的内容应该备份，任何可以再次下载的内容都不应该备份。

# javascript - jquery在asp.net中选择一个下拉列表控件

> ID：11884202
> 
> 赞同：0
> 
> 时间：2012-08-09T13:10:00.790
> 
> 标签：javascript, jquery, asp.net, user-controls

我正在使用 ASP.net 并有一个下拉控件。

```
 <asp:DropdownList runat="server" ID = "fieldReadOnlyContent" Enabled="false" class = "attribute"><asp:ListItem value = "0">False</asp:ListItem><asp:ListItem value = "1">True</asp:ListItem></asp:DropdownList> 
```

我想通过客户端控件 qith jquery 调整下拉控件。我得到了需要设置的值。

```
//d[3] will be either true or false.
$("#fieldReadOnlyContent").val(d[3]); 
```

上述尝试似乎没有将项目设置为正确启用。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:12:18.537

尝试这个：

```
$("#<%=fieldReadOnlyContent.ClientID%>").val(d[3]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:13:59.710

该项目未设置，因为`$("#fieldReadOnlyContent").val(d[3]);`将检查`value`.

对于您的情况

```
if(d[3]=='false'){
 $("#fieldReadOnlyContent").val('0');
}
else
{
 $("#fieldReadOnlyContent").val('1');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:11:43.517

`fieldReadOnlyContent`不一定是给客户端 HTML 元素的 ID。

您可以使用`ClientIDMode="Static"`服务器端来控制 .net4.0 ( [source](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx) ) 中的客户端 ID，或者`<%= fieldReadOnlyContent.ClientID %>`将客户端 ID 直接注入到 javascript 中。

# php - 如何在 NetBeans 的 java web 应用程序项目中运行 php

> ID：11884204
> 
> 赞同：2
> 
> 时间：2012-08-09T13:10:13.330
> 
> 标签：php, javascript, apache, tomcat, netbeans

我在 NetBeans 中从“文件-->新项目-->Java Web-->Web 应用程序”创建了一个 Java Web 应用程序。
我有Tomcat作为服务器。在我的计算机上，我可以在 NetBeans php 项目或 XAMPP 中毫无问题地运行 php。
但我想在 java web 应用程序项目中运行 php 命令。我尝试将此代码添加到 index.jsp 文件

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <?php echo 'php code here'; ?>
        <h1>Hello World!</h1>
    </body>
</html> 
```

**它不打印 'php code here' 字符串，而是打印 'Hello World!' 字符串**。
我尝试将文件名**index.jsp**重命名为**index.php**（并且还更改了 web.xml 文件中的名称）。但它仍然给我相同的输出

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:22:57.723

检查您的 Apache 配置 (httpd.conf)。在包含“AddType application/x-httpd-php .php”的行最后添加.jsp

```
AddType application/x-httpd-php .php .jsp 
```

以及您希望使用 PHP 解释的任何其他页面（.html、.htm 等）。

# c# - 温莎的通用装饰器

> ID：11884214
> 
> 赞同：0
> 
> 时间：2012-08-09T13:10:56.153
> 
> 标签：c#, .net, generics, castle-windsor

我试图弄清楚如何使用 Castle Windsor 注册以下装饰器场景。我有以下界面：

```
public interface ICalculate<T> where T : class 
{
   void Calculate(T value);
} 
```

还有几个实现，最后一个是装饰器。

```
public class FooCalculator : ICalculate<Foo> 
{
   public void Calculate(Foo value)
   {
       // do something here with the value..
   }
}

public class BarCalculator : ICalculate<Bar>
{
    public void Calculate(Bar value)
    {
       // do something else here....
    }
}

public class CalculatorDecorator<T> : ICalculate<T> where T : class
{
    private readonly ICalculate<T> _calculator;

    public CalculatorDecorator(ICalculate<T> calculator)
    {
         _calculator = calculator;
    }

    public void Calculate(T value)
    {
       // do for example some logging...
       _calculator.Calculate(value);
    }
} 
```

这是我的注册码

```
container.Register(Classes.FromAssembly()
                          .BasedOn(typeof(ICalculate<>))
                          .WithService.Base()); 
```

当我通过其通用接口请求其中一个实现时，我希望 Windsor 使用在构造函数中注入的请求实现来解析 CalculatorDecorator。

```
// I would like calculator to be CalculatorDecorator<Foo> in 
// this case but it is FooCalculator.
var calculator = container.Resolve<ICalculate<Foo>>();

// The same goes for this one...
var calculator = containr.Resolve<ICalculate<Bar>>(); 
```

提前致谢！

编辑：

如果我这样做，它会起作用

```
container.Register(Component.For<ICalculate<Foo>>()
                            .ImplementedBy<CalculatorDecorator<Foo>>(),
                   Component.For<ICalculate<Foo>>()
                            .ImplementedBy<FooCalculator>());

container.Register(Component.For<ICalculate<Bar>>()
                            .ImplementedBy<CalculatorDecorator<Bar>>(),
                   Component.For<ICalculate<Bar>>()
                            .ImplementedBy<BarCalculator>()); 
```

但如果可能的话，我更愿意注册所有组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:35:49.243

```
container.Register(AllTypes.FromAssembly()
                      .BasedOn(typeof(ICalculate<>))
                      .WithService.Base()); 
```

你试过这个吗？我们有类似的情况，这对我们有用。

**更新**

我认为这是不可能的，因为您将创建一个循环依赖项。我确实让它像下面这样工作：

登记

```
 var container = new WindsorContainer();

        container.Register(Component.For(typeof(IDecorator<>)).ImplementedBy(typeof(CalculatorDecorator<>)));

        container.Register(AllTypes.FromThisAssembly()
                               .BasedOn(typeof (ICalculate<>))
                               .WithService.Base());

        var fc = container.Resolve<IDecorator<Foo>>();
        var bc = container.Resolve<IDecorator<Bar>>(); 
```

接口：

```
 public interface ICalculate<T> where T : class
{
    void Calculate(T value);
}

public interface IDecorator<T> : ICalculate<T> where T : class
{

} 
```

执行：

```
public class FooCalculator : ICalculate<Foo>
{
    public void Calculate(Foo value)
    {
        // do something here with the value..
    }
}

public class BarCalculator : ICalculate<Bar>
{
    public void Calculate(Bar value)
    {
        // do something else here....
    }
}

public class CalculatorDecorator<T>: IDecorator<T> where T : class
{
    private readonly ICalculate<T> _calculator;

    public CalculatorDecorator(ICalculate<T> calculator)
    {
        _calculator = calculator;
    }

    public void Calculate(T value)
    {
        // do for example some logging...
        _calculator.Calculate(value);
    }
} 
```

# javascript - 如何将 UTC 日期时间（字符串）转换为访客时区？

> ID：11884218
> 
> 赞同：0
> 
> 时间：2012-08-09T13:11:09.207
> 
> 标签：javascript, datetime, timezone

如何将这样的日期：（`2012-07-16 01:00:00 +00`它在`UTC +00:00`时区中）转换为 Javascript 中的访问者时区，确保正确处理夏令时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:16:21.730

将其分成几部分并使用[Date.UTC](http://es5.github.com/#x15.9.4.3)，例如

```
function fromUTC(s) {
  s = s.split(/[-: ]/g);
  return new Date(Date.UTC(+s[0], --s[1], +s[2], +s[3], +s[4], +s[5], 0));
}

var s = '2012-07-16 01:00:00 +00';

alert(fromUTC(s)); 
```

# javascript - 从 chrome 或 firefox 中的调试控制台对 .js 文件运行 JSLint

> ID：11884224
> 
> 赞同：7
> 
> 时间：2012-08-09T13:11:24.680
> 
> 标签：javascript, json, parsing, jslint, javascript-debugger

是否可以`JSLint`通过在 chrome 或 firefox 中的调试/开发者控制台的标头中加载 JSLint 来在一个或多个 .js 文件上运行？

我想这样做的原因是我想在 in`console.log()`的解析中`JSLint`打印`JSON`，它在文档中说：

```
// You can obtain the parse tree that JSLint constructed while parsing. The
// latest tree is kept in JSLINT.tree. A nice stringication can be produced
// with
//     JSON.stringify(JSLINT.tree, [
//         'string',  'arity', 'name',  'first',
//         'second', 'third', 'block', 'else'
//     ], 4)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T19:07:04.423

您可以使用以下语法在 JavaScript 代码上运行 JSLint：

```
var code = "var a = 1 + 2;";
JSLINT(code); 
```

您可以打印问题中提到的语法树。

现在，在您的情况下，您需要从 JavaScript 文件中读取 JavaScript 源代码。您可以进行 AJAX 调用以将 JavaScript 文件的源代码读入变量。然后像上面那样调用 JSLINT 并传递该变量。使用 jQuery 的示例如下所示。

```
$(function() {
    // Include jslint.js
    $('<script src="http://localhost/yourapp/jslint.js">').appendTo("head");

    // Read JavaScript file contents into 'code'
    $.get('http://localhost/yourapp/somescript.js', function(code) {

        // Run JSLINT over code
            JSLINT(code);

        // Print the parse tree
        console.log(JSON.stringify(JSLINT.tree, [
                    'string',  'arity', 'name',  'first',
                    'second', 'third', 'block', 'else'
                    ], 4));
        });
}); 
```

根据您要实现的目标，独立的 JavaScript 控制台（例如 NodeJS）将是比浏览器控制台更好的选择。我猜 JSLint 存在 Node 包。但是，如果您想手动包含它，您可以简单地按照以下方式进行。

首先在 jslint.js 的末尾添加以下行

```
exports.JSLINT = JSLINT; 
```

然后在 mycode.js 中编写您的代码。

```
var fs = require("fs");
var jslint = require("./jslint.js");

fs.readFile("./test.js", function(err, code) {
    var source = code.toString('ascii');    

    jslint.JSLINT(source);

    console.log(JSON.stringify(jslint.JSLINT.tree, [
         'string',  'arity', 'name',  'first',
         'second', 'third', 'block', 'else'
        ], 4));
},"text"); 
```

然后从控制台运行您的代码：

```
node mycode.js 
```

# objective-c - 如何将 UIColor 转换为十六进制字符串？

> ID：11884227
> 
> 赞同：13
> 
> 时间：2012-08-09T13:11:31.240
> 
> 标签：objective-c, ios, hex, uicolor

我有一个项目，我需要将 UIColor 的 RGBA 值作为 8 个字符的十六进制字符串存储在数据库中。例如，[UIColor blueColor] 将是 @"0000FFFF"。我知道我可以像这样获得组件值：

```
CGFloat r,g,b,a;
[color getRed:&r green:&g blue: &b alpha: &a]; 
```

但我不知道如何从这些值转到十六进制字符串。我看过很多关于如何走另一条路的帖子，但对于这种转换没有任何作用。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-09T13:13:58.363

首先将您的浮点数转换为 int 值，然后使用以下格式进行格式化`stringWithFormat`：

```
 int r,g,b,a;

    r = (int)(255.0 * rFloat);
    g = (int)(255.0 * gFloat);
    b = (int)(255.0 * bFloat);
    a = (int)(255.0 * aFloat);

    [NSString stringWithFormat:@"%02x%02x%02x%02x", r, g, b, a]; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-21T21:41:14.847

就这样吧。返回带有颜色的十六进制值的**`NSString`**（例如）。`ffa5678`

```
- (NSString *)hexStringFromColor:(UIColor *)color
{
    const CGFloat *components = CGColorGetComponents(color.CGColor);

    CGFloat r = components[0];
    CGFloat g = components[1];
    CGFloat b = components[2];

    return [NSString stringWithFormat:@"%02lX%02lX%02lX",
            lroundf(r * 255),
            lroundf(g * 255),
            lroundf(b * 255)];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-12T15:04:32.177

Swift 4 通过扩展 UIColor 回答：

```
extension UIColor {
    var hexString: String {
        let colorRef = cgColor.components
        let r = colorRef?[0] ?? 0
        let g = colorRef?[1] ?? 0
        let b = ((colorRef?.count ?? 0) > 2 ? colorRef?[2] : g) ?? 0
        let a = cgColor.alpha

        var color = String(
            format: "#%02lX%02lX%02lX",
            lroundf(Float(r * 255)),
            lroundf(Float(g * 255)),
            lroundf(Float(b * 255))
        )
        if a < 1 {
            color += String(format: "%02lX", lroundf(Float(a)))
        }
        return color
    }
} 
```

# svn - svnserve 基于路径的授权设置

> ID：11884229
> 
> 赞同：0
> 
> 时间：2012-08-09T13:11:41.647
> 
> 标签：svn, authorization, authz

我正在使用在 Windows 7 下运行的 svnserve 1.4。我想通过使用 authz 文件来控制用户权限。

我想在根文件夹受读保护时授予子文件夹“rw”权限。我有一个大型存储库，并且只想为有限的文件子集授予“rw”权限。其他文件夹对用户是不可见的。

如果我使用以下配置，则不会显示任何内容：

```
[/root]
group1 =
[/root/A/new/Data]
group1 = rw
[/root/C/Ex/Files]
group1 = rw 
```

如果我改为使用：

```
[/]
group1 = rw 
```

然后所有文件夹都对“group1”可见，这不是我需要的。

另一种选择是做类似的事情

```
[root/B]
group1 =
[root/c]
group1 = 
```

对于 group1 不需要的所有子文件夹。不过，我宁愿不必这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:48:15.603

> 我正在使用在 Windows 7 下运行的 svnserve 1.4。

请注意，Subversion 1.4 不再受支持。您可能想要升级到版本 1.7.x 或 1.6.x。这些更高版本支持合并跟踪，这是一个不错的功能。升级现有存储库相当简单。

正如其他人指出的那样，如果您没有读取文件夹的权限，则您无权读取该文件夹的子文件夹。您可以对父文件夹设置*只读*权限，但如果您取消读取，用户将看不到您要授予读/写权限的子文件夹。

您可能需要重新考虑您的存储库布局。将存储库的读取权限授予一组选定的人并不罕见。例如，您可能不希望您的销售人员阅读您的源代码，但您确实希望您的开发人员阅读。我通常的做法是在每个存储库的基础上授予读/写权限，然后使用预提交挂钩来控制提交能力。有时一个目录包含您甚至不希望所有开发人员都看到的东西（例如您的私钥），并且只有一小部分开发人员应该看到。在这种情况下，我将其设为单独的存储库。

* * *

并不是所有的希望都消失了。您可以将您希望 group1 访问的目录放在靠近存储库根目录的另一个目录结构中。然后使用`svn:externals`您不希望 group1 中的用户看到的目录。

例如，像这样设置您的存储库：

```
[/root]
group1=

[/A/new/Data]
group1=rw

[C/Ex/Files]
group1=rw 
```

然后把一套`svn:externals`放在`/root`包括`A/new/Data`和`C/Ex/Files`结帐的时候`/root`。

**WORD 'O 警告**：使用时要小心`svn:externals`。如果您将它们指向分支或树干的尖端，`svn:external`即使您标记`/root`. 使用`svn:externals`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:56:41.357

请注意，如果用户没有文件夹的读取权限，则他们无法访问该文件夹中的*任何内容*。如果没有读取权限，Subversion 无法知道其中是否有需要检查权限的文件或文件夹。拒绝读取访问将递归地隐藏文件夹及其中的所有内容。

如果您发现自己需要这种类型的细粒度访问控制，我强烈建议您重新评估您的存储库布局。`/root`如果像您这样的嵌套资源`/root/A/new/Data`需要如此截然不同的权限，那么它们在 repo 中的关系很可能无法反映它们在现实中的关系。很多时候，这样的事情最终会被重新组织到单独的项目（甚至单独的存储库）中，而不是嵌套的文件夹中，因此大多数细粒度的访问控制工作都会大大简化。

如果您不能在不破坏构建脚本等的情况下重新组织您的存储库，那么您可能需要考虑使用 Subversion 的`svn:externals`属性。您可以将 的内容移动`/root/A/new/Data`到单独的存储库中，并授予 group1 对其的完全访问权限。然后，您可以使用`svn:externals`将新的存储库路径拉入`/root`相同文件夹名称下的文件夹中，以便那些有权访问的人`/root`在执行时看到相同的内容`svn checkout`。当子文件夹的内容类似于由外部团队提供的库时，这种工作流程很有用。您需要让图书馆团队访问图书馆代码（他们可以通过直接访问图书馆的存储库来获得），但他们不需要访问您的其余代码。

# eclipse - 无法在 Eclipse 上使用 egit 从 GitHub 获取最新提交

> ID：11884234
> 
> 赞同：1
> 
> 时间：2012-08-09T13:11:55.553
> 
> 标签：eclipse, git, github, egit

我成功地从一台 PC 提交了一些更改并推送到 GitHub。然后，我在另一台 PC 上的 Eclipse 中从上游获取`egit`，但无法获取任何内容。我可以在同步视图 [team-advanced-synchronize-fetch_head] 中看到更改。这里出了什么问题？

您可以[在 GitHub 上查看我的存储库](https://github.com/fxbird/Data-Scrapping-Lib)，以及[最近的提交](https://github.com/fxbird/Data-Scrapping-Lib/commit/94fbcb9439ac69b2d5281552d6f4124948142181)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:51:33.497

你知道 fetch 和 pull 之间的区别吗？当您获取时，您的本地 PC 仅“知道”远程更改，但尚未将它们合并到您的本地代码中。因此，您要么想要获取然后合并，要么只想拉取（它确实获取并合并在一起）。

# javascript - 根据公式和其他单元格中的值计算单元格值

> ID：11884238
> 
> 赞同：1
> 
> 时间：2012-08-09T13:12:01.693
> 
> 标签：javascript, jquery, html

我在 HTML 文件中有一个表格，我想根据其他单元格的值和一个单元格值作为公式来计算一个单元格的值。看看这张照片：

![我的表计算](../Images/658b0ae8422fa7cdc24e7eb71803187a.png)

在我的表格中，我在三列中有 1900 个比率和三个因子。如何根据各自的公式列值计算结果列值？

**注意：**我只在公式中使用`*`、`/`、`+`和`-`。此外，该表有一个 ID ( `ratiotable`)，但`<tr>`和`<td>`没有分配给它们的任何 ID 或类名。

如果您知道另一个网页做了类似的事情，请让我看看这个。

非常感谢你。

**编辑：** HTML 代码是这样的。注意，我剪掉了一些行。实际行数为 1900：

```
<table>
<thead>
    <tr>
        <th>Ratio Name</th>
        <th>Factor1</th>
        <th>Factor2</th>
        <th>Factor3</th>
        <th>Formula</th>
        <th>Result</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>Name1</td>
        <td>22</td>
        <td>11</td>
        <td></td>
        <td>Factor1/Factor2</td>
        <td></td>
    </tr>    
    <tr>
        <td>Name2</td>
        <td>22</td>
        <td>33</td>
        <td>11</td>
        <td>Factor1/Factor2*Factor3</td>
        <td></td>
    </tr>  
    <tr>
        <td>Name1</td>
        <td>12</td>
        <td></td>
        <td>4</td>
        <td>(Factor1+Factor2)/Factor3</td>
        <td></td>
    </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:29:55.473

这是一个非常有趣的挑战。我在[这里整理了一个小 JSFiddle](http://jsfiddle.net/chris27/tTfmg/6/) ，可以按照您的描述进行操作。它本质上是用对应的值替换公式的字符串部分，然后评估结果。希望这会有所帮助！

**我的标记**

```
<table>
    <thead>
        <tr>
            <th>Ratio Name</th>
            <th>Factor1</th>
            <th>Factor2</th>
            <th>Factor3</th>
            <th>Formula</th>
            <th>Result</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Name1</td>
            <td>22</td>
            <td>11</td>
            <td></td>
            <td>Factor1/Factor2</td>
            <td></td>
        </tr>    
        <tr>
            <td>Name2</td>
            <td>22</td>
            <td>33</td>
            <td>11</td>
            <td>Factor1/Factor2*Factor3</td>
            <td></td>
        </tr>  
        <tr>
            <td>Name1</td>
            <td>12</td>
            <td></td>
            <td>4</td>
            <td>(Factor1+Factor2)/Factor3</td>
            <td></td>
        </tr>
    </tbody>
</table> 
```

我的 **JavaScript**

```
$(function() {
    $('tbody tr').each(function() {
        var $this = $(this),
            f1 = $this.find('td').eq(1).text() || 0,
            f2 = $this.find('td').eq(2).text() || 0,
            f3 = $this.find('td').eq(3).text() || 0,
            formula = $this.find('td').eq(4).text(),
            resultTd = $this.find('td').last();

       formula = formula.replace('Factor1',f1)
                        .replace('Factor2',f2)
                        .replace('Factor3',f3);

        resultTd.text(eval(formula));
    });
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T13:19:09.283

遍历所有行并使用 javascript eval() 函数

```
function cellValue(x,y){
    return $('#ratiotable').find('tr:eq('+(y+1)+')>td:eq('+(x+1)+')').text();    
}

function setCellValue(x,y,s){
    $('#ratiotable').find('tr:eq('+(y+1)+')>td:eq('+(x+1)+')').text(s);    
}

$(function(){
    $.each($('#ratiotable tr'),function(i,tr){
        var Factor1 = parseInt(cellValue(0,i));
        var Factor2 = parseInt(cellValue(1,i));
        var Factor3 = parseInt(cellValue(2,i));
        var Formula = $.trim(cellValue(3,i));
        var Result = eval(Formula);
        setCellValue(4,i,Result);
    });    
}); 
```

像[这样](http://jsfiddle.net/unloco/L6fRj/1/)

# ruby-on-rails - Rails：如何将对象与 form_tag 的 text_area_tag 一起使用？

> ID：11884240
> 
> 赞同：0
> 
> 时间：2012-08-09T13:12:05.447
> 
> 标签：ruby-on-rails, forms, object

```
<%= text_area_tag :body_html, "", :class =>"required mceEditor", :id=>"txaEditableContent" %> 
```

这是我的代码。我希望将此 text_area_tag 分配给一个对象（在我的情况下对象是注释），就像我们使用“form_for object”一样，以便 :body_html 在提交时直接进入 params[:note] 。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:17:09.627

您必须首先在控制器相应操作中设置 Note 实例：

```
@note = Note.new 
```

然后，在你看来，把这个表格：

```
<%= form_for @note do |f| %>
  <%= f.text_area :body_html, :class => "required mceEditor", :id => "txaEditableContent" %>
  <%= f.submit "Submit" %>
<% end %> 
```

现在，当您单击提交按钮时，您应该会根据需要获得正确的发布请求。

# c++ - 用 MinGW 配置 Eclipse 3.7？

> ID：11884243
> 
> 赞同：2
> 
> 时间：2012-08-09T13:12:09.677
> 
> 标签：c++, c, eclipse, mingw

我在 Windows 7 操作系统上有 eclipse helios 3.7 和 MinGW。Eclipse 没有 C/C++ 编译器，所以我需要用 MinGW 配置 Eclipse。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:50:34.120

你需要将MinGW\bin 路径添加到path 变量中，以便eclipse 可以找到它。

# java - Lucene 可以将任意对象附加（或至少跟踪）到文档吗？

> ID：11884248
> 
> 赞同：1
> 
> 时间：2012-08-09T13:12:21.130
> 
> 标签：java, lucene

我正在密切关注Lucene 3.6[教程。](http://www.lucenetutorial.com/lucene-in-5-minutes.html)

我能够在`Document`对象上创建和执行搜索，但我想取回用于创建`Document`s 的原始对象。不幸的是，Lucene 似乎正在序列化/反序列化`Document`s，所以我无法在它们之间创建查找映射。

**如何保持 Lucene 的`Document`s 和我`Object`的 s 之间的关系？是否有首选的 Lucene 方式来执行此操作？**

*我应该注意，本教程对我来说不是开箱即用的，我必须`IndexWriter.commit()`在创建/附加`Document`s 后添加一个调用，我还必须调用`IndexWriterConfig.setMaxBufferedDocs()`并`IndexWriterConfig.setRAMBufferSizeMB()`使用大数字来阻止 Lucene 在硬盘上查找.*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:25:17.783

首先，您需要对原始对象的唯一引用。如果您的对象是数据库中的行，您可能会使用主键，假设它是唯一的`ID`.

其次，在创建 searchable 时`Document`，只需添加一个字段，如

```
doc.add(new Field("id", object.getId().toString(), Field.Store.YES, Field.Index.NOT_ANALYZED)); 
```

您可以稍后从找到的文档中检索此字段并根据 id 检索原始文档（数据库条目）。

如果您可能有不同的文档类型，例如数据库条目和 PDF，只需以相同的方式保存文档类型，以便您以不同的方式处理不同的类型。

# c# - 使用 C# 搜索和替换文本文件中的值

> ID：11884249
> 
> 赞同：2
> 
> 时间：2012-08-09T13:12:34.817
> 
> 标签：c#, search, text, replace

我有一个特定格式的文本文件。首先是一个标识符，后跟三个空格和一个冒号。然后是这个标识符的值。

```
ID1   :Value1  
ID2   :Value2  
ID3   :Value3 
```

我需要做的是搜索例如`ID2 :`并`Value2`用新值替换`NewValue2`。有什么方法可以做到这一点？我需要解析的文件不会变得很大。最大的将是大约 150 行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:22:43.427

如果文件不是那么大，您可以执行 a`File.ReadAllLines`来获取所有行的集合，然后像这样替换您要查找的行

```
using System.IO;
using System.Linq;
using System.Collections.Generic;

List<string> lines = new List<string>(File.ReadAllLines("file"));
int lineIndex = lines.FindIndex(line => line.StartsWith("ID2   :"));
if (lineIndex != -1)
{
    lines[lineIndex] = "ID2   :NewValue2";
    File.WriteAllLines("file", lines);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T13:37:27.797

这是一个简单的解决方案，它还自动创建源文件的备份。

替换存储在一个`Dictionary`对象中。它们在线路的 ID 上键入，例如“ID2”，值是所需的字符串替换。只需`Add()`根据需要添加更多。

```
StreamWriter writer = null;
Dictionary<string, string> replacements = new Dictionary<string, string>();
replacements.Add("ID2", "NewValue2");
// ... further replacement entries ...

using (writer = File.CreateText("output.txt"))
{
    foreach (string line in File.ReadLines("input.txt"))
    {
        bool replacementMade = false;
        foreach (var replacement in replacements)
        {
            if (line.StartsWith(replacement.Key))
            {
                writer.WriteLine(string.Format("{0}   :{1}",
                    replacement.Key, replacement.Value));
                replacementMade = true;
                break;
            }
        }
        if (!replacementMade)
        {
            writer.WriteLine(line);
        }
    }
}

File.Replace("output.txt", "input.txt", "input.bak"); 
```

您只需将`input.txt`,`output.txt`和替换`input.bak`为源文件、目标文件和备份文件的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:23:35.563

通常，对于任何文本搜索和替换，我建议使用某种正则表达式工作，但如果这就是你所做的一切，那真的是矫枉过正。

我只会打开原始文件和一个临时文件；一次读一行，然后检查每一行是否有“ID2：”；如果找到它，请将替换字符串写入临时文件，否则，只需写入您阅读的内容。当您用完源时，关闭两者，删除原始文件，并将临时文件重命名为原始文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:29:39.920

像这样的东西应该工作。这很简单，不是最有效的事情，但对于小文件，它会很好：

```
private void setValue(string filePath, string key, string value)
{
    string[] lines= File.ReadAllLines(filePath);
    for(int x = 0; x < lines.Length; x++)
    {
        string[] fields = lines[x].Split(':');
        if (fields[0].TrimEnd() == key)
        {
            lines[x] = fields[0] + ':' + value;
            File.WriteAllLines(lines);
            break;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T14:14:44.053

您可以使用正则表达式并在 3 行代码中完成

```
string text = File.ReadAllText("sourcefile.txt");
text = Regex.Replace(text, @"(?i)(?<=^id2\s*?:\s*?)\w*?(?=\s*?$)", "NewValue2",
                     RegexOptions.Multiline);
File.WriteAllText("outputfile.txt", text); 
```

在正则表达式中，**(?i)(?<=^id2\s*?:\s*?)\w*?(?=\s*?$) 的**意思是，查找以*id2*开头且带有任意数量空格的任何内容before 和 after `:`，并一直替换以下字符串（任何字母数字字符，不包括标点符号）直到行尾。如果要包含标点符号，请替换**\w*?** 与**.*？**

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-09T13:24:52.067

您可以使用正则表达式来实现这一点。

```
Regex re = new Regex(@"^ID\d+   :Value(\d+)\s*$", RegexOptions.IgnoreCase | RegexOptions.Compiled);

List<string> lines = File.ReadAllLines("mytextfile");
foreach (string line in lines) {
    string replaced = re.Replace(target, processMatch);
    //Now do what you going to do with the value
}

string processMatch(Match m)
{
    var number = m.Groups[1];
    return String.Format("ID{0}   :NewValue{0}", number);
} 
```

# c# - 不同（）不起作用

> ID：11884255
> 
> 赞同：15
> 
> 时间：2012-08-09T13:12:49.863
> 
> 标签：c#, .net, linq, distinct

我有以下 linq 表达式：

```
AgentsFilter = new BindableCollection<NameValueGuid>((
    from firstEntry in FirstEntries
    select new NameValueGuid { 
        Name = firstEntry.Agent,
        Value = firstEntry.AgentId
    }).Distinct()
); 
```

但由于某种原因，AgentsFilter 集合中充满了重复项。我怎么了`Distinct()`？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-09T13:17:01.337

`Distinct`将使用`Equals`on 方法`NameValueGuid`查找重复项。如果您不覆盖`Equals`，那么它将检查引用。

您可以通过使用匿名类型添加额外的步骤来避免覆盖 Equals。匿名类型会自动覆盖 Equals 和 GetHashCode 以比较每个成员。对匿名类型执行不同的操作，然后将其投影到您的类上将解决问题。

```
from firstEntry in FirstEntries
select new
{ 
    Name = firstEntry.Agent,
    Value = firstEntry.AgentId
}).Distinct().Select(x => new NameValueGuid
{
    Name = x.Name,
    Value = x.Value
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T13:17:36.473

您可能没有提供 both`GetHashCode`和`Equals`on的实现`NameValueGuid`。

或者，如果这不可能，您可以将一个实例传递`IEqualityComparer<NameValueGuid>`给您的`Distinct`.

请参阅：http: [//msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-09T13:18:06.520

您需要定义在具有和属性`Distinct`的类的上下文中的含义。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)。`Name``Value`

尝试让您提供比较器的 Distinct 的重载。

例如：

```
AgentsFilter = new BindableCollection<NameValueGuid>((from firstEntry in FirstEntries
    select new NameValueGuid
    { 
        Name = firstEntry.Agent,
        Value = firstEntry.AgentId
    })
    .Distinct((nvg) => nvg.Value)
); 
```

或者，如果您有权访问 NameValueGuid 的代码定义，那么您可以覆盖`GetHashCode`并`Equals`视情况而定。再次，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-09T13:21:18.110

```
select new
{ 
    Name = firstEntry.Agent,
    Value = firstEntry.AgentId
})
.Distinct()
.Select(x => new NameValueGuid
{
    Name = x.Name,
    Value = x.Value
}); 
```

# javascript - angularjs从范围对象中获取价值

> ID：11884257
> 
> 赞同：0
> 
> 时间：2012-08-09T13:12:57.167
> 
> 标签：javascript, angularjs

我正在为我的结果做一个分页指令，我似乎无法克服这个问题。我有以下代码（咖啡脚本）：

```
window.pagination_services = angular.module("pagination_services", [])
    .directive('paginate', ->
        {
            restrict: 'E',
            replace: true,
            templateUrl: '../../assets/app/partials/services/pagination.html',
            scope: true,
            link: ($scope, $element, $attrs) ->
                console.log $scope.results
        }
    ) 
```

如您所见，我有一个 console.log ，`$scope.results`它返回：

```
e
    pagination: Object
        current_page: 1
        per_page: 20
        total_entries: 4097
        __proto__: Object
    sales: Array[20]
    __proto__: e 
```

我需要能够访问该分页对象的值。就像是：

```
$scope.results.pagination.current_page 
```

但是，无论我尝试什么，我都不确定。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:24:23.290

看起来您的指令取决于包含“结果”的控制器，并且您希望将其作为依赖项注入到该指令中。

假设控制器被称为 ResultsController

你可能想做类似的事情

```
.directive('paginate', ->
        {
            restrict: 'E',
            replace: true,
            require : '^ResultsController'
            templateUrl: '../../assets/app/partials/services/pagination.html',
            scope: true,
            link: ($scope, $element, $attrs) ->
                console.log $scope.results
        } 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:27:19.853

您可能得出了相同的结论……但是您可能应该在结果上创建一个监视[（请参阅范围文档）](http://docs.angularjs.org/api/ng.%24rootScope.Scope)并在访问之前检查新值。

# ios - 动态图标 iOS

> ID：11884260
> 
> 赞同：2
> 
> 时间：2012-08-09T13:13:03.703
> 
> 标签：ios, springboard

> **可能重复：**
> [每天更改图标](https://stackoverflow.com/questions/4038305/changing-icon-per-day)

如何制作动态图标？例如在日历中。每天，数字都会更改为当前。是否可以在我的应用程序中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:15:12.717

如果没有越狱，这目前是不可能的

# iphone - 为什么合成的 Getter 会导致发布？

> ID：11884264
> 
> 赞同：1
> 
> 时间：2012-08-09T13:13:10.707
> 
> 标签：iphone, objective-c, ipad, nsuserdefaults

根据 Instruments 的说法，我的对象`release`在这一行发送了一条消息：

`[currentDefaults setObject:self.myArray forKey:@"storedArray"]`

这会导致过度释放和崩溃。NSZombies 当 Profiled 发现这条线和保留计数问题时。

但为什么？合成的属性是这样的：

`@property (nonatomic, copy) NSArray*myArray;`

为什么顶部的行会导致保留计数发生变化？

这是崩溃后的回溯（上面提到的第 103 行是上面的行）：

```
(lldb) bt
* thread #20: tid = 0x3103, 0x01e31276 CoreFoundation`CFRetain + 22, stop reason =     EXC_BREAKPOINT (code=EXC_I386_BPT, subcode=0x0)
frame #0: 0x01e31276 CoreFoundation`CFRetain + 22
frame #1: 0x01eeca00 CoreFoundation`__CFDictionaryStandardRetainValue + 80
frame #2: 0x01e74e62 CoreFoundation`__CFBasicHashReplaceValue + 34
frame #3: 0x01e41964 CoreFoundation`CFBasicHashSetValue + 2628
frame #4: 0x01e40ee3 CoreFoundation`CFDictionarySetValue + 227
frame #5: 0x01e773b5 CoreFoundation`-[CFXPreferencesSource setValue:forKey:] + 85
frame #6: 0x01e8a81e CoreFoundation`-[CFXPreferencesPropertyListSource setValue:forKey:] + 110
frame #7: 0x01e8a72f CoreFoundation`_CFXPreferencesSetValue + 159
frame #8: 0x01e8a5b3 CoreFoundation`CFPreferencesSetAppValue + 51
frame #9: 0x01372ceb Foundation`-[NSUserDefaults(NSUserDefaults) setObject:forKey:] + 100
frame #10: 0x00003922 Ivory Bull Charts`__21-[SavedData saveData]_block_invoke_0 + 178 at SavedData.m:103
frame #11: 0x017a3330 libdispatch.dylib`_dispatch_call_block_and_release + 15
frame #12: 0x017a4439 libdispatch.dylib`_dispatch_worker_thread2 + 302
frame #13: 0x996a3b24 libsystem_c.dylib`_pthread_wqthread + 346
(lldb) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:28:08.417

坦率地说，只是猜测。

在您的回溯中有“CFBasicHashReplaceValue”。我的猜测是，您不仅要添加带有新键的对象，还要替换在此字典中使用相同键的现有对象。

该现有对象将从字典中删除并释放。在这种情况发生之前，现有对象可能已被过度释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T03:16:00.037

复制您的数组或字典并将它们存储在用户默认值中，而不是实例变量本身，并查看当您将相同的变量内容重新存储到用户默认值时是否可以防止保留问题。

# php - 热显示服务器间文件传输的进度条

> ID：11884274
> 
> 赞同：0
> 
> 时间：2012-08-09T13:13:46.850
> 
> 标签：php, javascript, file-upload, progress-bar, file-transfer

我正在开发一个 php 应用程序，我可以在其中上传压缩文件。

一旦压缩文件被上传，它应该被解压缩，并且所有这些文件都应该使用 REST Web 服务单独传输到另一台服务器。

但由于此功能发生在后台，我还想在浏览器中显示进度条，例如传输 30% 的第二个文件。

谁能建议如何实现这一目标？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:06:08.937

您是否尝试过使用：flush(); ob_flush();

for($i = 0; $i < 5; $i++){ echo "SOME TEXT HERE" flush() ob_flush() }

# ios - 从 MFMailComposeViewController 获取内容 ID

> ID：11884275
> 
> 赞同：2
> 
> 时间：2012-08-09T13:13:52.327
> 
> 标签：ios, uiimage, mfmailcomposeviewcontroller

我正在搜索如何将图像添加到邮件正文并发现很多问题，使用 MIME 并使用标准 MFMailComposeViewController 将图像添加到邮件正文是不可能的。

在这里：[https ://stackoverflow.com/a/1527833/456471](https://stackoverflow.com/a/1527833/456471)

但我知道 appstore 中的应用程序：http: [//itunes.apple.com/app/emoji-free/id444304133](http://itunes.apple.com/app/emoji-free/id444304133)

此应用程序使用标准邮件客户端：

```
X-Mailer: iPhone Mail (9B206) 
```

和 MIME：

```
 --Apple-Mail-FEB04051-AF80-474D-BC69-1A83514A008C
Content-Transfer-Encoding: 7bit
Content-Type: text/html;
    charset=utf-8

<html><head></head><body bgcolor="#FFFFFF"><div></div><div><br><a href="http://itunes.apple.com/app/emoji-free/id444304133?partnerId=30&amp;siteID=LjQr0YBXPSs">Brought to you by the Emoji app</a></div><div><br><br><img src="cid:5A2B705A-7ACB-438B-996F-FAEA8E92B28B" id="5A2B705A-7ACB-438B-996F-FAEA8E92B28B"></div><div><br><br>Best regards<div>Danil</div></div></body></html>
--Apple-Mail-FEB04051-AF80-474D-BC69-1A83514A008C
Content-Disposition: inline;
    filename=emoji.png
Content-Id: <5A2B705A-7ACB-438B-996F-FAEA8E92B28B>
Content-Type: image/png;
    name=emoji.png
Content-Transfer-Encoding: base64 
```

有什么建议吗？

# sql - sql - 根据 Deisgnation 增加薪水

> ID：11884277
> 
> 赞同：0
> 
> 时间：2012-08-09T13:13:55.140
> 
> 标签：sql, oracle

在我的应用程序中，我需要具有以下条件的查询。

1.  如果员工是实习生（A），则增加 1000 美元
2.  如果员工是机械师（B），则增加 2000 美元
3.  如果员工是工程师（C），则增加 3000 美元
4.  如果员工是经理（D），则增加 5000 美元

我有以下列的表格

*   Emploee_ID
*   员工姓名
*   Emloyee_Salary_per_Month
*   Employee_Salary_per_annum
*   Emploee_designation（A、B、C 或 D）

谁能告诉我如何为这种情况编写一个 sql 查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T13:15:48.730

```
update employee
set Emloyee_Salary_per_Month = Emloyee_Salary_per_Month +
                               case when Emploee_designation = 'A'
                                    then 1000
                                    when Emploee_designation = 'B'
                                    then 2000
                                    when Emploee_designation = 'C'
                                    then 3000
                                    when Emploee_designation = 'D'
                                    then 5000
                                    else 0
                               end 
```

# jquery - 用ajax加载一个框架

> ID：11884278
> 
> 赞同：1
> 
> 时间：2012-08-09T13:13:55.497
> 
> 标签：jquery, ajax, load

我想用ajax加载html。但我有问题。当您单击按钮时。我用 jquery 加载，容器中的 html。容器是 .project-detail。我希望容器从上到下都是动画的。但是问题。我第一次点击按钮。它不工作。当我再次单击时，它正在工作。我错了什么？

```
function projectDetails() {
    var button = $(".list-portfolio"),
        slide = $(".project-detail");

    button.click(function(e){
        e.preventDefault();

        $(".project-detail").load("includes/ruimzicht.html");

        var height = $(".project-detail .column").outerHeight();
        slide.animate({height: height},600);

        $(".project-detail .column").css({ opacity: 0.5 });
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:18:09.540

您需要等到 ajax 加载内容。我认为这段代码应该可以工作，

```
function projectDetails() {
    var button = $(".list-portfolio"),
        slide = $(".project-detail");

    button.click(function(e){
        e.preventDefault();

        $(".project-detail").load("includes/ruimzicht.html", function() {
            var height = $(".project-detail .column").outerHeight();
            slide.animate({height: height},600);

            $(".project-detail .column").css({ opacity: 0.5 });
        });        
    });
} 
```

# xml - Actionscript 2 读取 XML

> ID：11884285
> 
> 赞同：0
> 
> 时间：2012-08-09T13:14:04.483
> 
> 标签：xml, flash, actionscript-2

我在文件夹“musics”中创建了一个名为“stage1.txt”的 XML 文件。XML 文件是：

```
<music>
    <speed>10</speed>
    <time>
        <note>1</note>
        <note>12</note>
        <note>32</note>
        <note>41</note>
    </time>
    <where>
        <lane>3</lane>
        <lane>2</lane>
        <lane>1</lane>
        <lane>4</lane>
    </where>
</music> 
```

然后在 flash 文件中，我使用以下代码调用 XML 文件：

然后在闪存文件中，我使用以下代码获取数据。

```
var myXML:XML = new XML();
myXML.ignoreWhite=true;
myXML.load("musics/stage"+_global.stages+".xml");
var temp = 0, temp2 = 0;
myXML.onLoad = function(success){
if (success){
trace (myXML);
}
} 
```

直到这里它工作得很好。但是，我想回忆一下 XML 文件的第一个值，即“速度”。我尝试使用此代码：

```
var speed = myXML.firstChild.firstChild.nodeValue; 
```

但它似乎不起作用。尝试了其他类似的东西：

```
myXML.firstChild.childNodes[0].nodeValue 
```

但也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:52:15.053

在其中添加一个额外的 firstChild。我不太确定为什么，但似乎解析器将文档作为一个整体处理为一个单独的级别。

当事情没有解决时，找到你需要的东西的最好方法是跟踪并查看它包含的内容。所以从 xml 对象 ('trace(myXML)') 开始，然后从那里遍历 'trace(myXML.firstChild)' -> 'trace(myXML.firstChild.firstChild)' -> 等，直到找到你需要的信息.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:49:40.757

您应该使用第三方库将 XML 转换为 Object - 您可以使用 Greensock 的[XMLParser](http://www.greensock.com/xmlparseras2/) - 有一个简短的教程和示例代码。

您的代码可能如下所示

```
import gs.dataTransfer.XMLParser;
XMLParser.load("musics/stage"+_global.stages+".xml", onFinish);
function onFinish($success:Boolean, $results:Object, $xml:XML):Void {
    if ($success) {
        trace("The speed is: "+$results.speed[0].nodeValue);1

    }
} 
```

因此，您可以以更方便（和健壮）的方式引用 XML 的节点：`myMXL.speed[0].nodeValue`.

以您尝试的方式引用节点是非常糟糕的做法。如果 XML 更改，您的代码将中断，这很糟糕......

# android - 旋转手机时，在选项卡（ActionBar）内调用了两次 onCreateView 片段

> ID：11884290
> 
> 赞同：2
> 
> 时间：2012-08-09T13:14:08.910
> 
> 标签：android, android-actionbar, android-tabs

当我旋转手机时，这个方法被调用了两次......实际上第二次 savedInstanceState 为空......这是正常行为吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-09T13:21:33.197

当设备方向改变时，活动完全重新创建，是的，这是正常行为。使用已保存的实例来保留您不希望重新查询的任何内容数据，例如远程服务调用或数据库调用。这样，您可以节省用户数据成本并更快地重新创建页面。

# big-o - 合并排序时间复杂度与我的算法。大O

> ID：11884293
> 
> 赞同：1
> 
> 时间：2012-08-09T13:14:17.130
> 
> 标签：big-o, analysis, asymptotic-complexity

这是我试图分析的算法（见下文）。我不明白为什么 `O(n)`当合并排序具有时间复杂度时`O(n logn)`，它们似乎都在做同样的事情。

那么两者都具有相同的 j 时间复杂度，如果您将 j 保留为行，则`2^j X c(n/2^j)`=`cn`并且它们的运行时间均为`log n`，其中 n 是元素的数量。

```
Algorithm: BinarySum(A, i, n)
Input: An array A and integers i and n.
Output: The sum of the n integers in A starting at index i.
if n = 1 then
return A[i]
return BinarySum(A, i, [n/2] ) + BinarySum(A, i + [n/2], [n/2]) 
```

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:40:35.243

您正在处理数组的每个成员的恒定时间。不管你怎么做，最终的复杂度都是 O(n)。顺便说一下，如果你用纸笔法做一个简单的例子，你会发现实际上你是按照它们在数组中出现的顺序来调用数组的元素，这意味着这个算法相当于简单的迭代求和。

O(n) 复杂度的正式证明直接来自[主定理](http://en.wikipedia.org/wiki/Master_theorem)。您的算法的递归关系是

```
T(n) = 2 T(n/2) 
```

定理的情况 1 涵盖了这一点。从这个复杂度计算为

```
O(n ^ log_2_(2)) = O(n) 
```

至于归并排序，其递推关系为

```
T(n) = 2 T(n/2) + O(n) 
```

这是一个完全不同的故事——主定理的案例 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:29:01.447

您的算法的递归公式是；

```
 2T(n/2) = O(n) 
```

而归并排序的递推公式是；

```
 2T(n/2) + O(n) = O(n log n) 
```

因为有两个递归调用+一个对需要 O(n) 的合并函数的调用。您的函数只进行了两次递归调用，请查看细分；

[http://www.cs.virginia.edu/~luebke/cs332.fall00/lecture3/sld004.htm](http://www.cs.virginia.edu/~luebke/cs332.fall00/lecture3/sld004.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-25T14:14:18.593

考虑以下伪代码：

```
 1    MergeSort(a, p, r)
 2      if  P<r                                // check for base case
 3      then q = FLOOR p+r/2                   // Divide
 4      MergeSort(a, p, q)                     // conquer
 5      MergeSort(a, q+1, r)                   // conquer
 6      Merge(a, p, q, r)                      // Merge 
```

现在复杂度如下：

为了

第 3 行：- O(1) 因为它需要恒定的时间。

第 4 行：- T(n/2) 因为它对一半元素进行操作。

第 5 行：- T(n/2) 因为它对一半元素进行操作。

第 6 行：- T(n) 因为它对所有元素进行操作

现在使用@Lunar 提到的递归关系，我们可以声明时间复杂度等于：- O(nlgn)

# objective-c - 目标 C CFSwapInt32

> ID：11884296
> 
> 赞同：1
> 
> 时间：2012-08-09T13:14:30.120
> 
> 标签：objective-c

我想创建一个简单的应用程序来交换 2 字节和 4 字节十六进制代码的字节。

所以它应该这样做：从 1234 到 3421 交换。我谷歌发现我必须使用 byteorder 和 CFSwapInt32 和 CFSwapInt16。

这是我已经得到的：

```
NSString *byteOrder = [NSString stringWithFormat:@"%d",CFSwapInt32(12345678)];
    NSLog(byteOrder); 
```

但我得到的不是正确的交换字节：1315027968 作为 NSLog 的编号。

有人可以帮助我或告诉我我做错了什么吗？:) 我只想交换字节，所以它们的顺序相反

```
1234 -->3412
12 34 -->34 12

12345678 -->78563412
12 34 56 78 --> 78 56 34 12 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:16:15.220

尝试

```
NSString *byteOrder = [NSString stringWithFormat:@"%x",CFSwapInt32(0x12345678)]; 
```

`%x`将输出一个值作为十六进制。

以 开头的数字`0x`会将其解释为十六进制值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:26:43.430

您的原始号码是 12345678，十六进制是 0x00BC614E

您在日志中得到的输出是 1315027968，在十六进制中是 0x4E61BC00

所以一切正常。

如果您愿意，可以尝试在十六进制中执行相同的操作：

```
NSString *byteOrder = [NSString stringWithFormat:@"%x",CFSwapInt32(0x00BC614E)];
NSLog(byteOrder); 
```

应该记录 0x4E61BC00 而

```
NSString *byteOrder = [NSString stringWithFormat:@"%x",CFSwapInt32(0x12345678)];
NSLog(byteOrder); 
```

应该记录 0x78563412

# drupal-7 - Drupal 显示套件标题格式化程序

> ID：11884297
> 
> 赞同：0
> 
> 时间：2012-08-09T13:14:43.300
> 
> 标签：drupal-7, display-suite

我正在为显示套件编写标题格式化程序，但标题不是“CCK”类型。谁能帮助我如何定义格式化程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:40:14.377

你是什​​么意思标题不是“CCK”类型？它应该是一个字段。试试这个模块：[http ://drupal.org/project/custom_formatters](http://drupal.org/project/custom_formatters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:39:41.493

由于 title 是属性，而不是字段，因此您不能使用字段格式化程序。

您需要采取另一种方法来解决此问题，例如覆盖节点模板文件、实现 hook_preprocess 函数或实现 hook_node_view。

编辑：有很多关于属性与字段的讨论。这里有一些链接可以帮助您了解为什么 title 仍然是属性以及一些相关模块的背景知识。

*   [http://drupal.org/node/557292](http://drupal.org/node/557292) - 问题：将节点标题转换为字段
*   [http://drupal.org/node/571654](http://drupal.org/node/571654) - 问题：将节点标题还原为字段

注意：我没有使用所有这些模块，也没有以任何方式认可它们，也没有声称它们解决了您的问题。这只是一个简短的清单，供您启迪：

*   [http://drupal.org/project/title](http://drupal.org/project/title)
*   [http://drupal.org/project/auto_nodetitle](http://drupal.org/project/auto_nodetitle)
*   [http://drupal.org/project/title_field_ui](http://drupal.org/project/title_field_ui)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T16:09:12.240

自定义格式化程序模块存在一个问题：[#816924：标题字段的自定义格式化程序？](http://drupal.org/node/816924)

# java - 2 个 JButton 2 图形用户界面

> ID：11884298
> 
> 赞同：1
> 
> 时间：2012-08-09T13:14:46.047
> 
> 标签：java, swing, user-interface, netbeans, jbutton

大家好，我想知道为什么我在这里拥有的名为 colin 的 gui 上的 2 个 jbutton 无法正常工作gui 在线程“AWT-EventQueue-0”java.lang.UnsupportedOperationException 中给了我异常：尚未实现消息我已经尝试了几种方法来改变它但无济于事，因为我想要做的就是在按下按钮时调出个人 gui

```
import javax.swing.JButton;

public class colin extends javax.swing.JFrame {

    private static class e {
        private static Object getSource() {
            throw new UnsupportedOperationException("Not yet implemented");
        }
        public e() {
        }
    }

    private static class newcar {
        public newcar() {
        }
    }
    private Object newcar_frame;

    private static class newcar_frame_frame {
        public newcar_frame_frame() {
        }
    }

    /**
     * Creates new form colin
     */
    public colin() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {
        Ok = new java.awt.Button();
        motor = new java.awt.Button();
        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        Ok.setLabel("button1");
        Ok.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                OkActionPerformed(evt);
            }
        });
        motor.setLabel("button1");
        motor.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                motorActionPerformed(evt);
            }
        });
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addGap(95, 95, 95).addComponent(Ok, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE).addGap(80, 80, 80).addComponent(motor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE).addContainerGap(111, Short.MAX_VALUE)));
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup().addContainerGap(154, Short.MAX_VALUE).addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(motor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE).addComponent(Ok, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)).addGap(122, 122, 122)));

        pack();
    }// </editor-fold>

    private void OkActionPerformed(java.awt.event.ActionEvent evt) {
        //if(evt.getSource()==Ok){
        userino_frame s = new userino_frame();
        s.setVisible(true);
    }

    private void motorActionPerformed(java.awt.event.ActionEvent evt) {
        //if(evt.getSource()==Clear){
        motor_frame v = new motor_frame();
        v.setVisible(true);
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(colin.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(colin.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(colin.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(colin.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new colin().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private java.awt.Button Ok;
    private java.awt.Button motor;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:22:03.413

1.  使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)而不是创建许多[顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)

2.  将内容 放在卡片上`userino_frame s = new userino_frame();`，`motor_frame v = new motor_frame();`

3.  来自[JButton](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)的[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)只是为了在这两张卡之间切换视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:17:34.867

您似乎忘记实现该功能：

```
 private static Object getSource() {
        throw new UnsupportedOperationException("Not yet implemented");
    } 
```

您必须`throw`用实际逻辑替换该行。

# javascript - Google Chart - setSelection 不会滚动到表格可视化中的选定行

> ID：11884300
> 
> 赞同：0
> 
> 时间：2012-08-09T13:14:47.313
> 
> 标签：javascript, google-visualization

我正在使用谷歌图表工具在我的网页上与谷歌地图一起显示表格可视化。当用户单击地图位置时，回调会自动从表中的位置列表中选择相应的位置。

这工作正常，但表格不会自动滚动表格，因此所选行是可见的（有很多点，所以只有有限的数量显示在 Table vis 右侧的滚动条。）

我看不到任何将视口的当前“位置”设置为表格的方法。有没有办法做到这一点？

谢谢！

下面的代码片段：

```
arrBuoyLocs = new google.visualization.DataTable();
vTable = new google.visualization.Table(document.getElementById('table_div'));

// do initialisation, etc...
.
.
.

function updateSelectedTableItem(buoyid) {
    console.log('Searching for %s', buoyid);

    idx = -1;
    nRows = arrBuoyLocs.getNumberOfRows();
    for(iRow = 0; iRow < nRows; iRow++) {
    if(arrBuoyLocs.getValue(iRow, 0) == buoyid) {
        console.log('Got match for %s at idx %d', buoyid, iRow);
            idx = iRow;
            break;
        }
    }

    if(idx >= 0) {
        vTable.setSelection([{row: idx, column: null}]);
        // This highlights the row but does not show it if the row is
        // scrolled off the screen. How do I scroll the Table to show
        // the selected row?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:23:44.643

我不知道如何使用 google chart api 做到这一点，但这里有一个可能会有所帮助的想法：

如果您可以找到屏幕高度、表格行高并计算出您的屏幕可以容纳多少表格行，那么您可以计算滚动条需要滚动多少才能显示您选择的表格行。

因此，如果您的屏幕高度可以显示 20 行，并且您选择了第 25 行，那么您滚动滚动条`5 * rowHeight + margin`。这可以在 javascript 或 ajax 文件中完成。

基本上，您已经拥有了执行此操作所需的所有数据，只需要了解如何在 javascript 中以编程方式滚动滚动条。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-07T10:42:43.457

我找到了这个，它有效。

[https://groups.google.com/forum/#!searchin/google-visualization-api/table](https://groups.google.com/forum/#!searchin/google-visualization-api/table) $20setSelection/google-visualization-api/8_atzTNPmL4/etL7VZWjdVQJ

编辑：从中，这将滚动到“table_div”中表的选定列。我发现这已经足够了，通过一些微调来确保我想要的行清晰可见。

```
function on_row_select() {
    // get the container div for the overflowed table
var container = $('#table_div').find('.google-visualization-table-table:eq(0)').parent();
// get the container div for the fixed header
var header = $('#table_div').find('.google-visualization-table-table:eq(1)').parent();
// get the selected row
var row = $('.google-visualization-table-tr-sel');
// set the scroll position of the overflowed div based on the offset position of the row and the height of the fixed header
$(container).prop('scrollTop', $(row).prop('offsetTop') - $(header).height());
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-19T16:46:38.953

像这样的东西。此答案a）不需要jQuery，b）在屏幕上已选定的行时不要触摸滚动仪。

```
scrollOnToSelectPosition=function(element) {
            var tableElement=element.querySelectorAll("table.google-visualization-table-table")[0],
                selection=tableElement.querySelectorAll("tr.google-visualization-table-tr-sel");
            if (selection.length) {
                var parentDiv=tableElement.parentElement,
                    tableHead=tableElement.querySelectorAll("thead")[0],
                    offset=selection[0].offsetTop-tableHead.clientHeight,
                    viewHeight=parentDiv.clientHeight-tableHead.clientHeight;
                if (offset>parentDiv.scrollTop && offset<parentDiv.scrollTop+viewHeight) {
                    if (offset+selection[0].clientHeight>parentDiv.scrollTop+viewHeight) {
                        parentDiv.scrollTop=offset+selection[0].clientHeight-viewHeight;
                    }
                }
                else {
                    parentDiv.scrollTop=offset;
                }
            }
        }, 
```

# c# - url 字符串被剪裁

> ID：11884307
> 
> 赞同：2
> 
> 时间：2012-08-09T13:15:05.197
> 
> 标签：c#

为什么不保留完整的网址？

我在用

```
Context.Request.Form["Url"] 
```

![在此处输入图像描述](../Images/a4d3bbc63138103d84e73e70ed9d4c44.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:20:04.273

`&clienttype=rss`是请求的另一个参数，而不是 url 的一部分。如果它是 url 的一部分，`&`则将是 URL 编码的。

# php - Codeigniter：搜索自动完成 JSON 解析意外字符

> ID：11884308
> 
> 赞同：0
> 
> 时间：2012-08-09T13:15:09.287
> 
> 标签：php, javascript, jquery, json, codeigniter

我正在尝试在 Codeigniter 中使用 jquery、jquery-ui 实​​现搜索功能（自动完成），但是在输入输入字段时出现“ **JSON Parse unexpected Character error ”。**

调用**/user/search_userautocomplete/test**时，我确实在 JSON 中取回了一些值。

（警告：*未声明 HTML 文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则在某些浏览器配置中，文档将呈现乱码。页面的字符编码必须在文档或传输协议*中。）

它与 Content-Type 有关系吗？在过去的几个小时里，我真的被困住了。如果有人知道我做错了什么，我将不胜感激。谢谢

**控制器：**

```
// Search User autocomplete
function search_userautocomplete($title)
{
    if(!empty($title) || isset($title))
    {
        $this->db->like('firstname',$title);
        //$this->db->or_like('lastname',$title);

        echo json_encode( $this->db->get('users_profiles')->result() );

    }
} 
```

**user_autocomplete.js**

```
$(document).ready(
    function() {

        $('#search').keypress(
                function(e) {

                    if (e.which == 13) {
                        e.preventDefault();
                    }

                    var searched = $('#search').val()

                    var fullurl = $('#hiddenurl').val()
                            + 'user/search_userautocomplete/'
                            + searched;

                    $.getJSON(fullurl, function(result) {
                        var elements = [];
                        $.each(result, function(i, val) {
                            elements.push(val.title)
                        })
                        $('#search').autocomplete({
                            source : elements
                        })

                    })

                })
    }) 
```

**searchfield_userautocomplete（查看）**

```
<div class="row-fluid  tagline">
        <div class="span8">

            <form>

                <label for="search">Search</label> <input id="search" type="text">
                <input value="" id="hiddenurl" type="hidden"> <input
                    value="Submit" type="submit">
            </form>

            <script src="<?php echo base_url();?>js/jquery.js"
                type="text/javascript"></script>
            <script src="<?php echo base_url();?>js/jquery-ui.js"
                type="text/javascript"></script>
            <script src="<?php echo base_url();?>js/user_autocomplete.js"
                type="text/javascript"></script>

        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:08:43.347

“JSON 解析意外字符错误”的原因可能是 getJSON 的 url 构造不正确。我认为应该是：

```
var fullurl = $('#hiddenurl').val()
              + '/user/search_userautocomplete/'
              + searched; 
```

至于字符编码错误，请参考：

[未在 html 文档中声明的字符编码](https://stackoverflow.com/questions/11633162/character-encoding-not-declared-in-html-document/11634154)

# php - 使用不同权限搜索php

> ID：11884310
> 
> 赞同：0
> 
> 时间：2012-08-09T13:15:14.800
> 
> 标签：php, mysql, search

有一个项目目录。每个项目都位于类别下。对于每个类别，我们可以拥有具有不同权限的用户（管理员、专家、用户）。添加项目时，我们选择可见性：(1) - 对所有人可见 (2) - 仅对发布此项目的类别的管理员和专家可见 (3) - 对发布此项目的类别的所有成员可见(0) - 对所有人隐藏（只有创建者可以看到）。

假设我有 500 个标题中带有“键盘”一词的项目。他们中的大多数属于不同的类别。500 篇论文中只有 1 项具有隐私权 - 2 项（该类别的专家和管理员可见）并位于“罗技”类别下。当我作为“Logitech”类别的管理员在搜索中键入“键盘”时，我应该看到搜索找到了 500 个项目，并显示其中的 10 个。如果只是一个普通用户（不是管理员或专家），在他将看到的搜索中键入“键盘”，搜索找到了 499 个项目，并向他显示了这 499 个项目中的 10 个。

抓取 20 个项目而不是 10 个项目并检查每个项目的隐私，然后在搜索结果中仅显示 10 个项目是唯一可能的解决方案吗？但是，如果这 20 个都“为用户隐藏”呢？

提前感谢您的回复。

数据库草图：

1)items[id, title, category_id, visibility]

2) 类别：[id, title]

3) category_user[id, user_id, category_id, role(expert, admin, user)]

4) 用户[id, name]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:30:35.677

这样的事情可能会奏效：

```
SELECT i.*,c.*,cu.*u.*
FROM items i,categories c, category_user cu, user u
WHERE i.title LIKE '%$search%'
AND i.category_id=c.id
AND cu.category_id=c.id
AND u.id=cu.user_id
AND cu.role='expert'
AND i.visibility=1 
```

根据用户数据更改 cu.role 和 i.visbility。

# iphone - 带有数据源的 UIDatePicker？

> ID：11884316
> 
> 赞同：3
> 
> 时间：2012-08-09T13:15:34.347
> 
> 标签：iphone, ios, uipickerview, uidatepicker

我正在寻求一点帮助，我已经四处寻找，但到目前为止一无所获。也许有人可以帮忙。

所以我想知道是否有办法为 UIDatePicker 设置“数据源”。我想创建一个日期选择器，它只显示某些可用的日期和时间，例如；

一个视图

```
Thur 9 Aug: 0900, 0930, 1000, 1100, 1130, 1200

Fri 10 Aug: 0900, 0930, 1000, 1030, 1100, 1130, 1200
(No weekend)

Mon 13 Aug: 0900, 0930, 1000, 1030, 1100, 1130, 1200 
```

UIDatePicker 是否支持此功能，还是我会考虑使用 UIPickerView 代替？

谢谢，

一个

*** 更新：一个很好的例子是在 Apples Apple Store 应用程序中，您可以从受限值 UIDatePicker 中选择 Genius Bar 约会 ***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:18:31.820

您需要使用 UIPickerView，[因为 UIDatePicker 不是从 UIPickerView 继承的](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDatePicker_Class/Reference/UIDatePicker.html)（它在我为您链接的 Apple 文档的“概述”的最后一句中说）。

UIPickerView 是使用数据源的。

UIDatePicker 有一个开发人员无法触及的内置数据源。

我猜 Apple 的 App Store Genius Bar 预约功能必须使用 UIPickerView 完成。虽然 UIDatePicker 确实具有“ `maximumDate`”、“ `minimumDate`”和“ `minuteInterval`”属性，但无法在日期选择器中设置可用日期和时间的选择或范围。

# java - 动态调整大小的线程池

> ID：11884327
> 
> 赞同：0
> 
> 时间：2012-08-09T13:16:26.473
> 
> 标签：java, parallel-processing, threadpool

我的应用程序中有以下工作流程：可能有来自用户的 X 个请求（通常同时有 5-10 个）想要在系统中搜索某些内容（每个请求都在单独的线程中处理）。

每个搜索都可以并行处理（我目前正在实施）。线程/CPU 使用在这里并不是真正的问题，因为这些任务不是 CPU 密集型的。数据库是瓶颈。

目前我只为搜索机制设置了一个单独的数据库连接池 - 最大池大小设置为 10。我知道这并不多，但我不能将它设置得更高。现在我想弄清楚如何为每个搜索（每个用户）设置线程池。

每个请求（线程）都会产生一个单独的线程池（在这个池中每个线程将处理给定用户搜索的一部分）。如果例如 10 个用户一次点击“搜索”按钮，将这个线程池的大小设置为固定大小（假设为 4）真的会有问题，因为它会产生 10 个线程池，每个线程池有 4 个线程 = 40 个线程，并且只有 10 个池中的数据库连接？我猜有些线程只是空闲，其余线程会竞相获得池的连接，但这真的是一个大问题吗？

如果是，那么最好的做法是什么：

1.  检查已经有多少线程池，同时创建一个新池并相应地调整其（这个新池的）最大线程池大小（假设已经有 2 个池，每个池有 4 个线程，那么将创建新的池，最大线程设置为 2甚至更新的池，可以说只有 1 个最大线程）。这将意味着每个下一个用户的搜索将大大变慢。
2.  创建具有相同最大线程池大小（即 4）的线程池，但实现我自己的线程池，它将动态检查应用程序中有多少线程并相应地调整 maxThreadPoolSize 的大小（在这种情况下，例如所有线程池，2 个旧的和新的，将缩小到让我们说3线程）。这将要求每个线程池访问一些共享对象，其中包含有关应用程序中所有线程池的信息。
3.  别的东西？

**编辑：** 感谢所有评论/答案。为了澄清为什么我想要每个请求都有一个线程池 - 这样做是为了让一个用户不会用完整个线程池。流程是这样的：当用户点击“搜索”时，会生成一个对象列表（这个列表可以从 1 个项目到数千个），然后为每个项目执行一个 DB 查找。现在这一切都是按顺序执行的。在我进行更改后，每个任务都会处理一次查找（因为在 DB 上的搜索速度非常慢，这给了我很大的提升——我知道我可以尝试做一些 DB 微调，但我不负责）。

问题是，如果我 User1 来并对 X 千生成的项目执行非常通用的搜索，则可能需要几分钟（或更长时间）。因此，我可以在单个用户的 executor 中执行数千个任务。然后，如果我有一个共享线程池，可以说最多 10 个线程（与连接池的数量相同），这个请求将被放入线程池的队列中。现在，如果 User2 来执行他的搜索，他将不得不等待 User1 的搜索完成，因为他的搜索将被放入同一个队列中。这是我想通过每个请求的线程池来避免的情况。

我并不是真的那么害怕上下文切换，因为每次计算可能需要几秒钟，所以它们不会经常发生。

目前我正在考虑一个共享线程池和一个管理器，每个用户线程都会将他的数据发送到该管理器，然后只要有空闲线程，该管理器就会将其发送到线程池。这样我就可以实现它（管理器）来发送来自不同用户的任务（即没有一个用户不会控制线程池）。

我用这种方法看到的问题是我需要以某种方式通知“父线程”（意思是用户请求）它的所有任务都由经理处理并以某种方式发送结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:39:27.687

现代处理器可以轻松处理数百个线程而没有问题，但正如@PeterLawrey 所暗示的那样，您的设计有些奇怪。如果如您所说，该操作在计算上并不昂贵，那么拥有非常多的线程将导致大量昂贵的上下文切换，从而导致性能下降。

额外的复杂性来自您希望每个请求都有一个线程池，而连接池是每个应用程序：

*   如果每个请求都有一个线程池，则必须在每次收到新请求时创建并销毁它
*   无论您将拥有数万亿个线程和预算为 100000 美元的超级计算机，都不会超过 10 个线程在做有用的工作。

您的直觉现在应该告诉您，问题在于您希望每个请求都有一个线程池，而理想的解决方案是在请求之间拥有一个共享线程池，线程数等于您的连接池大小。这将最大化线程重用。

如果您还想避免单个请求占用您所有的计算能力，您可能需要添加一个层来决定谁有权安排额外的工作。使用您考虑的每个请求的线程池解决方案，您让调度程序为您执行此操作，这不是一个好主意，因为您无法控制算法。

相反，您可以实现自己的“公平算法”，例如通过 PriorityBlockingQueue 将块数较少的项目放在顶部，或者使用 ConcurrentHashMap 为每个用户存储要安排的作业列表和已经完成的作业列表返回等等。

# javascript - onload focus 导致 div 被切断

> ID：11884331
> 
> 赞同：0
> 
> 时间：2012-08-09T13:16:39.157
> 
> 标签：javascript, jquery, css, html

我的菜单有一个 DIV，我的文本框区域和标签有一个 DIV。

```
<div id="divMenuParent" name="divMenuParent"
        style="padding-top: 20px; z-index: 9; border: solid 5px gray; 
            position:absolute; font-weight: bold; margin-top: 75px;
            z-index: 9999; left: 500px; background-color:#CCFFFB;
            height: 50px; width:100px; font-size: 1.5em; text-align: center;">
    MENU
</div>

<div id="divInput" style="position: absolute; top: 200px; left: 20px; z-index: 1;">
    <label style="font-size:1.5em; width:450px;">Please enter a SKU or UPC</label>
    <br/>
    <input type="text" id="txtSKUUPC" name="txtSKUUPC"
            style="height:100px;
                 width:600px;
                 font-size: 1.5em;
                 border: solid 2px gray;" />

</div> 
```

当我不自动设置焦点时它看起来很棒，但是当我在下面执行此代码时，它会切断我菜单的下半部分。当我再次评论焦点线时，它看起来很好。

```
<script type="text/javascript">
    $(document).ready(function(){
        document.getElementById('txtSKUUPC').focus();
    });
</script> 
```

发生错误时，我使用的是带有默认 Internet Explorer 的 Windows Mobile 6.5 Classic。当从我的 XP 盒子在任何其他浏览器上查看此页面时，它工作得很好。

我最初的想法是标签/文本框正在切断菜单的底部。但它们是绝对定位的，我可以将它们再向下移动 400 像素，它仍然会发生。

![在此处输入图像描述](../Images/fbafd912b7525c9c7d7b31a7c6c8058a.png)

# javascript - RegEX 仅适用于数字，也适用于货币的掩码格式

> ID：11884332
> 
> 赞同：0
> 
> 时间：2012-08-09T13:16:40.920
> 
> 标签：javascript, jquery, regex

我正在寻找仅适用于数字的 RegEX，也适用于货币格式 ($xxx.xx)

我目前将这段代码用于数字和字母，它工作得很好：

```
function validateForOnlyLettersAndNums(txt) 
{ txt.value = txt.value.replace(/[^a-zA-Z 0-9\n\r]+/g, ''); } 
```

然而，当我在网上寻找我在这里问的内容时，我只找到这样的东西：

```
(?<=\s|^)-?[0-9]+(?:\.[0-9]+)?(?=\s|$) 
```

当我在这里的代码中使用它时，它似乎不起作用：

```
function validateForOnlyNums(txt)
{ txt.value = txt.value.replace(?<=\s|^)-?[0-9]+(?:\.[0-9]+)?(?=\s|$, ''); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:20:17.013

你没有用正斜杠包围你的第二个正则表达式，即：

```
function validateForOnlyNums(txt)
{ txt.value = txt.value.replace(/?<=\s|^)-?[0-9]+(?:\.[0-9]+)?(?=\s|$/, ''); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:29:19.453

尝试：

```
function validateForOnlyNums(txt)
{
    txt.value = txt.value.replace(/[^$0-9\.]/g, '');
} 
```

它应该替换与 $xxx.xx 不同的任何内容，其中 x 是带有空字符串的数字。这个唯一的缺点是它也接受像 $12..3.5$7 这样的输入。

# php - PHP json_encode 数据到 Jquery

> ID：11884340
> 
> 赞同：0
> 
> 时间：2012-08-09T13:17:06.910
> 
> 标签：php, jquery, json

我在 post.php 中编写了一个脚本，用于删除购物车中的表格行。我正在使用 jquery post 将数据发送到 php 文件。这是我的 php 文件。我为输出创建了数组，并使用 json_encode 函数转换为 json。

```
//Sepetteki Ürünleri Siliyoruz
if(isset($_POST['deleteditems']) && isset($_SESSION['userid'])) {
    $deleted_items = $_POST['deleteditems'];
   //echo $_POST['deleteditems'];
    $sql = "DELETE FROM basket WHERE productid IN ($deleted_items) AND userid = ".$_SESSION['userid'];
    //echo $sql;
    $query = mysql_query($sql);
    $basket_array['queryresult'] = ($query) ? "<i class=\"icon-ok\"></i> Silindi" : "<i class=\"icon-remove\"></i> Hata: Silinemedi";

    $basket_sql = "SELECT p.productid, p.wholesaleprice, p.minquantity, p.vat, b.quantity
                   FROM basket AS b, product AS p
                   WHERE b.productid = p.productid AND b.userid = ".$_SESSION['userid'];
    $basket_query = mysql_query($basket_sql);
    $num   = mysql_num_rows($basket_query);
    if ($num > 0) {
        while ($row = mysql_fetch_array($basket_query)) {
            $wholesaleprice = round($row['wholesaleprice']/(1+$row['vat']/100),2);
            $total_quantity = $row['quantity']*$row['minquantity'];
            $sumnovat[] = $total_quantity * $wholesaleprice;
            $vats[] = array($row['vat'], round(($row['vat']/100)* $total_quantity * $wholesaleprice,2)); // KDV'yi hesaplıyoruz
         }

     foreach ($vats as $vat) {
        $group_by_ratio_vat_sum[] = $vat[0];
     }
        $group_by_ratio_vat_sum = array_unique($group_by_ratio_vat_sum);
        $group_by_ratio_vat_sum = array_fill_keys($group_by_ratio_vat_sum,0);

     foreach ( $vats as $vat ) {
         $number = str_replace( ",", ".", $vat[1] );
         $group_by_ratio_vat_sum[ $vat[0] ] += (float)$number;
     }
        $total_vat = 0;

       $basket_array['tfoot'] = '<tr class="basket_totals"><td colspan="5" class="basketresulttitle">'._('Ara Toplam').'</td><td colspan="3">'.number_format($sumnovat = array_sum($sumnovat),2).' TL</td></tr>';

            foreach ($group_by_ratio_vat_sum as $vat_ratio => $vat_total) {
                $basket_array['tfoot'] .= "<tr class=\"basket_totals\"><td colspan=\"5\" class=\"basketresulttitle\">"._('KDV')." (%$vat_ratio)</td><td colspan=\"3\">".number_format($vat_total,2)." TL</td></tr>";
                $total_vat += $vat_total;
            }

        $basket_array['tfoot'] .= '<tr class="basket_totals"><td colspan="5" class="basketresulttitle">'._('Genel Toplam').'</td><td colspan="3">'.number_format($sumnovat + $total_vat,2).' TL</td></tr>';

        json_encode($basket_array);
    }
} 
```

这是我的 jquery 代码。我想在我的 jquery 脚本中使用 json 对象。但我不能那样做。因为我是 json-jquery-php 关系的新手。你能帮助我吗 ？

```
$('#basket_delete_button').live('click',function(){
     var loading = '<img src="<?php echo URL; ?>images/style/loading.gif" width="16" height="16">';
     $('.loading').html(loading);
     var deleteditems = $('tbody tr input:checkbox[name="delete_basket[]"]:checked')
                                    .map(function() { return $(this).val() })
                                    .get()
                                    .join(",");

     $.post('post.php',{deleteditems: deleteditems},function(data){
          var obj = JSON.parse(data);
          $('tfoot').html(obj.tfoot);
          $("tbody tr :checked").each(function() {
               $(this).parent().parent().remove()
          });

         var rowCount = $('.basket_products_row').length;
         if (rowCount == 0){
              $('#basket_area').html("<?php echo $basket_error; ?>");
              $('#basket_count').text('0');
         } else {
              $('.loading').html(obj.queryresult);
         }
            });                               
      }); 
```

我无法处理 jquery json php 关系。你能帮助我吗 ？我无法管理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:19:33.443

我在顶部看到的主要问题是您正在用 PHP 对数据进行编码，但您没有存储或传输该编码数据：

```
json_encode($basket_array); 
```

该调用编码并返回，但您对返回不做任何事情。尝试：

```
echo json_encode($basket_array); 
```

看看这对你有什么作用。

您的客户端代码*肯定*会更好（如其他提到第 4 个参数的答案中所述`$.post()`），但我认为您当前在客户端处理 JSON 的方法将在您开始输出数据后起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:25:23.673

试试这个：

在服务器端 (PHP)，在发送任何输出之前放置一个 json 内容类型标头：

```
header('Content-type: application/json'); 
```

并写出输出：

```
echo json_encode(...); 
```

在客户端 (JS) 上，强制 $.post 读取 JSON 数据：

```
$.post('someurl.php', 
  {foo:'bar'},
  function(data){},
  'json'  // <--- here
); 
```

你不需要在`JSON.parse()`这里使用，jQuery 会为你做到这一点。您可以`data`用作对象。

完成`$.post()`请求后，进行`console.log(data)`调试输出。并使用浏览器的调试工具观察ajax请求输出。

# c# - 数据重新发布后无法处理模式警报窗口（使用 Selenium webdriver C# 和 IE）

> ID：11884343
> 
> 赞同：2
> 
> 时间：2012-08-09T13:17:16.100
> 
> 标签：c#, selenium, webdriver

我试图在使用 Selenium WebDriver (selenium-dotnet-2.25.1) + IEDriverServer.exe (IEDriverServer_Win32_2.25.2) 重新发布数据后传递模式警报窗口。

这是我的测试 C# 代码：

```
 static void Main(string[] args)
    {
        IWebDriver driver = new OpenQA.Selenium.IE.InternetExplorerDriver();

        // Navigating to gmail.com and submitting wrong data
        driver.Navigate().GoToUrl("gmail.com");
        driver.FindElement(By.Id("Email")).SendKeys("testuser");
        driver.FindElement(By.Id("signIn")).Click();
        Thread.Sleep(8000);

        // making the data re-post by F5
        driver.Navigate().Refresh();

        // Handling the aller and accepting it
        IAlert alert = driver.SwitchTo().Alert();
        Console.WriteLine(alert.Text);
        alert.Accept();
    } 
```

这是程序输出：

```
 Started InternetExplorerDriver server (32-bit)
    2.25.2.0
    Listening on port 2783
    To display the webpage again, Internet Explorer needs to
    resend the information you've previously submitted.

    If you were making a purchase, you should click Cancel to
    avoid a duplicate transaction. Otherwise, click Retry to display
    the webpage again.
    Press any key to continue . . . 
```

结果，警报窗口消失，没有任何数据重新发布，IE 显示“页面已过期”。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:10:59.967

在 Selenium WebDriver 中，“警报”被定义为一件事，而且只有一件事：一个通过 JavaScript 显示的对话框。也就是说，Alert API 只能可靠地用于由 JavaScript 、 或 函数创建`alert()`的`confirm()`对话框`prompt()`。对于任何其他对话框，您可能会很幸运，但 API 并非设计用于处理这些对话框。

# android - 选项卡布局中的地图视图抛出，java.lang.IllegalStateException: Binder has been finalized ，终结器抛出未捕获的异常

> ID：11884344
> 
> 赞同：2
> 
> 时间：2012-08-09T13:17:19.113
> 
> 标签：android

我创建了一个具有选项卡布局的应用程序，单击选项卡时，我会打开一个使用 Web 视图的新活动。另一个选项卡也使用地图视图、列表视图、图像视图。

现在我在三星 Galaxy Y 上安装了我的应用程序——它运行良好。当我在 Samsung Galaxy Tab 2 上安装相同的应用程序时，当我第一次打开地图视图然后打开网络视图并在它们之间遍历时，我收到以下错误。

```
08-09 13:00:25.527: E/System(2822): Uncaught exception thrown by finalizer
08-09 13:00:25.527: E/System(2822): java.lang.IllegalStateException: Binder has been finalized!
08-09 13:00:25.527: E/System(2822):     at android.os.BinderProxy.transact(Native Method)
08-09 13:00:25.527: E/System(2822):     at android.database.BulkCursorProxy.close(BulkCursorNative.java:288)
08-09 13:00:25.527: E/System(2822):     at android.database.BulkCursorToCursorAdaptor.close(BulkCursorToCursorAdaptor.java:133)
08-09 13:00:25.527: E/System(2822):     at android.database.CursorWrapper.close(CursorWrapper.java:49)
08-09 13:00:25.527: E/System(2822):     at android.content.ContentResolver$CursorWrapperInner.close(ContentResolver.java:1591)
08-09 13:00:25.527: E/System(2822):     at android.content.ContentResolver$CursorWrapperInner.finalize(ContentResolver.java:1604)
08-09 13:00:25.527: E/System(2822):     at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
08-09 13:00:25.527: E/System(2822):     at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
08-09 13:00:25.527: E/System(2822):     at java.lang.Thread.run(Thread.java:856) 
```

任何想法可能导致此问题。

谢谢并恭祝安康

阿迪亚·普拉塔普·辛格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:39:04.773

在全新的 Galaxy Tab 2 上部署我的应用程序时，我遇到了同样的错误。在我的情况下，我只是打开一个`MapActivity`绘制一些自定义`Overlay`的`ItemOverlay`，它会抛出该错误。

我注意到地图缩放级别设置得很远，所以我认为这是问题所在：我暂时禁用了我的活动的所有绘图内容并且地图正确显示，然后我放大并退出该活动，我重新启用了我的绘图内容这次它工作正常（当我打开活动时，设置的缩放级别是我关闭空地图活动时使用的最后一个）

不知道它是否可以帮助你，我想这与启动时不正确的地图缩放级别有关，所以也许设置自定义缩放级别可以解决问题。

# c++ - 处理器序列号

> ID：11884355
> 
> 赞同：0
> 
> 时间：2012-08-09T13:17:45.430
> 
> 标签：c++

我需要 CPU 的 PSN。我写的代码像

```
int info[4] = { -1 };
__cpuid(info, 1);
int family = info[0] & 0xf00;
int features = info[3] & 0xf000;

std::stringstream psn_id; 
```

我如何获得处理器序列号？谁能帮帮我吗。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:09:54.523

什么操作系统？[如果是 Windows，那么您可以使用系统调用GetVolumeInformation()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364993%28v=vs.85%29.aspx)使用与文件系统关联的卷序列号来唯一标识 PC，而不是 CPU 序列号

```
DWORD serial;
::GetVolumeInformation(_T("C:\\"), NULL, 0, &serial, NULL, NULL, NULL, 0); 
```

然后`serial`用作您的唯一标识符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-24T08:04:23.497

```
#include <stdio.h>

void getPSN(char *PSN)
{int varEAX, varEBX, varECX, varEDX;
   char str[9];
   //%eax=1 gives most significant 32 bits in eax 
   __asm__ __volatile__ ("cpuid": "=a" (varEAX), "=b" (varEBX), "=c" (varECX), "=d" (varEDX) : "a" (1));
   sprintf(str, "%08X", varEAX); //i.e. XXXX-XXXX-xxxx-xxxx-xxxx-xxxx
   sprintf(PSN, "%C%C%C%C-%C%C%C%C", str[0], str[1], str[2], str[3], str[4], str[5], str[6], str[7]);
   //%eax=3 gives least significant 64 bits in edx and ecx [if PN is enabled]
   __asm__ __volatile__ ("cpuid": "=a" (varEAX), "=b" (varEBX), "=c" (varECX), "=d" (varEDX) : "a" (3));
   sprintf(str, "%08X", varEDX); //i.e. xxxx-xxxx-XXXX-XXXX-xxxx-xxxx
   sprintf(PSN, "%s-%C%C%C%C-%C%C%C%C", PSN, str[0], str[1], str[2], str[3], str[4], str[5], str[6], str[7]);
   sprintf(str, "%08X", varECX); //i.e. xxxx-xxxx-xxxx-xxxx-XXXX-XXXX
   sprintf(PSN, "%s-%C%C%C%C-%C%C%C%C", PSN, str[0], str[1], str[2], str[3], str[4], str[5], str[6], str[7]);
}

int main()
{
    char PSN[30]; //24 Hex digits, 5 '-' separators, and a '\0'
    getPSN(PSN);
    printf("%s\n", PSN); //compare with: lshw | grep serial:
    return 0;
} 
```

# java - 如何使用 java 创建 tcp/ip 数据包？

> ID：11884358
> 
> 赞同：1
> 
> 时间：2012-08-09T13:17:50.547
> 
> 标签：java, packet

**java中是否有任何库支持从头开始创建数据包？**

我需要我的项目来创建一个数据包编辑器，我可以使用它编辑第 2、3 和 4 层中的字段，并且我想通过 pc NIC 发送这些数据包。如果程序是用 Java 编写的，那就太好了。

有人知道这种程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:19:13.900

是的， [Jpcap](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/)不仅允许您创建数据包，还提供发送和接收数据包的工具。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T13:54:32.127

Windows 操作系统中有一些物理内存限制，请查看：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778(v=vs.85).aspx)

# java - 我想将我的备份恢复到我的 sql 数据库中

> ID：11884360
> 
> 赞同：0
> 
> 时间：2012-08-09T13:17:58.323
> 
> 标签：java, mysql

我使用以下代码从运行良好的 sql 备份我的数据库，并在 backup.sql 中备份。

```
import java.io.*;
import java.lang.*;
import java.util.*;

class Backup 
{
    public static void main(String[] args) 
    {
        String command = "D:\\MySQL\\bin\\mysqldump.exe -u root -proot yatin -r D:/backup.sql"; 
        System.out.println(command);
        Process runtimeProcess;
        try 
        {
            runtimeProcess = Runtime.getRuntime().exec(command);
            int processComplete = runtimeProcess.waitFor();
            if (processComplete == 0)
            {
                System.out.println("Backup created successfully");
                //return true;
            }
            else
            {
                System.out.println("Could not create the backup");
            }
        }
        catch (Exception ex)
        {
            ex.printStackTrace();
        } 
    }
} 
```

但是当我执行下面的代码时，它让我处于等待状态。以前我的数据库名称是 yatin，现在我想将它恢复到 mybackup 数据库，所以我创建了名为 mybackup 的数据库。这里出了什么问题

```
import java.io.*;
import java.lang.*;
import java.util.*;

class Restore 
{
    public static void main(String[] args) 
    {
        String command = "D:\\MySQL\\bin\\mysql.exe -u root -proot mybackup< D:/backup.sql";
        //String [] command = new String[]{"mysql",mybackup,"D:\\MySQL\\bin\\mysql.exe -u root -proot  < D:/backup.sql"; 
        //String[] command = new String[]{"mysql", [database], "--user=" + [username], "--password=" + [password], "-e", " source " + [absolute path to the sql file]};
        //String[] command = new String[]{"mysql",mybackup, "-u=" +root, "-p="+root, "-e", " source " +D:/backup.sql};
        System.out.println(command);
        Process runtimeProcess;
        try 
        {
            runtimeProcess = Runtime.getRuntime().exec(command);
            int processComplete = runtimeProcess.waitFor();
            if (processComplete == 0)
            {
                System.out.println("Restore created successfully");
                //return true;
            }
            else
            {
                System.out.println("Could not restore");
            }
        }
        catch (Exception ex)
        {
            ex.printStackTrace();
        } 
    }
} 
```

更新 1

```
mysql> mysql -u root -proot mybackup < D:/backup.sql;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near 'mysql
 -u root -proot mybackup < D:/backup.sql' at line 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:37:43.743

该命令应该在 mysql 控制台之外。您不需要登录 mysql 并运行此命令，因为`mysql -u root -p`它已经为您完成了。

`cmd > mysql -u root -proot mybackup < D:\backup.sql;`

# java - Java 抽象类（this 关键字）

> ID：11884362
> 
> 赞同：0
> 
> 时间：2012-08-09T13:18:05.143
> 
> 标签：java, android

我想我误解了一些东西，如果是这样，我需要帮助..

假设我有以下两个类：

```
public abstract class Abstraction() {
   protected int number = 0;
   public void printNumber() {
       System.out.println(this.number);
       System.out.println(getNumber());
   }
   public int getNumber() {
       return this.number();
   }
}

public class Reality extends Abstraction {
   int number = 1;
   public Reality() {
       this.printNumber();
   }
}

// some other class
new Reality(); 
```

输出应该是什么？我得到 0, 0 （这里的代码有点复杂，但仍然是同样的问题）。如何使输出为 1,1？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T13:20:02.537

类`number`中的不会***覆盖***类中的。因此，班级仍然将他自己的价值视为。 `Reality`*`number``Abstraction``Abstraction``number``0`*

 *一个解决方案是：

```
public class Reality extends Abstraction {
   public Reality() {
       number = 1;
       this.printNumber();
   }
} 
```

因为您的`number`in`Abstraction`受到保护，您可以在`Reality`课堂上访问它。

* * *

另一个例子是方法中的参数：

```
private int number;

public void myMethod(int number){
    number = 2;
} 
```

不会设置您的`private int number` *字段，而是将**参数* `number`设置为`2`.

* * *

`this`最后，关于and`super`关键字的一句话，请参阅您的课程的编辑：

```
public abstract class Abstraction() {
   protected int number = 0;
   public void printNumber() {
       System.out.println(this.number);
       System.out.println(getNumber());
   }
   public int getNumber() {
       return this.number();
   }
}

public class Reality extends Abstraction {
   int number = 1;
   public Reality() {
       System.out.println(number); //Will print 1
       System.out.println(this.number); //Will print 1
       System.out.println(super.number); //Will print 0
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:20:37.823

您正在创建一个*局部*变量，`Reality`但该`printNumber()`方法引用仍然为 0 的成员变量。

如果您不创建本地变量，而是使用该字段，如下所示：

```
number = 1; 
```

一切都会安好的。

如果您在理解字段时遇到问题，您可以随时参考*官方*文档，可在此处找到：[Oracle java docs](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:22:08.497

您可以在抽象类中创建 setter 方法：

```
public void setNumber(int value) {
this.number = value;
} 
```

他们试图实现这一点的方式是行不通的，因为变量不会覆盖超类的变量。

我希望这有帮助！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T13:38:01.370

```
public class Reality extends Abstraction {
    int number = 1;
    public Reality() {
        this.printNumber();
    }
} 
```

上面的代码`number`是类的实例变量`Reality`和超类的调用方法。在超类`printNumber()`方法中将打印值`number`0，因为它是用 0 初始化的。

如果要获取 的子类变量值`number`，则必须将值作为方法参数传递，如下所示：

```
public Reality(int num) {
    this.printNumber();
} 
```*

# jquery - 如何从jquery中的标签中查找特定文本

> ID：11884369
> 
> 赞同：0
> 
> 时间：2012-08-09T13:18:16.967
> 
> 标签：jquery

我有一个这样的标签：

```
 <label class="lblclass">Claim 12J-12 closed</label> 
```

现在我有这样的功能：

```
function getdata(numberdata){
    $(".lblClass").find(numberdata)
} 
```

通过单击某个链接，我将数据传递为`<a href="#" onclick="getdata(12J-12)"></a>`

现在我的问题：
我需要`numberdata`从标签中找到“”并将超链接应用到该数字。但我无法找到`numberdata`from `label`。任何人都可以帮我找到正确的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:21:26.590

`replace`您可以使用函数从标签中查找并替换所需的数字，并使用标签`wrap`的文本`anchor`如下所示。

试试这个，

```
function getdata(numberdata)
{
    $(".lblClass").replace(numberdata, "<a href='#'>" + numberdata + "</a>");  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:45:15.627

你可以尝试这样的事情：

## *[jsBin 演示](http://jsbin.com/otodaw/1/edit)*

HTML：

```
 <a class="getdata" href="#" data-get="12J-12">getdata</a>  
  <label class="lblclass">Claim 12J-12 closed</label> 
```

使用`data`属性和 jquery 的这一点

jQuery（使用`:contains`选择器！）：

```
$('.getdata').on('click',function(e){
  e.preventDefault();

  var myData= $(this).data('get');

  $('.lblclass:contains('+ myData +')').wrap('<a href="'+myData+'" />'); 
}); 
```

`wrap()`将围绕您的标签创建一个链接。
根据需要调整 href 以获得正确的 URL。

# python - 如何在带有嵌入式 Python 代码的 jinja2 模板中正确调用和使用变量？

> ID：11884370
> 
> 赞同：2
> 
> 时间：2012-08-09T13:18:23.023
> 
> 标签：python, google-app-engine, jinja2

我有这两个类：

```
class Person(db.Model):
    person_name = db.StringProperty(required = True)
    #gender = db.StringProperty(required = True)
    nacionality = db.StringProperty(required = True)
    marital_status = db.StringProperty(required = True)
    profession = db.StringProperty(required = True)
    SSN = db.IntegerProperty(required = True)
    driver_license = db.IntegerProperty(required = True)
    address = db.PostalAddressProperty(required = True)

class ContractingParty(db.Model):
    person = db.ReferenceProperty(Person, required=True, collection_name="party_to_contracts")
    contract = db.ReferenceProperty(Contract, required=True)
    condition = db.StringProperty() 
```

我想将 ContractingParty 实体的查询传递给我的 jinja2 模板。然后使用 a `for loop`，我想从 Person 实体访问我真正想要的数据。缔约方查询正在传递给 jinja2（如果我测试它，我可以看到类似这样的内容：）`[<main.ContractingParty object at 0x0492D770>]`。但是`for loop`波纹管不起作用，`for loop`我的browser中没有显示任何信息。我该如何解决？

```
{% for party in parties %}
     <li> {{party.person.person_name}} </li>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:22:41.273

好像您在 for 循环构造中犯了一个错误，必须省略冒号字符：

```
{% for party in parties %} 
```

必须更改整个代码以实际呈现传递给模板的对象。此处不能执行 Python 代码，必须遵守 Jinja2 语法：

```
{% for party in parties %}
    <li>{{ party.person.profession}}</li>
    ...
{% endfor %} 
```

如果您想进行一些分配，请使用**set** Jinja 的标签：

```
{% set person = party.person %} 
```

我希望你有这个想法，这里有一个[链接](http://jinja.pocoo.org/docs/templates/)有更多的澄清

# javascript - ctrl + number key using javascript in browser to trigger an event

> ID：11884372
> 
> 赞同：1
> 
> 时间：2012-08-09T13:18:30.250
> 
> 标签：javascript

> **Possible Duplicate:**
> [handling ctrl + key event in IE browser](https://stackoverflow.com/questions/2364004/handling-ctrl-key-event-in-ie-browser)

I want to use `ctrl + key` (any number) so that it triggers a javascript event, but if I do that then, the browser changes tab (like it is supposed to do usually).

Is there a way of doing what I would like to do?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:24:25.280

**jquery.hotkeys**

[https://github.com/jeresig/jquery.hotkeys](https://github.com/jeresig/jquery.hotkeys)

Very easy to work with keyboard events.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:25:37.620

In your `keydown` event handler, use [`event.preventDefault()`](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault) :

```
document.addEventListener("keydown", function(e) {
    if(e.keyCode >= 48 && e.keyCode < 58 && e.ctrlKey == true) {
        e.preventDefault();
    } 
} 
```

This doesn't work in IE8 and below, however, and I can't seem to find a solution that works with `attachEvent`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:05:56.123

**Shortcut Library (5.66 Kb Standalone)**

[http://www.openjs.com/scripts/events/keyboard_shortcuts/](http://www.openjs.com/scripts/events/keyboard_shortcuts/)

```
shortcut.add("Ctrl+1",function() {
    alert("Hello World!");
}); 
```

# c# - WPF 简单数据矩阵

> ID：11884373
> 
> 赞同：3
> 
> 时间：2012-08-09T13:18:31.273
> 
> 标签：c#, wpf

在接下来的几天里，我将开始一个相当大的项目，我考虑了创建项目的最佳方式。现在我有一个关于控件的重要问题，我真的不知道实现它的最佳方法是什么。

我有一个 LED 灯矩阵。（32x16 LED）。这些必须显示在网格中，现在是棘手的部分。我必须能够和他们一起做很多事情。例如，我必须能够很容易地访问数据绑定的 LED 进行一些操作，例如将它们全部向右或向左移动 2 次或反转它们等等。

我想过在这样的 itemcontrol 中显示它们：

```
<ItemsControl ItemsSource="{Binding Path=Leds}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Rows="16" Columns="32"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate DataType="{x:Type local:Led}">
                <Ellipse Name="ellipse" Fill="Green"/>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding Path=State}" Value="Off">
                        <Setter TargetName="ellipse" Property="Fill" Value="Red"/>
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

但是我应该如何处理led上的鼠标点击来转动它或关闭它。（我正在使用 MVVM）您将如何抽象 LED 中的整个网格？

有很多解决方案，但我不知道该采取哪一个？

愿你有一个有趣的想法，如何创建一个简单而干净的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:37:07.053

代替 a `UniformGrid`，考虑`Grid`在你的`ItemsControl`和绑定的`Grid.Column`和你的对象上的一个值`Grid.Row`使用正则。`ItemContainerStyle`这将使执行诸如移动整个列或行之类的事情变得更加容易。

你可以写出 16 和 32 行/列的定义，或者我[在我的博客上有一些附加的属性](http://rachel53461.wordpress.com/2011/09/17/wpf-grids-rowcolumn-count-properties/)，可以让你用一行来做到这一点。

```
<ItemsControl ItemsSource="{Binding Leds}">
    <!-- ItemsPanelTemplate -->
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Grid local:GridHelpers.RowCount="16"
                  local:GridHelpers.ColumnCount="32" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <!-- ItemContainerStyle -->
    <ItemsControl.ItemContainerStyle>
        <Style>
            <Setter Property="Grid.Column" 
                    Value="{Binding ColumnIndex}" />
            <Setter Property="Grid.Row" 
                    Value="{Binding RowIndex}" />
        </Style>
    </ItemsControl.ItemContainerStyle>

    <!-- ItemTemplate -->
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            ...
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

至于单击它们以打开/关闭它们，请将每个项目包装在`Button`标签中并覆盖`Template`以看起来您想要的方式。然后您可以将`Command`事件绑定到 ViewModel 中的属性，并将选定的 LED 作为`CommandParameter`

```
<Button Command="{Binding RelativeSource={RelativeSource ItemsControl}, Path=DataContext.ToggleLedCommand}"
        CommandParameter="{Binding }">
    <Button.Template>
        <ControlTemplate TargetType="{x:Type Button}">
            <Ellipse Name="ellipse" Fill="Green"/>
            <ControlTemplate.Triggers>
                <DataTrigger Binding="{Binding Path=State}" Value="Off">
                    <Setter TargetName="ellipse" Property="Fill" Value="Red"/>
                </DataTrigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
   </Button.Template>
</Button> 
```

而您的 Command 实现将只是

```
void ToggleLed(LedModel led)
{
    led.State = (led.State == "On" ? "Off" : "On");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:33:45.947

`UniformGrid`我宁愿建议您使用[此 stackoverflow 线程中](https://stackoverflow.com/questions/276808/how-to-populate-a-wpf-grid-based-on-a-2-dimensional-array)`DataGrid2D`引入的出色控件，而不是使用 .

它允许您将`DataGrid2D`'s绑定`ItemsSource`到 2D 对象，在您的情况下为 a `Led[,]`，然后将显示您在 2D 数组中的任何更改。假设您想切换两个 LED，例如从位置 [1,2] 到 [2,5]，您只需要在`Led[,]`阵列上执行此操作，视图就会相应地自行更新

# c# - 从 XML 读取非 ASCII 字符

> ID：11884376
> 
> 赞同：1
> 
> 时间：2012-08-09T13:18:36.473
> 
> 标签：c#, google-maps-api-3, xml-parsing, linq-to-xml

我构建了一个小程序，它从 Google Maps API 地理编码服务读取 XML 输出并使用 LINQ to XML 解析字符串。

如果返回的 XML 包含非 ASCII 字符，那么我的输出似乎中断了。有没有办法以不同的方式读取/编码？

这是代码关键部分的快照。

```
 public static void Read(IList<string> LocationDetails, string Type)
    {
        using (WebClient webClient = new WebClient())
        {
            webClient.Proxy = null;

            for(int i = 0; i < 5; i++)
            {
                //Generate geocode request and read XML file to string
                string request = String.Format("Https://maps.google.com/maps/api/geocode/xml?{0}={1}&sensor=false", Type, LocationDetails[i]);
                string locationXML = webClient.DownloadString(request);
                XElement root = XElement.Parse(locationXML);

              //Check if request is OK or otherwise
              if (root.Element("status").Value != "OK")
              {     //Skip to next iteration if status not OK
                 continue;   
              }
            } 
```

.....跳过一些声明代码。StateName 声明为字符串。

```
 try
    {
        StateName = (result.Elements("address_component")
         .Where(x => (string)x.Element("type") == "administrative_area_level_1")
         .Select(x => x.Element("long_name").Value).First());
    }
    catch (InvalidOperationException e)
    {
        StateName = null;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:40:11.000

我相信 Google 网络服务将返回使用 UTF-8 编码的 XML。但是，如果 HTTP 标头中没有此信息，该`WebClient.DownloadString`方法将使用该方法将`Encoding.Default`返回的字节解码为字符串。这也称为“ANSI”编码，在大多数情况下不是 UTF-8。

要解决此问题，您需要在调用之前执行以下分配`webclient.DownloadString(request)`：

```
webClient.Encoding = Encoding.UTF8; 
```

# css - CSS 盒子模型计算样式混淆

> ID：11884380
> 
> 赞同：0
> 
> 时间：2012-08-09T13:18:45.067
> 
> 标签：css, dojo

我正在努力理解以下计算元素样式中的顶部和左侧值。我使用 domStyle.set (Dojo) 分别将顶部和左侧的值指定为 59pt 和 202pt。然而，实际值将是 78px 和 269px。查看填充和边框，我无法弄清楚这些数字是如何计算的。

有人可以帮忙吗？以下数字来自 FireBug。非常感谢。

```
BOX MODEL
width   422px
height  267px
top 78.6667px
    @element.style  59pt    
left    269.333px
    @element.style  202pt   
padding-top 8px
padding-right   8px
padding-bottom  8px
padding-left    8px
border-top-width    1px
border-right-width  1px
border-bottom-width 1px
border-left-width   1px
border-top-style    solid
border-right-style  solid
border-bottom-style solid
border-left-style   solid

LAYOUT
position    absolute
display block
z-index 102
overflow-x  hidden
overflow-y  hidden 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:23:11.480

`1pt`是`1/72in`，而像素是像素（至少在大多数台式机/笔记本电脑上）。单位是根据浏览器认为屏幕的 DPI 转换的（通常假定为 72dpi IIRC）。

不要在屏幕上使用物理单位。

# php - session_start() 使服务器运行完整的执行时间，然后返回数据

> ID：11884381
> 
> 赞同：1
> 
> 时间：2012-08-09T13:18:50.617
> 
> 标签：php, session, ubuntu

我有一个小型 MVC 应用程序，我一直在使用 MAMP 在我的笔记本电脑上本地编写它，它运行良好 - 没有问题，事实上，我已经将它安装在 GoDaddy 服务器上用于一个小项目。我家里有一台旧电脑，我把它变成了一个安装了 LAMP 的 Ubuntu 服务器，它也可以正常工作。我在网上查看了问题，但似乎没有一个是相同的情况。

我计时了；页面放置并加载 60 秒 - 最大执行时间，然后显示。这不是一个大网站。目前它实际上是一个带有“demo”一词的div，一些css和js。我坐下来不断刷新服务器上的访问日志，直到60秒结束并下载文件才添加新记录，因此绝对不是加载时间。

如果我放下`die('asdf');`索引文件，它会一直工作，直到我点击`session_start()`. 我在盒子上有另一个虚拟服务器，它没有任何问题（甚至使用会话）。

如果我注释掉会话，它会一直运行，直到遇到匿名函数，但我认为所有这些的根源都是会话。服务器正在运行 PHP 5.3.6，所以它不应该是一个问题。

我原本以为是 .htaccess 文件，但我设法排除了这种可能性。我不是最精通服务器技术的人，但我正在学习！我没有对服务器上的会话进行任何修改，所以我无法想象是什么让它这样做并且不发送任何错误（一切都被调高到我能得到的最高水平）。我只是觉得我应该得到一个超时错误，而不是让它运行然后坐到它超时。同样，代码在另外两台服务器上工作，所以它在这台服务器上。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:40:09.103

尝试运行更高版本的 PHP。我曾经像您一样使用 PHP 5.3.6 在 MAMP 上进行开发，并且发生了一些奇怪的事情（例如闭包无法正确处理引用）。

我了解您的生产环境是否无法升级，但值得一试，看看是 PHP 问题还是脚本问题。

# android - 通过 Grails spring-security-core 进行 Android 应用身份验证

> ID：11884383
> 
> 赞同：0
> 
> 时间：2012-08-09T13:19:04.173
> 
> 标签：android, rest, authentication, grails, spring-security

我有一个 grails-app 运行在：

> `http:localhost:8080/myapp`

通过 ajax POST 在以下位置进行身份验证：

> `http:localhost:8080/myapp/j_spring_security_check`

我正在尝试从在同一地址发布相同 ajax 请求的 Android 应用程序进行身份验证，身份验证似乎没问题，但服务器在登录后向 android 应用程序发送“重定向”，这是我的问题：如何避免在 android 应用程序上重定向以及如何在 android 应用程序中访问当前用户属性？

提前感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:13:51.590

您可以使用以下命令检查请求是否为 ajaxrequest：

springSecurityService.isAjax（请求）

我决定编写自己的 ajaxSubmit 控制器操作，因为我也遇到了重定向问题。我这样做纯粹是为了证明概念，所以这个例子可能不是最整洁的。

```
def ajaxSubmit = {
    if(!springSecurityService.isAjax(request)) {
        redirect action: "authfail"
        return
    }

    def token = new UsernamePasswordAuthenticationToken(params.j_username, params.j_password)
    try {
        UserDetails userDetails = userDetailsService.loadUserByUsername(params.j_username)
        token.setDetails( userDetails )
    } catch (UsernameNotFoundException unfe) {
        request.getSession().setAttribute(WebAttributes.AUTHENTICATION_EXCEPTION, unfe)
        redirect action: "authfail"
        return
    }

    try {
        def authSession = authenticationManager.authenticate(token)
        SCH.getContext().setAuthentication(authSession)
        redirect action: "ajaxSuccess"
        return
    } catch (AuthenticationException ae) {
        request.getSession().setAttribute(WebAttributes.AUTHENTICATION_EXCEPTION, ae)
        redirect action: "authfail"
        return
    }
} 
```

# android - android应用程序中的系统可以将静态变量值设为空吗？

> ID：11884387
> 
> 赞同：1
> 
> 时间：2012-08-09T13:19:28.903
> 
> 标签：android, variables, static

我注意到，当 android 操作系统关闭不在活动堆栈顶部的活动时，我的一些静态变量变为空。我绝对确定，变量指向之前的对象，并且我没有自己更改它们的值。

在活动重新创建后，我得到 nullPointerException 导致我的静态变量之一（在应用程序的子类 onCreate 中初始化，并且在流程生命周期的任何时候都应该不为空）为空。

由于不是我使变量为空，因此我认为是 android OS 关闭了后台活动并由于内存不足而使静态变量为空。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:42:43.427

Android 不会关闭不在活动堆栈顶部的活动。如果您的应用程序进入后台并且 Android 决定它想要回收内存，它只会**终止承载您的活动的进程**。当用户返回应用程序时，Android 会创建一个新进程并重新创建位于**活动堆栈顶部的活动**。

很可能，这就是您所看到的。显然，如果您的进程被杀死并重新创建，您的静态变量将为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:22:56.427

只有在运行活动的底层虚拟机/线程被杀死时，它们才会被清空。那么就像您正在完全重新启动应用程序一样。不要依赖静态变量，如果您需要保留一些东西，请将其存储在数据库或首选项中。

# javascript - javascript 中是否有更安全的类似 eval 的函数无法解析变量？

> ID：11884391
> 
> 赞同：0
> 
> 时间：2012-08-09T13:19:34.523
> 
> 标签：javascript, eval

我的意思是只能进行逻辑和数学运算的函数`3+5<=9`，`"string"=="string" && (3<9 || 12>3)`例如`a+b<c`：`"string".length > 3`

编辑：

所以我找到了使用 eval() 的一个很好的理由......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:06:24.097

Tbh 我认为对您的问题最简单的答案是“不，没有”。

您可以自己编写一个，找到一个现有的（这将是一个 JS 库） - 或者获取一个解析器生成器来为您生成一个可以在 Javascript 上运行的解析器。

[ANTLR](http://www.antlr.org/)就是这样一种工具/平台 - 您可以在[下载页面](http://www.antlr.org/download.html)上找到 Javascript 运行时下载。但是，您将需要 ANTLRWorks 工具来掌握它，并生成一个实际工作的 gammar。

一旦您知道自己在做什么，就可以在几分钟内启动并运行一个基本的数学解析器（支持四个主要运算符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:46:10.073

是的，有一个解决方案：只需创建一个新的函数对象，它的优点是它不会污染范围......好吧，它看起来绝对更安全：[https ://stackoverflow.com/a/7650148/393087](https://stackoverflow.com/a/7650148/393087)

是的，我知道，这不是我真正想要的，但在安全方面更接近正确的方向。

# visual-studio - VS2008如何自动缩进代码？

> ID：11884393
> 
> 赞同：3
> 
> 时间：2012-08-09T13:19:38.033
> 
> 标签：visual-studio, visual-studio-2008, visual-c++, indentation, visual-studio-2008-sp1

如何在 VS2008 中自动缩进代码？

不知何故，VS2008 与 VS2005 相比似乎对非程序员非常友好。我想在 VS2008 中缩进我的源代码（VC++）。任何人都可以让我知道如何在 VS2008 中执行此操作吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:36:07.643

`Ctrl` `K`,`Ctrl` `D`格式化整个文档

`Ctrl` `K`,`Ctrl` `F`格式化您的选择

# git - 如何避免诸如此类的 git-svn 和 svn CRLF 问题？

> ID：11884394
> 
> 赞同：9
> 
> 时间：2012-08-09T13:19:38.470
> 
> 标签：git, newline, git-svn, eol, core.autocrlf

我正在使用 git svn，今天我遇到了一些麻烦。

我做了一段`git svn clone`时间并在我的项目上工作了一段时间。几天后，我已经将我的工作推送到了 svn 遥控器 ( `git svn dcommit`)。然后我尝试使用 TortoiseSVN 检查项目，看看是否一切正常。不幸的是，所有内容都转换为 Unix 行尾，VC6 无法打开该项目。

所以，我的 git 工作副本是 CRLF，但我的 svn 工作副本是 LF。我假设 git 在`git commit`或期间对其进行了转换`git svn dcommit`。

`core.autocrlf = false`如果我为我的 git 工作副本设置，我是否可以假设我可以避免所有这些麻烦？这会迫使 git 不理会换行符吗？为了使 git svn 易于使用而不会给我的同事带来问题，还有什么需要做的吗？

（值得一提的是，我之前在同一台机器上使用过 git svn，没有触及设置，这是第一次发生这种情况。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:01:57.660

Subversion 可以为单个文件进行 EOL 转换设置。实际上 Git 也以 .gitattributes 文件（'text' 和 'eol' 属性）的形式拥有它。对于一般情况 core.autocrlf 是不够的。

如果将其设置为 false，则所有具有 svn:eol-style=native 的文件都将以 git-svn 工作副本结尾的 LF 行，这对于 Windows 来说是不期望的。

如果将其设置为 true，则所有行尾都将转换为 LF，并以 LF 的形式（始终）发送到 SVN。

实际上`svn:eol-style=unset`应该对应 '-text' git 属性（这意味着没有转换），`svn:eol-style=LF`--- 到 'eol=lf' 属性和`svn:eol-style=CRLF`--- 到 'eol=crlf' 属性；`svn:eol-style=native`取决于系统，因此可以通过未版本化的 eol 设置来控制，因此相应的 git 属性是“！eol”（这意味着从`core.eol`.git/config 中获取 EOL 设置）。

除了 git-svn，您可以使用任何可以将 svn:eol-style 转换为单个文件的相应 .gitattirbutes 值的解决方案，反之亦然。一种解决方案是服务器端：您将[SubGit](http://subgit.com)安装到您的 SVN 存储库中，然后使用 SubGit 将创建的纯 Git 接口：

```
$ subgit install path/to/svn/repository
# Git interface with correct .gtattributes repository will appear at path/to/svn/repository/.git
# you should setup an access to it 
```

然后在客户端克隆它并将 core.eol 设置为 Windows 的“crlf”和其他操作系统的“lf”（默认值为“lf”）。

```
$ git clone <URL> working_tree
$ cd working_tree
$ git config core.eol crlf #for Windows only 
```

之后，Git 的行为方式与 SVN 相同。

或者在客户端，您可以使用[SmartGit](http://www.syntevo.com/smartgit/index.html)：您可以使用它克隆 SVN 存储库（不打开现有的 git-svn 存储库）--- 然后它将 svn:eol-style 转换为 .gitattributes。这种情况不需要额外的 core.eol 设置，SmartGit 会关心它。

# ruby-on-rails-3 - 三重嵌套问题评论

> ID：11884397
> 
> 赞同：0
> 
> 时间：2012-08-09T13:19:43.347
> 
> 标签：ruby-on-rails-3

我在嵌套在游戏中的帖子中嵌套了评论。我一生都无法弄清楚如何添加评论。我得到一个未定义的方法。

```
 Showing /Users/***/Documents/TestRoutes/app/views/posts/show.html.erb where line #31 raised:

undefined method `post_comments_path' for #<#<Class:0x007fb2159834a0>:0x007fb215980228>
Extracted source (around line #31):

28: <% end %>
29: 
30: <h2>Add a comment:</h2>
31: <%= form_for([@post, @post.comments.build]) do |f| %>
32:   <div class="field">
33:     <%= f.label :commenter %><br />
34:     <%= f.text_field :commenter %> 
```

`<%= form_for([@post, @post.comments.build]) do |f| %>`

```
 resources :games do
      resources :posts do
        resources :comments
      end
    end

def create
@post = Post.find(params[:post_id])
      @comment = @post.comments.create(params[:comment])
      redirect_to game_post_path(@post)
    end

class Comment < ActiveRecord::Base
  belongs_to :post
  attr_accessible :body, :commenter
end

class Post < ActiveRecord::Base
  attr_accessible :post, :title, :game_id, :user_id
  belongs_to :user
  belongs_to :game
  has_many :comments 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:15:11.680

它是完整的帖子/评论路线吗？

```
 resources :games do
      resources :posts do
        resources :comments
      end
   end 
```

如果是这样，您还应该指定游戏，例如

```
<%= form_for([@game, @post, @post.comments.build]) do |f| %> 
```

重定向行相同

```
redirect_to game_post_path(@post) 
```

没有游戏很可能会引发错误

# java - 为什么我的客户端在使用 SSL 套接字和 Java 7 时无法读取服务器发送的第二条消息？

> ID：11884404
> 
> 赞同：0
> 
> 时间：2012-08-09T13:20:03.567
> 
> 标签：java, sockets, ssl, bufferedinputstream

在使用 Java 7 和 SSL 套接字时，我遇到了一个令人费解的问题。

我有一个客户端/服务器包。两者都使用非常简单的协议相互发送 XML 数据。每条消息的前 4 个字节总是包含整个消息的长度。这意味着，它是 XML 数据的长度加上 4 个字节。

首先，客户端向服务器发送问候消息。接下来，服务器解释问候语并发送响应。然后，客户端本身解释该消息并发送其登录信息。服务器检查该信息并发送回响应。但是这一次，客户端没有收到任何东西，尽管它使用了与从服务器获取问候响应时相同的方法。

这是客户端的简化读取方法：

```
private String readResponse() throws Exception
{
    BufferedInputStream inputBuffer = new BufferedInputStream(sslSocket.getInputStream());

    // Read and interprete the first 4 bytes to get the length of the XML-data
    int messageLength = readMessageLength(inputBuffer) - 4;

    // PROBLEM OCCURS HERE!

    // Read bufferSize bytes from stream
        byte[] byteArray = new byte[messageLength];
    inputBuffer.read(byteArray);

    // Return the XML-data
    return new String(byteArray);
} 
```

这里是从前 4 个字节中检索长度的方法......

```
private int readMessageLength(BufferedInputStream in) throws IOException {
    byte[] b = new byte[4];
    in.read(b, 0, 4);

    return (((b[0] & 0xff) << 24) | ((b[1] & 0xff) << 16) | ((b[2] & 0xff) << 8) | (b[3] & 0xff));
} 
```

在客户端应读取第二个响应时，`inputBuffer`仅包含零 ( `[0, 0, 0, 0, 0, 0, ...]`)。因此，当尝试使用 计算消息长度时`readMessageLength()`，它会返回`-4`. 当然，这会导致一个例外。

服务器发送的数据似乎还没有准备好被客户端读取。因此，我做了一些改变：

```
int messageLength;
do {
    messageLength = readMessageLength(inputBuffer) - 4;
} while(messageLength <= 0); 
```

然而，这也没有奏效。现在是令人费解的部分：发生的情况是这个循环执行了两次！现在分配给的值`messageLength`来自 XML 数据的前 4 个字节。读取方法返回的字符串现在以 开头`?xml`，其中`<`缺少 ！

所以，我尝试标记并重置第一个字节： inputBuffer.mark(4);

```
int messageLength;
do {
    inputBuffer.reset();
    messageLength = readMessageLength(inputBuffer) - 4;
} while(messageLength <= 0); 
```

但这实际上是一个无限循环。由于`inputBuffer`永远不会改变的内容，`messageLength`永远不会变成`-4`.

我什么时候可以确定发送给客户端的数据可用？我怎么能检查呢？什么可能是更好的方法？

问候，沃尔特

PS available() 方法没有用，因为在使用 SSL 套接字时它似乎总是返回零。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:23:35.550

您必须绝对始终检查从通信通道读取的字节数。它有时可以并且将为零，在这种情况下您*必须*继续阅读。仅以负返回值到达流的结尾。

具体来说， in.read(new byte[100]) 不一定会*读取*100 个字节。

如果你想保证你得到了一切，你需要使用 readFully。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:52:27.990

```
private int readMessageLength(BufferedInputStream in) throws IOException {
    byte[] b = new byte[4];
    int len = in.read(b, 0, 4);
    while(len<4)
        len += in.read(b, len, 4- len);

    return (((b[0] & 0xff) << 24) | ((b[1] & 0xff) << 16) | ((b[2] & 0xff) << 8) | (b[3] & 0xff));
} 
```

# html - 字体大小影响块元素的高度？

> ID：11884412
> 
> 赞同：6
> 
> 时间：2012-08-09T13:20:26.390
> 
> 标签：html, css

块元素的高度受内容字体大小的影响，对吗？

最好只是告诉你我的意思，看看这个例子[小提琴](http://jsfiddle.net/DtcFn/)

如果你增加div里面class的字体大小`.p`，div的高度也会增加，这是为什么呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T13:27:19.123

这是因为 div 的字体大小决定了文本的基线在哪里，而 span 放置在该基线上。

增加 div 的字体大小会使基线上方和下方的距离更高。是 span 里面的内容给出了元素的大小，所以只有基线以上的距离会影响大小，而不是基线以下的距离，所以你会看到文本被下推，但没有对应的文本下方的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:23:08.913

这是因为您没有`height`在样式表中定义 -property。默认为`height: auto`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:23:26.127

**因为您在 div 上没有设置高度。**

这意味着 div 将扩展以适应其内容，在本例中为`p`元素。

如果您不指定高度，它将默认为`height:auto`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:27:02.637

您需要设置 div 高度，请参阅[http://jsfiddle.net/VpeW8/](http://jsfiddle.net/VpeW8/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-13T10:19:40.703

因为行高是根据字体大小估算的。为了阻止 div 响应字体大小而扩展，在 CSS 中显式设置 line-height 属性。

# jsp - 每行显示三个名字

> ID：11884413
> 
> 赞同：1
> 
> 时间：2012-08-09T13:20:27.347
> 
> 标签：jsp, struts2, iterator

在这里，我正在迭代一个正常工作的搜索用户列表。我正在尝试在每一行中显示三个用户，例如

```
u1   u2   u3
u4   u5   u6
     ..
     .. 
```

此代码在每一行中显示一个用户名。我必须如上所示

```
<s:iterator var="searchedUser" value="searchedUserList">
    <tr><td>
       <s:property value="UserName"/>
    </td></tr>
</s:iterator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:13:09.343

这是代码：

```
<table>
    <s:iterator value="{1,2,3,4,5,6,7,8,9}" status="status">
        <s:if test="%{#status.index == 0}"><tr><td><s:property /></td></s:if>
            <s:elseif test="%{#status.index%3 == 0}">
            </tr><tr><td><s:property /></td>
            </s:elseif>
            <s:else>
                <td><s:property /></td>
            </s:else>
        </s:iterator>
    </tr>
</table> 
```

# jms - Oracle AQ - 如何确定侦听器是否正在侦听队列

> ID：11884416
> 
> 赞同：0
> 
> 时间：2012-08-09T13:20:43.303
> 
> 标签：jms, mule, oracle-aq

如果我设置了 AQ，但我的侦听器（Mule JMS 端点）没有收到任何消息。是否有我可以查询以确定 Oracle 认为哪些侦听器连接到队列的视图？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:37:05.833

来自[http://wedostreams.blogspot.ca/2009/01/oracle-aq-buffered-queues-101.html](http://wedostreams.blogspot.ca/2009/01/oracle-aq-buffered-queues-101.html)：

> 您可以通过查询 AQ$MYQUEUE_TABLE_S 视图（或 AQ$_MYQUEUE_TABLE_S 表）来检查队列订阅者，如下所示：

```
col name    format a12
col address format a40

select name, address
from aq$myqueue_table_s
where queue='MYQUEUE';

NAME      ADDRESS
------------ -------------------------
SUBSCRIBER1
SUBSCRIBER2 
```

# python - 转换加扰的字母

> ID：11884419
> 
> 赞同：2
> 
> 时间：2012-08-09T13:20:51.217
> 
> 标签：python

我需要输入一个加扰的字母并将其转换为 AZ 字母。

我想我需要将这些更改为整数。

知道如何获取加扰输入并将其更改为整数吗？

**更新：**

这是我到目前为止编写的代码。我不能使用发布的内置功能，必须是我们已经学过的东西。

如果用户输入是：

```
VNKW KW BO 1WV WJHFJV BJWWXEJ! 
```

所需的输出是：

```
THIS IS MY 1ST SECRET MESSAGE 
```

* * *

```
import random

def main():
    encrypt = [" "] * 26   #all letters available

    for numbah in range(26):
        letter = chr(numbah+65)
        print (letter, end="")
        # find position for number
        notfound = True
        while notfound:
            position = random.randint(0, 25)
            if encrypt[position] == " ":
                notfound = False
        encrypt[position] = letter

    print("\nScrambled: ", end="")
    for numbah in range(26):
        print(encrypt[numbah], end="")
    print("\n\n ")

    msg=input("Please input the scrambled alphabet in order: ")

    print("Now input the scrambled message:  " + msg)
    print("Your unscrambled message reads: ", end="")
    for alpha in msg.upper():
        if alpha < "A" or alpha > "Z":
            print(alpha,end="")
        else:
            print(encrypt[ ord(alpha) - 65 ], end="")

main() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T13:22:30.123

由于这是一个家庭作业问题，我只提示您可以用来轻松实现此功能的功能：看看[`string.maketrans()`](http://docs.python.org/library/string.html#string.maketrans)and [`str.translate()`](http://docs.python.org/library/stdtypes.html#str.translate)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:40:30.967

为了获取特定字符的 ASCII 编号，您可以使用[`ord()`](http://docs.python.org/library/functions.html#ord).

`print ord("a") => 97`

然后，您可以操作此值，并使用 转换回 ASCII 字符[`chr()`](http://docs.python.org/library/functions.html#chr)。

`print chr(98) => "b"`

这应该会给你一个良好的开端。[您可以在此处](http://www.asciitable.com/)查看所有 ASCII 字符编号。

# java - Spring Web应用程序中的死锁

> ID：11884421
> 
> 赞同：1
> 
> 时间：2012-08-09T13:21:02.977
> 
> 标签：java, spring, spring-mvc, thread-safety

如何编写线程安全的 Spring Web 应用程序？

当我们一次发送 250 个请求时，就会发生死锁。如何解决这个问题？

1.Controller - 这个控制器接收来自调用者的请求。当所有 250 个线程同时命中时。

```
public class TestController extends MultiActionController {

    private SyncService synchronizationService;
    public void setSynchronizationService(SyncService synchronizationService) {
        this.synchronizationService = synchronizationService;
    }
    public void StoreData(HttpServletRequest request, HttpServletResponse response) {
    byte[] syncData = null;
        byte[] returnValue = null;
        try {
    syncData = readData(request);
            returnValue = synchronizationService.receiveData(syncData);
        } catch (Exception e) {
        }
    } 
```

2.Helper - 这会解析输入并填充表格。

```
 public class TestImpl implements SyncService {
    private DataParser dataParser = null;
    private QueueHelper queueHelper = null;

    public void setDataParser(DataParser dataParser) {
        this.dataParser = dataParser;
    }

   public void setQueueHelper(QueueHelper queueHelper) {
        this.queueHelper = queueHelper;
    }

 public byte[] receiveData(byte[] data) throws HibernateException, NumberFormatException {
        boolean addTransInQueue = false;
        String dataString = null;
        HashMap syncHashMap = null;
        try {

           InSyncModel syncModel = dataParser.parseData(dataString);
           addTransInQueue = queueHelper.addTransInQueue(syncModel, data);
           return "Succ".getBytes();
    } catch (JsonSyntaxException jse) {
              throw jse;
        }

    }
} 
```

3.Configurations - 用于上述代码的 bean 注入。

```
 <bean name="synchronizationController" scope="request" class="TestController">
            <property name="synchronizationService" ref="synchronizationService"/>
   </bean>
     <bean name="synchronizationService" scope="request" class="TestImpl">
     <property name="dataParser" ref="dataParserObj"></property>
     <property name="queueHelper" ref="queueHelperObj"></property>
     </bean>

     <bean name="dataParserObj"  scope="request" class="DataParser"/>
     <bean name="queueHelperObj"  scope="request" class="QueueHelper">   
     <property name="dataSource" ref="dataSource"/>

     </bean>
     </beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:28:56.243

> 如何解决这个问题？

通过确定死锁在哪里。这可能不是 Spring 问题，而是代码中某处的死锁。

这是[生成线程转储](http://expertodev.wordpress.com/2009/05/30/how-to-take-java-thread-dump/)的方法。JVM 线程转储将突出显示哪些对象已死锁。

# cocos2d-iphone - cocos2d游戏开发为什么要使用平铺地图

> ID：11884422
> 
> 赞同：0
> 
> 时间：2012-08-09T13:21:09.267
> 
> 标签：cocos2d-iphone

我正在启动 cocos2d 并浏览一些在线教程。我脑海中浮现的第一个问题是是否有必要使用平铺地图，如果是，那么为什么？

我不能在场景中添加背景图像来感觉像竞技场吗？

我想制作一个在场地上有很长路径的竞技场，玩家只能在路径上奔跑（类似于赛车），并且在一定距离后会重复。我将如何在游戏中制作这样的环境。想法、概念或参考链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:41:22.720

不，您的竞技场 + 长路径概念不需要平铺地图，但如果您愿意，它可以适用于该概念。是的，您可以添加背景图像。

平铺地图对于基于拼贴的游戏或您希望在游戏运行时动态更改单个拼贴的游戏非常有用。

至于您的“我将如何在游戏中制作这样的环境”问题：这个问题太大了，我认为它违反了 StackOverflow 的指导方针。所以，我对你最后一个问题的回答是另一个问题：[你试过什么？](http://mattgemmell.com/2008/12/08/what-have-you-tried/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:20:34.863

> 有必要使用平铺地图吗？

从来没有真正需要使用平铺地图。为了任何东西。但是，它对许多场景*都有*帮助。因此，就您而言，**不**，没有必要。还有许多其他方法可以实现重复背景或其他。

> 我不能在场景中添加背景图像来感觉像竞技场吗？

是的，当然可以。

# ios - UIActivityIndi catorView 微调器未显示

> ID：11884423
> 
> 赞同：0
> 
> 时间：2012-08-09T13:21:16.517
> 
> 标签：ios, ios5, uiactivityindicatorview

我正在尝试让我的第一个微调器工作，但我似乎无法让它出现在屏幕上。

我尝试将情节提要上的 UIActivityIndi​​catorView 拖到我的屏幕上，但是当我尝试通过情节提要将其连接到我的头文件时，它似乎没有响应。（那里的正确步骤是什么？）

所以我手动做了。我将此行添加到我的 .h 文件中：

```
@property (weak, nonatomic) IBOutlet UIActivityIndicatorView *aSpinner; 
```

然后我将这些行添加到我的 .m 文件中

```
UIActivityIndicatorView   *aSpinner; 

//throw up spinner from submit btn we created
aSpinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:
            UIActivityIndicatorViewStyleWhiteLarge];

[self.view addSubview:aSpinner]; 
[aSpinner startAnimating]; 
```

但是当我运行测试时，没有微调器出现。关于我在这里做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:33:12.203

在您的 nib 文件中选择您的微调器，右键单击 -> 单击并从文件所有者的引用中拖动。然后选择一个Spinner。

它没有显示，因为 nib 中的活动指示器和您的代码未连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T11:44:13.527

You should use "strong" instead "weak" in the @property line.

The UIActivityIndicatorView is freed directly if weak is used and you don't want that.

Maybe you should set a frame to the view as well.

# macos - 使用 Delphi XE2 为 Mac OS X 编译

> ID：11884426
> 
> 赞同：5
> 
> 时间：2012-08-09T13:21:19.417
> 
> 标签：macos, delphi, delphi-xe2, firemonkey

1) 我只能添加 Windows 64 位作为目标平台。
**如何为 Mac OS X 编译？**

2）我希望应用程序扫描硬盘上的文件并复制它们。

**我是否需要获得 Apple 的许可才能执行此操作？某种许可证之类的？如果是这样，我如何获得它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T10:10:01.240

您只能为 OSX 编译 Firemonkey 项目。
如果您从 VCL 项目开始，它将仅链接到 Windows，因为 VCL 与 Windows API 绑定，而 Firemonkey 是跨平台的。

开始一个新项目：

文件 -> 新建 -> FireMonkey HD 应用程序

![右键点击](../Images/775e8cc373f1e87ba0ddb873d5a5c117.png)

右键单击目标平台（选择添加平台...）

![选择 OS X](../Images/55e4a62ee34629974db863e8584be384.png)

并选择 OS X。

> 我是否需要获得 Apple 的许可才能执行此操作？某种许可证之类的？如果是这样，我如何获得它？

按照此处的说明操作：http: [//docwiki.embarcadero.com/RADStudio/XE2/en/Mac_OS_X_Application_Development](http://docwiki.embarcadero.com/RADStudio/XE2/en/Mac_OS_X_Application_Development)

# java - java邮件消息头总是空的？

> ID：11884434
> 
> 赞同：0
> 
> 时间：2012-08-09T13:21:56.497
> 
> 标签：java, email, header, pop3

我正在写一个 POP3MailConnector。使用以下代码，我从商店获取消息：

```
Store store = null;
try {
    store = session.getStore();
    store.connect();

    Folder folder = store.getFolder("INBOX");
    folder.open(Folder.READ_ONLY);
    Message[] messages = folder.getMessages();
         .
         .
         .
} 
```

message.getContent() 显示消息的内容，但 message.getAllHeaders() 不返回任何值并且始终为 null。

当使用 FileInputStream 加载消息时，所有 Headers 都包含值。我正在使用本地 James Mailserver 和 hMailServer 进行测试。

使用 folder.getMessages() 时，有谁知道，而标题始终为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:29:10.037

经过长时间的搜索，我找到了解决方案。maven 依赖的顺序很重要。java邮件依赖必须设置在第一位！而已。

# android - 等待 PictureCallback 发生时的“暂停”活动

> ID：11884438
> 
> 赞同：5
> 
> 时间：2012-08-09T13:22:09.103
> 
> 标签：android, callback, android-camera

我正在构建一个 Android 应用程序，我想在调用活动继续之前等待 PictureCallback 发生。

```
import android.hardware.Camera;

private Camera camera
private Bitmap picture;

camera.takePicture(null, null, new PictureCallback() {
  @Override
  public void onPictureTaken(byte[] data, Camera camera) {
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 1;
    picture = BitmapFactory.decodeByteArray(data , 0, data.length, options);
  }
}

... do some other logic with picture 
```

我想将其他逻辑分开，因此我想避免在 takePicture 函数中对此进行编码。

有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:26:31.327

在执行任何后台工作时阻止 UI 线程是不好的做法。

如果您调用内置的相机活动，您的活动将在后台。拍摄照片并关闭相机活动后，当您返回活动时，照片将已保存。

如果您使用自己的`Camera`实现，那么您应该显示 a`ProgressDialog`并且如果您有任何后台工作要做，您应该在单独的线程中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:27:50.510

您可以在两个线程中实现它。然后在当前线程上调用 PictureCallback 之后立即调用 wait()。然后当 PictureCallback 完成时，它调用 notify() 让等待线程知道它可以完成。但是你不想阻塞你的主线程。如果您想要/需要也可以，但这不是一个好主意。

# android - 偏好屏幕显示文本块

> ID：11884440
> 
> 赞同：20
> 
> 时间：2012-08-09T13:22:11.900
> 
> 标签：android, android-preferences, preferencescreen

我正在尝试制作一个只有关于、联系人和法律选项的首选项屏幕，当单击所有这些选项时，只会在单独的页面中显示文本简介和图标，没有`shared preferences`或任何内容。

我无法理解层次结构以显示文本。我希望流程是：`settings -> about -> the about text`

目前我有这个，它给了我类别和选项，但我不知道要做什么才能显示新文本。

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

    <PreferenceCategory
            android:title="Info">
        <Preference android:title="About"/>

    </PreferenceCategory>
...
</PreferenceScreen> 
```

我不知道使用什么选项来使关于可点击进入文本视图。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-10-30T17:49:27.070

A.Grandt 的解决方案在 Preference Activity 中提供了对文本块的非常好的模仿，但我会添加一个`android:persistent="false"`属性，以避免将这种“伪首选项”不必要地存储到 SharedPreferences 文件中以进行应用设置。

总结一下。正如 A.Grandt 建议的那样，在 Preferences Activity 中模仿 TextView 将是：

```
<Preference
    android:key="pref_static_field_key"
    android:selectable="false"
    android:persistent="false"
    android:title="you can omit the title"
    android:summary="Multi line description\ncan go here."/> 
```

虽然您可以用于`\n`换行，但它不会调整 Preference Item 本身的大小，因此这些多行可能不会在仍然单行的 Preference Item 中完全可见。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-08-22T13:21:15.940

我有同样的问题，需要显示一个静态文本块。尽管在我的情况下，它已排入首选项页面。

该标签确实允许链接，但这并不能解决对静态文本的需求。但是，Preference 标签本身可以。您可以让它显示文本、通常的标题行以及下面的文本摘要，两者都是可选的，然后使其不可选择。它会给人一种静态文本的错觉。

```
<Preference
    android:key="pref_static_field_key"
    android:selectable="false"
    android:title="you can omit the title"
    android:summary="Multi line description\ncan go here."/> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-09T13:30:27.327

您不能在 a 中添加格式化的文本块`PreferenceScreen`，这不是它的本意。但是，您可以将 About 文本添加到另一个活动中（`LinearLayout`带有一些格式化`TextView`的 s 可能就足够了）。通过在首选项中传递一个意图来调用它：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >    
    <Preference 
        android:key="about"   
        android:title="About">           
            <intent android:action="your.package.path.to.Activity"/>           
    </Preference>
</PreferenceScreen> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-04-12T14:08:41.890

我想添加一个文本块，但是**以编程方式设置实际的文本内容**。我的具体需求：在首选项屏幕顶部显示应用程序版本名称。

我按照[A.Grandt](https://stackoverflow.com/a/18381676/56285)和[Krzysiek](https://stackoverflow.com/a/26659953/56285)的方法完成了它，并在代码中设置了摘要。

`dev_preferences.xml`：

```
<Preference
    android:key="pref_app_version" 
    android:persistent="false"
    android:selectable="false"
    android:title="@string/app_name" /> 
```

偏好片段 ( `extends PreferenceFragment`)：

```
 private static final String KEY_APP_VERSION = "pref_app_version";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.dev_preferences);

        findPreference(KEY_APP_VERSION).setSummary(BuildConfig.VERSION_NAME);
    } 
```

* * *

通过在条目中进行设置，我最终还使用了自定义布局（[如本答案所示）。](https://stackoverflow.com/a/6194194/56285)（不是强制性的，但通过这种方式，您可以轻松自定义首选项“标题”的外观。）`android:layout="@layout/dev_preferences_header"``<Preference>`

`dev_preferences_header.xml`：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"       
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:padding="@dimen/spacing_small">

    <TextView
        android:id="@android:id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@android:id/summary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@android:id/title" />

</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-01T17:00:12.407

在我的设置页面中，我想显示我的应用程序数据的上次备份日期时间。

（灵感来自： [https](https://developer.android.com/reference/android/content/SharedPreferences.Editor) ://developer.android.com/reference/android/content/SharedPreferences.Editor ）

1）在我的preference.xml中：

```
<PreferenceCategory app:title="Backup last execution">
    <EditTextPreference
        app:key="backup"
        app:selectable="false"
        app:summary="never"
        app:useSimpleSummaryProvider="true" />
</PreferenceCategory> 
```

2）在我的类实用程序{伴随对象}中：

```
fun Utility.Companion.storeToPreferences(key:String, value:String){
       val sharedPref: SharedPreferences =
           PreferenceManager.getDefaultSharedPreferences(context)
       val editor = sharedPref.edit()
       editor.putString(key, value)
       editor.apply()
} 
```

3）我的电话：

```
 Utility.storeToPreferences("backup", LAST_BACKUP) 
```

# .htaccess - 复杂搜索页面的Htaccess 301重定向

> ID：11884442
> 
> 赞同：1
> 
> 时间：2012-08-09T13:22:26.030
> 
> 标签：.htaccess, redirect

我在 301 重定向以下网址时遇到问题：

> > domain.com/browse.php?catName= **test** &cityName= **cityhere** &keywork=&category=0&city=0&price=0&type=0

对此：

> > domain.com/ads- **test** -in- **cityhere** /?keywork=&category=0&city=0&price=0&type=0

可以通过从搜索字段中添加更多变量来更改 url，所以它可以是这样的：

> > domain.com/browse.php?catName= **test** &cityName= **cityhere** &keywork=&category=0&city=0&price=0&type=0&anothervar=0&var=9 等

它没有固定数量的变量。基本上我需要基于**catName**和**cityName**进行重定向（并且还从 url 的最后部分删除这 2 个变量），其余的应该保持不变并在**/?**

该 url 由用户在提交搜索表单时创建。

可能吗？如果是这样，我该如何实现？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:31:21.463

在文档根目录的 htaccess 文件中尝试添加：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^catName=([^&]+)&cityName=([^&]+)&?(.*)$
RewriteRule ^browse.php$ /ads-%1-in-%2/?%3 [L,R=301] 
```

# ember.js - 向 Ember 的 ContainerView 添加许多相同的视图，每个视图具有不同的模型绑定

> ID：11884449
> 
> 赞同：1
> 
> 时间：2012-08-09T13:22:41.193
> 
> 标签：ember.js

我有一些观点，与他们各自的模型密切相关：

image.handlerbars：

```
URL:{{view Ember.TextField 
  valueBinding="EvEditor.imageModel.imgUrl" 
}}<br/> 
```

text.handlerbars：

```
{{view Ember.TextField 
 valueBinding="EvEditor.titleModel.text" 
}}<br/> 
```

我现在想创建一个包含许多图像和文本块的复合视图：

```
var container = Ember.ContainerView.create({
    childViews: ['firstView', 'secondView', 'thirdView', 'fourthView'],
    firstView: App.TextView,
    secondView: App.TextView,
    thirdView: App.ImageView,
    fourthView: App.ImageView
}); 
```

现在，就目前而言，每个 ImageView 和 TextView 都将包含相同的数据，而不是为每个分配不同的 ImageModel / TextView 实例。

构建这种东西的最佳方法是什么？我真的不希望创建视图的代码也必须知道需要将哪些属性传递到每个视图中，例如，是吗？

理想情况下，我会编写类似这样的伪代码：

```
var container = Ember.ContainerView.create({
    childViews: ['firstView', 'secondView', 'thirdView', 'fourthView'],
    firstView: {view=App.TextView, model=App.EmberObjectincomingData[0]},
    secondView: {view=App.TextView, model=App.EmberObjectincomingData[1]},
    thirdView: {view=App.ImageView, model=App.EmberObjectincomingData[2]},
    fourthView: {view=App.ImageView model=App.EmberObjectincomingData[3]},
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:59:37.687

Use something like [https://stackoverflow.com/a/10225570/466772](https://stackoverflow.com/a/10225570/466772) and then add to the CollectionView :

```
for( var i=0;i<data.req.length;i++ ){
   var type=data.req[i],model={};
    if ( type == 'image'){
      model=imageModel.fromChangeFormat( data.data[i] );
    }else if (type.indexOf('title') >-1 || type.indexOf('text') > -1 ){
      data.req[i]='text';
      model=Ember.Object.create({                   
        text    : data.data[i]
       });
    }
    window.App.controller.addItem( data.req[i]+'View', model );
} 
```

where window.App.controller is

```
controller = Em.ArrayProxy.create({
    content: [],
    addItem: function(itemType,data) {
        this.pushObject(App.Item.create({
            itemType: itemType,
            data:data
        }))
    }
}); 
```

then each View template can refer to view.content.data.foo where foo is a property in the correct Model for that View.

If the Model needs to attach customer observers or event handlers to the View for each item, you can do that in MyView before returning the string of the view (the this context is the View).

# haskell - 如何在 Haskell 中学习新的库/框架？

> ID：11884455
> 
> 赞同：3
> 
> 时间：2012-08-09T13:23:07.263
> 
> 标签：haskell, yesod

我想深入研究 Yesod Web 框架，但我不确定如何去做。如果我可以在 GHCi 中单独并交互地测试每种方法，那将是完美的。所以我真的很想知道它在内部是如何工作的。这不仅仅是关于如何使用 Yesod 或任何其他库。这是一个合理的方法吗？如何处理其他人在 Haskell 中学习一个新库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:02:11.963

Yesod 严重依赖于 Template Haskell、quasiquotes 和编译，甚至对于模板也是如此。您可以在命令行上对其进行一定程度的测试，但这将非常不方便。但是，[Yesod Book](http://www.yesodweb.com/book)非常全面，并且提供了适合初学者的介绍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:44:05.247

Web 框架在逐个方法的基础上进行测试并不是最容易的事情，因为它们需要大量的上下文。由于它们主要处理网络通信，因此它们总是必须在某些 monad 中运行（至少是 IO）。今天最流行的三个 Haskell Web 框架都定义了自己的 monad 以使事情更方便。通常，这将包括一个很好的状态，以跟踪诸如标头、解析的查询字符串和发布参数等内容。这意味着如果您想测试至少一些 Web 服务器 API，您将不得不具有完整的 HTTP 请求和/或从 Web 服务器 monad 的请求派生的所需基础数据。

现在当然可以创建一个 API 使上述所有操作变得更容易。Yesod 的版本在 wai-test 包中。Snap 的版本在 snap-core 的 Snap.Test 模块中。

Yesod 还非常依赖 Template Haskell (TH)，它是 Haskell 的元编程库（如 Lisp 宏）。所有三个 Web 框架都在某些地方使用了 TH，但 Yesod 在其自定义的准引用 DSL 中更频繁地使用它。TH 需要两次通过。首先，您必须编译 TH 代码，然后执行该代码，生成新代码。然后新代码与其他所有内容一起编译到您的程序中。这种两遍系统意味着通常需要 TH 的代码在 GHCi 中比没有它的代码更难手动操作。

通常在我的 Web 应用程序中，我不只是从头开始运行 GHCi。我通常会加载另一个我编写的代码文件。这使我们能够解决 Template Haskell 问题，因为 Template Haskell 部分是在文件中指定的，并且在我启动 GHCi 时会生成代码。从那时起，您可以使用生成的任何功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:11:41.937

玩 ghci 是学习库的好方法，但是对于像 yesod 这样的框架，你需要先熟悉一下结构。

我建议您先按照[教程](http://yannesposito.com/Scratch/en/blog/Yesod-tutorial-for-newbies/)进行操作。熟悉了基本的代码结构后，就可以重点关注相关的库了，例如路由、模板、持久化。在学习这些库时，ghci 将成为您的朋友。

# windows - Git - 推送新提交并忽略未提交的更改

> ID：11884463
> 
> 赞同：2
> 
> 时间：2012-08-09T13:23:29.523
> 
> 标签：windows, git, github, egit

我正在使用来自 Github 上的存储库的 Android 应用程序。我已经克隆了 repo 并对其中一个视图进行了更改，我已经使用 Egit 插件在 Eclipse 中提交了更改。

我现在需要将更改“推送”（我相信）到 Github 存储库。

我在 Windows 上，所以我想我会尝试新的 Windows 客户端 - 但是这不会让我在不首先处理它检测到的所有更改的情况下推送单个提交。由于 repo 是一个 Android 应用程序，当我在本地或我的设备上运行该应用程序进行调试时，它会创建许多新类和其他此类绒毛，因此我无法“同步”。但是我不想提交这些文件，只是我提交的单个文件。

这是否意味着我需要转向命令行将单个文件推送回 Github？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:36:40.140

```
git add "<follow name>"
git commit -m "commit this file"
git push origin master 
```

这将远程推送一个文件。您还可以使用 .gitignore 告诉 git 忽略您不想提交的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:31:15.290

我想这就是我正在寻找的：

```
git push origin <thelonghash>:master 
```

# sql - sql 从表中删除 CELL DATA/RECORD

> ID：11884467
> 
> 赞同：0
> 
> 时间：2012-08-09T13:23:39.383
> 
> 标签：sql

在我的专栏`City`中，有 10 多行具有相同的城市，每行显示相同的城市名称。我想要的是之后`ORDER BY CITY`，我应该获得具有该城市的第一行的城市名称，然后下一行应该显示`CITY="-"`或`NULL`值以指示详细信息属于同一城市。

尝试：我尝试了很多周来解决这个问题。

1.  我使用了这个，但输出给了我任何`ZONES(citynames)`. 但是，要选择显示重复城市名称的那些行，在此排序之后将变得不可能。

    ```
    WITH T1 AS
    (SELECT *
    FROM (SELECT *, ROW_NUMBER() OVER (PARTITION BY ZONE ORDER BY Date ASC) AS ROWID 
          FROM Try2)T
    WHERE T.ROWID > 1)
    UPDATE T1 SET ZONE='NULL' 
    ```

2.  得到了使用的建议`PIVOT`。但学习后并没有得到太多，pivot例子给出了用cols交换行，而不是这样的问题。

3.  网上有很多删除重复行的例子，但是用其他值替换重复值的例子很少（这里`--`）。也尝试使用临时表，但语法错误杀死了我，仍在处理它。

由于我有 21 个不同的城市，我需要找到所有城市的重复项，并在每个城市中替换城市名称，而不更改其他行详细信息。作为一个新手，我不知道如何实现这一点。任何人都可以帮助我或指出我的参考吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:49:01.407

首先，您不想更改原始数据。至少在我看来。一个表本质上是无序的，所以没有“第一”的概念。

相反，请在获取数据时执行此操作。让我假设有一个名为“日期”的字段定义了第一个字段。

```
select (case when try2.date = tc.mindate then try2.city else '-' end) as city,
       <rest of the columns>
from try2 join
     (select city, min(date) as mindate
      from try2
      group by city
     ) tc
     on try2.city = tc.city 
order by city, date 
```

您可以使用排名函数 (row_number()) 执行类似的操作。

# c++ - Qt QString“键值”从QHash替换

> ID：11884469
> 
> 赞同：0
> 
> 时间：2012-08-09T13:23:51.280
> 
> 标签：c++, qt, string-parsing, qstring, qhash

我有一个 QString，其内容看起来像这样：

“*分辨率=[**图像大小**]&质量=[**图像**质量]* ”。

我有一个`QHash<QString, QString> mDefaults`容器，里面有一个包含我的一些“关键”值的列表。（“ **imagesize** ”和“ **imagequal** ”是所谓的“键”，我需要用我的哈希容器中的值替换）

```
mDefaults.insert("imagesize", "320x240");
mDefaults.insert("imagequal", "standard"); 
```

我的目标是得到一个看起来像这样的字符串：“resolution= **320x240** &quality= **standard** ”（注意“[”和“]”也消失了）

有没有什么快速/好的方法可以用 Qt 库进行这种字符串键值替换？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:03:07.757

```
for(QMap::iterator i=mDefaults.begin();i!=mDefaults.end();++i) {
    myString.replace(QString("[%1]").arg(i.key()), i.value());
} 
```

# oracle - 我们可以将主键用作普通列吗？

> ID：11884470
> 
> 赞同：0
> 
> 时间：2012-08-09T13:24:00.333
> 
> 标签：oracle

我们可以在 Oracle 中将主键用作“普通列”吗？我正在尝试执行以下查询，但它不起作用：

```
SELECT DATA_1,DATA_2 FROM MY_TABLE WHERE MY_TABLE_PK=10; 
```

我有一个**无效的标识符错误：**

```
 SQL Error: ORA-00904: "MY_TABLE_PK": invalid identifier 
```

在这些情况下，我们如何读取主键值？

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:45:56.097

您的主键 INDEX 与所有[约束](http://docs.oracle.com/cd/B28359_01/server.111/b28286/clauses002.htm)一样基于表中的主键 COLUMN 。

您可以选择主键 COLUMN，但 INDEX 是数据库中的一个单独对象，并且本身不能被选择（无论如何您都不想选择）。在您的情况下，主键约束本身可能会在主键列中强制执行唯一性，并通过使用索引来减少搜索时间。

我认为您可能会对您的术语感到有些困惑。

`user_ind_columns`如果不确定，请查询字典视图以查找索引所基于的主键列：

```
SELECT *
  FROM user_ind_columns
 WHERE index_name = 'MY_TABLE_PK'; 
```

然后将基础 COLUMN(S)（可能不止一个）添加到您的选择查询中以使其返回。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:39:09.110

主键是一个普通列，是的，您可以在 where 子句中选择或使用该列。

在您的 SQL 中，您选择 DATA_1 两次 - 您在表中有一个名为 MY_TABLE_PK 的列吗？

主键的名称显示在解释计划中，但您选择的数据将是列名称，而不是主键名称。

例如

```
CREATE TABLE supplier
(   supplier_id     numeric(10)     not null,
    supplier_name   varchar2(50)    not null,
    contact_name    varchar2(50),   
    CONSTRAINT supplier_pk PRIMARY KEY (supplier_id)
); 
```

这里的主键称为supplier_pk 并使用列supplyed_id，因此我们可以像这样进行选择

```
SELECT supplier_name from supplier where supplier_id=1234; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:36:12.300

我假设 MY_TABLE 的主键是 MY_TABLE_PK。如果是这样，您发布的查询永远不会读取该列。尝试将您的查询更改为

```
SELECT MY_TABLE_PK, DATA_1
  FROM MY_TABLE
  WHERE MY_TABLE_PK = 10 
```

这假设有一行 MY_TABLE_PK 包含 10。

分享和享受。

# jquery - 在 JQuery 中附加带有引号的 html

> ID：11884472
> 
> 赞同：4
> 
> 时间：2012-08-09T13:24:04.513
> 
> 标签：jquery

当用户在我网站的提要部分点击“喜欢”时，我会附加一些 HTML 标记。但它正在破裂。我尝试了很多网络上可用的解决方案，但我找不到解决方案。

这是我正在使用的代码：

```
$('#feed20').find('strong')
.append('<span original-title="<ul><li>
<a href="http://localhost/forex/profile/username">username</a>
</li></ul>" custom-style="view-more" class="tiply_html_click">1 more</span>'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T13:33:29.877

你需要转义你的引号，试试这个[jsFiddle](http://jsfiddle.net/bDLyW/)

```
$("#feed20").find("strong").append("<span original-title=\"<ul><li><a href='http://localhost/forex/profile/username'>username</a></li></ul>\" custom-style=\"view-more\" class=\"tiply_html_click\">1 more</span>"); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:27:17.520

您的报价有问题。您用双引号包裹了一个字符串，但随后在字符串中使用了双引号，因此终止了字符串文字。

尝试像这样转义内部双引号 ( `\"`) -

```
'<span original-title="<ul><li><a href=\"http://localhost/forex/profile/username\">username</a></li></ul>" custom-style="view-more" class="tiply_html_click">1 more</span>' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:31:43.293

HTML 属性中的数据必须是 htmlentititized，尝试：

```
$('#feed20').find('strong').append('<span original-title="&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;http://localhost/forex/profile/username&quot;&gt;username&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;" custom-style="view-more" class="tiply_html_click">1 more</span>'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T13:36:32.417

您需要转义`<a>`href 属性中使用的双引号

```
$('#feed20').find('strong').append('<span original-title="<ul><li><a href=\'http://localhost/forex/profile/username\'>username</a></li></ul>" custom-style="view-more" class="tiply_html_click">1 more</span>'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T13:37:28.830

您应该对 href 使用转义的单引号。

```
$('#feed20').find('strong').append('<span original-title="<ul><li><a href=\'http://localhost/forex/profile/username\'>username</a></li></ul>" custom-style="view-more" class="tiply_html_click">1 more</span>'); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-09T13:26:49.617

从 ：

**custom-style="view-more" class="tiply_html_click">1 more');**

是错的...

# java - 如何在图表上画一条线？

> ID：11884476
> 
> 赞同：1
> 
> 时间：2012-08-09T13:24:14.160
> 
> 标签：java, charts, line, jfreechart, draw

问题是，如何使更简单和更有效。我正在使用 jfreechart，我想通过单击鼠标从一个点到另一个点画一条线。我已经覆盖了chartMouseClicked 来设置起点，然后在下一次点击线的终点之后。有用。但是想看看我的线，从起点开始，在鼠标光标上结束，而在第一次点击后，我正在移动光标。我已经通过在我覆盖的 chartMouseMoved 方法中设置数据集和设置渲染器来完成它，但是它在每次移动光标后都会创建许多数据集。我的问题是如何通过 2xclick 鼠标对我正在制作的线条进行可见预览。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:26:55.877

让 jFreechart 渲染成离屏图像并使用该图像来绘制小部件的背景。然后，您无需担心 jFreechart 的内部结构和事件处理；您可以使用标准的 Swing/AWT 方法来创建一个简单的矢量图形编辑器。

# c# - 将 SQL 转换为 LINQ：范围变量与先前的声明冲突

> ID：11884481
> 
> 赞同：0
> 
> 时间：2012-08-09T13:24:36.860
> 
> 标签：c#, sql, linq, entity-framework, sql-to-linq-conversion

我正在尝试将这个相当复杂的（从我的角度来看，因为我不处理 SQL）查询转换为 LINQ：

```
SELECT f.description, 
       s.description, 
       file_no,taskid, 
       h.description
       from_userid,
       userid, 
       h.starttime,
       locktime,
       lockby,
       h.status,
       h.endtime
FROM history h 
INNER JOIN flowdefinition f on h.flowid = f.flowid 
INNER JOIN stepdefinition s on h.flowid = s.flowid and h.stepid = s.stepid
WHERE taskid = 'SERVER2012_03_08_09_31_40_367'
AND h.status in ('R','U','C','K')
AND h.flowid not in (999)
order by endtime 
```

这就是我到目前为止所拥有的：

```
var resultList = from h in context.History_master
                 join f in context.flowdefinition_master on new { h.flowid, h.LocId } equals new { f.flowid, f.LocId } into hf
                 from h in hf.DefaultIfEmpty()
                 join s in context.stepdefinition_master on new { h.stepid, h.LocId } equals new { s.stepid, s.LocId } into hs
                 from s in hs.DefaultIfEmpty()
                 where h.file_no == fileNumber
                 orderby h.endtime
                 select new
                 {

                 }; 
```

但这抱怨“范围变量'h'与'h'的先前声明冲突。我知道它说它就像第二个声明，但我不知道我会如何在LINQ中做到这一点。任何帮助有了这个（完整或部分:)）将不胜感激！

//编辑：

如果我按照建议更改 `from h in hf.DefaultIfEmpty()`为`from h1 in hf.DefaultIfEmpty()`，则 h1 不具有与 h 相同的属性。所以我不能做第二次加入，因为桌子不在那里......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:28:42.820

你需要改变你的

```
from h in hf.DefaultIfEmpty() 
```

到不同的变量

例如：

```
from h1 in hf.DefaultIfEmpty() 
```

不确定是否需要那些 DefaultIfEmpty() 行：这行得通吗？

```
var resultList = from h in context.History_master 
    join f in context.flowdefinition_master on new { h.flowid, h.LocId } equals new { f.flowid, f.LocId } into hf 
    join s in context.stepdefinition_master on new { h.stepid, h.LocId } equals new { s.stepid, s.LocId } into hs 
    where h.file_no == fileNumber 
    orderby h.endtime 
    select new { }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:28:34.777

您的查询中有`from h in`两次。重命名`h`变量之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:48:03.507

我想到了。就像其他答案所说，我有一个双重声明，但连接也不正确。正确的方法是这样的：（作为 Lambda 表达式）

```
 IList<HistoryView> resultList2 = context.History_master.Join(context.flowdefinition_master, h=> new {h.flowid, h.LocId}, f=>new{f.flowid, f.LocId}, (h,f) => new {h,f})
                                                            .Join(context.stepdefinition_master, h=> new {h.h.flowid, h.h.LocId}, s=>new{s.flowid, s.LocId}, (h,s) => new {h,s})
                                                            .Where(x=>x.h.h.file_no == fileNumber)
                                                            .Where(x => (x.h.h.status == "R") || (x.h.h.status == "U") || (x.h.h.status == "C") || (x.h.h.status == "K"))
                                                            .Select(r=> new HistoryView { 
                                                                flowDescription = r.h.f.description,
                                                                stepDescription = r.s.description, 
                                                                fileNumber = r.h.h.file_no,
                                                                taskId = r.h.h.taskid,
                                                                fromUser = r.h.h.from_userid,
                                                                userId = r.h.h.userid,
                                                                startTime = r.h.h.starttime,
                                                                lockTime = r.h.h.locktime,
                                                                lockBy = r.h.h.lockby,
                                                                status = r.h.h.status,
                                                                endTime = r.h.h.endtime
                                                            }).ToList(); 
```

感谢所有的建议 ：）

# javascript - 在隐藏元素中初始化 Disqus 注释会导致 FF 14.0.1 中出现问题

> ID：11884492
> 
> 赞同：2
> 
> 时间：2012-08-09T13:25:26.033
> 
> 标签：javascript, firefox, initialization, disqus

此问题仅出现在 Firefox 14.0.1 中（我无法在任何其他浏览器中重现它）。如果您将 Disqus 注释的代码放在隐藏的元素中，并**等待所有内容完全加载**，然后使用 JavaScript 显示该元素，则注释框或注释都将显示。但是，如果您调整窗口大小，它会立即显示出来。不过，它在最新版本的 Google Chrome 和 Safari 中运行良好。

是什么原因造成的以及如何解决？

重现的示例代码：

```
<div id="test" style="display:none;">
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'onlinefunctions'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
<a href="#" onclick="document.getElementById('test').style.display = 'block'">show</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:28:42.667

这似乎是 Disqus 在隐藏的 DIV 中初始化的一个相对常见的问题。如果您查看 DOM，Disqus 的 javascript 代码拉入您的 div 的 iframe 的高度为 0px，而在 chrome 和其他浏览器中，当没有要显示的评论时，它的高度为 327px。

对我有用的一个 hacky 解决方法是在 Disqus iframe 块上使用 CSS min-height 修复，无论是在您的 CSS 中还是在 jQuery document.ready 块中：

```
<div id="my-disqus-block">
  <script type="text/javascript">
    // Normal Disqus embed code       
    var disqus_shortname = 'my_disqus_username'; // required: replace example with your forum shortname

    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    // Fix for Disqus box height in hidden Firefox
    $(document).ready(function() {
      $('#my-disqus-block iframe').css({
        'height': '327px',
        'height': 'auto !important',
        'min-height': '327px'
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T08:57:54.040

我找到了另一种方法来修复它，方法是将 toomanyredirects 的解决方案与 Disqus API 提供的 onReady 回调函数（[http://www.electrictoolbox.com/running-javascript-functions-after-disqus-loaded/](http://www.electrictoolbox.com/running-javascript-functions-after-disqus-loaded/)）

所以这是我正在使用的代码（在 Disqus 配置变量中声明）：

```
disqus_config = function() {
    this.callbacks.onReady = [function() {
        $('#disqus_thread iframe').css({
            'height': '327px',
            'height': 'auto !important',
            'min-height': '327px'
        });
    }];
}; 
```

# c# - 在 SurfaceScrollViewer 中接收操作事件

> ID：11884493
> 
> 赞同：1
> 
> 时间：2012-08-09T13:25:26.310
> 
> 标签：c#, wpf, events, touch, pixelsense

我目前正在开发 Surface 2.0 应用程序。我正在尝试开发一个能够通过触摸拖动和调整大小的自定义控件。我认为最简单的方法是操纵事件。

问题：我的自定义控件位于 a`SurfaceScrollViewer`中，并且 ScrollViewer 似乎正在窃取所有操作事件 - 它们从未在我的控件上触发。如果我将其更改`SurfaceScrollViewer`为普通`ScrollViewer`的，则操作事件会很好地触发。例子：

```
<s:SurfaceScrollViewer HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
    <local:CustomControl IsManipulationEnabled="True" ManipulationStarting="OnManipulationStarting" />
</s:SurfaceScrollViewer> 
```

如何在 ? 中接收操作事件`SurfaceScrollViewer`？老实说，我什至不明白为什么会发生这种情况——事件冒泡不应该防止这样的事情发生吗？以我的理解，`CustomControl`应该在 之前收到事件`SurfaceScrollViewer`并有机会处理它。为什么这不起作用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:05:04.797

SurfaceScrollViewer 需要获取所有操作事件以支持平移，如[SurfaceScrollViewer的](http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.surfacescrollviewer.aspx)*备注*部分所述。

我想如果您想禁用此行为，您可以将[PanningMode](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.panningmode.aspx)属性设置为`None`，但现在它可能不再像 SurfaceScrollViewer 了。

# php - 限制表达式中的位数

> ID：11884498
> 
> 赞同：1
> 
> 时间：2012-08-09T13:25:54.177
> 
> 标签：php, regex

你能帮我写一个正则表达式来将字符串（电话号码）中的数字限制为 10。问题是我们允许在数字组之间使用连字符（“-”）和空格，所以我不能只使用`/^\d{10}$/`.

所以号码可以是 1234 123 123，或 123-123-1234 或 1234234123，仅限 10 位数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:28:20.263

而不是单独的正则表达式，用于`preg_replace()`去除非数字字符 ( `[^\d]`) 并验证结果字符串（仅限数字）长度是否为 10：

```
if (strlen(preg_replace('/[^\d]/', '', $number)) !== 10) {
   // invalid
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:27:20.870

[使用strlen](http://php.net/manual/en/function.strlen.php)检查正则表达式的值，以确保从字符串中获得正确的数据：

```
<?php
$str = 'abcdef';
echo strlen($str); // 6

$str = ' ab cd ';
echo strlen($str); // 7
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:32:57.320

或者不使用正则表达式：

```
<?php
  $v = "123-123-1234";
  $items = array();
  for ($i = 0; $i < strlen($v); $i++) {
     if ($v[$i] <= '9' && $v[$i] >= '0') {
       $items[] = $v[$i];
       if (count($items) == 10)
         break;
     }
  } 
  print_r($items);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:35:40.500

```
$phone="92-456-asd-445";
$digits = preg_replace("[^0-9]", "",$phone); //92456445

if (strlen($digits)>10){
    echo "Bye";
}
else{
    echo "Hi";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T14:01:06.220

“所以号码可以是 1234 123 123，或 123-123-1234 或 1234234123，仅限 10 位数字。”

在这个例子中，“44”部分是突破限制；

```
$i = 0;
$s = "1234 567 890-44";
preg_match_all("/(\d+|-+| +)/", $s, $ms);
foreach ($ms[0] as $m) {
    if (is_numeric($m)) {
        $i += strlen($m);
    }
}

echo $i ."\n";
if ($i > 10) {
    echo "limit exceed!";
} 
```

# hibernate - 在数据库（存储过程）中保留 Liferay 的业务逻辑或不保留

> ID：11884499
> 
> 赞同：0
> 
> 时间：2012-08-09T13:25:54.623
> 
> 标签：hibernate, liferay, portlet, liferay-6

我们的应用程序有非常大的数据，我们希望在数据库层（存储过程）中执行我们的业务逻辑（聚合）。

Liferay 更喜欢在业务层中拥有业务逻辑（具有多层架构）。

如果我们想为业务逻辑使用存储过程，会有什么影响？

由于 Liferay 也使用 Hibernate，如果在这种情况下没有增加太多价值，有没有办法在这种情况下绕过休眠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:34:33.667

Liferay 在应用程序代码中执行其业务逻辑这一事实并不意味着您必须这样做，您的应用程序架构完全取决于您。

（这假定您的应用程序数据不引用 Liferay 的数据）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:31:15.277

Liferay 在应用程序代码级别（高级）执行其业务逻辑的原因：

1.  通过这种方式，门户变得与数据库无关，因此可以在不考虑底层数据库的情况下进行部署。
2.  并非所有数据库都支持存储过程。所以为了支持多个数据库，代码不能在存储过程中。
3.  门户主要是内容驱动的，而不是数据密集型。

可能还有其他原因，或者他们可能遵循其他一些哲学，但这是我现在能想到的。

> 那么现在的问题是您是否可以使用它？

正如[frant.hartm](https://stackoverflow.com/a/11887953/468763)所说，这完全取决于您。这取决于您的要求以及您计划如何设计、维护和增强您的架构。

**另外提醒一句：**建议不要直接从存储过程中使用 Liferay 的数据库表，因为 Liferay 可能会更改新版本的数据库架构。因此，它可能会使您的升级过程复杂化。

我觉得这个问题与 liferay 无关，因此这里有一些链接可能会帮助您做出决定：

1.  [存储过程中支持/反对业务逻辑的参数](https://stackoverflow.com/a/484563/468763)。前几个答案是这个方向的好指针。
2.  [是否将业务逻辑放在存储过程中？](https://softwareengineering.stackexchange.com/a/113389)
3.  [代码生成器与 ORM 与存储过程](https://stackoverflow.com/q/76395/468763)。

> 如果在这种情况下没有增加太多价值，有没有办法在这种情况下绕过休眠。

如果它没有增加价值，那么是的，您可以将 JDBC 用于您自己的自定义 portlet 绕过休眠。使用 JDBC 没有什么特别的配置，它是同样的好东西**:-)**。

希望这会引导您朝着积极的方向前进。

# javascript - 在带有 javascript 的谷歌图表中使用 for 循环

> ID：11884506
> 
> 赞同：1
> 
> 时间：2012-08-09T13:26:11.150
> 
> 标签：javascript, google-visualization

我正在使用谷歌图表，我想比较两个值，例如销售额和费用。我正在使用`google.visualization.arrayToDataTable`Google 图表中的方法，但我想从数据库中获取值并在图中显示相应的值。

我的示例代码是

```
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);

function drawChart() {

     var data = google.visualization.arrayToDataTable([
       ['', '<%= request.getParameter("searchKey") %>', '<%= request.getParameter("competitor") %>'],
       ['<%=created_at[0]%>', <%=sentimentStats[0]%>, <%=sentimentStats1[0]%>],
       ['<%=created_at[1]%>', <%=sentimentStats[1]%>, <%=sentimentStats1[1]%>]

     ]);
} 
```

我正在硬编码这样的值

```
['<%=created_at[0]%>', <%=sentimentStats[0]%>, <%=sentimentStats1[0]%>],
['<%=created_at[1]%>', <%=sentimentStats[1]%>, <%=sentimentStats1[1]%>] 
```

相反，我想将它与 for 循环一起使用，你能帮帮我吗？

# javascript - 不要等到 javascript 结束函数

> ID：11884509
> 
> 赞同：0
> 
> 时间：2012-08-09T13:26:19.070
> 
> 标签：javascript, ajax, wait

我正在处理**onkeydown**事件以获取写入值*（在文本区域中）*，在 PHP 文件上处理它*（通过 Ajax 帖子传递它）*并在外部 div 中显示结果......问题是每次我按下键，在 Ajax 完成任务之前我无法继续编写。即使文本尚未处理，我如何才能继续写作？

**- -编辑 - -**

```
function fromWCtoHTML(source){
 var act = new Date();
 http[act] = createRequestObject();
 http[act].open('post', '/php/fromWCtoHTML.php',false);
 http[act].setRequestHeader('Content-Type','application/x-www-form-urlencoded',false);
 http[act].send("source=" + source);
 document.getElementById('AJAXWCtoHTML').innerHTML=http[act].responseText;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:31:05.780

您已设置`async`为 false：

```
http[act].open('post', '/php/fromWCtoHTML.php',false);
                                               ^^^^^^ 
```

这使它阻塞。不要那样做。

但是请注意，大多数人可以更快地键入字符，然后可以发出 HTTP 请求并收到响应，因此每次按键都发送请求并不是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:33:06.743

`http[act].open('post', '/php/fromWCtoHTML.php',false);`

第三个参数 [ `false`] 导致您的请求是同步的。将其更改为`true`或不包括它。

**编辑**对说明 http[act].responseText 为空白的评论的响应。

添加`onreadystate`事件处理程序。试试下面的代码

```
function fromWCtoHTML(source){
 var act = new Date();
 http[act] = createRequestObject();
 http[act].open('post', '/php/fromWCtoHTML.php');
 http[act].setRequestHeader('Content-Type','application/x-www-form-urlencoded',false);
 http[act].send("source=" + source);
  http[act].onreadystatechange=function(){
 if (http[act].readyState==4 && xmlhttp.status==200)
    {
    document.getElementById('AJAXWCtoHTML').innerHTML=http[act].responseText;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:32:21.340

您可以使用 XMLHttpRequest 中的 onreadystatechange-Event ，只需放入`document.getElementById('AJAXWCtoHTML').innerHTML=http[act].responseText;` 一个匿名函数并设置事件处理程序。

# javascript - 显示/隐藏 JavaScript 的问题

> ID：11884510
> 
> 赞同：1
> 
> 时间：2012-08-09T13:26:19.470
> 
> 标签：javascript

我在显示和隐藏两个 div 时遇到问题。我有两个链接：“写帖子”和“发送消息”。出于某种原因，要让任一 div 出现，我必须单击该链接两次。我认为这可能是我试图在页面加载之前单击它，但这并没有解决问题。在页面加载时，将 div 设置为`display:none`，然后我使用 JS 修改样式属性。你可以在[这里查看问题](http://www.mattaltepeter.com/purduepals/show_user.php "这里")

这是我的 JavaScript 代码：

```
 <script type="text/javascript" />
    function showPost(id) {
if(document.getElementById('post').style.display == 'block' && id == 'send') {
    document.getElementById('post').style.display = 'none';
    document.getElementById(id).style.display = 'block';
}
else if(document.getElementById('send').style.display == 'block' && id == 'post') {
    document.getElementById('send').style.display = 'none';
    document.getElementById(id).style.display = 'block';
}
else if(document.getElementById(id).style.display == 'none') {
    document.getElementById(id).style.display = 'block';
}
else {
    document.getElementById(id).style.display = 'none';
}
    }
    </script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:33:04.417

`post`and元素在`send`加载时似乎没有 style 属性。仅在css中没有帮助`display:none`，它需要应用于元素本身。

添加`style="display:none;"`到这两个元素将解决您的问题。

```
<div id="post" style="display: none;">
<div id="send" style="display: none;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:34:38.853

由于您使用的是 CSS，我认为 element.style.display 不会找到与元素关联的样式。因此，我相信在第一次单击时，您的函数默认为 else 条件，从而将单击的元素的显示样式设置为“无”。这意味着在第二次点击时，将满足第一个条件，然后您的功能将正常工作。尝试使用内联样式:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:34:53.887

从 style.css 中删除“显示：无”

```
#post, #send {
width: 166.5%;
height: 195px;
border: 3px solid #DDD;
background: #E7EBF2;
margin-left: -67%;
margin-top: -107px;
/*display: none;*/
} 
```

并在您的 HTML 中添加 `style="display:none"`div（发布和发送）

`<div id="post">`到`<div id="post" style="display:none">`

`<div id="send">`到`<div id="send" style="display:none">`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:36:23.870

document.getElementById('post').style.display / document.getElementById('send').style.display 返回空字符串，因此第一次执行 else 条件。

# wpf - 从 DataGrid 组更新绑定

> ID：11884513
> 
> 赞同：0
> 
> 时间：2012-08-09T13:26:34.187
> 
> 标签：wpf, binding, datagrid, datatemplate

我有一个带有 DataGrid 的 WPF，我对行进行分组（在示例中按“名称”）。我想为每个组提供摘要行（“名称”和我在转换器中计算的总“金额”）。问题是当我更新数据值（示例中的“金额”）时，汇总行没有更新。因此，我想强制对摘要行进行绑定更新，但我无法在 DataTemplate 中访问它。

```
<DataGrid ItemsSource="{Binding Source={StaticResource posCurrencyOpen}}">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Amount"  Binding="{Binding Amount, Converter={StaticResource Amount_Converter}, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
    </DataGrid.Columns>
    <DataGrid.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <DataGridCell Content="{Binding Path=Name}"/>
                        <DataGridCell Content="{Binding Path=Items, Converter={StaticResource AmountGroup_Converter}, Mode=OneWay}"/>
                    </StackPanel>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
        </GroupStyle>
    </DataGrid.GroupStyle>
</DataGrid> 
```

# iphone - iOS sqlite 插入问题

> ID：11884517
> 
> 赞同：1
> 
> 时间：2012-08-09T13:26:38.170
> 
> 标签：iphone, ios, sqlite

*自 2 周以来一直在尝试解决这个 xcode 问题，但在网上没有找到任何解决方案......*

所以，我开发了一个 iphone 应用程序，它带有从 sqlite 数据库生成的 tableview（这部分没问题）。我有一个按钮，它在我的 tableview 中插入一个新行（这部分没问题），但我无法在 sqlite 数据库中插入数据。

我的功能是（我从一些教程中做到了）：

```
- (void) insertMyObjectDataIntoDatabase: (MyObject*)myObj {
NSLog(@"Start Insertion");
//init DB
NSString *databaseName = @"bd_MyObjects.sqlite";
NSArray *documentsPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir =  [documentsPaths lastObject];//[documentsPaths objectAtIndex:0];
NSString *databasePath = [documentsDir stringByAppendingPathComponent:databaseName]; //NSLog(@"databasePath = %@.", databasePath);
BOOL success;
NSFileManager *FileManager = [NSFileManager defaultManager];
NSError *error;
success = [FileManager fileExistsAtPath:databasePath];
if (!success) {
    NSLog(@"ERROR dans l'existence du fichier DB.");
} else {
    //NSString *databasePathFromApp = [[NSBundle mainBundle] pathForResource:@"bd_MyObjects" ofType:@"sqlite"];
    NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath ] stringByAppendingPathComponent:databaseName ];
    NSLog(@"databasePathFromApp = '%@'.", databasePathFromApp);
    //success = [FileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:&error];
    success = [FileManager fileExistsAtPath:databasePath];
    if (!success) {
        NSLog(@"ERROR - Failed to create writable database file with message - ErrorMsg='%@'.", [error localizedDescription]);
        NSLog(@"ERROR - copyItemAtPath: \n%@\n toPath:\n%@", databasePathFromApp, databasePath);
    } else {
        NSLog(@"OK - Database created - ErrorMsg='%@'.", [error localizedDescription]);

        //[FileManager release];
        //to setup database object
        sqlite3 *database;
        //int statusSqlOpening = sqlite3_open([databasePath UTF8String], &database);
        int statusSqlOpening = sqlite3_open_v2([databasePath UTF8String], &database, SQLITE_OPEN_READWRITE, nil);
        NSLog(@"statusSqlOpening='%d' - '%s'.", statusSqlOpening, sqlite3_errmsg(database));
        if (statusSqlOpening != SQLITE_OK) {
            NSLog(@"ERROR opening the database: statusSqlOpening='%d' - ErrorMsg='%s'.", statusSqlOpening, sqlite3_errmsg(database));
        } else {
            NSLog(@"OK - database opened: statusSqlOpening='%d' - ErrorMsg='%s'.", statusSqlOpening, sqlite3_errmsg(database));
            static sqlite3_stmt *compiledStatement;
            NSString *statement = [[NSString alloc] initWithFormat:@"INSERT INTO tb_MyObjects (DateOfMyObject, Quantity1, Quantity2) VALUES ('%@', %d, %d)", myObj.DateOfMyObject, myObj.Quantity1, myObj.Quantity2,];
            const char *sqlstatement = [statement UTF8String];
            NSLog(@"reqString = %s",sqlstatement);
            int statusSqlExecution = sqlite3_prepare_v2(database, sqlstatement, -1, &compiledStatement, NULL);
            //int statusSqlExecution = sqlite3_exec(database, sqlstatement, NULL, NULL, NULL);
            if (statusSqlExecution != SQLITE_OK) {
                //NSLog(@"Error when executing the request: statusSqlOpening='%d' - statusSqlExecution='%d' - statusSqlStep='%d' - ErrorMsg='%s'.", statusSqlOpening, statusSqlExecution, statusSqlStep, sqlite3_errmsg(database));
                NSLog(@"ERROR when executing the request: statusSqlOpening='%d' - statusSqlExecution='%d' - ErrorMsg='%s'.", statusSqlOpening, statusSqlExecution, sqlite3_errmsg(database));
            } else {
                NSLog(@"OK - request executed: statusSqlOpening='%d' - statusSqlExecution='%d' - ErrorMsg='%s'.", statusSqlOpening, statusSqlExecution, sqlite3_errmsg(database));
                //sqlite3_step(compliedstatement) executes the statement...
                int statusSqlStep = sqlite3_step(compiledStatement);
                if (statusSqlStep != SQLITE_DONE) {
                    NSLog(@"ERROR by inserting: statusSqlStep='%d' - ErrorMsg='%s'", statusSqlStep, sqlite3_errmsg(database));
                } else {
                    NSLog(@"OK - Data successfully inserted: statusSqlStep='%d' - ErrorMsg='%s'.", statusSqlStep, sqlite3_errmsg(database));
                }
            }
            sqlite3_finalize(compiledStatement);
        }
        //Closing DB
        sqlite3_close(database);
    }
}
} 
```

当我在 iphone 模拟器上运行这个应用程序并单击我的按钮时，我有这些日志：

```
2012-08-09 14:40:09.980 apps[4850:c07] Start Insertion
2012-08-09 14:40:09.981 myApps[4850:c07] databasePathFromApp = '/Users/adictic/Library/Application Support/iPhone Simulator/5.1/Applications/FE129301-39F9-4883-8714-125A6BF16FC3/myApps.app/bd_MyObjects.sqlite'.
2012-08-09 14:40:09.981 myApps[4950:c07] databasePath = '/Users/adictic/Library/Application Support/iPhone Simulator/5.1/Applications/FE129301-39F9-4883-8714-125A6BF16FC3/Documents/bd_MyObjects.sqlite'.
2012-08-09 14:40:09.981 myApps[4850:c07] OK - Database created - ErrorMsg='(null)'.
2012-08-09 14:40:09.982 myApps[4850:c07] statusSqlOpening='0' - 'not an error'.
2012-08-09 14:40:09.982 myApps[4850:c07] OK - database opened: statusSqlOpening='0' - ErrorMsg='not an error'.
2012-08-09 14:40:09.982 myApps[4850:c07] reqString = INSERT INTO tb_MyObjects (DateOfMyObject, Quantity1, Quantity2) VALUES ('2012-08-09 12:40:09 +0000', 150, 150)
2012-08-09 14:40:09.983 myApps[4850:c07] ERROR when executing the request: statusSqlOpening='0' - statusSqlExecution='1' - ErrorMsg='no such table: tb_MyObjects'. 
```

所以，我从这些日志中了解到：

*   我的数据库已正确创建
*   我的数据库已正确打开
*   我的请求正确写入（我在 sqlite 管理器中运行它并正确插入数据）
*   但是请求没有执行，表好像不存在？！-

我尝试更改 sqlite 文件的权限（chmod 777 /Users/adictic/Library/Application Support/iPhone Simulator/5.1/Applications/FE129301-39F9-4883-8714-125A6BF16FC3/myApps.app/bd_MyObjects.sqlite）但它没有任何影响。

我在 Xcode 4.4 上开发。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:40:51.433

您无法插入存储在应用程序包中的数据库，因为捆绑包已签名并且您正在有效地更改它。

您需要：

1) 使用 sqlite 命令行工具创建一个空的数据库文件和架构，将其存储在应用程序包中，然后在首次使用时将其复制到文档文件夹中。

2）首次使用时在文档文件夹中以编程方式创建空数据库文件和模式（这将是我的首选方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:44:55.113

在方法中做类似的事情，可能是initDatabase之类的：（原因是木马的答案，我只是想添加一些代码片段）

```
NSString *databaseName = @"bd_MyObjects.sqlite";

// Get the path to the documents directory and append the databaseName
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
NSString *databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

// Check if the SQL database has already been saved to the users phone, if not then copy it over
BOOL success;

// Create a FileManager object, we will use this to check the status
// of the database and to copy it over if required
NSFileManager *fileManager = [NSFileManager defaultManager];

// Check if the database has already been created in the users filesystem
success = [fileManager fileExistsAtPath:databasePath];

// If the database already exists then return without doing anything
if(success) return;

// If not then proceed to copy the database from the application to the users filesystem

// Get the path to the database in the application package
NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

// Copy the database from the package to the users filesystem
[fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:52:24.507

您的错误消息告诉您，您打开的任何数据库都没有表 tb_MyObjects 。您已经注释掉了实际将数据库从您的包复制到目录的行。请注意，在不存在的数据库上调用 open 将创建一个新的空数据库（其中没有表 tb_MyObjects）。如果您已经这样做过一次，那么您就是在玩一个空表，因为您注释掉了复制新表的代码。

# php - wordpress 网站上的间歇性服务器错误

> ID：11884520
> 
> 赞同：0
> 
> 时间：2012-08-09T13:26:45.457
> 
> 标签：php, linux, wordpress, apache, hosting

嗨，当我评估 wordpress CMS 的管理面板时，它给了我们一个错误：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, webmaster@planetofcoders.com and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log.

Additionally, a 500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request. 
```

刷新页面后，它将被解决。我想知道为什么会出现这个错误以及如何解决这个错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:03:47.527

正如 Cori 所说，您需要查阅您的日志才能具体了解。话虽如此，间歇性的问题确实缩小了一些范围。按照可能性的顺序，我敢打赌你的问题是：

*   **交通。**你的博客有多受欢迎？你正在经历成长吗？浏览量等于服务器负载，而服务器负载在很多情况下会导致 500 错误，尤其是在高峰期。如果您知道您的流量正在增加，请与您的网络主机商联系 - 如有必要，请制定更强大的计划。

*   **插件。**与上述相关，如果您最近添加了一个插件，它可能有问题，要么是因为它偶尔会执行一项使服务器崩溃的任务，要么是因为它增加了每次查看的服务器负载并使您的站点对流量更加敏感。尝试禁用任何最近添加的插件并等待问题再次出现。

*   **共享服务器负载。**如果您采用共享托管计划 - 与许多博客一样 - 在同一台机器上加载不同的站点，因为您可以为您的停机时间做出贡献。

结果：与您的主机交谈，然后在必要时阅读有关 WordPress 优化的常见问题解答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:33:58.660

如评论中所述，您需要检查日志以了解发生了什么。

从错误消息来看，您网站的主机似乎已将您的网站配置为使用 Apache 遇到问题的自定义[ErrorDocument](http://httpd.apache.org/docs/2.2/mod/core.html#errordocument)，并且 apache 错误日志应该有助于找出发生了什么。

有许多不同的间歇性错误可能会导致您出现问题。数据库连接是一种典型的连接。

# c++ - 无法使用 curl 在 Linux 中编译 - 未定义的参考

> ID：11884525
> 
> 赞同：6
> 
> 时间：2012-08-09T13:27:00.263
> 
> 标签：c++, linux, curl

我正在尝试使用 curl lib 在 Linux（ubuntu）中编译一个 c++ 示例，但我得到了对“curl_easy_init”的未定义引用

编译命令：

```
gcc -L/usr/local/lib -lcurl -I/usr/local/include -o request request.cpp 
```

结果：

```
/tmp/ccZwDiCf.o: In function 'main':<br>
request.cpp:(.text+0xa): undefined reference to 'curl_easy_init'<br>
request.cpp:(.text+0x31): undefined reference to 'curl_easy_setopt'<br>
request.cpp:(.text+0x3d): undefined reference to 'curl_easy_perform'<br>
request.cpp:(.text+0x54): undefined reference to 'curl_easy_strerror'<br>
request.cpp:(.text+0x7b): undefined reference to 'curl_easy_cleanup'<br>
collect2: ld returned 1 exit status 
```

代码：

```
#include <curl/curl.h>
#include <stdio.h>

int main(int argc, char* argv[]){
    CURL *curl;
    CURLcode res;

    curl = curl_easy_init();
    if(curl) {
        curl_easy_setopt(curl, CURLOPT_URL, "http://google.com");
        res = curl_easy_perform(curl);
        if(res!=CURLE_OK) 
            fprintf(stderr, "curl_easy_perform() failed: %s\n",curl_easy_strerror(res));
        curl_easy_cleanup(curl);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-17T08:48:23.560

回答只是为了关闭这个问题。

要恢复，您必须将 -lcurl 选项放在编译命令行的末尾。

# javascript - 如何从 Firefox 插件的面板发出 ajax 请求？

> ID：11884529
> 
> 赞同：-4
> 
> 时间：2012-08-09T13:27:13.133
> 
> 标签：javascript, ajax, firefox, panel, firefox-addon-sdk

我对 Firefox 插件的面板有一些疑问。如何从面板发出 ajax 请求？以及如何调试面板？Firebug 看不到面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:45:38.180

如果您需要从面板向 Web api 发出请求，您需要在 main.js 中实际发出 Web 请求，并使用以下命令将结果发送到您的面板

```
panel.postMessage(results) 
```

您应该查看的一些文档：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/index.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/index.html)

SDK 使用异步事件驱动系统在面板和主插件代码等对象之间发送消息。上述内容脚本指南是该系统如何工作的重要背景资料。

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/request.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/request.html)

请求模块允许您向任何 Web 服务发出请求。

这是一个向 twitter api 发出请求并将结果传递给 page-mod 的示例插件：

[https://builder.addons.mozilla.org/package/45866/latest/](https://builder.addons.mozilla.org/package/45866/latest/)

此实现类似于从面板触发 api 请求所需执行的操作。

# wix - 是否可以在补丁中添加新文件夹和文件？

> ID：11884530
> 
> 赞同：1
> 
> 时间：2012-08-09T13:27:15.533
> 
> 标签：wix, windows-installer, installshield, msp

我们需要将新文件夹和文件添加到现有版本中。

我们知道可以通过补丁 [msp] 添加新文件。

[出于与流程相关的原因，他们不想进行小升级]

但是是否也可以通过 msp 添加新文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:48:48.067

当然。您可以在修补期间将组件添加到功能，并且该组件可以具有 CreateFolder 元素。

# ms-access - 不确定如何使用 ADO .Properties("Partial Bulk Ops")

> ID：11884537
> 
> 赞同：2
> 
> 时间：2012-08-09T13:27:24.543
> 
> 标签：ms-access, vba, primary-key

正如标题所说.. 我[在 ADODB 上看到了文档`.Properties`](http://msdn.microsoft.com/en-us/library/office/aa140022%28v=office.10%29.aspx)，但我不确定如何使用它。我需要暂时启用 Execute 以忽略键违规（也就是只导入一个，因为本机访问查询会处理警告（不需要警告））。

我试过了

```
Set cnn = CurrentProject.Connection
cnn.Properties("Jet OLEDB:Global Partial Bulk Ops") = 1
cnn.BeginTrans
' do my sql which works
cnn.CommitTrans 
```

但是，`cnn.Properties(...`它会产生以下错误：

`Read-only property value was not set`

我在这方面有点不合群……以前没有深入研究过这些东西。

如果有人知道另一种方法可以在不使用的情况下忽略 VBA 中的这些关键违规行为`DoCmd`，那也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:35:15.210

这对我有用。

```
Dim cnn As ADODB.Connection
Set cnn = New ADODB.Connection

With cnn
   .Provider = "Microsoft.ACE.OLEDB.12.0"

   .Properties("Jet OLEDB:Global Partial Bulk Ops") = 1
   .Open "z:\docs\test.accdb"
End With 
```

我想`CurrentProject.Connection`不起作用，因为它是开放的`cnn.state=adStateOpen`

# image-processing - 为给定图像设置色温（如在 Photoshop 中）

> ID：11884544
> 
> 赞同：4
> 
> 时间：2012-08-09T13:27:54.700
> 
> 标签：image-processing, color-scheme

我被分配将色温设置为 1000 到 10.000 之间的值，就像在 Photoshop 中一样。到目前为止，我只能找到一个显示值的表，[我](http://www.cambridgeincolour.com/tutorials/white-balance.htm) 试图在 Gimp 中找到相同的函数（因为它是开源的，我会通过阅读代码来学习），但没有直接的等价物。我必须选择颜色级别并弯曲一些曲线。有人告诉我，客户希望像在 Photoshop 中一样设置值。任何人都可以指出正确的方向来创建规模吗？

编辑：链接已更正。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-09T17:06:17.300

您已经找到了每种色温的 RGB 等效值表，但您没有说明在哪里找到了我自己的：[http ://www.vendian.org/mncharity/dir3/blackbody/](http://www.vendian.org/mncharity/dir3/blackbody/)

自然场景反射的光与照射到它的光的颜色成比例。这意味着简单的线性平移应该会产生预期的效果。如果我们假设现有图像已经是白平衡的，因此纯白色是 (255,255,255)，那么只需将每个像素的每个 r,g,b 值乘以对应于色温的比例即可。

这是 Python 中的示例代码。乘法是用矩阵间接完成的。

```
from PIL import Image

kelvin_table = {
    1000: (255,56,0),
    1500: (255,109,0),
    2000: (255,137,18),
    2500: (255,161,72),
    3000: (255,180,107),
    3500: (255,196,137),
    4000: (255,209,163),
    4500: (255,219,186),
    5000: (255,228,206),
    5500: (255,236,224),
    6000: (255,243,239),
    6500: (255,249,253),
    7000: (245,243,255),
    7500: (235,238,255),
    8000: (227,233,255),
    8500: (220,229,255),
    9000: (214,225,255),
    9500: (208,222,255),
    10000: (204,219,255)}

def convert_temp(image, temp):
    r, g, b = kelvin_table[temp]
    matrix = ( r / 255.0, 0.0, 0.0, 0.0,
               0.0, g / 255.0, 0.0, 0.0,
               0.0, 0.0, b / 255.0, 0.0 )
    return image.convert('RGB', matrix) 
```

这是几个示例。第一个是原始的，然后是 2500K 和 9500K 的输出。

![原来的](../Images/173a6d23a8b3eb9b1987249714b30dc3.png) ![2500K](../Images/1b1940235658d307d9f3ede979575f19.png) ![9500K](../Images/8a3e23b1f17f33fe0343f9f55abe60ba.png)

# vim - 是否有一个不像 snipmate、textmate 等的 vim 片段插件？

> ID：11884546
> 
> 赞同：0
> 
> 时间：2012-08-09T13:28:02.860
> 
> 标签：vim, code-snippets

我想知道是否已经存在一个片段插件，它基本上打开一个文件浏览器并允许选择/搜索一个片段名称，然后插入一段代码。我个人是 Textmate 片段功能的粉丝；但是，我的环境有很多基于文本文件的片段，我只想阅读它们。我希望能够：

*   配置目录
*   按一个键/输入一个命令来调出一个窗口
*   输入我要查找的内容或浏览文件夹
*   选择一个片段
*   读进去

想法、建议、想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:37:08.187

只是想我会停下来，用我决定做的事情来回应。我已经安装了[CtrlP](https://github.com/kien/ctrlp.vim)并做了一些映射来满足这个需求：

```
" Open Snippets
nnoremap <leader>so :CtrlP <directory to snippets><cr> 
```

和

```
" Put Snippet
nnoremap <leader>sp :buffer #<cr>:read #<cr>:bdelete #<cr> 
```

第一个只是指定片段的目录。然后我可以搜索我想要的片段，按 Enter 键并打开它。在该片段上，我可以使用第二个映射切换到我的最后一个缓冲区，读取最后一个活动缓冲区（现在应该是片段），然后删除该缓冲区。我打算试一试，看看效果如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:07:25.903

[mu-template](http://code.google.com/p/lh-vim/wiki/muTemplate)有一个`:MuEdit`命令，允许打开和编辑可用的片段（名称与可以使用的相同`:MuTemplate`）。从片段/模板中，`CTRL-W_f`（可能是`gf`，我不记得了）已被重新映射以遵循其他包含的片段/模板）。

它可能不像您想象的那样符合人体工程学，因为此功能旨在维护模板文件，而不是片段/模板的交互式扩展。为此，片段有一个*提示*行，在大多数情况下已经足够了。

# java - 让 Emacs 在缩进时对齐点运算符

> ID：11884553
> 
> 赞同：3
> 
> 时间：2012-08-09T13:28:24.670
> 
> 标签：java, c++, emacs, auto-indent

在 Emacs 类 C 模式（C++、Java）中，我希望代码缩进如下：

```
SomeClass someObject;
someObject.add( foo )
          .add( bar )
          .execute(); 
```

但是，默认情况下，Emacs 会这样做：

```
SomeClass someObject;
someObject.add( foo )
    .add( bar )
    .execute(); 
```

我如何调整缩进，我必须调整哪些变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:37:28.050

您可以使用复杂对齐（突出显示区域和`C-u M-x align-regexp`）

提示时：

```
REGEXP:  \(\.\)
GROUP:   -1
SPACING: 0
REPEAT:  n 
```

# objective-c - 使用 iOS 进行 Twitter 身份验证

> ID：11884564
> 
> 赞同：4
> 
> 时间：2012-08-09T13:29:05.943
> 
> 标签：objective-c, ios, ios5, twitter

我的应用程序使用 IOS5 twitter 集成进行了 twitter 集成，该集成非常易于使用和实现。我的问题是，是否可以使用类似于 TweetCaster 使用的框架来实现登录功能。在该应用程序上，您使用 twitter 登录，您将获得一个权限页面，如果您接受，您可以从该应用程序直接发布到 twitter。

使用我当前在应用程序中的集成，您在应用程序的文本框中输入推文，单击推文按钮，然后推文控制器打开，然后单击发送按钮。

我希望他们在文本视图中的应用程序中撰写消息（将显示一个标签，该标签将添加到他们键入的任何内容上）然后当他们单击发送时，它会直接进入 Twitter，而无需先打开 Twitter 屏幕。

这些应用程序是否使用 IOS5 的内置 twitter API？还是他们使用第 3 方工具包来处理此身份验证？

编辑：

苹果指南说

“尽管您可以代表用户执行 Twitter 请求，但您不能在用户不知情的情况下将文本、图像或 URL 附加到推文。因此，您可以在将推文呈现给用户之前设置初始文本和其他内容，但不能更改用户查看后的推文”

关于推特框架。所以我猜这意味着我不能只是将标签附加到他们键入的任何内容的末尾。

我在想有没有可能让用户在他们的推文中输入，然后当他们点击完成时，会出现一个带有文本视图的新窗口，其中包含他们输入的带有我想要添加的主题标签的任何内容。此文本视图不可编辑，以防止他们删除主题标签，然后他们单击发送将直接转到 Twitter。或者 Apple 指南是否仍然存在这种风格的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:21:26.930

不，目前您无法使用内置的 twitter 框架执行此操作。但是，您应该查看它的替代方案：它们不仅具有附加功能，而且还可以与旧版本的 iOS (3/4) 一起使用。这些是由第 3 方开发的，但质量足够好，可以在 twitter 开发网站上列出：[https ://dev.twitter.com/docs/twitter-libraries#objectivec](https://dev.twitter.com/docs/twitter-libraries#objectivec)

缺点是你可能会失去苹果版本框架的一些简单性

PS 我曾与 MGTwitterEngine 合作过 - 非常好 :)

# eclipse - 我是否需要将 .groovy 和 .settings 文件夹提交到存储库

> ID：11884566
> 
> 赞同：5
> 
> 时间：2012-08-09T13:29:06.523
> 
> 标签：eclipse, svn, grails, groovy, grails-2.0

我在本地机器上有一个 grails 应用程序，并且在 XP-DEV 中创建了一个存储库。我有文件夹`.groovy`和`.settings`项目根目录。我需要将这些文件提交到版本控制中吗？我问这个问题是因为我不知道这些文件夹的用途是什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T13:40:00.067

**更新**

5年后的开发经验，我想我需要稍微回到我原来的观点。我仍然认为，总的来说，这些文件不应该包含在源代码管理中。

但是，有一些设置可以方便地在开发人员之间共享。问题是很难知道哪些设置可以共享，哪些不可以共享。例如，任何包含绝对路径的设置都不应共享；但是您如何知道任何给定工具的配置（例如 Eclipse、IntelliJ 等）是否包含绝对路径？

如果您使用 git 进行版本控制，github`.gitignore`为各种工具[github/gitignore](https://github.com/github/gitignore)发布了大量模板。如果您想尝试共享设置，我建议使用这些模板之一。

如果这些模板不适合您，我坚持我最初的建议，即不要将这些设置签入版本控制并允许它们自动生成。然后，如果有重要的设置要共享（如代码样式模板或类似的），请提供有关如何将该设置应用于所有预期开发环境的说明。

* * *

**原答案：**

`.settings`通常由您使用的任何 IDE 创建（我知道 Eclipse 使用此约定）并包含与 IDE 相关的项目特定设置。

`.groovy`包含 groovy 的用户特定设置。例如，我知道 Grape 将依赖项下载到 .groovy 目录中。

我的意见是，不，不要提交这些目录。如果其他人签出您的项目，他们自己的这些目录的个人副本将自动生成。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-10T04:54:02.943

我不同意@Freg 的回答。.settings 文件夹包含项目特定的设置。这包括自定义编译器设置、错误和警告级别、格式化首选项、保存操作等。一般来说，在开发人员之间共享这些首选项是个好主意。如果这些设置不共享，那么您可能会遇到格式不一致和编译器问题。

一般来说，如果您想要为任何团队提供一致的开发环境，您需要将设置文件夹包含到版本控制中。

Groovy-Eclipse 中的 .groovy 文件夹用于存放特定于项目的 DSL 信息和推理建议。通常，如果您有特定于项目的推理信息，您会希望与同一项目中的其他人共享这些信息。

在我们的团队中，我们清楚地定义了每个项目将使用的所有设置，提交 .settings 文件夹，我们确信每个开发人员都会看到相同的设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T12:45:34.760

在我看来，提交 IDE 项目文件是个坏主意。如果你有特定的配置要做，你应该配置你的 maven、gradle、ant 或其他任何东西来*生成正确的配置*。

有一个我见过的问题列表

*   您的项目可能是特定于 IDE 的。
*   您将在开发和集成之间存在差异。稍后您会发现问题。
*   IDE 的配置文件取决于 IDE 版本和安装的插件。
*   人们会犯错误（这就是我们进行源代码控制的原因）某些文件会以错误的配置提交。

如果您选择提交此文件，请记住您将不得不做一些额外的手动工作以确保提交正确的文件。但是如果你正确配置你的构建工具，你只会做一次工作。;)

# css - 样式滚动条 css 颜色框

> ID：11884576
> 
> 赞同：-1
> 
> 时间：2012-08-09T13:30:08.450
> 
> 标签：css, styles, scrollbar, colorbox

我想为颜色框的滚动条设置样式，当内容大于屏幕分辨率时显示。我知道如何在 css（webkit 浏览器和 IE）中执行此操作，但我不知道我需要将 css 滚动条代码放在颜色框 css 的哪个部分。

谁知道放在那里？

附言。我在颜色框中使用 iframe: true

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:51:49.637

您可以将其放入 iframed 文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:55:42.617

将它添加到颜色框的顶部中间或底部的CSS中，没关系。

# vb.net - vb.net 来自主 dgv 的列表属性的详细数据网格视图

> ID：11884579
> 
> 赞同：0
> 
> 时间：2012-08-09T13:30:16.363
> 
> 标签：vb.net, data-binding, datagridview, master-detail, bindingsource

我有一个模型类，它有一个属性，与之相关的详细信息表列表。

例如，我的主表包含有关包裹的数据（日期、成本、数量）

明细表包含有关包装中的件数（长度、数量、数量、宽度......）

我已经将我的主表绑定到一个datagridview：

```
dgvAssemblages.DataSource = bsAssemblage
For Each objTmp As Object In lstTmp
    bsAssemblage.Add(objTmp)
Next
bsAssDet.DataSource = bsAssemblage
'bsAssDet.DataMember = "Details" 
```

在这里，bsAssemblage 是主 bindingSource，bsAssDet 是 Details 之一。

我不明白数据成员的事情，我知道我必须在其中输入表的名称，但只有当我输入字段的名称时它才有效......

此外，如果 bindingSource 为空，它会出错，所以我必须在绑定之前检查是否为空：S

所以，我已经有详细信息网格来填充事件（OnEnter），但我已经看到它应该可以让它自动绑定......

任何人都可以帮助我，也许解释一点锄头数据成员应该可以工作：S

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:29:38.877

很好，我终于找到了如何链接网格！

问题是，我做错了几件事：S

这是我的新代码：

```
dgvAssemblages.AutoGenerateColumns = True
dgvAssDet.AutoGenerateColumns = True
bsAssemblage.DataSource = reqTable(Of tabAssemblage_Entete)("Assemblage_Entête", intCurrentProject) 'lstTmp
dgvAssemblages.DataSource = bsAssemblage
reqAssemblageDetails(intCurrentProject, dgvAssemblages.DataSource.List) 'Loads the Details
dgvAssDet.DataSource = bsAssemblage
dgvAssDet.DataMember = "Details" 
```

我不确定是什么让它一切正常，我猜 AutoDenerateColumns 是为了这个。

此外，reqTable 不是用（Of tabAss ...）键入的，所以它现在知道 dataSource 中的字段是什么，即使是空的，当我第一次编写代码时，它不是那样的，

反正现在干净多了！:)

# excel - Excel：双向关系：将字段 2 插入字段 3 后字段 1 的值

> ID：11884580
> 
> 赞同：0
> 
> 时间：2012-08-09T13:30:18.760
> 
> 标签：excel

我有一个 excel 表，我在其中根据某个字段中的值进行一些多行计算，并返回最终结果。这个特定的字段可以获取一个值列表，我需要每个值的结果。有没有比手动插入和复制每一个更好的方法？多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:37:01.433

如果您有一个值列表及其对应的结果，则可以使用该`VLOOKUP`函数。假设您的值列表在单元格中`A1:A10`，在单元格中生成相应的结果`B1:B10`，并且您的特定值在单元格 C1 中。你可以`VLOOKUP`这样使用：

```
=VLOOKUP(C1, A1:B10, 1, FALSE) 
```

这将在表中查找`C1`'s 的值`A1:B10`并返回其对应的值。

# php - 将 iframe 表单提交到新窗口

> ID：11884581
> 
> 赞同：-1
> 
> 时间：2012-08-09T13:30:24.757
> 
> 标签：php, html, iframe

我的表单在 iframe 中，但我希望在新窗口中打开提交的表单。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T13:40:02.083

在表单标签中，您只需要设置“目标”属性，就像：

```
<form target="some_target"> 
```

此属性有 5 个不同的值。

**_blank**：这会将表单发布到一个全新的窗口。

**_self**：这是默认选项。它发布到与当前表单相同的窗口或框架。

**_parent**：这发布到当前 iframe 的父级。

**_top**：这发布到当前 iframe 的最顶层父级。

***framename***：您也可以自己命名目标窗口。命名目标将打开一个新窗口，并让您多次发布到同一个窗口。

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T13:36:23.823

采用：

```
<form action="form_action.php" target="_parent"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:37:50.827

a的默认`target`属性`form`是`_self`“提交到`action`页面并在我的框架中显示结果”。如果表单在 iFrame 中，则结果将显示在 iFrame 中。

为了在父框架中显示结果，添加`target="_parent"`到`form`open-tag。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T13:39:16.520

将此作为 iframe 中的表单：

```
<form target="_parent" action="blubb.php">
    <input type="text" name="var1" />
    <input type="submit" value="Send" />
</form> 
```

# svn - 我的 ftp 如何通过 SVN 根据新的本地结构更改文件结构？

> ID：11884585
> 
> 赞同：1
> 
> 时间：2012-08-09T13:30:38.517
> 
> 标签：svn

我创建了一个存在于多个站点上的 web 应用程序，如果我想更改文件结构，我如何确定 svn-repository 和实时服务器都会采用这些更改？

我正在使用 netbeans 部署到 SVN，SVN 托管在 springloops 上。

我想我有一个想法，但我不知道最后一步。

在 netbeans 中，我使用**svn->copy to**并在存储库中创建一个新文件夹。现在我有一个新的分支。

但是如果我部署新的分支，ftp 服务器会“镜像”它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:05:04.987

这完全取决于您如何设置 ftp 服务器。如果远程服务器定期检查 Subversion 存储库的更改并自动执行 a `svn update`，那么您提交到正在监视的存储库路径的任何更改都应该由服务器获取。在大多数情况下，远程服务器要么设置为监视，要么设置为`/trunk`具有特定名称的分支，例如`/deploy`. 由于您正在创建一个新分支，因此远程服务器不太可能自动检测到该分支的创建`switch`及其到该分支的工作副本。当您完成开发并将该分支合并回主干（或远程服务器正在监视的任何文件夹）时，更改应该传播到远程系统。

如果您的远程服务器未设置为自动检查并应用来自 Subversion 的更新，那么您可能需要远程登录它们并执行手册`svn update`以获取更改。

# android - 试图连接到数据库，context = null

> ID：11884586
> 
> 赞同：0
> 
> 时间：2012-08-09T13:30:45.243
> 
> 标签：android, sqlite, android-context

尝试连接数据库；我有一个问题`context = null`（很可能是）。我不明白是什么问题

```
import java.util.HashMap;

    import android.app.Activity;

    import android.content.Context;
    import android.os.Bundle;

    public class DatabaseTable extends Activity {

        private Context context;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.database_table);

            LBD conection = LBD.get(context);  // (context = null) ???
            Settings setting = new Settings(conection.getSQLiteDatabase());
            setting.create();

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:33:19.517

```
context=this;//you forgot this...

LBD conection = LBD.get(context);  // (context = null) ???
Settings setting = new Settings(conection.getSQLiteDatabase());
setting.create(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:36:02.433

试试这个 -

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.database_table);

    context = DatabaseTable.this; // you can give this instead of DatabaseTable.this also.

    LBD conection = LBD.get(context);  // (context = null) ???
    Settings setting = new Settings(conection.getSQLiteDatabase());
    setting.create();
} 
```

或者你可以给 -

```
 LBD conection = LBD.get(DatabaseTable.this);  // from this you don't need to Create any context instance of Context class. Directly pass the context here.
    Settings setting = new Settings(conection.getSQLiteDatabase());
    setting.create(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:32:27.693

尝试 `LBD conection = LBD.get(this);`

# javascript - Redactor.js S3 上传问题

> ID：11884591
> 
> 赞同：0
> 
> 时间：2012-08-09T13:31:06.463
> 
> 标签：javascript, cross-browser

我在一个网站上使用[Redactor.js](http://redactorjs.com/)，特别是[Amazon S3 图片上传功能](http://redactorjs.com/docs/examples/s3/)。我遇到了跨域脚本的问题，因为 Firebug 给出了这个错误：

```
Error: Permission denied to access property 'document' 
```

我已经独立测试了我的上传表单，并且上传正常。有任何想法吗？

**编辑**：虽然错误似乎是一个跨域问题，但实际上只是未能解析服务器响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:41:36.450

原来问题出在服务器响应上：从服务器返回的 JSON**必须**是单行。任何新行都会破坏解析器。

# iphone - Push notification not working on producation

> ID：11884596
> 
> 赞同：0
> 
> 时间：2012-08-09T13:31:28.203
> 
> 标签：iphone, ios, push-notification

I was able to receive push notifications on device using development SSL certificate. Now, I am trying to do it on the production app.

The server shows that the message was delivered successfully, but the device is not receving the message.

I can't understand what's wrong here. How can I check what what is breaking?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:52:28.357

Finally got the solution. I created the .app using the **release mode** & my problem got resolved. Earlier I have created the build using debug mode.

# jquery - jquery show/hid div 基于下拉

> ID：11884598
> 
> 赞同：0
> 
> 时间：2012-08-09T13:31:38.837
> 
> 标签：jquery, html, show-hide

我正在尝试根据来自选择下拉框中的用户输入来显示/隐藏各种 div。实际上，首先，我试图直接实现[jQuery dropdown hide show div based on value](https://stackoverflow.com/questions/7019096/jquery-dropdown-hide-show-div-based-on-value)中显示的代码，但是我缺少一些简单的东西，这会阻止它在[http://www.intertwineimages.com/form2上工作.html](http://www.intertwineimages.com/form2.html) 这是我的完整代码，谁能指出我正确的方向？

```
<html>

<script type="text/javascript">
hideAllDivs = function () {
    $("#hourly").hide();
    $("#per_diem").hide();
    $("#fixed").hide();
};

handleNewSelection = function () {

    hideAllDivs();

    switch ($(this).val()) {
        case '1':
            $("#hourly").show();
        break;
        case '2':
            $("#per_diem").show();
        break;
        case '3':
            $("#fixed").show();
        break;
    }
};

$(document).ready(function() {

    $("#project_billing_code_id").change(handleNewSelection);

    // Run the event handler once now to ensure everything is as it should be
    handleNewSelection.apply($("#project_billing_code_id"));

});
</script>
<select id="project_billing_code_id">
    <option value="">Pick one</option>
    <option value="1">1-Hourly</option>
    <option value="2">2-Per Diem</option>
    <option value="3">3-Fixed</option>
</select>

<div id="hourly">Hourly</div>
<div id="per_diem">Per Diem</div>
<div id="fixed">Fixed</div>

</html> 
```

**编辑：更正的代码**

```
<html>

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
hideAllDivs = function () {
    $("#hourly").hide();
    $("#per_diem").hide();
    $("#fixed").hide();
};

handleNewSelection = function () {

    hideAllDivs();

    switch ($(this).val()) {
        case '1':
            $("#hourly").show();
        break;
        case '2':
            $("#per_diem").show();
        break;
        case '3':
            $("#fixed").show();
        break;
    }
};

$(document).ready(function() {

    $("#project_billing_code_id").change(handleNewSelection);

    // Run the event handler once now to ensure everything is as it should be
    handleNewSelection.apply($("#project_billing_code_id"));

});
</script>
<select id="project_billing_code_id">
    <option value="">Pick one</option>
    <option value="1">1-Hourly</option>
    <option value="2">2-Per Diem</option>
    <option value="3">3-Fixed</option>
</select>

<div id="hourly">Hourly</div>
<div id="per_diem">Per Diem</div>
<div id="fixed">Fixed</div>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:39:04.243

这是因为您没有包含[http://www.intertwineimages.com/form2.html的 jquery 文件](http://www.intertwineimages.com/form2.html)

# c# - 每个会话的单个 WebForm 实例

> ID：11884599
> 
> 赞同：0
> 
> 时间：2012-08-09T13:31:41.387
> 
> 标签：c#, javascript, asp.net

我可以用什么来解决这个问题：**C#**，**ASP.NET**，**Javascript**。

2 个网页：**Index.aspx** - **Work.aspx**。

**Index.aspx**：当他们点击将他们重定向到 Work.aspx 的链接后，他们将要做的工作的统计和信息。

**Work.aspx**：开始与客户合作。

因此，我需要完成的是 Work.aspx 的单个实例。因为当他们使用 Work.aspx 时，Index.aspx 仍然是打开的（他们需要研究数据和东西），但是如果他们点击 Work.aspx 的链接，他们就会打开另一个实例，这不是我想要的。

我不知道实现这一点的最佳方法是什么，因为我在 Mutex 上找到的所有内容都是基于 winforms。（如果碰巧您有一些链接，其中包含用于在网络表单中处理互斥锁的信息，那么我可能可以从那里开始，但我还没有找到）

任何帮助将不胜感激。谢谢。

**编辑。** Work.aspx 是一个弹出窗口，因此员工可以同时打开两个 Web 表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:38:49.033

没有也不可能做到这一点。Web 应用程序本质上是无状态的，与用户的每次交互都由单独的请求-响应对组成。asp.net 为每个请求创建新的 Web 表单实例，使用它来处理请求并在之后将其删除。

那么你到底需要什么？在大多数情况下，可以有不止一页，但仍然是相同的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:41:25.887

如果我理解您的要求，您可以尝试使用[Hyperlink.Target](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.target.aspx)属性始终在同一个命名窗口中打开 Work.aspx。

```
<asp:Hyperlink runat="server" ... NavigateUrl="Work.aspx" Target="work" ... /> 
```

**更新以回应评论**

> 他们触发了一些事情，以便用他们需要的信息填充 Work.aspx ...

您需要做的是“记住”Work.aspx 服务器端的状态，例如将状态数据存储在`Session`（或其他地方：例如数据库）中。然后每次请求 Work.aspx 时，呈现具有适当状态的版本。

> 我现在能想到的是：当他们第一次打开 work.aspx 时。将 Session 变量设置为 true。每次他们再次点击 START-WORKING 时，请事先检查该会话变量以了解**它们是否被允许**。你指的是像这样的乔吗？

我认为他们应该始终被“允许”打开一个新的 Work.aspx。毕竟，用户可能已经关闭了之前的 Work.aspx 窗口，而你不会知道这个服务器端。您应该始终允许用户“开始工作” - 但显示 Work.aspx 具有最新状态，您已将其保存在服务器端某处（例如 Session）。

# internet-explorer - Chrome 和 Firefox 是否有类似于 IE 的 -noframemerging 的命令行选项？

> ID：11884606
> 
> 赞同：-1
> 
> 时间：2012-08-09T13:31:58.387
> 
> 标签：internet-explorer, firefox, google-chrome, safari, opera

我正在编写一个程序，它就像一个私人网络服务器，可以在资源 CD 自动运行时启动。一旦这个服务器启动，它就会将自己绑定到一个临时的 TCP 端口，然后会启动一个浏览器来显示资源 CD 内容。我希望这个 Web 服务器在它为 Web 浏览器启动的进程被用户关闭后自动关闭。然而，我发现，如果浏览器进程已经在运行（我在 Chrome、Safari、Firefox 和 IE 上尝试过），Web 服务器启动的进程仅用于在浏览器中启动一个新选项卡，然后关闭下。通过使用 -noframemerging 命令行选项调用可执行文件，我设法找到了 IE 的解决方法，但我在其他浏览器上并没有那么成功。

有谁知道 Chrome、Firefox、Safari 和 Opera 是否有命令行选项可以禁用这种帧合并行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:32:26.420

对于 Chrome，使用 --new-window 命令行开关。对于 Firefox，它是 -new-window。不确定其他两个。

[http://peter.sh/experiments/chromium-command-line-switches](http://peter.sh/experiments/chromium-command-line-switches)

[http://kb.mozillazine.org/Command_line_arguments](http://kb.mozillazine.org/Command_line_arguments)

# iphone - NSThread 和 NSTask 的区别

> ID：11884610
> 
> 赞同：0
> 
> 时间：2012-08-09T13:32:14.403
> 
> 标签：iphone, nsthread, nstask

这可能听起来像一个愚蠢的问题，但我已经尝试研究这两个类，我不能 100% 确定它们的区别和具体目的是什么。另外，有什么方法可以检索所有当前正在运行的进程的列表，就像 Windows 上的任务管理器一样？我在想一些静态函数将能够返回一个 NSThreads 或 NSTasks 数组......或者我可能只是在处理这个完全错误的 xD

提前感谢您的帮助！汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:09:11.913

提供 NSThread 来创建和管理后台线程。你今天没有听到太多关于它的消息，因为 Apple 最近为这些目的添加了 Grand Central Dispatch GCD 和 NSOperationQueue 等库，并提供了易用性。

NSTask 有点像 C 系统命令的包装器。它仅在 Mac OSX 环境（而非 IOS）上可用，用于启动操作系统命令 - 通常从命令行使用的命令。例如，不久前，我使用了一些我为管理 Xerox 打印机而开发的方便的 bash 实用程序，并通过使用 Cocoa 作为图形界面并使用 NSTask 启动命令行来在它们上面放置一个 Cocoa 前端。NSTask 可以映射到这些 un​​ix 命令的输入和输出，因此您可以在标准输入上向它们发送内容并在 sdout 上取回内容

希望这有助于清除它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:09:23.390

好吧，感谢这个网站，我回答了我自己的部分问题以获得流程列表：http: [//jongampark.wordpress.com/2008/01/26/a-simple-objectie-c-class-for-checking-if -a-specific-process-is-running/](http://jongampark.wordpress.com/2008/01/26/a-simple-objectie-c-class-for-checking-if-a-specific-process-is-running/)

我仍然不知道 NSTask 和 NsThread 用于虽然 Oo

# jaxb - JAXB Unmarshal：为两个模型类属性设置相同的属性值

> ID：11884611
> 
> 赞同：1
> 
> 时间：2012-08-09T13:32:16.157
> 
> 标签：jaxb, eclipselink, unmarshalling, moxy

XML 根元素有一个 id 属性，其值类似于

```
<Party id="PARTYID_1341592540748_ed044bd3-b8b2-40f9-a679-4daa411ecc45"> 
```

在这里，我需要完整的 PartyId 和它的一部分在两个不同的变量中。我正在尝试像这样实现它：

```
 @XmlAttribute
    protected String id;// complete partyId

    @XmlTransient
    @XmlAttribute(name="id")
    @XmlJavaTypeAdapter(PartyIdAdapter.class) //has logic to trim full party Id
    protected String partyId; //sub partyId 
```

但我总是为 String partyId 得到空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:10:56.570

我终于在第三个变量的帮助下实现了它：

```
@Id
    protected Long elementPK;

    protected String completeId;

    @XmlAttribute
    public void setId(String value)
    {
        this.completeId = value; 
        this.elementPK = Long.parseLong(value.split("_")[1]); 
    } 
```

如果您能想出一个优雅的解决方案，请告诉我。

# mysql - 如何在 MySQL 中获取一个季度的第一个日期？

> ID：11884618
> 
> 赞同：13
> 
> 时间：2012-08-09T13:32:54.110
> 
> 标签：mysql, date

到目前为止，我的代码如下：我试图找出用什么来代替我的 ? 以找到日期所在季度的开始日期。

```
SELECT
 QUARTER(r.callDate) AS quar,
 YEAR(r.callDate) AS ryear,
 ???????? AS scoreDateStart,
 (SELECT DATE (DATE_SUB( DATE_ADD( CONCAT( YEAR( r.callDate ), '-01-01'), INTERVAL QUARTER(r.callDate) QUARTER ), INTERVAL 1 DAY))) AS scoreDateEnd,
 group_concat(DISTINCT(r.resultId) separator ', ') AS resultIds
FROM results AS r
GROUP BY  quar, ryear
ORDER BY quar; 
```

我试过谷歌搜索但无济于事。

输出的一个例子是：

```
'1', '2012', '2012-01-01', '2012-03-31', '57, 58, 59'
'2', '2012', '2012-04-01', '2012-06-30', '10549, 10551, 12598' 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-09T13:39:30.513

试试这个：

要获取当前季度的开始日期，请使用以下命令：

```
 SELECT  MAKEDATE(YEAR(CURDATE()), 1) + INTERVAL QUARTER(CURDATE()) QUARTER 
                                       - INTERVAL    1 QUARTER 
```

所以你的查询将是：

```
SELECT
 QUARTER(r.callDate) AS quar,
 YEAR(r.callDate) AS ryear,
 MAKEDATE(YEAR(r.callDate), 1) + INTERVAL QUARTER(r.callDate) QUARTER -
  INTERVAL 1 QUARTER  AS scoreDateStart,
 (SELECT DATE (DATE_SUB( DATE_ADD( CONCAT( YEAR( r.callDate ), '-01-01'), 
 INTERVAL QUARTER(r.callDate) QUARTER ), INTERVAL 1 DAY))) AS scoreDateEnd,
 group_concat(DISTINCT(r.resultId) separator ', ') AS resultIds
FROM results AS r
GROUP BY  quar, ryear
ORDER BY quar; 
```

# jquery - jquery的slideToggle()函数不稳定

> ID：11884620
> 
> 赞同：0
> 
> 时间：2012-08-09T13:32:58.720
> 
> 标签：jquery, button, accordion

我正在使用以下代码[http://jsfiddle.net/stXP6/](http://jsfiddle.net/stXP6/)使用 slideToggle 隐藏和显示内容。这里的代码工作正常。但是当我与我的代码集成时，它的行为很奇怪。当我单击按钮时，内容会多次切换，然后在一段时间后变得稳定。

我编写了一个代码，当我点击手风琴时，一些内容仍然隐藏。但是当人们点击按钮时，它们就会变得可见。我在函数内保留了[http://jsfiddle.net/stXP6/](http://jsfiddle.net/stXP6/)上的 javascript 内容，以便单击任何手风琴选项。

有没有人遇到过这样的问题？我应该怎么做才能使它稳定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:43:31.877

您可以尝试使用[clearQueue](http://api.jquery.com/clearQueue/)并[停止](http://api.jquery.com/stop/)

```
$(".test").hide();
$(".toggleButton").click(function() {     
    $(this).next(".test").slideToggle("slow", function(){ //Wait until action is complete
        $(this).next(".test").clearQueue(); //Clears animation Queue
        $(this).next(".test").stop(); //Stops all actions
    });
});​ 
```

# android - 从数组中删除重复项

> ID：11884621
> 
> 赞同：0
> 
> 时间：2012-08-09T13:33:00.887
> 
> 标签：android, arrays, repeat

我有一种从数组中排序和删除重复项的方法：

```
public ArrayList<Integer> sortArray(ArrayList<Integer> listForSort) {

    List<Integer> sortTemp = new ArrayList<Integer>();
    ArrayList<Integer> Sortedlist = new ArrayList<Integer>();

    int[] array = new int[20];

for (int i = 0; i < listForSort.size(); i++) {
    array[i] = listForSort.get(i);
}

Arrays.sort(array);

for (int i = 0; i < array.length; i++) {
    if (!(Arrays.asList(sortTemp).contains((Integer)array[i])) && (array[i] != 0))   {
        Integer tempo = (Integer)array[i];
        Sortedlist.add(tempo);
        sortTemp.add(tempo);
        }
}
    return Sortedlist;
} 
```

但是我的方法并没有删除重复的项目。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:41:19.950

这是否完全编译（`SortedList`您尝试返回的内容甚至在上下文中都不存在）？无论如何，您可能应该首先创建一个字典（又名 map/hash）来删除重复项，然后对该字典的所有键进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:43:03.873

我的建议是使用 Set。Set 不允许输入重复项，因此您不必担心删除它们。也许就像一个 SortedSet，所以排序和重复删除是自动的。ConcurrentSkipListSet、NavigableSet、TreeSet 也是 SortedSet 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:44:16.747

你让自己变得更加困难。ArrayList 和 List 都实现了 Comparable 接口。允许您在其任何元素上调用 compareTo 方法。

```
listForSort.get(i).compareTo(sortedList.get(i)); 
```

使用带有迭代器的 List.hasNext() 考虑“脱落”列表的末尾。它将使您的数组操作更加高效。

# c++ - 位操作函数

> ID：11884629
> 
> 赞同：7
> 
> 时间：2012-08-09T13:33:24.430
> 
> 标签：c++, c, bit-manipulation, bitwise-operators

> **可能重复：**
> [如何在 C 中设置、清除和切换单个位？](https://stackoverflow.com/questions/47981/how-do-you-set-clear-and-toggle-a-single-bit-in-c)

我正在为即将到来的期末考试而学习，我想验证学习指南中的一些问题。

一些上下文：

*   该`Set()`函数将一个字节中的一个位设置为 1

*   该`Unset()`函数将一个字节中的一个位设置为 0

*   该`Flip()`功能将位“翻转”到与它相反的位置

所以我们班的某个孩子自己回答了学习指南的问题，但我已经发现了一些错误，这些答案听起来很可疑。他是这样说的：

> 哪个操作用于 Set？or 运算符 |
> 
> 哪个操作用于 Unset？Xor 运算符 ^ 完成两次
> 
> 哪个操作用于翻转？异或运算符 ^

这些是在我上面描述的函数中实现的正确按位运算符吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T13:35:37.143

设置用途或

未设置使用 And

翻转使用异或

这已经在这里得到了回答： [你如何设置、清除和切换一个位？](https://stackoverflow.com/questions/47981/how-do-you-set-clear-and-toggle-a-single-bit-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:35:46.707

你对第一个是正确的，但你应该在那一点上`Unset()`使用`&`with`0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:42:43.050

```
 00000000 |
    00000001 =
--------------
    00000001   // Sets

    00000001 &
    00000000 =
--------------
    00000000   // Unsets

    00000001 ^
    00000001 =
--------------
    00000000   // Flips 
```

If`bit`是要在字节中操作的位：

```
x |= (1 << bit);    // Sets
x &= ~(1 << bit);   // Unsets   00000001 becomes 11111110.
x ^= (1 << bit);    // Flips 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:49:44.707

对于数字 x 中的第 n 位...

```
int Set(x, n){
   return x | (1 << n);
}

int Unset(x, n){
   return (x ^ (1 << n)) ^ (1 << n);
}

int Flip(x, n){
   return x ^ (1 << n);
} 
```

# c - 可执行 C 程序中的段

> ID：11884630
> 
> 赞同：11
> 
> 时间：2012-08-09T13:33:24.367
> 
> 标签：c, linux, memory-management, memory-mapping, segments

我正在阅读有关部分和片段的内容。似乎您可以列出部分和段之间的映射，如下所示。

```
$ readelf -l test

Elf file type is EXEC (Executable file)
Entry point 0x8048330
There are 9 program headers, starting at offset 52

Program Headers:
  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align
  PHDR           0x000034 0x08048034 0x08048034 0x00120 0x00120 R E 0x4
  INTERP         0x000154 0x08048154 0x08048154 0x00013 0x00013 R   0x1
      [Requesting program interpreter: /lib/ld-linux.so.2]
  LOAD           0x000000 0x08048000 0x08048000 0x0065c 0x0065c R E 0x1000
  LOAD           0x000f14 0x08049f14 0x08049f14 0x00104 0x00110 RW  0x1000
  DYNAMIC        0x000f28 0x08049f28 0x08049f28 0x000c8 0x000c8 RW  0x4
  NOTE           0x000168 0x08048168 0x08048168 0x00044 0x00044 R   0x4
  GNU_EH_FRAME   0x000564 0x08048564 0x08048564 0x00034 0x00034 R   0x4
  GNU_STACK      0x000000 0x00000000 0x00000000 0x00000 0x00000 RW  0x4
  GNU_RELRO      0x000f14 0x08049f14 0x08049f14 0x000ec 0x000ec R   0x1

 Section to Segment mapping:
  Segment Sections...
   00     
   01     .interp 
   02     .interp .note.ABI-tag .note.gnu.build-id .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rel.dyn .rel.plt .init .plt .text .fini .rodata .eh_frame_hdr .eh_frame 
   03     .ctors .dtors .jcr .dynamic .got .got.plt .data .bss 
   04     .dynamic 
   05     .note.ABI-tag .note.gnu.build-id 
   06     .eh_frame_hdr 
   07     
   08     .ctors .dtors .jcr .dynamic .got 
```

我的问题，

1.  我不明白程序标题是什么意思？它们与细分市场有什么关系？
2.  段到段的映射很清楚。但有人能说出它的名字吗？我只看到数字。我确定了代码段（03）、数据段（02）和堆栈（07）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T17:28:45.627

了解`readelf`它的输出将有助于您了解文件的格式`ELF`。请参考[此文档。](http://www.skyfree.org/linux/references/ELF_Format.pdf)

至于理解如何解释`readelf`这个[链接](http://www.linuxforums.org/articles/understanding-elf-using-readelf-and-objdump_125.html)的输出可能会有所帮助。

至于你的问题 2，[这个链接](http://www.kernel.org/doc/man-pages/online/pages/man5/elf.5.html)描述了这些部分。在该文档中搜索“各种部分保存程序和控制信息：”以找到描述段名称的区域。

该文件对这些部分进行了如下描述：

各个部分保存程序和控制信息：

```
 .bss      This section holds uninitialized data that contributes to the
             program's memory image.  By definition, the system initializes the
             data with zeros when the program begins to run.  This section is of
             type SHT_NOBITS.  The attribute types are SHF_ALLOC and SHF_WRITE.

   .comment  This section holds version control information.  This section is of
             type SHT_PROGBITS.  No attribute types are used.

   .ctors    This section holds initialized pointers to the C++ constructor
             functions.  This section is of type SHT_PROGBITS.  The attribute
             types are SHF_ALLOC and SHF_WRITE.

   .data     This section holds initialized data that contribute to the program's
             memory image.  This section is of type SHT_PROGBITS.  The attribute
             types are SHF_ALLOC and SHF_WRITE.

   .data1    This section holds initialized data that contribute to the program's
             memory image.  This section is of type SHT_PROGBITS.  The attribute
             types are SHF_ALLOC and SHF_WRITE.

   .debug    This section holds information for symbolic debugging.  The contents
             are unspecified.  This section is of type SHT_PROGBITS.  No
             attribute types are used.

   .dtors    This section holds initialized pointers to the C++ destructor
             functions.  This section is of type SHT_PROGBITS.  The attribute
             types are SHF_ALLOC and SHF_WRITE.

   .dynamic  This section holds dynamic linking information.  The section's
             attributes will include the SHF_ALLOC bit.  Whether the SHF_WRITE
             bit is set is processor-specific.  This section is of type
             SHT_DYNAMIC.  See the attributes above.

   .dynstr   This section holds strings needed for dynamic linking, most commonly
             the strings that represent the names associated with symbol table
             entries.  This section is of type SHT_STRTAB.  The attribute type
             used is SHF_ALLOC.

   .dynsym   This section holds the dynamic linking symbol table.  This section
             is of type SHT_DYNSYM.  The attribute used is SHF_ALLOC.

   .fini     This section holds executable instructions that contribute to the
             process termination code.  When a program exits normally the system
             arranges to execute the code in this section.  This section is of
             type SHT_PROGBITS.  The attributes used are SHF_ALLOC and
             SHF_EXECINSTR.

   .gnu.version
             This section holds the version symbol table, an array of ElfN_Half
             elements.  This section is of type SHT_GNU_versym.  The attribute
             type used is SHF_ALLOC.

   .gnu.version_d
             This section holds the version symbol definitions, a table of
             ElfN_Verdef structures.  This section is of type SHT_GNU_verdef.
             The attribute type used is SHF_ALLOC.

   .gnu.version_r
             This section holds the version symbol needed elements, a table of
             ElfN_Verneed structures.  This section is of type SHT_GNU_versym.
             The attribute type used is SHF_ALLOC.

   .got      This section holds the global offset table.  This section is of type
             SHT_PROGBITS.  The attributes are processor specific.

   .hash     This section holds a symbol hash table.  This section is of type
             SHT_HASH.  The attribute used is SHF_ALLOC.

   .init     This section holds executable instructions that contribute to the
             process initialization code.  When a program starts to run the
             system arranges to execute the code in this section before calling
             the main program entry point.  This section is of type SHT_PROGBITS.
             The attributes used are SHF_ALLOC and SHF_EXECINSTR.

   .interp   This section holds the pathname of a program interpreter.  If the
             file has a loadable segment that includes the section, the section's
             attributes will include the SHF_ALLOC bit.  Otherwise, that bit will
             be off.  This section is of type SHT_PROGBITS.

   .line     This section holds line number information for symbolic debugging,
             which describes the correspondence between the program source and
             the machine code.  The contents are unspecified.  This section is of
             type SHT_PROGBITS.  No attribute types are used.

   .note     This section holds information in the "Note Section" format.  This
             section is of type SHT_NOTE.  No attribute types are used.  OpenBSD
             native executables usually contain a .note.openbsd.ident section to
             identify themselves, for the kernel to bypass any compatibility ELF
             binary emulation tests when loading the file.

   .note.GNU-stack
             This section is used in Linux object files for declaring stack
             attributes.  This section is of type SHT_PROGBITS.  The only
             attribute used is SHF_EXECINSTR.  This indicates to the GNU linker
             that the object file requires an executable stack.

   .plt      This section holds the procedure linkage table.  This section is of
             type SHT_PROGBITS.  The attributes are processor specific.

   .relNAME  This section holds relocation information as described below.  If
             the file has a loadable segment that includes relocation, the
             section's attributes will include the SHF_ALLOC bit.  Otherwise the
             bit will be off.  By convention, "NAME" is supplied by the section
             to which the relocations apply.  Thus a relocation section for .text
             normally would have the name .rel.text.  This section is of type
             SHT_REL.

   .relaNAME This section holds relocation information as described below.  If
             the file has a loadable segment that includes relocation, the
             section's attributes will include the SHF_ALLOC bit.  Otherwise the
             bit will be off.  By convention, "NAME" is supplied by the section
             to which the relocations apply.  Thus a relocation section for .text
             normally would have the name .rela.text.  This section is of type
             SHT_RELA.

   .rodata   This section holds read-only data that typically contributes to a
             nonwritable segment in the process image.  This section is of type
             SHT_PROGBITS.  The attribute used is SHF_ALLOC.

   .rodata1  This section holds read-only data that typically contributes to a
             nonwritable segment in the process image.  This section is of type
             SHT_PROGBITS.  The attribute used is SHF_ALLOC.

   .shstrtab This section holds section names.  This section is of type
             SHT_STRTAB.  No attribute types are used.

   .strtab   This section holds strings, most commonly the strings that represent
             the names associated with symbol table entries.  If the file has a
             loadable segment that includes the symbol string table, the
             section's attributes will include the SHF_ALLOC bit.  Otherwise the
             bit will be off.  This section is of type SHT_STRTAB.

   .symtab   This section holds a symbol table.  If the file has a loadable
             segment that includes the symbol table, the section's attributes
             will include the SHF_ALLOC bit.  Otherwise the bit will be off.
             This section is of type SHT_SYMTAB.

   .text     This section holds the "text", or executable instructions, of a
             program.  This section is of type SHT_PROGBITS.  The attributes used
             are SHF_ALLOC and SHF_EXECINSTR. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:15:04.143

ELF 二进制文件中的程序头描述了二进制文件应该如何运行。有趣的部分是 LOAD 标头，它将部分二进制文件加载到内存中的不同位置。二进制文件中几乎可以有任意数量的 LOAD 标头，但通常链接器会将所有只读和可执行文件放入其中，并将所有读/写内容放入另一个中。有些操作系统将具有只读数据 LOAD 标头、读写数据和只读可执行代码，以略微提高安全性。

这里的段只是表示在内存中不同位置加载的二进制文件的一部分。所以基本上不同的 LOAD 标题。

部分是链接期间数据的组织方式。由于各种原因，您希望拥有比数据/代码更好的组织粒度。一些数据是只读的，在你的例子中它被放在“.rodata”中。代码在“.text”中，初始化数据在“.data”中，而在程序启动时归零的变量中的数据在“.bss”中。

“段到段映射”告诉您哪些段位于哪些段中（不同的 LOAD 标头）。所以“.text”和“.rodata”在第一个 LOAD 头（第三个程序头）中，“.data”在第二个 LOAD 头（第四个程序头）中。

堆栈是操作系统在执行时为您提供的东西，它不是由 ELF 二进制文件描述的。

# vb.net - 对于在 VB.net 中制作的软件，另一台计算机是否需要 .NET Framework？

> ID：11884631
> 
> 赞同：0
> 
> 时间：2012-08-09T13:33:27.163
> 
> 标签：vb.net

使用 VB.net 创建的软件，可以直接在另一台计算机上安装和运行此软件，还是该计算机需要安装 .NET Framework？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:36:59.623

您需要在计算机上安装 .NET 框架（运行时，而不是 SDK）。

但是，这是 Windows 的标准部分，并且已经存在多年。不同版本的 Windows 附带不同版本的 .NET 作为标准。根据记忆，这些是：

*   XP SP2 将具有 .NET 2
*   Vista 有 .NET 3.0
*   Win7 有.NET 3.5

但是，默认情况下，Windows 更新会升级这些，因此实际上可以合理地假设它会存在于大多数机器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:36:08.087

机器需要安装 .Net Framework。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:36:45.023

如果它是用 VB.NET 编写的，那么它就是托管代码并被编译为 .NET 程序集。为了运行托管的 .NET 程序集，您必须安装 .NET 框架。因此，要回答您的问题，是的，它必须安装在任何将运行您的 VB.NET 应用程序的机器上。如果您需要使用 Visual Studio 制作可以在没有框架的情况下运行的应用程序，则需要使用 C++ 编写非托管代码。

# extjs - datepickerfield 如何显示未来几年

> ID：11884633
> 
> 赞同：0
> 
> 时间：2012-08-09T13:33:36.850
> 
> 标签：extjs, sencha-touch-2

```
 {
            xtype: 'datepickerfield',
            label: 'Start Date',
            name: 'startdate',
            value: new Date()
        }, 
```

我正在使用此代码显示时间数据选择器。选择向我展示了从 1980 年到 2012 年的年份列表。我需要有限的年份让我们想象从 2000 年到 2015 年。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:13:16.143

如果你使用

```
 yearFrom: 2000,
       yearTo: 2015 
```

如果 YearTo 已过期，您将在该年之后手动更新。

所以更好用

```
 {

                                xtype: 'datepickerfield',
                                id:'date',
                                name:'date',
                                left:'5px',
                                left:'20px',
                                width: 280,
                                dateFormat: 'Y-m-d',
                                value:{
                                          year:new Date().getFullYear(),
                                          month:new Date().getMonth()+1,
                                          day:new Date().getDate(),
                                     },
                                placeHolder:new Date(),
                                 picker:
                                {
                                    slotOrder: ['year', 'month', 'day'],
                                    value: new Date(),
                                    yearFrom:new Date().getFullYear(),
                                     yearTo: new Date().getFullYear() + 3
                                },

                    }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:38:57.560

您需要使用 yearFrom 和 yearTo 配置选项...我发现最好在 sencha touch 2 文档中浏览配置选项，通常会很快找到我要查找的内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:26:27.193

不要忘记*yearFrom*和*yearTo*与选择器相关，而不是与字段本身相关

```
{
    xtype: 'datepickerfield',
    label: 'Start Date',
    picker: {
        yearFrom: 2000,
        yearTo: 2015
    }
    name: 'startdate',
    value: new Date()
}, 
```

相对于当年：

```
{
    xtype: 'datepickerfield',
    label: 'Start Date',
    picker: {
        yearFrom: new Date().getFullYear() - 1,
        yearTo: new Date().getFullYear() + 3
    }
    name: 'startdate',
    value: new Date()
}, 
```

干杯，奥列格

# python - 使用 arcpy 编写 XML（Arcview 许可）

> ID：11884635
> 
> 赞同：0
> 
> 时间：2012-08-09T13:33:39.523
> 
> 标签：python, xml, arcgis

我需要生成要素属性数据的 xml，但我只有 Arcview 许可证，所以不能使用导出 XML 工具。我有哪些选择？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:52:29.187

Python 的标准库中已经包含了你需要的一切。下面是在 shapefile 要素类上打开搜索光标并将选定字段及其值转储到 xml 元素的代码。当所有行都完成后，它将顶部的聚合元素转储到 xml 文件中。请注意，我使用的是仅在 10.1 中可用的 arcpy.da 搜索游标，但您可以轻松修改代码以使用常规 arcpy 搜索游标（或更新游标）。

```
#in some cases cElementTree won't be available, but it's lots faster,
#so get it if we can
try:
    import xml.etree.cElementTree as et
except ImportError:
    import xml.etree.ElementTree as et

import arcpy

def rows_as_dicts(cursor):
    '''
    Yields rows from passed Arcpy da cursor as dicts
    '''
    colnames = cursor.fields
    uc = hasattr(cursor, 'updateRow')
    for row in cursor:
        row_object = dict(zip(colnames, row))
        yield row_object
        if uc:
            cursor.updateRow([row_object[colname] for colname in colnames])

def dump2xml(row, stands, elelst):
    '''
    Builds the xml tree from the passed row dict
    '''

    # stand level creation
    stand = et.Element("stand")

    stand.set("tractid", row['TRACTID'])
    stand.set('stand', str(row['STAND']))

    # add field elements with their values
    for e in elelst:
        xele = et.SubElement(stand, e)
        xele.text = str(row[e])

    #add to top level stands element
    stands.append(stand)

def main():
    #establish top level element
    stands = et.Element("stands")

    #set fields to output to xml
    fields = ('MAPNAME ACRES TYP PROGRAM SI AGE YR').split()

    #get cursor going and make the xml elements
    fc = 'c:/arcview/sf/summerville/stand.shp'
    with arcpy.da.SearchCursor(fc, ['*']) as sc:
        for row in rows_as_dicts(sc):
            dump2xml(row, stands, fields)

    #throw the entire xml tree to a file        
    xmltree = et.ElementTree(stands)
    xmltree.write('c:/temp/stands.xml', encoding='UTF-8')

    return

if __name__ == '__main__':
    main() 
```

祝你好运，

麦克风

# r - quantmod 的 getSymbol 有什么副作用？

> ID：11884636
> 
> 赞同：3
> 
> 时间：2012-08-09T13:33:41.980
> 
> 标签：r, global-variables, quantmod

我有一个日期和价格的数据框：

```
>df
Price  Date
1.25   2012-01-05
... 
```

我创建一个货币和一个股票：

```
currency("USD")
stock("GSPC", "USD") 
```

然后我创建一个 xts 对象：

```
GSPC <- xts(df$Price, df$Date)
colnames(GSPC) <- "Close" 
```

的预期用途是创建一个吸墨纸组合——这很有效。但是当我尝试

```
updatePortf(portfolio, Symbols="GSPC", Dates = current.date) 
```

我收到以下错误：

```
Error in get(Symbol, pos = env) : object 'GSPC' not found 
```

GSPC 没有出现在“showSymbols()”中，所以我认为它需要在某个地方注册。有没有办法注册符号？

受另一个 stackoverflow 答案的启发，一个非常 hacky 的解决方法是：

```
GSPC$GSPC.High <- GSPC$Open
GSPC$GSPC.Low <- GSPC$Open
GSPC$GSPC.Close <- GSPC$Open
GSPC$GSPC.Volume <- GSPC$Open
GSPC$GSPC.Adjusted <- GSPC$Open

write.zoo(GSPC, file="GSPC.csv", sep=",")
setSymbolLookup(GSPC=list(src="csv",format="%Y-%m-%d"))

getSymbols("GSPC") 
```

有没有更好的方法来创建上述内容？我没有（需要）音量、高、低、关闭和调整 - 我仍然需要它们来做吸墨纸吗？

**更新** 我设法重现了这个问题，然后明白了它的原因。似乎您无法在本地函数环境中声明 xts 对象。这是一个可重现的脚本：

```
library(xts)
library(FinancialInstrument)
library(blotter)
library(lubridate)
rm(list=ls(envir=.blotter),envir=.blotter)

runme <- function() {
  currency("USD")
  stock("GSPC", "USD")

  dates <-ymd("2012-03-02") + seq(0,9) * ddays(1)
  prices <- abs(rnorm(10))

  GSPC <- xts(prices, dates)
  colnames(GSPC) <- "Close"

  # Initialise
  initPortf("p", symbols="GSPC", initDate=ymd("2012-01-01"), currency="USD")
  initAcct("a", portfolios="p", initDate=ymd("2012-01-01"), initEq=2e6, currency="USD")

  trade.date <- ymd("2012-03-04")
  addTxn("p", "GSPC", trade.date, 1, GSPC[trade.date])

  updatePortf("p", Symbols="GSPC", Dates = trade.date)
  updateAcct("a", Dates = trade.date)

  updateEndEq("a", Dates = trade.date)

  chart.Posn("p")

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:50:12.647

**吸墨纸**包使用FinancialInstrument**包**。您可能需要定义您的乐器。我认为如果你做这样的事情它应该工作。

```
synthetic("GSPC", currency("USD")) 
```

如果没有，也许您可​​以提供一个可重现的示例。（我们没有你的作品集）

**编辑：**

为了更直接地回答标题中的问题，请在您用于加载的所有符号中`getSymbols`存储一个`list`调用。但是，我不认为**吸墨纸**会看它。`.getSymbols``.GlobalEnv``getSymbols`

 ****编辑2：**

您收到的错误消息是告诉您`.GlobalEnv`命名的“GSPC”中没有数据。您必须在您的 中有一个`xts`对象，或者在参数中`.GlobalEnv`传递一个`xts`对象。同样，如果您的示例是可重现的，我可以提供更好的帮助（更不用说它会使它对本网站的未来访问者更有用）。`updatePortf``Prices`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:16:10.220

为了完整起见，要使上面的代码段正常工作，您需要将 GSPC 分配给 .GlobalEnv：

```
assign("GSPC", GSPC, envir=.GlobalEnv) 
```

完整的脚本是：

```
library(xts)
library(FinancialInstrument)
library(blotter)
library(lubridate)
rm(list=ls(envir=.blotter),envir=.blotter)

runme <- function() {
  currency("USD")
  stock("GSPC", "USD")

  dates <-ymd("2012-03-02") + seq(0,9) * ddays(1)
  prices <- abs(rnorm(10))

  GSPC <- xts(prices, dates)
  colnames(GSPC) <- "Close"
  assign("GSPC", GSPC, envir=.GlobalEnv)

  # Initialise
  initPortf("p", symbols="GSPC", initDate=ymd("2012-01-01"), currency="USD")
  initAcct("a", portfolios="p", initDate=ymd("2012-01-01"), initEq=2e6, currency="USD")

  trade.date <- ymd("2012-03-04")
  addTxn("p", "GSPC", trade.date, 1, GSPC[trade.date])

  updatePortf("p", Symbols="GSPC", Dates = trade.date)
  updateAcct("a", Dates = trade.date)

  updateEndEq("a", Dates = trade.date)

  chart.Posn("p")

} 
```**

# php - 使用侦听器作为服务而不是服务有什么好处

> ID：11884637
> 
> 赞同：1
> 
> 时间：2012-08-09T13:33:43.133
> 
> 标签：php, service, symfony, listener

仅供参考，我刚刚开始使用 Symfony，话虽如此......

使用侦听器作为服务而不是服务有什么好处？

查看文档，我发现我可以将侦听器用作服务：

*   [http://symfony.com/doc/current/cookbook/service_container/event_listener.html](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)

但我也可以使用事件调度程序：

*   [http://symfony.com/doc/current/components/event_dispatcher/introduction.html](http://symfony.com/doc/current/components/event_dispatcher/introduction.html)

获得相同的功能还是我错过了什么？

我要做的是创建一个监听自定义事件的服务，我对上述场景应该采取的路线有点困惑。我看过一些关于每种设置的帖子，但没有比较两者及其差异。

感谢您的任何见解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:41:15.217

简而言之，Symfony 应用程序中的事件类似于 JavaScript 中的事件：不是监听大部分与 UI 相关的事件（如鼠标点击、悬停等），而是监听应用程序中的任意事件（如异常抛出、正在发送响应，正在创建用户等）。

EventDispatcher 是围绕[观察者](http://en.wikipedia.org/wiki/Observer_pattern)模式构建的。对于任何发生的事件，调度程序会通知所有已注册的侦听器该事件。当然，您可以从服务容器中检索调度程序并手动注册侦听器，但这不允许我们事先侦听正在触发的事件。更糟糕的是，侦听器仅在该控制器操作中注册。

通过将侦听器配置为服务，您实际上是让框架自己完成注册过程。如果您查看`app/cache/dev/appDevDebugContainer.php`（可能有点不同的名称，在我的脑海中写下这个）并搜索`event_dispatcher`，您应该能够看到事件是如何自动注册的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:38:21.840

顾名思义，一个均匀的监听器“监听”事件，而一个事件调度器“调度”（发送）它们。

如果您想要一个侦听自定义事件（即您创建的事件）的服务，那么您必须创建一个事件调度程序来发送事件和一个监听器来侦听它们

# bash - 在一个复制命令停止后，如何获得一个 shell 脚本来继续复制文件？

> ID：11884640
> 
> 赞同：2
> 
> 时间：2012-08-09T13:33:49.410
> 
> 标签：bash, shell, scripting, cygwin

我在 WinXP 上运行 Cygwin。我编写了以下 shell 脚本来将文件从网络驱动器复制到远程服务器...

```
scp -P 9998 //tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/*ela*L1*TE* dalvarado@localhost:/var/www/html/sbo/2010/teacher/ela/level1
scp -P 9998 //tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/*ela*L1*SE* dalvarado@localhost:/var/www/html/sbo/2010/student/ela/level1
scp -P 9998 //tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/*ela*L2*TE* dalvarado@localhost:/var/www/html/sbo/2010/teacher/ela/level2
scp -P 9998 //tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/*ela*L2*SE* dalvarado@localhost:/var/www/html/sbo/2010/student/ela/level2 
```

问题是当我运行这个脚本时，偶尔我会得到类似下面的错误（“没有这样的文件或目录”），然后脚本就会停止。

```
sh copy_files.sh    
...
cb_sb_ela_miu_L1_U2_activity2_12_SE.pdf                                                                                                           100%  771KB  51.4KB/s   00:15
cb_sb_ela_miu_L1_U2_activity2_13_SE.pdf                                                                                                           100%  716KB  55.0KB/s   00:13
cb_sb_ela_miu_L1_U2_activity2_14_SE.pdf                                                                                                           100%  966KB  50.8KB/s   00:19
cb_sb_ela_miu_L1_U2_activity2_15_SE.pdf                                                                                                            71%  640KB  36.9KB/s   00:06 ETA
//tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/cb_sb_ela_miu_L1_U2_activity2_15_SE.pdf: No such file or directory 
```

即使出现此错误消息，有没有办法让脚本继续复制文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:45:52.773

尝试一次复制一个文件。这样，失败的副本不会杀死脚本和其他副本。循环执行此操作...

```
for i in //tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/*ela*L1*TE*
do
    scp -P 9998 "$i" dalvarado@localhost:/var/www/html/sbo/2010/teacher/ela/level1
done

for i in //tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/*ela*L1*SE*
do
    scp -P 9998 "$i" dalvarado@localhost:/var/www/html/sbo/2010/teacher/ela/level1
done

for i in //tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/*ela*L2*TE*
do
    scp -P 9998 "$i" dalvarado@localhost:/var/www/html/sbo/2010/teacher/ela/level2
done

for i in //tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/*ela*L2*SE*
do
    scp -P 9998 "$i" dalvarado@localhost:/var/www/html/sbo/2010/teacher/ela/level2
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:19:38.173

您使用的脚本是从网络驱动器进行 scp 复制。当源文件（scp 只是复制）或目标变得不可用时，可能网络问题导致整个脚本停止。
在进行此类传输之前，最好的方法是首先将文件复制到本地缓冲区，必要时检查它们，将它们归档到一个文件中，然后将它们发送到已经在所需目录结构中的目标服务器。通过这种方式，您可以更好地了解哪些方面或哪一方失败了。

到目前为止，这种传输脚本的 scriptng 最佳实践。

只专注于小片段， scp 行 - 一个复制命令正是这一行：

```
scp -P 9998 //tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/*ela*L2*TE* \
            dalvarado@localhost:/var/www/html/sbo/2010/teacher/ela/level2 
```

您在脚本中使用了 4 个这样的命令，如果一个挂起，其他行没有机会继续。因此，在您的算法中，以下方式会更好：

```
scp -P 9998 <sourceL1TE> <targetL2TE> &
scp -P 9998 <sourceL2TE> <targetL2TE> &
scp -P 9998 <sourceL1SE> <targetL2TE> &
scp -P 9998 <sourceL2SE> <targetL2TE> & 
```

& 符号会将每一行发送到后台，因此其他行也将开始，而无需等待前一行完成。

接下来，您在批处理模式下使用 scp，而不通知 scp 在批处理模式下的行为。你应该考虑：

```
scp -Bq -P 9998 <sourceL1TE> <targetL2TE> &
scp -Bq -P 9998 <sourceL2TE> <targetL2TE> &
scp -Bq -P 9998 <sourceL1SE> <targetL2TE> &
scp -Bq -P 9998 <sourceL2SE> <targetL2TE> & 
```

它将使脚本的其余部分继续。

现在知道一些传输问题偶尔会导致 scp 过时，您可以通过添加超时选项来解决过时问题。如果连接过长，它可以帮助停止 scp。

```
scp -Bq -o ConnectTimeout 30 -P 9998 <sourceL1TE> <targetL2TE> &
scp -Bq -o ConnectTimeout 30 -P 9998 <sourceL2TE> <targetL2TE> &
scp -Bq -o ConnectTimeout 30 -P 9998 <sourceL1SE> <targetL2TE> &
scp -Bq -o ConnectTimeout 30 -P 9998 <sourceL2SE> <targetL2TE> & 
```

等等。

有很多方法可以使用 bash 脚本和 scp 选项以及其他实用程序来做得更好。以上只是一个好的开始。您甚至可以考虑遵循失败的原因并为失败的源重新启动 scp。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T13:51:18.107

看到日志

```
sh copy_files.sh    
...
cb_sb_ela_miu_L1_U2_activity2_12_SE.pdf                                                                                                           100%  771KB  51.4KB/s   00:15
cb_sb_ela_miu_L1_U2_activity2_13_SE.pdf                                                                                                           100%  716KB  55.0KB/s   00:13
cb_sb_ela_miu_L1_U2_activity2_14_SE.pdf                                                                                                           100%  966KB  50.8KB/s   00:19
cb_sb_ela_miu_L1_U2_activity2_15_SE.pdf                                                                                                            71%  640KB  36.9KB/s   00:06 ETA
//tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/cb_sb_ela_miu_L1_U2_activity2_15_SE.pdf: No such file or directory 
```

很明显 scp 命令在该目录中找不到该文件`cb_sb_ela_miu_L1_U2_activity2_15_SE.pdf`。`scp`是一个相当简单的工具，但如果您尝试复制的源根本不存在，则会引发错误。我“可能”在`scp`命令到达文件（使用通配符）时，文件已被移动或删除。此外，建议您将`recursive`标志用于通配符副本，例如

```
scp -Bpqr //tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/*ela*L1*TE* dalvarado@localhost:/var/www/html/sbo/2010/teacher/ela/level1 
```

您还可以在执行以下操作之前对每个文件执行文件检查以查看该文件是否存在`scp`。这样，您始终可以确定您尝试传输的文件确实存在。

```
#copies all level1 files to level1 directory
for file in `ls -1 //tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/*ela*L1*`
do
   if [ -f $file ] then
     scp -Bpq $file dalvarado@localhost:/var/www/html/sbo/2010/teacher/ela/level1
   fi
done

#copies all level2 files to level2 directory
for file in `ls -1 //tdggendska10/vig-preview-dmz-prod/docs/sbo/pdf/*ela*L2*`
do
   if [ -f $file ] then
     scp -Bpq $file dalvarado@localhost:/var/www/html/sbo/2010/teacher/ela/level2
   fi
done 
```

# android - 用于在 Android 中进行跟踪的网络位置与 GPS 位置

> ID：11884642
> 
> 赞同：1
> 
> 时间：2012-08-09T13:33:58.363
> 
> 标签：android, gps, location

我有点好奇地想知道你对这个问题的看法。我有一个需要一直跟踪用户的应用程序。它需要每 50 米读取一次位置，这是我注册位置侦听器时的参数。读取始终在后台服务中完成。无需担心电池使用情况。

有趣的部分来了，我想尝试使用网络位置，当精度很高时，改为使用 GPS 读数。该应用程序大部分时间在有许多蜂窝和 wifi 网络的城市中使用，因此网络读数非常准确。问题是：网络位置读数非常罕见，例如1公里内有4次，所以基本上这不适合跟踪。即使我给听众 50 米的提示，也会发生这种情况。

我的问题是，我做错了吗？如果我将提供商从网络切换到 GPS，则读数正确并按预期发生。作为结论，网络位置不适合跟踪？还有一个简短的问题：为了更准确的网络位置需要启用 Wifi 模块，对吗？这意味着它会比 GPS 模块使用更多的电池？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:39:10.437

是的，你是对的。网络位置不适合跟踪（至少不符合您要求的准确度）。是的，如果您希望网络位置更准确，您需要启用 wifi。这是否会比 GPS 使用更多或更少的电池，很大程度上取决于设备和情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:56:02.777

我认为你在这里错过了重点。您只希望每 50 米定位一次以节省电池电量，但除非位置监听器处于开启状态，否则设备不会知道它已移动了 50 米。因此，最小距离“提示”只能控制 onLocationChanged() 何时触发，而不是 GPS 是否开启。当我的手机将 Gingerbread 作为操作系统时，最小距离参数被忽略了，现在它在 ICS 上似乎很荣幸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:40:22.777

它可能不会比 GPS 使用更多的电池，但网络提供商并没有被切断用于跟踪目的。如果您不必担心电池的使用，那么您应该一直使用 GPS，并且只有在您没有从 GPS 获得任何数据时（例如，当您在室内并且可以没有得到修复）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T12:12:31.537

它可能不是您确切问题的答案。但是，当您使用网络或 GPS 提供商修复位置时，它会给您一些关于`battery usage`和的想法。`accuracy`

大多数手机公司都关闭了手机中的 GPS，但紧急呼叫和他们向您出售的服务（例如方向）除外。这种类型的 GPS 称为 A-GPS。

基本上，它就像 GPS Provider 一样，它也使用网络连接。由于使用 GPS 的网络连接，它还可以提供`more accurate`位置定位`even in-door`（大多数情况下，GPS 单独在户外也能正常工作）。

在考虑电池使用时，它不仅仅依赖于 GPS。得到原始数据后，Network 将采取处理数据的动作。所以，它`won't use that much battery level`就像 GPS 一样使用。

注意：[参考](https://stackoverflow.com/questions/33637/how-does-gps-in-a-mobile-phone-work-exactly)（亚当戴维斯的回答）。

希望，你会有更多的想法！

# c++ - 在 C++ 中，当我们创建对象时，构造函数会初始化，但是如果我想再次重新初始化对象，比如在 main 中的某个时刻，该怎么办？

> ID：11884643
> 
> 赞同：2
> 
> 时间：2012-08-09T13:34:01.163
> 
> 标签：c++, oop

例如我有这个示例代码：

```
class Player
{
   int grid;
   Player()
   {
      grid = 0;
   }

}
void main()
{
   Player p;
   ...
   ...
   //now again I want to initialize p here, what to write ?
} 
```

如何再次调用 p 的构造函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:46:39.513

将对象放入本地范围：

```
while (running)
{
    Player p;  // fresh

    //...
} 
```

每次循环体执行时，`Player`都会实例化一个新对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T13:40:20.293

```
class Player
{
   int grid;
   Player()
   {
      grid = 0;
   }

}
void main()
{
   Player p;
   ...
   ...
   //now again I want to initialize p here, what to write ?
   p = Player();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T13:34:43.960

添加`init`功能。在构造函数中调用它，但也将其公开，以便您以后可以再次调用它。

实际上你可以做任何你想改变状态的函数：

```
class Player
{
public:
    void setState(/*anything you want*/) {}
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T15:42:43.993

加强安德鲁的回答：

```
class Player
{
public:
    Player()
    {
        reset(); //set initial values to the object
    }

    //Must set initial values to all relevant fields        
    void reset()
    {
        m_grid = 0; //inital value of "m_grid"
    }

private:
    int m_grid;
}

int main()
{
    Player p1;
    Player* p2 = new Player();

    ...
    ...
    p1.reset(); 
    p2->reset(); //Reset my instance without create a new one.
} 
```

# android - 如何使弹出菜单出现在 onCreate 中？

> ID：11884646
> 
> 赞同：0
> 
> 时间：2012-08-09T13:34:13.540
> 
> 标签：android, menu, dialog

我有一个通过单击菜单按钮调用的选项菜单，但我想要一个在应用程序启动时调用的选项菜单。这是一个语言选择设置。

我搜索了很多，但我只找到如何让它出现`onCreateOptionsMenu(Menu menu)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:28:17.857

我确定您正在寻找如何以编程方式打开菜单，

以下链接有一个很好的例子，

[http://kahdev.wordpress.com/2010/03/15/progamatically-open-and-close-an-activitys-option-menu/](http://kahdev.wordpress.com/2010/03/15/progamatically-open-and-close-an-activitys-option-menu/)

您可以通过对该示例教程进行一些细微的修改来完成您的任务。

**编辑**

对于自定义菜单，您需要使用 xml 或 java 创建自己的菜单。但首选 XML。

[来自开发者网站](http://developer.android.com/guide/topics/ui/menus.html#xml)的示例菜单

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/new_game"
          android:icon="@drawable/ic_new_game"
          android:title="@string/new_game"
          android:showAsAction="ifRoom"/>
    <item android:id="@+id/help"
          android:icon="@drawable/ic_help"
          android:title="@string/help" />
</menu> 
```

那么您需要膨胀菜单资源才能在活动中使用

来自[开发者网站的示例](http://developer.android.com/guide/topics/ui/menus.html#options-menu)

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.game_menu, menu);
    return true;
} 
```

**编辑**

然后你可以简单地使用警报对话框`setSingleChoiceItems();`

[开发人员](http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog)站点为每种对话类型提供了足够的示例。

例如警报对话框

```
final CharSequence[] items = {"Red", "Green", "Blue"};

AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Pick a color");
builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int item) {
        // This is the place where you need to execute the logic            
    }
});
AlertDialog alert = builder.create(); 
```

但是你需要调用`alert.show();`来显示对话框，例如你可以在`onResume()`方法中调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:41:33.587

OnCreate 始终运行您的 Activity 已创建，如果您此时创建 AlertDialog 并调用 show()，它只会在您的 activty 完成初始化后显示（在 onResume() 之后），在此之前，屏幕上没有任何内容。

你能解释一下你预计会发生什么吗？

# google-maps - Google Maps API - 使用 GoogleMapSlider 在域上禁用

> ID：11884647
> 
> 赞同：0
> 
> 时间：2012-08-09T13:34:20.670
> 
> 标签：google-maps

我正在使用来自 css-tricks 网站的应用程序 GoogleMapSlider，一切都运行良好，但昨天我收到此错误消息：**“Google 已禁用此应用程序的 Maps API。有关更多信息，请参阅服务条款：[http:// www.google.com/intl/en-US_US/help/terms_maps.html](http://www.google.com/intl/en-US_US/help/terms_maps.html)。**

然后，我尝试改变这个：

```
<script type='text/javascript' src='http://maps.google.com/maps/api/js?sensor=true'> 
```

对此：

```
<script type="text/javascript"  src='http://maps.googleapis.com/maps/api/js?key=AIzaSyBHbK62TIIyLtdO2r7qTjhXND7oh-9M2cA&sensor=true"> 
```

但仍然无法正常工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:27:15.123

这可能是您的密钥用于一个网站。

您可以按照此获取另一个 Google 地图 api v3 密钥：

[https://developers.google.com/maps/documentation/javascript/tutorial#api_key](https://developers.google.com/maps/documentation/javascript/tutorial#api_key)

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:02:59.533

最后！我解决了这个问题，我使用的是脚本的本地版本。另外，我`sensor="false"`也做了。

不需要 API KEY，因为 v3 不再需要申请 API 密钥。

# linux - 小文件超过一分钟未提交到磁盘

> ID：11884650
> 
> 赞同：4
> 
> 时间：2012-08-09T13:34:23.970
> 
> 标签：linux, caching, embedded, disk, xfs

*我有一个嵌入式 Linux 应用程序，它以相当慢的速度（ 50*字节/秒左右）写入文件。该文件位于硬盘驱动器 XFS 文件系统上。该文件是通过调用`write()`而不是`fwrite()`.

如果我重启系统并检查文件，就会丢失超过一分钟的数据。*我认为默认的 Linux 行为是每5 秒*同步一次磁盘缓存（我可以容忍*5 秒*的丢失数据，所以他们不会有这个问题）。我应该检查什么以查看为什么它长时间没有同步？`/proc/sys/vm/dirty_writeback_centisecs`是*500*。我应该检查其他可更改的东西吗？它肯定看起来是磁盘缓存问题 - 如果我`ls -l`是文件，则大小符合预期，并且在重新启动后它比以前小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:12:19.053

五秒的行为仅适用于 ext3/ext4 文件系统，您可以通过提交挂载选项来控制它（默认为 commit=5）。我不知道 XFS 的行为如何。

您可能是指 VM 子系统中的 30 秒限制。默认情况下，Linux 最多可以等待 30 秒来写入数据。您可以使用以下方法获取/设置限制：

```
# cat /proc/sys/vm/dirty_expire_centiseconds
3000 
```

显示数百秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:09:04.383

嗯，我不确定 5s 是否是“Linux 中的默认值”。据我所知，延迟取决于文件系统，尽管我可能弄错了。我相信 XFS 上缓存同步的最大延迟是（或至少是不久前）30 秒。如果我没记错的话，对于一些较旧的文件系统（我相信是 ext2 和 ext3）来说，5 秒的数字是正确的，而对于 ext4 来说，它并不适用。

总之，发生在您身上的是预期的行为。

如果你想超越缓存，我相信你需要使用 fsync、O_SYNC 或 O_DIRECT。或者在挂载文件系统时应用“同步”选项，这应该可以解决全局问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:18:29.567

好吧，XFS 以这种“失败”而闻名。问题与写入缓存有关。[有关XFS 常见问题解答](http://www.xfs.org/index.php/XFS_FAQ#Q%3a_Why_do_I_see_binary_NULLS_in_some_files_after_recovery_when_I_unplugged_the_power.3F)的更多信息。

# asp.net - 通过抓取所有页面来测试网络

> ID：11884656
> 
> 赞同：1
> 
> 时间：2012-08-09T13:34:49.157
> 
> 标签：asp.net, asp.net-mvc-3, unit-testing, web-crawler

我在 ASP.NET MVC 3 中开发网站，并且由于视图是在第一次访问后编译的，因此有时我会遇到这种情况，我发布的网站带有一些带有错误（如拼写错误）的 Vies。

我想创建类似单元测试的东西，它会尝试访问所有页面，以避免视图中的任何错误。

创建另一个将在本地主机上抓取网络的程序应该很容易，但我想将它集成到单元测试循环中。这可能吗？

我应该自己写写简单的爬虫还是应该使用现有的东西？

此外，最好获取页面列表及其连接数，以查看哪些页面可通过多少链接访问。爬虫应该只爬我的网站，而不是外部链接。它还可以帮助查找从起点（索引页面）无法访问的页面。

我的网站有 100 页，所以性能不是问题 :)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:38:44.583

试试**“搜索引擎优化工具包”**很好的工具：

**使用站点分析模块**

[搜索引擎优化工具包](http://www.iis.net/download/seotoolkit)

**场地分析功能**

功能齐全的爬虫引擎

可配置数量的并发请求以允许用户在不产生额外处理的情况下抓取他们的网站。这可以配置为 1 到 16 个并发请求。

支持 Robots.txt，允许您自定义爬虫应分析的位置以及应忽略的位置。

支持站点地图文件，允许您指定要分析的其他位置。

支持覆盖“noindex”和“nofollow”元标记，即使搜索引擎不会处理它们，您也可以分析页面以帮助改善客户体验。

可配置的分析限制、要下载的最大 URL 数以及每个 URL 下载的最大千字节数。

用于仅包含来自您的目录或整个站点和子域的内容的可配置选项。

通过丰富的仪表板查看网站分析结果的详细摘要

功能丰富的查询生成器界面，允许您构建自定义报告

快速访问常见任务

显示每个 URL 的详细信息

查看显示独特路线的详细路线分析，以更好地了解搜索引擎到达您的内容的方式

**“Linkbot”**是另一个你可以看到的有用的工具：

Linkbot 是一个屡获殊荣的网站管理实用程序套件，可帮助网站管理员跟踪和修复其网站上的问题。Linkbot 在一个集成软件包中包含维护无错误站点所需的所有工具：用于快速站点分析的高性能多任务引擎、查找和修复损坏的链接、定位缓慢和过时的页面、查找不再使用的孤立文件、地图找出网站的结构和组织，检查密码保护和安全区域，全面的 HTML 报告，自动生成最新页面，创建网站上所有图像的画廊等等！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:57:25.797

[http://haacked.com/archive/2011/05/09/compiling-mvc-views-in-a-build-environment.aspx](http://haacked.com/archive/2011/05/09/compiling-mvc-views-in-a-build-environment.aspx)

只需按照此操作，视图将在调试或发布中构建。当存在视图编译器错误时，构建将失败。

另一方面，如果您仍想抓取以查找损坏的链接，请查看[WebDriver](http://www.nuget.org/packages/Selenium.WebDriver)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:43:09.980

夜精灵，

捕获拼写错误的最简单方法是在`Release`模式（而不是默认`Debug`模式）下编译解决方案，这样，所有视图都被编译并且错误显示在`Error List`. 当然，您需要超越这一点（例如查找无法访问的链接），但这肯定会捕获您所有的拼写错误。

# exception - 将数据加载到 Hive 时出错

> ID：11884659
> 
> 赞同：1
> 
> 时间：2012-08-09T13:34:55.850
> 
> 标签：exception, hadoop, hive

我正在尝试使用以下命令将本地计算机上的 csv 文件中的数据加载到在 Hive 上创建的测试数据库中

```
LOAD DATA LOCAL INPATH 'bdata/tx/TX_2012.csv' 
INTO TABLE testdb PARTITION(dt='08-09-2012'); 
```

但是，我不断收到以下错误：

```
Copying file: file:/root/business-data/sc_sd_tn_tx_ut/TX_6_17_2012.csv
Failed with exception java.io.IOException: File /tmp/hive-root/hive_2012-08-09_13-21-   49_208_3491106775735913267/-ext-10000/TX_6_17_2012.csv could only be replicated to 0 nodes, instead of 1
at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1558)
at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:696)
at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.CopyTask 
```

我似乎无法弄清楚是什么导致了这个错误。我什至尝试在单节点和多节点集群上重新安装和重新配置 Hive，但仍然遇到相同的错误。谁能解释错误是什么并指出我正确的方向？

注意：我使用的是 Hadoop 1.0.3 和 Hive-0.8.1，并按照以下教程进行安装和配置：

[https://cwiki.apache.org/confluence/display/Hive/GettingStarted](https://cwiki.apache.org/confluence/display/Hive/GettingStarted)

[http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:19:15.960

线

> 只能复制到 0 个节点，而不是 1 个

让我觉得这是一个数据节点问题。您是否在 Hive DB 所在的 hadoop 集群中运行了至少一个数据节点？

# java - 是否有任何与 Spring 集成的 Java PDF 库？

> ID：11884662
> 
> 赞同：1
> 
> 时间：2012-08-09T13:35:24.087
> 
> 标签：java, spring, pdf, spring-mvc

> 不仅如此，Spring 并没有与 Servlet 或 JSP 紧密耦合以将视图呈现给客户端。现在也可以与 Velocity、Freemarker、Excel 或 Pdf 等其他 View 技术集成。

**～** [源](http://viralpatel.net/blogs/tutorial-spring-3-mvc-introduction-spring-mvc-framework/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:39:12.620

您可以使用 Velocity 将动态数据结合到 XSL-FO 中，并使用 XSL-FO 引擎创建 PDF，例如来自 Apache 的引擎。

如果您喜欢在 Java 类中使用 iText，则可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:39:49.130

是的，请查看：

[http://www.mkyong.com/spring-mvc/spring-mvc-export-data-to-pdf-file-via-abstractpdfview/](http://www.mkyong.com/spring-mvc/spring-mvc-export-data-to-pdf-file-via-abstractpdfview/)

[http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/view/document/AbstractPdfView.html](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/view/document/AbstractPdfView.html)

# jquery - 通过重新调整可编辑文本在 Div 中移动图像

> ID：11884663
> 
> 赞同：3
> 
> 时间：2012-08-09T13:35:27.363
> 
> 标签：jquery, css, jquery-ui

我希望能够移动图像并在同一屏幕上输入 div，并在移动图像时将文本环绕在图像周围。到目前为止，我已经能够做到这一点：

[http://jsfiddle.net/uk6DA/](http://jsfiddle.net/uk6DA/)

但是当图像移动时，文本不会改变它的位置。移动图像时如何重新调整文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:37:12.350

我认为这一切都与 DOM 中的位置有关。

如果你认真做这样的事情，我认为你将不得不在移动它时找到元素所在的位置，然后根据它在 DOM 中更改它的位置。您可能也希望将文本放入元素中。

所以，一开始，`#typer`在正文之前。但是当你移动它时，你将不得不做几件事。您必须查看左边缘和上边缘的位置`#typer`，以及它们位于顶部的文本。然后，您必须进行计算以从那里在 DOM 中修改它们。

我猜你要么必须在文本中添加一堆`span`'s 或`div`'s，以便能够适当地重新创建文本，以适应元素。这也会有点困难，因为长度不是固定的，它们是动态的。使用`div`or中的文本`span`，您不会将“环绕”到页面的一侧，它只会下降到该元素中的下一行。

# 最初设定

![在此处输入图像描述](../Images/a979ac9bf5e1dd3f430dac2686fef1d6.png)

# 运动后

![在此处输入图像描述](../Images/a23c9195340785ae92a0511b69cc4645.png)

这应该解释你将如何将它们分开。它可能会变得相当复杂，但你可以做到。您只需要处理不同类型的测量即可。我过去做过与此非常相似的事情。

基本上，只需跟踪您拆分文本的位置（这就是它们按顺序排列 ID 的原因），这样您就可以加入它们。测量文本占用了多少空间，图像占用了多少空间，以及您可以使用的画布区域有多大。

从那里开始，您应该对要做什么有一个很好的衡量标准。只要确保您的文本在溢出时不会中断到下一行。如果发生这种情况，它将打破并破坏幻觉。

因此，就 DOM 中的位置而言：

# 最初设定

```
<div id="typer">
    <img id="img" />
    <div class="text"> ..... </div>
</div> 
```

# 运动后

```
<div id="typer">
    <div class="text" id="text1"> ... </div>
    <div class="text" id="text2"> ... </div>
    <div class="text" id="text4"> ... </div>
    <div class="text" id="text6"> ... </div>
    <div class="text" id="text8"> ... </div>
    <img id="img" />
    <div class="text" id="text3"> ... </div>
    <div class="text" id="text5"> ... </div>
    <div class="text" id="text7"> ... </div>
    <div class="text" id="text9"> ... </div>
    <div class="text" id="text10"> ... </div>
</div> 
```

这也将是为 CSS 设置它的“最简单”的路线，除非你`position: absolute;`一切都可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:20:41.567

单词没有坐标，因此您必须用 html-tag 包装每个单词。显然这会增加很多文本。

[http://meindesign.net/tools/running_text.php](http://meindesign.net/tools/running_text.php)

这是您需要的最佳示例。

而且我不知道这是如何工作的..但你可能也想看看这个

[http://www.jwf.us/projects/jQSlickWrap/](http://www.jwf.us/projects/jQSlickWrap/)

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:05:08.140

您是否尝试过使用“调整大小”的 img div 以及其中的文本？

你可以浮动：左；img 和正确的文本。放置一个最小宽度以避免它太小。

# windows - Installshield 将用户定义的属性写入注册表

> ID：11884676
> 
> 赞同：3
> 
> 时间：2012-08-09T13:36:19.023
> 
> 标签：windows, installation, installshield-2010

我正在制作一个安装程序，其中我定义了自己的安装程序属性。我想将此属性存储在注册表中。由于只有安装程序需要此属性，我认为存储它的最佳位置是：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{PRODUCT CODE}. 
```

我使用 Installshield 2010 来制作安装程序。

我想知道的是：这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:41:17.453

是的，这是可能的。注册表值已[格式化](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368609%28v=vs.85%29.aspx)，因此您可以使用如下内容：

```
[MY_PROPERTY] 
```

您选择的位置不是很好。该密钥由 Windows 和 Windows Installer 在内部使用。您可以尝试在 SOFTWARE 下创建自己的密钥，例如：

```
HKEY_LOCAL_MACHINE\SOFTWARE\My Company\My Application 
```

# django - 哨兵升级错误

> ID：11884685
> 
> 赞同：2
> 
> 时间：2012-08-09T13:36:45.397
> 
> 标签：django, postgresql, ubuntu, sentry

我正在将现有的 Sentry 安装转移到新机器上，所以我的数据库不干净（即刚刚从旧的备份中恢复）。

当我运行时`$ sentry upgrade`，我收到错误：

```
Running migrations for django:
 - Migrating forwards to 0001_initial.
 > django:0001_initial
FATAL ERROR - The following SQL query failed: CREATE TABLE "djkombu_queue" ("id" serial NOT NULL PRIMARY KEY, "name" varchar(200) NOT NULL UNIQUE);
The error was: relation "djkombu_queue" already exists

Error in migration: django:0001_initial

# Traceback...

django.db.utils.DatabaseError: relation "djkombu_queue" already exists 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:37:36.210

请参阅：[http ://sentry.readthedocs.org/en/latest/upgrading/index.html#conflicts-with-kombu-transport-django](http://sentry.readthedocs.org/en/latest/upgrading/index.html#conflicts-with-kombu-transport-django)

显然，kombu 最近添加了对 South 的支持，这会导致此错误，因为您运行的是使用 South 之前的版本。

解决方案是简单地运行：

```
sentry migrate kombu.transport.django 0001 --fake 
```

# actionscript-3 - 在代码周围留下痕迹

> ID：11884689
> 
> 赞同：2
> 
> 时间：2012-08-09T13:37:00.803
> 
> 标签：actionscript-3, apache-flex

如果我在发布时跟踪整个代码，会出现一些性能问题吗？

```
trace("thank you"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:39:11.217

发布版本中忽略了跟踪，因此没有性能损失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:39:57.700

是的，如果您的跟踪处于活动状态，则会出现性能问题

一些编译器具有特定的编译器选项，说明类似于“构建发布客户端”的内容，这些可能会或可能不会以不存在所有跟踪注释的构建结束[被忽略]。

即使你没有任何东西监听跟踪语句并且它们正在运行，它首先会执行一个额外的函数调用并检查一些 if 语句，然后它将存储在日志文件中运行它的计算机。

因此，您应该找出您拥有的编译器以及在“发布模式”下编译时该编译器是否会自动删除跟踪消息。如果没有，您必须要么忽略性能损失，要么想办法解决它

# iphone - 在用户操作上旋转 UIViewController

> ID：11884695
> 
> 赞同：0
> 
> 时间：2012-08-09T13:37:14.313
> 
> 标签：iphone, ios, uiviewcontroller, uiinterfaceorientation

**我有的：**

我有一个支持纵向和横向的视图控制器。在横向时，我显示纵向内容的过滤器视图。

**我需要做什么：**

当用户在横向视图中选择过滤器时，我想强制将设备旋转回纵向。

我做了一些谷歌搜索并发现

```
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationPortrait]; 
```

这是一个私有 API，我不想这样做。（但我所追求的正是我所追求的）

简而言之 - 在用户操作上我想强制旋转设备。文档中有我遗漏的东西吗？

任何想法都会很棒。担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:47:20.000

这是从经验中学到的！在你的`viewDidLoad:`：

```
UIViewController *vc = [[UIViewController alloc] init];
[self presentModalViewControllerAnimated:NO];
[self dismissModalViewControllerAnimated:NO]; 
```

`YES`如果您仅返回景观，它将强制`shouldAutorotateToInterfaceOrientation`景观。没有私有 API！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T14:02:15.157

你可以试试这个如果有效。

```
-(void)forceFullyPortraitView{
[self.appDel.navigationController.view removeFromSuperview];
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait];
[ [UIApplication sharedApplication].self.delegate.window addSubview:self.appDel.navigationController.view];
self.navigationController.navigationBar.hidden=NO;
}
-(void)forceFullyLandscapeView{
[self.appDel.navigationController.view removeFromSuperview];
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight];
[ [UIApplication sharedApplication].self.delegate.window addSubview:self.appDel.navigationController.view];
self.navigationController.navigationBar.hidden=NO;
} 
```

您可以向右或向左设置landScepe。

# java - 如何获取机器的mac地址

> ID：11884696
> 
> 赞同：3
> 
> 时间：2012-08-09T13:37:25.040
> 
> 标签：java

我想获取机器的 MAC 地址..但是下面的书面代码仅在 Internet 连接到我的机器时显示 MAC 地址，否则它将返回 null ......我使用的是 Windows 7

```
import java.net.InetAddress;
import java.net.NetworkInterface;
import java.net.SocketException;
import java.net.UnknownHostException;

class test
{
    public static void main(String[] args)
    {
        InetAddress ip;
        try {
            ip = InetAddress.getLocalHost();

            System.out.println("The mac Address of this machine is :" + ip.getHostAddress());

            NetworkInterface network = NetworkInterface.getByInetAddress(ip);

            byte[] mac = network.getHardwareAddress();

            System.out.print("The mac address is : ");

            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < mac.length; i++){
                sb.append(String.format("%02X%s", mac[i],(i< mac.length - 1)?"-":""));
            }

            System.out.println(sb.toString());

        } 
        catch (UnknownHostException e) {
            e.printStackTrace();
        } 
        catch (SocketException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T11:00:35.530

试试这个**它应该在 Linux 和 Windows 上都可以工作**

```
public static void main(String[] args) {

    String command = "/sbin/ifconfig";

    String sOsName = System.getProperty("os.name");
    if (sOsName.startsWith("Windows")) {
        command = "ipconfig";
    } else {

        if ((sOsName.startsWith("Linux")) || (sOsName.startsWith("Mac"))
                || (sOsName.startsWith("HP-UX"))) {
            command = "/sbin/ifconfig";
        } else {
            System.out.println("The current operating system '" + sOsName
                    + "' is not supported.");
        }
    }

    Pattern p = Pattern
            .compile("([a-fA-F0-9]{1,2}(-|:)){5}[a-fA-F0-9]{1,2}");
    try {
        Process pa = Runtime.getRuntime().exec(command);
        pa.waitFor();
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                pa.getInputStream()));

        String line;
        Matcher m;
        while ((line = reader.readLine()) != null) {

            m = p.matcher(line);

            if (!m.find())
                continue;
            line = m.group();
            break;

        }
        System.out.println(line);
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T13:41:34.257

好像您正在尝试通过 IP 地址获取 MAC 地址。*只有*当您*成功*连接到 Internet时，才会存在 IP 地址。`null`否则，如您所说，它将是。

试试这个：[`NetworkInterface.getHardwareAddress()`](http://download.oracle.com/javase/6/docs/api/java/net/NetworkInterface.html#getHardwareAddress())。

如果您想要计算机上所有网络接口的 MAC 地址，请尝试以下操作：[`NetworkInterface.getNetworkInterfaces()`](http://download.oracle.com/javase/6/docs/api/java/net/NetworkInterface.html#getNetworkInterfaces()).

* * *

**编辑**：再次查看代码后，我意识到您已经实施了我的建议。**但是，如果**您有一个有效的 IP ，您只会尝试获取 MAC 地址。如果未连接到 Internet，您将没有有效的 IP。

```
 public static void main(String[] args) 
   { 
       NetworkInterface network;
       byte[] mac = network.getHardwareAddress();  
       System.out.print("The mac address is : ");  

       StringBuilder sb = new StringBuilder(); 

       for (int i = 0; i < mac.length; i++)
       { 
         sb.append(String.format("%02X%s", mac[i],(i< mac.length - 1)?"-":"")); 
       }     

       System.out.println(sb.toString());  
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T13:50:31.423

问题可能是由于当您的机器未连接到 Internet 时，您的网卡没有分配的 IP 地址。您正在尝试通过 IP 地址查找网络接口。

我建议您改为枚举所有网络接口，然后选择您需要的一个：

```
import java.net.*;
import java.util.*;

public class App {

    protected static String formatMac(byte[] mac) {
        if (mac == null)
            return "UNKNOWN";
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < mac.length; i++) {
            sb.append(String.format("%02X%s", mac[i], (i < mac.length - 1) ? "-" : ""));
        }
        return sb.toString();
    }

   public static void main(String[] args) throws Exception {
       for(Enumeration<NetworkInterface> e
                    = NetworkInterface.getNetworkInterfaces();
               e.hasMoreElements(); )
       {
           NetworkInterface ni = e.nextElement();
           System.out.println(ni.getName() + " - " + formatMac(ni.getHardwareAddress()));
       }
   }
} 
```

这应该可以解决问题并在没有任何 Internet 连接的情况下工作。

# iphone - 对字典数组进行排序

> ID：11884700
> 
> 赞同：0
> 
> 时间：2012-08-09T13:37:29.377
> 
> 标签：iphone, ios, sorting

```
arrAll = [[NSMutableArray alloc] init ];

for (int i=0; i<3; i++) {
    if (isCategory && i==0) {
        secCount++;
        //            NSLog(@"cate %@",arrCategory);
        NSMutableArray *arrone = [[NSMutableArray alloc] init ];
        for (int j=0; j<arrCategory.count; j++) {
            NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:
                                  [[arrCategory objectAtIndex:j] valueForKey:@"SuCategoriesString"],@"title",
                                  [[arrCategory objectAtIndex:j] valueForKey:@"CategoryName"], @"subtitle",
                                  [[arrCategory objectAtIndex:j] valueForKey:@"Favourite"] ,@"Favourite",
                                  [[arrCategory objectAtIndex:j] valueForKey:@"Views"], @"Views",
                                  [[arrCategory objectAtIndex:j] valueForKey:@"CommentCount"], @"CommentCount",
                                  [[arrCategory objectAtIndex:j] valueForKey:@"Likes"],@"Likes",
                                  [[arrCategory objectAtIndex:j] valueForKey:@"CatId"],@"CatId",
                                  nil];
            [arrone addObject:dict];
            [dict release];
        }
        NSDictionary *Dictmain = [[NSDictionary alloc] initWithObjectsAndKeys:
                                  @"CATEGORIES",@"titHeader",
                                  arrone, @"arrayFill", nil];
        [arrAll addObject:Dictmain];
        [arrone release];
        [Dictmain release];
    }
    if (isTopic  && i==1)
    {
        secCount++;
        NSMutableArray *arrone = [[NSMutableArray alloc] init ];
        for (int j=0; j<arrTopic.count; j++) {
            NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:
                                  [[arrTopic objectAtIndex:j] valueForKey:@"TopicName"],@"title",
                                  [[arrTopic objectAtIndex:j] valueForKey:@"CategoryName"], @"subtitle",
                                  [[arrTopic objectAtIndex:j] valueForKey:@"Favourite"] ,@"Favourite",
                                  [[arrTopic objectAtIndex:j] valueForKey:@"Views"], @"Views",
                                  [[arrTopic objectAtIndex:j] valueForKey:@"CommentCount"], @"CommentCount",
                                  [[arrTopic objectAtIndex:j] valueForKey:@"Likes"],@"Likes",
                                  [[arrTopic objectAtIndex:j] valueForKey:@"TopicId"],@"TopicId",
                                  [[arrTopic objectAtIndex:j] valueForKey:@"SubCategoryName"],@"SubCategoryName",
                                  nil];
            [arrone addObject:dict];
            [dict release];
        }
        NSDictionary *Dictmain = [[NSDictionary alloc] initWithObjectsAndKeys:
                                  @"TOPICS",@"titHeader",
                                  arrone,@"arrayFill", nil];
        [arrAll addObject:Dictmain];
        [arrone release];
        [Dictmain release];
    }
    if (isTip && i==2)
    {
        secCount++;
        NSMutableArray *arrone = [[NSMutableArray alloc] init ];
        for (int j=0; j<arrTips.count; j++) {
            NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:
                                  [[arrTips objectAtIndex:j] valueForKey:@"TipName"],@"title",
                                  [[arrTips objectAtIndex:j] valueForKey:@"TopicNameString"], @"subtitle",
                                  [[arrTips objectAtIndex:j] valueForKey:@"Favourite"] ,@"Favourite",
                                  [[arrTips objectAtIndex:j] valueForKey:@"Views"], @"Views",
                                  [[arrTips objectAtIndex:j] valueForKey:@"CommentCount"], @"CommentCount",
                                  [[arrTips objectAtIndex:j] valueForKey:@"Likes"],@"Likes",
                                  [[arrTips objectAtIndex:j] valueForKey:@"TipId"],@"TipId",
                                  nil];
            [arrone addObject:dict];
            [dict release];
        }
        NSDictionary *Dictmain = [[NSDictionary alloc] initWithObjectsAndKeys:@"TIPS",@"titHeader",
                                  arrone, @"arrayFill", nil];
        [arrAll addObject:Dictmain];
        [arrone release];
        [Dictmain release];
    }
}
[arrAll retain];
NSLog(@"Array before sorting:%@",arrAll); 
```

我希望 arrAll 根据 Views、CommentCount、Likes、Favorites 进行排序，我希望结果相同，因为任何机构都可以帮助我解决这个问题。请抱歉格式化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:43:53.777

下面是从[NSArray 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)中选择的可能的数组排序函数：

```
– sortedArrayHint
– sortedArrayUsingFunction:context:
– sortedArrayUsingFunction:context:hint:
– sortedArrayUsingDescriptors:
– sortedArrayUsingSelector:
– sortedArrayUsingComparator:
– sortedArrayWithOptions:usingComparator: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:44:22.477

这只是一种数组排序方法。你必须使用 NSSortDescriptor

```
NSSortDescriptor *lastNameDescriptor = [[NSSortDescriptor alloc] initWithKey:@"CATALOG_NO" ascending:YES];
[nameArray sortUsingDescriptors:[NSArray arrayWithObject:lastNameDescriptor]]; 
```

其中 initWithKey 您必须在其中使用您的键值 您必须对哪个值数组进行排序和名称 Array 是您的数组，其中包含您的数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:14:49.767

```
NSSortDescriptor *sortDesc = [[NSSortDescriptor alloc] initWithKey:sortString  ascending:NO comparator:^NSComparisonResult(id firstObject, id secondObject)
            {
                return [((NSString *)firstObject) compare:((NSString *)secondObject) options:NSNumericSearch];
            }];

            arrContent = [arrContentOriginal sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDesc]]; 
```

找到这个解决方案

# python - 如何在 python ssl.wrap_socket() 中设置/查找 ca_certs 参数

> ID：11884704
> 
> 赞同：4
> 
> 时间：2012-08-09T13:37:56.303
> 
> 标签：python, sockets, ssl

我正在尝试编写一个 python 2.7 脚本，它通过 SSL 或 TLS 套接字连接到服务器。服务器存在并可以提供其证书等。

我找到了以下代码：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
ssl_sock = ssl.wrap_socket(s,
                       ca_certs="/etc/ca_certs_file",
                       cert_reqs=ssl.CERT_REQUIRED)
ssl_sock.connect((serverName, portNumber)) 
```

我不明白 ca_certs 参数是什么。这应该是我计算机上当前存在的文件吗？如果是，我怎么知道它在哪里？我查看了我的 linux 计算机（带有 debian 的树莓派），并在我的 /etc/ssl/cert 目录中发现了很多 .pem 文件。我应该将 ca_certs 参数设置为其中之一吗？如果是，选择哪一个？如果不是，我应该将其设置为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T08:15:30.553

事实证明，证书文件是一个应该已经存在于操作系统上的文件，并且其中包含操作系统信任的根（和/或中间？不确定）证书的串联列表。在我的 rasperry pi debian 上，它是 /etc/ssl/certificates/ca-certificates.crt

如果您有想要信任的证书，可以使用 linux 命令 update-ca-certificates 将它们添加到此文件中。这将读取文件 /etc/ca-certificateds.conf，其中应包含您希望信任的证书列表。（默认情况下，它会尝试在 /usr/share/ca-certificates 中查找这些证书）

# java - 想要添加表单域并在 servlet 中获取

> ID：11884708
> 
> 赞同：1
> 
> 时间：2012-08-09T13:38:27.470
> 
> 标签：java, servlets

我正在寻找如何将图像添加到表单然后我找到了[这些代码](http://www.roseindia.net/servlets/upload-image.shtml)。在集成此代码时我失败了，因为我在提交表单时要发布表单中的其他字段。

因此，您能否帮我发布一个字段**Lastname**以及文件，并展示如何使用相同的 servlet 获取它（servlet 中的代码块以获取姓氏）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:21:13.147

您正在混合使用 Apache Commons FileUpload**和**Servlet 3.0 `@MultipartConfig`。这两种是解析`multipart/form-data`请求的完全不同的方式。一个 HTTP 请求只能解析一次。因此，如果这两种方式中的一种已经事先解析过，另一种方式将无法再解析它并最终得到空/空数据。

您应该使用一种*或*另一种方式来解析请求，而不是两种方式。`multipart/form-data`Apache Commons FileUpload 是在引入 Servlet 3.0（2009 年 12 月）之前解析请求的“事实上的”标准。但是从 Servlet 3.0 开始，有了新的`@MultipartConfig`注解和新的`request.getPart()`方法，使得 Apache Commons FileUpload 变得多余。

使用 Apache Commons FileUpload 时，您应该**删除**Servlet 3.0`@MultipartConfig`和所有`request.getParameter()`行并从中提取“常规”请求参数`List items`。

使用 Servlet 3.0`@MultipartConfig`时，您应该**删除**所有与 Apache Commons FileUpload 相关的代码，并使用它`request.getPart()`来获取上传的文件。

### 也可以看看：

*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:54:28.050

这个问题有点令人困惑，你想在servlet中使用apache commons fileupload库并做这样的事情来抓取图像文件上传。

```
 DiskFileItemFactory  fileItemFactory = new DiskFileItemFactory ();

        ServletFileUpload uploadHandler = new ServletFileUpload(fileItemFactory);
        try {
            /*
             * Parse the request
             */
            List items = uploadHandler.parseRequest(request);
            Iterator itr = items.iterator();
            while(itr.hasNext()) {
                FileItem item = (FileItem) itr.next();
                /*
                 * Handle Form Fields.
                 */
                if(item.isFormField()) {
                    //do stuff here if the item currently is not a file upload
                } 
                                else {
              //DO stuff here to handle the file upload 
                                 } 
```

# c++ - 在 C++ 中将类分成单独的文件

> ID：11884710
> 
> 赞同：6
> 
> 时间：2012-08-09T13:38:31.620
> 
> 标签：c++, class

编辑：添加了“添加”类，不小心忘记了。如何将类分成不同的文件？我了解类如何工作以及如何制作对象和类似的东西。但是，我在将类放入不同文件的过程中发现了一些混乱。非常感谢您的帮助！另外，我使用 CodeBlocks 作为 IDE。到目前为止，这是我的理解：

1.  创建新类，CB 给你一个“.h”和一个新的“.cpp”。
2.  源文件开头的“Classname::Classname”是一个作用域解析运算符。
3.  您在主源文件中使用“#include classname.h”来导入其内容。
4.  您可以使用已声明的对象从“main”调用函数。

到目前为止，这是我的理解，但我只是对如何实现它感到困惑。我创建了一个简单的计算器，所有类都在一个源文件中。它工作得很好，我想我对此感到非常自豪:) 我知道有很多更简单的方法可以制作这样的东西，但我使用类和对象只是为了练习。这是我的计算器代码。另外，我真的为这篇长文道歉：/谢谢，如果你读了这么多，特别感谢你能帮我一点忙！

这是我在一个源文件中的代码：

```
#include <iostream>
using namespace std;

class Addition {
public:
float add (float x, float y) {
float sum;
sum=x+y;
return sum;
}

};

class Subtraction {
public:
float subtract (float x, float y) {
float dif;
dif=x-y;
return dif;
}

};

class Multiplication {
public:
float multiply (float x, float y) {
float prod;
prod=x*y;
return prod;
}

};

class Division {
public:
float divide (float x, float y) {
float quot;
quot=x/y;
return quot;
}
};

int op;
char cont;

int main()
{

do {
cout<<"Welcome to C++ Calculator v2!"<<endl;
cout<<"Select the number for which operation you want to use: "<<endl;
cout<<"1-Addition"<<endl;
cout<<"2-Subtraction"<<endl;
cout<<"3-Mutliplication"<<endl;
cout<<"4-Division"<<endl;
cin>>op;

if (op==1) {
float num1;
float num2;
Addition addobj;
cout<<"You have chosen Addition!"<<endl;
cout<<"Enter the first number you want to add: "<<endl;
cin>>num1;
cout<<"Enter the second number you wat to add: "<<endl;
cin>>num2;
float ans=addobj.add(num1, num2);
cout<<"The sum is "<<ans<<endl;
cout<<"Do you wish to continue? Y/N"<<endl;
cin>>cont;
}

if (op==2) {
float num1;
float num2;
Subtraction subobj;
cout<<"You have chosen Subtraction!"<<endl;
cout<<"Enter the first number you want to subtract: "<<endl;
cin>>num1;
cout<<"Enter the second number you want to subtract: "<<endl;
cin>>num2;
float ans=subobj.subtract(num1, num2);
cout<<"The difference is "<<ans<<endl;
cout<<"Do you wish to continue? Y/N"<<endl;
cin>>cont;
}

if (op==3) {
float num1;
float num2;
Multiplication multobj;
cout<<"You have chosen Multiplication!"<<endl;
cout<<"Enter the first number you want to multiply: "<<endl;
cin>>num1;
cout<<"Enter the second number you want to multiply: "<<endl;
cin>>num2;
float ans=multobj.multiply(num1, num2);
cout<<"The product is "<<ans<<endl;
cout<<"Do you wish to continue? Y/N"<<endl;
cin>>cont;
}

if (op==4) {
float num1;
float num2;
Division divobj;
cout<<"You have chosen Division!"<<endl;
cout<<"Enter the first number you want to divide: "<<endl;
cin>>num1;
cout<<"Enter the second number you want to divide: "<<endl;
cin>>num2;
float ans=divobj.divide(num1, num2);
cout<<"The quotient is "<<ans<<endl;
cout<<"Do you wish to continue? Y/N"<<endl;
cin>>cont;
}

} while (cont=='Y'||cont=='y');
if (cont=='N'||'n') {
cout<<"Thanks for using my program, goodbye!"<<endl;
}

return 0;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T13:53:59.717

好的，我将通过您的示例向您展示：

减法.h

```
class Subtraction 
{
public:
 float subtract (float x, float y);
}; 
```

减法.cxx

```
#include "subtraction.h"

float Subtraction::subtract (float x, float y)
{     
  float dif;
  dif=x-y;
  return dif;    
} 
```

乘法.h

```
class Multiplication 
{
public:
  float multiply (float x, float y);
}; 
```

乘法.cxx

```
#include "multiplication.h"

float Multiplication::multiply (float x, float y)
{
  float prod;
  prod=x*y;
  return prod;
} 
```

等等...

主文件

```
#include "subtraction.h"
#include "multiplication.h"

int main()
{
 //use the classes just as before.
} 
```

另外，为简单起见，我没有将它放在代码中，但请继续养成确保您的声明只包含一次的习惯。在一个大型项目中，如果您不采取这些保护措施，这可能会变得非常糟糕。

```
#ifndef SUBTRACTION_H
#define SUBTRACTION_H

class Subtraction
{
     ....
};
#endif /*SUBTRACTION_H*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:14:52.070

这是 Jonathan 的示例（为简洁起见，我没有添加包含防护，但绝对要这样做！），但删除了一些重复项并添加了一些 OO 以供您学习。请注意，虽然这肯定不是实际计算器的实现方式，但如果您学得足够好，它有望让您对 C++ 有更多的了解。

数学运算.h：

```
 //a base class!
class MathOperation
{
public:
  virtual float doit( float x, float y ) const = 0;
}; 
```

减法.h：

```
class Subtraction : public MathOperation
{
public:
  float doit( float x, float y ) const;
}; 
```

加法.h：

```
class Addition : public MathOperation
{
public:
  float doit( float x, float y ) const;
}; 
```

减法.cpp：

```
#include "subtraction.h"
float Subtraction::doit( float x, float y ) const { return x - y; } 
```

加法.cpp：

```
#include "addition.h"
float Subtraction::doit( float x, float y ) const { return x + y; } 
```

主.cpp：

```
#include <iostream>
#include <string>
  //yes this saves typing, but there reasons not to use it.. search SO!
using namespace std;

  //this one avoids you having to copy/paste the similar parts
void DoIt( const MathOperation& op, const std::string& opName, const std::string& verb, const std::string& resultName )
{
  cout << "You have chosen " << opName << "!" << endl;

  cout<<"Enter the first number you want to " << verb << ": "<< endl;

    //here you should actually check if the user really types in a number, and not    "blablabla"
    //and off course, put it in a seperate function so you can reuse it for num2
  float num1;
  cin>>num1;

  float num2;
  cout<<"Enter the second number you wat to " << verb << ": "<< endl;
  cin>>num2;

  cout<<"The " << resultName << " is " << op.doit( num1, num2 ) <<endl;
}

int main()
{
int op;
char cont = 'n';

do {
  cout<<"Welcome to C++ Calculator v2!"<<endl;
  cout<<"Select the number for which operation you want to use: "<<endl;
  cout<<"1-Addition"<<endl;
  cout<<"2-Subtraction"<<endl;
  cout<<"3-Mutliplication"<<endl;
  cout<<"4-Division"<<endl;
  cin>>op;

    //see how much shorter this is?
  if( op == 1 )
    DoIt( Addition(), "Addition", "add", "sum" );
  else if (op==2)
    DoIt( Subtraction(), "Subtraction", "subtract", "difference" );
  else
    cout << "Sorry I don't know this number" << endl;

  cout<<"Do you wish to continue? Y/N"<<endl;
  cin>>cont;

} while (cont=='Y'||cont=='y');

cout<<"Thanks for using my program, goodbye!"<<endl;
return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:51:55.393

最好以与类相同的方式命名文件。在您的情况下，这不是一个好主意，因为您的类很短，但每个类都应该有自己的 2 个文件 - 例如 Subtraction.h 和 Subtraction.cpp。在 .h 文件中，您应该只放置声明 - 在您的情况下： `class Subtraction { public: float subtract (float , float); }`

在 .cpp 文件中，您应该包含 .h 文件并放置实现。在你的情况下：

`float Substraction::subtract (float x, float y) { float dif; dif=x-y; return dif; }`

另请参阅[C++ 头文件、代码分离](https://stackoverflow.com/questions/280033/c-header-files-code-separation)和[为什么在 C++ 中有头文件和 .cpp 文件？](https://stackoverflow.com/questions/333889/in-c-why-have-header-files-and-cpp-files)

希望这个对你有帮助！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:52:19.163

每个文件只有一个公共类是很好的。按照约定，文件名与类名相同（如果在文件中完成了某些定义，则扩展名为 .h .hh 或 .hpp）。

如果您想将不同的类放在不同的文件中，一个简单的文本编辑器将帮助您做到这一点。

# android - 如何使用 android.net.rtp 包实现 VOIP 应用程序

> ID：11884713
> 
> 赞同：12
> 
> 时间：2012-08-09T13:38:35.490
> 
> 标签：android, sip, voip, rtp

我正在尝试使用 android.net.rtp 包的 AudioGroup 和 AudioStream 类来实现 VoIP 应用程序。但我的应用程序无法正常运行。将“AudioGroup”类对象与“AudioStream”对象“加入”后，成功发送udp数据包。我使用数据包分析器进行了检查。但是电话听不到声音。我在 2 部手机中运行我的应用程序并尝试在它们之间进行语音通信。

在下面我提到了我的源代码。

```
public class MainActivity extends Activity {
private AudioStream audioStream;
private AudioGroup audioGroup;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

try {
   audioGroup = new AudioGroup();
   audioGroup.setMode(AudioGroup.MODE_NORMAL);        
   audioStream = new AudioStream(InetAddress.getByAddress(new byte[] {(byte)192, (byte)168, (byte)1, (byte)4 }));
   audioStream.setCodec(AudioCodec.PCMU);
   audioStream.setMode(RtpStream.MODE_NORMAL);
   audioStream.associate(InetAddress.getByAddress(new byte[] {(byte)192, (byte)168, (byte)1, (byte)2 }), 5004);
   audioStream.join(audioGroup);
   AudioManager Audio =  (AudioManager) getSystemService(Context.AUDIO_SERVICE); 
   Audio.setMode(AudioManager.MODE_IN_COMMUNICATION);
} 
catch (SocketException e) { e.printStackTrace();} 
catch (UnknownHostException e) { e.printStackTrace();} 
catch (Exception ex) { ex.printStackTrace();}
} 
```

我在清单文件中设置了这个权限。

```
<uses-permission android:name="android.permission.USE_SIP" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-feature android:name="android.hardware.sip.voip" android:required="true" />
<uses-feature android:name="android.hardware.wifi" android:required="true" />
<uses-feature android:name="android.hardware.microphone" android:required="true" /> 
```

* * *

我正在使用带有 Android 4.0 操作系统的三星 GALAXY S3 手机

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-28T18:18:09.263

诀窍是让端口映射正确。您需要使用来自 audioStream.getLocalPort() 的端口号，并将此端口号作为 SIP 信令发送到 SDP 数据包中的对等方。

查看实现 sip 功能的示例应用程序 [https://github.com/Mobicents/restcomm-android-sdk/tree/master/Examples/JAIN%20SIP](https://github.com/Mobicents/restcomm-android-sdk/tree/master/Examples/JAIN%20SIP)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T13:30:35.013

I used the same code you submitted, and got it working with minor changes. Basically i found the problem was getting the port number correct.

When creating the `audioStream` the port number seems to be random. At `Android developer` I found: `Note that the local port is assigned automatically to conform with RFC 3550.`

What I did was I started the application on one phone first and used `audioStream.getLocalPort()` to find the port number. Then I connected to this port using the other one. This resulted in two-way communication, even if i only had the correct port number on one phone.

Hope this helps.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-09T01:51:54.990

我认为你应该打开扬声器！

也许您可以使用以下方法：

```
audioManager.setSpeakerphoneOn(true); 
```

# java - 有没有办法按需打印堆栈跟踪？

> ID：11884715
> 
> 赞同：7
> 
> 时间：2012-08-09T13:38:39.610
> 
> 标签：java, android, eclipse, adt

当我处于某个断点时，我正在寻找一种获取堆栈跟踪的方法。这可能吗？理想情况下，无需使应用程序崩溃并修改代码。我尝试使用 Android 调试器，但找不到任何有用的东西。

原因是有时我不确定应用程序是如何到达代码中的某个点的，因此我愿意接受其他有助于我跟踪方法调用的建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T13:40:24.153

这可以在 Java 中完成：

```
new Throwable().printStackTrace(); 
```

`Expressions`在 Eclipse 中，如果您在透视视图中使用该代码创建一个“表达式”，它将在视图中`Debug`打印当前堆栈跟踪（即您的代码停止的断点的堆栈跟踪）`Console`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T13:41:48.110

```
Log.e("AppName", "Debug exception", new Exception()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T13:45:04.630

最简单的方法是抛出异常，立即捕获并使用`printStackTrace()`.

您也可以尝试`Thread.currentThread().getStackTrace()`它为您提供一个`StackTraceElement[]`以防万一您除了拥有文本表示之外还想要其他任何东西`printStackTrace()`。

# scroll - 在 iOS safari 中，当用户触摸停止滚动元素时，event.target 无法返回手指下的正确元素

> ID：11884719
> 
> 赞同：3
> 
> 时间：2012-08-09T13:38:45.447
> 
> 标签：scroll, mobile-safari, touch-event

# 问题

[这](http://jsfiddle.net/Gerhut/y2Tp7/)是示例，请在 iOS Safari 上进行测试。

在这个例子中，当用户触摸一个锚点时，触摸位置的锚点背景会变成灰色。

当用户滚动元素时，立即触摸元素使其停止，然后再自行停止。错误的元素会变成灰色。实际上，滚动前触摸位置的锚点会变成灰色。

# 可能的解决方案

1.  最好的解决方案是在触摸停止滚动元素时在触摸位置获得正确的锚点。

2.  如果无法获得正确的锚点，则在接受touch-stop滚动元素时停止灰转。但是我怎么知道用户是触摸停止滚动元素还是只是点击？换句话说，我怎么知道元素是否在滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T11:54:18.207

也遇到这个问题。搜索结果的滚动列表，点击一个并获取详细信息。这只有在滚动帽子完全停止时才有效。只要列表中还有一些移动，点击就会选择错误的项目。

简单的解决方案：禁用原生滚动，取出

```
-webkit-overflow-scrolling: touch; 
```

它不再滚动得那么好，但水龙头现在可以工作了。

在这一点上，如果你真的需要的话，你可以查看带回漂亮滚动效果的库。

# asp.net - resx 资源文件中的连字符（破折号）不呈现 IE7/8

> ID：11884722
> 
> 赞同：2
> 
> 时间：2012-08-09T13:38:53.290
> 
> 标签：asp.net, html, internet-explorer, localization, resx

我正在开发一个通过资源文件使用本地化的 MVC 项目，除连字符外，所有其他外来字符在 Internet Explorer 7 和 8 中似乎都没有问题。

它只显示连字符应该在的空格。我试过输入ascii代码`&#45;`，但这不起作用。

![问题截图](../Images/2e5cdc1b18d7c72ad36e86507759edcf.png)

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:22:51.503

我发现这取决于网站上使用的字体“Lucida Grande”，尽管这是使用@font-face 导入的，但它不喜欢连字符！

在我的条件样式表中将字体更改为 Trebuchet MS 解决了这个问题。希望这对其有类似问题的其他人有所帮助

# c - 保持 C 命令行应用程序在 Mac 应用程序包中运行

> ID：11884727
> 
> 赞同：0
> 
> 时间：2012-08-09T13:39:06.073
> 
> 标签：c, command-line, bundles

我正在编写一个编译的 C 应用程序，它使用 system() 函数来启动一个 Java .jar 文件：

```
int main() {
  system("java -jar MyJar.jar");
  return 0;
} 
```

我成功地将它包装在一个可点击的应用程序包中，但是，当我双击它时，应用程序在它有机会启动 jar 之前立即退出。但是，当我从命令行运行已编译的 C 代码时，它可以完美运行。

任何见解将不胜感激！

斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:45:46.447

应用程序立即退出的原因是因为以下行：

```
return 0; 
```

你会想要使用`exec`而不是`system`. 使用`exec`，您的程序将被 Java 进程替换，并且永远没有机会到达该`return 0;`行。但是，用 shell 脚本替换整个 C 程序要容易得多：

```
#!/bin/sh
exec java -jar MyJar.jar 
```

正如所写，我能想到的这种方法**没有**缺点。C 程序已经产生了一个 shell 进程（就是`system`这样），那么为什么不首先从一个 shell 进程开始呢？

许多应用程序包使用 shell 脚本来做这样的事情。

# excel - Excel公式找出日期是否在另外两个日期之间并获取该行下一列的值

> ID：11884728
> 
> 赞同：0
> 
> 时间：2012-08-09T13:39:08.413
> 
> 标签：excel, excel-formula

我有一张这样的桌子：

```
 A             B             C     
----------    ----------    ----------
12.10.2005    12.10.2006        1
12.10.2005    12.10.2010        2
12.10.2005    12.10.2010        3
12.10.2005    12.10.2010        4
12.10.2005    12.10.2010        5
12.10.2005    12.10.2012        6
12.10.2005    12.10.2012        7
12.10.2005    12.10.2018        8
12.10.2005    12.10.2020        9
12.10.2005    12.10.2025        10
12.10.2005    12.10.2026        11 
```

我想知道这个日期是否`01.05.2012`包含在 A - B 每一行的任何日期之间。

如果找到任何匹配项，那么我想在同一行的 C 列中获取值..

所以结果应该是：

```
6, 7, 8, 9, 10, 11 
```

到目前为止，我已经这样做了：

```
=IF(A1:A11<=D1>=B1:B11; "There is a result." ;"No proper answer found.") 
```

我仍然找不到在公式中获得 C 值的方法，那么我应该添加这个公式来实现什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:35:29.923

您必须确保这使用了正确的日期格式，但您可以执行以下操作：

为这些公式使用另外 2 列（“E”和“F”）：`=VALUE(LEFT(A1,2)&"/"&MID(A1,4,2)&"/"&RIGHT(A1,4))` `=VALUE(LEFT(B1,2)&"/"&MID(B1,4,2)&"/"&RIGHT(B1,4))`

它们将日期转换为`A1`/`B1`到 Excel 日期格式（并返回相应的[序列号](http://office.microsoft.com/en-us/excel-help/datevalue-HP005209044.aspx)）。

您也可以将您`01.05.2012`的序列号转换为序列号以进行比较。我们将把这个序列号放入`$G$1`

在第三列中，您可以使用公式：（`=AND(E1<=$G$1,$G$1<=F1)`中的序列号`$G$1`大于“E”列中的序列号（“A”中的日期）并且小于“F”列中的序列号（“B”中的日期） ）。

# openssl - Openssl 无效目的

> ID：11884731
> 
> 赞同：5
> 
> 时间：2012-08-09T13:39:10.857
> 
> 标签：openssl

Openssl 生成 invalid_purpose 时会查看哪些证书字段？

我正在使用 OpenSSL 生成证书。

首先我生成一个主证书，然后是客户端证书。现在，当我尝试连接服务器时，它会生成 Invalid_Purpose。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T14:03:43.067

有一个扩展`keyUsage`指定可以用证书做什么。请注意，某些程序不使用此字段。

来自 X509 文档：

```
X509_V_ERR_INVALID_PURPOSE: unsupported certificate purpose
    the supplied certificate cannot be used for the specified purpose. 
```

手册页[x509v3_config(5)](http://www.openssl.org/docs/apps/x509v3_config.html)列出了参数的可能值以及另一个调用的值`extendedKeyUsage`：

```
Key Usage.
    Key usage is a multi valued extension consisting of a list of names of
    the permitted key usages.

    The supporte names are: digitalSignature, nonRepudiation,
    keyEncipherment, dataEncipherment, keyAgreement, keyCertSign, cRLSign,
    encipherOnly and decipherOnly.

    Examples:
     keyUsage=digitalSignature, nonRepudiation
     keyUsage=critical, keyCertSign 

Extended Key Usage.
    This extensions consists of a list of usages indicating purposes for
    which the certificate public key can be used for,

    These can either be object short names of the dotted numerical form of
    OIDs.  While any OID can be used only certain values make sense. In
    particular the following PKIX, NS and MS values are meaningful:

     Value                  Meaning
     -----                  -------
     serverAuth             SSL/TLS Web Server Authentication.
     clientAuth             SSL/TLS Web Client Authentication.
     codeSigning            Code signing.
     emailProtection        E-mail Protection (S/MIME).
     timeStamping           Trusted Timestamping
     msCodeInd              Microsoft Individual Code Signing (authenticode)
     msCodeCom              Microsoft Commercial Code Signing (authenticode)
     msCTLSign              Microsoft Trust List Signing
     msSGC                  Microsoft Server Gated Crypto
     msEFS                  Microsoft Encrypted File System
     nsSGC                  Netscape Server Gated Crypto

    Examples:
     extendedKeyUsage=critical,codeSigning,1.2.3.4
     extendedKeyUsage=nsSGC,msSGC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-03T15:03:47.397

在具体细节层面，您使用的 openssl.cnf 值可能还有其他用途，例如电子邮件。这就是为什么它们对您尝试建立的服务器连接无效的原因。

检查您的 openssl.cnf 内容，并查看 OpenSSL 源中提供的示例，以了解可能与连接到传统 Web 浏览器的库存 TLS Web 服务器一起使用的东西。

# ruby-on-rails - 如果单选按钮值为“some_string”，则 Rails 条件验证

> ID：11884734
> 
> 赞同：0
> 
> 时间：2012-08-09T13:39:13.140
> 
> 标签：ruby-on-rails, validation, radio

`marketing_source_other`如果收音机的值`marketing_source`设置为 ，我想验证该字段`other`。

如果用户从该`marketing_source`字段中选择其他，它将弹出一个文本输入供用户输入他们如何找到站点。

如何在 Rails 中进行验证，例如：

```
 validates_presence_of :marketing_source_other :if [marketing_source == "other"] 
```

零件应该`:if`是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T13:41:20.737

```
 validates_presence_of :marketing_source_other, :if => lambda {|obj| obj.marketing_source == "other"} 
```

# .net - 为什么 Windsor 的 Typed Factory 会传递给它第一次收到的构造函数参数？

> ID：11884739
> 
> 赞同：1
> 
> 时间：2012-08-09T13:39:22.890
> 
> 标签：.net, dependency-injection, castle-windsor

下面的测试最后失败`Assert()`并显示此消息：预期：“arg2”但原为：“arg1”

似乎在第一次通过时 - 类型化工厂会记住这一点并从第二次调用中`"arg1"`忽略。`"arg2"`为什么？

```
public class E
{
    public string Arg { get; set; }

    public E(string arg)
    {
        Arg = arg;
    }
}

public interface IEFactory
{
    E Create(string arg);
}

[Test]
public void TypedFactoryWorksAsExpected()
{
    var windsor = new WindsorContainer();
    windsor.Kernel.AddFacility<TypedFactoryFacility>();
    windsor.Register(
        Component.For<E>(), 
        Component.For<IEFactory>().AsFactory());

    var factory = windsor.Resolve<IEFactory>();
    var e1 = factory.Create("arg1");
    var e2 = factory.Create("arg2");

    Assert.AreEqual("arg1", e1.Arg);

    // This line fails with  message: 
    // 'Expected: "arg2" But was: "arg1".'
    Assert.AreEqual("arg2", e2.Arg);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:31:24.700

对于 Windsor 组件，默认情况下是单例。您`E`是单身人士，因为您没有指定其他任何内容。第二个调用不会忽略参数，而是重用前一个实例，因为它是一个单例。

您必须将其定义`E`为瞬态：

```
windsor.Register(Component.For<E>().LifeStyle.Transient); 
```

# c# - 根据其他控件事件动态加载用户控件

> ID：11884742
> 
> 赞同：0
> 
> 时间：2012-08-09T13:39:28.220
> 
> 标签：c#, asp.net, postback

我有一个变量的“横截面”，我需要使用它来动态生成一组用户控件。在页面的中心，我有一个 Telerik 多选项卡/页面。我有一个自定义树形菜单和一个自定义菜单栏，基于菜单输入的组合，每个选项卡都应加载与该数据横截面相关的用户控件。

为清楚起见，几乎每个选项卡、树视图、菜单栏组合都需要一个独特的控件。

我的问题是所有回发/加载都发生在“OnMenuChanged”事件触发之前，所以我是后面的一组“用户控件”。即使我要使用会话/视图状态，在我需要存储在其中的值之前，它们也不会被分配。

目前正在发生的事情是在“pageviewcreated”事件中加载默认用户控件，然后在 onMenuItemChanged 中我返回并重新加载用户控件。这似乎非常低效，并且使选择正确 .ascx 的方法复杂化。

我该如何管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:43:14.657

如果我了解您要做什么，您能否不使用占位符控件并将所需的用户控件注入您正在管理的事件内部？尝试在“OnMenuSelected”事件中执行类似的操作。

```
 WebUserControl1 uc = (WebUserControl1) Page.LoadControl("WebUserControl1.ascx"); 
 PlaceHolder1.Controls.Add(uc); 
```

# jquery - jquery返回特定的输入字段

> ID：11884745
> 
> 赞同：0
> 
> 时间：2012-08-09T13:39:31.707
> 
> 标签：jquery, jquery-selectors

我试图更改我尝试过的 div 元素“Cellbox”内的输入字段的值

```
$('#CellBox').$(':input').val("Something");
$('#CellBox :input').val("Something");
$('#CellBox:input').val("Something");
$(':input #CellBox').val("Something"); 
```

没有..

编辑：谢谢大家，这是一个拼写错误 - 最常见的错误......

```
$('#CellBox :input').val("Something"); 
```

是正确的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:41:00.130

```
$('#CellBox input').val("Something"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:41:39.270

编号 2 会起作用，因为它会查找具有 id`CellBox`且其中包含类型字段的元素`input`：

```
$('#CellBox :input').val("Something"); 
```

现场示例：http: [//jsfiddle.net/VzsjG/](http://jsfiddle.net/VzsjG/)

其他人怎么了？

1号：

```
$('#CellBox').$(':input').val("Something"); 
```

是语法错误，完全是错误的 - 虽然它很接近......如果你用`.find`它代替第二个`$`它会起作用（例如：http: [//jsfiddle.net/4s5RJ/](http://jsfiddle.net/4s5RJ/)）

3号：

```
$('#CellBox:input').val("Something"); 
```

这会错误地查找 id`CellBox` *本身就是 input 类型的元素*

4号：

```
$(':input #CellBox').val("Something"); 
```

这会查找一个 input 类型的元素，其中包含一个带有 id 的元素`CellBox`（即，错误的方式）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:42:04.917

```
$('#CellBox').find('input').val("Something"); 
```

# google-maps - 仅在地图移动一定距离时刷新谷歌地图中的数据（以节省通话）

> ID：11884746
> 
> 赞同：1
> 
> 时间：2012-08-09T13:39:41.307
> 
> 标签：google-maps

我有一个谷歌地图应用程序，它根据数据（纬度、经度）显示标记。当用户移动地图时，我必须刷新数据并显示新点。

现在我想最小化对数据库的调用，是否只有当地图移动了总跨度距离的某个百分比（例如：15%）时才刷新数据。例如，当前地图显示的距离跨度为 1000 公里，仅当地图水平/垂直移动至少 150 公里时才刷新数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:26:17.650

看看变量*pixelThreshold*是如何在[**这个旧的 V2 mashup**](http://maps.forum.nu/server_side_clusterer/)上使用的。它做同样的事情，但它适用于所有方向，因为在 moveend 事件处理程序中，我比较了移动前后地图中心之间的距离。

这是一个 API V2 应用程序，但应该很容易将相同的策略应用于 V3 应用程序。

# php - 无法让我的 php 表单工作（无法发送电子邮件）

> ID：11884747
> 
> 赞同：0
> 
> 时间：2012-08-09T13:39:42.370
> 
> 标签：php, contact, contact-form

与我在一起，我对 PHP 真的很不好，而不是我的领域。对不起，我可能会说任何愚蠢的话

编辑：我尝试像你们所说的那样回应 vars，结果我无法从中获得任何价值。

EDIT2：那些“需要的类”适用于我的 jquery 验证脚本。你们觉得我也应该发吗？

好吧，我面临一个 php 联系表问题。我对php也不太了解，所以这让事情变得更加困难。

好吧，我试过 mailtest.php 来检查它是否是我的主机，但它工作正常。所以这里是代码：

```
<form class="validate" method="post" action="send_form_email.php">

    <span class="fill">Todos os campos são obrigatórios.</span>
    <span><label>Nome:</label><input name="nome" type="text" class="required" /></span><br />
    <span><label>E-mail:</label><input name="mail" type="text" class="required email" /></span><br />
    <span><label>Empresa:</label><input name="empresa" type="text" class="required" /></span><br />
    <span><label>Telefone:</label><input style="width: 150px;" name="phone" type="text" class="required" /></span><br />                   
    <span><label>Mensagem:</label><textarea name="mensagem" cols="38" rows="8" class="required"></textarea></span><br />
    <span><input class="btn" type="submit" name="submit" value="Enviar" /></span>

</form> 
```

这是我的 php 编码：

```
<?php
if(isset($_POST['submit'])) {

$to = "fernando_fleury@hotmail.com";
$subject = "Contato Website - Nicotec";
$name = $_POST['nome'];
$email = $_POST['mail'];
$empresa = $_POST['empresa'];
$phone = $_POST['phone'];
$message = $_POST['mensagem'];

$body = "De: $name_field\n E-Mail: $email\n Empresa: $empresa\n Telefone: $phone\n Mensagem:\n $message";

mail($to, $subject, $body);
}

header('Location: contato.html');

?> 
```

也可以在以下位置查看它：[http ://www.fernandofleury.com.br/preview/nicotec/contato.html](http://www.fernandofleury.com.br/preview/nicotec/contato.html)

我在这里做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:43:16.413

而不是`if(isset($_POST['submit']))`检查以确保所有必填字段都按照`if(isset($_POST['nome']) && isset($_POST['mail']) && isset($_POST['phone']) ....`

然后，如果失败，则回显`$to`,`$subject`和`$body`。在测试时注释掉`header`以查看结果。

另外，试试这个：

```
if(isset($_POST['submit'])) 
{
    $to = "fernando_fleury@hotmail.com";
    $subject = "Contato Website - Nicotec";
    $name = $_POST['nome'];
    $email = $_POST['mail'];
    $empresa = $_POST['empresa'];
    $phone = $_POST['phone'];
    $message = $_POST['mensagem'];

    $body = "De: $name_field\n E-Mail: $email\n Empresa: $empresa\n Telefone: $phone\n Mensagem:\n $message";

    mail($to, $subject, $body);

    header('Location: contato.html');
}
else
{
    echo "Ruh ohes! Something wasn't set!";
} 
```

编辑：将 var 回显到屏幕使用（在`$to`此代码的示例中：

```
echo $to; 
```

编辑2：

我查看了您的页面，您使用 javascript 来确保填写所有字段。因此，问题几乎肯定出在这一行：

```
if(isset($_POST['submit'])) 
```

你能把它改成：

```
if(!empty($_POST['nome']) && !empty($_POST['mail']) && !empty($_POST['empresa']) && !empty($_POST['phone']) && !empty($_POST['mensagem'])) 
```

请给我？也许`$_POST['Submit']`没有正确发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:45:47.077

问题尚不清楚。“它不起作用”是一个非常广泛的解释 :) 因此，为了获得适当的帮助，请描述以下内容：

*   你采取什么行动？
*   你得到什么结果？
*   预期的结果是什么？

另外：尝试将过程切成碎片：

*   邮件正常吗？
*   它只是重定向吗？
*   两者兼而有之？
*   ETC...

不是解决方案，而是调试提示：
尝试：

```
 print_r($_POST); 
```

看看结果如何。它可能会告诉你更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:46:14.047

您还应该在测试时将以下内容添加到 php 文件的顶部以查看错误：

```
error_reporting(E_ALL);
ini_set('display_errors','On'); 
```

并在所有输入中添加：

```
value="" 
```

默认情况下发送一个空字符串。要查看即将发布的内容，只需添加到您的 send_form_email.php

```
var_dump($_POST) 
```

因为不需要写 if(isset($_POST['nome']) && isset($_POST['mail']) 等。有时提交的输入名称被PHP更改了，所以你可以找到正确的名称使用 var_dump。

# c# - 一个角色的用户不能从另一个角色中删除用户（C#）

> ID：11884751
> 
> 赞同：1
> 
> 时间：2012-08-09T13:39:56.453
> 
> 标签：c#, roles

我正在开发一个网站并拥有 3 个基本用户角色。角色是“admin”、“manager”和“user”。我已经阻止了某些页面的基本用户，但允许管理员和经理访问其他人。我创建了一个单独的页面来删除用户，但是，我不想让“经理”角色的人能够从“管理员”角色中删除某人。“用户”角色无权访问此页面，所以我不担心。我有一个显示所有用户的下拉列表和一个删除所选用户的按钮，它正在工作。我只想添加不允许“经理”角色从“管理员”角色中删除某人的安全性。

这是我到目前为止的 onClick 事件代码：

```
string adminuser;
usertodelete = usersddl.SelectedItem.ToString();
if (Roles.GetRolesForUser(usertodelete) = "admin")
   adminuser = "admin";

if (Roles.IsUserInRole("admin") && User.IsInRole("manager"))
    statuslbl.Text = "You do not have sufficient privileges to remove this user.    Only Administrator's can remove administrators from the system.";

else
{
    System.Web.Security.Membership.DeleteUser(usertodelete);
    Response.Redirect("~/Account/DeleteAccount.aspx");
} 
```

我知道我的 if 语句此时在查找和分配某个用户并检查他们的角色时是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:57:52.757

> 我只想添加不允许“经理”角色从“管理员”角色中删除某人的安全性。

```
if (Roles.GetRolesForUser(userToDelete).Contains("admin") && !User.IsInRole("admin"))
{   // only allow admins to remove other admins.
   statuslbl.Text = "You do not have sufficient privileges to remove this user.    Only Administrator's can remove administrators from the system."; 
} else {
} 
```

# jquery - 滚动页面时使元素出现/消失

> ID：11884752
> 
> 赞同：0
> 
> 时间：2012-08-09T13:39:57.190
> 
> 标签：jquery, html, css

我正在尝试创建一个带有固定元素的滚动页面，当用户向下滚动页面时，该元素“始终”可见。例如具有道路背景的汽车图像。所以当用户向下滚动页面时，它看起来就像汽车在路上行驶。虽然汽车出现在道路顶部，但它必须出现在某些元素（例如桥梁）下，当它通过其中一个元素时，汽车的形象需要改变。

我敲了一些东西（这很垃圾）试图向朋友解释我想要做的事情，可以在[http://www.badappledesign.co.uk/academyhunter/](http://www.badappledesign.co.uk/academyhunter/)上查看它，但该网站我试图复制的是 www.dangersoffracking.com。

我正在使用 waypoints jQuery 插件来更改汽车的图像。这非常笨重，需要大量工作，而且在 iPad 上根本不起作用，让我相信我不能以正确的方式去做。

但我想知道是否有善良的灵魂可以为我指明正确的方向，以实现我的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:45:55.630

许多移动浏览器和 iPad 故意不支持`position:fixed;`，理由是固定元素可能会妨碍小屏幕。

# spring - Spring：从jsp访问作用域bean时出错

> ID：11884760
> 
> 赞同：1
> 
> 时间：2012-08-09T13:40:11.763
> 
> 标签：spring, spring-mvc, scope, session-variables, sitemesh

我学习了如何从 jsp 访问会话范围的 sping bean，但出现以下错误：

`No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? scoped beans from jsp`

```
request.getSession().getAttribute("scopedTarget.otmSessionHolder")).getUserVO() 
```

我的 web.xml：

```
 <listener>
            <description>Spring Context Listener</description>
            <display-name>Spring Context Listener</display-name>
            <listener-class>
                org.springframework.web.context.ContextLoaderListener
            </listener-class>
        </listener>

        <listener>
            <display-name>Request Context Listener</display-name>
            <listener-class>
                org.springframework.web.context.request.RequestContextListener
            </listener-class>
        </listener>

        <servlet>
            <description>This Servlet intercepts all requests for this WebApplication</description>
            <servlet-name>SpringDispatcher</servlet-name>
            <servlet-class>
                org.springframework.web.servlet.DispatcherServlet
            </servlet-class>
            <init-param>
                <param-name>contextConfigLocation</param-name>
                <param-value>/WEB-INF/beans/web/**/*-Beans.xml</param-value>
            </init-param>

<servlet>
        <description>This Servlet intercepts all requests for this WebApplication</description>
        <servlet-name>SpringDispatcher</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/beans/web/**/*-Beans.xml</param-value>
        </init-param>

        <load-on-startup>1</load-on-startup>
    </servlet>

<servlet>
        <description>This Servlet intercepts all RESTful requests for this Web Application</description>
        <servlet-name>RESTfulSpringDispatcher</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/beans/web/RESTful-Beans.xml</param-value>
        </init-param>

        <load-on-startup>1</load-on-startup>
    </servlet> 
```

但是我仍然得到这个例外我使用sitemesh装饰器作为模板。一直在通过这些论坛，但无济于事。请帮助我

# grails - 在 gsp 中显示浮点数 Grails

> ID：11884761
> 
> 赞同：0
> 
> 时间：2012-08-09T13:40:13.043
> 
> 标签：grails, gsp

我想在 gsp 中操作浮点数，这就是我想要的：

如果数字有 1.*，我希望它显示点，但如果它以零结尾，我不希望它显示点和零。

像这样：

得分：1.5

得分：1

得分：2.1

得分：3

score 变量是一个浮点数，它是 gsp 上加载数字的输入字段，可以更改。

但真正的问题是，我如何查看数字是否有小数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:29:24.090

已经有一个用于格式化数字的标记库：(g:formatNumber)

我认为这样的事情应该有效：

```
<g:formatNumber number="${score}" type="number" format="###.##"/> 
```

但是……如果这不起作用……

我想说写你自己的自定义标签库。如果它会被多次使用，为什么要遍历控制器中的对象列表，将浮点数更改为字符串以显示它？让页面决定如何在适当的上下文中显示它。

或者

向域对象 (String scoreDisplay) 添加一个瞬态字段，然后让 getScoreDisplay() 将 score 的值作为字符串返回，并按照您想要的格式进行格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:57:27.360

好吧，我建议您在控制器中格式化数字 - 在它到达您的 gsp 之前。这样您就可以更好地控制数字格式。进入 gsp 后，您必须使用 grails 的十进制数字格式或[制作自己的 taglib](http://grails.org/doc/latest/guide/theWebLayer.html#6.3.6%20Using%20JSP%20Tag%20Libraries)来格式化（因为您的情况下小数位数会发生变化）。

# visual-studio - Crystal Report 在页面末尾留下空白行

> ID：11884764
> 
> 赞同：1
> 
> 时间：2012-08-09T13:40:22.327
> 
> 标签：visual-studio, visual-studio-2008, crystal-reports

我正在尝试修复我的报告。我在“详细信息”中有 4 列，它们都设置为“可以增长”。问题是，如果其中一列太大（这也使行变大），并且页面上最后一行的空间比所需的空间略少，它将留下一个空白行并制作下一行（附信息）在下一页。

如果水晶报表不能容纳任何东西，我该如何避免最后一个空行？

PS 我在 Visual Studio 2008 上使用 Crystal Report。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:16:59.167

详细取消选中“保持在一起”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:17:13.730

嗯...如果我理解的话，你想在一个大的细节行显示后利用空白空间。

您可以a）将“可以增长”限制为一组行（不推荐），或者您可以b）进入Section Expert并针对该行和/或该行中的对象，关闭“保持在一起”（行) 和/或“保持对象在一起”（字段/列）

这些是 CR 开发人员中的 UI / 设置。

通过VS2008 CR界面会有相应的设置。

关闭“保持在一起”，“保持对象在一起”将使对象跨越页面边界。它可以给出一些有趣的结果。

# java - 如何使用 JSTL forEach 循环的索引变量来访问映射条目？

> ID：11884774
> 
> 赞同：5
> 
> 时间：2012-08-09T13:40:40.433
> 
> 标签：java, jsp, foreach, jstl

使用 forEach 循环，我想创建表格单元格（一行），而每个单元格都包含一个表单的输入字段。表格单元格的数量始终是固定的 (12)。这实际上是没有问题的。然而，挑战来了：forEach 还应该在必须从 Map(Long, Double) 获取的输入字段中输入可变数量的默认值。

这是我的（简化）尝试：

```
<c:forEach var="number" begin="1" end="12" >
  <td>
      <input type="text" value="${requestScope.aMapWithData[number]}" /> 
  </td> 
</c:forEach> 
```

但这不会在输入字段中显示 Map 中的任何值。我猜问题是“数字”的类型是字符串而不是长。所以我想知道这个问题是否可以在不使用scriptlet的情况下解决。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T13:57:32.320

你想显示什么号码？它是每个地图条目的索引号吗？

```
<c:forEach items="${aMapWithData}" var="item" varStatus="status"> 
    <td> 
        <c:out value="${status.count}."/>  
        <input type="text" name="${item.key}" value="${item.value}" />  
    </td> 
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:57:22.033

尝试这个

```
<c:forEach items="${aMapWithData}" var="mapEntry">
   <c:set var="mapKey" value="${mapEntry.key}"></c:set>
   <c:set var="mapValue" value="${mapEntry.value}"></c:set>
</c:forEach> 
```

# c# - 对 Azure 表的动态查询

> ID：11884775
> 
> 赞同：2
> 
> 时间：2012-08-09T13:40:43.867
> 
> 标签：c#, azure, azure-table-storage

我正在使用 azure 表存储来存储博客文章。每篇博文都可以有不同的标签。所以我将有三个不同的表。

*   一个将存储博客文章。
*   一个用于存储标签
*   一种将存储标签和帖子之间的关系

所以我的问题如下，是否可以创建动态搜索查询？因为直到运行时我才知道要搜索多少个标签。据我了解，您只能使用 LINQ 查询天蓝色表。或者我可以输入一个可以动态更改的字符串查询吗？

**更新**

这是博客表中的一些示例数据

```
PartitionKey,RowKey,Timestamp,Content,FromUser,Tags
user1, 1, 2012-08-08 13:57:23, "Hello World", "root", "yellow,red" 
```

博客标签表

```
PartitionKey,RowKey,Timestamp,TagId,TagName
"red", "red", 2012-08-08 11:40:29, 1, red
"yellow", "yellow", 2012-08-08 11:40:29, 2, yellow 
```

关系表

```
PartitionKey,RowKey,Timestamp,DataId,TagId
1, 1, 2012-08-08 11:40:29, 1, 1
2, 1, 2012-08-08 13:57:23, 1, 2 
```

这些表的一个使用示例是，例如，当我想获取所有带有特定标签的博客文章时。

*   我必须从 blogTag 表中查询 tagId
*   在我需要在关系表中搜索 dataId 之后
*   最后，我需要在博客表中搜索具有该 dataId 的博客文章

我正在使用 LINQ 执行查询，它看起来像以下

```
CloudTableQuery<DataTag> tagIds = (from e in ctx2.CreateQuery<DataTag>("datatags")
                                   where e.PartitionKey == tags
                                   select e).AsTableServiceQuery<DataTag>(); 
```

我尝试了使用过滤器的 Gaurav Mantri 建议，它有效。但我担心这样做的效率会如何。关于仅允许进行 15 次离散比较的限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-30T08:14:03.343

您可以简单地构建*where 子句*并传递给 where 方法，例如：

```
var whereClause="(PartitionKey eq 'Key1') and (PartitionKey eq 'Key2')"

CloudStorageAccount storageAccount = CloudStorageAccount.Parse("AccountDetails");
            CloudTableClient tableClient = storageAccount.CreateCloudTableClient();

            CloudTable table = tableClient.GetTableReference(<TableName>);
            table.CreateIfNotExists();

            TableQuery<YourAzureTableEntity> query =
               new TableQuery<YourAzureTableEntity>()
                  .Where(whereClause));
            var list = table.ExecuteQuery(query).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:54:24.687

我也面临完全相同的问题。我确实找到了一个我在下面粘贴的解决方案：

```
public static IEnumerable<T> Get(CloudStorageAccount storageAccount, string tableName, string filter)
    {
        string tableEndpoint = storageAccount.TableEndpoint.AbsoluteUri;
        var tableServiceContext = new TableServiceContext(tableEndpoint, storageAccount.Credentials);
        string query = string.Format("{0}{1}()?filter={2}", tableEndpoint, tableName, filter);
        var queryResponse = tableServiceContext.Execute<T>(new Uri(query)) as QueryOperationResponse<T>;
        return queryResponse.ToList();
    } 
```

基本上它利用 DataServiceContext 的 Execute(Uri) 方法：http: [//msdn.microsoft.com/en-us/library/cc646700.aspx](http://msdn.microsoft.com/en-us/library/cc646700.aspx)。

您需要像通过 REST API 调用查询功能一样指定过滤条件（例如 PartitionKey eq 'mypk' 和 RowKey ge 'myrk'）。不确定这是否是最好的解决方案:) 期待对此发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:01:41.353

在表存储中构建这样的东西非常麻烦；类似于将方形钉钉在圆孔中。

相反，您可以考虑使用 Blob 存储来存储您的博客和 Lucene.NET 来实现您的标签搜索。Lucene 还允许更复杂的搜索，例如 (Tag = "A" and Tag = "B" and Tag != "C")，此外还允许搜索博客文本本身，如果您愿意的话。

[http://code.msdn.microsoft.com/windowsazure/Azure-Library-for-83562538](http://code.msdn.microsoft.com/windowsazure/Azure-Library-for-83562538)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:58:30.543

这是可能的，但这可能不是一个好主意。像这样添加多个查询参数总是会导致表扫描。这在一张小桌子上可能没问题，但如果你的桌子很大，它会很慢。对于大型表，您最好为每个组合键运行单独的查询。

也就是说，您可以使用一些 LINQ 魔法构建动态查询。这是我为此使用的辅助类：

```
public class LinqBuilder
{
    /// <summary>
    /// Build a LINQ Expression that roughly matches the SQL IN() operator
    /// </summary>
    /// <param name="columnValues">The values to filter for</param>
    /// <returns>An expression that can be passed to the LINQ  .Where() method</returns>
    public static Expression<Func<RowType, bool>> BuildListFilter<RowType, ColumnType>(string filterColumnName, IEnumerable<ColumnType> columnValues)
    {
        ParameterExpression rowParam = Expression.Parameter(typeof(RowType), "r");
        MemberExpression column = Expression.Property(rowParam, filterColumnName);

        BinaryExpression filter = null;
        foreach (ColumnType columnValue in columnValues)
        {
            BinaryExpression newFilterClause = Expression.Equal(column, Expression.Constant(columnValue));
            if (filter != null)
            {
                filter = Expression.Or(filter, newFilterClause);
            }
            else
            {
                filter = newFilterClause;
            }
        }

        return Expression.Lambda<Func<RowType, bool>>(filter, rowParam);
    }

    public static Expression<Func<RowType, bool>> BuildComparisonFilter<RowType, ColumnType>(string filterColumnName, Func<MemberExpression, BinaryExpression> buildComparison)
    {
        ParameterExpression rowParam = Expression.Parameter(typeof(RowType), "r");
        MemberExpression column = Expression.Property(rowParam, filterColumnName);

        BinaryExpression filter = buildComparison(column);
        return Expression.Lambda<Func<RowType, bool>>(filter, rowParam);
    } 
```

}

你会像这样使用它：

```
var whereClause = BuildListFilter(queryColumnName, columnValues);
CloudTableQuery<RowType> query = (from r in tableServiceContext.CreateQuery<MyRow>("MyTable")
                                    where r.PartitionKey == partitionKey
                                    select r)
                                    .Where(whereClause) //Add in our multiple where clauses
                                    .AsTableServiceQuery(); //Convert to table service query
var results = query.ToList(); 
```

另请注意，表服务对每个查询强制执行最大数量的约束。记录的最大值是每个查询 15，但是当我最后一次尝试这个时（这是一段时间前），实际最大值是 14。

# ios - 如何在 iOS 中以编程方式更新 UILabel

> ID：11884786
> 
> 赞同：3
> 
> 时间：2012-08-09T13:41:24.300
> 
> 标签：ios, uilabel

我在更新标签时遇到了问题。它不会删除旧值，因此新值会放在旧值之上。任何对此的帮助将不胜感激。

```
timer = [NSTimer scheduledTimerWithTimeInterval:1
                                         target:self
                                       selector:@selector(updateLabels)
                                       userInfo:nil
                                        repeats:YES];

-(void) updateLabels{
    for (GraphView *graph in arr){
        // retrieve the graph values
        valLabel = [[UILabel alloc] initWithFrame:CGRectMake(i * 200, 0, 90, 100)];
        valLabel.textColor = [UIColor whiteColor];
        valLabel.backgroundColor = [UIColor clearColor];
        valLabel.text = [NSString stringWithFormat:@"Value: %f", x];
        i++;
    }        
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:27:51.923

如果您设置标签的文本，则无需调用 setNeedsDisplay 或 clearContext 等。

在您的代码中，我不知道您的变量 i 和 x 是什么？

主要问题是您正在视图上创建和添加新标签。当您调用 updateLabels 方法时，可能会导致**内存泄漏**。只需您有 n 次标签重叠。

您需要在创建和添加新标签之前删除标签，或者您可以重复使用已有的标签。要重复使用您的标签，您需要将它们保存到数组并更新文本。

如果您想创建新标签，那么您可以这样做，除非您的视图中有其他标签

```
-(void) updateLabels{
// remove all labels in your view   
for (UIView *labelView in self.view.subviews) {
    if ([labelView isKindOfClass:[UILabel class]]) {
    [labelView removeFromSuperview];
}

for (GraphView *graph in arr){
    // retrieve the graph values
    valLabel = [[UILabel alloc] initWithFrame:CGRectMake(i * 200, 0, 90, 100)];
    valLabel.textColor = [UIColor whiteColor];
    valLabel.backgroundColor = [UIColor clearColor];
    valLabel.text = [NSString stringWithFormat:@"Value: %f", x];
    i++;
}        
} 
```

当您创建这样的新标签时，您需要将它们作为子视图添加到您的视图中

```
[self.view addSubview: valLabel]; 
```

if you have other labels in your view then you can save them in an array and remove just them

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:42:59.403

您需要调用 setNeedsDisplay 以便应用程序知道它已更改并重绘它。

```
- (void)setNeedsDisplay 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T14:01:34.160

您的`updateLabels`方法实际上是`UILabel`每次都创建新控件，因此它们只会出现在旧控件的“之上”。我猜这不是你想要的，尽管如果我误解了你想要做的事情，这并不完全清楚，所以很抱歉。

如果我是正确的，请在您的或类似的地方创建`UILabel`一次您的控件。`viewDidLoad`然后`.text`在计时器触发时设置它们的属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T14:06:42.020

将标签的 clearsContextBeforeDrawing 属性设置为 YES

您可以从 nib 和代码中进行设置。

```
label.clearsContextBeforeDrawing = YES; 
```

# java - 如果我的堆未满，我如何获得“java.lang.OutOfMemoryError：Java 堆空间”？

> ID：11884795
> 
> 赞同：1
> 
> 时间：2012-08-09T13:41:47.953
> 
> 标签：java, memory, out-of-memory, visualvm

我正在调试一个我一直在做的相当大的项目（但最初并没有创建），我注意到有时它会以`OutOfMemoryError`. 该代码正在从文件中加载大量数据，因此一般来说这并不完全令人惊讶。

然而，让我感到困惑的是，我使用 VisualVM 1.3.4 来分析程序，并且它的行为不一致。大多数时候我运行它，堆逐渐扩大到大约 2GB（计算机有 16GB 的 RAM；它用于学术研究），使用的堆在它下面越来越高。大约2GB，它会崩溃。随着时间的推移，该程序不会处理*更多*信息，因此它不应该在短短几分钟内将堆增加到 2GB。

不过，有时我会在大约 30 秒后突然崩溃，堆大小为 250MB，并且只有大约 100MB 在使用中。`java.lang.OutOfMemoryError: Java heap space`如果我的堆未满，我将如何获得？

**编辑：**我正在使用 Eclipse 运行程序，并且我有 VisualVM 插件，因此它会自动启动。另外，我正在使用 Java 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:48:50.120

使用 VM 参数启动应用程序`-XX:+HeapDumpOnOutOfMemoryError`。

分析堆转储并找出导致问题的原因。

[Eclipse MAT](http://www.eclipse.org/mat/)是找出此类问题的绝佳工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:14:56.127

您需要设置 JVM 的最小和最大堆内存

设置 JAVA_OPTS="-Xms128m -Xmx256m"

类似的东西，但具有更大的价值，例如 2G、4G 等等

LE：众所周知，您不能强制 JVM 运行垃圾收集器（即使您可以要求它），但有一些方法可以说服它通过将某些项目的引用设为空来摆脱某些项目。要注意的另一件事是可能延迟初始化的数据库对象。当您尝试创建超出最大堆内存的对象时，可能会出现该错误。

另一个想法可能是一些智力低下的开发人员，由于某些智力迟钝的原因，他们以某种方式以编程方式抛出 OutOfMemoryError。当你到达那部分代码时，这就是你得到的（搜索项目）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:27:12.230

应用程序因 OutOfMemoryError 崩溃可能至少有 2 个原因。

1.  您的 Java 堆对于它需要处理的数据量来说太小了。然后您可以按照 Matei 的建议增加它，或者按照 Ajay 的建议分析堆转储。

2.  您的应用程序泄漏内存。这意味着它在处理后会在内存中留下一些不需要的数据。那么从长远来看，增加堆将无济于事。您的选择是堆转储分析（再次）或专门的内存泄漏检测工具，例如[Plumbr](http://plumbr.eu)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T14:16:36.033

原来崩溃是由使用 OpenJDK JRE 而不是 Oracle 的 JRE 引起的。我不知道 OpenJDK 中究竟是什么错误导致它像这样崩溃，但是更改为 Oracle 的 JRE 最终解决了这个问题。

（我使用 OpenJDK 是因为我在一台 Linux 计算机上，有人在我之前使用它进行开源工作。当我向他提到崩溃时，他认为这可能是原因。他是对的。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-29T10:41:35.180

你有没有大内存支持的 32 位操作系统（win 上的 PAE，linux 上的巨大内存内核......）？如果是，您可能会遇到 32 位系统上每个进程 2GB 内存段的限制。

作为一种变通方法，尝试将 JVM 参数 -Xss192k 设置为每个线程释放 192kb 的堆栈空间，并将参数 -Xmx1024m 设置为使用不超过 1GB 的堆。

# javascript - 图像滑块的错误

> ID：11884797
> 
> 赞同：-2
> 
> 时间：2012-08-09T13:42:02.790
> 
> 标签：javascript

我的公司有一个由设计机构创建的网站。他们使用定制的 CMS，这使得进入网站的原始代码变得非常困难。我一直试图用我们的图像滑块来捕捉一个特定的错误。

[http://informedfamilies.org/](http://informedfamilies.org/)

当您单击滑块中的导航按钮（“1、2、3、4、5”）时，滑块会切换到相应的图像，但只是第一次。如果您再次单击另一个按钮，则滑块不会更改。图像下方的阴影似乎变暗了，所以我假设图像根本不会消失，只是堆叠在主图像下方。

任何解决此问题的帮助将不胜感激。

相关代码：

```
$('#home_features .listeditem').wrapAll('<div id="fade" />');
$('#fade').css('background', 'transparent');

var featureCt = $('#fade .listeditem').length;
if (featureCt > 1) {
    $('#home_features').each(function() {
        var controlDiv = $('<div />').attr('id', 'switcher');
        for (var i = 1; i <= featureCt; i++) {
            var control = $('<a href="#" class="selector" id="s' + i + '">' + i + '</a>');
            if (i == 1) control.addClass('selected first');
            if (i == featureCt) control.addClass('last');
            controlDiv.append(control);
        }
        $(this).append(controlDiv);
        controlDiv.append('<a href="#" class="selector" id="stop">||</a>');
        controlDiv.append('<a href="#" class="selector" id="start" style="display: none;">&#9654;</a>');
    });
}
$("#fade").innerfade({
    speed: 2000,
    timeout: 5000,
    containerheight: 440,
    tracker: "switcher",
    trackerclass: "selected",
    repeat: 1
});    
$(".selector").click(function() {
    if (this.id == "stop" || this.id == "start") {
        return;
    }

    if($("#fade").data("timer")) {
        clearTimeout($("#fade").data("timer"));
        $("#fade").removeData("timer");
        $("#stop").hide();
        $("#start").show();
    }

    var id = Number(this.id.substr(1));
    $(".selector").removeClass("selected");
    $(this).addClass("selected");

    $("#fade>div:visible").fadeOut(1);
    $("#fade>div.item" + id).fadeIn(1, function() {
        $('body').removeMatchedClasses({ pattern: /^slide/ });
        $('body').addClass('slide' + (id - 1));
    });

    var num = $("#fade").data("num_elements");
    if (id < num) {
        $("#fade").data("next", id);
    } else {
        $("#fade").data("next", 0);
    }
    return false;
});
$("#stop").click(function() {
    clearTimeout($("#fade").data("timer"));
    $("#fade").removeData("timer");
    $("#stop").hide();
    $("#start").show();
    return false;
});
$("#start").click(function() {
    $("#start").hide();
    $("#stop").show();
    $(".selector").removeClass("selected");
    $("#fade").innerfade({
        speed: 2000,
        timeout: 10000,
        containerheight: 440,
        tracker: "switcher",
        trackerclass: "selected"
    });
    var id = $("#fade").data("next");
    $("#s" + id).addClass("selected");
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:00:13.957

滑块方法在 site.js 的第 37 行实例化。在第 81 行，我在单击每个选择器时看到以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'removeMatchedClasses' 
```

没有函数声明`removeMatchedClasses`。它根本不存在。

他们试图做的是`/^slide/`从`body`.

我的建议是将第 81 行替换为以下内容：

```
$('body').removeClass(function(i, c) {
  return c.match(/^slide/).join(" ");
}); 
```

让我知道这对你有用。

# python - Python 更优雅的方式来编写这个 IF OR 语句？

> ID：11884800
> 
> 赞同：1
> 
> 时间：2012-08-09T13:42:18.123
> 
> 标签：python, python-2.7

有没有更优雅的方式来写这个语句？我发现自己写了很多类似的东西。

```
if ('.jpg' in imagename[0].lower() or '.png' in imagename[0].lower() or '.jpeg' 
    in imagename[0].lower()): 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T13:44:03.257

你可能想要

```
if imagename[0].lower().endswith((".jpg", ".jpeg", ".png")):
    # whatever 
```

请注意，它`str.endswith()`接受一个字符串元组。另请注意，此代码与您的代码不等价，因为它仅检查文件名*末尾*提到的字符串，但很可能这是您的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:51:52.927

你也可以这样做：

```
if any(ext in imagename[0].lower() for ext in ['.jpg', '.png', '.jpeg']): 
```

`any(boolean_list)``True`如果`boolean_list`包含`True`元素则返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:31:40.073

另一种方法（为了好玩）：

```
if imagename[0].lower().split('.')[-1] in ('jpg','png','jpeg'):
    # do something 
```

# xslt - 如何将命名空间前缀设置为有效负载 xsl

> ID：11884803
> 
> 赞同：2
> 
> 时间：2012-08-09T13:42:31.543
> 
> 标签：xslt, xpath, namespaces, prefix

我有这个有效载荷，我很想知道如何将这个“TV：”命名空间前缀添加到其中的所有节点和元素。

```
<TVInqResponse>
         <TVInqRS>
            <StatusCode>0</StatusCode>
            <StatusDescription>Success</StatusDescription>

This is what is expect to have as a result:

<**tv**:TVInqResponse>
         <**tv**:TVInqRS>
            <**tv**:StatusCode>0</**tv**:StatusCode>
            <**tv**:StatusDescription>Success</**tv**:StatusDescription> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:27:29.370

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:tv="some:tv">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="*">
  <xsl:element name="tv:{name()}" namespace="some:tv">
   <xsl:apply-templates select="@*|node()"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:attribute name="{name}"><xsl:value-of select="."/></xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**（基于提供的格式错误的“playload”...）：

```
<TVInqResponse>
 <TVInqRS>
  <StatusCode>0</StatusCode>
  <StatusDescription>Success</StatusDescription>
 </TVInqRS>
</TVInqResponse> 
```

**产生想要的正确结果**：

```
<tv:TVInqResponse xmlns:tv="some:tv">
   <tv:TVInqRS>
      <tv:StatusCode>0</tv:StatusCode>
      <tv:StatusDescription>Success</tv:StatusDescription>
   </tv:TVInqRS>
</tv:TVInqResponse> 
```

**如果您还希望任何属性名称位于同一命名空间中，请将模板匹配属性替换为以下内容**：

```
 <xsl:template match="@*">
  <xsl:attribute name="tv:{name()}" namespace="some:tv">
   <xsl:value-of select="."/>
  </xsl:attribute>
 </xsl:template> 
```

# javascript - 如何使用 jQuery 获取输入字段的值

> ID：11884805
> 
> 赞同：0
> 
> 时间：2012-08-09T13:42:39.137
> 
> 标签：javascript, jquery

我正在尝试设置字段的内部 html 值并且效果很好，但是当我尝试检索它时它失败了。

我的代码：

```
 var butId = buttonPressed.getAttribute('id');

            $('#will'+butId).remove();
            $('#hidDelete').html(butId);     //THIS WORKS FINE
            var temp = $('#hidDelete').html();   //THIS DOESNT
            alert (temp);      //THIS PRINTS NOTHING 
```

我的输入字段：

```
 <input id="hidDelete" type="hidden" name="hidDelete"/> 
```

任何人都可以看到它有什么问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T13:43:41.307

尝试`$('#hidDelete').val()`代替`html()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:45:27.247

`$().html()`用于从一对标签中访问内容，例如。`<div>foo</div>`. 你想要`$().val()`。那是为了获取/设置`input`字段的“值”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:46:15.953

```
$('#hidDelete').html(butId);     //THIS WORKS FINE
var temp = $('#hidDelete').html();   //THIS DOESNT
alert (temp);      //THIS PRINTS NOTHING 
```

而不是上面使用下面

```
$('#hidDelete').val(butId);     
var temp = $('#hidDelete').val();  
alert (temp); 
```

在 jquery 中 selector.html 用于获取元素的内部 html。这不应该用于输入类型元素。

# internet-explorer - 使用 Selenium InternetExplorerDriver 获取所有 iframe 中设置的所有 cookie

> ID：11884810
> 
> 赞同：2
> 
> 时间：2012-08-09T13:42:48.157
> 
> 标签：internet-explorer, cookies, selenium

这是我的问题：

我使用 Selenium InternetExplorer 驱动程序通过单击按钮打开一个新的浏览器窗口：

```
WebElement element = driver.findElement(By.id("btnOpen"));
element.sendKeys("\n"); 
```

新的浏览器窗口打开，在此窗口的一个框架中，自动提交表单设置了许多 cookie。

首先，我将焦点转移到新窗口：

```
driver.switchTo().window(popupHandle); 
```

然后我将焦点更改为通过自动提交表单设置了新 cookie 的框架

```
driver.switchTo().frame("fm_MainApp"); 
```

现在，当我遍历驱动程序中的所有 cookie 时：

```
Set<Cookie> allCookies = driver.manage().getCookies(); 
```

驱动程序没有显示使用自动提交表单设置的 cookie，但我可以清楚地看到 cookie 已使用 httpAnalyzer 在 IE 中设置。

cookie 也是从本地域设置的，而不是第三方设置的。

所以我可以在 IE 中看到 cookie 但驱动程序看不到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:26:27.910

我认为它与 IE 驱动程序有关，尤其是 IEDriverServer，它无法与 IE cookie 一起正常工作。这是[硒问题的缺陷。](https://code.google.com/p/selenium/issues/detail?id=1227&q=ie%20cookies&colspec=ID%20Stars%20Type%20Status%20Priority%20Milestone%20Owner%20Summary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-27T16:58:21.503

在解决缺陷之前，您可以从所有区域中删除“保护模式”来解决它。所以：

*   工具 > Internet 选项。

*   安全选项卡。对于每个区域：

    *   取消选中“启用保护模式”

# ios - 数据源更改后动态重新加载 UIPageViewController

> ID：11884816
> 
> 赞同：5
> 
> 时间：2012-08-09T13:43:05.800
> 
> 标签：ios, ios5, uipageviewcontroller, ibooks

所以我正在尝试创建一个类似 ibooks 的阅读器，我需要在从 web 服务获取数据后动态更新 UIPageViewController 的内容。由于一系列原因，我必须在开始时实例化它，然后在数据到来时更新它。

我正在这样创建它：

```
NSDictionary *options =
[NSDictionary dictionaryWithObject:
 [NSNumber numberWithInteger:UIPageViewControllerSpineLocationMin]
                            forKey: UIPageViewControllerOptionSpineLocationKey];

self.pageController = [[UIPageViewController alloc]
                       initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl
                       navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal
                       options: options];

self.pageController.dataSource = self;
self.pageController.delegate = self;

[[self.pageController view] setFrame:[[self view] bounds]];

MovellaContentViewController *initialViewController = [self viewControllerAtIndex:0];

self.controllers = [NSArray arrayWithObject:initialViewController];

[self.pageController setViewControllers:self.controllers
                              direction:UIPageViewControllerNavigationDirectionForward
                               animated:NO
                             completion:nil];

[self addChildViewController:self.pageController];
[[self view] addSubview:[self.pageController view]];
[self.pageController didMoveToParentViewController:self]; 
```

然后我就设置`self.controllers = newControllersArray;`

我正在为 UITableViewController 寻找类似 reloadData 的东西，UIPageViewController 有这样的东西吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T14:43:14.967

您必须再次将 setViewControllers:direction:animated:completion: 发送到 pageController 并为其提供第一个要显示的视图控制器：

```
[self.pageController setViewControllers:[NSArray arrayWithObject:
                                            [self viewControllerAtIndex:0]
                                        ]
                              direction:UIPageViewControllerNavigationDirectionForward
                               animated:NO
                             completion:nil]; 
```

如果`viewControllerAtIndex:`不像我最初假设的那样访问`self.controllers`，它可能应该是

```
[self.pageController setViewControllers:[NSArray arrayWithObject:
                                            [self.controllers objectAtIndex:0]
                                        ]
                              direction:UIPageViewControllerNavigationDirectionForward
                               animated:NO
                             completion:nil]; 
```

反而

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:59:00.107

主要问题是 webview 正在拦截所有用户触摸，因此 UiPageViewController 没有调用委托方法。一旦将 webview 设置为忽略用户触摸事件，一切都开始正常工作。

# sql - SQL INSERT 不指定列。发生什么了？

> ID：11884822
> 
> 赞同：12
> 
> 时间：2012-08-09T13:43:19.390
> 
> 标签：sql, postgresql

浏览了心爱的 W3schools 并找到了这个[页面](http://www.w3schools.com/sql/sql_insert.asp)，实际上学到了一些有趣的东西。我不知道您可以在不指定值列的情况下调用插入命令。例如;

```
INSERT INTO table_name
 VALUES (value1, value2, value3,...) 
```

从我模糊的记忆中，我似乎记得 SQL 教授提到您必须将字段视为没有任何特定顺序（尽管 RDB 端有，但不能保证）。

我的问题是，服务器如何知道哪些值被分配给了哪些字段？* 我会自己测试这个，但我不会使用生产服务器来完成我目前可以访问的所有操作。

如果这项技术是特定的，我正在研究 PostgresSQL。这种特殊的语法有什么用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T13:46:53.727

您的教授是对的-您应该在命名值之前明确命名列。

在这种情况下，尽管值将按照它们在表定义中出现的顺序插入。

这样做的问题是，如果该顺序发生变化，或者列被删除或添加（即使它们可以为空），那么插入将会中断。

就其有用性而言，在生产代码中并没有那么多。如果您正在手动编写快速插入代码，那么它可能只会帮助您节省输入所有列名的时间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T13:45:52.717

它们按照它们在表定义中的顺序插入到字段中。

所以如果你的表有字段 (a,b,c)，a=value1, b=value2, c=value3。

你的教授是对的，这是懒惰的，容易坏掉。但对于快速而肮脏的惰性插入很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T13:59:25.780

I cannot resist to put a "RTFM" here.
The PostgreSQL manual details what happens [in the chapter on INSERT](https://www.postgresql.org/docs/current/sql-insert.html):

> The target column names can be listed in any order. If no list of column names is given at all, **the default is all the columns of the table in their declared order**; or the first *N* column names, if there are only *N* columns supplied by the VALUES clause or *query*. The values supplied by the VALUES clause or *query* are associated with the explicit or implicit column list left-to-right.

Bold emphasis mine.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:47:42.753

这些值的添加顺序与表中列的显示顺序相同。它在您不知道正在使用的列的名称但知道需要输入哪些数据的情况下很有用。虽然这样做通常不是一个好主意，因为如果列的顺序当然会中断在中间插入更改或新列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T13:47:58.140

当且仅当您提供与列数相同数量的值时，该语法仅在不指定列的情况下才有效。第二个更重要的事情是 sql 表中的列总是以相同的顺序排列，这取决于您的表定义。sql 表中唯一没有固有顺序的是行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T13:48:40.053

创建表时，每列在系统表中都会有一个订单号。所以每个值都会按顺序插入..

Firt value will go to first column ... an so on

In **sql server , system table syscolumn maintains this order**. Postgresql should have something similar to this..

# asp.net - Web api 身份验证架构

> ID：11884826
> 
> 赞同：2
> 
> 时间：2012-08-09T13:43:34.737
> 
> 标签：asp.net, authentication, asp.net-web-api

我正在实施一个休息 api 来使用新的 web api 框架。此 api 将被其他公司使用，因此我们将添加一种身份验证方法。

关于身份验证，我正在考虑基于令牌实现一些东西。像这样的东西

*   客户端提供登录方法的凭据
*   系统验证客户端并发送令牌
*   客户端在以下 api 调用中使用此令牌

我想知道这个模式是否对我的场景有用。操作将主要是原子的，基本上客户端会定期 ping 这个 api 以获取一些特定的数据，所以不确定拥有会话令牌是否有意义（在某些时候令牌应该过期并且不确定如何管理它）。

您如何建议为这种情况实施身份验证架构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:50:52.747

当您生成一个令牌时，我会将它存储在一个数据库中，并使用一个外键返回到经过身份验证的登录的​​主键。我还将（使用令牌）存储它建立的日期和时间，以及超时期限（您可以为每个令牌设置它，或将其存储在配置中）。每次该用户 ping 服务时检查令牌/时间，然后在该时间到期后强制他们重新进行身份验证（通过检查与令牌一起存储的创建日期）。

这将确保仅在令牌过期后才传输登录信息，当生成新令牌时，它将删除旧令牌记录。

我理解你的要求对吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:16:25.387

制作这样一个基于令牌的身份验证方案并不容易。

对于如何以良好和安全的方式实施它，我真的没有答案。但是会在我脑海中提供一些关于您必须处理的问题的想法：

*   令牌生成需要很好地随机化，并且令牌需要“足够”（对于足够的定义）长，以防止某人简单地发送一堆不同的令牌来查看他是否“受到打击”

上述问题实施起来应该不会太难。但更棘手的是要弄清楚：

*   如何可靠地验证令牌没有被“绑架”。

如果令牌只是一些随机字符串，那么任何碰巧在传输（使用 SSL）中“看到”它的人都将能够假定生成令牌的用途的身份。

当您的服务收到令牌时，您会知道：

*   您的应用程序将令牌颁发给用户/应用程序/实体 X
*   令牌完好无损（未更改）
*   您使用令牌存储的任何其他内容（是否已过期等）

但它不会没有进一步的努力让您确定它是由用户/应用程序/实体 X 发送的。**可能**是 Y 已经设法获得了令牌。

当然，许多身份验证方案都是这种情况，因此取决于您的数据的敏感程度，以及可以通过您的服务执行什么样的操作，这对您来说可能不是一个大问题。

# objective-c - 使用 iCloud 和 iTunes 防止数据备份

> ID：11884827
> 
> 赞同：1
> 
> 时间：2012-08-09T13:43:37.397
> 
> 标签：objective-c, ios, icloud

我正在开发一个 iOS 应用程序。用户可以下载书籍，书籍的大小 ar > 200 Mo。为了遵守苹果的存储指南，我们这样做：

```
 + (NSString *)booksStoragePath
    {

        NSArray *path = [NSArray array];
        NSString *os5 = @"5.0";
        NSString *currSysVer = [[UIDevice currentDevice] systemVersion];

        if ([currSysVer compare:os5 options:NSNumericSearch] == NSOrderedDescending) //5.0.1 and above
        {        
            path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 

        }
        else // IOS 5
        {
            path = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); 
        }

       NSString *documentsDirectory = [path objectAtIndex:0]; // Get documents directory
        NSString *storagePath = [documentsDirectory stringByAppendingPathComponent:@"Books"];

        if (![[NSFileManager defaultManager] fileExistsAtPath:storagePath])
            [[NSFileManager defaultManager] createDirectoryAtPath:storagePath withIntermediateDirectories:YES attributes:nil error:nil];

NSUrl *url = [NSUrl urlWithString:storagePath];
[self addSkipBackupAttributeToItemAtURL:url];

        return storagePath;
    } 
```

为了不备份“Books”目录，我这样做：

```
#pragma mark --
#pragma mark Data Backup
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    NSString *os5 = @"5.0.1";
    NSString *currSysVer = [[UIDevice currentDevice] systemVersion];

    if ([currSysVer compare:os5 options:NSNumericSearch] == NSOrderedSame) //5.0.1
    {    
        const char* filePath = [[URL path] fileSystemRepresentation];

        const char* attrName = "com.apple.MobileBackup";
        u_int8_t attrValue = 1;

        int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
        return result == 0;

    }
    else{
        if ([currSysVer compare:os5 options:NSNumericSearch] == NSOrderedDescending) {

            NSError *error = nil;
            BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]
                                          forKey: NSURLIsExcludedFromBackupKey error: &error];
            if(!success){
                NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
            }
            return success;
        }
    }

    return nil;

} 
```

问题是我在 iTunes 中看到文件夹“书籍”连接，我可以下载它，书籍的所有内容都在那里！！！！！！

我如何禁止目录“书籍”及其内容与 iCloud 不同步，并且不会出现在 iTunes 中？

感谢您的回答。

# c# - Filestream 不会写入包含 OpenFileDialog 中的项目的 xmldoc

> ID：11884829
> 
> 赞同：0
> 
> 时间：2012-08-09T13:43:43.367
> 
> 标签：c#, .net, filestream, xmldocument, openfiledialog

我有这段代码，它采用通过 OpenFileDialog 获得的文件路径并尝试将其保存到 xml 文件中。由于某种原因，如果其中一个节点包含来自此打开文件对话框的字符串，则不会写入 xml 文档。不会抛出异常，应用程序不会崩溃，只是文件不会被写入。

如果我使用字符串文字代替具有相同内容的 m_strSoundFile，则 xml 文档将被正确写入。所以它与'\'字符非法无关，这是我最初的想法。也许这与 OpenFileDialog 是 Win32 的事实有关？任何帮助，将不胜感激。

谢谢，亚历克斯

```
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    string m_strSoundFile;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void btnChooseFile_Click(object sender, RoutedEventArgs e)
    {
        Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
        dlg.Filter = "Wav files (*.wav)|*.wav"; // Filter files by extension
        dlg.InitialDirectory = @"C:\windows\media";

        Nullable<bool> result = true;
        bool pathExists = false;
        do
        {
            result = dlg.ShowDialog();

            if (result == true)
            {
                pathExists = dlg.CheckPathExists;
                if (!pathExists)
                    MessageBox.Show("Path does not exist");
                else
                    m_strSoundFile = dlg.FileName;
            }

        } while (result == true && !pathExists);

        m_tbFilename.Text = m_strSoundFile;
    }

    private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        XmlDocument xmlDoc = new XmlDocument();
        XmlNode xmlRootNode = xmlDoc.CreateElement("Settings");

        XmlNode node = xmlDoc.CreateElement("File");
        XmlAttribute a = xmlDoc.CreateAttribute("Path");
        a.Value = m_strSoundFile;

        node.Attributes.Append(a);

        xmlRootNode.AppendChild(node);
        xmlDoc.AppendChild(xmlRootNode);

        System.IO.FileStream fs;
        try
        {
            fs = System.IO.File.Open("configfile.xml", System.IO.FileMode.Create, System.IO.FileAccess.Write);
            xmlDoc.Save(XmlWriter.Create(fs, new XmlWriterSettings() { Indent = true, Encoding = Encoding.UTF8 }));
            fs.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:22:45.990

好的，我想通了。在使用文件流的绝对路径后，它起作用了。在不使用绝对路径时它有条件地工作仍然很奇怪。

# jquery - 使用jquery将图像插入div

> ID：11884830
> 
> 赞同：1
> 
> 时间：2012-08-09T13:43:45.093
> 
> 标签：jquery

我喜欢使用 jquery 向 div 添加文本和一些图像。

我可以这样做来添加文本：

```
<script type="text/javascript">
$(document).ready(function () { 

$("#help").text('This is the description').css({"border": "1px solid", "color": "Black", "font-size": "14px", "font-weight": "bold", "padding": "30px 0 30px 0", "width": "auto", "height": "auto", "text-align": "left", "background": "lightyellow"}); 
```

我试过这个：

```
$("#help").append('<img src="description.png" alt="box_plot_description" />'); 

}); 
```

如何使用 jquery 将图像附加到此文本？

我在文本之后添加了追加，但是追加覆盖了 div。我喜欢在 div 的开头有文本，然后是图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:45:46.110

使用`html()`方法

```
$("#help").html('<img src="somesrc.jpg" alt="someimage" />'); 
```

工作样本：http: [//jsfiddle.net/HdFqr/3/](http://jsfiddle.net/HdFqr/3/)

如果要保留现有内容并附加图像，请使用`append`方法

```
$("#help").text("Some Text");
$("#help").append('<img src="somesrc.jpg" alt="someimage" />'); 
```

示例：http: [//jsfiddle.net/HdFqr/4/](http://jsfiddle.net/HdFqr/4/)

您也可以使用[appendTo](http://api.jquery.com/appendTo/)方法

```
var img=$("<img />").attr("src","someimag.jpg");
img.appendTo($("#help")); 
```

示例：http: [//jsfiddle.net/HdFqr/6/](http://jsfiddle.net/HdFqr/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:46:47.327

如果要附加：

```
$('#divid').append('<img src="path" />'); 
```

如果您只想设置特定图像：

```
$('#divid').html('<img src="path" />'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:18:00.590

您可以插入图像`.html()`

```
$("#help").html('<img src="description.png" alt="box_plot_description" />'); 
```

# expect - 如何从期望的变量中获取主目录？

> ID：11884832
> 
> 赞同：2
> 
> 时间：2012-08-09T13:43:52.333
> 
> 标签：expect

我想将主目录设置为变量。

我怎样才能做到这一点？

这是我的代码：

```
set fp [open "$HOME/temp.sh" r]
set data [read $fp]
close $fp
set ::logfile [open "$HOME/log.sh" a] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T23:45:40.233

由于 Expect 是 Tcl 的扩展，因此您使用 Tcl 的`env`数组：

```
set fp [open "$::env(HOME)/temp.sh" r]
set data [read $fp]
close $fp
set ::logfile [open "$::env(HOME)/log.sh" a] 
```

请参阅[http://tcl.tk/man/tcl8.5/TclCmd/tclvars.htm](http://tcl.tk/man/tcl8.5/TclCmd/tclvars.htm)和[Tcl 教程](http://tcl.tk/man/tcl8.5/tutorial/tcltutorial.html)。

# javascript - IE8 中的 RequireJs：“没有定义调用..”

> ID：11884835
> 
> 赞同：1
> 
> 时间：2012-08-09T13:44:05.380
> 
> 标签：javascript, internet-explorer-8, requirejs

我使用 RequireJS 2.0.4 来加载 Java Script 文件。

它在 Chrome、Firefox 和 IE9 中正常工作，但在 IE8 中错误。

我设置`true`了`enforceDefine`配置属性的值。

错误信息是`no define call for ...`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:48:36.790

> 当 enforceDefine 设置为 true 并且加载了以下任一脚本时，就会发生这种情况：
> 
> *   没有调用 define() 来声明一个模块。
> *   或者是 shim 配置的一部分，该配置指定了可以检查加载的全局字符串属性，并且该检查失败。
> 
> 或者，如果错误仅出现在 IE 中而不出现在其他浏览器中（可能会生成脚本错误，则脚本可能：
> 
> *   引发 JavaScript 语法/评估错误。
> *   或者在 IE 中出现脚本无法加载的 404 错误。
> 
> 这些 IE 行为导致 IE 在检测脚本错误方面的怪癖。要解决这个问题：
> 
> *   如果模块调用define()，请确保通过在脚本调试器中调试到达define 调用。
> *   如果是 shim 配置的一部分，请确保 shim 配置的导出检查正确。如果在 IE 中，请使用脚本调试器检查 HTTP 404 错误或 JavaScript sytnax 错误。

来源：[http ://requirejs.org/docs/errors.html#nodefine](http://requirejs.org/docs/errors.html#nodefine)

# objective-c - 我该如何解决错误？

> ID：11884836
> 
> 赞同：-6
> 
> 时间：2012-08-09T13:44:04.817
> 
> 标签：objective-c, compiler-errors

我在objective-c上编程，我遇到了这个错误，我该如何解决？

```
CompileC DerivedData/MyBook/Build/Intermediates/MyBook.build/Debug-iphonesimulator/MyBook.build/Objects-normal/i386/ioapi-B8F5CE0D70C54AA1.o ioapi.c normal i386 c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/kilovata/Documents/Projects/MyBook
    setenv LANG en_US.US-ASCII
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x c -arch i386 -fmessage-length=0 -std=gnu99 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -fexceptions -fasm-blocks -Wdeprecated-declarations -mmacosx-version-min=10.6 -g -Wno-conversion -Wno-sign-conversion -D__IPHONE_OS_VERSION_MIN_REQUIRED=40300 -iquote /Users/kilovata/Documents/Projects/MyBook/DerivedData/MyBook/Build/Intermediates/MyBook.build/Debug-iphonesimulator/MyBook.build/MyBook-generated-files.hmap -I/Users/kilovata/Documents/Projects/MyBook/DerivedData/MyBook/Build/Intermediates/MyBook.build/Debug-iphonesimulator/MyBook.build/MyBook-own-target-headers.hmap -I/Users/kilovata/Documents/Projects/MyBook/DerivedData/MyBook/Build/Intermediates/MyBook.build/Debug-iphonesimulator/MyBook.build/MyBook-all-target-headers.hmap -iquote /Users/kilovata/Documents/Projects/MyBook/DerivedData/MyBook/Build/Intermediates/MyBook.build/Debug-iphonesimulator/MyBook.build/MyBook-project-headers.hmap -I/Users/kilovata/Documents/Projects/MyBook/DerivedData/MyBook/Build/Products/Debug-iphonesimulator/include -I/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/usr/include/libxml2 -I/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/usr/include/libxml2/libxml -I/Users/kilovata/Documents/Projects/MyBook/SDWebImage -I/Users/kilovata/Documents/Projects/MyBook/DerivedData/MyBook/Build/Intermediates/MyBook.build/Debug-iphonesimulator/MyBook.build/DerivedSources/i386 -I/Users/kilovata/Documents/Projects/MyBook/DerivedData/MyBook/Build/Intermediates/MyBook.build/Debug-iphonesimulator/MyBook.build/DerivedSources -F/Users/kilovata/Documents/Projects/MyBook/DerivedData/MyBook/Build/Products/Debug-iphonesimulator -DNS_BLOCK_ASSERTIONS=1 -include /Users/kilovata/Documents/Projects/MyBook/DerivedData/MyBook/Build/Intermediates/PrecompiledHeaders/MyBook-Prefix-ejgtcvngmdefurdjssqldbeazpbs/MyBook-Prefix.pch -MMD -MT dependencies -MF /Users/kilovata/Documents/Projects/MyBook/DerivedData/MyBook/Build/Intermediates/MyBook.build/Debug-iphonesimulator/MyBook.build/Objects-normal/i386/ioapi-B8F5CE0D70C54AA1.d --serialize-diagnostics /Users/kilovata/Documents/Projects/MyBook/DerivedData/MyBook/Build/Intermediates/MyBook.build/Debug-iphonesimulator/MyBook.build/Objects-normal/i386/ioapi-B8F5CE0D70C54AA1.dia -c /Users/kilovata/Documents/Projects/MyBook/ioapi.c -o /Users/kilovata/Documents/Projects/MyBook/DerivedData/MyBook/Build/Intermediates/MyBook.build/Debug-iphonesimulator/MyBook.build/Objects-normal/i386/ioapi-B8F5CE0D70C54AA1.o

clang: error: no such file or directory: '/Users/kilovata/Documents/Projects/MyBook/ioapi.c'
clang: error: no input files
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:50:22.267

在不真正知道您的错误是什么的情况下，通常可以通过执行以下步骤来弄清楚如何修复编译/链接器错误：

1.  单击（或双击）错误视图中的错误（取决于 IDE），这应该会将您带到代码中错误适用的适用区域。
2.  如果步骤 1 没有带您到任何地方（可能是链接器错误）或者您不确定该行产生错误的原因，请尝试使用谷歌搜索确切的错误消息，并查看结果以查看它们是否有帮助。
3.  如果所有其他方法都失败了，您可以继续并发布描述您的错误所需的 MINIMUM。在这里发布您的整个构建日志并没有真正被社区接受

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:49:53.393

看起来您还没有将源文件分配给任何 Xcode 目标。

要解决：

*   突出显示项目资源管理器中的每个源文件（左窗格）。
*   打开右侧窗格并选择最左侧的选项卡。
*   选择源文件所属的目标。

# php - 在不更改 HTML 的情况下操作 HTML 字符串的内容

> ID：11884839
> 
> 赞同：1
> 
> 时间：2012-08-09T13:44:18.910
> 
> 标签：php, javascript, html, string

如果我有一个 HTML 字符串，可能是这样的......

```
<h2>Header</h2><p>all the <span class="bright">content</span> here</p> 
```

而且我想操纵字符串，以便所有单词都被反转，例如......

```
<h2>redaeH</h2><p>lla eht <span class="bright">tnetnoc</span> ereh</p> 
```

我知道如何从 HTML 中提取字符串并通过传递给函数并获得修改后的结果来操作它，但是我将如何在保留 HTML 的同时这样做呢？

我更喜欢非语言特定的解决方案，但如果它必须是特定于语言的，那么了解 php/javascript 会很有用。

## 编辑

我还希望能够操作跨越多个 DOM 元素的文本......

```
Quick<em>Draw</em>McGraw

warGcM<em>warD</em>kciuQ 
```

## 另一个编辑

目前，我正在考虑以某种方式用唯一标记替换所有 HTML 节点，同时将原件存储在数组中，然后进行忽略标记的操作，然后用数组中的值替换标记。

这种方法似乎过于复杂，我不知道如何在不使用 REGEX 的情况下替换所有 HTML，我了解到你可以去堆栈溢出监狱岛。

## 另一个编辑

我想在这里澄清一个问题。我希望文本操作发生在`x`DOM 元素的数量上 - 例如，如果我的公式随机移动单词中间的字母，让开头和结尾保持不变，我希望能够做到这一点......

```
<em>going</em><i>home</i> 
```

转换为

```
<em>goonh</em><i>gmie</i> 
```

因此 HTML 元素保持不变，但内部的字符串内容会`goinghome`以操作公式选择的任何方式进行操作（作为一个整体 - 在本示例中传递给操作公式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:46:54.293

如果你想在不改变文本的情况下达到类似的视觉效果，你可以用 css 作弊，用

```
h2, p {
  direction: rtl;
  unicode-bidi: bidi-override;
} 
```

这将反转文本

小提琴示例：http: [//jsfiddle.net/pn6Ga/](http://jsfiddle.net/pn6Ga/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:07:45.023

嗨，我很久以前就遇到过这种情况，我使用了以下代码。这是一个粗略的代码

```
<?php
function keepcase($word, $replace) {
   $replace[0] = (ctype_upper($word[0]) ? strtoupper($replace[0]) : $replace[0]);
   return $replace;
}

// regex - match the contents grouping into HTMLTAG and non-HTMLTAG chunks
$re = '%(</?\w++[^<>]*+>)                 # grab HTML open or close TAG into group 1
|                                         # or...
([^<]*+(?:(?!</?\w++[^<>]*+>)<[^<]*+)*+)  # grab non-HTMLTAG text into group 2
%x';

$contents = '<h2>Header</h2><p>the <span class="bright">content</span> here</p>';

// walk through the content, chunk, by chunk, replacing words in non-NTMLTAG chunks only
$contents = preg_replace_callback($re, 'callback_func', $contents);

function callback_func($matches) { // here's the callback function
    if ($matches[1]) {             // Case 1: this is a HTMLTAG
        return $matches[1];        // return HTMLTAG unmodified
    }
    elseif (isset($matches[2])) {  // Case 2: a non-HTMLTAG chunk.
                                   // declare these here
                                   // or use as global vars?
        return preg_replace('/\b' . $matches[2] . '\b/ei', "keepcase('\\0', '".strrev($matches[2])."')",
            $matches[2]);
    }
    exit("Error!");                // never get here
}
echo ($contents);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:46:45.040

使用可以为您提供 DOM API 的东西解析 HTML。

编写一个循环遍历元素的子节点的函数。

如果节点是文本节点，则将数据作为字符串获取，将其拆分为单词，反转每个单词，然后将其分配回去。

如果节点是元素，则递归到您的函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:55:09.533

可以使用jquery吗？

```
$('div *').each(function(){
    text = $(this).text();
    text = text.split('');
    text = text.reverse();
    text = text.join('');
    $(this).text(text);
}); 
```

见这里 - [http://jsfiddle.net/GCAvb/](http://jsfiddle.net/GCAvb/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T17:44:22.660

我实现了一个似乎运行良好的版本 - 尽管我仍然使用（相当通用和伪劣的）正则表达式从文本中提取 html 标记。现在在注释的 javascript 中：

## 方法

```
/**
* Manipulate text inside HTML according to passed function
* @param html the html string to manipulate
* @param manipulator the funciton to manipulate with (will be passed single word)
* @returns manipulated string including unmodified HTML
*
* Currently limited in that manipulator operates on words determined by regex
* word boundaries, and must return same length manipulated word
*
*/

var manipulate = function(html, manipulator) {

  var block, tag, words, i,
    final = '', // used to prepare return value
    tags = [], // used to store tags as they are stripped from the html string
    x = 0; // used to track the number of characters the html string is reduced by during stripping

  // remove tags from html string, and use callback to store them with their index
  // then split by word boundaries to get plain words from original html
  words = html.replace(/<.+?>/g, function(match, index) {
    tags.unshift({
      match: match,
      index: index - x
    });
    x += match.length;
    return '';
  }).split(/\b/);

  // loop through each word and build the final string
  // appending the word, or manipulated word if not a boundary
  for (i = 0; i < words.length; i++) {
    final += i % 2 ? words[i] : manipulator(words[i]);
  }

  // loop through each stored tag, and insert into final string
  for (i = 0; i < tags.length; i++) {
    final = final.slice(0, tags[i].index) + tags[i].match + final.slice(tags[i].index);
  }

  // ready to go!
  return final;

}; 
```

上面定义的函数接受一个 HTML 字符串，以及一个对字符串中的单词进行操作的操作函数，无论它们是否被 HTML 元素分割。

它的工作原理是首先删除所有 HTML 标记，并将标记与从中获取的索引一起存储，然后操作文本，然后以相反的顺序将标记添加到其原始位置。

## 测试

```
/**
 * Test our function with various input
 */

var reverse, rutherford, shuffle, text, titleCase;

// set our test html string
text = "<h2>Header</h2><p>all the <span class=\"bright\">content</span> here</p>\nQuick<em>Draw</em>McGraw\n<em>going</em><i>home</i>";

// function used to reverse words
reverse = function(s) {
  return s.split('').reverse().join('');
};

// function used by rutherford to return a shuffled array
shuffle = function(a) {
  return a.sort(function() {
    return Math.round(Math.random()) - 0.5;
  });
};

// function used to shuffle the middle of words, leaving each end undisturbed
rutherford = function(inc) {
  var m = inc.match(/^(.?)(.*?)(.)$/);
  return m[1] + shuffle(m[2].split('')).join('') + m[3];
};

// function to make word Title Cased
titleCase = function(s) {
  return s.replace(/./, function(w) {
    return w.toUpperCase();
  });
};

console.log(manipulate(text, reverse));
console.log(manipulate(text, rutherford));
console.log(manipulate(text, titleCase)); 
```

仍然有一些怪癖，例如标题和段落文本没有被识别为单独的单词（因为它们位于单独的块级标签而不是内联标签中），但这基本上是我尝试做的方法的证明。

我还希望它能够处理实际添加和删除文本的字符串操作公式，而不是替换/移动它（操作后字符串长度可变），但这会打开一个全新的作品，我还没有准备好.

现在我在代码中添加了一些注释，并将其作为 javascript 的要点，我希望有人会改进它 - 特别是如果有人可以删除正则表达式部分并用更好的东西替换！

## 要点：[https ://gist.github.com/3309906](https://gist.github.com/3309906)

## 演示：http: [//jsfiddle.net/gh/gist/underscore/1/3309906/](http://jsfiddle.net/gh/gist/underscore/1/3309906/)

（输出到控制台）

## 现在终于使用 HTML 解析器

(http://ejohn.org/files/htmlparser.js)

演示：http: [//jsfiddle.net/EDJyU/](http://jsfiddle.net/EDJyU/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-29T01:16:18.430

您可以使用 setInterval 每隔 ** 次更改一次，例如：

```
 const TITTLE = document.getElementById("Tittle") //Let's get the div

 setInterval(()=> { 
      let TITTLE2 = document.getElementById("rotate") //we get the element at the moment of execution
      let spanTittle = document.createElement("span"); // we create the new element "span"

      spanTittle.setAttribute("id","rotate");  // attribute to new element
      (TITTLE2.textContent == "TEXT1")       // We compare wich string is in the div
      ? spanTittle.appendChild(document.createTextNode(`TEXT2`)) 
      : spanTittle.appendChild(document.createTextNode(`TEXT1`))

      TITTLE.replaceChild(spanTittle,TITTLE2)   //finally, replace the old span for a new
    },2000)
```

```
<html>
<head></head>
<body>  
   <div id="Tittle">TEST YOUR <span id="rotate">TEXT1</span></div>
</body>
</html> 
```

# sql - Excel Vba - 使用参数的类型不匹配错误

> ID：11884842
> 
> 赞同：1
> 
> 时间：2012-08-09T13:44:21.557
> 
> 标签：sql, vba, ms-access, excel

我正在尝试将我的代码切换为使用参数。我在 cmd.Execute rs 行收到类型不匹配错误。我认为这将是我的变量与它们所访问的内容不匹配，但我已经检查并确保一切都相同。

```
 Public Sub AddProducts()

'Initialize all variables
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset
Dim cmd As New ADODB.Command
Dim stDB As String, stSQL As String, stSQLTwo As String, stProvider As String
Dim linkOID As Integer
Dim linkPID As Integer

stDB = "Data Source= " & ThisWorkbook.Path & "\obsDatabase.accdb"
stProvider = "Microsoft.ACE.OLEDB.12.0"

'Opening connection to database
With cn

    .ConnectionString = stDB
    .Provider = stProvider
    .Open

End With

cmd.ActiveConnection = cn

'Get OrderID to link to products
stSQL = "SELECT OrderID FROM Orders WHERE OrderNumber = " & txtOrderNum & ""

rs.Open stSQL, cn

linkOID = rs("OrderID").Value

rs.Close

'Get SupplierID to link to products
stSQL = "SELECT SupplierID FROM Suppliers Where SupplierName = '" & cboxCompName & "'"

rs.Open stSQL, cn

linkPID = rs("SupplierID").Value

rs.Close

stSQL = "SELECT * FROM Products WHERE ProductName = '" & cboxItemNum & "'"
rs.Open stSQL, cn

If rs.EOF Then

    'Link all product information together
    stSQL = "INSERT INTO Products (ProductName, ProductDescription, ProductUnit, SupplierID) " & _
            "Values (paramItemNum, paramDesc, paramUnit, paramPID)"

    cmd.CommandText = stSQL
    cmd.CommandType = adCmdText

    With cmd

        .Parameters.Append .CreateParameter("paramItemNum", adVarChar, adParamInput, 50, cboxItemNum)
        .Parameters.Append .CreateParameter("paramDesc", adVarChar, adParamInput, 50, txtDescription)
        .Parameters.Append .CreateParameter("paramUnit", adVarChar, adParamInput, 50, txtUnit)
        .Parameters.Append .CreateParameter("paramPID", adInteger, adParamInput, , linkPID)

    End With

    cmd.Execute rs

End If

rs.Close
cn.Close

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:25:31.457

我从您的代码中提取了这 3 行代码：

```
Dim rs As New ADODB.Recordset
Dim cmd As New ADODB.Command
cmd.Execute rs 
```

`Command.Execute`接受 3 个可选参数： RecordsAffected；参数; 选项。这些都不能是`Recordset`. 您收到类型不匹配错误，因为您没有提供`cmd.Execute`合适的参数。

# excel - Excel - 在单元格匹配后，在标题之间返回值

> ID：11884850
> 
> 赞同：0
> 
> 时间：2012-08-09T13:44:38.363
> 
> 标签：excel, excel-2007, excel-formula

![快照](../Images/18b4deeddc11302181e08e20bc817b42.png)

我再次在这里，为这个伟大的社区寻求帮助。我希望有一天我能像你一样报答你。

图片中的第 4 列 (D) 是预期输出。

这就是我提出问题的方式：

*   如果一个数字是负数/或有一个 A（A 行中的数字总是负数）；

    *   使用 MATCH 检查范围内（标题之间）是否有对应的（正）数；

    *   如果有 MATCH，则输出已匹配的 F 的 ID（第 1 列）的值，然后，输出已匹配的 A 的 ID

*   如果不是，则不执行任何操作或放置 0。

问题是：

*   它需要循环，因为负值可以在正值之后；

*   搜索必须包含在标题之间。

我试图根据我提出的其他问题的提示和代码来修改和创建自己的解决方案，但没有成功。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:46:16.180

尝试将其粘贴到 VBE 的即时窗口中，然后按 Enter：

```
Names.Add "i", "=$A$1:$A$12": _
Names.Add "v", "=$B$1:$B$12": _
Names.Add "m", "=$D$1:$D$12": _
Names.Add "h", [IF({1},LOOKUP(ROW(i),ROW(i)/(v=INDEX(v,1))))]: _
Names.Add "l", [IF({1},LOOKUP(ROW(i),ROW(i)/(v=INDEX(v,1)),FREQUENCY(-ROW(i),IF(v=INDEX(v,1),-ROW(i),0))-1))]: _
[m]=[IF(COUNTIF(OFFSET(v,h,,l),"=-"&v),CONCATENATE("=",ADDRESS(ROW(i),COLUMN(i),4),"&"" AND ""&INDEX(",ADDRESS(h+1,COLUMN(i)),":",ADDRESS(h+l,COLUMN(i)),",MATCH(-",ADDRESS(ROW(v),COLUMN(v),4),",",ADDRESS(h+1,COLUMN(v)),":",ADDRESS(h+l,COLUMN(v)),",0))"),"")]: _
Names("h").Delete: _
Names("l").Delete 
```

问题中示例数据的输出是：

```
D5  =A5&" AND "&INDEX($A$2:$A$6,MATCH(-B5,$B$2:$B$6,0))
D11 =A11&" AND "&INDEX($A$11:$A$12,MATCH(-B11,$B$11:$B$12,0)) 
```

*注意*：此方法使用命名数组来存储标题位置`h`和节长度的中间结果，当范围名称(id)、(value) 和(match) 扩展到 40,000 行时`l`，大约需要 3-4 秒。一个更简单的公式是可能的，但填充大型数据集会非常低效。`i``v``m`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:11:17.593

这是我会使用的公式。请注意，您必须明确引用标头的范围。您可能希望定义命名范围以避免拼写错误并简化可读性。这个公式将被放入`D2`（填充拖动到`D6`）。

`=IFERROR(IF(B2<0,INDEX($A$2:$A$6,MATCH(B2*-1,$B$2:$B$6,0),1) & " AND " & A2,""),"")`

**它是如何工作**的：`IFERROR`只是在`#NA`没有匹配时捕获。如果该值为`B2`负数（小于 0），则返回具有匹配正值的行的第一列中的值。`INDEX`我们对and使用绝对引用，因为当公式被拖入其他单元格时，`MATCH`我们不想查看`A3:A7`,等。`A4:A8`只有被比较的值及其对应的 ID 应该是相对的（`A2`/ `B2`），因为我们希望每一行都改变它。

这是它的外观。请记住，由于我的值来自`A1:B6`我的公式，因此将更改为`INDEX($A$1:$A$6...MATCH(B1*-1,$B$1:$B:$6,0)...`

![特大号](../Images/0d35d4f44cf8278550aeb8cfcc8929b1.png)

# asp.net-mvc - 如何在 ASP.NET MVC 4 中映射这些 WebApi 路由？

> ID：11884853
> 
> 赞同：2
> 
> 时间：2012-08-09T13:44:55.667
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-web-api

我主要使用默认的WebApi路由映射，如下：

```
 routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

这工作正常，我的网址看起来像：

```
 [GET]  /api/customers    Get all customers
    [GET]  /api/customers/1  Get a specific customer
    [POST] /api/customers    Create a customer 
```

到目前为止一切都很好，但现在我想添加一个“搜索”工具。为此，我将发布一个表示搜索条件的对象，因为在 URL 上作为 GET 执行此操作的选项太多。我的计划是 URL 看起来像这样：

```
 [POST] /api/customers/search 
```

但是，使用上面的默认路由，服务器抱怨“找到了与请求匹配的多个操作”，我认为这是因为我现在有两个接受 POST 数据的控制器方法（一个用于“创建”，一个用于“搜索” )，并且路由没有办法区分它们。

我尝试添加一个包含 {action} 组件的新路由映射，但这并没有解决问题 - 大概是因为 URL 对*两个*路由映射都有效。（我需要以某种方式阻止“/search”变体匹配默认路由图。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:52:22.220

如何添加以下路线：

```
routes.MapHttpRoute(
        name: "SearchRouteName",
        routeTemplate: "api/{controller}/search/{id}",
        defaults: new { controller = "customers", id = RouteParameter.Optional }
    ); 
```

就在 DefaultApi 路由映射之前？

# google-docs-api - 如何获取以前的 Google Docs？

> ID：11884854
> 
> 赞同：0
> 
> 时间：2012-08-09T13:44:57.107
> 
> 标签：google-docs-api

我正在尝试使用 api 获取 google 文档。每次我获得 100 个文档，其中一个链接用于获得另外 100 个文档。如何使用 Google api 获取 previos Docs？我试过这个， tempfeed.getPreviousLink.getHref(); 但它抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:14:25.833

Google Docs API（与许多其他 Google API 一样）不返回以前的链接。

我假设您的代码会引发空指针异常，因为`getPreviousLink()`返回空值。如果您需要导航到以前的页面，则必须先存储指向当前页面的链接，然后再继续下一步并自己构建导航。

# php - 使用可变参数在 PHP 中以编程方式创建动态类实例？

> ID：11884855
> 
> 赞同：10
> 
> 时间：2012-08-09T13:44:58.400
> 
> 标签：php, oop

我有一些使用动态类（即来自变量）创建广告实例的代码：

```
$instance = new $myClass(); 
```

由于构造函数根据`$myClass`值具有不同的参数计数，如何将变量参数列表传递给新语句？可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T13:53:59.717

```
class Horse {
    public function __construct( $a, $b, $c ) {
        echo $a;
        echo $b;
        echo $c;
    }
}

$myClass = "Horse";
$refl = new ReflectionClass($myClass);
$instance = $refl->newInstanceArgs( array(
    "first", "second", "third"    
));
//"firstsecondthird" is echoed 
```

您还可以检查上述代码中的构造函数：

```
$constructorRefl = $refl->getMethod( "__construct");

print_r( $constructorRefl->getParameters() );

/*
Array
(
    [0] => ReflectionParameter Object
        (
            [name] => a
        )

    [1] => ReflectionParameter Object
        (
            [name] => b
        )

    [2] => ReflectionParameter Object
        (
            [name] => c
        )

)
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T09:39:00.570

我不知道为什么，但我不喜欢在我的代码中使用 new 运算符。

这是一个静态函数，用于创建静态调用的类的实例。

```
class ClassName {
    public static function init(){       
        return (new ReflectionClass(get_called_class()))->newInstanceArgs(func_get_args());        
    }

    public static function initArray($array=[]){       
        return (new ReflectionClass(get_called_class()))->newInstanceArgs($array);        
    }

    public function __construct($arg1, $arg2, $arg3){
        ///construction code
    } 
} 
```

如果您在命名空间内使用它，则需要像这样转义 ReflectionClass：new \ReflectionClass...

现在您可以使用可变数量的参数调用 init() 方法，它将传递给构造函数并为您返回一个对象。

**使用新的正常方式**

```
$obj = new ClassName('arg1', 'arg2', 'arg3');
echo $obj->method1()->method2(); 
```

**使用新的内联方式**

```
echo (new ClassName('arg1', 'arg2', 'arg3'))->method1()->method2(); 
```

**使用 init 而不是 new 的静态调用**

```
echo ClassName::init('arg1', 'arg2', 'arg3')->method1()->method2(); 
```

**使用 initArray 而不是 new 的静态调用**

```
echo ClassName::initArray(['arg1', 'arg2', 'arg3'])->method1()->method2(); 
```

静态方法的好处是您可以在 init 方法中运行一些预构造操作，例如构造函数参数验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:51:14.857

最简单的方法是使用数组。

```
public function __construct($args = array())
{
  foreach($array as $k => $v)
  {
    if(property_exists('myClass', $k)) // where myClass is your class name.
    {
      $this->{$k} = $v;
    }
  }
} 
```

# c# - 带有版本号的 Monotouch 自动增量内部版本号

> ID：11884859
> 
> 赞同：2
> 
> 时间：2012-08-09T13:45:10.583
> 
> 标签：c#, ios, xamarin.ios, version, auto-increment

关于使用 C# 进行 Monotouch IOS 开发：

我正在尝试在我的 Monotouch IOS 项目中实现一个自动递增的构建版本号。像 [Major].[Minor].[Build] 这样的东西在每次构建时都会自动递增 [Build] 部分。

我在下面找到了这篇文章，但它似乎使用的是 Objective C，我不知道如何使用 Monotouch C# 让它工作。

[http://monotouch.2284126.n4.nabble.com/How-to-increment-the-iPhone-Application-Version-number-on-every-build-td4425363.html](http://monotouch.2284126.n4.nabble.com/How-to-increment-the-iPhone-Application-Version-number-on-every-build-td4425363.html)

在 Monotouch 中，我可以访问“System.Reflection.AssemblyVersionAttribute”，但我不知道如何使用它。我尝试了简单的事情，例如：

```
System.Reflection.AssemblyVersionAttribute tempvar = new System.Reflection.AssemblyVersionAttribute ("1.2.*");

Console.WriteLine("tempvar = " + tempvar.Version); 
```

但是打印输出实际上是：“1.2.*”并且不会自动递增。

有没有人有这方面的经验？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:10:50.707

`System.Reflection.AssemblyVersionAttribute`旨在用作属性。编译器会将 替换`*`为数字。例如

```
[assembly: System.Reflection.AssemblyVersionAttribute ("1.2.*")] 
```

您可能还想查看这封[电子邮件](http://monotouch.2284126.n4.nabble.com/Displaying-Bundle-Version-in-Settings-Solved-FYI-tt4656018.html)，了解如何使用您的应用程序包版本。

# html - 为什么在 html 中使用 id 和 class 为什么不只使用一个？

> ID：11884862
> 
> 赞同：0
> 
> 时间：2012-08-09T13:45:25.347
> 
> 标签：html, css, html4

我了解 id 和 class 之间有什么区别 - id 和 ment 被赋予一个独特的项目，而 class 和类似的标签，它们可以被赋予多个项目..

但是为什么你需要两者兼备，过去我曾经使用#id 编写所有内容（这是我刚开始编写 html 并且不知道有什么不同的时候）并且代码仍然有效.. 不会 100% 有效但仍然有效。

我知道现在使用 html5 你可以以不同的方式定义区域，但是对于这个我不是在谈论使用 html5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:47:54.963

想象一下，如果您有大量在页面上看起来相同的按钮。**你想在你的 CSS 中多次重复自己吗？或者使用一个类并编写一次。**

这适用于不同元素的相同样式的任何情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:50:41.860

添加到山姆的答案。`Id`s 对样式和 javascript 都有帮助。如果你只想应用一个特定的样式或者想增加`specificity`你的css`id`就派上用场了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:50:02.920

`#id`用于描述文档结构或重要的容器/元素，它们必须是唯一的条目。

`.class`用于描述本文档中可以是多个元素的元素。

如果您尝试验证文档并且有许多 id，这将是错误的，如果您希望文档有效，则必须重命名使用类的 id。

类很有用，因为它们可以是文档上具有同一个名称的多个类，您不会被迫将样式从一个元素复制/粘贴到另一个元素，并且只更改标签来描述新元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T15:26:45.990

简洁的答案：

id - 在您的页面上显示一次。

类 - 在您的页面上显示不止一次。

# python - Python 多处理创建不正确的 pid

> ID：11884864
> 
> 赞同：2
> 
> 时间：2012-08-09T13:45:29.987
> 
> 标签：python, multiprocessing, rpy2

我已经为此工作了一段时间，但似乎无法弄清楚。我把它缩小到我的代码和操作系统（Linux 上的 Python 2.7.3）不同意应该运行哪些进程的情况。发生这种情况时，我的代码将永远挂起，但不会引发异常。有时代码会正常运行几个小时，有时只运行几分钟，我不知道为什么。这表现如下。感谢您的关注，我真的很喜欢这里（双关语）。

代码输出：

创建离散字符矩阵

```
running PoolWorker_82 (72 triplets), pid 25777, ppid 24892
running PoolWorker_83 (72 triplets), pid 25778, ppid 24892
running PoolWorker_84 (72 triplets), pid 25779, ppid 24892
running PoolWorker_85 (72 triplets), pid 25780, ppid 24892
running PoolWorker_86 (72 triplets), pid 25781, ppid 24892
running PoolWorker_87 (72 triplets), pid 25782, ppid 24892
running PoolWorker_88 (72 triplets), pid 25783, ppid 24892
running PoolWorker_89 (90 triplets), pid 25784, ppid 24892 
```

ps辅助输出...

```
1000     24892  2.0  0.9 559948 151088 pts/0   Sl+  09:14   0:16 p runsimulation.py
1000     25776  0.0  0.8 559932 138320 pts/0   S+   09:19   0:00 p runsimulation.py
1000     26015  0.0  0.8 559948 138140 pts/0   S+   09:22   0:00 p runsimulation.py
1000     26021  0.0  0.8 559948 138140 pts/0   S+   09:22   0:00 p runsimulation.py
1000     26023  0.0  0.8 559948 138140 pts/0   S+   09:22   0:00 p runsimulation.py
1000     26025  0.0  0.8 559948 138140 pts/0   S+   09:22   0:00 p runsimulation.py
1000     26027  0.0  0.8 559948 138140 pts/0   S+   09:22   0:00 p runsimulation.py
1000     26029  0.0  0.8 559948 138140 pts/0   S+   09:22   0:00 p runsimulation.py
1000     26031  0.0  0.8 559948 138140 pts/0   S+   09:22   0:00 p runsimulation.py
1000     26036  0.0  0.8 559948 138140 pts/0   S+   09:22   0:00 p runsimulation.py 
```

您可以看到父进程 24982 在那里，但工人的 pid 不存在。通常情况下，这些会匹配，我可以看到工作人员在工作时 CPU 使用率达到 100%，然后在迭代完成后它们都消失了。当它失败时，我得到 pid 不匹配和使用 0.0% CPU 的进程（第 3 列）。

我的代码的相关部分如下（以它们被调用的相反顺序）：

使用 rpy2 调用的函数的 R 设置：

```
def create_R(dir):
    """
    creates the r environment
    @param dir: the directory for the output files
    """
    r = robjects.r
    importr("phangorn")
    importr("picante")
    importr("MASS")
    importr("vegan")
    r("options(expressions=500000)")
    robjects.globalenv['outfile'] = os.path.abspath(os.path.join(dir, "trees.pdf"))
    r('pdf(file=outfile, onefile=T)')
    r("par(mfrow=c(2,3))")

    r("""
        generate_triplet = function(bits) {
        triplet = replicate(bits, rTraitDisc(tree, model="ER", k=2,states=0:1))
        triplet = t(apply(triplet, 1, as.numeric))
        sums = rowSums(triplet)
        if (length(which(sums==0)) > 0 && length(which(sums==3)) == 1) {
            return(triplet)
        }
        return(generate_triplet(bits))
        }
    """)

    r("""
        get_valid_triplets = function(numsamples, needed, bits) {
            tryCatch({
                m = generate_triplet(bits)
                while (ncol(m) < needed) {
                    m = cbind(m, generate_triplet(bits))
                }
            return(m)
            }, error = function(e){print(message(e))}, warning = function(e){print(message(e))})
        }
    """) 
```

在工作人员中调用的函数：

```
def __get_valid_triplets(num_samples, num_triplets, bits, q):
    r = robjects.r
    name = current_process().name.replace("-", "_")
    timer = stopwatch.Timer()
    log("\trunning %s (%d triplets), pid %d, ppid %d" % (name, num_triplets, current_process().pid, os.getppid()),
        log_file)
    r('%s = get_valid_triplets(%d, %d, %d)' % (name, num_samples, num_triplets, bits))
    q.put((name, r[name]))
    timer.stop()
    log("\t%s complete (%s)" % (name, str(timer)), log_file) 
```

设置池并使用 apply_async 调度工作人员的函数。唤醒者写入托管队列，该队列是池加入后的进程：

```
def __generate_candidate_discrete_matrix(num_cols, num_samples, sample_tree, bits, usable_cols):
    assert isinstance(sample_tree, dendropy.Tree)
    print "Creating discrete character matrix"
    r = robjects.r
    newick = sample_tree.as_newick_string()
    num_samples = len(sample_tree.leaf_nodes())
    robjects.globalenv['numcols'] = usable_cols
    robjects.globalenv['newick'] = newick + ";"
    r("tree = read.tree(text=newick)")
    r('m = matrix(nrow=length(tree$tip.label))') #create empty matrix
    r('m = m[,-1]') #drop the first NA column
    num_procs = mp.cpu_count()
    args = []
    div, mod = divmod(usable_cols, num_procs)
    [args.append(div) for i in range(num_procs)]
    args[-1] += mod
    for i, elem in enumerate(args):
        div, mod = divmod(elem, bits)
        args[-1] += mod
        args[i] -= mod
    manager = Manager()
    pool = Pool(processes=num_procs, maxtasksperchild=1)
    q = manager.Queue(maxsize=num_procs)
    for arg in args:
        pool.apply_async(__get_valid_triplets, (num_samples, arg, bits, q))
    pool.close()
    pool.join()

    while not q.empty():
        name, data = q.get()
        robjects.globalenv[name] = data
        r('m = cbind(m, %s)' % name)

    r('m = m[,1:%d]' % usable_cols)
    r('m = m[order(rownames(m)),]') # consistently order the rows 
    r('m = t(apply(m, 1, as.numeric))') # convert all factors given by rTraitDisc to numeric
    a = r['m']
    n = r('rownames(m)')
    return a, n 
```

最后，第一个调用生成候选矩阵的函数，确保它是一个有效的，如果不是，它会用一个新的矩阵再次尝试。如果有效，它会在 R session 中存储一些东西并返回数据

```
def create_discrete_matrix(num_cols, num_samples, sample_tree, bits):
    """
    Creates a discrete char matrix from a tree
    @param num_cols: number of columns to create
    @param sample_tree: the tree
    @return: a r object of the matrix, and a list of the row names
    @rtype: tuple(robjects.Matrix, list)
    """
    r = robjects.r
    usable_cols = find_usable_length(num_cols, bits)
    a, n = __generate_candidate_discrete_matrix(num_cols, num_samples, sample_tree, bits, usable_cols)
    assert isinstance(a, robjects.Matrix)
    assert a.ncol == usable_cols

    paralin_matrix, valid = __create_paralin_matrix(a)
    if valid is False:
        sample_tree = create_tree(num_samples, type = "S")
        return create_discrete_matrix(num_cols, num_samples, sample_tree, bits)
    else:
        robjects.globalenv['paralin_matrix'] = paralin_matrix
        r('rownames(paralin_matrix) = rownames(m)')
        r('paralin_dist = as.dist(paralin_matrix, diag=T, upper=T)')
        r("paralinear_cluster = hclust(paralin_dist, method='average')")
    return sample_tree, a, n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:18:02.967

看来这已通过服务器重新启动 (FML) 修复。但是，获得了有效信息。将 worker 提交到池时，请确保在 worker 本身中捕获异常，而不是在调用 pool.apply_async 的方法中捕获它们。

```
def __get_valid_triplets(num_samples, num_triplets, bits, q):
    try:
        r = robjects.r
        name = current_process().name.replace("-", "_")
        timer = stopwatch.Timer()
        log("\trunning %s (%d triplets), pid %d, ppid %d" % (name, num_triplets, current_process().pid, os.getppid()),
            log_file)
        r('%s = get_valid_triplets(%d, %d, %d)' % (name, num_samples, num_triplets, bits))
        q.put((name, r[name]))
        timer.stop()
        log("\t%s complete (%s)" % (name, str(timer)), log_file)
    except Exception, e:
        q.put("DEATH")
        traceback.print_exc() 
```

# javascript - 未定义未找到ie7

> ID：11884865
> 
> 赞同：0
> 
> 时间：2012-08-09T13:45:31.543
> 
> 标签：javascript

IE7 使用 Google Maps API 给我一个脚本问题。

加载页面时，它会在警告框中显示“未找到未定义”。

这只发生在 IE7 中，而不是 IE8 或 IE9。在其他浏览器中也很好，我猜是编码错误。一旦我取出 JS，显然没有警告但 map 不起作用。

这是我的整个 JS。提前致谢！

```
var map;
var markers = [];
var infoWindow;
var panorama;

function init_map() {
    map = new google.maps.Map(document.getElementById("map"), {
        //center: new google.maps.LatLng(40, -100),
        zoom: 4,
        mapTypeId: 'roadmap',
        mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
        }
    });
    infoWindow = new google.maps.InfoWindow();
    var address = $('#address').val();
    var address_optional = $('#address_optional').val();
    if (address == '' && address_optional != '1') init_location();
    else searchLocations(address_optional);
}

function init_location(lat, lng, zoom) {
    if (lat === undefined) lat = 40;
    if (lng === undefined) lng = -100;
    if (zoom === undefined) zoom = 4;
    map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(lat, lng),
        zoom: zoom,
        mapTypeId: 'roadmap',
        mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
        }
    });
}
$("#next").live('click', function(event) {
    event.preventDefault();
    var page_number = $('body').data("page_number");
    $('body').data("page_number", (page_number + 1));
    searchLocations();
});
$("#previous").live('click', function(event) {
    event.preventDefault();
    var page_number = $('body').data("page_number");
    $('body').data("page_number", (page_number - 1));
    searchLocations();
});

function searchLocations() {
    var address = $('#address').val();
    var geocoder = new google.maps.Geocoder();
    var address_optional = $('#address_optional').val();
    geocoder.geocode({
        address: address
    }, function(results, status) {
        if ((status == google.maps.GeocoderStatus.OK)) {
            searchLocationsNear(results[0].geometry.location);
        } else {
            if (address_optional == '1') {
                searchLocationsNear('', 1);
            } else {
                alert(address + ' not found');
            }
        }
    });
}

function clearLocations() {
    infoWindow.close();
    for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(null);
    }
    markers.length = 0;
    var option = document.createElement("option");
    option.value = "none";
    option.innerHTML = "See all results:";
}

function createSidebarEntry(markerNum, sidebarContent, markerContent, lat, lng) {
    var div = document.createElement('div');
    div.innerHTML = sidebarContent;
    div.style.cursor = 'pointer';
    div.style.marginBottom = '5px';
    div.onclick = function() {
        infoWindow.setContent(markerContent);
        infoWindow.open(map, markers[markerNum]);
        init_location(lat, lng, 16);
        var latlng = new google.maps.LatLng(
        parseFloat(lat), parseFloat(lng));
        createMarker(latlng, lat, lng, markerContent);
    }
    return div;
}

function resizeMap(width, height) {
    $('#map').animate({
        width: width,
        height: height
    }, function() {
        google.maps.event.trigger(map, 'resize');
        map.setCenter(map.getCenter());
    });
}

function streetView(lat, lng) {
    var dom = 'streetview';
    panorama = new google.maps.StreetViewPanorama(document.getElementById(dom));
    displayStreetView(lat, lng, dom);
    if ($('#map').height() == 600) {
        resizeMap(850, 300);
        $('#streetview').height(300);
    }
}

function searchLocationsNear(center, address_optional) {
    clearLocations();
    var sidebar = document.getElementById('sidebar');
    sidebar.innerHTML = '';
    var page_number = $('body').data("page_number");
    if (page_number == null) {
        page_number = 1;
        $('body').data("page_number", page_number);
    }
    var categoryid = $('#categoryid').val();
    if (address_optional == '1') var searchUrl = 'map_data.php?categoryid=' + categoryid + '&page_number=' + page_number + '&address_optional=' + address_optional;
    else var searchUrl = 'map_data.php?lat=' + center.lat() + '&lng=' + center.lng() + '&categoryid=' + categoryid + '&page_number=' + page_number;
    //alert(searchUrl);
    $.ajax({
        type: 'GET',
        url: searchUrl,
        dataType: 'json',
        success: function(msg) {
            var locations = msg.locations;
            var markersContent = msg.markersContent;
            var sidebarContent = msg.sidebarContent;
            var bounds = new google.maps.LatLngBounds();
            for (var i = 0; i < locations.length; i++) {
                var name = locations[i]['name'];
                var address = locations[i]['address'];
                var distance = parseFloat(locations[i]['distance']);
                var latlng = new google.maps.LatLng(
                parseFloat(locations[i]['lat']), parseFloat(locations[i]['lng']));
                var sidebarEntry = createSidebarEntry(i, sidebarContent[i], markersContent[i], locations[i]['lat'], locations[i]['lng']);
                sidebar.appendChild(sidebarEntry);
                createOption(name, distance, i);
                createMarker(latlng, locations[i]['lat'], locations[i]['lng'], markersContent[i]);
                bounds.extend(latlng);
            }
            $('#pagination').html(msg.pagination);
            map.fitBounds(bounds);
        }
    });
    resizeMap(850, 600);
    $('#streetview').html('').height(0);
}

function createMarker(latlng, lat, lng, html) {
    var marker = new google.maps.Marker({
        map: map,
        position: latlng,
        animation: google.maps.Animation.DROP
    });
    google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, this);
    });
    $("#sidebar div").click(function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
    });
    markers.push(marker);
}

function createOption(name, distance, num) {
    var option = document.createElement("option");
    option.value = num;
    option.innerHTML = name + "(" + distance.toFixed(1) + ")";
}

function displayStreetView(lat, lng, dom) {
    var latlng = new google.maps.LatLng(lat, lng);
    var panoramaOptions = {
        position: latlng,
        pov: {
            heading: 270,
            pitch: 0,
            zoom: 1
        }
    };
    panorama = new google.maps.StreetViewPanorama(document.getElementById(dom), panoramaOptions);
    map.setStreetView(panorama);
} 
```

# c++ - 为 MFC 接口开发自动翻译

> ID：11884868
> 
> 赞同：1
> 
> 时间：2012-08-09T13:45:45.883
> 
> 标签：c++, visual-studio-2010, visual-c++, mfc

我用 Visual C++ 和 MFC 开发了一个应用程序，我需要翻译帮助文件（每种语言一个文件），我正在寻找类似于 PHP 中的 i18n 的解决方案。

当应用程序安装在windows上时，应用程序需要检测“Windows”的语言设置并显示相应的翻译，如果不支持Windows语言，则应设置默认语言（英语）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:36:40.197

如果您使用对话，您可以创建对话的特定语言版本。对于普通字符串，您可以使用特定于语言的字符串表资源。

如果您需要更直接的控制，您可以使用各种[国家语言支持](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319081%28v=vs.85%29.aspx)api。

# php - dev 和 prod 的字符串输出长度不同

> ID：11884871
> 
> 赞同：1
> 
> 时间：2012-08-09T13:45:48.490
> 
> 标签：php, adodb

放轻松，因为我是 PHP 新手；）

我的开发堆栈是带有 XAMP 的 Windows 7，我的实时服务器是一个交钥匙 LAMP 堆栈。

我正在使用 ADODB 连接到 MSSQL 并将所有结果附加到一个字符串中，代码如下：

```
 $sql = "SELECT Field1 FROM tb_Table";

        $rs = $db->Execute($sql); 

         if (!$rs) {
            print $db->ErrorMsg(); 
        } else {

            $arr = $rs->GetRows();
            $rows = '';
            //Loop through parent array (rows)
                for ($i=0;$i<=(count($arr)-1);$i++) {
                    $rows .= " ".$arr[$i][0]." ";
                }
print strlen($rows) 
```

我本地机器上的字符串长度是 195,057 在服务器上是 136,858

我已经检查过从数据库返回的行数是否相同，但我不明白为什么字符串的长度在环境之间应该不同。

任何指针将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:59:19.247

我对 ADODB 扩展不太熟悉，但您可以尝试将`for`循环更改为：

```
foreach($arr as $row) {
    $rows .= " ".$row[0]." ";
} 
```

这将解决分配给数组的键不连续的可能性。

如果这没有帮助，请尝试计算字符串长度`mb_strlen()`，因为它适用于包含多个字节字符的编码：

```
print mb_strlen($rows); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:39:31.833

好吧，猜对了。问题不在于提供程序的代码，Linux 机器上的提供程序仅从字段返回最大长度 255。

Windows 提供程序返回字段的完整长度。

谢谢大家看:)

# spring - 使用 h2 数据库创建表

> ID：11884874
> 
> 赞同：10
> 
> 时间：2012-08-09T13:45:53.500
> 
> 标签：spring, hibernate, h2

我是 h2 的新手。我只是在带有 hibernate 的 spring 嵌入式模式下使用 h2。我正在尝试使用 h2 执行以下脚本。

```
CREATE TABLE acct_authority (
  id bigint(20) NOT NULL auto_increment,
  name varchar(255) NOT NULL default '',
  value varchar(255) NOT NULL,
  PRIMARY KEY  (id),
  UNIQUE KEY name (name)
); 
```

表 acct_authority 的创建没有任何错误。但是如果我使用以下脚本创建另一个表。

```
CREATE TABLE acct_role (
  id bigint(20) NOT NULL auto_increment,
  name varchar(255) NOT NULL default '',
  PRIMARY KEY  (id),
  UNIQUE KEY name (name)
); 
```

它显示错误，因为约束名称已经存在。我犯了什么错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T17:45:31.140

您试图创建两个具有相同名称的约束。如您所见，两个 CREATE TABLE 语句都包含以下内容：

```
UNIQUE KEY name (name) 
```

结果是第一个创建了名为*name*的约束，第二个失败了，因为约束*name*已经存在。问题可以通过使用唯一名称来解决。同样，一般来说，为数据库对象使用更多描述性名称是有意义的。也许您可以使用例如以下内容：

```
 UNIQUE KEY acct_authority_name_UNIQUE (name)  
  ...  
  UNIQUE KEY acct_role_name_UNIQUE (name) 
```

# iphone - iOS Enterprise OTA 启动但在图标下显示“Waiting...”

> ID：11884878
> 
> 赞同：0
> 
> 时间：2012-08-09T13:46:01.617
> 
> 标签：iphone, ios, installation, ota

我已按照所有说明进行操作，从网页链接安装时，我在 iPhone 上获得了安装提示，但随后出现应用程序图标，并且图标下方显示“等待...”状态。进度条上没有任何进展——它只是停滞不前。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:20:10.640

正如欧文提到的那样检查坏文件。还要检查 ipa 的文件权限并在您托管它们的服务器上支持 plist。我有这个文件权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:16:13.457

听起来像是一个坏文件，无论是 ipa 文件还是支持的 plist。检查您的构建过程是否有任何错误。确保下载包中包含所有正确的文件。

# ios - 如何使用 StoryBoard 从另一个 ViewController 设置 UIImageView 的图像？

> ID：11884879
> 
> 赞同：0
> 
> 时间：2012-08-09T13:46:02.513
> 
> 标签：ios

我需要一个照片查看器控件。当我点击 UIImageView 时，UIImageView 的图像应该是屏幕上唯一的东西。

为此，我创建了一个名为 ImageViewController 的新 ViewController 和一个更大的 UIImageView。

现在我正在尝试从第一个控制器设置第二个 imageview 的图像。

有什么好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:11:23.823

对于缩略图（小图像），我会创建一个 UIButton 而不是 UIImageview。您可以设置按钮的图像。您可以向按钮添加目标方法以创建和显示 ImageViewController 的视图。

在 ImageViewController 中实现一个方法，如 initWithImage:(UIImage *)imageToShow。在该方法中，将图像设置为 iVar（成员变量）。然后在 ImageViewController 的 viewDidLoad 中设置 imageView 的图片。

现在您可以使用图像创建一个 ImageViewController 并在您的目标方法中显示。

# boost - boost::filesystem 规范化文件名

> ID：11884885
> 
> 赞同：3
> 
> 时间：2012-08-09T13:46:28.787
> 
> 标签：boost, portability, boost-filesystem

我需要规范化文件名，使其不包含任何不可移植的字符。但这`portable_file_name`只是检查并返回布尔值。**无论如何**，我需要将给定的字符串转换为可移植的名称来创建文件。

有没有可重复使用的作品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:36:56.493

尝试这个：

boost::filesystem3::path 便携文件名；

便携文件名.normalize();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:18:04.773

我假设您的意思是某些字符 (*:;\"?<>/\|) 在某些操作系统（例如 Mac OS 9）上可以用作文件名或路径名字符，但在其他操作系统（例如 Windows XP). 对吗？

如果是这样，您可能应该自己进行字符转换。过去，我通过使用正则表达式来查找不可接受的文件名字符并将其替换为破折号或适用于所有目标操作系统的东西来完成此操作。然后，您可以安全地使用这两个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-07T01:19:24.833

执行此操作的重要步骤之一是将文件名`./file`或指向符号链接的文件名转换为在可能没有这些概念的其他平台上工作的文件名。Boost v1.48.0+ 实际上[具有以下功能](https://www.boost.org/doc/libs/1_48_0/libs/filesystem/v3/doc/reference.html#canonical)：

```
path canonical(const path& p, const path& base = current_path());
path canonical(const path& p, system::error_code& ec);
path canonical(const path& p, const path& base, system::error_code& ec); 
```

这通常涉及将相对路径转换为绝对路径。这些函数也经常在执行安全检查之前被调用（例如，请求的文件是否在 web 服务器的 web-root 目录中？）。

请注意，`cannonical()`需要文件存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-06T22:35:26.907

到目前为止，我能想到的最好的是：

```
for (auto &c:name)
    {
        char test[] = { c,0 };
        if (!boost::filesystem::portable_file_name(test))
        {
            c = '_';
        }
    } 
```

# c++ - IDirectDrawSurface7::BltFast Rect vs. X & Y Co-ords

> ID：11884886
> 
> 赞同：0
> 
> 时间：2012-08-09T13:46:36.700
> 
> 标签：c++, directx

此 DirectX 7 功能： http: [//msdn.microsoft.com/en-us/library/windows/desktop/gg426183 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/gg426183(v=vs.85).aspx)

参数包括 LPRECT 以及 X 和 Y 坐标。我的困惑在于哪个优先；矩形的左上角坐标，或 X 和 Y 坐标。

也许我是一个彻头彻尾的白痴，他们有不同的目的，但我不明白怎么做。请耐心等待我；我当然不像你们中的 99% 那样有经验，但我正在慢慢到达那里。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:38:47.627

这是一个愚蠢的问题。rect 是您要渲染的图像部分，x 和 y 坐标是您要渲染到的位置。源矩形和目标坐标。

对不起，我是个傻瓜。

# jquery - 如何实现水平页高进度？

> ID：11884889
> 
> 赞同：0
> 
> 时间：2012-08-09T13:46:39.623
> 
> 标签：jquery, height, progress, scrolltop

最近有人问我如何使用 jQuery 创建一个水平页面高度进度条，类似于这里的：[http](http://www.piccsy.com/investors/) ://www.piccsy.com/investors/ 。我环顾四周，通过谷歌搜索和旧的 jQuery 插件库都找不到任何东西。

有谁知道如何实现这种效果？我认为它与 $('#containerDiv').scrollTop() 有关，但我对该方法的熟悉程度为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:07:00.570

你使用 scrollTop(); 是正确的。

这是一个使用窗口高度的示例，但可以很容易地应用于容器 div。

```
$(document).scroll(function(){
var theDistance =  $(window).scrollTop(),
      theHeight = $(document).height(),
  heightPercent = theDistance/theHeight*100;

  console.log(heightPercent);

}); 
```

见例子：http: [//jsbin.com/ikakim/1/edit](http://jsbin.com/ikakim/1/edit)

这会将您与滚动区域顶部的距离（以百分比表示）记录到您的浏览器控制台。因此，如果您向下一半，heightPercent 将为“50” - 从这里您可以将水平线宽或其他东西设置为其总大小的 50%。

请注意，由于滚动条的高度，在到达底部时可能会出现一些问题（当前记录 ~ 最大 97）。

# php - 如何以人类可读的格式输出（到日志）多级数组？

> ID：11884891
> 
> 赞同：111
> 
> 时间：2012-08-09T13:46:40.237
> 
> 标签：php, drupal

我在一个drupal站点上工作，在调试时，我总是不得不阅读长的嵌套数组。结果，我一生中的大部分时间都花在使用箭头键、回车键和制表键上，将 1000 多个字符串拆分为嵌套的可读格式。

对于drupal 开发人员，我不能使用devel 的dsm()，因为我正在使用多步骤#ahah/#ajax 表单，并且我只能将数组输出到错误日志，而不是屏幕。

视觉示例：

邪恶的：

```
数组（'form_wrapper' => 数组（'#tree' => true, '#type' => 'fieldset', '#prefix' => '', '#suffix' => '', '#value' = > '', 'name' => 数组 ('#type' => 'textfield', '#title' => NULL, '#size' => 60, '#maxlength' => 60, '#required' = > false, '#description' => NULL, '#attributes' => 数组 ('placeholder' => 'Email', ), '#post' => 数组 ('form_wrapper' => 数组 ('name' => '', '通过' => '', ),
```

...

好的：

```
array ( 
'form_wrapper' => array ( 
    '#tree' => true, 
    '#type' => 'fieldset', 
    '#prefix' => '<div>', 
    '#suffix' => '</div>', 
    '#value' => '', 
    'name' => array ( 
        '#type' => 'textfield', 
        '#title' => NULL, 
        '#size' => 60, 
        '#maxlength' => 60, 
        '#required' => false, 
        '#description' => NULL, 
        '#attributes' => array ( 
            'placeholder' => 'Email', 
        ), 
```

**编辑**：对不起，“不输出到屏幕”，我的意思是通过drupal的系统消息，可以以可点击的嵌套格式输出数组（使用devel.module）。

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2013-09-11T12:48:29.070

如果您需要将错误记录到 Apache 错误日志，您可以尝试以下操作：

```
error_log( print_r($multidimensionalarray, TRUE) ); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-09T13:54:12.947

[http://php.net/manual/en/function.print-r.php](http://php.net/manual/en/function.print-r.php) 这个函数可以用来格式化输出，

```
$output = print_r($array,1); 
```

`$output`是一个字符串变量，它可以像所有其他字符串一样被记录。在纯 php 中，您可以使用`trigger_error`

前任。`trigger_error($output);`

[http://php.net/manual/en/function.trigger-error.php](http://php.net/manual/en/function.trigger-error.php)

如果您还需要在 html 中对其进行格式化，则可以使用`<pre>`标签

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-09T13:53:03.660

## 简单的东西：

使用`print_r`,`var_dump`或者`var_export`如果您在查看源代码模式而不是 HTML 模式下查看结果，或者正如@Joel Larson 所说，如果您将所有内容包装在`<pre>`标签中，则应该做得很好。

`print_r`最适合可读性，但它不会打印 null/false 值。

`var_dump`最适合检查值类型和长度以及 null/false 值。

`var_export`类似于`var_dump`但它可以用来获取转储的字符串。

任何这些返回的格式在源代码中都正确缩进，并且`var_export`可以用于日志记录，因为它可以用于返回转储的字符串。

## 进阶的东西：

使用 PHP 的 xdebug 插件将`var_dump`s 打印为 HTML 格式的字符串而不是原始转储格式，并且还允许您提供要用于格式化的自定义函数。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-09-13T20:52:25.900

我只是想知道为什么没有人使用或推荐我更喜欢调试数组的方式：

```
error_log(json_encode($array)); 
```

在我的浏览器旁边，我`tail`的服务器登录控制台，例如。

```
tail -f /var/log/apache2/error.log 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-09T13:55:45.567

Drupal 的[Devel 模块](http://drupal.org/project/devel)还有其他有用的功能，包括可以将格式化的数组和对象打印到日志文件的功能。[请参阅http://ratatosk.net/drupal/tutorials/debugging-drupal.html](http://ratatosk.net/drupal/tutorials/debugging-drupal.html)上的指南

> **dd()**
> 
> 将任何变量记录到站点临时目录中名为“drupal_debug.txt”的文件中。此函数的所有输出都附加到日志文件中，以便在您修改代码时轻松查看变量的内容如何变化。
> 
> 如果您使用的是 Mac OS X，您可以使用 Logging Console 来监控日志文件的内容。
> 
> 如果您使用的是 Linux 风格，您可以使用命令“tail -f drupal_debug.txt”来查看记录到文件中的数据。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-09T13:56:30.790

这将帮助你

~~`echo '<pre>';`~~

```
$output = print_r($array,1); 
```

~~`echo '</pre>';`~~

**编辑**

using`echo '<pre>';`是无用的，但`var_export($var);`会做你期望的事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-09T13:51:47.643

~~您应该能够在 pre 标记中使用 var_dump() 。否则你可以考虑使用像 dump_r.php 这样的库：[https ://github.com/leeoniya/dump_r.php](https://github.com/leeoniya/dump_r.php)~~

我的解决方案不正确。OP 正在寻找一种用空格格式化的解决方案来存储在日志文件中。

一个解决方案可能是使用带有 var_dump 的输出缓冲，然后 str_replace() 所有带空格的选项卡在日志文件中格式化。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-13T09:38:27.427

**句法**

```
print_r(variable, return); 
```

变量 **必需**。指定要返回有关信息的变量

返回 **可选**。当设置为 true 时，此函数将返回信息（不打印）。默认为假

**例子**

```
error_log( print_r(<array Variable>, TRUE) ); 
```

# android - 在android中打开sqlite数据库

> ID：11884893
> 
> 赞同：0
> 
> 时间：2012-08-09T13:46:40.433
> 
> 标签：android, sqlite

如何在不是子类的类中打开数据库`Activity`？

在 的子类中`Activity`，我可以使用`openOrCreateDatabase()`，但我可以在不同的类中打开数据库吗？

我尝试将数据库实例设为静态实例并在其中打开它`Activity`并在另一个类中获取静态实例，但它会引发异常，说明数据库已关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:50:12.620

看看这个[教程](http://www.vogella.com/articles/AndroidSQLite/article.html)。

我经历了它，这是一个关于如何在 Android 中使用 SQLite 的非常好的教程。

本质上，您需要创建一个数据库助手类来创建表。然后，您可以在您的帮助程序类中`Activity`创建您的数据库和/或表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:53:25.763

通常的做法是使用 SQLite 数据库适配器，有时还使用与使用数据库的活动分开的帮助程序类。这是使用该代码的示例的[链接。](http://android-er.blogspot.com/2011/06/simple-example-using-androids-sqlite_02.html)vogella 教程也很好，但是 ContentProvider 的使用使得理解仅 SQLite DB 需要包含哪些内容有点困难。

本质上，助手类负责创建、更新和删除数据库，而适配器类处理更改值、删除行以及实际调用助手打开数据库的方法。

# java - JVM如何保护文件访问。？

> ID：11884898
> 
> 赞同：0
> 
> 时间：2012-08-09T13:46:47.010
> 
> 标签：java, security, jvm

JVM 如何保护应用程序的文件访问。

假设我们下载了一个小程序，并从具有管理员权限的用户运行它。并假设它的编写方式会从您的系统中删除一些重要文件 JVM 默认会阻止这些操作吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:51:17.140

Applet 使用[SecurityManager](http://docs.oracle.com/javase/tutorial/essential/environment/security.html)运行。这控制了所有的安全敏感操作。

# java - 如何使用 Java 和 Selenium2/Webdriver 在文本字段中输入明天的日期

> ID：11884900
> 
> 赞同：0
> 
> 时间：2012-08-09T13:46:52.413
> 
> 标签：java, date, textbox, webdriver, selenium-webdriver

我正在使用 Selenium2/WebDriver 在 Java 中编写自动化测试。我需要验证未来的生日是不允许的。为了获得明天的日期，我正在使用：

```
Calendar calendar = Calendar.getInstance();
Date today = calendar.getTime();
calendar.add(Calendar.DAY_OF_YEAR, 1); 
```

我无法将其打印到文本字段，因为 .sendKeys 需要字符。任何帮助表示赞赏。我也不确定这是否是获得明天约会的最佳方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:58:01.243

您的代码基本上是正确的。使用 a`Calendar`生成`Date`对象：

```
Calendar calendar = Calendar.getInstance();
Date today = calendar.getTime();

calendar.add(Calendar.DAY_OF_YEAR, 1);
Date tomorrow = calendar.getTime(); 
```

用于`SimpleDateFormat`将其格式化`Date`为`String`：

```
DateFormat dateFormat = new SimpleDateFormat("dd-MMM-yyyy");

String todayAsString = dateFormat.format(today);
String tomorrowAsString = dateFormat.format(tomorrow);

System.out.println(todayAsString);
System.out.println(tomorrowAsString); 
```

印刷：

```
09-Aug-2012
10-Aug-2012 
```

您可以使用 Selenium 将这些`String`对象发送到日期控件（当然，如果它接受键控输入）。您需要调整日期模式`"dd-MMM-yyyy"`以匹配页面上输入控件所期望的格式，例如它可能是 ( `"MM/dd/YY"`)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:54:51.350

首先，您不是要在定义日期之前添加吗？然后，你可以做一个

```
today.toString() 
```

通过 sendkeys 分配，但 IMO 您应该首先查看小部件接受的格式（例如欧洲与美国）并相应地格式化您的日期（例如使用类似[这样](http://javatechniques.com/blog/dateformat-and-simpledateformat-examples/)的东西）。

# .net - 输出精度降低到操作数的精度

> ID：11884908
> 
> 赞同：0
> 
> 时间：2012-08-09T13:47:29.377
> 
> 标签：.net, math, expression, precision, delphi-prism

我收到有关以下表达式的警告消息。

```
(400*ev.PageBounds.Width)/2400 
```

警告消息是**输出精度降低到操作数的精度**。

为什么？我可以忽略它吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:50:55.570

只需使用更广泛精度的操作数：

```
(400.0*ev.PageBounds.Width)/2400.0 
```

或铸造它们：

```
(((double)400)*v.PageBounds.Width)/(double)2400 
```

等等。请注意，它`400`决定了结果的类型，您可以跳过强制转换`2400`

编辑：不，一般来说你不应该忽略它。该消息警告您将 BLAH 除以 2400 可能会导致分数被截断。IE。3500 / 2400 = 1。当所有操作数都是整数时，它会以这种方式完成，例如：

```
2 * 4 / 10 * 10 ==== 0 
```

尽管

```
2 * 4.0 / 10 * 10 ==== 8 
```

# eclipse - Eclipse Juno 并安装 Maven surefire 插件

> ID：11884909
> 
> 赞同：1
> 
> 时间：2012-08-09T13:47:29.160
> 
> 标签：eclipse, maven

我正在学习 Maven，并且我有一个带有简单 pom 的示例项目。我也想添加surefire插件，这样我就可以运行junit测试了。我假设我可以以某种方式使用 Eclipse 添加插件，还是需要使用命令行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T04:39:57.200

[@Ajay](https://stackoverflow.com/users/90874/thsoft) [George](https://stackoverflow.com/users/628943/ajay-george)提供的答案似乎是最好的，但如果您缺少带有红色和绿色条的漂亮 JUnit GUI，请参阅@thSoft 的[评论](https://stackoverflow.com/questions/12392926/maven-surefire-arguments-when-running-junit-test-via-eclipse#comment21746544_12397172)：

> 如果您在 target/surefire-reports 中打开 XML 文件，您可以在 Eclipse 的 JUnit 视图中查看 Surefire 的测试报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:56:20.863

安装包含 surefire 插件的[m2eclipse 。](http://www.sonatype.org/m2eclipse/)

下面给出的屏幕截图包含“运行方式”->“Maven 测试”选项，它将调用 surefire 插件。

![m2eclipse Run As 选项的屏幕截图](../Images/7affd95559801911fdd7594567c9d6fb.png)

# selenium - selenium：使用 python 使用 send_keys 上传大文件

> ID：11884910
> 
> 赞同：0
> 
> 时间：2012-08-09T13:47:28.617
> 
> 标签：selenium, centos, python-2.6

我正在尝试使用 Selenium 在使用**send_keys**运行浏览器交互的机器上上传一个 960KB 的文件，该文件正在发送到另一台机器。目前这不起作用，我在下面得到以下回溯。但是，当上传图像或小型压缩文件时它可以工作（所以我认为上传压缩文件不是问题，这是其他人遇到的问题）。我在发布之前尝试搜索主题：

https://groups.google.com/forum/#!msg/selenium-users/dlxoowrZYeA/24kPjqRW2FcJ[1-25] http://grokbase.com/t/gg/selenium-developer-activity/124tpkyzmq/issue- 3812-in-selenium-python-无法上传文件

但是，在进行建议的编辑后，它仍然无法正常工作。**我正在使用 selenium 2.25.0、centos 6.3 操作系统和 Python 2.6.6**

```
 Traceback (most recent call last):
  File "/home/testrunner/Suite/CATS/cobalt/cobalttest.py", line 270, in run
  testMethod()
  File "/home/testrunner/Suite/CATS/mhetest/psmBaseSetupModule.py", line 549, in runTest
    PSM.command().find_element_by_name( 'location' ).send_keys(  'filename.tar.gz' )
  File "/usr/lib/python2.6/site-packages/selenium/webdriver/remote/webelement.py", line 144, in send_keys
value = self._upload(local_file)
  File "/usr/lib/python2.6/site-packages/selenium/webdriver/remote/webelement.py", line 228, in _upload
{'file': base64.encodestring(fp.getvalue())})['value']
  File "/usr/lib/python2.6/site-packages/selenium/webdriver/remote/webelement.py", line 205, in _execute
return self._parent.execute(command, params)
  File "/usr/lib/python2.6/site-packages/selenium/webdriver/remote/webdriver.py", line 154, in execute
response = self.command_executor.execute(driver_command, params)
  File "/usr/lib/python2.6/site-packages/selenium/webdriver/remote/remote_connection.py", line 283, in execute
return self._request(url, method=command_info[0], data=data)
  File "/usr/lib/python2.6/site-packages/selenium/webdriver/remote/remote_connection.py", line 324, in _request
response = opener.open(request)
  File "/usr/lib/python2.6/urllib2.py", line 391, in open
response = self._open(req, data)
  File "/usr/lib/python2.6/urllib2.py", line 409, in _open
'_open', req)
  File "/usr/lib/python2.6/urllib2.py", line 369, in _call_chain
result = func(*args)
  File "/usr/lib/python2.6/urllib2.py", line 1190, in http_open
return self.do_open(httplib.HTTPConnection, req)
  File "/usr/lib/python2.6/urllib2.py", line 1163, in do_open
r = h.getresponse()
  File "/usr/lib/python2.6/httplib.py", line 990, in getresponse
response.begin()
  File "/usr/lib/python2.6/httplib.py", line 391, in begin
version, status, reason = self._read_status()
  File "/usr/lib/python2.6/httplib.py", line 355, in _read_status
**raise BadStatusLine(line)
BadStatusLine** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:21:21.383

将 Firefox 降级到 Firefox 5 时问题已解决。我不确定如何使用更新版本的 Firefox 上传文件。

# ssh - 通过 putty 访问 minecraft rcon 服务器

> ID：11884914
> 
> 赞同：1
> 
> 时间：2012-08-09T13:47:44.083
> 
> 标签：ssh, console, putty, minecraft

我想使用内置的 rcon 来管理 Minecraft 服务器。

问题是服务器不返回内容。打开腻子->设置地址->设置端口->选择ssh->单击打开->控制台打开，但它是空的，我什么也做不了。

奇怪的是：1.端口打开 2.在腻子日志中显示：连接到 xxx.xxx.xxx.xxx 端口 xxxxxx 3.我的世界控制台通知我连接到 rcon

所以看起来我已连接，但腻子控制台中没有显示任何内容。

我试过[这个查询工具](http://www.minecraftforum.net/topic/842376-minecraft-server-rconquery-utility/)，它工作正常。如果这个工具可以，为什么putty不能？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T23:10:52.930

您可以尝试专门为 Minecraft 远程连接设计的[**mcrcon 。**](http://sourceforge.net/projects/mcrcon/)它非常易于使用，并且也支持 bukkit 控制台颜色。

来自网站的描述：

> **描述**
> 
> Mcrcon 是功能强大的兼容 IPv6 的 minecraft rcon 客户端，具有 bukkit 着色支持。它非常适合远程管理并用作自动化服务器维护脚本的一部分。不会在服务器端触发“IO: Broken pipe”或“IO: Connection reset”垃圾邮件错误。
> 
> 适用于 Windows (x86)、Linux (x86) 和 Mac OS X (x86 / x86-64) 的预编译二进制文件。
> 
> **特征**
> 
> *   IPv6 支持。
> *   交互式终端模式。
> *   支持 Windows 和 sh 兼容 shell 上的 Bukkit 着色。
> *   在一个命令行中发送多个命令。
> *   静音模式。不打印 rcon 输出。
> *   不会在服务器端引起“IO：连接重置”垃圾邮件。
> *   设计用作服务器维护 scipts 中工具链的一部分。

**[Bukkit 论坛](http://forums.bukkit.org/threads/admin-rcon-mcrcon-remote-connection-client-for-minecraft-servers-new-ipv6-support.70910/)**上的程序主页。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T18:05:33.047

RCON 是一个特定的协议，就像 SSH 和 Telnet 是它们自己的协议一样。当您打开与运行 RCON 的 Minecraft（或任何应用程序）的连接时 - 您需要使用 RCON 而不是 SSH / HTTP / Telnet。

您当前（或曾经）尝试将 SSH 与 RCON 通信，但这是行不通的。如果您将 Putty 更改为 RAW 模式，如果您正确格式化数据包，您可以开始与您的 Minecraft 服务器进行对话。

Valve 协议[在这里解释](https://developer.valvesoftware.com/wiki/Source_RCON_Protocol)

根据您的最终目标，有各种编程语言的协议包装器……Java、PHP、.NET - 只需 Google 一下

# c++ - Typedef 循环依赖

> ID：11884915
> 
> 赞同：8
> 
> 时间：2012-08-09T13:47:47.177
> 
> 标签：c++, forward-declaration, circular-dependency

如何解决以下循环依赖？

```
typedef boost::variant<int, bool, double, std::string, Structure> Value;
typedef std::list<std::pair<std::string, ValueContainer>> Structure;
typedef std::vector<Value> ValueContainer; 
```

我正在尝试以更 C++ 的形式表示来自 C api 数据库库的对象。该数据库允许存储值或值数组，以及具有结构的表示，如下所示：

```
typedef struct ApiStructureMember 
{
    char* name;
    struct ApiValueContainer value;
    struct ApiStructureMember_T* next;
} ApiStructureMember_T; 
```

最后用一个union来表示一个值，如下：

```
typedef struct ApiValue 
{
    union 
    {
        int i;
        const char*   s;
        ...
        struct ApiStructureMember_T* firstStructureMember;
    } value;
} ApiValue_T; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:04:40.650

您不能有**相互包含的**类型。想一想：编译器会进入生成数据的无限循环。

有两种通用模式：第一种是通过**数据类型相互指向**

```
struct OddNode; // forward declaration

struct EvenNode 
{
    OddNode* prev;
    OddNode* next;
};

struct OddNode
{
    EvenNode* prev;
    EvenNode* next;
}; 
```

如果您放弃指针，并通过值包含实现偶数和奇数节点，那么编译器将永远无法解析定义。

一般来说：只需画出您希望如何布置数据的图片，用方框表示数据，用线连接各个部分。然后用一个类替换每个框，并用指向相应类的指针替换每一行。如果您在某处有循环依赖，只需在代码顶部前向声明类。

第二个循环依赖是通过**奇怪重复的模板参数**（CRTP）

```
template<typename T> 
struct Y 
{};

struct X
: 
    public Y<X> 
{}; 
```

您的示例将使用带有`Structure`as`X`和`std::list< ..., Structure>`as的 CRTP `Y<X>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:16:19.957

这不是一个解决方案吗？

```
class Structure;
typedef boost::variant<int, bool, double, std::string, Structure> Value;
typedef std::vector<Value> ValueContainer;

class Structure: public std::list<std::pair<std::string, ValueContainer>>
{
}; 
```

# sql - SELECT CASE WHEN TINYINT 字段条件满足返回字符串

> ID：11884920
> 
> 赞同：1
> 
> 时间：2012-08-09T13:47:59.817
> 
> 标签：sql, sql-server, sql-server-2005

我正在使用 SQL Server 2005。我正在尝试从 TINYINT 字段中进行选择。如果该字段的值为 0 我想选择一个空字符串而不是 ' ' 。字段名称是水平的。这是我正在做的事情：

```
SELECT 
[Level] = 
Case 
t.[Level]
    WHEN 0 THEN ' '
    ELSE t.[Level]
END
FROM table t 
```

此代码始终返回 0。我试图解决问题并尝试了以下操作：

```
SELECT 
[Level] = 
Case 
t.[Level]
    WHEN 0 THEN 'test'
    ELSE t.[Level]
END
FROM table t 
```

我得到了一个错误`Conversion failed when converting the varchar value 'test' to data type tinyint`

所以我看到这里存在转换问题。我试过了：

```
SELECT 
[Level] = 
Case 
t.[Level]
    WHEN 0 THEN CONVERT(VARCHAR,t.[level])
    ELSE t.[Level]
END
FROM table t 
```

但这当然仍然返回 0，只是字符，所以它仍然没有做我需要的。我认为很可能有更好的方法来做到这一点，但不知道如何处理它。谁能给我一些关于如何处理这个问题的建议？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:52:46.290

对于 CASE 语句，所有返回值必须是相同类型（或自动转换）；这就是为什么`''`工作，但不是的原因`'test'`。

```
SELECT [Level] = 
Case t.[Level]
    WHEN 0 THEN ' '
    ELSE CONVERT(VARCHAR(3), t.[Level])
END
FROM table t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:51:12.653

你试图解决这个问题的方法是错误的；您需要将 else 部分转换为 varchar 以匹配 varchar 空字符串：

```
SELECT 
[Level] = 
Case 
t.[Level]
    WHEN 0 THEN ''
    ELSE CAST(t.[Level] AS VARCHAR(10))
END
FROM table t 
```

# c++ - 如何在程序的当前状态下找到最大可分配内存量

> ID：11884921
> 
> 赞同：0
> 
> 时间：2012-08-09T13:48:03.280
> 
> 标签：c++, visual-c++, memory-management

我有一个用 VC6 编写的 MFC 应用程序。我想为某些操作临时分配可能的最大内存。为了做到这一点，我需要找到在程序的当前状态下我可以分配多少内存。是否有任何有用的功能或代码可以做到这一点？

当然，我可以尝试按降序多次分配内存，看看是否分配。但是有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:26:32.237

为了获得可以分配的最大内存量，我实际上会按升序分配内存，每次使用 realloc 将分配的内存加倍，直到它失败。但是，不能保证分配的内存实际上是在物理 RAM 中，这可能取决于您计划使用此内存的目的。请参阅[这篇文章](http://blogs.msdn.com/b/ericlippert/archive/2009/06/08/out-of-memory-does-not-refer-to-physical-memory.aspx)，了解何时以及为什么内存分配可能会失败。

# python - Pycharm 调试是否适用于 python3？

> ID：11884924
> 
> 赞同：5
> 
> 时间：2012-08-09T13:48:13.810
> 
> 标签：python, python-3.x, pycharm, python-3.2

我在 Mac OS X 10.8 上，并且使用 Homebrew 安装了最新的稳定 Python 3 (3.2.3)。然后我使用 virtualenvwrapper 创建了一个虚拟环境 -`mkvirtualenv --no-site-packages --python=/usr/local/bin/python3 py3`我已经将 Pycharm 配置为使用这个 virtualenv 并且我可以运行脚本，但是我无法调试它们，当我按下 debug Pycharm 的调试器时，它就会退出：

```
/Users/qweqwe/.virtualenvs/py3/bin/python /Applications/PyCharm.app/helpers/pydev/pydevd.py --multiproc --client 127.0.0.1 --port 61596 --file /Users/qweqwe/Dropbox/Works/test/python/asyncore_test.py
pydev debugger: process 84441 is connecting
Connected to pydev debugger (build 117.663)

Process finished with exit code 132 
```

我错过了什么还是 Pycharm 无法调试 python3？

更新：不管脚本是什么，它根本不起作用。即使在调试单行 hello world 调试器时也会出现错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T20:38:00.080

是的。在 pycharm settings/Library/Frameworks/Python.framework/Versions/3.2/bin/python3 中输入这个（从[Python3/MacOSX 集成复制到 pycharm 中](https://stackoverflow.com/questions/10078914/python3-macosx-integration-into-pycharm)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T06:13:16.730

我昨天也遇到了同样的问题，你可以这样试试：添加

```
if __name__ == '__main__': 
```

在您的代码中，然后设置断点并运行调试器。

# html - 在网页中渲染 SVG

> ID：11884927
> 
> 赞同：0
> 
> 时间：2012-08-09T13:48:20.423
> 
> 标签：html, svg

`SVG`我有一个需要在其中显示徽标的网页。这在最新的浏览器中很容易实现，但我也需要使其与旧浏览器兼容。如果浏览器不支持 SVG，我需要如何向用户显示替代图像。我遇到了一个名为 的方法`HTTP-content negotiation`，但是如何实现它以获得所需的结果？我尝试了该`<object>`标签，但它似乎不适用于 IE，并且在尝试使用 Firefox 时很难设置样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:09:52.563

我会在[Modernizr](http://modernizr.com/)的帮助下实现这个客户端。给定一个标记，例如...

```
<!-- Start with bitmaps because 
they will show up in all browsers even 
if javascript is not enabled -->
<img src="logo1.png" class="logo" />
<img src="logo2.png" class="logo" />
<img src="logo3.png" class="logo" />
<img src="logo4.png" class="logo" /> 
```

你可以做...

```
$(document).ready(function(){
  if (Modernizr.svg){
      $('.logo').each(function(){
         var src = $(this).attr("src");
         var svg = src.substr(0, src.lastIndexOf('.')) + ".svg";
         $(this).attr("src", svg)
      })
  }
}) 
```

# visual-studio-2010 - Sharepoint 2010 WSP 部署不会更新站点

> ID：11884932
> 
> 赞同：1
> 
> 时间：2012-08-09T13:48:41.347
> 
> 标签：visual-studio-2010, deployment, sharepoint-2010, wsp

我不太习惯整个 Sharepoint 的东西，但通常我只是简单地将我的 Visual Studio 的东西部署为 wsp 包，然后使用 PS 部署它（如果我不记得不正确的话）.. 现在我想更新母版页我的网站，并添加一些 javascript 文件并更新现有的 javascript 文件..这次由于某种原因，部署确实更新了所有现有的 javascript 文件，但它没有添加新的 javascriptfiles..并且它没有更新母版页出于某种原因..我已经重复检查了我正在分解的包是否包含新文件和更新的母版页，我还检查了 javascript 文件的 Elements.xml 文件，它们在那里..有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:59:37.257

检查您的文件是否是根据定义自定义的（在 SharePoint Designer 中，它们将具有 (i) 符号。如果是 - 将它们恢复为定义并再次尝试停用该功能。

# javascript - 添加 AsyncFileUpload 控件后 UpdatePanel 在 Mozilla 中停止工作

> ID：11884933
> 
> 赞同：0
> 
> 时间：2012-08-09T13:48:42.293
> 
> 标签：javascript, asp.net, ajaxcontroltoolkit

在我的网页中，我有一个[Ajax 控件工具包`AsyncFileUpload`](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx)和一个带有触发器的`DropDownList`内部。`UpdatePanel`如果用户在下拉列表中选择了另一个项目，那么它将`TextBox`使用`UpdatePanel`.

在将其`AsyncFileUpload`放在页面上之前，它工作正常。添加`AsyncFileUpload`到页面后，`UpdatePanel`已停止工作以响应下拉菜单。

具体来说，它在 Internet Explorer 中仍然可以正常工作，但在 Mozilla 中无法正常工作。

如何修复此错误？

**JavaScript：**

```
<script type="text/javascript">

       function uploadStarted() {
           $get("Img_Show").style.display = "none";
       }

       function uploadComplete(sender, args) {
           var Img_Show1 = $get("Img_Show");
           //  Img_Show.src = "images/loader.gif";
           Img_Show.style.cssText = "";
           var img = new Image();
           img.onload = function () {
               Img_Show.style.cssText = "height:200px;width:209px;float:left;margin-bottom:0;position:absolute;margin-right: 0;left:0px; top:0px;padding-bottom: 15px;padding-left: 15px;padding-right: 15px;padding-top: 15px;";
               Img_Show.src = img.src;
           };
           img.src = "<%=ResolveUrl(UploadFolderPath) %>" + args.get_fileName();
       }

</script> 
```

**标记：**

```
<cc1:AsyncFileUpload OnClientUploadComplete="uploadComplete" runat="server" ID="AsyncFileUpload1"
    ThrobberID="imgLoader" OnUploadedComplete="FileUploadComplete"  Width="100" OnClientUploadStarted = "uploadStarted"/>

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:DropDownList runat="server" ID="ddlBusinessType" Style="width: 400px; left: 0px;" 
            OnSelectedIndexChanged="ddlBusinesstype_SelectedIndexChanged" 
             AutoPostBack="true" CssClass="designer" TabIndex="8"
             CausesValidation="True">
        </asp:DropDownList>

        </div>
            <span class="error">Error Class</span>
        </div>

        <asp:Panel ID="PanelBusinessType" runat="server">
            <div class="field">
                <asp:TextBox ID="txtNewBusinessType" runat="server" CssClass="textfield" TabIndex="9"></asp:TextBox>
            </div>
            <span class="error"></span>
        </asp:Panel>
    </ContentTemplate>   
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="ddlBusinessType" />
    </Triggers>
</asp:UpdatePanel> 
```

# unix - 为什么我使用 wget 获取的 HTML 看起来与我在浏览器中看到的不同？

> ID：11884934
> 
> 赞同：-1
> 
> 时间：2012-08-09T13:48:41.903
> 
> 标签：unix, web-scraping, wget

我使用 wget 下载 HMTL，但我得到的与我在浏览器中看到的不同。特别是，我对位置的纬度感兴趣

```
wget "http://m.yp.com/30332/pep-boys?page=0"
grep 'data-lat=' pep-boys\?page\=0 
```

... 没结果 ：（（（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:52:16.717

唯一可能的原因是您的标头与您兄弟的标头不同，因此网络服务器的行为方式不同。

看看这个：[http ://www.askapache.com/linux/wget-header-trick.html](http://www.askapache.com/linux/wget-header-trick.html)

# c++ - 如何转换为变量类型 - 在 C++ 中模拟类型变量

> ID：11884938
> 
> 赞同：1
> 
> 时间：2012-08-09T13:48:45.980
> 
> 标签：c++, templates, types, type-conversion

我正在实现类似于类型化遗传编程的东西，并且在 C++ 类型方面有点卡住了。

我有一个节点网络，节点有不同的类型，例如一些是功能节点，而另一些只是数据。为了处理此类节点的集合，除了使用多态性来存储基类指针的集合之外，我别无选择。

```
class Node {
private:
    std::string label;
    std::string node_type;
};

template
<typename FNC>
class FunctionalNode : public Node {
    std::function<FNC> function;
};

class Network {
   std::vector<Node*> nodes;
   ...
} 
```

注意我有一个 templated `FunctionalNode`，它存储 a `std::function`，我认为（但不确定）如果我要存储一个普通的函数指针，我的问题同样适用。

所以问题是，在某些时候给定一个`Node`指向 dervied的指针`FunctionalNode`，我需要将存储的函数应用于某些值。这意味着我需要将基指针转换为派生类，但由于它是模板化的，我不确定如何执行此操作。

我想做类似下面的假 C++ 代码，它需要类型变量之类的东西：

```
Node * applyfunction(Node * functional_node, std::vector<Node*> arguments) {
    typevariable function_type = convert_node_type_to_typevariable(functional_node.node_type)
    functional_node_derived * = static_cast<function_type>(functional_node);
    ....
} 
```

节点`node_type`是我用来包含节点类型信息的某种结构，例如它的函数形式的类型，并将其`convert_node_type_to_typevariable`转换为我可以在这个假设的 C++ 语言中使用的类型变量。

由于 C++ 缺乏对类型变量的支持，或者完全不同的解决问题的方法，我有什么想法可以实现这种设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:18:17.797

你应该利用你的多态结构。您可以`Node`使用纯虚方法定义而不是创建`applyfunction`自由函数。

```
class Node {
protected:
    std::string label;
    std::string node_type;
public:
    virtual ~Node () {}
    virtual Node * applyfunction (std::vector<Node *> args) = 0;
}; 
```

然后你的推导将执行这项工作。

```
template
<typename FNC>
class FunctionalNode : public Node {
    std::function<FNC> function;
public:
    Node * applyfunction (std::vector<Node *> args) {
        //...
    }
}; 
```

# tsql - 在 Sybase 上的 T-SQL 中使用游标获取多行

> ID：11884939
> 
> 赞同：1
> 
> 时间：2012-08-09T13:48:47.257
> 
> 标签：tsql, sybase

我正在尝试从我的 Sybase DB 中获取行块（即每个事务一次获取 100 行）。

但是，我在[这里](http://msdn.microsoft.com/en-us/library/aa172595%28v=sql.80%29.aspx)和[这里](http://msdn.microsoft.com/en-us/library/ms187881%28v=sql.105%29.aspx)读到T-SQL 根本不支持这一点。

有什么解决方法吗？

此外，如果可以一次获取多行，我该如何修改以下代码来做到这一点：

```
DECLARE my_cursor CURSOR FOR
    SELECT
        COL1,
        COL2,
        ...
        COLN
    FROM
        MY_DB
    WHERE
        SOME_CONDITION_SATISFIED
GO

DECLARE
  VAR1 TYPE,
  VAR2 TYPE,
  ...
  VARN TYPE

    SET NO COUNT ON

    OPEN my_cursor
    WHILE @@SQLSTATUS = 0
    BEGIN
        FETCH my_cursor into
            @VAR1,
            @VAR2,
            ...
            @VARN
    END

CLOSE my_cursor
DEALLOCATE CURSOR my_cursor 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:13:46.413

对于数据库程序员来说，SQL Server 像对待 Sybase 一样对待游标，您的代码没有任何问题。在 T-SQL 中，您基本上无法控制服务器获取物理行以填充游标的速度。不过，对于程序员的观点来说，这并不重要。

如果您需要对网络使用进行这种细粒度的控制，您最好使用其他更适合 ETL 过程的 API，例如 SSIS。

但是，如果您的问题是由于打开的事务而防止数据库争用，则可以使用`transaction isollation level read uncommitted`（不锁定表）或插入一些带有计数器的事务管理逻辑，如下所示：

```
....
DECLARE @counter INT; SET @counter = 0;
BEGIN TRANSACTION; -- OPEN THE FIRST TRANSACTION
OPEN my_cursor
WHILE @@SQLSTATUS = 0
BEGIN
    -- control transactions: commit at every 100 and opens another transaction
    IF @counter > 99
    BEGIN
        SET @counter = 0;
        COMMIT TRANSACTION;
        BEGIN TRANSACTION;
    END
    ELSE SET @counter = @counter +1;

    FETCH my_cursor into
        @VAR1,
        @VAR2,
        ...
        @VARN
END
COMMIT TRANSACTION; -- CLOSE THE LAST TRANSACTION
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T16:14:34.713

您可以在 sybase 中一次获取多行。使用下面一次获取 100 行

```
set cursor rows 100 for cursor_name 
```

# datepicker - 如何显示时间选择器？

> ID：11884942
> 
> 赞同：0
> 
> 时间：2012-08-09T13:48:52.653
> 
> 标签：datepicker, extjs, sencha-touch-2

我需要以类似的方式在 sencha touch 中显示时间选择器，`xtype: 'datepickerfield'`知道该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:36:20.833

看看[SenchaTouch-v2-Datetimepicker](https://github.com/tomalex0/SenchaTouch-v2-Datetimepicker)

它有点错误，但大多数情况下都有效。一个缺点是没有设置许可证。猜猜GPL，但他没有在电子邮件上回复它......

干杯，奥列格

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T12:34:26.720

Sencha Market 为 datetimepicker 提供了一个扩展。没有尝试过，但我希望它对你有用

[https://market.sencha.com/users/21/extensions/43](https://market.sencha.com/users/21/extensions/43)

# c++ - 枚举已签名

> ID：11884943
> 
> 赞同：-4
> 
> 时间：2012-08-09T13:48:56.723
> 
> 标签：c++, enums

以下代码：

```
void f3()
{
    enum AeF3
    {
        f3E1 = 1,
        f3E2,
        f3E3,
    };
    struct AsF3
    {
        AeF3 e1:2, e2:2, e3:2;
    };
    AsF3 inst;
    inst.e1 = f3E1;
    inst.e2 = f3E2;
    inst.e3 = f3E3;
    cout << "inst.e1 is " << ((inst.e1 == f3E1) ? "" : "not ") << "equal to f3E1" << endl;
    cout << "inst.e2 is " << ((inst.e2 == f3E2) ? "" : "not ") << "equal to f3E2" << endl;
    cout << "inst.e3 is " << ((inst.e3 == f3E3) ? "" : "not ") << "equal to f3E3" << endl;
} 
```

生成以下输出：

```
inst.e1 is equal to f3E1
inst.e2 is not equal to f3E2
inst.e3 is not equal to f3E3 
```

我怎样才能在没有演员表的情况下解决这个错误？

## 更多描述

e2 & e3 不能保存大于 1 的值，因为它们必须为它们的符号保存一位。我需要一种方法来告诉编译器不要将此位用作符号，而仍将其用作值。我试过了：

```
enum AeF3 : byte 
```

但这无济于事。不是 -2，而是比较 254，而 2 不等于 -2 也不等于 254。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:05:39.633

整个方法是错误的。C++03 中的枚举类型（以及 C++11 中的该语法）是未指定的，并且创建具有底层枚举类型（或一般有符号类型）的位域不是正确的方法。你可能应该这样做：

```
struct AsF3 {
   unsigned int e1 : 2;
   unsigned int e2 : 2;
   unsigned int e3 : 2;
}; 
```

请注意，位域上的类型是底层存储类型，而不是每个存储元素的类型，无论您使用`AeF3`还是`unsigned int`，所有成员`e1`, `e2`,`e3`都将是整数类型（而不是枚举）

# ios - 调用 AudioFileGetProperty 方法后未填充 iOS AC3 AudioStreamBasicDescription 属性

> ID：11884946
> 
> 赞同：1
> 
> 时间：2012-08-09T13:49:16.380
> 
> 标签：ios, mp3, audioqueue

我正在调用 AudioFileGetProperty 方法，以便为 .ac3 音频文件设置 AudioStreamBasicDescription 对象的属性，但结果所有属性均为 0。这是我的代码

```
NSString *soundFile= [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"sample1AC3.ac3"];
            CFURLRef soundURL = CFURLCreateWithFileSystemPath(kCFAllocatorDefault, (__bridge void*)soundFile, kCFURLPOSIXPathStyle, false);
            int err;
            err = AudioFileOpenURL(soundURL, kAudioFileReadPermission, 0, &mAudioFile);
            //  
            AudioStreamBasicDescription audioFormat;
            UInt32 size1 = sizeof(audioFormat);
            //    
            err = AudioFileGetProperty(mAudioFile, kAudioFilePropertyDataFormat, &size1, &audioFormat); 
```

这是我的日志

audioFormat AudioStreamBasicDescription {...}

mSampleRate Float64 0

mFormatID UInt32 0

mFormatFlags UInt32 0

mBytesPerPacket UInt32 0

mFramesPerPacket UInt32 0

mBytesPerFrame UInt32 0

mChannelsPerFrame UInt32 0

mBitsPerChannel UInt32 0

mReserved UInt32 0

该代码适用于 .mp3 很好，我不明白为什么它不适用于 .ac3 格式。

# c# - 如何将字符串转换为指定的日期格式

> ID：11884950
> 
> 赞同：1
> 
> 时间：2012-08-09T13:49:20.513
> 
> 标签：c#, date

您好，我想将我的日期转换为以下格式 - 2012 年 6 月 1 日、2012 年 3 月 3 日、2012 年 6 月 11 日

```
 Convert.ToDateTime(ds.Tables[0].Rows[0]["Date"]).ToString("d MMM yyyy") 
```

但是有了上面的代码，我就变成了这样

2012 年 6 月 1 日，2012 年 3 月 3 日，请帮帮我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:06:08.013

未经测试，但它应该可以工作：

```
DateTime dateTime = Convert.ToDateTime(ds.Tables[0].Rows[0]["Date"]);
string date = string.Format("{0}{1} {2} {3}", dateTime.Day, GetOrdinal(dateTime.Day), dateTime.ToString("MMM"), datetTime.Year);

public string GetOrdinal(int number)
{
        switch(number % 100)
        {
            case 11:
            case 12:
            case 13:
                    return "th";
        }
        switch(number % 10)
        {
                case 1:
                        return "st";
                case 2:
                        return "nd";
                case 3:
                        return "rd";
                default:
                        return "th";
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:00:27.127

看来你不能，根据这个：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:01:08.733

没有办法用格式字符串来做到这一点。您必须自己转换天数。[这个答案](https://stackoverflow.com/a/20175/350749)中描述了一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:01:30.943

如果您要使用“st”、“nd”、“rd”、“th”等。没有其他方法可以使用 swtich 运算符：

```
switch(yourdate.Day % 10)
  case(1): ...
  case(2): ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T14:04:05.237

你可以这样试试

```
string strPostfix = string.Empty;
if (DateTime.Now.Day == 1 || DateTime.Now.Day == 21 || DateTime.Now.Day == 31)
    {
    strPostfix = "st";
    }
    else if (DateTime.Now.Day == 2 || DateTime.Now.Day == 22)
    {
    strPostfix = "nd";
    }
    else if (DateTime.Now.Day == 3 || DateTime.Now.Day == 23)
    {
    strPostfix = "rd";
    }
    else
    {
    strPostfix = "th";
    } 
```

希望这对你有帮助，谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T14:04:14.573

由于序数非常特定于语言，因此不建议使用它们！但是，如果必须，编写一个 switch 语句来处理它应该非常简单。（如果它对你真的很重要）

然后你可以在空格处分割你的字符串，处理第一部分，然后再次合并字符串

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-09T14:50:12.127

拜托，谷歌一点......有发布的解决方案 [http://blog.csharphelper.com/2010/07/15/find-the-ordinal-representation-of-an-integer-1st-2nd-3rd-in -c.aspx](http://blog.csharphelper.com/2010/07/15/find-the-ordinal-representation-of-an-integer-1st-2nd-3rd-in-c.aspx)

# data-binding - 将 xml 有效负载映射到不同的 POJO 对象

> ID：11884951
> 
> 赞同：1
> 
> 时间：2012-08-09T13:49:30.173
> 
> 标签：data-binding, jaxb

目前我正在使用 CXF 框架开发 web 服务。该网络服务将通过调用我的 DAO 层来执行我的数据库操作。我知道默认情况下 CXF 使用 JAXB 进行数据绑定。例如，如果我想创建一个新人，我的网络服务如下所示。

```
public Response createPerson(CreatePersonRequest request)
{

// Call to hibernate DAO class
personDao.create()
} 
```

这里 CreatePersonRequest 是我的 DTO 类（JAXB 注释），在我调用我的 DAO 类之前，我想将我的 DTO 类对象转换为 Hibernate Entity 对象。我想根据从我的网络服务收到的 XML 填充我的休眠实体对象。但是我在这里接收到的 XML 将适合 CreatePersonRequest 而不是我的 Person 实体对象。因为我的 XML 根标记将不是除此之外的，我的两个类的属性是相同的。简而言之，我想为同一个 XML 有效负载填充两种不同类型的 POJO 对象。有没有使用 JAXB 来实现这一点？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:11:40.003

我可以使用 XStream 使用 XStream 别名功能更改有效负载的根标记，然后我可以转换为我的实体对象。

# eclipse - 在 Eclipse 中调试两个 glassfish 域

> ID：11884952
> 
> 赞同：1
> 
> 时间：2012-08-09T13:49:35.007
> 
> 标签：eclipse, debugging, glassfish-3

我有两个 glassfish 域，一个前端和一个后端。我已经在 Eclipse 中设置了服务器适配器。在其中一个域上，我已将调试端口号更改为 9008 以避免冲突。

在调试模式下启动时，使用默认端口号 9009 的那个工作正常，当启动 9008 的那个时，我得到连接被拒绝。

我猜是因为 Eclipse 试图连接到 9009 端口而不是 9008。你认为这是对的吗？在那种情况下，我该如何更改 Eclipse 连接的端口？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:46:58.050

我发现这是 eclipse glassfish 插件中的一个错误。该插件经过硬编码以连接到端口 9009

[http://java.net/jira/browse/GLASSFISHPLUGINS-358](http://java.net/jira/browse/GLASSFISHPLUGINS-358)

# php - 启用 APC 后页面超时

> ID：11884958
> 
> 赞同：5
> 
> 时间：2012-08-09T13:49:50.333
> 
> 标签：php, windows, apache, apc

我已经在我们的 Windows 开发服务器上安装了 APC。在我启用 APC 并重新启动 apache 后，我们的页面不会加载。他们超时，我只是在浏览器上重置连接。服务器上的其他脚本`phpmyadmin`也不会加载。

这是我们的系统配置：

```
Windows 2003 Server
Apache 2.2.22
PHP Version 5.3.15
APC Version 3.1.11 
```

检查`apc.php`我看到命中 80% 和未命中 20%。

**APC 运行时设置**

```
apc.cache_by_default    1
apc.canonicalize    1
apc.coredump_unmap    0
apc.enable_cli    0
apc.enabled    1
apc.file_md    50
apc.file_update_protection    2
apc.filters    ''
apc.gc_ttl    3600
apc.include_once_override    0
apc.lazy_classes    0
apc.lazy_functions    0
apc.max_file_size    1M
apc.num_files_hint    1000
apc.preload_path    ''
apc.report_autofilter    0
apc.rfc1867    0
apc.rfc1867_freq    0
apc.rfc1867_name    APC_UPLOAD_PROGRESS
apc.rfc1867_prefix    upload_
apc.rfc1867_ttl    3600
apc.serializer    default
apc.shm_segments    1
apc.shm_size    32M
apc.slam_defense    1
apc.stat    1
apc.stat_ctime    0
apc.ttl    0
apc.use_request_time    1
apc.user_entries_hint    4096
apc.user_ttl    0
apc.write_lock    1 
```

我已经看到在指定的临时文件夹上创建的文件具有以下名称，`.apc.a00532`但它们有 `file size 0`

我还检查了 php 错误日志，但没有看到任何内容。

非常感谢任何帮助，在此先感谢。

**编辑** 我正在使用 VC9 编译的 PHP，我的 apache 与从 apache 休息室编译的 VC9 匹配。我也尝试过使用 APC 3.1.9，但它也不显示页面。我运行的任何 php 脚本都会超时，除了 apc.php 本身，它显示我正在缓存的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:10:10.010

您使用的 APC 版本可能与您的 PHP 版本不匹配。
我应该做的第一件事是从命令行运行`php -v`并检查错误。
请注意，APC 3.1.11 版本仍处于测试阶段；最新的稳定版本是 3.1.9。[您可以从这里](http://dev.freshsite.pl/php-accelerators/apc.html)
下载 APC 预编译的二进制版本。 要选择正确的 APC 版本（VC6/VC9 - 线程安全/非线程安全），您应该禁用 APC 并打开“ [phpinfo()](http://php.net/manual/en/function.phpinfo.php) ”页面，然后查找选项“**线程安全**”和“**配置命令**” . 如果你从[PHP 站点](http://windows.php.net/download/#php-5.3)下载了你的 PHP ，5.3.15 版本应该是 VC9 编译的。
 ****此版本不应与“apache.org”二进制文件一起使用，您可以[在此处阅读，因此您还应该使用](https://bugs.php.net/bug.php?id=60645)[Apache Lounge](http://www.apachelounge.com/download/)提供的 Apache VC9 版本。****

# javascript - 如何在 Handlebars 每个助手中获取索引？

> ID：11884960
> 
> 赞同：292
> 
> 时间：2012-08-09T13:49:55.823
> 
> 标签：javascript, handlebars.js

我在我的项目中使用 Handlebars 进行模板化。有没有办法获取 Handlebars 中“每个”助手的当前迭代的索引？

```
<tbody>
     {{#each item}}
         <tr>
            <td><!--HOW TO GET ARRAY INDEX HERE?--></td>
            <td>{{this.key}}</td>
            <td>{{this.value}}</td>
         </tr>
     {{/each}}
</tbody> 
```

* * *

## 回答 #1

> 赞同：555
> 
> 时间：2013-01-01T19:56:28.190

在较新版本的 Handlebars 索引（或对象迭代情况下的键）中，默认情况下每个助手都提供标准。

* * *

摘自：[https ://github.com/wycats/handlebars.js/issues/250#issuecomment-9514811](https://github.com/wycats/handlebars.js/issues/250#issuecomment-9514811)

当前数组项的索引已经通过@index 提供了一段时间：

```
{{#each array}}
    {{@index}}: {{this}}
{{/each}} 
```

对于对象迭代，请改用@key：

```
{{#each object}}
    {{@key}}: {{this}}
{{/each}} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-07-09T21:12:20.613

这在较新版本的 Ember 中发生了变化。

对于数组：

```
{{#each array}}
    {{_view.contentIndex}}: {{this}}
{{/each}} 
```

看起来#each 块不再适用于对象。我的建议是为它滚动你自己的辅助函数。

感谢这个[提示](https://stackoverflow.com/questions/21841340/what-is-the-correct-way-of-getting-the-index-of-an-array-when-iterating-over-it)。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-05-20T16:43:43.597

In handlebar version 3.0 onwards,

```
{{#each users as |user userId|}}
  Id: {{userId}} Name: {{user.name}}
{{/each}} 
```

In this particular example, user will have the same value as the current context and userId will have the index value for the iteration. Refer - [http://handlebarsjs.com/block_helpers.html](http://handlebarsjs.com/block_helpers.html) in block helpers section

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-05-08T11:29:11.160

I know this is too late. But i solved this issue with following Code:

Java Script:

```
Handlebars.registerHelper('eachData', function(context, options) {
      var fn = options.fn, inverse = options.inverse, ctx;
      var ret = "";

      if(context && context.length > 0) {
        for(var i=0, j=context.length; i<j; i++) {
          ctx = Object.create(context[i]);
          ctx.index = i;
          ret = ret + fn(ctx);
        }
      } else {
        ret = inverse(this);
      }
      return ret;
}); 
```

HTML:

```
{{#eachData items}}
 {{index}} // You got here start with 0 index
{{/eachData}} 
```

if you want start your index with 1 you should do following code:

Javascript:

```
Handlebars.registerHelper('eachData', function(context, options) {
      var fn = options.fn, inverse = options.inverse, ctx;
      var ret = "";

      if(context && context.length > 0) {
        for(var i=0, j=context.length; i<j; i++) {
          ctx = Object.create(context[i]);
          ctx.index = i;
          ret = ret + fn(ctx);
        }
      } else {
        ret = inverse(this);
      }
      return ret;
    }); 

Handlebars.registerHelper("math", function(lvalue, operator, rvalue, options) {
    lvalue = parseFloat(lvalue);
    rvalue = parseFloat(rvalue);

    return {
        "+": lvalue + rvalue
    }[operator];
}); 
```

HTML:

```
{{#eachData items}}
     {{math index "+" 1}} // You got here start with 1 index
 {{/eachData}} 
```

Thanks.

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-05-22T08:31:01.037

Arrays:

```
{{#each array}}
    {{@index}}: {{this}}
{{/each}} 
```

If you have arrays of objects... you can iterate through the children:

```
{{#each array}}
    //each this = { key: value, key: value, ...}
    {{#each this}}
        //each key=@key and value=this of child object 
        {{@key}}: {{this}}
        //Or get index number of parent array looping
        {{@../index}}
    {{/each}}
{{/each}} 
```

Objects:

```
{{#each object}}
    {{@key}}: {{this}}
{{/each}} 
```

If you have nested objects you can access the `key` of parent object with `{{@../key}}`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-17T19:57:30.590

Using loop in hbs little bit complex

```
<tbody>
     {{#each item}}
         <tr>
            <td><!--HOW TO GET ARRAY INDEX HERE?--></td>
            <td>{{@index}}</td>
            <td>{{this}}</td>
         </tr>
     {{/each}}
</tbody> 
```

[Learn more](https://handlebarsjs.com/guide/builtin-helpers.html#each)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-23T04:29:25.837

In handlebar version 4.0 onwards,

```
{{#list array}}
  {{@index}} 
{{/list}} 
```

# python-2.7 - 无法在 SnowLeopard (MacOS 10.6.8)、Python2.7 中创建 virtualenv – 错误

> ID：11884962
> 
> 赞同：1
> 
> 时间：2012-08-09T13:50:00.737
> 
> 标签：python-2.7, osx-snow-leopard, virtualenv, pip

我当前的 django 项目需要“virtualenv”。我可以安装它，请求的目录是用一些基本的子目录（bin、include、lib）创建的，但它会停止在让我猜测的错误消息上。所以我希望这里有人知道这个问题，可以帮忙吗？

下面是一些希望有用的控制台文本输出。

提前非常感谢！莉娜

### **问题描述：**

电脑配置：MacOS 10.6.8（雪豹），Python 2.7。

1）创建虚拟环境：

```
Suesssauer:site-packages sss$ virtualenv --distribute /Users/sss/EclipseProjects/django-projects/DEV
New python executable in /Users/sss/EclipseProjects/django-projects/DEV/bin/python
Please make sure you remove any previous custom paths from your /Users/sss/.pydistutils.cfg file.

COMMENT: fyi – Contents of .pydistutils.cfg
  >> [install] 
  >> install_lib = /Library/Python/$py_version_short/site-packages )

Installing distribute........................................done.
Installing pip....
  Complete output from command /Users/sss/Ecli...DEV/bin/python -x 
  /Users/sss/Ecli...VEL/bin/easy_install         /Library/Python/2.7/...pport/pip-1.1.tar.gz:
  /Users/sss/EclipseProjects/django-projects/DEV/bin/python: 
  can't open file '/Users/sss/EclipseProjects/django-projects/DEV/bin/easy_install': 
  [Errno 2] No such file or directory 
```

评论：这是真的，它不见了。但是手动复制它不是我的工作，不是吗？

* * *

```
...Installing pip...done.
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/bin/virtualenv", line 8, 
    in <module> load_entry_point('virtualenv==1.7.2', 'console_scripts', 'virtualenv')()
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 942, in main
    never_download=options.never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1054, in create_environment
    install_pip(py_executable, search_dirs=search_dirs, never_download=never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 654, in install_pip
    filter_stdout=_filter_setup)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1020, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /Users/sss/Ecli...ork_DEVEL/bin/python -x /Users/sss/Ecli...VEL/
bin/easy_install   /Library/Python/2.7/...pport/pip-1.1.tar.gz failed with 
error code 2 
```

不知道，文件“/Library/Python/2.7/site-packages/virtualenv_support/pip-1.1.tar.gz”确实存在（如果这是谈论的那个）！

2) 问题：检查 virtualenv 的安装——我是否必须考虑以下这些警告？

控制台输出：

```
Suesssauer:site-packages sss$ pip install virtualenv
Downloading/unpacking virtualenv
  Downloading virtualenv-1.7.2.tar.gz (2.2Mb): 2.2Mb downloaded
  Running setup.py egg_info for package virtualenv

    warning: no previously-included files matching '*' found under directory 'docs/_templates'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
Installing collected packages: virtualenv
  Running setup.py install for virtualenv

    warning: no previously-included files matching '*' found under directory 'docs/_templates'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
Installing virtualenv script to /Library/Frameworks/Python.framework/Versions/2.7/bin
Installing virtualenv-2.7 script to /Library/Frameworks/Python.framework/Versions/2.7/bin
Successfully installed virtualenv
Cleaning up... 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:57:10.250

这不是您问题的直接解决方案，但我强烈建议您使用 virtualenv-burrito，它是与 virtualenv-wrapper 类一起打包的常用 virtualenv，使组织 virtualenvs 变得更加容易。

Virtualenv-burrtio：[https ://github.com/brainsik/virtualenv-burrito](https://github.com/brainsik/virtualenv-burrito)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:14:01.463

`.pydistutils.cfg`在运行之前尝试按照要求“删除”您的文件`virtualenv`：

```
mv /Users/sss/.pydistutils.cfg /Users/sss/.pydistutils.cfg.old 
```

来源：[https ://groups.google.com/forum/#!msg/python-virtualenv/dKZYWuMcI7Y/Z27XXKF5M4sJ](https://groups.google.com/forum/#!msg/python-virtualenv/dKZYWuMcI7Y/Z27XXKF5M4sJ)

而且我认为错误代码2也是由于`easy_install`，而不是`.tar.gz`文件。

# sql - 为模式和数据生成脚本

> ID：11884965
> 
> 赞同：31
> 
> 时间：2012-08-09T13:50:10.240
> 
> 标签：sql, sql-server-2008

我有一个 SQL Server 数据库，我想为其生成数据脚本和架构。我试过`Tasks -> Generate Scripts -> Script all objects in the selected database`了，但它没有给出`.sql`数据本身。

我们如何`.sql`为数据和模式生成数据库？请建议一些简单的方法，例如工具或可以轻松使用的东西

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-09T13:53:50.327

**备份/导出数据库**

使用 SQL Server Management Studio 备份/导出 SQL Server 数据库的方法有两种：

1.  右键数据库→任务→生成脚本→选择数据库→将“脚本数据”选项更改为true→...</p>

2.  右键单击数据库→任务→备份→...

第一种方法创建一个 .sql 文件，然后我们需要运行该文件。此方法的问题在于 .sql 文件可能太大而无法使用 SQL Server Management Studio 打开。在这种情况下，我们需要使用 sqlcmd 实用程序（如果我们有 SQL Server MS，应该已经安装）。说明如下。

第二种方法创建一个 .back 文件，然后很容易将其导入到空数据库中。

**导入数据库**

如果我们有一个 .sql 文件并且它不是太大，我们可以使用 SQL Server MS 打开它并运行它。

如果我们有一个 .sql 文件，但它太大而无法用 SQL Server MS 打开，我们必须像这样使用 sqlcmd：

```
>sqlcmd -i C:\panels_QA28July11.sql -o C:\PanelsImportResult.txt 
```

-i 后面的参数是要导入的文件。-o 之后的参数是保存输出的位置。如果我们想在屏幕上看到进程，我们可以省略第二个参数。

默认情况下，它将使用本地机器和本地数据库服务器。如果我们想使用不同的机器和服务器，我们使用 -S 选项。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-08-09T13:57:57.610

右键单击 db => Tasks => Generate Scripts => 在“设置脚本选项：单击高级，找到`Types of data to script`。您可以在`Data only`,`Script and data`和之间进行选择`Schema only`。默认为`Schema only`

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-09-14T19:37:17.793

图片胜于文字，:)

[![在此处输入图像描述](../Images/b3f452f9e69401f226a793bc6ca9d112.png)](https://i.stack.imgur.com/4zZbr.jpg) [![在此处输入图像描述](../Images/dcd821026833f79de0d234fad01c69d9.png)](https://i.stack.imgur.com/36lbX.jpg)

# android - Activity 的 onTouchEvent() 触发 3 次？

> ID：11884969
> 
> 赞同：3
> 
> 时间：2012-08-09T13:50:18.113
> 
> 标签：android, android-activity, android-mediaplayer, touch-event

在我的 TitleScreen 活动中，我有...

```
@Override
public boolean onTouchEvent(MotionEvent event)
{
   Log.d("MyActivity", "in onTouchEvent!");

   MediaPlayer myplayer = MediaPlayer.create(TitleScreen.this, R.raw.mysound);
   myplayer.start();
   startActivity(new Intent("com.example.GAME"));
   return super.onTouchEvent(event);
} 
```

这导致声音在点击屏幕时快速连续播放 3 次，使我想要播放的声音有延迟回声。我检查了日志，以及我的“in onTouchEvent！” 消息被记录了 3 次。

这个活动只是一个标题屏幕的静态图像，想法是你点击它开始下一个活动，当你这样做时，指定的声音应该播放。

对于我的特定问题，我可以通过放置一个全局级别的 int 变量来解决它：

```
private static int playerInstances = 0; 
```

然后用以下内容包装我的 MediaPlayer 行：

```
if (playerInstances == 0)
{
    MediaPlayer myplayer = MediaPlayer.create(TitleScreen.this, R.raw.critical1);
    myplayer.start();
    playerInstances++;
} 
```

这保证了该代码只执行一次。所以我的问题解决了。我只是想知道为什么我一键获得了三次 onTouchEvent 。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T14:48:49.880

您实际上可以做的`onTouchEvent`（比使用静态变量更好）是：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
   final int action = event.getAction();

   if(action == MotionEvent.ACTION_DOWN) {
       Log.d("MyActivity", "in onTouchEvent!");
       MediaPlayer myPlayer = MediaPlayer.create(TitleScreen.this, R.raw.mysound);
       myPlayer.start();
       startActivity(new Intent("com.example.GAME"));
   }
   return super.onTouchEvent(event);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-09T11:15:04.580

发生这种情况是因为 onTouchevent() 具有在您触摸屏幕时调用的三个事件，即 ACTION_DOWN、ACTION_MOVE、ACTION_UP。因此，如果您不单独为这些事件应用条件，则会对 onTouchEvent() 中的代码进行 3 次调用。因此请确保将代码编写在适当的操作事件中。

# android - 传递数组列表 > 到一个片段

> ID：11884971
> 
> 赞同：2
> 
> 时间：2012-08-09T13:50:23.683
> 
> 标签：android, android-fragments

我有 3 个 ArrayList> 我想传递给 3 个片段。除了使它们静态之外，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:04:20.393

您可以在片段中使用 setArguments。看看[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)，基本上，您在创建 Fragment 之前创建一个 Bundle，然后将其设置为 Argument。

Android 文档中的示例：

```
public static class DetailsActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (getResources().getConfiguration().orientation
                == Configuration.ORIENTATION_LANDSCAPE) {
            // If the screen is now in landscape mode, we can show the
            // dialog in-line with the list so we don't need this activity.
            finish();
            return;
        }

        if (savedInstanceState == null) {
            // During initial setup, plug in the details fragment.
            DetailsFragment details = new DetailsFragment();
            details.setArguments(getIntent().getExtras());
            getFragmentManager().beginTransaction().add(android.R.id.content, details).commit();
        }
    }
} 
```

您可以创建捆绑包并设置参数，而不是使用 getIntent().getExtras()

```
Bundle bundle = new Bundle();
bundle.putSerializable(YOUR_KEY, yourObject);
fragment.setArguments(bundle); 
```

对于你的片段：

```
public static class DetailsFragment extends Fragment {
    /**
     * Create a new instance of DetailsFragment, initialized to
     * show the text at 'index'.
     */
    public static DetailsFragment newInstance(int index) {
        DetailsFragment f = new DetailsFragment();

        // Supply index input as an argument.
        Bundle args = new Bundle();
        args.putInt("index", index);
        f.setArguments(args);

        return f;
    }

    public int getShownIndex() {
        return getArguments().getInt("index", 0);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            // We have different layouts, and in one of them this
            // fragment's containing frame doesn't exist.  The fragment
            // may still be created from its saved state, but there is
            // no reason to try to create its view hierarchy because it
            // won't be displayed.  Note this is not needed -- we could
            // just run the code below, where we would create and return
            // the view hierarchy; it would just never be used.
            return null;
        }

        ScrollView scroller = new ScrollView(getActivity());
        TextView text = new TextView(getActivity());
        int padding = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,
                4, getActivity().getResources().getDisplayMetrics());
        text.setPadding(padding, padding, padding, padding);
        scroller.addView(text);
        text.setText(Shakespeare.DIALOGUE[getShownIndex()]);
        return scroller;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:22:38.397

您可以创建侦听器回调接口并在您的片段中实现它们。像这样的东西：

```
@Override
public void onSomeEvent(List<SomeData> data) {
    //do something with data
} 
```

在您的活动中创建此界面：

```
public interface OnSomeEventListener {
    onSomeEvent(List<SomeData> data);
} 
```

然后使用 findFragmentById 或 findFragmentByTag 获取您的片段并将其分配给侦听器：

```
this.onSomeEventListener = fragment; 
```

然后您可以调用该接口的方法，您的片段将接收回调。

片段和活动之间的第二种更简单的通信方式是广播接收器。您可以在片段中注册一些广播接收器，然后从活动中调用 sendBroadcast()。您的数据列表可以放在该广播消息的捆绑中。

# php - 从 Sphinx 中的空查询中排除关键字

> ID：11884973
> 
> 赞同：1
> 
> 时间：2012-08-09T13:50:29.297
> 
> 标签：php, sphinx

**是否可以通过 Sphinx 从空查询中排除某些关键字？**

我想到的是使用 Extended2 匹配模式，为了排除关键字，我将使用`-`or`!`运算符。我只需要通过 Sphinx 获取数据而不使用任何查询（排除运算符除外）。

在 Sphinx 中，我使用以下方法获取数据：

```
$data = $sphinx->query(''); 
```

此查询返回不必匹配任何内容的数据（这意味着它将返回所有数据，当然仅限于查询限制）。问题是，如果我用 ! 或 - 运算符，它不返回任何内容。例如：

```
$data = $sphinx->query('-google'); 
```

`$data`返回为`false`

也许还有另一种方法可以做到这一点。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:07:53.367

Sphinx 不喜欢仅否定查询。如果您检查 GetLastError()/GetLastWarning()，它会明确说明。

主要原因是它不能有效地使用它的索引。Sphinx 基于倒排索引的概念。所以要运行这个查询，它需要获取每个文档的列表，然后删除与关键字匹配的文档。

但是你让它工作。只需要给 sphinx 一个关键字，该关键字将出现在每个文档中。然后可以做

```
$data = $sphinx->query('popularword -google'); 
```

如果你没有一个词，那就是每个文件，只需添加一个假的 :)

```
sql_query = SELECT id, '__ALL__' as dummy, title ....... 
```

然后可以做

```
$data = $sphinx->query('__ALL__ -google'); 
```

因为这个词将出现在每个文件上。

不要期望查询会非常快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:31:05.130

据了解这是不可能的。Sphinx 将无法计算任何涉及搜索整个集合的查询。

对于允许您使用的两个选项`-`，文档中明确说明这是不可能的：

[SPH_MATCH_BOOLEAN](http://sphinxsearch.com/docs/1.10/boolean-syntax.html)：

> 无法评估像“-dog”这样隐式包含集合中所有文档的查询。

[SPH_MATCH_EXTENDED](http://sphinxsearch.com/docs/1.10/extended-syntax.html)：

> 但是，查询必须能够在不涉及所有文档的隐式列表的情况下进行计算

简短的回答是：不，这是不可能的。唯一的选择是，如果您想为一小部分关键字实现此功能，那么您可以在数据库中添加一个标志并将值设置为`true`如果文本包含此关键字。您可以使用 a`SetFilter()`从搜索结果中排除它们。我正在使用这个技巧从我的列表中排除包含特定关键字集的文档。

# arrays - 使用带有过滤器字符串 [] 数组的 LINQ C# 查询数据？

> ID：11884976
> 
> 赞同：0
> 
> 时间：2012-08-09T13:50:35.757
> 
> 标签：arrays, linq, c#-4.0, filter, lambda

基于此处的文档：http: [//docs.composite.net/Data/AccessingDataWithCSharp/How-to-Query-Data-Using-LINQ#_How_to_Query](http://docs.composite.net/Data/AccessingDataWithCSharp/How-to-Query-Data-Using-LINQ#_How_to_Query)

我需要使用 string[int1,int2,int3..] 类型的过滤器查询表中的数据，但不知道如何去做。

string[] 来自一个不同的表字段，它在表单上存储多选元素的 id 值：

表“**配置文件**”（AGlobal.profile）包含列：

```
Id   Types(profile_accomtypes)
1    1,2
2    4,7
3    12,4,6
4    3,6,9 
```

然后我有一个静态表“TypeDesc”（ALocal.proptype），总共列出了 12 个“Type”值：

```
Id   Description(proptype_names)
1     The first description
2     The second description
........
12    The twelfth description 
```

我创建了一个强编码类，使我能够轻松处理客户端提交的表单内容。表单中有几个多选（其中一个是上面 Profile 数据类型表中的“类型”。）每个多选都以序列化 JSON 格式传递给服务器，其中我是字符串。用逗号加入“类型”值分隔符保存到 Profile.Types 列。

现在，我想通过加载 Profile Id 的 Types string[] 并使用 int id 值过滤 TypeDesc 表以仅选择带有 Description 的 Type 值，从而将配置文件页面中的选择提供给客户端，以便我可以呈现描述作为客户端的项目符号列表。

配置文件表中的过滤器类型始终是 id 整数我使用的代码是：

```
var myProftype =
   (from d in connection.Get<AGlobal.profile>() // find multiselected type string values
   where d.Id == StUserSet.utoken
   select d).First();
   string sProftype = myProftype.profile_accomtypes;                
   string[] sTypes = sProftype.Split(',');

// now filter proptypes to sTypes
var myTAccomtypes =
   (from d in connection.Get<ALocal.proptype>() // get all the types from the DB
   where(r => sTypes.Contains(r.Field<int>("Id"))) //Lambda ?
   select d).All;

StringBuilder sb = new StringBuilder(0); //create a bullet list string
// Loop over strings
    foreach (string s in myTAccomtypes)
    {
          sb.append("<dd>"+ s +"</dd>");
    }
   TuAccomtypes = sb.ToString();  // pass string to JQuery Taconite as part of AJAX response to alter DOM. 
```

我在 Lambda 上尝试过滤我的类型时出错。 *在 VS2010 中：*

### 错误 = 无法将 lambda 表达式转换为 bool 类型，因为它不是委托类型。

我也不知道如何将 sTypes 变量解析为 int （如果需要），以便过滤器工作:(

我哪里错了？是否有一种更简洁的方法可以根据从 db 表中的列字段查询的逗号分隔列表过滤数据集？

提前感谢您的任何帮助/想法。马丁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:23:51.850

我不完全确定你的模型，但我认为这对你有用。我改变了你的 linq，并结合了一些陈述。我还将您的 Id 字段转换为字符串，以便可以在 array.Contains() 函数中正确找到它。您可能希望将字符串转换为整数并以这种方式进行比较，但这取决于您。

```
 var myProftype = profiles.First(p => p.Id == StUserSet.utoken);
    string sProftype = myProftype.profile_accomtypes;
    string[] sTypes = sProftype.Split(',');
    var myTAccomtypes = propTypes.Where(r => sTypes.Contains(r.Field<int>("Id").ToString()));
    StringBuilder sb = new StringBuilder(0);

    foreach (PropType s in myTAccomtypes)
    {
        sb.Append("<dd>" + s.Description + "</dd>");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:28:36.650

一旦从原始 Linq 查询中拆分字符串 var（它标识了一个带有逗号分隔 id 号的连接字符串的单个字段）。我无法正确使用“包含”。我转换了第二个 Linq 查询 ToList 来评估集合。

然后，我没有使用完整的结果，而是将结果限制为 id 和 name 字段。

依靠 Vimal Lakhera 发表的一篇文章：

[http://www.c-sharpcorner.com/uploadfile/VIMAL.LAKHERA/convert-a-linq-query-resultset-to-a-datatable/](http://www.c-sharpcorner.com/uploadfile/VIMAL.LAKHERA/convert-a-linq-query-resultset-to-a-datatable/) 我将结果集转换为允许轻松循环和选择字段的数据表输出为 html 字符串作为 JQuery Taconite 回调的一部分。

这对我有用...

```
// now filter proptypes to selected Types|
var myTAccomtypes = from d in connection.Get<ALocal.proptype>().ToList()
    // ToList() will evaluate collection, you cannot pass sTypes array of integers to a sql query, at least not in that way
    where sTypes.Contains(d.proptype_id.ToString())
    select new { d.proptype_id, d.proptype_name };

    DataTable AcomType = LINQToDataTable(myTAccomtypes);

    StringBuilder sb = new StringBuilder();
    // Loop over table rows
    foreach (var row in AcomType.Rows.OfType<DataRow>().Take(19))  // will .Take up to a maximum of x rows from above
    {
         sb.Append("<dd>");
         sb.Append(row["proptype_name"].ToString());
         sb.Append("</dd>");
     }
     HldUserSet.TuAccomtypes = sb.ToString();
     //HldUserSet.TuAccomtypes = string.Join(",", myTAccomtypes); //Check query content 
```

使用 Vimal 的“LINQToDataTable”和 LINQ 请求中的调整意味着我可以非常快速地在站点的许多地方使用该类。

这对于那些具有“2,7,14,16”形式的单个连接 id 字符串的人来说是一种享受，这些字符串需要拆分，然后用于过滤与字符串中的 id 匹配的更广泛的集合以记录 id 号在不同的集合中。

# iphone - 在 iphone sdk 中保留横幅（本地通知警报）

> ID：11884983
> 
> 赞同：1
> 
> 时间：2012-08-09T13:50:56.807
> 
> 标签：iphone, ios

我想保持**横幅**（在*本地通知*中）仅 2 或 3 分钟。如果可以，我们可以这样做，那么如何。我可以以编程方式为应用程序设置本地通知样式吗？

**横幅**

![在此处输入图像描述](../Images/52b94b4e3527e87b60413c5a293f8105.png)

我想在通知栏上保留横幅或永久保留文本

**通知栏**

![在此处输入图像描述](../Images/12ccefecc60313a26327810e1616d7d1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:00:43.803

你不能这样做。

iOS 通知横幅由用户设置，没有公共 API 可以为您的应用程序自定义一个。保持时间都不是全局的，并且由所有应用程序通过系统共享。想想一个将横幅保留时间设置为一个非常大的数字的开发人员......应该发生什么？为了保持系统的一致性，Apple 选择将其保密。

通知中心的工作方式相同，您无法访问它。我想，通知中心会无限期地保留所有通知……直到用户决定按小 X 删除它。

# javascript - 禁用后退、前进、寻找要在 Flash 播放器上运行的视频

> ID：11884990
> 
> 赞同：0
> 
> 时间：2012-08-09T13:51:16.700
> 
> 标签：javascript, flash

我想对在我的网站上为用户播放我的视频的 Flash 播放器进行大量控制，就像我想限制他们在视频中寻找某个位置一样，从用户第一次登录时离开的位置初始化视频并且他们将无法再次看到他们到目前为止已经看到的内容等。您能帮我吗？我怎样才能做到这一点？我以前从未做过 ActionScript 编程，但我非常了解 Javascript。用JS左右可以吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:41:39.650

必须故意将播放器设计为可通过 JavaScript 进行配置/编写。如果不是，那你就不走运了。

# java - Maven：经常从远程存储库下载的元数据 xml 文件

> ID：11884994
> 
> 赞同：5
> 
> 时间：2012-08-09T13:51:22.473
> 
> 标签：java, maven, jibx

我正在使用 Maven 来处理 Java 项目。我认为只有在第一次编译时才需要 Internet 连接才能从远程存储库下载所需的库，但每当我编译代码时都会收到几条下载消息。像这样的消息：

```
Downloading: http://repo.maven.apache.org/maven2/org/eclipse/core/resources/maven-metadata.xml
Downloading: http://repository.springsource.com/maven/bundles/external/org/eclipse/core/resources/maven-metadata.xml
Downloading: http://repository.springsource.com/maven/bundles/release/org/eclipse/core/resources/maven-metadata.xml
Downloading: https://oss.sonatype.org/content/repositories/snapshots/org/eclipse/core/resources/maven-metadata.xml 
```

为什么会发生这种情况以及如何防止它发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T12:50:15.297

当没有为工件指定版本信息时，通常会发生这种情况。

maven-metadata.xml 是一个文件，其中包含`<groupId>`，`<artifactId>`以及有关可用于依赖项的各种版本的版本信息。

如果在 pom.xml 中未指定工件的版本，maven 会下载此元数据文件以检查本地存储库是否包含最新版本。

因此，您可以通过在 pom.xml 文件中指定工件的版本信息来避免此下载，而不是更改可能影响将来其他 jar 文件更新过程的更新策略。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T14:37:10.423

最重要的是开始使用[存储库管理器](http://maven.apache.org/repository-management.html)，进一步检查[settings.xml 文件](http://maven.apache.org/settings.html#Repositories)中的配置，该文件可以配置为检查远程存储库（更新策略）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:37:35.093

1) 检查您的本地存储库中是否确实有这些工件 2) 检查存储库配置，以便您仅使用存储库来下载版本。

```
<project>
    ...
    <repositories>
        <repository>
            <id>my-repo1</id>
            <name>your custom repo</name>
            <url>http://jarsm2.dyndns.dk</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
    </repositories>
    ...
</project> 
```

3）您可以强制 maven 仅使用带有 -o 选项的本地存储库：

```
mvn -o clean package 
```

# jquery - jQuery LightBox 和 Superbox 不工作

> ID：11884995
> 
> 赞同：0
> 
> 时间：2012-08-09T13:51:34.513
> 
> 标签：jquery, jquery-plugins

单击图像时，我希望它与透明的免费一起弹出。

我尝试使用 LightBox 和 SuperBox，但在这两种情况下，虽然图像弹出，我都面临以下问题，

1.  它没有显示关闭按钮、标题等。
2.  它在 URL 中显示图像路径，因此我必须单击浏览器后退按钮才能返回网站
3.  它没有显示透明背景（我不想在图像弹出时隐藏我的网页）。我是 jQuery 的新手。

我的 DOM 如下所示。

```
<script type="text/javascript">
$(document).ready(function() {
    $(".testing").click(function() {
        $('.testing').css('border', "3px solid white");
        var newsrc = $(this).attr("src");
        $('.testingMain').attr('src', newsrc);
        $(this).css('border', "3px solid grey");
    });
    $(".testing").click(function() {
        $('#gallery a').lightBox();
    });
});​
</script>

     <div id="leftmemberPan">
           <a href="/MyApp/images/${article.images[0].imageName}"><img src="/MyApp/images/${article.images[0].imageName}" alt="/MyApp/img/image_unavailable.jpg" class="testingMain"/></a>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:00:04.627

你必须用你的图片链接替换href`s #

```
<a href="#"><img src="/MyApp/images/${image.imageName}" alt="/MyApp/img/image_unavailable.jpg" class="testing"/></a> 
```

我不知道这是有意的，但您将 click 绑定到一个 img 元素而不是 a （我相信它应该是这样）。

作为一个灯箱初始化你应该做

```
$('#leftmemberPan a').lightbox(); 
```