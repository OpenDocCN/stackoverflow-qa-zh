# StackOverflow 问答 000090000-000090999

# unit-testing - 单元测试的合理代码覆盖率是多少（为什么）？

> ID：90002
> 
> 赞同：671
> 
> 时间：2008-09-18T04:25:40.303
> 
> 标签：unit-testing, code-coverage, code-metrics

如果您要为单元测试规定最低百分比的代码覆盖率，甚至可能作为提交到存储库的要求，那会是什么？

请解释您是如何得出答案的（因为如果您所做的只是选择一个数字，那么我可以自己完成所有这些；）

* * *

## 回答 #1

> 赞同：1536
> 
> 时间：2008-09-18T04:30:10.230

Alberto Savoia 的这篇散文准确地回答了这个问题（以一种非常有趣的方式！）：

[http://www.artima.com/forums/flat.jsp?forum=106&thread=204677](http://www.artima.com/forums/flat.jsp?forum=106&thread=204677)

> **Testivus 测试覆盖率**
> 
> 一天一大早，一位程序员问大神：
> 
> “我准备写一些单元测试。我应该以什么样的代码覆盖率为目标？”</p>
> 
> 大神回复：
> 
> “不要担心覆盖率，只需编写一些好的测试即可。”</p>
> 
> 程序员笑了笑，鞠了一躬，离开了。
> 
> ...
> 
> 那天晚些时候，第二个程序员问了同样的问题。
> 
> 大师指着一壶开水说道：
> 
> “我应该在那个锅里放几粒米？”</p>
> 
> 程序员一脸疑惑，答道：
> 
> “我怎么可能告诉你？这取决于您需要喂食多少人，他们有多饿，您提供的其他食物是什么，您有多少大米，等等。”</p>
> 
> “正是，”伟大的大师说。
> 
> 第二个程序员笑了笑，鞠了一躬，然后离开了。
> 
> ...
> 
> 一天快结束的时候，第三位程序员过来问了同样的关于代码覆盖率的问题。
> 
> “百分之八十，不少于！” 师父厉声应道，一拳砸在桌子上。
> 
> 第三个程序员笑了笑，鞠了一躬，然后离开了。
> 
> ...
> 
> 最后一个回答后，一位年轻的徒弟走到大师面前：
> 
> “伟大的大师，今天我无意中听到您用三个不同的答案回答了关于代码覆盖率的同一个问题。为什么？”</p>
> 
> 大师从椅子上站了起来：
> 
> “来和我喝点新鲜的茶，我们谈谈。”</p>
> 
> 将茶杯倒满冒着热气的绿茶后，大师开始回答：
> 
> “第一个程序员是新来的，刚刚开始测试。现在他有很多代码，没有测试。他还有很长的路要走；此时专注于代码覆盖率会令人沮丧且毫无用处。他最好习惯于编写和运行一些测试。他可以担心以后的报道。”</p>
> 
> “另一方面，第二位程序员在编程和测试方面都非常有经验。当我问她我应该在锅里放多少米粒时，我帮助她意识到必要的测试量取决于许多因素，她比我更了解这些因素——毕竟这是她的代码. 没有单一的、简单的答案，而且她足够聪明，能够处理事实并与之合作。”</p>
> 
> “我明白了，”年轻学徒说，“但如果没有一个简单的答案，那你为什么要回答第三个程序员‘百分之八十而且不少于’？”</p>
> 
> 伟大的大师笑得如此大声，以至于他的肚子，证明他喝的不仅仅是绿茶，上下翻腾。
> 
> “第三个程序员只想要简单的答案——即使没有简单的答案……然后无论如何都不会遵循它们。”</p>
> 
> 年轻的徒弟和头发花白的大师喝完了茶，陷入了沉思。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2008-09-18T04:33:58.613

如果您的目标是 100% 覆盖率（而不是 100% 测试所有功能），那么代码覆盖率是一个误导性指标。

*   您可以通过一次击中所有行来获得 100%。但是，您仍然可能会错过测试这些行被击中的特定序列（逻辑路径）。
*   您无法获得 100%，但仍然测试了所有 80%/freq 使用的代码路径。拥有测试每个“抛出 ExceptionTypeX”或您投入的类似防御性编程守卫的测试是“很高兴拥有”而不是“必须拥有”

因此，请相信您自己或您的开发人员会彻底了解并涵盖其代码的每一条路径。务实，不要追逐神奇的 100% 覆盖率。如果您对代码进行 TDD，您应该获得 90% 以上的覆盖率作为奖励。使用代码覆盖来突出显示您错过的代码块（如果您使用 TDD，则不会发生这种情况。因为您编写代码只是为了通过测试。没有它的伙伴测试，任何代码都无法存在。）

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2016-01-09T20:44:34.047

Jon Limjap 提出了一个很好的观点——没有一个数字可以作为每个项目的标准。有些项目不需要这样的标准。在我看来，公认的答案不足之处在于描述人们如何为给定项目做出该决定。

我会尝试这样做。我不是测试工程方面的专家，很乐意看到更明智的答案。

# 何时设置代码覆盖率要求

首先，您为什么首先要强加这样的标准？一般来说，当您想在您的过程中引入经验信心时。我所说的“经验信心”是什么意思？好吧，真正的目标**正确性**。对于大多数软件，我们不可能在所有输入中都知道这一点，所以我们只能说代码是**经过良好测试的**。这是比较可知的，但仍然是一个主观标准：无论你是否满足它，它总是值得商榷的。这些辩论是有用的，应该发生，但它们也暴露了不确定性。

**代码覆盖率**是一个客观的衡量标准：一旦你看到你的覆盖率报告，就可以毫不含糊地知道是否符合标准是有用的。它证明了正确性吗？一点也不，但它与代码的测试良好程度有着明确的关系，这反过来又是我们提高对其正确性信心的最佳方式。代码覆盖率是我们关心的不可衡量的质量的可衡量的近似值。

一些具有经验标准可以增加价值的具体案例：

*   **为了满足利益相关者。**对于许多项目，有各种对软件质量感兴趣的参与者可能不参与软件的日常开发（经理、技术主管等），他们说“我们将编写所有我们真正需要的测试”并不令人信服：他们要么完全信任，要么在持续的密切监督下进行验证（假设他们甚至具有这样做的技术理解。）提供可衡量的标准并解释它们如何合理地接近实际目标会更好。
*   **规范团队行为。**撇开利益相关者不谈，如果您在一个多人编写代码和测试的团队中工作，那么对于什么是“经过良好测试”的定义存在模棱两可的空间。您的所有同事是否都对什么样的测试水平足够好有相同的想法？可能不是。你如何调和这个？找到一个大家都同意的指标，并将其作为合理的近似值接受。这在大型团队中尤其有用（但不仅限于），例如，领导可能无法直接监督初级开发人员。信任网络也很重要，但如果没有客观的衡量标准，群体行为很容易变得不一致，即使每个人都是出于善意。
*   **为了保持诚实。**即使您是项目的唯一开发人员和唯一的利益相关者，您也可能对软件有某些品质。您可以使用代码覆盖率作为合理的近似值，让机器为您测量它，而不是对软件的测试效果进行持续的主观评估（这需要工作）。

# 使用哪些指标

代码覆盖率不是一个单一的指标；有几种不同的测量覆盖率的方法。您可以根据哪个标准来设定标准取决于您使用该标准来满足什么。

我将使用两个常见指标作为示例，说明何时可以使用它们来设置标准：

*   **语句覆盖率**：测试期间执行的语句百分比是多少？有助于了解代码的**物理覆盖范围**：我编写的代码中有多少经过实际测试？
    *   这种覆盖支持较弱的正确性论点，但也更容易实现。如果您只是使用代码覆盖率来确保*事情*得到测试（而不是作为测试质量的指标），那么语句覆盖率可能就足够了。
*   **分支覆盖**：当有分支逻辑（例如 an `if`）时，是否评估了两个分支？这可以更好地了解代码的**逻辑覆盖率**：我测试了我的代码可能采用的多少条路径？
    *   这种覆盖率是一个更好的指标，表明程序已经通过一组全面的输入进行了测试。如果您使用代码覆盖率作为对正确性信心的最佳经验近似值，则应根据分支覆盖率或类似设置标准。

还有许多其他指标（行覆盖率类似于语句覆盖率，但对于多行语句会产生不同的数值结果，例如；条件覆盖率和路径覆盖率类似于分支覆盖率，但反映了对可能排列的更详细的视图您可能会遇到的程序执行。）

# 需要多少百分比

最后，回到最初的问题：如果设置代码覆盖率标准，这个数字应该是多少？

希望在这一点上很清楚，我们谈论的是一个近似值，所以我们选择的任何数字本质上都是近似值。

人们可能会选择的一些数字：

*   **100%**。您可能会选择此选项，因为您想确保所有内容都经过测试。这不会让您深入了解测试质量，但会告诉您某些质量的某些测试已经触及每个语句（或分支等）。再次，这又回到了置信度：如果您的覆盖率低于 100% ，您*知道*您的代码的某些子集未经测试。
    *   有些人可能会认为这很愚蠢，您应该只测试代码中真正重要的部分。我认为你也应该只维护你的代码中真正重要的部分。也可以通过删除未经测试的代码来提高代码覆盖率。
*   **99%**（或 95%，90 年代高位的其他数字。）适用于您想要传达*类似于*100% 的信心水平的情况，但要留出一些余地，以免担心偶尔难以测试的角落代码。
*   **80%**。我已经多次看到这个号码在使用中，但并不完全知道它的来源。我*认为*这可能是对 80-20 规则的奇怪盗用；通常，这里的目的是表明您的*大部分*代码都经过测试。（是的，51% 也是“大多数”，但 80% 更能反映大多数人的*意思*。）这适用于“经过良好测试”不是高优先级的中间情况（你没有'不想把精力浪费在低价值的测试上），但这已经足够优先了，你仍然希望有一些标准。

在实践中，我还没有看到低于 80% 的数字，并且很难想象有人会设置它们的情况。这些标准的作用是增加对正确性的信心，低于 80% 的数字并不是特别能激发信心。（是的，这是主观的，但同样，我们的想法是在设定标准时做出一次主观选择，然后使用客观的测量方法。）

# 其他注意事项

以上假设正确性是目标。代码覆盖率只是信息；它可能与其他目标有关。例如，如果您关心可维护性，您可能关心松散耦合，这可以通过可测试性来证明，而可测试性又可以（以某些方式）通过代码覆盖率来衡量。因此，您的代码覆盖率标准也为近似“可维护性”的质量提供了经验基础。

* * *

## 回答 #4

> 赞同：67
> 
> 时间：2009-04-27T22:56:46.047

代码覆盖率很好，但功能覆盖率更好。我不相信涵盖我写的每一行。但我确实相信编写我想要提供的所有功能的 100% 测试覆盖率（即使是我自己带来的额外酷炫的功能，并且在会议期间没有讨论过）。

我不在乎我是否会有测试中未涵盖的代码，但我会关心我是否会重构我的代码并最终产生不同的行为。因此，100% 的功能覆盖率是我唯一的目标。

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2014-10-07T15:58:24.520

我最喜欢的代码覆盖率是 100%，带有星号。出现星号是因为我更喜欢使用允许我将某些行标记为“不计入”行的工具。如果我已经覆盖了 100% 的“计数”行，我就完成了。

底层流程是：

1.  我编写测试来练习我能想到的所有功能和边缘情况（通常从文档中工作）。
2.  我运行代码覆盖工具
3.  我检查任何未涵盖的行或路径，以及我认为不重要或无法到达的任何行或路径（由于防御性编程）我标记为不计数
4.  如果没有提到这些边缘情况，我会编写新的测试来覆盖缺失的行并改进文档。

这样，如果我和我的合作者将来添加新代码或更改测试，就会有一条亮线告诉我们是否遗漏了一些重要的东西——覆盖率下降到 100% 以下。然而，它也提供了处理不同测试优先级的灵活性。

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2008-09-18T04:42:07.503

我想分享另一个关于测试覆盖率的轶事。

我们有一个庞大的项目，在 twitter 上，我注意到，[通过 700 个单元测试，我们只有 20% 的代码覆盖率](http://twitter.com/LaTtEX/statuses/710637842)。

[Scott Hanselman用](https://stackoverflow.com/users/6380/scott-hanselman)[智慧的话](http://twitter.com/shanselman/statuses/710655962)回答：

> 是正确的 20% 吗？是 20% 代表您的用户最常使用的代码吗？您可能会再添加 50 个测试，但仅添加 2%。

再次，它可以追溯到我的[Testivus on Code Coverage](https://stackoverflow.com/questions/90002/what-is-a-reasonable-code-coverage-for-unit-tests-and-why#90021) Answer。你应该在锅里放多少米？这取决于。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2016-07-29T23:50:06.217

许多商店不重视测试，所以如果你的分数高于零，至少会有一些价值升值 - 所以可以说非零并不坏，因为很多仍然是零。

在 .Net 世界中，人们经常引用 80% 的合理性。但他们在解决方案层面这么说。我更喜欢在项目级别进行测量：如果您有 Selenium 等或手动测试，UI 项目可能会达到 30%，数据层项目可能会达到 20%，但对于业务来说，95% 以上可能是可以实现的规则层，如果不是完全必要的话。所以总体覆盖率可能是 60%，但关键业务逻辑可能要高得多。

我也听说过：渴望100%，你就会达到80%；但渴望达到 80%，你就会达到 40%。

底线：应用 80:20 规则，让您的应用程序的错误计数指导您。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-07-25T07:45:32.947

对于一个设计良好的系统，单元测试从一开始就推动了开发，我会说 85% 是一个相当低的数字。设计为可测试的小类不应该比这更难覆盖。

很容易通过以下方式忽略这个问题：

*   覆盖线不等于经过测试的逻辑，不应过多解读百分比。

没错，但是关于代码覆盖率有一些重要的地方需要说明。根据我的经验，如果使用得当，这个指标实际上非常有用。话虽如此，我还没有看到所有的系统，而且我敢肯定有很多系统很难看到代码覆盖率分析增加了任何真正的价值。代码看起来如此不同，可用测试框架的范围也可能不同。

此外，我的推理主要涉及相当短的测试反馈循环。对于我正在开发的产品，最短的反馈循环非常灵活，涵盖了从类测试到进程间信号的所有内容。测试可交付的子产品通常需要 5 分钟，对于如此短的反馈循环，确实可以使用测试结果（特别是我们在此处查看的代码覆盖率指标）来拒绝或接受存储库中的提交。

**使用代码覆盖率指标时，您不应该只是有一个必须满足的固定（任意）百分比。**在我看来，这样做并没有给你带来代码覆盖分析的真正好处。相反，定义以下指标：

*   低水位线 (LWM)，在被测系统中发现的最低线数
*   高水位线 (HWM)，被测系统的最高代码覆盖率

只有在我们不超过 LWM 并且我们不低于 HWM 的情况下才能添加新代码。换句话说，代码覆盖率**不允许减少**，应该覆盖新代码。注意我怎么说应该和不必须（解释如下）。

但这是否意味着您将无法清除已不再使用的经过良好测试的旧垃圾？是的，这就是为什么你必须对这些事情务实。在某些情况下必须打破规则，但对于您典型的日常集成，我的经验是这些指标非常有用。他们给出了以下两个含义。

*   可测试的代码得到提升。添加新代码时，您确实必须努力使代码可测试，因为您必须尝试用测试用例覆盖所有代码。可测试的代码通常是一件好事。

*   遗留代码的测试覆盖率随着时间的推移而增加。当添加新代码并且无法用测试用例覆盖它时，可以尝试覆盖一些遗留代码来绕过 LWM 规则。这种有时必要的作弊至少会产生积极的副作用，即遗留代码的覆盖率会随着时间的推移而增加，使得看似严格执行这些规则在实践中非常务实。

再说一次，如果反馈循环太长，在集成过程中设置这样的东西可能完全不切实际。

我还想提一下代码覆盖率指标的两个更普遍的好处。

*   代码覆盖分析是动态代码分析的一部分（与静态代码分析相反，即 Lint）。在动态代码分析期间发现的问题（通过 purify 系列，[http](http://www-03.ibm.com/software/products/en/rational-purify-family) ://www-03.ibm.com/software/products/en/rational-purify-family 等工具）是诸如未初始化内存读取（UMR）之类的问题，内存泄漏等。**这些问题只有在代码被执行的测试用例覆盖时才能被发现**。测试用例中最难覆盖的代码通常是系统中的异常用例，但是如果您希望系统优雅地失败（即错误跟踪而不是崩溃），您可能需要付出一些努力来覆盖异常用例在动态代码分析中也是如此。如果运气不好，UMR 可能会导致段错误或更糟。

*   人们为保持 100% 的新代码而感到自豪，人们以与其他实现问题类似的热情讨论测试问题。如何以更可测试的方式编写此函数？您将如何尝试涵盖这种异常情况等。

为了完整性，否定。

*   在一个涉及许多开发人员的大型项目中，每个人都肯定不会成为测试天才。**有些人倾向于使用代码覆盖率指标来证明代码已经过测试，这**与这个问题的许多其他答案中提到的事实相去甚远。如果使用得当，它是一个可以给你带来一些好处的指标，但如果被滥用，它实际上会导致糟糕的测试。除了上面提到的非常有价值的副作用之外，覆盖的行仅表明被测系统可以到达该行以获得一些输入数据，并且它可以在不挂起或崩溃的情况下执行。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2008-09-18T04:30:24.723

如果这是一个完美的世界，单元测试将覆盖 100% 的代码。然而，由于这不是一个完美的世界，这取决于你有时间做什么。因此，我建议少关注特定百分比，多关注关键领域。如果你的代码写得很好（或者至少是一个合理的复制品），那么应该有几个关键点将 API 暴露给其他代码。

将您的测试工作集中在这些 API 上。确保 API 1) 有良好的文档记录和 2) 编写了与文档匹配的测试用例。如果预期结果与文档不匹配，那么您的代码、文档或测试用例中存在错误。所有这些都是很好的审查。

祝你好运！

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-09-25T19:00:45.700

代码覆盖率只是另一个指标。就其本身而言，它可能非常具有误导性（请参阅[www.thoughtworks.com/insights/blog/are-test-coverage-metrics-overrated](http://www.thoughtworks.com/insights/blog/are-test-coverage-metrics-overrated)）。因此，您的目标不应该是实现 100% 的代码覆盖率，而是确保您测试应用程序的所有相关场景。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-09-18T04:27:43.700

85% 将是签入标准的良好起点。

我可能会为运输标准选择各种更高的标准——这取决于被测试的子系统/组件的重要性。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2009-04-27T23:29:07.670

我使用 cobertura，无论百分比如何，我都建议保持 cobertura-check 任务中的值是最新的。至少，继续将 totallinerate 和 totalbranchrate 提高到略低于您当前的覆盖范围，但*永远不要*降低这些值。还将 Ant 构建失败属性与此任务联系起来。如果由于缺乏覆盖而导致构建失败，您知道有人添加了代码但尚未对其进行测试。例子：

```
<cobertura-check linerate="0"
                 branchrate="0"
                 totallinerate="70"
                 totalbranchrate="90"
                 failureproperty="build.failed" /> 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2010-05-19T15:34:10.290

当我认为我的代码没有经过足够的单元测试，并且我不确定接下来要测试什么时，我会使用覆盖率来帮助我决定接下来要测试什么。

如果我增加单元测试的覆盖率 - 我知道这个单元测试值得。

这适用于未覆盖、50% 覆盖或 97% 覆盖的代码。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2016-05-12T14:05:47.710

我更喜欢做 BDD，它结合了自动化验收测试、可能的其他集成测试和单元测试。对我来说，问题是整个自动化测试套件的目标覆盖范围应该是什么。

除此之外，答案取决于您的方法、语言以及测试和覆盖工具。在 Ruby 或 Python 中进行 TDD 时，保持 100% 的覆盖率并不难，而且非常值得这样做。**管理 100% 的覆盖率比管理 90% 的覆盖率要容易得多。**也就是说，填补出现的覆盖空白（并且在做好 TDD 时，覆盖空白很少见，通常值得您花时间），而不是管理您尚未解决和错过覆盖的覆盖空白列表要容易得多由于您不断发现未发现代码的背景而导致的回归。

答案还取决于您项目的历史。我只发现上述内容在从一开始就以这种方式管理的项目中是实用的。我已经大大提高了大型遗留项目的覆盖率，这样做是值得的，但我从来没有发现回过头来填补每个覆盖率空白是切实可行的，因为旧的未经测试的代码没有被很好地理解，无法正确地做到这一点并且迅速地。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2008-09-18T04:35:32.480

如果您已经进行了相当长的单元测试，我认为没有理由不接近 95%+。然而，至少，我一直使用 80%，即使是刚开始测试时也是如此。

这个数字应该只包括项目中编写的代码（不包括框架、插件等），甚至可能不包括完全由调用外部代码编写的代码组成的某些类。这种调用应该被嘲笑/存根。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2008-09-18T04:53:45.477

一般来说，从我读过的几篇工程卓越最佳实践论文来看，单元测试中的新代码 80% 是产生最佳回报的点。对于所付出的努力，超过该 CC% 会产生更少的缺陷。这是许多大公司使用的最佳实践。

不幸的是，这些结果中的大多数都是公司内部的，因此我没有可以向您指出的公开文献。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2008-09-19T10:11:17.123

我对这个难题的回答是对可以测试的代码进行 100% 的行覆盖，对无法测试的代码进行 0% 的行覆盖。

我目前在 Python 中的做法是将我的 .py 模块分为两个文件夹：app1/ 和 app2/ 并在运行单元测试时计算这两个文件夹的覆盖率并目视检查（我**必须**有一天自动化）app1 具有 100% 的覆盖率和app2 的覆盖率为 0%。

当/如果我发现这些数字与标准不同时，我会调查并更改代码的设计，以使覆盖范围符合标准。

这确实意味着我可以推荐实现 100% 的库代码行覆盖率。

我也偶尔查看 app2/ 看看我是否可以在那里测试任何代码，如果可以的话，我可以将它移到 app1/

现在我不太担心总体覆盖率，因为根据项目的规模，这可能会有很大差异，但通常我已经看到了 70% 到 90% 以上。

使用 python，我应该能够设计一个冒烟测试，它可以在测量覆盖率的同时自动运行我的应用程序，并希望在将冒烟测试与单元测试数据结合起来时获得 100% 的总和。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2008-09-19T15:23:34.010

代码覆盖率很好，但前提是您从中获得的好处超过了实现它的成本/努力。

一段时间以来，我们一直在努力达到 80% 的标准，但是我们刚刚决定放弃这一标准，而是更加专注于我们的测试。专注于复杂的业务逻辑等，

做出这个决定是因为我们花费了越来越多的时间来追踪代码覆盖率和维护现有的单元测试。我们觉得我们已经到了这样一个地步，即我们从代码覆盖率中获得的好处被认为低于我们为实现它所付出的努力。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-09-18T04:31:14.673

简短回答：60-80%

长答案：我认为这完全取决于您项目的性质。我通常通过对每个实际部分进行单元测试来开始一个项目。到项目的第一个“版本”时，根据您正在执行的编程类型，您应该有一个相当不错的基本百分比。此时，您可以开始“强制执行”最低代码覆盖率。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2008-09-18T20:00:52.160

查看[Crap4j](http://www.crap4j.org/)。这是一种比直接代码覆盖更复杂的方法。它将代码覆盖率测量与复杂性测量相结合，然后向您展示当前未测试的复杂代码。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2009-01-31T11:16:42.447

从另一个角度查看覆盖率：具有清晰控制流的编写良好的代码是最容易覆盖、最容易阅读且通常错误最少的代码。通过编写清晰和可覆盖的代码，并通过与代码并行编写单元测试，恕我直言，您将获得最佳结果。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2011-08-14T15:13:36.033

在我看来，答案是“这取决于你有多少时间”。我试图达到 100%，但如果我没有在我拥有的时间内完成它，我不会大惊小怪。

当我编写单元测试时，我戴的帽子与我在开发生产代码时戴的帽子不同。我考虑测试代码声称要做什么以及可能破坏它的情况是什么。

我通常遵循以下标准或规则：

1.  单元测试应该是关于我的代码的预期行为的文档形式，即。给定特定输入的预期输出以及客户端可能想要捕获的可能引发的异常（我的代码的用户应该知道什么？）

2.  单元测试应该帮助我发现我可能还没有想到的假设条件。（如何使我的代码稳定和健壮？）

如果这两个规则不能产生 100% 的覆盖率，那就这样吧。但是一旦有时间，我会分析未覆盖的块和行，并确定是否还有没有单元测试的测试用例，或者是否需要重构代码以消除不必要的代码。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2008-09-18T04:29:23.163

这在很大程度上取决于您的应用程序。例如，某些应用程序主要由无法进行单元测试的 GUI 代码组成。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2008-09-18T04:30:42.117

我认为不可能有这样的黑白规则。
应审查代码，特别注意关键细节。
但是，如果它没有经过测试，它有一个错误！

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2008-09-18T04:31:39.133

根据代码的重要性，75%-85% 的任何地方都是一个很好的经验法则。运输代码绝对应该比内部公用事业等进行更彻底的测试。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2008-09-18T04:33:11.423

这必须取决于您处于应用程序开发生命周期的哪个阶段。

如果您已经进行了一段时间的开发并且已经实现了很多代码，并且现在才意识到您需要考虑代码覆盖率，那么您必须检查您当前的覆盖率（如果存在），然后使用该基线来为每个 sprint 设置里程碑（或在 sprint 期间的平均增长），这意味着在继续为最终用户提供价值的同时承担代码债务（至少根据我的经验，如果你增加了测试，最终用户一点也不在乎如果他们没有看到新功能，则覆盖）。

根据您的领域，拍摄 95% 并非不合理，但我不得不说平均而言，您将看到 85% 到 90% 的平均案例。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2008-09-18T04:34:09.237

我认为正确的代码覆盖率的最佳症状是单元测试帮助解决的具体问题的数量合理地对应于您创建的单元测试代码的大小。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2009-04-27T22:49:59.823

我认为最重要的是了解随着时间的推移覆盖趋势是什么，并了解趋势变化的原因。你认为趋势的变化是好是坏取决于你对原因的分析。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-09-18T04:32:14.297

直到几天前，我们的目标是 >80%，但是在我们使用了大量生成代码之后，我们不关心 %age，而是让审阅者接听所需的覆盖率。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2013-03-13T17:28:57.363

从[Testivus 的帖子](https://stackoverflow.com/a/90021/1264804)中，我认为答案上下文应该是第二个程序员。

从实际的角度来看，我们需要参数/目标来争取。

我认为这可以通过分析我们拥有的架构、功能（用户故事）的代码在敏捷过程中“测试”，然后得出一个数字。根据我在电信领域的经验，我会说 60% 是一个很好的检查值。

# sql-server - 使用 SQL Server 2005 的 XQuery 选择具有特定属性值或缺少该属性的所有节点

> ID：90023
> 
> 赞同：7
> 
> 时间：2008-09-18T04:30:26.873
> 
> 标签：sql-server, xpath, xquery, axes

## 更新：给出一个更彻底的例子。

提供的前两个解决方案与我试图说不要做的事情是正确*的*。我不知道位置，它需要能够查看整个文档树。因此，将 /Books/ 指定为上下文的解决方案将不起作用：

```
SELECT x.query('.') FROM @xml.nodes('/Books/*[not(@ID) or @ID = 5]') x1(x) 
```

## 带有更好示例的原始问题：

使用 SQL Server 2005 的 XQuery 实现，我需要选择 XML 文档中的所有节点，每个节点只选择一次并保持其原始结构，但前提是它们缺少特定属性，或者该属性具有特定值（通过参数传入）。查询还必须在整个 XML 文档（后代或自身轴）上工作，而不是在预定义的深度进行选择。

也就是说，每个单独的节点只有在它和它的每个祖先都缺少该属性或具有具有单个特定值的属性时才会出现在结果文档中。

## 例如：

如果这是 XML：

```
 DECLARE @Xml XML
    SET @Xml =
    N'
<Library>
  <Novels>
    <Novel category="1">Novel1</Novel>
    <Novel category="2">Novel2</Novel>
    <Novel>Novel3</Novel>
    <Novel category="4">Novel4</Novel>
  </Novels>
  <Encyclopedias>
    <Encyclopedia>
      <Volume>A-F</Volume>
      <Volume category="2">G-L</Volume>
      <Volume category="3">M-S</Volume>
      <Volume category="4">T-Z</Volume>
    </Encyclopedia>
  </Encyclopedias>
  <Dictionaries category="1">
    <Dictionary>Webster</Dictionary>
    <Dictionary>Oxford</Dictionary>
  </Dictionaries>
</Library>
    ' 
```

类别的参数 1 将导致：

```
<Library>
  <Novels>
    <Novel category="1">Novel1</Novel>
    <Novel>Novel3</Novel>
  </Novels>
  <Encyclopedias>
    <Encyclopedia>
      <Volume>A-F</Volume>
    </Encyclopedia>
  </Encyclopedias>
  <Dictionaries category="1">
    <Dictionary>Webster</Dictionary>
    <Dictionary>Oxford</Dictionary>
  </Dictionaries>
</Library> 
```

类别的参数 2 将导致：

```
<Library>
  <Novels>
    <Novel category="2">Novel2</Novel>
    <Novel>Novel3</Novel>
  </Novels>
  <Encyclopedias>
    <Encyclopedia>
      <Volume>A-F</Volume>
      <Volume category="2">G-L</Volume>
    </Encyclopedia>
  </Encyclopedias>
</Library> 
```

我知道 XSLT 非常适合这项工作，但它不是一个选择。我们必须完全在 SQL Server 2005 中完成这项工作。任何不使用 XQuery 的实现也可以，只要它可以完全在 T-SQL 中完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-18T07:50:42.680

从您的示例中，我不清楚您实际上想要实现什么。您是否要返回一个新的 XML，其中除了满足条件的节点之外的所有节点都被剥离？如果是，那么这看起来像是 XSLT 转换的工作，我认为它不是 MSSQL 2005 中内置的（可以作为 UDF 添加：[http ://www.topxml.com/rbnews/SQLXML/re- 23872_Performing-XSLT-Transforms-on-XML-Data-Stored-in-SQL-Server-2005.aspx](http://www.topxml.com/rbnews/SQLXML/re-23872_Performing-XSLT-Transforms-on-XML-Data-Stored-in-SQL-Server-2005.aspx)）。

如果您只需要返回节点列表，则可以使用此表达式：

```
//Book[not(@ID) or @ID = 5] 
```

但我觉得这不是你需要的。如果您能提供一个更清晰的示例，这将有所帮助。

**编辑**：这个例子确实更清楚。我能找到的最好的是：

```
SET @Xml.modify('delete(//*[@category!=1])')
SELECT @Xml 
```

这个想法是从 XML 中删除您不需要的所有节点，这样您就可以保留原始结构和所需的节点。我用你的两个例子进行了测试，它产生了想要的结果。

但是*modify*有一些限制 - 似乎您不能在 select 语句中使用它，它必须修改数据。如果您需要通过选择返回此类数据，您可以使用一个临时表来复制原始数据，然后更新该表。像这样的东西：

```
INSERT INTO #temp VALUES(@Xml)
UPDATE #temp SET data.modify('delete(//*[@category!=2])') 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T09:17:48.430

这个问题不是很清楚，但这是你要找的吗？

```
DECLARE @Xml AS XML
        SET @Xml =
        N'
        <Books>
                <Book ID="1">Book1</Book>
                <Book ID="2">Book2</Book>
                <Book ID="3">Book3</Book>
                <Book>Book4</Book>
                <Book ID="5">Book5</Book>
                <Book ID="6">Book6</Book>
                <Book>Book7</Book>
                <Book ID="8">Book8</Book>
        </Books>
        '
DECLARE @BookID AS INT
SET @BookID = 5
DECLARE @Result AS XML

SET @result = (SELECT @xml.query('//Book[not(@ID) or @ID = sql:variable("@BookID")]'))
SELECT @result 
```

# winapi - 如何以编程方式确定 Win32 中光驱的功能

> ID：90029
> 
> 赞同：0
> 
> 时间：2008-09-18T04:31:43.360
> 
> 标签：winapi, dvd, optical-drive

我正在尝试创建一个部署工具，该工具将根据系统上的硬件安装软件。我希望该工具能够确定光驱是刻录机（以确定是否应该安装刻录软件）还是可以读取 DVD（以确定是否应该安装播放器）。我尝试使用以下代码

```
strComputer = "."
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
Set colItems = objWMIService.ExecQuery("Select * from Win32_CDROMDrive")
For Each objItem in colItems
    Wscript.Echo "MediaType: " & objItem.MediaType
Next 
```

但它总是以 CD-ROM 响应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-18T04:40:00.003

您可以使用 WMI 枚举 Windows 对驱动器的了解；获取[`Win32_DiskDrive`](http://msdn.microsoft.com/en-us/library/aa394132(VS.85).aspx)您应该能够从中获取[`Win32_PhysicalMedia`](http://msdn.microsoft.com/en-us/library/aa394346(VS.85).aspx)驱动器使用的物理媒体信息的实例；[MediaType](http://msdn.microsoft.com/en-us/library/aa394346(VS.85).aspx)属性以获取它使用的媒体（CD、CDRW、DVD、DVDRW 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T05:10:44.657

平台 SDK - IDiscMaster::EnumDiscRecorders (XP / 2003)

DirectX 和 DirectShow 具有广泛的接口来处理 DVD

否则枚举磁盘驱动器并尝试触发支持提取类型信息的 DeviceIonControlCode。

祝你好运

# c# - 需要轻量级 .NET SMTP 实现（程序集或源代码）

> ID：90037
> 
> 赞同：2
> 
> 时间：2008-09-18T04:33:00.487
> 
> 标签：c#, .net, smtp

我正在编写一个小型应用程序，它将通过 smtp 端口 25 接收要处理的消息。

我正在寻找一个可以合并的 .NET 程序集，它将侦听端口 25 并与 SMTP 通信。我设想当消息到达时会触发一些事件，我可以在其中读取消息并进行处理。

从本质上讲，我需要像 SMTP 服务器一样“行动”，但除了接收消息之外，我不需要在完整的 SMTP 服务器中找到的更多功能。

如果您需要更多说明，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T04:35:39.937

你看过这个：[CodeProject: SMTP and POP3 Mail Server](http://www.codeproject.com/KB/IP/smtppop3mailserver.aspx)吗？

# html - 如何将 HTML 表格拉伸到浏览器窗口高度的 100%？

> ID：90049
> 
> 赞同：11
> 
> 时间：2008-09-18T04:35:34.210
> 
> 标签：html, css, layout, html-table

我正在使用表格来设计网页的布局。我希望表格填满页面，即使它不包含太多内容。这是我正在使用的 CSS：

```
html, body {
    height: 100%;
    margin: 0;
    padding: 0; 
}

#container {
    min-height: 100%;
    width: 100%; 
} 
```

我在页面代码中放置了这样的东西：

```
<table id="container">
<tr>
<td>
... 
```

这适用于 Opera 9，但不适用于 Firefox 2 或 Internet Explorer 7。有没有一种简单的方法可以使该解决方案适用于所有流行的浏览器？

（添加`id="container"`到`td`没有帮助。）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2011-07-05T03:32:35.747

尝试使用这个：

```
html, body    {
  height: 100%;
} 
```

所以除了将表格的高度设置为 100% 之外，您还应该确保 html'd 和 body 的高度也是 100%，这样它才能正确拉伸。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-18T04:45:23.343

设置时只需使用`height`属性而不是`min-height`属性`#container`。一旦数据变得太大，表就会自动增长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-15T03:10:41.797

您可以在 Javascript/JQuery 中处理此问题。

```
window_height = $(window).height();
$('#container').css('min-height', window_height); 
```

# python - python中的正则表达式问题

> ID：90052
> 
> 赞同：2
> 
> 时间：2008-09-18T04:36:00.980
> 
> 标签：python, html, regex

好的，所以我正在研究一个正则表达式来搜索站点中的所有标题信息。

我已经编译了正则表达式：

```
regex = re.compile(r'''
    <h[0-9]>\s?
    (<a[ ]href="[A-Za-z0-9.]*">)?\s?
    [A-Za-z0-9.,:'"=/?;\s]*\s?
    [A-Za-z0-9.,:'"=/?;\s]?
''',  re.X) 
```

当我在 python reg ex 中运行它时。测试仪，效果很好。

样本数据：

```
<body>
    <h1>Dog </h1>
    <h2>Cat </h2>
    <h3>Fancy </h3>
    <h1>Tall cup of lemons</h1>
    <h1><a href="dog.com">Dog thing</a></h1>
</body> 
```

现在，在 REDemo 中，它运行得非常好。

然而，当我把它放在我的 python 代码中时，它只打印`<a href="dog.com">`

这是我的 python 代码，我不确定我是否做错了什么，或者在翻译中是否丢失了某些内容。我感谢您的帮助。

```
stories=[]
response = urllib2.urlopen('http://apricotclub.org/duh.html')
html = response.read().lower()
p = re.compile('<h[0-9]>\\s?(<a href=\"[A-Za-z0-9.]*\">)?\\s?[A-Za-z0-9.,:\'\"=/?;\\s]*\\s?[A-Za-z0-9.,:\'\"=/?;\\s]?')
stories=re.findall(p, html)
for i in stories:
    if len(i) >= 5:
        print i 
```

我还应该注意，当我`(<a href=\"[A-Za-z0-9.]*\">)?`从正则表达式中取出时，它适用于非链接`<hN>`行。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-09-18T04:52:26.340

这个问题这几天被问了好几种形式，我就说的很清楚了。

# 问：如何使用正则表达式解析 HTML？

# 答：请不要。

使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)、[html5lib](http://code.google.com/p/html5lib/)或[lxml.html](http://codespeak.net/lxml/lxmlhtml.html)。请。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-18T04:43:01.307

使用正则表达式解析事物适用于正则语言。HTML 不是一种常规语言，现在你在网页上找到的东西绝对是垃圾。[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)使用类似浏览器的启发式处理标记汤 HTML，因此您可以得到类似于浏览器显示的已解析 HTML。

缺点是速度不是很快。有用于解析格式良好的 html 的[lxml](http://codespeak.net/lxml/)，但如果您不能 100% 确定您的输入将始终是格式正确的，那么您应该真正使用 BeautifulSoup。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T08:40:04.700

我使用 beautifulsoup 来解析你想要的 HTML。我在一个名为 foo.html 的文件中有上述 HTML 代码，后来作为文件对象读取。

```
from BeautifulSoup import BeautifulSoup

H_TAGS = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6']

def extract_data():
   """Extract the data from all headers
   in a HTML page."""
   f = open('foo.html', 'r+')
   html = f.read()
   soup = BeautifulSoup(html)
   headers = [soup.findAll(h) for h in H_TAGS if soup.findAll(h)]
   lst = []
   for x in headers:
      for y in x:
         if y.string:
            lst.append(y.string)
         else:
            lst.append(y.contents[0].string)
   return lst 
```

上述函数返回：

```
>>> [u'Dog ', u'Tall cup of lemons', u'Dog thing', u'Cat ', u'Fancy '] 
```

您可以在 h_tags 列表中添加任意数量的标题标签。我假设了所有的标题。如果您可以使用 BeautifulSoup 轻松解决问题，那么最好使用它。:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-18T04:44:24.547

由于锚标记周围的大括号，该部分被解释为捕获组。这会导致只返回捕获组，而不是整个正则表达式匹配。

将整个正则表达式放在大括号中，您会看到正确的匹配项显示为返回的元组中的第一个元素。

但实际上，您应该使用真正的解析器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-18T08:18:38.917

Building on the answers so far:

It's best to use a parsing engine. It can cover a lot of cases and in an elegant way. I've tried [BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/) and I like it very much. Also easy to use, with a great tutorial.

If sometimes it feels like shooting flies with a cannon you can use a regular expression for quick parsing. If that's what you need here is the modified code that will catch all the headers (even those over multiple lines):

```
p = re.compile(r'<(h[0-9])>(.+?)</\1>', re.IGNORECASE | re.DOTALL)
stories = re.findall(p, html)
for i in stories:
    print i 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-18T05:10:43.330

如前所述，您应该使用解析器而不是正则表达式。

不过，这就是您可以使用正则表达式的方式：

```
import re

html = '''
<body>

<h1>Dog </h1>
<h2>Cat </h2>
<h3>Fancy </h3>
<h1>Tall cup of lemons</h1>
<h1><a href="dog.com">Dog thing</a></h1>
</body>
'''

p = re.compile(r'''
    <(?P<header>h[0-9])>             # store header tag for later use
    \s*                              # zero or more whitespace
    (<a\shref="(?P<href>.*?)">)?     # optional link tag. store href portion
    \s*
    (?P<title>.*?)                   # title
    \s*
    (</a>)?                          # optional closing link tag
    \s*
    </(?P=header)>                   # must match opening header tag
''', re.IGNORECASE + re.VERBOSE)

stories = p.finditer(html)

for match in stories:
    print '%(title)s [%(href)s]' % match.groupdict() 
```

这里有几个很好的正则表达式资源：

*   [Python 正则表达式 HOWTO](http://docs.python.org/dev/howto/regex.html)
*   [正则表达式.info](http://www.regular-expressions.info/)

# .net - 如何让我的 .NET 应用程序支持不同的语言

> ID：90061
> 
> 赞同：4
> 
> 时间：2008-09-18T04:37:52.613
> 
> 标签：.net, globalization, culture

我正在编写的应用程序几乎完成了，我希望说不同语言的人使用它。

我不知道从哪里开始，全球化和文化在编程方面有什么区别？

如何使用不常见的短语，例如“此应用程序旨在执行此操作”而不是文件、打开、保存等……并将它们变成西班牙语？

非常感谢 ：-）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-18T04:39:45.167

微软已经有很好的[教程了](http://msdn.microsoft.com/en-us/goglobal/bb688096)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-18T05:45:24.777

要拥有一个“全球化”的应用程序，您有很多不同的事情要做。

**1) 翻译应用程序中表单和控件中的每个标签**

您需要在每个窗体和控件上将属性“Localizable”设置为 true。此属性允许创建每种语言和地区的资源文件。现在，使用“语言”属性，您可以选择要支持的语言。当您在组合框列表中选择一种语言时，您的表单（或控件）将自动切换到该语言。现在，翻译控件中的每个单词是您的工作。进行修改后，Visual Studio 将为特定语言创建一个资源文件。（例如，法国-法国的 MyForm.fr-FR.resx）。

**2) 将代码中的每个硬编码字符串导入 resx 文件**

创建一个资源文件（我个人使用 StringTable.resx）并在该文件中添加要翻译的每个字符串。之后，为您想要支持的每种语言创建一个资源文件，并翻译每个文件中的字符串。例如，如果您想支持法语，您可以为 French-France 创建 StringTable.fr.resx 或 StringTable.fr-FR.resx。使用**ResourceManager**类，您可以加载每个字符串。

*注意：* 如果您使用的是 Visual Studio 2005 或 2008，您已经默认创建了一个资源文件。

**3）您需要明智地详细说明您的表单和控件**

Microsoft 指南：[Microsoft 指南](http://msdn.microsoft.com/en-us/library/k6291385(VS.71).aspx "微软指南")

**4) 处理日期和数字**

如果您的应用程序创建了可以发送给其他地区的其他用户的数据文件，则在将数据保存在文件中时需要考虑一下。因此，始终以 UTC 存储您的日期时间，并仅在您加载信息时在本地进行转换。同样的事情也适用于十进制数，特别是如果它们存储在文本中。

* * *

当您编译应用程序时，Visual Studion 将在子文件夹**fr中创建类似****MyApplication.fr.dll**的附属文件。要加载此 dll，您需要在应用程序启动时切换当前线程的语言。

 **这里的代码：

```
CultureInfo ci = new CultureInfo("fr");
Thread.CurrentThread.CurrentUICulture = ci; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T04:55:09.623

您的所有疑问都将在下面的书中得到解答。最初的章节解释了所有主要概念和术语以及像 i18n 这样的花哨的缩写。直到最后都没有时间阅读它。但是直到我读到为止都很好。如果您认真对待正确的方式并有时间，建议您这样做:)

[http://www.amazon.com/NET-Internationalization-Developers-Applications-Development/dp/0321341384](https://rads.stackoverflow.com/amzn/click/com/0321341384) ![图片](https://i.stack.imgur.com/zPqrG.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T04:40:58.613

对于一个非常简单的系统，创建一个定义 GetSaveText() 等方法的接口，并允许将这样的程序集插入到您的应用程序中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-18T04:50:57.543

对于 10-1000 个字符串，这应该是一个非常好的解决方案：

每个语言环境都有一个资源文件。我不知道.NET，但我确信有一些常见的方法可以做到这一点。然后，在您的资源获取代码中，根据您的用户的浏览器区域设置加载适当的代码。要求此代码为您获取某个键的正确字符串。

示例文件内容，如果我要从头开始实现它：

资源.en:

```
save=Save
close=Close
ok=OK
areYouSure=Are you sure? 
```

资源.es：

```
save=I don't know how to say anything in Spanish, oops
close=...
ok=...
areYouSure=... 
```

# dojo - Google 托管的 dojox.gfx

> ID：90067
> 
> 赞同：4
> 
> 时间：2008-09-18T04:39:30.287
> 
> 标签：dojo

我正在使用以下 html 从 Google 的主机加载 dojo。

```
<script src="http://www.google.com/jsapi"></script>
<script type="text/javascript">google.load("dojo", "1.1.1");</script>
<script type="text/javascript">
dojo.require("dojox.gfx");
... 
```

这个错误出现在 requre 行，并带有类似 dojox.gfx 的错误未定义。有没有办法使这项工作，或者谷歌不支持 dojox 扩展？

或者，是否有另一个我可以用于标准 dojo 版本的通用主机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-18T05:03:43.940

与直接从 <script> 标记引用 .js 文件不同（请注意，google js api 也支持这一点，请参见[此处](http://code.google.com/apis/ajaxlibs/documentation/#dojo)），google.load 不是同步的。这意味着当你的代码到达 google.load 时，它不会等待 dojo 完全加载来继续解析；它将直接转到您的 dojo.require 行，并且会在那里失败，因为**dojo**对象将未定义。

解决方案（如果您不想使用直接 <script> 标记）是将引用 dojo 的所有代码包含在**start**函数中，并将其设置为回调，方法是：

```
google.load("dojo", "1.1.1", {callback: start});

function start() {
    dojo.require("dojox.gfx");
    ...
} 
```

或者

```
google.setOnLoadCallback(start);
google.load("dojo", "1.1.1");

function start() {
    dojo.require("dojox.gfx");
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T04:42:02.650

我相信 google 成为您导入库的命名空间。试试：`google.dojo.require`。

哦！如下所述，不要忘记使用 google.setOnLoadCallback 而不是直接调用您的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T04:43:47.077

一个更好的问题是——你为什么要这样做？如果您在本地主机上开发，那么只需使用相对路径，如果您在面向 Internet 的服务器上开发 - 将 dojo 文件粘贴在上面。

另外 - 确保您没有违反[同源政策](http://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-07T16:06:31.213

dojox 实际上是无人维护的，将从 dojo-2 中移除。dojox 中的大多数小部件都存在重大问题，只有少数几个是好的。

恕我直言，dojo 应该是自托管的，因为总有一些东西需要覆盖 - 例如，您需要在这个 dojox.gfx 中进行一些修复。

# ms-word - 如何比较两个word文档？

> ID：90075
> 
> 赞同：26
> 
> 时间：2008-09-18T04:40:10.067
> 
> 标签：ms-word, office-2003

我团队的业务分析师经常向我们发送更新的需求文档，我最终通过比较旧版本来寻找最近的变化。他们是比较 Word 文档的好方法吗？

注意：我们打开了跟踪更改选项，但现在文件看起来像血浴，更复杂:(

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-09-18T05:27:01.777

在 Word 2003 中使用此选项：

> **工具**| 比较和合并**文档**

或者在 Word 2007 中：

> **评论**| 比较**_** _

它会提示您输入一个文件，与您正在编辑的文件进行比较。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-18T04:52:14.467

我使用[TortoiseMerge](http://tortoisesvn.tigris.org/TortoiseMerge.html)和[xdocdiff](http://freemind.s57.xrea.com/xdocdiff/e/index.html)插件来比较 Word、Excel、PowerPoint 和 PDF 版本的文件

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-18T04:48:16.147

如果您有 Beyond Compare，您可以借助必须从开发者网站和插件下载的一些规则来区分两个 word 文档。然后它会给你一个纯文本（没有格式）视图（有一些你可以忽略的单词格式乱码。差异将被突出显示并且很容易找到。

我在[此处记录了如何操作](http://madcoderspeak.blogspot.com/2007/12/compare-and-merge-excel-files-with.html)。它谈论 Excel，但在同一个地方有 Word 的规则。

*如果您没有 Beyond Compare... 购买它！强烈推荐..没有它我会很挣扎。*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-18T04:43:32.960

[Codejacked](http://www.codejacked.com/comparing-two-versions-of-a-word-document/ "比较word文档")涵盖了三种比较 word 文档的不同方法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-18T04:46:52.857

你使用了错误的工具。在我上一个主要项目的过程中，我们设法说服整个团队转向 Wiki 计划。它不仅使跟踪更改更快、更容易，而且有助于更好地组织信息。不必跟踪大型文本文档中的任意索引，文档之间可以使用超链接。

这意味着文件可以自然地从高层流向细节。与 Word 文档相比，此类规范的实施非常容易。此外，文档位于中心位置这一事实确保没有人仍在使用他们保存到硬盘驱动器的过期副本进行工作。

我知道向新方向发展可能存在一些内部阻力。但是，如果你能说服你的同事，他们应该具有前瞻性思维并始终挑战自我，他们就会试一试，很快就会成为真正的信徒。:-)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-18T04:43:19.013

我相信，在“跟踪更改”附近还有一个比较文档的选项。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-04-27T23:04:42.137

当我们每天比较文件时，律师会使用 Comparewrite 和 DeltaView 等程序。我们将其称为“黑线”文档，因为差异以粗体下划线表示添加，黑色删除线表示删除。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-02-16T11:45:42.933

打开任何文档并使用 Review>Compare 选项卡。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-18T04:44:50.770

我不知道如何单独比较文件，因为它们是二进制文件，但是如何制作一个与 MS Word 对话的程序，将文件的内容复制到纯文本文件？然后你可以比较纯文本文件。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-06-25T15:50:33.737

如果格式是基本的，则一种选择是使用将文档转储到纯文本文件的工具，然后`diff`像在任何其他文件上一样使用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-18T04:46:12.470

[版本](http://www.versionate.com/)化可能会奏效。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2009-03-04T07:54:13.327

Word 2003 中的文档比较功能非常差，并且经常导致用户删除他们不想要的部分文档

唯一合理的选择是使用其他软件。市场上有大量的文本比较软件，但要在 Word 中执行此操作，最简单的答案是升级到 Word 2007 或更高版本

从 Word 2007 版开始，功能区命令“审阅”和“比较”很容易找到，并且操作合理。他们有一个很好的清晰的合并更改布局，以及之前和之后的文档

升级的小成本非常值得考虑您将在 2003 年浪费的时间，以及它可能对您的文档造成的潜在损坏

其他人关于您可以在 2003 年使用比较功能的任何建议都是恶作剧，并且考虑到您的文档的某些部分被默默删除的长期后果，没有经过深思熟虑

# java - 有没有人从 Struts 1 迁移到另一个 Web 框架？

> ID：90078
> 
> 赞同：8
> 
> 时间：2008-09-18T04:40:43.637
> 
> 标签：java, ajax, struts

在我当前的项目中，过去几年我们一直在使用 Struts 1，而且……咳咳…… Struts 已经过时了。我们正在慢慢地将前端代码迁移到使用来自服务器的 XML 的 Ajax 客户端。我想知道你们中是否有人将遗留的 Struts 应用程序迁移到不同的框架，以及在这样做时遇到了哪些挑战。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-18T05:08:46.173

当然。从 Struts 迁移到 AJAX 框架是一种非常自由的体验。（尽管我们使用 JSON 而不是 XML。更容易解析。）但是，您需要注意它实际上是对您的应用程序的完全重写。

代替 MVC 的经典 Database/JSP/Actions 方案，您会发现自己转向 Servlet/Javascript 方案，其中模型由 HTTP GET 请求表示，动作由 POST/PUT/DELETE 请求表示，视图是由网络浏览器即时呈现。这导致了每个领域的有趣挑战：

**服务器端**- 在服务器端，您需要开发一个标准来向客户端公开数据。最简单和最简单的方法是采用最适合您的数据层次结构的[REST](http://en.wikipedia.org/wiki/REST)方法。使用 servlet 实现这一点相当简单，但 Sun 还开发了一个[Java 1.6 方案](http://www.jcp.org/en/jsr/detail?id=311)，使用看起来很酷的属性。

服务器端的另一个方面是选择传输协议。我知道您已经提到过 XML，但您可能需要重新考虑。浏览器之间的 XML 解析器差异很大。一个浏览器可能会将文档根设为第一个子节点，另一个浏览器可能会添加一个特殊的内容对象，并且它们都以不同的方式解析空格。更糟糕的是，主要浏览器似乎没有正确实现 normalize() 函数。这意味着 XML 解析很可能充满黑客攻击。

[JSON](http://www.json.org/)更容易解析且结果更一致。Javascript 和 Actionscript (Flash) 都可以将 JSON 直接转换为对象。这使得访问数据成为 xy 或 x[y] 的简单问题。还有大量的 API 可以处理所有可以想象的语言中的 JSON。因为它很容易解析，所以几乎支持比 XML 更好！

**客户端**- 您将遇到的第一个问题是没有人了解如何编写 Javascript。特别是那些认为他们这样做的人。如果您有任何关于 Javascript 的书籍，请立即将它们扔出窗外。几乎没有关于该语言的好书，因为它们都遵循相同的“黑客”模式，而没有真正深入了解他们正在做什么。

从最低级别开始，您的团队将需要 Javascript 开发方面的补习培训。从[Javascript 客户端指南](http://devedge-temp.mozilla.org/library/manuals/2000/javascript/1.5/guide/)开始。它是该语言的*事实上*的信息来源。下一站是[Douglas Crockford 的](http://www.metafilter.com/61049/Douglas-Crockford-Teaches-JavaScript)Javascript 视频。我不同意他所说的一切，但他是为数不多的语言专家之一。

一旦你搞定了，考虑一下你想使用什么框架（如果有的话）。一般来说，我不喜欢 Prototype 和 Mootools 之类的东西。他们倾向于把一个简单的问题搞得更糟。尽管如此，您可以随意评估这些工具并决定它们是否适合您。

如果您因为团队太缺乏经验而绝对觉得没有框架就无法生存，那么[GWT](http://code.google.com/webtoolkit/)可能适合您。GWT 允许您使用 Java 代码快速编写 DHTML Web 应用程序，然后将它们编译为 Javascript。问题是你这样做会放弃大量的灵活性。Javascript 语言比 GWT 公开的要强大得多。然而，GWT 确实让 Java 开发人员更快地掌握了速度。所以选择你的战斗。

这些是我能想到的关键领域。我可以说，一旦您从应用程序中获得支持，您就会松一口气。它可能有点像野兽。尤其是如果您的 Struts 模型上有经验不足的开发人员。:-)

任何问题？

**编辑 1：**我忘了补充一点，您的团队应该认真研究[W3C 规范](http://www.w3.org/)。这些是现代浏览器中可供您使用的 API。如果您发现有人使用 DOM 0 API（例如 document.forms['myform'].blah.value 而不是 document.getElementById("blah").value），则强制他们转录整个 DOM 1 规范，直到他们理解为止到底部。

**编辑 2：**要考虑的另一个关键问题是如何记录您花哨的新 AJAX 应用程序。REST 风格的界面很适合在 Wiki 中记录。我所做的是一个顶级页面，列出了每项服务和描述。通过单击服务路径，您将被带到一个文档，其中包含每个子路径的详细信息。理论上，这个方案可以记录你需要树去的深度。

如果您使用 JSON，您将需要开发一个方案来记录对象。我刚刚列出了 Wiki 中可能的属性作为文档。这适用于简单的对象树，但对于更大、更复杂的对象可能会变得复杂。在这种情况下，您可以考虑补充 IDL 或 WebIDL 之类的东西。（不能比 XML DTD 和模式差多少。;-)）

DHTML 代码在其文档中更为经典。您可以使用像[JSDoc](http://jsdoc.sourceforge.net/)这样的工具来创建 JavaDoc 样式的文档。只有一个警告。Javascript 代码不适合在代码中记录。如果没有其他原因，它会使下载膨胀。但是，您可能会发现自己经常编写作为内聚对象运行的代码，但并未在幕后将其编码为这样的对象。因此，最好的解决方案是创建代表和记录 Javascript 对象的 JSDoc 框架文件。

如果您使用 GWT，文档应该是显而易见的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T13:35:22.337

查看[条纹框架](http://www.stripesframework.org)。如果您熟悉支柱，那么条纹对您来说会很有意义，但它要好得多。他们的网站上有一个[Stripes vs Struts](http://www.stripesframework.org/display/stripes/Stripes+vs.+Struts)部分。你可以检查一下，看看你是否感兴趣。它允许您使用任何您想要的 ajax 框架，而且我认为从 struts 迁移到 stripes 不会花费很长时间。

# mysql - 在 MySQL 中强制执行唯一行

> ID：90092
> 
> 赞同：2
> 
> 时间：2008-09-18T04:42:33.053
> 
> 标签：mysql, indexing, mysql-error-1071

我有一个`MySQL`包含 3 个字段的表，我想在其中两个字段之间强制执行唯一性。这是表格`DDL`：

```
CREATE TABLE `CLIENT_NAMES` (
`ID` int(11) NOT NULL auto_increment,
`CLIENT_NAME` varchar(500) NOT NULL,
`OWNER_ID` int(11) NOT NULL,
PRIMARY KEY  (`ID`),
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

该`ID`字段是代理键（此表正在加载 ETL）。这`CLIENT_NAME`是一个包含客户名称的字段 这`OWNER_ID`是一个 id 表示客户所有者。

`CLIENT_NAME`我以为我可以在and上使用唯一索引来强制执行此操作`OWNER_ID`，

```
ALTER TABLE `DW`.`CLIENT_NAMES` 
ADD UNIQUE INDEX enforce_unique_idx(`CLIENT_NAME`, `OWNER_ID`); 
```

但 MySQL 给了我一个错误：

> 执行 SQL 命令更新表时出错。指定的密钥太长；最大密钥长度为 765 字节（错误 1071）

其他人有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-18T04:46:34.620

MySQL 不能对长度超过 765 字节的键强制唯一性（显然 500 个 UTF8 字符可以超过这个限制）。

1.  CLIENT_NAME 真的需要 500 个字符吗？好像有点过分了。
2.  添加一个新的（较短的）列，即 hash(CLIENT_NAME)。让 MySQL 改为在该哈希上强制执行唯一性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T04:45:47.977

你看过 CONSTRAINT ... UNIQUE 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T05:08:01.840

这张桌子似乎有点奇怪。我实际上会考虑重构它。ID 和 OWNER_ID 指的是什么，它们之间的关系是什么？

有没有意义

```
CREATE TABLE `CLIENTS` (
`ID` int(11) NOT NULL auto_increment,
`CLIENT_NAME` varchar(500) NOT NULL,
# other client fields - address, phone, whatever
PRIMARY KEY  (`ID`),
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `CLIENTS_OWNERS` (
`CLIENT_ID` int(11) NOT NULL,
`OWNER_ID` int(11) NOT NULL,
PRIMARY KEY  (`CLIENT_ID`,`OWNER_ID`),
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

我真的会避免在 500 个字符的字符串上添加这样的唯一键。在两个整数上强制唯一性会更有效，而且表中的 id 应该真正引用需要 id 的东西；在您的版本中，该`ID`字段似乎只识别客户/所有者关系，实际上不需要单独的 id，因为它只是一个映射。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-18T04:49:44.317

[在这里](http://www.xaprb.com/blog/2006/04/17/max-key-length-in-mysql/)。对于 UTF8 字符集，MySQL 每个字符最多可以使用 3 个字节。CLIENT_NAME 为 3 x 500 = 1500 字节。缩短`CLIENT_NAME`到 250。

*后来：* +1 创建名称的哈希并将其用作键。

# session - 在经典 asp 中，我可以在 Session 对象中存储数据库连接吗？

> ID：90100
> 
> 赞同：3
> 
> 时间：2008-09-18T04:43:31.633
> 
> 标签：session, asp-classic, database-connection

我可以在 Session 对象中存储数据库连接吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-18T04:47:58.800

通常不建议这样做，Application 变量中的连接字符串，带有一个很好的帮助函数/类是一个更受欢迎的方法。~~这里~~有一些参考。*（已删除死链接，因为它现在指向一个钓鱼网站）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T04:49:48.187

我似乎记得这样做会产生单线程应用程序的效果，这将是一件坏事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-23T12:02:06.363

一般来说，我不会将任何对象存储在应用程序变量中（当然也不会存储在会话变量中）。

当涉及到数据库连接时，这是绝对不行的。此外，绝对没有必要。

如果您使用 ADO 与数据库通信，如果您对所有数据库连接使用*相同的连接字符串*（是的，无论如何，将*其*存储在应用程序变量中），“连接池”将在幕后实现。这意味着当您释放连接时，它实际上并没有被破坏 - 它被放在一边，以供下一个想要相同连接的人使用。因此，下次您请求相同的连接时，它会被“下架”，而不必显式创建和实例化——这是一个相当不错的效率改进。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-26T06:04:53.123

从这个链接[http://support.microsoft.com/default.aspx/kb/243543](http://support.microsoft.com/default.aspx/kb/243543)

您不应该在 Session 中存储数据库连接。

据我了解，如果您这样做，则同一用户的后续 ASP 请求必须使用同一线程。

因此，如果您有一个繁忙的站点，则“您的”线程可能已经被其他人使用，因此您必须等待它可用。

将其乘以更多用户，您将让每个人都在等待其他人的线程和响应不快的网站。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2008-09-23T12:05:27.290

正如 CJM 所说，没有必要在 Session 对象中存储连接：连接池要好得多。

# asp.net - IIS URL 重写与 URL 路由

> ID：90112
> 
> 赞同：50
> 
> 时间：2008-09-18T04:45:55.153
> 
> 标签：asp.net, asp.net-mvc, iis, routing, url-rewriting

我打算为 Web 窗体应用程序使用 url 路由。但是，在阅读了一些[帖子](http://learn.iis.net/page.aspx/496/iis-url-rewriting-and-aspnet-routing/)之后，我不确定这是否是一种简单的方法。

[将URL 重写模块](http://learn.iis.net/page.aspx/460/using-url-rewrite-module/)用于 Web 表单会更好吗？但是，它仅适用于 IIS7。最初，有人认为 URL 路由与 Asp.Net MVC 完全分离，并且可以用于 Web 表单。

很想听听任何建议..

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-11-08T18:55:35.360

这是我找到的关于该主题的最佳文章： Ruslan Yakushev 的[IIS URL 重写和 ASP.NET 路由](http://www.iis.net/learn/extensions/url-rewrite-module/iis-url-rewriting-and-aspnet-routing)。

## IIS URL 重写

当客户端针对特定 URL 向 Web 服务器发出请求时，URL 重写组件会分析请求的 URL 并将其更改为同一服务器上的另一个不同 URL。URL 重写组件在请求处理管道的早期运行，因此能够在 Web 服务器决定使用哪个处理程序来处理请求之前修改请求的 URL。

![IIS URL 重写](https://i.stack.imgur.com/vVvAk.gif)

## ASP.NET 路由

ASP.NET 路由作为托管代码模块实现，该模块在解析缓存阶段（PostResolveRequestCache 事件）和映射处理程序阶段（PostMapRequestHandler）插入 IIS 请求处理管道。ASP.NET 路由配置为针对对 Web 应用程序发出的所有请求运行。

![IIS URL 路由](https://i.stack.imgur.com/6RszQ.gif)

URL重写和ASP.NET路由的区别：

1.  URL 重写用于**在 Web 服务器处理请求之前**操纵 URL 路径。URL 重写模块不知道什么处理程序最终将处理重写的 URL。此外，实际的请求处理程序可能不知道 URL 已被重写。
2.  ASP.NET 路由用于**根据请求的 URL 路径将请求分派给处理程序**。与 URL 重写相反，路由组件知道处理程序并选择应该为请求的 URL 生成响应的处理程序。您可以将 ASP.NET 路由视为一种高级处理程序映射机制。

除了这些概念上的差异之外，IIS URL 重写和 ASP.NET 路由之间还有一些功能差异：

1.  IIS URL 重写模块可用于任何类型的 Web 应用程序，包括 ASP.NET、PHP、ASP 和静态文件。ASP.NET 路由只能用于基于 .NET Framework 的 Web 应用程序。
2.  无论应用程序池使用集成还是经典 IIS 管道模式，IIS URL 重写模块的工作方式都相同。对于 ASP.NET 路由，最好使用集成管道模式。ASP.NET 路由可以在经典模式下工作，但在这种情况下，应用程序 URL 必须包含文件扩展名，或者必须将应用程序配置为在 IIS 中使用“*”处理程序映射。
3.  URL-rewrite 模块可以根据域名、HTTP 标头和服务器变量做出重写决策。默认情况下，ASP.NET 路由仅适用于 URL 路径和 HTTP-Method 标头。
4.  除了重写之外，URL-rewrite 模块还可以执行 HTTP 重定向、发出自定义状态代码和中止请求。ASP.NET 路由不执行这些任务。
5.  URL-rewrite 模块在其当前版本中不可扩展。ASP.NET 路由是完全可扩展和可定制的。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-09-18T15:55:04.623

这里有一篇[很棒的帖子，](http://ruslany.net/2008/09/aspnet-routing-request-filtering-url-rewriting/)关于 IIS 团队成员的两者之间的差异。

我建议的一个警告是，对于 WebForms，在使用路由时需要小心。我编写了一个示例实现，说明如何将[路由与 WebForms 一起](http://haacked.com/archive/2008/03/11/using-routing-with-webforms.aspx)使用，以解决这些问题，并希望有助于回答您的问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-18T04:47:02.543

您希望格式化的 url 成为生成页面的工厂吗？

或者你想让 .aspx 消失吗？

重写，是为了让 .aspx 消失，或者只是为了整理 url。

路由，用于查看请求并确定应由哪个对象处理它。它们听起来很相似，phil haack 有几篇关于这个主题的好文章。

**在iis6，isapiRewrite，很不错**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-18T14:23:37.120

我最近刚刚编写了自己的重写系统，以使我网站上的 URL 看起来更好。基本上，您将需要编写自己的[IHttpModule](http://msdn.microsoft.com/en-us/library/system.web.ihttpmodule.aspx)并将其添加到您的 web.config 以拦截传入的请求。然后，您可以使用 HttpContext.Current.RewritePath 更改您指向的内容。

您还需要将您的站点配置为[使用 aspnet_isapi 来处理所有内容](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/5c5ae5e0-f4f9-44b0-a743-f4c3a5ff68ec.mspx?mfr=true)。

在此过程中，您会发现很多小问题，例如尝试使用在其上使用“尾部”的页面（例如 PageMethods），或页面元素的路径和表单回发，但您会解决这些问题。

如果有兴趣，我可以发布代码链接，您可以查看。我已经解决了很多问题，所以你可以随时阅读。我敢肯定还有很多其他人也这样做过，这也可能是很好的资源。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-18T14:08:34.207

您可能想查看我对这个问题的[回答](https://stackoverflow.com/questions/22869/aspnet-building-your-own-routing-system#22966)： [ASP.NET - 构建您自己的路由系统](https://stackoverflow.com/questions/22869/aspnet-building-your-own-routing-system)。我提供了一些很好的参考资料，以帮助您使用 url 重写方法或您可以使用的来自 ASP.NET MVC 项目的新路由引擎来构建您自己的路由系统。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T04:48:56.097

.Net 3.5 SP1 提供的动态数据项目显示了一个很好的 url 路由实现示例。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-09T07:15:04.003

对于 IIS 上的 URL 重写，[IIRF](http://www.codeplex.com/IIRF)在 IIS5、6、7 中工作。免费。简单的。快速地。开源。正则表达式支持。

# c# - 如何使用 .Net 泛型来继承模板参数？

> ID：90117
> 
> 赞同：1
> 
> 时间：2008-09-18T04:46:39.207
> 
> 标签：c#, .net, generics

**我希望能够做到这一点。**

```
MyInterface interface = new ServiceProxyHelper<ProxyType>(); 
```

**这是对象结构**

```
MyTypeThatImplementsMyInterface : MyInterface 
```

**这行得通吗？**

```
public class ProxyType : MyInterface {}

public class ServiceProxyHelper<ProxyType> : IDisposable, MyInterface {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-18T04:50:15.220

我认为这就是你想要做的：

```
public class ServiceProxyHelper<T> where T : MyInterface { ... } 
```

# windows - Windows XP 中的符号链接

> ID：90121
> 
> 赞同：16
> 
> 时间：2008-09-18T04:47:38.987
> 
> 标签：windows, unix

问题是如何在 Windows 中像在 *nix 中一样制作类似符号链接的东西。在控制台中写入文件的完整路径真的很难（即使使用 [tab]，如果您需要更改语言，也不是这样）。在 PATH 中添加所有内容也很累。制作一个运行一个命令的符号链接会很棒。

其实我正在寻找控制台应用程序。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-18T04:48:02.230

他们被称为[路口](https://web.archive.org/web/1/http://articles.techrepublic%2ecom%2ecom/5100-10878_11-5388706.html)

如果你想要一个[GUI](http://www.rekenwonder.com/linkmagic.htm)为你做这件事......

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-18T05:56:17.760

我首先使用**[subst](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/subst.mspx)**，因为它使路径更短。[要做到这一点，但要像典型的runt](https://stackoverflow.com/a/90123/12892)所说的那样安装一个虚拟磁盘，我使用了Sysinternals 的**[junction](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)**实用程序。

要创建符号链接，请使用以下命令：

```
junction Disk:\path\to\mount\point Disk:\path\to\something\to\mount 
```

要删除它，请使用`-d`开关：

```
junction -d Disk:\path\to\mount\point Disk:\path\to\something\to\mount 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-18T04:53:16.133

当我在 Windows 上时，我曾经使用硬链接 shell 扩展。不确定这是否是同一个，但试试这个：[Link Shell Extension](http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-18T05:29:32.177

与大多数事情一样，SysInternals 这次为您提供了[Junction](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T05:10:32.003

较长讨论的较老问题：[如何在 Windows 中创建符号链接？](https://stackoverflow.com/questions/46885/how-to-create-symbolic-links-in-windows)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-28T17:47:52.777

[有一个用于在 Windows 中创建符号链接的](http://www.taranfx.com/create-symlink-in-windows)开源 GUI 工具

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-09-18T04:50:52.940

您可以使用`mklink`.

编辑：如果您使用 Vista。

# ruby - http 使用 ruby 将文件放入 S3 预签名 URL

> ID：90151
> 
> 赞同：2
> 
> 时间：2008-09-18T04:56:44.847
> 
> 标签：ruby, http, amazon-s3

任何人都有一个使用 ruby​​ 发布到 s3 上的预签名 URL 的工作示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:09:57.547

我都使用了 aws-sdk 和 right_aws 。

这是执行此操作的代码。

```
require 'rubygems'
require 'aws-sdk'
require 'right_aws'
require 'net/http'
require 'uri'
require 'rack'

access_key_id     = 'AAAAAAAAAAAAAAAAA'
secret_access_key = 'ASDFASDFAS4646ASDFSAFASDFASDFSADF'

s3 = AWS::S3.new(  :access_key_id => access_key_id, :secret_access_key => secret_access_key)

right_s3 = RightAws::S3Interface.new(access_key_id,  secret_access_key,  {:multi_thread => true, :logger => nil} ) 

bucket_name = 'your-bucket-name'
key  = "your-file-name.ext"

right_url = right_s3.put_link(bucket_name, key)
right_scan_command = "curl -I --upload-file #{key} '#{right_url.to_s}'"
system(right_scan_command)

bucket = s3.buckets[bucket_name]
form = bucket.presigned_post(:key => key)
uri = URI(form.url.to_s + '/' + key)
uri.query = Rack::Utils.build_query(form.fields)
scan_command = "curl -I --upload-file #{key} '#{uri.to_s}'"
system(scan_command) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T02:21:56.003

您能否提供有关“预签名 URL”如何工作的更多信息？是不是这样：

```
AWS::S3::S3Object.url_for(self.full_filename,
                          self.bucket_name, {
                            :use_ssl => true,
                            :expires_in => ttl_seconds
                          }) 
```

我使用此代码将经过身份验证的客户端发送到其 S3 文件的 URL。我相信这是您要询问的“预签名 URL”。我没有将此代码用于 PUT，所以我不确定它是否适合您，但它可能会让您接近。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-29T17:47:45.497

[我知道这是一个较老的问题，但我想知道同样的事情，并在AWS S3 文档](https://docs.aws.amazon.com/AmazonS3/latest/dev/UploadObjectPreSignedURLRubySDK.html)中找到了一个优雅的解决方案。

```
require 'net/http'

file = "somefile.ext"
url = URI.parse(presigned_url)
Net::HTTP.start(url.host) do |http|
   http.send_request("PUT", url.request_uri, File.read(file), {"content-type" => "",})
end 
```

这对我的 Device Farm 上传非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T07:25:53.397

[s3 库页面](http://amazon.rubyforge.org/)上的内容是否涵盖了您需要的内容？那里有很多例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-19T15:43:04.673

有一些用于 Ruby 的通用 REST 库；谷歌“红宝石休息客户端”。另请参阅[HTTP 派对](http://railstips.org/2008/7/29/it-s-an-httparty-and-everyone-is-invited)。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2008-09-20T01:45:42.877

我已经设法解决了。事实证明，Ruby 中的 HTTP:Net 有一些缺点。很多 Monkeypatch 后来我得到了它的工作.. 当我有时间的时候更多细节。感谢

# google-docs - 与 Google 文档集成

> ID：90160
> 
> 赞同：7
> 
> 时间：2008-09-18T04:58:58.553
> 
> 标签：google-docs

有没有人在他们的网络应用程序中集成了“在 Google Docs 中打开”？Gmail 有这个用于打开附件。*在非谷歌*网络应用程序中看到其他任何情况怎么样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-18T05:03:50.727

Google Docs 确实[有一个 API](http://code.google.com/apis/documents/developers_guide_protocol.html)，允许您从特定用户的 Google Docs 列表中搜索、上传、删除和检索文档。您可以想象使用它从您的服务器上传一个文档，然后检索该文档的 URL（一旦它被导入），然后您可以使用它来重定向用户。它不会像 Gmail 的集成*那样*流畅，因为您无法显示那个花哨的“正在导入您的文档...”页面，但它可能就足够了。

至于其他目击事件，我不知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T05:05:26.197

如果您自己只需要此功能，您可以下载“ [Send to google docs”firefox 扩展](http://blogs.bnet.com/businesstips/?p=1855)。这将在网络上的所有文档链接上添加一个右键菜单，并允许您在谷歌文档中打开它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-18T05:03:25.923

您必须查看[Google Documents List Data API](http://code.google.com/apis/documents/developers_guide_dotnet.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-30T13:05:48.027

有一个用于 api 访问的 gdata 目标 c 实现。

[http://code.google.com/p/gdata-objectivec-client/](http://code.google.com/p/gdata-objectivec-client/)

# .net - 有没有办法将 C++ 代码编译为 Microsoft .Net CIL（字节码）？

> ID：90164
> 
> 赞同：2
> 
> 时间：2008-09-18T05:01:58.327
> 
> 标签：.net, c++, browser, cil

即，Web 浏览器客户端将用 C++ 编写！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-18T08:44:03.833

有两种选择。托管 C++（/clr:oldSyntax，不再维护）或 C++/CLI（肯定维护）。您需要将 /clr:safe 用于浏览器内软件，因为您需要浏览器来验证它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-18T05:07:50.030

这最初被称为[Managed C++](http://en.wikipedia.org/wiki/Managed_Extensions_for_C%2B%2B)，但正如 Josh 评论的那样，它已被[C++/CLI](http://en.wikipedia.org/wiki/C%2B%2B/CLI)取代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-18T05:06:18.473

使用 /clr 编译选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T05:08:16.190

当然，Visual Studio 可以编译“托管”C++。不过，我不确定我是否理解您的“网络浏览器客户端”参考；你的意思是你想把你的 C++ 编译成可以用 Silverlight 运行的东西吗？

# asp.net - 如何在 sql server 2000 和 asp.net 2.0 中创建对表的 sql 依赖项？

> ID：90172
> 
> 赞同：0
> 
> 时间：2008-09-18T05:04:49.553
> 
> 标签：asp.net, sql-server, sqldependency

我需要在我的页面`sql dependenc`中的表格上创建 y 。`sql server 2000``asp.net 2.0`

需要采取哪些措施，最好的方法是什么？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-18T05:09:35.877

[微软对此有一个很好的教程](http://msdn.microsoft.com/en-us/library/ms178604.aspx)，基本上解释了您需要使用[aspnet_regsql.exe](http://msdn.microsoft.com/en-us/library/ms229862(VS.80).aspx)实用程序或[SqlCacheDependencyAdmin 类来启用它](http://msdn.microsoft.com/en-us/library/system.web.caching.sqlcachedependencyadmin(VS.80).aspx)

# java - Java：如何查看我的代码的哪些部分运行得最多？（分析）

> ID：90176
> 
> 赞同：10
> 
> 时间：2008-09-18T05:05:38.617
> 
> 标签：java, debugging, user-interface, profiling

我正在用 Java 编写一个简单的跳棋游戏。当我将鼠标悬停在电路板上时，我的处理器会加速到 50%（核心为 100%）。

我想找出我的代码的哪一部分（假设是我的错）在此期间正在执行。

我已经尝试过调试，但在这种情况下，逐步调试不能很好地工作。

有什么工具可以告诉我我的问题出在哪里？我目前正在使用 Eclipse。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-18T05:07:50.123

这称为“剖析”。您的 IDE 可能附带一个：请参阅[Java 中的 Open Source Profilers](http://java-source.net/open-source/profilers)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-18T05:08:45.770

使用分析器（例如[yourkit](http://www.yourkit.com)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T05:07:56.973

剖析？我不知道您使用的是什么 IDE，但[Eclipse 有一个不错的分析器，并且在](http://www.eclipse.org/tptp/home/documents/tutorials/profilingtool/profilingexample_32.html "Eclipse 分析教程")[java-source](http://java-source.net/open-source/profilers "开源分析器")也有一些开源分析器的列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-18T05:39:25.460

简而言之，[分析器](http://en.wikipedia.org/wiki/Performance_analysis "剖析")会告诉你程序的哪一部分被调用了多少次。

我没有过多地分析我的程序，所以我没有太多经验，但我在测试[NetBeans IDE](http://www.netbeans.org/ "Netbeans IDE")分析器时玩过它。（我通常也使用 Eclipse。我还将研究 Eclipse 中的分析功能。）

NetBeans 分析器将告诉您哪个线程执行了多长时间，哪些方法已被调用了多长时间，并为您提供条形图以显示每个方法花费了多少时间。这应该会提示您哪种方法会导致问题。如果您好奇，可以查看 NetBeans IDE 提供的[Java 分析器。](http://www.netbeans.org/features/java/profiler.html "Java 探查器")

分析是一种技术，通常用于测量程序的哪些部分占用了大量的执行时间，进而可以用来评估执行优化是否有利于提高程序的性能。

祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T05:08:14.757

1）这是你的错:)

2) 如果您使用 eclipse 或 netbeans，请尝试使用分析功能——它应该很快告诉您代码在哪里花费了大量时间。

3）如果失败，请在您认为内部循环所在的位置添加控制台输出 - 您应该能够快速找到它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-18T05:08:26.363

是的，有这样的工具：你必须分析代码。您可以在 Eclipse中尝试[TPTP ，也可以尝试](http://www.eclipse.org/tptp/)[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)。这将让您了解调用的内容以及调用频率。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-18T05:08:30.107

使用分析器。有许多。这是一个列表：http: [//java-source.net/open-source/profilers](http://java-source.net/open-source/profilers)。例如，您可以使用[JIP](http://java-source.net/open-source/profilers)，一个 java 编码的分析器。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-18T06:47:53.143

这是一个典型的“高 CPU”问题。

有两种高CPU问题

a）线程在哪里使用一个核心的 100% CPU（这是你的场景）

b) 当我们执行某些操作时，CPU 使用率“异常高”。在这种情况下，CPU 可能不是 100%，但会异常高。通常，当我们在代码中进行 CPU 密集型操作（如 XML 解析、序列化反序列化等）时，就会发生这种情况。

案例（a）很容易分析。当您在 30 秒间隔内遇到 100% CPU 5-6 线程转储时。寻找一个处于活动状态（处于“可运行”状态）并且在同一方法中的线程（您可以通过监视线程堆栈来推断）。很可能您会看到“忙等待”（参见下面的代码示例）

```
while(true){
  if(status) break;
  // Thread.sleep(60000); // such a statement would have avoided busy wait
} 
```

案例 (b) 也可以使用等间隔的线程转储进行分析。如果幸运的话，您将能够找到问题代码，如果您无法使用线程转储来识别问题代码。您需要求助于分析器。根据我的经验，YourKit 分析器非常好。

我总是先尝试线程转储。探查器将只是最后的手段。在 80% 的情况下，我们将能够使用线程转储进行识别。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-18T06:59:42.257

[Clover](https://www.atlassian.com/software/clover/ "三叶草")会给出一个很好的报告，显示每个行和分支的命中数。例如，[这条线](http://clover.atlassian.com/browse/guice/com/google/inject/matcher/AbstractMatcher.html?line=29#src-29)被执行了 7 次。

Eclipse、Maven、Ant 和 IDEA 的插件可用。它对[开源是免费的](http://www.atlassian.com/software/views/opensource-license-request.jsp)，或者您可以获得[30 天的评估许可证](http://www.atlassian.com/software/clover/ViewCloverLicenses.jspa)。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-18T09:15:00.420

如果您使用的是 Sun Java 6，那么最新的 JDK 版本在 bin 目录中带有[JVisualVM 。](https://visualvm.dev.java.net/)这是一个功能强大的监控和分析工具，使用起来几乎不需要付出任何努力——你甚至不需要使用特殊参数启动程序——JVisualVM 只是列出所有当前正在运行的 java 进程，然后你选择你想玩的那个.

该工具将告诉您哪些方法正在使用所有处理器时间。

那里有很多更强大的工具，但请先玩免费的。然后，当您了解其他可用的功能时，您将对它们如何帮助您有所了解。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-18T05:13:58.953

或者为您的一些常见组件使用 JUnit 测试用例和代码覆盖工具。如果存在调用其他组件的组件，您将很快看到这些组件执行了很多次。

我将 Clover 与 JUnit 测试用例一起使用，但对于开源，我听说 EMMA 非常好。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-18T12:24:19.480

在单线程代码中，我发现添加了一些这样的语句： System.out.println("A: "+ System.currentTimeMillis()); 与使用分析器一样简单且有效。您可以很快缩小导致问题的代码部分。

# html - 使一个 div 填充剩余屏幕空间的高度

> ID：90178
> 
> 赞同：2419
> 
> 时间：2008-09-18T05:06:17.897
> 
> 标签：html, css, html-table

我正在开发一个 Web 应用程序，我希望内容填满整个屏幕的高度。

该页面有一个标题，其中包含一个徽标和帐户信息。这可以是任意高度。我希望内容 div 将页面的其余部分填充到底部。

我有一个 header`div`和一个 content `div`。目前我正在使用一个表格进行布局，如下所示：

CSS 和 HTML

```
#page {
    height: 100%; width: 100%
}

#tdcontent {
    height: 100%;
}

#content {
    overflow: auto; /* or overflow: hidden; */
}
```

```
<table id="page">
    <tr>
        <td id="tdheader">
            <div id="header">...</div>
        </td>
    </tr>
    <tr>
        <td id="tdcontent">
            <div id="content">...</div>
        </td>
    </tr>
</table>
```

页面的整个高度被填满，不需要滚动。

对于内容 div 中的任何内容，设置`top: 0;`会将其放在标题下方。有时内容将是一个真实的表格，其高度设置为 100%。放在`header`里面`content`不会让这个工作。

有没有办法在不使用的情况下达到相同的效果`table`？

**更新：**

内容中的元素`div`也将高度设置为百分比。因此，内部 100% 的东西`div`会将其填充到底部。50% 的两个元素也是如此。

**更新 2：**

例如，如果标题占据屏幕高度的 20%，则在内部 50% 处指定的表格`#content`将占用屏幕空间的 40%。到目前为止，将整个东西包装在一张桌子上是唯一有效的方法。

* * *

## 回答 #1

> 赞同：1501
> 
> 时间：2014-07-27T08:14:37.147

### 2015 年更新：flexbox 方法

还有另外两个答案简要提到[了 flexbox](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Flexible_boxes)；但是，那是两年多以前的事了，他们没有提供任何示例。flexbox 的规范现在已经确定了。

> 注意：虽然 CSS 灵活框布局规范处于候选推荐阶段，但并非所有浏览器都实现了它。WebKit 实现必须以 -webkit- 为前缀；Internet Explorer 实现了旧版本的规范，前缀为 -ms-；Opera 12.10 实现了最新版本的规范，没有前缀。有关最新的兼容性状态，请参阅每个属性的兼容性表。
> 
> （取自[https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Flexible_boxes](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Flexible_boxes)）

所有主流浏览器和 IE11+ 都支持 Flexbox。对于 IE 10 或更早版本，您可以使用 FlexieJS shim。

要检查当前支持，您还可以在此处查看： http: [//caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

### 工作示例

使用 flexbox，您可以轻松地在具有固定尺寸、内容尺寸尺寸或剩余空间尺寸的任何行或列之间切换。在我的示例中，我已将页眉设置为对齐其内容（根据 OPs 问题），我添加了一个页脚以显示如何添加固定高度的区域，然后设置内容区域以填充剩余空间。

```
html,
body {
  height: 100%;
  margin: 0;
}

.box {
  display: flex;
  flex-flow: column;
  height: 100%;
}

.box .row {
  border: 1px dotted grey;
}

.box .row.header {
  flex: 0 1 auto;
  /* The above is shorthand for:
  flex-grow: 0,
  flex-shrink: 1,
  flex-basis: auto
  */
}

.box .row.content {
  flex: 1 1 auto;
}

.box .row.footer {
  flex: 0 1 40px;
}
```

```
<!-- Obviously, you could use HTML5 tags like `header`, `footer` and `section` -->

<div class="box">
  <div class="row header">
    <p><b>header</b>
      <br />
      <br />(sized to content)</p>
  </div>
  <div class="row content">
    <p>
      <b>content</b>
      (fills remaining space)
    </p>
  </div>
  <div class="row footer">
    <p><b>footer</b> (fixed height)</p>
  </div>
</div>
```

在上面的 CSS 中，[flex属性是](https://developer.mozilla.org/en/CSS/flex)[flex-grow](https://developer.mozilla.org/en/CSS/flex-grow)、[flex-shrink](https://developer.mozilla.org/en/CSS/flex-shrink)和[flex-basis](https://developer.mozilla.org/en/CSS/flex-basis)属性的简写，以建立弹性项目的灵活性。Mozilla 对灵活盒子模型有[很好的介绍](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Flexible_boxes)。

* * *

## 回答 #2

> 赞同：261
> 
> 时间：2008-09-18T08:16:50.090

在 CSS 中确实没有一种可靠的、跨浏览器的方式来做到这一点。假设您的布局很复杂，您需要使用 JavaScript 来设置元素的高度。您需要做的事情的本质是：

```
Element Height = Viewport height - element.offset.top - desired bottom margin 
```

一旦您可以获取此值并设置元素的高度，您需要将事件处理程序附加到窗口 onload 和 onresize 以便您可以触发调整大小功能。

此外，假设您的内容可能大于视口，您将需要设置 overflow-y 来滚动。

* * *

## 回答 #3

> 赞同：181
> 
> 时间：2011-10-21T15:02:20.973

原来的帖子是3年前的。我想很多像我一样来看这篇文章的人都在寻找类似应用程序的布局解决方案，比如以某种方式固定的页眉、页脚和占据其余屏幕的全高内容。如果是这样，这篇文章可能会有所帮助，它适用于 IE7+ 等。

[http://blog.stevensanderson.com/2011/10/05/full-height-app-layouts-a-css-trick-to-make-it-easier/](http://blog.stevensanderson.com/2011/10/05/full-height-app-layouts-a-css-trick-to-make-it-easier/)

以下是该帖子的一些片段：

```
@media screen { 

  /* start of screen rules. */ 

  /* Generic pane rules */
  body { margin: 0 }
  .row, .col { overflow: hidden; position: absolute; }
  .row { left: 0; right: 0; }
  .col { top: 0; bottom: 0; }
  .scroll-x { overflow-x: auto; }
  .scroll-y { overflow-y: auto; }

  .header.row { height: 75px; top: 0; }
  .body.row { top: 75px; bottom: 50px; }
  .footer.row { height: 50px; bottom: 0; }

  /* end of screen rules. */ 
}
```

```
<div class="header row" style="background:yellow;">
    <h2>My header</h2>
</div> 
<div class="body row scroll-y" style="background:lightblue;">
    <p>The body</p>
</div> 
<div class="footer row" style="background:#e9e9e9;">
    My footer
</div>
```

* * *

## 回答 #4

> 赞同：156
> 
> 时间：2013-06-06T11:20:33.987

您可以使用 CSS 表格，而不是在标记中使用表格。

## 标记

```
<body>    
    <div>hello </div>
    <div>there</div>
</body> 
```

## （相关）CSS

```
body
{
    display:table;
    width:100%;
}
div
{
    display:table-row;
}
div+ div
{
    height:100%;  
} 
```

[**FIDDLE1**](http://jsfiddle.net/danield770/FC7eY/)和**[FIDDLE2](http://jsfiddle.net/danield770/FC7eY/1/)**

**这种方法的一些优点是：**

1) 少加价

2) 标记比表格更具语义，因为这不是表格数据。

3）浏览器支持**非常好**：IE8+，所有现代浏览器和移动设备（[caniuse](http://caniuse.com/css-table)）

* * *

为了完整起见，这里是与[CSS 表格模型的CSS 属性等效的 Html 元素](http://www.w3.org/TR/CSS2/tables.html#table-display)

```
table    { display: table }
tr       { display: table-row }
thead    { display: table-header-group }
tbody    { display: table-row-group }
tfoot    { display: table-footer-group }
col      { display: table-column }
colgroup { display: table-column-group }
td, th   { display: table-cell }
caption  { display: table-caption } 
```

* * *

## 回答 #5

> 赞同：120
> 
> 时间：2014-04-27T12:05:12.067

## 仅 CSS 方法（如果高度已知/固定）

当您希望中间元素垂直跨越整个页面时，您可以使用[`calc()`](https://developer.mozilla.org/en-US/docs/Web/CSS/calc)CSS3 中引入的。

假设我们有一个*固定的高度* `header`和`footer`元素，我们希望`section`标签占据整个可用的垂直高度......

[**演示**](http://jsfiddle.net/WdrDH/)

**假定的标记**和你的 CSS 应该是

```
html,
body {
  height: 100%;
}

header {
  height: 100px;
  background: grey;
}

section {
  height: calc(100% - (100px + 150px));
  /* Adding 100px of header and 150px of footer */
  background: tomato;
}

footer {
  height: 150px;
  background-color: blue;
}
```

```
<header>100px</header>
<section>Expand me for remaining space</section>
<footer>150px</footer>
```

所以在这里，我正在做的是，将元素的高度相加，而不是从`100%`使用`calc()`函数中扣除。

只要确保您使用`height: 100%;`父元素。

* * *

## 回答 #6

> 赞同：78
> 
> 时间：2016-05-22T03:20:04.223

用过的： `height: calc(100vh - 110px);`

代码：

```
 .header { height: 60px; top: 0; background-color: green}
.body {
    height: calc(100vh - 110px); /*50+60*/
    background-color: gray;
}
.footer { height: 50px; bottom: 0; } 
```

```
<div class="header">
    <h2>My header</h2>
</div> 
<div class="body">
    <p>The body</p>
</div> 
<div class="footer">
    My footer
</div>
```

* * *

## 回答 #7

> 赞同：74
> 
> 时间：2015-02-27T18:21:05.990

一个简单的解决方案，使用 flexbox：

```
html,
body {
  height: 100%;
}

body {
  display: flex;
  flex-direction: column;
}

.content {
  flex-grow: 1;
}
```

```
<body>
  <div>header</div>
  <div class="content"></div>
</body>
```

[Codepen 示例](http://codepen.io/isaacalves/pen/myKpVK)

[另一种解决方案，div 以内容 div 为中心](http://codepen.io/isaacalves/pen/MYXENq)

* * *

## 回答 #8

> 赞同：48
> 
> 时间：2017-06-17T18:19:17.007

你如何简单地使用**CSS**中的`vh`which 代表...`view height`

 **查看我在下面为您创建的**代码片段**并运行它：

```
body {
  padding: 0;
  margin: 0;
}

.full-height {
  width: 100px;
  height: 100vh;
  background: red;
}
```

```
<div class="full-height">
</div>
```

另外，请看下面我为您创建的图像：

[![使一个 div 填充剩余屏幕空间的高度](https://i.stack.imgur.com/Oy7mP.jpg)](https://i.stack.imgur.com/Oy7mP.jpg)

* * *

## 回答 #9

> 赞同：39
> 
> 时间：2015-02-20T17:12:17.417

当内容太高时需要底部 div 滚动时，发布的解决方案都不起作用。这是在这种情况下有效的解决方案：

```
.table {
  display: table;
}

.table-row {
  display: table-row;
}

.table-cell {
  display: table-cell;
}

.container {
  width: 400px;
  height: 300px;
}

.header {
  background: cyan;
}

.body {
  background: yellow;
  height: 100%;
}

.body-content-outer-wrapper {
  height: 100%;
}

.body-content-inner-wrapper {
  height: 100%;
  position: relative;
  overflow: auto;
}

.body-content {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
```

```
<div class="table container">
  <div class="table-row header">
    <div>This is the header whose height is unknown</div>
    <div>This is the header whose height is unknown</div>
    <div>This is the header whose height is unknown</div>
  </div>
  <div class="table-row body">
    <div class="table-cell body-content-outer-wrapper">
      <div class="body-content-inner-wrapper">
        <div class="body-content">
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
          <div>This is the scrollable content whose height is unknown</div>
        </div>
      </div>
    </div>
  </div>
</div>
```

[原始来源：在 CSS 中处理溢出时填充容器的剩余高度](http://blogs.msdn.com/b/kurlak/archive/2015/02/20/filling-the-remaining-height-of-a-container-while-handling-overflow-in-css.aspx)

[JSFiddle 实时预览](http://jsfiddle.net/352ntoz2/)

* * *

## 回答 #10

> 赞同：39
> 
> 时间：2015-08-24T12:57:25.203

**CSS3 简单方式**

```
height: calc(100% - 10px); // 10px is height of your first div... 
```

现在所有主流浏览器都支持它，所以如果您不需要支持老式浏览器，请继续。

* * *

## 回答 #11

> 赞同：35
> 
> 时间：2014-09-14T21:09:51.377

它可以纯粹通过`CSS`使用来完成`vh`：

```
#page {
    display:block; 
    width:100%; 
    height:95vh !important; 
    overflow:hidden;
}

#tdcontent {
    float:left; 
    width:100%; 
    display:block;
}

#content {      
    float:left; 
    width:100%; 
    height:100%; 
    display:block; 
    overflow:scroll;
} 
```

和`HTML`

```
<div id="page">

   <div id="tdcontent"></div>
   <div id="content"></div>

</div> 
```

我检查了它，它适用于所有主要浏览器：`Chrome`、、`IE`和`FireFox`

* * *

## 回答 #12

> 赞同：31
> 
> 时间：2016-01-03T17:16:47.073

> *免责声明：接受的答案给出了解决方案的想法，但我发现它有点臃肿，带有不必要的包装器和 css 规则。下面是一个 CSS 规则很少的解决方案。*

**HTML 5**

```
<body>
    <header>Header with an arbitrary height</header>
    <main>
        This container will grow so as to take the remaining height
    </main>
</body> 
```

**CSS**

```
body {
  display: flex;
  flex-direction: column;
  min-height: 100vh;       /* body takes whole viewport's height */
}

main {
  flex: 1;                 /* this will make the container take the free space */
} 
```

上面的解决方案使用[viewport units](http://caniuse.com/#feat=viewport-units)和[flexbox](http://caniuse.com/#feat=flexbox)，因此是 IE10+，提供您使用 IE10 的旧语法。

**要玩的 Codepen：[codepen 的链接](http://codepen.io/michaelbazos/pen/mVRBXM)**

**或者这个，对于那些需要主容器在内容溢出的情况下可滚动的人：[link to codepen](http://codepen.io/michaelbazos/pen/pgRWVG)**

* * *

## 回答 #13

> 赞同：27
> 
> 时间：2011-04-11T15:48:06.217

我也一直在寻找这个问题的答案。如果你有幸能够针对 IE8 及以上版本，你可以使用`display:table`和相关的值来获取包含 div 在内的块级元素的表格的呈现规则。

如果您更幸运，并且您的用户使用顶级浏览器（例如，如果这是您控制的计算机上的 Intranet 应用程序，就像我的最新项目一样），您可以使用CSS3中新的[灵活框布局！](http://www.w3.org/TR/css3-flexbox/)

* * *

## 回答 #14

> 赞同：24
> 
> 时间：2011-10-17T14:00:39.203

对我有用的（在另一个 div 中有一个 div，我假设在所有其他情况下）是将底部填充设置为 100%。也就是说，将其添加到您的 css / 样式表中：

```
padding-bottom: 100%; 
```

* * *

## 回答 #15

> 赞同：22
> 
> 时间：2015-10-30T15:39:16.250

现在有很多答案，但我发现使用`height: 100vh;`div 元素需要填满整个可用的垂直空间。

这样，我就不需要玩弄显示或定位了。这在使用 Bootstrap 制作仪表板时派上了用场，其中我有一个侧边栏和一个主栏。我希望主体能够拉伸并填充整个垂直空间，以便我可以应用背景颜色。

```
div {
    height: 100vh;
} 
```

支持IE9及以上：[点击查看链接](http://caniuse.com/#feat=viewport-units)

* * *

## 回答 #16

> 赞同：18
> 
> 时间：2008-09-18T06:01:58.840

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Test</title>
<style type="text/css">
body
,html
{
    height: 100%;
    margin: 0;
    padding: 0;
    color: #FFF;
}

#header
{
    float: left;
    width: 100%;
    background: red;
}

#content
{
    height: 100%;
    overflow: auto;
    background: blue;
}

</style>
</head>
<body>

    <div id="content">
        <div id="header">
                Header
                <p>Header stuff</p>
        </div>
            Content
            <p>Content stuff</p>
    </div>

</body>
</html> 
```

在所有健全的浏览器中，您可以将“标题” div 作为同级放在内容之前，并且相同的 CSS 将起作用。但是，如果在这种情况下浮动为 100%，则 IE7- 不会正确解释高度，因此标题需要在内容中，如上所述。overflow: auto 将导致 IE 上的双滚动条（它始终使视口滚动条可见，但已禁用），但没有它，如果内容溢出，内容将被剪辑。

* * *

## 回答 #17

> 赞同：16
> 
> 时间：2013-05-03T10:55:31.650

如果您可以处理不支持旧浏览器（即 MSIE 9 或更早版本）的问题，您可以使用已经是 W3C CR的[灵活框布局模块来做到这一点。](http://caniuse.com/#feat=flexbox)该模块还允许其他一些不错的技巧，例如重新排序内容。

不幸的是，MSIE 9 或更低版本不支持此功能，您必须为除 Firefox 之外的每个浏览器的 CSS 属性使用供应商前缀。希望其他供应商也能尽快放弃该前缀。

另一种选择是[CSS 网格布局](http://caniuse.com/#search=grid)，但稳定版本的浏览器对它的支持更少。实际上，只有 MSIE 10 支持这一点。

**2020 年更新**：所有现代浏览器都支持`display: flex`和`display: grid`. 唯一缺少的是`subgrid`仅由 Firefox 支持的支持。请注意，规范不支持 MSIE，但如果您愿意添加特定于 MSIE 的 CSS hack，则可以使其正常运行。我建议直接忽略 MSIE，因为即使微软也表示不应该再使用它。Microsoft Edge 很好地支持这些功能（除了子网格支持，因为它与 Chrome 共享 Blink 渲染引擎）。

**使用示例`display: grid`：**

```
html, body
{
  min-height: 100vh;
  padding: 0;
  margin: 0;
}

body
{
  display: grid;
  grid:
    "myheader" auto
    "mymain" minmax(0,1fr)
    "myfooter" auto /
    minmax(10rem, 90rem);
}

header
{
  grid-area: myheader;
  background: yellow;
}

main
{
  grid-area: mymain;
  background: pink;
  align-self: center
    /* or stretch
      + display: flex;
      + flex-direction: column;
      + justify-content: center; */
}

footer
{
  grid-area: myfooter;
  background: cyan;
}
```

```
<header>Header content</header>
<main>Main content which should be centered and the content length may change.
<details><summary>Collapsible content</summary>
<p>Here's some text to cause more vertical space to be used.</p>
<p>Here's some text to cause more vertical space to be used (2).</p>
<p>Here's some text to cause more vertical space to be used (3).</p>
<p>Here's some text to cause more vertical space to be used (4).</p>
<p>Here's some text to cause more vertical space to be used (5).</p>
</details>
</main>
<footer>Footer content</footer>
```

**使用示例`display: flex`：**

```
html, body
{
  min-height: 100vh;
  padding: 0;
  margin: 0;
}

body
{
  display: flex; 
}

main
{
  background: pink;
  align-self: center;
}
```

```
<main>Main content which should be centered and the content length may change.
<details><summary>Collapsible content</summary>
<p>Here's some text to cause more vertical space to be used.</p>
<p>Here's some text to cause more vertical space to be used (2).</p>
<p>Here's some text to cause more vertical space to be used (3).</p>
<p>Here's some text to cause more vertical space to be used (4).</p>
<p>Here's some text to cause more vertical space to be used (5).</p>
</details>
</main>
```

* * *

## 回答 #18

> 赞同：16
> 
> 时间：2020-02-25T21:16:34.167

**在引导程序中：**

CSS 样式：

```
html, body {
    height: 100%;
} 
```

* * *

*1）只需填充剩余屏幕空间的高度：*

```
<body class="d-flex flex-column">
  <div class="d-flex flex-column flex-grow-1">

    <header>Header</header>
    <div>Content</div>
    <footer class="mt-auto">Footer</footer>

  </div>
</body> 
```

[![![在此处输入图像描述](https://i.stack.imgur.com/3vE98m.png)](https://i.stack.imgur.com/3vE98m.png)

* * *

*2）填充剩余屏幕空间的高度并将内容对齐到父元素的中间：*

```
<body class="d-flex flex-column">
  <div class="d-flex flex-column flex-grow-1">

    <header>Header</header>
    <div class="d-flex flex-column flex-grow-1 justify-content-center">Content</div>
    <footer class="mt-auto">Footer</footer>

  </div>
</body> 
```

[![![在此处输入图像描述](https://i.stack.imgur.com/P9o0fm.png)](https://i.stack.imgur.com/P9o0fm.png)

* * *

## 回答 #19

> 赞同：14
> 
> 时间：2017-07-04T14:27:17.003

[**CSS 网格解决方案**](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout)

只需定义`body`with`display:grid`和`grid-template-rows`using`auto`以及`fr`value 属性。

```
* {
  margin: 0;
  padding: 0;
}

html {
  height: 100%;
}

body {
  min-height: 100%;
  display: grid;
  grid-template-rows: auto 1fr auto;
}

header {
  padding: 1em;
  background: pink;
}

main {
  padding: 1em;
  background: lightblue;
}

footer {
  padding: 2em;
  background: lightgreen;
}

main:hover {
  height: 2000px;
  /* demos expansion of center element */
}
```

```
<header>HEADER</header>
<main>MAIN</main>
<footer>FOOTER</footer>
```

[**网格完整指南 @ CSS-Tricks.com**](https://css-tricks.com/snippets/css/complete-guide-grid/)

* * *

## 回答 #20

> 赞同：12
> 
> 时间：2011-06-20T09:36:23.250

我为此挣扎了一段时间，最终得到以下结果：

由于很容易使内容 DIV 与父级高度相同，但显然很难使其父级高度减去标题高度，我决定将内容 div 设为全高，但将其绝对定位在左上角，然后定义填充对于具有标题高度的顶部。这样，内容会整齐地显示在标题下方并填充整个剩余空间：

```
body {
    padding: 0;
    margin: 0;
    height: 100%;
    overflow: hidden;
}

#header {
    position: absolute;
    top: 0;
    left: 0;
    height: 50px;
}

#content {
    position: absolute;
    top: 0;
    left: 0;
    padding-top: 50px;
    height: 100%;
} 
```

* * *

## 回答 #21

> 赞同：11
> 
> 时间：2012-02-20T09:21:45.677

为什么不只是这样？

```
html, body {
    height: 100%;
}

#containerInput {
    background-image: url('../img/edit_bg.jpg');
    height: 40%;
}

#containerControl {
    background-image: url('../img/control_bg.jpg');
    height: 60%;
} 
```

给你 html 和 body（按这个顺序）一个高度，然后给你的元素一个高度？

为我工作

* * *

## 回答 #22

> 赞同：11
> 
> 时间：2020-04-14T21:12:21.180

这是我自己的 Pebbl 解决方案的最小版本。花了很长时间才找到让它在 IE11 中工作的技巧。（也在 Chrome、Firefox、Edge 和 Safari 中进行了测试。）

```
html {
  height: 100%;
}

body {
  height: 100%;
  margin: 0;
}

section {
  display: flex;
  flex-direction: column;
  height: 100%;
}

div:first-child {
  background: gold;
}

div:last-child {
  background: plum;
  flex-grow: 1;
}
```

```
<body>
  <section>
    <div>FIT</div>
    <div>GROW</div>
  </section>
</body>
```

* * *

## 回答 #23

> 赞同：9
> 
> 时间：2013-07-05T21:17:02.580

您实际上可以使用`display: table`将区域拆分为两个元素（标题和内容），其中标题的高度可以不同，而内容会填充剩余空间。这适用于整个页面，以及当该区域只是`position`设置为或定位的另一个元素的内容`relative`时。只要父元素的高度不为零，它就会起作用。`absolute``fixed`

[请参阅此小提琴](http://jsfiddle.net/amiramix/aD6gE/)以及以下代码：

CSS：

```
body, html {
    height: 100%;
    margin: 0;
    padding: 0;
}

p {
    margin: 0;
    padding: 0;
}

.additional-padding {
    height: 50px;
    background-color: #DE9;
}

.as-table {
    display: table;
    height: 100%;
    width: 100%;
}

.as-table-row {
    display: table-row;
    height: 100%;
}

#content {
    width: 100%;
    height: 100%;
    background-color: #33DD44;
} 
```

HTML：

```
<div class="as-table">
    <div id="header">
        <p>This header can vary in height, it also doesn't have to be displayed as table-row. It will simply take the necessary space and the rest below will be taken by the second div which is displayed as table-row. Now adding some copy to artificially expand the header.</p>
        <div class="additional-padding"></div>
    </div>
    <div class="as-table-row">
        <div id="content">
            <p>This is the actual content that takes the rest of the available space.</p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #24

> 赞同：9
> 
> 时间：2018-03-23T10:43:44.473

```
 style="height:100vh" 
```

为我解决了这个问题。就我而言，我将此应用于所需的 div

* * *

## 回答 #25

> 赞同：7
> 
> 时间：2008-09-18T17:52:16.683

文森特，我会用你的新要求再次回答。由于您不关心内容是否太长而被隐藏，因此您不需要浮动标题。只需将溢出隐藏在 html 和 body 标签上，并将`#content`高度设置为 100%。内容将始终比视口长标题的高度，但它会被隐藏并且不会导致滚动条。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Test</title>
    <style type="text/css">
    body, html {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
      color: #FFF;
    }
    p {
      margin: 0;
    }

    #header {
      background: red;
    }

    #content {
      position: relative;
      height: 100%;
      background: blue;
    }

    #content #positioned {
      position: absolute;
      top: 0;
      right: 0;
    }
  </style>
</head>

<body>
  <div id="header">
    Header
    <p>Header stuff</p>
  </div>

  <div id="content">
    Content
    <p>Content stuff</p>
    <div id="positioned">Positioned Content</div>
  </div>

</body>
</html> 
```

* * *

## 回答 #26

> 赞同：7
> 
> 时间：2017-02-01T15:59:23.563

对于移动应用程序，我只使用 VH 和 VW

```
<div class="container">
    <div class="title">Title</div>
    <div class="content">Content</div>
    <div class="footer">Footer</div>
</div> 
```

```
.container {
    width: 100vw;
    height: 100vh;
    font-size: 5vh;
}

.title {
    height: 20vh;
    background-color: red;
}

.content {
    height: 60vh;
    background: blue;
}

.footer {
    height: 20vh;
    background: green;
} 
```

演示 - [https://jsfiddle.net/u763ck92/](https://jsfiddle.net/u763ck92/)

* * *

## 回答 #27

> 赞同：5
> 
> 时间：2013-04-27T11:45:48.100

试试这个

```
var sizeFooter = function(){
    $(".webfooter")
        .css("padding-bottom", "0px")
        .css("padding-bottom", $(window).height() - $("body").height())
}
$(window).resize(sizeFooter); 
```

* * *

## 回答 #28

> 赞同：5
> 
> 时间：2016-08-25T16:13:25.543

我遇到了同样的问题，但我无法使用上面的 flexbox 解决方案。所以我创建了自己的模板，其中包括：

*   具有固定大小元素的标题
*   页脚
*   带有占据剩余高度的滚动条的侧边栏
*   内容

我使用了 flexbox，但以更简单的方式，仅使用属性**display: flex**和**flex-direction: row|column**：

我确实使用 angular 并且我希望我的组件大小是其父元素的 100%。

关键是为所有父母设置大小（以百分比为单位），以限制他们的大小。在以下示例中，myapp 高度具有 100% 的视口。

主要组件有 90% 的视口，因为页眉和页脚有 5%。

我在这里发布了我的模板：[https ://jsfiddle.net/abreneliere/mrjh6y2e/3](https://jsfiddle.net/abreneliere/mrjh6y2e/3)

```
 body{
        margin: 0;
        color: white;
        height: 100%;
    }
    div#myapp
    {
        display: flex;
        flex-direction: column;
        background-color: red; /* <-- painful color for your eyes ! */
        height: 100%; /* <-- if you remove this line, myapp has no limited height */
    }
    div#main /* parent div for sidebar and content */
    {
        display: flex;
        width: 100%;
        height: 90%; 
    }
    div#header {
        background-color: #333;
        height: 5%;
    }
    div#footer {
        background-color: #222;
        height: 5%;
    }
    div#sidebar {
        background-color: #666;
        width: 20%;
        overflow-y: auto;
     }
    div#content {
        background-color: #888;
        width: 80%;
        overflow-y: auto;
    }
    div.fized_size_element {
        background-color: #AAA;
        display: block;
        width: 100px;
        height: 50px;
        margin: 5px;
    } 
```

html:

```
<body>
<div id="myapp">
    <div id="header">
        HEADER
        <div class="fized_size_element"></div>

    </div>
    <div id="main">
        <div id="sidebar">
            SIDEBAR
            <div class="fized_size_element"></div>
            <div class="fized_size_element"></div>
            <div class="fized_size_element"></div>
            <div class="fized_size_element"></div>
            <div class="fized_size_element"></div>
            <div class="fized_size_element"></div>
            <div class="fized_size_element"></div>
            <div class="fized_size_element"></div>
        </div>
        <div id="content">
            CONTENT
        </div>
    </div>
    <div id="footer">
        FOOTER
    </div>
</div>
</body> 
```

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2012-09-14T08:02:34.660

我找到了一个非常简单的解决方案，因为对我来说这只是一个设计问题。我希望页面的其余部分在红色页脚下方不是白色的。所以我将页面背景颜色设置为红色。并且内容背景颜色为白色。内容高度设置为例如。20em 或 50% 几乎是空的页面不会使整个页面变红。

* * *

## 回答 #30

> 赞同：4
> 
> 时间：2016-07-01T20:53:17.980

分拆外星人先生的想法...

对于支持 CSS3 的浏览器，这似乎比流行的 flex box 更简洁。

只需将 min-height（而不是 height）与 calc() 一起用于内容块。

calc() 从 100% 开始并减去页眉和页脚的高度（需要包括填充值）

使用“min-height”而不是“height”特别有用，因此它可以与 javascript 呈现的内容和 Angular2 等 JS 框架一起使用。否则，一旦 javascript 呈现的内容可见，计算将不会将页脚推到页面底部。

这是一个使用 50px 高度和 20px 填充的页眉和页脚的简单示例。

html:

```
<body>
    <header></header>
    <div class="content"></div>
    <footer></footer>
</body> 
```

CSS：

```
.content {
    min-height: calc(100% - (50px + 20px + 20px + 50px + 20px + 20px));
} 
```

当然，数学可以简化，但你明白了......

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2020-10-15T14:58:47.173

使用[CSS Grid的另一种解决方案](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout)

定义网格

```
.root {
  display: grid;
  grid-template-rows: minmax(60px, auto) minmax(0, 100%);
} 
```

第一行（标题）：可以设置最小高度，最大高度将取决于内容。第二行（内容）将尝试适应标题后留下的可用空间。

这种方法的优点是内容可以独立于标题滚动，因此标题始终位于页面顶部

```
body, html {
  margin: 0;
  height: 100%;
}

.root {
  display: grid;
  grid-template-rows: minmax(60px, auto) minmax(0, 100%);
  height: 100%;
}

.header {
  background-color: lightblue;
}

button {
  background-color: darkslateblue;
  color: white;
  padding: 10px 50px;
  margin: 10px 30px;
  border-radius: 15px;
  border: none;
}

.content {
  background-color: antiquewhite;
  overflow: auto;
}

.block {
  width: calc(100% - 20px);
  height: 120px;
  border: solid aquamarine;
  margin: 10px;
}
```

```
<div class="root">
  <div class="header">
    <button>click</button>
    <button>click</button>
    <button>click</button>
    <button>click</button>
    <button>click</button>
  </div>
  <div class="content">
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
    <div class="block"></div>
</div>
  <div class="footer"></div>
</div>
```

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2021-03-08T05:03:38.680

这是一个使用网格的答案。

```
.the-container-div {
  display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: auto min-content;
  height: 100vh;
}
.view-to-remain-small {
  grid-row: 2;
}

.view-to-be-stretched {
  grid-row: 1
} 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2016-10-13T02:28:18.047

它是动态计算挖掘屏幕空间的，最好使用Javascript。

您可以使用 CSS-IN-JS 技术，如下库：

[https://github.com/cssobj/cssobj](https://github.com/cssobj/cssobj)

演示：[https ://cssobj.github.io/cssobj-demo/](https://cssobj.github.io/cssobj-demo/)

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2021-11-11T00:47:12.630

我的一些组件是动态加载的，这导致我无法设置导航栏的高度。

我所做的是使用[ResizeObserver API](https://developer.mozilla.org/en-US/docs/Web/API/Resize_Observer_API)。

```
function observeMainResize(){
   const resizeObserver = new ResizeObserver(entries => {
      for (let entry of entries) {
         $("nav").height(Math.max($("main").height(),
                                  $("nav") .height()));
      }
   });
   resizeObserver.observe(document.querySelector('main'));
} 
```

然后：

```
...
<body onload="observeMainResize()">
   <nav>...</nav>
   <main>...</main>
... 
```

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2022-02-21T08:49:46.707

一个不错的技巧是将 css 边距属性设置为“自动”。这将使 div 占据所有剩余的 height & width 。

缺点是它会被计算为 margin 而不是 content 。

请参阅随附的屏幕截图：

[![之前1](https://i.stack.imgur.com/jLDC2.png)](https://i.stack.imgur.com/jLDC2.png) [![之前2](https://i.stack.imgur.com/hoFa7.png)](https://i.stack.imgur.com/hoFa7.png)

[![之后1](https://i.stack.imgur.com/SulwP.png)](https://i.stack.imgur.com/SulwP.png)

[![之后2](https://i.stack.imgur.com/tw7n7.png)](https://i.stack.imgur.com/tw7n7.png)

* * *

## 回答 #36

> 赞同：-2
> 
> 时间：2011-08-06T03:30:33.450

它**从来没有以其他方式对我有用，然后使用**NICCAI 在第一个答案中建议的 JavaScript。我正在使用这种方法来重新调整`<div>`与谷歌地图。

这是如何做到这一点的完整示例（适用于 Safari/FireFox/IE/iPhone/Andorid（适用于旋转））：

CSS

```
body {
  height: 100%;
  margin: 0;
  padding: 0;
}

.header {
  height: 100px;
  background-color: red;
}

.content {
  height: 100%;
  background-color: green;
} 
```

JS

```
function resize() {
  // Get elements and necessary element heights
  var contentDiv = document.getElementById("contentId");
  var headerDiv = document.getElementById("headerId");
  var headerHeight = headerDiv.offsetHeight;

  // Get view height
  var viewportHeight = document.getElementsByTagName('body')[0].clientHeight;

  // Compute the content height - we want to fill the whole remaining area
  // in browser window
  contentDiv.style.height = viewportHeight - headerHeight;
}

window.onload = resize;
window.onresize = resize; 
```

HTML

```
<body>
  <div class="header" id="headerId">Hello</div>
  <div class="content" id="contentId"></div>
</body> 
```

* * *

## 回答 #37

> 赞同：-4
> 
> 时间：2021-03-03T23:56:21.787

如果您使用 display: flex 在父 div 上，您所要做的就是简单地将高度设置为拉伸或填充，如下所示

```
.divName {
    height: stretch
} 
```

# javascript - IE 6 中 Ext.Panel bbar 的宽度问题

> ID：90181
> 
> 赞同：1
> 
> 时间：2008-09-18T05:06:52.670
> 
> 标签：javascript, internet-explorer, extjs

我刚刚在使用 ExtJS 框架的 IE6 中遇到了显示故障。- 希望有人能指出我正确的方向。

在下面的示例中，面板的 bbar 在 IE6 中显示为比它附加到的面板（左对齐）窄 2ems，而在 Firefox 中它显示为与面板相同的宽度。

谁能建议如何解决这个问题？

我似乎可以通过以 ems 为单位指定面板的宽度或以像素为单位的填充来解决问题，但我认为它会像我在下面那样工作。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <link rel="stylesheet" type="text/css" href="ext/resources/css/ext-all.css"/>
    <script type="text/javascript" src="ext/ext-base.js"></script>
    <script type="text/javascript" src="ext/ext-all-debug.js"></script>
    <script type="text/javascript">

    Ext.onReady(function(){        
        var main = new Ext.Panel({
            renderTo: 'content',
            bodyStyle: 'padding: 1em;',
            width: 500,
            html: "Alignment issue in IE - The bbar's width is 2ems less than the main panel in IE6.",
            bbar: [
                    "->",
                {id: "continue", text: 'Continue'}
            ]
        });
    });

    </script>
</head>
<body>
    <div id="content"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-18T16:32:24.673

也许您应该尝试强制 bbar 的宽度：

```
main.getBottomToolbar().setWidth(500) 
```

面板创建后？

但我认为问题在于 bbar 被渲染到`div`面板的内部，因此不同的浏览器对外部填充的解释不同。

您也可以尝试将`padding`bbar 设置为`-1em`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T17:09:05.240

问题来自自定义 bodyStyle 填充。它使面板内容变大，但不使工具栏变大。

一种可能的解决方案是进一步嵌套一个 Ext 面板，例如：

```
 var main = new Ext.Panel({
        renderTo: 'content',
        width: 500,
        items: {
            bodyStyle: 'padding: 1em;',
            border: false,
            html: "Now alignment is fine."
        },
        bbar: [
                "->",
            {id: "continue", text: 'Continue'}
        ]
    }); 
```

需要使用border: false 来避免双边框。

# algorithm - 汇编语言中的伪随机生成器

> ID：90184
> 
> 赞同：6
> 
> 时间：2008-09-18T05:07:49.937
> 
> 标签：algorithm, assembly, prng

我需要一个用于课程中分配的汇编程序的伪随机数生成器算法，我更喜欢一个简单的算法。但是，我不能使用外部库。

什么是用于组装的好的、简单的伪随机数生成器算法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-18T05:12:15.543

简单的方法是只选择两个大的相对素数 a 和 b，然后继续将随机数乘以 a 并添加 b。使用模运算符将低位保留为随机数，并为下一次迭代保留完整值。

该算法被称为[线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-18T05:23:20.570

[The Art of Computer Programming](http://en.wikipedia.org/wiki/The_Art_of_Computer_Programming)第 2 卷有很多关于伪随机数生成的信息。这些算法在汇编程序中进行了演示，因此您可以自己查看汇编程序中最简单的算法。

但是，如果您可以链接到外部库或目标文件，那将是您最好的选择。然后你可以链接到，例如，[Mersenne Twister](http://en.wikipedia.org/wiki/Mersenne_Twister)。

请注意，大多数伪随机数生成器对于密码学来说是*不安全*的，因此如果您需要安全的随机数生成，您需要超越基本算法（并且可能应该利用特定于操作系统的加密 API）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-18T13:32:49.177

用于测试的简单代码，不要与 Crypto 一起使用

来自测试计算机软件，第 138 页

是 32 位数学，你不需要操作 `MOD 2^32`

```
RNG = (69069*RNG + 69069) MOD 2^32 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T18:47:50.463

好吧 - 由于我没有看到对旧的线性反馈移位寄存器的引用，我发布了一些基于 SSE 内在 C 代码。只是为了完整性。几个月前我写了那件事来再次提高我的 SSE 技能。

```
#include <emmintrin.h>

static __m128i LFSR;

void InitRandom (int Seed)
{
  LFSR = _mm_cvtsi32_si128 (Seed);
}

int GetRandom (int NumBits)
{
  __m128i seed = LFSR;
  __m128i one  = _mm_cvtsi32_si128(1);
  __m128i mask; 
  int i;

  for (i=0; i<NumBits; i++)
  {

    // generate xor of adjecting bits
    __m128i temp = _mm_xor_si128(seed, _mm_srli_epi64(seed,1));

    // generate xor of feedback bits 5,6 and 62,61
    __m128i NewBit = _mm_xor_si128( _mm_srli_epi64(temp,5),
                                    _mm_srli_epi64(temp,61));

    // Mask out single bit: 
    NewBit = _mm_and_si128 (NewBit, one);

    // Shift & insert new result bit:
    seed = _mm_or_si128 (NewBit, _mm_add_epi64 (seed,seed));
  }

  // Write back seed...
  LFSR = seed;

  // generate mask of NumBit ones.
  mask = _mm_srli_epi64 (_mm_cmpeq_epi8(seed, seed), 64-NumBits);

  // return random number:
  return _mm_cvtsi128_si32 (_mm_and_si128(seed,mask));
} 
```

将此代码翻译成汇编程序是微不足道的。只需用真正的 SSE 指令替换内在函数并在其周围添加一个循环。

顺便说一句 - 此代码生成的序列在 4.61169E+18 个数字之后重复。这比您通过主要方法和 32 位算术获得的要多得多。如果展开它也会更快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T20:21:31.800

@jjrv
您所描述的实际上是一个线性同群生成器。最随机位是最高位。要从 0..N-1 中获得一个数字，请将完整值乘以 N（32 位乘以 32 位，得到 64 位）并使用高 32 位。

您不应该只为**a**使用任何数字（从一个完整值到下一个完整值的乘数），Knuth 中推荐的数字（表 1 第 3.3.4 节 TAOCP vol 2 1981）是 1812433253、1566083941、69069 和 1664525。

**您可以为b** 选择任何奇数。（补充）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-25T21:25:47.493

为什么不使用外部库？？？那个轮子已经发明了几百次了，为什么还要再做一次呢？

如果您需要自己实现 RNG，您是否需要按需生成数字 - 即您是否正在实现 rand() 函数 - 或者您是否需要生成随机数流 - 例如用于内存测试？

你需要一个加密强度的 RNG 吗？在它重复之前需要多长时间？您是否必须绝对、肯定地保证所有位的均匀分布？

这是我几年前使用的简单技巧。我在嵌入式工作，我需要在上电时测试 RAM，我想要非常小的、快速的代码和非常少的状态，我这样做了：

*   从种子的任意 4 字节常量开始。
*   计算这 4 个字节的 32 位 CRC。这给了你接下来的 4 个字节
*   将这 4 个字节反馈到 CRC32 算法中，就好像它们已被附加一样。这 8 个字节的 CRC32 是下一个值。
*   只要你愿意，就重复。

这需要很少的代码（尽管您需要一个用于 crc32 函数的表）并且具有很少的状态，但是伪随机输出流在重复之前有很长的循环时间。此外，它不需要处理器上的 SSE。假设您手边有 CRC32 函数，那么实现起来很简单。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-11-17T06:53:54.583

使用masm615编译：

```
delay_function macro
    mov cx,0ffffh
.repeat
    push cx
    mov cx,0f00h
    .repeat
        dec  cx
        .until cx==0
    pop cx
    dec cx
    .until cx==0
endm

random_num macro
   mov  cx,64    ;assum we want to get 64 random numbers
   mov  si,0

get_num:    
   push cx
   delay_function    ;since cpu clock is fast,so we use delay_function
   mov  ah,2ch  
   int  21h
   mov  ax,dx     ;get clock 1/100 sec
   div  num       ;assume we want to get a number from 0~num-1
   mov  arry[si],ah   ;save to array you set
   inc  si
   pop  cx
   loop get_num   ;here we finish the get_random number 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-18T05:22:40.760

您也可以使用不同位之间的 XOR 和元素来模拟移位寄存器，这将为您提供伪随机数字序列。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-18T16:51:10.667

线性同余 (X = AX+C mod M) PRNG 可能是分配给汇编程序课程的好方法，因为您的学生必须处理 2^31 以上的中间 AX 结果的进位并计算模数。如果您是学生，它们在汇编程序中实现起来相当简单，并且可能是讲师的想法。

# svn - 我可以使用 Subversion 可靠地合并两个 Microsoft Word 文档吗？

> ID：90202
> 
> 赞同：25
> 
> 时间：2008-09-18T05:09:44.160
> 
> 标签：svn, merge, ms-word

我们对 Word 文档进行并发编辑，我想确保 Subversion 可以处理合并 .doc 文件。你知道 Subversion 是否能很好地处理 Word 文档的合并吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-18T05:12:47.507

使用[TortoiseSVN](http://tortoisesvn.tigris.org/)合并实用程序和[xdocdiff](http://freemind.s57.xrea.com/xdocdiff/e/index.html)插件来比较和合并 Office 文档

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-18T05:23:35.267

您可以在其默认安装中使用[TortoiseSVN](http://tortoisesvn.net/node/152)来查看差异并执行 Word 文档的合并，它只是打开 Word 并使用 Word 自己的审阅/更改模式来执行此操作。

编辑：默认情况下，它还具有针对 PowerPoint、Excel、OpenOffice 和 StarOffice 格式的不同功能。（检查 TortoiseSVN\Diff-Scripts 目录）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-18T05:13:51.530

我会将[svn:needs-lock](http://svnbook.red-bean.com/en/1.5/svn.advanced.locking.html)属性添加到存储在 Subversion 中的 Word 文档中，这样人们就需要在编辑之前锁定文件。这将大大有助于防止合并冲突。

这就是我们在工作中所做的，而且效果很好。（我们没有选择必须使用 Word 文档，因此这个解决方案而不是更改文件类型。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T05:11:22.347

Word 文档是二进制的，所以不是。编辑人员是否知识渊博，可以教他们如何使用像 reStructuredText 或 LaTeX 这样的纯文本格式？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T05:11:24.983

否：由于 Word 使用二进制文件格式，svn 根本无法合并文件。

但是，Word 本身具有合并功能。如果您必须解决合并冲突，您可以尝试这样做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-27T02:40:07.650

您可以使用 Word（另存为 .. XML 文档）将 docx 文档保存为“平面 OPC”XML 格式。

这样你就得到了一个纯文本文件。

不过，您需要注意的是，关系 ID 不会被破坏。

例如：

*   用户 A 向文档添加图像（或超链接、评论或脚注等），并执行 svn 提交。

*   用户 B（没有 svn 更新）在 Word 中添加其中一项，另存为 xml，然后进行 svn 更新。

此时用户 B 不太可能在 Word 中打开文档，因此他最好不要提交。如果您可以对此进行控制，或者准备手动解决问题，那么您会没事的。

否则，您可以考虑像我的 Plutext 协作软件，它在 Alfresco 中分解文档并对其组成部分进行版本化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T05:27:32.447

您也可以考虑使用非二进制格式，如 Html

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-05T09:48:50.067

我目前正在开发一个使用 SharpSVN 连接到存储库的 Word 插件。在当前状态下，创建和选择新文档有点复杂，但这不应该是一个大问题。

因此，当您（最终）在存储库中有一个文档时，提交和从任何修订进行更新都非常简单。您可以将这些 .docx 文件与 Word 的内置比较或合并功能进行比较和合并。其实很简单。希望在接下来的几周左右完成。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-10T17:31:11.033

您不能使用 Subversion 自动合并 Word 文档。没有 3 路合并支持（即使使用 Tortoise SVN）。如果您不使用 Word，则可以使用在线文档编辑器，例如[Revisionator](https://revisionator.com)。它支持所见即所得文档的三向合并。还有其他版本控制功能（差异、分叉等）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-04-11T13:34:30.283

此页面 [http://newgeeks.blogspot.com/2006/08/word-document-management-using-svn.html](http://newgeeks.blogspot.com/2006/08/word-document-management-using-svn.html) 逐步提供有关如何使用 totoiseSVN 进行 Microsoft Word 文档版本管理的信息。

# linux - gcc优化级别有什么区别？

> ID：90203
> 
> 赞同：24
> 
> 时间：2008-09-18T05:10:12.910
> 
> 标签：linux, gcc

GCC中不同的优化级别有什么区别？假设我不在乎有任何调试钩子，我为什么不只使用我可用的最高级别的优化呢？更高级别的优化是否必然（即可证明）生成更快的程序？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-18T05:20:34.757

是的，更高的级别有时可能意味着性能更好的程序。但是，根据您的代码，它可能会导致问题。例如，分支预测（在 -O1 和更高版本中启用）可以通过导致竞争条件来破坏编写不佳的多线程程序。优化实际上会决定比你写的更好的东西，这在某些情况下可能不起作用。

有时，更高的优化（-O3）并没有增加合理的好处，而是增加了很多额外的大小。您自己的测试可以确定这种大小权衡是否为您的系统带来了合理的性能增益。

最后一点，GNU 项目[默认在 -O2](http://www.network-theory.co.uk/docs/gccintro/gccintro_49.html)编译他们的所有程序，而 -O2 在其他地方相当常见。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-09-18T05:15:00.217

通常优化级别高于`-O2`（仅`-O3`针对 gcc，但其他编译器具有更高级别）包括可以增加代码大小的优化。这包括循环展开、大量内联、对齐填充（无论大小）等。其他编译器提供高于 的​​向量化和过程间优化`-O3`，以及某些可以以正确性为代价大大提高速度的优化（例如，使用更快、不太准确的数学例程）。在使用这些东西之前检查文档。

至于性能，这是一个权衡。通常，编译器设计者会尝试调整这些东西，以免它们降低代码的性能，因此`-O3`通常会有所帮助（至少在我的经验中），但您的里程可能会有所不同。真正激进的大小改变优化并不总是会提高性能（例如，真正激进的内联会导致缓存污染）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-18T05:16:19.200

我找到了一个[网页](http://www.network-theory.co.uk/docs/gccintro/gccintro_49.html)，其中包含有关不同优化级别的一些信息。记得在某处听到的一件事是优化实际上可能会破坏您的程序，这可能是一个问题。但我不确定这个问题有多大。也许今天的编译器足够聪明来处理这些问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-30T11:54:34.270

边注：

很难准确预测`-O`gcc 命令行上针对不同版本和平台的全局指令打开了哪些标志，并且 GCC 站点上的所有文档可能很快就会过时，或者没有足够详细地涵盖编译器内部.

当您使用其中一个`-O`标志和其他`-f`标志和/或它们的组合时，这是一种简单的方法来准确检查特定设置中发生的情况：

1.  在某处创建一个空的源文件：
    `touch dummy.c`
2.  尽管编译器通过了，但运行它，就像你通常会使用的那样，使用你通常使用的 all`-O`和`-f`/或`-m`标志，但添加`-Q -v`到命令行：
    `gcc -c -Q -v dummy.c`
3.  检查生成的输出，也许将其保存以供不同的运行。
4.  根据自己的喜好更改命令行，删除生成的目标文件`rm -f dummy.o`并重新运行。

另外，请始终牢记，从纯粹主义者的角度来看，大多数非平凡优化会生成“损坏”代码（其中损坏定义为在极端情况下偏离最佳路径），因此选择是否启用某个一组优化机制有时归结为选择编译器输出的正确性级别。在任何编译器的优化器中总是存在（并且目前存在）错误 - 只需检查 GCC 邮件列表和 Bugzilla 以获取一些示例。编译器优化只能在实际执行测量后使用，因为

*   使用更好的算法所获得的收益将使编译器优化的任何收益相形见绌，
*   优化将在蓝月亮中运行一次的代码是没有意义的，
*   如果优化器引入了错误，那么您的代码运行速度有多快并不重要。

# memory - 为什么将内存区域标记为非缓存？

> ID：90204
> 
> 赞同：14
> 
> 时间：2008-09-18T05:10:19.667
> 
> 标签：memory, caching, embedded

在嵌入式应用程序中，我们有一个表格，描述了在目标板上有效的各种地址范围。此表用于设置 MMU。
RAM 地址范围标记为可​​缓存，但其他区域标记为不可缓存。这是为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-18T05:15:03.680

这样做是为了使处理器不会因为缓存而使用过时的值。当您访问（常规）缓存 RAM 时，处理器可以“记住”您访问的值。下次您查看相同的内存位置时，处理器将返回它记住的值，而无需查看 RAM。这是缓存。

如果位置的内容可以在处理器不知道的情况下发生变化，如果您有一个内存映射设备（例如，FPGA 返回一些数据包），处理器可能会返回上次“记住”的值，这会错的。

为避免此问题，您将该地址空间标记为不可缓存。这确保处理器不会尝试记住该值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-18T05:12:13.780

不应缓存用于 DMA 或其他硬件交互的任何内存区域。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-18T15:16:18.490

如果一个内存区域同时被硬件和软件访问（例如：硬件配置寄存器或 DMA 的分散聚集列表），这个区域**必须**定义为非缓存。对于实际的 DMA，内存缓冲区可以定义为缓存，在大多数情况下，建议缓存缓冲区以允许应用程序级快速访问该缓冲区。在将缓冲区传递给 DMA 或应用程序之前刷新/使缓存无效是驱动程序的责任。

如果我们有专门的硬件，即高速缓存一致性互连（CCI），它将同步各种硬件块对内存的访问，上面的小更新**肯定是不正确的。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T05:11:51.737

也许它用于内存映射 I/O？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-02T02:45:47.790

考虑到缓存一致性。假设内存中有一个位置 X 可以被设备使用 DMA 访问，因此当设备向 X 写入新值时，cpu 不会被察觉。如果 cpu 之前缓存过 X 的内容，当 cpu 需要该值时，它会从缓存中获取。在这种情况下，cpu 会获得陈旧的值。同样，使用 DMA 的设备也可能读取过时的值。

来自 wiki [Direct_memory_access](https://en.wikipedia.org/wiki/Direct_memory_access)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-28T07:14:23.390

现代控制器可以将 L2 缓存用于 DMA，这意味着它们保留了用于 DMA 访问的缓存内存区域的一致性。这也称为由控制器（通过 DMA）执行的“可窥探内存事务”。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-09-18T21:49:14.507

有些区域如 Flash 可以在一个周期内读取，因此不需要缓存。

# macos - 远程连接到 Mac 的最佳方式是什么？

> ID：90217
> 
> 赞同：19
> 
> 时间：2008-09-18T05:12:44.683
> 
> 标签：macos, controls, desktop

我正在尝试远程控制 Macintosh 计算机。我知道在 Windows 世界中，您可以使用远程桌面从一台 Windows 计算机连接到另一台 Windows 计算机。这工作相对较好。

我知道您可以使用 VNC 服务器，但这并不总是最安全或提供最佳性能的。是否有其他选项可用于远程连接到 Mac？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-18T05:19:12.123

如果您尝试从一台 (Leopard) Mac 连接到另一台，您可以使用内置的屏幕共享功能；从“共享系统首选项”窗格中打开服务器，然后使用网络浏览器（在 LAN 上）或只打开一个 vnc:// URL。

如果您要管理大量 Mac，请尝试使用 Apple 的[远程桌面](http://www.apple.com/remotedesktop/)(ARD) 软件；它以 10 和无限客户端版本出售，所以如果你的 Mac 少于 5 台左右，它可能不值这个钱。ARD 的客户端位是 OS X 的一部分。屏幕共享和 ARD 使用相同的协议，其中包括一些 Apple 专有的 VNC 扩展，它们进行加密（所有数据，或只是击键/密码信息）并支持自适应 JPEG压缩，它可以为您提供足够好的性能（可用，但不幸的是，不像 RDP 或 NX）。

如果您需要跨平台的东西，请查看[Timbuktu](http://www.netopia.com/software/products/tb2/)和[TeamViewer](http://www.teamviewer.com/index.aspx)（它们可以穿透防火墙等）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-18T05:32:02.843

在某些情况下， [Copilot](https://www.copilot.com/)是一个很好的解决方案。对于日常管理员来说不是很多，但对于远程技术支持来说非常有用。

如果您需要跨平台的解决方案（即，从 Windows 控制 OS X 机器），那么 VNC 是显而易见的选择。我使用免费的[Vine VNC 服务器](http://www.redstonesoftware.com/products/vine_server)比使用 Apple 的内置服务器要好得多。对于观众来说，OS X 上[的 VNC 鸡或 Windows 上的](http://sourceforge.net/projects/cotvnc/)[Tight VNC](http://www.tightvnc.com/)都是很好的解决方案。

正如其他人所说，对于安全防火墙 VNC，然后使用 SSH 隧道。有很多方法可以做到这一点，具体细节取决于操作系统、防火墙、网络等。[这里](http://www.macosxhints.com/article.php?story=20050429153115383)描述了一种为 VNC 创建 SSH 隧道的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-18T05:15:52.990

Apple 的[远程桌面](http://www.apple.com/remotedesktop/)具有 AES 加密。另一个好方法是只在共享中启用 SSH 并使用 shell 访问来执行任务而不会中断用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T05:15:27.720

[http://www.apple.com/remotedesktop/](http://www.apple.com/remotedesktop/)

^这是你最好的解决方案。

如果您进入“设置”面板，您可以找到各种其他远程访问选项，包括 SSH。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T05:15:32.867

您可以使用Tiger 中内置的[VNC 。](http://www.macminicolo.net/Mac_VNC_tutor.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T05:15:28.437

是的，VNC 很好，但是 Apple 的远程桌面呢？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T05:23:13.440

如果您正在寻找免费、安全的解决方案：我建议您使用任何可用的 VNC 服务器，阻止 VNC 用于通信的端口，然后使用 SSH 隧道进行连接。通过这种方式，ssh 对所有内容进行加密，您仍然可以依靠免费、开源 (?) 和跨平台标准来远程控制桌面。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-18T05:31:00.053

思杰，PC 背后的人，Windows 远程桌面有一个名为“Go to my pc”的托管应用程序[https://www.gotomypc.com/](https://www.gotomypc.com/)

我听人说这很好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-02T08:42:54.053

如果您需要低带宽或跨平台，那么 Mac 的 RDP 服务器也提供了自己的 iRapp 协议

从他们的网站：

> [http://www.coderebel.com/2013/11/08/irapp-mac-client-available-download](http://www.coderebel.com/2013/11/08/irapp-mac-client-available-download)
> 
> 支持的最低速度：iRAPP 协议为 512 kbit/s (64 KB/s)
> 
> 通过调整图像质量，您可以使 iRAPP 在上述建议的较低带宽连接上工作。
> 
> iRapp TS (Mac Terminal Server) 允许多个用户同时连接一台 Mac

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-14T11:32:32.907

我个人喜欢 RHUB 的远程访问和协作服务。这是一种易于使用且非常安全的设备。该设备在您的防火墙后面（而不是在防火墙之外）工作。

# java - java中mod的语法是什么

> ID：90238
> 
> 赞同：247
> 
> 时间：2008-09-18T05:17:15.797
> 
> 标签：java, modulo

作为伪代码中的示例：

```
if ((a mod 2) == 0)
{
    isEven = true;
}
else
{
    isEven = false;
} 
```

* * *

## 回答 #1

> 赞同：379
> 
> 时间：2008-09-18T05:18:58.177

对于非负整数，您可以使用*余数*运算符，而不是语义略有不同的模运算符`%`。对于您的确切示例：

```
if ((a % 2) == 0)
{
    isEven = true;
}
else
{
    isEven = false;
} 
```

这可以简化为单行：

```
isEven = (a % 2) == 0; 
```

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2008-09-18T05:18:33.467

这是用最少的 Java 代码表示的伪代码；

```
boolean isEven = a % 2 == 0; 
```

我现在将它分解成它的组成部分。Java 中的取模运算符是百分比字符 (%)。因此取一个 int % int 返回另一个 int。双等号 (==) 运算符用于比较值，例如一对整数并返回一个布尔值。然后将其分配给布尔变量“isEven”。根据运算符优先级，模数将在比较之前进行评估。

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2010-01-15T18:10:03.853

由于其他人都已经给出了答案，我将添加一些额外的上下文。% “模数”运算符实际上是在执行余数运算。mod 和 rem 之间的区别很微妙，但很重要。

(-1 mod 2) 通常会给出 1。更具体地说，给定两个整数 X 和 Y，操作 (X mod Y) 倾向于返回 [0, Y) 范围内的值。换句话说，X和Y的模量总是大于等于0，小于Y。

使用“%”或 rem 运算符执行相同的操作会保持 X 值的符号。如果 X 为负，则得到范围内的结果 (-Y, 0]。如果 X 为正，则得到范围 [0, Y) 内的结果。

通常这种细微的区别并不重要。不过，回到您的代码问题，有多种方法可以解决“均匀度”问题。

第一种方法适合初学者，因为它特别冗长。

```
// Option 1: Clearest way for beginners
boolean isEven;
if ((a % 2) == 0)
{
  isEven = true
}
else
{
  isEven = false
} 
```

第二种方法更好地利用了语言，并导致更简洁的代码。（不要忘记 == 运算符返回一个布尔值。）

```
// Option 2: Clear, succinct, code
boolean isEven = ((a % 2) == 0); 
```

第三种方法是为了完整性，并使用[三元](http://java.sun.com/docs/books/tutorial/java/nutsandbolts/op2.html)运算符。尽管三元运算符通常非常有用，但在这种情况下，我认为第二种方法更好。

```
// Option 3: Ternary operator
boolean isEven = ((a % 2) == 0) ? true : false; 
```

第四种也是最后一种方法是使用[整数的二进制表示的](http://en.wikipedia.org/wiki/Two's_complement)知识。如果最低有效位为 0，则该数字为偶数。这可以使用[按位与运算符](http://java.sun.com/docs/books/tutorial/java/nutsandbolts/op3.html)(&) 进行检查。虽然这种方法是最快的（您正在做简单的位掩码而不是除法），但对于初学者来说可能有点高级/复杂。

```
// Option 4: Bitwise-and
boolean isEven = ((a & 1) == 0); 
```

在这里，我使用了按位与运算符，并以选项 2 中所示的简洁形式表示它。以选项 1 的形式（或者选项 3 的形式）重写它作为练习留给读者。;)

希望有帮助。

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2010-01-31T14:40:37.173

要让 Java 的 % (REM) 操作像 MOD 一样用于负 X 和正 Y 值，您可以使用以下方法：

```
private int mod(int x, int y)
{
    int result = x % y;
    if (result < 0)
    {
        result += y;
    }
    return result;
} 
```

或使用三元运算符（更短，但在某些情况下不可能或效率较低）：

```
private int mod(int x, int y)
{
    int result = x % y;
    return result < 0? result + y : result;
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2010-01-15T17:57:45.883

Java 实际上没有像 C 那样的模运算符。Java 中的 % 是余数运算符。在正整数上，它的工作方式与模数完全相同，但对负整数的工作方式不同，并且与模数不同，它也可以处理浮点数。尽管如此，除了正整数之外，很少使用 % ，所以如果你想把它称为模数，那就随意吧！

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-09-21T16:58:10.490

虽然可以通过检查值是否为负并纠正它（许多人建议的方式）来进行适当的模运算，但有一个更紧凑的解决方案。

```
(a % b + b) % b 
```

这将首先进行取模，将值限制在 -b -> +b 范围内，然后添加 b 以确保该值为正，让下一个模将其限制在 0 -> b 范围内。

注意：如果 b 为负，结果也为负

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2010-10-12T16:48:34.633

代码在不使用模数的情况下运行得更快：

```
public boolean isEven(int a){
    return ( (a & 1) == 0 );
}

public boolean isOdd(int a){
    return ( (a & 1) == 1 );
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-03-04T12:02:04.903

在 Java 中，它是`%`运算符： [15.17.3。余数运算符 %](https://docs.oracle.com/javase/specs/jls/se9/html/jls-15.html#jls-15.17.3)

请注意，该类中还有[`floorMod`](https://docs.oracle.com/javase/9/docs/api/java/lang/Math.html#floorMod-int-int-)一个`java.lang.Math`与`%`具有不同符号的参数不同的结果：

[`public static int floorMod​(int x, int y)`](https://docs.oracle.com/javase/9/docs/api/java/lang/Math.html#floorMod-int-int-)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-08-17T01:54:44.897

正如其他人指出的那样，`%`（余数）运算符与数学 `mod`模运算/函数不同。

> ### `mod`对比`%`
> 
> 该`x mod n`函数映射`x`到`n`的范围内`[0,n)`。
> 而`x % n`运算符映射`x`到`n`的范围内`(-n,n)`。

为了有一种方法使用数学模运算而不关心前面的符号，`x`可以使用：

```
((x % n) + n) % n 
```

也许这张图片有助于更好地理解它（我首先很难理解这个）

[![在此处输入图像描述](https://i.stack.imgur.com/bzlMt.png)](https://i.stack.imgur.com/bzlMt.png)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-09-18T05:18:36.400

```
if (a % 2 == 0) {
} else {
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2011-01-18T15:41:02.147

您应该在使用“余数”运算符 % 之前检查规范：

[http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.17.3](http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.17.3)

```
// bad enough implementation of isEven method, for fun. so any worse?
boolean isEven(int num)
{
    num %= 10;
    if(num == 1)
       return false;
    else if(num == 0)
       return true;
    else
       return isEven(num + 2);
}
isEven = isEven(a); 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-09-18T05:19:56.723

此外，mod 可以这样使用：

```
int a = 7;
b = a % 2; 
```

`b`将等于 1。因为`7 % 2 = 1`.

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2010-07-28T15:08:17.843

Java中的余数运算符is`%`和模运算符可以表示为

```
public int mod(int i, int j)
{
  int rem = i % j;
  if (j < 0 && rem > 0)
  {
    return rem + j;
  }
  if (j > 0 && rem < 0)
  {
    return rem + j;
  }
  return rem;
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-05-12T13:44:21.527

另一种方法是：

```
boolean isEven = false;
if((a % 2) == 0)
{
    isEven = true;
} 
```

但最简单的方法仍然是：

```
boolean isEven = (a % 2) == 0; 
```

就像@Steve Kuo 说的。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-07-03T21:13:21.347

在`Java`中，可以这样执行**mod操作：**

```
Math.floorMod(a, b) 
```

**注意：** mod**运算**与**余数**运算不同。在`Java`中，**余数**运算可以这样执行：

```
a % b 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2008-09-18T05:18:35.277

模运算符是 %（百分号）。要测试均匀度或通常对 2 的幂进行模运算，您还可以使用 &（and 运算符），例如 isEven = !( a & 1 )。

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2008-09-18T19:19:22.980

@Cody 代码的替代方案：

使用模运算符：

```
bool isEven = (a % 2) == 0; 
```

我认为这比编写 if/else 稍微好一点，因为重复和未使用的灵活性更少。它确实需要更多的脑力来检查，但良好的命名可以`isEven`弥补。

# ruby-on-rails - 我将如何存储一个可能是部分的日期（即只有年份，也可能是月份）并在以后以相同的特异性输出它？

> ID：90246
> 
> 赞同：3
> 
> 时间：2008-09-18T05:18:54.760
> 
> 标签：ruby-on-rails, database-design, datetime

我想让用户指定一个日期，该日期可能包括也可能不包括日期和月份（但至少有年份。）问题是当它作为日期时间存储在数据库中时；缺少的日期/月份将被保存为默认值，我将失去日期的原始格式和含义。

我的想法是将实际格式存储为除日期时间列之外的字符串。然后，每当我必须为其他所有内容显示日期和日期时间时，我都可以使用字符串列。缺点是我要显示的表中的每个日期列都有一个额外的列，并且打印本地化日期不会那么容易，因为我不能依赖日期时间值......我可能不得不解析字符串.

我希望我忽略了一些事情，并且可能有更简单的方法。

（请注意，如果它对解决方案很重要，我正在使用 Rails。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-18T05:34:55.143

[正如 Jhenzie 所提议的](https://stackoverflow.com/questions/90246/how-would-i-store-a-date-that-can-be-partial-ie-just-the-year-maybe-the-month-t#90273)，创建一个位掩码以显示已指定日期的哪些部分。1 = 年，2 = 月，4 = 日，8 = 小时*（如果您决定更具体）*，然后将其存储到另一个字段中。

我能想到的唯一方法是使用*jhenzie*使用位掩码的方法，然后将该位掩码存储到 datetime 列的秒部分中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-18T05:20:21.903

在你的模型中只关注你关心的部分。因此，您可以将整个日期存储在您的数据库中，但在将其显示给用户之前将其合并。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T05:25:41.813

附加列可以简单地用于指定日期时间的哪一部分已指定

1 = 日 2 = 月 4 = 年

所以 3 是日期和月份，6 是月份和年份，7 是全部三个。那时它是一个简单的 int

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-18T05:51:26.947

如果您存储字符串，请不要部分重新发明 ISO 8601 标准，该标准涵盖了您描述的情况以及更多内容：

[http://en.wikipedia.org/wiki/ISO_8601](http://en.wikipedia.org/wiki/ISO_8601)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-18T05:23:35.140

真的有必要将它存储为日期时间吗？如果未将其存储为字符串 2008 或 2008-8 或 2008-8-1 - 在将其拉出时将字符串拆分为连字符，您就可以确定原始输入的具体程度

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T05:24:40.037

我可能会存储日期时间和一个额外的“精度”列来确定如何输出它。对于输出，精度列可以映射到包含相应格式字符串（“YYYY-mm”等）的列，也可以包含格式字符串本身。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T05:28:12.617

我对数据库设计知之甚少，但我认为一种简洁的方法是使用布尔列来指示用户是否输入了月份和日期（每个一列）。然后，要保存给定的日期，您将：

1.  将用户输入的日期存储在日期时间列中；
2.  如果用户选择了一个月，则设置布尔月份列；
3.  如果用户选择了一天，则设置布尔日列。

这样您就知道您可以信任日期时间的哪些部分（即用户输入的内容）。

*`int`编辑：它也比拥有一个具有神秘值的字段更容易理解！*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-18T05:37:17.150

informix 数据库有这个功能。当您定义日期字段时，您还可以指定所需时间和日期属性的掩码。进行比较时，只有这些字段才算数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-18T05:37:33.937

对于不同级别的特异性，最好的办法是将它们存储为简单的可为空的整数。年月日。您可以将显示逻辑封装在表示模型中或域中的值对象中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-18T05:38:53.403

内置时间类型代表一个瞬间。您可以使用内置类型并为精度创建列（年、月、日、小时等），也可以创建自己的日期结构并为空部分使用空值（或其他无效值）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-26T20:25:33.787

至少对于红宝石 - 你可以使用这个宝石 - 部分日期 [https://github.com/58bits/partial-date](https://github.com/58bits/partial-date)

# palm-os - 如何分割我的 Palm OS 68K 应用程序？

> ID：90288
> 
> 赞同：4
> 
> 时间：2008-09-18T05:29:25.517
> 
> 标签：palm-os, 68000, garnet-os, codewarrior

如果您有一个使用 CodeWarrior for Palm OS 编写的 68K 应用程序，您如何将各个功能分配给不同的段，而无需在 IDE 的段选项卡中手动移动文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-18T05:31:29.053

CW 68K 链接器使用添加到项目中的 .seg 文件来支持这一点。

格式是

```
{ "<segment_name>" [= <hex>] "<name1>" ... "<namen>" }
"<segname1>" = "<segname2>" 
```

大括号分隔区域指定段名称并列出将分配给该段的所有函数/符号。可选的十六进制值（没有前导 0x）用于设置段属性，因此在 Palm OS 上不会太有用。另一种表示法用于重命名段。这对于从使用“#pragma segment”调用构建的静态库中提取代码看起来很有用。

CodeWarrior 手册中没有提到这种格式，但是当我在 Metrowerks 时，我检查了 68K 链接器源代码并验证它可以工作。这应该适用于 Mac OS 68K 链接器和 Palm OS 68K 链接器，因为它们共享处理分段的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-23T19:56:42.103

我用`#pragma segment`. 比 CodeWarrior 的分段选项卡要容易得多。

```
#pragma segment Foo
some code

#pragma segment Bar
some code 
```

现在您的代码会自动放入两个不同的段中。

# datetime - 哪些语言在日期、时间和日历操作方面做得非常好？

> ID：90308
> 
> 赞同：9
> 
> 时间：2008-09-18T05:33:17.783
> 
> 标签：datetime, time, language-features, date

这可能问得太多了，但是有没有一种语言在表示时间和日期操作方面做得非常出色？我会马上承认，写一个真正伟大的时间库**真的很难。**也就是说，是否有任何广泛使用的语言？基本上，我想要像现代正则表达式库一样全面地处理时间和日期的东西。到目前为止，我在 Python 和 Java 中看到的所有内容都忽略了一个或多个非常重要的部分，或者使太多事情变得困难。

至少这应该是直观的：

*   查找两个给定日期之间的天数，两个给定分钟周期之间的分钟数等。
*   从时间戳中添加和减去间隔
*   允许在时区之间进行简单转换，并自动考虑按地区划分的夏令时变化（假设有一个准确的区域设置支持数据库可用）
*   获取给定时间戳所属的周期，给定的周期粒度（“该日期在哪个日历日？”）
*   支持非常通用的字符串到日期转换（给定一个模式）

此外，如果有 Java 风格的 Calendar/GregorianCalendar 设置，如果我需要推出自己的希伯来语、巴比伦语、托尔金语或火星日历，那么通用 Calendar 类应该适应子类。（例如，Java 日历使这变得毫无意义。）

我在这里完全与语言无关。如果在计算诸如“2002 年和下一个情人节之间有多少分钟？”之类的模棱两可的东西时它会窒息，这很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-18T05:37:00.757

[.NET 的 DateTime](http://msdn.microsoft.com/en-us/library/system.datetime_methods.aspx)怎么样？（您可以在框架内选择您的语言）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-18T05:41:32.883

你在寻找像 PHPs [strtotime](http://au.php.net/strtotime)这样的东西吗？这将为您提供几乎任何您可以扔给它的东西的 unix 时间戳。

从 php 网站：

```
<?php
echo strtotime("now"), "\n";
echo strtotime("10 September 2000"), "\n";
echo strtotime("+1 day"), "\n";
echo strtotime("+1 week"), "\n";
echo strtotime("+1 week 2 days 4 hours 2 seconds"), "\n";
echo strtotime("next Thursday"), "\n";
echo strtotime("last Monday"), "\n";
?> 
```

[.NET 的日期类需要对DateTimeFormatInfo](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.aspx)等进行更神秘的处理，以解析不像 strtotime 可以处理的那样复杂的日期字符串。

自 PHP 5 起，PHP 提供了一个 DateTime 类和一个 DateTimeZone 类，但它们的文档记录都很差。我仍然主要使用 unix 时间戳和[date](http://au.php.net/date)、[time](http://au.php.net/time)和[strtotime](http://au.php.net/strtotime)函数，因为我还没有完全掌握新对象。

以下链接试图更好地充实 DateTime 和 DateTimeZone：

*   [http://laughingmeme.org/2007/02/27/](http://laughingmeme.org/2007/02/27/)
*   [http://maetl.coretxt.net.nz/datetime-in-php](http://maetl.coretxt.net.nz/datetime-in-php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-18T13:32:36.323

有一种非常酷的编程语言叫做*[Frink](http://FutureBoy.Us/frinkdocs/)*。它支持几乎所有发明的单位、每一个物理或数学常数、时区、bla bla bla ...</p>

它甚至还有一个[Web 界面](http://FutureBoy.Us/frink/)和一个[Java Applet](http://FutureBoy.Us/frinkdocs/FrinkApplet.html)。

上面的一些挑战：

*   查找两个给定日期之间的天数，两个给定分钟周期之间的分钟数等。
    *   离圣诞节还有多少天：`# 2008-12-25 # - now[] -> days`
    *   离中午多长时间：`now[] - # 12:00 # -> minutes`
*   从时间戳中添加和减去间隔
    *   我的百万分钟生日是什么时候：`# 1979-01-06 # + 1 million minutes`
*   允许在时区之间进行简单转换，并自动考虑按地区划分的夏令时变化（假设有一个准确的区域设置支持数据库可用）
    *   北京奥运会什么时候在伦敦开始：`# 2008-08-08 08:08 PM China # -> London`
*   支持非常通用的字符串到日期转换（给定一个模式）
    1.  定义新的日期格式：`### dd.MM.yyyy ###`
    2.  解析：`# 18.09.2008 #`

Frink 与 Java 很好地集成：它可以[嵌入到 Java 应用程序中](http://FutureBoy.Us/frinkdocs/#EmbeddingFrink)，Frink 程序可以[调用 Java 代码](http://FutureBoy.Us/frinkdocs/#JavaIntrospection)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-18T05:51:33.263

对于 Java，我强烈推荐[Joda Date/Time library](http://joda-time.sourceforge.net/)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-18T05:53:12.543

您可能想检查 CPAN 上的[Date::Manip](http://search.cpan.org/~sbeck/Date-Manip-5.54/lib/Date/Manip.pod) Perl 模块。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-18T06:00:50.183

PHP 还不错。

```
// given two timestamps: $t1, and $t2:

// find the number of days between two given dates, number of minutes
// between two given minute periods, etc.  
$daysBetween = floor(($t2 - $t1) / 86400);  // 86400 = 1 day in seconds
$hoursBetween = floor(($t2 - $t1) / 3600);  // 3600 = 1 hour in seconds

// add and subtract intervals from timestamps  
$newDate = $t1 + $interval;

// allow simple conversion between timezones, with Daylight Saving Time
// changes by region automatically accounted for (given that there's an
// accurate supporting database of regional settings available)

// See PHP's Calendar functions for that
// http://au2.php.net/manual/en/book.calendar.php
// It not only supports basic stuff like timezones and DST, but also
// different types of calendar: French, Julian, Gregorian and Jewish.

// get the period that a given timestamp falls into, given period
// granularity ("what calendar day is this date in?")  
if (date("d", $t1) == 5)    // check if the timestamp is the 5th of the month
if (date("h", $t1) == 16)   // is it 4:00pm-4:59pm ?

// support very general string-to-date conversions (given a pattern) 

// strtotime() is magic for this. you can just type in regular english
// and it figures it out. If your dates are stored in a particular format
// and you want to convert them, you can use strptime() 
```

你必须给它一些荣誉，因为它有[一个功能来告诉复活节在给定年份的日期](http://au2.php.net/manual/en/function.easter-days.php)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-18T06:07:42.180

对于 C++，有[Boost.Date_Time](http://www.boost.org/doc/libs/1_36_0/doc/html/date_time.html)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-18T05:36:05.970

为此，我喜欢 .NET。它通过 DateTime 和 Timespan 类提供了良好的日期/时间操作。然而，大多数日期/时间的东西在任何语言中都相当简单，它会给你一个 unix 时间戳来使用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-18T13:54:00.217

我对 PHP 的[PEAR Date](http://pear.php.net/package/Date "梨日期")类非常满意。我相信，除了多个日历之外，它可以完成您所询问的所有事情，尽管还有 Date_Human，它可能是此类事情的模板。

另外，我还没有使用它，但是[Zend_Date](http://framework.zend.com/manual/en/zend.date.html "Zend 日期")，也适用于 PHP，看起来它可以很好地满足你想要的大部分内容。Zend_Date 的优点是基于 Unix 时间戳，并且大部分 Zend Framework 类旨在易于扩展。因此，您很可能可以通过扩展 Zend_Date 快速添加对其他日期系统的支持。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-18T05:41:13.443

我个人最喜欢的是带有 Rails 的 ActiveSupport 的 Ruby。

```
start_time = 5.months_ago.at_end_of_week 
end_time =  6.months.since(start_time) 
```

它使用类似的 DSL（领域特定语言）支持您上面提到的所有功能

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-18T05:47:44.130

我同意 Java SDK 对日期时间库的实现很糟糕。希望[JSR 310](https://jcp.org/en/jsr/detail?id=310)能在 Java 7 中解决这个问题。如果你等不及 Java 7，我会推荐 JSR-310 的前身 Joda Time。

我同意 ActiveSupport 中的 Ruby on Rails 实现是一个很好的实现，它使基础知识正确。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-03-05T11:46:05.977

PHP Date 函数很棒并且有很多有用的函数（链接：[php.net/date](http://php.net/date)）

.NET 在其最新版本中还不错，而且我喜欢您可以添加对辅助语言的引用并混合和匹配项目中的代码的事实。因此，您可以在同一个类中使用 C# 和 VB 函数。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-01-01T01:58:01.823

Perl 的 DateTime 库毫无疑问是处理日期时间数学和时区的最佳（最正确的）库。其他一切都在不同程度上是错误的。（我说这是在 PHP 的 DateTime/DateTimeZone 库上写了上面引用的博客文章）

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-04-12T21:56:01.417

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-18T05:49:43.580

实际上，Ruby 有很好的支持。看看[这个页面](http://www.developer.com/open/article.php/3729206)。非常支持将字符串转换为日期、日期转换为字符串、对日期进行数学运算、将“自然语言”字符串（如“本周五 3 个月前下午 3:45”）解析为实际日期、将日期转换为字符串以便您可以做一些事情比如“Sam 最后一次登录是在 4 天前”或其他什么...

非常漂亮。

# vb.net - 跟踪软件安装

> ID：90313
> 
> 赞同：2
> 
> 时间：2008-09-18T05:35:46.717
> 
> 标签：vb.net

尽管我缺乏编码知识，但我还是设法在 VB 网络中编写了一个小应用程序，现在很多人都在使用它。因为我是免费制作的，所以我无法知道它到底有多受欢迎，我想我可以让它 ping 某种在线统计计数器，这样我就可以弄清楚是否应该将它移植到其他语言。关于如何在不实际打开窗口或要求接收任何数据的情况下通过 vb ping url 的任何想法？当我用谷歌搜索很多术语时，我最终得到了包含 50 多行代码的示例，我认为应该只需要一行左右，类似于打开 IE 窗口。

旁注：当然会完全通知所有用户这正在发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T05:40:24.367

只是一个旁注：出于隐私考虑，您应该通知您的用户您正在这样做（或根本不这样做）。即使您没有收集任何个人数据，也可能被视为隐私问题。例如，当程序收集使用信息时，它们在安装过程中几乎总是有一个框询问用户是否想参与“匿名使用调查”或类似的东西。如果您只是跟踪下载量怎么办？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T05:51:57.973

我假设您是通过网站提供的。因此，您可以要求人们提供他们的电子邮件地址，以便获取安装程序的下载链接。然后，您可以跟踪每月/每周/等有多少人将自己添加到您的电子邮件列表中。这也意味着您可以在发布新版本时向他们发送电子邮件，以便他们能够及时了解最新和最棒的信息。

注意：始终确保他们在您发送给他们的每封电子邮件的末尾都有一个退订链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-18T05:40:03.633

可能更容易跟踪下载（假设人们通过 HTTP 获取）而不是安装。否则，添加“现在注册？” 特征。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T05:42:23.037

您可以在客户端应用程序中使用一些简单的东西，例如

```
Sub PingServer(Server As String, Port As Integer)
  Dim Temp As New System.Net.Sockets();
  Temp.Connect(Server, Port)
  Temp.Close()
End Sub 
```

让您的网络服务器侦听特定端口并计算连接数。

此外，您真的不应该在用户不知情的情况下这样做，因此正如其他人所说，最好计算下载量，或者实现注册功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-18T05:41:50.197

。网？创建一个 ASMX Web 服务并在您的网站上进行设置。然后将服务引用添加到您的应用程序。

编辑/澄清：然后您的 Web 服务可以将传递的数据存储到数据库中，而不是依赖于 Web 日志：安装 ID、安装日期、运行次数等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T05:45:35.493

[vbdotnetheaven.com](http://www.vbdotnetheaven.com/UploadFile/mahesh/DownloadWebPage04252005073432AM/DownloadWebPage.aspx)上的人有一个使用 WebClient、WebRequest 和 HttpWebRequest 类的简单示例。这是他们的 WebClient 类示例：

```
Imports System
Imports System.IO
Imports System.Net
Module Module1 
   Sub Main()
      ' Address of URL
      Dim URL As String = http://www.c-sharpcorner.com/default.asp
      ' Get HTML data
      Dim client As WebClient = New WebClient()
      Dim data As Stream = client.OpenRead(URL)
      Dim reader As StreamReader = New StreamReader(data)
      Dim str As String = ""
      str = reader.ReadLine()
      Do While str.Length > 0
         Console.WriteLine(str)
         str = reader.ReadLine()
      Loop
   End Sub
End Module 
```

# multithreading - 切换到并行编码

> ID：90325
> 
> 赞同：4
> 
> 时间：2008-09-18T05:38:15.947
> 
> 标签：multithreading, math, parallel-processing, high-speed-computing

我们都为单处理器编写代码。我想知道我们什么时候都能够在多处理器上编写代码？

我们需要什么（软件工具、逻辑、算法）来进行这种切换？

编辑：在我看来，当我们并行执行许多任务时，我们需要将这些现实生活中的解决方案（算法）转换为计算机语言。就像 OOP 编码对过程编码所做的那样。OOP 是一种比程序更真实的编码风格。所以我希望有这种解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-18T05:53:01.903

我认为最重要的要求是一种良好的语言，它具有支持并行性的原生结构或可以自动生成并行代码的语言。有相当多的语言符合这种描述，但没有一种语言流行到足以真正被考虑用于主流用途。这反过来又是由几件事引起的：

1.  就其本质而言，这些语言与今天的命令式语言非常不同，因此更难学习（或者至少看起来是这样）。
2.  它们通常缺乏好的工具和库，使得它们无法用于任何“真正的”项目。

当然，如果它更受欢迎，就会有更多的人愿意学习它，会有更多的支持，所以这是一种很难打破的循环。我想我们能做的只有希望。:)

Erlang 是设计时考虑到大量并行化的语言的一个例子——它实际上用于商业项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-18T06:15:17.573

我们需要的是高并发算法的自然抽象。Actors（想想：Erlang）在这个方向上走了很长一段路，但它们并不是一个万能的解决方案。一些更具体的抽象，如 fork/join 或 map/reduce 可以更容易地应用于常见问题。

所有这些并发抽象的诀窍是它们需要函数式编程。并发与共享的可变状态不能很好地结合。正如他们所说，“锁被认为是有害的”。由于大多数开发人员都来自严格的命令式背景，因此切换到无共享的持续传递方法通常极具挑战性。

顺便说一下，关于并发抽象，Clojure 在这个方向上有一些非常有趣的特性。它不仅有某种类型的参与者，而且还定义了一个事务性内存模型（想想：数据库）以及一个全局的原子引用机制。这两个特性允许并发操作共享“可变”状态，而不必担心锁定或竞争条件。

最后，归结为教育。并发抽象所需的大部分理论工作已经完成，我们只需要接受它。不幸的是，正如 Erlang 和 Haskell 所证明的那样，有时最好的想法仍然被归入极端边缘的人群中。希望像 Scala 和 Clojure 这样的努力能够成功地将更高级的抽象带入主流，方法是将它们潜入现有的、得到良好支持的平台（JVM）上。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-09T00:40:35.590

有几种流行或正在流行的工具/语言。如果您使用 FORTRAN、C 或 C++，您可以使用[OpenMP](http://www.openmp.org/)（不太难实现）或[消息传递接口](http://www.mcs.anl.gov/mpi/)(MPI) 库（强大且最大的加速潜力，但也复杂且困难）。OpenMP 使用预处理器指令来标记可以并行化的区域，尤其是循环。MPI 使用消息在进程之间来回传递数据，最大的困难是保持一切同步而不会遇到瓶颈并让进程等待。但是，我会说 MPI 肯定会被淘汰。科学/高性能计算社区很清楚，加速很少值得额外的开发时间。

至于新兴语言，请查看[Fortress](http://en.wikipedia.org/wiki/Fortress_(programming_language))。它仍在设计中，但目标是创建一种比 FORTRAN 更容易用于科学计算的语言。程序将以非常高级的数学语法指定。此外，并行性将是隐含的；程序员将不得不工作以串行方式做事。此外，它受到 Sun 的拥护，并且基于 java，因此它是可移植的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-18T05:59:54.210

不幸的是，对于大规模并发编程 - 除非编译器有突破性的帮助，否则我们将丢掉很多我们对算法的了解（我认为 Don Knuth 甚至说过）。阅读有关 Erlang 的文章，了解这个可能的未来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-17T08:57:00.553

对于 Java，您现在可以查看 Parallel Java Library 或 DPJ（确定性并行 Java！）它将为您从代码中提取并行性提供很大帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T05:41:55.283

没有简单的答案，在许多方面，即使是复杂的答案目前也不充分或不完整。如果您更具体地了解您想要的回复，您会得到更好的答案：指向开发库和工具的指针、教学材料、指向当前研究项目和该领域问题的指针，还是其他？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-24T16:04:04.590

最重要的要求是能够将您的问题分解为可以彼此独立解决的较小问题。一旦你弄清楚了你将如何做到这一点，其他一切都更容易思考和实施的进一步问题（例如“我的计算的一部分取决于其他部分 - 我如何等待它们完成？” ) 变成具体的、具体的事情，你可以在这里研究或询问。

# java - 在JAVA中将（服务器端）一组PDF文档合并为一个大PDF文档的最简单方法是什么

> ID：90350
> 
> 赞同：4
> 
> 时间：2008-09-18T05:45:12.903
> 
> 标签：java, pdf, pdf-generation

我有 3 个 PDF 文档，它们由我们使用的遗留库动态生成，并写入磁盘。我的 JAVA 服务器代码获取这 3 个文档并将它们转换为一个长 PDF 文档的最简单方法是什么，其中只有文档 #1 中的所有页面，然后是文档 #2 中的所有页面，等等。

理想情况下，我希望这发生在内存中，因此我可以将其作为流返回给客户端，但将其写入磁盘也是一种选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-18T06:31:43.837

@JD OConal，感谢您的提示，您发送给我的文章非常过时，但它确实将我指向了 iText。我发现这个页面解释了如何做我需要的：http: [//java-x.blogspot.com/2006/11/merge-pdf-files-with-itext.html](http://java-x.blogspot.com/2006/11/merge-pdf-files-with-itext.html)

感谢其他答案，但如果可以避免的话，我真的不想产生其他进程，而且我们的项目已经有 itext.jar，所以我没有添加任何外部依赖项

这是我最终编写的代码：

```
public class PdfMergeHelper {

    /**
     * Merges the passed in PDFs, in the order that they are listed in the java.util.List.
     * Writes the resulting PDF out to the OutputStream provided.
     * 
     * Sample Usage:
     * List<InputStream> pdfs = new ArrayList<InputStream>();
     * pdfs.add(new FileInputStream("/location/of/pdf/OQS_FRSv1.5.pdf"));
     * pdfs.add(new FileInputStream("/location/of/pdf/PPFP-Contract_Genericv0.5.pdf"));
     * pdfs.add(new FileInputStream("/location/of/pdf/PPFP-Quotev0.6.pdf"));
     * FileOutputStream output = new FileOutputStream("/location/to/write/to/merge.pdf");
     * PdfMergeHelper.concatPDFs(pdfs, output, true);
     * 
     * @param streamOfPDFFiles the list of files to merge, in the order that they should be merged
     * @param outputStream the output stream to write the merged PDF to
     * @param paginate true if you want page numbers to appear at the bottom of each page, false otherwise
     */
    public static void concatPDFs(List<InputStream> streamOfPDFFiles, OutputStream outputStream, boolean paginate) {
        Document document = new Document();
        try {
            List<InputStream> pdfs = streamOfPDFFiles;
            List<PdfReader> readers = new ArrayList<PdfReader>();
            int totalPages = 0;
            Iterator<InputStream> iteratorPDFs = pdfs.iterator();

            // Create Readers for the pdfs.
            while (iteratorPDFs.hasNext()) {
                InputStream pdf = iteratorPDFs.next();
                PdfReader pdfReader = new PdfReader(pdf);
                readers.add(pdfReader);
                totalPages += pdfReader.getNumberOfPages();
            }
            // Create a writer for the outputstream
            PdfWriter writer = PdfWriter.getInstance(document, outputStream);

            document.open();
            BaseFont bf = BaseFont.createFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
            PdfContentByte cb = writer.getDirectContent(); // Holds the PDF
            // data

            PdfImportedPage page;
            int currentPageNumber = 0;
            int pageOfCurrentReaderPDF = 0;
            Iterator<PdfReader> iteratorPDFReader = readers.iterator();

            // Loop through the PDF files and add to the output.
            while (iteratorPDFReader.hasNext()) {
                PdfReader pdfReader = iteratorPDFReader.next();

                // Create a new page in the target for each source page.
                while (pageOfCurrentReaderPDF < pdfReader.getNumberOfPages()) {
                    document.newPage();
                    pageOfCurrentReaderPDF++;
                    currentPageNumber++;
                    page = writer.getImportedPage(pdfReader, pageOfCurrentReaderPDF);
                    cb.addTemplate(page, 0, 0);

                    // Code for pagination.
                    if (paginate) {
                        cb.beginText();
                        cb.setFontAndSize(bf, 9);
                        cb.showTextAligned(PdfContentByte.ALIGN_CENTER, "" + currentPageNumber + " of " + totalPages,
                                520, 5, 0);
                        cb.endText();
                    }
                }
                pageOfCurrentReaderPDF = 0;
            }
            outputStream.flush();
            document.close();
            outputStream.close();
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (document.isOpen()) {
                document.close();
            }
            try {
                if (outputStream != null) {
                    outputStream.close();
                }
            } catch (IOException ioe) {
                ioe.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T05:51:40.503

我使用[pdftk](http://www.accesspdf.com/pdftk/)效果很好。它是一个外部应用程序，您必须从您的 java 应用程序中运行它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T06:02:33.637

iText 似乎发生了变化，现在有商业许可要求，而且帮助也不是很好（想要文档？买我们的书！）。

我们最终找到了 PDFSharp [http://www.pdfsharp.net/](http://www.pdfsharp.net/)并使用它。将多个 pdf 文档连接在一起的示例简单易懂：[http ://www.pdfsharp.net/wiki/ConcatenateDocuments-sample.ashx](http://www.pdfsharp.net/wiki/ConcatenateDocuments-sample.ashx)

享受随机

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T05:56:33.703

看看这个[Java 开源 PDF 库列表](http://java-source.net/open-source/pdf-libraries)。

另请查看[这篇文章](http://www.roseindia.net/java/itext/Comboine2page.shtml)。

[编辑：总是有 Ghostscript，它很容易使用，但谁想要更多的依赖？]

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T08:12:28.293

[iText PdfCopy](http://itextdocs.lowagie.com/tutorial/general/copystamp/index.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T02:52:25.713

[PDFBox](http://pdfbox.apache.org/)是迄今为止实现这一目标的最简单方法，代码中有一个名为 PDFMerger 的实用程序，它使事情变得非常简单，我只需要一个 for 循环和其中的 2 行代码就完成了:)

# sql-server - SQL Server sys.databases log_reuse_wait 问题

> ID：90360
> 
> 赞同：11
> 
> 时间：2008-09-18T05:48:01.040
> 
> 标签：sql-server, database, transactions

当我发现事务日志只会正确截断时，我正在调查 SQL Server 2005 事务日志的快速增长 - 如果 sys.databases "log_reuse_wait" 列设置为 0 - 这意味着没有任何东西可以阻止事务日志重用现有空间.

有一天，当我打算备份/截断日志文件时，我发现该列在 tempdb 中有一个 4 或 ACTIVE_TRANSACTION。然后，我使用 DBCC OPENTRAN('tempdb') 和来自 sysprocesses 的 open_tran 列检查了任何打开的事务。结果是我在系统中的任何地方都找不到活动的交易。

log_reuse_wait 列中的设置是否准确？是否存在使用我上面描述的方法无法检测到的交易？我只是错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-02T18:47:05.627

我仍然不知道为什么我在 sys.databases log_reuse_wait_desc 列中看到 ACTIVE_TRANSACTION - 当没有事务运行时，但我随后的经验表明 tempdb 的 log_reuse_wait 列更改的原因不是很清楚，并且我的目的，不是很相关。此外，我发现运行 DBCC OPENTRAN 或“从 sysprocess 中选择 open_tran”代码比在查找事务信息时使用以下语句提供的信息要少得多：

```
select * from sys.dm_tran_active_transactions

select * from sys.dm_tran_session_transactions 

select * from sys.dm_tran_locks 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-06T12:33:34.863

[这里](http://www.sqlskills.com/blogs/paul/worrying-cause-log-growth-log_reuse_wait_desc/)有 log_reuse_wait_desc 是如何工作的解释：

> 我们还需要了解 log_reuse_wait_desc 报告机制是如何工作的。它给出了上次尝试日志截断时无法发生日志截断的原因。这可能会令人困惑——例如，如果您看到 ACTIVE_BACKUP_OR_RESTORE 并且您知道没有备份或恢复操作正在运行，这仅表示上次尝试日志截断时有一个正在运行。

因此，在您的情况下，现在没有 ACTIVE TRANSACTION，但这是上次尝试截断日志的时候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-18T14:37:16.213

There are a couple of links to additional tools/references you can use to help troubleshoot this problem on the References link for this video:
[Managing SQL Server 2005 and 2008 Log Files](http://www.sqlservervideos.com/sqlserver-backups/sql2528-log-files)

That said, the information in log_reuse_wait should be accurate. You likely just had a stalled or orphaned transaction that you weren't somehow able to spot.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T14:51:24.993

[我对数据库日志文件的](https://stackoverflow.com/questions/72961/the-log-file-for-database-is-full)[回答](https://stackoverflow.com/questions/72961/the-log-file-for-database-is-full#73421)是完整的：

一旦您对数据库进行了完整备份，并且数据库未使用简单恢复模型，SQL Server 就会完整记录数据库上曾经执行的所有事务。这样做是为了在您丢失数据文件的灾难性故障事件中，您可以通过备份日志恢复到故障点，并且在恢复旧数据备份后，恢复日志以重播丢失的数据交易。

为防止这种情况累积，您必须备份事务日志。或者，您可以使用BACKUP LOG的`TRUNCATE_ONLY`或选项在当前点断开链。`NO_LOG`

如果您不需要此功能，请将恢复模式设置为简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-02T15:16:12.700

数据可能是准确的。您需要做的是定期备份事务日志。与其他建议相反，您不应在 2005 年使用 NO_TRUNCATE 选项，因为它会清除已提交事务的日志，但不会备份它们。

您应该做的是使用带有 NO_TRUNCATE 选项的 BACKUP LOG 语句执行尾日志备份。您还应该全天应用常规事务日志。这应该有助于保持大小相当易于管理。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-09-18T10:49:34.203

嗯，棘手。难道是它自己对 sys.databases 的问题导致了 ACTIVE_TRANSACTION？但在这种情况下，它应该在 MASTER 而不是 TEMPDB 中。

# php - 让 PHP 在 Linux 上读取 .doc 文件

> ID：90363
> 
> 赞同：5
> 
> 时间：2008-09-18T05:48:45.003
> 
> 标签：php, database

我正在尝试将 .doc 文件读入数据库，以便可以索引它的内容。Linux 上的 PHP 是否有一种简单的方法来读取 .doc 文件？如果做不到这一点，是否可以将 .doc 文件转换为 rtf、pdf 或其他一些易于阅读的“开放”格式？

请注意，我对 .docx 文件不感兴趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-18T15:18:24.523

Conor，我建议查看 OpenOffice 命令行界面/调用宏。它可以将许多文件格式转换为许多其他格式。然后你可以选择比 MS doc 更容易解析的东西。

例如，要转换为 PDF，命令行是：

```
/usr/lib/ooo-2.0/program/soffice.bin -norestore -nofirststart -nologo -headless -invisible   "macro:///Standard.Module1.SaveAsPDF(demo.doc)" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-18T05:57:37.553

似乎有一个[用于访问 Word 文档的库，](http://packages.ubuntu.com/hardy/libwv-1.2-3)但不确定如何从 PHP 访问它。我认为最好的解决方案是从 PHP调用他们的[wv 命令。](http://packages.ubuntu.com/hardy/wv)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-14T07:06:27.847

**phpLiveDocx**是一个 Zend Framework 组件，可以在 Linux、Windows 和 Mac 上用 PHP 读写 DOC 和 RTF 文件。此外，您可以使用它来生成 PDF 文件，甚至可以将 PHP 中的数据合并到使用 MS Word 或 Open Office 创建的模板文件中！

请参阅项目网站：

[http://www.phplivedocx.org](http://www.phplivedocx.org)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T05:53:25.647

您可以使用[antiword](http://www.winfield.demon.nl/)或[AbiWord](http://www.abisource.com/)提取文本并将其提供给您最喜欢的全文索引器。AbiWord 可能对您的目的更有效，因为它可以转换为 RTF、PDF 和其他格式（是的，它是一个 GUI 文字处理器，但它也支持命令行使用）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-12-24T18:53:49.260

我在 Ubuntu 中找到了一个 unoconv 包。它在 OpenOffice 支持的所有格式之间进行转换。您应该能够在 php 中使用 exec 来运行此实用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T05:54:03.587

它不是 PHP，但有一个 doc2rtf 实用程序可供您使用。从那里您可以将 RTF 文件作为文本文档打开，编写一些字符串替换例程来删除 RTF 格式代码，并拥有一个适合索引的文本。

或者，您可以获取 OpenOffice 并打开 MS Word 文档，然后只需文件 > 另存为 > RTF。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T06:00:43.960

DOC 文件以二进制格式存储，没有任何纯 php 编写的类来处理它们。

RTF 文件更容易解析，主要是文本，您可以使用 fopen 打开它们并阅读内容。

如果可以的话，我建议使用 RTF，因为目前还没有针对 DOC 文件的合理解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-21T13:38:26.993

经过几天的搜索，这是我最好的解决方案： [http ://wvware.sourceforge.net/](http://wvware.sourceforge.net/)

安装包

```
sudo apt-get install wv 
```

在 PHP 中使用它：

```
$output = str_replace('.doc', '.txt', $filename);
shell_exec('/usr/bin/wvText ' . $filename . ' ' . $output);
$text = file_get_contents($output);
# Convert to UTF-8 if needed
if(!mb_detect_encoding($text, 'UTF-8', true))
{
    $text = utf8_encode($text);
}
unlink($output); 
```

# excel - 是否可以在 excel 验证下拉框中增加 256 个字符的限制？

> ID：90365
> 
> 赞同：4
> 
> 时间：2008-09-18T05:50:14.420
> 
> 标签：excel, vba

我正在动态创建验证并且已达到 256 个字符的限制。我的验证看起来像这样：

```
Level 1, Level 2, Level 3, Level 4..... 
```

除了指向一个范围之外，有没有办法绕过字符限制？

验证已经在 VBA 中生成。增加限制是避免对工作表当前工作方式产生任何影响的最简单方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-19T20:23:03.667

我很确定没有办法绕过 256 个字符的限制，Joel Spolsky 在这里解释了原因：http: [//www.joelonsoftware.com/printerFriendly/articles/fog0000000319.html](http://www.joelonsoftware.com/printerFriendly/articles/fog0000000319.html)。

但是，您可以使用 VBA 通过对 Worksheet_Change 事件进行编码来接近复制内置验证的功能。这是一个模拟给你的想法。您可能希望对其进行重构以缓存 ValidValues、处理对单元格范围的更改等...

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim ValidationRange As Excel.Range
Dim ValidValues(1 To 100) As String
Dim Index As Integer
Dim Valid As Boolean
Dim Msg As String
Dim WhatToDo As VbMsgBoxResult

    'Initialise ValidationRange
    Set ValidationRange = Sheet1.Range("A:A")

    ' Check if change is in a cell we need to validate
    If Not Intersect(Target, ValidationRange) Is Nothing Then

        ' Populate ValidValues array
        For Index = 1 To 100
            ValidValues(Index) = "Level " & Index
        Next

        ' do the validation, permit blank values
        If IsEmpty(Target) Then
            Valid = True
        Else
            Valid = False
            For Index = 1 To 100
                If Target.Value = ValidValues(Index) Then
                    ' found match to valid value
                    Valid = True
                    Exit For
                End If
            Next
        End If

        If Not Valid Then

            Target.Select

            ' tell user value isn't valid
            Msg = _
                "The value you entered is not valid" & vbCrLf & vbCrLf & _
                "A user has restricted values that can be entered into this cell."

            WhatToDo = MsgBox(Msg, vbRetryCancel + vbCritical, "Microsoft Excel")

            Target.Value = ""

            If WhatToDo = vbRetry Then
                Application.SendKeys "{F2}"
            End If

        End If

    End If

End Sub 
```

# build - 如何使用 rake 进行分层构建？

> ID：90367
> 
> 赞同：4
> 
> 时间：2008-09-18T05:50:53.093
> 
> 标签：build, rake

我最近开始使用 Rake 来构建我的一些（非 ruby​​）包。Rake 很好，但我发现缺少的是一种进行分层构建的方法（在子目录中聚合 Rakefiles）。由于这是大多数其他构建工具的常见功能，我想知道是否有更熟悉 Rake 的人有一个好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T05:53:32.633

我会推荐 Buildr 用于非 Ruby 构建任务。它基于 Rake（位于它之上，允许您使用 Rake 的所有功能），但更适合编译语言的语义。它还支持分层构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-23T20:07:51.407

我也想不出办法做到这一点。我最终做了：

```
SUBDIR = "subdir"
task :subtask => SRC_FILES do |t|
    chdir(SUBDIR) do 
        system("rake")
    end
end

task :subtaskclean do |t|
    chdir(SUBDIR) do 
        system("rake clean")
    end
end

task :subtaskclean do |t|
    chdir(SUBDIR) do 
        system("rake clobber")
    end
end

task :default => [:maintask, :subtask]
task :clean => :subtaskclean
task :clobber => :subtaskclobber 
```

有点烂 其实，真的很烂。我搜索了文档，但找不到相当于`<antcall>`

我敢肯定，因为它都是 Ruby 并且我*几乎不*知道 Ruby，所以有一些非常明显的方法来实现`require`它或其他东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-01T12:09:05.680

Buildr 使用范围的概念，加上项目的名称。

Rake.application.current_scope 应该是发现如何使用它们的入口点。我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-01T22:54:04.803

我用来解决这个问题的解决方法是：

```
Dir.chdir(File.dirname(Rake.application.rakefile)) 
```

该语句必须在每个 rakefile 的开头，在除根之外的层次结构中的每个级别上运行。一个在实践中如何工作的简短示例：

/耙文件：

```
task :default do
    sh "rake -f component/rakefile"
end 
```

/组件/rakefile

```
Dir.chdir(File.dirname(Rake.application.rakefile))

task :binary => OBJECTS do
    sh "gcc #{SOURCES} -Iinclude -o #{TARGET}"
end 
```

由于我是 rake 新手，我不相信这是解决它的最干净的方法，但这是我最终让它发挥作用的方式。

# google-visualization - 如何使用 Google Chart API 为 XY 散点图指定多个数据集？

> ID：90374
> 
> 赞同：0
> 
> 时间：2008-09-18T05:51:57.757
> 
> 标签：google-visualization

为什么这个 Google Chart API URL 不在这个 XY 散点图上呈现两个数据集？

```
http://chart.apis.google.com/chart?cht=lxy&chd=t:10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200|0.10,0.23,0.33,0.44,0.56,0.66,0.79,0.90,0.99,1.12,1.22,1.33,1.44,1.56,1.68,1.79,1.90,2.02,2.12,2.22|0.28,0.56,0.85,1.12,1.42,1.68,1.97,2.26,2.54,2.84,3.12,3.40,3.84,4.10,4.53,4.80,5.45,6.02,6.40,6.80&chco=3072F3,ff0000,00aaaa&chls=2,4,1&chs=320x240&chds=0,201,0,7&chm=s,FF0000,0,-1,5|s,0000ff,1,-1,5|s,00aa00,2,-1,5 
```

我一遍又一遍地阅读[文档](http://code.google.com/apis/chart/)，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-26T22:48:15.437

首先澄清一点。您谈论的是“XY 散点图”，但这些实际上是 Google Chart API 中的两种不同的图表类型。您的 URL 指的是 cht=lxy 参数，它是一个[XY 折线图](http://code.google.com/apis/chart/types.html#line_charts)。

您的 URL 的第一个问题是您的数据参数 (chd)。由于它是[XY 折线图](http://code.google.com/apis/chart/types.html#line_charts)，因此必须**成对**定义数据集，但我看到奇数个数据集 (3)。

Christian D 的回答不正确。没有百分比要求。

最好使用[包装 API](http://groups.google.com/group/google-chart-api/web/useful-links-to-api-libraries)来抽象出许多丑陋的细节。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-09-18T06:00:55.893

我认为它实际上确实渲染了两个数据集，但是您只能选择其中一个，因为 y 轴上只有一个刻度。（换句话说，0.10 太小而无法显示。）

而且，你真的应该使用百分比。100 是接受的最高值：

> 其中图表数据字符串由从零 (0.0) 到一百 (100.0) 的正浮点数组成

# file - 如何从 MS Word 创建 PCL 文件

> ID：90401
> 
> 赞同：4
> 
> 时间：2008-09-18T05:58:45.710
> 
> 标签：file, ms-word, printer-control-language

如何创建类似于现有 MS doc 的新 PCL 文件。我有 MS doc 模板并将其替换为实际数据。我需要为 PCL 格式实现相同的功能（将 PCL 文件创建为模板并将其替换为数据库中的实际值并将其发送到传真）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-18T07:11:39.623

1.  安装新打印机
2.  当被要求提供端口时，创建一个“本地端口”类型的新端口
3.  作为端口的名称，输入一些文件名，例如`c:\temp\print.pcl`
4.  选择一些与 PCL 兼容的打印机，例如 HP LaserJet 4，或任何与您的传真兼容的打印机

当您打印到此打印机时，Windows 会将输出写入该文件。

许多程序允许您将打印重定向到文件；在这种情况下，您可以为每个打印作业选择不同的文件名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-19T15:38:42.493

如果您尝试生成实际模板（PCL 宏）以与数据合并，则需要使用 PCL 驱动程序生成 PCL 输出并将其转换为 PCL 宏。

一个典型的情况是您有一个覆盖被下载到打印机并且来自主机系统（Unix、AS/400 等）的数据发送的数据被叠加在覆盖上。对于从主机应用程序、点阵打印机、预打印表格 --> 相同的主机应用程序、激光打印机、空白纸迁移的客户，我们经常这样做。

使用标准 PCL 驱动程序使用打印到文件生成输出（HP LaserJet 5 和 4000 是我在其他制造商设备上使用这些 PCL 文件方面最成功的驱动程序）。之后，您必须转换为 PCL 宏。这是一个特殊的 PCL 文件，它不包含某些元素，例如换页等。基本上任何类型的命令都会导致页面弹出。它还包含将其定义为宏并为其提供 ID 的代码。

a一旦创建，您可以发送带有转义序列的标准文本以触发表单。

&f#y3X 其中 # 是宏 ID（也可以是 &f#y2X、&f#y4X，具体取决于您的需要）

如果您有 PCL 经验，您可以自己转换这些文件；但是，我建议您坚持使用现有的一些工具。其中一些包括：

*   Lexmark 自定义打印机驱动程序（我倾向于使用 T616，您会在“用户自定义”选项卡下找到您需要的选项）
*   HP 表单和字体管理器
*   PCLWorks（查看 PCL，还将图像格式转换为 PCL 宏）

另一个技巧有时是添加触发代码。如果您可以控制主机应用程序并且允许插入控制代码，则这不是问题。但是，如果您不这样做，您可以在 Unix 中使用 shell 脚本，在 OS/400 中使用工作站自定义对象，甚至使用 Windows 打印机队列中的分隔表功能来插入命令（您需要使用 @F 命令）。

您可能需要检查此链接。PCL 宏有一整节： [HP PCL 参考指南](http://h20000.www2.hp.com/bc/docs/support/SupportManual/bpl13210/bpl13210.pdf)

希望这是您正在寻找的。这可能有点复杂。如果您需要更多信息，请在此帖子中发表评论，我将添加更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T07:35:05.657

我找到了简单的解决方案并且它有效。使用工具（可在网上获得）将 .doc 文件 tamplete 转换为 PCL。在edit plus中打开它并学习...我相信我可以根据需要对其进行修改。如果您检查它，您将看到每个字符都具有其位置示例： *p0Y* p796Y*p1582Xn - 表示字符 n 在屏幕上的位置（x 轴 1582 和 y 轴 796）。所以现在我可以改变任何东西，根据我的需要在位置添加新对象、线条等。我知道这很乏味，但对我有用....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-27T02:43:12.307

您可以使用 FOP 生成 PCL。

如果您可以使用 docx 格式，则 docx4j 可以使用 FOP 进行输出。

（如果您必须使用 .doc，则 docx4j 使用 poi hwpf 进行了基本转换）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-12-31T17:41:45.500

PCLWorks 程序带有 Img2PCL.exe。Img2PCL 将 JPG 或 TIFF 图像转换为标志、签名、表格覆盖等的宏。它是 89 美元。并且，还附带 PCLCodes 将 PCL 反汇编成可读的英文。并且，用作 PCL 的学习工具。www.pclworks.com

# winapi - 如何让系统托盘（通知区域）图标接收 WM_MOUSEWHEEL 消息？

> ID：90411
> 
> 赞同：3
> 
> 时间：2008-09-18T06:01:06.690
> 
> 标签：winapi

我想扩展我制作的现有应用程序，通过在通知区域图标上滚动来设置混音器音量。

据我所知，通知区域没有收到任何 WM_MOUSEWHEEL 消息，但我仍然找到了一个完全符合我想要实现的应用程序（[http://www.actualsolution.com/power_mixer](http://www.actualsolution.com/power_mixer/)）。使用 WinspectorSpy，我注意到应用程序的表单收到了一些奇怪的消息：0x000003d0 和 0x000003d1，但我没有找到关于它们的参考。

有谁知道我如何实现所需的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T07:30:18.317

如果您想在应用程序之外捕获鼠标/键盘事件，您将需要[Low-level Hooks](http://msdn.microsoft.com/en-us/library/ms997537.aspx)。

一篇关于在 Delphi 中安装鼠标挂钩的不错的初学者文章是Zarko Gajic 撰写的关于 About.com 上[的 How to Hook the Mouse to Catch Events Outside your application 。](http://delphi.about.com/od/windowsshellapi/a/mousehook.htm)

启动您的应用程序的用户将需要管理权限才能安装挂钩。

捕获消息后，您应该确定它是否在通知栏中的图标上方（这可能很困难，因为没有确切的 api 来获取您在栏上的位置），然后处理滚动事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T07:50:06.863

我解释了鼠标挂钩，并提到可能很难找到您的确切图标。我确实找到了以下有关如何找到托盘图标的文章。

[CTrayIconPosition - 我的托盘图标在哪里？](http://www.codeproject.com/KB/shell/ctrayiconposition.aspx?fid=14631&df=90&mpp=25&noise=3&sort=Position&view=Quick&select=999295&fr=39)由 Irek Zielinski。我认为，如果您尝试了解它的工作原理，则可以将其转过来并使用它来检查您的鼠标当前是否位于图标上方。

但是您应该首先检查鼠标是否在托盘区域中。我找到了一些我的旧代码（2005），它定位了正确的区域。

```
var
 hwndTaskBar, hwndTrayWnd, hwndTrayToolBar : HWND;
 rTrayToolBar : tRect;
begin
 hwndTaskBar  := FindWindowEx (0, 0, 'Shell_TrayWnd', nil);
 hwndTrayWnd  := FindWindowEx (hwndTaskBar , 0, 'TrayNotifyWnd',nil);
 hwndTrayToolBar := FindWindowEx(hwndTrayWnd, 0, 'ToolbarWindow32',nil);

 Windows.GetClientRect(hwndTrayToolBar, rTrayToolBar);
end 
```

使用这段代码和上述文章中的知识，我认为您可以实现您想要的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T06:13:33.943

不确定这是否能解决问题，但作为起点可能值得一试。您可以创建一个顶级透明窗口，然后将其放置在任务栏图标的顶部。当鼠标悬停在顶层窗口上时，它会收到鼠标通知。然后，您可以根据需要处理它们。我不知道如何找到任务栏图标的屏幕位置，因此这可能是个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T06:34:25.563

我不知道这是否会对您有所帮助，但在 Delphi 中，标准消息库指出：

**WM_MOUSEWHEEL = $020A；**

如果您让 as 知道您使用的是哪种语言，这也会很有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-11T00:51:12.277

只是想我会指出 Power Mixer 正在整个任务栏上捕获滚轮事件，而鼠标中键单击仅在系统托盘图标上操作。

# python - python中最好/最容易使用的加密库是什么

> ID：90413
> 
> 赞同：21
> 
> 时间：2008-09-18T06:01:37.297
> 
> 标签：python, encryption, gnupg, pgp

我想使用 python 加密几个文件我可以使用任何标准/著名的 python 库使用 gpg/pgp 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-18T06:04:40.050

[PyCrypto](http://www.pycrypto.org)似乎是最好的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-18T06:09:43.640

试试[KeyCzar](http://code.google.com/p/keyczar/)

很容易实现。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-18T08:30:53.363

我使用[GPGme GPGme的主要优势在于它可以按照 OpenPGP 标准 (](http://www.gnupg.org/related_software/gpgme/index.en.html) [RFC 4880](http://www.ietf.org/rfc/rfc4880.txt) )读写文件，如果您想与其他 PGP 程序进行互操作，这很重要。

它有一个[Python 接口](http://pyme.sourceforge.net/)。警告：它是一个低级接口，不是很 Pythonic。

如果您阅读法语，[请参阅示例](http://www.bortzmeyer.org/gpgme.html)。

这是一个，检查签名：

```
signed = core.Data(sys.stdin.read())
plain = core.Data()
context = core.Context()

context.op_verify(signed, None, plain)
result = context.op_verify_result()

sign = result.signatures
while sign:
    if sign.status != 0:
        print "BAD signature from:"
    else:
        print "Good signature from:"
    print "  uid:        ", context.get_key(sign.fpr, 0).uids.uid
    print "  timestamp:  ", sign.timestamp
    print "  fingerprint:", sign.fpr
    sign = sign.next 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-10-13T07:08:53.373

我使用[pyOpenSSL ，它是](http://www.egenix.com/products/python/pyOpenSSL/)[OpenSSL](http://www.openssl.org/)的 python 绑定，已经存在了很长时间并且经过了很好的测试。我为我的应用程序做了一些基准测试，这是非常密集的加密货币，并且在与 pyCrypto 的比赛中胜出。YMMV。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-18T06:14:16.377

请参阅 Google 的[Keyczar](http://code.google.com/p/keyczar/)项目，该项目为 PyCrypto 的功能提供了一组很好的接口。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T11:12:45.347

我喜欢 pyDes ( [http://twhiteman.netfirms.com/des.html](http://twhiteman.netfirms.com/des.html) )。它不是最快的，但它是纯 Python 并且适用于少量加密数据。

# bash - 基于进程退出代码的退出 Shell 脚本

> ID：90418
> 
> 赞同：386
> 
> 时间：2008-09-18T06:03:48.070
> 
> 标签：bash, shell

我有一个执行许多命令的 shell 脚本。如果任何命令以非零退出代码退出，我如何使 shell 脚本退出？

* * *

## 回答 #1

> 赞同：502
> 
> 时间：2008-09-18T06:08:52.677

在每个命令之后，可以在`$?`变量中找到退出代码，因此您将拥有如下内容：

```
ls -al file.ext
rc=$?; if [[ $rc != 0 ]]; then exit $rc; fi 
```

您需要小心管道命令，因为它`$?`只会为您提供管道中最后一个元素的返回码，因此，在代码中：

```
ls -al file.ext | sed 's/^/xx: /" 
```

如果文件不存在，则不会返回错误代码（因为`sed`管道的部分实际工作，返回 0）。

shell 实际上提供了一个可以在这种情况下提供帮助的`bash`数组，即`PIPESTATUS`. 该数组对于每个管道组件都有一个元素，您可以像这样单独访问`${PIPESTATUS[0]}`：

```
pax> false | true ; echo ${PIPESTATUS[0]}
1 
```

请注意，这是为您提供`false`命令的结果，而不是整个管道。您还可以根据需要处理整个列表：

```
pax> false | true | false; echo ${PIPESTATUS[*]}
1 0 1 
```

如果你想从管道中获取最大的错误代码，你可以使用类似的东西：

```
true | true | false | true | false
rcs=${PIPESTATUS[*]}; rc=0; for i in ${rcs}; do rc=$(($i > $rc ? $i : $rc)); done
echo $rc 
```

`PIPESTATUS`这依次遍历每个元素，`rc`如果它大于先前的`rc`值，则将其存储。

* * *

## 回答 #2

> 赞同：225
> 
> 时间：2008-09-18T06:10:19.613

如果要使用`$?`，则需要在每个命令后检查它，因为`$?`在每个命令退出后都会更新。这意味着如果你执行一个管道，你只会得到管道中最后一个进程的退出代码。

另一种方法是这样做：

```
set -e
set -o pipefail 
```

如果你把它放在 shell 脚本的顶部，看起来 Bash 会为你处理这个问题。正如之前的海报所指出的，“set -e”将导致 Bash 在任何简单命令上出现错误并退出。“set -o pipefail”也会导致 Bash 在管道中的任何命令上出现错误并退出。

有关此问题的更多讨论， 请参见[此处](http://www.linuxquestions.org/questions/programming-9/bash-scripting-problem-with-exit-codes-444852/)或[此处。](http://steve-parker.org/sh/exitcodes.shtml)[这](http://www.gnu.org/software/bash/manual/bashref.html#The-Set-Builtin)是`set`内置的 Bash 手册部分。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2008-09-18T06:09:55.997

" `set -e`" 可能是最简单的方法。只需将其放在程序中的任何命令之前即可。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2008-09-18T06:11:37.270

如果你只是在 Bash 中不带任何参数地调用 exit，它将返回最后一个命令的退出代码。结合`OR`，如果前一个命令失败，Bash 应该只调用 exit。但我没有测试过这个。

```
命令1 || 出口;
命令2 || 出口;

```

Bash 还会将最后一个命令的退出代码存储在变量 中`$?`。

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2011-11-08T03:10:42.363

```
[ $? -eq 0 ] || exit $?; # Exit for nonzero return code 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2009-01-29T22:07:24.973

[http://cfaj.freeshell.org/shell/cus-faq-2.html#11](http://cfaj.freeshell.org/shell/cus-faq-2.html#11)

11.  如何获得`cmd1`in的退出代码`cmd1|cmd2`

    首先，请注意`cmd1`退出代码可能不为零，但并不意味着错误。这发生在例如

    ```
    cmd | head -1 
    ```

    您可能会观察到 141（或带有 ksh93 的 269）退出状态`cmd1`，但这是因为在读取一行后终止`cmd`时被 SIGPIPE 信号中断。`head -1`

    了解管道元素的退出状态 `cmd1 | cmd2 | cmd3`

    一种。使用[Z 壳](https://en.wikipedia.org/wiki/Z_shell)( `zsh`)：

    退出代码在 pipestatus 特殊数组中提供。 `cmd1`退出代码在`$pipestatus[1]`，`cmd3`退出代码在 `$pipestatus[3]`，所以`$?`总是与 `$pipestatus[-1]`.

    湾。与重击：

    退出代码在`PIPESTATUS`特殊数组中提供。 `cmd1`退出代码在`${PIPESTATUS[0]}`，`cmd3`退出代码在 `${PIPESTATUS[2]}`，所以`$?`总是与 `${PIPESTATUS: -1}`.

    ...

    有关更多详细信息，请参阅*[Z shell](https://en.wikipedia.org/wiki/Z_shell)*。

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2008-09-18T06:18:53.760

对于重击：

```
# This will trap any errors or commands with non-zero exit status
# by calling function catch_errors()
trap catch_errors ERR;

#
# ... the rest of the script goes here
#

function catch_errors() {
   # Do whatever on errors
   #
   #
   echo "script aborted, because of errors";
   exit 0;
} 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2008-09-18T06:08:32.850

在 Bash 中，这很容易。只需将它们绑在一起`&&`：

```
command1 && command2 && command3 
```

您还可以使用嵌套的*if*构造：

```
if command1
   then
       if command2
           then
               do_something
           else
               exit
       fi
   else
       exit
fi 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-02-19T20:47:42.987

```
#
#------------------------------------------------------------------------------
# purpose: to run a command, log cmd output, exit on error
# usage:
# set -e; do_run_cmd_or_exit "$cmd" ; set +e
#------------------------------------------------------------------------------
do_run_cmd_or_exit(){
    cmd="$@" ;

    do_log "DEBUG running cmd or exit: \"$cmd\""
    msg=$($cmd 2>&1)
    export exit_code=$?

    # If occurred during the execution, exit with error
    error_msg="Failed to run the command:
        \"$cmd\" with the output:
        \"$msg\" !!!"

    if [ $exit_code -ne 0 ] ; then
        do_log "ERROR $msg"
        do_log "FATAL $msg"
        do_exit "$exit_code" "$error_msg"
    else
        # If no errors occurred, just log the message
        do_log "DEBUG : cmdoutput : \"$msg\""
    fi

} 
```

# sockets - 实现实时多人游戏存在哪些问题

> ID：90423
> 
> 赞同：15
> 
> 时间：2008-09-18T06:05:14.370
> 
> 标签：sockets, networking, tcp, udp, multiplayer

我有一些使用套接字制作多人**回合制**游戏的经验，但我从未尝试过实时动作游戏。我需要处理哪些额外的问题？我是否需要保留玩家行为的历史记录，以防落后玩家过去做某事？我真的需要使用 UDP 数据包还是 TCP 就足够了？还有什么？

我还没有真正决定要制作什么，但出于这个问题的目的，您可以考虑一个 10 人 2D 游戏与 XY 运动。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-18T07:51:00.980

*   “客户端服务器”或“点对点”或介于两者之间的东西：哪台计算机有权控制哪些游戏操作。

对于回合制游戏，通常很容易说“服务器拥有最终权限，我们完成了”。对于实时游戏，这种设计通常是一个很好的起点，但是一旦您添加延迟，客户端的移动/动作就会感觉没有响应。因此，您添加了某种“延迟隐藏”，允许客户端输入立即影响其角色或单位以解决该问题，现在您必须在客户端和服务器的游戏状态开始分歧时处理协调问题。9 次超过 10 次就好了，你将客户影响的对象弹出或 lerp 到权威位置，但是 10 次中有 1 次是当对象是玩家头像或其他东西时，这个解决方案是不可接受的，所以你开始授予客户对某些操作的权限。现在你必须协调服务器上的多个游戏状态，如果你关心这类事情，你必须通过恶意客户端向潜在的“作弊”敞开心扉。这基本上是每个传送/欺骗/任何错误/作弊出现的地方。

当然，您可以从“每个客户都对“他们的”对象拥有权限”的模型开始，而忽略作弊问题（在很多情况下都可以）。但是现在，如果该客户端退出，或者甚至“在跟上模拟的速度上落后了一点”，你很容易受到对游戏模拟的巨大影响——实际上每个玩家的游戏最终都会受到/感受到滞后或表现不佳的客户端，其形式是等待滞后的客户端赶上，或者让他们控制的游戏状态不同步。

*   “同步”或“异步”

确保所有玩家都在相同游戏状态下操作的常见策略是简单地同意玩家输入列表（通过上述模型之一），然后让游戏模拟在所有机器上同步播放。这意味着模拟逻辑必须完全匹配，否则游戏将不同步。这实际上比听起来更容易也更难。这更容易，因为游戏只是代码，并且当它给出相同的输入（甚至是随机数生成器）时，代码的执行几乎完全相同。这更难，因为有两种情况并非如此：（1）当您在游戏模拟之外不小心使用随机数时，以及（2）当您使用浮点数时。前者通过对哪些游戏系统使用哪些 RNG 有严格的规则/断言来纠正。后者通过不使用浮点数来解决。（浮点数实际上有 2 个问题，一个是根据您项目的优化配置，它们的工作方式非常不同，但即使解决了，它们在不同的处理器架构 atm 上的工作方式也不一致，哈哈）。星际争霸/魔兽争霸和任何提供“重播”的游戏最有可能使用此模型。事实上，拥有回放系统是测试 RNG 是否保持同步的好方法。

使用异步解决方案，游戏状态当局只需以某种频率将整个状态广播给所有其他客户端。客户端获取这些数据并将其放入他们的游戏状态（并且通常会进行一些简单的推断，直到他们获得下一次更新）。这就是“udp”成为一个可行选项的地方，因为您每隔约 1 秒左右就会向整个游戏状态发送垃圾邮件，删除这些更新的一部分是无关紧要的。对于游戏状态相对较少的游戏（地震、魔兽世界），这通常是最简单的解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-18T06:10:47.943

设置多人游戏涉及一些因素

1.  协议，重要的是您决定是否需要 TCP 或 UDP。UDP 的开销较小，但不能保证交付。相反，TCP 更值得信赖。每场比赛都会有他们喜欢的协议。例如，UDP 适用于第一人称射击游戏，但可能不适合信息需要一致的 RTS

2.  防火墙/连接。确保您的多人游戏不必进行 2000 个出站连接并使用标准端口，以便轻松进行端口转发。将它与 Windows 防火墙连接可能是一个额外的好处。

3.  带宽。这很重要，您打算通过网络连接推送多少数据？我想这将归结为播放测试和记录吞吐量。如果您要求每个客户端超过 200kb/s，您可能需要重新考虑一些事情。

4.  服务器负载。这一点也很重要，一个服务器需要多少处理才能完成一个正常的游戏？您是否需要一些具有 16GB RAM 的超 8 核服务器来运行它？有没有办法减少呢？

我想还有更多，但你真的想要一款可以通过网络和各种连接轻松玩的游戏。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-18T07:04:33.947

计划是你最好的朋友。弄清楚你真正的需求是什么。

加载数据：是否每台计算机都将具有相同的模型和图形，只是名称和位置在网络上移动。如果每个玩家都可以自定义他们的角色或其他物品，那么您将不得不移动这些数据。

作弊：你有必要担心吗？你能相信每个客户所说的话。如果不是，那么您的服务器端逻辑看起来与您的客户端逻辑不同。想象一下这个简单的例子，你的 10 名玩家中的每一个都可能因为能量提升而有不同的移动速度。为了最大限度地减少作弊，您应该计算每个玩家可以在服务器的通信更新之间移动多远，否则玩家可以在那里加速并且没有任何东西可以阻止他们。如果玩家总是比预期快一点或有一次跳跃，服务器只会将他们重新定位在可能的最近位置，因为这可能是时钟偏差或一次通信中断。但是，如果玩家不断地移动两次，那么将他们踢出游戏可能是明智的。数学越多，

点对点如何：即使游戏将是点对点的，您可能希望让一个玩家开始游戏并将其用作服务器，这比尝试管理一些更基于云的游戏要容易得多方法。如果没有服务器，那么您需要制定一个协议来解决两台游戏状态不一致的机器之间的争议。

再次计划是您最好的朋友计划，计划，计划。如果你对一个问题思考得足够多，你就可以想办法解决大部分问题。然后，您可以开始考虑尚未解决的问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-18T06:46:59.120

避免作弊有多重要？[您可以信任来自客户端的任何信息，还是可以信任和验证它们？]

**对象模型 对象** 如何从一台机器传送到另一台机器？如何对对象执行操作？

您是在做客户端/服务器还是点对点？

**随机数** 如果您进行点对点操作，那么您需要使它们保持同步并且随机数同步。

如果你在做客户端/服务器，你如何处理滞后？[航位推算？]

网络编码涉及到很多重要的问题。

查看 RakNet，它可以免费下载代码，它是讨论组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-18T07:24:11.870

如果您在 LAN 上运行，则 TCP 很好。但是如果你想在线玩，你必须使用UDP并实现你自己的类TCP层：需要通过throw NAT路由器。

您需要在对等或客户端-服务器通信之间进行选择。在客户端-服务器模型中，同步和世界状态更容易实现，但您可能缺乏在线反应性。在 Pee-to-peer 中，它更复杂，但对玩家来说更快。

不要为游戏目的保留玩家行动的历史（这样做，但仅用于重播功能）。如果你达到了必要的程度，最好让每个玩家等待。

# ldap - 是否有提供故障转移的 ldap C/C++ 库？

> ID：90428
> 
> 赞同：1
> 
> 时间：2008-09-18T06:07:20.823
> 
> 标签：ldap, failover

我正在寻找 C 或 C++ 中的 LDAP 库，它允许我指定 LDAP 主机名列表而不是单个主机名。然后库应该使用它可以连接的第一个，以防一个或多个服务器停机。我确信包装一个现有的库来创建它很容易，但为什么要重新发明轮子呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-14T00:06:19.063

使用多个 A 记录，每个记录具有不同的 IP。

```
ldapserver.example.com.    IN A    1.2.3.4
ldapserver.example.com.    IN A    2.3.4.5 
```

OpenLDAP 客户端库将依次尝试每个主机。故障转移（不幸的是）与您的 TCP 连接超时一样慢......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-25T16:06:58.997

Novell cldap[库](http://developer.novell.com/wiki/index.php/Cldap)（和 java 库）在连接时支持以空格分隔的主机列表。如页面中所述，它将依次尝试每个[`ldap_init()`](http://developer.novell.com/documentation/cldap/ldaplibc/index.html?page=/documentation/cldap/ldaplibc/data/a3m14np.html)。

openldap libldap 库还支持传递给的主机的空格分隔列表`ldap_open()`或传递给的逗号分隔列表`ldap_initialize()`。

唯一的问题是确保处理`LDAP_SERVER_DOWN`连接消失后返回的错误。我通常编写一个包装函数来尝试操作（即：搜索），并在发生时尝试重新连接`LDAP_SERVER_DOWN`，然后再次执行操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-09-18T07:09:43.543

我不能说我听说过一个。此外，我使用的大多数支持 LDAP 的软件对故障转移的支持很差或根本不支持。您最好尝试在服务器上实现故障转移，将其置于负载均衡器或类似设备之后。

# vxworks - 我怎么知道为什么我的 vxWorks 任务之一被挂起？

> ID：90433
> 
> 赞同：3
> 
> 时间：2008-09-18T06:08:20.727
> 
> 标签：vxworks

在 vxWorks 中，我可以在 shell 中发出“i”命令，并获得系统中的任务列表以及一些信息，如下例所示：

```
  名称 ENTRY TID PRI STATUS PC SP ERRNO 延迟
---------- ------------ -------- --- ---------- -------- - -------- -------- -----
tJobTask 1005a6e0 103bae00 0 挂起 100e5860 105fffa8 0 0
tExcTask 10059960 10197cbc 0 挂起 100e5860 101a0ef4 0 0
tLogTask logTask 103bed78 0 PEND 100e37cd 1063ff24 0 0
tNbioLog 1005b390 103bf210 0 挂起 100e5860 1067ff54 0 0

```

对于待处理的任务，我想知道它们是待处理的。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-18T06:09:15.670

“w”命令将完全按照您的要求执行：

```
  名称输入 TID 状态延迟 OBJ_TYPE OBJ_ID OBJ_NAME
---------- ---------- ---------- ---------- ----- ----- ----- ---------- --------
tJobTask 0x1005a6e0 0x103bae00 PEND 0 SEM_B 0x10184088 不适用     
tExcTask 0x10059960 0x10197cbc PEND 0 SEM_B 0x10183ff8 不适用     
tLogTask logTask 0x103bed78 PEND 0 MSG_Q(R) 0x103be358 N/A     
tNbioLog 0x1005b390 0x103bf210 挂起 0 SEM_B 0x103bf198 不适用     

```

# web-services - 为什么要使用 REST 而不是基于 SOAP 的服务？

> ID：90451
> 
> 赞同：153
> 
> 时间：2008-09-18T06:12:21.543
> 
> 标签：web-services, rest

今天参加了一个关于 REST 的有趣演示，但是，我想不出一个原因（也没有提出）为什么 REST 在使用和实现方面比基于 SOAP 的服务堆栈更好或更简单。

为什么“现实世界”中的任何人都使用 REST 而不是基于 SOAP 的服务的一些原因是什么？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2008-09-18T06:18:19.737

更少的开销（没有 SOAP 信封来包装每个调用）

更少的重复（HTTP 已经表示了 DELETE、PUT、GET 等必须在 SOAP 信封中表示的操作）。

更标准化 - HTTP 操作易于理解且操作一致。一些 SOAP 实现可能会变得很挑剔。

更具人类可读性和可测试性（仅使用浏览器更难测试 SOAP）。

不需要使用 XML（你也不需要使用 SOAP，但这几乎没有意义，因为你已经在解析信封了）。

库使 SOAP（有点）变得简单。但是正如我所指出的，您正在抽象出很多冗余。是的，理论上 SOAP 可以通过其他传输，以避免在层上执行类似的操作，但实际上，您所做的几乎所有 SOAP 工作都是通过 HTTP 进行的。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2008-09-18T06:21:37.950

[RESTful](http://en.wikipedia.org/wiki/Representational_State_Transfer)服务比基于[SOAP](http://en.wikipedia.org/wiki/SOAP)的（常规）服务更易于使用。这样做的原因是 REST 基于正常的 HTTP 请求，可以从发出的请求类型（GET = retrive，POST = write，DELETE = remove 等）推断出意图，并且是完全无状态的。另一方面，您可能会争辩说它不那么灵活，因为它取消了包含请求上下文的消息信封的概念。

根据我的经验，企业内的服务首选 SOAP，而公开为公共 API 的服务首选 REST。

使用 .NET 框架中的 WCF 等工具，将服务实现为 REST 或 SOAP 非常简单。

一些相关阅读：

*   [亚马逊网络服务博客：REST 与 SOAP](http://aws.typepad.com/aws/2005/09/rest_vs_soap.html)
*   [Dare Obasanjo 经常写关于 REST 的文章](http://www.google.com/search?q=rest+site%3A25hoursaday.com&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-09-18T06:16:45.887

我假设当您说“Web 服务”时，您指的是 SOAP 和 WS-* 标准集。（否则，我可以说 REST 服务*是*“Web 服务”。）

规范的论点是 REST 服务更接近于 Web 的设计——即 HTTP 和相关基础设施的设计。因此，使用 REST 服务将更兼容现有的 Web 工具和技术。

当然，一旦深入了解细节，您就会发现这两种方法在不同的场景中都有优势。是你感兴趣的那些细节吗？

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-04-25T21:15:44.417

开销不如良好的架构那么重要。

REST 不是一种协议，它是一种鼓励良好可扩展设计的架构。经常选择它是因为 RPC 中过多的自由很容易导致糟糕的设计。

另一个原因是基于 HTTP 的 RESTful 协议的可预测成本，因为它可以利用现有技术（主要是代理）。RPC 初始成本相当低，但随着负载的增加，它往往会显着增加。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-18T06:23:38.617

必须阅读 Roy Fielding 关于该主题的最出色的[论文](http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)。他提出了一个很好的案例，并且在他写这篇文章时绝对领先于他的时代（2000 年）**。**

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-09-18T06:43:37.413

REST 与实现无关并且更加透明，这使得它非常适合公共 API，特别是对于像 Flickr、Amazon 或 Digg 这样使用 API 作为营销工具并真正希望人们使用他们的数据的大型网站。他们*不*希望手握 1000 多名试图调试他们选择的脚本语言的有缺陷的 SOAP 库的新手开发人员。

与 SOAP 和 WSDL 相比，后者更适用于内部应用程序，在这些应用程序中，您都有嵌入式库和两端都知道的聪明人。（而且您可能不必关心诸如 Internet 规模的负载平衡、HTTP 缓存等之类的事情。）然后您将获得自记录的 API、保留类型等，而且工作量为零。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-09-18T06:24:37.070

[Steve Vinoski 的博客](http://steve.vinoski.net/blog/)和他的[最新文章](http://steve.vinoski.net/blog/internet-computing-columns/)绝对值得细读。他是前 CORBA 专家，他与 Michi Henning 一起撰写了可能是该主题最好的书，[“Advanced CORBA® Programming with C++”](http://www.informit.com/store/product.aspx?isbn=0201379279)。然而，他已经看到了他的客户端/服务器方式的错误，现在对 REST 发誓。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-09-23T20:16:45.973

REST 允许**缓存**您的非变异操作（通常使用 GET 动词） 。也就是说，由客户端缓存和/或由代理缓存。这可能是一个巨大的胜利！

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-18T06:16:29.583

REST 基本上只是一种实现 Web 服务的方式。这只是一种正确使用 HTTP 来查询您尝试访问的 Web 服务的方法。

[http://www.xfront.com/REST-Web-Services.html](http://www.xfront.com/REST-Web-Services.html) [http://en.wikipedia.org/wiki/Representational_State_Transfer](http://en.wikipedia.org/wiki/Representational_State_Transfer)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-18T06:38:38.970

它超级简单且纤薄。您可以通过 http 动词在浏览器中执行此操作：GET。我还没有找到可以轻松手动执行通用 http POST 请求的浏览器

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-07-04T05:53:22.773

这里有一个数据点：亚马逊提供 REST 和 SOAP 格式的 API，85% 的使用是 REST。

REST 更容易实现、更容易理解和更高的性能。

# x86 - CPU序列号

> ID：90462
> 
> 赞同：17
> 
> 时间：2008-09-18T06:15:38.103
> 
> 标签：x86, license-key, serial-number

如何获取 PC 中 CPU 的序列号？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2010-01-27T22:25:10.067

在没有任何外部库的情况下，我对此有最终的答案。只需输入：

**wmic bios获取序列号**

这将为您提供 PC 机箱上的序列号；）（在微软的知识库中找到）

问候！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-18T06:41:01.537

请记住，如今大多数计算机出厂时都在 BIOS 中禁用了 CPU ID。参见[维基百科上的 CPUID](http://en.wikipedia.org/wiki/CPUID "CPUID [维基百科]")

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-05T13:18:52.273

Intel CPU 中 Pentium III 之后没有 CPU 序列号（PSN；CPUID edx bit 18 "psn" Processor Serial Number）；AMD芯片中从来没有任何psn：

[https://software.intel.com/en-us/forums/watercooler-catchall/topic/308483（2005](https://software.intel.com/en-us/forums/watercooler-catchall/topic/308483) 年）

> 但是，请记住，只有 Pentium III Xeon、Mobile Pentium III 和 Pentium III 处理器支持 Pentium III 处理器引入的处理器序列号功能。没有其他英特尔处理器支持处理器序列号功能

[https://en.wikipedia.org/wiki/Pentium_III#Controversy_about_privacy_issues](https://en.wikipedia.org/wiki/Pentium_III#Controversy_about_privacy_issues)

[https://en.wikipedia.org/wiki/CPUID#EAX=3:_Processor_Serial_Number](https://en.wikipedia.org/wiki/CPUID#EAX=3:_Processor_Serial_Number)

> EAX=3：处理器序列号 另见：Pentium III § 关于隐私问题的争议
> 
> 这将返回处理器的序列号。处理器序列号是在 Intel Pentium III 上引入的，但出于隐私考虑，以后的型号上不再实现此功能（PSN 功能位始终被清除）。Transmeta 的 Efficeon 和 Crusoe 处理器也提供此功能。但是，AMD CPU 不会在任何 CPU 型号中实现此功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-15T07:55:57.153

这是旧线程。但是我遇到了同样的问题，但是我得到了以下逻辑，没有太多的 if、ands 或 buts。

CPU序列号的问题在于它并不总是在虚拟化环境中工作。

我使用一组基于 Windows 的服务器执行了以下逻辑：

`Win32_BIOS`可以为您提供bios的序列号。我们需要记住，如果系统是虚拟化的，您最终可能会为所有服务器获得相同的 bios 序列号。

`Win32_NetworkAdapter`可以为您提供一个您也可以使用的 MAC。在您有多个 NIC 的情况下，您最终会得到多个 MAC。

结合这两个 ID，我拥有一组跨越物理和虚拟的 6000 台服务器的所有唯一集。`ManagementClass`使用&实现这非常简单`ManagementObject`。

*但请注意：当您尝试`MO`远程获取实例时，在延迟小于 5 毫秒的 10Gbps 光网络上将需要几秒钟以上的时间。因此，如果您进行数学计算，我在单线程操作上花费了 3 多个小时。由于这更像是一个低优先级的流量，我不想向我的网络发送垃圾邮件以收集`WMI`多线程调用的数据。*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-18T06:43:19.597

即使启用了 CPUID，现代处理器中实际上是否有可用的序列号？我记得在 Pentium 的 3 天里，当整个序列号问题被提出时，引起了很大的抗议。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-11T21:20:37.260

Ivy Bridge CPU 和更新的 CPU 都包含 PPIN（受保护的处理器标识号）。计算机的固件可能会阻止访问此功能。

[https://lore.kernel.org/patchwork/patch/736614/](https://lore.kernel.org/patchwork/patch/736614/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-11T16:25:51.393

`__get_cpuid (unsigned int __level, unsigned int *__eax, unsigned int *__ebx, unsigned int *__ecx, unsigned int *__edx);`

*   标题：`#include <cpuid.h>`

***注意：***处理器序列号是在 Intel Pentium III 上引入的，但出于隐私考虑，此功能不再在以后的型号上实现。

来源：[维基百科](https://en.wikipedia.org/wiki/CPUID)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-02T03:58:36.337

使用正确的寄存器设置执行 CPUID 指令将检索 EAX、EBX、ECX 和 EDX 中的处理器序列号。但是，此功能仅在 Pentium 3 和更高版本的处理器上可用。同样在 Pentium 4 和更新的处理器上，该指令总是在所有 4 个寄存器中返回 0x00000000。后来的型号 Pentium 3 也可能返回 0x00000000。该功能主要针对复制保护，允许将软件链接到特定处理器。它在社区中没有得到很好的解决，随之而来的是诉讼。该功能已从最新型号 P3 和所有较新的处理器中删除。出于兼容性原因，该功能存在于较新的处理器中。有传言说你可以特别订购带有序列号的处理器，btu 最低购买量大约是 100 万个处理器。

还 -

```
 #include <Windows.h>
#include <stdio.h>
#include <xmmintrin.h>
#include <iphlpapi.h>
#include <Rpc.h>

static void GetMACaddress(void);
static void uuidGetMACaddress(void);

int main(){
    SYSTEM_INFO SysInfo;
    GetSystemInfo(&SysInfo);
    printf("Processors - %d\n" , SysInfo.dwNumberOfProcessors);
    DWORD a , b , c , d , e;
    DWORD BasicLeaves;
    char* VendorID = (char*)malloc(20);
    char* message = (char*)malloc(20);
    _asm {
        pusha
        pushfd
        pop eax
        push eax
        xor eax , 0x00200000
        push eax
        popfd
        pushfd
        pop ecx
        pop eax
        xor eax , ecx
        mov [a] , eax
        }
    if(a & 0x00200000){
        printf("CPUID opcode supported.\n");
        } else {
        printf("CPUID opcode not supported, exiting...\n");
        return 0;
        }

    //DWORD* pa = &a[0];
    //DWORD* pb = &a[1];
    //DWORD* pc = &a[2];
    //DWORD* pd = &a[3];
    //a[4] = 0;
    e = 0;
    __asm {
        mov eax , 0
        cpuid
        mov [BasicLeaves] , eax;
        mov [b] , ebx;
        mov [c] , ecx;
        mov [d] , edx;
        }
    memcpy(&VendorID[0] , &b , 4);
    memcpy(&VendorID[4] , &d , 4);
    memcpy(&VendorID[8] , &c , 4);
    VendorID[12] = 0;

    printf("%d Basic Leaves\nVendorID - %s\n" , BasicLeaves , VendorID);

    __asm {
        mov eax , 1
        cpuid
        mov [a] , eax;
        mov [b] , ebx;
        mov [c] , ecx;
        mov [d] , edx;
        }
    if(d & 0x00000001) printf("FPU\n");
    if(d & 0x00000200) printf("APIC On-Chip\n");
    if(d & 0x00040000) printf("Processor Serial Number Present\n");
    if(d & 0x00800000) printf("MMX\n");
    if(d & 0x01000000) printf("SSE\n");
    if(d & 0x02000000) printf("SSE2\n");
    if(d & 0x08000000) printf("Hyperthreading (HTT)\n");

    if(c & 0x00000001) printf("SSE3\n");
    if(c & 0x00000200) printf("SSSE3\n");
    if(c & 0x00080000) printf("SSE4.1\n");
    if(c & 0x00100000) printf("SSE4.2\n");
    if(c & 0x02000000) printf("AES\n");

    __asm {
        mov eax , 0x80000000
        cpuid
        and eax , 0x7fffffff;
        mov [a] , eax;
        mov [b] , ebx;
        mov [c] , ecx;
        mov [d] , edx;
        }

    printf("%d Extended Leaves\n" , a);

    printf("Processor Brand String - ");
    __asm {
        mov eax , 0x80000002
        cpuid
        mov [a] , eax;
        mov [b] , ebx;
        mov [c] , ecx;
        mov [d] , edx;
        }
    memcpy(&message[0] , &a , 4);
    memcpy(&message[4] , &b , 4);
    memcpy(&message[8] , &c , 4);
    memcpy(&message[12] , &d , 4);
    message[16] = 0;
    printf("%s" , message);

    __asm {
        mov eax , 0x80000003
        cpuid
        mov [a] , eax;
        mov [b] , ebx;
        mov [c] , ecx;
        mov [d] , edx;
        }

    memcpy(&message[0] , &a , 4);
    memcpy(&message[4] , &b , 4);
    memcpy(&message[8] , &c , 4);
    memcpy(&message[12] , &d , 4);
    message[16] = 0;
    printf("%s" , message);

    __asm {
        mov eax , 0x80000004
        cpuid
        mov [a] , eax;
        mov [b] , ebx;
        mov [c] , ecx;
        mov [d] , edx;
        popa
        }
    memcpy(&message[0] , &a , 4);
    memcpy(&message[4] , &b , 4);
    memcpy(&message[8] , &c , 4);
    memcpy(&message[12] , &d , 4);
    message[16] = 0;
    printf("%s\n" , message);

    char VolumeName[256]; DWORD VolumeSerialNumber; DWORD MaxComponentLength; DWORD FileSystemFlags; char FileSystemNameBuffer[256]; 
    GetVolumeInformationA("c:\\" , VolumeName , 256 , &VolumeSerialNumber , &MaxComponentLength , &FileSystemFlags , (LPSTR)&FileSystemNameBuffer , 256);
    printf("Serialnumber - %X\n" , VolumeSerialNumber);

    GetMACaddress();
    uuidGetMACaddress();

    return 0;
    }

// Fetches the MAC address and prints it
static void GetMACaddress(void){
    IP_ADAPTER_INFO AdapterInfo[16];        // Allocate information 
                                            // for up to 16 NICs
    DWORD dwBufLen = sizeof(AdapterInfo);   // Save memory size of buffer

    DWORD dwStatus = GetAdaptersInfo(       // Call GetAdapterInfo
    AdapterInfo,                            // [out] buffer to receive data
    &dwBufLen);                             // [in] size of receive data buffer
    //assert(dwStatus == ERROR_SUCCESS);    // Verify return value is 
                                            // valid, no buffer overflow

    PIP_ADAPTER_INFO pAdapterInfo = AdapterInfo; // Contains pointer to
                                            // current adapter info
    do {
        printf("Adapter MAC Address - %X-%X-%X-%X-%X-%X\n" , pAdapterInfo->Address[0] , pAdapterInfo->Address[1] , pAdapterInfo->Address[2] , pAdapterInfo->Address[3] , pAdapterInfo->Address[4] , pAdapterInfo->Address[5]);
        printf("Adapter IP Address  - %s\n" , pAdapterInfo->CurrentIpAddress);
        printf("Adapter Type        - %d\n" , pAdapterInfo->Type);
        printf("Adapter Name        - %s\n" , pAdapterInfo->AdapterName);
        printf("Adapter Description - %s\n" , pAdapterInfo->Description);
        uuidGetMACaddress();

        printf("\n");
        //PrintMACaddress(pAdapterInfo->Address); // Print MAC address
        pAdapterInfo = pAdapterInfo->Next;      // Progress through 
                                                // linked list
        } while(pAdapterInfo);                  // Terminate if last adapter
    }

// Fetches the MAC address and prints it

static void uuidGetMACaddress(void)
{
  unsigned char MACData[6];

  UUID uuid;
  UuidCreateSequential( &uuid );    // Ask OS to create UUID

  for (int i=2; i<8; i++)  // Bytes 2 through 7 inclusive 
                           // are MAC address
    MACData[i - 2] = uuid.Data4[i];

  printf("UUID MAC Address - %X-%X-%X-%X-%X-%X\n" , MACData[0] , MACData[1] , MACData[2] , MACData[3] , MACData[4] , MACData[5]);
}//*/ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-18T06:18:25.553

使用 CPUZ 工具：[http ://www.cpuid.com/cpuz.php](http://www.cpuid.com/cpuz.php)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-18T06:26:08.220

请提供更多详细信息：操作系统，语言。

例如，在 Windows 上，您可以通过使用 WMI 并读取[Win32_Processor.ProcessorId](http://msdn.microsoft.com/en-us/library/aa394373.aspx)来获取它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-18T06:46:42.600

在 windows 中，我确信有一个系统调用，在 linux 中可以尝试“sudo lshw”，但大多数内核似乎不支持 CPU 序列号，初步研究似乎表明，对唯一可识别计算机的普遍愤怒意味着存在没有完美的答案。

你想做什么？几乎可以肯定有人以前做过，重用或模仿他们所做的可能是明智的。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2008-09-18T06:17:37.583

您可以使用[CPUID](http://en.wikipedia.org/wiki/CPUID)命令。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2008-09-18T06:30:25.947

我猜相当多的编译器确实围绕上述命令提供了一些包装器等。这是一个例子

```
#include <stdlib.h>
#include <string.h>
#include <intrinsics.h>

_CPUID cpuinfo;
int main(void) {
_cpuid(&cpuinfo);
printf("Vendor: %s\n", cpuinfo.Vendor);
return 0;
} 
```

输出：

```
Vendor: GenuineIntel 
```

# .net - 加载 .Net Fx 查询

> ID：90476
> 
> 赞同：0
> 
> 时间：2008-09-18T06:19:22.963
> 
> 标签：.net

我在仅存在 .Net FX 1.1 的 M/C 上构建了一个简单的 C#.Net 应用程序。现在，当我在 M/C 上执行此应用程序时：案例 1）仅安装了 .Net fx 2.0 案例 2）同时安装了 .Net Fx 1.1 amd 2.0

在上述情况下如何确定加载适当的.Net框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-18T06:43:23.560

我理解的行为是你的 1.1。应用程序将使用 1.1 框架，除非它不可用，在这种情况下，它将使用 2.0 框架，这就是应用程序可以针对 1.1 框架编译但通常仍然可以在只有 2.0 框架可用的 Vista 上运行的方式。

我过去在查看这些问题时使用的一些方便的资源是 Thomas F. Abraham[在此处](http://blogs.digineer.com/blogs/tabraham/archive/2005/12/09/15.aspx)和[此处](http://blogs.digineer.com/blogs/tabraham/archive/2006/12/18/net-framework-1-1-and-2-0-and-3-0-side-by-side-sxs.aspx)的帖子，本指南[在 Vista 上安装 .Net Framework 1.1](http://www.mydigitallife.info/2007/12/27/install-microsoft-net-framework-11-on-windows-vista-fix-regsvcsexe-fails-error/)（如果您必须支持一些需要它的遗留应用程序）和这篇文章包含并排运行[asp.net 1.1 和 2.0的文档（描述了在尝试混合应用程序的框架版本时会遇到的应用程序池问题）。](http://www.gafvert.info/iis/article/install_asp_net_20_side_by_side.htm)

# casting - 长到 HWND (VS8 C++)

> ID：90493
> 
> 赞同：7
> 
> 时间：2008-09-18T06:24:52.467
> 
> 标签：casting, long-integer, hwnd

如何将 long 转换为 HWND（C++ Visual Studio 8）？

```
Long lWindowHandler;
HWND oHwnd = (HWND)lWindowHandler; 
```

但我收到以下警告：

> 警告 C4312：“类型转换”：从“LONG”转换为更大尺寸的“HWND”

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-18T06:31:25.867

只要您确定您拥有的 LONG 确实是 HWND，那么它就很简单：

```
HWND hWnd = (HWND)(LONG_PTR)lParam; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-18T06:37:55.150

HWND 是窗口句柄。此类型在 WinDef.h 中声明如下：

> typedef 处理 HWND；

HANDLE 是对象的句柄。此类型在 WinNT.h 中声明如下：

> typedef PVOID 句柄；

最后，PVOID 是指向任何类型的指针。此类型在 WinNT.h 中声明如下：

> 类型定义无效*PVOID；

所以，HWND 实际上是一个指向 void 的指针。您可以像这样将 long 转换为 HWND：

> HWND h = (HWND)my_long_var;

但要非常小心 my_long_var 中存储了哪些信息。您必须确保那里有一个指针。

稍后编辑：警告表明您已打开 64 位可移植性检查。如果您正在构建一个 32 位应用程序，您可以忽略它们。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-18T07:13:18.607

仅当您不在 64 位版本的 Windows 上运行时，这样做才是安全的。LONG 类型是 32 位，但 HANDLE 类型可能是 64 位。您需要使您的代码 64 位干净。简而言之，您需要将 LONG 更改为 LONG_PTR。

[使用指针类型的规则](http://msdn.microsoft.com/en-us/library/aa384242(VS.85).aspx)：

> 不要将指针强制转换为 int、long、ULONG 或 DWORD。如果必须强制转换指针来测试某些位、设置或清除位或以其他方式操作其内容，请使用 UINT_PTR 或 INT_PTR 类型。这些类型是整数类型，可以缩放到 32 位和 64 位 Windows 的指针大小（例如，ULONG 用于 32 位 Windows，_int64 用于 64 位 Windows）。例如，假设您要移植以下代码：
> 
> ImageBase = (PVOID)((ULONG)ImageBase | 1);
> 
> 作为移植过程的一部分，您将更改代码如下：
> 
> ImageBase = (PVOID)((ULONG_PTR)ImageBase | 1);
> 
> 在适当的情况下使用 UINT_PTR 和 INT_PTR（如果您不确定是否需要它们，使用它们以防万一）。不要将指针转换为 ULONG、LONG、INT、UINT 或 DWORD 类型。
> 
> Note that HANDLE is defined as a void*, so typecasting a HANDLE value to a ULONG value to test, set, or clear the low-order 2 bits is an error on 64-bit Windows.

# c++ - 游戏开发声音框架

> ID：90503
> 
> 赞同：12
> 
> 时间：2008-09-18T06:28:16.513
> 
> 标签：c++, openal, audio

我正在与一个团队合作，该团队正在为各种 2D 以及最终的 3D 迷你游戏构建引擎。我们面临的问题是一个可靠的、跨平台的、健全的 API。显然，由于我们对跨平台功能的需求，DirectX 是不可能的。SDL 很好，而且效果很好，但让我们面对现实吧，SDL_Mixer 的功能有限。我们目前正在使用它，但是当我们最终扩展到 3D 时，这将是一个问题。

我一直在搞乱 OpenAL，但我发现的大多数文档都已经过时了，而且似乎并没有那么好用。我愿意学习 OpenAL，并努力通过它，但我想更确定一点，我不会浪费我的时间。不过，除了 DevMaster 教程之外，我还没有看到太多让我大吃一惊的文档。如果有人有比我找到的更好的材料，那就太棒了。

我还看到了诸如 FMOD 之类的项目，尽管获得了许可，但它似乎还不错。但是，与 OpenAL 一样，它们几乎没有文档。当然，我可以倾注代码来推断我的选择，但考虑到我最终可能会为此付出代价，这似乎有点痛苦。

无论如何，想法，评论，担忧？非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-18T06:52:46.067

*（注意：我有使用 FMOD、BASS、OpenAL 和 DirectSound 的经验；虽然我在下面列出了其他库，但我没有使用过它们）。*

[BASS](http://www.un4seen.com/)和[FMOD](http://www.fmod.org/)都很好（实际上我非常喜欢 FMOD 的文档；你为什么说它“不存在”？）。还有[Miles Sound System](http://www.radgametools.com/miles.htm)、[Wwise](http://www.audiokinetic.com/)、[irrKlang](http://www.ambiera.com/irrklang/)和一些中间件包。

OpenAL 据说是跨平台的，并且在每个平台上都有自己的怪癖。它也不完全是“开放的”。而且我不确定它的未来是什么；当 Creative 抓住它时，它似乎被卡住了。不过，最近有一项从头开始构建实现的努力：[OpenAL Soft](http://kcat.strangesoft.net/openal.html)。

然后是原生平台 API，比如 Windows 的 DirectSound 或 XAudio2，OS X 的 Core Audio，Linux 的 ALSA，控制台的专有 API 等等。我认为在每个平台上使用原生 API 都很有意义；您只需将它抽象到您需要的通用接口下，并在每个平台上都有不同的实现。当然，这不仅仅是使用 OpenAL，但 OpenAL 甚至在某些平台上都不可用，并且在其他平台上存在您甚至无法修复的各种怪癖（因为没有您可以修复的源代码）。从某种意义上说，向 FMOD 或 Miles 等商业图书馆授予许可是一种选择，因为所有这些依赖于平台的工作都已经为您完成了。

我们现在正在工作中使用 OpenAL，但正在考虑放弃它，因为它不会去任何地方，而且我们无法修复这些怪癖。因此，虽然 OpenAL 很容易上手，但我认为它并不是一个好的选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-18T09:05:14.797

我在已发布游戏的一系列平台上使用过 DirectX、FMOD 和 Wwise。我不会在这里谈论 DirectX，因为其他人会在这里有很多反馈；-)

以下是您需要考虑的事项：

*   许可证，我把它放在第一位，因为这可能会为您做出决定。让您的律师仔细检查并确保您了解成本和限制。

*   API - FMOD 有一个非常干净、最小的 API，很容易理解。Wwise 在功能方面提供了更多功能，但它的 API 似乎更大、更笨重，并且带有令人难以理解的笨拙概念。

*   工具 - Wwise 有非常复杂的工具，非常适合音频设计师而不是程序员，如果你想给音频设计师更多的直接控制和实验空间，Wwise 可能是要走的路。FMOD 在工具部门正在迎头赶上，但我觉得它的工具更适合程序员。

*   性能 - 这是你需要自己评估的东西，你不能说任何一个比另一个更好，因为这取决于你的平台和游戏类型。您可能会得到引用给您的性能统计数据 - 对这些数据持保留态度，它们很可能以某种方式被理想化。确定您的性能预算（例如，声音每帧 2 毫秒、X 个通道、X 个流）并针对不同的声音格式、采样率和位深度进行一系列测试 - 绘制这些吸盘。

*   支持 - FMOD 和 Wwise 都有很好的支持渠道，技术人员很好。检查支持是否需要额外费用。

如果您要我选择一个.. FMOD - 它确实是一个非常好的产品，那些家伙做得很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T06:37:39.317

我最近在制作一个使用 FMOD 的 AAA PC 游戏。我们的音频程序员很喜欢它，并且非常高效，所以我要对 FMOD 竖起大拇指。我们只在 Windows 上使用了 FMOD，所以我根本无法谈论它的跨平台方面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T06:36:16.260

Bass 库适用于 Mac 和 Windows，并且有很好的文档和 SDK 示例：

[http://www.un4seen.com/](http://www.un4seen.com/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-25T19:40:40.653

我已经发布了两款使用 Miles Sound System 的 PC 游戏，效果很好。MSS 易于集成、快速且稳定。您从 RAD Game Tools 获得的支持非常好。该库已在超过 4500 款游戏中使用，因此它坚如磐石。它也很便宜！

另一方面，与 FMOD 或 WWise 相比，MSS 是一个相当低级的库。该库没有为声音设计者提供任何方式来控制音量、衰减、随机化、衰落或几乎没有存储在声音文件本身中的任何其他内容。您必须自己编写这些高级功能。

这就是为什么我要为我的下一场比赛评估 WWise。它拥有比 Miles 更发达的工具集。启动和运行需要更长的时间，但到目前为止运行良好。我在使用它来真正提供一种或另一种方式的建议方面还远远不够。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-21T18:20:40.613

就工作流程而言，Wwise 可能是声音开发最完整的解决方案。它的设计方式真正节省了您的编程时间，并为您提供了更多尝试和构建复杂声音结构的可能性。借助 Wwise，我们能够为我们的团队组织项目。

我个人非常喜欢他们的互动音乐系统。它很灵活，可以让您的音乐对您的游戏输入做出流畅的反应。

此外，Audiokinetic 的支持也非常出色。始终快速并随时准备提供帮助。

我建议。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-21T18:42:51.160

我也可以担保 FMOD，由于工具和出色的多平台支持，它在游戏开发中被广泛使用。与它的设计师合作真的很幸福。但问题是，它需要昂贵的商业开发许可证。

# c# - 如何在 C# 中访问数据库

> ID：90511
> 
> 赞同：6
> 
> 时间：2008-09-18T06:31:38.533
> 
> 标签：c#, asp.net, sql

基本上，我想简要解释一下如何在 C# 代码中访问 SQL 数据库。我收集到需要连接和命令，但发生了什么？我想我要问的是有人来揭开这个过程的神秘面纱。谢谢。

为清楚起见，在我的情况下，我正在做网络应用程序，电子商务的东西。都是 ASP.NET、C# 和 SQL 数据库。

我将继续并关闭此线程。这有点笼统，我将发布一些关于该主题的更有针对性和教程式的问题和答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-18T06:33:37.157

MSDN 在这里有一篇很好的文章：

[http://msdn.microsoft.com/en-us/library/s7ee2dwt(VS.71).aspx](http://msdn.microsoft.com/en-us/library/s7ee2dwt(VS.71).aspx)

您应该查看数据阅读器以获取简单的选择语句。[来自MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)页面的示例：

```
private static void ReadOrderData(string connectionString)
{
    string queryString = 
        "SELECT OrderID, CustomerID FROM dbo.Orders;";
    using (SqlConnection connection = new SqlConnection(
               connectionString))
    {
        SqlCommand command = new SqlCommand(
            queryString, connection);
        connection.Open();
        SqlDataReader reader = command.ExecuteReader();
        try
        {
            while (reader.Read())
            {
                Console.WriteLine(String.Format("{0}, {1}",
                    reader[0], reader[1]));
            }
        }
        finally
        {
            // Always call Close when done reading.
            reader.Close();
        }
    }
} 
```

它基本上首先创建一个[SqlConnection](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)对象，然后创建[SqlCommand](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)对象，该对象包含您将要执行的实际选择，以及对我们刚刚创建的连接的引用。然后它打开连接并在下一行执行您的语句并返回一个[SqlDataReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)对象。

然后在while循环中输出阅读器第一行的值。每次调用“reader.Read()”时，阅读器都会包含一个新行。

然后阅读器关闭，因为我们正在退出“使用”-secret，连接也被关闭。

* * *

编辑：如果您正在寻找有关在 ASP.NET 中选择/更新数据的信息，4GuysFromRolla[在 ASP.NET 2.0 的数据源控件上有一个非常好的多部分系列](http://aspnet.4guysfromrolla.com/articles/011106-1.aspx)

EDIT2：正如其他人指出的那样，如果您使用的是较新版本的 .NET，我建议您查看 LINQ。可以在[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/bb425822.aspx)上找到介绍、示例和文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-18T11:21:48.587

旧的 ADO.Net（sqlConnection 等）是 LINQ 出现的恐龙。LINQ 需要 .Net 3.5，但向后兼容所有 .Net 2.0+ 和 Visual Studio 2005 等。

从 linq 开始非常简单。

*   向您的项目添加一个新项目，一个**linq-to-sql**文件，该文件将放置在您的**App_Code**文件夹中（对于本示例，我们将其命名为**example.dbml**）
*   从您的服务器资源管理器中，将一个表从您的数据库拖到 dbml 中（在本例中，该表将被命名为**项目**）
*   保存 dbml 文件

您现在已经构建了一些类。您构建了**exampleDataContext**类，它是您的 linq 初始化程序，并且您构建了**item**类，它是**items**表中对象的类。这一切都是自动完成的，您无需担心。现在说我想获取**itemID**为 3 的记录，这就是我需要做的：

```
exampleDataContext db = new exampleDataContext(); // initializes your linq-to-sql
item item_I_want = (from i in db.items where i.itemID == 3 select i).First(); // using the 'item' class your dbml made 
```

仅此而已。现在你有一个名为**item_I_want的新****项目**......现在，如果你想从**项目**中获取一些信息，你可以这样称呼它：

 ****```
int intID = item_I_want.itemID;
string itemName = item_I_want.name; 
```

Linq使用*起来非常*简单！而这只是冰山一角。

当您拥有更强大、更简单的工具时，无需学习过时的 ADO :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-18T06:36:57.540

读起来像一个初学者的问题。这需要初学者视频演示。

[http://www.asp.net/learn/data-videos/](http://www.asp.net/learn/data-videos/)

它们专注于 ASP.NET，但要注意数据库方面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T06:33:32.850

要看的话题：

1.  ADO.NET 基础知识
2.  LINQ 到 SQL
3.  托管数据库提供商

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T06:34:47.620

如果它是一个 Web 应用程序，这里有一些很好的资源可以帮助您开始在 .NET 中进行数据访问：

[http://weblogs.asp.net/scottgu/archive/2007/04/14/working-with-data-in-asp-net-2-0.aspx](http://weblogs.asp.net/scottgu/archive/2007/04/14/working-with-data-in-asp-net-2-0.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-18T06:39:12.853

要在 SQL 服务器数据库上连接/执行操作：

```
using System.Data;
using System.Data.SqlClient;

string connString = "Data Source=...";
SqlConnection conn = new SqlConnection(connString); // you can also use ConnectionStringBuilder
connection.Open();

string sql = "..."; // your SQL query
SqlCommand command = new SqlCommand(sql, conn);

// if you're interested in reading from a database use one of the following methods

// method 1
SqlDataReader reader = command.ExecuteReader();

while (reader.Read()) {
    object someValue = reader.GetValue(0); // GetValue takes one parameter -- the column index
}

// make sure you close the reader when you're done
reader.Close();

// method 2
DataTable table;
SqlDataAdapter adapter = new SqlDataAdapter(command);
adapter.Fill(table);

// then work with the table as you would normally

// when you're done
connection.Close(); 
```

大多数其他数据库服务器，如 MySQL 和 PostgreSQL，都有类似的连接和操作接口。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-18T06:41:29.663

如果您正在寻找易于理解的教程，那么您应该前往 www.ASP.net 网站。

这是入门视频页面的链接：[http ://www.asp.net/learn/videos/video-49.aspx](http://www.asp.net/learn/videos/video-49.aspx)

如果你想下载，这里是视频：[视频下载](http://download.microsoft.com/download/5/E/B/5EBF4D5A-8B55-482A-A322-675EED8B7F45/hilo_data_final.zip)

这是视频中 C# 项目的链接：[下载项目](http://download.microsoft.com/download/9/3/6/936c8646-2211-48de-a0ee-5ffe06d64f3a/Data_CS.msi)

祝你好运。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-18T07:25:50.463

我还建议使用数据集。它们非常易于使用，只需点击几下鼠标，无需编写任何代码，对于小型应用程序来说已经足够好了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-18T08:55:49.280

如果您有 Visual Studio 2008，我建议您跳过 ADO.NET 并直接使用 LINQ to SQL

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-18T11:44:03.930

@JD OConal 基本上是正确的，但是您需要确保处理掉您的连接：

```
string connString = "Data Source=...";
string sql = "..."; // your SQL query

//this using block
using( SqlConnection conn = new SqlConnection(connString) )
using( SqlCommand command = new SqlCommand(sql, conn) )
{
    connection.Open();

    // if you're interested in reading from a database use one of the following methods

    // method 1
    SqlDataReader reader = command.ExecuteReader();

    while (reader.Read()) {
        object someValue = reader.GetValue(0); // GetValue takes one parameter -- the column index
    }

    // make sure you close the reader when you're done
    reader.Close();

    // method 2
    DataTable table;
    SqlDataAdapter adapter = new SqlDataAdapter(command);
    adapter.Fill(table);

    // then work with the table as you would normally

    // when you're done
    connection.Close();
} 
```

# php - 我应该 mysql_real_escape_string 我从用户那里获得的所有 cookie 以避免 php 中的 mysql 注入吗？

> ID：90517
> 
> 赞同：2
> 
> 时间：2008-09-18T06:34:12.897
> 
> 标签：php, validation

当用户访问我的网站时，我的脚本会检查 2 个存储用户 ID + 部分密码的 cookie，以自动登录。

可以通过 cookie 编辑器编辑 cookie 的内容，所以我猜有可能在写入的 cookie 中添加一些恶意内容？

我应该在我的所有 cookie 调用中添加`mysql_real_escape_string`（或其他东西）还是有某种内置程序不允许这种情况发生？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-18T06:57:18.393

您*真正*需要做的不是首先发送这些可破解的 cookie 值。相反，为什么不散列用户名和密码以及（秘密）盐并将其设置为 cookie 值？IE：

```
define('COOKIE_SALT', 'secretblahblahlkdsfklj');
$cookie_value = sha1($username.$password.COOKIE_SALT); 
```

然后你知道 cookie 值总是一个 40 个字符的十六进制字符串，并且可以将用户发回的值与数据库中的任何内容进行比较，以确定它们是否有效：

```
if ($user_cookie_value == sha1($username_from_db.$password_drom_db.COOKIE_SALT)) {
  # valid
} else {
  #not valid
} 
```

`mysql_real_escape_string`顺便说一句，对数据库产生了额外的影响（很多人没有意识到它需要数据库连接并查询 MySQL）。

如果您无法更改您的应用程序并坚持使用可破解的 cookie 值，那么最好的方法是使用[带有绑定参数的准备好的语句](http://devzone.zend.com/node/view/id/686)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-18T07:03:56.193

mysql_real_escape_string 的重点不是防止注入攻击，而是确保您的数据准确地存储在数据库中。因此，应该在任何进入数据库的字符串上调用它，无论其来源如何。

但是，您*还*应该使用参数化查询（通过 mysqli 或 PDO）来保护自己免受 SQL 注入。否则你可能会像[小鲍比桌的学校](http://xkcd.com/327/)一样结束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-18T06:42:55.527

我只在将变量插入 SQL 语句之前使用 mysql_real_escape_string。*如果您的某些变量已经被*转义，那么您只会让自己感到困惑，然后您再次转义它们。这是您在新手的博客 webapps 中看到的经典错误：

> 当有人写一个撇号时，它会不断添加斜线，破坏博客\\\\\\\ 的页面。

变量的值本身并不危险：只有当您将其放入字符串或类似的东西时，您才会开始误入危险水域。

当然，永远不要相信来自客户端的任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T09:07:28.533

准备好的语句和参数绑定总是一个好方法。

PEAR::MDB2 支持准备好的语句，例如：

```
$db = MDB2::factory( $dsn );

$types = array( 'integer', 'text' );
$sth = $db->prepare( "INSERT INTO table (ID,Text) (?,?)", $types );
if( PEAR::isError( $sth ) ) die( $sth->getMessage() );

$data = array( 5, 'some text' );
$result = $sth->execute( $data );
$sth->free();
if( PEAR::isError( $result ) ) die( $result->getMessage() ); 
```

这只会允许适当的数据和预设数量的变量进入数据库。

您当然应该在进行此之前验证数据，但准备语句是应该完成的最终验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-18T06:36:28.163

你应该 mysql_real_escape_string***任何***可能有害的东西。永远不要相信用户可以更改的任何类型的输入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T06:38:19.843

我同意你的看法。可以修改 cookie 并发送恶意数据。

我认为在使用 cookie 之前过滤从 cookie 获得的值是一种很好的做法。根据经验，我会过滤任何其他可能被篡改的输入。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T06:43:13.967

mysql_real_escape_string 太过时了......这些天你真的应该使用参数绑定。

我将通过提及我指的是[准备好的语句](http://dev.mysql.com/tech-resources/articles/4.1/prepared-statements.html)来详细说明，并提供指向一篇文章的链接，该文章表明有时 mysl_real_escape_string 是不够的：[http://www.webappsec.org/projects/articles/091007.txt](http://www.webappsec.org/projects/articles/091007.txt)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-18T07:25:12.430

Yegor，您可以在创建/更新用户帐户时存储哈希值，然后在启动登录时，对发布到服务器的数据进行哈希处理，并与该用户名的数据库中存储的数据进行比较。

（在松散的 php 中我的头顶 - 视为伪代码）：

```
$usernameFromPostDbsafe = LimitToAlphaNumUnderscore($usernameFromPost);
$result = Query("SELECT hash FROM userTable WHERE username='$usernameFromPostDbsafe' LIMIT 1;");
$hashFromDb = $result['hash'];
if( (sha1($usernameFromPost.$passwordFromPost.SALT)) == $hashFromDb ){
    //Auth Success
}else{
   //Auth Failure
} 
```

成功验证后，您可以将哈希存储在 $_SESSION 或缓存的已验证用户名/哈希的数据库表中。然后将哈希发送回浏览器（例如在 cookie 中），以便后续页面加载将哈希发送回服务器，以便与您选择的会话存储中保存的哈希进行比较。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-18T06:49:48.163

我建议使用 htmlentities($input, ENT_QUOTES) 而不是 mysql_real_escape_string 因为这也可以防止任何意外输出实际的 HTML 代码。当然，你可以使用 mysql_real_escape_string 和 htmlentities，但你为什么要使用呢？

# .net - 您在桌面应用程序中的 NHibernate 会话管理策略是什么？

> ID：90530
> 
> 赞同：12
> 
> 时间：2008-09-18T06:37:16.227
> 
> 标签：.net, nhibernate, desktop-application

我发现在桌面应用程序中管理会话要困难得多，因为您无法利用像 HttpContext 这样清晰的绑定。那么如何管理会话生命周期以利用延迟加载但又不为整个应用程序打开一个会话呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-12-08T13:56:50.440

Ayende 最近[在 MSDN 上写了一篇关于这个主题的精彩文章](http://msdn.microsoft.com/en-us/magazine/ee819139.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-18T06:42:05.903

我认为这归结为您的对象的设计。因为可以在每个对象级别强制执行延迟加载，所以在考虑会话管理时可以利用这一事实。

例如，我有一堆数据丰富且延迟加载的对象，我有一个网格/摘要视图，以及它们的详细信息视图。在网格摘要视图中，我不使用对象的延迟加载版本。我使用代理对象来呈现该数据，并且该代理对象不是延迟加载的。

另一方面，一旦用户选择该记录进行查看/编辑，并且您进入对象的多页详细信息视图，这就是我们对特定对象应用延迟加载的时候。数据现在是延迟加载的，具体取决于仅按需查看的详细信息。这样，我的会话为延迟加载打开的范围仅在使用详细信息视图时持续。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T06:51:29.390

正如您之前所说，您不能使用 HttpRequest 的边界，但您可以了解什么是桌面应用程序中的“HttpRequest”。

让我解释。通常，您的 HttpRequest 将是一个操作的控制器，并且您会将会话限制为该特定操作。现在在您的桌面应用程序中，“控制器”（事件）可以更小，但正如@Jon 所说，一个窗口可以很容易地代表一个边界：您在那里处理这些东西，让它们在您的会话中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-19T08:25:55.267

也许我们可以想到一个命令模式的设置。每个重要事件都会提供并触发一个命令，然后执行它。基本的 AbstractCommand.Execute() 实现负责初始化会话、包装事务、调用具体的 SomeCommand._Execute() 实现并关闭所有内容。

无论如何，这远非持久性不可知论，因为它应该是当我加载我的对象并且我（想要）只处理普通实例（我在这里特别指延迟加载）时。

是否有可能实现某种自动打开/自动关闭行为？这应该通过使持久层对更高层的查询需求敏感来实现，即使在诸如延迟加载触发器之类的隐式情况下也是如此。至于关闭连接，持久层可能会在给定的数据库不活动超时（10 秒？）后关闭。我知道，这并不尖锐。但它确实会使更高层的持久性不可知。

谢谢， 马塞洛

# c# - 在 C# 中继承事件处理程序

> ID：90553
> 
> 赞同：12
> 
> 时间：2008-09-18T06:42:42.750
> 
> 标签：c#, events, inheritance

我有点把自己逼到了一个角落。

我有一系列从父级继承的用户控件，其中包含几个方法和事件来简化事情，因此我不必编写几行几乎相同的代码。像你一样做。父级不包含其他控件。

我想要做的只是在父 UserControl 中有一个事件处理程序，它会执行只有父控件才能执行的操作（即，有条件地调用事件，因为事件在父控件中定义）。然后我将这个事件处理程序连接到我的子控件中的所有输入框，子控件将整理解析输入并告诉父控件是否抛出该事件的任务。漂亮干净，没有重复的复制粘贴代码（对我来说*总是*会导致错误）。

这是我的问题。Visual Studio 认为我太聪明了一半，并警告我“方法'CheckReadiness' [父级中的事件处理程序] 不能成为事件的方法，因为该类派生的类已经定义了该方法。” 是的，Visual Studio，*这就是重点*。我*想要*一个事件处理程序，它只处理子类抛出的事件，它唯一的工作是让我能够在不编写任何代码的情况下连接子类。我不需要那些额外的处理程序——当孩子们处理用户输入时，我需要的所有功能自然会被调用。

我不确定为什么 Visual Studio 现在开始抱怨这个（因为它让我以前这样做过），而且我不知道如何让它消失。最好，我想这样做，而不必定义一个只调用 CheckReadiness 的方法。是什么导致了这个警告，是什么导致它在一个小时前没有出现的时候出现，我怎样才能让它消失而不诉诸于在所有子类中制作小处理程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-18T06:57:10.687

将父方法声明为virtual，在子类中重写并调用

```
base.checkReadyness(sender, e); 
```

（或其衍生）来自子类。如果您想在调用父事件处理程序之前执行一些特定的错误检查代码，这允许未来的设计演变。您可能不需要为每个控件编写数百万个这样的事件处理程序，您可以只编写一个，将所有控件挂钩到该事件处理程序，该事件处理程序又调用父级的事件处理程序。

我注意到的一件事是，如果所有这些代码都放在一个 dll 中，那么您可能会在尝试从 dll 中调用事件处理程序时遇到性能损失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-19T14:59:58.777

我也刚遇到这个，我同意感觉就像你做的一切都是正确的。将方法声明为 virtual 充其量只是一种解决方法，而不是解决方案。

正在执行的操作是有效的 - 仅存在于派生类中的控件，并且派生类将事件处理程序附加到该控件的事件之一。处理事件的方法在基类中定义的事实既不存在也不存在，它在绑定到事件时可用。该事件没有被附加到两次或任何类似的傻事，这只是处理事件的方法在哪里定义的问题。

绝对不是虚拟方法——我不希望该方法被派生类覆盖。非常令人沮丧，在我看来，这是 dev-studio 中的一个错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-07T17:23:51.343

我也遇到过这个问题，因为在早期版本的 VS 中，您可以“继承”事件处理程序。因此，我找到的无需重写方法的解决方案就是在表单的初始化阶段的某处分配事件处理程序。就我而言，在构造函数中完成（我确信 OnLoad() 也可以）：

```
 public MyForm()
    {
        InitializeComponent();
        btnOK.Click += Ok_Click;
    } 
```

... Ok_Click 处理程序驻留在基本表单中的位置。深思熟虑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-03-08T16:40:58.760

我刚刚遇到了 Merus 首次提出的确切问题，并且与其他发布回复的人一样，我完全不清楚为什么 VS（我现在使用 Visual C# 2010 Express）对象要在基础中定义事件处理程序班级。我发布响应的原因是，在通过使基类代码成为派生类在其（基本上为空的）事件处理程序中简单调用的受保护方法来解决问题的过程中，我对基类进行了重构重命名类方法，并注意到 VS 设计器停止抱怨。也就是说，它重命名了事件处理程序注册（因此它不再遵循 VS 设计者使用 ControlName_EventName 命名事件处理程序的约定），这似乎满足了它。然后，当我尝试通过在适当的 VS 事件中输入名称来针对派生类控件注册（现已重命名）基本事件处理程序时，设计人员在派生类中创建了一个新的事件处理程序，然后我将其删除，使派生类控件保持注册状态到基类（事件处理程序）方法。Net，如你所料，C# 找到了我们想要做的合法的事情。当您遵循设计器的事件处理程序命名约定时，只有 VS 设计器不喜欢它。我不认为设计师需要那样工作。任何人，时间继续。C# 发现我们想做的事情是合法的。当您遵循设计器的事件处理程序命名约定时，只有 VS 设计器不喜欢它。我不认为设计师需要那样工作。任何人，时间继续。C# 发现我们想做的事情是合法的。当您遵循设计器的事件处理程序命名约定时，只有 VS 设计器不喜欢它。我不认为设计师需要那样工作。任何人，时间继续。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-18T06:45:58.313

如果您的事件已在父类中定义，则无需在子类中重新连接它。这将导致事件触发两次。

请确认这是否是正在发生的事情。HTH :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T06:49:21.470

MSDN 上的这篇文章应该是一个很好的起点：[Overriding Event Handlers with Visual Basic .NET](http://msdn.microsoft.com/en-us/library/aa290043(VS.71).aspx)。查看派生类部分*中的句柄子句如何导致问题。*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T06:52:55.783

为什么不在父类中将方法声明为虚拟方法，然后您可以在派生类中重写它以添加额外的功能？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-18T07:09:28.757

忘记它是一个事件处理程序，只需在子类中进行适当的常规方法覆盖。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-28T20:41:50.680

以下是我为以几种相似的形式调用基本方法所做的工作，每一种都具有一些常见的额外功能：

```
 protected override void OnLoad(EventArgs e)
    {
        try
        {
            this.SuspendLayout();
            base.OnLoad(e);

            foreach (Control ctrl in Controls)
            {
                Button btn = ctrl as Button;
                if (btn == null) continue;

                if (string.Equals(btn.Name, "btnAdd", StringComparison.Ordinal))
                    btn.Click += new EventHandler(btnAdd_Click);
                else if (string.Equals(btn.Name, "btnEdit", StringComparison.Ordinal))
                    btn.Click += new EventHandler(btnEdit_Click);
                else if (string.Equals(btn.Name, "btnDelete", StringComparison.Ordinal))
                    btn.Click += new EventHandler(btnDelete_Click);
                else if (string.Equals(btn.Name, "btnPrint", StringComparison.Ordinal))
                    btn.Click += new EventHandler(btnPrint_Click);
                else if (string.Equals(btn.Name, "btnExport", StringComparison.Ordinal))
                    btn.Click += new EventHandler(btnExport_Click);
            } 
```

在我看来，省略使用正确的固定按钮名称的可能性与不手动连接继承的处理程序的可能性相同。

请注意，您可能需要测试 this.DesignMode 以便完全跳过 VS Designer 中的代码，但即使没有检查，它对我来说也能正常工作。

# c# - 好的 asp.net (C#) 应用程序？

> ID：90560
> 
> 赞同：7
> 
> 时间：2008-09-18T06:43:41.173
> 
> 标签：c#, asp.net, css, design-patterns

有什么好的开源 asp.net (C#) 应用程序可以满足以下条件：？

1.  设计精良，多层
2.  清洁和注释代码
3.  善用几种设计模式
4.  网页在所有常用浏览器中都能正常显示
5.  生成有效的 html 并很好地使用 css
6.  使用 css 主题。更喜欢使用css而不是表
7.  不依赖于第三方组件（网格、菜单、树等）
8.  有很好的单元测试
9.  网页不简单，看起来很专业
10.  使用较新的技术，如 MVC、LINQ..（不重要）
11.  （我现在想不到的任何其他重要的事情）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-18T08:04:01.183

我不得不同意[BlogEngine](http://www.dotnetblogengine.net/)。它在 asp.net 中实现了大量不同的功能和常见需求，并允许它完全可定制且非常易于理解。它可以与 XML 或 SQL（您的选择）一起使用，并且拥有庞大的社区。

至于您的要求（**粗体**表示是）：

1.  **设计精良，多层**
2.  **清洁和注释代码**
3.  **善用几种设计模式**
4.  **网页在所有常用浏览器中都能正常显示**
5.  **生成有效的 html 并很好地使用 css**
6.  **使用 css 主题。更喜欢使用css而不是表**
7.  **不依赖于第三方组件（网格、菜单、树等）** ——*有点，仍然使用一些自定义 dll*
8.  有很好的单元测试——*不确定*
9.  **网页并不简单而且看起来很专业**-*是的，那里有大量的免费模板*
10.  使用较新的技术，如 MVC、LINQ ..（不重要）-*还没有*
11.  （我现在想不到的任何其他重要的事情） -*更多的东西，比如动态 rss 提要、动态站点地图、数据引用等。*

这里还有很多很棒的开源项目：[http ://www.asp.net/community/projects/](http://www.asp.net/community/projects/)

我知道[dotNetNuke](http://www.asp.net/downloads/starter-kits/dotnetnuke/)也很受欢迎，机密[程序](http://www.asp.net/downloads/starter-kits/classifieds/)也很容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T09:20:22.950

您应该看看使用 ASP.NET MVC 的[SharpArchitecture](http://code.google.com/p/sharp-architecture/)，它是 Web 应用程序的开源架构基础。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T06:46:37.250

[博客引擎网](http://www.dotnetblogengine.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T06:47:48.417

[dasBlog](http://www.codeplex.com/dasBlog)是[Scott Hanselman](http://www.hanselman.com/blog/)贡献的一个博客平台。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-18T06:52:28.500

这很酷。即将推出的[ASP.NET](http://www.codeplex.com/aspnet)功能源可用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T07:06:52.083

TaskVision：一个简单但有时非常有用的 .net 客户端-服务器演示应用程序： [转到网站](http://windowsclient.net/downloads/folders/applications/entry1266.aspx)

提供完整的源代码（见右下角下载）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T07:08:00.083

代码丛->

1.  ASP.NET MVC——看源码
2.  ASP.NET 动态数据
3.  脚本 ＃

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-18T07:19:19.043

我从 SutekiShop（mvc、存储库模式、ddd+tdd）、TechAvalanche 示例应用程序（[http://www.simonsegal.net/blog/CodeDownloads/Orm.zip](http://www.simonsegal.net/blog/CodeDownloads/Orm.zip)、几种设计模式、带有 linq 的 poco）、CodeBetter 中学到了很多东西。 Rob Conery 为 ddd+tdd 和 MVC Storefront 授予示例应用程序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-18T07:36:24.480

没有满足您指定的所有要点，但我会提到它，因为我认为这是一个很好的软件[http://www.yetanotherforum.net/](http://www.yetanotherforum.net/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-18T08:24:47.513

尝试查看[MojoPortal](http://www.mojoportal.com/) ( [http://www.mojoportal.com/](http://www.mojoportal.com/) )

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-19T09:39:29.137

有 MojoPortal ( [http://www.mojoportal.com/](http://www.mojoportal.com/) )：

*   精心设计
*   css 模板和有效的 html => 适用于所有浏览器
*   开源
*   也许不是很现代（没有 MVC，没有 LINK...）
*   但在 Mono 上运行

对于更新的项目，有 Dropthings ( [http://www.dropthings.com/](http://www.dropthings.com/) )：一个使用 ASP.NET 3.5、Workflow Foundation 和 LINQ 构建的开源 Web 2.0 风格的 AJAX 门户。

它的作者正在考虑使用 jQuery 制作一个 ASP.NET MVC 版本（[http://weblogs.asp.net/omarzabir/archive/2008/07/15/open-source-asp-net-3-5-ajax-portal -new-and-improved.aspx](http://weblogs.asp.net/omarzabir/archive/2008/07/15/open-source-asp-net-3-5-ajax-portal-new-and-improved.aspx) )

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-10T19:39:30.260

您可以在[codeplex](http://www.codeplex.com/)上尝试[OXITE](http://oxite.codeplex.com/)。

# .net - NHibernate 的轻量级替代品

> ID：90565
> 
> 赞同：17
> 
> 时间：2008-09-18T06:45:53.010
> 
> 标签：.net, nhibernate, orm

由于所有的依赖关系，NHibernate 并不适合我们的环境。（城堡、log4net 等）

有没有好的轻量级替代品？

支持简单的基于文件的数据库，如 Access/SQLite/VistaDB 是必不可少的。

理想情况下，包含在仅引用 .NET 程序集的单个程序集中的内容。如果它只需要 .NET 框架 2.0 或 3.0，那将是一个奖励。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2011-03-18T05:09:32.323

大规模 - [https://github.com/robconery/massive](https://github.com/robconery/massive)

或者

PetaPoco - [https://github.com/toptensoftware/petapoco](https://github.com/toptensoftware/petapoco)

两者都是单个 .cs 文件，除了 GAC 中的内容外，没有依赖项。

（完全披露，PetaPoco 是我写的）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-18T07:04:20.703

对于一个性能良好且只需要一个组件的轻量级 ORM，为什么不试试 Mindscape 的[Lightspeed](http://www.mindscape.co.nz/products/LightSpeed/)。它不是开源的，但是源代码可用并且价格合理 - 大多数 ORM 没有被很好采用的风险当然是质量和支持水平，并且在 .目前净空间。

由于您不喜欢 NHibernate 的依赖项，听起来您不需要日志框架或任何城堡项目方面，即 IoC、Monorail 等。您是否考虑过可能只需要最低限度的 NHibernate 要求（log4net 和我相信 Iesi 集合，以及来自城堡项目的动态代理？）并在它们上运行 ILMerge 以将它们合并到一个程序集中 - 可能需要一些摆弄，但它并不太难 - 或者你可以只提取源代码这些项目中的每一个都成为您为您的组织维护的 NHibernate 的自定义构建，该构建删除了您的项目/组织不需要的功能 - 它并不像听起来那么难/难，我已经为一个项目做了一些类似的事情我们想从 ORM 中受益，但需要减少分布式文件/安装程序的大小。

另外 - 您是否能够解释您对基于 Nhibernate 的解决方案的感觉过于“沉重”……根据我的经验，与某些框架相比，它是一个相当轻量级的 ORM 框架。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-08-16T23:05:44.057

添加到此列表中，您还可以查看[Dapper](https://github.com/StackExchange/Dapper)（为 StackOverflow 本身编写和使用）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-18T06:59:49.527

一般来说，要使您的数据库后端与 .net 一起工作，您需要一个 ADO.Net 提供程序。

对于 MS Access (Jet)，提供程序随 .net 一起提供。对于 SQLite，有一个自包含的 ADO.Net Provider。

至于数据访问层库，如果您想对 ADO.Net 进行一些抽象：

*   MS[数据访问应用程序块](http://msdn.microsoft.com/en-us/library/cc309504.aspx)，是[ms 企业库](http://msdn.microsoft.com/en-us/library/cc467894.aspx)的一部分。
*   ~~[iBatis.Net](http://ibatis.apache.org/)~~（2010 年被 Apache 基金会[退役）](http://attic.apache.org/projects/ibatis.html) [MyBatis.net](https://code.google.com/p/mybatisnet/)
*   来自 Spring Framework.net 的[ADOTemplate](http://www.springframework.net/docs/1.1.2/reference/html/ado.html#d0e12079)

从框架 2.0 及更高版本开始，所有这些都运行良好。

基本上，*你*选择（而且有很多选择）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-18T07:09:23.623

一些替代方案：
- [ActiveRecord](http://activerecorddotnet.codeplex.com/) - 它在后台使用 nhibernate.dll，但配置是通过属性完成的。这就像精简版的 nhibernate
- [Subsonic](http://subsonicproject.com/)
- [CoolStorage.NET](http://coolstorage.codeplex.com/) - 我在小型项目中使用了很多。适用于 dbs 的数量

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-15T09:53:10.007

这里有[很多](http://www.anotherchris.net/orm/a-look-at-net-object-relational-mappers-orms/)替代品，我推荐的：

*   冷库
*   速达
*   ODX
*   Lightspeed（对 8 个或更少的物体免费）

这4个是最轻的。Subsonic、ActiveRecord 等针对大型系统。它们在较小的系统上运行良好，但（至少对于 ActiveRecord）带有大量依赖项列表，并且对于小型系统来说过于杀伤力了。我会选择 Lightspeed，并说 8 个对象以下的任何东西都是一个小系统，并且简单地使用 NHibernate，因为它被广泛采用有利于扩展，但在短期内没有意义 - 在 ORM 和你的消费者之间有一个层可以工作无论如何。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T07:15:45.947

如果您正确使用 LINQ to SQL，它可能是“沉重”ORM 系统的不错替代品。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-07T06:46:39.993

如果您不需要功能齐全的 ORM，而只需要 ADO.NET 上的快速独立于数据库的数据层，请尝试开源[NI.Data 库 (V2)](http://www.nrecosite.com/dalc_net.aspx)。它非常轻量级（只有一个小程序集，没有其他依赖项），提供所有标准数据层基础设施：

*   其字符串表示形式的查询抽象和解析器称为“relex”（它看起来像：“books(rating=5)[title,id]” - Linq-to-SQL 的非常好的替代品，表达式可以动态组合）
*   用于封装复杂的依赖于 DB 语法的 SQL 查询的“视图”概念
*   数据触发器
*   选择/更新/删除查询的数据层权限
*   开箱即用支持 MS SQL、SQLite、MySQL、Odbc/OleDb 提供程序 (MS Access)。可以轻松添加对其他 SQL 数据库的支持。

它的主要组件（DALC）只用一行代码初始化：

```
var dalc = new DbDalc(new SqlClientDalcFactory(), connectionStr); 
```

就这样。如果您需要 .NET 2.0 运行时支持，您可以尝试在 2.0 运行时下编译最新的 V2 版本或使用以前的旧版本（NI.Data.Dalc，V1）。

# c# - 如何在 Asp.Net 中为用户获取 AD 用户组？

> ID：90572
> 
> 赞同：3
> 
> 时间：2008-09-18T06:47:44.253
> 
> 标签：c#, asp.net, active-directory

我需要能够获取用户所在组的列表，但我需要显示以下一个/部分/所有属性：

*   专有名称
*   姓名
*   cn
*   山姆帐户名

我现在拥有的返回某种名称，但不是上面的任何名称（名称看起来很接近，但并不完全匹配。这就是我正在使用的：

```
ArrayList groups = new ArrayList();
foreach (System.Security.Principal.IdentityReference group in System.Web.HttpContext.Current.Request.LogonUserIdentity.Groups)
    groups.Add(group.Translate(typeof(System.Security.Principal.NTAccount))); 
```

就像我说的那样，上述方法有效，但不会让我得到我的程序所需的正确名称（上面指定的名称）。我需要这个能够与我在调用我的域中的所有组时获得的列表相匹配：

```
DirectoryEntry dirEnt = new DirectoryEntry("LDAP://my_domain_controller");
DirectorySearcher srch = new DirectorySearcher(dirEnt);
srch.Filter = "(objectClass=Group)";
var results = srch.FindAll(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-18T07:04:48.907

您不能一步完成，因为组也是具有属性的单独 AD 条目。

因此，在第一次运行时，您应该获取用户所在的组名并将它们填写到某种列表中。

第二步是遍历所有的组名，并逐个查询它们以获得组属性（如distinctname等）并将其收集到某种结构中。

# c# - 为 C# 人真正了解 Java-ME 的最佳方式

> ID：90578
> 
> 赞同：28
> 
> 时间：2008-09-18T06:49:23.327
> 
> 标签：c#, blackberry, java-me, migration

我最近开始为黑莓开发应用程序。因此，我不得不跳到 Java-ME 并学习它及其相关工具。语法很简单，但我一直遇到各种问题和环境问题。

例如，令我惊讶并浪费了大量时间的事情是类对象上没有真正的属性（我认为所有 OOP 语言都有）。有很多陷阱。我去过很多地方，他们比较了 Java 语法和 C#，但似乎没有任何网站可以说明迁移到 Java 时需要注意的事项。

环境是一个完全不同的问题。Blackberry IDE 简直太可怕了。外观让我想起了适用于 Windows 3.1 的 Borland C++——它已经过时了。其他一些问题包括参差不齐的智能感知、弱调试等……黑莓确实有一个 Eclipse 插件的测试版，但没有调试支持，它只是一个带有花哨的重构工具的编辑器。

那么，关于如何融入 Java-ME 的任何建议？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2008-09-18T07:12:42.617

这里的这个[人](http://crfdesign.net/programming/top-10-differences-between-java-and-c)必须进行反向转换。所以他列出了 Java 和 C# 的 10 大差异。我将采用他的主题并展示它是如何用 Java 制作的：

## Gotcha #10 - 给我我的标准输出！

在 Java 中打印到标准输出：

```
System.out.println("Hello"); 
```

## 问题 #9 - 命名空间 == 自由

在 Java 中，您没有命名空间的自由。您的类的文件夹结构必须与包名称匹配。例如，包*org.test*中的一个类必须在文件夹*org/test中*

## Gotcha #8 - super怎么了？

在 Java 中引用超类，您使用保留字`super`而不是`base`

## Gotcha #7 - 将构造函数链接到基本构造函数

你在 Java 中没有这个。你必须自己调用构造函数

## Gotcha #6 - Dagnabit，我如何子类化现有类？

要在 Java 中子类化一个类，请执行以下操作：

```
public class A extends B {
} 
```

这意味着 class`A`是 class 的子类`B`。在 C# 中将是`class A : B`

## Gotcha #5 - 为什么常量不保持不变？

要在 Java 中定义常量，请使用关键字`final`而不是`const`

## 问题 #4 - 哪里是`ArrayList`,`Vector`或`Hashtable`?

Java 中最常用的数据结构是`HashSet`,`ArrayList`和`HashMap`. 他们实施`Set`和。当然，还有一堆。[在此处](http://java.sun.com/docs/books/tutorial/collections/index.html)阅读有关收藏的更多信息`List``Map`

## Gotcha #3 - 访问器和修改器（Getter 和 Setter）

Java 中没有属性工具。您必须为自己声明获取和设置方法。当然，大多数 IDE 可以自动执行此操作。

## 问题 #2 - 我不能覆盖！？

您不必`virtual`在 Java 中声明方法。所有方法——除了那些声明的`final`——都可以在 Java 中被覆盖。

## 还有 #1 陷阱……</h2>

在 Java 中，原始类型`int`、`float`、`double`和`char`与C# 中的`long`不同。`Object`它们都有各自的对象表示，如`Integer`、`Float`、`Double`等。

就是这样。不要忘记查看[原始链接](http://crfdesign.net/programming/top-10-differences-between-java-and-c)，这里有更详细的讨论。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-09-18T09:14:42.900

Java 与 C# 没有显着差异。在纯粹的句法层面上，这里有一些可以帮助你度过一天的提示：

1.  在 Java 中，您有两个异常系列：`java.lang.Exception`以及从它派生的所有异常，以及`RuntimeException`. *这是有意义的，因为在 Java 中会检查*异常；这意味着为了抛出任何非运行时异常，您还需要在`throws`方法声明中添加注释。因此，任何使用您的方法都必须捕获该异常或声明*它*也抛出相同的异常。很多你认为理所当然的例外，例如`NullPointerException`or `IllegalArgumentException`，实际上源自`RuntimeException`因此，您无需声明它们。检查异常是两个学科之间的争论点，所以我建议您自己尝试一下，看看它是否对您有帮助或惹恼您。在个人层面上，我认为检查异常显着提高了代码分解和健壮性。

2.  尽管 Java 支持自动装箱已经有一段时间了，但您应该注意 C# 和 Java 实现之间的一些差异。而在 C# 中，您可以互换地`int`用作值类型和引用类型，而在 Java 中，它们实际上并不是同一种类型：您得到原始值类型`int`和库引用类型`java.lang.Integer`。这表现为两种常见的方式：您不能将值类型用作泛型类型参数（因此您将使用`ArrayList<Integer>`代替`ArrayList<int>`），以及实用方法（例如`parse`or `toString`）在引用类型中静态实现（因此它不是`int a; a.toString();`而是`int a; Integer.toString( a );`）。

3.  Java 有两种不同类型的嵌套类，C# 只有一种。在 Java 中，未使用修饰符声明的静态类`static`称为*内部类*，并且可以隐式访问封闭类的实例。这一点很重要，因为与 C# 不同，Java 没有委托的概念，内部类经常用于以相对较少的语法痛苦来实现相同的结果。

4.  Java 中的泛型以与 C# 完全不同的方式实现；当为 Java 开发泛型时，决定这些更改将是纯粹的语法，不支持运行时，以保持与旧 VM 的向后兼容性。由于运行时没有直接的泛型支持，Java 使用一种称为[类型擦除](http://download.oracle.com/javase/tutorial/java/generics/erasure.html)的技术来实现泛型。与泛型的 C# 实现相比，类型擦除有很多缺点，但最重要的一点是*Java 中的参数化泛型类型没有不同的运行时类型*。换句话说，编译后的类型`ArrayList<Integer>`和`ArrayList<String>`是*等价的*. 如果您大量使用泛型，您会比您想象的更快遇到这些差异。

在我看来，C# 开发人员需要了解该语言的三个最难的方面。除此之外还有开发工具和类库。

1.  在 Java 中，包（命名空间）、类名和文件名之间存在直接关联。在一个共同的根目录下，类`com.example.SomeClass`和`org.apache.SomeOtherClass`将分别在`com/example/SomeClass.class`和中找到`org/apache/SomeOtherClass.class`。小心尝试在单个 Java 文件中定义多个类（私有类可以，但不推荐），并坚持使用此目录结构，直到您对开发环境更加熟悉为止。

2.  In Java you have the concepts of class-path and class-loader which do not easily map to C# (there are rough equivalents which are not in common use by most .NET developers). Classpath tells the Java VM where libraries and classes are to be found (both yours and the system's shared libraries!), and you can think of class loaders as the context in which your types live. Class loaders are used to load types (class files) from various locations (local disk, internet, resource files, whatnot) but also constrain access to those files. For instance, an application server such as Tomcat will have a class loader for each registered application, or context; this means that a static class in application A will not be the same as a static class in application B, even if they have the same name and even if they share the same codebase. AppDomains provide somewhat similar functionality in .NET.

3.  The Java class library is similar to the BCL; a lot of the differences are cosmetic, but it's enough to get you running for the documentation (and/or Google) over and over again. Unfortunately I don't think there's anything to do here — you'll just build familiarity with the libraries as you go.

Bottom line: the only way to grok Java is to use it. The learning curve isn't steep, but prepare to be surprised and frustrated quite often over the first two or three months of use.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T06:56:10.393

简短的回答是——这会很烦人，但并不难。

Java 和 C# 具有所有相同的基本概念，并且许多库在风格上非常接近，但是您将不断遇到各种差异。

如果你在谈论类属性，Java 有这些。语法是

```
public class MyClass {
    public static int MY_CLASS_PROPERTY = 12;
} 
```

我会认真建议您获得更好的IDE。Netbeans、Eclipse、IDEA、JBuider 中的任何一个都将使您的过渡更加愉快。

# javascript - 如何使用 javascript、css 和/或 html 将文本居中放置在表格中的图像上？

> ID：90579
> 
> 赞同：1
> 
> 时间：2008-09-18T06:49:24.730
> 
> 标签：javascript, html, css

如何使用 javascript、css 和/或 html 在表格单元格中的图像上居中显示文本？

我有一个包含图像的 HTML 表格 - 大小都相同 - 我想在每个图像上居中放置一个文本标签。标签中的文字大小可能不同。水平居中并不难，但垂直居中却是。

附录：我最终不得不使用 javascript 使用具有绝对定位的固定大小的 div 可靠地居中文本；我只是无法让它以任何其他方式工作

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-18T06:54:03.143

您可以尝试将图像放在背景中。

```
<table>
    <tr>
        <td style="background: url(myImg.jpg) no-repeat; vertical-align: middle; text-align: center">
            Here is my text
        </td>
    </tr>
</table> 
```

您只需要设置单元格的高度和宽度，就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T05:19:29.573

在 CSS 中没有正确的方法（尽管应该有）。但这是一种对我有用的方法。

CSS：

```
#image1, #image1-text, #image1-container {
  overflow: hidden;
  height: 100px;
  width: 100px;
}

#image1 {
  top: -100px;
  position: relative;
  z-index: -1;
}

#image1-text {
  text-align: center;
  vertical-align: middle;
  display: table-cell;
} 
```

HTML：

```
 <div id="image1-container">
    <img src="image.jpeg" id="image1">
    <div id="image1-text">
      hello
    </div>
  </div> 
```

`image1`容器中和的顺序`image1-text`无关紧要。

这有点骇人听闻，但它可以在任何地方使用，而不仅仅是在桌子上。但是，它在 IE 中无法正常工作。它将显示在顶部。但它适用于 FF、Safari 和 Chrome。没有在 IE8 中测试过。

IE7 或更低版本的 hack，只会显示 1 行，但会居中，是在`<head>`标签内添加以下内容：

```
<!--[if lte IE 7]>
<style>
  #image1-text {
    line-height: 100px;
  }
</style>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T06:57:14.197

我会通过 CSS 将图像设置为单元格的背景，将单元格的大小设置为适当的固定值（再次通过 CSS），然后插入文本标签作为单元格内容。默认情况下，表格单元格的内容是垂直居中的，所以我想你不必担心。同样，垂直和水平对齐可以通过 CSS 轻松设置。这种方法很有效，因为我应用了很多次。

另一种方法是在表格单元格中插入图像和文本，将文本包装在 DIV 元素中并使用其 CSS 属性（相对位置和边距），但这在我看来有点棘手。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T07:01:51.190

您可以使用 TD 的选项“valign”，它可以是顶部、底部或中心……但据我所知，单元格内容默认垂直居中，因此您的 CSS 可能会使它们显示底部或顶部选项。

```
<TABLE><TR valign=center>
  <TD align=center background="some image"> image label </TD>
</TR></TABLE> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-13T05:26:07.737

谢谢大家的建议。

我最终不得不使用 javascript 使用具有绝对定位的固定大小的 div 可靠地居中文本；我只是无法让它以任何其他方式工作。

我还必须生成隐藏可见性的文本 div，并在页面末尾有一个 javascript 循环以使它们可见并将它们放置在适当的表格单元格上

css/html 的布局功能存在一些严重的漏洞，希望这些漏洞将在未来的版本中得到解决；-)

# algorithm - 自然语言处理的词频算法

> ID：90580
> 
> 赞同：32
> 
> 时间：2008-09-18T06:49:26.900
> 
> 标签：algorithm, nlp, word-frequency

在没有获得信息检索学位的情况下，我想知道是否存在任何算法来计算单词在给定文本中出现的频率。目标是获得人们对一组文本评论的“总体感觉”。沿着[Wordle](http://wordle.net/)的路线。

我想要什么：

*   忽略冠词、代词等（'a'、'an'、'the'、'him'、'them'等）
*   保留专有名词
*   忽略连字符，除了软种类

伸手去拿星星，这些将是桃色的：

*   处理词干和复数（例如喜欢、喜欢、喜欢、喜欢匹配相同的结果）
*   形容词（副词等）与其主语（“伟大的服务”相对于“伟大的”、“服务”）的分组

我尝试了一些使用 Wordnet 的基本内容，但我只是盲目地调整了一些东西，并希望它适用于我的特定数据。更通用的东西会很棒。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2008-09-18T08:04:19.263

您不需要一个，而是几个不错的算法，如下所示。

*   忽略代词是通过[stoplist](http://en.wikipedia.org/wiki/Stoplist)完成的。
*   保留专有名词？你的意思是，检测命名实体，比如*胡佛* *水坝*，然后说“这是一个词”或复合名词，比如*编程* *语言*？我会给你一个提示：这很难，但两者都有库。寻找 NER（命名实体识别）和词法分块。[OpenNLP](http://opennlp.sf.net)是一个兼具两者的 Java 工具包。
*   忽略连字符？你是说，比如换行？使用正则表达式并通过字典查找验证生成的单词。
*   处理复数/词干：您可以查看[Snowball stemmer](http://snowball.tartarus.org)。它做得很好。
*   将形容词与其名词“分组”通常是[浅层解析](http://en.wikipedia.org/wiki/Shallow_parsing)的任务。但是，如果您专门寻找定性形容词（好、坏、糟糕、惊人……），您可能会对[情绪分析](https://secure.wikimedia.org/wikipedia/en/wiki/Sentiment_analysis)感兴趣。[LingPipe](http://alias-i.com/lingpipe)可以做到这一点，还有更多。

对不起，我知道你说你想KISS，但不幸的是，你的要求并不容易满足。尽管如此，所有这些都存在工具，如果您不想这样做，您应该能够将它们捆绑在一起而不必自己执行任何任务。如果您想自己执行一项任务，我建议您查看词干提取，这是最简单的。

如果您使用 Java，请将[Lucene](http://lucene.apache.org)与[OpenNLP](http://opennlp.sf.net)工具包结合使用。你会得到很好的结果，因为 Lucene 已经内置了一个词干分析器和很多教程。另一方面，OpenNLP 工具包的文档记录很差，但您不需要太多。您可能还对用 Python 编写的[NLTK感兴趣。](http://nltk.sf.net)

我想说你放弃你的最后一个要求，因为它涉及浅层解析，并且绝对不会改善你的结果。

啊，顺便说一句。您要查找的文档术语频率事物的确切术语称为[tf-idf](http://en.wikipedia.org/wiki/Tf-idf)。这几乎是查找术语的文档频率的最佳方式。为了正确地做到这一点，您将无法使用多维向量矩阵。

... 是的，我知道。参加了 IR 研讨会后，我对 Google 的敬意更加深了。不过，在 IR 中做了一些事情之后，我对他们的尊重也很快下降了。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-18T08:17:37.873

欢迎来到自然语言处理的世界^_^

您所需要的只是一些基本知识和一些工具。

已经有一些工具可以告诉您句子中的单词是名词、形容词还是动词。它们被称为[词性标注器](http://en.wikipedia.org/wiki/Part-of-speech_tagging)。通常，他们将纯文本英语作为输入，并输出单词、其基本形式和词性。这是您帖子第一句话中流行的 UNIX 词性标注器的输出：

```
$ echo "Without getting a degree in information retrieval, I'd like to know if there exists any algorithms for counting the frequency that words occur in a given body of text." | tree-tagger-english 
# Word  POS     surface form
Without IN  without
getting VVG get
a   DT  a
degree  NN  degree
in  IN  in
information NN  information
retrieval   NN  retrieval
,   ,   ,
I   PP  I
'd  MD  will
like    VV  like
to  TO  to
know    VV  know
if  IN  if
there   EX  there
exists  VVZ exist
any DT  any
algorithms  NNS algorithm
for IN  for
counting    VVG count
the DT  the
frequency   NN  frequency
that    IN/that that
words   NNS word
occur   VVP occur
in  IN  in
a   DT  a
given   VVN give
body    NN  body
of  IN  of
text    NN  text
.   SENT    . 
```

如您所见，它将“算法”识别为“算法”的复数形式（NNS），将“存在”识别为“存在”的共轭（VBZ）。它还将“a”和“the”标识为“determiners (DT)”——文章的另一个词。如您所见，词性标注器还标记了标点符号。

要完成列表中最后一点以外的所有操作，您只需通过 POS 标记器运行文本，过滤掉您不感兴趣的类别（限定词、代词等）并计算基本形式的频率的话。

以下是一些流行的 POS 标记器：

[TreeTagger](http://www.ims.uni-stuttgart.de/projekte/corplex/TreeTagger/)（仅限二进制：Linux、Solaris、OS-X）
[GENIA Tagger](http://www-tsujii.is.s.u-tokyo.ac.jp/GENIA/tagger/)（C++：自己编译）
[Stanford POS Tagger](http://nlp.stanford.edu/software/tagger.shtml) (Java)

要完成列表中的最后一件事，您需要的不仅仅是单词级别的信息。一个简单的开始方法是计算*单词**序列* *，* 而不仅仅是单词本身。这些被称为[n-gram](http://en.wikipedia.org/wiki/N-gram)。一个好的起点是[UNIX for Poets](http://people.sslmit.unibo.it/~baroni/compling04/UnixforPoets.pdf)。如果你愿意投资一本关于 NLP 的书，我会推荐[Foundations of Statistical Natural Language Processing](https://rads.stackoverflow.com/amzn/click/com/0262133601)。

 ** * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-18T08:26:36.293

这是一个如何在 Python 中执行此操作的示例，这些概念在任何语言中都是相似的。

```
>>> import urllib2, string
>>> devilsdict = urllib2.urlopen('http://www.gutenberg.org/files/972/972.txt').read()
>>> workinglist = devilsdict.split()
>>> cleanlist = [item.strip(string.punctuation) for item in workinglist]
>>> results = {}
>>> skip = {'a':'', 'the':'', 'an':''}
>>> for item in cleanlist:
      if item not in skip:
        try:
          results[item] += 1
        except KeyError:
          results[item] = 1

>>> results
{'': 17, 'writings': 3, 'foul': 1, 'Sugar': 1, 'four': 8, 'Does': 1, "friend's": 1, 'hanging': 4, 'Until': 1, 'marching': 2 ... 
```

第一行只是获取帮助解决部分问题的库，如第二行，urllib2 下载 Ambrose Bierce 的“恶魔词典”的副本。下一行列出了文本中的所有单词，没有标点符号。然后创建一个哈希表，在这种情况下，它就像一个与数字相关联的唯一单词列表。for 循环遍历 Bierce 书中的每个单词，如果表中已经存在该单词的记录，则每次新出现的值都会在表中与该单词关联的值上加一；如果该词尚未出现，则将其添加到表中，值为 1（表示出现一次。）对于您正在谈论的情况，您可能希望更加关注细节，例如使用大写帮助识别仅在句子中间的专有名词，

为了进入词干化和复数化的东西，实验，然后研究第 3 方的工作，我喜欢 NLTK 的部分内容，这是一个学术开源项目，也是在 python 中的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-18T07:48:39.550

不久前我写了一个完整的程序来做这件事。回家后我可以上传一个演示。

这是代码（asp.net/c#）：h ttp [://naspinski.net/post/Findingcounting-Keywords-out-of-a-Text-Document.aspx](http://naspinski.net/post/Findingcounting-Keywords-out-of-a-Text-Document.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-18T08:07:19.613

你问题的第一部分听起来还不错。您基本上需要做的就是从文件（或 w/e 流）中读取每个单词并将其放入前缀树中，每次遇到已经存在的单词时，您都会增加与其关联的值。当然，您也会有一个忽略列表，其中包含您希望从计算中排除的所有内容。

如果您使用前缀树，您可以确保找到任何单词都需要 O(N)，其中 N 是数据集中单词的最大长度。在这种情况下，前缀树的优点是，如果你想查找复数和词干，你可以检查 O(M+1) 如果这个词甚至可能的话，其中 M 是没有词干或复数的词的长度（这是一个词吗？呵呵）。一旦你建立了你的前缀树，我会重新分析它的词干等并将它浓缩下来，这样根词就是保存结果的东西。

在搜索时，您可以制定一些简单的规则，以使匹配在根或茎或您拥有的情况下返回正数。

第二部分似乎极具挑战性。我的天真倾向是为形容词-主题分组保留单独的结果。使用与上述相同的原则，但将其分开。

语义分析的另一个选项可以将每个句子建模为主语、动词等关系的树（句子有主​​语和动词，主语有名词和形容词等）。一旦您以这种方式分解了所有文本，似乎很容易通过并快速计算发生的不同适当配对。

只是一些漫无边际的东西，我相信有更好的想法，但我喜欢思考这些东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-18T07:00:35.860

你刚才描述的算法。一个开箱即用的程序，带有一个大按钮，上面写着“做”......我不知道。

但让我有建设性。我向您推荐这本书[Programming Collective Intelligence](http://oreilly.com/catalog/9780596529321/)。第 3 章和第 4 章包含非常实用的示例（真的，没有复杂的理论，只是示例）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-09-01T06:03:19.577

你可以使用worldnet字典来获取问题关键字的基本信息，比如它的过去的语音，提取同义词，你也可以为你的文档做同样的事情来为它创建索引。然后您可以轻松地将关键字与索引文件匹配并对文档进行排名。然后对其进行总结。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-13T08:22:27.240

[spacy](https://spacy.io)可以很好地处理您列出的所有内容。

1.  忽略一些词 - 使用停用词
2.  提取主题 - 使用词性标记来识别它（开箱即用）。解析一个句子后，找到“ROOT”——句子的主要动词。通过[导航分析树](https://spacy.io/usage/linguistic-features)，您将找到与该动词相关的名词。这将是主题。
3.  忽略连字符 - 他们的分词器在大多数情况下处理连字符。它可以很容易地扩展以处理更多的特殊情况。

如果主题列表是预先确定的并且不是很大，你甚至可以更进一步：建立一个可以预测主题的分类模型。假设你有 10 个科目。您收集示例句子或文本。您将它们加载到另一个产品中：[prodigy](https://prodi.gy)。使用它的出色界面，您可以快速将主题分配给样本。最后，使用分类样本训练 spacy 模型来预测文本或句子的主题。

# search - 轻量级搜索索引 API/库

> ID：90584
> 
> 赞同：2
> 
> 时间：2008-09-18T06:50:26.943
> 
> 标签：search, indexing

我正在寻找一个开源搜索索引库。它将用于嵌入式 Web 应用程序，因此它应该具有较小的代码大小。最好用 C、C++ 或 PHP 编写，并且不需要安装任何数据库来存储索引。索引应该存储在文件中（例如，xml、txt）。我尝试查看一些著名的搜索库，例如 xapian 和 clucene，它们很好，但对于嵌入式系统来说代码量相对较大。

这将在 Linux 平台上运行，并将用于索引 HTML 文件。

关于什么是好的搜索库/API 有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T07:23:06.710

[超级埃斯特拉](http://hyperestraier.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T08:20:26.790

天啊。有几个。按照默默无闻的顺序...

*   [FT搜索](http://eigenclass.org/hiki.rb?simple+full+text+search+engine)
*   [泽泰尔](http://www.seg.rmit.edu.au/zettair/)
*   [狮身人面像](http://www.sphinxsearch.com/)
*   [雪貂](http://ferret.davebalmain.com/api/files/README.html)
*   [Solr](http://lucene.apache.org/solr/)（虽然基于 lucene，可能太重了）

我敢肯定那里还有很多，但这些是我想不到的。祝你好运 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T06:55:01.677

首先：您必须在某处存储索引。因此，除非您只需要内存索引，否则将需要一个数据文件。

要索引通用项目，我可以向您推荐 sqlite：[http](http://www.sqlite.org/) ://www.sqlite.org/ 。当我有一堆数据并且我需要使用多个索引处理它时，我什至在仅内存模式下使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T08:45:55.560

这取决于您的要求。一个完整的 Lucene (Java) 发行版最多可以有 3MB JAR 文件，但实际上可以精简到 1MB 以下。CLucene 在实践中可能要小得多。需要降到多低？...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-01T20:43:30.850

[Swish-E](http://swish-e.org/)是用 C 语言编写的，可以做你想做的事。不需要数据库，使用自己的二进制索引文件格式。

我也使用过[ht://Dig](http://www.htdig.org/)，但它看起来已经很久没有维护该软件了。

两者都可以在 Linux 上编译并索引 HTML。

第三种选择是[AustLII](http://www.austlii.edu.au/)使用的[SINO](http://www.austlii.edu.au/techlib/software/sino/)。联系那里的团队以确保您获得最新版本。应该在Linux上编译没有太多麻烦。它并不是真正为嵌入式系统设计的（SINO 代表 Size Is No Object），但我上次查看时有一个不错的 API，而且相对较小（因此，它不是为它设计的，但可能也能正常工作）。针对 HTML。相当快的索引。我认为值得一看。（披露：很久以前在那里工作过）

最后，我们使用基于[Lucene的](http://lucene.apache.org/java/docs/index.html)[Solr](http://lucene.apache.org/solr/)。Solr 使用基于将 XML 文档发布到服务器的简单 API。无论您使用什么语言，界面都非常简单。

# .net - 创建 Web 客户端解决方案对话框在单击或选项卡超出默认字段时关闭，没有消息

> ID：90586
> 
> 赞同：0
> 
> 时间：2008-09-18T06:51:06.520
> 
> 标签：.net, visual-studio-2008

我在 Visual Studio Team System 2008 开发版（无 SP1）上安装了 Web Client Software Factory 2008 年 2 月版。当我第一次安装它时，我试用了软件工厂，因为我以前从未使用过它，它运行良好。那是两个月前的事了。

最近我需要学习如何使用软件工厂，当我尝试创建 WCSF 解决方案时，我遇到了问题。

WCSF 在 Guidance Package 项目类型下显示为 Visual Studio 安装模板。有四个模板（我认为应该是这样），它们是：

*   Web 客户端解决方案（C#、网站）
*   Web 客户端解决方案（C#、WAP）
*   Web 客户端解决方案（Visual Basic、网站）
*   Web 客户端解决方案（Visual Basic、WAP）

一旦我选择了其中任何一个并继续创建解决方案，Visual Studio 就会显示“创建 Web 客户端解决方案”对话框。这是奇怪的部分。只要我点击任何可点击的控件，例如 TextBox、Button 或按键盘上的“Tab”键来更改光标的位置，对话框就会关闭，没有创建解决方案，状态栏将显示“Creating project 'C :\MyWebApp' ... 项目创建失败。” 如果我单击对话框的任何其他部分，则不会发生任何事情。

我已经尝试卸载所有内容（包括 Visual Studio）并重新安装，但它仍然无法正常工作。我尝试使用 Microsoft 的“Windows 安装清理”工具来确保在重新安装之前删除任何潜在的损坏 MSI 条目。没有任何效果。

希望其他人以前遇到过这个问题并找到了答案。

干杯。

~ 汞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-20T19:48:18.047

我相信这可能是与 VS 相关的授权问题，而不是特定的 WCFS 问题。
试试这个修复：http: [//developerspoint.wordpress.com/2008/06/25/how-to-deal-with-project-creation-failed-problem-of-visual-studio-2008/](http://developerspoint.wordpress.com/2008/06/25/how-to-deal-with-project-creation-failed-problem-of-visual-studio-2008/)

# javascript - 如何实现在调整浏览器窗口大小时缩放的网页？

> ID：90595
> 
> 赞同：6
> 
> 时间：2008-09-18T06:53:01.103
> 
> 标签：javascript, html, css, ajax

如何实现在调整浏览器窗口大小时缩放的网页？

我可以使用表格或 CSS 浮动部分来布置页面元素，但我希望在调整浏览器窗口大小时重新缩放显示

我有一个使用 AJAX PRO 和带有溢出：自动和 onwindowresize 钩子的 DIV 的工作解决方案，但它很麻烦。有没有更好的办法？

*   感谢大家到目前为止的答案，我打算尝试所有（或至少大部分），然后选择最佳解决方案作为该线程的答案

*   使用 CSS 和百分比似乎效果最好，这是我在原始解决方案中所做的；使用可见性：hidden div 设置为 100% by 100% 提供了一种测量窗口客户区的方法[否则在 IE 中很困难]，并且 onwindowresize javascript 函数允许 AJAXPRO 方法在调整窗口大小以重绘时启动新分辨率下的布局单元格内容

编辑：我很抱歉没有完全清楚；我需要一个“液体布局”，其中主要元素（“窗格”）会随着浏览器窗口大小的调整而缩放。我发现我必须使用 AJAX 调用在调整大小后重新显示“窗格”内容，并保持溢出：自动打开以避免滚动

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-18T06:56:31.017

而不是在css中使用“宽度：200px”，使用“宽度：50％”之类的东西

这使得它使用了 50% 的任何东西，所以在以下情况下：

```
<body>
 <div style="width:50%">
  <!--some stuff-->
 </div>
</body> 
```

div 现在总是水平占据窗口的一半。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-18T06:57:29.500

除非您在这里有一些特定要求，否则我不确定这里为什么需要 JS。表格布局是在 html 中制作流畅布局的简单（和古老）方式，但带有 css 的 div 布局也允许流畅布局，请参阅[http://www.glish.com/css/2.asp](http://www.glish.com/css/2.asp)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-18T07:07:29.853

是的，听起来你想看一个流畅的 CSS 布局。对于这方面的资源，只需 google 流畅的 CSS 布局，应该会给你很多东西来检查。另请查看[this previous question](https://stackoverflow.com/questions/61250/divs-vs-tables-or-css-vs-being-stupid)以获得一些好的指示。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-18T07:11:54.130

这实际上取决于您正在实施的网页。作为一般规则，您将需要 100% CSS。在调整包含文本的元素大小时，请记住要倾向于面向文本的大小，例如 em、ex 而不是 px。

如果您是 CSS 新手，浮动是危险的。我不是新手，他们对我来说仍然有些莫名其妙。尽可能避免它们。通常，您只需要修改您正在处理的 div 或元素的显示属性。

如果您执行所有这些操作并搜索您遇到其他困难的网络，那么您不仅会拥有在浏览器这样做时调整大小的页面，而且还会有可以通过调整文本大小来放大和缩小的页面。基本上，做对了，设计是牢不可破的。我已经看到它在复杂的布局上完成，但它需要做很多工作，就像在某些情况下对网页进行编程一样多。

我不确定你做这个网站是为了谁（乐趣，利润，两者兼而有之），但我建议你仔细思考如何平衡 CSS 纯度，并在这里和那里使用一些技巧来帮助提高你的效率. 您的网站是否有业务需要 100% 可访问？不？然后拧一下。先做你需要做的事情来赚钱，然后用你的热情去疯狂，做任何你有时间做的事情。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-18T07:09:02.720

需要考虑的其他一点是，在调整窗口大小时 JavaScript 不会持续更新，因此会有明显的延迟/断断续续。使用流畅的 CSS 布局，屏幕元素几乎会立即更新以实现无缝过渡。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-18T07:10:54.010

我见过的最好的方法是使用[YUI](http://developer.yahoo.com/yui/) CSS 工具，然后对所有内容使用百分比。[YUI 网格](http://developer.yahoo.com/yui/grids/)允许各种固定宽度或流体布局，列大小指定为可用空间的一部分。有一个[YUI Grids Builder](http://developer.yahoo.com/yui/grids/builder/)可以帮助布局。[YUI Fonts](http://developer.yahoo.com/yui/fonts/)为您提供良好的字体大小控制。有一些不错的[备忘单](http://yuiblog.com/assets/pdf/cheatsheets/css.pdf)可以向您展示如何布局和有用的东西，例如为这么多像素的字体大小指定多少百分比。

当浏览器窗口调整大小有点棘手时，这可以让您缩放定位但整个站点的缩放，包括字体大小。我认为您将不得不为此编写某种浏览器插件，这意味着您的解决方案将是不可移植的。如果您在 Intranet 上，这还不错，因为您可以控制每个客户端上的浏览器，但是如果您想要一个可以在 Internet 上使用的站点，那么您可能需要重新考虑您的 UI。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-18T07:21:00.460

在尝试了本书的解决方案后，我在 Firefox 或 IE 中遇到了不兼容问题。所以我做了一些修改并想出了这个 CSS。如您所见，边距是所需大小的一半并且为负数。

```
<head><title>Centered</title>
<style type="text/css">
body { 
        background-position: center center;
        border: thin solid #000000;
        height: 300px;
        width: 600px;
        position: absolute;
        left: 50%;
        top: 50%;
        margin-top: -150px;
        margin-right: auto;
        margin-bottom: auto;
        margin-left: -300px;
    }
</style></head> 
```

希望有帮助

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-23T03:34:05.757

使用百分比！假设您有一个“主窗格”，所有页面的内容都位于其中。您希望它始终位于窗口的中心，并且是窗口宽度的 80%。

只需这样做：
#centerpane{ 边距：自动；宽度：80%；}

多田！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-08T03:23:17.447

感谢所有的建议！看起来我不得不做的丑陋的事情是必要的。以下在 IE 和 FireFox 中有效（无论如何在我的机器上）。稍后我可能会为此为 CodeProject.com 写一篇文章；-)

此 javascript 位于 <head> 部分：

```
<script type="text/javascript">
var tmout = null;
var mustReload = false;

function Resizing()
{
    if (tmout != null)
    {
        clearTimeout(tmout);
    }
    tmout = setTimeout(RefreshAll,300);
}
function Reload()
{
    document.location.href = document.location.href;
}
//IE fires the window's onresize event when the client area 
//expands or contracts, which causes an infinite loop.
//the way around this is a hidden div set to 100% of 
//height and width, with a guard around the resize event 
//handler to see if the _window_ size really changed
var windowHeight;
var windowWidth;
window.onresize = null;
window.onresize = function()
{
    var backdropDiv = document.getElementById("divBackdrop");
    if (windowHeight != backdropDiv.offsetHeight ||
        windowWidth != backdropDiv.offsetWidth)
    {
        //if screen is shrinking, must reload to get correct sizes
        if (windowHeight != backdropDiv.offsetHeight ||
            windowWidth != backdropDiv.offsetWidth)
        {
            mustReload = true;
        }
        else
        {
            mustReload = mustReload || false;
        }
        windowHeight = backdropDiv.offsetHeight;
        windowWidth = backdropDiv.offsetWidth;
        Resizing();
    }
}
</script> 
```

<body> 开头是这样的：

```
<body onload="RefreshAll();">
    <div id="divBackdrop" 
        style="width:100%; clear:both; height: 100%; margin: 0; 
            padding: 0; position:absolute; top:0px; left:0px; 
            visibility:hidden; z-index:0;">
    </div> 
```

DIV 向左浮动以进行布局。我必须将高度和宽度设置为略低于全部数量的百分比（例如，99.99%、59.99%、39.99%），以防止浮动包装，这可能是由于 DIV 上的边框。

最后，在内容部分之后，另一个用于管理刷新的 javascript 块：

```
var isWorking = false;
var currentEntity = <%=currentEntityId %>;

//try to detect a bad back-button usage;
//if the current entity id does not match the querystring 
//parameter entityid=###
if (location.search != null && location.search.indexOf("&entityid=") > 0)
{
    var urlId = location.search.substring(
        location.search.indexOf("&entityid=")+10);
    if (urlId.indexOf("&") > 0)
    {
        urlId = urlId.substring(0,urlId.indexOf("&"));
    }
    if (currentEntity != urlId)
    {
        mustReload = true;
    }
}
//a friendly please wait... hidden div
var pleaseWaitDiv = document.getElementById("divPleaseWait");
//an example content div being refreshed via AJAX PRO
var contentDiv = document.getElementById("contentDiv");

//synchronous refresh of content
function RefreshAll()
{
    if (isWorking) { return; }  //no infinite recursion please!

    isWorking = true;
    pleaseWaitDiv.style.visibility = "visible";

    if (mustReload)
    {
        Reload();
    }
    else
    {
        contentDiv.innerHTML = NAMESPACE.REFRESH_METHOD(
            (currentEntity, contentDiv.offsetWidth, 
             contentDiv.offsetHeight).value;
    }

    pleaseWaitDiv.style.visibility = "hidden";
    isWorking = false;
    if (tmout != null)
    {
        clearTimeout(tmout);
    }
}

var tmout2 = null;
var refreshInterval = 60000;

//periodic synchronous refresh of all content
function Refreshing()
{
    RefreshAll();
    if (tmout2 != null)
    {
        clearTimeout(tmout2);
        tmout2 = setTimeout(Refreshing,refreshInterval);
    }
}

//start periodic refresh of content
tmout2 = setTimeout(Refreshing,refreshInterval);

//clean up
window.onunload = function() 
{
    isWorking = true;
    if (tmout != null)
    {
        clearTimeout(tmout);
        tmout = null;
    }
    if (tmout2 != null)
    {
        clearTimeout(tmout2);
        tmout2 = null;
    } 
```

丑陋，但它有效 - 我猜这才是真正重要的;-)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-11-13T06:04:36.630

使用 ems。[jontangerine.com](http://jontangerine.com/)和[simplebits.com](http://simplebits.com/)都是很棒的例子。进一步阅读[——Jon Tan 的 CSS 令人难以置信的 Em 和 Elastic 布局](http://jontangerine.com/log/2007/09/the-incredible-em-and-elastic-layouts-with-css)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-01-29T05:13:27.277

<body onresize="resizeWindow()" onload="resizeWindow()" > 页</body>

```
 /**** Page Rescaling Function ****/

    function resizeWindow() 
    {
        var windowHeight = getWindowHeight();
        var windowWidth = getWindowWidth();

        document.getElementById("content").style.height = (windowHeight - 4) + "px";
    }

    function getWindowHeight() 
    {
        var windowHeight=0;
        if (typeof(window.innerHeight)=='number') 
        {
            windowHeight = window.innerHeight;
        }
        else {
            if (document.documentElement && document.documentElement.clientHeight) 
            {
                windowHeight = document.documentElement.clientHeight;
            }
            else 
            {
                if (document.body && document.body.clientHeight) 
                {
                    windowHeight = document.body.clientHeight;
                }
            }
        }
        return windowHeight;
    } 
```

我目前正在研究的解决方案需要对宽度进行一些更改，否则到目前为止高度工作正常^^

-尾崎

# c# - 我可以从 DirectorySearcher 获得超过 1000 条记录吗？

> ID：90652
> 
> 赞同：74
> 
> 时间：2008-09-18T07:11:25.943
> 
> 标签：c#, asp.net, active-directory

我刚刚注意到结果的返回列表限制为 1000。我的域（HUGE 域）中有超过 1000 个组。如何获得超过 1000 条记录？我可以从以后的记录开始吗？我可以把它分成多个搜索吗？

这是我的查询：

```
DirectoryEntry dirEnt = new DirectoryEntry("LDAP://dhuba1kwtn004");
string[] loadProps = new string[] { "cn", "samaccountname", "name", "distinguishedname" };
DirectorySearcher srch = new DirectorySearcher(dirEnt, "(objectClass=Group)", loadProps);
var results = srch.FindAll(); 
```

我试图设置**srch.SizeLimit = 2000;** ，但这似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2008-09-18T07:15:45.060

您需要将 DirectorySearcher.PageSize 设置为非零值才能获得所有结果。

顺便说一句，您还应该在完成后处理 DirectorySearcher

```
using(var srch = new DirectorySearcher(dirEnt, "(objectClass=Group)", loadProps))
{
    srch.PageSize = 1000;
    var results = srch.FindAll();
} 
```

API文档不是很清楚，但本质上是：

*   当您进行分页搜索时，SizeLimit 将被忽略，并在您遍历 FindAll 返回的结果时返回所有匹配的结果。结果将从服务器一次检索一个页面。我在上面选择了 1000 的值，但如果愿意，您可以使用较小的值。权衡是：使用较小的 PageSize 将更快地返回每一页结果，但在迭代大量结果时需要更频繁地调用服务器。

*   默认情况下不分页搜索 (PageSize = 0)。在这种情况下，最多返回 SizeLimit 结果。

正如 Biri 指出的那样，处理 FindAll 返回的 SearchResultCollection 很重要，否则您可能会出现内存泄漏[，如 DirectorySearcher.FindAll 的 MSDN 文档的备注部分所述](https://docs.microsoft.com/en-us/dotnet/api/system.directoryservices.directorysearcher.findall#remarks)。

在 .NET 2.0 或更高版本中帮助避免这种情况的一种方法是编写一个自动处理 SearchResultCollection 的包装器方法。这可能类似于以下内容（或者可能是 .NET 3.5 中的扩展方法）：

```
public IEnumerable<SearchResult> SafeFindAll(DirectorySearcher searcher)
{
    using(SearchResultCollection results = searcher.FindAll())
    {
        foreach (SearchResult result in results)
        {
            yield return result;        
        } 
    } // SearchResultCollection will be disposed here
} 
```

然后，您可以按如下方式使用它：

```
using(var srch = new DirectorySearcher(dirEnt, "(objectClass=Group)", loadProps))
{
    srch.PageSize = 1000;
    var results = SafeFindAll(srch);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-02T11:50:56.597

我尝试使用给定的解决方案来实现分页，但它不起作用。我设置 pageSize = 100; 我通过searchResult获取所有项目。

dirSearcher = new DirectorySearcher(目录); dirSearcher.Filter = ("(|(objectClass=volume). (objectClass=user)(objectClass=printQueue)(objectClass=computer). (objectClass=organizationalUnit)(objectClass=Group))");

```
 dirSearcher.PageSize = 100;
            dirSearcher.SearchScope = System.DirectoryServices.SearchScope.Subtree;
            dirSearcher.ServerTimeLimit = new TimeSpan(1000);

            //dirSearcher.VirtualListView = new DirectoryVirtualListView(0, 100, 1);

            using (SearchResultCollection results = dirSearcher.FindAll())
            {
                foreach (SearchResult result in results)
                {
                    DirectoryEntry ent = result.GetDirectoryEntry();
                    ADItem ProviderItem = Context.ConvertToItem(ent, true);

                    if (ProviderItem != null)
                    {
                        ProviderItem.IsPartialData = true;
                        ProviderItems.Add(ProviderItem);
                    }
                }

            }
        } 
```

# c# - 模拟方法结果

> ID：90657
> 
> 赞同：9
> 
> 时间：2008-09-18T07:12:55.970
> 
> 标签：c#, mocking, rhino-mocks

我试图找到一种方法来伪造从另一个方法中调用的方法的结果。

我有一个“LoadData”方法，它调用一个单独的助手来获取一些数据，然后它会转换它（我有兴趣测试转换后的结果）。

所以我有这样的代码：

```
public class MyClass(){
  public void LoadData(){
    SomeProperty = Helper.GetSomeData();
 }
 public object SomeProperty {get;set;}
} 
```

我想从 Helper.GetSomeData() 方法得到一个已知的结果。我可以使用模拟框架（我对 Rhino Mocks 的经验相当有限，但对任何事情都持开放态度）来强制实现预期结果吗？如果是这样，怎么做？

*编辑 - 是的，正如预期的那样，我无法实现我想要的破解，我必须找到一种更好的方法来设置数据。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-18T07:19:56.967

你那里有问题。我不知道这是否是您的代码的简化方案，但如果以这种方式使用 Helper 类，那么您的代码是不可测试的。首先，Helper 类是直接使用的，所以**不能用 mock 代替**。其次，您正在调用静态方法。我不了解 C#，但在 Java 中你**不能覆盖静态方法**。

您必须进行一些重构才能使用虚拟 GetSomeData() 方法注入模拟对象。

在你的代码的这个简化版本中很难给你一个直接的答案。你有一些选择：

*   为 Helper 类创建一个接口，并为客户端提供一种将 Helper 实现注入 MyClass 类的方法。但是，如果 Helper 真的只是一个实用程序类，那它就没有多大意义了。
*   在 MyClass 中创建一个名为 getSomeData 的受保护方法，并使其仅调用 Helper.LoadSomeData。然后将 LoadData 中对 Helper.LoadSomeData 的调用替换为 for getSomeData。现在您可以模拟 getSomeData 方法以返回虚拟值。

* * *

**当心简单地创建一个到 Helper 类的接口**并通过方法注入它。这可以暴露实现细节。为什么客户端应该提供一个**实用程序**类的实现来调用一个简单的操作？这将增加 MyClass 客户端的复杂性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-18T07:35:52.560

我建议将你所拥有的东西转换成这样的东西：

```
public class MyClass()
{
    private IHelper _helper;

    public MyClass()
    {
        //Default constructor normal code would use.
        this._helper = new Helper();
    }

    public MyClass(IHelper helper)
    {
        if(helper == null)
        {
            throw new NullException(); //I forget the exact name but you get my drift ;)
        }
        this._helper = helper;
    }

    public void LoadData()
    {
        SomeProperty = this._helper.GetSomeData();
    }
    public object SomeProperty {get;set;}
} 
```

现在你的类支持所谓的依赖注入。这允许您注入帮助类的实现，并确保您的类只需要依赖于接口。当您模拟它时，您知道您只需创建一个使用 IHelper 接口的模拟并将其传递给构造函数，您的类将使用它，就好像它是真正的 Helper 类一样。

现在，如果您坚持将 Helper 类用作静态类，那么我建议您使用代理/适配器模式并将静态类与另一个支持 IHelper 接口的类（您还需要创建）包装在一起。

如果在某些时候您想更进一步，您可以从修改后的类中完全删除默认的 Helper 实现并使用 IoC（控制反转）容器。如果这对你来说是新的，我建议首先关注为什么所有这些额外的麻烦都是值得的（恕我直言）。

你的单元测试看起来像这样的伪代码：

```
public Amazing_Mocking_Test()
{
    //Mock object setup
    MockObject mockery = new MockObject();
    IHelper myMock = (IHelper)mockery.createMockObject<IHelper>();
    mockery.On(myMock).Expect("GetSomeData").WithNoArguments().Return(Anything);

    //The actual test
    MyClass testClass = new MyClass(myMock);
    testClass.LoadData();

    //Ensure the mock had all of it's expectations met.
    mockery.VerifyExpectations();
} 
```

如果您有任何问题，请随时发表评论。（顺便说一句，我不知道这段代码是否都能正常工作，我只是在浏览器中输入了它，我主要是在说明概念）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T07:16:10.347

据我所知，您应该为 Helper 对象创建一个接口或一个基本抽象类。使用 Rhino Mocks，您可以返回您想要的值。

或者，您可以为 LoadData 添加一个重载，该重载接受您通常从 Helper 对象检索的数据作为参数。这甚至可能更容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T01:22:50.640

您可能想研究 Typemock Isolator，它可以“伪造”方法调用，而不会强迫您重构代码。我是该公司的开发人员，但如果您想选择不更改您的设计（或为了可测试性而被迫不更改它），该解决方案是可行的，它位于 www.Typemock.com

罗伊博客：ISerializable.com

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-18T07:15:48.350

是的，模拟框架正是您正在寻找的。您可以记录/安排您希望某些模拟/存根类返回的方式。

Rhino Mocks、Typemock 和 Moq 都是很好的选择。

当我第一次开始使用 Rhino Mocks 时，[Steven Walther 关于使用 Rhino Mocks 的帖子对我帮助很大。](http://weblogs.asp.net/stephenwalther/archive/2008/03/22/tdd-introduction-to-rhino-mocks.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T07:20:51.787

我会尝试这样的事情：

```
public class MyClass(){
  public void LoadData(IHelper helper){
    SomeProperty = helper.GetSomeData();
 } 
```

通过这种方式，您可以使用例如 MOQ 来模拟帮助程序类。

# build-process - 在多台主机上编译

> ID：90658
> 
> 赞同：2
> 
> 时间：2008-09-18T07:12:57.717
> 
> 标签：build-process, build-automation

假设您正在开发需要在多个主机（例如 Linux 和 Windows）上编译和运行的代码，鉴于以下情况，您将如何以最有效的方式执行此操作：

*   您可以完全访问要编译的每个主机的硬件（在我的情况下，一台 Linux 主机和一台站在我办公桌上的 Windows 主机）
*   在网络驱动器上构建太昂贵了
*   不需要提交到中央存储库——假设有一个 CI 引擎会在签入任何内容后立即尝试构建

“高效”意味着使编译-编辑-运行周期尽可能短和简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-18T07:35:20.957

我能推荐的最好的东西是一个很棒的跨平台项目，叫做“BuildBot”。

每次您将新版本签入源代码控制系统时，BuildBot 都会自动在您支持的每个平台上进行构建。让它在 OSX、Linux (ubuntu)、Linux (debian)、Linux (Redhat)、Vista、Windows XP 等上构建，并在构建失败时发送电子邮件或您喜欢的任何内容。

作为构建过程的一部分，如果测试通过，您可以发布二进制文件。适用于“夜间”或“流血边缘”构建。

这里有一些网址：

*   Buildbot.net 主页
*   Python.org 的 buildbot

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T07:23:05.417

我们发现[Hudson](http://hudson-ci.org/)是一个很棒的 CI 服务器，可以根据需要从源代码控制执行构建。由于它是用 Java 编写的，它可以在您选择的目标平台上运行，并且由于界面是基于 Web 的，您可以从任何地方控制它。有插件可以做大部分你想做的事情，最重要的是它是免费的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-18T21:18:54.407

其他答案中提到的大多数构建服务器都会从版本控制系统中检查您的更改。鉴于您的*“不需要提交中央存储库”的*要求，我建议您尝试使用 Jetbrains [TeamCity](http://www.jetbrains.com/teamcity/) CI 服务器。

它具有来自 Visual Studio 和 Eclipse 的插件，并允许您请求“[私有构建](http://www.jetbrains.com/teamcity/delayed_commit.html)”，将您的更改直接发送到构建服务器。对于每个项目，您可以定义许多具有不同要求的构建配置（操作系统是可能的要求之一）。如果构建成功，插件将提示您提交更改。

免费版支持 3 个代理，如果需要，您可以购买更多。

看起来 Pulse 也有[相同的功能](http://www.zutubi.com/products/pulse/features/list/#personal)，但我没有第一手经验。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T07:18:04.397

选择一台机器作为您的开发箱。

将另一个设置为定期（每小时/每天/无论如何）从您的源代码管理自动更新。任何构建/测试失败都应该向您发送某种警告消息。（电子邮件，我，无论如何）。您的非开发框仍在本地构建，因为它有自己的树副本。

在进行真正的发布之前，您当然仍想进行人体测试。但这让生活在剩下的时间里保持清醒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-18T07:29:50.390

为此类任务构建简单的设置非常简单。
我会建议在 Windows 平台上使用[Cygwin 。](http://www.cygwin.com/)通过这种方式，您可以为 Linux 和 Windows 平台编写完全可移植的软件/脚本。您不清楚您在哪个项目阶段发布，但假设您只是开始我会建议使用[make](http://www.gnu.org/software/make/)来构建您的软件。您可以使用 cron 来安排签出/构建周期的频率。如果构建日志损坏，您甚至可以发送包含构建日志的电子邮件。
有许多商业和开源的日常构建测试，你可以用谷歌搜索它，或者可能有人会在这里添加建议。
我们正在使用自制工具来完成这项任务，所以我不能建议任何现成的东西。

好的，我错过了你不想使用源代码控制系统的观点（这很奇怪，但你是老板 :)）在这种情况下，只需用 rsync 替换签出，其他一切都保持相似。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T07:34:07.900

使用[http://ccache.samba.org](http://ccache.samba.org)来加快编译速度，因为在一个较大的项目中只有几个文件发生了变化，

当进行了较大的更改时，同时利用[http://en.opensuse.org/Icecream](http://en.opensuse.org/Icecream)进行共享分布式编译。

这可能会显着加快您的编译-编辑-运行周期。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T07:36:31.747

由于您使用的是 CI，我假设您已经正确设置了构建过程。我们正在做的是我们将 windows 盒子用作开发机器，CI 在 Solaris 上运行。这确保了代码在多个平台上都能很好地编译。代码是 Java 的，我们不使用任何本地库，因此可以保证代码可以正常工作。我们在工作中使用 Bamboo - 它很棒但不是免费的:-)

对于我的私人项目，我一直在使用 Continuum，但 Husdon 看起来很整洁（我会试一试） - 谢谢 Peter。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-18T23:43:44.153

一种选择是[Cascade](http://www.conifersystems.com/cascade/)，它允许您通过在服务器上“检查点”它们来在提交之前而不是之后在所有平台上测试您的更改。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-19T17:18:10.520

一句话：[Cruise](http://studios.thoughtworks.com/cruise-continuous-integration)（不是Cruise Control）非常好。

您可以免费获得两个代理，每个平台一个代理。在 mac 和 pc 上设置实际上需要几分钟，据我所知，在 linux 上并不算太糟糕。

# c# - 绘图和应用程序退出时如何防止 C# 中的 ObjectDisposedException

> ID：90662
> 
> 赞同：1
> 
> 时间：2008-09-18T07:14:00.053
> 
> 标签：c#, graphics, exception-handling

我是 CompSci 的学生，在 C# 方面相当新，我正在为一个班级做一个“约瑟夫问题”程序，我创建了一个退出按钮，它调用 Application.Exit() 随时退出，但如果 C# 仍然处理绘画并按下按钮，它会为 Graphics 对象引发 ObjectDisposedException。有什么办法可以防止这种情况吗？我在考虑 try{}catch 或更改一个布尔值来告诉绘画过程在退出之前停止，但我想知道是否有其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T07:17:36.303

您应该调用包含按钮的表单的 Close() 方法，以便有序地关闭表单。关闭主窗体将导致应用程序为您退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T14:44:55.853

这应该是不可能发生的。如果按钮是在与窗口相同的线程上创建的，它们共享一个消息泵，并且 Paint 处理程序不能被中断来处理退出按钮。单击按钮的消息将在线程的消息队列中排队，直到 Paint 处理程序返回。

通常，您应该将绘画推迟到 Paint 处理程序（或覆盖 OnPaint），并且在您需要更新屏幕的任何其他地方，调用控件的 Invalidate 方法。这告诉 Windows 一个区域需要重新绘制，并且一旦处理了所有其他消息，它将生成一条`WM_PAINT`消息，该消息最终将调用 OnPaint，而 OnPaint 又将触发 Paint 事件。

如果是动画，请使用 a`System.Windows.Forms.Timer`来触发每一帧，而不是使用线程。`System.Threading.Timer`回调在线程池上执行，因此它们总是在错误的线程上操作 UI。

# vb.net - 程序如何要求管理员权限？

> ID：90674
> 
> 赞同：7
> 
> 时间：2008-09-18T07:17:23.027
> 
> 标签：vb.net, privileges

我正在使用 vb.net 开发一个应用程序。为了执行某些任务，应用程序需要机器中的管理员权限。程序执行过程中如何请求权限？

切换用户帐户以执行应用程序的一般方法是什么？换句话说，是否有某种方法可以让应用程序在任意用户帐户下运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-13T20:36:35.527

您可以编辑位于项目设置中的**UAC 设置（在 VB 2008 中）。**寻找写着的那一行

`<requestedExecutionLevel level="asInvoker" uiAccess="false" />`

将 level="asInvoker" 更改为

1.  `level="asInvoker"`（与父进程相同的访问令牌）
2.  `level="requireAdministrator`（需要完整的管理员）
3.  `level="highestAvailable"`（当前用户可用的最高权限）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-18T07:41:14.997

Internet 上有几篇关于在 Vista 中开发提升进程的文章，但本质上提升请求涉及在应用程序清单文件中装饰 .NET 程序集和具有提升状态的 WIN32 可执行文件（可能是嵌入的或并排的）。

有一篇关于您的问题的优秀博客文章提供了您可能需要的代码：

[用于 COM 提升的 .NET 包装器](http://blog.robgarrett.com/2007/02/12/net-wrapper-for-com-elevation/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-09T16:01:05.653

我还没有这样做，但我相信你会转到（在 VS 2008 中）项目设置 -> 应用程序选项卡，然后单击“查看 UAC 设置”按钮。这将打开您的 app.manifest 文件。有一个标签，我认为它包含您正在寻找的选项。我的一些选项被注释掉了，这应该让你开始：

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-03T19:22:15.337

在 VS 2015 中：转到：项目 ->（项目名称）属性... -> 应用程序 -> 查看 Windows 设置并在 app.manifest 中找到（第 19 行）：并将 asInvoker 更改为：

1.  “asInvoker”（与父进程相同的访问令牌）
2.  "requireAdministrator（需要全权管理员）
3.  “highestAvailable”（当前用户可用的最高权限）

# interop - ADODB 互操作问题

> ID：90681
> 
> 赞同：0
> 
> 时间：2008-09-18T07:18:51.870
> 
> 标签：interop, primary-interop-assembly

我们在 vb 6.0 中有项目 PrjDb.dll，它引用了 ado 2.5。该项目是在机器 A 上构建的。现在，当我们在另一台机器 B 上为 PrjDb.dll 生成互操作时，我们最终会得到一个新的 ADODB.dll，版本字段中的版本为 2.5，而不是将其与主互操作程序集 adodb.dll 链接（在“Program Files\Microsoft.NET\Primary Interop Assemblies”下找到）。问题是当我部署我的应用程序时，它现在要求这个新生成的 adodb.dll。而且我不想发货。

即使我在命令行中提供了 adodb.dll 路径，它仍然会为 AdoDB 生成新的互操作。我尝试使用开关 /strict 然后它说它无法使用我希望它使用的 AdoDB.dll 解析引用。

如果我们在构建 PrjDb.dll 的同一台机器上生成互操作，则不会发生这种情况。而不是在机器 B 以外的任何机器上，它会自动为 AdoDB 选择 PIA。

当我们为 PrjDb.dll 生成互操作时，知道机器 B 上发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T12:46:38.770

既然您已经在 .Net 上，您是否可以不使用 ADO.Net？这是我发现的各种 ADODB 互操作错误的一种解决方案。请随时澄清，以便我们可以帮助您获得“真正的答案”。

（[http://bytes.com/forum/thread470736.html](http://bytes.com/forum/thread470736.html)）（来自谷歌搜索：adodb interop.net）

# java - 如何创建 Java Web Start 应用程序的线程转储

> ID：90682
> 
> 赞同：5
> 
> 时间：2008-09-18T07:18:54.177
> 
> 标签：java, multithreading, debugging, java-web-start, thread-dump

是否可以获得 Java Web Start 应用程序的线程转储？如果是这样，怎么办？

如果有一个简单的解决方案会很好，这将使非开发人员（客户）能够创建线程转储。或者，是否可以以编程方式创建线程转储？

在 Java Web Start 控制台中，我可以通过按“t”来获取线程列表，但不包括堆栈跟踪。

如果答案需要某些 java 版本，请这样说。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-18T09:09:10.713

在控制台中，按 V 而不是 T：

```
t:   dump thread list
v:   dump thread stack 
```

这适用于JDK6。不知道别人。

或者，在 JDK5（可能更早）下，您可以将所有线程的完整堆栈跟踪发送到标准输出：

*在 Windows 下：*在 Java 控制台中键入 ctrl-break。

*在 Unix 下：（* `kill -3 <java_process_id>` 例如 kill -3 5555）。这不会杀死您的应用程序。

另一件事：正如其他人所说，您可以通过`Thread`类以编程方式获取堆栈，但`Thread.getAllStackTraces()`在 JDK6 之前要小心，因为存在内存泄漏。

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6434648](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6434648)

问候，

斯科蒂

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T07:28:01.317

尝试

```
StackTraceElement[] stack = Thread.currentThread().getStackTrace(); 
```

然后您可以遍历集合以显示您感兴趣的顶部 x 堆栈元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T07:37:02.650

最近的 JDK（遗憾的是不是 JRE）包括像 jstack 这样的工具来做这些事情。版本 5 的 JVM 包括 JMX 扩展，用于获取线程转储、内存统计信息等。所有 java 应用程序，包括 web start 应用程序，都具有此功能。

您要么需要安装 JDK，要么需要编写一个执行相同操作的 JMX 客户端。查看[http://java.sun.com/javase/6/docs/technotes/guides/management/](http://java.sun.com/javase/6/docs/technotes/guides/management/)以获取更多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-18T07:51:00.403

从 1.5 开始，您可以使用`Thread.getAllStackTraces()`a`Map`进行迭代。

理想的输出是由 Ctrl-\ （或 Ctrl-Break 或类似的）产生的，但似乎没有记录的方式来产生这个。如果您愿意将自己限制在 sun 的 JVM 上（或者我想使用反射），您可以挖掘一下这些`sun.*`包，看看是否有任何有趣的东西出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-18T07:50:27.393

从 Java 5 开始，您拥有 Thread 类的 getStackTrace() 方法。对于以前的版本，您可以执行以下操作：

```
Thread.currentThread().dumpStack(); 
```

这会将堆栈跟踪打印到 System.out

# visual-c++ - CTreeCtrl 对象上的 TVN_SELCHANGED 问题

> ID：90693
> 
> 赞同：1
> 
> 时间：2008-09-18T07:20:54.563
> 
> 标签：visual-c++, mfc, treeview

我有使用 CTreeCtrl MFC 类创建的树控件对象。树控件需要支持重命名。当我左键单击 Tree 中的任何项目时，将调用 TVN_SELCHANGED 事件，我可以从中获取树的选定项目，如下所示： HTREEITEM h = m_moveListTree.GetSelectedItem(); CString s = m_moveListTree.GetItemText(h);

但是，当我右键单击树中的任何项目时，我没有收到任何 TVN_SELCHANGED 事件，因此我选择的项目仍然与左键单击事件相同。这导致了以下问题：1）用户左键单击项目 A 2）用户右键单击项目 B 并说重命名 3）由于所选项目仍然是 A，因此重命名正在申请项目 A。

请帮助解决问题。

-普拉文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T07:49:12.200

此行为是设计使然——右键单击不会移动选择。

For what you want, turn on the TVS_EDITLABELS style on the tree view. Then you handle the TVN_BEGINLABELEDIT and TVN_ENDLABELEDIT notifications.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T07:46:33.440

我在 Win32 API 之上创建了自己的 MFC，例如本地开发的 C++ GUI 库，并查看我的代码，这是它处理这种情况的方式：

```
LRESULT xTreeCtrl::onRightClick(NMHDR *)
{
  xPoint pt;

  //-- get the cursor at the time the mesage was posted
  DWORD dwPos = ::GetMessagePos();

  pt.x = GET_X_LPARAM(dwPos);
  pt.y = GET_Y_LPARAM (dwPos);

  //-- now convert to window co-ordinates
  pt.toWindow(this);

  //-- check for a hit
  HTREEITEM hItem = this->hitTest(pt);

  //-- select any item that was hit
  if ((int)hItem != -1) this->select(hItem);

  //-- leave the rest to default processing
  return 0;
} 
```

我怀疑您是否在 MFC 右键单击​​或右键按下事件中执行类似的操作来解决问题。

注意：上面的 onRightClick 代码只不过是**WM_NOTIFY**、**NM_RCLICK**消息的处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T07:47:25.090

不确定如何弹出上下文菜单，但可以使用 HitTest() 从一个点获取一个树项。因此，您可以在右键单击处理程序中使用它。

不要忘记上下文菜单也可以通过合理的现代键盘上的键来激活。然后您可能希望将所选项目用作目标。

# c# - 如何在 .NET 中创建和使用资源

> ID：90697
> 
> 赞同：211
> 
> 时间：2008-09-18T07:21:24.407
> 
> 标签：c#, visual-studio, resources, icons

如何创建可以在程序的各个部分轻松引用和使用的资源？

我的具体问题是我有一个 NotifyIcon 我想根据程序的状态更改图标。一个常见的问题，但我一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：353
> 
> 时间：2008-09-18T07:21:43.547

好吧，在对 StackOverflow 周围的各个点进行搜索和拼凑之后（天哪，我已经喜欢这个地方了），大多数问题已经过了这个阶段。不过，我确实设法解决了我的问题。

**如何创建资源：**

就我而言，我想创建一个图标。这是一个类似的过程，不管你想添加什么类型的数据作为资源。

*   右键单击要添加资源的项目。在解决方案资源管理器中执行此操作。从列表中选择“属性”选项。
*   单击“资源”选项卡。
*   栏顶部的第一个按钮可让您选择要添加的资源类型。它应该从字符串开始。我们要添加一个图标，因此单击它并从选项列表中选择“图标”。
*   接下来，移动到第二个按钮“添加资源”。您可以添加一个新资源，或者如果您已经制作了一个图标，您也可以添加它。按照提示选择您选择的任何选项。
*   此时，您可以双击新添加的资源进行编辑。请注意，资源也显示在解决方案资源管理器中，双击那里同样有效。

**如何使用资源：**

太好了，所以我们有了新资源，我们渴望拥有那些可爱的不断变化的图标……我们如何做到这一点？好吧，幸运的是，C# 让这变得非常容易。

有一个名为的静态类`Properties.Resources`可让您访问所有资源，因此我的代码最终变得如此简单：

```
paused = !paused;
if (paused)
    notifyIcon.Icon = Properties.Resources.RedIcon;
else
    notifyIcon.Icon = Properties.Resources.GreenIcon; 
```

完毕！完成的！当您知道如何操作时，一切都很简单，不是吗？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2011-06-14T19:38:25.537

正如我对 Visual Studio 2010 所期望的那样，上述内容实际上并不适合我。它不允许我访问 Properties.Resources，说由于权限问题而无法访问。我最终不得不更改资源属性中的 Persistence 设置，然后我找到了如何通过 Resources.Designer.cs 文件访问它，它有一个自动获取器，让我可以通过 MyNamespace.Properties.Resources 访问图标.NameFromAddingTheResource。这将返回一个 Icon 类型的对象，可以直接使用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-18T07:35:48.350

上述方法效果很好。

另一种方法（我在这里假设 web）是创建您的页面。向页面添加控件。然后在设计模式下转到：**Tools > Generate Local Resource**。资源文件将自动出现在解决方案中，页面中的所有控件都映射到资源文件中。

要为其他语言创建资源，请将 4 个字符的语言附加到文件名的末尾、扩展名之前（*Account.aspx.en-US.resx、Account.aspx.es-ES.resx* ...等）。

要检索代码隐藏中的特定条目，只需调用此方法：`GetLocalResourceObject([resource entry key/name])`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-13T12:58:49.120

Matthew Scharley 发布的代码存在内存泄漏：

```
paused = !paused;
if (paused)
    notifyIcon.Icon = Properties.Resources.RedIcon;
else
    notifyIcon.Icon = Properties.Resources.GreenIcon; 
```

您应该`Dispose()`在替换它之前 notifyIcon.Icon，因为每次使用它都会`Properties.Resources.SOME_ICON`创建一个新的。`Icon`这可以在日志中观察到，使用以下代码：

```
Console.WriteLine(Properties.Resources.RedIcon.GetHashCode());
Console.WriteLine(Properties.Resources.RedIcon.GetHashCode());
Console.WriteLine(Properties.Resources.RedIcon.GetHashCode()); 
```

您将在日志中看到 3 个不同的哈希码。这意味着这些是不同的对象。

因此，简单的修复将是：

```
paused = !paused;
notifyIcon.Icon?.Dispose();
notifyIcon.Icon = paused 
                    ? Properties.Resources.RedIcon;
                    : Properties.Resources.GreenIcon; 
```

# windows - How does a program ask for administrator privileges?

> ID：90702
> 
> 赞同：3
> 
> 时间：2008-09-18T07:23:40.110
> 
> 标签：windows, vb.net, privileges

I am working on a small application in VB.NET. The program needs administrator privilege for doing some tasks. Is there a way to ask for administrator privileges during the execution if the program?

What is the general way of changing the user account under which the application is running?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-18T07:25:45.143

You can specify this in your application's manifest file.

Check out [this link](http://petesbloggerama.blogspot.com/2007/04/making-your-assembly-run-as.html) and [this link](http://www.enusbaum.com/blog/2007/08/26/how-to-run-your-c-application-as-administrator-in-windows-vista/) and [this link](http://community.bartdesmet.net/blogs/bart/archive/2006/10/28/Windows-Vista-_2D00_-Demand-UAC-elevation-for-an-application-by-adding-a-manifest-using-mt.exe.aspx) too.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-18T07:29:52.310

There are a number of methods depending on your needs. Some details are given in [the application developer requirements for UAC](http://msdn.microsoft.com/en-us/library/aa905330.aspx).

1.  Include a UAC manifest that causes your program to require administrator privileges at startup.
2.  Use one of the suggested methods for invoking an elevation to run out of process. One of the nicest is to use [the COM elevation moniker](http://msdn.microsoft.com/en-us/library/ms679687(VS.85).aspx) and `CoCreateInstanceAsAdmin` to call methods on a COM object running as an administrator. This is possibly tricky to get working in VB.Net. I got it working ok in C++ though
3.  Another ok method is to isolate the parts of your code that need admin privileges into an application that uses a UAC manifest to require admin privileges. Your main app does not need to run as an admin in that case. When you require admin privilegese, you would invoke the external application.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-26T10:50:39.157

```
 Try
                    Dim procInfo As New ProcessStartInfo()
                    procInfo.UseShellExecute = True
                    procInfo.FileName = 'Filename here
                    procInfo.WorkingDirectory = ""
                    procInfo.Verb = "runas"
                    Process.Start(procInfo)
                Catch ex As Exception
                    MsgBox(ex.Message.ToString(), vbCritical)
                End Try
            End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-05-21T00:01:09.267

The most easy way to do this is to click on the Project tab -> Add Windows Form -> .XML file -> name it (program name).manifest -> paste this code in this [link](http://community.bartdesmet.net/blogs/bart/archive/2006/10/28/Windows-Vista-_2D00_-Demand-UAC-elevation-for-an-application-by-adding-a-manifest-using-mt.exe.aspx%22link%22) into it ( thanks JDOConal ) -> then right click on your project name in the solution explorer box off to the right and hit properties -> on the first tab select manifest and then the .manifest file you created -> build = done!

# linux - 键盘扫描码？

> ID：90704
> 
> 赞同：3
> 
> 时间：2008-09-18T07:24:44.430
> 
> 标签：linux, text, console

GNU/Linux 文本控制台，不涉及 X11，甚至没有安装。键盘是美国布局，键盘映射美国默认。内核版本 2.20.x 或更高版本。

用 C 语言编写的应用程序在翻译模式下获取键盘输入，即`XLATE`或`UNICODE`. 当一个键被按下时，应用程序接收到相应的键串。例如，您按 F1，应用程序读取`"\033[[A"`.

在内核向应用程序发送密钥字符串之前，它必须知道哪个键被按下，即它必须知道它的扫描码。在上面的 F1 示例中，按下的键的扫描码是 59 或 0x3b。

也就是说，即使键盘处于翻译模式，扫描码也会保存在内存中的某个位置。应用程序如何在不切换键盘 `RAW`或`MEDIUMRAW`模式的情况下访问它们？一个代码片段会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T15:44:56.860

可能是您在错误的文件描述符上发出 ioctl 命令，检查从 ioctl 和 tcsetattr 返回的错误代码。

您应该打开控制台设备，然后在该设备上发出键盘翻译命令。您必须基本上模仿 X 服务器在做什么。

这是[codesearch.google.com](http://tinyurl.com/5yd92j)上源代码的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T07:46:51.240

当然，您要查看的代码位于 kbd-1.12.tar.bz2 中，它是“kbd”包的源包。'kbd' 包提供了诸如 'dumpkeys'、'showkeys' 和 'loadkeys' 之类的工具，它们对于查看当前键盘映射、检查哪些键发出哪些扫描码以及加载新映射很有用。

您将不得不通过 ioctls 与内核进行通信，这非常复杂，因此我建议您阅读该软件包的源代码以了解它是如何完成的。

这是 tarball 的链接：[kbd-1.12.tar.bz2 (618K)](ftp://ftp.kernel.org/pub/linux/utils/kbd/kbd-1.12.tar.bz2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T12:50:23.180

您可能想查看`kbdev`或`evdev`（查看`Documentation/input/input.txt`内核源代码目录中的文件以获取初学者。）这将适用于控制台访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T08:02:34.977

在我进入的终端

```
dumpkeys -f > test.txt 
```

并且有大量详细信息，包括：

> 键码 29 = 控制
> ...
> 字符串 F1 = "\033[[A"
> 字符串 F2 = "\033[[B"
> 字符串 F3 = "\033[[C"
> 字符串 F4 = "\033[[D"
> 字符串 F5 = "\033[[E"
> 字符串 F6 = "\033[17~"
> 字符串 F7 = "\033[18~"
> 字符串 F8 = "\033[19~"
> ...
> 字符串先验 = "\033[5~"
> string Next = "\033[6~"
> string Macro = "\033[M"
> string Pause = "\033[P"

我的发行版中默认包含了 dumpkeys。但是您应该能够在jerub发布的内容中找到它。我会先看`kbd-1.12/src/loadkeys.y`。

看起来内核负责保存这些数据，并且可以向知道如何询问的人报告。

# forms - 在 Gwt-Ext 中重新渲染组合存储

> ID：90713
> 
> 赞同：4
> 
> 时间：2008-09-18T07:28:45.213
> 
> 标签：forms, combobox, gwt-ext

我创建了一个表单面板，我在面板中渲染了几个组合框，其中包含一个通过响应处理程序填充的商店。如果我想再次渲染面板，它会在没有商店的情况下渲染组合框，尽管我正在重新构建面板。我试图调试以找出原因，但令人惊讶的是，尽管对于组合框，调用时 Store 为 null - comboBox.setStore(store) 它检查属性（isRendered）并发现它为真，因此不添加商店但只需保留仍然为空的现有商店。

我在另一个场景中看到了这个问题，在那里我创建了一个包含 Combobox 的可折叠字段集，在最小化和最大化该字段集时，商店会因为同样的原因而消失。

有人可以在这里帮助我吗，我在这里完全震惊了我尝试了各种选择，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-20T18:22:58.970

感谢您的评论，实际上我尝试了插件方法，但无法完全理解我将如何获得商店的句柄，它不是组件的暴露元素。

无论如何，我尝试了其他方法，在调试时我发现虽然我在单击显示按钮时再次创建组件，但传递的 ID 是相同的（这是所需的）但不知何故，对于给定的 id，已经有以前的参考可用扩展组件。

因此，一个简单的解决方案如下： Component comp = Ext.getCmp(id); if ( comp != null ) comp.destroy( );

这实际上作为导致 ComboBox 的 ( isRendered( ) 属性返回 true 的参考不再可用，因此我可以再次正确地看到存储。

我希望这可以帮助其他面临类似问题的人。无论如何感谢您的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T16:19:57.200

你需要写：

`field = new ComboBox({plugins: view_plugin});`

在您的情况下，并在之前的某个地方定义我的 view_pligin 代码。或者你甚至可以将它内联：

`field = new ComboBox({plugins: { code of plugin });`

在插件内部，所有私有属性和方法都是可访问/可更改的。

您也可以`field.setNewStore(store)`在以后随时更改商店使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T10:02:04.083

你试过`doLayout()`的方法`FormPanel`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T10:52:57.033

ComboBox.view.setStore() 应该会有所帮助。

如果 view 是一个私有变量，只需在创建时尝试在 Combobox 配置参数之间提及它。如果它没有帮助 - 你可以使用这样的插件：

```
view_plugin = {

     init: function(o) {

          o.setNewStore = function(newStore) {
              this.view.setStore(newStore);
          };
     }
}; 
```

并添加一行

```
plugins: view_plugin, 
```

到组合框配置。

然后您可以稍后在代码中调用 combobox.setNewStore(newStore) 。

# c# - 调试/发布模式中的浮点/双精度

> ID：90751
> 
> 赞同：13
> 
> 时间：2008-09-18T07:41:14.577
> 
> 标签：c#, .net, floating-point

C#/.NET 浮点运算在调试模式和发布模式之间的精度是否不同？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-09-18T08:01:46.570

它们确实可以不同。根据 CLR ECMA 规范：

> 浮点数（静态、数组元素和类的字段）的存储位置是固定大小的。支持的存储大小为 float32 和 float64。在其他任何地方（在评估堆栈上，作为参数、作为返回类型和作为局部变量）浮点数都使用内部浮点类型表示。在每个这样的例子中，变量或表达式的名义类型是 R4 或 R8，但它的值可以在内部用额外的范围和/或精度表示。内部浮点表示的大小取决于实现，可以变化，并且应具有至少与所表示的变量或表达式一样大的精度。从存储加载这些类型时，执行从 float32 或 float64 到内部表示的隐式扩展转换。内部表示通常是硬件的本机大小，或者是有效执行操作所需的大小。

这基本上意味着以下比较可能相等也可能不相等：

```
class Foo
{
  double _v = ...;

  void Bar()
  {
    double v = _v;

    if( v == _v )
    {
      // Code may or may not execute here.
      // _v is 64-bit.
      // v could be either 64-bit (debug) or 80-bit (release) or something else (future?).
    }
  }
} 
```

带回家的信息：永远不要检查浮动值是否相等。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-18T08:51:15.767

这是一个有趣的问题，所以我做了一些实验。我使用了这段代码：

```
static void Main (string [] args)
{
  float
    a = float.MaxValue / 3.0f,
    b = a * a;

  if (a * a < b)
  {
    Console.WriteLine ("Less");
  }
  else
  {
    Console.WriteLine ("GreaterEqual");
  }
} 
```

使用 DevStudio 2005 和 .Net 2。我编译为调试和发布，并检查了编译器的输出：

```
Release                                                    Debug

    static void Main (string [] args)                        static void Main (string [] args)
    {                                                        {
                                                        00000000  push        ebp  
                                                        00000001  mov         ebp,esp 
                                                        00000003  push        edi  
                                                        00000004  push        esi  
                                                        00000005  push        ebx  
                                                        00000006  sub         esp,3Ch 
                                                        00000009  xor         eax,eax 
                                                        0000000b  mov         dword ptr [ebp-10h],eax 
                                                        0000000e  xor         eax,eax 
                                                        00000010  mov         dword ptr [ebp-1Ch],eax 
                                                        00000013  mov         dword ptr [ebp-3Ch],ecx 
                                                        00000016  cmp         dword ptr ds:[00A2853Ch],0 
                                                        0000001d  je          00000024 
                                                        0000001f  call        793B716F 
                                                        00000024  fldz             
                                                        00000026  fstp        dword ptr [ebp-40h] 
                                                        00000029  fldz             
                                                        0000002b  fstp        dword ptr [ebp-44h] 
                                                        0000002e  xor         esi,esi 
                                                        00000030  nop              
      float                                                      float
        a = float.MaxValue / 3.0f,                                a = float.MaxValue / 3.0f,
00000000  sub         esp,0Ch                            00000031  mov         dword ptr [ebp-40h],7EAAAAAAh
00000003  mov         dword ptr [esp],ecx                
00000006  cmp         dword ptr ds:[00A2853Ch],0        
0000000d  je          00000014                            
0000000f  call        793B716F                            
00000014  fldz                                            
00000016  fstp        dword ptr [esp+4]                    
0000001a  fldz                                            
0000001c  fstp        dword ptr [esp+8]                    
00000020  mov         dword ptr [esp+4],7EAAAAAAh        
        b = a * a;                                                b = a * a;
00000028  fld         dword ptr [esp+4]                    00000038  fld         dword ptr [ebp-40h] 
0000002c  fmul        st,st(0)                            0000003b  fmul        st,st(0) 
0000002e  fstp        dword ptr [esp+8]                    0000003d  fstp        dword ptr [ebp-44h] 

      if (a * a < b)                                          if (a * a < b)
00000032  fld         dword ptr [esp+4]                    00000040  fld         dword ptr [ebp-40h] 
00000036  fmul        st,st(0)                            00000043  fmul        st,st(0) 
00000038  fld         dword ptr [esp+8]                    00000045  fld         dword ptr [ebp-44h] 
0000003c  fcomip      st,st(1)                            00000048  fcomip      st,st(1) 
0000003e  fstp        st(0)                                0000004a  fstp        st(0) 
00000040  jp          00000054                            0000004c  jp          00000052 
00000042  jbe         00000054                            0000004e  ja          00000056 
                                                        00000050  jmp         00000052 
                                                        00000052  xor         eax,eax 
                                                        00000054  jmp         0000005B 
                                                        00000056  mov         eax,1 
                                                        0000005b  test        eax,eax 
                                                        0000005d  sete        al   
                                                        00000060  movzx       eax,al 
                                                        00000063  mov         esi,eax 
                                                        00000065  test        esi,esi 
                                                        00000067  jne         0000007A 
      {                                                          {
        Console.WriteLine ("Less");                        00000069  nop              
00000044  mov         ecx,dword ptr ds:[0239307Ch]                Console.WriteLine ("Less");
0000004a  call        78678B7C                            0000006a  mov         ecx,dword ptr ds:[0239307Ch] 
0000004f  nop                                            00000070  call        78678B7C 
00000050  add         esp,0Ch                            00000075  nop              
00000053  ret                                                  }
      }                                                    00000076  nop              
      else                                                00000077  nop              
      {                                                    00000078  jmp         00000088 
        Console.WriteLine ("GreaterEqual");                      else
00000054  mov         ecx,dword ptr ds:[02393080h]              {
0000005a  call        78678B7C                            0000007a  nop              
      }                                                            Console.WriteLine ("GreaterEqual");
    }                                                    0000007b  mov         ecx,dword ptr ds:[02393080h] 
                                                        00000081  call        78678B7C 
                                                        00000086  nop              
                                                              } 
```

上面显示的是，调试和发布的浮点代码是相同的，编译器选择一致性而不是优化。尽管程序产生了错误的结果（a * a 不小于 b），但无论调试/发布模式如何，它都是相同的。

现在，Intel IA32 FPU 有 8 个浮点寄存器，你会认为编译器在优化时会使用寄存器来存储值而不是写入内存，从而提高性能，大致如下：

```
fld         dword ptr [a] ; precomputed value stored in ram == float.MaxValue / 3.0f
fmul        st,st(0) ; b = a * a
; no store to ram, keep b in FPU
fld         dword ptr [a]
fmul        st,st(0)
fcomi       st,st(0) ; a*a compared to b 
```

但这与调试版本的执行方式不同（在这种情况下，显示正确的结果）。然而，根据构建选项改变程序的行为是一件非常糟糕的事情。

FPU 代码是手工编写代码可以显着优于编译器的一个领域，但您确实需要了解 FPU 的工作方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T07:48:41.127

事实上，如果调试模式使用 x87 FPU 而发布模式使用 SSE 进行浮动操作，它们可能会有所不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-27T17:14:54.787

这是一个简单的示例，其中结果不仅在调试模式和发布模式之间有所不同，而且它们这样做的方式取决于使用 x86 还是 x84 作为平台：

```
Single f1 = 0.00000000002f;
Single f2 = 1 / f1;
Double d = f2;
Console.WriteLine(d); 
```

这将写入以下结果：

```
 Debug       Release
x86   49999998976   50000000199,7901
x64   49999998976   49999998976 
```

快速查看反汇编（Debug -> Windows -> Visual Studio 中的反汇编）给出了一些关于这里发生了什么的提示。对于 x86 情况：

```
Debug                                       Release
mov         dword ptr [ebp-40h],2DAFEBFFh | mov         dword ptr [ebp-4],2DAFEBFFh  
fld         dword ptr [ebp-40h]           | fld         dword ptr [ebp-4]   
fld1                                      | fld1
fdivrp      st(1),st                      | fdivrp      st(1),st
fstp        dword ptr [ebp-44h]           |
fld         dword ptr [ebp-44h]           |
fstp        qword ptr [ebp-4Ch]           |
fld         qword ptr [ebp-4Ch]           |
sub         esp,8                         | sub         esp,8 
fstp        qword ptr [esp]               | fstp        qword ptr [esp]
call        6B9783BC                      | call        6B9783BC 
```

特别是，我们看到一堆看似多余的“将浮点寄存器中的值存储在内存中，然后立即将其从内存中加载回浮点寄存器”在发布模式下已被优化掉。但是，这两条指令

```
fstp        dword ptr [ebp-44h]  
fld         dword ptr [ebp-44h] 
```

足以将 x87 寄存器中的值从 +5.0000000199790138e+0010 更改为 +4.9999998976000000e+0010，因为可以通过逐步反汇编并调查相关寄存器的值来验证（调试 -> Windows -> 寄存器，然后对单击并选中“浮点”）。

x64 的故事完全不同。我们仍然看到相同的优化删除了一些指令，但这一次，一切都依赖于 SSE 及其 128 位寄存器和专用指令集：

```
Debug                                        Release
vmovss      xmm0,dword ptr [7FF7D0E104F8h] | vmovss      xmm0,dword ptr [7FF7D0E304C8h]  
vmovss      dword ptr [rbp+34h],xmm0       | vmovss      dword ptr [rbp-4],xmm0 
vmovss      xmm0,dword ptr [7FF7D0E104FCh] | vmovss      xmm0,dword ptr [7FF7D0E304CCh]
vdivss      xmm0,xmm0,dword ptr [rbp+34h]  | vdivss      xmm0,xmm0,dword ptr [rbp-4]
vmovss      dword ptr [rbp+30h],xmm0       |
vcvtss2sd   xmm0,xmm0,dword ptr [rbp+30h]  | vcvtss2sd   xmm0,xmm0,xmm0 
vmovsd      qword ptr [rbp+28h],xmm0       |
vmovsd      xmm0,qword ptr [rbp+28h]       |
call        00007FF81C9343F0               | call        00007FF81C9343F0 
```

在这里，因为 SSE 单元避免在内部使用比单精度更高的精度（而 x87 单元这样做），所以无论优化如何，我们最终都会得到 x86 情况的“单精度”结果。实际上，人们发现（在 Visual Studio 寄存器概述中启用 SSE 寄存器之后），在 之后`vdivss`，XMM0 包含 0000000000000000-00000000513A43B7，这正是之前的 49999998976。

在实践中，这两种差异都让我感到痛苦。除了说明永远不应该比较浮点的相等性之外，该示例还表明，在浮点出现的那一刻，在 C# 等高级语言中仍有汇编调试的空间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T07:58:37.450

回应 Frank Krueger 的上述要求（在评论中）以展示差异：

在没有优化和 -mfpmath=387 的 gcc 中编译这段代码（我没有理由认为它在其他编译器上不起作用，但我没有尝试过。）然后在没有优化和 -msse -mfpmath= 的情况下编译它西证。

输出会有所不同。

```
#include <stdio.h>

int main()
{
    float e = 0.000000001;
    float f[3] = {33810340466158.90625,276553805316035.1875,10413022032824338432.0};
    f[0] = pow(f[0],2-e); f[1] = pow(f[1],2+e); f[2] = pow(f[2],-2-e);
    printf("%s\n",f);
    return 0;
} 
```

# windows - 如何获取 LAN 上的活动 IP 地址、MAC 地址和 NetBIOS 名称的列表？

> ID：90755
> 
> 赞同：4
> 
> 时间：2008-09-18T07:42:38.100
> 
> 标签：windows, networking, powershell, sysadmin, wsh

如何获取 LAN 上的活动 IP 地址、MAC 地址和[NetBIOS](http://en.wikipedia.org/wiki/NetBIOS)名称的列表？

我想为 LAN 上的每台主机获取 NetBIOS 名称、IP 和[MAC 地址](http://en.wikipedia.org/wiki/MAC_address)，最好不必走到每台 PC 并自己记下这些东西。

如何使用[Windows Script Host](http://en.wikipedia.org/wiki/Windows_Script_Host) /PowerShell/whatever 做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-18T08:07:38.210

正如达伦托马斯所说，使用 nmap。

```
 nmap -sP 192.168.1.1/24 
```

扫描网络 192.168.1.*

```
 nmap -O 192.168.1.1/24 
```

获取用户的操作系统。有关更多信息，请阅读手册页

```
 man nmap 
```

问候

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-18T08:14:28.567

```
arp -a 
```

这得到了当前机器在网络上所知道的一切。

（我把它放在那里作为第二种选择，因为 nmap 不是普遍安装的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T07:53:32.987

如果您使用的是 DHCP，那么服务器将为您提供所有这些信息的列表。

这个网站有一个很好的使用powershell获取网络信息的教程[http://www.powershellpro.com/powershell-tutorial-introduction/powershell-scripting-with-wmi/](http://www.powershellpro.com/powershell-tutorial-introduction/powershell-scripting-with-wmi/)

如果您需要快速获取计算机名称列表，您可以使用“网络视图”。也看看 nbmac 虽然我不确定它在 XP 下的工作状态。另一种选择可能是使用 nbtstat -a （一旦您使用网络视图列出工作​​站）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T16:59:12.830

在 PowerShell 中，您可以执行以下操作：

$computers = "server1","server2","server3"

Get-WmiObject Win32_NetworkAdapterConfiguration -computer $computers -filter "IPEnabled ='true'" | 选择__服务器，IP地址，MAC地址

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-02-27T19:59:06.163

在 PowerShell 中：

```
function Explore-Net($subnet, [int[]]$range){
    $range | % { test-connection "$subnet.$_" -count 1 -erroraction silentlycontinue} | select -Property address | % {[net.dns]::gethostbyaddress($_.address)}
} 
```

例子：

```
Explore-Net 192.168.2 @(3..10) 
```

# php - 在 PHP 或 Unix 命令行中确定图像分辨率和文件类型的最快方法？

> ID：90758
> 
> 赞同：5
> 
> 时间：2008-09-18T07:43:10.313
> 
> 标签：php, image, png, imagemagick, jpeg

我目前正在使用 ImageMagick 来确定上传到网站的图像的大小。通过在命令行上调用 ImageMagick 的“识别”，大约需要 0.42 秒来确定 1MB JPEG 的尺寸以及它是 JPEG 的事实。我觉得这有点慢。

使用 Imagick PHP 库甚至更慢，因为它尝试在对图像进行任何处理之前将整个 1MB 加载到内存中（在这种情况下，只需确定其大小和类型）。

是否有任何解决方案可以加快确定任意图像文件具有哪种文件类型和哪些尺寸的过程？我可以忍受它只支持JPEG和PNG。对我来说重要的是文件类型是通过查看文件的标题而不是简单的扩展名来确定的。

**编辑：解决方案可以是由 PHP 调用的命令行工具 UNIX，就像我现在使用 ImageMagick 的方式一样**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-18T07:45:08.297

如果您使用支持 GD 的 PHP，您可以尝试[getimagesize()](http://www.php.net/manual/en/function.getimagesize.php)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-18T08:00:25.373

你有没有尝试过

```
identify -ping filename.png 
```

?

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-18T08:53:01.237

抱歉，我无法将此作为评论添加到先前的答案，但我没有代表。做一些快速而肮脏的测试，我还发现 exec("identify -ping... 比没有 -ping 快 20 倍。但 getimagesize() 似乎仍然快 200 倍。

所以我会说 getimagesize() 是更快的方法。我只在 jpg 上测试过，而不是在 png 上测试过。

测试只是

```
$files = array('2819547919_db7466149b_o_d.jpg', 'GP1-green2.jpg', 'aegeri-lake-switzerland.JPG');
foreach($files as $file){
  $size2 = array();
  $size3 = array();
  $time1 = microtime();
  $size = getimagesize($file);
  $time1 = microtime() - $time1;
  print "$time1 \n";
  $time2 = microtime();
  exec("identify -ping $file", $size2);
  $time2 = microtime() - $time2;
  print $time2/$time1 . "\n";
  $time2 = microtime();
  exec("identify $file", $size3);
  $time2 = microtime() - $time2;
  print $time2/$time1 . "\n";
  print_r($size);
  print_r($size2);
  print_r($size3);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-18T07:48:43.670

> 对我来说重要的是文件类型是通过查看文件的标题而不是简单的扩展名来确定的。

为此，您可以使用 'file' unix 命令（或一些实现相同功能的 php 函数）。

`/tmp$ file stackoverflow-logo-250.png`
`stackoverflow-logo-250.png: PNG image data, 250 x 70, 8-bit colormap, non-interlaced`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-18T08:49:10.980

实际上，要使用 getimagesize()，您不需要**编译**GD。

您还可以使用 mime_content_type() 来获取 MIME 类型。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-17T18:57:24.027

exif_imagetype() 比 getimagesize() 快。

$filename = "一些文件";
$data = exif_imagetype($filename);
回声“<PRE>”；
打印_r（$数据）；
回声“</PRE>”；

输出：

```
大批 （
        [文件名] => 某个文件
        [文件日期时间] => 1234895396
        [文件大小] => 15427
        [文件类型] => 2
        [MimeType] => 图像/jpeg
        [找到的部分] =>
        [计算] => 数组
            (
                [html] => 宽度=“229”高度=“300”
                [身高] => 300
                [宽度] => 229
                [IsColor] => 1
        )
)

```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-27T11:26:45.297

如果您使用的是 PHP，我建议您使用 Imagick 库而不是调用`exec()`. 您正在寻找的功能是[Imagick::pingImage()](http://www.php.net/manual/en/imagick.pingimage.php)。

# sharepoint - 更改 ListItem 权限时的 SharePoint 事件？

> ID：90764
> 
> 赞同：3
> 
> 时间：2008-09-18T07:44:24.023
> 
> 标签：sharepoint

当列表元素（ListItem）的权限已更改时，我需要触发事件（或启动工作流）。“ItemUpdating”/“ItemUpdated”不会触发（我想，因为 ListItem 本身没有更新），那怎么办呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-18T09:25:37.010

恐怕这是不可能的。

也许您可以采取另一种方法：为用户构建另一种方式来更改项目的权限。当用户应用权限（使用您构建的 UI）时，您可以触发事件或启动工作流。

更进一步，您可以替换 ECB 中的默认“管理权限”选项，并将其替换为指向您的自定义权限管理 UI 的链接。更多信息：[http ://www.helloitsliam.com/archive/2007/08/10/moss2007-%E2%80%93-item-level-menus-investigation.aspx](http://www.helloitsliam.com/archive/2007/08/10/moss2007-%E2%80%93-item-level-menus-investigation.aspx)

# python - 如何使用 PyWin32 从 exe 文件加载嵌入式图标？

> ID：90775
> 
> 赞同：7
> 
> 时间：2008-09-18T07:46:43.750
> 
> 标签：python, icons, exe, pywin32

我有一个用 py2exe 生成的 exe 文件。在 setup.py 中，我指定了一个要嵌入到 exe 中的图标：

```
windows=[{'script': 'my_script.py','icon_resources': [(0, 'my_icon.ico')], ... 
```

我尝试使用以下方法加载图标：

```
hinst = win32api.GetModuleHandle(None)
hicon = win32gui.LoadImage(hinst, 0, win32con.IMAGE_ICON, 0, 0, win32con.LR_DEFAULTSIZE) 
```

但这会产生一个（非常不具体的）错误：
**pywintypes.error: (0, 'LoadImage', 'No error message is available')**

如果我尝试将 0 指定为字符串

```
hicon = win32gui.LoadImage(hinst, '0', win32con.IMAGE_ICON, 0, 0, win32con.LR_DEFAULTSIZE) 
```

然后我收到错误：
**pywintypes.error: (1813, 'LoadImage', 'The specified resource type cannot be found in the image file.')**

那么，加载图标的正确方法/语法是什么？
*另请注意，我不使用任何 GUI 工具包 - 仅通过 PyWin32 使用 Windows API。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-21T11:07:16.027

@efotinis：你是对的。

这是一个解决方法，直到 py2exe 得到修复并且您不想包含相同的图标两次：

```
hicon = win32gui.CreateIconFromResource(win32api.LoadResource(None, win32con.RT_ICON, 1), True) 
```

注意**1**不是你在 setup.py 中给图标的 ID（也就是图标组 ID），而是py2exe*自动*分配给每个图标组中每个图标的资源 ID。至少我是这么理解的。

如果要创建具有指定大小的图标（因为 CreateIconFromResource 使用系统默认图标大小），则需要使用 CreateIconFromResourceEx，这在 PyWin32 中不可用：

```
icon_res = win32api.LoadResource(None, win32con.RT_ICON, 1)
hicon = ctypes.windll.user32.CreateIconFromResourceEx(icon_res, len(icon_res), True,
    0x00030000, 16, 16, win32con.LR_DEFAULTCOLOR) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T11:10:35.027

如果您使用的是 wxPython，则可以使用以下简单代码：

```
wx.Icon(sys.argv[0], wx.BITMAP_TYPE_ICO) 
```

我通常有代码来检查它是否从 EXE 运行，并采取相应的行动：

```
def get_app_icon():
    if hasattr(sys, "frozen") and getattr(sys, "frozen") == "windows_exe":
        return wx.Icon(sys.argv[0], wx.BITMAP_TYPE_ICO)
    else:
        return wx.Icon("gfx/myapp.ico", wx.BITMAP_TYPE_ICO) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-18T13:52:27.663

好吧，好吧...我安装了py2exe，我认为这是一个错误。在 py2exe_util.c 中，它们应该初始化`rt_icon_id`为 1 而不是 0。现在的方式是使用 LoadIcon/LoadImage 加载第一个图标的第一种格式是不可能的。

如果这还不是已知问题，我会通知开发人员。

同时，一种解决方法是在 setup.py 中包含两次相同的图标：

```
'icon_resources': [(1, 'my_icon.ico'), (2, 'my_icon.ico')] 
```

您可以加载第二个，而 Windows 将使用第一个作为外壳图标。但请记住使用非零 ID。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T09:41:01.247

您应该将图标 ID 设置为 0 以外的值：

```
'icon_resources': [(42, 'my_icon.ico')] 
```

Windows 资源 ID 必须介于 1 和 32767 之间。

# c++ - 如何将 EXIF 标签放入 JPG 中，在 C++ 中使用原始 jpeg 缓冲区？

> ID：90798
> 
> 赞同：6
> 
> 时间：2008-09-18T07:51:09.310
> 
> 标签：c++, jpeg, exif

我有点问题。

我从相机得到一个 RAW char* 缓冲区，我需要添加这个标签才能将它保存到磁盘。将文件写入磁盘并再次读取它不是一种选择，因为这种情况会发生数千次。

我从相机收到的缓冲区数据不包含任何 EXIF 信息，除了宽度、高度和每英寸像素数。

有任何想法吗？(C++)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-18T08:25:27.950

查看此[PDF](http://www.exif.org/Exif2-1.PDF)，在第 20 页，您有一个图表，显示您要放置或修改您的 exif 信息。与磁盘上的文件有什么区别？

您相机的 JPEG 缓冲区是否已经包含 EXIF 部分？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T08:01:54.993

有什么不同？为什么对磁盘上的文件执行此操作与在内存中执行此操作有什么不同？

从磁盘读取文件后，只需执行您所做的任何事情..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-18T08:15:28.737

据我所知，JPEG 中的 EXIF 数据是文件的连续子​​部分。所以

1.  在内存中准备 EXIF 数据
2.  将部分JPEG文件写入EXIF
3.  编写准备好的EXIF
4.  写入JPEG文件的其余部分

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T09:01:31.153

您可能想看看[Exiv2](http://www.exiv2.org/)库。我知道它可以处理文件，但我想它也有处理内存缓冲区的功能。

# php - 简单、免费的 PHP 博客引擎易于重新设计？

> ID：90802
> 
> 赞同：14
> 
> 时间：2008-09-18T07:51:44.677
> 
> 标签：php, blog-engine

我正在寻找一个需要易于重新设计（CSS、HTML）的 PHP 博客引擎。它还需要是免费的并具有简单的用户界面，这样客户就不会费力地添加帖子。有什么建议么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-18T07:53:14.580

[Wordpress](http://www.wordpress.org) - 我一直在尝试其他博客，并且我一直在使用 wordpress。这绝对是我用于自定义模板的最简单的方法，而且管理 UI 非常好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-18T08:00:50.737

我有点喜欢[b2evo ，我们在](http://b2evolution.net/)[我们的网站](http://blogs.lessthandot.com/)上使用它并对其进行了修改以达到很好的效果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-18T08:24:55.423

我听说[Chyrp](http://chyrp.net/)很好。[Textpattern](http://textpattern.com/)也得到了一些赞誉。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-10-03T17:36:56.153

我使用 flatpress 一年多了，我不会白白改变它。纯文本文件，简单的管理面板，很多有用的插件，模板，小部件，静态页面，rss2-atom，类别，上传机制。

这很容易而且超级简单。如果您想要备份，请制作 tar。如果要传输它，只需复制 tar。

[http://flatpress.org](http://flatpress.org)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T09:01:21.293

自从我开始使用它以来，我对 WordPress 印象深刻。

我看过后面的 CSS，在我看来它的结构很好。有很多模板和关于构建你自己的很好的信息。

我最近开始主要为 Ruby on Rails 教程查看 NetTuts，但在[http://nettuts.com/category/working-with-cmss/上有很多关于扩展 WordPress 的好教程](http://nettuts.com/category/working-with-cmss/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T07:54:36.930

好吧，很难不推荐 Wordpress。重新设计它并不太难，猴子可以使用它，管理界面简单易懂，并且有很好的社区支持。我建议也使用自动升级插件，这样您的客户也可以始终保持最新状态（出于安全原因）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T07:58:51.867

它不完全是一个博客引擎，但您可能会发现[Typolight](http://www.typolight.org/)很有趣。它非常易于使用且可扩展。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-18T08:07:55.667

[Wordpress](http://wordpress.org)绝对是这里的答案。它有一个可以提供帮助的大型社区，有许多可用的免费主题，您可以使用和自定义来构建自己的模板。使用各种插件也很容易扩展。

许多 Linux 托管服务器已经预装了 Wordpress，以使其更加容易，但它的安装简单直接。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-18T09:07:26.087

只有一个答案，Wordpress。我只用它来定制几次，但只是发现它可以通过编辑页眉和页脚文件以及样式表来完成。

有什么可以更简单的。

我建议你在看别人之前先试一试，因为你可能会考虑很久才回来:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-18T20:03:10.720

在我使用过的博客特定包区域中：Textpattern、Typolight、Nucleus、Serendipity 和 Wordpress。毫无疑问，Wordpress 是最终用户最容易管理的，坦率地说，它是最容易模板化的工具之一。Wordpress 的用户群如此之大，以至于当您遇到困难时，您可以轻松找到资源来帮助您。

我对它的唯一实际抱怨是需要设置缓存，这样它就不会被 Digg/Reddit/Etc 所困扰。超载。但是，如果您设置了缓存，则一切顺利，并且可以处理大量流量。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-04-13T20:00:16.953

简单的 PHP 博客。非常非常简单。非常轻巧。完全可定制。您不必担心使用数据库！我觉得很棒！[http://sourceforge.net/projects/sphpblog/](http://sourceforge.net/projects/sphpblog/)

去实现它（梦想）;去得到它（东西！

# c# - 将 C# 2.0 System.Data.SqlTypes.SqlXml 对象转换为 System.Xml.XmlNode

> ID：90803
> 
> 赞同：2
> 
> 时间：2008-09-18T07:51:51.150
> 
> 标签：c#, sqldatareader, sqlxml, xmlnode

在 C# 中将数据与 XML 相互转换似乎总是有问题。它总是希望您创建一个完整的 XMLDocument 对象，即使您认为您不应该这样做。在这种情况下，我在 MS SQL 2005 服务器中有一个 SQLXML 列，我试图将其拉出并推送到一个需要 XMLNode 作为参数的函数中。您会认为这很容易，但除了将其转换为字符串并创建新的 XMLNode 对象之外，我无法找到正确的方法。

我可以使用 SqlDataReader，使用 sqlComm.ExecuteReader() 来加载阅读器，使用 sqlReader.GetSqlXml(0) 来获取 SQLXML 对象，但是如何将其转换为 XmlNode？

相反，我可以使用 sqlComm.ExecuteXmlReader() 来获取 XmlReader，但是如何从阅读器中提取 XmlNode？[http://bytes.com/forum/thread177004.html](http://bytes.com/forum/thread177004.html)说它不能用 XmlTextReader 完成，我应该使用 XmlNodeReader 吗？

请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-18T08:15:20.203

我最终不必使用它，但我找到了我认为最好的答案。基本上，您加载一个 XmlReader，从阅读器创建一个 XmlDocument，然后从文档中选择一个节点列表到一个 XmnLodeList 中，您可以在 ForEach 语句中使用它。这是一些示例代码：

```
System.Xml.XmlReader sqlXMLReader = sqlComm.ExecuteXmlReader();
System.Xml.XmlDocument xmlDoc = new System.Xml.XmlDocument();
xmlDoc.Load(sqlXMLReader);
System.Xml.XmlNodeList xnlJobs = xmlDoc.SelectNodes("/job"); 
```

仍然令人费解，但至少没有 xml 到字符串到 xml 的转换。

# .net - 使用“SQL”查询 Active Directory？

> ID：90812
> 
> 赞同：6
> 
> 时间：2008-09-18T07:57:05.520
> 
> 标签：.net, active-directory, ldap, ldap-query

我只是想知道是否有人知道或制作了 Active Directory 的包装器以便能够在 .net 中轻松查询它？有点像“LINQ-to-ActiveDirectory”或一些 SQL 方言，即能够执行“SELECT DISTINCT(DEPARTMENT) FROM /Users/SomeOU/AnotherOU”或“SELECT user FROM domain”等。

据我所知，可以以“SQLesque”方式查询 WMI 和 IIS，我只是想知道 Active Directory 是否也可以进行类似的操作，而无需学习另一种查询语言（LDAP）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-18T07:57:40.230

> LINQ to Active Directory 实现了一个自定义 LINQ 查询提供程序，允许查询 Active Directory 中的对象。在内部，查询被转换为使用 System.DirectoryServices .NET Framework 库发送到服务器的 LDAP 过滤器。

[http://www.codeplex.com/LINQtoAD](http://www.codeplex.com/LINQtoAD)

样本（来自网站）：

```
// NOTE: Entity type definition "User" omitted in sample - see samples in release.

var users = new DirectorySource<User>(ROOT, SearchScope.Subtree);
users.Log = Console.Out;

var res = from usr in users
          where usr.FirstName.StartsWith("B") && usr.Office == "2525"
          select new { Name = usr.FirstName + " " + usr.LastName, usr.Office, usr.LogonCount };

foreach (var u in res)
{
    Console.WriteLine(u);
    u.Office = "5252";
    u.SetPassword(pwd);
}

users.Update(); 
```

# user-interface - GUI 设计的最佳实践和原则

> ID：90813
> 
> 赞同：63
> 
> 时间：2008-09-18T07:57:15.770
> 
> 标签：user-interface, principles

您最实用的用户友好用户界面设计或原则是什么？

请提交您发现实际上使事情真正有用的那些实践 - 无论如何 - 如果它对您的用户有用，请分享它！

* * *

摘要/整理

原则

1.  吻。
2.  清楚和具体地说明一个选项将实现什么：例如，使用动词来指示将遵循一个选择的动作（参见：Impl. 1）。
3.  使用适合用户需要/想要实现的明显默认操作。
4.  使 UI 的外观和行为适合环境/流程/受众：独立应用程序、网页、便携、科学分析、flash 游戏、专业人士/儿童……
5.  减少新用户的学习曲线。
6.  与其禁用或隐藏选项，不如考虑在用户可以选择的地方提供有用的消息，但仅限于存在这些选择的地方。如果没有可用的替代方案，最好禁用该选项 - 然后在视觉上表明该选项不可用 - 不要隐藏不可用的选项，而是在鼠标悬停的弹出窗口中解释它被禁用的原因。
7.  保持一致并符合实践和控制的放置，正如在广泛使用的成功应用程序中实施的那样。
8.  引导用户的期望，让你的程序按照这些期望运行。
9.  坚持用户的词汇和知识，不要使用程序员/实现术语。
10.  遵循基本的设计原则：对比（明显）、重复（一致性）、对齐（外观）和接近（分组）。

执行

1.  （参见 paiNie 的回答）“尝试在对话框中使用动词。”
2.  允许/实现撤消和重做。

参考

1.  Windows Vista 用户体验指南 [ [http://msdn.microsoft.com/en-us/library/aa511258.aspx]](http://msdn.microsoft.com/en-us/library/aa511258.aspx])
2.  荷兰网站 - “Drempelvrij”指南 [ [http://www.drempelvrij.nl/richtlijnen]](http://www.drempelvrij.nl/richtlijnen])
3.  Web 内容可访问性指南 (WCAG 1.0) [ [http://www.w3.org/TR/WCAG10/]](http://www.w3.org/TR/WCAG10/])
4.  一致性 [ [http://www.amazon.com/Design-Everyday-Things-Donald-Norman/dp/0385267746]](https://rads.stackoverflow.com/amzn/click/com/0385267746)
5.  不要让我思考 [ [http://www.amazon.com/Dont-Make-Me-Think-Usability/dp/0321344758/ref=pdbbssr_1?ie=UTF8&s=books&qid=1221726383&sr=8-1]](https://rads.stackoverflow.com/amzn/click/com/0321344758)
6.  强大而简单 [ [http://msdn.microsoft.com/en-us/library/aa511332.aspx]](http://msdn.microsoft.com/en-us/library/aa511332.aspx])
7.  格式塔设计法 [ [http://www.squidoo.com/gestaltlaws]](http://www.squidoo.com/gestaltlaws])

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2009-12-10T17:50:29.300

我用我的祖母测试我的 GUI。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2008-09-18T08:15:43.760

尝试在对话框中使用动词。

这意味着使用

![替代文字](https://i.stack.imgur.com/R8Jmu.png)

代替

![替代文字](https://i.stack.imgur.com/Yrxwz.png)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2008-09-19T01:44:42.880

## 遵循基本设计原则

*   **对比**——让不同的东西*看起来*不同
*   **重复**- 在一个屏幕和其他屏幕上重复相同的样式
*   **A** ligment - 线屏幕元素了！是的，包括文本、图像、控件和标签。
*   **邻近**性 - 将相关元素组合在一起。一组用于输入地址的输入字段应组合在一起，并与用于输入信用卡信息的一组输入字段不同。这是基本的[格式塔设计法则](https://www.andyrutledge.com/gestalt-principles-1-figure-ground-relationship.html)。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2008-09-18T11:45:38.187

*永远不要*问“你确定吗？”。只允许无限制、可靠的撤消/重做。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-09-18T08:31:50.150

试着想想你的用户想要实现什么，而不是需求是什么。

用户将进入您的系统并使用它来实现目标。当您打开 calc 时，您需要在 90% 的时间内进行简单的快速计算，这就是为什么默认设置为简单模式的原因。

所以不要考虑应用程序必须做什么，而要考虑用户将要做什么，可能会感到无聊，并尝试根据他的意图进行设计，尝试让他的生活更轻松。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-09-18T08:27:18.227

如果您正在为网络或任何面向前端的软件应用程序做任何事情，那么您真的应该为自己阅读...

[不要让我思考——史蒂夫·克鲁格](https://rads.stackoverflow.com/amzn/click/com/0321344758)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-09-18T08:44:52.910

webapps中的面包屑：
告诉->该->用户->在哪里->她->**在系统中**

这在具有相同数据的多个路径的“动态”系统中很难做到，但它通常有助于导航系统。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-09-18T08:02:57.533

我努力适应环境。

在开发 Windows 应用程序时，我使用[Windows Vista 用户体验指南](http://msdn.microsoft.com/en-us/library/aa511258.aspx)，但在开发 Web 应用程序时，我使用适当的指南，因为我开发荷兰网站，我使用基于[Web 内容可访问性的](http://www.w3.org/TR/WCAG10/)[“Drempelvrij”指南](http://www.drempelvrij.nl/richtlijnen)万维网联盟 (W3C) 的[指南 (WCAG 1.0 )。](http://www.w3.org/TR/WCAG10/)

我这样做的原因是为了减少新用户的学习曲线。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-09-18T08:03:00.170

*[我建议通过阅读The Design of Everyday Things](https://rads.stackoverflow.com/amzn/click/com/0385267746)*来对 GUI 设计有一个很好的理解。尽管主要的可打印文件是来自*[Joel Spolsky](http://en.wikipedia.org/wiki/Joel_Spolsky)*的评论：当应用程序的行为与用户期望的不同时，您的图形用户界面就有问题。

最好的例子是，当有人在某些网站上交换`OK`和按钮时。`Cancel`用户希望`OK`按钮位于左侧，而`Cancel`按钮位于右侧。所以简而言之，当应用程序的行为与用户期望的不同时，你就会遇到用户界面设计问题。

尽管如此，无论您遵循何种设计或设计模式，最好的建议是在整个应用程序中保持设计和约定的一致。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-09-18T08:57:59.353

尽可能避免让用户做出选择（即不要创建带有配置对话框的分支！）

对于每个选项和每个消息框，问问自己：我是否可以提出一些合理的默认行为

*   说得通？
*   不妨碍用户？
*   很容易知道我把这个强加给他的用户花费很少吗？

我可以以我的 Palm 手持设备为例：这些设置非常简约，我对此非常满意。基本应用程序设计得很好，我可以简单地使用它们而无需进行调整。好吧，有些事情我不能做，事实上我不得不让自己适应这个工具（而不是相反），但最终这真的让我的生活更轻松。

这个网站是另一个例子：你不能配置任何东西，但我发现它真的很好用。

合理的默认值很难弄清楚，简单的可用性测试可以提供很多线索来帮助你。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-09-18T09:06:04.170

向用户样本展示界面。要求他们执行一项典型任务。注意他们的错误。听听他们的评论。进行更改并重复。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-18T08:39:58.693

日常用品的设计——唐纳德·诺曼

设计知识的经典和世界各地大学许多 HCI 课程的基础。您不会在五分钟内通过来自网络论坛的一些评论设计出出色的 GUI，但一些原则会让您的思维指向正确的方向。

--

MC

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-08-06T12:38:54.977

在构建错误消息时，使错误消息成为这 3 个问题的答案（按此顺序）：

1.  发生了什么？

2.  为什么会这样？

3.  可以做些什么呢？

这来自“人机界面指南：Apple 桌面界面”（1987，ISBN 0-201-17753-6），但它可用于任何地方的任何错误消息。Mac OS X 有一个[更新版本。Microsoft 页面](http://developer.apple.com/documentation/UserExperience/Conceptual/AppleHIGuidelines/XHIGIntro/XHIGIntro.html)[用户界面消息](http://msdn.microsoft.com/en-us/library/bb246405(VS.85,printer).aspx) 说同样的话：“......如果出现错误消息，您应该包括问题、原因和用户纠正问题的操作。”

还包括程序已知的任何信息，而不仅仅是一些固定的字符串。例如，对于错误消息的“为什么会发生”部分，请使用“原始光谱文件 L:\refDataForMascotParser\TripleEncoding\Q1LCMS190203_01Doub leArg.wiff 不存在”，而不仅仅是“文件不存在”。

将此与臭名昭著的错误消息进行对比：“发生错误。”。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-18T07:59:08.277

（从乔尔那里偷来的：o））

不要禁用/删除选项 - 而是在用户单击/选择时提供有用的消息。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-18T08:03:46.720

正如我的数据结构教授今天指出的那样：向普通用户说明你的程序是如何工作的。我们程序员经常认为我们的程序非常合乎逻辑，但普通用户可能不知道该怎么做。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-10-01T07:06:29.780

1.  使用谨慎/简单的动画功能创建从一个部分到另一个部分的无缝过渡。这有助于用户创建导航/结构的心理地图。

2.  在按钮上使用简短的（如果可能的话，一个词）标题，清楚地描述动作的本质。

3.  尽可能使用语义缩放（一个很好的例子是缩放在 Google/Bing 地图上的工作方式，当您专注于某个区域时可以看到更多信息）。

4.  创建至少两种导航方式：垂直和水平。当您在不同部分之间导航时为垂直，当您在部分或子部分的内容中导航时为水平。

5.  始终保持结构的主要选项节点可见（在屏幕大小和设备类型允许的情况下）。

6.  当您深入到结构中时，请始终保留一个可见的提示（例如以路径的形式）指示您所在的位置。

7.  当您希望用户专注于数据（例如阅读文章或查看项目）时隐藏元素。- 但是要注意第 5 点和第 4 点。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-18T09:50:15.983

[强大而简单](http://msdn.microsoft.com/en-us/library/aa511332.aspx)

哦，聘请设计师/学习设计技能。:)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-01-07T14:42:46.663

对于 GUI，标准是特定于平台的。例如，在 Eclipse 中开发 GUI 时，此[链接](http://wiki.eclipse.org/User_Interface_Guidelines)提供了不错的指南。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-04-08T20:12:39.107

我已经阅读了上述大部分内容以及我没有看到的一件事：

如果用户打算使用一次界面，那么尽可能只显示他们需要使用的内容是很好的。

如果用户界面要被同一个用户重复使用，但可能不是很频繁，禁用控件比隐藏它们更好：用户界面的变化和隐藏的功能不被偶尔的用户明显（或记住）是令人沮丧的用户。

如果用户界面将由同一用户非常定期地使用（并且工作中的人员流动不多，即没有很多新用户一直在线）禁用控件绝对有帮助，用户将成为习惯了事情发生的原因，但防止他们在不恰当的环境中意外使用控件并防止错误。

只是我的意见，但这一切都可以追溯到了解您的用户个人资料，而不仅仅是单个用户会话可能需要的内容。

# java - 如何检查 PDF-A 1b 与开源工具的合规性？

> ID：90829
> 
> 赞同：5
> 
> 时间：2008-09-18T08:01:02.063
> 
> 标签：java, pdf, open-source, pdfa

如何使用开源工具检查（并另外创建）符合 PDF-A 1b 的 PDF 文档？有人知道开源工具吗？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-18T08:19:08.667

Try with [http://www.lowagie.com/iText/](http://www.lowagie.com/iText/). It can recognize the version of the loaded PDF and can create PDF as well. It is open source, but I'm not sure do they support exactly the version of the PDF you mention.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-17T03:15:57.950

或者试试[www.validatepdfa.com](http://www.validatepdfa.com) - 不是开源的，而是 100% 免费的在线验证器。

# c# - 如何检测文本文件的编码/代码页

> ID：90838
> 
> 赞同：305
> 
> 时间：2008-09-18T08:02:35.710
> 
> 标签：c#, .net, text, encoding, globalization

在我们的应用程序中，我们接收来自不同来源的文本文件（`.txt`、`.csv`等）。阅读时，这些文件有时包含垃圾，因为这些文件是在不同/未知的代码页中创建的。

有没有办法（自动）检测文本文件的代码页？

`detectEncodingFromByteOrderMarks`构造函数上的,`StreamReader`适用于`UTF8` 和其他 unicode 标记的文件，但我正在寻找一种方法来检测代码页，例如`ibm850`, `windows1252`。

* * *

感谢您的回答，这就是我所做的。

我们收到的文件来自最终用户，他们对代码页一无所知。接收者也是最终用户，到目前为止，这就是他们对代码页的了解：代码页存在，而且很烦人。

**解决方案：**

*   在记事本中打开接收到的文件，查看一段乱码。如果有人叫弗朗索瓦什么的，用你的人类智慧你可以猜到这一点。
*   我创建了一个小应用程序，用户可以使用它打开文件，并输入用户知道在使用正确代码页时它将出现在文件中的文本。
*   循环遍历所有代码页，并使用用户提供的文本显示给出解决方案的代码页。
*   如果弹出更多 as 一个代码页，请要求用户指定更多文本。

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2008-09-18T08:30:29.777

您无法检测到代码页，您需要被告知。您可以分析字节并猜测它，但这可能会产生一些奇怪（有时很有趣）的结果。我现在找不到它，但我确信记事本可以被欺骗以中文显示英文文本。

无论如何，这是您需要阅读的内容： [每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)。

具体来说，乔尔说：

> **关于编码的一个最重要的事实**
> 
> 如果你完全忘记了我刚刚解释的一切，请记住一个极其重要的事实。在不知道它使用什么编码的情况下拥有一个字符串是没有意义的。你不能再把头埋在沙子里，假装“纯”文本是 ASCII。没有纯文本这样的东西。
> 
> 如果您在内存、文件或电子邮件中有一个字符串，您必须知道它的编码是什么，否则您将无法正确解释它或将其显示给用户。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2008-09-18T08:23:13.617

如果您希望检测非 UTF 编码（即没有 BOM），那么您基本上需要对文本进行启发式和统计分析。您可能想查看[关于通用字符集检测的 Mozilla 论文](http://www-archive.mozilla.org/projects/intl/UniversalCharsetDetection.html)（[相同的链接，通过 Wayback Machine 提供更好的格式](https://web.archive.org/web/20110602164601/http://www.mozilla.org/projects/intl/UniversalCharsetDetection.html)）。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-07-23T10:47:38.277

您是否尝试过[用于 Mozilla Universal Charset Detector 的 C# 端口](https://nuget.org/packages/UDE.CSharp)

[来自http://code.google.com/p/ude/](http://code.google.com/p/ude/)的示例

```
public static void Main(String[] args)
{
    string filename = args[0];
    using (FileStream fs = File.OpenRead(filename)) {
        Ude.CharsetDetector cdet = new Ude.CharsetDetector();
        cdet.Feed(fs);
        cdet.DataEnd();
        if (cdet.Charset != null) {
            Console.WriteLine("Charset: {0}, confidence: {1}", 
                 cdet.Charset, cdet.Confidence);
        } else {
            Console.WriteLine("Detection failed.");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-09-18T09:04:51.567

> *您无法检测到代码页*

这显然是错误的。每个网络浏览器都有某种通用字符集检测器来处理没有任何编码指示的页面。火狐有一个。您可以下载代码并查看它是如何工作的。[请参阅此处](http://www.mozilla.org/projects/intl/detectorsrc.html)的一些文档。基本上，它是一种启发式方法，但效果非常好。

给定合理数量的文本，甚至可以检测语言。

这是我刚刚使用 Google 找到[的另一个：](http://chardet.feedparser.org/)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2011-04-29T09:20:17.950

我知道这个问题已经很晚了，而且这个解决方案不会吸引一些人（因为它以英语为中心的偏见和缺乏统计/实证测试），但它对我来说效果很好，特别是对于处理上传的 CSV 数据：

[http://www.architectshack.com/TextFileEncodingDetector.ashx](http://www.architectshack.com/TextFileEncodingDetector.ashx)

好处：

*   内置 BOM 检测
*   默认/后备编码可定制
*   对于包含一些异国数据（例如法语名称）以及混合了 UTF-8 和 Latin-1 样式文件的基于西欧的文件（根据我的经验）非常可靠（基本上是美国和西欧环境的大部分）。

注意：我是写这门课的人，所以显然对它持保留态度！:)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2010-08-06T19:13:52.677

[Notepad++](http://sourceforge.net/projects/notepad-plus/) 具有开箱即用的此功能。它还支持更改它。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-10-19T09:57:22.593

寻找不同的解决方案，我发现

[https://code.google.com/p/ude/](https://code.google.com/p/ude/)

这个解决方案有点重。

我需要一些基本的编码检测，基于 4 个第一个字节和可能的 xml 字符集检测 - 所以我从互联网上获取了一些示例源代码并添加了稍微修改的版本

[http://lists.w3.org/Archives/Public/www-validator/2002Aug/0084.html](http://lists.w3.org/Archives/Public/www-validator/2002Aug/0084.html)

为 Java 编写的。

```
 public static Encoding DetectEncoding(byte[] fileContent)
    {
        if (fileContent == null)
            throw new ArgumentNullException();

        if (fileContent.Length < 2)
            return Encoding.ASCII;      // Default fallback

        if (fileContent[0] == 0xff
            && fileContent[1] == 0xfe
            && (fileContent.Length < 4
                || fileContent[2] != 0
                || fileContent[3] != 0
                )
            )
            return Encoding.Unicode;

        if (fileContent[0] == 0xfe
            && fileContent[1] == 0xff
            )
            return Encoding.BigEndianUnicode;

        if (fileContent.Length < 3)
            return null;

        if (fileContent[0] == 0xef && fileContent[1] == 0xbb && fileContent[2] == 0xbf)
            return Encoding.UTF8;

        if (fileContent[0] == 0x2b && fileContent[1] == 0x2f && fileContent[2] == 0x76)
            return Encoding.UTF7;

        if (fileContent.Length < 4)
            return null;

        if (fileContent[0] == 0xff && fileContent[1] == 0xfe && fileContent[2] == 0 && fileContent[3] == 0)
            return Encoding.UTF32;

        if (fileContent[0] == 0 && fileContent[1] == 0 && fileContent[2] == 0xfe && fileContent[3] == 0xff)
            return Encoding.GetEncoding(12001);

        String probe;
        int len = fileContent.Length;

        if( fileContent.Length >= 128 ) len = 128;
        probe = Encoding.ASCII.GetString(fileContent, 0, len);

        MatchCollection mc = Regex.Matches(probe, "^<\\?xml[^<>]*encoding[ \\t\\n\\r]?=[\\t\\n\\r]?['\"]([A-Za-z]([A-Za-z0-9._]|-)*)", RegexOptions.Singleline);
        // Add '[0].Groups[1].Value' to the end to test regex

        if( mc.Count == 1 && mc[0].Groups.Count >= 2 )
        {
            // Typically picks up 'UTF-8' string
            Encoding enc = null;

            try {
                enc = Encoding.GetEncoding( mc[0].Groups[1].Value );
            }catch (Exception ) { }

            if( enc != null )
                return enc;
        }

        return Encoding.ASCII;      // Default fallback
    } 
```

从文件中读取前 1024 个字节就足够了，但我正在加载整个文件。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-02-09T14:31:38.047

如果有人正在寻找 93.9% 的解决方案。这对我有用：

```
public static class StreamExtension
{
    /// <summary>
    /// Convert the content to a string.
    /// </summary>
    /// <param name="stream">The stream.</param>
    /// <returns></returns>
    public static string ReadAsString(this Stream stream)
    {
        var startPosition = stream.Position;
        try
        {
            // 1\. Check for a BOM
            // 2\. or try with UTF-8\. The most (86.3%) used encoding. Visit: http://w3techs.com/technologies/overview/character_encoding/all/
            var streamReader = new StreamReader(stream, new UTF8Encoding(encoderShouldEmitUTF8Identifier: false, throwOnInvalidBytes: true), detectEncodingFromByteOrderMarks: true);
            return streamReader.ReadToEnd();
        }
        catch (DecoderFallbackException ex)
        {
            stream.Position = startPosition;

            // 3\. The second most (6.7%) used encoding is ISO-8859-1\. So use Windows-1252 (0.9%, also know as ANSI), which is a superset of ISO-8859-1.
            var streamReader = new StreamReader(stream, Encoding.GetEncoding(1252));
            return streamReader.ReadToEnd();
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-09-18T09:03:38.420

我在 Python 中做过类似的事情。基本上，您需要来自各种编码的大量样本数据，这些数据由滑动的两字节窗口分解并存储在字典（散列）中，以提供编码列表值的字节对为键。

鉴于该字典（哈希），您将输入文本并：

*   如果它以任何 BOM 字符开头（'\xfe\xff' 用于 UTF-16-BE，'\xff\xfe' 用于 UTF-16-LE，'\xef\xbb\xbf' 用于 UTF-8 等），我按建议处理
*   如果不是，则取足够大的文本样本，取样本的所有字节对并选择字典中建议的最不常见的编码。

如果您还对*不*以任何 BOM 开头的 UTF 编码文本进行了采样，则第二步将覆盖从第一步中漏掉的文本。

到目前为止，它对我有用（示例数据和后续输入数据是各种语言的字幕），并且错误率降低了。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-12-03T14:20:41.193

工具“uchardet”使用每个字符集的字符频率分布模型很好地做到了这一点。更大的文件和更“典型”的文件更有信心（显然）。

在 ubuntu 上，你只是`apt-get install uchardet`.

在其他系统上，请在此处获取源代码、用法和文档：[https ://github.com/BYVoid/uchardet](https://github.com/BYVoid/uchardet)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-09-18T08:04:28.747

StreamReader 类的构造函数采用“检测编码”参数。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-18T08:25:40.180

遇到了同样的问题，但还没有找到自动检测的好解决方案。现在我使用 PsPad (www.pspad.com) ;) 工作正常

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-03-27T03:25:12.507

如果可以链接到 C 库，则可以使用`libenca`. 请参阅[http://cihar.com/software/enca/](http://cihar.com/software/enca/)。从手册页：

> Enca 读取给定的文本文件或标准输入（如果没有给出），并使用有关其语言的知识（必须得到您的支持）以及解析、统计分析、猜测和黑魔法的混合来确定它们的编码。

它是 GPL v2。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-08-22T03:02:43.260

在 AkelPad 中打开文件（或只是复制/粘贴乱码文本），转到编辑 -> 选择 -> 重新编码... -> 选中“自动检测”。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-12-29T19:42:00.367

由于它基本上归结为启发式方法，因此将以前从同一来源接收到的文件的编码用作第一个提示可能会有所帮助。

大多数人（或应用程序）每次都以几乎相同的顺序做事，通常是在同一台机器上，所以当 Bob 创建一个 .csv 文件并将其发送给 Mary 时，它很可能总是使用 Windows-1252 或无论他的机器默认是什么。

在可能的情况下，一些客户培训也不会受到伤害:-)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2010-08-20T12:31:49.920

我实际上是在寻找一种通用的、非编程的方式来检测文件编码，但我还没有找到。通过使用不同编码进行测试，我发现我的文本是 UTF-7。

所以我第一次做的是：StreamReader file = File.OpenText(fullfilename);

我不得不将其更改为： StreamReader file = new StreamReader(fullfilename, System.Text.Encoding.UTF7);

OpenText 假定它是 UTF-8。

您还可以像这个 new StreamReader(fullfilename, true) 一样创建 StreamReader，第二个参数意味着它应该尝试从文件的字节序标记中检测编码，但这在我的情况下不起作用。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-09-03T09:37:33.990

作为 ITmeze 帖子的插件，我使用此函数将 C# 端口的输出转换为 Mozilla Universal Charset Detector

```
 private Encoding GetEncodingFromString(string codePageName)
    {
        try
        {
            return Encoding.GetEncoding(codePageName);
        }
        catch
        {
            return Encoding.ASCII;
        }
    } 
```

[MSDN](https://msdn.microsoft.com/en-us/library/system.text.encodinginfo.getencoding(v=vs.110).aspx)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-05-07T12:26:08.843

感谢[@Erik Aronesty](https://stackoverflow.com/users/627042/erik-aronesty)提及`uchardet`。

同时（相同？）工具存在于 linux: `chardet`.
或者，在 cygwin 上，您可能想要使用：`chardetect`.

请参阅：[chardet 手册页：](https://www.commandlinux.com/man-page/man1/chardetect.1.html)[https ://www.commandlinux.com/man-page/man1/chardetect.1.html](https://www.commandlinux.com/man-page/man1/chardetect.1.html)

这将启发式地检测（猜测）每个给定文件的字符编码，并将报告每个文件检测到的字符编码的名称和置信度。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-02-12T15:06:08.743

尝试通过键入 cpanm Text::Unaccent::PurePerl 安装 perl 模块 Text::Unaccent 这会生成一个 build.log 文件，该文件在某些​​应用程序中显示为中文，在其他应用程序中显示为英文 cpanm 是初始文本，如果你幸运的话，这是一个合理的尝试语言中足够有空格的方法是通过统计检验比较单词的分布频率

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2012-06-02T10:39:54.770

我在读取文件时使用此代码检测 Unicode 和 windows 默认 ansi 代码页。对于其他编码，需要手动或通过编程检查内容。这可以用来以与打开时相同的编码保存文本。（我使用 VB.NET）

```
'Works for Default and unicode (auto detect)
Dim mystreamreader As New StreamReader(LocalFileName, Encoding.Default) 
MyEditTextBox.Text = mystreamreader.ReadToEnd()
Debug.Print(mystreamreader.CurrentEncoding.CodePage) 'Autodetected encoding
mystreamreader.Close() 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2018-06-03T20:45:14.520

自从被问到这个问题以来已经过去了 10 年（！），但我仍然没有看到提到 MS 的良好的非 GPL 解决方案：[IMultiLanguage2](https://docs.microsoft.com/en-us/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa741220(v%3Dvs.85)#code-page-detection) API。

已经提到的大多数库都是基于 Mozilla 的 UDE 的——浏览器已经解决了类似的问题似乎是合理的。我不知道 chrome 的解决方案是什么，但自从 IE 5.0 MS 发布了他们的解决方案，它是：

1.  没有 GPL 和类似的许可问题，
2.  可能永远得到支持和维护，
3.  提供丰富的输出 - 编码/代码页的所有有效候选者以及置信度分数，
4.  非常容易使用（它是一个单一的函数调用）。

这是一个本地 COM 调用，但这是 Carsten Zeumer[的一些非常出色的工作](https://www.codeproject.com/Articles/17201/Detect-Encoding-for-In-and-Outgoing-Text)，它处理了 .net 使用的互操作混乱。还有一些其他的，但总的来说，这个库并没有得到应有的关注。

# .net - 如何判断我是使用 .NET 使用 x64 还是 x86？

> ID：90855
> 
> 赞同：5
> 
> 时间：2008-09-18T08:07:51.673
> 
> 标签：.net, x86, 64-bit

我想根据他们运行的平台为我的用户提供指向我的程序升级版本的正确链接，所以我需要知道我当前是在 x86 操作系统还是 x64 操作系统上运行。

我发现最好的方法是使用`Environment.GetEnvironmentVariable("PROCESSOR_ARCHITECTURE")`，但我认为会有一些内置工具来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-12-10T14:26:07.430

[.NET 4 中引入了Environment.Is64BitOperatingSystem](http://msdn.microsoft.com/en-us/library/system.environment.is64bitoperatingsystem(VS.100).aspx)和[Environment.Is64BitProcess](http://msdn.microsoft.com/en-us/library/system.environment.is64bitprocess(VS.100).aspx)。对于 .NET 2，您需要尝试其他一些答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-18T14:33:17.237

调用`IsWow64Process`以了解您的 32 位进程是否在 64 位操作系统上的 WOW64 中运行。您可以致电`GetNativeSystemInfo`了解它的确切含义：`wProcessorArchitecture member`of`SYSTEM_INFO`将`PROCESSOR_ARCHITECTURE_INTEL`用于 32 位、`PROCESSOR_ARCHITECTURE_AMD64`x64 和`PROCESSOR_ARCHITECTURE_IA64`Intel 的 Itanium。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T08:10:25.490

使用 Marshal.SizeOf 检查 IntPtr 的大小。32 位 = 4 个字节，64 位 = 8 个字节。

编辑：再次阅读问题后，我不确定这是您要查找的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-10T14:20:04.827

您可以通过 C# 中使用的环境变量来确定很多[- 如何在 Windows 64 位上获取程序文件 (x86)](https://stackoverflow.com/questions/194157/c-how-to-get-program-files-x86-on-vista-x64/194223#194223) [这恰好比迈克的回答更适合我，因为我碰巧有兴趣找到程序文件目录名称]

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2008-09-18T08:27:37.290

检查只是`IntPtr.Size`。您需要将目标平台设为 AnyCPU。

[从这里](http://channel9.msdn.com/forums/TechOff/410567-C-Detect-32-bit-or-64-bit-OS/)

# excel - Convert Excel 4 macros to VBA

> ID：90858
> 
> 赞同：6
> 
> 时间：2008-09-18T08:08:36.867
> 
> 标签：excel, vba, excel-4.0

I have an old Excel 4 macro that I use to run monthly invoices. It is about 3000 lines and has many Excel 5 Dialog Box sheets (for dialog boxes). I would like to know what the easiest way would be to change it into VBA and if it is worth it. Also, if once I have converted it to VBA, how to create a standalone application out of it?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-18T08:52:52.500

I have attempted this before and in the end you do need to rewrite it as Biri has said.

I did quite a bit of this work when our company was upgrading from Windows NT to Windows XP. I often found that it is easier not to look at the old code at all and start again from scratch. You can spend so much time trying to work out what the Excel 4 did especially around the "strange" dialog box notation. In the end if you know what the inputs are and the outputs then it often more time effective and cleaner to rewrite.

Whether to use VBA or not is in some ways another question but VBA is rather powerful and extensible so although I would rather use other tools like .NET in many circumstances it works well and is easy to deploy.

In terms of is it worth it? If you could say that you were never ever going to need to change your Excel 4 macro again then maybe not. But in Business there is always something that changes eg tax rates, especially end of year things. Given how hard it is to find somone to support Excel 4 and even find documentation on it I would say it is risky not to move to VBA but that is something to balance up.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-09-27T19:43:02.823

*（免责声明：我开发 Excel-DNA 库）*

与其将宏移至使用不同于 Excel 宏语言的 COM 自动化对象模型的 VBA，不如将其移至使用[Excel-DNA](http://exceldna.codeplex.com)库运行的 VB.NET（或 C#）。

Excel-DNA 允许您使用与宏语言非常相似的 C API。对于每个宏命令，例如您的对话框，都有一个采用相同参数的 C API 函数。例如，DIALOG.BOX 的等价物是 xlfDialogBox - 此线程中有一些讨论和示例：[http](http://groups.google.com/group/exceldna/browse_thread/thread/53a8253269fdf0a5) ://groups.google.com/group/exceldna/browse_thread/thread/53a8253269fdf0a5 。

这一举措的一大优势是您可以逐渐更改部分代码以使用 COM 自动化接口 - Excel-DNA 允许您混合和匹配 COM 接口和 C API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T08:17:01.947

AFAIK there is no possibility to somehow convert it. You have to basically rewrite in in VBA.

If you have converted to VBA, you cannot run as a standalone application. As VBA states Visual Basic for Application, it is living inside an application (Word, Excel, Scala, whatever).

You have to learn a standard language (not a macro-language) to create standalone applications. But you have to learn much more than the language itself. You have to learn different techniques, for example database handling instead of Excel sheet handling, printing instead of Excel printing, and so on. So basically you will lose a lot of function which is evident if you use Excel.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T08:15:01.920

Here is a good artikel about this topic: [http://msdn.microsoft.com/en-us/library/aa192490.aspx](http://msdn.microsoft.com/en-us/library/aa192490.aspx)

You can download VB2008-Express for free at: [http://www.microsoft.com/express/default.aspx](http://www.microsoft.com/express/default.aspx)

# c# - .NET 中的调试与发布

> ID：90871
> 
> 赞同：63
> 
> 时间：2008-09-18T08:13:42.797
> 
> 标签：c#, .net, asp.net

继续我[之前的问题](https://stackoverflow.com/questions/90751/double-and-floats-in-c)，是否有一份综合文档列出了 C# 应用程序中调试和发布模式之间的所有可用差异，尤其是在 Web 应用程序中？

有什么区别？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2008-09-18T10:01:24.693

“调试”和“发布”只是 Visual Studio 定义的预定义项目配置的名称。
若要查看差异，请查看 Visual Studio 中项目属性中的“生成”选项卡。

VS2005的不同之处包括：

*   Debug 配置中定义的 DEBUG 常量

*   优化发布配置中启用的代码

以及您可以通过单击“高级”按钮看到的其他差异

但是你可以：

*   在项目属性/构建中更改调试和发布配置的构建设置

*   通过右键单击解决方案资源管理器中的解决方案并选择配置管理器来创建您自己的自定义配置

我认为 DEBUG 常量的行为相当清楚（可以在 #if 预处理器指令或 ConditionalAttribute 中引用）。但我不知道有任何关于启用了哪些优化的综合文档——事实上，我怀疑微软希望在不通知的情况下自由地增强他们的优化器

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-09-18T08:20:09.147

我不知道一份简明的文件，但是：

*   Debug.Write 调用在 Release 中被剥离
*   在 Release 中，由于优化，您的 CallStack 可能看起来有点“奇怪”，正如[Scott Hanselman所述](http://www.hanselman.com/blog/ReleaseISNOTDebug64bitOptimizationsAndCMethodInliningInReleaseBuildCallStacks.aspx)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-02-23T21:39:25.133

没有一份文件列出了这些差异。除了已经列出的一些差异之外，在调试模式下编译会关闭大多数在运行时执行的 JIT 编译器优化，并且还会将更完整的调试信息发送到符号数据库文件 (.pdb) 中。

另一个很大的区别是 GC 行为有些不同，因为 JIT 编译器会**根据需要插入对 GC.KeepAlive() 的**调用，以支持调试会话。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-02-19T19:15:59.300

调试和发布只是针对不同解决方案配置的标签。如果需要，您可以添加其他人。如果您希望可以从配置管理器添加更多配置–</p>

[http://msdn.microsoft.com/en-us/library/kwybya3w.aspx](http://msdn.microsoft.com/en-us/library/kwybya3w.aspx)

主要区别——</p>

1.  在调试 DLL 中添加了一些额外的指令，使您能够在 Visual Studio 中的每个源代码行上设置断点。此外，代码不会被优化，再次使您能够调试代码。在发布版本中，这些额外的说明已被删除。

2.  PDB 文件仅在调试模式下创建，而不是在发布模式下创建。

3.  在发布模式下，代码由 JIT 编译器内置的优化器进行优化。它进行了以下优化：

    • 方法内联- 方法调用被注入方法的代码所取代。

    • CPU 寄存器分配 - 局部变量和方法参数可以一直存储在 CPU 寄存器中，而不会（或不太频繁地）存储回堆栈帧

    • 数组索引检查消除 - 使用数组时的一项重要优化（所有 .NET 集合类都在内部使用数组）。当 JIT 编译器可以验证循环永远不会越界索引数组时，它将消除索引检查。

    • 循环展开- 通过重复循环体中的代码来消除带有小体的短循环（最多4 个）。

    • 死代码消除 - if (false) { /.../ } 之类的语句被完全消除。

    • 代码提升- 循环内不受循环影响的代码可以移出循环。

    • 公共子表达式消除。x = y + 4; z = y + 4; 变成 z = x

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-02-23T21:33:11.030

如果您正在使用任何 ASP.NET Ajax 控件，那么一个主要的性能领域是：在发布时从 JavaScript 库中删除了调试信息，并且我已经看到了复杂页面的主要性能改进。其他基于 Web 的资源可能会根据此设置缓存或不缓存。

另外，请记住，Web 应用程序中的调试/发布是由`web.config`文件决定的，而不是您在 Visual Studio 中的设置。

```
<system.web>
    <compilation debug="true"> 
```

更多信息：

*   *[不要在启用 debug=”true” 的情况下运行生产 ASP.NET 应用程序](http://weblogs.asp.net/scottgu/442448)*

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-18T08:26:54.200

在调试模式下使用 GDI+ 绘图要慢得多。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-07-26T22:05:27.963

您还可以管理您只想在调试或发布时使用预处理器标记运行的部分代码：

```
 #if DEBUG
    // Some code running only in debug
 #endif 
```

或者

```
 #if NOT DEBUG
    // Some code running only in release
 #endif 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-18T08:52:56.883

发布版本：

1.  相当快（最重要），优化

2.  无法调试（一步一步）

3.  并且不包括用“调试”指令编写的代码

请参阅*[Debug 与 Release 构建有什么区别？](http://haacked.com/archive/2004/02/14/difference-between-debug-vs-release-build.aspx/)*.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-05-09T02:34:29.993

当我将可执行文件分发到另一台机器时，我收到一条错误消息，表明系统错过了 MSVCP110D.dll。

Stack Overflow 问题*[Visual Studio MSVCP110D.dll is missing](https://stackoverflow.com/questions/10926790)*中说明了此问题的解决方案。

IN XXXXD.dll D 表示 DLL 文件是 DLL 文件的调试版本。但是 MS Visual C++ Redistributable 包仅包含 DLL 文件的发布版本。

**这意味着如果您需要分发由[Visual C++](http://en.wikipedia.org/wiki/Visual_C%2B%2B#32-bit_versions)开发的程序，您需要在发布模式下构建它。**您还需要在目标机器上安装 MS Visual C++ Redistributable（正确版本）。

所以我认为这是调试和发布模式之间的关键区别之一。

# asp.net - 如何动态生成 ASP.NET 用户控件的组合？

> ID：90878
> 
> 赞同：0
> 
> 时间：2008-09-18T08:15:26.850
> 
> 标签：asp.net, user-controls

我有几个用户控件，比如说`A`、和。基于一些随机输入，我需要生成这些的组合。例如，如果输入是我需要显示两个 A，之后是 3 D，再显示一个 A，等等。`B``C``D``2a3d1a2c`

我还需要稳定 clientid 以使它们正常工作。因为这些控件中的每一个都使用自己的`ClientID`属性来收集自己的输入。例如，用户控件 A 在内部生成一个名为 的输入`this.ClientID + "$input1"`，并从诸如 的请求中收集其输入`Request[this.ClientID + "$input1"]`。由于可以有多个 A，因此每个 A`(unique) ClientID`在回发后都需要具有相同的 A，以便从请求中获得正确的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-18T08:29:13.417

要动态添加控件，您可以使用面板作为占位符，例如

```
<asp:Panel ID="ControlPlaceholder" runat="server" /> 
```

然后，在服务器端，您可以向其中添加对象，如下所示：

```
int controlCount = 0;

...

TextBox newTextBox = TextBox();
newTextBox.ID = "ctl_" + controlCount++;
ControlPlaceholder.Controls.Add(newTextBox); 
```

如果您在 Page_Load 事件期间向其中添加控件并使用一致的方法来生成控件的 ID（例如上面的简单计数），那么任何视图状态或事件绑定都将在回发时重新绑定到正确的对象。

# java - JPA 中的复合键

> ID：90885
> 
> 赞同：8
> 
> 时间：2008-09-18T08:16:07.410
> 
> 标签：java, jpa, annotations, compound-key

我想创建一个实体，它有一个自动生成的主键，还有一个由其他两个字段组成的唯一复合键。我如何在 JPA 中做到这一点？
我想这样做是因为主键应该用作另一个表中的外键，并且使其复合并不好。

在以下代码段中，我需要命令和模型是唯一的。pk 当然是主键。

```
@Entity
@Table(name = "dm_action_plan")
public class ActionPlan {
    @Id
    private int pk;
    @Column(name = "command", nullable = false)
    private String command;
    @Column(name = "model", nullable = false)
    String model;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-18T08:30:55.643

你可以使用[`@UniqueConstraint`](http://java.sun.com/javaee/5/docs/api/javax/persistence/UniqueConstraint.html)这样的东西：

```
@Entity
@Table(name = "dm_action_plan",
       uniqueConstraints={ @UniqueConstraint(columnNames= "command","model") } )
public class ActionPlan {
    @Id
    private int pk;

    @Column(name = "command", nullable = false)
    private String command;

    @Column(name = "model", nullable = false)
    String model;
} 
```

这将允许您的 JPA 实现为唯一约束生成 DDL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T08:33:20.550

使用@GeneratedValue 表示将生成密钥，使用@UniqueConstraint 表示唯一性

```
@Entity
@Table(name = "dm_action_plan"
       uniqueConstraint = @UniqueConstraint({"command", "model"})
)
public class ActionPlan {
    @Id
    @GeneratedValue
    private int pk;
    @Column(name = "command", nullable = false)
    private String command;
    @Column(name = "model", nullable = false)
    String model;
} 
```

# wcf - WCF REST 缓存 - 客户端和服务器端

> ID：90889
> 
> 赞同：4
> 
> 时间：2008-09-18T08:17:31.727
> 
> 标签：wcf, rest

我写了一个 RESTful WCF 服务。合并电子标签，使标头过期。

从浏览器使用缓存时，缓存效果很好。但是，当从 WCF 通道工厂或 .NET Web 请求对象调用缓存时，缓存是如何工作的？

因此，在我的网站在向我返回 304 未修改响应时调用 WCF RESTful 服务的情况下。我该如何处理。浏览器检测到这一点并从其缓存中返回未修改的版本。

但是，当客户端不是浏览器时，我是否需要编写自己的缓存版本，类似于浏览器缓存的方式？

任何帮助或见解将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-18T11:08:47.183

是的，您将不得不自己处理这个问题，就像您负责在请求中发送日期时间一样，因此服务器可以确定是否有更改。我会查看[RSS Bandit 源代码](http://www.rssbandit.org/)以获取示例实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-11-23T14:18:06.477

我们有一个示例说明如何执行此操作（使用 .NET 4）[http://code.msdn.microsoft.com/cannonicalRESTEntity](http://code.msdn.microsoft.com/cannonicalRESTEntity)

# debugging - Control Fujitsu Softune debugger

> ID：90891
> 
> 赞同：2
> 
> 时间：2008-09-18T08:18:08.170
> 
> 标签：debugging, embedded, softune

Is there a way to control the Fujitsu Softune debugger with an other application(e.g. Eclipse)? I think about sending the command mentioned in the documentation of Softune and parse the output, but also other approaches are welcome.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-25T10:28:55.970

eclipse有插件；文件名为“FujitsuF2MC16_1.0.1.jar”，请在此页面上查找：

[http://www.mikrocontroller.net/topic/70413](http://www.mikrocontroller.net/topic/70413)

在 Eclipse 中编译和调试。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-15T23:40:34.787

控制 Fujitsu Softune 调试器是什么意思？

如果您想要使用新编译的 .abs 文件启动调试会话，您可以执行以下操作。

在 Eclipse 环境中添加一个按钮或快捷方式来调用 make 实用程序来制作`debug:`. 您的 makefile 将具有如下条目：

```
debug: $(make_vars)
# start debugger
make -f$(make_vars) -f$(make_dir)/$(cfg) cfg="$(cfg)"   debug_session 
```

在 make 条目中为`debug_session`您输入如下内容：

```
echo UPDATING SOFTUNE-3 PROJECT FOR  DEBUGGING;\
$(subst \,/,$(DIR_SOFTUNE_WORKBENCH))/bin/Fs907s.exe softune/E7x_proj.wsp    2>/dev/null; 
```

我希望这很有用。

# c# - .NET：获取所有 Outlook 日历项目

> ID：90899
> 
> 赞同：31
> 
> 时间：2008-09-18T08:19:35.420
> 
> 标签：c#, .net, outlook, calendar, recurring

如何从特定日历（特定日期）获取所有项目。例如，我有一个日历，每个星期一晚上都有一个重复项目。当我要求所有这样的项目时：

```
CalendarItems = CalendarFolder.Items;
CalendarItems.IncludeRecurrences = true; 
```

我只收到1件...

有没有一种简单的方法可以从日历中获取**所有**项目（主要项目 + 派生项目）？在我的具体情况下，可以设置日期限制，但获取所有项目会很酷（我的经常性项目本身是有时间限制的）。

**我正在使用 Microsoft Outlook 12 对象库 (Microsoft.Office.Interop.Outlook)**。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-09-18T12:42:04.867

我研究了文档，这是我的结果：我已经硬编码了一个月的时间限制，但这只是一个例子。

```
public void GetAllCalendarItems()
{
    Microsoft.Office.Interop.Outlook.Application oApp = null;
    Microsoft.Office.Interop.Outlook.NameSpace mapiNamespace = null;
    Microsoft.Office.Interop.Outlook.MAPIFolder CalendarFolder = null;
    Microsoft.Office.Interop.Outlook.Items outlookCalendarItems = null;

    oApp = new Microsoft.Office.Interop.Outlook.Application();
    mapiNamespace = oApp.GetNamespace("MAPI"); ;
    CalendarFolder = mapiNamespace.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderCalendar);
    outlookCalendarItems = CalendarFolder.Items;
    outlookCalendarItems.IncludeRecurrences = true;

    foreach (Microsoft.Office.Interop.Outlook.AppointmentItem item in outlookCalendarItems)
    {
        if (item.IsRecurring)
        {
            Microsoft.Office.Interop.Outlook.RecurrencePattern rp = item.GetRecurrencePattern();
            DateTime first = new DateTime(2008, 8, 31, item.Start.Hour, item.Start.Minute, 0);
            DateTime last = new DateTime(2008, 10, 1);
            Microsoft.Office.Interop.Outlook.AppointmentItem recur = null;

            for (DateTime cur = first; cur <= last; cur = cur.AddDays(1))
            {
                try
                {
                    recur = rp.GetOccurrence(cur);
                    MessageBox.Show(recur.Subject + " -> " + cur.ToLongDateString());
                }
                catch
                { }
            }
        }
        else
        {
            MessageBox.Show(item.Subject + " -> " + item.Start.ToLongDateString());
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-09-18T11:08:05.437

我相信您必须限制或查找才能获得定期约会，否则 Outlook 不会扩展它们。此外，您必须在设置 IncludeRecurrences*之前*按开始排序。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-12-03T10:14:52.007

我写了类似的代码，但后来发现了导出功能：

```
Application outlook;
NameSpace OutlookNS;

outlook = new ApplicationClass();
OutlookNS = outlook.GetNamespace("MAPI");

MAPIFolder f = OutlookNS.GetDefaultFolder(OlDefaultFolders.olFolderCalendar);

CalendarSharing cs = f.GetCalendarExporter();
cs.CalendarDetail = OlCalendarDetail.olFullDetails;
cs.StartDate = new DateTime(2011, 11, 1);
cs.EndDate = new DateTime(2011, 12, 31);
cs.SaveAsICal("c:\\temp\\cal.ics"); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-03T02:09:10.523

LinqPad 剪断了对我有用的：

```
//using Microsoft.Office.Interop.Outlook
Application a = new Application();
Items i = a.Session.GetDefaultFolder(OlDefaultFolders.olFolderCalendar).Items;
i.IncludeRecurrences = true;
i.Sort("[Start]");
i = i.Restrict(
    "[Start] >= '10/1/2013 12:00 AM' AND [End] < '10/3/2013 12:00 AM'");

var r =
    from ai in i.Cast<AppointmentItem>()
    select new {
        ai.Categories,
        ai.Start,
        ai.Duration
        };
r.Dump(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-08-18T11:01:57.260

如果您需要从您的朋友那里访问共享文件夹，那么您可以将您的朋友设置为收件人。要求：必须先共享他的日历。

```
// Set recepient
Outlook.Recipient oRecip = (Outlook.Recipient)oNS.CreateRecipient("abc@yourmail.com");

// Get calendar folder 
Outlook.MAPIFolder oCalendar = oNS.GetSharedDefaultFolder(oRecip, Outlook.OlDefaultFolders.olFolderCalendar); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-27T21:14:09.670

无需手动扩展经常性项目。只需确保在使用 IncludeRecurrences*之前对项目进行排序。*

这是 VBA 示例：

```
tdystart = VBA.Format(#8/1/2012#, "Short Date")
tdyend = VBA.Format(#8/31/2012#, "Short Date")

Dim folder As MAPIFolder
Set appointments = folder.Items

appointments.Sort "[Start]" ' <-- !!! Sort is a MUST
appointments.IncludeRecurrences = True ' <-- This will expand reccurent items

Set app = appointments.Find("[Start] >= """ & tdystart & """ and [Start] <= """ & tdyend & """")

While TypeName(app) <> "Nothing"
   MsgBox app.Start & " " & app.Subject
   Set app = appointments.FindNext
Wend 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-10T05:50:59.987

```
public void GetAllCalendarItems()
        {
            DataTable sample = new DataTable(); //Sample Data
            sample.Columns.Add("Subject", typeof(string));
            sample.Columns.Add("Location", typeof(string));
            sample.Columns.Add("StartTime", typeof(DateTime));
            sample.Columns.Add("EndTime", typeof(DateTime));
            sample.Columns.Add("StartDate", typeof(DateTime));
            sample.Columns.Add("EndDate", typeof(DateTime));
            sample.Columns.Add("AllDayEvent", typeof(bool));
            sample.Columns.Add("Body", typeof(string));

            listViewContacts.Items.Clear();
            oApp = new Outlook.Application();
            oNS = oApp.GetNamespace("MAPI");
            oCalenderFolder = oNS.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderCalendar);
            outlookCalendarItems = oCalenderFolder.Items;
            outlookCalendarItems.IncludeRecurrences = true;
           // DataTable sample = new DataTable();
            foreach (Microsoft.Office.Interop.Outlook.AppointmentItem item in outlookCalendarItems)
            {
                DataRow row = sample.NewRow();
                row["Subject"] = item.Subject;
                row["Location"] = item.Location;
                row["StartTime"] = item.Start.TimeOfDay.ToString();
                row["EndTime"] = item.End.TimeOfDay.ToString();
                row["StartDate"] = item.Start.Date;
                row["EndDate"] = item.End.Date;
                row["AllDayEvent"] = item.AllDayEvent;
                row["Body"] = item.Body;
                sample.Rows.Add(row);
            }
            sample.AcceptChanges();
            foreach (DataRow dr in sample.Rows)
                {
                    ListViewItem lvi = new ListViewItem(dr["Subject"].ToString());

                    lvi.SubItems.Add(dr["Location"].ToString());
                    lvi.SubItems.Add(dr["StartTime"].ToString());
                    lvi.SubItems.Add(dr["EndTime"].ToString());
                    lvi.SubItems.Add(dr["StartDate"].ToString());
                    lvi.SubItems.Add(dr["EndDate"].ToString());
                    lvi.SubItems.Add(dr["AllDayEvent"].ToString());
                    lvi.SubItems.Add(dr["Body"].ToString());

                    this.listViewContacts.Items.Add(lvi);
                }
            oApp = null;
            oNS = null;

        } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-16T20:48:57.820

我发现这篇文章非常有用：[https ://docs.microsoft.com/en-us/office/client-developer/outlook/pia/how-to-search-and-obtain-appointments-in-a-time-range](https://docs.microsoft.com/en-us/office/client-developer/outlook/pia/how-to-search-and-obtain-appointments-in-a-time-range)

它演示了如何获取指定时间范围内的日历条目。它对我有用。为了您的方便，这里是文章的源代码:)

```
using Outlook = Microsoft.Office.Interop.Outlook;

private void DemoAppointmentsInRange()
{
    Outlook.Folder calFolder = Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderCalendar)
        as Outlook.Folder;
    DateTime start = DateTime.Now;
    DateTime end = start.AddDays(5);
    Outlook.Items rangeAppts = GetAppointmentsInRange(calFolder, start, end);
    if (rangeAppts != null)
    {
        foreach (Outlook.AppointmentItem appt in rangeAppts)
        {
             Debug.WriteLine("Subject: " + appt.Subject 
                 + " Start: " + appt.Start.ToString("g"));
        }
    }
}

/// <summary>
/// Get recurring appointments in date range.
/// </summary>
/// <param name="folder"></param>
/// <param name="startTime"></param>
/// <param name="endTime"></param>
/// <returns>Outlook.Items</returns>
private Outlook.Items GetAppointmentsInRange(
    Outlook.Folder folder, DateTime startTime, DateTime endTime)
{
    string filter = "[Start] >= '"
        + startTime.ToString("g")
        + "' AND [End] <= '"
        + endTime.ToString("g") + "'";
    Debug.WriteLine(filter);
    try
    {
        Outlook.Items calItems = folder.Items;
        calItems.IncludeRecurrences = true;
        calItems.Sort("[Start]", Type.Missing);
        Outlook.Items restrictItems = calItems.Restrict(filter);
        if (restrictItems.Count > 0)
        {
            return restrictItems;
        }
        else
        {
            return null;
        }
    }
    catch { return null; }
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-03T09:16:03.967

试试这个：

```
 public List<AdxCalendarItem> GetAllCalendarItems()
    {
        Outlook.Application OutlookApp = new Outlook.Application();
        List<AdxCalendarItem> result = new List<AdxCalendarItem>();
            Outlook._NameSpace session = OutlookApp.Session;
            if (session != null)
                try
                {
                    object stores = session.GetType().InvokeMember("Stores", BindingFlags.GetProperty, null, session, null);
                    if (stores != null)
                        try
                        {
                            int count = (int)stores.GetType().InvokeMember("Count", BindingFlags.GetProperty, null, stores, null);
                            for (int i = 1; i <= count; i++)
                            {
                                object store = stores.GetType().InvokeMember("Item", BindingFlags.GetProperty, null, stores, new object[] { i });
                                if (store != null)
                                    try
                                    {
                                        Outlook.MAPIFolder calendar = null;
                                        try
                                        {
                                            calendar = (Outlook.MAPIFolder)store.GetType().InvokeMember("GetDefaultFolder", BindingFlags.GetProperty, null, store, new object[] { Outlook.OlDefaultFolders.olFolderCalendar });
                                        }
                                        catch
                                        {
                                            continue;
                                        }
                                        if (calendar != null)
                                            try
                                            {
                                                Outlook.Folders folders = calendar.Folders;
                                                try
                                                {
                                                    Outlook.MAPIFolder subfolder = null;
                                                    for (int j = 1; j < folders.Count + 1; j++)
                                                    {
                                                        subfolder = folders[j];
                                                        try
                                                        {
                                                           // add subfolder items
                                                            result.AddRange(GetAppointmentItems(subfolder));
                                                        }
                                                        finally
                                                        { if (subfolder != null) Marshal.ReleaseComObject(subfolder); }
                                                    }
                                                }
                                                finally
                                                { if (folders != null) Marshal.ReleaseComObject(folders); }
                                                // add root items
                                                result.AddRange(GetAppointmentItems(calendar));
                                            }
                                            finally { Marshal.ReleaseComObject(calendar); }
                                    }
                                    finally { Marshal.ReleaseComObject(store); }
                            }
                        }
                        finally { Marshal.ReleaseComObject(stores); }
                }
                finally { Marshal.ReleaseComObject(session); }
        return result;
    }

    List<AdxCalendarItem> GetAppointmentItems(Outlook.MAPIFolder calendarFolder)
    {
        List<AdxCalendarItem> result = new List<AdxCalendarItem>();
        Outlook.Items calendarItems = calendarFolder.Items;
        try
        {
            calendarItems.IncludeRecurrences = true;
            Outlook.AppointmentItem appointment = null;
            for (int j = 1; j < calendarItems.Count + 1; j++)
            {
                appointment = calendarItems[j] as Outlook.AppointmentItem;
                try
                {
                    AdxCalendarItem item = new AdxCalendarItem(
                        calendarFolder.Name,
                        appointment.Subject,
                                   appointment.Location,
                                   appointment.Start,
                                   appointment.End,
                                   appointment.Start.Date,
                                   appointment.End.Date,
                                   appointment.AllDayEvent,
                                   appointment.Body);
                    result.Add(item);
                }
                finally
                {
                    { Marshal.ReleaseComObject(appointment); }
                }
            }
        }
        finally { Marshal.ReleaseComObject(calendarItems); }
        return result;
    }
}

public class AdxCalendarItem
{
    public string CalendarName;
    public string Subject;
    public string Location;
    public DateTime StartTime;
    public DateTime EndTime;
    public DateTime StartDate;
    public DateTime EndDate;
    public bool AllDayEvent;
    public string Body;

    public AdxCalendarItem(string CalendarName, string Subject, string Location, DateTime StartTime, DateTime EndTime,
                            DateTime StartDate, DateTime EndDate, bool AllDayEvent, string Body)
    {
        this.CalendarName = CalendarName;
        this.Subject = Subject;
        this.Location = Location;
        this.StartTime = StartTime;
        this.EndTime = EndTime;
        this.StartDate = StartDate;
        this.EndDate = EndDate;
        this.AllDayEvent = AllDayEvent;
        this.Body = Body;

    }

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-27T10:17:55.830

```
 Microsoft.Office.Interop.Outlook.Application oApp = null;
    Microsoft.Office.Interop.Outlook.NameSpace mapiNamespace = null;
    Microsoft.Office.Interop.Outlook.MAPIFolder CalendarFolder = null;
    Microsoft.Office.Interop.Outlook.Items outlookCalendarItems = null;

    oApp = new Microsoft.Office.Interop.Outlook.Application();
    mapiNamespace = oApp.GetNamespace("MAPI"); ;
    CalendarFolder = mapiNamespace.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderCalendar);
    outlookCalendarItems = CalendarFolder.Items;
    outlookCalendarItems.IncludeRecurrences = true;

    foreach (Microsoft.Office.Interop.Outlook.AppointmentItem item in outlookCalendarItems)
    {
        if (item.IsRecurring)
        {
            Microsoft.Office.Interop.Outlook.RecurrencePattern rp = item.GetRecurrencePattern();

                   // get all date 
            DateTime first = new DateTime( item.Start.Hour, item.Start.Minute, 0);
            DateTime last = new DateTime();
            Microsoft.Office.Interop.Outlook.AppointmentItem recur = null;

            for (DateTime cur = first; cur <= last; cur = cur.AddDays(1))
            {
                try
                {
                    recur = rp.GetOccurrence(cur);
                    MessageBox.Show(recur.Subject + " -> " + cur.ToLongDateString());
                }
                catch
                { }
            }
        }
        else
        {
            MessageBox.Show(item.Subject + " -> " + item.Start.ToLongDateString());
        }
    }

} 
```

> 它正在工作我尝试了，但您需要添加有关 Microsoft Outlook 的参考

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2010-05-19T21:11:35.637

```
calendarFolder = 
    mapiNamespace.GetDefaultFolder(
        Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderCalendar); 
```

# java - 对 Java Servlet 进行单元测试

> ID：90907
> 
> 赞同：54
> 
> 时间：2008-09-18T08:21:21.017
> 
> 标签：java, unit-testing, servlets

我想知道对 servlet 进行单元测试的最佳方法是什么。

测试内部方法只要不引用 servlet 上下文就没有问题，但是测试 doGet/doPost 方法以及引用上下文或使用会话参数的内部方法呢？

有没有一种方法可以简单地使用 JUnit 等经典工具，或者最好使用 TestNG？我需要嵌入一个tomcat服务器或类似的东西吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-09-18T09:11:56.543

大多数时候，我通过“集成测试”而不是纯单元测试来测试 Servlet 和 JSP。有大量可用的 JUnit/TestNG 附加组件，包括：

*   [HttpUnit](http://httpunit.sourceforge.net/)（最古老和最著名的，非常低的级别，根据您的需要可以是好是坏）
*   [HtmlUnit](http://htmlunit.sourceforge.net/)（比HttpUnit更高级别，对很多项目来说更好）
*   [JWebUnit](http://jwebunit.sourceforge.net/)（位于其他测试工具之上并尝试简化它们 - 我更喜欢的那个）
*   [WatiJ](http://watij.com/)和 Selenium（使用你的浏览器做测试，更重量级但更现实）

这是一个简单的订单处理 Servlet 的 JWebUnit 测试，它处理来自“orderEntry.html”表单的输入。它需要一个客户 ID、一个客户名称和一个或多个订单项：

```
public class OrdersPageTest {
    private static final String WEBSITE_URL = "http://localhost:8080/demo1";

    @Before
    public void start() {
        webTester = new WebTester();
        webTester.setTestingEngineKey(TestingEngineRegistry.TESTING_ENGINE_HTMLUNIT);
        webTester.getTestContext().setBaseUrl(WEBSITE_URL);
    }
    @Test
    public void sanity() throws Exception {
        webTester.beginAt("/orderEntry.html");
        webTester.assertTitleEquals("Order Entry Form");
    }
    @Test
    public void idIsRequired() throws Exception {
        webTester.beginAt("/orderEntry.html");
        webTester.submit();
        webTester.assertTextPresent("ID Missing!");
    }
    @Test
    public void nameIsRequired() throws Exception {
        webTester.beginAt("/orderEntry.html");
        webTester.setTextField("id","AB12");
        webTester.submit();
        webTester.assertTextPresent("Name Missing!");
    }
    @Test
    public void validOrderSucceeds() throws Exception {
        webTester.beginAt("/orderEntry.html");
        webTester.setTextField("id","AB12");
        webTester.setTextField("name","Joe Bloggs");

        //fill in order line one
        webTester.setTextField("lineOneItemNumber", "AA");
        webTester.setTextField("lineOneQuantity", "12");
        webTester.setTextField("lineOneUnitPrice", "3.4");

        //fill in order line two
        webTester.setTextField("lineTwoItemNumber", "BB");
        webTester.setTextField("lineTwoQuantity", "14");
        webTester.setTextField("lineTwoUnitPrice", "5.6");

        webTester.submit();
        webTester.assertTextPresent("Total: 119.20");
    }
    private WebTester webTester;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-09-18T08:22:57.270

尝试[HttpUnit](http://httpunit.sourceforge.net/)，尽管您最终可能会编写更多的“集成测试”（模块的）而不是“单元测试”（单个类的）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-06T01:54:00.570

我查看了发布的答案，并认为我会发布一个更完整的解决方案，该解决方案实际上演示了如何使用嵌入式 GlassFish 及其 Apache Maven 插件进行测试。

[我在我的博客Using GlassFish 3.1.1 Embedded with JUnit 4.x 和 HtmlUnit 2.x](http://javaevangelist.blogspot.com/2013/01/using-glassfish-311-embedded-with-junit.html)上写了完整的过程，并将完整的项目放在 Bitbucket 上供下载：[image-servlet](https://bitbucket.org/jyeary/image-servlet)

在我看到这个问题之前，我正在查看关于 JSP/JSF 标记的图像 servlet 的另一篇文章。所以我将我在另一篇文章中使用的解决方案与这篇文章的完整单元测试版本结合起来。

# 如何测试

Apache Maven 具有定义明确的生命周期，其中包括`test`. 我将使用它以及另一个调用`integration-test`来实现我的解决方案的生命周期。

1.  在 surefire 插件中禁用标准生命周期单元测试。
2.  添加`integration-test`作为surefire插件执行的一部分
3.  将 GlassFish Maven 插件添加到 POM。
4.  将 GlassFish 配置为在`integration-test`生命周期内执行。
5.  运行单元测试（集成测试）。

# GlassFish 插件

将此插件添加为`<build>`.

```
 <plugin>
            <groupId>org.glassfish</groupId>
            <artifactId>maven-embedded-glassfish-plugin</artifactId>
            <version>3.1.1</version>
            <configuration>
                <!-- This sets the path to use the war file we have built in the target directory -->
                <app>target/${project.build.finalName}</app>
                <port>8080</port>
                <!-- This sets the context root, e.g. http://localhost:8080/test/ -->
                <contextRoot>test</contextRoot>
                <!-- This deletes the temporary files during GlassFish shutdown. -->
                <autoDelete>true</autoDelete>
            </configuration>
            <executions>
                <execution>
                    <id>start</id>
                    <!-- We implement the integration testing by setting up our GlassFish instance to start and deploy our application. -->
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>start</goal>
                        <goal>deploy</goal>
                    </goals>
                </execution>
                <execution>
                    <id>stop</id>
                    <!-- After integration testing we undeploy the application and shutdown GlassFish gracefully. -->
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>undeploy</goal>
                        <goal>stop</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

# Surefire 插件

添加/修改插件作为`<build>`.

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12.4</version>
            <!-- We are skipping the default test lifecycle and will test later during integration-test -->
            <configuration>
                <skip>true</skip>
            </configuration>
            <executions>
                <execution>
                    <phase>integration-test</phase>
                    <goals>
                        <!-- During the integration test we will execute surefire:test -->
                        <goal>test</goal>
                    </goals>
                    <configuration>
                        <!-- This enables the tests which were disabled previously. -->
                        <skip>false</skip>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

# HTML单元

添加集成测试，如下例所示。

```
@Test
public void badRequest() throws IOException {
    webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);
    webClient.getOptions().setPrintContentOnFailingStatusCode(false);
    final HtmlPage page = webClient.getPage("http://localhost:8080/test/images/");
    final WebResponse response = page.getWebResponse();
    assertEquals(400, response.getStatusCode());
    assertEquals("An image name is required.", response.getStatusMessage());
    webClient.getOptions().setThrowExceptionOnFailingStatusCode(true);
    webClient.getOptions().setPrintContentOnFailingStatusCode(true);
    webClient.closeAllWindows();
} 
```

[我在我的博客Using GlassFish 3.1.1 Embedded with JUnit 4.x 和 HtmlUnit 2.x](http://javaevangelist.blogspot.com/2013/01/using-glassfish-311-embedded-with-junit.html)上写了完整的过程，并将完整的项目放在 Bitbucket 上供下载：[image-servlet](https://bitbucket.org/jyeary/image-servlet)

如果您有任何问题，请发表评论。我认为这是一个完整的示例，您可以将其用作您计划对 servlet 进行的任何测试的基础。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-18T08:43:28.297

您是否在单元测试中手动调用 doPost 和 doGet 方法？如果是这样，您可以覆盖 HttpServletRequest 方法以提供模拟对象。

```
myServlet.doGet(new HttpServletRequestWrapper() {
     public HttpSession getSession() {
         return mockSession;
     }

     ...
} 
```

[HttpServletRequestWrapper](http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/http/HttpServletRequestWrapper.html)是一个方便的Java 类。我建议您在单元测试中创建一个实用方法来创建模拟 http 请求：

```
public void testSomething() {
    myServlet.doGet(createMockRequest(), createMockResponse());
}

protected HttpServletRequest createMockRequest() {
   HttpServletRequest request = new HttpServletRequestWrapper() {
        //overrided methods   
   }
} 
```

将模拟创建方法放在基本 servlet 超类中并进行所有 servlet 单元测试来扩展它会更好。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-18T16:06:13.113

Mockrunner ( [http://mockrunner.sourceforge.net/index.html](http://mockrunner.sourceforge.net/index.html) ) 可以做到这一点。它提供了一个模拟 J2EE 容器，可用于测试 Servlet。它还可以用于对其他服务器端代码进行单元测试，例如 EJB、JDBC、JMS、Struts。我自己只使用了 JDBC 和 EJB 功能。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-26T12:15:58.003

servlet doPost() 方法的 JUnit 测试实现仅依赖于 Mockito 库来模拟`HttpRequest`、`HttpResponse`、`HttpSession`和`ServletResponse`的实例`RequestDispatcher`。将参数键和 JavaBean 实例替换为与调用 doPost() 的关联 JSP 文件中引用的值相对应的值。

Mockito Maven 依赖：

```
<dependency>
      <groupId>org.mockito</groupId>
      <artifactId>mockito-all</artifactId>
      <version>1.9.5</version>
</dependency> 
```

JUnit测试：

```
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import java.io.IOException;

import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;
import static org.mockito.Mockito.*;

/**
 * Unit tests for the {@code StockSearchServlet} class.
 * @author Bob Basmaji
 */
public class StockSearchServletTest extends HttpServlet {
    // private fields of this class
    private static HttpServletRequest request;
    private static HttpServletResponse response;
    private static StockSearchServlet servlet;
    private static final String SYMBOL_PARAMETER_KEY = "symbol";
    private static final String STARTRANGE_PARAMETER_KEY = "startRange";
    private static final String ENDRANGE_PARAMETER_KEY = "endRange";
    private static final String INTERVAL_PARAMETER_KEY = "interval";
    private static final String SERVICETYPE_PARAMETER_KEY = "serviceType";

    /**
     * Sets up the logic common to each test in this class
     */
    @Before
    public final void setUp() {
        request = mock(HttpServletRequest.class);
        response = mock(HttpServletResponse.class);

        when(request.getParameter("symbol"))
                .thenReturn("AAPL");

        when(request.getParameter("startRange"))
                .thenReturn("2016-04-23 00:00:00");

        when(request.getParameter("endRange"))
                .thenReturn("2016-07-23 00:00:00");

        when(request.getParameter("interval"))
                .thenReturn("DAY");

        when(request.getParameter("serviceType"))
                .thenReturn("WEB");

        String symbol = request.getParameter(SYMBOL_PARAMETER_KEY);
        String startRange = request.getParameter(STARTRANGE_PARAMETER_KEY);
        String endRange = request.getParameter(ENDRANGE_PARAMETER_KEY);
        String interval = request.getParameter(INTERVAL_PARAMETER_KEY);
        String serviceType = request.getParameter(SERVICETYPE_PARAMETER_KEY);

        HttpSession session = mock(HttpSession.class);
        when(request.getSession()).thenReturn(session);
        final ServletContext servletContext = mock(ServletContext.class);
        RequestDispatcher dispatcher = mock(RequestDispatcher.class);
        when(servletContext.getRequestDispatcher("/stocksearchResults.jsp")).thenReturn(dispatcher);
        servlet = new StockSearchServlet() {
            public ServletContext getServletContext() {
                return servletContext; // return the mock
            }
        };

        StockSearchBean search = new StockSearchBean(symbol, startRange, endRange, interval);
        try {
            switch (serviceType) {
                case ("BASIC"):
                    search.processData(ServiceType.BASIC);
                    break;
                case ("DATABASE"):
                    search.processData(ServiceType.DATABASE);
                    break;
                case ("WEB"):
                    search.processData(ServiceType.WEB);
                    break;
                default:
                    search.processData(ServiceType.WEB);
            }
        } catch (StockServiceException e) {
            throw new RuntimeException(e.getMessage());
        }
        session.setAttribute("search", search);
    }

    /**
     * Verifies that the doPost method throws an exception when passed null arguments
     * @throws ServletException
     * @throws IOException
     */
    @Test(expected = NullPointerException.class)
    public final void testDoPostPositive() throws ServletException, IOException {
        servlet.doPost(null, null);
    }

    /**
     * Verifies that the doPost method runs without exception
     * @throws ServletException
     * @throws IOException
     */
    @Test
    public final void testDoPostNegative() throws ServletException, IOException {
        boolean throwsException = false;
        try {
            servlet.doPost(request, response);
        } catch (Exception e) {
            throwsException = true;
        }
        assertFalse("doPost throws an exception", throwsException);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-15T12:35:00.150

2018 年 2 月更新：[OpenBrace Limited 已关闭](https://closingbraces.net/openbrace/)，不再支持其 ObMimic 产品。

另一种解决方案是使用我的[ObMimic](http://www.openbrace.com)库，该库专为 servlet 的单元测试而设计。它提供了所有 Servlet API 类的完整纯 Java 实现，您可以根据需要配置和检查这些以进行测试。

您确实可以使用它从 JUnit 或 TestNG 测试中直接调用 doGet/doPost 方法，并测试任何内部方法，即使它们引用 ServletContext 或使用会话参数（或任何其他 Servlet API 功能）。

这不需要外部或嵌入式容器，不会限制您进行更广泛的基于 HTTP 的“集成”测试，并且与通用模拟不同，它具有“嵌入”的完整 Servlet API 行为，因此您的测试可以是“基于状态而不是基于交互（例如，您的测试不必依赖于您的代码调用 Servlet API 的精确顺序，也不必依赖于您自己对 Servlet API 将如何响应每个调用的期望） .

[我对如何使用 JUnit 测试我的 servlet](https://stackoverflow.com/questions/5434419/how-to-test-my-servlet-using-junit)的回答中有一个简单的示例。有关完整详细信息和免费下载，请参见[ObMimic](http://www.openbrace.com)网站。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-16T11:11:19.687

这个问题有一个解决方案提出了 Mockito [How to test my servlet using JUnit](https://stackoverflow.com/questions/5434419/how-to-test-my-servlet-using-junit) 这将任务限制为简单的单元测试，而无需设置任何类似服务器的环境。

# hosting - Reliable and performant cheap (ish) hosting for ASP.NET 3.5 and mysql

> ID：90913
> 
> 赞同：3
> 
> 时间：2008-09-18T08:22:49.843
> 
> 标签：hosting, asp.net-2.0, web-hosting, shared-hosting

I'm looking for someone reasonably cheap but better than the majority of budget hosts out there. I'm currently with brinkster.net and I've become increasingly annoyed at the their immense unreliability and low available resources.

Fasthosts business plan is close, but has no mysql, only has ASP.NET 2.0 and is maybe slightly more expensive than I was hoping for.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-03T04:12:09.130

我在[http://discountasp.net](http://discountasp.net)上托管了几个站点，并且取得了非常好的结果。他们在 asp.netPRO 读者选择调查中被评为最佳 ASP.NET 主机的第 4 年。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T08:28:28.627

I have had great luck with [Viux.com](http://hsp.viux.com/redirector.cgi/ID,4f9bb71080) - their customer service is top-notch and they were quick to implement asp.net 3.5\. I moved all my sites (5) to Viux now and couldn't be happier. Very reliable and I can't say enough about their super fast and friendly service! MySQL comes free with all of their plans and MSSQL is $2/month.

I have tried quite a few hosts, and these guys are my favorite. If you decide on another, just make sure it is not M6.net, their customer service was just horrendous!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-03T12:05:42.683

[GoDaddy](http://godaddy.com/)在其基本托管包上支持 .NET 3.5 和 mysql。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-03T14:40:24.603

我们已经在我的主要工作（日常工作:-) 中使用了 GoDaddy 几年，并且对他们有过积极的体验（我最近也将我的家庭企业从 Yahoo! Small Business 切换到了 GoDaddy）。

关于可靠性，我没有遇到任何停机问题。因此，我没有使用 GoDaddy 的第一手技术支持经验，但从我在板上阅读的内容来看，他们的技术支持非常好（与我猜的任何其他技术支持相比）。他们提供 LINUX 和 Windows 托管（如果这对您很重要）、MySQL 和 MSSQL 数据库支持以及 .NET 3.5/AJAX。

就我而言，价格合理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T13:22:42.373

我和这些家伙在一起已经有一段时间了， [http://www.webhost4life.com/](http://www.webhost4life.com/)
便宜又开朗。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-03T13:28:03.813

您可能会感兴趣——ScottGu 的最新博客文章提到亚马逊的 EC2 将支持 ASP.NET。

[http://aws.typepad.com/aws/2008/10/coming-soon-ama.html](http://aws.typepad.com/aws/2008/10/coming-soon-ama.html)

根据您的计划，这可能会很有趣。它通常也很便宜。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-03T13:32:31.743

Dreamhost 支持 stackoverflow 的播客

[http://www.dreamhost.com/](http://www.dreamhost.com/)

编辑：看起来他们不支持 ASP.NET，但这是出乎意料的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-08-06T06:19:10.193

看看[ReliableSite.Net](http://payments.reliablesite.net/aff.php?aff=026)

它既便宜又好。他们甚至抛出了一个免费的 MS SQL 2005 数据库（1 GB-额外数据库成本 1 美元），而其他地方每月收费 10 美元，并给你不到 500MB 的空间。

所以你可以升级到 mssql 2005（不确定你是否只使用 mysql，因为它更便宜）。

如果您不想费心更改为 mssql 2005，那么您可以将其保存到另一个项目（您可以在 Reliable 上托管无限域）并使用他们也免费提供的 mysql 数据库。

我发现 Reliable 不会因为每一件事而使您变得黯淡无光，并且提供合理的价格并提供很棒的优惠券。

喜欢这张终身 15% 折扣的优惠券：“aspforum”

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-01-29T09:59:29.480

Planet Small Business [http://www.planetsmb.com/](http://www.planetsmb.com/)非常便宜，并且有出色的客户服务。

我遇到的唯一麻烦是托管 WCF 服务。我无法将它作为本地 ASP.Net 服务托管，您必须做一些额外的工作来手动添加服务主机，但没有什么不可能的，他们的客户支持已经准备好等待。

强烈推荐。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-21T09:24:10.260

我使用 SmarterAsp.net 托管多个站点；他们有很好的控制面板，价格从每月 2.95 美元起，您还可以获得 60 天免费试用，因此您可以决定它是否适合您 [http://www.SmarterASP.NET/index?r=100819197](http://www.SmarterASP.NET/index?r=100819197)

# visual-studio - Advantages of VS 2008 over VS 2005

> ID：90918
> 
> 赞同：2
> 
> 时间：2008-09-18T08:23:21.417
> 
> 标签：visual-studio, ide

Could somebody please name a few. I could given time, but this is for somebody else, and I'd also like some community input.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T08:37:31.023

Personally I would say one of the biggest advantages I have found is the product responds quicker i.e. opens faster, compiles and runs projects faster. In my mind why wouldn't you upgrade for this benefit alone.

Because of the environment that I work in I am restricted to .NET 2.0 so have not been able to take advantages of the many other features of multi targeting etc.

However for the ASP.NET work I have done the split view and CSS support is great. Certainly that is the one area I have noticed the biggest functional improvement from VS2005 to VS2008\. With CSS you still need to but in the effort to understand it but why not get as much help as possible from the IDE as well.

Overall I have found it to be a very easy transition so I can't think of a reason not to upgrade.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T08:28:51.280

Well, it supports .NET 3.5, which offers a lot of new features - it depends on whether you need them.

Other than that, they improved (also with SP1) the refactoring tool, compile speed, IntelliSense now works great with C# too, and you get the new C# compiler even when writing .NET 2.0 code. Also, ASP.NET designer performance has improved a lot.

In my opinion, even writing mostly .NET 2.0 code, I find it slightly better than 2005.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-18T08:30:59.510

One big feature is it lets you target different versions of the .NET runtime, depending on the project.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T08:31:22.833

If you're using The Microsoft Unit Testing framework, it's far better in 2008\. i.e. it's usable.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T08:44:32.647

Besides the usual support for latest versions of framework and integrated unit testing, i personally find out VS 2008 to be more stable, with better refactoring support and more mature (read stable) product than VS 2005.
I was using VS 2005 since it showed up on the market, until the first release of VS 2008, so i can tell the difference.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T08:28:21.140

Depends on your programming language.

*   On .net, the built-in support for .net 3.5 is obvious, although this is mainly project templates. However, SP1 adds .net Client Framework support, which is not possible within VS2005 to my knowledge.
*   This also means support for WPF with a XAML Designer, although most people still prefer Expression Blend for WPF Interfaces.
*   Apparantly, there is now a JavaScript Debugger, even though it's a [bit broken](http://weblogs.asp.net/kdente/archive/2007/11/27/is-the-visual-studio-2008-javascript-debugger-crippled.aspx) as it seems (not sure if SP1 fixes this)

In short: For .net 3.5, it's almost a must-have if you are a professional developer, but that is just my opinion.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-23T15:11:05.490

恕我直言，CSS 属性生成器要好得多。

# sql-server - SQL Server 2005 超过 2000 的优势

> ID：90920
> 
> 赞同：3
> 
> 时间：2008-09-18T08:24:12.040
> 
> 标签：sql-server, sql-server-2005, sql-server-2000

有人可以举几个。我可以给点时间，但这是给其他人的，我也想要一些社区意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-18T08:40:16.260

一些区别：

*   CLR (.NET) 存储过程
*   SSIS 代替 DTS
*   Management Studio代替Enterprise Manager，功能更多（2008版更好）
*   VS 集成
*   更好的复制
*   SMO 和 AMO（从应用程序处理服务器的扩展）
*   表和索引分区
*   XML 作为数据类型
*   XQuery 处理 XML 数据类型
*   服务经纪人
*   通知服务
*   分析服务
*   报告服务

我现在想到了这些。还有很多其他小的好东西，但我不能说出更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-18T08:44:52.147

此外，TSQL 中的公用表表达式和异常管理。很有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-18T08:53:25.103

有两点让我感觉好多了：

1 - 强大的 XML 支持。

2 - 分区表。不再有多个表和视图 - 只需定义您的分区模式，您就可以轻松管理 HUGE 表，性能大大提高。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-18T08:58:44.937

[快照隔离](http://msdn.microsoft.com/en-us/library/ms345124.aspx) 也称为读取器不阻止写入器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-18T14:32:52.933

数据类型 varchar(MAX)

> 在 SQL Server 2000 和 SQL Server 7 中，一行的大小不能超过 8000 字节……为了解决这个问题，微软在 SQL Server 2005 中引入了 VARCHAR(MAX)、NVARCHAR(MAX) 和 VARBINARY(MAX) 数据类型。这些数据类型可以容纳与 BLOB 可以容纳的相同数量的数据 (2 GB)，并且它们存储在用于其他数据类型的相同类型的数据页中。当 MAX 数据类型中的数据超过 8 KB 时，将使用溢出页面。

来自[http://www.teratrax.com/articles/varchar_max.html](http://www.teratrax.com/articles/varchar_max.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-18T08:31:10.260

CLR 存储过程支持

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-18T08:32:00.600

更好的集群/复制设施

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-18T08:47:14.090

Schemas - 好的，2000 有所有者，但他们可能很难获得正确的权限。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-22T19:50:13.017

非常重要的是 TRY CATCH 语句——SQL2005 支持这种语句，而 SQL2000 不支持。

样本：

```
BEGIN TRY
    -- Generate divide-by-zero error.
    SELECT 1/0;
END TRY
BEGIN CATCH
    -- Execute custom error retrieval routine.
END CATCH; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-18T08:35:33.963

这取决于您是在谈论数据库引擎还是整个产品。SQL Server 2000 没有分析服务和报告服务之类的东西。至于数据库引擎——如果你将它用于一个简单的应用程序，我认为你不应该打扰。另外，我认为 2005 年推出的 SQL Express 版本对于单人表演公司和调查/测试小型项目很有价值

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-18T08:39:47.710

SQL Express 具有比以前的 MSDE 产品更大的数据库容量（4Gb 与 2Gb），因此正如 Slavo 所说，它非常适合用于测试和小型应用程序。SQL Server 2005 是通过 Microsoft Update 更新的，这取决于您的观点是好是坏。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-23T22:10:50.067

PIVOT/UNPIVOT 运算符对我来说是一个巨大的胜利。

PIVOT 将基于行的输出旋转到列中，这对我们的许多报告需求有很大帮助。在 SQL 2005 之前，我们必须为 PIVOT 推出自己的函数。

# winapi - 如何找出应用程序占用了多少地址空间并将其报告给用户？

> ID：90940
> 
> 赞同：2
> 
> 时间：2008-09-18T08:26:37.370
> 
> 标签：winapi, memory, memory-management, memory-dump

我正在为一个应用程序编写内存管理器，作为一个由二十多名编码人员组成的团队的一员。我们的内存配额用完了，我们需要能够看到发生了什么，因为我们似乎只使用了大约 700Mb。我需要能够报告它的去向——碎片化等。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-18T08:58:41.410

您可以为此使用现有的内存调试工具，我发现 Memory Validator [1](http://www.vmvalidator.com/cpp/memory/index.html "内存验证器")非常有用，它能够跟踪 API 级别（堆、新...）和操作系统级别（虚拟内存）分配并显示虚拟内存映射。

我也发现非常有用的另一个选项是能够基于 VirtualQuery 函数转储整个虚拟空间的地图。我的代码如下所示：

```
void PrintVMMap()
{
  size_t start = 0;
  // TODO: make portable - not compatible with /3GB, 64b OS or 64b app
  size_t end = 1U<<31; // map 32b user space only - kernel space not accessible
  SYSTEM_INFO si;
  GetSystemInfo(&si);
  size_t pageSize = si.dwPageSize;
  size_t longestFreeApp = 0;

  int index=0;
  for (size_t addr = start; addr<end; )
  {
    MEMORY_BASIC_INFORMATION buffer;
    SIZE_T retSize = VirtualQuery((void *)addr,&buffer,sizeof(buffer));
    if (retSize==sizeof(buffer) && buffer.RegionSize>0)
    {
      // dump information about this region
      printf(.... some buffer information here ....);
      // track longest feee region - usefull fragmentation indicator
      if (buffer.State&MEM_FREE)
      {
        if (buffer.RegionSize>longestFreeApp) longestFreeApp = buffer.RegionSize;
      }
      addr += buffer.RegionSize;
      index+= buffer.RegionSize/pageSize;
    }
    else
    {
      // always proceed
      addr += pageSize;
      index++;
    }
  }
  printf("Longest free VM region: %d",longestFreeApp);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T14:26:35.180

您还可以从 Tool Help API 中找到有关 Heap32ListFirst/Heap32ListNext 进程中的堆的信息，以及有关使用 Module32First/Module32Next 加载的模块的信息。

“工具帮助”起源于 Windows 9x。Windows NT 上的原始进程信息 API 是 PSAPI，它提供的功能部分（但不完全）与工具帮助重叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T09:22:56.850

我们的（巨大的）应用程序（一个 Win32 游戏）最近开始抛出“配额不足”异常，我负责找出所有内存的去向。这不是一项简单的工作——这个问题和[这个](https://stackoverflow.com/questions/84234/is-there-a-single-resource-which-explains-windows-memory-thoroughly)问题是我第一次尝试找出答案。堆行为是出乎意料的，准确跟踪您使用了多少配额以及有多少可用配额迄今为止被证明是不可能的。事实上，无论如何，它并不是特别有用的信息——“配额”和“放东西的地方”是微妙而令人讨厌的不同概念。尽管枚举堆和模块也很方便，但公认的答案是最好的。我使用MS 的[DebugDiag](http://www.microsoft.com/downloads/details.aspx?familyid=28bd5941-c458-46f1-b24d-f60151d875a3&displaylang=en)来查看情况的真正可怕之处，

# cakephp - 如何在 CakePHP 中使用 TranslateBehavior？

> ID：90949
> 
> 赞同：4
> 
> 时间：2008-09-18T08:28:29.610
> 
> 标签：cakephp, behavior

cakephp.org 上没有文档，我在谷歌上也找不到。请链接我一些文档或提供一个！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-19T09:11:39.687

翻译行为是 CakePHP 的另一个非常有用但文档很少的特性。我已经按照以下思路在多语言网站中实现了几次，并取得了相当大的成功。

首先，翻译行为只会使您网站的数据库内容国际化。如果你有更多的静态内容，你会想看看 Cake 的`__('string')`包装函数和（[这里](https://stackoverflow.com/questions/39562/how-do-you-build-a-multi-language-web-site#41379)`gettext`有一些有用的信息）

假设我们要使用以下数据库表翻译内容：

```
CREATE TABLE `contents` (
    `id` int(11) unsigned NOT NULL auto_increment,
    `title` varchar(255) default NULL,
    `body` text,
  PRIMARY KEY  (`id`),
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

content.php 模型有：

```
var $actsAs = array('Translate' => array('title'   => 'titleTranslation',
                     'body'    => 'bodyTranslation'
                     )); 
```

在其定义中。然后，您需要将 i18n 表添加到数据库中：

```
CREATE TABLE `i18n` (
  `id` int(10) NOT NULL auto_increment,
  `locale` varchar(6) NOT NULL,
  `model` varchar(255) NOT NULL,
  `foreign_key` int(10) NOT NULL,
  `field` varchar(255) NOT NULL,
  `content` mediumtext,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

然后，当您将数据保存到控制器中的数据库时，将语言环境设置为您想要的语言（此示例适用于波兰语）：

```
$this->Content->locale = 'pol';
$result = $this->Content->save($this->data); 
```

这将在 i18n 表中为 pol 语言环境的标题和正文字段创建条目。查找将根据用户浏览器中设置的当前语言环境进行查找，返回如下数组：

```
[Content]
  [id]
  [titleTranslation]
  [bodyTranslation] 
```

我们使用优秀的[p28n 组件](http://bakery.cakephp.org/articles/view/p28n-the-top-to-bottom-persistent-internationalization-tutorial)来实现一个语言切换解决方案，该解决方案与 gettext 和 translate 行为配合得非常好。

这不是一个完美的系统——因为它会即时创建 HABTM 关系，它可能会导致您可能手动创建的其他关系出现一些问题，但如果您小心，它可以很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T07:02:05.217

对于任何搜索相同内容的人，cakephp 更新了他们的文档。对于翻译行为去[这里..](http://book.cakephp.org/2.0/en/core-libraries/behaviors/translate.html)

# wpf - 如何使用 INotifyPropertyChanged 更新数组绑定？

> ID：90971
> 
> 赞同：14
> 
> 时间：2008-09-18T08:36:28.093
> 
> 标签：wpf

假设我有一堂课：

```
class Foo
{
  public string Bar
  {
    get { ... }
  }

  public string this[int index]
  {
    get { ... }
  }
} 
```

我可以使用“{Binding Path=Bar}”和“{Binding Path=[x]}”绑定到这两个属性。美好的。

现在假设我要实现 INotifyPropertyChanged：

```
class Foo : INotifyPropertyChanged
{
  public string Bar
  {
    get { ... }
    set
    {
      ...

      if( PropertyChanged != null )
      {
        PropertyChanged( this, new PropertyChangedEventArgs( "Bar" ) );
      }
    }
  }

  public string this[int index]
  {
    get { ... }
    set
    {
      ...

      if( PropertyChanged != null )
      {
        PropertyChanged( this, new PropertyChangedEventArgs( "????" ) );
      }
    }
  }

  public event PropertyChangedEventHandler PropertyChanged;
} 
```

标记的部分中有什么？？？？（我试过 string.Format("[{0}]", index) 但它不起作用）。这是 WPF 中的错误，是否有替代语法，或者仅仅是 INotifyPropertyChanged 不如普通绑定强大？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-18T09:06:09.940

感谢 Cameron 的建议，我找到了正确的语法，即：

```
Item[] 
```

它会更新绑定到该索引属性的所有内容（所有索引值）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T14:12:27.740

在代码中避免使用字符串，您可以使用常量`Binding.IndexerName`，它实际上是`"Item[]"`

```
new PropertyChangedEventArgs(Binding.IndexerName) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-28T16:22:53.583

```
PropertyChanged( this, new PropertyChangedEventArgs( "Item[]" ) ) 
```

对于所有索引和

```
PropertyChanged( this, new PropertyChangedEventArgs( "Item[" + index + "]" ) ) 
```

对于单个项目

问候，杰罗德

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-18T08:49:44.163

不确定这是否可行，但反射器显示索引属性的 get 和 set 方法称为 get_Item 和 set_Item。也许你可以试试 Item 看看是否可行。

# c# - 您可以在 Windsor Container 中注册一个类型的现有实例吗？

> ID：90976
> 
> 赞同：12
> 
> 时间：2008-09-18T08:38:21.663
> 
> 标签：c#, .net, vb.net, inversion-of-control, castle-windsor

在 Windsor IOC 容器中是否可以注册我已经获得实例的类型，而不是让容器创建它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-18T08:49:34.333

Container 的 Kernel 属性上有一个 AddComponentInstance 方法。

从单元测试：

```
[Test]
public void AddComponentInstance()
{
    CustomerImpl customer = new CustomerImpl();

    kernel.AddComponentInstance("key", typeof(ICustomer), customer);
    Assert.IsTrue(kernel.HasComponent("key"));

    CustomerImpl customer2 = kernel["key"] as CustomerImpl;
    Assert.AreSame(customer, customer2);

    customer2 = kernel[typeof(ICustomer)] as CustomerImpl;
    Assert.AreSame(customer, customer2);
}

[Test]
public void AddComponentInstance_ByService()
{
    CustomerImpl customer = new CustomerImpl();

    kernel.AddComponentInstance <ICustomer>(customer);
    Assert.AreSame(kernel[typeof(ICustomer)],customer);
}

[Test]
public void AddComponentInstance2()
{
    CustomerImpl customer = new CustomerImpl();

    kernel.AddComponentInstance("key", customer);
    Assert.IsTrue(kernel.HasComponent("key"));

    CustomerImpl customer2 = kernel["key"] as CustomerImpl;
    Assert.AreSame(customer, customer2);

    customer2 = kernel[typeof(CustomerImpl)] as CustomerImpl;
    Assert.AreSame(customer, customer2);
} 
```

# emacs - Emacs Lisp 中的替换字符？

> ID：90977
> 
> 赞同：6
> 
> 时间：2008-09-18T08:38:40.990
> 
> 标签：emacs, elisp

Emacs Lisp 有`replace-string`但没有`replace-char`. 我想用常规的 ASCII 引号替换“印刷”大引号（这个字符的 Emacs 代码是十六进制 53979），我可以这样做：

```
(replace-string (make-string 1 ?\x53979) "'") 
```

我认为它会更好`replace-char`。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-07-06T19:39:01.113

这是我在 elisp 中替换字符的方式：

```
(subst-char-in-string ?' ?’ "John's") 
```

给出：

```
"John’s" 
```

请注意，此函数不接受字符作为字符串。第一个和第二个参数必须是文字字符（使用`?`符号或`string-to-char`）。

`inplace`另请注意，如果可选参数为非零，则此函数可能具有破坏性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-18T21:37:44.690

为什么不直接使用

```
(replace-string "\x53979" "'") 
```

或者

```
(while (search-forward "\x53979" nil t)
    (replace-match "'" nil t)) 
```

按照替换字符串的文档中的建议？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T08:55:04.413

> 使用替换字符肯定会更好。有什么方法可以改进我的代码？

它真的慢到重要的程度吗？我的 elisp 通常效率低得可笑，我从来没有注意到。（不过，我只将它用于编辑器工具，如果您正在使用它构建下一个 MS 实时搜索，则为 YMMV。）

另外，阅读文档：

```
This function is usually the wrong thing to use in a Lisp program.
What you probably want is a loop like this:
  (while (search-forward "’" nil t)
    (replace-match "'" nil t)) 
```

这个答案现在可能是 GPL 许可的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-27T14:12:23.150

那这个呢

```
(defun my-replace-smart-quotes (beg end)
  "replaces ’ (the curly typographical quote, unicode hexa 2019) to ' (ordinary ascii quote)."
  (interactive "r")
  (save-excursion
    (format-replace-strings '(("\x2019" . "'")) nil beg end))) 
```

一旦你在你的 dotmacs 中有了它，你可以将 elisp 示例代码（来自博客等）粘贴到你的暂存缓冲区，然后立即按 CM-\ （正确缩进），然后按 Mx my-replace-smart-quotes （修复智能引号），最后是 Cx Ce（运行它）。

我发现大引号总是 hexa 2019，你确定它是 53979 吗？您可以使用 Cu Cx = 检查缓冲区中的字符。

我认为您可以在 my-replace-smart-quotes 的定义中用 "'" 代替 "\x2019" 并且没问题。这只是为了安全起见。

# php - PHP中的多重继承

> ID：90982
> 
> 赞同：99
> 
> 时间：2008-09-18T08:40:19.317
> 
> 标签：php, oop, inheritance

我正在寻找一种好的、干净的方法来解决 PHP5 仍然不支持多重继承这一事实。这是类层次结构：

Message
-- TextMessage
-------- InvitationTextMessage
-- EmailMessage
-------- InvitationEmailMessage

这两种类型的 Invitation* 课程有很多共同点；我很想有一个共同的父类，邀请，他们都会继承。不幸的是，它们与当前的祖先也有很多共同点……TextMessage 和EmailMessage。这里是多重继承的经典愿望。

解决问题的最轻量级方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2008-09-18T09:53:48.843

亚历克斯，大多数时候你需要多重继承是一个信号，你的对象结构有些不正确。在您概述的情况下，我认为您的班级责任过于广泛。如果消息是应用程序业务模型的一部分，它不应该关心渲染输出。相反，您可以分担责任并使用 MessageDispatcher 发送使用文本或 html 后端传递的消息。我不知道你的代码，但让我这样模拟它：

```
$m = new Message();
$m->type = 'text/html';
$m->from = 'John Doe <jdoe@yahoo.com>';
$m->to = 'Random Hacker <rh@gmail.com>';
$m->subject = 'Invitation email';
$m->importBody('invitation.html');

$d = new MessageDispatcher();
$d->dispatch($m); 
```

通过这种方式，您可以为 Message 类添加一些专业化：

```
$htmlIM = new InvitationHTMLMessage(); // html type, subject and body configuration in constructor
$textIM = new InvitationTextMessage(); // text type, subject and body configuration in constructor

$d = new MessageDispatcher();
$d->dispatch($htmlIM);
$d->dispatch($textIM); 
```

`type`请注意，MessageDispatcher 将根据传递的 Message 对象中的属性来决定是作为 HTML 还是纯文本发送。

```
// in MessageDispatcher class
public function dispatch(Message $m) {
    if ($m->type == 'text/plain') {
        $this->sendAsText($m);
    } elseif ($m->type == 'text/html') {
        $this->sendAsHTML($m);
    } else {
        throw new Exception("MIME type {$m->type} not supported");
    }
} 
```

总而言之，责任分为两个类。消息配置在 InvitationHTMLMessage/InvitationTextMessage 类中完成，发送算法委托给 Dispatcher。这称为策略模式，您可以在[此处](https://web.archive.org/web/20190613203216/https://www.dofactory.com/net/strategy-design-pattern)阅读更多信息。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-09-18T08:45:27.790

也许您可以用“has-a”关系替换“is-a”关系？邀请可能有一条消息，但它不一定需要“is-a”消息。Invitation fe 可能会被确认，这与 Message 模型不匹配。

如果您需要了解更多信息，请搜索“组合与继承”。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-03-22T07:15:58.597

[如果我可以在这个线程](https://stackoverflow.com/questions/7762883/does-anyone-know-how-can-i-extends-2-classes-in-the-class-in-php)中引用菲尔......

> PHP 和 Java 一样，不支持多重继承。
> 
> PHP 5.4 中的[**特性**](https://secure.php.net/manual/en/language.oop5.traits.php)将试图为这个问题提供解决方案。
> 
> 与此同时，你最好重新考虑你的班级设计。如果您希望为您的类提供扩展 API，则可以实现多个接口。

还有克里斯……

> PHP 并不真正支持多重继承，但有一些（有些混乱）的方式来实现它。查看此 URL 以获取一些示例：
> 
> [http://www.jasny.net/articles/how-i-php-multiple-inheritance/](http://www.jasny.net/articles/how-i-php-multiple-inheritance/)

认为他们都有有用的链接。迫不及待地想尝试一些特征或者一些混合...

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-18T08:43:24.770

Symfony 框架[为此提供了一个 mixin 插件](https://symfony.com/legacy/doc/gentle-introduction/1_4/en/17-Extending-Symfony)，您可能想检查一下——即使只是为了想法，如果不使用它的话。

“设计模式”的答案是将共享功能抽象为一个单独的组件，并在运行时组合。考虑一种方法将 Invitation 功能抽象为一个类，该类以某种方式与您的 Message 类相关联，而不是继承。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-15T12:02:11.673

我正在使用 PHP 5.4 中的特征作为解决此问题的方法。 [http://php.net/manual/en/language.oop5.traits.php](http://php.net/manual/en/language.oop5.traits.php)

这允许使用扩展进行经典继承，但也可以将通用功能和属性放入“特征”中。正如手册所说：

> Traits 是一种在 PHP 等单继承语言中重用代码的机制。Trait 旨在通过使开发人员能够在生活在不同类层次结构中的多个独立类中自由地重用方法集来减少单继承的一些限制。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-18T08:43:10.060

听起来[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)可能很合适，但如果没有更多细节就很难说。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-10-20T07:52:24.523

这既是一个问题，也是一个解决方案......

神奇的 _ *call() 怎么样，*_get()、__set() 方法？我还没有测试过这个解决方案，但是如果你创建一个 multiInherit 类会怎样。子类中的受保护变量可以包含要继承的类数组。多接口类中的构造函数可以创建每个被继承的类的实例，并将它们链接到私有属性，比如_ext。__call() 方法可以对 _ext 数组中的每个类使用 method_exists() 函数来定位要调用的正确方法。__get() 和 __set 可用于定位内部属性，或者如果您是具有引用的专家，您可以使子类和继承类的属性成为对相同数据的引用。对象的多重继承对于使用这些对象的代码是透明的。还，只要 _ext 数组按类名索引，内部对象就可以在需要时直接访问继承的对象。我已经设想过创建这个超类，但还没有实现它，因为我觉得如果它有效，可能会导致养成一些不同的不良编程习惯。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-18T14:13:19.453

我有几个问题要问以澄清你在做什么：

1) 您的消息对象是否*只*包含一条消息，例如正文、收件人、安排时间？2) 你打算用你的邀请对象做什么？与 EmailMessage 相比，它是否需要特别对待？3）如果是这样，它有什么特别之处？4）如果是这样的话，为什么消息类型需要对邀请进行不同的处理？5) 如果您想发送欢迎消息或 OK 消息怎么办？它们也是新对象吗？

听起来您确实在尝试将过多的功能组合到一组对象中，这些对象应该只关心保存消息内容 - 而不是应该如何处理它。对我来说，你看，邀请或标准消息之间没有区别。如果邀请需要特殊处理，那么这意味着应用程序逻辑而不是消息类型。

例如：我构建的一个系统有一个共享的基本消息对象，该对象扩展为 SMS、Email 和其他消息类型。但是：这些没有进一步扩展 - 邀请消息只是通过电子邮件类型的消息发送的预定义文本。一个特定的邀请应用程序将关注邀请的验证和其他要求。毕竟，您要做的就是将消息 X 发送给接收者 Y，接收者 Y 本身应该是一个离散系统。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-18T08:45:27.230

像Java一样的问题。尝试使用带有抽象函数的接口来解决该问题

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-18T08:47:54.400

PHP 确实支持接口。这可能是一个不错的选择，具体取决于您的用例。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-05-23T21:02:12.567

在 Message 类下面的 Invitation 类怎么样？

所以层次结构是：

Message
--- Invitation
------ TextMessage
------ EmailMessage

在 Invitation 类中，添加 InvitationTextMessage 和 InvitationEmailMessage 中的功能。

我知道邀请并不是真正的消息类型，它更像是消息的一种功能。所以我不确定这是否是好的 OO 设计。

# eclipse - Eclipse 3.3.2/MyEclipse doesn't recognize xml as ant files

> ID：90988
> 
> 赞同：2
> 
> 时间：2008-09-18T08:41:41.827
> 
> 标签：eclipse, ant

Using eclipse 3.3.2 with MyEclipse installed. For some reason if a file isn't called build.xml then it isnt' recognised as an ant file. The file association for *.xml includes ant and says "locked by 'Ant Buildfile' content type.

The run-as menu is broken. Even if the editor association works run-as doesn't.

The ant buildfiles in question are correctly formatted. They work fine if you call them build.xml or if you use them anywhere else. Eclipse just won't recognise and thus wont allow you to run them.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-18T10:46:07.190

环境检查文件内容以确定它是否是 Ant 文件（如果它不称为“build.xml”）。将以下内容添加到 XML 文件中：

```
<?xml version="1.0" encoding="UTF-8"?>

<project name="myproject" default="t1">
    <target name="t1"></target>
</project> 
```

现在，当您右键单击文件时，您应该会在“打开方式 >”菜单中看到“Ant 编辑器”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-06T17:29:32.647

我遇到了类似的问题，发现我下载的 Eclipse 二进制文件中没有包含 Ant Tools。您可以尝试安装 Eclipse Java 开发工具。这些可以在帮助 > 软件更新 > 可用软件中的 Java 开发 > Eclipse Java 开发工具下找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T09:58:10.190

如果您打开“文件关联”页面（窗口 -> 首选项 -> 常规 -> 编辑器 -> 文件关联），您应该会看到 Eclipse 识别的所有文件类型的列表。向下滚动到“*.xml”条目，在“Associated Editors”窗格中突出显示“Ant Editor”，然后点击右侧的“Default”按钮。Eclipse 现在应该使用 ant 编辑器打开任何 XML 文件。

# .net - 如何以相反的顺序迭代 .Net IList 集合？

> ID：90996
> 
> 赞同：5
> 
> 时间：2008-09-18T08:44:15.953
> 
> 标签：.net, collections, iteration

我有一个包含项目的 IList（首先是父项），它们需要以相反的顺序添加到图表文档中，以便最后添加父项，绘制在顶部，以便用户首先选择它。

最好的方法是什么？比我现在在下面发布的更好/更优雅的东西..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-18T08:55:07.567

如果您有 .NET 3.5，您可以使用 LINQ 的 Reverse？

```
foreach(var item in obEvtArgs.NewItems.Reverse())
{
   ...
} 
```

（假设您在谈论通用 IList）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T17:24:25.537

根据对[Davy 的回答](https://stackoverflow.com/questions/90996?sort=votes#91044)和[Gishu 的原始回答](https://stackoverflow.com/questions/90996?sort=votes#90998)的评论，您可以使用扩展方法将弱类型`System.Collections.IList`转换为通用集合：`System.Linq.Enumerable.Cast`

```
var reversedCollection = obEvtArgs.NewItems
  .Cast<IMySpecificObject>( )
  .Reverse( ); 
```

这消除了反向`for`循环的噪音，以及`as`从原始集合中获取强类型对象的强制转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T08:44:48.370

NewItems 是我的列表......不过这有点笨拙。

```
for(int iLooper = obEvtArgs.NewItems.Count-1; iLooper >= 0; iLooper--)
            {
                GoViewBoy.Document.Add(CreateNodeFor(obEvtArgs.NewItems[iLooper] as IMySpecificObject, obNextPos));
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-25T14:21:11.047

您不需要 LINQ：

```
var reversed = new List<T>(original); // assuming original has type IList<T>
reversed.Reverse();
foreach (T e in reversed) {
  ...
} 
```*********