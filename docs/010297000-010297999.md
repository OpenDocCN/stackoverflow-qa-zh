# StackOverflow 问答 10297000-10297999

# css - 框架 CSS "windows 95" 喜欢

> ID：10297000
> 
> 赞同：6
> 
> 时间：2012-04-24T11:31:32.953
> 
> 标签：css, windows

我们有一个客户在 Visual Studio 下构建他的模型，他希望 Web 应用程序看起来和他的 Windows 应用程序一样。

当我看到这些模型时，我的眼睛一直在流血，但是，**是否有足够疯狂的人创建了一个看起来像窗口窗体和按钮的 Css 框架**？

谢谢

![当心你的眼睛可能会流血](../Images/aeebc1173f63d7af5bdb35e9c7b21097.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:34:20.660

这是一个用 CSS 制作的模拟[Win95 桌面。](http://websitesthatmarket.com/win95/)这可能会有所帮助。

# powershell - 使用 powershell 将空参数传递给可执行文件

> ID：10297002
> 
> 赞同：18
> 
> 时间：2012-04-24T11:31:39.647
> 
> 标签：powershell, command-line

传递给命令时，Powershell 似乎删除了空字符串参数。我有这个代码

```
PS D:\> $b.name = "foo bar"
PS D:\> ./echoargs $b.name
Arg 0 is D:\echoargs.exe
Arg 1 is foo bar
PS D:\> $b.name = ""
PS D:\> ./echoargs $b.name
Arg 0 is D:\echoargs.exe 
```

您可以假设 $b 有一个 'name' 成员。即使值为空字符串，我如何将其作为参数传递给 exe。我试过使用呼叫操作员但没有成功。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T15:51:15.790

如果您希望出现一个空字符串，请尝试在参数周围使用转义引号，如下所示：

```
PS> $b = [psobject]@{name = ''}
PS> echoargs `"$($b.Name)`"
Arg 0 is <>

Command line:
"C:\Users\Keith\Pscx\Trunk\Src\Pscx\bin\Release\Apps\EchoArgs.exe"  "" 
```

请注意，我在 V3 上对此进行了测试，因此我不确定 V2 上的行为是否完全相同。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-24T11:49:00.087

尝试传递用双引号括起来的空单引号字符串，反之亦然。

```
./echoargs $b.name, "''" 
```

或者

```
./echoargs $b.name, '""' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-07T11:25:22.907

这也应该有效：

```
./echoargs [String]::Empty 
```

# c# - 如何使用 asp.net 在树视图中获取父节点的最后一个子节点？

> ID：10297008
> 
> 赞同：0
> 
> 时间：2012-04-24T11:32:10.780
> 
> 标签：c#, asp.net, asp.net-mvc, c#-4.0

我在 asp.net 中创建了树视图。我想获取当前选定父节点的最后一个子节点。

请指导我摆脱这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:22:52.830

使用此代码获取当前选定节点中的最后一个子节点：

```
 TreeNode t=TreeView1.SelectedNode.ChildNodes[TreeView1.SelectedNode.ChildNodes.Count - 1]; 
```

希望这对您有所帮助。

# proxy - SOCKS5 连接超时 (GCDAsyncSocket)。（OpenFire、XEP-0065 和 iOS XMPPFramework）

> ID：10297009
> 
> 赞同：2
> 
> 时间：2012-04-24T11:32:19.533
> 
> 标签：proxy, xmpp, openfire, socks, gcdasyncsocket

**问题**：我正在尝试使用 iOS XMPPFramework 和 OpenFire 服务器的 TURNSocket (XEP-0065 - SOCKS5)。我希望能够发送和接收文件。但是，在大多数情况下，接收方没有返回任何响应。我目前怀疑问题与 OpenFire 代理服务器有关，它超时了！这是在本地网络上设置的，我已经编辑了 hosts 文件以指向它。

**注意**：我的代码基础来自以下教程：http: [//mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/)

**XML 和错误**：发件人发送以下 XML（在来回发送一些其他 XEP-0065 XML 帖子之后）...

```
<iq type="set" 
    to="friendsUsername@beta.myCompany.co.uk/spark" 
    id="DD96A581-BFA3-47BC-A3C0-D26AD48D7442">
    <query xmlns="http://jabber.org/protocol/bytestreams" 
        sid="DD96A581-BFA3-47BC-A3C0-D26AD48D7442" 
        mode="tcp">
        <streamhost xmlns="http://jabber.org/protocol/bytestreams"
            jid="proxy.beta.myCompany.co.uk" 
            host="127.0.1.1"
            port="7777"/>
    </query>
</iq> 
```

如果我与我的应用程序的另一个实例聊天，我在尝试使用 proxy.beta.myCompany.co.uk 时在收件人中收到以下错误

> 错误域 = GCDAsyncSocketErrorDomain 代码 = 3“尝试连接到主机超时”

所以我的主要问题是，为什么它会超时？

**额外信息**：如果我在我的应用程序的一个实例和 Adium IM 聊天客户端之间进行聊天，我没有得到任何回应。但是，如果我与 Spark IM 聊天客户端聊天，我会收到以下响应...

```
<iq xmlns="jabber:client" 
    id="9A34F268-9FC9-44F8-9662-4651A9E0B633" 
    to="myUsername@beta.myCompany.co.uk/d04f6694" 
    from="friendsUsername@beta.myCompany.co.uk/Spark 2.6.3" 
    type="error">
        <query xmlns="http://jabber.org/protocol/bytestreams"
            sid="9A34F268-9FC9-44F8-9662-4651A9E0B633"
            mode="tcp">
            <streamhost jid="proxy.beta.myCompany.co.uk" 
            host="127.0.1.1" 
            port="7777"/>
        </query>
    <error code="406" 
        type="MODIFY">
            <not-acceptable xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/>
    </error>
</iq> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:24:33.170

在 OpenFire 上，我需要使用“xmpp.proxy.externalip”的系统属性设置代理的 ip。

# php - simple_html_dom 和 Net_URL2 规范化相对路径

> ID：10297032
> 
> 赞同：1
> 
> 时间：2012-04-24T11:34:06.697
> 
> 标签：php, relative-path, simple-html-dom

我正在尝试使用[simple_html_dom](http://simplehtmldom.sourceforge.net/)和[Net_URL2](http://pear.php.net/package/Net_URL2/)将相对路径标准化为完整网址，这样的路径`src="/my_path"`由这样的脚本标准化，但[这样](https://stackoverflow.com/questions/4419528/change-relative-path-to-full-in-css)的路径：`src="my_path"`不是！如何标准化这样的路径？

例子：

```
$uri = new Net_URL2("http://test.com");
print $uri->resolve('/my_path') . "\n"; // works
print $uri->resolve('my_path') . "\n";  // doesn't work! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:27:25.010

您描述的是 Net_URL2 中的一个已知错误：http://pear.php.net/bugs/bug.php?id= [19176](http://pear.php.net/bugs/bug.php?id=19176)

该票有修复它的补丁，但它尚未在梨包本身中修复。修补：

```
Index: Net/URL2.php
===================================================================
--- Net/URL2.php    (revision 323857)
+++ Net/URL2.php    (revision )
@@ -720,7 +720,7 @@
                     } else {
                         // Merge paths (RFC 3986, section 5.2.3)
                         if ($this->_host !== false && $this->_path == '') {
-                            $target->_path = '/' . $this->_path;
+                            $target->_path = '/' . $reference->_path;
                         } else {
                             $i = strrpos($this->_path, '/');
                             if ($i !== false) { 
```

# javascript - data-dojo-props 中正则表达式的格式是什么？

> ID：10297033
> 
> 赞同：3
> 
> 时间：2012-04-24T11:34:13.013
> 
> 标签：javascript, regex, dojo

什么是正则表达式的格式，因为`...data-dojo-props='regExp:...`我看到这个表达式很好`... data-dojo-props="regExp:'[\\w]+',...`。但这对于非常简单的一个。如果表达式很复杂怎么办

```
^[a-zA-Z]+(([\'\,\.\- ][a-zA-Z ])?[a-zA-Z]*)*$ 
```

或者

```
^(\+|00)\d{2,3}-\d{1,2}-\d{3}-\d{4}$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:07:54.903

我不声称自己是正则表达式专家，但我发现以下工作。与您最初发布的唯一变化是逗号不需要转义。这是正确的验证吗？

```
<input 
  data-dojo-type="dijit.form.ValidationTextBox"
  data-dojo-props="regExp: '^[a-zA-Z]+(([\',\.-][a-zA-Z ])?[a-zA-Z]*)*$'" 
  value="" name="name" id="name"> 
```

# javascript - 如何以编程方式关闭 wordpress 中的 tinymce 对话框？

> ID：10297034
> 
> 赞同：5
> 
> 时间：2012-04-24T11:34:16.940
> 
> 标签：javascript, wordpress, tinymce

如果我在 Javascript 控制台中输入： tinyMCEPopup.close();

它返回：TypeError：无法读取未定义的属性“windowManager”

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-26T19:22:11.560

在弹出窗口中，我调用以下命令：

```
parent.tinyMCE.activeEditor.windowManager.close(window); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:40:18.057

尝试：

```
 win.ed.windowManager.close(this);
//where
//win is parent window
//ed is tinyMCE object 
```

希望能帮助到你

# windows-phone-7 - ImageryService 未处理的超时异常

> ID：10297035
> 
> 赞同：0
> 
> 时间：2012-04-24T11:34:17.680
> 
> 标签：windows-phone-7, bing-maps, timeoutexception

我正在使用图像服务从 bing 地图中获取图像，并且有时我的应用程序会无缘无故地退出，我发现这是因为图像服务没有处理 mapuri 请求超时。

获取图像：

```
 public static void GetBingMapImage(double longitude, double latitude, Size size, int zoomLevel, ImageryServiceParams imageResponseCallback)
    {
        var mapUriRequest = new MapUriRequest();
        var location = new GeocodeLocation { Latitude = latitude, Longitude = longitude };

        // Set credentials using a valid Bing Maps key
        mapUriRequest.Credentials = new Credentials();
        mapUriRequest.Credentials.ApplicationId = BingMapsKey;

        // Set the location of the requested image
        mapUriRequest.Center = new GeocodeLocation();
        mapUriRequest.Center.Latitude = location.Latitude;
        mapUriRequest.Center.Longitude = location.Longitude;

        mapUriRequest.Pushpins = new ObservableCollection<ImageryService.Pushpin>();
        mapUriRequest.Pushpins.Add(new ImageryService.Pushpin { Location = location, IconStyle = "10" });
        // Set the map style and zoom level
        var mapUriOptions = new MapUriOptions();
        mapUriOptions.Style = MapStyle.AerialWithLabels;
        mapUriOptions.ZoomLevel = zoomLevel;

        // Set the size of the requested image to match the size of the image control
        mapUriOptions.ImageSize = new SizeOfint();
        mapUriOptions.ImageSize.Height = Convert.ToInt16(size.Height);
        mapUriOptions.ImageSize.Width = Convert.ToInt16(size.Width);

        mapUriRequest.Options = mapUriOptions;

        var imageryService = new ImageryServiceClient("BasicHttpBinding_IImageryService");
        imageryService.GetMapUriCompleted += ImageryServiceGetMapUriCompleted;

        imageryService.GetMapUriAsync(mapUriRequest, imageResponseCallback);
    } 
```

此处回复：

```
 public MyApplication.ImageryService.MapUriResponse EndGetMapUri(System.IAsyncResult result) {
            object[] _args = new object[0];
            MyApplication.ImageryService.MapUriResponse _result = ((MyApplication.ImageryService.MapUriResponse)(base.EndInvoke("GetMapUri", _args, result)));
            return _result; 
```

例外：

对“http://dev.virtualearth.net/webservices/v1/imageryservice/imageryservice.svc”的 HTTP 请求已超过分配的超时时间 00:01:00。分配给此操作的时间可能是较长超时的一部分。

您可以通过在请求后放置一个断点并在那里等待大约一分钟左右来轻松地重现这一点。

我应该怎么做才能处理这个异常，我没有找到任何解决方案，也没有找到与这个主题相关的问题......

我也在这里谈论这个问题：[http ://forums.create.msdn.com/forums/p/103502/616465.aspx#616465](http://forums.create.msdn.com/forums/p/103502/616465.aspx#616465)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:41:01.467

处理 getImageryCompleted 事件中的异常似乎可以解决这个问题：

```
 private static void ImageryServiceGetMapUriCompleted(object sender, GetMapUriCompletedEventArgs e) 
        { 
// This is where you want to handle the timeout or web service errors.  This will prevent
// the error that the debugger stops on from getting back to the main thread and from your
// application having an UnhandledException.
try
{
            if (e.Result == null) return; 

            var imageryServiceParams = e.UserState as ImageryServiceParams; 
            if (imageryServiceParams != null) 
                imageryServiceParams.ImageResponseCallback.DynamicInvoke(new ImageryServiceResult(new Uri(e.Result.Uri, UriKind.Absolute)) { UserState = imageryServiceParams.UserState }); 
          }
catch
{
// The "MessageBox.Show is in a try/catch since it throws an exception if it is called when another
// MessageBox.Show is open. This was at least the case in Pre-Mango releases.
try { MessageBox.Show("Caught the TimeOut or WebException.  Application still running."); }
catch {}
} 
```

# sharepoint - Web 部件中的 SharePoint 客户端对象模型引发 401 Unauthorized

> ID：10297036
> 
> 赞同：1
> 
> 时间：2012-04-24T11:34:19.147
> 
> 标签：sharepoint

我可以在 Web 部件中使用 SharePoint 客户端对象模型吗？

此代码在我的控制台应用程序中有效，但在 Web 部件中它返回“远程服务器返回错误：(401) 未经授权。”

代码是：

```
var siteUrl = "http://www.server.com/";
var clientContext = new ClientContext(siteUrl);

var root = clientContext.Site.RootWeb;
WebCollection collWeb = root.GetSubwebsForCurrentUser(null);
clientContext.Load(root);
clientContext.Load(collWeb);
clientContext.ExecuteQuery(); 
```

问题可能是客户端上下文不使用当前用户凭据。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:38:20.360

您将凭据添加到 clientContext：

```
System.Net.NetworkCredential cr = new System.Net.NetworkCredential("username", "password"); 

ClientContext clientContext = new ClientContext(siteURL);

clientContext.Credentials = cr; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:00:23.467

你应该试试

```
System.Net.CredentialCache.DefaultCredentials 
```

获取当前用户的凭证

但是，如果您正在调用远程共享点服务器，恐怕它不会工作，因为[双跳问题](http://blogs.msdn.com/b/knowledgecast/archive/2007/01/31/the-double-hop-problem.aspx)

以当前用户身份调用远程共享点的方法是使用 ECMA 客户端对象模型...

当然，用户必须已经登录

# vb.net - VB.net 中使用匿名类型和选项严格的 Linq 分组

> ID：10297046
> 
> 赞同：0
> 
> 时间：2012-04-24T11:34:57.383
> 
> 标签：vb.net, linq

尝试做一些我确定应该很简单的事情，但在 linq 和 VB 中挣扎。我有以下内容，我正在按属性对集合进行分组，然后想要访问我的组的属性。我遇到的问题是匿名打字。由于选项严格，我必须给出一个明确的类型，但我无法确定该类型应该是什么。以下内容无法编译，因为 t.HeadAccountKey 不是值（因为 t 具有对象类型）。所以要么我需要做一些转换，要么我的 linq 选择器是错误的，

```
public class TempObject
    public HeadKey as string
    Public SubKey as string
    Public SomeValue as decimal
end class

public class GroupTest
public sub RunTest
    dim collection new List(of TempObject) = GetTestCollection()

    Dim groupedValues As IEnumerable = From n In collection _
        Group By key = n.HeadKey Into Group Select HeadKeyValue = key, SubValues = Group

    for each t as object in groupedValues
    debug.print(t.HeadKeyValue)
        next

End sub

private function GetTestCollection() as List(of TempObject)
    dim result as new list(of tempobject)
    Dim x As New tempObject
    x.HeadAccountNumber = "A"
        x.SubAccountNumber = "B"
        x.Value = 500
        result.Add(x)
        x = New tempObject
        x.HeadAccountNumber = "A"
        x.SubAccountNumber = "C"
        x.Value = 600
        result.Add(x)
        x = New tempObject
        x.HeadAccountNumber = "B"
        x.SubAccountNumber = "D"
        x.Value = 100
    result.add(x)
    return result
end function
End class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:56:31.307

您不需要指定类型，至少使用[`Option Infer on`](http://msdn.microsoft.com/en-us/library/bb384665.aspx)（推荐，不要与 混淆`Option Strict`）。

所以以下工作：

```
Dim collection = GetTestCollection()
Dim groupedValues = From n In collection
    Group n By n.HeadKey Into Group

For Each t In groupedValues
    Dim hk = t.HeadKey
    Dim group = t.Group
Next 
```

# c# - 在 C# 中使用正则表达式匹配复数

> ID：10297047
> 
> 赞同：8
> 
> 时间：2012-04-24T11:34:57.837
> 
> 标签：c#, regex, plural

我希望在 C# 中使用正则表达式来搜索术语，并且我想在搜索中包含这些术语的复数。例如，如果用户想要搜索“管道”，那么我也想返回“管道”的结果。

所以我可以这样做...

```
string s ="\\b" + term + "s*\\b";
if (Regex.IsMatch(bigtext, s) {  /* do stuff */ } 
```

当用户输入“压力”并且仍然为“管道”/“管道”工作时，我将如何修改上述内容以允许我匹配“压力”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T11:55:02.100

您可能面临的问题是有很多不规则名词，例如`man`,`fish`和`index`。所以你应该考虑使用[`PluralizationService`](http://msdn.microsoft.com/en-us/library/system.data.entity.design.pluralizationservices.pluralizationservice.aspx)that has a [`Pluralize`](http://msdn.microsoft.com/en-us/library/system.data.entity.design.pluralizationservices.pluralizationservice.pluralize.aspx)method。[这](http://rduclos.wordpress.com/2011/03/26/c-pluralize-andor-singularize/)是一个显示如何使用它的示例。

获得该术语的复数后，您可以轻松构建一个搜索复数或单数术语的正则表达式。

```
PluralizationService ps = PluralizationService.CreateService(CultureInfo.CurrentCulture);
string plural = ps.Pluralize(term);
string s = @"("+term+"|"+plural+")";
if (Regex.IsMatch(bigtext, s)) {
    /* do stuff */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T11:42:24.153

这是为删除复数而创建的正则表达式：

```
 /(?<![aei])([ie][d])(?=[^a-zA-Z])|(?<=[ertkgwmnl])s(?=[^a-zA-Z])/g 
```

（[演示和源代码](http://gskinner.com/RegExr/?2ri29)）

我知道这并不完全是您所需要的，但它可能会帮助您找到一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:53:06.077

如果您使用 SQL 服务器作为后端，您不能使用 Soundex 吗？我不确定您要搜索什么。我假设您正在尝试创建动态 SQL 作为搜索输入。如果不是，我认为 LINQ 有 SoundEx。

编辑：我的立场得到纠正，似乎有一些 linq to sql 实体的东西可以为 SoundEx 完成。

但是，MSDN 确实有一个 soundex 示例，对于我今天早上运行的简单测试，就我测试的内容而言，它似乎做得很好。 [http://msdn.microsoft.com/en-us/library/bb669073.aspx](http://msdn.microsoft.com/en-us/library/bb669073.aspx)

我所做的更改不是 .ToUpper(invariant) 我使用了 .ToUpperInvariant() 而不是传递 (string word) 我使用了扩展方法 (this string word)

这是我运行的示例

```
List<string> animals = new List<string>();
animals.Add("dogs");
animals.Add("dog");
animals.Add("cat");
animals.Add("rabbits");
animals.Add("doggie");

string dog = "dog";
var data = from animal in animals
where animal.SoundEx() == dog.SoundEx()
select animal; 
```

数据：狗，狗，小狗

现在使用 SQL Server，使用 Contains/FreeText/ContainsTable 等并针对目录使用 SoundEx（我不熟悉 SQL Server 的较新版本 - 回到我使用的 SQLServer 2000 实现），您还可以对结果进行排名。

此外，如果您有能力使用 sql server，您可能需要查看此选项： [LINQ to SQL SOUNDEX - possible?](https://stackoverflow.com/questions/2993087/linq-to-sql-soundex-possible)

与 Pluralization 解决方案有关，您必须能够使用 .Net 4。

还有可能有用的 Levenshtein 距离算法。

# android - 将 Android 模拟器连接到远程系统

> ID：10297049
> 
> 赞同：3
> 
> 时间：2012-04-24T11:35:02.593
> 
> 标签：android, linux, networking, android-emulator, iptables

我有 2 个 ubuntu 系统 A 和 B。

A的IP地址是192.168.0.5 B的IP地址是192.168.0.3

系统 A 运行 Android 模拟器。我有一个 TCP 客户端应用程序，它必须与系统 B 通信。

由于 Android 应用程序只能“看到”本地主机（如 10.0.2.2），因此客户端应用程序在端口 Pb 处向 10.0.2.2 发送消息。

现在我假设系统 A 应该注意它在端口 Pb 的本地主机（即 127.0.0.1，对于模拟器的 10.0.2.2）接收到的任何消息都必须转发到端口 Pb 的系统 B 192.168.0.3。因此，我在系统 A 上设置了以下内容：

echo "1" < /proc/sys/net/ipv4/ip_forward

sudo iptables -t nat -A PREROUTING -p tcp -s 127.0.0.1 -d 127.0.0.1 --dport *Pb* -j DNAT --to-destination 192.168.0.3: *Pb*

系统 B 在 IP 192.168.0.3 和端口 Pb 上运行 TCP 服务器

在系统 A 和 B 上设置这些规则后，我在系统 A 上启动 android Emulator，然后在 Andoid 上启动 TCP 客户端应用程序。

Wireshark 工具显示到达 127.0.0.1 的包，但我在系统 B 的服务器根本没有收到任何包:(

怎么了？

```
--------------------              --------------------------

  System A                        System B
  192.168.0.5 wlan0               192.168.0.3 wlan0
  127.0.0.1   lo                  127.0.0.1 lo
                <---------------->

  Android EMULATOR                TCP Server
  TCP CLient App                  at 192.168.0.3, port Pb
  at 10.0.2.2
----------------------            ---------------------------- 
```

请帮忙。

# java - wsimport 工具正在生成的客户端代码中转换 DataHandler 类型 byte[]

> ID：10297054
> 
> 赞同：3
> 
> 时间：2012-04-24T11:35:27.337
> 
> 标签：java, web-services, jaxb, jax-ws

我有一个使用 JAXWS 开发的简单 WebService。我需要上传/下载一些文件。我创建了一个带有 DataHandler 属性的 Class FileItem。该服务运行良好。

但是当我使用 wsimport 工具生成客户端存根时，FileItem 类具有 byte[] 类型属性而不是 DataHandler 类型。

如何自定义此行为，以便生成的代码在生成的客户端代码中也具有相同的 DataHandler 类型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T19:21:09.847

**简答**

如果您在元素上指定`xmime:expectedContentTypes`除了：、、、`image/gif`或之外的任何内容`image/jpeg`，则生成的属性将是类型。`text/xml``application/xml``DataHandler`

* * *

**长答案**

从 JAXB 2.2 规范的 H.2.1.1 绑定已知媒体类型部分，以下是 mime 类型如何对应于生成的 Java 类型。

```
MIME Type              Java Type
---------              -------------
image/gif              java.awt.Image
image/jpeg             java.awt.Image
text/xml               javax.xml.transform.Source
application/xml        javax.xml.transform.Source
any other mime type    javax.activation.DataHandler 
```

***XML 模式***

下面是一个 XML 模式，它有许多 type 元素`base64Binary`，其中大多数都符合条件，`xmime:expectedContentTypes`以便我们可以看到对生成的类生成的影响。

```
<?xml version="1.0"?>
<xsd:schema
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:xmime="http://www.w3.org/2005/05/xmlmime"
    xmlns="http://www.example.com"
    targetNamespace="http://www.example.com">
    <xsd:element name="root">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element minOccurs="0" name="default" type="xsd:base64Binary"/>
                <xsd:element minOccurs="0" name="imageGif" type="xsd:base64Binary" xmime:expectedContentTypes="image/gif"/>
                <xsd:element minOccurs="0" name="imageJpeg" type="xsd:base64Binary" xmime:expectedContentTypes="image/jpeg"/>
                <xsd:element minOccurs="0" name="textXml" type="xsd:base64Binary" xmime:expectedContentTypes="text/xml"/>
                <xsd:element minOccurs="0" name="applicationXml" type="xsd:base64Binary" xmime:expectedContentTypes="application/xml"/>
                <xsd:element minOccurs="0" name="anythingElse" type="xsd:base64Binary" xmime:expectedContentTypes="anything/else"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

***根（生成类）***

下面是生成的类。生成的属性类型为`byte[]`、`Image`、`Source`和`DataHandler`。

```
package com.example;

import java.awt.Image;
import javax.activation.DataHandler;
import javax.xml.bind.annotation.*;
import javax.xml.transform.Source;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "_default",
    "imageGif",
    "imageJpeg",
    "textXml",
    "applicationXml",
    "anythingElse"
})
@XmlRootElement(name = "root")
public class Root {

    @XmlElement(name = "default")
    protected byte[] _default;
    @XmlMimeType("image/gif")
    protected Image imageGif;
    @XmlMimeType("image/jpeg")
    protected Image imageJpeg;
    @XmlMimeType("text/xml")
    protected Source textXml;
    @XmlMimeType("application/xml")
    protected Source applicationXml;
    @XmlMimeType("anything/else")
    protected DataHandler anythingElse;

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:42:00.733

似乎 wsimport 不知道您的 DataHandler 对象应该如何序列化，只是假设您希望它们作为字节数组。在 DataHandler 类上使用正确的 jaxb 注释以进行正确的 XML 序列化。

# linux - 如何构建延迟/缓冲管道？

> ID：10297060
> 
> 赞同：4
> 
> 时间：2012-04-24T11:36:04.553
> 
> 标签：linux, bash, pipe

是否可以构建一个缓冲管道来保留来自标准 linux 工具（如 cat、dd 等）的数据（对于某些给定数量的字节或某些给定时间）？

例如收集定义数量的数据包、音频数据或其他东西。

例如。构建一个脚本`delaybuffer`来做这样的事情：

```
arecord | delaybuffer 16000 | aplay 
```

播放录制的音频延迟 16000 字节。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T05:01:00.613

另一种方法是使用 dd （如果您的 dist 上不存在缓冲区）。

```
 arecord | dd ibs=16000 iflag=fullblock oflag=dsync | aplay 
```

我不太确定这些标志，可能有比一次爆出一个块更好的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T13:19:32.690

有一个名为的工具`buffer`可以完成这项工作。（[指向 Debian 软件包的链接](http://packages.debian.org/en/squeeze/buffer)- 可能在其他发行版中也可用。）。

> 缓冲区使用共享内存将可变输入数据速率转换为恒定输出数据速率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-29T03:40:47.527

下面给出了`cdparanoia`在开始读取输出之前提取音频 CD 的轨道 7 的 4 秒时间障碍。可以作为命令行 cd 播放器使用。

```
cdparanoia 7 ~/temp.wav & sleep 4 ; tail -f -c +1 ~/temp.wav | aplay 
```

# advantage-database-server - 如何在时间戳字段中插入硬编码值

> ID：10297064
> 
> 赞同：1
> 
> 时间：2012-04-24T11:36:26.617
> 
> 标签：advantage-database-server

我在将硬编码值插入 Advantage 9.1 中的“时间戳”字段时遇到了一些问题。我想要一个“时间戳”字段，因为我想要一个组合的日期+时间字段。我究竟做错了什么？我尝试了下面列出的许多变体，每个变体都失败并显示错误消息。

```
create table foo(a timestamp);

insert into foo (a) values ('12/31/2012');
insert into foo (a) values (cast ('12/31/2012' as sql_timestamp));
insert into foo (a) values (cast ('2012-12-31' as sql_timestamp));
insert into foo (a) values (convert('12/31/2012', sql_timestamp));
insert into foo (a) values (convert('2012-12-31', sql_timestamp)); 
```

咒语必须很简单，而我就是不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:35:43.763

我相信以下将起作用（包括文字的时间部分并将其指定为零）：

```
insert into foo (a) values ('2012-12-31 00:00:00') 
```

而且我认为也可以在 v9.x 中使用旧样式的转义序列来创建日期文字常量，然后使用转换标量：

```
insert into foo (a) values convert( {d '2012-03-04'}, sql_timestamp)) 
```

# php - PHP 和浏览器“返回”按钮 - 真正发生了什么

> ID：10297066
> 
> 赞同：1
> 
> 时间：2012-04-24T11:36:37.173
> 
> 标签：php, html

假设我的 PHP 页面执行“真实”操作。
我所说的“真实”是指执行数据库操作、写入文件之类的东西，而不仅仅是发送 HTML。

当我点击“返回”按钮到我的 PHP 页面时，假设它是一个 GET。

*   这是否意味着我的 PHP 代码不一定会在所有浏览器上一直运行？

*   如果我想在每次请求该页面时刷新图像（尤其是在“返回”上），我应该怎么做？

是我自己还是对javascript有内在的厌恶是正常的？（在我看来，它总是像一开始就无法工作的东西的补丁，而且不是每个人都让 javascript 工作）

我并不挑剔，但可以认为 HTTP 级别的解决方案在这里是最好的吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:40:59.657

通过 POST 加载的页面将导致浏览器要求用户重新提交信息以查看页面，从而导致该页面执行的操作再次发生。如果页面是通过 GET 请求的并且在查询字符串中有变量，那么同样的事情会发生，但会默默地发生（不会提示用户再次 d 它）。

解决此问题的最佳方法是使用[POST/REDIRECT/GET 模式](http://www.andypemberton.com/engineering/the-post-redirect-get-pattern/)。[我在我为 Authorize.Net 编写的](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Handling-Online-Payments-Part-6-Preventing-Duplicate-Submissions/ba-p/11168)关于处理付款的示例中使用了它。希望这会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T12:43:22.557

> 我所说的“真实”是指执行数据库操作....
> 
> ....假设它是一个 GET。

那么你已经破坏了 HTTP 的一个基本原则：Get 是幂等的，onlu POST、DELE 和 PUT 应该在服务器端修改状态。

这是有充分理由的；*即使您告诉浏览器页面不可缓存*，使用浏览器导航元素（后退、前进）也不需要浏览器回溯到 GET 或 HEAD 操作的原点。

> 如果我有图像，我想每次都刷新

...然后使用 javascript 通过 window.onload 方法使用随机生成的查询字符串获取图像。

# arrays - 在 CUDA 内核中，如何将数组存储在“本地线程内存”中？

> ID：10297067
> 
> 赞同：31
> 
> 时间：2012-04-24T11:36:37.927
> 
> 标签：arrays, memory, cuda, gpu-local-memory

我正在尝试用 CUDA 开发一个小程序，但由于它很慢，我做了一些测试并用谷歌搜索了一下。我发现虽然单个变量默认存储在本地线程内存中，但数组通常不是。我想这就是为什么执行需要这么多时间的原因。现在我想知道：由于本地线程内存应该至少为 16KB，而且我的数组只有 52 个字符长，有没有办法（请使用语法 :)）将它们存储在本地内存中？

不应该是这样的：

```
__global__ my_kernel(int a)
{
  __local__ unsigned char p[50];
} 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-09-27T01:49:36.450

## 数组、本地内存和寄存器

这里对“本地内存”的定义存在误解。CUDA 中的“本地内存”实际上是具有交错寻址的全局内存（实际上应该称为“线程本地全局内存”）（这使得并行迭代数组比将每个线程的数据阻塞在一起要快一点）。如果你想让事情变得非常快，你可以使用共享内存，或者更好的是寄存器（尤其是在最新的设备上，每个线程最多可以有 255 个寄存器）。解释整个[CUDA 内存层次结构](https://graphics.cg.uni-saarland.de/fileadmin/cguds/courses/ss14/pp_cuda/slides/02_-_CUDA_Memory_Hierarchy.pdf)超出了本文的范围。让我们专注于快速进行小数组计算。

小数组，就像变量一样可以完全存储在寄存器中。然而，在当前的 NVIDIA 硬件上，将数组放入寄存器是很困难的。为什么？因为寄存器需要非常小心的处理。如果您没有完全正确地执行此操作，您的数据将最终存储在本地内存中（同样，这实际上是全局内存，这是您拥有的最慢的内存）。CUDA 编程指南第[5.3.2 节](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#device-memory-accesses)告诉您何时使用本地内存：

> 本地内存
> 
> 本地内存访问仅发生在变量类型限定符中提到的一些自动变量。编译器可能放置在本地内存中的自动变量是：
> 
> 1.  无法确定它们是否以常数索引的数组，
> 2.  会占用过多寄存器空间的大型结构或数组，
> 3.  如果内核使用的寄存器多于可用寄存器（这也称为寄存器溢出），则为任何变量。

## 寄存器分配是如何工作的？

请注意，寄存器分配是一个极其复杂的过程，这就是为什么您不能（也不应该）干预它的原因。相反，编译器会将 CUDA 代码转换为 PTX 代码（一种字节码），它假定机器具有无限多的寄存器。您可以编写内联 PTX，但它不会对注册分配做太多。PTX 代码是与设备无关的代码，它只是第一阶段。在第二阶段，PTX 将被编译成设备汇编代码，称为 SASS。SASS 代码具有实际的寄存器分配。SASS 编译器和它的优化器也将是决定变量是在寄存器中还是在本地内存中的最终权威。您所能做的就是尝试了解 SASS 编译器在某些情况下的作用，并将其用于您的优势。Nsight 中的代码关联视图可以帮助您解决这个问题（见下文）。

## 寄存器不足

*附录 G，第 1 节*告诉您一个线程可以拥有多少个寄存器。查找“每个线程的最大 32 位寄存器数”。为了解释该表，您必须了解您的计算能力（见下文）。不要忘记寄存器用于各种事物，并且不仅仅与单个变量相关。最高 CC 3.5 的所有设备上的寄存器均为 32 位。如果编译器足够聪明（并且 CUDA 编译器不断变化），它可以例如将多个字节打包到同一个寄存器中。Nsight 代码相关视图（请参阅下面的“分析内存访问”）也揭示了这一点。

## 常量与动态索引

虽然空间限制是注册数组的明显障碍，但很容易监督的事实是，在当前硬件（Compute Capability 3.x 及更低版本）上，编译器将任何数组放置在本地内存中，通过动态索引。动态索引是编译器无法计算的索引。使用动态索引访问的数组不能放在寄存器中，因为寄存器必须由编译器确定，因此实际使用的寄存器不能依赖于运行时确定的值。例如，给定一个数组`arr`，当且仅当它是一个常量，或者仅依赖于常量时，`arr[k]`它才是*常量索引。*`k`如果`k`以任何方式依赖于某个非常量值，则编译器无法计算`k`你得到了*动态索引*。`k`在以（小）常数开始和结束的循环中，编译器（很可能）可以展开您的循环，并且仍然可以实现常数索引。

## 例子

例如，可以在寄存器中对小数组进行排序，但您必须使用[排序网络](http://en.wikipedia.org/wiki/Sorting_network)或类似的“硬连线”方法，并且不能只使用标准算法，因为大多数算法都使用动态索引。

很有可能，在下面的代码示例中，编译器将整个`aBytes`数组保存在寄存器中，因为它不是太大，并且循环可以完全展开（因为循环在恒定范围内迭代）。编译器（很可能）知道每一步都在访问哪个寄存器，因此可以将其完全保存在寄存器中。请记住，没有任何保证。您可以做的最好的事情是使用 CUDA 开发人员工具逐个验证它，如下所述。

```
__global__
void
testSortingNetwork4(const char * aInput, char * aResult)
{
    const int NBytes = 4;

    char aBytes[NBytes];

    // copy input to local array
    for (int i = 0; i < NBytes; ++i)
    {
        aBytes[i] = aInput[i];
    }

    // sort using sorting network
    CompareAndSwap(aBytes, 0, 2); CompareAndSwap(aBytes, 1, 3); 
    CompareAndSwap(aBytes, 0, 1); CompareAndSwap(aBytes, 2, 3); 
    CompareAndSwap(aBytes, 1, 2); 

    // copy back to result array
    for (int i = 0; i < NBytes; ++i)
    {
        aResult[i] = aBytes[i];
    }
} 
```

## 分析内存访问

完成后，您通常要验证数据是否实际存储在寄存器中或是否进入本地内存。您可以做的第一件事是告诉您的编译器使用[标志](https://stackoverflow.com/questions/12388207/interpreting-output-of-ptxas-options-v)[为您提供内存统计信息`--ptxas-options=-v`](https://stackoverflow.com/questions/12388207/interpreting-output-of-ptxas-options-v)。分析内存访问的更详细方法是使用[Nsight](http://www.nvidia.com/object/nsight.html)。

Nsight 有许多很酷的功能。[Nsight for Visual Studio](https://developer.nvidia.com/nvidia-nsight-visual-studio-edition)有一个内置的分析器和一个 CUDA <-> SASS 代码相关视图。[该功能在此处进行了说明](http://developer.nvidia.com/content/cuda-pro-tip-view-assembly-code-correlation-nsight-visual-studio-edition)。请注意，不同 IDE 的 Nsight 版本可能是独立开发的，因此它们的功能可能因不同的实现而异。

如果您按照上面链接中的说明进行操作（请确保在编译时添加相应的标志！），您可以在下方菜单的最底部找到“CUDA Memory Transactions”按钮。在该视图中，您希望发现没有来自仅在相应数组上工作的行（例如，我的代码示例中的*CompareAndSwap行）的内存事务。*因为如果它不报告这些行的任何内存访问，您（很可能）能够将整个计算保存在寄存器中，并且可能刚刚获得了数千甚至一万百分比的加速（您可能还想检查实际的速度增益，你可以摆脱这个！）。

## 弄清楚计算能力

为了弄清楚你有多少个寄存器，你需要知道你的设备的计算能力。获取此类设备信息的标准方法是运行设备查询示例。对于 Windows 64 位上的 CUDA 5.5，默认情况下位于*C:\ProgramData\NVIDIA Corporation\CUDA Samples\v5.5\Bin\win64\Release\deviceQuery.exe*（在 Windows 上，控制台窗口将立即关闭，您可能需要首先打开`cmd`并从那里运行它）。它在 Linux 和 MAC 上的位置相似。

如果您有 Nsight for Visual Studio，只需转到 Nsight -> Windows -> 系统信息。

## 不要过早优化

我今天分享这个是因为我最近遇到了这个问题。[然而，正如在这个线程](https://stackoverflow.com/questions/12167926/forcing-cuda-to-use-register-for-a-variable)中提到的，强制数据进入寄存器绝对不是你想要采取的第一步。首先，确保您真正了解发生了什么，然后逐步解决问题。查看汇编代码当然是一个很好的步骤，但它通常不应该是你的第一步。如果您是 CUDA 新手，[CUDA 最佳实践指南](http://docs.nvidia.com/cuda/cuda-c-best-practices-guide/)将帮助您了解其中的一些步骤。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-24T11:47:07.997

你只需要这样：

```
__global__ my_kernel(int a)
{
    unsigned char p[50];
    ........
} 
```

如果需要，编译器会自动将其溢出到线程本地内存。但请注意，本地内存存储在 GPU 之外的 SDRAM 中，它与全局内存一样慢。因此，如果您希望这会带来性能改进，那么您可能会感到失望......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-23T19:15:53.893

〜对于将来遇到这种情况的人〜

简而言之，要为每个线程创建一个数组，您需要在设备内存中创建它们。为此，可以为每个线程分配一点*共享内存。*必须特别注意防止冲突或性能下降。

以下是Maxim Milakov 在 2015 年发表的一篇英伟达[博客文章中的一个示例：](https://devblogs.nvidia.com/fast-dynamic-indexing-private-arrays-cuda/)

```
// Should be multiple of 32
#define THREADBLOCK_SIZE 64 
// Could be any number, but the whole array should fit into shared memory 
#define ARRAY_SIZE 32 

__device__ __forceinline__ int no_bank_conflict_index(int thread_id, int logical_index)
{
    return logical_index * THREADBLOCK_SIZE + thread_id;
}

__global__ void kernel5(float * buf, int * index_buf)
{
    // Declare shared memory array A which will hold virtual 
    // private arrays of size ARRAY_SIZE elements for all 
    // THREADBLOCK_SIZE threads of a threadblock
    __shared__ float A[ARRAY_SIZE * THREADBLOCK_SIZE]; 
    ...
    int index = index_buf[threadIdx.x + blockIdx.x * blockDim.x];

    // Here we assume thread block is 1D so threadIdx.x 
    // enumerates all threads in the thread block
    float val = A[no_bank_conflict_index(threadIdx.x, index)];
    ...
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-24T13:00:22.257

您正在混淆本地和注册内存空间。

单个变量和恒定大小的数组自动保存在芯片上的寄存器空间中，几乎没有读写成本。

如果您超过每个多处理器的寄存器数量，它们将存储在本地内存中。

本地内存驻留在全局内存空间中，具有相同的慢速读写操作带宽。

```
#DEFINE P_SIZE = 50

__global__ void kernel()
{
    unsigned char p[P_SIZE];
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-24T13:31:25.107

您要查找的关键字是`__shared__`. 大型数组不适合共享内存空间，但编译器应该将共享内存用于固定大小的小型数组，就像在这种情况下一样。您可以使用`__shared__`关键字来确保发生这种情况。如果超过块的最大共享内存量，您将看到编译时错误。

# java - 如何使用 selenium webdriver 根据表元素选择表记录

> ID：10297077
> 
> 赞同：2
> 
> 时间：2012-04-24T11:37:22.167
> 
> 标签：java, selenium, selenium-webdriver

一个表有 2 行或更多行（取决于先前的操作）并且内容没有排序。其中一列具有独特的元素。我需要使用 selenium webdriver (java) 根据唯一元素选择行。我正在使用 Excel 表传递定位器。

例如，我有以下类型的表：

* * *

## 选择名称 ID

Radio_button ABC Id1

Radio_button ABC Id2

假设对于上表，行的顺序始终不相同，并且取决于 id 值，我需要选择正确的单选按钮。如何根据 id 值识别正确的单选按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:48:36.857

使用[xpath](http://msdn.microsoft.com/en-us/library/ms256086.aspx)查找您的元素：

```
//tr[*[@id='id1']]//input 
```

这是 Radio_button 的定位器，与 id1 位于同一行。如果您提供表格的 html 代码，答案会更准确，但我想总体思路很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:52:00.687

尽管 selenium 没有为您提到的 xpath (verifyVisible) 提供任何错误，但无法单击/检查该特定单选按钮。

它仅识别第一个单选按钮并对其进行检查。

# android - 如何在列表视图中指定可用项目？

> ID：10297078
> 
> 赞同：0
> 
> 时间：2012-04-24T11:37:24.303
> 
> 标签：android, listview, scroll, android-listview, android-scrollview

我使用 ListView 和 View 为我的应用程序创建了 Fragment View。

在那个 listView 中，当焦点显示滚动时，我有很多项目说 30 [但一次只有十个可见]。

默认情况下如何显示项目可用性，也就是说，如果我在 listView 中的最后一个，列表顶部有 ^ 以显示项目在 up.. 反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:42:29.053

你不能只检查项目的数量，然后说如果 count > 10 那么还有更多项目要查看 -

就像在我的情况下 cur 是光标一样，您可以使用数组计数等。

```
 if (cur.getCount() >10)

{
//do stuff here
} 
```

这是你的意思吗？

# c# - WCF REST 服务多个具有相同基本 URI 的合同

> ID：10297089
> 
> 赞同：2
> 
> 时间：2012-04-24T11:38:06.410
> 
> 标签：c#, wcf, rest

我正在编写一个供第三方客户端使用的 WCF Rest API。目前我有两个服务合同：

1.  产品服务.svc
2.  BookingService.svc

为了让服务看起来像 Uri，我在 Global.asx 中定义了以下路由：

```
RouteTable.Routes.Add(new ServiceRoute("api", new WebServiceHostFactory(),
typeof(ProductsService))); 
```

并且还使用以下 UriTemplate 在 ProductsService.svc 文件中装饰了我的操作合同：

```
WebGet(UriTemplate = "products/") 
```

这允许像 api/products/... 这样的 URL

我不知道如何使第二个服务，即 BookingService 可通过以下 URL 访问：api/booking。我无法将另一个条目添加到以“api”开头的路由表中，因为它已经被添加了。

对我应该如何进行这个有任何想法吗？

# blackberry - Sqlite 查询不起作用

> ID：10297090
> 
> 赞同：0
> 
> 时间：2012-04-24T11:38:09.307
> 
> 标签：blackberry

我在 sqlite 查询中使用特殊字符。它可以在 6.0 模拟器或设备上完美运行，但不能在 5.0 模拟器上运行

我的查询

```
select * from aide where ti = 'ménagères' 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:09:06.260

这是早期 5.0 操作系统修订版的众所周知的问题。他们在后来的 5.0 更新中修复了它。我对你的情况的建议 - 使用带有外键的字典表（或者只是用一些整数替换字符串常量）。[当您必须将 unicode 字符存储到数据库并且有解决方法](http://supportforums.blackberry.com/t5/Java-Development/UTF8-encoding-and-SQLite-database-problems/m-p/462189/highlight/true#M92232)时，此建议无效。

# python - App Engine 数据存储区：ID 使用 NDB 自动递增

> ID：10297094
> 
> 赞同：1
> 
> 时间：2012-04-24T11:38:32.313
> 
> 标签：python, google-app-engine, auto-increment, datastore

我正在建模数据，哪些 ID 应该是自动递增的。实际上，我已经制作了工作模型，但需要数据存储大师的一些建议。

有我的 ID 生成代码：

```
class AutoIncrementModel(ndb.Model):
  entity_id = ndb.IntegerProperty('eID')
  def _pre_put_hook(self):
    if self.key and self.key.id(): return
    latest = self.__class__.query().order(-self.__class__.entity_id).get()
    self.entity_id = latest and latest.entity_id + 1 or 1
    while self.__class__.get_by_id(self.entity_id): self.entity_id += 1
    self.key = ndb.Key(self.__class__.__name__, self.entity_id, parent=self.key and self.key.parent() or None)
    self.put() 
```

此代码生成简单的 ID，但我不确定它是否足够好。

**UPD**：*此代码失败*。可以使用相同的键写入多个实体，并且可以覆盖数据。

№1。它会导致数据丢失问题吗？“While 循环”可防止应用生成 ID。但我不确定数据是否有可能被覆盖。

2号。这样的交易可以让储蓄更好吗？

```
 def _pre_put_hook(self):
    def callback():
      while self.__class__.get_by_id(self.entity_id): self.entity_id += 1
      self.key = ndb.Key(self.__class__.__name__, self.entity_id, parent=self.key and self.key.parent() or None)
      self.put()
    if self.key and self.key.id(): return
    latest = self.__class__.query().order(-self.__class__.entity_id).get()
    self.entity_id = latest and latest.entity_id + 1 or 1
    ndb.transaction(callback, xg=True) 
```

**UPD**：事务有助于避免数据丢失。这段代码似乎比第一个例子好得多。

3号。有没有办法从没有额外索引字段的实体组中获取最大 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T13:11:16.590

基本上这是做不到的。您需要一个外部计数器“单例”，如果您每秒需要超过一次写入，则应该添加共享以提高性能。有关选项的讨论，请参阅[如何在 Google AppEngine 上实现“自动增量” 。](https://stackoverflow.com/questions/3985812/how-to-implement-autoincrement-on-google-appengine)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-19T18:57:31.393

**按“self.class .entity_id** ”字段排序没有意义，因为该字段是唯一标识符，从不具有增量值，也没有添加任何意义。

# php - PHP SOAP 请求不正确

> ID：10297099
> 
> 赞同：3
> 
> 时间：2012-04-24T11:38:56.413
> 
> 标签：php, soap, xmlhttprequest, soap-client

我尝试构建以下 SOAP 请求：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <CheckSomething xmlns="http://service.mydomain.com/">
      <User>
        <username>user123</username>
        <password>geheim</password>
      </User>
      <ItemXY>something</ItemXY>
    </CheckSomething>
  </soap:Body>
</soap:Envelope> 
```

这是我的 PHP 代码

```
$soapClient = new SoapClient("http://service.mydomain.com/Services.asmx?wsdl",array( "trace" => 1 ));
$Param = array (
  'username' => "user123",
  'password' => "geheim"
);
$info = $soapClient->__call("CheckSomething", array("User" => $Param,"ItemXY" => "something"));
echo "Request :\n".htmlspecialchars($soapClient->__getLastRequest()) ."\n"; 
```

结果是：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://service.mydomain.com/">
<SOAP-ENV:Body>
<ns1:CheckSomething/>
<param1>something</param1>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

这是此服务的 wsdl 部分：

```
<s:element name="CheckSomething">
  <s:complexType>
    <s:sequence>
      <s:element minOccurs="0" maxOccurs="1" name="User" type="tns:Validation"/>
      <s:element minOccurs="0" maxOccurs="1" name="ItemXY" type="s:string"/>
    </s:sequence>
  </s:complexType>
</s:element> 
```

任何人都可以帮助我形成正确的 SOAP 请求吗？

如何删除`ns1`结果标签中的标签并给出正确的数组用户和项目XY？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T14:11:21.870

在我将 PHP 代码修改为：

```
$soapClient = new SoapClient("http://service.mydomain.com/Services.asmx?wsdl",array( "trace" => 1 ));
$user_param = array (
  'username' => "user123",
  'password' => "geheim"
);
$service_param = array (
  'User' => $user_param,
  "ItemXY" => "something"
);

$info = $soapClient->__call("CheckSomething", array($service_param));
echo "Request :\n".htmlspecialchars($soapClient->__getLastRequest()) ."\n"; 
```

有用！

# java - Play 2.0 - Java：将选定值添加到 @select 字段

> ID：10297101
> 
> 赞同：4
> 
> 时间：2012-04-24T11:39:03.137
> 
> 标签：java, select, playframework, playframework-2.0

我是游戏框架的新手（我使用 Java 版本）。我正在寻找一种将 selected="selected" 添加到字段的解决方案。我的代码：

```
@select(settingsForm("projectManager"), options(projectManagers), '_label -> "Project manager" ) 
```

HTML 结果如下所示：

```
<select id="projectManager" name="projectManager">   
    <option value="222">Henk</option>
    <option value="96">Geert</option>
</select> 
```

有谁知道 @select 字段的 scale 参数以将 select=selected 添加到 html 中？我正在寻找的结果如下：

```
<select id="projectManager" name="projectManager">   
    <option value="222">Henk</option>
    <option value="96" select="selected">Geert</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:58:40.867

在网上搜索了一段时间后，我想到了示例项目。答案就在那里，就在我面前。仅创建带有视图的表单是不够的！为了更清楚地说明这一点，请看一下计算机数据库示例。要创建一个空字段，只需将一个 Form 对象传递给视图：

```
Controller:
public static Result create() {
    Form<Computer> computerForm = form(Computer.class);
    return ok(
        createForm.render(computerForm)
    );
}

View:
@inputText(computerForm("name"), '_label -> "Computer name")
@inputText(computerForm("introduced"), '_label -> "Introduced date")
@inputText(computerForm("discontinued"), '_label -> "Discontinued date") 
```

如果要填写表格，则需要将数据传递给该表格。如示例所示：

```
 public static Result edit(Long id) {
    Form<Computer> computerForm = form(Computer.class).fill(
        Computer.find.byId(id)
    );
    return ok(
        editForm.render(id, computerForm)
    );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T21:45:00.327

在 scala 中，我知道控制器中的以下代码将`96`选中

```
settingsForm.bind( Map("projectManager" -> "96")) 
```

在 Java 中，它的工作方式应该与我的猜测相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:17:35.393

实际上，我不知道答案，但是根据[源代码](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/select.scala.html)，您必须以某种方式修改您的*projectManagers*。

另外，您可以尝试在[Play-Framework group](http://groups.google.com/group/play-framework)中提出这个问题。

也许它会对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T21:01:58.937

我假设 projectManager 是某种关系。那你可以试试：

```
@select(
    settingsForm("projectManager.id"), 
    options(projectManagers), 
    '_label -> "Project manager" 
) 
```

@see：[类似情况](https://stackoverflow.com/questions/10294037/how-do-you-update-manytoone-field-in-a-form/10295287#10295287)

# c++ - 为什么可以在常量结构上调用非常量成员函数？

> ID：10297103
> 
> 赞同：1
> 
> 时间：2012-04-24T11:39:16.023
> 
> 标签：c++, constants, type-mismatch

下面的程序编译（使用 gcc），但应该编译吗？我会认为下面创建的 V1(1.0) 是一个常量，因此无法在其上调用非 const 方法。

```
class V{
  double v;
 public:
  V(double v1){ v = v1;}
  void clear(){ v = 0;}
};

int main(){
  V(1.0).clear();
} 
```

将此与不能称为“f(1)”的函数“void f(int &t){}”进行比较，因为 1 是一个常数，不能作为非常量引用 t 的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:43:49.123

`V(1.0)`调用构造函数，该构造函数`double v1` **由 copy**初始化。所以你有一个临时的文字副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:41:54.290

您似乎将常量与 r 值混淆了。`f(1)`将是非法的，因为`1`它不是左值。`V(1.0)`不是常数，而是暂时的。

# makefile - 从一个包含在另一个生成文件中获取价值

> ID：10297109
> 
> 赞同：0
> 
> 时间：2012-04-24T11:39:28.947
> 
> 标签：makefile, gnu-make

我的项目有很多模块，我想根据配置的值进行一些部分构建。所以我用下面的相同测试相同

配置文件

```
 somevar := apple
    export somevar 
```

规则.mk

```
 ifeq ( $(somevar), apple)
    export someother := banana
    else
    export someother := tomato
    endif 
```

生成文件

```
 include config.mk
    include rules.mk

    all:
        @echo $(somevar)
        @echo $(someother) 
```

这打印

```
 apple
    tomato 
```

但我想要“苹果香蕉”。请帮我找出错误。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:00:55.027

删除 ifeq 中的空格。由于额外的空格，它的评估结果为 false：

```
ifeq ($(somevar),apple) 
```

将工作。

# objective-c - 如何在 UIPickerView 中选择 UITableView 中的单元格

> ID：10297112
> 
> 赞同：0
> 
> 时间：2012-04-24T11:39:40.093
> 
> 标签：objective-c, xcode, uitableview, uipickerview

我以这种方式添加了`UITableView`as 子视图：`UIPickerViewRow`

```
- (NSInteger)pickerView:(UIPickerView *)pickerView 
             numberOfRowsInComponent:(NSInteger)component {
        return 1; 
}

- (UIView *)pickerView:(UIPickerView *)pickerView 
            viewForRow:(NSInteger)row 
          forComponent:(NSInteger)component 
           reusingView:(UIView *)view {

        self.tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 280, 216)];
        self.tableView.delegate = self;
        self.tableView.dataSource = self;
        return self.tableView;
} 
```

但我可以只点击位于“选择指示器”区域的那个单元格。例如，我有 1 到 5 的表格，3 位于“选择指示器”区域，我点击它，它向 didSelectRowAtIndexPath 发送消息，但如果我点击 1-2 或 4-5 单元格，它什么也不做，然后我滚动 tableView 将一些单元格设置为“选择指示器”区域，它工作正常。

如何更改点击区域的大小？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:14:59.617

解决方案很简单。只需将行的高度设置为`UIPickerViewRow`.

```
-(CGFloat)pickerView:(UIPickerView *)pickerView 
          rowHeightForComponent:(NSInteger)component {
    return self.pickerView.frame.size.height;
} 
```

# jquery - 任何带有页面滚动条故障的滑块宽度？

> ID：10297113
> 
> 赞同：2
> 
> 时间：2012-04-24T11:39:44.633
> 
> 标签：jquery, anythingslider

我正在使用宽度设置为 100% 的任何滑块，以便它填充页面，并且它工作正常，除非页面使用滚动条，然后滑块为 100% + 滚动条的宽度。我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:48:56.607

试试这个：

```
 var width = document.body.clientWidth; // this is the inner or viewport dimension that excludes scrollbars 
 $("#slider").width(width); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T02:29:00.090

而不是将滑块的宽度设置为 100%。将其父级设为 100%（也设置一个高度），然后将`expand`选项设置为`true`（[演示](http://jsfiddle.net/Mottie/Cm479/4321/)）：

HTML

```
<div id="wrapper">
    <ul id="slider">
        <li><img src="http://placekitten.com/300/200" alt="" /></li>
        <li><img src="http://placehold.it/300x200" alt="" /></li>
        <li><img src="http://ipsumimage.appspot.com/300x200.png" alt="" /></li>
        <li><img src="http://dummyimage.com/300x200/000/fff.jpg" alt="" /></li>
    </ul>
</div> 
```

CSS

```
#wrapper {
    height: 500px;
} 
```

脚本

```
$('#slider').anythingSlider({
    // If true, the entire slider will expand to fit the parent element
    expand: true
});​ 
```

# python - 如何将测试参考数据保存在单独的存储中？

> ID：10297122
> 
> 赞同：3
> 
> 时间：2012-04-24T11:40:12.430
> 
> 标签：python, unit-testing, datastore

我正在使用`unittest`库在 python 中编写测试，我有几个具有不同测试数据的测试环境。

*   存储测试参考数据的最佳方式是什么（我不想将它们放入“test*.py”文件中）？
*   有什么好的方法可以以特殊格式存储（调用方法的输入值，比较的输出值）？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:56:43.503

您可以编写一个装饰器，从您的自定义存储中检索数据并将其传递给实际的测试功能。我过去这样做过：

**装饰者**

```
from functools import wraps

def data_provider(fn_dp):
  def test_decorator(fn_test):
    @wraps(fn_test)
    def wrapper(self, *args, **kwds):
      for data in fn_dp():
        try:
          fn_test(self, **data)
        except AssertionError, e:
          raise(AssertionError('{0} - [{1}]'.format(e, data)))
    return wrapper
  return test_decorator 
```

现在我可以像这样编写我的单元测试：

```
data = lambda: (
  {
    'input': '1234',
    'expected_op': '1234'
  },
  {
    'input': '1234',
    'expected_op': '1234'
  }
)

@helper.data_provider(data)
def test_something(self, input, expected_op):
  self.assertEqual(input, expected_op) 
```

现在装饰器将为所有数据点调用测试函数。

对于您的具体情况，请查看`fn_test(self, **data)`. `data_provider`而不是`**data`您可以从自定义存储中读取并从此处调用测试功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:33:22.623

接下来我的解决方案：我有一个存储类，在每次测试之前从 json 文件中获取测试数据（在 setUp 方法中调用）：

```
def setUp(self):
    self.data = self.storage.getDataFor(self._testMethodName) 

def test_ftu_02_003(self):
    self.assertEqual(self.data['title'], self.page.get_title())
    self.assertEqual(self.data['header'], self.page.get_header()) 
```

和示例 json 文件示例，json 文件名与 py 文件名相同：

```
{
"test_ftu_02_003":{
    "title":"example_title",
    "header":"example_title"
    }  
} 
```

所以我可以用每个环境的文件更改文件夹的路径，并且很容易从 python 代码重写 json 文件。

问题：那么输出数据呢？
答：所有数据都是输入数据（它去输入断言*）

# c# - 如何在 C# Zip 中组合两个以上的通用列表？

> ID：10297124
> 
> 赞同：38
> 
> 时间：2012-04-24T11:40:21.840
> 
> 标签：c#, linq

我有三个（可能有超过 3-4 个通用列表，但在这个例子中让 3 个）通用列表。

```
List<string> list1

List<string> list2

List<string> list3 
```

所有列表都具有相同数量的元素（相同的计数）。

我用它来将两个列表与 ZIP 结合起来：

```
var result = list1.Zip(list2, (a, b) => new {
  test1 = f,
  test2 = b
} 
```

我用那个 for`foreach`语句来避免`foreach`每个列表，比如

```
foreach(var item in result){
Console.WriteLine(item.test1 + " " + item.test2);
} 
```

如何在三个列表中使用与 Zip 相似的方法？

谢谢

***编辑：***

我想喜欢：

```
List<string> list1 = new List<string>{"test", "otherTest"};

List<string> list2 = new List<string>{"item", "otherItem"};

List<string> list3 = new List<string>{"value", "otherValue"}; 
```

ZIP 之后（我不知道方法），我想要结果（在 VS2010 调试模式下）

```
[0] { a = {"test"},
      b = {"item"},
      c = {"value"}
    }   

[1] { a = {"otherTest"},
      b = {"otherItem"},
      c = {"otherValue"}
    } 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-24T11:42:58.320

对我来说最明显的方法是使用`Zip`两次。

例如，

```
var results = l1.Zip(l2, (x, y) => x + y).Zip(l3, (x, y) => x + y); 
```

将组合（添加）三个`List<int>`对象的元素。

**更新：**

您可以定义一个新的扩展方法，其作用类似于`Zip`带有三个`IEnumerable`s 的 a，如下所示：

```
public static class MyFunkyExtensions
{
    public static IEnumerable<TResult> ZipThree<T1, T2, T3, TResult>(
        this IEnumerable<T1> source,
        IEnumerable<T2> second,
        IEnumerable<T3> third,
        Func<T1, T2, T3, TResult> func)
    {
        using (var e1 = source.GetEnumerator())
        using (var e2 = second.GetEnumerator())
        using (var e3 = third.GetEnumerator())
        {
            while (e1.MoveNext() && e2.MoveNext() && e3.MoveNext())
                yield return func(e1.Current, e2.Current, e3.Current);
        }
    }
} 
```

用法（在与上述相同的上下文中）现在变为：

```
var results = l1.ZipThree(l2, l3, (x, y, z) => x + y + z); 
```

同样，您的三个列表现在可以与：

```
var results = list1.ZipThree(list2, list3, (a, b, c) => new { a, b, c }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-19T17:19:29.350

我知道还有另一个非常有趣的解决方案。从教育的角度来看，这很有趣，但如果需要执行压缩不同数量的列表 A LOT，那么它也可能有用。

此方法覆盖 .NET 的 LINQ`SelectMany`函数，当您使用 LINQ 的查询语法时，该函数由约定采用。标准`SelectMany`实现执行笛卡尔积。被覆盖的可以进行压缩。实际的实现可能是：

```
static IEnumerable<TResult> SelectMany<TSource, TCollection, TResult>(this IEnumerable<TSource> source,
        Func<TSource, IEnumerable<TCollection>> selector, Func<TSource, TCollection, TResult> select)
{
    using (var e1 = source.GetEnumerator())
        using (var e2 = selector(default(TSource)).GetEnumerator())
            while (true)
                if (e1.MoveNext() && e2.MoveNext())
                    yield return select(e1.Current, e2.Current);
                else
                    yield break;
} 
```

它看起来有点吓人，但它是一种压缩逻辑，如果编写一次，可以在很多地方使用，并且客户端的代码看起来很漂亮——你可以`IEnumerable<T>`使用标准 LINQ 查询语法压缩任意数量的代码：

```
var titles = new string[] { "Analyst", "Consultant", "Supervisor"};
var names = new string[] { "Adam", "Eve", "Michelle" };
var surnames = new string[] { "First", "Second", "Third" };

var results =
    from title in titles
    from name in names
    from surname in surnames
    select $"{ title } { name } { surname }"; 
```

如果你然后执行：

```
foreach (var result in results)
    Console.WriteLine(result); 
```

你会得到：

```
Analyst Adam First
Consultant Eve Second
Supervisor Michelle Third 
```

你应该在你的类中保持这个扩展是私有的，否则你会从根本上改变周围代码的行为。此外，一种新类型将很有用，这样它就不会与 IEnumerables 的标准 LINQ 行为发生冲突。

出于教育目的，我使用此扩展方法创建了一个小型 c# 项目 + 一些好处：[https ://github.com/lukiasz/Zippable](https://github.com/lukiasz/Zippable)

此外，如果您觉得这很有趣，我强烈推荐[Jon Skeet 的 Reimplementing LINQ to Objects 文章](https://codeblog.jonskeet.uk/2010/12/27/reimplementing-linq-to-objects-part-9-selectmany/)。

玩得开心！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T13:21:04.167

这是我们需要决定是使用具有更好可读性的代码还是更短的 Linq 代码的情况之一，我更喜欢代码可读性。

```
class Program
{
    static void Main(string[] args)
    {
        List<string> list1 = new List<string> { "test", "otherTest" };
        List<string> list2 = new List<string> { "item", "otherItem" };
        List<string> list3 = new List<string> { "value", "otherValue" };

        var result = CombineListsByLayers(list1, list2, list3);
    }

    public static List<string>[] CombineListsByLayers(params List<string>[] sourceLists)
    {
        var results = new List<string>[sourceLists[0].Count];

        for (var i = 0; i < results.Length; i++)
        {
            results[i] = new List<string>();
            foreach (var sourceList in sourceLists)
                results[i].Add(sourceList[i]);
        }
        return results;
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-17T06:40:55.437

您可以将 C# 中的许多列表与级联 zip 方法和匿名类以及元组结果结合起来。

```
List<string> list1 = new List<string> { "test", "otherTest" };
List<string> list2 = new List<string> { "item", "otherItem" };
List<string> list3 = new List<string> { "value", "otherValue" };

IEnumerable<Tuple<string, string, string>> result = list1
    .Zip(list2, (e1, e2) => new {e1, e2})
    .Zip(list3, (z1, e3) => Tuple.Create(z1.e1, z1.e2, e3)); 
```

结果是：

```
[0]
{(test, item, value)}
    Item1: "test"
    Item2: "item"
    Item3: "value" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-28T09:42:35.087

用于压缩任意数量的不同大小列表的通用解决方案：

```
public static IEnumerable<TItem> ZipAll<TItem>(this IReadOnlyCollection<IEnumerable<TItem>> enumerables)
{
   var enumerators = enumerables.Select(enumerable => enumerable.GetEnumerator()).ToList();
   bool anyHit;
   do
   {
      anyHit = false;
      foreach (var enumerator in enumerators.Where(enumerator => enumerator.MoveNext()))
      {
          anyHit = true;
          yield return enumerator.Current;
      }
   } while (anyHit);

   foreach (var enumerator in enumerators)
   {
      enumerator.Dispose();
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-13T10:22:50.743

您可以将这些组合`List<string>`成`List<List<string>>`并聚合它

```
List<string> list1 = new List<string> { "test", "otherTest" };
List<string> list2 = new List<string> { "item", "otherItem" };
List<string> list3 = new List<string> { "value", "otherValue" };

var list = new List<List<string>>() { list1, list2, list3 }
    .Aggregate(
        Enumerable.Range(0, list1.Count).Select(e => new List<string>()),
        (prev, next) => prev.Zip(next, (first, second) => { first.Add(second); return first; })
    )
    .Select(e => new
    {
        a = e.ElementAt(0),
        b = e.ElementAt(1),
        c = e.ElementAt(2)
    }); 
```

结果

```
[
  {
    "a": "test",
    "b": "item",
    "c": "value"
  },
  {
    "a": "otherTest",
    "b": "otherItem",
    "c": "otherValue"
  }
] 
```

参见[dotnetfiddle.net](https://dotnetfiddle.net/GxypH3)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-16T04:55:23.523

### 使用**.NET 6**

.. 及以上`Zip`可用于生成包含来自三个指定序列的元素的元组序列。[[文档]](https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.zip?view=net-6.0#System_Linq_Enumerable_Zip__3_System_Collections_Generic_IEnumerable___0__System_Collections_Generic_IEnumerable___1__System_Collections_Generic_IEnumerable___2__)

```
var titles = new string[] { "Analyst", "Consultant", "Supervisor"};
var names = new string[] { "Adam", "Eve", "Michelle" };
var surnames = new string[] { "First", "Second", "Third" };

IEnumerable<(string Title, string Name, string Surname)> zip = titles.Zip(names, surnames); 
```

# ruby - 使用附加参数调用块中的所有方法

> ID：10297129
> 
> 赞同：3
> 
> 时间：2012-04-24T11:40:47.660
> 
> 标签：ruby, lambda, metaprogramming

我有以下 Ruby 类：

```
class Sandwich
  class << self
    def prepare_with(special_ingredient, &block)
      # Some very very special magic is done here to
      # call instead just .fry! as .fry!({:ingredient=>special_ingredient})
      # and for any other method the same
    end

    def fry!(opts= {})
    end

    def add_mayo(opts = {})
    end
  end
end

class Hamburger < Sandwich
end

=> Hamburger.prepare_with(bacon) do
=>   Hamburger.fry!
=>   Hamburger.add_mayo
=> end 
```

我想修改调用`Hamburger`类的所有方法并将附加添加`key=>value`到最后一个参数哈希中。

应该使用一些特殊的魔法来`Sandwich.prepare_with`调用 Sandwich 的所有方法（及其所有后代），例如as 。`call``.fry!``.fry!({:ingredient=>special_ingredient})`

**已编辑**：理想情况下，我们需要过滤内部块代码的调用的附加点，例如以下代码会引发任何 prepare_with 代码的异常，它不会过滤它使用附加参数调用的方法：

```
=> Hamburger.prepare_with(bacon) do
=>   Hamburger.fry!
=>   h = Hash.new("Go fish") 
=>   Hamburger.add_mayo
=> end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:38:04.813

为什么不是`fry!`实例`add_mayo`方法？

编辑：作为问题海报所要求的，没有实例方法：

```
class Sandwich
  class << self
    def prepare_with(special_ingredient, &block)
      @@default_opts = {:special_ingredient => special_ingredient}
      block.call
    end

    def fry!(opts={})
      opts = opts.merge(@@default_opts)
      puts "fried with #{opts[:special_ingredient]}"
    end

    def add_mayo(opts = {})
      puts "added mayo"
    end
  end
end

class Hamburger < Sandwich
end

Hamburger.prepare_with(:bacon) do 
  Hamburger.fry!
  Hamburger.add_mayo
end

Hamburger.prepare_with(:tofu) do 
  Hamburger.fry!
end 
```

输出：

```
fried with bacon
added mayo
fried with tofu 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:33:56.693

简短的回答

```
block.call :ingredient => special_ingredient 
```

长答案

我认为你应该处理对象。add_mayo 和fry 应该是实例方法而不是类方法。

我会看到类似的东西

```
class Sandwich
  class << self
    def prepare &block
      sandwich = self.new
      block.call sandwich
      sandwich
    end
  end

  def fry(opts = {})
    #stuff
  end

  def add_mayo(opts = {})
  end
end

class Hamburger < Sandwich; end

hamburger = Hamburger.prepare do |h|
  h.fry :ingredient => :bacon
  h.add_mayo
end 
```

# tcl - Tcl 我可以将对象分配给 reg 变量吗？

> ID：10297130
> 
> 赞同：1
> 
> 时间：2012-04-24T11:40:56.600
> 
> 标签：tcl, incr-tcl

我想将一个对象分配给一个 reg 变量，但我不知道我是否可以这样做，如果可以，我该怎么做，语法是什么？

例如，我有一堂课`Var`：

```
 class Var {
        constructor {Name values order} {} {
            set mName $Name  
            set mValues $values
            set mOrder $order            
        }
        destructor {
        }
        public method GetName {} {
             return $mName 
        }
        public variable mOrder
        public variable mName
        public variable mValues   
  } 
```

和一个对象：

```
 Var::var_ 
```

我可以将对象 var 分配给 reg 变量吗？

像这样的东西：

```
reg set var/var_ Var::var_ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:31:32.037

您可以将[incr Tcl] 对象的*名称存储在**任何*变量中。只需使用`set`.

类变量可以通过限定名称引用：*cls* `::`*var*

如果您想要引用可在其类的方法之外使用的实例变量，则应`itcl::scope`在方法（或构造函数）内使用以生成令牌。返回的令牌的格式没有很好的记录（并且可能会更改）。

* * *

尝试其中一些事情：

```
package req Itcl
itcl::class Var {
    constructor {Name values order} {} {
        set mName $Name  
        set mValues $values
        set mOrder $order            
    }
    destructor {}
    public method GetName {} {
        return $mName 
    }
    public method GetNameVar {} {
        return [itcl::scope mName]
    }
    public variable mOrder
    public variable mName
    public variable mValues   
}
set foo [Var var_ a b c]
puts $foo
puts [$foo GetName]
append [$foo GetNameVar] [$foo GetName] "rdvark"
puts [var_ GetName]
puts [var_ GetNameVar] 
```

在我的系统上，我得到以下输出：

```
var_
一个
土豚
@itcl ::var_ ::Var::mName

```

# c# - 写入文件时输出不同

> ID：10297134
> 
> 赞同：0
> 
> 时间：2012-04-24T11:41:07.430
> 
> 标签：c#, .net

我正在创建一个二进制文件，为此我正在使用

```
namespace BinaryStream
{
    class Program
    {
        static void Main(string[] args)
        {
            string filename = @"c:\happybirthday.txt";
            using (BinaryWriter binWriter =
    new BinaryWriter(File.Open(filename, FileMode.Create)))
            {
                string name = "Sachin";
                string wishes = "happy birthday";

                binWriter.Write(name.ToCharArray());
                binWriter.Write(wishes.ToCharArray());
            }

        }
    }
} 
```

如果使用 binWriter.Writer(name)，则文件包含一些特殊字符。但是，如果我将字符串转换为 chararray 并写入文件，则该文件包含普通文本（没有任何特殊字符）。

这背后的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:49:57.610

重载以`Write(string)`长度为前缀：

从这里：http: [//msdn.microsoft.com/en-us/library/yzxa6408.aspx](http://msdn.microsoft.com/en-us/library/yzxa6408.aspx)

> 以长度为前缀的字符串通过在字符串前面加上一个包含该字符串长度的单个字节或单词来表示字符串长度。此方法首先将字符串的长度写入为 UTF-7 编码的无符号整数，然后使用 BinaryWriter 实例的当前编码将那么多字符写入流。

而`Write(char[])`不是。当通过文本查看打开时，这些额外信息将显示为奇怪的数据。

在查看读取行为时，原因很明显。`BinaryReader.ReadChars`需要知道要读取多少个字符，同时`BinaryReader.ReadString`通过查看长度前缀来解决。

**编辑：**可能重复，额外信息无论如何：[使用 System.IO.BinaryWriter 写入字符串与 char 数组的区别](https://stackoverflow.com/questions/1014727/difference-in-writing-string-vs-char-array-with-system-io-binarywriter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:16:31.903

BinaryWriter.Write(string) 写入第一个长度，然后将字符串写入文件。因此，您在文件中找到了指向该字符串长度的特殊字符。

此功能的 msdn 说明：

以长度为前缀的字符串通过在字符串前面加上一个包含该字符串长度的单个字节或单词来表示字符串长度。此方法首先将字符串的长度写入为 UTF-7 编码的无符号整数，然后使用 BinaryWriter 实例的当前编码将那么多字符写入流。

# html - 3个div，1个固定宽度

> ID：10297136
> 
> 赞同：1
> 
> 时间：2012-04-24T11:41:14.710
> 
> 标签：html, css

我不确定这在 html css 中是否可行。

我在一行中有 3 个 div，第二个 div 必须占据 200px 宽度，第一个和最后一个 div 必须占据剩余宽度。

[http://jsfiddle.net/Garav/gk9t3/](http://jsfiddle.net/Garav/gk9t3/)

其余两个 div 在 fiddle 中固定为 100px。有没有办法让它们在两侧平均填充屏幕的剩余部分，以便第二个 div 始终保持在中心？

注意：父 div 的宽度不是固定的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:00:07.187

证明：http: [//jsfiddle.net/5Br5A/](http://jsfiddle.net/5Br5A/)

CSS

```
.image-placeholder{
    background: #0f0;
    width: 200px;
    height : 200px;
    clear:none;
    float: left;
}
.fill-remaining {
    height:200px;
    width:50%;
    clear:none;
}
.fill-remaining.left {
    background:#f00;
    float: left;
    margin-right:-100px;
}
.fill-remaining.left>div {
    padding-right: 100px;
}
.fill-remaining.right {
    background:#00f;
    float: right;
    margin-left:-100px;
}
.fill-remaining.right>div {
    padding-left: 100px;
}​ 
```

HTML

```
<div class="fill-remaining left">
</div>
<div class="fill-remaining right">
</div>
<div class="image-placeholder">
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:50:13.223

只需使用 margin: 0 auto; 不需要保证金 div：http: [//jsfiddle.net/gk9t3/3/](http://jsfiddle.net/gk9t3/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:47:47.330

我在另一个 div 中添加了中间 div，并将其居中。看看这是否符合您的要求：http: [//jsfiddle.net/gk9t3/1/](http://jsfiddle.net/gk9t3/1/)

# html - CSS - 如何使单词的结尾变得模糊？

> ID：10297137
> 
> 赞同：4
> 
> 时间：2012-04-24T11:41:17.623
> 
> 标签：html, css, blur

当您将光标移到带有消息的框上时，我真的很喜欢 twitter 如何模糊长名称的结尾。

我想尝试做一些类似的东西，但有一点不同——我有一个 DIV（比如说**width: 100px;**），当里面的文本长于 100px 时——那么各个文本的结尾就会模糊...

谁能给我一些例子/来源/建议，该怎么做？

谢谢

![例子](../Images/631892f9bf18035d010f5052e1a80b56.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T11:54:11.470

使用以下 HTML：

```
<div>
    <span>@someUserName</span>
</div>​ 
```

和 CSS：

```
span {
    display: inline-block;
    position: relative;
}

span::after {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    width: 3em;
    content: '';
    background: -moz-linear-gradient(left, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(255,255,255,0)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* IE10+ */
    background: linear-gradient(left, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=1 ); /* IE6-9 */
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3GgzU/)。

当然，您也可以在生成的内容中使用百分比宽度：[JS Fiddle proof of concept](http://jsfiddle.net/davidThomas/3GgzU/1/)。

* * *

**针对下面的评论进行编辑**，报告 IE 8（可能更低）不适用于上述解决方案：

> 虽然在 IE8 中不适合我...

我已将 HTML 更新为以下内容：

```
<div>
    <span>@someUserName
        <!--[if ie]>
            <span class="ieFadeout"></span>
        <![endif]-->
    </span>
</div>​ 
```

并更新了 CSS：

```
div > span {
    display: inline-block;
    position: relative;
}

div > span::after {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    width: 3em;
    content: '';
    background: -moz-linear-gradient(left, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(255,255,255,0)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* IE10+ */
    background: linear-gradient(left, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=1 ); /* IE6-9 */
}

span > .ieFadeout {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 3em;
    background-color: transparent;
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=1 ); /* IE6-9 */

}​ 
```

[JS Fiddle 演示，在 Win XP/IE 8 和 Chrome 18（如前）](http://jsfiddle.net/davidThomas/3GgzU/4/)中工作。

参考：

*   [IE 的条件注释](http://www.quirksmode.org/css/condcom.html)。
*   [CSS渐变生成器](http://www.colorzilla.com/gradient-editor/)。
*   [CSS 线性渐变](https://developer.mozilla.org/en/CSS/linear-gradient)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T11:43:28.360

你将另一个 DIV 放在它上面，并给它一个半透明的 PNG 背景，它从完全透明渐变为完全白色。就像是：

```
<div style="position: relative; width: 100px">
    @GuyKawasaki
   <div style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; background-image:url(overlay.png)"></div>
</div> 
```

# php - 在没有分页脚本的情况下将计数划分为 2 页

> ID：10297140
> 
> 赞同：0
> 
> 时间：2012-04-24T11:41:43.517
> 
> 标签：php

我从我的数据库中检索 30 个数据。我想要的是最后 15 个必须显示在不同的链接中。

例如

http://myurk/management/feedback/2

在我的框架中，

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:45:46.030

将 url 的最后一部分作为参数，并使用它为您的数据库查询添加偏移量。

# python - 为什么我不能在我的主要 Python 安装文件夹中 pip 安装包？Virtualenv 碍事？

> ID：10297148
> 
> 赞同：0
> 
> 时间：2012-04-24T11:42:14.523
> 
> 标签：python, virtualenv, pip, virtualenvwrapper

我安装了`virtualenv`和`virtualenvwrapper-win`. 现在，当我有 3 个 Python 位置时，尽管其中一个是`.bat`. 看？

```
C:\>where python
C:\Python27\python.exe
C:\env\Scripts\python.bat
C:\env\Scripts\python.exe 
```

另外，当我尝试安装新库时，`pip`它们最终会进入

```
C:\env\Lib\site-packages 
```

例如`pip install Flask`，我刚刚打开 Python 解释器并尝试像这样导入它：

```
>>> import Flask
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named Flask 
```

所以我想我的问题是，为什么`C:\env`甚至存在？我安装的时候已经有一段时间了`virtualenv`，我认为该`env`目录是在那时创建的。无论如何，我希望能够将软件包安装到我的主要 Python 安装中，`C:\Python27\Lib\site-packages`或者这不是明智之举吗？我听说人们应该总是使用`virtualenv`. 我愿意接受有关如何解决此问题和最佳实践的建议。

我也永远无法`virtualenvwrapper-win`上班。它的作者告诉我它不会起作用，因为它认为我系统的 Python 的主要安装位于`C:\env\Scripts\python.exe`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:23:56.217

您使用 virtualenv 为项目组织不同版本的 Python 和包。例如，较旧的项目可能使用 python 2.7 和较新的项目 3.1。如果您使用 virtualenv，您可以分离站点包。并且这两个项目仍然可以在同一个系统上运行。

Virtualenv 也有助于部署。您只能将 env 文件夹从本地移动到服务器，并保持主要的 python 项目完好无损。

它主要用于在一个系统上组织多个 python 项目。

[virtualenv 它做了什么](http://www.virtualenv.org/en/latest/index.html#id4)

# android - 在 Android 中收听应用安装/升级广播消息

> ID：10297149
> 
> 赞同：11
> 
> 时间：2012-04-24T11:42:14.850
> 
> 标签：android, installation, broadcastreceiver, broadcast

使用 Lookout 应用程序 (https://play.google.com/store/apps/details?id=com.lookout)，我看到每次安装或升级应用程序时，它都会自动扫描此应用程序以确保它不是恶意的。

关注 Lookout，我编写了一个简单的应用程序，它会在安装或升级每个应用程序时收听广播消息。AFAIK，有一些类型的 IntentFilter 用于广播消息，它是：

*   Intent.ACTION_PACKAGE_ADDED
*   Intent.ACTION_PACKAGE_CHANGED
*   Intent.ACTION_PACKAGE_INSTALL

我希望`Intent.ACTION_PACKAGE_ADDED`是答案，但它是错误的（ACTION_PACKAGE_ADDED：设备上已安装一个新的应用程序包。数据包含包的名称。请注意，新安装的包不会收到此广播。）while`ACTION_PACKAGE_INSTALL`已弃用。

谁能告诉我更好的方法？欢迎任何帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T09:51:37.777

如果您正在安装应用程序 A，则设备上的所有其他应用程序将获得该`Intent`应用程序 A 是新安装的应用程序，而不是 A 本身，因为它似乎没有任何用处。现在，如果以后安装或更改了其他应用程序，A 将获得广播。

如果您想了解您的应用程序的安装时间或其他应用程序的最后安装或更新时间，您可以随时使用`PackageManager`：

```
PackageManager pm = context.getPackageManager();
ApplicationInfo appInfo = pm.getApplicationInfo("app.package.name", 0);
String appFile = appInfo.sourceDir; 
long installed = new File(appFile).lastModified(); 
```

这`app.package.name`是您要查找安装时间的应用程序的包名称。如果您想将它用于您的应用程序，请传入您的应用程序的包名称。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-20T04:59:12.367

你可以试试这个接收器和权限。（但这似乎只适用于 /system/app）^^"

```
<receiver
    android:name="com.your.receiver"
    android:enabled="true"
    android:exported="true" >
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_ADDED" />
                <action android:name="android.intent.action.PACKAGE_REMOVED" />
                    <data android:scheme="package"/> 
                </intent-filter>
 </receiver>
 <uses-permission android:name="android.permission.BROADCAST_PACKAGE_REMOVED" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-10T20:39:38.970

Android 不会向您发送正在安装的广播，但 Google Play 会。如果您的应用程序是通过 Amazon 或通过调试器加载的，这将无济于事，但如果您的应用程序是通过 Google Play 安装的，它确实允许您运行代码：[https ://developers.google.com/android/reference/com/谷歌/android/gms/tagmanager/InstallReferrerReceiver](https://developers.google.com/android/reference/com/google/android/gms/tagmanager/InstallReferrerReceiver)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T07:42:44.670

您需要有两个应用程序，其中一个监视另一个应用程序的安装和升级。

# vba - 是否有任何工具可以跟踪 Excel 单元格和 VBA 代码的依赖关系？

> ID：10297150
> 
> 赞同：5
> 
> 时间：2012-04-24T11:42:16.733
> 
> 标签：vba, excel, dependencies

Excel 具有跟踪单元格的`precedents`和`dependents`的功能（通过 menu `Tools > Auditing`）。例如，如果我们有`= C3 + 1`in `C4`，那么 Excel 可以跟踪它`C4`是依赖于`C3`(`C3`是`C4`) 的先例。

由于 VBA 代码对 Excel 单元格也有影响，我想知道是否有任何工具可以跟踪 VBA 代码和 Excel 单元格之间的依赖关系。

例如，如果有一行 VBA 代码`Range("C4").Value = Range("C3").Value + 1`，是否有一个工具可以跟踪它`C4`可能依赖于`C3`？

另外，如果有一行 VBA 代码`Range("C4").Value = 5`，是否有一个工具可以跟踪`C4`可能被这段代码修改的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:52:21.320

VBA 所做的更改不容易被跟踪（因为单元格可能被函数以任意方式修改或作为字符串传递给函数）。

你可以做一些事情，但它有点棘手，我想它不会真正让你满意：你可以检测一个单元格是否有任何依赖关系。

这个怎么运作？写一个这样的宏：

```
Private Sub Worksheet_Change(ByVal Target As Excel.Range)
End Sub 
```

您可以将更改的单元格登录到即时窗口。现在更改单元格值，在即时窗口中，您将看到依赖于您更改的单元格的所有单元格。缺点？

*   不幸的是，逆过程是不可能的：您无法选择一个单元格并查看其所有依赖项。
*   该过程不能（真正）自动化，因为通常从代码中您不知道单元格的有效值（您可能会根据单元格类型猜测，但由于规则无法确定，“0”可能是有效值，“1”可能是有效值“例如，不）。
*   它不能真正检测到每个依赖项（如果两个给定值不会在单元格中产生变化，那么您将看不到该依赖项）。
*   对于大型工作表，它可能非常乏味，因此仅在应用于一小组单元格时才指示（如果我更改/移动此单元格怎么办？它会影响什么吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T15:01:56.547

我不知道以下内容是否能回答您的问题 - 但我认为这很有帮助。

该`Range`对象具有`Precedents`and`Dependents`属性。这允许您在 VBA 中执行菜单`Tools->auditing`在 UI 中所做的操作。（我必须承认@Bathsheba 对最近这个问题的回答[https://stackoverflow.com/a/20635795/1967396](https://stackoverflow.com/a/20635795/1967396)教我这个……）。

```
Dim prec, p
Set prec = [C4].Precedents  ' [C4] is shorthand for Range("C4")
For Each p in prec
  Debug.Print "Precedent found: " & p.Address
next p 
```

注意 - 你确实需要`Set`; 否则你最终会得到先例的**值**，而不是对**对象**的引用（在这种情况下你看不到地址......）

显然，你可以用 做同样的事情`.Dependents`：

这并不能回答“如果有一行 VBA 代码创建关系”的问题……这尤其棘手，因为您可以通过变量和不可预测的偏移量修改单元格，例如

```
For j = 1 To n
  [B5].Offset(j+3, 2+k) = [A2].Offset(Int(DateValue(Now)) Mod 3, 1)
Next j 
```

哪个单元格取决于您运行此脚本的日期...</p>

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-03-04T20:03:55.367

也许这对你有用。我编写了一个宏，以便您可以选择一个范围并显示该范围内每个单元格的优先级或依赖性。

```
Sub tracerange()

On Error Resume Next

    Dim R As Range
    Dim DorP As Variant
    R = ActiveWindow.RangeSelection.Address
    DorP = LCase(Application.InputBox("Please input Precedents or Dependece (P or D):", , , , , , , Type:=2))
        For Each R In Selection
            If DorP = "p" Then
                R.ShowPrecedents
            Else
                R.ShowDependents
            End If
            DoEvents
        Next

End Sub 
```

# tomcat - tomcat 6 的全局错误页面

> ID：10297156
> 
> 赞同：0
> 
> 时间：2012-04-24T11:42:44.597
> 
> 标签：tomcat, global, custom-error-pages

> **可能重复：**
> [有没有办法为tomcat的web.xml中的所有错误代码配置一个自定义错误页面的使用？](https://stackoverflow.com/questions/8135388/is-there-a-way-to-configure-usage-of-one-custom-error-page-for-all-error-codes-i)

我想将所有 HTTP 错误（4xx、5xx）重定向到全局错误页面。有没有比在我的 web.xml 中添加大量错误页面元素更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:37:53.763

编写自定义报错 Valve 并指定给 Host 的 errorReportValveClass

# java - 在java中为具有特殊字符的字符串赋值，如\“和其他字符

> ID：10297163
> 
> 赞同：0
> 
> 时间：2012-04-24T11:43:20.683
> 
> 标签：java, string, double-quotes

有人可以告诉我如何将以下值分配给java中的字符串。

> “00000000-00000000000005”，“，”00000000-00000000000001“，[”[“51371DE4-622B-11E1-BB0C-00264C17B68”，B607E081-5F87-11E1-A166-002264C24CF0“]， [{"2154\|0\|8CEC44F365CCAD0\|\|0\|1\|0\|0\|14\|3\,11"},{"2150\|0\|8CEC1AB9F9BB9D0\|\|0 \|1\|0\|0\|14\|3"}],null,{"00000000-0000-0000-0000-000000000005",null,,FirstPage,5,1,"00000000-0000-0000- 0000-000000000000","",null,Date,false,false,"",null,-1,-1,false,Off,0,null,"2012-04-17T11\:45\:23.690Z",假}，真，假，空，空，空，假，假，假，假

请注意，我想从`"`我的字符串开始。我试图把`\`每个`"`字符串值的一部分放在前面，但这不起作用。任何帮助将不胜感激！

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:50:26.923

您的字符串中有很多保留字符 - 每个都需要通过`\`在其前面放置来免除 - 注意这包括字符串中出现的“\”。

我假设你的问题是让这个字符串编译 - 把它分解成更小的块，看看每个块中是否有任何编译问题。然后，您可以将这些块打印到控制台以检查它们是否按照您的要求表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T11:57:09.837

干得好，

```
String escapedString =
            "\"00000000-0000-0000-0000-000000000005\",\"00000000-0000-0000-0000-000000000001\",[\"51371de4-622b-11e1-bb0c-002264c17b68\",\"b607e081-5f87-11e1-a166-002264c24cf0\"],[{\"2154\\|0\\|8CEC44F365CCAD0\\|\\|0\\|1\\|0\\|0\\|14\\|3\\,11\"},{\"2150\\|0\\|8CEC1AB9F9BB9D0\\|\\|0\\|1\\|0\\|0\\|14\\|3\"}],null,{\"00000000-0000-0000-0000-000000000005\",null,,FirstPage,5,1,\"00000000-0000-0000-0000-000000000000\",\"\",null,Date,false,false,\"\",null,-1,-1,false,Off,0,null,\"2012-04-17T11\\:45\\:23.690Z\",false},true,false,null,null,null,false,false,false,false"; 
```

在 Philipp Reichart 提到的之间，请给回答您问题的人打分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:54:37.920

```
String str = "\"00000000-0000-0000-0000-000000000005\",\"00000000-0000-0000-0000-000000000001\",[\"51371de4-622b-11e1-bb0c-002264c17b68\",\"b607e081-5f87-11e1-a166-002264c24cf0\"],[{\"2154\\|0\\|8CEC44F365CCAD0\\|\\|0\\|1\\|0\\|0\\|14\\|3\\,11\"},{\"2150\\|0\\|8CEC1AB9F9BB9D0\\|\\|0\\|1\\|0\\|0\\|14\\|3\"}],null,{\"00000000-0000-0000-0000-000000000005\",null,,FirstPage,5,1,\"00000000-0000-0000-0000-000000000000\",\"\",null,Date,false,false,\"\",null,-1,-1,false,Off,0,null,\"2012-04-17T11\\:45\\:23.690Z\",false},true,false,null,null,null,false,false,false,false"; 
```

将 '\' 替换为 '\\' 和 '"' 替换为 '\"'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T11:58:07.823

字符串 X="\"嘿\\""; System.out.println(X);

我的输出为：“嘿\”

# javascript - 如何使用Javascript打开最大化窗口？

> ID：10297168
> 
> 赞同：50
> 
> 时间：2012-04-24T11:43:45.810
> 
> 标签：javascript, internet-explorer

我正在使用 Javascript`self.open()`在新窗口中打开一个链接，我希望该窗口最大化。我尝试了这个`fullscreen=yes`选项，它真的没有做我想要的。我正在使用以下代码：

```
self.open(pageLoc,popUpName,'height=1600,width=1800,resizable=yes,scrollbars=yes,toolbar=yes,menubar=yes,location=yes'); 
```

如果我还提到`fullscreen=yes`，然后窗口打开就像你按 F11。但我不希望那样。我想要的是当我双击**IE**并单击右上角的最大化图标时。

正如我给出的`height`和`width`值如此之大，它接近最大化窗口但不是实际的最大化窗口。（我之所以这么说是因为即使现在我点击最大化按钮，它也会进一步扩大一点）

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-04-24T12:05:49.660

```
var params = [
    'height='+screen.height,
    'width='+screen.width,
    'fullscreen=yes' // only works in IE, but here for completeness
].join(',');
     // and any other options from
     // https://developer.mozilla.org/en/DOM/window.open

var popup = window.open('http://www.google.com', 'popup_window', params); 
popup.moveTo(0,0); 
```

除非用户真的想要它，否则请不要打开弹出窗口，否则他们会诅咒您并将您的网站列入黑名单。;-)

**编辑**：糟糕，正如 Joren Van Severen 在评论中指出的那样，这可能没有考虑任务栏和窗口装饰（以可能依赖于浏览器的方式）。意识到。似乎忽略高度和宽度（只有参数是`fullscreen=yes`）似乎适用于 Chrome，也许也适用于 Firefox；最初的“全屏”功能因令人讨厌而在 Firefox 中被禁用，但已被最大化取代。[这直接与https://developer.mozilla.org/en/DOM/window.open](https://developer.mozilla.org/en/DOM/window.open)同一页面上的信息相矛盾，后者说窗口最大化是不可能的。根据浏览器的不同，可能支持也可能不支持此“功能”。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-24T11:50:03.647

```
 window.open('your_url', 'popup_name','height=' + screen.height + ',width=' + screen.width + ',resizable=yes,scrollbars=yes,toolbar=yes,menubar=yes,location=yes') 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-04-14T12:06:37.073

*我目前*能找到的打开最大化窗口的最佳解决方案是（Internet Explorer 11、Chrome 49、Firefox 45）：

```
 var popup = window.open("your_url", "popup", "fullscreen");
  if (popup.outerWidth < screen.availWidth || popup.outerHeight < screen.availHeight)
  {
    popup.moveTo(0,0);
    popup.resizeTo(screen.availWidth, screen.availHeight);
  } 
```

见[https://jsfiddle.net/8xwocrp6/7/](https://jsfiddle.net/8xwocrp6/7/)

**注意 1**：它不适用于 Edge (13.1058686)。不确定它是否是错误或是否符合设计（我已经填写[了错误报告](https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7205972/)，我们将看看他们对此有何评论）。这是一种解决方法：

```
if (navigator.userAgent.match(/Edge\/\d+/g))
{
    return window.open("your_url", "popup", "width=" + screen.width + ",height=" + screen.height);
} 
```

**注意 2**：如果您打开的窗口位于另一个域上，则将无法正常工作（拒绝访问）`moveTo`。`resizeTo`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T08:19:12.293

如果我当时使用 Firefox`screen.width`并且`screen.height`工作正常，但在 IE 和 Chrome 中它们不能正常工作，而是以最小尺寸打开。

`10000`是的，我尝试为两者都提供太大的数字`height`，`width`但不完全是最大化的效果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T11:54:11.443

签出这个 jquery 窗口插件： http: [//fstoke.me/jquery/window/](http://fstoke.me/jquery/window/)

```
// create a window
sampleWnd = $.window({
   .....
});

// resize the window by passed w,h parameter
sampleWnd.resize(screen.width, screen.height); 
```

# ajax - 找到一种使用 f:ajax 标签在初始页面加载时加载链接的方法

> ID：10297171
> 
> 赞同：0
> 
> 时间：2012-04-24T11:43:55.753
> 
> 标签：ajax, jsf

我是使用 f:ajax 标记和 jsf 的新手。当使用 h:selectOneMenu 标记发生更改事件时，我已经能够使用此标记在我的页面上放置一个链接。但是现在我希望在页面最初加载时放置链接，即使用我的侦听器方法检查 h:selectonemenue 的当前值是否满足在页面最初加载时显示链接的理由。谢谢您期待答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:50:19.557

> *但是现在我希望在页面最初加载时放置链接，即使用我的侦听器方法检查 h:selectonemenue 的当前值是否满足在页面最初加载时显示链接的理由*

只需使用`rendered`属性。

```
<h:link ... rendered="#{bean.selectOneMenuValue == 'desiredValue'}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:14:29.897

如果你使用 jQuery，你可以使用下面的脚本和一个隐藏的 commandLink 来调用你的 ajax 监听器：

```
<script type="text/javascript">
    jQuery(document).ready(function(){
       $('hiddenGlobal\\:link').onclick();
    });
</script>
<h:form id="hiddenGlobal" style="display:none">
        <h:commandLink id="link">
            <f:ajax event="click" listener="#{yourBean.yourListener}"/>
        </h:commandLink>
</h:form> 
```

如果你不在 jQuery 上，你可以使用`window.onload`：

```
window.onload = function() {
    document.getElementById('hiddenGlobal:link').onclick();
}; 
```

# c# - FLV 体长

> ID：10297172
> 
> 赞同：0
> 
> 时间：2012-04-24T11:44:02.557
> 
> 标签：c#, audio, stream, bit-manipulation, flv

我正在制作自己的 FLV 音频下载器，而不使用外部库。我正在关注此文档：

[http://osflash.org/flv](http://osflash.org/flv)

在 FLV 标签类型中，有三个有趣的值：

*BodyLength*，*Timestamp*，*StreamId*类型`uint24_be`。如何阅读它们？我在这里找到了答案：

[在 C# 中从 FLV 流中提取音频](https://stackoverflow.com/questions/1693656/extract-audio-from-flv-stream-in-c-sharp)

但是我不明白一些事情：

如果*Timestamp*和*StreamId*都是`uint24_be`（也是什么`uint24_be`？）那为什么

```
reader.ReadInt32(); //skip timestamps 
ReadNext3Bytes(reader); // skip streamID 
```

还有具体是做什么的`ReadNext3Bytes`？为什么不像这样读取 3 个下一个字节：

```
reader.ReadInt32()+reader.ReadInt32()+reader.ReadInt32(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:07:54.513

你不能使用，`reader.ReadInt32()+reader.ReadInt32()+reader.ReadInt32()`因为起初它是 12 个字节而不是 3 个字节，其次，简单地总结这些字节还不够——你应该创建一个 24 位的值。这是更易读的`ReadNext3Bytes`函数版本：

```
int ReadNext3Bytes(System.IO.BinaryReader reader) {
    try {
        byte b0 = reader.ReadByte();
        byte b1 = reader.ReadByte();
        byte b2 = reader.ReadByte();
        return MakeInt(b0, b1, b2);
    }
    catch { return 0; }
}
int MakeInt(byte b0, byte b1, byte b2) {
    return ((b0 << 0x10) | (b1 << 0x08)) | b2;
} 
```

# php - 从目录中删除文件

> ID：10297176
> 
> 赞同：0
> 
> 时间：2012-04-24T11:44:21.123
> 
> 标签：php, delete-file

首先，我知道使用 Unlink 从目录中删除单个文件。但是，我想知道的是如何设置它，以便我可以拥有一个 html 界面并能够选择目录中的所有文件。

代码会很好，但问你们这些优秀的人是不公平的。所以朝着正确的方向推进也一样好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T12:21:12.687

此代码列出了给定目录中带有删除链接的所有文件。单击删除按钮时，它会调用 php 文件以使用 ajax(jquery) 函数删除文件。检查是否有多个文件不具有相同的名称。

列出目录中的所有文件

```
<?php
$directory  = "your directory path"; 
$images = scandir($directory);
$ignore = Array(".", "..");
$count=1;
echo '<table border=1>';
foreach($images as $dispimage){
    if(!in_array($dispimage, $ignore)){
    echo "<tr id='del$count'><td>$count</td><td>$dispimage</td><td><input type='button' id='delete$count' value='Delete' onclick='deleteFile(\"$dispimage\",$count,\"$directory\");'></td></tr>";
    $count++;
    }
}
echo '</table>';
?>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
function deleteFile(fname,rowid,directory)
{
    $.ajax({ url: "deletefile.php",
        data: {"filename":fname,"directory":directory},
        type: 'post',
        success: function(output) {
          alert(output);
          $("#del"+rowid).remove();
        }
    });
}
</script> 
```

删除文件.php

```
<?php
$filename = $_POST['filename'];
$path = $_POST['directory'];
if(file_exists($path."/".$filename)) { 
 unlink($path."/".$filename); //delete file
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:01:08.867

以下功能用于删除整个目录。

```
function readDirectory($dir){
$dir = opendir($dir);
while (($file = readdir($dir)) !== false)
  {
    if($file!="." and $file!=".."){
        echo "filename: " . $file . "<br />";
    }
  }
closedir($dir);
}
function rrmdir($dir) {
    if (is_dir($dir)) {
    $objects = scandir($dir);
foreach ($objects as $object) {
if ($object != "." && $object != "..") {
if (filetype($dir."/".$object) == "dir")rrmdir($dir."/".$object); else unlink($dir."/".$object);
}
}   
reset($objects);
rmdir($dir);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:48:25.233

您可以[在此处](http://phpfm.sourceforge.net/)参考php 文件管理器的开源版本。您可以查看其代码或直接使用它。通过在此处粘贴示例代码来执行该操作并不容易。

# python - Python 2.5 字符串，修改后的列表，变成修改后的元组

> ID：10297180
> 
> 赞同：-2
> 
> 时间：2012-04-24T03:15:33.793
> 
> 标签：python, list

我有一个字符串“hello world”，我把它做成了一个需要修改成元组的列表。我有点卡在代码上，希望有人能帮助我。

```
s1=str("hello world")
L1= list(s1)

print type (L1)
list

print L1(5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T03:34:01.023

```
s1="hello world"
L1=s1.split(" ")
t1=tuple(L1)
print type(t1)
tuple

print(t1)
('hello', 'world') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:22:35.270

我想我也找到了另一种方法。

```
s1= str("hello world")

L1= list(s1)

print type  (L1)

print L1 
```

# javascript - 如何更改此代码以使用异步套接字

> ID：10297182
> 
> 赞同：2
> 
> 时间：2012-04-24T11:45:02.790
> 
> 标签：javascript, sockets, firefox-addon, firefox-addon-sdk

我正在使用 Jetpack 开发 Firefox 插件，我需要在插件和用 Java 编写的服务器之间实现通信。必须在插件启动时打开通信，然后每次插件需要它时，它都会向服务器发出请求。但它必须是**同步**的，因为它需要服务器响应才能继续执行。

我一直在寻找 javascript 中同步套接字的示例，但没有得到结果。也许它可以通过异步代码来完成，但我不知道该怎么做。

编辑：这是我的附加组件的代码（使用[jetpack-net](https://github.com/Gozala/jetpack-net)库）：

```
var net = require('net');

var Server = function() {

    this.socket = net.createConnection(6666, 'localhost');      
    this.socket.on('data', function(data) {
        console.log(data.replace(/\n/gm," "));
    }).on('connect', function() {
        //console.log('Socket connected.');         
    }).on('end', function() {
        //console.log('Connection finished.');
    });

    this.findCategory = function(query) {
        this.socket.write(query + "\n");
    }

}

exports.main = function() {

    var gs = new Server();              
    processResult(gs.findCategory('Bye'));

}; 
```

# android - 自定义主题对话框中的 EditText 主题

> ID：10297184
> 
> 赞同：2
> 
> 时间：2012-04-24T11:45:20.293
> 
> 标签：android, themes

我为我的对话框创建了一个简单的自定义主题，但现在使用此主题的对话框中的 EditText 元素不保留漂亮的默认 ICS 主题。

这是我正在使用的主题：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="DarkDialog" parent="@android:style/Theme.Dialog">
    <item name="android:windowFrame">@null</item>
    <item name="android:windowTitleStyle">@style/DarkDialogTitle</item>
    <item name="android:background">#282828</item>
</style>
<style name="DarkDialogTitle">
    <item name="android:textColor">#33B5E5</item>
    <item name="android:paddingLeft">16dip</item>
    <item name="android:paddingRight">16dip</item>
     <item name="android:textSize">22sp</item>
</style> 
```

这就是我使用它时看到的：

![在此处输入图像描述](../Images/509fa301f8d75c3b54f8f14f62fa6d38.png)

有没有办法让我的自定义主题对话框中的 EditText 元素对它们所在的任何设备使用默认主题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:02:36.117

对于要控制的每个 api 级别，您都需要一个主题。

对于小于 11 的 API 值，您的样式基于`@android:style/Theme`

11 到 13 之间`@android:style/Theme.Holo`

14岁及以上`@android:style/Theme.DeviceDefault`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:02:40.510

我猜你需要从 Holo 对话主题派生：

```
<style name="DarkDialog" parent="@android:style/Theme.Holo.Dialog"> 
```

# http - 规范网址链接

> ID：10297188
> 
> 赞同：1
> 
> 时间：2012-04-24T11:45:40.233
> 
> 标签：http, https, seo, canonical-link

我正在使用规范的 url 链接

```
<link rel="canonical" href="http://test123.com" /> 
```

以避免网站的 http 和 https 版本之间的重复内容问题。目前我已经设置了 http 和 https 版本在 head 部分都有规范链接。

这是正确的还是我应该只在 https 版本的头部有规范链接，而在 http 版本上什么都没有？或者这两种方式都重要吗？

（我希望机器人索引我的 http 版本而不是我的 https 版本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:00:14.433

在我看来，您可以像这样在 http 中设置您的规范网址

```
<link rel="canonical" href="http://test123.com" /> 
```

对于 http 和 https。机器人将索引您的 http 规范 url。如果您需要该页面的 https 版本，您可以在 http 页面上进行重定向。如果用户访问`http://test123.com`您可以根据需要将用户重定向到 https 页面。

# c# - 从注册表读取 - 涉及磁盘？限制阅读权限？

> ID：10297192
> 
> 赞同：1
> 
> 时间：2012-04-24T11:46:05.483
> 
> 标签：c#, windows, registry

读取涉及磁盘还是仅涉及 RAM？

它是否始终可供阅读，或者是否存在任何限制，例如某些用户将安全性降级而无法阅读？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:53:55.907

注册表存储在磁盘上，但会被缓存（在某种程度上），所以你基本上是从磁盘读取的，尽管有时你会得到缓存的版本。

虽然通常所有用户都对注册表具有只读访问权限，但仍有部分（例如其他用户配置文件）无法访问。

您应该始终具有只读访问权限`HKEY_LOCAL_MACHINE`（除了 `HKEY_LOCAL_MACHINE\SAM`和`HKEY_LOCAL_MACHINE\SECURITY`受到限制并且只能使用本地系统权限读取）和`HKEY_CURRENT_USER`.

# javascript - 如何在使用 PhoneGap/Cordova 构建的 Android 应用程序中单击按钮播放音频？

> ID：10297193
> 
> 赞同：3
> 
> 时间：2012-04-24T11:46:07.200
> 
> 标签：javascript, android, html, cordova

我正在构建一个类似音板的基本应用程序，它有一些播放声音的按钮。我正在使用 PhoneGap/Cordova，并且正在使用 PhoneGap Build 服务将代码编译为 APK。起初，我使用简单的 HTML5`<audio>`标签，它在桌面浏览器和 Android 浏览器中都能正常工作，但是当打包到 PhoneGap 应用程序中时，没有播放任何声音。

我环顾四周，看到有人提到必须在 PhoneGap 中使用 Media API 而不是标准的 HTML5 音频，因此我通过以下代码更改切换到该 API。

我有以下功能：

```
function doPlay(soundId) {
  var my_media = new Media("/android_asset/www/"+soundId+".mp3",
    function() {
      navigator.notification.alert('Success!', alertDismissed);
    },
    function(err) {
    navigator.notification.alert('Error!', alertDismissed);
  });
  my_media.play();
} 
```

每个按钮都有一个`onclick`类似的处理程序......

```
onclick="doPlay('sound1');" 
```

`index.html`这些文件与、 调用`sound1.mp3`等位于同一目录中`sound2.mp3`。并且该函数`alertDismissed()`也已定义，但它是空的。

但是，它仍然不起作用。点击时没有声音。也没有`'Success'`或`'Error'`消息。是的，我已经获得`notification`并`media`请求了权限。

我在这里很困惑。有任何想法吗？

*更新：*正如@simon-macdonald 所建议的，我放置了本地文件的完整路径（“/android_asset/www/”），但这仍然没有让应用程序工作。没有声音，没有错误/成功警报。:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:54:11.207

您的文件路径不正确。你想做：

```
var my_media = new Media("/android_asset/www/" + soundId+".mp3",
function() {
  navigator.notification.alert('Success!', alertDismissed);
},
function(err) {
navigator.notification.alert('Error!', alertDismissed);
});
my_media.play(); 
```

看看我的迷你教程。

[http://simonmacdonald.blogspot.ca/2011/05/using-media-class-in-phonegap.html](http://simonmacdonald.blogspot.ca/2011/05/using-media-class-in-phonegap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:19:46.147

我感觉您的问题与您编写的代码无关，但也许您忘记在 head 部分中包含 cordova javascript 文件。

```
<script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script> 
```

祝你好运。

# python - JSON返回python可迭代

> ID：10297194
> 
> 赞同：0
> 
> 时间：2012-04-24T11:46:07.597
> 
> 标签：python, json

我试图得到这个回报：

[谷歌 API](https://maps.googleapis.com/maps/api/geocode/json?address=Broadway%20Manhattan&sensor=false)

进入 Python 可迭代对象

到目前为止，我有这个：

```
request = "http://maps.googleapis.com/maps/api/geocode/%s?address=%s&sensor=%s" % (self._output, self._address, self._sensor)
data = urllib.urlopen(request).read()
decoded_data = json.loads('[%s]' % data).pop()
    if decoded_data.get("status") == "OK":
        return decoded_data
    return "" 
```

然而，这只会将外部“包装器”变成字典。我想解码整个块，以便我可以轻松访问这些值并在需要时引发异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:50:50.310

你为什么把它包装在一个列表中？它是一个 JSON 对象，非常干净地映射到 Python 字典。只是做`decoded_data = json.loads(data)`，然后你可以做`decoded_data['results'][0]['formatted_address']`等等。

# sharepoint - Project Server 2010 工作流无法更新

> ID：10297195
> 
> 赞同：0
> 
> 时间：2012-04-24T11:46:09.947
> 
> 标签：sharepoint, workflow, project-server

我在创建 Project Server 2010 SDK 中解释的分支工作流时遇到问题。

我第一次设法创建和部署它，我通过将标题部分从 Feature1 更改为 feature2 来更新它，并且我更改了工作流中的阶段顺序，然后执行 Retract-Deploy。

更新的工作流程似乎成功了，因为标题部分更改了 feature2，但是当我为更新的工作流程创建新项目时，顺序仍然相同。

我非常感谢对我的问题的任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:36:42.283

我遇到了这个问题，我不得不重新启动所有 Project Server 和 Sharepoint Server windows 服务。这很痛苦。

# javascript - 如何使用 jquery 禁用日历

> ID：10297201
> 
> 赞同：2
> 
> 时间：2012-04-24T11:46:33.693
> 
> 标签：javascript, jquery, jsf-2, primefaces

我正在使用 primefaces 日历。日历放置在 primefaces 的数据表上。

我需要使用 jquery 禁用日历。

```
<p:column width="170">
    <p:calendar id="vendorStartDate" value="#{articlePromo.fechaInicio}"
       pattern="dd/MM/yyyy" mode="popup" showOn="button">
    </p:calendar>
</p:column> 
```

以下没有禁用日历：

*   `$(#vendorStartDate).attr('disabled','disabled');`

*   `document.getElementById("vendorStartDate").disabled = true;`

在查看源代码时，我可以确定它实际上是一个输入文本和一个按钮。输入文本获取 id = **vendorStartDate_input**。但是按钮没有得到一个ID。

日历的启用/禁用取决于其他列的值。因此，在`onChange`该列的事件中，我需要禁用日历组件 - 输入文本和按钮。

我能够使用以下方法禁用输入文本：

*   `document.getElementById("vendorStartDate_input").disabled = true;`

如何禁用按钮？

谢谢， 希哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T06:34:22.677

如果无法通过 id 选择按钮，则需要使用不同的选择器。

`p:calendar`通常由 a 包围，并且`<span>`按钮是该`<span>`元素内 inputText 的兄弟。

因此，您可以使用以下 jquery 语句：

```
$('#vendorStartDate_input').siblings('button').attr('disabled', 'true'); 
```

如果要获取表格内的所有日历元素：

```
$('[id$="vendorStartDate_input"]').siblings('button').attr('disabled', 'true'); 
```

这将选择 id 以 . 结尾的所有元素`vendorStartDate_input`。

# html - 为什么谷歌打开 html 标签？

> ID：10297203
> 
> 赞同：5
> 
> 时间：2012-04-24T11:46:35.000
> 
> 标签：html

在 Google 的 404 页面中，使用 html 标记而不使用结束标记。您可以通过导航到 www.googleusercontent.com 自己查看代码 这不会在 w3c 验证器上生成任何错误。这是为什么？

```
<!DOCTYPE html>
<html lang=en>
  <meta charset=utf-8>
  <meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">
  <title>Error 404 (Not Found)!!1</title>
  <style>
    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}
  </style>
  <a href=//www.google.com/><img src=//www.google.com/images/errors/logo_sm.gif alt=Google></a>
  <p><b>404.</b> <ins>That’s an error.</ins>
  <p>The requested URL <code>/</code> was not found on this server.  <ins>That’s all we know.</ins> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T11:48:30.443

这应该有助于解释：

> 根据 Google 最新的网页加速指南，HTML4 中有许多可选标签可以省略以节省速度，即使这会让您作为开发人员感到有些反感。（Google 很快指出这些技巧是针对 HTML 而不是 XHTML。）
> 
> Google 主页和搜索结果页面不会结束它们的`<body>` and`<html>`元素。他们只是让它们保持开放——就像一个懒惰的开发人员可能会做的那样，当他回来看到错误时会感到内疚。
> 
> 只有这个“错误”才是 Google 将业绩视为竞争优势的战略的一部分。所有浏览器在没有标签的情况下都能正常工作，而且标签会占用时间，因此他们很高兴能够为访问者消除任何毫秒。

[http://blog.errorhelp.com/2009/06/27/the-highest-traffic-site-in-the-world-doesnt-close-its-html-tags/](http://blog.errorhelp.com/2009/06/27/the-highest-traffic-site-in-the-world-doesnt-close-its-html-tags/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T11:49:26.407

[开始和结束标签实际上都是可选的](http://dev.w3.org/html5/html-author/#the-html-element)：

> 仅在 HTML 语法中，开始和结束标记都是可选的，因此为方便起见，可以省略其中任何一个，除非您希望在此元素上指定属性，在这种情况下，至少需要包含开始标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:49:22.743

从[HTML5 规范](http://dev.w3.org/html5/markup/spec.html#html)：

> 如果 html 元素后面没有紧跟注释，并且该元素包含一个非空的 body 元素或其开始标记未被省略，则 html 元素的结束标记可以被省略。

# iphone - 在 iphone 中自定义 addthis 分享按钮？

> ID：10297204
> 
> 赞同：1
> 
> 时间：2012-04-24T11:46:35.020
> 
> 标签：iphone, addthis

我正在使用 AddThis （[JavaScriptAddThis](http://support.addthis.com/customer/portal/articles/381236-custom-buttons#.T5aQN-3aadY)，[IosAddThis](http://support.addthis.com/customer/portal/articles/381270-addthis-for-ios-quick-start-guide#.T5aXq-3aadY)）

用于在 iphone 中实现共享按钮，但我想自定义共享按钮。我想更改按钮（共享）的文本，如下所示：

![在此处输入图像描述](../Images/bbc1c3435a86ad4b518697a03d0e3cf3.png)

或者

仅将图像显示为：

![在此处输入图像描述](../Images/808a3cdf71e3fdffed57d49bf1e4783f.png)

我刚刚添加了 addthis.h 文件并将 addthis 用作：

```
 - (void)viewDidLoad
{

 [AddThisSDK showAddThisButtonInView:self.view withFrame:CGRectMake(75, 50, 20, 20) forURL:@"http://www.google.com" withTitle:@"Check this out" description:@"Loren ipsum dolor sit amet , consectetuer adipisci"];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

我怎样才能做到这一点..？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:01:47.060

> 大家好，我已经解决了这个问题，你可以看到我在这里写的代码。不是正版，但它工作得很好。代码如下：

```
 - (void)viewDidLoad
{

 UIButton *btn=[[UIButton alloc] init];

      btn=[AddThisSDK showAddThisButtonInView:nil 
withFrame:CGRectMake(75, 50, 20, 20)    forURL:@"http://www.google.com" 
withTitle:@"Check this out" 
description:@"Loren ipsum dolor sit amet , consectetuer adipisci"];

 [btn setBackgroundImage:[UIImage imageNamed:@"Icon.png"] forState:UIControlStateNormal];
 [self.view addSubview:btn];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

> **并感谢您的快速回复...！**

# asp.net-mvc-3 - ASP.NET MVC 3 和 HttpContext.Current.User.Identity.Name

> ID：10297207
> 
> 赞同：1
> 
> 时间：2012-04-24T11:46:42.783
> 
> 标签：asp.net-mvc-3, asp.net-membership

我在 MVC 3 (razor) 应用程序中使用 .net 成员资格。

我已经实现了一个自定义配置文件类，我在其中使用 HttpContext.Current.User.Identity.Name 来获取会员用户。

```
public class UserProfile : ProfileBase
{
    static public UserProfile CurrentUser
    {
        get {
               return (UserProfile)(ProfileBase.Create(Membership.GetUser(new Guid(HttpContext.Current.User.Identity.Name)).UserName)); 
            }
    }

    public string FirstName
    {
        get { return ((string)(base["FirstName"])); }
        set { base["FirstName"] = value; Save(); }
    }

    public string LastName
    {
        get { return ((string)(base["LastName"])); }
        set { base["LastName"] = value; Save(); }
    }
} 
```

正如您在上面的课程中看到的那样，我必须将 HttpContext.Current.User.Identity.Name 转换为 GUID 才能获得会员用户。

问题是，为什么在登录验证之后，在 HttpContext.Current.User.Identity.Name 我得到的是 GUID 值（userID）而不是用户名？

这正常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:19:31.893

如果您使用默认的 .NET 成员资格（FormAuthentication with default GenericPrincipal, FormsIdentity）并且您已经从默认的“Internet 应用程序”模板创建了 MVC 应用程序，那么：

检查 AccountController 的“LogOn”操作方法。将 userName 更改为 UserId(GUID) 值的一种可能原因是将 Auth-cookie 设置为 'ProviderUserKey' 作为 userName，例如：

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            var user = Membership.GetUser(model.UserName);
            FormsAuthentication.SetAuthCookie(user.ProviderUserKey.ToString(), model.RememberMe);

            //...
            return Redirect(Url.Content("~/"));
        }
        else{
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:24:09.120

只需使用 Membership.GetUser() 来获取当前用户。

# asp.net-mvc - 使用代码打开下拉列表（html.helper）

> ID：10297209
> 
> 赞同：0
> 
> 时间：2012-04-24T11:46:47.900
> 
> 标签：asp.net-mvc

这是我的下拉列表：

```
<%= Html.DropDownList("lstEndTimeEvent", new SelectList(new[] { "", "", "", ..., "" }) %> 
```

它是关闭的，当我单击箭头时它会打开。如何让它在启动时打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:05:21.963

我需要的是 size 属性。

# visual-studio-2010 - 使用 Hashtable 时的 Visual Basic 2010 小错误

> ID：10297210
> 
> 赞同：0
> 
> 时间：2012-04-24T11:46:48.657
> 
> 标签：visual-studio-2010

```
 Dim cmd1 As New OleDbCommand("Select * FROM Membros WHERE NFamilia=@nfamilia", con)
    cmd1.Parameters.Add("@nfamilia", OleDbType.VarChar).Value = nfamilia.Text

    con.Open()
    Dim dr2 As OleDbDataReader = cmd1.ExecuteReader()
    While (dr2.Read())
        Dim n As Integer = dr2(1)
        Dim nome As String = dr2(2)
        For i = 1 To 10
            table.Item(n).text = nome
        Next
    End While
    con.Close() 
```

我有这段代码可以在哈希表中插入数据，但是我有一个问题 dr2(1) 它是一个自动增量值，我得到了类似[这样的东西](http://img51.imageshack.us/img51/374/semttuloiuo.png)

如果我将代码更改为：

```
 Dim n As Integer 
                n=1
                Dim nome As String = dr2(2)
                For i = 1 To 10
                    table.Item(n).text = nome
                    n=n+1
                Next
            End While 
```

我明白[了](http://img14.imageshack.us/img14/8061/semttulo1sfw.png)

如果我以这种方式编写代码，我会得到与上面相同的结果

```
 While (dr2.Read())

        Dim nome As String = dr2(2)
        For i = 1 To 10
            table.Item(i).text = nome
        Next
End While 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:31:13.953

你能试试这个吗？

```
i = 1
While (dr2.Read())
    table.Item(i).text = dr2(2)
    i = i + 1
End While 
```

# c# - WCF 这有什么问题

> ID：10297211
> 
> 赞同：0
> 
> 时间：2012-04-24T11:47:01.120
> 
> 标签：c#, wcf, console

**简而言之：**我无法让我的控制台客户端连接到 WCF 服务的 https 端点，该端点托管在同一网络中的另一台 PC 上。它在调试时弹出错误： Object loginObject = client.Login(password, username); 并说：无法自动进入此服务器机器域。连接到服务器机器失败。登录失败：未知用户名或密码错误。

我没有在 IIS 上托管它，我只是从 Visual Studio 托管服务

**-----更多详情请查看下方-----**

我有一个托管在计算机控制台中的 wcf 服务，配置文件只有绑定、端点和行为，如下所示：

```
<bindings>
  <wsHttpBinding>
    <binding
    name="HighQuotaWSHttpBinding"
    receiveTimeout="00:10:00"
    sendTimeout="00:10:00"
    bypassProxyOnLocal="true"
    maxBufferPoolSize="2147483647"
    useDefaultWebProxy="false"
    maxReceivedMessageSize="2147483647">
      <security mode="Transport">
        <transport clientCredentialType="Certificate" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>

<services>
  <!-- WebDataService -->
  <service
  behaviorConfiguration="WebDataServiceBehaviour"
  name="ANameSpace">
    <endpoint
    address="WebDataService"
    binding="wsHttpBinding" bindingConfiguration="HighQuotaWSHttpBinding"
    contract="AContract"
    name="WebDataServiceHttpBinding">
      <!--<identity>
<dns value="" />
</identity>-->
    </endpoint>
    <endpoint
    address="mex"
    binding="mexHttpsBinding"
    contract="IMetadataExchange"
    name="mexManagement" />
    <host>
      <baseAddresses>
        <add baseAddress="http://mylocalip:9650/" />
        <add baseAddress="https://mylocalip:9651/" />
      </baseAddresses>
    </host>
  </service>
</services>

<!-- Definition of WebDataService behaviour -->
<behaviors>
  <serviceBehaviors>
    <!-- Behavior for WebserviceData interface -->
    <behavior name="WebDataServiceBehaviour">
      <!-- Set throttling of (concurrent) cals -->
      <serviceThrottling
      maxConcurrentCalls="100"
      maxConcurrentSessions="100"
      maxConcurrentInstances="100"/>
      <!-- To avoid disclosing metadata information, 
set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpsGetEnabled="True"/>
      <serviceCredentials>
        <!--certificate storage path in the server -->
        <serviceCertificate findValue="localhost" x509FindType="FindBySubjectName" storeLocation="LocalMachine"  storeName="My"/>
        <issuedTokenAuthentication allowUntrustedRsaIssuers="true"/>
        <!--certificate storage path in the client -->
        <clientCertificate>
          <certificate findValue="localhost" x509FindType="FindBySubjectName" storeLocation="LocalMachine" storeName="My"/>
        </clientCertificate>
        <userNameAuthentication userNamePasswordValidationMode="MembershipProvider"/>
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>

  <endpointBehaviors>
    <behavior name="WebDataServiceBehaviour">
      <clientCredentials>
        <!--certificate storage path in the client -->
        <clientCertificate findValue="localhost" storeLocation="LocalMachine" x509FindType="FindBySubjectName" storeName="My"/>
        <serviceCertificate>
          <authentication certificateValidationMode="PeerOrChainTrust"/>
        </serviceCertificate>
      </clientCredentials>
    </behavior>
  </endpointBehaviors>
</behaviors>
</system.serviceModel>
</configuration> 
```

我通过这样做制作了自己的根证书和服务器证书：

根目录：makecert.exe -sv SignRoot.pvk -cy authority -r signroot.cer -a sha1 -n "CN=AuthorityName" -ss my -sr localmachine

服务器：makecert.exe -iv SignRoot.pvk -ic signroot.cer -cy end -pe -n CN="localhost" -eku 1.3.6.1.5.5.7.3.1 -ss my -sr localmachine -sky exchange -sp " Microsoft RSA SChannel 加密提供程序“-sy 12

然后使用一个名为 httpconfig.exe 的程序，我将此证书添加到端口 9651..

现在在同一网络中的另一台电脑上，我尝试制作一个简单的 C# 控制台客户端。program.cs 如下：

```
class Program
{
    static void Main(string[] args)
    {

        System.Net.ServicePointManager.ServerCertificateValidationCallback += (se, cert, chain, sslerror) =>
        {
            return true;
        };
        wcf1.WebDataServiceClient client = new wcf1.WebDataServiceClient();

        string username = "A";
        string password = "A";
        Object loginObject = client.Login(password, username);
        Console.WriteLine("bla");
        Console.ReadLine();
        client.Close();
    }
} 
```

配置生成如下：

```
 <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WebDataServiceHttpBinding" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
            maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
            allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00"
              enabled="false" />
          <security mode="Transport">
            <transport clientCredentialType="Certificate" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="Windows" negotiateServiceCredential="true" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://Theipfromthepc:9651/WebDataService" binding="wsHttpBinding"
          bindingConfiguration="WebDataServiceHttpBinding" contract="wcf1.IWebDataService"
          name="WebDataServiceHttpBinding">
        <!--<identity>
<dns value="" />
</identity>-->

      </endpoint>
    </client>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:55:27.700

`clientCredentialType="Certificate"`表示[客户端将使用客户端证书对自己进行身份验证](http://msdn.microsoft.com/en-us/library/system.servicemodel.httpclientcredentialtype.aspx)，但您尚未提供客户端证书。您只创建了一个服务器证书。根据您配置服务器的方式，您可能想要：

```
clientCredentialType = "None" 
```

或者

```
clientCredentlaType = "Windows" 
```

# magento - 非必需的商店视图属性

> ID：10297212
> 
> 赞同：1
> 
> 时间：2012-04-24T11:47:02.977
> 
> 标签：magento, attributes, catalog

在导入默认商店视图（id 0）的过程中写入属性值似乎存在问题，类似于这个[http://www.magentocommerce.com/boards/viewthread/177994/](http://www.magentocommerce.com/boards/viewthread/177994/) - 请参阅我的回复

最重要的是它也会影响`special_price`也不需要的属性。虽然特价显示在产品列表和查看页面中，但在添加到购物车后不会应用。可以从后端手动重新保存产品或在导入前根据需要进行设置来解决问题

有人遇到过这个问题吗？我错过了什么或者这确实是一个错误？

# magento - 当最后添加的报价项目没有错误时，为什么magento会从销售报价中删除错误信息

> ID：10297217
> 
> 赞同：3
> 
> 时间：2012-04-24T11:47:54.177
> 
> 标签：magento

我一直在查看 Magento 的代码（1.6.2 社区版），OMG 是不是执行得非常糟糕，但我不会在这里咆哮*。*

看这段代码：

```
// Delete error from item and its quote, if it was set due to qty lack
$this->_removeErrorsFromQuoteAndItem($quoteItem, Mage_CatalogInventory_Helper_Data::ERROR_QTY); 
```

在 /app/code/core/Mage/CatalogInventory/Model/Observer.php 的**Mage_CatalogInventory_Model_Observer****类**中 行：489

 **这对我来说产生了一个特殊的错误，试试这个（确保在后端设置“无延期交货”）：

1.  将产品添加到购物车
2.  将另一个产品添加到购物车。
3.  进入管理员并更改第一个产品数量，以使购物车中请求的数量不够。
4.  返回购物车页面。

结果
添加的第一个产品显示“requested item not available in this quantity”错误，但仍显示结帐方式！继续前进，最终给出了一个丑陋的 js 警报，说“并非所有项目都在请求的数量中可用”。

深入挖掘，我发现添加到报价（购物车）中的每个报价项目（购物车项目）似乎都会重置整个报价的错误状态。

这是故意的吗？我偶然发现了一个真正的错误吗？这个无用的评论是什么意思？提前致谢。

**编辑**：有关解决方法和解释，请参阅下面的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T12:49:40.393

我必须发布一个跟进，我的核心黑客有一个不幸的副作用（另一个错误）：

1.  将一定数量的商品添加到购物车（确保有货）。
2.  进入管理面板并减少库存，以便不再有剩余数量。
3.  返回购物车页面并刷新，您会收到预期的错误。
4.  尝试更新购物车并将请求的数量减少到实际可用的数量，您会注意到更新不起作用并且重新显示来自 #3 的错误。

因此，显然这种特殊逻辑对于这种情况是必要的。

*实际*的缺陷是报价错误信息集合不区分报价项目。因此 _removeErrorsFromQuoteAndItem 函数从购物车中删除所有与数量相关的错误，包括来自另一个报价项目的错误（仍然是错误的）。

我找到了一种无需任何核心技巧即可工作的解决方法，将此事件观察器附加到**sales_quote_item_qty_set_after**事件。

```
public function reinitQuoteErrorState(Varien_Event_Observer $observer)
{
    $item = $observer->getEvent()->getItem();
    /** @var $item Mage_Sales_Model_Quote_Item */

    $quote = $item->getQuote();
    /** @var $quote Mage_Sales_Model_Quote */

    // Quote not loaded, do nothing since our changes are transient
    if (!$quote) return;

    // Quote already has error state, nothing to do.
    if ($quote->getHasError()) return;

    foreach ($quote->getAllItems() as $quoteItem)
    {
        if ($errorItems = $quoteItem->getErrorInfos())
        {
            foreach ($errorItems as $errorItem)
            {
                if ($errorItem['code'] == Mage_CatalogInventory_Helper_Data::ERROR_QTY)
                {
                    $quote->addErrorInfo(
                        'error',
                        'cataloginventory',
                        Mage_CatalogInventory_Helper_Data::ERROR_QTY,
                        Mage::helper('cataloginventory')->__('Not all products are available in the requested quantity')
                    );

                    return;
                }
            }
        }
    }
} 
```

**注意**：具有此事件处理程序的模块必须添加到 /app/etc/modules/ 中的模块 XML 文件的标记（例如：/app/etc/modules/MyCompany_MyModule.xml），以确保在**Mage_CatalogInventory_Model_Observer之后调用此处理程序::checkQuoteItemQty**有错误。

真正的解决方案是修复报价错误信息系统以维护报价项目身份，但这种解决方法无需任何核心黑客攻击即可。

```
<?xml version="1.0" encoding="utf-8"?>
<config>
    <modules>
        <MyCompany_MyModule>
            <active>true</active>
            <codePool>local</codePool>
            <depends>
                <Mage_CatalogInventory />
            </depends>
        </MyCompany_MyModule>
    </modules>
</config> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:10:07.050

我们最近也注意到了这个问题，并写了一个类似的解释。我们还根据 Raif 提供的大纲整理了一个模块来解决此问题 - [http://www.brand3.com/b3labs/magento-core-bug-multiple-basket-items-stock/](http://www.branded3.com/b3labs/magento-core-bug-multiple-basket-items-stock/) - 对于任何不确定的人如何把它变成一个模块。**

# python - 线宽与线的长度相加

> ID：10297220
> 
> 赞同：29
> 
> 时间：2012-04-24T11:48:05.610
> 
> 标签：python, matplotlib

当我在 matplotlib 中绘制线段时，线宽似乎被添加到线的长度上。在我的代码下方（不是最pythonic的代码，但它应该可以解决问题）。我做错了什么还是这只是matplotlib的一个功能？

```
import matplotlib.pyplot as plt
import numpy as np

L1 = 100
L2 = 75
L3 = 100
Y = 3
N = 5
l_prev = 0
for l, c in zip(np.linspace(0, L1, N), range(N)):
    plt.plot([l_prev, l], [0, 0], 'r', linewidth=20)
    l_prev = l
l_prev = L1
for l, c in zip(np.linspace(L1, L1 + L2, N), range(N)):
    plt.plot([l_prev, l], [Y, Y], 'g', linewidth=1)
    l_prev = l
l_prev = L1
for l, c in zip(np.linspace(L1, L1 + L3, N), range(N)):
    p = plt.plot([l_prev, l], [-Y, -Y], 'b', linewidth=10)
    l_prev = l
plt.axvspan(xmin=L1, xmax=L1)
plt.axis([-5, 205, -5, 5])
plt.show() 
```

我期望看到的是三个线段：`[0,L1], [L1,L2] and [L1,L3]`. 但第一行`[0,L1]`延伸到`L1`+ '直径'....

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-24T12:31:29.803

看起来默认`solid_capstyle`是`projecting`，这不是您想要的：

```
plt.figure()
plt.plot([0, 100], [5, 5], linewidth=50, linestyle="-", c="blue",
         solid_capstyle="butt")
plt.plot([0, 100], [15, 15], linewidth=50, linestyle="-", c="red",
         solid_capstyle="round")
plt.plot([0, 100], [25, 25], linewidth=50, linestyle="-", c="purple",
         solid_capstyle="projecting")
plt.axvline(x=100, c="black")
plt.xlim(0, 125)
plt.ylim(0, 30)
plt.savefig("cap.png") 
```

![在此处输入图像描述](../Images/f9c52a4269d2f583c3ce31ed61c16e1b.png)

# java - 为什么 new File() 期望文件位于 Java Web 应用程序的 TOMCAT_HOME/bin 中？

> ID：10297230
> 
> 赞同：1
> 
> 时间：2012-04-24T11:48:47.923
> 
> 标签：java, tomcat, file-io

我在 Eclipse IDE 中有一个 Java 项目。如果我创建新的 File 对象。喜欢`File file = new File("someFile.txt")`。它期望 someFile.txt 出现在项目主页中。而且我可以把它放在某个目录中，`config/someFile.txt` 并且可以在新的 File 构造函数中使用它。这里一切都好。

当我制作这个项目的 JAR 并将它放在 WEB-INF/lib 中时。然后`new File("someFile.txt")`代码需要 TOMCAT_HOME/bin 中的文件。我用`file.getAbsolutePath();`. 这是我无法控制的。我的问题是为什么在 java web 应用程序中 new File 期望在 bin 目录中。为什么不把项目放在家里。这样我就可以轻松导航到我的配置目录。即使`../../`导航也不起作用。因为它们被附加`TOMCAT_HOME/bin/../../someFile.txt`并导致文件不存在。

我希望我已经很好地解释了我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T11:53:46.933

`TOMCAT_HOME/bin`是 JVM 进程的工作目录，因此每个相对路径都将相对于该目录进行解析。

除了不在 webapps 中使用相对文件路径之外，您无能为力。更好的是，使用`ServletContext.getRealPath()`或`Class.getResourceAsStream()`。

# sql - 使用 JOIN 时的 WHERE 子句与 ON

> ID：10297231
> 
> 赞同：44
> 
> 时间：2012-04-24T11:48:48.837
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, inner-join

假设我有以下 T-SQL 代码：

```
SELECT * FROM Foo f
INNER JOIN Bar b ON b.BarId = f.BarId;
WHERE b.IsApproved = 1; 
```

下面的也返回相同的一组行：

```
SELECT * FROM Foo f
INNER JOIN Bar b ON (b.IsApproved = 1) AND (b.BarId = f.BarId); 
```

这可能不是这里最好的案例示例，但是这两者之间有什么性能差异吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-24T11:53:59.760

请注意与外部连接的区别。一个查询，其中`b.IsApproved`（在右表，Bar）的过滤器被添加到`ON`条件中`JOIN`：

```
SELECT * 
FROM Foo f 
LEFT OUTER JOIN Bar b ON (b.IsApproved = 1) AND (b.BarId = f.BarId); 
```

与将过滤器放在子句*中*`WHERE`不同：

```
SELECT * 
FROM Foo f 
LEFT OUTER JOIN Bar b ON (b.BarId = f.BarId)
WHERE (b.IsApproved = 1); 
```

由于 for 'failed' 外连接`Bar`（即没有`b.BarId`for a `f.BarId`），这将保留`b.IsApproved`所有`NULL`此类失败的连接行，然后这些行将被过滤掉。

另一种看待这一点的方式是，对于第一个查询，`LEFT OUTER JOIN Bar b ON (b.IsApproved = 1) AND (b.BarId = f.BarId)`将始终返回 LEFT 表行，因为`LEFT OUTER JOIN`即使连接失败也能保证返回 LEFT 表行。但是，添加`(b.IsApproved = 1)`到`LEFT OUTER JOIN`on 条件的效果是在`(b.IsApproved = 1)`为 false 时将任何正确的表列清空，即按照通常应用于`LEFT JOIN`条件 on的相同规则`(b.BarId = f.BarId)`。

**更新**：要完成康拉德提出的问题，可选过滤器的等效 LOJ 将是：

```
SELECT * 
FROM Foo f 
LEFT OUTER JOIN Bar b ON (b.BarId = f.BarId)
WHERE (b.IsApproved IS NULL OR b.IsApproved = 1); 
```

即该`WHERE`子句需要考虑连接是否失败`(NULL)`和过滤器是否被忽略的条件，以及连接成功的位置和必须应用过滤器。（`b.IsApproved`或`b.BarId`可以测试`NULL`）

我在[这里放了一个 SqlFiddle，](http://sqlfiddle.com/#!6/db4e0/2)`b.IsApproved`它展示了过滤器的不同位置相对于`JOIN`.

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-24T11:50:54.910

不，查询优化器足够聪明，可以为两个示例选择相同的执行计划。

您可以使用`SHOWPLAN`来检查执行计划。

* * *

尽管如此，您应该将所有连接连接放在`ON`子句上，并将所有限制放在`WHERE`子句上。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-24T11:51:45.890

```
SELECT * FROM Foo f
INNER JOIN Bar b ON b.BarId = f.BarId
WHERE b.IsApproved = 1; 
```

这是更好的形式。它易于阅读和修改。在商业世界中，这就是你想要的。就性能而言，它们是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T19:45:02.207

我似乎在某些情况下，即使在最新版本的 MSSQL 上优化器也不够聪明——而且性能差异是巨大的。

但这是一个例外，大多数时候 SQL Server 优化器会解决问题并获得正确的计划。

所以保持在 WHERE 子句上使用过滤器的策略，并在需要时进行优化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-15T11:37:01.220

我刚刚对四个表进行了查询测试——一个主表具有三个 INNER JOIN 和总共四个参数，并比较了两种方法的执行计划（使用 JOIN 的 ON 中的过滤条件，然后也在WHERE 子句）。

执行计划完全相同。我在 SQL Server 2008 R2 上运行了它。

# wpf - 如何从 HwndSource 获取 HwndSourceHook

> ID：10297236
> 
> 赞同：0
> 
> 时间：2012-04-24T11:49:03.783
> 
> 标签：wpf, hook

在 wpf 中，我可以如下添加Hook'

```
HwndSource src = HwndSource.FromHwnd(new WindowInteropHelper(this).Handle);
if (src != null) src.AddHook(WndProc); 
```

但是，我怎样才能从 HwndSource 获得 WndProc？或者我可以得到 WndProc 添加的标志吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:53:57.140

你不应该`WndProc`从任何地方得到。参数 to是您自己提供`AddHook`的类型的委托；[`HwndSourceHook`](http://msdn.microsoft.com/en-us/library/system.windows.interop.hwndsourcehook.aspx)毕竟，这就是为什么你`AddHook`首先要打电话的原因。

# java - java：如何随机显示输出

> ID：10297237
> 
> 赞同：-2
> 
> 时间：2012-04-24T11:49:06.380
> 
> 标签：java, java-me

我有两条消息“Job 1”和“Job 2”。我想将这些消息放入循环中，并且每次执行时都会随机显示输出：比如

```
Job1
job2
job2
job1
and so on.. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:52:51.243

使用[随机类](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)

把它们放在一个列表中，然后说：

```
for(i = 0; i < howeverManyTimesYouWantToLoop; i++) {
  System.out.println(jobList.get(new Random().nextInt(jobList.size()));
} 
```

# android - 发布android后更改应用内购买项目的价格

> ID：10297238
> 
> 赞同：8
> 
> 时间：2012-04-24T11:49:07.387
> 
> 标签：android, in-app-purchase, in-app-billing

应用内购买项目在 Google Play 发布后是否可以更改价格？（我假设该应用程序也已发布）。

[http://developer.android.com](http://developer.android.com)和[http://support.google.com/googleplay/](http://support.google.com/googleplay/)上的整个在线文档都没有任何内容，只提到了改变应用程序价格的可能性，而不是应用程序内物品。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T11:56:34.110

是的，您可以随意更改价格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T12:10:02.637

您在开发人员控制台上更改价格，而不是在应用程序中，当然，如果您在应用程序中有显示价格的图形/文本，您需要弄清楚如何更新这些价格，也许从服务器中提取它们？请参阅：[计费目录](http://developer.android.com/guide/market/billing/billing_admin.html#billing-catalog) 和[计费测试](http://developer.android.com/guide/market/billing/billing_testing.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-04T11:06:42.523

是的，您可以更改托管和非托管应用内商品的价格，但不能更改订阅价格。这是因为用户在购买产品时始终会看到产品的最新价格，因此可以更改托管/非托管产品的价格。但是，已经购买订阅并同意每月（或每年）特定价格的客户不能在不知情的情况下支付不同的价格。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-19T13:28:00.667

在我看来，定价政策同时发生了变化。当前文档警告：

> 警告：应用内商品可供购买后，您无法更改其价格。

[https://developer.android.com/google/play/billing/billing_overview](https://developer.android.com/google/play/billing/billing_overview)

最近有这方面的经验吗？

# php - 如果用户不上传任何文件，我如何默认提供文件以供上传，m使用codeigniter

> ID：10297239
> 
> 赞同：0
> 
> 时间：2012-04-24T11:49:10.247
> 
> 标签：php, codeigniter, codeigniter-2, codeigniter-form-helper

我如何在默认情况下为codeignitor中的上传类提供上传文件（例如来自数据库），如果用户不上传任何默认文件，则应考虑使用codeigniter。

帮助表示赞赏。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:19:26.837

例如，我将根据用户配置文件模块向您解释。

将默认图像放在您的上传文件夹中，假设

```
/www/uploads/images/no-avatar.png 
```

在您的控制器上，您可以执行以下操作：

```
$config['upload_path'] = './uploads/';
$config['allowed_types'] = 'gif|jpg|png';
$config['max_size'] = '100';
$config['max_width']  = '1024';
$config['max_height']  = '768';

$this->load->library('upload', $config);

if ( ! $this->upload->do_upload('image')) // <input name="image" ... />
{
      $user['image'] = 'no-avatar.png';
}
else
{
      $data = array('upload_data' => $this->upload->data());

      $user['image'] = $data['file_name'];
 }

 // then you store the value in the database 
```

简单地说，所有用户都有相同的默认头像，如果他们上传自己的，后者将覆盖默认头像。

# matlab - 使用模式识别matlab

> ID：10297240
> 
> 赞同：1
> 
> 时间：2012-04-24T11:49:13.583
> 
> 标签：matlab, neural-network, pattern-recognition

我使用 nprtool 和乳腺癌数据集来生成用于学习目的的示例神经网络。以下代码由 matlab nprtool（模式识别工具）生成（并稍作修改）。然而，这只是为了训练网络，现在我需要输入一个输入（特征值，数据集中目前有 9 个特征值），并给我最有可能的输出。有谁知道这是如何完成的，或者任何人都可以指出我正确的方向。任何帮助是极大的赞赏。

```
% Create Network
numHiddenNeurons = 20;  % Adjust as desired
net = newpr(cancerInputs,cancerTargets,numHiddenNeurons);
net.divideParam.trainRatio = 70/100;  % Adjust as desired
net.divideParam.valRatio = 15/100;  % Adjust as desired
net.divideParam.testRatio = 15/100;  % Adjust as desired

% Train and Apply Network
[net,tr] = train(net,cancerInputs,cancerTargets);
outputs = sim(net,cancerInputs);

% Plot
plotperf(tr)
plotconfusion(cancerTargets,outputs) 
```

问候， 米琳达

# android - 将 stagefright 和 NuPlayer 向后移植到 Android 2.2

> ID：10297244
> 
> 赞同：2
> 
> 时间：2012-04-24T11:49:22.540
> 
> 标签：android, android-ndk, android-mediaplayer

我的要求是能够在我的 Android 应用程序中播放实时视频流。流将通过 RTSP/RTP。我无法控制来源；并且看起来 RTP 有效负载不符合开发人员指南[视频编码建议](http://developer.android.com/guide/appendix/media-formats.html#recommendations)中列出的要求。具体来说，视频源似乎违反了以下要求：

> 对于 3GPP 和 MPEG-4 容器，moov 原子必须在任何 mdat 原子之前，但必须在 ftyp 原子之后

基本上，看起来我们获得了原始 H264 数据（未包装在容器中）。

现在，

1.  我无法使用`MediaPlayer`Android 2.2 Samsung Galaxy Tab 上的课程播放此流。
2.  但是，我可以在 Android 2.3 Samsung Galaxy S 上播放它。
3.  一些第三方应用程序（MX Player）也能够在 2.2 Galaxy Tab 上播放相同的流。

在上面的案例 2 和 3 中，DDMS 日志都指出内部使用了 Stage Fright 框架，而在案例 1 中，正在使用 PVP（即 OpenCore）。这一切让我得出结论：

1.  OpenCore 框架无法播放我的流。
2.  我的流可以使用 Stagefright 播放 - 即使在 Android 2.2 上

这让我想到了我的问题：

> 将 stagefright 移植到 Android 2.2 涉及什么？

此外，我在 AOSP 源代码中注意到，新版本`NuPlayer`现在负责播放 RTSP 流。问题：

> 1.  是否有可能移植`NuPlayer`回旧版本的 Android（2.2 或 2.3）？
> 2.  如果是这样，我需要做什么才能在我的应用程序中使用它？

我知道我可以查看源代码并使用 NDK 来构建 stagefright 和 NuPlayer（尽管我从未在 NDK 级别工作过）。我不知道我的应用程序如何使用这个 NuPlayer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:41:45.837

我遇到了类似的问题，但我找到了一种解决方案。您必须修补系统 build.prob 文件。请看看我的问题，我也发布了我的[答案。](https://stackoverflow.com/questions/9834882/how-to-play-multiple-video-files-simultaneously-in-one-layout-side-by-side-in-di)

默认情况下，stagefright 在 build.prop 文件中保持禁用状态。您必须启用它并重新启动设备。然后，您可以访问支持您的要求的 stagefright 框架。

对于 RTSP 流，请在远程机器中下载 live555MediaServer.exe 文件，并将一些媒体文件保存在同一位置。打开 live555MediaServer.exe 文件。

使用以下代码 -

```
private final String RTSP_FILE = "rtsp://<remote machine IP>/<file name>";

mVideoView.setVideoURI(Uri.parse(RTSP_FILE)); 
```

# scala - 如何获取ScalaQuery刚刚插入的自动增量ID

> ID：10297246
> 
> 赞同：3
> 
> 时间：2012-04-24T11:49:37.843
> 
> 标签：scala, primary-key, scalaquery

我正在使用 ScalaQuery 访问 PostgreSql。`Data`是一个具有名为 的自动增量主键的表`id`，定义为`def id = column[Long] ("id", O NotNull, O PrimaryKey, O AutoInc, O DBType "serial")`。我`Data.insert(name, filename)`用来创建新`Data`记录。有没有办法获得`id`刚刚创建的记录？该`insert`方法只返回一个由`executeUpdate`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:52:31.103

ScalaQuery 不支持开箱即用的序列 ID，您需要先定义一个辅助方法：

```
val seqID = SimpleFunction.nullary[Int]("LASTVAL") 
```

然后，在范围内使用上述助手，执行插入：

```
db withSession {
  val q  = Foo.insert(someInstance)
  val id = Query(seqID) // call sequence helper
} 
```

至于评论回复：线程安全，请参考：
[https ://stackoverflow.com/a/2944481/185840](https://stackoverflow.com/a/2944481/185840)

和：
[https ://github.com/szeiger/scala-query/issues/10#issuecomment-698418](https://github.com/szeiger/scala-query/issues/10#issuecomment-698418)

# c# - 配置缓存类与使用 HTTP 标头缓存

> ID：10297248
> 
> 赞同：1
> 
> 时间：2012-04-24T11:49:50.257
> 
> 标签：c#, asp.net-mvc, .net-3.5, asp.net-3.5

我有 asp.net mvc web 应用程序，使用 .net 3.5

我想在 UI Logic 层中使用缓存。

我读到了

1-`Cache Class`

[http://msdn.microsoft.com/en-us/library/system.web.caching.cache(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.caching.cache(v=vs.90).aspx)

2-`Caching with HTTP headers`

[http://www.dotnetperls.com/cache](http://www.dotnetperls.com/cache)

我不确定有什么区别以及我应该使用哪一个。

此外，如何配置每个缓存？

项目 1- 仅在网络配置中？

项目 2- 仅以编程方式？

**更新：**

我试过了

使用 System.Web.Caching；

```
 private string GetTitlePerBDataId(Guid changeRequestDataId)
    {
        var key = string.Format("{0}_{1}", TITLE, changeRequestDataId);

        if (System.Web.Caching.Cache[key] == null)
        {
            Cache[key] = mBundlatorServiceHelper.GetData(changeRequestBundleDataId).Title;
        }

        return Convert.ToString(Cache[key]);           
    } 
```

`But got class name is not valid in this point`超过`Cache`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T13:31:00.080

Cache 类在服务器上的内存缓存中。你可以在那里缓存对象和其他东西。

使用 http 标头缓存，定义客户端/代理如何缓存输出。

如果您查看 System.Web.Caching.Cache 的文档，它会说

> 有关此类实例的信息可通过 HttpContext 对象的 Cache 属性或 Page 对象的 Cache 属性获得。

所以你只能通过 httpcontext 使用它。

```
private string GetTitlePerBDataId(Guid changeRequestDataId)
{
    var key = string.Format("{0}_{1}", TITLE, changeRequestDataId);

    if (System.Web.HttpContext.Current.Cache[key] == null)
    {
        System.Web.HttpContext.Current.Cache.Insert(key, mBundlatorServiceHelper.GetData(changeRequestBundleDataId).Title);
    }

    return Convert.ToString(System.Web.HttpContext.Current.Cache[key]);           
} 
```

# java - java中静态方法覆盖的奇怪案例

> ID：10297252
> 
> 赞同：3
> 
> 时间：2012-04-24T11:49:57.173
> 
> 标签：java, overriding

到处都写着不能覆盖静态方法，但是当我尝试将访问说明符从 public 减少到 protected 时，它会出错。例如

```
public class StaticOverrideFunda {

    public static void foo(){
        System.out.println("Parent Foo");
    }
}

public class B extends StaticOverrideFunda{

    protected static void foo(){
        System.out.println("Child Foo");
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        B.foo();            
    }
} 
```

它说

> 不能降低继承方法的可见性

如此重要的是它遵循了最重要的规则，为什么我们说 foo 在 B 类中没有被覆盖？为什么我们说它是隐藏/阴影而不是覆盖？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T11:52:57.170

它遵循*一些与*覆盖相同的规则，但这并不意味着它*是*覆盖的。在这种情况下，它是[JLS 的第 8.4.8.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.3)“覆盖和隐藏的要求”中的规则：

> 覆盖或隐藏方法的访问修饰符（第 6.6 节）必须提供至少与覆盖或隐藏方法一样多的访问权限，如下所示：[...]

它仍然没有被覆盖，因为该方法不会被多态地调用——你不能编写一个*有时会*最终调用`StaticOverrideFunda.foo`，*有时*最终会调用的调用`B.foo`；目标完全在编译时确定。

值得回顾第 8.4.8 节的其余部分，它将覆盖*定义*为发生在实例方法上的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T11:54:43.703

您自己在问题中发布了答案，覆盖意味着在子类中为相同的方法使用不同的代码。由于无法覆盖静态方法，因此您无法通过修改访问说明符来玩弄可见性。

# c++ - C++ 指针数组参数

> ID：10297255
> 
> 赞同：2
> 
> 时间：2012-04-24T11:49:59.593
> 
> 标签：c++, arrays, pointers, arguments

我有以下代码：

```
void getPossibilities(int *rating[200][3]){
// do something
}

int main ()
{
int rating[200][3];
getPossibilities(&rating);
} 
```

这会引发以下错误消息：

> 错误：无法将参数 1 的 int ( *)[200][3] 转换为 int (* )[3] 到 void getPossibilities(int (*)[3])

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T11:52:03.580

函数签名应该是这样的：

```
void getPossibilities(int (*rating)[3]); 
```

并将参数传递为：

```
getPossibilities(rating); 
```

变量`rating`是一个二维数组形式`T[M][N]`，它可以衰减为形式的类型`T(*)[N]`。所以我认为这就是你想要的。

正如在上面的解决方案中，数组衰减，失去一维的大小（在你只知道`N`可靠的函数中，你只是`M`由于数组衰减而丢失），所以你必须改变函数的签名以避免衰减数组：

```
void getPossibilities(int (&rating)[200][3]) //note : &, 200, 3
{
  //your code
}

//pass argument as before
getPossibilities(rating);  //same as above 
```

更好的是使用模板作为：

```
 template<size_t M, size_t N>
 void getPossibilities(int (&rating)[M][N])
 {
       //you can use M and N here
       //for example
       for(size_t i = 0 ; i < M ; ++i)
       {
          for(size_t j = 0 ; j < N ; ++j)
          {
             //use rating[i][j]
          }    
       }
 } 
```

要使用这个函数，你必须像以前一样传递参数：

```
 getPossibilities(rating); //same as before! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:54:14.020

[`int (*x)[200][3]`](http://cdecl.ridiculousfish.com/?q=int%20%28%2ax%29%5B200%5D%5B3%5D)和之间有区别[`int *x[200][3]`](http://cdecl.ridiculousfish.com/?q=int%20%2ax%5B200%5D%5B3%5D)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:05:22.577

将 N 维数组传递给函数时，总是忽略第 0 维。这就是为什么`a[N]`衰减到`*p`。同理，`a[N][M]`衰减为`(*p)[M]`。
这里，是一个指向元素`(*p)[M]`数组的指针。`M`

```
int a1[N][M], a2[M];
int (*p)[M];
p = a1; // array a1[N][M] decays to a pointer
p = &a2; // p is a pointer to int[M] 
```

所以你的函数签名应该是：

```
void getPossibilities(int (*rating)[3]); 
```

现在，由于您使用的是 C++，因此值得利用它的功能，您可以通过引用传递数组。所以首选的方式是：

```
void getPossibilities(int (&rating)[200][3]); 
```

# templates - Joomla 2.5 模板分配问题

> ID：10297258
> 
> 赞同：2
> 
> 时间：2012-04-24T11:50:09.640
> 
> 标签：templates, joomla, menuitem, joomla2.5

我需要为我的主页分配不同的布局，但我的问题是在进入主页之前有一个布局完全不同的登录页面。我将该模板设置为“默认”（因为应该先加载），登录后进入主页。主页没有组件区域，只有模块。如何将我的第二个模板仅分配给主页？有人知道该怎么做吗？请帮我！或者有什么想法可以实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:13:38.200

我认为您必须从模板菜单中将模板分配给“主页”，“主页”应该在主菜单中。

所有其他页面都应分配给其他模板。

管理员/index.php?option=com_templates&view=style&layout=edit&id=XXX

# windows-phone-7 - MvvmCross - 为多个视图共享视图模型

> ID：10297260
> 
> 赞同：8
> 
> 时间：2012-04-24T11:50:15.083
> 
> 标签：windows-phone-7, xamarin.ios, xamarin.android, mvvmcross

我一直在跨平台移动项目上使用 MvvmCross，并且在 MonoTouch 项目中有两个不同的视图，它们使用相同的共享视图模型，并且不知道如何构建我的代码以使用 MvvmCross 中的相同视图模型导航到不同的视图。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T12:31:12.020

MvvmCross 平台使用的默认约定是使用反射自动注册所有视图。

这是在基本 Setup 类中完成的 - 在[https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Platform/MvxBaseSetup.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Platform/MvxBaseSetup.cs)中：

```
 protected virtual void InitializeViews()
    {
        var container = this.GetService<IMvxViewsContainer>();

        foreach (var pair in GetViewModelViewLookup())
        {
            Add(container, pair.Key, pair.Value);
        }
    } 
```

where`GetViewModelViewLookup`将 ViewModel 类型的字典返回到 View 类型：

```
 protected virtual IDictionary<Type, Type> GetViewModelViewLookup(Assembly assembly, Type expectedInterfaceType)
    {
        var views = from type in assembly.GetTypes()
                    let viewModelType = GetViewModelTypeMappingIfPresent(type, expectedInterfaceType)
                    where viewModelType != null
                    select new { type, viewModelType };

        return views.ToDictionary(x => x.viewModelType, x => x.type);
    } 
```

在通用 iPad/iPhone 应用程序中，您有时确实希望为每个视图模型包含多个视图 - 在 iPad 中使用一个视图，在 iPhone 中使用一个视图。

要做到这一点，现在（字面意思就是现在！）一些属性可用于将您的视图标记为“非常规” - 这些是：

*   MvxUnconventionalViewAttribute

    *   用它来标记你的视图不应该*被*包含在约定中
    *   在[https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Views/Attributes/MvxUnconventionalViewAttribute.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Views/Attributes/MvxUnconventionalViewAttribute.cs)
*   MvxConditionalConventionalViewAttribute

    *   一个抽象属性 - 覆盖它以提供您自己的包含/排除的自定义逻辑
    *   在[https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Views/Attributes/MvxConditionalConventionalViewAttribute.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Views/Attributes/MvxConditionalConventionalViewAttribute.cs)
*   MvxFormFactorSpecificViewAttribute

    *   仅限 iOS/触控
    *   当且仅当检测到的 iPhone 外形与当前设备匹配时才会包含视图的属性
    *   在[https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Touch/Views/Attributes/MvxFormFactorSpecificViewAttribute.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Touch/Views/Attributes/MvxFormFactorSpecificViewAttribute.cs)

在这种情况下，最后一个可能是您想要的 - 您可以使用声明如下的两个视图为 MainViewModel 实现简单的 iPhone/iPad 切换：

```
[MvxFormFactorSpecificView(MvxTouchFormFactor.Phone)]
public class MyIPhoneView : BaseView<MainViewModel>
{
    // iphone specific view ...
}

[MvxFormFactorSpecificView(MvxTouchFormFactor.Pad)]
public class MyIPadView : BaseView<MainViewModel>
{
    // ipad specific view ...
} 
```

* * *

或者，如果您想要一个非常自定义的配置，您可以覆盖所有“基于约定”的行为 - 您可以实现自己的覆盖`GetViewModelViewLookup`- 例如：

```
protected override IDictionary<Type, Type> GetViewModelViewLookup(Assembly assembly, Type expectedInterfaceType)
{
    if (IsIPad)
    {
        return new Dictionary<Type, Type>() 
        {
            { typeof(HomeViewModel), typeof(IPadHomeView) },
            { typeof(DetailViewModel), typeof(IPadDetailView) },
            { typeof(AboutViewModel), typeof(SharedAboutView) },
        };
    }
    else
    {
        return new Dictionary<Type, Type>() 
        {
            { typeof(HomeViewModel), typeof(IPhoneHomeView) },
            { typeof(DetailViewModel), typeof(IPhoneDetailView) },
            { typeof(AboutViewModel), typeof(SharedAboutView) },
        };
    }
} 
```

* * *

*请注意*，最终您可能会决定您需要额外的 ViewModel 以及 iPad 应用程序的视图 - 毕竟 iPad 具有更大的屏幕 - 在这种情况下，您可以手动添加它们。最终，当您的应用程序达到几百万用户时，您甚至可能决定将平板电脑代码完全从手机代码中分离出来 - 但这通常可以等到您达到几百万大关......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T19:14:54.307

另一种方法是继续创建 2 个 ViewModel，但让它们都成为抽象 ViewModel 的子类，如下所示：

```
FirstViewViewModel : BaseViewModel
SecondViewViewModel : BaseViewModel 
```

对应的视图命名为：

```
FirstView.xaml
SecondView.xaml 
```

这样，您可以在*BaseViewModel*中放置一些共享行为，而这两个子类实际上只是为了满足 MvvmCross 的视图获取约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T11:36:57.427

我最近开始使用 MvvmCross，我使用的是 v4.2.1。好像有些名字变了。我正在使用一个带有单独 iPhone 和 iPad 视图的 ViewModel，其中包含以下内容：

```
[MvxFormFactorSpecific(MvxIosFormFactor.Phone)]
public class MyIPhoneView : BaseView<MainViewModel>
{
    // iphone specific view ...
}

[MvxFormFactorSpecific(MvxIosFormFactor.TallPhone)]
public class MyTallIPhoneView : BaseView<MainViewModel>
{
    // tall iphone specific view ...
}

[MvxFormFactorSpecific(MvxIosFormFactor.Pad)]
public class MyIPadView : BaseView<MainViewModel>
{
    // ipad specific view ...
} 
```

# java - Gson：如何更改枚举的输出

> ID：10297264
> 
> 赞同：30
> 
> 时间：2012-04-24T11:50:21.900
> 
> 标签：java, gson

我有这个*枚举*：

```
enum RequestStatus {
  OK(200), NOT_FOUND(400);

  private final int code;

  RequestStatus(int code) {
    this.code = code;
  }

  public int getCode() {
    return this.code;
  }
}; 
```

在我的请求类中，我有这个字段：`private RequestStatus status`.

当使用 Gson 将 Java 对象转换为 JSON 时，结果如下：

```
"status": "OK" 
```

如何更改我的 GsonBuilder 或我的 Enum 对象以提供如下输出：

```
"status": {
  "value" : "OK",
  "code" : 200
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-24T12:01:30.037

你可以使用这样的东西：

```
GsonBuilder builder = new GsonBuilder();
builder.registerTypeAdapterFactory(new MyEnumAdapterFactory()); 
```

或更简单地说（正如杰西威尔逊所指出的）：

```
GsonBuilder builder = new GsonBuilder();
builder.registerTypeAdapter(RequestStatus.class, new MyEnumTypeAdapter()); 
```

和

```
public class MyEnumAdapterFactory implements TypeAdapterFactory {

    @Override
    public <T> TypeAdapter<T> create(final Gson gson, final TypeToken<T> type) {
            Class<? super T> rawType = type.getRawType();
            if (rawType == RequestStatus.class) {
                return new MyEnumTypeAdapter<T>();
            }
            return null;
    }

    public class MyEnumTypeAdapter<T> extends TypeAdapter<T> {

         public void write(JsonWriter out, T value) throws IOException {
              if (value == null) {
                   out.nullValue();
                   return;
              }
              RequestStatus status = (RequestStatus) value;
              // Here write what you want to the JsonWriter. 
              out.beginObject();
              out.name("value");
              out.value(status.name());
              out.name("code");
              out.value(status.getCode());
              out.endObject();
         }

         public T read(JsonReader in) throws IOException {
              // Properly deserialize the input (if you use deserialization)
              return null;
         }
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-06T19:21:52.523

除了 Polet 的回答，如果你需要一个**通用的 Enum 序列化**器，你可以通过反射来实现：

```
public class EnumAdapterFactory implements TypeAdapterFactory
{

    @Override
    public <T> TypeAdapter<T> create(final Gson gson, final TypeToken<T> type)
    {
        Class<? super T> rawType = type.getRawType();
        if (rawType.isEnum())
        {
            return new EnumTypeAdapter<T>();
        }
        return null;
    }

    public class EnumTypeAdapter<T> extends TypeAdapter<T>
    {
        @Override
        public void write(JsonWriter out, T value) throws IOException
        {
            if (value == null || !value.getClass().isEnum())
            {
                out.nullValue();
                return;
            }

            try
            {
                out.beginObject();
                out.name("value");
                out.value(value.toString());
                Arrays.stream(Introspector.getBeanInfo(value.getClass()).getPropertyDescriptors())
                      .filter(pd -> pd.getReadMethod() != null && !"class".equals(pd.getName()) && !"declaringClass".equals(pd.getName()))
                      .forEach(pd -> {
                          try
                          {
                              out.name(pd.getName());
                              out.value(String.valueOf(pd.getReadMethod().invoke(value)));
                          } catch (IllegalAccessException | InvocationTargetException | IOException e)
                          {
                              e.printStackTrace();
                          }
                      });
                out.endObject();
            } catch (IntrospectionException e)
            {
                e.printStackTrace();
            }
        }

        public T read(JsonReader in) throws IOException
        {
            // Properly deserialize the input (if you use deserialization)
            return null;
        }
    }
} 
```

用法：

```
@Test
public void testEnumGsonSerialization()
{
    List<ReportTypes> testEnums = Arrays.asList(YourEnum.VALUE1, YourEnum.VALUE2);
    GsonBuilder builder = new GsonBuilder();
    builder.registerTypeAdapterFactory(new EnumAdapterFactory());
    Gson gson = builder.create();
    System.out.println(gson.toJson(reportTypes));
} 
```

# windows-phone-7 - 如何避免随机生成WP7中的重复数字？

> ID：10297266
> 
> 赞同：1
> 
> 时间：2012-04-24T11:50:29.353
> 
> 标签：windows-phone-7, random

我想要一个数组中的随机数。

```
array like this int[] random={"1","2","3","4","5"}; 
```

我想随机取这些数字。它工作正常，但价值正在重复。我不会重复值。我想要随机数而不重复相同的数字。

我正在使用此代码获取随机数，

```
Random randomnumber=new Rambom();
int number= randomnumber.Next(random.Length()); 
```

如果有人知道告诉我这样做的想法，

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:02:31.767

If the random array is the source of the numbers, you could remove the numbers as you get them, therefore removing the duplication altogether :-

```
 List<int> random = new List<int>() { 1, 2, 3, 4, 5 };

    private void MyButton_Click(object sender, RoutedEventArgs e)
    {
        Random randomnumber = new Random();

        int number = random[randomnumber.Next(0, random.Count - 1)];

        random.Remove(number);

        MyList.Items.Add(number);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:59:33.053

Paul Diston soultion 已经足够好，但数量越多效率低下。生成随机唯一数的一种简单方法是将它们添加到 HashSet。片段：

```
 HashSet<int> hashSet = new HashSet<int>();

        for (int i = 0; i < 10; i++)
        {
            hashSet.Add(rand.Next(5));
        }
        foreach (var item in hashSet.AsEnumerable()) //hashSet.ToList() to get list
        {
            Console.WriteLine(item);
        } 
```

稍后，如果您想要另一个带有随机数组的列表 - 随机播放。最好的方法之一是[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)。片段：

```
public static void Shuffle<T> (Random rand, IList<int> list)
{
    int n = list.Count;
    while (n > 1) 
    {
        int k = rand.Next(n--);
        //swapping values
        T temp = list[n]; 
        list[n] = list[k];
        list[k] = temp;
    }
} 
```

可悲的是，没有内置功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T20:26:40.333

避免重复的有效方法是将找到的数字与数组的最后一个元素交换，然后将数组的大小减少 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T11:54:23.223

循环遍历数组，看看您是否已经添加了数字。如果有，请创建新的随机数。然后再次检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T11:56:09.090

我正在考虑从随机数组中删除已经选择的值。因此您可以在“随机数组”中搜索“数字”并将其删除。

# python - 子进程启动两个进程而不是一个

> ID：10297269
> 
> 赞同：1
> 
> 时间：2012-04-24T11:50:35.487
> 
> 标签：python, subprocess

我正在使用子进程启动一个进程并让它在后台运行，它是一个服务器应用程序。该进程本身是一个带有瘦包装器的 java 程序（除其他外，这意味着我可以将它作为可执行文件启动，而无需显式调用 java）。

我正在使用 Popen 运行该进程，当我设置 shell=False 时，它​​会运行，但它会生成两个进程而不是一个。第一个进程将 init 作为其父进程，当我通过 ps 检查它时，它只显示原始命令。但是，第二个进程会显示扩展的 java 参数（-D 和 -X 标志）——这是我期望看到的，也是我手动运行命令时进程的样子。

有趣的是，当我设置 shell=True 时，命令失败。该命令确实有一条帮助消息，但它似乎并不表明我的参数列表有问题（不应该有）。除了 Popen 的 shell 命名参数之外，一切都是一样的。我在 Ubuntu 上使用 Python 2.7。不太确定这里发生了什么，任何帮助表示赞赏。我想java命令可能正在执行exec / fork，并且由于某种原因，当我通过Python启动父进程时它并没有死。

我看到这个[SO question](https://stackoverflow.com/questions/3468922/python-why-does-subprocess-start-2-processes-in-ubuntu-and-1-in-opensuse)看起来很有希望，但并没有改变我正在经历的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:03:34.823

This is actually more of a question about the wrapper than about Python -- you would get the same behavior running it from any other language.

To get the behavior you want, the wrapper would want to have the line where it invokes the JVM look as follows:

```
exec java -D... -cp ... main.class.here "$@" 
```

...as opposed to lacking the `exec` on front:

```
java -D... -cp ... main.class.here "$@" 
```

In the former case, the process image of the wrapper is *replaced* with that of the JVM it invokes; in the latter, the wrapper waits for the JVM to exit, and then continues to run.

If the wrapper does any cleanup after JVM exit, using `exec` will prevent this from happening and would thus be the Wrong Thing -- in this case, you would *want* the wrapper to still exist while the JVM runs, as otherwise it would be unable to perform cleanup afterwards.

Be aware that if the wrapper is responsible for detaching the subprocess, it needs to be able to close open file handles for this to happen correctly. Consider passing `close_fds=True` to your Popen call if your parent process has more file descriptors than only stdin, stdout and stderr open.

# javascript - 使用 javascript/css 将 64 位字符串转换为 jpeg

> ID：10297270
> 
> 赞同：0
> 
> 时间：2012-04-24T11:50:42.003
> 
> 标签：javascript, css, firefox, 64-bit, jpeg

为了避免 firefox 对大图像进行激进的去缓存/垃圾收集，我们一直在尝试存储对图像的引用的方法。保持对“new Image()”对象的引用似乎可行，但会占用大量内存。

我现在正在尝试使用

```
$.ajax({
   url: "http://localhost/360/img/frames/compressed/frame0470.jpg",
   dataType: "text",
   success: function(r) {
      console.log(r);
   }
}); 
```

检索图像的 base64 字符串（大概可以存储在比图像对象更少的内存中，并且不会受到 Firefox 的图像垃圾收集）。但是我怎样才能将它转换回 jpeg 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:12:34.343

我也没有真正明白你想要实现的原因，但你应该能够在 XHR 中获取二进制数据，而不是将自己限制在 jQuery 提供的类型中。

首先，在此处阅读 MDC 文档以检索图像的正确二进制字符串 [https://developer.mozilla.org/En/XMLHttpRequest/Using_XMLHttpRequest#Receiving_binary_data_in_older_browsers](https://developer.mozilla.org/En/XMLHttpRequest/Using_XMLHttpRequest#Receiving_binary_data_in_older_browsers)

其次，二进制字符串可以通过`window.btoa()`.

三、base64图片字符串可以通过构造数据url来展示。我相信你已经知道该怎么做了。

与实际的二进制数据相比，二进制字符串需要多 4 倍的内存，因为字符串中的每个字符实际上是 4 个字节的内存，因为 Javascript 在内部使用 UCS-2。Base64 字符串花费 4*1.3=5.2 倍更多的内存。Base64 数据比原始数据大 130%。

在 Javascript 中处理二进制数据的一种巧妙方法是使用 Blob 对象。但无论如何我都没有看到将 Blob 显示为图像，所以......

如果您想避免激进的图像驱逐，我认为可能的方法是将图像粘贴到 <canvas> 元素并显示它。

<canvas> 实际带有一个内置函数`toDataURL()`，可以提供您想要的数据，但是如果您逃脱了图像驱逐，那么您就不需要它了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:26:42.007

我真的不明白你想要实现这一目标的原因，但要回答你的问题：

**基本思路：**

您需要将该数据编码为 Base64：

```
var base64Data = Base64.encode(r); 
```

显示 Base64 图像：

```
$('<img>') // create new image
    .attr('src', 'data:image/jpeg;base64,' + base64Data) // set image data as b64
    .appendTo('body'); // add the image tag to the body element (or any other) 
```

但实际上它似乎有点复杂：[http ://emilsblog.lerch.org/2009/07/javascript-hacks-using-xhr-to-load.html](http://emilsblog.lerch.org/2009/07/javascript-hacks-using-xhr-to-load.html)

# image - 是否可以在不加载图像的情况下检查图像尺寸 [actionscript-3]？

> ID：10297275
> 
> 赞同：1
> 
> 时间：2012-04-24T11:51:07.953
> 
> 标签：image, actionscript-3, loading, image-size

我想在不下载的情况下检查图像大小（图像位于服务器上），可以吗？我发现了很棒的课程[http://www.anttikupila.com/flash/getting-jpg-dimensions-with-as3-without-loading-the-entire-file/](http://www.anttikupila.com/flash/getting-jpg-dimensions-with-as3-without-loading-the-entire-file/)但它只适用于 JPEG，如果有就好了png 的东西也是如此。那门课是 5 年前写的，那么从那时起，有没有为其他类型的图像创建过类似的东西？我没有运气搜索谷歌。

[Christophe Herreman](http://www.herrodius.com/blog/265)声称他为 PNG 写了类似的东西，但经过检查 - 这是本质上不同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:09:14.637

您可以开始加载文件，读取文件开头的字节，从那里获取尺寸并停止加载。这是PNG格式规范。8个字节的[签名](http://www.w3.org/TR/PNG/#5PNG-file-signature)后，你就可以找到[你需要](http://www.w3.org/TR/PNG/#11IHDR)的了。

# geocoding - http://schema.org/GeoShape 的属性的适当格式是什么？

> ID：10297279
> 
> 赞同：6
> 
> 时间：2012-04-24T11:51:33.803
> 
> 标签：geocoding, semantic-web, schema.org

如果[GeoShape](http://schema.org/GeoShape "地理形状")页面包含示例或单独的属性被分解而不仅仅是文本，那就太好了。

我对 circle 属性特别感兴趣。我想从诺丁汉市中心（52.953，-1.149）定义一个半径为 20 英里（~ 32 公里）的圆。

```
<!DOCTYPE html>
<html>
<head>
<title>Nottingham City Neighbourhood</title>
</head>
<body>
<div itemscope itemtype="http://schema.org/Place">
  <div itemprop="geo" itemscope itemtype="http://schema.org/GeoShape">
    <meta itemprop="circle" content="52.953 -1.149 32186.88"/>
  </div>
</div>
</body>
</html> 
```

丰富的代码片段工具确实会挑选出数据，但我不相信我使用了正确的格式。特别是因为解析的经度是正数。

```
> The following structured data is viewable only in the XML results view
> in Custom Search. More information.
> 
> geoshape (source = MICRODATA)  circle = 52.953 -1.149 32186.88 
> 
> 
> The following structured data can be used to filter search results in
> Custom Search. More information.
> 
> more:pagemap:geoshape more:pagemap:geoshape-circle
> more:pagemap:geoshape-circle:1.149
> more:pagemap:geoshape-circle:32186.88
> more:pagemap:geoshape-circle:52.953
> more:pagemap:geoshape-circle:52.953_ 
```

至于其他的，我认为方块和多边形的格式都是“$lat1,$long1 $lat2,$long2 $lat3,$long3 $lat1,$long1”的正方形。

有人有明确的答案或理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T17:34:51.527

我做了一些考古学，跟其他人类似。

详情： http: [//lists.w3.org/Archives/Public/public-vocabs/2012Jun/0116.html](http://lists.w3.org/Archives/Public/public-vocabs/2012Jun/0116.html)

复杂的混淆似乎是（正如 Yves Martin 指出的）原始 rNews 示例中缺少空格。

我们会改善这种情况，我会在这里报告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T23:03:23.827

**验证**

您提供的示例（在您问题的第一个版本中）未通过[http://validator.nu/](http://validator.nu/)的验证。您不能直接在声明实体类型的同一节点中使用属性。可能丰富的代码片段工具不够严格。为了确认，这个[替代工具](http://foolip.org/microdatajs/live/)也拒绝从您的块中生成 JSON 表达式，因为缺少顶级元素。

因此，该属性需要一个额外的节点`geo`，这是一种正确的表达方式（doctype 和 title 仅用于验证工具）：

```
<!DOCTYPE html>
<title>Nottingham City Neighbourhood</title>
<div class="hidden" itemscope itemtype="http://schema.org/GeoShape">
  <div itemprop="geo">
    <meta itemprop="circle" content="52.953 -1.149 32186.88"/>
  </div>
</div> 
```

**推荐**

根据这个[谷歌常见问题解答](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1093493)，只有少数实体真正得到支持，并且基于微数据格式的[组织](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=146861)和[事件](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=164506)`geo`示例，可选属性仅建议`longitude`和来自[http://schema.org/GeoCoordinates](http://schema.org/GeoCoordinates)`latitude`的元素。因此，与 相比，使用这个简单的*点*定义毫无疑问。顺便说一下，这个例子是有效的并且被正确提取：*`circle`*

 *```
<div itemscope itemtype="http://data-vocabulary.org/Organization"> 
    <span itemprop="name">Nottingham City Neighbourhood</span>
    <div itemprop="geo">
      <meta itemprop="circle" content="52.953 -1.149 32186.88"/>
    </div>
</div> 
```

如果您使用[sindice.com](http://sindice.com/)，则没有命中，`http://schema.org/GeoShape`而`http://schema.org/GeoCoordinates`被广泛使用。很难找到`circle`.

**Circle 属性值**

对于 circle 属性内容本身，许多文档引用[WGS84](http://www.w3.org/2003/01/geo/)但它只涉及点。本[文档](http://www.georss.org/simple)确认`circle`元素的内容文本结构。

[rNews](http://dev.iptc.org/rNews-10-The-Geo-Coordinates-Class)的这个示例显然在 500 半径之前缺少一个空格并且没有正确呈现，页面源包含`<td class="rnews_td codestyle">38.920952 -94.645443500</td>`而不是`<td class="rnews_td codestyle">38.920952 -94.645443 500</td>`

您应该查看[模式生成器或解析器](http://schema.rdfs.org/tools.html)。也许其中一个已经为 GeoShape 属性实现了细粒度编辑器，而不是原始文本字段，以便您可以确认属性内容结构。我看过[Any23](http://developers.any23.org/)但仍然是同样的问题：GeoCoordinates 已实现，但没有 GeoShape。

**框和多边形属性值**

[根据rNews](http://dev.iptc.org/rNews-10-The-Geo-Coordinates-Class)和[GeoRSS](http://www.georss.org/simple)，点、框、多边形或线（仅使用空间）的经度和纬度值之间不会出现彗差。

**作为结论**，如果您的目标是为搜索引擎提供位置，则应该避免`GeoShape`......目前，这`GeoCoordinates`似乎是一个合理的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T08:10:40.277

[根据 W3.org 上的讨论](http://lists.w3.org/Archives/Public/public-vocabs/2012Jun/0116.html "Re: GeoShape 属性的格式是什么？")， GeoShape [Box](http://schema.org/GeoShape "GeoShape - schema.org")的示例值为：

```
38.920952 -94.645443 38.951797 -94.680439 
```

这些值导致[此处](http://goo.gl/maps/H1aNn "示例框")映射的区域。

如[架构](http://schema.org/GeoShape "一个地方的地理形状。")中所述，它们只需要是框角的唯一值（例如“latmin latmax lonmin lonmax”）：

> 多边形是由起点和终点相同的点对点路径包围的区域。多边形表示为一系列四个或更多间隔点，其中第一个点和最后一个点相同。*

# ios - Contre Jour 中的弹性触手等图形效果

> ID：10297280
> 
> 赞同：6
> 
> 时间：2012-04-24T11:51:35.300
> 
> 标签：ios, opengl-es, cocos2d-iphone, box2d

我想知道IOS的“Contre jour”游戏有多漂亮。特别是我喜欢弹性“触手”，在 2 分 20 秒的视频中显示： [http ://www.youtube.com/watch?v=ptdTdJarWLw](http://www.youtube.com/watch?v=ptdTdJarWLw)

我怎样才能实现这样的效果？

我知道在 cocos2d 中有一种叫做“Verlet 集成”的技术，甚至还实现了“verlet 绳索”来绘制绳索，但是如何对“触手”精灵做出如此好的弹性效果呢？

我有使用 box2D 的经验，并且可能会尝试为此效果实现物理，但找不到如何使用这种弹性变形绘制精灵的解决方案。

任何人都可以帮助我或提供一些提示吗？

只是技术的解释，这可以帮助我吗？

本人对opengl有一点经验，cocos2d经验不错，所以打算用cocos2d。

抱歉英语不好，我希望你能理解我的问题:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T09:05:26.767

如果您使用 Box2D，您可以尝试将 frequencyHz 和 dampingRatio 选项设置为非默认值的距离关节。也许 4-6 左右的低频和 0.5-0.7 左右的阻尼可能是一个很好的起点。您可以将频率视为关节每秒尝试校正距离的次数，将阻尼视为每次校正距离的程度。将阻尼设置为低于 1 的值将意味着关节将更慢地校正距离，并且它将具有弹性/橡胶行为。

至于渲染，您确实可以为此使用 verlet 集成。将距离关节的两个锚点作为“绳子”的端点，并在它们之间以均匀间隔的线放置一些点（看起来不需要太多）。每个时间步长，中间的点将简单地移向它们两侧的两个点的平均值。您可以通过调整中间点在每个时间步移动到目标位置的距离来使绳索看起来更紧或更松。

然后，最终的纹理/精灵渲染将从 Verlet 点的当前位置获取其位置。

# c# - 自定义绘制选择矩形

> ID：10297282
> 
> 赞同：0
> 
> 时间：2012-04-24T11:51:43.460
> 
> 标签：c#, selection, custom-draw

我正在开发基于 ListView 控件的自定义控件。该控件的目标是在第一列中显示事件名称，并在第二列的时间线上显示事件持续时间。我已经为时间线部分实现了自定义绘图，并且一切正常。

现在我想实现一个“缩放”功能。用户可以在第二列上单击某处的位置拖动鼠标，释放时时间线将放大，开始和结束时间与 mousedown/mouseup 事件匹配。

目前，当我单击/拖动鼠标时，会出现一个正常的选择框。我想忽略这一点，这样我得到的不是一个框，而是更多的垂直区域（因此选择仅基于时间轴轴）。

我真的不知道在哪里看以及如何覆盖选择框的绘图。任何指针/示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:19:34.363

好吧，如果您不需要多选选项设置`MultiSelect`属性来`false`禁用橡皮筋选择。

# ruby-on-rails - 什么时候应该在 Rails 中嵌套模型声明？

> ID：10297285
> 
> 赞同：2
> 
> 时间：2012-04-24T11:51:56.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3

关于何时最好嵌套模型名称空间以及何时最好将它们全部保留在顶层的指导方针是什么？

例如，当我有几个类都与一个核心类有关（并且系统的大部分只处理该核心类）时，我的直觉告诉我这样声明它们：

```
CoreModel

CoreModel::DependentOne

CoreModel::AnotherDependent 
```

几乎总是这对应于 has_many/belongs_to 关系（我几乎认为这是约定优于配置的下一个候选者。）

同样，我的路线经常反映这种嵌套：/CoreModels/:core_model_id/DependentOne/:id

我觉得我应该这样做的原因是，通常同一个大型应用程序的两个组件区域可能需要一个支持组件，其名称与软件的其他区域相似（如果不相同）。我觉得命名这些依赖模型（仅存在以支持该核心模型）是最好的方法。

我很困惑，因为虽然有时以这种方式做事可以使事情变得更容易（例如 link_to 只需要采用 DependentOne 模型并且会自动正确路由）但其他项目如 form_for 拒绝正常工作（因为它不正确路由，如果我将 CoreModel 添加到 form_for 它抱怨没有这样的路由 core_model_core_model_dependent_one 等......

也许我还不够清楚，所以我会确保在要求澄清时更新它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:10:40.177

`...the majority of the system only deals with that core class...`

在那种情况下，我不会打扰它们的命名空间。

`The reason I feel like I should do this is because often two component areas of the same large application may need a supporting component with similar if not identical names as other areas of the software. I feel like name spacing these dependent models (which only exist to support that core model) is the best way to go.`

Bingo - 如果您有名称冲突，命名空间是解决它的好方法。但是，你还有这个问题吗？

命名空间可以防止名称冲突，但在 Rails 中它也引入了一些问题和令人头疼的问题，并且（在整个应用程序中）更多的输入。所以，对我来说，除非你真的有名字冲突，否则这是不值得的。

考虑一个这样的结构，你的核心模型和许多可以帮助它的结构。

```
#Core Models
Model
Supporter
Assister
Helper
Benefactor 
```

在您的应用程序的大部分生命周期中，您可能永远不会遇到问题。如果你最终击中了一个，你可以这样做：

```
AltModel
AltModel::Supporter    
OtherModel
OtherModel::Benefactor 
```

或者，如果它真的很简单，只需为类名添加前缀即可：

```
AltModelSupporter
OtherModelBenefactor 
```

就此而言，以这种方式命名您的核心模型可能比“正确”命名它们更简单：

```
CoreModel
CoreSupporter
CoreAssister 
```

因此，有很多方法可以完成您的需求，但没有一种方法建议您在实际上没有命名空间冲突时为应用程序的核心功能设置命名空间。考虑到您已经遇到的头疼问题，我认为您会更乐意将应用程序的核心模型留在顶级命名空间中，并且只嵌套实际存在冲突的替代模型。

# windows - 如何找到在我的电脑中创建的最新 com 端口？

> ID：10297289
> 
> 赞同：2
> 
> 时间：2012-04-24T11:52:15.390
> 
> 标签：windows, winapi, usb, device-driver

如何找到在我的电脑中创建的最新虚拟 COM 端口？

设备管理器 -> 端口 -> 设备名（**COM X**）。

如何以编程方式找到“COM x”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:26:44.053

查看[SetupApi](http://msdn.microsoft.com/en-us/library/windows/hardware/ff550897%28v=vs.85%29.aspx)，特别是[`SetupDiEnumDeviceInfo()`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551010%28v=vs.85%29.aspx)and[`CM_Get_Device_ID()`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff538405%28v=vs.85%29.aspx)函数。

[这个项目](http://code.google.com/p/usb-devices-list/source/browse/trunk/usb-device-list/USBDeviceList/CUSBDevices.cs)有一些示例代码显示了用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:18:27.627

“安装日期”是设备管理器中硬件属性页面的详细信息选项卡上的属性之一。

我希望能够在注册表中为它找到一个键：

```
HKLM\SSYSTEM\CurrentControlSet\Enum\... 
```

但是没有钥匙，或者至少，我找不到。

按 VendorID + DeviceID/ProductID 搜索就足够了吗？

# c++ - Clang 3.1 + libc++ 编译错误

> ID：10297291
> 
> 赞同：3
> 
> 时间：2012-04-24T11:52:34.330
> 
> 标签：c++, gcc, clang, redundancy, c++-standard-library

我已经`~/alt`在 Ubuntu 12.04 上使用 GCC-4.6 成功构建并安装了（在前缀下）LLVM-Clang 主干（2012 年 4 月 23 日），然后使用这个 Clang-build 构建并安装了 libc++。当我想使用它时，我必须同时提供`-lc++`，`-libstdc++`如下所示

```
/home/per/alt/bin/clang -x c++ -I/home/per/alt/include/v1 -L/home/per/alt/lib -std=gnu++0x -g -Wall ~/f.cpp -lm -lc++ -lstdc++ -lpthread -o f 
```

编译`f.cpp`包含

```
#include <iostream>

using std::cout;
using std::endl;

int main(int argc, const char * argv[]) {
    cout << "sxx" << endl;
    return 0;
} 
```

如果我省略`-lstdc++`，我会收到链接错误

```
/home/per/alt/include/v1/ostream:989: error: undefined reference to '__cxa_begin_catch'
/home/per/alt/include/v1/ostream:993: error: undefined reference to '__cxa_end_catch'
/home/per/alt/include/v1/ostream:993: error: undefined reference to '__cxa_end_catch'
/tmp/f-4l9mgl.o(.eh_frame+0xd3): error: undefined reference to '__gxx_personality_v0'
clang: error: linker command failed with exit code 1 (use -v to see invocation)

Compilation exited abnormally with code 1 at Tue Apr 24 13:59:22 
```

不`libc++`应该完全替代`libstdc++`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T15:50:45.850

libcxx 不附带 ABI 层……这就是 libcxxabi 存在的原因。

从理论上讲，您应该能够链接到 libcxxabi。

在实践中，您可能希望链接到 libsupc++ 或 libcxxrt

最近新闻组上有一些讨论，恐怕解决方案很复杂且不断变化： [http ://thread.gmane.org/gmane.comp.compilers.clang.devel/19782](http://thread.gmane.org/gmane.comp.compilers.clang.devel/19782)

# android - Android 如何替换已弃用的 tabhost？

> ID：10297293
> 
> 赞同：7
> 
> 时间：2012-04-24T11:52:45.580
> 
> 标签：android, android-tabhost

我将创建一个旨在使用的应用程序`Tabhost`，但据我所知，它已被弃用。所以我的问题是我应该使用`Tabhost`还是如何替换它..通过使用按钮而不是在每个 xml 或任何其他建议中声明的按钮？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T12:11:14.727

Android 中的“已弃用”表示“我们认为您应该调查更好的解决方案”。“已弃用”很少意味着“它无法使用”。~~`TabHost`，AFAIK，在 Android 4.0 上运行良好。~~

~~话虽如此，我建议考虑切换到操作栏中的选项卡，使用[ActionBarSherlock](http://actionbarsherlock.com)为您提供对 Android 2.1 的向后兼容性。~~

**更新**

此外，`TabHost`不推荐使用。`TabActivity`已弃用。您仍然可以将`TabHost`, 与选项卡的视图一起使用。或者，使用：

*   `ViewPager`带有标签式指示器，例如`PagerTabStrip`
*   `FragmentTabHost`, 对于`TabHost`使用片段作为选项卡的

操作栏也支持选项卡，但从“L”开发者预览版开始已弃用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-08T07:49:50.800

根据 Android API level-18，不推荐使用 ActionBarSherlock，他们已经引入了 ActionBarCompat .. 最好使用[ActionBarCompat](http://android-developers.blogspot.in/2013/08/actionbarcompat-and-io-2013-app-source.html)。

谢谢你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-17T22:21:22.927

~~`TabHost`~~在 API 级别 30 中已弃用。您可以使用材料`TabLayout`，`ViewPager`而不是~~`TabHost`~~：

```
<com.google.android.material.tabs.TabLayout
            android:id="@+id/tablayout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:tabGravity="center"
            app:tabIndicatorColor="@color/colorPrimary"
            app:tabIndicatorHeight="2dp"
            app:tabMode="fixed"
            app:tabSelectedTextColor="@color/colorPrimary"
            app:tabTextAppearance="@style/MapTabTextStyle"
            app:tabTextColor="@color/black" /> 
```

代码：

```
tablayout.addTab(tablayout.newTab().setText("Tab1"))
tablayout.addTab(tablayout.newTab().setText("Tab2"))
tablayout.addOnTabSelectedListener(object : TabLayout.OnTabSelectedListener {
        override fun onTabReselected(tab: TabLayout.Tab?) {

        }

        override fun onTabUnselected(tab: TabLayout.Tab?) {

        }

        override fun onTabSelected(tab: TabLayout.Tab?) {
            // do something
        }

    }) 
```

# android - Android facebook sso - 无效的令牌

> ID：10297297
> 
> 赞同：0
> 
> 时间：2012-04-24T11:52:58.153
> 
> 标签：android, facebook, cordova

我是 facebook sso 的新手，我已将 SSO 集成到我的应用程序中，这在 android 模拟器中运行良好，同时当我在设备上执行此应用程序时，我面临错误.. 显示 invalid_token ，但同样的事情是在模拟器中工作。我真的不知道错在哪里。

即使我已经创建了密钥库并使用 facebook 应用程序和秘密 ID 进行了映射...

问题还是没有解决……

请指导我解决这个特定问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:19:25.660

SSO 存在一些问题，导致的错误各不相同，但可能都与 facebook 遇到的问题有关。它已被 facebook 确认，因为您可以在[平台状态](http://developers.facebook.com/live_status)页面中。

它可以在模拟器中运行，因为您可能没有在模拟器上安装 android facebook 应用程序，因为 SSO 进程不是使用的进程，而是 fb android sdk 附带的 auth 进程。

如果安装了 fb 应用程序，那么 SSO 就会启动，然后那个 bug 就会阻碍。目前没有办法解决这个问题（据我所知），唯一的事情就是“不使用 SSO”，即使它可用。除此之外，它只是在等待 facebook 解决问题（尽管它已经这样大约一周左右了）。

# java - 如何将“2012-04-30”日期转换为“04-Apr-2012”格式

> ID：10297299
> 
> 赞同：-4
> 
> 时间：2012-04-24T11:53:05.983
> 
> 标签：java

> **可能重复：**
> [使用 Format 类格式化日期（或否则 if ）](https://stackoverflow.com/questions/6065507/formatting-dates-using-a-format-class-or-otherwise-if)

我正在使用“My Sql”数据库，在我的数据库表中，我以“2012-04-30”格式存储日期，但现在我必须以这种“2012 年 4 月 4 日”格式在我的 jsp 页面中显示它。

我如何使用 Java 代码做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:57:58.397

```
 Date d = (new SimpleDateFormat("yyyy-MM-dd").parse("2012-04-30"));
    String result = (new SimpleDateFormat("dd-MMM-yyyy", Locale.ENGLISH).format(d));
    System.out.println(result); 
```

# javascript - 处理产品序列号 (ID)

> ID：10297300
> 
> 赞同：0
> 
> 时间：2012-04-24T11:53:06.267
> 
> 标签：javascript, asp.net, web-applications

我想保存产品序列号，我创建了一个表

```
dbo.tStock
productType tinyint,
IdProduct int, 
ItemTypeNum tinyint, 
FirstSNum  nchar (20), 
LastSNum   nchar (20), 
TotalQty   bigint 
```

当用户插入`totalQty`第一个序列号`FirstSNum`时，应用程序应按顺序计算最后一个序列号。
在我的页面中，我使用了 javascript 函数：

```
function Calculate() {
            var txt1 = document.getElementById('<%= txtTotalQty.ClientID%>').value
            var txt2 = document.getElementById('<%= txtFirstserial.ClientID%>').value
            if (txt1 != '' && txt2 != "")
                document.getElementById('<%= txtLastSerial.ClientID%>').value = 
                eval((parseFloat(txt1)-1 + parseFloat(txt2)))
        } 
```

问题是当序列号以零（前导零）开头时，我计算错误，例如：
**totalQty:** 100
**Firstserial:** 01000
**LastSerial:** 1099 ( **WRONG** ) 它应该是=01099
我正在使用 ASP.NET C#，
任何想法? 我感谢任何努力;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:07:09.607

`eval((parseFloat(txt1)-1 + parseFloat(txt2)))`

你不需要`eval()`。只需添加值。

`parseFloat()`完全按照锡上所说的那样做。它将字符串`"01000"`转换为数字：`1000`. 所以你最终只得到一个数字，而数字没有前导零。

如果你想对结果数字进行零填充，你需要自己做。

`("00000" + (parseFloat(txt1)-1 + (parseFloat(txt2))).toString()).substr(-5,5);`

进行计算，将其转换为字符串，在其前面加上“00000”，然后取最右边的五个字符。

# iphone - Objective-C 中的十六进制值

> ID：10297302
> 
> 赞同：12
> 
> 时间：2012-04-24T11:53:29.180
> 
> 标签：iphone, objective-c, ios, uicolor

我想从 HEX 值创建 UIColor。但我的颜色是一个 NSString。所以我实现了这个解决方案： [如何从十六进制字符串创建 UIColor？](https://stackoverflow.com/questions/1560081/how-can-i-create-a-uicolor-from-a-hex-string)

代码：

```
#define UIColorFromRGB(rgbValue) [UIColor \
colorWithRed:((float)((rgbValue & 0xFF0000) >> 16))/255.0 \
green:((float)((rgbValue & 0xFF00) >> 8))/255.0 \
blue:((float)(rgbValue & 0xFF))/255.0 alpha:1.0] 
```

然后我有（简化）：

```
NSString *myString = [[NSString alloc] initWithString:@"0xFFFFFF"]; 
```

所以当我想调用宏时：

```
UIColor *myColor = UIColorFromRGB(myString); 
```

我收到一个错误：`invalid operands to binary expression ('NSString *' and 'int')`

所以我知道我必须传递 int，但是在这种情况下如何将 NSString 转换为 int？当然`[myString intValue];`在这里不起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-24T12:00:15.513

您可以直接将宏与十六进制整数一起使用，如下所示：

```
UIColorFromRGB(0xff4433) 
```

或者您可以将十六进制字符串解析为一个整数，如下所示：

```
unsigned colorInt = 0;
[[NSScanner scannerWithString:hexString] scanHexInt:&colorInt];
UIColorFromRGB(colorInt) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T12:00:14.030

您不能将其作为标准操作，但请查看我的[类别，`UIColor`](https://github.com/mattjgalloway/MJGFoundation/blob/master/Source/Categories/UIColor/UIColor-MJGAdditions.m)其中有一种方法可以做到这一点。

您定义的宏期望它是一个以 RGB 格式打包的整数。您正在传递一个字符串，这就是它不起作用的原因。

# ios - 登录后不重定向到 UIWebView 中的 Facebook 评论

> ID：10297304
> 
> 赞同：4
> 
> 时间：2012-04-24T11:53:42.583
> 
> 标签：ios, facebook, ipad, html, facebook-comments

我正在使用 Facebook 提供的 UIWebView 和[HTML5 代码](https://developers.facebook.com/docs/reference/plugins/comments/)向我的 iPad 应用程序添加 Facebook 评论。当用户未登录时，应用程序会显示评论和“登录 Facebook 发表评论”按钮。

![评论初始窗口](../Images/b445ccac571aeec65ad49f9524b46cd5.png)

单击该按钮将引导我完成登录过程。登录完成后，视图被重定向到一个带有“登录完成”消息的空页面。它不会重定向回评论对话框。

![在此处输入图像描述](../Images/73e2dcf7fd36a8cc4600c06207bdc1a7.png)

现在我实施了一个丑陋的解决方法。收到*webViewDidFinishLoad*事件后，我会查看页面内容并在页面显示此消息时重新加载。不过，这似乎不是一条干净的路。

为什么 Facebook 不将我重定向回原始评论页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:41:32.390

我怀疑您遇到的问题与此问题有关：[UIWebView 中的 Facebook 身份验证不会重定向回我网站上要求身份验证的原始页面](https://stackoverflow.com/questions/8025082/facebook-authentication-in-a-uiwebview-does-not-redirect-back-to-original-page-o)

具体来说，标准的 Facebook Web 登录过程会启动一个新的浏览器窗口对话框，并向打开者发送一条消息，以指示登录成功以进行重定向。

引用链接 SO 中的一段话，“UIWebView 不支持多个窗口，因此它无法将消息发布回您的原始页面，因为它不再加载。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T00:05:30.717

我也在开发一个 iPad 应用程序，我的解决方案与你的类似：我总是将用户带到“https://m.facebook.com”，强制他先登录，然后在“webViewDidFinishLoad”中检查返回的 url 以及是否匹配：

“https://m.facebook.com/login/checkpoint/”

确切地说，就是成功登录后返回的 url，然后我调用我自己的方法（使用 reload 或任何我想要的方法）。此时，用户已通过身份验证并具有有效的 FB 会话，因此不再需要重定向。

它绝对不漂亮，而且一旦 FB 改变了它处理登录对话框的方式，它可能会中断，但我也找不到更好的方法来解决它。甚至尝试使用“FB.Event.subscribe('auth.login', function(response) {});” 当然，没有成功，因为代码永远无法到达。

我认为一个错误已经提交给 FB，但我认为它没有得到应有的关注......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T05:44:29.450

我遇到了与这个问题相同的问题，但在阅读了一些[Facebook 官方文档](https://developers.facebook.com/docs/facebook-login/using-sdks/)后，我将重新设计以使用 Facebook 原生 SDK。

> 所有 iOS 和 Android 应用程序必须（2013 年 10 月 2 日生效）使用我们的 iOS 和 Android SDK 来请求权限。

不过，我还认为“否则”只是“开发人员通知”？

发布此内容是希望它可以为使用相同方法的人节省时间:)

# sharepoint-2010 - 无法在 sharepoint 中显示运行时错误

> ID：10297306
> 
> 赞同：2
> 
> 时间：2012-04-24T11:53:46.370
> 
> 标签：sharepoint-2010, error-handling, web-config

即使我的 web.config 看起来不错，我在 SharePoint 中显示运行时错误也有一些困难：

我已经设定：

*   customErrors 关闭
*   调用堆栈为真
*   `<compilation batch="true" debug="true" optimizeCompilations="true">`

你知道问题出在哪里吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:07:43.140

SharePoint 2007 和 SharePoint 2010 之间发生了一些变化。Greg 在以下帖子中讨论了获取详细错误消息所需的步骤：

[http://www.greggalipeau.com/sharepoint-2010-customerrors-mode/](http://www.greggalipeau.com/sharepoint-2010-customerrors-mode/)

# haskell - 为什么名称形成一种而不只是一种类型？

> ID：10297308
> 
> 赞同：5
> 
> 时间：2012-04-24T11:53:52.177
> 
> 标签：haskell, functional-programming, type-systems, language-theory, higher-kinded-types

前段时间在一个 Haskell 扩展中（找不到链接），[最近在 Ur 中](http://www.impredicative.com/ur/tutorial/tlc.html)我发现名称（例如，记录字段）形成了一种类型。有人可以解释为什么类型抽象对他们来说还不够吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T11:59:05.627

记录系统定义了值、类型和（可能）种类的规则。使用什么规则取决于所设计的类型系统，以及设计者希望实现的目标。

例如在 Haskell 中，唱片公司是：

*   值（访问器函数）
*   这些值具有类型（例如`Record -> Int`）
*   这些类型有种类 ( `*`)

其他记录系统可以将类型或种类系统用于不同的目的。

通过将标签放在单独的种类中，类型检查器可以对它们进行特殊处理，例如自动镜头的特殊规则，或与记录构造（可能是整体）有关的证明，而不是通用功能。

在 Haskell 中使用种类系统的一个例子是使用“未装箱类型”。这些类型具有：

*   对常规值的不同运行时表示
*   不同的绑定形式（例如不能在堆上分配）

为了防止未装箱的类型与常规类型混合，它们被赋予了不同的*kind*，这允许编译器跟踪它们的分离。

因此，唱片标签名称没有什么神奇之处，这意味着您必须使用不同的类型来表示它们——这只是语言设计者可以做出的选择——并且使用依赖类型的语言，例如 Ur 或 Twelf，可以是一个有用的区别。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-24T13:00:06.360

答案很简单：因为它们可以出现在类型中。因此，它们必须存在于类型级别（否则您将需要依赖类型）。因为他们生活在类型层面，所以他们被分类。

# jquery - Ajax 文件上传在 IE7 中不起作用

> ID：10297309
> 
> 赞同：1
> 
> 时间：2012-04-24T11:53:52.100
> 
> 标签：jquery, asp.net-mvc-3, internet-explorer-7, asyncfileupload

我在 asp.net mvc3 中使用这个插件通过 Ajax 上传文件。 [http://malsup.com/jquery/form/#ajaxSubmit](http://malsup.com/jquery/form/#ajaxSubmit) 但它在 IE7 中不起作用。

```
$("#Controls").submit(function () {
            var options = {
                url: "/Education/upDoc",
                datatype: "json",
                success: showResponse
            };
    $(this).ajaxSubmit(options);
});

function showResponse(responseText, statusText, xhr, $form) {
        alert("sr");
        alert("Sr  " + responseText.success);
        if (responseText.success == true) {
            //some code
        }
    }

<form action='' id='Controls' method='post' enctype='multipart/form-data'>
<table>
                        <tr> 
                        <td>File Type</td> 
                        <td><span class='leftten'></span></td> 
                        <td> 
                        @*<select id='documentType' name='documentType'> 

                        </select> *@
                        @Html.DropDownList("documentType", doctypelist, new { @id = "documentType" })
                        </td> 

                        <td><img src='../../img/AlertSign.jpg'  class='errImgDoc' data-style-tooltip='tooltip-shiny-red' title='' id='errFileType'  height='18px' width='20px'/></td> 
                        <td><span class='leftfortytwo'></span></td> 
                        <td><input type='file' id='file' name='file' /></td> 
                        <td><img src='../../img/AlertSign.jpg'  class='errImgDoc' data-style-tooltip='tooltip-shiny-red' title='' id='errFile'  height='18px' width='20px' /></td> 
                        <td><span class='leftfortytwo'></span></td> 
                        <td>Name</td> 
                        <td><span class='leftten'></span></td> 
                        <td><input type='text' id='description' name='description' /></td> 
                        </tr> 
                        </table> 
                        <br /> 
                        <div align='right'> 
                        <table><tr> 
                        <td><input type='button' id='eduUploadCancel' class='Cancel' onmouseover='CancelHover(this)' onmouseout='CancelMouseOut(this)' onclick='Cancel(this)' /></td><td><span class='leftten'></span></td><td><input type='submit' id='eduUploadSave' class='Save' onmouseover='SaveHover(this)' onmouseout='SaveMouseOut(this)' /></td></tr></table> 
                        </div>

</form> 
```

在这里，`showResponse()`永远不会用 IE7 调用。在 Chrome 和 Firefox 上运行良好。请帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:12:36.210

IE 7 是旧浏览器，不支持 XMLHttpRequest Level 2。

> 对于较旧的浏览器，使用涉及 iframe 的后备技术，因为无法使用 XMLHttpRequest 对象的 1 级实现来上传文件。这是一种常见的后备技术，但它具有固有的局限性。iframe 元素用作表单提交操作的目标，这意味着将服务器响应写入 iframe。如果响应类型是 HTML 或 XML，这**很好，但如果响应类型是脚本或 JSON，则效果不佳，**这两种类型通常都包含在 HTML 标记中找到时需要使用实体引用来表示的字符。

[http://malsup.com/jquery/form/#file-upload](http://malsup.com/jquery/form/#file-upload)

# php - 使用 Zend 框架插入方法将日期插入数据库表

> ID：10297314
> 
> 赞同：0
> 
> 时间：2012-04-24T11:54:09.620
> 
> 标签：php, mysql, zend-framework, sql-date-functions

我有以下代码：

```
 $table_project_win = new Application_Model_DbTable_AfterWinProject();

    $data_win = array(
                'project_id' => $project_id, 
                'project_name' => $project, 
                'project_type_id' =>  $pro_type, 
                'start_date' => $dateStart, 
                'end_date' => $dateEnd, 
                'project_size' =>  $size, 
                'project_description' => $pro_des  
    );

    $table_project_win->insert($data_win); 
```

在这里，我得到 $dateStart 和 $dateEnd 变量，使用如下：

```
$dateStartt = $this->_getParam('dateStart');
echo 'date Start: '.$dateStartt;
$dateStart='"'.$dateStartt.'"';
$dateEndd = $this->_getParam('dateEnd');
$dateEnd='"'.$dateEndd.'"' 
```

通过使用 getParam 我得到用户输入的日期的值但是当我将它插入到我使用的数据库中时

```
$dateStart='"'.$dateStartt.'"';
$dateEnd='"'.$dateEndd.'"' 
```

但是在数据库表中，插入日期的值为'0000-00-00'，而当我回显通过getParam获得的$dateStart时，它给出的正确值为'2012-12-11'。这是什么原因它？？我该怎么办？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:00:24.907

```
replace $dateStart='"'.$dateStartt.'"'; 
```

和

```
$dateStart= $dateStartt ; 
```

或者

```
$dateStart='`'.$dateStartt.'`'; 
```

# javascript - 删除select中的一个选项，结果在IE上不显示

> ID：10297322
> 
> 赞同：1
> 
> 时间：2012-04-24T11:54:29.057
> 
> 标签：javascript, jquery, internet-explorer, select, option

这个 html 完全可以在 chrome 中使用，但不能在 IE 中使用

文件很简单，只有两个功能

1：点击添加按钮，第一行会被克隆到添加按钮之前

2：点击组合框，第二个选项将被删除。

现在问题是功能2

1\. 在 IE 中，加载此页面，然后单击添加按钮添加一些组合框

2\. 单击第一个组合框，您将不会在组合框中看到第二个选项（这是正确的结果）

3\. 单击第二个组合框或其他克隆的组合框，然后您会看到第二个选项仍在组合框中，因此它没有被删除。（这不是正确的结果）

4\. 如果您在开发人员工具中看到源代码，您可以看到第二个选项已被删除。

那么，如何删除 IE 中的选项？

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
jQuery(document).ready
(
    function()
    {
        $('#add').click(function(){
                        $(this).parent().parent().before($('tr').eq(0).clone(true));
        });
        $('select').focus(function(){
                        $(this).find('option').eq(1).remove();
        });
    }
);
</script>
</head>
<body>
<table>
    <tr>
        <td>
            <select>
                <option>1</option><option>2</option><option>3</option>
            </select>
        </td>
    </tr>
    <tr>
        <td><input id="add" type="button" value="add"/></td>
    </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:46:33.527

对我来说很好。
这就是我改变的：

```
<script type="text/javascript">
    $(window).load(function(){
        $('#add').on('click', function(){
            $(this).parent().parent().before($('tr').eq(0).clone(true));
        });

        $('select').on('focus', function(){
            $(this).find('option').eq(1).remove();
        });
    });
</script> 
```

这是完整页面，带有更“标准”的代码

```
<html>

<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript">
        $(window).load(function(){
            $('#add').on('click', function(){
                $('#formclone').append($('.myselect').eq(0).clone(true));
            });

            $('select').on('focus', function(){
                $(this).find('option').eq(1).remove();
            });
        });
    </script>
</head>

<body>
<div id="divform">
    <form class="myform">
        <select class="myselect">
            <option>1</option>
            <option>2</option>
            <option>3</option>
        </select>
        <input id="add" type="button" value="add">
    </form>
</div>
<p>
    <div id="divclone">
        clones: 
        <form id="formclone"></form>
    </div>
</p>
</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:17:58.970

第一个有效，因为事件处理程序附加到此时 DOM 中唯一的“选择”。然后，当您单击“添加”时，会向 DOM 添加一个新的“选择”元素，但该元素没有附加任何事件处理程序。我可能误解了你的问题，如果是这种情况，请告诉我。

如果您提供明确的规格，我可以写一个简短的示例来说明如何完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:05:37.173

```
 $('select').live('focus',function(){
        $(this).find('option').eq(1).remove();
        }); 
```

使用**现场**..它可能工作。

# android - Android 屏幕方向更改在平板电脑上有不同的行为

> ID：10297326
> 
> 赞同：0
> 
> 时间：2012-04-24T11:55:00.130
> 
> 标签：android, screen, orientation, tablet

我有活动：

```
android:screenOrientation="portrait" 
```

和代码：

```
if(blah blah blah)
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE) 
```

在活动 onCreate。1\. 在智能手机上测试时“setRequestedOrientation”会导致破坏活动并以所需的屏幕方向再次创建。2\. 在平板设备上测试时，此代码仅运行一次活动。在“setRequestedOrientation”之后它只是继续而不破坏并再次创建活动。当在没有调试器或 onCreate 中没有断点的情况下启动代码时会发生这种情况。如果我停止 onCreate 函数 - 我在日志中看到 - 再次破坏和 onCreate。如何用平板电脑捕捉特定情况？

更新： - 如果“方向锁定”关闭，平板电脑会出现问题。如果启用了“方向锁定”，程序的工作方式与智能手机相同。

UPDATE2： - 是否可以将首选屏幕方向设置为整个应用程序。因此，当活动开始知道所需的方向时。这将使不必要的调用“setScreenOrientation”并避免创建第二个活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:42:12.847

在解决这个问题一整天之后，我在我的应用程序中进行了以下更改： 1\. 每个活动/没有第一个/都被声明为 android:screenOrientation="behind"。2\. 在第一个活动中，我使用用户选择的模式/从我的菜单设置首选屏幕方向。3\. 仅当用户在我的菜单选项中更改模式时，我才调用 setRequestedOrientation。

这会导致活动只创建一次。最后:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:08:12.920

你可以设置

```
<activity ActivityName = "test_activity"
android:configChanges="orientation">
</activity> 
```

在你的 android 清单文件中。它不允许活动在方向更改时重新启动，但 onconfigurationchange 将被正常调用。稍后您可以在 onconfigurationchange 中获取显示方向并设置您想要的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:17:26.947

不..您**不能为整个应用程序设置首选屏幕方向**...相反，您应该只在各自的活动中调用 setScreenOrientation ...[请在此处参考此链接...](https://stackoverflow.com/questions/5062722/androidscreenorientation-tag-in-application-does-not-work)

# iphone - 使用 viewDidAppear 和 viewDidLoad 方法的异常行为

> ID：10297340
> 
> 赞同：0
> 
> 时间：2012-04-24T11:55:51.267
> 
> 标签：iphone, objective-c, uitableview, viewwillappear, viewdidappear

我试图在它们出现时更新我的​​一些视图，所以我自然地发现自己使用 viewDidAppear: 和 viewWillAppear: 方法。但是，我在使用这些方法时遇到了两个问题：

1.  当我只实现其中一种方法时，我想要进行的更改并不完全存在，所以为了让一切正常工作，我用相同的代码实现了这两种方法。
2.  即使在使用相同的代码实现这两种方法之后，更新视图内容时也会有 0.5 到 1 秒的延迟。

这是我定制的表格视图控制器的代码：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.tableView reloadData];
}

-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self.tableView reloadData];
} 
```

出于某种原因，我必须调用 reloadData 方法两次才能完全更新我的表格视图。

这是我定制的普通视图控制器的代码：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    navItem.title = @"Name1";
    nameLabel.text = @"Name1";
    nameField.hidden = YES;
}

-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    navItem.title = @"Name1";
    nameLabel.text = @"Name1";
    nameField.hidden = YES;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:53:12.040

您应该只使用该`viewWillAppear`方法。

# parsing - 名词短语的寻头规则

> ID：10297345
> 
> 赞同：1
> 
> 时间：2012-04-24T11:55:56.047
> 
> 标签：parsing, nlp

Penn Treebank 格式不注释名词短语的内部结构，例如

```
(NP (JJ crude) (NN oil) (NNS prices)) 
```

或者

```
(NP
    (NP (DT the) (JJ big) (JJ blue) (NN house))
    (SBAR
      (WHNP (WDT that))
      (S
        (VP (VBD was)
          (VP (VBN built)
            (PP (IN near)
              (NP (DT the) (NN river))))))) 
```

我想提取人头（价格和房子）。你知道有什么工具可以做到这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T13:29:40.240

[Michael Collins 的论文](http://www.cs.columbia.edu/~mcollins/papers/thesis.ps)（附录 A）包括 Penn Treebank 的头部发现规则，这些规则运行良好且不难实施。但是，它们远非完美，因为这不是最简单的任务。

David Vadas 和 James Curran 在 Penn Treebank 中关于 NP 结构的工作也可能是相关的：

*   带有附加 NP 注释[的 David Vadas 的网站：](http://www.cs.usyd.edu.au/~dvadas1/?Noun_Phrases)
*   文件：
    *   [将名词短语结构添加到 Penn Treebank](http://www.cs.usyd.edu.au/~dvadas1/papers/vadas07_np_data_penn_treebank.pdf)
    *   [在 Penn Treebank 中解析名词短语](http://www.mitpressjournals.org/doi/pdf/10.1162/COLI_a_00076)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T03:42:26.957

正如 aab 所建议的那样，简单的确定性寻头规则可以很好地工作（另请参阅 Magerman 或 Charniak 寻头规则以了解类似方法）。

您还可以查看从组成树中提取依赖结构。斯坦福工具集在这方面做得很好：参见[http://nlp.stanford.edu/software/stanford-dependencies.shtml](http://nlp.stanford.edu/software/stanford-dependencies.shtml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T08:12:18.730

也可以在 Dan Bikel 的论文中找到英文的head find rules（如果需要源代码，可以在他的解析器软件主页找到）

# php - 根据所选月份动态显示 SQL COUNT

> ID：10297346
> 
> 赞同：0
> 
> 时间：2012-04-24T11:56:03.237
> 
> 标签：php, mysql, sql

当用户指定从 1 月到 12 月的月份时，我想在 PHP/MYSQL 应用程序中显示数据库中所有糖尿病患者的总数。此规范是通过下拉列表完成的，因此他们只能指定一个月。

```
SELECT COUNT( * )  
FROM (
  SELECT diabetes 
  FROM  registration 
  WHERE diabetes = "yes") 
```

我应该在此查询中添加什么以使其成为动态的，以便根据用户选择检索每个月所有糖尿病患者的计数？我在 PHP 方面不是很好，所以如果我可以用 SQL 完全做到这一点，那对我来说会好得多。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:57:07.983

我有一段时间没有使用 MySQL，但应该可以使用以下方法：

```
SELECT  COUNT(*)
FROM    registration
WHERE   diabetes = "yes"
AND     YEAR(dateColumn) = @Year
AND     MONTH(dateColumn) = @Month 
```

where`@Year`和`@Month`是您的用户选择的值，并且`dateColumn`是`registration`表中日期列的名称。

# objective-c - UIScrollView 错误

> ID：10297351
> 
> 赞同：0
> 
> 时间：2012-04-24T11:56:25.733
> 
> 标签：objective-c, ios, uiscrollview, zooming

请原谅糟糕的代码 atm，只是想在让它看起来不错之前让它工作。所以我试图让 UIScrollView 工作。如果我删除所有滚动视图的内容，我会得到一个布局精美的页面，其中包含 64 个按钮，页面两侧各有 32 个按钮。这些按钮几乎是微型的；所以我想实现缩放以便能够点击它们。

Zoom 目前有意想不到的结果。当页面开始时，它是空白的。缩放意外地在页面的右侧显示了图表的一些左侧，当我尝试向它滚动时它会反弹。但是当我放大更多时，它允许我更多地向按钮中间滚动。当我滚动/缩放时，总是给我带来困难/窃听。所以显然无法使用。

我的viewDidLoad：

```
[super viewDidLoad];
UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
scroll.minimumZoomScale = 0.5;
scroll.maximumZoomScale = 3.0;
scroll.delegate = self;
    CGFloat yOrigin = self.view.frame.size.width;
    UIView *awesomeView = [[UIView alloc] initWithFrame:CGRectMake(yOrigin, 0, self.view.frame.size.width, self.view.frame.size.height)];

// iterate over values in the staff array
int heightBetweenBrackets = 0;
int widthBetweenBrackets = 0;
int heightFromTop = 45;

for(int i = 0; i < 64; i++)
{
    if(i == 32)
    {
        heightBetweenBrackets = 0;
    }
    UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    myButton.frame = CGRectMake(
                                0 + i/32*438,
                                heightFromTop + i%32*3+ heightBetweenBrackets, 
                                35, 6);
    [myButton setTitle:[NSString stringWithFormat:@"%d",i] forState:UIControlStateNormal];
    myButton.titleLabel.adjustsFontSizeToFitWidth = YES;
    [myButton.titleLabel setFont:[UIFont fontWithName:@"Arial" size:7]];
    myButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;
    //   [myButton addTarget:self action:@selector(chooseWinner:) forControlEvents:UIControlEventTouchUpInside];
    [awesomeView addSubview:myButton];
    heightBetweenBrackets += (i%2  -1 * -1) * 3;
}

[scroll addSubview:awesomeView];
scroll.contentSize = CGSizeMake(self.view.frame.size.width, self.view.frame.size.height);
[self.view addSubview:scroll]; 
```

和：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return self.view;
} 
```

如果错误很愚蠢，我深表歉意我只是在学习 IOS =] 感谢您的时间

编辑：想通了。

对于未来的任何人：我移植了一个分页滚动器，但没有意识到我保留了 CGFloat yOrigin = self.view.frame.size.width; - 这当然是直接在任何可见空间的右侧开始视图。因此，我能够以一种错误的方式放大并看到它的左侧，尽管它开始时是空白的。只需将其更改为 0 即可解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:24:15.253

对于未来的任何人：我移植了一个分页滚动器，但没有意识到我保留了 CGFloat yOrigin = self.view.frame.size.width; - 这当然是直接在任何可见空间的右侧开始视图。因此，我能够以一种错误的方式放大并看到它的左侧，尽管它开始时是空白的。只需将其更改为 0 即可解决我的问题。

# wcf - 从 javascript 访问由 ACS 保护的 WCF 服务

> ID：10297354
> 
> 赞同：0
> 
> 时间：2012-04-24T11:56:36.213
> 
> 标签：wcf, appcelerator-mobile, acs

我希望创建一个位于我们现有代码之上的 WCF（可能是 WebApi）Web 服务。最终，该服务将被外部客户使用，但我们将开始在我们自己的移动应用程序中使用它。

由于一些客户希望使用 Gmail 和 ADFS 身份验证，因此使用 Azure ACS 似乎很有意义（这是我们的 Web 服务托管的地方）。但是，我们暂时不需要多个提供程序，我们将从使用自定义 STS 开始，该 STS 根据我们现有的身份验证逻辑对用户进行身份验证。

我们已经有了使用 MVC Web 应用程序作为客户端的上述工作的粗略原型。

我的问题是如何将其与移动应用程序集成？看起来移动应用程序将使用 AppCelerator 编写，这意味着我需要使用 javascript 进行身份验证。我们只希望用户对我们的自定义 STS 进行身份验证，所以我需要使用 Active Authentication 吗？IE

*   要求用户输入用户名和密码
*   直接使用自定义 STS 进行身份验证并检索令牌
*   将 STS 令牌传递给 ACS 并检索 ACS 令牌
*   将 ACS 令牌传递给每个请求的 wcf 服务。

我想我的问题是：我是否在正确的轨道上，如果是这样，我将如何在 javascript 中实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:13:56.857

我认为可以通过 Https 请求发出 SAML。作为起点，我建议查看 Dominick Baier 的 Thinktecture IdentityServer 资源。这将有助于理解不同的策略以及如何使用 em（Github 上也有一些 WebApi 的好东西）：http: [//identityserver.codeplex.com/](http://identityserver.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T06:47:43.307

如果您想支持移动设备，建议在您的 STS 中提供基于 Web 的登录界面。在大多数情况下，移动设备会在 Web 浏览器中导航到您的 STS 登录页面。在您的 STS 对用户进行身份验证后，它会向 ACS 发送声明。ACS 反过来使用 JavaScript 通知来通知主机应用程序。有关在 Windows Phone 中使用 ACS 的教程，您可以参考[http://msdn.microsoft.com/en-us/WAZPlatformTrainingCourse_ACSAndWindowsPhone7 。](http://msdn.microsoft.com/en-us/WAZPlatformTrainingCourse_ACSAndWindowsPhone7)类似的过程可以用于其他移动设备。希望这可以帮助。

# html - 点击 HTML 页面后按钮消失

> ID：10297355
> 
> 赞同：0
> 
> 时间：2012-04-24T11:56:37.853
> 
> 标签：html

我有一个页面，当我单击按钮时它消失了我在锚标记中使用它当我单击按钮时它消失了

```
 <!DOCTYPE HTML>
  <html>
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Untitled Document</title>
  <link type="text/css" href="splashcss.css" rel="stylesheet" />
  </head>

 <body>
 <div id="container">
 <div id="image"><a href="overview.html">
  <img src="image/startbutton.png"
    onmouseover="this.src='image/Startbuttonmouse.png'"
    onmouseout="this.src='image/startbutton.png'"/>  

 </a>
 </div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:05:15.963

单击图像时，它会落在`overview.html`页面上。

你可以看到**[LIVE DEMO](http://jsfiddle.net/GQQEE/)**

# magento - Magento 1.5.0.1 可配置产品属性未显示在前端

> ID：10297359
> 
> 赞同：2
> 
> 时间：2012-04-24T11:56:55.890
> 
> 标签：magento, product, configurable

我们在 1.5.0.1 社区版上有一个 Magento 商店，它使用具有属性集的可配置产品，允许客户为特定商品（例如衬衫）选择他们喜欢的尺寸和颜色。

每个服装系列都有自己的属性集，用于创建产品，产品的每个排列都有简单的产品，用于库存目的。

我们比较了所有产品的设置，看不出它们之间有任何差异，但一个产品系列**在前端没有显示属性下拉菜单和添加到购物车按钮**，尽管出现在前端很好除此之外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:43:43.703

通常，当“添加到购物车”按钮未显示时，是因为您的产品没有设置库存。请记住，可配置产品需要设置为有库存，并且相关的简单产品必须至少有一个非零库存的项目并设置为“有库存”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:03:17.920

不知道大家有没有找到解决办法，但是找了一整天，我发现是什么导致前端缺少属性...删除和阅读了十几次简单的产品后，做笔记的方式我很确定我正确地添加了简单和可配置的产品，所以问题必须出在其他地方。随便看看 FireBug 中的控制台就发现了prototype.js 中的冲突……这很奇怪，因为 Magento 附带了它。而且我肯定没有改变任何东西！

您是否曾在某个时候**将 jQuery 添加到您的 Magento 安装中？**如果是这样，你必须添加'jQuery.noComflict;' 到你的 jQuery 文件的末尾，关键是，在prototype.js 之前包含 jQuery 文件：prototype.js 由 Magento 加载到 default/layout/page.xml 开头，所以你必须添加这个原型之前的行 jquery/jquery-1.2.6.noConflict.min.js

如果您不这样做，则显示下拉项目但没有可选择的条目，那是因为 js/varien/product.js 依赖于prototype.js 来工作。没有它，您的列表将不会被填充！

希望它可以帮助任何寻找这个神秘问题的人......（这里也描述了这个问题：[Weird Chrome原型/jQuery冲突](https://stackoverflow.com/questions/833883/weird-chrome-prototype-jquery-conflict)）

# hibernate - 使用 yml 表示法定义的对象的重复项

> ID：10297362
> 
> 赞同：2
> 
> 时间：2012-04-24T11:57:09.167
> 
> 标签：hibernate, playframework, yaml, playframework-1.x

我是 Play 框架和 yml 表示法的新手，只知道 Hibernate 的基础知识。我正在尝试使用 .yml 文件设置一些测试数据。我尝试定义几个 Question 对象和一个 ActiveCompetition 对象，它们引用同一个 Competition 对象。我的 .yml 文件看起来像这样（我已经删除了我认为不相关的内容）：

```
ActiveCompetition(1): &myactivecompetition
    activeCompetition: &mycompetition
        name: Name of the competition

Question(11):
    title: Title 1
    competition: *mycompetition

Question(12):
    title: Title 2
    competition: *mycompetition

Question(13):
    title: Title 3
    competition: *mycompetition 
```

我工作，但似乎**Hibernate 保存了 *mycompetition 4 次**。

在 java bean 中，javax.persistence 的属性设置如下：

```
@Entity
@Transactional
public class ActiveCompetition extends Model {

   @Required
   @OneToOne(cascade= CascadeType.ALL)
   private Competition activeCompetition;
}

@Entity
@Transactional
public class Question extends Model {

    ...

    @Required
    @OneToOne(cascade= CascadeType.ALL)
    private Competition competition;
} 
```

如何让 Hibernate 理解 *mycompetition 应该只在数据库中存储一次？我应该在 .yml 文件上写数据库 ID 吗？如果是这样，我该怎么做？我已经尝试在 activeCompetition 下添加例如“id：99”，但它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:49:07.627

有两个可能的问题：

第一个是您要声明关系 OneToOne，然后在您的 YAML 文件中创建一个 ManyToOne 关系。OneToOne 表示每个 ActiveCompetition 最多有一个问题，每个问题最多与一个 ActiveCompetition 相关。

你想要的是一个多对一关系，其中 ActiveCompetition 有很多问题。您应该更新您的 Java 代码。

第二个是您将 ActiveCompetition 定义为：

```
ActiveCompetition(1) 
```

在 YAML、AFAIK 中，您通过实体提供的引用引用文件中的其他实体（或者我就是这样做的）。在上面的声明中，引用是`1`() 之间的数字。

因此，您应该将文件更改为：

```
Question(13):
    title: Title 3
    competition: 1 
```

# html - IE6/7/8 中的 innerHTML 问题？

> ID：10297363
> 
> 赞同：2
> 
> 时间：2012-04-24T11:57:09.473
> 
> 标签：html, internet-explorer-8, innerhtml

我的代码是：

```
<body>
    <p id="tit"></p>
    <script type="text/javascript">
        try {
            document.getElementById('tit').innerHTML = "<div>test</div>";
        }
        catch(e) {
            alert(e)
        }
    </script>
</body> 
```

`alert [object Error]`在 IE6/7/8 中，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:30:27.493

这（是）设计使然。

一个元素`<p>`应该只包含内联元素，来自[HTML 规范](http://www.webmasterworld.com/r.cgi?f=21&d=3560080&url=http://www.w3.org/TR/html401/struct/text.html#edef-P)：

```
<!ELEMENT P - O (%inline;)* -- paragraph --> 
```

可能不太清楚，但这意味着`<p>`不能包含分组元素。现在在`<div>`规范中我们可以阅读：

> DIV 和 SPAN 元素与 id 和 class 属性一起，提供了一种向文档添加结构的通用机制。这些元素将内容定义为内联 (SPAN) 或块级 (DIV)，但不会对内容强加其他表现形式。

该`<p>`元素不是唯一一个只能包含内联元素的元素，例如标题（`<h1>`, `<h2>`,...）具有相同的行为。

许多浏览器允许通过属性插入**格式错误的 HTML ，因此这种***奇怪*的行为似乎只影响 IE。较新的版本（此时为 IE 9）支持通过脚本插入错误的 HTML 代码，因此您的 HTML 片段不会导致错误（即使它仍然不是有效的 HTML）。`innerHTML`

 *我的建议是仅插入有效的 HTML：
您可以将容器元素从更改`<p>`为- 或`<div>`
*-* 您可以将插入的元素从更改`<div>`为`<span>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:00:12.890

`e`是一个对象。

```
alert( e.message); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:05:58.617

它似乎是 p 元素，如果我使用 div 它对我有用：

```
<div id="tit"></div>
<script type="text/javascript">
    try {
        document.getElementById('tit').innerHTML = "<div>test</div>";
    }
    catch (e) {
        alert(e.message);
    }
</script> 
```

相反，它没有 p 标签。您也可以使用 jQuery 及其 .append()，因为它运行良好。*

# regex - vba 正则表达式：点匹配换行符

> ID：10297365
> 
> 赞同：6
> 
> 时间：2012-04-24T11:57:12.737
> 
> 标签：regex, vba

我想匹配（在这个片段中）所有内容，但不包括我认为的换行符。会做。有人可以阐明我所缺少的东西吗？

```
Public Sub regexp()

Dim oRegExp As regexp
Dim oMatches As MatchCollection
Dim oMatch As Match
Dim sString As String

sString = _
    "one" & vbNewLine & _
    "two" & vbNewLine

Set oRegExp = New regexp
With oRegExp
    .Global = True
    .Pattern = ".+"
    Set oMatches = .Execute(sString)
    For Each oMatch In oMatches
        Debug.Print "*" & oMatch.Value & "*"
    Next oMatch
End With

End Sub 
```

输出是

```
*one
*
*two
* 
```

预期产出

```
*one*
*two* 
```

如何避免输出中的换行符？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T12:04:18.413

如果使用`[^\n]`代替`.`，它将匹配*除*换行符以外的任何字符。

# extjs - ExtJS 4 上传文件（使用 CodeIgniter 作为后端）

> ID：10297367
> 
> 赞同：0
> 
> 时间：2012-04-24T11:57:17.153
> 
> 标签：extjs, codeigniter-2

我有来自 ExtJS 文档的标准上传文件表单，我`form.Panel`使用 with`xtype:filefield`和`open`and`Submit`按钮创建。默认情况下，当我单击打开时，浏览器窗口会打开，我可以选择一个文件，然后提交保存。但是现在我要求绕过这个，只在工具栏上直接留下一个带有名称的按钮`Open`，然后单击它直接打开浏览器窗口。我不知道这是否可能以及如何做到这一点。

谢谢

勒龙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:37:19.987

我是否正确理解这一点？您需要在页面上只有一个按钮 - 用户单击按钮，获取文件打开对话框，当他在该对话框表单上按“确定”时提交？

看看第二个示例“仅限按钮” [http://dev.sencha.com/deploy/ext-4.0.0/examples/form/file-upload.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/form/file-upload.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:28:53.330

您将要收听文件字段。[更改](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.File-event-change)事件，并在触发时提交您的表单。例子：

[http://jsfiddle.net/62gmq/3/](http://jsfiddle.net/62gmq/3/)

# android - 更改选项卡时如何隐藏软键盘？

> ID：10297376
> 
> 赞同：6
> 
> 时间：2012-04-24T11:57:58.793
> 
> 标签：android, android-listview

*编辑：似乎我没有说清楚。我需要的是一种在我替换我所在的片段时隐藏软键盘的方法。我该怎么做呢？*

让我保持简单。我在 Tab Fragment 1.2 中有一个 EditText 框，它在按下时显然会打开软键盘。更改选项卡时如何隐藏它？我在我的 onTabSelected() 中尝试了以下似乎没有做任何事情

```
getWindow().setSoftInputMode(
                  WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

我现在什么都试过了。到目前为止，我找到的建议解决方案都没有以任何方式帮助我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-28T10:12:40.220

您可以以编程方式使用，捕获设备屏幕上活动活动的视图。

```
public final void onTabReselected(Tab tab, FragmentTransaction fragmentTransaction) {
        View focus = getCurrentFocus();
        if (focus != null) {
            hiddenKeyboard(focus);
        }
    }
public final void onTabselected(Tab tab, FragmentTransaction fragmentTransaction) {
        View focus = getCurrentFocus();
        if (focus != null) {
            hiddenKeyboard(focus);
        }
    }
public final void onTabUnselected(Tab tab, FragmentTransaction fragmentTransaction) {
        View focus = getCurrentFocus();
        if (focus != null) {
            hiddenKeyboard(focus);
        }
    }

private void hiddenKeyboard(View v) {
        InputMethodManager keyboard = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        keyboard.hideSoftInputFromWindow(v.getWindowToken(), 0);
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T19:12:37.920

`FragmentTransaction.replace()`我遇到了同样的问题，并在使用该方法更改选项卡之前将以下代码放置在我的选项卡片段中。每个片段中的`onCreate`和`onCreateView`方法在初始选项卡选择后不会触发，因此可以在进入特定片段的类之前隐藏键盘。使用`mTabHost.getApplicationWindowToken()`而不是`editText.getWindowToken()`一个主要的帮助。感谢发现它的人。对不起，我失去了链接。

```
InputMethodManager im = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);             
im.hideSoftInputFromWindow(mTabHost.getApplicationWindowToken(), 0);

.......
fm = getFragmentManager();
....

fm.beginTransaction()
    .replace(placeholder, new someFragment(), tabId)
    .commit(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T12:03:16.273

这是您启用软键盘的方式

```
inputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
mgr.showSoftInput(editText, InputMethodManager.SHOW_IMPLICIT); 
```

这就是您在切换选项卡时关闭它的方式。

```
InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
mgr.hideSoftInputFromWindow(editText.getWindowToken(), 0); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-16T06:52:47.033

在 mainActivity 中将 OnPageChangeListener 设置为 viewpager 将片段添加到 viewPager 的位置

```
 viewPager.setOnPageChangeListener(myOnPageChangeListener);

   ViewPager.OnPageChangeListener myOnPageChangeListener =
            new ViewPager.OnPageChangeListener() {

            @Override
            public void onPageScrollStateChanged(int state) {
                //Called when the scroll state changes.

            }

            @Override
            public void onPageScrolled(int position,
                                       float positionOffset, int positionOffsetPixels) {
                //This method will be invoked when the current page is scrolled,
                //either as part of a programmatically initiated smooth scroll
                //or a user initiated touch scroll.

                hideKeyboard();
            }

            @Override
            public void onPageSelected(int position) {
                //This method will be invoked when a new page becomes selected.
                //hide keyboard when any fragment of this class has been detached
                hideKeyboard();
            }
        };

public  void hideKeyboard() {
    InputMethodManager inputManager = (InputMethodManager)getApplicationContext().getSystemService(Context.INPUT_METHOD_SERVICE);

    // check if no view has focus:
    View v = getCurrentFocus();
    if (v == null)
        return;

    inputManager.hideSoftInputFromWindow(v.getWindowToken(), 0);
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-24T12:14:32.263

在您的 XML 文件中，只需`android:focusable="true"`从任何地方删除即可。

另一件事是，如果您正在使用`<requestfocus></requestfocus>`then 也删除此行。

试试吧，我认为它应该工作。

# javascript - 难以在由多个 xml 文件提供的列表视图中加载多个图像

> ID：10297377
> 
> 赞同：0
> 
> 时间：2012-04-24T11:58:03.253
> 
> 标签：javascript, html, jquery, jquery-mobile

我正在为 Android 开发一个 html 应用程序，我正在尝试在列表视图中加载图像。特定于列表项的数据由多个 xml 文件提供。我正在使用 ajax 加载 xml 文件并填充列表项。我在这里面临的问题是有 164 个列表项。因此，要加载 164 个图像和 10 个 xml 文件。我的加载器函数在两次迭代后耗尽。它确实读取了 xml 文件，但它无法动态创建列表项并在两次迭代后用图像填充它们。我相信这是由于堆栈限制。我想不出替代解决方案。如果有人可以提出一个将受到高度赞赏的替代解决方案。下面是我的加载器功能。这是一个递归函数：

```
function loadChannels() {

        $.ajax({
            type: "GET",
            url: curURL,
            dataType: "xml",
            error: function(){ console.log('Error Loading Channel XML'); },
            success: function(nXml) {
                var noOfItems = parseInt($($(nXml).find('total_items')[0]).text(), 10);
                var startIdx = parseInt($($(nXml).find('item_startidx')[0]).text(), 10);

                var allItems = $(nXml).find('item');

                $(allItems).each(function() {
                    var obj = $("<li><span id='cont-thumb'></span><span id='cont-name'></span></li>");
                    $("#content-scroller ul").append($(obj));

                    var imgURL = $($(this).find('item_image')[0]).text();
                    var contThumb = $(obj).children()[0];
                    $(contThumb).css("background-image", 'url('+imgURL+')');
                    var name = $($(this).find('name')[0]).text();
                    var contName = $(obj).children()[1];
                    $(contName).text(name).css('text-align', 'center');
                    var url = $($(this).find('link')[0]).text();
                    $(obj).data('item_link', url);
                    $(obj).bind('click', onJPContSelected);                
                });

                if(startIdx+allItems.length < noOfItems){

                    var newIdx = new Number(startIdx+allItems.length);
                    var tokens = curURL.split("/");
                    tokens[tokens.length-2] = newIdx.toString(10);
                    curURL = "http:/";
                    for(var i=2; i<tokens.length; i++)
                        curURL = curURL + "/" + tokens[i];

                    loadChannels();
                }
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:07:50.883

尝试使用外循环删除递归 - 类似这样：

```
function loadChannels(){
    var stopFlag = false;
    // request the pages one after another till done
    while(!stopFlag) 
    {
        $.ajax({
            type: "GET",
            url: curURL,
            dataType: "xml",
            error: function(){ 
                console.log('Error Loading Channel XML'); 
                errorFlaf = true;
            },
            success: function(nXml) {
                var noOfItems = parseInt($($(nXml).find('total_items')[0]).text(), 10);
                var startIdx = parseInt($($(nXml).find('item_startidx')[0]).text(), 10);
                var allItems = $(nXml).find('item');
                $(allItems).each(function() {
                    var obj = $("<li><span id='cont-thumb'></span><span id='cont-name'></span></li>");
                    $("#content-scroller ul").append($(obj));

                    var imgURL = $($(this).find('item_image')[0]).text();
                    var contThumb = $(obj).children()[0];
                    $(contThumb).css("background-image", 'url('+imgURL+')');
                    var name = $($(this).find('name')[0]).text();
                    var contName = $(obj).children()[1];
                    $(contName).text(name).css('text-align', 'center');
                    var url = $($(this).find('link')[0]).text();
                    $(obj).data('item_link', url);
                    $(obj).bind('click', onJPContSelected);                
                });

                if(startIdx+allItems.length < noOfItems){

                    var newIdx = new Number(startIdx+allItems.length);
                    var tokens = curURL.split("/");
                    tokens[tokens.length-2] = newIdx.toString(10);
                    curURL = "http:/";
                    for(var i=2; i<tokens.length; i++)
                        curURL = curURL + "/" + tokens[i];

                    // lets disable the recursion
                    // loadChannels();
                }
                else {
                    stopFlag = true;
                }
            }
        });        
    }
} 
```

# javascript - JavaScript 字符串替换不起作用

> ID：10297380
> 
> 赞同：3
> 
> 时间：2012-04-24T11:58:12.580
> 
> 标签：javascript

> **可能重复：**
> [javascript替换功能不起作用](https://stackoverflow.com/questions/6429321/javascript-replace-function-not-working)

这是我的 JS 代码：

```
var imgTitle = "fizz";
var imgTitle2 = "fizz";
var imgInfo = "buzz";
var imgSrc = "foo";
var liHTML = "<li class='imgThumbLi ui-draggable' title='IMG_TITLE'><img class='image' src='IMG_SRC' title='IMG_TITLE'/><div class='imageInfo'><p class='detailTitle'>IMG_INFO</p></div></li>";

// Search and replace all dummy values.
liHTML.replace("IMG_TITLE", imgTitle);
liHTML.replace("IMG_TITLE2", imgTitle2);
liHTML.replace("IMG_SRC", imgSrc);
liHTML.replace("IMG_INFO", imgInfo);

alert(liHTML); 
```

得到这个打印出来：

```
 <li class='imgThumbLi ui-draggable' title='IMG_TITLE'><img class='image' src='IMG_SRC' title='IMG_TITLE'/><div class='imageInfo'><p class='detailTitle'>IMG_INFO</p></div></li> 
```

（与字符串替换调用之前相同）。在 Firebug 中，我收到一条错误消息：

> c.replace 不是函数

每当执行上面的代码片段时都会收到此错误。**为什么这个字符串替换不起作用？！？！**提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T12:02:08.223

尝试

```
liHTML = liHTML.replace("IMG_TITLE", imgTitle); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:02:21.470

您需要在每一行上设置新值。

```
liHTML = liHTML.replace("IMG_SRC", imgSrc); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T12:03:18.753

您没有对替换的值做任何事情。尝试：

```
var imgTitle = "fizz";
var imgTitle2 = "fizz";
var imgInfo = "buzz";
var imgSrc = "foo";
var liHTML = "<li class='imgThumbLi ui-draggable' title='IMG_TITLE'><img class='image' src='IMG_SRC' title='IMG_TITLE'/><div class='imageInfo'><p class='detailTitle'>IMG_INFO</p></div></li>";

// Search and replace all dummy values.
liHTML = liHTML.replace("IMG_TITLE", imgTitle);
liHTML = liHTML.replace("IMG_TITLE2", imgTitle2);
liHTML = liHTML.replace("IMG_SRC", imgSrc);
liHTML = liHTML.replace("IMG_INFO", imgInfo);

alert(liHTML); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T12:05:03.693

您必须将结果保存在变量 liHTML 中：

```
liHTML = liHTML.replace("IMG_TITLE", imgTitle);
liHTML = liHTML.replace("IMG_TITLE2", imgTitle2);
liHTML = liHTML.replace("IMG_SRC", imgSrc);
liHTML = liHTML.replace("IMG_INFO", imgInfo); 
```

// EDIT Ups 有点慢 :D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T12:06:02.307

你有几个问题。首先你没有设置值。替换只是产生新的价值。第二个问题是，在您的情况下，您可能应该使用 replace-all 而不是 replace。

Replace 仅替换第一个实例。

```
// Scope should have one var. Combine those vars.
var imgTitle = "fizz",
    imgTitle2 = "fizz",
    imgInfo = "buzz",
    imgSrc = "foo",
    liHTML = "<li class='imgThumbLi ui-draggable' title='IMG_TITLE'><img class='image' src='IMG_SRC' title='IMG_TITLE'/><div class='imageInfo'><p class='detailTitle'>IMG_INFO</p></div></li>";

// Search and replace all dummy values.
liHTML = liHTML.replace(new RegExp("IMG_TITLE", 'g'), imgTitle);
liHTML = liHTML.replace(new RegExp("IMG_TITLE2", 'g'), imgTitle2);
liHTML = liHTML.replace(new RegExp("IMG_SRC", 'g'), imgSrc);
liHTML = liHTML.replace(new RegExp("IMG_INFO", 'g'), imgInfo);

alert(liHTML); 
```

# sql - C# 合并 2 个报告

> ID：10297381
> 
> 赞同：-1
> 
> 时间：2012-04-24T11:58:15.513
> 
> 标签：sql, reporting-services, reporting

我有 2 个查询，带有参数。我可以让他们单独报告，但是我想要一份报告中的两个表格。问题是，使用参数的子报表似乎有问题......我的 2 个查询是：

```
SELECT        A.Store_Number, A.GC_Sold, B.Total_Cars

FROM            (SELECT        Store_Number, COUNT_BIG(Quantity_Sold) AS GC_Sold

FROM            Invoice_Detail_Tb

WHERE        (Invoice_Date BETWEEN CONVERT(DATETIME, @startdate, 102) AND CONVERT(DATETIME, @enddate, 102)) AND (JLI_Category_Code = 'gc') AND (Invoice_Detail_Code LIKE 'jlgc%') AND (Invoice_Detail_Type = 'Item')

GROUP BY Store_Number) AS A INNER JOIN

(SELECT        Store_Number, SUM(Vehicle_Count) AS Total_Cars

FROM            Daily_Sales_Tb

WHERE        (Operations_Day BETWEEN CONVERT(DATETIME, @startdate, 102) AND CONVERT(DATETIME, @enddate, 102))

GROUP BY Store_Number) AS B ON A.Store_Number = B.Store_Number 
```

此输出为我提供了日期范围的数据，如下所示：

```
Store    gc sold      total cars
1        5             8
2        6             9
3        7             10 
```

我的第二个查询是：

```
SELECT        A.Store_Number, A.GC_Sold, B.Total_Cars

FROM            (SELECT        Store_Number, COUNT_BIG(Quantity_Sold) AS GC_Sold

FROM            Invoice_Detail_Tb

WHERE        (Invoice_Date = CONVERT(DATETIME, @enddate, 102)) AND (JLI_Category_Code = 'gc') AND (Invoice_Detail_Code LIKE 'jlgc%') AND (Invoice_Detail_Type = 'Item')

GROUP BY Store_Number) AS A INNER JOIN

(SELECT        Store_Number, SUM(Vehicle_Count) AS Total_Cars

FROM            Daily_Sales_Tb

WHERE        (Operations_Day = CONVERT(DATETIME, @enddate, 102))

GROUP BY Store_Number) AS B ON A.Store_Number = B.Store_Number 
```

此输出仅返回 enddate 的数据。并且看起来与上表相同。

用户在 Windows 窗体上选择开始日期和结束日期并按下“开始”。然后将参数传递给报告查看器......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:05:12.327

如果这是一个 SQL Server Reporting Services 报表，那么您可以添加多个数据集。在您的情况下，第一个将使用第一个查询，第二个数据集将使用第二个查询，两个数据集使用相同的共享数据源（=> 数据库连接）。

然后您可以将两个表添加到报表中 - 一个引用第一个数据集作为其数据源，另一个引用第二个数据集。

同样可以为本地报告建模。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:56:41.613

您需要使用第二个查询创建另一个表适配器。设置下一个表格适配器后，您需要将表格添加到报表查看器。添加表格后，将字段从新表格适配器拖到表格中。完成此操作后，转到您的报表查看器控件，为您的新表分配数据集的绑定源，然后

# .net - 如何从 Ironpython 代码而不是 XAML 添加 WPF tabitem？

> ID：10297382
> 
> 赞同：1
> 
> 时间：2012-04-24T11:58:16.983
> 
> 标签：.net, wpf, xaml, clone, ironpython

我有一个选项卡控件：

```
<TabControl
                x:Name="ContactTabs"
                HorizontalAlignment="Left"
                Grid.Row="0"
                Grid.Column="0"
                Width="1090"
                Margin="0,0,0,23.75">
                <TabControl.Background>
                    <SolidColorBrush
                        Color="Green"
                        Opacity="0.30" />
                </TabControl.Background> 
```

目前我使用代码在 XAML 中创建了一个 tabitem，但我想从 XAML 动态添加选项卡，我使用的代码是：

```
<TabItem
                Name="contactTemplate"
                Header="New Contact"> 
```

如何使用 WPF 和 python 代码而不是 XAML 创建选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:51:06.967

我发现我可以通过像这样创建一个新的 tabitem 对象来做我需要的事情。

```
ContactTabClone = TabItem()
ContactTabClone.Name = "ContactClone"
ContactTabClone.Header = "ContactClone" 
window.ContactTabs.Items.Add(ContactTabClone) 
```

# c# - 更新包装对象的最佳方法

> ID：10297385
> 
> 赞同：0
> 
> 时间：2012-04-24T11:58:23.537
> 
> 标签：c#, java, vb.net, oop, design-patterns

我正在使用 VB.NET，但这个问题适用于任何 OO 语言 - Java、C# 等。我已经用 Java 和 C# 标记了这个问题，但如果认为不合适，将删除。

我有一个实体类`ClassAAA`，其中包含`ClassBBB`对其属性之一的引用：

```
Public Class ClassAAA

    Private Property _blah As ClassBBB = Nothing
    Private Property _somethingElse As String
    Private Property _anotherthing As String

    ' Make it private so cannot instantiate class without supplying ClassBBB '
    Private Sub New()
    End Sub

    Public Sub New(ByRef value As ClassBBB)
        _blah = value
    End Sub

    Public Property ImportantAttribute As String
        Get
            Return _blah.Imp
        End Get
        Set(ByVal value As String)
            _blah.Imp = value
        End Set
     End Property

      ' other stuff '
End Class 
```

我不想暴露`ClassBBB`在实体类之外。这是我的问题：我想做一个更新，并且我有一个我想使用`ClassAAA`的静态/共享更新方法。`ClassBBB`最好的方法是什么？

```
Public Shared Sub UpdateClassAAA(byRef value as ClassAAA)

   ' XXX Cannot do this because ClassBBB reference is private XXX '
    ClassBBBDAO.update(value._blah)

    ' Do other updates on other ClassAAA attributes '

End Sub 
```

我可以`ClassBBB`公开引用（或提供公共 getter 方法），但这会暴露`ClassAAA`.

我想做的是进行`ClassBBB`引用`Friend`，使其仅在程序集中可见，即数据层，对客户端项目不可见。但这仍然感觉像是我在揭露班级的内部运作。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:15:10.920

我认为，简单的想法是在*内部* `ClassAAA`创建一个公共更新方法，并让其他类按需调用它。这样您就不会暴露 的内部细节`ClassAAA`，但可以让其他人激活所需的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T12:18:44.243

如果一个`ClassAAA`隐藏和封装`ClassBBB`那么它`ClassAAA`应该有一个公共方法来**内部**更新`ClassBBB`。[外观](http://en.wikipedia.org/wiki/Facade_pattern)设计模式是一个很好的例子，它以一种优雅而优雅的方式说明了您的问题的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T12:14:33.493

我认为您只需为 ClassBBB 成员创建一个 getter 或将更新方法设为类方法而不是静态的

# mod-rewrite - 使用 htaccess 创建 SEO 友好的 URL

> ID：10297386
> 
> 赞同：0
> 
> 时间：2012-04-24T11:58:26.947
> 
> 标签：mod-rewrite

当我更改链接时，它会显示一个错误页面。也许我的网站有问题你怎么看？我的网站中有网址：www.mywebsite.com/picture.php?1，我想将其更改为：www.mywebsite.com/picture/1

这是我的 .htaccess

```
RewriteEngine on
rewritecond %{http_host} ^website.com [nc]
rewriterule ^(.*)$ http://www.mywebsite.com/$1 [r=301,nc]

RewriteRule ^contact\/?$ contact.php [L]
RewriteRule ^terms\/?$ terms.php [L]

**RewriteRule ^picture/(.*)/$ picture.php?$1 [L]** 
```

请帮忙，我不知道是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:02:37.337

Try adding

```
<base href="www.mywebsite.com" /> 
```

At the top of your page, this might work.

EDIT:

Try using this rewrite rule

```
RewriteRule picture/(.*)/$ /picture.php?$1 [L, NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:21:27.990

假设您的 htaccess 的第一部分有效，请将最后一行替换为以下内容：

```
 RewriteRule ^picture/(.*)$ /picture.php?$1 [NC] 
```

# php - 从 HTML 中的 URL 过滤跟踪参数的正则表达式

> ID：10297389
> 
> 赞同：1
> 
> 时间：2012-04-24T11:58:41.427
> 
> 标签：php, regex, string, url

我有包含要删除的跟踪字符串的字符串。正则表达式似乎是最好的解决方案，但我想不出一个可行的正则表达式。

示例网址：

*   [http://example.com?tracking=foo](http://example.com?tracking=foo)
*   [http://example.com/bar.html?tracking=foo](http://example.com/bar.html?tracking=foo)
*   [http://example.com?tracking=foo¶m=baz](http://example.com?tracking=foo&param=baz)
*   [http://example.com/bar.php?param=baz&tracking=foo](http://example.com/bar.php?param=baz&tracking=foo)

`tracking=foo`应该删除`foo`几乎任何东西，除了`&`，不应该触摸没有跟踪的 URL。

我得到的最好的镜头是`/(http:\/\/[^?]*?.*)tracking=[^&]*&?(.*?["|\'])/i`，但它与 -part 匹配太多，`[^&]*`因此如果跟踪字符串之后的 URL 上没有第二个参数，则消除链接后面的所有内容。

我现在正在使用它，它`$html`包含要输出的页面的整个 html，我想从其中的所有 url 中删除跟踪：

```
$html = preg_replace($pattern, '$1$2', $html); 
```

所以 $html 包含的最小值是这样的：

```
<body>
 <a href="[one of the examples above]">Some Link</a>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:12:06.193

您应该通过使用[`parse_url`](http://php.net/parse_url)和解析 URL 来做到这一点[`parse_str`](http://php.net/parse_str)。它比使用正则表达式更容易。

```
<?php
$params = array();

$url = "http://example.com/bar.php?param=baz&tracking=foo";
$url_parts = parse_url( $url);

parse_str( $url_parts['query'], $params);

// Remove the "tracking" parameter
if( isset( $params['tracking'])) {
    unset( $params['tracking']); 
} 
```

现在您只需要使用 in 中的部分和 in 中`$url_parts`的其余参数重建字符串`$params`。您可以使用[`http_build_query`](http://php.net/http_build_query).

尝试这样的事情，虽然我还没有测试过，所以它需要一些修改：

```
$url = $url_parts['scheme'] . '://' . $url_parts['host'] . $url_parts['path'] . '?' . http_build_query( $params); 
```

对于您的特定用例，我将使用 PHP 的[`DOMDocument`](http://us.php.net/domdocument)类来解析 HTML，然后从中获取所有 URL，然后使用上述方法删除跟踪参数。但是，如果您必须使用正则表达式，则可以使用通用正则表达式仅查找 URL，然后将上述内容应用于您使用[`preg_replace_callback`](http://php.net/preg_replace_callback).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T12:22:39.753

```
/tracking=.*?(?=(&|$|\r|"))/ 
```

应该匹配所有`tracking=foo`变量。只需替换为空字符串。

[http://regexr.com?30ofo](http://regexr.com?30ofo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:33:04.063

作为对您自己的正则表达式的修改`(http:\/\/[^?]*?.*)(tracking=[^&]*)(.*)?`

如果匹配，则从字符串中删除第二组（带有跟踪的组）

# iphone - 在 UIButton 处添加 UIView

> ID：10297398
> 
> 赞同：1
> 
> 时间：2012-04-24T11:59:10.990
> 
> 标签：iphone, ios5, uibutton, customization

这是我的应用程序的要求：

有一个日历类型的视图，它将显示日期、日期、当天的总工作时间。我需要的是，当我单击该特定方形块中的任意位置时，它将我的页面重定向到新视图。

我正在考虑应该在该按钮上添加多个按钮和 UIView。这可以解决我的问题，但它有点问题。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:59:33.463

创建一个 UIControl 的子类和一个带有 UIView 的 XIB。将 UIView 的类类型设置为新的 UIControl（不是文件所有者，而是 UIView）。然后在 UIControl 的 initWithCoder: 方法中创建显示组件并添加到视图中。然后设置填充这些控件所需的属性。

要使用这个新控件，请在屏幕上您想要的位置放置一个 UIView 并调整其大小。将其类类型（在检查器中）更改为您的新子类。现在，您可以像添加 UIButton 一样向此视图添加出口和操作。唯一的缺点是无法从检查器设置显示控件，您必须在程序中执行此操作。但好的一面是你会得到一个与按钮类似的界面，你可以让它看起来像你喜欢的那样。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:06:56.200

请查看 UITapGestureRecognizer 以了解您的观点。我想这就是你要找的。

[这是一个关于使用 UITapGestureRecognizer 的教程的链接](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)

# php - 使用复制时避免中断 - Redis

> ID：10297400
> 
> 赞同：3
> 
> 时间：2012-04-24T11:59:25.450
> 
> 标签：php, session, redis, replication, master-slave

我们有 1 个使用 Redis 的 master。还有那个主人的两个奴隶。从站也用作 WebServer。我们将 Redis 用于 PHP 会话。我们正在使用 Round Robin DNS 进行负载平衡。所以这意味着请求在“随机”服务器上命中。

我应该如何配置 PHP 会话之类的东西，以免破坏用户体验。例如，我每 10 秒有一次 redis 的复制期。用户登录和会话创建。几秒钟后，用户请求新页面并点击其他服务器。但是在那台服务器上，Redis 还没有被复制。

当数据在这个问题上很关键时，在这种情况下该怎么办？我们在 redis 中也有非关键数据，所以我们不想将复制周期设置为非常小的周期并将负载加载到 master。

实际上，这不仅适用于 Redis。我还不知道，也许我们会遇到与 MySQL 相同的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:46:49.640

> > 例如，我每 10 秒有一次 redis 的复制期

我假设您指的是设置`repl-ping-slave-period`- 这是从主设备到从设备的 ping 时间间隔，以确认链接已启动。

Redis 没有复制期。主机尽快向从机发送命令。从站仍然可以滞后，但这种滞后不是因为您指定的 10s 设置。

您可以在本地验证这一点。打开一个 telnet 会话，连接到 localhost 6379（或者你的主人所在的任何地方）。输入`sync`。master 将首先发送一个转储文件，然后在您修改 master 上的数据时向您发送命令。您还将每 10 秒看到一次 ping。

> > 我应该如何配置诸如 PHP 会话之类的东西以不破坏用户体验？

最好为 Redis 主从拥有一个专用服务器。不要在有你的网络服务器的机器上安装 Redis。

所有 3 个网络服务器都应直接连接到 Redis 主服务器。如果主服务器由于某种原因宕机，网络服务器应该切换到从服务器。

如何从master切换到slave？现在，您必须手动执行此操作。Salvatore 一直在谈论 Redis-Sentinel，它将解决这个问题，但这个解决方案今天不存在。

有几个人已经实现了自动故障转移的解决方案，但是对于这么小的设置，我建议使用监控脚本并手动进行故障转移。

# c++ - 多重继承：2Classes1Method

> ID：10297405
> 
> 赞同：10
> 
> 时间：2012-04-24T12:00:10.823
> 
> 标签：c++

我刚刚尝试了这段代码：

```
struct FaceOfPast
{
    virtual void Smile() = 0;
};

struct FaceOfFuture
{
    virtual void Smile() = 0;
};

struct Janus : public FaceOfPast, public FaceOfFuture
{
    virtual void Smile() {printf(":) ");}
}; 
```

...

```
void main()
{
    Janus* j = new Janus();
    FaceOfFuture* future = j;
    FaceOfPast* past = j;

    future->Smile();
    past->Smile();

    delete j;
} 
```

它按预期工作（输出两个笑脸），但我认为它甚至不应该编译，重新声明`Smile()`是`Janus`模棱两可的。

它如何（以及为什么）起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T12:05:42.220

没有歧义，因为您调用`Smile()`了指向`FaceOfFuture`并且`FaceOfPast`只声明一个方法的指针`Smile()`。

**因为在基类指针上调用方法不会导致歧义，让我们处理直接在子类指针上调用方法的情况**：

```
Janus* j = new Janus();
j->Smile(); 
```

派生类除了重写之外，还隐藏了基类的`Smile()`. 只有当您不覆盖派生类中的方法时，您才会有歧义：

以下编译：

```
struct FaceOfPast
{
    virtual void Smile() {printf(":) ");}
};
struct FaceOfFuture
{
    virtual void Smile() {printf(":) ");}
};
struct Janus : public FaceOfPast, public FaceOfFuture
{
   virtual void Smile() {printf(":) ");}
};
int main()
{
   Janus* j = new Janus();
   j->Smile();
} 
```

尽管您调用`Smile`a `Janus`，但基类声明是隐藏的。

以下没有：

```
struct FaceOfPast
{
    virtual void Smile() {printf(":) ");}
};

struct FaceOfFuture
{
    virtual void Smile() {printf(":) ");}
};

struct Janus : public FaceOfPast, public FaceOfFuture
{
};

int main()
{
   Janus* j = new Janus();
   j->Smile();
} 
```

因为模棱两可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:38:41.537

根据 C++ 标准（10.3.2）：

> 如果虚成员函数 vf 在类**Base**和类**Derived**中声明，直接或间接从**Base**派生，则具有相同名称、参数类型列表、cv 限定和 ref 限定符的成员函数**vf** （或没有相同的）作为**Base::vf**被声明，然后**Derived::vf** [...] 覆盖**Base::vf**。

多重继承似乎没有任何特殊处理，因此它很可能也适用于这里：`void Janus::Smile()`重写这两个方法而没有任何歧义，只是因为它与两个基类方法具有完全相同的名称和签名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:48:31.180

```
Janus* j = new Janus();
FaceOfFuture* future = j;
FaceOfPast* past = j; 
```

这部分代码转换为基类。因此，当您执行以下操作时

```
future->Smile();
past->Smile(); 
```

这实际上是指向 FaceofPast 和 FaceOfFuture 的指针。

# apache - 如何在 JBPM 5 中处理没有 Minaserver 的 Humantask

> ID：10297409
> 
> 赞同：2
> 
> 时间：2012-04-24T12:00:13.890
> 
> 标签：apache, drools, jbpm

我正在使用 apache mina 服务器来处理我的工作流程。但是当启动太多进程时，Mina 服务器占用了 JVM 的大部分空间，我无法进一步前进。

```
One instance of "org.apache.mina.transport.socket.nio.NioSocketSession" loaded by 
"org.jboss.classloader.spi.base.BaseClassLoader @ 0xb9b10d58" occupies 685,361,840 (68.96%) bytes.
The memory is accumulated in one instance of "java.lang.Object[]" loaded by "<system class loader>". 
```

1.那么有没有其他替代米娜..？

2.如何在没有 Mina.. 的情况下处理我的人工任务？

请提出解决方案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:06:56.927

jBPM 5.2 目前支持的 Apache Mina 有两种替代方案 - LocalTask​​Service：在本地运行，在您的流程引擎旁边 - HornetQ：使用 HornetQ 消息在客户端和服务器之间进行通信

克里斯

# c# - Reportviewer 不显示数据表

> ID：10297416
> 
> 赞同：1
> 
> 时间：2012-04-24T12:00:43.640
> 
> 标签：c#, asp.net, reportviewer

我有一个reportviewer。我想动态生成一个数据表并将其设置为我的报告查看器的数据源。报表查看器不显示数据。我的代码如下：

```
 ReportViewer1.ProcessingMode = ProcessingMode.Local;
        ReportViewer1.LocalReport.ReportPath = "report1.rdlc";
        ReportDataSource rdS = new ReportDataSource("report", dt);
        ReportViewer1.LocalReport.DataSources.Add(rdS); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T08:32:00.967

尝试这个：

```
ReportViewer1.Visible = true;
ReportViewer1.LocalReport.ReportPath = "report1.rdlc";
var datasource = new ReportDataSource("report", dt);
ReportViewer1.LocalReport.DataSources.Clear();
ReportViewer1.LocalReport.DataSources.Add(datasource);
ReportViewer1.LocalReport.Refresh(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:59:21.180

使用此代码

```
ReportViewer viewer = new ReportViewer();

viewer.ProcessingMode = ProcessingMode.Local;
viewer.LocalReport.ReportEmbeddedResource = @"D:\Projects\NIKHIL\NIKHIL\Report3.rdlc; viewer.LocalReport.ReportPath = @"D:\Projects\NIKHIL\NIKHIL\Report3.rdlc; viewer.LocalReport.DataSources.Clear();
viewer.LocalReport.DataSources.Add(new ReportDataSource("DataSet1", ds.Tables[0])); viewer.LocalReport.Refresh();

byteViewer = viewer.LocalReport.Render(reportType, deviceInfo, out mimeType, out encoding, out extension, out streamIds, out warnings); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-28T21:40:13.447

如果 ReportViewer 没有显示数据（只是空白页）： 确保：确保 DataTable 中的列名与您在 DataSource（数据库）中定义的列名匹配。（例如：如果数据库有一个名为 'name_first' 的 columnName，您的 DataTable 还需要将 columnName 设置为 'name_first' ）。

# jquery - jquery客户端验证asp.net

> ID：10297419
> 
> 赞同：-2
> 
> 时间：2012-04-24T12:01:07.767
> 
> 标签：jquery, asp.net

我是 jquery 的新手；我正在使用 jquery 验证，如下所示：

```
 function validate() {
        return $('#aspnetForm').valid();
    }

<asp:Button UseSubmitBehavior="false" ID="Button1" runat="server" Text="Button" OnClientClick="return validate();" OnClick="btnSubmit_Click"></asp:Button> 
```

**这在 asp.net 中可行吗？** 当前，如果函数返回 true，则此按钮不会后退

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:13:05.743

你需要 jQuery 库、jQuery 验证插件和元插件。

* * *

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.5.5/jquery.validate.min.js"></script>
<script type="text/javascript" src="http://jquery-multifile-plugin.googlecode.com/svn-history/r16/trunk/jquery.MetaData.js"></script> 
```

* * *

```
<form id="form1" runat="server">
    <asp:TextBox ID="txtEmail" runat="server" class="{required:true, email:true,messages:{required:'required.',email: 'invalid email!' }}"></asp:TextBox>
    <!-- ... -->
    <asp:Button ID="btnSubmit" runat="server" Text="submit" />
</form> 
```

* * *

`validate()`在 asp.net 表单上使用jQuery 验证插件。

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#form1").validate();
    });
</script> 
```

# c# - MSIL 是否与 .NET 中的托管代码相同？

> ID：10297423
> 
> 赞同：10
> 
> 时间：2012-04-24T11:35:55.447
> 
> 标签：c#, .net, compilation, il

我对*MSIL*和*托管代码*感到困惑，它们是相同的还是不同的？我的意思是说，当我们构建 C# 代码时会发生什么？

哪一个是对的

> `C# Code → C# compiler → Managed Code → MSIL`

或者

> `C# Code → C# compiler → MSIL`

请提供真实的参考或链接以支持您的答案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T12:13:50.017

你混淆了不同的东西。[托管代码](http://en.wikipedia.org/wiki/Managed_code)是用托管语言（C#、VB.NET、F# 和许多其他语言）编写的代码，这些语言编译成 CIL（通用中间语言，以前称为 Microsoft 中间语言或 MSIL）并在 CLR 的托管环境中运行。

另一方面，非托管代码直接编译为本机代码（也称为程序集），它不在 CLR 上运行。

当您构建 C# 代码时，它会被编译成 CIL。这就是为什么您可以使用 ildasm 或 Reflector 之类的工具来检查编译后的代码的原因。执行 CIL 代码时究竟会发生什么取决于具体情况。它可能是

1.  使用 JIT 编译器（最常见的选项）“及时”编译为本机代码。
2.  使用预编译的本机代码执行（您可以使用 NGEN 来获取）。
3.  直接解释；我认为某些版本的 .Net for Windows CE 或类似版本可以做到这一点。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-24T11:44:35.767

如评论中所述，MSIL 已重命名为 CIL。

> `C# Code --> C# compiler --> CIL`

因为

> `CIL = Managed`

当放在它的上下文中时，还有

> `Native Code = Unmanaged`

请注意，这`Managed Code`是完全不同的东西，它[指的是源代码](https://stackoverflow.com/a/10297592/47064)。

* * *

如果你想扩展它，那么更正的完整过程是：

> `.NET Code --Compiler--> CIL (Managed) --JIT/NGEN--> Native Code (Unmanaged)`

* * *

参考：

1.  [介绍 C#（什么是 .NET Framework？-> CIL 和 JIT -> 前两句）](http://msdn.microsoft.com/en-us/library/hh145616(v=vs.88).aspx)

2.  [JIT / NGEN（迈向托管代码的成本模型 -> 即时编译器 -> 整体）](http://msdn.microsoft.com/en-us/library/ms973852.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T11:49:11.707

编写为在 CLR 的控制下运行的代码称为托管代码。（[来源](http://msdn.microsoft.com/en-us/magazine/cc302016.aspx)）。所以

C#代码→C#编译器→CIL（以前称为MSIL）

是正确的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-20T19:28:37.130

我不会在这里详细介绍，因为其他人已经介绍了很多，但我想澄清一些其他答案没有真正解释好或正确的观点。这在很大程度上是迂腐的，对于 99.99999% 的情况，您可以只想到“C# 和 CIL/MSIL 是托管代码”，但这有一些微妙之处。

首先，CIL/MSIL 被称为“中间语言”，这意味着它是一种计算机语言，用作源代码和最终本机机器代码之间的中间步骤。然而，这不一定是这种情况。我听说过实验项目，他们创建了一个直接执行 CIL（或称为 Java 字节码的 java 等效项）的 CPU，而无需先将其转换为本机形式（基本上，CIL 是本机形式）。

托管代码是指由某种托管运行时“管理”的代码。这通常意味着代码被垃圾收集，并且具有某种安全层来防止诸如缓冲区溢出和本机代码中可能发生的其他类型的问题。在 .net 中，这称为公共语言运行时 (CLR)

在过去，这曾经被称为“虚拟机”，以及为什么将 java 环境称为 JVM，尽管该术语现在在很大程度上是用词不当。如今，使用 JIT（即时）编译器，没有真正的“虚拟机”，而是一层“包装”本机编译代码的代码，以确保您不会违反规则，并在之后进行清理你的代码。它还抽象出一些特定于平台的东西，这样 CIL 就不必担心它们。

因此，托管代码是指在托管运行时中运行的代码的概念。当 CIL 在运行时（例如 .NET 运行时环境）中运行时，它被视为托管代码。

C# 和 VB.NET 通常被认为是“托管语言”，因为它们通常编译为 CIL 并在托管运行时下运行。然而，这并不一定是这样（尽管如果遵循规范的字母，它可能确实是这样）。例如，有些编译器可以将 c# 直接编译为本机代码而无需中间层，而 C# 的运行时解释器根本不编译代码，而是在运行时“解释”它。

所以要点是托管代码和 CIL 是两个不同的东西，但它们是相关的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-20T17:55:19.240

当您为 Windows 编写程序时，您可以编写两种类型的代码之一：托管代码和本机代码。本机代码直接编译成机器可执行文件或 .dll，而托管代码是针对 .NET 运行时的代码（换句话说，它的编译形式，称为程序集，是包含 CIL 指令的文件）。在运行时，CIL 由 JIT 编译器转换为机器码并执行。托管和本机之间的区别与语言（及其编译器）的目标有关。本机代码以机器本身为目标，因为它被编译成一组直接机器指令。另一方面，C# 编译器将您的代码编译成 CIL，因为 C# 语言编译器以 .NET 运行时为目标。然后可以说 C# 是一种“托管语言”，而用它编写的任何代码都是“托管代码”。例如：

```
C src  -> gcc.exe -> .exe containing a machine binary ->            processor
C# src -> csc.exe -> .exe assembly containing CIL     -> CLR/JIT -> processor 
```

我认为使用“托管”一词的原因是因为形成代码的指令最终由 .NET 运行时处理，而不是由处理器直接执行。将源代码编译为 CIL 的额外步骤本身并不是使您的代码受到管理的原因：相反，您的程序永远不会被处理器直接执行这一事实。CIL 正是允许多种不同的托管语言针对同一运行时的原因。

我知道这比仅仅说“托管语言编译成 CIL”要冗长得多，但那是因为我真的不认为这是对什么使代码托管的完全准确的描述。Java 字节码类似于 CIL，但存在可以本地执行字节码的实际“Java 处理器”。.NET CIL 也可以使用这样的处理器，这意味着编译成 CIL 并在这样的机器上运行的代码将成为本机代码。您的代码必须通过 CLR 处理这一事实使其得以管理。CIL 恰好是代码必须转换为运行时才能执行它的格式。

# redirect - 从 TranslateThis 按钮意外重定向到谷歌翻译引擎

> ID：10297429
> 
> 赞同：1
> 
> 时间：2012-04-24T12:01:38.523
> 
> 标签：redirect, google-translate, machine-translation

我正在使用 TranslateThis ( [http://translateth.is/](http://translateth.is/) )，这是一个用于翻译网页的著名 API。它总是工作得很好，但最近，请求被重定向到谷歌翻译。引用重定向的 url 类似于[http://translate.google.com/translate?sl=auto&tl=en&u=http://mywebsite.com](http://translate.google.com/translate?sl=auto&tl=en&u=http://mywebsite.com)。你知道为什么会这样吗？我会很感激一个小费。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:19:04.800

解决了！

他们有一个自动系统来捕获滥用其系统的网站。我的网站被抓住了，但这一次是一个错误。他们让我在他们的系统上手动覆盖，以防止将来重定向。

最好的祝福

# sql - SQL Invalid Column Name (I think it's becasue of null value)

> ID：10297430
> 
> 赞同：0
> 
> 时间：2012-04-24T12:01:38.803
> 
> 标签：sql, sql-server-2008, select

I have a nested SQL select statement where the sub select relies on a value from the parent select. However, the query fails due to a null value (I think). How do I get the query to ignore the sub select statement each time it comes across a null value?

Here's my query:

```
SELECT ID, Hierarchy, Name, Hierarchy.GetLevel() AS Level, Hierarchy.GetAncestor(1) AS ParentHierarchy,
        (SELECT ID
         FROM  SpecProducts
         WHERE (Hierarchy = ParentHierarchy)) AS ParentHierarchy

FROM          SpecProducts AS SpecProducts_1
WHERE        (EnableDisable IS NULL)
ORDER BY Hierarchy 
```

Here is my error message:

Invalid column name 'ParentHierarchy'

************************************** EDIT: 24/04/2012 - 14:50 ***********************************

 **Thanks for pointing out the error. Unfortunately I still get the same problem.

Here's the updated query:

```
SELECT ID, Hierarchy, Name, Hierarchy.GetLevel() AS Level, Hierarchy.GetAncestor(1) AS ParentHierarchy,
                         (SELECT  ID
                          FROM    SpecProducts
                          WHERE  (Hierarchy = ParentHierarchy)) AS ParentID
FROM    SpecProducts AS SpecProducts_1
WHERE   (EnableDisable IS NULL)
ORDER BY Hierarchy 
```

Error Message: Invalid Column Name 'ParentHierarchy'

Is the problem because the ParentHierarchy value can be NULL?

******** EDIT **************************

 **Ok this works:

```
SELECT   ID, Hierarchy, Name, Hierarchy.GetLevel() AS Level, Hierarchy.GetAncestor(1) AS ParentHierarchy,
         (SELECT   ID AS IDd
          FROM     SpecProducts
          WHERE    (Hierarchy = SpecProducts_1.Hierarchy.GetAncestor(1))) AS ParentID
FROM            SpecProducts AS SpecProducts_1
WHERE        (EnableDisable IS NULL)
ORDER BY Hierarchy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:04:39.460

You have two fields named ParentHierarchy. You need to change the second field to be named something else. Also, you are trying to reference an alias inside the nested SELECT statement. Try referencing the GetAncestor(1) method instead.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:04:40.573

use use the name `ParentHierarchy` twice. try

```
SELECT ID, ..., Hierarchy.GetAncestor(1) AS ParentHierarchy,
    (SELECT ID
     FROM  SpecProducts
     WHERE (Hierarchy = ParentHierarchy)) AS ParentHierarchyID ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:05:36.080

It is because you are trying to give the name `ParentHierarchy` to 2 different columns in your main `SELECT` statement:

```
Hierarchy.GetAncestor(1) AS ParentHierarchy 
```

and

```
(SELECT ID ...) AS ParentHierarchy 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T12:23:47.600

```
SELECT ID, Hierarchy, Name, Hierarchy.GetLevel() AS Level, Hierarchy.GetAncestor(1) AS ParentHierarchy,
        (SELECT ID
         FROM  SpecProducts as sp2
         WHERE (sp2.Hierarchy = SpecProducts_1.Hierarchy)) AS ParentHierarchy2

FROM          SpecProducts AS SpecProducts_1
WHERE        (EnableDisable IS NULL)
ORDER BY Hierarchy 
```****

# c++ - Whats the errors not able to understand

> ID：10297431
> 
> 赞同：0
> 
> 时间：2012-04-24T12:01:43.583
> 
> 标签：c++, visual-studio-2010, visual-c++, pointers, typedef

i made a code but has errors and wan't able to solve them:-

the following errors are in one of mine header file(code shown below)

> error C2143:syntax error : missing ';' before '*'
> 
> error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
> 
> error C4430: missing type specifier - int assumed. Note: C++ does not support default-int

Header file code:-

```
#ifndef _DEVICE_SOURCE_FICARD_HH
#define _DEVICE_SOURCE_FICARD_HH

#ifndef _FRAMED_SOURCE_HH
#include "FramedSource.hh"
#endif

#include <DeviceSource.hh>

typedef struct LtagBufferEntry
{
  char *pBuffer;
  struct LtagBufferEntry *pNext;
} LBufferEntry;

class FICardDeviceParameters {
public:
    (RetEntry*)(*p_lm_lock_fn)( void *data );  //error at this line
    void (*p_lm_unlock_fn)( void *data );
    int nFICardFrameSize;
  //%%% TO BE WRITTEN %%%
};

class DeviceSourceFICard: public DeviceSource {
public:
  static DeviceSourceFICard* createNew(UsageEnvironment& env, FICardDeviceParameters fi_params,
                 DeviceParameters params);

protected:
  DeviceSourceFICard(UsageEnvironment& env, FICardDeviceParameters fi_params, DeviceParameters params);
  // called only by createNew(), or by subclass constructors
  virtual ~DeviceSourceFICard();

private:
  // redefined virtual functions:
  virtual void doGetNextFrame();

private:
  void deliverFrame();

private:
  DeviceParameters fParams;
  LBufferEntry *pData;
  char         * pRetData;
  //int nFICardFrameSize;
  FICardDeviceParameters fiParams;
};

#endif //_DEVICE_SOURCE_FICARD_HH 
```

Defination of RetEntry:-

```
typedef struct tagRetBuffer
{
  char *pBuffer;
  int nDataLn;
} RetEntry;

void InitBufferHandling();
void TransferBuffer( void *pBuffer );
RetEntry *lm_lock_fn( void *data );
void lm_unlock_fn( void *data );
int initLm555Settings(void);
void play();
void afterPlaying(void*);
void init_play();
void StartRTPProcess(void); 
```

How to fix them...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:40:30.533

The problem is that the compiler does not know what `RetEntry` is in the expression:

```
(RetEntry*)(*p_lm_lock_fn)( void *data ); 
```

You must either include the header that provides the definition or else declare it in your current header. From the code below it seems to be a typedef to `tagRetBuffer`, so to *declare* it in the current translation unit you will need to declare the struct and the typedef:

```
struct tagRetBuffer;
typedef tagRetBuffer RetEntry; 
```

Now, I would suggest that you avoid those typedef's altogether, in C++ the compiler will search for types if needed. You can just do:

```
struct RetEntry
{
  char *pBuffer;
  int nDataLn;
}; 
```

And then use `RetEntry` anywhere as if it was a typedef'ed name. Note that there are differences, but that in 99% of the cases you will not notice. And when you do notice it might even be to your advantage (for example, you cannot *declare* a typedef, so you need to *declare* the typedef'ed name and then redefine the typedef as per the first suggestion here).

# php - Mysql：检查范围时间冲突

> ID：10297437
> 
> 赞同：2
> 
> 时间：2012-04-24T12:02:13.377
> 
> 标签：php, mysql, codeigniter

我有下表存储教师课堂例程

表名：batchroutine_regular

```
batchid class_day   subject    teacherid class_start   class_end
   1     Sunday     English-1    1001     02:00 PM     03:30 PM
   1     Sunday     Geography    1002     04:00 PM     05:30 PM
   2     Monday     Math         1001     10:00 AM     12:30 PM
   2     Tuesday    Geography    1001     01:00 PM     03:30 PM 
```

`teacherid`现在让我们说你是老师`1001`。你被要求参加星期一的课程，该课程将在 开始`11:00 AM`和结束`1:00 PM`。现在我的问题是 MYSQL/PHP 查询从表中找出您当时是否有空`batchroutine_regular`？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:14:09.313

```
SELECT (COUNT(*) = 0) AS Available
FROM batchroutine_regular
WHERE
      teacherid = 1001
  AND class_day = 'Sunday'
  AND (
       (class_start <= MAKETIME(11,00,00) AND class_end >= MAKETIME(11,00,00))
    OR (class_start <= MAKETIME(13,00,00) AND class_end >= MAKETIME(13,00,00))
  ) 
```

# html - 在记事本中获取页面的生成源代码

> ID：10297440
> 
> 赞同：2
> 
> 时间：2012-04-24T12:02:31.377
> 
> 标签：html, firefox, google-chrome, text

当我单击检查元素（在 Firefox 的 chrome 中）并将其放入记事本（自动）或者可能以某种方式自动访问它时，是否有任何方法可以获取 HTML 浏览器页面的源代码。

我不想要原始源代码，而是在所有 javascript 已经运行之后生成的源代码。

之后我想在另一个网页中使用代码并解析它......

稍后编辑：我实际上可以单击检查元素中的 html 并单击复制 html，但我需要另一个站点自动访问此信息，因为我会尝试定期重新加载站点并且需要不断获取新的 html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:06:58.770

使用 Firebug 的 HTML 选项卡，您可以右键单击元素，然后单击“复制 HTML”。

另请参阅这篇文章： [如何获得完全计算的 HTML（而不是源 HTML）？](https://stackoverflow.com/questions/6364138/how-to-get-fully-computed-html-instead-of-source-html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:13:19.883

按`ctrl+u`然后它将显示`source code of html page`然后转到`file menu and save it as html file`您的系统。然后您可以在 html 或其他编辑器（如`netbeans /dreamviewer/notepad`. 我建议你在netbeans或dreamviewer中打开它会更好然后在notped中打开它。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:11:12.307

您可以使用 Firefox 或 Chrome 的[Web 开发者插件](http://chrispederick.com/work/web-developer/)。它为您提供了页面的生成源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T12:16:05.693

在 Opera 中，右键单击 -> 单击检查元素 -> 右键单击`<html>`​​标记 -> 单击编辑标记，从那里您可以复制整个 HTML 代码。

编辑 -> 在 Oprea 中，右键单击页面`->`单击 Source `->`a new tab opens ，在新打开的选项卡的菜单栏中，您可以选择`'Save'`，从该选项中您可以保存 html 代码，`.html , .txt.` 希望这对您有所帮助。

# zend-framework2 - ZF2 tableGateway select

> ID：10297447
> 
> 赞同：1
> 
> 时间：2012-04-24T12:03:08.587
> 
> 标签：zend-framework2, tablegateway

I started with the ZendSkeletonApplication and added a model extending Zend\Db\TableGateway\TableGateway. I have the following method:

```
public function findByType($type) {
    $rowset = $this->select('type' => $type);
    return $rowset;
} 
```

This works, but now if i do this:

```
$foo = $table->findBytype('foo');
$bar = $table->findBytype('bar'); 
```

the first one works, the query it executes is:

```
SELECT * FROM table WHERE 'type' = 'foo' 
```

The second one however executes the following query:

```
SELECT * FROM table WHERE 'type' = 'foo' AND 'type' = 'bar' 
```

is this expected behavior? If so how can i have the second time i call the method execute the following query:

```
SELECT * FROM table WHERE 'type' = 'bar' 
```

thanks in advance!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T08:08:16.367

应该像这样在 tableGateway 中使用 select：

```
$select = $this->getSql()->select();
$select->where(array('type' => 'foo'))
    ->where(array('type' => 'bar'));
$rowset = $this->selectWith($select); 
```

select() 将在您下次调用时重置 where() 参数。

在我的博客中查看更多用法：http: [//avnpc.com/pages/advanced-database-select-usage-in-zf2](http://avnpc.com/pages/advanced-database-select-usage-in-zf2)

# javascript - Spotify - 使用复选框 UI 元素

> ID：10297452
> 
> 赞同：1
> 
> 时间：2012-04-24T12:03:24.723
> 
> 标签：javascript, html, spotify

当我尝试在我的 spotify 应用程序中使用复选框时，该元素保持空白。

例如

```
<input type="checkbox" name="incr" value="salami"> Salami 
```

只显示意大利腊肠。

我应该如何在 Spotify 应用程序中构建这些元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T22:08:42.057

当前 CSS 中存在一个错误，导致复选框无法正确呈现。您可以覆盖它并强制它在 CSS 中使用 webkit-appearance 呈现：

```
<input type="checkbox" name="incr" value="salami" style="-webkit-appearance: checkbox !important;" /> 
```

# python - Can I use Google Transliteration in Python?

> ID：10297454
> 
> 赞同：0
> 
> 时间：2012-04-24T12:03:44.260
> 
> 标签：python, unicode, transliteration

I am aware that Google allows transliteration from English to several languages (www.google.com/transliterate).

I have an English word-list. I would like to transliterate (**not** *translate*) every word to Bengali (a language Google supports) - to obtain output in the form of a Unicode word-list.

Is there a way to use the transliteration API in Python to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:22:41.113

这是入门文档：[http ://code.google.com/apis/language/transliterate/v1/getting_started.html#transliterateLowLevel](http://code.google.com/apis/language/transliterate/v1/getting_started.html#transliterateLowLevel)

如果您只需要使用一次，那么使用示例代码在浏览器中执行音译可能是最简单的方法。

如果您能弄清楚实际发出的请求（应该不难，您可以在浏览器的开发人员工具中观察它们），您可以使用该`requests`模块重新实现它（只需使用 获取它`pip`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:18:15.287

试试[unidecode](http://www.tablix.org/~avian/blog/archives/2009/01/unicode_transliteration_in_python/)模块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:19:07.493

Google Transliteration API 是一个供网页使用的 JavaScript API。没有任何关于直接使用编程语言或 RESTful Web 服务接口的内容。这意味着为了从 python 中使用它，您需要对对服务器的调用进行逆向工程（但不确定是否允许）。

另一种解决方案是使用[Selenium](http://seleniumhq.org/) Web 驱动程序。您需要安装浏览器和 Selenium Web 驱动程序。然后，您将能够从 python 控制浏览器（写入文本字段，读取结果）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T13:34:27.010

此外，还有[https://github.com/davisp/python-spidermonkey](https://github.com/davisp/python-spidermonkey)在[Best way to integration Python and JavaScript?](https://stackoverflow.com/questions/683462/best-way-to-integrate-python-and-javascript) . 至少有一个地方可以开始寻找。

# c# - 如何在 Windows 窗体中显示来自 REST Web 服务的字符串？

> ID：10297455
> 
> 赞同：1
> 
> 时间：2012-04-24T12:03:44.193
> 
> 标签：c#, string, wcf, web-services, rest

如何在 Windows 窗体中显示来自 REST Web 服务的字符串，我的 xml 如下所示：

```
<string>whatever</string> 
```

如何在 win 表单的文本框中显示它？

如果我尝试

```
 string uri = string.Format("etc/{0}/{1} Sad.Text, Happy.Text");
        XDocument xDoc = XDocument.Load(uri);
        string mystring = xDoc.Element("String").Value;
        textBox1.Text = mystring; 
```

你得到一个对象引用错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:35:51.067

XML 元素区分大小写。尝试，

```
string mystring = xDoc.Element("string").Value; 
```

* * *

解决该问题的更好方法是不使用 XML 返回简单字符串。媒体类型`text/plain`就是为此而设计的。如果您使用的是[Microsoft 的 ASP.NET Web API](http://nuget.org/packages/AspNetWebApi)，只需返回

```
return new HttpResponseMessage() { 
            Content = new StringContent("etc/{0}/{1} Sad.Text, Happy.Text")
           }; 
```

在客户端（使用这个[http://nuget.org/Packages/system.net.http](http://nuget.org/Packages/system.net.http)）做，

```
var httpClient = new HttpClient();
textBox1.Text = httpClient.GetAsync(uri).Result.Content.ReadAsString(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-24T12:23:06.250

我会使用 XmlSerializer 从 Web 服务返回的 XML 中获取信息。我假设您的 XML 只是一个字符串。您可以为您的简单示例执行类似的操作，但这也适用于 REST Web 服务返回的更复杂的对象。

```
 XmlSerializer xs = new XmlSerializer ( typeof ( string ) );
 MemoryStream memoryStream = new MemoryStream(StringToUTF8ByteArray(restResult));
 XmlTextWriter xmlTextWriter = new XmlTextWriter(memoryStream, Encoding.UTF8);
 string textBoxVal = xs.Deserialize(memoryStream); 
```

# xslt - 如何在 XSL-FO 生成的 PDF 中为没有任何值的字段插入间距/填充？

> ID：10297458
> 
> 赞同：1
> 
> 时间：2012-04-24T12:03:51.893
> 
> 标签：xslt, pdf-generation, xsl-fo, apache-fop

我有以下 XML：

```
<sample>
    <value1>This is one</value1>
    <value2>Number two</value2>
    <value4>Last value</value4>
</sample> 
```

使用 Apache FOP/XSL-FO 我想要一个类似于此的 PDF：

```
Value 1: This is one Value 2: Number two
Value 3:                 Value 4: Last value 
```

注意“Value 3:”和“Value 4:”之间的间距/填充。

以下转换给了我想要的结果。但它似乎过于复杂（并且对于具有许多值的真实 PDF 可能表现不佳）。

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:fo="http://www.w3.org/1999/XSL/Format">

    <xsl:template match="sample">
        <fo:root>
            <fo:layout-master-set>
                <fo:simple-page-master master-name="page-layout">
                    <fo:region-body margin="10mm" region-name="body"/>
                </fo:simple-page-master>
            </fo:layout-master-set>
            <fo:page-sequence master-reference="page-layout">
                <fo:flow flow-name="body">
                    <fo:block>
                        <xsl:variable name="pad">                            
                            <xsl:choose>
                                <xsl:when test="value1">5</xsl:when>
                                <xsl:otherwise>25</xsl:otherwise>
                            </xsl:choose>
                        </xsl:variable>
                        <fo:inline padding-right="{$pad}mm">Value 1: <xsl:value-of select="value1"/></fo:inline>
                        Value 2: <xsl:value-of select="value2"/>
                    </fo:block>
                    <fo:block>
                        <xsl:variable name="pad">
                            <xsl:choose>
                                <xsl:when test="value3">5</xsl:when>
                                <xsl:otherwise>25</xsl:otherwise>
                            </xsl:choose>
                        </xsl:variable>
                        <fo:inline padding-right="{$pad}mm">Value 3: <xsl:value-of select="value3"/></fo:inline>
                        Value 4: <xsl:value-of select="value4"/>
                    </fo:block>
                </fo:flow>
            </fo:page-sequence>
        </fo:root>
    </xsl:template>

</xsl:stylesheet> 
```

有没有更简单/更好的方法来实现这个？

**更新：**

我将以上内容重构为模板“字段”：

```
<xsl:template name="field">
    <xsl:param name="txt"/>
    <xsl:param name="val"/>
    <xsl:param name="pad"/>
    <xsl:variable name="p">
        <xsl:choose>
            <xsl:when test="$val">5</xsl:when>
            <xsl:otherwise>
                <xsl:choose>
                    <xsl:when test="$pad"><xsl:value-of select="$pad"/></xsl:when>
                    <xsl:otherwise>25</xsl:otherwise>
                </xsl:choose>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <fo:inline padding-right="{$p}mm"><xsl:value-of select="$txt"/>:</fo:inline>
    <fo:inline keep-with-previous="always" padding-right="5mm" font-weight="bold"><xsl:value-of select="$val"/></fo:inline>
</xsl:template> 
```

可以这样使用：

```
<xsl:call-template name="field">
    <xsl:with-param name="txt">Value 1</xsl:with-param>
    <xsl:with-param name="val"><xsl:value-of select="sample/value1"/></xsl:with-param>
</xsl:call-template> 
```

模板采用第三个可选参数 pad。如果指定，其值将用作填充。

David 的模板（请参阅接受的答案）使用更简单的 if 结构，其中 padding-right 属性在需要时被覆盖。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T11:37:47.437

由于这可能没有在浏览器中执行，因此有任何理由不使用 xslt2 （这会使它变得更好），因为无论如何您都在使用 java，所以免费的 saxon 9 实现在这里可以很好地工作。

但这里有一个稍微重构的 XSLT 1 版本。

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:fo="http://www.w3.org/1999/XSL/Format">

    <xsl:template match="sample">
        <fo:root>
            <fo:layout-master-set>
                <fo:simple-page-master master-name="page-layout">
                    <fo:region-body margin="10mm" region-name="body"/>
                </fo:simple-page-master>
            </fo:layout-master-set>
            <fo:page-sequence master-reference="page-layout">
                <fo:flow flow-name="body">
         <xsl:call-template name="twoval">
          <xsl:with-param name="a" select="value1"/>
          <xsl:with-param name="ahead" select="'Value 1'"/>
          <xsl:with-param name="b" select="value2"/>
          <xsl:with-param name="bhead" select="'Value 2'"/>
         </xsl:call-template>
         <xsl:call-template name="twoval">
          <xsl:with-param name="a" select="value3"/>
          <xsl:with-param name="ahead" select="'Value 3'"/>
          <xsl:with-param name="b" select="value4"/>
          <xsl:with-param name="bhead" select="'Value 4'"/>
         </xsl:call-template>
                </fo:flow>
            </fo:page-sequence>
        </fo:root>
    </xsl:template>

<xsl:template name="twoval">
<xsl:param name="a"/>
<xsl:param name="ahead"/>
<xsl:param name="b"/>
<xsl:param name="bhead"/>
<fo:block>
 <fo:inline padding-right="25mm">
  <xsl:if test="$a"><xsl:attribute name="padding-right">5mm</xsl:attribute></xsl:if>
  <xsl:value-of select="$ahead"/><xsl:text>: </xsl:text>
  <xsl:value-of select="$a"/>
 </fo:inline>
 <xsl:text> </xsl:text>
 <xsl:value-of select="$bhead"/><xsl:text>: </xsl:text>
 <xsl:value-of select="$b"/>
</fo:block>
</xsl:template>

</xsl:stylesheet> 
```

# batch-file - batch file execution failing with PostBuildScript plugin of jenkins

> ID：10297465
> 
> 赞同：1
> 
> 时间：2012-04-24T12:04:32.527
> 
> 标签：batch-file, jenkins, jenkins-plugins

I am trying to execute a batch file to copy my files to another server under the 'execute batch or shell script' option of PostBuildScript plugin of jenkins. Below are the commands in my .bat file.

```
net use \\192.168.20.48 /user:admin password
xcopy "C:\Program Files\Jenkins\workspace\Deployment code Test" "\\DeployServer\Workspace\Builds" /S/E/H/D/Y/V/C/I/K/R/X 
```

When the .bat file is run from a command prompt it runs as expected and completing its actions. My problem is that when I run it through Jenkins it gives following error messages:

System error 1312 has occurred. A specified logon session does not exist. It may already have been terminated. Invalid drive specification 0 File(s) copied

any work around for this..?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:26:18.433

运行 LocalSystem 帐户时，“net use”命令不可用。更改运行 Jenkins 的帐户，或使用[Publish Over CIFS 插件](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+CIFS+Plugin)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:11:03.720

任务管理器->服务选项卡->单击服务按钮->选择Jenkins服务->右键单击并转到属性->选择登录选项卡->选择“此帐户”作为登录选项->输入管理员凭据->应用，保存并重新启动服务解决了这个问题。

# php - cakephp 2.0 中的配置文件完整性计

> ID：10297468
> 
> 赞同：0
> 
> 时间：2012-04-24T12:04:49.080
> 
> 标签：php, cakephp-2.0

我必须在 cakePHP 2.0 中显示配置文件完整性计。我找到了几个，但没有找到任何脚本。如果有人知道 php 或 cakephp 2.0 中的任何脚本。请帮我。

提前致谢..：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:16:09.967

像进度条一样？jQuery UI 有一个闪亮且易于使用的进度条和主题：[jQuery UI Progressbar](http://jqueryui.com/demos/progressbar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:50:15.227

感谢帮助。我得到了我的问题的解决方案。

```
SELECT SUM((`field1` = '') + (`field2` IS NULL) + (`field3` = ''))  FROM profiles where id = 1 
```

如果字段为字符串类型，则`=''`如果字段默认值设置，如果字段类型为 int，则使用。`NULL``IS NULL``=0`

再次感谢大家。

# jmeter - 如何检查我的脚本在 JMeter 中是否正常工作？

> ID：10297469
> 
> 赞同：-1
> 
> 时间：2012-04-24T12:04:49.047
> 
> 标签：jmeter

我是 JMeter 的新手。我在 JMeter 中编写了我的第一个脚本。

我的场景是：点击一个按钮，即登录后，点击那个按钮。就是这样。到目前为止，我已经使用 JMeter 为我的脚本录制了。

当我为单个用户运行时，它会为任何不同的用户提供适当的输出。但是，当我与并发用户（2 个或更多具有用户参数预处理器的用户）一起运行时，单击该按钮会显示错误。
我使用 View Results Tree 作为监听器来查看结果。

有时，它不会显示错误。所以我无法确定它失败的确切原因。
你能请任何人指导我吗？

我对这个 JMeter 完全陌生。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:01:45.520

500 internal server error 表示 jmeter 正在连接到您的服务器，并且您的服务器在处理请求时遇到了困难。您可能应该查看您的服务器日志文件以查看是否有任何错误或异常（apache/jetty/etc 日志文件）。

此外，当您确实遇到 jmeter 问题并且您似乎无法从侦听器输出中弄清楚发生了什么时，您可以查看运行 jmeter 时在目录中创建的 jmeter.log 文件。这通常会提供有关 jmeter 故障的更详细信息。

# azure - nservicebus 使用带有 azure 队列的通用主机导致 msmq 错误

> ID：10297472
> 
> 赞同：1
> 
> 时间：2012-04-24T12:05:10.237
> 
> 标签：azure, nservicebus, servicebus

我有一个本地服务总线，它配置为处理来自 azure 队列的消息。我遇到的问题是主机报告了一个 msmq 错误，说它无法创建错误队列。除了它不应该使用 msmq 之外，尽管出现错误，它也可以毫无问题地处理消息，因此它似乎并不重要。

我的主机作为配置为以 nservicebus.host.exe 进程启动的类库运行。

**这是我的主机代码和配置：**

```
internal class EndpointConfig : IConfigureThisEndpoint, AsA_Server, IWantCustomInitialization
{
    #region IWantCustomInitialization Members

    public void Init()
    {
        Configure.With()
            .DefaultBuilder()
            .AzureMessageQueue()
            .JsonSerializer()
            .UnicastBus()
            .IsTransactional(true)
            .InMemorySubscriptionStorage();
    }

    #endregion
} 
```

**配置：**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="UnicastBusConfig" type="NServiceBus.Config.UnicastBusConfig, NServiceBus.Core" />
    <section name="AzureQueueConfig" type="NServiceBus.Config.AzureQueueConfig, NServiceBus.Azure"/>
    <section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
  </configSections>

  <MessageForwardingInCaseOfFaultConfig ErrorQueue="error" />
  <AzureQueueConfig QueueName="sender" ConnectionString="UseDevelopmentStorage=true" PeekInterval="5000" MaximumWaitTimeWhenIdle="60000" />

  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedruntime version="v4.0" />
    <requiredruntime version="v4.0.20506" />
  </startup>
</configuration> 
```

**这是实际的错误消息：**

2012-04-24 07:57:10,973 [1] 错误 NServiceBus.Utils.MsmqUtilities [(null)] <(null)> -**无法创建队列错误@UseDevelopmentStorage=true**或检查其存在。处理仍将继续。System.Messaging.MessageQueueException (0x80004005)：消息队列服务不可用。在 System.Messaging.MessageQueue.Create(String path, Boolean transactional) at NServiceBus.Utils.MsmqUtilities.CreateQueue(String queueName, String account) at NServiceBus.Utils.MsmqUtilities.CreateQueueIfNecessary(Address address, String account)

**编辑：**在初始化中添加 .MessageForwardingInCaseOfFault() 纠正了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:09:19.357

看起来 AsA_Server 假设 msmq，猜你必须手动配置进程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T21:50:37.390

将 .MessageForwardingInCaseOfFault() 添加到 init 方法解决了该问题。仍然感觉有一个潜在的错误，但它正在工作。

我怀疑下面描述了下一个障碍（未正确处理错误），但我将不得不尝试强制验证失败的消息。

如中所述： [Azure 中的 NServiceBus 错误队列](https://stackoverflow.com/questions/10044700/nservicebus-error-queues-in-azure)

# jquery - 每个孩子都会触发 jQuery dragenter 事件

> ID：10297476
> 
> 赞同：5
> 
> 时间：2012-04-24T12:05:16.853
> 
> 标签：jquery, dragenter

我`dragenter`在一个包含一些孩子的对象上绑定了事件。

```
$(document).on('dragenter', '#container', function(e) {
  console.log('dragenter');
}); 
```

当我在它们周围拖动文件移动时，此事件会重复触发。我所期望的是`dragenter`仅在进入`#container`元素时触发，而不是每个孩子。

这是正确的行为吗？我该如何预防？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T12:09:04.917

可以测试触发事件的元素是不是容器：

```
var container = $('#container').get(0);

$(document).on('dragenter', '#container', function(event) {
  if(event.target === container) {
      console.log('dragenter');
  }
}); 
```

或者，如果您不必使用事件委托：

```
$('#container').on('dragenter', function(event) {
    if(event.target === this) {
        console.log('dragenter');
    }  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:07:34.087

尝试添加 stopPropagation

```
$(document).on('dragenter', '#container', function(e) {
  e.stopPropagation();
  console.log('dragenter');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-22T23:46:08.387

我对这个问题的回答是使用[事件捕获](https://stackoverflow.com/questions/4616694/what-is-event-bubbling-and-capturing)而不是事件冒泡。

简而言之，事件捕获从外部元素“涓涓细流”到源元素或直到`e.stopPropagation()`被调用。

事件冒泡使事件从源元素向上通过父元素，直到它到达文档或停止`e.stopPropagation()`。

因此，要应用到拖动输入，您希望外部 div 处理事件，即使它实际上是生成事件的内部 div。

使用事件捕获使 ondragenter 在内部 div 之前在外部 div 中触发。在外部 div 事件处理程序中，您调用 e.stopPropagation。所以内部 div 事件处理程序从未真正运行。

[这](https://stackoverflow.com/questions/17249125/event-capturing-jquery)是使用jquery捕获事件的方法：

```
$("#outerDiv").get(0).addEventListener("ondragenter", function(e){e.stopPropagation()}, true); 
```

注意最后一个参数。

# windows - 神秘的 Apache 正在运行而我没有找到它

> ID：10297483
> 
> 赞同：0
> 
> 时间：2012-04-24T12:05:46.320
> 
> 标签：windows, apache

所以我一直在搞乱不同的服务器包，如 wamp、zend serv 等。现在我已经卸载了所有这些，至少我是这么认为的。安装了 Wamp 的新副本，但我无法启动它，它说我已经启动了 Apache - 我如何才能找到它？

（我也可以浏览 localhost:80）没有问题，但这不是我的新 Wamp ..

我用 netstat -o -n -a | findstr 0.0:80 在 cmd 中查找它正在侦听的 PID，它是 5912，但是我找不到具有该 PID 的处理器。

这到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:47:06.627

是服务惹恼了我！

# facebook-graph-api - 如何从用户那里获取真实大小的个人资料图片？

> ID：10297488
> 
> 赞同：3
> 
> 时间：2012-04-24T12:05:58.040
> 
> 标签：facebook-graph-api, photo, profile

拥有用户 ID xUID，我知道我可以通过以下方式获取个人资料图片：

[http://graph.facebook.com/xUID/picture?type=large](http://graph.facebook.com/xUID/picture?type=large)

问题是从该 URL 返回的图片不是实际大小（大约 200 像素宽）。

我需要获取该用户图片，但实际尺寸。

到目前为止我所做的是：

**1\. 获取用户相册**

[https://graph.facebook.com/me/albums?access_token=xToken](https://graph.facebook.com/me/albums?access_token=xToken)

**2\. 对其进行迭代，并获得 type="profile" 的专辑。**

**3\. 使用该专辑 ID (xAID)，我可以构建 FQL 查询：**

```
SELECT pid, object_id, src_big FROM photo WHERE album_object_id = xAID 
```

**4\. 并在那里获取个人资料图片。**

**5.我需要迭代，找到用户上传的lastone。**

因此，这个过程复杂且耗时。有没有更好/更简单/更快的方法来完成这个？

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T22:48:03.620

[http://graph.facebook.com/xUID/picture?width=720&height=720](http://graph.facebook.com/linda.vedestig/picture?width=720&height=720)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:03:41.770

您只需执行一个 FQL 查询：

```
SELECT pid, object_id, src_big
FROM photo 
WHERE object_id IN 
  (SELECT cover_object_id 
   FROM album 
   WHERE owner=me() AND type="profile") 
```

**src_big**将包含指向配置文件原始源的链接。如果您需要获取特定用户的个人资料图片，请使用特定用户 ID更改**me() 。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T12:27:03.777

好的，按照问题说的做了。浏览相册，并从那里获取第一张个人资料图片。

Julio 的答案不起作用，因为不可能在 WHERE 子句中包含“类型”，因为它不是可索引的列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T00:09:57.210

截至几天前，封面照片也不总是最近的照片。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-24T13:43:14.587

获取cover_object_id：

fql?q=SELECT cover_object_id, type FROM album WHERE owner="userid" AND type="profile"

获取 src_big：

fql?q=SELECT pid, object_id, src_big FROM photo WHERE object_id="覆盖上面得到的对象id"

img src="上面得到的src_big"

这有什么帮助？

# php - 使用 PHP 将 MySQL 数据导出到 CSV 文件

> ID：10297493
> 
> 赞同：0
> 
> 时间：2012-04-24T12:06:07.110
> 
> 标签：php, mysql

我在将 MySQL 数据导出到 CSV 文件时遇到了一个小问题，它会从表中正确打印出数据，但在 csv 文件的末尾它还会打印 html 页面代码！

下面是我的代码

```
$file="billing";
     $i=0;
     $values = mysql_query("SELECT * FROM billing");
     $rown=0;
     while( $row = mysql_fetch_assoc($values)){
     if($rown++==0)
       $csv_output.=implode(";",array_keys($row))."\n";
       $csv_output.=implode(";",array_values($row))."\n";
}

$filename = $file."_".date("Y-m-d_H-i",time());
header("Content-type: text/csv");
header("Content-disposition: csv" . date("Y-m-d") . ".csv");
header( "Content-disposition: filename=".$filename.".csv");
print $csv_output;
} 
```

输出：

```
billing_id;customer_id;user_id;trans_id;transfer;balance;created;text;credit;sender_id      
257;29;;-1;0;500000;1330930434;Payment;500000;      
258;29;;-1;200000;300000;1330930465;Sender ID reg.;0;jkjjhh     
284;32;;-1;0;1000000;1331708884;Payment;1000000;        
285;32;564;268;-120;999880;1331709106;SMS send;;        
286;32;;-1;0;1000000;1331709234;Payment;120;        
287;32;564;269;0;1000000;1331723634;SMS send;;

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">       
    <html xmlns="http://www.w3.org/1999/xhtml">     
    <head>      
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />       
    <title>Client Manger</title>        
    <link rel="stylesheet" href="/style/my-style.css">      
    <form action='./' method='post'>        
    <input type="hidden" name="action" value="billing" class="text">        
    <input type="hidden" name="customer_id" value=""  /> 
```

可能是什么原因？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:13:14.270

您需要拥有`exit;`或`die();`之后，`print $csv_output;`否则页面的其余部分（关闭之外`}`（我怀疑是`if`语句的结尾））将打印（因此包含在 CSV 中）。

* * *

只是一个想法：最好有两个 PHP 文件来处理这个问题：一个输出 CSV，另一个输出表单。不仅可以让您避免使用 die/exit 或非常长的`else`语句，还可以使整体代码更清晰。

* * *

另一种想法是，您最好使用`do...while`任何您希望第一次（并且仅是第一次）发生的事情的时间。所以这可能是一个更好的选择：

```
$row = mysql_fetch_assoc($values);
$csv_output.=implode(";",array_keys($row))."\n";
do
{
    // notice how there is no flag needed!
    // also, you don't need to call 'array_values' when imploding
    $csv_output.=implode(";",$row)."\n";
}while( $row = mysql_fetch_assoc($values)); 
```

# java - 测试休眠查询

> ID：10297494
> 
> 赞同：1
> 
> 时间：2012-04-24T12:06:18.063
> 
> 标签：java, hibernate, intellij-idea

我正在寻找一种简单的方法来测试 Hibernate HQL 标准查询。我试过使用 IntelliJ 的 Hibernate Console 支持，但我[遇到了问题](https://stackoverflow.com/questions/10294318/mappingnotfoundexception-when-running-queries-in-intellij-hibernate-console)。

是否有一个独立的工具可以提供一种简单的方法来测试 HQL 查询？创建会话工厂并执行作为参数传递的查询的简单控制台程序就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:46:13.380

我怀疑是否有可能将这样的工具用作单独的应用程序，您需要指定休眠配置（可能在 Spring Context 中），并且它应该能够找到类及其 HBM 文件。此外，您可能会使用其他 JAR 中的不同 UserType 或类似的东西，所以我什至不会搜索它。

对我来说，最好的工具是你的 IDE 的单元测试框架 + 调试工具——你可以在创建会话的某个点停下来，在这种模式下做任何你想做的事情。例如，在 IntelliJ 中，除了常用表达式之外，您可以在调试期间放置代码片段，这可能有助于您使用 Criteria API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:01:42.277

使用控制台将是我玩 HQL 的首选（例如[Hibernate Tools](http://www.hibernate.org/subprojects/tools.html) for eclipse）。但如果这不起作用，我会使用 JUnit。我的团队使用该策略来测试我们在生产代码中使用的 HQL 查询，并偶尔帮助首先编写查询。

测试设置涉及设置内存数据库（我们使用[HSQLDB](http://hsqldb.org/)，但还有其他）。使用 Hibernate 或原始 SQL 插入数据。然后配置一个 Hibernate SessionFactory 来连接它，并运行你的 HQL。

我们还使用它来测试其他类型的 Hibernate 设置或行为，并且具有作为 Hibernate 上的完整测试套件的附带好处，以便我们可以升级并确信我们需要的任何东西都没有以意想不到的方式发生变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:09:42.297

您可以使用[H2](http://www.h2database.com)（内存中的 JDBC）数据库和用于容器的[jetty](http://jetty.codehaus.org/jetty/)，来创建将在构建的单元测试阶段（或从 JUnit）执行休眠查询的容器和上下文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T12:10:36.337

你可以试试一个`JUnit`方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T14:08:21.770

上次我不得不做这种工作时，我使用[DbUnit](http://www.dbunit.org/)来测试我的数据访问层，我在其中使用 JPA 2.0 和 Hibernate

# ios - Facebook-ios-sdk API 错误代码：11

> ID：10297509
> 
> 赞同：0
> 
> 时间：2012-04-24T12:07:24.527
> 
> 标签：ios, facebook-like

我在 Cocos2d 中使用 Facebook-ios-sdk，但在模拟器屏幕上出现错误“ API 错误代码：11 API 错误描述：此方法已弃用 错误消息：Display=wap 对话框已被弃用。您可以通过禁用来临时启用它们“july_2012”迁移。他们将在 2012 年 7 月 1 日永久停止工作。”

有谁知道如何解决这个错误？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:03:23.247

我完全按照官网[https://developers.facebook.com/docs/mobile/ios/build/](https://developers.facebook.com/docs/mobile/ios/build/)

```
 - (void) applicationDidFinishLaunching:(UIApplication*)application
{
    facebook = [[Facebook alloc] initWithAppId:@"My ID" andDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }   

if (![facebook isSessionValid]) {
    [facebook authorize:nil];
} 
```

}

```
- (void)fbDidLogin {
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
[defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
[defaults synchronize]; 
```

}

```
 - (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [facebook handleOpenURL:url]; 
} 
```

# javascript - 使用 SimpleDateFormatter 格式化日期

> ID：10297515
> 
> 赞同：0
> 
> 时间：2012-04-24T12:07:52.950
> 
> 标签：javascript, date, simpledateformat

我在 javascript 中使用日期函数来获取 currentDate。作为

var currentTime =新日期（）

但它在 IE 和 Firefox 中给了我不同的响应

考虑今天的日期

IE - 2012 年 4 月 24 日星期二 17:05:22 UTC 0530

Mozilla - 2012 年 4 月 24 日星期二 17:05:22 GMT 0530

问题是我想将今天的“字符串”日期转换为“日期”格式 - EEE mmm-dd hh:mm:ss IST yyyy

但是当我在这个浏览器中得到不同的响应时，我没有得到如何应用 simpleDateformatter 将当前日期和时间转换为合适的格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:22:22.247

您可以使用对象日期的功能。例如：

```
var currentTime = new Date();
var date = currentTime.getDate();
var day = currentTime.getDay();
var hours = currentTime.getHours(); 
```

借助此功能，您可以将当前日期和时间转换为合适的格式。

# java - 如何使用java native（cacls）在windows中更改文件权限

> ID：10297516
> 
> 赞同：0
> 
> 时间：2012-04-24T12:08:02.947
> 
> 标签：java, windows, native, file-permissions

我已经尝试过这些语法，但为什么它不起作用？

我真的很高兴你的建议。

之前谢谢。抱歉英语不好。

```
 package priviledge;

import java.io.File;
import java.io.IOException;

/**
 *
 * @author DINA
 */
public class Main {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws InterruptedException, IOException {
     File f = new File("C:/lala/images1.jpg");
     permission(f);
}

public static  void permission(File src) throws InterruptedException, IOException {
// win32 command line variant
Process p = Runtime.getRuntime().exec("cacls 000 " + src.getPath());
p.waitFor(); // p.waitFor() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:17:10.467

因为`cacls`工作方式与`chmod`. 特别是，第一个参数是文件名（这意味着您尝试在名为 的文件上执行此操作`000`）。使用 ACL 的 Windows 使事情进一步复杂化，因为它们不太适合三个八进制数。

查找文档`cacls`（只需在命令提示符下键入）并修复您的命令行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:51:25.923

对于 cacls，组与用户相同，例如，要授予 ABC 组完全权限，您可以键入“cacls 文件名 /g ABC:F”您可以查看有关 cacls 文档的更多详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-19T01:57:18.840

我还在从事一个涉及更改文件夹权限的项目。我尝试了很多方法，但都没有达到我的预期，所以我想出了一个新的想法。为此，您需要有关批处理文件的基本知识，

我想更改文件夹的权限，所以，这就是我所做的：

创建一个文本文件，在该文件中编写命令，将其转换为批处理文件，并使用以下命令执行它：

```
 File file = new File("server.bat");
    Desktop.getDesktop().open(file);
```

（适用于 java 1.6 或更高版本），删除了该批处理文件。

这样做可能还有很长的路要走，但是在这种方法中，可以一次执行任意数量的命令。使用这种方法，您不必担心工作目录，因为您可以在批处理文件中更改它。这可能是个坏主意，我是 Java 新手，但我告诉了你我的想法。

# mysql - 可以不使用 $ this->query() 进行查询吗？

> ID：10297532
> 
> 赞同：0
> 
> 时间：2012-04-24T12:09:47.500
> 
> 标签：mysql, cakephp-2.0

我在 mysql 中有更多查询，但我不使用*$this->query()*，因为我不需要创建数组。在cakephp 有什么办法吗？函数*this->query*强制遍历模型。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:59:55.610

您可以尝试使用[DboSource 查询方法](http://api13.cakephp.org/class/dbo-source#method-DboSourcequery)

# algorithm - 有多少个不同的序列，每对相邻的数字之差大于 1

> ID：10297535
> 
> 赞同：3
> 
> 时间：2012-04-24T12:10:00.493
> 
> 标签：algorithm

我只是发现这样的问题

“给你N个不同的整数，你知道有多少个不同的序列，每对相邻的数字之差大于1吗？”

当整数为“1 2 3”时，答案为零，当整数为“5 3 1”时，答案为6，对于“1 3 5”“1 5 3”“3 1 5”“ 3 5 1" "5 1 3" "5 3 1" 满足问题，我只是尝试了所有我能做的但我无法解决它，所以我的问题是，如何编写一个算法来解决它。

谢谢你。

这是我的程序

```
int n;bool vi[30];int a[30];int b[30];int counter = 0;
void dfs(int k)
{
    if ( k == n)
    {
        for (int i = 2; i <= n; i ++)
            if (fabs(b[i] - b[i - 1]) <= 1) return ;
        counter ++;
        return ;
    }
    for (int i = 0; i < n; i ++)
    {
    if (!vi[i])
    {
        b[k + 1] = a[i];
        vi[i] = true;
        dfs(k + 1);
        vi[i] = false;
        }
    }
}
int main (void)
{
        cin >> n;
        for (int i = 0; i < n; i ++)
            cin >> a[i];
        memset(vi, 0, sizeof(vi));
        for (int i = 0; i < n; i ++)
        {
            vi[i] = true;b[1] = a[i];dfs(1);vi[i] = false;
        }
        cout << counter << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:07:01.050

“有多少不同的序列......”这个问题的答案可以在不列举每个组合的情况下解决。这是一件好事，因为`25!`大约是 1.55 x 10^24，或者比*任何*现有计算机在一秒钟内枚举的多得多。或者一年之内。

这是一道数学题，特别是组合数学题。有关如何解决问题的信息，请参阅[http://en.wikipedia.org/wiki/Combinatorics](http://en.wikipedia.org/wiki/Combinatorics)和可能的[http://en.wikipedia.org/wiki/Combinations 。](http://en.wikipedia.org/wiki/Combinations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:29:48.560

似乎“中间相遇”原则可以提供合理的工作时间。

草图：

将数字列表分成相等的部分（奇数长度为 +-1）。有 C(N, N div 2) 变体。

计算所有固定的最后和第一个元素的前半部分和后半部分的有效排列数（递归）。为兼容的最后一个元素和第一个元素相乘。

编辑：**发现更可靠的变体**：

让我们 FullSet = (A, B, C, D) 计算有效排列，从 A 开始，我们应该计算没有 A 的集合 (B, C, D) 的有效排列，从值开始，与 A 兼容。同样如此对于有效的排列，从 B 开始等等......

我最初编写了递归函数来访问所有初始值并计算没有这些值的集合的有效排列。它仅适用于小型套装。

然后我使用记忆来记住组合 [InitialValue, Set] 的计数（以避免对同一集合重复计算）。这就是自上而下的动态规划。

最后，我将动态编程从自上而下转变为升序风格——这是可能的，因为我们可以按顺序填充记忆表。

复杂度为 O(N^2 * 2^N)，内存消耗为 O(N * 2^N)，因为我们应该（几乎）检查完整集的所有 2^N 个子集。所以我可以对 N <= 20 使用这种方法（如果 Int64 类型对 Count 来说足够了）。

德尔福代码：

```
var
  A: TArray<Byte>;
  Memo: array of array of Int64;
  N, Mask, msk, index, i: Integer;
  Count: Int64;
  OnlyOneOneBit: Boolean;

begin
  A := TArray<Byte>.Create(1, 2, 4, 5);

  N := Length(A);
  Mask := (1 shl N) - 1;//binary 000111111 with n ones

  SetLength(Memo, 1 shl N {2^N}, N);

  for msk := 1 to Mask do begin // all possible subsets, excluding empty one
    OnlyOneOneBit := 0 = (msk and (msk - 1));
    for index := 0 to N - 1 do
       if OnlyOneOneBit then
         Memo[msk, index] := (msk shr index) and 1 // 1 if indexth bit = 1 else 0
       else if 0 <> ((msk shr index) and 1) then begin
         Count := 0;
         for i := 0 to N - 1 do
           if Abs(A[i] - A[index]) > 1 then //compatible numbers
              Count := Count + Memo[msk xor (1 shl index), i];
     //use previous result for the set without index element, starting with ith
         Memo[msk, index] := Count;
       end;
  end;

  Count := 0;
  for index := 0 to N - 1 do
    Count := Count + Memo[Mask, index]; 
```

使用示例 (1, 2, 4, 5) 的结果是 8 手动检查：1425 1524 2415 2514 4152 4251 5142 5241

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:07:03.387

为了比枚举所有排列并检查它们的 O(n!) 方法更快地找到解决方案 - 我会注意到这个问题是计算图 (V, E) 上所有[哈密顿路径](http://mathworld.wolfram.com/HamiltonianPath.html)的一个实例，其中 V 是原始列表的成员和 E 是连接可以相邻的成员的边。（所以你的第二个例子是 V={1,3,5} 和 E={(1,3),(3,5),(1,5)}。）

我不知道您将如何有效地计算哈密顿路径，但也许这是解决问题的方法。

# spring - 将 Spring 安全 ACL 存储到 nosql 结构

> ID：10297539
> 
> 赞同：1
> 
> 时间：2012-04-24T12:10:11.467
> 
> 标签：spring, spring-security, cassandra, acl

我从事一个使用 Spring Security 的项目。我想使用 ACL 机制来管理域对象的安全性。

问题是我的项目使用 Cassandra 和弹性搜索，所以没有 sql 数据库。

有没有办法将 spring security ACL 存储到 nosql 结构（cassandra）或索引器（弹性搜索）中，以避免专门为 ACL 创建关系数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:25:33.490

我认为没有针对 Spring 安全域 ACL 的 nosql 数据结构的实现。如果您想自己实现一个，这应该很简单。开始查看`MutableAclService`和`LookupStrategy`接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T14:27:33.173

我目前正在寻找可能已经存在的东西，并在 GitHub [spring-acl-cassandra](https://github.com/RigasGrigoropoulos/spring-security-acl-cassandra "spring-security-acl-cassandra")上遇到了这个项目。（我还没有尝试过这个项目。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-09T16:53:32.673

是的，现在有这样一个项目，专门把Spring ACL连接到Cassandra：

[https://github.com/RigasGrigoropoulos/spring-security-acl-cassandra](https://github.com/RigasGrigoropoulos/spring-security-acl-cassandra)

# iphone - 无法从我的 masterView 将值传递给 detailView

> ID：10297540
> 
> 赞同：0
> 
> 时间：2012-04-24T12:10:11.400
> 
> 标签：iphone, ios, ipad, uisplitviewcontroller

我在masterView 中有一个表，还有一个detailView，我在detailView 中取了一个id、set 属性和综合。在 masterView 的 didSelectrowAtIndexPath 方法中

```
detailViewObj.detailItem = [array objectAtIndex:indexPath.row]; 
```

方法详解查看

```
- (void)setDetailItem:(id)newDetailItem {
if (detailItem != newDetailItem) {
    [detailItem release];
    detailItem = [newDetailItem retain];
}} 
```

没有被调用....任何帮助？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:12:00.323

直接调用它：

```
[detailViewObj setDetailItem: [array objectAtIndex:indexPath.row]]; 
```

# objective-c - 如何使用 NSManagedObjectSubClass 从 CoreData Base 获取所有记录？

> ID：10297542
> 
> 赞同：13
> 
> 时间：2012-04-24T12:10:24.667
> 
> 标签：objective-c, ios, core-data, nsmanagedobject, nsmanagedobjectcontext

我正在尝试`CoreData`在`ios`应用程序中实现，现在我想从实体中获取所有记录`MUSTHAFA`

```
 My  NSManagedObjectedSubClass is MUSTAHFA 
```

**MUSTHAFA.m**

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface MUSTHAFA : NSManagedObject {
@private
}
@property (nonatomic, retain) NSString * FirstName;
@property (nonatomic, retain) NSNumber * Age;
@property (nonatomic, retain) NSString * Location;
@property (nonatomic, retain) NSString * LastName;

@end

#import "MUSTHAFA.h"

@implementation MUSTHAFA
@dynamic FirstName;
@dynamic Age;
@dynamic Location;
@dynamic LastName;

@end 
```

**向核心数据添加记录**

```
-(void)AddRecordToCoreData{

    //NSLog(@"______ ADD Core Data Implementaion");  
    MUSTHAFA *event = (MUSTHAFA *)[NSEntityDescription insertNewObjectForEntityForName:@"MUSTHAFA" inManagedObjectContext:managedObjectContext];
    [event setLastName:@"JOHN"];
    [event setFirstName:@"JOSE "];
    [event setLocation:@"IDUKKI "];
    [event setAge:[NSNumber numberWithInt:25]];    
    NSError *error;
    if (![managedObjectContext save:&error]) 
        {       
        NSLog(@"Error..%@",error);
    }
       else
       {
        NSLog(@"Data added to MUSTHAFA ");
       }      
} 
```

从核心数据中检索所有值，就像从 dbTable 中选择 *；

```
-(void)FetchRecordFromCoreData:(id)data1{

     //NSLog(@"______ Fetch Core Data Implementaion");  
    MUSTHAFA *event = (MUSTHAFA *)[NSEntityDescription insertNewObjectForEntityForName:@"MUSTHAFA" inManagedObjectContext:managedObjectContext];

   //USING event how can fetch all record from Data base;

} 
```

USING 事件（MUSTAHFA 的实例）如何从数据库中获取所有记录？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-24T12:27:45.577

```
NSManagedObjectContext *context = //Get it from AppDelegate

NSFetchRequest *request = [[NSFetchRequest alloc]initWithEntityName:@"MUSTHAFA"];

NSError *error = nil;

NSArray *results = [context executeFetchRequest:request error:&error];

if (error != nil) {

   //Deal with failure
}
else {

   //Deal with success
}

[request release]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-01-06T09:41:24.180

```
AppDelegate *delegate = [UIApplication sharedApplication].delegate;

NSManagedObjectContext *context =[delegate managedObjectContext];

NSFetchRequest *request = [[NSFetchRequest alloc]initWithEntityName:@"Channels"];

NSError *error = nil;
NSArray *results = [context executeFetchRequest:request error:&error];

ChannelDBArray=[[NSMutableArray alloc]init];

for (NSManagedObject *obj in results) {

    NSArray *keys = [[[obj entity] attributesByName] allKeys];
    NSDictionary *dictionary = [obj dictionaryWithValuesForKeys:keys];

}
if (error != nil) {

    //Deal with failure
}
else {

    //Deal with success
} 
```

# java - 使用 Java 7 的 JNLP 应用程序 - 未启动

> ID：10297544
> 
> 赞同：0
> 
> 时间：2012-04-24T12:10:29.967
> 
> 标签：java, jnlp, java-7, java-web-start

我有一个摇摆应用程序，它可以作为桌面应用程序正常工作，但是当使用 jnlp 启动时相同的应用程序，没有启动而不显示任何错误

我已经使用 Java7 使用类编译并创建了一个 jar，然后在创建一个 jnlp 文件后，使用 javaws 命令作为

```
javaws d:\jnlp1\val.jnlp 
```

然后出现“Java 7”标志，显示 jnlp 正在加载……大约 10 秒后，javaws 退出，没有任何日志或错误

有人可以让我知道如何解决这个问题......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:32:22.890

问题在于缺少 jar，当添加 jar 时，该应用程序可以工作。

# objective-c - UISplitViewControllers detailView 中的 presentModalViewController 未全屏显示视图

> ID：10297546
> 
> 赞同：11
> 
> 时间：2012-04-24T12:10:32.493
> 
> 标签：objective-c, ios, ipad

我在 mainViewControllers 视图中添加了 UISplitViewController 视图，代码如下。

```
 documentsRootViewController = [[DocumentsRootViewController alloc] initWithStyle:UITableViewStylePlain];
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:documentsRootViewController];
    documentsRootViewController.title = @"Document List";

    documentDetailView = [[DocumentsDetailView alloc] initWithNibName:@"DocumentsDetailView" bundle:nil];
    documentsRootViewController.detailViewController = documentDetailView;

    docSplitViewController = [[UISplitViewController alloc] init];
    docSplitViewController.viewControllers = [NSArray arrayWithObjects:navigationController, documentDetailView, nil];
    docSplitViewController.delegate = documentDetailView;

    CGRect splitViewFrame = CGRectMake(0, 0, cetralArea.frame.size.width, cetralArea.frame.size.height);         
    docSplitViewController.view.frame = splitViewFrame;
    [cetralArea addSubview:docSplitViewController.view]; 
```

现在我想要的是从 UISplitViewController 的 DetailView 中呈现一个 ViewController 我正在尝试在 DetailViewControllers 中按以下方式进行操作 Click Me！按钮单击。

![在此处输入图像描述](../Images/f567e2710cda5fef84c00e08bb68f981.png)

```
- (IBAction) buttonClicked:(id)sender
{
    NSString *phrase = nil; // Document password (for unlocking most encrypted PDF files)    
    NSArray *pdfs = [[NSBundle mainBundle] pathsForResourcesOfType:@"pdf" inDirectory:nil];    
    NSString *filePath = [pdfs lastObject]; assert(filePath != nil); // Path to last PDF file

    ReaderDocument *readerDocument = [ReaderDocument withDocumentFilePath:filePath password:phrase];    
    if (readerDocument != nil) // Must have a valid ReaderDocument object in order to proceed with things
    {
        ReaderViewController *rViewController = [[ReaderViewController alloc] initWithReaderDocument:readerDocument];        
        rViewController.delegate = self; // Set the ReaderViewController delegate to self              

        [self presentModalViewController:rViewController animated:NO];        
    } 
} 
```

但这导致了尴尬的演示

![在此处输入图像描述](../Images/a62eddf9e2f7667c5e05233a6c89a011.png)

任何人都可以提出这里的问题，提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:46:06.430

在您的屏幕截图中，我无法确定您的拆分视图控制器左侧和右侧（详细视图）位于何处。更改视图的背景颜色以区分位置。看来你和他们有问题。

无论如何，您可以尝试从 splitView 而不是 Detail 呈现模态视图控制器。

```
[splitViewController presentModalViewController:rViewController animated:NO]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T14:48:44.870

我相信这里的技巧是改变你想要以模态方式显示的视图控制器的 modalPresentationStyle（以及可选的 modalTransitionStyle）：

```
 ReaderViewController *rViewController = [[ReaderViewController alloc] initWithReaderDocument:readerDocument];        
    rViewController.delegate = self; // Set the ReaderViewController delegate to self              

    rViewController.modalPresentationStyle = UIModalPresentationFullScreen;
    rViewController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;     
    [self presentViewController:rViewController animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T15:53:05.937

我遇到了同样的问题（在 iOS 5.1 中）。将 modalPresentationStyle 设置为 UIModalPresentationPageSheet，它应该可以按预期工作。

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    rViewController.modalPresentationStyle = UIModalPresentationPageSheet;
    rViewController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T06:17:45.963

我发现你给出的 splitview 大小如`cetralArea.frame.size.width`.

而不是简单地直接给出你想给Splitview的大小。

希望它对你有用。

# java - 将 Jackjson JSON 对象从 JSP 传递到 JavaScript 函数

> ID：10297548
> 
> 赞同：0
> 
> 时间：2012-04-24T12:10:36.103
> 
> 标签：java, javascript, json

我有一个存储在数据库中的 JSON 字符串。在我的一个 JSP 页面中，我检索了这个字符串，并且我希望能够将字符串或 JSON 对象传递给 Javascript 函数。该功能只是用于测试目的

```
function test(h){

alert(h);
} 
```

现在我可以很好地从数据库中检索 JSON 字符串，我已经将它打印到屏幕上以确保它得到它，但是当我像这样传递它时

```
 <input  type="button" 
                                name="setFontButton" 
                                value="Set" 
                                class="form_btn_primary"
                                onclick="test('<%=theJSON%>'); return false;"/> 
```

没发生什么事。我用萤火虫检查出了什么问题，它说有无效字符。

所以我然后尝试像这样传递JSON对象

```
Widget widg = mapper.readValue(testing.get(0), Widget.class); 
```

然后传入

```
onclick="test('<%=widg%>'); return false;"/> 
```

现在这将在没有错误的情况下传递，并且它会提醒对象名称，但是我无法解析它。对象与存储小部件类的包名称类似，如下所示

```
com.package.mode.Widget@ba8af9 
```

我尝试使用 Stringify，但这似乎不适用于此 Jackson JSON 对象。

在这一切都失败之后，我尝试了从数据库中获取字符串并将其编码为 base64 的最后手段。但是，如果我这样做，这也会失败

```
String test = Base64.encode(theString); 
```

并将其传递进去。但是，如果我这样做，将其打印到屏幕上，然后复制打印出来的内容，然后通过它发送它，所以不太明白为什么会这样。

所以有人可以告诉我我做错了什么。我尝试了很多不同的解决方案，但没有任何效果。

JSON字符串像这样存储在数据库中

> { "id":1, "splits":[ { "texts":[ { "value":"Test", "locationX":3, "locationY":-153, "font":{ "type":"正常”，“大小”：“中”，“粗体”：false，“颜色”：“5a5a5a”，“斜体”：false } } ] } ] }

如果有人能指出我的直接方向，将不胜感激！

编辑：

如果其他人有同样的问题，请执行此操作以将 JSON 从 JSP 传递到 JS 函数

```
<%=theJSON.replaceAll("\"", "\\\'")%> 
```

这允许您传入 JSON，

然后用 JavaScript 将其恢复为正常的 JSON 格式

```
theJSON = theJSON.replace(/'/g,'"'); 
```

应该可以正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:17:51.390

我认为包裹 onclick 的双引号和 JSON 中的双引号的组合可能会让您感到困惑。把它想象成你手动输入了 JSON —— 它看起来像这样：

```
onclick="test('{ "id":1, "splits":[ { "texts":[ { "value":"Test", "locationX":3, "locationY":-153, "font":{ "type":"Normal", "size":"Medium", "bold":false, "colour":"5a5a5a", "italics":false } } ] } ] }'); return false;" 
```

并且之前打开的双引号`id`实际上将关闭后面的双引号`onclick=`（您应该能够通过查看页面源来验证这一点）。尝试将 onclick 指定为：

```
onclick='test(\'<%=theJSON%>\'); return false;' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:15:17.453

您可以按照以下步骤

1.  获取乔恩字符串
2.  使用 jackson 或任何其他 JSON jar 文件，将 json 字符串转换为 json 数组并使用 out.println 打印字符串。
3.  调用这个打印json字符串的jsp
4.  签入萤火虫，您将能够看到您的 json 。
5.  如果 Json 字符串不打印，则您的 json 格式可能存在一些问题。

这是一个很好的 json 美化网站，[http://jsbeautifier.org/](http://jsbeautifier.org/)，确实使字符串易于阅读。

谢谢阿比

# excel - 匹配 Excel VBA 中的两个数据列表并导出到新工作表

> ID：10297551
> 
> 赞同：2
> 
> 时间：2012-04-24T12:10:48.220
> 
> 标签：excel, export, matching, vba

我每个月都会收到一个 excel 文件，并且必须将其中的一部分导出到一个新文件中。我有一个标识符编号列表，我正在尝试将所选列表中的编号列表与完整文件匹配，然后将相关数据行导出到新工作表。

```
Sub Run_All_Macros()
Application.ScreenUpdating = False
Sheets.Add.Name = "Output"
Call Convert_to_Numbers
Call Highlight_Selected_Contractors
End Sub

'Original Spreadsheet is formatted incorrectly
'Convert PSD Codes to Numbers
Sub Convert_to_Numbers()
Dim xCell As Range
Range("A2:A2500").Select
    For Each xCell In Selection
    xCell.Value = CDec(xCell.Value)
    Next xCell
End Sub

'Highlight Selected Contractors
Sub Highlight_Selected_Contractors()
Dim Full, Selection, Code, SelectedCode As Range
Worksheets("Sheet1").Select
'Set all cells in Column A Sheet 1 to Full
Set Full = Worksheets("Sheet1").Range("A1", Range("A1").End(xlDown))
'Set all cells in Column A Sheet 2 to Selection
Worksheets("Sheet2").Select
Set Selection = Worksheets("Sheet2").Range("A1", Range("A1").End(xlDown))
'If the numbers match highlight the cell
For Each Code In Full
    For Each SelectedCode In Selection
        If Code.Value = SelectedCode.Value Then
       *** Code.Select
        Selection.Copy
        Sheets.Select ("Output")
        ActiveSheet.Paste
    End If
Next SelectedCode
Next Code
End Sub 
```

执行此代码后，“输出”中的 A 列用 A2:A2500 中的零填充。从弄乱断点开始，我发现问题出在我放置的位置***但我不确定那里写的内容有什么问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:40:19.690

上面的代码几乎没有错误，我也有一些建议，最后是代码。

**错误**

**1）** `Sheets.Add.Name = "Output"`如果已经有一个名为“输出”的工作表，此行会给您一个错误。先删除工作表，然后再创建它。您一定想知道，如果工作表不存在，那么我该如何删除它？对于这种情况，您可以使用`On Error Resume Next`在大多数情况下应该避免的情况。

**2)**使用范围时，请始终指定您所指的工作表，否则 Excel 将始终假定您指的是“ActiveSheet”。当您意识到`Sub Convert_to_Numbers()`正在考虑`Output`工作表时，您希望操作发生在“输出”工作表中。

**3)** `Dim Full, Selection, Code, SelectedCode As Range`正如我之前的评论中提到的，避免使用 Excel 保留字作为变量。与 VB.Net 不同的是，如果您像在 VBA 中那样声明变量，那么只有最后一个变量将被声明为`Range`. 其他 3 个将被声明为变体。VB 默认变量为 Variant 类型。Variant 类型变量可以保存任何类型的数据，从字符串、整数、长整数、日期、货币等。默认情况下，“Variants”是“最慢”类型的变量。还应避免变体，因为它们会导致可能的“类型不匹配错误”。并不是说我们永远不应该使用变体。仅当您不确定它们对代码执行的影响时才应使用它们。

**4)**避免使用 , , 等词`.ActiveCell`。`Selection`它们`Select`是`Activate`导致错误的主要原因。它们还会减慢您的代码速度。

**建议**

**1）**不是每次都使用 Sheets("WhatEver") ，而是将其存储在一个变量中，然后使用该变量。将减少您的代码。

**2）**缩进你的代码:)它更容易阅读

**3)**将任务组合在一起。例如，如果您必须处理与特定工作表有关的事情，那么请将其放在一起。如果需要，它更易于阅读和修改。

**4）**获取实际范围，而不是硬编码您的值。`Range("A2:A2500")`是一个经典的例子。直到 2500 年，您是否总是有数据？如果它更少或更多怎么办？

**5)** `End(xlDown)`如果中间有空白单元格，将永远不会给你最后一行。要获取列中的最后一行，例如“Sheet1”中的 A，请使用此

```
Sheets("Sheet1").Range("A" & Rows.Count).End(xlUp).Row` 
```

**6)**您可以使用`WorksheetFunction CountIf()`. 应尽可能避免循环，因为它们会减慢您的代码。

**7)**使用适当的错误处理。

**8)**注释您的代码。知道特定代码或部分在做什么要容易得多。

**代码**

```
Option Explicit

Sub Run_All_Macros()
    Dim ws1I As Worksheet, ws2I As Worksheet, wsO As Worksheet
    Dim ws1LRow As Long, ws2LRow As Long, wsOLr As Long
    Dim xCell As Range, rFull As Range, rSelection As Range
    Dim rCode As Range, rSelectedCode As Range

    On Error GoTo Whoa '<~~ Error Handling

    Application.ScreenUpdating = False

    '~~> Creating the Output Sheet
    Application.DisplayAlerts = False
    On Error Resume Next
    Sheets("Output").Delete
    On Error GoTo 0
    Sheets.Add.Name = "Output"
    Application.DisplayAlerts = True

    '~~> Working with 1st Input Sheet
    Set ws1I = Sheets("Sheet1")
    With ws1I
        '~~> Get Last Row of Col A
        ws1LRow = .Range("A" & Rows.Count).End(xlUp).Row
        '~~> Set the range we want to work with
        Set rFull = .Range("A1:A" & ws1LRow)
        '~~> The following is not required unless you want to just format the sheet
        '~~> This will have no impact on the comparision. If you want you can
        '~~> uncomment it
        'For Each xCell In .Range("A2:A" & ws1LRow)
            'xCell.Value = CDec(xCell.Value)
        'Next xCell
    End With

    '~~> Working with 2nd Input Sheet
    Set ws2I = Sheets("Sheet2") '<~~ Input Sheet 2
    ws2LRow = ws2I.Range("A" & Rows.Count).End(xlUp).Row
    Set rSelection = ws2I.Range("A1:A" & ws2LRow)

    '~~> Working with Output Sheet
    Set wsO = Sheets("Output")
    wsO.Range("A1") = "Common values"
    wsOLr = wsO.Range("A" & Rows.Count).End(xlUp).Row + 1

    '~~> Comparison : If the numbers match copy them to Output Sheet
    For Each rCode In rFull
        If Application.WorksheetFunction.CountIf(rSelection, rCode.Value) > 0 Then
            rCode.Copy wsO.Range("A" & wsOLr)
            wsOLr = wsOLr + 1
        End If
    Next rCode

    MsgBox "Done"

LetsContinue:
    Application.ScreenUpdating = True
    Application.DisplayAlerts = True

    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

如果您仍然遇到任何错误，请告诉我:)

高温高压

# maven - 指定新的 Maven 存储库

> ID：10297553
> 
> 赞同：0
> 
> 时间：2012-04-24T12:11:00.500
> 
> 标签：maven

再会！

我在项目的 pom.xml 文件中指定了一个新的存储库。所以在标签之前我添加了这个配置

```
<repositories>
   <repository>
        <id>maven-db-plugin-repo</id>
        <name>maven db plugin repository</name>
        <url>http://maven-db-plugin.googlecode.com/svn/maven/repo</url>
        <layout>default</layout>
    </repository>
  </repositories> 
```

就像[这里](http://code.google.com/p/maven-db-plugin/)指出的 但是，当我尝试执行时`mvn db:update`，我收到了这个错误：

```
[ERROR] No plugin found for prefix 'db' in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories [local (/home/andriy/.m2/repository), central (http://repo.maven.apache.org/maven2)] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/NoPluginFoundForPrefixException 
```

关于我做错了什么的任何建议？谢谢

**更新**

我还添加了这种依赖

```
<dependency> 
  <groupId>com.googlecode</groupId> 
  <artifactId>maven-db-plugin</artifactId> 
  <version>1.3</version> 
  <type>jar</type>
</dependency> 
```

仍然收到这些警告：

```
[WARNING] The POM for com.googlecode:maven-db-plugin:jar:1.3 is missing, no dependency information available
[WARNING] Failed to retrieve plugin descriptor for com.googlecode:maven-db-plugin:1.3: Plugin com.googlecode:maven-db-plugin:1.3 or one of its dependencies could not be resolved: Failed to read artifact descriptor for com.googlecode:maven-db-plugin:jar:1.3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:17:07.773

仅仅添加一个 repo 不足以使插件工作。你也必须在你的 pom 中配置插件。[在项目主页](http://code.google.com/p/maven-db-plugin/)的底部有一个配置 maven-db-plugin 的示例。

maven-sql-plugin 有[更好的文档](http://mojo.codehaus.org/sql-maven-plugin/)。如果它符合您的需求，您可以改用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:46:00.647

我认为您必须具有以下配置：

```
<pluginRepositories>
<pluginRepository>
  <id>maven-db-plugin-repo</id>
  <name>maven db plugin repository</name>
  <url>http://maven-db-plugin.googlecode.com/svn/maven/repo</url>
  <layout>default</layout>
</pluginRepository> 
```

# ajax - 在 dojo 中上传图像

> ID：10297554
> 
> 赞同：0
> 
> 时间：2012-04-24T12:11:00.983
> 
> 标签：ajax, dojo

如何使用 ajax 调用在 Dojo 中上传图像？图像的 url 必须存储到数据库中。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:46:08.870

Dojo 的 xhr 方法不支持二进制数据。您可能想使用[dojox.form.Uploader](http://dojotoolkit.org/reference-guide/1.7/dojox/form/Uploader.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:54:03.283

您可以尝试使用隐藏的 iframe 的方法

```
<form enctype="multipart/form-data" target="magicFrame" action="uploader.php">
    <input type="file" name="image" />
    <input type="submit" />
</form>
<iframe name="magicFrame" id="magicFrame" style="display: none" ></iframe> 
```

这将达到与通过 AJAX 上传图像相同的结果（目前不可行）

# python - 扭曲应用程序中的内存界限

> ID：10297555
> 
> 赞同：1
> 
> 时间：2012-04-24T12:11:05.557
> 
> 标签：python, memory-management, twisted

考虑以下场景：服务器上的一个进程用于处理来自网络连接的数据。Twisted 使这非常容易，`spawnProcess`您可以轻松地`ProcessTransport`在网络端使用您的协议连接。

但是，我无法确定 Twisted 如何处理来自网络的数据的可用速度快于进程对其标准输入执行读取的情况。据我所知，Twisted 代码主要使用内部缓冲区（`self._buffer`或类似的）来存储未使用的数据。这是否意味着来自快速连接（例如，通过本地千兆 LAN）的并发请求可能会填满主内存并导致大量交换，从而使情况变得更糟？如何防止这种情况？

理想情况下，内部缓冲区将具有上限。据我了解，如果操作系统的缓冲区已满，操作系统的网络代码会自动停止连接/开始丢弃数据包，这会降低客户端的速度。（是的，我知道，网络级别的 DoS 仍然是可能的，但这是一个不同的问题）。如果我自己实现它，这也是我将采取的方法：如果内部缓冲区已满，则不要从套接字读取。

在我的情况下，限制最大请求大小也不是一个选项，因为该服务应该能够处理任意大小的文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T17:24:22.340

解决方案有两个部分。

一部分称为**生产者**。生产者是产生数据的对象。TCP 传输是一个生产者。生产者有几个有用的方法：`pauseProducing`和`resumeProducing`. `pauseProducing`导致传输停止从网络读取数据。 `resumeProducing`导致它再次开始阅读。这为您提供了一种避免在内存中建立尚未处理的无限数据量的方法。当您开始落后时，只需暂停运输即可。当你赶上时，继续它。

另一部分称为**消费者**。消费者是数据进入的对象。TCP 传输也是消费者。但是，对于您的情况，更重要的是，子进程传输也是消费者。消费者有几个方法，其中一种对你特别有用：`registerProducer`。这告诉消费者哪个生产者数据来自它。消费者可以调用它们`pauseProducing`并`resumeProducing`根据其处理数据的能力。当传输（TCP 或进程）无法像生产者要求它发送数据那样快地发送数据时，它将暂停生产者。当它赶上时，它会再次恢复它。

您可以[在 Twisted 文档中阅读更多关于生产者和消费者的信息](http://twistedmatrix.com/documents/current/core/howto/producers.html)。

# jquery - 同位素：重置所有组合过滤器

> ID：10297558
> 
> 赞同：13
> 
> 时间：2012-04-24T12:11:13.993
> 
> 标签：jquery, jquery-isotope

我有一个同位素组合过滤器设置，其中包含许多数据过滤器组，每个过滤器组都有一个休息/显示所有列表项：

```
<li><a href="#" data-filter="*">Show all</a></li> 
```

是一种重置所有数据过滤器组的方法 - 一个“全部重置”链接吗？

我当前的 javascript 是：

```
 var $container = $('.content ul.sort'),
            filters = {};

        $container.isotope({
          itemSelector : '.dynamic-filter'
        });

        // filter buttons
        $('.filter a').click(function(){
          var $this = $(this);
          // don't proceed if already selected
          if ( $this.hasClass('selected') ) {
            return;
          }

          var $optionSet = $this.parents('.option-set');
          // change selected class
          $optionSet.find('.selected').removeClass('selected');
          $this.addClass('selected');

          // store filter value in object
          // i.e. filters.color = 'red'
          var group = $optionSet.attr('data-filter-group');
          filters[ group ] = $this.attr('data-filter-value');
          // convert object into array
          var isoFilters = [];
          for ( var prop in filters ) {
            isoFilters.push( filters[ prop ] )
          }
          var selector = isoFilters.join('');
          $container.isotope({ filter: selector });

          return false;
        }); 
```

有任何想法吗？

<-- 编辑-->

似乎找到了我自己问题的答案：

```
 $(".isotope-reset").click(function(){
        $(".content ul.sort").isotope({
            filter: '*'
        });
    }); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-12-03T14:22:17.810

由于发帖人没有将他的答案放在答案中，所以这里是为那些遇到这个问题但看不到答案的人准备的

* * *

以下代码重置同位素过滤器：

```
$(".isotope-reset").click(function(){
    $(".content ul.sort").isotope({
        filter: '*'
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-13T00:29:15.123

我正在寻找类似的东西，我想我会把答案放在这里，以防其他搜索者遇到这个问题。我对海报提到的解决方案的问题是，至少对我来说，它没有进行真正的重置。我希望按钮和过滤器一样重置。此外，我遇到了一个奇怪的错误，在按下重置按钮后，我的过滤器无法正常工作。

下面的脚本解决了我所有的问题（在这个答案的日期，大声笑）。来源：[https ://github.com/metafizzy/isotope/issues/928](https://github.com/metafizzy/isotope/issues/928)

```
 var $anyButtons = $('.filters').find('button[data-filter=""]');
  var $buttons = $('.filters button');

  $('.button--reset').on( 'click', function() {
    // reset filters
    filters = {};
    $grid.isotope({ filter: '*' });
    // reset buttons
    $buttons.removeClass('is-checked');
    $anyButtons.addClass('is-checked');
  }); 
```

# mercurial - 如何判断拉入 Mercurial 后是否需要合并？

> ID：10297562
> 
> 赞同：5
> 
> 时间：2012-04-24T12:11:19.423
> 
> 标签：mercurial, branch, head

我有一个带有一个头的存储库的克隆，既漂亮又简单。在引入其他人的更改后，我有一个脚本来计算人头以查看是否需要合并。但是如果对方做了一个分支并合并它，“hg head”显示两个头，脚本认为它必须合并。真正的测试应该是什么？

前：

```
0 - 1 
```

后：

```
0 - 1 - 2 - 3
    \  /
     4 (branch) 
```

这不需要合并。但简单比较前后正面的数量会表明它确实如此。为什么在这种情况下，Mercurial 甚至会显示不止一个头像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:17:09.590

而不是调用`hg heads`只`hg heads --topo`显示*拓扑*头的呼叫 - 那些没有孩子的人。您会看到他们合并分支的头部，但由于它已合并，因此它不是拓扑头部并且`--topo`会抑制它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T13:30:17.810

如果您的分支名称中没有空格，则可以使用此脚本：

```
#!/bin/sh

for b in $(hg branches -q); do
    h=$(hg heads --template "." $b)
    if test ${#h} -gt 1; then
        echo "Branch $b needs merging, it has ${#h} heads"
    fi
done 
```

它遍历每个打开的分支并计算其上的正面数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:29:12.797

您可以在拉取之前克隆您的存储库，然后使用`--new-branch`. 如果这抱怨新的头，你需要合并。

# ruby-on-rails - Rails 资产管道和 javascript 文件 - 维护换行符以帮助调试

> ID：10297564
> 
> 赞同：5
> 
> 时间：2012-04-24T12:11:24.533
> 
> 标签：ruby-on-rails, asset-pipeline, uglifyjs

我最近从[Jammit](http://documentcloud.github.com/jammit/)迁移到[Rails Asset Pipeline](http://guides.rubyonrails.org/asset_pipeline.html)。除了一些初期问题外，一切都运行良好。

但是，我最近开始在生产中遇到一些脚本错误，并意识到我几乎不可能调试它们。我之前已将 Jammit 配置为保留换行符，否则会删除 javascript 文件中的所有空格。这是为了确保如果我看到运行时错误，我将能够找到有问题的行并希望找出问题所在。使用 Rails 资产管道和默认的 :uglifier 压缩器，似乎所有空格都被删除了，包括换行符，因此我的脚本错误并没有告诉我代码中的问题出在哪里。

有谁知道配置 Rails 资产管道以保留换行符以便可以调试代码？

马特

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T12:30:26.340

设置在你身上`production.rb`：

```
config.assets.compress = false 
```

并且跑步`rake assets:precompile`不会使您的资产变得丑陋。

**升级版：**

所谓的压缩意味着（除其他外）：删除换行符和注释。但是，如果您想混淆变量并保存一些可读性，请使用：

```
# in production.rb
config.assets.compress = true
config.assets.js_compressor = Uglifier.new(:beautify => true) if defined? Uglifier 
```

在这里查看更多选项：[https](https://github.com/lautis/uglifier) ://github.com/lautis/uglifier 。

# exception - 如何自定义 Symfony 异常页面？

> ID：10297565
> 
> 赞同：2
> 
> 时间：2012-04-24T12:11:24.910
> 
> 标签：exception, error-handling, symfony, twig

当 symfony 2 出现异常时，它将输出以下页面：

```
Oops! An Error Occurred

The server returned a "404 Not Found".

Something is broken. Please e-mail us at [email] and let us know what you were doing when this error occurred. We will fix it as soon as possible. Sorry for any inconvenience caused. 
```

1.  该页面的模板在哪里？
2.  我在哪里可以配置要在此处显示的电子邮件？

编辑：我不是在问如何覆盖这里看到的模板：http: [//symfony.com/doc/current/cookbook/controller/error_pages.html](http://symfony.com/doc/current/cookbook/controller/error_pages.html)

我在问如何告诉 symfony 我希望它使用的邮件地址（假设它是可能的），我问过模板在哪里，所以我可以看到自己如何做到这一点，以及是否可能。

请回答问题正文而不是标题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:34:42.110

如[官方手册](http://symfony.com/doc/current/cookbook/controller/error_pages.html)中所述，您可以[覆盖其他捆绑包中的模板](http://symfony.com/doc/current/book/templating.html#overriding-bundle-templates)

> 所有的错误模板都存在于 TwigBundle 中。要覆盖模板，我们只需依靠标准方法来覆盖捆绑包中的模板。有关详细信息，请参阅覆盖捆绑包模板。例如，要覆盖显示给最终用户的默认错误模板，请创建一个位于 app/Resources/TwigBundle/views/Exception/error.html.twig 的新模板：

您可以在 TwigBundle 的源代码中找到内置模板，也可以直接[在 github 上](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/TwigBundle/Resources/views/Exception/error.html.twig)找到。在那里你可以看到，这`[email]`是硬编码的。

# coordinates - 搜索场地时地理坐标无效

> ID：10297569
> 
> 赞同：1
> 
> 时间：2012-04-24T12:11:41.530
> 
> 标签：coordinates, foursquare

搜索场地时（意图“浏览”，西南和东北提供）我收到以下错误：

> 无效的地理坐标 (0.400000,0.000000)

这些坐标有什么问题？我认为纬度应该在-90到+90的范围内，经度在-180到+180的范围内......

任何帮助表示赞赏！谢谢，卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:47:17.500

由于[您的坐标](http://maps.google.com/?q=0.400000,0.000000)甚至没有分配给一个国家，所以这个坐标是无效的。尝试在陆地上使用坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T18:48:56.057

这是预期的行为。大多数情况下，人们将 0.00 作为纬度/经度坐标发送给我们，这是因为一些编程错误/错误，例如未初始化的变量。

所以，我们返回一个错误，这样更容易找到错误，而不是默默地返回几乎没有结果。如果您发送 0.00001，它将被视为完全有效，并且指向基本相同的位置。

# zend-framework - Zend Navigation - 渲染子菜单

> ID：10297574
> 
> 赞同：0
> 
> 时间：2012-04-24T12:12:00.780
> 
> 标签：zend-framework, zend-navigation

我在一个 XML 文件中定义我的所有页面，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<configdata>
<nav>
    <dashboard>
        <label>Dashboard</label>
        <module>default</module>
        <controller>dashboard</controller>
        <action>index</action>
        <title>Die Schaltzentrale</title>
    </dashboard>
    <user>
        <label>User</label> 
        <module>default</module>
        <controller>user</controller>   
        <action>index</action>
        <title>Verwaltung der Benutzer</title>

        <userList>                  
            <module>default</module>
            <controller>user</controller>   
            <action>index</action>
            <label>Userliste anzeigen</label>
        </userList>
        <newUser>
            <label>User anlegen</label> 
            <module>default</module>
            <controller>user</controller>   
            <action>new</action>
        </newUser>
        <editUser>
            <label>User bearbeiten</label>  
            <module>default</module>
            <controller>user</controller>   
            <action>edit</action>
        </editUser>
    </user>
</nav>  
</configdata> 
```

在我的引导程序中，我像这样设置导航：

```
 protected function _initNavigation()
    {
        $this->bootstrap('layout');
        $layout = $this->getResource('layout');
        $config = new Zend_Config_Xml(APPLICATION_PATH . '/configs/navigation.xml','nav');
        $view = $layout->getView();
        $navigation = new Zend_Navigation($config);
        $view->navigation($navigation); 
        Zend_Registry::set('Zend_Navigation',$navigation);
    } 
```

此设置使我能够使用以下几行呈现我的主菜单：

```
$partial = array('menu.phtml', 'default');
$this->navigation()->menu()->setPartial($partial);
echo $this->navigation()->menu()->render(); 
```

到目前为止，一切都很好。我现在的问题是渲染一个特定的子菜单。假设我想渲染一个包含用户控制器所有操作的菜单。我试图用以下方式渲染它：

```
$page = $this->navigation()->findOneBy('controller','user');
echo $this->navigation()->menu()->renderMenu($page); 
```

但是我没有输出。我还尝试通过设置 minDepth 或 maxDepth 选项来获得输出，但没有成功。有没有人支持我，我怎么能把它带到工作中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:11:45.013

你的方法非常接近。将 findOneBy 行更改为：

`$page = $this->navigation()->findOneBy('label','User');`

这将获取用户页面下的所有页面。

我认为控制器不可能找到页面。

[编辑]

我通过在用户下添加“页面”部分修改了您的 xml。这告诉 Zend Navigation userList、newUser 和 editUser 是 user 的子页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<configdata>
<nav>
    <dashboard>
        <label>Dashboard</label>
        <module>default</module>
        <controller>dashboard</controller>
        <action>index</action>
        <title>Die Schaltzentrale</title>
    </dashboard>
    <user>
        <label>User</label> 
        <module>default</module>
        <controller>user</controller>   
        <action>index</action>
        <title>Verwaltung der Benutzer</title>
        <pages>
            <userList>
                <module>default</module>
                <controller>user</controller>   
                <action>index</action>
                <label>Userliste anzeigen</label>
            </userList>                
            <newUser>
                <label>User anlegen</label> 
                <module>default</module>
                <controller>user</controller>   
                <action>new</action>
            </newUser>
            <editUser>
                <label>User bearbeiten</label>  
                <module>default</module>
                <controller>user</controller>   
                <action>edit</action>
            </editUser>
        </pages>
    </user>
</nav>  
</configdata> 
```

# cocos2d-iphone - 访问 box2d 用户数据

> ID：10297578
> 
> 赞同：0
> 
> 时间：2012-04-24T12:12:30.843
> 
> 标签：cocos2d-iphone, physics, box2d-iphone, user-data

我知道这听起来很简单。我在通过更新方法以一种方法访问 b2Body 的用户数据时遇到问题。我需要访问 update 方法中的 userdata 属性来设置多个重力。我只是不明白。下面是更新方法

```
-(void) update: (ccTime) dt
{
int32 velocityIterations = 8;
int32 positionIterations = 1;
world->Step(dt, velocityIterations, positionIterations);    

for (b2Body* b = world->GetBodyList(); b; b = b->GetNext())
{
    if (b->GetUserData() != NULL) {
        if (b == spriteData) {
            b->ApplyForce( b2Vec2(0.0,9.8*b->GetMass()),b->GetWorldCenter()); // here 0.0 is x, 9.8 is y (the gravity)
        }
    }
} 
```

}

如何访问另一种方法中的 userdata 属性（spriteData）。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:54:55.363

我建议您声明一个数据结构`MyUserData`（使用您认为合适的任何名称）。它将包含两件事：

1.  指向实际用户数据对象的指针
2.  身份证号

使用这个结构来存储你身体的用户数据并使用 id 来识别特定的用户数据：

```
 if (b->GetUserData() != NULL) {
        MyUserData *myUserData = (MyUserData *)b->GetUserData();
        if (myUserData->id == <id for sprites which require other gravity force>) {
            b->ApplyForce( b2Vec2(0.0,9.8*b->GetMass()),b->GetWorldCenter()); // here 0.0 is x, 9.8 is y (the gravity)
        }
    } 
```

# android - 为了实现分辨率独立，我将图像缩放到什么尺寸

> ID：10297582
> 
> 赞同：0
> 
> 时间：2012-04-24T12:12:52.013
> 
> 标签：android, graphics, vector-graphics

我的应用程序包含一个圆球，我在代码中将其半径指定为 35 像素。用户可以防止球与其他球发生碰撞。

我绘制了一个 800 像素 x 800 像素的矢量图形，分辨率为 72 ppi，我想将其用作此图像的位图。

对于 drawable-ldpi、-mdpi 和 -hdpi 文件夹，我将图像缩放到什么大小，以便位图在所有设备上的大小相同，并且碰撞检测工作正常？即应用程序将球计算为 35 像素，但屏幕显示更小或更大的图像，因此碰撞将全部错误，用户将不知道发生了什么。

我真的对此了解不多，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:21:20.560

来自[android 开发者指南](http://developer.android.com/guide/practices/screens_support.html)：

> 要为不同密度创建替代位图可绘制对象，您应该遵循四个通用密度之间的**3:4:6:8 缩放比例。**例如，如果您有一个 48x48 像素用于中等密度屏幕（启动器图标的大小）的可绘制位图，则所有不同的大小应该是：
> 
> ```
> 36x36 for low-density
> 48x48 for medium-density
> 72x72 for high-density
> 96x96 for extra high-density 
> ```

此外，支持多种屏幕分辨率的最佳实践之一是：“不要在应用程序代码中使用硬编码的像素值”。

由于您的应用程序在运行时处理像素值，因此您可能需要阅读[附加密度注意事项](http://developer.android.com/guide/practices/screens_support.html#DensityConsiderations)部分以及该部分下方的内容。

# liquibase - Liquibase：检查是否设置了属性

> ID：10297583
> 
> 赞同：3
> 
> 时间：2012-04-24T12:12:55.367
> 
> 标签：liquibase

如果设置了自定义属性，我找不到检查前置条件元素的方法。

到目前为止我发现的关于这个问题的信息是[here](https://liquibase.jira.com/browse/CORE-939)。正如票证注释所示，如果不修改 API，扩展[CustomPrecondition](http://www.liquibase.org/manual/latest/api/liquibase/precondition/CustomPrecondition.html)将无济于事。还有其他方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T18:12:51.527

该[文档](http://www.liquibase.org/documentation/preconditions.html)描述了一个**changeLogPropertyDefined**前提条件。

以下示例对我来说效果很好：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <changeSet author="mark (generated)" id="mark-1">
        <preConditions onFail="HALT">
            <changeLogPropertyDefined property="testing" value="1"/>
        </preConditions>

        <createTable tableName="TEST001">
            <column name="ID" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="X" type="VARCHAR(9)">
                <constraints nullable="false"/>
            </column>
            <column name="Y" type="DECIMAL(7,2)"/>
            <column name="Z" type="DECIMAL(7,2)"/>
        </createTable>
    </changeSet>

</databaseChangeLog> 
```

我从 Maven 运行 liquibase。可以从命令行设置 testing 属性，如下所示：

```
mvn -Dtesting=1 compile 
```

# nsstring - 将 NSDictionary 字符串转换为 NSDictionary

> ID：10297587
> 
> 赞同：0
> 
> 时间：2012-04-24T12:13:23.027
> 
> 标签：nsstring, nsarray, nsdictionary

如何将 NSString 转换为 NSDictionary 对象？或者从 NSString 初始化 NSDictionary？

这是一个要转换的 NSString。在这个字典示例中，插入了一个数组：

```
{

("My value.")

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:17:25.783

您可能希望使用可以轻松地从 NSArrays 和 NSDictionarys 转换（通过 NSData）的 JSON 字符串。

请参阅 NSJSONSerialization：http: [//developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-10T11:22:47.980

我认为你的对象应该是这样的键值格式......

```
{
    "myData":("My value.")
} 
```

# cordova - 使用 phonegap 在我的 gps 设备周围搜索启用 GPS 的设备

> ID：10297590
> 
> 赞同：1
> 
> 时间：2012-04-24T12:13:25.367
> 
> 标签：cordova, gps, bluetooth

我可以使用 phonegap 作为蓝牙的扫描设备功能在我的 GPS 设备周围搜索启用 GPS 的设备吗？如果这是可能的，我该如何实现它。？更具体地说，我的要求是这样的......假设我在位置“xyz”，现在我想获取我周围启用了 GPS 的设备列表。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:18:38.410

不，这不可能开箱即用。您需要某种发布/订阅服务或用于位置交换的机制（用于进一步处理其他位置，例如到其他设备的距离）。例如，寻找[谷歌纬度](http://en.wikipedia.org/wiki/Google_Latitude)或创建自己的纬度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:20:40.777

看到这个[链接](http://www.javacodegeeks.com/2010/09/android-location-based-services.html)。

注意：尝试使用上面的链接开发应用程序。

并且必须并且应该在 android mobile 中进行测试，因为模拟器不显示 gps Loccation 值。

# php - 在不更改 url 的情况下加载页面

> ID：10297596
> 
> 赞同：0
> 
> 时间：2012-04-24T12:14:00.443
> 
> 标签：php, redirect, seo

`RewriteRule`我里面太多了`.htaccess`。

现在我喜欢删除这些`RewriteRule`并使用 php 加载或重定向我的链接。

为此我使用`header`但是当我使用它时，我在浏览器中的原始网址正在改变。

例如：我的原始链接：`http://test.com/something/someID`，当我使用标题时，它变为：`http://test.com/page.php?id=`

底线我需要像 vbseo (vbulletin) 这样的东西来管理我的链接而不使用`RewriteRule`，但当然我有下面的代码`.htaccess`来将我的所有链接重定向到某个特定页面。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ index.php [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:19:09.983

只是不要给出任何标题。默认情况下，重定向链接保持不变。（即使服务器重定向它们，它对客户端也是透明的）。因此，您需要将其传递给 index.php，但需要使用原始路由的 GET 值。

所以...

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f    #If requested filename is not a file
RewriteCond %{REQUEST_FILENAME} !-d    #If requested filename is not a directory
RewriteRule ^(.+)$ index.php?route=$1 [L,QSA] 
```

所以`example.com/this/is/a/test`会重定向到`example.com/index.php?route=this/is/a/test`哪个，然后您可以签入您的 index.php 文件并根据您的需要重新路由`$_GET['route']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:21:32.233

如果这是您要求的，我不完全确定：

您可以使用像 Codeigniter URI 类这样的类来获取 URI 的单个段：

[URI 类源](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/URI.php)

[URI 类描述](http://codeigniter.com/user_guide/libraries/uri.html)

使用给定的段，您现在可以在应用程序中决定要做什么，而无需将其硬编码到 .htaccess 中

# mysql - 在 mysql 中快速搜索不同的日期部分

> ID：10297602
> 
> 赞同：0
> 
> 时间：2012-04-24T12:14:18.503
> 
> 标签：mysql, database, performance

我有一个包含约 1000 万个条目的数据库，每个条目都包含一个存储为[DATE](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)的日期。

我已经使用非唯一的 BTREE 对该列进行了索引。

我正在运行一个查询，计算每个不同年份的条目数：

```
SELECT DISTINCT(YEAR(awesome_date)) as year, COUNT(id) as count
FROM all_entries
WHERE awesome_date IS NOT NULL
GROUP BY YEAR(awesome_date)
ORDER BY year DESC; 
```

该查询目前运行大约需要 90 秒，EXPLAIN 输出说明了原因：

```
id | select_type | table        | type  | possible_keys | key | key_len | ref | rows     | Extra
----------------------------------------------------------------------------------------------------------------------------------------
1  | SIMPLE      | all_entries  | ALL   | awesome_date  |     |         |     | 9759848  |  Using where; Using temporary; Using filesort 
```

如果我`FORCE KEY(awesome_date)`将行数减少到 ~800 万并且`key_len = 4`, 但仍然是`Using where; Using temporary; Using filesort`.

我还运行查询，选择`DISTINCT(MONTH(awesome_date))`并使用将它们限制在特定年份或月份`DISTINCT(DAY(awesome_date))`的相关条件。`WHERE`

除了将年、月和日信息存储在单独的列中之外，有没有一种方法可以加快查询速度和/或避免临时表和文件排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:24:31.017

如果不将日期拆分为 3 列，您可以：

*   首先，你应该删除 DISTINCT，它是没用的。– ypercube 1 分钟前 编辑

*   去掉`ORDER BY year`，这将有助于提高速度（有点）。更改`Group By`为：（`GROUP BY YEAR(awesome_date) DESC`这仅适用于 MySQL 方言）。

*   更改`COUNT(id)`为`COUNT(*)`（假设`id`永远不会`NULL`，这在许多 MySQL 版本中更快）。

总之，查询将变为：

```
SELECT YEAR(awesome_date) AS year
     , COUNT(*) AS cnt              --- not good practise to use reserved words
                                    --- for aliases
FROM all_entries
WHERE awesome_date IS NOT NULL
GROUP BY YEAR(awesome_date) DESC ; 
```

* * *

更好（更快）的解决方案是：

*   您将列拆分为 3（年、月、日）的建议

*   从 MySQL 更改为 MariaDB（即 MySQL 分支）并使用[`VIRTUAL PERISTENT`](http://kb.askmonty.org/en/virtual-columns)该年的列，并在该虚拟列上添加索引。

*   留在 MySQL 中并`year`自己添加一个持久列 - 通过使用触发器。

# git - 如何在git中忽略以#开头的文件

> ID：10297603
> 
> 赞同：20
> 
> 时间：2012-04-24T12:14:19.720
> 
> 标签：git

我想知道是否可以通过 .gitignore 在 git 中忽略以 # 开头的文件（以及是否可以实现）。我已经试过了

```
\\#.myfile 
```

没有运气。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-24T12:17:25.907

这是正确的语法：

```
\#* 
```

# php - PHP5 和 DOM 改变 XML 节点属性值

> ID：10297604
> 
> 赞同：1
> 
> 时间：2012-04-24T12:14:20.593
> 
> 标签：php, xml, dom, domdocument

拥有下一个 XML(Idatzi.xml) ：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE markables SYSTEM "markables.dtd">
<markables>
<markable id="markable_1" atrib="yes" span="word_1..word_4"> </markable>
<markable id="markable_2" atrib="no" span="word_6..word_7"> </markable>
<markable id="markable_3" atrib="yes" span="word_10..word_24"> </markable>
</markables> 
```

以及下一个 PHP 代码：

```
<?php

$xmlIdatziDok = new DOMDocument();
if($xmlIdatziDok->load("Idatzi.xml") === FALSE){die('Error');}
$xPath_IdatziDok = new DOMXPath($xmlIdatziDok);

foreach ($xPath_IdatziDok->query('//markables/markable') AS $Idaztekoa)
{
  $IdaztekoaID = $Idaztekoa->getAttribute('id');
  $IdaztekoaAtrib = $Idaztekoa->getAttribute('atrib');

    if($IdaztekoaAtrib != "yes")
    {
      $Idazteko->Attribute('atrib') = "yes";      
    }
} 
```

我想知道如何在PHP代码中正确编写下一行代码：

```
$Idazteko->Attribute('atrib') = "yes"; 
```

明显写错了。我想做的是将markable_2的“否”更改为“是”。任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:18:22.400

[您可以在文档](http://php.net/manual/en/domelement.setattribute.php)中找到此信息。

```
$Idaztekoa->setAttribute('atrib', 'yes'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:57:31.523

使用 xpath 查询直接选择您想要更改和操作的所有属性：

```
foreach($xp->query('/markables/markable/@atrib[. != "yes"]') as $attrib)
{
    $attrib->nodeValue = 'yes';
} 
```

并做了。完整示例：

```
$xml = <<<XML
<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE markables SYSTEM "markables.dtd">
<markables>
    <markable id="markable_1" atrib="yes" span="word_1..word_4"> </markable>
    <markable id="markable_2" atrib="no" span="word_6..word_7"> </markable>
    <markable id="markable_3" atrib="yes" span="word_10..word_24"> </markable>
</markables>
XML;

$doc = new DOMDocument();
$doc->loadXML($xml);
$xp = new DOMXPath($doc);

foreach($xp->query('/markables/markable/@atrib[. != "yes"]') as $attrib)
{
    $attrib->nodeValue = 'yes';
}

echo $doc->saveXML(); 
```

# asp.net-mvc - ASP.NET MVC 删除文件？

> ID：10297609
> 
> 赞同：1
> 
> 时间：2012-04-24T12:14:42.370
> 
> 标签：asp.net-mvc, file-upload, delete-file

我收到这个错误

```
The process cannot access the file '..\Images\Temp\6574_1212665562989_1419270107_30610848_6661938_n.jpg' because it is being used by another process. 
```

当我尝试这个时：

```
try
{
    var file = Request.Files["FileProfilePicture"];
    file.SaveAs(Server.MapPath("~/Images/Temp/" + file.FileName));
    Bitmap imageOrj = new Bitmap(System.Web.HttpContext.Current.Server.MapPath("~/Images/Temp/" + file.FileName));
    Image imageBig = ResizeImage.Resize(imageOrj, 100, 100);
    imageBig.Save(System.Web.HttpContext.Current.Server.MapPath("~/Images/ProfilePicBig/" + file.FileName));
    Image imageSmall = ResizeImage.Resize(imageOrj, 50, 50);
    imageSmall.Save(System.Web.HttpContext.Current.Server.MapPath("~/Images/ProfilePicSmall/" + file.FileName));

    string[] files = System.IO.Directory.GetFiles(Server.MapPath("~/Images/Temp/"));
    foreach (string pathFile in files)
    {
        System.IO.File.Delete(pathFile);
    }

    return RedirectToAction("Index", "Author");
}
catch (Exception e)
{
    ModelState.AddModelError("", "Kullanıcı bilgileri güncellenirken bir hata oluştu. Lütfen daha sonra tekrar deneyin." + e.Message);
} 
```

我该如何解决。或者另一种将图像保存为临时文件的更好方法。我应该将文件保存在临时文件夹中吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:22:30.797

您不需要保存临时文件。您可以在内存中创建位图并使用请求流填充它。无需将其保存到磁盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:28:34.830

你确定你没有在其他地方打开临时文件吗？

当您在之前的运行中出现错误并且文件尚未关闭时，也会发生此错误。在这种情况下，您可以尝试使用不同的文件名，或者只是从操作系统端删除未关闭的文件。

我希望这有帮助...

否则，我通常使用类似的方式来处理临时文件......

**编辑：**根据评论，上述问题的解决方案似乎如下：每当在 try-catch 块中处理时，如果未在 catch 节点中处理文件对象，则文件对象**可能不会被关闭。**在这种特定情况下，`imageOrj`对象导致了问题，因此建议在位`imageOrj.Dispose()`图编辑完成后使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T12:55:53.660

您删除的文件似乎比在删除循环中创建的文件多。您正在尝试删除 ~/Images/Temp/ 下的每个文件，这可能会产生冲突（即不同请求之间的数据竞争）。仅删除您刚刚创建的文件。

# javascript - 如何在 JavaScript 中设置下拉列表的选定值。共享点列表表单

> ID：10297612
> 
> 赞同：2
> 
> 时间：2012-04-24T12:15:09.080
> 
> 标签：javascript, sharepoint-2010, drop-down-menu

我想在共享点列表表单中设置下拉列表的选定值

我可以使用设置值

```
 getField('select','County').selectedIndex = 1; 
```

这里它设置在索引 1 处选择的默认值

但我想使用 Text 设置值，即一些`"Abc"`

我试过

```
getField('select','County').selectedValue = "Abc";
getField('select','County').selectedText = "Abc"; 
```

但两者都不适合我。是否有任何其他属性可以使用 JS 设置 dropDownlist 的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:29:47.087

嗨，请查看此演示

[http://jsfiddle.net/BbSLy/5/](http://jsfiddle.net/BbSLy/5/)

您在下拉列表中添加值还使用带有文本值的 javascript 选择值

# extjs - 将轮播添加到面板

> ID：10297613
> 
> 赞同：1
> 
> 时间：2012-04-24T12:15:09.190
> 
> 标签：extjs, sencha-touch-2

第一个程序逻辑：

我有一个主面板，左侧有一个列表，右侧有另一个面板。

当用户触摸列表项时，右侧面板中会出现一些 html。我需要做的是使用轮播而不是右面板。

我的观点

```
 Ext.define('MyApp.view.MyPanel', {   
extend: 'Ext.Panel',
xtype:'mypanel',

config: {
    ui: 'dark',
    layout: {
        type: 'card'
    },
    items: [
        {
            xtype: 'titlebar',
            docked: 'top',
            title: 'Lezzet Dunyasi',    
        },
        {
            xtype: 'list',
            docked: 'left',
            id: 'mylist',
            ui: 'round',                
            pinHeaders: false,
            grouped: true,
            //disableSelection: true,
            width: 331,
            itemTpl: [
                '<img src="{img_url}" width="60" heigh="60"></img><span>{label}</span>'
            ],
            store: 'Menius',
            items: [
                {
                    xtype: 'searchfield',
                    docked: 'top',
                    placeHolder: 'Search...',

                },
            ]
                },
                {
                xtype: 'panel',
                styleHtmlContent:true,
                style: {
                backgroundImage: 'url(resources/img/Landscape.png)',
                backgroundRepeat: 'no-repeat',
                backgroundPosition: 'center'
                },
                id:'mypanel'
                }
            ]
        }

        }); 
```

如您所见，有一个 xtype:panel ，我尝试修改该代码，并且这样做了

```
 xtype: 'carousel',

                defaults{
                styleHtmlContent:true,  
                id:'mypanel'},

                items: [
                {
                html : 'Item 1',
                style: 'background-color: #5E99CC'
                },
                {
                html : 'Item 2',
                style: 'background-color: #759E60'
                },
                {
                html : 'Item 3'
                }
            ] 
```

我也使用控制器

```
 Ext.define('MyApp.controller.MeniuController',{
extend:'Ext.app.Controller',
config:{
    refs:{
        leftMeniu:'mypanel list[id=mylist]',
        myPanel:'mypanel panel[id=mypanel]'
    },
    control:{
        leftMeniu:{
            itemtap:'onItemTap'
        }
    }
},

onItemTap:function(list, index, item, record, e , opts)
{
    var content = '<h2>' + record.get('label') +'</h2>' + record.get('html');
    this.getMyPanel().setHtml( content );
} 
```

});

我像这样修改了这部分

```
 refs:{
        leftMeniu:'mypanel list[id=mylist]',
        myPanel:'mypanel carousel[id=mypanel]' 
```

虽然这些修改我无法运行我的代码，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:27:29.703

我看到的几个小问题。您在默认值上缺少一个冒号：而且我认为您想将该 id 移动到您的轮播元素之一，对吗？使用您的代码，我只会得到一个在该级别定义的 id 页面。如果将其向下移动，您将看到三页。

```
默认值：{
   styleHtmlContent：真，  
   id:'mypanel' // 在错误的地方？
},

```

[更新]

我让它工作，这样你就可以写到你的任何轮播面板。我刚刚在 refs:{} 部分中创建了对每个 id 的直接引用。我正在绘制到第二页，因此将其拖到视图中以查看更新。

此外，我正在添加模型、商店和 app.js，以便阅读本文的任何人都将拥有一个完整的工作示例。

```
Ext.define('MyApp.controller.MeniuController', {
    扩展：'Ext.app.Controller',
    配置：{
        参考：{
            leftMeniu:'我的面板列表[id=mylist]',
// myPanel:'mypanel 面板[id=mypanel]'
// myPanel:'mypanel carousel[id=mypanel]'
            myFirstPanel:'#mypanel1',
            我的第二面板：'#mypanel2'
        },
        控制：{
            左美牛：{
                itemtap:'onItemTap'
            }
        }
    },

    onItemTap:function(list, index, item, record, e, opts) {
        var content = '<h2>' + record.get('label') + '</h2>' + record.get('html');
        this.getMySecondPanel().setHtml(content);
        this.getMyFirstPanel().setHtml(内容);
    }
});

```

完成 MyPanel 视图：

```
Ext.define('MyApp.view.MyPanel', {
    扩展：'Ext.Panel'，
    xtype：'我的面板'，

    配置：{
        ui: '黑暗',
        布局： {
            类型：'卡'
        },
        项目： [
            {
                xtype: '标题栏',
                停靠：'顶部'，
                标题：'Lezzet Dunyasi'
            },
            {
                xtype：'列表'，
                停靠：'左'，
                id: '我的列表',
                ui: '圆形',
                pinHeaders：假，
// 分组：true,
                //disableSelection: true,
                宽度：331，
                项目Tpl：[
                    '{标签}'
                ],
                商店：'Menius'，
                项目： [
                    {
                        xtype: '搜索域',
                        停靠：'顶部'，
                        placeHolder: '搜索...'

                    }
                ]
            },
// {
// xtype: '面板',
// styleHtmlContent:true,
// 风格： {
// backgroundImage: 'url(../images/risk2.png)',
// backgroundRepeat: '不重复',
// 背景位置：'中心'
// },
// id:'我的面板'
// }
            {
                xtype: '轮播',

                默认值：{
                    样式HTML内容：真
                },

                项目： [
                    {
                        html: '项目 1',
                        样式：'背景颜色：#5E99CC'，
                        id:'mypanel1'

                    },
                    {
                        html: '项目 2',
                        样式：'背景颜色：#759E60'，
                          id:'mypanel2'
                    },
                    {
                        html: '项目 3'
                    }
                ]
            }
        ]
    }
});

```

应用程序.js

```
分机应用程序（{
    名称：“我的应用程序”，

    意见：['我的面板']，
    型号：['Meniu']，
    商店：['Menius']，
    控制器：['MeniuController']，
    启动：函数（）{

        Ext.Viewport.add(Ext.create('MyApp.view.MyPanel'));
    }
});

```

模型：

```
Ext.define('MyApp.model.Meniu', {
    扩展：'Ext.data.Model',

    配置：{
        字段：['img_url', 'label', 'html']
    }
});

```

店铺：

```
Ext.define('MyApp.store.Menius', {
    扩展：'Ext.data.TreeStore'，

    配置：{
        型号：'MyApp.model.Meniu',
        defaultRootProperty: '项目',
        石斑鱼：功能（记录）{
            返回记录.get('label')[0];
        },
        根： {
            文本：'foo'，
            项目： [

                {img_url：'foo.png'，标签：'一个'，html：'好的'，叶子：真}，
                {img_url：'foo.png'，标签：'两个'，html：'旋转木马'，叶：真}
            ]
        }
    }
});

```

# visual-c++ - gcc 抛出：对 `_getcwd' 的未定义引用

> ID：10297617
> 
> 赞同：0
> 
> 时间：2012-04-24T12:15:15.587
> 
> 标签：visual-c++, gcc, undefined-reference, getcwd

我正在尝试在 ubuntu 11.10 x64 中编译这个 sourceforge 项目：http: [//vmb.sourceforge.net/](http://vmb.sourceforge.net/)

```
Linux users have to compile the devices from sources.
Either obtained from cvs (see: http://sourceforge.net/projects/vmb/) or as a tgz file.
The sources come with Makefiles. If you have make and gcc, just execute make in the top source directory. 
```

所以我下载了 .tar.gz，解压它，然后从 /src 目录运行“make”。
但输出显示：

```
/vmb/src/opt/option.c:528: undefined reference to `_getcwd' 
```

我认为这是错误或缺少库的问题。原始项目似乎来自 Visual Studio。
我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:28:05.687

查看[http://vmb.cvs.sourceforge.net/viewvc/vmb/vmb/src/opt/option.c?revision=1.21&view=markup](http://vmb.cvs.sourceforge.net/viewvc/vmb/vmb/src/opt/option.c?revision=1.21&view=markup)的源代码：

```
526 void vmb_get_cwd(void)
527 { if (vmb_cwd!=NULL) return;
528 #ifdef WIN32
529   vmb_cwd = _getcwd(NULL,0);
530 #else
531   vmb_cwd = getcwd(NULL,0);
532 #endif 
```

检查您的配置是否已定义**WIN32**。这不应该为 Linux 启用/定义。

# ms-access - 使用 COUNT 毫秒访问创建表

> ID：10297618
> 
> 赞同：0
> 
> 时间：2012-04-24T12:15:17.050
> 
> 标签：ms-access, count, percentage, create-table, alter

我有一个数据库，我想在其中创建一个带有 COUNT 函数的表。可能吗 ？

我有 3 个现有表：

```
Member
Feedback
Attendance 
```

在反馈表中，2 列

```
Class_ID, 
Likes 
```

（Class_ID 与出勤率挂钩，因为每个成员参加 1 个班级，例如 1、2、3 等班级，而 Likes 是为喜欢该班级的人数）。

在出勤表中，3 列：

```
Class_ID
Member_ID
Non_member_name 
```

现在我想更改反馈表以添加 2 个新列。1 统计上课人数，例如如果有 4 人参加第 1 课，则 Class_ID=1 有 4 行。二来统计点赞的百分比，即点赞数/参与人数*100%

```
ALTER TABLE Feedback
ADD COUNT(*) AS Number_Attending
WHERE Class_ID.Feedback=Class_ID.Attendance 
```

我尝试运行，但括号中的字段定义存在语法错误（在 *. 之前，欢迎提出建议/更正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:08:37.543

# c# - 如何在我的视图中访问来自多个模型/控制器的数据？

> ID：10297619
> 
> 赞同：0
> 
> 时间：2012-04-24T12:15:21.623
> 
> 标签：c#, asp.net-mvc-3, html.dropdownlistfor

我正在尝试创建一个将创建子类别的视图。

为了创建这个视图，我继承了视图中子类别的模型，以便访问所需的属性等。

现在，我希望在子类别对象上设置的属性之一是对普通类别的引用。

但是我不确定如何用类别项填充我的下拉列表，因为我已经在使用子类别模型。

`SelectList`我的问题是，在我的子类别视图中访问类别对象的最佳方式是什么。

我考虑过使用部分视图，或者可能将数据传输到我的`ViewBag`或`ViewData`.

最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:18:37.953

您需要使用`ViewModel`. 这基本上是一个类，用于将视图所需的各种模型的所有部分组合在一起。

它可能看起来像：

```
public class CategoryListingsVieWModel
{
   public IList<ISubCategory> Subcategories{get;set;}
   public IList<ICategory> Categories{get;set;}
   [...] // Any other data your view needs
} 
```

然后，这将成为您从控制器传递的视图的模型。

# java - How do I pass a list to a Java input stream?

> ID：10297626
> 
> 赞同：0
> 
> 时间：2012-04-24T12:15:42.620
> 
> 标签：java, file-io, datainputstream

```
public class parseFiles
{
    public static void main(String... aArgs) throws FileNotFoundException
    {
        File startingDirectory= new File("CGT");
        List<File> files = FileListing2.getFileListing(startingDirectory);
        for(File file : files )
        {
             System.out.println(file);
        }
    }
    <other methods to supply the file listings, etc.>
} 
```

This is where I am right now: This works great, and a list of files with full paths outputs to the console without any problems. Now, I want to take each of the files listed in that output, and read them line by line.

```
BufferedReader br = new BufferedReader(new FileReader(file));
String inputLine;
String desc = "";
String docNo = "";
// 
while ((inputLine = br.readLine()) != null)
{
    int testVal=0;
    String delim = ",";
    int stringMax = inputLine.length();
    if(inputLine.startsWith("Description"))
    {desc = inputLine.substring(13,inputLine.length());}
else
    if(inputLine.startsWith("Reference Number"))
    {docNo = inputLine.substring(20,inputLine.length());}
     String outputString = desc+delim+docNo;
    //        
    <write series of output strings to flat file>
    //
} 
```

`while ((inputLine = br.readLine()) != null)` keeps kicking back with the following error:

```
FileListing2.java:22: error: unreported exception FileNotFoundException; must be
 caught or declared to be thrown
   List<File> files = FileListing2.getFileListing(startingDirectory);
                                              ^
FileListing2.java:30: error: unreported exception FileNotFoundException; must be
 caught or declared to be thrown
                       BufferedReader br = new BufferedReader(new FileReader(file));
                                                              ^
FileListing2.java:43: error: unreported exception IOException; must be caught or
declared to be thrown
                       while ((inputLine = br.readLine()) != null)
                                                      ^
3 errors 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:19:02.370

Instead of

```
DataInputStream in = new DataInputStream(file); 
BufferedReader br = new BufferedReader(new InputStreamReader(in)); 
```

Write

```
BufferedReader br = new BufferedReader(new FileReader(file)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:21:45.783

You could try the [IOHelper](https://github.com/kentcdodds/Java-Helper/blob/master/src/com/kentcdodds/javahelper/helpers/IOHelper.java) from [Java Helper](https://github.com/kentcdodds/Java-Helper/) on github. There are methods for getting all files in a directory and reading a file to a string.

# android - 在 Android 中查找要与 ComponentName 类一起使用的类

> ID：10297632
> 
> 赞同：1
> 
> 时间：2012-04-24T12:16:15.427
> 
> 标签：android

我有一个调用另一个应用程序的小部件，这是代码中最重要的部分：

```
final Intent intent = new Intent(Intent.ACTION_MAIN, null);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
final ComponentName cn = new ComponentName("com.android.settings", 
"com.android.settings.wifi.WifiSettings");
intent.setComponent(cn);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
ctxt.startActivity( intent); 
```

重要的部分是

```
final ComponentName cn = new ComponentName("com.android.settings", "com.android.settings.wifi.WifiSettings"); 
```

这调用了android中的wifi设置，但是我在一个网站上找到了这段代码，我想知道如何调用系统中的数据漫游和其他设置，我在哪里可以看到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:11:05.500

`com.android.settings`是包的名称。如果你去[这里，](https://android.googlesource.com/platform/packages/apps/Settings/+/a9125d4d59bb3293dd1c92189bec3d0ab9e71d52/src/com/android/settings)你可以在这个包中找到所有可用的设置。漫游设置在包中`com.android.phone`~~- 请参见[此处](http://www.androidsnippets.com/open-mobile-data-setting)~~。

编辑：[似乎](https://stackoverflow.com/a/7024631/281545)使用包名称是不可移植的。你最好的选择是使用：

```
startActivity(new Intent(Settings.ACTION_DATA_ROAMING_SETTINGS)); 
```

意图列表在[设置类中](http://developer.android.com/reference/android/provider/Settings.html)

您[可能还需要](https://stackoverflow.com/a/13385550/281545)添加`FLAG_ACTIVITY_NEW_TASK`到您的意图

# ffmpeg - 使用 JAVE (ffmpeg) 从 amr 转码到 flac

> ID：10297634
> 
> 赞同：0
> 
> 时间：2012-04-24T12:16:26.380
> 
> 标签：ffmpeg, transcoding, amr, flac

我想使用使用 ffmpeg 的[JAVE将 amr 音频文件转码为 flac。](http://www.sauronsoftware.it/projects/jave/)

转码过程在 Windows 上成功运行，但在 Linux (centOS) 上失败。

我检查了 JAVE 代码，发现它使用以下命令：

```
ffmpeg -i 1.amr -vn -acodec flac -ac 1 -ar 8000 -f flac -y 1.flac 
```

输出是：

```
FFmpeg version SVN-r11179, Copyright (c) 2000-2007 Fabrice Bellard, et al.
  configuration: --enable-gpl --enable-pp --enable-swscaler --enable-pthreads \
--enable-libfaac --enable-libfaad --enable-libmp3lame --enable-libtheora \
--enable-memalign-hack --extra-ldflags=-static -lm -lz
libavutil version: 49.5.0
libavcodec version: 51.48.0
libavformat version: 52.1.0
built on Dec  7 2007 15:35:14, gcc: 4.1.2 20070626 (Red Hat 4.1.2-14)

Input #0, amr, from '1.amr':
  Duration: N/A, bitrate: N/A
  Stream #0.0: Audio: samr / 0x726D6173, 8000 Hz, mono
Input #1, amr, from '1.amr':
  Duration: N/A, bitrate: N/A
  Stream #1.0: Audio: samr / 0x726D6173, 8000 Hz, mono

Output #0, flac, to '1.flacffmpeg':
  Stream #0.0: Audio: flac, 8000 Hz, mono, 64 kb/s
Output #1, flac, to '1.flac':
  Stream #1.0: Audio: flac, 8000 Hz, mono, 64 kb/s

Stream mapping:
Stream #0.0 -> #0.0
Stream #1.0 -> #1.0

Unsupported codec (id=73728) for input stream #0.0 
```

所以问题是不支持的编解码器？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:46:27.703

如果 JAVE 正在捆绑 FFmpeg 的副本，那么除了提交错误报告之外，您无能为力。

或者，由于您可以看到他们正在使用的 FFmpeg 命令，您可以随时使用所有必要的编解码器自己编译它，并运行相同的外部命令。

# ruby-on-rails - 从 Rails 模型内部生成警告/错误日志的最有效方法是什么？

> ID：10297635
> 
> 赞同：1
> 
> 时间：2012-04-24T12:16:26.957
> 
> 标签：ruby-on-rails, logging

我想从 rails app/models 文件中生成一些日志。

考虑到像 Web 应用程序这样的多线程环境，最有效的方法是什么？如果我们把所有的日志都隧道化到一个文件中，那肯定有办法同步这个动作，这会不会很费钱？

# android - findViewById() 在 TabActivity 类中返回 null

> ID：10297640
> 
> 赞同：0
> 
> 时间：2012-04-24T12:16:42.947
> 
> 标签：android

我有 NewTransferActivity 类，它扩展了 TabActivity。编码：

```
public class NewTransferActivity extends TabActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.account_transfer);

    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;

    spec = tabHost.newTabSpec("receiver").setIndicator("Rec").setContent(getReceiverTab());
    tabHost.addTab(spec);

    spec = tabHost.newTabSpec("transfer").setIndicator("Trans").setContent(getTransferTab());
    tabHost.addTab(spec);

}

private TabContentFactory getReceiverTab(){
    TabContentFactory factory = new TabContentFactory() {
        @Override
        public View createTabContent(String tag) {

            ...

            return layout;
        }
    };
    return factory;
}

private TabContentFactory getTransferTab(){
    TabContentFactory factory = new TabContentFactory() {

        @Override
        public View createTabContent(String tag) {
            LinearLayout layout = (LinearLayout) findViewById(R.id.mytrans);

            if (layout == null){
                //layout = new LinearLayout(NewTransferActivity.this);
                System.out.println("NULL>>>>>>");
                return new LinearLayout(NewTransferActivity.this);
            }
            return layout;
        }
    };
    return factory;
} ... 
```

我的 xml 文件，其中包含布局是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mytrans"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/editText2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/editText3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/editText4"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

我想从我定义的 xml 文件中加载单个选项卡的布局。不幸的是，我收到 NullPointerException，因为布局在方法 getTransferTab() 中为空。'LinearLayout 布局 = (LinearLayout) findViewById(R.id.mytrans)' 返回 null。我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:24:08.877

我的第一个想法是，在这一行中：

```
 LinearLayout layout = (LinearLayout) findViewById(R.id.mytrans); 
```

你正在调用你的`findViewById`方法`TabContentFactory`

您需要调用位于`Activity`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:34:57.243

您应该尝试使用`LayoutInflater`从 xml 获取视图层次结构，

```
 TabContentFactory factory = new TabContentFactory() {
        @Override
        public View createTabContent(String tag) {

             LayoutInflater inflater = LayoutInflater.from(Activity_Name.this);
             View linearLayout = inflater.inflate(R.layout.mytrans, null);

            return linearLayout;
        }
    }; 
```

# javascript - Internet Explorer 和目标事件

> ID：10297641
> 
> 赞同：0
> 
> 时间：2012-04-24T12:16:44.133
> 
> 标签：javascript, internet-explorer

我希望你能帮帮我！此功能在 Internet Explorer 中不起作用！我能怎么做？

```
function docClick (oEvent) {
    var bHide = true, oTable = document.getElementById("content_tab");
    for (var oItTarget = oEvent.target; oItTarget; oItTarget = oItTarget.parentNode) {
        if (oItTarget === oTable) { bHide = false; break; }
    }
    if (bHide) {
        oTable.style.visibility = "hidden";
    }
} 
```

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:21:57.423

您需要使用`currentTarget`IE 的属性。检查可用的目标：

```
var oItTarget = oEvent.target ? oEvent.currentTarget : oEvent.target; 
```

或者在你的函数中：

```
function docClick (oEvent) {
    var bHide = true, oTable = document.getElementById("content_tab");
    for (var oItTarget = oEvent.target ? oEvent.currentTarget : oEvent.target; oItTarget; oItTarget = oItTarget.parentNode) {
        if (oItTarget === oTable) { bHide = false; break; }
    }
    if (bHide) {
        oTable.style.visibility = "hidden";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:11:19.443

您需要`srcElement`而不是`target`在 IE < 9 中。您可能还需要（取决于事件处理程序的附加方式）需要`window.event`在 IE 中使用。

```
function docClick (oEvent) {
    oEvent = oEvent || window.event;
    var target = oEvent.target || oEvent.srcElement;

    var bHide = true, oTable = document.getElementById("content_tab");
    for (var oItTarget = target; oItTarget; oItTarget = oItTarget.parentNode) {
        if (oItTarget === oTable) { bHide = false; break; }
    }
    if (bHide) {
        oTable.style.visibility = "hidden";
    }
} 
```

# java - 将所选文件复制到文件夹

> ID：10297644
> 
> 赞同：0
> 
> 时间：2012-04-24T12:17:01.317
> 
> 标签：java, file-io

我想使用核心 java 将一些选定的文件复制到目标文件夹。我无法使用 JDK 7。我使用的是 JDK 1.6。将整个源文件夹复制到目标文件夹是不可接受的。

例子 ：

文件夹 T 包含 x 个 .gif 文件。我必须复制（不移动）y（x）个 .gif 图像文件到一个单独的文件夹，比如 K。

我无法将所有 T（即 x 个文件）复制到 K。

我将如何在 JDK 1.6 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:20:40.813

使用[commons-io中的](http://commons.apache.org/io/)[FileUtils.copyDirectory()](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#copyDirectory%28java.io.File,%20java.io.File,%20java.io.FileFilter%29)，指定您的源、目标和指示仅复制 .gif 文件的过滤器。该方法的文档包括一个将所有文件从一个目录复制到另一个目录的示例，因此它可以帮助您完成大约 95% 的操作。`.txt`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-24T12:33:25.030

@Ryan 答案是一个。不过，我还没有尝试过。

但是，您可能只想这样做：编写一个接受两个目录路径的方法，然后使用扩展名过滤要复制的文件。像这样的东西，也许：

```
//get all the select files in that folder
File directory[] = source.listFiles();

//iterate through the files
for (File fileName : directory)
{
   //check here: if the extension doesn't match what you want, continue the loop if it doesn't match

    File newFile = new File(destination + fileName);
} 
```

我想这应该可以很好地完成工作。

# sql - 遍历行以与sql中的ascii值进行比较？

> ID：10297645
> 
> 赞同：3
> 
> 时间：2012-04-24T12:17:02.710
> 
> 标签：sql, sql-server, sql-server-2008, ascii

我有一列包含字符串

像

```
id fruit

1  apple
2  mango
3  banana
4  grapes
5  watermelon 
```

我需要遍历水果行以找出`a`97 的 ascii 值在哪里。

就像在 id=1 apple contains`'a'=97`所以我想`position of character a`通过将其与 ascii 值 97 进行比较来打印所有行。

谁能告诉我如何遍历每一行以与 ascii 值 97 进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:22:16.953

```
SELECT CHARINDEX((CHAR(97), fruit)
FROM MyTable 
```

这使用了`CHARINDEX`函数，它给出了字符串中字符的第一个位置，以及`CHAR()`返回分配给给定 ascii 值的字符的函数。

# html - 在表格单元格 div 中打断单词

> ID：10297651
> 
> 赞同：0
> 
> 时间：2012-04-24T12:17:27.347
> 
> 标签：html, css

我有以下小提琴： http: [//jsfiddle.net/nVWt5/](http://jsfiddle.net/nVWt5/)，其结构如下：

```
<table style="table-layout:fixed">
<tr>
<td>
<span style="display:table-cell">
 <div style="word-wrap:break-word;">really_long_text_here_no_spaces</div>
</span>
</td>
</tr>
</table> 
```

如何在不修改跨度显示样式的情况下使文本换行？跨度当前无法更改，因为它是自动生成的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:30:58.120

Remove `display:table-cell`，因为它在这里没有任何用处，并且似乎可以防止包装。

一个`span`元素不能包含一个`div`HTML 规则的元素，所以你真的应该对标记做点什么。

请注意，与名称所暗示的相反，`word-wrap:break-word`不处理单词；相反，它会机械地破坏字符串，而不考虑人类语言的规则。

# javascript - Firefox 扩展检测 windows 任务栏位置

> ID：10297658
> 
> 赞同：2
> 
> 时间：2012-04-24T12:17:50.393
> 
> 标签：javascript, firefox, firefox-addon, xul

我正在开发一个 Firefox 扩展，我使用[xul:panel](https://developer.mozilla.org/en/XUL/panel)。我想把它放在右下角，但我不想在 Windows 任务栏下。我使用 openPopupAtScreen 和屏幕坐标来定位它 我的问题是当用户在屏幕右侧垂直放置 Windows 任务栏时。我的面板位于任务栏下方。有没有办法检测任务栏位置或根据它绘制它的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:38:21.777

您应该为此使用[nsIScreenManager](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIScreenManager)：

```
var screenManager = Components.classes["@mozilla.org/gfx/screenmanager;1"]
                              .getService(Components.interfaces.nsIScreenManager);
var screen = screenManager.primaryScreen;
var left = {};
var top = {};
var width = {};
var height = {};
screen.GetAvailRect(left, top, width, height);
alert("Available screen area: " + left.value + "," + top.value + " x " +
      width.value + "," + height.value); 
```

请注意，这只是查看主屏幕 - 如果用户拥有多个屏幕，这可能不是最佳解决方案。一种替代方法是获取与您正在运行的 Firefox 窗口的坐标相对应的屏幕，然后查看其可用区域。

# python - 在 AppEngine 中创建寻呼机

> ID：10297664
> 
> 赞同：0
> 
> 时间：2012-04-24T12:18:27.747
> 
> 标签：python, google-app-engine, google-cloud-datastore, pager

[使用游标分页或使用偏移量之间的成本差异是什么](https://stackoverflow.com/questions/10291291/what-is-the-cost-difference-between-paging-with-a-cursor-or-using-offset)？问题让我想到了一个问题，我如何在 AppEngine（Python 2.7）中实际构建一个带有光标/偏移量/限制的寻呼机。

我知道如何使用 MySQL 和 PHP 轻松做到这一点 =>`LIMIT x,y`

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:36:41.253

使用游标进行分页是解决问题的不同方法，而不是使用带有偏移量的查询。正如尼克在您链接的问题的答案中指出的那样，使用偏移量可能会导致数据存储操作的巨额费用。游标规避了这个成本，它们是解决问题的更好方法。

幸运的是，这是一个不需要重新发明的轮子。Ben Davies 创建了一个[PagedQuery 类](http://code.google.com/p/he3-appengine-lib/wiki/PagedQuery)，您可以直接在 AppEngine/Python 代码中使用它，它几乎可以为您完成所有工作。

我在我的博客软件中使用它，我不能高度推荐它。

# spree - 生成狂欢网站时出错

> ID：10297676
> 
> 赞同：0
> 
> 时间：2012-04-24T12:19:10.870
> 
> 标签：spree

我正在尝试生成一个狂欢网站，我创建了 rails 应用程序，并在其 gem 文件中添加了以下行： **gem "spree","~> 1.0.3"**

现在，每当我尝试捆绑安装 m 时，都会出现以下错误： **Bundler 找不到 gem "jquery-rails" 的兼容版本：在 Gemfile：spree (~> 1.0.3) ruby​​ 依赖于 jquery-rails (<= 1.0.19 , >= 1.0.18) ruby​​ jquery-rails (2.0.2)**

请提出适当的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:43:04.337

默认情况下，如果您收到 Bundler 找不到“gem-name”的兼容版本的错误消息，请始终先尝试一个简单的`gem install gem-name`. 如果可行，请再试`bundle install`一次。这似乎比它真正应该解决的捆绑器问题要多得多。

如果做不到这一点，你是在使用 Ruby MRI，还是更奇特的东西，比如 JRuby？

# sql-server - 强制参数化

> ID：10297680
> 
> 赞同：4
> 
> 时间：2012-04-24T12:19:21.850
> 
> 标签：sql-server, sql-execution-plan, parameterization

您为什么不选择为 SQL Server 中的即席查询启用强制参数化而不是简单参数化？

有性能开销吗？如果是这样，它不会被重用查询计划所获得的（可能的）收益所抵消吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T12:33:05.337

您是否分析过您的计划缓存以查看您是否有大量的一次性计划？

```
SELECT usecounts, COUNT(*), SUM(size_in_bytes) 
  FROM sys.dm_exec_cached_plans
  GROUP BY usecounts
  ORDER BY usecounts; 
```

您是否考虑过“[针对临时工作负载进行优化](http://msdn.microsoft.com/en-us/library/cc645587.aspx)”设置，它至少只存储计划的存根，直到它被多次使用？我发现这非常有效。

如果您有很多即席 SQL，并且您看到计划缓存膨胀，那么尝试强制参数化不会有什么坏处。但是您应该彻底测试您的整个工作负载，因为在某些情况下开销*可能*超过收益（特别是如果您大量使用索引视图、持久计算列或分区，您最终可能会得到更糟糕的计划）。重要的是要注意，当您打开此设置时，它也会`DBCC FREEPROCCACHE`为您运行，所以预计会出现一些小问题，您所有的现有计划都需要在下次需要时重新编译。（当然，在您已经拥有“针对临时优化”以及许多一次性计划的情况下，这影响要小得多，因为您主要是在驱逐可能在重新使用之前被刷新的存根。

另请注意，在许多情况下，此设置对单个查询没有影响（请参阅[联机丛书主题](http://technet.microsoft.com/en-us/library/ms175037.aspx)）。

# javascript - 如何从字符串中删除 \u0000？

> ID：10297683
> 
> 赞同：3
> 
> 时间：2012-04-24T12:19:33.660
> 
> 标签：javascript

我正在编码 PDU 消息。在消息的开头，我得到了 String 类似的东西：

```
\u0005\u0000\f0)@\u0000This is testing\u0000 
```

如何删除它（\u0005...）？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T05:54:03.557

试试这个正则表达式从字符串中删除 unicode char：

```
 /*\\u([0-9]|[a-fA-F])([0-9]|[a-fA-F])([0-9]|[a-fA-F])([0-9]|[a-fA-F])/ 
```

# database - 如何在数据库中存储 200 万个字符串以便快速访问

> ID：10297686
> 
> 赞同：0
> 
> 时间：2012-04-24T12:19:49.093
> 
> 标签：database, postgresql, indexing, nosql

我必须存储 200 万个代码，每个代码都是一个固定长度为 11 的字符串。每个代码都有一个名为“已使用”的布尔属性，用于标记代码是否已使用（！）。代码的数量将永远相同（没有创建代码，没有删除代码，没有更新代码），唯一的更新操作将是现有代码的已使用属性。

每次用户在 Web 表单上输入代码时，我都必须搜索该代码，检查它是否已被使用，如果没有，则将其标记为已使用。

会有很多用户输入代码（最多同时输入 50 个，是的，这对我来说很多！）所以我想知道什么是让我的 web 应用程序不至于缓慢的好方法。

这对 postgres（我最喜欢的 DBMS）可行吗？我应该进一步探索 postgres 的哪些功能？指数？

这种任务最好由 nosql 执行吗？也许是redis？

我将使用云服务器（机架空间）。我应该放入多少内存？数据库还会发生其他事情，但相比之下没有什么重要的？我猜是1GB。

我还应该研究什么？

我不希望任何人为我做任何研究，只需要一些指示，以便我可以进一步调查这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:24:35.143

是的，一个 SQL 数据库可以做到这一点。

创建一个至少包含两列 used_flag 和 code 的表

为代码添加索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:50:13.180

使用适当的索引代码字段应该足够快。数据库不会进行200万次迭代，索引会是log(2) 200万~20。20次迭代应该足够快

# php - 在使用 PHP Simple HTML DOM Parser 之前登录到 ASP 网站

> ID：10297687
> 
> 赞同：3
> 
> 时间：2012-04-24T12:19:51.227
> 
> 标签：php, html, asp-classic, login

我正在使用“PHP Simple HTML DOM Parser”来解析来自游戏 ASP 网站的数据。我需要抓取的数据仅对注册用户可见，所以我需要一些东西让我在开始使用它之前登录到站点。有人可以建议我一个脚本或可以做到这一点的东西吗？提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:14:34.903

First, you should post with:

```
<?php
function do_post_request($url, $data, $optional_headers = null)
{
  $params = array('http' => array(
              'method' => 'POST',
              'content' => $data
            ));
  if ($optional_headers !== null) {
    $params['http']['header'] = $optional_headers;
  }
  $ctx = stream_context_create($params);
  $fp = @fopen($url, 'rb', false, $ctx);
  if (!$fp) {
    throw new Exception("Problem with $url, $php_errormsg");
  }
  $response = @stream_get_contents($fp);
  if ($response === false) {
    throw new Exception("Problem reading data from $url, $php_errormsg");
  }
  return $response;
} 
```

That should be able to send a post request. After that, you should be able to grab what you need.

# jquery - jquery偏移值通过滚动页面改变

> ID：10297688
> 
> 赞同：30
> 
> 时间：2012-04-24T12:19:54.557
> 
> 标签：jquery

```
var offset = $(selector).offset(); 
```

如果我们上下滚动页面，偏移变量的值会发生变化，我想要精确和固定的偏移值，同时保持“选择器”默认值（静态）的位置。我该怎么做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-24T12:32:06.590

您总是可以计算偏移量，并考虑滚动位置：

```
var offset_t = $(selector).offset().top - $(window).scrollTop();
var offset_l = $(selector).offset().left - $(window).scrollLeft(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-27T18:14:41.983

另一个潜在的原因是如果你`<body>`碰巧有设置的 CSS `overflow-x: hidden;`- 这完全破坏了 jQuery 的`offset()`方法。

在这种情况下，`$(window).scrollTop()`始终为 0，因此接受的答案不起作用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-04T02:47:45.703

遇到同样的问题后，只想在这里添加我的答案：

在得到上述行为后，[我查看了 jQuery 文档](http://api.jquery.com/offset/)并发现

> jQuery 不支持获取**隐藏**元素的偏移坐标或考虑在 body 元素上设置的边框、边距或填充。

我试图获得偏移量的元素实际上被设置为`display:none;`给我一个错误的偏移量，该偏移量在滚动时会发生变化（即使元素没有移动）。

因此，请确保您没有尝试获取隐藏元素的偏移量！希望这可以帮助某人:)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-10-10T22:36:29.803

我有一个与原始问题非常相似的问题。偏移量有点棘手。希望这将有助于解决您的问题，就像我的问题一样。我有 3 个 JSFiddles 来演示。

1.  如果您基于`offset().top`窗口中的 div 元素，您将始终获得一个静态数字（即，如果`$(window)`是滚动的东西并且您在窗口内有一个已`offset().top`应用的 div，则该 div 将始终具有一个静态数字）。`$(window)`无论您向下滚动多远，此偏移量都是元素从顶部开始存在的确切像素数。对于我的每个 JSFiddles，我将查看对象`$('div#offset')`距其滚动容器顶部的距离。在第一个示例中，请注意数字没有变化：

[https://jsfiddle.net/BrianIsSecond/ehkgh2gu/](https://jsfiddle.net/BrianIsSecond/ehkgh2gu/)

2.  现在，可以说`$(window)`不是滚动的容器。您改为创建一个具有“overflow-y:scroll;”的 div 属性集。在这种情况下，这些`$('div#offset').offset().top`行为与前面的示例非常不同。当您滚动时，您会注意到它会发生变化。对于我的 JSFiddle 示例，我只是将`div#overflow`具有`overflow-y:scroll;`属性集的所有内容都包装在其中。参见示例：

[https://jsfiddle.net/BrianIsSecond/tcs390h6/](https://jsfiddle.net/BrianIsSecond/tcs390h6/) <--- 还要注意 div#overflow 不是 100% 高的。我让它比 100% 少了 100 像素。我用它来说明一个简单的错误，我将在接下来解决这个错误。

3.  如果您喜欢我，示例 2 不是您想要的。我发现的最佳解决方案是抓取`$('#overflow').scrollTop()`并将其添加到`$('#offset').offset().top`（即`var ep = $('#offset').offset().top + $('#overflow').scrollTop()`）。基本上，通过将这两个变化的数字相加，它们“排序”相互抵消，为您提供`div#offset`元素的确切位置......或者是吗？嗯，这就是位置`div#overflow`很重要的地方！您必须，必须，必须考虑可滚动容器的位置。为此，请`$('#overflow').offset().top`在`$('#offset').offset().top`添加`$('#overflow').scrollTop()`. 然后，这将考虑可滚动容器在窗口中的位置。参见示例：

[https://jsfiddle.net/BrianIsSecond/yzc5ycyg/](https://jsfiddle.net/BrianIsSecond/yzc5ycyg/)

最终，您正在寻找的是这样的：

```
var w = $('#overflow'),   // overflow-y:scroll;
    e = $('#offset');     // element

$('#overflow').scroll(function(){
    var wh = w.height(),                             // window height
        sp = w.scrollTop(),                          // scroll position
        ep = (e.offset().top - w.offset().top) + sp; // element position

    console.log(ep);
}); 
```

* * *

更新（10/11/17）：我创建了一个函数来帮助解决这个问题。享受！

```
/*
function: betterOffset
hint: Allows you to calculate dynamic and static offset whether they are in a div container with overscroll or not.

            name:           type:               option:         notes:
@param      s (static)      boolean             required        default: true | set false for dynamic
@param      e (element)     string or object    required
@param      v (viewer)      string or object    optional        If you leave this out, it will use $(window) by default. What I am calling the 'viewer' is the thing that scrolls (i.e. The element with "overflow-y:scroll;" style.).

@return                  numeric
*/
function betterOffset(s, e, v) {
    // Set Defaults
        s = (typeof s == 'boolean') ? s : true;
        e = (typeof e == 'object') ? e : $(e);
        if (v != undefined) {v = (typeof v == 'object') ? v : $(v);} else {v = null;}

    // Set Variables
        var w = $(window),              // window object
            wp = w.scrollTop(),         // window position
            eo = e.offset().top;        // element offset
        if (v) {
            var vo = v.offset().top,    // viewer offset
                vp = v.scrollTop();     // viewer position
        }

    // Calculate
        if (s) {
            return (v) ? (eo - vo) + vp : eo;
        } else {
            return (v) ? eo - vo : eo - wp;
        }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-05-13T15:32:50.800

我在编辑旧网站时遇到了同样的问题，我发现的解决方法是使用**$(selector)[0].offsetTop**而不是 $(selector).offset().top 并且它现在对我来说工作正常。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-11-19T20:16:14.287

在 2015 年，不应再使用“正确”答案 - 已修改偏移量。使用上述解决方案的任何代码都将不再正常工作。

解决方案：请将 jquery 升级到较新的版本（适用于 1.11.3）。或者... 将 .offset 调用改为使用 .position 。

# c++ - 省略号函数参数的字节大小

> ID：10297690
> 
> 赞同：4
> 
> 时间：2012-04-24T12:20:09.587
> 
> 标签：c++, c, printf, variadic-functions

我有一个功能：

```
static int myprintf(const char* fmt, ...) 
```

我想知道所有 myprintf 参数的字节大小，如果它们被打印到缓冲区。我需要动态分配一个数组，我可以打印参数（使用`sprinf`or `_vsprinf`）例如在 32 位操作系统中，对于 myprintf("%d %c",10,'a'); myprintf 参数的大小为 5。

我试图像这样实现它：

```
va_list ap;

va_start(ap, fmt);

myArgSize(ap); 
```

有人可以建议如何实施 myArgSize。

我被告知尝试这样的事情

```
char c;
int len = ::_vsnprintf(&c, 1, fmt, ap); 
```

它不起作用，因为写入了一个以上的字节。但可能有一些解决方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:22:00.310

嗯......关于参数类型和顺序的唯一信息在第一个参数中；这就是为什么它是必需的。

对于`printf()`-like 函数，您需要遍历格式化字符串，解析每个`%`-code，并添加相应类型的大小。这不会是微不足道的。记住要处理诸如`%hd`which 期望 a`short`而不是a 之类的事情`int`。此外，将值传递给可变参数函数时会发生转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:55:30.567

您可以使用`vasprintf`将所有格式设置为正确大小的缓冲区，它将分配（并且您必须`free`）。

或者，`vsnprintf`可用于获取字符串的长度`printf`将打印：

```
int n = vsnprintf(NULL, 0, fmt, args); 
```

这是因为如果它有足够的空间，它会返回它将打印的字节数。在这种情况下，它不能打印任何东西，但无论如何都会返回数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T15:10:41.713

尽管您的大部分问题是关于传递给三元函数的参数的大小，但在我看来，您实际上对输出缓冲区需要多大感兴趣。尝试以下操作：

```
va_list ap;

va_start(ap, fmt);

int len = ::vsnprintf( NULL, 0, fmt, ap);
if (len < 0) abort();

char* buffer = (char*) malloc( len + 1);
if (!buffer) abort();

::vsnprintf( buffer, len+1, fmt, ap);

va_end(); 
```

但是，如果您的平台不符合 C99 标准`vsnprintf()`（例如 MSVC），那么您将不得不进行一些调整。对于 MSVC，您可以尝试传入一个猜测大小的缓冲区（也许`strlen(fmt)+1 + (10 * number_of_percent_signs_in_fmt)`或者只是从一个应该涵盖 99% 的案例的大小开始 - 也许`200`），并增加猜测直到它起作用。或者您可以尝试类似[Holger Weiss 的函数](http://www.jhweiss.de/software/snprintf.html)[系列`snprintf()`](http://www.jhweiss.de/software/snprintf.html)。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-24T12:30:16.633

您可以使用 sizeof(type_name) 并使用 for 循环遍历所有参数，type_name 是 c 数据类型中的任何一种，如 int、float、long 等。然后添加所有字节，

# java - 是否可以向 JSF bean 添加自定义验证？

> ID：10297692
> 
> 赞同：0
> 
> 时间：2012-04-24T12:20:35.083
> 
> 标签：java, validation, jsf-2

这是关于 JSF 中的验证。我知道有两种验证方式

1.  Bean 验证
2.  JSF 验证

我想编写自己的验证类。是否可以将自定义验证类添加到 JSF bean？

我不想在我的 facelett 中有验证类。只有在豆...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:32:14.050

是的，您可以像这样编写自己的验证器类：

```
@FacesValidator("customValidator")
public class CustomValidator implements Validator{

    public void validate(FacesContext context, UIComponent component,
            Object value) throws ValidatorException {
        // do your validation here
    }
} 
```

并在你的 facelets 中使用它：

```
<h:inputText value="#{myBean.myValue}">
  <f:validator validatorId="customValidator" />
</h:inputText> 
```

注意`@FacesValidator`注解的内容必须与 的`validatorId`属性相匹配`f:validator`。

此外，jsf 输入元素有一个`validator`属性。您可以使用此属性将验证委托给支持 bean 中的特殊方法。

和

```
public void validateInput(FacesContext context, 
                          UIComponent component, Object object) {
  // your validation with 'object' here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:30:07.337

你可以这样做，

请看这里。 [http://www.javabeat.net/examples/2008/07/09/write-your-own-validator-in-jsf/](http://www.javabeat.net/examples/2008/07/09/write-your-own-validator-in-jsf/)

# moles - GetEnumerator 抛出的 MoleNotImplementedException

> ID：10297696
> 
> 赞同：0
> 
> 时间：2012-04-24T12:20:53.087
> 
> 标签：moles, pex

我是 Moles 的新手，所以请原谅这个简单的问题，但根据文档，我认为这应该可行：

```
 MDataServiceCollection<string> dataServiceCollectionMock = new
            MDataServiceCollection<string>();

        new MCollection<string>(dataServiceCollectionMock)
        {
            SystemCollectionsIEnumerableGetEnumerator = () =>
            {
                return new List<string>(new string[] { "a", "b", "c" }).GetEnumerator();
            }
        };

        string result = string.Empty;
        foreach (string s in dataServiceCollectionMock.Instance)
        {
            result += s;
        } 
```

我正在用我自己的实现替换 GetEnumerator，这样我就可以在使用 DataServiceCollection 的实例时注入我迭代的值。我期待 s 返回“abc”。但是我得到以下异常：

Microsoft.Moles.Framework.Moles.MoleNotImplementedException：Collection`1.GetEnumerator() 未被破坏。

非常感谢任何帮助。

问候，克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:06:03.433

制定了解决方案 - 调用错误的方法来解决问题。

而不是：

```
SystemCollectionsIEnumerableGetEnumerator = () =>
        {
            return new List<string>(new string[] { "a", "b", "c" }).GetEnumerator();
        } 
```

应该：

```
GetEnumerator = () =>
        {
            return new List<string>(new string[] { "a", "b", "c" }).GetEnumerator();
        } 
```

# javascript - 你知道 YUI 3 中的所见即所得吗？

> ID：10297697
> 
> 赞同：0
> 
> 时间：2012-04-24T12:20:54.520
> 
> 标签：javascript, yui, wysiwyg

是否有 Yahoo Text Editor 但使用 YUI3 的实现？我正在寻找一种使用 YUI3 轻松创建所见即所得的方法。

任何想法 ？

（ 对不起我的英语不好 .. ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:38:20.097

有一个作为 FRAMEWORK 的编辑器小部件——这意味着它没有按钮等，它只是一个创建的普通 iframe，并且存在基本的编辑器功能，但没有供用户执行任何操作的 GUI 元素。

见[http://yuilibrary.com/yui/docs/editor/](http://yuilibrary.com/yui/docs/editor/)

提供按钮非常容易，基本上，这是一个供程序员使用的小部件，而不是开箱即用的。

我不想责备你（太多）问这个问题，但这在 YUI3 项目页面中很明显。

# ruby-on-rails - 如何从在rails中有嵌套值的json哈希将数据保存到数据库

> ID：10297700
> 
> 赞同：1
> 
> 时间：2012-04-24T12:21:03.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

从数据库 to_json 渲染数据效果很好

```
def getOrderDetails
    #To get the details of a particular guest_order and its batches and items
    @guest_order = GuestOrder.find(params[:id])
    render json: @guest_order.to_json(except: [:created_at, :updated_at], 
            include: {order_batches: {except: [:guest_order_id, :created_at, :updated_at], 
            include: {order_items: {except: [:order_batch_id, :created_at, :updated_at] } }
                }
              }
            )
  end 
```

但是，如何将相同表的数据保存到数据库中。参数是

```
Parameters: {"guestOrder"=>"{\"GuestOrder\"{\"GuestOrderId\":1,
\"orderTime\":\"2012-04-25 18:28:30\",\"notes\":\"spicy\",\"userId\":14,\"tableId\":1,
\"batch\":[{\"items\":[{\"itemId\":1,\"quantity\":4,\"dishId\":1},
{\"itemId\":2,\"quantity\":4,\"dishId\":3},
{\"itemId\":3,\"quantity\":3,\"dishId\":6}],
\"placed\":\"2012-04-25 18:28:30\",\"batchId\":1}],
\"numberOfAdults\":1,\"numberOfChilderns\":3}}"} 
```

我已经像这样解析了参数值，

```
def guestOrder
    guest_order = JSON.parse(params["guestOrder"])
    # How to store the values from guest_order to database tables
end

    1.9.2p290 :002 > guestOrder = JSON.parse("{\"GuestOrder\"{\"GuestOrderId\":1,
\"orderTime\":\"2012-04-25 18:28:30\",\"notes\":\"spicy\",\"userId\":14,\"tableId\":1,
\"batch\":[{\"items\":[{\"itemId\":1,\"quantity\":4,\"dishId\":1},
{\"itemId\":2,\"quantity\":4,\"dishId\":3},
{\"itemId\":3,\"quantity\":3,\"dishId\":6}],
\"placed\":\"2012-04-25 18:28:30\",\"batchId\":1}],
\"numberOfAdults\":1,\"numberOfChilderns\":3}}")

 => {"GuestOrder"=>{"GuestOrderId"=>1, "orderTime"=>"2012-04-25 18:28:30", "notes"=>"spicy", 
"userId"=>14, "tableId"=>1, "batch"=>[{"items"=>[{"itemId"=>1, "quantity"=>4, "dishId"=>1}, 
{"itemId"=>2, "quantity"=>4, "dishId"=>3}, {"itemId"=>3, "quantity"=>3, "dishId"=>6}], 
"placed"=>"2012-04-25 18:28:30", "batchId"=>1}], "numberOfAdults"=>1, 
"numberOfChilderns"=>3}} 
```

这里guest_orders有很多order_batches，order_batches有很多order_items

```
# == Schema Information
#
# Table name: guest_orders
#
#  GuestOrderId   :integer         not null, primary key
#  adults         :integer
#  children       :integer
#  orderTime      :datetime
#  tableId        :integer
#
# Table name: order_batches
#
#  batchId        :integer         not null, primary key
#  placed         :datetime
#  guest_order_id :integer
#
# Table name: order_items
#
#  itemId         :integer         not null, primary key
#  quantity       :integer
#  dishId         :integer
#  order_batch_id :integer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:19:53.857

```
 def guestOrder
    guest_order = JSON.parse(params["guestOrder"])["GuestOrder"]
    placed_at = Time.zone.parse(guest_order["orderTime"])
    @order = GuestOrder.new(placed: placed_at, guest_table_id: guest_order["tableId"], user_id: guest_order["userId"], 
            adults: guest_order["numberOfAdults"], children: guest_order["numberOfChilderns"], notes: guest_order["notes"])
    guest_order["batch"].each do |batch|
      placed = Time.zone.parse(batch["placed"])
      @batch = OrderBatch.new(placed: placed)
      batch["items"].each do |item| 
        @batch.order_items << OrderItem.new(dish_id: item["dishId"], quantity: item["quantity"]) 
      end 
      @batch.guest_order = @order
      @batch.save 
    end
    if @order.save 
      render json: @order.to_json(only: [:id], message: "success") 
    else 
      render json: @order.errors 
    end  
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:25:33.893

在模型中使用带有列名的“序列化”关键字来保存 json 数据。

例如：列名是json_data，在模型中

```
serialize :json_data 
```

然后在你的控制器中使用，

```
@model_obj.json_data = {:company => { :name => "IBM", :place => "US" }, :employee => {:name => "Mohan", :address => "US"}} 
```

然后保存对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:28:40.163

你绝对应该看看**accept_nested_attributes_for** ActiveRecord 方法 [http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)还有一些关于它的Railscasts：[http ://railscasts.com/episodes?utf8 =%E2%9C%93&search=嵌套+表格](http://railscasts.com/episodes?utf8=%E2%9C%93&search=nested%20forms)

所以在你的 GuestOrder 模型中应该有这样的东西：

```
accepts_nested_attributes_for :order_batches 
```

在您的参数中， order_batches 属性应包含在单独的哈希中，如下所示：

```
"order_batches_attributes" => {"0" => {"placed" => "false"}, "1" => {"placed" => "true"}} 
```

如果属性有效，order_batches 将使用正确的 GuestOrderId 自动保存在 db 中。

# visual-studio-2010 - 使用 TFS 部署 ASP.NET Web 应用程序

> ID：10297702
> 
> 赞同：0
> 
> 时间：2012-04-24T12:21:08.593
> 
> 标签：visual-studio-2010, iis-7

我试图找出与我类似的其他公司如何将他们的 Web 应用程序部署到生产环境中。

我们有传统的 3 个环境设置（Dev、Stage、Prod） 一旦应用程序在 Stage 中经过测试，我们将文件 XCopy 到生产，设置 IIS 并进行部署。

我们最近购买了 TFS 2010，我们使用它的方式与过去使用 VSS 的方式基本相同，只是用于存储源代码。

我正在尝试找到最有效的方式来部署我们的 Web 应用程序。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:15:34.767

您还可以使用 web 部署或使用安装程序包，例如 WiX。我们通常使用安装程序包，因为我们通常有很多依赖于环境的配置。使用单个安装程序包，您可以在整个部署管道中安装和测试相同的二进制文件集，但在安装时指定了不同的配置（例如 web.config）。您可以使用 psexec 从 msbuild 远程安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:19:19.843

我们使用 Tfs Deployer (http://tfsdeployer.codeplex.com/) 和自定义的 powershell 脚本来进行实际部署。然后稍微调整构建模板以设置初始构建质量。

这意味着我们可以将完全相同的构建推送到任何（现有）环境，并且非常容易，非技术人员也可以做到。这也是一个很好的扩展点，我可以在其中集成其他东西（自动化测试/电子邮件），这些东西也可以反馈到系统中并开始部署到下一阶段。

# c# - 非托管资源、IDisposable 和自定义类型

> ID：10297704
> 
> 赞同：3
> 
> 时间：2012-04-24T12:21:13.040
> 
> 标签：c#, garbage-collection, idisposable, unmanagedresources, idbconnection

关于这个主题的另一个话题，因为我厌倦了阅读无数主题以找到我的问题的答案:)

假设我们有以下类：

```
public class MyClass
{
   private const string conString = "connection string";

   private int Operation()
   {
      int count = 0;

      using(var con = SqlConnection(conString))
      {
         string select_cmd = "SELECT * FROM TABLE";

         using(var cmd = new SqlCommand(select_cmd, con))
         {
            using(var reader = cmd.ExecuteReader())
            {
               while(reader != null && reader.Read())
                  count++;
            }
         }
      }

      return count;
   }

} 
```

由于与数据库的连接是在 using 语句中实例化的，因此 con.close() 和最终 con.dispose() 方法将被调用，是否需要为 MyClass 实现 IDisposable？MyClass 超出范围时会被垃圾收集吗？

**编辑：**

谢谢你的回复，这就是我的想法，但我需要说清楚。还有一个问题。

如果我的类有几个 Operations() 在数据库上做一些工作，从资源消耗的角度来看，拥有一个 SqlConnection 成员，实例化并在类构造函数上打开它并实现 IDisposable 以关闭它而不是更好的做法在每个操作中使用“使用”语句（在每个操作中打开和关闭数据库）？当然，那样我应该只在 using 语句中实例化和使用 MyClass 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:24:46.187

不，您只需要实现 IDisposable 如果您的类在 Operation() 方法之外持有 SqlConnection 实例，这样它就可以与类本身保持活动状态（例如，如果您将它分配给类成员字段或财产）。

在您的类超出范围之前，SqlConnection 实例将被标记为符合清理条件，因为该实例超出了 using 块中的范围。最重要的是，非托管数据库连接（由 SqlConnection 封装）已通过 Dispose 调用释放。当 GC 感到有足够的压力证明进行 GC 通过时，SqlConnection 的托管部分将被释放。

至于您的类实例，它也将由 GC 自行决定释放，除非您在应用程序的整个生命周期内创建和销毁大量类实例，否则您无需担心这一点（我想数百万）。

**编辑**

对于第二个问题，最好为每个方法使用和处理 SqlConnection 实例，因为这个特定的数据库客户端类在内部实现了连接池（即：当你处理它一段时间时它并没有真正关闭连接，所以当一个新的SqlConnection 被创建它重用打开连接池中的一个）。

请参阅（旧但有效）：http: [//msdn.microsoft.com/en-us/library/8xx3tyca%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/8xx3tyca%28v=vs.71%29.aspx)

如果您使用没有实现自己的池的数据库客户端 API，最好按照您的建议手动管理它。但是，您必须小心同步对连接的访问​​（即：不要让 2 个线程同时使用它）并自己管理生命周期问题（例如：如果您的类在应用程序的所有持续时间内都保持活动状态，那么您将无限期打开数据库资源......等等）

大多数现代的（MySql Connector.NET、SQL Server）都实现了池化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:23:34.993

完成`Operation()`后，该方法中使用的所有非托管资源都将被释放。它没有理由实施`IDisposable`。`MyClass`不会打开任何非托管资源，因此不需要实现该接口。

关于您的第二个问题，您的类的实例将像任何其他托管对象一样被垃圾收集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:23:51.217

不，不需要实现 IDisposable 接口，你没有资源可以释放。

# android - 在 android 的谷歌地图上绘制多边形叠加层

> ID：10297706
> 
> 赞同：1
> 
> 时间：2012-04-24T12:21:16.337
> 
> 标签：android, google-maps, overlay, kml

我解析了一个 KML 文件，我能够从中提取经度和纬度数据现在的问题是我正在尝试在我的 android 应用程序中使用这些数据绘制一个多边形，但是每当我尝试这样做时，没有任何变化，我得到了默认值当我运行谷歌地图时打开的地图。我已经尝试了许多代码，这些代码在stackoverflow上给出了正确的答案，其中给出了相同的地理点也没有出现......有没有人知道可能是什么问题？这是我在其中尝试过代码的链接，但它不起作用 [在 Google Maps 上绘制线条/路径](https://stackoverflow.com/questions/2176397/drawing-a-line-path-on-google-maps)

提前致谢

```
 public void draw(Canvas canvas, MapView mapv, boolean shadow){
        super.draw(canvas, mapv, shadow);

        Paint   mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setColor(Color.RED);
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(2);

        GeoPoint gP1 = new GeoPoint(19240000,-99120000);
        GeoPoint gP2 = new GeoPoint(37423157, -122085008);

        Point p1 = new Point();
        Point p2 = new Point();
        Path path = new Path();

        projection.toPixels(gP1, p1);
        projection.toPixels(gP2, p2);

        path.moveTo(p2.x, p2.y);
        path.lineTo(p1.x,p1.y);

        canvas.drawPath(path, mPaint);
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-24T12:43:31.217

你是否正确地覆盖了“draw()”方法？是否有任何 super() 丢失，或者你没有在给定的画布参数上绘制？

# eclipse - 单击 eclipse.exe 时 Eclipse 未打开

> ID：10297711
> 
> 赞同：2
> 
> 时间：2012-04-24T12:21:30.153
> 
> 标签：eclipse

当我试图通过双击打开 Eclipse exe 文件时，没有打开 Eclipse 窗口。以前它工作正常，但今天它没有打开？如果有人给出快速修复，它将完全有帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T12:28:39.370

这可能有很多原因。尝试以下方法：

*   尝试找到eclipse启动时通常使用的工作区。根据您使用的操作系统，类似的位置`c:\users\agarwal\workspace`是标准的。
*   在那里找到一个文件`.metadata\.log`。这是一个文本文件，应该包含一些关于启动的信息，以及堆栈跟踪（如果 Java 失败）。
*   如果找不到，请查看是否`javaw.exe`在您的路径上，以便 eclipse 至少会找到一个 JRE 来启动 eclipse。如果未定义，请定义以下变量：
    *   `JAVA_HOME`: JDK安装目录的路径
    *   `PATH`: 展开`%JAVA_HOME%\bin`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T12:24:57.220

可能是挂断，它在任务管理器中闲置？

您是否在“eclipse.exe”的进程选项卡中查看过，如果它在那里，试图杀死它？

可能有一个 javaupdate 是不启动 Eclipse 的原因？

# opencv - 在 OpenCV 中查找点集的轮廓

> ID：10297713
> 
> 赞同：5
> 
> 时间：2012-04-24T12:21:39.187
> 
> 标签：opencv, computer-vision, contour, mser

我尝试通过 OpenCV 的 MSER 检测在图像上找到对象。但函数`cvExtractMSER`返回的不是轮廓，而是`CvSeq`创建图形的点集 ( )：

```
(1, 4), (2, 3), (2, 4), (3, 2), (3, 3), (3, 4), (4, 1), (4, 2), (4, 3), (4, 4), ... 
```

![由一组点创建的区域](../Images/73c8cbf77493c01818d4a81384e361c5.png)

但我只需要轮廓点：

```
(1, 4), (8, 4), (8, 1), (4, 1) 
```

![突出显示所需的轮廓点](../Images/a48b528888a843721b77ea058712d795.png)

**我怎样才能找到这个轮廓？**

我认为，最简单（但不是最快）的方法是：

*   用所有点绘制黑白图像（如何？逐点绘制？）
*   用于`findContours`在新图像上查找轮廓

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:57:10.977

findContours() 中的一个选项是传递一个参数，该参数将删除除水平、垂直或对角直线上的端点之外的所有点。如果您创建一个图像并绘制您列出的点，那么 findContours() 可以为您完成其余的工作。

> CV_CHAIN_APPROX_SIMPLE 压缩水平、垂直和对角线段，只留下它们的端点。例如，一个直立的矩形轮廓用 4 个点进行编码。

[http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-08T12:42:35.867

获得任何形状的这些点的最通用方法是在轮廓上使用凸包。（[船体教程](https://docs.opencv.org/3.4/d7/d1d/tutorial_hull.html)）

但是，如果您只在每个方向上寻找 4 个极值点，您可以简单地将轮廓视为 NumPy 数组（它们是）：

如果`c`是轮廓：

```
extLeft = tuple(c[c[:, :, 0].argmin()][0])
extRight = tuple(c[c[:, :, 0].argmax()][0])
extTop = tuple(c[c[:, :, 1].argmin()][0])
extBot = tuple(c[c[:, :, 1].argmax()][0]) 
```

更多信息可以在这里找到：[pyimagesearch.com“使用 OpenCV 寻找轮廓中的极值点”](https://www.pyimagesearch.com/2016/04/11/finding-extreme-points-in-contours-with-opencv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:01:57.330

如果我理解正确，您正在寻找检测到的物体的角落。

您可以遍历您的计数列表并编写一个简单的**逻辑来**通过进行简单的坐标比较来检测 4 个角。

# javascript - 增强画廊效果的 JavaScript 代码

> ID：10297720
> 
> 赞同：0
> 
> 时间：2012-04-24T12:22:02.717
> 
> 标签：javascript, html, image, image-gallery, onmouseover

我目前有一个小型的 JS 画廊（onmouseover）。代码如下。我想要实现的是小图像，一次只显示几个。我找到了我想要达到的效果的 youtube 视频：[视频](http://www.youtube.com/watch?v=5A2-pOM0e6g)

HTML（代码省略）：

```
<div id="imagecontent">
     <img id="about_mojang" src="images/about_mojang_small.jpg" alt="Plain Mojang Logo">
     <img id="about_lego" src="images/about_lego_small.jpg" alt="Minecraft Lego">
     <img id="about_cteam" src="images/about_cteam_small.jpg" alt="Cartoon of the Mojang team">
     <img id="about_minecraftmojang" src="images/about_minecraftmojang_small.jpg" alt="Minecraft logo of Mojang">
     <img id="about_team" src="images/about_team_small.jpg" alt="Photo of the Moajgn team">
     <img id="about_wall" src="images/about_wall_small.jpg" alt="A wall in the Mojang office">
</div>
<div id="bigimage"></div>
<script>window.onload=addImages() ;</script>
</body> 
```

JS（代码省略）：

```
function showPic(i_element) {
  var source = i_element.getAttribute("id") ;
  source  = "images/"+source+".jpg" ;
  var alt = i_element.getAttribute("alt") ;

  var i = document.createElement("img") ;
  i.setAttribute("src",source) ;
  i.setAttribute("alt",alt) ;

  var placeholder = document.getElementById("bigimage") ;
  if (placeholder.childNodes.length != 0 ) 
  {  placeholder.removeChild(placeholder.childNodes[0]); }
  placeholder.appendChild(i) ;

}

//  add the onclick event to the DOM
function addImages() {
    var item = document.getElementById("imagecontent").getElementsByTagName("img") ;
    for (var i=0 ; i<item.length ; i++) {
      item[i].onmouseover = function() {showPic(this) ; } ;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:57:02.470

**检查 jsfiddle 输出**：http: [//jsfiddle.net/srinivasan/EfyKe/](http://jsfiddle.net/srinivasan/EfyKe/)

尝试这样的事情

```
 <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
            <script src="http://code.jquery.com/jquery-latest.js"></script>
            <script type="text/javascript">
            function showPic(i_element) {
              var source = i_element.getAttribute("id") ;
              source  = "images/"+source+".jpg" ;
              var alt = i_element.getAttribute("alt") ;

              var i = document.createElement("img") ;
              i.setAttribute("src",source) ;
              i.setAttribute("alt",alt) ;

              var placeholder = document.getElementById("bigimage") ;
              if (placeholder.childNodes.length != 0 ) 
              {  placeholder.removeChild(placeholder.childNodes[0]); }
              placeholder.appendChild(i) ;

            }

            //  add the onclick event to the DOM
            function addImages() {
                var item = document.getElementById("imagecontent").getElementsByTagName("img") ;
                for (var i=0 ; i<item.length ; i++) {
                  item[i].onmouseover = function() {showPic(this) ; } ;
                }

            }

            </script>
            <style>

            </style>
            </head>
            <body>
            <div id="bigimage" style="height:50px; width:100px; border:1px solid red; margin:0 auto;"></div>
            <div id="prev" style=" width:50px; height:25px; float:left;" ><img src="http://dummyimage.com/25x25/900/FFF.jpg&text=PREV" /></div>

            <div id="imagecontent" style="width:400px; margin:0 auto; border:1px solid red; height:50px;position:relative; overflow:hidden; ">
            <div id="slider" style="width:400px;  float:left; overflow:hidden; position:absolute; " >

                 <img id="about_mojang" src="http://dummyimage.com/50x50/000000/fff.jpg&text=VS" alt="Plain Mojang Logo">
                 <img id="about_lego" src="http://dummyimage.com/50x50/000000/fff.jpg&text=VS" alt="Minecraft Lego">
                 <img id="about_cteam" src="http://dummyimage.com/50x50/000000/fff.jpg&text=VS" alt="Cartoon of the Mojang team">
                 <img id="about_minecraftmojang" src="http://dummyimage.com/50x50/000000/fff.jpg&text=VS" alt="Minecraft">
                 <img id="about_team" src="http://dummyimage.com/50x50/000000/fff.jpg&text=VS" alt="Photo of the Moajgn team">
                 <img id="about_wall" src="http://dummyimage.com/50x50/000000/fff.jpg&text=VS" alt="A">
                 <img id="about_team" src="http://dummyimage.com/50x50/000000/fff.jpg&text=VS" alt="Photo of the Moajgn team">
                 <img id="about_team" src="http://dummyimage.com/50x50/000000/fff.jpg&text=VS" alt="Photo of the Moajgn team">
                 <img id="about_wall" src="http://dummyimage.com/50x50/000000/fff.jpg&text=VS" alt="A">

            </div>
            </div>
            <div id="next" style=" float:right; width:25px; height:25px;"><img src="http://dummyimage.com/25x25/900/FFF.jpg&text=NEXT" /></div>

            <script>window.onload=addImages() ;</script>
            <script type="text/javascript">
            var i=0;
            var speed=5;
              $("#next").click(function(){
                  i=document.getElementById('slider').style.left;
                    i=(i.replace("px",""));
                  for(j=0;j<speed;j++){
                $("#slider").animate({left:i},"fast");
                i=i-60;
                  }

               });

             $("#prev").click(function(){
                 i=document.getElementById('slider').style.left;
                 i=(i.replace("px",""));
                 if(i!='0'&&i<'0'){
                  for(j=0;j<speed;j++){
                $("#slider").animate({left:i},"fast");
                i=parseInt(i)+parseInt(60);
                  }
                 }
                 else{
                     $('#prev').attr('disabled', '');
                 }
               });
            </script>
            </body>
            </html> 
```

# haskell - 使用 cabal 安装 semigroups 失败

> ID：10297722
> 
> 赞同：3
> 
> 时间：2012-04-24T12:22:05.643
> 
> 标签：haskell, cabal, haskell-snap-framework, haskell-platform, cabal-install

我想安装 Snap，但我是 Haskell 及其平台的新手。

我使用 cabal 安装 Snap，但无法安装 semigroups ：

```
% cabal install snap
Resolving dependencies...
Configuring semigroups-0.8.3...
Preprocessing library semigroups-0.8.3...
Building semigroups-0.8.3...
[1 of 4] Compiling Numeric.Natural.Internal ( Numeric/Natural/Internal.hs, dist/build/Numeric/Natural/Internal.o )
[2 of 4] Compiling Numeric.Natural  ( Numeric/Natural.hs, dist/build/Numeric/Natural.o )
[3 of 4] Compiling Data.List.NonEmpty ( Data/List/NonEmpty.hs, dist/build/Data/List/NonEmpty.o )

Data/List/NonEmpty.hs:115:4:
    Can't make a derived instance of `Data (NonEmpty a)'
      (You need -XDeriveDataTypeable to derive an instance for this class)
    In the data type declaration for `NonEmpty'

Data/List/NonEmpty.hs:115:10:
    Can't make a derived instance of `Typeable (NonEmpty a)'
      (You need -XDeriveDataTypeable to derive an instance for this class)
    In the data type declaration for `NonEmpty' 
```

这是我的 cabal 版本：

```
% cabal --version
cabal-install version 0.10.2
using version 1.10.2.0 of the Cabal library 
```

我已经看到 semigroups 是许多 Snap 依赖项的依赖项，我该如何纠正这个安装？

我在 ubuntu 中运行 gnome « Vous utilisez actuellement Ubuntu 10.04 LTS - le Lynx Lucide - version sortie en avril 2010 »

编辑：

在 semigroups.cabal 文件的包中，我看到了这个：

```
 if !impl(hugs)
    other-extensions: DeriveDataTypeable
    cpp-options: -DLANGUAGE_DeriveDataTypeable 
```

我可能不得不让 « impl(hugs) » 返回一些虚假的东西？（但我不知道它是什么:)）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:48:47.053

您可以通过 cabal 调用传递特定于 ghc 的标志

```
cabal install snap --ghc-option=-XDeriveDataTypeable 
```

[有关这些标志的更多信息，请参见Cabal 用户指南](http://www.haskell.org/cabal/users-guide/installing-packages.html#building-and-installing-a-user-package)的“用于构建的程序”部分。

# animation - UDK 动画创作

> ID：10297725
> 
> 赞同：0
> 
> 时间：2012-04-24T12:22:15.447
> 
> 标签：animation, 3d, modeling, editing, unreal-development-kit

我可以在 3 个月内在 UDK 中创建非常详细的动画，例如 samaratian UDK 演示吗？

我以前没有任何 UDK 经验，但我在 Zbrush 和 3Ds Max 中建模了一些基本模型。

那么，我是否可以在 3 个月内创建一个完整且经过编辑的动画（当然，首先要学习它）？我需要投入多少时间？

如果你有任何更好的 3D 电影动画场景的程序，你能把那个程序的名字给我推荐一下吗？

您能否提供一些有关 UDK（或您的程序）的参考资料，以便我可以立即开始学习？

所以我是一个完整的初学者，主要目标是创建详细的动画（我当然会在视频编辑程序中编辑原始的 3D 动画）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:43:56.873

您不能使用 UDK 创建详细的动画。它不是动画套件。它是一个游戏引擎。您需要做的是使用其他工具（例如 Maya 或 3Ds Max）制作所有动画，然后将它们导入 UDK。当您拥有 .fbx 格式的正确动画时，您可以使用 UDK 操作它们。您可以使用一组单独的动画制作动画树。UDK 支持动画之间的混合等功能。当然你可以做一个像 samaritan 这样的电影演示，但是你需要从另一个软件创建动画并将它们导入到 UDK。之后，您可以使用 UDK 的工具（例如 Kismet 和 Matinee）来制作电影内容。

# arrays - 从调试信息中检索变量类型

> ID：10297732
> 
> 赞同：1
> 
> 时间：2012-04-24T12:22:24.397
> 
> 标签：arrays, debugging, objdump, dwarf

考虑 ：

```
int x[] = {1, 2, 3};

int main(){
    return 0;
} 
```

如果我们对数据部分进行 objdump，我们将得到变量 x，其起始地址和大小为 (4*3) 字节。有没有简单的方法来检索 x 是一个数组以及什么类型的信息？

我知道我们可以使用 dwarfdump -i a.out 来做到这一点，然后解析结果以达到同样的效果，但是有什么更简单的方法可以做到。我只需要检查它是否是一个数组以及什么类型？

问候，

潘卡伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T02:21:38.123

您可以使用 elfutils 中的 DWARF 读取库来解析 DWARF，找到变量，然后解码其类型。这不是微不足道的，但图书馆确实有点帮助。

# linq-to-objects - 在 LINQ 条件查询中使用“或”

> ID：10297737
> 
> 赞同：2
> 
> 时间：2012-04-24T12:22:42.733
> 
> 标签：linq-to-objects

我有一个带有 CheckedListBox 的表单，用户可以在其中选择多个选项（它正在过滤目录文件列表 - 过滤后的文件出现在第二个列表框中）。

如果我有一定数量的选项，我可以在查询中使用“或”，如下所示：

```
Dim query = From f As System.IO.FileInfo In StartList
    Where f.Name.Contains("Romania")
Where f.Channel = "Channel1" Or f.Channel = "Channel2" 
```

但是由于该人可以单击任意数量的选项（或没有），因此我不能这样做。我尝试了几件事，包括尝试创建多个子查询，然后对它们执行联合，但我无法让它工作。

到目前为止，这是我的代码：

```
Dim Channels = ChannelListBox.CheckedItems

    Dim query = From f As System.IO.FileInfo In StartList
    Where f.Name.Contains("Romania")

    If Channels.Count > 0 Then

        Dim CurrentName As String = Channels(0).ToString

        Dim Subquery = From g As System.IO.FileInfo In query
                Where (g.Name.Contains(CurrentName))

        For i = 1 To Channels.Count - 1

            CurrentName = Channels(i).ToString
            Dim Subquery2 = From h As System.IO.FileInfo In query
                                Where (h.Name.Contains(CurrentName))

            Subquery = Subquery.Union(Subquery2)

        Next i

        FileListBox.DataSource = Subquery.ToList

    Else

        FileListBox.DataSource = query.ToList

    End If 
```

谢谢你的帮助，安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:37:31.877

```
Dim Channels = ChannelListBox.CheckedItems
Dim ChannelNames = From c.ToString In Channels
Dim query = From f As System.IO.FileInfo In StartList
    Where f.Name.Contains("Romania") And ChannelNames.Any(Function(n) f.Name.Contains(n)) 
```

我没有 VB.NET 经验，更不用说 LINQ，所以我希望我的语法是正确的。以下是我将用 C# 编写的内容：

```
var channels = ChannelListBox.CheckedItems;
var channelNames = channels.Select(c => c.ToString());
var query = from f in StartList.Cast<System.IO.FileInfo>()
    where f.Name.Contains("Romania") && channelNames.Any(n => f.Name.Contains(n))
    select f; 
```

# .net - 如何解决“ InvalidOperationException：操作必须有一个类型为流的参数”

> ID：10297740
> 
> 赞同：4
> 
> 时间：2012-04-24T12:22:55.390
> 
> 标签：.net, wcf, rest

浏览服务的 .svc 文件时出错。 **InvalidOperationException：要使操作 MethodName 中的请求成为流，该操作必须具有类型为 Stream 的单个参数”** 在服务合同中：

```
[OperationContract]
         [WebInvoke(RequestFormat = WebMessageFormat.Json,
           ResponseFormat = WebMessageFormat.Json,          
       BodyStyle = WebMessageBodyStyle.Bare,
      UriTemplate = "/upload?filename={filename}&objrid={objrid}")]
     string uploadfile(string filename, long objrid, Stream data);` 
```

编译器不生成 .svc 文件。尽管此操作运行良好。但是该服务中的其他方法不起作用。我该如何解决这个问题？

在 web.config 中：服务标签：

```
 <service behaviorConfiguration="TransferServiceBehavior" name="namespace.Service">

    <endpoint address="/Service" behaviorConfiguration="webby" binding="webHttpBinding" contract="namespace.Icontract" />
<endpoint binding="basicHttpBinding" contract="namespace.Icontract" />

      </service> 
```

行为配置：

```
 <behavior name="TransferServiceBehavior">
      <serviceMetadata httpGetEnabled="false"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <serviceThrottling maxConcurrentCalls="500" maxConcurrentSessions="500" maxConcurrentInstances="500"/>
    </behavior> 
```

绑定cinfig：

此操作工作正常，但同一服务合同中的其他操作不起作用：其他操作：

```
[OperationContract]
    [WebGet(RequestFormat = WebMessageFormat.Json,
      ResponseFormat = WebMessageFormat.Json,
      BodyStyle = WebMessageBodyStyle.WrappedRequest,
      UriTemplate = "/ProcessViewRequestMobile")]
     Stream ProcessDownload(); 
```

当我评论第一个操作时，第二个工作正常。我怎样才能使我的两种方法都起作用。我必须在同一个服务合同中添加这两种方法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:42:26.017

Well, you are getting this error because the default WCF stream formatter does not support this. You are try. all within the same method. This is just not supported, even if it seemingly works somehow.

If this is not a REST endpoint, you can work around this issue by using MessageContract wrapping the multiple parameters into one class.

If this is a REST endpoint or a similar custom endpoint, this programming model is actually supported because REST and some other scenarios have their own formatter which handles multiple parameters correctly. However, if you continue to see this issue, then please make sure your WebHttpBehavior is set up correctly. You can also workaround this issue by choosing Buffered option in the TransferMode on the binding. But that seems to be defeating the whole purpose of the Streaming.

# delphi - Delphi DBExpress Parent Child 没有找到对应的主记录

> ID：10297744
> 
> 赞同：0
> 
> 时间：2012-04-24T12:23:17.917
> 
> 标签：delphi, datasnap, dbexpress

我正在使用 DBExpress 连接到 MySQL。我有两个表之间的主从关系。我通过 DatasetProvider 提供父表。在客户端，我有 2 个客户端数据集。其中一个访问提供者，拥有所有父字段+子的嵌套数据集字段。第二个 clientdataset 数据集字段属性设置为父级的嵌套数据集字段。

现在，当我在子数据集中添加新记录时，它给了我一个错误“未找到相应的主记录”。

不知道为什么。

尼拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:04:43.360

当您进行链接时，clientdataset 和 tdatasetfields (nesteddataset) 中存在一个大错误。这发生在 XE 和 XE2 规则中：如果您想要一个提供者的嵌套数据集，则链接表 Period 的列名必须相同。

# asp.net-mvc - 在视图呈现之前，我应该在哪里将数据注入视图？

> ID：10297745
> 
> 赞同：0
> 
> 时间：2012-04-24T12:23:19.357
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

首先，我有一个类似这样的视图模型：

```
[Required]
[Display(Name = "Department")]
[UIHint("DropDown", "MVC", "SelectListName", "DepartmentSelectList")]
public Guid? DepartmentId { get; set; } 
```

我有一个编辑器模板`DropDown`（由 UIHint 设置），其工作原理如下：

```
@{
    var list = this.GetModelSelectList();
}
@Html.DropDownListFor(m => Model, list) 
```

该`this.GetModelSelectList()`调用依赖于 ViewData 中用于下拉菜单的 SelectList 对象。我尝试通过在我的自定义控制器基类中使用以下覆盖来保证这一点：

```
protected override ViewResult View(string viewName, string masterName, object model)
{
    var result = base.View(viewName, masterName, model);
    if ((model is ViewModel) && (!ViewData.ContainsKey(SelectListsViewDataKey)))
    {
        var vm = (ViewModel)model;
        result.ViewData.Add(SelectListsViewDataKey, vm.GetSelectLists());
    }
    return result;
} 
```

这避免了我必须在我的控制器上进行显式调用来添加选择列表来查看数据。SelectList 类型的任何属性在视图数据中始终可用。

我的问题是，是否有更好的注射方式。是否有更专用或更适合此类应用程序的入口点？

编辑：我这样做是因为单个视图模型属性的编辑器模板无法访问整个视图模型实例，而我的选择列表对象就在这个实例中。见[https://stackoverflow.com/a/9867542/8741](https://stackoverflow.com/a/9867542/8741)

# security - 数字证书安全

> ID：10297749
> 
> 赞同：0
> 
> 时间：2012-04-24T12:23:41.243
> 
> 标签：security, private-key, digital-certificate

我一直在用谷歌搜索数字证书的安全性，但我无法找到我的问题的答案：使用一个私钥签署多个证书是否安全？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:55:30.837

这正是所有证书颁发机构所做的。SSL 服务器一直都在做同样的事情，使用一个证书的私钥签署多个文档的个人也会这样做。所以这当然是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-10T08:58:52.307

数字证书用可信第三方的私钥对实体的公钥进行签名。有一条信任链​​必须在某个可以完成验证的点上被信任。

# asp.net - asp.net 的新手 - 如何从附加到按钮的事件处理程序中调用方法

> ID：10297752
> 
> 赞同：1
> 
> 时间：2012-04-24T12:23:44.793
> 
> 标签：asp.net, ajax

我的任务是完成一个已完成 75% 的应用程序。它是使用我从未使用过的三种技术创建的（我是一个工作学期的学生）：asp.net、ajax，它是用 C# 编写的。

此应用程序的功能之一是 html 生成。我写了一个方法，我们称之为createHTML()。我已经将它作为独立设备进行了测试，并且运行良好。我现在想在实际的 .net 环境中运行它。当用户单击按钮 btnCreate 时，createHTML() 方法（正在传递一个 NameValueCollection 'page'）应该抓取一堆 html 并将其写入单独文件夹中的文本文件。

我的问题是：我该怎么做？我有一些使用 VB .net 的经验，通常我会进入设计模式，双击 btnCreate，它会将我带到代码视图，我可以编写一个 btnCreate_Click 处理程序。然而，写原版的那个人把所有的按钮都隐藏了，我不知道如何找到它们。我试图手动编写一个仅弹出消息框的 btnCreate_Click 调用，但无法触发它。

使这个问题更加复杂的是，原始编码人员在整个应用程序中编写了既是 asp:buttons 又是常规 HTML 按钮的按钮。我应该将其设为 asp 按钮，还是最好使用 html 按钮？我了解将一个用于客户端和另一个用于服务器端之间的区别，但是当他同时使用两者时，什么是最好的？当使用 html 时，ajax 是从哪里来的？

为这个问题的简单性道歉，但这让我发疯了。

编辑：

显然，我已经太啰嗦了。以下是按钮的编码方式：

```
<button id="createButton" class="ui-state-default ui-corner-all">Create</button> 
```

哪个是原始的 html 按钮（同样——在这种情况下我使用 AJAX）？或者我应该做这样的事情：

```
<asp:Button ID="createButton" class="blah-blah-ui" PostBackUrl=".../somepage.aspx" runat="server" text="create" />? 
```

如果我执行 asp 按钮（在我的 AJAX 级别 - read:none - 可能是最好的），我如何调用我在页面后面的单独代码中拥有的方法？

如果我的方法在 'modify.aspx.cs' 中被称为 showMessage()，我该如何调用这个 showMessage() 方法？

编辑第二个：

根据我收到的答案，我是在正确的轨道上。问题是，onclick 不起作用。我找到了原始编码器隐藏所有按钮的位置，所以我让它们可见。在我的创建按钮的属性窗口中，OnClick 甚至不是一个选项。附近唯一的选择是 OnClientClick，我假设它是用于 javascript 的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:05:36.963

我会说你应该坚持使用 asp:Button - 请注意这将导致页面在每次点击时重新加载，使用 Ajax 路由可以避免这种情况，但实现你想要的可能会稍微困难一些。

您需要连接代码来处理按钮单击，最简单的方法是使用 OnClick 属性，如下所示

```
<asp:Button ID="createButton" class="blah-blah-ui" runat="server" Text="create" OnClick="createButton_Click" /> 
```

然后在你后面的代码中处理这样的事件

```
protected void createButton_Click(object sender, EventArgs e){} 
```

在那个处理程序中，你可以做任何你想做的事情。

# c# - MongoDB：增加整数字段（C#）

> ID：10297753
> 
> 赞同：1
> 
> 时间：2012-04-24T12:23:45.987
> 
> 标签：c#, integer, atomic, increment, mongodb

如何以原子方式增加整数字段？FindAndModify 方法可以帮助吗？

例如文档包含字段`count`，我想在不检索完整文档并保存回来的情况下增加它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:30:39.160

我确实发表了评论，但我找到了。`$inc`修饰符将在内部增加一个字段。完全原子地用于这个确切的目的。

请参阅此处[“Monog DB 原子操作”](http://www.mongodb.org/display/DOCS/Atomic+Operations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-09T21:58:55.143

根据 Paystey 的回答，这里有一些使用 C# 驱动程序版本 2.1.0 的代码，以防其他人需要它：

```
var filter = Builders<BsonDocument>.Filter.Eq("_id", id);
var update = new BsonDocument("$inc", new BsonDocument { { "votes", 1 } });
var coll = db.GetCollection<BsonDocument>("collection");
var doc = coll.FindOneAndUpdateAsync(filter, update).Result; 
```

# php - openssl_pkcs12_export_to_file 包括 CA？

> ID：10297756
> 
> 赞同：1
> 
> 时间：2012-04-24T12:23:51.307
> 
> 标签：php, openssl

当我用 PHP 导出证书时，`openssl_pkcs12_export_to_file`我测试的手机说它包含一个根 CA，它是一个自签名 CA（至少看起来如此）

我正在使用的代码如下：

```
Class X509 {

    protected $db;
    private $certificate_validity       = 1826;
    private $certificate_values         = array(
                                              "countryName" => "NL",
                                              "stateOrProvinceName" => "XX",
                                              "localityName" => "xxxxxxxxxxxx",
                                              "organizationName" => "xxxxxx",
                                              "organizationalUnitName" => "xxx",
                                              "emailAddress" => "x@xxx.xxx.xxx"
                                          );
    private $signing_configuration      = array(
                                              "digest_alg" => "sha1"
                                          );

    public function __construct() {
        IF(!function_exists(openssl_pkcs12_export_to_file)) {
            return false;
        }
    }

    public function createCertificate($commonName) {
        $this->certificate_values['commonName']     = $commonName;
        $this->certificate_values['internalName']   = $commonName;

        $privateKey     = self::_createPrivateKey();
        $password       = self::_generatePassword();
        $signRequest    = self::_createSignRequest($privateKey);
        $serial         = self::_getNewSerial();
        $signedRequest  = self::_signRequest($signRequest, $serial);

        #Export.
        $export_csr     = self::_exportCSR($signRequest, $commonName);
        $export_p12     = self::_exportP12($signedRequest, $commonName, $privateKey, $password);
        $export_cer     = self::_exportCER($signedRequest, $commonName, $privateKey);
        $export_pkey    = self::_exportPKey($privateKey, $commonName, $password);

        return array("name" => $commonName, "password" => $password);
    }

    private function _createPrivateKey() {
        return openssl_pkey_new(array('private_key_bits' => 1024));
    }

    private function _createSignRequest($privateKey) {
        return openssl_csr_new($this->certificate_values, $privateKey);
    }

    private function _getNewSerial() {
        // making a random serial, since it does not matter YET
        return rand(65000, 65536);
    }

    private function _generatePassword() {
        return 'Derp1234!@';
    }

    private function _signRequest($signRequest, $serial) {
        return openssl_csr_sign($signRequest, $this->root_ca_certificate, array($this->root_ca_privatekey_file, $this->root_ca_privatekey_pass), $this->certificate_validity, $this->signing_configuration, $serial);
    }

    private function _exportCSR($signedRequest, $commonName) {
        return openssl_csr_export_to_file($signedRequest, $this->certificate_csr_path.$commonName.".csr");
    }

    private function _exportP12($signedRequest, $commonName, $privateKey, $password) {
        return openssl_pkcs12_export_to_file($signedRequest, $this->certificate_p12_path.$commonName.".p12", $privateKey, $password);
    }

    private function _exportCER($signedRequest, $commonName, $privateKey) {
        return openssl_x509_export_to_file($signedRequest, $this->certificate_cer_path.$commonName.".cer");
    }

    private function _exportPKey($privateKey, $commonName, $password) {
        return openssl_pkey_export_to_file($privateKey, $this->certificate_pkey_path.$commonName."privatekey.pem", $password);
    }
}

$c = new X509();
var_dump($c->createCertificate($_GET['cn'])); 
```

我是否忽略了某些东西，还是完全错误地做错了？

# facebook - 从 API 读取 Facebook 事件

> ID：10297758
> 
> 赞同：0
> 
> 时间：2012-04-24T12:23:53.373
> 
> 标签：facebook, facebook-graph-api, facebook-fql

Facebook Javascript SDK 有问题。

我想获取链接到特定页面的所有事件的列表。

到目前为止，我的成功有限。

我能够检索当前或即将发生的事件的数据，但我也想检索过去的事件。

我有兴趣获取活动的 facebook 页面是： [https ://www.facebook.com/TRUTH.Jhb/events?key=past](https://www.facebook.com/TRUTH.Jhb/events?key=past)

到目前为止，我已经尝试了以下[FQL 语句](https://developers.facebook.com/tools/explorer/?method=GET&path=fql%3Fq%3DSELECT%20eid%2C%20name%20FROM%20event%20WHERE%20eid%20IN%20%28SELECT%20eid%20FROM%20event_member%20WHERE%20uid%20%3D%2079431685972%29%20AND%20start_time%20%3C%200)

但是这个查询返回一个空的结果。

你能帮帮我吗，显然我缺少一些东西

提前致谢

韦兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:04:32.653

解决了。嵌套的 select 语句从 event_member 表中读取，该表默认只返回当前事件。

您必须在此语句中设置 start_time 条件，例如：

SELECT eid, name FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid = 79431685972 AND **start_time > 0** )

这有效地返回过去和当前事件

# java - 统计访问次数的 Servlet

> ID：10297759
> 
> 赞同：2
> 
> 时间：2012-04-24T12:23:56.267
> 
> 标签：java, servlets

我是 servlet 的新手，今天上了第一课。

现在，我正在尝试创建一个统计用户访问次数的 servlet。

总是在我如何增加计数器时出错：

```
 HttpSession session = req.getSession(true);
Integer visitCount = new Integer(0);
String visitCountKey = new String("visitCount");
synchronized (this) {
    if (!session.isNew()) {
        visitCount = (Integer) session.getAttribute(visitCountKey);
        visitCount = new Integer(visitCount.intValue() + 1); //error
    }
    session.setAttribute(visitCountKey, visitCount);
} 
```

我正在创建一个新整数，因为我在 stackoverflow 上看到整数是不可变的。它仍然不起作用，并且在那条线上给了我一个错误。

有人能帮我吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:28:12.287

您应该添加`null`检查`visitCount`

```
HttpSession session = req.getSession(true);
String visitCountKey = new String("visitCount");
synchronized (this) {

    Integer visitCount = (Integer) session.getAttribute(visitCountKey);
    if(visitCount == null) {
        visitCount = 0;
    }
    visitCount = new Integer(visitCount.intValue() + 1);
    session.setAttribute(visitCountKey, visitCount);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:27:44.420

您可能第一次返回空值。错误是空引用异常吗？

您需要检查 null 并将 visitCount 设置为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:31:29.413

visitCount 为空，因为您使用 isNew() 检查该值是否已存储。

手动检查 visitCount 是否为空。

从文档：

> HttpSession 的实现代表服务器的会话视图。在客户端加入之前，服务器认为会话是新的。在客户端加入会话之前，isNew 方法返回 true。true 值可以指示以下三种情况之一：
> 
> *   客户还不知道会话
> *   会议尚未开始
> *   客户端选择不加入会话。如果客户端仅支持 cookie 并选择拒绝服务器发送的任何 cookie，则会发生这种情况。如果服务器支持 URL 重写，这种情况不会经常发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T12:32:05.030

如果您真的决定这样做，您应该将整数`visit`变量作为静态类变量。

公共静态 int 访问；

public ... doGet(...){ VISIT++; }

# directx - DirectX10 HLSL - 在 UV 和 Texel 之间来回转换

> ID：10297760
> 
> 赞同：1
> 
> 时间：2012-04-24T12:24:01.773
> 
> 标签：directx, shader, hlsl

我正在尝试在纹素和紫外线之间进行转换

`1/width`我以为我可以通过执行or来定义纹素的大小`1/height`。除以得到纹素数。

我错了。

这是我一直在尝试做的。

```
float4 PostPS(PostIn In) : SV_Target
{
    float4 color = 0;

    uint width, height;
    PostTex.GetDimensions(width, height);

    float2 uv = In.texCoord;
    float2 texelSize = float2(1/width, 1/height);

    // Convert coords to texels
    uint x = (uv.x / texelSize.x);
    uint y = (uv.y / texelSize.y);

    // Convert back again to uv.
    uv.x = x * texelSize.x;
    uv.y = y * texelSize.y;

    color = PostTex.Sample(pointFilter, uv);

    return color;
} 
```

我意识到可能存在某种程度的舍入误差，但我原以为它会在某种程度上起作用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:34:21.863

您将宽度和高度声明为 uint。1 也是 int 或 uint。如果你将 uint 和 uint 分开，你会得到一个 uint。因此，您的 texelSize 将始终为 (0, 0)。

不要除以纹素大小，而是乘以宽度和高度：

```
uint x = uv.x * width;
uint y = uv.y * height; 
```

# vim - 我的领导突然改变主意！或者为什么有些插件的默认领导者改变了？

> ID：10297767
> 
> 赞同：0
> 
> 时间：2012-04-24T12:24:47.407
> 
> 标签：vim

简而言之：我的`<Leader>`密钥在启动过程中某处发生了变化。我已将其保留为默认值`\`，但我的一些插件会加载`<C-A>`。

我知道有些插件根本不使用`<Leader>`或使用它们自己的`<LocalLeader>`密钥或类似的东西（egcvim 默认为`\`即使您`<Leader>`在.vimrc 中更改。这在插件的文档中）。

但是我的问题是插件明确声明它们使用`<Leader>`并且最终映射到`<C-A>something`而不是`\something`.

这样做的插件是：Command-T、easymotion、screen、ShowMarks。

不受影响的插件是 bash-support、a.vim。

我所有的插件都是：

```
 1: /usr/share/vim/vimrc
  2: /usr/share/vim/vim73/debian.vim
  3: /usr/share/vim/vim73/syntax/syntax.vim
  4: /usr/share/vim/vim73/syntax/synload.vim
  5: /usr/share/vim/vim73/syntax/syncolor.vim
  6: /usr/share/vim/vim73/filetype.vim
  7: /usr/share/vim/vim73/menu.vim
  8: /usr/share/vim/vim73/autoload/paste.vim
  9: /home/users/dslavchev/.vimrc
 10: /usr/share/vim/vim73/ftoff.vim
 11: /home/users/dslavchev/.vim/bundle/vundle/autoload/vundle.vim
 12: /home/users/dslavchev/.vim/bundle/vundle/autoload/vundle/config.vim
 13: /home/users/dslavchev/.vim/bundle/Vim-R-plugin/ftdetect/r.vim
 14: /usr/share/vim/vim73/ftplugin.vim
 15: /usr/share/vim/vim73/indent.vim
 16: /usr/share/vim/vim73/syntax/nosyntax.vim
 17: /home/users/dslavchev/.vim/bundle/headlights/plugin/headlights.vim
 18: /home/users/dslavchev/.vim/bundle/a.vim/plugin/a.vim
 19: /home/users/dslavchev/.vim/bundle/bash-support.vim/plugin/bash-support.vim
 20: /home/users/dslavchev/.vim/bundle/c.vim/plugin/c.vim
 21: /home/users/dslavchev/.vim/bundle/errormarker.vim/plugin/errormarker.vim
 22: /home/users/dslavchev/.vim/bundle/reload.vim/plugin/reload.vim
 23: /home/users/dslavchev/.vim/bundle/screen.vim/plugin/screen.vim
 24: /home/users/dslavchev/.vim/bundle/ShowMarks/plugin/showmarks.vim
 25: /home/users/dslavchev/.vim/bundle/surround.vim/plugin/surround.vim
 26: /home/users/dslavchev/.vim/bundle/taglist.vim/plugin/taglist.vim
 27: /home/users/dslavchev/.vim/bundle/valgrind.vim/plugin/valgrind.vim
 28: /home/users/dslavchev/.vim/bundle/YankRing.vim/plugin/yankring.vim
 29: /home/users/dslavchev/.vim/bundle/NERD_tree-Project/plugin/NERD_tree_project.vim
 30: /home/users/dslavchev/.vim/bundle/The-NERD-tree/plugin/NERD_tree.vim
 31: /home/users/dslavchev/.vim/bundle/Conque-Shell/plugin/conque_term.vim
 32: /home/users/dslavchev/.vim/bundle/python.vim/plugin/python_fn.vim
 33: /home/users/dslavchev/.vim/bundle/vim-fugitive/plugin/fugitive.vim
 34: /home/users/dslavchev/.vim/bundle/vim-easymotion/plugin/EasyMotion.vim
 35: /home/users/dslavchev/.vim/bundle/vim-easymotion/autoload/EasyMotion.vim
 36: /home/users/dslavchev/.vim/bundle/vim-rails/plugin/rails.vim
 37: /home/users/dslavchev/.vim/bundle/L9/plugin/l9.vim
 38: /home/users/dslavchev/.vim/bundle/L9/autoload/l9.vim
 39: /home/users/dslavchev/.vim/bundle/FuzzyFinder/plugin/fuf.vim
 40: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf.vim
 41: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/buffer.vim
 42: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/file.vim
 43: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/coveragefile.vim
 44: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/dir.vim
 45: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/bookmarkfile.vim
 46: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/bookmarkdir.vim
 47: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/tag.vim
 48: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/buffertag.vim
 49: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/taggedfile.vim
 50: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/jumplist.vim
 51: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/changelist.vim
 52: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/quickfix.vim
 53: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/line.vim
 54: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/help.vim
 55: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/givenfile.vim
 56: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/givendir.vim
 57: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/givencmd.vim
 58: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/callbackfile.vim
 59: /home/users/dslavchev/.vim/bundle/FuzzyFinder/autoload/fuf/callbackitem.vim
 60: /home/users/dslavchev/.vim/bundle/command-t/plugin/command-t.vim
 61: /home/users/dslavchev/.vim/bundle/clang-complete/plugin/clang_complete.vim
 62: /home/users/dslavchev/.vim/bundle/clang/plugin/clang.vim
 63: /home/users/dslavchev/.vim/bundle/better-snipmate-snippet/plugin/nerd_snippets.vim
 64: /home/users/dslavchev/.vim/bundle/better-snipmate-snippet/plugin/snipMate.vim
 65: /home/users/dslavchev/.vim/bundle/better-snipmate-snippet/plugin/support_functions.vim
 66: /home/users/dslavchev/.vim/bundle/SuperTab-continued./plugin/supertab.vim
 67: /usr/share/vim/vim73/plugin/getscriptPlugin.vim
 68: /usr/share/vim/vim73/plugin/gzip.vim
 69: /usr/share/vim/vim73/plugin/matchparen.vim
 70: /usr/share/vim/vim73/plugin/netrwPlugin.vim
 71: /usr/share/vim/vim73/plugin/rrhelper.vim
 72: /usr/share/vim/vim73/plugin/spellfile.vim
 73: /usr/share/vim/vim73/plugin/tarPlugin.vim
 74: /usr/share/vim/vim73/plugin/tohtml.vim
 75: /usr/share/vim/vim73/plugin/vimballPlugin.vim
 76: /usr/share/vim/vim73/plugin/zipPlugin.vim
 77: /home/users/dslavchev/.vim/bundle/better-snipmate-snippet/after/plugin/snipMate.vim
 78: /usr/share/vim/gvimrc
 79: /home/users/dslavchev/.gvimrc
 80: /usr/share/vim/vim73/synmenu.vim
 81: /usr/share/vim/vim73/scripts.vim
 82: /usr/share/vim/vim73/ftplugin/vim.vim
 83: /usr/share/vim/vim73/indent/vim.vim
 84: /usr/share/vim/vim73/syntax/vim.vim
 85: /usr/share/vim/vim73/syntax/lua.vim
 86: /usr/share/vim/vim73/syntax/perl.vim
 87: /usr/share/vim/vim73/syntax/ruby.vim
 88: /usr/share/vim/vim73/syntax/python.vim
 89: /home/users/dslavchev/.vim/bundle/The-NERD-tree/nerdtree_plugin/exec_menuitem.vim
 90: /home/users/dslavchev/.vim/bundle/The-NERD-tree/nerdtree_plugin/fs_menu.vim
 91: /home/users/dslavchev/.vim/bundle/The-NERD-tree/syntax/nerdtree.vim 
```

我的 .vimrc ：

```
set nocompatible               " be iMproved
filetype off                   " required!

set rtp+=~/.vim/bundle/vundle/
call vundle#rc()

" let Vundle manage Vundle
" required! 
Bundle 'gmarik/vundle'

" My Bundles here:
"Bundle 'VimLite'
Bundle 'mbadran/headlights'
Bundle 'a.vim'
Bundle 'bash-support.vim'
Bundle 'c.vim'
Bundle 'errormarker.vim'
Bundle 'reload.vim'
Bundle 'screen.vim'
Bundle 'ShowMarks'
Bundle 'surround.vim'
Bundle 'taglist.vim'
Bundle 'valgrind.vim'
Bundle 'YankRing.vim'
Bundle 'NERD_tree-Project'
Bundle 'The-NERD-tree'
Bundle 'cflow-output-colorful'
Bundle 'Vim-R-plugin'
" Conque Term
Bundle 'Conque-Shell'
" Python
Bundle 'python.vim'
" original repos on github
Bundle 'tpope/vim-fugitive'
Bundle 'Lokaltog/vim-easymotion'
Bundle 'rstacruz/sparkup', {'rtp': 'vim/'}
Bundle 'tpope/vim-rails.git'
" vim-scripts repos
Bundle 'L9'
Bundle 'FuzzyFinder'
" non github repos
"Bundle 'git://git.wincent.com/command-t.git'
" ...
" Clang complete
Bundle 'clang-complete'
Bundle 'clang'

"snipmate
Bundle 'better-snipmate-snippet'

" SuperTab install
Bundle 'SuperTab-continued.'

filetype plugin indent on     " required! 

"Change Leader
"let mapleader=","
" Shows the leader
set showcmd
"This is to enable VimCCC
let g:VIMCCC_Enable = 1 
" Headlights debug
let g:headlights_debug_mode = 1
"This is for using autosyntax
syntax enable
let c_gnu = 1
let c_comment_strings = 1
let c_space_errors = 1
let urly_error = 1
" This is for omni completion
set ofu=syntaxcomplete#Complete
" This for replacing without changing clipboard
nnoremap S "_diwP
vnoremap S "_d"0P

"make buffers not resize
set noequalalways

" Highlights too long lines
if exists('+colorcolumn')
  set colorcolumn=80
else
  au BufWinEnter * let w:m2=matchadd('ErrorMsg', '\%>80v.\+', -1)
endif

" This is for numbering
set number

"This is for cflow
au BufNewFile,BufRead *.cflow setf cflow

"This is for tags
set tags+=tags
set tags+=tags;/
set tags+=~/.vim/tags/tags
set tags+=~/.vim/tags/opencv_tags
set tags+=~/Nuclear_Testing/tags
let Tlist_Auto_Open = 1

"This is for theasures and such
set thesaurus+=/home/users/dslavchev/.vim/thesaurus/mthes10/mthesaur.txt

"This is for mapping
let g:C_Ctrl_j = 'off'
let g:BASH_Ctrl_j = 'off'
nnoremap <C-h> <C-w>h 
nnoremap <C-j> <C-w>j 
nnoremap <C-k> <C-w>k 
nnoremap <C-l> <C-w>l 
map <leader>, A,
inoremap <leader>, <C-o>A,
map <leader>; A;
inoremap <leader>; <C-o>A;

"This is for opening tabs
set tabstop=2
set shiftwidth=2
set expandtab
set cindent

"This is for setting Makefiles with tabs not spaces
autocmd FileType make setlocal noexpandtab

"This is for errormarker
let &errorformat="%f:%l:%c: %t%*[^:]:%m,%f:%l: %t%*[^:]:%m," . &errorformat 
nmap <silent> <unique> \cx :ErrorAtCursor<CR>

"This is for showing marks
"command DoShowMarks

"This is for Valgrind
let g:valgrind_arguments='--num-callers=50'
let g:valgrind_use_horizontal_window=0

"this is for the path
set path+=.,inc,src,../inc,../src

"this is for spellchecks
set spell

"this is for easyreader
let g:EasyMotion_leader_key = '<Leader><Leader>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:12:43.890

我找到了解决方案。最后。

有人正在更改`screen.vim`插件中的映射。

只需在 .vim 中查找 mapleader 即可。

```
" screen(1)-like mappings for buffers
" Ricardo Signes <rjbs-vim@public.manxome.org>

" there should contain a ^A between the quotes, below
" the next revision will have a nicer system for loading this plugin with a
" different meta/leader character
let mapleader = "" 

nnoremap <Leader><Space> :bnext<CR>
nnoremap <Leader>n       :bnext<CR>
nnoremap <Leader><C-n>   :bnext<CR>
nnoremap <Leader>p       :bprev<CR>
nnoremap <Leader><C-p>   :bprev<CR>
nnoremap <Leader>c       :new\|only<CR>
nnoremap <Leader><C-c>   :new\|onlyCR>
nnoremap <Leader>K       :bdel<CR>
nnoremap <Leader>S       :split<CR>
nnoremap <Leader><Tab>   :wincmd w<CR>
nnoremap <Leader>Q       :only<CR>
nnoremap <Leader>Q       :only<CR>
nnoremap <Leader>w       :ls<CR>
nnoremap <Leader><C-w>   :ls<CR>
nnoremap <Leader>a       :e #<CR>
nnoremap <Leader><C-a>   :e #<CR>
nnoremap <Leader>"       :BufExp<CR> 
```

# mysql - MySQL配置推荐

> ID：10297768
> 
> 赞同：0
> 
> 时间：2012-04-24T12:24:48.860
> 
> 标签：mysql, database, mysql-5.1

我有一个非常小的脚本，它从请求标头中获取一些参数并将单个`INSERT`查询发送到托管在 localhost 上的数据库。

数据库有一个表，我不运行任何类型的报告或任何东西，所以基本上 100% 对该服务器的查询都是`INSERT`查询。

该脚本被大量访问，因此我得到了很多同时运行的这些查询。

我正在寻找调整配置文件以支持我的特定需求的方法。

**编辑**

我目前在 phpMyAdmin->status 上看到这些变量似乎很高：

```
Slow_queries 22
Handler_read_rnd 1,496 k
Handler_read_rnd_next 111M
Created_tmp_disk_tables 495
Sort_merge_passes 77
Opened_tables 332
Table_locks_waited 154 
```

我问的原因是因为我很快就会获得更多的并发连接，并且我想在此之前进行调整，以便服务器可以处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:32:14.873

根据您告诉我们的情况，我对您的唯一建议是将您的表转换为使用 InnoDB 引擎，如果它当前使用另一个引擎。这样做的原因是，在 InnoDB 中，`INSERT`s 非常快（行是按主键的顺序存储的，所以它们基本上只是附加到表的末尾）。

# android - 简单的 EditText 货币格式化程序

> ID：10297769
> 
> 赞同：8
> 
> 时间：2012-04-24T12:24:53.727
> 
> 标签：android, currency

> **可能重复：**
> [格式化货币输入editText的更好方法？](https://stackoverflow.com/questions/5107901/better-way-to-format-currency-input-edittext)

问题很简单而且基本......但我找不到一个像样的方法来处理它。我有一些带有货币值的字段，我需要同时具有货币符号和十进制值。这就是我所说的：

![在此处输入图像描述](../Images/1e15f6a59452704f7dd72594ba324af4.png)

用户将输入值：1，然后输入 。然后是 8，然后是 0。我希望它始终可见的 EUR 符号。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T12:37:57.617

尝试使用文本观察器：D

[http://developer.android.com/reference/android/text/TextWatcher.html](http://developer.android.com/reference/android/text/TextWatcher.html)

[格式化货币输入editText的更好方法？](https://stackoverflow.com/questions/5107901/better-way-to-format-currency-input-edittext)

有了这个，你可以在显示之前格式化传入的字符串，所以你可以很容易地附加一个“€”和其他东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:36:03.200

您可以通过使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)来实现。看看这个与你的[问题](https://stackoverflow.com/questions/5107901/better-way-to-format-currency-input-edittext)非常相似的问题。

# c++ - Metro 风格应用的 HTML/CSS 渲染器

> ID：10297772
> 
> 赞同：4
> 
> 时间：2012-04-24T12:24:58.480
> 
> 标签：c++, html, directx, windows-8, windows-runtime

Metro 风格应用程序的当前 WebView 对我来说不可用，因为它托管在单独的 HWND 中，因此无法使用其他控件覆盖 WebView。此外，提供的 API 不足以让我使用它（例如，无法处理“onNavigation”事件）。

我正在寻找一个可以解析 HTML/CSS 并使用 DirectX 呈现的 C++ 库。我愿意编写自己的渲染器，但这并不容易。我会帮助至少有一个合适的 HTML/CSS 解析器。

我还检查了我是否可以使用 Gecko 或 Webkit，但它们会无法通过商店的批准（而且它们非常复杂，对我的项目来说有点矫枉过正。）

其他要求：

*   非 GPL（必须在闭源商业应用程序中允许。）
*   XHTML 投诉解析器/渲染器
*   源代码可用性是一个加号。否则需要 x86 和 ARM 的二进制文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:07:45.630

看看 LibRocket 或 Awesomium。他们在正确的球场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T14:32:34.837

Windows 8.1 中的新 WebView 解决了我之前遇到的所有问题。在 XAML 应用程序中混合新的 WebView 可以在没有任何空域问题的情况下完成（甚至可以将多个 WebView 相互放置）。由于上述解决方案都没有真正解决我的问题（与 Metro-Style 应用程序不兼容），因此我选择为其他寻找信息的人回答我自己的问题。

MSDN 链接：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview)

# java - Ebean 在 Play Framework 2 中查找错误的序列名称

> ID：10297778
> 
> 赞同：18
> 
> 时间：2012-04-24T12:25:18.823
> 
> 标签：java, postgresql, orm, playframework-2.0, ebean

我有一个身份证：

```
@Column(name = "device")
@GeneratedValue(strategy = GenerationType.AUTO, generator = "device_gen")
@SequenceGenerator(name = "device_gen", sequenceName = "device_id")
@Id
public Integer id; 
```

SequenceGenerator 将 sequenceName 定义为`device_id`但尝试保存实体时出现错误：**relation "public.device_seq" does not exist**。

为什么要寻找`device_seq`而不是`device_id`？

我正在使用 PostgreSQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:41:34.593

```
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="device_gen") 
```

# java - 如何在android中设置警报管理器一致？

> ID：10297779
> 
> 赞同：0
> 
> 时间：2012-04-24T12:25:20.347
> 
> 标签：java, android, alarmmanager

我正在通过这种方法设置警报管理器：

```
public void setAlarmManager(Context context, Intent intent, long repeat) {

        PendingIntent pendingIntent;
        pendingIntent = PendingIntent.getService(context, 0, intent, 0);

        AlarmManager alarmManager = (AlarmManager) context
                .getSystemService(context.ALARM_SERVICE);

        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.add(Calendar.SECOND, 10);
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
                calendar.getTimeInMillis(), repeat, pendingIntent);
    } 
```

通过这种方法，我在固定的时间后发送特定数量的短信。但是这种方法并不能保持一致。特别是当进入睡眠模式时它不起作用。我怎样才能使它连续，它也会在睡眠模式下工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:53:55.287

`AlarmManager`with a `_WAKEUP`alarm 仅保证在您使用`getBroadcast()` `PendingIntent`.

如果您的工作只需要几毫秒，请切换`Service`到`BroadcastReceiver`.

如果您的工作需要超过几毫秒，请考虑[使用 my`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful)，它提供了一种模式，可以让`_WAKEUP`警报可靠地完成工作。

# java - Spring 表单——modelAttribute 名称为 java 常量

> ID：10297788
> 
> 赞同：1
> 
> 时间：2012-04-24T12:25:48.860
> 
> 标签：java, forms, spring, scriptlet, modelattribute

为了不在代码中重复自己，我使用`modelAttribute`name 作为 java 常量

```
@Controller
@RequestMapping("/")
public class Controller {
    public static final String MODEL_ATTRIBUTE = "myModel";

    public String renderPage(Model model) {
        model.addAttribute(MODEL_ATTRIBUTE, ...);
        return "index";
    }
} 
```

现在我使用 scriptlet 将此常量导入 JSP（我知道 scriptlet 不好，但我不熟悉更好的解决方案）。

```
<%@page contentType="text/html" pageEncoding="UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>

<%@page import="static com.example.Controller.*" %>

<form:form action="/" modelAttribute="<%= MODEL_ATTRIBUTE %>">

    <form:label path="attr1">Attribute:</form:label>
    <form:input path="attr1" />

    <c:forEach items="${???.attr2}" var="item">
        ...    
    </c:forEach>
    <input type="submit" />
</form:form> 
```

`modelAttribute`我应该如何在 forEach 循环中引用对象？Spring 形式的[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:41:01.577

使用型号名称，

```
<c:forEach items="${myModel.attributeNameFromYourModel}" var="item">
        ...    
</c:forEach> 
```

# php - 样式检查 PHP 渐进式（增量式）

> ID：10297789
> 
> 赞同：3
> 
> 时间：2012-04-24T12:25:51.523
> 
> 标签：php, coding-style, codesniffer

我喜欢对我的代码库进行自动检查，以确保我没有违反风格指南。当我在 Perl 工作时，我会使用[Perl::Critic](https://metacpan.org/module/Perl%3a%3aCritic)来检查我的风格，并使用[Test::Perl::Critic::Progressive](http://search.cpan.org/~thaljef/Test-Perl-Critic-Progressive-0.03/lib/Test/Perl/Critic/Progressive.pm)来检查任何现有的违规行为，这样我就可以将其应用于现有的代码库。

现在我发现自己在一个 PHP 项目中。[PHP CodeSniffer](http://pear.php.net/package/PHP_CodeSniffer/)似乎是社区中首选的工具，但我没有看到任何形式的渐进模式。

**是否有任何 PHP 样式检查器的“渐进式”模式？**

（“渐进式”检查首先捕获所有现有违规的列表，然后阻止它们出现在后续的检查运行中。这意味着允许保留现有的违规，但不允许添加新的违规。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:34:31.707

正如您所发现的那样，事实上的 PHP 样式检查器是 PHP CodeSniffer。那个不支持渐进模式。

但是，在命令行上使用 grep 运行该命令是微不足道的，这样您就可以从错误开始，然后在进展的后期“逐步”关注警告。

[Eclipse 中的 Codesniffer 集成（屏幕截图和链接）](http://hakre.wordpress.com/2010/03/06/php-code-sniffer-eclipse-and-wordpress/)也很不错，可以让您在 IDE 中执行类似的操作。

如果您不仅需要与样式检查类似的东西，您可以尝试 PHPStorm IDE，它与代码检查有类似的东西，并允许您区分检查类型及其级别。它还允许您根据自己的风格重新格式化代码，这将帮助您快速有效地使代码库井井有条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:24:04.747

我已经启动了这个 shell 脚本来帮助：

```
SRCDIR=/Users/smcmillan/Documents/Development/project
WWWDIR=$SRCDIR/www

phpcs --extensions=php --report=csv "$WWWDIR" | awk -F, '{print $1, $3, $4, $5;}' > "$SRCDIR/.newerrs"

rm "$SRCDIR/.errfiles"

diff -c "$SRCDIR/.olderrs" "$SRCDIR/.newerrs" | grep ^+ | awk '{print $2}' | uniq > "$SRCDIR/.errfiles"

xargs phpcs < $SRCDIR/.errfiles 
```

策略是以 csv 格式捕获运行的输出，并与旧运行进行比较以获取出现新错误的文件列表。然后我们将这些文件发送回 phpcs。

它不是跨平台的，它仍然会在有新错误的文件中显示较旧的错误，但这是一个好的开始。

# java - 如何在运行时获取自定义功能的版本？

> ID：10297792
> 
> 赞同：0
> 
> 时间：2012-04-24T12:26:05.153
> 
> 标签：java, eclipse-plugin, version, eclipse-rcp

[SE 上](https://stackoverflow.com/questions/817299/how-can-i-obtain-the-version-number-of-a-custom-eclipse-feature-at-runtime)有一个类似的问题，但答案仅适用于检测可用插件的版本。

然而，我寻找一种在运行时检索用户定义功能的版本号的方法。

假设我定义了一个`com.me.prog.prod.feature`定义插件依赖项的功能，稍后在产品定义中使用`com.me.prog.prod.product`。启动时，`com.me.prog.prod.product`我希望能够检索`com.me.prog.prod.feature`我想将其用于顶级程序版本控制的版本信息。

有没有办法使用 Eclipse RCP 框架代码来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:44:19.890

以下内容应为您提供功能版本号：

```
String version = null;
IBundleGroupProvider[] providers = Platform.getBundleGroupProviders();
for (IBundleGroupProvider provider : providers) {
    IBundleGroup[] groups = provider.getBundleGroups();
    for (IBundleGroup group : groups) {
        if ("com.me.prog.prod.feature".equals(group.getIdentifier())) {
            version = group.getVersion();
        }
    }
} 
```

您必须在其中提供特定的功能名称，因为插件可能属于多个功能。

# javascript - 省略号后如何计算单词

> ID：10297793
> 
> 赞同：2
> 
> 时间：2012-04-24T12:26:17.447
> 
> 标签：javascript, css

我目前正在使用 css 属性 ellipsis 在行尾添加一个省略号。但是，我还想显示省略号后的单词数。例如

```
.names {
    border: 1px solid #000000;
    white-space: nowrap;
    width: X;
    overflow: hidden;
    text-overflow: ellipsis;
}

<div class="names">Tim, Tom, Mary, Bob, Sam, John</div> 
```

节目

> 蒂姆、汤姆、玛丽……

但是，在这种情况下，我想表明省略号代表 3 个其他名称。

> 蒂姆、汤姆、玛丽……和其他 3 人

在javascript或css中执行此操作的最小方法是什么。我在 iOS 应用程序中使用 webview，这必须对表中的每个行项进行计算，所以我需要一个非常轻量级的 js 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:55:03.663

我可能需要更严格的要求才能为此提供更好/更健壮的代码。但我认为这样的东西就是你想要的。

[http://jsfiddle.net/Xf47e/3/](http://jsfiddle.net/Xf47e/3/)

我不知道你目前是如何处理你的代码问题的，但如果你还没有遇到 H 的问题，我会感到惊讶......对于您使用的任何字体，字符宽度很可能不是恒定的。

```
var names;
$(document).ready(function() {
  names = $('p.test').text().split(',');
  for (i = 0; i < names.length; i++) {
    if (i < names.length - 1)
      $('p.test2').append(names[i] + ',');
    else
      $('p.test2').append(names[i]);
    console.log(i + " " + $('p.test2').width());
    if ($('p.test2').width() > 100) {
      break;
    }
  }
  $('p.test2').append(' ... and ' + (names.length - i + 1) + ' others.');
});
```

```
p.test {
  width: 100px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

p.test2 {
  float: left;
}
```

```
<!DOCTYPE html>
<html>

<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>
  <div>
    <p class="test">Tom, Bob, Harry, Dick, John, James, Smith, Paul</p>
    <p class="test2"></p>
  </div>
</body>

</html>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:28:47.467

我知道这样做的唯一方法是一次添加一个单词，然后测量元素的高度。当高度发生变化时，你已经达到了极限......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:30:46.043

这很容易挤柠檬豌豆...

```
var orginalStr = "Tim, Tom, Mary, Bob, Sam, John";
var elStr = "Tim, Tom, Mary, ...".substring(0, "Tim, Tom, Mary, ...".indexOf("...")); 
//That should give you "Tim, Tom, Mary, ";
var count = originalStr.replace(elStr, "").split(",").length; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T13:12:39.023

这是一段使用 CSS 规则的引导代码。它检查是否`width()`大于父级`div`并显示`and X others`是否溢出。

```
<style>
    #container {width: 170px;white-space: nowrap; overflow: hidden;text-overflow: ellipsis;}
    #words {display: inline}
</style>
<div id="container"><div id="words">Mary</div></div><div id="others"></div>
<input type="button" onclick="addName();" value="add" />
<script>
var namesAfterEllipsis = 0;
function addName() {
  $("#words").append(", Tom");
  if ($("#words").width() >= $("#container").width())
    $("#others").html("and " + ++namesAfterEllipsis + " other" + (namesAfterEllipsis > 1 ? "s" : ""));
}
</script> 
```

你可以看到它在[那里运行](http://jsfiddle.net/TtyLd/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T03:48:01.227

我最近做了类似的事情，它`WebView`在 Android 上运行良好。从内存中（使用 jQuery，但可以很容易地调整）：

```
var names = $('.names');
names.data('original', names.text());
names.data('truncated', 0);

function truncate() {
    var n = names[0], t = names.text();
    if (n.scrollWidth > n.clientWidth) {
        names.data('truncated', names.data('truncated') + 1);
        names.text(t.substring(0, t.lastIndexOf(' ')));
        // remove one word, and let the DOM update
        setTimeout(truncate);
    } else {
        // set the text back to the original value
        // names.data('truncated') should now have the number of truncated words
        names.text(names.data('original'));
    }
}

truncate(); 
```

# wpf - 保存到 XAML 文件并还原后获取 WPF 用户控件事件

> ID：10297798
> 
> 赞同：2
> 
> 时间：2012-04-24T12:26:29.303
> 
> 标签：wpf, xaml

我是 WPF 的新手。我用一些基本事件创建了一些用户控件，然后在运行时将这些用户控件加载到列表视图中。然后我将这些用户控件拖放到一个容器（Canvas）上。然后我尝试使用该`XamlWriter.Save`功能存储它并使用`XamlReader.Load`. 到现在为止还挺好。

问题是当我重新打开存储的 XAML 时我没有收到事件。我在 Microsoft 博客中读到`XamlWriter.Save`无法使用存储事件。我的目标是在我再次恢复 XAML 时获取事件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:50:36.590

如果从 xaml 序列化和从 xaml 序列化实际上不是必需的，那么您可能需要更改策略。通常在 WPF 中，您希望避免使用控件列表，而是使用数据列表，然后对数据进行模板化，使其显示为不同的控件。尝试将您的 ListView 绑定到仅表示数据的对象集合，然后创建模板来呈现您的控件。您的问题可能与此问题中的问题类似：[WPF Custom control for receipt preview](https://stackoverflow.com/questions/10416705/wpf-custom-control-for-receipt-preview/10417812#10417812)

# dynamics-crm-2011 - 为特定图表设置默认向下钻取字段

> ID：10297799
> 
> 赞同：1
> 
> 时间：2012-04-24T12:26:35.323
> 
> 标签：dynamics-crm-2011

单击图表中的条形允许在 Microsoft Dynamics CRM 2011 中进行向下钻取。但它总是提示输入字段来执行此操作。

是否可以设置默认的向下钻取字段？

例如，假设我有一个“按国家/地区划分的客户”图表，并且自然希望向下钻取按`City`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-11T20:42:15.117

不，你不能。在 fetchXML 之外或使用 UI 中的图表设计器，您几乎无法自定义图表。

# c++ - 从用户模式应用程序中使用 WPP

> ID：10297805
> 
> 赞同：2
> 
> 时间：2012-04-24T12:27:02.360
> 
> 标签：c++, visual-studio, logging, etw

我尝试在用户模式下使用 WPP，设法在 VS10 中成功使用它，通过添加到 proj 文件来发布目标：

```
 <PropertyGroup><WdkDir>c:\work\Proj\wppTest\DDK\</WdkDir><MyTargetsDir>c:\work\Proj\wppTest</MyTargetsDir>  </PropertyGroup>

...

  <ImportGroup Label="ExtensionTargets">
    <Import Project="$(MyTargetsDir)\Wpp.targets" />
  </ImportGroup> 
```

然后 Wpp.targets 定义如下：

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
      <ExtensionsToDeleteOnClean>$(ExtensionsToDeleteOnClean);*.tmh</ExtensionsToDeleteOnClean>
  </PropertyGroup>
  <ItemGroup>
      <CoreCppClean Include="@(CoreCppClean);$(ProjectDir)">
          <FilePatternsToDelete>*.tmh</FilePatternsToDelete>
     </CoreCppClean>
  </ItemGroup>
  <ItemGroup>
    <TraceWppSources Include="@(ClCompile)" Exclude="stdafx.cpp" />
  </ItemGroup>
  <Target Name="TraceWpp" BeforeTargets="ClCompile" Inputs="@(TraceWppSources)" Outputs="@(TraceWppSources -> '%(Filename).tmh')">
    <Exec Command="cd $(ProjectDir)" />
    <Message Importance="high" Text="Creating tmh"/>
    <Exec Command="$(WdkDir)\bin\x86\tracewpp.EXE -cfgdir:$(WdkDir)\bin\wppconfig\rev1 -odir:. @(TraceWppSources, ' ')" />
    <Message Importance="high" Text="tmh created"/>
  </Target>
</Project> 
```

此步骤取自文章： http: [//www.devproconnections.com/article/visual-studio-2010/wpp-tracing-in-visual-c-2010-projects](http://www.devproconnections.com/article/visual-studio-2010/wpp-tracing-in-visual-c-2010-projects)

当尝试在 VS10->Debug 下编译它时，我可以看到正在生成“tmh”文件，但实际上我想记录一些东西时出现错误：

DoTraceMessage(TRACE_ERROR, L"啊哈"); // 错误 C2065：“TRACE_ERROR”：未声明的标识符错误 C3861：“WPP_CALL_Application_Test_cpp”：找不到标识符

正如我所说，我对 VS10->Release 目标上的相同代码没有任何问题。这是我的定义供参考：

```
#pragma once

#define WPP_CONTROL_GUIDS \
    WPP_DEFINE_CONTROL_GUID(CtlGuid,(28EE579B, CF67, 43b6, 9D19, 8930E7AAA131),  \
                                                                            \
        WPP_DEFINE_BIT(TRACE_ERROR)                                   \
        WPP_DEFINE_BIT(TRACE_WARNING)                                   \
        WPP_DEFINE_BIT(TRACE_INFO1)                                   \
        WPP_DEFINE_BIT(TRACE_INFO2)                                   \
        ) 
```

有谁知道为什么这可能使用发布模式但在调试模式下不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T19:26:47.927

是的，问题是当您使用“带有编辑和继续支持的 PDB 中的调试符号”进行编译时，编译器不会解析 __LINE__ 宏。

如果您从 Application_Test.cpp 第 51 行跟踪，WPP 编译器将定义一个函数 WPP_CALL_Application_Test_cpp51，并使用 __FILE__ 和 __LINE__ 来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:48:33.417

找出它没有在 DEBUG 模式下编译的原因。我设置了 /ZI 编译器标志 ( [1](http://msdn.microsoft.com/en-us/library/958x11bc.aspx "调试信息格式") )，它期望 /Zi 编译格式可以在调试中工作。

# android - 设备管理员的wipeData(0) 不格式化SDCard。如何以编程方式使用设备管理员或其他方式擦除 SDCard？

> ID：10297807
> 
> 赞同：1
> 
> 时间：2012-04-24T12:27:24.487
> 
> 标签：android

我想远程将手机重置为默认出厂设置。我使用了DeviceAdmin 的wipeData()。完成这项工作但不清洁 SDCard。

任何线索我做错了什么或者是wipeData（）没有清理SDCard数据。如果是这样，我该如何以编程方式进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:34:45.357

寻找：http: [//developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

```
String state = Environment.getExternalStorageState(); 
```

使用外部存储的字符串（主要是“/sdcard”），您可以使用 java.io.file 使用此路径创建一个新文件。有了这个，你可以得到所有的孩子并使用递归来删除所有的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T06:19:03.030

您可以使用 wipeData(DevicePolicyManager.WIPE_EXTERNAL_STORAGE) 而不是手动删除 SD 卡的内容。

# drupal - Drupal commerce - 计算自定义订单项的税金

> ID：10297809
> 
> 赞同：1
> 
> 时间：2012-04-24T12:27:41.100
> 
> 标签：drupal, drupal-commerce

我需要在节假日和周六/周日送货的运费中增加额外费用

所以我创建了一个自定义的商业行项目，将在那些日子添加到订单中。

但它不会计算该额外费用项目的税款。

这是一个示例订单：

```
Subtotal              1.351,35 DKK
Express-delivery      810,00 DKK
Delivery fee          750,00 DKK
Tax                   540,34 DKK
Order total           3.451,69 DKK 
```

税为 25% 如您所见，它只计算“小计”和“快递”的税

如何为我的自定义订单项进行商业计算税？

我看到运输模块虽然有一些规则，但我无法掌握如何转换该代码以在我的 line-item-module 中使用。

有人有解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:47:48.673

我自己终于想通了，

我实现了钩子 hook_rules_event_info()

并调用 rules_invoke_all('my_rule', $line_item); 在我的订单项添加到订单之前。它奏效了:)

希望这对将来的其他人有所帮助。

结果：

```
Subtotal            1.351,35 DKK
Express-delivery    810,00 DKK
Delivery fee        750,00 DKK
Tax                 727,84 DKK
Order Total         3.639,19 DKK 
```

# symfony - symfony 2 sonataAdminBundle 覆盖模板

> ID：10297821
> 
> 赞同：5
> 
> 时间：2012-04-24T12:28:42.113
> 
> 标签：symfony, sonata-admin

我们如何覆盖单个管理类的奏鸣曲捆绑布局，就像我创建了 3 个管理类 userAdmin、productAdmin、ticketAdmin 现在我想覆盖 ticketAdmin 编辑操作和编辑模板并在那里添加一些额外的代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-29T13:10:37.453

您可以使用 ：

**控制器 ：**

[SonataAdminBundle 中的自定义操作](https://stackoverflow.com/questions/10740303/custom-action-in-sonataadminbundle)

**模板 ：**

```
// in your admin class
public function getTemplate($name)
{
    switch ($name) {
        case 'edit':
            return 'AcmeMyBundle::my-custom-edit.html.twig';
            break;
        default:
            return parent::getTemplate($name);
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-25T14:24:52.333

如果您不想创建额外的控制器，可以使用文档中提到的此方法：

[管理员文档 - 参考 - 模板（主） - 20.6。配置模板](http://sonata-project.org/bundles/admin/master/doc/reference/templates.html#configuring-templates)

```
services:
sonata.admin.post:
    class: Acme\DemoBundle\Admin\PostAdmin
    tags:
        - { name: sonata.admin, manager_type: orm, group: "Content", label: "Post" }
    arguments:
        - ~
        - Acme\DemoBundle\Entity\Post
        - ~
    calls:
        - [ setTemplate, [edit, AcmeDemoBundle:PostAdmin:edit.html.twig]] 
```

并将您的模板放在*Resources/views/PostAdmin/edit.html.twig*中。只需从 SonataAdmin Bundle 复制原始模板并开始覆盖。

博客地址：[在 SonataAdminBundle 中覆盖列表视图树枝模板 – webDEVILopers 博客](http://blog.webdevilopers.net/override-list-view-twig-template-in-sonataadminbundle/)

# multithreading - 如何获取数百万个 url 链接的 html 内容

> ID：10297822
> 
> 赞同：0
> 
> 时间：2012-04-24T12:28:46.623
> 
> 标签：multithreading, web-crawler

给定一个 url 链接，我想以 html 格式获取页面的内容。在 Java 中，我知道我可以用`getInputStream`方法实现它。

问题是，现在我有数百万个 URL。并想得到他们的html页面。如果我仍然使用`getInputStream`. 这很耗时，性能很差。所以我想加快获取页面的过程。

希望得到有效的方法和高速来做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:13:56.023

大量抓取一百万个 URL 是一项棘手的工作。一方面，使用线程池 ( `Executors.newFixedThreadPool(100)`) 和[Apache Http 客户端](http://hc.apache.org/httpclient-3.x/)池很容易。然而，即使是运行此代码的中速系统也可以完全在服务器上执行拒绝服务附加——向开始崩溃的特定服务器发送如此多的请求。

诀窍是如何限制你的线程，这样它们就不会以这样的速度向同一个服务器（甚至可能是同一个 C 类）发出请求以压倒它们。一种方法是让一个线程执行名称 -> IP 解析，然后它可以以一种可衡量的方式将 URL 添加到待爬取队列中。例如，谷歌每分钟都会抓取一个 URL 的小网站。他们下降到一秒钟，这表明他们的蜘蛛技术在安排下载方面有多好。但是有一些中等难度的线程和队列逻辑可以让它正确。

我认为最好的方法是使用[希望]已经解决了这个问题的现有技术。以下是一些可能会引导您访问现有实现的链接。

*   @Andreas 提到了一个[线程网络爬虫项目](http://www.andreas-hess.info/programming/webcrawler/index.html)，我相信还有其他项目。
*   这是一个[写网络爬虫的sun项目](http://java.sun.com/developer/technicalArticles/ThirdParty/WebCrawler/)
*   这是一个相关的问题：[https ://stackoverflow.com/questions/2495289/what-is-a-good-java-web-crawler-library](https://stackoverflow.com/questions/2495289/what-is-a-good-java-web-crawler-library)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T04:15:24.933

我建议使用一些开源网络爬虫，例如[Crawler4j](http://code.google.com/p/crawler4j/)或[Apache Nutch](http://nutch.apache.org/)。只需将所有 url 作为爬虫的种子导入并设置 depth=1。
Crawler4j 是一个轻量级的网络爬虫，为用户提供非常简单的界面。将 Crawler4j 与您的应用程序集成非常容易。
与 Crawler4j 相比，Nutch 复杂得多。学习和定制 nutch 需要更多时间。
如果你想自己动手，Apache HTTP Client 是个不错的选择。许多网络爬虫都是基于它的。为了礼貌，在一秒钟内限制您的请求数量，这有助于您避免拒绝服务问题。

# java - 使用x509证书加密.net中的xml文件和解密java中的加密文件

> ID：10297825
> 
> 赞同：0
> 
> 时间：2012-04-24T12:28:59.213
> 
> 标签：java, .net, encryption, x509certificate2

我是 xml 加密的新手，我想加密 .net 中的 xml 文件并使用 x509 证书解密 java 中的加密文件。这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:38:03.027

是的，这是完全可能的。您可以使用某种编程语言使用任何众所周知的算法加密文件，并使用另一种编程语言对其进行解密。对于在 c# 中使用 x509 进行加密，请查看：http: [//msdn.microsoft.com/en-us/library/ms229744.aspx](http://msdn.microsoft.com/en-us/library/ms229744.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:51:39.110

请看下面的例子

```
public class CryptoUtil {

public static byte[] rsaEncrypt(byte[] publicKey, byte[] data) throws IOException, InvalidKeySpecException,
            NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException {
    X509EncodedKeySpec publicKeySpec = new X509EncodedKeySpec(publicKey);

    KeyFactory kf = KeyFactory.getInstance("RSA");
    PublicKey pk = kf.generatePublic(publicKeySpec);

    Cipher rsa = Cipher.getInstance("RSA");

    rsa.init(Cipher.ENCRYPT_MODE, pk);
    ByteArrayOutputStream byteOutputStream = new ByteArrayOutputStream();

    CipherOutputStream os = new CipherOutputStream(byteOutputStream, rsa);
    os.write(data);
    os.flush();
    os.close();
    return byteOutputStream.toByteArray();

}

public static byte[] rsaDecrypt(byte[] privateKey, byte[] data) throws IOException, InvalidKeySpecException,
            NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException {
    PKCS8EncodedKeySpec privateKeySpec = new PKCS8EncodedKeySpec(privateKey);

    KeyFactory kf = KeyFactory.getInstance("RSA");
    PrivateKey pk = kf.generatePrivate(privateKeySpec);

    Cipher rsa = Cipher.getInstance("RSA");

    rsa.init(Cipher.DECRYPT_MODE, pk);
    ByteArrayInputStream byteInputStream = new ByteArrayInputStream(data);

    InputStream is = new CipherInputStream(byteInputStream, rsa);
    byte[] message = IOUtils.toByteArray(is);
    is.close();
    return message;

}

} 
```

# .net - 清除集合还是重新初始化？

> ID：10297826
> 
> 赞同：0
> 
> 时间：2012-04-24T12:29:06.467
> 
> 标签：.net, performance, collections

我正在开发一个 .net 应用程序，我正在使用一个由 5 个列表和 1 个哈希表组成的对象。此对象在循环中使用，该循环至少迭代 500 次以运行某些分析。在每个循环中，这个对象应该开始为空，所以我想知道在所有列表和哈希表上调用 clear 是否更有效，还是应该重新初始化对象？

我知道我可以编写代码来对此进行基准测试，但我想知道是否有人已经走上了这条路？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T12:31:21.460

创建 3000 个空集合的成本将很小。除非你的“分析”真的很微不足道，否则这根本不会很重要。尽可能写出*最清晰*的代码——这很可能是每次都创建一组新的集合，而不是重复使用它们。如果*逻辑*操作是重用一个对象，你应该只重用它。

以最易读的方式编写代码后，请测试它的性能是否与您需要的一样好。如果没有，*那么*您可以开始微优化。

但是，我强烈*建议*`Dictionary<,>`您使用而不是`Hashtable`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T12:43:01.420

虽然我同意另一个答案，即这是一个微优化，但为了回答这个问题，我发现使用 List 时 new List 比 Clear 稍快。这是我的基准代码：

```
static void Main(string[] args)
    {
        var start = DateTime.Now;
        List<string> lst = new List<string>();

        for (int i = 0; i < 3000; ++i)
        {
            //lst = new List<string>();
            lst.Clear();
            for (int j = 0; j < 500; ++j)
            {
                lst.Add(j.ToString());
            }
        }

        Console.WriteLine("{0} ms", ((DateTime.Now - start).Ticks / TimeSpan.TicksPerMillisecond));
        Console.ReadLine();
    } 
```

在五次运行中，新 List 平均为 340.8 ms，Clear 平均为 354.8 ms。

然而，这个结果非常接近，很明显：

1.  差异可能没有意义
2.  我可能通过执行这个基准来浪费我的时间

# java - 无法为 Java 邮件获取正确的格式

> ID：10297828
> 
> 赞同：0
> 
> 时间：2012-04-24T12:29:28.367
> 
> 标签：java, jakarta-mail

我正在使用 Java 发送电子邮件，如下所示：

```
StringBuilder stringBuilder=new StringBuilder("<p>Priority:"+escalationDTO.getEscalationPriority()+"</p><br/><p>Status="+escalationDTO.getEscalationStatus()+"</p><br/><p>Type="+escalationDTO.getEscalationType()+"</p><br/><p>Description="+escalationDTO.getEscalationDescription()+"</p><br/><p>StartDate="+new Date(new java.util.Date().getTime())+"</p><br/><p>EndDate="+sqldate1+"</p>"  ); 
```

但是我在邮箱中得到的输出如下：

```
<p>Priority:P1</p><br/><p>Status=closed</p><br/><p>Type=C</p><br/><p>Description=werrwe</p><br/><p>StartDate=2012-04-24</p><br/><p>EndDate=2010-08-09</p> 
```

我不希望 HTML 标签出现在电子邮件中。每个`<p>`元素都应该导致换行。

这是我的邮件类：

```
package helper;

/**
 * Created by IntelliJ IDEA.
 * User: Milind
 * Date: 4/24/12
 * Time: 4:05 PM
 * To change this template use File | Settings | File Templates.
 */

import java.util.Properties;

import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.Message.RecipientType;
import javax.mail.internet.AddressException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class SendMail {

    private String from;
    private String to;
    private String subject;
    private String text;

    public SendMail(String subject1,String body) {
       from = "Admin@zedo.com";
       to = "abc@zedo.com";
       subject = subject1;
       text = body;
       System.out.println(subject);
    }

    public void send(){

        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.bb.zedo.com");
        props.put("mail.smtp.port", "25");

        Session mailSession = Session.getDefaultInstance(props);
        Message simpleMessage = new MimeMessage(mailSession);

        InternetAddress fromAddress = null;
        InternetAddress toAddress = null;
        try {
            fromAddress = new InternetAddress(from);
            toAddress = new InternetAddress(to);
        } catch (AddressException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            simpleMessage.setFrom(fromAddress);
            simpleMessage.setRecipient(RecipientType.TO, toAddress);
            simpleMessage.setSubject(subject);
            simpleMessage.setText(text);
            Transport.send(simpleMessage);

        } catch (MessagingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:34:51.427

确保在 MIME 消息中将内容设置为“text/html”。

```
MimeMessage message = new MimeMessage(mailSession);
message.setContent("<h1>Hello world</h1>", "text/html"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T12:34:08.993

```
Message.setContent(stringBuilder , "text/html"); 
```

# c# - 以编程方式生成工作流服务

> ID：10297830
> 
> 赞同：0
> 
> 时间：2012-04-24T12:29:29.317
> 
> 标签：c#, c#-4.0, workflow-foundation-4

我正在开发一个 asp .net 项目，我根据用户的一些选择开发了一个工作流服务。当用户遵循适当的步骤时，它会生成一个流程图。将此流程图添加到工作流服务主体的末尾，并带有以下代码。

```
 Flowchart flowchart = new Flowchart();
          flowchart = (Code to fill the flowchart)...

            Receive reserveSeat = new Receive();

            WorkflowService service = new WorkflowService()
        {

            Body = flowchart,
            Endpoints ={
            new Endpoint
            {
            ServiceContractName="IService",
            AddressUri = new Uri("http://localhost:2757"),
            Binding = new BasicHttpBinding(),
            }

            }
        }; 
```

有没有办法在上面的代码中在正文中添加一个接收活动而不触及流程图？我试过

```
Body = reserveSeat + flowchar, 
```

但不工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:22:22.447

您可以将 Receive 活动和流程图添加为 Sequence 活动的子活动

```
Body = new Sequence()
{
  Activities = {
   reserveSeat,
   flowchar
  }
} 
```

# linux - 如何查看文件更新内容的整个部分

> ID：10297831
> 
> 赞同：2
> 
> 时间：2012-04-24T12:29:35.667
> 
> 标签：linux, logfiles

我有一个在 Linux Machine 中生成日志文件的应用程序。

我想在生产时监控应用程序，所以当我使用带有日志文件名的 tail 命令时，它只显示更新文件的一部分。

我使用的命令是 `tail MyLog.log`

我的问题是，是否可以看到更新的文件的全部最新部分？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:31:04.937

您可以使用tail 选项***跟踪***文件的增长：`-f`

```
tail -f MyLog.log 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:35:23.463

我认为您不能仅查看最新更新的部分。但是，您可以使用 -n 标志检查文件的 n 行，并使用 -f 标志，此过程会重复进行。

所以你可以使用类似 tail -f -n 10 Mylog.txt

[您可以在http://www.computerhope.com/unix/utail.htm](http://www.computerhope.com/unix/utail.htm)阅读有关 tail 命令的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:34:01.453

**用less**打开有问题的文件，然后按**F**。这类似于@codaddict 解决方案

# google-maps - 有缺陷的 kml 文件？

> ID：10297836
> 
> 赞同：1
> 
> 时间：2012-04-24T12:30:10.383
> 
> 标签：google-maps, kml, google-earth

我编写了一个程序，可以编写在 Google 地球中显示良好的 kml 文件，但是当我在 Google 地图上尝试它们时，它们经常出现故障。他们已经通过了提要验证器和其他检查器，但是当我单击地标时，我得到一个空地址：弹出窗口，然后飞到非洲海岸外的纬度 0、经度 0。我已经剥离了所有东西，剩下的是：

```
<?xml   version="1.0" encoding="UTF-8"?>
<kml    xmlns="http://www.opengis.net/kml/2.2"
    xmlns:kml="http://www.opengis.net/kml/2.2" 
        xmlns:atom="http://www.w3.org/2005/Atom">
<Document  id="DOC1">
    <name>sample memberships Kml File</name>
    <open>1</open>
        <description>remove xmlns gx</description>
    <Folder id="FLD1">
        <name>BusinessMembers</name>
        <open>1</open>
        <description>BluePushpin</description>
        <Placemark id="PMA">
            <name>A member</name>
            <open>1</open>
            <address>Fayette County</address>
                <description>a</description>
            <Point id="PTA">
                <coordinates>-84.41593,37.916132</coordinates>
            </Point>
        </Placemark>
    </Folder>
</Document>
</kml> 
```

我看不出这有什么问题。该文件是从 Google 网站获取的。

有人看到我看不到的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:33:58.930

尝试取出地址元素，谷歌地图不支持它。以下是支持的元素列表：[https ://developers.google.com/kml/documentation/kmlelementsinmaps](https://developers.google.com/kml/documentation/kmlelementsinmaps)

# proxy - 在 Apache HttpClient 4.1.3 中设置 nonProxyHosts

> ID：10297837
> 
> 赞同：5
> 
> 时间：2012-04-24T12:30:11.677
> 
> 标签：proxy, apache-httpclient-4.x

我只是无法通过回答这个问题来帮助自己。

如何在 Apache HttpClient 4.1.3 中设置 nonProxyHosts？

在旧的 Httpclient 3.x 中，这非常简单。你可以使用 setNonProxyHosts 方法设置它。

但是现在，新版本没有等效的方法。我一直在查看 api 文档、教程和示例，但到目前为止还没有找到解决方案。

要设置一个普通的代理，你可以这样做：

```
 HttpHost proxy = new HttpHost("127.0.0.1", 8080, "http");
    DefaultHttpClient httpclient = new DefaultHttpClient();
    httpclient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 
```

有人知道新版本 httpclient 4.1.3 中是否有现成的解决方案来设置 nonProxyHosts 还是我必须自己做

```
 if (targetHost.equals(nonProxyHost) {
    dont use a proxy
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:44:37.803

@moohkooh：这就是我解决问题的方法。

```
DefaultHttpClient client = new DefaultHttpClient();

//use same proxy as set in the system properties by setting up a routeplan
ProxySelectorRoutePlanner routePlanner = new ProxySelectorRoutePlanner(client.getConnectionManager().getSchemeRegistry(),
    new LinkCheckerProxySelector());
client.setRoutePlanner(routePlanner); 
```

然后你的 LinkcheckerProxySelector() 会喜欢这样的东西。

```
private class LinkCheckerProxySelector extends ProxySelector {

@Override
public List<Proxy> select(final URI uri) {

  List<Proxy> proxyList = new ArrayList<Proxy>();

  InetAddress addr = null;
  try {
    addr = InetAddress.getByName(uri.getHost());
  } catch (UnknownHostException e) {
    throw new HostNotFoundWrappedException(e);
  }
  byte[] ipAddr = addr.getAddress();

  // Convert to dot representation
  String ipAddrStr = "";
  for (int i = 0; i < ipAddr.length; i++) {
    if (i > 0) {
      ipAddrStr += ".";
    }
    ipAddrStr += ipAddr[i] & 0xFF;
  }

//only select a proxy, if URI starts with 10.*
  if (!ipAddrStr.startsWith("10.")) {
    return ProxySelector.getDefault().select(uri);
  } else {
    proxyList.add(Proxy.NO_PROXY);
  }
  return proxyList;
} 
```

所以我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T13:49:46.507

刚刚找到[这个答案](https://stackoverflow.com/questions/20716909/how-do-i-replace-deprecated-httpclient-getparams-with-requestconfig)。快速的方法是设置默认系统规划器，如***oleg***告诉：

```
HttpClientBuilder getClientBuilder() {
    HttpClientBuilder clientBuilder = HttpClientBuilder.create();
    SystemDefaultRoutePlanner routePlanner = new SystemDefaultRoutePlanner(null);
    clientBuilder.setRoutePlanner(routePlanner);
    return clientBuilder;
} 
```

默认情况下`null`，arg 将设置为`ProxySelector.getDefault()`

无论如何，您可以定义和自定义您自己的。这里的另一个例子：[EnvBasedProxyRoutePlanner.java (gist)](https://gist.github.com/boly38/31dfad5da388567e02e4)

# wpf - MVVM 中的故事板动画

> ID：10297838
> 
> 赞同：4
> 
> 时间：2012-04-24T12:30:14.250
> 
> 标签：wpf, storyboard

我正在尝试淡入文本块然后淡出以在 MVVM 中显示成功消息，但我无法让它再次淡出。我看了这个：[WPF MVVM Property Change Animation](https://stackoverflow.com/questions/1649828/wpf-mvvm-property-change-animation)但并没有真正遵循。这里是风格：

```
 <Style TargetType="TextBlock" x:Key="fadeinout">
        <Style.Triggers>
            <EventTrigger RoutedEvent="Binding.TargetUpdated">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetProperty="(TextBlock.Opacity)" From="0.0" To="1.0" Duration="0:0:5"/>
                        <DoubleAnimation Storyboard.TargetProperty="(TextBlock.Opacity)" From="1.0" To="0.0" Duration="0:0:5"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Style.Triggers>
    </Style> 
```

并且在视图中

```
<TextBlock Text="{Binding Path=SuccessMessage}" Style="{StaticResource fadeinout}"  Width="60"/> 
```

在视图模型中，保存后我这样做：

```
SuccessMessage = "Success"; 
```

其中 SuccessMessage 是具有调用 PropertyChanged 的​​设置器的属性。我想我希望将文本固定为“您的保存成功”之类的内容，但无论如何我希望视图模型能够执行使文本块淡入然后再次淡出的操作，并在用户再次保存时重复。我需要做什么？

**编辑**（我不能自我回答 8 小时）：必须将 NotifyOnTargetUpdated 添加到绑定中，现在它淡入淡出：

```
 <TextBlock Text="{Binding SuccessMessage, NotifyOnTargetUpdated=True}" Style="{StaticResource fadeInOut}" 
```

根据 Jakob 的回答，我现在有了一个 TextBox（但将 EventTrigger 更改为 Binding.TargetUpdated），一个像上面这样的 TextBlock 和一个像这样的 TextBlock 内联：

```
<TextBlock Text="{Binding SuccessMessage, NotifyOnTargetUpdated=True}" Opacity="0" x:Name="tbMessage" Width="60" HorizontalAlignment="Left">
        <TextBlock.Triggers>
            <EventTrigger RoutedEvent="Binding.TargetUpdated">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="tbMessage" Storyboard.TargetProperty="Opacity" To="1" BeginTime="0:0:0" Duration="0:0:1" />
                        <DoubleAnimation Storyboard.TargetName="tbMessage" Storyboard.TargetProperty="Opacity" To="0" BeginTime="0:0:3" Duration="0:0:1"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </TextBlock.Triggers>
    </TextBlock> 
```

每次保存时，所有三个都会淡入淡出。奇怪的是，尽管使用了相同的时间，但模板化的一个稍微落后于其他两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:37:39.537

尝试设置[`DoubleAnimation.BeginTime`](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.begintime.aspx)。这样你就可以推迟淡出动画的开始时间，这样它就不会在淡入完成之前开始。在以下示例中，文本在淡出之前显示 2 秒：

```
<DoubleAnimation Storyboard.TargetProperty="(TextBlock.Opacity)" From="0.0" To="1.0" Duration="0:0:5" BeginTime="0:0:0" />
<DoubleAnimation Storyboard.TargetProperty="(TextBlock.Opacity)" From="1.0" To="0.0" Duration="0:0:5" BeginTime="0:0:7" /> 
```

或者，您可以使用[`AutoReverse`](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.autoreverse.aspx)，但您将无法控制在淡出之前显示文本的时间。

* * *

**更新：**

使用 TextBlock 的事件触发器似乎存在一些问题，因为 TextBlock 没有任何可以在触发器中使用的适当事件。以下是我使用 TextBox 而不是 TextBlock 的工作示例。您始终可以设置 TextBox 的样式，使其看起来像 TextBlock，即使 TextBlock 更轻量级：

```
<TextBox Text="{Binding SuccessMessage}" Opacity="0" x:Name="textBoxMessage" >
    <TextBox.Triggers>
        <EventTrigger RoutedEvent="TextBoxBase.TextChanged">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation 
                                Storyboard.TargetName="textBoxMessage" 
                                Storyboard.TargetProperty="Opacity"
                                To="1" 
                                BeginTime="0:0:0" Duration="0:0:1"
                                />
                    <DoubleAnimation 
                                Storyboard.TargetName="textBoxMessage" 
                                Storyboard.TargetProperty="Opacity"
                                To="0" 
                                BeginTime="0:0:3" Duration="0:0:1"
                                />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </TextBox.Triggers>
</TextBox> 
```

# objective-c - 应用 CGAffineTransform 后从 imageview 获取图像的新大小

> ID：10297842
> 
> 赞同：2
> 
> 时间：2012-04-24T12:30:28.880
> 
> 标签：objective-c, ios, uiimageview, cgaffinetransform

我正在使用 UIGestureRecognizers 使用 uiimageview 旋转和调整图像大小。现在的问题是我需要从 UIImageView 变换（即 CGAffineTransform）属性中获取图像的新大小。我在 StackOverFlow 上找到了这段代码，但它没有返回正确的值。由于 imageview 不仅调整大小而且旋转。所以我的问题是如何从旋转和调整大小的 UIImageView 的变换属性中获取新的大小和位置？

```
CGRect newRect = CGRectApplyAffineTransform(self.imageView.bounds, self.imageView.transform); 
```

任何人都可以帮忙吗？

谢谢

**回答** 好的，我找到了解决办法。造成尺寸计算问题的主要原因是旋转。那么这里做了什么检查。

```
 CGFloat angle = atan2(self.imageView.transform.b, self.imageView.transform.a);
 CGAffineTransform tempTransform = CGAffineTransformRotate(self.imageView.transform, -angle);  
 CGRect newRect = CGRectApplyAffineTransform(CGRectMake(0, 0, self.imageView.image.size.width, self.imageView.image.size.height), tempTransform); 
```

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-09T06:14:08.750

您可以使用临时点来模拟尺寸尺寸的转换，如下所示：

```
CG_INLINE CGSize FAE_CGSizeCalcDimentionsAfterApplyTransformation(CGSize size, CGAffineTransform transform)
{
    CGPoint widthPoint = CGPointMake(size.width, 0.0);
    CGPoint heightPoint = CGPointMake(0.0, size.height);

    CGPoint centerAfterTransfrom = CGPointApplyAffineTransform(CGPointZero, transform);
    CGPoint widthAfterTransform = CGPointApplyAffineTransform(widthPoint, transform);
    CGPoint heightAfterTransform = CGPointApplyAffineTransform(heightPoint, transform);

    CGSize sizeAfterTransformation = CGSizeMake(TB_CGPointCalcDistance(centerAfterTransfrom, widthAfterTransform), TB_CGPointCalcDistance(centerAfterTransfrom, heightAfterTransform));

    return sizeAfterTransformation;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:50:19.010

来自苹果[文档](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html#//apple_ref/c/func/CGRectApplyAffineTransform)：

> 因为仿射变换一般不保留矩形，所以函数 CGRectApplyAffineTransform 返回包含 rect 参数的变换角点的最小矩形。

也许你应该试试这个`CGSizeApplyAffineTransform`：：

> 返回由现有高度和宽度转换产生的高度和宽度。

尝试使用 imageView 的旧尺寸：

```
CGSize oldImageSize = imageView.bounds.size;

// Transforming code here

CGAffineTransform currentTransform = imageView.transform;
CGSize newImageSize = CGSizeApplyAffineTransform(oldImageSize, currentTransform); 
```

# postgresql - 获取有关自动解析的 PostgreSql 错误的详细信息

> ID：10297846
> 
> 赞同：1
> 
> 时间：2012-04-24T12:30:40.377
> 
> 标签：postgresql, error-handling

例如，我在数据库中有 NOT NULL 字段。我正在尝试将 NULL VALUE 插入其中。PostgreSQL 说： `ERROR: null value in column "id" violates not-null constraint`

（或类似的东西，在我的版本中它是俄语的，所以我在谷歌中找到了英文错误消息）。

如何获取有关错误的其他信息？首先是所有表和模式。我必须解析这个错误并将发生错误的表、模式和字段返回到我系统的更高模块。这个信息在 Oracle 和 SQL Server 中很容易找到，但是如何在 postgre 中找到它们呢？

UNIQUE VIOLATION ERROR 和其他问题也一样。

**注意：**此插入或更新可能是大批量命令的一部分，因此如果没有来自数据库的信息，我无法找到发生错误的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:59:04.837

您必须使用正则表达式并解析错误消息。现在没有其他可能了。这是我的待办事项，但需要空闲时间。

# java - JSF 在哪里验证输入值？后端还是前端？

> ID：10297853
> 
> 赞同：0
> 
> 时间：2012-04-24T12:31:09.710
> 
> 标签：java, jsf, jsf-2

JSF 可以验证输入值。谁能说 JSF 在哪里验证..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:35:58.243

服务器总是和客户端有时。

客户端可以使用 HTML/Javascript 作为可用性增强来验证某些类型的输入。但是，当客户端将信息发回服务器时，该输入和所有其他输入将始终在服务器上进行验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T13:39:11.997

我认为这两个答案都有点不清楚，因此我想总结一下：

1.）JSF，**总是在服务器端执行验证**！JSF 中的验证是 JSF 组件生命周期的一部分。当您提交一些数据时，就会触发生命周期。我不想详细介绍，但生命周期会贯穿各个阶段（恢复组件、触发转换、验证转换后的值、执行 actionlisteners 和操作、呈现响应）

2.) 感觉就像客户端验证的验证是在 JSF 中使用 ajax 支持时进行的。这个方法的作用是它只请求执行一些 html 字段。JSF 执行与普通请求相同的生命周期。不同之处在于它只转换和验证您指定的组件，并且只为您指定的组件呈现输出。**因此，JSF 中支持 ajax 的验证也是在服务器端执行的！**

3.) 我不同意第三方库提供客户端验证。

**Primefaces**集成了 jQuery UI，但它仍然使用 ajax 方法来验证数据。您可以编写自己的 jQuery JS 来验证某些字段，但我不会这样做。编写和管理重复的验证逻辑很痛苦。

**Richfaces**提供部分客户端验证。它为一些 JSR 303 和 JSF 验证器提供 JS 实现。因此，提供了真正的客户端 JS 验证，但仅针对存在 JS 实现的验证器。见：[http ://planet.jboss.org/post/richfaces_4_client_side_validation](http://planet.jboss.org/post/richfaces_4_client_side_validation)

**作为 Primefaces 克隆的**Ice faces不提供客户端验证。****

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T04:04:09.160

正如@Mike Q 的后续，JSF 可以在客户端或服务器端进行验证。但是，JSF 生命周期（发生在服务器端）中内置了一个验证阶段。组件可能没有服务器端验证，但不建议这样做。所有标准组件都提供服务器端验证。

JSF 组件还可以提供客户端验证。许多第三方 JSF 组件库（[PrimeFaces](http://primefaces.org/)、[RichFaces](http://www.jboss.org/richfaces)等）都提供此功能。**

# java - 为什么我得到无穷大？可以解决吗？

> ID：10297854
> 
> 赞同：-2
> 
> 时间：2012-04-24T12:31:10.227
> 
> 标签：java, infinity

我有这样的代码，我尝试从 henon 公式中获取数字

```
public class henon 
{
    public static void main(String[] args) 
    {         
        double a = 0.3;
        double b = 1.4;    
        double k[] = new double[1026];
        k[0] = 0.01;
        k[1] = 0.02;              

        for(int i = 0; i < 1024; i++)
        {                       
            k[i+2] = 1 - (a * Math.pow(k[i+1], 2) + b * k[i]);          
            System.out.println( "nilai ke" + i +" adalah " + k[i]);
        }
    }               
} 
```

我如何在 24、25 中获得无穷大值...如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:38:32.643

您获得“无限”值是因为您的计算超出了`double`数据类型的范围。

如果你需要更多的范围，你将不得不求助于 bignum 库之类的东西，比如[BigDecimal](http://docs.oracle.com/javase/1.6.0/docs/api/java/math/BigDecimal.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:42:30.327

[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)更适合您的要求。

正如 Joshua bloch 在 Effective Java 中所说，double 和 float 对于准确的结果没有用处。

```
BigDecimal k[] = new BigDecimal[1026];
        k[0] = new BigDecimal(0.01);
        k[1] = new BigDecimal(0.02);  
        for (int i = 2; i < k.length; i++) {
            k[i]=new BigDecimal(0.0);
        } 
```

如果你想要 Bigdecimal 的双值，你可以使用 doubleValue() 方法。

# json - 在 Grails 中仅输出日期 + 时间的日期部分

> ID：10297857
> 
> 赞同：2
> 
> 时间：2012-04-24T12:31:14.577
> 
> 标签：json, grails, groovy, kendo-ui

在 grails 中，如果我`dateCreated()`在域类中使用实例，那么它会返回日期 + 时间戳。如果我必须删除时间戳并仅检索视图页面上的日期，那么有没有任何方法可以在不修改域类的情况下执行此类任务而且我的视图页面中有网格，其中显示日期+时间戳，所以我也想删除时间戳。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T12:42:00.487

您可以格式化该日期以显示您想要的内容。[文档](http://grails.org/doc/2.0.1/ref/Tags/formatDate.html)

```
<g:formatDate format="yyyy-MM-dd" date="${date}"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T12:37:58.257

使用[formatDate 标记](http://grails.org/doc/latest/ref/Tags/formatDate.html)。

# jqgrid - 如何使网格的标题居中

> ID：10297865
> 
> 赞同：3
> 
> 时间：2012-04-24T12:31:35.467
> 
> 标签：jqgrid

如何在不更改 css（全局）的情况下使网格的标题居中？默认情况下，标题在左侧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T12:55:39.400

我认为以标题为中心的代码可能与以下内容有关

```
$("#grid").closest("div.ui-jqgrid-view")
    .children("div.ui-jqgrid-titlebar")
    .css("text-align", "center")
    .children("span.ui-jqgrid-title")
    .css("float", "none"); 
```

查看[演示](http://www.ok-soft-gmbh.com/jqGrid/CenterTitle.htm)：

![在此处输入图像描述](../Images/dc277fc21eda7d6ba2c1eaf04a07756e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-11T03:54:22.630

这个问题被提出和回答已经有一段时间了。另一种方法是：

```
<style>
.ui-jqgrid-caption {
  text-align:center !important;
}
</style> 
```

# architecture - 设计文档（高级和低级设计文档）

> ID：10297869
> 
> 赞同：30
> 
> 时间：2012-04-24T12:31:48.660
> 
> 标签：architecture, design-documents

高级和低级设计文档实际上包含哪些内容？（我特别想知道这两个文件中都绘制了哪些图表）。

我已经浏览了很多资源，但我有点困惑。

据我所知... HLDD 包含上下文图和架构图 LLDD 包含流程图、表示实体的图以及这些实体之间的关系、序列图。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-24T13:41:29.117

高级设计（HLD）涉及将系统分解为模块，并表示模块之间的接口和调用关系。HLD 被称为软件架构。

LLD，也称为详细设计，用于设计在 HLD 期间识别的各个模块的内部结构，即设计和记录模块的数据结构和算法。

现在，HLD 和 LLD 实际上用于传统方法（面向功能的软件设计），而在 OOAD 中，系统被视为一组相互交互的对象。

根据上述定义，高级设计文档通常包括一个高级架构图，描述需要进一步指定或开发的组件、接口和网络。该文档还可以描述或以其他方式引用组件系统之间的工作流和/或数据流。

包含所有方法和类之间关系的类图属于 LLD。LLD 涵盖了程序规范。LLD 以详尽的方式描述每个模块，以便程序员可以直接基于它编写程序。每个模块至少有 1 个文档。LLD 将包含 - 伪代码中模块的详细功能逻辑 - 包含所有元素的数据库表，包括其类型和大小 - 所有接口详细信息以及完整的 API 参考（请求和响应） - 所有依赖问题 - 错误消息列表 - 完整模块的输入和输出。

# symfony - 如何从 symfony2 中的控制器调用转义函数

> ID：10297870
> 
> 赞同：1
> 
> 时间：2012-04-24T12:31:56.857
> 
> 标签：symfony, xss

如何从 symfony2 的控制器中调用转义函数？对于视图文件（PHP 引擎），它被称为：

```
Hello <?php echo $view->escape($name) ?> 
```

我需要发送一个 html 片段集来查看和逃避 XSS 攻击中的一些变量。难道这个转义函数只是一个[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php) ()或者[htmlentities](http://www.php.net/manual/en/function.htmlentities.php) ()。如果不可能，那么我将不得不为此调用 htmlspecialchars。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:13:52.953

看一眼：

```
// Symfony\Component\Templating\PhpEngine.php
htmlspecialchars($value, ENT_QUOTES, $that->getCharset(), false) 
```

所以是的，最终使用 htmlspecialchars。PhpEngine 还支持转义其他类型的输出，例如 javascript。

但是，您应该尽量避免在控制器中生成 html。花点时间把它移到一个 php 模板中，然后让模板生成器来处理这些事情。

我确实花了一些时间来看看是否可以只抓取引擎本身，但它没有直接作为服务公开。您可以这样做： $engine = $this->get('templating')->getEngine($name) 但遗憾的是 getEngine() 受到保护。所以我不知道有什么明显的方法可以得到引擎。

但同样，最好让模板引擎按设计工作。

# vb.net - 回发事件后是否可以运行最终函数 vb？

> ID：10297871
> 
> 赞同：1
> 
> 时间：2012-04-24T12:32:04.390
> 
> 标签：vb.net, gridview, asynchronous, postback, master-pages

我有一个系统，在一个页面上有一个带有更新面板的网格视图。在选择 gridview 的一行时，系统使用该 CommandName 和 CommandArgument 回发以发布所选行，然后将 Session 变量设置为发布的所选行的 ID。其他控件正确运行 Async，并且相关按钮已在 RowDataBound 事件上使用此注册。

```
Dim gvRowSelect As GridViewRow = e.Row   
Dim imbSelect As ImageButton = DirectCast(gvRowSelect.FindControl("imbSelect"), ImageButton)
ScriptManager.GetCurrent(Page).RegisterPostBackControl(imbSelect) 
```

我想尝试在按钮命令上获取此会话，并以某种方式在母版页中为当前会话设置标签。在 imbSelect 命令上，代码为：

```
Dim cellSnapshot As TableCell = gvSnapshots.Rows(e.CommandArgument).Cells(0)
Session("Snapshot") = cellSnapshot.Text 
```

在主页面中是否有在 Page_Load 之后调用一个函数，并且在它解决了所有回发事件之后？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:09:43.227

您的母版页预渲染将在所有回发事件完成后进行

```
 Protected Sub Page_PreRender(ByVal sender As Object, ByVal e As System.EventArgs)        Handles Me.PreRender

     End Sub 
```

或者另一种方法是在您的母版页上创建一个属性并直接从您的方法更新它

```
 'On your master page
     Private _myValue As String             'If you want the master page to remember this between postbacks use an asp:HiddenField instead of a string, or store it in the Session
     Public Property MyProperty() As String
        Get
            Return _myValue
        End Get
        Set(ByVal value)
            _myValue = value
        End Set
     End Property

    'On your userControl or Page
    CType(Me.Master, MyMasterPage).MyProperty 
```

或者另一种方式是引发泡沫事件。它们可以方便地将消息传递到您的母版页的层次结构

```
 RaiseBubbleEvent(Me, e) 
```

然后在您的母版页上覆盖您的 OnBubbleEvent（只需 google 以获取一些引发和处理气泡事件的示例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:33:40.200

我已经设法通过结合 MSDN 上的一些隐藏知识来解决这个问题。

[http://msdn.microsoft.com/en-us/library/xxwa0ff0.aspx](http://msdn.microsoft.com/en-us/library/xxwa0ff0.aspx)

这显示了如何创建对母版页的引用，所以我所要做的就是在母版页上创建一个在其他任何地方都没有引用的函数。然后当触发按钮事件时：

```
Dim cellSnapshot As TableCell = gvSnapshots.Rows(e.CommandArgument).Cells(0)    
Session("Snapshot") = cellSnapshot.Text    
gvSnapshots.DataBind()    
Master.PageSetTitles() 
```

即 PageSetTitles 函数获取 Session 变量并在

同时包括：

```
<%@ MasterType VirtualPath="~/MasterPages/Site.Master"  %> 
```

在页面中。

# html - 嵌套表的 HTML5 有效性

> ID：10297874
> 
> 赞同：7
> 
> 时间：2012-04-24T12:32:08.290
> 
> 标签：html, validation, datagrid, html-table, w3c

我正在寻找表格方面的 HTML5 规格。我正在做一个有很多数据表的网络应用程序。

这些表通常有一个数据库行映射到一个表行。一切都很好。然而，一个特殊的问题子节点有这么多列，以至于它需要分布在表中的两行上。所以普通表是（伪）：

```
<table>
<thead>
<tr>
  <th>Header</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Data</td>
</tr>
</tbody>
</table> 
```

有问题的行是这样的：

```
<table>
<tbody>
<tr>
  <th>Header row 1</th>
</tr>
<tr>
  <td>Data</td>
</tr>
<tr>
  <th>Header row 2</th>
</tr>
<tr>
  <td>Data</td>
</tr>
</tbody>
</table> 
```

所以我现在的问题是：在 HTML5 中嵌套表格是否有效？我们可以很容易地同意它非常丑陋。但我在这里只考虑有效性。

如果我可以有嵌套表，它将解决与这些表的排序和编辑有关的任何数量的问题（实现了半数据网格功能）。这样，主表仍然可以只包含一行两列。可排序的日期和带有数据的嵌入表。

你说什么？我一直在寻找规格，但找不到任何确定的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T12:44:50.250

该文档只包含一个嵌套表：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>A nested table</title>
</head>
<body>
    <table>
        <tbody>
            <tr>
                <td>
                    <table>
                        <tbody>
                            <tr>
                                <td>Nested</td>
                                <td>Table</td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

…有效，根据[http://validator.w3.org/nu/](http://validator.w3.org/nu/)：

> 文档根据指定的模式和验证器检查的附加约束进行验证。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-09-04T21:38:45.987

嵌套表实际上需要嵌套在`<td>`元素中，而元素**又**嵌套在`<tr>`'s 和其他表中，而不仅仅是直接嵌套在表或行中。

[MDN 参考](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/table)

> `<table>` **允许的内容**：
> 
> *   一个可选`<caption>`元素，
> *   零个或多个`<colgroup>`元素，
> *   一个可选`<thead>`元素，
> *   以下任一项：
> *   零个或多个`<tbody>`元素
> *   一个或多个`<tr>`元素
> *   可选`<tfoot>`元素
> 
> `<tr>` **允许的内容**：
> 
> *   零个或多个`<td>`和/或`<th>`元素；脚本支持元素 (`<script>`和`<template>`) 也是允许的
> 
> `<td>` **允许的内容**：
> 
> *   流动内容。（`<table>`包含在此列表中）

# opengl-es - 如何在 OpenGLES 中使用 GL_TRIANGLE_STRIP 画线？

> ID：10297879
> 
> 赞同：0
> 
> 时间：2012-04-24T12:32:16.217
> 
> 标签：opengl-es, gl-triangle-strip

目前我正在使用openGLES在简单的游戏应用程序中工作，使用GL_Lines模式画一条线并且工作正常，我想使用GL_TRIANGLE_STRIP画一条线，是否可以使用GL_TRIANGLE_STRIP画一条线？

提前致谢

我试过源代码：

```
 glClearColor(0.65f, 0.65f, 0.65f, 1.0f); //Background color changes, its like Red,Green,Blue,Alpha color. 
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    [self.effect prepareToDraw];

        const GLfloat line[] = 
        {
            0.0f, 0.5f,
            0.0f, -1.5f,
           0.0f,-1.5f,
        };

        // Create buffer object array
        GLuint bufferObjectNameArray;

        // Have OpenGL generate a buffer name and store the buffer object array 
        glGenBuffers(1, &bufferObjectNameArray);

        // Bind the buffer object array to the GL_ARRAY_BUFFER target buffer  
        glBindBuffer(GL_ARRAY_BUFFER, bufferObjectNameArray); 

        // Send the line data over to the target buffer
        glBufferData(
                     GL_ARRAY_BUFFER,   // the target buffer 
                     sizeof(line),      // the number of bytes to put into the buffer
                     line,              // a pointer to the data being copied 
                     GL_STATIC_DRAW);   // the usage pattern of the data 

        // Enable vertex data to be fed down the graphics pipeline to be drawn
        glEnableVertexAttribArray(GLKVertexAttribPosition); 

        // Specify how the GPU looks up the data 
        glVertexAttribPointer(
                              GLKVertexAttribPosition, // the currently bound buffer holds the data 
                              2,                       // number of coordinates per vertex 
                              GL_FLOAT,                // the data type of each component 
                              GL_FALSE,                // can the data be scaled 
                              2*4,                    // how many bytes per vertex (2 floats per vertex)
                              NULL);                   // offset to the first coordinate, in this case 0 
        glDrawArrays(GL_TRIANGLE_STRIP, 0, 3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:14:41.463

您需要复制线的每个顶点并对其进行偏移：

```
const GLfloat line[] = 
    {
        -1.0f, 0.5f, 1.0f, 0.5f,//0.0f, 0.5f,
        -1.0f, 0.5f, 1.0f, 1.5f,//0.0f, -1.5f,
    };
...
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

它只是用于具有预定义线方向的线。否则，您需要将偏移方向计算为垂直于线的方向。

# php - 用于隐藏重复单击图像值的 jquery

> ID：10297881
> 
> 赞同：1
> 
> 时间：2012-04-24T12:32:27.463
> 
> 标签：php, jquery

我正在做一个公共汽车座位选择项目。我在项目中间。现在我向客户显示巴士座位安排。当用户单击未选择的座位时，它会以彩色显示座位（即已选择），并向用户显示选定的座位值。这很好用。当用户取消选择所选座位时，该座位取消选择并返回上一阶段，但该所选座位的值不会删除。请看一下代码。

```
<?php
echo "<table>";
for($i=0;$i<5;$i++)
 {
echo "<tr>";
for($j=0;$j<12;$j++)
{
    echo "<td>";
    $k=$i.$j;
?>
    <img src="Seat.jpg" id="<?php echo $k; ?>" class="off">
   <?php
    echo "</td>";
}
echo "</tr>";
}
echo "</table>";

?>
 <div class="seatno"></div>
 <script type="text/javascript">
 $(document).ready(function(){             
  $("img").click(function(){
 var imageid = $(this).attr("id");
   if(imageid)
 {
     if ($(this).hasClass('off')) 
     {
   $(this).attr("src","Seat-availed.jpg").addClass('on').removeClass('off');
   $(".seatno").append(imageid+",");
}
else
{
     $(this).attr("src","Seat.jpg").removeClass('on').addClass('off');
  // $(".seatno").css("color","red");
  var editid;
  var rmv = $(".seatno").html();
  var editid =  $(this).attr("id");
  var finder = rmv.find(editid);

   alert(finder);   
   }
}
   });
   });
  </script> 
```

请找到解决方案这段代码就像redbus.in

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:08:47.733

你有`<div class="seatno">12,34,23,45,</div>`吗？你想删除 23 号吗？

```
var rmv = $(".seatno").html();
var id2rmv = 23;

rmv = rmv.split(id2rmv + ',').join('');

alert(rmv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:45:56.500

代替

```
var rmv = $(".seatno").html(); 
```

和

```
var rmv = $(".seatno").html(""); 
```

而`$(cssSelector).html()`只是获取值，`$(cssSelector).html(value)`设置它，即使它是空字符串 - “”。

# python - 从中提取文本标签

> ID：10297882
> 
> 赞同：1
> 
> 时间：2012-04-24T12:32:33.783
> 
> 标签：python, html, regex, tags

我有文本（Python 2.6 的代码）：

```
txt="foo<br><br><b>bar :</b><br>foo<br><b>bar :</b>" 
```

然后我尝试提取任何标签的内容（本例中为 <b> 标签）：

```
r=re.compile("<%s.*?>(.+?)</%s>" % ("b","b"), re.I|re.S) 
```

这主要是有效的，但输出不是我对我的棘手文本所期望的：

```
>>>re.findall(r,txt)
['<br><b>bar :', 'foo<br><b>bar :'] 
```

在任何情况下都可以编写一个正则表达式来从任何 HTML 标记中提取文本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:51:16.497

通常，您不能使用正则表达式解析 HTML，因为正则表达式仅捕获正则表达式语言。HTML 语言包含任意嵌套，而正则表达式无法处理这些。

也就是说，您可以提取典型 html 的打开和关闭标记之间的文本，如果您只需对正则表达式代码进行一点小改动：

```
r=re.compile("<%s.*?>(.+?)</%s>" % ("b","b"), re.I|re.S) 
```

```
>>> r=re.compile("<%s>(.+?)</%s>" % ("b","b"), re.I|re.S)
>>> txt="foo<br><br><b>bar :</b><br>foo<br><b>bar :</b>"
>>> re.findall(r, txt)
['bar :', 'bar :'] 
```

这 。*？允许
匹配您的开始标签。

但是，此策略仅将与您的模式匹配的第一个标签与与您的模式匹配的*第一个*结束标签匹配，而不是与实际与开放标签配对的标签匹配。当嵌套相同的标签时，它不会像您期望的那样做，如下例所示：

```
>>> txt="foo<b><b><b>bar :</b></b></b><br>foo<br><b>bar :</b>"
>>> re.findall(r, txt)
['<b><b>bar :', 'bar :']
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T13:00:20.550

正如其他人指出的那样，使用正则表达式解析 HTML 通常不是一个好主意。我建议你使用[htmllib](http://docs.python.org/library/htmllib.html)。例如：

```
import htmllib

class MyParser(htmllib.HTMLParser):     
  def __init__(self, fmt):
    htmllib.HTMLParser.__init__(self, fmt)        
    self.inb = False

  def start_b(self, data):
    self.inb = True

  def end_b(self):
    self.inb = False

  def handle_data(self, data):
    if self.inb: 
       #do sth with data 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T12:50:47.780

```
(?<=<b>).*?(?=<\/b>) 
```

此正则表达式模式将获取标签内的所有文本。

[http://regexr.com?30oga](http://regexr.com?30oga)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T12:47:29.603

我不完全确定您要做什么，但我认为这个正则表达式可以满足您的要求：

```
>>> re.findall(re.compile(r"<(\w+)>(.+?)</\1>", re.I|re.S), "foo<br><br><b>bar :</b><br>foo<br><b>bar :</b>")
[('b', 'bar :'), ('b', 'bar :')] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T13:16:35.710

或 BeautifulSoup（非常快）：

```
from bs4 import BeautifulSoup as soup

txt="foo<br><br><b>bar :</b><br>foo<br><b>bar :</b>"
your_text = soup(txt)
for your in your_text:
    your_text = your.findAll('b')
    print your_text.text 
```

# cakephp - CakePHP FormHelper 用于上传图像文件

> ID：10297883
> 
> 赞同：2
> 
> 时间：2012-04-24T12:32:41.753
> 
> 标签：cakephp, cakephp-2.0

我已经包含用于上传图像文件的图像表单助手，我只得到“名称”属性而不是“tmp_name”、“大小”、“类型”、“错误”属性。请给我解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:33:26.470

检查您的`form`允许上传：

`<?php echo $this->Form->create('Model', array('type'=>'file')); ?>`

添加`enctype`of `"multipart/form-data"`，允许文件上传。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:29:19.890

要将文件上传字段添加到表单，您必须首先确保将表单 enctype 设置为“multipart/form-data”，因此从创建函数开始，如下所示。

```
echo $this->Form->create('Document', array('enctype' => 'multipart/form-data') );
// OR
echo $this->Form->create('Document', array('type' => 'file')); 
```

阅读更多[http://book.cakephp.org/1.3/view/1411/File-Fields](http://book.cakephp.org/1.3/view/1411/File-Fields)

# solr - Solr 1.4 对多值字段的通配符查询

> ID：10297889
> 
> 赞同：2
> 
> 时间：2012-04-24T12:33:07.837
> 
> 标签：solr, full-text-search, wildcard

我有一个像这样设置的字段；

`<field name="keywordPhrases" type="text" indexed="true" stored="true" required="false" multiValued="true" />`

但我似乎无法对其执行通配符查询；

`keywordPhrases:smok*`

有办法解决这个问题吗？

我正在使用 Solr 1.4

# wcf - WCF Duplex - 向每个客户端推送不同的通知？

> ID：10297892
> 
> 赞同：5
> 
> 时间：2012-04-24T12:33:20.273
> 
> 标签：wcf, push-notification

我正在设计我的所有客户都将连接到的 2 个 WCF 服务。其中一项服务将是通知服务。

我希望每个客户端都连接到服务，订阅它，然后使用双工回调接口接收通知（服务将触发客户端中的“通知”操作）。

这是我的设计理念：

![在此处输入图像描述](../Images/e657e9ed9b0d8611dfc1093486d9c59e.png)

我的问题是：当每个客户端连接到我的服务时，我将根据数据库中的“用户”表对其进行验证（我将使用 UserNamePasswordValidator 并实现“验证”功能）。

要求：每个用户需要根据数据库中定义的规则接收不同的通知，**但他们都使用相同的合约**。

例如：

**数据库中John Smith**的规则可能是：在所有价格超过 100 美元的新产品上通知我。

**Jane Doe**在数据库中的规则可能是：在所有新产品上通知我它们的名称以“JA”开头。

**数据库中Jim Jabra**的规则可能是：通知我所有属于“食品”类型的新产品。

我的服务将有一个工作线程来检测数据库中的更改（将新产品插入数据库）。

然后它应该遍历所有连接的客户端 - 并且只有当它与客户端的通知请求匹配时，才会为每个客户端向他发送新产品的通知。

再次 - 所有客户端都会收到相同类型的更新（新产品），但每个客户端应根据数据库中的规则接收不同的产品。

我认为实现这一点的一种方法是使用**Singleton**服务，该服务包含以下列表：

*   客户端端点
*   用户对象（来自数据库）

这样 - 每次工作线程检测到新产品时，它都会遍历此列表并将通知发送给需要它的人。这种方法的问题在于，为了拥有一个全球客户列表 - 我需要将服务作为 Singlton，对吗？

第二种方法是......好吧......我不知道如何从工作线程访问连接到服务的客户端列表......

我想我遇到的主要问题是每个客户可能希望将不同种类的产品通知给他。含义 - pub\sub 方法在这里不太好，因为我的场景需要服务了解客户端。

关于如何解决这个头痛的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:40:36.953

无论如何，对于双工通信，您需要保持从服务器到客户端打开的 TCP 通道才能发送通知。

客户端是发起与服务器的连接的人，你需要保持这个连接打开，如果这个连接丢失，你不能（不应该）发起从服务器到客户端的连接，因为客户端可以在 NAT 之后，有防火墙，等等

所以无论如何，服务器端必须有一些静态（单例）对象来保存客户端连接列表，认为这不一定是 WCF 服务。您可以将此对象依赖注入到服务构造函数中。

```
public class ProductRepository
{
    private EventAggregator eventAggregator;

    public void Add(Product product)
    {
        //...
        eventAggregator.Publish(new NewProductEvent(product))
    }
}
[ServiceBehavior(InstanceContextMode=InstanceContextMode.PerSession)]
public class EventPublishingService
{
    private IClientCallback client;
    private EventAggregator eventAggregator;
    private Func<Product, bool> predicate;

    public EventPublishingService(...)
    {
        eventAggregator.Subscibe<NewProductEvent>(OnNewProduct);
    }
    private void OnNewProduct(NewProductEvent e)
    {
        if (predicate(e.Product)==true) client.Notify(e.Product);
    }

    public void Subscribe()
    {
        client = OperationContext.Current.GetCallbackChannel<IClientCallback>()
        var user = ServiceSecurityContext.PrimaryIdentity;
        predicate = GetFilterForUser(user);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:34:32.297

我想说的是以下内容。

创建一个 wcf 服务，每个客户端都会调用该服务来订阅过滤器一次。wcf 服务本身将简单地将数据添加到数据库中，并在数据存储中包含客户端名称和过滤器信息等信息。然后你的工作线程将在一个窗口服务中，它将简单地轮询你的数据库以获取数据，当数据可用时，它将从订阅表中读取。然后它将数据推送到每个客户端的队列中，这可能是一个共享队列服务器，如rabbitmq。

在客户端，假设它是一个基于窗口的应用程序，它将简单地通过在队列中以自身名称（client1 等）查找它来轮询 rabbitmq 队列服务器以获取它的数据。

# java - 非静态方法的Java延迟初始化？

> ID：10297896
> 
> 赞同：4
> 
> 时间：2012-04-24T12:33:29.083
> 
> 标签：java, lazy-loading

我最近爱上了使用如下的延迟加载技术：

```
public class SomeClass
{
  static class ComplexClassHolder
  {
   static ComplexClass complex = new ComplexClass(); // takes a long time
  }

 static double someMethod(int x, int y)
 {
  return ComplexClassHolder.complex.calculate(x,y);
 }

 public double quickMethod() // if only this method is called there is no initialization of the instance of ComplexClass
 {
  return 1.0+1.0;
 }
} 
```

但是非静态方法也可以使用类似的技术吗？

**例子**

```
import java.util.Random;

public class SomeClass
{
    final int seed;

    public SomeClass(int seed)
    {
        this.seed=seed;
    }

    class ComplexClassHolder
    {
        Random r = new Random(SomeClass.this.seed); // let's pretend this takes a long time
    }

    public double randomDouble()
    {
        return ComplexClassHolder.r.nextDouble();
    }
} 
```

问题是以上是不可能的，因为 ComplexClassHolder 和 ComplexClassHolder.r 不是静态的。但是，如果我将它们设为静态，我将无法访问 SomeClass.this.seed。

我知道我可以使用 getInstance() 和同步来做到这一点，但是如果在静态情况下可能的优雅技术也可以在这里以某种方式使用，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:40:49.037

对于有经验的程序员来说，你所看到的“优雅”看起来令人困惑和愚蠢。

当您查看以下示例时，您会发现语言或类加载器规范不会导致隐式副作用。它所做的一切都在您看到的代码中。你也明白诡计并不美丽。

```
public synchronized double getNextDouble() {
    if (r == null) {
        r = new Random();
    }
    return r.nextDouble();
} 
```

您可能还会意识到，如果您爱上了一把锤子，那么您所有的问题都开始看起来像钉子。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:52:48.827

您描述的技术依赖于 Java 的延迟类加载（由规范保证），因此它仅适用于应用程序范围的单例。您要实现的是将实例变量传递给惰性初始化对象。如果您仍然希望它是应用程序范围的单例并且只初始化一次，您仍然可以通过将种子写入静态类将看到的静态字段来使其工作。

# c# - C# - 验证属性

> ID：10297898
> 
> 赞同：0
> 
> 时间：2012-04-24T12:33:44.370
> 
> 标签：c#, validation

我使用 C# MVC，我有一个列表：

```
 public List<int?> SomeList { get; set; } 
```

当用户尝试输入字母而不是数字时，它会显示验证错误，因为列表的类型是 INT。

**我想添加更多验证，例如列表项**的“范围”（不仅）（它们都将具有相同的属性）。

我可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:46:38.627

您始终可以自己实施验证，特别是如果您想根据各种标准实施任意验证

```
bool validate(int value){
    if ((value < min) || (value > max))
        return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:48:38.843

您必须创建自己的继承自 的类`List<T>`，然后您可以通过声明一个新方法来“隐藏” Add 方法：

```
 class TestList : List<int>
{
    public int MinValue { get; set; }
    public int MaxValue { get; set; }

    public TestList(int minValue, int maxValue)
    {
        this.MinValue = minValue;
        this.MaxValue = maxValue;
    }

    public new void Add(int item)
    {
        if (item < MinValue || item > MaxValue)
            throw new ArgumentException("Value is outside the acceptable range");

        base.Add(item);
    }
} 
```

**编辑：**忘记在构造函数中抛出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:36:44.717

您可能想要查看[rangeattribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.rangeattribute.aspx)的来源，并创建您自己的属性 ( [http://msdn.microsoft.com/en-us/library/cc668224.aspx](http://msdn.microsoft.com/en-us/library/cc668224.aspx) )，该属性将验证具有范围的通用列表。

你去吧。

# php - php gd：图像无法显示，因为它包含错误

> ID：10297900
> 
> 赞同：3
> 
> 时间：2012-04-24T12:33:53.937
> 
> 标签：php, gd

我对这个错误非常恼火：

如果我注释掉

```
require_once'../class/myclass.class.php'; 
```

显示图像。如果我取消注释调用 myclass.class.php 的行，我会收到以下消息：

```
"The image "http://..." cannot be displayed because it contains errors." 
```

我的代码很简单：

myclass.class.php ：

```
<?php    
class myclass {
  public function getPanelData( $model ){
    $aFieldsData = array(
      'PAN35'=>array(
        'col'=>1,
        'row'=>3,
        'v-font'=>10,
        'v-marge-top'=>0,
        'v-marge-right'=>1,
        'v-marge-bottom'=>0,
        'v-marge-left'=>1
      )
    );
    if( key_exists($model, $aFieldsData) )
      return $aFieldsData[$model];
    else
      return false;
    }
  }
?> 
```

img.inc.php：

```
<?php
  session_start();
  require_once('myfunctions.inc.php');
  require_once('../class/myclass.class.php');
  $oData = new myclass();
  header('Content-Type: image/png');
  $sPanelModel = $_SESSION['produit'];
  $sEtiquette = '../img/etiquettes/label_'.$sPanelModel.'_preview.png';
  $rImg = imagecreatefrompng($sEtiquette);
  imagepng($rImg);
  imagedestroy($rImg);
?> 
```

**注意：如果我注释 require_once 调用 myclass.class.php，则此代码有效。调用 functions.inc.php 有效（只有少数函数）。**

```
tree :
/
 + class
   + myclass.class.php
 + inc
   + functions.inc.php
   + img.inc.php
 + images
   + etiquettes 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:58:44.813

如果确实可以通过取消注释 myclass.class.php 的 require() 来工作，那么最可能的原因是该文件`<?php`在`?>`. 这会将 Ascii 字符添加到图像的输出中，或者在 header() 语句中插入 php 错误消息（无法发送标头），从而弄乱您的文件。但是，正如我在评论中提到的，如果您的唯一目的是输出图片，您可以使用 readfile() 而不是创建图像实例。希望有帮助，斯特凡

# java - 在jsp页面中通过window.open使用Chrome时自动关闭窗口

> ID：10297905
> 
> 赞同：0
> 
> 时间：2012-04-24T12:33:58.837
> 
> 标签：java, javascript, google-chrome, google-chrome-extension

我在 jsp 页面中使用此代码从另一个 jsp 获取一些信息：

错误：生成的 jsp 页面只是闪烁并自动关闭。

```
<script>
var newWindow=window.open("test.jsp");
opener.self();
self.close();
</script> 
```

请告诉我如何解决这个问题

提前致谢，

拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:09:49.723

我不确定它是否这么简单，但是您的最后两行代码令人困惑，我不确定它们为什么在那里。但我可能缺少一些东西。无论哪种方式，请尝试删除它们：

```
<script>
var newWindow = window.open("test.jsp");
</script> 
```

# regex - 正则表达式：奇数出现的字符

> ID：10297907
> 
> 赞同：10
> 
> 时间：2012-04-24T12:34:08.210
> 
> 标签：regex

在搜索中找不到任何特定于我的问题的内容：

我有一个字母 {a,b,c}，我需要在其中生成一组包含奇数个 a 的字符串。

**有效**: ababaccccc baaaccccc cab caabaaac

**无效**：baac caacccb caabbbaac

试图：

`\b[bc]*a{3}[bc]*\b`但这非常有限。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T12:38:35.217

以下正则表达式[应该可以工作](http://regexpal.com/?flags=g&regex=%5Cb%5Bbc%5D%2aa%28%28%5Bbc%5D%2aa%29%7B2%7D%29%2a%5Bbc%5D%2a%5Cb&input=ababaccccc%20baaaccccc%20cab%20caabaaac%0Abaac%20caacccb%20caabbbaac%0Aa%0Aaa%0Aaaa%0Aaaaa%0Abca%0Acaca%0Acacaca)。

```
\b[bc]*a(([bc]*a){2})*[bc]*\b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T12:43:06.830

如果您需要没有正则表达式的解决方案，即 Java：

```
String arr[] = {"ababaccccc",  "baaaccccc" , "caabaaac", "baac", "caacccb", "caabbbaac"};   

for (String string : arr) {
            int counter = 0;
            for (int i = 0; i < string.length(); i++) {
                if (string.charAt(i) == 'a') {
                    counter++;
                }
            }
            if ((counter & 1) == 0) {
                System.out.println(string + " is invalid");
            } else {
                System.out.println(string + " is valid");
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:45:50.933

不是更容易吗

1.  在空格上拆分输入字符串

2.  计算每个元素中的'a'

3.  基于计数接受或拒绝的结果？

# html - 带有溢出的截止效果：隐藏

> ID：10297909
> 
> 赞同：2
> 
> 时间：2012-04-24T12:34:09.163
> 
> 标签：html, css, overflow, tablelayout

我想在css中创建以下内容：

我有一个应该显示在单行上的长文本，以及该文本旁边的超链接（稍后将放置在网站的标题中，这就是它需要单行的原因）。

当屏幕上的空间很小时，我希望将字符串切断（“testtest..” - 超链接）。当窗口调整大小并且有更多空间时，我希望显示文本（尽可能多地显示（例如“testtesttesttesttesttesttest .. - 超链接”）。

我遇到的问题是字符串不想被切断。它始终保持完整尺寸。

这是 JSFiddle 的链接：http: [//jsfiddle.net/PNGDw/1/](http://jsfiddle.net/PNGDw/1/)

注意：这里我正在用桌子尝试它，我也用花车尝试过，但这也没有用。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:57:59.620

你的桌子上有 5em 的宽度，所以它不会调整大小。使用类似的东西：

```
<style>
    *
    {
        margin: 0;
        padding: 0;
    }

    body
    {
        background: #5e8834;
    }

    div.wrapper        {
        background: #456326;
        border: 3px solid #547a2f;
        margin: 2em;
        width: 100%;
    }
    div.contents{    display:inline-block;}
    .should-cut-off 
    {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        width: 70%;
    }
</style>
<div id='wrapper'>
    <div class="should-cut-off contents">Test - test - test - Test - test - test - Test - test - test - Test - test - test
            - Test - test - test
    </div>
    <div class='contents' style="width:15%;">
        <a href="#">[this is a link]</a>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:48:08.230

将其配置为显示为 inline-block

```
.should-cut-off
{
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 70%;
    display: inline-block;
} 
```

[演示](http://jsfiddle.net/PNGDw/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T12:49:47.127

我创建了一个修剪文本的 javascript 函数，并且我正在调整调整大小时更新文本。这是一个演示：http: [//jsfiddle.net/HaFzd/3/](http://jsfiddle.net/HaFzd/3/)

# django - django 模板名称格式刚刚改变了吗？

> ID：10297910
> 
> 赞同：0
> 
> 时间：2012-04-24T12:34:13.247
> 
> 标签：django, heroku

我的 heroku 部署的 django 应用程序似乎突然要求我的应用程序模板前面加上 app_ ... [http://pure-light-5120.herokuapp.com/polls/](http://pure-light-5120.herokuapp.com/polls/)

> /Django-1.3.1.tar/dist/Django-1.3.1/Django-1.3.1/django/bin/work/myapp/polls/index.html, polls/poll_list.html（文件不存在）

以前它很满意`polls/list.html`

我刚刚推送了一个不相关的模板更改并得到了这些错误......

# html - 在 jQuery Mobile 中保留文本输入值

> ID：10297911
> 
> 赞同：4
> 
> 时间：2012-04-24T12:34:21.533
> 
> 标签：html, jquery-mobile, back-button, textinput

我在 jQuery Mobile 中发现了一些奇怪的行为，我什至可以在演示网站上重现这些行为：

1.  **直接**去[http://jquerymobile.com/test/docs/forms/textinputs/](http://jquerymobile.com/test/docs/forms/textinputs/) _
2.  在文本输入中输入内容
3.  单击页面上的任何链接并享受 ajax-y 动画
4.  使用浏览器的后退按钮返回

**结果**：在文本输入中输入的文本仍然存在。这就是我要的。

但是，如果您来自网站上的某个地方，这会中断：

1.  转到[http://jquerymobile.com/test/docs/forms/](http://jquerymobile.com/test/docs/forms/)
2.  点击“文本输入”
3.  从上面执行步骤 2 到 4

**结果**：在文本输入中输入的文本已经消失。这不是我想要的。

我在 Chrome for Desktop 和 Windows Phone 模拟器上对此进行了测试，两者都表现出相同的行为。我该怎么做才能始终保留在文本输入中输入的文本？就我而言，这是一个搜索框。我希望用户能够在从搜索结果导航回来后细化搜索词，而无需再次输入所有内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T10:43:53.067

这是因为，当您来自 docs/forms 时，ajax 在开始时被禁用。那么，jQueryMobile 禁用 dom-cache。您可以通过在加载 jquerymobile.js 之前添加它来强制 dom 缓存：

```
$(document).bind("mobileinit", function() {
    $.mobile.page.prototype.options.domCache = true;
}); 
```

**编辑**：

我的解决方案有效，我刚刚尝试过：

*   转到[我的演示页面](http://labs.julien.guyomard.org/stackoverflow/10297911/solution/forms.html)；

*   点击“文本输入”

*   在“文本输入：”中输入内容

*   单击左侧的“搜索输入”（我的演示中只有一些链接有效）

*   使用浏览器的后退按钮返回

你的文字还在！

（注意：此[页面](http://labs.julien.guyomard.org/stackoverflow/10297911/problem/forms.html)显示原始版本，有问题，因此没有 domCache，以证明当我复制 jQueryMobile-Docs 页面进行演示时我没有更改任何其他内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T18:08:23.673

我发现最可靠的方法是使用 pagebeforehide 将数据存储在本地存储中，并在需要时使用 pagebeforeshow 将其放回

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:29:24.057

请尝试一下，它挽救了许多人的生命。

```
 $.extend(  $.mobile , {
        ajaxEnabled      : false,
        hashListeningEnabled: false
    }); 
```

可以在以下链接上阅读很多内容。

[http://forum.jquery.com/topic/jquery-mobile-true-browser-back-button-issue](http://forum.jquery.com/topic/jquery-mobile-true-browser-back-button-issue)

# c# - 为什么是List的来源 名为 List'1.cs 的类？

> ID：10297913
> 
> 赞同：4
> 
> 时间：2012-04-24T12:34:24.717
> 
> 标签：c#, .net, visual-studio-2010

当我在VS2010中按Ctrl并点击List时，会打开List'1.cs文件，该文件包含方法头和摘要注释，

![在此处输入图像描述](../Images/388ed3802792122260e88796bea75345.png)

问题是，为什么你没有将那个文件命名为 List(T).cs 或 List{T}.cs 或 List[T].cs？为什么命名约定 List'1.cs，是标准的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:39:25.963

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T12:40:21.520

In the CLR, that's the default way to annotate generic types. List`1 means that this class has one generic type parameter. The brackets are just a C# thing, also they are not valid as file names.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T12:36:53.513

命名是泛型类型的标准。

# javascript - javascript - 使链接可点击

> ID：10297918
> 
> 赞同：0
> 
> 时间：2012-04-24T12:34:38.070
> 
> 标签：javascript

我有这段代码，它的作用是使用 jstorage 保存一个值。

我想让保存的值可点击 - 我打算在那里存储链接（有点像最喜欢的书签）。

所以我将有 2 个字段，键和值，键将是一个描述性名称，值将存储整个 url (http://...)。只有键是可见的，值是隐藏的。点击 Key 后想被重定向到页面。

任何想法我该怎么做？

```
 <script>

        function insert_value(){
            var row = document.createElement("tr"),
                key = document.getElementById('key').value,
                val = document.getElementById('val').value;

            if(!key){
                alert("KEY NEEDS TO BE SET!");
                document.getElementById('key').focus();
                return;
            }
            $.jStorage.set(key, val);
            document.getElementById('key').value = "";
            document.getElementById('val').value = "";
            reDraw();
        }

        function reDraw(){
            var row, del, index;
            var rows = document.getElementsByTagName("tr");
            for(var i=rows.length-1; i>=0; i--){
                if(rows[i].className == "rida"){
                    rows[i].parentNode.removeChild(rows[i]);
                }
            }

            index = $.jStorage.index();
            for(var i=0; i<index.length;i++){
                row = document.createElement("tr");
                row.className = "rida";
                var t = document.createElement("td");
                t.innerHTML = index[i];
                t.colSpan = 2;
                row.appendChild(t);
                t = document.createElement("td");
                t.className = "urls";
                t.innerHTML  = $.jStorage.get(index[i]);
                row.appendChild(t);
                del = document.createElement("a");
                del.href = "javascript:void(0)";
                del.innerHTML = "<div class='delimg'></div>";
                (function(i){
                    del.onclick = function(){
                        $.jStorage.deleteKey(i);
                        reDraw();
                    };
                })(index[i])
                t = document.createElement("td");
                t.appendChild(del)
                row.appendChild(t);
                document.getElementById("tulemused").appendChild(row);

            }
        }

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:43:20.267

首先，你的代码真的很混乱......

不过，关于您的问题，您必须将键列作为链接​​输出，并将值作为 href 属性。

所以在你的代码中，你可以使用这样的东西作为第一列：

```
//...
var t = document.createElement("td");
var link = document.createElement("a");
link.href = $.jStorage.get(index[i]);
link.innerHTML = index[i];
t.appendChild(link);
row.appendChild(t);
//... 
```

# java - 将模拟添加到集合中适用于 .times，而不适用于 for 循环

> ID：10297920
> 
> 赞同：0
> 
> 时间：2012-04-24T12:34:46.073
> 
> 标签：java, groovy, mocking, spock

我们在 Spock 中遇到了一个非常奇特的模拟和集合行为。

在 Spock (0.5, Groovy 1.7)`given:`块中 ( `amount`is an `Integer`)：

```
Set<Operand> operands=new HashSet<Operand>()
for (index in amount){
  operand = Mock(Operand)
  operand.update() >> null
  operands.add(operand)
} 
```

每次循环运行后（右括号上的断点），集合中只有一 (1) 个元素，当循环重新开始时，`operands.size() == 0`. 显然，模拟对象神秘地消失了。

在以下版本中，一切正常，并且`operands.size() == amount`在循环运行后集合。

```
Set<Operand> operands=new HashSet<Operand>()
amount.times{
  operand = Mock(Operand)
  operand.update() >> null
  operands.add(operand)
} 
```

有谁知道为什么第一个版本不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:35:06.003

`Set`该问题与 Spock (和s)无关。这根本不是在 Groovy`for (index in amount)`中编写带有迭代的循环的正确方法。`amount`在 之后`in`，Groovy 期望它知道如何迭代的东西（例如`Iterable`）。回退是（逻辑上）将对象视为仅包含其自身的集合。这就解释了为什么你只得到一次迭代 where `index == amount`.

编写带有`amount`迭代的循环的最短方法是`amount.times {}`，如您的第二个片段中所示。

# terminal - 从文件加载 tmux 会话

> ID：10297922
> 
> 赞同：2
> 
> 时间：2012-04-24T12:34:52.407
> 
> 标签：terminal, tmux

我希望能够在 tmux 中加载保存在文件中的会话，包括窗口/窗格和 shell 设置。我在 ~/.tmux/my_session 中有这个：

```
new -d -s test1
neww -k -t test1:1 top

new -d -s test2
neww -k -t test2:1 -n '2w1' 
neww -t test2 -n '2w2' 
```

现在我在 tmux 中获取它，这工作正常：我有两个分离的会话 test1（有一个窗口）和 test2 有 2 个窗口。但我还想实际运行一些命令，例如将最后一行替换为：

```
neww -t test2 -n '2w2' 'cd ~/work; ./myscript.zsh ; ls' 
```

这样它就可以进入目录，运行一些设置脚本，`ls`并**保持**打开状态以供进一步使用。根据手册，但是命令完成后窗口会自动关闭。有一个选项`remain-on-exit`，但不清楚我如何将它与它结合起来以`neww`使其真正起作用......

还手动列出了一个 -c 标志用于`neww`设置起始目录，但我`homebrew`安装`tmux v1.6`的似乎无法识别它。

`teamocil`似乎能够做到这一点，所以它必须是可能的（但`teamocil`不会将会话分开，这对我来说是必不可少的）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T22:43:16.860

答案是发送密钥：

```
new -d -s test1
neww -k -t test1:1 -n '1w1'
send-keys -t test1:1 "echo '1w1'" C-m

new -d -s test2
neww -k -t test2:1 -n '2w1'
neww -t test2 -n '2w2'
send-keys -t test2:1 "echo '2w1'" C-m
send-keys -t test2:2 "echo '2w2'" C-m

display-message "Sessions loaded!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:30:35.603

我很确定 tmuxinator 可以将事情分开。

# qt - 如何防止 QAbstractScrollArea / QTableView 水平滚动？

> ID：10297925
> 
> 赞同：5
> 
> 时间：2012-04-24T12:35:03.967
> 
> 标签：qt, qtableview, qscrollarea

我有一个 QTableView 和其中的一些内容。我想要这样的行为，`horizontalHeader() -> setResizeMode( ResizeToContent )`但它不能创建水平滚动条——我的意思是视口不能比表格宽。

即使创建一个新的 QHeaderView 也不是那么容易，因为只有几个虚拟方法。

![绘图以可视化问题](../Images/9c6c8973a06d61377693d4aae6cfa0fb.png)

提前致谢，

查理

PS：我有一个自定义项目委托，它用“...”缩短长文本。它以 sizeHint() 的形式返回完整尺寸，但是当 paint() 方法接收到较小的尺寸（例如，使用 resizeMode() == Qt::Interactive 模拟）时，它会裁剪内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T13:04:11.007

**新答案**

您需要在各个部分设置拉伸，我创建了一个简单的测试应用程序：

![测试截图](../Images/2ad7a9dec20d15316aa3ee8e231a6a33.png)

**测试.cpp**

```
#include <QtGui>

int main(int argc, char** argv)
{
    QApplication app(argc, argv);

    QStandardItemModel mdl(3, 3); // rows, cols
    mdl.setHorizontalHeaderLabels(QStringList() << "Name" << "Size" << "Date");
    mdl.setItem(0, 0, new QStandardItem("Short name"));
    mdl.setItem(0, 1, new QStandardItem("25kb"));
    mdl.setItem(0, 2, new QStandardItem("2011/07/05"));
    mdl.setItem(1, 0, new QStandardItem("This is a long name"));
    mdl.setItem(1, 1, new QStandardItem("25kb"));
    mdl.setItem(1, 2, new QStandardItem("2011/07/05"));
    mdl.setItem(2, 0, new QStandardItem("This is a long long long long name"));
    mdl.setItem(2, 1, new QStandardItem("25kb"));
    mdl.setItem(2, 2, new QStandardItem("2011/07/05"));

    QTableView view;
    view.setModel(&mdl);
    QHeaderView* hdr = view.horizontalHeader();
    hdr->setResizeMode(0, QHeaderView::Stretch);
    hdr->setResizeMode(1, QHeaderView::ResizeToContents);
    hdr->setResizeMode(2, QHeaderView::ResizeToContents);

    view.show();
    return app.exec();
} 
```

**test.pro**

```
QT += core gui
SOURCES=test.cpp 
```

**注意**`void QHeaderView::setResizeMode(int, ResizeMode)`：当这个逻辑索引存在时调用很重要，也就是说，当定义这些列的模型附加到视图时。

* * *

**旧答案**

QAbstractScrollArea 具有 Horizo [​​ntalScrollBarPolicy](http://qt-project.org/doc/qt-4.8/qabstractscrollarea.html#horizontalScrollBarPolicy-prop)可以有选项`ScrollBarAlwaysOff`属性。

尝试类似：

```
QAbstractScrollArea* scrollArea = // ???
scrollArea->setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff); 
```

* * *

# android - Android 中用于解锁 Android 游戏关卡的包装器

> ID：10297927
> 
> 赞同：-2
> 
> 时间：2012-04-24T12:35:08.553
> 
> 标签：android, wrapper

我是 Android 开发的新手。我想在我的 Android 游戏中创建一个包装器，以便在某个级别后游戏将锁定。然后，用户必须发送短信来解锁该级别并能够播放它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:05:15.280

尝试创建一个自己的广播，在开始每个级别后发送。然后你可以捕捉到这个广播（检查条件）并将一个全局变量设置为“锁定”或“解锁”。

（否则你可以使用简单的 SharedPreferences 来保存你在每个级别之前检查的最新（未）锁定状态......）

# jquery - 悬停时不透明度发生变化时 Google Chrome 中的背景偏移

> ID：10297930
> 
> 赞同：2
> 
> 时间：2012-04-24T12:35:21.770
> 
> 标签：jquery, css, google-chrome, background, opacity

我用 Jquery 设置了一个悬停效果，它改变了悬停元素的不透明度。它在所有最近的浏览器中都可以正常工作，除了 Chrome，它会改变 body 元素的背景。

这是链接：[http ://wrong.ro/tataia/](http://wrong.ro/tataia/)

我的工作环境如下：Google Chrome v18.0.1025.162 / Windows 7 x64。

有什么解决方法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-13T17:38:07.517

我经历了与此非常接近的事情，在我的情况下，更改悬停时的不透明度会导致前景图像元素摆动。看起来特定原因与使用转换（我正在使用）有关。修复很简单 - 在我添加的相关 img 元素上：

```
-webkit-backface-visibility: hidden; 
```

没有更多的摆动。我不熟悉这实际上做了什么，但它没有任何奇怪的副作用并解决了问题。

我还看到了一个我没有尝试过的替代解决方案 - 显然其他人已经经历过这个并用旋转修复它：

```
-webkit-transform: rotate(0);
-moz-transform: rotate(0);
transform: rotate(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:56:26.927

我终于可以在 Chrome 中看到问题了。它非常微妙，因此除非您确切地知道您在寻找什么，否则很容易错过。

我仍在处理其余的问题，但是当我将鼠标悬停在中下部的“stiati ca”徽标上时，我可以看到背景在图像左侧稍微移动了一点。

问题似乎与`background-size`您的 CSS 部分有关。如果我删除这些`background-size`行，问题就完全消失了。我并不是说这是问题的真正原因，但这是第一个线索。我在调查的这一点上的猜测（答案稍后会更多）是悬停中的某些东西导致文档大小发生变化，从而导致背景重新缩放并因此发生变化：

```
body {
    background: black url('../img/bck.jpg') left top fixed no-repeat;
    moz-background-size: cover;
    background-size: cover;
    -ms-filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../img/bck.jpg', sizingMethod='scale')";
     filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../img/bck.jpg', sizingMethod='scale');
} 
```

进一步追求这一点，我发现如果我从这个 CSS 块中注释掉 text-indent 行：

```
a#stiati_ca{
    display: block; width: 124px; height: 124px;
    xtext-indent: -9999em;
    background: url('../img/stiati_ca.png') no-repeat;
    margin: 88px auto 0;
} 
```

然后，将鼠标悬停在徽标上时，问题就完全消失了。当然，你的链接中有一些文本显示我猜你不想看到，但你可以修复 HTML 以不同的方式工作。我建议使用其中包含固定大小 div 的链接（链接中没有文本），然后在 div 上而不是在链接本身上设置背景图像。无论如何，这是一种更安全的跨浏览器方式，您不需要文本缩进行，并且徽标图像的背景移动问题应该消失。如果您确实需要链接中的文本但不希望它显示，则将其放在一个跨度中并使用`display: none`. 无论哪种方式，您都不应该在 上设置背景图像`<a>`，而应该在链接内具有适当大小的元素上设置背景图像。这应该会更好。

我还没有弄清楚为什么前四张图片会出现同样的问题。如果我弄清楚了，我会添加到我的帖子中。

# ravendb - 如何将配置设置注入自定义 RavenDB 包

> ID：10297937
> 
> 赞同：1
> 
> 时间：2012-04-24T12:35:46.293
> 
> 标签：ravendb

我已将 SQL Server 连接字符串硬编码到 RequestResponder 中。以一种可以在 Debug 和 Release 中工作的方式将配置放入 RequestResponder 的推荐方法是什么？

是否建议使用 MEF 或 Database.Configuration，例如：

```
var connectionString = database.Configuration.GetConfigurationValue<string>("MySettings/ConnectionString") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T06:42:28.470

我们使用 appSettings 值或将配置放入 RavenDB 文档中。

# internet-explorer - IE 9 浏览器和文档模式每次重新启动时都会更改？

> ID：10297939
> 
> 赞同：1
> 
> 时间：2012-04-24T12:35:51.300
> 
> 标签：internet-explorer, browser, cross-browser

我有一些 CSS 仅在浏览器和文档模式符合 IE 9 标准时才有效。但是，每次我关闭并打开它时，它都会恢复到 IE 9 兼容浏览器模式和 IE 8 标准文档模式，并且所有 CSS 都不会呈现。我该怎么做才能永久强制这些设置？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:12:28.950

我需要在这个标签中将 IE8 更改为 IE9：

```
<meta http-equiv="X-UA-Compatible" content="IE=9"/> 
```

感谢 Šime Vidas！

# iphone - 如何使用手机中的相机测量物体的高度、宽度和距离？

> ID：10297942
> 
> 赞同：-1
> 
> 时间：2012-04-24T12:36:01.113
> 
> 标签：iphone, objective-c

任何人都可以给我/建议我正确的方式或任何示例，以便我可以对这个要求有更多的了解。

我会尝试三角函数，但高度不是从捕获对象/墙上得到的。请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:40:41.640

I think it's not possible, since iOS devices don't have such sensors. No echo-locators, no even second rear camera for getting stereo image and using paralax effect for analyzing distance. You have only flat 2d image.

# asp.net - 按最近更新的行对 datagridview 进行排序

> ID：10297944
> 
> 赞同：0
> 
> 时间：2012-04-24T12:36:04.203
> 
> 标签：asp.net, sql-server, sorting

是否有可能以首先显示最新更新行的方式对数据网格视图进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:41:41.360

对的，这是可能的。如果表中有一个记录行更新时间的列，则可以按该行排序。

# php - 使用 findBy 和更新实体的教义查询

> ID：10297946
> 
> 赞同：2
> 
> 时间：2012-04-24T12:36:18.477
> 
> 标签：php, orm, doctrine-orm

我对 Doctrine2 相当陌生，我正在尝试学习如何查询实体并更新它们。

我用来查询的方法是特定属性上的 findBy 方法来搜索数据库中的记录列表，“我的查询返回对象列表”。现在我想更新实体中一些我无法工作的属性。这是我所拥有的：

```
 /** Set the search attributes for hls**/
    $id = array("itemNbr" => $itemNbr);
    $hls = $this->emInstance->getRepository('entity\\Hls')->findBy($id);

    // on update hls
    foreach($hls as $h){

        $h->setAllRd($Rd);
        $h->setRdy($Rdy);
        $h->setNo($no);
        var_dump($h);
    }
    $this->emInstance->flush();
    var_dump($statHdr); 
```

它到达循环中的第一个 var 转储，该转储返回一个对象列表，但由于使用了刷新，它没有到达第二个 var 转储。如果我在不使用 flush 方法的情况下执行，则属性会在 var_dump 中显示更新的信息，但实际上不会提交更新，因为 flush 不起作用。我究竟做错了什么。

此外，实体的 id 是 id，而 itemCnt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:55:09.190

在流程结束时使用 flush()，它会执行查询。

同时使用persist()

前任：

```
 $id = array("itemNbr" => $itemNbr);
    $hls = $this->emInstance->getRepository('entity\\Hls')->findBy($id);

    // on update hls
    foreach($hls as $h){

        $h->setAllRd($Rd);
        $h->setRdy($Rdy);
        $h->setNo($no);
        var_dump($h);
        //keep the changes in memory
        $this->emInstance->persist($h);
    }
    var_dump($statHdr);
    // insert the changes to the db
    $this->emInstance->flush(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-05-28T22:43:55.640

解决方法如下：

```
$crack = $em->getRepository('CrackBundle:Crack')->findBy(array('id' => 1 ));
 foreach ($crack as $c) {
 $c->setName('Nilton');
 $em->persist($c);
 $em->flush();
 } 
```

# php - Doctrine 2.0：让类加载器为实体工作

> ID：10297948
> 
> 赞同：0
> 
> 时间：2012-04-24T12:36:25.960
> 
> 标签：php, orm, doctrine-orm, classloader

我一直在努力将我的实体加载到我的第一个 Doctrine 2.0 项目中。一切正常（加载其他类，通过 DBAL 与数据库连接成功）除了加载我的实体类。

我会给你你需要的信息。

*   我通过 tarball 方法安装了 Doctrine
*   我的文件夹的结构是这样的

    ```
    public_html
      -> docrine test
         -> entities
            -> User.php
            -> Video.php 
    ```

*   在我的引导文件中，我试图加载它

    ```
    <?php
    $sRoot = "/home/..../public_html/doctrinetest";
    $classLoader = new \Doctrine\Common\ClassLoader('doctrinetest\entities', $sRoot.'/doctrinetest/entities');
    $classLoader->register(); // register on SPL autoload stack 
    ```

*   作为命名空间，我在挑战类之前放了以下行

    ```
    namespace doctrinetest\entities; 
    ```

*   然后当我尝试运行命令来生成我的方案时

    ```
    $tool = new \Doctrine\ORM\Tools\SchemaTool($em);
    $classes = array(
      $em->getClassMetadata('Video'),
      $em->getClassMetadata('User')
    );
    $tool->createSchema($classes); 
    ```

*   我得到错误

    ```
    Warning: class_parents() [function.class-parents]: 
    Class Video does not exist and could not be loaded in
    /home/..../public_html/doctrine2-tarball/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php on line 40 
    ```

请帮我解决这个问题 谢谢，Pj

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:23:02.040

首先，\Doctrine\Common\ClassLoader 在 'includePath/namespace/' 目录中查找类。

```
<?php
$sRoot = "/home/..../public_html/doctrinetest";
$classLoader = new \Doctrine\Common\ClassLoader('doctrinetest\entities', $sRoot.'/doctrinetest/entities');
$classLoader->register();
?> 
```

上面的代码尝试在 '/home/..../public_html/doctrinetest/doctrinetest/entities/doctrinetest/entities/' 目录中查找类。当然，找不到类。

其次，EntityManager 的 getClassMetadata 函数希望 className**包括**参数的命名空间。

因此像这样使用。

```
$em->getClassMetadata('\\doctrinetest\\entities\\Video'); 
```

# java - MySQL Found_Rows() 返回正确值的两倍

> ID：10297955
> 
> 赞同：1
> 
> 时间：2012-04-24T12:36:45.060
> 
> 标签：java, mysql

我的数据库中有 3 条记录（用于测试目的），我使用 SQL_CALC_FOUND_ROWS 返回行数和 LIMIT 来收集分页结果。

```
SELECT SQL_CALC_FOUND_ROWS * FROM contacts WHERE contacts.organizationId = :organizationId LIMIT 0, 1 
```

我正在使用 Spring 进行数据库业务登录。

```
public List<Contact> findAll(int organizationId, int rowStart, int rowAmount, final boolean deep) {
    final HashMap<String, Object> namedParameters = new HashMap<String, Object>();
    namedParameters.put("organizationId", String.valueOf(organizationId));
    namedParameters.put("rowStart", rowStart);
    namedParameters.put("rowAmount", rowAmount);
    final NamedParameterJdbcTemplate namedParameterJdbcTemplate = new NamedParameterJdbcTemplate(dataSource);
    DataSourceTransactionManager transactionManager = new DataSourceTransactionManager(dataSource);
    TransactionTemplate transactionTemplate = new TransactionTemplate(transactionManager);

    List<Contact> contactList = transactionTemplate.execute(new TransactionCallback<List<Contact>>() {

        @Override
        public List<Contact> doInTransaction(TransactionStatus status) {
            SqlRowSet result = namedParameterJdbcTemplate.queryForRowSet(SQL_FIND_ALL_BY_ORGANIZATION_ID, namedParameters);
            int count = namedParameterJdbcTemplate.queryForInt("SELECT FOUND_ROWS()", (HashMap<String, ?>) null);
            System.out.println(count);
            List<Contact> contactList = mapContact(result, deep);
            if(contactList.size() > 0) {
                return contactList;
            } else {
                return null;
            }
        }

    });
    return contactList;
} 
```

无论我做什么，当我在表中只有 3 行时，计数都会返回 6。事实上，无论结果集中有多少行，它都会返回 6。为什么数量翻倍，我做错了什么？

**更新**

我最终使用了这个：

```
int count = namedParameterJdbcTemplate.queryForInt("SELECT Count(*) FROM contacts WHERE contacts.organizationId = :organizationId", namedParameters); 
```

基本上和我之前做的一样，但是 SQL 改变了一点。我现在使用 count 而不是 SQL_CALC，我认为这会导致两个单独的查询，但对于 Spring，它似乎是唯一的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:11:15.357

它看起来像使用`SqlRowSet`. 也许 JDBC 驱动程序会在内部发出一些查询来支持它。

如果您不需要特定功能，`SqlRowSet`最好使用更传统的方法。例如，最好使用`RowMapper<Contact>`to 查询`List<Contact>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-06T14:12:34.870

这是一个有点旧的帖子，但是由于我在研究时遇到它并且这并不能完全满足我的需求，一旦我弄清楚了，我就把所有东西都写在这里了。[https://www.contradodigital.com/2018/01/06/how-to-use-sql_calc_found_rows-and-found_rows-with-limit-and-offset-in-a-mysql-query-using-java-and-数据库/](https://www.contradodigital.com/2018/01/06/how-to-use-sql_calc_found_rows-and-found_rows-with-limit-and-offset-in-a-mysql-query-using-java-and-jdbc/)

本质上，要使 MySQL FOUND_ROWS() 工作，您需要在与第一个查询相同的 JDBC 连接中运行 FOUND_ROWS()。这将确保返回的数据是准确的。

# iphone - iOS 5 Google JSON - 如何解析嵌套对象？

> ID：10297957
> 
> 赞同：0
> 
> 时间：2012-04-24T12:36:56.443
> 
> 标签：iphone, ios, json, ios5

我正在尝试解析 Youtube 播放列表：

如果我的 JSON 结构如下：

```
{"apiVersion" .... 
"items":[{"id2":"some-id","title":"songtitle", 
```

我完全能够通过以下方式解析标题：

```
// Fill array
NSArray *items = [json objectForKey:@"items"];

// Get item from tableData
NSDictionary *item = [tableData objectAtIndex:[indexPath row]];
// Set text on textLabel
[[cell textLabel] setText:[item objectForKey:@"title"]]; 
```

但是如果 JSON 是这样的：

```
{"apiVersion" .... 
"items":[{"id1": .... "video":{"id2":"some-id","title":"songtitle", 
```

我怎样才能达到嵌套对象的标题？

只是一件简单的事情，但我现在已经为此努力了好几个小时。郁闷了，谢谢你的建议！

[编辑] 这是完整的结构：

```
{
    "items":
    [
    {
    "video":
            {
                "title": "Number One",
                "description": "Description one"
            },    
            {
             "title": "Number two",
                "description": "Description two"
            },
            {
                "title": "Number three",
                "description": "Description three"
            }
    },
    {   
    "video":
            {
         "title": "Number One",
             "description": "Description one"
            },
            {
                "title": "Number two",
              "description": "Description two"
            },
            {
               "title": "Number three",
              "description": "Description three"
            }
    }

    ]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:04:04.530

试试这个：

```
NSArray *items = [[json valueForkey:@"items"]valueForkey:"video"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:43:50.703

```
NSMutableArray *items = [json valueForkey:@"items"];
for(int i =0;i<[items count]; i++)
{
  NSMutableArray *arrtitle = [[[items objectAtIndex:i]valueForkey:@"Video"]copy];
  for(int j =0;j<[arrtitle count]; j++)
  {
    NSString *title = [[arrtitle objectAtIndex:j]valueForkey:@"title"];
  }
} 
```

也许它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T06:06:21.483

问题是您的 json 无效。所有的`titles`都应该在数组中吧？所以他们必须在[]中。例如，您可以使用以下站点来“调试”您的 json：

[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)

此外，在 iOS 5 中，您可以使用新的内置 JSON api。这是一个很好的教程： [http ://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

尽管如此，我猜你的 json 应该是这样的：

```
{
   "items":[
      {
         "video":[
            {
               "title":"Number One",
               "description":"Description one"
            },
            {
               "title":"Number two",
               "description":"Description two"
            },
            {
               "title":"Number three",
               "description":"Description three"
            }
         ]
      },
      {
         "video":[
            {
               "title":"Number One",
               "description":"Description one"
            },
            {
               "title":"Number two",
               "description":"Description two"
            },
            {
               "title":"Number three",
               "description":"Description three"
            }
         ]
      }
   ]
} 
```

祝你的项目好运；）

# bash - 将 $ 更改为 % 登录 bash 脚本

> ID：10297960
> 
> 赞同：0
> 
> 时间：2012-04-24T12:37:06.837
> 
> 标签：bash, cmd, cross-platform

我想让一些简单的脚本在 NT cmd.exe 和 bash 中工作。如果我能让 bash 将 %1 %2 %* 等理解为有效的 $1 $2 $* ，看起来我可以做到。可能是，有一些简单的方法可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:43:57.737

在针对不同编码语言的编译器上运行相同的脚本通常是一个非常糟糕的主意，你正在做的就像在 flash actionscript 上运行 javascript 代码一样，当然，语法相似但它们不一样......

但是，您可以做的是在 Windows 中安装 bash： [http ://win-bash.sourceforge.net/](http://win-bash.sourceforge.net/)

或者在linux中安装wine（通常是一个更糟糕的主意）......

最佳实践可能是将其编码为旨在跨平台工作的东西，如 python

# c# - C#：无法从程序集中加载类型

> ID：10297961
> 
> 赞同：12
> 
> 时间：2012-04-24T12:37:19.017
> 
> 标签：c#, windows, visual-studio, dll, lucene.net

将 Lucene.net 和 Lucene.net Contrib 添加到 C# MVC3 后，我在第一次成功运行后收到以下消息。收到此错误后，我需要完全擦除 C:\Users\Me\AppData\Local\Temp\Temporary ASP.NET 文件，然后才能再次运行该项目。

我已经尝试手动删除 Lucene 文件（包括我的项目中的引用），然后重新安装它们 - 使用 NuGet 和手动 - 但它总是相同的情况；项目运行一次后，我开始收到以下错误：

注意：Contrib.Regex 是 Lucene.net Contrib 的一部分。

```
Server Error in '/' Application.

Could not load types from assembly Contrib.Regex, Version=2.9.4.0, Culture=neutral, PublicKeyToken=85089178b9ac3181, errors:
Exception: System.IO.FileLoadException: Could not load file or assembly 'Lucene.Net, Version=2.9.4.1, Culture=neutral, PublicKeyToken=85089178b9ac3181' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
File name: 'Lucene.Net, Version=2.9.4.1, Culture=neutral, PublicKeyToken=85089178b9ac3181'

=== Pre-bind state information ===
LOG: User = rcw7\Me
LOG: DisplayName = Lucene.Net, Version=2.9.4.1, Culture=neutral, PublicKeyToken=85089178b9ac3181
(Fully-specified)
LOG: Appbase = file:///C:/Development/Projects/Foobar/Foobar/
LOG: Initial PrivatePath = C:\Development\Projects\Foobar\Foobar\bin
Calling assembly : Contrib.Regex, Version=2.9.4.0, Culture=neutral, PublicKeyToken=85089178b9ac3181.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Development\Projects\Foobar\Foobar\web.config
LOG: Using host configuration file: C:\Users\Me\Documents\IISExpress\config\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Post-policy reference: Lucene.Net, Version=2.9.4.1, Culture=neutral, PublicKeyToken=85089178b9ac3181
LOG: Attempting download of new URL file:///C:/Users/Me/AppData/Local/Temp/Temporary ASP.NET Files/root/e9b4cfa4/edfa73f8/Lucene.Net.DLL.
WRN: Comparing the assembly name resulted in the mismatch: Revision Number
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated.
Exception: System.IO.FileLoadException: Could not load file or assembly 'Lucene.Net, Version=2.9.4.1, Culture=neutral, PublicKeyToken=85089178b9ac3181' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
File name: 'Lucene.Net, Version=2.9.4.1, Culture=neutral, PublicKeyToken=85089178b9ac3181' 
```

此处的完整输出：http: [//pastebin.com/Vbu4VK7B](http://pastebin.com/Vbu4VK7B)

最初我认为这是我的开发环境本地的问题，但是在重建项目并将其复制到我们的服务器后，我得到了同样的错误。

关于如何克服这个问题的任何建议？:-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T11:29:42.993

事实证明，DLL 地狱并不是由我自己干预配置和编译库引起的。这实际上是由于我新下载的 Lucene.NET 版本和与 Examine 捆绑在一起的有点过时的版本之间的冲突造成的，后者又与 Umbraco 5 捆绑在一起。

显然，过时的捆绑 Lucene.NET 最终位于影子缓存（临时 ASP.NET 文件）中，因此在下一次编译或 IIS 重新启动后，执行将中断。清除影子缓存将允许一次成功执行。

奇怪的是，我无法在调试输出的任何地方找到任何暗示 Lucene.NET 版本过时的引用，无论是目录路径还是版本号。通过比较 Lucene.NET 的影子复制版本和我打算使用的版本的文件大小发现了这个问题。他们关闭了，所以我搜索了 Lucene.NET.dll 并在 Umbraco 树中找到了与 Examine 捆绑的那个（在 \App_Plugins\Examine 下）

快速的解决方案是简单地压缩检查插件，这样 Umbraco 就不会看到它。这让我没有检查插件，但无论如何我都没有使用它。

*正确*的解决方案可能是告诉应用程序它应该忽略以前版本的 Lucene.NET，但到目前为止我还没有运气。这是我添加到 web.config 中的内容：

```
<dependentAssembly>
    <assemblyIdentity name="Lucene.Net" publicKeyToken="85089178b9ac3181" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-2.9.4.1" newVersion="2.9.4.1" />
</dependentAssembly> 
```

这似乎没有任何效果，过时的版本仍然在影子缓存中结束。我把这个问题移到了这里：[我如何让 Umbraco 5 忽略捆绑的（使用检查）Lucene.NET](https://stackoverflow.com/questions/10332625/)

感谢您的帮助和建议 - 它为我指明了正确的方向！:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T12:43:58.603

这通常意味着您在 GAC 中拥有不同版本的文件，而您的 bin 中的文件是另一个版本。所以你的应用程序指向一个版本，它正在寻找另一个版本。它变得越来越混乱。您要做的是卸载 Lucene.net。卸载后，查看 c:\windows\assembly 文件夹并确保其中没有 Lucene 文件。如果有，请右键单击并卸载。然后你可以再次安装。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T12:55:40.877

这`manifest definition does not match`意味着大会的决议存在问题。 [看到这个问题](https://stackoverflow.com/a/215054/151445)

**[编辑]**

程序集从 GAC 加载，然后是应用程序中的 lib/bin 目录，然后`<HintPath>`是项目中指定的目录。检查您是否有

`Specific Version = True`和`Copy Local = True`

在引用的属性窗口中。

应用程序中私有路径（lib/bin 目录）中的程序集是唯一会被卷影复制的程序集。可能 Contrib.Regex 正在被影子复制，而 Lucene.NET 核心没有。

**[/编辑]**

您正在擦除的目录`ASP.NET Temporary Files`是 shadow-copy 目录。复制此程序集的方式可能存在问题，这*可能*是您的域帐户的权限。您可以通过更改 shadowcopy 目录或完全关闭 shadowcopying 来测试此理论，如下[所述](https://stackoverflow.com/a/4394472/151445)：

> [您可以按照https://stackoverflow.com/a/2847495/151445](https://stackoverflow.com/a/2847495/151445)中的说明在 Application_Start 中更改此目录
> 
> 您可以在 web.config 中关闭卷影复制：
> 
> `<hostingEnvironment shadowCopyBinAssemblies="false" />`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T12:53:46.043

您可以使用[Fusion Log Viewer](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.71%29.aspx)来诊断此问题。它为您提供了加载失败的类型的完整详细信息，类似于您在此处报告的类型。希望这可以帮助。

# ios - 如何使用 SSML 减慢文本到语音的速度 - 语音声音失真/扭曲/可怕

> ID：10297963
> 
> 赞同：0
> 
> 时间：2012-04-24T12:37:24.587
> 
> 标签：ios, text-to-speech, voice, slowdown, ssml

我正在使用适用于 iPhone 的**nuance dragon mobile sdk**，用于使用文本到语音。
阅读的文本有点快，我想让它变慢，这样用户就可以**学习**单词。我的目标是放慢文本的速度。这与 SSML 和韵律标签配合得很好，请参阅以下代码：

```
<prosody rate="slow">This is the text which is spoken slow,
but the voice sounds distorted/warped/ghastly</prosody> 
```

声音听起来**扭曲、扭曲和可怕**。
你明白我的意思吗？
我该怎么做才能获得**清晰的声音**但说话**缓慢的文字**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:05:03.487

取自这里：[http ://www.w3.org/TR/speech-synthesis/#S3.2.4](http://www.w3.org/TR/speech-synthesis/#S3.2.4)

```
rate: a change in the speaking rate for the contained text. Legal values are: 
a relative change or "x-slow", "slow", "medium", "fast", "x-fast", or "default". 
Labels "x-slow" through "x-fast" represent a sequence of monotonically non-decreasing
speaking rates. When a number is used to specify a relative change it acts as a 
multiplier of the default rate. For example, a value of 1 means no change in speaking 
rate, a value of 2 means a speaking rate twice the default rate, and a value of 0.5 
means a speaking rate of half the default rate. The default rate for a voice depends on 
the language and dialect and on the personality of the voice. The default rate for a 
voice should be such that it is experienced as a normal speaking rate for the voice when 
reading aloud text. Since voices are processor-specific, the default rate will be as 
well. 
```

# javascript - 检查参数

> ID：10297965
> 
> 赞同：1
> 
> 时间：2012-04-24T12:37:34.420
> 
> 标签：javascript, arguments

这两种检查参数的方法有什么区别？

```
function foo(a, b) {
    this.a=a;
    this.b=b;
} 
```

使用：

```
if (arguments.length === 1) {} 
```

或者

```
if (this.b !== undefined) {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:00:06.537

如果你想检查强制参数，我将使用`arguments.length`作为第一步。如果要检查可选参数，通常模式是：

```
function foo(a,b){
    this.a = a || "foo";
    // etc
} 
```

请注意，这仅在参数不能是“假”值（因此，空字符串、零、null、未定义、假、NaN）时才有效。例如，如果您传递一个空字符串作为`a`参数，您将拥有 foo. 如果您只想将`undefined`参数视为可选参数的值，那么您必须执行以下操作：

```
function foo(a){
    this.a = a === undefined ? "foo" : a;
    // etc
} 
```

如果你想同时考虑 null 和 undefined 以及可选参数，你可以有：

```
function foo(a){
    this.a = a == undefined ? "foo" : a;
    // etc
} 
```

当然，你也可以使用操作符`typeof`。例如，您希望它`a`只能是一个字符串：

```
function foo(a) {
    this.a = typeof a === "string" ? a : "";
    // etc
} 
```

您也可以强制`a`始终是一个字符串，在最坏的情况下将是给定的非字符串值的字符串版本（也未定义）：

```
function foo(a) {
    this.a = String(a);
    // etc
} 
```

更复杂的情况有一些实用功能可以为您完成所有这些检查，您可以在其中说出所需的参数、可选参数、默认值等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:39:43.623

Check in what terms? Can the function proceed with a default value/bahavior, or should it stop if something was missed?

Commonly you an default the behavior, but that depends on the purpose/use of the function:

```
function foo(a,b){
  a = a || {};
  b = b || 5;
  // continue
} 
```

If you're looking for something absent, you can check `undefined` and halt:

```
function foo(a){
  if (a === undefined){
    return false;
  }
} 
```

In short, it's entirely up to you and how you want a function to proceed given an absent or incorrectly assigned variable. Another for instance:

```
function bar(b){
  if (typeof b !== 'function'){
    b = function(){};
  }
  // continue on...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:38:50.410

`b!==undefined`很可能是你想要的

如果您执行 foo() 或 f(1,2,3)，第一个将失败

# linux-kernel - Arch Linux 上的 systemd

> ID：10297969
> 
> 赞同：0
> 
> 时间：2012-04-24T12:37:53.860
> 
> 标签：linux-kernel, init, archlinux

所以我正在尝试`systemd`在 Arch Linux 机器上使用 。

阅读文档，我看到 - [https://wiki.archlinux.org/index.php/Systemd#Installation](https://wiki.archlinux.org/index.php/Systemd#Installation)

```
add init=/bin/systemd to your kernel cmdline in your bootloader 
```

这到底是什么意思？

我对 linux 并不完全陌生，但我在理解如何完成这项工作时遇到了一些麻烦。非常感谢任何详细说明！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T12:48:40.933

我没有arch linux，但我认为你应该编辑你的/boot/grub/menu.lst，你会发现一行类似于以下行：

```
kernel /vmlinuz-linux root=/dev/sda3 ro 3 
```

只需将 init=/bin/systemd 附加到该行中的参数，在此示例中它将变为：

```
kernel /vmlinuz-linux root=/dev/sda3 init=/bin/systemd ro 3 
```

重启。

# python - 使用带有 argparse 的自定义类型时的正常参数错误

> ID：10297973
> 
> 赞同：2
> 
> 时间：2012-04-24T12:38:01.060
> 
> 标签：python, argparse

我需要根据给定的字符串创建自定义对象的实例（下例中的 Bar）。如果我**不**将类型更改为`Bar`并运行以下代码：

```
import argparse

VALID_BAR_NAMES = ['alfa', 'beta', 'gamma', 'delta']

class Bar:

    def __init__(self, name):
        if not name in VALID_BAR_NAMES:
            raise RuntimeError('Bar can not be {n}, '
                               'it must be one of {m}'.format(
                                    n=name, m=', '.join(VALID_BAR_NAMES)))
        self.name = name

if __name__ == '__main__':
    parser = argparse.ArgumentParser()

    parser.add_argument('foo', help='Specify the foo!')

    parser.add_argument('-b', '--bar', nargs='*',
                        choices=VALID_BAR_NAMES,
                        type=str,  # SELECTED TYPE
                        help=('Specify one or many valid bar(s)'))
    parsed_arguments = parser.parse_args() 
```

将无效参数传递给时，我得到了这个相当不错的`hello`输出`-b`：

```
usage: Example.py [-h]
                  [-b [{alfa,beta,gamma,delta} [{alfa,beta,gamma,delta} ...]]]
                  foo
Example.py: error: argument -b/--bar: invalid choice: 'hello' (choose from 'alfa', 'beta', 'gamma', 'delta') 
```

但是，如果我更改`type=str`为`type=Bar`并再次运行该示例，我会得到以下输出：

```
Traceback (most recent call last):
  File "C:\PyTest\Example.py", line 25, in <module>
    parsed_arguments = parser.parse_args()
  File "C:\Python27\lib\argparse.py", line 1688, in parse_args
    args, argv = self.parse_known_args(args, namespace)
  File "C:\Python27\lib\argparse.py", line 1720, in parse_known_args
    namespace, args = self._parse_known_args(args, namespace)
  File "C:\Python27\lib\argparse.py", line 1926, in _parse_known_args
    start_index = consume_optional(start_index)
  File "C:\Python27\lib\argparse.py", line 1866, in consume_optional
    take_action(action, args, option_string)
  File "C:\Python27\lib\argparse.py", line 1778, in take_action
    argument_values = self._get_values(action, argument_strings)
  File "C:\Python27\lib\argparse.py", line 2218, in _get_values
    value = [self._get_value(action, v) for v in arg_strings]
  File "C:\Python27\lib\argparse.py", line 2233, in _get_value
    result = type_func(arg_string)
  File "C:\PyTest\Example.py", line 12, in __init__
    n=name, m=', '.join(VALID_BAR_NAMES)))
RuntimeError: Bar can not be hello, it must be one of alfa, beta, gamma, delta 
```

这看起来很糟糕。我知道这是由于在检查可用选项*之前发生了类型转换。*处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:11:14.657

您需要创建一个自定义操作（未经测试）：

```
class Bar: 
    ...

class BarAction(argparse.Action):
    def __call__(self,parser,namespace,values,option_string=None):
        try:  #Catch the runtime error if it occures.
           l=[Bar(v) for v in values] #Create Bars, raise RuntimeError if bad arg passed.
        except RuntimeError as E:
           #Optional:  Print some other error here.  for example: `print E; exit(1)`  
           parser.error()

        setattr(namespace,self.dest,l) #add the list to the namespace

...
parser.add_argument('-b', '--bar', nargs='*',
                    choices=VALID_BAR_NAMES,
                    action=BarAction,  # SELECTED TYPE -- The action does all the type conversion instead of the type keyword.
                    help=('Specify one or many valid bar(s)'))

... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:40:23.477

将参数保留为字符串，直到解析完成。解析完成后，首先将它们转换为域对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T10:38:02.913

不知道它是否有帮助，但我将 argparse.FileType 作为参考：

```
class Bar:
    def __call__(self, strting):
        if not name in VALID_BAR_NAMES:
            raise argparse.ArgumentError(None,'Bar can not be {n}, '
                               'it must be one of {m}'.format(
                                    n=name, m=', '.join(VALID_BAR_NAMES)))
        self.name = string

    def __init__(self):
        pass

    def __repr__(self):
        return name

parser.add_argument('-b', '--bar', nargs='*',
                    choices=VALID_BAR_NAMES,
                    type=Bar(),  # SELECTED TYPE
                    help=('Specify one or many valid bar(s)')) 
```

# jquery - jquery-datepicker 问题格式化日期

> ID：10297979
> 
> 赞同：4
> 
> 时间：2012-04-24T12:38:25.983
> 
> 标签：jquery, jquery-ui-datepicker

我在 jquery 中有 2 个日期选择器，我将一天添加到一个选择器的日期并将其分配给另一个日期选择器，如下所示：

```
 /*assign date pickers*/
        $("#MainContent_txtActualShipDate").datepicker({
            dateFormat: 'mm/dd-yyyy',
            changeMonth: true,
            changeYear: true,
            showOtherMonths: true,
            selectOtherMonths: true
        });

        $("#MainContent_txtExpectedShipDate").datepicker({
            changeMonth: true,
            changeYear: true,
            showOtherMonths: true,
            selectOtherMonths: true,
            onSelect: function (selectedDate) {
                var date = $(this).datepicker('getDate');

                if (date) {
                    date.setDate(date.getDate() + 1);
                    $("#MainContent_txtActualShipDate").val(date);
                }

            }
        }); 
```

请注意，该`onSelect`函数添加了一个日期并将其分配给，`#MainContent_txtActualShipDate`但它获得的值是“TUE APR 24 2012 00:00:00”。我希望它只是 '04/24/2012' 所以 mm/dd/yyyy。我阅读了 jquery ui 文档并在 stackoverflow 上查找了一些示例，但没有一个有效。有没有人可以查看此代码并进行编辑以获得我想要的格式？

# 编辑

这是我将其更改为：

```
 $("#MainContent_txtExpectedShipDate").datepicker({
            dateFormat: 'mm/dd-yyyy',
            changeMonth: true,
            changeYear: true,
            showOtherMonths: true,
            selectOtherMonths: true,
            onSelect: function (selectedDate) {
                var date = $(this).datepicker('getDate');

                if (date) {
                    date.setDate(date.getDate() + 1);
                    var formattedDate = $.datepicker.formatDate('mm/dd-yyyy', date);
                    $("#MainContent_txtActualShipDate").val(formattedDate); 

//                    $("#MainContent_txtActualShipDate").val(date);
                }

            }
        }); 
```

但它显示了两次 04/12/20122012 的年份。

# 回答

以下是将来对其他人有用的方法：

```
/*assign date pickers*/
        $("#MainContent_txtActualShipDate").datepicker({
            dateFormat: 'mm/dd/yy',
            changeMonth: true,
            changeYear: true,
            showOtherMonths: true,
            selectOtherMonths: true
        });

        $("#MainContent_txtExpectedShipDate").datepicker({
            dateFormat: 'mm/dd/yy',
            changeMonth: true,
            changeYear: true,
            showOtherMonths: true,
            selectOtherMonths: true,
            onSelect: function (selectedDate) {
                var date = $(this).datepicker('getDate');

                if (date) {
                    date.setDate(date.getDate() + 1);
                    var formattedDate = $.datepicker.formatDate('mm/dd/yy', date);
                    $("#MainContent_txtActualShipDate").val(formattedDate); 
                }

            }
        });
        /*end assign date pickers*/ 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:41:45.140

使用[`formatDate()`](http://docs.jquery.com/UI/Datepicker/formatDate)功能：

```
var formattedDate = $.datepicker.formatDate('mm/dd/yy', date);
$("#MainContent_txtActualShipDate").val(formattedDate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:42:57.070

尝试设置日期

`$('#MainContent_txtActualShipDate').datepicker("setDate", date);`

如果这不起作用，

`$("#MainContent_txtActualShipDate").val(date.getMonth()+"/"+date.getDate()+"/"+date.getFullYear());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:48:23.227

你错过了 dateFormat 试试这个：

```
/*assign date pickers*/
    $("#MainContent_txtActualShipDate").datepicker({
        dateFormat: 'mm/dd/yy',
        changeMonth: true,
        changeYear: true,
        showOtherMonths: true,
        selectOtherMonths: true
    });

    $("#MainContent_txtExpectedShipDate").datepicker({
        dateFormat: 'mm/dd/yy',
        changeMonth: true,
        changeYear: true,
        showOtherMonths: true,
        selectOtherMonths: true,
        onSelect: function (selectedDate) {
            var date = $(this).datepicker('getDate');

            if (date) {
                date.setDate(date.getDate() + 1);
                var formattedDate = $.datepicker.formatDate('mm/dd/yy', date);
                $("#MainContent_txtActualShipDate").val(formattedDate); 
            }

        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T13:23:19.973

你有错误的日期格式，它需要是 'dd/mm/yy'

我也倾向于只向需要 datepicker 的任何字段添加一个类。因此，你可以做这样的事情......

```
$(".DatePick").datepicker({ dateFormat: 'dd/mm/yy', gotoCurrent: true }); 
```

无需多次分配。

# jsp - 将 BufferedImage 转换为 img 的问题

> ID：10297983
> 
> 赞同：3
> 
> 时间：2012-04-24T12:38:38.240
> 
> 标签：jsp, file-upload, bufferedimage

我正在编写代码，其中我正在从数据库中读取 blob 图像，并希望在我的 jsp 页面上显示该图像。

通过谷歌我找到了可以将字节[]转换为缓冲图像的解决方案

但是如何在 jsp 页面上使用缓冲图像...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:02:37.103

我建议写一个servlet`ImageProvider`

```
<servlet>
    <servlet-name>showMyImage</servlet-name>
    <servlet-class>com.photo.gallery.ImageProvider</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>showMyImage</servlet-name>
    <url-pattern>/showMyImage</url-pattern>
</servlet-mapping> 
```

现在在 JSP 页面中使用它，例如：

```
<img src="showMyImage?imageFimeName=flowers.jpg" / > 
```

这里是`doGet`执行`ImageProvider`

```
public void doGet(HttpServletRequest request, HttpServletResponse response) {
    /*Now you have the byte[] array by some way...
     * Lets call it imageBytes[] */
    response.setContentType("image/jpeg");
    response.setContentLength(imageBytes.length);
    response.getOutputStream().write(imageBytes);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T12:52:57.680

最简单的方法是使用 servlet 或不同的 jsp 发送您的图像。

如果您使用 JSP，请注意仅发送不带任何 html（或空行）的二进制文件。像这样的例子：

```
response.setContentType("image/png");
OutputStream sos = response.getOutputStream();
BufferedImage myImage = stuff.getImage(request.getParameter("id"));
ImageIO.write(myImage, "png", sos);
sos.flush();
sos.close(); 
```

（这里使用 javax.imageio.ImageIO）

然后你可以像这样简单地使用图像：

```
<img src="myservlet.jsp?id=somestuff"> 
```

# android - 从自定义对话框返回值到片段

> ID：10297984
> 
> 赞同：0
> 
> 时间：2012-04-24T12:38:46.727
> 
> 标签：android, dialog, android-fragments

从一个片段我调用一个对话框

```
private void showDateDialog(){

         FragmentTransaction ft = getFragmentManager().beginTransaction();
            DialogFragment newFragment = new DatePickerDialogFragment((Fragment)this,localCalendar);
            newFragment.show(ft, "dialog");
    } 
```

然后在自定义对话框中我调用 timesetlistener

```
@Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
         LayoutInflater inflater = LayoutInflater.from(getActivity());
            final View v = inflater.inflate(R.layout.time_dialog, null);

            timePicker=(TimePicker)v.findViewById(R.id.timePicker1);
            timePicker.setIs24HourView(true);
            if (data!=null) {
                timePicker.setCurrentHour(data.get(Calendar.HOUR_OF_DAY));
                timePicker.setCurrentMinute(data.get(Calendar.MINUTE));
          }
            timePicker.setScaleX(2);
            timePicker.setScaleY(2);

            return new TimePickerDialog.Builder(getActivity())
            .setTitle(R.string.timeDialog1)
            .setView(v)

            .setCancelable(true)
            .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    //validation code
                    OnTimeSetListener otsl=(OnTimeSetListener)mFragment;
                    otsl.onTimeSet(timePicker, timePicker.getCurrentHour(), timePicker.getCurrentMinute()); 
                }
            })
            .setNegativeButton(R.string.annulla, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                    }
                }).create();
    } 
```

在片段中我实现了一个 OnTimeSetListener 来获取值

```
 public void onTimeSet(TimePicker view, int hour, int minute) {
            localCalendar.set(Calendar.HOUR_OF_DAY, hour);
            localCalendar.set(Calendar.MINUTE, minute);
            updateTime(hour,minute);
    } 
```

这工作正常。但我希望另一个自定义对话框返回一个字符串，但我不知道要实现哪个监听器。我尝试了“onDismiss”，但无法传递参数，我尝试了 OnValueChangeListener，但由于参数有 2 个整数（我需要一个字符串！）。这是正确的方法吗？我的意思是，使用听众。

好消息是，从任何实现 onDateChange 的片段中，我都可以启动对话框并检索值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:15:47.507

好的，我自己回答：我不知道该怎么做，所以我使用了这个解决方案：我为每个解析调用片段并在其中调用方法的对话框构建了一个不同的类。这不是最好的解决方案，但它正在工作

# android - 在jpg图像android上绘制文本

> ID：10297986
> 
> 赞同：3
> 
> 时间：2012-04-24T12:38:57.167
> 
> 标签：android, jpeg

我在里面有一个 jpg 图像作为字节数组。我如何将此字节数组转储到 jpg 并在其画布上写入，然后将其保存在 sd 卡上？

欢迎任何想法。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:46:21.400

使用[`BitmapFactory.decodeByteArray()`](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeByteArray%28byte%5b%5d,%20int,%20int%29)获取一个`Bitmap`，然后`Canvas`使用该位图创建一个，并在那里绘制文本。最后使用以下方法保存[`Bitmap.compress()`](http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)：

```
Bitmap bmp = BitmapFactory.decodeByteArray(myArray, 0, myArray.length).copy(Bitmap.Config.RGBA_8888, true); //myArray is the byteArray containing the image. Use copy() to create a mutable bitmap. Feel free to change the config-type. Consider doing this in two steps so you can recycle() the immutable bitmap.
Canvas canvas = new Canvas(bmp);
canvas.drawText("Hello Image", xposition, yposition, textpaint); //x/yposition is where the text will be drawn. textpaint is the Paint object to draw with.

OutputStream os = new FileOutputStream(dstfile); //dstfile is a File-object that you want to save to. You probably need to add some exception-handling here.
bmp.compress(CompressFormat.JPG, 100, os); //Output as JPG with maximum quality.
os.flush();
os.close();//Don't forget to close the stream. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T12:45:05.817

1.  [使用BitmapFactory](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeByteArray%28byte%5B%5D,%20int,%20int,%20android.graphics.BitmapFactory.Options%29)解码字节数组
    1.  创建[画布](http://developer.android.com/reference/android/graphics/Canvas.html#Canvas%28android.graphics.Bitmap%29)
    2.  在上面画[文字](http://developer.android.com/reference/android/graphics/Canvas.html#drawText%28java.lang.String,%20float,%20float,%20android.graphics.Paint%29)
    3.  [将位图保存](http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)到[SD 存储](http://developer.android.com/guide/topics/data/data-storage.html)

希望这可以帮助。

# xcode4.3 - Xcode 卡住编译

> ID：10297988
> 
> 赞同：1
> 
> 时间：2012-04-24T12:39:07.947
> 
> 标签：xcode4.3

我有一个 Xcode 项目在编译一个源文件时卡住了，我不知道如何解决这个问题或如何找出它正在编译的文件。

我有 Xcode 4.3.2

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T12:46:16.537

造成这种情况的一个原因可能是循环#include ...

这是一个初学者提示，但我认为值得一提，以防万一可以帮助您或其他人。

如果您使用#include 包含头文件，请设置一些东西来防止循环头文件，例如

```
#ifndef MY_FILE_INCLUDED
#define MY_FILE_INCLUDED
    <your header file>
#endif 
```

如果您使用#import，编译器会负责删除循环头文件，每个头文件只包含一次。

此外，您可以尝试注释部分代码以使您的文件尽可能小。您可以删除方法实现和大部分代码，然后逐个添加它，看看它是否会使问题更加明显。

而要找到它正在编译的文件，你可以看到编译日志，右边最后一个图标，它看起来像一个气泡，里面有线条。单击处于活动状态的编译日志（旁边有一个微调器），您应该会看到哪些文件已经编译，哪些正在编译。

# c# - Visual Studio 11 和 Metro 应用程序 - 蓝屏

> ID：10297990
> 
> 赞同：0
> 
> 时间：2012-04-24T12:39:14.047
> 
> 标签：c#, windows-8, microsoft-metro, visual-studio-2012

我已经在 Consumer Preview 上安装了适用于 Windows 8 的 Visual Studio Express 11。我正在尝试开发 Metro 应用程序，但是当我调试应用程序时，我只有一个蓝屏......如果我添加控件，即使在 VS11 中它们也不会出现，它们似乎是不可见的

有人遇到过同样的问题吗？

编辑：在 C# 中创建的项目正在发生这种情况，我已经在 J​​avascript 中进行了测试，并且运行良好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:05:43.063

我解决了我的问题。对于那些可能有同样问题的人来说，这是因为我安装了 VirtualBox Guest Additions（为了与主机共享文件夹）。我刚刚卸载了它，现在它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T00:03:02.257

在 VirtualBox 中的 Win8 以及具有各种 NVidia 显卡的物理机上运行时，我遇到了这个问题。这似乎与某些驱动程序有关。在其他机器上，相同的二进制文件可以完美运行。

不幸的是，我只能建议尝试不同的硬件或查看是否有更新的图形驱动程序可以尝试。

作为最后的手段，您可以尝试使用模拟器运行应用程序，看看是否有帮助。模拟器实际上是一个远程桌面连接，但它可能会在您的图形驱动程序中触发不同的行为。

# wpf - Tree's item is a grid and grid's item row need to BringIntoView

> ID：10297999
> 
> 赞同：1
> 
> 时间：2012-04-24T12:40:07.083
> 
> 标签：wpf

Tree have a collection of grid and when new item added in grid need to bring into view. I use bring into view but i only bring grid in view and if grid is too big than it does not bring that new row into view. Please suggest.