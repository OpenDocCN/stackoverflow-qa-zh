# StackOverflow 问答 10176000-10176999

# c# - 程序集绑定和重定向

> ID：10176001
> 
> 赞同：7
> 
> 时间：2012-04-16T14:25:17.310
> 
> 标签：c#, dll, redirect, assemblies

我有一个引用 DLL 的 EXE——在本例中，我将其命名为*TestDLL.dll*。
EXE 用 C# 编写，DLL 用 VB .Net 编写。

我创建了 DLL 的演示程序集版本 - 例如 - TestDLL.dll 版本 1.0.0.0。
我想参考演示版 DLL (1.0.0.0) 来编译 EXE。之后 - 我希望 EXE 使用相同的 DLL，但我将放入 GAC 中的任何版本。
为此，我将DLL 引用的***“复制本地”属性设置为******FALSE***。

例如，我的目标是 - 编译后，我将使用程序集版本 2.1.6.0 放入 GAC TestDLL.dll，EXE 将使用程序集重定向绑定找到它。为此，我使用了一个配置文件。我使用此链接创建它： http:
[//msdn.microsoft.com/en-us/library/7wd6ex19 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/7wd6ex19(v=vs.71).aspx)

所以我的配置文件看起来像这样：

```
<configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
       <dependentAssembly>
         <assemblyIdentity name="myAssembly"
                           publicKeyToken="32ab4ba45e0a69a1"
                           culture="en-us" />
         <!-- Assembly versions can be redirected in application, publisher policy, or machine configuration files. -->
         <bindingRedirect oldVersion="1.0.0.0"
                          newVersion="2.1.6.0"/>
       </dependentAssembly>
      </assemblyBinding>
   </runtime>
</configuration> 
```

问题是，在完成所有这些之后，我运行了 EXE，当访问 dll 时，我得到了著名的错误： *System.IO.FileNotFoundException: 无法加载文件或程序集 'TestDLL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=9d8162944bd6fdc7' 或其依赖项之一。该系统找不到指定的文件。文件名：'TestDLL，版本=1.0.0.0，文化=中性，PublicKeyToken=9d8162944bd6fdc7'*

意思是，EXE 找不到我引用的**原始 DLL 。**我知道我可以“引用” GAC 或使用反射，但我不想——因为这个 EXE 应该只能以这种方式工作。

有谁知道问题出在哪里以及如何解决？
谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T06:45:25.430

确保您设置了正确的`publicKeyToken`. 在您展示的代码中，您使用`publicKeyToken="32ab4ba45e0a69a1"`的是来自 MSDN 链接的公钥令牌。这显然**不是**您程序集的公钥令牌。为此，您需要使用相同的密钥对两个程序集（1.0.0.0 和 2.1.6.0）进行签名。要提取公钥令牌，您可以使用[sn.exe](http://msdn.microsoft.com/en-us/library/k5b5tt23.aspx)工具或查看您获得的异常堆栈跟踪（它告诉您`publicKeyToken="9d8162944bd6fdc7"`）：

```
sn.exe -Tp myassembly.dll 
```

但是，如果编译可执行文件的程序集没有使用相同的密钥签名，这将不起作用。

我还看到你已经设置了`culture="en-us"`但是你的程序集使用这种文化吗？你也可以试试`culture="Neutral"`。

最后确保您已将正确版本的程序集部署到 GAC 中。

# xpages - Metro UI 作为 XPages 主题

> ID：10176010
> 
> 赞同：0
> 
> 时间：2012-04-16T14:26:06.960
> 
> 标签：xpages

我想展示带有 Metro 风格 UI 的 XP 应用程序。

我想到了三种独特的风格：

*   1) 应用程序启动器（来自 LN 客户端的导航器）显示盒装“链接”，即 Metro 的常见图像：[http](http://en.wikipedia.org/wiki/File:Windows_8_Consumer_Preview_Start_Screen.png) ://en.wikipedia.org/wiki/File:Windows_8_Consumer_Preview_Start_Screen.png 。*   2) 列表（又名视图）- 代表视图中文档的滚动条：[http ://www.brianbondy.com/static/img/blogpost_135/screenshot-filepicker.jpg](http://www.brianbondy.com/static/img/blogpost_135/screenshot-filepicker.jpg) [http://www.purplesquirrels.com.au/?p =940](http://www.purplesquirrels.com.au/?p=940)*   3) 形式 - 抱歉，metro 主题的图像在这种用例中并不常见。

    选项：

    *   等待 Dojo 框架包含 Metro 风格的移动组件（Dojo 站点上没有此计划的迹象）。*   等待 IBM 在 Extlib 移动主题上包含 Metro（可能不会发生）。*   制作自己的主题定义和/或控件（大量工作......）*   算了，这只是浪费时间。

    你们有没有想过为 XPages 制作 metro.theme？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:40:02.533

如果我在你的位置，我会尝试自己创建它。它不是那么困难。它实际上是一堆盒子；）这完全可以使用 html/css （因此使用 xpages ）。您唯一需要做的就是在用户点击一个框后该做什么。我没有看到自己创建它的问题......

# mysql - 去除双峰

> ID：10176014
> 
> 赞同：0
> 
> 时间：2012-04-16T14:26:29.677
> 
> 标签：mysql, sql

我正在尝试从 MySQL 表中删除双联（有时是三联，不幸的是！）。我的问题是唯一可用的唯一数据是主键，所以为了识别双峰，你必须考虑所有的列。

我已经设法识别出所有具有双线的记录，并将它们连同它们的双线（包括它们的主键）复制到表中`temp`。源表被调用`translation`，它有一个名为 的整数主键`TranslationID`。我该如何从这里继续前进？谢谢！

**编辑**可用的列是：

```
TranslationID
LanguageID
Translation
Etymology
Type
Source
Comments
WordID
Latest
DateCreated
AuthorID
Gender
Phonetic
NamespaceID
Index
EnforcedOwner 
```

`Latest`重复问题在于分配了列的行`1`。

**编辑#2**谢谢大家的时间！我已经通过使用[WouterH](https://stackoverflow.com/users/1300910/wouterh)的答案解决了这个问题，导致以下查询：

```
DELETE from translation USING translation, translation as translationTemp
WHERE translation.Latest = 1
AND (NOT translation.TranslationID = translationTemp.TranslationID)
AND (translation.LanguageID = translationTemp.LanguageID)
AND (translation.Translation = translationTemp.Translation)
AND (translation.Etymology = translationTemp.Etymology)
AND (translation.Type = translationTemp.Type)
AND (translation.Source = translationTemp.Source)
AND (translation.Comments = translationTemp.Comments)
AND (translation.WordID = translationTemp.WordID)
AND (translation.Latest = translationTemp.Latest)
AND (translation.AuthorID = translationTemp.AuthorID)
AND (translation.NamespaceID = translationTemp.NamespaceID) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:36:48.320

您可以在没有临时表或子查询的情况下删除重复项。删除所有具有相同数据但不同的行`TranslationID`

```
DELETE from translation USING translation, translation as translationTemp
WHERE (NOT translation.TranslationID = translationTemp.TranslationID)
AND (translation.LanguageID = translationTemp.LanguageID)
AND (translation.Translation = translationTemp.Translation)
AND (translation.Etymology = translationTemp.Etymology)
AND // compare other fields here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:39:05.743

使用当前的 SELECT 创建一个 SELECT 语句作为子选择，以便您可以返回应删除的 ID 列。然后在 DELETE FROM 语句中应用该 SELECT。

示例（伪代码）：

```
SELECT1 = SELECT ... AS temp; # the table you have right now

SELECT2 = SELECT TranslationID FROM (SELECT1) 
```

最终查询将如下所示：

```
DELETE FROM table_name WHERE TranslationID IN (SELECT2); 
```

您只需要在最终查询中插入带有子选择的 SELECT。

将来您可以将引擎更改为 InnoDB 引擎，如下所示：

```
ALTER TABLE table_name ENGINE=InnoDB; 
```

然后将`Unique`约束添加到 TranslationID 字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:38:31.423

我不会识别不唯一的行，而是尝试将有效数据复制到新表中，然后删除旧表并用这个新的、清理过的表替换它。

我可以看到两种方式：

*   在 SQL 查询中使用[`DISTINCT`](http://dev.mysql.com/doc/refman/5.6/en/distinct-optimization.html)关键字（[源](http://www.cyberciti.biz/faq/howto-removing-eliminating-duplicates-from-a-mysql-table/)）；
*   `GROUP BY`对所有列（[source](http://www.justin-cook.com/wp/2006/12/12/remove-duplicate-entries-rows-a-mysql-database-table/)）使用语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T14:35:14.493

如果除了主键之外双/三是相同的，那么您可以从 temp 中选择所有与另一个相同的记录，除了具有比另一个更大的主键；这将为您提供带有每个双联/三联的最小键的记录。然后，您可以从翻译中删除这些记录。

# android - Android：UI：使用边界

> ID：10176018
> 
> 赞同：0
> 
> 时间：2012-04-16T14:26:46.017
> 
> 标签：android, user-interface, boundary

我一直在阅读并应用此页面中的 android 设计：

[http://developer.android.com/design/index.html](http://developer.android.com/design/index.html)

我想使用以下“动画”（或任何它）：

[http://www.electronicsweekly.com/blogs/eyes-on-android-updates/2012/01/13/Android%20Design%202.jpg](http://www.electronicsweekly.com/blogs/eyes-on-android-updates/2012/01/13/Android%20Design%202.jpg)

有人可以帮我开始如何使用这些边界吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:24:30.567

我会这样做：

1.  扩展您选择的 ScrollView
2.  `setStaticTransformationsEnabled(true);`在构造函数中调用
3.  覆盖 `onTouchEvent(MotionEvent ev)`以跟踪手指的位置
4.  覆盖`getChildStaticTransformation(View child, Transformation t)`
5.  在该函数内部，使用[Camera](http://developer.android.com/reference/android/graphics/Camera.html)类创建一个 3D 变换矩阵。像围绕 x 轴旋转的东西，旋转的中心是滚动视图的中心。旋转角度应取决于子项的滚动位置和当前手指位置。

编辑：现在我想了很久，你应该做点不同的事。

*   不要覆盖`getChildStaticTransformation(View child, Transformation t)`，而是`drawChild(Canvas canvas, View child, long drawingTime)`。这允许您使用绘图缓存 API。（我的第一个链接中的示例）。这意味着首先将子项渲染为位图，从而提高绘图性能并允许您将此线性蓝色应用于视图的透明渐变

您可以[在此处](https://github.com/renard314/ListView3d)或[此处](http://developer.sonymobile.com/wp/2010/05/20/android-tutorial-making-your-own-3d-list-part-1/)查看如何使用相机的示例。 [这](https://github.com/johannilsson/android-pulltorefresh)是一个带有过度滚动反弹效果的项目。为了使过度滚动效果更酷，您应该在用户松开手指时使用动画。因为我非常喜欢新的 android 动画框架，所以我会使用[9 个旧](http://nineoldandroids.com/)的 android 。我想对于一个有经验的安卓程序员来说，正确地实现这个效果至少需要 1-2 天。

# javascript - 使用 Greasemonkey 修改 Javascript 变量

> ID：10176019
> 
> 赞同：1
> 
> 时间：2012-04-16T14:26:47.833
> 
> 标签：javascript, variables, greasemonkey

帮助，谁能帮助我如何使用greasemonkey更改javascript变量？

我已经关注了这个问题的答案： [如何使用 Greasemonkey 更改 JavaScript 变量？](https://stackoverflow.com/questions/5722075/how-can-i-change-a-javascript-variable-using-greasemonkey)

还有这个链接： [http ://webdeveloper.com/forum/showthread.php?t=166658](http://webdeveloper.com/forum/showthread.php?t=166658)

但我无法使用此脚本修改函数上的**计数器变量值：**

```
// ==UserScript==
// @name       My Fancy New Userscript
// @namespace  http://use.i.E.your.homepage/
// @version    0.1
// @description  enter something useful
// @match      https://welcome.telkomhotspot.info/telkomhs/freemax/
// @copyright  2012+, You
// ==/UserScript==

unsafeWindow.counter = 1; 
```

这是我要更改的功能：

```
function startTimer(){
var counter = 20;
var wait = 0;
var displayCounter = true;
var startCounting = false;
$("#timerTransition").html(getLoadingCounter())
.everyTime(1000,function(i){
    if(wait==0){
        if(displayCounter){
            $("#loadingCounter").fadeOut(500,function(){
                $("#timerTransition").html(getTimerContainer(counter));
                $("#timerContainer").fadeIn(500,function(){
                    startCounting = true;
                });
            });
        }
        displayCounter = false;
        if(startCounting){
            counter = counter - 1;
            $("#counter").html(counter);
            if(counter == 0) {

                if(foundCookies){
                    $("#timerTransition").stopTime().html(getAuthCookiesLogin());
                }
                else{
                    $("#timerTransition").stopTime().html(getAuthButton());
                    $("#authBtnContainer").fadeIn(0).click(function(){
                        $(this).fadeOut(0);
                        closeAds();
                        openAuthForm();
                    });
                }
            }
        }
    }
    else{
        wait = wait-1;
    }
});
} 
```

感谢您的帮助，我已经在谷歌上搜索，但我仍然无法修改变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:21:11.583

`counter`是函数内的局部变量。除非您可以修改函数以使用全局变量，否则您将无法更改其值。如果您无权访问代码，您可以尝试用`startTimer`您自己的实现替换整个函数。我无法从您的示例中看出，但您只能替换 startTimer 如果它是全局的。

# iphone - 如何使用 iPhone 应用程序从相机拍照

> ID：10176020
> 
> 赞同：0
> 
> 时间：2012-04-16T14:26:52.667
> 
> 标签：iphone

我在按下 UI 按钮时实现了拍照，但是当我按下按钮时，应用程序崩溃了。

这是源代码。

```
.h file
@interface Camera : UIViewController
                                 <UIImagePickerControllerDelegate>
{
   UIImagePickerController *mPicture;

}
@property (nonatomic, retain) UIImagePickerController *mPicture;

.m file
@implementaion Camera
@synthesize mPicture; 
    -(void)pictureButtonPushed
    {
    UIImagePickerControllerSourceType mType = UIImagePickerControllerSourceTypeCamera;
        if ([UIImagePickerController isSourceTypeAvailable:mType]) 
        {
            mPicture.sourceType = mType;
            [self presentModalViewController:mPicture animated:YES];
        }
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:09:02.057

试试这个

希望它会有所帮助:)

```
 -(IBAction)takePhoto
{
        UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];

        if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
        {
            [imagePickerController setSourceType:UIImagePickerControllerSourceTypeCamera];
        }

        // image picker needs a delegate,
        [imagePickerController setDelegate:self];

    // Place image picker on the screen
    [self presentModalViewController:imagePickerController animated:YES];
}

-(IBAction)chooseFromLibrary
{

    UIImagePickerController *imagePickerController= [[UIImagePickerController alloc]init]; 
    [imagePickerController setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];

    // image picker needs a delegate so we can respond to its messages
    [imagePickerController setDelegate:self];

    // Place image picker on the screen
    [self presentModalViewController:imagePickerController animated:YES];

}

//delegate methode will be called after picking photo either from camera or library
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{   
    [self dismissModalViewControllerAnimated:YES]; 
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    [myImageView setImage:image];    // "myImageView" name of any UImageView.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:03:02.017

这是您想要的代码

```
- (void)cameraPressed
{
    UIActionSheet *menu = [[UIActionSheet alloc]
                           initWithTitle:@"Set a Prifile Picture"
                           delegate:self
                           cancelButtonTitle:@"Cancel"
                           destructiveButtonTitle:nil
                           otherButtonTitles:@"Choose From Library",@"Take a New Photo",nil];

    [menu showInView:[self.navigationController view] ];
}

// actionsheet delegate
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{   
    if (buttonIndex == 1) {
        @try {                
            if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {

                imagePickerController = [[UIImagePickerController alloc] init];

                imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
                imagePickerController.navigationBar.barStyle = UIBarStyleBlack;                
                imagePickerController.delegate = self;
                imagePickerController.allowsEditing = NO;
                [appDelegate.objList setHidden:TRUE];
                appDelegate.strRefreshCamera = @"notupdate";
                [self presentModalViewController:imagePickerController animated:YES];
                [imagePickerController release];
            }
            else {
                [appDelegate showAlertWithTitle:@"Info" message:@"This function needs a camera which is only available on the iPhone or iPod."];
            }
        }
        @catch (NSException *e) {

        }
    }
    if (buttonIndex == 0) {
        if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum]) {
            imagePickerController = [[UIImagePickerController alloc] init];
            imagePickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
            imagePickerController.navigationBar.barStyle = UIBarStyleBlack;
            imagePickerController.delegate = self;
            imagePickerController.allowsEditing = NO;
            [appDelegate.objList setHidden:TRUE];
            appDelegate.strRefreshCamera = @"notupdate";
            [self presentModalViewController:imagePickerController animated:YES];
            [imagePickerController release];
        }
    }
}

- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{   
    //flag = TRUE;
    [self dismissModalViewControllerAnimated:YES];
    //[appDelegate showLoadingView];
    UIImage *capturedImage = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
} 
```

在您想使用的任何地方使用此图像对象。

# android - 在 ListView 上显示 2 个位置之间的距离

> ID：10176026
> 
> 赞同：0
> 
> 时间：2012-04-16T14:27:10.410
> 
> 标签：android

我有一个从 JSON 文件填充的 ListView 的 View Adapter 方法。

我想在每个列表项的 TextView 上显示的组件之一是用户位置与 ListView 上显示的每个位置之间的距离。

但是每次我运行它时应用程序都会崩溃，我知道我的代码从`//calculate the distance`.

任何人都可以帮助我分析和修复我可能出错的地方吗？

这是从 JSON 解析的经度和纬度的示例：

```
 "latitude": 52.5074779785632,
 "longitude": 13.3903813322449, 
```

这是我正在使用的方法：

```
@Override
        public View getView(int position, View convertView, ViewGroup parent) {

            if(convertView == null){
                convertView = LocationsListActivity.this.getLayoutInflater().inflate(R.layout.listitems, null, true);
            }

            VideoLocation vidLocation = videoLocations[position];
            ImageView v = (ImageView)convertView.findViewById(R.id.image);
            String url = vidLocation.documentary_thumbnail_url;
            v.setTag(url);
            loader.DisplayImage(url, ctx, v);
            TextView titleView = (TextView)convertView.findViewById(R.id.txt_title);
            String title = vidLocation.name;
            titleView.setText(title.toUpperCase());
            TextView descView = (TextView)convertView.findViewById(R.id.txt_list_desc);
            String desc = vidLocation.text;
            descView.setText(desc);

            //calculate the distance
            Location newLocation = new Location("User");
            GeoPoint geopoint = new GeoPoint(
                    (int) (newLocation.getLatitude() * 1E6), (int) (newLocation
                            .getLongitude() * 1E6));
            GeoPoint myposition = geopoint;
            Location locationA = new Location("point A");
            Location locationB = new Location("point B");
            locationA.setLatitude(geopoint.getLatitudeE6() / 1E6);
            locationA.setLongitude(geopoint.getLongitudeE6() / 1E6);

            locationB.setLatitude(vidLocation.latitude/ 1E6);
            locationB.setLongitude(vidLocation.longitude / 1E6);

            double distance = locationA.distanceTo(locationB);
            String distances = String.valueOf(distance);
            TextView distanceView = (TextView)convertView.findViewById(R.id.txt_distance);
            System.out.println(distances);
            distanceView.setText(distances+" m");

            return convertView;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:39:01.857

当您的应用程序崩溃并且您在 StackOverflow 上询问它时，您应该始终包含崩溃详细信息的 logcat 输出。答案几乎总是就在那里，而且很容易挑选出来。

您在这里所做的是错误地使用了 Location 对象。如果您查看您正在使用的构造函数的文档，您会发现这只是返回一个默认位置对象并且不包含设备的实际位置。此外，您传递给 this 的字符串不是任意的，它是与此 Location 对象关联的位置提供程序的名称。

要获取用户的最后一个已知位置，请获取 LocationManager 的实例并调用 getLastKnownLocation。这也需要一个与应该使用的位置提供程序相对应的字符串。

阅读有关获取用户位置的文档并查看 Criteria 对象和 LocationManager.getBestProvider 方法。这些是获得最佳位置且不会在此过程中崩溃的最安全方法。例如，如果您通过 GPS 提供程序字符串请求位置并且设备没有 GPS，或者用户关闭了 GPS，您的代码将崩溃（我相信在这种情况下您会从 getLastKnownLocation 获得一个空对象）。还要确保向清单添加适当的权限。

[http://developer.android.com/guide/topics/location/obtaining-user-location.html](http://developer.android.com/guide/topics/location/obtaining-user-location.html)

[http://developer.android.com/reference/android/location/Criteria.html](http://developer.android.com/reference/android/location/Criteria.html)

[http://developer.android.com/reference/android/location/LocationManager.html](http://developer.android.com/reference/android/location/LocationManager.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:10:30.043

```
Location newLocation = new Location("User"); 
```

“用户”不是有效的 LocationProvider。它至少应该是其中之一

```
LocationManager.getAllProviders(); 
```

（通常是“gps”或“网络”）

此外，在您的代码中， newLocation 并未真正初始化。它的值很可能是空的。您应该通过以下方式获取用户位置，例如：

```
LocationManager.getLastKnownLocation(null); 
```

# marklogic - 从 MarkLogic 中的 xquery 模块调用 Shell 脚本

> ID：10176028
> 
> 赞同：2
> 
> 时间：2012-04-16T14:27:18.780
> 
> 标签：marklogic

是否有任何直接的方法可以从 MarkLogic 中的 xquery 执行 shell 脚本或 linux 命令？Marklogic Web 服务器是否支持 CGI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:52:51.133

今天，您无法从 MarkLogic 执行 shell 脚本或文件系统可执行文件，MarkLogic 也不支持 CGI。实现这种集成的最简单途径是建立一个您熟悉的应用服务器（Java/Tomcat、ASP、PHP 等）的副本，并通过 http 在 MarkLogic 和该服务之间进行通信。

有一个开放的增强请求来支持执行文件系统可执行文件。

# java - 检查实体是否存在于谷歌应用引擎数据存储中。

> ID：10176033
> 
> 赞同：26
> 
> 时间：2012-04-16T14:27:51.077
> 
> 标签：java, google-app-engine, entity, google-cloud-datastore

检查 google-app-engine 数据存储中是否存在实体的最佳/最快方法是什么？现在我正在尝试通过键获取实体并检查 get() 是否返回错误。

我不知道在数据存储中获取实体的过程。有没有更快的方法只做这个检查？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T18:51:37.107

您提出的确实是了解您的实体是否存在的最快方法。唯一让你慢下来的是获取和反序列化你的实体所花费的时间。如果您的实体很大，这可能会减慢您的速度。

如果此操作（检查是否存在）是您的主要瓶颈并且您拥有大型实体，您可能希望通过使用两个实体来滚动您自己的检查系统 - 首先您将拥有包含数据的现有实体，以及第二个实体要么存储对真实实体的引用，要么存储一个空实体，其中键只是您可以计算的原始实体键的变体。您可以使用第二个实体快速检查是否存在，然后仅在需要数据时才获取第一个实体。

我认为更好的方法是设计你的密钥，这样你就知道不会有重复，或者你的操作是幂等的，这样即使旧实体被覆盖，也没关系。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T14:36:33.240

`com.google.appengine.api`已弃用，取而代之的是 App Engine GCS 客户端。

您是否考虑过使用查询？猜测和检查不是一种可扩展的方式来找出数据存储中存在的实体。可以创建查询以从数据存储中检索满足指定条件集的实体：

[https://developers.google.com/appengine/docs/java/datastore/queries](https://developers.google.com/appengine/docs/java/datastore/queries)

编辑：

仅键查询呢？仅键查询比返回完整实体的查询运行得更快。要仅返回键，请使用 Query.setKeysOnly() 方法。

```
new Query("Kind").addFilter(Entity.KEY_RESERVED_PROPERTY, FilterOperator.EQUAL, key).setKeysOnly(); 
```

来源：[1]：[http ://groups.google.com/group/google-appengine-java/browse_thread/thread/b1d1bb69f0635d46/0e2ba938fad3a543?pli=1](http://groups.google.com/group/google-appengine-java/browse_thread/thread/b1d1bb69f0635d46/0e2ba938fad3a543?pli=1)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T14:53:12.187

您可以使用`List<Key>`仅包含 one的 a 进行获取`Key`，[该方法](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#get%28java.lang.Iterable%29)返回 a`Map<Key, Entity>`您可以检查它是否包含实际值或`null`，例如：

```
Entity e = datastoreService.get(Arrays.asList(key)).get(key); 
```

一般来说，虽然我认为将它包装`get()`在一个 try/catch 中会更容易，`null`如果它`EntityNotFoundException`被捕获则返回。

# c# - C# 和水晶报告

> ID：10176035
> 
> 赞同：0
> 
> 时间：2012-04-16T14:27:53.747
> 
> 标签：c#, crystal-reports

我用 Crystal Reports 编写了一个 C# 项目。我正在构建一个安装项目，但出现错误：

> 找不到间接引用的程序集“BusinessObjects.Licensing.KeycodeDecoder, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304”。分析不需要此组件，但分析结果可能不完整。此程序集被以下对象引用：C:\Program Files (x86)\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Common\SAP BusinessObjects Enterprise XI 4.0\win32_x86\dotnet\CrystalDecisions.CrystalReports.Engine.dll

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:15:28.053

您应该为您在 C# 项目中使用的 Crystal Reports 版本使用 Crystal Reports 合并模块。不要“自动检测”或任何其他手动或近似添加所需的文件。您**绝对**应该从这里找到并添加合并模块：

[http://resources.businessobjects.com/support/additional_downloads/runtime.asp](http://resources.businessobjects.com/support/additional_downloads/runtime.asp)

# c# - C# MciSendString 记录，在调试中工作，未部署

> ID：10176036
> 
> 赞同：0
> 
> 时间：2012-04-16T14:27:57.433
> 
> 标签：c#, winmm, mci

我真的希望有人能指出我正确的方向。当我在 Visual Studio Express 2010 中调试时，此代码可以完美运行，但在构建和部署时给我 mci 错误 263 - “指定的设备未打开或被 mci 识别”。

我尝试过修改构建设置，但没有任何乐趣。当然这一定是配置问题而不是代码？

任何人都可以提供的任何帮助将不胜感激。

----- 代码如下 ----

```
[DllImport("winmm.dll")]
private static extern int mciSendString(string lpstrCommand, string lpstrReturnString,               int uReturnLength, int hwndCallback);
[System.Runtime.InteropServices.DllImport("winmm.dll")]
private static extern bool mciGetErrorString(int fdwError, StringBuilder lpszErrorText, int cchErrorText);

///Inside a button function
mciSendString("open new Type waveaudio Alias recsound", "", 0, 0);
mciSendString("record recsound", "", 0, 0);

//Inside another button function
int i = mciSendString(@"save recsound C:/test22/sound", outs, 0, 0);
MessageBox.Show(""+i);

StringBuilder buffer = new StringBuilder(128);
bool returnValue = mciGetErrorString(i, buffer, buffer.Capacity);
string err = buffer.ToString();
MessageBox.Show(buffer.ToString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:51:24.237

好吧，我通过实际指定一个文件将其另存为...来使您的代码正常工作

```
string outs = "";
//Inside another button function
int i = mciSendString(@"save recsound C:/test.wav", ref outs, 0, 0); 
```

我也将 out 参数更改为 ref 虽然我怀疑这与它有什么关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:47:33.920

您要播放什么类型的文件？它部署在哪里？我最近遇到了同样的问题；我无法在我的一台测试机器上播放 .mp3s 或 .wmas（我得到同样的错误：）`263`。我安装了 Windows Media Player 并且它们工作正常，所以这让我相信缺少编解码器。现在我只需要弄清楚它是什么编解码器。

# python - Python "set" with duplicate/repeated elements

> ID：10176037
> 
> 赞同：44
> 
> 时间：2012-04-16T14:28:00.967
> 
> 标签：python, collections, dictionary, set

Is there a standard way to represent a "set" that can contain duplicate elements.

As I understand it, a set has exactly one or zero of an element. I want functionality to have any number.

I am currently using a dictionary with elements as keys, and quantity as values, but this seems wrong for many reasons.

**Motivation:** I believe there are many applications for such a collection. For example, a survey of favourite colours could be represented by: survey = ['blue', 'red', 'blue', 'green']

Here, I do not care about the order, but I do about quantities. I want to do things like:

```
survey.add('blue')
# would give survey == ['blue', 'red', 'blue', 'green', 'blue'] 
```

...and maybe even

```
survey.remove('blue')
# would give survey == ['blue', 'red', 'green'] 
```

**Notes:** Yes, set is not the correct term for this kind of collection. Is there a more correct one?

A list of course would work, but the collection required is unordered. Not to mention that the method naming for sets seems to me to be more appropriate.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-16T14:43:23.693

You are looking for a [multiset](http://en.wikipedia.org/wiki/Multiset).

Python's closest datatype is [`collections.Counter`](http://docs.python.org/dev/library/collections.html#collections.Counter):

> A `Counter` is a `dict` subclass for counting hashable objects. It is an unordered collection where elements are stored as dictionary keys and their counts are stored as dictionary values. Counts are allowed to be any integer value including zero or negative counts. **The `Counter` class is similar to bags or multisets in other languages.**

For an actual implementation of a multiset, use the [`bag`](http://pypi.python.org/pypi/data-structures#id4) class from the data-structures package on pypi. Note that this is for Python 3 only. If you need Python 2, [here](http://code.activestate.com/recipes/259174/) is a recipe for a `bag` written for Python 2.4.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-16T14:34:29.460

Your approach with dict with element/count seems ok to me. You probably need some more functionality. Have a look at [`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter).

*   O(1) test whether an element is present and current count retrieval (faster than with `element in list` and `list.count(element)`)
*   `counter.elements()` looks like a list with all duplicates
*   easy manipulation union/difference with other Counters

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-26T02:26:09.533

> Python "set" with duplicate/repeated elements

This depends on how you define a set. One may assume that to the OP

1.  order does not matter (whether ordered or unordered)
2.  replicates/repeated elements (a.k.a. *multiplicities*) are permitted

Given these assumptions, the options reduce to two abstract types: a [list](http://mathworld.wolfram.com/List.html) or a [multiset](http://mathworld.wolfram.com/Multiset.html). In Python, these type usually translate to a `list` and `Counter` respectively. See the Details on some subtleties to observe.

**Given**

```
import random

import collections as ct

random.seed(123)

elems = [random.randint(1, 11) for _ in range(10)]
elems
# [1, 5, 2, 7, 5, 2, 1, 7, 9, 9] 
```

**Code**

A list of replicate elements:

```
list(elems)
# [1, 5, 2, 7, 5, 2, 1, 7, 9, 9] 
```

A "multiset" of replicate elements:

```
ct.Counter(elems)
# Counter({1: 2, 5: 2, 2: 2, 7: 2, 9: 2}) 
```

* * *

**Details**

*On Data Structures*

We have a mix of terms here that easily get confused. To clarify, here are some basic mathematical data structures compared to ones in Python.

```
Type        |Abbr|Order|Replicates|   Math*   |   Python    | Implementation
------------|----|-----|----------|-----------|-------------|----------------
Set         |Set |  n  |     n    | {2  3  1} |  {2, 3, 1}  | set(el)
Ordered Set |Oset|  y  |     n    | {1, 2, 3} |      -      | list(dict.fromkeys(el)
Multiset    |Mset|  n  |     y    | [2  1  2] |      -      | <see `mset` below>
List        |List|  y  |     y    | [1, 2, 2] |  [1, 2, 2]  | list(el) 
```

From the table, one can deduce the definition of each type. Example: a *set* is a container that ignores order and rejects replicate elements. In contrast, a *list* is a container that preserves order and permits replicate elements.

Also from the table, we can see:

*   Both an ordered set and a multiset are not explicitly implemented in Python
*   "Order" is a contrary term to a random arrangement of elements, e.g. sorted or insertion order
*   Sets and multisets are not strictly ordered. They *can* be ordered, but order does not matter.
*   Multisets permit replicates, thus they are not strict sets (the term "[set](http://mathworld.wolfram.com/Set.html)" is indeed [confusing](https://math.stackexchange.com/questions/1407209/why-is-it-called-a-multiset)).

*On Multisets*

Some may argue that `collections.Counter` is a multiset. You are safe in many cases to treat it as such, but be aware that `Counter` is simply a dict (a mapping) of key-*multiplicity* pairs. It is a map of multiplicities. See an example of elements in a flattened multiset:

```
mset = [x for k, v in ct.Counter(elems).items() for x in [k]*v]
mset
# [1, 1, 5, 5, 2, 2, 7, 7, 9, 9] 
```

Notice there is some residual ordering, which may be surprising if you expect disordered results. However, disorder does not preclude order. Thus while you can generate a multiset from a `Counter`, be aware of the following provisos on residual ordering in Python:

*   replicates get grouped together in the mapping, introducing some degree of order
*   in Python 3.6, dict's preserve insertion order

**Summary**

In Python, a multiset can be translated to a map of multiplicities, i.e. a `Counter`, which is not randomly unordered like a pure set. There can be some residual ordering, which in most cases is ok since order does not generally matter in multisets.

**See Also**

*   [`collections-extended`](https://github.com/mlenzen/collections-extended) - a package on extra data types in `collections`
*   N. Wildberger's [lectures](https://www.youtube.com/watch?v=dyCRPT6iFBg&list=PLIljB45xT85AYIeGfDQwHM8i6PQEDnnTI&index=1) on mathematical data structures

^(*Mathematically, (according to [N. Wildberger](https://www.youtube.com/watch?v=q2beQrKjtzs&list=PLIljB45xT85AYIeGfDQwHM8i6PQEDnnTI&index=2), we express braces `{}` to imply a set and brackets `[]` to imply a list, as seen in Python. Unlike Python, commas `,` to imply order.)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T14:36:15.047

You can use a plain `list` and use `list.count(element)` whenever you want to access the "number" of elements.

```
my_list = [1, 1, 2, 3, 3, 3]

my_list.count(1) # will return 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-23T06:59:30.757

An alternative Python multiset implementation uses a sorted list data structure. There are a couple implementations on PyPI. One option is the [sortedcontainers](http://www.grantjenks.com/docs/sortedcontainers/) module which implements a [SortedList](http://www.grantjenks.com/docs/sortedcontainers/) data type that efficiently implements set-like methods like `add`, `remove`, and `contains`. The sortedcontainers module is implemented in pure-Python, fast-as-C implementations (even faster), has 100% unit test coverage, and hours of stress testing.

Installation is easy from PyPI:

```
pip install sortedcontainers 
```

If you can't `pip install` then simply pull the sortedlist.py file down from the [open-source repository](https://github.com/grantjenks/sorted_containers).

Use it as you would a set:

```
from sortedcontainers import SortedList
survey = SortedList(['blue', 'red', 'blue', 'green']]
survey.add('blue')
print survey.count('blue') # "3"
survey.remove('blue') 
```

The sortedcontainers module also maintains a [performance comparison](http://www.grantjenks.com/docs/sortedcontainers/performance.html) with other popular implementations.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-16T12:14:40.367

What you're looking for is indeed a [*multiset*](https://en.wikipedia.org/wiki/Multiset) (or *bag*), a collection of not necessarily distinct elements (whereas a *set* does not contain duplicates).

There's an implementation for multisets here: [https://github.com/mlenzen/collections-extended](https://github.com/mlenzen/collections-extended) (Pypy's [collections extended](https://pypi.python.org/pypi/collections-extended) module).

The data structure for multisets is called `bag`. A `bag` is a subclass of the `Set` class from `collections` module with an extra dictionary to keep track of the multiplicities of elements.

```
class _basebag(Set):
    """
    Base class for bag and frozenbag.   Is not mutable and not hashable, so there's
    no reason to use this instead of either bag or frozenbag.
    """
    # Basic object methods

    def __init__(self, iterable=None):
        """Create a new basebag.

        If iterable isn't given, is None or is empty then the bag starts empty.
        Otherwise each element from iterable will be added to the bag
        however many times it appears.

        This runs in O(len(iterable))
        """
        self._dict = dict()
        self._size = 0
        if iterable:
            if isinstance(iterable, _basebag):
                for elem, count in iterable._dict.items():
                    self._inc(elem, count)
            else:
                for value in iterable:
                    self._inc(value) 
```

A nice method for `bag` is `nlargest` (similar to `Counter` for lists), that returns the multiplicities of all elements blazingly fast since the number of occurrences of each element is kept up-to-date in the bag's dictionary:

```
>>> b=bag(random.choice(string.ascii_letters) for x in xrange(10))
>>> b.nlargest()
[('p', 2), ('A', 1), ('d', 1), ('m', 1), ('J', 1), ('M', 1), ('l', 1), ('n', 1), ('W', 1)]
>>> Counter(b)
Counter({'p': 2, 'A': 1, 'd': 1, 'm': 1, 'J': 1, 'M': 1, 'l': 1, 'n': 1, 'W': 1}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-03T04:59:50.953

You can used `collections.Counter` to implement a multiset, as already mentioned.

Another way to implement a multiset is by using `defaultdict`, which would work by counting occurrences, like `collections.Counter`.

Here's a snippet from the [python docs](https://docs.python.org/3/library/collections.html#defaultdict-examples):

> Setting the `default_factory` to `int` makes the `defaultdict` useful for counting (like a bag or multiset in other languages):
> 
> ```
> >>> s = 'mississippi'
> >>> d = defaultdict(int)
> >>> for k in s:
> ...     d[k] += 1
> ...
> >>> d.items()
> [('i', 4), ('p', 2), ('s', 4), ('m', 1)] 
> ```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-04-16T14:34:47.440

If you need duplicates, use a list, and transform it to a set when you need operate as a set.

# html - HTML 表现得像样式不仅仅在 IE7 或 IE 兼容模式中被引用

> ID：10176040
> 
> 赞同：-1
> 
> 时间：2012-04-16T14:28:07.283
> 
> 标签：html, css

我已经开发了一个关于 CMS Made Simple 的网站，这是一个供我使用的常用 CMS。我从来没有遇到过 IE7 的问题，但是在这个网站上，我遇到了这个问题，它的行为就像 CSS 不存在一样。我已经盯着 html 和样式超过 2 个小时了，我确信这很简单，但我想不通。它只是 IE7 或 IE 的兼容模式。Chrome/Firefox/Safari 都可以。

什么可能导致网站表现得好像样式没有链接？

该网站是 [http://bradyinn.com/](http://bradyinn.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:39:28.053

你~~有~~`"`在您的样式表中有一个流氓角色。IE7 没有正确处理该问题，并且无法正确解析 CSS 中超过该点的任何内容。

[验证](http://jigsaw.w3.org/css-validator/)者会选择这个。

# iphone - MKPinAnnotation查看自定义图片

> ID：10176043
> 
> 赞同：2
> 
> 时间：2012-04-16T14:28:18.113
> 
> 标签：iphone, objective-c, mapkit, mkpinannotationview

我想在地图上设置自定义图像而不是普通图钉。我还希望它能够打开并为每个添加放置动画。

有什么建议吗？

编辑：这就是我所拥有的

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(ActivityAnnotation *)annotation
{
    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
    MKPinAnnotationView* pinView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
    pinView.animatesDrop=YES;
    pinView.canShowCallout=YES;
    UIImage *image = [UIImage imageNamed:@"Map_Pin"];
    pinView.image = image;
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake(-2.5,6,27,30);
    [pinView addSubview:imageView];
    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    rightButton.tag = [activities indexOfObject:annotation.activity];
    [rightButton addTarget:self action:@selector(showDetails:) forControlEvents:UIControlEventTouchUpInside];
    pinView.rightCalloutAccessoryView = rightButton;

    return pinView;
} 
```

一切正常，但原始图钉一直显示在我的默认图像后面。我怎样才能抹去它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T14:58:13.730

尝试不使用 MKPinAnnotationView，而是使用 MKAnnotationView。MKPinAnnotationView 默认显示一个图钉，只允许您自定义颜色（如果我没记错的话）。MKAnnotationView 允许自定义 pin 图像。

# c++ - 远处的物体与近处的物体重叠。为什么会这样，我该如何解决？

> ID：10176049
> 
> 赞同：2
> 
> 时间：2012-04-16T14:28:45.500
> 
> 标签：c++, visual-c++, opengl

这是输出的样子： ![对象重叠的屏幕截图](../Images/95b120edb86825437188e5d5ba2bd3f4.png)

我的代码是这样的：

```
(...)
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glColor3f(1.0f, 1.0f, 1.0f);
glTranslatef(-10,0,0);
glRotatef(-17.14f,0,1,0);

////////////////////////////////////////////////////////////////////
for(int i=1;i<=21;i++){
    glTranslatef(10,0,0);
    glRotatef(17.14f,0,1,0);

    glBegin(GL_QUADS);
    glTexCoord2f(0.0f, 0.0f);glVertex3f(-BOX_SIZE / 2, -BOX_SIZE / 2, BOX_SIZE / 2);
    glTexCoord2f(1.0f, 0.0f);glVertex3f(BOX_SIZE / 2, -BOX_SIZE / 2, BOX_SIZE / 2);
    glTexCoord2f(1.0f, 1.0f);glVertex3f(BOX_SIZE / 2, BOX_SIZE / 2, BOX_SIZE / 2);
    glTexCoord2f(0.0f, 1.0f);glVertex3f(-BOX_SIZE / 2, BOX_SIZE / 2, BOX_SIZE / 2);
    glEnd();

}
(...) 
```

它基本上是一个旋转的图像磁盘（稍后将更改它们）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:30:59.843

启用[深度缓冲](http://www.opengl.org/archives/resources/faq/technical/depthbuffer.htm)。

# r - 根据另一列的文本，对 data.table 的每行不同列中的数据进行整理

> ID：10176050
> 
> 赞同：4
> 
> 时间：2012-04-16T14:28:45.787
> 
> 标签：r, data.table

我想在我的 data.table 中添加一个新列，其中包含来自其他列之一的数据。但是，列的选择因行而异 - 取决于另一列的内容。所以：

对于数据集：

```
 a_data b_data column_choice
[1,]     55      1             a
[2,]     56      2             a
[3,]     57      3             b 
```

生成者：

```
dat=data.table(a_data = c(55, 56, 57), 
               b_data = c(1,  2,  3), 
               column_choice = c("a", "a", "b")) 
```

我想要一个新列“选择”，它包含（每行）来自“a_data”或“b_data”的数据，具体取决于“column_choice”的值。因此，生成的数据表将是：

```
 a_data b_data column_choice chosen
[1,]     55      1             a     55
[2,]     56      2             a     56
[3,]     57      3             b      3 
```

我设法使用以下方法获得了预期的效果：

```
dat=dat[, data.table(.SD, chosen=.SD[[paste0(.SD$column_choice, "_data")]]),
        by=1:nrow(a)]
dat$nrow = NULL 
```

但是这感觉很笨拙；也许有一种更简单的方法来做到这一点（这无疑也会教会我一些关于 R 的知识）？

在实践中，数据框还有很多其他列需要保留，更多的选择不仅仅是“a或b”，还有几种类型的列要生成，所以我宁愿不使用`ifelse`可能的基本解决方案适用于上面的基本示例。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T12:10:46.247

我想我现在已经找到了一个正确矢量化的班轮，在这种情况下，这也比其他答案更快。

petesFun2 使用 data.table 聚合作为 petesFun，但现在跨 column_choice 向量化（而不是像以前那样按项目）。

虽然 petesFun2 对我来说很好，但它确实以不同的顺序保留了行和列。因此，为了与其他答案进行比较，我添加了 petesFun2Clean ，它与其他答案保持相同的顺序。

```
petesFun2 <-function(myDat) {
  return(myDat[, cbind(.SD, chosen=.SD[[paste0(.BY$column_choice, "_data")]]),
               by=column_choice])
}

petesFun2Clean <-function(myDat) {
  myDat = copy(myDat) # To prevent reference issues
  myDat[, id := seq_len(nrow(myDat))] # Assign an id
  result = myDat[, cbind(.SD, chosen=.SD[[.BY$choice]]),
                 by=list(column_choice, choice=paste0(column_choice, "_data"))]

  # recover ordering and column order.
  return(result[order(id), 
                list(a_data, b_data, c_data, column_choice, chosen)]) 
}

benchmark(benRes<-   myFun(test.dat),
          petesRes<- petesFun(test.dat),
          dowleRes<- dowleFun(test.dat),
          petesRes2<-petesFun2(test.dat),
          petesRes2Clean<- petesFun2Clean(test.dat),
          replications=25,
          columns=c("test", "replications", "elapsed", "relative"))

#                                         test replications elapsed  relative
# 1                  benRes <- myFun(test.dat)           25   0.337  4.160494
# 3             dowleRes <- dowleFun(test.dat)           25   0.191  2.358025
# 5 petesRes2Clean <- petesFun2Clean(test.dat)           25   0.122  1.506173
# 4           petesRes2 <- petesFun2(test.dat)           25   0.081  1.000000
# 2             petesRes <- petesFun(test.dat)           25   4.018 49.604938

identical(petesRes2, benRes)
# FALSE (due to row and column ordering)
identical(petesRes2Clean, benRes)
# TRUE 
```

编辑：我刚刚注意到（正如 Matthew 在评论中提到的那样）我们现在按组：=。所以我们可以放弃 cbind 并简单地做：

myDat[, selected := .SD[[paste0(.BY$column_choice, "_data")]], by=column_choice]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:23:30.787

我们开始`for`越来越多地使用循环来完成这种任务`data.table`。基于 Ben 的回答并使用他的基准，以下内容如何：

```
dowleFun = function(DT) {
  DT = copy(DT)   # Faster to remove this line to add column by reference, but  
                  # included copy() because benchmark repeats test 25 times and
                  # the other tests use the same input table
  w = match(paste0(DT$column_choice,"_data"),names(DT))
  DT[,chosen:=NA_real_]    # allocate new column (or clear it if already exists)
  j = match("chosen",names(DT))     
  for (i in 1:nrow(DT))
      set(DT,i,j,DT[[w[i]]][i])
  DT
}

benchmark(benRes<-myFun(test.dat),
    petesRes<-petesFun(test.dat),
    dowleRes<-dowleFun(test.dat),
    replications=25,columns=c("test", "replications", "elapsed", "relative"),
    order="elapsed")

#                            test replications elapsed relative
# 3 dowleRes <- dowleFun(test.dat)           25    0.30      1.0
# 1      benRes <- myFun(test.dat)           25    0.39      1.3
# 2 petesRes <- petesFun(test.dat)           25    5.79     19.3 
```

如果可以删除，`copy()`那么它应该更快并且可以更好地扩展到更大的数据集。为了测试这一点，也许创建一个非常大的表并计算一次运行需要多长时间。

在这种情况下，一个简单的`for`循环可能更容易遵循。

话虽如此，如果`i`可以是 2-column `matrix`，那么`A[B]`可以使用 base 中的语法（其中`B`包含要选择的行和列位置）并且它是一个单行：

```
DT[,chosen:=DT[cbind(1:nrow(DT),paste0(column_choice,"_data"))]] 
```

目前你得到这个：

```
> DT[cbind(1:3,c(4,4,5))]
Error in `[.data.table`(test.dat, cbind(1:3, c(4, 4, 5))) : 
  i is invalid type (matrix). Perhaps in future a 2 column matrix could return
  a list of elements of DT (in the spirit of A[B] in FAQ 2.14). Please let
  maintainer('data.table') know if you'd like this, or add your comments to
  FR #1611. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T21:22:25.777

当我想到笨重的时候，我会想到旧自行车或旧汽车之类的东西，但也可以通过迭代行来在 R 中做事。因此，下面的内容看起来比您在问题中发布的内容更笨拙，但它以我认为更加矢量化的方式寻求解决方案。以下似乎比您在上面发布的更时尚的代码快约 10 倍（并返回相同的结果）。

这个建议依赖于`reshape2`包：

```
library(data.table)
library(reshape2) 
```

我尽可能地添加了“c”`column_choice`以使事情变得更有趣：

```
dat=data.table(a_data = c(55,56,57,65), 
  b_data = c(1,2,3,4),c_data=c(1000,1001,1002,1003),
  column_choice = c("a", "c", "a", "b")) 
```

以下是步骤，包装在一个函数中，为基准测试做准备。

```
myFun<-function(myDat){
# convert data.table to data.frame for melt()ing
  dat1<-data.frame(myDat)
# add ID variable to keep track of things
  dat1$ID<-seq_len(nrow(dat1))
# melt data - because of this line, it's important to only
# pass those variables that are used to select the appropriate value
# i.e., a_data,b_data,c_data,column_choice
  dat2<-melt(dat1,id.vars=c("ID","column_choice"))
# Determine which value to choose: a, b, or c
  dat2$chosen<-as.numeric(dat2$column_choice==substr(dat2$variable,
    1,1))*dat2$value
# cast the data back into the original form
  dat_cast<-dcast(dat2,ID+column_choice~.,
    fun.aggregate=sum,value.var="chosen")
# rename the last variable
  names(dat_cast)[ncol(dat_cast)]<-"chosen"
# merge data back together and return results as a data.table
  datOUT<-merge(dat1,dat_cast,by=c("ID","column_choice"),sort=FALSE)
  return(data.table(datOUT[,c(names(myDat),"chosen")]))
} 
```

这是您打包到函数中的解决方案：

```
petesFun<-function(myDat){
  datOUT=myDat[, data.table(.SD,
    chosen=.SD[[paste0(.SD$column_choice, "_data")]]),
    by=1:nrow(myDat)]
  datOUT$nrow = NULL
  return(datOUT)
} 
```

这看起来比`myFun`. 然而，基准测试结果显示出很大的差异：

制作一个更大的data.table：

```
test.df<-data.frame(lapply(dat,rep,100))
test.dat<-data.table(test.df) 
```

和基准：

```
library(rbenchmark)

benchmark(myRes<-myFun(test.dat),petesRes<-petesFun(test.dat),
 replications=25,columns=c("test", "replications", "elapsed", "relative"))
#                             test replications elapsed relative
# 1       myRes <- myFun(test.dat)           25   0.412  1.00000
# 2 petesRes <- petesFun(test.dat)           25   5.429 13.17718

identical(myRes,petesRes)
# [1] TRUE 
```

我建议可以用不同的方式解释“笨重”:)

# c++ - boost::program_options “多态”参数

> ID：10176053
> 
> 赞同：7
> 
> 时间：2012-04-16T14:28:51.000
> 
> 标签：c++, boost, boost-program-options

我想使用 boost::program_options 创建一个可执行文件，可以如下调用：

```
./example --nmax=0,10  # nmax is chosen randomly between 0 and 10
./example --nmax=9     # nmax is set to 9
./example              # nmax is set to the default value of 10 
```

用最少的代码以类型安全的方式实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T15:42:47.033

> 我想使用 boost::program_options 创建一个可执行文件，可以如下调用：

该`program_options`库非常灵活，可以通过使用流插入和提取运算符编写自己的类来轻松支持这一点。

```
#include <iostream>
#include <limits>
#include <stdlib.h>

#include <boost/lexical_cast.hpp>
#include <boost/program_options.hpp>

class Max
{
public:
    Max() :
        _max( std::numeric_limits<int>::max() )
    {

    }

    Max(
            int max
       ) :
        _max( max )
    {

    }

    Max(
            int low,
            int high
       )
    {
        int value = rand();
        value %= (high - low);
        value += low;
        _max = value;
    }

    int value() const { return _max; }

private:     
    int _max;
};

std::ostream&
operator<<(
        std::ostream& os,
        const Max& foo
        )
{
    os << foo.value();
    return os;
}

std::istream&
operator>>(
        std::istream& is,
        Max& foo
        )
{
    std::string line;
    std::getline( is, line );
    if ( !is ) return is;

    const std::string::size_type comma = line.find_first_of( ',' );
    try {
        if ( comma != std::string::npos ) {
            const int low = boost::lexical_cast<int>( line.substr(0, comma) );
            const int high = boost::lexical_cast<int>( line.substr(comma + 1) );
            foo = Max( low, high );
        } else {
            foo = Max( boost::lexical_cast<int>(line) );
        }
    } catch ( const boost::bad_lexical_cast& e ) {
        std::cerr << "garbage when convering Max value '" << line << "'" << std::endl;

        is.setstate( std::ios::failbit );
    }

    return is;
}

int
main( int argc, char** argv )
{
    namespace po = boost::program_options;

    Max nmax;

    po::options_description options;
    options.add_options()
        ("nmax", po::value(&nmax)->default_value(10), "random number range, or value" )
        ("help,h", po::bool_switch(), "help text")
        ;

    po::variables_map vm;
    try {
        po::command_line_parser cmd_line( argc, argv );
        cmd_line.options( options );
        po::store( cmd_line.run(), vm );
        po::notify( vm );
    } catch ( const boost::program_options::error& e ) {
        std::cerr << e.what() << std::endl;
        exit( EXIT_FAILURE );
    }

    if ( vm["help"].as<bool>() ) {
        std::cout << argv[0] << " [OPTIONS]" << std::endl;
        std::cout << std::endl;
        std::cout << "OPTIONS:" << std::endl;
        std::cout << options << std::endl;
        exit(EXIT_SUCCESS);
    }

    std::cout << "random value: " << nmax.value() << std::endl;
} 
```

示例会话

```
samm:stackoverflow samm$ ./a.out
random value: 10
samm:stackoverflow samm$ ./a.out --nmax 55
random value: 55
samm:stackoverflow samm$ ./a.out --nmax 10,25
random value: 17
samm:stackoverflow samm$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:04:52.483

该库不提供您建议的“多态”参数类型。每个参数只有一种类型。如果要根据参数的语法使其具有不同的值，则需要自己添加该功能。

简单的方法是按照 Kerrek 的评论建议使用字符串，然后解析它。它实际上不需要太多代码。

另一种方法是使用[自定义验证器](http://www.boost.org/doc/libs/1_48_0/doc/html/program_options/howto.html#id2445062)。制作一个专用于这种参数格式的特殊类型，然后编写一个`validate`将字符串值转换为自定义类型值的函数。如果验证失败则抛出异常；Program_Options 库会将其视为任何内置类型的验证失败。我写[了一个示例验证器来回答另一个问题](https://stackoverflow.com/a/8822627/33732)。

您为此编写的代码与您在解析命令行后为解析字符串而编写的代码几乎相同；这只是你是否将它构建到参数类型中，或者只是在之后处理它的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T08:14:48.570

我在这里发布此代码，希望它对某人有用。这是 Sam Miller 答案的“模板化”版本。

```
#ifndef RANDOMCONSTANT_HH
#define RANDOMCONSTANT_HH

#include <boost/random.hpp>

boost::random::mt19937 g_randomConstantPrng(static_cast<unsigned int>(std::time(NULL) + getpid()));

template<typename T>
class RandomConstant
{
public:
    RandomConstant() { /* nothing */ }
    RandomConstant(T value) : _value(value) { /* nothing */ }
    RandomConstant(int low, int high)
    {
        boost::random::uniform_int_distribution<> dist(low, high);
        _value = dist(g_randomConstantPrng);
    }
    RandomConstant(double low, double high)
    {
        boost::random::uniform_real_distribution<> dist(low, high);
        _value = dist(g_randomConstantPrng);
    }
    T value() const { return _value; }

private:
    T _value;
};

template<typename T>
std::ostream&
operator<<(std::ostream& os, const RandomConstant<T>& foo)
{
    os << foo.value();
    return os;
}

template<typename T>
std::istream&
operator>>(std::istream &is, RandomConstant<T> &foo)
{
    std::string line;
    std::getline(is, line);
    if (!is) return is;

    const std::string::size_type comma = line.find_first_of( ',' );
    if (comma != std::string::npos)
    {
        const T low = boost::lexical_cast<T>( line.substr(0, comma) );
        const T high = boost::lexical_cast<T>( line.substr(comma + 1) );
        foo = RandomConstant<T>(low, high);
    }
    else
    {
        foo = RandomConstant<T>(boost::lexical_cast<T>(line));
    }

    return is;
}

#endif /* RANDOMCONSTANT_HH */ 
```

使用如下：

```
namespace po = boost::program_options;
po::options_description desc;
desc.add_options()
    ("help", "show help")
    ("intValue", po::value<RandomConstant<int>>()->default_value(3), "description 1")
    ("doubleValue", po::value<RandomConstant<double>>()->default_value(1.5), "description 2")
;

po::variables_map vm;
po::store(po::parse_command_line(argc, argv, desc), vm);
po::notify(vm);

if (vm.count("help")) {
    std::cerr << desc << std::endl;
    return EXIT_FAILURE;
}

int intValue = vm["intValue"].as<RandomConstant<int>>().value();
double doubleValue = vm["doubleValue"].as<RandomConstant<double>>().value(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T05:19:14.970

您可能可以使用多令牌

```
po::options_description desc("Allowed options");
desc.add_options()
    ("nmax", po::value< std::vector< float > >()->multitoken()->default_value(10), "description")
;

...

float value;
if (vm.count["nmax"] == 2)
    value = random value ...
else
    value = vm["nmax"].as< std::vector< float > >()[0]; 
```

# asp.net-mvc - 何时在“约定优于配置”中添加新文件夹？

> ID：10176055
> 
> 赞同：2
> 
> 时间：2012-04-16T14:28:52.720
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, convention-over-configur

我有两个问题，真的。

我看到人们在他们的项目中添加了一个 Services 文件夹。那个文件夹的目的是什么？

我看到了 Services 和 ViewModels 的文件夹。现在我遇到了一篇关于存储库的文章。那么，每次我有新用途的类时，我都应该为它们创建一个文件夹吗？例如，如果我有一个 Repository 类，那么我应该创建一个 Repository 文件夹并将它们放在那里而不是 Models 文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:32:37.673

模型文件夹仅用于查看模型。没有其他东西属于它。

我建议您将所有非 UI 逻辑移动到您从 MVC 项目中引用的单独类库中。谷歌`separation of concerns`。

至于文件夹命名，它因架构而异。那些使用域驱动设计的人倾向于命名文件夹

*   基础设施
*   模型（域模型而不是视图模型）
*   存储库
*   服务

而其他人则为他们放置所有相关类的每种类型的模型创建根文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:33:53.770

文件夹（通常）与配置的约定无关。它们只是组织内容的一种方式。请记住，这通常也会为该文件夹中的所有类创建一个命名空间（文件夹名称）。

在您的具体情况下，您需要做最有意义的事情。如果您为存储库使用自定义 POCO，那么我同意创建一个存储库文件夹。但是，Models 文件夹确实是 MVC 中的一个约定，UI 使用的模型应该存储在那里。

只要确保将对象存储在最合乎逻辑的位置，您就应该很好:)

# jquery - 在 rails3-jquery-autocomplete 使用作为可标记的操作？

> ID：10176057
> 
> 赞同：0
> 
> 时间：2012-04-16T14:29:00.130
> 
> 标签：jquery, ruby-on-rails-3, autocomplete, tags

我有一个名为 Resource 的模型，它具有来自作为标记的标记。我想使用 jquery-autocomplete 使它几乎与 stackoverflow 的标签完全相同（可以创建新的，但它建议先计算类似的）。我所看到的一切似乎都是一个非常糟糕的黑客攻击并且效果不佳。要么他们没有工作，要么工作不一致。

在 Rails 3 中实现类似 stackoverflow 的标记的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:08:42.013

我认为 Railscast 的这一集只适合你[http://railscasts.com/episodes/258-token-fields-revised](http://railscasts.com/episodes/258-token-fields-revised)而这一集也是[http://railscasts.com/episodes/382-tagging](http://railscasts.com/episodes/382-tagging)

我在做这项工作的同一条路上。关于 stackoverflow 有很多很好的教程，例如：[如何使用 jquery-Tokeninput 和 Acts-as-taggable-on](https://stackoverflow.com/questions/6674127/how-to-use-jquery-tokeninput-and-acts-as-taggable-on)可以让我们走上正确的道路。

# c# - 如何在 C# 程序中嵌入 perl 解释器

> ID：10176058
> 
> 赞同：16
> 
> 时间：2012-04-16T14:29:05.553
> 
> 标签：c#, perl, interop, dllimport

我意识到我必须`DllImport`使用永久方法

```
perl_parse
perl_alloc
perl_free 
```

ETC。，

但不确定如何将函数参数与方法一起使用，`DLLImport`尤其是与`perl_parse`方法一起使用。

我也意识到已经存在一个[相关的问题](https://stackoverflow.com/q/1196620/242888)，它几乎就在那里，但 OP 仍然通过创建一个 C 包装器然后在 C# 中使用它来解决。

他说他无法 DLLimport PERL_SYS_INIT3。

所以我的问题是如何仅使用 C# 正确包装它们并使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:33:13.720

看这个; 我希望它会有所帮助（它在早期版本中被调用）

我从这里得到这个（[perl](http://www.perlmonks.org/?node_id=530344)）

要在 C# 程序中嵌入 Perl 解释器，请添加对 COM 对象“Microsoft Script Control 1.0”的引用并编写如下代码：

```
MSScriptControl.ScriptControlClass Interpreter;
Interpreter = new MSScriptControl.ScriptControlClass();
Interpreter.Language = @"PerlScript";
string Program = @"reverse 'abcde'";
string Results = (string)Interpreter.Eval(Program); 
```

以上等价于以下 Perl 脚本，它将 Perl 解释器嵌入到 Perl 解释器中：

```
use Win32::OLE;
my $Interpreter;
$Interpreter = Win32::OLE->new('ScriptControl');
$Interpreter->{Language} = 'PerlScript';
my $Program = "reverse 'abcde'";
my $Results = $Interpreter->Eval($Program); 
```

# objective-c - 大括号内的类变量与使用 @property 注释声明的类变量之间的区别

> ID：10176061
> 
> 赞同：1
> 
> 时间：2012-04-16T14:29:13.860
> 
> 标签：objective-c

以下代码片段有什么区别？

# 1号

```
@interface HistoryJsonBean : NSObject
{
}

@property (nonatomic,retain) NSString * unit; 
```

# 2号

```
@interface HistoryJsonBean : NSObject
{
    NSString * unit;
}

@property (nonatomic,retain) NSString * unit; 
```

我是新手，上面两个代码真的有区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:32:46.177

第二个有一个名为 的实例变量`unit`，第一个没有。

请花点时间阅读“The Objective-C Programming Language”，它位于 Xcode 管理器的“文档”选项卡下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:38:07.297

第一种语法是依靠现代 Objective C 运行时系统的一个特性来从属性定义中创建相应的变量。因此，第二种语法只是用于旧运行时系统的 Objective C 2.0 语法。

也看看[SO的这篇文章](https://stackoverflow.com/questions/6448443/objective-c-interface-declarations-with-properties)

编辑：

后一种情况下的变量是 ivar。

属性定义最初只是为其 ivar 定义访问器方法的一种捷径（使用适当的内存管理）。较新的运行时系统放宽了声明 ivar 的需要，您可以只使用属性定义（这也意味着分配内存来存储与属性关联的值）。

从接口的角度来看，在新的运行时系统上，您提到的两种语法没有区别。现在，如果运行时系统以两种不同的方式处理它们，这只能通过检查运行时系统源代码中的实现来说明。我的猜测是在那个级别上也没有区别。

# html - IE8 无法识别 [...] 的标签

> ID：10176064
> 
> 赞同：1
> 
> 时间：2012-04-16T14:29:19.243
> 
> 标签：html, css, internet-explorer, internet-explorer-8

我有下面的CSS：

```
span label[for=Length]
{
width: 90px; 
display: block;
text-align:right; 
margin-top: 2px;
margin-right: 5px;
} 
```

使用 html：

```
<span><label for="Length">Length:</label></span>
<span><input type=text id="Length"></span> 
```

它在 IE8 中不起作用。**label[for=...]**无法识别。任何解决方法？

谢谢。

* * *

更新

我在我的问题中犯了一个错误，所以现在我更新了。有什么解决办法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:31:12.520

添加具有属性的`<label>`元素。`for="Length"`

（并确保您有一个触发标准模式的 Doctype）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T14:33:04.013

该元素必须是一个标签，以便能够将其作为 css 中的标签匹配试试这个：

```
<label for="Length">Length:</label>
<span><input type=text id="Length"></span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:16:02.713

IE 8（或 IE 9）不支持[Quirks Mode](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)中的属性选择器。这就是为什么添加一个合适的 doctype 声明，如 Quentin 的回答中所建议的那样，可以解决 IE 8 上的问题。为此目的，最简单的 doctype 是`<!doctype html>`.

在 IE 7 上，没有任何帮助，因为它只是缺乏支持，而不是在 Quirks 模式下将其掩盖。

因此，在元素上使用`id`属性（例如 ）和在 CSS 中使用选择器（例如）会更安全。此类选择器适用于所有支持 CSS 的浏览器。`label``<label id=foo for=Length>``id``#foo`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T14:33:08.397

```
.label1
{
width: 90px; 
display: block;
text-align:right; 
margin-top: 2px;
margin-right: 5px;
}

<span>Length:</span>
<label class='label1' for='Length'><input type=text id="Length"></label> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-06T09:16:05.307

它适用于 IE8.. 不依赖于浏览器。检查文件的 !doctype html。因此，它是一个属性，它有效。

# css - 如何打印保留样式的维基百科页面？

> ID：10176069
> 
> 赞同：2
> 
> 时间：2012-04-16T14:29:29.500
> 
> 标签：css, printing, media-queries, wikipedia

我想按原样打印带有标题和侧边栏的维基百科页面。默认情况下，当您打印它们时，文章的样式是专门为打印介质设计的。我正在为编程课程制作材料，我特别不希望那样做。检查`$('[media]')`返回几个样式和链接元素，但都用`media="all"`.

精简的样式来自哪里，我如何使它不适用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:48:15.807

如果您检查文章页面的来源，您会注意到有一个`.noprint`简单的类：

```
 display: none; 
```

在外部样式表本身 ( `bits.wikimedia.org/en.wikipedia.org/load.php? ...`) 中，它们使用`@media print`指令：

```
@media print{  a.stub,a.new{color:#ba0000;text-decoration:none}...
...etc... 
```

如果您使用 Firebug（或类似的），您应该能够删除`.noprint`和类和相关的 CSS 以绕过样式。

# java - 如何在 .jsp 中包含 JSTL / EL 页脚？

> ID：10176076
> 
> 赞同：1
> 
> 时间：2012-04-16T14:30:02.977
> 
> 标签：java, import, include, jstl, el

我有一个简单的 .jsp 文件，它使用*<c:import url="...jsp">*作为页眉和页脚。

对于标题，它工作得很好：在我*c:import的**header.jsp*中进行了一些 ${...} EL 替换，并且每次用户重新加载页面时，一切都很好。

 *然而，在页脚中有一些我没有得到的东西：我试图将一些 JSTL 放在我的*footer.jsp 中*，但它不起作用。

我的 footer.jsp 中的标签不是评估 JSTL，而是提供给浏览器。

例如，如果我要求从 Chrome 查看页面源代码，我会看到：

```
<div>
    <c:if test="false">
       ...
    </c:if>
</div> 
```

header.jsp 和 footer.jsp 都使用*c:import 导入*。EL 替换如何工作，而 JSTL 标签却不行？

如果我需要“包含”而不是“导入”，那么我有两个问题：

*   我可以使用 JSTL “包含”吗？如果可以，如何？

*   当我在 JSTL 标记不起作用时执行*c:import*时，EL 替换如何仍然发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:37:46.313

您确实应该使用`<%@ include file="footer.jsp" %>`- 然后所有 EL 都将得到解决（标题也是如此）

`<c:import />`评估目标资源，然后将其包含在页面中。如果您的页脚未正确声明 EL 表达式解析（在旧版本的 JSP 中默认情况下未启用），则包含的结果将包含`<c:`标签。*

# objective-c - 将任意 NSData 写入 NSXMLElement 的最佳方法

> ID：10176079
> 
> 赞同：0
> 
> 时间：2012-04-16T14:30:25.847
> 
> 标签：objective-c, xml, cocoa, xml-serialization, base64

我允许将应用程序数据（它是 10.7 上的 Mac 应用程序）导出为 XML 文件，并且我希望能够从 XML 导出/导入/从 XML 导出/导入的一个字段是一个`NSData`字段。这样做的正确/可接受的方式是什么？我应该[转换为 base64](https://stackoverflow.com/questions/5999370/nsdata-to-base64)并将该字符串写入 XML 吗？

我不希望使用一个类别来推出我自己的解决方案，就像链接问题的公认答案一样（链接到[Matt Gallagher 的解决方案](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)）。

**更新**

我刚刚发现了这[`NSPropertyListSerialization`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html)门课。我抱有希望，但它只有返回`NSData`表示的静态序列化方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:42:59.340

我意识到（正如我的更新所暗示的那样）我可以使用[NSPropertyListSerialization](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html)类，因为`NSData`返回的`-dataWithPropertyList:format:options:error:`只是一个 UTF-8 字符串。这是我用来序列化的：

```
NSData *data = value;

NSError *error = nil;
NSData *plistData = [NSPropertyListSerialization dataWithPropertyList:data
                                                               format:NSPropertyListXMLFormat_v1_0
                                                              options:0
                                                                error:&error];
if (error) {
    NSLog(@"Error serializing data to plist XML: %@", error);
} else {
    NSString *plistString = [[NSString alloc] initWithData:plistData encoding:NSUTF8StringEncoding];
    NSXMLElement *dataElement = [NSXMLElement elementWithName:field
                                                  stringValue:plistString];
} 
```

并反序列化：

```
NSData *plistData = [element.stringValue dataUsingEncoding:NSUTF8StringEncoding];
NSData *originalData = [NSPropertyListSerialization propertyListWithData:plistData
                                                                 options:NSPropertyListImmutable
                                                                  format:NULL
                                                                   error:&error];

if (error) {
    NSLog(@"Error deserializing data from plist XML: %@", error);
} else {
    value = originalData;
} 
```

# mvvm - 防止用户打开两个相同的子窗口？

> ID：10176097
> 
> 赞同：0
> 
> 时间：2012-04-16T14:31:27.813
> 
> 标签：mvvm, mvvm-light

用户单击菜单项并显示一个子窗口（非模态）。如何防止用户再次打开同一个窗口？

我知道我可以处理子窗口的初始化和关闭事件，以将其添加到打开的子窗口的某些集合中，但我正在寻找纯粹和干净的 MVVM 方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:49:20.837

我认为您应该向视图模型类添加一个属性来处理视图的可见性，然后将其绑定到您的视图。在你的属性的 setter 部分检查它的值是否改变，如果不只是返回。

您不需要在应用程序中创建很多子窗口，只需控制现有子窗口的可见性并更改要显示的数据即可。

# asp.net - IO.Directory.CreateDirectory() 错误

> ID：10176104
> 
> 赞同：0
> 
> 时间：2012-04-16T14:31:50.003
> 
> 标签：asp.net, file-permissions

我正在共享主机中安装一个 ASP.NET 应用程序（在本地服务器中运行正常），此时出现异常：

```
IO.Directory.CreateDirectory(the_path) 
```

例外是：

> 'System.Security.Permissions.FileIOPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 类型权限的错误请求失败。

该文件夹具有（或应该具有）正确的写入权限，并且在托管中他们没有说太多，而且，正如我[在这里](https://stackoverflow.com/questions/866515/security-exception-when-deploying-asp-net-web-application-in-shared-hosting-and)看到的，它可能与 MediumTrust 环境有关......

关于如何面对这个的任何想法？一种[解决方案可能是](https://stackoverflow.com/questions/6387888/creating-directories-in-medium-trust-environment)（尚未尝试）将可写文件夹放在虚拟路径目录中，这实际上是我的文件的安全问题，因为它们实际上暴露给任何知道路径的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:35:03.360

您的虚拟主机限制了 .Net 写入磁盘的能力。

您可以要求他们更改它，或者在您的虚拟目录中写入并使用 Web.config 来阻止公共 HTTP 访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:35:00.040

> 我正在共享主机中安装一个 ASP.NET 应用程序（在本地服务器中工作正常）

共享主机通常以中等信任运行，因此它们不会授予您写入应用程序目录之外的文件系统的权限。`the_path`需要位于 Web 应用程序的根目录中，并且您必须具有对文件系统的写入权限。

您应该联系您的托管服务提供商以确定您是否对文件系统进行了写入。

# android - 使用 KeyStore.saw（字符串前缀）获取用户证书

> ID：10176105
> 
> 赞同：0
> 
> 时间：2012-04-16T14:31:54.697
> 
> 标签：android, certificate, keystore

此页面上描述了android如何能够选择所有用户证书并在微调器中显示它们...... [http://source-android.frandroid.com/packages/apps/Settings/src/com/android/settings/ vpn2/VpnDialog.java](http://source-android.frandroid.com/packages/apps/Settings/src/com/android/settings/vpn2/VpnDialog.java)

他们使用方法：

```
private void loadCertificates(Spinner spinner, String prefix, int firstId, String selected) {
    Context context = getContext();
    String first = (firstId == 0) ? "" : context.getString(firstId);
    String[] certificates = mKeyStore.saw(prefix);

    if (certificates == null || certificates.length == 0) {
        certificates = new String[] {first};
    } else {
        String[] array = new String[certificates.length + 1];
        array[0] = first;
        System.arraycopy(certificates, 0, array, 1, certificates.length);
        certificates = array;
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(
            context, android.R.layout.simple_spinner_item, certificates);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

    for (int i = 1; i < certificates.length; ++i) {
        if (certificates[i].equals(selected)) {
            spinner.setSelection(i);
            break;
        }
    }
} 
```

用这个电话：

```
loadCertificates(mIpsecUserCert, Credentials.USER_CERTIFICATE,
            0, mProfile.ipsecUserCert); 
```

现在他们使用 Credentials.USER_CERTIFICATE 作为方法 mKeyStore.saw(String prefix)

这正是我要找的，但我不能调用方法 saw 并且它也没有在 android api 中提到......

那么有没有办法让我得到同样的结果？

密钥库库无法区分用户或系统证书，如果我想将所有证书放在下拉列表中，这将花费我大量的加载时间。键入证书的主题名称并循环遍历所有证书直到正确的另一种方法对于非 IT 人员来说并不实际，因此对于普通用户来说处理起来很糟糕......

网上几乎没有关于这个话题的参考资料，这就是为什么我只在这篇文章上询问 google android pro 的原因。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:09:08.360

这是一个私有 API，它不能被第三方应用程序使用。为什么要选择用户证书？您通常需要用户的私钥，而 KeyChain API 支持让用户选择其中之一。

# multithreading - 操作系统内部的线程创建可以同时运行吗？

> ID：10176108
> 
> 赞同：0
> 
> 时间：2012-04-16T14:32:20.763
> 
> 标签：multithreading, concurrency, operating-system, creation

假设我们有一台双核机器，其主流的现代操作系统能够同时利用这两个内核。如果我在同一个进程中有两个线程，*P1*和*Q1*，并且它们碰巧在大约相同的机器周期开始创建子线程，例如*P2*和*Q2*，操作系统会同时执行线程创建吗？

我听说线​​程创建很昂贵，所以问题出现了......

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:51:06.750

任何设计合理的操作系统都可以有多个处理器同时执行内核代码。因此，线程创建中涉及的一些任务可以同时发生。但是会有一些必要的序列化来操作一些共享的数据结构（例如分配内存，将新创建的威胁结构插入到全局列表中）。处理器可以争用相同的锁，从而降低并发性。

经常创建新线程以至于线程创建的开销实际上很重要的系统/应用程序可能设计错误（相对于启动时间在线程中做的有用工作太少，并且没有利用重用短期线程的明显优化从游泳池）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:59:07.897

它将是同时进行的。线程创建的某些方面不能并行进行 - 如果内核内存管理器为两个线程分配了相同的堆栈，那将是不幸的！

线程创建非常昂贵，值得在应用程序期间完全避免这样做。运行，因此线程池的流行。长时间运行的阻塞任务可以在应用程序的生命周期内被线程化并保留 - 这通常意味着不需要显式线程终止（从用户代码来看，充其量是尴尬的，最坏的情况是几乎不可能）。

我认为开发人员不断启动和停止线程，因为他们喜欢将它们视为“函数”，您在开始时“传递参数”并在线程结束时“返回”结果。这不是概念化线程的最佳方式。

# java - java xgettext提取引用文本内的键

> ID：10176113
> 
> 赞同：0
> 
> 时间：2012-04-16T14:32:44.323
> 
> 标签：java, internationalization, extract, gettext, double-quotes

我使用 Apache Velocity 作为模板管理器，在 HTMLs 文件中我调用了 gettext，如下面的代码：

```
<img alt="$i18n.tr("Some Text")" title="$i18n.tr("Some Text")" src="http://example.com.blah.jpg"/> 
```

任何人都知道一种提取“某些文本”的方法，尽管方法周围有引号、一些关键字修饰符或类似的东西？

PD：我正在使用 --language=Java 选项，由 gettext maven 插件强制

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:29:25.430

尝试将双引号更改为单引号：

```
title="$i18n.tr('Some Text')" 
```

速度应该没问题。

# android - Android：进程内广播

> ID：10176114
> 
> 赞同：1
> 
> 时间：2012-04-16T14:32:44.993
> 
> 标签：android

Android广播是一个很好的IPC机制，但有时我只需要一个进程内的广播或事件通知。我想知道是否有类似进行中广播的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:39:14.550

使用[`LocalBroadcastManager`](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)，可在 Android 支持包中找到。[这是一个](https://github.com/commonsguy/cw-advandroid/tree/master/Broadcast/Local)演示其用法的示例应用程序。大多数情况下，它涉及调用像`registerReceiver()`和`sendBroadcast()`on这样的方法，`LocalBroadcastManager.getInstance(this)`而不是直接在 a 上调​​用`Context`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:07:13.673

您可能对[奥托](http://square.github.com/otto/)感兴趣。它是一个基于 Google Guava 的发布订阅库，专为 Android 开发。

# regex - 在 Matlab 中使用正则表达式从文本文件中返回变量的值

> ID：10176116
> 
> 赞同：1
> 
> 时间：2012-04-16T14:32:46.580
> 
> 标签：regex, matlab

我正在将一个名为“test.txt”的文本文件读入 Matlab，其结构如下：

```
$variable1 = answer1; 
$variable2 = answer2;
$variable3 = answer3; 
```

我使用以下代码段将文本文件逐行读入 Matlab：

```
fid = fopen('test.txt.');
tline = fgetl(fid);
tracks = {};
while ischar(tline)
    tracks{end+1} = regexp(tline, '(?<=^.*\=\s*)(.*)(?=\s*;$)', 'match', 'once');
    tline = fgetl(fid);
end
fclose(fid); 
```

这段代码逐行返回每个变量的值，并输出：

```
answer1
answer2
answer3 
```

我想要做的是修改我的正则表达式，以便我可以指定要检索的变量的名称，并让 Matlab 输出分配给指定变量的值。

例如，如果我在代码中指定查找 $variable2 的值，Matlab 将返回：

```
answer2 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:26:52.153

一种可能的解决方案：

```
function [tracks] = GetAnswer(Filename, VariableName)
fid = fopen(Filename);
tline = fgetl(fid);
tracks = {};

% prefix all $ in VariableName with \ for `regexp` and `regexprep`
VariableName = regexprep(VariableName, '\$', '\\$');

while ischar(tline)
    if (regexp(tline, [ '(', VariableName, ')', '( = )', '(.*)', '(;)' ]))
        tracks{end+1} = regexprep(tline, [ '(', VariableName, ')', '( = )', '(.*)', '(;)' ], '$3');
        % if you want all matches (not only the 1st one),
        % remove the following `break` line.
        break;
    end
    tline = fgetl(fid);
end

fclose(fid);
return 
```

你可以这样称呼它：

```
Answer = GetAnswer('test.txt', '$variable2')

Answer = 
'answer2' 
```

# visual-studio-2008 - 如何在 MSVC 2008 中从汇编语言调用 C 库函数？

> ID：10176120
> 
> 赞同：3
> 
> 时间：2012-04-16T14:32:57.257
> 
> 标签：visual-studio-2008

Microsoft Visual Studio Pro 2008 C++ 为编写、汇编和链接纯汇编语言程序提供了出色的 IDE。虽然我可以构建与 Win32 API 链接的 asm 程序（用于控制台输入和输出），但我无法链接到 C 运行时库。好吧，实际上它链接正常，但在运行时出现 r6032 错误 - 库未正确初始化/加载错误。有人可以告诉我如何设置 IDE（和代码）来调用 C 库函数吗？下面是调用 printf 的示例。顺便说一句，我一直在使用 msvcrt.lib。我也试过 libcmt.lib。

提前致谢。

```
 .586
        .model flat                             

        extern printf:near

        .data 
```

msgTestClib db '来自 C 库的你好。', 0

```
 .code 
```

主进程

```
 push    ebp

        mov ebp, esp

        push offset msgTestClib

        call printf

        add esp, 4

        pop ebp

        ret 
```

主要ENDP

```
 END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:38:19.493

好的，我找到了答案。实际上存在两种解决方案。但首先，错误的原因是对 VS 2005 及更高版本进行了更改，更改了程序集的组合方式，这导致了处理 VS 基础的技术信息。“如何”在这里更为重要。首先我把示例代码放上来，不管用什么方法，基本上都是一样的代码。

编码：

```
;sh3.asm - test using c run-time library functions

.586
.model flat

EXTRN   _printf:PROC

        .data 
```

msgHello DB '来自 C 库的你好！', 0ah, 00h

```
.code 
```

_main 进程

```
push OFFSET msgHello

call _printf

add esp, 4

ret 0 
```

_main ENDP

```
END 
```

好的，方法一：

1.  从一个空项目开始；添加扩展名为 .asm 的源文件并输入代码。确保使用 _main 命名代码的入口点。方法二处理使用不同的名称。

2.  接下来，通过在解决方案资源管理器中右键单击项目名称并选择自定义构建规则来设置使用 MASM 的项目；选中 Microsoft 宏汇编程序框。

3.  接下来，转到项目 -> 属性 -> 链接器 -> 附加依赖项并输入 C 运行时库名称。例如，用于发布代码的 msvcrt.lib，或用于调试阶段的 msvcrtd.lib。重要提示：不要为入口点或子系统输入任何条目。

4.  组装您的代码并运行它。

方法二：

1.  从一个空项目开始；添加扩展名为 .asm 的源文件并输入代码。使用您选择的标签命名代码的入口点。例如，开始。

2.  接下来，通过在解决方案资源管理器中右键单击项目名称并选择自定义构建规则来设置使用 MASM 的项目；选中 Microsoft 宏汇编程序框。

3.  接下来，转到项目 -> 属性 -> 链接器 -> 附加依赖项并输入 C 运行时库名称。例如，用于发布代码的 msvcrt.lib，或用于调试阶段的 msvcrtd.lib。

4.  接下来，在链接器页面中，选择系统并更改为控制台，然后转到高级并在入口点框中键入您的条目标签，例如开始。

5.  接下来，在链接器页面中，选择清单文件 -> 附加清单依赖项并输入：type='win32' name='Microsoft.VC90.CRT' version='9.0.21022.8' processorArchitecture='x86' publicKeyToken=' 1fc8b3b9a1e18e3b' 全部为一行。

6.  组装并运行您的代码。

您可能想知道人们在哪里可以找到其他依赖项的资料，因为这些信息很可能是 VS 和 Windows 版本相关的。使用方法 1 创建一个简单的项目，然后找到它的清单文件并在文本编辑器中读取它。您将看到包含信息的依赖行。

就个人而言，我发现方法 1 是完成这项工作的最简单方法。被迫将我的入口点命名为 _main 是为了灵活地使用 C 运行时库代码而付出的很小的代价。它还具有不必设置子系统的优点。现在，作为特别说明 - 如果您不使用 C 运行时库，则使用方法 2 并省略添加其他清单依赖项的步骤；不需要！

顺便说一句，我还使用对 Win32 API 和 C 运行时库的调用测试了方法 1，并且代码运行良好。换句话说，您可以在同一代码中同时使用 windows api 调用和 c 运行时库调用。

我希望这些信息有助于您使用 Visual Studio 在 Windows 中编写汇编代码。祝好运并玩得开心点！

~江市

# java - JBoss seam 和 JPA (Hibernate) 上的 Bean 验证

> ID：10176127
> 
> 赞同：0
> 
> 时间：2012-04-16T14:33:14.317
> 
> 标签：java, validation, jakarta-ee, seam, bean-validation

我创建了一个自定义约束，只希望在持久化前调用它。另外，我已经创建了验证组，并根据规范将其设置在 persistence.xml 文件中。似乎在正确的时间（预持久）调用了验证，通过我的自定义约束实现等等，但是当验证完成时我得到了下面的异常。

```
Caused by: javax.validation.ConstraintViolationException: validation failed for classes [br.com.rcetecnologia.model.Orcamento] during persist time for groups [br.com.rcetecnologia.validator.annotations.ValidateOnPersistOnly, ]
at org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:155)
at org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:94)
at org.hibernate.action.EntityInsertAction.preInsert(EntityInsertAction.java:178)
at org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:72)
at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:265)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184)
at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:795)
at org.hibernate.search.jpa.impl.FullTextEntityManagerImpl.flush(FullTextEntityManagerImpl.java:157) 
```

我的 persistence.xml 文件：

```
<persistence-unit name="pu" transaction-type="RESOURCE_LOCAL">
    ...
    <validation-mode>CALLBACK</validation-mode>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
        <property name="hibernate.hbm2ddl.auto" value="update" />
        <property name="hibernate.show_sql" value="true"/>
        <property name="hibernate.search.default.directory_provider" value="filesystem"/> 
        <property name="hibernate.search.default.indexBase" value="/Users/gyowannyqueiroz/temp/indexes"/>

        <property name="hibernate.cache.region.factory_class" value="net.sf.ehcache.hibernate.SingletonEhCacheRegionFactory"/>
        <property name="hibernate.cache.use_second_level_cache" value="true"/>
        <property name="hibernate.cache.use_query_cache" value="true"/>

        <property name="javax.persistence.validation.group.pre-persist" value="br.com.rcetecnologia.validator.annotations.ValidateOnPersistOnly" />
    </properties>
</persistence-unit> 
```

# zend-framework - 服务层是否位于控制器和模型（映射器）之间？

> ID：10176130
> 
> 赞同：3
> 
> 时间：2012-04-16T14:33:23.663
> 
> 标签：zend-framework, service-layer

我发现自己需要将一些功能移动到服务层。在这种特殊情况下，它涉及有关 zend-paginator的[示例。](http://akrabat.com/zend-framework/exploring-zend-paginator/)

在示例中，服务层只是控制器和模型之间的中间阶段。这似乎是它的预期角色，在[某些情况下](https://stackoverflow.com/questions/3744402/is-mvc-service-layer-common-in-zend-or-php)它似乎很有意义。

不过，这对我提出了一些问题。

首先，我是否可以不那么容易地将示例服务代码移动到控制器而不会受到任何真正的惩罚，这对我来说不会因为删除一层代码而受益吗？

假设将代码移动到服务层有明显的好处，那么我的映射器交互的其余部分会发生什么？控制器是否为某些任务访问服务层而为其他任务访问映射器，或者服务层是否成为所有映射器交互的代理？

对于诸如从表单创建新行之类的事情，服务层不会增加任何价值，因此它实际上相当于服务层级别的传递函数。

将它用于某些任务似乎会使以后的事情变得复杂，而将其用作代理似乎是我们故意引入代码复制和复杂性。

对“最佳实践”的任何澄清都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:26:10.793

将代码移动到控制器会产生一个胖控制器。它将应用程序与 UI 紧密结合在一起。这使得在不同的上下文中执行该操作变得困难。瘦控制器通过使用一个或多个服务来处理特定上下文中的请求以生成响应。

这些服务通过以松散耦合的方式与模型交互来定义应用程序的边界（域逻辑），这种方式可以集成到不同的上下文中。

例如，控制器与 MVC 应用程序中的服务层交互。控制台包装器可以与 cli 上的服务层交互。SOAP 或 JSON-RPC 服务器可以使用反射将服务公开为 Web 服务 API。所有这些都可以在不复制代码的情况下完成。

# php - 使用 curl 请求 API 在 Authorize.net 中获取 ARB 支付流程的日志？

> ID：10176134
> 
> 赞同：1
> 
> 时间：2012-04-16T14:33:36.420
> 
> 标签：php, zend-framework, authorize.net

如何使用 Zend Framework 获取 ARB 事务日志列表？

实际上我已经通过了 Authorize.net 的交易详细信息 api，但没有 ARB 的范围。所以任何人都可以建议我这将是解决这个问题的更好的替代解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:14:49.470

无法返回并获取有关过去订阅的详细信息。您可以做的最好的事情是在他们进行预定付款时记录当前的状态。Authorize.Net 提供了一项类似于 Paypal 的 IPN 的服务，称为[Silent Post](http://www.johnconde.net/blog/all-about-authorize-nets-silent-post/)，它发送有关为一个帐户运行的所有交易的交易信息。这包括 ARB 订阅。

这是一个基本脚本，用于[使用 PHP 处理 Silent Post 提交](http://www.johnconde.net/blog/handling-authorize-net-silent-post-with-php/)并仅处理 ARB 订阅付款：

```
<?php
// Get the subscription ID if it is available. 
// Otherwise $subscription_id will be set to zero.
$subscription_id = (int) $_POST['x_subscription_id'];

// Check to see if we got a valid subscription ID.
// If so, do something with it.
if ($subscription_id !== 0)
{
    // Get the response code. 1 is success, 2 is decline, 3 is error
    $response_code = (int) $_POST['x_response_code'];

    // Get the reason code. 8 is expired card.
    $reason_code = (int) $_POST['x_response_reason_code'];

    if ($response_code == 1)
    {
        // Approved!

        // Some useful fields might include:
        // $authorization_code = $_POST['x_auth_code'];
        // $avs_verify_result  = $_POST['x_avs_code'];
        // $transaction_id     = $_POST['x_trans_id'];
        // $customer_id        = $_POST['x_cust_id'];
    }
    else if ($response_code == 2)
    {
        // Declined
    }
    else if ($response_code == 3 && $reason_code == 8)
    {
        // An expired card
    }
    else 
    {
        // Other error
    }
}
?> 
```

*免责声明：我写了两篇博客文章*

# wordpress - Meta_query 日期问题

> ID：10176136
> 
> 赞同：0
> 
> 时间：2012-04-16T14:33:40.043
> 
> 标签：wordpress

嗨，我正在尝试显示从今天开始的所有事件。它是一个自定义字段，因此它被存储在 postmeta 表中。当我尝试比较日期时，它应该没有返回任何结果。我匹配正确的日期格式。

```
 $today = date('d/m/Y',time());
$args = array(
'post_type' => 'live',
'meta_query' => array(
                  array(
               'key' => 'date',
               'value' => $today,
               'compare' => '>=',
               'type' => 'DATE',
 )
)
); 
```

任何帮助，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:03:54.750

为了能够比较日期，您应该使用 Y/m/d 格式（或 Ymd ...等）。

使用您的参数，SQL 查询将是：

```
SELECT SQL_CALC_FOUND_ROWS wp_posts.* FROM wp_posts INNER JOIN wp_postmeta ON (wp_posts.ID = wp_postmeta.post_id) WHERE 1=1 AND wp_posts.post_type = 'live' AND (wp_posts.post_status = 'publish') AND ( (wp_postmeta.meta_key = 'date' AND CAST(wp_postmeta.meta_value AS DATE) >= '17/04/2012') ) GROUP BY wp_posts.ID ORDER BY wp_posts.post_date DESC LIMIT 0, 10 
```

哪个是错的，例如`18/03/2012 >= 17/04/2012`是真的……

如果您使用 Y/m/d 格式和以下 args ：

```
$args = array(
    'post_type' => 'live',
    'meta_query' => array(
        array(
            'key' => 'date',
            'value' => date('Y/m/d',time()),
            'compare' => '>=',
        )
    )
); 
```

它将按预期工作：

```
SELECT SQL_CALC_FOUND_ROWS wp_posts.* FROM wp_posts INNER JOIN wp_postmeta ON (wp_posts.ID = wp_postmeta.post_id) WHERE 1=1 AND wp_posts.post_type = 'live' AND (wp_posts.post_status = 'publish') AND ( (wp_postmeta.meta_key = 'date' AND CAST(wp_postmeta.meta_value AS CHAR) >= '2012/04/17') ) GROUP BY wp_posts.ID ORDER BY wp_posts.post_date DESC LIMIT 0, 10 
```

所以 ：

*   您可以修改数据库中的日期值
*   或者您可以构建自己的查询以在比较之前转换这些值

# algorithm - 找到具有最小距离的唯一样本对

> ID：10176137
> 
> 赞同：0
> 
> 时间：2012-04-16T14:33:45.287
> 
> 标签：algorithm, matlab, matrix, distance, minimum

我需要匹配两个数据集中的样本。我所拥有的是数据集中所有样本之间的距离，并将它们排列在矩阵中，如下所示。可以有不同数量的样本，因此它不是方阵。例如，

```
 3 4 
    6 2 
    1 9 
```

它是一个 3 x 2 矩阵，定义了两个数据集中样本之间的距离。我需要选择具有最小距离的样本对，这样一个样本不会被选择两次。在这里，我的答案是 3 和 1；2 和 2。第一项中的第一项被省略，因为它与其他样本没有最小值。但是，我还需要知道哪些样本没有被选中。在matlab中有没有捷径可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:44:48.390

我相信这个问题被称为[最小权重二分匹配](https://en.wikipedia.org/wiki/Matching_%28graph_theory%29#Maximum_matchings_in_bipartite_graphs)。我不确定 Matlab 是否提供了一个开箱即用的算法，但我在这里找到了一个实现（虽然没有测试）：http: [//www.mathworks.com/matlabcentral/fileexchange/11609](http://www.mathworks.com/matlabcentral/fileexchange/11609)

# android - android中的MediaStore.Images.Thumbnails.getThumbnail性能问题

> ID：10176138
> 
> 赞同：0
> 
> 时间：2012-04-16T14:33:46.433
> 
> 标签：android

我正在开发一个应用程序来在我的应用程序库中显示设备的总图像。一切正常，但我在使用 MediaStore.Images.Thumbnails.getThumbnail() 方法时遇到了性能问题。通常它返回位图有点快，但是当我将图像从 PC 转储到 android 设备时，返回位图需要很多时间。请帮助如何优化这一点。有没有更好的方法来创建缩略图而不是 MediaStore.Images.Thumbnails.getThumbnail() 方法？

谢谢，拉姆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:52:05.897

`getThumbnail`将在您的设备上创建一个缩略图 .jpg 并返回您的解码版本。如果您在设备上放置新图像，则需要更长的时间，因为 a) mediascanner 必须扫描所有新文件 b) 必须首先创建缩略图。从大图像创建缩略图可能需要一些时间。

如果您愿意，您可以自己创建图像，但我怀疑您能否更快地获得缩略图，除非您有特殊优化的本机代码。

# java - 文件名和滚动频率中的日期模式解耦

> ID：10176144
> 
> 赞同：1
> 
> 时间：2012-04-16T14:34:05.537
> 
> 标签：java, logback

我正在使用 logback，我在 TimeBasedRollingPolicy 的文件名模式中有这个

每周性能摘要-%d{yyyy-WW}.csv

这将在每周的第一天滚动文件，这是我打算做的。但它也会将该文件命名为weekly-perf-summaries-2012-02.csv，考虑到我们是在本月的第二周。要求是用当前日期命名文件，即weekly-perf-summaries-2012-04-16.csv。是否可以在文件名中指定不同的滚动频率和不同的日期模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:03:06.357

从 logback 1.0.1 开始，可以指定多个 %d 令牌，但只有一个可以是主要的，即用于推断翻转周期。所有其他标记必须通过传递 'aux' 参数标记为辅助标记。请参阅文档中的“ [fileNamePattern](http://logback.qos.ch/manual/appenders.html#TimeBasedRollingPolicy) ”。

在你的情况下，你可以写：

```
%d{yyyy-WW}/weekly-perf-summaries-%d{yyyy-MM-dd, aux}.csv 
```

在上面的示例中，文件将在由主要日期标记表示的目录中按年和周创建。目前，主要日期令牌无法保持沉默。

# javascript - Google图表中具有相同x轴的多个图表

> ID：10176148
> 
> 赞同：2
> 
> 时间：2012-04-16T14:34:10.043
> 
> 标签：javascript, graph, charts, google-visualization

我想使用多个折线图/带注释的时间线图，使用相同的 x 轴和单独的 Y 轴。

谷歌金融的做法。 [http://www.google.com/finance?q=NASDAQ:GOOG](http://www.google.com/finance?q=NASDAQ:GOOG)

滚动 x 轴时，两个图形都会移动。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:48:07.630

我不认为您作为示例引用的特定图表是使用 Google Chart Api 实现的。为此，我认为您可能必须使用第三方组件，例如 FusionCharts。

# iphone - 如何将 UIColor 值设置为 CGContextSetRGBStrokeColor

> ID：10176149
> 
> 赞同：7
> 
> 时间：2012-04-16T14:34:19.133
> 
> 标签：iphone, ipad

如何将`UIColor`值设置为`CGContextSetRGBStrokeColor`

// 这是红色，我设置为`CGContextSetRGBStrokeColor` CGContextSetRGBStrokeColor(contextRef, 1, 0, 0,1.00f);

现在我确实有具有 RGB 值的 UIColor，我需要将此值设置为`CGContextSetRGBStrokeColor`.

任何人都建议我如何设置`UIColor`值`CGContextSetRGBStrokeColor`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T20:57:09.110

选择：

```
CGContextSetStrokeColorWithColor(context, [[UIColor greenColor] CGColor]);

// or
[[UIColor colorWithRed:1.0f green:0.0f blue:0.0f alpha:1.0f] CGColor]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-17T03:07:19.673

```
CGFloat red, green, blue, alpha;
[color getRed:&red green:&green blue:&blue alpha:&alpha];
CGContextSetRGBStrokeColor(contextRef, red, green, blue, alpha); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-19T18:10:02.353

对于懒人：

```
let myUIColor = UIColor.purpleColor()
var r:CGFloat, g:CGFloat, b:CGFloat, a:CGFloat = 0
myUIColor.getRed(&r, green: &g, blue: &b, alpha: &a)
CGContextSetRGBStrokeColor(c, r, g, b, a)

// or 
CGContextSetStrokeColorWithColor(myUIColor.CGColor); 
```

#SwiftStyle

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-01T21:36:51.117

**在 Swift 3.0 中**

```
let context = UIGraphicsGetCurrentContext()
context!.setStrokeColor(red: 1,green: 1,blue: 1,alpha: 1) 
```

或者您可以按如下方式提供颜色

```
context!.setStrokeColor(UIColor.red.cgColor)//or any UIColor 
```

# .net - 非常简单的 WPF 程序在键盘布局更改时锁定（挂起）

> ID：10176150
> 
> 赞同：15
> 
> 时间：2012-04-16T14:34:23.043
> 
> 标签：.net, wpf

每当用户通过组合键更改键盘布局时，以下程序会重复锁定。如果通过托盘小程序更改键盘布局，它不会锁定。将布局更改为英文时，它不会锁定。`Task`如果从不执行，它不会锁定。

XAML：

```
<StackPanel>
    <TextBox></TextBox>
    <Button Click="Button_Click">Click me</Button>
</StackPanel> 
```

C＃：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    Task.Factory.StartNew(() =>
    {
        var visual = new DrawingVisual();
        using (var context = visual.RenderOpen())
        {
        }
    });
} 
```

在点击按钮之前，我可以随意切换键盘布局。单击后，程序会在第一次尝试切换布局时锁定。

**`Alt`重要的是，此错误仅在通过++或`Shift`++ （和，但不是）切换布局时发生。`2``Ctrl``Shift``2``3``1`**

`DrawingVisual`避免在后台线程上使用已经太晚了。这已成为产品不可或缺的核心功能。任何关于如何解决这个问题的想法都非常受欢迎。

此错误在 .NET 4.0、Win7 32 位和 64 位上重现。

**赏金**：这个bug影响的百分比很少，但它确实影响的人每次习惯性地通过快捷键更改键盘布局时都会不断导致锁定（相应的数据丢失）。我想要一种解决方法，它不会改变某些视觉效果在单独的线程上呈现的事实。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T08:51:29.270

[微软官方回答](https://connect.microsoft.com/VisualStudio/feedback/details/737116/wpf-application-lock-up-when-switching-keyboard-layouts#tabs)：

> 此问题将不会在 WPF 的下一版本中得到解决。-WPF 团队。

我猜他们都忙于 WinRT，而 WPF 则处于次要地位。

# php - XMLWriter (PHP) 的编码问题

> ID：10176152
> 
> 赞同：2
> 
> 时间：2012-04-16T14:34:32.647
> 
> 标签：php, utf-8, xmlwriter

使用这个简单的 PHP 代码：

```
$xmlWriter = new XMLWriter();
$xmlWriter->openURI('php://output');
$xmlWriter->startDocument('1.0', 'utf-8');

$xmlWriter->writeElement('test', $data);

$xmlWriter->endDocument();
$xmlWriter->flush(); 
```

XMLWriter 类有一个很好的特性：它将您提供给它的任何数据转换为输出编码。例如这里它将转换`$data`为 UTF-8，因为我传入`'utf-8'`了`startDocument`函数。

问题是，在我的情况下，内容`$data`来自输出格式为 UTF-8 的数据库，**因此已经在 UTF-8**中。XMLWriter**可能认为数据在 ISO-8859-1 中并再次将其转换为 UTF-8，我**在应该得到重音符号的地方得到奇怪的符号。

目前我正在使用`utf8_decode`来自数据库的每个字符串，这意味着我正在从 UTF-8 转换为 ISO-8859-1，然后 XMLWriter 将其转换回 UTF-8。

这有效但不干净：

```
$xmlWriter->writeElement('test', utf8_decode($data)); 
```

有更清洁的解决方案吗？

**编辑**：显示一个完整的例子

```
$xmlWriter = new XMLWriter();
$xmlWriter->openURI('php://output');
$xmlWriter->startDocument('1.0', 'utf-8');
$xmlWriter->startElement('usersList');

$database = new PDO('mysql:host=localhost;dbname=xxxxx', 'xxxxx', 'xxxxx');
$database->exec('SET CHARACTER SET UTF8');
$database->exec('SET NAMES UTF8');
foreach ($database->query('SELECT name FROM usersList') as $user)
   $xmlWriter->writeElement('user', $user[0]);   // if the user's name is 'hervé' in the database, it will print 'hervÃ©' instead

$xmlWriter->endElement();
$xmlWriter->endDocument();
$xmlWriter->flush(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T14:54:20.283

我不确定你从哪里得到`XMLWriter`转换编码的想法。它没有。您*必须*为它提供 utf-8。它可以输出不同的编码，但输入字符串必须是utf-8。

这里可能会发生两件事之一：

1.  无论您使用什么来*查看*输出文档，都将字符串解释为 win-1252。如果您在浏览器中查看输出，则可能需要像这样设置内容类型标头：`header('Content-Type: application/xml; charset=UTF-8');`
2.  您将数据错误地存储在数据库中，并且您的“é”实际上是两个 unicode 字符“Ã©”。解决这个问题很困难。

# objective-c - tableview 刷新 json 提要

> ID：10176154
> 
> 赞同：0
> 
> 时间：2012-04-16T14:34:37.510
> 
> 标签：objective-c, xcode

我正在尝试使用来自 JSON 提要的新数据重新加载我的应用程序。我会尝试；

```
- (void) Refresh {
[self performSelector:(@selector(refreshDisplay:)) withObject:(_tableView) afterDelay:0.5];
} 
```

和

```
- (void)refreshDisplay:(UITableView *)tableView {

    [_tableView reloadData]; 
} 
```

下载 JSON：

```
 NSString *jsonString = [NSString 
                                stringWithContentsOfURL:[NSURL URLWithString:xmlDataUrl] 
                                encoding:NSUTF8StringEncoding
                                error:nil];

        SBJSON *parser = [[SBJSON alloc] init];
        NSDictionary *results = [parser objectWithString:jsonString error:nil];

        parser = nil;

        [self setTableData:nil];
        [self setTableData:[results objectForKey:@"feed"]]; 
```

但它没有从 JSON 重新加载我的新数据，有谁知道我如何使用从在线 JSON 提要下载的新数据更新 tableview？我需要从 JSON 提要中删除旧数据并插入新数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:40:17.140

你确定你的数据真的在改变吗？您可以在您的方法中放置一些`NSLog`s`-tableView:cellForRowAtIndexPath:`以确保它被调用。看起来你的问题是你只是告诉它在半秒后刷新，到那时数据可能还没有加载。我建议你把`[tableView reloadData]`调用放在真正完成更新数据的方法中，这样你就知道在你调用它的时候它已经完成了。

还要注意这个方法：

```
- (void)refreshDisplay:(UITableView *)tableView {
    [_tableView reloadData]; 
} 
```

不需要。首先，它忽略参数并调用`reloadData`您的 ivar `_tableView`。其次，如果您只想在半秒后重新加载数据，您可以调用：

```
[_tableView performSelector:@selector(reloadData) withObject:nil afterDelay:.5]; 
```

此外，基于这样一个事实，`_tableView`如果你有一个`@synthesize tableView=_tableView`你最好在`self.tableView`任何你可以使用的地方调用它，因为这避免了直接访问 ivar 并且被认为是“良好的形式”。

`reloadData`重申一下，在调用tableview 之前，请确保您的数据源实际上正在更新数据。

## 编辑

在您更新的帖子中，只需`[self.tableView reloadData];`在 JSON 解析代码的末尾添加即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:45:32.903

该代码将让 tableview 检索其数据源对象必须提供的数据，但它不会执行任何从您的提要重新加载的操作。您需要确保 UITableViewDataSource 对象的方法从更新的 JSON 提要返回数据。您的 refreshDisplay 方法可以告诉数据源首先从 JSON 提要更新自身，然后再告诉表重新加载数据。

# matlab - 广义霍夫 R 表

> ID：10176157
> 
> 赞同：4
> 
> 时间：2012-04-16T14:34:51.767
> 
> 标签：matlab, hough-transform

我正在尝试在 MATLAB中实现[本文中介绍的广义霍夫变换。](http://www.cs.utexas.edu/~dana/HoughT.pdf)我也尝试使用[这个文档](https://www.cse.unr.edu/~bebis/CS791E/Notes/GeneralizedHough.pdf)来理解算法。我一直在弄清楚如何计算梯度角以找到要在 R 表中使用的 Φ。

我试图运行这个[matlab 实现](http://www.irit.fr/~Julien.Pinquier/Docs/Hough_transform.html)，但轮廓函数试图访问负索引。缺少的功能如下。

距离.m

```
function [ d ] = distance( x1, y1, x2, y2 )
  d = sqrt( (x2-x1)^2 + (y2-y1)^2 );   
end 
```

重心.m

```
function [ xo, yo ] = barycenter( img )
%   gravitational center coordinates of a shape 

  [rows, cols] = size(img);
  x = ones(rows, 1)*(1:cols);
  y = (1:rows)'*ones(1,cols);
  area = sum(sum(img));
  xo = sum(sum(double(img) .* x)) / area;
  yo = sum(sum(double(img) .* y)) / area;

end 
```

模型霍夫.m

```
function [H]=ModelHough(imgRGB)
% Generalized Hough Transform Modeling

% Image Binarization
imgBW = rgb2gray(imgRGB);
imgBI = imgBW < 255;

% Retrieving information about the contour: points and number (N)
N = contour(imgBI);

% Model initialization:
    % row = beta value * 100
    % column = number of the couple (alpha, distance)
    % 3rd dimension: 1 = alpha, 2 = distance
H=zeros(round(100*2*pi),N,2);

% Compute of the barycenter coordinates
[ xo, yo ] = barycenter(imgBI);

% for each contour point
for i=1:N

    % beta compute for ith contour point
    b = beta(N, imgBI, i);

    % research of the first column
    k=1;
    while H(b+1,k,2)~=0
       k=k+1;
    end

    % compute of the alpha value
    H(b+1, k, 1) = alpha(N, i, imgBI);

    % compute of the distance value
    H(b+1, k, 2) = distance( xo, yo, i, b );

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T21:25:50.370

使用合适的边缘检测器。您可以从[Sobel 运算符](http://en.wikipedia.org/wiki/Sobel_operator)开始。如 wiki 文章中所述，梯度角为 atan(Gy/Gx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T17:00:27.317

如果您使用通用边缘检测器来检测边缘，则应将`countor.m`第 14 行更改为如下所示：

```
while (img(i,j)~=1) 
```

# r - 在 data.frame 中查找序列的开始和结束

> ID：10176167
> 
> 赞同：2
> 
> 时间：2012-04-16T14:35:15.483
> 
> 标签：r, dataframe

我有一个很长的数据框，我想找到一个序列的结尾和开头。简化

```
b = c("a","c","a","c","e", "a","c","a","c","a" ,"c","a","c","a","c" ,"d","d","d","d","d")
a = c(0,0,0,0,1, 4,0,0,0,0, 5,1,6,0,0, 0,10,0,0,0)
df = data.frame(a,b) 
```

我想要的是找到所有非零到 0 和 0 到非零转换的方法。

我通过使用`lapply`调用函数并保存上一次调用的值来完成此操作。

我正在寻找更优雅的东西，可以让我查看第 N 行和第 N+1 行，或者更好的是我的函数中的第 N 行到第 N+M 行，或者更好的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:01:19.903

也许这就是你想要的？它可能不优雅，但它应该检测您描述的转换。

```
> lagn <- function(x, n) { c(rep(NA,n), x[1:(length(x)-n)]) }
> df$c <- lagn(df$a, 1)
# mult ensures one of the item is zero, add ensures one of the item was nonzero
> df[which( (df$a*df$c)==0 & (df$a+df$c)!=0),]
    a b  c
5   1 e  0
7   0 c  4
11  5 c  0
14  0 a  6
17 10 d  0
18  0 d 10 
```

# javascript - 使用jquery从span标签中删除€符号

> ID：10176169
> 
> 赞同：1
> 
> 时间：2012-04-16T14:35:16.387
> 
> 标签：javascript, jquery, currency

我有一个跨度标签：

```
<span style="color:red" class="LevelPrice">Fachhandel&nbsp;Preis&nbsp;320,00 € (CHF)</span> 
```

是否可以在页面加载时通过 javascript 或 jquery 删除 € 符号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:37:07.630

```
$(document).ready(function(){
    $('.LevelPrice').text($('.LevelPrice').text().replace('€', ''));
}); 
```

你也可以使用`replace(/€/g, '')`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T14:38:22.247

```
$('span.LevelPrice').html(function(i, html) {
     return html.replace(/€/g, '');
});​ 
```

工作示例 - [http://jsfiddle.net/PYxkE/4/](http://jsfiddle.net/PYxkE/4/)

# file - cgicc：上传大文件？

> ID：10176172
> 
> 赞同：2
> 
> 时间：2012-04-16T14:35:21.363
> 
> 标签：file, upload, cgi

我正在使用 cgicc 用 C++ 编写一个 CGI 应用程序，在嵌入式设备上运行。现在我到了需要将大文件上传到设备（用于更新的固件包）的地步。现在我意识到两个问题：

1.) Web 服务器（当前为 lighttpd）在启动 CGI 应用程序之前将文件存储在一个临时文件中。

2.) cgicc 在继续之前尝试将完整的数据加载到分配的内存中。

第 1 点）是另一个问题，现在更重要的是第 2 点）。有没有办法告诉 cgicc 一次一块地读取文件？否则我会遇到OOM的麻烦。

欢迎任何其他可以提供帮助的建议！

谢谢，安迪

# css - 是否可以在另一个包含 CSS 中特定子项的 div 中选择一个 div

> ID：10176174
> 
> 赞同：0
> 
> 时间：2012-04-16T14:35:33.097
> 
> 标签：css, css-selectors

在 CSS 中，有没有办法在另一个包含特定子项的 div 中选择一个 div，如下所示：

![](../Images/ea275ae525f1b53d4b77a4c221a9bb65.png)

我知道它可以使用 jQuery 来完成，但我正在寻找一种只使用 CSS 来完成它的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:40:54.673

这对于普通的 CSS 是不可能的

您只能在选择器是父母的情况下制定规则，而您的锚不是`.content.clearfix`

然而，这可以使用 jQuery 来完成。这是一个例子：

[http://jsfiddle.net/Curt/b95TB/](http://jsfiddle.net/Curt/b95TB/)

# c# - QTP dll 库 - 参数

> ID：10176177
> 
> 赞同：0
> 
> 时间：2012-04-16T14:35:49.710
> 
> 标签：c#, .net, vbscript, qtp

大家下午好

我目前正在使用 MVC.Net 开发一个集成测试门户。

我正在尝试将 VB 自定义通信脚本迁移到 C# 服务。我已经成功迁移了一些较新的 QTP 脚本，但是却卡在了公司需要的几个旧脚本上。

QTP 脚本本身可以正常加载，直到使用以下 VB 代码行设置自定义参数：

```
Set oParameters = oQTPApplication.Test.ParameterDefinitions.GetParameters()
oParameters.Item("sEnvironment").Value = sEnvironmentForDataTable 
```

一旦代码运行了各种其他设置（在成功打开并连接到 QTP 之后，并点击转换后的行：

**方法一：**

```
var parameters = this.Connection.Test.ParameterDefinitions.GetParameters();
parameters["sEnvironment"].Value = this.Test.TestEnvironment; 
```

**方法二：**

```
this.Connection.Test.ParameterDefinitions["sEnvironment"].DefaultValue = this.Test.TestEnvironment; 
```

**两者都抛出异常：**

> System.Runtime.InteropServices.COMException
> 
> 未找到元素。（来自 HRESULT 的异常：0x8002802B (TYPE_E_ELEMENTNOTFOUND)）
> 
> 在 System.RuntimeType.ForwardCallToInvokeMember(String memberName, BindingFlags flags, Object target, Int32[] aWrapperTypes, MessageData& msgData) 在 QTObjectModelLib.ParameterDefinitions.get_Item(Object Position) 在 TestLayer.Tests.Utilities.Qtp5Connection.SetTestSpecificParams()

界面似乎正在尝试查找指定的参数，但是在这种情况下，我已经知道它不存在并希望它添加参数。要在脚本中使用，但对于我的一生 - 我找不到在 C# 中添加自定义参数的方法。我假设这是在 VB 工作时工作的......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:24:27.160

自从我发布并找到解决方案以来，我一直在解决这个问题。

您确实使用了**方法 1**，但是您需要确保已打开预期的脚本。我假设您要连接的 QTP 脚本需要设置为接收参数。

因此，为了实现这一目标，我在代码中采取了以下步骤：

1.  打开 QTP 连接
2.  打开 QTP 脚本
3.  设置恢复和资源 - inc 参数
4.  运行测试

我希望在这种情况下这对其他人有用。

# dll - 在 MonoDevelop 中添加 COM 库引用

> ID：10176178
> 
> 赞同：1
> 
> 时间：2012-04-16T14:35:54.353
> 
> 标签：dll, reference, mono, monodevelop

我已经下载了一个 .exe 文件，在执行时（在 wine 中）它会将两个 dll 放在 system32 文件夹中，并将一个 dll 放在“Common files/App-name/”文件夹中。

理论上，安装此文件会在 Visual Studio 中创建一个选项卡，该选项卡会在引用时出现，并且它是一个 COM 库。

我试图在我的控制台项目中引用这些 dll，但我收到一条消息“不是有效的 .Net 程序集”。

有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:02:11.370

MonoDevelop 不支持直接添加 COM 引用。您必须使用[tlbimp.exe](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28VS.80%29.aspx)来生成包装 dll，然后引用它。这本质上是 VS 在您引用本机 COM dll 时透明地执行的操作。

# c# - 分配给类 Integer[] 时出现 NullReference 异常

> ID：10176180
> 
> 赞同：0
> 
> 时间：2012-04-16T14:36:13.293
> 
> 标签：c#, winforms, exception-handling, datagridview, nullreferenceexception

我希望能够将值从 Form1 中的一个 DataGridView 传输到 Form3 中的另一个 DataGridView。为此，我选择在 3 个不同的变量中过滤它们，这些变量将在类中，以便稍后在 Form3 中访问它们。

这些是类：（我已经将它们作为一个具有 3 个变量的类）

```
public class verify1
{
    public static int[] CodUser { get; set; }
}

public class verify2
{
    public static DateTime[] DataFim{ get; set; }
}

public class verify3
{
    public static string[] Nome { get; set; }
} 
```

尽管如此，当我为变量赋值时，我在第一次运行 for 时得到了 NullReferenceException。

这是我用来赋值的代码：

```
int a = 0;
for (int i = 0; i < dataGridView1.RowCount - 1; i++)
{    
    DateTime date = Convert.ToDateTime(dataGridView1.Rows[i].Cells[2].Value);   
    if (date <= DateTime.Now)   
    {   
        verify1.CodUser[a] = Convert.ToInt32(dataGridView1.Rows[i].Cells[0].FormattedValue);    
        verify2.DataFim[a] = Convert.ToDateTime(dataGridView1.Rows[i].Cells[2].FormattedValue);
        verify3.Nome[a] = Convert.ToString(dataGridView1.Rows[i].Cells[3].Value);   
        a++;   
    }
} 
```

现在，我不明白为什么 Visual Studio 说该值为空。异常发生在以下行：

```
verify1.CodUser[a] =   Convert.ToInt32(dataGridView1.Rows[i].Cells[0].FormattedValue); 
```

（即17389）首先，不会让我走得更远。我不明白为什么它返回null。顺便说一句，DataGridView 完全由数据实现。

为什么它返回null？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:38:59.627

您在`verify1`类中定义了公共属性，但您从不初始化它们。它们是空的。

您需要在使用它们之前初始化数组：

```
int a = 0;
int rowCount = dataGridView1.RowCount;
verify1.CodUser = new int[rowCount];
verify2.DataFim = new DateTime[rowCount];
verify3.Nome = new string[rowCount]; 
```

您可能还想再看看如何正确使用类。我猜你不需要三个单独的类，每个类都有一个静态属性。看起来你应该有一个`VerifyInfo`包含三个字段的类。然后，您可以将它们存储在`List<T>`：

```
public class VerifyInfo
{
    public int CodUser { get; set; }
    public DateTime DataFim { get; set; }
    public string Nome { get; set; }
} 
```

然后你的循环代码会更干净：

```
var verifyInfos = new List<VerifyInfo>();

for(int i = 0; i < dataGridView1.RowCount - 1; i++)
{
    var date = Convert.ToDateTime(
        dataGridView1.Rows[i].Cells[2].Value);

    if(date <= DateTime.Now)
    {
        verifyInfos.Add(new VerifyInfo
        {
            CodUser = Convert.ToInt32(dataGridView1.Rows[i].Cells[2].Value),
            DataFim = Convert.ToDateTime(
                dataGridView1.Rows[i].Cells[2].FormattedValue),
            Nome = Convert.ToString(dataGridView1.Rows[i].Cells[3].Value)
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:38:56.430

自动属性会自动初始化为返回类型的**默认值**。您正在处理*引用类型* `Array`。引用*类型*的默认**值为**。*`null`*

 *在这种情况下，最好避免使用自动属性，而是使用普通属性。

例子：

```
public class verify1
{
    static List<int> codUser = new List<int>(); //definition
    public static List<int> CodUser
    { 
       get { return codUser;} 
       set {codUser = value;} 
     }
} 
```

在这种情况下，我特别使用了 a `List<T>`，因为在声明时您不知道数组的 excat 大小，而且根据提供的代码，它可能会有所不同。

**编辑**

可以像这样使用它（在实践中就像你以前一样）

```
for (int i = 0; i < dataGridView1.RowCount - 1; i++)
{    
    DateTime date = Convert.ToDateTime(dataGridView1.Rows[i].Cells[2].Value);   
    if (date <= DateTime.Now)   
    {   
        verify1.CodUser[a].Add( Convert.ToInt32(dataGridView1.Rows[i].Cells[0].FormattedValue));    
        ......
        ....  
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T14:40:31.833

verify1.CodUser 不是 null 吗？你如何创造它？

编辑：

我已经编辑了我的答案以回复布鲁诺的评论。您必须先初始化数组才能使用它们。为了做一个简单的测试，请创建一个单独的项目，粘贴这两行，在调试模式下运行你的项目，并在创建 array2 后设置断点：

Int32[] 数组1；Int32[] array2 = new Int32[3];

你在第一个数组中看到了什么？它是空的，因为它没有被初始化。您所要做的就是像我对array2 所做的那样初始化您的数组。

希望这会有所帮助，Piotr

*抱歉格式化，stackoverflow javascript 以某种方式被我阻止了。*

# c++ - 使用 OpenCV，尝试提取 ArrayOfArrays 描述的图片区域

> ID：10176184
> 
> 赞同：10
> 
> 时间：2012-04-16T14:36:22.573
> 
> 标签：c++, opencv, contour

我正在 iOS 中开发一些图像处理工具。目前，我计算了一个特征轮廓，其类型为 InputArrayOfArrays。

声明为：

```
std::vector<std::vector<cv::Point> > contours_final( temp_contours.size() ); 
```

现在，我想提取由轮廓圈出的原始 RGB 图片的区域，并可能进一步将子图像存储为 cv::Mat 格式。我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-17T06:54:35.333

我猜你想要做的只是提取检测到的轮廓中的区域。这是一个可能的解决方案：

```
using namespace cv;

int main(void)
{
    vector<Mat> subregions;
    // contours_final is as given above in your code
    for (int i = 0; i < contours_final.size(); i++)
    {
        // Get bounding box for contour
        Rect roi = boundingRect(contours_final[i]); // This is a OpenCV function

        // Create a mask for each contour to mask out that region from image.
        Mat mask = Mat::zeros(image.size(), CV_8UC1);
        drawContours(mask, contours_final, i, Scalar(255), CV_FILLED); // This is a OpenCV function

        // At this point, mask has value of 255 for pixels within the contour and value of 0 for those not in contour.

        // Extract region using mask for region
        Mat contourRegion;
        Mat imageROI;
        image.copyTo(imageROI, mask); // 'image' is the image you used to compute the contours.
        contourRegion = imageROI(roi);
        // Mat maskROI = mask(roi); // Save this if you want a mask for pixels within the contour in contourRegion. 

        // Store contourRegion. contourRegion is a rectangular image the size of the bounding rect for the contour 
        // BUT only pixels within the contour is visible. All other pixels are set to (0,0,0).
        subregions.push_back(contourRegion);
    }

    return 0;
} 
```

如果您想以支持透明度的格式（例如 png）保存子区域，您可能还需要考虑保存单个蒙版以选择性地用作 Alpha 通道。

注意：我没有为每个轮廓提取边界框中的所有像素，只提取轮廓内的像素。不在轮廓内但在边界框中的像素设置为 0。原因是您的 Mat 对象是一个数组，这使它成为矩形。

最后，我认为您没有任何理由将轮廓中的像素保存在专门创建的数据结构中，因为您需要存储每个像素的位置才能重新创建图像。如果您关心的是节省空间，那根本不会为您节省太多空间。保存最紧密的边界框就足够了。相反，如果您只想分析轮廓区域中的像素，则为每个轮廓保存一个掩码副本，以便您可以使用它来检查轮廓内的像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:48:52.513

您正在寻找`cv::approxPolyDP()`连接点的功能。

[我在这篇文章](https://stackoverflow.com/a/8863060/176769)中分享了整个过程的类似用法。通话后检查`for`循环。`findContours()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:32:12.273

我认为您正在寻找的是 cv::boundingRect()。像这样的东西：

```
using namespace cv;
Mat img = ...;
...
vector<Mat> roiVector;
for(vector<vector<Point> >::iterator it=contours.begin(); it<contours.end(); it++) {
    if (boundingRect( (*it)).area()>minArea) {
        roiVector.push_back(img(boundingRect(*it)));
    }
} 
```

cv::boundingRect() 接受一个点向量并返回一个 cv::Rect。初始化 Mat myRoi = img(myRect) 会为您提供指向图像该部分的指针（因此修改 myRoi 也会修改 img）。

[在这里](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=boundingrect#Rect%20boundingRect%28InputArray%20points%29)查看更多。

# iphone - Cocos2d：将图层缩放到精灵

> ID：10176186
> 
> 赞同：0
> 
> 时间：2012-04-16T14:36:37.317
> 
> 标签：iphone, cocos2d-iphone

我在解决这个看似微不足道的功能时遇到了一些问题。在我的游戏中，在关卡的某个时刻，我停止了主游戏循环并想要缩放到玩家精灵。播放器精灵被添加到包含此循环的图层并运行代码以缩放到此播放器。

它看起来像这样：

```
-(void) stopGameAndZoomToPlayer {
    [gamePlayLoop_ invalidate];

    zoomToPlayerLoop_ = [NSTimer scheduledTimerWithTimeInterval:1.0f/60.0f target:self selector:@selector(tickZoomToPlayerLoop:) userInfo:nil repeats:YES];
} 
```

tick 方法现在是这样实现的：

```
-(void) tickZoomToPlayerLoop:(NSTimer*)timer {
    if (self.scale > 4) {
        [zoomToPlayerLoop_ invalidate];
    }
    [self setScale:self.scale+0.001];   

    CGSize winSize =  [[CCDirector sharedDirector]winSize]; 
    CGPoint targetPosition = playerSprite_.position;

    float wantedX = ((winSize.width/2-targetPosition.x)/self.scale);
    float wantedY = ((winSize.height/2-targetPosition.y)/self.scale);
    CGPoint maximumCenter = ccp(wantedX,wantedY);

    [self setPosition:maximumCenter];     
} 
```

看起来微不足道吧？然而，我必须缺少一些东西，因为缩放虽然很慢，但相对于玩家精灵是偏移的。**播放器精灵，在 tickZoomToPlayerLoop 计时器结束时，出现在屏幕的右上角；它不在中心**（但甚至不在视口右上角的中心）。

在我看来，**这段代码将主层的中心放在玩家精灵的位置。然后它缩放**。实际上这个位置不应该在缩放循环中，但我把它放在这里是因为我需要处理关卡层的边界，因为现在用户可以看到关卡之外的不可播放区域的黑色空白。然而，即使循环开始时主层的中心似乎是玩家精灵，但在缩放时，我们可以看到它不是。

**比例尺是否针对 CCNode 的中心？它是否以任何方式抵消？锚点是否在缩放完成方式中起作用？**

更多信息：

*   主层的锚点是 (0.5,0.5) - 默认一个
*   主层的位置，首先在计时器之前，(0,0) - 在创建场景时添加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:05:44.840

根据我的知识缩放受锚点的影响。如果您需要做的只是放大而不使用 CCCamera？

```
[myLayer.camera setEyeX:0 eyeY:0 eyeZ:zoomValue]; 
```

您可以更改 eyeZ 以放大和缩小。

# ruby - 具有不同日期/时间格式的 ActiveRecord

> ID：10176192
> 
> 赞同：1
> 
> 时间：2012-04-16T14:36:52.433
> 
> 标签：ruby, ruby-on-rails-3, datetime, activerecord

我们有一个应用程序，用户可以在其中设置他/她的首选日期/时间格式。用户应`datetime`在整个应用程序中以配置的格式输入。现在的问题是，对于少数格式，`datetime`在`create/update` `ActiveRecord`.

例如，用户已在 中设置日期/时间格式`hh:mm dd/MM/yyyy`。现在，如果用户输入`17:00 04/05/2012`它会将其解析为`5 PM 5 Apr, 2012`应在的位置`5 PM 4 May, 2012`

```
1.8.7 :004 > a = Article.create!(:name => 'a1', :published_at => '17:00 04/05/2012')
 => #<Article id: 2, name: "a1", published_at: "2012-04-05 17:00:00", created_at: "2012-04-16 13:54:36", updated_at: "2012-04-16 13:54:36"> 
```

我知道 ruby​​/rails 具有预定义的一组格式，可以根据这些格式评估日期/时间字符串，如果按顺序匹配任何格式，它会解析具有该格式的给定字符串。

另一个例子

```
1.8.7 :006 > a = Article.create!(:name => 'a1', :published_at => '17:00 15/12/2012')
 => #<Article id: 4, name: "a1", published_at: nil, created_at: "2012-04-16 13:55:43", updated_at: "2012-04-16 13:55:43"> 
```

此处用户输入`15 December, 2012`的内容被解析为`nil`

有人已经[在这里](https://stackoverflow.com/q/2529990)和[ruby​​-forum](http://www.ruby-forum.com/topic/57923)上问过类似的问题，但该解决方案不适用于我的情况，因为我无法在应用程序中配置单一的日期时间格式，因为每个用户都有自己喜欢的日期时间格式。

现在要使用多种`datetime`格式，我计划在`params`传递给`ActiveRecord`. 所以步骤想

1.  `datetime`从`params`地图读取
2.  用用户喜欢的日期时间格式解析它
3.  格式化`datetime`为使用的默认格式`ActiveRecord`
4.  用重新格式化的日期时间替换当前`datetime`输入`params`

这是控制器的片段

```
class ArticlesController < ApplicationController
  before_filter :format_date_time, :only => [:create, :update]
  ...
  ...
  private
    def format_date_time
      datetime = params[:datetime]
      params[:datetime] = DateTime.strptime(datetime, pref_date_time_format).strftime('%c')
    end
end 
```

有人可以验证它是否是正确的方法吗？如果有人提出更好的方法来实现这一点，我将不胜感激。

谢谢，阿米特帕特尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:37:42.250

我会采用我提到的方法。如果有人有更好的方法，请继续分享。

谢谢，阿米特帕特尔

# php - 数据库敏感信息放在哪里

> ID：10176193
> 
> 赞同：14
> 
> 时间：2012-04-16T14:36:52.987
> 
> 标签：php, database, connection-string

> **可能重复：**
> [如何在 PHP 中保护数据库密码？](https://stackoverflow.com/questions/97984/how-to-secure-database-passwords-in-php)

最近我得到了一个应该用 PHP 完成的网站项目，但我在 PHP 方面没有太多经验。无论如何，它已经启动并运行，但还有很大的改进空间。我感觉不舒服的一件事是我处理数据库的方式：我将数据库连接信息放在一个单独的 db.php 文件中，并在需要的地方包含它。但我记得多次看到服务器返回的 PHP 源文件。

所以现在我的问题是：放置数据库敏感数据的更好或最佳方式/位置是什么？

顺便说一句，当出现问题时，如何不让 PHP 在网页上显示错误消息？php.ini 中某处的自定义错误页面或设置？谢谢！

**注意：我使用 PHP 的方式是旧式的，而不是面向对象的方式。但是，如果有更好的方法来为未来的项目做准备，我对面向对象或 MVC 方式持开放态度**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T14:44:26.487

我不知道这是否是您要查找的内容：
您可以将敏感数据放在 db.php 中，但要放在 web 根目录之外（public_html 或 www）。

例如，您可以有一个名为 config 的目录，它是您的 Web 根目录的同级目录，并将您的 db.php 文件存储在那里。

您可以像这样包含您的 db.php 文件：

```
require_once('../config/db.php'); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:53:33.140

我会亲自创建一个名为 db.php 的文件并将其放在服务器上的 public_html 文件夹上方

例如

```
<?php
    error_reporting(0);
    $link = FALSE;
    $link = mysql_connect('hostname', 'username', 'password');
    if ( ! $link)
    {
        die("Couldn't connect to mysql server!");
    } else {
        mysql_select_db('databasename');
    }
?> 
```

这会在连接到数据库的同时关闭错误报告，在 index.php 中，您可以像这样包含该文件：

```
<?php require('../db.php'); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T14:44:26.740

可以将其放在 db.php 文件中，只需`require_once()`在每个文档的开始`<?php`标记之后使用即可。

如果 basedir 限制无效，请将 db.php 文件移到您的 web/ftp 根目录之外，这样绝对无法通过 http/ftp 访问它。不过，请确保在此文件上正确设置了权限。

由于您的代码没有使用 OOP 或 MVC 结构，因此这是最好的方法。

# python - Python 语法：在 timeit 语句中使用循环

> ID：10176194
> 
> 赞同：3
> 
> 时间：2012-04-16T14:36:55.737
> 
> 标签：python, timeit

其中两个语句运行，而另一个因语法错误而失败。我究竟做错了什么？

```
>>> Timer('for i in xrange(10): oct(i)').repeat(3)
[2.7091379165649414, 2.6934919357299805, 2.689150094985962]
>>> Timer('n = [] ; n = [oct(i) for i in xrange(10)]').repeat(3)
[4.0500171184539795, 3.6979520320892334, 3.701982021331787]
>>> Timer('n = [] ; for i in xrange(10): n.append(oct(i))').repeat(3)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/timeit.py", line 136, in __init__
    code = compile(src, dummy_src_name, "exec")
  File "<timeit-src>", line 6
    n = [] ; for i in xrange(10): n.append(oct(i))
               ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T14:46:19.827

您失败的陈述在语法上不正确。如果您需要在一个函数中定义多个语句的时间并调用 Timer，则在从 main 导入函数后

```
>>> def foo():
    n = []
    for i in xrange(10): n.append(oct(i))    

>>> Timer("foo()","from __main__ import foo") 
```

现在您需要了解为什么失败的语句不正确

[复合语句](http://docs.python.org/reference/compound_stmts.html)的文档摘录

一个套件可以是一个或多个以分号分隔的简单语句，位于与标题相同的行上，位于标题的冒号之后，或者它可以是一个或多个在后续行中的缩进语句。

```
stmt_list     ::=  simple_stmt (";" simple_stmt)* [";"] 
```

同样，一个[简单的语句](http://docs.python.org/reference/simple_stmts.html#grammar-token-simple_stmt)是

```
simple_stmt ::=  expression_stmt
                 | assert_stmt
                 | assignment_stmt
                 | augmented_assignment_stmt
                 | pass_stmt
                 | del_stmt
                 | print_stmt
                 | return_stmt
                 | yield_stmt
                 | raise_stmt
                 | break_stmt
                 | continue_stmt
                 | import_stmt
                 | global_stmt
                 | exec_stmt 
```

您现在应该清楚何时可以（不应该）使用分号。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T14:41:57.080

```
Timer('n = []\nfor i in xrange(10): n.append(oct(i))').repeat(3)
[2.026008492408778, 2.065228002189059, 2.048982731136192] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-26T16:17:36.110

您也可以使用[三引号](https://docs.python.org/3/tutorial/introduction.html#strings)：

```
statement = '''n = []
for i in xrange(10):
    n.append(oct(i))'''

Timer(statement).repeat(3) 
```

# c# - 使用 LINQ 进行全文搜索，减少每个关键字的结果

> ID：10176204
> 
> 赞同：0
> 
> 时间：2012-04-16T14:37:27.753
> 
> 标签：c#, asp.net, sql-server, linq-to-sql

我按照[这个 SO question](https://stackoverflow.com/questions/224475/is-it-possible-to-use-full-text-search-fts-with-linq)中的指示创建了一个 linq 函数来对我拥有的食物数据库进行全文搜索。这个数据库中有超过 7000 条记录，我添加的每个关键字的结果都会变大而不是变小。

这是我的功能的主要内容：

```
SELECT *
FROM USDA_Foods AS FT_TBL 
    INNER JOIN FREETEXTTABLE(USDA_Foods,
    Shrt_Desc, 
    @searchWord) AS KEY_TBL
ON FT_TBL.foodId = KEY_TBL.[KEY] 
```

如何通过更改上面的代码来减少每个新关键字的结果？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:39:48.927

您会得到更多结果，因为它可以在搜索列中查找任何单词，而不是像您期望的那样包含所有单词。你不能在 FREETEXTTABLE 中使用 AND 或任何东西，所以你必须使用类似 CONTAINSTABLE 的东西，它允许你在提供的单词之间使用 AND。

[CONTAINSTABLE (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189760.aspx)

在此处查看示例“I. Using CONTAINS with a logic operator (AND)”：

[包含 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187787.aspx)

该语法对 CONTAINSTABLE 也有效。

```
SELECT *
FROM USDA_Foods AS FT_TBL 
    INNER JOIN CONTAINSTABLE(USDA_Foods,
    Shrt_Desc, 
    @searchWord) AS KEY_TBL
ON FT_TBL.foodId = KEY_TBL.[KEY] 
```

你`@searchWord`应该看起来像

```
'here AND there AND everywhere' 
```

查找包含此处、那里和任何地方的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:37:08.977

为每个搜索词连接 INNER JOINS。

```
SELECT * 
FROM USDA_Foods AS FT_TBL 
    INNER JOIN FREETEXTTABLE(USDA_Foods,
    Shrt_Desc, 
    @searchWord1) AS KEY_TBL1
ON FT_TBL.foodId = KEY_TBL1.[KEY]
    INNER JOIN FREETEXTTABLE(USDA_Foods,
    Shrt_Desc, 
    @searchWord2) AS KEY_TBL2
ON FT_TBL.foodId = KEY_TBL2.[KEY] 
```

# javascript - 使用 javascript 的新离线访问令牌实现 Facebook 应用程序

> ID：10176205
> 
> 赞同：1
> 
> 时间：2012-04-16T14:37:27.960
> 
> 标签：javascript, facebook, facebook-javascript-sdk, facebook-oauth, facebook-access-token

我一直在使用 JavaScript SDK 使用 Facebook OAuth 2.0。我看到 Facebook 最近更改了“无限”过期时间访问令牌功能，现在获得了一个用于离线访问的访问令牌，最长有效期为 60 天。

我尝试了以下代码：

```
FB.init({appId: 'XXXXXXXXXXXX', oauth: true , secret: 'XXXXXXXXXXXXXXXXXXXXXXXXX' });
// the real values of appId and secret are not displayed for obv reasons
FB.login(function(response) 
{
  if(response.authResponse){

}
else{
 console.log('User cancelled login or did not fully authorize.');
}
}, {scope: 'read_stream,publish_stream,offline_access'}); 
```

在我的回复中：response.authResponse，我收到一个访问令牌和一个值：expiresIn，它或多或少在 6000 左右。我不明白这个值的含义。如果我将它除以 3600，我会说它给了我大约 2 小时的有效期，这意味着这不是具有无限过期时间的访问令牌。有没有办法可以请求具有更长有效期的访问令牌？请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:52:52.440

我认为这个政策变化现在令人困惑，因为他们今天正在改变这个。[在新政策适用之前，您可能需要按照此处](https://developers.facebook.com/roadmap/offline-access-removal/)
所述更改应用配置。 我想您必须检查您的“弃用offline_access”设置。 只要未给出offline_access且未应用新策略，access_token通常会在2小时内到期。

# android - android应用程序强制关闭

> ID：10176206
> 
> 赞同：0
> 
> 时间：2012-04-16T14:37:30.577
> 
> 标签：android, image-processing, forceclose

我是安卓新手。我正在尝试进行某种图像处理。但我收到此消息“此应用程序 --- 已意外停止。请重试。”。请告诉我我犯了什么错误

```
package com.imagep.amit;

import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.Bitmap.CompressFormat;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.util.Log;
import android.widget.ImageView;

public class ImagepActivity extends Activity {
    /** Called when the activity is first created. */

    Bitmap myBitmap;
    ImageView myImageView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        String imageFileName= "/sdcard/test_vga.jpg";
        File imageFile= new File(imageFileName);
        if (imageFile.exists()) {
            // Load the image from file
            myBitmap= BitmapFactory.decodeFile(imageFileName);
            // Display the image in the image viewer
            myImageView= (ImageView)findViewById(R.id.di);
            if (myImageView!= null) {
                myImageView.setImageBitmap(myBitmap);
            }
        }
        this.processImage();
    }

    private void processImage() {
        brighten(50);
        try {
            String outputPath= "/test_vga_output.jpg";
            int quality = 75;
            FileOutputStream fileOutStr= new FileOutputStream(outputPath);
            BufferedOutputStream bufOutStr= new BufferedOutputStream(fileOutStr);
            myBitmap.compress(CompressFormat.JPEG, quality, bufOutStr);
            bufOutStr.flush();
            bufOutStr.close();
        } catch (FileNotFoundException exception) {
            Log.e("debug_log", exception.toString());
        } catch (IOException exception) {
            Log.e("debug_log", exception.toString());
        }
        myImageView.setImageBitmap(myBitmap);
    }

    private void brighten(int i) {
        int width = myBitmap.getWidth();
        int height = myBitmap.getHeight();
        int[] pix = new int[width * height];
        myBitmap.getPixels(pix, 0, width, 0, 0, width, height);
        // Apply pixel-by-pixel change
        int index = 0;
        for(int y = 0; y < height; y++) {
            for (int x = 0; x < width; x++) {
                int r = (pix[index] >> 16) & 0xff;
                int g = (pix[index] >> 8) & 0xff;
                int b = pix[index] & 0xff;
                r = 0;
                g = 0;
                b = 0;
                pix[index++] = 0xff000000| (r << 16) | (g << 8) | b;
            } // x 
        } // y
        // TODO Auto-generated method stub
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:41:33.663

使用`adb logcat`、DDMS 或 Eclipse 中的 DDMS 透视图来检查 LogCat 并查看与您的错误相关的堆栈跟踪。

此外，**永远不要使用硬连线路径**，尤其是因为`/sdcard`它是错误的——用于`Environment.getExternalStorageDirectory()`获取外部存储的根目录。

最后，您的实际问题可能来自：

```
String outputPath= "/test_vga_output.jpg"; 
```

这是一个无效的路径。我不知道你认为你在哪里写，但你不能在那里写。但是，您可能还有其他问题，堆栈跟踪将帮助您识别它们。

# javascript - 为什么下拉菜单不根据其他值更改？

> ID：10176207
> 
> 赞同：0
> 
> 时间：2012-04-16T14:37:33.550
> 
> 标签：javascript, jquery

我不确定为什么这不起作用。有没有人愿意捅一刀？

我有一个下面的表格。当用户在#frmcomments 中选择“禁用”选项时，我希望#frmstatus 更改为私有选项值。

```
<label for="type">Comments:</label>
<select class="sort-select" id="frmcomments" name="frmcomments">
    <option value="enabled">Allow Comments</option>
    <option value="disabled">No Comments</option>
</select>

<label for="type">Status:</label>
<select class="sort-select" id="frmstatus" name="frmstatus">
    <option value="public">Anyone can see</option>
    <option value="private">Only I can see</option>
</select> 
```

我正在使用以下 jquery，但它失败了？

```
$('#frmcomments').change(function() {
    var thistype = $(this).find(":selected").val();

    if(thistype=="disabled") {
        $("#frmstatus").val("private");
    }

    return false; 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:38:51.327

检查你的`thistype`价值。您应该能够调用`val()`并且`select`您不必调用`.find(":selected")`来获取选定的列表项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:40:21.723

```
$('#frmcomments').change(function() {
    var thistype = $(this).val();

    if(thistype=="disabled") {
        $("#frmstatus").val("private").change();
    }
    return false; 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:41:30.650

```
var thistype = $(this).find(":selected").val(); 
```

尝试这个

```
var thistype = $(this).val(); 
```

# javascript - javascript 这个对象

> ID：10176209
> 
> 赞同：5
> 
> 时间：2012-04-16T14:37:39.677
> 
> 标签：javascript, this

在过去的 4 个月里，我一直在从事网络项目。为了优化代码性能，我们使用了一种模式。我的疑问是，它是否真的提高了性能？

当我们必须使用`this`对象时，我们将它分配给一个局部变量，并使用它。

```
function someFunction()
{
  var thisObject = this;
  //use thisObject in all following the code. 
} 
```

这里的假设是，将`this`对象分配给本地堆栈变量将提高性能。

我在任何地方都没有见过这种类型的编码，所以怀疑它是否没用。

编辑：我知道将此对象分配给局部变量是为了保留对象，但这不是我们的情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T14:40:08.423

虽然这是 Javascript 中的常见做法，但出于性能原因并**没有这样做。**将`this`对象保存在另一个命名的本地通常是为了保留`this`函数中定义的跨回调的值。

```
function someFunction() {
  var thisObject = this;
  var someCallback = function() {
    console.log(thisObject === this);  // Could print true or false
  };
  return someCallback;
} 
```

计算结果是否`thisObject === this`为真将取决于它的调用方式

```
var o = {} 
o.someFunction = someFunction();
var callback = o.someFunction();
callback();        // prints false
callback.call(o);  // prints true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:10:56.193

与所有性能问题一样，应该通过实际测量性能来检查它们。在一个[相当简单的测试用例](http://jsperf.com/this-vs-self2)中（您的实际代码可能会有所不同），我发现浏览器的结果不同：

![在此处输入图像描述](../Images/5e2cb61aa9f89b2dde26dd3d296e5f6e.png)

Chrome 和 Firefox 在这两个测试之间没有太大差异，但两者之间的细微差别是相反的方向。IE9 使用保存的副本显示测试`this`，我称`self`它的速度要慢得多。

如果 Chrome 和 Firefox 以及 IE9 没有显着且一致的性能差异显示`this`测试用例明显更快，我认为您可以得出结论，您询问的设计模式没有在浏览器之间提供一致的性能提升。

`this`在我的代码中，仅当我需要它以一致地引用内联事件处理程序、回调或`this`已设置为其他内容的方法中的原始对象时，我才将其副本保存到另一个变量。换句话说，我只在需要时应用这种设计模式。

在[之前关于 SO 的此设计模式](https://stackoverflow.com/questions/7436709/what-is-the-value-of-var-me-this/7438224)的讨论中，得出的结论是，一些库使用此设计模式是为了允许额外的最小化，因为`this`在它占用的四个字符以下无法缩小，但可以将其分配给局部变量缩小为单个字符变量名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:43:19.840

即使这种优化有（积极的）效果，也很可能依赖于解释器。

其他版本可能会恢复结果。

但是，最终你应该衡量，而不是猜测。

# php - Symfony2 中的 SQLite 3

> ID：10176219
> 
> 赞同：1
> 
> 时间：2012-04-16T14:38:17.677
> 
> 标签：php, symfony

从 symfony2 文档[http://symfony.com/doc/current/reference/requirements.html](http://symfony.com/doc/current/reference/requirements.html)开始，symfony 2 要求您启用 Sqlite3。它在 symfony2 中到底在哪里使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:43:49.453

我确定 Symfony 的调试工具栏需要 SQLite 才能工作，我不知道是否有其他东西使用它。

# asp.net - WebDAV Word 上传失败（但有效）... MS Word 是否需要 WebDAV Microsoft 扩展属性（例如 office:modifiedby）

> ID：10176220
> 
> 赞同：1
> 
> 时间：2012-04-16T14:38:20.447
> 
> 标签：asp.net, ms-word, ms-office, webdav

## tl;博士

您是否**需要**实现[Microsoft WebDav 扩展属性](http://msdn.microsoft.com/en-us/library/cc250108%28v=prot.13%29.aspx)才能正确使用 Word。

## 扩展问题

我正在预先存在的[WebDAV.NET 开源项目之上](http://sourceforge.net/projects/webdav/)构建一个 WebDav 服务器。我注意到，对于 Word 2010（没有尝试其他版本），他们的示例代码无法正确处理保存 Microsoft Word 文档，因为即使文档正确保存并且您是该文件的唯一用户，它也会显示“上传失败”。我试图找出原因，引起我注意的一件事是[Microsoft WebDav Extension Properties](http://msdn.microsoft.com/en-us/library/cc250108%28v=prot.13%29.aspx)。对此的 MS 页面声明“实现 WebDAV 协议的 WebDAV 服务器：Microsoft 扩展**应该**实现以下扩展属性。” 既然它声明应该，我假设你不必支持它来使用 Word。

当我注意到我的 propfind 请求/响应如下所示时，我开始怀疑这些扩展：

```
PROPFIND /test123.docx HTTP/1.1
Cache-Control: no-cache
Connection: Keep-Alive
Pragma: no-cache
Content-Type: text/xml; charset="utf-8"
User-Agent: Microsoft Office Core Storage Infrastructure/1.0
Depth: 0
Translate: f
Connection: Keep-Alive
Content-Length: 208
Host: localhost:62954

<?xml version="1.0" encoding="utf-8" ?><D:propfind xmlns:D="DAV:" xmlns:Office="urn:schemas-microsoft-com:office:office"><D:prop><D:creationdate/><D:getlastmodified/><Office:modifiedby/></D:prop></D:propfind> 
```

* * *

```
HTTP/1.1 207 Multi-Status
Server: ASP.NET Development Server/10.0.0.0
Date: Mon, 16 Apr 2012 14:11:55 GMT
X-AspNet-Version: 4.0.30319
MS-Author-Via: DAV
Cache-Control: private
Content-Type: text/xml; charset=utf-8
Content-Length: 576
Connection: Close

<?xml version="1.0" encoding="utf-8"?>
<D:multistatus xmlns:D="DAV:">
    <D:response>
        <D:href>http://localhost:62954/test123.docx</D:href>
        <D:propstat>
            <D:prop>
                <D:creationdate>2012-04-10T08:00:00Z</D:creationdate>
                <D:getlastmodified>2012-04-16T09:09:44Z</D:getlastmodified>
            </D:prop>
            <D:status>HTTP/1.1 200 OK</D:status>
        </D:propstat>
        <D:propstat>
            <D:status>HTTP/1.1 404 Not Found</D:status>
            <D:prop>
                <modifiedby xmlns="urn:schemas-microsoft-com:office:office" />
            </D:prop>
        </D:propstat>
    </D:response>
</D:multistatus> 
```

如果有人好奇，以下是我的 PUT 回复。

```
HTTP/1.1 200 OK
Server: ASP.NET Development Server/10.0.0.0
Date: Mon, 16 Apr 2012 14:18:06 GMT
X-AspNet-Version: 4.0.30319
MS-Author-Via: DAV
Cache-Control: private
Content-Length: 0
Connection: Close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:15:18.000

顺便说一句，我在 Sphorium webdav 中发现了导致此问题的错误。该错误出现在方法**DavLockBase_InternalProcessDavRequest()**中，错误的代码行是：

```
string[] _lockTokens = this.RequestLock.GetLockTokens(); 
```

应该是：

```
string[] _lockTokens = this.ResponseLock.GetLockTokens(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:56:50.930

**不，您不需要实现[Microsoft WebDAV Extension Properties](http://msdn.microsoft.com/en-us/library/cc250108%28v=prot.13%29.aspx)。** （我想出了自己问题的答案）

WebDAV.NET 的问题在于其中存在一个错误，即标头中的空 LockToken 会混淆 Word 并使其无法将 LockToken 提供给 PUT 请求。

# python - 如何将额外的参数传递给 Python 装饰器？

> ID：10176226
> 
> 赞同：120
> 
> 时间：2012-04-16T14:38:33.273
> 
> 标签：python, python-2.7, python-decorators

我有一个像下面这样的装饰器。

```
def myDecorator(test_func):
    return callSomeWrapper(test_func)
def callSomeWrapper(test_func):
    return test_func
@myDecorator
def someFunc():
    print 'hello' 
```

我想增强这个装饰器以接受另一个参数，如下所示

```
def myDecorator(test_func,logIt):
    if logIt:
        print "Calling Function: " + test_func.__name__
    return callSomeWrapper(test_func)
@myDecorator(False)
def someFunc():
    print 'Hello' 
```

但是这段代码给出了错误，

> TypeError: myDecorator() 正好接受 2 个参数（1 个给定）

为什么函数没有自动传递？如何将函数显式传递给装饰器函数？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-04-16T14:41:28.717

由于您像调用函数一样调用装饰器，因此它需要返回另一个作为实际装饰器的函数：

```
def my_decorator(param):
    def actual_decorator(func):
        print("Decorating function {}, with parameter {}".format(func.__name__, param))
        return function_wrapper(func)  # assume we defined a wrapper somewhere
    return actual_decorator 
```

外部函数将获得您显式传递的任何参数，并应返回内部函数。内部函数会传入要修饰的函数，并返回修改后的函数。

通常，您希望装饰器通过将其包装在包装函数中来更改函数行为。这是一个示例，它可以在调用函数时选择性地添加日志记录：

```
def log_decorator(log_enabled):
    def actual_decorator(func):
        @functools.wraps(func)
        def wrapper(*args, **kwargs):
            if log_enabled:
                print("Calling Function: " + func.__name__)
            return func(*args, **kwargs)
        return wrapper
    return actual_decorator 
```

该`functools.wraps`调用将名称和文档字符串等内容复制到包装函数，以使其与原始函数更相似。

示例用法：

```
>>> @log_decorator(True)
... def f(x):
...     return x+1
...
>>> f(4)
Calling Function: f
5 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-04-16T15:09:02.050

只是提供一个不同的观点：语法

```
@expr
def func(...): #stuff 
```

相当于

```
def func(...): #stuff
func = expr(func) 
```

特别是，`expr`可以是您喜欢的任何东西，只要它评估为可调用对象。特别*是*，`expr`可以是一个装饰器工厂：你给它一些参数，它给你一个装饰器。因此，了解您的情况的更好方法可能是

```
dec = decorator_factory(*args)
@dec
def func(...): 
```

然后可以缩短为

```
@decorator_factory(*args)
def func(...): 
```

当然，由于它*看起来*像是`decorator_factory`一个装饰器，所以人们倾向于将其命名以反映这一点。当您尝试遵循间接级别时，这可能会令人困惑。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-04-20T09:44:01.997

只是想添加一些有用的技巧，允许装饰器参数可选。它还将允许重用装饰器并减少嵌套

```
import functools

def myDecorator(test_func=None,logIt=None):
    if test_func is None:
        return functools.partial(myDecorator, logIt=logIt)
    @functools.wraps(test_func)
    def f(*args, **kwargs):
        if logIt==1:
            print 'Logging level 1 for {}'.format(test_func.__name__)
        if logIt==2:
            print 'Logging level 2 for {}'.format(test_func.__name__)
        return test_func(*args, **kwargs)
    return f

#new decorator 
myDecorator_2 = myDecorator(logIt=2)

@myDecorator(logIt=2)
def pow2(i):
    return i**2

@myDecorator
def pow3(i):
    return i**3

@myDecorator_2
def pow4(i):
    return i**4

print pow2(2)
print pow3(2)
print pow4(2) 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2017-09-20T10:26:24.847

只是做装饰器的另一种方式。我发现这种方式最容易绕开我的头。

```
class NiceDecorator:
    def __init__(self, param_foo='a', param_bar='b'):
        self.param_foo = param_foo
        self.param_bar = param_bar

    def __call__(self, func):
        def my_logic(*args, **kwargs):
            # whatever logic your decorator is supposed to implement goes in here
            print('pre action baz')
            print(self.param_bar)
            # including the call to the decorated function (if you want to do that)
            result = func(*args, **kwargs)
            print('post action beep')
            return result

        return my_logic

# usage example from here on
@NiceDecorator(param_bar='baaar')
def example():
    print('example yay')

example() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-29T04:48:46.250

现在，如果你想`function1`用装饰器调用一个函数`decorator_with_arg`，在这种情况下，函数和装饰器都带参数，

```
def function1(a, b):
    print (a, b)

decorator_with_arg(10)(function1)(1, 2) 
```

# linq - 转换 IQueryable 到 IQueryable

> ID：10176228
> 
> 赞同：2
> 
> 时间：2012-04-16T14:38:36.240
> 
> 标签：linq, entity-framework, iqueryable

我正在尝试这样做：我首先使用 EF 代码来映射旧的现有数据库。有许多类型错误的字段（例如：char(1) 用作布尔值）所以我为我的数据库上下文创建了一个包装器类，它完美地映射到数据库表。现在，我想在我的存储库上公开我的 Entity 类型的 IQueryable。看我的例子：

```
public class MyContext:DbContext
{
    public DbSet<WrappedEntity> WrapperEntities;
}

public class Repository
{
    private MyContext _context;

    //contructors omitted

    public IQueryable<Entity> GetEntities()
    {
        return _context.WrapperEntities; //doesn't compile, I need some convertion here
    }
} 
```

我已经有了我的转换例程，唯一缺少的是一种查询我的 DbContext 认为我的存储库而不暴露 WrappedEntity 类的方法，这是否可能以及如何？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:52:50.203

通常您使用项目`Queryable.Select`来更改查询的类型...

```
public IQueryable<Entity> GetEntities()
{
  return _context.WrapperEntities.Select(x => new Entity(){...});
} 
```

# django - 所有 404 页面是否有共同点？/404 页面与普通页面有区别吗？

> ID：10176229
> 
> 赞同：0
> 
> 时间：2012-04-16T14:38:39.820
> 
> 标签：django

假设我正在运行 stumbleupon.com，用户可以提交要添加到站点数据库中的站点。有没有办法可以编写一个程序来查看用户添加的网站是否实际上是一个真实的网站？或者如果它把我带到一个 404，我可以说“welp，那是一些错误”，或者用户在提交 url 时出错了？或者我是否需要将人员列入我的工资单以查看用户提交的网站是否将我带到 404？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:43:57.780

请求的响应代码是 404 未找到，而不是您从服务器获得良好响应的 200 成功消息。您可以轻松地自动执行检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:15:08.567

由于我对python不太了解，所以我提供了一个客户端解决方案。

您可以在用户提交页面后立即检查 URL 是否合法。也许会抛出一个“验证网址”消息或其他东西。

使用[此方法](http://icant.co.uk/articles/crossdomain-ajax-with-jquery/error-handling.html)，您可以进行跨域调用以查看该站点是否真的存在。然后，您可以弹出一条消息，要求他们更正错误或允许提交 URL。该解决方案使用 Yahoo 作为代理，但正如您在下面我的超级简单函数中看到的那样，它确实有效。

```
function doAjaxCheck(url){
// if the URL starts with http
if(url.match('^http')){

  //add a 'loading message here, or something'        

  // assemble the YQL call      
  $.getJSON("http://query.yahooapis.com/v1/public/yql?"+
            "q=select%20*%20from%20html%20where%20url%3D%22"+
            encodeURIComponent(url)+
            "%22&format=xml'&callback=?",
    function(data){
      if(data.results[0]){
        alert('it is OK');
      } else {
        alert('not OK');
      }
    }
  );
} else {
  $.ajax({
    url: url,
    timeout:5000,
    success: function(data){
      alert('it is OK');
    },
    error: function(req,error){          
      if(error === 'error'){error = req.statusText;}
        alert('not OK : ' + error );
    }
  });
}
} 
```

但是，话虽如此，我还是会进行服务器端检查以确保可靠性。

# java - 六进制字符串到 Int java

> ID：10176230
> 
> 赞同：0
> 
> 时间：2012-04-16T14:38:42.190
> 
> 标签：java, hex

我有：

```
int number = 0x00000024; 
```

它没有问题，但现在我用 de 格式得到它：

```
<MAN>
      <NAME hexa="0x00000001"/>
</MAN> 
```

我尝试用以下方法解析六进制：

```
Integer.parseInt(parser.getAttributeValue(0), 16) 
```

但它说：

```
Unable to parse '0x00000001' as integer 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T14:40:28.043

删除`0x`：

```
Integer.parseInt(parser.getAttributeValue(0).substring(2), 16) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:20:39.157

基于[如何在 java 中将十六进制字符串转换为 long 中的答案？](https://stackoverflow.com/questions/5153811/how-to-convert-a-hexadecimal-string-to-long-in-java)， 你要：

```
int num = Long.decode(parser.getAttributeValue(0)).intValue(); 
```

# c - 如何为内核模块 makefile 添加包含路径

> ID：10176238
> 
> 赞同：11
> 
> 时间：2012-04-16T14:39:00.197
> 
> 标签：c, makefile, linux-kernel

如何为内核模块 makefile 添加包含路径？我想在 test_module.c 中包含“test_kernel.h”。“test_kernel.h”位于其他目录“inc”中，我在 Makefile 中尝试了以下解决方案，但它不起作用：

```
obj-m += test_module.o

test_module:
    $(MAKE) -C "$(LINUX_DIR)" -Iinc $(MAKE_OPTS) modules 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-16T16:23:57.390

你应该`EXTRA_CFLAGS`在你的`Makefile`. 尝试以下几行：

```
obj-m += test_module.o
EXTRA_CFLAGS=-I$(PWD)/inc

test_module:
    $(MAKE) -C "$(LINUX_DIR)" $(MAKE_OPTS) modules 
```

[请参阅此处](http://www.ravnborg.org/kbuild/makefiles.html)的第 3.7`Compilation Flags`节。 希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:11:05.813

你确定你在你的文件中正确指定了包含吗？

例如：

```
#include "inc/something.h" 
```

代替

```
#include <inc/something.h> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T14:46:52.267

`-I`是 GCC 标志，而不是 Make 标志。¹ 您需要将一个变量传递给您的“子”制作过程；也许是这样的：

```
$(MAKE) -C "$(LINUX_DIR)" CPPFLAGS="-Iinc" $(MAKE_OPTS) modules 
```

where`CPPFLAGS`是隐式规则中使用的标准 Make 变量。随意使用您自己的变量，并确保在子制作中正确使用它。

Make 手册提供了有关 Make 实例之间通信变量的更多详细信息：[http](http://www.gnu.org/software/make/manual/make.html#Variables_002fRecursion) ://www.gnu.org/software/make/manual/make.html#Variables_002fRecursion 。

* * *

[1\. 实际上，它也是一个 Make 标志，但用于完全不相关的东西。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-23T16:04:53.967

对我来说，许多试验都失败了，直到其中一个成功了。`$(src)`在路径中使用将使用`ccflags-y`，例如：

```
# Include Paths
ccflags-y       += -I$(src)/../../lib/include 
```

对于比源文件夹高两级的目录“/lib/include”。

这是由[Kernel.org中的声明驱动的](https://www.kernel.org/doc/html/latest/kbuild/makefiles.html#custom-rules)

> 引用位于 src 树中的文件时，请始终使用 $(src) 特别是，如果您的源代码位于 Linux 内核树之外的目录中。

# perl - 如何使用 shell 脚本输出作为 perl 脚本的输入（删除具有权限的文件）？

> ID：10176240
> 
> 赞同：-2
> 
> 时间：2012-04-16T14:39:03.003
> 
> 标签：perl, shell

我在mailq上运行一个shell脚本来创建一个要删除的文件列表，但是由于权限，我不能用shell脚本删除它们（当我使用root权限时，脚本可以工作，但我不能总是为root权限提供root密码用户）。我想将文件的输出列表发送到 perl 以删除它们，并且 Perl 程序具有 root 权限。

外壳脚本是：

```
 #!/usr/bin/ksh
    WORKFILE="/tmp/check.mq"
    MAILLIST="yagyavalkbhatt@yahoo.com"

    mailq|grep -B1 -i temporarily |grep -iv deferred |egrep -i                 'jan|feb|mar|apr|may|june|jul|aug|sept|oct|nov|dec' |awk -F" " '{print $1}' |awk '{print substr($0,10,14)}'|tee $WORKFILE |awk '{print "*" $1}'|tee mail.mq

    mailq|grep -B1 -i unknown |egrep -i 'jan|feb|mar|apr|may|june|jul|aug|sept|oct|nov|dec' |awk -F" " '{print $1}' |awk '{print substr($0,10,14)}'|tee $WORKFILE  |awk '{print "*" $1}'|tee mail.mq

    mailq|grep -B1 -i lookup |grep -iv deferred |egrep -i 'jan|feb|mar|apr|may|june|jul|aug|sept|oct|nov|dec' |awk -F" " '{print $1}' |awk '{print substr($0,10,14)}'|tee $WORKFILE |awk '{print "*" $1}'|tee mail.mq 

    cat mail.mq | while read file; do rm /var/spool/mqueue/$file;done
    find . -type f -name "mail.mq" |rm -rf mail.mq 
```

这会产生如下输出：

```
 *##### where ##### is a unique 5 numbers to identify files in the mailq. 
```

我想知道如何从任何用户那里删除这些具有 root 权限的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:45:43.917

处理此问题的一种好方法是允许用户创建这样的列表并将输出保存到给定目录中的文件中。然后，您可以让 cron 作业定期（经常或不经常）检查用户提交的列表，检查内容以确保其合法（您只想允许列出某些目录中的某些文件以供删除），删除文件，然后删除列表。

授予用户 root 权限不是一个好主意。通常有更好的方法来完成工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T14:48:17.473

将 STDERR 重定向到 STDOUT 并一起读取。

**例子：**

```
@ls_output = `ls -l 2>&1`; 
```

# eclipse - 字段nameSpan在模板文件Login.ui.xml中没有对应的字段

> ID：10176244
> 
> 赞同：2
> 
> 时间：2012-04-16T14:39:28.090
> 
> 标签：eclipse, gwt

Eclipse 3.7 GWT 2.4 当我使用 xml 创建模板化 UiBinder 类时，我在
@UiField SpanElement nameSpan 上看到了问题；

“字段nameSpan在模板文件Login.ui.xml中没有对应的字段”

怎么修？

登录.java

```
public class Login extends UIObject {

    private static LoginUiBinder uiBinder = GWT.create(LoginUiBinder.class);

    interface LoginUiBinder extends UiBinder<Element, Login> {
    }

    @UiField
    SpanElement nameSpan; 

    public Login(String firstName) {
        setElement(uiBinder.createAndBindUi(this));
        nameSpan.setInnerText(firstName);
    } 
```

}

登录.ui.xml

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'>
    <div>
        Hello,
        <span ui:field='nameSpan' />
    </div>
</ui:UiBin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:05:05.053

> *“字段nameSpan在模板文件Login.ui.xml中没有对应的字段”*

它指出 login.ui.xml 中没有对应类型的字段，如 login.java 中的 @UiField 定义的那样

你的 login.ui.xml 应该是这样的：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder' xmlns:s='urn:import:com.google.gwt.dom.client'>
<div>
    Hello,
    <s:SpanElement ui:field='nameSpan' />
</div> 
```

# xpages - 如何卸载 DOTS

> ID：10176246
> 
> 赞同：1
> 
> 时间：2012-04-16T14:39:40.667
> 
> 标签：xpages

Domino OSGi Tasklet Service 将在未来开发基于 Java 的 tasklet 以在 Domino 服务器上运行非常重要。当我从 OpenNTF 阅读文档时，我看到一个通过“加载点”加载 DOTS 框架的命令。一切运行良好，我自己的 tasklet 也是如此。但是是否还有卸载或停止 DOTS 框架的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:51:05.683

退出任务的常用语法是发出“tell [task] quit”命令，因此“tell dots quit”应该可以工作。

# php - 将googlemap位置添加到sql数据库后使用javascript重定向

> ID：10176248
> 
> 赞同：0
> 
> 时间：2012-04-16T14:39:50.227
> 
> 标签：php, javascript, html, sql, google-maps

我对javascript很陌生（好吧，我只花了两天时间使用它！）。我想在我的网站上做的一件事是允许用户向谷歌地图添加标记。过去几天我一直在阅读 googlemaps API，并使用了其中一个教程（[https://developers.google.com/maps/articles/phpsqlinfo_v3](https://developers.google.com/maps/articles/phpsqlinfo_v3)）并根据我的需要对其进行了编辑。标记的纬度和经度使用 javascript 传递到 SQL 数据库中。查数据库的时候，可以看到已经添加了标记，这很好，但是从用户端无法知道它是否成功。当我点击“提交”按钮时，数据被传递到数据库中，但我想重定向到另一个页面，或者显示一条消息它已经成功。

代码是：

```
var marker;

function initialize() {
  var latlng = new google.maps.LatLng(37.4419, -122.1419);
  var options = {
    zoom: 13,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"), options);

google.maps.event.addListener(map, "click", function(event) {
    marker = new google.maps.Marker({
      position: event.latLng,
      map: map
    });
});
}

  function saveData() {
  var latlng = marker.getPosition();

  var url = "phpsqlinfo_addrow.php?lng=" + latlng.lng() + "&lat=" + latlng.lat();

  downloadUrl(url, function(data, responseCode) {
       if (responseCode == 200 && data.length <= 1) {
     window.navigate('index.html')
    }
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request.responseText, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}
</script>

<link rel="stylesheet" type="text/css" href="style.css"/>
<body onload="initialize()">
<div id="container">
<div id="map_canvas" style="width: 938px; height: 600px">
</div>
</div>
<div id="footer">
<table>
<tr><td><input type='button' value='Save Marker' onclick='saveData()'/></td></tr>
</div>
</body>
</html> 
```

我从那里删除了一些不必要的东西。问题似乎出在“window.navigate”部分，但大量搜索并没有让我更进一步。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:56:52.810

如果标记被成功添加（在 phpsqlinfo_addrow.php 中），你应该做的是返回一个成功代码，如下所示：

```
if(mysql_query("INSERT INTO .....")){
    //Success
    echo 1;
} else{
    //Failed
    echo 2;
} 
```

然后在您的 ajax 调用中，您可以检查它是否已成功添加，如下所示：

```
request.onreadystatechange = function() {
    if (request.readyState == 4) {
        request.onreadystatechange = doNothing;

        var response = request.responseText;

        if(response == 1){
            //success
            callback(request.responseText, request.status);
        } else{
            //failed
            alert('something went wrong!');
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:02:43.183

1）您在行尾缺少一个分号

```
window.navigate('index.html') 
```

所以改成：

```
window.navigate("index.html"); 
```

注意分号的添加。

2）改用它，因为它适用于所有浏览器：

```
window.location.href = '...'; 
```

无论如何，首先要做的是检查您的 if 语句是否正在执行。因此，将某些内容打印到浏览器而不是重定向到另一个页面。如果什么都没有打印，那么你就知道你的 if 语句甚至没有被执行。然后你可以做的是检查需要执行 if 语句的变量。因此，您可以在测试 if 语句并查看条件是否为真之前将数据变量打印到浏览器。在您的情况下， data.length 需要<1 ...因此在之前打印出 data 变量并确保它小于一...如果不是，那么您知道为什么您的 if 语句没有被执行，因此知道为什么您的网页没有被重定向！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:07:11.800

按照 Terwanerik 的回答：

```
downloadUrl(url, function(data, responseCode) {
    if (responseCode == 200 && data == "1") {
        //success
        window.navigate('index.html')
    } else{
        //failed
        alert('something went wrong!');
    }
  }
}); 
```

您应该更改 phpsqlinfo_addrow.php 文件以匹配他所说的：

```
if(mysql_query("INSERT INTO .....")){
  //Success
  echo 1;
} else{
  //Failed
  echo 2;
} 
```

# iphone - iPhone设备中奇怪的日期格式化程序问题

> ID：10176249
> 
> 赞同：1
> 
> 时间：2012-04-16T14:39:55.560
> 
> 标签：iphone, nsdate, nsdateformatter

我正在尝试从字符串转换日期，

下面是我的代码，

```
str_date = @"04/16/2011 00:00:00 AM";

NSDateFormatter *dtF = [[NSDateFormatter alloc] init];
[dtF setDateFormat:@"MM/dd/yyyy HH:mm:ss a"];

NSDate *d = [dtF dateFromString:str_date];

NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd"];
NSString *dateString = [dateFormat stringFromDate:d]; 
[dateFormat release];

return dateString; 
```

这里的问题是，在模拟器中它工作正常并将字符串转换为日期并将日期转换为字符串，但是对于设备，它无法将**字符串转换为日期**

在 iPod Retina 中不显示日期，但在 iPhone 3gs 中显示日期

请帮助我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:58:52.207

像这样替换这一行

```
NSDateFormatter *dtF = [[NSDateFormatter alloc] init]; [dtF setDateFormat:@"MM/dd/yyyy hh:mm:ss a"]; 
```

因为 HH 用于 24 小时格式，而 hh 用于 12 小时格式...

# jquery - 通过 Ajax 动态更改 Jquery Mobile 中的链接

> ID：10176254
> 
> 赞同：0
> 
> 时间：2012-04-16T14:40:19.887
> 
> 标签：jquery, jquery-mobile

我的 index.htm 页面的标题中有一个指向 page_02.htm 的链接。当用户到达 page_02.htm 时，一个变量被设置为 true。当用户从 page_02 返回到 index.htm 时，我希望检查变量是否为真，并动态更新标题中按钮的 href 和文本。

这似乎是一项非常基本的任务，但是我正在努力弄清楚如何刷新 index.htm 页面而不必强制重新加载页面。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:42:27.327

看起来您可以检查是否[定义](https://stackoverflow.com/questions/519145/how-can-i-check-whether-a-variable-is-defined-in-javascript)了一个变量`pagebeforeshow`，如果是，那么您可以按照您认为合适的方式对其进行操作。

```
$("#homePage").live("pagebeforeshow", function(event) {
    if (typeof some_global != 'undefined') {
        alert(some_global);
    }
}); 
```

在我的二级页面中，我所做的只是

```
var some_global = "Made it here"; 
```

# java - 并行化任务但在输出中保留输入顺序

> ID：10176258
> 
> 赞同：0
> 
> 时间：2012-04-16T14:40:25.077
> 
> 标签：java, parallel-processing, threadpool

我有一个看起来像这样的子系统：

```
 [read]          [decode]       [deliver] 
Byte      -->  Undecoded  -->   Decoded   -->  Output queue
stream          message         message 
```

输入是一个套接字/字节流。第一步是阅读消息。下一步是解码消息（并将结果存储在消息对象中）。最后一步是传递消息。

我想并行化解码步骤，但我必须保持输出顺序与输入顺序相同。因此，如果收到消息 A 和 B 并且消息 B 的解码速度更快，我必须等到 A 完成才能传递它。

我在 Java 中做了一个简单的初始实现，但我的分析表明我在切换步骤（从“流读取器”到“解码器”以及从“解码器”到输出）丢失了太多。在 24 核计算机（包括超线程）上运行测试程序时，我得到：

*   运行单线程实现时为 1100 K msg/s。
*   运行简单的 12 线程实现（有很多队列）时为 110 K msg/s。

我的幼稚实现可在[http://pastebin.com/be1JqZy3](http://pastebin.com/be1JqZy3)获得。它有超过 200 行代码，所以它可能只会对那些真正想知道如何使并行版本比串行版本慢 10 倍的人感兴趣（提示：开始看类 ThreadPoolDecoder)。

在执行此类问题时，是否有人可以使用模式/框架，其中工作继续（基于流）可以并行化但必须在输出时进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:51:16.367

1100 K msg/s 非常快（消息不到 1 微秒）。该时间与从队列中放入/获取消息的时间相当（0.1...1 微秒）。因此，为了利用并行化，您必须将不间断处理的时间大大超过 1 微秒（例如，1 毫秒）。如果您将小消息组合成较大的消息，则可以做到这一点。在一个数据包中累积1000条消息，并将该数据包作为一个工作单元进行处理。并行处理单元。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:09:51.740

我在我编写的程序（在 C# 中）中处理这个问题的方法是在输出上有一个优先级队列。每条记录都有一个在读取时分配的关联记录号。这些数字从 0 开始并增加。当一个线程处理完一条记录后，它会将记录添加到优先级队列中。

一个单独的输出线程有一个从零开始的预期记录号。该线程监视队列，等待添加预期的记录号。添加预期记录后，线程将其从队列中删除，输出，增加预期记录编号，然后重试。

这在我的应用程序中非常有效，四个线程处理记录，一个处理输出。

# c# - 获取 c# 中所有已注册 MemoryMapFiles 的列表？

> ID：10176263
> 
> 赞同：2
> 
> 时间：2012-04-16T14:40:33.630
> 
> 标签：c#, .net, memory-mapped-files

c# 中是否有一种方法可以列出 c# 中所有打开或创建的 MemoryMapFiles？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-06-20T17:12:44.263

这取决于您说“在 c# 中”时的意思。使用托管代码？不，使用本机代码？是的。您可以使用`VirtualQueryEx`获取进程的所有内存分配，它会告诉您分配是否是`MEMORY_BASIC_INFORMATION`结构`Type`成员中的内存映射文件。

[https://msdn.microsoft.com/en-us/library/windows/desktop/aa366907(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa366907(v=vs.85).aspx)

如果您想了解如何在 C# 中使用它，请查看

[https://github.com/google/sandbox-attacksurface-analysis-tools/tree/e8f5bb1c1a60d744f7b0cb17e028969df01e51e7/NtApiDotNet](https://github.com/google/sandbox-attacksurface-analysis-tools/tree/e8f5bb1c1a60d744f7b0cb17e028969df01e51e7/NtApiDotNet)

# mysql - 独占mysql select查询，两张表

> ID：10176264
> 
> 赞同：0
> 
> 时间：2012-04-16T14:40:35.517
> 
> 标签：mysql, sql

我有以下表格（它们都有更多的列，但我只是显示感兴趣的列）：

```
Product                         Order details                   Orders
----------------------------    ----------------------------    --------------
| id_product | id_supplier |    | id_order   |  id_product |    |  id_order  |
|     12     |     2       |    |     1      |     56      |    |     1      |
|     32     |     4       |    |     2      |     32      |    |     2      |
|     56     |     2       |    |     2      |     56      |    |     3      |
|     10     |     1       |    |     4      |     56      |    |     4      |
----------------------------    |     3      |     12      |    --------------
                                ---------------------------- 
```

我想要做的是选择所有**只有**一个或多个供应商的产品的订单。因此，假设我想要所有只有来自供应商 id 为 2 (id_supplier = 2) 的产品的订单，我应该得到 id 为 1、3 和 4 的订单。

如果我想要所有只有来自供应商 id 为 4 (id_supplier = 4) 的产品的订单，**我**应该得到一个空的结果。

如果我想要所有**只有**id 为 2**和**4 的供应商的产品的订单，我应该得到 id 为 2 的订单。

我已经阅读了以下问题：[mySQL 独占记录](https://stackoverflow.com/questions/5785685/mysql-exclusive-records)，但是当我有两个像我这样的表时，我无法掌握该查询的工作原理。我只需要另一双眼睛来帮助我！:)

你知道我会怎么做吗？

**编辑**：为了明确起见，我想获取仅包含来自一个或多个指定供应商的产品的所有订单。不包括指定的其他供应商的产品订单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:33:30.850

根据我列出的问题，我认为这就是您想要的，并且可以通过 LEFT 加入来完成。

```
select 
      od.id_order,
      sum( if( p.id_supplier in ( 2, 4 ), 1, 0 )) as HasSupplierLookingFor,
      sum( if( p.id_supplier in ( 2, 4 ), 0, 1 )) as HasOtherSuppliers
   from
      order_Details od
         join product p
            on od.id_product = p.id_product
   group by
      od.id_order
   having 
          HasSupplierLookingFor > 0
      AND HasOtherSuppliers = 0 
```

有时，仅仅回答一个可能有点模棱两可的问题会导致错误的答案。此查询将按订单为基础，加入产品以查找供应商并按订单 ID 分组。

对于订购的每个产品，第一个 SUM() 询问它是否是您正在寻找的供应商之一，如果是，则总和值为 1，否则为 0......下一个 SUM() 询问同样的事情......但如果它是供应商，使用零，因此所有其他供应商都得到 1。

因此，现在，HAVING 子句正在寻找至少有 1 个供应商合格且没有其他供应商代表的任何订单。

因此，您可能有一个包含 30 件商品的订单，其中 20 件来自供应商 2，10 件来自供应商 4。HasSupplierLookingFor = 30，HasOtherSuppliers = 0，订单将被包括在内。

另一个订单可能有 5 件商品。一个来自供应商 2，另外 4 个来自供应商 9。这将具有 HasSupplierLookingFor = 1 和 HasOtherSuppliers = 4，因此将其排除为合格订单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:47:48.127

您应该内部连接所有这些表，如下所示：

```
SELECT o.* from Orders o
   INNER JOIN Details d ON o.id_order = d.id_order
   INNER JOIN Products p ON d.id_product = p.id_product
   WHERE p.id_supplier = 4 
```

这将为您提供包含该供应商产品的订单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:48:19.173

```
SELECT o.id_order
FROM Orders o 
    INNER JOIN `Order details` od
        ON o.id_order = od.id_order
    INNER JOIN Product p
        ON p.id_product = od.id_product
WHERE p.id_supplier IN (2,4) 
```

(2,4) 是您要获取的供应商。你也可以说 (2) 只要​​求 1

# java - 如何打印 ArrayLists 的 ArrayList 以便每个内部列表打印在一行上？

> ID：10176271
> 
> 赞同：3
> 
> 时间：2012-04-16T14:41:12.010
> 
> 标签：java, arraylist, tostring, pretty-print

我有一个 ArrayList 的 ArrayList - 类似于`ArrayList<ArrayList<Node>>`. 由于我将其作为函数的返回值，因此每次调用后都会调用不同的大小。我想知道如何显示它的元素是这样一种方式，即内部 ArrayList 构成一行，每一行也是如此。

for 循环我需要的参数是什么？提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T14:46:01.380

```
for (List<Node> l1 : arrayLists) {
   for (Node n : l1) {
       System.out.print(n + " "); 
   }

   System.out.println();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:48:32.030

这是一个基本示例：

```
public static void main(String[] args) {
    List<List<String>> ls;
    //initialize ls and set values in it...
    //after set some values, let's print it
    for(List<String> innerLs : ls) {
        String[] arr = innerLs.toArray();
        System.out.println(Arrays.deepToString(arr));
    }
} 
```

它应该是相同的逻辑`List<List<T>>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:44:01.380

调用`iterator()`将返回一个`Iterator<ArrayList<Node>>`, 并在其上循环。

在循环内部`iterator()`再次调用，在每个迭代的元素上，这将返回一个`Iterator<Node>`; 使用内部循环并使用`next()`它来显示。

对于循环，请使用“foreach”循环 ( `for(Node n : iterator)`) 或 while 循环 ( `while(iterator.hasNext())`)。

# visual-c++ - 拳头与手部追踪 Kinect SDK v1

> ID：10176272
> 
> 赞同：3
> 
> 时间：2012-04-16T14:41:17.653
> 
> 标签：visual-c++, kinect

我想追踪我是否握拳或张开手。

像这样显示：

> > [http://channel9.msdn.com/coding4fun/kinect/Simple-Hand-Tracking-with-MS-Kinect-SDK--WPF](http://channel9.msdn.com/coding4fun/kinect/Simple-Hand-Tracking-with-MS-Kinect-SDK--WPF)

现在我是否遇到了我在 C++ 中执行此操作的问题，并且在此示例中使用了旧版本的 kinect。

起初我的问题是在 depthView 中只显示手，然后我会遇到问题来检测它是拳头还是手。

我期待着你的帮助

# jpa - jpa 命名查询未找到

> ID：10176273
> 
> 赞同：2
> 
> 时间：2012-04-16T14:41:17.797
> 
> 标签：jpa, ejb-3.0

我正在将一个 ejb 2 应用程序迁移到 ejb 3.1。这两种技术将不得不共存一段时间。我的一个实体 bean 如下所示：

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;

@Entity
@Table(name = "migracao_jsf")
@NamedQueries({
    @NamedQuery(name = "migracao_query", query = "select p from MigracaoJsf p")
    })
public class MigracaoJsf implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Column(name = "name")
    @Id
    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

在 jboss 6.1 的部署日志中，我可以看到实体已部署。

```
 [AnnotationBinder] Binding entity from annotated class: myclass.MigracaoJsf 
```

但是我找不到查询解析的日志。当我尝试调用它时，我得到一个查询未找到异常。为什么实体部署正确而查询未解析？

谢谢

凯利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:23:57.827

您应该能够使用以下代码调用查询：

```
EntityManager em;
// em is created sonehow
TypedQuery<MigracaoJsf> q = em.createNamedQuery("migracao_query", MigracaoJsf.class); 
```

此外，通常的做法是使用类名作为命名查询的前缀，因为查询名称必须是唯一的。因此，通过名称获取实体的查询应该命名为`Entity.GetByName`。

# wpf - 为什么 VisualTreeHelper.GetChildrenCount(lbi) == 0？

> ID：10176275
> 
> 赞同：1
> 
> 时间：2012-04-16T14:41:24.157
> 
> 标签：wpf, xaml

我正在尝试从 DataTemplate 获取我的 ToggleButton

```
ListBoxItem lbi = this.UnitsListBox.ItemContainerGenerator.ContainerFromItem(obj) as ListBoxItem; 
```

lbi 可以（不为空）。

我想这样做：

```
ContentPresenter cp = VisualTreeHelper.GetChild(lbi, 0) as ContentPresenter;
ToggleButton btn = (ToggleButton) VisualTreeHelper.GetChild(cp, 0); 
```

但

```
VisualTreeHelper.GetChildrenCount(lbi) is 0\. 
```

这是我的 XAML

```
<ListBox  MaxWidth="215" FlowDirection="RightToLeft" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto"   DockPanel.Dock="Left" Name="UnitsListBox" VirtualizingStackPanel.IsVirtualizing="False" SelectionChanged="UnitsListBox_SelectionChanged" IsSynchronizedWithCurrentItem="True">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.Resources>
                    <Style TargetType="Button"/>
                </ListBox.Resources>
                <ListBox.ItemTemplate  >
                    <DataTemplate >
                        <ToggleButton x:Name="UnitSidebarButton"  FlowDirection="LeftToRight" Height="60" Width="60"  HorizontalContentAlignment="Center" Background="Transparent"  Margin="0" Padding="0" Checked="UnitSidebarButton_Checked" Unchecked="UnitSidebarButton_Unchecked" Focusable="False" VirtualizingStackPanel.IsVirtualizing="False">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding Converter={StaticResource cIMSidebarConverter2}}" TextWrapping="Wrap"  TextAlignment="Center" Background="Transparent"/>
                          </Grid>
                        </ToggleButton>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:12:26.367

当我将您的代码复制/粘贴到测试项目中时，可视化树层次结构中的`ListBoxItem`下一项是`Border`元素，而不是`ContentPresenter`（我使用[Snoop](http://snoopwpf.codeplex.com/)来查看可视化树）。我怀疑这就是你的`ContentPresenter`对象为空的原因。

如果您有兴趣，我的博客上有一些[VisualTreeHelpers](http://rachel53461.wordpress.com/2011/10/09/navigating-wpfs-visual-tree/)可能会使这更容易。你可以像这样使用它们：

```
var toggleBtn = VisualTreeHelpers.FindChild<ToggleButton>(lbi); 
```

* * *

（**旧答案**）

您的容器可能没有生成

这是一个示例，说明如何`StatusChanged`在运行代码之前使用事件来识别容器是否已生成

```
public Window()
{
    InitializeComponent();

    // Attach StatusChanged event
    UnitsListBox.ItemContainerGenerator.StatusChanged += 
        ItemContainerGenerator_StatusChanged;
}

void ItemContainerGenerator_StatusChanged(object sender, EventArgs e)
{
    // If containers have been generated
    if (UnitsListBox.ItemContainerGenerator.Status == 
        System.Windows.Controls.Primitives.GeneratorStatus.ContainersGenerated)
    {
        // Remove event
        UnitsListBox.ItemContainerGenerator.StatusChanged -= 
            ItemContainerGenerator_StatusChanged;

        // Do whatever here
        var lbi = UnitsListBox.ItemContainerGenerator.ContainerFromItem(obj) as ListBoxItem;

    }
} 
```

# mysql - MySQL 根据日期从多个表中获取结果

> ID：10176279
> 
> 赞同：1
> 
> 时间：2012-04-16T14:41:35.003
> 
> 标签：mysql, database, datetime, select

我正在创建一个人事数据库，并有多个与用户相关的表，其中包括体检、护照、疫苗接种、会员资格等。

这些表中的每一个都包含一个到期记录，我想在其上查询所有表。基本上我想要一个将在特定时间过期的项目列表，例如：

```
John - Passport expires in 1 month
Emma - Vaccination expires in 1 month
Carol - Vaccination expires in 3 weeks
Josh - Medical expires in 2 weeks
James - Passport expires in 3 days 
```

最好的方法是什么，可以在一个查询中以某种方式完成吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:48:21.580

可以使用联合在单个查询中完成：

```
(SELECT name, 'passport', expiry_date FROM table_passport WHERE ...) 
UNION ALL 
(SELECT name, 'vaccination', expiry_date FROM table_vaccinations WHERE ...) 
UNION ALL 
(SELECT name, 'medical', expiry_date FROM table_medical WHERE ...) 
ORDER BY name; 
```

# regex - .htaccess 用于 SSL？

> ID：10176284
> 
> 赞同：2
> 
> 时间：2012-04-16T14:41:54.470
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我有：

```
RewriteCond %{HTTP_HOST} ^MYDOMAIN\.com$ [NC]
RewriteRule ^(.*)$ http://www.MYDOMAIN.com/$1 [L,R=301]

RewriteCond %{HTTPS} !=on
RewriteCond %{REQUEST_URI} ^/(user|admin|cart)
RewriteRule ^(.*)$ https://www.MYDOMAIN.com/$1 [R=301,L] 
```

这有效地路由所有 /user 和 /admin 和 /cart 路径以使用 SSL。我的问题是相反的。我需要一条规则，说明如果您不在这些页面上，它会将您重定向到 HTTP（无 SSL）。

我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:42:13.267

首先完全清除浏览器缓存并重新启动浏览器。然后用这个替换你的 .htaccess ：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^MYDOMAIN\.com$ [NC]
RewriteRule ^ http://www.MYDOMAIN.com%{REQUEST_URI} [L,R]

RewriteCond %{HTTPS} !=on
RewriteRule ^(user|admin|cart)(/.*|)$ https://www.MYDOMAIN.com%{REQUEST_URI} [R,L,NC]

RewriteCond %{HTTPS} =on
RewriteRule (?!^(user|admin|cart)(/.*|)$)^.*$ http://www.MYDOMAIN.com%{REQUEST_URI} [R,L,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T03:36:23.310

这行得通吗？我意识到它可能不会，因为`SETENV`并不总是在 之前得到处理`ReWriteRule`，但假设，这应该处理你的所有场景：

```
# Set Correct protocol var based on request:

## Default to http
SetEnv correct_protocol http

## Overwrite to https if secure area
RewriteCond %{REQUEST_URI} ^/(user|admin|cart) [env=correct_protocol:https]

# Set Current (Actual) Protocol Env Variable:

## Again, default to http
SetEnv current_protocol http

## Overwrite with https if %{HTTPS} = on
RewriteCond %{HTTPS} = on [env=current_protocol:https] 

# If current <> correct
RewriteCond %{ENV:current_protocol} != %{ENV:correct_protocol}

# rewrite URL using correct:
RewriteRule .* %{ENV:correct_protocol}://%{SERVER_NAME}%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:45:28.253

只需颠倒条件！

```
RewriteCond %{HTTPS} =on
RewriteCond %{REQUEST_URI} !^/(user|admin|cart)
RewriteRule ^(.*)$ http://www.MYDOMAIN.com/$1 [R=301,L] 
```

# php - 如何知道密钥是否存在于 Json 字符串中

> ID：10176293
> 
> 赞同：49
> 
> 时间：2012-04-16T14:42:22.947
> 
> 标签：php, codeigniter

> **可能重复：**
> [如何检查数组元素是否存在？](https://stackoverflow.com/questions/1966169/how-to-check-if-an-array-element-exists)

如果我错了，我很抱歉，我是 PHP 新手，有没有办法在使用PHP 中的函数`Json`解码后找出字符串中是否存在键。`json_decode`

```
$json = {"user_id":"51","password":"abc123fo"}; 
```

简短的：

```
$json = {"password":"abc123fo"};
$mydata = json_decode($json,true);
user_id = $mydata['user_id']; 
```

如果json字符串不包含user_id，它会抛出一个异常`Undefined index user_id`，所以有没有办法检查Json字符串中是否存在密钥，请帮助我，我正在使用`PHP 5.3 and Codeigniter 2.1 MVC`提前谢谢

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-04-16T14:47:29.160

如果您还想检查该值是否不是`null`您可以使用`isset`

```
if( isset( $mydata['user_id'] ) ){
   // do something
} 
```

`array_key_exists`即和之间的区别`isset`在于

```
$json = {"user_id": null} 
```

`array_key_exists`将返回`true`而`isset`将返回`false`

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-04-16T14:44:35.630

你可以试试[array_key_exists](http://php.net/manual/en/function.array-key-exists.php)。

它返回一个布尔值，因此您可以搜索它：

```
if(array_key_exists('user_id', $mydata)) {
    //key exists, do stuff
} 
```

# jquery - jquery-tools 上的导航可滚动始终禁用

> ID：10176294
> 
> 赞同：0
> 
> 时间：2012-04-16T14:42:24.897
> 
> 标签：jquery, clone, jquery-tools, addclass

我无法让可滚动导航工作，当我克隆 DIVS 时它应该触发。我希望在克隆 div 时开始滚动。

任何的想法？

[http://jsfiddle.net/2mby5/13/](http://jsfiddle.net/2mby5/13/)

或者

```
var cloneCount = 0;
$("#add-address").click(function() {

     $("#to-add-address").clone()
        .attr("id", "to-add-address_Clone" + cloneCount)
        .insertAfter("#to-add-address").addClass('cloned');  //add a new class cloned to the cloned outerDivs
    $(".clone", "#to-add-address_Clone" + cloneCount)
        .attr("id", "clone_Clone" + cloneCount);
    cloneCount++;
     $('#scroll-addresses').scrollable();
});

$(document).on("click", '.options li a',function () {
            $(this).closest(".options").find('li a').removeClass('selected');
            $(this).addClass('selected');

        });
$(document).on("click", 'li.delete',function () {
            $(this).closest(".outerDiv").filter('.cloned').remove(); // and delete only the cloned ones
    if ($(this).is(".outerDiv:last")){
            return false;
    }   
});

 ​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:54:13.887

“您必须有一个可滚动的根元素，并且在该元素的另一个包装元素内。”

[http://jquerytools.org/demos/scrollable/index.html](http://jquerytools.org/demos/scrollable/index.html)

# sql-server - 在 select 语句中处理条件

> ID：10176295
> 
> 赞同：-2
> 
> 时间：2012-04-16T14:42:26.813
> 
> 标签：sql-server, sql-server-2005

我有一张这样的桌子：

顾客：

```
 customerID     joineddate                    
 111            2004-12-10 00:00:00.000
 111            2004-12-10 00:00:00.000
 111            2004-12-10 00:00:00.000 
 211            2004-12-10 00:00:00.000
 231            2004-12-10 00:00:00.000 
 231            2004-11-10 00:00:00.000 
 411            2008-12-10 00:00:00.000
 531            2009-12-10 00:00:00.000 
```

我已经从 2 个表中编写了查询，我在这些表中进行了连接并获得了类似上面的结果。但我需要得到这样的结果，我需要输入我的条件并得到如下结果。

```
 customerID     joineddate                 indicator      
 111            2004-12-10 00:00:00.000     3
 211            2004-12-10 00:00:00.000     1
 231            2004-12-10 00:00:00.000     1
 231            2004-11-10 00:00:00.000     1
 411            2008-12-10 00:00:00.000     1
 531            2009-12-10 00:00:00.000     1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:47:47.227

完全不知道您的其他表的名称或它与`customer`表的关系，这是我最好的猜测：

```
SELECT c.customerID, o.joineddate, indicator = COUNT(*)
  FROM dbo.customer AS c
  INNER JOIN dbo.[other table] AS o
  ON c.CustomerID = o.CustomerID
  GROUP BY c.customerID, o.joineddate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:49:29.210

谷歌搜索关键字

`GROUP BY`

和

`COUNT()`

功能。

# ruby - 参数未传递给 Sinatra 中的方法

> ID：10176296
> 
> 赞同：1
> 
> 时间：2012-04-16T14:42:28.827
> 
> 标签：ruby, sinatra, params

我正在构建一个 Sinatra 应用程序并以线性方式编写它（没有方法）以了解 Sinatra 的工作原理。现在我正在尝试重构它，但是我的表单提交中的参数没有传递给方法。以下是路线：

```
get '/' do
  erb :index  
end

post '/' do
  session = login(params[:username], params[:password])
  get_courses(session, params[:username])
  erb :index
end 
```

这是 index.erb

```
<% if !@courses %>
<form action="/" method="post">
  <input type="text" label="username" name="username">
  <input type="password" label="password" name="password">
  <input type="submit">
</form>
<% end %>

<% if @courses %>
<ul>
  <% @courses.each do |course| %>
  <li><%= course %></li>
  <% end %>
</ul>
<% else %>
<p>No course data yet.</p>
<% end %> 
```

我知道参数正在传递给 Sinatra，因为我能够对它们进行简单的放置，但是当我尝试将它们传递给方法时，我得到一个“ArgumentError at / wrong number of arguments (0 for 2)”。

**更新**

从与路由相同的文件中，这里是登录方法：

```
def login(username, password)
  login = Savon::Client.new($LOGIN_WSDL)
  login.http.auth.ssl.verify_mode = :none

  session = login.request(:login) do
    soap.body = { :id => username, :pw => password }
  end

  session.to_hash
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T01:33:42.320

我也只是在本地遇到了这个。

我发现，由于我不清楚的原因，中的键`#params` `Hash`总是`Strings`而不是`Symbols`. Sinatra 文档似乎反映了`Hash`是 a `HashWithIndifferentAccess`，或者键被自动符号化为`#params`方法的一部分。

不确定这是否与您遇到的问题相同，是否是意外行为或 Sinatra，或者我只是不擅长阅读文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:17:22.070

如果这很明显，请道歉，但是您是否在任何方法中定义了 @courses ？

像这样的东西：

```
def get_courses(session, username)
  # ...
  #some logic to figure out courses based on session and username
  # ...
  @courses = ["Some course", "Another course"]
end 
```

# html - 修复 cfloop 向 IE6 中的表添加不需要的空格的问题？

> ID：10176299
> 
> 赞同：2
> 
> 时间：2012-04-16T14:42:49.653
> 
> 标签：html, css, coldfusion, internet-explorer-6

我被迫让这个网站与 IE6 兼容。我希望我没有，但生活就是这样。

这就是问题所在。当我运行***cfloop query="thisqueryName"***时，它会在 overflow-y:scroll 表的顶部添加大约... 500-600px 的空白。

我尝试将表格顶部的位置强制向上以补偿额外的空白，但没有运气。

```
<div id="myDivid" >
<table id="thistablename">
    <!--- Here is the problem --->
<cfloop query="thisqueryname">
            <!--- End of Problem Code -->
    <cfquery name="thisotherqueryname" datasource="#Application.dsn#">
            SELECT  name
                    , frequency
                    , ninjaskills
            FROM    thistablename
            WHERE   tid = #ID#
                    AND status = 'A'
        </cfquery>
        <cfquery name="anotherqueryname" datasource="#Application.dsn#">
            SELECT  somestuffhere
            FROM    thisothertablenamehere
            WHERE   ID = #ID#
        </cfquery>
    <tr>
        <th class="numCol"></th> 
                   <!--- etc etc etc ---> 
```

（不，这不是我的命名模式（：名称已更改以保护无辜者等等）

任何解决此问题的修复或有用的建议将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:53:35.080

你有几个因素对你不利。在尝试与之抗争之前[了解是什么产生了空白。](http://cfbestpractices.blogspot.com/2012/03/understand-what-generates-whitespace.html)

1.  将您的查询和循环移动到页面顶部，并将它们包装在`<cfsilent>`.

2.  将您生成的实际 HTML 放入`<cfsavecontent>`.

3.  `<cfsavecontent>`输出您在模板的可视区域（`<cfsilent>`调用之外）中构建的单个变量。

4.  请确保，如果您有类似 Application.cfc 或 Application.cfm 之类的内容，则通过确保所有函数调用的输出属性设置为 false（对于 Application.cfc）或在一个Application.cfm，你`<cfsetting enablecfoutputonly=true>`在开始时有一个......`<cfsetting enablecfoutputonly=false>`最后是一个。

5.  If all else fails, and you still get whitespace at the start, you can "hack" in a suppressor with a `<cfcontent type="text/html; charset=UTF-8" reset="true" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:45:25.523

环绕`<cfsilent>`您的查询。那应该有帮助。

或者，`<cfsetting enableCFoutputOnly = "yes">`在页面顶部设置，然后仅将要输出的部分包装在`<cfoutput>`标签中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:48:16.070

另一种选择是将您正在做的事情分成两个循环。让第一个循环使用来自后续查询的数据来处理您的查询。然后第二个循环将纯粹用于输出。这应该可以防止它在您的表格中有很多额外的空白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T14:48:56.860

设置`<cfsetting enablecfoutputonly="true" />`在文件的顶部和`<cfsetting enablecfoutputonly="false" />`底部，`<cfoutput>...</cfoutput>`用于专门将内容输出到浏览器。只有 cfoutput 标记内的内容会输出到屏幕，包括空格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T14:52:46.120

```
<cfprocessingdirective suppressWhiteSpace = "yes"> 
```

或者，CF 管理员中的“启用空白管理”设置。

# c# - 动态设置 Func<> 类型

> ID：10176300
> 
> 赞同：8
> 
> 时间：2012-04-16T14:42:54.000
> 
> 标签：c#, types, func

有没有办法`Func<>`动态设置类型参数，所以我不必使用无穷无尽的`if`语句？

就像是：

```
Type t = Type.GetType("System.Decimal");
Func<t> foo = new Func<t>(some_function); 
```

代替：

```
Func<Decimal> foo = new Func<Decimal>(some_function); 
```

更新：

这是我的代码片段：

```
Type t = typeof(StavkaDokumenta).GetProperty(pd.Polje).PropertyType;
ParameterExpression pe = Expression.Parameter(typeof(StavkaDokumenta), "stavka");
Expression expr = Expressions.ResolveCompleteExpression(pe, pd.Expression);
Expression final = Expression.Convert(expr, t);
if (t == typeof(decimal))
{
    var lambda = Expression.Lambda<Func<StavkaDokumenta, decimal>>(final, pe);
    o = lambda.Compile().Invoke(stavka);
}
if (t == typeof(decimal?))
{
    var lambda = Expression.Lambda<Func<StavkaDokumenta, decimal?>>(final, pe);
    o = lambda.Compile().Invoke(stavka);
}
else if (t == typeof(int))
{
    var lambda = Expression.Lambda<Func<StavkaDokumenta, int>>(final, pe);
    o = lambda.Compile().Invoke(stavka);
}
else if (t == typeof(int?))
{
    var lambda = Expression.Lambda<Func<StavkaDokumenta, int?>>(final, pe);
    o = lambda.Compile().Invoke(stavka);
}
else if (t == typeof(string))
{
    var lambda = Expression.Lambda<Func<string>>(final, null);
    o = lambda.Compile().Invoke();
} 
```

pd.Polje 是字符串 - “StavkaDokumenta”类中的属性名称。pd.Expression 是必须计算为 Polje 类型的字符串表达式。stavka 是 StavkaDokumenta 的一个实例。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T14:47:13.947

现在您已经展示了您真正想要的内容，答案就简单多了：由于您显然只对该表达式的返回值感兴趣，因此您可以将代码更改为：

```
Type t = typeof(StavkaDokumenta).GetProperty(pd.Polje).PropertyType;
ParameterExpression pe = Expression.Parameter(typeof(StavkaDokumenta), "stavka");
Expression expr = Expressions.ResolveCompleteExpression(pe, pd.Expression);
Expression final = Expression.Convert(expr, t);

if (t == typeof(string))
{
    var lambda = Expression.Lambda<Func<string>>(final, null);
    o = lambda.Compile().Invoke();
}
else
{
    var lambda = Expression.Lambda(final, pe);
    o = lambda.Compile().DynamicInvoke(stavka);
} 
```

* * *

老答案：

您可以使用泛型和隐式转换`Func<T>`来实现这一点：

```
Func<T> GetFunc<T>(Func<T> func)
{
    return func;
} 
```

使用这样的方法组调用它：

```
var foo = GetFunc(SomeMethod); 
```

这假设`SomeMethod`看起来像这样：

```
decimal SomeMethod()
{
    // ...
} 
```

`foo`将是类型`Func<decimal>`。如果返回类型为`SomeMethod`a `string`，则类型`foo`为`Func<string>`。

* * *

此代码中发生的情况如下：

传递给的参数是`GetFunc`所谓的“方法组”，而不是类型的变量`Func<T>`。但是，存在从方法组到变量的隐式转换`Func<T>`：

```
Func<decimal> func = SomeMethod; // an implicit conversion happens here 
```

这种隐式转换正是这里发生的事情：在`GetFunc`调用之前，方法组`SomeMethod`被转换为 a 类型的变量`Func<T>`。用于的具体类型`T`由编译器根据方法的返回类型额外推断`SomeMethod()`。
我们的目标是`Func<T>`基于我们的方法组创建一个实例。并且因为在调用方法之前参数的转换已经发生了这种情况，所以我们只需从方法中返回创建的实例。

# matlab - 在 Matlab 中垂直检查像素

> ID：10176301
> 
> 赞同：0
> 
> 时间：2012-04-16T14:42:54.430
> 
> 标签：matlab

我有一个图像 (5x5) 像素，其中 3 个值分别为 0、128 和 255。

我想检查索引（1,1）到（1,5）的像素。

如果存在像素值 0（黑色），则索引 (1,1) 到 (1,5) 的像素更改为 128（灰色），如果没有，则将像素更改为 255（白色）。

我想再次执行这些步骤，检查索引（2,1）到（2,5），（3,1）到（3,5），一直到底部。

从上述问题中，我得到了这样的解决方案：

掩码 = repmat(any(I == 0,2),5,1);

我（掩码）= 128；

我（〜掩码）= 255；

但是如果我想垂直检查像素，从索引（1,1）到（5,1），然后向右，索引（1,2）到（5,2），直到结束。有什么解决办法？

谢谢你

问候， Wahyu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:53:21.747

您可以只转置矩阵/图像，使用您在上一个问题中给出的解决方案，然后再次转置以返回原始矩阵/图像：

```
I = I';
%# Do solution you got last time here
%#{

%#}

I = I'; 
```

# node.js - Node.js：通过 cluster.fork() 调用不同的行为

> ID：10176303
> 
> 赞同：0
> 
> 时间：2012-04-16T14:43:04.007
> 
> 标签：node.js, redis, cluster-computing, multiprocess

我正在使用 Node 和 Redis，如果发生事件，我需要向 redis 添加订阅者。问题是我只希望处理发生一次......而且我真的很喜欢只需要我的一个分叉进程来监听redis。

刚才我测试了是否可以在另一个文件中分叉一个新集群并让它从那里开始，但没有乐趣。有人知道怎么做吗？

我正在运行最新的稳定版 Node (0.6.15)

这是我的代码（2个文件）：

```
 clusterTest1:
---
var c2 = require('./clusterTest2');

console.log('clusterTest1');
//c2.test();
---

clusterTest2: 
---
var cluster = require ('cluster');

console.log('clusterTest2');

if (cluster.isMaster) {
    cluster.fork();
} else {
    console.log('cluster spawned');
}
--- 
```

输出：

clusterTest2 clusterTest1 clusterTest2 集群衍生 clusterTest1

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:25:54.010

我找到了一个解决方法，使用 process.env.NODE_WORKER_ID。可以根据 NODE_WORKER_ID 运行不同的代码，这解决了我只有一个实例订阅消息的问题。

# php - 连接某些带有条件的表时从其他表中求和数据

> ID：10176304
> 
> 赞同：0
> 
> 时间：2012-04-16T14:43:04.227
> 
> 标签：php, mysql, join, sum, left-join

我有一个复杂的问题。

我有一个查询，它结合了几个表中的数据。例如：

```
traffic: id, traffic_source_id, first_hit_date
goals: id, goal_type, goal_date, goal_value
traffic_sources: id, source_name 
```

目标类型可以是“联系表格”、“演示下载”、“购买”目标值是数字。并显示用户在同一日期（天）达到目标的次数。

我试图为每个 traffic_id 显示一行，然后为这个 traffic_id 总结每个目标。当用户第一次来时，他/她会得到一个与他在一起的流量 ID（cookie）。例如，他/她可以在第一个命中日期后一周达到一个目标，然后在 2 天后达到另一个目标。

我希望能够从 date > to date 查询并显示该特定范围内目标的正确总和值。当我尝试使用 SUM(CASE WHEN ...) 时，我不能只对目标表的范围求和。

示例： **流量** 从：2 月 1 日到 2 月 28 日

```
3 | google adwords | 0 contact | 1 demo download | 1 purchase
4 | facebook       | 1 contact | 3 demo download | 3 purchase 
```

但是当我想将范围从 1-feb 更改为 14-feb

```
3 | google adwords | 0 contact | 1 demo download | 0 purchase
4 | facebook       | 0 contact | 2 demo download | 2 purchase 
```

希望我足够清楚...

任何建议将不胜感激。

* * *

更新：查询我现在拥有的示例：

```
SELECT traffic.traffic_id as original_traffic_id hit_date, referrer, referrer_url, keyword, ip,
SUM(CASE goals.goal_type WHEN 'Contact' THEN 1 ELSE 0 END) goal_contact,
SUM(CASE goals.goal_type WHEN 'Download' THEN 1 ELSE 0 END) goal_download,
SUM(CASE goals.goal_type WHEN 'Signup' THEN 1 ELSE 0 END) goal_signup,
SUM(CASE goals.goal_type WHEN 'Purchase' THEN 1 ELSE 0 END) goal_purchase
FROM traffic
LEFT JOIN goals ON goals.traffic_id = traffic.traffic_id
WHERE traffic.traffic_id=100 AND hit_date >= '$from_date' AND hit_date <= '$to_date' 
```

（其中 $from_date 和 $to_date 是 mysql 日期格式）

（这不是真正的查询，因为原始查询要大得多，并且包括大约 7 个加入的表）此查询实际上汇总了所有目标，而不必输入 cound 目标日期。我希望能够将 SUM 限制在 $from_date 和 $to_date 的范围内

希望它更清楚一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:25:33.473

我还没有这个问题的答案，但我所做的是在第一个查询之前用另一个查询来总结所有目标。数组看起来像`$goals_array[traffic_id][goal_type] -> value`

在循环主 sql 时，只需从 $goals_array 中获取值。它工作得很快，尽管我希望在一个查询中做到这一点，但现在还可以。

# wpf - WPF/XAML - GroupBox 上的验证规则？

> ID：10176308
> 
> 赞同：0
> 
> 时间：2012-04-16T14:43:17.987
> 
> 标签：wpf, xaml, validationrules

我有一个数据输入表单，它的 DataCountext 绑定到一个 ViewModel 对象。

该表单包含（除其他外）许多 CheckBox 元素，每个元素都绑定到 ViewModel 中的一个布尔值。这些 CheckBox 分为两个 GroupBox。

有两个业务需求我不知道如何处理。

1.  组框 1 中的至少一个复选框被选中，或者组框 2 中的至少一个复选框被选中。
2.  如果选择了 groupbox 1 中的任何内容，则未选择 groupbox 2 中的所有内容，反之亦然。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:53:40.633

听起来像是我会在 ViewModel 中介绍的内容。VM 获取的是初始状态，该状态已经是有效状态（已选择某些内容）。如果用户现在选择了其他内容，您可以通过将其他组的属性设置为 false 来覆盖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:58:31.970

问题 1 的解决方案很简单 - 让 VM 中的属性设置器清除不应设置的字段。绑定将适当地更新显示。

问题 2 的解决方案有点复杂。如果我想在 GroupBox 级别显示错误，我需要将 BindingGroup 附加到 GroupBox，并为其添加适当的 ValidationRule。

# php - 从 Magento 中的脚本保存具有分级定价的产品模型时的奇怪行为

> ID：10176310
> 
> 赞同：3
> 
> 时间：2012-04-16T14:43:20.310
> 
> 标签：php, magento

当我尝试从具有分级定价的 Magento Enterprise 1.8 脚本中保存产品模型时，我发现了一些奇怪的行为。

以这段代码为例：

```
// This product has a tier price
$product = Mage::getModel('catalog/product')->load(194760);
$product->setName('Changed Product Title');
$product->save(); 
```

保存时获取异常（详情如下）。但是，如果我不更改模型中的任何内容，则不会出现异常。我有一种感觉，这是因为我没有更新任何东西，所以 Magento 没有做太多的工作。

```
// Same product, but I changed nothing and it works 
$product = Mage::getModel('catalog/product')->load(194760);
$product->save(); 
```

奇怪的是，如果我正在设置或修改等级价格信息，我能够成功保存产品（等待我不创建任何重复的东西）

```
// This works pending the tier price does not already exist
$mud_array = array();
$mud_array[] = array(
    'website_id' => 0,
    'cust_group' => 32000,
    'price_qty' => 5,
    'price' => 6
);
$product = Mage::getModel('catalog/product')->load(194760);
$product->setTierPrice($mud_array);
$product->save(); 
```

我看到的异常如下：

> 致命错误：未捕获的异常“Mage_Eav_Model_Entity_Attribute_Exception”和消息“SQLSTATE [23000]：完整性约束违规：1062 /path/to/magento/app/ 中键“UNQ_CATALOG_PRODUCT_TIER_PRICE”的重复条目“194760-1-0-5.0000-0”代码/核心/法师/Eav/模型/实体/Abstract.php:61

因此，当产品中存在等级价格时，如果您尝试更改模型中的任何内容，它将尝试重新插入所有等级价格信息。

有没有人见过这个？有没有办法解决这个问题？感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T09:59:31.697

我在使用 EE 1.12 时遇到了同样的问题，但使用了“group_price”属性。只是通过在我的脚本的乞求中添加来修复错误

> 法师::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:40:23.093

好的，所以我为此创建了一个似乎可行的修复程序。

在 /app/code/core/Mage/Catalog/Model/Resource/Eav/Mysql4/Product/Attribute/Backend/Tierprice.php 中有一个名为 savePriceData 的函数。据我所知，这个函数负责确定我们是否需要更新或插入等级价格。

有一个 if 块根据来自传递给函数的 $priceObject 的信息做出更新或插入的决定。

如果您从管理面板更新等级价格，priceObject 有两个值 value_id 和 value。这些字段都指向 catalog_product_entity_tier_price 表中的列。这就是 if 块的第一部分发生的情况

如果您从管理面板创建新的层价格，priceObject 具有 catalog_product_entity_tier_price 表中的所有列（entity_id、all_groups、customer_group_id、qty、value 和 website_id）。Magento 然后获取此信息并将其插入到 catalog_product_entity_tier_price 表中。

实际的问题是，当您从脚本（也就是管理面板之外）保存产品时，您总是会得到一个包含所有插入信息的 priceObject。所以它总是会尝试插入到表中，如果它已经存在会导致违反完整性约束。

所以我为此做的修复非常简单。在 if 块的第二部分，我正在检查表中是否已经存在等级价格，如果是，我根本不进行插入。这是代码：

```
... first part of if statement
// somehow we need to have this not happen if it already exists
$reader = $this->_getReadAdapter();
$sql = "SELECT * FROM catalog_product_entity_tier_price WHERE ";
foreach($data as $index => $value) {
$sql .= $index . ' = ' . $value . ' AND ';
}
$sql = substr($sql, 0, -4);
$search = $reader->fetchAll($sql);
if(count($search) > 0) {
// It already exists, don't do anything
} else {
$adapter->insert($this->getMainTable(), $data);
} 
```

显然，您确实应该确保在进行此更改之前将此文件复制到本地（或者更好的是，在模块中重写它）。这可能不是做到这一点的最 100% 正确的“Magento 方式”，但我真的需要尽快找到解决方案。

我愿意接受比这更好的解决方案，但我想分享我的发现

（注意：由于我使用的是 Magento 企业版，因此​​我不想再分享不必要的源代码，因为这可能违反我们的许可协议）

# ios - 在情节提要中连接 Cell Prototype 的插座

> ID：10176312
> 
> 赞同：38
> 
> 时间：2012-04-16T14:43:27.360
> 
> 标签：ios, uitableview, storyboard, iboutlet

我是故事板的新手，所以我遇到了一些困难......

我创建了一个 TableViewController，我想自定义 Cell 原型。在单元原型中，我添加了几个标签，我想用我自己的继承自 UITableViewCell (AreaListCell) 的类进行自定义。在情节提要中，对于单元原型，我使用“AreaListCell”配置了自定义类，其样式为“自定义”。

在情节提要中，当我选择 Cell Prototype 和助手时，助手会显示我的实现 UITableViewController (AreasTableViewController) 的类，而不是
我的“AreaListCell”类。

结果是我可以创建出口（使用 Ctrl + 从 Cell Prototype 的标签拖动）到 AreasTableViewController 类，但不能创建到 AreaListCell 类！知道如何将 Cell Prototype 与我的 AreaListCell 类连接起来吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-04-16T18:57:49.527

**更新：从 Xcode 4.6（可能更早）开始，您现在可以通过控制拖动来创建插座！- 这必须在接口部分或类扩展中完成（默认情况下，新单元子类的类扩展不存在。感谢 Steve Haley 指出这一点。**

不能通过在助手编辑器中拖入代码块来自动连接和创建插座，这很糟糕，但是您可以手动创建插座然后连接它们。

在您的单元子类接口中：

```
@interface CustomCell : UITableViewCell

@property (nonatomic) IBOutlet UILabel* customLabel;

@end 
```

在实现中正常合成。

在情节提要中，选择单元格并转到连接检查器，您将看到新的插座。从那里拖到原型中的相关元素：

![在此处输入图像描述](../Images/8db2047cc7b980f0ebab2d98331b9696.png)

现在可以按照`cell.customLabel`您的`cellForRowAtIndexPath:`方法访问它。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-16T15:06:41.947

是的，您无法使用 ctrl+drag 方法连接自定义原型单元内的视图。而是使用视图的标签属性，然后在构建单元格时使用它们的标签拉出标签。

这里：

```
//Let's assume you have 3 labels.  One for a name, One for a count, One for a detail
//In your storyboard give the name label tag=1, count tag=2, and detail tag=3

- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomTableViewCell *theCell = [tableView dequeueReusableCellWithIdentifier:@"Prototype Cell"];

    UILabel *nameLabel = (UILabel *)[theCell viewWithTag:1];
    UILabel *countLabel = (UILabel *)[theCell viewWithTag:2];
    UILabel *detailLabel = (UILabel *)[theCell viewWithTag:3];

    nameLabel.text = @"name";
    countLabel.text = @"count";
    detailLabel.text = @"details";

    return theCell;
} 
```

您还可以在自定义单元格代码中将标签设置为属性，然后在初始化单元格时使用 viewWithTag 调用将标签属性分配给您在情节提要上创建的标签。

我花了几天时间才意识到我无法从自定义单元格中按 ctrl+拖动来创建 IBOutlet。

祝你好运！

编辑：您可以在自定义单元格内为您的标签创建 IBOutlets 并以编程方式创建链接，而不是通过 ctrl+drag 方法。

编辑2：我完全错了，你可以ctrl+drag。请参阅此问题的第二个答案。这很棘手，但效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-27T11:51:27.290

**斯威夫特 3**

// 如果您的图像在服务器上，我们将使用它。

// 我们从一个 url 获取图像。

// 你可以从你的 Xcode 中设置图像。

1.  图片的 URL 在数组中 name = thumbnail 即 self.thumbnail[indexPath.row]
2.  在 UITableviewCell 上将 imageView 放在单元格上
3.  选择 UIimageView 从情节提要中为其分配一个标签。

    ```
    let pictureURL = URL(string: self.thumbnail[indexPath.row])!
    let pictureData = NSData(contentsOf: pictureURL as URL)
    let catPicture = UIImage(data: pictureData as! Data)
    var imageV = UIImageView()
    imageV = cell?.viewWithTag(1) as! UIImageView
    imageV.image = catPicture 
    ```

# web-services - WebService在jsf中找不到facescontext

> ID：10176316
> 
> 赞同：0
> 
> 时间：2012-04-16T14:43:44.257
> 
> 标签：web-services, jsf

我正在尝试在 webservice 方法中调用托管 bean。它抛出一个`NullPointerException`因为`FacesContext.getCurrentInstance()`返回`null`。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:08:57.843

JSF 是一个基于组件的 MVC 框架，由`FacesServlet`. 该 servlet 也是负责创建`FacesContext`. 如果您的 HTTP 请求没有`FacesServlet`像您使用由完全不同的 servlet 控制的完全独立且独立的 Web 服务框架时那样提供服务，则`FacesContext`根本不可用。然后`FacesContext#getCurrentInstance()`将返回`null`。

尝试在 Web 服务方法中调用 JSF 托管 bean 是没有意义的。这就像在工作中使用了错误的工具一样。只需将您需要执行的代码重构为一个新的独立类，您最终只需在 JSF 托管 bean 和 webservice 类中导入/注入即可。

# asp.net - System.ArgumentException：字符串值无法转换为日期

> ID：10176327
> 
> 赞同：1
> 
> 时间：2012-04-16T14:44:28.390
> 
> 标签：asp.net, ajax, vb.net, visual-studio, visual-studio-2010

我有一个使用 Ajax 日期日历的 Web 表单。这工作正常。我遇到的问题是，当我提交表单时，我收到以下消息。

```
'String value can not be converted to a date' .AgendaDate = New SmartDate(txtAgendaDate.Text) 
```

这是我的 Web 表单，其中包含日历和相关的文本框...

```
 <td>
     <asp:TextBox ID="txtAgendaDate" runat="server" ForeColor="Black" ></asp:TextBox>
 </td>
 <td>
     <asp:ImageButton runat="Server" ID="ImageButton1" ImageUrl="~/images/calendarpic.png" 
                AlternateText="Click here to display calendar" />

     <cc1:calendarextender ID="CalendarExtender1" runat="server" 
                     TargetControlID="txtAgendaDate" PopupButtonID="ImageButton1" >
     </cc1:calendarextender>
 </td> 
```

我有一个带有相关属性的类，用于 Web 表单。除了 ajax 日历的文本字段之外，其余字段都工作并将数据提交到数据库。

这是我的类代码和 txtAgendaDate 代码的精简版本...

```
#Region " Agenda Variables "

'Declare Variables and data types and set default values
Private mAgendaID As Integer = 0
Private mOrganiser As String = ""
Private mMeeting As String = ""
Private mAgendaDate As SmartDate = New SmartDate()

#End Region

#Region " Constructors "

Public Sub New()
End Sub

Public Sub New(ByVal reader As SafeDataReader)
    '  Public Sub New(ByVal reader As SQLDataReader)

    'Combine variables & property types
    With reader
        mAgendaID = .GetInt32("AgendaID")
        mOrganiser = .GetString("Organiser")
        mMeeting = .GetString("Meeting")
        mAgendaDate = .GetSmartDate("AgendaDate")
    End With
End Sub

#End Region

#Region "Properties"

'Define form field properies so that they can be used when adding the data to the database on the add button is pressed.
Public Property AgendaID() As Integer
    Get
        Return mAgendaID
    End Get
    Set(ByVal Value As Integer)
        mAgendaID = Value
    End Set
End Property

Public Property Organiser() As String
    Get
        Return mOrganiser
    End Get
    Set(ByVal value As String)
        mOrganiser = value
    End Set
End Property

Public Property Meeting() As String
    Get
        Return mMeeting
    End Get
    Set(ByVal value As String)
        mMeeting = value
    End Set
End Property

Public Property AgendaDate() As SmartDate
    Get
        Return mAgendaDate
    End Get
    Set(ByVal Value As SmartDate)
        mAgendaDate = Value
    End Set
End Property

#End Region

End Class 
```

这是我的命令，它看起来连接到数据库和存储过程，并且还具有参数。

```
Public Class Agenda_TempDAL

Public Shared Function AddAgenda_Temp(ByVal Agenda_Temp As Agenda_Temp) As Integer

    'Declare i as integer as 0
    Dim iAgendaID As Integer = 0

    'Database conn, this is linked to the web config file .AppSettings
    Using dbconnection As New SqlConnection(ConfigurationManager.AppSettings("dbconnection"))
        dbconnection.Open()

        'Command to state the stored procedure and the name of the stored procedure
        Using dbcommand As SqlCommand = dbconnection.CreateCommand
            With dbcommand
                .CommandType = CommandType.StoredProcedure
                .CommandText = "Stored_Proc_Name"

                'Create parameter for AgendaID and output
                Dim oParam As New SqlParameter
                oParam.ParameterName = "@AgendaID"
                oParam.Direction = ParameterDirection.Output
                oParam.SqlDbType = SqlDbType.Int

                'Create parameters for the remaining fields
                .Parameters.Add(oParam)
                .Parameters.AddWithValue("@Organiser", Agenda_Temp.Organiser)
                .Parameters.AddWithValue("@Meeting", Agenda_Temp.Meeting)
                .Parameters.AddWithValue("@AgendaDate", Agenda_Temp.AgendaDate.DBValue)

                'Simply execute the query
                dbcommand.ExecuteNonQuery()

            End With
        End Using
    End Using

    'Need to return the agendaID as an integer.
    Return iAgendaID

End Function
End Class 
```

这是网页按钮背后的代码。这是基于属性/字段导致错误的页面。问题出在这条线上...

```
.AgendaDate = New SmartDate(txtAgendaDate.Text) 
```

按钮的完整代码在这里...

```
Protected Sub btnAddAgendaTemplate_Click(ByVal sender As Object, ByVal e As    System.EventArgs) Handles btnAddAgendaTemplate.Click

    'This works alongside the Class named Agenda_Temp which has the properties and DB connection assigned to it for each web form field.
    Dim oAgenda_Temp As New Agenda_Temp

    'Within the object Agenda_Temp Class use the properties defined. 
    'They are required to be defined in the Agenda_Temp/ app code so we can use them within here.

     With oAgenda_Temp
        .Organiser = txtOrganiser.Text
        .Meeting = txtMeeting.Text
        .AgendaDate = New SmartDate(txtAgendaDate.Text)

        'Within the object Agenda_Temp class use the defined DAL which includes all the DC connect and stored procedures.  
        oAgenda_Temp.AgendaID = Agenda_TempDAL.AddAgenda_Temp(oAgenda_Temp)
    End With

End Sub
End Class 
```

我知道它告诉我字符串值无法转换为日期，但我不知道如何解决这个问题，因为我是 .net 2010 的新手？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:47:51.043

在更新之前将字符串转换为日期：来自 MSDN：

```
string date = "01/08/2008";
DateTime dt = Convert.ToDateTime(date); 
```

你的会变成

```
DateTime dt = Convert.ToDateTime(txtAgendaDate.Text) 
```

然后将日期传递给您的`SmartDate`构造函数：

```
oAgenda_Temp.AgendaDate = new SmartDate(dt) 
```

最终结果：

```
 With oAgenda_Temp
        .Organiser = txtOrganiser.Text
        .Meeting = txtMeeting.Text
        .AgendaDate = New SmartDate(Convert.ToDateTime(txtAgendaDate.Text))

        'Within the object Agenda_Temp class use the defined DAL which includes all the DC connect and stored procedures.  
        oAgenda_Temp.AgendaID = Agenda_TempDAL.AddAgenda_Temp(oAgenda_Temp)
    End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:12:39.777

正如其他人指出的那样，您需要将输入值转换为`DateTime`. 我不知道该`SmartDate()`函数在做什么，但错误消息清楚地表明该值无法转换为日期。

其次，我会添加一些验证以确保在您提交页面之前输入是有效的。使用`RequiredFieldValidator`和`CompareValidator`或`RegularExpressionValidator`：

```
<asp:TextBox ID="txtDate" runat="server" ... />
<asp:RequiredFieldValidator ID="reqDate" runat="server" ErrorMessage="Required" Display="Dynamic" ControlToValidate="txtDate"></asp:RequiredFieldValidator>
<asp:RegularExpressionValidator ID="regDate" runat="server" ControlToValidate="txtDate" ErrorMessage="Please enter a valid date in the format (mm/dd/yyyy)" ValidationExpression="^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d$"></asp:RegularExpressionValidator> 
```

# c# - 如何在.net webbrowser 组件中设置代理参数（主机、用户名、主机和密码）？

> ID：10176328
> 
> 赞同：2
> 
> 时间：2012-04-16T14:44:29.280
> 
> 标签：c#, .net, authentication, proxy, browser

我正在尝试使用 webbrowser 在导航中设置代理配置，但我不知道如何传递用户和密码。我尝试使用这种方式来设置代理配置：http: [//blogs.msdn.com/b/jpsanders/archive/2011/04/26/how-to-set-the-proxy-for-the-webbrowser -control-in-net.aspx](http://blogs.msdn.com/b/jpsanders/archive/2011/04/26/how-to-set-the-proxy-for-the-webbrowser-control-in-net.aspx)

如果我只传递主机和端口，它是有效的，但如果我传递用户和密码，它就不起作用（我使用这种格式传递：“用户：密码@主机：端口”）

有人可以帮助我吗？

谢谢

# mongodb - MongoDB意外令牌？使用 $gte 时

> ID：10176329
> 
> 赞同：0
> 
> 时间：2012-04-16T14:44:32.073
> 
> 标签：mongodb, database

我正在尝试根据“end_date”字段获取所有大于当前日期的文档。

我正在使用这个：

```
db.collection.find({end_date: {$gte: new Date()}}) 
```

但是我在附近遇到语法错误 ``{end_date:'`

语法似乎是正确的 - 我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:01:53.230

这种语法对我来说很好用：

```
derick@whisky:/tmp$ mongo
MongoDB shell version: 2.0.3 
connecting to: test 
> use demo 
switched to db demo 
> db.collection.find({end_date: {$gte: new Date()}})
> 
```

# php - 默认选项并返回 NULL

> ID：10176332
> 
> 赞同：0
> 
> 时间：2012-04-16T14:44:39.767
> 
> 标签：php

试图弄清楚如何更好地编写这段代码。我想获取花名册成员的列表，然后为视图下拉列表创建一系列选项以显示在选择下拉列表中，并且还可以选择显示“请选择一个选项”。但是，如果从 getAllRoster 函数返回的内容是 NULL，如果查询没有返回任何结果，这就是我返回的内容。我应该如何处理我只想显示空选项的内容。

另外我需要考虑的是执行一个函数来检索该特定事项的所有盟友，然后将该盟友显示为每个下拉列表的下拉列表中的默认盟友。

控制器：

```
$rosterList = $this->bios->getAllRoster();
$allies = array();
$allies[''] = 'Please Select An Opion';
foreach ($rosterList AS $ally)
{
    $allies[$ally->id] = $ally->rosterName;
} 
```

看法：

```
<?php echo form_label( 'Ally 1', 'ally1'); ?>
    <div>
    <?php echo form_dropdown( 'ally1', $allies, ''); ?>
</div>
<?php echo form_label( 'Ally 2', 'ally2'); ?>
    <div>
    <?php echo form_dropdown( 'ally2', $allies, ''); ?>
</div>
<?php echo form_label( 'Ally 3', 'ally3'); ?>
    <div>
    <?php echo form_dropdown( 'ally3', $allies, ''); ?>
</div> 
```

**编辑 ：**

我想要做的是，如果 allies 数组为空，它需要显示消息 No wrestlers in database 但它在我的视图文件中给我一个错误。

控制器： [pastebin.com/1Bf721zJ](http://pastebin.com/1Bf721zJ)

看法：

```
<?php echo form_label( 'Ally 1', 'ally1'); ?>
<div>
        <?php if ($allies[''] == 'No Wrestlers In Database') {
            echo $allies[''];
        }
        else {
            echo form_dropdown( 'ally1', $allies, '');
        } ?>
    </div> 
```

我也对某事感到好奇。我有一个 alliesList 变量，它的值要么是结果集，要么是 null，如果它的结果​​集是让每个盟友成为每个下拉列表中的默认值，我想要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:27:05.377

我不确定我是否完全理解你的问题，但如果我是对的，你就不能这样做

```
if $_GET['allies'] == "Please select an option"{
    $something = Null
}
else{
    $something = $_GET['allies']
} 
```

并`$something`在您会使用的地方使用`$_GET['allies']`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:38:45.340

你可以这样做：

```
$rosterList = $this->bios->getAllRoster();
$allies = array();

if (empty($rosterList) {
    $allies[] = 'nothing to display';
}
 else
{
    $allies[] = 'Please Select An Option';
    foreach ($rosterList AS $ally)
    {
        $allies[$ally->id] = $ally->rosterName;
    }
} 
```

同样在您看来，如果您不想显示下拉菜单，则可以输入条件以显示其他内容，例如：

```
 <?php if ($allies[0] == 'nothing to display') {
echo $allies[0]
}
else {
  echo form_dropdown( 'ally1', $allies, '');
} ?> 
```

# ios5 - 删除 SQLite3 中的转义引号

> ID：10176344
> 
> 赞同：0
> 
> 时间：2012-04-16T14:45:25.007
> 
> 标签：ios5, sqlite, replace, escaping

全部，

我正在尝试清理 SQLite 数据库中的数据，其中包含大量转义的单引号和双引号。

示例：\"Text\" 到处都有这样的 \'junk\'。

当我执行 SELECT 以查看 REPLACE 函数是否具有正确的模式时，REPLACE 不起作用：

```
-- replace escaped single quotes
SELECT id,subject,body,replace(body,"\\'","'") as `clean-body` 
FROM article
WHERE id=1118 
```

感谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:15:42.150

无需转义反斜杠。试试这个代替你原来的电话`replace`：

```
replace(body,"\'","'") 
```

# php - PHP整理上传的照片

> ID：10176346
> 
> 赞同：5
> 
> 时间：2012-04-16T14:45:27.440
> 
> 标签：php, image, upload, file-organization

我正在构建一个允许用户上传照片的 PHP 应用程序。为了便于管理，一个文件夹最多可包含 5000 张照片。每张上传的照片都会在数据库中分配一个ID，并且照片将被重命名为ID。

如何检查某个文件夹是否有 5000 张照片？我应该检查照片表中最后一行的 ID 吗？

文件夹应以递增方式命名。例如。`folder_1`,`folder_2`等。

我建议的步骤：

1.  检索照片表的最后插入 ID
2.  (Last_insert_ID + 1) % 5000 = Some_number （应该保存的文件夹编号）
3.  将照片保存到 folder_some_number。如果文件夹不存在，则新建一个。

还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:47:52.683

我猜数据库读取将比这样的文件系统读取更快。

你最好运行一个 sql 查询并获得每个文件夹的计数，分组。

```
// Example Query
SELECT COUNT(file), folderId As Count FROM photos WHERE folderId IN ('1', '2') GROUP BY folder
// It would be beneficial to have a flag on the folders that would enable or disable them
// that way you're not iterating through folders that we already know are > 5k
// You would run this and have seperate query that would pull in these folder names
// and passing them to the above query.
SELECT foldername, folderId FROM folders WHERE countFlag = 0;

//Example Conditional.
if($Count > 5000):
  // Over 5k Do Something
  //Since were over 5k, set this folders flag to 1
  // that way we arent iterating through it again
  $countFlag = 1;
else:
  // Under 5k Do Something else
endif; 
```

**注意：**如果您需要实际的代码示例，我可以快速制作一些东西。上述示例省略了实际工作代码，仅用于理论目的。*您将需要遍历返回的行，因为它们按文件夹分组。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:07:40.957

```
$last_id; // for example 9591
$current_folder = floor($last_id/5000);
$picture_num_in_folder = $last_id-($current_folder*5000);
if ($picture_num_in_folder == 5000)
    // new dir and such (new folderid = $current_folder+1 and $picture_num_in_folder = 1)
else
    // just place the picture with unique ID $last_id+1 called image_$picture_num_in_folder+1 in folder $current_folder 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T14:53:12.600

不要使用自动增量 ID 进行计算。当您删除文件时，您的 ID 序列中会出现漏洞，这会影响您的数学运算。将文件路径保存到您的数据库表。然后做一个简单的 COUNT：

```
SELECT filepath, COUNT(filename) AS num FROM mytable
GROUP BY filepath; 
```

您可以将新文件保存到 num < 5000 的文件路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T14:54:05.460

使用插入 ID 可能不是很准确，因为有许多错误情况会导致 ID 被“跳过”。您可以将文件夹编号存储在名为“folder_number”或类似名称的单独列中。这样您可以获得最高的文件夹编号，然后对该文件夹中的记录数进行计数，如果小于 5000，则将其添加到同一文件夹中，否则运行您的逻辑以增加文件夹计数（创建物理文件夹）。

这应该比使用文件系统检查要快，对于您正在谈论的文件量来说，这可能会很慢。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T14:55:49.820

让我建议另一种方法：在图片 ID 上使用散列并使用前几个字符作为路径，例如，假设图像 ID 为 1，散列为`c4ca4238a0b923820dcc509a6f75849b`. 创建目录结构`/rootpath/images/c/4/c/`并在其中保存图像。您可以使用`mkdir()`创建嵌套目录，例如`mkdir( '/dir/c/4/c/', 0777, true );`.

通过这种方式，您可以自动将负载分配到多个文件夹中，并且 ID 本身就是路径。

如果我没记错的话，WordPress 使用类似的东西......

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-16T14:52:43.463

如果你想这样组织你的文件夹和文件，你不需要检查文件夹是否有5000个文件，只需将文件分配到相应的文件夹即可。

如果 ax 文件夹中应该满的文件少于 5000 个（因为最后一个 ID 大于 5000*x），这意味着一些图像已被删除。您无法将该 ID 重新分配给数据库中的一行，因此您无法重新填充已删除文件的空间。

# windows-phone-7 - Windows Phone：目标、品牌

> ID：10176349
> 
> 赞同：1
> 
> 时间：2012-04-16T14:45:30.840
> 
> 标签：windows-phone-7, target

我有一个将由不同的供应商提供的应用程序。所以我需要交换背景等，ss 可能每个应用程序都有某种唯一标识符，我也需要不同的项目。在 windows phone 上执行此操作的最佳做​​法是什么？我必须编写自己的“包装器”-项目吗？（在 iOS 中有一个称为目标的概念，我只是链接相关的品牌文件、应用程序名称、标识符等）

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:05:08.167

在 XAML 中，您可以使用样式和模板来动态更改应用程序的整体外观。

同样的原则也适用于 Windows Phone 应用程序。然后您所要做的就是维护不同样式的 xaml 文件并应用它们来创建独特的构建，或者在应用程序启动时应用它们。

**更新：**正如 willmel 在下面建议的那样，我忘了提到，[这里](http://msdn.microsoft.com/en-us/Video/gg241256)提到的本地化技术是维护应用程序字符串的好方法。

**更新 2：**您可以将“主题”打包到单独的 ZIP 文件中，如此处所示[，](http://www.jebishop.com/2009/11/25/dynamic-theming-in-silverlight-with-implicit-styles-plus-custom-build-events/)并使用构建后事件和 VS 命令来创建不同的包。您也可以随时从命令行调用 msbuild 并进一步自定义构建过程。您也可以通过这种方式使用不同的清单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:40:22.273

如果您有指定语言的提供商信息，您可以在此处下载示例项目： [http ://www.pocketpc.ch/windows-phone-7-entwicklung/158405-textbox-string-integer.html#post1381376](http://www.pocketpc.ch/windows-phone-7-entwicklung/158405-textbox-string-integer.html#post1381376)

或者[这里](http://go.microsoft.com/fwlink/?LinkID=229128)的另一个，或者在[VB中](http://go.microsoft.com/fwlink/?LinkID=229345)

一旦您知道提供者，您就可以选择您的资源文件。 [Tim Heuer 的那篇文章](http://timheuer.com/blog/archive/2009/08/26/silverlight-string-localization.aspx)可以展示如何在 XCode iOS 中使用的不同情况下减少工作量。除了字符串之外，您还可以使用图像 URL。

![资源](../Images/a39ce35f7629150b1a81bdb55d4a339c.png)

# git - 撤消已推送的合并

> ID：10176352
> 
> 赞同：13
> 
> 时间：2012-04-16T14:45:40.053
> 
> 标签：git, merge, reset, revert

好吧，我弄得有点乱。显然，在我家里的机器上，开发分支没有更新。我做了一个提交并推送。结果是实际的 origin/develop 分支已合并到我的本地开发分支中 - 由于某种原因被视为不同的分支！

一方面，我真的不明白这是怎么发生的，其次，我可以撤消吗？

为了说明这一点，网络现在看起来像这样：

```
 local-develop ---------------------------------- C*--- M -
origin/develop --- C --- C --- C --- C --- C --------- / 
```

我真正想要的是 C* 将致力于起源/开发而不是合并分支。

正如我所说，这已经被推动了。有没有办法删除更改并按照我想要的方式提交？

例如我这样做：

```
git reset --hard HEAD~1 
```

我不确定这是否会撤消合并并且我有两个不同的开发，然后合并删除等等......？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-16T20:56:56.070

合并不会在推送时发生，它们会发生在`git merge`（嗯，`pull`但这实际上只是 fetch + merge，因此，合并发生在合并时）。

你似乎更有可能做了这样的事情：

```
<get copy from origin/develop>
<wait around for remote's origin/develop to acquire new commits>
git checkout develop      # get onto (local) develop branch
<edit>
git commit -m message     # create some new commit(s)
git push origin develop   # attempt to push -- but this fails!
git pull 
```

这是创建合并提交的最后一步（`M`上面），因为`pull`意味着`fetch`（获取所有现在位于的新提交`origin/develop`），然后`merge`（获取您的本地`develop`并将您的提交与刚刚获取的新提交合并）。

如果你还没有`git push`编辑这个*新*结果，那么远程仓库没有你的*本地*提交，你标记的那些`C*`和`M`. 在这种情况下，你的状态很好！（您可以通过`git fetch`再次运行来检查以确保您的本地存储库`origin/develop`与远程存储库中的匹配，然后`git log origin/develop`查看其中的内容。）

记住这里有两个完全独立的 git 存储库可能会有所帮助：你的，你的东西；和你在`origin`这里打电话的那个。（我们称那台机器`X`为 。）如果您要登录到`X`，它有自己独立的提交历史和分支名称等等。在那里，您将目录更改为 repo，运行`git log -1 develop`，然后查看该分支的顶端有什么。

现在，如果您注销`X`并回到您自己的机器上，您可以运行`git log -1 origin/develop`. 如果这与您在 上看到的相同`X`，则`get fetch`无需更新，因为`git fetch`实际上（但更有效），登录`X`并查看`develop`其中的内容。任何`X`你没有的东西`origin/develop`，都会`fetch`带来并添加到`origin/develop`。现在您与`X`. `X`没有你的东西，但你有他们的。

如果你然后采取额外的步骤做 a `merge`（包括由 暗示的那个`pull`），git 将，如果它必须，做一个合并提交......但所有这些都在*你的*repo 中，在分支的顶端（仍然`develop`在这个案例）。除非并且直到您将此合并提交推送到`X`（或有人`X`从您那里拉出您的提交，但我们现在暂时忽略它:-)），`X`否则不会拥有它。

无论如何，只要远程（`X`此处）没有您的合并提交，您就是黄金。因为*他们*没有，其他人也没有。你可以做一个`rebase`你的`develop`分支，把你的 commit( `C*`) 放在`origin/develop`. 这将摆脱合并提交（`M`），然后您可以将简单的快进推送到`origin/develop`.

如果`X` *确实*有您的合并提交（即，如果您在`pull`编辑后推送并获得了该合并），那么您（在某种程度上）被卡住了，因为可能其他人可以访问`X`并且现在正在使用您的合并提交。可以回滚 repo on `X`，类似于您可以在自己的 repo 中使用 etc 执行此操作的方式`git reset`，`git rebase`但这通常是一个坏主意。

* * *

现在，假设您实际上*已经*`X`推送到另一个 repo（在 machine 上），但是您绝对确定没有其他人看到您的更改，并且您肯定会重置它们，而不是还原它们（还原相当于“坦白”并留下糟糕的记录，这让其他人可以轻松地从中恢复，但也让他们看到你的错误:-)）。¹

这是诀窍：您首先需要让机器 X 的存储库说“分支的尖端`devel`是提交 C7”，其中 C7 在您之前的图表中，只是重新编号，以便我可以以不同的方式命名每个提交：

```
--------------------------- C*--- M
--- C4 --- C5 --- C6 --- C7 ---- / 
```

那么，你怎么能这样做呢？好吧，一种方法是登录`X`, ² `cd`进入 repo（即使它是`--bare`），然后`git update-ref`在那里使用。假设 C7 的 SHA1 实际上是`50db850`（如“git log”所示）。然后你可以这样做：

```
localhost$ ssh X
X$ cd /path/to/repo.git
X$ git update-ref refs/heads/develop 50db850 
```

但是，如果您无法登录`X`，或者只是不想登录，您可以使用`git push -f`. ³ （这还有其他优点：特别是，一旦成功完成，您的 git repo 就会知道`origin/develop`已经倒带`push -f`。）只需创建一个指向正确提交的本地分支提示：⁴

```
localhost$ git branch resetter 50db850
localhost$ git log resetter         # make sure it looks right
...
localhost$ git push -f origin resetter:develop
Total 0 (delta 0), reused 0 (delta 0)
To ssh://[redacted]
 + 21011c9...50db850 resetter -> develop (forced update)
localhost$ git branch -d resetter   # we don't need it anymore 
```

完成此操作后，机器 X 将恢复到您想要的状态，并且您可以继续进行，就好像您从未推送过您不喜欢的合并一样。

请注意，当您执行 时`push -f`，如果其他人在 之上进行了新提交`M`，这些*也*`lost+found`将变得不可见（从技术上讲，它们与您的合并提交一起仍然存在，但它们在`git fsck --lost-found`, 和几个月后，它们真的会永远消失）。⁵

同样**非常重要**：这种“共享存储库的回滚”对于共享存储库的其他用户来说是一个很大的痛苦，所以在你这样做之前一定要确定它是好的。

* * *

¹这种微不足道的合并甚至不需要还原。将合并留在那里没有根本性的问题。但是，如果您正在处理更严重的错误合并，那么除了“oops”的记录之外，恢复合并还有另一个缺点：它使稍后“重做”更改变得更加困难，因为稍后的“合并故意”将看到较早的合并并认为：好的，我不需要重新合并*那些*更改。然后，您必须改为“还原还原”。

我认为正确的外卖教训是：在你推动之前**看看（`git log`），**以确保你要推动的是你打算推动的东西。

²或者，更简单、更简单：`git ls-remote`. 这使用获取协议代码来查看遥控器有什么。但它隐藏了我要在这里讨论的主题，即：遥控器和你的一样是一个 repo！

³即将发布的 git 版本 2 具有新的“安全功能”，可用于`git push -f`. 但他们还没有出来，所以这对你没有帮助。稍后我会重新编辑它，以记录它们。在此之前，请*务必*小心：此时，您正在与任何试图将新内容推送到共享存储库的人竞争。

⁴您甚至可以通过原始 SHA-1 ID 执行此操作。不过，分支名称更容易连续多次正确键入。

⁵保留和过期是通过 git 的“reflogs”。共享服务器可能没有记录所有 ref 更新；如果没有，只有已经拥有新提交的私有仓库才会保留它们。最短的默认到期时间是 30 天，即大约 1 个月，因为提交不再可以从分支提示到达。但请注意，在强制将“丢失的工作”从共享存储库中推出后，让每个人都在他们的存储库中搜索“丢失的”提交是一种无趣、疯狂的争夺。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T15:36:49.693

这里是 Linus Torvals 的回复 这里是 Linus Torvals 的回复[http://opensource.apple.com/source/Git/Git-26/src/git-htmldocs/howto/revert-a-faulty-merge.txt](http://opensource.apple.com/source/Git/Git-26/src/git-htmldocs/howto/revert-a-faulty-merge.txt)

# hibernate - 如何在 Hibernate 中拦截更新请求

> ID：10176353
> 
> 赞同：0
> 
> 时间：2012-04-16T14:45:40.293
> 
> 标签：hibernate, staging

我们目前正在参与一个暂存环境。在供应商的无限智慧中，他们使用复合主键来表示关系，这意味着如果我更新关系，我会更新键并破坏登台服务。

有没有办法拦截某些映射类的更新请求，将它们变成创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:16:32.377

您可以将 Hibernate 实体配置为使用复合键。也许这会有所帮助。

如果您需要在 Hibernate 中拦截某些操作，您可以使用[回调](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/listeners.html)。

如果您需要更大的灵活性，请考虑使用[AspectJ](http://www.eclipse.org/aspectj/)（[使用 Spring 非常简单](http://static.springsource.org/spring/docs/3.0.0.RC2/reference/html/ch07s08.html)）。它们允许拦截任何可以想象的东西。

# codeigniter - CodeIgniter 多语言数据库

> ID：10176364
> 
> 赞同：0
> 
> 时间：2012-04-16T14:46:16.550
> 
> 标签：codeigniter

我有一个英文的 CodeIgniter 网站。现在我想添加另一种语言（意大利语），只有数据库，而不是语言文件。我已经翻译了所有内容并将其放置在数据库中，在诸如 name_en、name_it、content_en、content_it 等表字段中。我希望用户选择想要的语言并使用选择的语言在网站上导航。我认为通过会话来做到这一点，根据语言对与数据库字段对应的模型函数进行查询；否则将英语设为默认语言。那么谁能告诉我如何修改控制器、模型和视图中的代码？提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:50:43.893

脚本太大，无法在这里写，但我可以提供指导。

首先阅读会话类如何存储或检索lang

[会话类](http://codeigniter.com/user_guide/libraries/sessions.html)

其次，如果您在数据库中使用用户表，请为该语言创建一个新列。

在加载视图之前，将用户语言设置为会话，否则使用英语。

然后在您的视图中，您必须调用您的语言模型，以检索适当的字符串。请注意，直接从视图访问模型不是一个好习惯。在这种情况下，您必须使用模块化扩展。

如果您不在乎，只需使用

```
$language = $this->session->userdata('language');
echo $this->language_model->fetch_string($language, 'string'); 
```

# insert - 如何仅将新（不重复）行插入到现有表中 - 在 proc sql - sas 中？

> ID：10176366
> 
> 赞同：0
> 
> 时间：2012-04-16T14:46:21.120
> 
> 标签：insert, duplicates, sas

有谁知道如何在 SAS PROC SQL 中仅向现有表插入“新”行？

```
proc sql;
 create table class as 
 select * 
 from sashelp.class 
 where sex = 'F'; 
quit;

proc sql;  
 create table classm as 
 select * 
 from sashelp.class 
 where sex = 'M' or Name = 'Alice';
quit;

proc sql;
 insert into class 
 select * 
 from classm ;
quit; 
```

insert 语句不允许我使用 where 语句从 classm 中仅插入 10 个新行（没有 Alice ）

有没有办法解决这个问题？因为我正在处理大数据，所以我想在 proc sql 中执行此操作，或者数据步骤很好。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:18:53.377

这对我有用...

```
proc sql;
create table class as 
select * 
from sashelp.class 
where sex = 'F'; 
quit;

proc sql;  
create table classm as 
select * 
from sashelp.class 
where sex = 'M' or Name = 'Alice';
quit;

proc sql;
insert into class 
select * 
from classm 
where name^="John";
quit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:34:34.610

为什么不使用合并？

您按作为参考（id）的列对两个表进行排序，并将两个表与选定的键合并。

# java - 从用 Java 编写的 C 文件中读取

> ID：10176368
> 
> 赞同：1
> 
> 时间：2012-04-16T14:46:37.567
> 
> 标签：java, c, file, binary

我有一个用 C 编写的二进制文件，我想用 java 读取它。我用 C 写了这样的文件：

```
void Log(TCHAR *name,int age){
    write_int(file, 2012);
    write_int(file, 4);
    write_int(file, 16);
    write_int(file, 12);
    write_int(file, 58);
    write_int(file, 50);

    fwrite(&name, sizeof(name), 1, file);
    fwrite(&age, sizeof(age), 1, file);
    fflush(processusFile);
} 
```

在 Java 中，我使用`BinaryFile`类[http://www.heatonresearch.com/code/22/BinaryFile.java](http://www.heatonresearch.com/code/22/BinaryFile.java)我这样做：

```
RandomAccessFile f = new RandomAccessFile("myfile.dat", "r");
BinaryFile binaryFile = new BinaryFile(f);
ArrayList<String> text = new ArrayList<>();
while (true) {
try {
    Calendar calendar = new GregorianCalendar();
    int year = (int) binaryFile.readDWord();
    int month = (int) binaryFile.readDWord();
    int date = (int) binaryFile.readDWord();
    int hourOfDay = (int) binaryFile.readDWord();
    int minute = (int) binaryFile.readDWord();
    int second = (int) binaryFile.readDWord();

    calendar.set(year, month, date, hourOfDay, minute, second); 
    System.out.println(binaryFile.readFixedString(64));    
    catch (Exception e) {
        break;  
    }
} 
```

这对 char* 不起作用，但对 int 起作用。我如何编写字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:49:13.663

这是因为是系统上指针`sizeof(name)`的大小，*而不是*字符串的长度。您还需要将长度与字符串分开写出。`char`

 *```
size_t len = strlen(name);
write_int(file, len);
fwrite(&name, len, sizeof(char), file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:49:23.680

您必须注意输入“int”。

java 中的 int 始终是 32 位，而 C 中并非如此。在 C 中它可能是 16、32、64 位

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T14:49:23.670

这是错误的：

```
fwrite(&name, sizeof(name), 1, file); 
```

这只会写入与**指针**大小相对应的字符数，通常为 4。

如果您要写出的大小是固定的（看起来 Java 代码需要 64 个字符），您需要以某种方式将该大小传递给`Log()`.

在 C 语言中没有办法计算出（可能已经）作为第一个参数传递给`Log()`函数内部的数组的大小，这就是为什么必须明确说明的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T14:50:06.770

你的`fwrite`陈述看起来不对：

```
fwrite(&name, sizeof(name), 1, file); 
```

你实际上想要这样的东西：

```
fwrite(name, sizeof(TCHAR), strlen(name) + 1, file); 
```*

# filemaker - Filemaker Pro 11 脚本 - 动态添加字段？

> ID：10176369
> 
> 赞同：1
> 
> 时间：2012-04-16T14:46:39.247
> 
> 标签：filemaker

所以我们使用FMP11来做库存管理。我每周对我们的产品进行 3 次价格更新，最好将我们过去的成本值存储到一个单独的表中以用于历史定价。我知道我将如何进行大部分工作，但是是否可以创建一个标记为今天动态的新字段？因此，我的标题将标有该日期，并且将插入我其他字段中的旧定价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:45:56.890

为您描述的目的创建新字段是一个坏主意。而是创建其他记录，并从上到下而不是从左到右进行报告。

也就是说，如果您想这样做，您可以将 FileMaker Server Advanced 与 JDBC 和 ALTER TABLE 命令一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:20:39.730

创建一个新表（例如`ArchivePricing`）以保存您以后要引用的值（例如`ChangeDate`、`Price`、`Item`、`ItemID`等）。

在当前表中创建一个名为的新字段`z|newprice`- 使用它来输入您的新定价（您可以在列表布局中执行此操作，以便您可以轻松更改一堆价格）。

创建一个触发脚本的按钮：

1.  在新表中创建新记录`ArchivePricing`并插入 ItemID（从而创建到原始表的链接） - 这可以使用脚本参数或设置变量来完成）...脚本继续。

2.  使用“设置字段”脚本步骤将信息插入到`ArchivePricing`表中的这条新记录中。

3.  使用该`Get (CurrentDate)`函数将日期插入`ChangeDate`字段（从而捕获更改的日期）。

4.  在脚本完成之前，请务必在原始表中使用“设置字段”将字段中的值移动`z|newprice`到您的普通`Price`字段中。在脚本末尾执行此操作，然后提交记录。

# c++ - 这行得通吗？C++ 多重继承和构造函数链接

> ID：10176378
> 
> 赞同：5
> 
> 时间：2012-04-16T14:47:05.970
> 
> 标签：c++, constructor, multiple-inheritance

考虑一个继承自 Foo 和 Baz 的类 Waldo，即：

```
class Waldo : public Foo, public Baz {
  ...
}; 
```

当我创建一个新的 Waldo 实例时：

```
 Waldo *w = new Waldo; 
```

Foo 和 Baz 构造函数是否被调用？如果默认情况下不调用它们，在类声明或 Waldo 构造函数的声明/定义中是否有一种简单的方法来强制调用它们？

（看起来我可能正在尝试进行构造函数链接，而据称 C++ 没有这样做。我不确定。）

我要做的是“注释”各种类声明，其中注释导致（除其他外）注释类的实例链接到注释类维护的列表中。例如，这让我可以遍历所有具有 Baz-nature 的对象的列表，对它们应用特定的操作，而不必担心我是否记得将实例添加到具有 Baz-nature 的对象列表中，因为构造函数自动完成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T14:48:48.550

是的，它们被称为。左到右。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:39:16.430

类的所有成员的构造函数按照它们在类中声明的顺序被调用。

派生类的默认构造函数默认调用基类的构造函数。如果它们需要参数，则需要显式调用它们，否则这是一个错误......

```
 class Employee {
 private:
     //
 public:
    Employee();
    //...
 };

 class Manager: public Employee {
 private:
     short level;
 public:
     Manager(): Employee(), level() {}    // This is the default constructor, it calls Employee(). 
     // The definition is equivalent to default constructor of Manager..
     //...
  }; 
```

# android - 有没有办法以编程方式转到不同的主屏幕？

> ID：10176385
> 
> 赞同：0
> 
> 时间：2012-04-16T14:47:32.960
> 
> 标签：android, homescreen

我知道您可以通过以下方式进入主屏幕：

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

但是，有没有办法也可以转到其他主屏幕？

向左/向右滑动时看到的其他主屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:52:08.240

您需要一个扩展 Activity 的类。

然后你可以使用`Intent intent = new Intent(CurrentActivity.this, OtherActivity.class)`

`startActivity(intent)`

请注意，您还可以转到其他屏幕，例如从您的设备设置屏幕、Wi-Fi 设置等。

阅读更多

[活动](http://developer.android.com/reference/android/app/Activity.html)

[意图](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:50:52.537

您可以在 Intent 中使用扩展 Activity 的类的显式类名

```
Intent other = new Intent(this, OtherActivity.class);
startActivity(other); 
```

# javascript - jQuery post() 撇号如何自动转换为 html 数字实体？

> ID：10176393
> 
> 赞同：0
> 
> 时间：2012-04-16T14:48:07.113
> 
> 标签：javascript, jquery, post, html-entities

我正在使用 JQuery.post() 将一些数据发布到服务器，如下所示。当我在服务器端收到 post 数据时，我惊讶地发现 post 变量已经将单个撇号转换为 html 数字（即 ' 替换为`&#39;`）。这是怎么回事？转换是否发生在 Jquery.post() 中？我找不到任何关于此的文档。

```
$("#save").click(function(event) {
    event.preventDefault();

    var postdata = "id="+id+"&note="+$("#note").val();

    $.post("save_note.php", postdata, function(data){
    $('#save_status').text(data);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:58:17.107

这根本不会发生。

可能的原因是，在您读取该值并将其放入 postdata 字符串之前，该值已经进行了 HTML 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:58:43.477

你要么：

*   [编码URI组件](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)
*   jquery 在表单上的方式（至少一种）[serialize()](http://api.jquery.com/serialize/)方法，如下所示：

    ```
    $("#save").click(function(event) {
      event.preventDefault();

      var $form = $(event.target).closest('form');
      //var postdata = "id="+id+"&note="+$("#note").val();

      $.post($form.attr('method'), $form.serialize(), function(data){
      $('#save_status').text(data);
      });
    }); 
    ```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:01:46.157

它发生在网络浏览器中。

检查值`$("#note").val()`- 记住当您在表单字段中键入内容时，它被插入到 HTML DOM 中。

# mysql - 如何在MYSQL中将字符串作为WHERE子句传递

> ID：10176404
> 
> 赞同：0
> 
> 时间：2012-04-16T14:48:35.470
> 
> 标签：mysql

我创建了以下字符串：

```
set l_project_name = concat("UPPER(a.project_name) like UPPER ('%",projectName,"%')");
set l_project_type = concat(" OR UPPER(a.project_type) like UPPER('%",projectType,"%')");
set l_project_description = concat(" OR UPPER(a.project_description) like UPPER('%",projectDescription,"%')");

set l_full_search_clause = concat(l_project_name ,l_project_type, l_project_description); 
```

字符串的结果： l_full_search_clause 是： UPPER(a.project_name) like UPPER('%order%')

我有一个选择子句，我需要使用我创建的包含这个 where 子句的这个字符串。所以，我有以下内容： select * from projects where l_full_search_clause

但是，当然，MYSQL 按原样读取 l_full_search_clause 而不是变量。我如何告诉 MYSQL 条件是一个变量字符串？

这个 sql 在 MYSQL 存储过程中.. 所以它只是普通的 sql .. 我从 C#、MVC3 调用这个存储过程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:57:45.910

试试这个：

```
SET @query = "SELECT * FROM projects WHERE ";

SET @l_project_name = CONCAT("a.project_name LIKE '%", projectName, "%'");
SET @l_project_type = CONCAT(" OR a.project_type LIKE '%", projectType, "%'");
SET @l_project_description = CONCAT(" OR a.project_description LIKE '%", projectDescription, "%'");

SET @l_full_search_clause = CONCAT(@l_project_name, @l_project_type, @l_project_description); 

SET @query = CONCAT(@query, @l_full_search_clause);

PREPARE stmt FROM @query;
EXECUTE stmt; 
```

我相信你必须使用`@var`变量的语法。此外，要执行存储在字符串中的查询，您必须使用`PREPARE`and `EXECUTE`。

而且您不必`UPPER`在字符串上使用。默认情况下，MySQL 不区分大小写地比较字符串。您可以通过查看字段的排序规则类型来确保这一点。`ci_`那些代表“不区分大小写”。

# ruby - RVM 无法安装不同版本的 Ruby

> ID：10176405
> 
> 赞同：1
> 
> 时间：2012-04-16T14:48:43.980
> 
> 标签：ruby, terminal, rvm

我一直在遵循[http://beginrescueend.com/rvm/install/](http://beginrescueend.com/rvm/install/)和[http://beginrescueend.com/rvm/basics/上的所有说明](http://beginrescueend.com/rvm/basics/)

在终端中，我可以输入“type rvm”并显示“rvm is a function”，因此它应该已正确安装。

现在，当我输入类似：rvm install ruby​​-1.9.2-p318、rvm install 1.9.2 或其他任何似乎运行安装过程的内容时，我收到以下错误

```
Error running 'make ', please read /Users/Nick/.rvm/log/ruby-1.9.2-p318/yaml/make.log
Error running ' ./configure --prefix=/Users/Nick/.rvm/rubies/ruby-1.9.2-p318 --enable-shared --disable-install-doc --with-libyaml --with-opt-dir=/Users/Nick/.rvm/usr ', please read /Users/Nick/.rvm/log/ruby-1.9.2-p318/configure.log
There has been an error while running configure. Halting the installation.
ls: /Users/Nick/.rvm/rubies/*/bin/ruby: No such file or directory 
```

所以我打开了 install.log 文件，上面写着：

```
configure: error: in `/Users/Nick/.rvm/src/yaml-0.1.4':
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details 
```

没有 config.log 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T15:12:49.797

您需要一个 C 编译器，但您似乎没有安装或不在您的路径上。XCode提供了一个，你安装了吗？

检查这个类似的问题[Xcode - 配置：错误：在 $PATH 中找不到可接受的 C 编译器](https://stackoverflow.com/questions/9323612/configure-error-no-acceptable-c-compiler-found-in-path)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:31:43.570

看起来你需要安装 Xcode 命令行工具，所以你可以在安装时编译 RVM。我相信只要安装 Xcode 就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:48:58.260

只是一个旁注：即使安装了 XCode，您也可能会遇到类似的问题。解决方案在这里：[Can't install Ruby under Lion with RVM – GCC issues](https://stackoverflow.com/questions/8032824/cant-install-ruby-under-lion-with-rvm-gcc-issues)

# python - Python 错误：无法将字符串转换为浮点数

> ID：10176409
> 
> 赞同：5
> 
> 时间：2012-04-16T14:48:55.497
> 
> 标签：python, string, floating-point, text-files

我有一些 Python 代码可以从文本文件中提取字符串：

```
[2.467188005806714e-05, 0.18664554919828535, 0.5026880460053854, ....] 
```

Python代码：

```
v = string[string.index('['):].split(',')
for elem in v:
    new_list.append(float(elem)) 
```

这给出了一个错误：

```
ValueError: could not convert string to float: [2.974717463860223e-06 
```

为什么不能`[2.974717463860223e-06`转换为浮点数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-16T14:51:58.403

你仍然有`[`你的“浮动”前面，它可以防止解析。

为什么不为此使用合适的模块呢？例如：

```
>>> a = "[2.467188005806714e-05, 0.18664554919828535, 0.5026880460053854]"
>>> import json
>>> b = json.loads(a)
>>> b
[2.467188005806714e-05, 0.18664554919828535, 0.5026880460053854] 
```

或者

```
>>> import ast
>>> b = ast.literal_eval(a)
>>> b
[2.467188005806714e-05, 0.18664554919828535, 0.5026880460053854] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T14:52:41.793

您可以执行以下操作将从文件中读取的字符串转换为浮点列表

```
>>> instr="[2.467188005806714e-05, 0.18664554919828535, 0.5026880460053854]"
>>> [float(e) for e in instr.strip("[] \n").split(",")]
[2.467188005806714e-05, 0.18664554919828535, 0.5026880460053854] 
```

您的代码失败的原因是，您没有从字符串中删除“[”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T14:50:41.320

您正在捕获第一个括号，更改`string.index("[")`为`string.index("[") + 1`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T14:58:03.107

这将为您提供浮动列表，而无需额外的导入等。

```
s = '[2.467188005806714e-05, 0.18664554919828535, 0.5026880460053854]'
s = s[1:-1]
float_list = [float(n) for n in s.split(',')] 
```

```
[2.467188005806714e-05, 0.18664554919828535, 0.5026880460053854] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T14:50:53.870

```
v = string[string.index('[') + 1:].split(',') 
```

`index()`返回给定字符的索引，因此它`'['`包含在返回的序列中`[:]`。

# android - 如何使 OnTouch() 对单个视图做出反应

> ID：10176420
> 
> 赞同：2
> 
> 时间：2012-04-16T14:49:31.843
> 
> 标签：android

我有一个非常简单的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

    <ImageView
    android:id="@+id/board"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/boardmask" />

</LinearLayout> 
```

和一个非常简单的活动：

```
public class BoardActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.board_activity);
    ImageView board = (ImageView) findViewById(R.id.board);
    board.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_UP) {
                Log.i("OnTouch", event.getX() + " " + event.getY());
            }
            return true;
        }
    });
  }
} 
```

ImageView 大约是屏幕垂直的一半，并且居中。有人可以解释为什么单击屏幕顶部或底部会生成 OnTouch 事件，它应该不在 ImageView 之外，不是吗？

最好的问候，非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T01:14:41.637

我经常看到这种情况发生，但我没有找到谷歌在哪里解释了这一点。我将尝试解释我是如何理解它的。

当您添加 ImageView 并为其提供源时，或稍后以编程方式添加图像时，ImageView 会根据图像的尺寸调整自身的大小。但是有时当源图像大于屏幕尺寸时，它会根据 scaleType（如果提供）进行缩放，或者只是缩放图像，使最大的一侧完全适合屏幕，而另一侧则在保持尺寸不变的情况下进行缩放。

但是图片插入ImageView后，ImageView的Bounds并没有自动调整为新缩放的图片。为此，ImageView 中有另一个参数称为`android:adjustViewBounds`

因此，请尝试在您的 Imageview 中执行此操作。

```
<ImageView
android:id="@+id/board"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/boardmask" 
android:adjustViewBounds="true"/> 
```

# node.js - node.js + express 错误：无法读取未定义的属性“url”

> ID：10176421
> 
> 赞同：2
> 
> 时间：2012-04-16T14:49:32.943
> 
> 标签：node.js, express

我对 Node.js 还很陌生，安装它是为了试用 DrupalChat (v7dev) 模块。我相信这个问题出在 node.js 或 express 上，因为我超出了加载聊天模块设置的阶段。尝试启动聊天服务器时遇到以下输出

```
Extension loaded: drupalchat_nodejs.server.extension.js
Started http server.
   info  - socket.io started

node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
TypeError: Cannot read property 'url' of undefined
    at Function.handle (/usr/local/lib/node_modules/npm/node_modules/express/node_modules/connect/lib/proto.js:105:18)
    at Server.app (/usr/local/lib/node_modules/npm/node_modules/express/node_modules/connect/lib/connect.js:60:31)
    at Server.serverListening (/usr/local/lib/node_modules/npm/node_modules/socket.io/node_modules/policyfile/lib/server.js:136:16)
    at Server.g (events.js:154:14)
    at Server.emit (events.js:64:17)
    at Array.1 (net.js:710:10)
    at EventEmitter._tickCallback (node.js:192:40) 
```

我记得当 express 安装时，它给出了一个警告，比如“.... bugs['web'] 应该是 bugs['url']”（我不记得前缀了）

那么服务器是否正在尝试读取（API？）变量“url”但它当前是“web”？

我的所有模块都是最新的，我应该降级吗？或者有没有办法使用另一个模块来解决这个问题？

编辑：第 201 行是最后一行（删除 authenticatedClients[authData.authToken];）...我刚刚添加到整个函数以获得正确的上下文

```
var authenticateClientCallback = function (error, response, body) {
  if (error) {
    console.log("Error with authenticate client request:", error);
    return;
  }
  if (response.statusCode == 404) {
    if (settings.debug) {
      console.log('Backend authentication url not found, full response info:', response);
    }
    else {
      console.log('Backend authentication url not found.');
    }
    return;
  }

  var authData = false;
  try {
    authData = JSON.parse(body);
  }
  catch (exception) {
    console.log('Failed to parse authentication message:', exception);
    if (settings.debug) {
      console.log('Failed message string: ' + body);
    }
    return;
  }
  if (!checkServiceKey(authData.serviceKey)) {
    console.log('Invalid service key "', authData.serviceKey, '"');
    return;
  }
  if (authData.nodejsValidAuthToken) {
    if (settings.debug) {
      console.log('Valid login for uid "', authData.uid, '"');
    }
    setupClientConnection(authData.clientId, authData, authData.contentTokens);
    authenticatedClients[authData.authToken] = authData;
  }
  else {
    console.log('Invalid login for uid "', authData.uid, '"');
    delete authenticatedClients[authData.authToken];
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:54:36.287

根据@thesnufkin 的帖子，当前提取的底层快速版本似乎不稳定。回滚到 2.5.9，你应该很高兴：

npm 卸载 express npm install express@2.5.9

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:58:36.620

按照要求，

drupal 的 v7 聊天模块不稳定。您不应该在生产中使用它。

检查错误：[http ://drupal.org/project/issues/drupalchat?status=All&categories=All](http://drupal.org/project/issues/drupalchat?status=All&categories=All)

检查论坛：[http ://drupalchat7.botskool.co.in/?q=forum](http://drupalchat7.botskool.co.in/?q=forum)

仍在寻找新的维护者：“需要新的维护者 - 如果您有兴趣，请联系 beejeebus！”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:20:12.947

nodejs 模块有这个问题，所以我认为它与 drupalchat 服务器无关。这是问题所在：http: [//drupal.org/node/1537702](http://drupal.org/node/1537702)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T17:55:07.817

在 DrupalChat 中使用 node.js 作为后端的选项目前正在开发中。它还取决于您下载 DrupalChat 的时间（日期），因为开发代码每天都会更新，如果提交了新代码。

请在此链接上提出相同的问题 - [http://drupal.org/project/issues/drupalchat?status=All&categories=All](http://drupal.org/project/issues/drupalchat?status=All&categories=All)。

谢谢，

暗黑

# powershell - 用于查询和删除早于“x”天的打印作业的 PowerShell 脚本

> ID：10176428
> 
> 赞同：4
> 
> 时间：2012-04-16T14:50:02.443
> 
> 标签：powershell, powershell-ise

我开始把这个 PowerShell 脚本放在一起，希望能替换一些目前手动执行的任务

我正在使用

```
get-Date.AddDays() 
```

功能

我正在使用 ISE 构建脚本，并且在测试中，如果我挑出 'starttime' 属性，我会得到输出，但这似乎是一个问题，因为这些值都是空的，理想情况下我想使用'timesubmitted' 属性，但日期似乎输出奇怪，我认为没有正确读取，因为我的带有 'timesubmitted' 的查询总是空的

如果您进行开放式查询，它会以这种格式出现

```
20120416030836.778000-420 
```

这是我到目前为止所拥有的。

无视| 'format-table' 函数，这样我就可以查看是否获得了所需的输出

```
#Clears Old Print Jobs on Specified server

#Sets Execution Policy for Script to run
Set-ExecutionPolicy RemoteSigned -Force

#establishes variable for cutoff date
$d = Get-Date
$old = $d.AddDays(-4)

#Queries WMI and retrieves print jobs
Get-WmiObject -class win32_printjob -namespace "root\CIMV2" | where-object {$_.timesubmitted -lt
"$old"} | ft caption,document,jobid,jobstatus,owner,timesubmitted 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T14:58:57.833

在 PowerShell 中，每个 WMI 实例都有一个 ScriptMethod，可用于将日期从 WMI 格式转换为 .NET 格式：

```
Get-WmiObject Win32_PrintJob | 
Where-Object { $_.ConvertToDateTime($_.TimeSubmitted) -lt $old } |
Foreach-Object { $_.Delete() } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-18T14:29:36.880

只是一个更新，以防有人在 2021 年寻找。

这个命令/语法在 2008 R2（PowerShell 版本 2.0）中为我工作（我能够从这个页面以及其他页面拼凑起来）。

**查找超过 30 分钟的所有作业并将其删除：**

```
Get-wmiobject win32_printjob 
| Where-Object {[System.Management.ManagementDateTimeConverter]::ToDateTime($_.TimeSubmitted) -lt (Get-Date).addminutes(-30)} 
| ForEach-Object { $_.delete() }* 
```

# java - 理解 Java 中的金字塔数字

> ID：10176431
> 
> 赞同：-1
> 
> 时间：2012-04-16T14:50:18.577
> 
> 标签：java, for-loop, numbers

我正在研究 Java 中的金字塔数字，它有这样的代码。

```
public class PyramidCharForLup {

  public static void main(String[] args) {

     int x = 7;  
     for (int i = 1; i <= x; i++) 
     {  
         for (int j = 1; j <= x - i; j++)  
             System.out.print("   ");  
         for (int k = i; k >= 1; k--)  
             System.out.print((k >=10) ?+ k : "  " + k);  
         for (int k = 2; k <=i; k++)  
             System.out.print((k>= 10) ?+ k : "  " + k);  
         System.out.println();  
     }  
   }
 } 
```

输出是

```
 1
                 2  1  2
              3  2  1  2  3
           4  3  2  1  2  3  4
        5  4  3  2  1  2  3  4  5
     6  5  4  3  2  1  2  3  4  5  6
  7  6  5  4  3  2  1  2  3  4  5  6  7 
```

* * *

我砍代码并逐行研究到目前为止我已经在这一行中学习了..呵呵

所以这是我想问的代码。

```
public class PyramidCharForLup {

   public static void main(String[] args) 
   {
      int x = 7;
      for (int i = 1; i <= x; i++) {
         for (int j = 1; j <= x - i; j++)
            System.out.print(j);

      }
   }
} 
```

`123456123451234123121`如果您要安排 ，此输出用于澄清`123456 12345 1234 123 12 1`

第一个问题：`i`在代码中`for (int j = 1; j <= x - i; j++)`变成了`i= 1234567`？
第二个问题：从初始化中，如果增量 1..2..3..5..6..7.. 是从 1234567 中减去最后一个数字的增量，则为一个

1234567-1... 123456 - 1 ... 12345 - 1 ... 1234 - 1 ... 123 - 1 ... 12-1...1-0.... 直到错误 我对吗？

这就是我得到这个输出的原因 123456 12345 1234 123 12 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:02:40.707

您的代码有两个嵌套循环（一个循环在另一个循环内运行）。这就是发生的事情：

1.  您将 x 设置为 7
2.  您正在启动外部循环，设置 i = 1。由于 1 <= 7 进入循环。
3.  您正在启动内部循环，设置 j = 1。由于 1 <= 6 (7-1 from x - i) 进入循环。
4.  j (1) 被打印出来。
5.  j 增加 1 并且由于 2 小于 6 内部循环继续。
6.  j (2) 被打印出来。

这一直持续到 j 为 6。

1.  j (6) 被打印出来。
2.  j 增加 1，现在是 7，不是 <= 6，所以内部循环退出。
3.  i 加一（现在是 2）。
4.  再次进入内部循环，将 j 设置为 1。由于 j < 5 (7-2 from x - i)，进入循环。打印 11 j (1)。12 j 增加 1，现在是 2。由于 2 < 6，循环继续。

这一直持续到 i 达到 7。当 i 增加 1 时，它是 8，而不是 <= 7，因此外循环也存在并且您的程序完成。

您的程序将从 1..6 开始计数并写入数字，然后从 1..5 直到达到 1..1

# orchardcms - Orchard CMS 使用投影仪从 MediaPicker 显示图像

> ID：10176432
> 
> 赞同：3
> 
> 时间：2012-04-16T14:50:19.703
> 
> 标签：orchardcms, projector

我有一个包含 MediaPicker 字段的内容类型。MediaPicker 允许贡献者为内容类型选择图像。我正在使用 Projector 开发一个页面，该页面呈现此内容类型的列表，但图像不显示。我修改了投影仪布局中的“重写结果”以将字段写入图像：`<img src="{Text}"/>`

但这会产生：`<img src="~/Media/.../picture.jpg"/>`并且不会将波浪号 ~/ 转换为正确的路径。

你能告诉我我做错了什么吗？使用投影仪模块渲染图像的最佳方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:57:01.013

我在我的博客上发布了解决此问题的解决方案：

[http://coderkelly.wordpress.com/2012/04/18/solved-projector-module-layout-to-display-media-picker-field-as-image/](http://coderkelly.wordpress.com/2012/04/18/solved-projector-module-layout-to-display-media-picker-field-as-image/)

# c++ - 返回无构造函数的对象作为输出参数

> ID：10176433
> 
> 赞同：2
> 
> 时间：2012-04-16T14:50:29.853
> 
> 标签：c++

我想从函数返回一个对象作为输出参数，但该对象没有默认构造函数，所以我不能这样做：

```
bool FindFlaggedObject(MyObject& myObject)
{
    std::vector<MyObject> myObjects = GetSomeObjectList();
    for (UINT i = 0; i < myObjects.size(); i++)
    {
        if (myObjects[i].Flag) {
            myObject = myObjects[i];
            return true;
        }
    }
    return false;
}

void main()
{
    MyObject myObject;  // NOT ALLOWED - OBJECT HAS NO DEFAULT CONSTRUCTOR
    if (FindFlaggedObject(myObject))
    {
        ...
    }
} 
```

所以，看起来我应该在堆上返回它并使用 shared_ptr 实例来管理它，如下所示：

```
bool FindFlaggedObject(MyObject& myObject)
{
    std::vector<MyObject> myObjects = GetSomeObjectList();
    for (UINT i = 0; i < myObjects.size(); i++)
    {
        if (myObjects[i].Flag) {
            myObject = new MyObject(myObjects[i]);
            return true;
        }
    }
    return false;
}

void main()
{
    MyObject* myObjectPtr;
    if (FindFlaggedObject(myObjectPtr))
    {
        std::shared_ptr<MyObject> myObject(myObjectPtr);

        ...
    }
} 
```

缺点是任何调用该方法的人都必须记住他负责释放对象。
**将无构造函数的对象作为输出参数返回的最佳实践是什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T15:01:05.807

如果对象支持复制（并且将在堆栈上声明的对象通常应该支持复制），则按值返回几乎总是最好的解决方案。如果函数可能失败，并且并不总是返回一个对象，您可以使用某种`Fallible`或`Maybe`类：

```
Fallible<MyObject>
FindFlaggedObject()
{
    std::vector<MyObject> objects = GetSomeObjectList();
    std::vector<MyObject>::const_iterator current = objects.begin();
    while ( current != objects.end() && !current->flag ) {
        ++ current;
    }
    return current == objects.end()
        ? Fallible<MyObject>()
        : Fallible<MyObject>( *current );
} 
```

但是，您可能会反映：如果 GetSomeObjectList() 始终可以返回对现有列表的引用（而不是在内部构造列表），并且您将其修改为返回 const 引用，则可以只返回一个指针：

```
MyObject const*
FindFlaggedObject()
{
    std::vector<MyObject> const& objects = GetSomeObjectList();
    std::vector<MyObject>::const_iterator current = objects.begin();
    while ( current != objects.end() && !current->flag ) {
        ++ current;
    }
    return current == objects.end()
        ? NULL
        : &*current;
} 
```

这是一个非常典型的 C++ 习语。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T15:00:09.647

函数返回一个智能指针，而不是返回一个`bool`并传入一个引用，确保调用者不会忘记释放：

```
std::shared_ptr<MyObject> myObjectPtr = FindFlaggedObject();
if (myObjectPtr)
{
    // Found flagged object.
}

std::shared_ptr<MyObject> FindFlaggedObject()
{
    MyObject* result = nullptr;
    std::vector<MyObject> myObjects = GetSomeObjectList();
    for (UINT i = 0; i < myObjects.size(); i++)
    {
        if (myObjects[i].Flag) {
            result = new MyObject(myObjects[i]);
            break;
        }
    }
    return std::shared_ptr<MyObject>(result);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T15:00:16.443

不使用 out 参数，而是返回一个值。由于该值是可选的，如当前返回类型 bool 所示，您可以将`boost::optional`其用于该目的：

```
boost::optional<MyObject> FindFlaggedObject()
{
    std::vector<MyObject> myObjects = GetSomeObjectList();
    for (UINT i = 0; i < myObjects.size(); i++)
    {
        if (myObjects[i].Flag) {
            return myObjects[i];
        }
    }
    return boost::none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T14:54:50.157

无需使用默认构造函数构造自动对象。只需传递构造函数参数。

```
void main()
{
   MyObject myObject (12); 
   if (FindFlaggedObject(myObject))
   {
     ...
   }
} 
```

另一方面，为什么不这样做呢？

```
MyObject FindFlaggedObject()
{
 std::vector<MyObject> myObjects = GetSomeObjectList();
 for (UINT i = 0; i < myObjects.size(); i++)
 {
     if (myObjects[i].Flag) {
         return myObjects[i];
     }
 }
 return 0;
}

void main()
{
   MyObject* res = FindFlaggedObject();
   if (res != 0) {
      ...
   }
} 
```

只要**res**仍然是 GetSomeObjectList 中的成员，您就不必担心删除**res**

# java - Java中的Libsvm：0次迭代后退出，没有结果

> ID：10176434
> 
> 赞同：2
> 
> 时间：2012-04-16T14:50:34.743
> 
> 标签：java, libsvm

这是我的代码：

```
svmProblem.x = new svm_node [numSamples][numDims];
svmProblem.y = trainingY;
for(int i=0; i < numSamples; i++) {
    for (int j = 0; j < numDims; j++) {
         svmProblem.x[i][j] = new svm_node();
         svmProblem.x[i][j].index = j;
         svmProblem.x[i][j].value = trainingX[i][j];
    }
    svmProblem.y[i] = trainingY[i];
 }

svmProblem.l = numSamples;
svm_parameter svmParam = new svm_parameter();
svmParam.probability = 1;
svmParam.kernel_type = svm_parameter.LINEAR;
svm_model model = svm.svm_train(svmProblem, svmParam); 
```

这是执行结束时的消息：

```
optimization finished, #iter = 0
nu = NaN
obj = 0.0, rho = 0.0
nSV = 0, nBSV = 0
Total nSV = 0 
```

我尝试通过调试器逐步调试它，但没有任何成功，我现在几乎被卡住了。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T18:55:22.043

我意识到这是几年前提出的问题，但如果其他人发生这种情况，我会猜测 selected 的值会`nu`产生一个不可行的问题。

在文档中注意，

```
nu <= 2 * min(#y_i = + 1, #y_i = - 1) / l <= 1 
```

确保`nu`选择的人遵守这些界限。默认情况下，`nu`是`0.5`.

# css - 使用 CSS 自定义 Office 365 Sharepoint 网站

> ID：10176451
> 
> 赞同：2
> 
> 时间：2012-04-16T14:51:17.147
> 
> 标签：css, sharepoint, office365

我想自定义一个托管在 Office 365 上的网站。例如，我想做一些简单的事情，比如更改 wiki 的所有页面上的字体大小。

我没有在站点设置中找到编辑网站 CSS 的选项。如何才能做到这一点？

（我想我必须编辑当前主题或添加一个新主题，但我还没有找到执行这些操作的指南）。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:44:30.663

您可以将自定义 CSS 文件上传到样式库。然后在站点设置 > 外观 > 母版页中，将备用 CSS URL 设置为您的文件。

# java - 更改 JFrame 的面板“禁用”插入的新面板的 inputMap

> ID：10176452
> 
> 赞同：4
> 
> 时间：2012-04-16T14:51:19.300
> 
> 标签：java, swing, event-handling, jframe, jpanel

问题描述：我有一个 JFrame，在这个 JFrame 里面有一个带有按钮的 JPanel，当我按下按钮时，一个动作监听器会用一个新的 JPanel 更改当前的 JPanel，其中包含其他两个 JPanel，这两个有一个 inputMap当用户按下“向上”键时，他们两个都会做一些事情。问题是：当我用新的 JPanel 更改时，“向上”键不会做任何事情。

这是代码： 是一个 SSCCE，所以您只需复制和粘贴即可查看它的作用。

这个修改后的代码来自另一个我以前“解决”过的问题。[如何让两个 JPanel 监听同一个事件？](https://stackoverflow.com/questions/10011564/how-to-make-two-jpanels-listen-to-the-same-event) （代码在我选择的答案中）。

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.util.Arrays;
import java.util.List;
import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.KeyStroke;

public class TwoPanelsTest extends JFrame {

private static MyPanel one = new MyPanel("One");
private static MyPanel two = new MyPanel("Two");
private static List<MyPanel> list = Arrays.asList(one, two);
private PanelsController panelsController;

public TwoPanelsTest() {
    super("TwoPanelsTest");
    panelsController= new PanelsController(this);
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    this.setSize(400,400);
    this.setLocationRelativeTo(null);
    this.setVisible(true);
}

private static class MyPanel extends JPanel {

    private String string = " will be updated though its action.";
    private Action action = new UpdateAction(this);
    private String name;
    private JLabel label;

    public MyPanel(String name) {
        this.name = name;
        this.label = new JLabel(name + string, JLabel.CENTER);
        this.setLayout(new GridLayout());
        this.setFocusable(true);
        this.add(label);
    }

    public Action getAction() {
        return action;
    }

    private void update() {
        label.setText(name + ": " + System.nanoTime());
    }

    private static class UpdateAction extends AbstractAction {

        private MyPanel panel;

        public UpdateAction(MyPanel panel) {
            this.panel = panel;
        }

        @Override
        public void actionPerformed(ActionEvent ae) {
            panel.update();
        }
    }
}//MyPanel

private static class ButtonPanel extends JPanel{
    private JButton button ;
    private PanelsController panelsController;

    public ButtonPanel(PanelsController panelsController){
        this.panelsController=panelsController;

        button = new JButton("Button");
        button.setActionCommand("buttonPressed");
        button.addActionListener(this.panelsController);
        this.setFocusable(true);
        add(button);
    }
}//ButtonPanel

private static class PanelsController implements ActionListener {

    private TwoPanelsTest twoPanelsTest;

    public PanelsController(TwoPanelsTest twoPanelsTest){
        this.twoPanelsTest=twoPanelsTest;
        this.twoPanelsTest.getContentPane().add(new ButtonPanel(this));
    }

    @Override
    public void actionPerformed(ActionEvent ae) {
        if (ae.getActionCommand().equals("buttonPressed")){
            twoPanelsTest.getContentPane().removeAll();
            twoPanelsTest.getContentPane().invalidate();

            JPanel panel = new JPanel(new GridLayout(0, 1, 10, 10));
            panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
            panel.add(one);
            panel.add(two);
            panel.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT)
            .put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "up");
            panel.getActionMap().put("up", new AbstractAction() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    for (MyPanel panel : list) {
                        panel.getAction().actionPerformed(e);
                    }
                }
            });
            twoPanelsTest.getContentPane().add(panel);
            twoPanelsTest.validate();
            twoPanelsTest.repaint();
        }
    }//ActionPerformed

}//PanelsController

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            TwoPanelsTest t = new TwoPanelsTest();
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:05:27.727

好吧，这很简单——如果你有这两个面板，里面没有任何组件，并希望它们听热键的使用：

```
panel.getInputMap ( JComponent.WHEN_IN_FOCUSED_WINDOW )
     .put ( KeyStroke.getKeyStroke ( KeyEvent.VK_UP, 0 ), "up" ); 
```

JComponent.WHEN_IN_FOCUSED_WINDOW 而不是 JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT。

否则，您需要将某些内容集中在面板内，以便它可以捕获关键事件。

顺便说一句，还有另一种方法可以在 Java 应用程序窗口中监听全局热键：

```
Toolkit.getDefaultToolkit ().addAWTEventListener ( new AWTEventListener ()
{
    public void eventDispatched ( AWTEvent event )
    {
        // All application key events will be passed here
    }
}, AWTEvent.KEY_EVENT_MASK ); 
```

# java - 注销后我无法重新登录，不断被重定向到“mysite/remove-group-member.icepush”。为什么？

> ID：10176453
> 
> 赞同：1
> 
> 时间：2012-04-16T14:51:29.630
> 
> 标签：java, jakarta-ee, tomcat7, vaadin

我正在使用 tomcat，每当我退出我的网络应用程序并尝试重新登录时，我都会被重定向到 mysite/remove-group-member.icepush，我不知道为什么。如果我注销，刷新页面，然后登录一切正常。此外，如果我在被重定向到 /remove-group-member.icepush 后点击后退按钮，我将登录并在我的应用程序的主页上。

有人能告诉我为什么会这样或如何解决吗？

编辑：我正在为 Vaadin 使用 IcePush Add on。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:27:32.120

这实际上发生在页面上的所有对象上。为了在注销时解决这个问题，我们从页面中删除所有元素，然后终止会话并重定向到登录屏幕。

# html - 表单的大量文本字段，需要解决方案

> ID：10176455
> 
> 赞同：0
> 
> 时间：2012-04-16T14:51:33.687
> 
> 标签：html, ios, ios5, mailto, xcode4.3

到目前为止，我对了解如何从文本字段获取数据到电子邮件的探索让我一无所获，所以我现在尝试一种不同的方法（更准确的解决方法）。我在 HTML 中创建了一个表单，我使用 mailto 函数，因为这是我似乎可以将 iphone 的任何数据发送到电子邮件的唯一方法。我的下一个问题是，因为总共有大约 300 个文本字段，所以它使这个页面非常长。此外，这个 html 页面底部的电子邮件按钮会给用户带来烦恼。在某些情况下，可能只使用 4 个文本字段，这意味着这将是一封包含四个文本框的巨大长电子邮件。有什么办法可以把它分解成可管理的块，还是根据用户需要动态添加文本字段？我意识到理想的解决方案是正确地完成这一切，但这只是超出了我的技能基础。我已经尝试为此合并一些来自可可控件的控件，但无法理解如何在我的项目中使用它，因此使用 mailto 作为最后的手段！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:11:25.590

你的问题不是很清楚，但我会尽力回答。也许您应该注意 LiveJournal 中的技巧（页面底部的行）。

```
.buttonClass {
 left: 50%;
 margin-left: -0.5*buttonWidth;
 postion: fixed;
 bottom: buttonHeight;
} 
```

在这种情况下，您的按钮将固定在页面底部，用户可以随意滚动。

# math - 减去两个 4x4 矩阵 - 这可能吗？

> ID：10176456
> 
> 赞同：7
> 
> 时间：2012-04-16T14:51:41.643
> 
> 标签：math, opengl, matrix

我有两个 4x4 OPENGL 矩阵 -

*   第一个矩阵在第 0 帧保存对象的旋转和位置。

*   第二个矩阵保存对象在第 X 帧的旋转和位置；

我想检索一个对象在第 0 帧和 X 之间的移动偏移量，如果我只是减去两者，这是否足够（可能）？

```
CMatrix4x4 offsetMatrix = matrixAtFrameX - matrixAtFrame0; 
```

我正在做的是每帧导出骨骼变换矩阵，其中该矩阵是动画的第 0 帧和第 X 帧之间的变换的偏移量。

*   我可以减去两个矩阵吗？

*   结果如何？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T15:06:39.947

您需要将第 x 帧的矩阵乘以第 0 帧的矩阵的逆矩阵。

```
matrixOffset = inverse(matrixAtFrame0) * matrixAtFrameX 
```

这将为您提供帧之间的相对变换和旋转。

# blackberry - 在黑莓应用程序中将联系人从黑莓转移到 I-phone

> ID：10176458
> 
> 赞同：0
> 
> 时间：2012-04-16T14:51:44.473
> 
> 标签：blackberry, contacts

我正在开发一个默认电话簿联系人应用程序，在我的应用程序中，我试图将我的 BB 联系人转移到 Iphone 设备。目前在做这个任务的研发。请告诉我，因为黑莓以其安全性而闻名，在此之后，这项任务是否可能？谢谢我提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:39:45.093

有一种在不同移动设备之间传输联系人的简单方法。这种方式不涉及编程技能，也不需要安装任何特殊的定制软件。

1.  将您的黑莓连接到您的计算机并与您的邮件客户端同步联系人，比如说 Outlook。
2.  断开黑莓的连接，将 iPhone 连接到您的计算机并再次与 Outlook 同步联系人。

就是这样。

除非您有关于两个平台的格式和同步协议的文档，否则无法直接使用*您的应用程序传输联系人。*

# cocoa - Oomph MacMapKit 绘图错误

> ID：10176460
> 
> 赞同：0
> 
> 时间：2012-04-16T14:51:46.257
> 
> 标签：cocoa, mapkit

我已经在我的一个项目中集成了 Oomph MacMapKit，我完成了所有步骤。但有一个问题。我正在使用 NSToolbar 并在视图之间切换。每当我在我的地图页面中，如果我切换到另一个页面然后切换回地图页面，地图就会在 MKMapView 下绘制，并且 MKMapView 是白色的，但我可以通过在白色区域中拖动鼠标来导航地图。

我也在另一个项目中尝试过，它的行为再次如此。

正常外观

![http://i.stack.imgur.com/kf4AL.png](../Images/ceccffadbce949d2dd2e8fea3b34d91b.png)

换回来后

![http://i.stack.imgur.com/BOJK6.png](../Images/225e9fb56722bf95f82daa7c230aca71.png)

有谁知道我该如何解决这个问题？

此代码在我的窗口控制器委托中运行以切换页面

```
- (NSView*)viewForTag:(int)tag
{
    switch (tag)
    {
        case 0:
            return [firstViewController view];
            break;
        case 1:
            return [secondViewController view];
            break;
        default:
            return [firstViewController view];
            break;
    }
}

- (IBAction)switchViews:(id)sender
{
    NSView* currentView = [self viewForTag:[sender tag]];
    NSView* previousView = [self viewForTag:currentViewTag];

    currentViewTag = [sender tag];

    [[[[self window] contentView] animator] replaceSubview:previousView with:currentView];
} 
```

地图页面没有特殊代码。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:53:43.677

我不能错你的代码。我假设您单步执行了您的代码并检查了所有视图是否已正确添加和删除。此外，您可能需要检查切换后为地图视图设置的框架。如果框架的 NSRect 是您的空白所在的位置，那么 MKMapView 并不热衷于在视图堆栈中添加和删除。

这是一个很长的镜头，但您可以尝试以下方法之一：

*   用于`setHidden:`暂时使您的地图视图不可见，而不是删除和添加它。不确定，但是您可能会从中获得一些性能，并且隐藏和显示可能比添加和删除更便宜...

*   使用`addSubView:`和`removeFromSuperview`切换视图。这可能需要一些代码来提供正确设置视图的框架，或者有一个方便的“默认”框架，您可以在添加视图时使用它。

底线 MKMapView 是 WebView 的包装器，有时看起来有点奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:15:17.450

这个 Map Kit 有时有点问题，改变我呈现视图的方式解决了这个问题。

# eclipse-plugin - Hadoop MapReduce 1.0.2 eclipse-plugin 构建失败...我不明白

> ID：10176463
> 
> 赞同：0
> 
> 时间：2012-04-16T14:52:00.563
> 
> 标签：eclipse-plugin, hadoop, mapreduce

我尝试从源代码构建 Hadoop MapReduce eclipse-plugin，但出现以下错误。

```
SRC_BASE_DIR/hadoop-common/hadoop-mapreduce-project/build/ivy/lib/Hadoop/common
does not exist. 
```

我从 Apache GIT 存储库中克隆了 Hadoop 源代码，并使用以下命令设法构建了实际的 Hadoop 二进制文件

```
cd SRC_BASE_DIR/hadoop-common
mvn clean install 
```

这很成功，所以接下来我更改了目录

```
cd SRC_BASE_DIR/hadoop-common/hadoop-mapreduce-project/src/contrib/eclipse-plugin 
```

我将 eclipse.home 属性附加到 build.properties 文件中......

```
echo "eclipse.home=/opt/eclipse" >> build.properties 
```

然后尝试构建插件...

```
ant jar 
```

但我仍然收到上述错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:16:17.250

好的，我错过了一步。

在文件夹中

```
SRC_BASE_DIR/hadoop-common/hadoop-mapreduce-project 
```

我运行了以下命令

```
mvn -DskipTests install 
```

这是成功的。然后在文件夹中

```
SRC_BASE_DIR/hadoop-common/hadoop-mapreduce-project/src/contrib/eclipse-plugin 
```

我运行了命令

```
ant jar 
```

这次成功了，创建了JAR文件**hadoop-1.0.2-eclipse-plugin.jar**

现在，我只希望插件能正常工作！

# c++ - 如何将 R 的绘图运行到 C/C++ 中？

> ID：10176468
> 
> 赞同：0
> 
> 时间：2012-04-16T14:52:08.007
> 
> 标签：c++, c, r

如何在 C 中执行 R 命令，而不使用 R 扩展，例如：

```
int main() {

   system("R g<- graph(c(0,1,0,4,0,9,1,7,1,9,2,9,2,3,2,5,3,6,3,9,4,5,4,8,5,8,6,7,6,8,7,8),n=10,dir=FALSE)
    plot(g)")

    return(0)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T15:47:11.590

您可以使用 system() 调用来运行 R，但是您不能像那样将 R 函数粘贴在命令行上。

您可以做的是将 R 代码写入文件并使用`system("R CMD BATCH foo.R")`- 至少调用它：

```
main(){system("R CMD BATCH test.R");} 
```

现在，默认情况下，R CMD BATCH 的输出图形会转到 PDF 文件，因此您需要打开图形窗口并暂停脚本以查看它。

当然，您的 test.R 文件可以在运行之前由您的 C 代码编写，您可以将其保存在临时目录或其他地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:27:22.940

的替代方案`R CMD BATCH`是`Rscript`。我认为对于 C++ 和 R 没有紧密集成的问题，即使用 R 和 C++ 的不同阶段，以及大量或频繁的数据交换，使用系统调用可以非常简单和健壮。

另一种方法是同时运行 R 和 C++ 并在它们之间交换信息。这可以使用[CRAN](http://cran.r-project.org/web/packages/RInside/index.html)上提供的[RInside pacakge](http://dirk.eddelbuettel.com/code/rinside.html)来完成。

# c++ - 是否可以将 boost::system::error_code 转换为 std:error_code？

> ID：10176471
> 
> 赞同：22
> 
> 时间：2012-04-16T14:52:08.460
> 
> 标签：c++, boost, std, error-code

我想尽可能用标准 C++ 中的等价物替换外部库（如 boost），如果它们存在并且可能的话，以最小化依赖关系，因此我想知道是否存在一种安全的方法来转换`boost::system::error_code`为`std::error_code`. 伪代码示例：

```
void func(const std::error_code & err)
{
    if(err) {
        //error
    } else {
        //success
    }
}

boost::system::error_code boost_err = foo(); //foo() returns a boost::system::error_code
std::error_code std_err = magic_code_here; //convert boost_err to std::error_code here
func(std_err); 
```

最重要的不是完全相同的错误，只是尽可能接近，最后是否是错误。有什么聪明的解决方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T00:08:29.383

我有这个完全相同的问题，因为我想使用`std::error_code`但也在使用其他使用的 boost 库`boost::system::error_code`（例如 boost ASIO）。接受的答案适用于由 处理的错误代码`std::generic_category()`，因为它们是 boost 的通用错误代码的简单转换，但它不适用于您想要处理自定义错误类别的一般情况。

因此，我创建了以下代码作为通用`boost::system::error_code`转换`std::error_code`器。它通过`std::error_category`为每个 动态创建一个 shim 来工作`boost::system::error_category`，将调用转发到底层的 Boost 错误类别。由于错误类别需要是单例的（或至少像本例中那样的单例），我不认为会有太多的内存爆炸。

我也只是将`boost::system::generic_category()`对象转换为使用`std::generic_category()`，因为它们的行为应该相同。我本来想为 做同样的事情`system_category()`，但是在 VC++10 上进行测试时，它打印出了错误的消息（我认为它应该打印出你从中得到的信息`FormatMessage`，但它似乎使用`strerror`，Boost`FormatMessage`按预期使用）。

要使用它，只需调用`BoostToErrorCode()`，定义如下。

只是一个警告，我今天才写这个，所以它只有基本的测试。您可以以任何您喜欢的方式使用它，但风险自负。

```
//==================================================================================================
// These classes implement a shim for converting a boost::system::error_code to a std::error_code.
// Unfortunately this isn't straightforward since it the error_code classes use a number of
// incompatible singletons.
//
// To accomplish this we dynamically create a shim for every boost error category that passes
// the std::error_category calls on to the appropriate boost::system::error_category calls.
//==================================================================================================
#include <boost/system/error_code.hpp>
#include <boost/thread/mutex.hpp>
#include <boost/thread/once.hpp>
#include <boost/thread/locks.hpp>

#include <system_error>
namespace
{
    // This class passes the std::error_category functions through to the
    // boost::system::error_category object.
    class BoostErrorCategoryShim : public std::error_category
    {
    public:
        BoostErrorCategoryShim( const boost::system::error_category& in_boostErrorCategory )
            :m_boostErrorCategory(in_boostErrorCategory), m_name(std::string("boost.") + in_boostErrorCategory.name()) {}

        virtual const char *name() const;
        virtual std::string message(value_type in_errorValue) const;
        virtual std::error_condition default_error_condition(value_type in_errorValue) const;

    private:
        // The target boost error category.
        const boost::system::error_category& m_boostErrorCategory;

        // The modified name of the error category.
        const std::string m_name;
    };

    // A converter class that maintains a mapping between a boost::system::error_category and a
    // std::error_category.
    class BoostErrorCodeConverter
    {
    public:
        const std::error_category& GetErrorCategory( const boost::system::error_category& in_boostErrorCategory )
        {
            boost::lock_guard<boost::mutex> lock(m_mutex);

            // Check if we already have an entry for this error category, if so we return it directly.
            ConversionMapType::iterator stdErrorCategoryIt = m_conversionMap.find(&in_boostErrorCategory);
            if( stdErrorCategoryIt != m_conversionMap.end() )
                return *stdErrorCategoryIt->second;

            // We don't have an entry for this error category, create one and add it to the map.                
            const std::pair<ConversionMapType::iterator, bool> insertResult = m_conversionMap.insert(
                ConversionMapType::value_type(
                    &in_boostErrorCategory, 
                    std::unique_ptr<const BoostErrorCategoryShim>(new BoostErrorCategoryShim(in_boostErrorCategory))) );

            // Return the newly created category.
            return *insertResult.first->second;
        }

    private:
        // We keep a mapping of boost::system::error_category to our error category shims.  The
        // error categories are implemented as singletons so there should be relatively few of
        // these.
        typedef std::unordered_map<const boost::system::error_category*, std::unique_ptr<const BoostErrorCategoryShim>> ConversionMapType;
        ConversionMapType m_conversionMap;

        // This is accessed globally so we must manage access.
        boost::mutex m_mutex;
    };

    namespace Private
    {
        // The init flag.
        boost::once_flag g_onceFlag = BOOST_ONCE_INIT;

        // The pointer to the converter, set in CreateOnce.
        BoostErrorCodeConverter* g_converter = nullptr;

        // Create the log target manager.
        void CreateBoostErrorCodeConverterOnce()
        {
            static BoostErrorCodeConverter converter;
            g_converter = &converter;
        }
    }

    // Get the log target manager.
    BoostErrorCodeConverter& GetBoostErrorCodeConverter()
    {
        boost::call_once( Private::g_onceFlag, &Private::CreateBoostErrorCodeConverterOnce );

        return *Private::g_converter;
    }

    const std::error_category& GetConvertedErrorCategory( const boost::system::error_category& in_errorCategory )
    {
        // If we're accessing boost::system::generic_category() or boost::system::system_category()
        // then just convert to the std::error_code versions.
        if( in_errorCategory == boost::system::generic_category() )
            return std::generic_category();

        // I thought this should work, but at least in VC++10 std::error_category interprets the
        // errors as generic instead of system errors.  This means an error returned by
        // GetLastError() like 5 (access denied) gets interpreted incorrectly as IO error.
        //if( in_errorCategory == boost::system::system_category() )
        //  return std::system_category();

        // The error_category was not one of the standard boost error categories, use a converter.
        return GetBoostErrorCodeConverter().GetErrorCategory(in_errorCategory);
    }

    // BoostErrorCategoryShim implementation.
    const char* BoostErrorCategoryShim::name() const
    {
        return m_name.c_str();
    }

    std::string BoostErrorCategoryShim::message(value_type in_errorValue) const
    {
        return m_boostErrorCategory.message(in_errorValue);
    }

    std::error_condition BoostErrorCategoryShim::default_error_condition(value_type in_errorValue) const
    {
        const boost::system::error_condition boostErrorCondition = m_boostErrorCategory.default_error_condition(in_errorValue);

        // We have to convert the error category here since it may not have the same category as
        // in_errorValue.
        return std::error_condition( boostErrorCondition.value(), GetConvertedErrorCategory(boostErrorCondition.category()) );
    }
}

std::error_code BoostToErrorCode( boost::system::error_code in_errorCode )
{
    return std::error_code( in_errorCode.value(), GetConvertedErrorCategory(in_errorCode.category()) );
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-16T16:20:21.663

由于 C++-11 (std::errc)，[boost/system/error_code.hpp](http://www.boost.org/doc/libs/1_39_0/boost/system/error_code.hpp)将相同的错误代码映射到[std::errc](http://en.cppreference.com/w/cpp/error/system_error/errc)，这是在系统头文件中定义的`system_error`。

您可以比较这两个枚举，它们在功能上应该是等效的，因为它们似乎都基于 POSIX 标准。可能需要演员表。

例如，

```
namespace posix_error
    {
      enum posix_errno
      {
        success = 0,
        address_family_not_supported = EAFNOSUPPORT,
        address_in_use = EADDRINUSE,
        address_not_available = EADDRNOTAVAIL,
        already_connected = EISCONN,
        argument_list_too_long = E2BIG,
        argument_out_of_domain = EDOM,
        bad_address = EFAULT,
        bad_file_descriptor = EBADF,
        bad_message = EBADMSG,
        ....
       }
     } 
```

和`std::errc`

```
address_family_not_supported  error condition corresponding to POSIX code EAFNOSUPPORT  

address_in_use  error condition corresponding to POSIX code EADDRINUSE  

address_not_available  error condition corresponding to POSIX code EADDRNOTAVAIL  

already_connected  error condition corresponding to POSIX code EISCONN  

argument_list_too_long  error condition corresponding to POSIX code E2BIG  

argument_out_of_domain  error condition corresponding to POSIX code EDOM  

bad_address  error condition corresponding to POSIX code EFAULT 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-29T11:12:38.927

我将上述解决方案改编为更短的解决方案。使用 thread_local std::map 将类别名称映射到其实例，因此不需要锁定。

限制是您不能在线程之间传递错误代码，因为类别指针会有所不同。（如果您不想使用 thread_local 存储，将其转换为锁定函数很简单）

我也喂它更紧凑。

```
#include <iostream>
#include <map>
#include <boost/system/system_error.hpp>

namespace std
{

error_code make_error_code(boost::system::error_code error)
{
    struct CategoryAdapter : public error_category
    {
        CategoryAdapter(const boost::system::error_category& category)
            : m_category(category)
        {
        }

        const char* name() const noexcept
        {
            return m_category.name();
        }

        std::string message(int ev) const
        {
            return m_category.message(ev);
        }

    private:
        const boost::system::error_category& m_category;
    };

    static thread_local map<std::string, CategoryAdapter> nameToCategory;
    auto result = nameToCategory.emplace(error.category().name(), error.category());
    auto& category = result.first->second;
    return error_code(error.value(), category);
}

};

int main() {
    auto a = boost::system::errc::make_error_code(boost::system::errc::address_family_not_supported);
    auto b = std::make_error_code(a);
    std::cout << b.message() << std::endl;
} 
```

# jquery - 如何将 Rails 用作具有 Backbone UI 的纯 JSON 应用程序服务器？

> ID：10176473
> 
> 赞同：2
> 
> 时间：2012-04-16T14:52:20.623
> 
> 标签：jquery, ruby-on-rails-3, json, user-interface, backbone.js

我正在启动一个新的网络应用程序。我已经决定，使用 Twitter Bootstrap 我实际上可以让这个应用看起来很不错！所以这激发了我真正关注应用程序的用户体验。真正擦亮它，让它发光。

所以，很自然，会有很多前端 JS 工作。作为 Rails 3 的粉丝，我考虑过使用 Rails（连同它的生成器、简单的 ActiveRecord 等）作为使用 JSON 的后端平台。所以 Backbone 将执行 CRUD 操作，而 Rails 将处理服务器端的东西。

事实上，我什至不想使用 Rails 的模板系统。我考虑过只使用纯 HTML 并使用 nginx 静态地为它们提供服务。

Backbone 和 jQuery 将负责更新页面的各个部分。

我的逻辑合理吗？我想这样做的主要原因是我想要一个用户会喜欢的纯粹的前端体验。另外，我的应用程序的性质确实非常适合不刷新页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:29:17.360

当然，那会很好用。如今，您几乎可以在后端使用几乎任何语言和服务器执行相同的操作，包括 Node.js、Rails、Java 和 Jersey（这就是我们使用的）、PHP 等。

Backbone 前端只是将后端视为通过 URL 访问的查询和持久性服务。从这些 URL 提供 JSON 数据，Backbone 会很高兴。

# vba - 迭代 Word 文档中的每个字符

> ID：10176474
> 
> 赞同：1
> 
> 时间：2012-04-16T14:52:23.390
> 
> 标签：vba, ms-word, interop, character

我需要迭代任何给定 word 文档中的每个字符。我对对象模型有些熟悉，但不知道如何获得这种粒度。

任何方法都可以（宏、互操作、外接程序或 OLE 嵌入）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:07:25.207

出什么问题了

```
For Each ch In ActiveDocument.Characters 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T06:20:48.750

一种手动方法是这样的：我确信它适用于“普通”文档，只要光标可以单独使用“右箭头键”在整个文档中移动。

子温度（）

'选择文档中的第一个字符 Selection.HomeKey Unit:=wdStory

'主循环从这里开始

'将光标 1 个字符向右移动，同时 '选择' (Extend:=WdExtend Selection.MoveRight Unit:=wdCharacter, Count:=1, Extend:=wdExtend

'现在您选择了 1 个字符。在此处插入您的代码，无论您想对所选文本做什么

'现在'实际上'按右箭头取消选择 Selection.MoveRight Unit:=wdCharacter, Count:=1

'现在重复主循环。请记住，此代码片段还没有退出子句；通过进一步编码，它会锁定你的 Word ;)

'前进快乐！

结束子

# ios - 为什么这里需要演员表？

> ID：10176477
> 
> 赞同：4
> 
> 时间：2012-04-16T14:52:39.020
> 
> 标签：ios, objective-c

我一直在研究 Apple 的“您的第二个 IOS 应用程序”教程”，并且我注意到每次我使用一个`NSDateFormatter`用于生成日期字符串时，我都希望转换输入日期对象。

例如（[页面](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/CustomizingDetailView/CustomizingDetailView.html)- 在“实现 configureView 方法”下）

```
BirdSighting *theSighting = self.sighting;

if (theSighting) {
    self.birdNameLabel.text = [theSighting name];
    self.locationLabel.text = [theSighting location];

    self.dateLabel.text = [formatter stringFromDate:(NSDate *)theSighting.date]; // Here
} 
```

但是我知道在`BirdSighting`类中该`date`属性始终是一个`NSDate`对象。

所以我想知道为什么本教程总是强制转换输入，是否有某种 Objective-C 约定或框架约定建议您这样做？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:58:14.450

这不是必需的。演员表只是为了清楚起见，因为该属性已经定义为 a `NSDate`，[这里](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/DesigningDataModel/DesigningDataModel.html)：

```
@property (nonatomic, strong) NSDate *date; 
```

在处理核心基础时，唯一需要以这种形式进行强制转换的情况是非弧线，如下所示：

```
CFDateRef asCFDate;
NSDate *asNSDate = (NSDate *) asCFDate; 
```

但是，在 ARC 中，您将使用`__bridge`强制转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T14:58:31.733

演员表是不必要的，我认为应该删除。

该属性已被定义为`NSDate`数据模型对象上的一个（除非有后续步骤将其重新定义为`id`或某些东西，这是值得怀疑的），因此它不会向代码的读者或编译器提供额外的信息。

# mysql - SQL 查询多个连接

> ID：10176484
> 
> 赞同：0
> 
> 时间：2012-04-16T14:52:49.033
> 
> 标签：mysql, sql, join

修改。我的 SQL 有限，非常感谢您的帮助。在一次点击中，我想通过 ID ($ga_id) 查询两个表，每个表都有一个内部连接到另一个表（表具有完全相同的列，并且父表彼此没有关系）。

我可以成功查询net_5_postmeta表如下

```
SELECT p.*
FROM net_5_postmeta AS pm
INNER JOIN net_5_posts AS p ON pm.meta_value=p.ID 
WHERE pm.post_id = $ga_id
AND pm.meta_key = '_thumbnail_id' 
ORDER BY p.post_date DESC 
LIMIT 4 
```

但我想查询 net_5_postmeta 表和 net_7_postmeta 表（它们具有相同的列），我认为它需要类似于...

```
SELECT p.*
FROM net_5_postmeta, net_7_postmeta AS pm
INNER JOIN net_5_posts AS p ON pm.meta_value=p.ID
INNER JOIN net_7_posts AS p ON pm.meta_value=p.ID 
WHERE pm.post_id = $ga_id
AND pm.meta_key = '_thumbnail_id' 
ORDER BY p.post_date DESC 
LIMIT 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:54:42.180

正如您所说的父表没有关系，我只能假设您想将*5*和*7*表视为相同。您应该使用`union all`将他们的数据放在一起，然后执行 ORDER BY/LIMIT。

```
SELECT *
FROM
(
  SELECT p.*
  FROM net_5_postmeta AS pm
  INNER JOIN net_5_posts AS p ON pm.meta_value=p.ID 
  WHERE pm.post_id = $ga_id
  AND pm.meta_key = '_thumbnail_id' 

  UNION ALL

  SELECT p.*
  FROM net_7_postmeta AS pm
  INNER JOIN net_7_posts AS p ON pm.meta_value=p.ID 
  WHERE pm.post_id = $ga_id
  AND pm.meta_key = '_thumbnail_id' 
) united
ORDER BY united.post_date DESC 
LIMIT 4 
```

# spring - 使用 Spring，您还需要 Java 应用程序服务器吗？什么时候需要？

> ID：10176485
> 
> 赞同：8
> 
> 时间：2012-04-16T14:52:50.577
> 
> 标签：spring

在我看来，您需要 tomcat 或其他一些用于 Web 部件的 servlet 引擎。使用hibernate和jms的数据访问部分呢？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T14:56:54.400

不，您不需要应用程序服务器，您可以将 Spring 视为专有的、模块化的应用程序服务器实现/适配器。但是您仍然需要一个 servlet 容器。

*   数据访问部分：可以使用[hibernate](/questions/tagged/hibernate "显示标记为“休眠”的问题")和一些独立的连接池

*   [jms](/questions/tagged/jms "显示标记为“jms”的问题")：Spring 不是 JMS 提供者，但它很好地将 POJO 与任何 JMS 提供者集成

*   Spring 也有全面的事务支持

*   最后，您拥有内置的[jmx](/questions/tagged/jmx "显示标记为“jmx”的问题")和[aop支持，并且可以轻松集成 bean 验证、](/questions/tagged/aop "显示标记为“aop”的问题") [jpa](/questions/tagged/jpa "显示标记为“jpa”的问题")、Web 服务、[rmi](/questions/tagged/rmi "显示标记为“rmi”的问题")、[jci](/questions/tagged/jci "显示标记为“jci”的问题")、任务调度、缓存......

如您所见，您可以使用经过认证的应用程序服务器和 Java EE 堆栈，也可以在 Tomcat 之上构建并选择您需要的 Spring 模块。有时 Spring 使用标准的 Java EE API（如 JPA），更多时候它构建自己的。

# r - 本地安装 RODBC 时如何指定 include 和 lib 目录？

> ID：10176490
> 
> 赞同：0
> 
> 时间：2012-04-16T14:53:07.700
> 
> 标签：r, rodbc

我正在尝试使用 commadn R CMD INSTALL -l /my/local/path RODBC.tar.gz 安装 RODBC，但它找不到 sql.h 和 sqlext.h ..如何将包含和 lib 路径传递给此命令?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T17:31:13.773

我最近在尝试在 Centos 5.8 x64 实例上安装 RODBC 时遇到了类似的问题。（而不是使用 R CMD 安装，我只是做了 sudo R，然后在 R 中安装了包 - 但我仍然遇到同样的问题）。

我通过安装以下软件包解决了这个问题`yum`：

```
unixODBC
unixODBC-libs
unixODBC-devel
mysql-connector-odbc
freetds
freetds-devel 
```

最后两个是必要的，因为我正在与需要 TDS 的 MSSQL 服务器交互。无论如何，一旦我安装了 unixODBC 以及 libs 和开发包，我就能够毫无困难地安装 RODBC（再次，使用 sudo R 然后 install.packages("RODBC")。

唯一要做的另一件事是为 ODBC 安装正确的驱动程序/库，这就是 mysql-connector-odbc。您将需要配置 unixODBC 以满足您的需求，但文档非常可靠，所以我认为您不会有太多困难。

# php - PHP中的全局进程生成限制？

> ID：10176493
> 
> 赞同：1
> 
> 时间：2012-04-16T14:53:15.180
> 
> 标签：php, linux, process, limit, ulimit

我有一个在 Ubuntu linux 机器上运行的 PHP 脚本。该脚本使用该函数生成多个进程`pcntl_fork()`，并使用该`pcntl_waitpid()`函数记录它们被杀死。它经常产生这些（我估计大约 40-50/秒），*但是***这些进程都被立即杀死**（我已经尝试`exit()`过`posix_kill(${pid}, SIGKILL)`，无济于事）。该脚本可以正常工作几秒钟（取决于 10~30 秒），但不可避免地会停止并停止创建“子”进程。由于脚本导致的机器上的内存使用量没有增加，但是当脚本停止时，机器上的 cpu 会慢慢飙升，直到我用 Ctrl-C 强制终止脚本。每个进程都旨在解析一行文本并最终将其保存到文件中。出于测试目的，我只是在创建子进程后立即退出它们。在一项测试中，大约 1400 个进程在脚本冻结之前成功启动并终止，尽管就像我说的那样。

我知道一台机器有一个 ulimit，但我相信我读到它限制了*并发*进程的数量。由于此脚本在创建子进程后立即将其杀死，因此我对正在发生的事情感到困惑。这是我当前的 ulimit 配置 ( `ulimit -a`) 的输出：

```
核心文件大小（块，-c）0
数据段大小 (kbytes, -d) 无限制
调度优先级 (-e) 0
文件大小（块，-f）无限制
待处理信号 (-i) 29470
最大锁定内存 (kbytes, -l) 64
最大内存大小 (kbytes, -m) 无限制
打开文件 (-n) 1024
管道大小（512 字节，-p）8
POSIX 消息队列（字节，-q）819200
实时优先级 (-r) 0
堆栈大小（千字节，-s）8192
cpu时间（秒，-t）无限制
最大用户进程 (-u) 29470
虚拟内存 (kbytes, -v) 无限制
文件锁 (-x) 无限制

```

PHP 中是否有一个全局限制来确定脚本执行期间创建的进程总数？**请记住，这些子进程会立即被杀死，所以我不认为这是创建无限数量的进程窃取系统资源的问题。

这是一些源代码：

我用这个初始化叉子

```
$this->process_control->fork(array($this, "${FUNCTION_NAME}"), array(STRING_LINE), false);

```

进程分叉函数。在这种情况下，$callback 是要在适当的类中调用的函数的名称。$params 是要传递给 $callback 中指定的函数的参数数组。

```
    公共函数 fork ($callback, $params = null, $hang = true)
   {

    $this->logger->write_log('log', "进入fork函数！");

            // 评估分叉的返回值
        开关 ($pid = pcntl_fork()) {
            case -1: // 失败
                $this->logger->write_log('error', "Could not fork!");
                退出（1）；
            休息;
            case 0: // 子节点创建成功

                $this->logger->write_log('log', "进入子函数！");

                $this->logger->write_log('log', 'child' . posix_getpid() . 'started');
                如果（空（$回调））{
                   $this->logger->write_log('warn', "回调为空，无事可做！");
                   退出（1）；
                }

                if (is_array($callback) && is_array($params)) {
                    if (!call_user_func_array($callback, $params)) {
                        $this->logger->write_log('error', "守护进程返回假！");
                        退出（1）；
                    } 别的 {
                        退出（0）；
                    }
                } 别的 {
                    if (!call_user_func($callback, $params)) {
                        $this->logger->write_log('error', "守护进程返回假！");
                        退出（1）；
                    } 别的 {
                        退出（0）；
                    }
                }
                休息;

            默认值：//父级
                $this->logger->write_log('log', "进入父函数！");
                如果 ($hang != true) {
                    $this->wait($pid, false);
                } 别的 {
                    $this->wait($pid);
                }
                休息;
           }
    }

    公共函数等待（$p_id，$hang = true）
    {
        如果（$挂）{
            $pid = pcntl_waitpid($p_id, $status);
        } 别的 {
            $pid = pcntl_waitpid($p_id, $status, WNOHANG);
        }
        开关（$pid）{
        情况1：
        案例0：
            $this->logger->write_log('log', "child exited");
            休息;
        默认：
            $this->logger->write_log('log', "child $pid exited");
            休息;
        }
    }

```

实际处理文本行的函数。文本行是 JSON 对象：

```
公共函数 FUNCTION_NAME($line) {

        $this->logger->write_log('info', '进入 FUNCTION_NAME 函数');

        $start_time = 微时间（真）；

        尝试 {
            # 检查 JSON 行是否格式错误
            $line_array = json_decode($line, true);
            if (!isset($line_array)) {
                throw new Exception('无法成功处理行');
            }
            # 将内容保存到磁盘
            if (!file_put_contents(FILE_NAME, $line, LOCK_EX)) {
                throw new Exception('文件无法保存');
            }
            $this->logger->write_log('info', '保存的行');
            返回真；
        } 捕捉（异常 $e）{
            $this->logger->write_log('error', $e->getMessage());
            $this->logger->write_log('error', '------------------------------------ ----------------');
            $this->logger->write_log('error', var_export($line, true));
            $this->logger->write_log('error', '------------------------------------ ----------------');
            file_put_contents(ERROR_SRC_FILE, $line, FILE_APPEND);
            返回假；
        }
    }

```

抱歉，如果代码太多，请告诉我任何问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:36:56.137

要回答最初的问题，我没有发现可以使用php创建的进程数量有限制，**只要它们在创建后不久就被杀死**。我相信用户可以在 linux 中创建的进程是有限制的，可以使用`ulimit`.

# mysql - 从多个mysql点创建谷歌地图折线

> ID：10176495
> 
> 赞同：1
> 
> 时间：2012-04-16T14:53:19.393
> 
> 标签：mysql, google-maps, google-polyline

我有一个 mysql 表，其中包含一系列 lat/lng 点被写入 xml 文件并作为点导入谷歌地图。这似乎工作正常，但不是简单地用一个点标记它们，我想在它们之间生成一条折线。在查看[开发人员文档](https://developers.google.com/maps/documentation/javascript/overlays#Polylines)时，我注意到该示例通过为每条线/点集创建一个新的 latlng 对象进行迭代。有没有一种方法可以动态调用一系列点来从我的数据库中生成多条线？抱歉，如果这似乎是一个明显的修复 - 我对地图 api 有点陌生。提前致谢！

我正在使用的输出 XML 文件如下所示：

```
Location name="2012-04-01 12:28:18" lat="42.9523010667" lon="-78.8189444333"/
Location name="2012-04-01 12:28:06" lat="42.95219345" lon="-78.81931905"/
Location name="2012-04-01 12:27:54" lat="42.9522356" lon="-78.8192848667"/..... etc 
```

HTML/ 脚本将 XML 坐标调用到地图中：

```
function load() {
  if (GBrowserIsCompatible()) {
    var map = new GMap2(document.getElementById("map"));
    map.addControl(new GSmallMapControl());
    map.addControl(new GMapTypeControl());
    map.setCenter(new GLatLng(42.9521, -78.8198), 20);

    GDownloadUrl("gmaps_genxml2.php", function(data) {
      var xml = GXml.parse(data);
      var markers = xml.documentElement.getElementsByTagName("Location");
      for (var i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("timestamp");
        var point = new GLatLng(parseFloat(markers[i].getAttribute("lat")),
                                parseFloat(markers[i].getAttribute("lon")));
        var marker = createMarker(point, name);
        map.addOverlay(marker); 
      }
    }); 
```

developer.google doc 上有问题的代码段：

```
var flightPlanCoordinates = [
new google.maps.LatLng(37.772323, -122.214897),
new google.maps.LatLng(21.291982, -157.821856),
new google.maps.LatLng(-18.142599, 178.431),
new google.maps.LatLng(-27.46758, 153.027892)];
  var flightPath = new google.maps.Polyline({
path: flightPlanCoordinates,
strokeColor: "#FF0000",
strokeOpacity: 1.0,
strokeWeight: 2});

  flightPath.setMap(map);}}}

function createMarker(point, name) {
  var marker = new GMarker(point, customIcons[type]);
  var html = "<b>" + name;
  GEvent.addListener(marker, 'click', function() {
    marker.openInfoWindowHtml(html);
  });

  return marker;
} 
```

我目前没有在控制台中显示任何错误。这就是我尝试从原始帖子中实现前两个代码片段的方式，但我没有让地图显示任何线/点。可能是我定义点变量的方式/它不是存储数组，而是一个点？我也尝试使用 [] 来定义“点”-但这不起作用/也没有显示任何错误...

```
function load() {
if (GBrowserIsCompatible()) {
// Create an instance of Google map
var map = new GMap2(document.getElementById("map"));
// Tell the map where to start
map.setCenter(new GLatLng(42.9521, -78.8198), 20);

GDownloadUrl("gmaps_genxml2.php", function(data) {
var xml = GXml.parse(data);
var markers = xml.documentElement.getElementsByTagName("Location");
for (var i = 0; i < markers.length; i++) {
var point = new GLatLng(parseFloat(markers[i].getAttribute("lat")), parseFloat(markers[i].getAttribute("lon")));
var polyline = new GPolyline(point, '#ff0000', 5, 0.7);
map.addOverlay(polyline);
}
});
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T23:46:15.073

知道了！在这里我在网上问，坐在我后面的孩子一直都知道......

我错误地设置了阵列。解决问题：----创建一个空数组----使用'.push'插入数组

```
 function load() {

  if (GBrowserIsCompatible()) {
// Create an instance of Google map
var map = new GMap2(document.getElementById("map"));

// Tell the map where to start
map.setCenter(new GLatLng(42.9521, -78.8198), 20);

GDownloadUrl("gmaps_genxml2.php", function(data) {
      var xml = GXml.parse(data);
      var markers = xml.documentElement.getElementsByTagName("Location");
      var points = [];
      for (var i = 0; i < markers.length; i++) {

        points.push(new GLatLng(parseFloat(markers[i].getAttribute("lat")), parseFloat(markers[i].getAttribute("lon"))));
      }
      var polyline = new GPolyline(points, '#ff0000', 5, 0.7);
        map.addOverlay(polyline);
    });

}} 
```

# ios - ios方法变成僵尸

> ID：10176499
> 
> 赞同：0
> 
> 时间：2012-04-16T14:53:38.660
> 
> 标签：ios

我在启用 arc 的项目中添加了 uiviewcontroller 子类，我添加了一个为它创建 ibaction 的按钮，其中不包含任何代码，所有这些都是通过界面生成器完成的，没有手动代码，但是当我点击按钮时，我得到了 exc_bad_access。当按下按钮时，仪器显示它是僵尸攻击。我真的不明白出了什么问题。我创建了新项目并做了同样的事情，它工作得很好。当我定义关闭键盘的方法（辞职第一响应者）时，也会发生同样的事情。

当我crtl +从按钮拖动到界面实现时生成，我选择ibaction和名称并生成此代码。

```
- (IBAction)pushh:(id)sender; 
```

以及 .m 文件中的实现

```
- (IBAction)pushh:(id)sender {
} 
```

就这样 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:03:16.987

只是为了结束离线对话，有几个想法：

1.  您的僵尸无疑是 ecnObj 超出范围的结果。如果它是视图控制器的 ivar，那么过早释放问题就会消失。

2.  您*不想*创建一个新的视图控制器，然后在`transitionFromView`. 如果你想在视图控制器之间转换（在 iOS5 中）你应该使用`pushViewController`or `presentViewController`（或者如果你正在使用容器视图控制器，你可以使用`transitionFromViewController`）。请参阅 View Controller Programming Guide 中关于“[从其他视图控制器呈现视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)”的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:41:30.190

我的解决方案是删除 ib 中的按钮`iboutlet`，同时删除 ib 中的按钮`ibaction`，然后将其连接回来。

# azure - 如何在 Windows azure 上托管 isapi 扩展

> ID：10176502
> 
> 赞同：2
> 
> 时间：2012-04-16T14:53:46.790
> 
> 标签：azure, isapi

我想在 Windows azure 上部署一个 Web 应用程序（ISAPI DLL 32 位）作为托管服务。现在，我已经开发了我的 isapi dll 并在 IIS 下工作，我想如何创建一个 azure 包和配置文件。

我需要 Visual Studio 吗？或者我可以使用任何工具创建包吗？

我的 Isapi dll 是使用 delphi xe2 创建的。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:45:47.320

正如 Tom 提到的，您可以使用 CSPack 创建包。至于配置文件，您可以手动创建，也可以在使用 CSPack 时使用 /generateConfigurationFile 开关。此开关将自动生成 cscfg 文件的骨架。如果您没有任何要配置的内容，则可以保持原样。有关 CSPack 的更多信息，另请参阅 Tom 的链接。底线是您需要一个 csdef 文件，该文件必须手动创建或使用 Windows Azure 开发工具（例如 Visual Studio）创建。如果您想手动创建它，我建议您检查[http://msdn.microsoft.com/en-us/library/windowsazure/ee758711.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee758711.aspx)的架构。

此致，

明旭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:36:03.767

您不必使用 Visual Studio，您可以使用作为 Azure SDK 一部分的 CSPack：

[http://msdn.microsoft.com/en-us/library/windowsazure/gg432988.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg432988.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:48:59.320

另请注意，请使用启动任务来安装 ISAPI 过滤器。有关启动任务的更多信息，您可以参考[http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)。在启动任务中，您可以运行 Appcmd 来安装 ISAPI 过滤器，或启动自定义 C# 应用程序，或使用 PowerShell。此外，请查看[http://learningpcs.blogspot.com/2011/08/powershell-iis-7-adding-isapi-filters.html](http://learningpcs.blogspot.com/2011/08/powershell-iis-7-adding-isapi-filters.html)了解安装 ISAPI 过滤器的各种选项。

此致，

明旭。

# php - 在 Flashbuilder 中动态填充 textArea

> ID：10176505
> 
> 赞同：0
> 
> 时间：2012-04-16T14:53:58.533
> 
> 标签：php, sql, apache-flex, textarea, flash-builder

我似乎无法在 flash builder 中动态填充 textArea。我能找到的唯一教程是使用 dataProvider 填充 dataGrids 或下拉列表。这是我正在使用的代码：

```
<s:HTTPService id="noteService"
                   url="http://localhost/webAppIntergration%20Thur/Assignment/servicePipe.php?action=getNoteXML"
                   /> 
```

创建应用程序时发送 HTTPService。这是我尝试过的 textArea 代码：

```
<s:TextArea text="{noteService.lastResult.notess.notes}"/> 
```

返回到 textArea 的唯一内容是“[object Object]”，所以我想我必须先将其更改为不同的类型或字符串，然后才能将其输出到 textArea 字段，但我不能 100% 确定如何去做这个。

任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:58:22.423

您可以尝试以下代码来将动态字符串填充到您定义的文本区域：-

```
<fx:Script>
    <![CDATA[
        import mx.rpc.events.ResultEvent;
        private function resultHandler(event:ResultEvent):void
        {
            //parse your result or type cast.
            textArea.text = noteService.lastResult.notess.notes
        }

    ]]>
</fx:Script>
<s:TextArea id="textArea"/>
    <s:HTTPService id="noteService"
                   url="http://localhost/webAppIntergration%20Thur/Assignment/servicePipe.php?action=getNoteXML"
                   result="resultHandler(event)"
                   fault="trace('fault')"/> 
```

# java - 从 java 访问外部 .jar 资源

> ID：10176509
> 
> 赞同：1
> 
> 时间：2012-04-16T14:54:06.927
> 
> 标签：java, user-interface, resources, jar, load

我正在开发一个多模块 Java 项目，它由 Eclipse 中相互依赖的多个项目组成，现在要添加 GUI 主题支持，我创建了一个不包含任何代码的 Java 项目，仅包含所需的图标和图片GUI，我把它做成了一个Java项目，所以Maven会将它构建成一个.jar。现在有一个主应用程序将多个项目加载到一个主 GUI 中，该 GUI 目前从实际模块中的资源中获取其图标。我要做的就是从包含在主应用程序.jar 的类路径中的外部虚拟.jar 加载所有这些资源。到目前为止，我发现的每种方法似乎都不起作用。.jar 不包含实际的 java .classes，因此没有要引用的 ClassLoader。有没有其他方法可以在不提取 .jar 的情况下加载图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:25:07.717

将外部 jar 文件视为 zip 存档并读取图像/资源，如下所示：

```
public ZipStuff(String filename) throws IOException
{
    ZipFile zf = new ZipFile(filename);
    Enumeration<? extends ZipEntry> entries = zf.entries();

    while (entries.hasMoreElements()) {
      ZipEntry ze = entries.nextElement();
      ImageIcon ii = new ImageIcon(ImageIO.read(zf.getInputStream(ze)));
      JLabel l = new JLabel(ii);
      getContentPane().add(l);
    }
    setVisible(true);
    pack();
} 
```

在这种情况下，我有一个带有单个图像的 jar 文件，我将其加载到 JLabel 中。ZipStuff 类是一个 JFrame。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:01:54.747

你可以尝试三件事：

1.  在资源 jar 中创建一个虚拟类，您可以使用它来获取 ClassLoader 引用。
2.  如果您知道 jar 文件所在的位置，请使用 URLClassLoader。
3.  您始终可以通过扩展来创建自己的 ClassLoader `java.lang.ClassLoader`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T19:33:58.807

您可以获得所有资源（类路径上的所有 jar 文件即使没有类也可以工作）：

```
 Enumeration<URL> resources = null;
    try {
        resources = Thread.currentThread().getContextClassLoader().getResources(someResource);
    } catch (Exception ex) {
         //no op      
    }
    if (resources == null || !resources.hasMoreElements()) {
        resources = ClasspathReader.class.getClassLoader().getResources(someResource);
    } 
```

然后检查当前资源是否为文件。可以直接作为文件处理的文件。但是你的问题是关于 jar 文件的，所以我不会去那里。

```
 while (resources.hasMoreElements()) {
        URL resource = resources.nextElement();

        if (resource.getProtocol().equals("file")) {
            //if it is a file then we can handle it the normal way.
            handleFile(resource, namespace);
            continue;
        } 
```

此时您应该只有 jar:file 资源，所以... 拆分如下所示的字符串：

jar:file:/Users/rick/.m2/repository/invoke/invoke/1.0-SNAPSHOT/invoke-1.0-SNAPSHOT.jar!/org/node/

进入这个

/Users/rick/.m2/repository/invoke/invoke/1.0-SNAPSHOT/invoke-1.0-SNAPSHOT.jar

和这个

/org/节点/

这是执行上述没有讨厌的错误检查的代码。:)

```
 String[] split = resource.toString().split(":");
        String[] split2 = split[2].split("!");
        String zipFileName = split2[0];
        String sresource = split2[1];

        System.out.printf("After split zip file name = %s," +
                " \nresource in zip %s \n", zipFileName, sresource); 
```

现在我们有了 zip 文件名，因此我们可以读取它：

```
 ZipFile zipFile = new ZipFile(zipFileName); 
```

现在我们可以遍历它的条目：

```
 Enumeration<? extends ZipEntry> entries = zipFile.entries();

        while (entries.hasMoreElements()) {
            ZipEntry entry = entries.nextElement();

            /* If it is a directory, then skip it. */
            if (entry.isDirectory()) {
                continue;
            }

            String entryName = entry.getName();
            System.out.printf("zip entry name %s \n", entryName); 
```

看看它是否从我们正在寻找的资源开始。

```
 if (!entryName.startsWith(someResource)) {
                continue;
            } 
```

我之前做了两个技巧来查看它是否是一个目录

```
 boolean isDir = !someResource.endsWith(".txt"); 
```

这只有效，因为我正在寻找以 .txt 结尾的资源，并且我假设如果它不以 .txt 结尾，那么它是一个目录 /foo/dir 和 /foo/dir/ 都可以工作。

另一个技巧是：

```
 if (someResource.startsWith("/")) {
        someResource = someResource.substring(1);
    } 
```

类路径资源永远不能真正以斜杠开头。逻辑上他们这样做，但实际上你必须剥离它。这是类路径资源的已知行为。除非资源在 jar 文件中，否则它与斜线一起使用。底线，通过剥离它，它总是有效的。

我们需要得到该死的东西的实际文件名。条目名称中的文件名部分。其中/foo/bar/foo/bee/bar.txt，我们想要'bar.txt'，它是文件名。回到我们的 while 循环内部。

```
 while (entries.hasMoreElements()) {
            ZipEntry entry = entries.nextElement();
            ...
            String entryName = entry.getName(); //entry is zipEntry
            String fileName = entryName.substring(entryName.lastIndexOf("/") + 1);

            /** See if the file starts with our namespace and ends with our extension. */
            if (fileName.startsWith(namespace) && fileName.endsWith(".txt")) { 
```

接下来，我们查看这些条目是否符合我们的标准，如果符合，则将文件内容读取到 System.out。

```
 try (Reader reader = new InputStreamReader(zipFile.getInputStream(entry))) {
                    StringBuilder builder = new StringBuilder();
                    int ch = 0;
                    while ((ch = reader.read()) != -1) {
                        builder.append((char) ch);

                    }
                    System.out.printf("zip fileName = %s\n\n####\n contents of file %s\n###\n", 
                    entryName, builder);
                } catch (Exception ex) {
                    ex.printStackTrace();//it is an example/proto :)
                }
            } 
```

您可以在此处查看完整示例：[普莱森顿不眠之夜](http://rick-hightower.blogspot.com/)。

# .net - 有没有办法可以使用 OperationContextScope 而不会弄乱持久性并在空闲时卸载？

> ID：10176513
> 
> 赞同：0
> 
> 时间：2012-04-16T14:54:35.510
> 
> 标签：.net, workflow-foundation-4, appfabric

我有一些工作流 4 服务，其 OperationContextScope 活动围绕 Receive/SendReplyToReceive 对进行，以访问 OperationContext.Current 对象。OperationContextScope 活动来自位于[http://wf.codeplex.com/releases/view/48114](http://wf.codeplex.com/releases/view/48114)的 WF 安全包 CTP 。我使用 Windows Server AppFabric 进行托管。

现在，我刚刚发现 OperationContextScope 建立了一个非持久区。由于 OperationContextScope 是通过包装以 Receive 开始并以 SendReplyToReceive 结束的序列来使用的，因此在工作流到达 Receive 时不会发生持久性。

这会导致一个问题，因为我已将 AppFabric 设置为在工作流空闲时立即持续存在，并且在它到达接收活动时变为空闲。坚持不发生。我还将 AppFabric 配置为在 60 秒后卸载空闲活动。因此，在 Receive 空闲 60 秒后，我的实例会从内存中擦除，但是没有先被持久化。

据我了解，该实例将从其最后一个持久点恢复并继续，直到它达到与以前相同的接收。再一次，它将无法持久化，在 60 秒后卸载，从最后一个持久化点恢复，等等。

对我来说，OperationContextScope 活动似乎存在设计缺陷，因为它阻止了实例的自动持久性和卸载。还是我以错误的方式使用活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:40:34.790

问题是 OperationContextScope 正在为您提供来自环境正在进行的 WCF 调用的数据。此调用本身不会像工作流那样神奇地进入睡眠和恢复状态。呼叫的另一端有人在等待响应，通常情况下，当工作流最终唤醒时，某种无法神奇地重新建立的网络连接。

因此，也许如果您可以描述更多关于发起呼叫的信息，我们可以对设计进行一些更改，以使这成为可能。例如，您可以将原始调用设为单向调用，并最终通过单独的端点回调调用者。

# php - CodeIgniter 分页 url 页码

> ID：10176518
> 
> 赞同：4
> 
> 时间：2012-04-16T14:54:53.230
> 
> 标签：php, codeigniter, pagination

据我所见，CodeIgniter 的分页计数错误，因为我的分页看起来像这样：

> **1** 2 3 >

很好，问题出在每个分页号 url 中，除了第一个：

分页中的第**2**号具有以下网址：

> [http://my-url.com/index.php/page/](http://my-url.com/index.php/page/) **1**

**3**号有以下网址：

> [http://my-url.com/index.php/page/](http://my-url.com/index.php/page/) **2**

因此，数字是 URL 每次减 1。

我该如何解决这个问题，所以 urls 中的页码将与分页中的页码相同？

我的分页配置：

```
$config['per_page']    = 5;
$config['base_url']    = site_url('page');
$config['uri_segment'] = 2;
$page = $this->uri->segment(2);
$total_rows_array = $this->records->get($config['per_page'], $page * $config['per_page']); // parameters: limit, offset.
$config['total_rows']  = count($total_rows_array); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T15:45:26.923

遇到了同样的问题，我添加了这个配置行：

```
$config['use_page_numbers'] = TRUE; 
```

它**就像一个魅力！**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T15:16:12.723

您是否在分页配置中使用页码？

CodeIgniters 分页的工作方式（默认情况下）是您设置要在代码中显示的记录数，CodeIgniter 计算出偏移量并将其附加到 URL。

第 1 页（如果您愿意的话）末尾没有数字的原因是因为没有偏移量，第 2 页的偏移量为 1，因为它偏移了那么多记录。哇，在我开始输入这个答案之前，这比我想象的要难解释得多！

：编辑：

此外，如果您在分页配置中使用页码，我想代码点火器正在获取 per_page 数量并将其乘以页码以获得记录的实际偏移量。

第 2 页的实际偏移量实际上是 per_page (15) * page_number (1) = 15。

# android - 用 JAR 库替换 Android 库项目？

> ID：10176519
> 
> 赞同：1
> 
> 时间：2012-04-16T14:54:55.717
> 
> 标签：android, jar, library-project

在我的项目中，有很多图书馆项目（10多个）。建造需要很长时间。所以我想用 JAR 库替换其中的一些库项目。

根据这个问题：[How to Convert an Android Library Project to an External JAR?](https://stackoverflow.com/questions/7973822/how-to-convert-an-android-library-project-to-an-external-jar)

作为 CommonsWare 的回答（[https://stackoverflow.com/a/7973950/190309](https://stackoverflow.com/a/7973950/190309)）

> 如果您的库是纯 Java 代码，没有资源，您可以使用 .class 文件创建 JAR，就像使用常规 Java 一样。

但是当使用来自 Jake Wharton 的NineOldAndroids 库（[https://github.com/JakeWharton/NineOldAndroids ）时，](https://github.com/JakeWharton/NineOldAndroids)

> 该库以 .jar 文件的形式呈现，您可以将其包含在应用程序的 libs/ 文件夹中。

这意味着虽然 NineOldAndroids 中有很多资源，但我可以将其用作 JAR 库。

使用 ADT 17，对于每个库项目，在 lib_project/bin/lib_project.jar 中都有一个 JAR 库，它会在每次构建库项目时自动生成。

我可以使用这个 JAR 作为库项目的替代品吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:57:59.957

> 这意味着虽然 NineOldAndroids 中有很多资源

NineOldAndroids 中的资源恰好为零。您可以通过[查看项目](https://github.com/JakeWharton/NineOldAndroids/tree/master/library)并看到没有`res/`目录来判断这一点。

> 使用 ADT 17，对于每个库项目，在 lib_project/bin/lib_project.jar 中都有一个 JAR 库，它会在每次构建库项目时自动生成。
> 
> 我可以使用这个 JAR 作为库项目的替代品吗？

不是这个时候。该 JAR 仍然依赖于库项目本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:08:54.053

我已经在[how-to-consume-reusable-gui-element-widget-with-resources-in-android](https://stackoverflow.com/questions/9721860/how-to-consume-reusable-gui-element-widget-with-resources-in-android)中尝试并记录了这个问题，但我没有成功使用 adt-17。但也许我做错了什么。

CommonsWare-s 回答我的问题说

```
 > Eventually (which now appears like it will be the R18 version of tools or later), the 
 > tools should support packaging reusable components in a JAR, with resources, in 
 > such a manner that you can add them to a host project and the resources will 
 > be blended in automatically. Right now, that's not an option. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:58:39.087

如果查看为库项目生成的 jar，您会发现其中没有资源。它仅用于 Java 类。

# r - 函数有效（boot.stepAIC）但在另一个函数中引发错误 - 环境问题？

> ID：10176524
> 
> 赞同：7
> 
> 时间：2012-04-16T14:55:12.603
> 
> 标签：r, statistics-bootstrap

我今天在我的 R 代码中意识到了一个奇怪的行为。我尝试了一个包 {boot.StepAIC}，其中包含一个引导函数，用于使用 AIC 逐步回归的结果。但是我不认为统计背景是问题所在（我希望如此）。
我可以在 R 的顶层使用该函数。这是我的示例代码。

```
require(MASS)
require(boot.StepAIC)

n<-100
x<-rnorm(n); y<-rnorm(n,sd=2); z<-rnorm(n,sd=3); res<-x+y+z+rnorm(n,sd=0.1)
dat.test<-as.data.frame(cbind(x,y,z,res))
form.1<-as.formula(res~x+y+z)
boot.stepAIC(lm(form.1, dat.test),dat.test) # should be OK - works at me 
```

但是，我想将其包装在自己的函数中。我将数据和公式传递给该函数。但是我在 boot.stepAIC() 中收到错误消息：

> 模型拟合在 100 个引导样本中失败 strsplit(nam.vars, ":") 中的错误：非字符参数

```
# custom function
fun.boot.lm.stepAIC<-function(dat,form) {
  if(!inherits(form, "formula")) stop("No formula given")
  fit.lm<-lm(formula=form,data=dat)
  return(boot.stepAIC(object=fit.lm,data=dat))
 }
fun.boot.lm.stepAIC(dat=dat.test,form=form.1)
# results in an error 
```

那么错误在哪里呢？我想这一定与当地和全球环境有关，不是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T21:03:46.390

[在使用粘贴公式创建的 lme 拟合上](https://stackoverflow.com/q/7666807)使用`do.call`as in anova 测试失败提供了答案。

`boot.stepAIC``form`在函数内运行时无权访问；可以像这样在全球环境中重新创建；我们看到它`lm`被`form.1`用作公式，删除它会`boot.stepAIC`失败。

```
> form.1<-as.formula(res~x+y+z)
> mm <- lm(form.1, dat.test)
> mm$call
lm(formula = form.1, data = dat.test)
> rm(form.1)
> boot.stepAIC(mm,dat.test)
# same error as OP 
```

使用`do.call`确实有效。我也在这里使用`as.name`；否则，`mm`对象会携带整个数据集，而不仅仅是它的名称。

```
> form.1<-as.formula(res~x+y+z)
> mm <- do.call("lm", list(form.1, data=as.name("dat.test")))
> mm$call
lm(formula = res ~ x + y + z, data = dat.test)
> rm(form.1)
> boot.stepAIC(mm,dat.test) 
```

要将其应用于原始问题，我会这样做：

```
fun.boot.lm.stepAIC<-function(dat,form) {
  if(!inherits(form, "formula")) stop("No formula given")
  mm <- do.call("lm", list(form, data=as.name(dat)))
  do.call("boot.stepAIC", list(mm,data=as.name(dat)))
}    
form.1<-as.formula(res~x+y+z)
fun.boot.lm.stepAIC(dat="dat.test",form=form1) 
```

这也有效，但整个数据集都包含在最终输出对象中，最终输出到控制台也是如此。

```
fun.boot.lm.stepAIC<-function(dat,form) {
  if(!inherits(form, "formula")) stop("No formula given")
  mm <- do.call("lm", list(form, data=dat))
  boot.stepAIC(mm,data=dat)
}    
form.1<-as.formula(res~x+y+z)
fun.boot.lm.stepAIC(dat=dat.test,form=form.1) 
```

# computer-vision - Matlab中的SIFT关键点检测

> ID：10176525
> 
> 赞同：0
> 
> 时间：2012-04-16T14:55:13.160
> 
> 标签：computer-vision, sift

我目前正在使用 Matlab 进行 SIFT。我已经实现了 Scale-Space 和 DoG。目前致力于关键点本地化。我能够提取最大值和最小值。我应该如何从这里开始？除此之外，有人有兴趣验证我的编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T21:52:43.757

[http://www.ipol.im/pub/pre/82/preprint.pdf](http://www.ipol.im/pub/pre/82/preprint.pdf)。本文对SIFT进行了详细的分析。这应该澄清大多数基于实现的查询

# c# - ArgumentNullException 未处理

> ID：10176528
> 
> 赞同：1
> 
> 时间：2012-04-16T14:55:25.507
> 
> 标签：c#, windows-phone-7, dropbox-api

我是 C# 和 Windows Phone 7 开发的新手，在尝试使用[Dropnet](http://dkdevelopment.net/what-im-doing/dropnet/) api 时出现错误：

```
using DropNet;

namespace Hello
{

public partial class App : Application
{
    public PhoneApplicationFrame RootFrame { get; private set; }

    public static DropNetClient DropNetClient { get; set; }

    public App()
    {

        InitializeComponent();

        InitializePhoneApplication();

        DropNetClient = new DropNetClient("api key", "secret");
//I've correct app key and secret inserted here

        DropNetClient.GetTokenAsync((userLogin) =>
        {
            //Dont really need to do anything with userLogin, 
//DropNet takes care of it for now
        },
    (error) =>
    {
        //Handle error
    });

        var url = DropNetClient.BuildAuthorizeUrl();
//getting error here

    }
} 
```

我得到的错误是

`ArgumentNullException was unhandled
Value cannot be null
Parameter name: userLogin`

根据[http://dkdevelopment.net/what-im-doing/dropnet/](http://dkdevelopment.net/what-im-doing/dropnet/)代码应该可以工作。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:30:35.987

从您提供的链接中引用：

```
_client = new DropNetClient("API KEY", "API SECRET", "USER TOKEN", "USER SECRET");
// OR
_client = new DropNetClient("API KEY", "API SECRET");
_client.UserLogin = new UserLogin { Token = "USER TOKEN", Secret = "USER SECRET" }; 
```

您缺少 UserLogin 初始化。

# mysql - 没有 1 个条件的结果数

> ID：10176530
> 
> 赞同：-2
> 
> 时间：2012-04-16T14:55:27.050
> 
> 标签：mysql, sql, database

有复杂的 MySql SELECT 查询：

```
SELECT id, login, date...
FROM tab1
  LEFT JOIN tab2
  LEFT JOIN tab3
  LEFT JOIN tab4
  ...
WHERE
 condition1 = value
 condition2 = value
 ...
ORDER ...
LIMIT ... 
```

**我需要从相同的选择中获取结果的数量，但没有条件 1 和限制。什么是最好的解决方案？有比只进行 2 SELECT 查询更好的解决方案吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:18:46.540

如果您需要`COUNT`执行另一个查询所需的行数，则不能一次返回聚合结果和实际行。

在您的情况下，您也在更改`WHERE`子句，因此也无法计算客户端的行数。

如果您担心性能，您需要显示您正在使用的实际查询，以便任何人都能够提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:58:02.997

将 condition1 作为参数传入并使用布尔逻辑来包含或排除它：

```
...
WHERE
condition1 = value OR condition1 IS NULL 
```

如果您不想使用 condition1，请将其设置为 null 或传入 null 参数。这确保了 SELECT 不关心第一个条件。然后它评估为：

```
...
WHERE
FALSE OR TRUE 
```

布尔逻辑状态，当一个值为真时，结果为真。如果您需要 condition1 传递一个实际值，结果变为

```
...
WHERE
TRUE OR FALSE 
```

这也评估为 TRUE 并确保满足您的条件，因为您已经过滤了值。

# c# - c# 多线程方法名期望

> ID：10176531
> 
> 赞同：2
> 
> 时间：2012-04-16T14:55:31.427
> 
> 标签：c#, multithreading, methods

我正在尝试创建一个循环，为列表中的每个程序创建一个线程，但是在下面的代码中传递边界时出现“预期方法名称”错误；

```
for (i = 0; i <= programs.Count; i++)
{
    checkProcess check = new checkProcess();
    // check.isRunning();

    string filename = programs[i].Filename;
    string filepath = programs[i].Filepath;

    mWorkerThread = new Thread(new ThreadStart(check.isRunning(filename, filepath)));

    mWorkerThread.Start();
} 
```

我读了一些关于代表的文章，但似乎无法让他们在我的问题的背景下工作。对于我应该前进的方向，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T14:59:09.780

线程目标应该是可执行的，而不是您的方法的结果。

```
mWorkerThread = new Thread(new ThreadStart(check.isRunning(filename, filepath))); 
```

在上述情况下，您尝试创建一个*返回值为*的`ThreadStart`新实例。你想要的是像*`check.IsRunning(...)`*

 *```
mWorkerThread = new Thread( () => check.isRunning(filename, filepath) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:11:54.597

在您的语句中`mWorkerThread = new Thread(new ThreadStart(check.isRunning(filename, filepath)));` **check.isRunning**是在线程开始时调用的方法名称。

```
Thread t = new Thread(new ThreadStart(ThreadMethod));
t.Start("My Parameter");

// method that will be called
    private void ThreadMethod(object parameter)
    {
        // parameter equals to "My Parameter"
    } 
```

另一个期望是匿名委托方法，使您的方法内联..使用 lambda 表达式：

```
 Thread t = new Thread(new ThreadStart(()=>ThreadMethod(parmaValue) ));
    t.Start("My Parameter"); 
```

参考： [带参数的 ThreadStart](https://stackoverflow.com/questions/1195896/c-sharp-threadstart-with-parameters)*

# jquery - 向 Drupal AJAX 按钮添加行为

> ID：10176532
> 
> 赞同：2
> 
> 时间：2012-04-16T14:55:47.840
> 
> 标签：jquery, ajax, drupal

当用户单击 Drupal AJAX 按钮时，我想添加一个操作。

我尝试了这段代码但没有成功：

```
Drupal.behaviors.myBehavior = {
    attach: function (context, settings) {
        jQuery('#edit-submit').bind('click', function() {
            alert('OK');
        });
    }
}; 
```

单击按钮时未显示警报（但 AJAX 操作已完成）。该按钮如下所示：

```
<input type="submit" id="edit-submit" name="op" value="Submit" class="form-submit ajax-processed"> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:15:38.863

为了解决我的问题，我不得不使用 mousedown 事件而不是 click 事件，并在 Drupal 的任何 javascript 代码之后打印 javascript（因为它从 AJAX 元素中分离了任何行为）。

# php - FTP到子文件夹

> ID：10176537
> 
> 赞同：2
> 
> 时间：2012-04-16T14:56:17.377
> 
> 标签：php, ftp, cron

是否可以将文件上传到 FTP 服务器上的子文件夹中？

我每天向 FTP 服务器发送一个文件，该文件安排在运行 php 文件的 cron 作业上。一切正常，但现在我被要求将目标更改为子文件夹。

将 *$server_name = 'ftp.website.com'* 更改为 *$server_name = 'ftp.website.com/data'* 似乎不起作用？

我可以看到该文件夹​​存在于 filezilla 中，并且它具有所有读/写权限。

如果有人可以建议它是否是许可问题或是否有可能，我将不胜感激？

提前致谢。

代码...

```
//FTP bit...

$server_name        = 'ftp.website.com';
$server_username    = 'xxxx';
$server_password    = 'xxxx';
$conn_id = ftp_connect($server_name);
$login_result = ftp_login($conn_id, $server_username, $server_password);
ftp_pasv($conn_id, true);
ftp_put($conn_id, $zip_filename, $output_dir . $zip_filename, FTP_BINARY); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T15:00:37.913

好像你需要使用[`ftp_chdir()`](http://www.php.net/manual/en/function.ftp-chdir.php).

正常连接，然后使用`ftp_chdir()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:04:23.800

我假设您正在使用 PHP 的 ftp 功能。我看到两个选项：

1) 使用`ftp_put`并指定 ftp 服务器上的绝对路径。[http://php.net/manual/de/function.ftp-put.php](http://php.net/manual/de/function.ftp-put.php)

[2) 在上传文件之前，使用http://php.net/manual/de/function.ftp-chdir.php](http://php.net/manual/de/function.ftp-chdir.php)更改 ftp 服务器上的工作目录`ftp_chdir`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:01:10.703

如果您使用`ftp_put`，您只需指定服务器上的绝对目标路径

[http://php.net/manual/en/function.ftp-put.php](http://php.net/manual/en/function.ftp-put.php)

# sql - 如何将特定行保留为查询的第一个结果（T-SQL）？

> ID：10176538
> 
> 赞同：10
> 
> 时间：2012-04-16T14:56:23.470
> 
> 标签：sql, tsql, reportbuilder

我正在编写一个 SQL 查询来获取 Report Builder 3.0 中报表的参数列表。我需要在结果中添加一个值为“All”的额外行，如下所示：

```
SELECT 'All'
UNION
SELECT DISTINCT    Manager
FROM               IS_Projects 
```

这很好用，但是查询将按字母顺序排序的行返回给我，我实际上希望“全部”始终出现在顶部（即作为第一行返回）。其余结果可以按字母顺序排序。

我已经看到有关向表中添加排序顺序列的建议，但我对 SQL 很陌生，不知道如何执行此操作。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-16T15:01:54.300

单程;

```
SELECT Name FROM (
    SELECT 'All'       as Name
    UNION 
    SELECT DISTINCT    Manager
    FROM               IS_Projects
) T
ORDER BY CASE Name WHEN 'All' THEN 0 ELSE 1 END, Name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T14:59:59.567

这是一种方式：

```
SELECT Manager
FROM (SELECT 'All' Manager, 1 Order
      UNION ALL
      SELECT DISTINCT Manager, 2 Order
      FROM IS_Projects) A
ORDER BY Order, Manager 
```

# objective-c - 如何在 iOS 中关闭 TextDidChange 事件？

> ID：10176540
> 
> 赞同：0
> 
> 时间：2012-04-16T14:56:28.987
> 
> 标签：objective-c, ios

现在我正在 iOS 中创建字典应用程序。在我的应用程序中，我使用 UISearchBar 的 textDidChange 事件和 UISearchDisplayController 进行自动完成搜索。

所以当我在 SearchBar 中输入一个词时，它会自动在数据库中搜索。但是我在首选项中有一个功能可以关闭自动完成搜索。在我关闭首选项中的自动完成功能后，它仍然是使用 TextDidChange 事件自动完成搜索。

这次我不想要 TextDidChange 事件。我想在搜索栏中输入完整的单词后进行搜索，然后从键盘单击搜索按钮。

那么如何从 UISearchBar 关闭 TextDidChange 事件呢？如果你还好，请告诉我。

此致，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:15:19.273

在您的情况下，您不想抑制 textDidChange 事件。相反，您希望 UISearchDisplayDelegate 的`shouldReloadTableForSearchString:`方法返回`NO`，除非单击了“搜索”按钮。

您可以创建一个布尔 ivar 来跟踪这一点。调用时将 ivar 设置为 NO，`textDidChange`调用时将其设置为 YES `searchBarSearchButtonClicked:`。然后在你的`shouldReloadTableForSearchString:`你可以做测试。

**编辑**：通过扩展代码示例进行澄清。（在本例中，我假设您设置了一个名为 isSearchButtonClicked 的 ivar）。

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    isSearchButtonClicked = NO;
}

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    isSearchButtonClicked = YES;
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    // returns YES if search button was clicked, otherwise return NO
    return isSearchButtonClicked;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:00:50.937

您始终可以创建一个 bool 变量并检查是否启用了自动完成功能...根据您是否可以搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T17:07:40.110

```
 - (void)filterContentForSearchText:(NSString*)searchText 
                         scope:(NSString*)scope
       {
            //create a bool variable and check is Auto Complete searching is Yes or No

            if YES then pass  searchText 

            if no then Don't pass any thing unit user press the search button 

            after he press search button pass  searchText 
       } 
```

# javascript - 带有下拉菜单的引导药丸不起作用

> ID：10176543
> 
> 赞同：2
> 
> 时间：2012-04-16T14:56:44.693
> 
> 标签：javascript, twitter-bootstrap

我正在尝试使用 Bootstrap 中的下拉 UI 元素设置 Pill，当我单击插入符号时它没有显示下拉菜单。我查看了 Bootstrap 文档及其来源）并没有找到我所缺少的内容。

我是否需要编写自定义 JS 才能显示出来？文档看起来我没有，它应该可以工作。

这是我包含的JS....

```
 <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
  <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
  <script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
  <script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
  <script src="/assets/bootstrap-modal.js?body=1" type="text/javascript"></script>
  <script src="/assets/bootstrap-tab.js?body=1" type="text/javascript"></script>
  <script src="/assets/bootstrap-transition.js?body=1" type="text/javascript"></script>
  <script src="/assets/bootstrap-carousel.js?body=1" type="text/javascript"></script> 
```

这是HTML

```
<ul class="nav nav-pills">
    <li class="dropdown all-camera-dropdown">
           <a class="dropdown-toggle" data-toggle="dropdown" href="#">
            All Cameras
               <b class="caret"></b>
           </a>
    <ul class="dropdown-menu">
            <li data-filter-camera-type="all"><a data-toggle="tab" href="#">All Cameras</a></li>
            <li data-filter-camera-type="Alpha"><a data-toggle="tab" href="#">Alpha</a></li>
            <li data-filter-camera-type="Zed"><a data-toggle="tab" href="#">Zed</a></li>
            <li data-filter-camera-type="Bravo"><a data-toggle="tab" href="#">Bravo</a></li>

     </ul>
</li></ul> 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:04:45.643

它不起作用，因为您多次加载相同的插件，从您的包含中删除以下脚本，它应该可以正常工作：

**消除**

```
 <script src="/assets/bootstrap-modal.js?body=1" type="text/javascript"></script>
  <script src="/assets/bootstrap-tab.js?body=1" type="text/javascript"></script>
  <script src="/assets/bootstrap-transition.js?body=1" type="text/javascript"></script>
  <script src="/assets/bootstrap-carousel.js?body=1" type="text/javascript"></script> 
```

脚本文件与所有插件一起打包，`bootstrap.js`因此您无需再次加载单个脚本文件。

**保持**

```
 <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
  <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
  <script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
  <script src="/assets/bootstrap.js?body=1" type="text/javascript"></script> 
```

# pdf - 在 Mathematica 中将函数内插为 PDF

> ID：10176544
> 
> 赞同：5
> 
> 时间：2012-04-16T14:56:47.513
> 
> 标签：pdf, wolfram-mathematica, interpolation

我想将函数的插值用作 PDF，并能够使用平均值、概率、CDF 等工具。我做了以下事情：

```
 f = Interpolation[data];
 dist = ProbabilityDistribution[f[x], {x,0,1000}]; 
```

例如，当我尝试：

```
Mean[dist] //N 
```

它只是返回输入。其他功能也一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:12:39.647

您可以使用离散分布：

```
data = {1, 2, 1, 3, 4};
data = data/Total@data;
f = Interpolation[data];
dist = ProbabilityDistribution[f[x], {x, 1, 5, 1}];
Mean[dist] // N 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:24:46.870

您还可以尝试使用 SmoothKernelDistribution。

```
d = SmoothKernelDistribution[data];

cdf=CDF[d]

Plot[cdf[x], {x, -1, 1}]

Quantile[d, 0.95]

Moment[d, 2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T20:16:00.173

你可以使用`EmpiricalDistribution`：

```
f = EmpiricalDistribution[data]

Mean[f]
(* 1/5 *)

Expectation[x^3, x \[Distributed] f]
(* 101/6655 *)

Moment[f, 2]
(* 31/605 *) 
```

# java - 在文本冒险中实现退出

> ID：10176545
> 
> 赞同：0
> 
> 时间：2012-04-16T14:56:48.253
> 
> 标签：java, oop, text, adventure

我正在为 Java 编程类编写文本冒险游戏。我正在使用`abstract`每个房间将继承和配置的父房间类设置房间。

对于出口，房间只会调用一个`.addExit()`方法并传递一个出口对象。游戏应该只有每个房间的一个实例。退出对象应该有一个 target 字段，指向在构造函数中初始化的游戏房间之一。

我的问题是我不知道如何将退出构造函数传递给预先存在的房间引用而不是新的房间对象。在我看来，有两种可能的方式：

1.  直接向出口构造函数传递对房间实例的引用。
2.  有一个静态类来跟踪所有房间实例，并具有从字符串名称或类等返回实例的方法。
    然后将退出对象的构造函数传递给标识目标房间的方法，例如唯一的字符串名称，该对象然后构造函数用于调用返回房间实例的静态类方法之一。

我不确定哪个是最好的选择，如何实现任何一个选项，或者是否有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:05:42.540

我不认为为每个房间单独上课是一个好主意。使用单个类可能会更好`Room`，其中每个实例代表一个单独的房间。（我知道 MUD 是这样编码的，但即使在那里你也有“虚拟”）

但除此之外，问题是：是`Exit`房间的财产还是可以而且应该单独管理的东西？

答案取决于你想对这些`Exit`s 做什么。例如，如果您想强制执行双向出口（也就是说，如果房间 A 到 B 有一个出口，那么从 B 到 A 应该有一个出口），一个单独的出口管理类可能是合适的。但是，如果您只需要能够列出一个房间中的所有出口，然后通过其中一个移动到另一个，它们可以是 的属性`Room`。

如果事先不知道，就从简单的开始（每个房间单独添加出口），如果不起作用，您可以随时切换到更复杂的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:04:26.857

你把这个复杂化了

这是一个如何执行此操作的示例

```
 public abstract static class Room {
        List exits = new ArrayList();
        public void addExit(Room r) {
           exits.add(r);
        }
    } 
```

# android - Android系统在启动Media Intent时停止应用程序

> ID：10176550
> 
> 赞同：4
> 
> 时间：2012-04-16T14:57:02.060
> 
> 标签：android

我正在发起一个媒体意图拍照。在用户拍照并返回之前的活动后，整个应用程序已重新启动。

由于这不会一直发生，我认为我的应用程序会进入后台，当设备内存不足时，android 会杀死它。

有什么方法可以防止我的应用程序进入后台？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-22T08:05:35.170

这是 Android 中的正常行为，如果系统内存不足，所有当前在屏幕上不可见的活动（之后`onStop`）都可以在不通知（即）的情况下被杀死。`onDestory`

这通常发生在我们的一款测试设备上的应用程序上，无论我们的应用程序如何，它都会出现内存问题。

**当您通过意图打开相机时，您通常**可以重新创建此行为，然后旋转设备（纵向到横向），这也会杀死并重新创建您的应用程序。

为了解决这个问题，您需要扩展`onSaveInstanceState`并使用`savedInstanceState`您的参数`onCreate`从杀死的实例传递给新实例一些重要信息（例如“我们正在从相机获取图片”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:18:44.057

我能想到两种可能...

1.  它不是杀死活动，而是意图启动一个新活动。您可以通过在 manifest.xml 中放置一个标签作为活动标签中的属性来阻止这种情况，如下所示：

    <activity android:name=".nameOfActivity"
    android:launchMode="singleTop" />

2.  确保媒体意图在处理照片的活动下，而不是主/启动器活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T21:59:42.597

IMO 两种选择：

1.  实施 onSaveInstanceState/onRestoreInstanceState 或
2.  让您的活动成为一项服务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T14:07:41.047

我遇到了这个问题，并在研发后得到了解决方案。设置 Target Android 4.0 然后在活动的 AndroidManifest.xml 中添加这一行：

android:configChanges="screenLayout|uiMode|orientation|screenSize|smallestScreenSize"

这个对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T12:27:15.607

当您启动媒体意图时，请使用以下方法而不是 startActivity(intent)

```
startActivityForResult(intent, REQUEST_CODE); //private int REQUEST_CODE = 232 
```

启动的活动完成后，您的调用活动将开始。您需要使用以下功能处理此问题

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
     if (requestCode == REQUEST_CODE && resultCode == RESULT_OK) {
      //Perform your task       
      }
} 
```

活动开始需要覆盖以下方法

```
@Override
    public void onBackPressed() {
        Intent intent = new Intent();
        setResult(REQUEST_CODE, intent);
        super.onBackPressed();
    } 
```

startActivityForResult() 是为特定任务启动活动并获得所需结果的一种特殊方式。被调用的活动将发送回数据。

您可以使用 putExtra() 和 getExtra 方法在两个活动之间发送和接收数据。

这有望解决您的问题。如有疑问评论。如果可能的话，分享你的代码，这样可以更清楚。

# php - 以编程方式获取 Exchange 邮箱的名称以连接到它

> ID：10176551
> 
> 赞同：0
> 
> 时间：2012-04-16T14:57:03.357
> 
> 标签：php, exchange-server

我正在编写一个 PHP 脚本来连接到 Exchange 服务器并从邮箱中读取消息。我把它连接到我的收件箱就好了。我现在要做的是让 PHP 连接到我可以访问的另一个邮箱（我们称之为“测试邮箱”）。

我试过这段代码：

```
imap_open( '{mail.domain.com:143}Test Mailbox', 'myusername', 'mypassword' ); 
```

但它说邮箱不存在。如何获取邮箱列表或获取邮箱路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:59:32.653

您应该真正考虑使用 Exchange Web 服务 (EWS) 执行此操作。这将通过 SOAP 与 IMAP 为您提供所需的数据，而 IMAP 将无法产生很多东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:29:37.797

您可以使用 获取邮箱列表[`imap_getmailboxes()`](http://php.net/manual/en/function.imap-getmailboxes.php)。至于选择邮箱，试试不带前导`/`。

来自 php.net：

```
$mbox = imap_open("{mail.domain.com:143}", "username", "password", OP_HALFOPEN)
  or die("can't connect: " . imap_last_error());

$list = imap_getmailboxes($mbox, "{mail.domain.com:143}", "*");
if (is_array($list)) {
    foreach ($list as $key => $val) {
        echo "($key) ";
        echo imap_utf7_decode($val->name) . ",";
        echo "'" . $val->delimiter . "',";
        echo $val->attributes . "<br />\n";
    }
} else {
    echo "imap_getmailboxes failed: " . imap_last_error() . "\n";
}

imap_close($mbox); 
```

# sql-server-2005 - Sql Server 2005 - 每次运行每个组件的 SSIS 统计信息

> ID：10176555
> 
> 赞同：1
> 
> 时间：2012-04-16T14:57:20.033
> 
> 标签：sql-server-2005, ssis, dmv

来自不同的 ETL 工具，我试图弄清楚如何在每个组件在 SSIS 中运行时获取（生产）统计信息。

例如，如果平面文件正在从具有高偏差的外部源读取（行/秒在不同时间发生巨大变化），我想知道该信息。

如果 SSIS 有一个显着的“慢点”（缓冲区填充/数据流受到影响），我也想知道该信息。

例如，使用来自 DMV 的 sproc，CPU 时间和 readIO/writeIO 也将是理想的（并且对于通过以一致/可测量的方法从 sproc 迁移到 SSIS 来显示改进的人们很有用）。

我问这个问题的原因是我在调试期间看到行通过 BIDS，但它可能无法反映生产中每个组件的实际行/秒。

一个人将如何为生产环境启用/内省/获取这些类型的统计信息（即使它受到的打击很小，但这些数字很重要）。

谢谢！

-达伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:13:38.197

不确定它是否有帮助，但也许您可以尝试在您的包上配置日志记录并选择“SQL Server Profiler 的 SSIS 日志提供程序”

它显示了数据源处理开始和结束之间的一些信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:52:17.717

这在 SSIS 2005 中很难做到。当尝试从复杂 SSIS 包中的事件处理程序执行任务级日志记录时，我已经看到运行时引擎“停止”。一个想法：仅通过在源适配器之后和输出行的每个数据流路径上添加行计数转换来检测数据流。然后向每个数据流任务的 OnPreExecute 事件处理程序添加一个 Execute SQL 任务以记录执行的开始，并将另一个 Execute SQL 任务添加到相应的 OnPostExecute 事件处理程序。在 onPostExecute 逻辑中，存储数据流任务执行的行数和结束时间。我相信这将提供足够的指标来计算数据流管道的吞吐量。

希望这会有所帮助，安迪

# c# - 在 C# WPF 表单中运行 javascript

> ID：10176556
> 
> 赞同：1
> 
> 时间：2012-04-16T14:57:35.707
> 
> 标签：c#, .net

**请注意，这不适用于基于 Web 的应用程序，它是基于 Windows 的。*

我正在构建一个应用程序，我需要用户提交将由应用程序运行的简单 javascript。

脚本将调用作为 c# 构建的一部分的函数。

**一个例子：**

*C#代码：*

```
public void helloWorld()
{
    Debug.WriteLine("hello world");
} 
```

*用户提交的 Javascript：*

```
helloWorld(); 
```

JavaScript 将在运行时由应用程序解析，然后在我的 C# 代码中调用所需的函数。

**为什么？..**

我的应用程序将由几乎没有编程经验的人使用，他们输入非常简单的 JavaScript，应用程序将尝试在用户计算机上自动执行一些任务。所以我使用 JavaScript 的原因是因为它很简单，对于没有经验的人来说很容易学习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:04:43.660

听起来您需要为您的应用程序使用 JavaScript 解析器。老实说，考虑到脚本的上下文和您的代码不同，我认为您正在做的事情是不可能的。然而，这个项目似乎正在做一些可能让你到正确的地方的事情：

[http://javascriptdotnet.codeplex.com/](http://javascriptdotnet.codeplex.com/)

就个人而言，我认为制作某种 XML 格式会很有用（比如 UrlRewriter.net 如何使重写 URL 变得容易）：

```
 <xml>
 <commands>
     <!-- Expose a Set of Condition Objects to Select From -->
     <if condition="YourApplication.Conditions.RightClickOnDesktop">
         <print text="HelloWorld" />
     </if>
 </commands> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T16:17:45.933

这是一个运行 javascript 代码的示例，该代码反过来调用 ac# 方法

```
[System.Runtime.InteropServices.ComVisible(true)]
public class CSharpClass
{
    public void MsgBox(string s)
    {
        MessageBox.Show(s);
    }
} 
```

-

```
Type scriptType = Type.GetTypeFromCLSID(Guid.Parse("0E59F1D5-1FBE-11D0-8FF2-00A0D10038BC"));

dynamic obj = Activator.CreateInstance(scriptType, false);
obj.Language = "Javascript";
obj.AddObject("mywindow", new CSharpClass(), true);
var result = obj.Eval(
    @"
        function test(){
            mywindow.MsgBox('hello'); 
        }
        test();
    "
    ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T16:26:54.903

为什么你“需要用户提交简单的 javascripts”？您的应用程序是什么，用户需要它做什么？为什么你决定使用脚本语言来做这件事？我并不是说这是错误的答案，而是你没有证明这个结论是正确的。

如果您的应用程序将被“几乎没有编程经验的人”使用，我不建议实施脚本语言。非程序员很难理解源代码和变量等基本概念。

我建议首先调查用户脚本的宏录制。对于 .NET，有[UI 自动化](http://msdn.microsoft.com/en-us/library/ms726294.aspx)和[White](http://white.codeplex.com/)自动化框架。

# ruby-on-rails - 使用 activeadmin 嵌入表单（有很多）

> ID：10176560
> 
> 赞同：2
> 
> 时间：2012-04-16T14:57:48.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin, formtastic

我正在使用 rails 和 activeadmin 制作博客。我将标签与每个帖子相关联。我想知道如何配置 activeadmin 以在帖子上添加标签。

我希望能够从新的 Post 表单创建标签。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T17:28:38.753

如果`Posts`has_many`Tags`那么这样的事情可以工作。

```
form do |f|
  f.inputs do
    f.input :title
    f.input :content
    f.has_many :tags do |fu|
      fu.input :name
      fu.input :_destroy, :as=>:boolean, :required => false, :label => 'Delete Tag' unless fu.object.new_record?
    end
  end
end 
```

ActiveAdmin 期望`Post`模型`accepts_nested_attributes_for :tags`

喜欢..

```
class Post
  #....
  accepts_nested_attributes_for :tags
end 
```

# php - 如何使用 php regex 替换字符串并输入新值

> ID：10176566
> 
> 赞同：1
> 
> 时间：2012-04-16T14:58:09.410
> 
> 标签：php, regex, string

我有以下字符串

> “在任何地方输入 Contarct 字段并用 {} 括起来。您可以使用字段的 id 或字段的字段代码，例如 {25} 或 {FIELD_CONTRACTTEXT}”

我想用数据库中的等效值替换`{25}`它`{FIELD_CONTRACTTEXT}`。说`25`是一个ID，所以我想输入ID为字段的名称`25`。

有很多替换花括号的示例，但没有解决方案可以替换这样的内容。请帮助我，我已经尝试了很多东西。

PS：请记住，出现`{}`是动态的，`25`不会是静态数字，`{}`字符串中可以有多个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:06:27.537

您可以使用 preg_match_all() 查找出现次数，使用此数组查找数据库中的值，然后使用 str_replace 替换之后的每个值。

首先，您需要获取所有事件：

```
preg_match_all('/{(.*?)}/', $string, $matches, PREG_PATTERN_ORDER); 
```

匹配数组将如下所示：

```
Array
(
    [0] => Array
        (
            [0] => {}
            [1] => {25}
            [2] => {FIELD_CONTRACTTEXT}
        )

    [1] => Array
        (
            [0] => 
            [1] => 25
            [2] => FIELD_CONTRACTTEXT
        )

) 
```

然后，您可以循环遍历数组以查找需要替换的各个元素。

您可以使用以下内容检查数据库，然后替换值：

```
mysql_connect("localhost", "root", "");
mysql_select_db("data");

$string = "Enter Contarct Fields wherever you want and enclose it with {}.You can use field's id or field's fieldcode for example {25} or {FIELD_CONTRACTTEXT}";

preg_match_all('/{(.*?)}/', $string, $matches, PREG_PATTERN_ORDER);

foreach($matches[1] as $match) {
    $sql = mysql_query("SELECT * FROM table WHERE `element`='".addslashes($match)."'");
    if(mysql_num_rows($sql)==1){
        $row = mysql_fetch_assoc($sql);
        str_replace($string, "{".$match."}", $row['value']);
    }
}

echo $string; //echos final output with replaced values 
```

# android - Android 图库 onItemClick 显示大图

> ID：10176575
> 
> 赞同：1
> 
> 时间：2012-04-16T14:58:33.060
> 
> 标签：android

我刚刚复制完画廊的 android 演练 (http://developer.android.com/resources/tutorials/views/hello-gallery.html)，想知道如何将缩略图照片缩放成onClickItem 方法中较大的一个。

```
 public void onItemClick(AdapterView parent, View v, int position, long id) {
            Toast.makeText(ProjectPreview.this, "" + position, Toast.LENGTH_SHORT).show();
        } 
```

目前它只显示 Toast 中描述的位置。有人可以指出我正确的方向或告诉我一个简单的方法吗？

提前致谢。

编辑：添加了这个方法并在 onItemClick 中调用它，发送它的位置。它有效。

```
 public void showLarger(int position){
        ImageView image = (ImageView) findViewById(R.id.iv1);
        image.setLayoutParams(new Gallery.LayoutParams(200, 100));
        image.setScaleType(ImageView.ScaleType.FIT_XY);
        image.setImageResource(mImageIds[position]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:50:30.190

使用具有包含图像视图的布局的对话框，并将其源案例设置为您拥有的位置和您想要的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:54:15.853

我会使用一个对话框。您可以创建一个新的活动并在其布局中有一个 ImageView，并将该活动伪装成一个对话框。请参阅此问题以了解如何执行所有操作：[Android Image Dialog/Popup](https://stackoverflow.com/questions/7693633/android-image-dialog-popup)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:27:46.107

如上所述，您可以使用 Dialog 来显示更大的图像，或者您可以触发一个启动常规 Activity 的意图（如果您按照上述说明进行操作，则必须将对话框主题添加到您的 Activity）。

您必须执行诸如调用 v.getItemID(position) 之类的操作并将其存储在字符串中，然后将其传递给您的下一个活动。

无论哪种方式，您都必须将一些数据传递给将托管 ImageView 的 Activty，然后使用该数据（路径、uri 等）来膨胀更大的 ImageView。如果您想使用 Dialog 路由，请不要忘记将主题添加到清单中。

# java - Eclipse 中的 Java 格式化程序 - 将 java.lang.Object 引用更改为 Object，根据需要添加 import 语句

> ID：10176577
> 
> 赞同：0
> 
> 时间：2012-04-16T14:58:37.110
> 
> 标签：java, eclipse, formatting, rad

我有很多想要清理的生成代码（来自 WSDL 的类）。`java.lang.Object`到处都有参考资料`the.very.same.namespace.as.TheGeneratedClass`。是否有一些自动方法可以将它们转换为类名`Object`，并在必要时导入该类？我正在使用 Rational Application Developer，所以为 Eclipse 或 RAD 提供某种保存操作会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:28:30.047

右键单击项目并从弹出菜单中选择 Source > Organize Imports。您还可以在项目属性中创建一个保存操作，该操作将从现在开始自动执行。

# eclipse - jacocoData 缺少 EclEmma 和 AbstractTransactionalJUnit4SpringContextTests

> ID：10176579
> 
> 赞同：1
> 
> 时间：2012-04-16T14:58:41.483
> 
> 标签：eclipse, spring, eclipse-plugin, emma

我一直在尝试使用 EclEmma 2.1.0.201202261248 来测量 DAO 的集成测试覆盖率。不幸的是，任何扩展 AbstractTransactionalJUnit4SpringContextTests 的测试（即任何实际使用部分 spring 框架的测试）都会引发以下异常：

07:35:11 错误 [main] (ASMLogger.java:72) - 抛出异常 < findByFilter > 异常消息无法解析属性：$jacocoData of: com.asentria.asm.persistence.krp.ProductData with params :: DataFilter{ SerialNum:66,KeyNum:1967,Index1:1,Index2:2,HasPendingValue:null,OrderByDesc:null,OrderByAsc:null,Class:class com.asentria.asm.filter.ProductDataFilter} org.hibernate.QueryException: 无法解析属性：$jacocoData 的：com.asentria.asm.persistence.krp.ProductData 在 org.hibernate.persister.entity.AbstractPropertyMapping.propertyException(AbstractPropertyMapping.java:81) 在 org.hibernate.persister.entity.AbstractPropertyMapping.toType(AbstractPropertyMapping .java:75) 在 org.hibernate.persister.entity.AbstractEntityPersister.getSubclassPropertyTableNumber(AbstractEntityPersister.java:1468) ...

我们有一个奇怪的持久性组合——1 个直接使用 Hibernate 的 spring 管理的上下文，以及一个不由 spring 管理但也使用 Hibernate 实现的 JPA 兼容的上下文。

我知道 EclEmma 正在注入 jacocoData 字段，但我不知道如何解决这个问题。

我将不胜感激任何建议，包括如何解决此问题的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:22:38.047

尝试排除首选项中的所有问题包

```
Java/Code Coverage/Excludes 
```

我可以通过添加到此设置的 com.arjuna.* 成功运行测试。

# sockets - POST 请求和 nginx

> ID：10176586
> 
> 赞同：0
> 
> 时间：2012-04-16T14:58:55.133
> 
> 标签：sockets, nginx, http-post, keep-alive

我正在尝试向`localhost:80`（nginx-server）发送很多后期请求。

我发送的标题是：

```
POST /LINK HTTP/1.1
User-Agent: User agent
Host: localhost
Accept: */*
Connection: Keep-Alive
Content-Type: application/octet-stream
Content-Length: 16

DATA 16 BYTES 
```

伪代码是：

```
TCPSocket sock('localhost', 80);
for(;;) {
   sock.sendPost();
}
sock.close(); 
```

但服务器**第**一次返回：

```
HTTP/1.1 200 OK
Server: nginx
Date: Mon, 16 Apr 2012 14:54:26 GMT
Content-Type: application/json
Content-Length: 92
Connection: close

ANSWER 92 BYTES 
```

因此，服务器不适用于循环中的所有其他后请求。

为什么不`Connection: Keep-Alive`工作，服务器返回`Connection: close`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:41:58.040

设置`keepalive_timeout`和`keepalive_requests`到[适当的值](http://wiki.nginx.org/HttpCoreModule#keepalive_requests)。

# liferay - Liferay 登录页面 JSP 名称

> ID：10176589
> 
> 赞同：-1
> 
> 时间：2012-04-16T14:59:01.250
> 
> 标签：liferay, liferay-6

一旦显示 Liferay 启动页面，就会有一个登录超链接，一旦我们单击该登录超链接，它将带我们进入显示实际登录页面的页面。

该 JSP 页面的名称是什么（带有电子邮件、密码和提交按钮的实际页面）？

我正在使用 Liferay 6.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:56:13.587

如果您正在考虑修改 Liferay 中已经存在的任何 JSP，请考虑使用钩子进行修改，这样您就不必重新启动 liferay 服务器，因为钩子是可热部署的并且易于管理。

要了解有关挂钩的更多信息，请点击此链接。[http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/hoo-4](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/hoo-4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:08:03.737

登录链接调用登录 portlet。但是您可以更改默认登录页面，添加到 portal-ext.properties `auth.login.url=mypageurl`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T09:13:34.187

如果您想在新登录页面中添加新字段，那么使用 Liferay 自定义字段将是您的最佳选择。您可以为用户定义自定义字段并使其可编辑，然后`login.jsp`使用此标签将其添加到文件中

```
<div class="exp-ctrl-holder">
    <liferay-ui:custom-attribute 
        className="<%=User.class.getName()%>"
        classPK="<%=0%>" 
        editable="<%=true%>" 
        label="<%=true%>"
        name="FieldName" />
</div> 
```

此编辑应使用钩子完成

或者

如果您想为登录操作添加额外的逻辑，那么使用 Liferay Extension 环境是最好的解决方案。

# android - Eclipse中的Android登录

> ID：10176590
> 
> 赞同：0
> 
> 时间：2012-04-16T14:59:05.490
> 
> 标签：android, logging, logcat

我已经尝试了很多东西，但我似乎无法掌握如何正确使用日志记录我目前想要记录一个变量，但似乎没有任何工作可以为新手提供一个愚蠢的版本请我只是想学习. 到目前为止，任何帮助将不胜感激这是我的代码。

```
public void loadLeagueInformation() {

    DateFormat df = DateFormat.getTimeInstance();
    df.setTimeZone(TimeZone.getTimeZone("gmt"));
    String gmtTime = df.format(new Date(0)); 

    Log.v(TAG, "TIME:" + gmtTime);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:17:02.503

格式为`Log.d(String tag, String msg)`. 一种常见的做事方式是使用包和/或类名`tag`。

对于我所有的 Android 课程，我执行以下（示例）...

```
package com.mycompany.myapp;
...

public class MyActivity extends Activity {
    protected final String TAG = this.getClass().getName();
    ...
} 
```

这样做意味着`TAG`将会`com.mycompany.myapp.MyActivity`。如果您对所有 Android 类执行此操作，则可以保证所有`TAG`字段都将启动`com.mycompany.myapp`，并且很容易为 logcat 创建一个过滤器来识别您的所有“标签”。

每当我需要记录一些事情时，我只需要做（示例）......

```
Log.d(TAG, "Hello World"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:01:44.520

通常从一个`Activity` `MyActivity`

```
Log.d("MyActivity", "String date " + gmTime); 
```

我不确定您是否已经`gmTime`按照自己的喜好进行了格式化。如果没有，您可以使用`SimpleDateFormat`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:01:56.807

在您的 LogCat 窗口中，下拉框中的设置是什么？是错误吗？如果是这样，那么它将只显示错误的日志，即`Log.e(TAG,"..")`相同的将适用于其他选项。由于您正在使用`Log.v(..)`，请将其设置为详细。

现在，从左侧面板添加一个过滤器，并在“By Log Tag”字段中输入您的标签。运行应用程序时选择它。

# jquery - 使用 jQuery 计算数据属性的值

> ID：10176593
> 
> 赞同：1
> 
> 时间：2012-04-16T14:59:12.410
> 
> 标签：jquery, count, custom-data-attribute

我有这样的清单。

```
<li data-pet="cat"></li>
<li data-pet="cat"></li>
<li data-pet="cat"></li>
<li data-pet="dog"></li> 
```

如果相同的值出现不止一次，使用 jQuery 如何获取数据属性的值以进行计数。

然后我想将一个跨度附加到具有该值的第一个列表元素。

结果应该是这样的。

```
<li data-pet="cat"><span class="first"></span></li>
<li data-pet="cat"></li>
<li data-pet="cat"></li>
<li data-pet="dog"></li> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:15:16.483

一个可能的实现

```
(function() {  
    var pets = {};
    $('li[data-pet]').each(function() {
        var li = $(this),
            pet = li.data('pet');

        if (!pets[pet]) {  
            pets[pet] = { firstnode: li, count : 1 }
        }
        else {
            pets[pet]['count'] = pets[pet]['count'] + 1;
        }
    });

    $.map(pets, function(obj) {     
        if (obj.count > 1) {
          obj.firstnode.append('<span class="first">'+ obj.count +'</span>');
        }
    });
}()); 
```

html

```
<li data-pet="cat">cat</li>
<li data-pet="cat">cat</li>
<li data-pet="cat">cat</li>
<li data-pet="dog">dog</li>
<li data-pet="elephant">elephant</li>
<li data-pet="elephant">elephant</li> 
```

小提琴示例：http: [//jsfiddle.net/HJ6gF/6/](http://jsfiddle.net/HJ6gF/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:02:15.240

一种方法是（你应该根据你的情况优化/整理它）：

```
var selector = "cat";
var selectorCount = 0;

$("li[data-pet="+selector+"]").each(function() {
    selectorCount++;
});

if(selectorCount > 1) {
    $("li[data-pet="+selector+"]").each(function() {
        $(this).html("<span class=\"first\"></span>");
        break;
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:02:18.017

```
var tarr = [];
$('li').each(function() {
   tarr.push($(this).attr('data-pet'))
});
var count = $.unique(tarr).length; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T15:09:49.610

```
<li data-pet="cat"/>
<li data-pet="cat"/>
<li data-pet="cat"/>
<li data-pet="dog"/>

<script type="text/javascript">

    var dataPets = [];

    $('li').each( function( index )
    {
        if ( $.inArray( $(this).attr( "data-pet" ) , dataPets ) )
        {
            $(this).append( "First" );
        }

        dataPets[index] = $(this).attr( "data-pet" );
    });

</script> 
```

# macos - 如何编译苹果的安全包？

> ID：10176595
> 
> 赞同：0
> 
> 时间：2012-04-16T14:59:20.440
> 
> 标签：macos, build, launchd

我正在使用 OS X 10.7.3 和 Xcode 4.3.2。[我从http://opensource.apple.com/tarballs/securityd/securityd-55111.tar.gz](http://opensource.apple.com/tarballs/securityd/securityd-55111.tar.gz)下载并尝试构建安全包。

但是，我收到大量与缺少头文件有关的构建错误。因此，我开始下载和编译它需要的包（如 libsecurityd、libsecurity_utilities、launchd 等）。

编译launchd时，我得到：

```
error: cannot read file /usr/local/include/xpc/events.defs

** BUILD FAILED **

The following build commands failed:
Mig /usr/local/include/xpc/domain.defs x86_64
Mig /usr/local/include/xpc/events.defs x86_64 
```

有没有人想出如何在 OS X 上编译 launchd 并最终安全？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:20:43.500

一位朋友能够在 OS X 10.4.3 (PPC) + Xcode 2.2 + darwinbuild 0.7.1 上编译旧版本的 securityd。这解决了我对 securityd 内部结构的疑问。

然而，他也发现编译新版本的 securityd 是不可能的。

# math - 如何计算遍历概率图的路线中元素的可能性是正确的？

> ID：10176599
> 
> 赞同：0
> 
> 时间：2012-04-16T14:59:51.160
> 
> 标签：math, probability

我有一个具有一组概率的不对称有向图（因此一个人从 A 点移动到 B 点或从 A 点移动到 C 点等的可能性）。给定一条通过所有点的路线，我想计算路线中做出的每个选择都是好的选择的可能性。

例如，假设一个只有 2 个点的图形。

```
//In a matrix, the probabilities might look like
//A     B
[ 0    0.9  //A
  0.1   0 ] //B 
```

所以从 A 移动到 B 的概率是 0.9，从 B 移动到 A 的概率是 0.1。给定路线 A->B，第一个点 (A) 有多正确，第二个点 (B) 有多正确。

假设我有一个更大的矩阵，其路线为 A->B->C->D。所以，我想知道的一些例子：

*   A 出现在 B、C 和 D 之前的可能性有多大
*   B 出现在 A 之后的可能性有多大
*   C & D 出现在 B 之后的可能性有多大

基本上，在每一点上，我都想知道前面的点出现在当前点之前的可能性，以及后面的点出现的可能性。我不需要统计上合理的东西。只是我可以用来进行相对比较的指标。有任何想法吗？

**更新：**我发现这个问题对每个人都没有用，但答案对我来说真的很有用，所以我试图让问题的描述更清楚，并且很快就会包括我的答案，以防它对某人有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:26:53.787

我认为这不可能有效。如果有一种算法可以计算一个点位于错误位置的概率，您可以简单地计算出每个点的哪个位置错误最少，从而计算出正确的顺序。问题本质上与寻找最优路线相同。

次要问题是概率是什么，在这里。概率可以是100%吗？你怎么知道的？

旅行商问题很难解决的部分原因是，除了查看所有解决方案并发现它是最短的之外，没有办法知道您是否拥有最优解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:26:27.877

用 -log(p) 替换概率矩阵 (p) 并在该矩阵中找到最短路径将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T02:37:19.557

经过深思熟虑，我想出了适合我需要的东西。它仍然存在相同的问题，要获得准确的答案需要检查每条可能的路线。但是，就我而言，仅检查直接路线和第一条间接路线就足以让您了解我的答案有多“正确”。

首先，我需要每个概率的置信度。这是一个单独的计算，包含在一个单独的矩阵中（将 1 到 1 映射到概率矩阵）。我只为每个概率取 1.0-confidenceInterval。

如果我有一条路线 A->B->C->D，我会计算一个点的“正确性指标”。看起来我得到了某种直接路由和第一级间接路由的平均值。

一些例子：

Denote P(A,B) as probability that A comes before B Denote C(A,B) as confidence in the probability that A comes before B Denote P`(A,C) as confidence that A comes before C based on the indirect route A->B->C

At point B, likelihood that A comes before it:

indicator = P(A,B)*C(A,B)/C(A,B)

At point C, likelihood that A & B come before:

P`(A,C) = P(A,B)*P(B,C) C`(A,C) = C(A,B)*C(B,C)

indicator = [P(A,C)*C(A,C) + P(B,C)*C(B,C) + P'(A,C)*C'(A,C)]/[C(A,C)+C(B,C)+C'(A,C)]

So this gives me some sort of indicator that is always between 0 and 1, and takes the first level indirect route into account (from->indirectPoint->to). It seems to provide the rough estimation I was looking for. It is not a great answer, but it does provide some estimate and since nothing else provides anything better, it is suitable

# eclipse - Maven 项目的 NetBeans 和 Eclipse 的差异

> ID：10176600
> 
> 赞同：6
> 
> 时间：2012-04-16T14:59:52.637
> 
> 标签：eclipse, maven, netbeans, maven-2

Netbeans 和 Eclipse 在处理 maven 项目方面有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T15:07:24.670

我是 Eclipse 用户，但老实说，我不得不说 Eclipse 中的 Maven 支持并不完美，并且经常会导致您通过清理、重新编译、重新生成项目文件等方式解决的奇怪错误。

据我所知，IDEA 和 NetBeans 对 Maven 的支持要好得多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-04T16:08:28.310

NetBeans 具有对 Maven 的本机支持。

这到底是什么意思？这意味着如果您在 NetBeans 中有一个基于 Maven 的项目，那么`pom.xml`IDE 将使用它来定义项目。POM**是**定义！

将此与 Eclipse 进行对比，其中 Maven 支持被固定在 Eclipse 的项目定义之上。这意味着任何 Eclipse 解决方案都必须专注于与 Eclipse 自己的项目定义和 POM 之间的转换。我相信这是 Eclipse 有时不太理想的 Maven 支持的根本原因。

在 NetBeans 中，如果您的项目是基于 Maven 的，那么**所有**操作都由 Maven 执行。甚至“运行”动作也是由 Maven 有效完成的。IDE 只会触发它。具有这种一致性意味着您可以确保您的项目的行为完全相同，例如在非 IDE 环境（如 Jenkins/Hudson）中。

我遇到过很多人认为 Maven 很麻烦。当你谈论更多时，他们发现他们的糟糕经历很大程度上归结于他们*在 Eclipse*中使用 Maven 的经历，而不是 Maven 本身。Eclipse 的用户倾向于认为这正是它应该的方式，因为他们从未见过其他任何东西。（NetBeans 用户在 NetBeans 次优和 Eclipse 大放异彩的领域做同样的事情）

毫无疑问：Eclipse 有很多优点。Maven 支持不是其中之一。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T06:33:58.377

在 Netbeans 和 IDEA 中启动基于 maven 的项目比使用 Eclipse 容易得多。

*   在 Eclipse 中，您必须将现有项目配置为使用 maven。首先启用适当的 Maven 插件
*   使用 Netbeans 和 maven 更容易。打开 -> Projekt -> 选择 pom.xml 就可以了
*   IDEA 也有类似的方法。您只需从现有的 pom.xml 导入项目

我选择 IDEA 作为我最喜欢的 IDE，我对 maven 的支持非常满意。有时我必须打开 NetBeans，至少 maven 支持按预期工作。我自己对 Eclipse 的体验有点过时，但我听到很多同事抱怨同时使用 Eclipse 和 maven。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T19:58:07.690

m2e 是“最新”的 maven eclipse 集成（不要与旧的 m2eclipse 混淆）。我真的很感谢所有花时间开发 eclipse、maven 和 m2e 的人——这是我的日常工作设置，但 m2e 远非完美。看看最新的“ [M2E 插件执行未涵盖](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)”的困境。如果您使用非主流插件，则必须修改 pom.xml 以供 m2e 使用 - 只是为了避免 eclipse 中的项目错误。

要运行我的mave 命令，我更喜欢命令行而不是m2e。

据我所知，Netbeans 使用 maven 更“原生”，因此没有那种集成问题。但我不确定。如果你有选择，你应该比较这两种可能性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-21T07:50:22.090

我使用过 Eclipse 和 Netbeans。我在大学里更多地使用 Eclipse，专业上它是在 Eclipse 和 Netbeans 之间混合使用的。

根据域，Eclipse 比 Netbeans 好得多。如果您想使用 scala - 没有其他方法，eclipse scala 插件得到大量维护并且比 Netbeans 工作得更好。如果你想使用 perl，同样的事情。如果您有一个包含 50 多个大型模块的大型项目并且需要进行交叉重构，那么您可以在根 pom 上使用 mvn eclipse:eclipse 并让 eclipse 导入并构建项目，然后开始重构。

话虽如此，当您进行功能开发时。您的基础项目是由 maven 在 CI 中构建的。哦！那么我可以向你保证，Netbeans 比 Eclipse 好几光年。当您将 maven 作为构建工具添加到等式中时，它们不在同一个联盟中。

使用 eclipse，你必须屈服并说： - 我让 eclipse 作为我自己构建的工具工作，我远离命令行，这超出了我的范围。如果我什至去一个文件夹并执行 mvn clean install，就会与我对抗。

对于netbeans，他只是不尝试重新发明轮子。他让 maven 做 maven 所做的事情，并构建您的项目。它以万无一失的方式运行您的测试。

在我个人看来，对于 Java EE 开发 - 即添加功能和“不”进行交叉大规模重构并且您的项目构建在 maven 上，Netbeans 是迄今为止最好的 IDE。这十分完美。它本身就是简单。简单舒适的用户界面。一个完美的调试器。完美的 JSF 到 bean 导航。完美的maven集成。与 Jrebel 完美合作。Netbeans 简单且超级有效。

当我想使用 maven 运行所有单元测试或出于其他原因时，我发现 Eclipse 是我的敌人。如果我想部署一个由 maven 构建的 WAR ......最好不要！我需要绝对让自己陷入日食，让它拥有一切。我需要远离命令行。

# git - git diff 文件针对其最后一次更改

> ID：10176601
> 
> 赞同：265
> 
> 时间：2012-04-16T14:59:54.680
> 
> 标签：git, git-diff

是否有可能让 git 在当前存在的特定文件与上次更改它的提交之前存在的特定文件之间产生差异？

也就是说，如果我们知道：

```
$ git log --oneline myfile
123abc Fix some stuff
456def Frobble the foos
789dba Initial commit 
```

然后`git diff 456def myfile`显示对 myfile 的最后更改。`git log`如果没有由;产生的知识，是否可以做同样的事情 123abc 发生了什么变化？

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2014-03-14T17:47:49.627

这确实存在，但它实际上是一个特性`git log`：

```
git log -p [-m] [--follow] [-1] <path> 
```

请注意，`-p`它也可用于显示单个提交的内联差异：

```
git log -p -1 <commit> 
```

使用的选项：

*   `-p`（也`-u`或`--patch`）隐藏在`git-log`手册页中的 deeeeeeeep 中，实际上是`git-diff`. 当与 一起使用时`log`，它会显示*将为每个提交*生成的补丁以及提交信息，并*隐藏*不涉及指定的提交`<path>`。（此行为在 上的段落中进行了描述`--full-diff`，这会导致显示每个提交的完整差异。）
*   `-m`导致合并提交包含差异内容（否则这些只显示提交消息，就好像`-p`没有指定一样）。
*   `-1`*仅*显示对*指定文件*的最新更改（`-n 1`可以用来代替`-1`）；否则，将显示该文件的*所有*非零差异。
*   `--follow`需要查看在重命名之前发生的更改。

据我所知，这是立即查看对文件所做的最后一组更改的唯一方法，而无需使用`git log`（或类似方法）来计算干预修订的数量或确定提交的哈希值。

要查看旧版本的更改，只需滚动日志，或指定从其开始日志的提交或标记。（当然，指定提交或标签会让您回到原来的问题，即找出正确的提交或标签是什么。）

信用到期的信用：

*   我发现`log -p`感谢[这个答案](https://stackoverflow.com/a/14468031/1858225)。
*   感谢FranciscoPuga，[这个答案](https://stackoverflow.com/a/5493663/1858225)向我展示了这个`--follow`选项。
*   感谢 ChrisBetti 提到该`-n 1`选项和 atatko 提到该`-1`变体。
*   感谢 sweaver2112 让我真正阅读文档并找出`-p`语义上的“含义”。
*   感谢 Oscar Scholten 指出默认情况下，`-p`合并提交不显示差异内容。

* * *

## 回答 #2

> 赞同：226
> 
> 时间：2012-04-16T15:08:34.660

使用 git diff 的方法之一是：

```
git diff <commit> <path> 
```

引用最后一次提交的一个提交的常用方法是作为实际 HEAD 的相对路径。您可以将以前的提交引用为 HEAD^（在您的示例中为 123abc）或 HEAD^^（在您的示例中为 456def）等...

所以你的问题的答案是：

```
git diff HEAD^^ myfile 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-08-17T18:20:35.800

如果您可以很好地使用图形工具，则效果很好：

```
gitk <file> 
```

gitk 现在显示文件已更新的所有提交。标记提交将向您显示与列表中上一个提交的差异。这也适用于目录，但是您还可以选择要对所选提交进行比较的文件。超级好用！

# eclipse - 如何使用 Dropbox 在多个平台之间保持 Eclipse 安装同步？

> ID：10176602
> 
> 赞同：6
> 
> 时间：2012-04-16T14:59:57.687
> 
> 标签：eclipse, dropbox, portable-applications

在每台机器上设置 Eclipse 我真的很头疼，我想让 Eclipse 文件和配置在几台机器之间保持同步。

我想让 Eclipse 在 OS X、Linux 和 Windows 上保持同步，所以我开始获取 OS X 版本的 eclipse，因为它具有 OS X 所需的应用程序，而对于其他两个平台，它更容易启动。

我有什么问题/问题：

*   我不应该同步什么？
*   我在哪里可以放置 JDBC jar 文件以便它们也同步？有没有办法使用相对路径加载它们？

有成功案例吗？

注意：这不是为了让项目本身同步，因为这里有 SCM 的所有混合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:25:40.047

您不能共享 Eclipse 安装目录或工作区，但项目本身很容易使用 cvs、svn、git 等版本管理系统保持同步。我想您可以将项目内容存储在 Dropbox 文件夹中（或类似的文件系统同步机制），然后当您坐在使用这些项目的机器上时强制刷新，但我从未尝试过，并且会警惕人为错误可能导致工作丢失或文件损坏。

关键是，虽然工作区本身不能共享，但项目不必物理地位于文件系统上的工作区文件夹下。这是因为工作空间是项目的逻辑容器，不一定是物理容器。创建项目时，您可以为项目内容指定任意文件系统位置。默认值恰好位于工作区位置下。因此，在每台机器上，您都有一个单独的工作区，可以从您在文件系统上同步它们的任何位置导入项目。这样，工作空间就是一个小型容器，不需要对每台机器进行太多持续维护。我一直在本地执行此操作 - 我的机器上有多个工作区，其中一些包含与其他相同的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:04:51.053

Eclipse 的大部分配置都在 Workspace 中。不幸的是，其中的所有文件都是特定于平台的。我自己尝试过这样做，但没有运气。在他们的 IRC 频道中提问也没有给我留下希望。

# python - 使用 FFT Python 从音频信号中去除背景噪声

> ID：10176604
> 
> 赞同：4
> 
> 时间：2012-04-16T15:00:02.477
> 
> 标签：python, signal-processing, fft, frequency-analysis, noise-reduction

我目前正在大学做一个项目，我正在使用 python 区分不同乐器演奏相同音高的音符。

我使用连接到计算机的麦克风在不同的乐器上录制了各种音符。

我还记录了房间的背景。

到目前为止，我在不同仪器上绘制了不同音符的图，在 y 轴上，我的振幅以 dB 为单位：20*log10(|FFT(signal)|)

在 x 轴上，我有 DFT 采样频率

一些谐波峰值足够小（或背景足够大），以至于噪声成为一个因素 - （不能发布图像，因为我是菜鸟！）我的问题是计算高度的不确定性水平考虑背景噪声时出现峰值。

我的问题是：

那么，在考虑背景噪声时，如何计算峰高（它们的相对谐波幅度）的不确定性水平。

一些想法：

在对什么是谐波峰值和什么可归因于噪声进行分类时，我应该使用什么 dB 阈值（我应该将低于最大背景（~28000dB）或平均值（~15000）或可能是这些值之一的两倍的峰值打折）？

此外，考虑到背景引入的噪声，从我的仪器记录的 FFT bin n 中减去背景的 FFT bin n 中的值是否合法？

我也看过这篇文章[，如何在 MATLAB 中使用 fft 从录制的声音中去除噪音？](https://stackoverflow.com/questions/5879851/how-can-the-noise-be-removed-from-a-recorded-sound-using-fft-in-matlab)，那里似乎有很大不同的意见。

如果它是相关的，我可以发布我的代码片段——尽管在同学剽窃的情况下放得太多。

非常感谢对项目有帮助的文献链接。（仍处于我以我能想到的各种方式绘制数据以寻找每种仪器的区别属性的阶段）。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:06:05.357

你似乎问了很多问题。让我从回答你的第一个开始：

> 那么，在考虑背景噪声时，如何计算峰高（它们的相对谐波幅度）的不确定性水平。

您会期望声音以线性方式求和（达到一阶近似值）。很自然的做法是只对背景进行一些记录，然后测量背景中谐波的平均幅度和标准偏差。

例如，假设您正在查看 3 个谐波 - 20KHz、11KHz 和 33KHz。只记录一些背景，你会发现平均幅度为 1.3dB、2.2dB 和 2.3dB，标准偏差为 +/-0.1、+/-0.2 和 +/-0.4dB。您现在有一个不确定性估计值和一个要从中减去的平均背景谐波。

有更聪明的方法可以做到这一点，但这是一个开始。

现在，开始你的第二个问题

> 在对什么是谐波峰值和什么可归因于噪声进行分类时，我应该使用什么 dB 阈值（我应该将低于最大背景（~28000dB）或平均值（~15000）或可能是这些值之一的两倍的峰值打折）？

如果峰值在平均值内 + 不确定性（一个或两个标准偏差，这实际上是任意的并且取决于惯例），您可以说它很重要。例如，如果您发现 3KHz 的噪声电平为 1.2dB，不确定性为 +/- 0.3dB，并且您测量谐波为 1.3dB，不确定性（以相同方式测量）为 0.1dB，那么它并不重要。

现在是第三部分：

> 此外，考虑到背景引入的噪声，从我的仪器记录的 FFT bin n 中减去背景的 FFT bin n 中的值是否合法？

是的（一般来说）。如果您真的想说服自己相信这一点，您可以 A）用求和波进行一些模拟并对其进行 FFT，B）做一个实验，与 A 或 C 中的相同）通过傅里叶变换的数学。

关于文学，我认为这取决于你具体做什么，如果你是物理专业的学生，​​玛丽博亚斯的“物理科学中的数学方法”很好地对待傅立叶变换，如果你是计算机科学家/工程师你可能想要一些不同的东西。

如果您需要更多帮助，请告诉我。

# jquery - jQuery：绑定命名空间事件

> ID：10176607
> 
> 赞同：11
> 
> 时间：2012-04-16T15:00:16.977
> 
> 标签：jquery

如果事件是命名空间，是否可以监听一个基本事件的所有事件？

例子：

```
$elmt.bind("change", function (event) {
    console.log(event);
});
$elmt.trigger("change.namespace1");
$elmt.trigger("change.namespace2"); 
```

这仅在我绑定到完整的事件名称时才有效，但这是我在这个位置上不知道的:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:27:07.503

你可以，但它并不完美。

例如：

```
function eventHandler(event){
    $("#output").html($("#output").html() + "<br />" + event);
}

$elmt = $("#elmt");
$elmt.bind("change.namespace1", eventHandler);
$elmt.bind("change.namespace2", eventHandler);

$elmt.trigger("change.namespace1");
$elmt.trigger("change.namespace2"); 
```

[JSFiddle 在这里](http://jsfiddle.net/YdpLn/3/)。

您需要从事件中提取命名空间并打开它，因为这两个命名空间都是为基本的“更改”事件触发的，这几乎意味着您需要使用“仅”命名空间或不使用命名空间。

我希望这能有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:37:56.683

从 Bind 交叉发布[到自定义 jquery 事件的所有命名空间](https://stackoverflow.com/questions/12590231/bind-to-all-namespaces-of-custom-jquery-event/14991264#14991264)

* * *

尝试`triggerAll`代替`trigger`：

```
(function($) {
    $.fn.triggerAll = function(topics, data, delimiter) {
        return this.each(function() {
            var $this = $(this), chain = [], t = '';
            delimiter = (delimiter || '.');
            // rebuild chain
            $.each(topics.split(delimiter), function(i,n) {
                t += (i == 0 ? '' : delimiter) + n;
                chain.push(t);
            });

            // append/prepend original topic?
            data = (data || []);
            data.push(topics);
            $.each(chain, function(i,t) {
                $this.trigger(t, data);
            });
        });
    };
})(jQuery); 
```

当然，由于 jQuery 如何处理触发命名空间，触发“根”事件实际上会触发命名空间版本，因此要获得您期望的内容，您需要使用另一个字符作为分隔符，例如`/`，然后声明您的事件，例如：

```
var $o = $('#whatever');
// this will be triggered for all events starting with 'root'
$o.on('root', function () { console.log(Array.prototype.slice.call(arguments, 0)); });
// some arbitrary way to fire custom events
$o.on('click', function () {
    $o.triggerAll('root/custom1/subA', ['1st', '2nd'], '/');
    $o.triggerAll('root/custom2', [3, 4, 5], '/');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T09:52:06.883

这就是我用来比较每个 li 元素上现有主题并替换为新的自定义主题的方法.....

```
$('li').each(function(index) {
                  var oT = $(this).attr('data-theme');
                  var li_item = $(this).attr(index);

                    $('#li_item ').mousedown(function() {

                        if(oT=='a')
                         {
                           $(this).removeClass('ui-btn-up-' + a').addClass('ui-btn-up-' + 'c').attr('data-theme', 'c');
                         }  

                    });

                    $('#li_item ').mouseup(function() {

                        if(oT=='c')
                         {
                           $(this).removeClass('ui-btn-up-' + 'c').addClass('ui-btn-up-' + 'a').attr('data-theme', 'a');
                         }   

                    }); 
```

});

# javascript - 使用 jQuery 动态加载 JavaScript 类文件时如何避免执行延迟竞争条件？

> ID：10176609
> 
> 赞同：1
> 
> 时间：2012-04-16T15:00:22.023
> 
> 标签：javascript, jquery

我现在有大约六个 JS 类文件。我没有放入一堆标签，而是使用 jQuery 动态加载它们——按顺序——像这样：

```
var classes = ["A","B","C"...];
blah.load = function(callback) {
    for (var i in classes) {
        console.log("Loading "+blah.RootURL+"/"+classes[i]+".js");
        $.ajax({
            async: true,
            url: blah.RootURL+"/"+classes[i]+".js",
            dataType: "script",
            error: function(jqxhr, status, error) {
                console.log("Unable to load "+classes[i]+": "+status+", "+error);
            },
            success: function(data, status, xhr) {
                if (window.tmpLoadCount) {
                    window.tmpLoadCount++;
                } else {
                    window.tmpLoadCount = 1;
                }

                if (window.tmpLoadCount == classes.length) {
                    console.log("Initializing...");
                    callback();
                }
            }
        });
    }
}; 
```

目前我正在使用多个脚本标签，所以我可以继续工作。我在使用 jQuery 方法时遇到的问题是，有时在 [重新] 加载时，以前的脚本似乎在下一个脚本加载之前没有执行（或完成执行），即使使用`async: true`. 我的课很短很简单。我会通过“加载”日志看到脚本加载，但后来看到一个错误，如“无法加载 B：A 不是构造函数”（如果 B 继承自 A），这表明 A 不完全`B.prototype=new A();`行执行时加载。

我在网上找到了一个对此的引用，并建议添加一个`setTimeout()`调用以给引擎一些时间，并建议这仅在处理 jQuery 的“成功”回调中的内容时发生......不幸的是我不确定如何确保一切在不使用成功回调的情况下以动态方式按顺序加载。

除了许多`<script/>`标签或缩小（这使调试更加困难）或需要更改类之外，是否有人对如何彻底避免这种“竞争条件”提出建议？我目前不太喜欢的想法是让每个类文件中的最后一行将其类名添加到全局静态属性中，并让 ajax 调用使用间隔来检查该属性以确定它是否应该加载下一个文件...bleh。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:16:31.007

[RequireJS](http://requirejs.org/)实际上就是为这种情况而设计的。你应该认真考虑使用它。我个人认为[Aaron Hardy 的这篇博](http://aaronhardy.com/javascript/javascript-architecture-requirejs-dependency-management/)文比他们自己的文档中实际包含的内容更好、更短、更清晰地描述了 RequireJS 是什么以及如何使用它。您可能需要几分钟的时间来阅读它，我认为您会发现它是一个非常好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:11:10.240

您在当前场景中可以做的一件事是仅在当前完成时才调用下一个脚本的加载。即在`success`函数中是这样的。

```
function something(i){
    $.ajax({
                async: true,
                url: blah.RootURL+"/"+classes[i]+".js",
                dataType: "script",
                error: function(jqxhr, status, error) {
                    console.log("Unable to load "+classes[i]+": "+status+", "+error);
                },
                success: function(data, status, xhr) {
                    if (window.tmpLoadCount) {
                        window.tmpLoadCount++;
                    } else {
                        window.tmpLoadCount = 1;
                    }
    something(window.tmpLoadCount);
                    if (window.tmpLoadCount == classes.length) {
                        console.log("Initializing...");
                        callback();
                    }
                }
            });
} 
```

# sql-server - 如何在 SQL 的单列中显示递归 parentID

> ID：10176610
> 
> 赞同：8
> 
> 时间：2012-04-16T15:00:30.390
> 
> 标签：sql-server, sql-server-2008, recursive-query

这是表的示例结构：

```
ID    Name     ParentID
-----------------------
1     Ancestor      NULL
2     GrandFather   1
3     GrandMother   1
4     Child         3 
```

我正在尝试编写一个返回的查询

```
ID     Name        Family
----------------------------
 1     Ancestor 
 2     GrandFather Ancestor
 3     GrandMother Ancestor
 4     Child       Ancestor^GrandMother 
```

棘手的部分是我想以自上而下的顺序显示所有行的系列。

如果有人能指出我正确的方向，将不胜感激:)

编辑 :: 这是真正的查询，但它遵循相同的想法。它在线返回错误：marketparent.family + '^'+ t2.marketGroupName 因为它找不到marketparent

```
WITH marketparent ( marketGroupID,parentGroupID, marketGroupName,family)
AS
(
SELECT marketGroupID,
       parentGroupID,
       marketGroupName,
       '' as family 
 FROM EVE.dbo.invMarketGroups
 WHERE parentGroupID IS NULL
UNION ALL

    SELECT t2.parentGroupID,
     t2.marketGroupID,
     t2.marketGroupName,
     marketparent.family + '^'+ t2.marketGroupName
     FROM EVE.dbo.invMarketGroups as t2
     INNER JOIN marketparent as mp
     ON mp.marketGroupID = t2.parentGroupID
)

-- Statement using the CTE

SELECT TOP 10 *
FROM marketparent; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T15:13:02.350

你没有指定你的 DBMS，所以我假设 PostgreSQL

```
WITH RECURSIVE fam_tree (id, name, parent, family) as 
(
  SELECT id, 
         name, 
         parentid, 
         ''::text as family
  FROM the_unknown_table
  WHERE parent IS NULL

  UNION ALL

  SELECT t2.id, 
         t2.name, 
         t2.parentid, 
         fam_tree.family || '^' || t2.name
  FROM the_unknown_table t2 
     INNER JOIN fam_tree ON fam_tree.id = t2.parentid
)
SELECT *
FROM fam_tree; 
```

这是标准 SQL（`::text`类型转换除外），在大多数现代 DBMS 上只需很少更改即可工作。

**编辑**：

对于 SQL Server，您需要将标准连接字符替换为 Microsoft 的非标准连接字符`+`（并且您需要删除`recursive`标准要求但由于某些奇怪原因被 SQL Server 拒绝的关键字）

```
WITH fam_tree (id, name, parent, family) as 
(
  SELECT id, 
         name, 
         parentid, 
         '' as family
  FROM the_unknown_table
  WHERE parent IS NULL

  UNION ALL

  SELECT t2.id, 
         t2.name, 
         t2.parentid, 
         fam_tree.family + '^' + t2.name
  FROM the_unknown_table t2 
     INNER JOIN fam_tree ON fam_tree.id = t2.parentid
)
SELECT *
FROM fam_tree; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:14:15.683

您可以使用递归[公用表表达式](http://msdn.microsoft.com/en-us/library/ms175972.aspx)。

```
declare @T table
(
  ID int,
  Name nvarchar(15),
  ParentID int
);

insert into @T values
(1,     N'Ancestor',      NULL),
(2,     N'GrandFather',   1),
(3,     N'GrandMother',   1),
(4,     N'Child',         3);

with C as
(
  select T.ID,
         T.Name,
         T.ParentID,
         cast(N' ' as nvarchar(max)) as Family
  from @T as T
  where T.ParentID is null
  union all
  select T.ID,
         T.Name,
         T.ParentID,
         C.Family+'^'+C.Name
  from @T as T
    inner join C
      on T.ParentID = C.ID
)
select C.ID,
       C.Name,
       stuff(C.Family, 1, 2, '') as Family
from C; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:18:27.880

```
select T.ID, T.Name, (select name from table where ID=T.ParentID)as Family
from table T 
```

# ios - Jcomments 数据存储在哪里？

> ID：10176615
> 
> 赞同：0
> 
> 时间：2012-04-16T15:00:47.393
> 
> 标签：ios, joomla

我想将我网站上的评论 (JComments) 与我的应用程序中的评论同步。如果有人从网站添加评论，它将显示在应用程序中，反之亦然。我只需要知道评论存储在哪里，我确定我可以在那里处理它。

任何建议都非常感谢！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:19:31.967

在您的数据库中查找**jos_jcomments**表。

[http://www.joomlatune.com/jcomments-faq.html](http://www.joomlatune.com/jcomments-faq.html)

# php - 通过 Javascript 或 PHP 将图像转换为文本？

> ID：10176617
> 
> 赞同：2
> 
> 时间：2012-04-16T15:00:59.620
> 
> 标签：php, javascript, image

> **可能重复：**
> [如何使用 PHP 在网站上实现 OCR？](https://stackoverflow.com/questions/2170271/how-can-i-implement-ocr-on-a-website-using-php)

是否有任何脚本可以将包含文本的图像转换为纯文本，最好使用 Javscript 或 PHP？例如，请看下图：

![JPEG图像](../Images/eec1a1ec82a5ffb0c44253351b9ba4ac.png)

我希望将此图像转换为简单的“ABCDEFGHIJK”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:02:18.060

是的，这称为光学字符识别 (OCR)，并且有许多可用于大多数语言的库。

*   [有人知道有效的 OCR (PHP) 吗？](https://stackoverflow.com/questions/4810330/does-anyone-know-a-working-ocr-php)
*   [如何使用 PHP 在网站上实现 OCR？](https://stackoverflow.com/questions/2170271/how-can-i-implement-ocr-on-a-website-using-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:04:51.343

也许这会帮助你.. php：

[http://www.phpclasses.org/package/2874-PHP-Recognize-text-objects-in-graphical-images.html](http://www.phpclasses.org/package/2874-PHP-Recognize-text-objects-in-graphical-images.html)

# process - 如何防止 explorer.exe 在启动时加载？

> ID：10176621
> 
> 赞同：0
> 
> 时间：2012-04-16T15:01:11.293
> 
> 标签：process, batch-file, startup

如何从启动中禁用 explorer.exe？（需要它来提升我**唯一的游戏**电脑）

谢谢！

**编辑 ：**

我需要禁用 explorer.exe，游戏在启动时自动启动！

如果我想要资源管理器，我可以简单地按：Cntrl + Alt + Del，启动任务管理器，单击新任务，然后输入：*“explorer.exe”*，它应该像这样工作。

**编辑2：**

为了使它成为主题，**也许我可以用批处理文件来做到这一点？**

我不知道足够的 .bat 文件来制作一个，我需要在批处理文件中写什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-16T15:14:35.890

在 Windows 中，explorer.exe 是 Windows gui 运行所需的主要文件管理器应用程序。从理论上讲，有一种方法可以通过命令行导航文件（例如，为了打开游戏），但我相信您将需要 explorer 作为许多流行游戏的父进程。有权访问 MSDN 的人将能够更明确地告诉您。

长话短说，除非您启动到命令行模式，否则 explorer.exe 将在启动时加载。

# facebook - facebook：通过图形 API 邀请用户参加活动有什么限制？

> ID：10176626
> 
> 赞同：0
> 
> 时间：2012-04-16T15:01:32.417
> 
> 标签：facebook, facebook-graph-api

我正在通过图形 API 邀请用户参加活动。我们观察到每个事件的 100 个邀请后都会引发权限错误。我仍然无法在 API 文档中找到有关这些限制的任何信息。

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:12:35.140

它有点晚了。但是你去 - [http://www.facebook.com/help/202545109787461/](http://www.facebook.com/help/202545109787461/)

# ruby-on-rails - jquery mobile调用javascript两次

> ID：10176628
> 
> 赞同：0
> 
> 时间：2012-04-16T15:01:38.113
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-mobile

我有一个桌面页面，使用 jquery mobile 生成一些标签（用于漂亮和方便的插件）我不使用角色标题、内容、页面......我在 head 中配置，在包含 jquery mobile js 之前：

```
<script type='text/javascript'>

        $(document).bind("mobileinit", function(){
          $.mobile.ajaxEnabled = false;
        });

</script> 
```

如果脚本在标签上，它会运行一次。其他地方运行两次（测试警报）我检查页面源它只有1个警报，但是当单击时，它会发出两次警报我该如何解决？谢谢

# ember.js - emberjs 附加组件中的 Ember statemanager vs sproutcore-statechart

> ID：10176635
> 
> 赞同：3
> 
> 时间：2012-04-16T15:01:52.860
> 
> 标签：ember.js, statechart

有一些示例展示了在基于 Ember 的应用程序中使用状态图：

[http://www.thesoftwaresimpleton.com/blog/2012/02/28/statemachine/](http://www.thesoftwaresimpleton.com/blog/2012/02/28/statemachine/)

[https://github.com/DominikGuzei/ember-routing-statechart-example](https://github.com/DominikGuzei/ember-routing-statechart-example)

emberjs-addons 中的 sproutcore-statechart 和 ember-states lib 中的 ember.statemanager 有什么区别？如果我想在 Emberjs 中使用 sproutcore-statechart，我该如何正确设置它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T22:52:48.890

Ember 有一个从头开始编写的新状态系统。然而，SC2 时代的一些用户依赖于 SproutCore 的状态图，因此“sproutcore-statechart”系统引入了它。它几乎只是用于遗留使用。我建议新用户只使用内置的 Ember States。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T00:23:33.160

就在两天前，StateManager 上的代码注释中的一些很棒的新文档（通过 Trek）被合并了：

[https://github.com/emberjs/ember.js/blob/master/packages/ember-states/lib/state_manager.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-states/lib/state_manager.js)

享受！

# java - Netbeans 中的 Java 复选框列表

> ID：10176643
> 
> 赞同：0
> 
> 时间：2012-04-16T15:02:17.617
> 
> 标签：java, user-interface, netbeans, checkbox, arraylist

我必须设计一个处理客户订单的应用程序。GUI 有选项卡，一个用于客户，一个用于管理员。在客户选项卡中，他可以通过从产品列表中选择产品来提交订单，每个产品前面都有一个复选框和一个用于指定数量的文本字段。

我正在使用 netbeans gui 编辑器进行设计，但由于无法修改代码，我有点卡住了。我无法动态创建产品列表（因此要为产品数组列表中的每个产品创建一行，并在每一行上放置复选框和文本字段），或者至少我不知道如何创建。

我的问题是 - 有什么方法可以动态创建这样的列表（复选框+带有产品名称的标签+等待数量的文本字段）还是有替代我的想法的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:42:49.533

听起来您需要使用 a`JTable`作为产品和数量列表。在 NetBeans GUI 编辑器中，您只能将 放置在`JTable`您正在设计的面板上。之后，您需要为您的表格定义一个“模型”，它将保存您输入的数据。[请参阅有关如何使用表](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)的官方 Oracle Java 教程。

当然，还有许多其他用例可以满足您的要求，但您的设计听起来不错。不过，该复选框可能是多余的，因为输入产品的数量应该足以表明客户已选择该产品。但是，如果您的产品列表太长，您可能需要重新访问此设计。也许该表可以有 2 列，第一个是产品的组合框列表，第二列有数量。

# sql - 按顺序对多个表运行相同的 SQL 代码

> ID：10176646
> 
> 赞同：0
> 
> 时间：2012-04-16T15:02:23.203
> 
> 标签：sql, sql-server, sql-server-2005

我有许多表（大约 40 个）包含大约 4000 万辆汽车的快照数据。每个快照表都位于特定时间点（季度末），并且在结构上是相同的。

虽然我们的大部分分析都是针对单个快照，但有时我们需要同时针对所有快照运行一些分析。例如，我们可能需要构建一个新表，其中包含每个快照中的所有福特福克斯汽车。

为了实现这一点，我们目前有两种选择：
a) 编写一个很长很长的批处理文件，一遍又一遍地重复相同的代码，只需更改 FROM 子句
[缺点 - 编写和更改单行代码需要很长时间其中一个块中的代码需要在所有其他块中进行细微的更改]
b) 使用视图将所有表联合在一起并查询
[缺点 - 我们的表存储在单独的数据库实例中并且不能被索引，加上结果视图是大约 6 亿条记录长 x 125 列宽，所以速度非常慢]

所以，我想知道我是否可以使用动态 sql 或将 SQL 放入循环中以假脱机处理所有表。这将是这样的：

```
for each *table* in TableList
INSERT INTO output_table
SELECT *table* as OriginTableName, Make, Model
FROM *table*
next *table* in TableList 
```

这可能吗？这意味着当我们的客户端更改他们需要的内容时更新原始 SQL（非常经常发生！）将非常简单，并且我们将从原始表上已有的所有索引中受益。

任何指示、建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:06:03.133

如果您可以识别您的表（例如命名模式），您可以简单地说：

```
DECLARE @sql NVARCHAR(MAX);

SELECT @sql = N'';

SELECT @sql = @sql + 'INSERT output_table SELECT ''' + name + ''', Make, Model
    FROM dbo.' + QUOTENAME(name) + ';'
FROM sys.tables 
WHERE name LIKE 'pattern%';
-- or WHERE name IN ('t1', 't2', ... , 't40');

EXEC sp_executesql @sql; 
```

这假设它们都在`dbo`模式中。如果不是，调整很容易......只需替换`dbo`为`' + QUOTENAME(SCHEMA_NAME([schema_id])) + '`......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:35:46.760

最后我使用了两种方法：
另一个论坛上有人建议使用 sp_msforeachtable 和一个包含所有表名的表。他们的建议是：

```
create table dbo.OutputTable (OriginTableName nvarchar(500), RecordCount INT)
create table dbo.TableList (Name nvarchar (500))

insert dbo.TableList 
        select '[dbo].[swap]'
union   select '[dbo].[products]'
union   select '[dbo].[structures]'
union   select '[dbo].[stagingdata]'

exec sp_msforeachtable @command1 = 'INSERT INTO dbo.OutputTable SELECT ''?'',    COUNT(*)     from ?'
,@whereand = 'and syso.object_id in (select object_id(Name) from dbo.TableList)'             

select * from dbo.OutputTable 
```

这对于某些查询非常有效，但似乎无法在查询中使用 GROUP BY 子句这一事实（或者，至少，我找不到这样做的方法）。

我使用的最终解决方案是将 Dynamic SQL 与包含表名的查找表一起使用。在一个非常简单的形式中，这看起来像：

```
DECLARE @TableName varchar(500)
DECLARE @curTable CURSOR
DECLARE @sql NVARCHAR(1000)

SET @curTable = CURSOR FOR 
SELECT [Name] FROM Vehicles_LookupTables.dbo.AllStockTableList

OPEN @curTable
FETCH NEXT
FROM @curTable INTO @TableName

WHILE @@FETCH_STATUS = 0
BEGIN

SET @sql = 'SELECT ''' +@TableName + ''', Make, sum(1) as Total FROM ' + @TableName + ' GROUP BY Make'
EXEC sp_executesql @sql

FETCH NEXT
FROM @curTable INTO @TableName

END
CLOSE @curTable
DEALLOCATE @curTable 
```

# python - 在谷歌文档电子表格中创建按钮，如 EXCEL

> ID：10176652
> 
> 赞同：2
> 
> 时间：2012-04-16T15:02:40.253
> 
> 标签：python, google-apps-script, google-sheets, google-docs

我的问题很简单，但我无法弄清楚。如何在登录时可以看到的谷歌文档电子表格中创建按钮。我想在登录谷歌文档时初始化脚本，而不是手动加载。有没有办法做到这一点？我也找不到很好的教程，它提供了关于 google-docs 功能的中间知识。我只能找到[这个简单的教程](https://developers.google.com/apps-script/articles)。另一个问题是： google-docs 提供的 python 脚本可以保存在 google-docs 本身中并执行吗？如果可以的话，它可以提供比简单的谷歌功能更多的功能。我是谷歌文档的新手，所以请多多包涵。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T15:16:00.617

您可以使用 Google Apps 脚本创建一些 UI 元素。

[https://developers.google.com/apps-script/guide_user_interfaces](https://developers.google.com/apps-script/guide_user_interfaces)

Apps Script 是类似 javascript 的脚本，在 google 土地上运行 SERVER 端。它可以访问各种服务和谷歌文档模型。但是在其他方面受到限制，您认为 javascript 可以做的许多事情。这是其大部分限制的根源。您可以启用脚本以在启动时加载并挂钩相关事件。

虽然有 Python 和 Java API 可以访问 Google 文档及其内容，但无法在 Apps 脚本和相关 UI 设计器之外创建 UI 元素：http: [//googleappsdeveloper.blogspot.com/2011/06/building -ui-in-apps-script-just-got.html](http://googleappsdeveloper.blogspot.com/2011/06/building-ui-in-apps-script-just-got.html)

# xml - XPath count() 函数

> ID：10176657
> 
> 赞同：26
> 
> 时间：2012-04-16T15:02:58.190
> 
> 标签：xml, xpath

假设我有一个如下的 XML 树：

```
proceedings
   -name
   -contents
      -article
         -author
         -title
         -pages 
```

如何识别只有一位作者的任何标题？以及有超过三个作者使用 XPath 的文章数量？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-16T15:05:58.977

一位作者的标题：

```
/proceedings/contents/article[count(author)=1]/title 
```

超过三位作者的文章数量：

```
count(/proceedings/contents/article[count(author)>3]) 
```

# webkit - 是我可以检测到的特定 webkit 功能以检查用户是否正在使用 webkit 浏览器

> ID：10176659
> 
> 赞同：2
> 
> 时间：2012-04-16T15:03:07.097
> 
> 标签：webkit, feature-detection

如果我需要检测 Firefox，我使用了以下代码：

```
var firefox = !(window.mozInnerScreenX == null); 
```

我很好奇是否有类似的东西可以在不检查用户代理字符串的情况下检测 webkit 浏览器。就像检查只有 webkit 浏览器才有的特定功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T15:07:12.133

转到 Chrome 中的控制台并输入`window.webkit`- 自动完成将向您显示一组应该是特定于 Webkit 的属性（例如`webkitRequestAnimationFrame`,`webkitAudioContext`等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T15:08:06.790

根据我的经验，最佳做法是使用

`window.webkitConvertPointFromNodeToPage`

`window.WebKitCSSMatrix`

`window.WebKitPoint`

这些是最古老的属性之一，最早是在 safari 4.0 中引入的 Chrome 从第一个版本开始就支持这个，opera 在引擎迁移后就拥有了这些属性。

UPD：@hexalys 找到了更好的解决方案：

```
'WebkitAppearance' in document.documentElement.style 
```

即使在 safari 3.0 中也支持这个

# html - FireFox 按钮未链接

> ID：10176660
> 
> 赞同：-1
> 
> 时间：2012-04-16T15:03:08.453
> 
> 标签：html, firefox, css, cross-browser

我正在尝试使用设置为显示使用 CSS3 制作的按钮的按钮标签来链接按钮。该按钮在 Chrome 和 Safari 中正常工作和显示，但在 FireFox 中，该按钮显示但它没有链接，它也有点弄乱了页面的样式。

我知道你曾经无法使用

该页面的链接在这里[http://pt11.com/index2.php?x=videos.html](http://pt11.com/index2.php?x=videos.html)

这是我的 HTML：

```
<head>
<link rel="stylesheet" type="text/css" href="videos.css" />
</head>
<br>

<div class="vidholder">

<div class="textbox">
<h2>Eythor Bender at TEDMED 2011</h2>
</div>

 <div class="textbox2">
 Eythor Bender's Ekso Bionics makes powered, wearable robots known as "exoskeletons" that           boost human strength, endurance, and mobility. But can they help a paraplegic walk? Watch this incredible story.

 </div>

 <div class="img">
 <img src="ted.png">
  </div>

     <button type="button" name="" value="" class="css3button"><a href="http://www.youtube.com/watch?feature=player_embedded&v=tgWrCNH9gHc" target="_blank">Watch Video</a></button>

     </div>
      <br>

     </div> 
```

然后是按钮的 CSS

```
 button.css3button {
padding
    margin:-3px 0px 0px 325px;

font-family: Arial, Helvetica, sans-serif;
font-size: 14px;
color: #ffffff;
padding: 10px 20px;
background: -moz-linear-gradient(
    top,
    #ff2819 0%,
    #ab0000);
background: -webkit-gradient(
    linear, left top, left bottom, 
    from(#ff2819),
    to(#ab0000));
border-radius: 0px;
-moz-border-radius: 0px;
-webkit-border-radius: 0px;
border: 1px solid #7d0000;
-moz-box-shadow:
    0px 1px 3px rgba(000,000,000,0.5),
    inset 0px 0px 2px rgba(255,255,255,0.7);
-webkit-box-shadow:
    0px 1px 3px rgba(000,000,000,0.5),
    inset 0px 0px 2px rgba(255,255,255,0.7);
text-shadow:
    0px -1px 0px rgba(000,000,000,0.4),
    0px 1px 0px rgba(255,255,255,0.3);
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:22:08.153

是否有理由需要按钮元素？为什么不直接使用

```
<a class="css3button"> 
```

并更改您的 css 选择器以匹配。这会将样式应用于锚点，消除对按钮元素的需求，并且可以在所有浏览器中使用。

# asp.net - 动态构建url

> ID：10176662
> 
> 赞同：1
> 
> 时间：2012-04-16T15:03:28.923
> 
> 标签：asp.net, .net, hyperlink

我试图像这样在asp.net中构造url

```
<asp:HyperLink ID="edit" runat="server" NavigateUrl="./edit.aspx/&action=edit&id=<%#Eval("id")%>">Edit</asp:HyperLink> 
```

但是当我运行 asp.net 页面时出现错误

> 解析器错误消息：服务器标记格式不正确。
> 
> 源错误：
> 
> 第 71 行：">编辑
> 
> 源文件：/admin/vehicle/view.aspx 行：71

谁能帮我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:06:12.470

```
<asp:HyperLink ID="edit" runat="server" NavigateUrl='<%# "./Edit.aspx/action=edit&id=" & Server.UrlEncode(Container.DataItem("MyID"))%>'/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:15:08.433

我更喜欢“~/”，这样它将解析为根站点和虚拟目录：

```
<asp:HyperLink ID="edit" runat="server" 
   NavigateUrl='<%# String.Format("~/edit.aspx/&action=edit&id={0}",Eval("id"))%>'>Edit</asp:HyperLink> 
```

# c# - 连接字符串错误：“初始化数据库时发生异常”

> ID：10176663
> 
> 赞同：0
> 
> 时间：2012-04-16T15:03:30.363
> 
> 标签：c#, .net, entity-framework, exception-handling, connection-string

我正在使用visual studio 2010 mvc3，模型优先方法，我的连接字符串不断中断这是它带来的错误：

> 初始化数据库时发生异常。有关详细信息，请参阅 InnerException。

下面是它所在的代码：

```
public IEnumerable<Show> GetShows()
{
    return context.Shows.ToList();
} 
```

以下是异常详细信息：

```
System.Data.DataException was unhandled by user code
  Message=An exception occurred while initializing the database. See the InnerException for details.
  Source=EntityFramework
  StackTrace:
       at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
       at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
       at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c)
       at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
       at System.Data.Entity.Internal.InternalContext.Initialize()
       at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
       at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
       at System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator()
       at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
       at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
       at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
       at TheatreGroup.DAL.ShowRepository.GetShows() in E:\TheatreGroupProject\BackUpWEb28.03.2012\TheatreGroupProject\TheatreGroup\TheatreGroup\DAL\ShowRepository.cs:line 20
       at TheatreGroup.Controllers.ShowsController.Index(String sortOrder, String currentFilter, String searchString, Nullable`1 page) in E:\TheatreGroupProject\BackUpWEb28.03.2012\TheatreGroupProject\TheatreGroup\TheatreGroup\Controllers\ShowsController.cs:line 46
       at lambda_method(Closure , ControllerBase , Object[] )
       at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
       at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
       at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
  InnerException: System.Data.EntityException
       Message=The underlying provider failed on Open.
       Source=System.Data.Entity
       StackTrace:
            at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
            at System.Data.EntityClient.EntityConnection.Open()
            at System.Data.Objects.ObjectContext.EnsureConnection()
            at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
            at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
            at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
            at System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__1[TResult](IEnumerable`1 sequence)
            at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot)
            at System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression)
            at System.Data.Entity.Internal.Linq.DbQueryProvider.Execute[TResult](Expression expression)
            at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
            at System.Data.Entity.Internal.InternalContext.QueryForModelHash()
            at System.Data.Entity.Internal.InternalContext.CompatibleWithModel(Boolean throwIfNoMetadata)
            at System.Data.Entity.Database.CompatibleWithModel(Boolean throwIfNoMetadata)
            at System.Data.Entity.DropCreateDatabaseIfModelChanges`1.InitializeDatabase(TContext context)
            at System.Data.Entity.Database.<>c__DisplayClass2`1.<SetInitializerInternal>b__0(DbContext c)
            at System.Data.Entity.Internal.InternalContext.<>c__DisplayClass5.<PerformDatabaseInitialization>b__3()
            at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
       InnerException: System.Data.SqlClient.SqlException
            Message=Database 'E:\TheatreGroupProject\BackUpWEb28.03.2012\TheatreGroupProject\TheatreGroup\TheatreGroup\App_Data\StudentTheatre.mdf' already exists. Choose a different database name.
Cannot attach the file 'K:\Year 3 Web Programming\AnotherWebProject\BackUpWEb28.03.2012\TheatreGroupProject\TheatreGroup\TheatreGroup\App_Data\projecttheatre.mdf' as database 'YourCatalog'.
            Source=.Net SqlClient Data Provider
            ErrorCode=-2146232060
            Class=16
            LineNumber=65536
            Number=1801
            Procedure=""
            Server=\\.\pipe\C8A38AE3-00CC-42\tsql\query
            State=2
            StackTrace:
                 at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
                 at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
                 at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
                 at System.Data.SqlClient.SqlConnection.Open()
                 at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
            InnerException: 
```

# iphone - Facebook SDK：发布图像后如何获取照片属性？

> ID：10176665
> 
> 赞同：2
> 
> 时间：2012-04-16T15:03:44.167
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我刚刚通过 Facebook SDK 将照片上传到我的个人墙上。当我跟踪“request:didLoad”方法时，我只得到“id”和“post_id”。这是我所有必要的方法：

```
-(void) postPhoto:(UIButton*)button{
    UIImage *uploadImage = [UIImage imageNamed:@"testImage"];    
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   uploadImage, @"source", 
                                   @"test caption", @"message",             
                                   nil];

    [self.facebook requestWithGraphPath:@"/me/photos" andParams:params andHttpMethod:@"POST" andDelegate:(id)self];
}

- (void)request:(FBRequest *)request didLoad:(id)result{
    NSLog(@"Request didLoad: %@", result);
} 
```

输出：

> 请求 didLoad: { id = 3273804256400; "post_id" = "1608527600_3273799016300"; }

所以，我想知道为什么没有关于[照片](https://developers.facebook.com/docs/reference/api/photo/)的更多信息？我以为我会找回各种照片字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:59:35.823

要获取有关照片的更多信息，您需要执行另一个请求。如果您对 id 进行图形请求，您将获得信息。例如，您可以调用[https://graph.facebook.com/3273804256400](https://graph.facebook.com/3273804256400)并接收照片中标记的人、点赞、评论等信息。

Facebook 假设如果您发布了照片，您不需要知道有关它的信息，这就是为什么他们只给您 id 和 post_id 的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:42:31.873

我已经解决了这个问题。当您获得额外的 facebook 权限“user_photos”时，您可以获得照片 URL。

# asp.net-mvc-3 - mvc3 使用 HttpPostedFileBase 获取完整路径

> ID：10176669
> 
> 赞同：0
> 
> 时间：2012-04-16T15:04:19.083
> 
> 标签：asp.net-mvc-3, httppostedfilebase

我有一个浏览按钮，我将它保存到数据库中。

使用 mvc3

看法

```
 @using (Html.BeginForm("Upload", "Upload", FormMethod.Post, new { enctype = multipart/form-data" }))
{
<input type="file" name="file" />
} 
```

控制

```
public ActionResult Upload(FormCollection collection HttpPostedFileBase file)
      string filefullpath = Path.GetFullPath(file.FileName); 
```

Path.GetFullPath 只返回文件名，我的代码崩溃了，因为它需要完整的文件路径。

我尝试通过通过测试完整路径 C:\filename.jpg 进行测试，并且它有效。所以我错过了要传递给函数的完整路径....

如何从用户选择的浏览按钮中获取完整路径。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:32:44.160

据我所知，您无法获得完整的路径。它与安全有关。

无论如何，您不需要它，因为您可以将流保存到任何您喜欢的位置。

*更新：*

一些基本代码：

```
var file = Request.Files[0];

if (file == null || file.ContentLength == 0)
{
    throw new InvalidOperationException("No file has been selected for upload or the file is empty.");
}

file.SaveAs(path);  // <-- path is somewhere on you *local* drive 
```

或进入数据库：

**数据结构**

```
CREATE TABLE [dbo].[SystemImage](
[Id] [uniqueidentifier] NOT NULL,
[ImageData] [image] NOT NULL,
CONSTRAINT [PK_SystemImage] PRIMARY KEY CLUSTERED 
(
[Id] ASC
) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO

ALTER TABLE [dbo].[SystemImage] ADD  CONSTRAINT [DF_SystemImage_Id]  DEFAULT (newid()) FOR [Id]
GO 
```

**代码**

```
using (var connection = new SqlConnection(@"data source=.\SQLEXPRESS;initial catalog=ImageTest;Integrated Security=SSPI;"))
{
    connection.Open();

    using (var command = connection.CreateCommand())
    {
        command.CommandType = CommandType.Text;
        command.CommandText = "insert into SystemImage (ImageData) values (@ImageData)";

        command.Parameters.AddWithValue("ImageData", file.InputStream.ToBytes());
        command.ExecuteNonQuery();
    }
} 
```

对于`Stream.ToBytes()`扩展方法，请参见此链接：

[http://shuttle.codeplex.com/SourceControl/changeset/view/3f7f1f2cf2c0#Shuttle.Core%2fsource%2fShuttle.Core.Infrastructure%2fExtensions%2fStreamExtensions.cs](http://shuttle.codeplex.com/SourceControl/changeset/view/3f7f1f2cf2c0#Shuttle.Core%2fsource%2fShuttle.Core.Infrastructure%2fExtensions%2fStreamExtensions.cs)

# ios - 如何固定 tableFooterView 的位置

> ID：10176672
> 
> 赞同：3
> 
> 时间：2012-04-16T15:04:25.870
> 
> 标签：ios, uitableview

我有一个`UITableViewController`用户点击“编辑”按钮（已经在 中`tableHeaderView`），一旦他们处于编辑模式，就会`tableFooterView`有一个“删除”按钮。

我的问题是页脚随表格滚动。有什么方法可以使位置固定（或者可能是另一种方法）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:09:37.720

创建两个`UIView`s，并将 s 放在`UITableView`上面的一个：

```
+-------------------+
|  +-------------+  |
|  |             |  |
|  |             |  |
|  |    Table    |  |
|  |             |  |
|  |             |  |
|  |             |  |
|  +-------------+  |
|   regular view    |
+-------------------+
|      footer       |
+-------------------+ 
```

# css - 在 Padrino Ruby 框架中使用 LESS

> ID：10176678
> 
> 赞同：1
> 
> 时间：2012-04-16T15:04:35.107
> 
> 标签：css, ruby, less, assets, padrino

我对 Padrino 框架（以及一般的 ruby​​）非常陌生，并且一直在研究将 padrino 对 LESS CSS 预处理器的内置支持用于我正在开发的新应用程序。我决定为这个项目完全致力于 LESS，因为我正在使用 Twitter 的 Bootstrap 框架作为我的 UI 的基础。

所以我的问题是，我如何在我的工作流程中使用 padrino 的 LESS 支持，无论是在开发期间（我希望 .less 源文件在每次页面刷新时动态编译并重新加载），还是在生产中（ padrino 应该提供从所有 .less 源文件编译的单个 css 文件，这些文件都将在“主”application.less 文件中正确排序和@imported）。

我可以看到，当我生成一个选择 less 作为 css 预处理器的 padrino 项目时，我在 /app 目录和 /public/stylesheets 目录中都获得了一个“样式表”目录，我假设 .less 文件应该在该目录中我假设编译的 .css 文件会放在哪里。我不确定的是如何将我的 LESS 资产“定义”到 padrino，它的内置支持能走多远，我还需要手动进行多少管理？

仅供参考，我的开发环境是 Mac OSX Lion 和 pow rack 服务器。对于生产，我仍在决定主机，我倾向于 heroku。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:02:11.067

[CodeKit](http://incident57.com/codekit/)应该满足您的“即时”需求。我自己没有使用它，因为我只使用 Snow Leopard，[SimpLESS](http://wearekiss.com/simpless)，已经满足了我的需求（直到出现 CodeKit 的 SL 版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:27:04.970

您可以将 LESS 与带有组件的 Padrino 一起使用。见[http://www.padrinorb.com/guides/generators](http://www.padrinorb.com/guides/generators)

```
padrino g project your_project -c less 
```

编辑：如果您想向现有应用程序添加 LESS：http: [//www.padrinorb.com/guides/adding-new-components](http://www.padrinorb.com/guides/adding-new-components)

# c# - System.Threading 定时器

> ID：10176680
> 
> 赞同：4
> 
> 时间：2012-04-16T15:04:40.800
> 
> 标签：c#, wpf, timer

我在将 DispatcherTimer 语法转换为 Thread Timer 时遇到问题。当我突然运行我的应用程序时，它会关闭而没有任何错误。

基本上我希望计时器每 5 秒执行 2 个方法。

**编辑：这两种方法正在更新 UI。** 我正在尝试摆脱 DispatcherTimer，因为我必须在 UI 显示中出现很多冻结和延迟。

调度程序计时器代码：

```
timerW = new DispatcherTimer();
    timerW.Tick += new EventHandler(timerW_Tick);
    timerW.Interval = new TimeSpan(0, 0, 5000);
    timerW.Start();

 private void timerW_Tick(object sender, EventArgs e)
        {
            DisplayWegingInfo();
            CaculateTimen();
        } 
```

System.Threading 计时器的代码：

```
public void InitializeDispatcherTimerW()
    {
        TimerCallback callback = MyTimerCallBack;
        timerW = new Timer(callback);

        timerW.Change(0, 5000);
    }

    private void MyTimerCallBack(object state)
    {
        DisplayWegingInfo();
        CaculateTime();
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:07:38.760

问题很可能是您在计时器回调的方法中更新 UI。这只能通过 UI 线程实现，并且计时器在后台线程中运行。

我建议你坚持使用`DispatcherTimer`.

另一种解决方案是将代码拆分一下：将工作密集型代码提取到其他方法中并在后台线程中运行它们，然后从 UI 线程更新 UI。

像这样的东西：

```
private void MyTimerCallBack(object state)
{
    LongCalculationsThatDontNeedTheUI();
    _dispatcherUIThread.Invoke(new Action(UpdateUI));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:11:07.593

从 DisplayWedgingInfo 的名称来看，我猜这个方法会更新 UI？System.Threading.Timer 在不同于 UI 线程的线程上执行，因此为了能够从该线程更新 UI，您需要`Dispatcher`使用[`Dispatcher::[Begin]Invoke`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx).

因此，您可以保留任何不涉及 UI 元素的昂贵工作，但对于 UI 操作，您只需执行以下操作：

```
string someValue = this.SomeExpensiveOperation();

this.Dispatcher.BeginInvoke(
    DispatcherPriority.Background,
    new Action(() => 
   { 
          this.myControl.Text = someValue; 
   })); 
```

我应该指出，当调用确实发生时，任何可能正在进行的 UI 交互/渲染都会出现一些中断。这是不可避免的，因为执行将发生在主线程上。通过使用`DispatcherPriority.Background`您，至少安排更新的优先级使其低于用户当时可能提供的任何输入。但是，不要期望能够对 UI 进行大规模更新而不会受到任何惩罚。如果您需要这样做，最好将多个`Background`优先级调用排队，以便它们可以在必要时以更高优先级的东西发生，例如在两者之间输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:21:40.710

我会检查两件事： 1\. 正如其他人所说，确保如果您正在更新 UI，那么您正在调用回调度程序——您只能从 UI 线程更新 UI。即使您正在使用数据绑定——如果一个计时器线程更新了一个数据绑定到 UI 的值，那“计数”为接触 UI 的错误线程。

1.  始终使用 try..catch 块保护您的计时器回调。.Net 对于未处理异常的默认行为是终止进程。我见过很多“只是退出”，真正的罪魁祸首是计时器线程或工作线程上没有异常处理。（实际上，如果您尝试从错误的线程操作 UI，WPF 应该抛出异常，因此可能是您收到异常，然后程序因没有处理程序而终止）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T15:19:20.570

我认为您需要将**数据检索/计算**与**数据显示**分开。

正如 Daniel 指出的那样，任何 GUI 更新都需要在 Dispatcher 线程上完成，因此最简单的方法是使用`DispatcherTimer`.

但是，使用`DispatcherTimer`意味着计时器回调中的**所有内容都在 GUI 线程中完成。**如果您有任何需要花费大量时间的操作，这并不好。如您所见，GUI 会卡住并锁定。

你需要弄清楚什么是花时间。从你的另一个问题我猜它是 SQL 检索。在这种情况下，您最好在单独的线程上进行实际**检索**`System.Threading.Timer`（通过使用），一旦获得结果，通过使用to 编组到 GUI 线程来更新**显示。**`Dispatcher.BeginInvoke()`

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-16T15:09:24.827

为什么不简单地使用后台线程来调度事件？

```
 CancellationTokenSource cts = new CancellationTokenSource();
  Task.Factory.StartNew(() =>
     {
          while(!cts.IsCancellationRequested)
          {
               Thread.Sleep(5000);

               this.Dispatcher.BeginInvoke(new Action(() =>
                  {
                       DisplayWegingInfo();
                       CalculateTimen();
                  }), null);
          }
     }); 
```

# symfony - 在 Symfony2 的 AuthenticationHandler 类中使用自定义记录器服务

> ID：10176689
> 
> 赞同：0
> 
> 时间：2012-04-16T15:04:57.610
> 
> 标签：symfony, config, monolog

**简而言之，我正在尝试使用我在自定义处理程序服务中定义的记录器服务。**

**我的 config.yml**

```
services:
authentication_handler:
    class: Panasonic\LoginBundle\Handler\AuthenticationHandler
    arguments: [ @custom_logger ]

custom_logger:
    class: Monolog\Logger
    arguments: [login]
    calls:
        - [ pushHandler, [ @custom_logger_stream ]]

custom_logger_stream:
    class: Monolog\Handler\RotatingFileHandler
    arguments: [ %kernel.logs_dir%/test.log, 30, 200 ] 
```

“服务：”在我的代码中很好地缩进，不用担心。

**我的 Bundle/Handler/AuthenticationHandler**

```
namespace Panasonic\LoginBundle\Handler;

use Monolog\Logger;
use Symfony\Component\Security\Http\Authentication\AuthenticationSuccessHandlerInterface;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;

class AuthenticationHandler implements AuthenticationSuccessHandlerInterface
{

private $custom_logger;

public function __constructor(Logger $custom_logger)
{
    $this->custom_logger = $custom_logger;
}

public function onAuthenticationSuccess(Request $request,
                                        TokenInterface $token)
{
    $log = $this->custom_logger;

    $log->addWarning('Foo');
    $log->addError('Bar');
    die;

    //        var_dump($token); die;
    //        var_dump($request->getSession()); die;
}
} 
```

我正进入（状态：

```
Fatal error: Call to a member function addWarning() on a non-object in ... Panasonic\LoginBundle\Handler\AuthenticationHandler.php on line 22 
```

注意：我知道我应该在 onAuthenticationSuccess 中返回一个响应，它实际上是不完整的，但我知道它有效，我从 var_dumps 中得到了结果。

**估计打针不行，怎么办？我不知道在这里做什么。请帮忙**

我检查的参考资料： [普通类中的访问服务](https://stackoverflow.com/questions/8953721/symfony2-access-services-inside-a-regular-class)

[http://martinsikora.com/symfony2-and-dependency-injection](http://martinsikora.com/symfony2-and-dependency-injection)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:56:08.200

检查您的承包商名称...我想它没有被调用...

```
public function __construct()
{
    // ...
} 
```

我写了一篇文章，准确地解释了如何实现这一点： http: [//blog.alterphp.com/2012/04/set-up-specific-log-file-for.html](http://blog.alterphp.com/2012/04/set-up-specific-log-file-for.html)

# ios - MKAnnotation 不会触发针点绘制方法

> ID：10176690
> 
> 赞同：0
> 
> 时间：2012-04-16T15:04:59.893
> 
> 标签：ios, map, mkmapview, mkannotation

我正在使用以下类创建一个带有地图和注释的视图：

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface ContactDetailAnnotation : NSObject <MKAnnotation>

- (id) initWithLatitude:(CLLocationDegrees) lat longitude:(CLLocationDegrees) lng;
- (id) initWithCoordinate:(CLLocationCoordinate2D) coordinateArg;

@property (unsafe_unretained) CLLocationDegrees latitude;
@property (unsafe_unretained) CLLocationDegrees longitude;
@property (unsafe_unretained, nonatomic) CLLocationCoordinate2D coordinate;

@end 
```

问题在于方法：

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation 
```

用来绘制我的点没有被触发。如果我使用

```
self.myMap.showsUserLocation = TRUE; 
```

该方法已触发，因此问题必须在我创建的类中。

我的.m

```
#import "ContactDetailAnnotation.h"

@implementation ContactDetailAnnotation

@synthesize latitude = _latitude, longitude = _longitude, coordinate = _coordinate;

- (id) initWithCoordinate:(CLLocationCoordinate2D) coordinateArg
{
    self.coordinate = coordinateArg;

    return self;
}

- (id) initWithLatitude:(CLLocationDegrees)lat longitude:(CLLocationDegrees)lng 
{
    self.latitude = lat;
    self.longitude = lng;

    return self;
}

- (CLLocationCoordinate2D) coordinate 
{
CLLocationCoordinate2D coord = {self.latitude, 
                                self.longitude};
return coord;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:19:55.713

您是否将注释添加到地图视图的`annotations`数组中？

**编辑**

这是一个对我有用的基本实现：

MyAnnotation.h：

```
#import <Foundation/Foundation.h>
#import <Mapkit/Mapkit.h>

@interface MyAnnotation : NSObject <MKAnnotation>
{
    CLLocationCoordinate2D coordinate;
}

@property (nonatomic) CLLocationCoordinate2D coordinate;

- (id) initWithCoordinate:(CLLocationCoordinate2D)aCoordinate;

@end 
```

我的注释.m

```
#import "MyAnnotation.h"

@implementation MyAnnotation

@synthesize coordinate;

- (id) initWithCoordinate:(CLLocationCoordinate2D)aCoordinate
{
    coordinate = aCoordinate;
    return self;
}

@end 
```

我的视图控制器：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CLLocationCoordinate2D coordinate = {42.149,-74.9384};
    MyAnnotation *myAnnotation = [[MyAnnotation alloc] initWithCoordinate:coordinate];
    [self.mapView addAnnotation:myAnnotation];
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id < MKAnnotation >)annotation
{
    MKAnnotationView *annotationView = [self.mapView dequeueReusableAnnotationViewWithIdentifier:@"Identifier"];
    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"Identifier"];
    }
    return annotationView;
} 
```

# git - 打开存储库的 git 命令是什么

> ID：10176703
> 
> 赞同：4
> 
> 时间：2012-04-16T15:06:12.010
> 
> 标签：git

我正在使用提供图形用户界面的 Git Extension 学习 Git。

但是我必须做一个我在 Git Extension 中没有找到的命令。（我想这样做`git checkout -- myFile`以恢复它）。

所以我打算尝试使用命令行...但是当我启动 Git Bash 时，我无法打开我正在处理的存储库。我没有找到任何类似的命令（ git-open 或类似的东西）

知道我缺少什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T15:08:15.940

您不需要“打开”您的存储库，只需打开`cd`目录即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:11:50.870

从 GitExtension，打开您的存储库，然后您可以打开 git bash 并做您想做的事。

或者，启动 git bash，然后 cd 到你的代码所在的目录（在顶层），但是，我发现从 GitExtension 开始更容易，所以我不必考虑我在顶部输入了什么我的来源

# android - iOS / Android 上的增强现实 3D 动画

> ID：10176705
> 
> 赞同：0
> 
> 时间：2012-04-16T15:06:20.040
> 
> 标签：android, ios, animation, augmented-reality

在问这个问题之前，我已经阅读了很多关于 SO 的问题。我们目前正在开发适用于 iOS 和 Android 的增强现实应用程序，以显示一些 3D 模型。我们正在使用 Vuforia 框架。

显示静态对象在 Vuforia 中效果很好，但我们希望显示一个动画的 3D 模型。我们知道使用 Unity 框架可以做到这一点。问题是这不是免费的，而且对我们的目的来说太贵了。

我们想知道是否有另一种显示动画 3D 模型的方式？也许使用另一个框架或什么？

如果我有一个像 Maya 或类似的应用程序，我将如何导出动画以便在 iPhone 上使用它们。

提前非常感谢，

弗洛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T04:57:29.537

我用过junaio，在那里你可以使用带有小动画的md2模型。Junaio 是一个免费的框架。我也使用过osgart（用于台式电脑）并使用openscenegraph 库完成了骨架动画。我认为 osgart 现在有一个移动版本，它应该支持动画。但是 osgart for mobile 并不是免费的。

此外 metaio 和 Total immersion 库也支持动画。

osgart,metaio 和 TL 甚至支持一些复杂的动画

希望这可以帮助。

# android - Android：将数组移动一个位置以制作动态图

> ID：10176707
> 
> 赞同：0
> 
> 时间：2012-04-16T15:06:24.987
> 
> 标签：android

**更新：**

现在像魅力一样运行。在 Alex Klimashevsky 的帮助下，他为我指明了正确的方向。基本上我将 for 循环网格化了。这应该是：

```
for(int a = 1; a < x.length; a++) {
    y[(a)]=yprev[a-1];
}
y[0]=value_i/10;

for(int a = 0; a < x.length; a++) {
    yprev[a]=y[a];
} 
```

谢谢！

也许有人可以告诉我出了什么问题：这是一个非常基本的绘图程序，但现在已经足够好了。

**我在视图类的顶部声明了这一点：**

```
private int[] x = {50, 60, 70, 80, 90, 100, 110,120,130};
private int[] y= {500,500,500,500,500,500,500,500,500};
private int[] yprev={500,500,500,500,100,500,500,500,500}; 
```

**我把它放在 onDraw 中：**

```
for(int a =  (x.length-1); a ==0; a--) {
    y[(a+1)]=yprev[i]; //Shift everything one place to the right
}
y[0]=value/10; //Fill in the newest value for temperature on the first index

for(int a =  (x.length); a ==0; a--) {
    yprev[a]=y[a]; //Store the latest array, such it can be re-used in the next cycle**
}

paint.setStyle(Paint.Style.STROKE);
paint.setStrokeWidth(2);
paint.setColor(Color.RED);

Path path = new Path();
path.moveTo(x[0], y[0]);
for(int b = 1; b < x.length; b++) {
    path.lineTo(x[b], y[b]);
}
canvas.drawPath(path, paint); 
```

绘图工作，但不知何故它不会改变我的情节。新值每次都绘制在第一个索引上，所有其他值保持 500。有什么想法吗？

最好的问候，凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:11:19.793

首先看得到这个：

```
for(int a =  (x.length-1); a >=0; a--) {
    y[(a+1)]=yprev[i]; //Shift everything one place to the right
}
y[0]=value/10; //Fill in the newest value for temperature on the first index

for(int a =  (x.length); a >=0; a--) {
    yprev[a]=y[a]; //Store the latest array, such it can be re-used in the next cycle**
} 
```

在您的代码中，此循环不起作用

# sql - 从每一列获取不同的数据

> ID：10176709
> 
> 赞同：-1
> 
> 时间：2012-04-16T15:06:35.443
> 
> 标签：sql

我有一个名为 article 的表

```
Article_type   Article_Shade  Article_tool
A              Red            FF
A              Orange         KK
B              Red            FF 
```

我想使用单个 SQL 查询获取每列的不同值。

我已经尝试了很多选项，如果可能，请告诉我。

**预期输出**应为：

*   `A B`为了`Article_type`
*   `Red Orange`为了`Article_Shade`
*   `FF KK`为了`Article_Tool`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:51:20.230

我假设这接近您的预期输出：

```
Aricle_type    Article_Shade  Article_tool
A              Orange         FF
B              Red            KK 
```

虽然可以创建一个查询来执行此操作，但这似乎是荒谬的。单独对不同值的每一列进行排序并将它们一起显示将向我们显示可能不存在的记录。您将任意组合表示不在表中的实体的属性。在这种情况下，您无法找到可以执行此操作的 SQL 函数是有充分理由的。其他评论者也提出了为什么这是不可能的好点，例如数据类型（您可能会将所有内容都转换为字符串），以及可能导致空值的不同值计数（这与在这种情况下，任何其他任意非空行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:27:32.343

这是在 Oracle 上完成的，不确定您使用的是什么数据库，但希望这能给您一个想法。

```
CREATE TABLE article (article_type VARCHAR2(100), article_shade VARCHAR2(50), article_tool VARCHAR2(75));

INSERT INTO article VALUES ('A','Red','FF');
INSERT INTO article VALUES ('A','Orange','KK');
INSERT INTO article VALUES ('B','Red','FF');

COMMIT;

SELECT column_name
     , val
 FROM (
   SELECT DISTINCT 'article_type' column_name
                  , Article_type  val
               FROM  article
    UNION ALL
    SELECT DISTINCT 'article_shade' column_name
                  , Article_Shade   val
               FROM  article
    UNION ALL
    SELECT DISTINCT 'article_tool' column_name
                  , Article_tool   val
               FROM  article
) a 
```

输出：

```
 COLUMN_NAME     VAL
1   article_type    B
2   article_type    A
3   article_shade   Orange
4   article_shade   Red
5   article_tool    FF
6   article_tool    KK 
```

**注意：** 如果您尝试使用 3 个单独的列（例如，一列用于 article_type，一列用于 article_shade，以及一列用于 article_tool）来获取此结果，这是没有意义的，因为每一列可能有不同数量的不同值。

# .net - 具有本机依赖项的 .NET 项目。如何设置构建配置？

> ID：10176711
> 
> 赞同：2
> 
> 时间：2012-04-16T15:06:38.977
> 
> 标签：.net, visual-studio, build

假设我的解决方案包含两个项目*A*和*B*。项目*A*引用了项目*B*。项目*B*参考了第 3 方程序集*C*。*C*依赖于一些本机 dll - 它们应该与*C*程序集放在同一目录中，以便*C*工作。

我想要实现的是：当我构建项目*A*时，它的构建目录应该包含下一个文件：

```
A.dll
B.dll
C.dll
Native_Lib_For_C_1.dll
...
Native_Lib_For_C_N.dll 
```

**我有什么选择？**

我试图为项目*B*编写构建后操作以将本机 dll 复制到输出目录。但是，当我构建*A*本机 dll 时，它们将进入*B*的输出目录，而不是*A*的输出目录。

*当然，我可以为项目A*编写相同的 Post-Build 操作，但它违反了 DRY 原则，因为事实上我的解决方案中有很多项目，如*A*、*B*和*C*。

另一种选择是为我的所有项目设置相同的输出目录，但这不是理想的解决方案，因为我更喜欢某些项目构建到它们自己的目录中。

# java - 是否为 HttpParameters 自动填充 POST 和 URL？

> ID：10176715
> 
> 赞同：-1
> 
> 时间：2012-04-16T15:06:54.557
> 
> 标签：java, android, oauth-2.0

我是否需要指定 POST 和 URL 作为参数。我尝试了多种方法，但我得到了一个不正确的签名。

例如

```
 parameters.put("HTTP Method", "POST").
 parameters.put("URL", "Example.com"). 
```

或者它会自动填充：

```
HttpRequestAdapter _request_ = new HttpRequestAdapter(new HttpPost("Example.com"));
            HttpParameters _requestparameters = new HttpParameters();
            OAuthMessageSigner _signer = new HmacSha1MessageSigner(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T22:43:28.043

它会自动填充：

```
 HttpRequestAdapter _request_ = new HttpRequestAdapter(new HttpPost("Example.com") 
```

我的签名不正确，因为我没有正确设置消费者密码和令牌密码。

# python - 在 winpdb 中以编程方式禁用“捕获未处理的异常”模式

> ID：10176716
> 
> 赞同：1
> 
> 时间：2012-04-16T15:06:57.363
> 
> 标签：python, debugging, winpdb

我正在使用[winpdb](http://winpdb.org/)调试 python 脚本。我想默认关闭“trap unhandled exceptions”模式。手动附加 winpdb 调试器并在每次重新启动时单击闪电按钮的工作量太大。

理想情况下，我会在脚本的开头做这样的事情

> 导入 rpdb2；
> rpdb2.start_embedded_debugger('密码', timeout=0, trap_unhandled=False)

但不幸的是，trap_unhandled 参数不存在。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:37:11.690

这似乎有效：

```
import rpdb2; rpdb2.start_embedded_debugger('mypassword')
rpdb2.g_debugger.set_trap_unhandled_exceptions(False) 
```

# shell - 搜索我们知道部分单词的文件，但在 Korn Shell 中搜索通配符的文件太多

> ID：10176717
> 
> 赞同：1
> 
> 时间：2012-04-16T15:07:02.533
> 
> 标签：shell, search, scripting, wildcard, ksh

我正在尝试查找我知道部分名称的文件，假设文件名的一部分是“abc”，但文件可能是 abc123 或 123abc 等...

但是，我无法使用通配符搜索的文件太多（我看到其他人谈论的文件太多错误，显然如果文件太多，您不能使用通配符）。

我听说可以使用 For 循环来实现这一点，但我似乎运气不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:56:46.183

```
find . -name '*abc*' -print 
```

所以外壳不必扩展通配符。迭代结果：

```
while IFS= read -r filename; do
    do something with "$filename"
done; < <(find . -name '*abc*' -print) 
```

或者

```
find . -name '*abc*' -print | xargs some_command_that_takes_filenames_as_arguments 
```

# oracle - 有没有办法在指定提交计数时执行 INSERT INTO SELECT 语句？

> ID：10176722
> 
> 赞同：3
> 
> 时间：2012-04-16T15:07:20.250
> 
> 标签：oracle, oracle11g

数据库：甲骨文 11g

有没有办法执行以下操作：

```
INSERT INTO T1
    (V1, V2)
COMMIT EVERY X
AS
SELECT (V1, V2) FROM T2; 
```

我知道如何遍历光标，但我正在寻找更精简的东西。

PL/SQL 很好，但没有循环。
使用 SQL 提示也很好。

如果这只是甲骨文无法处理的事情，那么悲伤就会接踵而至（大多数情况下我只是好奇，因为我已经有另一种方法在起作用）。

注意：该应用程序有数千亿条记录。每天创造数百万。INSERT INTO SELECT 不适用于如此大的数据集。特别是当有同样大的集合并行运行时。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T15:13:51.340

Oracle 不允许语句具有临时提交，不。这样做会违反 ACID 数据库的基本属性。如果语句在 N 行失败，会发生什么？Oracle 将无法回滚以前提交的行。它不知道哪些行已处理，哪些行未处理。因此，您的声明将部分成功，并且您的数据库将处于未知状态。使用关系数据库的主要好处之一是完全避免这种结果。

你为什么要首先做一个临时提交？这将使您的代码变慢并导致您使用更多资源。这将迫使您编写一堆代码以使您的流程可重新启动（即，您必须跟踪哪些行已被处理，哪些未处理，以便您可以回滚部分完成的更改或在失败时重新启动流程在中间）。它会让你的代码更难测试。几乎没有充分的理由进行临时提交。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T15:19:06.090

Oracle 不提供这样的 SQL 结构。使用带有游标的 PL/SQL 和 FORALL 语句可以为您完成...但是：

幸好甲骨文没有提供这样的悲伤。Oracle 是建立在 ACID 原则之上的 RDBMS。I 代表隔离，在 Oracle 中默认为 READ COMMITTED。这意味着其他并发事务无法在中途看到您的事务。它可以防止其他会话看到不一致的数据。使用 RDBMS 的基石之一。

这给我们带来了这里最重要的问题：为什么你会想要这样的构造？

我希望不要害怕“大”交易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:19:49.660

我没有检查它，但也许`bulk inserts`你可以做到这一点：

```
DECLARE
  TYPE ARRAY IS TABLE OF T2%ROWTYPE;
  l_data ARRAY;
  x NUMBER;

  CURSOR c IS SELECT V1, V2 FROM T2;

BEGIN
    OPEN c;
    LOOP
    FETCH c BULK COLLECT INTO l_data LIMIT x;

    FORALL i IN 1..l_data.COUNT
    INSERT INTO T1 VALUES l_data(i);

    COMMIT;

    EXIT WHEN c%NOTFOUND;
    END LOOP;
    CLOSE c;
END; 
```

**但作为贾斯汀凯夫，为什么？**

# wkhtmltopdf - 如果文本太长，WkHtmlToPDF 会显示一个很小的 pdf

> ID：10176725
> 
> 赞同：5
> 
> 时间：2012-04-16T15:07:32.527
> 
> 标签：wkhtmltopdf

即使我将页面大小设置为 A4，我也不确定如何克服这个问题，我会假设我的页面大小将保持不变并且我的内容将被正确包装？

*注意*我正在使用包装器**WkHtmlToXSharp**创建我的 pdf

![在此处输入图像描述](../Images/ca0114626f21ecab9f523f652765007c.png)

问题：如果您输入未拆分的字符串，即一个长字符串 - 我在上图中显示的内容将会发生。我该如何解决？WkhtmlToPDF 是否有一些选项可以包装文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T14:51:04.203

这是我在 gimli ( [https://github.com/walle/gimli](https://github.com/walle/gimli) ) 中使用的 css 来解决这个问题。

[https://github.com/walle/gimli/commit/39981dda4de003902748c3e089aa42da809af6a9#L0R145](https://github.com/walle/gimli/commit/39981dda4de003902748c3e089aa42da809af6a9#L0R145)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:36:34.593

如果您想要 CSS 解决方案，您可以尝试为溢出的元素设置宽度，然后使用 进行测试`word-wrap: break-word;`，为了控制问题`overflow:hidden;`，`white-space: nowrap`其中一些或组合可能对您有用。至于通用的 wkhtmltopdf 解决方案……如果你找到了，我也想要一个！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:49:34.793

你需要打破页面。添加这个很容易：

```
<div style='page-break-after:always'></div> 
```

例如，如果你有一个长表，你可以像下面的伪代码那样做：

```
 if ($row > 100) {
   echo "</table>"; 
   echo "<div style='page-break-after:always'></div>";
   echo "<table>"; } 
```

# c++ - C++ 使用结构指针更新数据成员

> ID：10176729
> 
> 赞同：3
> 
> 时间：2012-04-16T15:07:47.957
> 
> 标签：c++, struct

我有一个简单的问题。我有一个全局函数（setData），它带有一个指向我的测试结构的指针。当我尝试更新数据成员时，它不起作用。

```
#include <iostream>
using namespace std;

struct test {
    int data;
};

void setData(test* tp, int newData) {
    test t = *tp;    // I think the problem is here.
    t.data = newData;
}

void printData(test* tp) {
    test testStruct = *tp;
    cout << testStruct.data;
}

int main()
{
    test ts;
    ts.data = 22;
    setData(&ts, 44);
    printData(&ts);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:10:47.940

> `test t = *tp; // I think the problem is here.`

是的你是对的！您的代码正在复制、修改它，然后立即丢弃。

您应该改为修改通过指针传入的结构：

```
tp -> data = newData; 
```

注意`->`操作员。它是`.`成员访问运算符的指针等价物。它相当于

```
(*tp).data = newData; 
```

但它看起来更好。

您可以在 中做同样的事情`printData`，尽管这只是效率低下：

```
cout << tp -> data; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:10:37.203

您所做的`setData`是创建一个新结构，并在那里更改了数据。
你想要做的是：

```
void setData(test* tp, int newData) {
    tp->data = newData;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:10:37.763

```
test t = *tp; 
```

在做作之前复制您的对象。因此，修改丢失。您需要访问指向的对象：

```
tp->data = newData; 
```

我建议您在深入了解 C++ 之前阅读更多关于指针和结构的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T15:10:47.037

```
test t = *tp;    // I think the problem is here 
```

是的。您现在已经制作了本地副本并对其进行了修改。相反，您应该只使用：

```
tp->data = newdata; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T15:12:06.437

在

```
void setData(test* tp, int newData) {
    test t = *tp;    // I think the problem is here.
    t.data = newData;
} 
```

`setData`声明它自己的 a 副本`test`。如果你想调整调用者的`test`，你必须通过指针或引用来做：

```
void setData(test* tp, int newData) {
    t->data = newData;
} 
```

或者

```
void setData(test* tp, int newData) {
    test &t = *tp;    // I think the problem is here.
    t.data = newData;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T15:10:11.180

您的`setData()`功能只是修改您的本地*副本*`struct`。

您需要将其复制回来：

```
void setData(test* tp, int newData) {
    test t = *tp;
    t.data = newData;
    *tp = t;
} 
```

或者直接修改全局：

```
void setData(test* tp, int newData) {
    tp->data = newData;
} 
```

后一个版本更有效和更直观。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-16T15:11:38.960

您只是在修改局部变量。改为这样做

```
tp->data = newData; 
```

# sql-server-2005 - 亚音速配置错误

> ID：10176734
> 
> 赞同：0
> 
> 时间：2012-04-16T15:08:27.763
> 
> 标签：sql-server-2005, orm, configuration, subsonic

**我收到错误：**

构建配置`Web.config` 无法为提供程序设置配置。您的配置设置有错误（您记得在配置文件中配置 SubSonic 吗？）。“为 SubSonicService 创建配置节处理程序时出错：无法从程序集“SubSonic”加载类型“SubSonic.SubSonicSection”。（Web.config 第 13 行）' 提供程序有问题 - 没有加载，也没有抛出异常。设置 ConfigPath：'Web.config'

但这是我的配置部分，我使用的是**Visual Studio 2010**

```
<configuration>
  <configSections>
    <section name="SubSonicService" type="SubSonic.SubSonicSection ,SubSonic" requirePermission="true" restartOnExternalChanges="true" allowDefinition="MachineToApplication"/>
  </configSections>
  <connectionStrings>
    <clear/>
    <add name="TasksConnection" providerName="System.Data.SqlClient" connectionString="*"/>
  </connectionStrings>
  <SubSonicService defaultProvider="SqlDataProvider" spClassName="SPs" fixPluralClassNames="true">
    <providers>
      <add name="SqlDataProvider" type="SubSonic.SqlDataProvider, SubSonic" connectionStringName="TasksConnnection"/>
    </providers>
  </SubSonicService>
    <compilation>
      <buildProviders>
        <add type="SubSonic.BuildProvider,SubSonic" extension="*.abp"/>
      </buildProviders>
</compilation>
</configuration> 
```

我有一个文件`Builder.abp`，`*`里面有一个文件。同样如文档和其他站点中所述，当我构建 Web 应用程序项目时它不会自动生成类，我必须手动调用 subsonic 指挥官 (sonic.exe) 可执行文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T00:26:21.160

我从未使用过构建器，但基本思想是有两种不同的方法。生成器将在*执行*时动态创建 Subsonic 服务，而指挥官将实际生成用于*编译*的代码文件。

*   如果您正在生成物理类，则不需要 buildProvider 部分 - 也许这会让它感到困惑？
*   在您的代码中，您是否使用已编译的类来执行查询？
*   尝试更标准的连接字符串？

# c# - 对象相等在 .NET 中的行为不同

> ID：10176737
> 
> 赞同：6
> 
> 时间：2012-04-16T15:08:34.690
> 
> 标签：c#, .net

我有这些陈述，它们的结果就在它们附近。

```
string a = "abc";
string b = "abc";

Console.Writeline(a == b); //true

object x = a;
object y = b;

Console.Writeline(x == y); // true

string c = new string(new char[] {'a','b','c'});
string d = new string(new char[] {'a','b','c'});

Console.Writeline(c == d); // true

object k = c;
object m = d;

Console.Writeline(k.Equals(m)) //true

Console.Writeline(k == m); // false 
```

为什么最后一个平等给我 false ？

问题是为什么 ( x == y ) 为真 ( k == m ) 为假

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T15:12:45.347

在字符串的情况下，当使用引用相等时，`==`运算符被重载以测试值相等。`object`

由于`c`and`d` *是*字符串，当你`Equals`在`k`and中使用时`m`，会使用重载方法。

并且`c == d`是`true`出于上述原因 -`string`由于运算符重载，因此在类型上使用值相等。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-16T15:24:36.277

```
string a = "abc"; 
string b = "abc"; 

Console.Writeline(a == b); //true 
```

*由于String Interning*，字符串引用对于相同的字符串是相同的

 *```
object x = a; 
object y = b; 

Console.Writeline(x == y); // true 
```

因为引用相同，所以从相同引用创建的两个对象也是相同的。

```
string c = new string(new char[] {'a','b','c'}); 
string d = new string(new char[] {'a','b','c'}); 
```

在这里，您创建了两个新的字符数组，这些引用是不同的。

```
Console.Writeline(c == d); // true 
```

字符串已重载 == 以按值进行比较。

```
object k = c; 
object m = d; 
```

由于前面的引用不同，所以这些对象也不同。

```
Console.Writeline(k.Equals(m)) //true 
```

`.Equals`使用重载的 String`equals`方法，再次按值比较

```
Console.Writeline(k == m); // false 
```

在这里我们检查两个引用是否相同......它们不是

关键是弄清楚相等性何时比较引用或值。

除非另有重载，否则对象会比较引用。

结构，除非另有重载，否则会比较值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T15:11:10.647

因为它们是两个不同的对象引用。内置的比较是比较它们是否指向同一个实际对象。

由于*String Interning*，`a`和`b`都是对同一个字符串对象的引用。

`c==d`为真，因为正在使用字符串相等运算符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T15:29:10.293

```
 string c = new string(new char[] {'a','b','c'});
   string d = new string(new char[] {'a','b','c'});

   Console.WriteLine(c == d); // true

   object k = c;
   object m = d;

   Console.WriteLine(k.Equals(m)); //true

   Console.WriteLine(k == m); // false 
```

生成 IL 代码，如下所示：

```
IL_0001:  ldc.i4.3    
IL_0002:  newarr      System.Char
IL_0007:  dup         
IL_0008:  ldtoken     <PrivateImplementationDetails>{61BB33F4-0CA5-4733-B259-764124AD1A79}.$$method0x6000002-1
IL_000D:  call        System.Runtime.CompilerServices.RuntimeHelpers.InitializeArray
IL_0012:  newobj      System.String..ctor
IL_0017:  stloc.0     
IL_0018:  ldc.i4.3    
IL_0019:  newarr      System.Char
IL_001E:  dup         
IL_001F:  ldtoken     <PrivateImplementationDetails>{61BB33F4-0CA5-4733-B259-764124AD1A79}.$$method0x6000002-2
IL_0024:  call        System.Runtime.CompilerServices.RuntimeHelpers.InitializeArray
IL_0029:  newobj      System.String..ctor
IL_002E:  stloc.1     
IL_002F:  ldloc.0     
IL_0030:  ldloc.1     
IL_0031:  call        System.String.op_Equality   //STRING EQUALITY 
IL_0036:  call        System.Console.WriteLine
IL_003B:  nop         
IL_003C:  ldloc.0     
IL_003D:  stloc.2     
IL_003E:  ldloc.1     
IL_003F:  stloc.3     
IL_0040:  ldloc.2     
IL_0041:  ldloc.3     
IL_0042:  callvirt    System.Object.Equals
IL_0047:  call        System.Console.WriteLine
IL_004C:  nop         
IL_004D:  ldloc.2     
IL_004E:  ldloc.3     
IL_004F:  ceq         //CEQ INSTRUCTION: **VALUES** EQUALITY !
IL_0051:  call        System.Console.WriteLine 
```

如您所见，最后一条指令调用[CEQ](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ceq.aspx)指令，该指令将比较推入堆栈的值相等。压入堆栈的值是两个盒装字符串的*引用*，它们*不*相等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T18:12:35.220

在 Bob2Chiv 的基础上，我尝试了 VB（VS2010）中的等价物：

```
 Dim a As String = "abc"
    Dim b As String = "abc"

    Console.WriteLine(a = b) ' True

    Dim x As Object = a
    Dim y As Object = b

    Console.WriteLine(x = y) ' True

    Dim c As String = New String(New Char() {"a"c, "b"c, "c"c})
    Dim d As String = New String(New Char() {"a"c, "b"c, "c"c})

    Console.WriteLine(c = d) ' True

    Dim k As Object = c
    Dim m As Object = d

    Console.WriteLine(k.Equals(m)) ' True

    Console.WriteLine(k = m) ' True (Yes, True!!)

    Console.WriteLine(k Is m) ' False (Like in C#)

    Console.WriteLine(a Is b) ' True (Like in C#) 
```

（至少我认为它是等价的 - 我欢迎对此进行纠正。）

`==`道德？：在 C# 中要小心- 更喜欢`.Equals()`值的比较是所需的？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-16T15:13:34.393

当你说`string1 == string2`时，比较使用`string`类型的重载`==`运算符，它比较字符串的值。

当您说 时`object1 == object2`，即使在这种情况下它们是字符串，它们也不能作为字符串来查找运算符。所以比较使用默认`==`操作符，它比较*引用*是否相等。这意味着，如果两个对象不是完全相同的对象，它将返回 false。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-16T15:30:56.710

正如[MSDN 上的 C# FAQ 中](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/29/when-should-i-use-and-when-should-i-use-equals.aspx "MSDN 上的 C# 常见问题解答")所见- 编译器不能使用重载方法并回退到比较引用。

更大的问题是为什么它在第一个对象比较中成功。我最好的猜测是成功，因为 a 和 b 都给出了相同的参考。对于 c 和 d，您正在强制使用不同的引用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-16T15:32:28.123

`String`重载了相等运算符，以便您可以`==`用于值比较。因此

`a == b //true`.

当您将它们向下转换为对象时，您只是在比较引用。 `String`如果另一个字符串实例已经可用，则查看内部[字符串池](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)，否则将创建一个新实例并将其添加到池中。所以实际上`a`,`b`和`x`甚至`y`是同一个引用，这就是为什么

`x == y //true`.

使用 的[构造函数](http://msdn.microsoft.com/en-us/library/ttyxaek9.aspx)，`String`即使存在另一个具有相同值（长度和字符序列）的字符串，您也会强制 .NET 创建一个新实例。这就是为什么

`k == m //false`

[http://en.csharp-online.net/CSharp_String_Theory%E2%80%94String_intern_pool](http://en.csharp-online.net/CSharp_String_Theory%E2%80%94String_intern_pool)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-17T21:09:38.317

运算符比较引用（内存地址），而`==`.Equals 比较实际对象值。在字符串的情况下，你很幸运，两个相同的字符串可以经常引用同一个地址。托管语言的乐趣之一。*

# pari-gp - Pari/GP 将整数与实数进行比较

> ID：10176738
> 
> 赞同：0
> 
> 时间：2012-04-16T15:08:50.707
> 
> 标签：pari-gp

我想测试一个整数是否是 Pari-gp 中的完美幂。该测试`sqrt(n)==floor(sqrt(n))`适用于测试正方形，但对于其他所有幂都失败：`sqrtn(n,k)==floor(sqrtn(n,k))`使用`k >=3`.

我想可能是因为一个数字是实数，另一个是整数。该测试仍然适用于正方形。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:05:19.620

1.  您应该直接使用`ispower()`, 和 `ispower(, k)`以获得完美的 k 次幂。

2.  该`factor`方法的问题在于，对于大输入，它会非常慢，而`ispower`在多项式时间内运行。

3.  该测试`sqrtn(n,k)==floor(sqrtn(n,k))`不可靠，因为 PARI 不保证精确舍入：即使 sqrtn() 的值在数学上是精确整数，PARI 也可能返回比精确答案稍大或稍小的任何实数。你会`round`比 with好一点`floor`。虽然它仍然不可靠，但这是一个或多或少可行的解决方案

    y = 圆形(sqrtn(n, k)); y^k == n

（只要`realprecision`足够大）。但是 ispower 从模块化测试开始，只要数字不是 k 次方，它就会大大加快速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:55:06.883

素数幂的因式分解只涉及一个基数（素数因子本身）。因此，执行测试的更好方法是：

```
isPrimePower(x) = {
  matsize(factor(x))[1]==1
} 
```

这是前 10 个数字的测试：

```
for(i=0,10,print(i,"->",isPrimePower(i)))
0->1  (yes, p^0)
1->0
2->1  (yes, 2^1)
3->1  (yes, 3^1)
4->1  (yes, 2^2)
5->1  (yes, 5^1)
6->0
7->1  (yes, 7^1)
8->1  (yes, 2^3)
9->1  (yes, 3^3)
10->0 
```

对于复合基数，我必须假设您的意思是某个单基数的完美功率因数提高到指数 e >= 2。否则任何 n = n^1。即使现在我们也有 1 的极端情况，因为 1=1^k。

```
isPerfectPower(x) = { 
  local(e);
  if(x==1, return(0));
  factors = factor(x);
  e = factors[1,2];
  if(e < 2, return(0));
  for(i=2,matsize(factors)[1],
      if(factors[i,2] != e, return(0));
  );
  return(1);
} 
```

再次测试：

```
> for(i=1,20,print(i,"->",isPerfectPower(i)))
1->0
2->0
3->0
4->1
5->0
6->0
7->0
8->1
9->1
10->0
11->0
12->0
13->0
14->0
15->0
16->1
17->0
18->0
19->0
20->0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T01:02:06.940

您可以测试 frac(sqrtn(261,3)+epsilon) < 2*epsilon 其中 epsilon 是您认为可以接受的一个非常小的数字，例如 1E-15

我写它为什么而不仅仅是“... < epsilon”，因为有时你会得到 4.0000000001，但你也可以得到 3.9999999999。

# c++ - 在 C++ 中删除匿名对象

> ID：10176744
> 
> 赞同：1
> 
> 时间：2012-04-16T15:09:08.653
> 
> 标签：c++, memory-management, new-operator

在 C++ 中，如果您将匿名对象作为参数传递给命名对象方法，那么当您删除命名对象时，匿名对象会被删除吗？

[我](http://www.webtoolkit.eu)用于项目的库需要指向其大多数对象方法的对象的指针，例如：

```
WContainerWidget::addWidget(WContainerWidget* widget) {/*...*/} 
```

在他们的示例中，他们在构造这些对象时经常使用 new 运算符。

```
WContainerWidget* aFoo = new WConainerWidget(/*args*/);
aFoo->addWidget(new WText(/*args*/)); 
```

如果我`delete aFoo`，匿名`WText()`对象会被删除吗？

我是否相信他们的实现会在不对源代码进行排序的情况下处理这些删除，还是应该避免示例行为，并自己明确命名/删除所有内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T16:56:30.810

## 是的，小部件拥有所有权，它会自动销毁：

[http://www.webtoolkit.eu/wt/doc/reference/html/overview.html](http://www.webtoolkit.eu/wt/doc/reference/html/overview.html)

> 在小部件层次结构中插入小部件时，所有权将转移到树中的父级。

这是一个定义错误的接口。从老派开始，人们仍在定义接口，如 C 接口。

The passing of pointers is silly idea as there is no concept of ownership associated with it as such modern C++ libraries have shifted to using the concept of smart pointers. This provides a mechanism to document in the code (and enforce by the compiler) the concept of pointer ownership.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T15:12:06.370

不是自动的，没有。`WContainerWidget`对象需要知道它“拥有”该对象`WText`，并且需要确保某些东西在适当的时间删除它。

传统上，这意味着它`WContainerWidget`有一个`Widget*`值列表，在`~WContainerWidget`析构函数中，它遍历并调用`delete`每个存储的值。

您还可以使用智能指针（例如`auto_ptr`，如果这就是您所拥有的，`shared_ptr`或者来自 Boost 或来自 C++11 的）来保存每个`WText*`值，这将确保对象在智能指针被销毁时被释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:11:41.473

答案很简单：否 (*)

你得到一个悬空指针，最后是内存泄漏

（*不是那么绝对）

有一些方法可以在保留对对象的控制权的同时进行**new （重载类的 new 运算符）。**然而，这并不常见。更常见的方法是使用对象工厂。在这种情况下，您不会看到新的

# jquery - jQuery 和多项选择选项

> ID：10176746
> 
> 赞同：0
> 
> 时间：2012-04-16T15:09:08.947
> 
> 标签：jquery, coldfusion

我正在尝试使用 HTML 中的一个 <select> 选项发送值 - 这是我的 <select>，我什至不确定我是否设置了正确发送到 jQuery 的值。

```
<select id="needapproval" name="needapproval">
  <option value="">* * * Select * * *</option>
  <cfloop query="GetApprover">
    <option VALUE="{'theID': '#GetApprover.rar_ID#',
      'roomname': '#GetApprover.theroom#'}">Request Number - #GetApprover.rar_ID#
      - Room/Gate Name -#GetApprover.theroom#</option>
  </cfloop>
</select> 
```

好的，一旦我选择了上面的值，我就会`onchange`在 jQuery 中执行一个事件。发送的值：

```
{'theID': '29', 'roomname': 'red room'} 
```

如何获取这两个值并将它们设置为 vars - 下面是我的 jQuery，我知道这是错误的：

```
var theID = $("#needapproval.theID").val();
var roomname = $("#needapproval.roomname").val(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:38:26.160

您可以通过对标记进行一些修改来获取这些值，如下所示，

```
<select id="needapproval" name="needapproval">
<option value="">* * * Select * * *</option>
<cfloop query="GetApprover">
<option VALUE='{"theID":"#GetApprover.rar_ID#","roomname":"#GetApprover.theroom#"}'>Request Number - #GetApprover.rar_ID# - Room/Gate Name -#GetApprover.theroom#</option>
</cfloop>
</select> 
```

注意 VALUE attr 中的单引号和双引号。

然后您可以`JSON.parse()`对值进行操作以获取`theID`and `roomname`。见下文，

```
$(function () {
    $('#needapproval').change(function () {
        var selectedVal = $(this).val();        
        var jsonObj = JSON.parse(selectedVal);
        alert(jsonObj.theID + " " + jsonObj.roomname);
    });
}); 
```

[**演示**](http://jsfiddle.net/skram/W2M6G/)

# visual-studio-2010 - VS2010中有opencv库配置的小技巧吗？

> ID：10176747
> 
> 赞同：0
> 
> 时间：2012-04-16T15:09:12.643
> 
> 标签：visual-studio-2010, opencv, sift

我想使用 OpenCV 来实现 SIFT。我是新手，我在正确配置它时遇到了一些困难。

我正在使用 OpenCV 2.3.1 和 Visual Studio 2010。我按照[这个](https://stackoverflow.com/questions/7011238/opencv-2-3-c-visual-studio-2010/7014918#7014918)来配置它们，它在那个演示中工作。当我尝试运行此[SIFT 演示](https://stackoverflow.com/a/6705842/1285444)时，出现错误 LNK2019。我认为原因是我对库的依赖不完整。我刚刚在项目中添加了 core.lib 和 highgui.lib。我不知道这个 SIFT 演示究竟需要什么。

这是我想知道的：

1.  在我上面提到的 SIFT 演示中，需要哪些库来处理错误 LNK2019？
2.  如何为特定项目选择 opencv 库？有小费吗？
3.  大多数使用场景有没有常见的库依赖配置？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:15:09.520

你肯定需要 opencv_features2d231.lib

你怎么知道，你还需要哪些其他库？你可以

1.  只需将它们全部添加
2.  [在文档](http://opencv.itseez.com/trunk/)中找出您可能需要哪个库

# android - Android：I/O 异常，对于某些特定的 WiFi，无法从 WiFi 转换到 3G

> ID：10176748
> 
> 赞同：0
> 
> 时间：2012-04-16T15:09:18.653
> 
> 标签：android, wifi, httpurlconnection, 3g

在我的 Android 应用程序中，有一致且频繁的服务器请求和响应。如果我使用 WiFi 启动应用程序，则退出并使用 3G 重新启动。对服务器的请求失败并出现 IO 异常。

观察结果：这只发生在少数 WiFi 范围内。在 WiFi-3G 过渡期间，它在我家工作得非常好。WiFi（家庭和办公室）都使用 WPA/WPA2 安全协议，但表现出不同的行为。我什至尝试在发生 IO 异常时创建一个新的套接字，但它没有帮助。但它在 10-15 分钟后工作正常。应用程序自动连接到正确的网络并启动应用程序！

这里可能是什么问题？

这是一段代码

```
public String readFromUrl(String urlString) {

    try {
        URL url = new URL(urlString);
        urlConnection = (HttpURLConnection) url.openConnection();

        BufferedReader in = new BufferedReader(new  InputStreamReader(urlConnection.getInputStream()));
        String line;
        while ((line = in.readLine()) != null)
            output.append(line);
        return output;
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

它失败但有异常：

```
java.net.SocketTimeoutException: Connection timed out
 W/System.err( 2615): at org.apache.harmony.luni.platform.OSNetworkSystem.connect(Native Method)
 W/System.err( 2615): at dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:357)
 W/System.err( 2615): at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:204)
 W/System.err( 2615): at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:437)
 W/System.err( 2615): at java.net.Socket.connect(Socket.java:1002)
 W/System.err( 2615): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:75)
 W/System.err( 2615): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:28:30.627

可能发生的情况是，当手机从 3G 切换到 Wifi 时，您正在进行连接。手机现在不知道如何从 3G 切换到 WiFi，因此必须首先断开 3G 连接，因此 IOException

# c# - 在 C# 项目中参考 MMDevice API

> ID：10176750
> 
> 赞同：3
> 
> 时间：2012-04-16T15:09:29.217
> 
> 标签：c#, visual-studio-2010, audio, windows-7, windows-vista

我一直在阅读有关Windows Vista/7 中的[MMDevice API的信息。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd316556%28v=vs.85%29.aspx)有谁知道如何在 C# 项目中引用此 API。如果您可以提供使用 API 的简单示例，则可以加分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:08:39.913

干得好。[Vista Core Audio API 主音量控制](http://www.codeproject.com/Articles/18520/Vista-Core-Audio-API-Master-Volume-Control)

# javascript - 在 $.queue 中验证 XHTML

> ID：10176751
> 
> 赞同：1
> 
> 时间：2012-04-16T15:09:30.637
> 
> 标签：javascript, xhtml, w3c, validation

我正在使用以下 JavaScript：

```
.queue(function() {
            $('#num').html('10');
            element
                .html('First line<br /><span id="small">Small text<br />Small text again<br />small text again here</span>')
                .dequeue();
        }) 
```

当我通过 W3C 的验证器运行此程序时，它显示“文档类型不允许此处的元素 br/span”。

还有另一种方法可以让它验证吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:35:17.617

除非您使用 XHTML（除非您首先遇到其他几个错误），否则您不应该收到该错误，在这种情况下，您必须跳过“假装您的 XHTML 是 HTML”的许多障碍。

在这种特定情况下，这就是[Embedded Style Sheets and Scripts](http://www.w3.org/TR/xhtml-media-types/#C_4)的指导方针。

简而言之，您应该将 JS 移动到外部文件或将其包装在 CDATA 标记中。

我建议改用 HTML（除非您实际上在生产链中使用 XML 工具，而大多数人没有这样做）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T19:31:46.847

使用`pre`而不是多个`span`'s 和`br`'s：

```
'<pre>First line
Small text
Small text again
small text again here</pre>' 
```

以下代码使用 JavaScript 控制台在 stackoverflow.com 上运行，并使用[W3C 标记检查器](http://validator.w3.org/check)进行验证：

```
$("body").queue( function() { $(this).html("<pre>hi there</pre>") } ).dequeue(); 
```

这将最低限度地产生：

```
<!doctype html>
<html>
 <head><title></title></head>
 <body>
 <pre>hi there</pre>
 </body>   
</html> 
```

# oracle - 在 Oracle 中增加 BLOB 数据类型大小的语法是什么？

> ID：10176754
> 
> 赞同：0
> 
> 时间：2012-04-16T15:09:41.223
> 
> 标签：oracle, oracle10g

文档说：

```
ALTER TABLE <table name>

ADD (<lobcol> <LOBTYPE> <LOB_clause_same_as_for_create>) |

MODIFY LOB (<lobcol>) (

            [PCTVERSION <version_number>]

            [ { CACHE | NO CACHE [{LOGGING | NOLOGGING}]

                      | CACHE READS [{LOGGING | NOLOGGING}]

              }

            ]

) |

MOVE [ONLINE] [<physical_attributes>] [TABLESPACE <tablespace_name>]

[LOGGING | NOLOGGING] [<LOB_clause_same_as_for_create>] 
```

举个例子：

```
ALTER TABLE test_lob

MODIFY LOB (image) (

    STORAGE (NEXT 1M)

    CACHE

); 
```

我用我的表名和列名尝试了这个：

```
ALTER TABLE  <table name>

MODIFY LOB (<column name>) (

    STORAGE (NEXT 10M)

); 
```

但是我得到一个 ORA-25150 ALTERING of extent parameters not allowed 错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:14:29.853

您的代码中缺少表名

```
ALTER TABLE

MODIFY LOB (<column name>) (
STORAGE (NEXT 10M)

); 
```

应该

```
ALTER TABLE TABLE_NAME
MODIFY LOB (<column name>) (

STORAGE (NEXT 10M)

); 
```

# servlets - HttpServletRequest.getCookies(): 数组，为什么 isHttpOnly() 函数总是返回 false？

> ID：10176755
> 
> 赞同：1
> 
> 时间：2012-04-16T15:09:44.047
> 
> 标签：servlets, cookies, servlet-3.0, httponly

嗨，到目前为止，我正在尝试使用 httponly cookie 这是我编写的代码

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
    resp.setContentType("text/html");
    PrintWriter out = resp.getWriter();

    Cookie cookie = new Cookie("mycookie", "hi");
    resp.addCookie(cookie);

    cookie.setHttpOnly(true);
    boolean bol = cookie.isHttpOnly();
    out.println("<br>Cookie is Marked as HttpOnly = " + bol);
    Cookie[] cookies = req.getCookies();
    if (cookies != null) {
        for (int i = 0; i < cookies.length; i++) {

        out.println("<br/> From Cookies Array Name is: " 
            + cookies[i].getName());
        out.println("<br/> From Cookies Array Value is: "
            + cookies[i].getValue());
        out.println("<br/> From Cookies Array isHttpOnly: "
            + cookies[i].isHttpOnly());
        }
    }
    out.println("<br/> <br/>");

    cookie.setHttpOnly(false);
    boolean bol1 = cookie.isHttpOnly();
    out.println("<br>Cookie is Marked as HttpOnly = " + bol1);
    Cookie[] cookies1 = req.getCookies();
    if (cookies1 != null) {
        for (int i = 0; i < cookies1.length; i++) {
        out.println("<br/> From Cookies Array Name is: "
            + cookies[i].getName());
        out.println("<br/> From Cookies Array Value is: "
            + cookies[i].getValue());
        out.println("<br/> From Cookies Array isHttpOnly: "
            + cookies[i].isHttpOnly());
        }
    }
    out.close();
} 
```

印刷

```
 Cookie is Marked as HttpOnly = true
From Cookies Array Name is: mycookie
From Cookies Array Value is: hi
From Cookies Array isHttpOnly: false

Cookie is Marked as HttpOnly = false
From Cookies Array Name is: mycookie
From Cookies Array Value is: hi
From Cookies Array isHttpOnly: false 
```

请注意，我使用的是 JBoss 7，并且在 web.xml 配置中我已添加但我认为缺少某些内容

```
<session-config>
        <cookie-config>
            <http-only>true</http-only>
        </cookie-config>
    </session-config> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T21:36:07.770

浏览器**不会**回传 cookie 值以外的信息，如 httponly、secure、maxage、path 等。浏览器只发回与 cookie 名称关联的 cookie 值。

您可以通过在 Web 浏览器的开发人员工具集中跟踪 HTTP 流量来亲自查看。在 Chrome/Firebug/IE9 中按 F12 并打开“网络”或“网络”选项卡，然后浏览请求和响应标头。您会看到只有`Set-Cookie`响应标头在 name=value 旁边包含附加 cookie 参数，并且`Cookie`请求标头仅包含 name=value。

不用担心，浏览器会记住额外的 cookie 参数。如果您不确定，您始终可以通过创建具有相同名称和路径的新 cookie 来覆盖它。

### 也可以看看：

*   [RFC6265 - Cookie 规范](https://www.rfc-editor.org/rfc/rfc6265)
*   [维基百科 - HTTP cookie](http://en.wikipedia.org/wiki/HTTP_Cookie)

# android - 崩溃时的 Android “Toast” 与崩溃的一些细节

> ID：10176758
> 
> 赞同：-2
> 
> 时间：2012-04-16T15:09:59.200
> 
> 标签：android

当强制关闭发生时，我如何发送一个 Toast/通知，而不是显示强制关闭或有关崩溃的一些详细信息。我知道，这是一项艰巨的任务，但我应该从哪里开始呢？我需要 ACRA 吗？

感谢你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:12:54.223

ACRA 可能是您更好的选择，因为它允许您接收崩溃的详细信息，并向用户显示消息。它还附带了一个很棒的集成指南，并允许您记录自定义数据。

[http://code.google.com/p/acra/](http://code.google.com/p/acra/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:56:09.287

您可以尝试扩展 Application 类，然后在 onCreate 方法中执行以下操作：

```
@Override
public void onCreate ()
{
    Thread.setDefaultUncaughtExceptionHandler(
            new UncaughtExceptionHandler(){

                @Override
                public void uncaughtException(Thread arg0, Throwable arg1) {
                    //mytoast here

                }

            }
    );
    super.onCreate();

} 
```

不要忘记在清单文件中指定您正在使用这个新类：

```
 <application android:icon=""  android:label="@string/app_name" android:name="your.class"> 
```

# android - Android 中用户定义的 Activity 主题

> ID：10176761
> 
> 赞同：1
> 
> 时间：2012-04-16T15:10:15.203
> 
> 标签：android, android-3.0-honeycomb, android-4.0-ice-cream-sandwich, android-theme

我想知道是否可以在 Android 中为活动使用用户定义的主题。我目前在我的一个应用程序中为用户提供了五个主题（在 styles.xml 文件中定义）之间的选择，但如果我可以提供一个使用具有不同背景的用户定义主题的附加选项，那就太好了图片来自用户的 SD 卡。

如果这有什么不同，我的目标是 Android 3.0+。更改布局的背景图像不是有效的解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:53:16.460

调用`setBackgroundDrawable()`以`Window`在运行时从您从外部存储加载的位图更改整个窗口的背景。

# ruby-on-rails - 如何调试黄瓜测试？

> ID：10176762
> 
> 赞同：8
> 
> 时间：2012-04-16T15:10:15.813
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, tdd, cucumber

我有：

```
When /^(?:|I )follow "([^"]*)"(?: within "([^"]*)")?$/ do |link, selector|  
  with_scope(selector) do
   click_link(link)
  end
end 
```

我打电话给：

```
Background:
  Given I am an existing admin user
  When I follow "CLIENTS" 
```

我的 HTML 是这样的：

```
<a class="active" href="/companies"><h2>CLIENTS</h2></a> 
```

我不断收到这个错误：

```
.F-.F--U-----U

(::) failed steps (::)

no link with title, id or text 'CLIENTS' found (Capybara::ElementNotFound)
(eval):2:in `click_link'
./features/step_definitions/web_steps.rb:54:in `block (2 levels) in <top (required)>'
./features/step_definitions/web_steps.rb:14:in `with_scope'
./features/step_definitions/web_steps.rb:53:in `/^(?:|I )follow "([^"]*)"(?: within "([^"]*)")?$/'
features/client_add.feature:8:in `When I follow "CLIENTS"' 
```

我尝试了一些事情：

```
When I follow "<h2>CLIENTS</h2>" 
```

甚至尝试了`save_and_open_page`哪个应该打开浏览器并仍然得到相同的结果：

```
Given /^I am an existing admin user$/ do
  role_user = FactoryGirl.create(:role_user)
  admin_user = role_user.user
  sign_in(admin_user)
  save_and_open_page
end 
```

有没有办法打印 HTML 或找出我的测试失败的原因？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T15:23:25.143

我最喜欢调试黄瓜步骤的方法是调用`binding.pry`.

确保`pry`gem 包含在您的 gem 文件中`:development, test`，然后将`binding.pry`调用放在引发错误的行之前。然后，您应该能够使用该`ls`命令自省环境，如果您可以找到正在运行的 capybara 会话（如果 capybara 会话存储为名为 page 的变量）`page.html`并`page.text`查看可见的内容。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-17T03:52:24.127

添加以下内容作为 features/support/debugging.rb 的内容有助于调试失败的步骤：

```
# `LAUNCHY=1 cucumber` to open page on failure
After do |scenario|
  save_and_open_page if scenario.failed? && ENV['LAUNCHY']
end

# `FAST=1 cucumber` to stop on first failure
After do |scenario|
  Cucumber.wants_to_quit = ENV['FAST'] && scenario.failed?
end

# `DEBUG=1 cucumber` to drop into debugger on failure
After do |scenario|
  next unless ENV['DEBUG'] && scenario.failed?
  puts "Debugging scenario: #{scenario.title}"
  if respond_to? :debugger
    debugger
  elsif binding.respond_to? :pry
    binding.pry
  else
    puts "Can't find debugger or pry to debug"
  end 
end

# `STEP=1 cucumber` to pause after each step
AfterStep do |scenario|
  next unless ENV['STEP']
  unless defined?(@counter)
    puts "Stepping through #{scenario.title}"
    @counter = 0
  end
  @counter += 1
  print "At step ##{@counter} of #{scenario.steps.count}. Press Return to"\
        ' execute...'
  STDIN.getc
end 
```

通过设置一个环境变量，可以让Cucumber使用各种调试工具，也可以通过设置多个环境变量来组合它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:31:19.383

您的测试失败，因为您必须导航到一个页面（打开它）。您可以使用 capybara 的内置方法来做到这一点：

```
visit path_to(url) 
```

您也可以使用标准的 ruby​​ 调试器进行调试。请参阅[此导轨指南](http://guides.rubyonrails.org/debugging_rails_applications.html#debugging-with-ruby-debug)以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-20T02:59:08.173

根据我的经验：

*   首先：您应该在 capybara 中使用“save_and_open_page”方法来检查该页面上的内容并考虑并查看它是否呈现到您期望的正确页面。（我认为页面有“客户”链接尚未显示）
*   第二：您更改重定向到页面的路由路径具有“客户”链接

希望它可以帮助你。

p / s：如果您按照我的指示进行操作，但它不起作用。请给我您的功能和步骤定义。我会尽力帮助你

# javascript - 在委托控件“AdditionalPageHead”中添加多个用户控件

> ID：10176766
> 
> 赞同：0
> 
> 时间：2012-04-16T15:10:19.680
> 
> 标签：javascript, sharepoint, user-controls

我这里有个问题。我正在尝试将 jquery 添加到我在 sharepoint 中的所有页面中，并且 jquery 附带了脚本文件，我在其中使用了我需要的功能。

所以我开始创建一个用户控件，如此处所述：http: [//blogs.msdn.com/b/kaevans/archive/2011/04/06/adding-jquery-to-every-page-in-sharepoint-with-委托控制.aspx](http://blogs.msdn.com/b/kaevans/archive/2011/04/06/adding-jquery-to-every-page-in-sharepoint-with-delegate-controls.aspx)

但不是只有这条线：

```
<script type="text/javascript" 
    src="/_layouts/jquery-1.5.2.min.js" /> 
```

我添加了一行：

```
<script type="text/javascript" 
    src="/_layouts/scripts.js" /> 
```

之后，我在布局文件夹中添加了这两个文件，并创建了链接控件的 elements.xml：

```
 <Control Id="AdditionalPageHead"
        Sequence="90"
        ControlSrc="~/_CONTROLTEMPLATES/Safran.Sagem.Workflows/Scripts.ascx" /> 
```

我的问题是它只包含一个文件。它总是第一个。所以这里是 jquery.js，如果我切换顺序，它会是 script.js

我试图创建两个控件和两个元素，但似乎只启用了一个。

你有什么主意吗 ？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:00:15.550

我的错，

```
<script type="text/javascript" src="/_layouts/jquery-1.5.2.min.js"></script>
<script type="text/javascript" src="/_layouts/scripts.js"></script> 
```

代替 ：

```
<script type="text/javascript" src="/_layouts/jquery-1.5.2.min.js" />
<script type="text/javascript" src="/_layouts/scripts.js" /> 
```

# wpf - 如何禁用 ListItems 而不禁用嵌入其中的 CheckBox？

> ID：10176767
> 
> 赞同：2
> 
> 时间：2012-04-16T15:10:21.550
> 
> 标签：wpf, xaml, checkbox, combobox, listitem

我正在开发一个 ComboBox，它的项目上必须有一个 CheckBox。我已经实现了一项功能来参与这些复选框的更改。该功能的一部分从复选框建立组合框的内容（即，当我选择“梨”、“苹果”和“蓝莓”时，组合必须检查这些项目，并且其内容必须是“梨；苹果；”蓝莓'）。

我已经做到了。但是，由于我使用的是 ComboBox，因此每当我单击其复选框之外的项目时都会选择项目，因此内容会被项目的文本覆盖。这个 xaml 显示了它是如何编写的：

```
<ComboBox   IsEditable="True" DataContext="{Binding}" 
        IsTextSearchEnabled="False" IsReadOnly="True">
<ComboBox.ItemTemplate>
    <DataTemplate >
        <StackPanel Orientation="Horizontal">
            <CheckBox IsChecked="{Binding   Path=EstaSeleccionado, 
                                            Mode = TwoWay, 
                                            UpdateSourceTrigger=PropertyChanged}"/>
            <TextBlock Text="{Binding Path=Item.Value}"/>
        </StackPanel>
    </DataTemplate>
</ComboBox.ItemTemplate> 
```

如何在不禁用复选框的情况下禁用列表项？

**更新** 在您的回答中尝试跳过事件。我知道这可以或多或少地干净和容易地完成；但出于可维护性的考虑，我更喜欢基于 property-xaml 的解决方案（即禁用 ListBoxItem 上的事件，除了复选框的屏幕区域等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:19:19.603

Checkbox 控件在 Checkbox 右侧有一个内容区域，用于添加文本、图形等。不要将文本设置在单独的文本块中，而是使用 CheckBox 的 Conent 标记。

```
<ComboBox.ItemTemplate>
    <DataTemplate>
        <CheckBox IsChecked="{Binding Path=EstaSeleccionado, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <TextBlock Text={Binding Path=Item.Value}/>
        </CheckBox>
    </DataTemplate>
</ComboBox.ItemTemplate> 
```

注意：Content 标签不需要显式设置，假设打开和关闭 Checkbox 标签之间的控件是 Content。

**更新：**

对不起，我误解了你的问题。您看到的问题是组合框默认行为在 SelectionChanged 上是将 SelectedText 设置为新的 SelectedItem。要更改此行为，您有两种选择：

1.  覆盖后面代码中的 SelectionChanged 事件处理程序并以编程方式设置 SelectedText
2.  将 SelectedText 绑定到 ViewModel 中的属性。当绑定尝试更改值时，让您的属性检查组合框绑定的源并从选中的项目构建您的 SelectedText 值。

我推荐选项＃2，如下所示：

代码：

```
public class CheckItem // This probably should implement INotifyPropertyChanged
{
     public string Name { get; set; }
     public bool IsChecked { get; set; }
}

public class ViewModel : INotifyPropertyChanged
{
    public ObservableCollection<CheckItem> ComboItems { get; set; }

    public string SelectedText 
    {
         get { return selectedText; }
         set { 
             StringBuilder sb = new StringBuilder();
             foreach (var item in ComboItems)
                 if (item.IsChecked)
                     sb.Append(String.Format("{0}; ", item.Name));
             selectedText = sb.ToString();
             // raise property changed here...
         }
    }
} 
```

XAML：

```
 <ComboBox ItemsSource="{Binding Path=myViewModel.ComboBoxItems}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <CheckBox IsChecked="{Binding Path=IsChecked, Mode=TwoWay>
                <TextBlock Text={Binding Path=Name}/>
            </CheckBox>
        </DataTemplate>
    </ComboBox.ItemTemplate>
 <Combobox/> 
```

抱歉，我手边没有编译器，所以其中一些可能无法编译。

# .net - 无需 Internet exlorer 即可播放 Flash 内容的免费 .NET 库

> ID：10176771
> 
> 赞同：0
> 
> 时间：2012-04-16T15:10:31.300
> 
> 标签：.net, flash

我正在开发应该使用 flashvars 参数打开远程 flash 对象的桌面应用程序。

我尝试使用冲击波闪存对象库，但似乎 flashvars 选项不起作用。我也有使用 webbrowser 控制和填充 flash 对象的临时解决方案。但是 webbrowser 需要安装了 flash 播放器的 Internet Explorer。我可以使用我的安装程序安装 Flash Player，但无法在 Internet Explorer 中自动安装 Flash。

所以我需要一些简单的解决方案，用户无需安装任何东西，我正在寻找一些带有 flashvars 选项的免费 flash 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:25:23.660

为什么不使用[Adob​​e Air](http://www.adobe.com/devnet/air/articles/packaging-air-apps-desktop.html)并将其部署为 Windows 应用程序？

# android - andengine：使用 addContentView 在 andengine 之上添加一个包含 UI 控件的视图

> ID：10176776
> 
> 赞同：6
> 
> 时间：2012-04-16T15:10:41.357
> 
> 标签：android, user-interface, android-edittext, andengine, android-2.3-gingerbread

我正在尝试在 andengine 游戏之上创建一个 EditText 以充当游戏中的聊天框。我使用的方法**在 Android 2.2.1 IDEOS 2, Emulator Android 2.1, Emulator Android 2.2, Emulator Android 2.3 上运行良好**。

**更新 25/APR/2012**：最近在三星 Galaxy S SGH-T959 Android 2.1-Update1 上进行了测试，除了轻微的对齐问题外，它工作正常，这是三星 Android 2.3 的问题。

以下设备**不会**在 andengine 游戏活动的顶部显示 EditText 控件：

1.  三星 Y S5360 安卓 2.3.6
2.  三星 Galaxy 551 安卓 2.3.6

这就是我在游戏活动中所做的

```
chatEditText = new EditText(this);
chatEditText.setSingleLine(true);
chatEditText.setId(1);
chatEditText.setHint(" ");

tableLayout = new TableLayout(this);
tableLayout.setVerticalGravity(Gravity.BOTTOM);

tableLayout.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

tableLayout.setHorizontalGravity(Gravity.CENTER_HORIZONTAL);
tableLayout.setPadding(25, 25, 25, 308);
tableLayout.addView(chatEditText);
LayoutParams lp = new ViewGroup.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);

this.addContentView(tableLayout, lp);
tableLayout.setVisibility(View.GONE); 
```

为了显示/隐藏控件，我根据需要使用处理程序将其可见性设置为 View.VISIBLE 或 View.GONE。

以上适用于 IDEOS 2 Android 2.2.1 和模拟器，但不适用于三星 Galaxy 551、三星 Galaxy S 5360，其他设备需要测试。请帮忙。

上面的方法在这里描述：[AndEngine forum, display UI in andengine](http://www.andengine.org/forums/gles1/type-a-phrase-in-game-t3279-10.html#p15532) 建议了另一种方法，一个弹出对话框将在这里显示 EditText [AndEngine helper class Input Text](https://github.com/aliHafizji/AndEngineHelperClasses/blob/master/src/org/andengine/helperclasses/InputText.java)，但这不适合我的用例。

想使用标准的 EditText，否则唯一的出路是在 AndEngine 中实现自己的假键盘和假输入精灵，限制硬件和国际键盘可能不可用。任何帮助将不胜感激。

# django - django - 我如何从父母那里访问孩子的 Meta？

> ID：10176778
> 
> 赞同：0
> 
> 时间：2012-04-16T15:10:45.313
> 
> 标签：django

我有以下表格，我想`Meta.model`从父母那里知道孩子的属性。我怎么做？

```
class Profile_form(forms.ModelForm):

    @property
    def user_type(self):
        #access child meta here

    class Meta:
        abstract = True

class Form_A(Profile_form):
    class Meta:
        model = Some_model 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:13:20.850

尝试使用用于`self._meta`访问.`Meta``self`

# vim - .vimrc TAGS 命令错误

> ID：10176779
> 
> 赞同：0
> 
> 时间：2012-04-16T15:10:46.917
> 
> 标签：vim, exuberant-ctags

我在 linux 上使用 etags 和 vim 来浏览源代码（*.c，*.h）。我创建了一个 TAGS 文件 bu 给出命令：

```
etags --members *.c *.h 
```

TAGS 文件被创建，但是当我开始浏览时，说其中一个名为 1.c 的源文件定义了一个 C 结构变量并在其函数定义之一中使用（结构名称是其他 1.h 文件中的 typedef）。我在 vim 中打开文件 1.c，然后`CTRL - ]`将光标放在该结构类型上，etags 不会浏览到具有此结构声明的头文件 1.h。

这只发生在我的 .vimrc 中有下面的行时，当我在两行下面评论时，基于 etags 的源浏览工作正常。

```
set TAGS=./TAGS;$HOME
set tags=./tags;$HOME 
```

我试图告诉 vim 在哪里找到 TAGS 文件。从当前文件夹开始直到我的主目录。这里有什么不正确的？

上述命令的正确语法是什么？

ctags/etags 是否使用 vim 浏览，显示从哪里调用所有给定函数？如果是，查看该命令的命令是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:48:40.350

*   **定位标签文件**

    Vim 的设置区分大小写，因此`set TAGS=`无效。您必须使用`set tags=`小写字母。

    Vim 将在第一次匹配时停止，所以你不能指望它会在`tags` *and* `TAGS`中搜索标签。这些文件可以依次搜索：

    ```
    set tags=./tags,./TAGS;$HOME " 1\. tags, 2\. TAGS, 3.… until $HOME 
    ```

    另外，搜索不是由 执行的`etags`，它是由 Vim 自己完成的。

*   **跳转到函数调用**

    不，`ctags`只有`etags`索引声明。要跳转到使用情况，您需要[`cscope`](http://cscope.sourceforge.net/)

# javascript - 根据窗口和页面大小更改类。

> ID：10176782
> 
> 赞同：0
> 
> 时间：2012-04-16T15:10:50.553
> 
> 标签：javascript, css

我的页面底部有一个 DIV。

基本上，如果页面高度小于窗口，我希望它的类是“一流的”。

如果页面高度高于窗口，我希望它的类是“二等”。

谁能帮我吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:13:04.867

它看起来像`document.body.offsetWidth`并且`offsetHeight`会给你当前窗口的宽度和高度。

将其与页面的高度进行比较。

或 jquery`height()`以及`width()`来自 jquery docs 的窗口：

```
$(window).height();   // returns height of browser viewport
$(document).height(); // returns height of HTML document 
```

[http://api.jquery.com/height/](http://api.jquery.com/height/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:14:34.050

你需要比较：

```
window.innerHeight 
```

和

```
document.body.offsetHeight 
```

# ruby-on-rails-3 - 将带有 ActiveMessaging 的 Rails 2 应用程序转换为 Rails 3，有几个问题

> ID：10176783
> 
> 赞同：1
> 
> 时间：2012-04-16T15:10:50.630
> 
> 标签：ruby-on-rails-3, activemessaging

我目前正在将一个相当大的 Rails 2 应用程序转换为 Rails 3。该应用程序在其插件形式中使用 activemessaging。它主要与 Amazon SQS 一起用于文件上传等。我在messaging.rb 中定义了我使用的所有队列，并且有现有的处理器来处理消息。在 Rails 3 版本中，我切换到 activemesssaging gem，版本 0.9.0。除了摆脱旧插件版本之外，我还需要对现有的消息传递.rb 和处理器做些什么吗？另外现在我手动启动轮询脚本，是一样的吗？我似乎找不到太多关于 Rails 3 和 activemessaging 的信息，所以如果有人能给我我需要做的基本步骤，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:19:17.307

我不记得使用 gem 有什么大的不同——我没有改变 messing.rb 或 broker.yml 的加载方式，你仍然需要自己启动轮询器。

一般来说，Rails 3 并没有太大的区别，这就是为什么你没有看到太多关于它的原因。

# iphone - 如何将 Xcode 从 4.2.1 升级到 4.3.2？

> ID：10176785
> 
> 赞同：0
> 
> 时间：2012-04-16T15:10:55.293
> 
> 标签：iphone, ios, xcode

有办法吗？我只需要在 5.1 的 iPod 上运行我的应用程序，而我当前的版本不会让我......？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T15:23:13.797

这很简单。周末，当我将 iPad 和 iPhone 升级到最新的 iOS 5.1 时，我遇到了同样的问题。我当时安装的 Xcode 版本在升级后无法为我的设备运行应用程序。

在做了一些事情之后，我能够在升级后的设备上成功运行应用程序。下面我介绍几个简单的步骤供您遵循：

1) 下载最新版本的 Xcode，目前是 4.3.2，其中包括适用于 Mac OS X 10.7 Lion 和 iOS 5.1 的 SDK，适合将您的应用程序安装到您的 iOS 设备上

[http://itunes.apple.com/us/app/xcode/id497799835?ls=1&mt=12](http://itunes.apple.com/us/app/xcode/id497799835?ls=1&mt=12)

2) 在安装过程中，安装窗口会询问您是否要删除以前的版本。删除以前版本的 Xcode 并让它安装新版本。

3) 安装最新版本的 Xcode 后，您可以运行 Xcode 应用程序并打开您最近的项目。

4）一旦你打开了你的项目，你可能需要，当然在我的情况下，我必须，代码签名并将你的项目指向构建设置中正确的开发配置文件设置。

5）一旦所有代码签名都正确，您可以在左上角选择您想要构建的内容，确保您已连接您的 iOS 设备以及显示 iPhone 模拟器 5.1 到您名字的 iphone 的按钮

6）然后Xcode将成功构建到您的设备上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:12:38.187

从应用商店下载。

[http://itunes.apple.com/us/app/xcode/id497799835?ls=1&mt=12](http://itunes.apple.com/us/app/xcode/id497799835?ls=1&mt=12)

# javascript - 如何同步检查用户是否具有 publish_stream 权限？

> ID：10176787
> 
> 赞同：0
> 
> 时间：2012-04-16T15:11:03.050
> 
> 标签：javascript, facebook

当有人点击一个按钮时，我想检查用户是否有 publish_stream 权限，如果他有，我们继续我们的功能。

我目前是通过以下方式制作的：

```
function facebookLogin(callback)
{
    FB.login(function(response) {
       if (response.authResponse) {
            console.log('We should save the access token');
            callback();
       } else {
         console.log('User cancelled login or did not fully authorize.');
         jGrowl('Without authorizing our application you will not be able to access all features.');
       }
     }, {scope: 'publish_stream,'});
} 
```

回调是用户给我 publish_stream 权限后我想要执行的操作。在执行 facebook 登录功能之前，我想先检查是否有权限。

为什么我想要它同步？因为我需要在点击偶数处理程序中执行此操作，否则浏览器开始抱怨我随机打开弹出窗口，所以我认为它应该同步完成。

非常感谢，经过漫长的一天后，对 js 和 facebook 感到绝望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:21:18.550

我不确定这是否是最好的解决方案，但我使用 PHP 使用 Graph API 检查权限，然后使用 JavaScript 对结果进行操作：

```
<?php
$url = 'https://graph.facebook.com/me/permissions?access_token=' . $token;
$permissions = json_decode(file_get_contents($url));
$has_publish_permission = isset($permissions->data[0]->publish_stream);
?>
var can_publish = <?php echo $has_publish_permission ? 'true' : 'false' ?>; 
```

# encryption - PayPal 加密购物车数据

> ID：10176794
> 
> 赞同：2
> 
> 时间：2012-04-16T15:11:25.497
> 
> 标签：encryption, paypal, expressionengine

我正在使用 ExpressIonEngine，并且有一些模块 Simple Commerce，它没有提供我想要的。

创建了我需要的所有东西，但后来我想改进它，所以购物车中的所有东西都应该加密，所以没有人可以改变 DOM 或任何东西...... :)

这是我正在加密的示例数组，但是当我向 PayPal Sandbox 提交表单时，我收到如下错误：**我们无法解密证书 ID。**

```
Array
(
    [cmd] => _cart
    [business] => info@SomeDomain.com
    [cert_id] => *********** // hidden off course
    [upload] => 1
    [return] => http://SomeDomain.com/shop/thanks/
    [cancel_return] => http://SomeDomain.com/shop/
    [lc] => EN
    [currency_code] => EUR
    [custom] => 1
    [item_number_1] => 711
    [item_name_1] => Some Issue 03
    [amount_1] => 5.90
    [quantity_1] => 3
    [item_number_2] => 708
    [item_name_2] => Some Issue 02
    [amount_2] => 1.00
    [quantity_2] => 5
) 
```

形式是这样的：

```
 <form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----
MIIIMwYJKoZIhvcNAQcDoIIIJDCCCCACAQAxggEwMIIBLAIBADCBlDCBjjELMAkG
A1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQw
EgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UE
AxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJ
KoZIhvcNAQEBBQAEgYB9MZM/Jb6UbHsStVMBFfO5fz6oTNZ0dGIf2H3h7vfyLdE3
kWuMiN46EUcguses8uDezIbIsEGH/7J4sgJqsqfA5kf3nwmuzETCpGOBgzTK96JK
QwABQPBsh4uwVC0Hbq9jT1KuYF35pmdFRo5ZG6UHzsG4jgSiSJjqdVVW7zyI3DCC
BuUGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIYDLQTJqKWGGAggbAhQqnhMGMbBDw
h5S8t773pBpyeGsOQ7HLcl7l90IZtjlEm2KeaXb7LYb48ORemaw7dan2HEI6sAqC
IdNuT4LtQnv77CqDbF+zS2jHw2sVumd7frcKjkNPJEivbBzB8w6J5XnuE/sZRsAj
dgrAQdiRouQ5jcdGQttACUliAYUiIAXlTrhQ0YZb+nT1vY9k3j08ynLJtHwolxlN
3a61qYrjk6aItzEfsV9L5aVN7EFsafYqlARlmufXMFA2oyFcI81FF4dDMbxRIFAz
b/pALxdin1nMCcoLnfuvilBi0yz5JvextJWVb5rppgI46Itspev1IoZZbHhPZh72
03WyhbP5AXGTe5pQFvsdJUORIeHcCZII3l9o2/q036FwDTtS80rC7O2dFPPZYSsX
qk09RKRzOasOD58MYhniYbI16lk9v9VM2Z+a345S8gTQxJirlbccBCUodzl//jLo
URBLz99EBcahEx1sXvrmXkFEV+KLAWDewYpVtYloRp7/lFIi7EpbT3STck5g+p1W
m9tT8ckBNxM+j0M+jGZqOXz0PZNOs/Q4XtHIT8hLk7AJNWJAptY150k1WPwstZlt
vNFl8J1rKMeVEw9H6b8vkQAi77KTmXsQdqRBLhGYikRBGYBXoqmd9lSOCacvdhrm
ufladesk/GZeZdk1iGgekL0LW/Sz/QjoCxK4WlDJggjWi9NWFaqcqXmrqvxFTOcg
FopVOnHCMZ4YZdR0VjwiYSiXcu8p5AUbqU3N5bzusMN11phPNA4EgL0/uWCjqz/e
DKnyPNnjYv9JC6xxC7VGgQtjckejAYe+/6FKvfwfqf/e/V2u86FfHs2iTU5DADfd
6DbdR8X6fiKVCt8PqDzg6knrJT3mDElYmL7Wa/Y52pfByqJIEC3WE9zAzuJkRCGT
+Zz6Cgnf9c//ujLK/VMtEdi5l8XGQhA9pIJv7xxiK/mFr0Q5aZKm1BIfWHKG8009
Fb9YUQb+v4eRoh6vknUyuWvNOdbRvhZWczBiTorM40jxFQxPinYdQQsZs4a/I4rI
MGp/a3jxUxuG1kXzdDCK+TfX8qh39UlqZ5gYOYbrS/DItwDLN2wnTrKuJO23BWOK
JXpAOsk/zE3aGV/OUUoMBixqh+xr84s7wPw/67ajatPfh90O2VM7qBW1zngMi60z
qAF/A6FlkLkc66UG9sGMVHKGRJRVg+HVO1lFDTSCoudZzU3RDNgq3FB6lQqyUXy4
0c3lmlj6HD3a4QV/+6Z4xOybCwHLThHj/Ov6nqEWEIO8fK9CxAD/1KhGeMkmhSob
IgZqDtwSLrvIxbpyq6mEjgQJYBcJ2EJW1lAoM9S8Y03gm9dVK1pOU4YgVJEXJToG
tnX5Kq0s2nbD1dEF1SkNo6e+ODkSA7JItrxO8ZtJ4Dnz4OpsXG+sV1r4p3Q/zjz8
KLdMAMck+6N4FOawor44tWOoSEHwnuJee+BumzfnrdsuawbBl7F+O07/f0oRweA8
om80O2HImB7pOKFudWYFO64LQMB+EkFuRHBWb6ESmyc22BvMV3dRHxYK4GyC4Nas
6cVQbK2Eo9/Ip1Ld3CQBb/alYIBE0wNSrjVhiE6C4ssu+EZpvwPgb2nx/UHUN3xf
kwr0ZJibFoPRgvsNg14/GJI1HEsko5yM2h3c7Zd0KZyH4NCxFYvNk1dlvl7jPjj7
93hYf4JqbgajzhlltWBJTBiq3i4Kgzm9MBJrl2m1KvhCovWLohz9IjqDUvQ3FWts
GinU4R8Tkd2NNsQ3rgMqtfcl5C3vpTRLlQFO9Ffd5CqCZVD9CmkvYTSLZjvZBEcU
X6+kYo1nYsbEdInH9HoNAXhg1YvuG9jRMlO1e84ut5WKxEluZUVFReID9opovHOU
7ZZv8hT7GJu5frqD8mxEfsRj4B5KOhhyaLJOWEvi0S6NuaZDhAG0GuLbGJkPn4v4
d3aUZjf8ZBotdTCDY14ALMNkv6ri7+75DaFhvkOkHBS/ELsnfDK5d9+uCE9/XQRn
OLSh12a5QE43v0tj8FIDpdqGS9EWJ1c+ob3dG7HeCc8QcVlmDM9NHrQ7PxrFYgvH
ppqRkETXI7bbWkQzXw5OYcL4twF9wRLFwb8MMfGBRwRBS39ScYgfa29xdRahkvNu
HWmAPb03M46bkAWM/PY6XJdJIAuX3qAgrftIEO9D4hDZlxyxs0OVy/ARrKwpPpMK
8/WV9Lf52fz/Kk657eQe5N5+W00Wqpor3bFzP4z6XazxP7bSpNhhOudQx3cKEBlK
LlWYRd867FHu0+vcHr3jri1+VeoUX1f2XxmYNjKHxsDWYBdFbEWN
-----END PKCS7-----">
    <input type="submit" value="Checkout With PayPal" />
    </form> 
```

尝试了2种加密方式。

1.  ExpressionEngine 函数 encrypt_data()。这很好用，但仅适用于一种产品并直接添加到 PayPal 购物车。当我将数据从上述数组传递到相同的加密函数时，PayPal 无法解密证书 ID？！
2.  [也从这里](http://www.stellarwebsolutions.com/en/articles/paypal_button_encryption_php.php)尝试过，但同样的问题...... PayPal 无法解密 certificate_id。

我知道一切正常，因为本机 EE 功能有效。任何人都可以帮助我并建议该怎么做吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T07:38:22.717

[http://blog.scrobbld.com/paypal/protecting-your-payments-with-ewp/](http://blog.scrobbld.com/paypal/protecting-your-payments-with-ewp/)

工作，只需交换证书参数。

# r - 用替换和聚类置换矩阵的列

> ID：10176797
> 
> 赞同：1
> 
> 时间：2012-04-16T15:11:33.390
> 
> 标签：r, hierarchical-clustering

如何用 R 中的替换置换矩阵的列？我找到了一个名为 rmperm {sna} 的函数，但它同时置换了列和行，而我只想置换我的列。

编辑：我必须对矩阵进行 1000 次置换，然后进行层次聚类，这样我就有了 1000 次随机化后的最终树。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:20:55.817

试试这个`sample()`功能。

```
> m <- matrix(as.integer(runif(9,0,9)),ncol=3)
> m
     [,1] [,2] [,3]
[1,]    5    0    5
[2,]    6    0    0
[3,]    2    1    3
> permuted <- m[,sample(ncol(m), 10, replace=TRUE)]
> permuted
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]    5    0    5    5    5    5    0    5    5     5
[2,]    0    0    0    0    6    0    0    0    6     0
[3,]    3    1    3    3    2    3    1    3    2     3 
```

第一个参数`sample()`指定样本的范围 ( `1:x`)，第二个参数指定要选择的项目数 ( `size`)，`replace`参数指定我们是否要使用替换（如果 size > x 则需要）。

# progress-bar - sharpsvn 如何在提交时监控上传进度

> ID：10176804
> 
> 赞同：0
> 
> 时间：2012-04-16T15:11:57.370
> 
> 标签：progress-bar, commit, sharpsvn

我想在提交操作运行时监控传输的字节率

我使用了 SvnClient.Progress 事件，但是

1.  此事件每毫秒触发一次，而不是每秒触发一次
2.  TotalProgress 的事件参数没有给出传输的所有字节数（返回给我 -1）

我的代码是：

```
using (SvnClient cl = new SvnClient()) {
    cl.Progress += new EventHandler<SvnProgressEventArgs>(cl_Progress);
    SvnCommitResult res;
    cl.Commit(PathToFile, new SvnCommitArgs {LogMessage = "Commit message" }, out res);
} 
```

事件处理程序：

```
static void cl_Progress(object sender, SvnProgressEventArgs e) {
     log( e.TotalProgress - e.Progress ) ;
} 
```

# css - StyleableTextField htmlText 的 CSS 属性

> ID：10176810
> 
> 赞同：0
> 
> 时间：2012-04-16T15:12:13.020
> 
> 标签：css, actionscript-3, apache-flex, mobile, flex4

我有一个显示非常基本 HTML 的 StyleableTextField。为了格式化 HTML，我目前使用在 AS3 中声明的样式表。这工作正常，但设计师编辑颜色和东西的效率相当低，所以我需要在我的主 CSS 中包含这些标签。

AS3 CSS 声明如下所示；

```
_styleSheet = new StyleSheet();
_styleSheet.setStyle("p", {fontSize:'15',color:'#FFFFFF', fontFamily: 'Courier New', fontWeight:'bold'}); 
```

这使用通常的方式分配给 StyleableTextField `styleSheet = _styleSheet`。

主 CSS 文件在我的主应用程序中声明如下`<fx:Style source="Main.css"/>`：

我的 CSS 中已经有用于 spark 组件的 CSS 标签，如下所示；

```
s|TextInput
{
   contentBackgroundAlpha: .5;
   contentBackgroundColor: #202020;
   focusColor: #e1333a;
} 
```

但是，我需要解决 CSS 中 StyleableTextfield 的实例（我的应用程序中有其他实例，但只有这个实例显示 HTML 文本）。

有没有人知道如何做到这一点？顺便说一句，从事移动项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:16:12.020

Flex 支持 CSS [id 选择器](http://opensource.adobe.com/wiki/display/flexsdk/CSS+Advanced+Selectors)。

```
#instanceID
{
    ...
} 
```

或者

```
ObjectType#instanceID
{
    ...
} 
```

* * *

我无法彻底测试它，但它似乎对我有用：

```
#_objectName
{
    p: pstyle;
}

.pstyle
{
    fontSize: 15;
    ...
} 
```

# jquery - 验证表单是否填写，HTML jQuery

> ID：10176814
> 
> 赞同：1
> 
> 时间：2012-04-16T15:12:28.577
> 
> 标签：jquery, html, forms, validation

我知道这是一个简单的问题，但是你们都可以帮助我使用以下代码吗？我制作了这个功能来检查表格中是否填写了必填字段。如果它发现其中一个输入是空白的，那么它应该停止并返回 false。如果所有元素都有内容，它应该返回 true。以下函数不起作用，因为我的`return false;`行在 jQuery`.each`函数内。它没有返回我定义的新函数。我该如何处理？

```
function check_form(){
    $('form .required').each(function(){
        if ($(this).val() == ""){
            show_dialog('Please enter a value for ' + $(this).attr('name'));
            return false;
        }
    });

    return true;
} 
```

即使某些必填字段为空，此函数每次都返回 true。

这个小提琴描述了这个问题：http: [//jsfiddle.net/f59t4/2/](http://jsfiddle.net/f59t4/2/)

现在可以了，谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T15:18:03.580

试试这个

```
function check_form(){
    var flag = true;
    $('form .required').each(function(){
        if ($(this).val() == ""){
            show_dialog('Please enter a value for ' + $(this).attr('name'));
            flag =  false;
        }
    });

    return flag;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:29:05.020

假设：

1）您想要所有问题的验证摘要，并且

2）您不希望包含所有空格的字段被视为有效，然后：

```
function checkform () {
    var errors = "";
    var $blankFields = $('form .required').filter(function () {
        return $.trim($(this).val()) === "";
    });
    if ($blankFields.length) {
        $blankFields.each(function () {
            errors += "Please enter a value for " + $(this).attr('name') + "<br />";
        });
        show_dialog(errors);
        return false;
    }
    return true;
} 
```

# javascript - javascript替换不起作用

> ID：10176825
> 
> 赞同：0
> 
> 时间：2012-04-16T15:12:52.953
> 
> 标签：javascript, jquery

我遇到了替换不起作用的问题。

```
alert($('input#membership_edc').next("label").html().replace(/£/g, "")); 
```

输入后标签的值为 24.00 英镑，但我想对该值进行数学运算，然后将其放回新值。它没有删除英镑符号。

怎么了？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:15:34.003

您需要设置从替换返回的值。试试下面，

```
var $label = $('input#membership_edc').next("label");
$label.html($label.html().replace(/£/g, "")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:16:25.983

要读取/修改/写入，请使用*函数参数*版本`.html()`：

```
$('input#membership_edc').next("label").html(function(index, old) {
    var n = parseFloat(old.replace('£', '');
    return n + 10;
}); 
```

将用“34”替换“£24.00”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:17:10.720

没有什么不对。它在[这里](http://jsfiddle.net/m7DyJ/)工作。你确定你的标记没问题吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T15:19:01.273

字符串替换函数*返回*一个新字符串。我认为，字符串本身在 javascript 中是不可变的。正如 Vega 所拥有的那样：

```
// avoid looking this up twice
var label = alert($('input#membership_edc').next("label"); 
// replace and assign
label.html(label.html().replace(/£/g, "")); 
```

编辑：

要从字符串中获取数值：

```
var amount = alert($('input#membership_edc').next("label").html().match(/£\s*([-0-9.]+)/)[1]; 
```

这匹配 £ 之后的数字等（忽略空格），并使用数组中的索引 1，包含第一个组匹配的内容（在括号中）。

```
" £1.45".match(/£\s*([-0-9.]+)/)[1]; // returns "1.45" 
```

请注意，它仍然是一个字符串，因此您可能需要对其执行 parseFloat。

# css - 将图像按排序顺序 MVC WebGrid

> ID：10176828
> 
> 赞同：2
> 
> 时间：2012-04-16T15:12:58.883
> 
> 标签：css, asp.net-mvc, asp.net-mvc-3

当您对 WebGrid 进行排序时，我想在列中放置背景图像

我在视图中的代码如下：

```
@grid.GetHtml(
    fillEmptyRows: true,
    headerStyle: "hearder-grid",
    ... 
             ) 
```

Css 样式中的代码：

```
tr.hearder-grid .asc{
                background: transparent url('/Content/themes/base/Images/asc.png') center right no-repeat;

        }

tr.hearder-grid .desc{
                background: transparent url('/Content/themes/base/Images/desc.png') center right no-repeat;
        } 
```

此代码不起作用

有人可以帮助我吗？

祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T01:10:10.570

你需要一个助手。

```
 public static class SortHelper
     {
       public static MvcHtmlString Direction(this HtmlHelper helper, string columnName)
         {
           string html = "";
           if (columnName.Contains("whatever name you are using to represent descending"))
            {
               html = "▲";
            }
          else
           {
             html = "▼";
           }
           return MvcHtmlString.Create(html);
        }
   } 
```

然后你只需与标题连接

```
 SortDirectionHelper.SortDirection(null, "columnname") 
```

您可以在以下网址中看到更好的示例：

[https://www.youtube.com/watch?v=s4SoNOwbKek](https://www.youtube.com/watch?v=s4SoNOwbKek)

# java - 将布尔 True/False 与 JOptionPane.YES_NO_OPTION 一起使用

> ID：10176832
> 
> 赞同：2
> 
> 时间：2012-04-16T15:13:10.820
> 
> 标签：java, boolean, joptionpane

我在四个单独的对话框中有一系列四个是/否选项，其累积结果将导致十二个单独的链接之一（例如，是/是/是/否 -> 链接 A，是/否/否/是 -> 链接 B 等）。分支逻辑使用布尔值。

这是我到目前为止所拥有的......只是第一个对话框并打印结果以进行验证。

```
public class OutageGuideSelector{
    public static void main(String[] args){
        boolean contactServerUp;
        boolean vistaUp;
        boolean stormOutage;
        boolean vistaCSUp;
//
        int contactServerEntry = JOptionPane.showConfirmDialog(null,
                                 "Is the contact server up", "Please select",
                                 JOptionPane.YES_NO_OPTION);
        System.out.println("result from entry " + contactServerEntry);
        if(contactServerEntry==1) 
           contactServerUp = true;
        else
          if(contactServerEntry==0)
             contactServerUp = false; 
        /* System.out.println(contactServerUp); */
       }} 
```

现在，点击 YES 的结果`0`是返回 a ， NO 的结果是 a `1`。这是正常的吗，似乎违反直觉，并且在 docs.oracle.java 中没有任何内容显示输出值的清晰示例，除了[*这*](http://docs.oracle.com/javase/1.4.2/docs/api/constant-values.html#javax.swing.JOptionPane.YES_NO_OPTION)似乎表明`public static final int YES_NO_OPTION`默认值为 0。

此外，当我取消注释时，该行`System.out.println(contactServerUp);`返回该字段的错误`contactServerUp might not have been initialized`，因此我看不到我的 convert-int-to-boolean 是否正常工作。

第一：看起来 JOptionPane 方法不包括任何布尔返回...除了`getWantsInput()`返回 wantInput 属性的值...所以我假设我已经是最有效的了。我想知道是否有更简单的方法。

其次，我错过了什么阻止我的控制台输出语句识别`contactServerUp`？我放错位置的分号在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:19:02.610

根据[javadoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)，当 showXxxDialog 方法之一返回整数时，可能的值为：

*   YES_OPTION
*   NO_OPTION
*   CANCEL_OPTION
*   OK_OPTION
*   CLOSED_OPTION

您应该针对这些常量进行测试：

```
contactServerUp = (contactServerEntry == JOptionPane.YES_OPTION); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:18:51.537

JOptionPane 对话框返回的值是在类中定义为常量字段的值。

尽管确实可以假设 0 表示假而 1 表示真，但是对于对话框可以具有的不同按钮，这些值是更多的 id。

要知道用户是否按下是或否，您可以将返回值与[此处](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JOptionPane.html#YES_OPTION)描述的常量字段进行比较。例如，在您的情况下：

```
contactServerUp = (contactServerEntry == JOptionPane.YES_OPTION); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T15:21:31.313

由于对话框 JOptionPane 可以有两个以上可能的“答案”，因此布尔值的表示形式很差。您忘记了“是”、“否”和“取消”选项，或者只是一个好的答案。

如果它是今天写的，我怀疑会使用 Enum 而不是 int。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T15:29:41.140

至于第二个问题，编译器不允许访问未初始化的变量。当您执行以下操作时，变量可能未初始化：

```
 if(contactServerEntry==1) 
       contactServerUp = true;
    else
      if(contactServerEntry==0)
         contactServerUp = false; 
```

例如，如果`contactServerEntry == JOptionPane.CLOSED_OPTION`？在这种情况下，您的布尔值永远不会被初始化。您需要`else`在 if-else 链的末尾添加一个子句，或者在开头将 contactServerUp 值初始化为默认值。

# html - HTML 邮件：某些链接在 Outlook 2007 中不起作用

> ID：10176834
> 
> 赞同：4
> 
> 时间：2012-04-16T15:13:30.503
> 
> 标签：html, email, outlook, outlook-2007, html-email

我目前对这个问题一无所知，所以任何帮助，甚至可能导致解决方案的小提示都非常感谢！

我有一个基本上是两列布局的 HTML 邮件，在某些情况下，链接在 Outlook 2007 中变得无响应（它们基本上是可点击的，但点击时不会发生任何事情）。

我为遇到该问题的电子邮件制作了一个尽可能干净的示例。
你可以在这里找到下载：http: [//static.bardiir.net/bugged_message.zip](http://static.bardiir.net/bugged_message.zip)

zip 文件包含以下内容：

*   错误消息为 MHT、EML 和 HTML 文件
*   HTML 版本中使用的图像

如果您不信任 zip，您还可以在此处访问 html 版本：http:
[//static.bardiir.net/bugged_message/html_version.html](http://static.bardiir.net/bugged_message/html_version.html)

当您将邮件发送到 Outlook 2007 客户端时，右侧的列链接 `Stet clita kasd gubergen, no sea takimata sanctus est`将无法单击。

如果您无法从这些源文件中复制，请不要犹豫，我会很乐意向您发送包含错误的消息。

在此先感谢您的帮助:)

**更新：**
该消息最初是在服务器上使用 PHP 生成的，如果有兴趣的话。如果您删除标题图像或当前存在的邮件的某些部分，则链接将变得可点击，因此整个事情的组合似乎会导致问题。

**Update2：**
它可能与此完全相同的错误，但那里没有答案：
[https ://stackoverflow.com/questions/7420195/links-in-right-column-of-table-do-not-work-in-outlook- 2007年](https://stackoverflow.com/questions/7420195/links-in-right-column-of-table-do-not-work-in-outlook-2007)

**更新 3：**
我刚刚发现右边的柱子似乎对任何东西都完全惰性。您甚至不能在那里选择文本（Outlook 2007 将崩溃）。但是，如果您选择链接，然后按回车键，它就可以完美地工作。

**更新4：**
我也有一个完全相同的模板，左列也有，所以基本上只有 td 单元格的顺序发生了变化。有了这个顺序，它总是有效的。主要内容和侧边栏中的链接都运行良好。

**更新 5：** 即使只删除文本，根本没有 HTML 标记，甚至换行符最终都不会启用单击链接。因此，如果您继续缩短上述链接邮件中的每个句子，那么除了文本节点之外，只有几个单词不会触及任何内容，它将再次起作用。

**Update6：** 我已经构建了一个完全有效的错误消息版本，就像答案中建议的那样。你可以在这里找到它：http: [//static.bardiir.net/bugged_message/html_version2.html](http://static.bardiir.net/bugged_message/html_version2.html) 它仍然显示同样的问题，但现在所有的有效性问题也都被删除了。
（毕竟有效性不应该是问题，因为左侧列布局显示了相同的验证问题并且工作正常。大多数验证问题实际上仅在此示例中显而易见，而不是在显示的完整时事通讯中相同的症状。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T00:43:37.380

很难判断 Outlook（愚蠢的 Word 渲染引擎）出了什么问题。您可以尝试在 Outlook 中打开源代码并查看 Outlook 如何重新格式化您的 html 代码。

[我在这里](http://jsfiddle.net/Qnxz8/)使用更简单的 HTML 重新创建了您的电子邮件。希望这能解决您的问题。

需要注意的一些事项：

许多电子邮件客户端拒绝字体属性的 CSS 简写。

`font`尝试将`font-family`属性作为内联样式添加到您的`table`类中以设置字体类型，而不是使用标签。最好不要使用字体间隔，因为它们可能因电子邮件客户端而异。最好将所有样式保持内联，以确保某些客户端不会用他们自己的默认样式表覆盖您的样式表。

例如`<table style="font-family: Arial, Helvetica, san-serif">`

您还应该限制自己使用一种或两种字体 + 1（一种用于主要字体，另一种作为备用字体，外加默认系统字体，例如“san-serif”或“serif”）。嵌套超过 3-4 层的表格只是自找麻烦。

我使用`span`标签而不是`b`标签来增加粗体，以避免潜在的冲突。我没有使用`margin-top`or `padding`，因为某些客户端（例如 Hotmail）会忽略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:30:36.117

There are two things which i have seen i.e. you are using two body html tags it might create a problem and another You are using Tested Tables and its the bad thing in Emails, I had also tested the best nested tables in email is about 8 Nested tables and going beyond that can also cause problem and if you are using them. Kindly use the tbody html tag also which would help in rendering this correctly for emails.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:43:42.203

在没有表格的情况下重新创建您的电子邮件。[您可以使用table2css](http://www.table2css.com/)对我进行快速测试。

# java - 应用程序强制关闭 ViewPager？

> ID：10176836
> 
> 赞同：0
> 
> 时间：2012-04-16T15:13:37.823
> 
> 标签：java, android

到目前为止，这个应用程序的唯一任务是在我水平滑动屏幕时滑动。但是当我在我的 Android 虚拟机上运行它时，logcat 会弹出这些错误：

```
04-14 16:14:17.822: D/ddm-heap(196): Got feature list request
04-14 16:14:18.193: D/AndroidRuntime(196): Shutting down VM
04-14 16:14:18.193: W/dalvikvm(196): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-14 16:14:18.193: E/AndroidRuntime(196): Uncaught handler: thread main exiting due to uncaught exception
04-14 16:14:18.313: E/AndroidRuntime(196): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{stc1.hello.here/stc1.hello.here.Stc1Activity}: java.lang.ClassNotFoundException: stc1.hello.here.Stc1Activity in loader dalvik.system.PathClassLoader@44c067e8
04-14 16:14:18.313: E/AndroidRuntime(196):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
04-14 16:14:18.313: E/AndroidRuntime(196):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-14 16:14:18.313: E/AndroidRuntime(196):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-14 16:14:18.313: E/AndroidRuntime(196):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-14 16:14:18.313: E/AndroidRuntime(196):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 16:14:18.313: E/AndroidRuntime(196):  at android.os.Looper.loop(Looper.java:123)
04-14 16:14:18.313: E/AndroidRuntime(196):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-14 16:14:18.313: E/AndroidRuntime(196):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 16:14:18.313: E/AndroidRuntime(196):  at java.lang.reflect.Method.invoke(Method.java:521)
04-14 16:14:18.313: E/AndroidRuntime(196):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-14 16:14:18.313: E/AndroidRuntime(196):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-14 16:14:18.313: E/AndroidRuntime(196):  at dalvik.system.NativeStart.main(Native Method)
04-14 16:14:18.313: E/AndroidRuntime(196): Caused by: java.lang.ClassNotFoundException: stc1.hello.here.Stc1Activity in loader dalvik.system.PathClassLoader@44c067e8
04-14 16:14:18.313: E/AndroidRuntime(196):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-14 16:14:18.313: E/AndroidRuntime(196):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-14 16:14:18.313: E/AndroidRuntime(196):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-14 16:14:18.313: E/AndroidRuntime(196):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-14 16:14:18.313: E/AndroidRuntime(196):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
04-14 16:14:18.313: E/AndroidRuntime(196):  ... 11 more
04-14 16:14:18.403: I/dalvikvm(196): threadid=7: reacting to signal 3
04-14 16:14:18.413: E/dalvikvm(196): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
04-14 16:14:35.972: D/AndroidRuntime(228): Shutting down VM
04-14 16:14:36.052: W/dalvikvm(228): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-14 16:14:36.052: E/AndroidRuntime(228): Uncaught handler: thread main exiting due to uncaught exception
04-14 16:14:36.112: E/AndroidRuntime(228): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{stc1.hello.here/stc1.hello.here.Stc1Activity}: java.lang.ClassNotFoundException: stc1.hello.here.Stc1Activity in loader dalvik.system.PathClassLoader@44e8c7e8
04-14 16:14:36.112: E/AndroidRuntime(228):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
04-14 16:14:36.112: E/AndroidRuntime(228):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-14 16:14:36.112: E/AndroidRuntime(228):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-14 16:14:36.112: E/AndroidRuntime(228):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-14 16:14:36.112: E/AndroidRuntime(228):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 16:14:36.112: E/AndroidRuntime(228):  at android.os.Looper.loop(Looper.java:123)
04-14 16:14:36.112: E/AndroidRuntime(228):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-14 16:14:36.112: E/AndroidRuntime(228):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 16:14:36.112: E/AndroidRuntime(228):  at java.lang.reflect.Method.invoke(Method.java:521)
04-14 16:14:36.112: E/AndroidRuntime(228):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-14 16:14:36.112: E/AndroidRuntime(228):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-14 16:14:36.112: E/AndroidRuntime(228):  at dalvik.system.NativeStart.main(Native Method)
04-14 16:14:36.112: E/AndroidRuntime(228): Caused by: java.lang.ClassNotFoundException: stc1.hello.here.Stc1Activity in loader dalvik.system.PathClassLoader@44e8c7e8
04-14 16:14:36.112: E/AndroidRuntime(228):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-14 16:14:36.112: E/AndroidRuntime(228):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-14 16:14:36.112: E/AndroidRuntime(228):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-14 16:14:36.112: E/AndroidRuntime(228):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-14 16:14:36.112: E/AndroidRuntime(228):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
04-14 16:14:36.112: E/AndroidRuntime(228):  ... 11 more
04-14 16:14:36.174: I/dalvikvm(228): threadid=7: reacting to signal 3
04-14 16:14:36.174: E/dalvikvm(228): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

这是 FragmentActivity.java：

```
package stc1.hello.here;

import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.os.Bundle;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.View;
import android.widget.TextView;

public class FragmentActivity extends Activity {
    //We declare how many pages we want here.
    private ViewPager awesomePager;
    private static int NUM_AWESOME_VIEWS = 20;
    private Context cxt;
    private AwesomePagerAdapter awesomeAdapter;

    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main1);
        cxt = this;

        awesomeAdapter = new AwesomePagerAdapter();
        awesomePager = (ViewPager) findViewById(R.layout.main1);
        awesomePager.setAdapter(awesomeAdapter);
    }

    private class AwesomePagerAdapter extends PagerAdapter{

        @Override
        public int getCount() {
            return NUM_AWESOME_VIEWS;
        }

        /**
         * Create the page for the given position.  The adapter is responsible
         * for adding the view to the container given here, although it only
         * must ensure this is done by the time it returns from
         * {@link #finishUpdate()}.
         *
         * @param container The containing View in which the page will be shown.
         * @param position The page position to be instantiated.
         * @return Returns an Object representing the new page.  This does not
         * need to be a View, but can be some other container of the page.
         */
        @Override
        public Object instantiateItem(View collection, int position) {
            TextView tv = new TextView(cxt);
            tv.setText("Bonjour PAUG " + position);
            tv.setTextColor(Color.WHITE);
            tv.setTextSize(30);
            ((ViewPager) collection).addView(tv,0);
            return tv;
        }

        /**
         * Remove a page for the given position.  The adapter is responsible
         * for removing the view from its container, although it only must ensure
         * this is done by the time it returns from {@link #finishUpdate()}.
         *
         * @param container The containing View from which the page will be removed.
         * @param position The page position to be removed.
         * @param object The same object that was returned by
         * {@link #instantiateItem(View, int)}.
         */
        @Override
        public void destroyItem(View collection, int position, Object view) {
            ((ViewPager) collection).removeView((TextView) view);
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return view==((TextView)object);
        }

        /**
         * Called when the a change in the shown pages has been completed.  At this
         * point you must ensure that all of the pages have actually been added or
         * removed from the container as appropriate.
         * @param container The containing View which is displaying this adapter's
         * page views.
         */
        @Override
        public void finishUpdate(View arg0) {}

        @Override
        public void restoreState(Parcelable arg0, ClassLoader arg1) {}

        @Override
        public Parcelable saveState() {
            return null;
        }

        @Override
        public void startUpdate(View arg0) {}
    }
} 
```

这是main1.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical"
  >
  <android.support.v4.view.ViewPager
    android:id="@+android:id/viewpager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:19:47.200

您的活动名称与错误中给出的活动名称不匹配：

```
Caused by: java.lang.ClassNotFoundException: stc1.hello.here.Stc1Activity 
```

您可能需要使用正确的名称更新清单。

# c# - C# - 如何检测网站是否具有共享或专用 IP 地址？

> ID：10176841
> 
> 赞同：0
> 
> 时间：2012-04-16T15:13:54.857
> 
> 标签：c#, .net, ip

是否可以使用 C#（Windows 窗体应用程序）从其 url 中检测网站是否具有专用或共享 IP 地址？我想在我的应用程序中实现一个功能，让我在 TextBox 中写一个网址，而不是单击“测试”按钮。如果站点有专用 IP 地址，则显示（成功）消息框，否则显示（失败）消息框。

如何使用 C#.NET 检测网站是否具有共享或专用 IP 地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:17:03.080

你可以尝试，但你永远不会有好的结果。我认为您可以做的最好的事情是检查IP的PTR记录，然后检查是否有来自不同网站的关联A记录。然而，这仍然很糟糕，因为一个网站可能有两个看似不同的域属于同一个组织（例如 googlemail.com/gmail.com）。

此外，这假设存在多个 PTR 记录。我认为我没有看到大多数 VPS/共享主机支持这样的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:19:07.600

从技术角度来看，没有“共享”或“专用”IP 地址之类的东西。协议没有区别。这些是用于描述*如何*使用 IP 的术语。

因此，没有编程方法来回答“这是共享的还是专用的？” 这个问题的其他一些答案提出了一些**猜测**特定域是否在共享 IP 上的方法，但这些方法充其量只是猜测。

如果你真的想走这条路，你可以抓取网络并为每个域存储解析的 IP。（很简单，对吗？）然后您可以查询您的海量数据库以查找托管在给定 IP 上的所有域。（似乎已经[有](http://www.yougetsignal.com/tools/web-sites-on-web-server/) [一些](http://www.domainbyip.com/) [工具](http://www.myipneighbors.com/)可以做到这一点，尽管只有第一个能够识别我在服务器上托管的多个域。）

当然，这对于共享服务器硬件本身的 VPS（或 Amazon EC2 之类的东西）来说都是徒劳的，但每个客户（域）都会获得一个或多个专用 IP。从外部看，没有办法知道这些服务器是如何设置的。

* * *

*TL;DR：*这不能以可靠的方式完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:27:51.567

好吧，我会这样做的方式是：

1.  向 URL 发送 HTTP GET 并保存结果。
2.  将 URL 解析为 IP。
3.  向 IP 发送 HTTP GET 并保存结果。
4.  比较两个结果。（您可以在两个结果之间进行抽样检查）
5.  如果结果相同，则这是专用主机，如果结果不同，则这是共享主机。

我现在能想到的这种方法的局限性：

1.  将花时间为这两个结果找出合适的比较方法。
2.  如果共享主机配置为默认路由到您正在检查的站点。

解析 URL 和针对不同编程语言执行 Web 请求的功能分散在 Internet 上。

# php - 使用 PHP 编写带有西班牙字符的 CSV 文件

> ID：10176843
> 
> 赞同：0
> 
> 时间：2012-04-16T15:14:13.313
> 
> 标签：php, csv, utf-8

我有一个 utf-8 编码的 php 脚本。在其中，我有一个带有特殊字符的数组（例如顶部带有 ~ 的 n ）。在我的编辑器中看起来还不错。php 将数组与来自 html 表单的文本匹配并写入 csv 文件。当我编写文件时，我会这样做；

```
fwrite($fp,utf8_encode($data),strlen($data)+100); 
```

当我打开文件时，它说它是 utf-8 编码的，但章程都搞砸了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:24:04.400

您是否尝试过不对数据使用 utf_encode() ？似乎您正在重新编码已经 utf-8 编码的东西

# linux - 复制到新文件夹后，如何仅将整个嵌套目录中的头文件复制到另一个保持相同层次结构的目录

> ID：10176849
> 
> 赞同：5
> 
> 时间：2012-04-16T15:14:44.627
> 
> 标签：linux, shell, cp

我有一个目录，其中包含很多头文件（.h）和其他 .o 和 .c 文件以及其他文件。这个目录里面有很多嵌套目录。我只想将头文件复制到单独的目录中，并在新目录中保留相同的结构。

`cp -rf oldDirectory newDirectory`将复制所有文件。我只想复制头文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T17:30:17.867

```
(cd src && find . -name '*.h' -print | tar --create --files-from -) | (cd dst && tar xvfp -) 
```

如果您只想硬链接文件而不是复制它们，您可以使用 cpio 执行类似的操作，但之后可能需要一些 mv'ing。如果您有大量数据并且不介意（或需要！）共享，这可能会快得多。如果 dst 需要在其中包含 src ，它会感到困惑 - 如果它不仅仅是一个副作用：

1.  查找 src -name '*.h' -print | cpio -pdlv dst
2.  mv dst/src/* dst/.
3.  rmdir dst/src

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-05T12:03:29.833

这个对我有用：

```
rsync -avm --include='*.h' -f 'hide,! */' . /destination_dir 
```

从[这里](https://stackoverflow.com/a/9626253/1787109)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T15:16:30.540

```
cp -rf oldDirectory/*.h newDirectory 
```

或类似的东西（取决于实际路径）

```
find oldDirectory -type f -name "*.h" -print0 | xargs -file cp file newDirectory 
```

# grails - Grails：如何使用 sql 函数自定义订单？

> ID：10176851
> 
> 赞同：2
> 
> 时间：2012-04-16T15:14:52.157
> 
> 标签：grails, grails-orm, distance

我想使用 Gorm 检索 10 个最近的地理定位对象。为此，我想自定义*order()*参数以使用*get_distance(longitude, latitude, :longitude, :latitude)* sql 函数。我整天都在为此苦苦挣扎，有人有提示吗？

谢谢 ！

**编辑**

我终于设法做我想做的事，但解决方案非常难看：

*   我添加了一个 sqlProjection，我在其中放置了我的 get_distance() 函数并能够通过它进行排序。
*   添加投影会删除对象属性的检索，因此我必须通过添加属性投影来明确要求它，并且我设法通过自省来做到这一点。
*   然后我必须为它定义标准的结果转换器来给我域实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:29:03.863

如果使用休眠 SQL 方言注册您的函数，那么您可以在 HQL 查询中使用它。例如，把它放在你的引导代码中：

```
import org.hibernate.dialect.function.SQLFunctionTemplate
import org.hibernate.Hibernate

def dialect = applicationContext.sessionFactory.dialect
def getDistance = new SQLFunctionTemplate(Hibernate.INTEGER, "get_distance(?1,?2)")
dialect.registerFunction('get_distance', getDistance) 
```

然后你可以在 HQL 中使用它：

```
Location.executeQuery(
    """
        select id, get_distance(latitude, longitude) as distance 
        from Location
        order by distance
    """, 
    [], [max: 10]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:52:31.753

我们所做的如下：

1.  使用任何特定于数据库的运算符创建查询，但作为视图
2.  创建一个新的域类对象仅映射到视图，从而允许您执行 GORM 条件查询等

# sql-server - 访问丢弃 SQL 连接

> ID：10176861
> 
> 赞同：2
> 
> 时间：2012-04-16T15:15:27.550
> 
> 标签：sql-server, ms-access, odbc, database-connection

不确定这是否是正确的论坛，但这里有。我正在寻找任何关于我可以尝试解决这个问题的建议......

我有一个带有 SQL 2008 数据库的 Access 2003 前端（在每个客户端上）。我已经绕过每个用户并在每台电脑上设置了 odbc 连接。对于大多数用户来说，它很好，并且已经运行了一年，但对于少数用户来说，在运行查询时（无论是更新还是打开表单时的选择），SQL 连接似乎已被删除，他们无法进行任何操作更远。我想不出有它工作的人和那些不工作的人之间有什么明显的区别。知道我应该从哪里开始吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:33:59.950

我以前也遇到过这样的案例：Access frontend，SQL Server backend。在客户的*一台*或*部分*PC 上，连接突然断开（引发一些 ODBC 或 SQL Server 连接错误）。随机且很少发生（例如每小时/每天/每周一次），并且需要重新启动 Access 应用程序才能继续工作。

在所有这些情况下，罪魁祸首之一是：

*   网线断了
*   网卡坏了
*   Buggy 网卡驱动
*   不稳定的网络协议（是的，这是在 NetBIOS 的旧时代）

问题是：**访问对网络错误极为敏感。**网络中的一个简单故障、几秒钟的连接中断——您甚至不会在其他应用程序中注意到这一点——将导致 Access 前端应用程序失去其数据库连接并严重崩溃。这很令人沮丧，因为客户会说“*我在使用 Word/Windows Explorer/等时没有遇到任何网络问题，所以我的网络很好，是你的应用程序坏了。* ”这不是真的。如果 Access 遇到零星且不可预测的网络错误，则通常是网络问题。

所以，我要做的第一件事是更换（a）网卡，（b）网线*和*（c）为其中一台遇到问题的机器使用另一个交换机端口。如果那台机器上的问题消失了，您就知道这些组件之一是有故障的。

# nhibernate - 尽管 HQL 获取，但 Nhibernate 生成代理

> ID：10176862
> 
> 赞同：0
> 
> 时间：2012-04-16T15:15:28.320
> 
> 标签：nhibernate, fluent-nhibernate, hql, fetching-strategy

我有以下 HQL 语句：

```
select distinct t from TaskEntity as 
inner join fetch t.Case as c
inner join fetch c.Client as client 
inner join fetch c.Matter as matter 
```

然而，尽管 Matter 有一个针对它的 FETCH，它仍然作为代理返回。

我对该对象的映射如下

```
References(x => x.Matter).Columns(new[] {"c_client","c_matter" }); 
```

我已经尝试过对此使用 JOIN ，但我的问题是从 1 列到 2 列，所以它不接受映射。

有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:43:58.160

我解决了导致此问题的问题。

它还解析为复合 ID！

在项目的早期，Nhibernate 警告说我没有覆盖 Equals 和 GetHashCode，为了规避大量代码更改并促进代码重用，我创建了一个 CompositeBaseEntity 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Case.Infrastructure
{
    public class BaseCompositeEntity : BaseEntity
    {
        public override int GetHashCode()
        {
            return base.GetHashCode();
        }

        public override bool Equals(object obj)
        {
            return base.Equals(obj);
        }
    }
} 
```

这堂课，把 Nhibernate 告诉我要避免的东西放回原处！由于有两个键来比较相等性，我们必须重写 Equals 和 GetHashCode() 方法，使其类似于：

```
public override bool Equals(object obj)
        {
            if (obj == null)
                return false;
            var t = obj as ClientMatterEntity;
            if (t == null)
                return false;
            if (AccountNumber== t.ClientAcconuntNumber && CaseNumber == t.CaseNumber)
                return true;
            return false;
        } 
```

通过这种方式，Nhibernate 确切地知道应该如何进行比较，然后知道它是否在一级缓存中有那个对象（它会，正如我们指定的 fetch 那样）。

更多信息可以在这里找到：http: [//nhforge.org/blogs/nhibernate/archive/2010/07/01/nhibernate-and-composite-keys.aspx](http://nhforge.org/blogs/nhibernate/archive/2010/07/01/nhibernate-and-composite-keys.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:01:42.997

请注意，您还必须提供正确的 GetHashCode 实现。

您的 Equals 实现也不是很好。

此外，这两种方法都应该返回“静态”值。我没有看过你的课，但应该是这样的：

```
public class TaskEntity
{
    public int AccountNumber { get; protected set; }
    public int CaseNumber { get; protected set; }
    public Client Client { get; set; }
    public Matter Matter { get; set; }

    public TaskEntity(int accountNr, caseNr)
    {
        AccountNumber = accountNr;
        CaseNumber = caseNr;
    }

    protected TaskEntity() {} // Needed for NHibernate proxies
} 
```

我真的建议您尽可能将组件 ID 放在单独的类中。

此外，请阅读以下有关 override Equal 的文章，因为您当前的实现可能存在缺陷：http: [//msdn.microsoft.com/en-us/library/bsc2ak47.aspx](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)特别了解有关继承和基本类型的部分。

# git - 将 .gitignore 添加到 gitignore

> ID：10176875
> 
> 赞同：202
> 
> 时间：2012-04-16T15:16:06.260
> 
> 标签：git, gitignore

是否可以将`.gitignore`文件添加到`.gitignore`自身？

```
.gitignore 
```

虽然不起作用

我不想在编辑过的文件中看到它

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2012-04-16T15:23:49.413

该`.gitignore`文件的目的是防止在项目上进行协作的每个人意外提交项目中的一些常见文件，例如生成的缓存文件。因此，您不应忽略`.gitignore`，因为它应该包含在存储库中。

如果您只想忽略一个存储库中的文件，但又想避免提交忽略列表（例如个人文件），您可以将它们添加到`.git/info/exclude`该存储库中。

如果您想忽略计算机上每个存储库上的某些文件，您可以创建该文件`~/.gitignore_global`然后运行

```
git config --global core.excludesfile ~/.gitignore_global 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-05-23T21:37:21.073

如果 .gitignore*从未被签入，则它可以忽略自身：*

```
mhaase@ubuntu:~$ git --version
git version 1.7.9.5
mhaase@ubuntu:~$ git init temp
Initialized empty Git repository in /home/mhaase/temp/.git/
mhaase@ubuntu:~$ cd temp
mhaase@ubuntu:~/temp$ touch .gitignore foo bar baz bat
mhaase@ubuntu:~/temp$ git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       .gitignore
#       bar
#       bat
#       baz
#       foo
mhaase@ubuntu:~/temp$ echo "foo" >> .gitignore
mhaase@ubuntu:~/temp$ echo ".gitignore" >> .gitignore
mhaase@ubuntu:~/temp$ git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       bar
#       bat
#       baz
nothing added to commit but untracked files present (use "git add" to track) 
```

如果您签入 .gitignore（在您告诉它忽略自身之前），那么它将始终显示在 git status 中，即使您稍后将其修改为忽略自身。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-04-16T15:22:31.443

这样做没有很好的理由。如果您只想为您的*克隆**忽略*文件，请将它们添加到，而不是 文件中。*`.git/info/exclude``.gitignore`*

 ** * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-04-02T23:25:46.490

输入`.gitignore`gitignore 文件后，尝试以下操作，

```
git rm -r --cached .
git add --all
git commit -m "ignoring gitignore"
git push --set-upstream origin master 
```

它应该可以工作，尽管就像已经说过的那样，如果您的存储库由多个用户共享，则忽略 gitignore 可能会适得其反。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-16T15:18:30.477

是的你可以; 你仍然在编辑的文件中看到它，因为它仍然被 git 跟踪，并且被 git 跟踪的文件总是被标记为已修改，即使它们在 .gitignore 中。所以简单地[取消跟踪](https://stackoverflow.com/q/936249/11343)它。

但是为什么不提交或重置您对其所做的更改呢？这是将其从状态中删除的更好方法...另外请注意，任何新的 repo 克隆都必须添加它`.gitignore`，这可能很烦人。*

# iphone - iPhone - 在封面流中显示来自服务器的图像

> ID：10176876
> 
> 赞同：0
> 
> 时间：2012-04-16T15:16:10.400
> 
> 标签：iphone, ios, coverflow

我想在 Cover Flow 中使用服务器链接显示图像，任何人都可以在这方面帮助我。我已经成功地在我的 NSMainBundle 中显示了封面流中的图像。我搜索了很多教程，他们说首先你必须下载图像而不是在封面流程中显示它们，但我不想下载图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:52:39.133

您应该使用的方法是在封面流加载时为封面流中的每个页面显示静态图像。同时，您可以在后台加载图像并在相关图像加载时更新每个页面。

就个人而言，我非常喜欢[SDWebImage](https://github.com/rs/SDWebImage)在后台加载图像

# c# - CompareAttribute 错误优先于RequiredAttribute 一

> ID：10176878
> 
> 赞同：1
> 
> 时间：2012-04-16T15:16:12.363
> 
> 标签：c#, asp.net-mvc-3, data-annotations

在提出实际问题之前，我只想说这是我们的客户正在用牙齿和指甲来解决这个问题的要求，所以即使我知道有这种答案，也有更好的实现方式在这种情况下，更好的方法将无济于事。

我有一个具有以下定义的视图模型：

```
public class MyVm
{
   [Required]
   public string Email{get;set;]

   [Required]
   [Compare("Email")]
   public string EmailConfirmation{get;set;
} 
```

当我们测试它时，如果我们在 Email 字段中输入一个值，但没有在 EmailConfirmation 中输入一个值，我们会收到 fields-do-not-match 错误，这很好，但客户绝对希望看到“需要确认字段”当它为空并且只有当两个字段都有数据并且它们不匹配时才会出错，才能看到“字段不匹配”之一。

有没有办法通过注释来实现这一点？

**注意**：我们使用的是 MVC 3。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:55:46.967

您始终可以编写自己的自定义验证属性来处理这种情况。这是一篇不错的[文章](http://www.a2zdotnet.com/View.aspx?Id=182#.T4xqs7M3uVE)，它提供了一个使用自定义属性处理自定义验证的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:59:32.787

也许您可以编写自己的属性。像这样的东西：

```
 [AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
public class CompareAndValidateAttribute : CompareAttribute
{
    public override bool IsValid(object value)
    {
        return base.IsValid(value) && !string.IsNullOrEmpty((string)value);
    }
} 
```

# java - 带有 view.getLocationOnScreen 的 NullPointerException

> ID：10176881
> 
> 赞同：1
> 
> 时间：2012-04-16T15:16:18.090
> 
> 标签：java, android, android-widget

对 Android 来说非常新，现在已经研究了一段时间，但找不到答案。我确信有一个简单的解决方案。

我得到一个`NullPointException`连接到我的`View characterContainer = findViewById(R.id.icon_container);`

据我了解，似乎我正在尝试在该`onCreate()`方法中实现它，因此布局尚未完全准备好导致`characterContainer = null`.

所以我需要使用它，`onStart()`或者`onResume()`但我正在努力。到目前为止，这是我的代码：

```
package harvest.life.game;

import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.RelativeLayout;

public class HarvestLifeActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //find buttons on screen
        Button up = (Button)findViewById(R.id.up);
        up.setOnTouchListener(new UpListener());
        Button down = (Button)findViewById(R.id.down);
        down.setOnTouchListener(new UpListener()); // set as UpListener also for test reasons
        Button left = (Button)findViewById(R.id.left); 
        left.setOnTouchListener(new UpListener()); // set as UpListener also for test reasons
        Button right = (Button)findViewById(R.id.right);
        right.setOnTouchListener(new UpListener()); // set as UpListener also for test reasons
    }
    //what up button does 
    private final class UpListener implements OnTouchListener {
        public boolean onTouch(View v, MotionEvent event) {

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    //as long as up button is pressed it will keep moving character up
                    while (event.getAction() == MotionEvent.ACTION_DOWN)
                    {
                        View characterContainer = findViewById(R.id.icon_container);
                        Drawable walking = getResources().getDrawable(R.drawable.test_circle_red);
                        int startX = characterContainer.getLeft();
                        int startY = characterContainer.getTop();
                        int defaultWidth = characterContainer.getWidth();
                        int defaultHeight = characterContainer.getHeight();

                        //create new position for character 1 pixel closer to the top of screen
                        int newX = startX - 1;
                        int newY = startY;

                        //remove character
                        RelativeLayout view = (RelativeLayout) characterContainer;
                        ViewGroup owner = (ViewGroup) view.getParent();
                        owner.removeView(view);

                        //re make character in new position created above and assign background as walking forwards animation
                        RelativeLayout.LayoutParams characParams = new RelativeLayout.LayoutParams(defaultWidth,defaultHeight);
                        characParams.leftMargin = newY;
                        characParams.topMargin = newX;
                        characterContainer.setLayoutParams(characParams);           
                        characterContainer.setBackgroundDrawable(walking); 
                    }
                    break;

                    // when button is let go of
                case MotionEvent.ACTION_UP:
                    RelativeLayout characterContainer = (RelativeLayout) 
                    findViewById(R.id.icon_container);
                    Drawable standing =
                        getResources().getDrawable(R.drawable.test_circle);
                    //assign background back to standing animation
                    characterContainer.setBackgroundDrawable(standing);
                default:
                    break;
            }
            return true;
        }
    }
    public void onResume() { // what goes here?

    }
} 
```

我是否需要在该部分中放置一种函数调用，`onResume`或者我是否将代码`OnTouchListener`放在此处？

这是我的主要内容：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/game_container"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal"
android:background="#FFFFFF">

<RelativeLayout
    android:id="@+id/side_bar_right"
    android:layout_width="50dp"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="#000000">

    <ImageView
        android:contentDescription="@string/movement_button"
        android:id="@+id/up"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_gravity="top"
        android:src="@drawable/up" />

    <ImageView
        android:contentDescription="@string/movement_button"
        android:id="@+id/down"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:src="@drawable/down" />

    <ImageView
        android:contentDescription="@string/movement_button"
        android:id="@+id/right"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:src="@drawable/right" />

</RelativeLayout>

<RelativeLayout
    android:id="@+id/side_bar_left"
    android:layout_width="50dp"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" 
    android:background="#000000">

    <ImageView
        android:contentDescription="@string/movement_button"
        android:id="@+id/left"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:src="@drawable/left" />     

</RelativeLayout>

<RelativeLayout
    android:id="@+id/icon_container"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="@drawable/test_circle"  >

</RelativeLayout >

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:37:07.157

这就是我认为你想要的：

```
package harvest.life.game;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.RelativeLayout;

public class HarvestLifeActivity extends Activity {
/** Called when the activity is first created. */
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //find buttons on screen
        Button up = (Button)findViewById(R.id.up);
        //up.setOnTouchListener(new UpListener());
        Button down = (Button)findViewById(R.id.up);
        //down.setOnTouchListener(new UpListener());
        Button left = (Button)findViewById(R.id.up);
        //left.setOnTouchListener(new UpListener());
        Button right = (Button)findViewById(R.id.up);
        //right.setOnTouchListener(new UpListener()); 
    }

    public void onDownButtonClick(View view){
        while (event.getAction() == MotionEvent.ACTION_DOWN)
        {

             View characterContainer = findViewById(R.id.icon_container);
             Drawable walking = getResources().getDrawable(R.drawable.test_circle_red);
             int startX = characterContainer.getLeft();
             int startY = characterContainer.getTop();
             int defaultWidth = characterContainer.getWidth();
             int defaultHeight = characterContainer.getHeight();

                 //create new position for character 1 pixel closer to the top of screen
                 int newX = startX - 1;
                 int newY = startY;

                 //remove character
                 RelativeLayout view = (RelativeLayout) characterContainer;
                 ViewGroup owner = (ViewGroup) view.getParent();
                 owner.removeView(view);

                 //re make character in new position created above and assign background as walking forwards animation
                 RelativeLayout.LayoutParams characParams = new RelativeLayout.LayoutParams(defaultWidth,defaultHeight);
                 characParams.leftMargin = newY;
                 characParams.topMargin = newX;
                 characterContainer.setLayoutParams(characParams);           
                 characterContainer.setBackgroundDrawable(walking); 
                 }
    }

    public void onUpButtonClicked(View view){
        RelativeLayout characterContainer = (RelativeLayout) 
                findViewById(R.id.icon_container);
        Drawable standing =
                getResources().getDrawable(R.drawable.test_circle);
         //assign background back to standing animation
        characterContainer.setBackgroundDrawable(standing);
    }

  } 
```

如您所见，我将您的“向下”代码放在一个函数中，将您的“向上”代码放在另一个函数中。然后，在 xml 中，添加`android:onClick="onButtonDownClick"`到向下按钮。对您的向上按钮执行相同操作（“onButtonUpClick”除外）。这将导致这些函数在点击时被调用。重要的是要注意这些函数将 a`View`作为参数。

# spring - 构建 Spring 3.0.1 - 失败的测试

> ID：10176886
> 
> 赞同：2
> 
> 时间：2012-04-16T15:16:32.703
> 
> 标签：spring, ant, junit, build

我正在尝试构建 Spring 3.0.1 的修补版本，但我面临测试用例失败。在进一步分析中，我发现失败的测试是那些被标记为@Ignore 的测试，但它们似乎仍然被执行。

可能是什么问题呢？

这是我构建 spring 3.0.1 所遵循的步骤

```
git clone git://github.com/SpringSource/spring-framework.git
git checkout v3.0.1.RELEASE 
```

[使用 svn 将https://src.springframework.org/svn/spring-build/trunk/project-build](https://src.springframework.org/svn/spring-build/trunk/project-build)检出到 spring-framework 文件夹下的文件夹。切换到 build-spring-framework 目录。[根据此处](http://kensipe.blogspot.in/2009/04/building-spring-3-with-git.html)提到的步骤，使用 mkdir 创建了一些目录。

```
set JAVA_HOME=E:\Syndev\JAVA6U24\JDK
set ANT_OPTS=-XX:MaxPermSize=256m -Xmx1024m
ant 
```

我尝试的另一件事是简单地删除失败的测试/删除测试用例文件，但这导致在构建过程中出现以下异常。

```
 [junit] Caused by: java.lang.ClassNotFoundException: org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect
 [junit]     at java.lang.ClassLoader.findClass(ClassLoader.java:359)
 [junit]     at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
 [junit]     at org.springframework.core.OverridingClassLoader.loadClass(OverridingClassLoader.java:70)
 [junit]     at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
 [junit]     at org.springframework.context.support.ContextTypeMatchClassLoader.loadClass(ContextTypeMatchClassLoader.java:63)
 [junit]     at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
 [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1226)
 [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1200)
 [junit]
 [junit]
 [subant] Leaving directory: E:\Projects\github\spring-framework\org.springframework.orm 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:42:07.023

这个问题似乎记录在这里，

[https://jira.springsource.org/browse/SPR-8089](https://jira.springsource.org/browse/SPR-8089)

[https://jira.springsource.org/browse/SPR-8587](https://jira.springsource.org/browse/SPR-8587)

因此，HibernateEntityManagerFactoryIntegrationTests.java 中的上述异常和 NotificationListenerTests.java、Log4jWebConfigurerTests.java 等类中的其他异常应该通过简单地从那里删除测试来修复。

# asp.net-mvc-3 - Dynamic LINQ 是否仍在使用并适用于缩小搜索结果？

> ID：10176890
> 
> 赞同：2
> 
> 时间：2012-04-16T15:17:01.473
> 
> 标签：asp.net-mvc-3, linq, filtering, dynamic-linq

我正在用 C# 开发一个 ASP.NET MVC3 应用程序。

我试图在我的应用程序中实现一个**“缩小”**功能，应用从搜索中获得的结果集。

简而言之，在我执行搜索并将结果显示在页面中心之后，我希望在页面的左侧/右侧为搜索结果`CheckBoxList`的每个**属性提供一个帮助器。**每个代表属性的`CheckBox`不同**值**。`CheckBoxList`

 **例如，如果我搜索`Product`并且它有一个`Color`值为*blue、red*和*yellow*的属性，我创建一个`CheckBoxList`带有文本**Color**和三个`CheckBox`-es 的每个颜色。

在对 Web 进行研究之后，我发现了这个由 Scott Guthrie 提供的**Dynamic LINQ库。**由于我发现的最新示例/教程是 2009 年的，我想知道这个库是否真的很好（并且维护）。

在后一种情况下，**jQuery**是实现此类功能的最佳方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T06:49:49.463

您可以通过使用纯 .NET 框架动态构建所需的谓词表达式来解决它。

请参阅下面的代码示例。根据条件，这将过滤多个属性。我使用了 IQuerable，因为这将使 In-Memory 成为远程场景，例如 Entity Framework。如果您使用 Entity Framework，您也可以动态构建一个 EntitySQL 字符串。我希望它会表现得更好。

涉及到一小部分反射（GetProperty）。但这可以通过在 BuildPredicate 方法中执行缓存来改善。

```
public class Item
{
    public string Color { get; set; }
    public int Value { get; set; }
    public string Category { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var list = new List<Item>()
        {
            new Item (){ Category = "Big", Color = "Blue", Value = 5 },
            new Item (){ Category = "Small", Color = "Red", Value = 5 },
            new Item (){ Category = "Big", Color = "Green", Value = 6 },
        };

        var criteria = new Dictionary<string, object>();
        criteria["Category"] = "Big";
        criteria["Value"] = 5;

        var query = DoDynamicWhere(list.AsQueryable(), criteria);
        var result = query.ToList();
    }

    static IQueryable<T> DoDynamicWhere<T>(IQueryable<T> list, Dictionary<string, object> criteria)
    {
        var temp = list;

        //create a predicate for each supplied criterium and filter on it.
        foreach (var key in criteria.Keys)
        {
            temp = temp.Where(BuildPredicate<T>(key, criteria[key]));
        }

        return temp;
    }

    //Create i.<prop> == <value> dynamically
    static Expression<Func<TType, bool>> BuildPredicate<TType>(string property, object value)
    {
        var itemParameter = Expression.Parameter(typeof(TType), "i");

        var expression = Expression.Lambda<Func<TType, bool>>(
            Expression.Equal(
                Expression.MakeMemberAccess(
                    itemParameter,
                    typeof(TType).GetProperty(property)),
                Expression.Constant(value)
            ),
            itemParameter);

        return expression;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:42:44.300

我真的不明白为什么您需要在这里使用*动态 LINQ*？项目属性在编译时是否未知？如果您可以按名称访问给定的项目属性，例如。`var prop = myitem['Color']`，你不需要*动态 LINQ*。

这取决于您如何呈现结果。一般来说，有很多方法可以实现所需的行为：

1.  **完全客户端。**如果你在客户端做所有事情（获取数据、渲染、分页）—— *jQuery 将是最好的选择。*
2.  **服务器端+客户端。**如果您在服务器上呈现结果，您可以将 HTML 属性（针对每个属性）添加到每个搜索结果标记并**过滤那些客户端**. 在这种情况下，唯一的问题可能是分页（*如果您在服务器端进行分页，则只能过滤当前页面*）
3.  **完全服务器端**。使用搜索参数发布表单并使用 LINQ 缩小搜索结果的范围 - 将现有项目的属性与表单值匹配。

**编辑**

如果我是你（并且需要在服务器端过滤结果），我会这样做：

```
 var filtered = myItems.Where(i => i.Properties.Match(formValues)) 
```

where`Match`是一个扩展方法，用于检查给定的属性列表是否与提供的值匹配。就这么简单——不需要*动态 LINQ*。

**编辑 2**

是否需要将 LINQ 查询映射到数据库查询（LINQ to SQL）？这会使事情变得有点复杂，但通过链接多个`.Where(...)`子句仍然是可行的。只需循环过滤器属性并添加`.Where(...)`到先前迭代的查询中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:25:07.760

you may have a look at [PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx) from the author of C# 4.0 in a Nutshell

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T21:51:12.883

正如@Piotr Szmyd 已经指出的那样，您可能不需要动态Linq。遍历 T 的所有属性不需要动态 linq。Dynamic Linq 主要用于在客户端构建完整的查询并将其以字符串格式发送到服务器。但是现在，它已经过时了，因为 Mvc 4 通过返回 IQueryable 的 Api 控制器支持客户端查询。如果您只需要遍历 T 的所有属性，您可以通过反射和构建将构成过滤标准的 LambdaExpressions 来完成。您可以使用[Expression 类的静态方法来完成](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.aspx). 通过使用这样的静态方法，您可以使用一些指令构建动态表达式，例如 m => m.Name= "Nick" ...比您输入的和它们...完成后，您可以将表达式应用于现有的 IQueryable

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T22:48:43.187

LINQ 实现仍然没有改变，所以使用动态 LINQ 库应该没有问题。它只是从字符串创建 LINQ 表达式。

您可以使用 AJAX 调用运行 LINQ 查询并返回 JSON 数据的操作方法。JQuery 将从返回的数据中填充 HTML。**

# java - 参数传递问题

> ID：10176896
> 
> 赞同：0
> 
> 时间：2012-04-16T15:17:11.687
> 
> 标签：java, parameters, parameter-passing

我有一个参数传递问题。

我有 2 个表格。表格 A 是主表格，表格 B 是从表格 A 打开的。

在表单 AI 中有一个特定类型的对象列表。表格 B 的工作是为表格 A 创建一个新对象以添加到上述列表中。因此，当 Form B 从用户输入的数据创建对象时，我需要它将对象传递给 Form A，然后它会关闭。这就是我的问题所在，我使用什么逻辑将创建的对象传递给父表单？

伪代码示例：

类形式A：{变量声明列表a；表格 B；

动作：按下按钮；显示表格 B

}

B类：

{ 变量：文本字段 1，文本字段 2；

行动：按下提交按钮；使用在 textFields 中输入的值创建新的 Obj }

当在 Form B 中创建新对象时，Form B 将关闭，我希望将对象添加到 Form A 中的列表中。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:44:59.803

这取决于您的应用程序有多复杂。在一个简单的应用程序中，我会将 Form A 的引用传递给 Form B。当 Form B 关闭时，它可以调用 Form A 的方法来传递创建的对象并刷新自身。

# php - 从mysqli返回的php格式日期

> ID：10176897
> 
> 赞同：0
> 
> 时间：2012-04-16T15:17:14.920
> 
> 标签：php, date, mysqli

我有一个返回日期的查询，我想在将其显示给页面上的用户之前对其进行格式化。但是，当我使用格式时，日期似乎为空（显示 1969 年）。下面是获取数据的代码：

```
$sql = 'SELECT u.username, td.postingText, td.createdOn, td.lastUpdated
        FROM threadDetails td, users u
        WHERE blogThreadId = ?
        AND td.userId = u.userId
        order by td.createdOn DESC';
$stmt = $conn->stmt_init();
$stmt->prepare($sql);
$stmt->bind_param('s', $blogThreadId);
$stmt->bind_result($username, $postingText, $createdOn, $lastUpdated);
$stmt->execute();
$stmt->store_result();

$numrows = $stmt->num_rows;
while ($stmt->fetch())
{
    $rowofdata=array(
        'username' => $username,
        'postingText' => $postingText,
        'createdOn' => $createdOn,
        'lastUpdated' => $lastUpdated,
    );  
    $results[] = $rowofdata;
}   
$stmt->close(); 
```

当我使用以下代码（在不同的函数中）打印出来时：

```
foreach ($threadData as $threadDetailItem)
{
    $msg = sprintf ("<tr>%s %s %s %s %s </tr>\n",
        "<td>" . $threadDetailItem['threadTitle'] . "</td>", 
        "<td>" . $threadDetailItem['username'] . "</td>", 
        "<td>" . $threadDetailItem['createdOn'] . "</td>", 
        "<td>" . $threadDetailItem['threadCount'] . "</td>", 
        "<td>" . $threadDetailItem['lastUpdated'] . "</td>");
    echo $msg;
} 
```

它打印出来（对于我创建的 On 或 last Updated 字段）：

2012-04-15 16:14:55

当我替换 sprintf 行的部分时：

```
 "<td>" . $threadDetailItem['createdOn'] . "</td>", 
```

和：

```
 "<td>" . date("F j, Y, g:i a", $threadDetailItem['createdOn']) . "</td>", 
```

我明白了

“1969 年 12 月 31 日，晚上 7:33”和我的 phplog 中的一条消息，说明遇到了格式不正确的数值。我需要做什么才能正确显示正确的日期？我尝试将 sprintf 从 %s 更改为 %d，但这不起作用。

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T15:20:15.087

这是因为`$threadDetailItem['createdOn']`是一个字符串，并且该`date()`函数需要一个数字时间戳。首先使用`strtotime()`PHP 函数将字符串转换为时间戳：

```
date("F j, Y, g:i a", strtotime($threadDetailItem['createdOn'])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T06:24:41.537

首先必须使用`strtotime`函数将字符串转换为时间戳。

```
$date=$variable['from-database'];
date("Y-m-d",strtotime($date)) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T15:32:24.183

PHP 的 date() 函数使用 unix 时间戳[http://en.wikipedia.org/wiki/Unix_time](http://en.wikipedia.org/wiki/Unix_time)，而不是日期字符串。

我真的建议您更改数据库架构以使用 BIGINT 并将日期信息与日期（“U”）一起存储。如果您这样做，您将使用日期和语言环境格式绕过 hazzel。您也可以使用 INT，但如果您这样做，系统可以处理 2038 年之后的日期。

您可以使用 strtotime() 函数[http://se2.php.net/manual/en/function.strtotime.php](http://se2.php.net/manual/en/function.strtotime.php)。

```
date("F j, Y, g:i a", strtotime($threadDetailItem['createdOn'])) 
```

但是，如果您的日期存储在错误的语言环境中，它会给您错误的答案。当我说日期字符串和语言环境可能是一团糟时，请相信我。这就是为什么您应该始终将日期存储在 unixtimestamp 中。

# c# - 一个只允许 N 个并发线程的函数

> ID：10176898
> 
> 赞同：14
> 
> 时间：2012-04-16T15:17:22.390
> 
> 标签：c#, multithreading, .net-3.5

我有一个 Visual Studio 2008 C# .NET 3.5 项目，其中一个类侦听来自另一个多线程类的事件调用。我需要确保我的事件只允许同时访问最多 10 个线程。第 11 个线程应该阻塞，直到 10 个线程之一完成。

```
myobj.SomeEvent += OnSomeEvent;

private void OnSomeEvent(object sender, MyEventArgs args)
{
    // allow up to 10 threads simultaneous access. Block the 11th thread.
    using (SomeThreadLock lock = new SomeThreadLock(10))
    {         
        DoUsefulThings(args.foo);
    }
} 
```

我无法控制其他`MyObj`类，因此我无法在那里实现线程池。

实现这一点的最佳方法是什么？

谢谢，保罗

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-16T15:18:57.647

你想要[Semaphore 类](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)。简而言之，它是一个在任何时候只允许指定数量的调用者通过的锁。

由于您不控制线程的创建，因此您确实需要小心死锁情况。信号量不是可重入感知的——如果给定线程多次进入一个信号量，它将占用多个槽。因此，如果您的调用者的每个线程都多次进入您的信号量，则可能会出现死锁。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-16T15:31:30.227

`Semaphore`为此使用 a 。构造函数参数对于那些刚刚被引入类的人来说有点混乱。第一个参数指定*现在*允许通过的初始线程数。第二个参数指定在任何给定时间允许通过的最大线程数。

```
myobj.SomeEvent += OnSomeEvent;
Semaphore semaphore = new Semaphore(10, 10);

private void OnSomeEvent(object sender, MyEventArgs args)
{
  semaphore.WaitOne();
  try
  {
    DoUsefulThings(args.foo);
  }
  finally
  {
    semaphore.Release();
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T15:19:51.553

通常为此使用信号量。将其初始化为 10 个单位。在 DoUsefulThings() 之前 wait() 一个单元，之后一个单元 signal()。

# c++ - 使用相同的迭代器循环两个 std::vector

> ID：10176899
> 
> 赞同：0
> 
> 时间：2012-04-16T15:17:27.237
> 
> 标签：c++, vector

所以，我的一个类有以下重载：

```
DVector &operator+=(DVector const &other) {
    if (vector.size() >= other.vector.size()) throw up; // lol.

    std::for_each(other.vector.begin(); other.vector.end(), [](DVector const &pass) {
        // huh?
    });
} 
```

因此，我们的想法是将两个向量的每个成员相加（嗯，每个`DVector`实例都包含一个`std::vector<float>`名为 的成员`vector`），例如：

如果我有一个`DVector`包含`vector`包含以下浮点数的成员：`11.0, 23.5, 12.3`，然后另一个包含`14.0, 6.5, 7.7`，则两者的总和应导致第一个向量保持`25.0, 25.0, 25.0`。

问题：假设向量的大小不是问题，是否有任何方法可以遍历两个向量并仅使用一个迭代器对它们的成员求和，或者我只是被迫使用 a `for (auto x: vector.size())`？

干杯，朱利安。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:22:49.833

这是一个 std::transfom 算法，它接受两个输入和一个输出迭代器。

我不知道您具体的矢量设计是如何构建的，但您应该能够根据需要修改以下内容。

```
 std::transform(input1.begin(), input1.end(),  //input1
                intput2.begin(),               //input2
                input1.begin(),                //output 
     [](double a, double b){
          return a+b;
     }); 
```

您也可以为您提供不同的输出迭代器`operator +`。

这里有一些参考

[http://en.cppreference.com/w/cpp/algorithm/transform](http://en.cppreference.com/w/cpp/algorithm/transform)

[http://www.cplusplus.com/reference/algorithm/transform/](http://www.cplusplus.com/reference/algorithm/transform/)

当你有不同的输出时， back_inserter 是你的朋友：

[http://en.cppreference.com/w/cpp/iterator/back_inserter](http://en.cppreference.com/w/cpp/iterator/back_inserter)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:20:49.517

迭代器与容器绑定，因此您不能使用单个迭代器。您必须使用一个索引或两个单独的迭代器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T15:22:08.070

如果我正确理解您的需求：

```
std::transform(vec1.begin(), vec1.end(), vec2.begin(), vec1.begin(),
    [](float lhs, float rhs) {
        return lhs + rhs;
    }); 
```

# ruby-on-rails - Ruby on Rails 与 Wordpress 网站集成

> ID：10176901
> 
> 赞同：1
> 
> 时间：2012-04-16T15:17:39.867
> 
> 标签：ruby-on-rails, wordpress

我正在开发一个 Ruby on Rails 练习列表应用程序 (https://rbzexercise.herokuapp.com)，并且正在尝试将其与 Wordpress 站点 (http://www.rubberbanditz.com) 集成。有没有简单的方法来进行集成？正如你所看到的，两者都相当成熟，所以我真的不想重写任何一个。现在我正在使用一种解决方法，它涉及页面[http://rubberbanditz.com/exercise-library/](http://rubberbanditz.com/exercise-library/)中的 iframe ，但我们没有从中获得任何“谷歌果汁”。

更新：

根据评论，我已经开始考虑将应用程序集成到 exercise.rubberbanditz.com，但按照[https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)上的指示似乎并没有完成这项工作. 去executive.rubberbanditz.com 时，我会自动转到主页。有没有人有将 Rails 应用程序设置为子域的经验，你能指点我一个好的教程吗？

谢谢你的帮助！杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:40:39.250

您的 iframe 方法很好，但可能会导致 seo 问题，因为您的所有链接都被困在 iframe 中。

另一种选择是采用您的 WordPress 主题并在您的`/app/views/layouts/application.html.erb`模板中重建它。完成后，创建一个子域（可能是 app.rubberbanditz.com 或锻炼.rubberbanditz.com）并设置您的 heroku 应用程序以使用新的子域。

Google 应该将这两个子域视为同一个网站，尤其是当您共享通用导航元素并且两个站点经常相互链接时。

最大的缺点是现在你必须在两个不同的地方更新你的设计，这可能是一个巨大的痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:25:27.863

我之前使用过这种方法 [running-php-inside-a-rails-app](http://blog.hulihanapplications.com/browse/view/27-running-php-inside-a-rails-app)，用于在 rails 应用程序中运行 php。由于我只是渲染一个页面，因此不确定 wordpress 是否需要任何额外的东西。

# zend-framework - Smarty With Zend Framework 找不到 index.tpl 但 clearlu 显示其他视图

> ID：10176903
> 
> 赞同：0
> 
> 时间：2012-04-16T15:17:46.370
> 
> 标签：zend-framework, smarty

对于我的生活，我无法理解这个特殊情况！我正在本地机器上做一个项目，一切正常。但是在将其上传到远程服务器后，我会收到此错误

```
 PHP Fatal error:  Uncaught exception 'Zend_View_Exception' with message 'script ''index'/index.tpl' not found in path (/home6/shawndre/application/modules/default/views/scripts/)' in /home6/shawndre/zf/library/Zend/View/Abstract.php:988 
```

此错误仅出现在 indexController indexAction 页面上。

我在这个上拔头发！任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T12:17:34.057

该错误是由我在`application.ini`. 我使用单引号`'`而不是双引号`"`。

将默认控制器的值更改为`"index"`而不是`'index'`固定它。让我搔胡须！

# android - 访问 ArrayAdapter 中的复选框返回 NULL

> ID：10176904
> 
> 赞同：0
> 
> 时间：2012-04-16T15:17:49.943
> 
> 标签：android, android-layout, layout

我正在开发一个 Android 3.1 应用程序。

我有一个`ListView`哪些项目是复选框。有`ListView`一个`Button`.

如果选中了一个或多个复选框，我正在尝试启用该按钮。这是我的代码：

```
public class FormAdapter extends ArrayAdapter<Form>
{
    private Context context;
    private int layoutResourceId;
    private List<Form> forms;
    private ArrayList<String> checkedItems;

    public ArrayList<String> getCheckedItems()
    {
        return checkedItems;
    }

    public FormAdapter(Context context, int textViewResourceId,
            List<Form> objects)
    {
        super(context, textViewResourceId, objects);

        this.context = context;
        this.layoutResourceId = textViewResourceId;
        this.forms = objects;
        this.checkedItems = new ArrayList<String>();
    }

    @Override
    public View getView(final int position, final View convertView, ViewGroup parent)
    {
        View row = convertView;
        if (row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);
        }

        Form f = forms.get(position);
        if (f != null)
        {
            CheckBox checkBox = (CheckBox)row.findViewById(R.id.itemCheckBox);
            if (checkBox != null)
            {
                checkBox.setText(f.Name);
                checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
                {
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked)
                    {
                        Form f = forms.get(position);
                        if (isChecked)
                        {
                            checkedItems.add(f.FormId);
                        }
                        else
                        {
                            checkedItems.remove(checkedItems.indexOf(f.FormId));
                        }

                        Button dButton = (Button)convertView.findViewById(R.id.downloadFormsButton);
                        dButton.setEnabled(checkedItems.size() > 0);
                    }
                });
            }
        }

        return row;
    }
} 
```

但它不起作用，因为它`dButton`是 NULL。

我变了

```
public View getView(int position, View convertView, ViewGroup parent) 
```

对此

```
public View getView(final int position, final View convertView, ViewGroup parent) 
```

因为 eclipse 向我推荐了它。

我的错误在哪里？

**注意：**[当用户在列表项中标记复选框时](https://stackoverflow.com/questions/10175353/enable-a-button-when-user-mark-a-checkbox-inside-a-list-item)，此问题与启用按钮有关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:27:39.133

问题出在这句话上：

```
Button dButton = (Button)convertView.findViewById(R.id.downloadFormsButton); 
```

在这里，您正在调用`findViewById`列表项视图 - 但该方法仅在您的`convertView`.

最好的办法是将此按钮从活动传递到适配器的构造函数中 - 如下所示：

```
public class FormAdapter extends ArrayAdapter<Form>
{
    private Button btnDownload;
    ........

    public FormAdapter(Context context, int textViewResourceId, List<Form> objects, Button btn)
    {
        ........
        btnDownload = btn;
        ........
    }

    @Override
    public View getView(final int position, final View convertView, ViewGroup parent)
    {
        .......

            btnDownload.setEnabled(checkedItems.size() > 0);

        .......
    }
} 
```

然后在您的活动中：

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    .......

    Button btn  = (Button)this.findViewById(R.id.downloadFormsButton);

    .......

    FormAdapter adapter = new FormAdapter(this, textResId, objects, btn);

    .......
} 
```

# xquery - 不要在使用 MarkLogic 的构面中包含重复数据

> ID：10176907
> 
> 赞同：2
> 
> 时间：2012-04-16T15:17:54.247
> 
> 标签：xquery, marklogic

我正在使用带有新 api search:search 的构面进行搜索，但我遇到了下一个问题：

我的来源：文件#1

```
<root>
<location>
<university>
<name>Yale</name>
<country>USA</country>
</university>
</location>
<location>
<university>
<name>MIT</name>
<country>USA</country>
</university>
</location>
<location>
<university>
<name>Santander</name>
<country>Spain</country>
</university>
</location>
</root> 
```

文件 #2

```
<root>
<location>
<university>
<name>MIT</name>
<country>USA</country>
</university>
</location>
</root> 
```

我需要知道每个国家/地区的大学数量，但是方面返回给我包含一个国家/地区的文件数量或所有文件中重复大学的位置数量，因此在最后一个数据示例中，它返回给我的是 2选项。

第一个选项（使用频率顺序）

美国 - 2（在美国至少有一个位置的文件数量）西班牙 - 1

第二个选项（使用项目频率）

美国 - 3 西班牙 - 1

结果应该是这样的：

美国 - 2（因为在两个文件中只有两所大学）西班牙 - 1

我怎样才能做到这一点？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:48:52.160

我认为您需要 item-frequency 选项，而不是默认的 fragment-frequency 选项。您将其作为所谓的 facet-option 添加到约束中。更多详细信息和示例可以在 CMC 上找到：http: [//community.marklogic.com/pubs/5.0/apidocs/SearchAPI.html#search :search](http://community.marklogic.com/pubs/5.0/apidocs/SearchAPI.html#search:search)

- 编辑 -

我想我没有仔细阅读你的问题。搜索库专注于搜索结果，而分面则依赖于片段。提高计数的最简单方法是将`location`元素定义为片段根。但是，我认为这不会真正返回您正在寻找的数字。国家方面实际上只计算国家的发生率，而不是国家内的大学。您无法通过搜索库实现这一目标。不过自己动手并不难：

```
for $country in cts:element-values(xs:QName('country'))
let $universities := cts:element-values(xs:QName('university'), (), cts:element-value-query(xs:QName('country'), $country))
return fn:concat($country, ' - ', fn:count($universities)) 
```

注意：未经测试的代码，但它至少显示了基本步骤。它还要求国家不要出现在相同的片段中。您需要`location`在 ML 管理界面中添加为片段根。

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T22:49:43.330

尝试 cts:element-value-co-occurrences with name 和 country

# windows - 从 main() 调用 LoadLibrary 是否安全？

> ID：10176910
> 
> 赞同：0
> 
> 时间：2012-04-16T15:18:01.137
> 
> 标签：windows, dll, native

`LoadLibrary()`我读过从 DllMain [[source]](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)调用是不安全的。

但是从控制台应用程序的入口点调用是否安全`main()`？我似乎找不到任何关于此的信息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:24:53.823

是的，它是安全的。如果你不能`LoadLibrary`从`main`你不能从控制台进程中的任何地方调用它，那将是愚蠢的。

`DllMain`之所以特殊，是因为在调用期间持有“加载器锁”，并且在进程完全初始化之前调用它（对于静态链接的 DLL）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:34:56.117

从您自己的链接：

> 入口点函数应该只执行简单的初始化或终止任务。它不能调用 LoadLibrary 或 LoadLibraryEx 函数（或调用这些函数的函数），因为**这可能会在 DLL 加载顺序中创建依赖循环**。

由于控制台应用程序不是 DLL 加载链的一部分，因此它是安全的

# asp.net - asp.net 动态数据网站：在插入/更新记录时传递默认值

> ID：10176911
> 
> 赞同：3
> 
> 时间：2012-04-16T15:18:03.207
> 
> 标签：asp.net, asp.net-dynamic-data

我在 ASP.NET 动态数据 Web 应用程序中工作，并且在插入/更新记录时遇到了传递默认值的问题。在我的应用程序中，所有表都有以下公共列：

*   CreatedBy（默认值：登录用户）
*   CreatedDate（默认值：DateTime.Now）
*   modifiedBy（默认值：登录用户）
*   修改日期（默认值：DateTime.Now）

我想将这些列隐藏在页面中`Insert`，`Edit`并希望将默认值自动插入相应的列中。

请给我建议。

谢谢保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:44:34.657

我看到您正在做简单的审计，请查看我的博客文章，[使用 Entity Framework 4.x 对动态数据进行基本审计，](http://csharpbits.notaclue.net/2012/02/basic-auditing-for-dynamic-data-with.html)希望对您有所帮助。

在页面中做这种事情从来都不是一件好事，最好在你的数据模型/层中做。您可以使用我[的 A New Way To Do Column Generation in Dynamic Data ...](http://csharpbits.notaclue.net/2010/02/new-way-to-do-column-generation-in.html)隐藏所有页面中的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:22:57.413

**参考：**
[维护数据库更改日志 - 第 1 部分](http://www.4guysfromrolla.com/webtech/041807-1.shtml)

> 为了维护数据库数据更改的历史记录，我们需要将每次插入、更新和删除记录到某种“历史”表中。除了捕获插入、更新或删除的数据之外，我们还需要记录修改的用户，以及修改的日期和时间。

更多参考：

[变更日志/审计数据库表的最佳设计？](https://stackoverflow.com/questions/201527/best-design-for-a-changelog-auditing-database-table)
[使用触发器记录对数据库表的更改](https://stackoverflow.com/questions/899825/log-changes-to-database-table-with-trigger)

**要自定义 ORM 实体框架，请检查以下链接：**

[如何在实体框架中使用数据库中的默认列值？](https://stackoverflow.com/questions/584556/how-to-use-default-column-value-from-database-in-entity-framework)
[如何：保存更改时执行业务逻辑](http://msdn.microsoft.com/en-us/library/cc716714.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T15:47:37.290

我最终实施的解决方案：

```
protected void FormView1_ItemInserting(object sender, FormViewInsertEventArgs e)
   {
      e.Values.Add("CreatedBy", HttpContext.Current.User.Identity.Name);
      e.Values.Add("CreatedDate", DateTime.Now);
    }

 protected void FormView1_ItemUpdating(object sender, FormViewUpdateEventArgs e)
    {
      e.OldValues.Add("ModifiedBy", null);
      e.OldValues.Add("ModifiedDate", null);
      e.NewValues.Add("ModifiedBy", HttpContext.Current.User.Identity.Name);
      e.NewValues.Add("ModifiedDate", DateTime.Now);
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-28T13:55:35.873

我的解决方案与保罗的要求有点不同。

在文件*DynamicData\PageTemplates\Insert.aspx.cs 中*，我进行了编辑以显示我在任何具有共享字段的表中的新记录的默认值。用户仍然可以在插入时放入其他内容。

```
public partial class Insert : System.Web.UI.Page
{
    protected MetaTable table;

    protected void Page_Init(object sender, EventArgs e)
    {
        table = DynamicDataRouteHandler.GetRequestMetaTable(Context);
        var values = table.GetColumnValuesFromRoute(Context);

        // set default values for meta data of new records across all tables
        // unknown values will be skipped
        values.Add("creationDate", DateTime.Now);
        values.Add("modificationDate", DateTime.Now);
        values.Add("modificationUser", HttpContext.Current.User.Identity.Name.Substring(
            HttpContext.Current.User.Identity.Name.IndexOf("\\") + 1));

        FormView1.SetMetaTable(table, values);
        DetailsDataSource.EntityTypeFilter = table.EntityType.Name;
    }
    [...]
} 
```

为了编辑具有现有值的记录，我对一些*DynamicData\FieldTemplates*文件进行了更改。

```
public partial class Text_EditField : System.Web.DynamicData.FieldTemplateUserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
        // ...

        // show current user as value for the modification user upon editing records
        if (Column.Name == "modificationUser")
        {
            FieldValue = Page.User.Identity.Name.Substring(Page.User.Identity.Name.IndexOf("\\") + 1);
        }
    }
    [...]
} 
```

它将在页面上显示更新后的值进行编辑，但更新后更改不会持续存在！需要对编辑页面模板进行额外更改：

```
 protected void FormView1_ItemUpdating(object sender, FormViewUpdateEventArgs e)
    {
        // make sure a meta data update is always triggered by setting a different old value
        // required for the edit components
        if (e.OldValues.Contains("modificationUser"))
        {
            e.OldValues["modificationUser"] = string.Empty;
            e.OldValues["modificationDate"] = DateTime.MinValue;
        }
    } 
```

# plugins - CKeditor : 通过CKeditor的配置配置插件

> ID：10176913
> 
> 赞同：3
> 
> 时间：2012-04-16T15:18:03.970
> 
> 标签：plugins, ckeditor

我正在寻找任何技巧来使用 CKEditor 配置中的参数配置我的插件。我必须传递一些只有在显示视图时才能传递的参数。

我想要这样的东西（带有 jQ​​uery 适配器的示例）：

```
jQuery('textarea.wysiwyg').ckeditor(function(){},{
        'width'             : '640px',
        'resize_maxWidth'   : '640px', 
        'extraPlugins'      : 'my_plugin',
        'toolbar'           : [['Bold', 'Italic', '-', 'NumberedList', 'BulletedList'],['Link', 'Unlink','-','MyPlugin'],['Paste','PasteFromWord'],['Source']]
        'my_plugin'         : {
              'param1'      : 'value1',
              'param2'      : 'value2',
        }

}); 
```

但是我还没有找到任何关于使用 CKEditor 进行插件配置的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:52:44.857

我回答我自己的问题：插件方法 init 接收编辑器作为参数，编辑器包含配置（可以称为 editor.config），因此您可以访问创建 ckeditor 实例时定义的所有配置。

在我的第一篇文章中使用我的示例，您可以像这样访问插件中的配置：

```
CKEDITOR.plugins.add( 'my_plugin',
{
    init: function( editor )
    {
        var param1 = editor.config.value1;
    }
} 
```

我认为这不是最好的方法，因为它向 CKEDITOR.config 原型添加了一些额外的属性。拥有一个属性 CKEDITOR.config.extraConfig 可能会更好，它是插件属性的映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:59:51.033

在编辑器初始化期间将值传递给插件

```
jQuery('textarea.wysiwyg').ckeditor(function(){}, 
{
        config.extraConfig : { 'param1' : 'value1', 'param2' : 'value2' }
}); 
```

并访问插件中的值

```
CKEDITOR.plugins.add( 'my_plugin',
{
    init: function( editor )
    {
        var param1 = editor.extraConfig.param1;
        var param2 = editor.extraConfig.param2;
    }
} 
```

# gcc - gcc 程序集中的本地变量

> ID：10176914
> 
> 赞同：3
> 
> 时间：2012-04-16T15:18:09.087
> 
> 标签：gcc, assembly, compiler-construction

当我编译下面的函数时： gcc -S teste.c

```
void readInput() {
    int buf;
} 
```

teste.S 变为：

```
readInput:
     pushl   %ebp
     movl    %esp, %ebp
     subl    $16, %esp
     leave
     ret 
```

我的疑问是：为什么从 16 个字节中减去 %esp，对于 int 不应该是 4 个字节吗？跟对齐有关系吗？

当我编译这个时会发生类似的事情：

```
void readInput() {
    char buf;
} 
```

并且输出与上面相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:52:24.703

对于 SSE2，堆栈可能保持 16 字节对齐。（有 128 位=16*8）寄存器。对于 64 位，这甚至是强制性的。

严格来说，对于使用叶子程序的非 SSE，这个要求可以省略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:45:05.827

### 缓存命中率

有几件事正在发生。

1.  未经优化的编译将留下代码生成器设计的工件。
2.  如果没有进一步的调用或 -g，则几乎不需要完整的堆栈帧。
3.  分配空间时*，如果函数不是叶节点，则在高速缓存行边界或 1 的 1/2* ^n子单元上分配可能是有意义的。这个想法是，未来的调用可能处于循环中，如果新的堆栈帧与两个缓存行重叠，或者*n* + 1 个缓存行，那么它们将浪费空间并降低命中率。一段时间以来，缓存命中率一直是至关重要的。由于同样的原因，您有时会看到模块和更大的数据结构过度对齐。当然，这与保持堆栈使用量小以提高缓存效率的合理目标相冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:25:21.963

基本问题是您没有使用优化，因此它不会努力最小化它分配的空间或它生成的代码。所以这里发生的是，为可能需要的东西分配了一堆堆栈空间（展开处理程序，调用 setjmp/longjmp/alloca 或其他编译器内置函数），但在你的情况下不需要永远不要调用函数或使用可能需要它们的特性。

如果你使用优化（甚至只是`-O1`），这个空间将会消失，因为优化器会看到它未使用。

# jsp - 如何在网络服务器上托管 JSP 网站？

> ID：10176916
> 
> 赞同：6
> 
> 时间：2012-04-16T15:18:17.810
> 
> 标签：jsp, webserver, web-hosting, project-hosting

我有一个主要用 HTML 和 JSP 开发的网站，并访问 MySQL 数据库。以前从未将这样的网站上线，我想知道启动和在线运行所需的步骤是什么。我知道需要有一个网络服务器。如何在线托管 JSP 网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:26:11.470

您想自己安装 Web 服务器，还是想为 Java 主机付费？

在文件之间，有一个web.xml 文件（可能在WEB-INF 文件夹中）。你需要看一下它，它包含 webapp 配置。您还需要找出数据库配置参数的位置。为新的托管环境配置 webapp 后，您只需将其复制到网络服务器即可。它应该会自动加载。您可以先使用 java 网络服务器（如 tomcat）在本地计算机上尝试此操作。这将帮助您确定 webapp 配置设置。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:26:14.303

您需要一个像 tomcat 或 Jetty 这样的 servlet 容器来托管它。有托管服务提供商拥有它。

但您也可以使用 Google 应用引擎将其托管在那里（尽管那里不支持 mysql）

# sql - PostgreSQL libpq：PQNumber 和列别名

> ID：10176926
> 
> 赞同：1
> 
> 时间：2012-04-16T15:19:01.520
> 
> 标签：sql, c, postgresql, libpq

在 Postgres libpq sql 中有一个函数 PQfnumber：返回与给定列名关联的列号。

可以说我有一个选择：

```
select a.*, b.* from a, b where a.id = b.id 
```

现在如果我打电话

```
number = PQfnumber(pgresult, "a.id"); 
```

它将返回-1。

正确的方法是调用：

```
number = PQfnumber(pgresult, "id"); 
```

它返回 a.id 的位置。那么我需要如何调用该函数来获取 b.id 的列号？解决它的唯一方法似乎是写一个不同的选择：

```
select a.id as a_id, a.*, b.id as b_id, b.* from a, b where a.id = b.id

number = PQfnumber(pgresult, "b_id"); 
```

有没有其他办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:54:23.747

不，你找到了正确的方法。

当然，`a.id = b.id`在内部连接中（如示例代码中），您为什么要关心您查看的是哪一列？此外，有充分的理由*不*将`id`列作为每个表的主键。即使很多表都有单列整数键，如果您始终如一地命名包含给定表的主键的列，则可以使用更简洁和更有效的语法`JOIN ... USING`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:51:31.707

如果你使用这样的构造：

> ```
> number = PQfnumber(pgresult, "a.id"); 
> ```

那么你的查询应该包含这样的列别名：

```
SELECT a.id AS "a.id", b.* FROM a, b WHERE a.id = b.id; 
```

您的代码确实存在歧义，如果您尝试使用 PL/pgSQL 语言进行此类查询，您将收到`42702: ambiguous_column`异常。

我看到了唯一的出路——你应该为查询的所有雄心勃勃的列提供唯一的别名。事实上，为所有列指定别名是一种很好的做法，我总是这样做。

# asp.net - ASP.NET ASCX 使用实例变量

> ID：10176931
> 
> 赞同：4
> 
> 时间：2012-04-16T15:19:09.087
> 
> 标签：asp.net, instance-variables, ascx

假设我有一个 ASCX 用户控件，需要访问当前用户的全名。一个 ASPX 页面在顶部包含这一行

```
<%@ Register src="top.ascx" tagprefix="custom" tagname="top" %> 
```

和正文中的这一行：

```
<custom:top runat="server" /> 
```

ASPX 文件知道当前用户的用户 ID，并且可以确定他的全名。那么如何使用 ASPX 文件运行的代码将其信息提供给 ASCX 文件呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T15:23:10.040

在 UserControl 上声明一个属性并让父页面设置它。

在您的用户控件上：

```
public string FullName { get; set; } 
```

在 aspx 页面上，或者在后面的代码中设置它

```
YourUserControl.FullName = FullName 
```

或通过标记

```
<custom:top runat="server" FullName="<%= SomeProperty %>" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T15:23:03.287

您可以使用用户控件的[`Page`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.control.page.aspx)并将其转换为您的页面实例。然后，调用页面类的方法来获取用户名。

要在动态编译的项目中进行这项工作，您必须做更多的工作才能让控件识别动态编译页面的数据类型。[这是一个关于如何做的简短教程](http://aspalliance.com/1461_Page_and_User_Control_Communication.all)。

或者，正如[Brandon 所概述](https://stackoverflow.com/a/10176990/107625)的那样，做相反的事情，让您的页面告诉您的用户控制信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:25:17.877

这听起来您可能对页面生命周期的工作方式以及如何跨控件公开数据有误。例如，假设您的 ASPX 中有以下代码：

```
 public override void OnLoad(EventArgs e)
  {
       string userName = "Bob";
  } 
```

在 ASPX 文件中，您可以引用控件并在其上设置属性以传递数据：

```
 <custom:top ID="someControl" runat="server" /> 
```

您在`top`控件中公开一个属性，如下所示：

```
 public string UserName { get; set; } 
```

然后，您可以将此代码添加到您的`OnLoad`方法中：

```
 someControl.UserName = userName; 
```

然后您的控件将有权访问该数据。或者，如果您没有直接连接到控件的线路，您可以将内容粘贴到请求缓存中：

```
 HttpContext.Current.Items["key"] = userName; 
```

然后通过相同的方式从您的控件中提取数据：

```
 string fromCache = HttpContext.Current.Items["key"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T15:26:26.063

您可以通过多种方式解决此问题。我通常使用会话变量，因为用户将被绑定到会话。

在 ASPX 中（或当用户登录时）：

```
Session["UserFullName"] = GetFullName(); //Code to get full name here 
```

在 ASMX 中：

```
this.FullName = Session["UserFullName"]; //TODO: Check for null values 
```

# c++ - 连接超时时间更短

> ID：10176938
> 
> 赞同：1
> 
> 时间：2012-04-16T15:19:47.900
> 
> 标签：c++, windows, winapi, winsock

`connect`失败了`WSAETIMEDOUT`。这很好，但有没有办法缩短超时时间？也许像2-3秒？目前它似乎更高，比如 10 秒。

操作系统是 Windows，使用 Winsock 和 C++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:45:44.400

在调用`connect()`. 当它返回`WSAEWOULDBLOCK`错误时，`select()`使用您想要的任何超时间隔进行调用。如果`select()`报告套接字变为可写，则连接成功。如果`select()`报告超时，则关闭套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:27:05.990

之前有人问过这个问题：[WINSOCK - 为不存在的 IP 上的连接尝试设置超时？](https://stackoverflow.com/questions/6199122/winsock-setting-a-timeout-for-a-connection-attempt-on-a-non-existing-ip)

不，它由 IP 堆栈处理。如果您需要更改此功能，则必须启动计时器并终止连接。

# swt - 在不滚动的情况下填充 Eclipse RCP 编辑器的可见区域

> ID：10176942
> 
> 赞同：2
> 
> 时间：2012-04-16T15:19:51.723
> 
> 标签：swt, eclipse-rcp

这是一个关于采用哪种一般方法的问题，所以我没有包含任何代码。

**要求：** 我需要在一个多页面编辑器中创建一个页面，其中包含两个垂直部分。顶部有一个树，底部有一个文本字段。树和文本字段应填充各自的部分。每个部分都应该独立滚动，并且在它们之间应该有一个分隔符。打开编辑器时，我希望根据我提供的某个比例将编辑器的可见区域划分为两个部分。然后当编辑器调整大小时，这两个部分会按比例调整以保持比例并适合页面。这样编辑器页面本身就不会有滚动条，只有两个部分。

**建议的解决方案：** 我的想法是`SashForm`在编辑器页面中添加一个，并将 的大小设置`SashForm`为与编辑器的可见区域相同。然后我会向编辑器页面添加一个调整大小的侦听器并调整它的大小`SashForm`，使其与页面保持同步。但是，我找不到获取编辑器可见区域的方法。因此，当我添加`SashForm`它时，它只会使每个部分足够大以容纳其数据并在编辑器页面本身上添加滚动。

能不能满足我的要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:26:09.557

成功！关键是在`ScrolledForm`. 我只在 Fedora 上进行了测试，但我很快就会在 Windows 上进行测试。唯一困扰我的是缓冲区常量的使用似乎有点 hacky。

```
/**
 * Form page that contains a sash form and a button.  The sash form is dynamically sized to ensure
 * that it always fills the available space on the page.
 */
public class SashFormDemoPage extends FormPage
{
    /** Horizontal buffer needed to ensure that content fits inside the page */
    private static final int HORIZONTAL_BUFFER = 8;
    /** Vertical buffer needed to ensure that content fits inside the page */
    private static final int VERTICAL_BUFFER = 12;

    /** Percentages of the sash form occupied by the tree and text box respectively */
    private static final int[] SASH_FORM_WEIGHTS = new int[] {30, 70};

    /**
     * Constructor
     * 
     * @param editor    parent editor
     */
    public SashFormDemoPage(ComponentEditor editor)
    {
        super(editor, "sashFormDemoPage", "Demo");
    }

    /**
     * {@inheritDoc}
     */
    @Override
    protected void createFormContent(IManagedForm managedForm)
    {
        // Set page title
        ScrolledForm scrolledForm = managedForm.getForm();
        scrolledForm.setText("SashForm Demo");

        // Set page layout and add a sash form
        final Composite parent = scrolledForm.getBody();
        parent.setLayout(new GridLayout());
        final SashForm sashForm = new SashForm(parent, SWT.VERTICAL);

        // Add a tree as the top row of the sash form and fill it with content
        FormToolkit toolkit = managedForm.getToolkit();
        int style = SWT.SINGLE | SWT.H_SCROLL | SWT.V_SCROLL | SWT.BORDER;
        Tree tree = toolkit.createTree(sashForm, style);

        for (int i = 0; i < 40; i++) {
            TreeItem parentNode = new TreeItem(tree, SWT.NONE);
            parentNode.setText("parent-" + i);
            for (int j = 0; j < 3; j++) {
                TreeItem childNode = new TreeItem(parentNode, SWT.NONE);
                childNode.setText("child-" + i + "-" + j);
            }
        }

        // Add a text box as the bottom row of the sash form and fill it with content
        style = SWT.MULTI | SWT.V_SCROLL | SWT.WRAP | SWT.BORDER;
        Text text = toolkit.createText(sashForm, null, style);

        String message = "";
        for (int i = 0; i < 100; i++) {
            message += "This is a test of the layout demo system.  This is only a test.  ";
        }
        text.setText(message);

        // Add button below sash form
        final Button button = toolkit.createButton(parent, "Test", SWT.NONE);

        // Add resize listener to sash form's parent so that sash form always fills the page
        parent.addControlListener(new ControlListener() {
            @Override
            public void controlMoved(ControlEvent e)
            {
                // Stub needed to implement ControlListener
            }

            @Override
            public void controlResized(ControlEvent e)
            {
                GridData data = new GridData();
                Point size = parent.getSize();
                data.widthHint = size.x - HORIZONTAL_BUFFER;
                data.heightHint = size.y - button.getSize().y - VERTICAL_BUFFER;
                sashForm.setLayoutData(data);
            }
        });

        // Set sash form's weights and pack its parent so that the initial layout is correct
        sashForm.setWeights(SASH_FORM_WEIGHTS);
        parent.pack();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:12:24.983

为什么要显式设置大小`SashForm`？为什么不直接将它添加到`Composite`编辑器的父级？父级`Composite`有一个`FillLayout`，因此`SashForm`自动填充编辑器区域。

# java - 如何清除状态 401 HttpServletResponse.SC_UNAUTHORIZED？

> ID：10176943
> 
> 赞同：2
> 
> 时间：2012-04-16T15:19:56.887
> 
> 标签：java, servlets, servlet-filters

我为我的 Java/Tomcat 应用程序创建了一个过滤器，它使用 spnego 通过 kerberos 对用户进行身份验证。除非用户关闭了 IWA（集成 Windows 身份验证），否则它的效果非常好。过滤器所做的第一件事是设置 SC_UNAUTHORIZED (401) 以便让浏览器进行协商。

```
httpResponse.setStatus(HttpServletResponse.SC_UNAUTHORIZED, true); 
```

一旦发生这种情况，它将运行相同的路径并一遍又一遍地失败，并最终得到一个空白页面。我所做的是添加一个会话变量来计算失败次数。三次失败后，我想清除 SC_UNAUTHORIZED 并让页面继续加载。所有这一切都意味着用户最终会进入网站但没有登录，这很好。

我试过这个来清除标志，但它什么也没做：

```
System.out.println("check status 1: " + httpResponse.getStatus());
httpResponse.setStatus(HttpServletResponse.SC_OK);
System.out.println("check status 2: " + httpResponse.getStatus()); 
```

两个打印件仍然是 401。我原以为第二个打印件是 200。设置后如何更改 SC_UNAUTHORIZED？我知道我只是缺少一些简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:56:21.277

您是否尝试过以下操作：

```
httpResponse.sendError(HttpServletResponse.SC_UNAUTHORIZED); 
```

如果是*基本身份验证*，您还可以在`sendError`：

```
httpResponse.setHeader("WWW-Authenticate", "Basic realm=\"mycustomrealm\""); 
```

# java - 使用 JDBC 的 Java - 连接太多？

> ID：10176945
> 
> 赞同：5
> 
> 时间：2012-04-16T15:20:10.570
> 
> 标签：java, mysql, jdbc

我正在为一家酒吧编写一个库存补充系统作为我最后一年的项目。我可以从 MYSQL 数据库中检索信息，并且一次可以滚动浏览一个结果。

我正在尝试根据所选类别更改结果。我已经设法使用组合框来实现这一点，但是在类别之间移动时出现以下错误：

> 线程“主”com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException 中的异常：数据源拒绝建立连接，来自服务器的消息：“连接太多”

两个独立文件的代码如下：

*   中的 SQL 查询`RetrieveStockQuery`

    ```
    public JComboBox getComboBox() throws SQLException {
      con = SQLConnect.getConnection();
      combo = new JComboBox();
      combo.removeAllItems();
      try {
        stat = con.createStatement( ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE );
        rs = stat.executeQuery("SELECT categoryName FROM Category");

        while (rs.next()) {
          combo.addItem(rs.getString("categoryName"));
          categoryName = rs.getString("categoryName"); 
        }
      }
      catch (SQLException sqle) {
        System.out.println(sqle);
        stat.close();
        con.close();
      }
      return combo;
    }

    //----------------------------------------------------------------

    public void retrieveStock() throws SQLException { 

      con = SQLConnect.getConnection();
      stockGUI = new ViewStockGUI(); // I THINK THIS IS WHAT IS CAUSING THE ERROR   

      String viewStock = "SELECT * FROM Stock where categoryName = '" + "'" + stockGUI.selected + "'";
      System.out.println(viewStock);

      try {
        stat = con.createStatement( ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE );
        rs = stat.executeQuery(viewStock);

        while(rs.next()){
          stockID = rs.getInt("stockID");
          stockName = rs.getString("stockName");
          stockDescription = rs.getString("stockDescription");
          stockPrice = rs.getFloat("stockPrice");
          stockQuantity = rs.getInt("stockQuantity");
          categoryName = rs.getString("categoryName");  

          ID = Integer.toString(stockID);
          price = Float.toString(stockPrice);
          quantity = Double.toString(stockQuantity);
          stat.close();
          con.close();

          System.out.println( "Stock ID: " + stockID + " Stock Name: " + stockName + " Stock Description: " + stockDescription + " Stock Price: " + stockPrice + " Stock Quantity:" + stockQuantity + " Category: " + categoryName);
        }    
      }  
      catch (SQLException err) {
        System.out.println(err.getMessage());   
      }
    } 
    ```

*   我的`ViewStockGUI`班级

    ```
     public class ViewStockGUI extends JPanel {

        private static final long serialVersionUID = 1L;
        final JFrame viewFrame;
        ViewStockQuery stockQuery;
        ViewStockQuery stockName;
        JComboBox comboGUI;
        String selected;
        JComboBox combo;

        public ViewStockGUI() throws SQLException {

          final ViewStockQuery stock = new ViewStockQuery();

          comboGUI = stock.getComboBox();
          stock.retrieveStock();
          viewFrame = new JFrame("View Stock");

          JPanel p = new JPanel();
          p.setBorder (new TitledBorder(new LineBorder(Color.black, 1, true)));
          p.setPreferredSize(new Dimension(500,400));

          JPanel p2 = new JPanel();
          p2.setBorder (new TitledBorder(new LineBorder(Color.black, 1, true)));
          p2.setPreferredSize(new Dimension(500, 50));

          JPanel p3 = new JPanel();
          JPanel p4 = new JPanel();
          JPanel p5 = new JPanel();
          JPanel p6 = new JPanel();

          Box box = Box.createVerticalBox();        
          Box box2 = Box.createHorizontalBox();
          Box box3 = Box.createHorizontalBox();
          Box box4 = Box.createHorizontalBox();

          final JTextField textfieldStockName;
          final JTextField textfieldStockID;
          final JTextField textfieldStockDescription;
          final JTextField textfieldStockPrice;
          final JTextField textfieldStockQuantity;
          final JTextField textfieldStockCategory;

          final JLabel stockName = new JLabel("Name:");
          JLabel stockID = new JLabel("ID:");
          JLabel stockDescription = new JLabel("Description:");
          JLabel stockPrice = new JLabel("Price:");
          JLabel stockQuantity = new JLabel("Quantity:");
          JLabel categoryName = new JLabel("Category:");

          box.add(Box.createVerticalGlue());
          box.add(stockName);
          box.add(textfieldStockName = new JTextField(""));
          textfieldStockName.setText(stock.getStockName());
          textfieldStockName.setEditable(false);

          box.add(stockID);
          box.add(textfieldStockID = new JTextField(""));
          textfieldStockID.setText(stock.getStockID());
          textfieldStockID.setEditable(false);

          box.add(stockDescription);
          box.add(textfieldStockDescription = new JTextField(""));
          textfieldStockDescription.setText(stock.getStockDescription());
          textfieldStockDescription.setEditable(false);

          box.add(stockPrice);
          box.add(textfieldStockPrice = new JTextField(""));
          textfieldStockPrice.setText(stock.getStockPrice());
          textfieldStockPrice.setEditable(false);

          box.add(stockQuantity);
          box.add(textfieldStockQuantity = new JTextField(""));
          textfieldStockQuantity.setText(stock.getStockQuantity());
          textfieldStockQuantity.setEditable(false);

          box.add(categoryName);
          box.add(textfieldStockCategory = new JTextField(""));
          textfieldStockCategory.setText(stock.getStockCategory());
          textfieldStockCategory.setEditable(false);
          box.add(Box.createVerticalGlue());

          JButton next = new JButton("Next");
          next.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
              stock.doNext();
              textfieldStockName.setText(stock.getStockName());
              textfieldStockID.setText(stock.getStockID());
              textfieldStockDescription.setText(stock.getStockDescription());
              textfieldStockPrice.setText(stock.getStockPrice());
              textfieldStockQuantity.setText(stock.getStockQuantity());
              textfieldStockCategory.setText(stock.getStockCategory());
            }
          }); 

          JButton previous = new JButton("Previous");
          previous.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
              stock.doPrevious();
              textfieldStockName.setText(stock.getStockName());
              textfieldStockID.setText(stock.getStockID());
              textfieldStockDescription.setText(stock.getStockDescription());
              textfieldStockPrice.setText(stock.getStockPrice());
              textfieldStockQuantity.setText(stock.getStockQuantity());
              textfieldStockCategory.setText(stock.getStockCategory());
            }
          }); 

          final Counter counter = new Counter();
          final JLabel text = new JLabel(counter.getValue1());

          JButton plus = new JButton("+");
          plus.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
              counter.increment();
              text.setText(counter.getValue1());
            }
          }); 

        JButton minus = new JButton("-");
        minus.addActionListener(new ActionListener() {
          public void actionPerformed(ActionEvent e) {
            counter.decrease();
            text.setText(counter.getValue1());
          }  
        });

        JButton update = new JButton("Update");
        update.addActionListener(new ActionListener() {
          public void actionPerformed(ActionEvent e) {
            try {
              stock.updateStock(counter.getValue1());
            } 
            catch (SQLException e1) {
              e1.printStackTrace();
            }
            finally { // doesn't update yet; will work on this later
              textfieldStockQuantity.setText(stock.getStockQuantity());
            }
          }
        }); 

        comboGUI.addActionListener(new ActionListener() {
          public void actionPerformed(ActionEvent e) {
            try {
              combo = (JComboBox) e.getSource();
              selected = (String)combo.getSelectedItem();
              textfieldStockName.setText(stock.getStockName());
              textfieldStockID.setText(stock.getStockID());
              textfieldStockDescription.setText(stock.getStockDescription());
              textfieldStockPrice.setText(stock.getStockPrice());
              textfieldStockQuantity.setText(stock.getStockQuantity());
              textfieldStockCategory.setText(stock.getStockCategory());
              stockQuery.con.close();
            }
            catch (SQLException e1) {
              e1.printStackTrace();
            }
          }
        }); 

        box.add(comboGUI);      
        box2.add(previous);
        box2.add(next);
        box3.add(minus);
        box3.add(text);
        box3.add(plus);
        box4.add(update);

        p.add(box2);
        p.add(box);
        p.add(box3);
        p.add(box4);

        this.add(p, BorderLayout.SOUTH);
      }
    } 
    ```

如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T15:27:44.460

当您有太多打开的连接时，您会收到此异常。
这是可配置的，但在您的情况下，问题出在您的代码中。

您发布的代码很奇怪（至少）。
你要么不关闭连接，除非你得到一个`SQLException`或者你在处理结果集的过程中关闭它！

在任何情况下，您都应该在完成后立即重构代码以关闭连接和结果集等。
例子：

```
try { 

     stat = con.createStatement( ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE ); 
     rs = stat.executeQuery("SELECT categoryName FROM Category"); 

  while (rs.next()) { 
      combo.addItem(rs.getString("categoryName")); 
      categoryName = rs.getString("categoryName");  

  } 
} catch (SQLException sqle) { 
  System.out.println(sqle);   
} 
finally{
 if(stat != null) stat.close(); 
 if(con != null)  con.close(); 
} 
```

通过将关闭放在 a`finally`中，您可以确定连接以正确的流程或异常关闭（为了清楚起见，我省略`try-catch`了）。

所以以这种方式修改代码以关闭连接。

为了获得更好的性能，您应该研究连接池

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:43:48.013

我想我在您的代码中看到了问题。您的代码非常奇怪，但这是我认为正在发生的事情：

在你的`ViewStockQuery`课堂上，你有`retrieveStock()`方法。然后，此方法创建您的 GUI 类的实例，`ViewStockGUI`. 除了这种不好的做法外，它还会导致一个问题，因为在 的构造函数中`ViewStockGUI`，您在这一行的方法中调用了`retrieveStock()`它：

```
stockGUI = new ViewStockGUI(); 
```

然后您再次`retrieveStock()`使用此行调用：

```
final ViewStockQuery stock = new ViewStockQuery();

comboGUI = stock.getComboBox();
stock.retrieveStock(); 
```

这会导致递归问题，因为您的`ViewStockGUI()`构造函数调用`retrieveStock()`创建连接的方法并再次调用`ViewStockGUI()`构造函数，该构造函数将再次调用`retrieveStock()`尚未关闭连接的方法并尝试打开不同的连接。希望你能得到图片。

解决它的一种方法是清理你的代码。不要在`retrieveStock()`. 找到一种不同的方式为您的查询传递所选类别。

编辑：

像这样写你`ViewStockQuery`：

```
private String mSelected;

public ViewStockQuery(String selectedCategory) {
    mSelected = selectedCategory;
}

...

public void retrieveStock() throws SQLException { 

    con = SQLConnect.getConnection();

    String viewStock = "SELECT * FROM Stock where categoryName = '" + "'" + mSelected + "'";
    System.out.println(viewStock);

     try {
... 
```

然后以这样的方式编写您`ViewStockGUI`的方式，即选择类别时，即创建`ViewStockQuery`并传递选定的字符串时。

编辑：

就像我之前说的，你最终需要在代码中更改很多东西。但是，就本期而言，您可以在`ViewStockGUI`, 中执行以下操作：

```
String selected = (String)combo.getSelectedItem();
final ViewStockQuery stock = new ViewStockQuery(selected); 
```

第一行从组合框中收集所选类别，第二行创建一个实例并将所选类别`ViewStockQuery`传递给构造函数。然后，这将初始化 mSelected，正如您在上面为`ViewStockQuery`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:28:36.357

如果您想使用 JDBC（而不是 JPA），那么我建议使用Spring 中的[JdbcTemplate](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)或 Java SE 7 的自动资源管理（ARM）。（我还没有尝试使用 ARM 的 JDBC，但它应该可以工作。 )

基本上，您需要在 try-catch 子句的 finally 块中关闭 Closeables。

# javascript - 调试网页（Firebug、IE F12 工具）

> ID：10176954
> 
> 赞同：1
> 
> 时间：2012-04-16T15:21:10.643
> 
> 标签：javascript, debugging, firefox, firebug

我想知道如何使用调试器（Firebug 或 IE 的 F12 工具）逐步跟踪我发布后从网页收到的代码。

我的问题是我填写了一张表格，在发布表格后，我收到了一个回复，其中包含一些重定向和其他显然发生的事情。我想知道如何在 POST 上简单地停止执行并逐步执行正在发生的 javascript 代码，并确切了解重定向是如何形成的。

问题是我不能放置任何断点，因为在我发布之前我没有页面的响应......

我希望我对我的问题足够清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T15:26:07.867

您可以添加一条[`debugger;`语句](https://developer.mozilla.org/en/JavaScript/Reference/Statements/debugger)作为 JavaScript 代码的第一行，如果已注册，它将启动一个调试器。

因此，您需要做的就是确保在加载页面之前启动 Firebug，并且应该停止 JavaScript 执行以允许您单步执行程序。

您可以执行此操作的另一种（hacky）方法是将 a`alert()`或类似内容放置为第一行；an`alert()`会阻止程序流程，直到提示关闭。在不关闭警报的情况下，您可以在 . 之后的下一行可执行代码上放置一个断点`alert()`，然后`OK`是警报，然后进行调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:28:00.247

假设你安装了 IE9：

1.  按 F12。
2.  单击网络选项卡
3.  点击“开始拍摄”
4.  执行你的脚本
5.  您将在那里看到所有响应和重定向。

# sql - 远程访问Oracle sql server

> ID：10176957
> 
> 赞同：-1
> 
> 时间：2012-04-16T15:21:28.607
> 
> 标签：sql, database, oracle, jboss

好的，所以我开始在本地机器上工作，但我仍然需要访问远程服务器上的数据库。我用这个...

> DriverManager.registerDriver(new OracleDriver());
> 
> conn = DriverManager.getConnection("jdbc:oracle:thin:@dukeorrac01:1521:ORDB1","nrsc","nrsc");

但这似乎并没有访问远程服务器。我想我需要某种IP地址。我意识到我应该使用数据源，但我没有设置所有这些，我没有时间学习如何实现它（将在这个项目之后这样做）。

我如何远程访问它？

PS 我使用 jboss 作为本地运行的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:34:59.920

在您的连接字符串中， `"jdbc:oracle:thin:@dukeorrac01:1521:ORDB1","nrsc","nrsc"` **dukeorrac01**指的是`host`您的数据库所在的位置。将其替换为您要连接的任何主机（假设连接字符串的所有其他部分保持不变）。

这是oracle连接字符串的语法

`jdbc:oracle:thin:@[HOST][:PORT]:SID`

# playframework - 以可用的形式播放类路径？

> ID：10176961
> 
> 赞同：0
> 
> 时间：2012-04-16T15:21:33.763
> 
> 标签：playframework, playframework-1.x

如何以实际可直接使用的形式获得 Play 1.2.x 使用的 CLASSPATH？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:23:16.913

```
play classpath|tr ',' '\n'|tail -n +10|sed -ne "s|^.*'\([^']*\)'.*$|\1|p"|tr '\n' ':' 
```

# c# - 启动摄像头时抛出0x80131515

> ID：10176962
> 
> 赞同：3
> 
> 时间：2012-04-16T15:21:33.927
> 
> 标签：c#, silverlight, windows-phone-7

尝试使用以下代码将 PhotoCamera 设置为 VideoBrush 的源时出现上述错误：

```
camera = new PhotoCamera();
var videoBrush = new VideoBrush();
videoBrush.SetSource(camera);
AR.Background = videoBrush; 
```

我得到以下堆栈跟踪：

```
0x80131515
at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
at MS.Internal.XcpImports.VideoBrush_SetExternalVideoSource(VideoBrush vb, IntPtr& videoSessionHandle)
at System.Windows.Media.VideoBrush.SetUpExternalVideoSession()
at Microsoft.Devices.CameraVideoBrushExtensions.SetSource(VideoBrush brush, Camera camera)
at MyClass.MyFunction()
at System.Windows.Controls.Frame.FireEventHandler[T](EventHandler`1 handler, Object sender, OrientationChangedEventArgs args)
at Microsoft.Phone.Controls.PhoneApplicationPage.UIOrientationChange(ShellPageOrientation orientation) 
```

无论我是否附加了调试器，都会引发异常。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:21:56.940

好的，我现在已经解决了这个问题。我认为该解决方案可能会受到其他人的赞赏，所以在这里；

似乎不可能将 PhotoCamera 作为源分配给以编程方式创建的 VideoBrush，因此我编辑了我的 xaml 以包含

```
<Rectangle>
    <Rectangle.Fill>
        <VideoBrush x:Name="VB" />
    </Rectangle.Fill>
</Rectangle> 
```

随后是一个更简单的代码

```
VB.SetSource(new PhotoCamera()); 
```

此外，此代码包含在 OnOrientationChanged 事件中，该事件似乎多次触发，因此包含在

```
if (!processing)
{
    processing = true;

    VB.SetSource(new PhotoCamera());

    var bw = new BackgroundWorker();
    bw.DoWork += (object, sender) => {
        Thread.Sleep(250);
        processing = false;
    }
} 
```

代码运行流畅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:11:16.940

对我来说，使用`FrontFacing`in 属性`new PhotoCamera(CameraType.FrontFacing)`会导致错误`SetSource()`。使用`CameraType.Primary`而不是与以编程方式创建的`VideoBrush`. 你可能是这种情况吗？

# android - Android 中的 OOP 概念示例

> ID：10176964
> 
> 赞同：-1
> 
> 时间：2012-04-16T15:21:37.273
> 
> 标签：android, inheritance, polymorphism, encapsulation

嗨，我只是想知道在使用 JAVA 开发桌面应用程序然后在 Android 应用程序中实现它们时，与 OOP 概念有什么区别？

我只是想知道在我去做之前将这些概念放入我的 android 代码中是否有任何重大区别。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:33:39.170

编码风格完全没有区别，但是由于您正在为内存不足、屏幕小等的移动设备进行编码，因此在分配内存和其他资源时必须特别小心......

要获得权威指南，该做和不该做的参考[这个](http://developer.android.com/guide/practices/design/performance.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:23:51.107

没有不同。Android 使用 Java 作为编程语言，OOP 不依赖于编程语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:29:15.663

在基本基础上没有区别，因为您使用的是两者相同的核心 java，您编写 OOP 的方式也相同，但新的是您必须处理的类 android 根据需要而有所不同。例如：处理活动，是新的，在简单的java编程情况下不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T15:32:12.363

不仅没有区别，而且您可以而且应该在 Android 和桌面/服务器端应用程序之间重用完全相同的 OO 代码。

# c# - 如何跳过txt文件中的行

> ID：10176969
> 
> 赞同：0
> 
> 时间：2012-04-16T15:21:44.627
> 
> 标签：c#

嘿伙计们，我在从正在读入程序的 txt 文件中跳过一些不必要的行时遇到了一些麻烦。数据格式如下：

```
Line 1
Line 2
Line 3
Line 4

Line 5
Line 6
Line 7
Line 8 
```

我想阅读第 1 行，修剪第 3、4 行和空白，然后阅读第 5 行，修剪第 7 和 8 行。我在本网站上阅读了与此类似的内容，但是，该特殊情况跳过了前 5文本文件的行。这是我到目前为止所尝试的：

```
 string TextLine;

        System.IO.StreamReader file =
           new System.IO.StreamReader("C://log.txt");
        while ((TextLine = file.ReadLine()) != null)
        {

            foreach (var i in Enumerable.Range(2, 3)) file.ReadLine();
            Console.WriteLine(TextLine);

        } 
```

正如你们所看到的，对于范围，我已将开始指定为第 2 行，然后跳过 3 行，其中包括空格。但是， Enumerable.Range 的第一个参数似乎并不重要。我可以输入一个 0，它会产生相同的结果。正如我现在所拥有的那样，程序从第一行开始修剪，直到 .Range 函数的第二个参数中指定的数字。有谁知道解决这个问题的方法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:30:51.900

为什么不将所有行读入一个数组，然后只索引你想要的行

```
var lines = File.ReadAllLines("C://log.txt");
Console.WriteLine(lines[0]);
Console.WriteLine(lines[5]); 
```

如果它是一个具有一致重复部分的非常大的文件，您可以创建一个读取方法并执行以下操作：

```
while (!file.EndOfStream)
{
    yield return file.ReadLine();
    yield return file.ReadLine();
    file.ReadLine();
    file.ReadLine();
    file.ReadLine();
} 
```

或类似您需要的任何块格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:27:57.740

当然范围无关紧要......你正在做的是在每次while循环迭代中一次跳过2行 - 2-3对文件阅读器指针没有影响。我建议您只需有一个计数器告诉您您在哪一行，如果行号是您想跳过的行号之一，则跳过，例如

```
int currentLine = 1;
while ((TextLine = file.ReadLine()) != null)
{           
    if ( LineEnabled( currentLine )){
        Console.WriteLine(TextLine);
    }

    currentLine++;
}

 private boolean LineEnabled( int lineNumber )
 {
     if ( lineNumber == 2 || lineNumber == 3 || lineNumber == 4 ){ return false; }
     return true;
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T15:31:21.793

我认为您不想在两个地方阅读该行（一个在循环中，然后又在循环内）。我会采取这种方法：

```
while ((TextLine = file.ReadLine()) != null)
{
    if (string.IsNullOrWhitespace(TextLine)) // Or any other conditions
        continue;

    Console.WriteLine(TextLine);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T19:15:34.773

这是应 OP 的要求[在此处](https://stackoverflow.com/a/10177116/1159478)提供的解决方案的扩展版本。

```
public static IEnumerable<string> getMeaningfulLines(string filename)
{
  System.IO.StreamReader file =
    new System.IO.StreamReader(filename);
    while (!file.EndOfStream)
    {
      //keep two lines that we care about
      yield return file.ReadLine();
      yield return file.ReadLine();
      //discard three lines that we don't need
      file.ReadLine();
      file.ReadLine();
      file.ReadLine();
    }
}

public static void Main()
{
  foreach(string line in getMeaningfulLines(@"C:/log.txt"))
  {
    //or do whatever else you want with the "meaningful" lines.
    Console.WriteLine(line);
  }
} 
```

这是另一个版本，如果输入文件突然结束，它会变得不那么脆弱。

```
//Just get all lines from a file as an IEnumerable; handy helper method in general.
public static IEnumerable<string> GetAllLines(string filename)
{
  System.IO.StreamReader file =
    new System.IO.StreamReader(filename);
  while (!file.EndOfStream)
  {
    yield return file.ReadLine();
  }
}

public static IEnumerable<string> getMeaningfulLines2(string filename)
{
  int counter = 0;
  //This will yield when counter is 0 or 1, and not when it's 2, 3, or 4.
  //The result is yield two, skip 3, repeat.
  foreach(string line in GetAllLines(filename))
  {
    if(counter < 2)
      yield return line;

    //add one to the counter and have it wrap, 
    //so it is always between 0 and 4 (inclusive).
    counter = (counter + 1) % 5;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T15:28:52.093

状态的文档`Enumerable.Range`：

```
public static IEnumerable<int> Range(
int start,
int count
)

Parameters

start
 Type: System.Int32
 The value of the first integer in the sequence.

count
 Type: System.Int32
 The number of sequential integers to generate. 
```

所以改变第一个参数不会改变你程序的逻辑。

但是，这是一种奇怪的方法。`for`循环会更简单、更容易理解并且效率更高。

此外，您的代码当前读取第一行，跳过三行，然后输出第一行，然后重复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T15:29:51.663

你有没有尝试过这样的事情？

```
using (var file = new StreamReader("C://log.txt"))
{
    var lineCt = 0;
    while (var line = file.ReadLine())
    {
        lineCt++;

        //logic for lines to keep
        if (lineCt == 1 || lineCt == 5)
        {
            Console.WriteLine(line);
        }
    }
} 
```

尽管除非这是一个非常固定格式的输入文件，否则我会找到一种不同的方法来确定如何处理每一行而不是固定的行号。

# vb.net - 来自网页的文字

> ID：10176971
> 
> 赞同：0
> 
> 时间：2012-04-16T15:21:56.927
> 
> 标签：vb.net

我需要从此[网页](http://openbook.etoro.com/ahanit/#/profile/Trades/)获取一些文本。我想为我的程序使用交易源来分析市场情绪。

我使用了浏览器控件和 get element 命令，但它不起作用。问题是每当我的浏览器开始打开页面时，我都会收到 Java 脚本错误。

我尝试使用 DOM，但似乎我不太明白我需要做什么:) 这是代码：

```
Dim code As String
    Using client As New WebClient

        code = client.DownloadString("http://openbook.etoro.com/ahanit/#/profile/Trades/")
    End Using

    Dim htmlDocument As IHTMLDocument2 = New HTMLDocument(code)
    htmlDocument.write(htmlDocument)

    Dim allElements As IHTMLElementCollection = htmlDocument.body.all

    Dim allid As IHTMLElementCollection = allElements.tags("id")
    Dim element As IHTMLElement

    For Each element In allid
        element.title = element.innerText
        MsgBox(element.innerText)

    Next 
```

**更新：**所以我尝试了 HTML Agility 包，正如评论中所建议的那样，我再次被困在这段代码上

```
 Dim plain As String = String.Empty
    Dim htmldoc As New HtmlAgilityPack.HtmlDocument
    htmldoc.LoadHtml("http://openbook.etoro.com/ahanit/#/profile/Trades/")
    Dim goodnods As HtmlAgilityPack.HtmlNodeCollection =                               htmldoc.DocumentNode.SelectNodes("THE PROBLEM")

    For Each node In goodnods
        TextBox1.Text = htmldoc.DocumentNode.InnerText
    Next 
```

有什么建议吗？

好的，我想我知道问题出在哪里，我需要的 div 被隐藏了，当我只加载源代码时，它没有加载。有人知道如何加载所有隐藏的 div 吗？

这是我的新代码

```
Dim doc As New HtmlAgilityPack.HtmlDocument
    Dim web As New HtmlWeb

    doc = web.Load("http://openbook.etoro.com/ahanit/#/profile/Trades/")

    Dim nodes As HtmlNode = doc.GetElementbyId("feed-items")

    Dim id As String = nodes.WriteTo()
    TextBox1.Text = TextBox1.Text & vbCrLf & id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:45:34.953

用户1336635,

欢迎来到 SO！您可能会尝试查看他的源代码，找出填充您想要的字段的javascript函数（使用firebug - 我假设它旁边是“交易导致利润”的那个），然后将该脚本嵌入到您的网络浏览器控件加载的网页。那就是我尝试开始的地方。我检查了他的源代码并搜索了“交易导致利润”，但没有找到任何让我相信寻找“可能”元素是不可能的东西。只是一个起点，直到有更多经验的人加入！最好的！

-sf

# jquery - 谷歌地图自动完成，但仅适用于街道地址名称

> ID：10176972
> 
> 赞同：6
> 
> 时间：2012-04-16T15:22:06.200
> 
> 标签：jquery, google-maps-api-3, autocomplete

我目前开始使用 Google Maps v3 API，我想知道是否可以使用自动完成功能来仅自动完成街道地址名称？

我目前正在使用此代码：

```
$(document).ready(function(){
    var options = {
      types: ['(cities)'],
      componentRestrictions: {country: "ar" }
     };

 var input = document.getElementById('laboral_calle');

 var autocomplete = new google.maps.places.Autocomplete(input, options);

}); 
```

但目前不工作。

我需要设置一个固定的州和一个固定的城市，以便在文本字段中只显示街道名称建议。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:36:50.517

我不确定我是否完全理解您的要求 - 您是说您只想匹配特定城市/州内的街道地址吗？

如果是这样，您可以在自动完成选项中设置 LatLngBounds 以将所有结果偏向于您的边界所包含的区域内。它不会完全过滤除此之外的任何内容，但对于给定的搜索，如果您的范围内有与之匹配的内容，它将出现在其他任何内容之上。请注意，如果您将 type 设置为 '(cities)'，它只会匹配 'cities'，并且您不会看到任何街道地址！

在这里，我定义了一个包含伦敦的 LatLngBounds，然后将自动完成限制为仅匹配街道地址。

```
var londonBounds = new google.maps.LatLngBounds(new google.maps.LatLng(51.332757,-0.475159),new google.maps.LatLng(51.680219,0.191574));

var autocompleteOptions = {
    bounds: londonBounds,
    types:['geocode'],
}; 
```

# xcode - 在 xcode 中构建时的钥匙串提示对话框

> ID：10176975
> 
> 赞同：0
> 
> 时间：2012-04-16T15:22:08.353
> 
> 标签：xcode, macos

我刚刚开始在 lion 上使用 xcode 4.3.2（从雪豹切换），并且我无法在 xcode 为设备执行的每个构建中摆脱钥匙串提示（模拟器是在没有提示的情况下构建的）。我已经在登录下的 xcode 的钥匙串访问中添加了钥匙串项，但它似乎没有帮助。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:35:40.213

我最终修复了 OS X，它是狮子的好东西，恢复很容易 :)

# scala - 如何在 IOManager 中设置套接字读取超时

> ID：10176978
> 
> 赞同：0
> 
> 时间：2012-04-16T15:22:31.203
> 
> 标签：scala, akka

在 Akka 中，IOManager “是创建用于执行 IO 的套接字的推荐入口点”。我正在查看 API，想知道如何设置读取超时？当然，我可以安排一个演员在 n 秒内触发一条消息以关闭套接字，但它可能已经收到了当时所有的读取，现在正在处理读取的数据。因此，这并不是真正的读取超时。任何想法如何做到这一点？还是我必须以某种方式向我的演员介绍某种状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:36:08.253

好的，Derek Williams 给了我关于 akka-user 的提示。这是代码，以防万一其他人需要做类似的事情。

当我们接受一个新的客户端时，我们设置一个 5 秒的定时器来关闭连接。

```
def receive = {
  case IO.NewClient(server) =>
    val socket = server.accept()
    val readTimeout = context.system.scheduler.scheduleOnce(5 seconds, self, Timeout(socket))
    state(socket) flatMap (_ => MyServer.processRequest(socket, readTimeout))

  case IO.Read(socket, bytes) =>
    state(socket)(IO Chunk bytes)

  case IO.Closed(socket, cause) =>
    state(socket)(IO EOF None)
    state -= socket

  case Timeout(socket) =>
    socket.close()
} 
```

为了在阅读后取消超时，我们在 Cancellable 计划上调用 cancel()。

```
object MyServer {
  def processRequest(socket: IO.SocketHandle, readTimeout: Cancellable): IO.Iteratee[Unit] =
    for {
      request <- readRequest
    } yield {
      readTimeout.cancel()

      request match {
          val response = ...
          socket write ByteString(response).compact
          socket.close()
      }
    }
} 
```

# php - 如何使用 simplexmlelement 或其他 XML 函数从数组中检索节点？

> ID：10176981
> 
> 赞同：0
> 
> 时间：2012-04-16T15:22:45.637
> 
> 标签：php, api, xml-parsing, simplexml, linkedin

我正在使用 Linkedin API --> [https://developer.linkedin.com/documents/profile-fields#company](https://developer.linkedin.com/documents/profile-fields#company)

一切正常，我可以毫无问题地连接到 API。当我请求一些数据时，请遵循 API 返回的数据。

这是我的请求（我不会发布整个代码，它超过 500 行）但它是我想要检索的内容的本质。

```
$response2 = $OBJ_linkedin->profile('~:(recommendations-received)');
if($response2['success'] === TRUE) 
{
   $response2['linkedin'] = new SimpleXMLElement($response2['linkedin']);
   echo "<pre>" . print_r($response2['linkedin'], TRUE) . "</pre>";
}
else 
{
   // request failed
   echo "Error: <br />RESPONSE:<br /><br /><pre>" . print_r($response2) . "</pre>";
} 
```

**以上是回复：**

```
SimpleXMLElement Object
(
    [recommendations-received] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [total] => 1
                )

            [recommendation] => SimpleXMLElement Object
                (
                    [id] => 0123456
                    [recommendation-type] => SimpleXMLElement Object
                        (
                            [code] => service-provider
                        )

                    [recommendation-text] => Here come the recommendation text from the API.
                    [recommender] => SimpleXMLElement Object
                        (
                            [id] => npAnFGrTys
                            [first-name] => John
                            [last-name] => Doe
                        )

                )

        )

) 
```

现在我的问题：

如何仅检索和打印 [recommendation-text] 节点？我已经只调用了收到的建议，`$response2 = $OBJ_linkedin->profile('~:(recommendations-received)');` 但它返回了整个内容，那么如何只获得`[recommendation-text]`???

我尝试使用 simplexmlelement（http://br2.php.net/manual/en/class.simplexmlelement.php），但没有成功。

在此先感谢您的任何帮助。

**[结果]**

我将发布对我有用的答案。

我按照@Mircea 的建议使用以下代码：

```
$sxml = new SimpleXMLElement($response2['linkedin']); 
$res = $sxml->xpath('recommendations-received/recommendation/recommendation-text'); 
echo $res[0]; 
```

而不是这段代码：

```
 $response2['linkedin'] = new SimpleXMLElement($response2['linkedin']);
   echo "<pre>" . print_r($response2['linkedin'], TRUE) . "</pre>"; 
```

这里的区别是现在我使用 xpath 方法来搜索 simpleXML 节点以查找匹配的子节点。谢谢@Mircea。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:42:35.290

您应该尝试 simplexmlelement [http://www.php.net/manual/en/simplexmlelement.xpath.php](http://www.php.net/manual/en/simplexmlelement.xpath.php)的 xpath 功能。我认为获得你想要的东西的正确方法是：

```
$sxml->xpath('recommendations-received/recommendation/recommendation-text') 
```

它返回一个数组，因此您应该对其进行迭代（查看该页面上的示例）。xpath 查询是这样的，它最终取决于接收到的 xml 的结构。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:53:36.263

访问该`recommendation-text`属性将通过以下方式完成：

```
foreach($response2->{recommendations-received} as $recommendation) {
  $recommendation->{recommendation-text}
} 
```

# java - XmlPullParserException 解析包含实体的属性

> ID：10176983
> 
> 赞同：3
> 
> 时间：2012-04-16T15:22:50.970
> 
> 标签：java, java-me, xml-parsing, xmlpullparser, kxml2

我在遗留 JavaME 项目中使用 kXML2。我收到一个 XML，其中一些属性包含编码的实体。当我通过调用检索该属性值时：

```
parser.getAttributeValue 
```

它抛出一个异常：

```
XmlPullParserException: unresolved 
```

我已经下载了这个解析器的最新版本，但它仍然显示这种行为。

如果我从 XML 中删除有问题的行，则没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:53:07.900

好的，这就是正在发生的事情：

解析器必须解码属性中的实体，除非您设置此属性：

```
parser.setFeature(KXmlParser.FEATURE_PROCESS_DOCDECL, true); 
```

但是，当调用该行时，此实现会引发异常。好的，所以我调试了解析器源代码，我发现这个拉解析器实现对于不太常见的实体有问题。

所以我必须用我自己的“奇数”实体来膨胀解析器实体替换映射，这样它才能工作，如下所示：

```
parser.defineEntityReplacementText("Ntilde", "Ñ"); 
```

然后一切正常。

# asp.net - ASP MVC 3：生产中有时会丢失身份验证

> ID：10176984
> 
> 赞同：2
> 
> 时间：2012-04-16T15:22:52.843
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, forms-authentication

我正在使用 MVC 3 开发一个使用标准表单身份验证的 Web 应用程序。它托管在共享主机上。问题是有时用户身份验证状态会丢失。我一点也不例外。你知道可能是什么原因吗？

身份验证与会话有关吗？我根本没有使用 Session 对象。我的印象是使用 cookie 的身份验证可以在负载平衡的环境中工作。我错了吗？

会话在 20 分钟时间跨度之前丢失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:29:35.987

这里想到了几件事：

1.  丢失的身份验证有什么模式吗？意思是，它总是在 20 分钟之后，还是看起来真的是随机的？

2.  由于您在共享主机上，您是否在 web.config 中明确设置您的机器密钥？如果您不这样做并且它们被设置为自动生成，那么如果您的应用程序是负载平衡的，则密钥将有所不同。因此，您在服务器 A 上进行身份验证，并且一些后续请求转到服务器 B，您的应用程序将无法解码授权 cookie 并“将您踢出”

> 在 Web 场中，您无法保证哪台服务器将处理连续的请求。如果用户在一台服务器上进行了身份验证，并且下一个请求转到另一台服务器，则身份验证票证将无法通过验证并要求用户重新进行身份验证。machineKey 元素中的validationKey 和decryptionKey 属性用于表单身份验证票的散列和加密。这些属性的默认值为 AutoGenerate.IsolateApps。密钥是为每个应用程序自动生成的，并且它们在每台服务器上都不同。因此，在一台计算机上加密的身份验证票证无法在 Web 场中的另一台计算机或同一 Web 服务器上的另一个应用程序中解密和验证。为了解决这个问题，

有关第二位的更多信息，请参见[此处。](http://msdn.microsoft.com/en-us/library/ff647070.aspx#pagexplained0002_webfarmscenarios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:28:02.917

会话有一个超时，如果您超过它，您的会话（和身份验证）将被破坏。

您可以从 or 增加它的超时时间`web.config`，这就是我采用的方式，您可以每隔几分钟使用 AJAX 创建一个虚拟页面。后者的优点是，当用户关闭浏览器时，您的会话仍会及时终止，而不是使用资源在那里停留半小时并阻止`Application_OnExit`运行。

# jquery - 使用 jQuery / Phonegap 的 Soap 查询在 Android 上总是失败

> ID：10176985
> 
> 赞同：11
> 
> 时间：2012-04-16T15:22:54.783
> 
> 标签：jquery, android, soap, jquery-mobile, cordova

我用 jQuery mobile 和 Phonegap（现在的 Cordova）开发了一个 iPhone/Android 应用程序。这个应用程序使用不同的服务没有问题。其中一项服务是 Soap 服务，因此我使用 jQuery 的 jsSOAPClient (jquery.jqSOAPClient.js) 来请求服务。我在 iOS 设备上完全没有问题，但在 Android 上查询总是失败。

在 jsSOAPClient 中，请求如下所示：

```
 function getResponse(xData, status) {
            if(!!callback) {
                SOAPClient.Status = xData.status;
                SOAPClient.ResponseText = xData.responseText;
                SOAPClient.ResponseXML = xData.responseXML;
                callback(xData.responseXML);
            }
        }

        $.ajax({
             type: "POST",
             url: SOAPClient.Proxy,
             dataType: "xml",
             processData: false,
             data: content,
             complete: getResponse,
             beforeSend: function(req) {
                req.setRequestHeader("Method", "POST");
                req.setRequestHeader("Content-Length", SOAPClient.ContentLength);
                req.setRequestHeader("Content-Type", SOAPClient.ContentType + "; charset=\"" + SOAPClient.CharSet + "\"");
                req.setRequestHeader("SOAPServer", SOAPClient.SOAPServer);
                req.setRequestHeader("SOAPAction", soapReq.Action);
             }
        }); 
```

“getResponse”“status”值为“error”，“SOAPClient.Status”（等于“xData.status”）值为“0”。

服务器似乎根本没有收到请求......

我重复一遍，具有相同请求数据的相同代码在 iOS 上会产生结果。

感谢帮助。

/**编辑******** / 我试图评论这一行：***

 ***```
//type: "POST", 
```

它似乎有效，我的意思是在这种情况下我有一个 200 状态码，即使我由于意外的响应格式而出现解析错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:50:37.117

显然，Android 2.x 中存在一个错误，其中设置“Content-length”标头会导致您描述的问题。看起来该错误已在 Android 4.0.3 中修复。因此，在 4.0.3 模拟器中尝试未修改的代码，它应该可以工作，然后返回 2.x 并删除 Content-length 标头以查看它是否也可以工作。***

# linux - 如何摆脱“GLIBCXX_3.4.9 未找到错误”？

> ID：10176997
> 
> 赞同：2
> 
> 时间：2012-04-16T15:23:36.193
> 
> 标签：linux, gcc, dependencies, glibc, glib

我正在构建一个可再发行的 .so 文件。

但是，当我的用户尝试使用它时，他们会遇到可怕的`/usr/lib/libstdc++.so.6: version GLIBCXX_3.4.9' not found`错误。

执行 objdump 时，似乎是我的二进制文件中的这个特殊符号导致了问题： `_ZSt16__ostream_insertIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_PKS3_l@@GLIBCXX_3.4.9`

我如何告诉我的 gcc/g++ 针对旧版本的 GLIBXX 进行编译/链接，以便我的用户不会收到此错误？

还是解决这个难题的唯一方法是安装具有 GLIBXX 的单独的旧版本 linux？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T21:34:28.823

> 我如何告诉我的 gcc/g++ 针对旧版本的 GLIBXX 进行编译/链接，以便我的用户不会收到此错误？

没有办法做到这一点*。*您唯一的选择是：

1.  使用旧`g++`版本构建，或
2.  静态链接`libstdc++.a`到您的共享库，并*隐藏*其符号（这也可能涉及许可问题，请咨询您的律师）。
3.  将您的版本与您的库打包`libstdc++.so.6`在一起，并要求拥有旧版本的用户安排选择您的新版本（也有许可问题，但我相信这些更容易满足）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:56:31.263

您正在*为*GLIBCXX_3.4.9 构建，因此您的用户*还*需要至少具有 GLIBCXX_3.4.9。

# xpath - 尝试属性转移时soapUI Xpath junit失败

> ID：10176999
> 
> 赞同：0
> 
> 时间：2012-04-16T15:23:44.950
> 
> 标签：xpath, junit, soapui

我已经导入了 saxon xbean 和 xbean_path 我仍然不知道出了什么问题。我正在尝试使用junit运行soapUI项目

```
Property Transfer
    Error:com.eviware.soapui.impl.wsdl.teststeps.PropertyTransferException:  Trying XBeans path engine... Trying XQRL... Trying delegated path engine... FAILED on 
    declare namespace 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:28:22.703

抱歉，我让它工作了我的问题是我正在导入的 saxon 版本，所以如果有人有同样的问题，只需将正确的版本下载到您的 xbean 版本：D