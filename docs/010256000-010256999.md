# StackOverflow 问答 10256000-10256999

# android - 在 Andorid 中，是否可以获取 YouTube 视频链接的嵌入 Html 代码？

> ID：10256002
> 
> 赞同：1
> 
> 时间：2012-04-21T03:43:46.590
> 
> 标签：android, youtube-api

在过去的几天里，我有点挣扎，对此我无法找到好的解决方案。我的任务是**在 webview 中加载 youtube 链接**。给定的网址是[VideoLink](http://%22http://www.youtube.com/v/aLEhh_XpJ-0?version=3&f=videos&app=youtube_gdata%22)。我通过android webview直接加载这个链接它不会播放。当我加载此链接的嵌入代码时，它已成功加载。在这里我的问题是我手动获取嵌入代码（即在系统浏览器上加载 url->右键单击->选择复制嵌入 html），但我有很多这样的链接。是不是不能手动做。是否可以通过编程方式获取 youtube 链接的嵌入 html 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T04:54:45.223

为什么不能为 URL 创建一个 httpConection 并将 InputStream 读入 String 并将其提供给 Webview。如果你能解释更多，我可以建议你一个更好的主意。

# sql - 基于表的声明式反应式编程

> ID：10256004
> 
> 赞同：1
> 
> 时间：2012-04-21T03:44:11.777
> 
> 标签：sql, functional-programming, declarative

是否有一种编程语言或包支持内存中基于表的反应式声明式编程，与 SQL 语言和触发器工具非常相似？

例如，我可以将`PERSON`和`JOB`表定义为函数

```
name: PERSON -> STRING
female: PERSON -> BOOLEAN
mother: PERSON -> PEOPLE
father: PERSON -> PEOPLE

title: JOB -> STRING
company: JOB -> STRING
salary: JOB -> INTEGER
empoyee: JOB -> PERSON 
```

然后我想计算如下函数：

```
childcount: PERSON -> INTEGER
childcount(P) = |{ Q in PERSON : father(Q) = P or mather(Q) = P }|

income: PERSON -> INTEGER
income(P) = SUM { salary(J) : J in JOB and empoyee(J) = P }

incomeperchild: PERSON -> INTEGER
incomeperchild(P) = income(P) / childcount(P)

parent: PERSON x PERSON -> BOOLEAN
person(P,Q) = (P = father(Q)) or (P = mother(Q))

error: PERSON -> BOOLEAN
error(P) = (female(P) and (exists Q in PERSON)(father(Q) = P))
   or (not female(P) and (exists Q in PERSON)(mother(Q) = P))
   or (exists Q in PERSON)(parent(P,Q) and error(Q)) 
```

因此，基本上我希望表中的计算列在表中的值发生变化时自动更新。类似的事情可以用 SQL 触发器来表达，但我希望将这样的功能内置到语言中并在内存中执行。变化的传播需要优化。有框架可以做到这一点吗？

观察者模式和反应式编程专注于单个对象。但是我不想为表中的每一行维护指针和额外的结构，因为可能有数百万行。所有规则都是通用的（尽管它们可以通过父/子关系等引用不同的行），因此需要某种形式的递归。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:34:45.577

解决此问题的一种方法是通过属性语法：[http ://www.haskell.org/haskellwiki/Attribute_grammar](http://www.haskell.org/haskellwiki/Attribute_grammar)

# c# - 打开特定的文本文件

> ID：10256005
> 
> 赞同：0
> 
> 时间：2012-04-21T03:44:11.790
> 
> 标签：c#

我正在尝试打开驱动器上的一个特定文本文件的文本文件，并且我不想包含文本框或查看/浏览要打开的文件。我只希望它只自动打开磁盘驱动器上指定的文本文件而不通过文本框，单击按钮后驱动器中的特定文本文件应自动打开

下面是这样的：

```
private void button1_Click(object sender, EventArgs e)
{
  c:\users\Dickson\Documents\oracle.txt;//
} 
```

我希望它在我单击按钮时打开此处指定的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T03:50:46.340

如果您想使用记事本或任何其他默认程序打开 txt 文件，您可以执行以下操作：

```
Process.Start(@"C:\Users\Dickson\Documents\oracle.txt"); 
```

如果要读取代码中的文件，可以这样做：

```
var txtContent = File.ReadAllText(@"C:\Users\Dickson\Documents\oracle.txt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T03:49:58.243

```
System.Diagnostics.Process.Start(file path); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T05:02:13.773

您还可以使用以下代码读取文件的内容：

```
FILE *infile;
infile = fopen("file_name", "r"); 
```

我不确定这是否是你的意思，但是..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T05:48:45.543

也许像

```
static class program
{
  static void Main()
  {
    System.Windows.Forms.Application.Run(new frmMain());
  }
}

public class frmMain : Form
{
  private System.Windows.Forms.Label lblText;
  private System.Windows.Forms.Button btnLoadText;

  public frmMain()
  {
    InitializeComponent();
  }

  private void InitializeComponent()
  {
    this.lblText = new System.Windows.Forms.Label();
    this.lblText.AutoSize = true;
    this.lblText.Dock = System.Windows.Forms.DockStyle.Top;
    this.lblText.Font = new System.Drawing.Font("Microsoft Sans Serif", 14.25F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
    this.lblText.Location = new System.Drawing.Point(0, 0);
    this.lblText.Name = "lblText";
    this.lblText.Size = new System.Drawing.Size(170, 24);
    this.lblText.TabIndex = 0;
    this.lblText.Text = "";
    this.Controls.Add(this.lblText);

    this.btnLoadText = new System.Windows.Forms.Button();
    this.btnLoadText.Location = new System.Drawing.Point(339, 24);
    this.btnLoadText.Name = "btnLoadText";
    this.btnLoadText.Size = new System.Drawing.Size(75, 23);
    this.btnLoadText.TabIndex = 29;
    this.btnLoadText.Text = "Load Text";
    this.btnLoadText.UseVisualStyleBackColor = true;
    this.btnLoadText.Dock = System.Windows.Forms.DockStyle.Bottom;
    this.Controls.Add(this.btnLoadText);
    this.btnLoadText.Click += new System.EventHandler(this.btnLoadText_Click);          
  }

  private void btnLoadText_Click(object sender, EventArgs e)
  {
    StreamReader streamReader = new StreamReader("test.txt");
    string text = streamReader.ReadToEnd();
    streamReader.Close();
    this.lblText.Text = text;
  }
} 
```

# jquery - 悬停时，DIV 扩展并与其他对象重叠

> ID：10256007
> 
> 赞同：1
> 
> 时间：2012-04-21T03:44:15.147
> 
> 标签：jquery, html, hover, jquery-animate

我想做一些非常简单的事情。我有许多按网格排列的 DIV 框。当我悬停其中一个时，我希望它慢慢膨胀，从中间锚定，然后向下收缩。但是，如果不将其他 DIV 框推到一边，我就无法这样做。我希望悬停的 DIV 缓慢扩展，与其他 DIV 框重叠，而不移动它们。我已经用 JQuery 完成了其中的一些。这是我所拥有的：

CSS：

```
div{width: 100px; height: 100px; float: left;}
div#sq1{background-color: magenta;}
div#sq2{background-color: yellow;}
div#sq3{background-color: cyan;} 
```

查询：

```
<script type='text/javascript' src='animated.js'></script>
<script type="text/javascript">
$(document).ready(function() {
    $("div").hover(function(){
        if (!$(this).hasClass('animated')) {
            $(this).dequeue().stop().animate({ width: "100px", height: "100px" });
    }
    }, function() {
        $(this).addClass('animated').animate({ width: "200px", height: "200px" }, "normal", "linear", function() {
        $(this).removeClass('animated').dequeue();
    });
});
</script> 
```

HTML：

```
<div id="dequeue" class="blocks">
<div id="sq1"></div>
<div id="sq2"></div>
<div id="sq3"></div>
</div> 
```

这是我希望它的外观：之前：http: [//i39.tinypic.com/dh9x87.png](http://i39.tinypic.com/dh9x87.png) 之后：http: [//i44.tinypic.com/70cd35.png](http://i44.tinypic.com/70cd35.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:06:00.420

尝试使用**负边距**来诱使页面认为每个框仍然是 100px x 100px。因此，除了将宽度和高度从 100px 设置为 200px 之外，**还要将边距设置为**从 0 到 -50px 的动画。

希望这可以帮助 ：）

**编辑**

这是一个工作示例：

[http://jsfiddle.net/sGDvj/1/](http://jsfiddle.net/sGDvj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:49:42.723

看看这个[http://jsfiddle.net/tdsNF/2/](http://jsfiddle.net/tdsNF/2/) 并查看[Expand/shrink div on hover/out with jQuery](https://stackoverflow.com/questions/12056950/expand-shrink-div-on-hover-out-with-jquery)以获得学分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T18:47:33.510

只需简单易用的 CSS3

[http://jsfiddle.net/mhkfH/](http://jsfiddle.net/mhkfH/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T04:05:49.157

我想我明白你想要做什么：D 虽然我没有 100% 肯定的答案，但我确实有一个建议，尝试使用 div 的 z-index，也许让你悬停在上面像 5 或任何你想要的正数！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T04:08:25.447

为什么不使用绝对位置？或者另一种方法是在悬停的那个上创建一个重复的 div 并为其设置动画。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T21:49:14.193

看看这个例子；我认为这就是你想要做的。 [http://jsfiddle.net/tdsNF/2/](http://jsfiddle.net/tdsNF/2/)

它是一个带有图像的扩展器，但我相信 div 也可以工作。

在这里找到它：[Expand/shrink div on hover/out with jQuery](https://stackoverflow.com/questions/12056950/expand-shrink-div-on-hover-out-with-jquery)

```
var $imageWidth     = 92,    // with borders
$imageColumns    = 10;    // images across

$("#container > div .img").each(function(index) {
var $left = (index % $imageColumns * $imageWidth);
$(this).css("left", $left + "px");
});

$(".img a img").hover(function() {
    $(this).closest(".img").css("z-index", 1);
    $(this).stop(true,true).animate({ height: "200", width: "200", left: "-=55", top: "-=55" }, "fast");
    $("#name").css("color", "#242424").html($(this).attr("data-name"));
    $("#school").css("color", "#242424").html($(this).attr("data-school"));
}, function() {
$(this).closest(".img").css("z-index", 0);
$(this).stop(true,true).animate({ height: "90", width: "90", left: "+=55", top: "+=55"     }, "fast");
});​ 
```

# html - 将下拉菜单的水平大小与文本框大小匹配

> ID：10256011
> 
> 赞同：1
> 
> 时间：2012-04-21T03:45:14.177
> 
> 标签：html, css

我想将下拉菜单的大小设置为与其上方的文本框相同以保持一致性。请参考[这个](http://jsfiddle.net/msbUM/21/)小提琴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:51:17.310

在这里得到它：http: [//jsfiddle.net/msbUM/22/](http://jsfiddle.net/msbUM/22/)

将 select {width:155px;}​​​​​​ input[type=text] {width:150px;} ​ 添加到您的样式中

# jquery - 使用 jQuery slideToggle 调用的 CSS 类管理

> ID：10256013
> 
> 赞同：1
> 
> 时间：2012-04-21T03:45:56.727
> 
> 标签：jquery, html, css

我这里有一段代码在一个 html 文件中重复多次。

```
<div class="message">
   <label id="slideDown"> Read </label>
   <p id="messageBody" class="hidden"> Body </p>
</div>
<div class="message">
   <label id="slideDown"> Read </label>
   <p id="messageBody" class="hidden"> Body </p>
</div> 
```

jQuery 用于向下滑动 messageBody。

```
$('#slideDown').click(function() {
  $('#messageBody').slideToggle('slow');
}); 
```

我的问题是我怎样才能得到它，以便当我单击标签阅读一条消息时，它只会滑下其 div 内的 messageBody ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T03:57:37.630

如果将 ID 更改为如下类，则可以修复并减少代码：

HTML

```
<div class="message">
   <label class="slideDown"> Read </label>
   <p class="messageBody hidden"> Body </p>
</div>
<div class="message">
   <label class="slideDown"> Read </label>
   <p class="messageBody hidden"> Body </p>
</div> 
```

JS

```
$('.slideDown').click(function() {
  $(this).next('.messageBody').slideToggle('slow');
}); 
```

这是一个工作示例：http: [//jsfiddle.net/rtZsJ/](http://jsfiddle.net/rtZsJ/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T03:50:26.230

您正在多次使用 id，而 id 必须是唯一的`slideDown`。`messageBody`当您多次使用 id 时发生的事情根本没有任何意义，因为您的文档只是格式错误。

无论如何，解决此问题的方法是将 ID 更改为唯一的。一种方法是这样的：

```
<div class="message">
   <label id="slideDown1"> Read </label>
   <p id="messageBody1" class="hidden"> Body </p>
</div>
<div class="message">
   <label id="slideDown2"> Read </label>
   <p id="messageBody2" class="hidden"> Body </p>
</div> 
```

js：

```
$('#slideDown1').click(function() {
  $('#messageBody1').slideToggle('slow');
});
$('#slideDown2').click(function() {
  $('#messageBody2').slideToggle('slow');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T04:26:47.150

根据您的 jsFiddle 中的 HTML 结构（请参阅对 magzalez 答案的评论回复），以下内容应该有效。如果您稍后添加更多消息，这不需要更改。

HTML：

```
<div class="message">
    <h2 class="messageSubject">Subject<label class="slideDown"> Read </label></h2>
    <label class="messageSender"> Sender </label>
    <div class="bodyWrapper">
        <p class="messageBody hidden"> Body </p>
    </div>
</div>
<div class="message">
    <h2 class="messageSubject">Subject<label class="slideDown"> Read </label></h2>
    <label class="messageSender"> Sender </label>
    <div class="bodyWrapper">
        <p class="messageBody hidden"> Body </p>
    </div>
</div> 
```

CSS：

```
.hidden {
    display: none;   
} 
```

JavaScript：

```
$('.slideDown').click(function() {
    $(this).closest(".message").find('.messageBody').slideToggle('slow');
}); 
```

​</p>

这是一个要测试的 jsFiddle（单击运行）：http: [//jsfiddle.net/willslab/7ytZR/2/](http://jsfiddle.net/willslab/7ytZR/2/)

# java - 如何划分水平经理

> ID：10256017
> 
> 赞同：0
> 
> 时间：2012-04-21T03:46:44.340
> 
> 标签：java, blackberry, calendar

![在此处输入图像描述](../Images/aa2164bacd590e11fc9ee7854fb94588.png)我正在尝试在水平管理器中显示事件，我有多个事件说现在我有 10 个事件，我想在单行中显示两个事件，创建 5 个水平管理器来显示其余 10 个事件。我能够显示一个使用下面的代码片段在单行中的事件，如何编辑下面的代码片段以在一行中获取两个事件，这里将事件添加到标签字段。

```
VerticalFieldManager vfm = new VerticalFieldManager();
        int allDayVectorSize = allDayVector.size();
        horizontalFieldManager_isAllDay = new HorizontalFieldManager[allDayVectorSize];
        allDayLabel = new LabelField[allDayVectorSize];
        row_height = 90;
        int j = 0;
        int row_count = 0;

        if (allDayVectorSize != 0) {
            for (int i = 0; i < allDayVectorSize; i++) {
                final String allEvent = (String) allDayVector.elementAt(i);
                horizontalFieldManager_isAllDay[row_count] = new HorizontalFieldManager(
                        Manager.FOCUSABLE | Manager.HORIZONTAL_SCROLL) {

                    protected boolean navigationClick(int status, int time) {
                        Field field = getFieldWithFocus();

                        Vector data = getData(listEvent);

                        if (allEvent != null && allEvent != "") {
                            System.out.println("Currentdata in if" + allEvent);
                            UiApplication.getUiApplication().pushScreen(
                                    new EventScreen(data, allEvent, ""));
                        }
                        return super.navigationClick(status, time);
                    }

                    protected boolean keyChar(char key, int status, int time) {
                        Field field = getFieldWithFocus();

                        return super.keyChar(key, status, time);
                    }

                    protected void sublayout(int maxWidth, int maxHeight) {
                        int displayWidth = Display.getWidth();
                        int displayHeight = 30;
                        super.sublayout(displayWidth, displayHeight);
                        setExtent(displayWidth, displayHeight);
                    }
                };
                horizontalFieldManager_isAllDay[row_count].setPadding(2, 2, 2,
                        2);
                allDayLabel[row_count] = new LabelField(allEvent,
                        LabelField.FOCUSABLE) {

                    protected void layout(int maxWidth, int maxHeight) {

                        int displayWidth = (int) (Display.getWidth() / 2);
                        int displayHeight = maxHeight;

                        super.layout(displayWidth, displayHeight);
                        setExtent(displayWidth, displayHeight);
                    }

                };

                // allDayLabel[row_count].setPadding(5, 0, 0, 2);
                final ImageButtonField alarmBitmapField2 = new ImageButtonField(
                        "", Field.FOCUSABLE, "ringtone.png", "ringtone.png",
                        0x9cbe95);
                horizontalFieldManager_isAllDay[row_count]
                        .add(alarmBitmapField2);
                horizontalFieldManager_isAllDay[row_count]
                        .add(allDayLabel[row_count]);
                vfm.add(horizontalFieldManager_isAllDay[row_count]);
                vfm.add(new SeparatorField());
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:07:41.357

```
VerticalFieldManager vfm = new VerticalFieldManager();
        int allDayVectorSize = allDayVector.size();
        int hfmSize=(allDayVectorSize %2 ==0)allDayVectorSize/2:allDayVectorSize +1;
        horizontalFieldManager_isAllDay = new HorizontalFieldManager[hfmSize];
        allDayLabel = new LabelField[allDayVectorSize];
        row_height = 90;
        int j = 0;

        if (allDayVectorSize != 0) {
            for (int i = 0; i < hfmSize; i++) {

                horizontalFieldManager_isAllDay[i] = new HorizontalFieldManager(
                        Manager.FOCUSABLE | Manager.HORIZONTAL_SCROLL|Manager.USE_ALL_WIDTH) {

                    protected boolean navigationClick(int status, int time) {
                        Field field = getFieldWithFocus();

                        Vector data = getData(listEvent);

                        if (allEvent != null && allEvent != "") {
                            System.out.println("Currentdata in if" + allEvent);
                            UiApplication.getUiApplication().pushScreen(
                                    new EventScreen(data, allEvent, ""));
                        }
                        return super.navigationClick(status, time);
                    }

                    protected boolean keyChar(char key, int status, int time) {
                        Field field = getFieldWithFocus();

                        return super.keyChar(key, status, time);
                    }

                    protected void sublayout(int maxWidth, int maxHeight) {
                        int displayWidth = Display.getWidth();
                        int displayHeight = 30;
                        super.sublayout(displayWidth, displayHeight);
                        setExtent(displayWidth, displayHeight);
                    }
                };
                horizontalFieldManager_isAllDay[i].setPadding(2, 2, 2,
                        2);
                String allEvent = (String) allDayVector.elementAt(i*2);
                allDayLabel[i*2] = new LabelField(allEvent,
                        LabelField.FOCUSABLE) {

                    protected void layout(int maxWidth, int maxHeight) {

                        int displayWidth = (int) (Display.getWidth() / 2);
                        int displayHeight = maxHeight;

                        super.layout(displayWidth, displayHeight);
                        setExtent(displayWidth, displayHeight);
                    }

                };

                // allDayLabel[row_count].setPadding(5, 0, 0, 2);
                final ImageButtonField alarmBitmapField2 = new ImageButtonField(
                        "", Field.FOCUSABLE, "ringtone.png", "ringtone.png",
                        0x9cbe95);
                horizontalFieldManager_isAllDay[i]
                        .add(alarmBitmapField2);
                horizontalFieldManager_isAllDay[i]
                        .add(allDayLabel[i*2]);
                if(i*2+1<allDayVectorSize)
                {
                       allEvent = (String) allDayVector.elementAt(i*2+1);
                       allDayLabel[i*2] = new LabelField(allEvent,
                       LabelField.FOCUSABLE) {

                              protected void layout(int maxWidth, int maxHeight) {

                                  int displayWidth = (int) (Display.getWidth() / 2);
                                  int displayHeight = maxHeight;

                                  super.layout(displayWidth, displayHeight);
                                  setExtent(displayWidth, displayHeight);
                             }

                         };

                         horizontalFieldManager_isAllDay[i]
                        .add(allDayLabel[i*2+1]);
                   }
                vfm.add(horizontalFieldManager_isAllDay[row_count]);
                vfm.add(new SeparatorField());
            }
        } 
```

# asp.net-mvc-3 - MVC3 为什么使用 html.editorfor

> ID：10256018
> 
> 赞同：5
> 
> 时间：2012-04-21T03:46:55.260
> 
> 标签：asp.net-mvc-3, razor

我正在查看 MVC3 razor 示例并看到 html.editorfor 被使用，并且还在这个论坛上询问了很多。为什么我不能使用`html.textboxfor`and `passwordfor`？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T03:50:26.417

EditorFor 的优点是它将尝试呈现与数据类型关联的编辑器。

例如：如果您设计自己的[编辑器模板](http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-editor-templates.aspx)，它们将根据属性的类型或[UIHint自动呈现](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.uihintattribute.uihint.aspx)

一个有用的编辑器模板可能是在属性类型为`DateTime`.

还有一些其他场景，“智能”EditorFor 将为属性生成“最佳”编辑器，例如，当它使用`<textarea>` 标记属性时呈现`MultilineText`

对于不需要“特殊编辑器”的情况，使用 TextBoxFor 和 PasswordFor 非常合适。当不得不设置 HtmlAttributes 时，它甚至可以简化你的生活。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T04:00:10.313

参考[MVC 和 Razor 中 Html.TextboxFor 和 Html.EditorFor 之间的差异，](https://stackoverflow.com/questions/4826173/mvc3-html-textboxfor-vs-html-editorfor)以消除对此的疑问。

> HtmlTextboxFor 总是创建一个`textbox (<input type="text" ...).`
> 
> 而 EditorFor 查看类型和元信息，并可以呈现您提供的另一个控件或模板。
> 
> 例如，对于 DateTime 属性，您可以创建一个使用 jQuery DatePicker 的模板。

如果您决定更改文本框的呈现方式，例如将它们包装在 div 中，您可以简单地编写自定义编辑器模板`(~/Views/Shared/EditorTemplates/string.cshtml)`，应用程序中的所有文本框都将自动受益于此更改，而如果您进行了硬编码`Html.TextBoxFor`，您将拥有到处修改它。

# performance - long double 的性能影响。为什么C默认选择64位而不是硬件的80位？

> ID：10256019
> 
> 赞同：5
> 
> 时间：2012-04-21T03:47:00.713
> 
> 标签：performance, visual-c++, x86, floating-point, long-double

具体来说，我说的是 x87 PC 架构和 C 编译器。

我正在编写自己的解释器，`double`数据类型背后的推理让我感到困惑。尤其是在效率方面。有人可以解释为什么 C 决定使用 64 位`double`而不是硬件原生 80 位`double`吗？为什么硬件设置为 80-bit `double`，因为它没有对齐？每个的性能影响是什么？**我想`double`为我的默认数字类型使用 80 位。**但是编译器开发人员的选择让我担心这不是最佳选择。

1.  `double`在 x86 上只短了 2 个字节，为什么编译器`long double`默认不使用 10 个字节？
2.  我可以举一个 80-bit `long double`vs获得的额外精度的例子`double`吗？
3.  为什么微软`long double` **默认**禁用？
4.  `long double`就数量级而言，典型的 x86/x64 PC 硬件会差多少/慢多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:16:57.237

根据 Mysticial 的说法，答案是微软使用**SSE2**作为其`double`数据类型。与现代 CPU 扩展相比，浮点单元 (FPU) x87 被视为过时且速度较慢。SSE2 不支持 80 位，因此编译器选择 64 位精度。

在 32 位 x86 架构上，由于所有 CPU 还没有 SSE2，微软仍然使用浮点单元 (FPU) x87，除非`/arch:SSE2`给出编译器开关。这使得代码与旧代码不兼容？CPU。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-08T00:33:06.157

这实际上是一个问题，其中一些甚至太宽泛了

> 有人可以解释为什么 C 决定使用 64 位双精度而不是硬件本机 80 位双精度吗？

它与 C 无关，因为 C 标准只规定了内置类型的**最低要求，完全取决于编译器实现来选择他们想要用于类型的任何格式。**没有什么能阻止 C 编译器使用一些定制的 77 位浮点类型

* * *

> 为什么硬件设置为 80 位双精度，因为它没有对齐？每个的性能影响是什么？

它与 2 个字节的倍数对齐。请记住，x87 可以追溯到 8086 + 8087。

对于现代硬件实现者和软件编写者来说，这是一个很好的权衡，他们需要更高的精度来进行精确的四舍五入`double`操作。太大的类型，您将需要更多的晶体管。将有效数中的位数加倍，乘数需要是原来的 4 倍

> x87 算术和初始 IEEE 754 标准提案的主要设计者 William Kahan 关于 x87 浮点开发的说明：*“我们敢于扩展的格式（80 位）被包括在内，以提供与 13 - 十进制内部格式用于惠普的 10 位十进制计算器。”*此外，Kahan 指出 64 位是在不增加 8087 循环时间的情况下进行进位传播的最宽有效位，并且 x87 扩展精度旨在在未来的处理器中扩展到更高的精度：“目前，10 -byte 扩展格式是超精确算术的价值和实现它以快速运行的代价之间的一个可容忍的折衷；很快，两个字节的精度将变得可以容忍，最终是 16 字节格式……那种当 IEEE Standard 754 for Floating-Point Arithmetic 制定时，就已经考虑到逐渐向更广泛的精度发展。
> 
> [https://en.wikipedia.org/wiki/Extended_precision#IEEE_754_extended_precision_formats](https://en.wikipedia.org/wiki/Extended_precision#IEEE_754_extended_precision_formats)

如您所见，使用 64 位有效位，您可以与整数 ALU 共享组件（加法器、乘法器...）。

* * *

> 我想为我的默认数字类型使用 80 位双精度。但是编译器开发人员的选择让我担心这不是最佳选择。x86 上的 double 仅短 2 个字节，为什么编译器默认不使用 10 字节长的 double？

它实际上旨在用作临时变量（如`tmp = (b*c + d)/e`）以避免内部溢出或下溢问题，而无需像[Kahan summation](https://en.wikipedia.org/wiki/Kahan_summation_algorithm)这样的特殊技术。这不是您的默认浮点类型。`long double`事实上，很多人在使用or时错误地使用了浮点字面量`float`。他们忘记添加正确的后缀，导致精度不足，然后他们问为什么`long double`与`double`. 总之，`double`应该用于几乎所有情况，除非您受到带宽或精度的限制并且您真的知道自己在做什么

* * *

> 我可以举一个 80 位长双精度与双精度的例子吗？

您可以打印完整的值并自己查看。还有很多值得一读的问题

*   [80 位扩展精度数据类型的应用/好处是什么？](https://stackoverflow.com/q/612507/995714)
*   [C和C++中long double和double的区别](https://stackoverflow.com/q/14221612/995714)
*   [我想知道 long double 和 double 之间的区别](https://stackoverflow.com/q/53095270/995714)

* * *

> 为什么微软默认禁用 long double？

默认情况下， Microsoft**不会*禁用 long double***。他们只是选择映射`long double`到 IEEE-754 双精度，顺便说一下与`double`. 该类型`long double`仍然可以正常使用。他们这样做是因为 SSE 上的数学运算更快、更一致。这样你就可以避免像下面这样的“错误”

*   [为什么将 double 转换为 int 可能会产生不同的结果？](https://stackoverflow.com/q/56173220/995714)
*   [显然相同的数学表达式具有不同的输出](https://stackoverflow.com/q/33795031/995714)
*   [为什么相同的代码在 32 位和 64 位机器上会产生不同的数值结果？](https://stackoverflow.com/q/7847274/995714)
*   [std::pow 在 32 位和 64 位应用程序中产生不同的结果](https://stackoverflow.com/q/33887108/995714)
*   ...

除了 64 位 long double 没有奇数大小，这需要编译器多填充 6 个零字节（或处理非 2 的幂类型宽度），这是一种资源浪费。

也就是说，甚至不是说 80 位`long double`在 x86 上不可用。目前只有 MSVC 放弃了扩展精度类型，其他 x86 编译器（如 GCC、Clang、ICC...）仍然支持它，并将[80 位 IEEE-754 设为](https://en.wikipedia.org/wiki/Extended_precision#IEEE_754_extended_precision_formats)long double 的默认格式。例如[GCC 具有`-mlong-double-64/80/128`并`-m96/128bit-long-double`](https://gcc.gnu.org/onlinedocs/gcc/x86-Options.html)控制的确切格式`long double`

或者在不通过更改可能破坏 ABI 兼容性的情况下`long double`，您可以使用[GNU C 浮点类型名称](https://gcc.gnu.org/onlinedocs/gcc/Floating-Types.html)，例如`__float80`在支持它的目标上。 [Godbolt 上的这个示例](https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(fontScale:14,j:1,lang:c%2B%2B,source:%27//typedef+__float128+bigfloat%3B%0Atypedef+__float80+bigfloat%3B++//+80-bit+even+on+gcc+for+Windows%0A%0Abigfloat+add(bigfloat+a,+bigfloat+b)+%7B%0A++++return+a%2Bb%3B%0A%7D%27),l:%275%27,n:%270%27,o:%27C%2B%2B+source+%231%27,t:%270%27)),k:45.58724883600972,l:%274%27,m:100,n:%270%27,o:%27%27,s:0,t:%270%27),(g:!((h:compiler,i:(compiler:g92,filters:(b:%270%27,binary:%271%27,commentOnly:%270%27,demangle:%270%27,directives:%270%27,execute:%271%27,intel:%270%27,libraryCode:%271%27,trim:%271%27),fontScale:14,lang:c%2B%2B,libs:!(),options:%27-O3%27,source:1),l:%275%27,n:%270%27,o:%27x86-64+gcc+9.2+(Editor+%231,+Compiler+%231)+C%2B%2B%27,t:%270%27)),header:(),k:54.41275116399028,l:%274%27,n:%270%27,o:%27%27,s:0,t:%270%27)),l:%272%27,n:%270%27,o:%27%27,t:%270%27)),version:4)无论是针对 Windows 还是 Linux 都编译为 80 位 FP 数学。

* * *

> 就数量级而言，在典型的 x86/x64 PC 硬件上，long double 会差多少/慢多少？

这是无法回答的，因为延迟和吞吐量取决于每个特定的微架构。但是，如果您执行大量浮点运算，则`double`速度会明显加快，因为它的有效位数较少，并且可以与 SIMD 并行化。例如，您可以使用[AVX-512](https://en.wikipedia.org/wiki/AVX-512)一次处理 8 个双精度数的向量。扩展精度类型无法做到这一点

此外，80 位 x87 fp 加载和存储指令比转换为/从 32 位或 64 位转换的“正常”版本慢得多，并且仅`fstp`可用，而不是`fst`. **请参阅[Peter Cordes](https://retrocomputing.stackexchange.com/questions/9751/did-any-compiler-fully-use-intel-x87-80-bit-floating-point/9760#9760)关于在现代 CPU 上进行 x87 性能**逆向计算的回答。（事实上​​，这是一个跨站点副本，询问为什么 MSVC 不将 80 位 x87 类型公开为`long double`.）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T13:54:02.260

错误的问题。它与 C 无关，*所有*语言都使用 AFAIK 作为 32 位的标准浮点单精度和 64 位的双精度。C 作为支持不同硬件的语言仅定义

sizeof(float) <= sizeof(double) <= sizeof(long double)

因此，一个特定的 C 编译器对所有数据类型使用 32 位浮点数是完全可以接受的。

英特尔决定 Kahans 建议他们支持尽可能高的精度，并且应在内部以 80 位精度执行精度较低的格式（32 位和 64 位）的计算。

精度和指数范围的差异：64位大约有。16 位十进制数字，最大指数为 308，80 位为 19 位，最大指数为 4932。

更加精确并且具有更大的指数范围，您可以计算没有溢出或下溢的中间结果，并且您的结果具有更少的舍入误差。

所以问题是为什么long double不支持80bit。事实上，许多编译器*确实*支持它，但缺乏使用和运行基准性能有效地扼杀了它。

# android - 在 grails 和 griffon 项目之间共享域和服务类

> ID：10256029
> 
> 赞同：2
> 
> 时间：2012-04-21T03:50:36.763
> 
> 标签：android, grails, griffon

我试图弄清楚如何在 Grails 和 Griffon 项目之间共享域和服务类。

由于这是在“鸟瞰图”/规划阶段，我想知道创建一个独立的 pojo 库项目是否是一个很好的方法。然后，如果需要，也可以在 Androind 项目中重用相同的库。

还是在这种情况下要求太多？

**编辑 8/29/12** 刚刚发现带有 Hibernate 注释的 POJO 似乎可以在 Android 上开箱即用。与 Hibernate 注释一样，此时不会引起任何问题。这是我最关心的问题之一。所以我尽可能地构建了域模型，在一个摇摆应用程序（还没有 Griffon）、Grails 中对其进行了测试，一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:26:42.357

如果所述域类是真正的 POJO（没有附加 GORM），那么它应该可以工作，特别是在 Android 上，因为该平台有更严格的限制。

通过利用独立的 GORM，可以在 Griffon 中拥有 GORM 域类，但在 Android 中将立即失败。此外，独立的 GORM 在添加到 Griffon 应用程序中的依赖项数量上可能非常繁重。

# java - Enum 的 Java 优势

> ID：10256031
> 
> 赞同：2
> 
> 时间：2012-04-21T03:50:50.907
> 
> 标签：java, enums

使用`Enum`类来比较某些东西有什么好处。有什么缺点：

```
public static final String TRUE = "true";
public static final String FALSE = "false";

public void method1(){

    if(TRUE.equals(inputString)){
        //do some logic
    }
    else if(FALSE.equals(inputString)){
        //do some other logic
    }
} 
```

为什么建议在示例中使用`Enum`而不是`String`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T03:52:57.650

一个重要的原因是，对于`enum`，您知道值是`TRUE`or `FALSE`；不可能是别的。但是`String`罐子根本没有任何价值，所以你必须检查一下。这使得代码既简单又容易理解。

另一个是你可以用 比较`enum`元素`==`，但你必须使用相对较慢的`equals()`调用来比较`String`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T07:30:06.230

解释为什么你应该使用枚举：

*   枚举是**强类型的**
*   **比较枚举更快**，您可以`==`使用`equals()`
*   **枚举可以实现接口、方法和函数。**例如各种公制系统的枚举`Metric.EUCLID.distance(Point a, Point b));`
*   有很多**开箱即用的便捷方法**-`MyEnum[] all = MyEnum.values();` `MyEnum.valueOf("ENUM_NAME");`
*   从 Java 5 开始，您可以在 switch 语句中使用它们，从 Java 7 开始，您可以在 String 中使用它们。
*   IMO 它使代码更具可读性。

# ruby - 如何联合两个不同的 Mongoid Criteria

> ID：10256036
> 
> 赞同：9
> 
> 时间：2012-04-21T03:51:37.133
> 
> 标签：ruby, ruby-on-rails-3, mongodb, mongoid, criteria

我的模型中定义了以下范围：

```
scope :upcoming, -> { where(:start_time.gt => Time.now).asc(:start_time) }
scope :in_progress, -> {
   now = Time.now
   where(:start_time.lte => now).where(:end_time.gte => now).asc(:start_time)
} 
```

我想创建另一个范围，它结合了这两个范围的结果，称为 current。我试过这样的事情：

```
scope :current, -> { self.in_progress | self.upcoming } 
```

但这最终只会将它们都视为数组并将它们连接起来。这样做的问题是，当我尝试使用 Model.current 调用我的范围时，我收到以下错误消息：

```
NoMethodError: undefined method `as_conditions' for #<Array:0xaceb008> 
```

这是因为它将 Mongoid Criteria 对象转换为数组，但我不希望这样。我希望该对象保留为 Mongoid Criteria 对象。

我真正想要的是 in_progress 集和即将到来的集的联合。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T21:07:13.300

您可以尝试使用 Mongoid 的查询方法和取消对条件选择器的引用来组合您的条件，但我不一定推荐这样做——请参见下面的示例。我支持制作第三个范围的建议。请记住，这些范围对应于您希望高效的数据库查询，因此可能值得您花时间检查和理解生成的结果和底层 MongoDB 查询。

模型

```
class Episode
  include Mongoid::Document
  field :name, type: String
  field :start_time, type: Time
  field :end_time, type: Time

  scope :upcoming, -> { where(:start_time.gt => Time.now).asc(:start_time) }
  scope :in_progress, -> {
     now = Time.now
     where(:start_time.lte => now).where(:end_time.gte => now).asc(:start_time)
  }
  scope :current, -> { any_of([upcoming.selector, in_progress.selector]) }
  scope :current_simpler, -> { where(:end_time.gte => Time.now) }
end 
```

测试

```
require 'test_helper'

class EpisodeTest < ActiveSupport::TestCase
  def setup
    Episode.delete_all
  end

  test "scope composition" do
    #p Episode.in_progress
    #p Episode.upcoming
    #p Episode.current
    #p Episode.current_simpler

    in_progress_name = 'In Progress'
    upcoming_name = 'Upcoming'
    Episode.create(:name => in_progress_name, :start_time => Time.now, :end_time => 1.hour.from_now)
    Episode.create(:name => upcoming_name, :start_time => 1.hour.from_now, :end_time => 2.hours.from_now)

    assert_equal([in_progress_name], Episode.in_progress.to_a.map(&:name))
    assert_equal([upcoming_name], Episode.upcoming.to_a.map(&:name))
    assert_equal([in_progress_name, upcoming_name], Episode.current.to_a.map(&:name))
    assert_equal([in_progress_name, upcoming_name], Episode.current_simpler.to_a.map(&:name))
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T16:20:16.287

您必须将 Array 映射回 Mongoid::Criteria。您的任何数组都可以使用 any_in 转换为条件：

```
scope :has_data, -> { any_in(:_id => all.select{ |record| record.data.size > 0 }.map{ |r| r.id }) } 
```

所以，这样的事情应该可以解决问题：（未经测试）

```
scope :current, -> { any_in(:_id => (self.in_progress + self.upcoming).map{ |r| r.id }) } 
```

我希望存在更好的解决方案，但这至少解决了这个等式。

# python - 如何将大量数据插入谷歌数据存储区？

> ID：10256037
> 
> 赞同：0
> 
> 时间：2012-04-21T03:51:59.260
> 
> 标签：python, google-app-engine, google-cloud-datastore, fixtures

我应该编写一个脚本来“放入”所有这些数据吗？但这不是很愚蠢，因为每次应用程序启动时我都必须重新插入数据？

有人建议一种叫做固定装置的东西？我该如何使用它？

我要插入的数据：

```
id: int,
name: varchar,
addr: varchar,
email: varchar,
phone: varchar,
ssn: varchar, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T05:28:21.363

使用[Bulkloader](https://developers.google.com/appengine/docs/python/tools/uploadingdata)，您可以上传 CSV 格式的数据。

# android - Android - OpenGL FloatBuffer 与 IntBuffer

> ID：10256041
> 
> 赞同：3
> 
> 时间：2012-04-21T03:53:22.807
> 
> 标签：android, performance, opengl-es

在大多数 Android 设备上，如果我在整数而不是浮点数中进行所有 OpenGL 顶点计算/渲染，我是否应该期望性能提升？

我最近从使用 0:width、0:height 而不是 -1:1、-1:1 的 OpenGL 视口切换，因此如果需要，我可以将所有绘图计算/缓冲区转换为 Ints 而不是 Floats为了表现。

例如，如果我在我的应用程序中执行以下许多类型的计算和渲染。

```
float x1 = someFloatCalculation(foo);
float x2 = someFloatCalculation(bar);
float y1 = someOtherFloatCalculation(foo);
float y2 = someOtherFloatCalculation(bar);
// the float buffer for the coordinates
FloatBuffer buf = makeFloatBuffer(new float[] { x1, y1, x2, y1, x1,
                                                y2, x2, y2 });
gl.glVertexPointer(2, GL10.GL_FLOAT, 0, buf);
gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4); 
```

这可以通过更改为类似的东西来加速吗

```
int x1 = someIntCalculation(foo);
int x2 = someIntCalculation(bar);
int y1 = someOtherIntCalculation(foo);
int y2 = someOtherIntCalculation(bar);
// the float buffer for the coordinates
IntBuffer buf = makeIntBuffer(new int[] { x1, y1, x2, y1, x1,
                                            y2, x2, y2 });
// GL10.GL_INT is not an existing GL10 constant.  What to use instead?
gl.glVertexPointer(2, ???GL10.GL_INT???, 0, buf);
gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4); 
```

**请注意**，这两个示例中的计算将完全等效，只是后面的版本会将结果简单地四舍五入到最接近的 int。

一个相关的问题是，如果我的视口是从 0 到宽度，从 0 到高度（以像素为单位），我是否会通过这种舍入来降低渲染的平滑度。也就是说，如果我用浮点值绘制一条线，OpenGL 将浮点数“四舍五入”到最近的像素是否会产生与四舍五入到最近的 int 然后渲染类似的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T06:15:03.017

> 在大多数 Android 设备上，如果我在整数而不是浮点数中进行所有 OpenGL 顶点计算/渲染，我是否应该期望性能提升？

不，你不会看到任何区别。GPU 专为浮点运算而设计。最有可能发生的情况是，您的 int 在上传到 GPU 之前就已转换为浮点数。整数函数是为了方便起见，但在渲染端都是浮点数。

# haskell - 更改 Setup.hs 的构建方式

> ID：10256042
> 
> 赞同：10
> 
> 时间：2012-04-21T03:53:44.970
> 
> 标签：haskell, cabal

[编码](http://hackage.haskell.org/package/encoding)包在其构建脚本中使用HaXml （在 中[）](http://hackage.haskell.org/package/HaXml)`Setup.hs`。它碰巧使用了在 HaXml-1.19 和 HaXml-1.22 之间更改的接口位。如果编码包能够使用任一版本构建，那就太好了。我尝试使用通常的阴谋集团技巧，即做类似的事情

```
{-# LANGUAGE CPP #-}
#if MIN_VERSION_HaXml(1,22,0)
-- HaXml-1.22 code
#else
-- HaXml-1.19 code
#endif 
```

...但是在配置包之前不能存在魔术定义，并且正在构建此文件以使配置步骤成为可能。我有哪些选择？有没有办法改变 cabal-install 调用 compile 的命令`Setup.hs`？是否有另一种有条件地选择避开阴谋集团的代码的机制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:57:55.210

该`Data.Data`接口能够（几乎！）构造和解构可能存在或不存在的类型的值。不幸的是，HaXml 似乎没有`Data`其类型的实例，并且您无法定义实例，因为您无法引用可能存在或可能不存在的类型，因此我们不得不求助于 Template Haskell：

以下模块导出`qnameCompat`：

```
{-# LANGUAGE TemplateHaskell #-}
module HaXmlCompat (qnameCompat) where

import Language.Haskell.TH

qnameCompat :: Q [Dec]
qnameCompat = do
  mi <- maybeReify "N"
  case mi of
    Nothing -> sequence [
      tySynD (mkName "QName") [] [t| String |],
      valD [p| toQName |] (normalB [| id |]) [],
      valD [p| fromQName |] (normalB [| Just |]) []]
    Just (DataConI n _ _ _) -> do
      s <- newName "s"
      sequence [
        valD [p| toQName |] (normalB (conE n)) [],
        funD (mkName "fromQName") [
          clause [conP n [varP s]] (normalB (appE [| Just |] (varE s))) [],
          clause [ [p| _ |] ] (normalB [| Nothing |]) []]]
    Just i -> fail $
      "N exists, but isn't the sort of thing I expected: " ++ show i

maybeReify :: String -> Q (Maybe Info)
maybeReify = recover (return Nothing) . fmap Just . reify . mkName 
```

当使用 Template Haskell 在顶层拼接时，`qnameCompat`将检查是否`N`存在。如果是这样，它会生成以下代码：

```
toQName = N
fromQName (N s) = Just s
fromQName _ = Nothing 
```

如果没有，则生成以下内容：

```
type QName = String
toQName = id
fromQName = Just 
```

现在您可以创建和解构`Element`s，例如使用 ViewPatterns 扩展：

```
myElt :: String -> Element i
myElt = Elem (toQName "elemName") [] []

eltName :: Element i -> String
eltName (Elem (fromQName -> Just n) _ _) = n 
```

ViewPatterns 很方便，但不是必需的，当然：对结果使用普通模式匹配`fromQName`也可以。

（这些想法促使我开发了[notcpp 包](http://hackage.haskell.org/packages/archive/notcpp/0.2.0.2/doc/html/NotCPP-ScopeLookup.html)，其中包括`maybeReify`和其他一些有用的实用程序）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T16:32:01.853

似乎没有太多控制`cabal-install/Distribution/Client/SetupWrapper.hs`.是。`Setup.hs``Setup.hs`

另一个技巧是制作安装脚本使用的兼容性 shim 库，该库具有适当的版本技巧。

但也许真正要问的问题是：为什么要`Setup.hs`使用外部库？

# ajax - 在 Ext Js 中生成带有 AJAX 请求的另存为对话框

> ID：10256050
> 
> 赞同：0
> 
> 时间：2012-04-21T03:56:31.760
> 
> 标签：ajax, json, extjs4, export

我有一个包含网格和按钮的应用程序，用户可以将网格导出到 Excel。当服务器使用 excel 文件响应时，我希望能够显示另存为对话框。服务器接受参数作为 JSON 对象。这是我的代码：-

```
Ext.Ajax.request({
   url: '/export/excel/',
   method: 'POST',
   //Send the query as the message body
   jsonData: jsonStr,
   success: function (result,request) {
        Ext.DomHelper.append(document.body, {
           tag: 'iframe',
            frameBorder: 0,
            width: 0,
            height: 0,
            //src:result,
            css: 'display:none;visibility:hidden;height:1px;'
        });
    }, //success
    failure: function (response, opts) {
        var msg = 'server-side failure with status code: ' + response.status + ' message: ' + response.statusText;
        Ext.Msg.alert('Error Message', msg);
    }
}); 
```

我知道有一个类似的问题（[ExtJS AJAX 另存为对话框](https://stackoverflow.com/questions/9467367/extjs-ajax-save-as-dialog-box)），但它引用了服务器上的静态文件。在我的情况下，根据发送的 json，结果每次都会有所不同。我在 result.responseText 中取回了我想要的整个 excel 文件。需要做什么才能弹出对话框询问用户另存为选项？另外，我不确定`src`应该如何配置 domhelper 中的。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T02:17:46.337

我相信以完全与客户端无关的方式执行此操作的唯一方法是从服务器端使用 Content-Type 强制它：octect-stream 和 Content-Disposition 的“附件”以及建议的文件名。看：

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1)

和

[http://www.ryboe.com/tutorials/php-headers-force-download](http://www.ryboe.com/tutorials/php-headers-force-download)

您也可以使用所谓的“dataURI”，但它们有自己的一系列问题：

[http://en.wikipedia.org/wiki/Data_URI_scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)

我的建议是在服务器上动态返回 EXCEL 内容，然后将按钮设为指向该 url 的链接，该链接发布您正在使用的当前数据并设置正确的响应标头以触发您的浏览器下载文件。由于您正在执行 AJAX 调用并且不让 Web 浏览器直接获取 URL，因此您设置用于控制浏览器解释内容方式的任何 HTTP 标头都无关紧要，因为您是在 JS 中而不是在用户的浏览器中执行此操作。通过服务器上的链接将内容直接返回给用户，您将解决这个问题。

由于您实际上希望用户单击链接，因此我认为 AJAX 在这里不合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:11:22.483

我让服务器端返回文件创建和保存位置的路径，而不是在响应中将文件作为附件发送，从而避免在响应中设置标题的问题。`result.responseText`然后我只是将代码中 iframe 的源设置为在响应 ( )中返回的路径。

# .htaccess - 修改后如何设置缓存过期？

> ID：10256051
> 
> 赞同：2
> 
> 时间：2012-04-21T03:56:45.257
> 
> 标签：.htaccess, browser-cache, cache-control, last-modified, mod-expires

我正在使用 .htaccess 文件来设置网站的标题。我想知道在对文件进行修改后如何将文件缓存设置为过期。这可能吗？

即这会工作吗？

```
ExpiresDefault "modification" 
```

换句话说，我希望缓存一直保留到从服务器修改文件为止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T20:43:24.023

过期修改将缓存设置为在文件最后一次修改后的某个时间过期。即使您的文件在设置的缓存时间限制内再次被修改，已经缓存文件的客户端也不会寻找新版本。 [Apache Expiration](http://books.google.ca/books?id=1z6QfgsnpKsC&lpg=PT105&ots=4uMqnvjf16&dq=apache%20what%20is%20the%20purpose%20of%20ExpiresDefault&pg=PT104#v=onepage&q=apache%20what%20is%20the%20purpose%20of%20ExpiresDefault&f=false)包含有关 expire 模块的信息。

这是一个例子：

```
#BEGIN Cache-Control Headers
<ifModule mod_headers.c>
   <filesMatch "\.(css|js)$">
      ExpiresDefault "modification plus 4 weeks"
  </filesMatch>
</ifModule>
# END Cache-Control Headers 
```

如果您的 css 文件在 1 周前被修改，缓存将在 3 周后过期，而不是 4 周。

**那么如何在文件已经缓存后显示新修改的 css 文件呢？**

如果您修改您的 css 文件，则更改*不会*显示在缓存的浏览器中，直到缓存过期。解决此问题的一种方法是更改​​缓存的 css 文件的名称。（示例重命名 main1.css -> main2.css）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:13:06.247

我认为您对 expires 标头有错误的想法。expires 头告诉接收者它可以在本地缓存文件多长时间。在这段时间之后，接收者必须重新请求资源。如果服务器说资源将在一小时后过期，但资源在一分钟后更改。接收器将需要另外 59 分钟才能获取此修改后的版本。服务器无法通知接收者资源已过早过期。

# iphone - 我可以在 Windows 上运行目标 c 应用程序吗？

> ID：10256054
> 
> 赞同：1
> 
> 时间：2012-04-21T03:57:30.750
> 
> 标签：iphone, objective-c, ios, mobile

我想学习一些关于我手机开发的知识。所以，首先我想知道，我可以在 Windows 上运行基本应用程序吗？是否有任何可用的应用程序或工具。我知道，我们可以在 Mac/Ubuntu 上运行它。但是，我已经在我的笔记本电脑上安装了 Windows 7。

将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:01:43.227

出于学习目的，您可以安装虚拟机安装 OSX 并尝试一些示例（我猜这是不合法的）。但是，如果您想创建一个应用程序将其上传到商店，您 **将**需要一台 mac 机器。

# ios - 在 iOS 上，为什么 ViewController 中的 init 不起作用？

> ID：10256055
> 
> 赞同：1
> 
> 时间：2012-04-21T03:57:35.277
> 
> 标签：ios

在 ViewController 的界面中，我有

```
@property int count; 
```

在实施中，我有

```
@synthesize count;

-(id) init {
    self = [super init];
    if (self) {
        self.count = 100;
    }
    return self;
}

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"%i", self.count++);
} 
```

但是由于某种原因，第一次`self.count`打印出来是 0 而不是 100？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T04:03:16.770

将在您的 UIViewController 上调用各种 -init 方法之一，具体取决于它是来自 .xib、情节提要还是在代码中的其他位置手动分配。

放置这种初始化的更好的地方是-viewDidLoad，像这样

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.count = 100;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T04:13:59.310

在您的 init 方法中放置一个 NSLog 或调试断点，我怀疑您会发现它没有被调用。如果您查看 UIViewController，您会看到其他初始化方法（例如，如果您使用的是 NIB，它会调用[`initWithNibName:bundle:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/initWithNibName%3abundle%3a)）。如果是通过故事板，它可能会有所不同。请参阅 Apple 的[iOS 视图控制器编程指南中](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW6)对初始化的讨论。

一般视图控制器配置的更好位置是`viewDidLoad`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T05:14:59.483

将其更改为：

```
- (id)initWithCoder:(NSCoder *)aDecoder{
    self = [super initWithCoder:aDecoder];
    if (self) {
        self.count = 100;
    }
    return self;
} 
```

该视图实际上是由 XIB 创建的，它正在“解码”它或将其拆箱。发生这种情况时，XIB 调用`initWithCoder:`

# google-maps-api-3 - 如何将 GoogleMap APIV3 集成到 SmartGWT 中？

> ID：10256058
> 
> 赞同：0
> 
> 时间：2012-04-21T03:58:03.870
> 
> 标签：google-maps-api-3, mvp, smartgwt, gwt-platform

我正在将 gwt-maps-3.8.0-pre1.zip 集成到使用 gwt-platform MVP 和 smartgwt 的应用程序中。我有一个主演示者并在其中嵌套了一个演示者小部件。VLayout 用作父级的画布，并使用 HTMLPane 作为嵌套的 googlemap 的画布。googlemap无法正确显示，但是当我使用firebug监控http数据时，发现googlemap的信息已经返回到浏览器，但不知道为什么无法正确显示？任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:16:41.537

您应该确保您的模块的条目 html 包含`<script>`地图的标签：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script> 
```

由于您确实看到了 googlemaps 数据，我猜想您的应用正在检索 API，并且问题可能出在嵌套的 UI 结构中。在我检查过的几个 gwt-maps 示例以及我正在开发的应用程序中，地图被最大化并`<div>`在条目 html 的正文中给出了自己的：

```
<body style="margin:0px;">
  <div id="map_canvas" style="width:100%; height:100%">Map is loading...</div>
</body> 
```

使用深度嵌套的容器，浏览器更有可能将大小调整为零。使用 Firebug 或任何其他 DOM Inspector，将 DOM 对象的树从`<document>`向下遍历到地图对象的包含`<div>`. 检查是否有任何高度属性为 0px，并使用 CSS 或 GWT 方法最大化这些容器对象。

请报告您的发现；我敢肯定，在布局中嵌套地图将是未来的共同目标，我们都将从您所学的知识中受益。

# php - 在共享服务器上启用 file_get_contents

> ID：10256060
> 
> 赞同：4
> 
> 时间：2012-04-21T03:58:43.450
> 
> 标签：php, phpmyadmin

我在用 `file_get_contents('http://example.com');`

我得到错误

```
'function.file-get-contents'>function.file-get-contents</a>]: URL file-access is disabled in the server configuration in 
```

我知道我必须 `allow_url_fopen`在 php 文件中启用。问题是我在共享服务器上我是否可以访问即 ftp 但我无法找到文件的位置

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T04:05:20.900

不幸的是，如果[allow_url_fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)被禁用，则无法启用它。只有 root 用户可以编辑`php.ini`控制该设置的文件。

您可以请求您的主机启用它，或者查看共享服务器上是否启用了[cURL 。](http://php.net/curl)

# javascript - 用于查找十进制/浮点数的正则表达式？

> ID：10256061
> 
> 赞同：55
> 
> 时间：2012-04-21T03:58:47.100
> 
> 标签：javascript, regex, floating-point, decimal

我需要十进制/浮点数的正则表达式，例如 12 12.2 1236.32 123.333 和 +12.00 或 -12.00 或 ...123.123... 用于 javascript 和 jQuery。谢谢你。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-04-21T04:02:03.387

可选匹配开头的 + 或 -，后跟一个或多个小数位，可选后跟一个小数点和一个或多个小数位，直到字符串的结尾：

```
/^[+-]?\d+(\.\d+)?$/ 
```

[**正则表达式**](http://regexpal.com/?flags=gm&regex=%5E%5B%2b-%5D?%5Cd%2b%28%5C.%5Cd%2b%29?$%0A&input=All%20these%20match:%0A%0A12%0A12.2%0A1236.32%0A123.333%0A%2b12.00%0A-12.00%0A123.123%0A0%0A%0AThese%20don%27t:%0A%0A127.0.0.1%0A$499.99%0A.5%0A)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-12-08T10:24:25.727

正确的表达式应该如下：

```
[+-]?([0-9]*[.])?[0-9]+ 
```

这适用于：

```
+1
+1.
+.1
+0.1
1
1.
.1
0.1 
```

这是 Python 示例：

```
import re
#print if found
print(bool(re.search(r'[+-]?([0-9]*[.])?[0-9]+', '1.0')))
#print result
print(re.search(r'[+-]?([0-9]*[.])?[0-9]+', '1.0').group(0)) 
```

输出：

```
True
1.0 
```

如果你使用的是mac，你可以在命令行上测试：

```
python -c "import re; print(bool(re.search(r'[+-]?([0-9]*[.])?[0-9]+', '1.0')))"

python -c "import re; print(re.search(r'[+-]?([0-9]*[.])?[0-9]+', '1.0').group(0))" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-24T11:15:14.713

您可以使用 isNaN 检查文本验证以及仅一位小数点验证

```
var val = $('#textbox').val();
var floatValues =  /[+-]?([0-9]*[.])?[0-9]+/;
 if (val.match(floatValues) && !isNaN(val)) {
  // your function
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-26T02:19:32.723

*这是一篇旧帖子，但它是“浮点正则表达式”或类似内容的热门搜索结果，并不能完全回答 _my_ 问题。既然我已经解决了，我会分享我的结果，所以遇到这个线程的下一个人不必自己解决。*

到目前为止，所有答案都接受`0`在小数点左侧有两位（或更多）数字的数字前导（例如`0123`，而不是仅`123`） 这不是真正有效的，在某些情况下用于指示数字是八进制的(base-8) 而不是常规的十进制 (base-10) 格式。

这些表达式也接受没有前导零（`.14`而不是`0.14`）或没有尾随小数部分（`3.`而不是`3.0`）的小数。这在某些编程上下文（包括 JavaScript）中是有效的，但我想禁止它们（因为出于我的目的，这些更可能是错误而不是故意的）。

忽略“科学记数法”之类`1.234E7`的，这是一个符合我标准的表达式：

`/^((-)?(0|([1-9][0-9]*))(\.[0-9]+)?)$/`

或者如果你真的想接受一个领先的`+`，那么：

`/^((\+|-)?(0|([1-9][0-9]*))(\.[0-9]+)?)$/`

我相信正则表达式会对典型的整数或十进制浮点数进行严格的测试。

匹配时：

*   `$1`包含匹配的完整号码
*   `$2`包含（可能为空）前导符号 (+/-)
*   `$3`包含小数点左侧的值
*   `$5`包含小数点右侧的值，包括前导`.`

“严格”是指数字必须是您正在测试的字符串中的唯一内容。

如果您只想从包含其他内容的字符串中提取浮点值，请使用以下表达式：

`/((\b|\+|-)(0|([1-9][0-9]*))(\.[0-9]+)?)\b/`

哪个会找到`-3.14`in`"negative pi is approximately -3.14."`或 in`"(-3.14)"`等。

编号的组与上面的含义相同（除了现在没有前导符号时是`$2`空字符串 ( )，而不是)。`""``null`

但请注意，它还会尝试提取它可以找到的任何数字。例如，它将`127.0`从`127.0.0.1`.

如果您想要比这更复杂的东西，那么我认为您可能想要查看词法分析而不是正则表达式。我猜人们可以创建一个基于前瞻的表达式，该表达式可以识别`"Pi is 3.14."`包含浮点数但 `Home is 127.0.0.1.`不包含浮点数，但它充其量是复杂的。如果您的模式以非平凡的方式依赖于它之后的字符，那么您将开始冒险超出正则表达式的最佳位置。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-19T06:51:36.377

Paulpro 和 lbsweek 的回答让我想到了这一点：

```
re=/^[+-]?(?:\d*\.)?\d+$/;
>> /^[+-]?(?:\d*\.)?\d+$/

re.exec("1")
>> Array [ "1" ]

re.exec("1.5")
>> Array [ "1.5" ]

re.exec("-1")
>> Array [ "-1" ]

re.exec("-1.5")
>> Array [ "-1.5" ]

re.exec(".5")
>> Array [ ".5" ]

re.exec("")
>> null

re.exec("qsdq")
>> null 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-03-28T23:59:03.793

对于任何新人：

*我为 E 科学记数法（没有空格）*做了一个正则表达式。

```
const floatR = /^([+-]?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)(?:[eE][+-]?[0-9]+)?)$/;
let str = "-2.3E23";
let m = floatR.exec(str);
parseFloat(m[1]); //=> -2.3e+23 
```

如果您更喜欢使用[Unicode 数字](https://www.fileformat.info/info/unicode/category/Nd/list.htm)，您可以在 RegExp 中将all 替换`[0-9]`为。并且可能在 RegExp 的末尾 添加 Unicode 标志。`\d`
`u`

要更好地理解该模式，请参阅[https://regexper.com/](https://regexper.com/#%2F%5E%28%5B%2B-%5D%3F%28%3F%3A%5B0-9%5D%2B%28%3F%3A%5C.%5B0-9%5D%2B%29%3F%7C%5C.%5B0-9%5D%2B%29%28%3F%3A%5BeE%5D%5B%2B-%5D%3F%5B0-9%5D%2B%29%3F%29%24%2F)。
对于制作 RegExp，我可以建议[https://regex101.com/](https://regex101.com/)。

编辑：找到另一个以颜色查看 RegExp 的站点：[https](https://jex.im/regulex/#!flags=&re=%5E(%5B%2B-%5D%3F(%3F%3A%5B0-9%5D%2B(%3F%3A%5C.%5B0-9%5D%2B)%3F%7C%5C.%5B0-9%5D%2B)(%3F%3A%5BeE%5D%5B%2B-%5D%3F%5B0-9%5D%2B)%3F)%24) ://jex.im/regulex/ 。

编辑 2：虽然 op 专门要求 RegExp，但您可以直接在 JS 中检查字符串：

```
const isNum = (num)=>!Number.isNaN(Number(num));
isNum("123.12345678E+3");//=> true
isNum("80F");//=> false 
```

将字符串转换为数字（或`NaN`），然后`Number()`
检查它是否不是`NaN``!Number.isNaN()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-01T03:27:26.903

这里有更严谨的答案

```
^[+-]?0(?![0-9]).[0-9]*(?![.])$|^[+-]?[1-9]{1}[0-9]*.[0-9]*$|^[+-]?.[0-9]+$ 
```

以下值将匹配（+- 符号也可以）

```
.11234
0.1143424
11.21
1. 
```

以下值将不匹配

```
00.1
1.0.00
12.2350.0.0.0.0.
.
.... 
```

**这个怎么运作**

(?! ***regex*** ) 表示 NOT 操作

让我们通过 | 分解正则表达式 与逻辑或运算符相同的运算符

```
^[+-]?0(?![0-9]).[0-9]*(?![.])$ 
```

这个正则表达式是检查从 0 开始的值

首先检查 + 和 - 签名 0 或 1 次`^[+-]`

然后检查它是否有前导零`0`

如果有，那么它旁边的值不能为零，因为我们不想看到 00.123`(?![0-9])`

然后准确地检查一次点并检查无限次数字的小数部分`.[0-9]*`

最后，如果它后面有一个小数部分，我们将其丢弃。`(?![.])$`

**现在看第二部分**

```
^[+-]?[1-9]{1}[0-9]*.[0-9]*$ 
```

`^[+-]?`和上面一样

如果它从非零开始，则匹配第一个数字一次，然后无限次匹配，`[1-9]{1}[0-9]*`例如 12.3 , 1.2, 105.6

匹配点一次，无限位跟随它`.[0-9]*$`

**现在看第三部分**

```
^[+-]?.{1}[0-9]+$ 
```

这将检查值从 . 例如 .12、.34565

`^[+-]?`和上面一样

匹配点一次，后面跟着一个或多个数字`.[0-9]+$`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-12T17:39:31.173

如果您希望它与 一起使用`e`，请使用以下表达式：

```
[+-]?[0-9]+([.][0-9]+)?([eE][+-]?[0-9]+)? 
```

这是一个 JavaScript 示例：

```
var re = /^[+-]?[0-9]+([.][0-9]+)?([eE][+-]?[0-9]+)?$/;

console.log(re.test('1'));
console.log(re.test('1.5'));
console.log(re.test('-1'));
console.log(re.test('-1.5'));
console.log(re.test('1E-100'));
console.log(re.test('1E+100'));
console.log(re.test('.5'));
console.log(re.test('foo'));
```

# c++ - 在OpenGL中将3D坐标转换为屏幕坐标

> ID：10256063
> 
> 赞同：0
> 
> 时间：2012-04-21T03:59:39.457
> 
> 标签：c++, opengl

我在将 3D 坐标转换为屏幕坐标时遇到问题。我必须将球心转换为屏幕坐标。我的代码在这里：

```
//  OpenGL problem

#ifdef __APPLE__
#  include <GLUT/glut.h>
#else
#  include <GL/glut.h>
#endif

void passive(int,int);
void reshape(int,int);
void init(void);
void display(void);
void camera(void);

int cursorX,cursorY,width,height;
double centerX,centerY,centerZ;
//GLfloat modelviewMatrix[16],projectionMatrix[16];
GLdouble modelviewMatrix[16],projectionMatrix[16];
GLint viewport[4];

int main (int argc,char **argv) {
    glutInit (&argc,argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_DEPTH | GLUT_RGBA);
    glutInitWindowSize(1364,689);
    glutInitWindowPosition(0,0);
    glutCreateWindow("Sample");
    init();
    glutDisplayFunc(display);
    glutIdleFunc(display);
    glutPassiveMotionFunc(passive);
    glutReshapeFunc(reshape);
    glutMainLoop();
    return 0;
}

void display() {
    glClearColor (0.0,0.0,0.0,1.0);
    glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    //  Render 3D content
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(60,(GLfloat)width/(GLfloat)height,1.0,100.0);    // create 3D perspective projection matrix
    glMatrixMode(GL_MODELVIEW);
    glPushMatrix();
    camera();
    glTranslatef(-6,-2,0);
    glColor3f(1,0,0);
    glutSolidSphere(5,50,50);
    glPopMatrix();

    glGetDoublev(GL_MODELVIEW_MATRIX, modelviewMatrix);
    glGetDoublev(GL_PROJECTION_MATRIX, projectionMatrix);
    glGetIntegerv(GL_VIEWPORT, viewport);
    // get 3D coordinates based on window coordinates  
    gluProject(-6, -2, 0, modelviewMatrix, projectionMatrix, viewport, &centerX, &centerY, &centerZ);

    // Render 2D content
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0, width,height, 0);                 // create 2D orthographic projection matrix
    glMatrixMode(GL_MODELVIEW);
    glColor3f(1,1,1);
    glBegin(GL_LINES);
        glVertex2f( centerX,centerY );          // coordinate of center of the sphere in orthographic projection
        glVertex2f( cursorX,cursorY );
    glEnd();

    glutSwapBuffers();
}

void camera(void) {
    glRotatef(0.0,1.0,0.0,0.0);
    glRotatef(0.0,0.0,1.0,0.0);
    glTranslated(0,0,-20);
}

void init(void) {
    glEnable (GL_DEPTH_TEST);
    glEnable (GL_BLEND);
    glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_COLOR_MATERIAL);
}

void reshape(int w, int h) {
    width=w; height=h;
}

void passive(int x1,int y1) {
    cursorX=x1; cursorY=y1;
} 
```

在我的代码中，centerX 和 centerY 坐标超出了屏幕。我必须在球体中心和鼠标指针之间画一条线。对代码进行任何修改以使其正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T04:31:38.433

通常我用来在 3D / 2D 坐标之间切换的功能。看看它是否适合你。

```
void toggle2DMode(bool flag, GLint Width, GLint Height) const
{
        if(flag)
        {
                glMatrixMode(GL_PROJECTION);
                glPushMatrix();
                glLoadIdentity();

                glOrtho(0.0, Width, Height, 0.0, -1.0f, 1.0f);
                glMatrixMode(GL_MODELVIEW);
                glPushMatrix();
                glLoadIdentity();
                glDisable(GL_DEPTH_TEST);
                glEnable(GL_BLEND);
        }
        else
        {
                glMatrixMode(GL_PROJECTION);
                glPopMatrix();
                glMatrixMode(GL_MODELVIEW);
                glPopMatrix();
                glEnable(GL_DEPTH_TEST);
                glDisable(GL_BLEND);
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-29T18:06:02.263

我检查四边形分辨率的功能

```
void WINDOW_TEXT::calcResolution( GLshort & x , GLshort & y )
{
    GLdouble tx, ty, ttx, tty, z; // target 2d coords (z is 'unused')

    GLdouble model_view[16];
    glGetDoublev(GL_MODELVIEW_MATRIX, model_view);

    GLdouble projection[16];
    glGetDoublev(GL_PROJECTION_MATRIX, projection);

    GLint viewport[4];
    glGetIntegerv(GL_VIEWPORT, viewport);

    // get window coords based on 3D coordinates
    gluProject( up_right.x, up_right.y, up_right.z,
                model_view, projection, viewport,
                &tx, &ty, &z);

    gluProject( down_left.x, down_left.y, down_left.z,
                model_view, projection, viewport,
                &ttx, &tty, &z);

    x = (GLshort)(tx-ttx);
    y = (GLshort)(tty-ty);
}; 
```

“z”被忽略，你得到存储在 x 和 y 中的纯分辨率

# c++ - C++中的结构

> ID：10256064
> 
> 赞同：0
> 
> 时间：2012-04-21T03:59:45.120
> 
> 标签：c++, c, constructor, struct

我遇到了这段代码，但我无法理解这段代码的功能。如果有人能解释一下，那将是一个很大的帮助。

```
struct A{
   int i,j;
   A(int ii,int jj) : i(ii),j(ii){}

   A(const A&a){
           }
   A& operator =(const A& a){
               i=a.i;j=a.j;
   }
};

int main()
{
int i;
A a(1,2);
A b(2,3);
A z = (a=b);
cout<<z.i<<" "<<z.j<<endl;

system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:08:27.020

解释：

```
struct A{
   int i,j;//members i and j

   A(int ii,int jj) : i(ii),j(ii){} //A constructor. Short form of A(int ii,int jj){i = ii;j = jj;} Original code is wrong too. Should be j(jj) instead of j(ii)

   A(const A&a){}//Another constructor. It is missing the assignment

   A& operator =(const A& a){
               i=a.i;j=a.j;
   }//Equal operator overload definition for A = another A. It copies the data from another A and assign to this new one
}; 
```

* * *

完整的工作代码：

```
#include <iostream>
using namespace std;

struct A{
   int i,j;

   A(int ii,int jj) : i(ii),j(jj){}

   A(const A&a){i=a.i;j=a.j;}

   A& operator =(const A& a){i=a.i;j=a.j;}
};

int main()
{
    int i;
    A a(1,2);
    A b(2,3);
    A z = (a=b);
    cout<<z.i<<" "<<z.j<<endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T04:23:33.480

你的问题是这一行：

`A z = (a=b);`

它最终会调用您的`operator=`方法和您的复制构造函数。当`a = b`执行时，它使用该`operator=`方法，因为`a`已经存在，然后`a`返回一个引用。你本质上是在打电话`a.operator=(b)`。

执行时`A z = ...`，它实际上使用 Copy Constructor `A(const A&a)`，而不是该`operator=`方法，因为`z`尚不存在。由于`z`是由该复制构造函数创建`i`并且`j`从未初始化，因此当您尝试将它们打印出来时，您会得到内存中为`i`and保留的任何垃圾`j`。

查看此行的另一种方法：

`A z = (a=b);`

其实是这样的：

`A z(a.operator=(b));`

这是一个完整的例子：

```
int main()
{
    A a(1,2);
    A b(2,3);

    a = b; //calls A& operator=(const A& a)

    A z = a; //calls A(const A& a)
} 
```

总之，解决方法是这样做：

```
A(const A& a)
   {
        i = a.i;
        j = a.j;
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T04:56:36.493

三个错误：

1.`A(int ii,int jj) : i(ii),j(ii /* jj here? */){}`

2.复制构造函数应该初始化成员： `A(const A&a): i(a.i), j(a.j) {}`

3.你应该`return *this`添加`operator=`：

```
A& operator =(const A& a){
    i=a.i;j=a.j;
    return *this;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-21T04:26:36.010

OP问了`the operator overloadin part. if we take a as const how can we edit it.`

运算符重载部分是：

```
A& operator =(const A& a){
           i=a.i;j=a.j; 
```

}

当你写作时`a=b`，你只期望`a`改变而不是改变`b`。这是由函数参数定义中的 const 说明符强制执行的。此 const 说明符与等号左侧出现的任何内容无关。它只是说等号的右边不会被修改。

# java - 您可以在 Eclipse java doument 中放入的代码行数是否有限制

> ID：10256068
> 
> 赞同：6
> 
> 时间：2012-04-21T04:00:07.893
> 
> 标签：java, android, eclipse, class

我有一个我一直在做的项目，直到今天一切都很顺利。我在一个 java 类文档中有近 6000 行代码。如果我尝试在代码中再添加一个 IF 子句，则在调用该类时程序会引发异常。我试图放入类中的所有其他片段都会导致类在调用时失败。我试图添加我知道可以正常工作的测试代码，它们都抛出了强制关闭警报对话框。相信我，我尝试放入课堂的最后一个片段没有任何问题。一旦我取出最后一个“if”片段，就没有错误了。有没有人见过这个？调用类时，模拟器中会引发异常。我得到强制关闭警报窗口。这是java文件大小：172,503字节提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T04:05:41.217

您可以使用以下设置进行修改：

```
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx512m 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T07:55:46.820

我前段时间遇到过这个问题，发现只要不超过方法限制，一个类中有 50k 行或更多代码是没有问题的。

根据实际导致字节码大小的一种方法中的内容，我在 2-3k 行代码/方法之间遇到了限制。

添加：

顺便说一句，实际上当您的总代码变得太大而无法编译时，Eclipse 会崩溃——只需将 Eclipse 的内存增加到 1 Gb 左右。到目前为止，这对于我总共有大约 100k 行的项目来说已经足够了......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T04:01:56.413

我之前注意到这一点，Eclipse 运行 Java 本身，所以它非常占用内存，如果你有太多的代码，以至于它需要超过可以分配的东西，它就会崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T04:12:58.440

> 您可以在 Eclipse java doument 中放入的代码行数是否有限制。

不准确。

编译方法中字节码的数量以及其他类似的东西是有限制的，但这些是由 Java 类文件格式（即 JVM 规范）而不是 Eclipse 强加的。

Eclipse 也可能需要更多内存，但我认为添加单个`if`语句不会可靠地触发这一点。（如果确实如此，异常会告诉您您内存不足......）

# c++ - 为什么静态 ofstream 不起作用

> ID：10256070
> 
> 赞同：2
> 
> 时间：2012-04-21T04:00:10.623
> 
> 标签：c++, ofstream

我正在用 C++ 开发一个具有大量文件 io 操作的程序。我在公共标头中定义了一个静态 ofstream，以便在项目中的任何地方都可以访问它。代码结构如下：所有公共变量都定义在com.h中，test.h和test.cpp是针对一个叫OPClass的类，main.cpp承载主程序

**COM.H:**

```
#ifndef __CLCOM__
#define __CLCOM__
#include <sstream>
#include <fstream>
#include <iostream>

using namespace std;

static ofstream out;
static stringstream ss;

#endif 
```

**测试.H：**

```
#ifndef __CL__
#define __CL__
#include <iostream>
#include <fstream>
#include "com.h"

using namespace std;

class OPClass
{
  public:
   void run(void);
   void show(ostream &o) const;
};
#endif 
```

**测试.CPP：**

```
#include "com.h"
#include "test.h"

void OPClass::run(void)
{
  out << "Here is run()" << endl;
  show(out);
}

void OPClass::show(ostream &o) const
{
  o << "hello!" << endl;
} 
```

**主.CPP：**

```
#include "com.h"
#include "test.h"

void runmain(void)
{
  OPClass op;
  out.open("output.txt", ios::out | ios::trunc);
  out << endl << "State changed!" << endl;
  op.run();
  if (out.is_open()) out.close();
}

int main(int argc, char* argv[])
{
  runmain();
  return  0;
} 
```

可以看到，静态的 ofstream 被命名为 out，将在主程序和类中调用。我正在使用 mingw32 并且在编译或运行时没有看到任何问题。但似乎只有 runmain() 中的信息会被写入输出文件。写入类中该文件的任何其他消息永远不会出现在输出文件中。为什么会这样，我如何编写一个通用文件流，以便项目中的任何地方都可以访问它？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:47:12.523

每个编译单元都有自己的`ss`和`out`. 因此，main.cpp 与 test.cpp 看到的实例不同。

你真的不需要在这里静态。为了解决这个问题，而不是在头文件中声明变量及其分配，您只需使用`extern`关键字对它们进行原型设计。

```
#ifndef __CLCOM__
#define __CLCOM__
#include <sstream>
#include <fstream>
#include <iostream>

// Note: don't put "using" statements in headers
// use fully qualified names instead 
extern std::ofstream out;
extern std::stringstream ss;

#endif 
```

您实际将声明放在哪里取决于您，只需确保它仅在一个地方即可。这可能是一个 com.cpp 文件，或者如果这适合您的项目，您可以将其粘贴在 main.cpp 中。

```
std::ofstream out;
std::stringstream ss; 
```

不是说像这样的全局变量是个好主意，无论如何......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T04:54:09.847

先发制人的声明：您应该接受@HostileFork 的回答。

就像附录一样，显示正在发生的事情的一种简单方法是`out`在您尝试使用它时打印出地址。

如果您添加以下几个语句：

```
void OPClass::run(void)
{
  cout << "Address of 'out' = " << &out << endl;
  out << "Here is run()" << endl;
  show(out);
} 
```

和：

```
void runmain(void)
{
  cout << "Address of 'out' = " << &out << endl; 
  OPClass op;
  out.open("output.txt", ios::out | ios::trunc);
  out << endl << "State changed!" << endl;
  op.run();
  if (out.is_open()) out.close();
} 
```

您会注意到两个打印语句用于`out`显示两个不同的地址。这应该告诉您，您实际上将两个`out`created 实例作为两个不同的变量。您的方法`OPClass`正在尝试写入完全不同的输出流。它与您`static`在全球范围内使用的方式有关；它的行为不像你想象的那样。在全局上下文中，声明某些`static`内容会将其绑定到它所在文件的本地范围。

# c++ - 参数传递礼仪 (C++) const& 与 value

> ID：10256081
> 
> 赞同：3
> 
> 时间：2012-04-21T04:02:27.273
> 
> 标签：c++, reference, constants, parameter-passing

**如果一个函数只需要查看一个参数的值，你不应该总是通过常量引用传递那个参数吗？**

我的一位同事表示，对于小类型来说没关系，但我不同意。

那么这样做有什么好处：

```
void function(char const& ch){ //<- const ref
    if (ch == 'a'){
        DoSomething(ch);
    }
    return;
} 
```

对此：

```
void function(char ch){ //<- value
    if (ch == 'a'){
        DoSomething(ch);
    }
    return;
} 
```

在我看来，它们的大小相同：

```
#include <iostream>
#include <cstdlib>

int main(){

    char ch;
    char& chref = ch;

    std::cout << sizeof(ch) << std::endl; //1
    std::cout << sizeof(chref) << std::endl; //1

    return EXIT_SUCCESS;
} 
```

但我不知道是否总是这样。
我相信我是对的，因为它不会产生任何额外的开销并且它是自我记录的。
但是，我想问问社区我的推理和假设是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:47:09.620

Your colleague is correct. For small types (char, int) it makes no sense to pass by reference, when the variable is not to be modified. Passing by value would be better, as size of pointer (used in case of passing by reference) is about the size of small types.

And moreover, passing by value, is lesser typing, as well as slightly more readable.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T04:10:46.817

尽管`sizeof(chref)`与 相同`sizeof(ch)`，但在大多数系统上，按引用传递字符确实需要更多字节：尽管标准没有说明引用实现的任何具体内容，但地址（即指针）经常在幕后传递。启用优化后，这可能无关紧要。当您编写模板函数时，不会被修改的未知类型的项目应始终通过 const 引用传递。

就小类型而言，您可以使用`const`限定符按值传递它们，以强调您不会通过函数的签名触及参数：

```
void function(const char ch){ //<- value
    if (ch == 'a'){
        DoSomething(ch);
    }
    return;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T04:35:22.097

对于较小的值，创建引用和取消引用它的成本可能大于复制它的成本（如果有差异的话）。当您考虑到引用参数几乎总是作为指针实现时尤其如此。`const`如果您只是将您的值声明为（我将此值仅用于输入并且不会被修改），那么这两个文档都同样有效。我通常只是按值将所有标准内置类型`const`和所有用户定义/ STL 类型作为`const &`.

您的`sizeof`示例有缺陷，因为`chref`它只是`ch`. `sizeof(T)`对于任何类型，您都会得到相同的结果`T`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T04:13:04.077

大小与通过的*不*一样。结果取决于 ABI 调用约定，但 `sizeof(referenceVariable)`生成`sizeof(value)`.

> 如果一个函数只需要查看一个参数的值，你不应该总是通过常量引用传递那个参数吗？

这就是*我*所做的。我知道人们不同意我的观点，并主张按值传递小型内置函数，或者更愿意省略`const`. 通过引用传递可以添加指令和/或消耗更多空间。我通过这种方式是为了*保持一致性*，因为总是衡量任何给定平台的最佳通过方式是很麻烦的维护。

除了可读性之外，没有其他优势（如果这是您的偏好）。性能可能会受到*非常轻微*的影响，但在大多数情况下不会考虑。

按值传递这些小内置函数更为常见。如果按值传递，您可以`const`限定定义（独立于声明）。

我的建议是，绝大多数团队应该简单地选择一种方式来传递并坚持下去，除非*每条指令都很重要*，否则性能不应影响这一点。`const`从来不疼。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T04:27:13.070

在我看来，您通过 const 引用传递的一般方法是一种很好的做法（但请参阅下面关于您的示例的一些警告）。另一方面，您的朋友是正确的，对于内置类型，按引用传递不应导致任何显着的性能提升，甚至可能导致边际性能损失。我来自 C 背景，所以我倾向于根据指针来考虑引用（即使存在一些细微的差异），并且在我使用的任何平台上，“char*”都会比“char”大熟悉的。

[编辑：删除了不正确的信息。]

在我看来，最重要的是，当您传递更大的用户定义类型，并且被调用函数只需要读取值而不修改它们时，通过“type const&”传递是一个好习惯。正如您所说，它是自我记录的，有助于阐明内部 API 各个部分的角色。

# html - 如何阻止元素在文本内容上换行？

> ID：10256082
> 
> 赞同：0
> 
> 时间：2012-04-21T04:02:29.877
> 
> 标签：html, css, text, block, word-wrap

我有 2`div`我想垂直定位，向左对齐，我希望它们的宽度根据文本量换行。

[小提琴](http://jsfiddle.net/KmzbP/1/)

```
.main {
  position: absolute;
  color: white;
}

.line {
  padding: 3px;
  margin: 2px;
  background-color: #505050;
}
```

```
<div class="main">
  <div class="line">Content content content content</div>
  <div class="line">Content content</div>
</div>
```

我之所以问是否有更直接的解决方案是因为我认为这可能`width: 0`会`white-space: nowrap`影响不同的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T04:11:21.340

据我了解，这可能是你想要的。

```
.main {
    color: white;
}
.line {
    padding: 3px;
    margin: 2px;
    background-color: #505050;
    float:left;
    clear:left;
} 
```

检查这个[http://jsfiddle.net/2kmzK/1/](http://jsfiddle.net/2kmzK/1/)

# facebook - Facebook评论框不工作但以前工作过

> ID：10256086
> 
> 赞同：0
> 
> 时间：2012-04-21T04:04:03.447
> 
> 标签：facebook, facebook-javascript-sdk, facebook-social-plugins

我试图在我的网站上实现一个简单的 Facebook[社交插件评论](https://developers.facebook.com/docs/reference/plugins/comments/)框。该框的 URL 不是静态的，因为我网站上的每个帖子都有其中一个，而是使用 PHP 生成的。

我让它正常工作了一段时间，但突然它停止了，现在我不能再让它回来了。我对 Facebook 开发不太熟悉，所以我可能在代码中犯了错误。

以下是我加载 Facebook **[Javascript SDK](http://developers.facebook.com/docs/reference/javascript/)**的方式（我更改了一些匿名字段）：

```
<div id='fb-root'></div>
<script>
window.fbAsyncInit = function() {
        FB.init({
          appId      : MY_ID,
          channelUrl : 'http://www.mysite.com/channel.php', 
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

        // Additional initialization code here
      };

      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;

         js.src = '//connect.facebook.net/en_US/all.js';
         ref.parentNode.insertBefore(js, ref);
       }(document));
</script> 
```

这是我初始化**评论框**的方式：

```
<script>
    (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = '//connect.facebook.net/en_US/all.js#xfbml=1&appId=MY_ID';
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
</script>

<div class='fb-comments' data-href='http://mysite.com/post?id=<?php echo $id; ?>' data-num-posts='4' data-width='470'></div> 
```

这是**channel.php：**

```
<?php
header("Pragma: public");
$cache_expire = 60*60*24*365;
header("Cache-Control: max-age=".$cache_expire);
header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$cache_expire) . ' GMT');
?>
<!DOCTYPE html>
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

我将脚本粘贴在正文的页面末尾。现在，什么都没有出现——没有错误，只是空白。任何有关使其工作的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:27:31.653

对不起，伙计们，但整个事情都是由我的一个愚蠢的错误造成的：我有一个 Firefox 插件阻止了评论框。它实际上工作正常。我为我的错误道歉。

# python - 如何在 Python 中将`ctime` 转换为`datetime`？

> ID：10256093
> 
> 赞同：34
> 
> 时间：2012-04-21T04:05:30.450
> 
> 标签：python, datetime

```
import time
t = time.ctime() 
```

目前对我来说，`t`是`'Sat Apr 21 11:58:02 2012'`。我有更多这样的数据。

**我的问题是：**

*   如何在 Python中转换`t`为？`datetime`有什么模块吗？

我试着花时间`dict`然后 convert `t`，但觉得这不是在 Python 中做到这一点的最佳方式。

**细节：**

*   我有一个`ctime`清单（如`['Sat Apr 21 11:56:48 2012', 'Sat Apr 21 11:56:48 2012']`）。
*   我想将内容转换为`datetime`，然后将其存储在`db`with 中`timestamp`。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-21T04:16:26.287

您应该使用[`strptime`](https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior)：此函数根据格式解析表示时间的字符串。返回值为[struct_time](https://docs.python.org/3/library/time.html#time.struct_time)。

[format 参数默认`%a %b %d %H:%M:%S %Y`](https://docs.python.org/3/library/time.html#time.strptime)匹配 ctime() 返回的格式。

因此，在您的情况下，只需尝试以下行，因为默认格式是来自 ctime 的格式：

```
import datetime
import time

datetime.datetime.strptime(time.ctime(), "%a %b %d %H:%M:%S %Y") 
```

回报：`datetime.datetime(2012, 4, 21, 4, 22, 00)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T04:12:04.103

试试`datetime.strptime()`。

**请参阅：** [http ://docs.python.org/library/datetime.html#datetime.datetime.strptime](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-19T18:52:25.000

只需使用`%c`：

```
datetime.datetime.strptime(time.ctime(), "%c") 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-08-27T10:45:08.790

# 短篇。不。

> [ctime() 不使用语言环境信息。](https://docs.python.org/3/library/time.html#time.ctime)
> 
> 注意：使用`time.ctime()`&时，`datetime.fromtimestamp()`您在转换本地时区时也可能会遇到历史问题。如这些答案的评论中所述，[这里](https://stackoverflow.com/a/3682808/1896134)和[这里](https://stackoverflow.com/a/3683166/1896134)

# 长。

或者，如果您需要可以格式化的“日期和时间”，则可以使用多种方式使用[time.strftime](https://stackoverflow.com/a/12400584/1896134)[`datetime`](https://stackoverflow.com/a/3682808/1896134)，甚至使用 python和此处[的 posix_time](https://stackoverflow.com/a/37188257/1896134)，最后在此处的其他答案中提及。[`pandas`](https://stackoverflow.com/a/3683166/1896134)[`datetime.strptime`](https://docs.python.org/3/library/datetime.html#datetime.datetime.strptime)

## 已知日期差异

如果您不担心[时区](http://unicode.org/repos/cldr/trunk/common/supplemental/windowsZones.xml)或[儒略历](https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar#Difference_between_Julian_and_proleptic_Gregorian_calendar_dates)、[模糊时间](https://www.python.org/dev/peps/pep-0431/#ambiguous-times)或使用[UNIXTIMESTAMP](http://unixtimestamp.50x.eu/about.php)[转换为](http://pytz.sourceforge.net/#problems-with-localtime)本地时间，希望使用 EPOCH 时间，请务必[在计算中指定 Notable epoch 日期](https://en.wikipedia.org/wiki/Epoch_(reference_date)#Notable_epoch_dates_in_computing)，这适用于[unix](https://en.wikipedia.org/wiki/Unix_time)

> [我在这个线程上](https://stackoverflow.com/q/12400256/1896134)感谢马特
> 
> > “当您的意思是 Unix 时间时，请不要再称它为“纪元时间””......

## 我的用法

现在尽管如此疯狂，但它并没有那么糟糕。我以前与许多公司合作过，这通常不会在工作场所出现，因为它通常已经处理过。

所以，除此之外……这是我个人的最爱：

我将它用于我自己的东西：[time.strftime](https://docs.python.org/3/library/time.html#time.strftime)

```
from time import strftime

print(strftime('%Y%m%d_%H%M%S')) 
```

我返回：**年、月、日、_、时、分、秒**

```
20180827_021106 
```

我在一个函数中使用：

```
def _now():
    """The Module Reports A Formatted Time."""
    ymd = (strftime('%Y%m%d_%H%M%S'))
    return ymd 
```

只是一些简单的东西可以让我的日志井井有条。

# jquery - 如何让两个 chrome 用户脚本只使用一个 jQuery 实例？

> ID：10256095
> 
> 赞同：2
> 
> 时间：2012-04-21T04:05:38.377
> 
> 标签：jquery, google-chrome, userscripts

在我的用户脚本中，我使用这段代码来获取 jQuery 和我的其余代码注入并执行：

```
function addJQuery(callback) {
  var script = document.createElement("script");
  script.setAttribute("src", "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
  script.addEventListener('load', function() {
    var script = document.createElement("script");
    script.textContent = "(" + callback.toString() + ")();";
    document.body.appendChild(script);
  }, false);
  document.body.appendChild(script);
}
function readyJQuery() {
  jQuery.noConflict();
  jQuery(document).ready(function() {
    //my rest code goes here
  })
}
addJQuery(readyJQuery) 
```

这完美地工作。但是当我有两个脚本时，它们都注入了 jQuery 部分。脚本需要分开，因为我不知道谁想使用哪个脚本或两个脚本。

我可以阻止第二个脚本注入 jQuery 并使用第一个脚本中的那个吗？

当第二个脚本直接以：

```
function addJQuery(callback) {
  var script = document.createElement("script");
  script.textContent = "(" + callback.toString() + ")();";
  document.body.appendChild(script);
}
function readyJQuery() {
  jQuery.noConflict();
  jQuery(document).ready(function() {
    //my rest code goes here
  })
}
addJQuery(readyJQuery) 
```

我在控制台中收到错误消息：`jQuery is undefined`。我如何测试一个不同的脚本是否已经注入了 jQuery，然后等到它准备好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:40:09.813

给你的 jQuery 一个唯一的标识符，检查那个标识符，如果没有找到，只添加 jQuery。您还需要留出足够的时间来初始化第一个 jQuery。

在两个脚本中更改`addJQuery()`为以下内容在我的测试中有效：

```
function addJQuery (callback) {
    //--- Has jQuery already been added?
    var jqNode  = document.querySelector ("#myAddedJQ");
    if (jqNode) {
        FireCallback (callback);
    }
    else {
        //--- Wait a bit to be sure.
        setTimeout ( function() {
                var jqNode  = document.querySelector ("#myAddedJQ");
                if (jqNode) {
                    FireCallback (callback);
                }
                else {
                    var script  = document.createElement ("script");
                    script.id   = "myAddedJQ";
                    script.setAttribute (
                        "src",
                        "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"
                    );
                    script.addEventListener ('load', function () {
                        FireCallback (callback);
                    }, false);
                    document.body.appendChild (script);
                }
            }
            , 444
        );
    }

    function FireCallback (callback) {
        var script          = document.createElement ("script");
        script.textContent  = "                                         \
            if (typeof waitForJqDefined == 'undefined') {               \
                var waitForJqDefined    = setInterval ( function () {   \
                        if (typeof jQuery != 'undefined') {             \
                            clearInterval (waitForJqDefined);           \
        ";
        script.textContent += "\n(" + callback.toString() + ")();\n";
        script.textContent += "                                         \
                        }                                               \
                    },                                                  \
                    50                                                  \
                );                                                      \
            }                                                           \
            else {                                                      \
        ";
        script.textContent += "\n(" + callback.toString() + ")();\n";
        script.textContent += "                                         \
            }                                                           \
        ";
        document.body.appendChild (script);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:30:05.123

在注入脚本以加载 jQuery 之前 - 为什么不检查它是否已经存在？

如果您担心竞争条件：两个脚本都试图同时加载它 - 您可以通过在全局范围内设置一个标志来缩小竞争条件并检查它。不会消除竞争条件，但可能会有所帮助。

```
if ( typeof jQueryLoading == 'undefined')
   var jQueryLoading = false;
if ( typeof jQuery == 'undefined' && jQueryLoading == false )
{
  jQueryLoading = true;
  //Load it yourself, then add scripts
}
else
{
  //No problems. Add your scripts
} 
```

# ios - 发送通用推送通知 - Xcode

> ID：10256099
> 
> 赞同：1
> 
> 时间：2012-04-21T04:06:42.957
> 
> 标签：ios, xcode, push-notification, apple-push-notifications

我已经在这里 [http://mobiforge.com/developing/story/programming-apple-push-notification-services](http://mobiforge.com/developing/story/programming-apple-push-notification-services)完成了本教程 ，现在我可以使用我的应用程序向我的设备发送推送通知。但是，我无法弄清楚如何将推送通知不仅发送到我的特定设备令牌，而且发送到我的应用程序的所有设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T04:12:31.503

您必须将消息单独发送到每个设备，即：在循环中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T05:39:59.867

苹果推送通知服务器只知道将消息定向到特定设备。开发者有责任传递您从

```
- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken 
```

方法到您的服务器（例如通过 HTTP 帖子）并跟踪所有现有令牌。

如果/当您想向所有设备发送消息时 - 您只需要迭代所有现有的设备令牌。

# iphone - 在 xcode 中为 iPhone 应用程序分解图片

> ID：10256100
> 
> 赞同：1
> 
> 时间：2012-04-21T04:07:30.933
> 
> 标签：iphone, xcode, image, select, pixel

有什么方法可以让用户将图像上传到应用程序中，例如一张 50X150 像素的图像，然后我可以将其分成 3 张 50x50 像素的图像？

如果是这样，有人可以帮我选择某些像素并将其分成几张图像吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T04:20:34.200

使用此代码...

// 在下面的方法**中 inRect:(CGRect)rect** >>> 这个矩形应该是 50x50 或者你可以根据你的要求定义..

```
- (UIImage *)imageFromImage:(UIImage *)image inRect:(CGRect)rect {

CGImageRef sourceImageRef = [image CGImage];  
CGImageRef newImageRef = CGImageCreateWithImageInRect(sourceImageRef, rect);  
UIImage *newImage = [UIImage imageWithCGImage:newImageRef scale:1.0 orientation:image.imageOrientation];
CGImageRelease(newImageRef);
return newImage;
} 
```

[有关更多信息，请访问此参考..](https://stackoverflow.com/questions/4743242/how-to-crop-image-in-to-pieces-programmatically)

希望，这会帮助你......享受

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T04:57:17.720

在 UIImage 上定义一个类别，为您提供一个很好的裁剪方法：

```
- (UIImage *)cropImageInRect:(CGRect)cropRect
{
    CGImageRef image = CGImageCreateWithImageInRect(self.CGImage,cropRect);
    UIImage *croppedImage = [UIImage imageWithCGImage:image];
    CGImageRelease(image);
    return croppedImage;
} 
```

现在有了这个类别，您可以轻松地做您想做的事：

```
UIImage *original = ...;
UIImage left = [original cropImageInRect:CGRectMake(0.0, 0.0, 50.0, 50.0)];
UIImage center = [original cropImageInRect:CGRectMake(0.0, 50.0, 50.0, 50.0)];
UIImage right = [original cropImageInRect:CGRectMake(0.0, 100.0, 50.0, 50.0)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T05:00:01.670

我也需要这个。添加到 UIImage 上的 utils 类别方法：

```
// UIImage+Utls.h

@interface UIImage (UIImage_Utls)

- (UIImage *)subimageInRect:(CGRect)rect;
- (NSArray *)subimagesHorizontally:(NSInteger)count;

@end

// UIImage+Utls.m

#import "UIImage+Utls.h"

@implementation UIImage (UIImage_Utls)

- (UIImage *)subimageInRect:(CGRect)rect {

    CGImageRef imageRef = CGImageCreateWithImageInRect([self CGImage], rect);
    UIImage *answer = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    return answer;
}

- (NSArray *)subimagesHorizontally:(NSInteger)count {

    NSMutableArray *answer = [NSMutableArray arrayWithCapacity:count];
    CGFloat width = self.size.width / count;
    CGRect rect = CGRectMake(0.0, 0.0, width, self.size.height);

    for (int i=0; i<count; i++) {
        [answer addObject:[self subimageInRect:rect]];
        rect = CGRectOffset(rect, width, 0.0);
    }
    return [NSArray arrayWithArray:answer];
}

@end 
```

# php - Symfony 2 - 在树枝模板中访问分层角色

> ID：10256104
> 
> 赞同：8
> 
> 时间：2012-04-21T04:08:27.510
> 
> 标签：php, symfony, roles, twig

在我的模板中，我需要知道用户是否具有特定的角色来根据它显示内容。到目前为止，我已经在我的用户类中实现了一个小功能：

```
 public function hasRole($role) {
    $roles = array();
    foreach ($this->getRoles() as $rol) {
      $roles[] = $rol->getRole();
    }
    return in_array($role, $roles);
  } 
```

它告诉我这个用户是否具有作为参数传递的字符串指定的角色。这项工作可以从树枝模板中调用，但不允许我了解有关角色层次结构的任何信息。有没有办法从控制器访问角色层次结构？并直接来自树枝模板？我浏览了官方文档并没有找到任何相关信息。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-21T14:33:19.910

您可以使用以下代码检查树枝模板中的角色，它说明如果当前用户具有以下角色，则显示一些内容

```
{% if is_granted('ROLE_ADMIN') %}

  //show things related to admin role

{%else if is_granted('ROLE_USER')%}
//show things related to user role
{% endif %} 
```

希望这对您有所帮助。编码快乐！！

# c - 可以写入，但不能从 linux C 程序中的串行端口 ttyS0 读取

> ID：10256105
> 
> 赞同：1
> 
> 时间：2012-04-21T04:08:54.817
> 
> 标签：c, linux, serial-port

我正在尝试学习如何使用 C 在 Linux 中对 ttyS0 串行端口进行编程。我有另一台机器连接到我的串行端口，大约每两秒发送 5f 和 6f 的交替十六进制值。我已经通过其他端口监控应用程序验证了这些值出现在端口上。在我的代码中，我将阻塞**read()**用于 10 字符长度的缓冲区。即使我的另一台机器仍在发送数据，**read()**也会永远阻塞。如果我包含**fcntl(fd, F_SETFL, FNDELAY);**它将 read() 设置为非阻塞 read() 总是返回值 -1，这意味着 UART 缓冲区中没有数据，而我的 for 循环代码只是打印出缓冲区中的随机值。所以简而言之，我的假设是我的代码没有读取 ttyS0，我不知道为什么。下面是我的代码，希望有人会看到是什么导致了我的问题并让我直截了当。顺便说一句，我使用的是 Scientific Linux，我相信 ttyS0 是 com 端口 1，就像在 RedHat 和 Fedora 中一样。下面是我运行代码时的输出。它似乎正在毫无问题地写入 COM 端口，但读取它说它不可用。同样很明显，我打印出来的缓冲区只是随机值，而不是读入的数据。谢谢

## 控制台输出

```
hello world
hi again
write error: : Success
 wrote 4 bytes
number of bytes read is -1
read error:: Resource temporarily unavailable
4  8  120  -99  -73  -65  41  -120  4  8  
should of put something out 
```

## 代码

```
#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <errno.h>
#include <termios.h>
#include <unistd.h>

int main()
{
    printf("hello world\n");
    int n;
    int fd;
    char c;
    int bytes;

    char buffer[10];
    char *bufptr;
    int nbytes;
    int tries;
    int x;
    struct termios options;

    fd = open("/dev/ttyS0", O_RDWR | O_NOCTTY | O_NDELAY);
    if(fd == -1)
    {
        perror("open_port: Unable to open:");
    }
    else
    {
        fcntl(fd, F_SETFL, 0);
        printf("hi again\n");
    }

    tcgetattr(fd, &options);

    cfsetispeed(&options, B115200);
    cfsetospeed(&options, B115200);
    options.c_cflag |= (CLOCAL | CREAD);
    options.c_cflag &= ~PARENB;
    options.c_cflag &= ~CSTOPB;
    options.c_cflag &= ~CSIZE;
    options.c_cflag |= CS8;
    options.c_cflag &= ~( ICANON | ECHO | ECHOE |ISIG );
    options.c_iflag &= ~(IXON | IXOFF | IXANY );
    options.c_oflag &= ~OPOST;

    tcsetattr(fd, TCSANOW, &options);

    write(fd, "ATZ\r",4);
    printf(" wrote\n");
    bufptr = buffer;

    fcntl(fd, F_SETFL, FNDELAY);
     bytes = read(fd, bufptr, sizeof(buffer));
    printf("number of bytes read is %d\n", bytes);
    perror ("read error:");

    for (x = 0; x < 10 ; x++)
    {
        c = buffer[x];
        printf("%d  ",c);
    }
    close(fd);

    //puts(buffer[0]);
    printf("\nshould of put something out \n");

    return (0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T05:16:05.553

尝试设置`MIN`和/或`TIME`值：

```
/*...*/
options.c_cc[VMIN] = 1; //read() will return after receiving 1 character
options.c_cc[VTIME] = 0; // == 0 - infinite timeout, != 0 - sets timeout in deciseconds
/*...*/
tcsetattr(fd, TCSANOW, &options); 
```

给定的示例将设置您的 read() 在获取任何符号后返回并无限期地等待输入。当然，您可以随意使用这些参数（例如，如果您愿意，可以将 MIN 设置为 10）。

不过，您可能希望删除`fcntl(fd, F_SETFL, FNDELAY);`呼叫以使其正常工作。

保存以前的 termios 设置并在离开程序之前恢复它们也是明智之举。

# c++ - 命名空间中的“字符串不是类型”

> ID：10256106
> 
> 赞同：1
> 
> 时间：2012-04-21T04:09:17.820
> 
> 标签：c++, string, namespaces

我用 C++ 编写了一个带有两个文件的程序。

`main.cpp`

```
#include "var.hpp"
#include <iostream>
using namespace std;
using namespace YU;

int main()
{
    string god = "THL";
    age = 10;
    cout << age << endl;
    cout << god << endl;
    return 0;
} 
```

`var.hpp`

```
#ifndef __VAR_H__
#define __VAR_H__

#include <string>

namespace YU
{
    int age;
    string name;
}

#endif 
```

当我编译它时，它出错了。

错误的信息是：

`In file included from main.cpp:1:0:`

`var.hpp:9:5: Error： ‘string’ is not a type name`

我不知道为什么，我有`include <string>`头文件，但它仍然不起作用。

我写这段代码只是为了练习，而不是为了工作。

谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T04:13:16.843

问题是`string`in的命名空间`var.hpp`。`string`是`std`命名空间，但你没有告诉编译器。您可以通过输入来修复它，但以下是更好`using namespace std;`的`var.hpp`解决方案，因为它不会将全局命名空间与来自 的其他内容混淆`std`：

```
#ifndef __VAR_H__
#define __VAR_H__

#include <string>

namespace YU
{
    int age;
    std::string name;
}

#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T07:07:51.080

或者你可以使用

```
using std::string; 
```

这避免了必须在每个字符串前面键入 std::string ，并且您不会从全局命名空间中获取所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T04:13:29.577

您`using namespace std;`在 .cpp 文件中有，但它位于 .cpp 的包含之后`var.h`。如果你要这样写标题，你也应该把`using namespace std;`标题放进去。

# excel - 用函数将两个数字相加

> ID：10256108
> 
> 赞同：2
> 
> 时间：2012-04-21T04:09:38.383
> 
> 标签：excel, vba

我正在编写 VBA 代码来添加两个数字：

```
Option Explicit

Dim x As Integer, y As Integer
Function addtwo(x, y)
addtwo = x + y    
End Function 
```

这不是一个好的功能，因为我必须手动输入值 x 和 y 才能获得结果。如何修改代码以便它可以处理任何两个数字，无论是整数还是带小数的数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T05:31:54.210

您在 FUNCTION 声明行中定义输入变量，而不是在其上方。对于整数和小数，我建议使用 vartype DOUBLE。

```
Function ADDTWO(ByVal x As Double,ByVal  y As Double) As Double
    ADDTWO = x + y
End Function 
```

现在这个函数可以在一个单元格中使用：

**=ADDTWO(3, 6)**
或
**=ADDTWO(A2, B7)**

它也可以在 VBA 中使用。

当然，SUM() 函数做同样的事情，所以....我认为这是一个学习练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T04:46:16.563

至于使用任何两个数字，请尝试使用`Variant`数据类型而不是`Integer`. 不确定手动输入值是什么意思-您是在谈论从工作表中获取它们吗？

# php - 在 PHP 中通过用户标签将一个页面链接到另一个页面

> ID：10256109
> 
> 赞同：-1
> 
> 时间：2012-04-21T04:09:54.820
> 
> 标签：php, html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:29:27.960

如果您想将数据传递到另一个页面，您可以以 GET 方式附加到 URL。

例如：

```
<a href="www.mydomain.com/show.php?img=myimage.jpg">Get Details</a> 
```

在这里，我们将一个值传递`myimage.jpg`给`show.php`页面。

因此，在`show.php`页面中，您可以使用`$_GET`. 例如：

```
<?php
$img_name = $_GET['img']; //will get the value "myimage.jpg"
//... use this data to do whatever you need
?> 
```

# ruby-on-rails - 在 Rails 中实现“全选”复选框

> ID：10256111
> 
> 赞同：0
> 
> 时间：2012-04-21T04:10:43.773
> 
> 标签：ruby-on-rails, security, checkbox, authorization

我想为一个记录表实现一个“全选”复选框（类似于它在 webmail 中的完成方式）。我的计划如下：对于每一行/记录，复选框应在其`value`属性中带有 id。然后在我的 Rails 控制器中，我将通过检索记录和比较 id 来验证登录用户是否可以访问这些记录（除非有更好的授权方式）。最后，对记录做一些事情（删除、移动等）。你认为创建一个带有掩码 ID 的地图并在复选框中使用它需要更多的开发工作，还是当前的方法很好？任何可能派上用场的库（客户端或服务器端）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:41:32.880

这很容易你可以使用jQuery添加“检查所有”功能。要构建复选框列表，您可以轻松使用表单构建器。您可以使用 cancan 进行授权。

对于 cancan 和 HABTM 复选框，都有可以帮助您的 railscasts！

# java - java：关于在txt文件中计数

> ID：10256114
> 
> 赞同：0
> 
> 时间：2012-04-21T04:11:18.673
> 
> 标签：java

我想计算 txt 文件
myfile.txt中的一些单词

```
ABC,xyzwegwegwe
ABC,12312312312
ABC,sdfsdf3sdfs 
```

我怎么数“ABC”这个词？
输出：`"ABC" have: 3`

```
while (myfile.hasNextLine()) {
            line = myfile.nextLine();
            lines.add(line);
                    if(xxxxx){ //if have ABC, words++
                        words++; 
                    }
        }
System.out.print("\"ABC\" have: "+words); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:14:28.247

我相信你想要做的是（如果每行只有一份“ABC”）

```
if(line.contains("ABC"))
{
   words++;
}

String lineToTest = "ABC , sdq2we9ieorwq , EFG"

if(line.contains("ABC"))
{
   words++;
}

if(line.contains("EFG"))
{
  words++;
} 
```

请注意，这不会检查重复！

# c - C：使用 fwrite 将字符写入不同的行

> ID：10256116
> 
> 赞同：4
> 
> 时间：2012-04-21T04:11:33.593
> 
> 标签：c, linux, file-io, fwrite

我必须按如下方式写入文件：

```
 A
 B
 C
 D
 ... 
```

字母表的每个字符都需要写入文件中的不同行。我有以下程序一个接一个地写入字符：

```
 FILE* fp;
 fp = fopen("file1","a+");
 int i;
 char ch= 'A';
 for(i=0; i<26; i++){
     fwrite(&ch, sizeof(char), 1, fp);
     ch++;
 }
 fclose(fp); 
```

我应该如何更改上述程序以将每个字符写入新行。（我尝试在每个字符后写“\n”，但是当我使用 VI 编辑器或 ghex 工具查看文件时，我看到了多余的字符；我正在寻找一种方法，以便 vi 编辑器完全如上所示显示文件）。

我在第一次 fwrite 后尝试使用以下内容：

```
 fwrite("\n", sizeof("\n"), 1, fp); 
```

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T04:21:30.113

```
fwrite("\n", sizeof("\n"), 1, fp); 
```

应该

```
fwrite("\n", sizeof(char), 1, fp); 
```

否则，您正在编写一个额外的内容，它是您的字符串常量`\0`零终止的一部分（是两个，而不是一个）。`"\n"``sizeof("\n")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T04:22:42.353

你看到了什么“额外的字符”？您确实意识到打开文件以进行附加的`"a+"`参数`fopen`，因此您正在写入文件的末尾。您的意思是`"w+"`，这会覆盖文件吗？

你可以使用：

```
fputc((int)ch, fp);
fputc((int)'\n', fp); 
```

甚至`fprintf(fp, "%c\n", ch);`

# java - Jmock - 如何自动化和模拟控制台用户输入？

> ID：10256119
> 
> 赞同：0
> 
> 时间：2012-04-21T04:12:31.140
> 
> 标签：java, junit, jmock

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T04:44:48.183

如果该`readInput()`方法执行某些操作，例如，说：

```
BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
return in.readLine(); 
```

然后，您可能可以通过以下测试逃脱：

```
InputStream oldSystemIn = System.in;
InputStream mockSystemIn = context.mock(InputStream.class);
System.setIn(mockSystemIn);
context.checking(new Expectations() {{
    // mock expected method calls and return values
}});
// execute
// verify
System.setIn(oldSystemIn); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T23:39:50.313

您可以使用[系统规则](http://stefanbirkner.github.com/system-rules/)而不是模拟 System.out 和 System.in。

```
public void MyTest {
  @Rule
  public TextFromStandardInputStream systemInMock = emptyStandardInputStream();

  @Test
  public void readTextFromStandardInputStream() {
    systemInMock.provideText("your file name");
    //your code that reads "your file name" from System.in
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T04:45:15.150

Stefan Birkner 的回答给了我解决这个问题所需的方向。我在下面发布了用于解决此问题的代码。

[已解决的测试：Birkner 的版本（**推荐**）](http://ideone.com/Vjid0)

[已解决的测试：管道版本](http://ideone.com/TMNol)

[更改来源：](http://ideone.com/nIMmw)

**为什么**：发生的情况是，使用 Birkner 的库，您只能读取与最初使用规则实例化一样多的输入。如果您想迭代地写入端点，您可以使用管道破解来做到这一点，但这并没有太大的区别，您不能在函数实际运行时通过管道写入输入，所以您还不如使用Birkner的版本，他的@Rule更简洁。

**解释**：在管道黑客和Birkner的代码中，在被测试的客户端中，多次调用创建从 System.in 读取的任何对象将导致阻塞问题，一旦第一个对象打开与管道的连接或System.in，其他的不行。我不知道为什么这完全适用于 Birkner 的代码，但是对于 Pipe，我认为这是因为你只能打开 1 个流到对象。请注意，如果您在第一个缓冲读取器上调用 close，然后在从测试中调用它后尝试在客户端代码中重新打开 System.in，那么第二次打开尝试将失败，因为写入端的管道已关闭也是。

**解决方案**：解决这个问题的简单方法，可能不是最好的，因为它需要修改实际项目的源代码，但不是以可怕的方式（还）。因此，与其在实际项目的源代码中创建多个 BufferedReader，不如创建一个缓冲读取器，并传递相同的读取器引用或使其成为类的私有变量。请记住，如果您必须将其声明为静态，则不应在静态上下文中对其进行初始化，因为如果这样做，则在测试运行时， System.setIn 将在读取器在客户端中初始化之后被调用。因此它将轮询所有 readLine/whatever 调用，就像您尝试从 System.in 创建多个对象一样。请注意，要在阅读器（在本例中为 BufferedReader）的调用之间分离读取，您可以在原始设置中使用换行符来分隔它们。这样，它会在正在测试的客户端的每个调用中返回您想要的内容。

# python - 使用随机分配机会

> ID：10256122
> 
> 赞同：0
> 
> 时间：2012-04-21T04:12:56.473
> 
> 标签：python, random, module

有没有办法设置这样的 if 语句，其中 1 if 语句涵盖多个整数？

```
variable = random.randrange(1,10)

if variable is between 1 - 3 
    then do this
if variable is between 4-5
    then do this
if variable is between 6-9
    then do this 
```

或者可能是这样的

```
a = 1,2,3,4,5,6,7,8,9,10

variable = random.randrange(1,10)

if variable == a:
    then do this 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T04:15:50.697

为每个玩家选择一个随机数怎么样，然后具有最大价值的玩家首先攻击。

或者，如果这不是基于回合的，则设置一个阈值，如果随机数超过阈值，则玩家可以攻击。

阈值也可以是随机数。例如：

```
player1.attack = randn ()
[player2 etc]
minval = randn ()
for player in players:
  if player.attack > minval:
    [...attack...] 
```

底部的问题很容易实现，基本上和你写的完全一样：

```
variable = random.randrange(1,10)

if 0 <= variable < 3:
   then do this
if 3 <= variable < 5:
   then do this
if 5 <= variable < 9:
   then do this 
```

# c# - 强制drawingContext线捕捉到像素边界

> ID：10256125
> 
> 赞同：8
> 
> 时间：2012-04-21T04:13:12.857
> 
> 标签：c#, wpf

我在 WPF 应用程序中绘制图形，但使用绘制的线`drawingContext.DrawLine(...)`绘制到子像素边界。

我可以通过创建`Line`对象让它们看起来不错，但我不想每次视觉无效时都创建数以万计的对象。

如何强制它们适应像素？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T09:04:39.723

您可以将线条绘制到派生的 DrawingVisual 中，其受保护的[VisualEdgeMode](http://msdn.microsoft.com/en-us/library/system.windows.media.visual.visualedgemode.aspx)属性设置为`EdgeMode.Aliased`：

```
public class MyDrawingVisual : DrawingVisual
{
    public MyDrawingVisual()
    {
        VisualEdgeMode = EdgeMode.Aliased;
    }
}

public class DrawingComponent : FrameworkElement
{
    private DrawingVisual visual = new MyDrawingVisual();

    public DrawingComponent()
    {
        AddVisualChild(visual);

        using (DrawingContext dc = visual.RenderOpen())
        {
            dc.DrawLine(new Pen(Brushes.Black, 1d), new Point(100, 100), new Point(100, 200));
            dc.DrawLine(new Pen(Brushes.Black, 1d), new Point(105.5, 100), new Point(105.5, 200));
            dc.DrawLine(new Pen(Brushes.Black, 1d), new Point(112, 100), new Point(112, 200));
        }
    }

    protected override int VisualChildrenCount
    {
        get { return 1; }
    }

    protected override Visual GetVisualChild(int index)
    {
        return visual;
    }
} 
```

很奇怪，但调用`RenderOptions.SetEdgeMode(visual, EdgeMode.Aliased)`非派生的 DrawingVisual 并不能完成这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-07T15:29:13.100

那太棒了。

另一个选项（在这种情况下更复杂）是在 DrawingGroup 上使用 RenderOptions.SetEdgeMode：

[https://stackoverflow.com/a/16984921/2463642](https://stackoverflow.com/a/16984921/2463642)

# javascript - 如何防止按下“Enter”键时触发HREF（调用JS函数）？

> ID：10256126
> 
> 赞同：-3
> 
> 时间：2012-04-21T04:13:16.583
> 
> 标签：javascript, jquery

我面临一个问题。

我有一个href，当我点击它时它会调用一个javascript函数“delete_element_on_page”。

因此，当我用鼠标单击 HREF 时，一切都很好，并且该函数被调用。

但是，由于 HREF 具有焦点，如果继续按我的 Enter 键，该函数会一次又一次地被调用，从而导致不希望的结果。

我怎样才能防止这种情况发生？

我在想 1\. 在调用我的函数时模糊对 href 的关注 --> 我可以这样做，但这意味着我必须为每个 HREF 手动执行此操作，因为 jquery.blur 只能在个人处触发元素级别。--> 或者，是否有一个相当于我可以做通用模糊的javascript，不管哪个元素是焦点？

或者

1.  停用触发点击 HREF 的回车键 --> 这甚至可能吗？如果是这样，在代码复杂性/兼容性等方面值得我花时间。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:45:42.100

上面的答案将阻止键盘单击和鼠标单击，这将阻止 enter 键在该链接上执行任何操作。所以它对应于#2

```
<a id="fail" href="http://jquery.com">default click action is prevented</a>
<script>
$("#fail").keydown(function(event) {
  event.preventDefault();
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T04:18:08.040

您可以绑定您的事件并避免将 javascript 触发器放置在 html 标记内。

使用 jQuery（简单且更可靠的方式），您可以这样做：

```
<script src="http://code.jquery.com/jquery.min.js"></script>
<script>
    $("#myelementid").bind("click",function(e){
        e.preventDefault(); // important, to prevent trigering the default a href

        // your code goes here

        $(this).blur();
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T04:18:12.933

可以通过jquery绑定click事件处理，不推荐使用href调用js函数：

```
$("a#id").click(function(){

 // the code goes here;

}) 
```

# c++ - 手写数字/数字识别

> ID：10256130
> 
> 赞同：0
> 
> 时间：2012-04-21T04:13:35.660
> 
> 标签：c++, gesture-recognition

谁能推荐一个我可以在 c++/OpenGL 中使用的手写数字/数字识别库。我需要识别用户编写的 OpenGL 项目中的数字/数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T20:41:45.647

试试[Tesseract](http://code.google.com/p/tesseract-ocr/)，如果你只使用数字，你应该没问题。

# django - Django：创建具有关系的表单

> ID：10256135
> 
> 赞同：2
> 
> 时间：2012-04-21T04:14:06.663
> 
> 标签：django, forms, relationship, formset

我准备了一个有关系的模型。我想要一个可以为该表单创建用户的表单。

有人可以解释一下如何解决吗？

```
class UserProfile(models.Model):
    user = models.OneToOneField(User, unique=True, primary_key=True)
    website = models.URLField(null=True, blank=True)
    accepted_rules = models.BooleanField(default=False)
    accepted_rules_date = models.DateTimeField(auto_now_add=True)

class UserProfile(ModelForm):
    class Meta:
        model = UserProfile

@csrf_protect
def register(request):
    if request.method == "POST":

        form = UserProfile(request.POST or None)
        if form.is_valid():
            website = form.cleaned_data['website']
            accepted_rules = form.cleaned_data['accepted_rules']

            username = form.cleaned_data['username']
            email = form.cleaned_data['email']
            password = form.cleaned_data['password']

            form.save()

            print "All Correct"            

    return TemplateResponse(request, 'base.html', {
                             'form':form,
                             }
                            ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:43:30.073

这是我会考虑的一种方式。首先，我将表单命名为 UserProfileForm，这样它的名称就不会与模型冲突。为创建新用户所需的字段添加额外字段到您的 UserProfile 表单。创建新的用户实例。使用 form.save(commit=False) 以便您可以将新创建​​的 User 实例添加到 UserProfile 实例并保存。可能有更优雅的方式。

```
from django import forms

class UserProfileForm(forms.ModelForm):

    username = forms.CharField()
    password = forms.CharField(widget=forms.PasswordInput())
    email = forms.EmailField()

    class Meta:
        model = UserProfile

from django.contrib.auth.models import User

@csrf_protect
def register(request):
    if request.method == "POST":
        form = UserProfileForm(request.POST)
        if form.is_valid():
            username = form.cleaned_data['username']
            email = form.cleaned_data['email']
            password = form.cleaned_data['password']
            user = User(username=username, email=email)
            user.set_password(password)
            user.save()
            user_profile = form.save(commit=False)
            user_profile.user = user
            user_profile.save()
            print "All Correct"            
return TemplateResponse(request, 'base.html', {'form':form}) 
```

# sql - 带有连接的 Postgresql 查询

> ID：10256140
> 
> 赞同：0
> 
> 时间：2012-04-21T04:16:14.270
> 
> 标签：sql, postgresql, postgresql-8.4

我有 6 个表要在 1 个查询中连接在一起；但是，我不太清楚如何编写查询。

这是我的粗体表和它们包含的列。

**pg**
pgid

**ipg**
ipgid
机器人
pgid

**呃呃**
呃呃

**iug**
iuid 机器人
ugid

**机器人**inid**
_** 

 ****在**
inid

我的目标是从**pg**和**ug**表中输出`inid`给定特定条件的字段。我想找到所有条目在哪里和。这涉及到很多连接，我认为在陈述中有一些选择，但我对如何将它们拼凑在一起还不够熟悉。****`inid``pg.pgid=1``ug.ugid=2`****

 ****这是我到目前为止...

```
SELECT inid
FROM in
INNER JOIN ro  ON in.inid  = ro.inid
INNER JOIN iug ON ro.roid  = iug.roid
INNER JOIN ug  ON iug.ugid = ug.ugid
INNER JOIN ipg ON ro.roid  = ipg.roid
INNER JOIN pg  ON ipg.pgid = pg.pgid
WHERE pg.pgid = 1
  AND ug.ugid = 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T13:42:43.573

您不能命名您的 table `in`，这是每个 SQL 标准和 PostgreSQL 中的[保留字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)。如果你尝试，你会得到一个语法错误。如果您[双引号该名称](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS) `CREATE TABLE "in" ...`，您仍然可以强制系统接受它，但是您必须记住每次使用它时都要双引号，您会收到令人困惑的错误消息。简而言之：不要那样做。
我重命名了表`tbl_in`并在查询中给它一个别名。

此外，`inid`作为 SELECT 项不明确。要么`USING`用作连接条件（然后结果集中只有*一*列`inid`），要么对列名进行表限定。

否则查询看起来很好：

```
SELECT i.inid    -- ambiguous without table-qualification
FROM   tbl_in i  -- renamed table
JOIN   ro  ON i.inid   = ro.inid
JOIN   iug ON ro.roid  = iug.roid
JOIN   ug  ON iug.ugid = ug.ugid
JOIN   ipg ON ro.roid  = ipg.roid
JOIN   pg  ON ipg.pgid = pg.pgid
WHERE  pg.pgid = 1
AND    ug.ugid = 2; 
```

* * *

如果在 and 和 and 之间有外键约束，**那么**你可以简化：`pg``ipg``ug``iug`

```
SELECT i.inid    -- ambiguous without table-qualification
FROM   tbl_in i  -- renamed table
JOIN   ro  ON i.inid   = ro.inid
JOIN   iug ON ro.roid  = iug.roid
JOIN   ipg ON ro.roid  = ipg.roid
WHERE  ipg.pgid = 1
AND    iug.ugid = 2; 
```

...因为一旦在`iug`/`ipg`中找到值，就保证会出现在`up`/中`pg`。******

# python - 一个模型如何通过外键与另一个模型相关联？

> ID：10256148
> 
> 赞同：3
> 
> 时间：2012-04-21T04:17:18.597
> 
> 标签：python, django, model, foreign-key-relationship

所以我一直在网上浏览了一下，但我找不到我要找的东西。首先说我有

```
class Contact(models.Model):
    nickname = models.CharField(max_length=25)
    number = models.CharField(max_length=25)
    note = models.TextField()

class Telephone(models.Model):
    contact = models.ForeignKey('Contact') 
```

那么我将如何保存昵称/号码/不，然后能够根据我可以给它们的一些标签找到所有这些？

假设我希望当我使用 Telephone.objects.filter(contact=jill) 时，将提供基于 jill 实例的所有信息？如果我希望能够编辑吉尔并通过不同的保存给她多个号码，这可能吗？（但吉尔不是她的昵称，它是我放在那里的标签。）有点不好的例子，但说我只想通过一些可通过电话过滤的命名实例找到联系人中的所有信息，这可能吗？还是外键不是我要找的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T06:41:29.577

```
Telephone.objects.filter(contact__nickname='jill') 
```

请参阅[有关进行查询的文档](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)

```
 what if i wanted to be able to edit jill and give her more than one number via
 different saves is this possible? 
```

是的。要在联系对象中为一件事提供多个电话号码，有两种方法 - 通过 a 的一对一关系`ForeignKey`，或多对多关系。我建议您通读文档中的[模型主题](https://docs.djangoproject.com/en/dev/topics/db/models/#relationships)。

### 编辑

在您拥有的模型布局中，您可以在每次保存时为 Jill 提供多个电话号码。

假设 Jill 有一条新线路，因此您想添加一个新电话号码。按照您现在的结构方式，您首先必须在“通讯录”中找到“Jill”，然后给她一个新的电话号码：

```
jill = Contact.objects.get(nickname='jill') # assuming you only have one jill
new_num = Telephone.objects.create(contact=jill,number=5551212) 
```

现在，如果您想要 Jill 的所有联系人，您可以：

```
call_jill = Telephone.objects.filter(contact=jill) # if you already pulled jill
call_jill = Telephone.objects.filter(contact__nickname='jill') 
```

另一种方法是使用`ManyToMany`：

```
 class Telephone(models.Model):
      number = models.PhoneNumberField()

   class Contact(models.Model):
      # your normal fields
      phones = models.ManyToMany(Telephone) 
```

现在，您可以执行以下操作：

```
 jills_phones = Contact.objects.get(nickname='jill').phones.all() 
```

添加新电话：

```
 jill = Contact.objects.get(nickname='jill')
   jill.phones.add(Telephone.objects.create(number=5551212))
   jill.save() 
```

你也可以反过来，找出这是谁的电话：

```
 phone = Telephone.objects.get(number=5551212)
   whose_is_it = phone.contact_set.all() 
```

### 那么有什么区别呢？

它们听起来很相似，但差异很微妙。一个简单的类比很容易。一个制造商可以拥有多辆汽车，但一辆汽车只能拥有一个制造商——这是汽车和制造商之间的一对一关系。

一个披萨可以有很多配料，每个配料可以放在多个披萨上。在这种情况下，Pizza`ManyToMany`与 Toppings 有关系。

您可能会认为我可以使用`ForeignKey`. 你是对的，但考虑一下这种情况：

假设您开始时没有浇头。因此，您将橄榄制作为浇头，然后将其添加到比萨饼中。伟大的。

现在你想要同样的披萨也有青椒。现在你被卡住了，因为一个披萨只能有一个浇头（由于`ForeignKey`）。

因此，您最终创建了第三个模型，其中包含对比萨饼和浇头的引用。因此，不是在比萨上放浇头，而是将它们放在另一个模型上：

```
class Pizza(models.Model):
   topping = models.ForeignKey('Topping')

class Topping(models.Model):
   name = models.CharField(max_length=100)

class AssembledPizza(models.Model):
   topping = models.ForeignKey('Topping')
   pizza = models.ForeignKey('Pizza') 
```

但是，如果您使用 ManyToMany 以正确的方式进行操作，您将拥有：

```
class Pizza(models.Model):
   toppings = models.ManyToMany('Topping')

class Topping(models.Model):
   name = models.CharField(max_length=100) 
```

然后你会这样做：

*在这里，我假设您是一家新餐厅并且没有浇头。[`create`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#create)有关更多信息，请参阅文档。*

```
veggie = Pizza()
veggie.toppings.add(Topping.objects.create(name='Olives'))
veggie.toppings.add(Topping.objects.create(name='Peppers'))
veggie.save() 
```

我希望这能澄清一点。

# asp.net-mvc-3 - 如何将 asp.net MVC Scaffolder 与从 dbcontext 向下两个子类的上下文一起使用

> ID：10256155
> 
> 赞同：3
> 
> 时间：2012-04-21T04:19:07.110
> 
> 标签：asp.net-mvc-3, inheritance, ef-code-first, dbcontext, asp.net-mvc-scaffolding

我有一套标准模型。

我有一个从 dbcontext 继承的基本上下文类，以添加一些我需要的功能。

```
public class MyContext : DbContext
{
    public void MyFeature() {
    }
} 
```

然后我有我的实际数据上下文：

```
public class DataContext : MyContext
{
    public DbSet<Category> Categories { get; set; }
    public DbSet<Product> Products { get; set; }
} 
```

我想在创建控制器时使用内置的脚手架，但我收到错误“不支持的上下文类型”如果我将数据上下文更改为直接从 dbcontext 继承它可以工作，但此时我有很多东西使用添加了功能，因此如果不注释掉所有这些东西，就无法更改继承。而且我当然已经简化了功能，它实际上是很多东西，所以直接将它添加到数据上下文中会做很多工作，而且脚手架应该足够聪明，可以看到数据上下文是一个 dbcontext。

如何将脚手架与我的数据上下文一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:27:37.440

为什么不使用合成？

如果您的功能确实只是需要，比如这些对象中需要的一些方法，我会将这些方法放在一个名为的单独类中`ContextDetails`- 类似这些内容并`DataContext`包含`ContextDetails`如下内容：

```
//Changed MyContext to ContextDetails
public class ContextDetails 
{
    public void MyFeature() 
    {
        //Do something
    }
}

public class DataContext : DbContext
{
    public DbSet<Category> Categories { get; set; }
    public DbSet<Product> Products { get; set; }

    public ContextDetails DbDetails { get; set; }
} 
```

如果`ContextDetails`对象需要有关`DataContext/DbContext`它的信息，则将其传递`DataContext/DbContext`给方法甚至构造函数。

如果你不喜欢这个问题的组合，也许你想使用一个接口。如果是这种情况，请查看[http://www.codeproject.com/Tips/309753/Repository-Pattern-with-Entity-Framework-4-1-and-C](http://www.codeproject.com/Tips/309753/Repository-Pattern-with-Entity-Framework-4-1-and-C)

> 上下文类必须从 System.Data.EntityDbContext 继承，后者提供了查询和使用实体数据作为对象的工具

我能找到的最佳原因是为什么继承在您的示例中不起作用。

编辑：

我读了我的答案，意识到`DBDetails`可能不是最好的名字，但你明白了。提取实现并将其用作单独的实体。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:40:06.937

我认为首先你应该安装`entity framework 4.0` 然后我认为它肯定可以工作请试试这个。

# iphone - UITableViewCell imageView 重复

> ID：10256156
> 
> 赞同：2
> 
> 时间：2012-04-21T04:19:32.213
> 
> 标签：iphone, xcode, uitableview, accessory

我对 iphone 开发相当陌生，我正在尝试使用 UITableViewCell 创建我自己的“邀请你的朋友”系统。我检查了其他帖子，但我不知道如何解决它。我现在遇到的一个问题是，我的 UITableViewCell 附件正在重复。例如。当我单击此复选框时。

[http://min.us/mCHcd3kwI](http://min.us/mCHcd3kwI) 这是我的项目链接，如果有人决定看的话

![在此处输入图像描述](../Images/9faa9d434dcef0370246c58161cad5c1.png)

如果我向下滚动，其他复选框也会被标记

![在此处输入图像描述](../Images/f4886f79f1ba4d1648276d092ab45882.png)

我想知道我该如何解决这个问题。

这是我的代码

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
switch (section) {
    case 0:
        return 4;
        break;
    case 1:
        return [aArray count];
        break;
    case 2:
        return [bArray count];
        break;
    case 3:
        return [cArray count];
        break;
    case 4:
        return [dArray count];
        break;
    case 5:
        return [eArray count];
        break;
    case 6:
        return [fArray count];
        break;
    case 7:
        return [gArray count];
        break;
    case 8:
        return [hArray count];
        break;
    case 9:
        return [iArray count];
        break;
    case 10:
        return [jArray count];
        break;
    case 11:
        return [kArray count];
        break;
    case 12:
        return [lArray count];
        break;
    case 13:
        return [mArray count];
        break;
    case 14:
        return [nArray count];
        break;
    case 15:
        return [oArray count];
        break;
    case 16:
        return [pArray count];
        break;
    case 17:
        return [qArray count];
        break;
    case 18:
        return [rArray count];
        break;
    case 19:
        return [sArray count];
        break;
    case 20:
        return [tArray count];
        break;
    case 21:
        return [uArray count];
        break;
    case 22:
        return [vArray count];
        break;
    case 23:
        return [wArray count];
        break;
    case 24:
        return [xArray count];
        break;
    case 25:
        return [yArray count];
        break;
    case 26:
        return [zArray count];
        break;
}}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
UITableViewCell *cell = nil;

if([tableView isEqual:self.myTableView]){
    static NSString *TableViewIdentifier = @"MyCells";
    cell = [tableView dequeueReusableCellWithIdentifier:TableViewIdentifier];
    if(cell == nil){
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:TableViewIdentifier];
    }
    NSString *group;
    NSUInteger row = [indexPath row];
    cell.selectionStyle = UITableViewCellSelectionStyleGray;

    if([selectedRowsArray containsObject:[content objectAtIndex:row]]){
        cell.imageView.image = [UIImage imageNamed:@"selected@2x.png"];
    }else {
        cell.imageView.image = [UIImage imageNamed:@"unselected@2x.png"];
    }
    cell.imageView.userInteractionEnabled = YES;

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleChecking:)];
     [cell.imageView addGestureRecognizer:tap];

    switch (indexPath.section) {
        case 0:
            group = [suggestedPeople objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 1:
            group = [aArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 2:
            group = [bArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 3:
            group = [cArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 4:
            group = [dArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 5:
            group = [eArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 6:
            group = [fArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 7:
            group = [gArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 8:
            group = [hArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 9:
            group = [iArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 10:
            group = [jArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 11:
            group = [kArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 12:
            group = [lArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 13:
            group = [mArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 14:
            group = [nArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 15:
            group = [oArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 16:
            group = [pArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 17:
            group = [qArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 18:
            group = [rArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 19:
            group = [sArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 20:
            group = [tArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 21:
            group = [uArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 22:
            group = [vArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 23:
            group = [wArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 24:
            group = [xArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
        case 25:
            group = [yArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;

        case 26:
            group = [zArray objectAtIndex:row];
            cell.textLabel.text = group;
            break;
    }

}
return cell; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:50:23.910

这是因为您仅存储`row`以确定是否检查了单元格。由于每个部分在索引 0/1 处都有一个单元格，因此这不能如您所愿。

```
if([selectedRowsArray containsObject:[content objectAtIndex:row]]){
    cell.imageView.image = [UIImage imageNamed:@"selected@2x.png"];
}else {
    cell.imageView.image = [UIImage imageNamed:@"unselected@2x.png"];
} 
```

用这个替换它：（假设你有一个`NSMutableSet`as a property `self.selectedIndexPaths`）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ...
    if ([self.selectedIndexPaths containsObject:indexPath])
    {
        cell.imageView.image = [UIImage imageNamed:@"selected@2x.png"];
    }
    else
    {
        cell.imageView.image = [UIImage imageNamed:@"unselected@2x.png"];
    }
    ...
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([self.selectedIndexPaths containsObject:indexPath])
    {
        [self.selectedIndexPaths addObject:indexPath];
    }
    else
    {
        [self.selectedIndexPaths removeObject:indexPath];
    }

    [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:40:12.007

当您每次设置单元格时需要删除子视图/将其设置为零。这是“早期”单元格中的复选标记，因为它正在被表格视图重用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T06:52:42.857

如果您使用分组样式，请确保正确处理索引，因为每个部分都将具有相同类型的索引意味着如果您有 2 个部分和 3 行，那么在这两个部分中 index.row 将为每个部分提供 0,1,2部分

而且您还必须处理单元格的可重用属性，即它仅创建当前可见的那些单元格，然后在您滚动表格时再次重用它们，因此当您回滚到您之前检查过的上一个单元格时，将显示给您尽管已检查，但未检查。

希望这会帮助你为我糟糕的英语感到抱歉，因为它不是我的母语:)

# iphone - 在运行时创建新的对象模板 iPhone

> ID：10256159
> 
> 赞同：0
> 
> 时间：2012-04-21T04:19:51.080
> 
> 标签：iphone, objective-c, ios, xcode, data-storage

我试图弄清楚如何在运行时创建一个新的对象模板（由用户创建），然后使用该模板创建新对象来填充列表。例如，假设您想要一个联系人列表。用户将创建一个模板，该模板具有 NSMutable 通用对象数组，其中包含姓名、电话、电子邮件等。然后当他们完成创建模板后，他们可以随时根据该模板添加新联系人，而无需重新构建模板。所有模板对象将包含嵌套在自身内部的通用对象，其值设置为不同的数据类型，然后所有这些通用对象存储在另一个仅包含数组的通用对象中。我希望我不会让这听起来太混乱......基本上只是在运行时创建自定义对象模板的能力，然后就可以使用这些了。任何人都知道一个好的方法吗？我想让我的应用程序中的数据存储通用，以便它可以应用于任何人的数据。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:27:27.503

我不确定您的最终目标是什么，但您可以采用“界面构建器”方法。您有构建模板的视图，然后将每个元素转换为 xml 表单。加载它所需要做的就是读取 xml，创建适当的 UI 元素，然后将它们添加到容器视图中的正确位置。这种方法的一个问题是，如果您需要向一个元素发送数据，那么如果您的模板中有多个该类型的元素，则几乎不可能获得正确的元素。您可以使用数组、字典甚至 xml 来存储键（元素的名称）和值（元素，使用 xml 方法不需要这样做）。对不起，如果这令人困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T05:35:35.713

在 iOS 上读取和写入对象到磁盘有几个可行的选项。最著名和使用最广泛的是 Core Data 和 Plists。

如果您是初学者，我建议您为自定义对象“模板”保存一组属性（可能是字符串？）。请参阅[此处](http://ipgames.wordpress.com/tutorials/writeread-data-to-plist-file/)获取教程，并搜索 SO 以查找可能出现的任何其他内容。

# matlab - 如何使用 Matlab 执行双线性插值

> ID：10256161
> 
> 赞同：4
> 
> 时间：2012-04-21T04:20:19.920
> 
> 标签：matlab, interpolation

我必须从低分辨率图像中获取高分辨率图像。这可以使用插值方法来实现。我知道在 matlab 中`imresize`，`interp2`函数将执行任务，但我必须在不使用任何内置函数的情况下编写代码。我了解双线性插值是如何工作的，但我似乎无法在我的代码中将它拼凑在一起。我将不胜感激任何帮助和建议。

到目前为止，这是我的代码：

```
clear all; close all; clc;

input_im=imread('superman.png');
im=rgb2gray(input_im);
%subplot(1,2,1), imshow(input_im), title('Original Image');
%subplot(1,2,2), imshow(im), title('Gray Scale Input Image');

[m,n]=size(im); %obtain the size of gray scale image
S = input('  Now Enter Value : ');
Scale1 = floor(S);
Scale2 = floor(S);
scale = [Scale1, Scale2];

Oim=size(im);
Nim=max(floor(scale.*Oim(1:1)),1);

for i=1:Nim-1
    for j=1:Nim-1

       Q11=
       Q21=
       Q12=
       Q22=
       R1=((x2-x)/(x2-x1))*Q11+((x-x1)/(x2-x1))*Q21;
       R2=((x2-x)/(x2-x1))*Q12+((x-x1)/(x2-x1))*Q22;
       P=((y2-y)/(y2-y1))*R1+((y-y1)/(y2-y1))*R2;
    end
end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-06T21:49:32.280

后面的代码`interp2`可用。只需在命令窗口中编写`>> edit interp2`，您就可以查看他们是如何实现它的。

# javascript - CKEditor：如何在不更改源代码的情况下更改编辑器行为？

> ID：10256164
> 
> 赞同：0
> 
> 时间：2012-04-21T04:21:01.423
> 
> 标签：javascript, ckeditor

我的意思是下一件事：出于默认样式的原因，我想在编辑器区域（iframe）中创建表时添加一些特定的类。我现在如何通过更改它的插件源代码来做到这一点`table`，但是更改该文件是一个错误的决定......而且不可能通过配置来做到这一点。也许有一些方法可以即时重新定义表行为......

在这种情况下，最好的解决方案是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:36:35.360

我认为出于“样式原因”更改源代码是一个坏主意。

您可以通过更改默认皮肤（我认为是 v2 皮肤）或向 CKEditor 添加自定义皮肤来轻松更改默认 CSS。

[文档](http://docs.cksource.com/Talk%3aCKEditor_3.x/Developers_Guide#skin)

[开发者指南](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.skins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T08:46:03.397

您可以编写一个插件来即时修改表格对话框或任何其他对话框的行为。这种方法能走多远取决于你的能力以及你想要哪些改变。如果以这种方式进行调整变得过于复杂，那么第二种方法是复制您要修改的原始插件并在此基础上创建您自己的版本（但在 CKEditor 源文件夹之外）

例如，此插件在表格和单元格对话框中添加一个字段以选择背景图像：[http ://cksource.com/forums/viewtopic.php?f=18&t=23607](http://cksource.com/forums/viewtopic.php?f=18&t=23607)

[您可以按照CKEditor 教程](http://docs.cksource.com/CKEditor_3.x/Tutorials)学习如何编写插件。

# jquery - 自动调用 Twitter bootstrap-modal.js 获取标签

> ID：10256168
> 
> 赞同：1
> 
> 时间：2012-04-21T04:22:07.787
> 
> 标签：jquery, image, twitter-bootstrap, thumbnails, bootstrap-modal

Fancybox 有一个功能，它`fancybox`使用类似的东西为页面上的每个图像添加类`jQuery(thumbnails).addClass("fancybox").attr("rel","fancybox").getTitle();`。

我想对`<img>`标签使用 Twitter Bootstrap Modal 做类似的事情，这样我就不必为每张图片都打电话了。本质上，我想将其`bootstrap-modal.js`用作内嵌图像查看器，例如 Lightbox/Fancybox。

我发现了这个：[http](http://blueimp.github.com/Bootstrap-Image-Gallery/) ://blueimp.github.com/Bootstrap-Image-Gallery/但演示显示您必须为每张图片进行调用。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T15:16:50.313

使用*[Bootstrap 3](http://getbootstrap.com/)*，这就是我设法让它在没有任何额外插件的情况下使用 Bootstrap 的内置[Modal 组件](http://getbootstrap.com/javascript/#modals)工作的方法：

在您的 HTML 页面中添加一个模态框，其`<img>`标签为空，`src`如下所示：

```
<!-- Photo Modal -->
<div class="modal fade" id="photo-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">

               <img src="" />

    </div><!-- /.modal-dialog -->
</div><!-- /.modal --> 
```

现在假设您在这样的链接中有缩略图：

```
<a class="thumbnail" data-imgpath="pathToImage" data-toggle="modal" href="#">
    <img alt="PhotoName" src="pathToImage">
</a> 
```

使用此 jQuery 代码在模态框内以全尺寸显示缩略图：

```
$(function()
{     
    $('a.thumbnail').click(function(e)
    {
        e.preventDefault();

        var imgPath = $(this).data('imgpath');

        $('#photo-modal img').attr('src', imgPath);

        $("#photo-modal").modal('show');
    });

    $('img').on('click', function()
    {
        $("#photo-modal").modal('hide')
    });
}); 
```

添加此 CSS 以使图像居中`<div class="modal-dialog">`：

```
#photo-modal .modal-dialog
{
    text-align:center;
    display:table;
    padding: 0;
    margin-top: 30px;
} 
```

* * *

从 palmerio 获取和改编的想法 -[模态图像](https://github.com/twbs/bootstrap/issues/2111#issuecomment-10556056)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T22:08:14.850

我找到了一种简单的方法来在引导模式中模仿类似 rel="lightbox" 的东西

首先，我在页面底部制作了模态窗口

```
<!--- modal for viewing image  --->
<div class="modal hide fade in" id="full-image">
<div class="modal-header">
<a class="close" data-dismiss="modal">×</a>
</div>
<div class="modal-body">
<img name="pic" src="images/placeholder.jpg">
</div>
</div> 
```

然后在我的缩略图列表中，我在缩略图链接中执行了此操作（我的缩略图名称和大图像名称是从查询中输出的）

```
<!--- change img src using javascript onclick --->
<a title="click to view" href="#full-image" data-toggle="modal" onClick="window.document.pic.src='images/big-image.jpg';"><img src="images/thumbnail.jpg" /></a> 
```

作品！:D ~梅根

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T23:31:34.147

我 `attr`通过附加`rel=gallery`到`a href`标签内的图像来使用：

```
$('a > img').parent().attr('rel', 'gallery'); 
```

奇迹般有效！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-21T16:02:04.017

您可以只对图像使用元素选择器。

`jQuery('img').modal();`

更好的解决方案是有一个父元素或类来标识您实际想要模态化的图像（可能是缩略图）。

```
<div id="thumbnails">
    <!-- all your images -->
</div> 
```

然后使用子选择器

`jQuery('#thumbnails img').modal();`

* * *

*PS。如果您不想避免库或命名空间冲突，则可以使用`$`代替。`jQuery`*
`jQuery('img').modal();`=`$('img').modal();`

# csv - 使用 SQLalchemy 读取大文件

> ID：10256169
> 
> 赞同：2
> 
> 时间：2012-04-21T04:22:18.963
> 
> 标签：csv, sqlalchemy, python-2.7

我正在尝试使用 SQLalchemy 读取 200 MB 的 csv 文件。每行大约有 30 列，其中，我使用下面的代码只使用了 8 列。但是，代码运行速度真的很慢！有没有办法改善这一点？我想使用地图/列表理解或其他技术。正如你所说，我是新手。谢谢你的帮助。

```
for ddata in dread:        
    record = DailyData()
    record.set_campaign_params(pdata) #Pdata is assigned in the previous step         
    record.set_daily_data(ddata) #data is sent to a class method where only 8 of 30 items in the list are used       
    session.add(record)
    session.commit() #writing to the SQL database. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T01:13:35.870

不要在每条记录上都提交。提交或每 1000 次左右刷新一次：

```
for i, data in enumerate(csv_stuff):
    rec = MyORMObject()
    rec.set_stuff(data)
    session.add(rec)
    if i % 1000 == 0:
        session.flush()
session.commit() # flushes everything remaining + commits 
```

如果这仍然给您带来问题，那么做一些基本的分析，请参阅我的帖子[如何分析 SQLAlchemy 支持的应用程序？](https://stackoverflow.com/questions/1171166/how-can-i-profile-a-sqlalchemy-powered-application/1175677#1175677)

# objective-c - 在objective-c中正确的多线程方法？

> ID：10256170
> 
> 赞同：4
> 
> 时间：2012-04-21T04:22:35.133
> 
> 标签：objective-c, multithreading, nsmutablearray

我有一个显示图像的 UITableView。每个单元格都有一个图像，每次加载一个单元格时，我都会在后台调用一个选择器（来自 cellForRowAtIndexPath），如下所示：

```
[self performSelectorInBackground:@selector(lazyLoad:) withObject:aArrayOfData]; 
```

唯一的问题是有时我会崩溃（因为我在后台更改数据，同时试图在其他地方读取数据）。这是错误：

```
*** Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <CALayerArray: 0xce1a920> was mutated while being enumerated.' 
```

在后台更新数据时，我应该将其移动到主选择器并更改它吗？或者我应该以不同的方式调用 @selector() 吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:27:47.830

如果您可以将操作留在主线程上并且没有滞后或问题，那么您就完成了。

但是：让我们假设您已经这样做并遇到了问题。答案是：不要**在**延迟加载中修改数组。切换到主线程修改数组。在这里查看布拉德的答案：

[https://stackoverflow.com/a/8186206/8047](https://stackoverflow.com/a/8186206/8047)

一种使用块的方法，因此您可以将对象发送到主队列（您可能还应该首先使用 GCD 来调用延迟加载，但这不是必需的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T05:57:46.687

You can use @synchronized blocks to keep the threads from walking over each other. If you do

```
@synchronized(array)
{
  id item = [array objectAtIndex:row];
} 
```

in the main thread and

```
@synchronized(array)
{
  [array addObject:item];
} 
```

in the background, you're guaranteed they won't happen at the same time. (Hopefully you can extrapolate from that to your code—I'm not sure what all you're doing with the array there..)

It seems, though, like you'd have to notify the main thread anyway that you've loaded the data for a cell (via performSelectorOnMainThread:withObject:waitUntilDone:, say), so why not pass the data along, too?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T05:57:01.967

Given the term 'lazy load' I am assuming that means you are pulling your images down from a server. (If the images are local then there is really no need for multithreading).

If you are downloading images off a server I would suggest using something along these lines (using [ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/))

```
 static NSCache *cellCache; //Create a Static cache

    if (!cellCache)//If the cache is not initialized initialize it
    {
        cellCache = [[NSCache alloc] init];
    }
    NSString *key = imageURL;
    //Look in the cache for image matching this url
    NSData *imageData = [cellCache objectForKey:key];

    if (!imageData)
    {
        //Set a default image while it's loading
        cell.icon.image = [UIImage imageNamed:@"defaultImage.png"];'

        //Create an async request to the server to get the image
        __unsafe_unretained ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:imageURL]];

        //This code will run when the request finishes
        [request setCompletionBlock:^{
            //Put downloaded image into the cache
            [cellCache setObject:[request responseData] forKey:key];
            //Display image
            cell.icon.image = [UIImage imageWithData:[request responseData]];
        }];
        [request startAsynchronous];
    }
    else 
    {
        //Image was found in the cache no need to redownload
        cell.icon.image = [UIImage imageWithData:imageData];
    } 
```

# php - PHP 只允许服务器访问 PHP 文件

> ID：10256176
> 
> 赞同：0
> 
> 时间：2012-04-21T04:23:38.420
> 
> 标签：php, javascript

我有三个页面：

```
index.html
getjavascript.php?id=index
index.js 
```

index.html 包含脚本

```
'getjavascript.php?id=index' 
```

getjavascript 动态获取脚本 index.js。

有什么办法可以防止外部用户直接访问

```
getjavascript.php 
```

使用 PHP？

index.js 位于隐藏位置。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:50:12.613

我假设 index.html 包含一个类似于下面的片段的包含（假设我们正在做这个 javascript 的客户端拉）。

```
<script type="text/JavaScript" src="getjavascript.php?id=index" /> 
```

如果您的意图是在 javascript 文件中隐藏秘密，则无法阻止用户检索内容。他们可以轻松地使用开发人员工具来查看内容。此外，由于浏览器需要下载文件，因此没有办法区分直接访问的用户和检索此文件的浏览器。

如果您的意图是混淆您的服务器正在使用 PHP 的事实，您可以使用`mod_rewrite`删除扩展。

服务器端包含是一个不同的故事，修改`.htaccess`或移动这个文件到你的 webroot 目录之外是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:45:57.970

可以通过使用 htaccess 来实现。

重定向/getjavascript.php [http://example.com/newdirectory/](http://example.com/newdirectory/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T04:47:56.423

现在我看到了两种解决您问题的方法

1.  使用 Apache RewriteRule 指令。这种方式将允许您在 html 文件中隐藏真实的 URL 名称
2.  尝试在 getjavascript.php 中使用附加参数来检测此 url 是否直接从浏览器调用（而不是从 html 表单或链接）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-21T04:48:47.193

将包含脚本放在文档根目录之外。例如，如果您的根目录位于`public_html`，则在外部创建一个文件夹`public_html`以将包含的文件放入其中。这样，您的脚本可以读取它们，但互联网上的随机人不能。

# java - Java缓冲策略失去了硬件加速

> ID：10256180
> 
> 赞同：3
> 
> 时间：2012-04-21T04:24:29.000
> 
> 标签：java, graphics, buffer, acceleration

我正在开发一个 Java 游戏引擎，当我切换到 Windows 登录屏幕并返回时，缓冲策略失去了它的硬件加速。在我关闭程序并重新启动之前，我所做的任何事情都不会将缓冲区恢复为硬件加速。

以下是程序启动时 ((Graphics2D) bufferStrategy.getDrawGraphics()).getDeviceConfiguration() 的一些属性。

```
Bounds: java.awt.Rectangle[x=0,y=0,width=1440,height=900]
Buffer Capabilities: sun.java2d.d3d.D3DGraphicsConfig$D3DBufferCaps@114b82b
   Back Buffer Capabilities: sun.java2d.d3d.D3DGraphicsConfig$D3DImageCaps@147358f
      Accelerated: true
      True Volatile: true
   Flip Contents: undefined
   Front Buffer Capabilities: sun.java2d.d3d.D3DGraphicsConfig$D3DImageCaps@147358f
      Accelerated: true
      True Volatile: true
   Is Full Screen Required: false
   Is MultiBuffer Available: true
   Is Page Flipping: true
Device: D3DGraphicsDevice[screen=1]
   Available Accelerated Memory: 750780416
   ID String: \Display1
   Type: 0
   Display Mode: java.awt.DisplayMode@dd3
Image Capabilities: sun.java2d.d3d.D3DGraphicsConfig$D3DImageCaps@147358f
   Accelerated: true
   True Volatile: true 
```

以下是显示登录屏幕后的相同属性。

```
Bounds: java.awt.Rectangle[x=0,y=0,width=942,height=566]
Buffer Capabilities: java.awt.GraphicsConfiguration$DefaultBufferCapabilities@19d688
   Back Buffer Capabilities: java.awt.ImageCapabilities@539a92
      Accelerated: false
      True Volatile: false
   Flip Contents: null
   Front Buffer Capabilities: java.awt.ImageCapabilities@539a92
      Accelerated: false
      True Volatile: false
   Is Full Screen Required: false
   Is MultiBuffer Available: false
   Is Page Flipping: false
Device: sun.awt.image.BufferedImageDevice@c8f0a4
   Available Accelerated Memory: -1
   ID String: BufferedImage
   Type: 2
   Display Mode: java.awt.DisplayMode@68c
Image Capabilities: java.awt.ImageCapabilities@539a92
      Accelerated: false
      True Volatile: false 
```

缓冲区功能从*sun.java2d.d3d.D3DGraphicsConfig$D3DImageCaps@147358f*更改为*java.awt.GraphicsConfiguration$DefaultBufferCapabilities@19d688*。如果还没有找到将缓冲区策略返回到硬件加速的方法。再次配置和创建缓冲区策略不会恢复硬件加速。

缓冲策略是在 Canvas 对象上创建的。上面的 ((Graphics2D) bufferStrategy.getDrawGraphics()).getDeviceConfiguration() 属性失去了加速，但是当我通过调用 canvas.getGraphicsConfiguration() 获取 Canvas 对象上的 GraphicsConfiguration 时，Canvas 对象本身仍然显示它已加速。

这是 canvas.getGraphicsConfiguration() 的属性，而缓冲区策略中的图形对象返回 false 以进行加速。

```
Bounds: java.awt.Rectangle[x=0,y=0,width=1440,height=900]
Buffer Capabilities: sun.java2d.d3d.D3DGraphicsConfig$D3DBufferCaps@1672113
   Back Buffer Capabilities: sun.java2d.d3d.D3DGraphicsConfig$D3DImageCaps@d5eb7
      Accelerated: true
      True Volatile: true
   Flip Contents: undefined
   Front Buffer Capabilities: sun.java2d.d3d.D3DGraphicsConfig$D3DImageCaps@d5eb7
      Accelerated: true
      True Volatile: true
   Is Full Screen Required: false
   Is MultiBuffer Available: true
   Is Page Flipping: true
Device: D3DGraphicsDevice[screen=1]
   Available Accelerated Memory: 764411904
   ID String: \Display1
   Type: 0
   Display Mode: java.awt.DisplayMode@dd3
Image Capabilities: sun.java2d.d3d.D3DGraphicsConfig$D3DImageCaps@d5eb7
   Accelerated: true
   True Volatile: true 
```

这是可用于重现上述问题的代码：

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics2D;
import java.awt.GraphicsConfiguration;
import java.awt.image.BufferStrategy;

import javax.swing.JFrame;

public class AccelerationTest extends JFrame {

    public AccelerationTest(){
        setSize(500, 500);
        setVisible(true);       
        setIgnoreRepaint(true);
        createBufferStrategy(2);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        (new Thread(new Runnable(){
            public void run(){
                do{
                    render();
                    try{Thread.sleep(200);}catch(InterruptedException e){}                          
                }while (true);                      
            }           
        })).start();
    }

    public static void main(String args[]) {        
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                new AccelerationTest();     
            }
        });
    }

    private void render(){

        BufferStrategy bufferStrategy = getBufferStrategy();
        Graphics2D graphic = (Graphics2D) bufferStrategy.getDrawGraphics();

        graphic.setColor(Color.red);
        graphic.fillRect(0, 0, getWidth(), getHeight());
        graphic.setColor(Color.white);
        graphic.fillRect((int) (getWidth() * 0.1), (int) (getHeight() * 0.1), (int) (getWidth() * 0.8), (int) (getHeight() * 0.8));

        bufferStrategy.show();
        System.out.println();
        System.out.println("graphic from frame: \n" + getDeviceConfigurationString(graphic.getDeviceConfiguration()));
        System.out.println();
        System.out.println("frame: \n" + getDeviceConfigurationString(getGraphicsConfiguration()));

       graphic.dispose();
    }

    private String getDeviceConfigurationString(GraphicsConfiguration gc){
        return "Bounds: " + gc.getBounds() + "\n" + 
                "Buffer Capabilities: " + gc.getBufferCapabilities() + "\n" +
                "   Back Buffer Capabilities: " + gc.getBufferCapabilities().getBackBufferCapabilities() + "\n" +
                "      Accelerated: " + gc.getBufferCapabilities().getBackBufferCapabilities().isAccelerated() + "\n" + 
                "      True Volatile: " + gc.getBufferCapabilities().getBackBufferCapabilities().isTrueVolatile() + "\n" +
                "   Flip Contents: " + gc.getBufferCapabilities().getFlipContents() + "\n" +
                "   Front Buffer Capabilities: " + gc.getBufferCapabilities().getFrontBufferCapabilities() + "\n" +
                "      Accelerated: " + gc.getBufferCapabilities().getFrontBufferCapabilities().isAccelerated() + "\n" +
                "      True Volatile: " + gc.getBufferCapabilities().getFrontBufferCapabilities().isTrueVolatile() + "\n" +
                "   Is Full Screen Required: " + gc.getBufferCapabilities().isFullScreenRequired() + "\n" +
                "   Is MultiBuffer Available: " + gc.getBufferCapabilities().isMultiBufferAvailable() + "\n" +
                "   Is Page Flipping: " + gc.getBufferCapabilities().isPageFlipping() + "\n" +
                "Device: " + gc.getDevice() + "\n" +
                "   Available Accelerated Memory: " + gc.getDevice().getAvailableAcceleratedMemory() + "\n" +
                "   ID String: " + gc.getDevice().getIDstring() + "\n" +
                "   Type: " + gc.getDevice().getType() + "\n" +
                "   Display Mode: " + gc.getDevice().getDisplayMode() + "\n" +              
                "Image Capabilities: " + gc.getImageCapabilities() + "\n" + 
                "      Accelerated: " + gc.getImageCapabilities().isAccelerated() + "\n" + 
                "      True Volatile: " + gc.getImageCapabilities().isTrueVolatile() + "\n";        
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:17:27.027

这个问题可以无视。在项目外测试代码后，我发现失去硬件加速的不是缓冲区策略，而是一个 VolatileImage。在检查是否需要重新创建 VolatileImage 时，如果 isAccelerated 返回 false，则跳过该部分。因此，在屏幕更改期间，加速似乎不可用，但再次可用，但代码跳过了该部分，因为创建的 VolatileImage 已经在没有加速的情况下创建。

# c# - 新闻系统的设计

> ID：10256181
> 
> 赞同：0
> 
> 时间：2012-04-21T04:24:32.300
> 
> 标签：c#, algorithm, database-design

我有一个客户进入新闻的应用程序（新闻有一个类别），他们要求将一些他们想要推广到首页的新闻保留在用户配置的时间。有新闻，他们可以输入更多新闻，但每个类别只会显示他们有资格成为头版新闻的新闻。

我在想我在数据库表中添加一个位字段（IsPromotedToHeadline）和一个 DateTime 字段（DisplayUntil），然后我可以在 News 表中查询 s 的条目`Datetime.Now > DisplayUntil and IsPromotedToHeadLine == true and Category == category`。与此有关的问题将`DateTime.Now`大于许多新闻。

我该如何解决这个问题？

还是您有更好的主意来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T04:38:11.117

您应该查询应该显示在首页上的条目（具有*大于*当前日期的`DisplayUntil`值的条目），而不是。这样，只要每个类别中只有一个推广项目，您就只有一个满足查询的项目，并且您可以在页面上显示该新闻项目。

# mysql - 查询以显示不在列表中的项目

> ID：10256185
> 
> 赞同：1
> 
> 时间：2012-04-21T04:25:03.823
> 
> 标签：mysql, sql

此查询返回给我特定日期占用的房间 #077 的列表；如何反转此查询并仅显示 07:00:00 到 22:00:00 之间不在数据库中的时间？（间隔 30 分钟），每节课只需要 1 小时 30 分钟

```
select 
    *
from
    (select 
        rooms.id, rooms.number, rooms.building, rooms.capacity
    from
        rooms) R1,
    (select 
        exam_schedules.room_id,
            exam_schedules.day,
            exam_schedules.start_time,
            exam_schedules.end_time
    from
        exam_schedules) R2
where
    R2.room_id = R1.id and R2.day = 'tuesday' and R1.number = '077' 
```

这是结果：

```
ID  number  Bulding Capacity    room_id day start_time  end_time
1   077 ACT 12  1   tuesday 10:30:00    12:00:00 
```

但我需要下面显示的结果（这几乎显示了考试不占用的可用时间，并且不能被其他考试占用，因为它可能会导致安排问题：例如，如果考试已经安排在 10.30，只有应该显示 9.00（不是 9.30），因为如果显示 9.30 - 它会导致冲突：9.30+1.30 = 11.00 - 但我已经为这个房间安排了 10.30-12.00）

```
 1  077 ACT 12  1   tuesday 07:00:00
 1  077 ACT 12  1   tuesday 07:30:00
 1  077 ACT 12  1   tuesday 08:00:00
 1  077 ACT 12  1   tuesday 08:30:00
 1  077 ACT 12  1   tuesday 09:00:00
//note that time frame from 9.30-10.30 is not available since there is a class at 10.30 scheduled already
//note that time period 10.30-<12.00 not shown since class is already scheduled for this timeframe 10.30-12.00
 1  077 ACT 12  1   tuesday 12:00:00
 1  077 ACT 12  1   tuesday 12:30:00
 1  077 ACT 12  1   tuesday 13:00:00
 1  077 ACT 12  1   tuesday 13:30:00
 1  077 ACT 12  1   tuesday 14:00:00
 1  077 ACT 12  1   tuesday 14:30:00
 1  077 ACT 12  1   tuesday 15:00:00
 1  077 ACT 12  1   tuesday 15:30:00
 1  077 ACT 12  1   tuesday 16:00:00
 1  077 ACT 12  1   tuesday 16:30:00
 1  077 ACT 12  1   tuesday 17:00:00
 1  077 ACT 12  1   tuesday 17:30:00
 1  077 ACT 12  1   tuesday 18:00:00
 1  077 ACT 12  1   tuesday 18:30:00
 1  077 ACT 12  1   tuesday 19:00:00
 1  077 ACT 12  1   tuesday 19:30:00
 1  077 ACT 12  1   tuesday 20:00:00
 1  077 ACT 12  1   tuesday 20:30:00
 1  077 ACT 12  1   tuesday 21:00:00
 1  077 ACT 12  1   tuesday 21:30:00
 1  077 ACT 12  1   tuesday 22:00:00 
```

数据库中不存在包含所有可能时间范围的表。我可以将其编码到查询中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T04:38:22.230

以这个查询为例：

```
SELECT * FROM Persons WHERE Year='1965' 
```

此 sql 查询将返回一个数据集，其中包含“Persons”表中所有“Year”字段等于“1965”的所有行。正如您所说，您想反转您的 sql 查询，以便它返回相反的数据集。这在 WHERE 子句中成为可能，您可以在其中使用不等于运算符：<> 或 != 在某些 SQL 版本中

```
SELECT * FROM Persons WHERE Year<>'1965' 
```

或者

```
SELECT * FROM Persons WHERE Year!='1965' 
```

将返回一个数据集，其中包含“Persons”表中的字段不等于“1965”的行。

希望这对您的 sql 查询有所帮助。您只需要在需要从数据库返回相反数据集的地方实现 <> 或 != 运算符，这是假设您想要与当前查询已经返回的数据中的相反数据。

如果这不是您想要的，请更新您的问题，以便清楚地解释您期望它具有的输出 - 一个示例 - 以便可以进行查询以检索所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:44:45.043

让我先给你我认为的答案：
我认为你正在寻找的是`Between ... And...`. 或者更好的说法`Not(Between .. And..)`。`Between ... And...`是范围运算符。所以 `x Between 1 And 10 = 1<x<10`和`Not x Between 1 And 10 = x<1 || x>10`。查询的某些部分对我来说是完全错误的：
为什么你有这个`select *`？您可以只加入到表中，例如：

```
select 
    rooms.id, rooms.number, rooms.building, rooms.capacity,exam_schedules.room_id,
        exam_schedules.day,
        exam_schedules.start_time,
        exam_schedules.end_time
from
    rooms,exam_schedules
where
    exam_schedules.room_id = rooms.id and exam_schedules.day = 'tuesday' and rooms.number = '077' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:54:08.283

您需要创建所有可能值的列表。您可以使用如下查询来执行此操作： select * from (select '2012-01-01 7:00:00' from dual union all select '2012-01-01 7:30:00' from dual union all ... ) 次

也就是说，您可以使用 union all 将数据放在一起。我发现使用 Excel 将完成这项工作所需的 SQL 语句放在一起最容易。

也就是说，您应该考虑日历/日历时间表。拥有一个包含每个可能时间段的表格可能会在将来对您有所帮助。

# c - valgrind 可以和 Cygwin 一起使用吗？

> ID：10256188
> 
> 赞同：22
> 
> 时间：2012-04-21T04:25:33.853
> 
> 标签：c, cygwin, valgrind

我正在使用 Cygwin 在 Windows 上构建源代码，我需要找到内存泄漏和可能的内存泄漏的地方。我知道在 Linux 中用于内存泄漏检测的 Valgrind。

*   Valgrind 可以与 Cygwin 一起使用，以便在基于 Windows 的环境中工作吗？
*   如果是，你能告诉我需要什么配置等吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-21T08:58:38.023

不，**不** [支持](http://www.valgrind.org/info/platforms.html)。

另外，一个明显的链接：[http ://www.google.com/search?q=cygwin+valgrind](http://www.google.com/search?q=cygwin+valgrind)

# c# - t4模板错误发生在powershell而不是visual studio

> ID：10256190
> 
> 赞同：1
> 
> 时间：2012-04-21T04:26:08.487
> 
> 标签：c#, powershell, t4

我正在尝试使用 powershell 处理 .tt 文件。我认为它真的很接近，但是我从 powershell 调用时遇到错误，使用 Visual Studio 时该错误不存在。

**Powershell 脚本**

```
function DoThing
{

  $inputfile = 'D:\source\62\test.tt'

  [Reflection.Assembly]::LoadWithPartialName("Microsoft.VisualStudio.TextTemplating") | Out-Null
  [Reflection.Assembly]::LoadFile('D:\source\62\Builder.dll') | out-null  

  $host = New-Object ("CustomHost.CustomCmdLineHost") 
  // impl ITextTemplatingEngineHost

  $server = New-Object ("Microsoft.VisualStudio.TextTemplating.Engine") 

  $server.ProcessTemplate($inputfile, $host);

} 
```

**Simple.tt 模板**

```
<#@ template language="C#" #>
<#@ output extension=".txt" #>

This content was generated from a template
in the year <#= DateTime.Now.Year.ToString() #> 
```

从 Visual Studio 运行时，.tt 生成文件正常

但是从 powershell 我收到一个无用的“ErrorGeneratingOutput”

我认为问题的要点是如何在从 powershell 使用时实现 ITextTemplatingEngineHost，欢迎在这里提出任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:34:29.930

你可以等到有人给你建议如何使用微软的T4引擎，但我个人更喜欢直接使用Mono的开源实现，

[https://github.com/mono/monodevelop/tree/master/main/src/addins/TextTemplating](https://github.com/mono/monodevelop/tree/master/main/src/addins/TextTemplating)

编译 Mono.TextTemplating 和 TextTransform 你得到一个命令行实用程序 TextTransform.exe。

# c# - 动态对象转换的替代语法

> ID：10256199
> 
> 赞同：2
> 
> 时间：2012-04-21T04:27:18.090
> 
> 标签：c#, intellisense, dynamic-language-runtime

我有一个 DynamicDictionary 的实现，其中字典中的所有条目都是已知类型：

```
public class FooClass
{
    public void SomeMethod()
    {
    }
}

dynamic dictionary = new DynamicDictionary<FooClass>();

dictionary.foo = new FooClass();
dictionary.foo2 = new FooClass();
dictionary.foo3 = DateTime.Now;  <--throws exception since DateTime is not FooClass 
```

我想要的是在引用其中一个字典条目的方法时能够让 Visual Studio Intellisense 工作：

```
dictionary.foo.SomeMethod()  <--would like SomeMethod to pop up in intellisense 
```

我发现这样做的唯一方法是：

```
((FooClass)dictionary.foo).SomeMethod() 
```

谁能推荐一个更优雅的语法？我很乐意使用 IDynamicMetaObjectProvider 编写 DynamicDictionary 的自定义实现。

更新：

有人问为什么动态以及我的具体问题是什么。我有一个系统可以让我做这样的事情：

```
UI.Map<Foo>().Action<int, object>(x => x.SomeMethodWithParameters).Validate((parameters) =>
{
    //do some method validation on the parameters
    return true;  //return true for now
}).WithMessage("The parameters are not valid"); 
```

在这种情况下，方法 SomeMethodWithParameters 具有签名

```
public void SomeMethodWithParameters(int index, object target)
{
} 
```

我现在为单个参数注册验证的内容如下所示：

```
UI.Map<Foo>().Action<int, object>(x => x.SomeMethodWithParameters).GetParameter("index").Validate((val) =>
{
     return true;  //valid
}).WithMessage("index is not valid"); 
```

我想要的是：

```
UI.Map<Foo>().Action<int, object(x => x.SomeMethodWithParameters).index.Validate((val) =>
{
    return true;
}).WithMessage("index is not valid"); 
```

这可以使用动态，但在引用索引后你会失去智能感知——这目前很好。问题是是否有一种巧妙的语法方式（除了上面提到的方式）让 Visual Studio 以某种方式识别类型。听起来到目前为止，答案是“不”。

在我看来，如果有 IDynamicMetaObjectProvider 的通用版本，

```
IDynamicMetaObjectProvider<T> 
```

这可以发挥作用。但没有，因此问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T04:51:18.970

为了获得智能感知，您将不得不将某些东西转换为某个值不存在的值`dynamic`。~~如果您发现自己经常这样做，您可以使用辅助方法来减轻痛苦：~~

 ~~```
GetFoo(dictionary.Foo).SomeMethod(); 
```~~ 

~~但这与您已经拥有的相比并没有太大的改进。获得智能感知的唯一其他方法是将值转换回非动态类型或`dynamic`首先避免。~~

如果你想使用 Intellisense，通常最好一开始就避免使用`dynamic`。

```
typedDictionary["foo"].SomeMethod(); 
```

您的示例使您似乎对`dynamic`对象的结构有特定的期望。考虑是否有一种方法可以创建满足您需求的静态类结构。

### 更新

响应您的更新：如果您不想彻底改变语法，我建议使用索引器，以便您的语法看起来像这样：

```
UI.Map<Foo>().Action<int, object>(x => x.SomeMethodWithParameters)["index"].Validate((val) => {...}); 
```

这是我的推理：

1.  与动态方法相比，您只需添加四个字符（并减去一个）。
2.  让我们面对现实吧：您使用的是“魔术字符串”。通过要求一个实际的字符串，这个事实对于查看这段代码的程序员来说是显而易见的。使用该`dynamic`方法，从编译器的角度来看，没有任何迹象表明“索引”不是已知值。

如果你愿意改变很多东西，你可能想研究一下`Moq`在语法中使用表达式的方式，尤其是`It.IsAny<T>()`方法。似乎您可以按照以下方式做更多事情：

```
UI.Map<Foo>().Action(
    (x, v) => x.SomeMethodWithParameters(
        v.Validate<int>(index => {return index > 1;})
            .WithMessage("index is not valid"),
        v.AlwaysValid<object>())); 
```

与您当前的解决方案不同：

1.  如果您最终更改了方法签名中参数的名称，这不会中断：就像编译器一样，框架会更关注参数的位置和类型，而不是它们的名称。
2.  对方法签名的任何更改都会导致编译器立即标记，而不是在代码运行时出现运行时异常。

另一种可能更容易完成的语法（因为它不需要解析表达式树）可能是：

```
UI.Map<Foo>().Action((x, v) => x.SomeMethodWithParameters)
    .Validate(v => new{
        index = v.ByMethod<int>(i => {return i > 1;}),
        target = v.IsNotNull()}); 
```

这不会给你上面列出的优势，但它仍然给你类型安全（因此是智能感知）。选择你的毒药。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:55:24.407

除了**显式演员**，

```
((FooClass)dictionary.foo).SomeMethod(); 
```

或**安全铸造**，

```
(dictionary.foo as FooClass).SomeMethod(); 
```

切换回静态调用（这将允许智能感知工作）的唯一其他方法是执行**Implicit Cast**：

```
FooClass foo = dictionary.foo;
foo.SomeMethod(). 
```

声明的强制转换是您唯一的选择，不能使用辅助方法，因为它们将被动态调用，给您同样的问题。

***更新：***

不确定这是否更优雅但不涉及投射一堆并在 lambda 之外获得智能感知：

```
public class DynamicDictionary<T>:IDynamicMetaObjectProvider{

    ...

    public T Get(Func<dynamic,dynamic> arg){
            return arg(this);
    }

    public void Set(Action<dynamic> arg){
            arg(this);
    }
}
...
var dictionary = new DynamicDictionary<FooClass>();

dictionary.Set(d=>d.Foo = new FooClass());
dictionary.Get(d=>d.Foo).SomeMethod(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T05:16:02.047

正如已经说过的（在问题和[StriplingWarrior](https://stackoverflow.com/a/10256320/635634)答案中）C# 4`dynamic`类型不**提供**智能感知支持。提供此答案仅是为了解释*原因*（根据我的理解）。

`dynamic`对于 C# 编译器来说`object`，它在编译时只知道它支持哪些成员是有限的。不同之处在于，在运行时，`dynamic`尝试将针对其实例调用的成员与它所*代表*的实例知道的类型进行解析（提供一种后期绑定形式）。

考虑以下：

```
dynamic v = 0;
v += 1;
Console.WriteLine("First: {0}", v);
// ---
v = "Hello";
v += " World";
Console.WriteLine("Second: {0}", v); 
```

在此代码段中，`v`表示`Int32`（如代码的第一部分所示）的实例和`String`后者中的实例。运算符的使用`+=`实际上在两次不同的调用之间有所不同，因为所涉及的类型是在运行时推断的（意味着编译器在编译时不理解或推断类型的使用）。

现在考虑一个轻微的变化：

```
dynamic v;

if (DateTime.Now.Second % 2 == 0)
    v = 0;
else
    v = "Hello";

v += 1;
Console.WriteLine("{0}", v); 
```

在此示例中，`v`可能是 an`Int32` *或*a ，`String`具体取决于代码运行的时间。我知道，这是一个极端的例子，尽管它清楚地说明了问题。

考虑到单个`dynamic`变量在运行时可能代表任意数量的类型，编译器或 IDE 几乎不可能在其执行之前对其所代表的类型做出假设，因此`dynamic`变量的设计或编译时解析潜在成员是不合理的（如果不是不可能的话）。

# ruby-on-rails - 如何配置 Rails 标签不生成 HTML id

> ID：10256202
> 
> 赞同：0
> 
> 时间：2012-04-21T04:28:05.880
> 
> 标签：ruby-on-rails, html-helper

如果您使用 Rails 帮助`check_box_tag`程序，是否可以告诉它不要生成 HTML id 或者是覆盖它的唯一选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T04:40:39.673

我不知道你为什么要那样做，但我相信你做不到。查看**check_box_tag**助手的代码：

```
def check_box_tag(name, value = "1", checked = false, options = {})
  html_options = { "type" => "checkbox", "name" => name, "id" => sanitize_to_id(name), "value" => value }.update(options.stringify_keys)
  html_options["checked"] = "checked" if checked
  tag :input, html_options
end 
```

您可以做的最接近的方法是传递**nil**，这将生成`id=""`.

# java - Java Sorted Set of Maps 转换为数组

> ID：10256205
> 
> 赞同：0
> 
> 时间：2012-04-21T04:28:37.257
> 
> 标签：java, indexing, treemap, sortedset, toarray

我有这两个数据结构：

```
public TreeMap<String, Integer> tableFrequency;                  

public SortedSet<Map.Entry<String, Integer>> sortedTable; 
```

sortedTable 保存与 tableFrequency 相同的信息，但它按 Integer 值降序排序。

如何将 sortedTable 转换为由字符串和整数对组成的数组，以便对数组进行索引以保持与 sortedTable 相同的顺序？例如，为了更清楚，我在索引 0 处的数组将包含 sortedTable 中的最大值，而我在 index[sortedTable.size() - 1] 处的数组将包含 sortedTable 中的最小值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T04:36:31.863

```
Map.Entry<String, Integer> sortedArray[] = new Map.Entry<String, Integer>[sortedTable.size()];
sortedArray = sortedTable.toArray(sortedArray); 
```

# asp.net - 避免 Ajax 控件的 ASP.NET 特殊行为

> ID：10256209
> 
> 赞同：2
> 
> 时间：2012-04-21T04:29:14.527
> 
> 标签：asp.net, ajax

我有一个表单，用户可以使用模态弹出窗口对大量信息进行 ajaxly 更改。我正在使用 Ajaxtoolkit 和标准 ASP.NET Ajax 控件（即 scriptmanager、updatepanel 等）

当用户点击后退按钮时，用户正在经历用户所做更改的所有阶段。我想避免这种情况。我希望如果 PAGE1 正在调用 PAGE2，并且即使 PAGE2 使用 Ajax 彻底改变，点击浏览器的“后退”按钮也会将用户直接带回 PAGE1。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:33:55.843

浏览器后退按钮不是从服务器获取页面，而是从浏览器缓存中获取。所以有两种处理这种情况的方法：

1.  这个方法可以让我们从服务器调用上一页而不是缓存：

    ```
    <body onUnload = "DoSomethingHere()"> ... </body>
    <script language = "javascript">
        DoSomethingHere() {
            window.location.href = "URL of the previous page";
        }
    </script> 
    ```

2.  这样我们将防止后退按钮动作：

    ```
    function preventBack(){window.history.forward();}
    setTimeout("preventBack()", 0);
    window.onunload = function(){null}; 
    ```

# wpf - 组合框 MouseWheel 和 ICommand 可以执行

> ID：10256215
> 
> 赞同：1
> 
> 时间：2012-04-21T04:30:16.970
> 
> 标签：wpf, combobox, selecteditem, mousewheel

我在组合框中有一些对象，根据所选项目，我想使用 ICommand CanExecute 启用或禁用一些按钮。但是，当我将鼠标悬停在组合框上并鼠标滚轮滚动以选择一个新项目时，所选项目会发生变化，但 CanExecute 永远不会触发，直到我单击另一个控件。每次 selecteditem 更改时有什么方法可以触发 CanExecute 吗？

# hibernate - 具有基于元素的列表的标准和投影

> ID：10256219
> 
> 赞同：0
> 
> 时间：2012-04-21T04:31:30.667
> 
> 标签：hibernate, criteria

我想创建一个与以下 SQL 查询具有相同行为的条件查询：

```
SELECT Count(*)
FROM Datagathering_respuestas, Datagathering
WHERE Datagathering.document = 4 AND Datagathering.id_datagathering = datagathering_respuestas.id_datagathering
GROUP BY respuesta; 
```

它围绕着以下课程：

```
public class DataGathering {
    private int id;
    private Usuario user;
    private Date fecha;
    private int individual;
    private DataDocument document;
    private List<String> respuestas; 
```

及其对应的映射文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
  <class name="pe.com.abf.pws.clases.DataGathering">
    <id column="id_datagathering" name="id">
      <generator class="identity"/>
    </id>
    <many-to-one class="pe.com.abf.pws.clases.DataDocument" name="document"/>
    <many-to-one class="pe.com.abf.pws.clases.Usuario" name="user"/>
    <property name="individual"/>
    <property name="fecha" type="timestamp"/>
    <list name="respuestas">
      <key column="id_datagathering"/>
      <index column="idx_respuesta"/>
      <element column="respuesta" length="4000" type="string"/>
    </list>
  </class>
</hibernate-mapping> 
```

我的主要问题是分组属性“respuestas”被定义为字符串类型的元素列表，并且没有它自己的类。在 SQL 中很容易只引用相应的表，但在 Criteria 中，我不知道如何引用要按它们分组的元素。我设法得到这个查询：

```
 Criteria c = s.createCriteria(DataGathering.class);
        c.add(Restrictions.eq("document.id", id));
        c.createCriteria("respuestas","resp");
        c.setProjection(Projections.projectionList().add(Projections.rowCount())); 
```

它具有与上述 SQL 查询相同的行为，但没有按元素分组，所以我想我已经接近了。问题再次是我不知道如何引用“respuestas”中的值。

知道如何完成我的查询吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:30:42.187

我通过执行以下操作设法做到了这一点：

```
da = s.createCriteria(DataGathering.class)
        .add(Restrictions.eq("document.id", id))
        .createCriteria("respuestas","resp")
        .setProjection(Projections.projectionList()
                .add(Projections.groupProperty("resp.elements").as("resp"))
                .add(Projections.count("resp.elements").as("amount")))
        .setResultTransformer(Transformers.aliasToBean(EncuestaHelper.class))
        .list(); 
```

诀窍是 Criteria 使用键`"elements"`来引用普通元素集合。然后，提供与特殊类的属性匹配的投影别名，您可以轻松地制作该类的列表以在报告中使用它。

感谢任何试图提供帮助的人

# java - 如何在单击 JLabel 的情况下设置 JText 字段？

> ID：10256221
> 
> 赞同：1
> 
> 时间：2012-04-21T04:31:45.783
> 
> 标签：java, swing, mouseevent, jlabel, jtextfield

如何设置`JTextField`刚刚`JLabel`点击的？

我应该添加什么：

```
 public void mouseClicked(java.awt.event.MouseEvent evt) {
      jLabel2MouseClicked(evt);
 } 

 private void jLabel2MouseClicked(java.awt.event.MouseEvent evt) {

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T08:08:26.270

我也会质疑允许点击标签的原因。为什么不使用按钮？

无论如何，假设你有充分的理由，你可以这样做：

```
 final JFrame frame = new JFrame();
    final JLabel label1 = new JLabel("Label 1");
    final JLabel label2 = new JLabel("Label 2");
    final JTextField textField = new JTextField();
    MouseListener mouseListener = new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
            textField.setText(((JLabel) e.getSource()).getText());
        }

    };
    label1.addMouseListener(mouseListener);
    label2.addMouseListener(mouseListener);
    frame.add(label1, BorderLayout.NORTH);
    frame.add(label2, BorderLayout.CENTER);
    frame.add(textField, BorderLayout.SOUTH);
    frame.pack();
    frame.setVisible(true); 
```

# database-design - 我们是否在数据库设计中为支持实体创建关系？

> ID：10256224
> 
> 赞同：0
> 
> 时间：2012-04-21T04:32:04.703
> 
> 标签：database-design, relational-database

假设我们有

```
Drinker(SSN, name, address)
Beer(name, manf) 
```

我们还想要一个连接`Drinker`到`Beer`被调用的支持实体`Likes`

1.  这是正确的架构吗？Likes( **SSN** , **name** , **manf** ) as name 和 manf 是`Beer`.

2.  我们真的`Likes`在数据库中创建吗？有人告诉我，有三种方法可以将 E/R 图转换为关系数据库关系。

    a) 简单的 E/R 图

    b) 面向对象的方法

    c) 空方法

对于（a），教科书说我们可以跳过`Likes`。

我很困惑。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:16:04.177

您的教科书可能说过您可以跳过`Likes`ER 图中的表格的原因是，在概念或逻辑 ERD 中，多对多关系可以用一条线而不是一个框来表示（假设您的 ERD 符号使用线表示关系和桌子的盒子）。

在*物理*`Drinker`ERD 中，您必须表示和`Beer`使用**交叉实体**之间的多对多关系- 在本例中是您的`Likes`表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T10:54:48.453

假设这是多对多关系，那么是的：将是一个单独的表，其主键中包含来自和`Likes`的主键组合。`Drinker``Beer`

我从未见过在真实数据库中跳过这一点。通常，您的目标应该是在数据库本身（而不是在客户端应用程序中）和*声明式*（例如，触发器）中强制执行尽可能多的完整性。

# php - 如何在不下载整个网页的情况下检查页面是否已更新？

> ID：10256225
> 
> 赞同：1
> 
> 时间：2012-04-21T04:32:14.560
> 
> 标签：php

php如何在不下载整个网页的情况下检查页面是否更新？我是否需要查看标题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T04:35:56.070

一种可能性是检查 LastModified 标头。您可以通过发出 HEAD 请求仅下载标头。服务器仅使用 HTTP 标头进行响应，您可以检查最后修改的标头和/或内容长度标头以检测更改。

```
Last-modified "Mon, 03 Jan 2011 13:02:54 GMT" 
```

需要注意的一点是，HTTP 服务器不需要发送此标头，因此这并非在所有情况下都有效。PHP 函数[`get_headers`](http://php.net/manual/en/function.get-headers.php)将为您获取这些。

```
// By default get_headers uses a GET request to fetch the headers. If you
// want to send a HEAD request instead, you can do so using a stream context:
stream_context_set_default(
    array(
        'http' => array(
            'method' => 'HEAD'
        )
    )
);
$headers = get_headers('http://example.com'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T04:39:33.097

您可以[`If-Modified-Since: <datetime>`](http://www.w3.org/Protocols/HTTP/HTRQ_Headers.html#if-modified-since)在请求中添加标头，`304 Not Modified`如果此后没有更改，服务器应返回 a 。但是如果文档是动态生成的（php、perl 等），生成器可能懒得检查这个标题并总是返回完整的文档。

# python - Openerp 中的 Onchange 函数

> ID：10256227
> 
> 赞同：3
> 
> 时间：2012-04-21T04:32:33.390
> 
> 标签：python, xml, onchange, openerp

我在 account.invoice.line 中有一个名为 form_type 的选择字段。它有三个选择选项：

```
1) form_a
2) form_b
3) form_c 
```

account.invoice.line中还有一个名为*flag的整数字段。*选择Form_c时，标志值应设置为1; 否则，如果选择了 form_a 或 form_b，则标志值应设置为 0。我为上述情况编写了一个*onchange*函数，但它不起作用。有人可以帮我吗？我的代码有什么问题？

```
def onchange_form_type(self, cr, uid, ids, invoice, context=None):
    val={}
    flag=0
    invoice = self.pool.get('account.invoice.line').browse(cr, uid, invoice)
    for invoice in self.browse(cr, uid, ids, context=context):
        if invoice.form_type=="form_c":
            flag="1"
        else:
            flag="0"

    print flag
    val = { 'flag': flag, }
    return {'value': val} 
```

我在 account.invoice.line 中用于 onchange 的 XML 代码是：

```
<field name="form_type" on_change="onchange_form_type(form_type)"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T16:41:07.013

在您的 on-change 函数中，您不需要调用对象的浏览函数，因为这些值尚未存储在数据库中。此外，您将“form_type”值传递给函数而不是对象 id（因为浏览接受对象 id）。

因此，下面将是 on_change 函数，以满足预期的要求：

```
def onchange_form_type(self, cr, uid, ids, form_type, context=None):

    val={}
    flag=0
    if form_type == 'form_c':
        flag="1"
    val = { 'flag': flag }
 return {'value': val} 
```

# python - Python根据第一个属性在内部按日期排序

> ID：10256229
> 
> 赞同：2
> 
> 时间：2012-04-21T04:32:55.383
> 
> 标签：python, sorting

我有一个包含 8 个属性的数据集（根据第一个属性排序），格式如下（只是一个例子，它是制表符分隔的）

```
AX  0123  December 20, 2010  1  2  8.0  hello this
AX  2313  April 19, 2009  2  3  4.0  hi there
AX  4532  December 19, 2010  6  2  8.0  nice tie
AX  1244  January 10, 2011  3  4  8.0  king tale
BX  0214  September 10, 2009  2  3  9.0 this king
BX  0114  February 9, 2003  4  9  4.0  his brought
BX  3214  September 1, 2006  1  3  3.0 is great
MG  980   April 20, 2007  2  4  7.1  not available
MG  246   May 8, 2005  5  1  2.1  make goat 
```

现在，文件是根据第一个属性排序的，现在我需要根据第一个属性在内部根据日期排序，输出应该是这样的（我不想使用数据库，这是一个巨大的文件（2 GB ）所以我认为可能需要一个特殊的python代码（不确定是否可以用一个简单的代码来做到这一点）

```
AX  2313  April 19, 2009  2  3  4.0  hi there
AX  4532  December 19, 2010  6  2  8.0  nice tie
AX  0123  December 20, 2010  1  2  8.0  hello this
AX  1244  January 10, 2011  3  4  8.0  king tale
BX  0114  February 9, 2003  4  9  4.0  his brought
BX  3214  September 1, 2006  1  3  3.0 is great
BX  0214  September 10, 2009  2  3  9.0 this king
MG  246   May 8, 2005  5  1  2.1  make goat
MG  980   April 20, 2007  2  4  7.1  not available 
```

非常感谢任何答复。如果您还有其他问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:50:57.827

好的，又快又脏。你可以改进它：

```
from datetime import datetime as dt
from collections import defaultdict

dd = defaultdict(list)

with open('test.txt') as f:
    for line in f:
        lines = line.split('\t')
        dd[lines[0]].append(lines)

def mydate(line):
    return dt.strptime(line[2], "%B %d, %Y")

keys = sorted(dd.keys())

my_list = []
for key in keys:
    dd[key].sort(key=mydate)
    my_list.extend(dd[key])

for item in my_list:
    print item 
```

这会产生：

```
['AX', '2313', 'April 19, 2009', '2', '3', '4.0', 'hi there\n']
['AX', '4532', 'December 19, 2010', '6', '2', '8.0', 'nice tie\n']
['AX', '0123', 'December 20, 2010', '1', '2', '8.0', 'hello this\n']
['AX', '1244', 'January 10, 2011', '3', '4', '8.0', 'king tale\n']
['BX', '0114', 'February 9, 2003', '4', '9', '4.0', 'his brought\n']
['BX', '3214', 'September 1, 2006', '1', '3', '3.0 is great\n']
['BX', '0214', 'September 10, 2009', '2', '3', '9.0 this king\n']
['MG', '246', 'May 8, 2005', '5', '1', '2.1', 'make goat']
['MG', '980', 'April 20, 2007', '2', '4', '7.1', 'not available\n'] 
```

那么你只需要 string.join() 所有的列表

```
text_lines = []
for item in my_list:
    text_lines.append('\t'.join(item))

full_text = ''.join(text_lines) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:19:28.343

[pandas](http://pandas.pydata.org/)是一个 Python 库，旨在分析具有不同数据类型的数据集。

如果您的数据在**data.txt**`pandas.read_csv()`中，您可以使用然后对结果进行排序来读取它`DataFrame`。

```
>>> import datetime
>>> import pandas as pd

>>> def date_converter(date_string):
...     return datetime.datetime.strptime(datestring, '%B %d, %Y').date()
>>> df = pd.read_csv('data.txt', sep='\t', header=None,
...                  converters={2:date_converter})
>>> print df
  X.1   X.2         X.3  X.4  X.5  X.6            X.7
0  AX   123  2010-12-20    1    2  8.0     hello this
1  AX  2313  2009-04-19    2    3  4.0       hi there
2  AX  4532  2010-12-19    6    2  8.0       nice tie
3  AX  1244  2011-01-10    3    4  8.0      king tale
4  BX   214  2009-09-10    2    3  9.0      this king
5  BX   114  2003-02-09    4    9  4.0    his brought
6  BX  3214  2006-09-01    1    3  3.0       is great
7  MG   980  2007-04-20    2    4  7.1  not available
8  MG   246  2005-05-08    5    1  2.1      make goat

>>> df = df.set_index(['X.1', 'X.3'])  # using a hierarchical index
>>> df = df.sort_index()
>>> print df
                 X.2  X.4  X.5  X.6            X.7
X.1 X.3                                           
AX  2009-04-19  2313    2    3  4.0       hi there
    2010-12-19  4532    6    2  8.0       nice tie
    2010-12-20   123    1    2  8.0     hello this
    2011-01-10  1244    3    4  8.0      king tale
BX  2003-02-09   114    4    9  4.0    his brought
    2006-09-01  3214    1    3  3.0       is great
    2009-09-10   214    2    3  9.0      this king
MG  2005-05-08   246    5    1  2.1      make goat
    2007-04-20   980    2    4  7.1  not available 
```

由于它是`numpy`基于的，它应该是大型数据集的正确选择。

# ruby-on-rails - 如何使用 FactoryGirl 建立关联来测试 Rails 应用程序

> ID：10256231
> 
> 赞同：1
> 
> 时间：2012-04-21T04:34:24.687
> 
> 标签：ruby-on-rails, factory-bot

我刚刚开始尝试 Rails 测试。我很难开始。

我的第一个测试需要一个用户，这是我在 FactoryGirl 中创建的。但是我的模型验证了邀请的存在。

```
class User
  has_many :sent_invitations, :class_name => 'Invitation', :foreign_key => 'sender_id'
  belongs_to :invitation
  validates_presence_of :invitation_id
end

class Invitation
  belongs_to :sender, :class_name => 'User'
  has_one :recipient, :class_name => 'User'
end 
```

如何使用 FactoryGirl 生成受邀用户？

我尝试了几种方法，但没有设置关联。似乎最有可能起作用的是：

```
factory :invitation do
  token "MyInvitationToken"
  recipient_email "test@example.com"

  factory :invited_user do
    association :user, :factory => :user
  end
end

factory :user do
  email "test@example.com"
end 
```

这是失败的`Validation failed: Invitation is required`。

与 FactoryGirl 建立这种关联的正确方法是什么？

对于奖励积分，我如何修改它以使 :invitation.recipient_email 是一个序列`sequence(:recipient_email) { |n| "test#{n}@example.com" }`，并且该值在每次迭代时都会传递到被邀请用户的电子邮件列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:04:18.423

您可以使用：

```
factory :user do
  email "test@example.com"
  f.association :invitation
end 
```

或者

```
factory :user do
  email "test@example.com"

  after_build do |foo|
    user.invitations << Factory.build(:invitation)
  end
end 
```

# javascript - 如何使 JS 对象在多个文件中可用

> ID：10256240
> 
> 赞同：0
> 
> 时间：2012-04-21T04:35:25.920
> 
> 标签：javascript, ruby-on-rails, file, scope, coffeescript

我是一个在 Rails 应用程序上工作的 js 菜鸟。我在我的一个 javascript 文件中定义了一个有用的 JS 函数，我希望它可以在其他文件中调用。然而，事实并非如此。这是我的情况的一个简化示例...请注意，我使用的是 CoffeeScript（但 AFAIK 应该没有区别）：

```
#file: app/assets/javascripts/foos.js.coffee
testFoo: ->
  alert 'Foo'

#file: app/assets/javascripts/bars.js.coffee
jQuery ->
  testFoo() 
```

这不起作用，在控制台中我得到：`testFoo is not defined`.

这两个文件都包含在页面中，如果我在其中任何一个中放置警报或控制台日志，页面都会按预期响应。我觉得我必须在这里忽略一些非常明显的东西......它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T04:59:51.857

总之试试这个：

```
root = exports ? this
root.foo = -> alert 'Foo' 
```

# c# - C#程序windows和linux时间同步

> ID：10256241
> 
> 赞同：-3
> 
> 时间：2012-04-21T04:35:37.100
> 
> 标签：c#, windows, linux, synchronization

我想在我的C#程序中添加一个可以同步linux和windows之间时间的函数，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:39:17.227

一种解决方案是在 Linux 服务器上运行一个 ntp 服务器（许多发行版都包含一个或使其易于安装），然后在您的程序中使用某种 NTP 客户端。.NET 端的一种方法是[在这里](http://www.codeproject.com/Articles/1005/SNTP-Client-in-C)，但您不想使用公共时间服务器，而是希望使用 Linux 服务器的地址。

# python - 随机拆分列表，在新列表中保持原始顺序

> ID：10256250
> 
> 赞同：3
> 
> 时间：2012-04-21T04:37:12.360
> 
> 标签：python

我很难提出我的问题，所以我将举例说明。

```
x = ['abc', 'c', 'w', 't', '3']
a, b = random_split(x, 3)      # first list should be length 3
# e.g. a => ['abc', 'w', 't']
# e.g. b => ['c', '3'] 
```

有没有一种简单的方法可以在保持原始顺序的同时将列表分成两个随机样本？

* * *

**编辑：**我知道我可以使用 random.sample 然后重新排序，但我希望有一种简单、简单的单行方法。

**编辑2：**这是另一个解决方案，看看你是否可以改进它：

```
def random_split(l, a_size):
    a, b = [], []
    m = len(l)
    which = ([a] * a_size) + ([b] * (m - a_size)) 
    random.shuffle(which)

    for array, sample in zip(which, l):
        array.append(sample)

    return a, b 
```

**编辑 3：**我对避免排序的担忧是，在最好的情况下它是`O(N*log(N))`. 应该有可能获得一个可扩展的功能`O(N)`不幸的是，到目前为止发布的解决方案都没有真正实现`O(N)`虽然，经过一番思考，我找到了一个可行的方法，并且在性能方面与@PedroWerneck 的答案相当。不过，我不能 100% 确定这真的是随机的。

```
def random_split(items, size):
  n = len(items)
  a, b = [], []
  for item in items:
    if size > 0 and random.random() < float(size)/n:
      b.append(item)
      size -= 1
    else:
      a.append(item)

    n -= 1

  return a, b 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T04:43:34.617

我相信不可能在拆分后进行限制和不排序，同时以比采样和重新排序更简单的方式保持随机性。

如果没有限制，它将与 RNG 一样随机，方法是遍历列表，并随机选择将值发送到的目标列表：

```
>>> import random
>>> x = range(20)
>>> a = []
>>> b = []
>>> for v in x:
...     random.choice((a, b)).append(v)
... 
>>> a
[0, 2, 3, 4, 6, 7, 10, 12, 15, 17]
>>> b
[1, 5, 8, 9, 11, 13, 14, 16, 18, 19] 
```

如果您可以处理一些偏差，您可以在达到限制时停止附加到第一个列表并仍然使用上面的解决方案。如果您要处理示例中的小列表，那么在您获得正确的第一个列表长度之前重试它应该不是什么大问题。

如果您希望它真的是随机的并且能够限制第一个列表的大小，那么您将不得不放弃并重新排序至少一个列表。我能想到的最接近单线实现的是：

```
>>> x = range(20)
>>> b = x[:]
>>> a = sorted([b.pop(b.index(random.choice(b))) for n in xrange(limit)])
>>> a
[0, 1, 5, 10, 15, 16, 17]
>>> b
[2, 3, 4, 6, 7, 8, 9, 11, 12, 13, 14, 18, 19] 
```

您必须对 a 进行排序，但 b 保留了顺序。

**编辑**

现在，您真的必须不惜一切代价避免重新订购吗？发布了许多简洁的解决方案，您的第二个解决方案非常好，但没有一个比以下更简单、更容易和更短：

```
def random_split(items, size):
    sample = set(random.sample(items, size))
    return sorted(sample), sorted(set(items) - sample) 
```

即使考虑到这两种排序操作，我认为在简单性和效率方面都很难击败它。考虑一下 Python 的 Timsort 是如何优化的，以及大多数其他方法如何必须为每个列表至少遍历 n 个项目一次。

如果你真的必须避免重新排序，我想这个也可以工作并且非常简单，但迭代两次：

```
def random_split(items, size):
    sample = set(random.sample(items, size))
    a = [x for x in items if x in sample]
    b = [x for x in items if x not in sample]
    return a, b 
```

这与 Hexparrot 的解决方案基本相同，使用 senderle 建议的 set(sample) 进行比较 O(1)，并删除冗余索引 sample 和 enumerate 调用。如果您只处理可散列对象，则不需要它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T06:27:57.543

这种方法怎么样。*来自索引的随机样本，如果 in*和*if not in* ，则从两个列表推导中返回两个列表：

```
def random_split(lst, size):
    import random
    samp = set(random.sample(xrange(len(lst)),size))
    return ([v for i,v in enumerate(lst) if i in samp],
            [v for i,v in enumerate(lst) if i not in samp])

x = ['abc', 'c', 'w', 't', '3']

print random_split(x,3) 
```

返回

```
(['abc', 't', '3'], ['c', 'w']) #random and retains order 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T22:24:57.817

好的，有很多有趣的建议，其中一个我无意中在这篇文章的先前版本中重复了。但是这里有两个没有以这种*确切*形式呈现的解决方案：

```
def random_split(seq, n):
    indices = set(random.sample(range(len(seq)), n))
    left_right = ([], [])
    for n, x in enumerate(seq):
        left_right[n not in indices].append(x)
    return left_right 
```

这只会遍历列表并产生列表的均匀随机分区，保持顺序。这是对六角鹦鹉建议的改进，这是我无意中复制的建议。您可以使用三元运算符和两个单独的列表，但这对我来说似乎有点干净。Using`enumerate`允许它处理不可散列的项目，以及具有重复项的序列。

```
def random_split(seq, n):
    rnd_bools = random.sample((0,) * n + (1,) * (len(seq) - n), len(seq))
    left_right = ([], [])
    for b, x in zip(rnd_bools, seq):
        left_right[b].append(x)
    return left_right 
```

这个我觉得*对*。这是 Jacob Eggers 对该问题的第二次编辑的改进。它并没有太大的不同，但是它不是对列表列表进行打乱，而是对布尔列表进行打乱。我认为乍一看更容易理解。它通过 using 避免了 2-line shuffle `random.sample`，它会生成一个副本；有些人可能更喜欢 2-line shuffle，它很容易被替换。

请注意，这两者都基于相同的基本原理：生成一个布尔序列并使用它们来索引一个`left_right`元组；通过预先生成布尔列表，第一个可以很容易地与第二个几乎相同。

最后，第二个解决方案可以转换成一个*非常丑陋*的“单线”，我不推荐 - 显然 - 但我在这里展示它以供您娱乐和嘲笑：

```
random_split = lambda seq, n: reduce(lambda a, b: (a[0] + ([b[1]] if not b[0] else []), a[1] + ([b[1]] if b[0] else [])), zip(random.sample((0,) * n + (1,) * (len(seq) - n), len(seq)), seq), ([], [])) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T05:03:57.990

这是您可以转换为函数的成绩单：

```
>>> a = [10,20,30,40,50,60]
>>> keep = sorted(random.sample(range(len(a)),3))
>>> keep
[0, 3, 4]
>>> ([a[i] for i in keep], [a[i] for i in range(len(a)) if i not in keep])
([10, 40, 50], [20, 30, 60]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T14:31:25.980

随机排序主题的变体......

```
def random_split(L, size):
    index = range(len(L))
    random.shuffle(index)
    return ([L[i] for i in sorted(index[:size])],
            [L[i] for i in sorted(index[size:])]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-21T05:29:19.290

我猜测您的 random_split 不应该给出重复元素。

如果您在原始列表中没有任何重复项，这将作为您在原始帖子中使用~~的单行，但它使用排序。~~这是一种非常简单但效率低下的方法：

```
import random

x = ['abc', 'c', 'w', 't', '3']

def random_split(x, n):
    k = x[:]
    random.shuffle(k)
    yield sorted(k[:n], key = x.index)
    yield sorted(k[n:], key = x.index)

a, b = random_split(x, 3) 
```

结果示例：

```
>>> a
['c', 'w', 't']
>>> b
['abc', '3'] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-21T16:27:40.013

这里有几行：

```
from random import sample
x = ['abc', 'c', 'w', 't', '3']
sample_size = len(x) // 2

sample_set = set(sample(x, sample_size))
split_list = [[x[i] for i in subset] for subset in (sorted(sample_set), sorted(set(x) - sample_set))] 
```

# visual-studio-2010 - 如何将字符串数组元素转换为字符串？

> ID：10256256
> 
> 赞同：0
> 
> 时间：2012-04-21T04:38:31.660
> 
> 标签：visual-studio-2010, c++-cli

我有一个字符串数组

```
public: array<String ^> ^ sss;
public:
    Form1(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
        array<String ^> ^ sss = gcnew array<String ^>(3);
        sss[0]="asdasd";
        sss[1]="s115ss";
        sss[2]="s115ss";
    } 
```

我需要将第一个元素显示到文本框中。

我用了

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {

             textBox2->Text = sss[0];
         } 
```

VC++ 给了`System.NullReferenceException`. 为什么？以及如何解决？

错误：

> test000.exe 中发生了“System.NullReferenceException”类型的未处理异常附加信息：对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:21:28.963

您的代码不应编译，除非您还有一个名为`sss`. 如果是这种情况，您希望在构造函数中设置该字段的值，而不是某些不相关的同名局部变量的值：

```
array<String ^> ^ sss;

public:
    Form1(void)
    {
        InitializeComponent();

        sss = gcnew array<String ^>(3);
        sss[0]="asdasd";
        sss[1]="s115ss";
        sss[2]="s115ss";
    } 
```

# c++ - OpenGL什么都不显示？

> ID：10256262
> 
> 赞同：1
> 
> 时间：2012-04-21T04:40:16.507
> 
> 标签：c++, winapi, opengl

我的问题是我的程序没有在屏幕上显示任何内容。

这是“main.cpp”代码：

```
#include "paStdAfx.h"
#include "OpenGL.h"

HDC hDC = NULL;
HGLRC hRC = NULL;
HWND hwnd = NULL;
HINSTANCE hInstance = GetModuleHandle(NULL);

const wchar_t* szClassName = _T("*project name :3*");

static std::wstring Titles[] = { 
    _T("*project name :3* - 100% free!"),
    _T("*project name :3* - 100% OpenGL!"),
    _T("*project name :3* - Not cross platform!"),
    _T("*project name :3* - Rawr"),
    _T("*project name :3* - Entirely C++!"),
    _T("*project name :3* - Woo, /r/gamedev!"),
    _T("*project name :3* - Platypi, platypi everywhere."),
    _T("*project name :3* - Nom nom nom"),
    _T("*project name :3* - Thanks, StackExchange!"),
    _T("*project name :3* - DRM Free!"),
    _T("*project name :3* - <3"),
    _T("*project name :3* - Minecraft is also fun!")
};

LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);
BOOL CreateOpenGLWindow(const wchar_t*, int, int, int);

OpenGL ogl;

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int iCmdShow)
{
    srand(time(NULL));
    const std::wstring wtt = Titles[rand() % 11];
    const wchar_t* WindowTitle = wtt.c_str();

    BOOL done = FALSE;
    MSG msg;

    if(!CreateOpenGLWindow(WindowTitle, 800, 600, 32)){ MessageBox(NULL, _T("Could not create window :("), _T("Error!"), MB_OK | MB_ICONERROR); exit(EXIT_FAILURE); }

    while(!done)
    {
        if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
        {
            if(msg.message == WM_QUIT)
                done = TRUE;
            else
            {
                TranslateMessage(&msg);
                DispatchMessage(&msg);
            }
        }
        else
        {
            ogl.RenderGLScene();
            SwapBuffers(hDC);
        }
    }

    ogl.KillOpenGL(hwnd, hDC, hRC);
    return 0;
}

BOOL CreateOpenGLWindow(const wchar_t* title, int width, int height, int bits)
{
    WNDCLASSEX wcx = {0};
    DWORD dwExStyle = WS_EX_APPWINDOW | WS_EX_WINDOWEDGE;
    DWORD dwStyle = WS_OVERLAPPED | WS_CAPTION | WS_SYSMENU | WS_MINIMIZEBOX;

    wcx.cbSize = sizeof(WNDCLASSEX);
    wcx.style = CS_OWNDC;
    wcx.lpfnWndProc = WndProc;
    wcx.cbClsExtra = 0;
    wcx.cbWndExtra = 0;
    wcx.hInstance = hInstance;
    wcx.hIcon = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_PROGRAMICON));
    wcx.hCursor = LoadCursor(NULL, IDC_ARROW);
    wcx.hbrBackground = (HBRUSH) (COLOR_WINDOW + 1);
    wcx.lpszClassName = szClassName;
    wcx.lpszMenuName = NULL;
    wcx.hIconSm = (HICON) LoadImage(hInstance, MAKEINTRESOURCE(IDI_PROGRAMICON), IMAGE_ICON, 16, 16, 0);

    if(!RegisterClassEx(&wcx)){ MessageBox(NULL, _T("Failed to register window!"), _T("Error! :("), MB_OK | MB_ICONERROR); exit(EXIT_FAILURE); }
    if(!(hwnd = CreateWindowEx(dwExStyle, szClassName, title, dwStyle, 200, 69, width, height, NULL, NULL, hInstance, NULL))){ MessageBox(NULL, _T("Failed to create the window!"), _T("Error! :("), MB_OK | MB_ICONERROR); exit(EXIT_FAILURE); }

    ogl.CreateOpenGLContext(hwnd, &hDC, &hRC);
    ogl.PrepareOpenGLScene();
    ogl.ResizeGLScene(width, height);

    ShowWindow(hwnd, SW_SHOW);
    SetForegroundWindow(hwnd);
    SetFocus(hwnd);

    return TRUE;
}

LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch(msg)
    {
        case WM_CREATE:
            ogl.ProgramIcon(hwnd);
            break;

        case WM_KEYDOWN:
            switch(wParam)
            {
                case VK_ESCAPE:
                    PostQuitMessage(0);
                    break;
            }
            break;

        case WM_CLOSE:
            PostQuitMessage(0);
            break;

        case WM_DESTROY:
            return 0;
    }

    return DefWindowProc(hwnd, msg, wParam, lParam);
} 
```

这是“OpenGL.cpp”代码：

```
#include "paStdAfx.h"
#include "OpenGL.h"

GLvoid OpenGL::CreateOpenGLContext(HWND hwnd, HDC* hDC, HGLRC* hRC)
{
    PIXELFORMATDESCRIPTOR pfd;
    HGLRC tempContext;

    memset(&pfd, 0, sizeof(PIXELFORMATDESCRIPTOR));
    pfd.nSize = sizeof(PIXELFORMATDESCRIPTOR);
    pfd.nVersion = 1;
    pfd.dwFlags = PFD_DOUBLEBUFFER | PFD_SUPPORT_OPENGL | PFD_DRAW_TO_WINDOW;
    pfd.iPixelType = PFD_TYPE_RGBA;
    pfd.cColorBits = 32;
    pfd.cDepthBits = 32;
    pfd.iLayerType = PFD_MAIN_PLANE;

    *hDC = GetDC(hwnd);

    int PixelFormat = ChoosePixelFormat(*hDC, &pfd);

    if(PixelFormat == 0){ MessageBox(NULL, _T("Could not choose pixel format :("), _T("Error!"), MB_OK | MB_ICONERROR); exit(EXIT_FAILURE); }
    if(!SetPixelFormat(*hDC, PixelFormat, &pfd)){ MessageBox(NULL, _T("Could not set pixel format :("), _T("Error!"), MB_OK | MB_ICONERROR); exit(3); }

    tempContext = wglCreateContext(*hDC);
    wglMakeCurrent(*hDC, tempContext);

    GLenum err = glewInit();
    if(GLEW_OK != err){ MessageBox(NULL, _T("Failed to initialize GLEW! :("), _T("Warning!"), MB_OK | MB_ICONINFORMATION); }

    int attribs[] = {
        WGL_CONTEXT_MAJOR_VERSION_ARB, 3,
        WGL_CONTEXT_MINOR_VERSION_ARB, 1,
        WGL_CONTEXT_FLAGS_ARB,
        WGL_CONTEXT_FORWARD_COMPATIBLE_BIT_ARB,
        0
    };

    if(!glewIsSupported("GL_VERSION_3_1")){ MessageBox(NULL, _T("OpenGL 3.1 not supported :("), _T("Warning!"), MB_OK | MB_ICONERROR); }

    if(wglewIsSupported("WGL_ARB_create_context") == 1)
    {
        *hRC = wglCreateContextAttribsARB(*hDC, 0, attribs);
        wglMakeCurrent(NULL, NULL);
        wglDeleteContext(tempContext);
        wglMakeCurrent(*hDC, *hRC);
    }
    else{ *hRC = tempContext; }

    const char* GLVersionString = (char*) glGetString(GL_VERSION);
    int OpenGLVersion[2];
    glGetIntegerv(GL_MAJOR_VERSION, &OpenGLVersion[0]);
    glGetIntegerv(GL_MINOR_VERSION, &OpenGLVersion[1]);
}

GLvoid OpenGL::PrepareOpenGLScene(GLvoid)
{
    glClearColor(0.0f, 0.6f, 1.0f, 0.0f);
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LEQUAL);
}

GLvoid OpenGL::RenderGLScene(GLvoid)
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();

    /* Begin OpenGL Rendering */

    /* End OpenGL Rendering */
}

GLvoid OpenGL::ResizeGLScene(int w, int h)
{
    float ratio = 1.0 * w / h;

    if(h == 0)
        h = 1;

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45.0f, ratio, 0.1f, 1000.0f);
    glViewport(0, 0, w, h);
}

GLvoid OpenGL::ProgramIcon(HWND hwnd)
{
    HICON hIcon, hIconSm;

    hIcon = (HICON) LoadImage(NULL, _T("data/icon.ico"), IMAGE_ICON, 32, 32, LR_LOADFROMFILE);
    if(hIcon)
        SendMessage(hwnd, WM_SETICON, ICON_BIG, (LPARAM)hIcon);
    else
        MessageBox(NULL, _T("Could not load the big icon! :("), _T("Error!"), MB_OK | MB_ICONERROR);

    //---------------------------------------------------------------------------------------------//

    hIconSm = (HICON) LoadImage(NULL, _T("data/icon.ico"), IMAGE_ICON, 16, 16, LR_LOADFROMFILE);
    if(hIconSm)
        SendMessage(hwnd, WM_SETICON, ICON_SMALL, (LPARAM)hIconSm);
    else
        MessageBox(NULL, _T("Could not load the small icon! :("), _T("Error!"), MB_OK | MB_ICONERROR);
}

GLvoid OpenGL::KillOpenGL(HWND hwnd, HDC hDC, HGLRC hRC)
{
    wglMakeCurrent(NULL, NULL);
    wglDeleteContext(hRC);
    ReleaseDC(hwnd, hDC);
} 
```

所有渲染代码都将进入 OpenGL.cpp 内的“RenderGLScene”函数中，但是当我放置代码以在屏幕上渲染三角形或正方形等基本事物时，什么也没有出现。我也尝试过修改“gluLookAt()”函数和“gluPerspective()”函数，因为我认为这些可能是我问题的根源。我已经尝试过 VBO 和使用 glBegin()/glEnd() 的旧方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T11:07:37.587

您创建了一个双缓冲上下文，但我没有看到您`wglSwapBuffers`在完成渲染后执行缓冲区交换 ()。如果没有缓冲区交换，您将看不到任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:09:56.313

你的渲染代码是什么样的。请记住，相机始终位于原点，这意味着您需要在负 z 坐标处绘制东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-29T21:29:52.920

如果您创建了核心上下文，则必须使用 VAO 完成所有绘图。检查 glError() 返回代码以查看 glDraw*() 报告的内容。

# c - gtk_container_get_children

> ID：10256264
> 
> 赞同：-1
> 
> 时间：2012-04-21T04:40:20.923
> 
> 标签：c

![在此处输入图像描述](../Images/0ce3aada89d91defaf17b4c1ba86ab2d.png)当电台列表打印在预设角色列表中并且您位于列表的开头或结尾时，您会看到许多空项目。我创建了大约 20 个电台的列表并尝试显示它们，转到列表的开头和结尾。我认为问题出在这段代码中：

```
static void add_button_clicked_cb(GtkWidget *widget, gpointer data)
{
    preset *ps;
    gchar *buffer;
    GtkTreeIter iter = {0};
    GtkAdjustment* v_scb;
    GtkTreePath *path = NULL;
    GList* menuitems;
    GtkWidget *menuitem;

    ps = malloc(sizeof(preset));
    ps->title = g_strdup(_("unnamed"));
    ps->freq = rint(gtk_adjustment_get_value(adj)) / STEPS;
    settings.presets = g_list_append(settings.presets, (gpointer) ps);
    buffer = g_strdup_printf("%.2f", ps->freq);

    gtk_list_store_append(list_store, &iter);
    gtk_list_store_set(list_store, &iter, 0, ps->title, 1, buffer, -1);

    g_free(buffer);
    gtk_tree_selection_unselect_all(selection);

    v_scb = gtk_scrollable_get_vadjustment(GTK_SCROLLABLE(list_view));
    gtk_adjustment_set_value(v_scb, gtk_adjustment_get_upper(v_scb));

    if (main_visible) {
        gtk_combo_box_text_append_text(GTK_COMBO_BOX_TEXT(preset_combo), ps->title);
        mom_ps = g_list_length(settings.presets) - 1;
        preset_combo_set_item(mom_ps);

        menuitems = gtk_container_get_children(GTK_CONTAINER(tray_menu));
        menuitem = gtk_menu_item_new_with_label(ps->title); 

        gtk_menu_shell_insert(GTK_MENU_SHELL(tray_menu), menuitem, mom_ps);     
        g_signal_connect(G_OBJECT(menuitem), "activate", (GCallback)preset_menuitem_activate_cb, (gpointer)mom_ps);
        gtk_widget_show(menuitem);
    }

    buffer = g_strdup_printf("%d", g_list_length(settings.presets) - 1);
    path = gtk_tree_path_new_from_string(buffer);
    g_free(buffer);
    gtk_tree_view_set_cursor(GTK_TREE_VIEW(list_view), path, NULL, FALSE);
    gtk_tree_path_free(path);
} 
```

你能建议我如何纠正它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T04:44:45.157

在 里面`if (main_visible)`，你有：

`menuitems = gtk_container_get_children(GTK_CONTAINER(tray_menu));`

也就是说，您将值设置`menuitems`为该函数调用的返回值。但是，您的其余代码实际上都没有对菜单项做任何事情。所以，编译器会给你这个警告。

修复它可能就像简单地摆脱菜单项一样简单：

`gtk_container_get_children(GTK_CONTAINER(tray_menu));`

那肯定会摆脱警告。但是您必须考虑一下：也许您*应该*对该函数调用的返回值做一些事情，而您没有对它做任何事情的原因是您忘记了（或其他事情）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T04:51:56.357

警告：变量“menuitems”已设置但未使用

用外行的话来说，您的编译器是这样说的：

伙计...您创建了一个具有一些属性的类，其中一个称为“menuitems”。这一切都很好，但是当您实际创建一个实例并分配所有变量时，您已经设置了“menuitems”，但您从未使用该变量对其进行任何操作。它只是坐在那里什么都不做。所以，伙计，这完全没有问题，因为我仍然可以运行你的程序，但我只是警告你'menuitems'变量正在做*** * all，因为你从来没有使用过变量本身。只是警告你兄弟：D除此之外，祝你有美好的一天

所以它只是一个警告，让你知道你有一个变量没有被用于任何特定原因，除了在那里存储一个值但从不访问它来做一些有用的事情。所以要么把它注释掉，因为你实际上并没有用它做任何事情......或者使用它，或者只是喜欢阅读警告，但它不会影响你的程序运行方式。

显示警告主要是为了让开发人员更加了解他们自己的代码和正在发生的事情。

# apache - 配置 Zend Framework 以忽略其他目录并在子目录中工作？

> ID：10256267
> 
> 赞同：0
> 
> 时间：2012-04-21T04:41:07.973
> 
> 标签：apache, zend-framework, mod-rewrite

我有一个默认的 Zend Framework 应用程序安装在`/var/www/html/zend_example`. 公共目录是：`/var/www/html/zend_example/public`.

我也有其他非 Zend 站点`/var/www/html`。例如，`/var/www/html/other_site`。

如何配置 ZF 站点以在其下工作`http://MYDOMAIN/zend_example`同时允许`http://MYDOMAIN/other_site`工作？

这是我的 apache 配置文件：

```
<VirtualHost *:80>
    DocumentRoot /var/www/html/zend_example/public
    SetEnv APPLICATION_ENV "development"
    <Directory /var/www/html/zend_example/public>
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

这是中的`.htaccess`文件`/var/www/html/zend_example/public`：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我只想让 ZF 开发站点启动并运行，同时还有其他站点可用（在相同的基本 URL 下）。

现在，所有请求都重定向（或重写？）到基本 URL (http://MYDOMAIN)。

谢谢！

**编辑#1**

我为两者编辑了虚拟主机`zend_example`，`other_site`因此每个`DocumentRoot`都设置为`/var/www/html`，而不是每个站点的子目录。这使得可以在各自的 URL 中访问这两个站点 - other_site:`http://MYDOMAIN/other_site`和 zend_example: `http://MYDOMAIN/zend_example/public`。现在，我相信目录`.htaccess`中的文件有问题`/var/www/html/zend_example/public`。我无法访问默认的“Zend” URL，例如`http://MYDOMAIN/zend_example/public/index/index`应该指向 IndexController。相反，我收到一个`404`错误。

**编辑#2**

如果我禁用除`zend_example`一个之外的所有 vhost，并且 zend_example vhost 已`DocumentRoot /var/www/html`设置，那么我可以在 下运行 Zend 站点`http://MYDOMAIN/zend_example/public`，包括特定的默认 Zend 路由，例如`http://MYDOMAIN/zend_example/public/index/index`. 当我启用另一个虚拟主机时，这会中断，尽管我仍然能够访问 Zend 的主索引页面`http://MYDOMAIN/zend_example/public`。

**编辑#3**

我最终玩弄了几个小时。**由于我的服务器是centos 6.0**，因此似乎需要进行一些独特的配置。我最终设置了一个 Debian 6.0 服务器，并且能够正确设置我的虚拟主机，包括 Zend 站点！不过，我仍然想回来解决 centos 上的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:59:08.813

您`ServerName`在虚拟主机中缺少该选项。此外，如果您不允许`followSymlinks`在目录声明中使用，您可能会遇到一些困难，请尝试以下操作：

```
//the ServerName is the name that would follow http:// (http://zend.example/module/controller/action)

<VirtualHost *:80>
    DocumentRoot /var/www/html/zend_example/public
    ServerName zend.example
    SetEnv APPLICATION_ENV "development"
    <Directory /var/www/html/zend_example/public>
        DirectoryIndex index.php
        Options Indexes FollowSymlinks
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

我不是 *nix 用户，所以我不确定您是否更改了类似于 Windows 主机文件的任何内容，但可能需要进行调查。（看起来您将不得不编辑主机文件，它应该在`/etc/hosts`添加一行，例如`127.0.0.1 zend.example`where zend.example = ServerName from your vhost）

PS如果您需要可用的本地主机，您可能必须为本地主机创建一个虚拟主机（如果您的所有虚拟主机都在一个文件中，则作为列表中的第一个）。我知道我必须在 Windows 上执行此操作。

# sass - 使用 compass 配置 zurb foundation-sass - 你如何让它工作并在项目中使用它？

> ID：10256274
> 
> 赞同：2
> 
> 时间：2012-04-21T04:42:29.573
> 
> 标签：sass, compass-sass, zurb-foundation

我是 sass 和 zurb 基础的新手（我过去曾通过 codekit 使用过 bootstrap/less）并且一直在尝试使用 sass 版本`foundation-sass`，但无法成功配置它 - 通过命令行使用 zurb 的 gem 或通过使用代码包。

**如果我配置 gem：**

1.  只要我通过以下方式加载所有基础组件，基础就可以工作`@import "ZURB-foundation";`

2.  但是，如果我尝试通过取消注释来单独加载组件，`@import "zurb/buttons";`我会看到错误：`"Undefined variable: "$default-color"`- 但是变量和 mixin 文件在哪里？

3.  此外，基础 scss 文件存放在哪里，以便您可以自定义设计，而无需使用 apps.scss 覆盖所有内容？

**如果我采取另一条路线并尝试使用 mac 应用程序代码包：**

1.  我收到 /zurb/ 目录不存在的错误（它不存在） - 这似乎与上面的第 3 点有关 - 当您创建一个新的 compass-foundation 项目时，似乎没有任何基础文件存在你的项目文件夹。

**如果我然后通过 github 下载 Foundation-sass：**

1.  所有文件都是 sass 格式而不是 scss

2.  尽管您可以在调用时修改 compass mixin，但是如何在不修改其原始文件的情况下修改 Foundation 的样式表文件 - 或者您应该编辑它们的文件？

我还没有找到任何我理解的关于所有东西应该如何组合在一起的信息，所以希望这里的人可能知道。

顺便说一句，我没有将它与 ruby​​ 项目一起使用 - 只是试图纯粹为前端工作进行设置。

任何帮助将非常感激。

干杯

本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T22:43:24.837

对于 Zurb Foundation 4，它就像首先导入“/foundation/foundation-global”文件一样简单

```
@import 'foundation/foundation-global';
@import 'foundation/components/type';
// etc 
```

[请参阅源评论中的此处](https://github.com/zurb/foundation/blob/master/scss/foundation.scss#L4)

重要的是要注意“基础/全球”与“基础-全球”不同。后者只是满足基本的依赖关系，而前者提供了一些最小的基本样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:07:01.543

我希望你现在已经解决了这个问题。如果没有，这是 gem 的解决方案。

`foundation.sass`从 Foundation 2.2.1 开始，通过注释行在 中找到的建议导入顺序有些错误。定义了许多颜色或混合`shared/*`，如果你`buttons/*`在加载这些之前加载，你最终会被指南针侮辱。

另一方面，部分`_ZURB-foundation.sass`（由 导入`@import "ZURB-foundation"`）以正确的顺序加载部分，解释了为什么在单独加载组件时只会出错。

试试这个顺序（SASS 语法，为 SCSS 添加引号和分号）：

```
@import zurb/shared
@import zurb/globals
@import zurb/typography
@import zurb/grid
@import zurb/buttons
@import zurb/ui
@import zurb/forms
@import zurb/orbit
@import zurb/reveal
@import zurb/mobile 
```

您可以使用`gem which ZURB-foundation`它来找出存储 gem 的目录。然而，直接自定义 Foundation 文件是一个非常糟糕的主意，因为您的更改可能会被进一步的更新删除。

# php - 生产服务器上的会话存在一个奇怪的问题

> ID：10256275
> 
> 赞同：-4
> 
> 时间：2012-04-21T04:42:30.897
> 
> 标签：php, session, load-balancing

我用硬编码的 PHP 构建了几个页面，在我的环境中一切正常，但是当我将此页面部署到生产服务器时，当用户访问我的一个页面时几乎没有问题，有时他会被重定向到主页，有时他会毫无问题地重定向到我的页面。

当用户没有具有适当值的会话时，就会发生这种情况。有两台服务器之间有负载平衡，我部署到他们两个，但这个问题仍然存在。

提前谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T05:01:41.647

当您有多个服务器进行负载平衡时，您需要将会话保存在数据库中，而不是物理保存。

[http://www.tonymarston.net/php-mysql/session-handler.html](http://www.tonymarston.net/php-mysql/session-handler.html)

上面的链接将指导您如何在数据库中保存会话。

# html - 带有数字键的 HTML 输入数组元素

> ID：10256277
> 
> 赞同：3
> 
> 时间：2012-04-21T04:42:35.757
> 
> 标签：html, forms

我试图有一些像这样的html：

```
<input name="list_item[0][name]" />
<input name="list_item[1][name]" />
<input name="list_item[2][name]" /> 
```

当我查看文档的原始来源时，我正确地看到了这些。但是当我在 chrome 或 firefox 中检查元素时，数字会加一！所以我看到：

```
<input name="list_item[1][name]" />
<input name="list_item[2][name]" />
<input name="list_item[3][name]" /> 
```

当我检查提交的数据时，密钥从 1 开始，而不是 0，这导致我的代码行为不端：

```
'list_item' => 
    array
      1 => 
        array
          'name' => string 'title 1' (length=7)
      2 => 
        array
          'name' => string 'title 2' (length=7)
      3 => 
        array
          'name' => string '' (length=0) 
```

为什么会这样？`O_o`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:49:51.193

我不知道究竟是什么原因造成的，但似乎是一些 js ;-)

# zend-framework - 如何自动加载 Zend Framework 模块模型？

> ID：10256280
> 
> 赞同：1
> 
> 时间：2012-04-21T04:43:00.323
> 
> 标签：zend-framework

我正在 Zend Framework 中构建一个新的 CMS，我对 ZF 的了解不多。客户端需要两个部分，称为 Admin 和 FE。因此，我将我的应用程序结构构建如下。

```
- 地点
-  应用
---- 配置
---- 布局
---- 模块
-  -  -  -  默认
------------ 控制器
-  -  -  -  -  -  形式
-  -  -  -  -  -  楷模
------------ 意见
------------ Bootstrap.php
-  -  -  -  行政
------------ 控制器
-  -  -  -  -  -  形式
-  -  -  -  -  -  楷模
------------ 意见
------------ Bootstrap.php
---- 引导程序.php
-  上市
-  图书馆
-- 索引.php

```

当我访问[http://site](http://site)或[http://site/admin 之](http://site/admin)类的站点时，我的结构工作正常，并且正在加载布局和控制器。

我的问题是 1.) 我将如何在模块中自动加载我的模型。在模型特定的引导文件中，我添加了以下代码。但它不起作用。

```
class Admin_Bootstrap extends Zend_Application_Module_Bootstrap 
{
    protected function _initAutoload()
    {
        $autoloader = new Zend_Application_Module_Autoloader(array(
            'basePath' => APPLICATION_PATH.'/modules/admin/',
            'namespace' => '',
            'resourceTypes' => array(
                'form' => array(
                    'path' => 'forms/',
                    'namespace' => 'Form_',
                ),
                'model' => array(
                    'path' => 'models/',
                    'namespace' => 'CPModel_'
                )
            ),
        ));
        return $autoloader;
    }
} 
```

2.) 我将如何为不同的模块使用不同的布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T08:00:47.333

这里有两个问题：

1.  自动加载模型
2.  特定于模块的布局

对于自动加载模型，首先确保您的模块引导类扩展`Zend_Application_Module_Bootstrap`。这将注册一个包含映射的资源自动加载器，以便`Admin_Model_User`可以将命名的模型类存储在文件中`application/modules/admin/models/User.php`（注意路径名中的复数 model* *s* *）。对于您上面描述的用法，您似乎不需要自己定义任何此类映射。

默认模块有一些技巧。IIRC，默认模块使用 appnamespace，通常默认为`Application_`. 因此，例如，默认模块中的用户模型将被命名`Application_Model_User`并存储在文件中`application/modules/default/models/User.php`。[如果这不起作用，请尝试命名`Default_Model_User`]

[但是，如果您真的坚持为您的管理模块使用一个空的 appnamespace 并为您的模型添加一个 CPModel 前缀 - 正如您的示例所暗示的那样 - 那么其中一些会发生变化。]

结果是，由于这些文件夹中的大多数不在 include_path 上，因此需要在某些时候告诉系统哪些类前缀与哪些目录关联/映射。

对于特定于模块的布局，通常我会创建一个实现挂钩的[前端控制器插件。](http://devzone.zend.com/1224/front-controller-plugins-in-zend-framework/)`preDispatch()`如果您将布局保持在 中的顶层`application/layouts/scripts/`，那么您的插件可能类似于以下存储在中的内容`application/plugins/Layout.php`：

```
class Application_Plugin_Layout extends Zend_Controller_Plugin_Abstract
{

    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        Zend_Layout::getMvcInstance()->setLayout($request->getModuleName());
    }
} 
```

`Bootstrap`通过以下方式在您的应用程序级别注册您的插件`applications/config/application.ini`：

```
resources.frontController.plugin.layout = "Application_Plugin_Layout" 
```

或在应用程序`Bootstrap`级别`application/Bootstrap.php`：

```
protected function _initPlugins()
{
    $this->bootstrap('frontController');
    $front = $this->getResource('frontController');
    $front->registerPlugin(new Application_Plugin_Layout());
} 
```

然后，例如，您的管理布局可以存储在`application/layouts/scripts/admin.phtml`.

# excel - 我想按原样导入 Excel 工作表（即列名与 excelsheet 相同）？

> ID：10256283
> 
> 赞同：1
> 
> 时间：2012-04-21T04:43:52.510
> 
> 标签：excel, postgresql, postgis

嗨，我是 postgreSql 的新手。我想导入带有列名/标题的 excel 表，因为 excel 表有近 80-100 列，我无法创建具有如此大量列的表，然后将相同的数据复制到表中。所以我想要另一种方式来将数据与列名一起导入表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T00:52:19.617

创建到 PostgreSQL 数据库的 ODBC 连接。您需要一个 PostgreSQL ODBC 数据库驱动程序，该驱动程序易于下载和安装。另存为用户 DSN 以供将来使用。

要处理您的 Excel 数据，请将 Excel 电子表格导入 MS Access。如果数据看起来不错并且“类似于数据库”，那么您很好，否则可能需要调整电子表格以正确导入。

使用最终的 MS Access 表，右键单击该表并导出到 ODBC 数据库，选择您在上面创建的 DSN，您可以在“机器数据源”选项卡中找到它。

# haskell - 如何从 Haskell 的列表中删除一个元素？

> ID：10256292
> 
> 赞同：3
> 
> 时间：2012-04-21T04:45:27.640
> 
> 标签：haskell

我正在尝试编写的函数应该从任何类型的给定列表中删除给定索引处的元素。

这是我已经做的：

```
 delAtIdx :: [x] -> Int -> [x]

           delAtIdx x y = let g = take y x
                          in let h = reverse x
                          in let b = take (((length x) - y) - 1) h
                          in let j = g ++ (reverse b)
                          in j 
```

它是否正确？有人可以提出另一种方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T04:56:43.070

用 来定义它要简单得多，它在[`splitAt`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:splitAt)给定索引之前拆分列表。然后，您只需要从第二部分中移除第一个元素并将它们粘在一起即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T04:54:23.343

`reverse`如果你可以在haskell中，你可以避免连接和连接。看起来它对我有用，但我对此并不完全确定。

但是，要回答“真正的”问题：是的，还有另一种（更简单）的方法。基本上，您应该朝着与在 haskell 中工作时一样的方向看：递归。看看你是否可以制作这个函数的递归版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-13T04:52:41.487

超级简单（我认为）：

```
removeIndex [] 0 = error "Cannot remove from empty array"
removeIndex xs n = fst notGlued ++ snd notGlued
    where notGlued = (take (n-1) xs, drop n xs) 
```

我是一个完全的 Haskell 菜鸟，所以如果这是错误的，请解释原因。

我通过阅读 splitAt 的定义发现了这一点。根据 Hoogle 的说法，“它相当于 (take n xs, drop n xs)”。这让我想，如果我们不多取一个号码，那么如果我们重新加入它，它基本上就会被删除。

这是我引用的文章[Hoogle 链接](https://hackage.haskell.org/package/base-4.10.1.0/docs/Prelude.html#v:splitAt)

这是它运行的测试：

```
*Main> removeIndex [0..10] 4
[0,1,2,4,5,6,7,8,9,10] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-05T07:19:47.217

```
deleteAt :: Int -> [a] -> [a]
deleteAt 0 (x:xs) = xs
deleteAt n (x:xs) | n >= 0 = x : (deleteAt (n-1) xs)
deleteAt _ _ = error "index out of range" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-21T10:05:01.103

这是我的解决方案：

```
removeAt xs n     | null xs   = []
removeAt (x:xs) n | n == 0    = removeAt xs (n-1)
                  | otherwise = x : removeAt xs (n-1) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-16T09:11:39.707

```
remove_temp num l i | elem num (take i l) == True = i
                    | otherwise  = remove_temp num l (i+1)

remove num l = (take (index-1) l) ++ (drop index l)
               where index = remove_temp num l 1 
```

使用数字和列表作为参数调用“删除”函数。你会得到一个没有那个数字的列表作为输出。在上面的代码中，remove_temp 函数返回列表中数字所在的索引。然后使用前奏的内置'take'和'drop'功能删除数字之前和数字之后的列表。最后，完成这两个列表的连接，给出一个没有输入数字的列表。

# asp.net-mvc-3 - 在表单中添加到模型，然后重新显示表单以添加更多

> ID：10256294
> 
> 赞同：0
> 
> 时间：2012-04-21T04:45:43.633
> 
> 标签：asp.net-mvc-3

我是 MVC3 的新手，但到目前为止，我已经设法与我的代码相处得很好。

现在，我想做一个简单的表单，允许用户输入一个文本字符串，代表员工的姓名。然后，我希望将此表单提交并存储在我的模型中，以某种列表的形式。然后应该重新显示表单，并使用 for-each 循环写出我已经添加的名称。当我完成并继续前进时，我需要将此信息存储到我的数据库中。

我想不通的是如何存储这些临时信息，直到我将它推送到我的数据库中。每次提交时都推送我可以做到，但这让我很头疼。

希望你们看到我正在尝试做的事情，并有一个很棒的解决方案。:)

这是我一直在尝试做的简化版本：

**模型**

```
public class OrderModel
{
    public virtual ICollection<Employees> EmployeesList { get; set; }

    public virtual Employees Employees { get; set; }
}

public class Employees
{
    [Key]
    public int ID { get; set; }

    public string Name { get; set; }
} 
```

**看法**

```
@model OrderModel
@{
    if (Model.EmployeesList != null)
    {
        foreach (var c in Model.EmployeesList)
        {
            @c.Name<br />
        }
    }
}
@using(Html.BeginForm())
{
    @Html.TextBoxFor(m => m.Employees.Name)

    <input type="submit" value="Add"/>
} 
```

**控制器**

```
[HttpPost]
public ActionResult Index(OrderModel model)
{
    model.EmployeesList.Add(model.Employees);
    // This line gives me the error: "System.NullReferenceException: Object reference not set to an instance of an object."

    return View(model);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:14:52.177

我认为您应该通过将员工列表刻录到页面中来处理此问题。现在，你没有给你的表单任何识别列表的方式。

在名为 Employees 的 EditorTemplates 文件中：

```
@model Employees

@Html.HiddenFor(m => m.ID)
@Html.HiddenFor(m => m.Name); 
```

在您看来：

```
@using(Html.BeginForm())
{
    @Html.EditorFor(m => m.EmployeesList)
    @Html.TextBoxFor(m => m.Employees.Name)

    <input type="submit" value="Add"/>
}

[HttpPost]
public ActionResult Index(OrderModel model)
{
   if (model.EmployeesList == null)
      model.EmployeesList = new List<Employees>();

    model.EmployeesList.Add(model.Employees);
    return View(model);
} 
```

作为此方法的额外好处，添加 ajax 很容易，因此用户在添加新员工时不必离开页面（您可能只需使用 javascript 插入新的隐藏值并避免使用 ajax。这取决于如果您除了在您的帖子中添加到您的列表之外还有其他任何操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T04:54:43.113

我认为这对**TempData**很有用。您可以在其中存储任何内容，有点像缓存，但与缓存不同的是，它只会持续到下一个请求。要实现这一点，请像这样更改操作方法（仅示例）：

```
[HttpPost]
public ActionResult Index(OrderModel model)
{
    dynamic existingItems = TempData["existing"];
    if (existingItems != null) 
    {
        foreach (Employee empl in existingItems)
            model.EmployeesList.Add(empl );
    }
    model.EmployeesList.Add(model.Employees);
    TempData["existing"] = model.EmployeesList;
    return View(model);
} 
```

# c++ - 快速 C++ 类混淆：这一行是什么意思？

> ID：10256298
> 
> 赞同：1
> 
> 时间：2012-04-21T04:46:57.143
> 
> 标签：c++, class

我正在将一些 C++ 移植到 Java，并遇到以下简写..但不知道这意味着什么，甚至不知道如何进行谷歌搜索：

```
class mailbox {
public:
 mailbox(): sent(0),received(0),msg(0) { } 
```

我不明白邮箱（）之后的方法调用（？）表示什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T04:48:30.690

这是成员初始化语法。它将数据成员初始化为在构造函数主体开始之前指定的值。

这是在 C++11 之前初始化非静态常量数据成员的唯一方法，并且比在构造函数的主体中初始化更快。

就像是

```
mailbox() {
    sent = 0;
    received = 0;
    msg = 0;
} 
```

除了更快，它也可以在 const 成员上执行。事实上，虽然它不提供对数据成员执行检查的能力，但您仍然可以使用它：

```
mailbox (Foo sent, Bar received, Foobar msg) : sent (0), received (0), msg (0) { //default values
    if (!setSent (sent)) 
        cout << "Error setting sent; sent is 0 instead."; //since we initialized it to 0 before
    //likewise for other members...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T04:56:52.937

假设 sent、received 和 msg 都是 int，则等价于：

```
mailbox() {
    sent = 0;
    received = 0;
    msg = 0;
} 
```

存在这种语法是因为，与所有对象都是指针的 Java 不同，在 C++ 中，您可以拥有其类型没有默认构造函数的成员变量。举个例子：

```
class Foo {
public:
    Foo(int x);
};

class Bar {
public:
    Bar(int x) { // ERROR, Foo does not have a default constructor
        foo = Foo(x);
    }

    Bar() : Foo(0) {} // OK, using Foo(int) instead of Foo()

private:
    Foo foo;
}; 
```

请注意，在示例中，即使 Foo 具有默认构造函数， Bar(int) 也会构造 Foo 两次。

# c - 总线错误：10\. C 代码，malloc 示例

> ID：10256301
> 
> 赞同：3
> 
> 时间：2012-04-21T04:47:17.717
> 
> 标签：c, bus, memory-segmentation

当我尝试编译以下 C 代码时，出现总线错误。我猜这与我调用 memcpy 的方式有关，但我无法弄清楚。任何帮助将不胜感激！

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int main()
{

    char *p = (char*)malloc(sizeof(char)*11); 
    // Assign some value to p
    p = "hello";

    char *name = (char*)malloc(sizeof(char)*11);
    // Assign some value to name
    name = "Bye";

    memcpy (p,name,sizeof(char)*10); // Problem begins here
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T04:50:16.500

这里`p`指向您分配后的字符串文字，而不是您分配的内存！

然后你尝试用`memcpy`.

许多 C 编译器在只读内存中分配字符串文字，因此会出现总线错误。

要解决您的问题，您应该将字符 h、e、l、l 和 o*复制*`p`到您在 的第一行分配的空间中`main`，使用`strncpy`. 这一直`p`指向您自己分配的内存；后者`memcpy`会很好（当然前提是你没有溢出缓冲区）。

请注意，通常当您直接分配给字符串变量时，您正在使变量指向不同的内存地址。在您的代码中，您已经为几个字符串分配了空间，但是当您将字符串文字分配给变量时，您正在更改它们指向的位置，从而导致内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T08:16:53.280

在您的代码中，`p = "hello"`返回`"hello"`一个指向字符串的指针，`hello`并且 hello 不能更改。你也使用`p = "hello"`手段`p`指向这个字符串。所以当你试图改变它时，你会得到一个错误。正确的方法如下： `char a[] = "hello";` 或

```
char *a = malloc(sizeof(char)*11); /*cast is not good*/
strcpy (a, "hello"); 
```

顺便说一句，`malloc`最好不要使用 cast like `(char *)`or `(int *)`。

# jquery - 是什么导致布局中断？尝试制作水平布局网站

> ID：10256310
> 
> 赞同：0
> 
> 时间：2012-04-21T04:49:27.857
> 
> 标签：jquery, html, css

我正在尝试按照本指南创建水平布局：[http](http://www.queness.com/post/356/create-a-vertical-horizontal-and-diagonal-sliding-content-website-with-jquery) ://www.queness.com/post/356/create-a-vertical-horizo​​ntal-and-diagonal-sliding-content-website-with-jquery现在它混合使用 html、css 和 jquery 来实现平滑滚动。我正在使用该插件，它工作正常，但是，布局到处都是，即使我已经遵循了布局的基本数学。

我的布局有 8 个面板，因此 #mask 容器的宽度是 8 个面板 * 100% = 800%。之后，包含项目内容的容器的宽度为 100% / n 个面板 = 14.5%。然而，正如我刚才所说的那样，布局到处都是可怕的，我认为我没有错过任何指示。我认为这可能是在 css 中完成的 h1 功能区导致布局中断，但我不认为它是因为我已经删除它并且它看起来仍然很糟糕。我对此完全感到困惑，所以我向你们寻求解决这个问题的指导。

有什么想法可以解决这个问题吗？[http://sekhu.net/charlie/index.php](http://sekhu.net/charlie/index.php)是我遇到问题的网站。我已经确保 html 是有效的，并且我正在使用记事本作为 html/css。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:15:29.433

有这么多未封闭的 div 和 p 标签在这里造成了很大的混乱

请看我的小提琴我放了你的基本代码只是为了说清楚。

jsfiddle：http: [//jsfiddle.net/ks5r7/5/](http://jsfiddle.net/ks5r7/5/)

jsfiddle 演示：http: [//jsfiddle.net/ks5r7/5/embedded/result/](http://jsfiddle.net/ks5r7/5/embedded/result/)

你现在必须找到的所有未封闭的 div 和 p 标签一切都像魅力一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T05:19:11.710

看起来您正在更改我们正在查看的页面，所以我将停止故障排除。

我在故障排除时看到的内容：

*   div“#mask”的宽度错误。这是我的浏览器宽度 X 3，而不是浏览器宽度 X 8。现在我无法重新创建它。
*   我注意到演示网站做了：

    ```
    $('#wrapper').scrollTo($(this).attr('href'), 800); 
    ```

并且您正在复制相同的代码。我想知道，因为演示站点使用的 DIV 是您站点宽度的一半，也许您可​​以将其更改为：

```
 $('#wrapper').scrollTo($(this).attr('href'), 1600); 
```

这些是我最初的印象，但由于网站在我研究时发生了变化，我将在这里停下来。

# javascript - 表单验证

> ID：10256311
> 
> 赞同：1
> 
> 时间：2012-04-21T04:49:43.707
> 
> 标签：javascript

JS：

```
validate document.forms();

if (document.forms[0].userAge.value == "") {
    alert("Age field cannot be empty.");
     return false;
}

if (document.forms[0].userAge.value < 5) {
  alert("Your age input is not correct.");
  return false;
}

if (userage == isNumber) {
  alert("Your age input is not correct.");
  return false;
}

alert("Name and Age are valid.");
return true; 
```

HTML：

```
 <label for="userAge">Age:</label>

    <input type="text" name="userAge" id="userAge" />

 </div> 
```

如果这是我拥有的代码，我将如何制作它，以便如果有人在年龄文本框中输入非数字，则会出现警报“您的输入不正确”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:24:04.817

编辑：我最初建议使用 parseInt 和 isNaN() 来测试输入是否为非数字。好吧，似乎使用正则表达式不仅可以正确格式化像“4a”这样的案例，而且在许多情况下它实际上更快（惊喜！）。

我用一个按钮模拟了一些 HTML 来说明。

HTML：

```
<form>
    <label for="userAge">Age:</label>
    <input type="text" name="userAge" id="userAge" />
    <input type="button" id="test" name="test" value="Test" />
</form> 
```

JavaScript：

```
function validateForm() {

    // get the input value once and use a variable
    // this makes the rest of the code more readable
    // and has a small performance benefit in retrieving
    // the input value once
    var userAge = document.forms[0].userAge.value;

    // is it blank?
    if (userAge === "") {
        alert("Age field cannot be empty.")
        return false;
    }

    // is it a valid number? testing for positive integers
    if (!userAge.match(/^\d+$/)) {
        alert("Your age input is not correct.")
        return false;
    }

    // you could also test parseInt(userAge, 10) < 5
    if (userAge < 5) {
        alert("Your age input is not correct.")
        return false;
    }

    alert("Name and Age are valid.");
    return true;
}

// trigger validateForm() however you want, I did this as an example
document.getElementById("test").onclick = validateForm; 
```

​这里有一个 jsFiddle 来演示：http: [//jsfiddle.net/willslab/m2spX/6/](http://jsfiddle.net/willslab/m2spX/6/)

关于正则表达式：如果 userAge 仅包含正整数，则 userAge.match(/^\d+$/) 返回 true。开头 / 和结尾 / 表示正则表达式文字。\d 仅表示 ASCII 数字。+ 匹配前一个模式的一次或多次出现（在这种情况下为数字）。^ 表示从头开始匹配，$ 表示匹配到结束。所以 /^\d+$/ 是一个正则表达式文字，从头到尾只匹配 ASCII 数字！

另请注意，您可以使用 OR 运算符 (||) 组合最后两个 if 语句。如果你想给每个人一个唯一的验证信息，我把这些隔离了。

它看起来像这样：

```
if (!userAge.match(/^\d+$/) || userAge < 5) {
    alert("Your age input is not correct.")
    return false;
} 
```

随意询问有关代码的任何问题，我会解释。我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T05:10:57.350

试试这个解决方案

```
 <script language="javascript">
   function validate(){
  alert("validate ..."+document.forms[0].userAge.value);
  if (document.forms[0].userAge.value == ""){ 
    alert("Age field cannot be empty.");
    return false;
  }

  if (document.forms[0].userAge.value<5){
    alert("Your age input is not correct.");
    return false;
  }
   //provide a way to validate if its numeric number..maybe using regexp
   //if (isNumeric(userAge)){
   //   alert("Your age input is not correct.");
   //   return false;
   //}
   //alert"Name and Age are valid."
   return true;
  }
    </script> 
```

HTML 应该是

```
<form>
<div><label for="userAge">Age:</label>
<input type="text" name="userAge" id="userAge" onblur="validate()"/>
</div>
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T04:56:44.130

我建议您使用以下 Javascript，它不允许在文本字段中使用非数字字符。

```
function isNumberKey(evt)
{
    var charCode = (evt.which) ? evt.which : event.keyCode;
    if (charCode > 31 && (charCode < 48 || charCode > 57))
    {
        return false;
    }
    return true;
}

<input type="text" id="userAge" name="userAge" onkeypress="return isNumberKey(event);"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T13:50:45.223

**使用下面的代码**

```
 if(isNaN(document.forms[0].userAge.value)){
     alert('This is not a number');

  } 
```

# resources - 哪些 OpenCourseWare 课程使用 Lua？

> ID：10256313
> 
> 赞同：1
> 
> 时间：2012-04-21T04:50:07.407
> 
> 标签：resources, lua

我真的很想使用 OpenCourseWare 视频来学习如何成为一名更好的程序员，但我只找到了使用 Python、JAVA 和 Lisp 的大学的视频。有没有使用 Lua 作为主要语言来教授编程基础或方法的大学课程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:31:56.377

为什么不试试 youtube？

[http://www.youtube.com/results?search_query=lua+programming+tutorial](http://www.youtube.com/results?search_query=lua+programming+tutorial)

# python - Python C 扩展 - 为什么可调用的 C 函数必须接受参数并返回 PyObject *

> ID：10256315
> 
> 赞同：7
> 
> 时间：2012-04-21T04:50:14.673
> 
> 标签：python, c, python-c-extension

我刚刚开始使用 Python C 扩展，并且很好奇为什么可从 Python 调用的 C 函数必须采用 2 个 PyObject* 参数并返回一个 PyObject*。我写了以下“Hello World”扩展：

```
#include <Python.h>

static PyObject *
hello_world(PyObject *self, PyObject *noargs)
{
   printf("Hello World\n");
   return Py_BuildValue("");
}

// Module functions table.

static PyMethodDef
module_functions[] = {
    { "hello_world", hello_world, METH_NOARGS, "hello world method" },
    { NULL }
};

// This function is called to initialize the module.
PyMODINIT_FUNC
inittesty2(void)
{
    Py_InitModule("testy2", module_functions);
} 
```

为什么我不能（尤其是使用 METH_NOARGS）使用以下 hello_world 方法：

```
static void
hello_world()
{
   printf("Hello World\n");
} 
```

?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T10:04:28.587

`PyObject`关于各种指针，有几件事要说。

1.  需要作为**返回类型**的一种用于**异常处理机制。**具体来说，如果你的函数返回一个空指针，Python 解释器会抛出一个异常。（您应该只在调用其中一个`PyErr_..`函数来设置特定异常之后才这样做。）

    这也意味着当你不想抛出异常时，你**必须返回一个指向某个实数的指针`PyObject`。**如果您的函数没有特别应该返回的内容，只需返回`Py_None`（最好使用`Py_RETURN_NONE`宏来获取正确的引用计数）或“true”（使用`Py_RETURN_TRUE`）。

2.  第**一个参数**，`PyObject *self`指向调用函数的对象，或者它所属的模块实例。请注意，**您定义的每个函数要么是类方法，要么是模块方法。**没有完全独立的功能。

3.  第二**个**参数`PyObject *args`指向函数参数（可能是一个元组或多个参数的列表）。你指出一个不带任何参数的函数不应该需要这个是正确的——而且，据我所知，你是对的。您不必定义它；您可以简单地将函数定义为

    ```
    static PyObject *PyMyClass_MyFunc(PyObject *self) {
      /* ..do something.. */
      Py_RETURN_TRUE;
    } 
    ```

    当您将其放入您定义的数据类型时，您仍然必须将其**转换`PyCFunction`**`PyMethodDef`为，但我相信只要您使用该`METH_NOARGS`标志，转换是安全的。**但请注意以下评论以了解可能存在的风险。**

4.  最后，一个函数实际上可能有**第三个参数**，如下所示：

    ```
    static PyObject *PyMyClass_Func(PyObject *self, PyObject *args, PyObject *kwds)
    {
      /*...*/
    } 
    ```

    第三个参数用于*命名的可选*参数。在这种情况下，您也必须**将函数指针强制转换为`PyCFunction`**`METH_KEYWORDS`，但如果您在方法表中为您的函数设置正确的标志 ( )，这也是安全的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T10:07:22.513

模块级函数的第一个参数是模块对象。在 C 中定义类时（其中的`PyMethodDef`方法使用相同的结构），第一个参数是实例（类似于`self`Python 中的）。

使用时`METH_NOARGS`，Python 将`NULL`作为第二个参数传递。他们可以将其转换为带有一个参数的函数，但我想他们认为不需要它。

返回值很容易解释。每个 Python 函数都有一个返回值。如果您没有`return`在 Python 中显式使用，该函数将返回`None`.

当然，在 C 中你必须明确返回值，所以如果你不使用它，你必须`None`自己返回。Python为此提供了一个宏：

```
Py_RETURN_NONE; 
```

或者，您可以自己访问全局`None`实例：

```
Py_INCREF(Py_None);
return Py_None; 
```

但宏更容易使用。

你可以认为 return`NULL`应该等价于`None`but`NULL`用于表示函数引发了异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T05:18:46.273

因为 Python 函数，即使只是打印到标准输出的微不足道的函数，也不仅仅是 C 函数的包装器。

在最简单的情况下，想想 Python 中的自省工具。Python 函数是一个完整的对象，您可以查询：

```
>>> def hello():
...     print 'hello'
... 
>>> dir(hello)
['__call__', '__class__', '__closure__', '__code__', '__defaults__', '__delattr__', '__dict__', '__doc__', '__format__', '__get__', '__getattribute__', '__globals__', '__hash__', '__init__', '__module__', '__name__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'func_closure', 'func_code', 'func_defaults', 'func_dict', 'func_doc', 'func_globals', 'func_name'] 
```

您当然可以想象一个仅包装 C 函数的扩展工具。查看[SWIG](http://www.swig.org/tutorial.html)，它可以让您为许多脚本语言（包括 Python）编写扩展。因为它是为了最小的公分母，它会让你包装一个像你的函数`hello_world`，但当然你也失去了很多权力。

# android - 构建 Android SDK：仅创建一个 Android 目标

> ID：10256318
> 
> 赞同：6
> 
> 时间：2012-04-21T04:51:00.140
> 
> 标签：android, android-emulator, makefile

编辑：我知道我可以轻松下载 SDK，但我特别想自己构建一切。我试图更多地了解构建过程。

我使用 repo 下载了 AOSP 源代码。多个地方指导我构建SDK如下：

```
$ cd $AOSP_ROOT 
$ . build/envsetup.sh
$ lunch sdk-eng
$ make sdk 
```

这很好用，我得到了一个带有 SDK 的 zip 文件，并且模拟器可以工作。但是，生成的唯一 Android 目标是最新的，例如

```
$ cd $SDK_ROOT/platforms
$ ls
android-4.0.4.0.4.0.4 
```

是我所看到的。如何获取其他 Android 目标？我是否必须使用 repo 来切换我所在的 Android 分支、构建*整个*SDK 并复制出适当的目标文件？有没有一些更简单的方法，比如可以实现这一目标的不同的 make 目标？我可以请求构建 SDK 并且所有目标都可用吗？我应该只下载一个非本地编译的 SDK 并将目标复制到我的 SDK_ROOT/platforms 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T15:20:34.933

您需要使用 repo 工具切换到相应的分支并为此分支构建您的 SDK。我认为不可能同时为所有分支构建 SDK。

# iphone - 在 iOS 上，为什么绘图没有出现在以下代码中？

> ID：10256319
> 
> 赞同：0
> 
> 时间：2012-04-21T04:51:09.197
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ipad

我正在尝试绘制一个用户在 iPad 上移动手指的矩形：

ViewController接口：

```
@interface ViewController : UIViewController {
    NSMutableArray *paths;
} 
```

执行：

```
-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    for (UITouch *touch in touches) {
        CGPoint location = [touch locationInView:self.view];

        CGRect aRectangle = CGRectMake(location.x, location.y, 40, 40);
        UIBezierPath *path = [UIBezierPath bezierPathWithRect:aRectangle];

        path = [UIBezierPath bezierPathWithOvalInRect:aRectangle];

        [paths addObject:path];       
    }
}

- (void)drawRect:(CGRect)rect {
    for (UIBezierPath *path in paths) {
        [path fill];
    }
} 
```

但什么都不会在屏幕上绘制......我想也许我没有告诉视图刷新自己并调用`drawRect`，但我尝试进入 iPad 的主屏幕并重新进入应用程序，但仍然没有显示？

（我打算使用一个点数组，但由于`CGPoint`不是一个会保留的对象，所以它不能添加到可变数组中，并且它会在本地范围结束后消失。它怎么可能是一个数组积分代替？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:55:33.593

`drawRect`是一种方法，`UIView`但不是`UIViewController`。如果您使用 Interface Builder 构建 UI 结构，您将需要创建自定义`UIView`子类并在其中覆盖`drawRect`，然后将自定义视图类绑定到 XIB/NIB 中的视图。

请参阅[iPhone：为什么不调用 drawRect？](https://stackoverflow.com/q/1053761/1241690)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T05:02:44.087

首先，您应该在 a`UIView`而不是 a中实现这些方法`UIViewController`。

* * *

其次，永远不要自己调用drawRect！

> 我想也许我没有告诉视图刷新自己并调用 drawRect

如果您希望您的视图重绘下一个绘图周期/帧，请在其上调用 -setNeedsDisplay。

# c++ - 如何将指向对象的指针传递给函数？C++

> ID：10256322
> 
> 赞同：0
> 
> 时间：2012-04-21T04:51:34.647
> 
> 标签：c++, object, reference

假设在 main() 中，我从名为 TheBuilder 的类创建了一个名为 BOB 的对象指针，我这样做是这样的

```
TheBuilder *BOB = new TheBuilder(); 
```

现在假设我有一个函数，我想将它传递给 main 中的 helloWorld。如何将此 BOB 指针传递给 TheBuilder 对象？如何调用它，helloWorld() 的参数列表是什么样的？

我希望能够修改 BOB 指向的成员函数 helloWorld 内部的对象内部的数据。

我知道它可能有一些 '*' 或 '&' 但我不知道把它们放在哪里。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T05:04:06.080

```
int main()
{
    TheBuilder *BOB = new TheBuilder();
    helloWorld(BOB);
    if (BOB->canWeBuildIt)
        printf("yes we can!");
    delete BOB;
    return 0;
}

void helloWorld(TheBuilder *bob)
{
    bob->canWeBuildIt = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:55:48.557

```
void doSomething1(int x){ 
  //code 
} 
```

这个按值传递变量，无论函数内部发生什么，原始变量都不会改变

```
void doSomething2(int *x){ 
  //code 
} 
```

在这里，您将类型指针的变量传递给整数。因此，在访问数字时，您应该使用 *x 作为值或使用 x 作为地址

```
void doSomething3(int &x){ 
  //code 
} 
```

这里和第一个一样，但是无论函数内部发生什么，原始变量也会改变

所以在你的情况下你会写

```
void helloWorld (TheBuilder* object){
    //Do stuff with BOB
}

void main (){
    TheBuilder *BOB = new TheBuilder();
    helloWorld (BOB);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T04:56:25.193

参数列表将包括一个`TheBuilder *`参数。例如：

`void helloWorld(TheBuilder *theBuilder) { ... }`

并称之为：

`helloWorld(BOB);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T04:59:11.783

```
class TheBuilder
{
    <class def>
}

void helloWorld (TheBuilder* obj)
{
    <do stuff to obj, which points at BOB>;
}

int main ()
{
    TheBuilder *BOB = new TheBuilder();
    helloWorld (BOB);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T10:10:56.113

如果`helloWorld`是成员函数，那么您不需要传递任何对象指针：有一个隐式指针，称为`this`，它指向您调用成员函数的对象：

```
#include <iostream>

class TheBuilder
{
  public:
    void helloWorld();

    std::string name_;
};

void TheBuilder::helloWorld()
{
    //Here, you can use "this" to refer to the object on which
    //"helloWorld" is invoked

    std::cout << this->name_ << " says hi!\n";

    //In fact, you can even omit the "this" and directly use member variables
    //and member functions

    std::cout << name << " says hi!\n";
}

int main()
{
    TheBuilder alice; //constructs an object TheBuilder named alice
    alice.name_ = "Alice";

    TheBuilder bob; //constructs an object TheBuilder named bob
    bob.name_ = "Bob";

    alice.helloWorld(); //In helloWorld, "this" points to alice
                        //prints "Alice says hi!"

    bob.helloWorld(); //In helloWorld, "this" points to bob
                      //prints "Bob says hi!"
} 
```

事实上，成员函数很像一个自由函数，其隐含参数对应于被操作的对象。当您编写以下代码时：

```
struct MyClass
{
    int myMemberFunction() {...}
};

MyClass obj;
obj.myMemberFunction(); 
```

编译器生成的代码等价于以下内容：

```
int myMemberFunction(MyClass * this) {...}

MyClass obj;
myMemberFunction(&obj); 
```

但你不必为此烦恼。您需要了解的是，在对象上调用成员函数（面向对象术语中的方法） ，并操作调用它*的*对象（例如，它可以修改其成员变量（字段））。在成员函数中，您可以通过直接使用它们的名称来访问当前对象成员，也可以显式地使用`this`指针。

# zend-framework - 环境变量管理的最佳实践

> ID：10256326
> 
> 赞同：1
> 
> 时间：2012-04-21T04:52:45.670
> 
> 标签：zend-framework, .htaccess, workflow, dreamhost

我正在本地机器上开发 Zend MVC，并使用 DreamHost 站点进行登台。根据[zend quick start](http://framework.zend.com/manual/en/zend.application.quick-start.html)，在我的本地机器上，我从项目公共目录中的 .htaccess 文件中将我的 APPLICATION_ENV 设置为开发，如下所示：

> myproject/public/.htaccess 包含这一行，
> 
> “SetEnv APPLICATION_ENV 开发”

这在本地工作得很好。但是当我尝试在我的登台服务器中使用我的 app_env 时，它就无法使用了。该[线程](https://stackoverflow.com/questions/5764469/zend-setenv-in-htaccess-not-working)表明 suexec 可能在后台运行。我做了一些挖掘，果然，[Dreamhost 阻止了自定义环境变量](http://wiki.dreamhost.com/Suexec)。

我尝试了 DH 建议的第一个解决方法，将“HTTP_”添加到“APPLICATION_ENV”，然后在 public/index.php 中添加另一个条件来检查原始版本和 dreamhost 版本。

```
// Define application environment
defined('APPLICATION_ENV') || define('APPLICATION_ENV', 
  (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 
  (getenv('HTTP_APPLICATION_ENV') ? getenv('HTTP_APPLICATION_ENV') : 'production'))); 
```

这似乎对我不起作用。即使在 ssh 中，当我在命令行中运行 'env' 时，我的 application_env 也没有列出。因为我没有使用 CGI 脚本，所以我没有为第二个和第三个变通办法而烦恼。

tl;博士

因此，据我了解，我的选择是创建自己的配置系统（将 app_env 保存到不同的文件，将该文件加载到 public/index.php 中，这似乎比选项 2 更值得考虑）或者只是“硬”将 app_env 编码到默认位置 - 意思是，在上面的代码示例中，它只会说“暂存”，而不是“生产”。如果我选择后者，我将不得不 .gitignore 我的 public/index.php 文件，这看起来有点奇怪。在此之前，我从来不需要更改该文件，并且认为如果我不弄乱它会更好，更不用说将它完全留在我的存储库之外。想法？建议？进一步的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T07:12:41.430

我遇到了和你一样的问题。然而，它并没有看起来那么大。一旦 index.php 被设置，它就永远不会改变，因此将它排除在版本控制之外是安全的。

在您的每个开发、登台和生产服务器上硬编码 APPLICATION_ENV 的定义，然后忘记它。

我已经使用 ZF 进行了两年的开发，我不记得上次我对 index.php 进行了更改，除了为每个服务器设置它，也就是只更改 1 行。

**tl; dr** 在您的情况下，除了硬编码 APPLICATION_ENV 之外，不值得付出努力。

# indexing - 从 couchdb 视图可以实现倒排索引？

> ID：10256327
> 
> 赞同：3
> 
> 时间：2012-04-21T04:53:06.093
> 
> 标签：indexing, couchdb, inverted-index

假设我的 couchdb 文档看起来像这样：

```
{
    "_id": "id",
    "_rev": "rev",
    "title": "foobar",
    "URI": "http://www.foobar.com",
    "notes": "",
    "date": 1334177254774,
    "tags": [
        "tag1",
        "tag2",
        "tag3"
    ],
    "date_modified": 1334177278457,
    "deleted": false
} 
```

我想要的是从标签创建一个倒排索引，所以我最终得到的是：

```
{
    "tag1": [
        _id,
        _id,
        _id
    ],
    "tag2": [
        _id,
        _id,
        ...
    ]
} 
```

根据我的阅读和尝试，couchdb 可能不会让我这样做。我无法在地图阶段完成它，而且我似乎无法在沙发缩减阶段完成它。这是我需要在应用程序的另一层完成的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:00:06.193

您*可以*使用 CouchDB 的地图功能来实现这一点。

CouchDB 喜欢*高*列表，而不是*胖*列表。因此，要在这个问题上“切入正题”，您需要一个在标签上键入的视图，每个文档 ID 有一行。

```
// View rows (conceptual diagram)
// Key  , Value
[ "tag1", "_id1"
, "tag1", "_id2"
, "tag1", "_id3"

, "tag2", "_id2"
, "tag2", "_id4"
, "tag3", "_id6"
] 
```

要获取带有标签的所有文档 ID 的列表，请点击以标签名称作为键的视图，`GET /db/_design/ddoc/_view/tags?key="tag1"`.

这应该足够了。但是作为 lagniappe，您可以将`"reduce"`值设置为`"_count"`以获取所有使用的标签的计数（对于构建标签云很有用）。只记得`&reduce=false`在要查询索引时添加。

# jquery - 如何更改此拉斐尔绘制的饼图，以使颜色不会改变

> ID：10256328
> 
> 赞同：0
> 
> 时间：2012-04-21T04:53:36.657
> 
> 标签：jquery, drawing, geometry, vector-graphics, graphael

我正在尝试更改此饼图，以便当我单击一个段时，不同段的颜色不会改变。我看到填充与段的形状有直接关系，但我完全烂透了。请帮忙！您可以在此处查看实际的饼图：

[http://raphaeljs.com/growth-pie.html](http://raphaeljs.com/growing-pie.html)

```
function drawgrowingpie () {
    var r = Raphael("holder");

    r.customAttributes.segment = function (x, y, r, a1, a2) {
        var flag = (a2 - a1) > 180,
            clr = (a2 - a1) / 360;
        a1 = (a1 % 360) * Math.PI / 180;
        a2 = (a2 % 360) * Math.PI / 180;
        return {
            path: [["M", x, y], ["l", r * Math.cos(a1), r * Math.sin(a1)], ["A", r, r, 0, +flag, 1, x + r * Math.cos(a2), y + r * Math.sin(a2)], ["z"]],
            fill: "hsb(" + clr + ", .75, .8)"
        };
    };

    function animate(ms) {
        var start = 0,
            val;
        for (i = 0; i < ii; i++) {
            val = 360 / total * data[i];
            paths[i].animate({segment: [200, 200, 150, start, start += val]}, ms || 1500, "bounce");
            paths[i].angle = start - val / 2;
        }
    }

    var data = [24, 92, 24, 52, 78, 99, 82, 27],
        paths = r.set(),
        total,
        start,
        bg = r.circle(200, 200, 0).attr({stroke: "#fff", "stroke-width": 4});
    data = data.sort(function (a, b) { return b - a;});

    total = 0;
    for (var i = 0, ii = data.length; i < ii; i++) {
        total += data[i];
    }
    start = 0;
    for (i = 0; i < ii; i++) {
        var val = 360 / total * data[i];
        (function (i, val) {
            paths.push(r.path().attr({segment: [200, 200, 1, start, start + val], stroke: "#fff"}).click(function () {
                total += data[i];
                data[i] *= 2;
                animate();
            }));
        })(i, val);
        start += val;
    }
    bg.animate({r: 151}, 1000, "bounce");
    animate(1000);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T04:59:28.420

改变

```
return {
    // snip...
    fill: "hsb(" + clr + ", .75, .8)"
}; 
```

到别的东西，或`fill`从返回的对象中完全删除该属性。

* * *

这是朝着正确方向轻推：不是每次为切片设置动画时都更改颜色，而是现在将颜色传递给`segment`函数。这意味着两个不同的调用者（初始化程序和点击处理程序）可以不同地控制颜色。如果没有（颜色）被传递给该函数，则该`segment`函数被更改为不返回*任何信息。* 这意味着处理程序不会改变颜色，因为只有初始化代码传递颜色信息。`fill``clr``click`

希望这对你有意义。

```
function drawgrowingpie() {
    var r = Raphael("holder");
                                                        // ↓↓↓ pass the color
    r.customAttributes.segment = function(x, y, r, a1, a2, clr) {
        var flag = (a2 - a1) > 180;
        a1 = (a1 % 360) * Math.PI / 180;
        a2 = (a2 % 360) * Math.PI / 180;
        var props = {
            path: [["M", x, y], ["l", r * Math.cos(a1), r * Math.sin(a1)], ["A", r, r, 0, +flag, 1, x + r * Math.cos(a2), y + r * Math.sin(a2)], ["z"]]
        };

        // only return fill properties if the color was passed
        if (clr) {
            props.fill = "hsb(" + clr + ", .75, .8)";
            console.log(clr);
        }
        return props;
    };

    function animate(ms) {
        var start = 0,
            val;
        for (i = 0; i < ii; i++) {
            val = 360 / total * data[i];
            paths[i].animate({
                // notice that no color data is passed here...
                segment: [200, 200, 150, start, start += val]
            }, ms || 1500, "bounce");
            paths[i].angle = start - val / 2;
        }
    }

    var data = [24, 92, 24, 52, 78, 99, 82, 27],
        paths = r.set(),
        total, start, bg = r.circle(200, 200, 0).attr({
            stroke: "#fff",
            "stroke-width": 4
        });
    data = data.sort(function(a, b) {
        return b - a;
    });

    total = 0;
    for (var i = 0, ii = data.length; i < ii; i++) {
        total += data[i];
    }
    start = 0;
    for (i = 0; i < ii; i++) {
        var val = 360 / total * data[i];
        (function(i, val) {
            paths.push(r.path().attr({
                // ...but we do pass color data here      ↓↓↓↓  
                segment: [200, 200, 1, start, start + val, val],
                stroke: "#fff"
            }).click(function() {
                total += data[i];
                data[i] *= 2;
                animate();
            }));
        })(i, val);
        start += val;
    }
    bg.animate({
        r: 151
    }, 1000, "bounce");
    animate(1000);
} 
```

[http://jsfiddle.net/mattball/xsfQj/](http://jsfiddle.net/mattball/xsfQj/)

# ruby-on-rails-3 - 每当 + delay_job 在启动工作时使用 cron 作业

> ID：10256331
> 
> 赞同：0
> 
> 时间：2012-04-21T04:53:58.280
> 
> 标签：ruby-on-rails-3, cron, delayed-job, rake-task, whenever

我正在学习cron作业和延迟作业，我想使用后台作业发送电子邮件；为此，我正在使用`delayed_job`宝石。我不想通过运行`rake jobs:work`命令手动启动工作程序，但我想在 cron 作业中设置这个 rake，所以每当用户登录仪表板时，这个命令就会被触发，并且邮件会发送到他的地址。以下是我的代码：

**发送邮件方法**

```
def dashboard      
    @user = User.find(params[:id])      
    UserMailer.delay.initial_email(@user)      
end 
```

**用户邮件程序**

```
def initial_email(user)      
    @user = user     
    mail(:to => user.email,:subject => "Welcome to my website!")       
end 
```

对于我正在使用“无论何时”Gem 的 cron 作业，那么我应该在 schedule.rb 文件中写些什么，这样当我登录仪表板时，我会收到一封邮件，而无需手动运行 worker？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:25:18.763

DelayedJob 应该一直在后台运行，因此不需要启动它。工作代理检查队列以查看是否需要执行任何任务并运行它们。它很像您的应用程序的第二个实例，它在后台检查需要运行的任务。

所以你应该启动工作代理`script/delayed_job start`并让它一直运行。您可以使用单独的工具（如 monit 或 god）来监控您的工作代理，以确保它始终在运行。

# reporting-services - 通过浏览器访问 SSRS 时出错

> ID：10256334
> 
> 赞同：0
> 
> 时间：2012-04-21T04:54:33.243
> 
> 标签：reporting-services, ssrs-2008

通过浏览器访问 Reporting Services 时收到以下错误消息

使用的网址：`http://<name of server>/ReportServer`

> 报告服务错误
> 
> * * *
> 
> 报表服务器无法打开与报表服务器数据库的连接。所有请求和处理都需要连接到数据库。(rsReportServerDatabaseUnavailable) 获取联机帮助 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）
> 
> * * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:07:02.110

您是否验证了配置是否正确？使用随 SSRS 一起安装的“报告服务配置管理器”。通过屏幕查找问题；尝试应用配置并确保数据库存在并具有正确的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:22:51.027

尝试从 Windows 运行 RSConfigTool.exe 或 Report Services 配置管理器并检查服务器是否可访问

# android - 移动网站需要哪种浏览器特定的 CSS3

> ID：10256338
> 
> 赞同：-1
> 
> 时间：2012-04-21T04:54:59.530
> 
> 标签：android, iphone, mobile, css, nokia

当我们开发我们的移动版网站时，我想知道有多少浏览器特定的 CSS3 版本是必需的。该计划仅将较小的手持设备发送到移动版本，iPad、Galaxy 和其他平板电脑将保留在主网站上。

特别是我想知道 box-shadow、border-radius 和渐变 css 支持。

我一直在梳理谷歌的精彩世界，并提出了以下列表，其中可能需要特定浏览器的版本才能覆盖大部分智能手机。

**-webkit-**用于盒子阴影

**-webkit-**用于边界半径

**-webkit-** , **-o-** , **-moz-**用于渐变

谁能确认我的名单？或者告诉我哪些我没有列出的可能是必要的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T05:22:39.497

我建议您使用[css3please.com](http://css3please.com/)来获取大多数常用 css3 功能的所有可能前缀。

至于手机；您将不需要 IE 前缀（歌剧有移动浏览器等）

不要忘记总是指定一个不带前缀的版本，不管它是否已经被某些浏览器支持，因为它会在将来出现，带前缀的版本将被忽略。

要查找有关不同浏览器中属性支持的更具体信息，您可以在[caniuse.com上查找它们](http://caniuse.com)

# python - 用正则表达式匹配同一个字符精确的次数

> ID：10256340
> 
> 赞同：4
> 
> 时间：2012-04-21T04:55:15.730
> 
> 标签：python, regex

我正在尝试使用 python`re`来查找一组重复特定次数的相同字母或数字。 `(.)`可以很好地识别将要重复的内容，但我找不到如何防止它只是重复不同的字符。这是我所拥有的：

```
re.search(r'(.){n}', str) 
```

因此，例如，它将匹配if `9999`，但不匹配 if 。 谢谢`99997``n = 4``n = 3`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T05:01:29.427

怎么样

```
(?:^|(?<=(.)))(?!\1)(.)\2{n-1}(?!\2) 
```

这将：

*   `(?:^|(?<=(.)))`: 确保：
    *   `^`: 要么我们在字符串的开头
    *   `(?<=(.))`: 要么我们不在字符串的开头；然后，捕获匹配前的字符并将其保存到`\1`
*   `(?!\1)(.)`：匹配任何不是的字符`\1`并将其保存到`\2`
*   `\2{n-1}`: 匹配`\2`n-1 次
*   `(?!\2)`: 确保`\2`不能匹配期待

（这`n-1`只是象征性的；显然你想用 n-1 的实际值替换它，而不是用`8-1`或其他东西）。

**重要编辑**：正则表达式 ( ) 的先前版本`(.)\1{n-1}(?!\1)`不起作用，因为它无法解释匹配`\1`背后的字符匹配。上面的正则表达式解决了这个问题。

# c++ - 运行时无法在 Code::Blocks 应用程序中打开任何文件

> ID：10256342
> 
> 赞同：1
> 
> 时间：2012-04-21T04:55:33.813
> 
> 标签：c++, file-io, codeblocks

我正在使用 Code::Blocks 在 C++ 中制作 OpenGL 程序。程序编译并运行，但从不显示纹理。我只是在白色背景下得到一个空的灰色矩形，而灰色矩形中应该有一张图片。

在尝试使用简单 OpenGL 图像库 (SOIL) 加载纹理图像时，我首先注意到了一些问题。我在 SOIL 的代码中进行了一些挖掘，发现该程序根本没有打开任何文件。我尝试更改图像格式，创建一些随机文本文件进行测试，等等，但它不会打开任何类型的任何文件。

我想我可能将文件放在错误的目录中，但如果是这样，它们应该去哪里？现在，我将它们保存在与代码相同的目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T05:04:47.673

在某处，您正在提供文件的路径。这些应该与可执行文件的位置相关。所以例子可能是这样的：

```
someFunction("file.jpg"); 
```

在这里，file.jpg 应该是这样的： <project_dir>/bin/Debug/

```
someFunction("../../file.jpg"); 
```

现在正确的位置是：<project_dir>/

# c# - 对 BigIntegers 列表求和

> ID：10256351
> 
> 赞同：18
> 
> 时间：2012-04-21T04:57:03.433
> 
> 标签：c#, syntax, sum, biginteger

我已经看遍了，但无法弄清楚这一点。你如何总结 BigIntegers 的列表？

```
Using System.Numerics;
Using System.Linq;

List<BigInteger> bigInts = new List<BigInteger>();
BigInteger sum = bigInts.Sum();             // doesn't work
BigInteger sum = bigInts.Sum<BigInteger>(); // doesn't work
BigInteger sum = bigInts.Sum(x => x);       // doesn't work 
```

你必须这样做吗？

```
BigInteger sum = new BigInteger(0);
foreach(BigInteger bigint in bigInts)
    sum += bigint; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-21T05:20:19.270

```
var sum = bigInts.Aggregate(BigInteger.Add); 
```

Aggregate 获得一个方法的委托，该方法获得两个 BigInteger 并返回一个 BigInteger。它使用默认的 BigInteger 作为初始值 (0)，并遍历每个 BigInteger，调用 BigInteger.Add 和先前的结果（0 将是第一次的先前结果 - 也称为“种子”）和当前元素。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-21T05:02:00.743

[聚合](http://msdn.microsoft.com/en-us/library/bb548651.aspx)函数是 Sum 的更通用版本：

```
var bigInts = new List<System.Numerics.BigInteger>(); 
bigInts.Add(new System.Numerics.BigInteger(1));

var result = bigInts.Aggregate((currentSum, item)=> currentSum + item)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T05:14:41.313

您还可以在通用列表上使用[ForEach()](http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx)方法进行添加：

```
var bigInts = new List<BigInteger>();

BigInteger sum = 0;
bigInts.ForEach(x => sum += x); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T05:12:37.617

正如阿列克谢所说，聚合是总和中更一般的。下面介绍一种扩展方法。

```
public BigInteger static Sum(IEnumerable<BigInteger> this lst)
{
    return lst.Aggregate(BigInteger.Zero, (acc, next)=> acc.Add(next));
} 
```

我还没有测试过这个，我的 C# 可能有点生锈了。但这个想法应该是合理的：见[http://msdn.microsoft.com/en-us/library/bb549218.aspx#Y0](http://msdn.microsoft.com/en-us/library/bb549218.aspx#Y0)

# ruby-on-rails - 使用 AJAx 和数据表在 rails 3.2 中过滤数据库结果

> ID：10256354
> 
> 赞同：3
> 
> 时间：2012-04-21T04:57:58.087
> 
> 标签：ruby-on-rails, ajax, datatables

我已经成功地按照这里的数据表 railscasts [http://railscasts.com/episodes/340-datatables](http://railscasts.com/episodes/340-datatables)加载和过滤我的项目服务器端。问题是，我想将我的类别选项放在选择框中，就像这个示例页面[http://datatables.net/release-datatables/examples/api/multi_filter_select.html](http://datatables.net/release-datatables/examples/api/multi_filter_select.html)

如果有人可以概述如何完成这项工作，我将非常感激，也许使用 Ryans 模型作为示例，我已经把头发扯了几个小时了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:30:58.377

我认为以下链接会对您有所帮助

[http://datatables.net/](http://datatables.net/)

# c# - 是否可以将 DataAnnotations 与接口继承一起使用？

> ID：10256358
> 
> 赞同：3
> 
> 时间：2012-04-21T04:59:27.317
> 
> 标签：c#, asp.net-mvc-3, inheritance, interface, data-annotations

*未在 PersonaFisica 中执行验证*
..

> 块引用

```
 [MetadataType(typeof(IValidationPersona))]
public  class Persona : Entidad, IValidationPersona
{    
    public string Mail { get; set; }
    public string Telefono { get; set; }
}
[MetadataType(typeof(IValidationPersonaFisica))]
public class PersonaFisica : Persona, IValidationPersonaFisica
{
    public string Nombre { get; set; }
    public string Apellido { get; set; }
}

public interface IValidationPersona
{
    [DisplayName("Persona -- Email")]
     string Mail { get; set; }

    [RegularExpression(@"^\d+$", ErrorMessageResourceType = typeof(ValidationMessages),   ErrorMessageResourceName = "SoloNumeros")]
    string Telefono { get; set; }
}

public interface IValidationPersona
{
    [DisplayName("Persona -- Email")]
    string Mail { get; set; }

    [RegularExpression(@"^\d+$", ErrorMessageResourceType = typeof(ValidationMessages),   ErrorMessageResourceName = "SoloNumeros")]
    string Telefono { get; set; }
} 
```

> > 验证不适用于接口中的继承，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:38:39.270

出于几个很好的原因，该功能没有在框架中实现。请参阅此 MSDN 论坛[接口中的 DataAnnotations](http://social.msdn.microsoft.com/Forums/en-US/adonetefx/thread/1748587a-f13c-4dd7-9fec-c8d57014632c/)

# php - 如何将 drupal php 代码转换为核心 PHP 代码？

> ID：10256364
> 
> 赞同：-2
> 
> 时间：2012-04-21T05:00:04.740
> 
> 标签：php, android, drupal

我有一个使用 drupal 的 Web 应用程序。现在我正在尝试将相同的应用程序放入 android 应用程序中。所以我需要将drupal php文件转换为核心php文件

是否有可能或者我可以在我的android应用程序中使用相同的drupal php文件

请任何人帮助我，因为我对 PHP 和 drupal 的想法较少

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:11:20.217

首先，如果我对您的理解正确，您希望编写您的 drupal 项目，以便可以从移动设备访问它。让我向你保证，你通常不需要重写太多就可以在移动设备上访问 drupal。当然，这不会是一个原生应用程序，但许多主题都有很好的内置移动支持。请参阅[此列表中的几个示例]。

[自适应](http://drupal.org/project/adaptivetheme)和[卡罗拉](http://drupal.org/project/corolla)等主题使推送移动内容变得轻而易举。

回顾一下，您需要：

1.  您的网站托管在网络服务器上
2.  您的 drupal 站点配备了移动/自适应/响应式主题。

您将能够从移动设备访问您的项目。

# java - 亚马逊 ec2 -ebs-mySql-CouchDB-ldap

> ID：10256365
> 
> 赞同：0
> 
> 时间：2012-04-21T05:00:14.103
> 
> 标签：java, linux, amazon-ec2, amazon-ebs

我已经在 amazon ec2 上运行了一个系统。系统使用三个数据库MySql、CouchDB 和ldap。但现在我想使用亚马逊 ebs。谁能帮帮我吗。我是 Linux 新手。在我移动不同 ebs 卷中的数据库后，我是否需要更改与这些数据库连接的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:17:49.393

EBS 是 Amazon 针对 EC2 实例的分布式存储解决方案。向您的实例添加新的 EBS 卷大致相当于向物理服务器添加新硬盘。它提供了更多可用存储空间，但它不是不同的服务器或任何东西，因此您不需要更改负责连接到数据库的代码。

我建议您从阅读有关在 EBS 上安装 MySQL 的教程开始：http:
[//aws.amazon.com/articles/1663](http://aws.amazon.com/articles/1663) 除了使用命令行工具，您还可以使用位于[http 的 Web 管理控制台： //aws-portal.amazon.com/](http://aws-portal.amazon.com/)如果您不熟悉从命令行工作，可以创建和附加 EBS 卷。不过，在新的 EBS 卷上启动并运行 MySQL 仍然需要一些命令行工作。

CouchDB 和 IDAP 的过程应该大致相似：关闭数据库服务，并创建数据文件的备份。同时，您创建一个新的 EBS 卷，将其附加到您的实例，用于`mkfs`准备使用，然后挂载它。然后，将数据文件复制到新的 EBS 卷，更改配置以让服务器知道数据文件现在存储在哪里（即 EBS 卷上目录的路径），然后重新启动数据库服务。这应该可以解决问题。

您可以使用单个 EBS 卷并将所有数据文件放在该卷上，也可以使用三个单独的卷，每个数据库一个。后一种选择可能会稍微快一些。

希望这个对你有帮助。这可能需要一些实验，但应该不会太难。当然，不要在生产系统上测试这个:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T02:06:35.583

除了@Daan 所说的，您应该考虑将多个 EBS 卷条带化到软件 RAID 配置中。

如果不这样做，您很可能会发现 EBS IO 性能对于适度繁忙的 MySQL 实例来说太差了。

有关如何执行此操作的详细信息，请查看

[http://alestic.com/2009/06/ec2-ebs-raid](http://alestic.com/2009/06/ec2-ebs-raid)

# eclipse - eclipse doxygen 不包括部分路径名

> ID：10256369
> 
> 赞同：0
> 
> 时间：2012-04-21T05:01:29.000
> 
> 标签：eclipse, doxygen

我在 Linux 平台上使用 Eclipse 和 Doxygen。我的团队代码由 Clearcase 控制。我的问题是我可以使用环境变量作为排除路径的一部分吗？

示例：项目中的每个人都有一个自定义视图作为其路径的一部分。而且我不想在文档中看到这一点。

```
 /view/me/a/b/src/.../...
    /view/you/a/b/src/.../... 
```

在每个开发人员视图中，他们是一个用他们的视图名称定义的环境变量。例如：$CLEARCASE_ROOT = /view/me

所以我正在尝试设置一个 Doxygen 文件供整个团队使用..

所以我想做一些类似 EXCLUDE ${CLEARCASE_ROOT}/a/b

然后每个生成文档的人都会得到相同的路径。我可以这样做吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:37:15.493

是的，doxygen 在其配置文件中支持环境变量扩展，参见[http://www.doxygen.nl/manual/config.html](http://www.doxygen.nl/manual/config.html)。

该`EXCLUDE`选项控制 doxygen 解析哪些文件。听起来您希望包含文件，但您希望它们以相对包含路径显示，在这种情况下您可能想要使用该`STRIP_FROM_INC_PATH`选项。如果您尝试创建相对文档中的其他绝对路径，该`STRIP_FROM_PATH`选项也可能会发挥作用。

`$()`语法与您提出的vs.略有不同`${}`，因此您需要指定如下内容：

```
STRIP_FROM_INC_PATH = $(CLEARCASE_ROOT)/a/b
STRIP_FROM_PATH = $(CLEARCASE_ROOT) 
```

# asp.net-mvc - 如何在asp.net mvc 2中从telerik传递多个参数

> ID：10256373
> 
> 赞同：0
> 
> 时间：2012-04-21T05:01:52.900
> 
> 标签：asp.net-mvc, asp.net-mvc-2, telerik, telerik-grid, telerik-mvc

这里我只将单个参数从 Telerik 传递给 javascript 函数。我还需要传递另一个参数

```
 <a href="javascript:void(0);" onclick="AddOdometer(<%: b.VehicleRepositoryId %>)"
            title="ADDTrip" id="A1">Add Distance</a> 
```

整个代码供参考

```
 <% Html.Telerik().Grid(Model.VehicleList)
                                .Name("VehiclesRepositoryGrid")
                                    .Columns(colums =>
                                    {
                                        colums.Bound(b => b.TruckNumber).Title("Vehicle Number")
                                            .FooterTemplate(() =>
                       {%>
        Total:
        <%})
                        .Width(100);
                                        colums.Bound(b => b.Month);
                                        colums.Bound(b => b.FuelType).Title("Fuel Type");
                                        colums.Bound(b => b.TotalDistance).Title("Distance")
                        .FooterTemplate(() =>
                        {%>
        <%= Model.VehicleList.Sum(v=>v.TotalDistance)%>
        <%})
                        .Width(100);
                                        colums.Bound(b => b.TotalFuel).Title("Fuel")
                                             .FooterTemplate(() =>
                       {%>
        <%= Model.VehicleList.Sum(v => v.TotalFuel)%>
        <%})
                        .Width(100);
                                        colums.Bound(b => b.Mileage);

                                        colums.Template(b =>
                                          {
        %>
        <% if (b.TotalDistance == 0)
           {%>
        <a href="javascript:void(0);" onclick="AddOdometer(<%: b.VehicleRepositoryId %>)"
            title="ADDTrip" id="A1">Add Distance</a>
        <%}
           else
           { %>
        <a href="javascript:void(0);" onclick="EditOdometer(<%: b.VehicleRepositoryId %>)"
            title="Edit">
            <img src="<%= ResolveUrl("~/Content/Images/Edit.gif")%>" alt="Edit" title="Edit"
                class="vaM" /></a> | <a href="javascript:void(0);" onclick="DeleteOdometer(<%: b.VehicleRepositoryId %>)"
                    id="DeleteVehicle">
                    <img src="<%= ResolveUrl("~/Content/Images/Delete.gif")%>" alt="Delete" title="Delete"
                        class="vaM" /></a>
        <% } %>
        <%
                                          }).Title("Actions")
            .Width(100).HtmlAttributes(new { @class = "taC" });
                                    })
                                     .Groupable(settings => settings.Groups(groups =>
                                     {
                                         groups.Add(o => o.TruckNumber);
                                         if (ViewData["Grouping"] != null)
                                         {
                                             groups.Add(o => o.Month);
                                         }
                                     }))
                                    .Scrollable(scrolling => scrolling.Enabled(false))
                                    .Sortable(sorting => sorting.Enabled(true))
                                    .Pageable(paging => paging.Enabled(true))
                                    .Filterable(filtering => filtering.Enabled(true))
                                    .Footer(true)
                                    .Render();
        %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:38:14.203

不知道你的问题是什么，这是你想要实现的吗？

```
 <a href="javascript:void(0);" 
    onclick="AddOdometer(<%: b.VehicleRepositoryId %>, <%: b.SecondParam %>)"
    title="ADDTrip" id="A1">Add Distance</a> 
```

# jquery - 从链接调用 javascript 函数

> ID：10256377
> 
> 赞同：0
> 
> 时间：2012-04-21T05:02:36.037
> 
> 标签：jquery

我有以下内容：

```
 <li><a id="register" 
        class="access button red"
        data-action="Register" 
        title="Login"><span class="smaller">REGISTER</span></a></li>
    <li><a id="login" 
        class="access button red"
        data-action="Login" 
        title="Login"><span class="smaller">LOGIN</span></a></li> 
```

在 jQuery 中是否有一种简单的方法可以使单击这些链接之一调用 javascript 函数并将数据操作作为参数传递。我加入了名为“access”的课程，因为我想我可以用它来挑选这两个链接，但我不确定下一步该做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T05:06:13.443

一条线

```
$("a.access").click(function(){ doSomeThing($(this).attr("data-action"))  }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T05:13:04.277

您可以使用以下示例之一，[`event.preventDefault();`](http://api.jquery.com/event.preventDefault/)将停止导航到超链接。

```
$("a.access").click(function(event) {
    event.preventDefault();
    customFunction($(this).attr("data-action"));
}); 
```

或者

```
$("a.access").click(function(event) {
    event.preventDefault();
    customFunction($(this).data("action"));
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T05:04:53.573

```
​$('a.access')​.click(function() {
    console.log($(this).data('action'));
});​ 
```

[http://jsfiddle.net/zerkms/EWSCJ/](http://jsfiddle.net/zerkms/EWSCJ/)

因此，在事件处理程序中，您可以`this`使用 DOM 对象或`$(this)`jQuery 对象。所以你可以使用`.data()`jQuery方法来检索`data-action`值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T05:05:59.587

是的，一点没错。只需执行以下操作：

```
var callback = function() {
  var $el = $(this);
  alert($el.data('action'));
};​

$('#login').click(callback) 
```

# ruby-on-rails - Ruby rails - 从数据库中仅选择几列

> ID：10256390
> 
> 赞同：61
> 
> 时间：2012-04-21T05:06:25.087
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord

Rails 中构造 sql 查询以仅从数据库中选择某些列的方式是什么，我有一些大数据字段，我想避免从连续定期 ajax 调用中加载这些字段。不必要的阅读是资源消耗和缓慢的。

```
@itemlist = Item.find(:all, :conditions => { .... } ) #this select all columns 
```

我正在寻找`SELECT name, address FROM users;`而不是`SELECT * FROM users;`

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-04-21T13:37:32.170

导轨 3：

`Item.select("name, address").where( .... )`

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-04-21T05:25:01.243

利用`:select`构造。试试这个：

```
@itemlist = Item.select('name, address', conditions: { .... } ) 
```

对于以前版本的 Rails：

```
@itemlist = Item.find(:all,:select => 'name, address', :conditions => { .... } ) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-21T05:26:04.710

使用 Arel（又名 Rails 3），使用：

```
Item.where(...).select("name, address") 
```

此外，如果您添加具有 :include => ... 的范围，似乎 .select 会被忽略。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-26T09:19:32.363

```
@itemlist = Item.select('name, address').where(...#some condition) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-06-27T01:23:17.957

如果要从 中选择特定列`rails console`，`pluck(`将起作用。例子：

```
2.4.1 :007 > User.connection
2.4.1 :006 > User.all.pluck(:email)
   (0.3ms)  SELECT `users`.`email` FROM `users`
 => ["test@test.com", "another_test@test.com"] 
```

请注意，这也适用于 Rails 应用程序。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-21T05:24:43.360

试试这个：

```
@itemlist = Item.find(:all, :select => "name, address", :conditions => { .... } ) 
```

# php - 使用 url 重写从 url 隐藏查询字符串参数

> ID：10256393
> 
> 赞同：0
> 
> 时间：2012-04-21T05:07:05.307
> 
> 标签：php, html, url-rewriting

在我的 php 网站中，我需要以特定方式显示我的骨灰盒

我需要隐藏查询字符串参数，只想在 URL 中显示值，即

```
mydomain.com/city.php?place='usa'&id=2 
```

我需要显示

```
my domain.com/city-2/usa 
```

可能吗？

请帮我。我的情况很严重。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:10:07.380

对的，这是可能的：

```
RewriteEngine On
RewriteBase /

RewriteRule ^city-(\d+)/(.*) city.php?place=$2&id=$1 
```

您需要将其放入`.htaccess`您网站的 Web 根目录中。要使其正常工作，您需要`.htaccess`启用解析并启用`mod_rewrite`apache 模块（假设您将 apache 作为 Web 服务器）。

更多[官方文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# c++ - `std::timed_mutex` 的有效用例？

> ID：10256394
> 
> 赞同：2
> 
> 时间：2012-04-21T05:08:01.460
> 
> 标签：c++, concurrency

在哪些情况下[std::timed_mutex](http://en.cppreference.com/w/cpp/thread/timed_mutex)比常规互斥锁更受欢迎？

我能想到的唯一用例是防止死锁的（IMO hackish）方法。

在哪些其他情况下`std::timed_mutex`是一个不错的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T05:28:20.427

这是 Windows 上的常见设计实践，您可以使用其中一个`WaitForSingleObject`或`WaitForMultipleObjects`与超时值一起使用，指定等待应该失败的时间。

它不用于解决死锁（这真的无济于事，糟糕的线程代码就是糟糕的线程代码）。

请记住，在 Windows Vista 发布之前，Windows 没有等效的 Posix 条件变量，这是一种完全不同的多线程编码范式，它起到了一定的作用，但不是存在定时互斥锁的唯一原因。

您不会在基本示例中看到定时等待的使用，但在复杂的架构中，您会经常遇到它。您*将*使用互斥锁的一个示例通常是某种生产者-消费者架构，其中客户端必须每 x 秒执行一次操作，并有可能以触发事件的形式出现“中断”。一个简单的伪代码示例：

```
//This code will run indefinitely, printing the value of 
//the variable x every 1 second until an interrupt is received
while(timed_wait(end_mutex, 1 second) != success)
    print(x) 
```

是的，这段代码可以重写如下：

```
while(true){
   sleep(1 second)
   wait(mutex)
   done = globalDone
   unlock(mutex)

   if(done) break
   else print(x)
} 
```

但是前面的示例更简洁，响应更快，因为它不是睡眠（即，只要互斥锁可用，它就会停止）。

请注意，Linux 具有不属于 Posix 标准的附加功能来对互斥体进行定时等待（`pthread_mutex_timedlock`但我认为它现在在 posix 规范中）。OS X 和 BSD 上的 sysv 信号量也是如此。这是一个有用的工具，如果你足够聪明，只在适当的时候使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:52:37.560

定时互斥等待的最佳用例是仅在特定时间内有效的操作，因此在资源拥塞的情况下它们应该会失败。

# java - 运行 Jar 两次

> ID：10256395
> 
> 赞同：1
> 
> 时间：2012-04-21T05:08:22.223
> 
> 标签：java, jar, executable-jar

是否可以运行 Jar 两次？

例如，考虑一个有 2 个入口点的 Jar。我可以同时运行它们两次，每次都有一个条目，**没有任何奇怪的（如记忆）问题**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:17:39.623

如果您的 jar/应用程序不阻止第二次启动 - 是的如果您在不同的 jvm 中启动您的应用程序，它们是不同的进程，（通常）没有共享内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T05:17:46.403

是的，没关系。您可以多次运行一个 jar 文件，例如启动两次 tomcat 服务器，这是一种非常常见的设置。据我了解，根本不存在内存泄漏问题。相反，现代 JRE 可以在多个进程之间实现类共享，从而可以节省大量内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T05:32:01.970

首先，我不认为 java 解释器单独理解多个入口点。但是您可以编写一个理解这一点的应用程序并启动正确的主类。

其次，即使 java 解释器知道启动多个入口点，它也应该在单独的 JVM 中启动每个入口点，以使其安全。

# integer - Json String 包含整数值，反序列化为 HashMap 时，Integer 转换为 double 值

> ID：10256397
> 
> 赞同：2
> 
> 时间：2012-04-21T05:09:02.763
> 
> 标签：integer, hashmap, double, gson

```
public static void main(String[] args) {

    Gson g = new GsonBuilder()
            .setPrettyPrinting()
            .enableComplexMapKeySerialization()
            .serializeSpecialFloatingPointValues()
            .setLongSerializationPolicy(LongSerializationPolicy.DEFAULT)
            .setPrettyPrinting()
            //.registerTypeAdapter(HashMap.class, new HashMapDeserializer())
            .create();

    HashMap<Object, Object> h = new HashMap<Object, Object>();
    h.put("num1", 10);
    h.put("num2", 20);
    h.put("num3", 20.0);
    h.put("num4", "<>");
    h.put("num5", "~!@#$%^&*()_+=-`,.<>?/:;[]{}|");

    String jsonStr = g.toJson(h);
    System.out.println("JsonString::"+jsonStr);
    /*Output below ::
     * 
        JsonString::{
            "num4": "\u003c\u003e",
            "num5": "~!@#$%^\u0026*()_+\u003d-`,.\u003c\u003e?/:;[]{}|",
            "num2": 20,
            "num3": 20.0,
            "num1": 10
        }
     */

    h = g.fromJson(jsonStr, HashMap.class);

    System.out.println("convert from json String :>"+h);
    /*Output below:
      convert from json String :>{num4=<>, num5=~!@#$%^&*()_+=-`,.<>?/:;[]{}|, num2=20.0, num3=20.0, num1=10.0}
     */

    int num1= (Integer) h.get("num1");
    System.out.println(num1);
} 
```

* * *

```
Exception in thread "main" java.lang.ClassCastException: java.lang.Double cannot be cast to java.lang.Integer
    at com.ps.multiupload.servlet.FileUploadUtil.main(FileUploadUtil.java:52) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:32:00.260

如果你告诉它你想要的类型，Gson 效果最好。否则它总是只使用它最喜欢的类型：Map、List、String、Double 和 Boolean。

要序列化您的混合类型哈希映射，请创建一个知道所需类型的 Java 类：

```
class NumNumNum {
  int num1;
  int num2;
  double num3;
  String num4;
  String num5;
} 
```

将 JSON 反序列化为这样的类将为 Gson 提供所需的提示。只需 a`Map<Object, Object>`它就可以做最简单的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T05:57:05.943

Try this:

```
int num1=new Integer(h.get("num1").toString());

float num3=new Float(h.get("num3").toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-26T22:56:38.017

不幸的是，这并不是那么简单。您需要创建自己的反序列化器。我建议您从源代码中复制粘贴以下类：ObjectTypeAdapter、MapTypeAdapterFactory 和辅助类 TypeAdapterRuntimeTypeWrapper。现在通过替换以下行来修复 MapTypeAdapterFactory.create 方法：

```
TypeAdapter<?> valueAdapter = gson.getAdapter(TypeToken.get(keyAndValueTypes[1])); 
```

和

```
TypeAdapter<?> valueAdapter = MyObjectTypeAdapter.FACTORY.create(gson, TypeToken.get(keyAndValueTypes[1])); 
```

现在通过替换以下行来修复 ObjectTypeAdapter.read 方法：

```
case NUMBER:
    return in.nextDouble(); 
```

和

```
case NUMBER:
    return in.nextLong(); 
```

最后一件事：在 gson 中注册您的自定义地图序列化程序：

```
Gson gson = new GsonBuilder()
        .setPrettyPrinting()
        .registerTypeAdapterFactory(new MyMapTypeAdapterFactory(new ConstructorConstructor(Collections.<Type, InstanceCreator<?>>emptyMap()), false))
        .create(); 
```

现在 JSON 中的任何“NUMBER”数据都将被反序列化为 long。

# mongodb - 如何替换 MongoDB 记录中的对象？

> ID：10256400
> 
> 赞同：0
> 
> 时间：2012-04-21T05:09:26.880
> 
> 标签：mongodb

如何替换这条记录中的third_id（只需要更新一个文档）？

```
> db.collection.find( {"_id" : ObjectId("4f90cf0cd4bea011930001a3"), "first_id": ObjectId("4edf056800126757c000000f")}) { "second_id" : ObjectId("4f355e430012671d77000ec0"), "third_id" : ObjectId("4edf056800126757c000000f"), "note" : "blah-blah"} 
```

像这样？

```
db.collection.update( { {"_id" : ObjectId("4f90cf0cd4bea011930001a3"), "third_id" : ObjectId("5edf056800126757c000000f")}, , true ) 
```

教程说：db.collection.update(criteria, objNew, upsert, multi)

论据：

条件 - 选择要更新的记录的查询；

objNew - 更新的对象或操作对象的 $ 运算符（例如，$inc）

upsert - 如果这应该是一个“upsert”操作；也就是说，如果记录不存在，则插入一条。Upsert 只插入一个文档。

multi - 指示是否应该更新所有符合条件的文档，而不仅仅是一个。可以与下面的 $ 运算符一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T05:49:29.430

由于您只想更新单个文档并且您不想进行 upsert 并且您不想替换整个文档而只想替换一个字段，您可以执行以下操作：

```
db.collection.update( { {"_id" : ObjectId("4f90cf0cd4bea011930001a3"), 
                      { $set : {"third_id" : ObjectId("5edf056800126757c000000f") } } ) 
```

# cuda - 为什么 CUDA 中的常量内存大小受到限制？

> ID：10256402
> 
> 赞同：14
> 
> 时间：2012-04-21T05:10:07.390
> 
> 标签：cuda, gpgpu, gpu-constant-memory

根据[“CUDA C Programming Guide”](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)，只有在命中多处理器常量缓存时，常量内存访问才会受益（第 5.3.2.4 节）¹。否则，半扭曲的内存请求可能比合并全局内存读取的情况更多。那么为什么恒定的内存大小限制为 64 KB？

为了不问两次，再问一个问题。据我了解，在 Fermi 架构中，纹理缓存与 L2 缓存相结合。纹理使用是否仍然有意义或全局内存读取以相同的方式缓存？

* * *

> ¹**常量内存（第 5.3.2.4 节）**
> 
> 常量内存空间驻留在设备内存中，并缓存在 F.3.1 和 F.4.1 节中提到的常量缓存中。
> 
> 对于计算能力为 1.x 的设备，对 warp 的恒定内存请求首先被拆分为两个请求，一个用于每个半 warp，它们是独立发出的。
> 
> 然后，一个请求被拆分为与初始请求中不同的内存地址一样多的单独请求，从而将吞吐量降低等于单独请求数量的因子。
> 
> 然后在缓存命中的情况下以常量缓存的吞吐量为结果请求提供服务，否则以设备内存的吞吐量提供服务。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-21T20:59:25.897

计算能力 1.0-3.0 设备的恒定内存大小为 64 KB。缓存工作集只有 8KB（参见 CUDA 编程指南 v4.2 表 F-2）。

驱动程序、编译器和声明的变量使用常量内存`__device__ __constant__`。驱动程序使用常量内存来传递参数、纹理绑定等。编译器在许多指令中使用常量（参见反汇编）。

可以使用主机运行时函数读取和写入放置在常量内存中的变量`cudaMemcpyToSymbol()`和`cudaMemcpyFromSymbol()`（请参阅 CUDA 编程指南 v4.2 部分 B.2.2）。常量内存在设备内存中，但通过常量缓存访问。

在 Fermi 纹理上，常数、L1 和 I-Cache 都是每个 SM 内部或周围的 1 级缓存。所有 1 级缓存都通过 L2 缓存访问设备内存。

每个 CUmodule 的 64 KB 常量限制是一个 CUDA 编译单元。CUmodule 的概念隐藏在 CUDA 运行时下，但可以通过 CUDA 驱动程序 API 访问。

# c# - 处理带有 .txt 和 .doc 扩展名的文件

> ID：10256406
> 
> 赞同：0
> 
> 时间：2012-04-21T05:10:46.803
> 
> 标签：c#

我下面的程序是一个简单的 Windows 窗体，它在目录中搜索文件，然后打开、读取和写入，之后有一个搜索按钮可以搜索文件中的单词，但我只能对具有.txt 扩展名可以帮助我我也想对 word 文档执行此操作，如果文件是另一个扩展名，我想打开带有 .txt 和 .doc 扩展名的文件我想弹出一个无法打开文件的错误这是我下面的代码，有没有人可以帮我修改这个程序或给我一些想法

```
namespace my_project
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            OpenFileDialog of = new OpenFileDialog();
            of.ShowDialog();
            textBox1.Text = of.FileName;
        }

        private void button2_Click(object sender, EventArgs e)
        {
            StreamReader sr = new StreamReader(textBox1.Text);
            richTextBox1.Text = sr.ReadToEnd();
            sr.Close();
        }

        private void button3_Click(object sender, EventArgs e)
        {
            StreamWriter sw = new StreamWriter(textBox1.Text, true);
            sw.WriteLine(textBox2.Text);
            sw.Close();

        }

        private void button4_Click(object sender, EventArgs e)
        {
            int index = 0; string temp = richTextBox1.Text; richTextBox1.Text = ""; richTextBox1.Text = temp;
            while (index < richTextBox1.Text.LastIndexOf(textBox3.Text))
            {
                richTextBox1.Find(textBox3.Text, index, richTextBox1.TextLength, RichTextBoxFinds.None);
                richTextBox1.SelectionBackColor = Color.Yellow;
                index = richTextBox1.Text.IndexOf(textBox3.Text, index) + index;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T05:16:26.610

在 .doc 文件中搜索会有点困难，因为 doc 文件包含标记，以便您能够装饰文本（使用不同的字体、粗体、斜体、边距等）。有第三方库和产品可以帮助您解决这个问题。另一方面，txt 文件是纯文本，这就是为什么你没有这个问题的原因。

为了实现验证，您可以使用 File 静态类并检查文件的扩展名并决定下一步做什么。您还可以使用 System.IO.Path.GetExtension 方法，该方法采用文件名并为您提供扩展名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T05:22:19.717

为了搜索 Word 文件，您需要以下代码：

第一次引用 Microsoft 12 或 14 对象库。

```
Microsoft.Office.Interop.Word.ApplicationClass wordObject = new ApplicationClass();
object file = textBox1.Text; //this is the path
object nullobject = System.Reflection.Missing.Value;
Microsoft.Office.Interop.Word.Document docs = wordObject.Documents.Open
 (ref file, ref nullobject, ref nullobject, ref nullobject,
ref nullobject, ref nullobject, ref nullobject, ref nullobject,
ref nullobject, ref nullobject, ref nullobject, ref nullobject,
ref nullobject, ref nullobject, ref nullobject, ref nullobject);
docs.ActiveWindow.Selection.WholeStory();
docs.ActiveWindow.Selection.Copy();
IDataObject data = Clipboard.GetDataObject();
richTextBox1.Text = data.GetData(DataFormats.Text).ToString();
docs.Close(ref nullobject, ref nullobject, ref nullobject); 
```

如果您的目标是 .Net 4.0，它支持可选参数，因此您不需要所有 nullobject

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T05:19:17.997

我不确定你在寻找什么。这里有一些建议：

1) 在 OpenFileDialog 中仅显示 .txt 文件：

参考：[OpenFileDialog 过滤器属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.openfiledialog.filter%28v=vs.95%29.aspx)

```
// Create an instance of the open file dialog box.
OpenFileDialog openFileDialog1 = new OpenFileDialog();

// Set filter options and filter index.
openFileDialog1.Filter = "Text Files (.txt)|*.txt|All Files (*.*)|*.*";
openFileDialog1.FilterIndex = 1;
... 
```

2) 要查看文件是否具有 .txt 扩展名，请使用 String.EndsWith()：

参考：[String.EndsWith () 方法](http://msdn.microsoft.com/en-us/library/t9h2fbth.aspx)

```
if (myfile.EndsWith (".txt", true, null) {
  .. 
```

3) 要调用 .txt 文件类型的默认程序，请使用 ShellExec()：

参考：[UseShellExecute 属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.useshellexecute.aspx)

```
 System.Diagnostics.ProcessStartInfo info = 
     new System.Diagnostics.ProcessStartInfo("c:\\temp\\myfile.txt");

   info.UseShellExecute = true;
   info.Verb = "open";

   System.Diagnostics.Process.Start(info); 
```

'希望有帮助！

# android - Android 推特推文分享

> ID：10256408
> 
> 赞同：1
> 
> 时间：2012-04-21T05:11:14.283
> 
> 标签：android

我在一个 android 应用程序中工作，我想从我的 android 分享一条推文（ [http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application](http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application)）到 twitter应用。我在 twitter 开发人员中创建了一个 twitter 应用程序，我已经集成了 CONSUMER_KEY 和 CONSUMER_SECRET 并且第一天它正常工作，第二天它在 OAUth 检索请求令牌期间导致错误错误（OAUth 通信异常）。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-05T11:39:34.657

用这个..

```
StatusesService statusesService = TwitterCore.getInstance().getApiClient().getStatusesService();
Call<Tweet> tweetCall = statusesService.update(text, null, false, null, null, null, false, false, null);
tweetCall.enqueue(new Callback<Tweet>() {
    @Override
    public void success(Result<Tweet> result) {
        Log.d("result", result.data.idStr);
    }

    @Override
    public void failure(TwitterException exception) {
        hideProgressDialogResult();
        exception.printStackTrace();

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:28:39.813

编辑您的应用程序权限以在 twitter 上读取和写入并保存您的应用程序配置文件.. 然后再试一次

# java - XML / XSD 验证如何忽略 xml 元素

> ID：10256410
> 
> 赞同：1
> 
> 时间：2012-04-21T05:11:31.547
> 
> 标签：java, xml, xsd, xsd-validation

我有一个如下的 XML 片段：

```
<Type>
    <name>content1</name>
    <priority></priority>
    <schedule>30 0/1 * * * ?</schedule>
    <length>2</length>
    <patterns>
        <pattern>[^\s]*\.DOC</pattern>
    </patterns>
</Type> 
```

一些“类型”标签将不包含

```
<priority></priority>
<schedule>30 0/1 * * * ?</schedule> 
```

元素。但是当我根据给定的“XSD”文件验证它时，它会抛出一个错误。如何忽略或检查标签是否可用验证 XSD 文件上的条件？可能吗？

我正在使用 Java Validator 来验证这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T05:17:31.550

在您的 XSD 文件中，将 <priority> 和 <schedule> 设为可选。将 minOccurs 设置为 0 使元素可选。如果元素存在于 xml 中，xsd 将对其进行验证，否则，xsd 将不会对其进行验证。

```
Example:

<xs:element name="priority" minOccurs="0"/>
<xs:element name="schedule" minOccurs="0"/> 
```

# css - 在 Less 中连接字符串

> ID：10256412
> 
> 赞同：131
> 
> 时间：2012-04-21T05:11:44.853
> 
> 标签：css, path, concatenation, less

我认为这是不可能的，但我想我会问以防万一。这个想法是我有一个网络资源文件夹路径的变量：

```
@root: "../img/";
@file: "test.css";
@url: @root@file;

.px {
    background-image: url(@url);
} 
```

结果我得到了这个：

```
.px { background-image: url("../img/" "test.css"); } 
```

但是，我希望这些字符串组合成一个字符串，如下所示：

```
.px { background-image: url("../img/test.css"); } 
```

是否可以在 Less 中将字符串连接在一起？

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-04-21T05:18:39.527

使用[变量插值](http://lesscss.org/features/#variables-feature-variable-interpolation)：

```
@url: "@{root}@{file}"; 
```

完整代码：

```
@root: "../img/";
@file: "test.css";

@url: "@{root}@{file}";

.px{ background-image: url(@url); } 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-10-18T15:32:30.717

正如您在[文档](http://lesscss.org/features/#variables-feature-variable-interpolation)中看到的那样，您也可以将字符串插值与变量字符串和普通字符串一起使用：

```
@base-url: "http://assets.fnord.com";
background-image: url("@{base-url}/images/bg.png"); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-08-28T13:20:35.677

我一直在寻找相同的技巧来处理图像。我用一个mixin来回答这个问题：

```
.bg-img(@img-name,@color:"black"){
    @base-path:~"./images/@{color}/";
    background-image: url("@{base-path}@{img-name}");
} 
```

然后你可以使用：

```
.px{
    .bg-img("dot.png");
} 
```

或者

```
.px{
    .bg-img("dot.png","red");
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-11-19T02:31:15.403

对于那些类似字符串的单位值，如`45deg`使用`transform: rotate(45deg)`函数`unit(value, suffix)`。例子：

```
// Mixin
.rotate(@deg) {
  @rotation: unit(@deg, deg);
  -ms-transform: rotate(@rotation);
  transform: rotate(@rotation);
}

// Usage
.rotate(45);

// Output
-ms-transform: rotate(45deg);
transform: rotate(45deg); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-04-21T05:19:27.420

不知道您使用的是[less.js](http://lesscss.org/)还是 lessphp（例如 WordPress 的[WP-Less](http://wordpress.org/extend/plugins/wp-less/)插件），但使用 lessphp 您可以使用以下命令“取消引用”字符串`~`：[http ://leafo.net/lessphp/docs/#string_unquoting](http://leafo.net/lessphp/docs/#string_unquoting)

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2013-02-14T12:47:56.637

使用 Drupal 7。我使用了一个普通的加号，它正在工作：

```
@images_path+'bg.png' 
```

# c# - https 使用 BasicHttpBinding 并忽略证书错误

> ID：10256416
> 
> 赞同：6
> 
> 时间：2012-04-21T05:12:47.050
> 
> 标签：c#, security, x509certificate2

我正在使用`BasicHttpBinding`连接托管在安全 (https) 端口上的 Web 服务。为了让它工作，我改变了`Security.Mode`to`TransportWithMessageCredential`和`Security.Message`to `BasicHttpMessageCredentialType.Cerificate`。我也在打电话

```
client.ClientCredentials.ClientCertificate.SetCertificate() 
```

使用 localhost 作为主题名称。

这里的问题是，对于单元测试，我有一个来自 Web 服务器的未签名证书，并且应该忽略在代理创建期间抛出的任何证书错误；但我无法这样做，因为我不断收到错误消息，告诉我**“指定证书”**。现在，我一无所知；我很感激这里的任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T09:01:06.723

您可以使用以下代码跳过证书验证。这会为任何证书创建一个[`RemoteCertificateValidationCallback`](http://msdn.microsoft.com/en-us/library/system.net.security.remotecertificatevalidationcallback.aspx)总是返回 true 的。

```
System.Net.ServicePointManager.ServerCertificateValidationCallback = 
    (sender, certificate, chain, errors) => true; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T10:04:46.103

对于服务器 ssl，`SecurityMode`应设置为`Transport`.

# hibernate - 使用 hibernate 持久化部分更新对象的方法

> ID：10256418
> 
> 赞同：2
> 
> 时间：2012-04-21T05:13:01.257
> 
> 标签：hibernate

我正在使用 Spring 3 和 Hibernate 4 来构建我的项目。

我的问题是，例如，一个 User 对象有五个字段，id、name、password、school 和 address。我只授予用户更新/编辑他的学校和/或地址的权利。当用户第一次通过 GET 访问编辑页面时，我想用用户的现有信息填充该字段。

单击提交按钮后，我想通过休眠更改数据库中相应的更新字段。

控制器.java

```
@RequestMapping(value="/edit/{userId}", method="RequestMethod.GET")
public String toEdit(Model model,@PathVariable int userId){
    User user = userService.get(userId);
    model.addAttribute("command",user);
    return "/edit";
}

@RequestMapping(value="/save", method="RequestMethod.POST")
public String toSave(Model model){
    //how to implement this?
} 
```

编辑.jsp

```
<form:form action="/save" method="POST">
    <form:input path="school"/>
    <form:input path="address"/>
    <input type="submit"/>
</form:form> 
```

我的想法是，如果我可以将那些未更新的字段作为隐藏字段放在edit.jsp页面中，以便在用户对象重新绑定时（提交表单时），我仍然可以捕获用户的ID，名称和密码信息.

我的方法的缺陷是显而易见的。首先，密码作为隐藏字段永远不是要走的路。其次，它在edit.jsp 页面上添加了不必要的信息。

我的第二个想法是我只能将用户ID作为隐藏字段放在edit.jsp中，提交表单时，我可以使用`User user = userService.get(command.id)` 获取相应的用户对象并将字段（例如学校或地址）设置为新输入的字段类似的东西`user.setSchool(command.getSchool())`。在所有这些之后，我可以更新用户对象。这种方法有点麻烦，因为如果我有很多字段要更新，就会有很多代码。

有一个更好的方法吗？（我相信一定有一个）我对 Spring 和 Hibernate 很陌生，所以如果我遗漏了一些非常明显的东西，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:30:04.173

如果您使用[“动态更新”](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-class)，则只会更新已修改的字段。您可以使用[`@org.hibernate.annotations.Entity`](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-entity)标记您的实体以进行动态更新。

```
@Entity
@org.hibernate.annotations.Entity(
        selectBeforeUpdate = true,
        dynamicInsert = true, dynamicUpdate = true)
public class User { ... } 
```

# algorithm - 3D 网格顶点的交集

> ID：10256425
> 
> 赞同：1
> 
> 时间：2012-04-21T05:15:27.630
> 
> 标签：algorithm, grid, computational-geometry, linear-algebra, intersection

想象一个巨大的 3D 网格（程序定义，并且可能是无限的；至少，每边 10^6 个坐标）。在每个网格坐标处，都有一个图元（例如，球体、盒子或其他一些简单的、易于数学定义的函数）。

我需要一种算法来与网格的元素相交，原点在网格之外，方向进入它。即，光线可能穿过这个巨大的网格的一半，然后击中一个图元。由于网格的范围，迭代方法 [编辑：（如光线行进）] 的速度慢得令人无法接受。我需要的是一些封闭形式的[编辑：*常数时间*]解决方案来寻找原始命中。

我想到的一种可能的方法是确定光线在每个时间步向基元收敛的量*，*这些坐标围绕在 x、y 和 z 中的每个模算术空间中的网格单元周围的八个坐标中的每个坐标上，然后除以由光线的方向，并采取最小的距离。除了直觉，我没有其他证据认为这可能有效，而谷歌也无济于事；“与网格相交”是指与网格的*面*相交。

笔记：

*   我真的只关心基元的表面法线（我可以很容易地找到相交的距离，但我不关心距离本身）。
*   在这一点上，相交的基元类型并不重要。理想情况下，它将是一个盒子。第二个选择，球体。但是，我假设使用的任何算法都可以推广到其他原语，并且如果最坏的情况出现在最坏的情况下，无论如何对于这个应用程序来说并不重要。

谢谢，
伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:14:38.083

这是另一个想法：只有当所有 x、y 和 z 坐标都接近整数值时，射线才能击中图元。如果我们考虑射线的参数方程，其中线上的一个点由下式给出

```
p=p0 + t * v 
```

其中 p0 是起点，v 是射线的方向向量，我们可以绘制从射线到每个轴上整数值的距离作为 teg 的函数：

```
dx = abs( ( p0.x + t * v.x + 0.5 ) % 1 - 0.5 ) 
```

这将产生三个锯齿图，其周期取决于方向向量的分量（例如，如果方向向量为 (1, 0, 0)，则 x 图将在 0 和 0.5 之间线性变化，周期为 1，而无论 p0 是什么，其他图都将保持不变。

您需要找到所有三个图都低于某个阈值水平的 t 的第一个值，该阈值水平由图元的大小决定。因此，在检查高频图之前，您可以通过首先考虑具有最长（非无限）周期的图来大大减少要检查的 t 值的数量。

我无法摆脱这样一种感觉，即有可能根据三个图的周期计算 t 的正确值，但我想不出任何不因起始位置不是原点而受到破坏的东西，并且阈值不为零。：-/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:08:54.293

您在问题中指出迭代解决方案的速度慢得令人无法接受 - 我假设您的意思是迭代，即针对线测试网格中的每个对象。

而是迭代线相交的网格立方体，并为每个立方体测试立方体相交的 8 个对象。查看[Bresenham 的线条绘制算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)，了解如何找到线条相交的立方体。请注意，Bresenham's 不会*绝对返回光线相交的每个*立方体，但为了找到要测试的基元，我相当确定它会足够好。它还具有很好的特性：

1.  非常简单——如果你在 GPU 上运行它会很方便
2.  沿射线迭代返回结果，因此您可以在找到命中后立即停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T05:26:31.383

基本上，您需要做的是以函数的形式表达线。从那里，您只需要在数学上计算射线是否与每个物体相交，然后如果它确实确保您得到最接近源的它与它发生碰撞的那个。

这并不快，因此您必须在此处进行大量优化。最明显的是使用边界框而不是实际形状。从那里，您可以执行诸如使用八叉树或 BST（二进制空间分区）之类的事情。

好吧，无论如何，由于系统的额外限制，我可能会忽略某些事情，但这就是我必须为课程制作光线追踪器的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T17:01:20.493

试试这个方法：

1.  确定射线的功能；

2.  假设网格在z轴上被划分为不同的平面，射线将与每个“z平面”（相同高度的网格节点所在的平面）相交，您可以轻松计算坐标（x，y，z ) 来自射线函数的交点；

3.  滑动z平面，您可以轻松确定哪些相交点位于立方体或球体中；

4.  但射线可能与 z 平面之间的立方体/球体相交，因此您需要在 x、y 轴上重复 1-3 步。这将确保没有交叉路口被遗漏。

5.  丢弃从 x、y、z 方向搜索中找到的重复立方/球体。

# iphone - 以编程方式在 iPhone ViewController 之间切换

> ID：10256435
> 
> 赞同：0
> 
> 时间：2012-04-21T05:17:14.573
> 
> 标签：iphone, xcode, ios5, uiviewcontroller, uitabbarcontroller

我有几个视图控制器用于我正在开发的游戏的各个部分，我们称它们为屏幕 1、2、3、4。

我希望能够在屏幕 1 中启动游戏，然后显示 2、3、4，然后返回屏幕 1 并重新开始（有时我想省略 #3 等）。我已经设法使用 UITabBarController 获得此功能，但我无法弄清楚如何隐藏选项卡控件本身。如果我隐藏了实际控制，它只会在其位置显示一个白条。如果我尝试调整它在第一个屏幕上工作的视图大小，那么其他的似乎是屏幕大小的两倍（在 viewWillAppear 中设置）：

[[self view] setFrame:[[UIScreen mainScreen] bounds]];

有没有人设法让这种事情发挥作用？我可以使用导航控制器来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T05:42:56.753

我建议你使用`UINavigationController`它，因为为了你的目的，这可以用`UINavigationController`而不是`UITabBarController`.

但是，如果您想继续，`UITabBarController`则可以`UITabBarController`通过在您的以下方法中调用此方法来隐藏您的`app delegate`：

```
- (void) hideTabBar:(UITabBarController *) tabbarcontroller {

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    for(UIView *view in tabbarcontroller.view.subviews)
    {
        if([view isKindOfClass:[UITabBar class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
        } 
        else 
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
        }

    }

    [UIView commitAnimations];

} 
```

# css - Wordpress Mobify 移动主题，CSS

> ID：10256436
> 
> 赞同：0
> 
> 时间：2012-04-21T05:17:29.157
> 
> 标签：css, wordpress, mobify

我很难使用名为 mobify 的 wordpress 移动主题。我需要主题来在移动浏览器中显示带有全文和图片的每个帖子，但它只对前 2 个帖子执行此操作。我是一名 Web 开发人员，对 Wordpress 不太熟悉，我查看了 html 代码，并将罪魁祸首追踪到前两篇文章中出现的标签，而不是其余文章中的标签。它是

```
<div class="entry"> 
```

我很确定我可以找到一种方法将这个 css 类破解到 Wordpress 脚本的后端，但我在问专家，Wordpress 修改脚本的方法是什么，以便它出现在之后的每一篇文章中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:40:33.537

彼得在这里——我是 Mobify 的首席架构师。Wordpress 插件已被弃用和停产一段时间。我们确实在插件页面中指出了这一点——但我意识到仍然有一些博客/网站有直接链接。

我们仍然支持 Wordpress 和每个内容管理平台。不再需要特定于平台的插件——我们可以使用插入页面的简单 HTML 标记来支持每个平台。 [再给我们看看。](http://www.mobify.com)如果您有其他问题，请随时与我们联系。

# grails - 如何将“非 mavenized”jar 依赖项添加到 grails 项目

> ID：10256440
> 
> 赞同：15
> 
> 时间：2012-04-21T05:17:47.113
> 
> 标签：grails

我是个新手。我在 Windows 7 上从命令行（无 IDE）使用 grails 2.0.3。

我只是在运行 grails 文档中的“hello world”示例。

我有一个不在 maven 中的自定义 jar，我想在我的项目中使用它。我将它添加到 lib 文件夹并执行了刷新依赖项。我修改了控制器以从 jar 中导入一个类。当我执行“run-app”时，编译器抱怨它找不到该类。

我在网上看到了几个示例，人们必须像这样在 BuildConfig.groovy 中添加一行： runtime 'httpclient:httpclient:3.0.1' 。但是由于我没有使用 maven 或 ivy，我如何在我的类路径中获取该 jar？

我上面提到的例子是[http://grails.1312388.n4.nabble.com/External-Jar-in-Grails-td4388010.html](http://grails.1312388.n4.nabble.com/External-Jar-in-Grails-td4388010.html)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-21T05:38:40.613

**圣杯 2.0-2.2**

好的，我终于知道我需要做什么了。假设我的 jar 名为“mylib.jar”。我需要将其重命名为 mylib-1.0.jar 并将其移至 lib 目录。然后我需要在 BuildConfig.groovy 中添加以下内容：

```
dependencies {
        // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes eg.

        // runtime 'mysql:mysql-connector-java:5.1.16'
    runtime 'mylib:mylib:1.0'
    } 
```

我想这对除了我以外的所有人来说都是显而易见的。希望这对其他人有帮助。

**圣杯 2.3-...**

只需将一个罐子放入`lib/`. 不要修改`BuildConfig.groovy`(c) kaskelotti

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T08:41:01.280

如果您的 jar 在 lib 文件夹中，并且在 buildconfig.groovy 中也有条目，并且如果您在构建路径中找不到 jar，请尝试使用以下命令。

```
grails compile --refresh-dependencies 
```

# magento - Magento 中的分组产品 getFinalPrice 行为

> ID：10256442
> 
> 赞同：1
> 
> 时间：2012-04-21T05:18:15.727
> 
> 标签：magento

如何更改 Magento 中分组产品的 getFinalPrice 行为？我想获得在结果计算中不使用具有特定属性值的儿童产品的分组产品的最终价格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:52:36.023

如果您在未提供数量的情况下`getFinalPrice()`对分组产品的价格模型 ( ) 调用该方法，将返回先前计算的产品最终价格。IE`Mage_Catalog_Model_Product_Type_Grouped_Price``getFinalPrice()`

```
return $product->getCalculatedFinalPrice(); 
```

该`getCalculatedFinalPrice()`方法本质上只是魔术吸气剂的包装......

```
return $this->_getData('calculated_final_price'); 
```

在方法中的产品集合类 ( ) 中可以找到相应的`setCalculatedFinalPrice`调用。`Mage_Catalog_Model_Resource_Product_Collection``_addFinalPrice()`

当您深入研究该方法的实现时，您会发现它遵循`calculatePrice()`产品自身价格模型中的方法。因为`Mage_Catalog_Model_Product_Type_Grouped_Price`不提供此方法的实现，所以`Mage_Catalog_Model_Product_Type_Price`使用来自父级的版本。本质上，这封装了处理基本价格/空间价格、价格规则等的所有逻辑。

这导致了在没有指定任何数量、选项等的情况下，调用`getFinalPrice()`分组产品将返回分组产品本身的价格。

# c# - GPS坐标的默认位置

> ID：10256443
> 
> 赞同：2
> 
> 时间：2012-04-21T05:18:37.220
> 
> 标签：c#, windows-phone-7, gps, windows-phone-7.1, windows-phone-7-emulator

我在我的 WP7 应用程序中使用 GPS。当我在模拟器中运行应用程序时，GPS 会给我一些美国西雅图周围某个地方的默认坐标。该应用程序在 wp 设备上运行良好，并提供协调的仪式。我需要的是在模拟器上运行应用程序时如何更改 GPS 返回的默认坐标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T08:54:13.273

您可以单击模拟器中的箭头来查看这些工具（位置选项卡）：

![在此处输入图像描述](../Images/e8490e8c34ab3cbd39c9ff45f3a90145.png)

# azure - 将 Windows Azure 用作文件存储系统的最佳策略是什么 - 具有 http 下载功能

> ID：10256454
> 
> 赞同：5
> 
> 时间：2012-04-21T05:21:41.560
> 
> 标签：azure, azure-sql-database, azure-storage, azure-blob-storage

我需要存储用户上传的多个文件，然后为这些用户提供通过 http 访问其文件的能力。有两个关键考虑因素： - 存储（这是我在这里最关心的问题） - 安全性（我们暂时搁置）

问题是：存储所有这些文件并在以后提供访问权限的最经济高效的方式是什么？我相信答案是： - 将文件存储在 Azure 存储帐户中，并拥有一个在 SQL Azure 数据库中引用它们的密钥。

我在这点上是对的吗？

Blob 存储是平面的吗？或者我可以在其中创建类似文件夹的东西来更好地组织我的文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T06:48:57.270

使用 SQL Azure 存储 Blob 元数据的想法是一种非常常见的方案，它允许您利用 SQL 进行搜索，并利用 Blob 进行存储。

Blob 由容器组织。所以你会有类似的东西：

```
http://mystorage.blob.core.windows.net/mycontainer/myfile.doc 
```

您还可以使用分隔符模拟层次结构，但实际上只有容器和 blob。

如果您将容器或 blob 保持为私有，则用户要么必须通过您的 Web 前端（或 Web 服务），要么您必须向他们提供附加了共享访问签名的特殊 URL，这是一个时间- 有限的网址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:15:38.913

我建议您看一下 BlobShare Sample，它是一个简单的文件共享应用程序，它演示了 Windows Azure 平台的存储服务，以及访问控制服务 (ACS) 的身份验证和授权功能。完整的示例代码位于以下链接：

[http://blobshare.codeplex.com/](http://blobshare.codeplex.com/)

您可以立即使用此示例代码，只需添加对您的 Windows Azure 帐户凭据的正确引用。此示例的最佳之处在于您可以直接通过访问控制服务提供 blob 访问。您还可以修改代码以添加 SAS 支持以及从公共容器下载 blob。一旦你让它工作并理解了这个概念，你就可以调整它以使其成为你想要的方式。

# iphone - 通过 - 分隔字符串

> ID：10256455
> 
> 赞同：0
> 
> 时间：2012-04-21T05:21:49.677
> 
> 标签：iphone, xcode, nsstring

我有一个字符串“hai-welcome”。

我需要使用'-'分隔符分割上面的字符串：

mySstring = "hai-welcome" 分开为：

firstString = "hai" secondString = "欢迎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T05:41:18.303

您可以通过使用 NSString 的“componentsSeparatedByString”方法来完成此操作。

```
NSString * source =  @"hai-welcome";
NSArray * stringArray = [source componentsSeparatedByString:@"-"];
NSString * firstPart = [stringArray objectAtIndex:0]; // Contains string "hai"
NSString * secondPart =[stringArray objectAtIndex:1]; //Contans string "welcome" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T05:24:41.360

使用 NSString 的 componentsSeparatedByCharactersInSet 方法

[http://www.idev101.com/code/Objective-C/Strings/split.html](http://www.idev101.com/code/Objective-C/Strings/split.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T05:26:33.453

```
NSArray* foo = [@"hai-welcome" componentsSeparatedByString: @"-"];
NSString* first = [foo objectAtIndex: 0];
NSString* second = [foo objectAtIndex: 1]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-21T05:30:44.193

尝试这个

```
NSString *str = @"hai-welcome";
NSArray *listItems = [str componentsSeparatedByString:@"-"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T12:38:05.063

如果您希望使用其他`componentsSeparatedByString`功能，我会提供此解决方案以采用：

```
NSString *myString =  @"hai-welcome";
NSString *firstString = [myString substringWithRange:NSMakeRange(0, [myString rangeOfString:@"-"].location)];
NSString *secondString = [myString stringByReplacingOccurrencesOfString:[firstString stringByAppendingString:@"-"] withString:@""]; 
```

# javascript - Javascript触发onChange而不执行鼠标或键盘

> ID：10256460
> 
> 赞同：0
> 
> 时间：2012-04-21T05:22:34.350
> 
> 标签：javascript, events, select, triggers, onchange

当我更改项目是“选择”标签时，某些函数会被调用。
我想使用 javascript 代码触发 onchange 事件，就像 somebtn.click() 可以触发点击事件一样。

```
<select id="abc">
<option selected>item1</option>
<option>item2</option>
<option>item3</option>
</select> 
```

我希望在页面加载或任何其他事件时，自动选择 item3 并自动选择 item3 时自动调用的 onchange 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:53:58.033

所以......就这样做：

```
function selectOption($select, option) {
    if ($select.val() != option) {
        $select.val(option).trigger('change');
    }
}

// Usage:
selectOption( $('#abc'), 'item3'); 
```

# grails - 绕过本地存储库的 Grails 代理设置

> ID：10256462
> 
> 赞同：7
> 
> 时间：2012-04-21T05:22:45.317
> 
> 标签：grails

我正在开发一个 Grails 2.0.x 应用程序，它当然有几个外部依赖项。由于我坐在公司防火墙后面，因此我已将其配置`ProxySettings.groovy`为允许访问互联网，这应该可以正常工作。

现在我们还需要包含对一些本地工件（来自其他项目）的依赖项，这些工件可以在我们的本地 Maven 存储库中找到。我们的公司网络设置仅将代理用于外部站点，而不是内部站点。因此，当 Grails 在启动时解决我的依赖项时，它会很好地下载所有外部工件，但在尝试获取我们的本地依赖项时会失败。如果我完全删除了我的`ProxySettings.groovy`-file 的内容，那么情况正好相反，Grails 无法解析外部依赖项，但确实设法从我们的本地 Maven 存储库下载 JAR。

我试图找到有关如何从使用 Grails 中的代理设置中排除内部站点的文档，但到目前为止都失败了。

另一种选择可能是在`BuildConfig.groovy`调用之前以编程方式删除（或更改）代理设置`mavenRepo`？

目前我们没有使用 Maven 来构建我们的 Grails 项目（因为我们之前在构建服务器上创建发布版本时遇到了一些问题）。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:16:16.743

现在我不认为有一个简单的方法来解决这个问题。

目前有一个开放的错误，能够以编程方式切换代理设置

[http://jira.grails.org/browse/GRAILS-7658](http://jira.grails.org/browse/GRAILS-7658)

另一种选择是在您的 grails 项目中移动内部依赖项。

或者你可以在 BuildConfig.groovy 中转储所有内容

```
System.properties.putAll([
   "http.proxyHost": "myproxy.hostname.com",
   "http.proxyPort": "8080",
   "http.proxyUserName": "myUser",
   "http.proxyPassword": "myPass"
]) 
```

清除它的内部依赖关系，然后你可能会很好。

# c++ - 未解决的外部符号编译错误

> ID：10256470
> 
> 赞同：1
> 
> 时间：2012-04-21T05:25:11.930
> 
> 标签：c++, compiler-warnings

当我尝试一个新的库时，我经常遇到这个问题。这次我使用 PointGrey Camera 并尝试使用它的 API 库（一些 dll、lib、头文件）。大多数情况下，通过配置 SDK（我正在使用 VS2008）工具/选项/VC++ 目录/包含文件（/库文件）（/可执行文件）解决了问题，
我还尝试了项目配置：+项目属性/链接器/输入/附加依赖项+项目属性/链接器/常规/附加库目录

这一次，尽管如此，我仍然有错误。

有没有解决这个问题的通用方法？

我需要从 VS2008 了解这个诊断吗？

```
Error   1   error LNK2019: unresolved external symbol __imp__flycaptureGetPacketInfo referenced in function "enum FlyCaptureError __cdecl initializeStandardEventSizes(void *,struct FlyCaptureImageEvent * const)" (?initializeStandardEventSizes@@YA?AW4FlyCaptureError@@PAXQAUFlyCaptureImageEvent@@@Z)  main_2.obj  test 
```

使用 Dependencies Walker 等分析工具能否确保很好地解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:41:41.827

此消息表明您在代码中使用了符号（函数或变量）。该符号可能在某处声明（很可能在代码中包含的头文件中），否则会出现编译错误。当链接器搜索符号时（在您的目标文件和您指示它查看的 lib 文件中）它找不到它。

这通常是因为您忘记让链接器知道您希望它在其中搜索的库。

大多数库都附带一组指令，旨在帮助您正确设置所有内容并避免遇到这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:12:42.177

这个问题最近已经解决了。我安装了PointGrey不兼容的库。这就是为什么它不起作用。但这说明了“不兼容的库”和“未解决的执行符号错误”之间的关系

# java - 可以检查代码的哪一部分花费了太多时间的 Eclipse 插件？

> ID：10256471
> 
> 赞同：4
> 
> 时间：2012-04-21T05:25:24.847
> 
> 标签：java, eclipse

我对代码分析完全陌生。我想知道是否有一个易于使用的 Eclipse 分析工具或插件来分析我的 java 代码。

问题是我的 java swing 程序花费了太多时间，因为我手动做了很多图形编程。

例如，我有一个动态显示的图像列表，它们相互叠加（如 Photoshop 中的图层）。他们每个人都会响应用户的动作，所以每次用户触发更改时我都必须更新图像。

但是，在添加了一些特性（如 ColorOP、RescaleOP 等）后，程序开始出现卡顿。现在，我想知道代码的哪一部分效率低下并且花费了太多时间，以便我可以找到更好的替代方案。是否有用于此目的的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T05:31:47.660

Visual Performance Analysier 是 IBM 的开源工具，可以很好地可视化 Java 程序的性能分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T05:32:37.977

您需要使用 Java 分析器，我通常更喜欢[YourKit](http://www.yourkit.com/)。

# spring - DB重新启动后如何从Hibernate SessionFactory获取新连接而不重新启动tomcat？

> ID：10256474
> 
> 赞同：1
> 
> 时间：2012-04-21T05:26:17.730
> 
> 标签：spring, hibernate

在我的 Web 应用程序中，我使用的是 hibernate 和 spring。在 tomcat 服务器启动时， Hibernate`SessionFactory`对象作为 spring bean 被注入。通常它工作正常。但是当我关闭甚至重新启动数据库时，问题就出现了。

重新启动数据库后，如果我从 Hibernate`SessionFactory`对象检索会话并想要执行查询，我得到了`org.hibernate.exception.JDBCConectionException: Could not execute query exception`。为了克服这个问题，我需要重新启动 tomcat 服务器。重新启动后它会创建新`SessionFactory`对象，所以我没有得到异常。

在某种情况下，我怎样才能获得与数据库的新连接，这样我就不需要一次又一次地重新启动服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:35:52.217

SessionFactory 重建对我有用

我们的应用程序正在使用 tomcat、hibernate(3.5.1) 和 Oracle db（实际上有两个实例 - 一个是应用程序的主要实例，第二个是远程实例）有时远程数据库会重新启动，之后每次调用都会发生异常

```
JDBCConnectionException:could not execute query
Caused by: SQLRecoverableException: No more data to read from socket 
```

我首先添加到配置中

```
hibernate.dbcp.validationQuery=select 1 from dual
hibernate.dbcp.testOnBorrow=true
hibernate.dbcp.testOnReturn=true 
```

但没有结果。

然后我尝试关闭会话并重新创建它。最后什么对我有用 - 在这个例外 sessionFactory 重新创建之后

```
sessionFactory.close();
sessionFactory = annotationConfiguration.buildSessionFactory(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:48:36.100

This is not really Spring or Hibernate related. What you need to do is to setup your JDBC connection pool to test connections before returning them to whoever needs them (e.g. Hibernate). If the pool discovers that the connection in the pool is broken, it dicards it and tries another one from the pool. If all connections in the pool are broken, the pool will try to create new ones. Everything is transparent and your application won't even notice.

Which connection pool you use? In [dbcp](/questions/tagged/dbcp "show questions tagged 'dbcp'") set `validationQuery` to`"SELECT 1"` nd consider setting: `testOnBorrow=true`, `testOnReturn=true` and `testWhileIdle=true`. For [c3p0](/questions/tagged/c3p0 "show questions tagged 'c3p0'") check out the [documentation](http://www.mchange.com/projects/c3p0/#configuring_connection_testing).

# jquery - jQuery禁用css类的所有按钮和输入类型按钮

> ID：10256475
> 
> 赞同：1
> 
> 时间：2012-04-21T05:26:22.690
> 
> 标签：jquery

```
<input class="submit2" type="button" name="submit2"  value="Submit" id="submit1" onclick=""> 
```

单击后，我想禁用页面上的按钮。避免双击。

我试过以下代码

```
$(document).ready(function() {

    $('.submit2').click(function() {

        $("input.submit2").attr('disabled', true);

    });
});​ 
```

但只有当按钮的输入类型是提交而不是按钮时它才有效。

如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T05:27:33.533

您无需选择两次已选择的内容：

```
$(document).ready(function(){
    $('.submit2').click(function() { 
        $(this).attr('disabled', true);
    }); 
}); 
```

`$(this)`在这种情况下是指您刚刚单击的按钮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T05:28:26.860

另外，为了兼容所有浏览器，disabled attr 的值应该是“disabled”

像使用它一样

```
$("input.submit2").attr('disabled',"disabled"); 
```

如果您使用的是 jquery 1.5 及更早版本，并且如果您使用的是 jQuery 1.6+，则上述解决方案是完美的，则使用 prop 设置属性

```
$("input.submit2").prop('disabled',true); // here jQuery will normalize the value and set the property 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T05:33:31.897

这是一个老式的 HTML 遗物。属性值为'disabled'='disabled'：

```
$("input.submit2").attr('disabled','disabled'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T06:14:45.717

你现在可以这样做：

```
$(document).ready(function(){
     var $submitButton = $(this, "input[type='submit']");
     $submitButton.attr("disabled", "true");
}); 
```

# jsoncpp - 在编译 jsoncpp 示例代码时需要一些帮助

> ID：10256476
> 
> 赞同：1
> 
> 时间：2012-04-21T05:26:26.253
> 
> 标签：jsoncpp

我正在尝试编译一个示例 jsoncpp 示例，但是“标准”标头中出现了大量编译错误。有没有人看到过这个？

```
[~]$ g++ -g -c json.cc -I/usr/local/include/json 
In file included from /usr/include/libio.h:62,
                 from /usr/include/stdio.h:75,
                 from /usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/cstdio:45,
                 from json.cc:1:
/usr/include/sys/cdefs.h:46:44: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:50:44: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:135:19: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:151:19: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:209:19: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:218:19: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:227:19: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:236:19: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:248:19: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:258:19: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:267:19: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:275:19: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:289:19: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:297:43: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:326:19: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:338:20: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:343:20: error: missing binary operator before token "("
/usr/include/sys/cdefs.h:350:19: error: missing binary operator before token "("
In file included from /usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/cstring:45,
                 from json.cc:2: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T01:34:56.303

For me it was the features.h included with json-cpp conflicting with the system features.h in some other includes. I renamed it locally to json_features.h in the json-cpp code and all was well.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T23:14:50.467

检查 JSON 包含路径。在编译选项中使用`-I/path of JSON include directory`，例如`-I$(pkg-config --cflags jsoncpp)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-29T10:08:09.123

您需要使用这种方式包含头文件：#include "json/json.h"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-16T23:40:18.820

如果使用 编译`-I.../include/json`，则标准库可能会意外包含 JSON 标头。（在这种情况下，根据 asuter 的说法，它是`features.h`.）

父目录是头文件的一种“命名空间”。这就是为什么*任何*带有像`incdir/foo/bar.h`is`-Iincdir`和`#include <foo/bar.h>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T01:06:38.817

如果您之前的一个标题有语法错误，例如`;`在类声明末尾丢失，就会发生这种情况。从清理那些开始。

# c - getch 和 putchar 不返回就无法工作

> ID：10256477
> 
> 赞同：2
> 
> 时间：2012-04-21T05:26:27.963
> 
> 标签：c, ncurses, getch, putchar

我一直在尝试`getch`在另一个项目中工作，但没有成功。所以我已经制作了最基本的程序，我可以使用`getch`我希望它在主程序中工作的方式。

我研究了对`noecho`,和的需求`cbreak`，我也尝试过使用但没有成功。`initscr``nodelay``newscr()`

我遇到的问题是字符不会被打印到屏幕上，直到我点击“输入”，当它们应该在`put`每个循环时出现在屏幕上时。为什么会这样？此外，光标不会在新行处返回屏幕左侧。例如。

```
abc  
   def
      ghi 
```

我一直在寻找答案，但又被难住了……

```
#include <stdio.h>
#include <ncurses.h>

int main()
  {
     initscr();cbreak(); noecho();nodelay(stdscr,0);
    char c ;
    while((c=getch())!=EOF){
    putchar(c);}

    return 0;
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T05:38:16.163

您没有看到输出，因为您的`stdout`流是行缓冲的。

您的程序正在使各个字符正常；但输出流正在缓冲它们。

尝试`fflush(stdout);`或切换`stdout`到无缓冲模式`setbuf(stdout, NULL);`。

禁用缓冲的问题在于，当输出不是终端时，批量数据处理效率低下。

您可以使其以标准输出为 tty 为条件：

```
if (isatty(fileno(stdout)))  /* #include <unistd.h> */
  setbuf(stdout, NULL); 
```

要将光标返回到行首，您需要输出一个回车符`\r`。这是因为 curses 的`cbreak`模式禁用了`ONLCR`tty 模式（在输出上，发送 NL 添加 CR 时）。

如果您无条件添加`\r`，那么当您的输出被重定向时，它将出现在文件中。因此，您再次需要一些`isatty`技巧。

一个更好的方法可能是学习如何使用`tcgetattr`和`tcsetattr`函数来精确控制特定的 tty 参数，如果您只想在没有回显的情况下进行一次字符输入，而不是实际开发基于诅咒的交互式程序。

你真的想要一次输入一个字符，还是只是为了禁用回声？禁用回声很容易。调用以使用文件描述符 0 的当前设置`tcgetattr`填充 a （如果它是 tty）。`struct termios`翻转一些标志以关闭回显，然后调用`tcsetattr`以安装更新的结构。当您的程序退出时，请善待并放回原来的程序。完毕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T05:36:18.363

是的，ncurses 是获得逐个字符控制的好方法。

是的，你必须调用“initscr()”和“cbreak()”。

建议：

1）将您的代码与此 ncurses “hello world”进行比较：

```
#include <ncurses.h>

int main()
{   
    initscr();          /* Start curses mode          */
    printw("Hello World !!!");  /* Print Hello World          */
    refresh();          /* Print it on to the real screen */
    getch();            /* Wait for user input */
    endwin();           /* End curses mode        */

    return 0;
} 
```

2) 看看如果你执行“refresh()”和/或删除“noecho()”会发生什么。

3) 本教程有很多有用的信息，可能也会有所帮助：

[http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)

# node.js - 使用 ejabberd 进行浏览器内聊天

> ID：10256481
> 
> 赞同：3
> 
> 时间：2012-04-21T05:26:51.253
> 
> 标签：node.js, chat, tornado, ejabberd, livechat

ejabberd 聊天服务器能否与 node.js/tornado/socket.io 等可扩展且快速的服务器技术集成以实现浏览器内聊天？

在这种情况下，ejabberd 服务器可能在后端运行，而前端可以使用 node.js/socket.io 等与客户端浏览器进行通信。所有聊天消息都需要通过 ejabberd 服务器进行路由。与以传统方式直接使用 ejabberd 相比，所有这些都有意义吗？它是否具有足够的可扩展性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:19:53.103

我没有看到在您的架构中添加组件的好处。

ejabberd 和 XMPP 通常与 Web 技术和基于 Javascript 的客户端配合得很好。

您可以使用两种主要技术：

*   XMPP over Websocket 是最现代的方法。ejabberd 原生支持它。这意味着您可以创建一个基于浏览器的 XMPP 客户端来连接到 ejabberd。
*   BOSH 上的 XMPP。这是对 HTTP 协议的请求-响应性质的 XMPP 连接性质的模拟。这意味着您仍然可以为不支持 Websockets 的浏览器做 XMPP 聊天客户端。

Javascript XMPP 库通常同时支持 Websockets 和 BOSH。例如，您可以查看[Strophe](https://github.com/strophe/strophejs)来实现您的 Javascript Web 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:29:19.750

Wny 不使用在浏览器中运行的现有 Candy 客户端 (http://candy-chat.github.com/candy/) 来对抗后端 ejabberd 服务器？

# sql - 避免在热的时候显示重复的 Poptart Flavours

> ID：10256486
> 
> 赞同：3
> 
> 时间：2012-04-21T05:27:45.203
> 
> 标签：sql, sql-server, sql-server-2008

请查看下面的选择声明：

```
 SELECT 
    fc.flavorid,
    fc.flavorname,
    CASE 
      WHEN sa.flavorid IS NULL THEN 'No'
      ELSE 'Yes' END ) IsEaten
    CASE 
      WHEN t.tempid IS NULL THEN 'No' 
      ELSE 'Yes' END ) IsWarm

  FROM [poptart] p

    LEFT JOIN [diet] d ON d.Active = 1
    LEFT JOIN [toaster] ts ON p.poptartid = ts.poptartid AND d.dietname = ts.dietname
    LEFT JOIN [flavor] fl ON fl.poptartid = ts.poptartid
    LEFT JOIN [flavorcolor] fc ON fc.flavorid = fl.flavorid

    LEFT OUTER JOIN [stomach] sa ON sa.flavorid = fc.flavorid

    LEFT JOIN [poptart] p2 ON ts.poptartid = p2.poptartid
    LEFT JOIN [temp] t ON t.tempid = p2.tempid AND t.Active = 1

  GROUP BY fc.flavorid,fc.flavorname,sa.flavorid,t.tempid
  ORDER By fc.flavorname 
```

正如您在下面看到的，这为 'berry' 的每个 'IsWarm' 值返回一个。我只想在此列表中返回不同的风味名称，但“IsWarm”字段已成为问题，因为它可以是“是”或“否”，我只想在“是”可用时显示“是”，而不是“是”和“否”，因此不会提取重复的风味名称，例如“浆果”：

```
 flavorid  |  flavorname  |  IsEaten  |  IsWarm
      123     |    berry     |    No     |   Yes
      123     |    berry     |    No     |   No
      234     |    fudge     |    Yes    |   No
      235     |    honey     |    No     |   No 
```

我如何让这个语句只返回这个..？

```
 flavorid  |  flavorname  |  IsEaten  |  IsWarm
    123     |    berry     |    No     |   Yes
    234     |    fudge     |    Yes    |   No
    235     |    honey     |    No     |   No 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T05:44:22.490

试试这个：

```
;WITH FlavorsList
AS
( 
    //Your query here
    SELECT 
      fc.flavorid,
      fc.flavorname,
    CASE 
      WHEN sa.flavorid IS NULL THEN 'No'
      ELSE 'Yes' END ) IsEaten
    CASE 
      WHEN t.tempid IS NULL THEN 'No' 
      ELSE 'Yes' END ) IsWarm

  FROM [poptart] p

    LEFT JOIN [diet] d ON d.Active = 1
    LEFT JOIN [toaster] ts ON p.poptartid = ts.poptartid 
                           AND d.dietname = ts.dietname
    LEFT JOIN [flavor] fl ON fl.poptartid = ts.poptartid
    LEFT JOIN [flavorcolor] fc ON fc.flavorid = fl.flavorid

    LEFT OUTER JOIN [stomach] sa ON sa.flavorid = fc.flavorid

    LEFT JOIN [poptart] p2 ON ts.poptartid = p2.poptartid
    LEFT JOIN [temp] t ON t.tempid = p2.tempid AND t.Active = 1

  GROUP BY fc.flavorid,fc.flavorname,sa.flavorid,t.tempid
)
SELECT fl.flavorid, fl.flavorname, fl.IsEaten, Max(fl.IsWarm)
FROM FlavorsList fl
GROUP BY fl.flavorid, fl.flavorname, fl.IsEaten
ORDER BY fl.flavorname 
```

我在这里所做的是用一个查询包装你的结果，该查询将`GROUP`来自你的第一个查询的结果`BY flavorid, flavorname, IsEated`。`MAX(IsWarm)`用作聚合函数，将保留vlafors名称的`IsWarm`值`DISTINCT`。*我使用CTE*编写此查询只是为了简单和易读，但您可以将其编写为嵌套查询。

# javascript - Javascript/jQuery：当 capsLock 开启时无法获取正确的 keyCode

> ID：10256491
> 
> 赞同：2
> 
> 时间：2012-04-21T05:29:13.270
> 
> 标签：javascript, keycode, lowercase, capslock

我正在尝试在按下某个键时确定 javascript 中正确的键/字符代码。似乎当 CapsLock 键打开时，无法检测到小写字母。

```
Try the combinations:
1\. a                 = a (97) shift:false
2\. Shift+A           = A (65) shift:true
3\. Capslock,A        = A (65) shift:false
4\. Capslock, Shift+A = A (65) shift:true  -- this should be 'a' 
```

案例 2 和 4 无法区分。

一个简单的小提琴来说明问题。 [http://jsfiddle.net/sramam/pet5G/3/](http://jsfiddle.net/sramam/pet5G/3/)

```
OUTPUT:
keypress 'a' shift:false charCode97 keyCode:97 which:97
keypress 'A' shift:true charCode65 keyCode:65 which:65
(CAPSLOCK ON)
keypress 'A' shift:false charCode65 keyCode:65 which:65
keypress 'A' shift:true charCode65 keyCode:65 which:65 
```

我只有一个 MacPro(Lion) 可以试一试。甚至可以检测到正确渲染的字符吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T05:44:05.343

Windows 上的按键代码是正确的，返回字母的正确按键代码，就像它会在按键上打印一样。

```
CAPS LOCK ON:

PRINTED 
CHARACTER       keyup/down      keypress    Modifiers
z               90              122         +Shift
a               65              97          +Shift
Z               90              90  
A               65              65

caps lock off:
Z               90              90          +Shift
A               65              65          +Shift
z               90              122 
a               65              97 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T05:47:29.513

按键检测实际上是“正确的”。您遇到的问题是在 OS X Lion 上，如果您启用大写锁定并按 shift，它会忽略大写锁定。在 Windows 上，shift + caps lock 将返回小写字母。在您的 Mac 上，它将返回大写字母。这与浏览器如何解释按键无关，而是操作系统注册的内容。

尝试输入任何应用程序，即终端，你应该明白我的意思。

这可能是其他 Mac OS 版本的情况，我在配备 OS X Lion 的 MacBook Air 上对此进行了测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T05:49:12.873

所有浏览器都支持keydown、keyup和keypress事件，但是由于事件对象的keyCode属性的值从未标准化，因此存在一些互操作性问题。

```
// The legacy keyCode property of the keydown event object is not standardized
// But the following values seem to work for most browsers and OSes.
Keymap.keyCodeToKeyName = {
// Keys with words or arrows on them
8:"Backspace", 9:"Tab", 13:"Enter", 16:"Shift", 17:"Control", 18:"Alt",
19:"Pause", 20:"CapsLock", 27:"Esc", 32:"Spacebar", 33:"PageUp",
34:"PageDown", 35:"End", 36:"Home", 37:"Left", 38:"Up", 39:"Right", 40:"Down", 45:"Insert",  46:"Del",
// Number keys on main keyboard (not keypad)  
48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",
// Letter keys. Note that we don't distinguish upper and lower case 
65:"A", 66:"B", 67:"C", 68:"D", 69:"E", 70:"F", 71:"G", 72:"H", 73:"I", 74:"J", 75:"K", 76:"L", `   77:"M", 78:"N", 79:"O", 80:"P", 81:"Q", 82:"R", 83:"S", 84:"T", 85:"U", 86:"V", 87:"W", 88:"X", 89:"Y", 90:"Z",`

// Keypad numbers and punctuation keys. (Opera does not support these.)
96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9", 106:"Multiply", 107:"Add", 109:"Subtract", 110:"Decimal", 111:"Divide",
// Function keys
112:"F1", 113:"F2", 114:"F3", 115:"F4", 116:"F5", 117:"F6", 118:"F7", 119:"F8", 120:"F9", 121:"F10", 122:"F11", 123:"F12", 124:"F13", 125:"F14", 126:"F15", 127:"F16", 128:"F17", 129:"F18",  130:"F19", 131:"F20", 132:"F21", 133:"F22", 134:"F23", 135:"F24",
// Punctuation keys that don't require holding down Shift
// Hyphen is nonportable: FF returns same code as Subtract
59:";", 61:"=", 186:";", 187:"=", // Firefox and Opera return 59,61 188:",", 190:".", 191:"/", 192:"`", 219:"[", 220:"\\", 221:"]", 222:"'"
}; 
```

# slickgrid - Slickgrid 按需添加新行

> ID：10256495
> 
> 赞同：0
> 
> 时间：2012-04-21T05:30:00.257
> 
> 标签：slickgrid, newrow

有没有办法根据需要向 slickgrid 添加新行？例如，在页面上有一个按钮，单击时会显示新行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T06:32:36.250

使用 dataView.addItem(params) 可以轻松完成，只需将 params 替换为您的参数..

```
function addNewRow(){
   var item = { "id": "new_" + (Math.round(Math.random() * 10000)), "Controller": tempcont, "SrNo1": tempsrno };             
   dataView.addItem(item);
} 
```

这里 id, Controller, SrNo1 是列的 id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T18:54:25.507

您可以通过将“onAddNewRow”侦听器订阅到网格对象来动态添加行，例如单击按钮。正如许多人建议的那样，最好使用[dataView 插件](https://github.com/mleibman/SlickGrid/wiki/DataView)与您的数据交互。请注意，您需要将“enableAddRow”选项设置为“true”。

首先，DataView 要求在添加新行时设置唯一的行“id”。计算这一点的最佳方法是使用 dataView.getLength() ，它将为您提供网格中当前存在的行数（我们将用作新行的 id）。DataView addItem 函数需要一个项目对象。所以我们创建一个空的 item 对象并将 id 附加到它上面。

其次，当您添加数据时，您将只关注一个单元格。输入该数据后（通过模糊该单元格），DataView 将注意到您尚未为该行中的任何剩余单元格输入数据（当然），并将其默认值设置为“未定义”。这并不是真正想要的效果。所以你可以做的是遍历你明确设置的列，并将它们附加到我们的项目对象中，值为“”（空字符串）。

第三，我们不希望所有单元格都是空白的。实际上，我们希望显示原始单元格输入的数据。我们有这些数据，所以我们可以最后设置它，这样它就会覆盖我们之前设置的“”（空字符串）值。

最后，我们要更新网格，使其显示所有这些更改。

```
grid.onAddNewRow.subscribe(function (e, args) {
            var input = args.item;
            var col = Object.keys(input)[0]
            var cellVal = input[Object.keys(input)[0]]

            // firstly
            var item = {}; 
            item.id = dataView.getLength();

            // secondly
            $.each(columns, function(count, value) {
                colName = value.name
                console.log(colName)
                item[colName] = ""
            })

            // thirdly
            item[col] = cellVal
            dataView.addItem(item);

            // lastly
            grid.invalidateRows(args.rows);
            grid.updateRowCount();
            grid.render();
            grid.resizeCanvas();
        }); 
```

我希望这有帮助。干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T06:23:28.187

```
var newRow = {col1: "col1", col2: "col2"};
var rowData = grid.getData();
rowData.splice(0, 0, newRow);
grid.setData(rowData);
grid.render();
grid.scrollRowIntoView(0, false); 
```

对我来说工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:38:18.450

除了创建新行之外，我还需要显示它，以便用户可以开始在上面书写。我正在使用分页，所以这就是我所做的：

```
//get pagination info
var pageInfo = dataView.getPagingInfo();

//add new row
dataView.addItem({id: pageInfo.totalRows});

//got to last page
dataView.setPagingOptions({pageNum: pageInfo.totalPages});

//got to first cell of new row
var aux = totalRows/ pageInfo.pageSize;
var row = Math.round((aux - Math.floor(aux)) * pageInfo.pageSize, 0);
grid.gotoCell(row, 0 ,true); 
```

在我使用分页之前，我只需要这个：

```
var newId = dataView.getLength();
dataView.addItem({id: newId});
grid.gotoCell(newId, 0 ,true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T10:11:47.663

您始终可以向网格中添加新行。您需要做的就是将该行的数据对象添加到您的网格数据中。

假设您从数据源创建网格 - `myGridData`（这是一个对象数组）。只需将新行对象推送到此数组即可。调用`invalidate`网格上的方法。

完毕 ：）

# java - 具有多个控件的 Android 列表视图

> ID：10256497
> 
> 赞同：2
> 
> 时间：2012-04-21T05:30:04.610
> 
> 标签：java, android, xml, listview

我是安卓新手。我正在开发一个应用程序，其中有一个带有编辑和删除按钮的学生列表视图。像

> * * *
> 
> ```
>  STUDENT LIST 
> ```
> 
> [ABC] [编辑] [删除]
> 
> [DEF] [编辑] [删除]
> 
> * * *

使用此代码，我可以在`<Textview>`

```
public class DataBaseDemoActivity extends ListActivity {
/** Called when the activity is first created. */
  SQLiteDatabase db;
  Button btnInsert;
  ArrayAdapter<String> students;

  @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  try{
  db=openOrCreateDatabase("StudentDB",SQLiteDatabase.CREATE_IF_NECESSARY,null);

  Cursor c=db.rawQuery("SELECT * FROM temp",null);
  String[] students = new String[c.getCount()];

  if (c.moveToFirst())
  {                       
      for (int i = 0; i < c.getCount(); i++)
      {
          students[i] = c.getString(0).toString()+" "+c.getString(1).toString();
          c.moveToNext();
      }           
  }
  c.close();

  setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, students));

  ListView lv = getListView();
  lv.setTextFilterEnabled(true);

  lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
      // When clicked, show a toast with the TextView text
      Toast.makeText(getApplicationContext(), ((TextView) view).getText(),
          Toast.LENGTH_SHORT).show();
    }
  });

  }catch(SQLException e)
  {
  }
} 
```

}

我需要将记录的 ID 存储在列表视图中，这样当我单击编辑或删除按钮时，我必须找出 ID 并在数据库上进行更改。我如何将值设置为两个字段，例如`<TextView>`[显示详细信息] 和`<EditText>`[可见性：不可见 - 保存记录的 id]。我可以`<TextView>`使用上面的代码获取详细信息。任何建议将不胜感激。

更新 ：

我正在使用的布局

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"    
    >
    <EditText 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="invisible"
        android:inputType="text"
        android:onClick="showInfo"
        />
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="230dip"
        android:layout_height="wrap_content"
        android:textSize="16sp"
        android:id="@+id/studentInfo" >
    </TextView>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/action"
        android:onClick="showInfo"
         />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:39:39.873

在这条线之后..

```
 students[i] = c.getString(0).toString()+" "+c.getString(1).toString();
    student_ids[i]=Integer.parseInt(//get the  id... )
  //and you dont need to put it in invisible edittext... 
```

在 onclick 方法中，您将获得整数“位置”..并在该位置的 students_ids[] 中获得 tha 值..

```
 int id=students_ids[position]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T05:39:56.847

您可以在游标数据获取循环中获取 Id，`HashMap<id,String>`为其使用任何集合并将 id 与数据（文本）一起存储。

根据您的要求，我建议您使用`SimpleCursorAdapter`而不是`ArrayAdapter`with `ListView`。

因此，您可以使用列表轻松管理数据库记录，并在单击列表项时获取与特定记录的数据库相关的所有信息。

看看[SimpleCursorAdapters 和 ListViews](http://thinkandroid.wordpress.com/2010/01/09/simplecursoradapters-and-listviews/)

[为 Android 创建自定义 CursorAdapter](http://blog.cluepusher.dk/2009/11/16/creating-a-custom-cursoradapter-for-android/)

# macos - Mac OS：如何在 Mac OS 应用程序中绘制图形？

> ID：10256499
> 
> 赞同：3
> 
> 时间：2012-04-21T05:30:14.640
> 
> 标签：macos, osx-lion

我正在开发一个 Mac OS X 应用程序。在那我必须画一个波形图/图表。是否有任何可用的库/框架使我的工作变得轻松？实现这一目标的最佳方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T06:49:30.297

[Core Plot](http://code.google.com/p/core-plot/)是适用于 iOS 和 OS X 的绘图框架。我不确定它是否具有您想要的确切类型的图形，但它可能是您最好的选择。

如果基于 Web 的 API 是可以接受的，那么您可以查看 Wolfram Alpha API（如 @estro 建议的那样）或[Google Chart API](https://developers.google.com/chart/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T06:54:31.680

你可以试试[Wolfram Alpha API](http://products.wolframalpha.com/api/)。

# postgresql - 用于检查日期范围的 Postgresql 函数

> ID：10256502
> 
> 赞同：0
> 
> 时间：2012-04-21T05:30:38.013
> 
> 标签：postgresql

我不确定如何使用 postgres 函数检查日期范围。我想要做的是检查日期是否在一定范围内（在开始日期前一周有余地）

所以基本上，我想检查一个日期是否在 之间`7 days before to current date`，如果是，我将返回该行的 id。

```
create or replace function eight(_day date) returns text as $$
declare
  r record;
  check alias for $1;
  startDate date;
begin
    for r in
    select * from terms
    order by starting;
  loop
    startDate := r.starting;
    if check between (..need help to create 7 days before startDate) and startDate return r.id;

end;
$$ language plpgsql; 
```

我还必须检查上一条记录的结束日期是否与 startDate - 7 天相冲突。如何查看以前的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:42:13.640

听起来你想使用一个[区间](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html#DATATYPE-INTERVAL-INPUT)：

```
startDate - interval '...' 
```

既然你在做作业，我就不多说了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:34:34.327

日期适用于整数数学。

startdate - 8 等价于 (startdate::timestamp - '8 days'::interval)::date

# r - 类似于“which.max”和“which.min”的中位数函数/从data.frame中提取中位数行

> ID：10256503
> 
> 赞同：8
> 
> 时间：2012-04-21T05:30:43.580
> 
> 标签：r, dataframe, subset

我有时需要根据其中一个变量的值从 data.frame 中提取特定行。具有最大值 ( ) 和最小值 ( )`R`的内置函数，可让我轻松提取这些行。`which.max()``which.min()`

中位数是否有等价物？还是我最好的选择是编写自己的函数？

这是一个示例 data.frame 以及我将如何使用`which.max()`and `which.min()`：

```
set.seed(1) # so you can reproduce this example
dat = data.frame(V1 = 1:10, V2 = rnorm(10), V3 = rnorm(10), 
                 V4 = sample(1:20, 10, replace=T))

# To return the first row, which contains the max value in V4
dat[which.max(dat$V4), ]
# To return the seventh row, which contains the min value in V4
dat[which.min(dat$V4), ] 
```

对于这个特定示例，由于存在偶数个观察值，我需要返回两行，在本例中为第 2 行和第 10 行。

## 更新

似乎没有为此的内置函数。因此，以[Sacha 的回复](https://stackoverflow.com/a/10256589/1270695)为起点，我编写了这个函数：

```
which.median = function(x) {
  if (length(x) %% 2 != 0) {
    which(x == median(x))
  } else if (length(x) %% 2 == 0) {
    a = sort(x)[c(length(x)/2, length(x)/2+1)]
    c(which(x == a[1]), which(x == a[2]))
  }
} 
```

我可以按如下方式使用它：

```
# make one data.frame with an odd number of rows
dat2 = dat[-10, ]
# Median rows from 'dat' (even number of rows) and 'dat2' (odd number of rows)
dat[which.median(dat$V4), ]
dat2[which.median(dat2$V4), ] 
```

有什么建议可以改进吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-21T10:14:09.310

虽然 Sacha 的解决方案非常笼统，但中位数（或其他分位数）是顺序统计数据，因此您可以从`order (x)`（而不是`sort (x)`分位数值）计算相应的索引。

调查`quantile`，可以使用类型 1 或 3，在某些情况下，所有其他类型都会导致两个值的（加权）平均值。

`quantile`我选择了类型 3，并从线索中复制和粘贴一点：

```
which.quantile <- function (x, probs, na.rm = FALSE){
  if (! na.rm & any (is.na (x)))
  return (rep (NA_integer_, length (probs)))

  o <- order (x)
  n <- sum (! is.na (x))
  o <- o [seq_len (n)]

  nppm <- n * probs - 0.5
  j <- floor(nppm)
  h <- ifelse((nppm == j) & ((j%%2L) == 0L), 0, 1)
  j <- j + h

  j [j == 0] <- 1
  o[j]
} 
```

一个小测试：

```
> x <-c (2.34, 5.83, NA, 9.34, 8.53, 6.42, NA, 8.07, NA, 0.77)
> probs <- c (0, .23, .5, .6, 1)
> which.quantile (x, probs, na.rm = TRUE)
[1] 10  1  6  6  4
> x [which.quantile (x, probs, na.rm = TRUE)] == quantile (x, probs, na.rm = TRUE, type = 3)

  0%  23%  50%  60% 100% 
TRUE TRUE TRUE TRUE TRUE 
```

这是您的示例：

```
> dat [which.quantile (dat$V4, c (0, .5, 1)),]
  V1         V2          V3 V4
7  7  0.4874291 -0.01619026  1
2  2  0.1836433  0.38984324 13
1  1 -0.6264538  1.51178117 17 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-21T05:48:20.550

我认为只是：

```
which(dat$V4 == median(dat$V4)) 
```

但要小心，因为如果没有一个中间数字，中位数取两个数字的平均值。例如`median(1:4)`，给出不匹配任何元素的 2.5。

# 编辑

这是一个函数，它将为您提供中位数的元素或与中位数平均值的第一个匹配项，类似于如何`which.min()`为您提供仅等于最小值的第一个元素：

```
whichmedian <- function(x) which.min(abs(x - median(x))) 
```

例如：

```
> whichmedian(1:4)
[1] 2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T09:23:25.327

我编写了一个更全面的函数来满足我的需求：

```
row.extractor = function(data, extract.by, what) {
# data = your data.frame
# extract.by = the variable that you are extracting by, either
#              as its index number or by name
# what = either "min", "max", "median", or "all", with quotes
  if (is.numeric(extract.by) == 1) {
    extract.by = extract.by
  } else if (is.numeric(extract.by) != 0) {
    extract.by = which(colnames(dat) %in% "extract.by")
  } 
  which.median = function(data, extract.by) {
    a = data[, extract.by]
    if (length(a) %% 2 != 0) {
      which(a == median(a))
    } else if (length(a) %% 2 == 0) {
      b = sort(a)[c(length(a)/2, length(a)/2+1)]
      c(max(which(a == b[1])), min(which(a == b[2])))
    }
  }
  X1 = data[which(data[extract.by] == min(data[extract.by])), ] 
  X2 = data[which(data[extract.by] == max(data[extract.by])), ]
  X3 = data[which.median(data, extract.by), ]
  if (what == "min") {
    X1
  } else if (what == "max") {
    X2
  } else if (what == "median") {
    X3
  } else if (what == "all") {
    rbind(X1, X3, X2)
  }
} 
```

一些示例用法：

```
> row.extractor(dat, "V4", "max")
  V1         V2       V3 V4
1  1 -0.6264538 1.511781 17
> row.extractor(dat, 4, "min")
  V1        V2          V3 V4
7  7 0.4874291 -0.01619026  1
> row.extractor(dat, "V4", "all")
   V1         V2          V3 V4
7   7  0.4874291 -0.01619026  1
2   2  0.1836433  0.38984324 13
10 10 -0.3053884  0.59390132 14
4   1 -0.6264538  1.51178117 17 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-25T09:39:42.880

假设要从中获取中位数的向量是`x`。

该函数`which.min(x[x>=median(x)])`将给出中值 if`length(x)=2*n+1`或两个中间值中的较大值 if `length(x)=2*n`。如果您想获得两个中间值中较小的一个，您可以稍微调整它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-26T12:07:17.093

在 Sacha 和 cbeleites 给出的答案的基础上，这是一个获得包容性分位数指数的函数。与先前答案的一个不同之处在于，该`type`论点是公开的，并且会产生略有不同的分位数结果（请参阅 参考资料`?quantile`）。如果性能是一个问题，可以将 sapply 替换为`parallel`包中的版本 - 例如`unlist(mclapply(...))`.

```
# Extract indices corresponding to inclusive quantiles
# EXAMPLE:
#
#   x <- c(2.34, 5.83, NA, 9.34, 8.53, 6.42, NA, 8.07, NA, 0.77)
#   probs <- c(0, .23, .5, .6, 1)
#   which.quantile(x, probs, na.rm = TRUE)
#
# OUTPUT: 10  1  6  8  4
#
#   x[ which.quantile(x, probs, na.rm = TRUE) ]
#
# OUTPUT: 0.77 2.34 6.42 8.07 9.34
#
#   x <- c(2, 1, 3)
#   p <- c(0.5)
#   x[ which.quantile(x, p) ]
#
# OUTPUT: 2
which.quantile <- function (x,
                            probs,
                            na.rm = FALSE,
                            type = 7) {
  stopifnot(all(probs >= 0.0))
  stopifnot(all(probs <= 1.0))
  quants = quantile(x,
                    probs = probs,
                    na.rm = na.rm,
                    type = type)
  which.nearest <- function(quant) {
    return(which.min(abs(x - quant)))
  }
  return(sapply(X = quants, FUN = which.nearest))
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-18T14:08:52.917

我们只需要一个通过近似匹配返回值位置的函数：

```
match.approx <- function(x, y) {
    ## Purpose: Match Approximately for Numerical Data
    ## Arguments:
    ##   "x":  a vector of numeric values.
    ##   "y":  a vector of numeric values. 
    ## RETURN:
    ##   The index in "y" that indicates the closest y value to each of "x" value. 
    ## ________________________________________________

    sapply(x, function(x0) which.min(abs(x0 - y)))
}
if (F) {
  match.approx(c(4.2, 1.2, 15), 1:10)                #  4  1 10
} 
```

以下是查找分位数位置的示例：

```
set.seed(1)
a <- rnorm(100)
match.approx(quantile(a), a)
# 0%  25%  50%  75% 100% 
# 14   29   23   63   61 
```

# c - 编译错误/查询

> ID：10256511
> 
> 赞同：-5
> 
> 时间：2012-04-21T05:33:03.560
> 
> 标签：c, syntax-error

我的代码中不断出现这些错误，我不确定它们的含义，有人可以向我解释它们的含义吗？

错误：

> lab62.c：在函数'circumfence'中：
> 
> lab62.c:7:1：错误：在 'void' 之前需要 '='、','、';'、'asm' 或 '<strong>attribute'</p>
> 
> lab62.c:31:1: 错误：在 '{' 标记 lab62.c:40:1: 错误：预期 ' ='、','、';'、'asm' 或 '<strong>attribute' 在 '{' 标记之前
> 
> lab62.c:49:1: 错误：在 '{' 标记之前需要 '='、','、';'、'asm' 或 '<strong>attribute'
> 
> lab62.c:55:1：错误：输入结束时应为“{”

编辑：我刚刚在函数中添加了分号，现在我得到了所有这些错误

> lab62.c：在函数'circumfence'中：
> 
> lab62.c:36:2：警告：格式“%f”需要“double”类型的参数，但参数 2 的类型为“float *”[-Wformat]
> 
> lab62.c：在功能“区域”中：
> 
> lab62.c:44:8: 错误：二进制 ^ 的操作数无效（有 'float' 和 'int'）
> 
> lab62.c:45:2：警告：格式“%f”需要“double”类型的参数，但参数 2 的类型为“float *”[-Wformat]
> 
> lab62.c：在函数“体积”中：
> 
> lab62.c:50:8: 错误: 'v' 重新声明为不同类型的符号
> 
> lab62.c:48:19：注意：之前对“v”的定义在这里
> 
> lab62.c:52:31: error: 'r' undeclared (第一次在这个函数中使用)
> 
> lab62.c:52:31：注意：每个未声明的标识符对于它出现的每个函数只报告一次
> 
> lab62.c:54:2：警告：格式“%f”需要“double”类型的参数，但参数 2 的类型为“float *”[-Wformat]

源代码：

```
#include <stdio.h>
#include <math.h>
#define pi 3.147

void circumfrence(float r)
void area(float r)
void volume(float r)

int main()
{
    void (*f[3])(float) = { circumfrence, area, volume };
    int choice;
    float r;
    printf("enter a value for the radius\n");
    scanf("%f", &r);
     printf("enter a number between 0 and 2, 3 to end: ");
    scanf("%d", &choice);

    while(choice >= 0 && choice < 3) {
        (*f[choice])(r);
        printf("enter a number between 0 and 2, 3 to end: ");
        scanf("%d", &choice);
    }
    printf("program execution completed\n ");
    return 0;
}

void circumfrence(float r)
{
    float c;
    printf("you wish to process the area");
    printf("the radius is %f: ", r);
    c = (2*r)*pi;
    printf("%f", &c);
}

void area(float r)
{
    float a;
    printf("you wish to process the volume");
    printf("the radius is %f: ", r);
    a = (r^2)*pi;
    printf("%f", &a);
}

void volume(float v)
{
    float v;
    printf("you wish to process the circumfrence");
    printf("the radius is %f: ", r);
    v = (4/3)*(r^3)*(pi);
    printf("%f", &v);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:38:45.440

您忘记`;`在代码中开头的三个函数声明之后添加一些分号。正确的代码是这样的：

```
void circumfrence(float r);
void area(float r);
void volume(float r); 
```

编辑：在第 44 行，你不能`^`在 C 中使用你想要的东西。您可以使用`a = (r*r)*pi;`or `a = pow(r,2)*pi;`Also，第 53 行中的相同内容。

在第 50 行，您重新声明了`v`变量。`f`参数和`f`变量之间存在混淆。您需要`v`在第 50 行使用另一个名称。

编辑2：

当你想打印值时，你不需要使用引用。使用 时`printf`，不要`&`在变量前面加上 a。像这样做：

```
printf("%f\n", c);
printf("%f", a);
printf("%f", v); 
```

# ruby-on-rails - Ruby on Rails - Heroku 问题和用户登录

> ID：10256512
> 
> 赞同：0
> 
> 时间：2012-04-21T05:33:14.843
> 
> 标签：ruby-on-rails, heroku, railstutorial.org

第一次在这里发帖。我对 Ruby on Rails 比较陌生，并且一直在阅读 Michael Hartl 的书“Ruby on Rails 教程 - 通过示例学习”。但是，我在运行我的应用程序时遇到了以下问题，我很乐意得到解决。

1) 当尝试在“生产”模式下运行我的应用程序时，我更新了文件“config/environments.rb”，如下所示：

```
 # force Rails into production mode when
    # you don't control web/app server and can't set it the proper way
    ENV['RAILS_ENV'] ||= 'production' 
```

但是，当我运行应用程序时，我仍然可以从文件“app/views/layouts/application.html.erb”中看到调试器工具

```
 <!--    Debug applies only to 'development' environment -->
            <%= debug(params) if Rails.env.development? -%>
    <!--    as determined by "if Rails.env.development?"    --> 
```

这让我相信我仍然在开发模式下运行应用程序。

2) 对于那些已经问过有关 signin_path 问题的人，我仍然看不到可以为我修复它的解决方案。我能够注册用户，然后自动将他们重定向到他们的个人资料空间。但是，导航菜单不会相应更改：

```
<nav class="round">
    <ul>
        <li><%= link_to "Home", root_path -%></li>
        <li><%= link_to "Support", support_path -%></li>
      <% if signed_in? %>
        <li><%= link_to "Users", users_path -%></li>
        <li><%= link_to "Profile", current_user -%></li>
        <li><%= link_to "Settings", edit_user_path(current_user) -%></li>
        <li><%= link_to "Sign out", signout_path, :method => :delete -%></li>
      <% else %>
        <li><%= link_to "Sign in", signin_path -%></li>
      <% end %> 
```

以下是“app/helpers/sessions_helper.rb”文件中的代码：

```
 def current_user # GET current_user
        @current_user ||= user_from_remember_token
    end

    def signed_in?
        !self.current_user.nil?
    end
    .
    .
    .
    private

        def user_from_remember_token
            User.authenticate_with_salt(*remember_token)
        end

        def remember_token
            cookies.signed[:remember_token] || [nil, nil]
        end 
```

非常欢迎对此提供任何帮助。我目前正在尝试托管我的应用程序 Heroku，但不幸的是没有得到我需要的支持。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:11:14.950

如果问题与 heroku 服务器有关，请检查[链接。](http://sivagollapallidotnet.wordpress.com/2011/05/10/heroku-staging-for-your-rails-app/)如果你想在本地运行，`rails s -p3001 -e production`可能会工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T08:36:07.033

好像您的已登录？助手返回的不是你想要的。那么首先调试什么signed_in？像这样返回：

```
<%= signed_in? %> 
```

或者您可以使用signed_in 引发错误？作为消息。

此外，您似乎忘记了 current_user setter 方法，该方法应在创建会话后调用。您需要使用以下三种方法：

```
 def current_user
    @current_user ||= User.find_by_id(session[:user_id])
  end

  def user_signed_in?
    !!current_user
  end

  def current_user=(user)
    @current_user = user
    session[:user_id] = if @current_user ? current_user.id : nil
  end 
```

我建议您将此方法作为受保护的方法移至 ApplicationController。

最后一个建议：

```
!self.current_user.nil? 
```

看起来真的很糟糕。尽量避免使用 bang!，这应该对你有用：

```
self.current_user 
```

# javascript - 简单的 jQuery droppable 不起作用

> ID：10256519
> 
> 赞同：4
> 
> 时间：2012-04-21T05:34:02.513
> 
> 标签：javascript, jquery, jquery-ui

Draggable 在这里工作，但是当我将 DIV 拖到可放置区域时，警报功能不会触发。我确定这很愚蠢，但也许这里有人可以阻止我把头撞到墙上，我做错了什么？

```
<head>
            <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
            <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
            <title></title>
        </head>
        <body>

    <script>
            $(function() {
                $( ".draggable" ).draggable();
                $( ".droppable" ).droppable({
                    drop: function(event, ui) {
                        alert('dropped');
                    }
                });
            });
    </script>

        <div id=10 class="draggable">one</div>

        <div id="trash" class="droppable"></div>

        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T05:40:15.760

问题在于，默认情况下，元素的中心用于确定元素的放置位置。您`div`没有定义的大小，因此它是屏幕的宽度。如果您设法将其放下，以便该元素的中心位于可放置对象中，您将看到警报。

这个带有背景颜色的小提琴说明了这个问题。

[http://jsfiddle.net/v6PME/](http://jsfiddle.net/v6PME/)

通过定义的宽度，您将看到您可能正在寻找的功能：

[http://jsfiddle.net/v6PME/1/](http://jsfiddle.net/v6PME/1/)

注意：我假设您已经省略了 css，并且`#trash`div 有一些大小，因此可以完全放入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-01T12:01:25.410

[詹姆斯蒙塔涅的回答](https://stackoverflow.com/a/10256551/5444623)是正确的。特别是它不起作用的原因（谢谢！）。

`tolerance`但是，我认为更好的解决方案是通过将droppable设置为来增加 drop precition `pointer`。

[http://jsfiddle.net/org1b75t/2/](http://jsfiddle.net/org1b75t/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T05:40:31.550

它似乎失败了，因为您的可放置 div 似乎没有任何宽度，因此您不可能将任何东西放在那里。我拿了你的例子并稍微修改了一下，我就可以让它工作了：

```
<html>
<head>
            <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
            <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
            <title></title>
        </head>
        <body>

    <script>
            $(function() {
                $( ".draggable" ).draggable();
                $( ".droppable" ).droppable({
                    drop: function(event, ui) {
                        alert('dropped');
                    }
                });
            });
    </script>

        <div id=10 class="draggable">one</div>

        <div id="trash" class="droppable">DROP HERE</div>

        </body>
        </html> 
```

# input - 为什么 line-height 属性不是我在 CSS 中设置了什么？

> ID：10256521
> 
> 赞同：-2
> 
> 时间：2012-04-21T05:34:35.610
> 
> 标签：input, css

我在 CSS 中明确设置了元素的`line-height`属性。`<input>`但是当我在firebug中检查元素时，`line-height`这个元素的值不是我在CSS中设置的。而且似乎 line-height 值与我在 CSS 中设置的无关。这可能的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:34:35.597

根据 CSS 2.1 规范中的[定义`line-height`](http://www.w3.org/TR/CSS2/visudet.html#propdef-line-height)，它对块容器元素有特定的含义，对不可替换的内联元素有不同的含义。我在那里找不到任何关于替换内联元素的声明，并且一个`input`元素可以被视为替换元素，这有点值得商榷。

无论如何，看起来很奇怪，浏览器似乎忽略`line-height`了`input`元素。作为一种解决方法，您可以考虑设置`height`属性或设置垂直填充。但是跨浏览器的结果并不一致。根据经验，我们应该期望文本输入框的呈现在浏览器的控制下，尽管在某些情况下可以使用 CSS 调整某些功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:48:01.707

不确定这是否是重点，但我指定了边距、填充并去掉了边框，这里正好是 14px：http: [//jsfiddle.net/mymlyn/Uq5Tt/2/](http://jsfiddle.net/mymlyn/Uq5Tt/2/)

如果您检查开发工具（并且在指定上述内容之前）正好是 14px：

[http://dl.dropbox.com/u/26827941/ScreenShot060.png（chrome](http://dl.dropbox.com/u/26827941/ScreenShot060.png)开发工具） [http://dl.dropbox.com/u/26827941/ScreenShot061.png（ff](http://dl.dropbox.com/u/26827941/ScreenShot061.png)中的萤火虫）

您的情况的原因可能是您的输入字段具有指定的 id 或类，

```
<input id="someID"/> 
```

并且有类似的东西

```
input#someID {line-height: 20px;} 
```

在你的css其他地方，你可能试图通过设置来改变它的值

```
input {line-height: 14px;} 
```

如果不是这样的话，我没有想法:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T05:47:25.863

lineheight 不会在 Firefox 中呈现，但我认为它会在 IE 中。有一个小技巧可以做，就是让 lineheight 样式呈现为块元素而不是内联元素。

例如：

这行不通

```
span {font-size:12px; line-height:14px} 
```

但这将：

```
span {font-size:12px; line-height:14px; display:block;} 
```

# assembly - 在添加中使用下半部分后取消引用 64 位寄存器

> ID：10256522
> 
> 赞同：2
> 
> 时间：2012-04-21T05:34:42.660
> 
> 标签：assembly, x86-64

我有一个保存内存地址的 64 位寄存器。如果我对寄存器的下半部分执行算术运算，然后尝试取消引用它，则会出现分段错误。这是一个例子：

```
movsx rax, BYTE PTR [rdi]  # ok
add edi, 1 # the address is correct but....
movsx rax, BYTE PTR [rdi] # segmentation fault here 
```

如果我在第 2 行将 edi 更改为 rdi 就可以了，所以我只是想知道为什么在这种情况下我不能使用 rdi 的下半部分。如果有人有任何关于正确使用寄存器下部的信息的链接/参考资料，我也将不胜感激。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T05:44:20.687

当您对一个`edi`或任何其他 32 位下半部寄存器进行操作时，它会自动将整个寄存器的上半部归零。

因此， 的高 32 位`rdi`将在`add edi, 1`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T05:48:40.767

摘自[《AMD64架构程序员手册第一卷：应用程序编程》](http://support.amd.com/us/Processor_TechDocs/24592_APM_v1.pdf)

3.1.2 64 位模式寄存器：

> 通常，字节和字操作数存储在 GPR 的低 8 位或 16 位中，而不会分别修改它们的高 56 位或 48 位。然而，双字操作数通常存储在 GPR 的低 32 位中，**并零扩展至 64 位**。

# cakephp - Chrome 中完全缺少 CakePHP Auth Session 变量（在某些机器上）

> ID：10256523
> 
> 赞同：3
> 
> 时间：2012-04-21T05:34:46.827
> 
> 标签：cakephp, session-variables, session-cookies, cakephp-2.1

我可以访问我的站点，查看 DebugKit > Session，然后查看“Auth”变量 - 工作正常，一切都很好。

但是 - 在两台机器上（测试了 5-7 台），并且仅在 Chrome 中，Auth 变量完全丢失。这可以防止用户登录，搞砸重定向......等等。

我们已经尝试卸载并重新安装 Chrome - 我们确保 Chrome 中的安全设置和会话/cookie 设置与所有其他工作的计算机相同......等等。（也许我们错过了一个？，但是 - 全新安装， 所以...）。我们确保我们都使用相同版本的 Chrome。

起初我认为这可能是我的代码的问题（现在仍然可能），但后来我们尝试在其中一台“愚蠢”计算机上登录另一个 Cake 站点，它做了同样的事情 - 无法登录 -在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:18:54.470

我刚刚设法在我的机器上解决了这个问题。

似乎不知何故，我的 Chrome 设法为同一个域 - CAKEPHP 获取了两个具有相同名称的 cookie。

为了确保所有浏览器的所有 cookie 都被重置，我更新了我的会话配置`/app/Config/core.php`：

```
Configure::write('Session', array(
            'defaults' => 'php',
            'cookieTimeout' => 0,
            'cookie' => 'newNameSESSION',
)); 
```

注意键 'cookie' 显式地设置了一个新的 cookie 名称来标识会话。在此更改之后，我能够从以前无法登录的所有浏览器登录到我的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:07:04.977

它一定与安全组件有关。当我关闭它时，他们可以正常登录。

仍然不确定到底是什么问题，但将我的网站升级到[CakePHP 2.2 beta](https://github.com/cakephp/cakephp/tree/2.2)，**现在已经不是问题了**。

发行说明[在这里](http://bakery.cakephp.org/articles/markstory/2012/04/30/cakephp_2_1_2_2_2_0-beta_released)。

以下是 2.1.2 稳定版本（我在 2.1 上）的一些发行说明 - 这些是与 Sessions/Auth...等相关的，可能与该问题有关：

*   如果会话为空，AuthComponent 现在使用 loginRedirect 作为默认重定向位置。
*   恢复了对 CakeSession 的更改，以帮助解决 IE8 和会话丢失的问题。
*   SessionComponent::id() 总是返回 sessionid。如有必要，它将自动启动会话。

# python - Pycrypto 导入密钥

> ID：10256525
> 
> 赞同：-1
> 
> 时间：2012-04-21T05:35:42.203
> 
> 标签：python, pycrypto

我遇到了 pycrypto 公钥加密的问题。当我有私钥时加密工作正常，但是当我只导入公钥加密失败时：

在 [85] 中：导入 Crypto.PublicKey.RSA

在 [86] 中：key = Crypto.PublicKey.RSA.importKey(open('/etc/pki/server.pub', 'r').read())

在 [87] 中：键。

在 [87] 中：key.encrypt('cheese', 32)

出[87]：（'奶酪'，）

最后我检查了它看起来没有加密。谁能帮我看看我在 pycrypto api 中缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:32:02.140

我测试了您的代码（当然使用不同的 RSA 密钥），它似乎可以正常工作。您确定密钥文件是 RSA 公钥并且不为空吗？做什么`print key`和`key.has_private()`返回？

# jquery - 在响应式图像 jquery resizer 上将最大尺寸设置为本机图像尺寸

> ID：10256526
> 
> 赞同：0
> 
> 时间：2012-04-21T05:36:09.727
> 
> 标签：jquery, responsive-design

预警：我是大新手。

我有这段代码我正在使用它根据浏览器窗口的大小调整我网站上的图像大小。问题是，图像也被放大到原始大小，创建丑陋和像素化的图像。我想知道是否：

有一种方法可以添加一些代码，以防止图像放大到超过其原始上传大小。

任何帮助将不胜感激。

这是我目前拥有的：

```
(function( $ ) {

$.fn.aeImageResize = function( params ) {

var aspectRatio = 0
// Nasty I know but it's done only once, so not too bad I guess
// Alternate suggestions welcome :)
,   isIE6 = $.browser.msie && (6 == ~~ $.browser.version)
;

// We cannot do much unless we have one of these
if ( !params.height && !params.width ) {
return this;
}

// Calculate aspect ratio now, if possible
if ( params.height && params.width ) {
aspectRatio = params.width / params.height;
}

// Attach handler to load
// Handler is executed just once per element
// Load event required for Webkit browsers
return this.one( "load", function() {

// Remove all attributes and CSS rules
this.removeAttribute( "height" );

this.style.height = "";

var imgHeight = this.height
, imgWidth = this.width
, imgAspectRatio = imgWidth / imgHeight
, bxHeight = params.height
, bxWidth = params.width
, bxAspectRatio = aspectRatio;

// Work the magic!
// If one parameter is missing, we just force calculate it
if ( !bxAspectRatio ) {
if ( bxHeight ) {
bxAspectRatio = imgAspectRatio + 1;
} else {
bxAspectRatio = imgAspectRatio - 1;
}
}

// Only resize the images that need resizing

if ( imgAspectRatio > bxAspectRatio ) {
bxHeight = ~~ ( imgHeight / imgWidth * bxWidth );
} else {
bxWidth = ~~ ( imgWidth / imgHeight * bxHeight );
}

this.height = bxHeight-100;

})
.each(function() {

// Trigger load event (for Gecko and MSIE)
if ( this.complete || isIE6 ) {
$( this ).trigger( "load" );
}
});
};
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T20:55:10.947

在函数的开头试试这个：

```
if (params.height < this.height ||
    params.width < this.width)
{
  return this;
} 
```

# python - 将 Eclipse 与 PyWin32 结合使用

> ID：10256531
> 
> 赞同：1
> 
> 时间：2012-04-21T05:37:33.620
> 
> 标签：python, eclipse, pydev, web2py, pywin32

我正在使用 PyDev、Python 2.6 和 PyWin32（构建 217、32 位）运行 Eclipse（Indigo），并且我调查的越多，问题就越陌生。

我正在运行一个导入以下 3 个库的 Python 程序：

```
import win32con
import win32file
import pywintypes 
```

win32con 正确导入，但 win32file 不正确（注意：win32con 是 pyc，win32file 是 pyd，在原始 Python 中）：

```
Traceback (most recent call last):
  File "....\dynamic\testpywin32.py", line 2, in <module>
    import win32file
ImportError: DLL load failed: The specified module could not be found. 
```

我在纯 Python 2.6 (IDLE) 中尝试了等效项，并且所有内容都正确导入。

比较 IDLE 和 Eclipse 中的 sys.path，Eclipse 中唯一没有的是 ['C:\Python26\Lib\idlelib']; Eclipse 唯一的额外功能（除了工作区）是 C:\eclipse\plugins\org.python.pydev.debug_2.2.4.2011121401\pysrc。

此外，我在启动后通过调试器继续使用以下命令：

```
sys.path = [sys.path from IDLE]
os.environ['PATH'] = [os.environ['PATH'] from IDLE] 
```

这似乎没有帮助。

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:20:35.360

你用的是哪个windows版本？？

我正在使用 Windows XP + pydev 插件及其作品。

转到 python 路径并尝试修复 python 鸡蛋路径，然后按应用

# android - android中的水平滚动视图和滚动视图中的表格布局对齐

> ID：10256532
> 
> 赞同：1
> 
> 时间：2012-04-21T05:37:40.100
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

   <RelativeLayout 
         android:orientation="horizontal" 
         android:id="@+id/headerLayout"
         style="@style/TitleBar">

    <TextView android:textAppearance="?android:textAppearanceMedium"
                  android:textColor="#ffffff" 
                  android:id="@+id/createpatientheader" 
                  android:background="@android:color/transparent" 
                  android:layout_width="wrap_content" 
                  android:layout_height="wrap_content" 
                  android:text="New Patient Registration" 
                  android:maxLines="1" 
                  android:layout_centerHorizontal="true" 
                  android:layout_centerInParent="true"/>

    </RelativeLayout>
  <ScrollView xmlns:android="http://schemas.android.com/apk/res/android" 
   android:layout_height="fill_parent"
   android:layout_width="fill_parent" 
   android:background="#81BEF7"
   android:scrollbarAlwaysDrawVerticalTrack="true">

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

   <HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android" 
      android:layout_height="wrap_content" 
      android:layout_width="wrap_content"
      android:scrollbarFadeDuration="0"
      android:scrollbarAlwaysDrawHorizontalTrack="true"
   >  
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">

       <TableLayout
           xmlns:android="http://schemas.android.com/apk/res/android"
           android:id="@+id/patient_fields"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:background="#81BEF7"
           android:gravity="center"
           android:stretchColumns="*">

           <TableRow>

               <TextView
                   style="@style/TextViewStandard"
                   android:gravity="left"
                   android:text="Name *"
                   android:textColor="#ffffff" 
                   android:layout_weight="1"/>

               <EditText
                   style="@style/EditTextStandard"
                   android:id="@+id/patientname"
                   android:hint="At least 3 Alphabets"
                   android:layout_span="2"
                   android:singleLine="true"
                   android:maxLength="30"
                   android:inputType="textPersonName"
                   android:layout_weight="1"
                   />
            </TableRow>
            <TableRow >
           <TextView
                   style="@style/TextViewStandard"
                   android:gravity="left"
                   android:text="Date of Birth"
                   android:textColor="#ffffff"
                   android:layout_weight="1" />

               <EditText
                   style="@style/EditTextStandard"
                   android:id="@+id/dob"
                   android:layout_span="2"
                   android:singleLine="true"
                   android:layout_weight="1"
                   />
               <DatePicker android:id="@+id/dateofbirth" 
                           android:visibility="gone"/>"
           </TableRow>

           <TableRow>
               <TextView
                   style="@style/TextViewStandard"
                   android:gravity="left"
                   android:padding="3dip"
                   android:text="Mobile"
                   android:textColor="#ffffff" 
                   android:layout_weight="1"/>
               <EditText
                   style="@style/EditTextStandard"
                   android:id="@+id/mobile"
                   android:layout_span="2" 
                   android:singleLine="true"
                   android:numeric="integer"
                   android:maxLength="10"
                   android:layout_weight="1"/>
           </TableRow>
  </TableLayout>
</LinearLayout>
</HorizontalScrollView>
</LinearLayout>
</ScrollView>
</LinearLayout> 
```

我想要我的应用程序中的两个滚动条。我已经尝试过这段代码。如果我将所有控件都放在滚动视图中，那么所有控件都会被拉伸并填满屏幕。但是如果我把它放在水平滚动中，它不会被拉伸，也不会填满屏幕。我错过了一些东西..帮助我..

# iphone - 使用 UIImagePickerControllerSourceTypeCamera 拍摄图片，它给出了不同的尺寸调整

> ID：10256541
> 
> 赞同：0
> 
> 时间：2012-04-21T05:39:06.563
> 
> 标签：iphone, uiimage, uiimagepickercontroller

我是 Detected Images using ImagePickerControllerSourceTypeCamera 这是我的代码Detected image using ImagePickerControllerSourceTypeCamera

```
-(void)imagePickerController:(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary*)info
{
    if ([[info objectForKey:UIImagePickerControllerMediaType] isEqualToString:@"public.image"]) 
    {
        [picker dismissModalViewControllerAnimated:YES];

        imgPicker = nil;

        UIImage * userOriginal = [info valueForKey:UIImagePickerControllerEditedImage];
        UIGraphicsBeginImageContext( CGSizeMake(640,640) );
        [userOriginal drawAtPoint:CGPointMake(0,0)];
        self.actualImage1= UIGraphicsGetImageFromCurrentImageContext();//self.actualImages1 is my original image
        UIGraphicsEndImageContext();
    } 
```

请指导我如何克服这个问题

感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:02:08.523

```
-(UIImage *)scaleAndRotateImage:(UIImage *)image  
{  
   int kMaxResolution = 1280; //PUT YOUR DESIRED RESOLUTION HERE

   CGImageRef imgRef = image.CGImage;  
   CGFloat width = CGImageGetWidth(imgRef);  
   CGFloat height = CGImageGetHeight(imgRef);  
   CGAffineTransform transform = CGAffineTransformIdentity;  
   CGRect bounds = CGRectMake(0, 0, width, height);  
   if (width > kMaxResolution || height > kMaxResolution) {  
      CGFloat ratio = width/height;  
      if (ratio > 1) {  
         bounds.size.width = kMaxResolution;  
         bounds.size.height = bounds.size.width / ratio;  
      }  
      else {  
         bounds.size.height = kMaxResolution;  
         bounds.size.width = bounds.size.height * ratio;  
      }  
   }  

   CGFloat scaleRatio = bounds.size.width / width;  
   CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));  
   CGFloat boundHeight;  
   UIImageOrientation orient = image.imageOrientation; 
   switch(orient) {  

      case UIImageOrientationUp: //EXIF = 1  
        transform = CGAffineTransformIdentity;  
        break;  

      case UIImageOrientationUpMirrored: //EXIF = 2  
        transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);  
        transform = CGAffineTransformScale(transform, -1.0, 1.0);  
        break;  

      case UIImageOrientationDown: //EXIF = 3
        transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);  
        transform = CGAffineTransformRotate(transform, M_PI);  
        break;  

      case UIImageOrientationDownMirrored: //EXIF = 4  
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);  
        transform = CGAffineTransformScale(transform, 1.0, -1.0);  
        break;  

      case UIImageOrientationLeftMirrored: //EXIF = 5  
        boundHeight = bounds.size.height;  
        bounds.size.height = bounds.size.width;  
        bounds.size.width = boundHeight;  
        transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);  
        transform = CGAffineTransformScale(transform, -1.0, 1.0);  
        transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);  
        break;  

     case UIImageOrientationLeft: //EXIF = 6  
        boundHeight = bounds.size.height;  
        bounds.size.height = bounds.size.width;  
        bounds.size.width = boundHeight;  
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);  
        transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);  
        break;  

     case UIImageOrientationRightMirrored: //EXIF = 7  
        boundHeight = bounds.size.height;  
        bounds.size.height = bounds.size.width;  
        bounds.size.width = boundHeight;  
        transform = CGAffineTransformMakeScale(-1.0, 1.0);  
        transform = CGAffineTransformRotate(transform, M_PI / 2.0);  
        break;  

     case UIImageOrientationRight: //EXIF = 8  
        boundHeight = bounds.size.height;  
        bounds.size.height = bounds.size.width;  
        bounds.size.width = boundHeight;  
        transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);  
        transform = CGAffineTransformRotate(transform, M_PI / 2.0);  
        break;  

     default:  
        [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];  

   }  

 UIGraphicsBeginImageContext(bounds.size);  

 CGContextRef context = UIGraphicsGetCurrentContext();  

 if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {  
     CGContextScaleCTM(context, -scaleRatio, scaleRatio);  
     CGContextTranslateCTM(context, -height, 0);  
 }  
 else {  
     CGContextScaleCTM(context, scaleRatio, -scaleRatio);  
     CGContextTranslateCTM(context, 0, -height);  
 }  

 CGContextConcatCTM(context, transform);  

 CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);  
 UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();  
 UIGraphicsEndImageContext();  
 return imageCopy; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:23:46.467

iPhone 3S 有一个 3 MegaPixels 的摄像头，而 4S 有 8 个。所以后者会给你一个更大的图像分辨率。您可以缩放图像。

# c++ - 静态常量字符串成员变量在使用前总是初始化吗？

> ID：10256545
> 
> 赞同：5
> 
> 时间：2012-04-21T05:39:43.380
> 
> 标签：c++, const-string

在 C++ 中，如果我想定义一些可以在不同的类、函数、文件中使用的**非本地 const 字符串，我知道的方法是：**

1.  使用定义指令，例如

    ```
    #define STR_VALUE "some_string_value" 
    ```

2.  const 类成员变量，例如

    ```
    class Demo {  
    public:  
      static const std::string ConstStrVal;  
    };  
    // then in cpp  
    std::string Demo::ConstStrVal = "some_string_value"; 
    ```

3.  const 类成员函数，例如

    ```
    class Demo{  
    public:  
      static const std::string GetValue(){return "some_string_value";}  
    }; 
    ```

现在我不清楚的是，如果我们使用第二种方法，变量 ConstStrVal 是否总是在任何代码实际使用之前初始化为“some_string_value”？[由于“静态初始化顺序惨败”](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.14)，我对此感到担忧。如果这个问题是有效的，为什么每个人都使用第二种方法？

哪个是最好的方法，2 还是 3？我知道#define 指令不尊重范围，大多数人不推荐它。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T06:07:32.290

> 如果我们使用第二种方法，变量 ConstStrVal 是否总是在任何情况下被任何代码实际使用之前初始化为“some_string_value”？

**不**

这取决于它被初始化的值，以及初始化的顺序。`ConstStrVal`有一个全局构造函数。

考虑使用构造函数添加另一个全局对象：

```
static const std::string ConstStrVal2(ConstStrVal); 
```

顺序不是由语言定义的，并且`ConstStrVal2`可以在构造之前调用 的`ConstStrVal`构造函数。

初始化顺序可能因多种原因而有所不同，但通常由您的工具链指定。更改链接对象文件的顺序可能（例如）更改图像初始化的顺序，然后错误就会浮出水面。

> 为什么每个人都使用第二种方法？

许多人出于很好的理由使用其他方法……</p>

> 哪个是最好的方法，2 还是 3？

3号。你也可以避免像这样的多重结构：

```
class Demo {
public:  
  static const std::string& GetValue() {
    // this is constructed exactly once, when the function is first called
    static const std::string s("some_string_value");
    return s;
  }  
}; 
```

警告：这种方法仍然能够解决中看到的初始化问题`ConstStrVal2(ConstStrVal)`。但是，与具有全局构造函数的对象相比，您可以更好地控制初始化顺序，并且更容易解决可移植的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T05:54:20.813

一般来说，我（和许多其他人）更喜欢使用函数来返回值而不是变量，因为函数为将来的增强提供了更大的灵活性。请记住，在成功的软件项目上花费的大部分时间是维护和增强代码，而不是一开始就编写代码。很难预测您今天的常量是否可能不是明天的编译时间常量。也许有一天它会从配置文件中读取。

所以我推荐方法 3，因为它可以满足您今天的需求，并为未来留下更多的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T06:03:42.983

避免将预处理器与 C++ 一起使用。另外，为什么你会在一个类中有一个字符串，但在其他类中需要它？我会重新评估你的类设计以允许更好的封装。如果你绝对需要这个全局字符串，那么我会考虑添加一个 globals.h/cpp 模块，然后在那里声明/定义字符串：

```
const char* const kMyErrorMsg = "This is my error message!"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T06:23:12.333

不要在 C++ 中使用预处理器指令，除非您试图实现任何其他方式都无法实现的神圣目的。

从标准（3.6.2）：

> 具有静态存储持续时间（3.7.1）的对象应在任何其他初始化发生之前进行零初始化（8.5）。具有静态存储持续时间的引用和具有静态存储持续时间的 POD 类型的对象可以使用常量表达式（5.19）进行初始化；这称为常量初始化。零初始化和常量初始化合称为静态初始化；所有其他初始化都是动态初始化。静态初始化应在任何动态初始化发生之前执行。对象的动态初始化是有序的或无序的。显式专门化的类模板静态数据成员的定义已排序初始化。其他类模板静态数据成员（即，隐式或显式实例化的特化）具有无序初始化。命名空间范围内定义的其他对象已按顺序初始化。在单个翻译单元中定义并具有有序初始化的对象应按照它们在翻译单元中的定义顺序进行初始化。对于具有无序初始化的对象和在不同翻译单元中定义的对象，初始化的顺序是未指定的。

因此，2 的命运取决于您的变量是静态初始化的还是动态初始化的。例如，在您的具体示例中，如果您使用`const char * Demo::ConstStrVal = "some_string_value";`（`const char Demo::ConstStrVal[]`如果该值在程序中保持不变，则更好），您可以确保无论如何它都会被初始化。使用 a `std::string`，您无法确定，因为它不是 POD 类型（我不确定这个，但相当肯定）。

第三种方法可以让您确定，贾斯汀回答中的方法确保没有不必要的结构。尽管请记住，静态方法有一个隐藏的开销，即检查变量是否已经在每次调用时初始化。如果您要返回一个简单的常量，那么仅返回您的值肯定会更快，因为该函数可能会被内联。

综上所述，尝试编写程序以免依赖静态初始化。静态变量最好被认为是一种方便，当您不得不处理它们的初始化顺序时，它们不再方便了。

# ruby - 收集推文

> ID：10256550
> 
> 赞同：-3
> 
> 时间：2012-04-21T05:40:06.647
> 
> 标签：ruby, mongodb, tweets

> **可能重复：**
> [如何收集实时推文？](https://stackoverflow.com/questions/10257418/how-can-i-collect-real-time-tweets)

我想使用 Ruby 通过 Streaming API 收集随机推文并将它们存储在 MongoDB 中。因此，我尝试使用此代码[Dakatsuka 代码](https://gist.github.com/656397/ff15fc5396704c91c19aa2ff61cc48414c429ecb) ，但它不起作用。我得到了这个协议。rb:135:in 'sysread' (Errno:ECONNRESET) 这是什么意思？我会感谢你的任何帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:12:57.593

尝试使用使用 event-machine 的 tweetstream gem。它的使用非常简单。

# python - 如何在 Python 中创建 ICMP 跟踪路由

> ID：10256560
> 
> 赞同：3
> 
> 时间：2012-04-21T05:42:02.693
> 
> 标签：python, sockets, networking, icmp

我正在尝试在 Python 中实现基于 ICMP 的 Traceroute。

我找到了一个非常有用的指南（[https://blogs.oracle.com/ksplice/entry/learning_by_doing_writing_your](https://blogs.oracle.com/ksplice/entry/learning_by_doing_writing_your)），它允许我创建一个基于 UDP 的 Traceroute（下面的代码），所以只需要修改。我尝试将发送套接字更改为 ICMP，但是没有异常我无法运行任何东西。

注意 - 下面的代码有效，但是这是一个 UDP 跟踪路由（发送一个 UDP 数据包并接收一个 ICMP 数据包），我需要我的程序发送一个 ICMP 数据包并接收一个 ICMP 数据包。这是因为如今的防火墙比以前更智能，并且在接收到随机端口的 UDP 数据包后并不总是发送 ICMP 响应。本质上，UDP 套接字需要更改为 ICMP 套接字。

我想这不是最常见的尝试和实现的事情，并且在网上研究如何做到这一点时遇到了麻烦。如果有人可以提供一些见解，将不胜感激:-)

要记住的要点是，traceroutes 通过设置 TTL 来工作，所以如果解决方案是使用 ICMP 库，那么它需要有一个可配置的 TTL :-)

```
#!/usr/bin/python

import socket

def main(dest_name):
    dest_addr = socket.gethostbyname(dest_name)
    port = 33434
    max_hops = 30
    icmp = socket.getprotobyname('icmp')
    udp = socket.getprotobyname('udp')
    ttl = 1
    while True:
        recv_socket = socket.socket(socket.AF_INET, socket.SOCK_RAW, icmp)
        send_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, udp)
        send_socket.setsockopt(socket.SOL_IP, socket.IP_TTL, ttl)
        recv_socket.bind(("", port))
        send_socket.sendto("", (dest_name, port))
        curr_addr = None
        curr_name = None
        try:
            _, curr_addr = recv_socket.recvfrom(512)
            curr_addr = curr_addr[0]
            try:
                curr_name = socket.gethostbyaddr(curr_addr)[0]
            except socket.error:
                curr_name = curr_addr
        except socket.error:
            pass
        finally:
            send_socket.close()
            recv_socket.close()

        if curr_addr is not None:
            curr_host = "%s (%s)" % (curr_name, curr_addr)
        else:
            curr_host = "*"
        print "%d\t%s" % (ttl, curr_host)

        ttl += 1
        if curr_addr == dest_addr or ttl &gt; max_hops:
            break

if __name__ == "__main__":
    main('google.com') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T03:36:57.010

这是使用 Scapy 的解决方案 - 感谢 KillianDS。

发送 ping

```
ans,unans=sr(IP(dst="www.google.com",ttl=X)/ICMP()) 
```

访问回复

```
ans.summary(lambda (s,r): r.sprintf("%IP.src%") ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:08:38.343

如果您不想自己管理套接字，[scapy](http://www.secdev.org/projects/scapy/)是构建您自己的数据包并使用它们进行基本发送/接收的好工具。[您可以在此处](http://www.secdev.org/projects/scapy/doc/usage.html#icmp-ping)找到如何 ping 的示例，从此（并阅读一些文档）您应该能够非常轻松地构建自己的跟踪路由。

# macos - MacOS 开发盒设置 - 安装哪些工具？

> ID：10256562
> 
> 赞同：1
> 
> 时间：2012-04-21T05:42:33.023
> 
> 标签：macos

我即将重建我的 Macbook - 新的 SSD，升级到 Lion 等。我现在安装了一堆很棒的工具，这让我非常有效率... vim w/ config settings, [ack](https://beyondgrep.com/) , [Homebrew](https://brew.sh/) , [Node.js](https://nodejs.org/en/#download) , [underscore -cli](https://github.com/ddopson/underscore-cli)等

我部分地开始这个问题，以便我可以记录我自己添加回来的设置步骤和工具。但我也想向社区开放它......你在你的开发盒上使用什么工具？您认为哪些实用程序和自定义是必不可少的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T06:12:03.903

显然，我要穿的第一件事是 Xcode。现在 Xcode 是一个独立的应用程序，“Xcode 命令行工具”是必须的。这些可以使用以下菜单项从 Xcode 中下载，`Xcode -> Open Developer Tools -> More Developer Tools`.

[CodeRunner](http://krillapps.com/coderunner/)对于快速尝试多种不同语言的东西非常方便。

[Dash](http://kapeli.com/dash/)非常适合快速访问多种不同语言的 API 文档。它也是一个片段管理器。

[otx](http://otx.osxninja.com/)和[class-dump](http://www.codethecode.com/projects/class-dump/)是有用的调试工具。

用于进入其他 OS X 应用程序的[F 脚本。](http://www.fscript.org/)

[Perlbrew](http://perlbrew.pl/)使运行多个版本的 perl 变得简单。

[Slender](http://dragonforged.com/slender/)通过告诉您缺少哪些分辨率等，让 iOS 应用程序中的图像管理变得更加容易。

我敢肯定还有很多我没有想到的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:39:43.277

## 基础

[Chrome](https://www.google.com/chrome) - 无需介绍

[Iterm2](http://code.google.com/p/iterm2/) - 比内置版本更好的终端程序。支持窗格和选项卡以及许多其他不错的功能。

[Ack](http://betterthangrep.com/) - grep 的高级版本 - 突出匹配，默认递归等。这是我在源代码中查找内容的 goto 工具。

* * *

## [自制](https://github.com/mxcl/homebrew/wiki/installation)：

安装单线：

```
/usr/bin/ruby -e "$(/usr/bin/curl -fksSL https://raw.github.com/mxcl/homebrew/master/Library/Contributions/install_homebrew.rb)" 
```

然后你需要构建工具（gcc 等）。您可以通过 XCode（“正常”方式）或使用[osx-gcc-installer 安装](https://github.com/kennethreitz/osx-gcc-installer)它们。

XCode 是一个巨大的 4.7G 下载，但它是 iOS 开发的要求，所以无论如何我都需要它。

使用 XCode: [App Store Link](http://itunes.apple.com/us/app/xcode/id497799835?ls=1&mt=12)，然后打开 XCode 并转到 Preferences -> Download -> Install Command-line-tools

没有 XCode：如果您不需要完整的 XCode GUI，[osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)是仅用于命令行工具的 DMG 安装程序。它要小得多，走起来也快得多。也不需要 Apple Developer 帐户。

我的啤酒：

```
ack         curl        git-subtree gnu-tar     jpeg        node        xmlto
asciidoc    docbook     gnu-getopt  imagemagick libtiff     pkg-config  xz
coreutils   gettext     gnu-sed     jasper      little-cms  wget 
```

* * *

## 维姆

PCKeyboard hack（CapsLock --> ESC）：[http ://pqrs.org/macosx/keyremap4macbook/extra.html](http://pqrs.org/macosx/keyremap4macbook/extra.html)

[https://github.com/ddopson/home](https://github.com/ddopson/home)

* * *

## 节点.js

[http://nodejs.org/#download](http://nodejs.org/#download)

看[我的另一个帖子](https://stackoverflow.com/questions/1884724/what-is-node-js/6782438#6782438)

[underscore-cli](http://github.com/ddopson/underscore-cli) - 解析和处理 JSON 数据的好工具

[jshint](http://www.jshint.com/) - 更可配置的 JSLint 版本

# android - 单击其子项时更改父项的背景颜色

> ID：10256564
> 
> 赞同：2
> 
> 时间：2012-04-21T05:42:56.627
> 
> 标签：android, android-widget, android-event

我有一个包含 LinearLayout 的 TableRow，然后这个 LinearLayout 包含一个 TextView。我想要的是，一旦点击 TextView，整个 TableRow 就会改变它的背景颜色。

我尝试使用 getParent() 和 performClick() 将单击事件从 TextView 传递到 TableRow。TableRow 的 onClick() 方法确实被调用，但它的背景颜色没有改变。

当然我已经设置了选择器

```
row.setBackgroundResource(R.drawable.menu_item_bgcolor); 
```

或者

```
row.setBackgroundDrawable(activity.getResources().getDrawable(R.drawable.menu_item_bgcolor)); 
```

不工作。任何人都可以对此提供任何见解吗？谢谢，

下面是选择器 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_pressed="true" android:drawable="@drawable/menu_item_pressed" />
<item android:state_focused="true" android:drawable="@drawable/menu_item_pressed" />
<item android:drawable="@drawable/menu_item_normal" />

</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T06:48:12.163

尝试这个

```
StateListDrawable states = new StateListDrawable();
states.addState(new int[] {android.R.attr.state_pressed},
    getResources().getDrawable(R.drawable.pressed));
states.addState(new int[] {android.R.attr.state_focused},
    getResources().getDrawable(R.drawable.focused));
states.addState(new int[] { },
    getResources().getDrawable(R.drawable.normal));
row.setImageDrawable(states); 
```

# iphone - 我在尝试捕获屏幕的一部分时收到错误“程序接收信号：”SIGABRT”

> ID：10256566
> 
> 赞同：2
> 
> 时间：2012-04-21T05:43:00.047
> 
> 标签：iphone, objective-c

我正在做一个项目，屏幕的特定部分必须保存为图像。

我创建了一个名为`customView`. 我在这个视图中放置了一个图像视图和标签，并使用以下代码来捕获图像。

```
-(IBAction)saveButtonClicked
{
    CGSize screenSize = [[UIScreen mainScreen] applicationFrame].size;
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB(); 
    CGContextRef ctx = CGBitmapContextCreate(nil, screenSize.width, screenSize.height, 8, 4*(int)screenSize.width, colorSpaceRef,
                                         kCGImageAlphaPremultipliedLast);
    CGContextTranslateCTM(ctx, 0.0, screenSize.height);
    CGContextScaleCTM(ctx, 1.0, -1.0);

    [(CALayer*)self.view.layer renderInContext:ctx];

    CGImageRef cgImage = CGBitmapContextCreateImage(ctx);
    UIImage *image = [UIImage imageWithCGImage:cgImage];
    CGImageRelease(cgImage);
    CGContextRelease(ctx);  
    [UIImageJPEGRepresentation(image, 1.0) writeToFile:filePath atomically:NO];
} 
```

**文件路径**是 /Users/mac/Library/Application Support/iPhone Simulator/3.2/Applications/388C6FB6-9D76-4507-9D3A-03D615BB63AD/Documents/savedImage.png。我`filepath`使用以下代码创建

```
NSArray *documentsArray=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docPath=[documentsArray objectAtIndex:0];
filePath = [docPath stringByAppendingPathComponent:@"savedImage.png"]; 
```

谁能告诉我如何解决这个问题？

# api - 生成rest api代码？

> ID：10256568
> 
> 赞同：2
> 
> 时间：2012-04-21T05:43:38.217
> 
> 标签：api, scaffolding

有什么东西可以从现有的类或现有的数据库中轻松生成 mvc rest api 吗？似乎架起各种标准操作并不难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T05:44:49.547

看看春袋。它允许您从数据库进行逆向工程，甚至从实体生成数据库。如果以前没有使用过弹簧，你应该考虑到一个有点陡峭的学习曲线。

# iphone - 在 iPhone 中为 c# 中的文本框预设数字小键盘

> ID：10256569
> 
> 赞同：0
> 
> 时间：2012-04-21T05:44:00.483
> 
> 标签：iphone, keyboard

嗨，我想在我的 Web 应用程序中为输入文本框预设数字键盘，以便在 iPhone 中查看移动页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T06:33:36.267

假设你的意思是“我的网络应用程序”的 HTML/CSS/JS ......

只需将输入的类型设置为`number`.

```
<input type="number" value="0" placeholder="Only numbers here!" /> 
```

# google-app-engine - appengine 仪表板在几个小时内未显示任何统计信息

> ID：10256573
> 
> 赞同：0
> 
> 时间：2012-04-21T05:44:37.780
> 
> 标签：google-app-engine

我正在测试我的 appengine 应用程序，但我已经有几个小时无法在仪表板上看到任何统计信息了。图上什么都没有。该应用程序已经运行了一段时间（前端实例小时的 79%）被调用的 URI 完全是空白的。

![在此处输入图像描述](../Images/cb7d186507de548d2ac4b8a5985b9853.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:25:32.563

我以前经历过一些滞后，但从来没有达到那个水平。也许您可以通过[生产问题](http://code.google.com/p/googleappengine/issues/entry?template=Production%20issue)与 GAE 团队取得联系。

# javascript - Openlayers - 像素坐标不正确

> ID：10256575
> 
> 赞同：0
> 
> 时间：2012-04-21T05:45:15.040
> 
> 标签：javascript, coordinates, openlayers

我正在尝试通过在地图上单击鼠标来获取坐标。

在我滚动地图之前，坐标是正确的。之后它们是错误的 - 它们从点击的位置移动。如果我改变缩放级别，下一个坐标是正确的，直到我再次滚动地图。

首先我认为`getLayerPxFromViewPortPx`返回错误的值，因为如果我滚动到左侧和顶部并单击那里，它会给我一个带有负`x`和的像素`y`。但我想这是它的工作方式，并且`x`与`y`图层中心相关。

这是我所拥有的：

```
map.events.register("点击", map, function(e){
        var opx = map.getLayerPxFromViewPortPx(e.xy) ;
        var lonlat = map.getLonLatFromPixel(opx);
        控制台日志（lonlat）

        var marker = new OpenLayers.Marker(lonlat);
        标记.addMarker（标记）

```

还有什么可能失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:17:29.893

I changed `getLonLatFromPixel()` with `var lonlat = map.getLonLatFromViewPortPx(e.xy)` and now it seems working. However I'm still curious why did the previous fail.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T15:31:42.510

在初始化函数（）中

```
 var click = new OpenLayers.Control.Click();
map.addControl(click);
click.activate(); 
```

初始化函数

```
OpenLayers.Control.Click = OpenLayers.Class(OpenLayers.Control, {
defaultHandlerOptions: {
    'single': true,
    'double': false,
    'pixelTolerance': 0,
    'stopSingle': false,
    'stopDouble': false
},

initialize: function (options) {
    this.handlerOptions = OpenLayers.Util.extend(
                    {}, this.defaultHandlerOptions
                );
    OpenLayers.Control.prototype.initialize.apply(
                    this, arguments
                );
    this.handler = new OpenLayers.Handler.Click(
                    this, {
                        'click': this.trigger
                    }, this.handlerOptions
                );
},

trigger: function (e) {
    var lonlat = map.getLonLatFromPixel(e.xy);

    N = lonlat.lat;
    E = lonlat.lon;

    alert("Bu koordinatlar civarındasınız: " + N + " N, " + E + " E");

} 
```

});

# javascript - 使用 Javascript 正则表达式从 HTML 中提取文本

> ID：10256576
> 
> 赞同：1
> 
> 时间：2012-04-21T05:45:54.363
> 
> 标签：javascript, regex

我正在尝试解析网页并获取 <li>YM# 之后的数字参考。例如，我需要从包含 HTML 的变量中获取 1234-234234

<li>YM# 1234-234234 </li>

非常感谢您的帮助！

富有的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:57:14.190

Try this:
`(<li>[^#<>]*?# *)([\d\-]+)\b`
and get the result in `$2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T06:00:31.013

`(?!<li>YM#\s)([\d-]+)`

[http://regexr.com?30ng5](http://regexr.com?30ng5)

这将匹配数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T06:07:33.937

目前，您的正则表达式只有在破折号之前有一个数字并且在它之后有一个数字时才匹配。这将让您在每个地方获得一个或多个数字：

```
/YM#[0-9]+-[0-9]+/g 
```

然后，你还需要捕获它，所以我们使用一个 cgroup 来捕获它：

```
/YM#([0-9]+-[0-9]+)/g 
```

然后我们需要再次引用捕获组，所以我们使用下面的代码而不是String.match

```
var regex = /YM#([0-9]+-[0-9]+)/g;
var match = regex.exec(text);
var id = match[1];
 // 0: match of entire regex
 // after that, each of the groups gets a number 
```

# android - 如何从 Jquery Mobile（Android 平台）调用 asp.net 网络服务

> ID：10256577
> 
> 赞同：1
> 
> 时间：2012-04-21T05:46:06.033
> 
> 标签：android, asp.net, jquery-mobile

我是一名愿意学习移动网络技术的.net 开发人员。目前我正在Android平台上工作。我发现 Jquery 是适合我的框架，因为我来自网络背景。到目前为止，我能够在 android 上创建一个简单的 Web 应用程序，但是我无法从 Jquery 对我的 .net Web 服务进行 AJAX 调用。我想为我的 android web 应用程序创建一个测试环境。

```
1\. I have ASP.NET web service running on my local computer 

    namespace JqueryMobile
    {
        [System.Web.Script.Services.ScriptService]
        public class WebService1 : System.Web.Services.WebService
        {

            [WebMethod]
            public string HelloWorld()
            {
                return "Hello World";
            }
        }
    }
my webservice URL is : http://localhost:26415/WebService1.asmx

2\. My android index.html 

     $(function(){
                $.ajax({url:"localhost:26415/WebService1.asmx/HelloWorld",
                success:function(result){
                           alert(result);
                           }});
     });
    This technique fails in local environment so, how do i test it? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T05:59:38.903

make these changes:

1.uncomment `[System.Web.Script.Services.ScriptService]` as an attribute to your Web Method

2.Also change your url to like [http://localhost:1096/MySite/WebService.asmx/HelloWorld?callback](http://localhost:1096/MySite/WebService.asmx/HelloWorld?callback)

3.try using IP address instead of loaclhost [http://IPADDRESS:1096/MySite/WebService.asmx/HelloWorld?callback](http://IPADDRESS:1096/MySite/WebService.asmx/HelloWorld?callback)

see this post:[What is the best way to call a .net webservice using jquery?](https://stackoverflow.com/questions/426420/what-is-the-best-way-to-call-a-net-webservice-using-jquery)

# asp.net-mvc-3 - 在父窗口和子窗口之间传递值

> ID：10256578
> 
> 赞同：0
> 
> 时间：2012-04-21T05:46:26.853
> 
> 标签：asp.net-mvc-3

我对 MVC 3 真的很陌生，需要帮助。

我有一个带有列表框的父窗口和一个弹出的子窗口。子窗口有一个复选框列表，当在子窗口的复选框列表中选择项目时，我需要填充父窗口的列表框。如何在 mvc 3 razor 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:32:54.787

我认为您实际上在这里寻找的不仅仅是 Razor 答案，而是在寻找 JavaScript。

Razor 只是一个生成器——你用它来构建 HTML、JavaScript（或电子邮件、XML 或 JSON 或任何你想要的文本）。现在，它是一个非常*好的*生成器，但它不能做你想做的通知事情。

然而，JavaScript 将允许您从弹出窗口向服务器传递消息，并且父窗口可以使用 JavaScript 轮询服务器以获取消息。

在不自己编写管道的情况下执行此操作的一种方法是使用可以处理客户端的库，例如 SignalR（位于[https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)，或者您可以通过 NuGet 将其安装在您的项目中） >服务器->客户端通信为您服务。

另外，如果“窗口”只是一个页面内弹出窗口，则您不必做任何几乎如此复杂的事情。您可以在同一页面上使用脚本来控制任何 DOM 元素。

希望这对一些人有所帮助，干杯。

# php - WP Alchemy：尝试回显索引

> ID：10256580
> 
> 赞同：0
> 
> 时间：2012-04-21T05:46:51.810
> 
> 标签：php, wordpress

我正在尝试向用户展示他们所在幻灯片的当前索引。使用 WP Alchemy，我可以获得所有标签和输入以正确显示它们的名称和值。但是，在尝试使用时`the_index()`，添加超过 2 张幻灯片后，我无法获得正确的索引来回显。

我已经删除了我所有的 javascript 以确保它不会与 jQuery 的`.sortable()`. 在第二张幻灯片之后，标签或输入之外的所有名称和索引都是：`_homepage_slider[slides_2][1][handle]`或`1`。我需要做的任何事情，还是只能在输入和标签中工作？

```
<?php global $wpalchemy_media_access; ?>
<div class="my_meta_control">

    <?php while($mb->have_fields_and_multi('slides_2')): ?>
    <?php $mb->the_group_open(); ?>
    <table class="meta-field sortable table" cellspacing="0">
        <tr>
            <td width="30" class="handle"><?php $mb->the_index() //Only echoes '1' after the second iteration ?></td>
            <td width="280" class="imagefield">
                <?php $mb->the_field('imgurl'); ?>
                <?php $wpalchemy_media_access->setGroupName('img-n'. $mb->get_the_index())->setInsertButtonLabel('Insert'); ?>

                <img data-image="mediafield-img-n<?php $mb->the_index() ?>" src="<?php bloginfo('template_url') ?>/framework/images/cm-no-image.jpg" />

                <div class="media-field-input hide">
                <?php echo $wpalchemy_media_access->getField(array('name' => $mb->get_the_name(), 'value' => $mb->get_the_value())); ?>
                </div>

                <div class="add-media-btn">
                <?php echo $wpalchemy_media_access->getButton(); ?>
                </div>
            </td>

            <td class="last-col">
                <?php $mb->the_field('title'); ?>
                <label for="<?php $mb->the_name(); ?>">Title</label>
                <div><input type="text" id="<?php $mb->the_name(); ?>" name="<?php $mb->the_name(); ?>" value="<?php $mb->the_value(); ?>"/></div>

                <?php $mb->the_field('handle'); ?>
                <p>Name: <?php $mb->the_name(); //Only echoes _homepage_slider[slides_2][1][handle] after second iteration ?></p>
                <p>Index: <?php $mb->the_index(); //Only echoes '1' after second iteration ?></p>

                <a href="#" class="dodelete x-btn">Remove Slide</a>
            </td>

        </tr>
    </table><!-- /.meta-field -->
    <?php $mb->the_group_close(); ?>
    <?php endwhile; ?>

    <p style="margin-bottom:15px; padding-top:5px;"><a href="#" class="docopy-slides_2 button">Add</a></p>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:48:29.307

对于任何想知道的人，WP Alchemy 不是这样工作的。您可以将字段标识符添加到元素的名称、类、id 或值属性中。回显索引时，它前面需要一个“n”。

例如：

```
<?php $mb->the_field('handle'); ?>
<input type="hidden" class="anything-i-want-n<?php $mb->the_index() //This will work ?>" name="<?php $name = $mb->get_the_name() ?>" />
<?php echo $mb->the_index() //This will not ?> 
```

# javascript - jQuery幻灯片放映类更改无法正常工作

> ID：10256585
> 
> 赞同：4
> 
> 时间：2012-04-21T05:47:42.857
> 
> 标签：javascript, jquery, html, slideshow

我正在尝试制作自己的“幻灯片”类型的 jquery 效果。我已经搞砸了很长一段时间，似乎只是在绕圈子。所以希望你们中的一个人能看到我所缺少的。

Javascript/jQuery 代码：

```
 <script type="text/javascript">
    $(document).ready(function(){
        $("body").css("display", "none");
        $("body").fadeIn(500);
        $('.slideDeactive').click(changeSlide);
    });

    function changeSlide(){
        $('.slideActive').addClass('slideDeactive').removeClass('slideActive');
        $(this.id).addClass('slideActive').removeClass('slideDeactive');
        $('.slideDeactive').click(changeSlide);
    }//end changeSlide
</script> 
```

HTML 代码：

```
<body>
<div id="slideShow">
    <div id="slideShowItem0" class="slideActive">
        ITEM 0
    </div>
    <div id="slideShowItem1" class="slideDeactive">
        ITEM 1
    </div>
    <div id="slideShowItem2" class="slideDeactive">
        ITEM 2
    </div>
</div> 
```

CSS代码：

```
#slideShow{
float: left;
border: solid white 2px;
width: 700px;
height: 200px;
}

#slideShowItem0, #slideShowItem1, #slideShowItem2{
position: relative;
width: 350px;
height: 100%;
}

.slideActive{
z-index: 1;
position: absolute;
left: 25%;
top: 0;

background-color: grey;
}

.slideDeactive{
background-color: fuchsia;

z-index: 0;
float: left;
top: -100%;

cursor: pointer;

/*Opacity compatible for all major browsers*/
filter: alpha(opacity=25);
-moz-opacity:0.25;
-khtml-opacity: 0.25;
opacity: 0.25;
} 
```

我想我的 slideActive 类也可能有错误，因为如果幻灯片在右侧，那么我认为它可能需要与左侧不同的左侧值。

让我知道你们的想法，提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T09:26:40.873

尝试这个

```
$(document).ready(function(){
    $('.slideDeactive').live('click', function()
    {
        $('.slideActive').removeClass('slideActive').addClass('slideDeactive');
        $(this).addClass('slideActive').removeClass('slideDeactive');
    });
}) 
```

代替

```
$('.slideDeactive').click(changeSlide); 
```

和

```
function changeSlide(){
        $('.slideActive').addClass('slideDeactive').removeClass('slideActive');
        $(this.id).addClass('slideActive').removeClass('slideDeactive');
        $('.slideDeactive').click(changeSlide);
    }//end changeSlide 
```

这将获得主动和非主动的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T03:22:16.887

幻灯片 jquery/css 代码的最终解决方案：

HTML 代码：

```
<body>
<div id="slideShow">
    <div class="slideCenter">
        ITEM 0
    </div>
    <div class="slideLeft">
        ITEM 1
    </div>
    <div class="slideRight">
        ITEM 2
    </div>
</div>
</body> 
```

jQuery代码：

```
 <script type="text/javascript">
    $(document).ready(function(){
        $("body").css("display", "none");
        $("body").fadeIn(500);

        $('.slideLeft').live('click', function(){
            $('.slideCenter').removeClass('slideCenter').addClass('slideLeft');
            $(this).addClass('slideCenter').removeClass('slideLeft');
        });

        $('.slideRight').live('click', function(){
            $('.slideCenter').removeClass('slideCenter').addClass('slideRight');
            $(this).addClass('slideCenter').removeClass('slideRight');
        });

    });
</script> 
```

CSS 代码：

```
#slideShow{
float: left;
border: solid white 2px;
width: 700px;
height: 200px;

margin-top: 200px;
}

.slideCenter{
z-index: 1;
position: absolute;
margin-left: 175px;
width: 350px;
height: 200px;
float: left;

background-color: grey;
}

.slideLeft{
z-index: 0;
background-color: fuchsia;
float: left;
cursor: pointer;
width: 350px;
height: 200px;

/*Opacity compatible for all major browsers*/
filter: alpha(opacity=25);
-moz-opacity:0.25;
-khtml-opacity: 0.25;
opacity: 0.25;
}

.slideRight{
z-index: 0;
background-color: yellow;
float: right;
cursor: pointer;
width: 350px;
height: 200px;

/*Opacity compatible for all major browsers*/
filter: alpha(opacity=25);
-moz-opacity:0.25;
-khtml-opacity: 0.25;
opacity: 0.25;
} 
```

非常感谢比宾的帮助！

# xml - XPath/XQuery - 选择一个节点同时排除一些元素

> ID：10256588
> 
> 赞同：3
> 
> 时间：2012-04-21T05:48:09.380
> 
> 标签：xml, xpath, xquery

我有一个需要修改的 XML 文件。首先我需要做一个分组，然后排除几个节点。

```
<cars>
    <car>
        <make>Toyota</make>
        <model>Camry</model>
        <color>White</color>
        <price>123</price>
    </car>
    <car>
        <make>Honda</make>
        <model>Accord</model>
        <color>White</color>
        <price>423</price>
    </car>
</cars> 
```

这是我进行转换的代码：

```
<root>
    {
    for $color in distinct-values(doc('cars.xml')//cars/car/color)
    let $car := doc('cars.xml')//cars/car
    return  <appearance color="{$color}">
            { $car[color eq $color ] }
            </appearance>
    }
</root> 
```

我得到：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <appearance color="White">
        <car>
            <make>Toyota</make>
            <model>Camry</model>
            <color>White</color>
            <price>123</price>
        </car>
        <car>
            <make>Honda</make>
            <model>Accord</model>
            <color>White</color>
            <price>423</price>
        </car>
    </appearance>
</root> 
```

除了一个问题外，这完成了我需要的 95% 的工作。我需要从最终的 XML 中排除节点“颜色”和“价格”，同时保留分组。

我尝试在我的退货声明中执行以下操作： { $car[color eq $color ]/*[not(self::price)][not(self::color)] }

有点作品，但它完全消除了“汽车”元素！有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T06:19:51.100

试试这个：

```
<root>
{
    let $cars-doc := doc('cars.xml')
    let $color := distinct-values($cars-doc//cars/car/color)
    return
        for $carcolor in $color
        return
            <appearance color="{$carcolor}">
            {
                for $car in $cars-doc//cars/car
                where $car/color = $carcolor
                return 
                    <car>
                    {$car/*[not(self::color or self::price)]}
                    </car>  
            }
            </appearance>
}
</root> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T22:03:34.927

我喜欢 black sowl 的解决方案，但我建议使用以下稍微干净一点的代码版本。通过这些方式清洁：

1.  不需要使用 //cars 因为汽车是根元素
2.  不需要第一个 return 语句
3.  无需反复遍历汽车/汽车
4.  在变量名中使用单数和复数来表示单个项目与序列

    ```
    <root>
        {
        let $cars := doc('cars.xml')//car
        let $colors := distinct-values($cars/color)
        for $color in $colors
        return
            <appearance color="{$color}">
                {
                for $car in $cars[color = $color]
                return 
                    <car>
                        {$car/*[not(self::color or self::price)]}
                    </car>  
                }
            </appearance>
        }
    </root> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T16:56:05.277

请注意，在 XPath 中，您不能创建新节点。您可以原封不动地返回输入文档中已经存在的节点，也可以计算诸如计数和总数之类的值，但是如果您想要一个新的或修改过的节点树，则需要 XSLT 或 XQuery。

如果您的输出将与您的输入相似，只是稍作改动，那么 XSLT 解决方案通常比 XQuery 解决方案简单得多。

# ruby-on-rails - Ruby 和 Rails 上的 Hello World (ror)

> ID：10256594
> 
> 赞同：1
> 
> 时间：2012-04-21T05:49:16.897
> 
> 标签：ruby-on-rails, ruby, macos, command-line, permissions

我在`.rb`运行 Mac OS X Lion 的计算机上将“hello world”保存为文件。我正在尝试`ruby_tutorials`在文件系统的根目录中创建一个名为的新目录，但遇到了一些麻烦。

我尝试在终端中输入命令`mkdir /ruby_tutorials`，但收到此错误消息：“权限被拒绝”。我该如何克服呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T05:51:45.800

试试这个：

```
sudo mkdir /ruby_tutorials 
```

`sudo`允许您以[超级用户](http://en.wikipedia.org/wiki/Root_user)身份执行命令。您需要管理权限才能在根目录中创建目录。使用`sudo`单个命令而不是始终具有管理权限的一个原因是它可以保护您免于意外损坏您的系统。

# master-pages - 我的设计视图不再显示，但网站运行良好。

> ID：10256597
> 
> 赞同：0
> 
> 时间：2012-04-21T05:49:31.650
> 
> 标签：master-pages

我为我的网站使用母版页，但由于某种原因，我无法再在设计视图中查看母版页。出现的只是一个带有闪烁光标的空白页。我已经玩了2个多小时了，无法弄清楚。然而，当我运行它时，一切看起来和表现都很好。我错过了什么？

这是 Site.Master 代码：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="WebApplication2.SiteMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head runat="server">
<title></title>
<%--Here is where you reference your style sheets and JQuery library.  The link href takes the
    relative path and publishes fine for the directory.  With <script> and <style> tags, copies 
    like the JQuery reference, you will need to use the '<%# Page.ResolveClientUrl() %>' to get 
    the same relative path behavior at publishing time.  Typically you would define a code block
    and choose '<%=' however page headers don't play nice with code blocks.  '<%#' defines as a
    databinding expression and then when you add Page.Header.Databind() to your code behind for
    the master page, The DataBind method evaluates all the databinding expression(s) in your 
    header at load time--%>
<link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
<link href="~/Styles/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="<%# Page.ResolveClientUrl("~/Scripts/jquery-1.4.1.min.js") %>"></script>

<asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder>
</head>

<body>
<form id="form1" runat="server">
<%--The ScriptManager is a what is used by the Microsoft controls to provide AJAX functionality.
    It needs to exist for the the AJAX libraries to be referenced and placing it right below the 
    Master's page Form tag is the best place--%>
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>

<div class="page">
    <div class="header">
        <div class="title">
            <h1>
                SalesPro Technologies Online 
            </h1>
        </div>

        <div class="loginDisplay">
            <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                <AnonymousTemplate>
                    [ <a href="~/Account/Login.aspx" ID="HeadLoginStatus" runat="server">Log In</a> ]
                </AnonymousTemplate>
                <LoggedInTemplate>
                    Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>!
                    [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" 
                        LogoutAction="RedirectToLoginPage" LogoutText="Log Out" 
                        LogoutPageUrl="~/Account/Login.aspx"/> ]
                </LoggedInTemplate>
            </asp:LoginView>
        </div>

        <div id="divMenu" class="clear hideSkiplink">

            <%-- The following code is for a traditional menu bar to appear:
                 <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" 
                      Width="40%" Orientation="Horizontal">
                 <Items>
                     <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                     <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/> 
                 </Items> 
                 </asp:Menu> --%>

            <asp:LinkButton CssClass="LinkCss floatleft" ID="linkHome" runat="server" 
                PostBackUrl="~/Default.aspx">Home</asp:LinkButton>
            <asp:LinkButton CssClass="LinkCss floatright" ID="linkAbout" runat="server" 
                PostBackUrl="~/About.aspx">About</asp:LinkButton>          
            <asp:LinkButton CssClass="LinkCss floatright" ID="linkOptions" runat="server">Options</asp:LinkButton>
            <asp:LinkButton CssClass="LinkCss floatright" ID="linkReports" runat="server" 
                PostBackUrl="~/reports.aspx">Reports</asp:LinkButton>  
        </div>

    </div>
    <div class="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server">
        </asp:ContentPlaceHolder>
    </div>
    <div class="clear">
    </div>
</div>

<div class="footer">     
</div>

</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T06:08:31.517

我认为您在其中带有 ASP 标记的评论使 Visual Studio 感到困惑。尝试`<%=` `<%#` `%>`从您的评论中删除，看看是否有帮助。如果这是您的问题，您可能需要在标签中添加空格，以免它们混淆 VS。IE。`< % =`您应该仍然能够理解您的评论。

# solr - Nutch/Solr Indexing Sentences - 解析器插件或索引插件？

> ID：10256598
> 
> 赞同：1
> 
> 时间：2012-04-21T05:50:36.677
> 
> 标签：solr, nutch, opennlp

试图将完整的句子索引为自己的领域。如果我在 Nutch 中进行句子拆分，使用 OpenNLP 或 LingPipe 之类的东西，我在哪里插入句子检测代码？在解析阶段还是在索引阶段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:09:33.167

这两个地方都需要一些修改。

nutch 解析器从爬取的内容中删除格式。因此，当内容存储在 nutch 段中时，换行符就消失了。您需要修改该部分。

默认情况下，nutch（它的 solr 执行此操作）将考虑单词而不是句子进行索引。所以你也必须在那里偷看。

# javascript - JavaScript 使 getContext() 公开？

> ID：10256601
> 
> 赞同：0
> 
> 时间：2012-04-21T05:51:03.460
> 
> 标签：javascript, html

我正在尝试获取画布的上下文，显然我得到了错误`Uncaught TypeError: Cannot call method 'getContext' of null`

显然我在它被初始化之前就得到了它？我该怎么办。如何使我的画布公开，以便它可以在其他功能中访问并消除错误？

```
 var spawnX = 5;
    var spawnY = 7;
    var realSpawnX = spawnX*32;
    var realSpawnY = spawnY*32;
    var playerImg = new Image();
    var playerImgX = new Image();
    var currX = 5;
    var currY = 7;
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");
    var imageObj = new Image();

window.onLoad = function() {

  loadGame();

};

// The map
function loadMap(map) {
  if (map == 1) {
    return [
[ 11, 1, 1, 1, 1, 1, 1, 190, 115, 1, 1, 1, 1, 1, 1, 2],
[ 190, 190, 190, 190, 190, 190, 190, 190, 13, 148, 148, 148, 148, 148, 121, 2],
[ 1, 520, 127, 127, 127, 127, 127, 13, 13, 148, 167, 167, 167, 148, 343, 1],
[ 1, 520, 127, 166, 166, 166, 127, 13, 13, 148, 167, 167, 167, 148, 343, 1],
[ 1, 520, 127, 166, 166, 166, 127, 13, 13, 148, 148, 148, 183, 148, 343, 1],
[ 1, 520, 364, 174, 127, 361, 127, 13, 13, 13, 13, 13, 13, 13, 13, 1],
[ 115, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 115],
[ 1, 514, 13, 13, 394, 343, 145, 220, 145, 145, 145, 13, 13, 13, 13, 1],
[ 1, 514, 13, 13, 343, 118, 145, 166, 166, 166, 145, 13, 13, 13, 13, 1],
[ 1, 514, 514, 13, 118, 118, 145, 166, 166, 166, 145, 13, 13, 13, 13, 1],
[ 1, 1, 1, 115, 1, 1, 145, 145, 145, 145, 145, 1, 1, 1, 1, 1]
];
    }
}

function loadGame(){
    // Load Game
    canvas = document.getElementById("canvas");
    context = canvas.getContext("2d");
    imageObj = new Image();
    var tiles = [];
    var board = loadMap(1);

    canvas.width = 512;
    canvas.height = 352;

    // Set up the tiles
for (x = 0; x <= 520; x++) {
    imageObj = new Image(); // new instance for each image
    imageObj.src = "line_tile/t"+x+".png";
    tiles.push(imageObj);
} 
var theX;
var theY;
// Draw the map by rows and cols
for (x = 0; x <= 10; x++) {
for (y = 0; y <= 15; y++) {

theX = x*32;
theY = y*32;
    //context.drawImage(tiles[board[x][y]], theY, theX,32,32);
    //console.log("Tile X: " + x + " | Tile Y: " + y + " - X Pos: " + theX + " | Y Pos: " + theY);
    }
    } 

    // DRAW THE PLAYER            
    spawnX = 5;
    spawnY = 7;
    realSpawnX = spawnX*32;
    realSpawnY = spawnY*32;
    currX = 5;
    currY = 7;
    playerImg.src = "me.gif";
    context.drawImage(playerImg, realSpawnY, realSpawnX,32,32);
    console.log("Player drawn at ("+spawnX+","+spawnY+") Real spawn: X: " +realSpawnX + " Y: " + realSpawnY);

}

// Pressing arrow keys 'moves' the player
$(document).keydown(function(e){
    if (e.keyCode == 37) { // LEFT ARROW
        currX = currX-1;
        console.log("New X:" + currX);
       return false;
    }
    if (e.keyCode == 39) { // RIGHT ARROW
        currX = currX+1;
        console.log("New X:" + currX);
       return false;
    }

    spawnX = 1;
    spawnY = 1;
    realSpawnX = spawnX*32;
    realSpawnY = spawnY*32;
    playerImgX.src = "me.gif";
    context.drawImage(playerImgX, realSpawnY, realSpawnX,32,32);
}); 
```

这是HTML页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>

    <title>Untitled 1</title>

    <script type="text/javascript" src="theGame.js"></script>
    <style type="text/css">
<!--
    #canvas {
       background:red;       
    }
-->
</style>
</head>

<body>
    <canvas id="canvas"></canvas>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T05:56:27.597

You should wait with initializing your variable until the page has been loaded:

```
var canvas = null;
var context = null;

window.onload = function() {
    canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");

    loadGame();
}; 
```

# android - 运行内存大小

> ID：10256603
> 
> 赞同：1
> 
> 时间：2012-04-21T05:51:14.583
> 
> 标签：android, eclipse, memory

我有一个由服务和一些活动组成的应用程序。设置报告的应用程序运行大小约为 15MB，这对我来说似乎太大了。Eclipse MAT 在 Leak Suspects 中报告总大小仅为 2.2 MB。我的问题是：-

1.  我的服务运行大小实际上只有 2.2 MB 吗？

2.  设置报告的 15 MB 是否与活动的后台有关，因此我不必担心？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T06:01:58.000

使用此代码希望这对您有所帮助

```
 MemoryInfo mi = new MemoryInfo();
    ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    activityManager.getMemoryInfo(mi);
    long availableMegs = mi.availMem / 1048576L;
    Log.e("Avaliable start", " "+availableMegs); 
```

# android - 以编程方式将电话设置为响铃时没有音量

> ID：10256604
> 
> 赞同：2
> 
> 时间：2012-04-21T05:51:23.693
> 
> 标签：android, volume

我想在来电时将电话模式更改为响铃。它更改为振铃模式，但不播放音乐/声音。

我是否需要为它设置任何权限。我为它设置了以下权限：

```
 <uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

我使用以下代码将其设置为振铃模式：

```
am.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
am.setStreamVolume(AudioManager.STREAM_RING,am.getStreamVolume(AudioManager.STREAM_RING),AudioManager.FLAG_PLAY_SOUND); 
```

我在三星 Galaxy Y 上测试过

# python - python - 如何将一个类方法中的变量值用于python中的另一个类

> ID：10256607
> 
> 赞同：-8
> 
> 时间：2012-04-21T05:51:50.957
> 
> 标签：python

1）我是 python 新手。我只是在一个类的方法中分配一个变量，并且该变量需要访问另一个类。2）如何在python中将a方法从一个类调用到另一个类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T06:03:20.667

我想你正在尝试做这样的事情？

```
class one:
    def __init__(self):    
        self.x = 2
class two:
    def get1(self,reference):
        print reference.x

    def get2(self):
        global x
        print x.x
x = one()
y = two()
y.get1(x)
y.get2() 
```

哪个输出：

```
2
2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:03:31.327

更多信息会有所帮助，但这是一种方法。

```
class Foo(object):

    def __init__(self):
         self.value = "from Foo"

class Bar(object):

    def __init__(self):
        print Foo().value

Bar() 
```

另一种味道

```
class Foo(object):

    def valuesForOtherClasses(self):
        self.value = "from Foo"

class Bar(Foo):

    def __init__(self):
        super(Bar, self).valuesForOtherClasses()
        print self.value

Bar() 
```

# objective-c - Cocos2D求助：cocos2D中如何设置和使用SQLite数据库？

> ID：10256612
> 
> 赞同：1
> 
> 时间：2012-04-21T05:52:25.490
> 
> 标签：objective-c, sqlite, cocos2d-iphone

我想使用 SQLite 数据库来存储使用 cocos2D 框架创建的游戏的分数。我使用一个名为 GameManager 的单例类控制器来控制我的应用程序。为了加载分数，我有一个继承 CCScene 的 ScoreScene 类，并且从 GameManager 调用该类，然后当 ScoreScene 加载并从 ScoreScene 调用 ScoreLayer 类，该类继承 CCLayer 类。我将 score 变量临时存储在 GameManager 中，并且可以从任何地方访问它。

现在请帮助我并指出我设计中的任何弱点，并帮助我如何实现 SQLite 数据库并将 GameManager 类中的分数存储到数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:46:59.610

GameManager 单例似乎负责在全球范围内管理通用数据和操作，对吧？如果有多线程情况，请小心。我认为您的设计可以使用。

对于 SQLite 部分，如果你想通过 Core Data 使用它，你可以参考苹果官方文档：

*   [核心数据编程指南：持久存储功能](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPersistentStores.html)
*   [核心数据编程指南：使用持久存储](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingPersistentStores.html#//apple_ref/doc/uid/TP40006453)

或者您可以直接通过 C 接口使用它。一些参考资料：

*   [http://klanguedoc.hubpages.com/hub/Tutorial-on-Creating-an-IOS-5-SQLite-Database-Application-IOS-5-SQLite](http://klanguedoc.hubpages.com/hub/Tutorial-on-Creating-an-IOS-5-SQLite-Database-Application-IOS-5-SQLite)
*   [在 iPhone 上使用 CoreData 或 SQLite？](https://stackoverflow.com/questions/1318467/use-coredata-or-sqlite-on-iphone)

# xslt - 如何在循环期间更新或附加 XML 节点？

> ID：10256613
> 
> 赞同：1
> 
> 时间：2012-04-21T05:52:41.480
> 
> 标签：xslt, xpath, xslt-1.0, xslt-2.0

这是我的xml：

```
<rootNode>
    <sample>
        <DO type="TD" name="ABC" ref="1">
            <text>text</text>
        </DO>
        <DO type="CI" name="DEF" ref="2">
            <text></text>
        </DO>
        <DO type="PL" name="GHI" ref="3">
            <text>text</text>
        </DO>
        <DO type="AB" name="JKL" ref="4">
            <text>text</text>
        </DO>   
    </sample>
    <Docs>
        <Document>
            <type>TD</type>
            <name>ABC</name>
            <ref>1</ref>
            <text>sample text</text>
        </Document>
        <Document>
            <type>CI</type>
            <name>DEF</name>
            <ref>2</ref>
            <text>sample text</text>
        </Document>
        <Document>
            <type>PL</type>
            <name>GHI</name>
            <ref>3</ref>
            <text>sample text</text>
        </Document>
        <Document>
            <type>AB</type>
            <name>JKL</name>
            <ref>4</ref>
            <text>sample text</text>
        </Document>
        <Document>
            <type>CD</type>
            <name>JKL</name>
            <ref>5</ref>
            <text>sample text</text>
        </Document>
    </Docs>
</rootNode> 
```

如果任何 sample/DO 的类型、名称和引用与任何 Docs/文档类型、名称和引用匹配。用 Document/text 更新 sample/DO/text。否则（如果任何 sample/Do 的 type、name、ref 与 Docs/Document type、name、ref 不匹配），则应附加 Docs/Document 中的整个 Document。

注意：样品/DO 的顺序不应改变。我的意思是，如果任何文件有任何匹配项，都应该更新。否则应追加新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:21:31.210

如果您使用 XSLT 来复制和转换文档，您可以使用两个**xsl:key**s 来查找 **Document**元素和**SO**元素。在这种情况下，您需要一个复合键

```
<xsl:key name="docs" match="Document" use="concat(type, '|', name, '|', ref)"/>
<xsl:key name="samples" match="DO" use="concat(@type, '|', @name, '|', @ref)"/> 
```

您可以首先匹配具有匹配**Document**元素的**SO元素，如下所示**

 **```
<xsl:template match="DO[key('docs', concat(@type, '|', @name, '|', @ref))]"> 
```

（如果保证所有**SO**元素都具有匹配的 **Document 元素，则可以将其简化为`<xsl:template match="DO" >`）

在此模板中，您可以简单地向此模板添加代码，以从键中的**Document元素复制****文本**元素。

 **要匹配没有相应**SO元素的****Document**元素，您可以这样做：

 **```
<xsl:apply-templates 
   select="/rootNode/Docs/Document[not(key('samples', concat(type, '|', name, '|', ref)))]"
   mode="Document"/> 
```

对于匹配的模板，您可以将其转换为**SO**元素。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="docs" match="Document" use="concat(type, '|', name, '|', ref)"/>
   <xsl:key name="samples" match="DO" use="concat(@type, '|', @name, '|', @ref)"/>

   <xsl:template match="DO[key('docs', concat(@type, '|', @name, '|', @ref))]">
      <xsl:copy>
         <xsl:apply-templates select="@*"/>
            <xsl:copy-of select="key('docs', concat(@type, '|', @name, '|', @ref))/text"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="sample">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
         <xsl:apply-templates select="/rootNode/Docs/Document[not(key('samples', concat(type, '|', name, '|', ref)))]" mode="Document"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="Document" mode="Document">
         <DO type="{type}" name="{name}" ref="{ref}">
            <xsl:copy-of select="text" />
         </DO>
   </xsl:template>

   <xsl:template match="Docs" />

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

以下是输出

```
<rootNode>
   <sample>
      <DO type="TD" name="ABC" ref="1">
         <text>sample text</text>
      </DO>
      <DO type="CI" name="DEF" ref="2">
         <text>sample text</text>
      </DO>
      <DO type="PL" name="GHI" ref="3">
         <text>sample text</text>
      </DO>
      <DO type="AB" name="JKL" ref="4">
         <text>sample text</text>
      </DO>
      <DO type="CD" name="JKL" ref="5">
         <text>sample text</text>
      </DO>
   </sample>
</rootNode> 
```

请注意，我从输出中排除了**Docs**节点，但如果您想保留它们，只需从 XSLT 中删除相关行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:25:23.423

据我所知，您不能仅通过使用纯 xpath 来更新文档，xpath 的想法主要用于根据某些比较从文档中选择特定节点。实现这一点的唯一好方法是使用另一种可以使用 xpath 和更新元素的语言，比如 php Simplexml。阅读不同的来源，许多人会推荐不同的建议，但它主要通过 xquery 解决，这里有几个链接。

[http://www.w3.org/XML/Query/](http://www.w3.org/XML/Query/)

[http://www.w3.org/TR/xquery-update-10-use-cases/](http://www.w3.org/TR/xquery-update-10-use-cases/)

[http://www.w3.org/TR/xquery-update-10/](http://www.w3.org/TR/xquery-update-10/)******

# php - 不知道为什么这段代码不起作用

> ID：10256622
> 
> 赞同：-1
> 
> 时间：2012-04-21T05:54:15.477
> 
> 标签：php, mysql, sql

出于某种原因，我得到了这个：

```
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in /home/walterg/public_html/phptest.php on line 50

Warning: mysql_close(): 5 is not a valid MySQL-Link resource in /home/walterg/public_html/phptest.php on line 60 
```

我只是想做一个简单的 sql 查询，但我得到了错误

我的代码是：

```
$con = mysql_connect("localhost","walterg_kaden","nope");

    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("walterg_learning", $con);

    $result = mysql_query("SELECT * FROM ralf");

    while($row = mysql_fetch_array($result))
     {
        echo $row['name'];
    }

    mysql_close($con); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:34:24.053

2个简单的规则让你做对

第一的。始终以这种方式运行查询，至少在您采用更智能的方式处理查询之前：

```
$sql = "SELECT * FROM ralf";
$res = mysql_query($sql) or trigger_error(mysql_error()." in ".$sql); 
```

第二。**相信你的眼睛！**

如果数据库告诉您“没有选择数据库” - 那么就是这样。表示您在前面的语句中选择了错误的数据库。检查拼写、数据库是否存在等。
这很容易。您不需要对此有任何特殊知识 - 只需要常识即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:05:00.363

拉里，你的 sql 失败了。出于调试原因（例如您今天遇到的原因），始终必须有一种方法可以在每次执行 sql 的过程中打印出任何错误 aa 故障安全，以便如果出现任何问题，您可以确保打印错误在那里，然后在发生错误时，以便您可以立即找到并解决问题

您的 SQL 查询失败。使用 mysql_error();。这将显示问题。

```
$result = mysql_query("SELECT * FROM ralf") or trigger_error(mysql_error()); 
```

PHP 数据库连接有五个步骤：

```
 // 1\. Create a database connection
    //      (Use your own servername, username and password if they are different.)
    //      $connection allows us to keep refering to this connection after it is established
    $connection = mysql_connect("localhost","root","OtlPHP07"); 
    if (!$connection) {
        die("Database connection failed: " . mysql_error());
    }

    // 2\. Select a database to use 
    $db_select = mysql_select_db("widget_corp",$connection);
    if (!$db_select) {
        die("Database selection failed: " . mysql_error());
    }

?>
<html>
    <head>
        <title>Databases</title>
    </head>
    <body>
    <?php
    // 3\. Perform database query
    $result = mysql_query("SELECT * FROM subjects", $connection);
    if (!$result) {
        die("Database query failed: " . mysql_error());
    }

    // 4\. Use returned data
    while ($row = mysql_fetch_array($result)) {
        echo $row["menu_name"]." ".$row["position"]."<br />";
    }

    ?>
    </body>
</html>
<?php
    // 5\. Close connection
    mysql_close($connection);
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T06:02:51.413

肯定有两个原因..... 1\. 可能是您在使用 select 查询或分配主机、用户名、密码、db 时分配表 naem 时弄错了 2\. 您必须在 while 循环之前使用它

```
if(mysql_num_rows($result)>0){ while($row = mysql_fetch_array($result))
     {
        echo $row['name'];
    } } 
```

希望能解决你的问题

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-21T06:03:08.180

这将告诉您查询失败的原因：

```
$result = mysql_query("SELECT * FROM ralf") or die(mysql_error()); 
```

# java - create a new and unique file each time one function is compiled in java

> ID：10256627
> 
> 赞同：-1
> 
> 时间：2012-04-21T05:55:07.860
> 
> 标签：java, file

create a new and unique file each time the function is compiled. that means if file exists already before execution of the program then it should delete the file and create a new file and append the new data. or add the content after just deleting the complete data which is already there in the same file.

I have created something like this....

```
Writer output = new BufferedWriter(new FileWriter("C:\\" + bankAccNo + ".txt", true));
output.append(myRow.getCell(0).toString()+ "\n");
output.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:13:11.237

如果您想在每次写入时覆盖文件内容，请使用`false`append 开关。

```
new FileWriter("<file>", false); 
```

# nhibernate - References in fluent hibernate mapping seems dosnt work correctly

> ID：10256633
> 
> 赞同：0
> 
> 时间：2012-04-21T05:55:47.717
> 
> 标签：nhibernate, fluent-nhibernate

I'm using fluent hibernate 1.2.0.712 and nhibernate 3.2.0.4000 in my mvc project as an OR mapper, the problem is : this is my oJob object:

```
public class Job{

    virtual public Enquiry Enquiry { get; set; }
    virtual public long Id { get; set; }
} 
```

and this is Enquiry:

```
public class Enquiry {

virtual public long Id { get; set; }
} 
```

and here is JobMap:

```
 public  class JobMap: ClassMap<Job>
{
   public JobMap()
   {
       Schema("dbo");

       Id(p => p.Id)
           .Column("Id");

       References(p => p.Enquiry);
    }
} 
```

i expect that each job has exactly one enquiry

but sometimes that i check sql server i see there are some records in job table with different ids that all have the same enquiryid

and i checked it many times and dont know when exactly it happens, what is the problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T08:50:16.620

你必须改变你的映射：改变

```
References(p => p.Enquiry); 
```

经过

```
HasOne(p => p.Enquiry); 
```

# php - how to set session time out in php?

> ID：10256634
> 
> 赞同：0
> 
> 时间：2012-04-21T05:55:50.780
> 
> 标签：php

```
session_cache_expire( 20 );
session_start(); // NEVER FORGET TO START THE SESSION!!!
$inactive = 1200;
if(isset($_SESSION['start']) ) {
    $session_life = time() - $_SESSION['start'];
    if($session_life > $inactive){
        header("Location: user_logout.php");
    }
}
$_SESSION['start'] = time();
if($_SESSION['valid_user'] != true){
header('Location: ../index.php');
}else{ 
```

I'm making an online examination system. I'm using PHP and MySQL.

I want to set the session time, but don't know how. Please help me.

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T06:11:08.290

> 我要设置会话时间

永远不要碰它。
默认会话超时对任何人都足够好。

**您将会话超时与任何应用程序超时**混淆。

而不是使用会话超时，您必须在会话本身中存储任何时间。
但不要让用户默默地登录页面来优雅地警告他们

# javascript - 视频播放完成后如何显示灯箱？

> ID：10256636
> 
> 赞同：5
> 
> 时间：2012-04-21T05:56:05.463
> 
> 标签：javascript, jquery, ajax, youtube, lightbox

我有一个 youtube 视频。

我想在它停止播放时显示一个灯箱。我需要使用 javascript/jQuery 或 PHP 来完成此操作。阿贾克斯也不错。

我寻找了一个解决方案，但没有找到一个有效的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T08:17:16.403

如果你可以使用 youtube api 那么这样的东西应该可以工作：

```
 <script type="text/javascript">
$(document).ready(function() {
var player;
    function onYouTubePlayerAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'YmHAAqOsBqA',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
    }
    function onPlayerReady(event) {
        event.target.playVideo();
    }
    function onPlayerStateChange(event) {        
        if(event.data === 0) {          
            //completed playing
            //open lightbox
            $('#yourElementId a').lightBox();
        }
    }
});
</script> 
```

你的意思是这样的吗。

希望能帮助到你

# c# - Drawing and deleting old drawings

> ID：10256639
> 
> 赞同：0
> 
> 时间：2012-04-21T05:56:21.477
> 
> 标签：c#, .net, drawing

I'm new in this forum, and my english is not perfect, so i want to excuse if my question isn't writen good.

I'm making a painting program with C# and all is perfect expect one problem. When i'm drawing a line, or rectangle or elipse, when the mouseMove event is called the old shapes is drawed too.

How to draw a shape with mouseMove event and the old shapes to not been drawed.

Here is part of my code for more clarification.

```
//---Variables declared by the Prgrammer---//
//'parent' is variable that take the MdiParent
//'mouseIsDown' is boolean variable
//'startPoint' and 'endPoint' are Point Varables
//'pen' is Pen variable that is configured eralier
//'graphic' is pictureBox in the same form.

private void pbx_MouseDown(object sender, MouseEventArgs e)
    {
        if (parent.btnLine.Checked)
        {
            mouseIsDown = true;
            startPoint = new Point(e.X, e.Y);
        }
    }

    private void pbx_MouseMove(object sender, MouseEventArgs e)
    {
        if (mouseIsDown == true && parent.btnLine.Checked)
        {
            pen = new Pen(parent.btnPreview.BackColor, 12);
            endPoint = new Point(e.X, e.Y);
            graphic.DrawLine(pen, startPoint, endPoint);
        }
    }

    private void pbx_MouseUp(object sender, MouseEventArgs e)
    {
        mouseIsDown = false;
    } 
```

Please help me. This is a big problem for me. Thanks.

* * *

Please help me, i'm waiting 2 days. When i'm making a new drawing to the graphic object, the old graphic is deleted.

I try the graphic.Save() method, but has not give me right result.

How to make the drawings to saty when i'm making another graphic?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T08:32:04.537

当您使用图片框时，您可以使用[Invalidate()](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invalidate.aspx)方法。

# javascript - 在 IE 中，脚本不会改变 div 的 innerhtml

> ID：10256641
> 
> 赞同：0
> 
> 时间：2012-04-21T05:56:46.110
> 
> 标签：javascript, html, internet-explorer, audio, embed

我正在制作一个功能，可以在单击歌曲标题时更改嵌入标签的来源。这适用于 Chrome 和 Firefox，但不适用于 Internet Explorer。

这是功能：

```
function loadSong(title) {
    var wav = "samples/" + title + ".wav";
    var ie = "<embed id='ie' src='" + wav + "'></embed>";
    if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)) { 
        //test for MSIE x.x
        var newSong = document.getElementById("playerwrapper")
        newSong.innerHTML = ie;
    } else {
        var audio = document.getElementById("audio");  
        audio.pause();
        audio.src = wav;
        audio.play();
    }
} 
```

是的，我在 Chrome 和 Firefox 中尝试了嵌入式播放器，并尝试在 IE 中将 html5 音频元素与 m4a 文件一起使用（更改源的方式与在 Chrome 和 Firefox 中相同）。

接下来，这是音频播放器本身（包括整个东西以防万一；抱歉，如果它不相关）：

```
<?php
if($samples == 1) {
    if (isset($_SERVER['HTTP_USER_AGENT']) && 
        (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== false)) 
    {
        print "
            <div id='playrwrapper'>
                <embed id='ie' src='samples/alright.wav' autostart='false'>
                </embed>
            </div>";
    } else {
        print "
            <div id='playerwrapper'>
                <audio id='audio' preload='auto' tabindex='0' controls>
                    <source id='wav' type='audio/wav' src='samples/alright.wav'/>
                </audio>
            </div>";
    };
};
?> 
```

最后，这是调用函数的方式：

```
<p onclick='loadSong("songtitle")'>Song Title</p>
<p onclick='loadSong("anothersongtitle")'>Another Song Title</p>
<p onclick='loadSong("doomkittiesofmars")'>Doom Kitties of Mars</p> 
```

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:04:13.693

IE是个婊子，不是吗？

`object`如果元素的源已更改，IE 不会重新加载元素。它仅在页面加载时加载它，期间。

那么如何解决这个问题呢？简单：克隆现有元素，删除旧元素，然后追加新元素。例子：

```
// innerHTML bla bla bla
newS = newSong.cloneNode( true ) // Deep copy
newSong.parentNode.replaceChild( newS, newSong ) 
```

# macos - 我如何再次设置我的 gcc

> ID：10256648
> 
> 赞同：0
> 
> 时间：2012-04-21T05:57:48.097
> 
> 标签：macos, bash, gcc

我试图在我的 Mac 上设置 CUDA 和 XCode 以协同工作，但失败了。在此过程中，我去`/usr/bin/`输入：

并输入`> sudo rm gcc`

然后`> sudo ln -s /opt/local/bin/gcc-4.2 gcc`

我想我搞砸了，因为现在当我输入

```
> gcc 
```

进入终端，它说

```
-bash: gcc: command not found 
```

如何修复它并设置默认的 gcc 4.2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:06:30.350

尝试做

```
sudo ln -s $(which gcc-4.2) gcc 
```

反而。这将找到`gcc-4.2`您已安装的版本并将默认版本链接`gcc`到它。

# ios - 在没有 UINavigationController 的情况下将 backBarButtonItem 添加到 navigationItem？

> ID：10256651
> 
> 赞同：0
> 
> 时间：2012-04-21T05:58:11.187
> 
> 标签：ios, ios5, uinavigationcontroller

我有一个UIViewController，我在InterfaceBuilder中添加了一个navigationItem来查看标题，我发现我无法将backBarButtonItem拖到navigationItem，只能添加leftBarButtonItem和rightBarButtonItem。所以我尝试在我的控制器代码中将 backBarButtonItem 添加到 navigationItem 元素：

```
- (void)viewWillAppear:(BOOL)animated {
   UIBarButtonItem *_backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back"   style:UIBarButtonItemStyleDone target:nil action:nil];
   self.myNavigationItem.backBarButtonItem = _backButton;
  [_backButton release];
} 
```

但是视图上仍然没有 backBarButtonItem？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:02:16.027

您必须实际设置 leftBarButtonItem，而不是 backBarButtonItem，然后才能像这样设置 self.hidesBackBarButtonItem：

```
- (void)viewWillAppear:(BOOL)animated {
 UIBarButtonItem *_backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back"   style:UIBarButtonItemStyleDone target:nil action:nil];
    self.navigationItem.hidesBackButtonItem = YES;
     self.myNavigationItem.leftBarButtonItem = _backButton;
    [_backButton release];
} 
```

# c# - How can I select the top 10 from a dictionary in .NET?

> ID：10256652
> 
> 赞同：8
> 
> 时间：2012-04-21T05:58:17.410
> 
> 标签：c#

I have a dictionary which is sorted like this:

```
var sortedDict = (from entry in dd 
                  orderby entry.Value descending  select entry
                 ).ToDictionary(pair => pair.Key, pair => pair.Value); 
```

How can I select top 10 from this sorted dictionary?

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-21T06:00:30.640

正如您在查询中提到的降序一样，我假设您需要最近 10 次出现。如果是这样

```
 var sortedDict = (from entry in dd orderby entry.Value descending select entry)
                     .Take(10)
                     .ToDictionary(pair => pair.Key, pair => pair.Value) ;

  var sortedDict = dd.OrderByDescending(entry=>entry.Value)
                     .Take(10)
                     .ToDictionary(pair=>pair.Key,pair=>pair.Value); 
```

如果您需要前 10 个，只需删除`descending`它就可以正常工作。

```
var sortedDict = (from entry in dd orderby entry.Value select entry)
                     .Take(10)
                     .ToDictionary(pair => pair.Key, pair => pair.Value) ;

var sortedDict = dd.OrderBy(entry=>entry.Value)
                     .Take(10)
                     .ToDictionary(pair=>pair.Key,pair=>pair.Value); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T06:00:23.787

Since you ordered your dictionary `descending`, then `Take`ing the first 10 results will be selecting the `TOP` 10:

```
var sortedDict = (from entry in dd 
                  orderby entry.Value descending  
                  select entry
                  ).Take(10)
                  .ToDictionary(pair => pair.Key, pair => pair.Value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T06:01:07.270

只需使用[Take(10)](http://msdn.microsoft.com/en-us/library/bb503062.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T06:01:58.050

您需要使用[Take()](http://msdn.microsoft.com/en-us/library/bb503062.aspx)方法：

```
var sortedDict = (
    from entry in dd 
    orderby entry.Value descending
    select entry)
    .Take(10)
    .ToDictionary(pair => pair.Key, pair => pair.Value); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T06:06:30.203

```
var sortedDict = (from entry in dd orderby entry.Value descending select entry)
                 .Take(10).ToDictionary(pair => pair.Key, pair => pair.Value); 
```

如果您先取 10 然后将它们转换为字典，这将更有效。在反之亦然的情况下，它将首先将它们全部转换为字典，然后从中取出 10 个。如果我们有一个大列表可供选择，这将影响效率。

# iphone - what is the difference between release and auto release and is there any way to create a user defined autorelease pool?

> ID：10256655
> 
> 赞同：-2
> 
> 时间：2012-04-21T05:59:09.353
> 
> 标签：iphone, objective-c, cocoa

> **Possible Duplicate:**
> [What is the difference between releasing and autoreleasing?](https://stackoverflow.com/questions/2076402/what-is-the-difference-between-releasing-and-autoreleasing)

Hi can you please elaborate what is the difference between release and auto release and is there any way to create a user defined autorelease pool?and the real use of auto release pool.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T06:18:34.810

Release 会立即减少对象的引用计数，这意味着如果它的保留计数达到零，它将立即被释放。Autorelease 是一个延迟发布——它对于所有权移交很有用。

考虑一个类似的方法`+[NSString stringWithFormat:]`。它创建一个新`NSString`实例（带有`alloc`& 的某种形式`init`），然后将其交给调用者。该类方法不想在那之后仍然“拥有”创建的字符串，但是如果它在返回之前释放新字符串，则新字符串将在调用者获取它之前被释放。相反，它会自动释放新字符串：这意味着该字符串将保留足够长的时间，以便调用者抓住它并在需要时保留它。

如果调用者不保留它会发生什么？这就是自动释放池发挥作用的地方。`NSAutoreleasPool`跟踪 each ，当`autorelease`被告知要耗尽时，它会释放其池中的所有对象（如果它们的引用计数变为零，则会导致它们被释放）。默认情况下，在 Mac 或 iOS 应用程序中，主事件循环中有一个自动释放池——因此，如果您调用`stringWithFormat:`并且不保留结果，它将在下一次传递时消失。

您可以使用创建自己的自动释放池`NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init]`并使用`[pool drain]`. 如果您有一段代码要创建大量临时对象，这将很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:03:00.423

`release`立即释放对象，而`autorelease`在将来的某个时间释放。

**示例：**你想`autorelease`在这里返回一个 d 对象，因为如果你这样`release`做了，在调用此方法的代码可以使用返回的对象之前，它已经得到了 dealloc！

```
- (NSObject *)someMethod
{
    return [[[NSObject alloc] init] autorelease];
} 
```

# android - Android：样式化列表视图

> ID：10256656
> 
> 赞同：2
> 
> 时间：2012-04-21T05:59:20.227
> 
> 标签：android, android-listview, android-styles

我想在 ListView 中添加一些样式，这样当 ListView 的一项悬停时，该列表项的颜色会发生变化。我不知道如何实现这一目标。

请提出一些关于样式化 ListView 的其他想法。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:18:17.153

使用选择器来定义当您聚焦项目、选择项目并按下项目时应该发生什么，我怀疑您不能将鼠标悬停在视图上，因为 Android 设备使用触摸屏界面而不是鼠标等指向界面。

这应该可以帮助您：

在名为 listselector.xml 的可绘制文件夹中创建一个 XML 文件

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:drawable="@color/blue" /> <!-- focused -->
    <item android:state_focused="true" android:state_pressed="true" android:drawable="@color/blue" /> <!-- focused and pressed-->
    <item android:state_pressed="true" android:drawable="@color/green" /> <!-- pressed -->
    <item android:drawable="@color/white" /> <!-- default -->
 </selector> 
```

然后将`TextView`您使用的背景设置`ListView`为这样

`android:background = "@drawable/listselector"`,

应该这样做。

# mysql - 将多列合并为一列

> ID：10256660
> 
> 赞同：0
> 
> 时间：2012-04-21T05:59:51.447
> 
> 标签：mysql, sql, unpivot

我想出了这个查询 - 如何将多列的结果合并为 1 ？

```
select 
    R2.start_time,
    TIME_FORMAT(time(R2.start_time - time(10000)),
            '%H:%i:%s') as '-60min',
    TIME_FORMAT(time(R2.start_time - time(3000)),
            '%H:%i:%s') as '-30min',
    TIME_FORMAT(time(R2.start_time + time(10000)) - time(3000),
            '%H:%i:%s') as 30min,
    TIME_FORMAT(time(R2.start_time + time(10000)),
            '%H:%i:%s') as 60min
from
    (select 
        rooms.id, rooms.number, rooms.building, rooms.capacity
    from
        rooms) R1,
    (select 
        exam_schedules.room_id,
            exam_schedules.day,
            exam_schedules.start_time,
            exam_schedules.end_time
    from
        exam_schedules) R2
where
    R2.room_id = R1.id and R2.day = 'tuesday' AND R1.number = 006
group by 1 
```

这是我的结果：（1 行）

```
12:30:00    11:30:00    12:00:00    13:00:00    13:30:00 
```

应该是（5行）：

```
12:30:00
11:30:00
12:00:00
13:00:00
13:30:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:16:33.517

除了使用联合声明之外，这里还有一个你可以做的事情的例子：

```
declare @dates table ( start_time datetime )

insert into @dates 
select GETDATE()

declare @offsets table ( offset int, seq int)

insert into @values
select 0, 1
union select -60, 2
union select -30, 3
union select 30, 4
union select 60, 5

select * from @dates

select 
    dateadd(minute, o.offset, r2.start_time) dt
from
    @dates r2, @offsets o
order by o.seq 
```

因为我没有你的时间函数，所以不能真正测试你的查询，但你最终会得到这样的结果：

```
declare @offsets table ( offset int, seq int)

insert into @offsets
select 0, 1
union select -60, 2
union select -30, 3
union select 30, 4
union select 60, 5

select 
    dateadd(minute, o.offset, t.start_time) dt
from
(
select 
    R2.start_time as start_time
from
    (select 
        rooms.id, rooms.number, rooms.building, rooms.capacity
    from
        rooms) R1,
    (select 
        exam_schedules.room_id,
            exam_schedules.day,
            exam_schedules.start_time,
            exam_schedules.end_time
    from
        exam_schedules) R2
where
    R2.room_id = R1.id and R2.day = 'tuesday' AND R1.number = 006
group by 1
) t
, @offsets o
order by o.seq 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T03:48:58.380

如果没有列是固定的，那么你可以试试这个

```
SELECT col1 FROM yourtable UNION SELECT col2 FROM yourtable 
```

我认为这不是最好的方法，但希望它可以帮助你。

# asp.net - 从表 1 中选择类别，从表 2 中选择产品？

> ID：10256668
> 
> 赞同：-2
> 
> 时间：2012-04-21T06:00:47.517
> 
> 标签：asp.net, sql, select

我需要显示一些产品列表。我有 2 张桌子，一张带有`categories`，一张带有所有`products`.

我需要显示这个结构：

```
list 1.
write - categories_id from categories table
write - list of products with the above categories_id from products table
end of list

next list2.
write - next categories_id from categories table
write - list of products with the above list2 categories_id from products table
end of list 
```

等等...

因此，我需要从类别中选择所有类别 ID，并从产品表中选择所有匹配的类别 ID。

这样做的最佳方法是什么？我应该从里面选择所有`categories`，然后在做直到...选择所有产品...还是？

假设类别表中有 4 个类别，因此它应该显示 4 个列表，每个列表中有 10 个产品。我拥有的 sql 如下所示：

```
sql3 = "SELECT * from categories c inner join products p on c.categories_id = p.categories_id where p.userid ='1' group by c.categories_id order by c.categories_id;"

and the do until looks like:
do until rs.eof
rs("categoriName")

rs("productsName")

rs.movenext
loop 
```

但这会生成 4 个列表，每个列表中只有 1 个产品？

好的，我的表格如下所示：

```
categories table:
categories_id, userId, categoriesName

products table:
products_id, user_id, categories_id, productsName

And the do:
<% do until rs.eof %>
Categori: <%=rs("categoriesName")%>

Product:<%=rs("productsName")%>
<% rs.movenext
loop %> 
```

列表应如下所示：

```
(list 1)
Categori: Phones
Product: iPhone
Product: Samsung
Product: Nokia

(list 2)

Categori: Tvs
Product: Philips
Product: Sony
Product: Sharp 
```

也许我只是想在一个选择中执行此操作是错误的，也许我只需要两个选择，第一个选择类别名称并循环通过该循环，然后在该循​​环内选择产品。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T06:16:08.047

这是一个查询，它将获取所有类别及其对应的产品：

```
SELECT
    c.CategoryName, P.ProductName, p.Price, ... //What data you want to select
FROM
    CategoriesList c
INNER JOIN 
    Products p ON c.Id = p. CategoryId
ORDER BY 
    c.CategoryName, p.ProductName 
```

这是您获取数据的最佳方式。然后，您可以在将使用此查询的应用程序中以您想要的方式输出这些结果，例如，在您的情况下，您应该将第`categoryname`一个打印为标题，然后将其`products`列表打印为子项，依此类推。

**更新：**例如，您如何在控制台应用程序中输出它们：

```
foreach( var category in categoriesList)
{
    Console.WriteLine("(List {0})", category.Id);
    Console.WriteLine("Category: {0}", category.Name);
    foreach(var product in category.Products)
    {
         Console.WriteLine("Product: {0}", product.Name); 
    }
} 
```

这应该打印：

```
(list 1)
Category: Phones
Product: iPhone
Product: Samsung
Product: Nokia
(list 2)
Category: Tvs
Product: Philips
Product: Sony
Product: Sharp
... 
```

请注意：来自数据库的数据是表格中的表格数据：

```
 CategoryId  | CategoryName  |  ProductName |
-------------+---------------+--------------+
      1           Phones          iPhone
      1           Phones          Samsung  
     ... 
```

到这里，数据库的角色就结束了，因为数据库不是关于如何表示你的数据，或者你的数据看起来如何。这应该在您的应用程序端完成。您应该根据您的数据访问层（Ado.net、LINQ to SQL 等）以*Cateogry->List of Products*的形式获得对象关系结构列表。例如，使用 linq 你应该这样做：

```
var CategoriesWithProducts = Categories.Join(
Products,
c => .Id,
p => p.CategoryId,
(Category, Products) =>
   new
   {
       Category = category,
       ItsProducts = products 
   });

foreach( cateogyr in CategoriesWithProducts)
{
   Console.WriteLine("(List {0})", category.Id);
   Console.WriteLine("Category: {0}", category.Name);
   foreach(var product in category.ItsProducts)
   {
         Console.WriteLine("Product: {0}", product.Name); 
   }
} 
```

如果您使用的是 ADO.net 或任何其他 DAL，并且无法以关系方式获取这些结果，那么您应该手动执行此操作，即：对于每行数据仅输出类别名称，然后列出其对应的产品.

这是您应该考虑数据表示的方式，始终格式化您的数据以及它在应用程序的表示层中的外观，而不是在数据库端。

希望这会有所帮助。

# python - 如何在 Python 中使用带有递归的计数器？

> ID：10256675
> 
> 赞同：1
> 
> 时间：2012-04-21T06:01:41.003
> 
> 标签：python, recursion, counter

我正在尝试用 Python 编写一个简单的“密码”程序，该程序允许 3 次尝试使用递归函数“登录”。我不知道为什么它不起作用......（是的，侏罗纪公园的灵感）

```
def magicWord(count):
    int(count)
    answer = raw_input("What is the password? ")
    if answer == 'lucas':
        print 'ACESS GRANTED'
    else:
        count =+ 1
        if count > 2:
            while count > 2:
                count+=1
                print "na na na you didn\'t say the magic word. "
        else:
            magicWord(count)

magicWord(0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T06:09:14.413

你非常亲近。只有几个小问题：

```
def magicWord(count):
    answer = raw_input("What is the password? ")
    if answer == 'lucas':
        print 'ACESS GRANTED'
    else:
        count += 1
        if count > 2:
            print "na na na you didn\'t say the magic word. "
            return
        else:
            magicWord(count) 
```

这是一个示例会话：

```
>>> magicWord(0)
What is the password? alan
What is the password? ellie
What is the password? ian
na na na you didn't say the magic word. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T06:07:24.220

你真的需要递归吗？我的变种不使用它，它似乎更容易

```
def magic_word(attempts):
   for attempt in range(attempts):
      answer = raw_input("What is the password? ")
      if answer == 'lucas':
          return True
   return False

if magic_word(3):
   print 'ACESS GRANTED'
else:
   print "na na na you didn\'t say the magic word. " 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T06:39:39.577

干得好！没有硬编码函数内尝试次数的递归：

```
def magicword(attempts):
    valid_pw = ['lucas']
    if attempts:
        answer = raw_input('What is the password?')
        if answer in valid_pw:
            return True
        else:
            return magicword(attempts -1)

if magicword(3):
    print 'you got it right'
else:
    print "na na na you didn't say the magic word" 
```

返回：

```
What is the password?ian
What is the password?elli
What is the password?bob
na na na you didn't say the magic word
>>> ================================ RESTART ================================
>>> 
What is the password?ian
What is the password?lucas
you got it right 
```

# jquery - JQUERY + 只更新为空 $('input.metaTitle').filter(function() { $(this).val('ya'); }); 上面的代码使用 metaTitle 类查找所有输入。 我似乎无法将其更新为仅选择空字段。我试过这样的事情： 问问题 问问题 2012-04-21T06:01:53.733 63 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. $('input.metaTitle').filter(function() { $(this).val('ya'); }); 上面的代码使用 metaTitle 类查找所有输入。 我似乎无法将其更新为仅选择空字段。我试过这样的事情： if(!$('input.metaTitle').val()).filter(function() { $(this).val('ya'); }); 有人可以建议如何将其限制为仅空输入。 谢谢 采用... $('input.metaTitle').filter(function() { return $(this).val().length; }); js小提琴。 ...选择它们。 我认为使用$('input.metaTitle[value=""]') 可能会document.querySelectorAll()检查我认为的初始value属性。如果元素没有value属性，它也将不起作用。 jquery 4 3 回答 3 This answer is useful 0 您可以像这样检查它们： $('input.metaTitle').filter(function(){ return $(this).val() == ''; }).val('ya'); jsFiddle 示例 或者您可以使用： $('input.metaTitle[value=""]').val('ya'); jsFiddle 于 2012-04-21T06:08:10.553 回答 This answer is useful 0 试试这个： $('input.metaTitle').each(function(){ if ($(this).val().length == "") $(this).val("ya") }) 于 2012-04-21T06:19:03.000 回答 This answer is useful 0 利用... $('input.metaTitle').filter(function() { return $(this).val().length; }); js小提琴。 ...选择它们。 我认为使用$('input.metaTitle[value=""]') 可能会document.querySelectorAll()检查我认为的初始value属性。如果元素没有value属性，它也将不起作用。 于 2012-04-21T06:06:54.920 回答 Related 1 python - 金字塔中的女服务员 1.4 1 javascript - 了解 nvd3 x 轴日期格式 1 javascript - 使用 localStorage 启动或停止脚本 1 javascript - iphone设备黑色屏幕在我的jquery手机gap应用导航中闪烁 1 html - 如何使用背景图像为此输入重新添加背景颜色？ 1 javascript - 延迟滑块动画并将效果更改为淡入淡出？ 1 amazon-web-services - 亚马逊 Linux 上的 PHP 5.2 1 php - PHP 从一个数组构建多行文本，然后高效地将它们写入文件 1 android - 用于错误报告的代码中的 Android SQLite 转储数据库 3 c++ - 将 C++ 代码与 GUI 集成 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10256676
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jquery

```
 $('input.metaTitle').filter(function() {
            $(this).val('ya');
          }); 
```

上面的代码使用 metaTitle 类查找所有输入。

我似乎无法将其更新为仅选择空字段。我试过这样的事情：

```
 if(!$('input.metaTitle').val()).filter(function() {
            $(this).val('ya');
          }); 
```

有人可以建议如何将其限制为仅空输入。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T06:08:10.553

您可以像这样检查它们：

```
​$('input.metaTitle').filter(function(){
    return $(this).val() == '';
}).val('ya');​​​​ 
```

[jsFiddle 示例](http://jsfiddle.net/TM8th/)

或者您可以使用：

```
$('input.metaTitle[value=""]').val('ya');​ 
```

[jsFiddle](http://jsfiddle.net/TM8th/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:19:03.000

试试这个：

```
$('input.metaTitle').each(function(){    
    if ($(this).val().length == "") $(this).val("ya")
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T06:06:54.920

利用...

```
$('input.metaTitle').filter(function() {
   return $(this).val().length;
}); 
```

[js小提琴](http://jsfiddle.net/UBUFc/)。

...选择它们。

我认为使用`$('input.metaTitle[value=""]')` *可能*会`document.querySelectorAll()`检查我认为的初始`value`属性。如果元素没有`value`属性，它也将不起作用。

# c++ - 为向量分配大量空间

> ID：10256677
> 
> 赞同：2
> 
> 时间：2012-04-21T06:01:54.860
> 
> 标签：c++, vector

我需要分配一个带有`6227020800`元素的向量。对于普通电话来说，它显然太大了：

```
vector<int> largevector(6227020800) 
```

我尝试使用 new 并且它甚至太大了：

```
vector<int> largevector= new vector<int>[6227020800] 
```

有没有办法分配这么大的向量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T07:06:16.513

看看[stxxl](http://stxxl.sourceforge.net/)库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:58:26.693

如果您*真的*需要那么多空间，请考虑构建一个使文件看起来像随机访问迭代器的类。为了让它更快，让它包含一个 64M 左右的本地缓冲区，就像缓存一样。

# android - 如何在 Android 应用程序中覆盖相机的缩放按钮？

> ID：10256691
> 
> 赞同：0
> 
> 时间：2012-04-21T06:03:38.830
> 
> 标签：android

我有`zxing app for barcode scanning`。它具有自动对焦功能，但我需要在我的应用程序中设置放大/缩小。

如果会更好`i can override volume control buttons in android device for zooming in the app.`

如何使用音量控制按钮在我的应用中实现缩放？

请分享你的想法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:45:26.093

```
public boolean onKeyUp(int keyCode, KeyEvent event) 
{ 
   if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) { 
       // increase your zoom
       return true;
   } else if(keyCode ==  KeyEvent.KEYCODE_VOLUME_UP){
       // decrease your zoom 
       return true;
   }
   return super.onKeyUp(keyCode, event); 
} 
```

你可以使用上面的 onKeyUp() 事件来完成你的任务:::

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T13:36:48.827

通过将以下代码放入您的活动中，尝试使用 dispatchKeyEvent。

```
 public boolean dispatchKeyEvent(KeyEvent event) {
        int keyCode = event.getKeyCode();
        switch (keyCode) {
        case KeyEvent.KEYCODE_VOLUME_UP:
            addIntensityLvl();
            return true;
        case KeyEvent.KEYCODE_VOLUME_DOWN:
            subtractIntensityLvl();
                return true;
        default:
            return super.dispatchKeyEvent(event);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T06:35:31.290

请参阅[此处](https://stackoverflow.com/questions/2367484/how-to-override-the-behavior-of-the-volume-buttons-in-an-android-application)了解如何覆盖音量控制按钮。您可以在捕获事件时执行缩放。

# symfony - 如何在 Symfony2 / Twig 中识别隐藏的表单域

> ID：10256692
> 
> 赞同：1
> 
> 时间：2012-04-21T06:03:42.300
> 
> 标签：symfony, hidden, twig

我是 Symfony2 的新手，并尝试呈现一个表单。基础很清楚，但我对隐藏的表单字段有疑问。

我尝试在不同的表格单元格中呈现每个表单小部件。但是当使用 for 循环时，第一个单元格被 _token 小部件填充。但我喜欢在之后用 form_rest 渲染隐藏的字段。

```
<table>
  <tr>
    {% for element in form %}
      <td class="header">{{ form_widget(element) }} </td>
    {% endfor %}
  </tr>
</table> 
```

我正在寻找的是类似的东西

```
<table>
  <tr>
    {% for element in form %}
      {% if element.type != 'hidden' %} 
        <td class="header">{{ form_widget(element) }} </td>
      {% endif %}
    {% endfor %}
  </tr>
</table> 
```

任何人都可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T13:03:58.657

对于 Symfony 2.0，你曾经这样做：

```
{% if "hidden" not in element.vars.types %} 
```

对于 Symfony 2.1，你必须这样做：

```
{% if "hidden" not in element.vars.block_prefixes %} 
```

我花了很长时间才解决这个问题，因为根本没有关于它的文档。我也很困惑为什么你不能这样做：

```
{% if "hidden" element.vars.type %} 
```

我的意思是，这不是最明显的方式吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T14:23:45.330

试试下面的代码

```
<table>
  <tr>
    {% for element in form %}
      {% if not element.ishidden %} 
        <td class="header">{{ form_widget(element) }} </td>
      {% endif %}
    {% endfor %}
  </tr>
</table> 
```

希望这对您有所帮助。快乐编码！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T11:38:43.937

有点摸不着头脑，但也许你可以在 if 语句中使用标签？

有点像 {% if form_label(element) != "hidden" %}?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T16:01:21.633

试试这个：

```
<table>
  <tr>
    {% for element in form %}
      {% if "hidden" not in element.vars.types %}
        <td class="header">{{ form_widget(element) }} </td>
      {% endif %}
    {% endfor %}
  </tr>
</table> 
```

# ruby-on-rails-3 - 成功设计登录后如何重定向到用户/：id - rails 3

> ID：10256698
> 
> 赞同：1
> 
> 时间：2012-04-21T06:04:23.650
> 
> 标签：ruby-on-rails-3, devise

设计2真的很棒！但是，我一直在努力让它在登录后重定向到 users/:id。

用户成功登录站点后，默认页面为 root。但是，我希望它转到由 users_controller.rb 控制的 users/:id 页面。登录后，我可以手动输入 localhost:3000/users/1 进入用户个人资料页面，在那里我可以访问用户信息，因此显示控制器工作正常。

关键问题是如何让网站在用户 1 登录后转到 localhost:3000/users/1。

我多次阅读设计维基并搜索了很多。最简单的方法是通过添加 application_controller.rb 来覆盖设计：

```
def after_sign_in_path_for(resource)
  dashboard_path
end 
```

我想我的问题是如何定义dashboard_path？我在 config/routes.rb 和 application_controller.rb 中添加什么？

任何帮助是极大的赞赏！我正在使用设计 2.0 和 rails 3.2.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T07:13:08.947

首先看[这个](https://github.com/plataformatec/devise/wiki/How-To%3a-Change-the-default-sign_in-and-sign_out-routes)链接

我告诉你我在做什么
**routes.rb**

```
 devise_for :users,:has_many => :comments, :controllers => {:sessions => devise/sessions', :registrations => 'devise/registrations'} do       

       match '/users/:id/dashboard', :to => "users#dashboard", :as => :dashboard 
```

然后在使用设计关键字
**UsersHelper时在 helper.rb 文件中声明以下帮助程序**

```
 def resource_name     
     :user    
 end    

 def resource     
    @resource ||= User.new     
  end     

  def devise_mapping     
    @devise_mapping ||= Devise.mappings[:user]      
  end      

 end 
```

**Application_controller.rb**

```
 def after_sign_in_path_for(resource)    
     if current_user.admin?     
      stored_location_for(resource) || admin_path     
    else       
       stored_location_for(resource) || dashboard_path(current_user.id)      
     end       
  end 
```

我希望这会对你有所帮助。
谢谢。

# android - ListActivity onItemClickListener

> ID：10256699
> 
> 赞同：1
> 
> 时间：2012-04-21T06:04:34.010
> 
> 标签：android, onitemclicklistener

我正在使用带有列表视图的列表活动。当我单击进入另一个活动的项目并显示该列表名称时，列表活动完美运行。我的问题是我想在第二个活动中编写另一个列表活动。当我扩展 listactivtiy onitemclick 监听器不工作。强制关闭即将出现在模拟器上。

如何在第二个活动中实现列表活动。方法

```
 Intent obj=new Intent(getApplicationContext(),Second.class); 
 startActivity(obj); 
```

当我将 Second 类扩展到 ListActivity 时，我强制关闭。我也想将列表活动应用到 Second 活动类中。

public class Second extends ListActivity { } 请帮帮我

# php - jQuery droppable 不起作用

> ID：10256703
> 
> 赞同：0
> 
> 时间：2012-04-21T06:05:30.820
> 
> 标签：php, jquery

我正在尝试在 jQuery 中实现我认为是一个简单的 droppable 的东西。我需要可拖动项目的数字 id 会发生变化。这些项目是可拖动的，但是当我将它们拖动到放置目标时，警报不会触发。我的代码如下：

```
 <script>
    $(function() {
        $( ".draggable" ).draggable();
        $( ".trash" ).droppable({
            accept: ".draggable",
            drop: function( event, ui ) {
                alert('dropped');
            }
        });
    });
    </script>

<div id="5" class="draggable"><p>Drag to target</p></div>

<div id="trash"><p>Drop here</p></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T06:10:51.390

droppable 的选择器应该是#trash，指的是 div 的 id 而不是它的类属性。

```
$("#trash").droppable ... 
```

# c# - 操作程序内存。（记忆黑客）

> ID：10256706
> 
> 赞同：0
> 
> 时间：2012-04-21T06:05:50.857
> 
> 标签：c#, memory

好吧，我最近在C#中创建了一个程序，可以改变程序的内存，它会起作用，但是每次我关闭程序并重新打开它时，我都必须再次找到内存值，有没有办法可以关闭程序后防止程序的内存发生变化？

```
public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();
    }

    [DllImport("kernel32.dll")]
    static extern IntPtr OpenProcess(ProcessAccessFlags dwDesiredAccess, [MarshalAs(UnmanagedType.Bool)] bool bInheritHandle, int dwProcessId);

    [DllImport("kernel32.dll", SetLastError = true)]
    static extern bool WriteProcessMemory(IntPtr hProcess, IntPtr lpBaseAddress, byte[] lpBuffer, uint nSize, out int lpNumberOfBytesWritten);

    [DllImport("kernel32.dll")]
    public static extern Int32 CloseHandle(IntPtr hProcess);

    [Flags]
    public enum ProcessAccessFlags : uint
    {
        All = 0x001F0FFF,
        Terminate = 0x00000001,
        CreateThread = 0x00000002,
        VMOperation = 0x00000008,
        VMRead = 0x00000010,
        VMWrite = 0x00000020,
        DupHandle = 0x00000040,
        SetInformation = 0x00000200,
        QueryInformation = 0x00000400,
        Synchronize = 0x00100000
    }

    public static void WriteMem(Process p, int address, long v)
    {
        var hProc = OpenProcess(ProcessAccessFlags.All, false, (int)p.Id);
        var val = new byte[] { (byte)v };

        int wtf = 0;
        WriteProcessMemory(hProc, new IntPtr(address), val, (UInt32)val.LongLength, out wtf);

        CloseHandle(hProc);
    }

    private void notify(string not)
    {
        if (textBox1.Text != "")
        {
            textBox1.Text += Environment.NewLine;
        }

        textBox1.Text += not;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        var p = Process.GetProcessesByName("SAFlashPlayer").FirstOrDefault();
        WriteMem(p, 0x07A6A0C1, 1000);
        notify("A lot of Ability Points added.");
    }
    private void button2_Click(object sender, EventArgs e)
    {
        var p = Process.GetProcessesByName("SAFlashPlayer").FirstOrDefault();
        //WriteMem(p, 0x008373CC, 0);
        notify("Power set to 0.");
    }

    private void Checker_Tick(object sender, EventArgs e)
    {
        Process[] pname = Process.GetProcessesByName("SAFlashPlayer");

        if (pname.Length == 0)
        {
            button1.Enabled = false;
            button2.Enabled = false;
            status.ForeColor = System.Drawing.Color.Red;
            status.Text = "Flash Player not running!";
        }
        else
        {
            button1.Enabled = true;
            button2.Enabled = true;
            status.ForeColor = System.Drawing.Color.Green;
            status.Text = "Flash Player running!";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T06:17:01.050

您无法估计或决定程序在运行时将加载到哪里。操作系统决定了这一点，但我认为您可以在运行时动态地找到进程的内存位置，而无需对您的应用程序进行硬编码。

您是否尝试过 ReadProcessMemory [WinAPI 调用](http://msdn.microsoft.com/en-us/library/ms680553%28VS.85%29.aspx)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T06:36:57.687

是的，作弊很难——支付金农更容易。您很可能需要在每次程序重新启动后扫描其他进程以获取要更新的值/模式，因为内存布局很有可能发生变化，尤其是在 Win7 上。

在过去的美好时光里，人们只会更新可执行文件本身......在阅读印刷杂志上的一些文章后......

如今，所有 JIT、[ASLR](http://en.wikipedia.org/wiki/Address_space_layout_randomization)、压缩/编码的可执行文件和脚本甚至远程加载的模块/SWF 都变得更加困难。所以归咎于互联网作弊时需要花费更多的努力。

# linux - 在调用 Perl 时避免“设置区域设置失败”消息

> ID：10256707
> 
> 赞同：1
> 
> 时间：2012-04-21T06:05:55.487
> 
> 标签：linux, perl, unix, message, stderr

每当我运行我的代码时：

```
$perl my_any_code.pl 
```

它总是给我这个：

```
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
    LANGUAGE = (unset),
    LC_ALL = (unset),
    LC_CTYPE = "UTF-8",
    LANG = "C"
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C"). 
```

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T07:04:16.173

`UTF-8`不是语言环境名称。将`LC_CTYPE`环境变量设置为系统可识别的语言环境。它应该看起来像`en_US.UTF-8`. 您可以通过运行命令获取有效语言环境的列表`locale -a`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T09:03:32.340

编译您的语言环境定义列表并重新配置它。

```
locale-gen en_US.UTF-8
dpkg-reconfigure locales 
```

# perl - 系统命令与 Perl 子例程

> ID：10256712
> 
> 赞同：0
> 
> 时间：2012-04-21T06:06:52.937
> 
> 标签：perl, rhel5

我每天在几个工作中运行以下代码片段：

```
 system("cp $keyFile  $destinationFile");
  system("chown $userID $destinationFile");
  system("chmod 400 $destinationFile"); 
```

上面代码的问题是，有时，非常罕见，至少上述操作之一没有成功完成，我的工作失败了。虽然如果上述操作之一失败，作业失败是可以的，但我仍然想避免简单系统命令之一失败。

所以我有以下选择：

1.  使用 Perl 子例程`File::Copy::copy`, `chmod`,`chown`代替系统命令。
2.  检查命令的返回值`system()`。我已经这样做了，但没有解释为什么它可能会失败。

使用 Perl 子例程而不是系统命令更好/更安全。我的作业将**始终**在**RHEL5**机器上运行 [从不是 Windows]。

还有什么我可以在这里做的。我怎样才能收集更多关于出了什么问题的信息？

更新：文件名或文件路径永远不会包含空格或奇怪的字符。他们将来自集合 [a-zA-Z]。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T06:46:51.160

是的，使用 Perl 本地版本（`File::Copy`和`chmod()`）总是更好。

在众多原因中：

*   表现。在 1 到 2 个新进程之间调用`system()`分叉（一个用于命令，可能另一个用于 shell），这是一项繁重的操作

*   错误检查。Perl 中与 IO 相关的系统调用会在`"$!"`发生错误时设置错误文本变量：

    ```
    File::Copy::copy($source, $destination)
        || die "Failed to copy from $source to $destination. Error: $!\n"; 
    ```

# ios - 基于定时器、线程的 UIScrollView 平滑滚动（基于 iOS Metronome）

> ID：10256714
> 
> 赞同：0
> 
> 时间：2012-04-21T06:07:16.430
> 
> 标签：ios, multithreading, uiscrollview, grand-central-dispatch

我正在开发一个使用 UIScrollView 在屏幕上滚动乐谱的应用程序。由于我需要以固定的时间间隔发生这种情况，并且还要以均匀的间隔播放短声音，因此我的代码基于 Apple 提供的现已弃用的“节拍器”示例。

问题是滚动并不顺利 - 它非常生涩。我的运行日志表明我正在使用的 NSTimer 并没有真正以准确的间隔触发（或者可能部分代码执行时间过长）。

录取：我是音乐家，不是专业程序员。我阅读了有关 GCD 的 Apple 文档（这似乎是比节拍器示例中的线程执行同时事件更好的方法），但我真的不知道如何将它应用到我的项目中。

我没有使用分页。内容大小比屏幕大小大得多：ScrollView 滚动，只是锯齿状。

我的代码执行良好，但滚动非常生涩。任何帮助将不胜感激，特别是如果它符合 KSS 原则！

```
//  PlayView.m
#import "PlayView.h"
#include <stdlib.h>

NSInteger xWidth;
int xChange = 0;
float timeInterval;
AVAudioPlayer *audioPlayer1;
AVAudioPlayer *audioPlayer2;
float tempo;
int subdivisions;
int timesPlayed = 1;
int actualTimesPlayed = 0;

// ...

//RUN WHEN THE USER PRESSES THE PLAY BUTTON
-(void)start {
  // Used in calculating the speed of timer firing.
  // xWidth is the spacing between images (pixels)
  subdivisions = (int)(xWidth);

  // Keeps track of where we are in the measure
  beatNumber = 0;

  // Keeps track of how many measures we already played
  timesPlayed = 1;
  actualTimesPlayed = 0;

  // Let the device idle without dimming the screen
  UIApplication *myApp=[UIApplication sharedApplication];
  myApp.idleTimerDisabled=YES;  

  [self startDriverThread];    
}

// Taken straight from 'Metronome'
- (void)startDriverThread {
  if (soundPlayerThread != nil) {
    [soundPlayerThread cancel];
    [self waitForSoundDriverThreadToFinish];
  }

  NSThread *driverThread = [[NSThread alloc] initWithTarget:self  selector:@selector(startDriverTimer:) object:nil];
  self.soundPlayerThread = driverThread;
  [driverThread release];

  [self.soundPlayerThread start];
}

// Taken straight from 'Metronome'
- (void)waitForSoundDriverThreadToFinish {
  while (soundPlayerThread && ![soundPlayerThread isFinished]) { 
    // Wait for the thread to finish. I've experimented with different values
    [NSThread sleepForTimeInterval:timeInterval];
  }
}

// Taken straight from 'Metronome'
- (void)stopDriverThread {
  [self.soundPlayerThread cancel];
  [self waitForSoundDriverThreadToFinish];
  self.soundPlayerThread = nil;
}

// Modification of 'Metronome'
- (void)startDriverTimer:(id)info {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    // Give the sound thread high priority to keep the timing steady.
    [NSThread setThreadPriority:1.0];
    BOOL continuePlaying = YES;

    while (continuePlaying) {  // Loop until cancelled.

      // An autorelease pool to prevent the build-up of temporary objects.
      NSAutoreleasePool *loopPool = [[NSAutoreleasePool alloc] init]; 

      // Reset the beat number to 0 at the end of each musical measure
      if (beatNumber == (subdivisions*4)) {
        beatNumber = 0; }

      // Incrementation of where we are in the bar on each firing of the timer
      beatNumber++;

      // On each beat, play a sound
      if(beatNumber % subdivisions == 0) {
        [self playSound]; }

      // On each firing of the timer, run the 'animateScreen' function, which scrolls the UIScrollView and performs some other simple tasks
      [self performSelectorOnMainThread:@selector(animateScreen) withObject:nil waitUntilDone:NO];

      // xChange is the number of pixels scrolled, but only start scrolling two and a half beats into the first bar (in order to keep the main image event at the center of the screen in each measure
      if ((actualTimesPlayed == 0 && beatNumber >= 2.5*subdivisions) || xChange > 0) {
          xChange += 1; }    

      // The time interval at which the timer fires is calculated by dividing the tempo (beats per minute, entered by the user; between 60-94) and 60 (seconds) This alone would result in one firing of the timer per beat, but we need at double this speed for some of the calculations 'animateScreen' does in between the beats, and really many more so the scrolling is smooth.
      // 
      // EXAMPLE: (60s/92bpm)/17% (image spacing) of 320pixels (screen width) = 0.012077
      timeInterval = (60/tempo)/subdivisions; 

      NSDate *curtainTime = [[NSDate alloc] initWithTimeIntervalSinceNow:(timeInterval)];
      NSDate *currentTime = [[NSDate alloc] init];

    // Wake up periodically to see if we've been cancelled.
    while (continuePlaying && ([currentTime compare:curtainTime] != NSOrderedDescending)) { 
        if ([soundPlayerThread isCancelled] == YES) {
            continuePlaying = NO;                
        }

        // Don't fully understand this; I've tried changing it to various values with no luck
        [NSThread sleepForTimeInterval:timeInterval];
        [currentTime release];
        currentTime = [[NSDate alloc] init];
    }
    [curtainTime release];      
    [currentTime release];      
    [loopPool drain];
}
[pool drain];

}

- (void)playSound {        
  if(beatNumber % subdivisions == 0){
    if (beatNumber == subdivisions) {
        [audioPlayer1 play];
    }

    else {
        [audioPlayer2 play];
    }
  }
}

- (void)animateScreen {        
  // BEAT 1
  if (beatNumber == (subdivisions)) {   
    // do some stuff
    // ...
  }    

  // THE SECOND  EIGTH OF 1
  if (beatNumber == (int)(subdivisions*1.25) && actualTimesPlayed >0) {
    // do some more stuff
    // ..
  }

  // BEAT 2
  if (beatNumber == (2*subdivisions)) {
    // even more stuff
  }

  // BEAT 3
  if (beatNumber == (3*subdivisions)) {
    // ... more
  }

  // BEAT 4
  if (beatNumber == (4*subdivisions)) {
    // yet more stuff
    // ...

    actualTimesPlayed++;
    timesPlayed++;
    if (timesPlayed == 3) {
        timesPlayed = 1; }     
  }    

  // On the "And of 4"
  if (beatNumber == subdivisions/2 && actualTimesPlayed > 0) {
    // STUFF
  }

  //Scroll over
  [theScroller setContentOffset:CGPointMake(xChange, 0) animated:NO];    
}

// ... 
```

也许这不是最优雅的代码，但除了滚动之外，一切都正常。在我省略代码的地方发生了很多事情，但我知道事情并没有妨碍（当我将其注释掉并让程序完全裸露时 - 只是计时器和滚动，没有声音 - 它仍然是不顺利。）我相信计时器是问题所在。

非常感谢任何帮助/指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:30:02.240

`NSTimer`不适合定期更新屏幕。
使用 a`CADisplayLink`并将其安排在主运行循环中。

另外，如果您想查看以不断滚动，我不会使用`UIScrollView`. 只需子类`UIView`化并在每个显示链接的回调中更新它的边界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:15:30.670

没办法，你还有苹果的旧节拍器样本！！我在任何地方都找不到那个东西。但无论如何，节拍器样本被弃用的原因与您的问题存在的原因完全相同：它的实现在音乐上是劣质的。节拍器依赖于物体的位置和许多不必要的选择器，这使它成为一个不稳定的计时器。此外，NSTimers 和线程从来都不是为了音乐精度。我的建议，放弃它，但先把它放在 Github 上。

这是我过去使用过的。请记住，它是受版权保护的作品，所以要小心你使用了多少，并记得给他们适当的信用：[节拍器](https://github.com/pcsanwald/metronome)。

# css - html/css：3列液体/流体浮动；在 cendered 柱旁边的浮动柱，在浮动时将边放到下一个“线”？

> ID：10256720
> 
> 赞同：1
> 
> 时间：2012-04-21T06:08:09.567
> 
> 标签：css, css-float, responsive-design, liquid-layout

所以这是我在stackoverflow上的第一个问题，在最终“创建”一个帐户后，我看到了一个相当大的“相似”问题标题列表......但我几乎一直在滥用谷歌来寻找答案，并且无济于事；所以，就这样吧。

我对 html 和 css 还很陌生，但是在过去的 2 个月里，我一直积极而痴迷地以极快的速度快速获取尽可能多的知识，我觉得我正在取得很大的进步。

然而，我意识到我想用我的布局做些什么，我似乎无法实现。

我猜每个人都知道“液体”布局，以及显然非常流行的“圣杯”3 列布局。

我想使用这种类型的布局，因为在我看来，它是最美观的......但我想在语义上写我自己的，这样我就不会“复制”任何人，所以我有一个与我自己的框架的个人联系，当我查看我的标记时，不必弄清楚别人在想什么。

**这是目标：**

我希望我的主要内容在中间，由 2 个“侧栏”列包裹，并且我希望整个东西都是“液体”，从全分辨率一直到 320 像素宽。

但是，出于 SEO 的目的，我希望我的“主要内容”列（中间的）在 DOM 树中排在第一位，并且我希望我的侧栏：

1st）随着页面宽度流畅地收缩，然后 2nd）随着页面变得过于狭窄，我希望“主要内容”（中间）列向左“对齐”，保持在顶部，并且是 100% 宽度，而第三) 侧栏“捕捉”“在”主要内容栏“下方”，每个栏占 50% 的宽度，

这样：所有 3 列总是占据页面的整个宽度，并且当侧栏“卡入”时，它们与“中间”列的宽度相同。

像这样的东西：

```
|2222111111113333|
|________________|

|222111111333| <--
|____________|

|22111133| <--
|________|

*snap*(a)

|1111| <--
|2233|
|____|

|11| <--
|11|
|22|
|33| 
```

或：*快照*（b）

```
|111111| <--
|222333|
|______|

|111| <--
|111|
|222|
|333|

|11| <--
|11|
|11|
|22|
|2_|
|33|
|3_| 
```

看看我在说什么？

**这是问题：**

我已经尝试了所有我能想到或搜索的东西，尝试......似乎只有“没有办法”让 css 使“DOM：1st/middle”列保持在中间和顶部，同时还保持两个侧栏对称，并保留空间，并将所有 3 列始终保持在一个漂亮、整洁的盒子中。

我设法使中间列保持在顶部，并在 DOM 中排名第一，但这样做会给侧列带来混乱和混乱，因为 #2 必须在带有 #1 的 div 内，以便 1/mid 保持最重要的是，但是将#3 放在那个 div 中会搞砸一切。

对我来说，这个小问题非常*令人*沮丧，而且我已经为此苦苦挣扎了好几个星期了。（我差不多 2 个月前才开始学习 html 和 css；我一半的时间都花在了这个问题上）

如果有人确切地知道我在说什么并试图做什么，并且知道：

A）这是否可能

B）如何做到这一点

我绝对很想知道......因为我真的很想超越这个小（阅读：**巨大**的）问题，并继续走上我统治世界的道路。

TL;博士：

想做“|213|” 变得：

```
|1|
|2|
|3| 
```

没有它变成这样：

```
|_1_|
|2__|
|__3| 
```

或这个：

```
|_1_|
|2_3|
|___| 
```

在最大和最小屏幕之间的任何点。

有可能做到吗？还是我应该（放弃并）调整我的布局策略并继续前进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T06:52:07.020

我认为这是您正在寻找的东西：

[http://jsfiddle.net/grc4/kcX5n/](http://jsfiddle.net/grc4/kcX5n/)

它使用 jQuery 在调整窗口大小时修改页面的布局。另一种方法可能是使用 css3 媒体查询，但我不确定如何更改元素的顺序（从 213 到 123）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T22:23:17.050

老问题，但我认为这很简单的CSS：

```
#col1{float:right}
#col2{float:left}
#col3{float:right} 
```

# c# - 如何从 DbContext 类继承

> ID：10256723
> 
> 赞同：2
> 
> 时间：2012-04-21T06:08:35.280
> 
> 标签：c#, entity-framework

我正在研究 MVC，并在模型中创建了一个使用实体框架的类。我正在尝试从 DBContext 类继承，但它显示错误消息：“类型或命名空间名称 DBContext 不存在”。我还添加了“System.data.Entity”命名空间。

像这样的例子：

```
 public Class SampleEF :DBContext //Showing error
{

} 
```

你能告诉我如何使用 DBContext 类来处理 EF 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T06:22:06.357

首先`System.Data.Entity`在解决方案资源管理器中右键单击您的项目并选择添加引用，在您的项目中添加引用。然后使用如下`using`语句：

```
using System.Data.Entity;
using System.Data.Entity.Infrastructure; 
```

然后将您的上下文类编写为：

```
public Class SampleEF : DbContext 
{

} 
```

参考：[在 EF 4.1 第 1 部分中使用 DbContext：简介和模型](http://blogs.msdn.com/b/adonet/archive/2011/01/27/using-dbcontext-in-ef-feature-ctp5-part-1-introduction-and-model.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T06:19:24.423

使用 Tools > Library Package Manager > Package Manager Console 中的命令“install-package entityframework”安装实体框架。. .它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-22T20:52:00.697

或者，如果添加引用没有成功：

```
public Class SampleEF : System.Data.Entity.DbContext 
{

} 
```

# gwt - persistence.xml 未包含在 gwt 项目的 war 文件夹中

> ID：10256726
> 
> 赞同：0
> 
> 时间：2012-04-21T06:09:22.420
> 
> 标签：gwt, jpa, eclipselink, requestfactory

我正在尝试让 eclipselink 与 GWT 的 requestfactory 一起工作。我不断收到以下错误：

```
Caused by: java.lang.RuntimeException: Server Error: No Persistence provider for EntityManager named default 
```

在网上阅读，似乎persistence.xml必须存在于WEB-INF/classes/META-INF/中。我尝试在 src/META-INF 下创建一个文件夹并将 persistence.xml 放入其中，但是当我在 Eclipse 中构建项目时，它没有包含在 war/WEB-INF/classes/ 中。有什么建议么？我正在使用 GWT 2.3、EclipseLink 2.3 和 Eclipse 3.7。如何让 eclipse 将 persistence.xml 包含到正确的位置？

持久性.xml

```
<?xml version="1.0" encoding="UTF-8" ?> <persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">

<persistence-unit name="default" transaction-type="RESOURCE_LOCAL">
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>

    <class>com.manning.gwtia.ch08.v2.server.Contact</class> 

    <properties>
        <property name="javax.persistence.jdbc.driver" value="org.postgresql.Driver" />
        <property name="javax.persistence.jdbc.url" value="jdbc:postgresql://localhost:5432/example" />
        <property name="javax.persistence.jdbc.user" value="" />
        <property name="javax.persistence.jdbc.password" value="" />

        <!-- EclipseLink should create the database schema automatically -->
        <property name="eclipselink.ddl-generation" value="create-tables" />
        <property name="eclipselink.ddl-generation.output-mode" value="database" />
    </properties>

</persistence-unit> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:45:19.117

您是否尝试将 persistence.xml 放在文件夹中`war/META-INF`？

编辑：其他选项：persistence.xml 未从 src/META-INF 文件夹复制到 classes 文件夹的原因可能是因为您的 eclipse java 构建路径配置仅包含要复制到 classes 文件夹的特定类型的文件。检查您的项目属性 -> Java 构建路径 -> 源并检查包含/排除的内容。这或许可以解释。

# sql - SQL Server 时间戳错误 800a01f4

> ID：10256727
> 
> 赞同：0
> 
> 时间：2012-04-21T06:09:22.983
> 
> 标签：sql, asp-classic

这是我正在尝试的：

```
sSQL = "INSERT into users (firstName, lastName, email, password, zip, country, company, industry, revenue, timestamp) 
        VALUES('" & fname & "','" & lName & "','" & email & "','" & password & "','" & zip & "','" & country & "','" & company & "','" & industry & "','" & revenue & "','" & CURRENT_TIMESTAMP & "')" 
```

错误信息：

> Microsoft VBScript 运行时错误“800a01f4”变量未定义：“CURRENT_TIMESTAMP”/register.asp，第 24 行

我尝试将 DEFAULT 作为时间戳，但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T06:13:08.603

做这个

```
... revenue & "', CURRENT_TIMESTAMP)" 
```

`CURRENT_TIMESTAMP`应该是您的 sql 查询的一部分。它不是您代码中的变量。

编辑：要使其工作，您应该将`timestamp`列的数据类型更改为`datetime`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T20:33:25.607

根据您对其他答案之一的评论，您的基本问题是尝试插入时间戳列。时间戳列不能插入或更新时间戳实际上不是日期或时间值，而是由数据库引擎处理的行版本列。您可以与它进行比较以避免并发问题。

将其排除在列列表之外，它应该可以工作。

也就是说，您应该使用 sql 参数，而不是字符串连接来创建您的 sql 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T06:52:17.733

尝试使用`Timestamp`=`[TimeStamp]`代替，使用此字段名称时可能会遇到问题。

# php - yii 框架选择下拉列表中的值

> ID：10256729
> 
> 赞同：0
> 
> 时间：2012-04-21T06:09:58.557
> 
> 标签：php, frameworks, yii

我是框架工作的新手。我需要填充下拉列表中的值。

我使用以下代码在下拉列表中显示值

`echo $form->dropDownList($model,'pagetype', $Page_Type); ?>`

它在下拉列表中显示选项。

我想在下拉列表中填充选定的值。

保存的值在 $savedValues 数组中。

我不知道如何在下拉列表中应用所选选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:13:46.290

您是否阅读过[CActiveForm::dropDownList 的文档](http://www.yiiframework.com/doc/api/1.1/CActiveForm#dropDownList-detail)？它会自动确定选定的选项，在这种情况下，它将是匹配的选项`$model->pagetype`。

# javascript - 就绪状态始终为 0

> ID：10256730
> 
> 赞同：0
> 
> 时间：2012-04-21T06:10:15.823
> 
> 标签：javascript, android, ajax, soap, cordova

我正在开发phonegap应用程序。我需要通过 .net webservice 验证用户。我正在使用 ajax 通过 javascript 验证和解析它。但我被困在 readystate ，因为它总是返回*零*。我从网上找到的可用解决方案中尝试了很多东西，但我没有做对。

这是我的Javascript：

```
username = 'ksl';
password = 'ksl';
var soapMessage = 
        '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
        <soap:Body> \
        <CheckLogin xmlns="http://tempuri.org/"> \
        <UserName>' + username + '</UserName> \
        <Password>' + password + '</Password> \
        </CheckLogin> \
        </soap:Body> \
        </soap:Envelope>';

        $.ajax({
            url: validationURL,
            type: "POST",
            dataType: "xml",
            data: soapMessage,
            success: validate,
            contentType: "text/xml; charset=\"utf-8\"",
            error: function(xhr,status,error)
            {
            alert("state is:" + xhr.readyState);
            }
        }); 

        return false; 
```

这是我的网络服务响应：

```
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <CheckLoginResponse xmlns="http://tempuri.org/">
      <CheckLoginResult>string</CheckLoginResult>
    </CheckLoginResponse>
  </soap:Body>
</soap:Envelope> 
```

任何回应都会有所帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T10:39:26.803

好的..我发现了问题::

1）之后有空间， `</soap:Body> \` 所以我删除了它。

2）我在html中做了一些改变，它工作正常..

感谢您查看我的问题..

# javascript - 使用 JQuery 和 CSS 制作图片库

> ID：10256735
> 
> 赞同：2
> 
> 时间：2012-04-21T06:11:10.043
> 
> 标签：javascript, jquery, html, css

我已经有很长一段时间试图弄清楚这一点。在这个网站[http://css3.bradshawenterprises.com/slide1/](http://css3.bradshawenterprises.com/slide1/)这给了我代码和一切，我已经把它插入我的网页，就像它应该的那样。

我现在更新了这是我的代码，有人可以帮我吗...

```
 <html>
    <head>

    <style type="text/css">
    #slide1_controls span {
        padding-right:2em;
        cursor:pointer;
    }
    #slide1_container {
        width:450px;
        height:281px;
        overflow:hidden;
        position:relative;
    }
    #slide1_images {
        position:absolute;
        left:0px;
        width:1800px;
        -webkit-transition:all 1.0s ease-in-out;
        -moz-transition:all 1.0s ease-in-out;
        -o-transition:all 1.0s ease-in-out;
        -ms-transition:all 1.0s ease-in-out;    
        transition:all 1.0s ease-in-out;
    }
    #slide1_images img {
        padding:0;
        margin:0;
        float:left;
    }
    </style>

<script type="text/javscript" 

src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

    <script type="text/javascript">
    $(document).ready(function() {
        $("#slide1-1").click(function() {
            $("#slide1_images").css("left","0");
        });
        $("#slide1-2").click(function() {
            $("#slide1_images").css("left","-450px");
        });
        $("#slide1-3").click(function() {
            $("#slide1_images").css("left","-900px");
        });
        $("#slide1-4").click(function() {
            $("#slide1_images").css("left","-1350px");
        });
    });

    </script>

    </head>
    <body>

    <div id="slide1_container">
        <div id="slide1_images">
            <img src="pictures/1.jpg" />
            <img src="pictures/2.jpg" />
            <img src="pictures/3.jpg" />
            <img src="pictures/4.jpg" />        
        </div>
    </div>
    <p id="slide1_controls">
        <span id="slide1-1">Image 1</span>
        <span id="slide1-2">Image 2</span>
        <span id="slide1-3">Image 3</span>
        <span id="slide1-4">Image 4</span>
    </p>

    </body>
    </html> 
```

但无论我做什么，我都无法让它工作，我现在的网站真的需要它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T06:27:34.217

在您的代码中包含 jquery 文件。

[教程](https://www.google.co.in/search?rlz=1C1CHMD_enIN473IN473&sourceid=chrome&ie=UTF-8&q=how%20to%20include%20link%20of%20jquery%20in%20html)

```
<script src="jquery.js"></script>
    <script type="text/javascript" >
    $(document).ready(function() {
        $("#slide1-1").click(function() {
            $("#slide1_images").css("left","0");
        });
        $("#slide1-2").click(function() {
            $("#slide1_images").css("left","-450px");
        });
        $("#slide1-3").click(function() {
            $("#slide1_images").css("left","-900px");
        });
        $("#slide1-4").click(function() {
            $("#slide1_images").css("left","-1350px");
        });
    });
    </script>
    <div id="slide1_container">
        <div id="slide1_images">
            <img src="/images/Cirques.jpg" />
            <img src="/images/Clown%20Fish.jpg" />
            <img src="/images/Stones.jpg" />
            <img src="/images/Summit.jpg" />        
        </div>
    </div>
    <p id="slide1_controls">
        <span id="slide1-1">Image 1</span>
        <span id="slide1-2">Image 2</span>
        <span id="slide1-3">Image 3</span>
        <span id="slide1-4">Image 4</span>
    </p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:32:11.167

如果您没有包含 jQuery 文件，那么您还必须包含该文件才能运行此 jQuery 代码。

```
$(document).ready(function() {
$("#slide1-1").click(function() {
    $("#slide1_images").css("left","0");
});
$("#slide1-2").click(function() {
    $("#slide1_images").css("left","-450px");
});
$("#slide1-3").click(function() {
    $("#slide1_images").css("left","-900px");
});
$("#slide1-4").click(function() {
    $("#slide1_images").css("left","-1350px");
}); 
```

});

# selenium - 如何从 Xstudio 调用 Selenium 来实现持续集成

> ID：10256736
> 
> 赞同：2
> 
> 时间：2012-04-21T06:11:21.440
> 
> 标签：selenium, continuous-integration

我正在尝试实施持续集成，并为此选择了以下工具： 1\. Jenkins - 构建和部署代码。2\. Xstudio - 用于测试管理并在部署后调用 selenium 进行测试。3\. Selenium - 用于自动化测试。4\. JIRA - 用于错误跟踪。

目前，我已经安装了 XStudio，需要帮助才能调用安装在其他服务器上的 Selenium。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-08T05:56:58.993

我可以从 XStudio 成功调用 selenium，以下链接将指导配置 xqual.com/documentation/launchers/selenium_java.html。请包含其他类路径（jar 文件），规范路径是指脚本的包名称。

# actionscript-3 - Flex 数据网格事件

> ID：10256737
> 
> 赞同：0
> 
> 时间：2012-04-21T06:11:33.717
> 
> 标签：actionscript-3, apache-flex, datagrid

我使用具有五个可编辑列的 Flex Advanced datgrid，光标位于第一列并准备编辑，现在，我只想知道如何通过按**ENTER**键 [而不是按 Tab] 移动到下一列，是有什么关键字吗？？？

希望这很清楚Thankxx提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:50:06.203

您必须向数据网格添加一个 keyUp 事件侦听器。在事件侦听器函数中检查按下的键是否是回车键。如果是，请将焦点设置到相应的单元格。

# python - 如何使用 Python 列表？

> ID：10256738
> 
> 赞同：4
> 
> 时间：2012-04-21T06:11:38.647
> 
> 标签：python, list

我有如下的 python 列表。

```
lst = ['paragraph 1','paragraph 2','paragraph 3'] 
```

我正在尝试使用 Pattern 库制作它们的语料库 - [http://www.clips.ua.ac.be/pages/pattern-vector](http://www.clips.ua.ac.be/pages/pattern-vector)

作为他们的例子，它应该是这样的..

```
d1 = Document('paragraph 1')
d2 = Document('paragraph 2')
d3 = Document('paragraph 3')

corpus = Corpus(documents=[d1,d2,d3]) 
```

我怎样才能用我的 python 列表使语料库喜欢这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T06:13:36.760

```
lst = ['paragraph 1','paragraph 2','paragraph 3']
corpus = Corpus(documents=[Document(x) for x in lst]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T06:14:13.467

您可以使用地图方法

```
l = ['paragraph 1','paragraph 2','paragraph 3']
corpus = Corpus(map(Document, l)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T06:13:44.170

不完全确定这是否是您想要的，但我假设您需要一个`list comprehension`.

```
paragraphs = ['paragraph 1','paragraph 2','paragraph 3']
corpus = Corpus(documents=[Document(d) for d in paragraphs]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T06:21:37.510

该问题未指定是否应使用列表理解。在问题中给出的特定示例中，列表理解是一种简洁明了的解决方案。但是，如果操作不要求列表理解以获取有关在 Python 中使用列表的更通用解决方案，这里是更详细的迭代方法：

```
paragraphs = ['paragraph 1','paragraph 2','paragraph 3']
docs = []
for p in paragraphs:
    docs.append(Document(p))
corpus = Corpus(documents=docs) 
```

# ruby-on-rails - 导轨，递增计数器不起作用

> ID：10256740
> 
> 赞同：0
> 
> 时间：2012-04-21T06:12:21.013
> 
> 标签：ruby-on-rails, syntax, counter

我有以下

```
Tag.update_counters(Tag.where(:name => name).id, :count => 1) 
```

我试图增加标签计数，但我唯一知道的是名称值中的“java”或“ruby”一词。但是我没有成功增加我的计数器。我尝试做增量和增量计数器，但似乎没有一个工作。我还查看了缓存计数器，但该关联不是 has_many 并且属于。相反，这是一个 has_many: 通过关联。

我究竟做错了什么？这是一种不好的做法吗？谢谢

更新。

我通过...修复了它

```
Tag.update_counters(Tag.where(:name => name).map(&:id), :count => 1) 
```

有人可以解释为什么

```
Tag.where(:name => name).name 
```

不工作？

```
Tag.where(:name => name) 
```

返回标签哈希。我想通过调用 .name 来获取该标签的 name 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:05:19.300

`Tag.where(:name => name)`返回所有给定的记录`name`。Rails 在运行此命令之前不知道是否有很多此类记录：1000、1 或 0。因此该语句返回 ARRAY 记录。如果您只想要一条记录，请使用：`Tag.where(:name => name).first`结果将是您数据库中的一条记录，因此在这种情况下您可以调用`.name`它。

`update_counters`足够聪明，可以从每个返回的记录中获取所有 id。如果您需要逐个访问此记录，可以在此处执行以下操作：

```
Tag.where(:name => name).each do |tag|
  logger.info tag.name # now you can use .name as you are dealing with a single record
end 
```

# qt - 在经过认证的航空平台上有 Qt 的替代品吗？

> ID：10256742
> 
> 赞同：3
> 
> 时间：2012-04-21T06:12:40.097
> 
> 标签：qt, vxworks, rtos

发布了一个[类似的问题](https://stackoverflow.com/questions/6934559/qt-alternative)，一般询问 Qt 的替代品。好吧，我对任何经过认证的 Qt 替代品特别感兴趣。具体来说，如果有任何 Qt 替代品已经在经过认证的航空堆栈上飞行或正在飞行。（所以只知道 Qt 替代方案是不够的）

我正在追问这个问题，因为 Digia 一直没有回应有关商业 Qt 的信息请求，该商业 Qt 应该在 WindRiver/VxWork 和 Integrity（Green Hills）和 Qnx（我认为）上运行。我特别询问了他们在飞行认证的 DO-178 环境中对 Qt 的追求，得到了零回复，并收到了来自诺基亚的类似回复（如您所想）。

鉴于这种反馈水平，并且作为降低风险的努力，我正在寻找替代方案。

感谢您的任何反馈和见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:22:35.363

除了经过认证的操作系统，您还看过这个产品吗？

[GL工作室](http://www.disti.com/Products/glstudio/)

从他们的产品页面看起来他们涉及航空航天、医疗、军事应用。可能想询问他们是否有任何认证。

# dreamweaver - 在 Dreamweaver TBB 中检索链接组件的值 - 并将其设为 SiteEditable

> ID：10256744
> 
> 赞同：6
> 
> 时间：2012-04-21T06:13:08.347
> 
> 标签：dreamweaver, tridion

我正在开发 SDL Tridion 2011 SP1 中的 Dreamweaver TBB。

我不知道在 Dreamweaver TBB 中处理组件链接。

考虑我的组件名称是“A”，它链接到另一个组件“B”。

组件 A 的源代码如下所示：

```
<Content xmlns="Some UUID">
    <Name xlink:type="simple" xlink:href="tcm:184-1897" 
          xmlns:xlink="http://www.w3.org/1999/xlink" xlink:title="B"></Name>
</Content> 
```

组分 B 来源是：

```
<Content xmlns="Some other UUID">
    <first>first field</first>
    <second>second field</second>
</Content> 
```

我想编写一个 DWT TBB，它可以从组件 A 访问链接组件 B 中的字段。

我想使用 RenderComponentField 再现方法。

我是否需要为其添加任何扩展，我可以在其上应用 SiteEdit。

请分享您对此的看法。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T12:18:53.730

*本主题有两个单独的问题：*

1.  *如何从 DWT 中的链接组件访问字段？*
2.  *如何在 SiteEdit 2009 中使链接组件中的字段可编辑？*

*这是问题 1 的答案。我将为问题 2 提供单独的答案。*

在 Tridion 对 DWT 模板中表达式的默认处理中，您只能访问包中的组件字段。因此，如果要访问组件 B 的字段，则必须编写一个 C# TBB 将该组件推送到包中。

示例 C# 片段：

```
var componentA = (Component) engine.GetObject(package.GetValue("Component.ID"));
var fieldsA = new ItemFields(componentA.Content, componentA.Schema);
var linkField = (ComponentLinkField) fieldsA["Name"];
var componentB = linkField.Value;
var itemB = package.CreateTridionItem(ContentType.Component, componentB);
package.PushItem("ComponentB", itemB); 
```

如果您将其放入 C# 片段 TBB 并在 DWT 之前将其放入 CT 中，您可以在您的 DWT 中执行此操作：

```
@@ComponentB.Fields.first@@ 
```

或者，您可以使用 Nuno 的[Dreamweaver Get eXtension (DGX)](http://www.sdltridionworld.com/community/extension_overview/dreamweaver_get_extension.aspx)来访问这些字段，而无需编写 TBB：

```
@@Get("Fields.Name.first")@@"/> 
```

使用 DGX 的唯一缺点是您需要在每台 Tridion 服务器上安装它。之后，您的 DWT 中就可以使用大量扩展功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T14:28:54.797

SiteEdit 2009 SP2 中引入了允许编辑链接组件的字段。SiteEdit 前端基于嵌入到从登台服务器返回的 HTML 中的[SiteEdit 命令语言工作。](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SiteEdit_2009_SP3/concept_SECLRef1247BCB0533849F2B3BBD6ADD51AD9B0)

因此，假设您在其中有一个组件：

```
<div class="cp">
    <!-- Start SiteEdit Component Presentation: {"ID" : "cp_1", 
         "ComponentID" : "tcm:12-549", "ComponentTemplateID" : "tcm:12-568-32",
         "ComponentVersion" : 5, "IsQueryBased" : false  } -->
    <label>Title: </label>
    <span>
        <!-- Start SiteEdit Component Field: {"ID": "cf_1", 
             "XPath": "tcm:Content/custom:Content/custom:Title", 
             "IsMultiValued":false} -->
        Tips for getting insurance when you have a pre-existing condition
    </span>
</div> 
```

那里的那些`Start SiteEdit`注释是您的 HTML 提供给 SiteEdit 的命令，您可以看到它们如何标记组件表示和标题字段。

如果您渲染链接组件的字段，您还需要有一个相应的组件表示命令，如下所示：

```
<div class="cp">
    <!-- Start SiteEdit Component Presentation: {"ID" : "cp_1", 
         "ComponentID": "tcm:12-54", "ComponentTemplateID": "tcm:12-56-32",
         "ComponentVersion" : 5, "IsQueryBased" : false  } -->
    <label>Title: </label>
    <span>
        <!-- Start SiteEdit Component Field: {"ID": "cf_1", 
             "XPath": "tcm:Content/custom:Content/custom:Title", 
             "IsMultiValued":false} -->
        Tips for getting insurance when you have a pre-existing condition
    </span>
    <br />
    <div class="cp">
        <!-- Start SiteEdit Component Presentation: {"ID" : "cp_2", 
            "ComponentID": "tcm:12-85", "ComponentTemplateID": "tcm:12-60-32", 
            "ComponentVersion" : 2, "IsQueryBased" : true  } -->
        <label>Byline: </label>
        <span>
            <!-- Start SiteEdit Component Field: {"ID": "cf_2", 
                 "XPath": "tcm:Metadata/custom:Metadata/custom:ByLine", 
                 "IsMultiValued":false} -->
            "It's a huge problem, because ..." says one expert.
        </span>
        <br />
        <label>Copyright: </label>
        <span>
            <!-- Start SiteEdit Component Field: {"ID": "cf_3", 
                 "XPath": "tcm:Metadata/custom:Metadata/custom:Copyright", 
                 "IsMultiValued":false} -->
            Getty Images
        </span>
    </div>
</div> 
```

现在有两个`Start SiteEdit Component Presentation`命令，一个用于外部组件，一个用于链接组件。这里要注意的一件重要事情是嵌套组件表示的 IsQueryBased 属性必须设置为 true。这告诉 SiteEdit 前端组件表示确实不应该出现在它从 Tridion 检索的页面 XML 中。

对于 SiteEdit 前端，如何将命令放入 HTML 并不重要。

最常见的是人们调用`RenderComponentPresentation`and `RenderComponentField`，它标记了相应的部分。但不幸的是，该`RenderComponentField`函数只能用于渲染所谓的“上下文组件”中的字段，它看起来像这样：

```
Item component = _package.GetByType(ContentType.Component); 
```

这意味着在单个 DWT 中，所有调用都`RenderComponentField`将在同一个上下文组件上工作。因此，您永远不能调用`RenderComponentField`单个 DWT 来呈现来自两个不同组件的字段。

你有两个选择来解决这个问题：

1.  调用`RenderComponentPresentation`链接的组件
2.  在 DWT 中自己渲染`Start SiteEdit Component Presentation`和命令`Start SiteEdit Component Field`

选项 1 是您可以获得的最清晰的分离：因为您正在渲染来自另一个组件的字段，所以您实际上是在渲染另一个组件表示。如果将链接字段的布局拆分为单独的 DWT 并围绕它构建 CT，则可以在主 DWT 中像这样呈现它：

```
@@RenderComponentPresentation(Component.Fields.Name, "tcm:1-2-32")@@ 
```

[Walter 在他关于 Tridion 模板的文章中](http://www.sdltridionworld.com/articles/compound_templating_part1.aspx)解释了这一点：

> 由于此 Dreamweaver 模板的范围仅限于显示当前组件字段，因此需要一个额外的步骤，即使用 RenderComponentPresentation 函数。我们需要将多媒体组件的 TCM URI 连同另一个 Dreamweaver 模板的 TCM URI 一起传递给该函数。

尽管它确实会导致更多的 CT 和 DWT，但这些 DWT 会简单得多，因为您现在可以`RenderComponentField`照常使用它们。

选项 2 实际上只是意味着您在 DWT 中使用 SiteEdit 命令输出 HTML 注释。由于[命令语言](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SiteEdit_2009_SP3/concept_SECLRef1247BCB0533849F2B3BBD6ADD51AD9B0)被记录为 API 的一部分（参见上面的链接），因此它在 SiteEdit 2009 的未来版本中发生变化的可能性很小。

很抱歉，你碰巧在这里触发了一个棘手的用例。我希望这是有道理的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T11:47:59.547

如果您使用的是 SiteEdit 2009，这是可能的，只是比使用主要组件字段要困难一些。SiteEdit 通过使用 JSON 标记包装内容字段来工作。您没有理由无法检测到发布目标是否正在暂存并自己编写此 JSON。

或者，Will Price 开发了一些模板构建块来帮助使用 SiteEdit，可[在此处](http://www.sdltridionworld.com/community/extension_overview/siteedit-2009-essentials.aspx)获得。

[此处](http://www.sdltridionworld.com/articles/siteedit-2009-essentials-the-basics.aspx)附有指南，特别是有关[嵌入式组件](http://www.sdltridionworld.com/articles/siteedit-2009-essentials-embedded-components.aspx)的部分将对您有用。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-21T08:20:13.413

您无法使用标准 Dreamweaver 模板从 B 读取字段。您将需要编写一个 C# TBB 来提取链接的组件并将其作为组件类型放入包中。然后，您可以使用 DWT 语法从该组件中读取字段。例如：@@linkedComponent.Fields.first@@

Siteedit 在这一点上存在问题，并且不同的版本使用不同的语法和功能。恐怕使用最新版本您无法编辑此类字段...

# jquery - 在 jQuery QUnit 中，如何从“equal()”断言中获取断言结果？

> ID：10256747
> 
> 赞同：0
> 
> 时间：2012-04-21T06:13:29.387
> 
> 标签：jquery, qunit

我有一些可以使用的函数`Math.floor((Math.random() * 9) + 1);`，然后用我使用的其他逻辑来测试它们`for`：

```
test("getRandomNumber(anyNumber) should return a number between 1..anyNumber", function () {
    var anyNumber, result;

    for (var i = 0; i <= 100; i++) {
        anyNumber = Math.floor((Math.random() * 9) + 1);
        result = getRandomNumber(anyNumber);

        equal((0 < result && result < (anyNumber + 1)), true);
     }
}); 
```

我想从`equal`断言中获得结果，如果一个断言失败，则不需要留在循环中，例如：

```
test("getRandomNumber(anyNumber) should return a number between 1..anyNumber", function () {
    var anyNumber, result;

    for (var i = 0; i <= 100; i++) {
        anyNumber = Math.floor((Math.random() * 9) + 1);
        result = getRandomNumber(anyNumber);

        if (!equal((0 < result && result < (anyNumber + 1)), true));
            break;
     }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T06:16:00.643

只需将它分配给一个变量并检查它。

```
var result = 0 < result && result < anyNumber + 1;

equal(result, true);

if ( ! result) {
    break;
} 
```

# windows-phone-7 - 在WP上的图片上画一个字符串

> ID：10256748
> 
> 赞同：0
> 
> 时间：2012-04-21T06:13:32.763
> 
> 标签：windows-phone-7, windows-phone-7.1

我想在 Windows Phone 库中的图片上绘制一个字符串。要获取图片，我使用的是 PhotoChooserTask。得到图片后，我想在这个图像上写一个文本框的文本并将图像保存到库中。

```
WriteableBitmap wbmps = new WriteableBitmap(480, 800);
wbmps.SetSource(e.ChosenPhoto);

ScaleTransform transform = new ScaleTransform();
transform.ScaleX = 1;
transform.ScaleY = 1;

wbmps.Render(backgroundPic, transform);
wbmps.Render(diaText, transform);

wbmps.Invalidate();

backgroundPic.Source = wbmps; 
```

但这不是我想要的。那么我该如何修复它并在图像上写一些东西。在此之后，我想在文本周围制作一个彩色矩形，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:54:17.607

把你的元素放在一个网格中，然后渲染网格：

```
 <Grid x:Key="TheGrid">
        <Image.../>
        <Border ...>
           <TexBlock .../>
        </Border>
      <Grid> 
```

代码：

```
 wbmps.Render(TheGrid, transform); 
```

# iphone - 如何在 iPhone 应用程序中将 CSV 数据动态导入到 sqlite

> ID：10256752
> 
> 赞同：1
> 
> 时间：2012-04-21T06:13:59.367
> 
> 标签：iphone, sqlite

我被困住了。有没有可以将 CSV 记录直接导入 sqlite 表的功能？任何帮助都将是可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T06:34:17.327

这是一个粗略的代码。请根据您的要求进行一些更改。

```
-(void)loadCSVData{

    NSStringEncoding encoding;
    NSString *path1=[[NSString alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:filename ofType:@"csv"]  usedEncoding:&encoding error:nil];
//You will get the array of lines
    NSArray *messArr=[path1 componentsSeparatedByString:@"\n"]; 

//Now start to process each single line.
    if(messArr)
    {
        for(int i=0;i<=[messArr count]-1;i++)
        {

            NSMutableDictionary *d=[[NSMutableDictionary alloc] init];
            NSString *StrValue=[NSString stringWithFormat:@"%@",[messArr objectAtIndex:i]];
            StrValue=[StrValue stringByReplacingOccurrencesOfString:@"\"" withString:@""];
            StrValue=[StrValue stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
            NSArray *arr=[StrValue componentsSeparatedByString:@","];

`/*Add value for each column into dictionary*/` 
```

`           [d setValue:[arr objectAtIndex:0] forKey:@"columnName"];             //Add this dictionary "d" into database
[d release]; //Cleanup.
       }
   }
[path1 release];    
}`
另请参阅以下问题的答案。创建自己的自定义 CSV 解析器有一个很好的解释。

[从 csv 文件加载数据（iphone SDk）](https://stackoverflow.com/questions/2426374/load-data-from-csv-file-iphone-sdk) [[如何在 iphone 应用程序中动态将 CSV 数据导入 sqlite](https://stackoverflow.com/questions/10256752/how-to-import-csv-data-to-sqlite-dynamically-in-iphone-application][2])

[2]：[如何在iphone应用程序中动态导入CSV数据到sqlite](https://stackoverflow.com/questions/10256752/how-to-import-csv-data-to-sqlite-dynamically-in-iphone-application)

我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T06:22:45.040

您可以使用以下方法读取 CSV 文件

```
NSData  *CSVdata = [NSData dataWithContentsOfFile:path];
NSString *CSVString = [CSVdata dataUsingEncoding:NSASCIIStringEncoding]; 
```

您需要将此字符串中的数据分组，然后可以插入到数据库中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T06:34:24.197

如果您要求以编程方式执行此操作，那么您将不得不为此编写自己的逻辑。1）读取一行（如果它的标题行创建一个包含以下字段的表） 2）将记录插入到您的表中，并将各种字段映射到特定表的列。

否则，如果您只对插入记录感兴趣，那么您可以使用适用于 mac 的[SQLiteManager](http://download.cnet.com/SQLiteManager/3000-2065_4-94405.html)工具或其浏览器[插件](http://mac.softpedia.com/get/Internet-Utilities/SQLite-Manager.shtml)

您可以从以下屏幕抓取中获取提示（使用 SQliteManger for Mac。打开数据库--> 文件--> 导入--> 其他）

![在此处输入图像描述](../Images/1c9ded6fbd4136a133a04ce60183199f.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-21T07:09:33.650

[阅读这篇文章..Imort csv 到 sqllite](http://www.sqlite.org/cvstrac/wiki?p=ImportingFiles)

[给你的第二个参考](http://www.leesilver.net/1/post/2011/10/-importing-data-into-a-sqlite-database-for-ios-project.html)

希望对你有帮助

# mysql - 单页请求的大量数据库查询策略

> ID：10256758
> 
> 赞同：-4
> 
> 时间：2012-04-21T06:14:54.187
> 
> 标签：mysql, sql, caching, memcached

对于 IMDB ( [http://www.imdb.com/name/nm0000138/)、LinkedIn](http://www.imdb.com/name/nm0000138/)或 Facebook 之类的网站，加载单个页面似乎可能有上千个查询。

在页面请求上可以（明智地）生成的查询数量是否有上限？或者这个问题是通过缓存解决的，比如`memcached`？还有其他可以采用的策略吗？（我想在 IMDB 上，内容大部分是用户页面的静态内容。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:20:11.133

没有真正的硬性限制。这一切都取决于许多因素；包括您的数据库流量配置文件、您的数据库可用的资源、您的数据库架构（复制/分布式等）、您的架构、您的应用程序设计、网络连接、您的用户的期望。

最好的办法是了解您的页面加载时间应该是多少（95% 的页面加载应该在 0.5 秒或其他任何时间），然后设置一些基准测试来检查您是否达到了这些目标。只要您的应用程序采用分层方法构建并且组件被很好地封装/分离，您就应该能够添加性能改进策略，例如缓存，因为您需要将性能保持在需要的位置。

# php - 值中出现空格时无法进行 url 重写

> ID：10256762
> 
> 赞同：0
> 
> 时间：2012-04-21T06:15:44.807
> 
> 标签：php, html, url-rewriting

当我传递包含空格的值（比如新德里）时，我的 URL 重写不起作用查看我的代码

```
RewriteRule top-indian-cities-states-(\d+)/(.*)/ top-indian-cities-states.php?id=$1&top=$2 
```

当第二个参数变为新德里时，它不起作用

```
mydomain/top-indian-cities-states-1/New-delhi-Hotel 
```

我将变量设为

```
$name="New Delhi";
$displayName=trim($name." Hotel");
        $urlVal=str_replace(" ","-",$displayName);
<li><a href="top-indian-cities-states-1/<?=$urlVal?> /"><?=$name?> Hotel</a></li> 
```

此外，当我请求第二个参数时，我得到了 twise 的值，即

```
echo $_REQUEST['id']; Results in `1` it's correct 

echo $_REQUEST['top'];  Results in `Kerala-Hotel/Kerala-Hotel`  is it correct . i need to get the value only one . 
```

有人有想法吗？

请重播

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:45:57.203

试试这样的重写规则

```
RewriteRule top-indian-cities-states-(\d+)/(.*)$ top-indian-cities-states.php?id=$1&top=$2

<li><a href="top-indian-cities-states-1/<?=$urlVal?> /" 
```

还要在双引号之前删除上一行中的 /。给它作为

```
<li><a href="top-indian-cities-states-1/<?=$urlVal?>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:21:00.100

好吧，您在城市名称后指定了一个斜杠，但您的示例中没有它（不允许使用空格）。

2个解决方案：

1.  将尾部斜杠添加到正则表达式：

    ```
    RewriteRule top-indian-cities-states-(\d+)/(.*)/? top-indian-cities-states.php?id=$1&top=$2 
    ```

2.  将尾部斜杠添加到变量

    ```
    $urlVal=str_replace(" ","-",$displayName);
    $urlVal=. "/"; 
    ```

    并在您的 HTML 中删除斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T06:23:09.743

尝试这个：

```
$urlVal=trim(str_replace(" ","-",$displayName));

<li><a href="top-indian-cities-states-1/<?=$urlVal?>/"><?=$name?> Hotel</a></li> 
```

# jira - 在 Jira 中创建“路线图”的最佳实践

> ID：10256767
> 
> 赞同：8
> 
> 时间：2012-04-21T06:16:36.910
> 
> 标签：jira

我们希望为我们的产品开发路线图实施一个可靠的“路线图”。我们使用 Jira (4.4.3) 和 Greenhopper 进行项目管理和错误跟踪，但 Jira 路线图功能仅向您显示您定义的版本列表。

但是，我们目前为每个 sprint 使用我们的**“版本”**，例如“第 16 周”、“第 17 周”等，其中包含该周 sprint 的所有任务/问题。

![版本截图](../Images/d43e550bc1f53f7e69eaabddc9ee04a0.png)

我们目前使用**“组件”**来跟踪主要功能集并进行分类（例如“与 xyz API 集成”、“将电子邮件迁移到 SendGrid”、“错误：代码”或“技术债务”）。

![组件截图](../Images/9dd8fbb813ce43574e52cfe825564ceb.png)

Jira **“路线图”**功能显示版本列表和每个版本的进度。但是，我们已经在使用版本来跟踪我们的每周冲刺，其中一些路线图功能将跨越许多版本/版本/冲刺。

![路线图截图](../Images/31d3f6f3c42e06aa62bbe4ad50c4f5b8.png)

我们如何在 Jira 中跟踪我们的完整路线图？我们真的很想在这个路线图中看到我们主要计划的列表，而不是我们所有每周冲刺的列表（例如“在 CI 服务器上启用 Selenium”、“Extranet MVC3 转换”、“将生产升级到 R2”）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T12:46:20.770

## 更新

提到的故事[GHS-945](https://jira.atlassian.com/browse/GHS-945)已经在[GreenHopper 5.10](http://www.atlassian.com/en/software/greenhopper/whats-new/greenhopper-510)中得到解决- 同时 [GreenHopper 6.0](http://www.atlassian.com/en/software/greenhopper/whats-new/greenhopper-60)正式提供了所有提到的关于看板、Scrum 的重大改进，尤其是自定义敏捷板、计划和流程管理，以及许多以前没有提到或可用的其他改进。因此，临时术语*Rapid Board*也已被删除，请参阅[名称上不再快速 - 但本质上仍然快速](https://confluence.atlassian.com/display/GH/GreenHopper+6.0+Release+Notes#GreenHopper6.0ReleaseNotes-NolongerRapidbyname%E2%80%93butstillrapidbynature)：

> 在 GreenHopper 6.0 中，新板不再被称为“快速板”——我们认为现在每个人都知道它比经典板快得多。新板是基于更新的技术从头开始构建的，使我们能够提供最佳性能，充分利用您的宝贵时间。

最后，GreenHopper 团队继续在几乎每两周发布一次的点数版本中提供显着改进，最后一个解决了从经典板过渡造成的少数损失之一：[版本 6.0.2](https://confluence.atlassian.com/display/GH/GreenHopper+6.0.2+Release+Notes)再次具有[可自定义的卡片颜色](https://confluence.atlassian.com/display/GH/GreenHopper+6.0.2+Release+Notes#GreenHopper6.0.2ReleaseNotes-Customisablecardcolours)，甚至比经典变体，只要您现在可以根据问题类型、优先级、受让人或自定义 JQL 查询进行着色。

### 结论

我们以前的工作流程包括待办事项着色（请参阅[您的待办事项是什么颜色？](http://www.infoq.com/news/2010/05/what-color-backlog)）现在完全迁移到新的 GreenHopper，获得了大量重要的新功能和动态改进，以及一个分别更加敏捷和高效的团队。

* * *

## 初步答案

[JIRA](http://www.atlassian.com/software/jira/overview)和[GreenHopper](http://www.atlassian.com/software/greenhopper/overview)的许多领域的版本与 sprint 阻抗不匹配对于使用此工具链的敏捷团队来说是一个众所周知的问题。我们实施了各种尝试以一种或另一种方式对其进行补救（主要是通过各种版本层次结构，即具有父子关系的产品版本和冲刺版本），但结果都没有真正有效。

因此，相对过时的故事[添加一个单独的字段以允许相互独立地跟踪冲刺和发布信息 (GHS-945)](https://jira.atlassian.com/browse/GHS-945)捕获了这个主题。虽然截至今​​天尚未解决，但 GreenHopper 目前正在进行重大重组以解决此（及相关）问题，虽然尚未完全完成，但今天可用的相应功能已经（最终）解决了您的用例，请参阅*Atlassian 状态为在 2012 年 2 月 28 日*：

> Sprint 作为一个单独的自定义字段现在在 GreenHopper 5.9 中可用，但它仅由 Scrum Rapid Board 使用（可以从 GreenHopper 管理屏幕作为实验室功能启用）。
> 
> Rapid Board 使用此字段可释放 fixVersion 字段以供正常使用。

提到的*快速董事会*和总体重组在[GreenHopper 的未来中](http://confluence.atlassian.com/display/GH/The+Future+of+GreenHopper)有进一步的详细说明：

> 快速董事会是 GreenHopper 的新起点。我们正在构建它以利用最新的 Web 技术，并为您（客户）提供出色的体验，以规划、跟踪和报告您的敏捷项目和团队的进度。

[Rapid Board](http://confluence.atlassian.com/display/GH/Using+the+Rapid+Board)和相关功能目前确实在快速改进，即 GreenHopper 团队快速迭代并在当前每月到每两周的点发布中实现重大改进。

我完全赞同这种方法，它基本上是在多功能 JQL 功能之上构建电路板（请参阅[高级搜索](http://confluence.atlassian.com/display/JIRA/Advanced+Searching)），几乎可以完全自由地组装适合您需要的完美电路板。

最重要的是，它为我们解决了版本与 sprint 阻抗不匹配的问题，因为 sprint 现在是解耦的实体，并且可以再次根据需要使用版本，从而产生一个有用的版本和基于发布日期的面向客户的[JIRA 路线图](http://confluence.atlassian.com/display/JIRA/Browsing+a+Project%27s+Road+Map)。

向这种新方法的过渡当然是一项专门的工作，最终需要一些计划和时间，而且以前可用的功能仍然存在一些相关缺点；例如，目前未解决的故事[作为用户，我想配置快速板（GHS-3922）中显示的卡片](https://jira.atlassian.com/browse/GHS-3922)对我们来说很重要，因为我们一直在使用 Philippe Kruchten 的创新方法进行积压着色（参见[What Color is你的积压？](http://www.infoq.com/news/2010/05/what-color-backlog)）取得了巨大的成功，这对于快速董事会来说还不可能。

最后，GreenHopper 5.9 需要 JIRA 5.0，它现在可能是也可能不是一个展示者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-23T03:42:09.223

只是为了跟进这个线程，我想为 JIRA 标记一个路线图插件，[Easy Agile Roadmaps](https://marketplace.atlassian.com/plugins/com.arijea.easy-agile-roadmaps "JIRA 的简单敏捷路线图")。将史诗拖到日历上，然后拖动以调整史诗的大小。您还可以向路线图添加版本和静态标记以突出显示里程碑。

[![JIRA 的简单敏捷路线图](../Images/beb0357e361600a7dc36b8aad75c71b5.png)](https://i.stack.imgur.com/kCq2i.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-09T13:55:25.553

如果您正在寻找不同的时间粒度（冲刺与发布/版本）和/或细节级别（功能集更改与开发任务），那么一个好的方法是将这些分成 2 个不同的项目并根据需要使用问题链接。

然后在高级项目中，您可以很好地了解所有利益相关者和您的长期路线图规划。

缺点是需要保持两个项目同步，主要是手动。

# android - 内容提供者上的 URI 匹配不正确匹配

> ID：10256773
> 
> 赞同：1
> 
> 时间：2012-04-21T06:17:32.650
> 
> 标签：android, pattern-matching, uri, android-contentprovider

我已经尝试了一段时间，但似乎无法解决我的 URI 匹配问题。任何帮助是极大的赞赏。

这是我对内容 uri 和 uri 匹配器的声明：

```
private static final String AUTHORITY = "edu.uprm.civil.db";

public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY);

private static UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
static {
    sURIMatcher.addURI(AUTHORITY, "/get-table" + "/*", TABLE_REQUEST_CODE);
    sURIMatcher.addURI(AUTHORITY, "/get-row" + "/*", ROW_REQUEST_CODE);
    sURIMatcher.addURI(AUTHORITY, "/search" + "/*", TABLE_SEARCH_REQUEST_CODE);
} 
```

并且被传递的 uri 在以下代码中构造：

```
 Uri.Builder uriBuilder = DBContentProvider.CONTENT_URI.buildUpon();

    switch(id){
    case LOADER_GET_TABLE_ID :
        uriBuilder.appendPath("get-table");
        uriBuilder.appendPath("q");
        uriBuilder.appendQueryParameter("table", formID);
        return new CursorLoader(context, uriBuilder.build(), null, null, null, null);
    case ... 
```

我调试了该方法，并且能够看到参数中包含的 URI，但它从不匹配。

uri是怎么来的：

```
content://edu.uprm.civil.db/get-table/q?table=150 
```

如果您需要更多信息，请告诉我，这让我很头疼......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:56:53.670

修改您的规则并从路径参数`UriMatcher`中删除开始：`/`

```
sURIMatcher.addURI(AUTHORITY, "get-table" + "/*", TABLE_REQUEST_CODE);
sURIMatcher.addURI(AUTHORITY, "get-row" + "/*", ROW_REQUEST_CODE);
sURIMatcher.addURI(AUTHORITY, "search" + "/*", TABLE_SEARCH_REQUEST_CODE); 
```

# java - 使用 rxtxComm 处理 RS232 DB9 中的握手线

> ID：10256776
> 
> 赞同：0
> 
> 时间：2012-04-21T06:18:02.753
> 
> 标签：java, rxtx, handshake, usbserial

我使用 rxtxComm 与 A​​rduino（USB 串行端口）进行通信（发送和接收数据）。如何使用 rxtxComm 库处理像 DTR 这样的握手线？你能给我一些关于这个的教程或一些示例代码吗？？？

*   注意：我使用的是win7操作系统。我今天（21-4-2012）买了一个 USB-Serial（DB9）适配器；计划将 LED 阵列直接连接到 rs232...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:31:50.280

我猜你已经安装了所有的库。

更改为您的端口 defaultPort = "COM24";

试试标准代码

```
package serialtest;

import java.util.*;
import gnu.io.*;
import java.io.IOException;
import java.io.OutputStream;

public class DXSimpleWrite {
    static Enumeration        portList;
    static CommPortIdentifier portId;
    static String         msgStr = "Hello, world!";
    static SerialPort         serialPort;
    static OutputStream       outputStream;
    static boolean        outputBufferEmptyFlag = false;

    public static void main(String[] args) {
    boolean portFound = false;
    String  defaultPort = "COM24";

    if (args.length > 0) {
        defaultPort = args[0];
    } 

    portList = CommPortIdentifier.getPortIdentifiers();

    while (portList.hasMoreElements()) {
        portId = (CommPortIdentifier) portList.nextElement();

        if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL) {

        if (portId.getName().equals(defaultPort)) {
            System.out.println("Found port " + defaultPort);
            portFound = true;
            try {
            serialPort = 
                (SerialPort) portId.open("SimpleWrite", 2000);
            } catch (PortInUseException e) {
            System.out.println("Port in use.");
            continue;
            } 

            try {
            outputStream = serialPort.getOutputStream();
            } catch (IOException e) {}

            try {
            serialPort.setSerialPortParams(9600, 
                               SerialPort.DATABITS_8, 
                               SerialPort.STOPBITS_1, 
                               SerialPort.PARITY_NONE);
            } catch (UnsupportedCommOperationException e) {}

            try {
                serialPort.notifyOnOutputEmpty(true);
            } catch (Exception e) {
            System.out.println("Error setting event notification");
            System.out.println(e.toString());
            System.exit(-1);
            }

            System.out.println(
                "Writing "+msgStr+"\" to "+serialPort.getName());
            try {
            outputStream.write(msgStr.getBytes());
            } catch (IOException e) {}

            try {
               Thread.sleep(2000);  // Be sure data is xferred before closing
            } catch (Exception e) {}
            serialPort.close();
            System.exit(1);
        } 
        } 
    } 

    if (!portFound) {
        System.out.println("port " + defaultPort + " not found.");
    } 
    } 

} 
```

祝你好运！

# node.js - 使用 node.js 在 heroku 上 redis 崩溃

> ID：10256779
> 
> 赞同：3
> 
> 时间：2012-04-21T06:18:39.333
> 
> 标签：node.js, heroku, redis

我有一个使用 nodejs 和 redis 在 heroku 上运行的非常简单的应用程序。它通过 ajax post 定期获取发布给它的数据，并将数据存储在 Redis 中的列表中。

我在本地运行该应用程序没有问题，它将发送给它的数据记录到redis而没有投诉。但是，当我在 heroku 上运行它时，我在它崩溃之前收到了大约 5-10 个请求，并出现了一个非常非特定的 redis 错误。

依赖项：

```
"redis": "~0.7.1",
"hiredis": "~0.1.14",
"redis-url": "~0.1.0" 
```

写到 redis (coffeescript) 的代码：

```
app.post '/track', (req, res) -> 
  redis = require('redis-url').connect(app.settings.redis_url)

  if(req.body.userid)
    key = "locations:#{req.body.userid}"
    redis.rpush key, JSON.stringify({time: (new Date()).toString(), lat: req.body.latitude, lon: req.body.longitude}) 
```

我得到的错误如下：

```
Error: Uncaught, unspecified 'error' event.
2012-04-21T06:12:00+00:00 app[web.1]:     at Command.callback (/app/node_modules/redis/index.js:159:29)
2012-04-21T06:12:00+00:00 app[web.1]:     at HiredisReplyParser.<anonymous> (/app/node_modules/redis/index.js:256:14)
2012-04-21T06:12:00+00:00 app[web.1]:     at RedisClient.return_error (/app/node_modules/redis/index.js:446:25)
2012-04-21T06:12:00+00:00 app[web.1]:     at HiredisReplyParser.execute (/app/node_modules/redis/lib/parser/hiredis.js:41:18)
2012-04-21T06:12:00+00:00 app[web.1]:     at HiredisReplyParser.emit (events.js:67:17)
2012-04-21T06:12:00+00:00 app[web.1]:     at RedisClient.on_data (/app/node_modules/redis/index.js:422:27)
2012-04-21T06:12:00+00:00 app[web.1]:     at Socket.emit (events.js:67:17)
2012-04-21T06:12:00+00:00 app[web.1]:     at Socket.<anonymous> (/app/node_modules/redis/index.js:66:14)
2012-04-21T06:12:00+00:00 app[web.1]:     at TCP.onread (net.js:367:14) 
```

这会使应用程序崩溃，heroku 最终会恢复该应用程序，但它会在几个请求内很快再次崩溃。

有人遇到过这个吗？我对 node/redis 很陌生，所以这可能是显而易见的。奇怪的是它在本地几乎永远快乐地运行，但在heroku上就这样死了......

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T03:00:24.763

好吧，这是一个明显的 RTFM 案例，在发布之前没有睡在上面。

我在另一个 SO 帖子上看到，我可以通过以下方式将错误处理程序附加到 redis 客户端：

```
redis.on "error", (err) ->
   console.log("Redis error: #{err}") 
```

这产生了

```
Redis error: Auth error: Error: Error: ERR max number of clients reached 
```

在日志中，这是因为在每个请求上打开一个新连接而不是关闭它。然后，我将连接实例移至 server.js 文件，然后将其作为参数传递给我的路由处理程序。现在应用程序运行良好，只有一个活动连接......

希望这将帮助未来犯过类似错误的人......

# regex - 为什么 * 正则表达式运算符不起作用？

> ID：10256787
> 
> 赞同：2
> 
> 时间：2012-04-21T06:20:12.487
> 
> 标签：regex

`[\d-.]+`工作，但`[\d-.]*`没有。我唯一改变的是最后的`+`to `*`。

```
<b>12345</b>
<b>12345-6789</b>
<i>1234.5678</i>
<tag>1234-2342346456</tag> 
```

我在这里测试了[http://regexr.com?30ngn](http://regexr.com?30ngn)

`*`表示 0 或更多，而表示`+`1 或更多。`*`唯一的工作吗`.`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T06:25:18.023

操作员工作正常，`*`只是正则表达式表现得很有趣，或者是由于您`-`在正则表达式字符类中危险地使用了该字符。如果要匹配一个`-`字符类中的一个字符，把它放在开头；否则，正则表达式引擎可能会认为您想要匹配一个范围（例如`[A-Z]`）。

固定的正则表达式`[-\d.]*`在[regexpal](http://regexpal.com/?flags=g&regex=%5B-%5Cd.%5D%2a&input=%3Cb%3E12345%3C/b%3E%0A%3Cb%3E12345-6789%3C/b%3E%0A%3Ci%3E1234.5678%3C/i%3E%0A%3Ctag%3E1234-2342346456%3C/tag%3E%0A)上工作得很好。

# php - 将 Javascript 转换为 PHP

> ID：10256790
> 
> 赞同：0
> 
> 时间：2012-04-21T06:21:34.907
> 
> 标签：php, javascript, ajax

我正在尝试找到一种通过 php 加密并通过 javascript/ajax 解密的方法

这并不意味着是一个强大的解决方案，而只是一个轻量级的补救措施，以阻止临时用户右键单击并查看源以在清晰的视图中查看正确答案。答案将通过 ajax 揭晓。

我试图将我在下面找到的字符串函数的编码转换为 php，但这不正确。

[http://www.yaldex.com/FSPassProtect/CharacterEncoder.htm](http://www.yaldex.com/FSPassProtect/CharacterEncoder.htm)

我到目前为止的代码是这个......

```
$string = "Ordinarily, license fees are in the nature of the exercise of police";

for($i=0;$i<strlen($string);$i+=1){
    $output = $output . (ord($string[$i]) - 23);
}

echo $output; 
```

但是当我将生成的代码传递到上面列出的网页中进行解密时，它是不正确的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T06:24:26.010

请避免故意使您的代码难以阅读。如果您不希望用户知道答案，请在需要检查之前不要给出答案。

答案应该在服务器端，远离用户，一旦用户点击答案并提交，那么**只有在那时**你才应该获取答案并检查用户是否正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T06:29:31.837

请注意，我更喜欢@Truth 的回答，但如果您真的不想这样做，请继续阅读；）

在 PHP 端你可以使用`base64_encode()`，在 javascript 端使用这样的自定义实现[来](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript#246813)解码它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T10:17:03.647

你为什么选择这个问题的答案？如果要加密代码，请使用 base_encode()

```
<?php
$str = 'This is an encoded string';
echo base64_encode($str);
?> 
```

对于解密使用低于一

```
<?php
$str = 'VGhpcyBpcyBhbiBlbmNvZGVkIHN0cmluZw==';//encoded string
echo base64_decode($str);
?> 
```

# c# - 如何从linq中的表类型获取sql表名

> ID：10256793
> 
> 赞同：0
> 
> 时间：2012-04-21T06:21:56.253
> 
> 标签：c#, linq, linq-to-sql

如何在 linq 中获取 sql 表名

例如： 在 linq 我的表对象名称是：`TblUserDetail`。

但是 sql 中的这个表名是`TblUserDetails`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T06:28:55.870

尝试这个：

```
var model = _db.Mapping; //_db is the datacontext instance
foreach (var mt in model.GetTables())
   Console.WriteLine(mt.TableName); 
```

这将列出所有*sql*表的名称。

引用自[获取所有表名](http://blogs.msdn.com/b/jomo_fisher/archive/2007/07/30/linq-to-sql-trick-get-all-table-names.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:38:22.543

Ling2sql 删除了“s”，因为复数形式用于标识相关实体中的 TblUserDetails 集合。

可能你的 TblUSer 实体会有一个 TblUserDetails 集合（假设：你有一个 1:n 的关系）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:18:48.397

我已经为类似[问题提供了](https://stackoverflow.com/q/5313008/844006)[答案](https://stackoverflow.com/a/6909752/844006)；然而，答案是 Linq to Entities。

# jquery - 更改 jQuery 中的某些段落文本？

> ID：10256795
> 
> 赞同：2
> 
> 时间：2012-04-21T06:22:14.827
> 
> 标签：jquery, html

我想知道是否可以在 jQuery 中动态更改文本。

我想用 HTML 显示这个——

```
A [dynamic animal name] is my favourite pet. 
```

意思是

```
[dynamic animal name] 
```

应该在一个单词数组中，比如说

```
var wordArray = [cat, dog, cow] 
```

我将如何将段落分成可以动态更改的段落？

我在尝试

```
<p>A <p id="special">[wordArray goes here]</p> is my favourite pet.</p> 
```

但在 html 中是这样的：

一头牛

是我最喜欢的宠物。

这意味着它将整行单词分成两个单独的句子。

我怎么让它一起去？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T06:27:59.033

而不是`<p id="special">...</p>`使用`<span id=special"> ... </span>`

`span`是一个内联元素，不会破坏视图。

另一种解决方案是使用 css 使`<p id="special">`元素内联：

```
p#special{
    display:inline;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T06:28:42.670

`<span>`标签将是正确的，而不是`<p>`动态动物名称的标签

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T06:25:17.203

对*动物*使用[`span`-tag](http://www.w3.org/wiki/HTML/Elements/span)：

 *HTML：

```
<p>A <span id="special">[wordArray goes here]</span> is my favourite pet.</p> 
```

javascript:

```
$('#special').text(wordArray[2]); 
```

另请参阅[此示例](http://jsfiddle.net/jz9vT/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T06:27:42.307

尝试这个：

```
<p>A <span id="special"></span> is my favourite pet.</p>

var animals = ["cat", "dog", "cow"];

$("#special").text(animals[0]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T06:28:22.703

将其更改为：

```
<p>A <span id="special">[wordArray goes here]</span> is my favourite pet.</p> 
```

您正在使用嵌套的 <p> 标签，这就是它分成句子/段落的原因。*

# visual-c++ - 如何在opencv中合并两个图像？

> ID：10256802
> 
> 赞同：22
> 
> 时间：2012-04-21T06:23:56.823
> 
> 标签：visual-c++, image-processing, opencv, computer-vision, image-stitching

我已经计算了单应性，取出了透视变换。我可以在一个窗口中显示两个图像，但无法合并它们。这是我的示例图像-> ![图像1](../Images/ee4a5e8675b18be74fa265c7ebdfee74.png)

![图2](../Images/a87ade4f02a96427e9966078172082f3.png)

我正在使用此代码的代码->

```
cv::warpPerspective(image2,warpresult2,homography,cv::Size(2*image2.cols,image2.rows));

Mat imgResult(image1.rows,2*image1.cols,image1.type());

Mat roiImgResult_Left = imgResult(Rect(0,0,image1.cols,image1.rows)); 
Mat roiImgResult_Right = imgResult(Rect(image1.cols,0,image2.cols,image2.rows)); 

Mat roiImg1 = image1(Rect(0,0,image1.cols,image1.rows));
Mat roiImg2 = warpresult2(Rect(0,0,image2.cols,image2.rows));

roiImg1.copyTo(roiImgResult_Left); //Img1 will be on the left of imgResult
roiImg2.copyTo(roiImgResult_Right); //Img2 will be on the right of imgResult

imshow("Finalimg",imgResult);
imwrite("C:\\OpenCv_Projects\\outputimage.jpg",imgResult);
cvWaitKey(0); 
```

我认为问题出在我给 roiImgResult_right 的坐标上。

输出图像是-> ![输出图像](../Images/ddf992ab69d123aa061415d57d77ca82.png) 如您所见，图像未正确合并，右侧有黑色区域。如何也将其删除？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-21T06:53:34.450

OpenCV 已经实现了图像拼接。如果您使用“-D BUILD_EXAMPLES”进行编译，则可以使用二进制的**stitching_detailed**。用法很简单：`./stitching_detailed img1 img2 ...`

或者，您可以只使用stitcher 类（[此处](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/stitching.cpp?rev=6683)的示例）：

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/stitching/stitcher.hpp"

using namespace std;
using namespace cv;

bool try_use_gpu = false;
string result_name = "result.jpg";

int main(int argc, char* argv[])
{
    vector<Mat> imgs;
    // add images...

    Mat pano;
    Stitcher stitcher = Stitcher::createDefault(try_use_gpu);
    stitcher.stitch(imgs, pano);
    imwrite(result_name, pano);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-21T08:21:15.570

*   ***图像混合：***您可以使用拉普拉斯金字塔[混合](http://graphics.cs.cmu.edu/courses/15-463/2010_spring/Lectures/blending.pdf)。使用 opencv[在此处](http://www.morethantechnical.com/2011/11/13/just-a-simple-laplacian-pyramid-blender-using-opencv-wcode/)查看示例代码你可以使用任何你喜欢的掩码（这是一个二进制掩码）。

*   ***创建全景***如果您想制作全景，您可以使用 Min-Cut Stitching。我找到了这个做全景[处理](http://blog.blackhc.net/2010/07/panorama-stitching/)的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-16T09:37:49.810

如果你做的更仔细，比如不裁剪和堆叠，而是使用 alphaBlend，那么你会发现一些奇怪的东西。

这是匹配的图像：

[![在此处输入图像描述](../Images/569330881dec21d229f7a679f651dce0.png)](https://i.stack.imgur.com/lrcke.jpg)

这是包装好的 img2：

[![在此处输入图像描述](../Images/70e6583e75c3e4b09a5251a9cd398093.png)](https://i.stack.imgur.com/BuXlP.png)

这是做 alphablend 的掩码：

[![在此处输入图像描述](../Images/e91ada2b365ecc1f3fe64654aff0ebd3.png)](https://i.stack.imgur.com/lXHz6.png)

这是 alphaBlended：

[![在此处输入图像描述](../Images/2da714ae2251615f001b4da29f0695a7.png)](https://i.stack.imgur.com/0OqZx.jpg)

* * *

我们可以很容易地在混合图像中找到鬼影。这是因为`warpPerspective`并`perspectiveTransform`不能真正找到`real`相机投影方程。主要是因为图像面板是 a `panel`，但 a`cylindrical surface`或`spherical surface`更复杂。所以我们所做的工作还不够。

虽然好消息是`OpenCV`提供`High level stiching API`，但我们可以轻松地进行拼接`OpenCV Stitching API`。这是结果。

[![在此处输入图像描述](../Images/28653191373b6216cd30c38045f727b4.png)](https://i.stack.imgur.com/PjDIP.png)

## 代码：

```
//! 2018.01.16 14:43:26 CST
//! 2018.01.16 17:32:15 CST
#include <iostream>
#include <fstream>
#include "opencv2/imgcodecs.hpp"
#include "opencv2/highgui.hpp"
#include "opencv2/stitching.hpp"
using namespace std;
using namespace cv;

Stitcher::Status stitchImages(vector<Mat>&imgs,string fname, Stitcher::Mode mode = Stitcher::PANORAMA, bool try_gpu=false) {
    Ptr<Stitcher> stitcher = Stitcher::create(mode, try_gpu);
    Mat pano;
    Stitcher::Status status = stitcher->stitch(imgs, pano);
    if (status != Stitcher::OK){
        cout << "Can't stitch images, error code = " << int(status) << endl;
        return -1;
    }
    imwrite(fname, pano);
    return status;
}

int main(int argc, char* argv[])
{

    vector<string>fnames = {
        "img1.jpg", "img2.jpg"
    };

    vector<Mat> imgs;
    for(auto fname: fnames) {
        imgs.emplace_back(imread(fname));
    }
    stitchImages(imgs, "scans.png",Stitcher::SCANS );
    stitchImages(imgs, "pano.png",Stitcher::PANORAMA );
} 
```

* * *

一些有用的链接：

1.  OpenCV 拼接：[https ://docs.opencv.org/3.3.0/d8/d19/tutorial_stitcher.html](https://docs.opencv.org/3.3.0/d8/d19/tutorial_stitcher.html)

2.  OpenCV C++ 中的 Alpha 混合：[在 opencv 中将 2 个图像与透明蒙版结合](https://stackoverflow.com/questions/36216702/combining-2-images-with-transparent-mask-in-opencv/48275580#48275580)

3.  OpenCV Python 中的 Alpha 混合： [opencv python 中的渐变蒙版混合](https://stackoverflow.com/questions/42594993/gradient-mask-blending-in-opencv-python/48274875#48274875)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-25T08:15:52.343

`addWeighted()`您可以使用该功能轻松混合两个图像。但要求是您必须制作相同大小的图像。

如果图像大小不同，请先调整两个图像的大小。然后调用下面的函数。

```
addWeighted(src1, alpha, src2, beta, 0.0, dst); 
```

声明两个`Mat`文件

```
src1 = imread("c://test//blend1.jpg");
src2 = imread("c://test//blend2.jpg"); 
```

还要声明`alpha`然后`beta`将结果保存到`Mat dst`.

您还可以在此处获取详细信息[Blending of Images using Opencv](http://www.life2coding.com/blending-images-using-opencv/)

# c# - Prism MVVM，我应该将 IRegionManager 放在 ViewModel 中还是其他地方？

> ID：10256803
> 
> 赞同：2
> 
> 时间：2012-04-21T06:24:16.620
> 
> 标签：c#, silverlight, mvvm, prism

我有一个可以创建另一个 ViewModel 的 ViewModel。

我想将此 ViewModel 设置为现有 View 的数据上下文，然后导航到该 View。

## 在 MyViewModel

```
private void CreateNewOrder()
{
    var order = new OrderViewModel(new Order(){/* setup some things */});
    // another ViewModel subscribes to MyCustomEvent
    this.eventAggregator.GetEvent<MyCustomEvent>().publish(order); 
    this.regionManager.RequestNavigate("DetailRegion", new Uri("OrderView", UriKind.Relative));
} 
```

问题是 ...

*   我的 ViewModel 需要参考区域名称和视图名称。
*   “DetailRegion”必须包含“OrderView”对象。
*   DetailView.DataContext 设置为 OrderViewModel（使用聚合事件订阅）

这是紧耦合吗？

我花了一些时间查看 Prism Quickstart 项目，发现“控制器”或太复杂的东西。

我只是想简化解耦 View-ViewModel。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T15:23:59.343

您添加到 ViewModel 的代码属于控制器。

*   ViewModel 是保存特定形状数据的哑容器。*他们不知道数据来自哪里或显示在哪里。*
*   视图通过绑定到视图模型来显示特定形状的数据。*他们不知道数据来自哪里，只知道如何显示。*
*   模型保存真实数据。*他们不知道在哪里消费。*

那么这张照片缺少什么？- 控制器发布和侦听事件并从模型中获取 ViewModel 的数据。他们还控制导航。

它确实应该被设计为 MVCVM。由于缺少控制器类，我认为 MVVM 的滥用没有尽头。再试一次 Prism 快速入门。

> 只是为了阐明控制器如何适应 MVVM 图片，下面是一个示例场景：
> 
> *   控制器由模块或应用程序*注册和初始化。
> *   控制器订阅“显示详细信息”消息。
> *   控制器收到“显示详细信息”消息。
> *   控制器构造一个“详细信息”VM，用数据填充它并将任何 ICommand 属性分配给控制器中的代码（例如，几乎所有应用程序逻辑都在控制器中）。
> *   控制器触发适当视图的显示，为 VM 提供服务。
> *   视图数据绑定到虚拟机。按钮绑定到 VM 中的 ICommand。
> *   用户编辑数据并点击提交。提交代码位于控制器中，并决定如何处理 VM 中的新数据。

*注意：虚拟机和视图不需要等待消息，因此只有控制器实际上需要在应用程序的生命周期内存在（即非常小的占用空间）。这对于移动应用程序来说非常棒，对于任何应用程序来说通常都是一件好事。

# java - MD5sum 计算不正确

> ID：10256811
> 
> 赞同：1
> 
> 时间：2012-04-21T06:26:57.727
> 
> 标签：java, md5, message-digest

我正在尝试匹配从服务器下载的文件的 md5sum。仅当总和匹配时才会继续处理。

```
try {
      MessageDigest digest = MessageDigest.getInstance("MD5");
      File f = new File(fileName);
      InputStream is = new FileInputStream(f);              
      byte[] buffer = new byte[8192];
      int read = 0;
      while( (read = is.read(buffer)) > 0) {
          digest.update(buffer, 0, read);
      } 
      is.close();
      byte[] md5sum = digest.digest();
      BigInteger bigInt = new BigInteger(1, md5sum);
      output = bigInt.toString(16);
      System.out.println("MD5: " + output);
  } catch(IOException e) {
      throw new RuntimeException("Unable to process file for MD5", e);
  } catch (NoSuchAlgorithmException e) {
    e.printStackTrace();
  } 
```

上面的代码每次都没有为某些文件正确提供 md5sum。

当我去控制台并检查`md5sum <filename>`md5sum 与服务器中的相同时。但是，当从代码中计算出相同的值时，它会产生不同的结果。

下载文件的 vimdiff 没有提供任何差异。下载后文件正确。

我在上面的代码中看不到问题。

我正在尝试更改缓冲区大小。但没有运气，所以我猜这不是因为缓冲区大小等。

```
 byte[] buffer = new byte[8192]; 
```

问候
Dheeraj Joshi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:43:03.813

BigInteger.toString 方法将转义前导 0，因为它们并不重要。

[BigInteger.toString 方法正在删除前导 0](https://stackoverflow.com/questions/10275769/biginteger-tostring-method-is-deleting-leading-0)

# jquery - I-Button jQuery 复选框

> ID：10256812
> 
> 赞同：0
> 
> 时间：2012-04-21T06:27:00.713
> 
> 标签：jquery, checkbox

我正在尝试将以下 jQuery 代码用于我的网站的复选框。

[I 按钮示例](http://www.givainc.com/labs/ibutton_example.htm)

[I-Button jQuery 插件](http://www.givainc.com/labs/ibutton_jquery_plugin.htm#options)

我有 2 个 javascript 文件，一个带有上面的插件，另一个 .js 文件执行站点估算的计算。

我的站点估计文件中有一个函数，它调用复选框的#selector

的HTML：

```
<h6 class="R_C-first R_C">Image Gallery 
<input id="R_C-imgGalleryPrice" readonly="readonly" class="R_C" type="text" />
</h6>

<div class="row">
<label class="label" for="ex01">Default Off</label> 
<input type="checkbox" id="R_C-imgGallery" name="imgGallery"/>
</div>
<input id="R_C-imgGalleryPrice2" readonly="readonly" class="R_C-floatRight R_C-width60 R_C" type="text" /> 
```

功能：

```
 $R_C_imgGalleryPrice.val("(" + currency + imgGalleryPrice + ")");
    $R_C_imgGalleryPrice2.val(currency + 0);

   $R_C_imgGallery.click(function () {
        if ($R_C_imgGallery.is(':checked')) {
            $R_C_imgGalleryPrice2.val(currency + imgGalleryPrice);
            var total = parseInt($widgetsPrice.val());
            $widgetsPrice.val(total + imgGalleryPrice);
            $("#R_C-imgGalleryPrice2, #R_C-imgGalleryPrice, #R_C-imgGalleryAdded").addClass('R_C-added');
            $("#imgGalleryHidden").val('Yes');
            }

        else  
            {$R_C_imgGalleryPrice2.val(currency + 0);
            var total = parseInt($widgetsPrice.val());
            $widgetsPrice.val(total - imgGalleryPrice);
            $("#R_C-imgGalleryPrice2, #R_C-imgGalleryPrice, #R_C-imgGalleryAdded").removeClass('R_C-added');
            $("#imgGalleryHidden").val('No');
            }

    }); 
```

这是问题开始的地方......当我添加 I-Button .js 文件时，上面的代码将不再执行。浏览器中不会抛出明显的错误。

至于 I-Button 复选框，它们运行良好......

至于复选框，它们都在一个表单标签和许多不同的复选框中。

我对 jQuery 的了解还不够，无法完全理解这个问题。似乎我需要以某种方式将 2 函数绑定/传递。I-Button 指示用户通过其功能运行选项，但目前对我来说相当混乱。

有一点很明显，I-Button 函数优先于stimulus.js 文件。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T10:12:16.773

我的 html 下拉元素与页面中包含的 I-button js 文件以及 jquery 文件版本 1.7.x 一起出现了类似的问题。将 jquery 文件更改为最新版本可以解决下拉问题，但会妨碍 I-button 插件。因此，尝试从插件代码中的 return false 中删除false并查看它是否**有效****：**

 **```
(document).bind("mousemove.iButton_"+T+" touchmove.iButton_"+T,function(c){if(O.clicked!=G){return false}c.preventDefault() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:40:02.070

当您添加此 I-Button .js 文件时，它会与您现有的任何 jQuery 文件发生冲突，因为其中一些功能都在其中，因此您删除了一个。**

# c++ - Scala 和 C++11 的类型推断有什么区别？

> ID：10256817
> 
> 赞同：16
> 
> 时间：2012-04-21T06:28:05.407
> 
> 标签：c++, scala, c++11, type-inference, language-comparisons

我很好奇 Scala 和 C++11 的类型推断有什么区别。在哪些情况下，我必须用一种语言指定类型，而不能用另一种语言指定类型？一个区别似乎是必须在 C++11 中指定的函数的返回类型，尽管`decltype`带有尾随返回类型的新函数语法允许指定推断类型。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T08:36:06.487

C++ 不能推断出这样的匿名函数：

```
// this wont work*
void somefunc(std::vector<int>& v) 
{
    std::for_each(v.begin(), v.end(), [](auto &x) { x++; });
}
//                                        /\
//                                         ------ I want this to be infered 
```

而 Scala 可以：

```
def somefunc(v: Vector[Int]) = v.map(x => x +1) 
```

**不确定我是否正确处理了 C++ 代码语法，我不侮辱语言，但这真的很神秘。如果我犯了错误，请纠正我*

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-21T10:17:25.970

本质上，与大人相比，C++ 推理过于简单。

函数式语言通常类似于**Hindley/Milner**，它非常接近于求解方程组，并且允许在栅栏的两边都有未知数。

相反，C++ 期望能够知道任何*内部*表达式的类型，并从中推断出*外部*表达式的类型。这是一种严格的单向推理，这意味着：

```
auto x = foo(1, 2); 
```

只要有一个`foo`接受整数并返回非void，就可以按预期工作。但是，正如 om-nom-nom 所证明的：

```
foo(1, [](auto x) { ++x; }); 
```

不会工作，因为你不能倒退并使用声称的类型`foo`来推断 lambda 的类型。

背后的原因是 C++ 使用函数重载，这意味着`foo`可能存在多个定义，并且您实际上需要知道参数的类型才能选择正确的。由于通常上述表达式是无法确定的，因此即使在有限的情况下也禁止它，以避免将来的维护地狱和人们永远不知道何时可以使用它。

# c# - 如何在 Windows 服务应用程序上添加资源文件？

> ID：10256819
> 
> 赞同：0
> 
> 时间：2012-04-21T06:28:14.057
> 
> 标签：c#, visual-studio-2010, windows-services

我创建了一个带有资源 (.resx) 文件的 Windows 服务应用程序。现在我的问题是当我使用安装项目安装我的服务时。它似乎找不到我的 .resx 文件。我需要做什么才能将我的资源文件嵌入到我的程序中？

**更新**

修复。@UnhandledException 是正确的。这是解决问题的一种方法，但由于某种原因，它对我不起作用。我修复它的方法是在 Visual Studio 上显示我的项目中的所有文件。我浏览`bin\debug`. 我找到了实际上具有“.resources”扩展名的资源文件。我将它复制到`c:\Program Files\my app\`并瞧，它有效。这可能不是正确的方法，但这次我需要它。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T06:59:07.147

在资源 (.resx) 文件和资源中的每个文件的属性中将构建操作更改为嵌入式资源。

![属性=> 构建操作 => 嵌入式资源](../Images/4f08015f7c91af90130aa20d19bcc903.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T23:04:42.073

如果您正在运行 Windows 服务应用程序并需要访问资源，请将该资源标记为**Build Action: Embedded Resource**，并使用以下代码获取资源文件的绝对路径：

```
/// <summary>
/// This method seems a bit complicated for fetching a file's path,
/// but it's flexible enough to fetch a path for both console 
/// applications and service applications.
/// </summary>
/// <param name="relativePath">Relative path to a resource.</param>
/// <returns>Absolute path.</returns>
private string GetAppAbsolutePath(string relativePath)
{
    return Path.Combine(Path.GetDirectoryName(Assembly.GetEntryAssembly().Location), relativePath);
} 
```

希望这可以帮助。

# java - 是否可以将数据从 Java 应用程序发布到 .php 页面？

> ID：10256822
> 
> 赞同：-5
> 
> 时间：2012-04-21T06:28:24.787
> 
> 标签：java, php

我试图制作一个快速的 Java 应用程序，将数据发布到网站只是基本的 $_POST 变量。可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T06:34:44.347

例如，它的工作原理是这样的

```
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

try {

    HttpClient client = new DefaultHttpClient();                
    HttpPost post = new HttpPost("http://some.server.com/script.php");
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("var1", "value1"));
    nameValuePairs.add(new BasicNameValuePair("var2", "value2"));
    post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = client.execute(post);
    InputStream result = response.getEntity().getContent(); 

} catch (ClientProtocolException e) {

} catch (IOException e) {

} 
```

# debugging - 如何让 linecache19 0.5.12 安装在 ruby -193-p125 下？

> ID：10256827
> 
> 赞同：0
> 
> 时间：2012-04-21T06:29:25.377
> 
> 标签：debugging, ubuntu, ruby-on-rails-3.1

我有一个运行良好几个月的 Rails 应用程序。前几天，我浏览了 Ubuntu 中的升级清单并安装了它们。突然，由于线路缓存失败，我无法启动我的开发服务器。我已经阅读了有关此主题的各种主题：

[ruby_threadptr_data_type 错误](https://stackoverflow.com/questions/8251349/ruby-threadptr-data-type-error)

[带有 ruby​​-debugger 的 Rails 抛出“找不到符号：_ruby_current_thread (LoadError)”](https://stackoverflow.com/questions/6438116/rails-with-ruby-debugger-throw-symbol-not-found-ruby-current-thread-loaderro/9267541#9267541)

[http://isitruby19.com/linecache](http://isitruby19.com/linecache)

[http://antisnatchor.com/debugging_ruby_1.9.3p125](http://antisnatchor.com/debugging_ruby_1.9.3p125)

[通过 rvm 为 Ruby 1.9.2 安装 linecache19](https://stackoverflow.com/questions/6650567/installing-linecache19-for-ruby-1-9-2-via-rvm)

尽管如此，在花费数小时等待安装失败后，我还是无法启动我的 Rails 开发服务器。

我的版本如下所示：

```
~/app> which ruby
/usr/share/ruby-rvm/rubies/ruby-1.9.3-p125/bin/ruby
~/app> which rvm
/usr/share/ruby-rvm/bin/rvm
~/app> rvm current
ruby-1.9.3-p125
~/app> ruby -v
ruby 1.9.3p125 (2012-02-16 revision 34643) [i686-linux]
~/app> 
```

当我尝试安装当前版本的 ruby​​-debug 时，会发生以下情况：

```
~/app> gem install 'ruby-debug-base19x' 
Fetching: ruby-debug-base19x-0.11.29.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing ruby-debug-base19x:
    ERROR: Failed to build gem native extension.

        /usr/share/ruby-rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
checking for rb_method_entry_t.body in method.h... no
checking for vm_core.h... no
/usr/share/ruby-rvm/gems/ruby-1.9.3-p125/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:39: Use RbConfig instead of obsolete and deprecated Config.
checking for rb_method_entry_t.body in method.h... no
checking for vm_core.h... no
*** extconf.rb failed *** 
```

还有我的gemfile（无论如何都是相关的）：

```
group :development, :test do
  ...
  gem 'linecache19', :git => 'git://github.com/mark-moseley/linecache'
  gem 'ruby-debug-base19x' 
  gem 'ruby-debug19'

end 
```

任何人都知道这里实际发生了什么？我很困惑。如果需要，我愿意从头开始。我只需要知道回到裸画布和画什么的最佳方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:17:46.453

我怀疑我的 RVM 安装以某种方式出错了，即使我使用了 RVM 站点上的说明。我用这两个帖子解决了这个问题：

[使用 RVM 安装了 Ruby 1.9.3，但命令行不显示 ruby​​ -v](https://stackoverflow.com/questions/9056008/installed-ruby-1-9-3-with-rvm-but-command-line-doesnt-show-ruby-v/9056395#9056395)

[http://blog.sudobits.com/2011/10/27/how-to-install-ruby-on-rails-in-ubuntu-11-10/](http://blog.sudobits.com/2011/10/27/how-to-install-ruby-on-rails-in-ubuntu-11-10/)

# android - Android 通用 XML 解析器

> ID：10256839
> 
> 赞同：3
> 
> 时间：2012-04-21T06:31:34.767
> 
> 标签：android, web-services, xml-parsing, android-xml

我想要一个通用的解析器来解析任何类型的 XMl 响应。目前我正在使用 XmlPullParser.. 我从 webservice 传递 xmlresponse 并检查 XmlPullParser.START_TAG 并将数据相应地存储在 Beans 对象中..

为此，我正在为我正在解析的每个 Web 服务创建一个 bean、一个解析器。

我已经通过 iOS App 使用了一个通用解析器，它将所有开始标记作为数组输入到任何 Web 服务并将数据存储在键值对中，并提供一个包含所有数据的对象.. 所以不需要创建 Bean 和 Parser分别地..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T14:58:47.373

XML 的通用类是个好主意。我创建了一个演示来制作一个通用的 XML 解析器类。

创建一个通用类有很多方法，这取决于你的要求。有些人想要像您在问题中引用的那样获得 KeyValuePair，或者有些人想要不同的方式。

我创建了一个 XML 解析器类，它将解析 xml 文件并返回对象。这个对象可以有多个孩子。

您可以从此[博客](http://dharmendra4android.blogspot.in/2012/04/common-xml-parser-for-all-type-of-xml.html)获取代码。

希望这会对大家有所帮助。

# ant - ant replaceregex 替换多行

> ID：10256840
> 
> 赞同：6
> 
> 时间：2012-04-21T06:31:59.260
> 
> 标签：ant

我需要替换文件中的多行字符串，如下所示：

```
startString
bla bla bla
...
endString 
```

通过蚂蚁替换正则表达式。蚂蚁代码：

```
 <copy file="${file}" tofile="${newFile}" overwrite="true">
        <filterchain>
            <replaceregex pattern="startString(.+)endString" replace="zzz" flags="gmi" byline="true"/>
        </filterchain>      
    </copy> 
```

如果替换文本是单行 - 一切正常，但当文本是多行时 - replaceregex 不起作用。我应该在我的代码中修复什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-21T07:31:03.210

您需要进行一些更改。您有几个设置建议将每一行输入视为单独的输入行，即`byline`属性和`m`标志。在下文中，我删除了这些并添加了`s`将输入文件视为单行输入的标志：

```
<replaceregex pattern="startString(.+?)endString" replace="zzz"
    flags="gis" byline="false"/> 
```

还要注意`?`在正则表达式中添加的，这使得通配符不是贪婪的，以防你想匹配多个匹配项。

**看**

ant [ReplaceRegExp](http://ant.apache.org/manual/Tasks/replaceregexp.html)文档了解更多信息。

# wso2 - WSO2 ESB4.0.3 不能使用 XQUery

> ID：10256843
> 
> 赞同：1
> 
> 时间：2012-04-21T06:32:44.047
> 
> 标签：wso2, xquery, wso2esb

在 ESB4.0.0 中，我可以像这样使用 XQuery：

```
xquery key="conf:/closeUserRequest_xq" variable 
xmlns:ns="http://service.jscn.coship.com/"   
xmlns:s="http://www.w3.org/2003/05/soap-envelope" 
name="closeUser1" 
expression="//p:closeUser/userId" type="DOCUMENT"/>xquery 
```

但是当我升级到 ESB4.0.3 时，使用如下错误：

```
[2012-04-21 11:31:53,342] ERROR - XQueryMediator Unable to execute the query
java.lang.NullPointerException at 
org.wso2.carbon.mediation.registry.WSO2Registry.lookup(WSO2Registry.java:177) at 
org.apache.synapse.registry.AbstractRegistry.getResource(AbstractRegistry.java:63) at 
org.apache.synapse.config.SynapseConfiguration.getEntry(SynapseConfiguration.java:693)at 
org.apache.synapse.core.axis2.Axis2MessageContext.getEntry(Axis2MessageContext.java:194)at 
org.apache.synapse.mediators.xquery.XQueryMediator.performQuery(XQueryMediator.java:233) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:45:21.923

您的 Xquery 脚本在注册表中可用吗？检查注册表路径是否正确..

# javascript - 道场商店概念

> ID：10256847
> 
> 赞同：4
> 
> 时间：2012-04-21T06:33:26.717
> 
> 标签：javascript, html, dojo

我正在尝试深入研究 Dojo Toolkit 的数据/存储概念。

据我所知，Dojo Store 将取代 Dojo Data API，所以我将尝试使用新的 API。

有两点让我怀疑我是否理解了这个 API 背后的概念：

*   Dojo 仅提供 Memory Store 和 Json-REST Store。如果是基于IndexedDB API的，为什么不提供IndexedDB Store呢？

*   我还没有找到使用商店存储不同数据类型的示例。在 SQL 数据库中，您可能有不同的表，每个表都有一个 ID 列。我如何将这个概念映射到 Dojo 商店：我是否应该使用不同的商店来表示个人和公司（例如）？还是我应该在同一家店里买两个？因此有什么指导方针吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:04:16.337

1.  为什么 Dojo 不提供 IndexedDB 存储？

    好问题。我不知道。

2.  我还没有找到使用商店存储不同数据类型的示例。我如何将这个概念映射到 Dojo 商店？

    Javascript 是一种动态类型语言，因此事先没有什么可以阻止您在异构集合中存储多种数据类型。Dojo store API 在这里故意模糊以保持灵活性——我将其更多地视为一套广泛的指导方针，而不是一个硬 API。

    如果您使用内存存储，您当然可以向其中添加具有不同模式的对象，但没有什么能阻止任何人制作某种更严格的对象存储，并且每个存储只接受一种对象，类似于 SQL 表。

    也就是说，我更喜欢保持我的商店同质化，以避免混淆（我会为个人和公司设置单独的商店）。请记住，您存储的对象可能包含分层数据（子对象），因此如果您有 1-N 关系，您可以为父对象使用单个存储来存储所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T12:06:07.197

使用商店时，我在所有对象上使用三个字段

*   id - 在商店中的所有商品中唯一的 id。一般是type和oid的组合。
*   _type - 标识实体“类型”的字符串值。IE。人，公司。拥有此值提供了查询商店并获取所有人员或公司的能力。
*   oid - 对象 id 在所有相同类型的对象中唯一标识一个对象。即数据库ID

我发现我需要创建自己的 Store API 实现（扩展 MemoryStore）。你可以在这里读更多关于它的内容：

[http://swingingcode.blogspot.com/2012/03/dojo-implementing-viewmodelstore.html](http://swingingcode.blogspot.com/2012/03/dojo-implementing-viewmodelstore.html)

我还谈到了一个用 Java 编写的引擎，它将 Java 对象序列化为我的商店实现可以使用的格式。您可以在以下位置阅读相关内容

[http://swingingcode.blogspot.com/2012/04/json-serialization-engine-part-i.html](http://swingingcode.blogspot.com/2012/04/json-serialization-engine-part-i.html)

[http://swingingcode.blogspot.com/2012/04/json-serialization-engine-part-ii.html](http://swingingcode.blogspot.com/2012/04/json-serialization-engine-part-ii.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T16:41:51.337

关于持久存储后端：

dojo/store API 只是一个 API，主要用于提供其他 Dojo / Dijit 组件应该遵循的“规范”，并且您可以使用它来构建自己的商店。据我所知，没有计划在 dojo 核心中提供类似 IndexedDB 存储的东西。然而，Storehouse 正是这样做的：提供 IndexedDB 存储并实现 dojo/store API：

[https://github.com/jensarps/storehouse](https://github.com/jensarps/storehouse)

它与 Dojo 工具包在相同的许可下可用，并且它的版权归 Dojo 基金会所有，因此可以安全地使用许可（我是 Dojo 贡献者并且有一个 CLA 存档）。

关于一店二店：

将每个 dojo/store 实例视为一个表而不是数据库；在这种情况下，我会为每种类型推荐一个存储，即“personStore”和“companyStore”，并处理代码内部的关系（IndexedDB 本身不是关系数据库）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:20:58.353

在[http://dojotoolkit.org/reference-guide/1.8/dojo/store.html](http://dojotoolkit.org/reference-guide/1.8/dojo/store.html)中，只要说

> dojo/store**旨在通过**基于 HTML5/W3C 的 IndexedDB 对象存储 API 的简单、易于实现和扩展的 API 取代、集成和改进 dojo/data API 和 dojox/storage API。

# sql - 我可以在 JOIN 条件中使用 CASE 语句吗？

> ID：10256848
> 
> 赞同：174
> 
> 时间：2012-04-21T06:33:33.787
> 
> 标签：sql, sql-server, join, case

下图是 Microsoft SQL Server 2008 R2 系统视图的一部分。`sys.partitions`从图中我们可以看出和之间的关系`sys.allocation_units`取决于 的值`sys.allocation_units.type`。因此，要将它们连接在一起，我会写一些类似的东西：

```
SELECT  *
FROM    sys.indexes i
        JOIN sys.partitions p
            ON i.index_id = p.index_id 
        JOIN sys.allocation_units a
            ON CASE
               WHEN a.type IN (1, 3)
                   THEN a.container_id = p.hobt_id 
               WHEN a.type IN (2)
                   THEN a.container_id = p.partition_id
               END 
```

但是上面的代码给出了语法错误。我想那是因为`CASE`声明。谁能帮忙解释一下？

* * *

添加错误信息：

> 消息 102，级别 15，状态 1，第 6 行 '=' 附近的语法不正确。

![这是图像](../Images/1a02a452a6af54eada2673807c7884e7.png)

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2012-04-21T15:26:25.330

A `CASE` expression returns a value from the `THEN` portion of the clause. You could use it thusly:

```
SELECT  * 
FROM    sys.indexes i 
    JOIN sys.partitions p 
        ON i.index_id = p.index_id  
    JOIN sys.allocation_units a 
        ON CASE 
           WHEN a.type IN (1, 3) AND a.container_id = p.hobt_id THEN 1
           WHEN a.type IN (2) AND a.container_id = p.partition_id THEN 1
           ELSE 0
           END = 1 
```

Note that you need to do something with the returned value, e.g. compare it to 1\. Your statement attempted to return the value of an assignment or test for equality, neither of which make sense in the context of a `CASE`/`THEN` clause. (If `BOOLEAN` was a datatype then the test for equality would make sense.)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-04-21T06:41:47.697

> 相反，您只需加入两个表，并在您的 SELECT 子句中，从匹配的表中返回数据：

我建议你通过这个链接[Conditional Joins in SQL Server](http://weblogs.sqlteam.com/jeffs/archive/2007/04/03/Conditional-Joins.aspx) and [T-SQL Case Statement in a JOIN ON Clause](https://stackoverflow.com/questions/8361183/t-sql-case-statement-in-a-join-on-clause)

例如

```
 SELECT  *
FROM    sys.indexes i
        JOIN sys.partitions p
            ON i.index_id = p.index_id 
        JOIN sys.allocation_units a
            ON a.container_id =
            CASE
               WHEN a.type IN (1, 3)
                   THEN  p.hobt_id 
               WHEN a.type IN (2)
                   THEN p.partition_id
               END 
```

编辑：根据评论。

> 你不能像你一样指定连接条件。检查上面没有错误的查询。我已取出公共列，并将根据条件评估右列值。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-04-21T06:40:36.530

尝试这个：

```
...JOIN sys.allocation_units a ON 
  (a.type=2 AND a.container_id = p.partition_id)
  OR (a.type IN (1, 3) AND a.container_id = p.hobt_id) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-09-18T13:36:53.130

我认为您需要两个案例陈述：

```
SELECT  *
FROM    sys.indexes i
    JOIN sys.partitions p
        ON i.index_id = p.index_id 
    JOIN sys.allocation_units a
        ON 
        -- left side of join on statement
            CASE
               WHEN a.type IN (1, 3)
                   THEN a.container_id
               WHEN a.type IN (2)
                   THEN a.container_id
            END 
        = 
        -- right side of join on statement
            CASE
               WHEN a.type IN (1, 3)
                   THEN p.hobt_id
               WHEN a.type IN (2)
                   THEN p.partition_id
            END 
```

这是因为：

*   CASE 语句在 END 处返回单个值

*   ON 语句比较两个值

*   您的 CASE 语句正在 CASE 语句*内部*进行比较。我猜如果你把你的 CASE 语句放在你的 SELECT 中，你会得到一个布尔值“1”或“0”，表明 CASE 语句是评估为 True 还是 False

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-05-26T17:26:18.263

是的你可以。这是一个例子。

```
SELECT a.*
FROM TableA a
LEFT OUTER JOIN TableB j1 ON  (CASE WHEN LEN(COALESCE(a.NoBatiment, '')) = 3 
                                THEN RTRIM(a.NoBatiment) + '0' 
                                ELSE a.NoBatiment END ) = j1.ColumnName 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-07-18T16:06:29.807

我拿了你的例子并编辑了它：

```
SELECT  *
FROM    sys.indexes i
    JOIN sys.partitions p
        ON i.index_id = p.index_id 
    JOIN sys.allocation_units a
        ON a.container_id = (CASE
           WHEN a.type IN (1, 3)
               THEN p.hobt_id 
           WHEN a.type IN (2)
               THEN p.partition_id
           ELSE NULL
           END) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-27T06:22:27.240

这看起来不错

[https://bytes.com/topic/sql-server/answers/881862-joining-different-tables-based-condition](https://bytes.com/topic/sql-server/answers/881862-joining-different-tables-based-condition)

```
FROM YourMainTable
LEFT JOIN AirportCity DepCity ON @TravelType = 'A' and DepFrom =  DepCity.Code
LEFT JOIN AirportCity DepCity ON @TravelType = 'B' and SomeOtherColumn = SomeOtherColumnFromSomeOtherTable 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-04T09:41:17.553

在这里，我比较了两个不同结果集的差异：

```
SELECT main.ColumnName, compare.Value PreviousValue,  main.Value CurrentValue
FROM 
(
    SELECT 'Name' AS ColumnName, 'John' as Value UNION ALL
    SELECT 'UserName' AS ColumnName, 'jh001' as Value UNION ALL
    SELECT 'Department' AS ColumnName, 'HR' as Value UNION ALL
    SELECT 'Phone' AS ColumnName, NULL as Value UNION ALL
    SELECT 'DOB' AS ColumnName, '1993-01-01' as Value UNION ALL
    SELECT 'CreateDate' AS ColumnName, '2017-01-01' as Value UNION ALL
    SELECT 'IsActive' AS ColumnName, '1' as Value
) main
INNER JOIN
(
    SELECT 'Name' AS ColumnName, 'Rahul' as Value UNION ALL
    SELECT 'UserName' AS ColumnName, 'rh001' as Value UNION ALL
    SELECT 'Department' AS ColumnName, 'HR' as Value UNION ALL
    SELECT 'Phone' AS ColumnName, '01722112233' as Value UNION ALL
    SELECT 'DOB' AS ColumnName, '1993-01-01' as Value UNION ALL
    SELECT 'CreateDate' AS ColumnName, '2017-01-01' as Value UNION ALL
    SELECT 'IsActive' AS ColumnName, '1' as Value
) compare
ON main.ColumnName = compare.ColumnName AND
CASE 
    WHEN main.Value IS NULL AND compare.Value IS NULL THEN 0
    WHEN main.Value IS NULL AND compare.Value IS NOT NULL THEN 1
    WHEN main.Value IS NOT NULL AND compare.Value IS NULL THEN 1
    WHEN main.Value <> compare.Value THEN 1
END = 1 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-24T15:48:55.177

以大金刚为例。

问题是我需要使用声明的变量。这允许说明您需要比较的左侧和右侧。这是为了支持 SSRS 报告，其中必须根据用户的选择链接不同的字段。

初始案例根据选择设置字段选择，然后我可以设置我需要匹配的字段以进行连接。

如果需要从不同字段中选择变量，则可以在右侧添加第二个 case 语句

```
LEFT OUTER JOIN Dashboard_Group_Level_Matching ON
       case
         when @Level  = 'lvl1' then  cw.Lvl1
         when @Level  = 'lvl2' then  cw.Lvl2
         when @Level  = 'lvl3' then  cw.Lvl3
       end
    = Dashboard_Group_Level_Matching.Dashboard_Level_Name 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-05T14:40:53.100

根据条件，至少有两种加入方式。一个比另一个快：

```
declare @loopZaKosovnice int = 1
select * 
from tHE_MoveItem mi 
left join tHE_SetProdSt st on st.acIdent = mi.acIdent

-- slow
--join the_setitem si on si.acident = case when @loopZaKosovnice = 0 then mi.acident else st.acIdentChild end 

-- two times as fast
left join the_setitem si1 on @loopZaKosovnice = 0 and si1.acident = mi.acident
left join the_setitem si2 on @loopZaKosovnice = 1 and si2.acident = st.acIdentChild
join the_setitem si on si.acident = isnull (si1.acident, si2.acIdent) 
```

# facebook - Facebook 事件在外部同步？

> ID：10256855
> 
> 赞同：1
> 
> 时间：2012-04-21T06:34:46.110
> 
> 标签：facebook

我遇到的一个问题是，多年来，人们已经通过我们自己的网站使用我们简单的注册系统注册/注册了我们的活动（局域网派对），这很好，但是时代在慢慢变化，我们还必须创建一个帮助数字的 Facebook 活动。然而，我们最终得到了两个不同的人员名单。在活动当天，我们打印了已注册的人，因为我们确实达到了限制，并且只能让已注册/预订座位的人进入。

我正在尝试想办法在 Facebook 上创建一个应用程序，该应用程序允许人们通过我们的页面注册一个事件，该页面会触发对我们标志的外部（jsonp/xml？）请求并在那里注册也是。

只需要基本信息、玩家标签和注册日期..

我有能力做到这一点，但不确定 Facebook 是否允许你这样做，任何帮助将不胜感激。

tl;tr 基本上是两个注册位置，但一个数据库。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:32:26.437

Facebook 允许这样做：[https ://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

# cryptography - 使用同一文件的已解密版本从加密文件中获取 AES 密钥

> ID：10256857
> 
> 赞同：4
> 
> 时间：2012-04-21T06:35:03.837
> 
> 标签：cryptography, aes, cryptanalysis

这甚至可能吗？加密文件在 CBC 模式下使用 AES-128。我已经有了它的解密版本，但是我不知道用来加密它的密钥，我需要它（我宁愿不说原因）。

我知道这两个文件是相同的，因为填充被禁用（它们具有相同的大小）。我也知道加密过程中使用的初始化向量，如果有帮助的话。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T07:52:31.570

您所描述的是[“已知的明文攻击”](http://en.wikipedia.org/wiki/Known-plaintext_attack)。易受已知明文攻击的加密算法被认为是损坏的；如果 AES 容易受到 KPA 的攻击，您将不会发现 AES 用于任何导入。因此，不，您无法仅在给出明文和密文的情况下恢复密钥 - 至少，没有任何已知的针对 AES 的攻击。

但是，如果您可以减少密钥空间（例如，如果您知道密钥是八位字母数字密码的 md5），您可能能够暴力破解正确的密钥。然而，首先减少密钥空间对于在太阳熄灭之前完成此攻击至关重要。

# actionscript-3 - as3 FLV 组件位置/对齐问题 - FLVPlayback();

> ID：10256863
> 
> 赞同：1
> 
> 时间：2012-04-21T06:36:22.523
> 
> 标签：actionscript-3, flash, alignment, flvplayback

**尝试：**

我正在尝试在另一个动态 mc 中使用 FLVPlayback() 组件加载 FLV，并将其放置在电视屏幕上。

**问题：**

---它不会在左上角加载。---它可以缩放以适应电视屏幕的宽度，但在下方和上方有这个时髦的空间。

**问题：**

如何将视频放在左上角？我怎样才能使它适合电视屏幕的高度？

**代码：**

```
import flash.display.*;
import fl.video.*;

var my_mc:MovieClip = new MovieClip(); 
addChild(my_mc); 

var myVideo:FLVPlayback = new FLVPlayback();
myVideo.source = "http://EdVizenor.com/edgen/EpicLogo.flv";
myVideo.align = StageAlign.TOP_LEFT; /// This does not work :(
my_mc.addChild(myVideo);

One.BlackScreen.addChild(my_mc);
my_mc.width = One.BlackScreen.width;
my_mc.height = One.BlackScreen.height;

... 
```

**FLA 源下载**

源 FLA 文件在这里：[http](http://www.edvizenor.com/Help.fla) ://www.edvizenor.com/Help.fla 它有图像和电视屏幕等...

**更新问题：2012 年 4 月 21 日**

下面的答案是正确的，但是当我使用此视频源并且不更改任何其他内容时，我遇到了同样的问题。我怎样才能解决这个问题？

```
myVideo.source = "http://EdVizenor.com/Boom.flv"; /// DOES NOT WORK 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T07:04:19.317

这是因为您的 .flv 文件与影片剪辑的比例不同。

```
import flash.display.*;
import fl.video.*;

var my_mc:MovieClip = new MovieClip(); 
addChild(my_mc); 

var myVideo:FLVPlayback = new FLVPlayback();
myVideo.source = "http://EdVizenor.com/edgen/EpicLogo.flv";
myVideo.align = StageAlign.TOP_LEFT;
myVideo.scaleMode = VideoScaleMode.EXACT_FIT;
myVideo.width = One.BlackScreen.width;
myVideo.height = One.BlackScreen.height;

my_mc.addChild(myVideo);
myVideo.play();

One.BlackScreen.addChild(my_mc);
my_mc.width = One.BlackScreen.width;
my_mc.height = One.BlackScreen.height; 
```

# c# - 通过使用 jquery 调用方法后面的代码来填充更改其他下拉列表的下拉列表

> ID：10256867
> 
> 赞同：2
> 
> 时间：2012-04-21T06:37:22.177
> 
> 标签：c#, jquery, asp.net, ajax

我正在使用`Asp.Net/C#`，我需要在更改另一个下拉列表时填写一个下拉列表，我可以通过将第一个下拉列表的属性`SelectedIndexChanged`设置为使用事件来完成它，但是我有一个密码文本框，它在回发时被清除，因此该解决方案不可行.我决定用我的电话，但我是第一次使用这种方法，所以我不知道我该怎么做。这是我到目前为止尝试过的，但它对我不起作用。`AutoPostBack``True``jquery ajax``code behind method`

```
$('#ddlDivisionName').change(function() {
        alert('j');
        $.ajax({
            type: "POST",
            url: "/CreateAccount/CreateAccount.aspx/BranchNameFill",
            data: "{'index':1}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: true,
            cache: false,
            success: function() {
                alert('ok');
            }
        })
        return false;
    });

[WebMethod]
        public static string BranchNameFill(int index)
        {

            ddlBranchName.Items.Clear();   
            IEnumerable<BRANCH> br;
            br = (from b in dt.BRANCHes
                  where b.DIVNO ==index
                  select b);
            for (int i = 0; i < br.Count(); i++)
            {
                ddlBranchName.Items.Add(br.ElementAt(i).NAME.Trim());
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:05:31.640

这是一个简单的例子，我希望它能以某种方式帮助你

```
 [WebMethod]
        public List<BRANCH> BranchNameFill(int index)

        {

             br = (from b in dt.BRANCHes
                      where b.DIVNO ==index
                      select b);

            return br.ToList();

        }

    ajax client 
    function getCars() {
        $.ajax({   
          type: "POST",
          url: "/CreateAccount/CreateAccount.aspx/BranchNameFill",       
          data: "{'index':1}",       
          contentType: "application/json; charset=utf-8",        
          dataType: "json",        
          success: function(response) {        
            var branches = response.d;
            $('dropdownlist').empty();  
            $.each(branch, function(index, branches) {     
              $('dropdownlist').append('<option value="' + branch.ID + '" >' + branch.NAME + '</option>');

            });

          },

          failure: function(msg) {

          }

        });

      }

    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:09:08.867

```
$.ajax({
                type: "POST",
                url: "EBService.aspx/getDepts",
                data: "{cid:" + reg + "}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#<%=ddlCDept.ClientID%>").get(0).options.length = 0;
                        $("#<%=ddlCDept.ClientID%>").get(0).options[0] = new Option("Select name", "0");
                        $("#lblDeptResult").addClass("loading");
                        var i = 0;
                        $.each(msg.d, function (index, item) {
                            $("#<%=ddlCDept.ClientID%>").get(0).options[$("#<%=ddlCDept.ClientID%>").get(0).options.length] = new Option(item.c_dept_name, item.c_dept_id);
                            i = i + 1;
                        });

 [WebMethod]
    public static List<CDept_MstrBO> getDepts(int cid)
    {
        if (CDeptList == null)
        {
            CDept_MstrBO objDeptBo = new CDept_MstrBO();
            objDeptBo.companyID = 1;
            CDeptList = objDeptBo.getCDeptList(objDeptBo);
        }
        List<CDept_MstrBO> deptList = CDeptList.Where(d => d.c_id == cid).ToList();
        return deptList;

    } 
```

# android - 如何将我的应用程序的数据库发送到android中的服务器

> ID：10256870
> 
> 赞同：0
> 
> 时间：2012-04-21T06:38:54.343
> 
> 标签：android, sql, sqlite

我在 android 上使用我的应用程序作为带有 ASP.NET 服务器的客户端。我已经为服务器准备了一个 SQLite 库，我可以在那里处理 SQLite 文件。到目前为止，我获得的数据库文件来自使用模拟器的文件（手动）

我只想从应用程序访问我的数据库文件，并将其发送到服务器。该数据库是针对同一个应用程序的，所以我认为它是可行的，我只是不知道如何尝试它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T06:44:23.187

使用 post 请求将数据发送到服务器。看到[这个答案](https://stackoverflow.com/questions/10256822/is-it-possible-to-post-data-from-a-java-application-to-a-php-page/10256854#10256854)。您可以将客户端数据库中的所有数据（例如）读取到 XML 字符串中，以单个 post 变量将其发送到服务器，然后在服务器上读取它以将其存储在服务器的数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:52:45.757

这也适用于安卓： http: [//www.developer.nokia.com/Community/Wiki/HTTP_Post_multipart_file_upload_in_Java_ME](http://www.developer.nokia.com/Community/Wiki/HTTP_Post_multipart_file_upload_in_Java_ME)

# java - 在没有@Autowired 的情况下获取应用程序组件

> ID：10256871
> 
> 赞同：1
> 
> 时间：2012-04-21T06:39:05.933
> 
> 标签：java, spring, autowired

您将如何从 .xml 配置中提取 2.5 之前的版本？这让我很困扰，因为如果`@Autowired`从我的武器库中删除，我真的不知道该怎么做。

假设我想使用一些 DAO 实现。

在服务类中，我通常会写：

```
 @Autowired 
 someDaoInterface generalDao; 
```

然后我通常会打电话

```
 generalDao.someInterfaceMethod(someParam param); 
```

我如何从 Spring 2.0 中的配置中提取实现以使用此方法？

它是否像just一样愚蠢：`new ApplicationContext(pathToXml)`然后使用`.getBean`还是有其他方法？

为什么我要求从配置文件中取出 bean？因为在 Spring MVC 中，如何在不从应用程序上下文中获取 bean 的情况下执行逻辑。

如果您有`@Controller`处理程序，那么您需要调用服务类的方法吗？所以应该以某种方式从上下文中检索它们，到目前为止唯一的方法是使用`@Autowired`? 然后我还想用 DAO 类填充前面示例中所述的服务类，并且还需要从应用程序上下文中检索它们，因此我可以自己为服务类编写逻辑。过去人们会怎么做？

我认为这`@Autowired`是取出某些东西的唯一方法，而不是因为自动连接很方便——我对 XML 完全没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:17:11.513

您仍然可以选择通过属性或构造函数参数显式连接它。（无论如何，如果您的容器中存在歧义，自动装配将无法正常工作）

当然，您可以在 Java 代码中使用应用程序上下文和 getBean()，但它违反了 DI 模式并使所有 spring 的东西都无用。DI 的目的是将您的业务登录与实现细节分离 - 它不是业务逻辑，而是它的依赖关系来自何处以及来自何处。依赖关系就在那里。

通过使用 ApplicationContext.getBean() 您打破了这种模式，并引入了对：

*   弹簧本身
*   你的配置名称

完成此操作后，您也可以放弃使用 DI 和 spring，因为您只是取消了 DI 提供给您的所有优势。（顺便说一句，@Autowired 还引入了对 spring 的依赖，违反了 DI 模式，这也意味着只有一个实例可用）

另外，答案是：在理想情况下，您的代码中根本不应该引用 spring。没有导入，没有注释 - 只是协作实体的接口。

# c++ - 如何避免在 catch 块中编写重复代码？

> ID：10256875
> 
> 赞同：6
> 
> 时间：2012-04-21T06:40:00.180
> 
> 标签：c++, optimization, exception-handling, try-catch, throw

我将 QT 4.8 (C++) 用于桌面应用程序项目，并编写如下异常处理：

```
void callerMethod()
{
  try
  {
   method1();
  }
  catch(Exception1& e)
  {
    // display critcal error message
    // abort application
  }
  catch(std::Exception& e)
  {
   // print exception error message
  }
  catch(...)
  {
   // print unknown exception message
  } 
}

void method1()
{
  try
  {
   // some initializations
   // some operations (here exceptions can occur)
   // clean-up code (for successful operation i.e no exception occurred)
  }
  catch(Exception1& e)
  {
   // clean-up code
   throw e;
  }
  catch(Exception2& e)
  {
   // clean-up code
   throw e;
  }
  catch(Exception3& e)
  {
   // clean-up code
   throw e;
  }
  catch(...)
  {
   // clean-up code
   throw;
  }
} 
```

所以我的问题是我需要**在每个 catch 块中编写清理代码**吗？有什么办法**可以避免编写重复的代码**？

**注意**:: [ **In method1()** ] 我想重新抛出发生在我的调用者身上的异常。所以我不能在单个 catch 块中捕获它们，因为这样会丢失类型信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T06:44:43.797

Method1可以通过两个概念大大简化：

1.  [雷伊](http://www.hackcraft.net/raii/)。将*任何*清理代码放入析构函数中，清理代码将被集中。
2.  使用 unqualified `throw`，您将不需要知道抛出的异常类型。

所以，`method1()`应该是这样的：

```
void method1()
{
     // some initializations of RAII objects
     // some operations (here exceptions can occur)
} 
```

如果从 Exception1 派生，则可以删除第一个`catch`子句，因为该方法是虚拟的。`callerMethod``std::exception``what()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T07:25:55.540

您应该尽可能低地抛出异常，并在调用链中尽可能高地捕获它们。这会自动减少代码重复，并集中错误处理。你在一个地方投掷/接球，这似乎有点……强迫。

我经常做这种事情（特别是对于程序结束异常：

```
int main()
try
{
    function_calls_that_may_throw();
    // ...
}
catch(my_exception& e)
{
    e.do_exception_stuff();
}
catch(std::exception& e)
{
    std::cout << e.what();
}
catch(...)
{
    std::cout << "Something bad happened.\n";
} 
```

这仅适用于抛出您不打算更好地处理或重试失败的操作等的异常。

这种方法的优点是所有/大多数错误处理代码都在程序的顶层，调用链中的所有函数都不必担心这些东西，它们所做的只是抛出一个异常当他们喜欢的时候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T06:44:51.073

如果所有清理代码完全相同，则可以在 catch (...) 块中执行所有操作：

```
try {
   // code
} catch (...) {
   // cleanup
   throw;
} 
```

如果您的代码略有不同，您可以随时调用清理函数：

```
try {
   // code
} catch (exc1 ex) {
   cleanup(args);
   // exc1 specific
   throw;
} catch (exc2 ex) {
   cleanup(args);
   // exc2 specific
   throw;
} catch (...) {
   cleanup(args);
   throw;
} 
```

# php - 将拼写检查器集成到 Tinymce 中不起作用

> ID：10256878
> 
> 赞同：2
> 
> 时间：2012-04-21T06:40:06.577
> 
> 标签：php, javascript, tinymce, spell-checking

在我的应用程序中，我将 tinymce 编辑器用于 textareas。

我想为此集成一个拼写检查器，所以我下载了拼写检查器插件并将其放入插件文件夹中。

接下来我更改了代码：

```
<script type="text/javascript">
    tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "advlink,paste,spellchecker",

        // Theme options
        theme_advanced_buttons1 : "bold,italic,underline,separator,forecolor,strikethrough,justifyleft,justifycenter,justifyright, justifyfull,bullist,numlist,undo,redo,link,unlink",
        theme_advanced_buttons2 : "spellchecker,cut,copy,paste,pastetext,fontselect,fontsizeselect,code",
        theme_advanced_buttons3 : "",

        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,
        spellchecker_languages : "+English=en,Swedish=sv",

        // Example content CSS (should be your site CSS)
        content_css : "css/content.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url : "lists/template_list.js",
        external_link_list_url : "lists/link_list.js",
        external_image_list_url : "lists/image_list.js",
        media_external_list_url : "lists/media_list.js",

        // Replace values for the template plugin
        template_replace_values : {
            username : "Some User",
            staffid : "991234"
        }
    });
</script> 
```

现在编辑器没有显示，只显示文本区域。当我从插件中删除名称拼写检查器时，会加载编辑器。这是什么原因？

这里有版本问题吗？

这是 tiny_mce_src.js 文件中的版本详细信息：

```
 majorVersion : '3',
minorVersion : '1.0.1',
releaseDate : '2008-06-18', 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T21:53:45.950

可能重复：[TinyMCE 4.0.5 拼写检查不起作用](https://stackoverflow.com/questions/18626276/tinymce-4-0-5-spell-check-not-working/21173658#21173658)

根据我在其他地方找到的内容，拼写检查插件由 Google 服务提供支持——该服务已停用。所以目前似乎没有集成的 TinyMCE 拼写检查解决方案。

但是，您可以通过执行以下操作来启用浏览器的内置拼写检查器：

```
tinymce.init({
    browser_spellcheck : true,
}); 
```

请务必从您的工具栏和插件列表中删除拼写检查器。

# javascript - 在使用 JS 加载图像期间检测 HTTP 302

> ID：10256885
> 
> 赞同：3
> 
> 时间：2012-04-21T06:41:45.957
> 
> 标签：javascript, dom, webkit, dom-events, mobile-safari

`HTTP 302`在从 JavaScript 加载图像期间是否可以检测到（已移动）响应？

我们使用了一个简单的 DART 广告横幅图像，该图像执行请求重定向以显示实际的广告素材。图像的`src`指向 DART 服务器，但如果您检查请求-响应通信，您可以看到重定向发生：

```
curl -LI "http://ad.doubleclick.net/ad/mycompany.com/main;sz=320x50;ord=9524078512356?"
HTTP/1.1 302 Moved Temporarily
Content-Length: 0
Location: http://s0.2mdn.net/viewad/12345678/actual_creative.jpg
Content-Type: text/html

HTTP/1.1 200 OK
Content-Type: image/jpeg
Content-Length: 6811 
```

最后，我希望能够检测到字符串`actual_creative.jpg`。这只需要在 Mobile Safari 中工作，所以我希望有一个事件侦听器可以用来监控非常低级别的负载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:39:24.447

无法使用 JavaScript 获取重定向位置 url。

# php - SSH 连接在重负载下失败

> ID：10256887
> 
> 赞同：2
> 
> 时间：2012-04-21T06:42:01.620
> 
> 标签：php, ssh

```
$con = ssh2_connect($host, 22);
ssh2_auth_password($con, $rem_acc, $pass);
ssh2_scp_send($con,$rand.".gz","./".$rand.".gz");
$stream = ssh2_exec($con, "./exeonserv.sh ".$rand); 
```

只要我将 PHP 脚本的负载保持在每秒 2 个请求以下（脚本中有 2 个 SSH 连接，因此每秒有 4 个连接），就可以正常工作

但是当它每秒超过 2 个请求时，连接开始失败，日志中出现以下错误：

> [2012 年 4 月 21 日星期六 11:51:40] [错误] [客户端 172.16.57.97] PHP 警告：ssh2_connect()：启动 SSH 连接时出错（-1）：在 /var/www/fsproj/result 中获取横幅失败。 php 在第 105 行
> [Sat Apr 21 11:51:40 2012] [error] [client 172.16.57.97] PHP Warning: ssh2_connect(): Unable to connect to localhost in /var/www/fsproj/result.php on line 105

我使用以下代码尝试解决问题，但如果持续负载大于 2req/sec。它只是最终增加了响应时间

```
$con=false;    
while(!$con)
{
    $con = ssh2_connect($host, 22);
} 
```

可以打开 SSH 连接的最大速率是否有上限？如果是这样，我在哪里可以更改该值？（或任何其他解决方案？）

我在 Ubuntu 上使用 Apache

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T07:44:26.213

看一下`man sshd_config`，以下部分似乎控制了一次可以打开的最大 SSH 连接数以及最大并发连接尝试数。您需要`/etc/ssh/sshd_config`使用所需的设置进行修改。

```
 MaxSessions
             Specifies the maximum number of open sessions permitted per net-
             work connection.  The default is 10.

     MaxStartups
             Specifies the maximum number of concurrent unauthenticated con-
             nections to the SSH daemon.  Additional connections will be
             dropped until authentication succeeds or the LoginGraceTime
             expires for a connection.  The default is 10.

             Alternatively, random early drop can be enabled by specifying the
             three colon separated values ``start:rate:full'' (e.g.
             "10:30:60").  sshd(8) will refuse connection attempts with a
             probability of ``rate/100'' (30%) if there are currently
             ``start'' (10) unauthenticated connections.  The probability
             increases linearly and all connection attempts are refused if the
             number of unauthenticated connections reaches ``full'' (60). 
```

此外，对于您尝试连接到服务器的示例，您可能希望[`sleep`](http://us2.php.net/manual/en/function.sleep.php)在连接尝试失败后添加一个。如果没有此退避并且服务器被淹没，您的脚本可能会通过尝试通过连接尝试更多地淹没服务器而使事情变得更糟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:11:29.143

老实说，我会使用[phpseclib，一个纯 PHP SSH 实现](http://phpseclib.sourceforge.net/)：

```
<?php
include('Net/SSH2.php');

$ssh = new Net_SSH2('www.domain.tld');
if (!$ssh->login('username', 'password')) {
    exit('Login Failed');
}

echo $ssh->exec('pwd');
echo $ssh->exec('ls -la');
?> 
```

phpseclib 比 libssh2 更便携，您可以使用 phpseclib 获取日志，这可能有助于诊断您的问题。

# wpf - 具有多个项目的数据网格行

> ID：10256888
> 
> 赞同：1
> 
> 时间：2012-04-21T06:42:26.233
> 
> 标签：wpf, datagrid, itemscontrol

我有一个项目列表，每个项目都包含一个子项目列表。我试图在 Xceed 数据网格中显示这些，每个项目一行，但如果有多个子项目，我想将它们添加到同一行的垂直堆栈面板中的相应列中。数据网格应该是这样的（忽略破折号，我用它们来对齐文本）：

----------ID-----DateIn---------DateOut
第 1 行 --ID1----10/02/2012 --11/02/2012

第 2 行 --ID2----10/03/2012 --11/03/2012

------------------11/03/2012 --12/03/2012

------------------12/03/2012--13/03/2012

第 3 行 --ID3 ----11/03/2012 --12/03/2012

当前代码如下，它仅显示第一个子项 DateIn 而不是垂直堆栈面板中的多个日期。

```
public class Item 
{         

    public string ID { get;set; }
    public IList<SubItem> SubItems { get; private set; }       
}
 public class SubItem
{
 public DateTime DateIn {get;set;}
 public DateTime DateOut {get;set;}   
}

<Window 
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"   
xmlns:xcdg="http://schemas.xceed.com/wpf/xaml/datagrid"
xmlns:xcdv="clr-namespace:Xceed.Wpf.DataGrid.Views;assembly=Xceed.Wpf.DataGrid"    
DataContext="{Binding ElementName=_this}"
>
<Window.Resources>         
    <xcdg:DataGridCollectionViewSource x:Key ="cvsList" Source="{Binding Items, ElementName=_this}" AutoCreateItemProperties="False">
        <xcdg:DataGridCollectionViewSource.ItemProperties>
        <xcdg:DataGridItemProperty Name="ID" Title="ID" DataType="{x:Type System:String}"/>
      <xcdg:DataGridItemProperty Name="DateIn" Title="Date In" ValuePath="SubItems" DataType="{x:Type System:String}" />
      <xcdg:DataGridItemProperty Name="DateOut" Title="Date Out" ValuePath="SubItems" DataType="{x:Type System:String}" />
    </xcdg:DataGridCollectionViewSource>
</Window.Resources>

    <xcdg:DataGridControl 
        Grid.Row="1" SelectionMode="Single"
        ItemsSource="{Binding Source={StaticResource cvsList}, NotifyOnTargetUpdated=True}" >                       

        <xcdg:DataGridControl.Columns>
           <xcdg:Column FieldName="ID" Title="ID" />
            <xcdg:Column FieldName="DateIn" Title="Date In" Width="150">
                <xcdg:Column.CellContentTemplate>
                    <DataTemplate>
                        <ItemsControl ItemsSource="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=xcdg:DataRow},
                                                    Path=DataContext.SubItems}" >
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Label Content="{Binding DateIn, StringFormat=dd/MM/yyyy}"/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Vertical"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </DataTemplate>
                </xcdg:Column.CellContentTemplate>
            </xcdg:Column>
            <xcdg:Column FieldName="DateOut" Title="Date Out" Width="150">
                <xcdg:Column.CellContentTemplate>
                    <DataTemplate>
                        <ItemsControl ItemsSource="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=xcdg:DataRow},
                                                    Path=DataContext.SubItems}" >
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Label Content="{Binding DateOut, StringFormat=dd/MM/yyyy}"/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Vertical"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </DataTemplate>
                </xcdg:Column.CellContentTemplate>
            </xcdg:Column>
        </xcdg:DataGridControl.Columns>                      
    </xcdg:DataGridControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:19:44.127

我对 Xceed 不熟悉，但对于普通的 WPF 数据网格，您可以使用转换器类来接受 Item 并将它们转换为多行文本（或者如果您真的想要的话，可以使用 StackPanel）。因此，您将有一个转换器用于 DateIn 列，一个转换器用于 DateOut：

```
<DataGrid AutoGenerateColumns="False" x:Name="dataGrid1" IsReadOnly="True" >
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Id}"/>
            <DataGridTextColumn Binding="{Binding ., Converter={StaticResource DateInConverter}, Mode=OneWay}"/>
            <DataGridTextColumn Binding="{Binding ., Converter={StaticResource DateOutConverter}, Mode=OneWay}"/>
        </DataGrid.Columns>
    </DataGrid> 
```

转换器类定义可以是：

```
public class DateInConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var item = value as TestItem;
        if (item == null) return;

        var sb = new StringBuilder();
        item.SubItems.ForEach(x => sb.AppendLine(x.DateIn.ToShortDateString()));

        return sb.ToString();
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

如果您需要了解转换器，请参阅[此处](http://msdn.microsoft.com/en-us/library/ms752347.aspx#data_conversion)。

# php - 为什么这个通过 PHP 的 preg_replace 函数的正则表达式不起作用

> ID：10256890
> 
> 赞同：-1
> 
> 时间：2012-04-21T06:42:37.573
> 
> 标签：php, regex, preg-replace

我想使用以下表达式删除所有类似这样的字符串：**“REP_HSC_QUALIFIED”**，但不知何故它不起作用。有人可以帮助指出我的错误（我很少使用正则表达式，所以我对它没有很好的理解）。

```
preg_replace('#REP[a-zA-Z0-9_]+#', '-', $data); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T07:14:22.750

你可能想做

```
$data = preg_replace('#REP[a-zA-Z0-9_]+#', '-', $data); 
```

# java - 如何启动一个不阻塞Java主线程的后台线程？

> ID：10256891
> 
> 赞同：5
> 
> 时间：2012-04-21T06:42:43.553
> 
> 标签：java, multithreading, concurrency, blocking, runnable

我有以下 Java 代码：

```
public static void main(String[] args)
{
    new Thread(new MyRunnable()).run();
    showGUI();
} 
```

我的问题是启动`MyRunnable`阻塞了主线程，导致`showGUI`在它完成运行之前不会被调用。我希望*程序*做的是生成`MyRunnable`并允许它在后台独立运行，使主线程忘记它并继续做它想做的事情（比如 call `showGUI`）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-21T06:45:39.080

`run`在主线程上执行。`start`将创建一个新的线程执行并在该线程上执行它的 run 方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-21T06:44:19.160

`start()`您应该在线程上调用方法，而不是`run()`.

# asp.net-mvc-3 - MVC3 元标签动态变化

> ID：10256892
> 
> 赞同：1
> 
> 时间：2012-04-21T06:42:51.943
> 
> 标签：asp.net-mvc-3

我正在研究 MVC3，我正在使用 Razor 引擎我有一个 layout.cshtml 页面，其中包含类似的元标记

```
<meta property="og:url" content="http://www.mywebsite.com/" /> 
```

我有一些内容页面，如 abc.cshtml，其中有 Layout.cshtml 页面，因为有布局，所以他们从 layout.cshtml 获取元标记，我希望 abc.cshtml 应该有自己的元标记，如

```
<meta property="og:url" content="http://www.mywebsite.com/controller/abc" /> 
```

我怎样才能做到这一点？或者我可以动态更改元标记？？？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T10:35:31.710

是的，您可以从每个 ViewBag 中传递该值或查看操作，如下所示...

```
ViewBag.OgURL = "http://www.mywebsite.com/controller/abc"; 
```

然后在你 layout.cshtml

```
@ViewBag.OgURL 
```

或在您的 layout.cshtml 中设置 head 标签。

```
@RenderSection("head", false) 
```

并添加到您的视图中...

```
@section head {
<meta property="og:url" content="http://www.mywebsite.com/controller/abc" />
} 
```

# django - 如何制作下一个/上一个按钮以在 gql 查询结果之间切换

> ID：10256893
> 
> 赞同：0
> 
> 时间：2012-04-21T06:43:44.287
> 
> 标签：django, google-app-engine, gql

假设我有一个包含 100 种产品的网站。然后将其过滤为 5 个部分，每个部分包含 20 个产品。如果您位于包含 20 个产品（例如玩具）的部分之一，那么每页仅显示 5 个玩具的最佳方法是什么？列表底部是下一个/上一个按钮，用于显示下一个/上一个 5 个玩具。

更好的类比是谷歌搜索。有数百万个结果，但在给定时间仅显示约 10 个。

所以现在我正在使用谷歌应用引擎（python）和 django 模板。我想解决这个问题的一种方法是将所有查询结果放入一个 div 中，然后可以通过 javascript 对其进行修改以产生类似的效果。但是，如果有人单击浏览器的后退按钮，他们就不会回到原来的位置。

提前致谢。任何帮助都会很有用......我不知道这种技术叫什么，所以谷歌并没有真正有用:(

**编辑：**根据回复，我发现我的问题在这里得到了解决：[如何使用 cursor() 进行分页？](https://stackoverflow.com/questions/4840731/how-to-use-cursor-for-pagination)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:17:30.257

查看查询[游标](https://developers.google.com/appengine/docs/python/datastore/queries#Query_Cursors)。Thay 被序列化并发送到客户端，用于创建“下一个”和“上一个”分页请求。

**注意**：不要`offset`在查询中使用。这可能非常昂贵，因为它[实际上会获取（并收费）所有实体到`offset+limit`position](https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_fetch)，但只返回应用程序的`limit`结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:58:24.057

如果您可能有一个很大的结果集（想想如果 Google 使用这种方法会发生什么），我不确定将所有结果作为隐藏内容放在 HTML 中并使用 JS 操作它是一个非常好的主意。还有你提到的背面功能问题。

因此，对于每次查询想要的“结果页面”，我认为 Google 的[GQL 参考](https://developers.google.com/appengine/docs/python/datastore/gqlreference)可能会对您有所帮助，具体看一下 LIMIT 子句，它可以通过提供它来帮助您创建您正在寻找的分页机制您希望作为“计数”的每页项目数和以前查看为“偏移量”的项目数（第一次调用时为 0）。

至于显示，我认为 Google 图片 / Facebook 新闻提要方法也可能很有趣（加载滚动而不是分页），但这是您个人选择的问题 :)

希望这有帮助，祝你好运！

**编辑**：阅读彼得的回答后，我发现使用游标进行分页更有效，他的回答中给出了很好的参考。

# asp.net - ASP.NET Membership.FindUsersByName 不起作用。无法搜索用户。404的

> ID：10256901
> 
> 赞同：0
> 
> 时间：2012-04-21T06:44:58.210
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

当我使用此操作并转到个人资料/用户名时，即使名称存在，它也会给我一个 404。我用过 Membership.GetNumberOfUsersOnline().ToString(); 效果很好，可以正确返回在线用户数量。我知道如果这段代码正常工作，它只会返回一个基本网页，但它甚至没有这样做，我得到一个 404。什么给出了？非常感谢您的帮助！:)

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Mvc;
    using System.Web.Security;

   namespace MvcMicroBlog.Controllers
   {
        public class ProfileController : Controller
       {
           //
           // GET: /Profile/

            public ActionResult Index(string Profile)
            {
                Membership.FindUsersByName(Profile);
                return View();
            }

       }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:59:44.160

除非您定义了自定义路由，否则您应该转到 /Profile/?Profile=username，或者您可以将 Profile 参数重命名为 id。

如果您更喜欢自定义路由方法，您可以将其添加到 Global.asax.cs 中的 RegisterRoutes 方法中，在默认路由之前：

```
routes.MapRoute(
    string.Empty,
    "Profile/{Profile}",
    new { controller = "Profile", action = "Index" }
); 
```

# c# - 从字典中选择随机列表并从列表中选择随机项目并将其显示在文本块中？

> ID：10256902
> 
> 赞同：0
> 
> 时间：2012-04-21T06:45:24.320
> 
> 标签：c#, windows-phone-7

这是我的代码：

```
var dict = new Dictionary<string, List<string>>
                       {
                            {"AR", new List<string> {"M4A1", "M16A4", "SCAR-L", "CM901", "TYPE 95", "G36C","ACR 6", "MK14", "AK-47", "FAD"} },
                            {"SM", new List<string> {"MP5","UMP45","PP90M1","P90","PM-9","MP7"}},
                            {"LM", new List<string>{"L86 LSW","MG36", "PKP PECHENEG","MK46","M60E4"}},
                            {"SR", new List<string>{"BARRET .50 CAL","L118A","DRAGUNOV","AS50","RSASS","MSR"}},
                            {"SG", new List<string>{"USA512","KS612","SPAS-12","AA-12","STRIKER","MODEL 1887"}},
                            {"RS", new List<string>{"RIOT SHIELD"}}

                       }; 
```

我想在文本框中的这个字典输出中的随机列表中有一个随机项目。谢谢，任何帮助表示赞赏！另外，我正在为 Windows Phone 7 开发，如果它有任何不同的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T06:51:00.513

```
var rand = new Random();

var randList = dict.Values[rand.Next(dict.Count - 1)];
var randomWord = randList[rand.Next(randList.Count - 1)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T06:58:01.330

从这里：[字典中的随机条目](https://stackoverflow.com/questions/1028136/random-entry-from-dictionary)

有一种更有效的方法可以将字典随机化一次并使其可供选择：

```
public IEnumerable<TValue> RandomValues<TKey, TValue>(IDictionary<TKey, TValue> dict)
{
    Random rand = new Random();
    List<TValue> values = Enumerable.ToList(dict.Values);
    int size = dict.Count - 1;
    while(true)
    {
        yield return values[rand.Next(size)];
    }
} 
```

接着：

```
var rand = new Random();
var randomDict = RandomValues(dict);
var randList = randomDict.First();
var randVal = randList[rand.Next(randList.Count - 1)]; 
```

# android - 在外部应用程序中启动活动是否有区别（并且是否有首选方法）？

> ID：10256903
> 
> 赞同：1
> 
> 时间：2012-04-21T06:45:31.037
> 
> 标签：android, android-intent

使用意图过滤器之间是否有任何功能差异

```
Intent myIntent = new Intent("com.this.that.MYACT");
myIntent.setPackage("com.this.that"); 
```

对比

```
Intent myIntent = new Intent(context, MyActivity.class);
myIntent.setPackage("com.this.that"); 
```

是其中之一

*   更安全？
*   快点？
*   其他一些优势？

还是根本没有区别？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:01:22.303

答案是：使用`Intent`“外部应用程序”的作者告诉您使用的任何结构，或者使用`getLaunchIntentForPackage()`on`PackageManager`来获得`Intent`适合一般启动“外部应用程序”的结构。

> 我在这两种情况下都对它们进行了测试，并且没有看到任何行为差异。

那只是因为`com.this.that.MyActivity`碰巧有一个`<intent-filter>`或已经特别标记自己是被导出的。默认情况下，Activity 不会被导出，并且 no`Intent`可用于从第三方应用程序启动它们。

此外，您的代码甚至不会编译，因为`MyActivity`您的项目中没有（它在“外部应用程序”中），因此`MyActivity.class`不存在。它编译（并成功运行）的唯一方法是，如果您的应用程序和“外部应用程序”碰巧在同一个 Java 包中具有相同的活动类，这是不太可能的。

> 更安全？

“外部应用程序”的作者应该使用`Intent`操作（您的第一个场景），因为在重构代码时更容易保持一致。如果“外部应用程序”的作者将其代码重构为子包、重命名活动类等，您的第二种方法将会中断。基本上，如果您愿意，动作名称将成为活动的公共 API（以及任何记录的额外内容）。这就是为什么您会看到 Android SDK 将这种方法专门用于其自己记录和支持的活动。

> 快点？

第二个速度*可能*会*略有*提高，但我们会谈论每微秒`startActivity()`，这不值得担心。

# c - 使用 MPI-IO 读取多个文件

> ID：10256908
> 
> 赞同：1
> 
> 时间：2012-04-21T06:46:16.237
> 
> 标签：c, file-io, matrix, io, mpi

我正在尝试使用 C 中的 MPI-IO 读取多个文件。我正在遵循以下示例：[http ://users.abo.fi/Mats.Aspnas/PP2010/examples/MPI/readfile1.c](http://users.abo.fi/Mats.Aspnas/PP2010/examples/MPI/readfile1.c)

但是我在一个矩阵中读取一个双精度数而不是一串字符。这是该实现：

```
/*
Simple MPI-IO program that demonstrate parallel reading from a file.
Compile the program with 'mpicc -O2 readfile1.c -o readfile1'
*/

#include <stdlib.h>
#include <stdio.h>
#include "mpi.h"

#define FILENAME "filename.dat"

double** ArrayAllocation() {
    int i;
    double** array2D;
    array2D= (double**) malloc(num_procs*sizeof(double*));
    for(i = 0; i < num_procs; i++) {
        twoDarray[i] = (double*) malloc(column_size*sizeof(double));
    }
    return array2D;
}

int main(int argc, char* argv[]) {
  int i, np, myid;
  int bufsize, nrchar;
  double *buf;          /* Buffer for reading */
  double **matrix = ArrayAllocation();
  MPI_Offset filesize;
  MPI_File myfile;    /* Shared file */ 
  MPI_Status status;  /* Status returned from read */

  /* Initialize MPI */
  MPI_Init(&argc, &argv);
  MPI_Comm_rank(MPI_COMM_WORLD, &myid);
  MPI_Comm_size(MPI_COMM_WORLD, &np);

  /* Open the files */
  MPI_File_open (MPI_COMM_WORLD, FILENAME, MPI_MODE_RDONLY,
         MPI_INFO_NULL, &myfile);

  /* Get the size of the file */
  MPI_File_get_size(myfile, &filesize);
  /* Calculate how many elements that is */
  filesize = filesize/sizeof(double);
  /* Calculate how many elements each processor gets */
  bufsize = filesize/np;
  /* Allocate the buffer to read to, one extra for terminating null char */
  buf = (double *) malloc((bufsize)*sizeof(double));
  /* Set the file view */
  MPI_File_set_view(myfile, myid*bufsize*sizeof(double), MPI_DOUBLE,
             MPI_DOUBLE,"native", MPI_INFO_NULL);
  /* Read from the file */
  MPI_File_read(myfile, buf, bufsize, MPI_DOUBLE, &status);
  /* Find out how many elemyidnts were read */
  MPI_Get_count(&status, MPI_DOUBLE, &nrchar);
  /* Set terminating null char in the string */
  //buf[nrchar] = (double)0;
  printf("Process %2d read %d characters: ", myid, nrchar);

  int j;
  for (j = 0; j <bufsize;j++){
    matrix[myid][j] = buf[j];
  }

  /* Close the file */
  MPI_File_close(&myfile);

  if (myid==0) {
    printf("Done\n");
  }

  MPI_Finalize();
  exit(0);
} 
```

但是，当我在关闭第一个文件后尝试调用 MPI_File_open 时，出现错误。我需要多个通信器来执行此操作吗？任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T10:28:12.973

上面的代码`ArrayAllocation`与主程序的逻辑不太匹配。在初始化 MPI 之前，矩阵被分配为指向双精度向量的指针数组，因此无法将行数设置为 MPI 进程数。

在`column_size`确定文件大小之前也不知道。

按行存储矩阵是 C 语言中的一般约定。违反此约定可能会使您或您的代码的读者感到困惑。

总而言之，为了让这个程序正常工作，你需要声明

```
 int num_procs, column_size; 
```

作为定义之前的全局变量，`ArrayAllocation`并将对该函数的调用移至计算 bufsize 的行下方：

```
 ...
 /* Calculate how many elements each processor gets */
 bufsize = filesize/np;

 num_procs = np;
 column_size = bufsize;
 double **matrix = ArrayAllocation();
 ... 
```

通过上述修改，此示例应该适用于任何支持 MPI-IO 的 MPI 实现。我已经用 OpenMPI 1.2.8 对其进行了测试。

为了生成测试文件，您可以使用例如以下代码：

```
 FILE* f = fopen(FILENAME,"w");
 double x = 0;
 for(i=0;i<100;i++){
   fwrite(&x, 1,sizeof(double), f);
   x +=0.1;
 }
 fclose(f); 
```

# c++ - 拉宾-卡普算法

> ID：10256913
> 
> 赞同：8
> 
> 时间：2012-04-21T06:47:15.300
> 
> 标签：c++, string, performance, algorithm, rabin-karp

我有兴趣实现 Rabin-Karp 算法来搜索 wiki 上所述的子字符串：[http](http://en.wikipedia.org/wiki/Rabin-Karp_string_search_algorithm) ://en.wikipedia.org/wiki/Rabin-Karp_string_search_algorithm 。不是为了功课，而是为了自己的利益。我已经实现了 Rabin-Karp 算法（如下所示）并且它有效。但是，性能真的，真的很差！！！我知道我的哈希函数是基本的。但是，似乎对 strstr() 的简单调用总是会胜过我的函数 rabin_karp()。我可以理解为什么 - 哈希函数比简单的逐个字符比较每个循环所做的工作更多。我在这里想念什么？Rabin-Karp 算法是否应该比调用 strstr() 更快？什么时候最好使用 Rabin-Karp 算法？因此我的个人利益。我什至实现了算法吗？

```
size_t hash(char* str, size_t i)
{
   size_t h = 0;
   size_t magic_exp = 1;
// if (str != NULL)
   {
      while (i-- != 0)
      {
         magic_exp *= 101;
         h += magic_exp + *str;
         ++str;
      }
   }

   return h;
}

char* rabin_karp(char* s, char* find)
{
   char* p = NULL;

   if (s != NULL && find != NULL)
   {
      size_t n = strlen(s);
      size_t m = strlen(find);

      if (n > m)
      {
         size_t hfind = hash(find, m);

         char* end = s + (n - m + 1);
         for (char* i = s; i < end; ++i)
         {
            size_t hs = hash(i, m);
            if (hs == hfind)
            {
               if (strncmp(i, find, m) == 0)
               {
                  p = i;
                  break;
               }
            }
         }
      }
   }

   return p;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-21T06:54:05.863

您没有正确实现哈希。Rabin-Karp 的关键是随着潜在匹配沿着要搜索的字符串移动而*增量更新散列。*正如您所确定的，如果您为每个潜在的匹配位置重新计算整个哈希值，事情会非常缓慢。

对于除第一次比较之外的所有情况，您的散列函数应采用现有散列、一个新字符和一个旧字符，并返回一个更新的散列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T07:12:47.697

Rabin-Karp 是一种滚动散列算法 - 其想法是能够将子串移动一个位置到任一方向（左或右），并能够以恒定数量的操作重新计算散列。当您实现它时，搜索的复杂度为 O(N * L)，其中 N 是大字符串的长度，L 是您要搜索的字符串的长度。这是最天真的方法的复杂性，在我看来实际上是对它的一点悲观。

为了改进您的算法，预先计算 magic_exp 的指数并使用它们来“滚动”您的哈希 - 基本上就像多项式一样，您需要减去最高次数乘以 magic_exp 并将符号的哈希添加到右侧（用于将哈希移动到正确的）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T06:56:15.413

`strstr`正在使用本质上也是线性的[KMP算法。](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)这意味着两种算法的复杂度大致相同。从那时起，常数是重要的因素。尤其是在你的哈希函数很糟糕并且有很多冲突的情况下，KMP 会快很多。

**编辑**：还有一件事。对于 Rabin Karp 算法来说，预先计算所有前缀的哈希码是非常重要的。现在您没有实现正确的 Rabin Karp，因为对您的函数的调用将是线性的，而不是复杂性恒定的。（顺便说一句，这意味着维基百科不是学习拉宾卡普的好来源）。

# jquery - 如何使 jquery 背景幻灯片仅影响父 div？

> ID：10256916
> 
> 赞同：0
> 
> 时间：2012-04-21T06:48:20.313
> 
> 标签：jquery, background, parent

我整天都在试图弄清楚这一点，并继续绕圈子跑。我有两个问题希望得到帮助。**首先**：我有一个在 div 内显示的 jquery 背景幻灯片。问题是，当背景淡出以引入新图像时，DIV 的子代也是如此，我不希望这样。您可以[在我的网站上](http://www.ind-mediagroup.com/branding/)看到它如何隔离父 DIV 以使子 DIV 也不会淡出？这是幻灯片的代码：

```
<script language="JavaScript" type="text/javascript">  
    $(document).ready(function(){    
        var imgArr = [ // relative paths of images  
            'http://www.ind-mediagroup.com/wp-content/themes/twentyeleven/indeximg/1.jpg',  
            'http://www.ind-mediagroup.com/wp-content/themes/twentyeleven/indeximg/2.jpg',  
            'http://www.ind-mediagroup.com/wp-content/themes/twentyeleven/indeximg/3.jpg',  
            'http://www.ind-mediagroup.com/wp-content/themes/twentyeleven/indeximg/4.jpg' 
        ];    

    var preloadArr = [];  
    var i;    

    /* preload images */ 

    for(i=0; i < imgArr.length; i++){  
        preloadArr[i] = new Image();  
        preloadArr[i].src = imgArr[i];  
    }    

    var currImg = 1;  
    var intID = setInterval(changeImg, 6000);    

    /* image rotator */ 

    function changeImg(){  
        $('#centerdiv').animate({opacity: 0}, 1000, function(){  
            $(this).css('background','url(' + 
                preloadArr[currImg++%preloadArr.length].src +') center fixed no-repeat');  
        }).animate({opacity: 1}, 1000);
        $('#centerdiv').css({'background-size': '100% 100%'}); }    
    }); 

</script> 
```

这是与问题有关的 CSS（我知道其中大部分可能是多余的）：

```
 #centerdiv {
    width:100%;
    height: 642px;
    background-color: #333333;
    background-image:url('http://www.ind-mediagroup.com/wp-  content/themes/twentyeleven/indeximg/houston-night.jpg');
    background-repeat: no-repeat;/* i believe the next few lines are dealt with in the jquery code*/
    background-size: 100% 100%;
    background-position: center;
    background-attachment: fixed;

    top:0px;
    padding-top: 55px;
}

.contentdiv {
    width: 78%;
    height: 75%;
    margin: auto auto auto 140px; 
    background-image: url('http://www.ind-mediagroup.com/wp-   content/themes/twentyeleven/indeximg/whitetransbg.png');
    position: relative;
    z-index: 10;
} 
```

以下是与该问题相关的 HTML：

```
<div id="centerdiv">
    <div class="contentdiv">
        <div class="wrappercontent">
            <div id="contentname">
                <p class="contentTextHeader">+<?php the_title() ?></p>
            </div>

            <div id="content">

                <?php
                    if (have_posts()) :
                        while (have_posts()) :
                            the_post();
                            the_content();
                        endwhile;
                    endif;
                ?>

            </div>

            <div id="contentright">
                <?php echo apply_filters('the_content', get_post_meta($post->ID, 'page_image', true) ); ?>       
            </div>
        </div> 
    </div>
</div> 
```

**第二个**问题是：我希望背景图像填充 100% 的 div 空间。我设法通过添加以下内容使其在 Chrome 中工作：

```
$('#centerdiv').css({'background-size': '100% 100%'}); 
```

我不是 jquery 专家，所以到目前为止我也不是专家，并且不确定前面的代码是否正确，但在其他浏览器中，它给了我一个奇怪的效果。它将显示较大的图像，并在显示正确大小的图像后立即显示。使用现有的 jquery 代码，有没有办法做到这一点？

我真的很感激任何帮助。我非常接近我想要的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:30:21.843

`contentdiv`必须放在外面`centrediv`。`contentdiv`必须是绝对定位的那种叠加。我使用轨道滑块进行图像滑动。

示例 html：

```
<style type="text/css">
    #centerdiv{
        border-radius: 3px;
    }
    #contentdiv{
        position: absolute;
        top: 20px;
        left:40px;
        z-index: 300;
    }
</style>

<body>

    <div id="centerdiv">
        <img src="http://www.lorempixum.com/898/270/animals" alt="" /> 
        <img src="http://www.lorempixum.com/898/270/city" alt="" /> 
        <img src="http://www.lorempixum.com/898/270/food" alt="" /> 
        <img src="http://www.lorempixum.com/898/270/sports" alt="" /> 
    </div>
    <div id="contentdiv">
            This is my text
    </div>
    <pre>Animals -> City -> Food -> Sports</pre>
    <script type="text/javascript">
        $(window).load(
            function(){
                $('#centerdiv').orbit({
            'timer': true,
            'advanceSpeed': 6000,
            'bullets' : false,
            'bulletThumbs': false, 
            });});
    </script>
</body> 
```

# ruby-on-rails - 需要在 ruby on rails 3 中缩短这个表达式

> ID：10256918
> 
> 赞同：2
> 
> 时间：2012-04-21T06:48:26.307
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要使我的代码更紧凑。我有以下代码：

```
params[:investor][:profit] = params[:investor][:profit].nil? ? nil : params[:investor][:profit].gsub(/\D/, '') 
```

基本上它的作用 - 它将参数中的利润值格式化为仅包含数字，如果它是零 - 保持它为零......有没有办法让它更短。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T06:50:59.550

你可以像这样把它收紧一点：

```
params[:investor][:profit].gsub!(/\D/, '') unless params[:investor][:profit].nil? 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T06:56:54.557

您可以使用[active_support 中的 #try 方法](http://api.rubyonrails.org/classes/Object.html#method-i-try)：

```
params[:investor][:profit].try(:gsub!, /\D/, '') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T06:51:34.947

嗯

```
p = params[:investor][:profit]
p = p.nil? ? nil : p.gsub(/\D/,'') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T07:40:10.273

```
params[:investor][:profit].gsub!(/\D/, '') if params[:investor][:profit] 
```

或者我几乎总是使用的：

```
params[:investor][:profit].gsub!(/\D/, '') rescue nil 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T10:51:24.303

```
params[:investor][:profit] &&= params[:investor][:profit].gsub(/\D/, '') 
```

如果 的值为`params[:investor][:profit]`nil，则计算结果为`nil && ...`。由于 nil 为假，它将保持为 nil，否则执行`gsub`.

我认为它与`try`另一个解决方案中提到的解决方案有关。选择其中一个取决于个人品味。我喜欢这个`&&=`解决方案，因为它是 ruby​​ 而不是 rails 便捷方法，并且您不需要在 try 方法的参数中“加密”您真正想要做的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-21T14:18:39.920

```
prof = params[:investor][:profit]
prof.gsub!(/\D/,'') if prof 
```

# google-chrome-extension - 是否可以使用 Chrome 扩展程序重写 url（带有额外参数）

> ID：10256922
> 
> 赞同：14
> 
> 时间：2012-04-21T06:50:01.970
> 
> 标签：google-chrome-extension

我正在尝试将一些额外的参数附加到用户键入的 url（在页面加载之前）。有可能吗？

例如，如果用户键入`www.google.com`，我想附加`?q=query`到 url (final: `www.google.com?q=query`.

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-21T14:47:11.537

[webRequest](http://code.google.com/chrome/extensions/webRequest.html) API 可能是您需要的。此代码进入您的背景页面：

```
chrome.webRequest.onBeforeRequest.addListener(
    function(details) {
        if( details.url == "http://www.google.com/" )
            return {redirectUrl: "http://www.google.com/?q=defaultquery" };
    },
    {urls: ["http://www.google.com/*"]},
    ["blocking"]); 
```

这是一个非常具体的规则，将访问重定向到`http://www.google.com/`with `http://www.google.com/?q=defaultquery`，但我认为您可以看到如何扩展它以包含更多功能。

请注意，这将重新路由**所有**到达的尝试`http://www.google.com/`，包括 Ajax 请求和 iframe。

根据文档，您需要添加`webRequest`和`webRequestBlocking`权限，以及您计划拦截的每个主机的主机权限：

```
"permissions": [
    "webRequest",
    "webRequestBlocking",
    "*://*.google.com/",
    ...
], 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-15T05:23:39.713

***这是一个老问题，我仍在为未来的读者回答。***

查询参数的修改有点棘手，因为您可能会陷入无限循环，Chrome/Firefox 可能会检测到它并处理请求 URL 的当前状态。

我在我的 chrome 扩展[Requestly](https://chrome.google.com/webstore/detail/requestly-redirect-url-mo/mdnleldcmiljblolnjhpnblkcekpdkpa)中遇到过这种情况，用户使用`Replace Rule`和替换`www.google.com`或`www.google.com?q=query`做了类似的事情。

这种方法的问题是浏览器在添加查询参数后拦截请求 URL，因此参数将被多次添加并损坏 URL。因此，您必须确保以下任何一项：-

1.  一旦请求被重定向，就不要拦截它。
2.  检查参数是否已经存在，然后不要重定向它。

正如@apsillers 在他的回答中正确指出的那样，您必须使用 webRequest API 来对 URL 执行任何修改。请查看他的[答案](https://stackoverflow.com/a/10259962/816213) 并相应地编写您的代码。

以防万一，您正在寻找一个已经可用的解决方案，请考虑尝试[Requestly 的 Query Parameter Rule](https://medium.com/@requestly_ext/introducing-query-param-rule-d152b28eec08)。这是它的外观截图：-

[![在此处输入图像描述](../Images/1a7d6ccc188cdbf689fc7d52ec75ae8c.png)](https://i.stack.imgur.com/KR3FZ.png)

[对于 Firefox，您可以从其主页](https://www.requestly.io/)下载 Requestly 。

# sql - 在 Postgresql 中进行水平分区的正确步骤是什么？

> ID：10256923
> 
> 赞同：13
> 
> 时间：2012-04-21T06:50:46.457
> 
> 标签：sql, postgresql, sharding

我们有一个带有 Postgresql 9.1 数据库的电子商务门户。一张非常重要的表目前有 3200 万条记录。如果我们要交付所有项目，该表将增长到 3.2 亿条记录，主要是日期。这将是沉重的。

所以我们正在考虑水平分区/分片。我们可以将这张表中的项目水平分成 12 份（每月 1 份）。这样做的最佳步骤和技术是什么？数据库中的水平分区是否足够好，还是我们必须开始考虑分片？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-21T07:07:54.233

虽然 3.2 亿并不小，但也不是很大。

这在很大程度上取决于您在表上运行的查询。如果您始终在查询中包含分区键，那么“常规”分区可能会起作用。

可以在 PostgreSQL wiki 中找到一个示例：
[http ://wiki.postgresql.org/wiki/Month_based_pa​​rtitioning](http://wiki.postgresql.org/wiki/Month_based_partitioning)

该手册还解释了分区的一些注意事项：
[http ://www.postgresql.org/docs/current/interactive/ddl-partitioning.html](http://www.postgresql.org/docs/current/interactive/ddl-partitioning.html)

如果您正在考虑分片，您可能会阅读 Instagram（由 PostgreSQL 提供支持）是如何实现的：

[http://instagram-engineering.tumblr.com/post/10853187575/sharding-ids-at-instagram](http://instagram-engineering.tumblr.com/post/10853187575/sharding-ids-at-instagram)

如果您主要有读查询，另一种选择可能是使用流复制来设置多个服务器并通过连接到热备用进行读访问并连接到主服务器进行写访问来分发读查询。我认为[pg-pool II](http://www.pgpool.net/mediawiki/index.php/Main_Page)可以自动（在某种程度上）做到这一点。这可以与分区相结合，以进一步减少查询运行时间。

如果您喜欢冒险并且没有非常迫切的需要这样做，您还可以考虑 Postgres-XC，它承诺支持透明的水平缩放： http:
[//postgres-xc.sourceforge.net/](http://postgres-xc.sourceforge.net/)

还没有最终版本，但看起来这不会花费太长时间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T10:27:37.977

这是我的分区示例代码：t_master 是要在应用程序 t_1 中选择/插入/更新/删除的视图，t_2 是实际存储数据的基础表。

```
create or replace view t_master(id, col1)
as 
select id, col1 from t_1
union all
select id, col1 from t_2

CREATE TABLE t_1
(
  id bigint PRIMARY KEY,
  col1 text
);

CREATE TABLE t_2
(
  id bigint PRIMARY KEY,
  col1 text
);

CREATE OR REPLACE FUNCTION t_insert_partition_function()
returns TRIGGER AS $$
begin
raise notice '%s', 'hello';
    execute 'insert into t_'
        || ( mod(NEW.id, 2)+ 1 )
        || ' values ( $1, $2 )' USING NEW.id, NEW.col1 ;
    RETURN NULL;
end;
$$
LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION t_update_partition_function()
returns TRIGGER AS $$
begin
    raise notice '%s', 'hello';
    execute 'update t_'
        || ( mod(NEW.id, 2)+ 1 )
        || ' set id = $1, col1 = $2 where id = $1' 
        USING NEW.id, NEW.col1 ;
    RETURN NULL;
end;
$$
LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION t_delete_partition_function()
returns TRIGGER AS $$
begin
    raise notice '%s', 'hello';
    execute 'delete from t_'
        || ( mod(OLD.id, 2)+ 1 )
        || ' where id = $1' 
        USING OLD.id;
    RETURN NULL;
end;
$$
LANGUAGE plpgsql;

CREATE TRIGGER t_insert_partition_trigger instead of INSERT
ON t_master FOR each row 
execute procedure t_insert_partition_function();

CREATE TRIGGER t_update_partition_trigger instead of update
ON t_master FOR each row 
execute procedure t_update_partition_function();

CREATE TRIGGER t_delete_partition_trigger instead of delete
ON t_master FOR each row 
execute procedure t_delete_partition_function(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-19T11:26:51.420

如果您不介意升级到 PostgreSQL 9.4，那么您可以使用[pg_shard 扩展](https://www.citusdata.com/citus-products/pg-shard)，它可以让您在多台机器上透明地对 PostgreSQL 表进行分片。每个分片都存储为另一个 PostgreSQL 服务器上的常规 PostgreSQL 表，并复制到其他服务器。它使用哈希分区来决定将哪些分片用于给定查询。如果您的查询具有自然分区维度（例如，客户 ID），那么 pg_shard 会很好地工作。

更多信息：[https ://github.com/citusdata/pg_shard](https://github.com/citusdata/pg_shard)

# iphone - 如何使用 Facebook 登录在 iPhone 中登录我的应用程序？

> ID：10256924
> 
> 赞同：0
> 
> 时间：2012-04-21T06:50:56.190
> 
> 标签：iphone, facebook

我在 xcode 4 中有一个应用程序，我需要使用 Facebook 的用户名和密码来验证和访问我的应用程序。只想使用 Facebook 登录名和密码登录应用程序。登录成功后应该打开我们的 iPhone 应用程序。我怎么能做到这一点？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    facebook = [[Facebook alloc] initWithAppId:@"211846395591747" andDelegate:self];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    if (![facebook isSessionValid]) {
        [facebook authorize:nil];
    }

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
     self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {

    NSLog(@"handleOpenURL");

    return [facebook handleOpenURL:url]; 
} 
```

我为 Facebook 连接做了这段代码。它正在打开我们 Facebook 开发人员的项目页面。我只想使用 Facebook 用户名和密码登录我的应用程序。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:13:16.607

有用于登录和注销的 facebook 委托方法。在应用程序开始时首先调用登录方法您可以设置 BOOL 变量来检查用户是否登录，并在此基础上您可以授予用户访问权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:26:53.170

您需要创建 Bool 方法来获取 Facebook 登录是否已完成，您必须先设置此功能查看，如果未完成登录则显示警报框此链接可以解决您的问题 [应用程序登录与 facebook 登录](https://stackoverflow.com/questions/5000705/application-login-with-facebook-login)

# java - 无法将 Google SVN 与 Eclipse Indigo 一起使用

> ID：10256927
> 
> 赞同：0
> 
> 时间：2012-04-21T06:51:08.917
> 
> 标签：java, eclipse, svn, eclipse-plugin, eclipse-indigo

我在使用 Eclipse Indigo 配置 Google SVN 时遇到问题。它不接受存储库的 URL。有人请告诉要给出哪个网址吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:23:20.843

我使用 https 而不是 http 形式的 url 解决了这个问题。

# ios - 带有应用请求的 Facebook iOS SDK 传递参数

> ID：10256933
> 
> 赞同：1
> 
> 时间：2012-04-21T06:52:39.533
> 
> 标签：ios, facebook, sdk

我想让我的原生 iOS 应用程序向 iOS 上的 Facebook 用户发送一个带有参数的请求。如果他们接受，它将启动我的原生 iOS 应用程序并将参数传递给它。这可能吗？

我使用 [facebook dialog:@"apprequests" andParams:dict andDelegate:self] 获得了微不足道的成功。我让 Facebook iOS 应用程序上的书签计数器增加，但我没有看到个别请求。如果我点击书签，它会启动我的应用程序，但我看不到如何获取随请求传递的“数据”参数，甚至是 request_id。

在桌面上，我在“应用程序和游戏”的“请求”部分下看到单独的消息。如果我接受请求，我可以看到它将 request_id 传递给我的（简单回显）画布 URL。我读到这可用于获取相关数据。但是，这在 iOS 上对我没有帮助。我的应用程序只在 iOS 上运行，所以这个画布应用程序最终将只是一个“这个应用程序只在 iOS 上工作”，但似乎有必要让请求流动。

这些都没有向我显示通知，所以也许我做错了一些基本的事情。或者，是否有其他方法可以将消息传递给 Facebook 用户，他们可以单击 URL（以启动并提供我的应用程序的参数）。

另一件奇怪的事情是，我不知道如何摆脱请求。如果我在桌面客户端上“X”它们，它会询问我是否要停止接收来自我的应用程序的所有请求，如果我说不，它只会暂时隐藏它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:50:15.283

Leif，嗨 - 我是 Facebook 的工程师，他编写了您所引用的教程。我已经查看了您提到的问题 - 这实际上不是文档中的错误，而是设计使然。

来自 iOS 请求的传入 url 如下所示：

*`fb480369938658210://authorize?expires_in=3600&access_token=BAAG05NeN86IBAC31YWMWRHVrNCAYMy0Rv1OtqZCwdH8QDBUAt5KgZCsIbU0EOZAvMms2tZCANV9sZBWSkEzStDtt4i7YnYZA4bPgGx2XaI5s22iBMxIZAneZAv7ADi3Wi20ZD&target_url=http%3A%2F%2Fm.facebook.com%2Fapps%2Ffriendsmashsample%3Ffb_source%3Dnotification%26request_ids%3D364209433669109%252C379616028785376%252C494409170593789%252C489782271042929%252C328564930575784%26ref%3Dnotif%26app_request_type%3Duser_to_user`*

这是将多个请求捆绑在一起，将多个请求 ID 捆绑到一个 url 中。

要获取与此请求耦合的额外数据，不需要 user_id。点击 graph.facebook.com/*request_id* 就足够了。

您实际上可以在此处的文档中看到这一点：[https](https://developers.facebook.com/docs/requests/#deleting) ://developers.facebook.com/docs/requests/#deleting在“请求 ID 格式”标题下。

Friendsmash 示例和教程中包含的代码可以正常工作 - 我刚刚验证了它。因此，它应该作为 OP 问题的一个很好的指南。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:50:14.717

我也一直在为此苦苦挣扎。

首先，[FB iOS SDK 请求教程](http://developers.facebook.com/docs/tutorials/ios-sdk-games/requests/)是一个好的开始。

但是，也有一些错误导致事情无法按预期工作：

*   目前看来，必须为 FB 应用程序设置一个移动 Web url，以便将 requestIds 从本机 FB 应用程序转发到您的本机应用程序。请参阅此[错误报告](http://developers.facebook.com/bugs/465760136778889)。
*   上面提到的教程对请求对象使用了错误的图形路径。我使用“request-id”，它应该是“request-id”_“user-id”。我已经提交了关于该问题的文档[错误报告。](http://developers.facebook.com/bugs/457112520997019)

# haskell - Haskell中案例的较短语法？

> ID：10256937
> 
> 赞同：4
> 
> 时间：2012-04-21T06:53:23.870
> 
> 标签：haskell

假设我有这样的愚蠢行为：

```
data SomeType
    = Unary Int
    | Associative SomeType
    | Binary SomeType SomeType

some_func :: SomeType -> Int
some_func s =
    case s of
        Unary n -> n
        Associative s1 -> some_func s1
        Binary s1 s2 -> some_func s1 + some_func s2 
```

这里 some_func 将查看给定 SomeType 中的所有 SomeType 并总结所有 Unary 数据构造函数的 Ints。SomeType 是一种递归数据类型。

在这些模式匹配中，我重复了`some_func s1`。有没有办法使用@，when，let或其他任何东西来声明`sf1 = some_func s1`和使用它？像这样的东西：

```
data SomeType
    = Unary Int
    | Associative SomeType
    | Binary SomeType SomeType

some_func :: SomeType -> Int
some_func s =
    case s of
        Unary n -> n
        Associative s1 -> sf1
        Binary s1 s2 -> sf1 + sf2
        where
            sf1 = some_func s1
            sf2 = some_func s2 
```

这里的问题是 s1 和 s2 只在之后的块中知道，`->`而 sf1 无法计算。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T08:20:13.637

这不能回答问题，但可能会解决问题：

```
{-# LANGUAGE DeriveFoldable #-}
module SomeType where
import Data.Foldable as F

data SomeType a
    = Unary a
    | Associative (SomeType a)
    | Binary (SomeType a) (SomeType a)
      deriving (Foldable)

some_func :: SomeType Int -> Int
some_func = F.foldl1 (+) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T07:26:57.970

答案是否定的：`s1`in与in`Associative`不同。它们具有相同名称的事实令人分心，因为它们存在于不同的上下文中。`s1``Binary`

我想您可以通过使用帮助程序来节省一些输入，但这并不能真正帮助封装重复的逻辑：

```
some_func :: SomeType -> Int
some_func s = go s
  where go (Unary n) = n
        go (Associative s1) = go s1
        go (Binary s1 s2) = go s1 + go s2 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-21T15:58:48.043

滥用记录语法！

```
data SomeType
    = Unary { u :: Int }
    | Associative { s1 :: SomeType }
    | Binary { s1, s2 :: SomeType }

someFunc :: SomeType -> Int
someFunc s = case s of
    Unary{}       -> u s
    Associative{} -> sf1
    Binary{}      -> sf1 + sf2
  where
    sf1 = someFunc (s1 s)
    sf2 = someFunc (s2 s) 
```

请注意，相同类型的不同构造函数允许在其记录中具有*相同的命名字段。*`sf2`如果你走下`Associative`分支，懒惰可以防止你出错。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-21T08:11:47.770

我不确定这是否会在这种特定情况下缩短它，但在更一般的情况下，您应该查看[Scrap Your Boilerplate](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.1.3176)。例如：

```
{-# LANGUAGE Rank2Types, DeriveDataTypeable, NoMonomorphismRestriction #-}

import Data.Generics

data SomeType
    = Unary Int
    | Associative SomeType
    | Binary SomeType SomeType
    deriving (Data, Typeable, Show)

flatten_sometype x@(Unary _) = x
flatten_sometype (Associative s) = s
flatten_sometype (Binary (Unary a) (Unary b)) = Unary $ a + b

some_func2 = let Unary n = everywhere (mkT flatten_sometype)
             in  n 
```

如您所见，通过使用`everywhere`，我只需要指定一个本地转换 - SYB 负责所有递归。当您涉及多种类型时，这真正派上用场；SYB 会很高兴地通过你*没有*转换的类型和转换它们的参数。不过要小心你使用了多少——如果过度使用它会导致大量的 GC 流失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T09:03:23.847

编写它的最短方法应该是模式匹配：

```
some_func :: SomeType -> Int
some_func (Unary n) = n
some_func (Associative s) = some_func s
some_func (Binary s1 s2) = (some_func s1) + (some_func s2) 
```

仍然有重复的片段，所以它可能无法回答你的问题......也许涉及定义`some_func`的东西`fmap some_func`？

# php - 这个脚本有什么作用？

> ID：10256945
> 
> 赞同：0
> 
> 时间：2012-04-21T06:54:45.913
> 
> 标签：php

我有一个网站，用户可以在其中上传文件以与他人共享。但首先我需要验证它们。最近有人上传了一个带有以下命令的 .php 文件：

```
‰PNG

<?php
eval(gzinflate(base64_decode("very large strings of characters")));

?> 
```

我想它可能有害，所以我没有打开它。

有谁知道它的作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T06:56:50.437

没有人能告诉你，只要做

```
<?php echo gzinflate(base64_decode("very large strings of characters")) ?> 
```

看看它**会**做什么......

编辑：现在你已经发布了我解码并粘贴在[这里的整个字符串](http://pastebin.com/BubDTsa0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T06:58:11.603

似乎攻击者的代码是 base64 编码和 gzip 压缩的。

所以首先将代码从base64编码中解码出来，然后基本上解压到一串代码。

然后在结果字符串上调用 eval ，它将执行已解码和解压缩的代码。

但是如果没有看到生成了什么代码，很难说当代码运行时它会做什么。

* * *

我解码了编码的文本。使用以下方法

**（我想现在我想到写入文件是一个坏主意。主要是如果你在 Windows 上。我想在关闭执行位的 Linux 上更安全。所以在这种情况下我有点幸运！）**

```
<?php
$test = gzinflate(base64_decode("encoded_text"));
$myFile = "testFile.txt";
$fh = fopen($myFile, 'w');
fwrite($fh, $test);
fclose($fh); 
```

我将输出写入文件，以防万一有一些随机的 html 或 javascript 可能感染我的计算机，如果我只是将其回显到我的浏览器。这可能就是您收到防病毒警告的原因。

我还不确定它的作用。

* * *

只是浏览一下代码，大约有 4,750 行代码，似乎它设置了基本身份验证。然后还有很多数据库功能和一些基本的html界面。这在 PHP 中。还有一些perl。接近尾声。

基本上它看起来是这样的：显示该图像的每个页面都会输出该代码的一部分并与您的代码一起执行它，它会尝试获取输入数据，或尝试查找会话数据和/或数据库值.

然后代码的其他部分基本上是在访问 url 时创建一个管理界面，如下所示：url?admin=1，这会带来一个 Basic Auth 身份验证。然后有一个简单的界面 phpmyadmin 类似界面，用户可以在其中尝试不同的查询并收集有关您的数据库的元数据。可能其他东西也会运行到 exec 等。

我可能是错的，但这是我通过代码得到的要点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T07:01:41.923

代码很好，您唯一需要注意的是加密的长字符串

```
< ?php eval(gzinflate(base64_decode("very large strings of characters"))); 
```

有关此类声明的参考，您可以参考

[http://php.net/manual/en/function.gzinflate.php](http://php.net/manual/en/function.gzinflate.php)

# c# - 在 Windows 8 中多目标到 Metro 和非 Metro 目标平台

> ID：10256946
> 
> 赞同：3
> 
> 时间：2012-04-21T06:54:47.557
> 
> 标签：c#, wpf, windows-8, microsoft-metro, .net-4.5

我正在创建一个简单的地铁应用程序。我还在创建同一应用程序的非 Metro 版本。

我面临的问题是VS不允许我将普通类库引用到metro应用程序中，并将metro类库引用到普通应用程序中。

Metro 和非 Metro 应用程序之间的差异与 UI 和一些不兼容的功能有关（例如 Metro 中的 FilePicker 和非 Metro 中的 OpenFileDialog）。

如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T22:05:44.617

差异比您预期的要大得多。他们正在使用 WinRT 作为清理房屋并删除由于各种原因不想再维护的 API 的机会。研究“可移植类库”，它可以让你根据你告诉 VS 目标的平台中可用的 API 的小交集创建一个 dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:36:52.707

Metro UI 不是问题：查看“Under the Hood”，您会发现命名空间和库并不相同 => METRO 不在 Windows 7 应用程序之上的另一层。如果您真的想针对这 2 个环境，请创建一个包含所有业务对象、所有数据库访问的单个类库，并编写两个不同的应用程序调用此库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T18:50:10.617

本质上，WinRT 与 Robert Levy 提到的 Win32 库是完全分开的。

事实上，当 Windows 8 在 ARM 设备上使用时，Win32 库实际上是不存在的。Internet Explorer 10 对它们的访问受限（仅由 WinRT 提供支持的 Internet 浏览器是不切实际的），但所有其他 Metro 应用程序都没有。

x86 和 x64 上的 Metro 应用程序也无法访问 Win32，因为假定相同的应用程序需要与 ARM 兼容。为了降低复杂性，微软基本上表示所有 Metro 应用程序只能访问 WinRT。Internet Explorer 是该规则的一个例外。

我想说的是：您必须分别开发这两个应用程序。以桌面为中心的应用程序完全驻留在桌面上。Metro 应用程序仅驻留在 Metro 接口中。

# ant - 不能用ant编译Nutch1.4

> ID：10256948
> 
> 赞同：0
> 
> 时间：2012-04-21T06:55:16.823
> 
> 标签：ant, hadoop, nutch

我正在尝试将 Nutch1.4 部署到 Hadoop 集群（按照[此页面](http://www.rui-yang.com/develop/build-nutch-1-4-cluster-with-hadoop/)）。我在用 ant 编译 Nutch 时遇到了一些问题。

### 问题1

当我运行 ant 命令时，出现以下错误：

> /home/xenserver/apache-nutch-1.4-bin/build.xml:71：“01/25/1971 2:00 pm”中的无效日期语法

我从文件 build.xml 的第 71 行删除属性“datetime”并再次运行 ant。然后我遇到了另一个问题。

### 问题 2

错误是：

> /home/xenserver/apache-nutch-1.4/build.xml:412：常春藤文件中的语法错误：java.text.ParseException：文件中的[http://java.sun.com/xml/jaxp/properties/schemaLanguage：/](http://java.sun.com/xml/jaxp/properties/schemaLanguage) home/xenserver/apache-nutch-1.4/ivy/ivy.xml 在 org.apache.ivy.plugins.parser.xml.XmlModuleDescriptorParser$Parser.parse(XmlModuleDescriptorParser.java:273)
> 
> ...........

上面的步骤有什么问题？有编译Nutch1.4的教程吗？需要你的帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:04:25.107

要编译 nutch 1.4，您所要做的就是`ant clean deploy`从 nutch 目录运行。输出在名为 ' `runtime`' 的目录中创建，其中包含 2 个文件夹：一个用于本地模式，另一个用于集群模式。

请检查您机器上的日期设置和`ant`安装。我认为这是解决问题的原因。你还篡改/编辑过`/home/xenserver/apache-nutch-1.4/ivy/ivy.xml`吗？请也检查该文件。

**编辑：**

在您的 Linux 机器上执行时，构建文件存在一些问题。检查这些：[this](http://osdir.com/ml/search.nutch.devel/2005-02/msg00082.html)和[this](http://comments.gmane.org/gmane.comp.search.nutch.devel/3436)。

这些是您应该在设置中验证的内容：

1.  `java version`和`ant version`：不要使用旧的。获取与您的 nutch 版本兼容的最新版本或版本。仅供参考：对于 nutch-1.4，我使用的是 apache-ant-1.8.3 和 java jdk1.6.0_18。这种组合对我来说效果很好。
2.  检查您是否安装了**JDK 而不是 JRE**
3.  检查您的`JAVA_HOME`环境变量是否指向 JDK。系统`PATH`变量必须具有`$JAVA_HOME/bin`并附`$ANT_HOME/bin`加到它。`ANT_HOM`E变量必须指向ant安装目录。
4.  您可以在任何其他构建文件上成功运行正常的 ant 目标吗？尝试使用小型 ant 构建文件。
5.  仍然面临同样的问题，使用 -v 选项运行 ant 命令。这将提供有关所面临错误的更多信息。例如。

    ant -v 清理部署

# exception-handling - Spring Web Services 和 Spring Security 异常处理

> ID：10256952
> 
> 赞同：0
> 
> 时间：2012-04-21T06:55:38.103
> 
> 标签：exception-handling, spring-security, spring-ws, wss4j

我正在尝试将 Spring 安全性中的级联异常作为 Spring Web 服务中的肥皂故障的解决方案。

我们使用 Spring Web 服务并使用`SimplePlainTextPasswordValidationCallbackHandler`. 但是，spring security 中的所有自定义异常都会在soap响应中作为“Invalid Soap Header”输出。这是相信是默认行为。

有什么方法可以覆盖此行为以将我们自定义的异常级联到 Spring WS？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:33:18.817

为此，您需要实现 EndpointExceptionResolver，因为 XwsSecurityInterceptor 的 handleValidationException 方法将异常委托给此解析器，如此[处](http://static.springsource.org/spring-ws/site/apidocs/org/springframework/ws/soap/security/AbstractWsSecurityInterceptor.html#handleValidationException(org.springframework.ws.soap.security.WsSecurityValidationException,%20org.springframework.ws.context.MessageContext))和[此处](http://static.springsource.org/spring-ws/site/reference/html/security.html#security-xws-exception-handling)所述。或者您可以像这样简单地将 SoapFaultMappingExceptionResolver 添加到您的 applicationContext.xml 中：

```
<beans>
<bean id="exceptionResolver" class="org.springframework.ws.soap.server.endpoint.SoapFaultMappingExceptionResolver">
    <property name="defaultFault" value="SERVER"/>
    <property name="exceptionMappings">
        <value>
            org.springframework.oxm.ValidationFailureException=CLIENT,Oops!Something went wrong
        </value>
    </property>
</bean>
</beans> 
```

更多信息在[这里](http://static.springsource.org/spring-ws/site/reference/html/server.html#server-endpoint-exception-resolver)

# scala - 玩2.0表单——字段“验证”方法不是会员

> ID：10256953
> 
> 赞同：10
> 
> 时间：2012-04-21T06:55:40.593
> 
> 标签：scala, validation, playframework-2.0

练习这里写的内容：[ScalaForms](http://www.playframework.org/documentation/2.0/ScalaForms)，我创建了以下表单：

```
 val personCreationForm = Form(
    tuple (
        "name" -> nonEmptyText,
        "age" -> number verifying (min(0), max(100))       /*ERROR*/
    ) verifying ("Wrong entry", result => result match {
      case (name, age) => true
    })
  ) 
```

但是，错误`verifying`指出`value verifying is not a member of (java.lang.String, play.api.data.Mapping[Int])`.

如引用的示例中所示，使用`mapping`而不是`tuple`没有区别。这里有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T21:26:53.193

根据 Scala[运算符优先级规则](https://stackoverflow.com/questions/2922347/operator-precedence-in-scala)，以字母开头的方法的优先级低于其他方法，因此当您编写时：

```
"age" -> number verifying (min(0), max(100)) 
```

编译器构建以下表达式：

```
("age" -> number) verifying (min(0), max(100)) 
```

这不是你想要的！你可以改写如下：

```
"age" -> number.verifying(min(0), max(100))
"age" -> (number verifying (min(0), max(100))) 
```

而当前的 Play 文档是错误的。谢谢你抓住它！

# image - 在经典 ASP 中上传图像并且在目录中找不到图像

> ID：10256955
> 
> 赞同：4
> 
> 时间：2012-04-21T06:56:05.613
> 
> 标签：image, file-upload, asp-classic

我正在尝试以经典的 asp 上传图像，并使用下面的代码。

```
file_path  = "/uploads/events/upload_img"
img_folder = Server.MapPath(file_path)

Set Upload = Server.CreateObject("Persits.Upload")
Upload.CodePage = 949
Upload.SetMaxSize (500 * 1024), True
Upload.OverwriteFiles = false
Upload.CreateDirectory img_folder, True
Upload.save

Upload.Files("img1") 
```

这里`img1`包含从用户获取的图像：

```
<input type="file" name="img1" /> 
```

但是它可以正确执行，但在文件夹中看不到图像 `/uploads/events/upload_img`

谁能告诉我这是为什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:57:51.230

因为您使用的是`save()`不带参数的方法，所以文件被上传到服务器的内存，而不是文件夹。

尝试这个：

```
img_folder = Server.MapPath("/uploads/events/upload_img")

Set Upload = Server.CreateObject("Persits.Upload")
Upload.CodePage = 949
Upload.SetMaxSize (500 * 1024), True
Upload.OverwriteFiles = false
Upload.CreateDirectory img_folder, True
Upload.Save(img_folder)

uploadedImg = Upload.Files("img1") 
```

这是Persits.Upload 对象引用中[Save() 方法的链接。](http://www.aspupload.com/object_upload.html#Save)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:36:18.497

下面的代码有效。只需从多部分形式发布到它。

```
=========================
EXAMPLE MULTIPART FORM
=========================

<form method="post" enctype="multipart/form-data" action="">
<input type="file" name="img1" /><input type="submit" />
</form>

=========
ASP CODE
=========

Set Upload = Server.CreateObject("Persits.Upload")
Upload.CodePage = 949              
Upload.SetMaxSize (500 * 1024), True
Upload.OverwriteFiles = False ' Generate unique names
Upload.Save "C:\path\filename.jpg"

Set File = Upload.Files(1)
uploadedImg = File.ExtractFileName

Set Upload = Nothing
Set File = Nothing 
```

# asp.net-mvc-3 - mvc3 不显眼的验证 - 产生返回带有 ValidationType 值的新 ModelClientValidationRule

> ID：10256956
> 
> 赞同：1
> 
> 时间：2012-04-21T06:56:10.047
> 
> 标签：asp.net-mvc-3, c#-4.0, unobtrusive-validation, validationattribute

我正在尝试研究如何创建一个 MinValue 属性，该属性包含在客户端工作所需的客户端验证规则 - 我有这个基于我创建的其他属性但我不确定如何将 _minValue 添加到GetClientValidationRules 方法：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = false)]
public class MinValueAttribute : ValidationAttribute, IClientValidatable
{
    private readonly int _minValue;

    public MinValueAttribute(int minValue)
    {
        this._minValue = minValue;
    }

    public override bool IsValid(object value)
    {
        return (int)value >= this._minValue;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        yield return new ModelClientValidationRule
        {
            ErrorMessage = this.ErrorMessage,
            ValidationType = "min"
        };
    }
} 
```

我也不是在寻找 Int32.MaxValue Range Rule hack，除非当然我绝对无法使用与上述代码类似的东西来做到这一点。

# java - Swing中如何避免View和Controller耦合

> ID：10256958
> 
> 赞同：6
> 
> 时间：2012-04-21T06:56:22.493
> 
> 标签：java, swing, model-view-controller, actionlistener, propertychangelistener

我最近遇到了一个问题，试图在**Swing**中实现 Model-View-Controller 。

我有一个由子面板组成的 GUI 类，这些子面板由其他子面板组成。现在在这些子子面板之一中有一个`JButton`. `ActionListener`为此，`JButton`我想在控制器中调用一个方法。为了做到这一点，我需要将控制器深入到 GUI 的内部，并传递给它所在的子面板`JButton`。然后在这个子子面板中，我需要将一个附加`ActionListener`到并通过调用我想在控制器中调用的方法来`JButton`填写。`actionPerformed()`

相信大家都看到了问题。有什么好的方法可以避免将控制器深入到 GUI 的内部。

我唯一的想法是让控制器成为单例以将其与视图分离，但我听说单例通常是邪恶的。

对此问题的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T07:40:28.000

与其传入对控制器的引用，不如让控制器*监听*视图，正如[此处](http://en.wikipedia.org/wiki/Model-view-controller)所示的*间接关联*所建议的那样。添加一个，如图所示[，](https://stackoverflow.com/a/9346946/230513)是理想的。当视图需要调用控制器时，它只需调用.`PropertyChangeListener``firePropertyChange()`

一种更方便的方法是为控制器提供一个单独的视图，用于某些操作，例如[此处](https://stackoverflow.com/a/3072979/230513)`reset()`显示的方法。

# backbone.js - 如何从backbone.js中的视图访问模型数据

> ID：10256960
> 
> 赞同：6
> 
> 时间：2012-04-21T06:56:50.103
> 
> 标签：backbone.js, backbone-views, backbone-model

我有一个名为 person 的模型：

```
 var person = Backbone.Model.extend({
      initialize: function(){
        console.log('cool');
      },
      defaults:{
          names:['a','k','d','s','h','t']
      }
    }) 
```

现在我有一个看法：

```
var person_view = Backbone.View.extend({
   model : person,
   output: function(){
      console.log(this.model.get('names'))
   }
}); 
```

创建了一个视图对象：

```
var obj = new person_view() 
```

尝试访问名称：

```
obj.output() 
```

但我得到了这个错误：

```
TypeError: Object function (){ parent.apply(this, arguments); } has no method 'get' 
```

你能告诉我如何正确地做事吗？我才刚刚开始了解backbone.js，所以请多多包涵。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T07:00:12.923

您必须先初始化模型，然后才能访问它：

```
var person_view = Backbone.View.extend({
    initialize: function() {
        this.model = new person();
    },
    output: function(){
        console.log(this.model.get('names'))
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T06:59:25.040

与其在查看视图时传递模型，不如`extend`在构建新视图时传递它：

```
var person_view = Backbone.View.extend({
  output: function(){
    console.log(this.model.get('names'))
  }
});

var obj = new person_view({
  model : new person()
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-24T09:02:04.920

当您声明“person_view”并调用其函数时，您的“person_view”无法访问任何模型（该视图所期望的），因为尚未创建模型。首先制作一个模型，然后在声明“person_view”时将其传递给视图。

```
var model_person_for_view= new person();
var obj = new person_view(model:model_person_for_view);
obj.output(); 
```

# c# - 将多个文本字符串添加到由段落分隔的选取框

> ID：10256964
> 
> 赞同：0
> 
> 时间：2012-04-21T06:57:16.600
> 
> 标签：c#, wpf, xaml, user-controls, marquee

我有一个用户控件，它创建滚动文本的动画，在我的主窗口上我这样称呼它：

```
xmlns:mar="clr-namespace:WpfApplication4.AppPages"
<mar:Feed Background="DarkGray" FontSize="12" MarqueeTimeInSeconds="8" 
          Foreground="Gray" Margin="7,383,711,6" MarqueeContent="Live Feed" 
          MarqueeType="TopToBottom"></mar:Feed> 
```

用户控件的代码如下所示：

```
 MarqueeType _marqueeType;

    public MarqueeType MarqueeType
    {
        get { return _marqueeType; }
        set { _marqueeType = value; }
    }       

    public String MarqueeContent
    {
        set { tbmarquee.Text = value; }
    }

    private double _marqueeTimeInSeconds;

    public double MarqueeTimeInSeconds
    {
        get { return _marqueeTimeInSeconds; }
        set { _marqueeTimeInSeconds = value; }
    }

    public Feed()
    {
        InitializeComponent();
        canMain.Height = this.Height;
        canMain.Width = this.Width;
        this.Loaded += new RoutedEventHandler(Feed_Loaded);
    }

    void Feed_Loaded(object sender, RoutedEventArgs e)
    {
        StartMarqueeing(_marqueeType);
    }

    public void StartMarqueeing(MarqueeType marqueeType)
    {
            TopToBottomMarquee();
    }

    private void TopToBottomMarquee()
    {
        double width = canMain.ActualWidth - tbmarquee.ActualWidth;
        tbmarquee.Margin = new Thickness(width / 2, 0, 0, 0);
        DoubleAnimation doubleAnimation = new DoubleAnimation();
        doubleAnimation.From = -tbmarquee.ActualHeight;
        doubleAnimation.To = canMain.ActualHeight;
        doubleAnimation.RepeatBehavior = RepeatBehavior.Forever;
        doubleAnimation.Duration = new Duration(TimeSpan.FromSeconds(_marqueeTimeInSeconds));
        tbmarquee.BeginAnimation(Canvas.TopProperty, doubleAnimation);
    }

public enum MarqueeType
{
    TopToBottom
} 
```

在主窗口上，我`MarqueeContent="Live Feed"`像这样设置 xaml，但是如何在后面的代码中设置内容以及如何设置多个 MarqueeContents？

例如，即使我能够从后面的代码中设置 MarqueeContent 并向其中添加了多个项目，毫无疑问它只会像您刚才阅读的文本一样一个接一个地添加它，我需要它，所以我添加的每个项目都有如果有意义的话，至少有一个段落间距。

要给出一个直观的想法，你可以在这里看到它（TopDown）：

[http://www.codeproject.com/Articles/48267/Making-a-Simple-Marquee-Text-Control-Drip-Animatio](http://www.codeproject.com/Articles/48267/Making-a-Simple-Marquee-Text-Control-Drip-Animatio)

我需要它，以便可以将多个字符串加载到其中。并且添加的每个文本字符串都由一个段落分隔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:32:09.043

如果只是将多行文本添加到一个移动块中，您可以简单地在行之间添加换行符：

```
textBlock.Text = "A line of text.\n\nAnother line of text."; 
```

或者你可以对[Inlines](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.inlines.aspx)做同样的事情：

```
textBlock.Inlines.Add(new Run("A line of text."));
textBlock.Inlines.Add(new LineBreak());
textBlock.Inlines.Add(new LineBreak());
textBlock.Inlines.Add(new Run("Another line of text.")); 
```

# c# - 为什么我的通用扩展方法说不能从 T 转换为 ..... 或 .... 到 T

> ID：10256969
> 
> 赞同：2
> 
> 时间：2012-04-21T06:58:24.307
> 
> 标签：c#, .net, extension-methods

除了我的问题

[https://stackoverflow.com/questions/10241345/any-percentage-function-in-net](https://stackoverflow.com/questions/10241345/any-percentage-function-in-net)

[https://stackoverflow.com/questions/9942202/percentage-of-each-element-in-linq](https://stackoverflow.com/questions/9942202/percentage-of-each-element-in-linq)

我想在 .Net 4.0 中创建一个通用扩展方法，它将生成列表项占列表总和的百分比。此列表将仅为数字类型。

我的代码是

```
public static T Percentage<T>(this T array) where T: ? // What should come in place of ? 
{
  double[] darray = (double[])T; // Error convert type 'T' to 'double[]'

  darray = darray.Select(x=> x * 100 / darray.Sum()).ToArray();

  return darray; // Error convert type 'double[]' to 'T'
} 
```

我想这样称呼它

```
double[] MD = {8.0,21.0,25.0,13.0,26.0,37.0,37.0,33.0,71.0,9.0};

MD = MD.Percentage().ToArray(); 
```

我究竟做错了什么;

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T07:04:49.233

不可能有你想要的类型的约束。查看[将泛型类型参数约束到数字类型](https://stackoverflow.com/questions/8157025/constraining-a-generic-type-argument-to-numeric-types)以了解详细信息。

由于没有太多数字类型（int/float/double/decimal），因此简单地提供具体实现可能更容易。

更多的选择

*   需要 IConvertable 并使用[IConvertible.ToDouble](http://msdn.microsoft.com/en-us/library/system.iconvertible.todouble.aspx)以双打形式执行所有数学运算
*   使用此处提到的[https://jonskeet.uk/csharp/miscutil/usage/genericoperators.html](https://jonskeet.uk/csharp/miscutil/usage/genericoperators.html) [C#: Generic Interface for Numbers](https://stackoverflow.com/questions/1325131/c-generic-interface-for-numbers)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T07:08:28.463

您不能通过“数字”值来限制类型。这在某种程度上是框架的限制。

你最好的办法是这样做：

```
public static IEnumerable<double> Percentage(this IEnumerable<int> values)
{
    var sum = values.Sum();
    return values.Select(v => (double)v / (double)sum).ToArray();
}

public static IEnumerable<double> Percentage(this IEnumerable<long> values)
{
    var sum = values.Sum();
    return values.Select(v => (double)v / (double)sum).ToArray();
}

public static IEnumerable<double> Percentage(this IEnumerable<double> values)
{
    var sum = values.Sum();
    return values.Select(v => v / sum).ToArray();
} 
```

本质上，您需要为要支持的每种类型生成一个重载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T07:12:30.577

还有另一种可行的方法，即传入选择器函数，该函数允许您在调用 Percentage 时转换为双精度值。这是扩展方法：

```
public static double[] Percentage<T>(this T[] array, Func<T,double> selector)
{
    var doubles = array.Select(selector);
    var sum = doubles.Sum();

    var result = doubles.Select(x => x * 100 / sum).ToArray();

    return result;
} 
```

用法：

```
 double[] MD = {8.0,21.0,25.0,13.0,26.0,37.0,37.0,33.0,71.0,9.0};
var MDPercent = MD.Percentage(x => x).ToArray(); 
```

然后你可以有一个简单的双重版本：

```
public static double[] Percentage(this double[] array)
{
    return Percentage(array, x => x);
} 
```

或一个 int 版本：

```
public static double[] Percentage(this int[] array)
{
    return array.Percentage(x => (double)x);
} 
```

哪些更易于使用：

```
var MDPercent = MD.Percentage().ToArray(); 
```

# java - 通过 Java 系统属性设置不正确的 http 代理主机时没有错误

> ID：10256971
> 
> 赞同：2
> 
> 时间：2012-04-21T06:58:34.723
> 
> 标签：java, http, proxy

我试图让我的 Java 应用程序发出的所有 http 请求都通过代理。我已经通过系统属性设置了代理主机和端口

```
 System.setProperty("http.proxyHost", "192.168.1.23")
 System.setProperty("http.proxyPort", "8081") 
```

我遇到的问题是，即使代理不可用，应用程序也会发出 http 请求。事实上，如果我输入任何无效的代理主机属性，Java 似乎会忽略代理设置并直接连接。

如果无法连接到代理，我想强制所有 http 连接使用这些代理设置并失败（通过异常）。关于如何强制这种行为的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:17:20.960

我认为您的程序根本没有引用代理设置，因此没有错误。我相信除了您的代理设置之外，您还需要将属性“http.proxySet”设置为 true 以向 JVM 指示它必须使用代理。

# javascript - 在底层，Javascript 对象是哈希表吗？

> ID：10256974
> 
> 赞同：30
> 
> 时间：2012-04-21T06:58:57.567
> 
> 标签：javascript, firefox, google-chrome, v8, spidermonkey

我想知道对象是如何在 Javascript 引擎（V8、Spidermonkey 等）中实现的。它们真的只是哈希表吗？如果是这样，他们如何处理碰撞？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-22T02:15:48.587

首先，对于不同的 JS 引擎，答案可能有些不同。另外，我假设您是在专门询问财产存储；显然对象也有很多其他状态（原型链链接是一个明显的状态）。

在 Spidermonkey 的情况下，对象基本上有一个（propname，关于属性的信息）对的链表，直到它们有太多的属性，当我相信它们仍然保留链表时（因为在实践中，顺序对 JS 中的属性很重要）但是添加一个带外哈希表，将属性名称映射到链表中的条目。

切换到哈希表可能还有其他原因；随着时间的推移，细节并未完全确定，未来可能会发生变化。

链表和哈希表实际上是跨对象共享的；只要两个对象具有相同的属性名称和相应的属性信息（不包括值，对于具有存储值的属性）并且属性以相同的顺序设置，它们就能够共享属性链表。

实际的属性值，当需要存储时，存储在对象中的一个数组中（或者更准确地说，两个数组；一个与对象内联分配，其大小在对象创建时固定，一个动态分配和调整大小根据稍后添加的属性的需要）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-28T12:47:02.540

看一个类似的问题[JavaScript VM 如何实现对象属性访问？](https://stackoverflow.com/q/6586670/4858777)和我的[回答](https://stackoverflow.com/a/62064106/4858777)。在这里，我描述了 JS 引擎使用的优化技术以及它如何影响键查找性能。希望了解这些细节能让你写出更高效的JS代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-02T20:36:57.153

可以将对象视为关联数组（又名映射、字典、哈希、查找表）。此数组中的键是对象属性的名称。

我在 MDN 上找到了这个

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Property_accessors](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Property_accessors)

在 JS 中数组是关联数组，对象也是一样的。在 JS 中，数组基本上是属性为序号的对象。

# iphone - 如何在 iphone sdk 中获取文本字段和键盘

> ID：10256976
> 
> 赞同：2
> 
> 时间：2012-04-21T06:59:02.303
> 
> 标签：iphone, ios4

我在 gpsnote 上做一个项目。如果有人有任何关于此应用程序的信息，请指导我...

我知道这段代码我希望文本字段应该与我的键盘一起出现

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:28:12.997

首先将您的内容设置在滚动视图上，并在 viewDidLoad 中设置滚动视图：

```
[scrollView setContentSize : CGSizeMake (320, 1040)]; 
```

然后在 viewWillAppear 添加以下通知：

对于显示的键盘

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWasShown:)
                                             name:UIKeyboardDidShowNotification object:nil]; 
```

用于键盘隐藏

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWillBeHidden:)
                                             name:UIKeyboardWillHideNotification object:nil]; 
```

以下是通知调用的两个函数

```
- (void)keyboardWasShown:(NSNotification*)aNotification {

NSDictionary* info = [aNotification userInfo];
CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

double keyboardHeight = kbSize.height;
double screenHeight =   [UIScreen mainScreen].bounds.size.height - 20;

if(textOrigin > screenHeight - keyboardHeight)
{
    double sofset =  textOrigin - (screenHeight - keyboardHeight);
    CGPoint offset = scrollBackGround.contentOffset;
    offset.y += sofset;
    [scrollBackGround setContentOffset:offset animated:YES];
}

}

- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    [scrollBackGround setContentOffset:CGPointMake(0, 0) animated:YES];
} 
```

在keyboardWasShown 函数中，我们所做的只是获取键盘的高度并检查textField y 轴（即函数中的textOrigin）是否大于键盘的Y 轴，而不是向上滑动包含我们的文本字段的滚动视图的内容。

现在如何获取文本字段 Y 轴。为此，您必须使用文本字段委托，以下委托将在您的文本字段成为第一响应者时触发

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    textOrigin  =   scrollBackGround.frame.origin.y + textField.frame.origin.y + 20(it is status bar height) + yourNavigationBarheight;

// Make sure to make textOrigin an ivar in your .h file
} 
```

最后在keyboardWillBeHidden中，我们正在重置滚动视图内容视图

# django - ./manage.py 对 Django 1.4 的测试给出了在 google appengine 上找不到的 Thing2Literal 导入

> ID：10256985
> 
> 赞同：1
> 
> 时间：2012-04-21T07:00:23.450
> 
> 标签：django, google-app-engine, mysql-python, google-cloud-sql

我按照这里的步骤[https://developers.google.com/cloud-sql/docs/django](https://developers.google.com/cloud-sql/docs/django)并在 django 1.3.1 上运行良好。现在到 Django 1.4 并给出了一个有趣的堆栈跟踪。我将在此处粘贴消息的相关部分

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/dumb906/woody/py/mdlr/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/dumb906/woody/py/mdlr/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/dumb906/woody/py/mdlr/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/home/dumb906/woody/py/mdlr/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/home/dumb906/woody/py/mdlr/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/dumb906/woody/py/mdlr/django/core/management/commands/test.py", line 7, in <module>
    from django.test.utils import get_runner
  File "/home/dumb906/woody/py/mdlr/django/test/__init__.py", line 5, in <module>
    from django.test.client import Client, RequestFactory
  File "/home/dumb906/woody/py/mdlr/django/test/client.py", line 21, in <module>
    from django.test import signals
  File "/home/dumb906/woody/py/mdlr/django/test/signals.py", line 2, in <module>
    from django.db import connections
  File "/home/dumb906/woody/py/mdlr/django/db/__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "/home/dumb906/woody/py/mdlr/django/db/__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "/home/dumb906/woody/py/mdlr/django/db/utils.py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "/home/dumb906/woody/py/mdlr/django/db/utils.py", line 44, in load_backend
    raise ImproperlyConfigured(error_msg)
django.core.exceptions.ImproperlyConfigured: 'google.appengine.ext.django.backends.rdbms' isn't an available database backend.
   Try using django.db.backends.XXX, where XXX is one of:
       'dummy', 'mysql', 'oracle', 'postgresql_psycopg2', 'sqlite3'
   Error was: cannot import name Thing2Literal 
```

有什么帮助吗？有人说需要编译[http://django-irc-logs.com/2012/mar/27/](http://django-irc-logs.com/2012/mar/27/)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T21:12:38.823

我遇到过同样的问题。由于问题在于从 django/db/backends/mysql/base.py 导入由 adapt_datetime_with_timezone_support 函数使用的 Thing2Literal 并根据此： [https ://code.djangoproject.com/changeset/17596/django/trunk/django/ db/backends/mysql/base.py](https://code.djangoproject.com/changeset/17596/django/trunk/django/db/backends/mysql/base.py)这仅对绕过模型层并与原始 sql 一起使用的日期时间对象很重要。所以我决定这对我来说并不重要，我弄乱了我的 django/db/backends/mysql/base.py：注释掉导致麻烦的代码（导入 Thing2Literal、adapt_datetime_with_timezone_support 函数和调用该函数的第 83 行）的当然，我将我以这种方式定制的 django 1.4 与我的项目一起上传到 appengine 并且它可以工作。

如果我根本不使用原始 sql，我将感谢那些更好地了解 django 内部结构的人的反馈，无论我所做的一切是否正常。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-23T12:04:02.590

正如您在链接的文档中看到的那样，Google App Engine 仅支持 Django 版本 1.3（实际上是 1.3.1）。

# php - PHP 学说在从模式生成数据库时将枚举转换为 varchar？

> ID：10256988
> 
> 赞同：2
> 
> 时间：2012-04-21T07:01:04.237
> 
> 标签：php, mysql, doctrine

我正在从我的模式文件生成 db。我为我的优先级字段写了以下列：priority: { type: enum(20), values: [ 'show stopper', high, medium, low ], notnull: true }

但是，当我浏览到我的 phpmyadmin 时，它只显示我的优先级类型是 varchar(20)。所以我面临排序的问题。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:02:55.790

Doctrine 不支持枚举类型。所以它会自动转换为 varchar [http://readthedocs.org/docs/doctrine-orm/en/2.0.x/cookbook/mysql-enums.html](http://readthedocs.org/docs/doctrine-orm/en/2.0.x/cookbook/mysql-enums.html)

# valgrind - Valgrind 在使用空类时报告未初始化的字节

> ID：10256989
> 
> 赞同：1
> 
> 时间：2012-04-21T07:01:13.967
> 
> 标签：valgrind

为什么 valgrind 在以下代码中报告未初始化的字节？

```
#include <valgrind/memcheck.h>

class Test {
public:
    Test() {}
};

int main(int argc, char* argv[]) {
    Test a;
    VALGRIND_CHECK_VALUE_IS_DEFINED(a);
    return 0;
} 
```

如果我添加一个成员变量来测试和初始化它，就没有输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T09:14:15.750

在您的示例中，“a”的大小将为 1：

```
printf("%ld\n",sizeof(a)); => 1 
```

`sizeof()`只报告一个类中的数据，但由于每个唯一的类都必须有自己的地址，因此添加了一个填充字节。valgrind 抱怨的原因是您正在访问填充字节，编译器没有义务将其初始化为任何值。

有关为什么类的最小大小为 1 而不是 0 的评论，请参见[此处。](http://www2.research.att.com/~bs/bs_faq2.html#sizeof-empty)

# asp.net - Ajax 控件工具包 AsyncFileUploader 控件和视图状态/会话问题

> ID：10256991
> 
> 赞同：2
> 
> 时间：2012-04-21T07:01:29.137
> 
> 标签：asp.net, session, ajaxcontroltoolkit, viewstate, asyncfileupload

在我的项目中我需要上传文件，所以我决定使用asp.net ajax 控件提供的上传器**AsyncFileUPloader**控件。有四个街区。每个块都包含两个这样的上传器，所以我决定利用 asp.net 网络用户控件的强大功能。我将所需的表单字段包装在名为 DesignUploader.ascx 的用户控件中，现在我必须将此控件的四个实例放在我的 aspx 页面上，请参阅下面的快照

![在此处输入图像描述](../Images/d3b7c0267ab5877c93296158eca723ee.png)

我的问题从这里开始，我必须将 fileurl 插入数据库，并且在将文件上传到服务器后，每个块都会生成唯一的 id 和 id 值更改。我注意到视图状态在`asyncfileuploader`清除视图状态的情况下对我不起作用，因为它会秘密回发到幕后的服务器。现在留给我的唯一选择是使用**会话** ，但是当用户一个接一个地上传两个块中的文件时，第二个/第三个连续块的文件路径会覆盖我的会话。我不知道用户可以使用多少块来上传他可能只使用 1 或他可以使用全部四个的设计。

单击页面底部会有一个最终提交按钮，我必须将数据插入数据库。

> 因此，当我尝试将数据保存到数据库时，会话存储所有记录的最近上传的文件路径的值，我的问题就在这里

我不知道我是否能够以正确的方式描述我的问题，如果不清楚，请原谅我，并在需要时发表评论。

注意：我不能更改用户界面，因为客户只坚持这样做:(

任何快速解决方法将不胜感激

谢谢 Devjosh

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T09:31:49.260

我相信您以错误的方式将文件路径保存到会话，并且无法识别没有代码的错误在哪里。一路走来，我认为最好不要在会话中保留文件路径，而是使用客户端来代替。您可以将两个隐藏字段添加到 DesignUploader.ascx 控件并在`UploadedComplete`事件处理程序中设置它们的值。

```
public partial class DesignUploader : System.Web.UI.UserControl
{
    private static readonly string AppDataPath = HttpContext.Current.Server.MapPath("~/App_Data/");

    public string FirstFilePath
    {
        get
        {
            return Server.UrlDecode( FirstFilePathHiddenField.Value);
        }
    }

    public string SecondFilePath
    {
        get
        {
            return Server.UrlDecode(SecondFilePathHiddenField.Value);
        }
    }

    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        FirstFileUpload.UploadedComplete += FirstFileUpload_UploadedComplete;
        SecondileUpload.UploadedComplete += SecondileUpload_UploadedComplete;
    }

    void FirstFileUpload_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
    {
        var fullPath = Path.Combine(AppDataPath, Path.GetFileName(e.FileName));
        FirstFileUpload.SaveAs(fullPath);
        SaveFilePathToHiddenField(FirstFilePathHiddenField.ClientID, fullPath);
    }

    void SecondileUpload_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
    {
        var fullPath = Path.Combine(AppDataPath, Path.GetFileName(e.FileName));
        SecondileUpload.SaveAs(fullPath);
        SaveFilePathToHiddenField(SecondFilePathHiddenField.ClientID, fullPath);
    }

    private void SaveFilePathToHiddenField(string fieldId, string pathValue)
    {
        var script = string.Format("top.$get('{0}').value = '{1}';", fieldId, Server.UrlEncode(pathValue));
        ScriptManager.RegisterStartupScript(this, this.GetType(), "setPath", script, true);
    }
} 
```

# android - ScrollView sv 比它的 rootView 大，调用 sv.getDrawingCache() 会导致崩溃？

> ID：10256993
> 
> 赞同：1
> 
> 时间：2012-04-21T07:01:33.857
> 
> 标签：android

这是我的简单布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <TextView
        android:id="@+id/my_long_textview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/long_text_str" />
    <Button
        android:id="@+id/capture_screen"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:onClick="captureScreen"
        android:text="Capture Screen" />
</LinearLayout>
</ScrollView> 
```

captureScreen() 函数中的以下代码使应用程序崩溃：

```
TextView tv = (TextView) findViewById(R.id.my_long_textview);
tv.setDrawingCacheEnabled(true);
tv.buildDrawingCache(); // comment out this line makes no difference
bitmap = Bitmap.createBitmap(tv.getDrawingCache()); // this is line 31 in stack trace
tv.setDrawingCacheEnabled(false); 
```

此代码有效，但我真的很喜欢捕获整个 TextView：

```
 View rv = v.getRootView();
 rv.setDrawingCacheEnabled(true);
 bitmap = Bitmap.createBitmap(rv.getDrawingCache());
 rv.setDrawingCacheEnabled(false); 
```

堆栈跟踪如下：

```
04-21 00:17:08.023: E/AndroidRuntime(27472): java.lang.IllegalStateException: Could not execute method of the activity
04-21 00:17:08.023: E/AndroidRuntime(27472):    at android.view.View$1.onClick(View.java:2072)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at android.view.View.performClick(View.java:2408)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at android.view.View$PerformClick.run(View.java:8816)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at android.os.Handler.handleCallback(Handler.java:587)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at android.os.Looper.loop(Looper.java:123)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at android.app.ActivityThread.main(ActivityThread.java:4627)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at java.lang.reflect.Method.invokeNative(Native Method)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at java.lang.reflect.Method.invoke(Method.java:521)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at dalvik.system.NativeStart.main(Native Method)
04-21 00:17:08.023: E/AndroidRuntime(27472): Caused by: java.lang.reflect.InvocationTargetException
04-21 00:17:08.023: E/AndroidRuntime(27472):    at com.gtgg.ui.TextViewAct.captureScreen(TextViewAct.java:31)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at java.lang.reflect.Method.invokeNative(Native Method)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at java.lang.reflect.Method.invoke(Method.java:521)
04-21 00:17:08.023: E/AndroidRuntime(27472):    at android.view.View$1.onClick(View.java:2067)
04-21 00:17:08.023: E/AndroidRuntime(27472):    ... 11 more
04-21 00:17:08.023: E/AndroidRuntime(27472): Caused by: java.lang.NullPointerException
04-21 00:17:08.023: E/AndroidRuntime(27472):    at android.graphics.Bitmap.createBitmap(Bitmap.java:358)
04-21 00:17:08.023: E/AndroidRuntime(27472):    ... 15 more 
```

有没有办法将大文本视图保存到位图中，即使它比 rootView 大？

非常感谢！

# ms-access - 如何判断表单是否作为子窗口启动

> ID：10256997
> 
> 赞同：2
> 
> 时间：2012-04-21T07:01:51.520
> 
> 标签：ms-access, vba

我有一个表单，它有一个按钮来启动一个新表单（添加新数据，可以在父窗口中选择）。这个子窗体也可以被视为一个父窗口，我想要做的是向这个窗口添加一个关闭按钮，但只有当它是一个子窗口时才应该是可见的。

有谁知道我如何检测窗口是否是 VBA for MS Access 中的子窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:12:12.747

您可以使用[OpenForm 方法](http://msdn.microsoft.com/en-us/library/aa141520%28v=office.10%29.aspx)的 OpenArgs 参数在表单作为子项打开时将值传递给表单。然后检查`Me.OpenArgs`将为您提供所需的信息。