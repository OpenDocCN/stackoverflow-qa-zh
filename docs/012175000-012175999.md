# StackOverflow 问答 12175000-12175999

# java - 使用 AXIS2 创建的 ADB 存根在客户端获取原始 XML SOAP 响应

> ID：12175002
> 
> 赞同：9
> 
> 时间：2012-08-29T09:41:58.023
> 
> 标签：java, soap, axis2

我使用 AXIS2 创建的 ADB 存根访问 SOAP 服务。我想记录服务返回的任何 Axis Fault 的原始 XML 响应。我可以将这些错误捕获为“ServiceError”。但是，我没有找到检索原始 XML 的方法（请参见下面的示例）。

我找到了一种使用 getOMElement 访问原始 XML 请求/响应以进行常规处理的方法（请参见下面的示例）。但是，这不适用于故障。

如何使用 ADB 存根获取原始 XML 错误？

示例 Java 代码：

```
 public void testRequest(String URL) throws AxisFault {
        MyServiceStub myservice = new MyServiceStub(URL);
        MyRequest req = new MyRequest();
        try {
            TypeMyFunctionResponse response = myservice.myFunction(req);

            // logging full soap response
            System.out.println("SOAP Response: "
                    + response.getOMElement(null,
                            OMAbstractFactory.getOMFactory())
                            .toStringWithConsume());
        } catch (RemoteException e) {
            //...
        } catch (ServiceError e) {
            // how to get the raw xml?
        }
    } 
```

示例故障响应，我想获取并记录：

```
<?xml version='1.0' encoding='UTF-8'?>
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
    <soapenv:Body>
        <soapenv:Fault>
            <soapenv:Code>
                <soapenv:Value>soapenv:Receiver</soapenv:Value>
            </soapenv:Code>
            <soapenv:Reason>
                <soapenv:Text xml:lang="en-US">service error</soapenv:Text>
            </soapenv:Reason>
            <soapenv:Detail>
                <ns1:error xmlns:ns1="http://www.somehost.com/webservices/someservice">
                    <ns1:code>500</ns1:code>
                    <ns1:messageText>some fault message</ns1:messageText>
                </ns1:error>
            </soapenv:Detail>
        </soapenv:Fault>
    </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-03T22:27:11.107

以下是您可能正在寻找的内容，`yourStub`是您通过 wsdl2java 生成的内容，并在您提出请求后使用以下行。消息设置为`lastOperation`并在您进行实际呼叫时发送：

```
request = yourStub._getServiceClient().getLastOperationContext().getMessageContext("Out")
              .getEnvelope().toString());

response = yourStub._getServiceClient().getLastOperationContext().getMessageContext("In")
              .getEnvelope().toString()); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T07:11:59.720

虽然这个问题已经得到了很好的回答，但我需要更早地这样做，并且很难找到适合我的限制的合适答案，所以我为后代添加了我自己的答案。

对于最近运行 JDK 1.4 的项目，我需要使用 Axis 2 版本 1.4.1 执行此操作，根据我所读到的内容，JAX-WS 存根不支持该项目。我最终保留了 ADB 存根，同时通过使用我自己的构建器类包装 SoapBuilder、复制输入流并将副本传递给 SoapBuilder 来捕获输入：

```
public class SOAPBuilderWrapper implements Builder {
    private String lastResponse;

    private SOAPBuilder builder = new SOAPBuilder();

    private static final int BUFFER_SIZE = 8192;

    public OMElement processDocument(InputStream inputStream,
            String contentType, MessageContext messageContext) throws AxisFault {
        ByteArrayOutputStream copiedStream = new ByteArrayOutputStream();
        try {
            byte[] buffer = new byte[BUFFER_SIZE];
            int bytesRead = inputStream.read(buffer);
            while (bytesRead > -1) {
                copiedStream.write(buffer, 0, bytesRead);
                bytesRead = inputStream.read(buffer);
            }
            lastResponse = copiedStream.toString();

        } catch (IOException e) {
            throw new AxisFault("Can't read from input stream", e);
        }
        return builder.processDocument(
                new ByteArrayInputStream(copiedStream.toByteArray()),
                contentType, messageContext);
    }

    public String getLastResponse() {
        return lastResponse;
    }
} 
```

由于各种原因，使用 axis2.xml 进行配置是有问题的，因此以编程方式添加了包装器，其中包含以下内容：

```
SoapBuilderWrapper responseCaptor = new SoapBuilderWrapper();
AxisConfiguration axisConfig = stub._getServiceClient().getAxisConfiguration();
axisConfig.addMessageBuilder("application/soap+xml", responseCaptor);
axisConfig.addMessageBuilder("text/xml", responseCaptor); 
```

这允许在调用服务后使用 responseCaptor.getLastResponse() 检索响应。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-06T15:44:14.720

与 Ducane 的回复相关：

```
response = yourStub._getServiceClient().getLastOperationContext().getMessageContext("In")
          .getEnvelope().toString()); 
```

失败，出现*com.ctc.wstx.exc.WstxIOException*异常和消息：*Attempted read on closed stream*。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-21T19:38:25.493

对于 Axis2，那些没有改变实现的奢侈/或出于 xyz 原因不想使用 JAS-WS 的人，

发现@Ducane 很有用

> ```
> request = >yourStub._getServiceClient().getLastOperationContext().getMessageContext("Out")
>          .getEnvelope().toString());
> 
> response = >yourStub._getServiceClient().getLastOperationContext().getMessageContext("In")
>          .getEnvelope().toString()); 
> ```

正如@dayer 的回答所建议的那样

> ```
> response = >yourStub._getServiceClient().getLastOperationContext().getMessageContext("In")
>      .getEnvelope().toString()); 
> ```
> 
> 失败并出现 com.ctc.wstx.exc.WstxIOException 异常和消息：>尝试在关闭的流上读取。

不确定“In”消息标签有什么问题，

但是在搜索时，发现以下 JIRA 票[https://issues.apache.org/jira/browse/AXIS2-5469](https://issues.apache.org/jira/browse/AXIS2-5469)指向[https://issues.apache.org/jira/browse/AXIS2-5202](https://issues.apache.org/jira/browse/AXIS2-5202)并在讨论中找到了一个WA 使用以下代码解决此问题，我能够收听soapRequest 的响应消息。

```
stub._getServiceClient().getAxisService().addMessageContextListener(
new MessageContextListener() {
    public void attachServiceContextEvent(ServiceContext sc,
        MessageContext mc) {}
    public void attachEnvelopeEvent(MessageContext mc) {
        try
        { mc.getEnvelope().cloneOMElement().serialize(System.out); }
        catch (XMLStreamException e) {}
    }
}); 
```

因为这里 MessageContextListner 是参数定义的匿名内部类，它可以访问所有封闭变量，所以我只是将一个字符串类变量定义为 latestSoapResponse 并存储响应以供进一步使用。

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
mc.getEnvelope().cloneOMElement().serialize(baos); 
latestSoapResponse=baos.toString(); 
```

请注意，您需要在生成肥皂请求之前添加侦听器。并且 Request MessageContext 仅在您生成soap请求后才可用。

此外，那些只想要原始soap请求响应以进行调试的人可能会看到@Sanker的回答，[这里](https://stackoverflow.com/a/3034130/1431434)是为了使用JVM参数启用Apache commons日志记录。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-03T00:00:45.027

正如 joergl 所建议的那样，我使用“SOAPHandler”将我的 ADB-stubs 更改为 JAX-WS-ones，以按照此处的描述记录请求、响应和故障：[http ://www.mkyong.com/webservices/jax-ws/jax -ws-soap-handler-in-client-side/](http://www.mkyong.com/webservices/jax-ws/jax-ws-soap-handler-in-client-side/)

我的处理程序看起来像这样，用于使用 log4j 记录格式良好的 XML：

```
public class RequestResponseHandler  implements SOAPHandler<SOAPMessageContext> {

    private static Logger log = Logger.getLogger(RequestResponseHandler.class);
    private Transformer transformer = null;
    private DocumentBuilderFactory docBuilderFactory = null;
    private DocumentBuilder docBuilder = null;

    public RequestResponseHandler() {
        try {
            transformer = TransformerFactory.newInstance().newTransformer();
            transformer.setOutputProperty(OutputKeys.INDENT, "yes");
            transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "5");
            docBuilderFactory = DocumentBuilderFactory.newInstance();
            docBuilder = docBuilderFactory.newDocumentBuilder();
        } catch (TransformerConfigurationException
                | TransformerFactoryConfigurationError
                | ParserConfigurationException e) {
            log.error(e.getMessage(), e);
        }
    }

    @Override
    public void close(MessageContext arg0) {
    }

    @Override
    public boolean handleFault(SOAPMessageContext messageContext) {
        log(messageContext);
        return true;
    }

    @Override
    public boolean handleMessage(SOAPMessageContext messageContext) {
        log(messageContext);
        return true;
    }

    private void log(SOAPMessageContext messageContext) {
        String xml = "";
        SOAPMessage msg = messageContext.getMessage();
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        try {
            msg.writeTo(out);
            xml = out.toString("UTF-8");
        } catch (Exception e) {
            log.error(e.getMessage(),e);
        }       

        String direction = "";
        Boolean outbound = (Boolean) messageContext.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY); 
        if (outbound) { 
            direction += "Request: \n"; 
        } else { 
            direction += "Response: \n";
        } 

        log.info(direction + getXMLprettyPrinted(xml));     
    }

    @Override
    public Set<QName> getHeaders() {
        return Collections.emptySet();
    }

    public String getXMLprettyPrinted(String xml) {

        if (transformer == null || docBuilder == null)
            return xml;

        InputSource ipXML = new InputSource(new StringReader(xml));
        Document doc;

        try {
            doc = docBuilder.parse(ipXML);
            StringWriter stringWriter = new StringWriter();
            StreamResult streamResult = new StreamResult(stringWriter);
            DOMSource domSource = new DOMSource(doc);
            transformer.transform(domSource, streamResult);
            return stringWriter.toString();
        } catch (SAXException | IOException | TransformerException e) {
            log.error(e.getMessage(), e);
            return xml;
        }
    }
} 
```

此外，我想在我的应用程序代码中重用原始 XML。所以我不得不将这些数据从 SOAPHandler 传输回我的客户端代码。如何做到这一点并不太明显。关于这个问题的更多信息可以在这篇文章中找到： [如何将附加字段与soapMessage一起发送到soap处理程序？](https://stackoverflow.com/questions/9404894/how-to-send-additional-fields-to-soap-handler-along-with-soapmessage/)

# javascript - 这个javascript代码有什么问题？（关闭）

> ID：12175010
> 
> 赞同：-2
> 
> 时间：2012-08-29T09:42:26.073
> 
> 标签：javascript

我正在尝试在用户单击地图（`#map-polska`）上的区域时，页面滚动到`#adresses` `div`，但它不适用于该代码，我无法解决它 - 问题出在哪里..

```
$('#map-polska').cssMap({
  size: 500,
  agentsListId: '#addresses',
  onClick: function (e) {
    $("html:not(:animated),body:not(:animated)").animate({
      scrollTop: $('#addresses').offset().top
    }, 1500);
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:49:29.143

我不知道是什么，`cssMap`但为了符合通常的 jQuery 模型，您的代码可能应该是：

```
$('#map-poland').click(function (e) {
    $("html:not(:animated),body:not(:animated)").animate({
      scrollTop: $('#addresses').offset().top
    }, 1500);
  }
).cssMap({
  size: 500,
  agentsListId: '#addresses'
}); 
```

但也许你想要的是：

```
$('#map-poland').click(function (e) {
    $("html:not(:animated),body:not(:animated)").animate({
      scrollTop: $('#addresses').offset().top
    }, 1500);
  }
).css(size: 500)
.attr('agentsListId', '#addresses'); 
```

顺便说一句，[jquery 的 css 函数](http://api.jquery.com/css/#css2)接受一个映射作为参数。

# drupal - 不使用 form_set_error() 显示 Drupal 登录错误消息

> ID：12175012
> 
> 赞同：0
> 
> 时间：2012-08-29T09:42:37.120
> 
> 标签：drupal

我创建了一个模块，该模块将一个字段添加到用户登录块表单以显示错误。我想在新字段中显示错误，而不是使用`form_set_error()`. 我可以在登录块中看到警告字段。但是当我提交错误时，它不会显示错误。

代码如下。我不明白一旦出现错误如何刷新表单的值。

```
function usermoved_form_user_login_block_alter(&$form, &$form_state) {
  $form['warning'] = array(
    '#value' => t('oops'),
    '#weight' => 11
  );
  $form['#submit'][] = 'usermoved_form_submit_code';
}

function usermoved_form_submit_code($form, &$form_state) {
  global $user;
  if (!$user->uid) {
    $form['warning']['value']= "changed to someting";
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:16:35.273

你的代码是错误的：`$form['warning']['value']`它应该使用而不是使用`$form['warning']['#value']`。即使这样做，消息（应该传递给`t()`）也不会显示给用户，因为`$form`它不是通过引用传递的，而且它不是从表单提交处理程序返回的值，它不会返回任何值。

当表单验证处理程序引发错误时，永远不会调用表单提交处理程序。如果您正在检查用户 ID 以查看用户是否尚未登录，那么您无法在表单提交处理程序中执行此操作，因为用户未登录意味着在验证阶段出现错误，并且不调用表单提交处理程序。

您可以使用的是表单验证处理程序。

```
function usermoved_form_user_login_block_alter(&$form, &$form_state) {
  $message = (empty($_SESSION['usermoved_form_user_login_block_alter']) ? t('Initial message') : $_SESSION['usermoved_form_user_login_block_alter']);

  $form['warning'] = array(
    '#value' => $message,
    '#weight' => 11
  );

  $form['#validate'][] = 'usermoved_form_validate_code';
}

function usermoved_form_validate_code($form, &$form_state) {
  if (empty($form_state['uid'])) {
    $_SESSION['usermoved_form_user_login_block_alter'] = t('The error message');
  }
  else {
    unset($_SESSION['usermoved_form_user_login_block_alter']);
  }
} 
```

`$form_state['uid']`是从[user_login_authenticate_validate()](http://api.drupal.org/api/drupal/modules!user!user.module/function/user_login_authenticate_validate/7)设置的值，Drupal 调用的第二个验证处理程序。如果未设置，则表示 Drupal 在尝试对用户进行身份验证之前出现了一些错误，或者用户没有进行身份验证。第一种情况可能发生在用户被阻止（[user_login_name_validate()](http://api.drupal.org/api/drupal/modules!user!user.module/function/user_login_name_validate/7)验证），或者用户尝试了太多次进行身份验证（参见[user_login_authenticate_validate()](http://api.drupal.org/api/drupal/modules!user!user.module/function/user_login_authenticate_validate/7)，它使用[flood_is_allowed()](http://api.drupal.org/api/drupal/includes!common.inc/function/flood_is_allowed/7)来验证用户没有尝试太多次进行身份验证） ); 当用户没有输入正确的密码时，可能会发生后一种情况。（参见[user_login_final_validate()](http://api.drupal.org/api/drupal/modules!user!user.module/function/user_login_final_validate/7)。）

作为旁注：

*   我用作默认消息，但如果您在用户登录之前没有任何消息要显示给用户，则 `t('Initial message')`可以将其替换为。`''`
*   用户登录块不会显示给已登录的用户。`$user->uid`（`$user`全局变量在哪里）始终为0，当显示登录块时，以及登录失败时；在显示登录块时检查 的值`$user->uid`没有意义。

# objective-c - 从 imagePickerController 方法在 NSURL 中保存图像

> ID：12175013
> 
> 赞同：0
> 
> 时间：2012-08-29T09:42:43.170
> 
> 标签：objective-c, nsurl, save-image

我正在使用下面的方法来获取图像。什么是“信息”格式以及如何将其保存到 NSURL 中？我想将图像的 NSURL 保存到我的核心数据中。

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
           [picker dismissModalViewControllerAnimated:YES];
           self.photo = [info objectForKey:UIImagePickerControllerEditedImage];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:38:17.133

这是字典[中所有键的描述](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html#//apple_ref/occ/intfm/UIImagePickerControllerDelegate/imagePickerController%3adidFinishPickingMediaWithInfo%3a)（`info`向下滚动到常量部分）。

*   如果您想要图像的 URL，请使用 `UIImagePickerControllerReferenceURL`.

*   如果您想将图像本身保存到您的 Core Data 存储中，请使用 `UIImagePickerControllerOriginalImage`or `UIImagePickerControllerEditedImage`，这将为您提供`UIImage` 用户选择的图片的对象。

# azure-web-app-service - 表存储 - 从 Azure 网站读取与 Azure 云服务之间是否存在成本/性能差异

> ID：12175015
> 
> 赞同：0
> 
> 时间：2012-08-29T09:42:57.293
> 
> 标签：azure-web-app-service, azure-web-roles, azure-table-storage

我已经有一个云存储帐户。我正在考虑在 node.js 中托管 Azure 网站或云服务，但我对下面列出的几点感到困惑：

如果我的存储帐户位于“欧洲北部”，并且如果我也在“欧洲北部”托管新的 Node azure 网站/云服务，那么我首先想知道列出的两种可能配置之间是否存在成本差异？

*Azure 网站 (Node.js) <---> 表存储。

*Azure 云服务（Web/Worker 角色）<-----> 表存储。

此外，Azure 网站上的云服务是否有任何性能提升？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:02:21.737

无论您拥有网站还是云服务：将存储定位在同一个数据中心时，您不会产生带宽成本。您仍然需要为出站付费（免费套餐每天为您提供 165MB 的免费出站流量；共享套餐每月为您提供 5GB 的免费出站流量，之后您支付标准费率）。

性能：您在 NIC 上有不同的可用带宽。使用云服务，每个核心的速度为 100Mbps（或 XS 为 5Mbps）。使用免费或共享层的网站，您共享 NIC。使用预留层，您应该拥有与云服务相同的带宽，因为您有预留实例。

# crystal-reports - 水晶报表：将组标题和详细信息保持在同一页面上

> ID：12175016
> 
> 赞同：14
> 
> 时间：2012-08-29T09:42:59.237
> 
> 标签：crystal-reports, crystal-reports-2008

我在子报告中有 group: header 和 details 部分。问题是：当组在页面底部时，它会产生间隙 - 标题在一页中，而 deteis 在下一页中。如何将两个部分保持在一起？

我试过以下：

> 组专家->选项->保持组在一起

它没有帮助。

在这个链接中，方法二。

> [http://www.microassist.com/tips/crystal-reports-prevent-orphaned-group-header](http://www.microassist.com/tips/crystal-reports-prevent-orphaned-group-header)

但这也无济于事。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-28T03:27:40.330

你发布的这个链接对我有帮助。

[http://www.microassist.com/tips/crystal-reports-prevent-orphaned-group-header](http://www.microassist.com/tips/crystal-reports-prevent-orphaned-group-header)

右键单击您不想成为孤立的组并选择更改组，然后打开一个小的弹出窗口，单击选项然后选中将组保持在一起复选框。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:57:25.010

在主右侧，右键单击子报告有一个名为 Keep Together 的选项。这将确保整个子报表将作为一个整体打印

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-14T20:40:09.520

部分导出不会执行您尝试执行的操作。保持组和细节在一起。如果您在主细节带和子细节带上选择它，部分导出将允许您将细节保持在一起。要将组保持在一起并在每个新页面上打印标题，请转到“报告”->“组导出”。右键单击该组并选择选项。在选项选项卡上选择保持组在一起。

# c# - 如何使用实体框架 c#.net 设置 sql 日期时间

> ID：12175017
> 
> 赞同：1
> 
> 时间：2012-08-29T09:43:06.010
> 
> 标签：c#, asp.net, sql, entity-framework, entity-framework-4

我对实体框架很陌生。不错的概念，也很快。现在在 c#.net 中工作。我被困在这里日期时间出现在图片中。

我是说....

假设我在 DB 中有用户表，其中 CreatedDate 字段在 sql db 中有 datetime 数据类型。

我的实体框架是这样工作的......当我需要将对象添加到数据库时，我只需传递 objUser.createdDate = DateTime.now。

我想如何改变一些需求变化的概念。

我需要为表中的 createdDate 字段存储 sql server DateTime()。

我怎样才能做到这一点？？？

任何想法...请帮助。以下是我项目的一个示例代码。

```
 objCustomer.RegisterDate = DateTime.Now;
            objCustRepository.AddCustomer(objCustomer); 
```

我想删除此 DateTime.Now 行并通过 sql 维护....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:53:24.057

如果您可以存储来自存储过程而不是业务逻辑的值，那么您可以通过以下方式进行尝试。

要存储 SQL`Datetime`值，您还可以`GETDATE()`在 SQL 中使用函数。

或者

您可以定义`RegisterDate`默认值`= GETDATE()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:09:03.083

如果我没记错的话，听起来您正在尝试针对与您的 sql 服务器关联的特定时区？

如果是这样，为什么在设置日期时不通过您的 c# 使用 DateTimeOffset.Now。

[请在此处查看有关该类型的博客文章。](http://blogs.msdn.com/b/bclteam/archive/2007/06/14/datetimeoffset-a-new-datetime-structure-in-net-3-5-justin-van-patten.aspx)

DateTimeOffset 代表一个特定的时间点，因此您可以使用它来转换为您的 UI 上可能需要的任何时区表示。

请注意，如果我没记错的话，它仅在 SQL Server 2008 及更高版本上受支持。:)

# javascript - 重新定位一个 div

> ID：12175020
> 
> 赞同：1
> 
> 时间：2012-08-29T09:43:13.717
> 
> 标签：javascript, html, css

我正在尝试重新定位一个 div - 带有标题“为什么打扰”的可扩展面板，因此它出现在您现在在显示器中看到的位置（在底部）。但在 HTML 中，我希望它出现在 8 个面板的顶部。

（这些面板都位于内容区域的 RH 一侧。我这样做是为了保留当前网站的 SEO，这是我为之建造的人赚了 99% 的钱的地方）。

[http://dev.assessmentday.co.uk/index.htm](http://dev.assessmentday.co.uk/index.htm)

我试过使用底部：0；但这不适用于可扩展面板。有没有办法使用 CSS 或 JS 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:54:26.297

您可以通过绝对定位实现您想要的。我不知道在此之后下拉菜单是否会起作用，但值得一试。

将此添加到现有的`contentLeft`css 规则中

```
.contentLeft {
    padding-bottom: 90px;
    position: relative;
} 
```

将此添加到“特殊” div

```
.specialdropdownPanel {
    bottom: 20px;
    position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:56:34.053

如果您希望它出于 SEO 原因出现在顶部，那么您将不得不将其移至 HTML 代码的顶部。在 DOM 加载（使用 JS 或 CSS）之后移动它不会对其 SEO 产生影响，因为 SEO 蜘蛛会以原始 HTML 中的显示方式读取 DOM。

将其移至顶部后，您可以使用 javascript 将其移至底部，使其看起来位于底部。

假设它是`<div class="contentLeft"`类中的第一个 div 元素`dropdownPanel`，您可以使用以下 jQuery：

```
$(document).ready(function(){
    $('div.dropdownPanel:first').appendTo('#content div.contentLeft');
}); 
```

这是一个工作示例：

[http://jsbin.com/ezizix/1/edit](http://jsbin.com/ezizix/1/edit)

我注意到在您的网站上您`$`禁用了 jQuery 的快捷方式，因此请务必将其替换为`jQuery`：

```
jQuery('div.dropdownPanel:first').appendTo('#content div.contentLeft'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:10:48.710

[在小提琴上](http://jsfiddle.net/gajjuthechamp/XZGpf/)使用 jQuery 来做这个例子

```
$(".contentLeft .dropdownPanel").eq(0).before($(".contentLeft .dropdownPanel").eq(7));​​​​ 
```

# sharepoint - Sharepoint 中的计算列如何工作？

> ID：12175023
> 
> 赞同：4
> 
> 时间：2012-08-29T09:43:21.630
> 
> 标签：sharepoint

Sharepoint 中的计算列如何工作？将计算列添加到列表时，下一刻它将更新列表项。它是如何发生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:11:26.737

**简短回答：**当您保存项目或更改字段设置中的计算时，它会更新值

阅读[这篇](http://sympmarc.com/2009/12/04/how-are-a-sharepoint-lists-calculated-columns-stored-and-rendered/)非常有趣的帖子。评论部分的讨论非常有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:02:10.993

SharePoint 2010 中的计算列类似于 Excel 电子表格中的公式。他们的结果是通过编写使用其他列的值（它们的名称）的公式来获得的。[正如计算字段公式](http://msdn.microsoft.com/en-us/library/bb862071.aspx)–msdn 页面中指出的那样，有各种公式可以执行计算，并附有示例和可能的结果。您还可以查看下面的两个链接，它们显示了如何实现计算列的步骤：

*   [SharePoint：创建计算列公式](http://techtrainingnotes.blogspot.fi/2010/08/sharepoint-creating-calculated-column.html)
*   [关于 SharePoint 计算列](http://blog.pathtosharepoint.com/2008/08/07/calculated-columns/)

希望这会让事情变得更清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T12:31:11.600

计算字段存储在数据库中，并在您保存输入时更新。

# c# - 使用绘图库表示 3d 对象 asp.net c#

> ID：12175024
> 
> 赞同：0
> 
> 时间：2012-08-29T09:43:22.857
> 
> 标签：c#, asp.net, opengl, gdi+

我目前正在研究一个 3d 装箱问题，我想将我的结果表示为图像。

我将结果存储为打包对象列表，如下所示

```
public class LoadedPackage
{
     private PackingObject packingObject;
     private int xloc, yloc, zloc;
     private bool flipped = false;
}

public class PackingObject
{
     private int ID, checkerMaster, height, width, depth, number;
} 
```

我想使用 xloc、yloc、zloc 和尺寸一次绘制包 1 以构建图像。是否有某种图像库方法可以做到这一点，或者我是否将被迫使用一个 openGL 解决方案，这对我来说只是一个简单的图像似乎有点过头了。

我正在考虑使用 2d gdi lib 的等距方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:54:07.010

最后，我选择了等轴测方法，并为每个包添加了一种方法，将自身从 3d 坐标转换为等轴测坐标。我希望以下代码可以帮助遇到类似困境的其他人！

一个等距立方体有 6 个点，所以我返回一个 6 个点的数组。实际上，我使用 3 个子方法返回 3 个等距多边形以供 GDI lib 处理，但为了这个答案，我将发布更通用的 6 点方法。

```
 public PointF[] convertCoords()
    {
        float x;
        float y;
        PointF p;
        PointF[] pointFs = new PointF[7];
        int x1 = 0;
        int y1 = 0;
        int z1 = 0;

        double rads = Helpers.DegreeToRadian(30);

        //point 0 in iso
        x = ((float)Math.Cos(rads) * xloc) + ((float)Math.Cos(rads) * yloc);
        y = ((float)Math.Sin(rads) * yloc) + zloc - ((float)Math.Sin(rads) * xloc);
        y = (-y) + 250;

        p = new PointF(x,y);
        pointFs[0] = new PointF(p.X,p.Y);
        //point 1 in iso
        x1 = xloc + packingObject.Depth;
        y1 = yloc;
        z1 = zloc;

        x = ((float)Math.Cos(rads) * x1) + ((float)Math.Cos(rads) * y1);
        y = ((float)Math.Sin(rads) * y1) + z1 - ((float)Math.Sin(rads) * x1);
        y = (-y) + 250;

        p = new PointF(x, y);
        pointFs[1] = new PointF(p.X, p.Y);
        //point 2 in iso
        x1 = xloc + packingObject.Depth;
        y1 = yloc;
        z1 = zloc + packingObject.Height;

        x = ((float)Math.Cos(rads) * x1) + ((float)Math.Cos(rads) * y1);
        y = (-((float)Math.Sin(rads) * x1)) + ((float)Math.Sin(rads) * y1) + z1;
        y = (-y) + 250;

        p = new PointF(x, y);
        pointFs[2] = new PointF(p.X, p.Y);
        //point 3 in iso
        x1 = xloc;
        y1 = yloc;
        z1 = zloc + packingObject.Height;

        x = ((float)Math.Cos(rads) * x1) + ((float)Math.Cos(rads) * y1);
        y = (-((float)Math.Sin(rads) * x1)) + ((float)Math.Sin(rads) * y1) + z1;
        y = (-y) + 250;

        p = new PointF(x, y);
        pointFs[3] = new PointF(p.X, p.Y);
        //point 4 in iso
        x1 = xloc;
        y1 = yloc + packingObject.Width;
        z1 = zloc + packingObject.Height;

        x = ((float)Math.Cos(rads) * x1) + ((float)Math.Cos(rads) * y1);
        y = (-((float)Math.Sin(rads) * x1)) + ((float)Math.Sin(rads) * y1) + z1;
        y = (-y) + 250;

        p = new PointF(x, y);
        pointFs[4] = new PointF(p.X, p.Y);
        //point 5 in iso
        x1 = xloc + packingObject.Depth;
        y1 = yloc + packingObject.Width;
        z1 = zloc + packingObject.Height;

        x = ((float)Math.Cos(rads) * x1) + ((float)Math.Cos(rads) * y1);
        y = (-((float)Math.Sin(rads) * x1)) + ((float)Math.Sin(rads) * y1) + z1;
        y = (-y) + 250;

        p = new PointF(x, y);
        pointFs[5] = new PointF(p.X, p.Y);
        //point 6 in iso
        x1 = xloc + packingObject.Depth;
        y1 = yloc + packingObject.Width;
        z1 = zloc;

        x = ((float)Math.Cos(rads) * x1) + ((float)Math.Cos(rads) * y1);
        y = (-((float)Math.Sin(rads) * x1)) + ((float)Math.Sin(rads) * y1) + z1;
        y = (-y) + 250;

        p = new PointF(x, y);
        pointFs[6] = new PointF(p.X, p.Y);

        return pointFs;
    } 
```

# wpf - 在 ViewModel 中更改 TextBlock 的文本时运行动画

> ID：12175025
> 
> 赞同：1
> 
> 时间：2012-08-29T09:43:26.920
> 
> 标签：wpf, animation, data-binding, mvvm

我正在按照 MVVM 模式制作 WPF 应用程序。我有一个按钮和文本块。TextBlock 仅在其文本不为空时显示。应用程序开始时文本为空，文本块未显示。当我单击按钮设置示例文本并显示文本块时。当我再次单击按钮文本设置为空和文本块隐藏。

现在我想要的是，当设置文本时，开始动画（褪色）不透明度在 5 秒内从 0 变为 1。

这是我的 XAML

```
<TextBlock Text="{Binding StatusMessage}" Visibility="{Binding IsStatusMessageVisible}" />
<Button Content="UpdateText" Command="{Binding UpdateTextCommand}" /> 
```

这是我的 ViewModel。

```
 private string _statusMessage;
    public string StatusMessage
    {
        get { return _statusMessage ?? (_statusMessage = string.Empty); }
        set
        {
            _statusMessage = value;
            NotifyOfPropertyChange(() => IsStatusMessageVisible);
            NotifyOfPropertyChange(() => StatusMessage);
        }
    }

    public System.Windows.Visibility IsStatusMessageVisible
    {
        get
        {
            return (string.IsNullOrEmpty(StatusMessage))
                ? System.Windows.Visibility.Collapsed
                : System.Windows.Visibility.Visible;
        }
    }

    public void UpdateText()
    {
        if (string.IsNullOrEmpty(StatusMessage))
            StatusMessage = Properties.Resources.WaitMessageStatus;
        else
            StatusMessage = string.empty;
    } 
```

我只想在设置 StatusMessage 文本时运行动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:12:59.457

首先，摆脱视图模型上的“可见性”属性，它不属于那里......它应该是一个布尔值。然后，为您的`TextBlock`. 在该样式中，添加`DataTrigger`以绑定到布尔“IsVisible”属性。在 的内部`DataTrigger`，创建一个故事板：

```
<DataTrigger.EnterActions>
    <BeginStoryboard>
        <Storyboard>
            <!--Animation code in here />
        </Storyboard>
    </BeginStoryboard>
</DataTrigger.EnterActions> 
```

有关如何制作不透明动画的示例，只需谷歌即可...但这是[一种方法](http://tarundotnet.wordpress.com/2011/03/18/wpf-tutorial-change-opacity-using-animation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:09:29.180

按着这些次序：

1.  在 ViewModel 中声明一个 TextChanged 事件
2.  在 StatusMessage 属性的 set 方法中，在“_statusMessage = value;”行之前 if (_statusMessage != value && !string.IsNulOrEmpty(value));
3.  在您的 XAML 中，创建一个 StoryBoard 以更改 TextBlock 的不透明度
4.  在 XAML 中，将 ControlStoryBoardBehavior 添加到 TextBlock，然后选择 TextChanged 事件和 StoryBoard

# javascript - 递归运行使用 XMLHttpRequest 下载的 JavaScript

> ID：12175027
> 
> 赞同：2
> 
> 时间：2012-08-29T09:43:28.290
> 
> 标签：javascript, ajax, scripting, download

是否可以更改此代码，因此如果[http://www.myurl.com](http://www.myurl.com)重定向到应该运行的 js 文件，它将递归工作？

```
function include(scriptUrl)
{
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", scriptUrl);
        xmlhttp.onreadystatechange = function()
        {
            if ((xmlhttp.status == 200) && (xmlhttp.readyState == 4))
            {
                eval(xmlhttp.responseText);
            }
        };
        xmlhttp.send();
}
include("http://www.myurl.com"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:11:18.993

为什么不这样做：

```
$("head").append("<script src='http://myurl.com' type='text/javascript'></script>"); 
```

当然你可以不用 jquery 来做，但这就是它的要点。如果您只是从只需要 GET 参数（如果有的话）的 URL 中提取，那么只需添加一个包含它的新脚本元素就更容易（也更安全）。

这也将解决您的重定向问题，因为浏览器将遵循重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:07:21.370

当 URL 将您重定向到另一个位置时，它可能会给您 301[状态](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)而不是 200 状态。在这种情况下，您的支票应该是：

```
if ((xmlhttp.status == 200 || xmlhttp.status == 301) && xmlhttp.readyState == 4) 
```

或者您可以选择允许除错误状态之外的所有状态：

```
if (xmlhttp.status < 400 && xmlhttp.readyState == 4) 
```

# c# - 使用类来存储游戏数据，最佳实践？

> ID：12175029
> 
> 赞同：2
> 
> 时间：2012-08-29T09:43:31.183
> 
> 标签：c#, class, instance

我使用 Visual C# 2010 express。我正在开发一款游戏，并且遇到了一个小的新手问题。问题是，我想我们正在处理一种最佳实践类型的情况，而我真正帮助过的几本初学者书籍都没有，所以我希望你们能做到。

所以，我有两种形式，一种是启动画面/启动形式，另一种是主游戏窗口。我创建了一个包含所有世界数据的类，当用户在第一个屏幕中单击“新游戏”时，将生成该类的一个新实例并填充数据。

到现在为止还挺好。

newgame 按钮除了创建世界实例外，还打开了主游戏窗口。问题是，在主游戏窗口中，当我尝试使用游戏世界实例的属性时，它说它在此上下文中不存在。

所以，如果我做对了，创建的实例只存在于第一个表单类中......对吗？

所以如果我想移动整个数据，我是否应该序列化并保存世界级的实例数据，并以第二种形式加载它？或者我应该如何处理这个问题。

我知道这是一个非常新手的问题，我可以破解它来工作，但问题是 - 我真的觉得我必须了解我所做的一切。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:46:09.877

您需要在游戏表单上创建一个构造函数，该构造函数接受您的世界类的实例并将其分配给相同类型的字段 - 游戏表单方法可以访问该字段。

```
World world;

// constructor
public GameForm (World world)
{
  this.world = world;
}

// Can now use `world` in all `GameForm` methods 
```

代替构造函数注入（如我在示例中所示），您可以使用[属性注入](http://forum.springsource.org/showthread.php?19914-Difference-between-constructor-injection-and-property-injection)，尽管我更喜欢前者（倾向于确保正确初始化 - 尽管您可能想要检查是否`null`传入）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:46:18.137

如果在启动画面中有世界数据对象的引用，你可以将它分配给主画面中的一个公共成员，或者通过构造函数将它传递给主画面。

所以在启动画面中

```
FrmMain frmMain = new FrmMain();
frmMain.WorldData = this.WorldData; 
```

如果它是启动画面的实例成员

或者类似的东西

```
FrmMain frmMain = new FrmMain();
frmMain.WorldData = new WorldData(); 
```

甚至

```
FrmMain frmMain = new FrmMain(this.WorldData); 
```

或者

```
FrmMain frmMain = new FrmMain(new WorldData()); 
```

使用 FrmMain 构造函数作为

```
public FrmMain(WorldData worldData)
{
    this.m_WorldData = worldData;
} 
```

看看在[表单之间传递数据](http://www.codeproject.com/Articles/14122/Passing-Data-Between-Forms)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T09:51:09.597

假设您只使用 Windows 窗体，而不是 XNA 或类似的框架，其中没有 winforms。

启动形式：

```
void StartButton_Click(object sender, EventArgs e)
{
    GameWorld gw = new GameWorld();
    // Initialize gw instance here

    GameForm mainForm = new GameForm(gw);
    mainForm.Show();
} 
```

并在游戏表单中添加一个构造函数：

```
public class GameForm
{
    private GameWorld _gw;
    public GameForm()
    {
        InitializeComponent();
    }
    public GameForm(GameWorld gw) : this()
    {
        _gw = gw;
    }
} 
```

此时您可以在游戏表单中使用私有变量_gw。

另外，我建议通过构造函数传递 GameWorld 实例，而不是属性，因为该值对表单至关重要。通常，属性可能更适合提供一种调整某些行为的方法，并且任何构造函数参数都可以被视为对象正常工作的必需参数。您还可以将默认构造函数（没有参数的构造函数）设为私有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T10:37:01.060

根据数据的大小以及世界对象类是否可序列化，您可能会考虑缓存它。然后每个需要数据的表单都可以在需要时从缓存中获取。

# python - 如果给定函数列表，则自动使用列表理解/map() 递归

> ID：12175031
> 
> 赞同：4
> 
> 时间：2012-08-29T09:43:36.903
> 
> 标签：python, recursion, list-comprehension

作为 Mathematica 用户，我喜欢自动“遍历列表”的函数（正如 Mathematica 人所说的那样 - 请参阅[http://reference.wolfram.com/mathematica/ref/Listable.html](http://reference.wolfram.com/mathematica/ref/Listable.html)）。这意味着如果给函数一个列表而不是单个值，它会自动使用每个列表条目作为参数并返回结果列表 - 例如

```
myfunc([1,2,3,4]) -> [myfunc(1),myfunc(2),myfunc(3),myfunc(4)] 
```

我在 Python 中实现了这个原理，如下所示：

```
def myfunc(x):    
    if isinstance(x,list):
        return [myfunc(thisx) for thisx in x]
    #rest of the function 
```

这是一个好方法吗？你能想到这个实施或整体战略的任何缺点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T09:57:48.210

如果这是你要在很多函数中做的事情，你可以使用 Python 装饰器。这是一个简单但有用的。

```
def threads_over_lists(fn):
    def wrapped(x, *args, **kwargs):
        if isinstance(x, list):
            return [fn(e, *args, **kwargs) for e in x]
        return fn(x, *args, **kwargs)
    return wrapped 
```

这样，只需`@threads_over_lists`在函数之前添加该行即可使其行为如此。例如：

```
@threads_over_lists
def add_1(val):
    return val + 1

print add_1(10)
print add_1([10, 15, 20])

# if there are multiple arguments, threads only over the first element,
# keeping others the same

@threads_over_lists
def add_2_numbers(x, y):
    return x + y

print add_2_numbers(1, 10)
print add_2_numbers([1, 2, 3], 10) 
```

您还应该考虑是否希望它仅对列表进行矢量化，还是对其他可迭代对象（如元组和生成器）进行矢量化。[这](https://stackoverflow.com/questions/1952464/in-python-how-do-i-determine-if-a-variable-is-iterable)是一个有用的 StackOverflow 问题，用于确定这一点。不过要小心 - 字符串是可迭代的，但您可能不希望函数对其中的每个字符进行操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T09:58:41.643

这是一个很好的方法。但是，您必须为您编写的每个函数执行此操作。为避免这种情况，您可以使用这样的[装饰器](http://www.python.org/dev/peps/pep-0318/)：

```
def threads(fun):
  def wrapper(element_or_list):
    if isinstance(element_or_list, list):
      return [fun(element) for element in element_or_list]
    else:
      return fun(element_or_list)

  return wrapper

@threads
def plusone(e):
  return e + 1

print(plusone(1))
print(plusone([1, 2, 3])) 
```

# c# - 如何为 ASP.net MVC4 Razor 模板实现滑块和 3d 饼图？

> ID：12175036
> 
> 赞同：-1
> 
> 时间：2012-08-29T09:43:53.277
> 
> 标签：c#, asp.net-mvc

我正在使用 ASP.net MVC4 开发应用程序。我的用例需要实现滑动条，其值的变化会影响 3d 饼图。我在网上找不到示例示例或实现。如果有人可以对此提供见解，我将提供很大的帮助。期待尽快收到大家的来信。提前致谢：

以下是有关使用 MVC4 ASP.net C# 实现的滑块和饼图的详细信息。

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Slider/Slider.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Slider/Slider.aspx) http://www.i36.tinypic.com/2wduhkn.png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:27:10.003

您可以使用[Jquery UI Slider](http://jqueryui.com/demos/slider/)作为滑块，使用[HighCharts 饼图](http://www.highcharts.com/demo/pie-gradient)作为图形。

# firefox - 使用 Firefox 14 时，WebDriver 的 sendKeys() 方法在 input-field 中不填写“(”

> ID：12175038
> 
> 赞同：0
> 
> 时间：2012-08-29T09:44:01.173
> 
> 标签：firefox, webdriver, selenium-webdriver, sendkeys, input-field

我正在使用 webdriver 来填写输入字段，由于某种原因，所有文本都被插入，但“（”。

```
findElementById("elementId").sendKeys("This is a text"); -> This is a text
findElementById("elementId").sendKeys("method().getName()"); -> method).getName)
findElementById("elementId").sendKeys("(((((((("); -> 
findElementById("elementId").sendKeys("(((aaaa"); -> aaaa 
```

该错误似乎只发生在 Firefox 14 中。当我们针对 Firefox 12 运行测试时，它工作正常。

知道为什么会出现这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T11:00:50.283

似乎问题出在 jQuery UI 自动完成插件上。出于某种奇怪的原因，它将“（”解释为“ENTER”。

# android - 由于膨胀类错误，无法开始活动

> ID：12175043
> 
> 赞同：0
> 
> 时间：2012-08-29T09:44:15.930
> 
> 标签：android, exception, layout

我`java.lang.OutOfMemoryError`很少遇到异常。我想知道根本原因可能是什么。

的内容`android:background="@drawable/mydrawablebackgroundg"`是

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
    <solid android:color="@android:color/transparent"/>    

    <stroke android:width="2dp"
            android:color="@android:color/black"
            />

    <padding android:left="4dp"
             android:top="4dp"
             android:right="4dp"
             android:bottom="4dp"
             /> 

    <corners android:bottomRightRadius="1dp" android:bottomLeftRadius="1dp" 
     android:topLeftRadius="1dp" android:topRightRadius="1dp"/> 
</shape> 
```

导致异常的布局，第 86 行开启

```
<RelativeLayout
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:layout_above="@+id/mylayout" >

     <ImageView
          android:id="@+id/myimageview"
          style="@style/myimageview_style"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_centerHorizontal="true"
          android:scaleType="fitCenter" android:layout_centerVertical="true"
          android:background="@drawable/mydrawablebackground"
          android:src="@drawable/oohsmiley" />
</RelativeLayout> 
```

# jira - JIRA 4.0 许可证是否适用于 JIRA 5.1？

> ID：12175045
> 
> 赞同：1
> 
> 时间：2012-08-29T09:44:25.670
> 
> 标签：jira

JIRA 从 4.0.x 升级到 JIRA 5.1.3 - 相同的运行许可证可以工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:59:46.697

Jira 许可证包括 12 个月的维护（更新/支持），在此期间您无需购买新许可证即可免费更新。在这 12 个月之后，您可以自由使用您的 Jira，但**不能**升级它。要了解更多信息，请查看[Jira 的许可信息](http://www.atlassian.com/licensing/jira)。

JIRA 商业/学术许可授权您：（对于 Jira 5.0）

*   在 1 台服务器上的生产环境中部署 JIRA 的单个实例 无限的项目和问题
*   永久使用 JIRA
*   软件维护 12 个月 - 包括所有更新和在线支持（在当地工作时间来自澳大利亚悉尼和美国旧金山）
*   完整的源代码（在允许广泛定制的开发者源代码许可下）
*   许可费按“活跃用户”的数量计算。根据定义，JIRA 中的活动用户是系统中具有“JIRA 用户”全局权限的任何用户帐户，即可以登录的任何人。所有许可证都允许无限制的“匿名用户”。

# jsf - 非 ajax 请求的 Primefaces 就地问题

> ID：12175047
> 
> 赞同：2
> 
> 时间：2012-08-29T09:44:33.267
> 
> 标签：jsf, jsf-2, primefaces

我正在使用 primefaces 就地编辑器。（尝试过 primefaces 3.2、3.3、3.4RC1 和 3.4 快照）

当通过非 ajax 请求提交表单时，表单中的某些其他必填字段未填写，则页面应重新加载并显示所需消息。但实际发生的是：与 page-reload 和 requiredMessage 一起，就地编辑器已经显示出来了。如何解决这个问题呢？

**重现问题的示例代码**

```
<h:form prependId="false">
    <p:inplace editor="true" widgetVar="X">
        <p:inputTextarea value="#{smsAlertBean.alertText}" />
    </p:inplace>
</h:form>
<h:form prependId="false">
    <p:selectOneMenu required="true" requiredMessage="Please select">
                <!-- your values -->
    </p:selectOneMenu>
    <p:commandButton value="Submit" action="#{smsAlertBean.dummyAction}" ajax="false" />
</h:form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:50:30.957

我敢打赌这是`<p:inplace>`. 从`InplaceRenderer#encodeMarkup()`方法：

```
boolean validationFailed = context.isValidationFailed();
String displayStyle = validationFailed ? "none" : "inline";
String contentStyle = validationFailed ? "inline" : "none"; 
```

它不检查验证失败是否与“自己的”表单有关，因此无论提交的表单如何，都将始终显示在验证失败上。除了编辑 PrimeFaces 源代码、创建自定义渲染器和/或发布错误报告之外，您没有什么可以做的。

您可以通过在`widgetVar`. 它具有`cancel()`关闭编辑器的功能。

```
<p:commandButton binding="#{foo}" value="Submit" action="#{smsAlertBean.dummyAction}" ajax="false" />
<h:outputScript rendered="#{param.containsKey(foo.clientId)}">X.cancel();</h:outputScript> 
```

*（因此，此脚本在实际按下命令按钮时呈现）*

然而，这对慢速机器/浏览器只有一个丑陋的影响。就地编辑器闪烁。考虑[将其作为错误报告](http://code.google.com/p/primefaces/issues/list)给 PrimeFaces 人员，`InplaceRenderer`应首先检查验证失败是否与自己的表单有关。

# javascript - 我应该如何处理一个看起来像这样的对象

> ID：12175050
> 
> 赞同：3
> 
> 时间：2012-08-29T09:44:41.653
> 
> 标签：javascript, jquery, underscore.js

我需要在表单中显示错误。

错误可以附加到 input-name 表单中，以防子级中定义的错误，这是常见的情况 (1)。

但是可能发生错误是在 json 对象的根节点中定义的 (2)。
在这种情况下，它应该附加到 formElement。

以下代码 (3) 适用于情况 (1) 但不适用于情况 (2)。

我应该如何修改它以使其在两种情况下都能正常工作？
PS：我使用的是下划线和 jquery。

* * *

(1)

```
var xhrObj_1 = JSON.parse('{ "children":{"points":{"errors":["This value should not be blank."]},"message":[],"recipient_id":{"errors":["This value should not be blank."]}}}'); 
```

* * *

(2)

```
var xhrObj_2 = JSON.parse('{ "errors":["This form should not be …."], "children":{"points":{"errors":["This value should not be blank."]},"message":[],"recipient_id":{"errors":["This value should not be blank."]}}}'); 
```

* * *

(3)

```
var parser = function (object) {
    _.each(object, function (xhrObject, name) {
        console.log(xhrObject)

        if (xhrObject.errors) {
            var inputElement = element.find('[name="' + name + '"]');

            inputElement.closest('.control-group')
                .addClass('error');

            parserError(xhrObject.errors, inputElement);

        } else {
            parser(xhrObject); // it is ok for xhrObj_1
                               // it fails for xhrObj_2
        }
    });
};

// example with xhrObj_2 which does not work
parser({
    "errors": ["errro1"],
    "children": {
        "points": {
            "errors": ["This value should not be blank."]
        },
        "message": [],
        "recipient_id": {
            "errors": ["This value should not be blank."]
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:31:24.247

您应该在顶层开始递归：

```
var xhr = JSON.parse("…");

(function recurse(obj, name) {
    if (obj.errors) {
        var inputElement = element.find('[name="' + name + '"]');
        inputElement.closest('.control-group').addClass('error');
        parserError(obj.errors, inputElement);
    }
    if ("children" in obj)
        for (var prop in obj.children)
            recurse(obj.children[prop], prop);
})(xhr, "top"); 
```

# cocoa-touch - UITableView 获取滚动速度

> ID：12175051
> 
> 赞同：2
> 
> 时间：2012-08-29T09:44:42.677
> 
> 标签：cocoa-touch, uitableview

我有带有图像的表格单元格，我希望它们开始加载，一旦滚动速度下降到阈值左右

但是，如何确定 UITableView 的当前滚动速度？

我找到了一个

```
tableView.isDecelerating 
```

但是我想加载图像，滚动速度很慢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T06:28:11.300

这对我有用（在 cellForRowAtIndexPath 回调中）。如果速度低于 1000 像素/秒，我会加载图像：

```
static double prevCallTime = 0;
static double prevCallOffset = 0;

//Simple velocity calculation
double curCallTime = CACurrentMediaTime();
double timeDelta = curCallTime - prevCallTime;
double curCallOffset = self.tableView.contentOffset.y;
double offsetDelta = curCallOffset - prevCallOffset;
double velocity = fabs(offsetDelta / timeDelta);
NSLog(@"Velocity: %f", velocity);
prevCallTime = curCallTime;
prevCallOffset = curCallOffset; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:49:33.790

如果您的目标是 iOS >=5，您可以获得底层`UIPanGestureRecognizer`，然后询问它的速度

```
CGPoint velocity = [tableView.panGestureRecognizer velocityInView:tableView]; 
```

# jquery - jQuery - 按其值查找单选按钮

> ID：12175052
> 
> 赞同：3
> 
> 时间：2012-08-29T09:44:49.457
> 
> 标签：jquery

我正在为这个挠头。

HTML：

```
<form>
      <input name="changes" type="radio" value="2012-05-18T16%3A53%3A00.000000000000%2B0100">
      <span>2012-05-18 16:53:00 +0100</span>
      <input name="changes" type="radio" value="2012-05-29T16%3A51%3A00.000000000000%2B0100">
      <span>2012-05-29 16:51:00 +0100</span>
      <input name="changes" type="radio" value="2012-05-31T17%3A30%3A00.000000000000%2B0100">
      <span>2012-05-31 17:30:00 +0100</span>
      <input name="changes" type="radio" value="2012-06-01T16%3A30%3A00.000000000000%2B0100">
      <input id="view-change" type="button" value="View">
</form> 
```

在 Chrome JavaScript 控制台中：

```
var today = "2012-05-18T16%3A53%3A00.000000000000%2B0100"
$('input[value="2012-05-18T16%3A53%3A00.000000000000%2B0100"]') -> Finds object
$('input[value=today]') -> Nothing 
```

嗯？为什么我不能使用 a 选择输入`var`？

PS。我已经确认，`jQuery.type(today)`=`string`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:47:52.700

Try:

```
$('input[value="'+today+'"]') 
```

See [jsfiddle](http://jsfiddle.net/AZkKT/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T09:46:48.010

你应该这样做：

```
$('input[value="' + today + '"]'); 
```

在 php 中，您可以将 vars 插入到字符串中，它们将被替换为它们的值，但在 javascript 中则不行。您需要将字符串部分与变量的内容连接起来以使其工作。现在您只是在寻找一个值为（字面意思）'today' 的输入，而不是 var 'today' 的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:46:53.230

你要：

```
$('input[value=' + today + ']') 
```

注意今天的字符串没有引号或括号。如果是这样，您将不得不逃脱它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T09:51:34.850

```
var today = "2012-05-18T16%3A53%3A00.000000000000%2B0100"
$('input[value="2012-05-18T16%3A53%3A00.000000000000%2B0100"]')
$('input[value=today]') 
```

在这里，您将 'today' 作为字符串以将其用作变量，您应该给出类似

```
$('input[value='+today+']') 
```

它应该工作！

# android - 如何在 Android 中使用 csv 在 SQLite 中导入/导出数据

> ID：12175054
> 
> 赞同：1
> 
> 时间：2012-08-29T09:44:54.823
> 
> 标签：android, sqlite, csv

如何在 Android 应用程序中将数据从 SQLite 导出/导入到 CSV？我尝试搜索 Google，但没有任何代码适合我。

# android - androidpn 连接到服务器和普通套接字连接有什么区别？

> ID：12175067
> 
> 赞同：0
> 
> 时间：2012-08-29T09:45:33.213
> 
> 标签：android, connection, push

我知道移动设备上长连接是耗电的，那么androidpn在耗电上和正常连接一样吗？那么androidpn push只省流量不省电？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:03:17.880

并非所有为推送通知提供基于 XMPP 服务的实现在移动设备上都具有相同的电池消耗。

在此响应中，您估计了持久 TCP 连接可以消耗多少电池：[Android 是否支持近乎实时的推送通知？](https://stackoverflow.com/questions/1243066/does-android-support-near-real-time-push-notification)

具体细节就得修改androidipn客户端代码了。

问候

# excel - 在使用 excelreader.Asdataset() 将 excel 转换为数据集时，有时在 excel 中读取一个空单元格后，下一个单元格被读取为 System.DBNull

> ID：12175070
> 
> 赞同：1
> 
> 时间：2012-08-29T09:45:51.517
> 
> 标签：excel

我正在使用以下代码将 excel 文件数据转换为数据集
**if (String.Compare(Path.GetExtension(filePath), ".xlsx",StringComparison.OrdinalIgnoreCase) == 0){excelReader = ExcelReaderFactory.CreateOpenXmlReader(stream); if (excelReader != null) {
excelReader.IsFirstRowAsColumnNames = true;var dsresult = new DataSet();
尝试 { dsresult = excelReader.AsDataSet(); }}}** 但有时，在 excel 中读取一个空单元格后，下一个单元格被读取为 System.DBNull 例如 excel 中的数据如下 Col A = 1，Col B 为空白，Col C = 2 转换为数据集值后dataset 将是数据集值：Col A = 1，Col B 为空白，Col C 为空白

搜索后似乎excel阅读器有问题，请为此问题提出一些适当的解决方案或至少解决方法

谢谢迪帕克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T19:58:29.370

旧版本的 Excel 数据阅读器似乎存在问题，我遇到了与您相同的问题，尝试了 excelreader.Asdataset() 并尝试使用 excelReader.Read() 手动循环，但我仍然得到空结果。一旦我将 dll 更新到 2.1 版，我就解决了这个问题。

# c# - 如何在vc++6.0中使用vs2008 [VC++9](托管代码)静态库

> ID：12175076
> 
> 赞同：0
> 
> 时间：2012-08-29T09:46:12.607
> 
> 标签：c#, c++

我有 C#、VB.net 和 VC++（VS 2008）中的加密解密代码，任何人都可以解密任何人的加密文件。

现在的要求是，我必须在 VC++ 6.0 中使用 VC++ (VS 2008) 静态库文件。

或建议任何其他替代方法（不带 dll）

```
namespace RijndaelEncDec
{

    void Rijndael::LN_EncryptFile(String^ fileSource, String^ fileDestination, String^ password)
    {
        // Declare the streams used
        // to encrypt to an in memory
        // array of bytes.

        CryptoStream^   cryptoStream;

        FileStream^ fsIn;
        FileStream^ fsOut ;

        // Declare the RijndaelManaged object
        // used to encrypt the data.
        RijndaelManaged^ RijndaelCipher;

        try
        {           
            fsIn=gcnew FileStream(fileSource, FileMode::Open, FileAccess::Read);
            fsOut = gcnew FileStream(fileDestination, FileMode::Create, FileAccess::Write);

            array<Byte>^  salt = gcnew array<Byte>(13){ 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0xF1, 0xF0, 0xEE, 0x21, 0x22, 0x45 };
            Rfc2898DeriveBytes ^secretKey =gcnew Rfc2898DeriveBytes(password,salt);

            RijndaelCipher = gcnew RijndaelManaged();
            RijndaelCipher->Padding = PaddingMode::PKCS7;
            RijndaelCipher->Mode=CipherMode::CBC;
            RijndaelCipher->BlockSize=128;
            RijndaelCipher->Key = secretKey->GetBytes(32);
            RijndaelCipher->IV = secretKey->GetBytes(16);

            ICryptoTransform^ encryptor = RijndaelCipher->CreateEncryptor();
            cryptoStream = gcnew CryptoStream(fsOut, encryptor, CryptoStreamMode::Write);

            int ByteData;
            while ((ByteData=fsIn->ReadByte()) != -1)
            {
              cryptoStream->WriteByte(ByteData);
            }

          cryptoStream->FlushFinalBlock();

        }
         catch (FileNotFoundException^ ex)
            {
                if ((ex->FileName->CompareTo(fileSource) == 0) && (GlobalVariableClass::logPermission == true))
                {
                    StreamWriter^ writer = gcnew StreamWriter(GlobalVariableClass::logFileLocation);
                    writer->WriteLine(ex->Message);
                    writer->Close();
                }
                if ((ex->FileName->CompareTo(fileDestination) == 0) && GlobalVariableClass::logPermission == true)
                {
                    StreamWriter^ writer = gcnew StreamWriter(GlobalVariableClass::logFileLocation);
                    writer->WriteLine(ex->Message + " i.e. Input file for Encryption");
                    writer->Close();
                }

            }
         catch (Exception^ ex)
            {
                if(GlobalVariableClass::logPermission==true)
                {
                    StreamWriter^ writer = gcnew StreamWriter(GlobalVariableClass::logFileLocation);
                    writer->WriteLine(ex->Message + " During Encrypting File");
                    writer->Close();

                }

            }
        finally
        {

            // Close the streams.

            if (cryptoStream)
                cryptoStream->Close();
            if(fsIn)
                fsIn->Close();
            if(fsOut)
                fsOut->Close();
            // Clear the RijndaelManaged object.
            if (RijndaelCipher)
                RijndaelCipher->Clear();
        }

        // Return the encrypted bytes from the memory stream.
        return ;//msEncrypt->ToArray();
    }

    void Rijndael::DecryptFile(String^ fileSource, String^ fileDestination, String^ password)
    {

        array<Byte>^  salt = gcnew array<Byte>(13) { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0xF1, 0xF0, 0xEE, 0x21, 0x22, 0x45 };
        Rfc2898DeriveBytes ^secretKey =gcnew Rfc2898DeriveBytes(password,salt);       

        CryptoStream^ csDecrypt;
        StreamReader^ srDecrypt;
        FileStream^ fsIn;
        FileStream^ fsOut;

        // Declare the RijndaelManaged object
        // used to decrypt the data.
        RijndaelManaged^ RijndaelCipher;

        try
        {

            fsIn  = gcnew FileStream(fileSource, FileMode::Open, FileAccess::Read);
            fsOut = gcnew FileStream(fileDestination, FileMode::Create, FileAccess::Write);   

            RijndaelCipher = gcnew RijndaelManaged();
            RijndaelCipher->Padding = PaddingMode::PKCS7;
            RijndaelCipher->Key = secretKey->GetBytes(32);
            RijndaelCipher->IV = secretKey->GetBytes(16);

            // Create a decrytor to perform the stream transform.
            ICryptoTransform^ decryptor = RijndaelCipher->CreateDecryptor();

            // Create the streams used for decryption.

            csDecrypt = gcnew CryptoStream(fsOut, decryptor, CryptoStreamMode::Write);

            int ByteData;
            while ((ByteData=fsIn->ReadByte()) != -1)

            {

              csDecrypt->WriteByte(ByteData);

            }

        }
         catch (FileNotFoundException^ ex)
                {
                    if ((ex->FileName->CompareTo(fileSource) == 0) && (GlobalVariableClass::logPermission == true))
                    {

                        StreamWriter^ writer = gcnew StreamWriter(GlobalVariableClass::logFileLocation);
                        writer->WriteLine(ex->Message + " i.e. Input file for decryption");
                        writer->Close();
                    }
                    if ((ex->FileName->CompareTo(fileDestination) == 0) && GlobalVariableClass::logPermission == true)
                    {
                        StreamWriter^ writer = gcnew StreamWriter(GlobalVariableClass::logFileLocation);
                        writer->WriteLine(ex->Message + " i.e. Output file while decryption");
                        writer->Close();
                    }

                }
                catch (Exception^ ex)
                {
                    if (GlobalVariableClass::logPermission == true)
                    {
                        StreamWriter^ writer = gcnew StreamWriter(GlobalVariableClass::logFileLocation);
                        writer->WriteLine(ex->Message + " During Decrypting File");
                        writer->Close();
                    }

                }
        finally
        {
            // Clean things up.

            // Close the streams.
            if (srDecrypt)
                srDecrypt->Close();
            if (csDecrypt)
                csDecrypt->Close();

               fsIn->Close();
               fsOut->Close();

            // Clear the RijndaelManaged object.
            if (RijndaelCipher)
                RijndaelCipher->Clear();
        }

        return ;
    }

    String^ Rijndael:: ReadEncryptFileToBuffer(String^ fileSource,[System::Runtime::InteropServices::OutAttribute]  String ^% buffer,String^ password)
    {
        FileStream^ fsIn; 
        MemoryStream^ memoryStream;
        CryptoStream^ cryptoStream;
        StreamReader^ fileReader,^streamReader;
        RijndaelManaged^ RijndaelCipher;
        String^ decryptText;

         // First we are going to open the file streams
        try
        {
          RijndaelCipher = gcnew RijndaelManaged();
          RijndaelCipher->Mode = CipherMode::CBC;
          RijndaelCipher->KeySize = 256;
          RijndaelCipher->BlockSize = 128;
          RijndaelCipher->Padding = PaddingMode::PKCS7;

          fsIn = gcnew FileStream(fileSource, FileMode::Open, FileAccess::Read);
          fileReader = gcnew StreamReader(fsIn,System::Text::Encoding::Default);
          String^ cipherText = fileReader->ReadToEnd();
          array<Byte>^ cipherByte = System::Text::Encoding::Default->GetBytes(cipherText);

          array<Byte>^  salt = gcnew array<Byte>(13) { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0xF1, 0xF0, 0xEE, 0x21, 0x22, 0x45 };  
          Rfc2898DeriveBytes^ secretKey = gcnew Rfc2898DeriveBytes(password, salt);
          ICryptoTransform^ Decryptor = RijndaelCipher->CreateDecryptor(secretKey->GetBytes(32), secretKey->GetBytes(16));

          memoryStream = gcnew MemoryStream(cipherByte);
          cryptoStream = gcnew CryptoStream(memoryStream, Decryptor, CryptoStreamMode::Read);
          streamReader = gcnew StreamReader(cryptoStream);
          decryptText = streamReader->ReadToEnd();
          buffer = decryptText;
          Console::WriteLine(decryptText);

        }
         catch (FileNotFoundException^ ex)
        {
            if (ex->FileName->CompareTo(fileSource) == 0 && GlobalVariableClass::logPermission == true)
            {

                StreamWriter^ writer = gcnew StreamWriter(GlobalVariableClass::logFileLocation);
                writer->WriteLine(ex->Message + " i.e. Input file for decryption Buffer");
                writer->Close();

            }

        }
        catch (Exception^ ex)
        {
            if (GlobalVariableClass::logPermission == true)
            {
                StreamWriter^ writer = gcnew StreamWriter(GlobalVariableClass::logFileLocation);
                writer->WriteLine(ex->Message + "i.e. During Reading Encrypting File to Decrypted Buffer");
                writer->Close();
            }

        }
        finally
        {
          if(fsIn)
          fsIn->Close();
          if(memoryStream)
          memoryStream->Close();
          if(cryptoStream)
          cryptoStream->Close();
          if(streamReader)
          streamReader->Close();

        }
        return decryptText;
    }

    void Rijndael::WriteEncFileFromDecBuffer(String^ buffer, String^ fileDestination, String^ password)
    {
        FileStream^ fsOut; 
        CryptoStream^ cryptoStream;
        StreamReader^ streamReader;

        try
        {
            RijndaelManaged^ RijndaelCipher = gcnew RijndaelManaged();
            RijndaelCipher->Mode = CipherMode::CBC;
            RijndaelCipher->KeySize = 256;
            RijndaelCipher->BlockSize = 128;
            RijndaelCipher->Padding = PaddingMode::PKCS7;

            FileStream^ fsOut = gcnew FileStream(fileDestination, FileMode::Create, FileAccess::Write);

            array<Byte>^  salt = gcnew array<Byte>(13) { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0xF1, 0xF0, 0xEE, 0x21, 0x22, 0x45 };
            array<Byte>^ plainText = System::Text::Encoding::Default->GetBytes(buffer);
            Rfc2898DeriveBytes^ secretKey = gcnew Rfc2898DeriveBytes(password, salt);
            ICryptoTransform^ Encryptor = RijndaelCipher->CreateEncryptor(secretKey->GetBytes(32), secretKey->GetBytes(16));

            cryptoStream = gcnew CryptoStream(fsOut, Encryptor, CryptoStreamMode::Write);

            cryptoStream->Write(plainText, 0, plainText->Length);

            cryptoStream->FlushFinalBlock();
            cryptoStream->Close();
            fsOut->Close();
        }

        catch(FileNotFoundException^ ex)
        {
            if ( GlobalVariableClass::logPermission == true)
            {

                StreamWriter^ writer = gcnew StreamWriter(GlobalVariableClass::logFileLocation);
                writer->WriteLine(ex->Message + " i.e. Output file from Dencrypted Buffer");
                writer->Close();
            }

        }
        catch(Exception^ ex)
        {
            if (GlobalVariableClass::logPermission == true)
            {
                StreamWriter^ writer = gcnew StreamWriter(GlobalVariableClass::logFileLocation);
                writer->WriteLine(ex->Message + " During Writing Encrypting File from Decrypted Buffer");
                writer->Close();

            }
        }
        finally
        {
          fsOut->Close();
          cryptoStream->Close();
          streamReader->Close();

        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:17:02.003

你不可以做这个。VS6 甚至早于 .NET 存在，因此您需要为托管组件提供一个接口，该接口可通过 VS6 所知道的技术进行访问。两个最简单的选择：

1.  为托管库创建一个 COM 接口并在 C++ 中使用它
2.  创建一个 C 风格的接口并在 C++ 中使用它。不是 C++ 接口，因为 C++ 对象和功能跨越 DLL 边界的问题。

我不明白需要 .lib 文件的要求；两个明显的解决方案都不会使用这个。如果您想要更好的答案，您应该更清楚为什么“需要” .lib。问题是您有一组不可能的要求：

1.  您不能使用 DLL（仅限于一个 PE 模块）
2.  托管和非托管不能在同一个 PE 中共存。
3.  VS6 无法编写托管代码。

这三个限制证明不可能如你所愿；你需要在某个地方妥协。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:08:55.550

我想你最好的选择是为你的一个实现中的函数编写一个 C 包装器，并从中制作一个 DLL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T06:45:18.653

相反，我建议您将 VC++ 6.0 代码升级到 VC++ 9.0（或任何包含 .NetFramework 支持的版本），该版本也可以在托管环境中编译您的应用程序代码。所以现在您可以使用您的托管静态库，也可以嵌入您的库托管代码，因为它可以根据您的要求使用它的所有功能。

您的要求似乎与使用静态库而不是使用 DLL 进行加密/解密代码相关，因为 DLL 可以在客户端进行逆向工程。

是的还有一件事你的代码是用 C++/CLI（manged C++）编写的，所以在 VC++ 9.0 中编译之前，请确保在“CLR 支持”（通过通用属性）上切换。前进。

# c# - 从 C# 调用非托管 C++ 库 (dll)：如何在托管代码和非托管代码之间正确传递数据

> ID：12175077
> 
> 赞同：2
> 
> 时间：2012-08-29T09:46:14.543
> 
> 标签：c#, c++, .net, pinvoke

我一直在使用从传感器读取测量数据并使用用 C++ 编写的库来分析该数据的接口。

该功能大致如下：

1.  在 C++ 库上设置测量参数
2.  从传感器获取数据（总共 1200 次测量）
3.  将数据写入 C++ 库
4.  在 C++ 库中处理所有 1200 个测量值
5.  从 C++ 库中读取结果

Calling this C++ library from C#-code 之前处理过这个问题：[Calling unmanaged C++ library (dll) from C# create an access violation error (0xc0000005)。](https://stackoverflow.com/questions/6454665/calling-unmanaged-c-library-dll-from-c-sharp-creates-an-access-violation-err)

现在看来，C++ 库要么

*   无法正确获取数据
*   无法保存数据
*   无法将结果正确返回到我的 C# 代码。

不好的是，我无法调试这个 C++ 库。

我的代码有什么问题？

1) 设置测量参数

```
namespace PdWaveApi
{
[StructLayout(LayoutKind.Sequential)]
public struct PDDataInfo

{                   
   public int   nPings;              
   public int   nDataRate;          
   public int   nSamples;            
   public float fFrequency;          
   public float fBeamAngle;          
   public int   nInstrument;         
   public int   nCoordSystem;        
   [MarshalAs(UnmanagedType.ByValArray, SizeConst = 9)]
   public short[] hBeamToXYZ;       
   public short hWaveT1;

    // Constructor
   public static PDDataInfo Create()
   {
       PDDataInfo DataStruct = new PDDataInfo();
       DataStruct.hBeamToXYZ = new short[9];
       return DataStruct;
   }
   }
}

public class PdWaveBaseLWrapper
{
   [DllImport("PdWaveBase.dll", EntryPoint = "PDSetInstrumentConfig")]
   public static extern int PDSetInstrumentConfig(ref PDDataInfo pDataInfo);
}

public void SetInstrumentConfiguration()
{
    PdWaveApi.PDDataInfo InstrumentConfiguration = new PdWaveApi.PDDataInfo();
    .................
    Initializing the InstrumentConfiguration structure
    ...............
    PdWaveBaseLWrapper.PDSetInstrumentConfig(ref InstrumentConfiguration);
} 
```

3) 从传感器读取数据并将数据写入 C++ 库

```
namespace PdWaveApi
{
    [StructLayout(LayoutKind.Sequential)]
    public struct PDWaveSample
    {   
        [MarshalAs(UnmanagedType.I1)]
        public bool Valid;
        public float fPressure;
        public float fDistance;
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = Constants.PD_MAX_WAVEBEAMS)]
        public float[] fVel;
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = Constants.PD_MAX_WAVEBEAMS)]
        public ushort[] nAmp;

        // Constructor

        public static PDWaveSample Create()
        {
            PDWaveSample DataStruct = new PDWaveSample();
            DataStruct.fVel = new float[Constants.PD_MAX_WAVEBEAMS];
            DataStruct.nAmp = new ushort[Constants.PD_MAX_WAVEBEAMS];
            return DataStruct;
        }
    }
}

public class PdWaveBaseLWrapper
{
    [DllImport("PdWaveBase.dll", EntryPoint = "PDSetWaveSample")]
    public static extern int PDSetWaveSample(ref PDWaveSample pWaveSample);
}

namespace SensorInterface
{
    public partial class frmSensorInterface : Form
    {
        public PdWaveApi.PDWaveSample WaveSampleData = PdWaveApi.PDWaveSample.Create();

        private void OnNewData(object sender, OnNewDataEvent e)
        {
            ReadWaveSample(ref WaveSampleData);
            SetWaveSample(ref WaveSampleData);
        }

        public void ReadWaveSample(ref PdWaveApi.PDWaveSample WaveSampleData)
        {
            DateTime MeasurementTimeStamp;
            float[] dVel = new float[4];
            float dTemperature = new float();
            float dPitch = new float();
            float dRoll = new float();
            float dHeading = new float();
            float dPressure = new float();
            short[] sAmp = new short[4];

            //  Read some of the latest data from the control
            GetVelocity(ref dVel[0], ref dVel[1], ref dVel[2], ref dVel[3]);
            GetAmplitude(ref sAmp[0], ref sAmp[1], ref sAmp[2], ref sAmp[2]);

            ..............
            // Set other data to the structure

        }

        public void SetWaveSample(ref PdWaveApi.PDWaveSample WaveSampleData)
        {
            PdWaveBaseLWrapper.PDSetWaveSample(ref WaveSampleData);
        }
    }
} 
```

4) 在 C++ 库中处理所有 1200 个测量值

```
[StructLayout(LayoutKind.Sequential)]
public struct PDWaveBurst
{
    [MarshalAs(UnmanagedType.ByValArray , SizeConst = Constants.PD_MAX_WAVEMEAS_AST)]    
    public float[] fST; 
    public float fWinFloor;
    public float fWinCeil;
    [MarshalAs(UnmanagedType.I1)]
    public bool bUseWindow;
    [MarshalAs(UnmanagedType.I1)]
    public bool bSTOk;
    [MarshalAs(UnmanagedType.I1)]
    public bool bGetRawAST;
    [MarshalAs(UnmanagedType.I1)]
    public bool bValidBurst;

    public static PDWaveBurst Create()
    {
        PDWaveBurst DataStruct = new PDWaveBurst();
        DataStruct.fST = new float[Constants.PD_MAX_WAVEMEAS_AST];
        return DataStruct;
    }
}

[DllImport("PdWaveBase.dll", EntryPoint = "PDPreProcess")]
public static extern int PDPreProcess(int nSample, ref PDWaveBurst pWaveBurst);

[DllImport("PdWaveBase.dll", EntryPoint = "PDProcessReturnInt")]
public static extern int PDProcessReturnInt();

public void PreprocessBurstData(int nSamples)
{
    PdWaveApi.PDWaveBurst WaveBurstData = PdWaveApi.PDWaveBurst.Create();

    WaveBurstData.fST = new float[4096];
    WaveBurstData.fWinFloor = (float)1.25;
    WaveBurstData.fWinCeil = 2;
    WaveBurstData.bUseWindow = false;
    WaveBurstData.bSTOk = false;
    WaveBurstData.bGetRawAST = false;
    WaveBurstData.bValidBurst = false;

    PdWaveBaseLWrapper.PDPreProcess(nSamples, ref WaveBurstData);
}

public void ProcessData()
{
    int ProcessError = PdWaveBaseLWrapper.PDProcessReturnInt();
} 
```

5) 从 C++ 库中读取结果

```
[StructLayout(LayoutKind.Sequential)]
public struct PDWavePar {
   public float fTm02;  
   public float fTp;     
   public float fDirTp;  
   public float fSprTp;  
   public float fMainDir;
   public float fUI;     
   public float fHm0;   
   public float fH3;
   public float fT3;    
   public float fH10; 
   public float fT10;
   public float fHmax;
   public float fTmax;
   public float fTz;
   public float fMeanPres;
   public int   nNumNoDet;
   public int   nNumBadDet;
   public int   nErrCode;  
   public int   nSpectrum; 
   public float fMeanAST;
}

[DllImport("PdWaveBase.dll", EntryPoint = "PDGetWavePar")]
public static extern int PDGetWavePar(ref PDWavePar pwWavePar);

public void GetOutput()
{
    PdWaveApi.PDWavePar WaveParameters = new PdWaveApi.PDWavePar();
    PdWaveBaseLWrapper.PDGetWavePar(ref WaveParameters);
} 
```

所以，作为结论：

我应该在我的代码中进行哪些更改 - 将数据正确传递给非托管 dll - 让 dll 保存并处理其内部结构中的数据 - 将结果从非托管代码正确读取到我的 C# 程序？

（对不起我的问题的长度。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:35:09.117

我的问题的最终解决方案是将对齐更改为 1 个字节，如下所示：

C# 结构定义：来自：

```
 [StructLayout(LayoutKind.Sequential)] 
```

至

```
 [StructLayout(LayoutKind.Sequential, Pack=1)] 
```

至少在这里讨论过这个问题： [Calling C++ metro dll from c#metro app and returnfilled structures](http://social.msdn.microsoft.com/Forums/en-MY/winappswithcsharp/thread/5756d9e3-7c64-48a5-8aa9-014a411bec9a)

# php - 比较 PHP 中的 2 个数组并选中复选框（保持结构）

> ID：12175079
> 
> 赞同：0
> 
> 时间：2012-08-29T09:46:19.180
> 
> 标签：php

我需要将数据库中的 2 个数组与可用的布料尺寸和默认尺寸进行比较

```
$sizedefault = array('s','m','l','xl','xxl','xxxl','xxxxl','xxxxxl'); // Default Sizes
$sizeavailable = explode(',',$pd_size);    // Available Sizes (db) s,m,l,xl

$available = array_diff($sizedefault , $sizeavailable );
$notavailable = array_intersect($sizeavailable , $sizedefault);
$output = "";
foreach ($notavailable as $value){
$output .= "<input type=\"checkbox\" name=\"size[]\" id=\"$value\" value=\"$value\" checked=\"checked\"/><label for=\"$value\">".$value."</label>";

}
foreach($available as $value){
$output .= "<input type=\"checkbox\" name=\"size[]\" id=\"$value\" value=\"$value\" /><label for=\"$value\">".$value."</label>";
} 
```

到目前为止有效但是，在我检查后输出没有排序：“xxxxl”并提交/请求

我得到这个结果：（x）=选中

> s(x) m(x) l(x) xl(x) xxxxl(x) xxxxl() xxl()

我怎样才能让它们排序为`$sizedefault`？

> s(x) m(x) l(x) xl(x) xxl() xxxl(x) xxxxl()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:51:00.297

不必事先构建这些数组 - 您可以[`in_array()`](http://php.net/manual/en/function.in-array.php)在循环运行时检查可用性数组中的值是否存在。这也更好，因为您不必为您的复选框复制 HTML 代码，唯一的区别是存在`checked="checked"`并且您可以有条件地添加它。

```
$sizedefault = array('s','m','l','xl','xxl','xxxl','xxxxl','xxxxxl'); // Default Sizes
$sizeavailable = explode(',',$pd_size);    // Available Sizes (db) s,m,l,xl

$output = "";
foreach ($sizedefault as $value){
    $checked = in_array($value, $sizeavailable) ? ' checked="checked"' : '';
    $output .= "<input type=\"checkbox\" name=\"size[]\" id=\"$value\" value=\"$value\" $checked /><label for=\"$value\">".$value."</label>";
} 
```

如果`$sizedefault`来自外部源（例如用户、cookie 等），或者在保存到数据库之前来自外部源，您还应该在将其打印到 HTML 之前转义其中的值。你可以用`htmlspecialchars()`. 否则人们将能够将脚本注入到您的 HTML 中。

```
foreach ($sizedefault as $value){
    $checked = in_array($value, $sizeavailable) ? ' checked="checked"' : '';
    $value = htmlspecialchars($value);
    $output .= "<input type=\"checkbox\" name=\"size[]\" id=\"$value\" value=\"$value\" $checked /><label for=\"$value\">".$value."</label>";
} 
```

# model-view-controller - Node.JS / Mongoose / Express -> 对象没有方法“findAll”

> ID：12175080
> 
> 赞同：1
> 
> 时间：2012-08-29T09:46:21.627
> 
> 标签：model-view-controller, node.js, methods, express, mongoose

我正在尝试将一个方法从我的 model.js 传递给我的 route.js .. 而我的路由没有找到任何方法！我搜索了一个解决方案并测试了很多代码，但没有成功。

我是 Node 的初学者，如果这是一个愚蠢的错误，我很抱歉。

这是我的代码的一部分：

* * *

路由.js

```
var mongoose    = require('mongoose');
var membersModel = new require('../models/MemberModel');

// Member list page
exports.list = function(req, res){
    membersModel.findAll(function(err, docs){
        res.render('list.jade', { title: 'My Registration App - Member list', member:  docs });
    });
}; 
```

* * *

MemberModel.js

```
var mongoose = require('mongoose'),
    Schema = mongoose.Schema,
    ObjectId = Schema.ObjectId;

    // Open DB connection

var MemberSchema = new Schema({
    id        : ObjectId,
    title     : { type: String, required: true, enum: ['Mr', 'Mrs', 'Mme', 'Miss'] },
    lastname  : { type: String, required: true, uppercase: true, trim: true},
    firstname : { type: String, required: true},
    mail      : { type: String, trim: true, index: { unique: true, sparse: true } },
    date      : Date
});

// ...

MemberSchema.method.findAll = function (callback) {
  Members.find(function (err, member) {
        callback(null, member)
  });
};

var conn = mongoose.createConnection('mongodb://localhost/members');
var MyModel = conn.model('Members', MemberSchema);
var instanceMember = new MyModel;

module.exports = instanceMember; 
```

感谢您帮助我度过的时光。如果您想了解其他信息，请告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:19:07.460

我认为您在这里有一些问题：

1.  您的架构的实例方法应该定义在`MemberSchema.methods`（不是`.method`）上。
2.  像`findAll`这样返回实例的方法应该定义为模式的静态方法（on`MemberSchema.statics)`而不是实例方法。
3.  您应该正在 exporting `MyModel`，而不是`new MyModel`像现在这样的实例。 `module.exports = MyModel;`
4.  `route.js`不应该在`new`其中使用，`require`因为您希望 MyModel 类可用于文件，而不是它的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-15T02:09:34.397

对于 find 函数，语法通常是

```
<modelname>.find({conditions},function(err, results){
//use the results
}); 
```

如果您没有任何特定条件并想全部查找，您可以在条件 {} 中给出空对象

```
<modelname>.find({},function(err, results){
//use the results
}); 
```

对于模式，一个例子

```
const articleSchema = {
  title: String,
  content: String
};

// to create a new model named Article
const Article = mongoose.model("article",articleSchema); 
```

# android - 在画布android上绘制垂直线到给定线

> ID：12175086
> 
> 赞同：1
> 
> 时间：2012-08-29T09:46:34.227
> 
> 标签：android, math, canvas

我画了穿过点的线 - (x1,y1) , (x2,y2)
现在我想画另一条垂直于这条线的相同长度的线。

请指导我这个..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T22:53:13.217

将您的线视为从 (x1,y1) 到 (x2,y2) 的向量。然后我们根据下式得到这个向量的 x 和 y 分量

```
 vX = x2-x1
 vY = y2-y1 
```

与 this 大小相等但在平面中垂直于它的向量具有 x 和 y 分量

```
vXP = -(y2-y1)
vYP = x2-x1 
```

您可以通过取这两个向量的标量积来验证这两个向量是否垂直，这将是零。现在你有了等长的向量并且垂直于你的第一个向量，你只需要确定你的线的起点。我们称之为（a，b）。然后使用您的起点，您的线的终点由下式给出

```
 (a - (y2-y1), b + (x2-x1)) 
```

或者如果您希望它指向相反的方向（仍然垂直），它将是

```
 (a + (y2-y1), b - (x2-x1)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T09:53:20.560

嗯，这是简单的数学：

```
int dx = x2 - x1;
int dy = y2 - y1;

int ox,oy; // Origin of new line
//...

drawLine( ox, oy, ox+dy, oy-dx) // This line will be perpendicular to original one 
```

您所要做的就是选择原产地。例如，如果您希望线条在其中心切割，让：

```
ox = x1 + (dx - dy) / 2;
oy = y1 + (dx + dy) / 2; 
```

# jquery - Jquerymobile 页面内容保存在数据库中并以相同的格式检索

> ID：12175089
> 
> 赞同：1
> 
> 时间：2012-08-29T09:46:39.020
> 
> 标签：jquery, jquery-mobile

我的要求是用户在单击模板中的编辑按钮后将在单独的编辑器中编辑模板的内容。之后，修改后的内容将保存到数据库中。

根据定义的示例：我在屏幕上动态创建了一个按钮并在运行时更改它并将内容保存在数据库中，但之后当我在编辑模式下打开它时，它显示其增强的 JQM 插入了我保存的内容。请提供一种在数据库中保存相同内容的实际方法。

```
enter code here :Im trying to save - <a href="#somelink" data-role="button" data-icon="hello">Button</a>

its shown in EDIT mode : <a class="ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-icon-left ui-btn-up-a" data-icon="hello" data-iconpos="left" data-role="button" href="#somelink" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="a">
 <span class="ui-btn-inner ui-btn-corner-all">
     <span class="ui-btn-text">Button</span>
     <span class="ui-icon ui-icon-hello ui-icon-shadow">&nbsp;</span>
 </span> 
```

我正在尝试监听 pagecreate 或 pageinit 事件。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:26:07.710

你必须把你的`Edit`盒子包在一个容器里`data-enhance="false"`

请参阅[JQueryMobile 数据属性参考页](http://jquerymobile.com/test/docs/api/data-attributes.html)`Enhancement`中的部分。

# android - 安装 Android 应用程序的资源

> ID：12175094
> 
> 赞同：1
> 
> 时间：2012-08-29T09:46:52.930
> 
> 标签：android

安装 android 应用程序时，它是否只保留设备当前配置所需的资源（分辨率、语言等）并删除所有其他冗余资源？

（当它永远不会使用时，保留高分辨率图像有什么意义？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:49:25.677

Whatever files you have in your APK will be persistent. it will not get deleted by any chance.

As far as I know, the idea is to make use of a single APK to be compatible with the different types of Android devices available. It is not a good practice to design different apk for different Devices.

But yes, some of your resources will never be used by the device and this is how it works.

if required you can create multiple apks for a single app itself.

And it is well explained here,

[http://developer.android.com/guide/google/play/publishing/multiple-apks.html](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:49:12.123

Well, it is all compiled in one apk file, so no choice. It will keep all the resources.

# facebook - 如何从网站在 Facebook 墙上分享照片？

> ID：12175095
> 
> 赞同：0
> 
> 时间：2012-08-29T09:46:51.623
> 
> 标签：facebook

大家好，我正在做一个项目：

客户的目标是让用户简单地在他们的 Facebook 墙上分享照片并附上一些固定的信息。该项目只是一个网站，不需要登录，用户只需来到机器上拍照并点击分享到facebook帐户，当然需要用户允许我的网站访问他的fb帐户。

那应该是什么？只是喜欢按钮？或者更棘手的事情，比如使用 Graph API？我目前仍在阅读它，因为我对 Facebook 真的很陌生。请给点提示。

顺便说一句，我可能会在我的后端使用 wordpress

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T09:56:15.680

首先，您需要用户授予您的应用在墙上发布的权限，然后在拍摄照片后，您需要使用 Graph API 将其发布到用户的墙上（您可以在此处了解如何执行[此](http://developers.facebook.com/docs/reference/api/user/#photos)操作）

# x++ - 如何从 Excel 文件中读取数据？

> ID：12175101
> 
> 赞同：2
> 
> 时间：2012-08-29T09:47:02.643
> 
> 标签：x++, axapta

我必须使用 X++ 代码从 Excel 文件中读取。Bellow 是作为大型 excel 文件的一部分的一些内容。我只需要根据第一列单元格中的公共部门过滤列表 *_BillingCode、*_PSN、AccDistRuleAdvLedgerEntryExt 等。

```
Public Sector SL1   *_BillingCode
Public Sector SL1   *_PSN
Public Sector SL1   AccDistRuleAdvLedgerEntryExt (Class)
Public Sector SL1   AccJourRuleAdvLedgerEntryExt 
Public Sector SL1   AccountantActivities
Public Sector SL1   AccountingManagerActivities
Public Sector SL1   AdvancedLedgerEntry (Class)
Public Sector SL1   AdvLedgerEntry (Prefix)
Public Sector SL1   AxAdvancedLedgerEntry (Prefix)
Public Sector SL1   AxdAdvancedLedgerEntry
Public Sector SL1   AxdCustomerTransaction (Class)
Public Sector SL1   BudgetAccountDetail (Prefix) 
```

我在谷歌上搜索我发现以下代码行可以从 excel 文件中读取。

```
 static void ReadFromExcel(Args _args)
    {
    SysExcelApplication application;
    SysExcelWorkbooks workbooks;
    SysExcelWorkbook workbook;
    SysExcelWorksheets worksheets;
    SysExcelWorksheet worksheet; 
    SysExcelCells cells;
    COMVariantType type;
    int row;
    CustAccount account;
    CustName name;
    #define.Filename('C:\\X++ Ownership.xls')
    ;
    application = SysExcelApplication::construct();
    workbooks = application.workbooks();
    try
    {
    workbooks.open(#Filename);
    }
    catch (Exception::Error)
    {
    throw error("File cannot be opened.");
    }
    workbook = workbooks.item(1);
    worksheets = workbook.worksheets();
    worksheet = worksheets.itemFromNum(1);
    cells = worksheet.cells();
    do
    {
    row++;
    account = cells.item(row, 1).value().bStr();
    name = cells.item(row, 2).value().bStr();
    info(strfmt('%1 - %2', account, name));
    type = cells.item(row+1, 1).value().variantType();
    }
    while (type != COMVariantType::VT_EMPTY);
    application.quit();
    } 
```

了解如何使用上述代码以满足我的要求需要时间。我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:24:15.713

有更好的读取 Excel 文件的方法，请参阅[Axaptapedia](http://www.axaptapedia.com/index.php?title=ExcelIo)（顺便说一下我是作者）。

# html - Html 表格设计。哪个更好：单个表中有大量行或每个表中的行数很少

> ID：12175102
> 
> 赞同：0
> 
> 时间：2012-08-29T09:47:03.357
> 
> 标签：html, css, web, page-load-time

我需要设计一个包含大量字段的网页，每个字段都显示在一行表格中。有几个类别。我希望为每个类别制作一个单独的表格并进行不同的设计。

网页上存在大量表格是否会使其变慢？哪个更好.. 有 10 个表，每个表有 10 行，还是一个表有 100 行？页面加载速度是否有显着差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:50:52.570

做这样的事情，我建议使用一个表，但大量使用你的 thead 和 tbody 元素来包含每个单独的部分。

编辑：我做了一些测试，发现使用一个或另一个没有显着增加。在我的机器上，对于一个 10000 行和 5 列的表以及 10 个每个 1000 行和 5 列的表，我的页面生成时间约为 1800 毫秒（平均每个主题使用 10 次测试）。

用于测试的代码：

```
<html>
    <head>
        <script type="text/javascript">
            var start_time = (new Date()).getTime();

            function detectTimeDiff(){
                alert("Time taken:  "+((new Date()).getTime() - start_time)+" milliseconds.");
            } 
        </script>
    </head>
    <body onload="detectTimeDiff()">
        <?php
            $multiple_tables = true;
            $table_count = 10;

        ?>
        <table>
        <?php
            $table_count--;

            for($i=0;$i<10000;$i++){
                if($multiple_tables){
                    if($i%$table_count == 0){
        ?>
        </table>
        <table>
        <?php
                    }
                }

        ?>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <?php
            }
        ?>
        </table>
    </body>
</html> 
```

# c++ - How to find out if the name of the identifier is an array?

> ID：12175104
> 
> 赞同：0
> 
> 时间：2012-08-29T09:47:08.083
> 
> 标签：c++, arrays, pointers, large-files

I am exploring some programs which contain thousands of lines in them over a range of files with almost as many variables and pointers in them. Whenever i encounter a variable, i have to trace it backwards in all the files to check whether its a simple pointer or an array, causing utter inconvenience. Is there a way that i make a function that tells me if there are more than one memory blocks associated with that pointer? Or is there a built in function for that, just giving binary answer..!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:49:34.803

简短的回答是否定的——即使在运行时也很难判断指针是否指向数组。

如果您使用一个好的 IDE，它可能会让您将鼠标悬停在变量名上并向您显示定义，这在很多情况下会为您提供所需的答案。

我使用 Eclipse，我发现它非常擅长告诉我变量的类型。其他人将使用其他 IDES；YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:02:28.113

这段代码可能会对您有所帮助。

```
‎#include <iostream>
using namespace std;
typedef char true_type;
typedef struct{ char one; char two;} false_type;

template <size_t N, typename T>
true_type test_func( T (&anarr)[N]);

false_type test_func( ... );
{
 template <typename T>
 bool is_an_array( const T& a) // const reference is important !!

 if (sizeof (test_func(a)) == sizeof(true_type) ) return true;
 else return false;
}

int main()
{ 
 char testarr[10] = {'a','b','c','d','e','f','g','h','i','j'};

 if (is_an_array(testarr) ) cout << "testarr is an array" << endl; else cout <<       
 "testarr is not an array" << endl;

 char a_char = 'R';
 if (is_an_array(a_char)) cout << "a_char is an array" << endl; else cout << "a_char is
 not an array" << endl;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:15:16.120

您可以尝试使用交叉引用工具。有可能它的解析器足够笨，不会像成熟的 IDE 那样受到错误的阻碍。[Source Navigator](http://sourcenav.berlios.de/)是我几年前玩过的。

# c++ - Is it safe to use usleep in Ubuntu with value greater than 1000000

> ID：12175106
> 
> 赞同：0
> 
> 时间：2012-08-29T09:47:28.437
> 
> 标签：c++, linux, ubuntu

I saw in [usleep man](http://linux.die.net/man/3/usleep) that :

```
EINVAL
usec is not smaller than 1000000\. (On systems where that is considered an error.) 
```

So i wonder if its ok to use usleep in **Ubuntu** with value greater than 1000000 and if not (or in case that i want to support other platforms ) what is the alternative when i need sleep for 2.2 sec (for example) .

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:59:58.707

您必须查看 Linux 内核源代码才能 100% 确定，但考虑到 Ubuntu 仅针对 x86 和 x86-64 分发，并且无论底层[POSIX是否允许，很快就会有人发现这种行为是不可接受的spec](http://pubs.opengroup.org/onlinepubs/009695399/functions/usleep.html)，它永远不会崩溃的可能性基本上为零。

Linux 被移植到各种各样的系统上带有草率的内核。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:50:27.160

一种替代方法是信任文档并使用循环来实现它，以确保安全：

```
#define USLEEP_MAX (1000000 - 1)

void long_sleep(unsigned long micros)
{
  while(micros > 0)
  {
    const unsigned long chunk = micros > USLEEP_MAX ? USLEEP_MAX : micros;
    usleep(chunk);
    micros -= chunk;
  }
} 
```

您还应该检查 的返回值`usleep()`，为简洁起见，我省略了它。

在生产中，您可以与[Autoconf](http://www.gnu.org/software/autoconf/)和朋友一起在编译时检测正确性`USLEEP_MAX`，如果本地系统没有参数限制，甚至可以切换到普通包装器。可以享受数小时的乐趣。

# php - Simple preg_replace not working

> ID：12175107
> 
> 赞同：0
> 
> 时间：2012-08-29T09:47:32.310
> 
> 标签：php, string, preg-replace

i am having troubles getting my preg_replace to work for a certain string. This is an example of how my original stream looks like:

"This is just a {simple | huge | fast} test to validate {my | your | their} regex"

What i want to do is: I want to replace the parts in between the "{ }" with one (the first one) of the words standing in between. For example:

"This is just a simple test to validate my regex"

So basically what i am currently doing is:

```
foreach ($zeilen as $key => $value) {

    preg_match_all('/\{(.*?)\}/', $value[15], $arr1);

    foreach($arr1[1] as $key2 => $arrValue){
        preg_match_all('/(.*?)\|/', $arrValue, $arr2);
    }

    preg_replace('/\{(.*?)\}/', 'test', $value[15]);

    echo '<tr>';
    echo '<td>'. $value[15] . '</td>';
    echo '</tr>';

    } 
```

I am using a foreach loop there because there a different lines with the exact same pattern i want to get replaced. I am pretty sure there is a better way to do this, maybe someone can even suggest one to me. My problem here is, that preg_replace is not working at all. The $value[15] is getting echoed out exactly as it was before with the words between { }. No "test" is being displayed. I am not very good at regex!

Thanks a lot to anyone helping!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:21:18.003

您没有将替换的值存储在任何地方。此外，如果您在循环外使用替换，它可能会影响模式的所有出现。我认为这会有所帮助：

```
foreach ($zeilen as $key => $value) {

preg_match_all('/\{(.*?)\}/', $value[15], $arr1);

foreach($arr1[1] as $key2 => $arrValue){
    preg_match('/(.*?)\|/', $arrValue, $arr2);
    $value[15]=str_replace($arr1[0][$key2], $arr2[1], $value[15]);
}

echo '<tr>';
echo '<td>'. $value[15] . '</td>';
echo '</tr>';

} 
```

# excel - Excel根据唯一ID列添加序号

> ID：12175108
> 
> 赞同：0
> 
> 时间：2012-08-29T09:47:33.103
> 
> 标签：excel

我有一个为每个订购的产品创建的带有订单 ID 的列。

我想要一个单独的列，其中包含基于订单 ID 的交易编号。例如。

订单编号 | 交易号
12345 1
12345 1
12345 1
54321 2
54321 2

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:53:59.347

如果您的订单 ID 已排序，这是一个简单的解决方案：

```
=IF(A2=A3,A2,A2+1) 
```

请注意，您必须在单元格 A2 中设置第一个交易编号。

# linux - Why does the Linux IPv4 stack need random numbers?

> ID：12175109
> 
> 赞同：2
> 
> 时间：2012-08-29T09:47:34.510
> 
> 标签：linux, random, kernel, ipv4

I'd like to ask a question about the IPv4 fragment manager in the Linux kernel (net/ipv4/inet_fragment.c). I don't understand why the structure inet_frags (include/net/inet_frag.h) has got an "rnd" field, which is obviously filled in with random numbers. I mean, I don't expect my IPv4 stack to reassemble my packets in a random order ^^.

Could you help me plz? Thx in advance. (Kernel 3.4.4)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T09:54:57.627

该实现使用散列来存储 IP 数据报片段。具有固定散列函数的散列表容易发生拒绝服务[散列冲突攻击](http://en.wikipedia.org/wiki/Collision_attack)。因此，他们为每个哈希函数添加了一个随机种子以防止攻击。

请参阅[http://www.iss.net/security_center/reference/vuln/linux-kernel-packets-dos.htm](http://www.iss.net/security_center/reference/vuln/linux-kernel-packets-dos.htm)：

> Linux 内核容易受到拒绝服务的攻击，这是由于 TCP/IP 片段重组处理不当造成的。远程攻击者可以发送特制的数据包，这些数据包会导致大量哈希表冲突，从而消耗所有可用的 CPU 资源。

# java - How to generate setters and getters at runtime in java..?

> ID：12175110
> 
> 赞同：0
> 
> 时间：2012-08-29T09:47:39.017
> 
> 标签：java, jsf

I am having an functionality through which I am displaying the properties of a document on JSF. The properties are coming through a map and I am iterating it over the JSF as follows:

```
<af:iterator var="list" value="#{MainContentBean.documentProperties}" id="i1">
    <af:inputText label="#{list.key}" id="it1"editable="always" value="list.value">                
</af:iterator> 
```

This is working fine till I want to use it only for the display purpose, but if I want to make it up datatable, i.e the user can change the values of the input text box it's not working. The input text box is always displayed in read only mode if the setters and getters are not present. The values I am getting in map is uncertain, so in this situation, how can I generate setters and getters for each property value at runtime? Is this possible to do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:53:57.727

是的，可以使用 cglib。看看[“使用 cglib 添加 setter/getter 以与 RoR 竞争......愚蠢的想法？来自 Crazy Bob 的输入”](http://www.jroller.com/RickHigh/entry/adding_setter_getters_with_cglib)

另外，看看这个建议使用 ASM的[答案](https://stackoverflow.com/a/5178436/32090)

# javascript - 仅验证/接受来自特定域名的电子邮件

> ID：12175111
> 
> 赞同：4
> 
> 时间：2012-08-29T09:47:40.607
> 
> 标签：javascript, jquery, email-validation

这是我的 jQuery 脚本的一部分。我需要让系统验证特定域的电子邮件。

比如example@schooldomain.com

并且只允许来自@schooldomain.com 的电子邮件

代码：

```
email: function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T09:52:46.660

首先，正如评论中所指出的，使用正则表达式验证电子邮件，然后检查电子邮件是否来自正确的域。

```
function validateEmail(email) { 
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    if(re.test(email)){
        //Email valid. Procees to test if it's from the right domain (Second argument is to check that the string ENDS with this domain, and that it doesn't just contain it)
        if(email.indexOf("@thedomain.com", email.length - "@thedomain.com".length) !== -1){
            //VALID
            console.log("VALID");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-15T18:07:33.513

感谢这个线程，我找到了另一种解决方案，在“at”/“@”之后只接受一个特定域。[在 JavaScript 中获取字符串中破折号后的所有内容](https://stackoverflow.com/questions/573145/get-everything-after-the-dash-in-a-string-in-javascript/35236900) 基本上将电子邮件一分为二，@ 之前的文本和 @ 之后的文本。如果 @ 之后的文本不等于指定的域，则验证将为 false。

```
 // Email validation   
let em = document.forms['Login']['email'].value; 
let atpos = em.indexOf("@");
let domain = em.split("@")[1]; // Saves user input after the @ (at)

if (em == null || em == "") {
    alert("Email can not be empty.");
    document.getElementById('e').focus();
    return false;
} 
                                            // First test checks for atleast one character before @
else if (atpos < 1 || domain != "gmail.com"){ // Second test checks if the user entered a gmail.com domain after @
    alert("Not a valid e-mail address. Please write your gmail address like this: username@gmail.com.");
    document.getElementById('e').focus();
    return false;
} 
```

# cakephp - cake 1.3 element enable/disable cache

> ID：12175115
> 
> 赞同：1
> 
> 时间：2012-08-29T09:47:52.260
> 
> 标签：cakephp, caching, cakephp-1.3

my elements looks like that:

```
echo $this->element('myelement', array('cache' => array('key' => 'myUniqKey', 'time' => '+1 hour'))); 
```

when i have Configure::write('Cache.disable', false); in my config file, all elements are chaced, but when i have Configure::write('Cache.disable', true); my elements from layout are in cache and elements from view aren't

can You tel me is it normal? can i cache my elements from view without turning cache on?

# javascript - 在 Express 上使用外部模块继承 Jade 模板的好策略

> ID：12175119
> 
> 赞同：1
> 
> 时间：2012-08-29T09:48:04.897
> 
> 标签：javascript, node.js, inheritance, express, pug

我正在开发一个框架，开发人员可以在其中在外部模块中实现子模板。我想稍后将该模板包含在父模板中。

这是一个基本的模板架构：

> ─ 任务（父模板）
> ├─ 成功任务（子模板）
> ​​├─ 失败任务（子模板）
> ​​└─ 玩任务（子模板）

每个人的父模板都是一样的。子模板由贡献者实现，并始终显示在不同的时刻（任务状态）。

我在一个模板文件中尝试了两种方法。

实现“块”模式：

```
block mission_play
  h2 Hello world!
  p Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
block mission_succeed
  h2 Congratulations!
  p You won buddy!
block mission_failed
  h2 Oh my gosh, dude, you did something realy bad
  p You should try again 
```

那个不起作用，因为我没有任何`extend layout`指令（我不能使用，因为每个子模板都是外部模块）。**有什么方法可以手动向玉指示扩展哪个模板？**

在 mixin 中实现每个子模板：

```
mixin mission_introduction(mission)
  h2 Hello world!
  p Lorem ipsum dolor sit amet, consectetuer adipiscing elit.

mixin mission_succeed(mission)
  h2 Congratulations!
  p You win buddy!

mixin mission_failed(mission)
  h2 Oh my gosh dude, you did something realy bad
  p You should try again 
```

我打算将该模板包含在其父模板中，但 Jade 不允许在包含路径中使用表达式。这就是为什么我尝试直接在父玉模板中解释玉代码但我没有找到如何。我什至尝试将它包含在[`partial`函数](https://github.com/publicclass/express-partials)中，但我可以使用该模块而不禁用 Express 中的默认视图继承策略。

**那么我错在哪里？这位建筑之王的最佳策略是什么？**

干杯！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:45:10.753

我终于找到了一个很好的策略：

```
case mission.state
    when "game"
      block mission_introduction   
        h2 Hello world!
        p Lorem ipsum dolor sit amet, consectetuer adipiscing elit.

    when "succeed"
      block mission_succeed  
        h2 Congratulations!
        p You win buddy!              

    when "failed"
      block mission_failed                                    
        h2 Oh my gosh dude, you did something realy bad
        p You should try again 
```

干杯！

# java - Hibernate: Joining Criteria

> ID：12175123
> 
> 赞同：0
> 
> 时间：2012-08-29T09:48:13.997
> 
> 标签：java, oracle, hibernate

Hi I need to do the following using Criteria

```
Select * from product pd, (Select productID pd1 from ... where ...) tpd1, 
(Select productID pd2 from ... where ...) tpd2
where pd.productID = tpd1.pd1 and pd.productID = tpd1.pd2 
```

May I know if it is possible?

The original SQL was using IN conditions

```
Select * from product pd where productID in (Select productID pd1 from ... where ...) and 
productID in (Select productID pd2 from ... where ...) 
```

but it takes too long to get the result, using the join SQL statement I was able to obtain my result faster.

any help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:24:49.693

鉴于您使用的是 Hibernate，您可能必须执行以下操作，如果预期匹配的数量相对较低，这应该可以正常工作：

```
select *
from   product pd
where  pd.productID in
   (select productID
    from   product pd2
    join   tpd1 on (pd2.productID = tpd1.pd1)
    join   tpd2 on (pd2.productID = tpd2.pd2)
    where  tpd1....
    and    tpd2....
   ); 
```

我假设`product.productID`.

或者，您可以尝试 EXISTS 公式，它可能会或可能不会比您的原始查询更好：

```
select *
from   product pd
where  EXISTS
   (select null from tpd1 where pd.productID = tpd1.pd1 and ...)
and    EXISTS
   (select null from tpd2 where pd.productID = tpd2.pd2 and ...)
; 
```

# javascript - window.location.href 在 chrome 扩展中不起作用

> ID：12175124
> 
> 赞同：3
> 
> 时间：2012-08-29T09:48:14.680
> 
> 标签：javascript, url, google-chrome-extension

`this.window.location.href`在 html 文件中的 chrome 扩展中不起作用我在脚本中尝试了这个函数：

```
function myFunction()
{
   var pl = this.window.location.href;
   var sWords= localStorage.getItem(pl);
   document.write(pl);
} 
```

它给了我：

```
chrome-extension://ebeadbfnnghmakkbimckpdmocjffkbjc/popup.html 
```

那么我应该怎么做才能获得页面的链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T04:36:51.457

[`chrome.tabs.query`](http://developer.chrome.com/extensions/tabs.html#method-query)您可以通过方法获取当前选择的选项卡。您需要传递两个选项：

1.  `currentWindow : true`
2.  `active : true`

它将返回与条件匹配的选项卡数组。您可以从那里获取 URL。像这样：

```
chrome.tabs.query(
    {
        currentWindow: true,    // currently focused window
        active: true            // selected tab
    },
    function (foundTabs) {
        if (foundTabs.length > 0) {
            var url = foundTabs[0].url; // <--- this is what you are looking for
        } else {
            // there's no window or no selected tab
        }
    }
); 
```

# c# - Find First check number in Quickbooks using QBFC

> ID：12175127
> 
> 赞同：0
> 
> 时间：2012-08-29T09:48:24.980
> 
> 标签：c#, quickbooks, qbfc, qbxml

I am using Quickbooks QBFC and want to retrive the value of "First Check Number" field programatically.

It can be found in Quickbooks at File>Print Forms>Checks

Please suggest how this can be done or any reference i can look at.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:47:10.130

您不能直接执行此操作，但您可以查询最近针对您感兴趣的帐户开出的支票。默认的第一张支票号码将比已开出的最高支票号码大一个。

作为一项规则，我不会为人们编写代码，我今天例外，只是因为今天是星期五，我的心情很疯狂。以下代码可用作有用的最后一个校验号例程的**起点**。为了有一个现实的、可用的例程，你，而不是我，将不得不处理与人们使用支票簿的方式相关的所有怪癖：非数字数字、乱序数字等。

请注意：此代码使用[Zombie 开源库](https://github.com/pkpjpm/Zombie)和 QBFC 11。

```
class CheckNumbers
{
    private const int DATE_INTERVAL = -7;

    private string _accountName;
    private DateTime _lastToDate;
    private DateTime _lastFromDate;

    public CheckNumbers(string accountName)
    {
        _accountName = accountName;
        _lastToDate = DateTime.Today;
        _lastFromDate = _lastToDate.AddDays(DATE_INTERVAL);
    }

    private void SetCriteria(IORTxnQuery qry)
    {
        qry.TxnFilter.AccountFilter.ORAccountFilter.FullNameList.Add(_accountName);

        var dateFilter = qry.TxnFilter.ORDateRangeFilter.ModifiedDateRangeFilter;

        dateFilter.FromModifiedDate.SetValue(_lastFromDate, true);
        dateFilter.ToModifiedDate.SetValue(_lastToDate, true);
    }

    private void ProcessCheckNumber(string checkNumber, ref int highestNumber)
    {
        if (!string.IsNullOrEmpty(checkNumber))
        {
            int thisCheck;
            if (!int.TryParse(checkNumber, out thisCheck))
            {
                throw new Exception(string.Format("Check number {0} cannot be read as an integer", checkNumber));
            }
            if (thisCheck > highestNumber) highestNumber = thisCheck;
        }
    }

    public int GetLastCheckNumber()
    {
        DateTime failSafe = DateTime.Parse("1/1/2010");

        using (var cn = Zombie.ConnectionMgr.GetConnection())
        {
            int highestCheck = 0;

            while (highestCheck == 0 && _lastFromDate > failSafe)
            {
                var batch = cn.NewBatch();

                var checkQuery = batch.MsgSet.AppendCheckQueryRq();
                checkQuery.IncludeRetElementList.Add("RefNumber");

                SetCriteria(checkQuery.ORTxnQuery);

                batch.SetClosures(checkQuery, b =>
                    {
                        var checks = new Zombie.QBFCIterator<ICheckRetList, ICheckRet>(b);
                        foreach (var check in checks)
                        {
                            ProcessCheckNumber(Zombie.Safe.Value(check.RefNumber), ref highestCheck);
                        }
                    });

                var billCheckQuery = batch.MsgSet.AppendBillPaymentCheckQueryRq();
                billCheckQuery.IncludeRetElementList.Add("RefNumber");

                SetCriteria(billCheckQuery.ORTxnQuery);

                batch.SetClosures(billCheckQuery, b =>
                    {
                        var checks = new Zombie.QBFCIterator<IBillPaymentCheckRetList, IBillPaymentCheckRet>(b);
                        foreach (var check in checks)
                        {
                            ProcessCheckNumber(Zombie.Safe.Value(check.RefNumber), ref highestCheck);
                        }
                    });

                if (!batch.Run()) return 0;

                _lastToDate = _lastFromDate;
                _lastFromDate = _lastToDate.AddDays(DATE_INTERVAL);
            }

            return highestCheck;
        }
    }
} 
```

# python - 使用 Flask-pymongo 扩展通过 _id 在 MongoDB 中搜索文档

> ID：12175128
> 
> 赞同：16
> 
> 时间：2012-08-29T09:48:34.917
> 
> 标签：python, mongodb, flask, pymongo

我对以下问题感到困惑。

我正在使用 Flask，flask-pymongo 扩展，mongodb 版本 v2.2.0-rc0，pdfile 版本 4.5

这是我的路线：

```
@app.route("/check/<id>")
def check(id):
   doc=conn.db.msg.find_one({'_id':id})
   return render_template('base.html',name=doc) 
```

id 是 msg 集合中文档的有效 _id，但总是返回 None。

我试过了：

*   传递 ObjectId(id) 但返回错误类型：ObjectId 不可调用
*   将 id 作为 str(id) 传递返回 None

有什么想法吗？

更新：完整的网址如下所示：

```
http://127.0.0.1:8000/check/5030b628895b800de1a9a792 
```

更新2：

我发现了一个与 (answer) for ruby​​ 类似的问题。不知道如何将它翻译成 python，我需要什么样的导入/模块？

[如何通过 _id 检索文档？](https://stackoverflow.com/questions/2235262/how-can-i-retrieve-a-document-by-id)

UPDATE3：我试过：

```
import bson
@app.route("/check/<id>")
def check(id):
id2="'"+id+"'"
doc=conn.db.msg.find_one({'_id':bson.objectid(id2) })
return render_template('base.html',name=doc) 
```

但我得到**TypeError: 'module' object is not callable** (它也不适用于 id)

当我达到 1500 时，我会建议一个**沮丧**标签：-S

更新4：

最后我把它启动并运行了！

这是我的解决方案：

```
import bson
@app.route("/check/<id>")
def check(id):
doc=conn.db.msg.find_one({'_id':bson.ObjectId(oid=str(id))})
return render_template('base.html',name=doc) 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-30T14:50:55.183

您可能还想尝试`ObjectId`从`bson.objectid`模块中使用，如下所示：

```
from bson.objectid import ObjectId 
```

在这种情况下，您不需要提供`oid`kwarg。您只需执行以下操作：

```
db_conn.msg.find_one({'_id': ObjectId(my_oid)}) 
```

# jquery - Tabs in JQUERY for loading JQGRID

> ID：12175130
> 
> 赞同：5
> 
> 时间：2012-08-29T09:48:36.727
> 
> 标签：jquery, jqgrid, jquery-ui-tabs

i am making grid using jqgrid

i want to create tabs in my application Clicking on a tab should open a grid and the name of the tab should appear on top of the page and when i click on another tab it should load the other grid.. the grids should be loaded on the same page and the tabs should also appear all the time on the page i have already created the grids just want to integrate them with the tabs... plzz help me thanks in advance.....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T10:54:43.080

好的，下面将是您的代码。我对两个（emp，manager）标签使用相同的数据，您可以稍后更改它。

**HTML**

```
 <div id="tabs">
    <ul>
        <li><a href="#tabs-1" id="tab1">emp</a></li>
        <li><a href="#tabs-2" td="tab2">manager</a></li>

    </ul>
    <div id="tabs-1">
        <table id="list"><tr><td/></tr></table>
                <div id="pager"></div>
    </div>
    <div id="tabs-2">
        <table id="list1"><tr><td/></tr></table>
        <div id="pager1"></div>
        </div>

</div> 
```

**JavaScript**

```
$(function () {
            'use strict';
            var $tabs=$('#tabs').tabs();

            var selected = $tabs.tabs('option', 'selected');

            if(selected==0){

               var mydata = [
                    {id: "1",  invdate: "2007-10-01", name: "test",   note: "note",   amount: "200.00", tax: "10.00", closed: true,  ship_via: "TN", total: "210.00"}

                ],
                $grid = $("#list"),$pager = $("#pager");
                callMe($grid,mydata,$pager);

          }
          $('#tabs').bind('tabsselect', function(event, ui) {

    selected=ui.index;

    if(selected==0)
    {
     var mydata = [
                    {id: "1",  invdate: "2007-10-01", name: "test",   note: "note",   amount: "200.00", tax: "10.00", closed: true,  ship_via: "TN", total: "210.00"}

                ],
                $grid = $("#list"),$pager = $("#pager");
                callMe($grid,mydata,$pager);
    }

    if(selected==1)
    {
     var mydata = [
                    {id: "1",  invdate: "2007-10-01", name: "test",   note: "note",   amount: "200.00", tax: "10.00", closed: true,  ship_via: "TN", total: "210.00"}

                ],
                $grid = $("#list1"),$pager = $("#pager1");
                callMe($grid,mydata,$pager);
    }

        });
            function callMe(grid,mydata,pager){
            grid.jqGrid({
                datatype: 'local',
                data: mydata,
                colNames: ['Date', 'Client', 'Amount', 'Tax', 'Total', 'Closed', 'Shipped via', 'Notes'],
                colModel: [
                    {name: 'invdate', index: 'invdate', width: 90, align: 'center', sorttype: 'date',
                        formatter: 'date', formatoptions: {newformat: 'd-M-Y'}, datefmt: 'd-M-Y'},
                    {name: 'name', index: 'name', width: 100},
                    {name: 'amount', index: 'amount', width: 105, formatter: 'number', sorttype: 'number', align: 'right'},
                    {name: 'tax', index: 'tax', width: 95, formatter: 'number', sorttype: 'number', align: 'right', hidden: true},
                    {name: 'total', index: 'total', width: 90, formatter: 'number', sorttype: 'number', align: 'right'},
                    {name: 'closed', index: 'closed', width: 95, align: 'center', formatter: 'checkbox',
                        edittype: 'checkbox', editoptions: {value: 'Yes:No', defaultValue: 'Yes'}},
                    {name: 'ship_via', index: 'ship_via', width: 130, align: 'center', formatter: 'select',
                        edittype: 'select', editoptions: {value: 'FE:FedEx;TN:TNT;IN:Intim', defaultValue: 'Intime'}},
                    {name: 'note', index: 'note', width: 90}
                ],
                rowNum: 10,
                rowList: [5, 10, 20],
                pager: pager,
                gridview: true,
                rownumbers: true,
                sortname: 'invdate',
                viewrecords: true,
                sortorder: 'desc',
                caption: 'Buttons in the column headers',
                height: '100%'
            });
           } 
        }); 
```

所以，这里我默认选择的选项卡将是 emp 并且它的索引将为 0，所以我最初检查它，然后在 tabselect 事件上，我再次检查索引。对于 emp 索引为 0，经理索引为 1。基于我正在更改网格和寻呼机值，您可以在此处更改您的数据。这对你有用。我对 ui 标签了解不多，我会进一步研究。但现在这对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-07T05:58:39.070

皮尤什，

很好的答案，但是您的代码中有一个与最新版本的 jquery UI 不兼容的小问题。如果您使用的是 jqueryUI 1.10.x 及更高版本，则必须使用“active” optionName 而不是“selected”，根据此更改：http: [//jqueryui.com/upgrade-guide/1.10/#re ​​moved-selected-选项-使用-活动](http://jqueryui.com/upgrade-guide/1.10/#removed-selected-option-use-active)

事件模型也发生了变化。我更新了下面的代码并对其进行了测试，它在 jQuery UI 1.10.3 中运行良好：

```
<script >
    $(function () {
        'use strict';
        var $tabs = $('#tabs').tabs();

        var selected = $tabs.tabs('option', 'active');

        alert(selected);
        if (selected == 0) {

            var mydata = [
                 { id: "1", invdate: "2007-10-01", name: "test", note: "note", amount: "200.00", tax: "10.00", closed: true, ship_via: "TN", total: "210.00" }

            ],
             $grid = $("#list"), $pager = $("#pager");
            callMe($grid, mydata, $pager);

        }

        $("#tabs").tabs({
            activate: function (event, ui) {

                selected = ui.newTab.context.id;
                alert(selected);
                if (selected == "tab1") {
                    var mydata = [
                                   { id: "1", invdate: "2007-10-01", name: "test", note: "note", amount: "200.00", tax: "10.00", closed: true, ship_via: "TN", total: "210.00" }

                    ],
                               $grid = $("#list"), $pager = $("#pager");
                    callMe($grid, mydata, $pager);
                }

                if (selected == "tab2") {
                    var mydata = [
                                   { id: "1", invdate: "2007-10-01", name: "test", note: "note", amount: "200.00", tax: "10.00", closed: true, ship_via: "TN", total: "210.00" }

                    ],
                               $grid = $("#list1"), $pager = $("#pager1");
                    callMe($grid, mydata, $pager);
                }

            }
        }); 
```

# sql - SQL 2008 Cursor needed?

> ID：12175132
> 
> 赞同：2
> 
> 时间：2012-08-29T09:48:43.500
> 
> 标签：sql, sql-server, sql-server-2008, cursor

I'm building a function to return the net value of a sales invoice once any purchase invoices marked against it have been taken off - part of these costs are contractor costs of which we also want to calculate either NI or a set increase to the contractor pay to reflect "true" value.

So on one sales invoice, we may have several contractors where we have purchase invoices against it, some may be at NI calculated at 13.8%, others may be at a standard "uplift" of 10% and others may be at 0% added.

The bit that I'm trying to figure out is if I need to make the whole function as a cursor as there are going to be different figures for a variable for each purchase invoice e.g.

```
(SELECT SUM(th.hoursworked * (th.payrate * (1 + (@NIAMOUNT / 100))) ) 
```

but the @NIAMOUNT will have to change for each purchase invoice.

Is the best way of doing this via a cursor, or is there a better way of doing this?

Sorry if this is a bit verbose!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:54:47.747

你几乎肯定不需要光标

将您的工作时间加入他们所基于的合同中，并从合同中获取 NI 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T09:56:42.777

您应该尽可能避免使用游标——游标“串行”操作，这将限制 SQL 的性能。

如果计算很简单，一种方法是做 NI 查找内联，例如

```
(SELECT SUM(th.hoursworked * (th.payrate * (1 + 
                                           ((CASE somejoinedtable.UpliftType 
                                                  WHEN 1 THEN 10
                                                  WHEN 2 THEN 13.8
                                                  WHEN 3 THEN 0
                                             END
                                        / 100)))) 
```

如果这变得太混乱而无法内联，您可以抽象一个用户定义的函数

```
CREATE FUNCTION dbo.fnGetNIAmount(int @someLookupParam)
... 
```

然后像这样

```
(SELECT SUM(th.hoursworked * (th.payrate * (1 + 
                                           ((dbo.fnGetNIAmount(somejoinedtable.UpliftType )
                                        / 100)))) 
```

# jenkins - Making Jenkins job to choose either of the two repositories through a parameter

> ID：12175134
> 
> 赞同：0
> 
> 时间：2012-08-29T09:48:59.513
> 
> 标签：jenkins

I have 2 Jobs which checks out the code from 2 different repository ( A and B resp ). How can I have a single job which checks out the code from either A or B depending on the parameter so that i want to reduce the number of jobs in jenkins.I tried the sub version release plugin,but this did not perform what is required by me

Thanks in Advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-16T11:59:35.047

你为什么不写一个脚本并运行它。使用参数化构建并配置参数。然后基于该参数，使用脚本克隆存储库

# sql - table==1 was unexpected at this time batch file

> ID：12175139
> 
> 赞同：3
> 
> 时间：2012-08-29T09:49:19.097
> 
> 标签：sql, database, batch-file

I am trying to apply multiple SQL scripts to an Ingres database (using a vnode setup). The testing phase will require it done to four databases. Trying to nip this annoyance in the bud I've started a batch file but receive the error above. Many of the solutions found suggest that the batch file will evaluate everything within a block when it starts but I cannot see the forest for the trees. I have a suspicion that the parts in :1ST and :2ND are causing the problems but they need to be done. SQL, Batch and command window output are below

* * *

```
UPDATE core SET sysflag='O' 
```

* * *

```
@ECHO off
SET VN1=dave
SET DB1=dbtest1
SET DB2=dbtest2
SET SQL1=open.sql
SET SQL2=open.sql

:MENU
CLS
ECHO 1 - Leave
ECHO 2 - Database1
ECHO 3 - Database2

SET /P M=Choose then press ENTER:
IF "%M%"=="1" GOTO EOF
IF "%M%"=="2" GOTO 1ST
IF "%M%"=="3" GOTO 2ND
GOTO MENU

:1ST
SET DATABASE=%VN1%::%DB1%
GOTO RUNSQL
:2ND
SET DATABASE=%VN1%::%DB2%
GOTO RUNSQL

:RUNSQL
ECHO Applying SQLs to %DATABASE%
SQL %DATABASE% < %SQL1% > log_%SQL1%.txt
PAUSE
SQL %DATABASE% < %SQL2% > log_%SQL2%.txt
PAUSE
GOTO MENU

:EOF 
```

* * *

```
C:\Users\me\BUILD>IF UPDATE core SET sysflag='O'==1 GOTO EOF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:36:01.463

您期望 的值为`%M%`1、2 或 3。但不知何故，该值为`UPDATE core`。IF 语句失败，因为左值中间有一个空格。必须对空格等标记分隔符进行转义，或者应引用每一侧的整个字符串。您可以更改您的语句以`IF "%M%"=="1" GOTO EOF`消除错误，但它仍然不会给出您想要的结果。

SET /P 语句从标准输入读取值。我假设您没有输入 value `UPDATE core`，而是您的输入被重定向或管道传输。您正在为脚本提供错误的值。

您应该添加错误处理，以便在输入不是 1、2 或 3 时代码不会落入 :1ST。

* * *

您可以为您的 SET /P 语句将输入显式重定向到控制台。这样，它将忽略为批处理脚本提供的重定向输入或管道输入。

```
<con: SET /P "M=Choose then press ENTER: " 
```

但是你的整个设计似乎有问题。如果您正在管道或重定向脚本的输入，那么在循环中呈现交互式选项菜单是没有意义的。如果用户从不按 1 退出会发生什么？最终管道或重定向的输入将被耗尽，然后你就会遇到问题。

# c# - 从 Metro 应用程序的代码隐藏动态访问子 UserControl 中的 MainPage 控件？

> ID：12175146
> 
> 赞同：0
> 
> 时间：2012-08-29T09:49:38.317
> 
> 标签：c#, wcf, silverlight, xaml, microsoft-metro

我有一个 MainPage 在屏幕的哪个部分我有一个名为 customview 的空网格，我想在其中动态添加和删除不同的视图（不同的用户控件）。现在我以这种方式将一个用户控件（view1）附加到那个空网格（MainPage的一部分）：-customview是空网格，view1是我设计的用户控件，并且在导航到MainPage时我正在这样做：-

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
customview.Children.Clear();
View1 firstview = new View1 ();
customview.Children.Add(firstview); 
} 
```

现在，View1（用户控件）有一个 button1，在该 button1 上单击我必须删除 view1 并将 view2（另一个用户控件）添加到 MainPage 中名为 customview 的同一个网格中。

我以这种方式尝试过，但没有运气：-

```
private void button1_Click_1(object sender, RoutedEventArgs e)
{
MainPage main = new MainPage();
View2 secview = new View2 ();
Grid grd = main.FindName("customview") as Grid;
grd .Children.Clear();
grd .Children.Add(secview);
} 
```

请让我知道我在哪里做错了？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:11:43.203

考虑使用 ContentControl 而不是这样做。使用它，您将能够更改其内容，在任何您想要的地方添加。

将此添加到您的视图中：

```
 <ContentControl Name="region1ContentControl" 
                        Grid.Row="1"
                        Grid.Column="1"
                        Margin="0,10"                           
                        Style="{StaticResource ContentControlStyle}" /> 
```

等等后面的代码你就可以这样做：

```
region1ContentControl.Content = AnyObject(including views) 
```

这将比一直更改视图更容易工作。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:52:32.527

```
Label lbl = (Label)this.Page.FindControl("controlID");
string labelText = lbl.Text; 
```

# php - jQuery UI 对话框 - 多行

> ID：12175148
> 
> 赞同：2
> 
> 时间：2012-08-29T09:49:44.937
> 
> 标签：php, jquery-ui

经过长时间的搜索，决定在这里尝试一下。我想为我的表实现 jQuery UI 对话框。在框中，我想显示具有长描述的附加单元格，通常只会弄乱我的表格布局。因此，单击按钮后，您将获得更多信息。

我有标准代码：

```
$.fx.speeds._default = 1000;
$(function() {
    $( ".dialog" ).dialog({
        autoOpen: false,
        show: "blind",
        hide: "explode"
    });

    $( ".opener" ).click(function() {
        $( ".dialog" ).dialog( "open" );
        return false;
    });
}); 
```

和 php：

```
 echo "<td align=center>".$okres[$i]."</td>";
   echo "<td ><button class='opener'>Desription</button><div class='dialog' title='$training[$i]'>".$opis[$i]."</div></td>";
   echo "<td align=center>".$status[$i]."</td>"; 
```

它确实有效，但它为所有行打开了框。真的不知道如何让它只打开相关的框。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:23:10.030

你可以试试这个

```
$(function() {
    $( ".opener" ).click(function(e) {
        e.preventDefault();
        var index=$(this).closest('tr').index();
        $($(".dialog")[index]).dialog("open");
    });
});​ 
```

[**演示**](http://jsfiddle.net/qANMh/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:54:28.303

对每一行使用动态 ID，然后单击发送相关行的 ID，然后仅显示该行的描述

# memory - RabbitMQ + 内存限制

> ID：12175156
> 
> 赞同：17
> 
> 时间：2012-08-29T09:50:03.117
> 
> 标签：memory, memory-management, rabbitmq

我只是在查看 RabbitMQ 的配置细节并遇到了

```
[{rabbit, [{vm_memory_high_watermark, 0}, 
           {disk_free_limit, {mem_relative, 1.0}}
          ]
}] 
```

这个配置是什么意思？

`vm_memory_high_watermark`设置为 0 意味着 => 在 rabbitmq 应用程序启动时立即阻止所有发布者？但是我们仍然看到 rabbitmq 能够将我们发送的任何消息排队。

```
16720 rabbitmq  20   0  142m  62m 2408 S    0  **1.6**   0:06.88 beam.smp 
```

每当我们向代理发送消息时，我们都会看到该进程的内存使用量增加。那么，这是否意味着尽管水印设置为 0，但消息仍在内存中？

我们很想知道如果 ram 的内存限制达到并且仍在发送 msgs 会发生什么？要么发布者被阻止？或者如果可用，消息会被换出到磁盘？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-29T10:48:55.563

vm_memory_high_watermark 是一个百分比值，与 RabbitMQ 中的内存流量控制有关。

如果你看一下[内存流控制](http://www.rabbitmq.com/memory.html)，你会看到它在“基于内存的流控制”标题下说：

> RabbitMQ 服务器在启动时和执行 rabbitmqctl set_vm_memory_high_watermark fraction 时检测计算机中安装的 RAM 总量。默认情况下，当 RabbitMQ 服务器使用超过 40% 的已安装 RAM 时，它会引发内存警报并阻止所有连接。一旦内存警报清除（例如，由于服务器将消息分页到磁盘或将它们传递给客户端），正常的服务就会恢复。

因此，通过将此值设置为 0，它当然会立即触发！如果您希望允许 RabbitMQ 使用更多内存，那么您将需要增加该值。

另一个重要说明：

> 默认内存阈值设置为已安装 RAM 的 40%。请注意，这不会阻止 RabbitMQ 服务器使用超过 40%，它只是限制发布者的点。

因此，如果您在警报响起时尝试发布消息，那么您的发布者将被阻止发送消息。

如果要阻止所有发布者，则将 vm_memory_high_watermark 设置为 0。如果要“禁用”基于内存的流量控制，则将 vm_memory_high_watermark 设置为 100。请参阅上述链接的详细信息：

> 值为 0 会使内存警报立即响起，从而禁用所有发布（如果您希望全局禁用发布，这可能很有用；使用 rabbitmqctl set_vm_memory_high_watermark 0）。要完全防止内存警报响起，请设置一些较高的乘数，例如 100。

# php - 在 PHP 中检查全局数组

> ID：12175157
> 
> 赞同：3
> 
> 时间：2012-08-29T09:50:12.850
> 
> 标签：php, global-variables

我有一个问题，希望你有答案。将数据从一个表单提交到下一页进行处理时，是否最好将全局数组作为一个整体进行检查，例如

```
isset($_POST) 
```

或者

```
isset($_POST['value']) 
```

我的问题适用于所有全局数组，如`$_POST`, `$_SESSION`,`$_FILES`等。原因是由于检查是否检查了某些变量，我得到了很多不好的处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T09:52:04.507

`$_POST`并且其他[超全局变量](http://php.net/manual/en/language.variables.superglobals.php)总是被定义，所以`isset($_POST)`这毫无意义（它总是会返回`true`）。

第二个检查是你应该使用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T09:53:29.183

`isset($_POST)`总是`true`，你至少需要检查一个`key`里面`$_POST`。

如果它`$_POST['value']`是空白的，它也会被设置，所以你需要检查那个变量是否也不是空`if($_POST['value'] != '')`的

# c#-4.0 - 在屏幕上显示文本会影响模型渲染

> ID：12175158
> 
> 赞同：0
> 
> 时间：2012-08-29T09:50:14.197
> 
> 标签：c#-4.0, xna-4.0

我的虚拟世界中显示了一个纹理模型。我遇到的问题是当我在屏幕上绘制文本时，模型在可见侧变得更暗并且部分透明。这是我调用的函数：

```
 private void DrawText()
    {
        spriteBatch.Begin();
        spriteBatch.DrawString(debugFont, "X: " + modelPosition.X + " Y: " + modelPosition.Y 
            + " Z: " + modelPosition.Z, new Vector2(150, 150), Color.White);
        spriteBatch.End(); 
    } 
```

关于如何在屏幕上显示文本时如何让模型正确渲染的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:03:31.403

使用 SpriteBatch 对渲染状态的 alpha 和其他属性有副作用。您可以在文本工作后恢复默认值，这应该可以解决这个问题。有关更多信息，请参阅这篇文章：

[http://www.riemers.net/Forum/index.php?var=1594&var2=0](http://www.riemers.net/Forum/index.php?var=1594&var2=0)

肖恩·哈格里夫斯 (Shawn Hargreaves) 提供了有关受影响的确切属性的更多信息：

[http://blogs.msdn.com/b/shawnhar/archive/2010/06/18/spritebatch-and-renderstates-in-xna-game-studio-4-0.aspx](http://blogs.msdn.com/b/shawnhar/archive/2010/06/18/spritebatch-and-renderstates-in-xna-game-studio-4-0.aspx)

# python - Pydev autogen DJANGO_SETTINGS_MODULE 环境变量？

> ID：12175159
> 
> 赞同：5
> 
> 时间：2012-08-29T09:50:21.407
> 
> 标签：python, django, eclipse, pydev, django-settings

我正在使用 Eclipse 3.7.2 和 Pydev 2.6 来开发 Django 程序。当我将 Django 从 1.3 升级到 1.4.1 时，我发现一个关于“DJANGO_SETTINGS_MODULE”环境变量的问题。当我在控制台中运行 manage.py 时，“DJANGO_SETTINGS_MODULE”首先是 None，然后通过

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "test.settings") 
```

将正确获得价值。

但是当我在 PyDev 中运行代码时，环境是在程序之前设置的“folder_name.settings”。即使在非 Django 程序中。而且我找不到任何方法来改变价值。

如何在我的程序之外设置值？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T13:46:09.073

The appropriate value for `DJANGO_SETTINGS_MODULE` can be set through the Eclipse UI:

Right click on the project folder in the explorer window

Select `Properties`

Select the `PyDev - Django` properties page. You will see a place to enter the correct setting. If this is blank, PyDev appears to choose a "reasonable" default.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:17:53.753

首先，Django 1.3 和 Django 1.4 之间的路径结构发生了变化，因此您可能只需要调整 的值`DJANGO_SETTINGS_MODULE`而不是完全重新配置项目。但是，如果`DJANGO_SETTINGS_MODULE`没有值，则需要设置它。

你可以做：

```
export DJANGO_SETTINGS_MODULE=folder_name.settings 
```

在运行 Django 命令之前（例如，`runserver`）。如果您正在使用，`mod_wsgi`则需要添加：

```
import os

os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings' 
```

有关更多信息，请参阅有关 Django 设置的[文档。](https://docs.djangoproject.com/en/dev/topics/settings/#the-django-admin-py-utility)

# sql - 在 sql server 2008 中比较和合并两个逗号分隔的字段

> ID：12175161
> 
> 赞同：0
> 
> 时间：2012-08-29T09:50:24.357
> 
> 标签：sql, sql-server, sql-server-2008

我在表中有以下内容`TopTenBrands`：

```
Brands             Cust_ID
------------------------------    
Hitachi           16402, 16407    
Hitachi           16409, 16428    
JVC               19301, 19308    
LG                21001, 21007    
LG                21001, 21007, 21008    
LG                21001, 21008    
Panasonic         27909, 27912    
Philips           28501, 28518    
Philips           28513, 28516 
```

在上表中，我有一个 LG 品牌，它拥有三行

```
LG                21001, 21007    
LG                21001, 21007, 21008    
LG                21001, 21008 
```

但是在输出表中，我希望结果是休闲

```
Brands             Cust_ID
------------------------------
Hitachi           16402, 16407    
Hitachi           16409, 16428    
JVC               19301, 19308    
LG                21001, 21007, 21008    
Panasonic         27909, 27912    
Philips           28501, 28518    
Philips           28513, 28516 
```

我想删除重复项并保留唯一 ID，并且我不希望 ID 按品牌分组。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:03:57.667

尝试这个

```
Declare @t  table(Brands Varchar(20),Cust_Id Varchar(100))
Insert Into @t 
Select 'Hitachi','16402, 16407' Union ALL Select 'Hitachi','16409, 16428' Union All
Select 'JVC','19301, 19308' Union All Select 'LG','21001, 21007' Union All    
Select 'LG','21001, 21007, 21008'  Union All Select 'LG','21001, 21008' Union All
Select 'Panasonic','27909, 27912 ' Union All Select 'Philips','28501, 28518'  Union All  
Select 'Philips','28513, 28516'

;WITH CTE AS
(
SELECT 
Rn = ROW_NUMBER() OVER(PARTITION BY LTRIM(RTRIM(Y.SplitCust_Id)),Brands ORDER BY (SELECT 1))
 ,X.Brands
 ,X.Cust_Id
 ,SplitCust_Id =LTRIM(RTRIM(Y.SplitCust_Id))
 FROM(SELECT *,CAST('<X>'+REPLACE(F.Cust_Id,',','</X><X>')+'</X>' AS XML) AS xmlfilter
      FROM @t F)X CROSS APPLY
     (SELECT fdata.D.value('.','varchar(50)') AS SplitCust_Id 
      FROM X.xmlfilter.nodes('X') AS fdata(D)) Y
)
,CTE_FINDProductsToMerge AS
( 
    SELECT Distinct Brands,SplitCust_Id 
    FROM CTE 
    WHERE Brands NOT IN (SELECT Brands FROM @t WHERE Rn=1)
)
,CTE2 AS
(
    SELECT c1.Brands, Cust_Id  = STUFF(
            ( SELECT ',' + CAST(SplitCust_Id AS VARCHAR(1000)) 
                FROM CTE_FINDProductsToMerge c2
                WHERE  c1.Brands = c2.Brands
                FOR XML PATH('')),1,1,''
            )
    FROM CTE_FINDProductsToMerge c1
    GROUP BY Brands
)

SELECT Brands,Cust_Id FROM @t  WHERE Brands NOT IN (SELECT Brands From CTE2)
UNION ALL
SELECT Brands,Cust_Id From CTE2
ORDER BY 2 
```

**输出：**

```
Brands  Cust_Id
Hitachi 16402, 16407
Hitachi 16409, 16428
JVC 19301, 19308
LG  21001,21007,21008
Panasonic   27909, 27912 
Philips 28501, 28518
Philips 28513, 28516 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:30:43.803

如果你想删除重复`Brands`的，你可以这样做：

```
SELECT brand, 
(SELECT top 1 cust_ID 
        FROM TopTenBrands 
        WHERE brand = ttb.brand) 
FROM TopTenBrands ttb
GROUP BY brand; 
```

如果你不想使用`GROUP BY`

```
SELECT DISTINCT brand, 
(SELECT top 1 cust_ID 
        FROM TopTenBrands 
        WHERE brand = ttb.brand) AS cust_ID
FROM TopTenBrands ttb; 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!3/287c9/9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:09:32.990

您必须首先对[concat](https://stackoverflow.com/questions/273238/how-to-use-group-by-to-concatenate-strings-in-sql-server)结果进行分组并将它们插入到临时表中。然后您可以遍历临时表并为每一行执行类似的操作[并](https://stackoverflow.com/questions/5993201/recursive-sql-to-split-csv-to-table-rows)选择不同的分隔符分隔的行并更新该行的临时表。

我不知道你的具体数据模型，但我认为你可以有效地组织你的表模式。

# bash - 执行后续命令/脚本，在当前命令/脚本之后是 ^C

> ID：12175165
> 
> 赞同：10
> 
> 时间：2012-08-29T09:50:30.410
> 
> 标签：bash, shell, scripting

我找不到我的问题的答案。在使用 ^C 退出当前命令/bash 脚本后，我需要能够执行 shell 命令/bash 脚本。

换句话说：我有一个正在运行的脚本，就在我从中 ^C 之后，我希望另一个脚本或命令在之后立即启动。如何做到这一点？

我试过`./first.sh; echo something`没有运气。

我可以尝试同时运行脚本，其中一个将等待/侦听另一个完成，然后执行清理命令并退出。但是我需要一种在一个命令中启动它们的方法。

解决这个问题最合适的方法是什么？

谢谢

**编辑：** 我想我已经明白了......从第一个脚本我可以在最后用 & 启动另一个脚本，这样它就可以进入后台。似乎与 ^C 从第一个退出一起工作（第二个连续工作）。关于更好的解决方案的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T09:59:11.300

`./script1.sh && ./script2`即如果第一次成功，则执行第二次。

`./script1.sh || ./script2`即如果第一次不成功，则执行第二次。

或者在 script1 中，您可以捕获退出信号并生成第二个进程。像这样的东西：

s1：

```
#!/bin/bash

trap "./s2.sh" SIGINT

echo "hello"
sleep 100 
```

s2：

```
#!/bin/bash

echo "goodby" 
```

会议：

```
$ ./s1.sh 
hello
^Cgoodby 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T09:58:43.843

你需要的东西：

1.  您需要捕获 sigint (ctrl-c)，因此当您按下 ctrl-c 时脚本不会完成
2.  命令执行完毕后，需要查看执行完毕的原因。如果命令被`SIGINT`（信号 2）中断，则该命令的退出代码将为 130 (128 + 2)。

你这样做：

```
trap "echo ctrl c was pressed" SIGINT
sleep 100
[ "$?" = 130 ] && echo "you've interrupted the previous command with ctrl-c" 
```

例子：

```
$ bash 1.sh
^Cctrl c was pressed
you've interrupted the previous command with ctrl-c 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T10:08:59.707

[Bash 初学者指南第 12 章。捕捉信号](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_12_02.html)

> > 这是一个非常简单的示例，从用户那里获取 Ctrl+C，然后打印一条消息。当你试图在没有指定 KILL 信号的情况下终止这个程序时，什么都不会发生：
> 
> ```
> #!/bin/bash
> # traptest.sh
> 
> trap "echo Booh!" SIGINT SIGTERM
> echo "pid is $$"
> 
> while :           # This is the same as "while true".
> do
>         sleep 60  # This script is not really doing anything.
> done 
> ```

# c++ - 申请结束时间和开始时间

> ID：12175167
> 
> 赞同：-2
> 
> 时间：2012-08-29T09:50:40.027
> 
> 标签：c++, sqlite, qt

我是 Qt 框架的新手，我必须在我的项目中开发一个应用程序，我需要在 symbian 上开发一个应用程序它即将在移动设备中跟踪应用程序的开始时间和结束时间..

任何人都可以分享如何执行此任务的信息..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:56:12.537

您可以使用`QDateTime::currentDateTime()`获取时间（[QDateTime](http://qt-project.org/doc/qt-4.8/qdatetime.html#currentDateTime)），然后从那里您可以存储任何您喜欢的，我会从您的问题标签中假设它会在 SQLite 数据库中，所以您只需使用其中一种标准`QSqlQuery`方法即可它。开始时只需在应用程序加载时添加它，`main()`最后您可以跟踪`quit()`信号并从那里开始。

# javascript - 如何在一个 onclick 按钮上使用一个 javascript 函数选择多个文本字段？

> ID：12175168
> 
> 赞同：2
> 
> 时间：2012-08-29T09:50:39.387
> 
> 标签：javascript, html, onclick

我已经在这几个小时了，搜索了无数的论坛。我希望在调用一个函数以应用到带有 onclick 按钮的多个文本字段方面得到一些帮助。现在我有一个工作函数，它将选择给定文本框中的所有文本并将其复制到剪贴板。我需要这个功能才能选择多个框中的所有文本并一键复制所有文本。

HTML 文本框

```
<form name="data_entry" id="data_frm" action="#">
<table cellspacing="5" cellpadding="3">

<tr><td>Root Cause:</td>
<td><input type="text" size="35" maxlength="250" name="cause" id="txt_cause">
</td></tr>

<tr><td>Actions Taken:</td>
<td><input type="text" size="35" maxlength="300" name="actions" id="txt_actions">
</td></tr>

<!--COPY BUTTON-->            
<td><input type="button" name="clipboard_copy" value="Copy" onClick="javascript:selectcopy('data_entry.caller')"></td>

</table>
</form> 
```

它调用的Javascript代码是

```
<SCRIPT LANGUAGE="JavaScript">
function selectcopy(fieldid)
{
var field=document.getElementById(fieldid) || eval('document.'+fieldid)
field.select()
if (field.createTextRange)
    {
    field.createTextRange().execCommand("Copy")
    }
} 
```

所以就目前而言，复制按钮将复制“调用者”文本字段，但我需要它一键复制两个（以及更多字段）。另外，如果可能的话，我需要它在复制时将每个文本字段构造在自己的行上，以便您可以粘贴它并单独注意每一行？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:00:53.230

获取所有文本字段值并将它们连接起来（在字段之间使用 \n 强制换行），然后在结果字符串上使用 execCommand。

# java - 画笔类型 GUI 中的paintComponent() vs paint() 和 JPanel vs Canvas

> ID：12175174
> 
> 赞同：16
> 
> 时间：2012-08-29T09:50:59.137
> 
> 标签：java, swing, user-interface, awt, jpanel

我从[这个](https://stackoverflow.com/questions/12107163/specifying-the-location-of-canvas-in-swing)、[这个](https://stackoverflow.com/questions/12158538/clear-foreground-of-a-drawing-panel-in-swing)和[这个](https://stackoverflow.com/questions/12137465/mouseevent-on-jpanel-wrong-coordinate)帖子中得到了一些有趣的想法和批评（有关相关 GUI 的代码，请参阅最后一篇帖子）。尽管如此，我仍然对一些事情感到很困惑。主要是，显示用户介绍图形的最便宜的方式是什么？

更具体地说，我通过在`paintComponent()`方法`JPanel`中创建此类的对象以及方法（并相应地）来使用类中的`MouseDragged()`方法。`paintComponent(getGraphics())``AuxClass2``AuxClass1`

显然，使用`getGraphics()`and`paintComponent()`而不是`repaint()`是坏主意，我怀疑与内存使用有关。`AuxClass2`每次用户拖动鼠标时调用也是一个坏主意。

JPanel vs Canvas（即 swing vs awt）也有点令人困惑。什么时候用什么？

我一直在寻找一种解决方法，但没有找到，尤其是对于`getGraphics()`方法：图形如何添加到面板中？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-29T10:24:44.403

## 重与轻

基本上来说，重量级组件与它自己的本地节点相关联，而轻量级组件共享一个共同的本地节点。

一般来说，混合重量和重量轻的组件并不是一个好主意，因为 z 顺序存在问题，并且根据我的经验（即使现在应该更好），可能会出现绘画问题。

这就是不鼓励您使用`Canvas`该类的原因，可能是因为您试图将其放置在轻量级组件上……我猜

## 控制的错觉

[对于Swing API](http://docs.oracle.com/javase/7/docs/api/javax/swing/package-summary.html)的新手来说，最大的问题之一是您错觉您对绘画过程有某种控制，而您却没有。接受它更容易。

您能做的最好的事情是请求重绘管理器尽早执行更新。

此外，调用`getGraphics`不保证返回非空值。

## 事情的正确顺序

`paint`对比`paintComponent`

这里的问题是`paint`做许多重要的工作，打电话`paintComponent`只是其中之一。

在 Swing 中，我们非常鼓励`paintComponent`在我们想要执行自定义绘制时使用，这通常是组件上的最低级别，并且在绘制子组件之前调用。

如果您在调用之后覆盖`paint`然后在上绘制，最终会在所有内容之上绘制，这并不总是理想的结果`Graphics``super.paint`

即使是这样，子组件也可以独立于其父容器进行绘制，从而使绘制“覆盖”您可能添加的任何绘制效果

**有用的链接**

*   [在 Swing 中绘画](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)（讨论绘画过程的工作原理）
*   [执行自定义绘画（在 Swing 中）](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [2D 图形轨迹](http://docs.oracle.com/javase/tutorial/2d/index.html)

**离别的思念**

只有实际添加到组件（附加到本机对等方）的组件才会`paint`调用该方法。因此，尝试绘制到尚未添加到容器中的组件是毫无意义的......

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-29T11:15:50.423

> ..画笔式图形用户界面..

使用 a`BufferedImage`作为绘画表面。将其显示在`JLabel`. 将标签放在`JScrollPane`.

`bufferedImage.getGraphics()`根据需要调用，但`dispose()`在完成后记住它，然后调用`label.repaint()`。

始终使用 Swing 组件，不要覆盖任何东西。

这是[使用图像作为绘画表面的示例](https://stackoverflow.com/a/10628553/418556)。

![](../Images/4e29ac467fd97fd662ee99ecb260ee9b.png)

这[是一个更好的](https://stackoverflow.com/a/12216139/418556)！

![](../Images/a974574d3b419642e70278b4ba954019.png)

我并不是说***屏幕截图***更好，而是代码更好。;)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-29T10:36:59.883

> 我一直在尝试寻找一种解决方法，但没有找到一种解决方法，尤其是对于 getGraphics() 方法：如何将图形添加到面板中？

您记得需要将什么绘制为变量并在paintComponent() 中使用它。例如，您在其他问题中似乎试图做的事情如下所示：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class PaintRectangle extends JPanel {

    private Point mouseLocation;

    public PaintRectangle() {
        setPreferredSize(new Dimension(500, 500));

        MouseAdapter listener = new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                updateMouseRectangle(e);
            }

            private void updateMouseRectangle(MouseEvent e) {
                mouseLocation = e.getPoint();
                repaint();
            }

            @Override
            public void mouseDragged(MouseEvent e) {
                updateMouseRectangle(e);
            }

            @Override
            public void mouseReleased(MouseEvent e) {
                mouseLocation = null;
                repaint();
            }
        };
        addMouseListener(listener);
        addMouseMotionListener(listener);
    }

    private Rectangle getRectangle() {
        if(mouseLocation != null) {
            return new Rectangle(mouseLocation.x - 5, mouseLocation.y - 5, 10, 10);
        }
        else {
            return null;
        }
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Rectangle rectangle = getRectangle();
        if(rectangle != null) {
            Graphics2D gg = (Graphics2D) g;
            gg.setColor(Color.BLUE);
            gg.fill(rectangle);
            gg.setColor(Color.BLACK);
            gg.draw(rectangle);
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.getContentPane().add(new PaintRectangle());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

另请参阅[http://docs.oracle.com/javase/tutorial/uiswing/painting/](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

# javascript - 触发 mouseup 时如何检测鼠标是否在移动？

> ID：12175176
> 
> 赞同：7
> 
> 时间：2012-08-29T09:51:03.713
> 
> 标签：javascript, mouseevent

我试图通过拖动来实现页面全景。在我的实现中，用户释放鼠标按钮后页面会移动一段时间，就像在谷歌地图中拖动地图一样。现在我想防止这种影响，当用户释放按钮时鼠标不再移动。问题是，我只是不知道如何在`mouseup`事件触发时检测鼠标是否真的移动。

现在我试图通过计算拖动速度来解决这个问题，然后将速度与预先设定的“灵敏度”进行比较，这在大多数情况下都有效，但有时会失败。

[jsFiddle](http://jsfiddle.net/cww55/6/)的简化示例。玩小提琴时，请在 FF 中使用 middlebutton，draggabble div “粘”在左侧按钮上。

伪代码：

```
AniMove = function (doc, element, sensitivity, panspeed, duration) {
    var mouseDown = function (e) {
            sTime = new Date();
            originalX = mouseX = e.clientX;
            originalY = mouseY = e.clientY;
            /* addEventListeners mousemove & mouseup for document */
            return;
        },
        mouseMove = function (e) {
            /* Setting new position for #square + new mouseX & Y */
            return;
        },
        mouseUp = function () {
            var dc = 1;
                /* removeEventListeners mousemove & mouseup */
                eTime = new Date();
                vX = Math.round((50 * panspeed) * (originalX - mouseX) / (eTime - sTime));
                vY = Math.round((50 * panspeed) * (originalY - mouseY) / (eTime - sTime));

            // Check whether mouse is moving or not,
            // now checking the speed against sensitivity, which is not reliable

                if (Math.abs(vX) < sensitivity){vX = 0;}
                if (Math.abs(vY) < sensitivity){vY = 0;}

                for (n = 0; n < dur; n++, dc += 0.001) {
                    vX = Math.round(vX  * dec / dc);
                    vY = Math.round(vY * dec / dc);
                    delay[n] = setTimeout(endDrag(n, vX, vY), n * 50);
                }
                return;
            },
            endDrag = function (n, vX, vY) {
                /* Setting new position for #square */
                return;
            },
            dec = 1 - 120 / duration;
    panspeed *= -0.01;
    duration /= 50;
    element.addEventListener('mousedown', mouseDown, false);    
}
drag = new AniMove(document, document.getElementById('square'), 20, 100, 500); 
```

那么，在这种情况下是否甚至可以检测鼠标是否在移动？也许我需要一种不同的方法来完成这项任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:09:23.917

一个想法是在 mouseUp 之后保持 mouseMove 侦听器活动 0.5 秒（设置计时器），如果鼠标在那 0.5 秒内移动（即鼠标位置与 mouseUp 时的位置不同），则假设存在运动并且动画它。

您可能需要使用 0.5 秒来查看最佳感觉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:55:06.507

您希望视图继续移动并逐渐停止，对吗？

您需要做的就是注意它在 MouseUp 事件之前移动的速度，然后在半秒左右的时间内以增量降低速度。如果按钮没有按下，鼠标是否继续移动应该是无关紧要的。

一旦你“放开球”，它滚动的速度与你的手接下来的动作无关。

因此，您需要在按钮按下时跟踪鼠标速度，然后在按钮向上时“淡出”。

在您的情况下，如果释放按钮时鼠标没有移动，则类比是用户“抓住了球”。所以它应该立即停止。

所以你不需要做任何特别的事情来处理这种情况。如果用户按下按钮停止鼠标，则停止平移。

# objective-c - 使用objective-c或jquery mobile搜索pdf文件的内容

> ID：12175183
> 
> 赞同：1
> 
> 时间：2012-08-29T09:51:30.387
> 
> 标签：objective-c, ios, search, pdf, jquery-mobile

我制作了一个列出 16 个 pdf 文件的应用程序，它们被打包在应用程序中。我需要一个搜索功能，它不仅可以搜索 pdf 的标题，还可以搜索 pdf 的内容。

这是否可以使用objective-c/ios 或者最好使用jquery mobile？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:57:30.640

You won't be able to do that using jQuery mobile. You can use a library like [pspdfkit](http://pspdfkit.com/) for achieving this using iOS/objective-c

# c# - 自动标记库或脚本

> ID：12175185
> 
> 赞同：0
> 
> 时间：2012-08-29T09:51:36.630
> 
> 标签：c#, javascript, asp.net, .net

嗨，我正在使用 ASP.Net 构建自己的新闻网站，我想知道是否有可以使用的自动标记库/脚本。

从某种意义上说，当我创建一篇新的新闻文章时，我指定了我想要标记的单词，库或脚本将搜索文本并在该位置插入一个锚元素。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:43:36.160

这是一个脚本，听起来它可以满足您的大部分需求：

[http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)

包含脚本后，将突出显示类添加到您的 css：

```
.highlight { background-color: yellow } 
```

编写一些 javascript 来选择要突出显示的项目，例如：

```
$('li').highlight('bla');

// all occurences of 'bla' in a li element. 
```

# c++ - fprintf、字符串和向量

> ID：12175186
> 
> 赞同：0
> 
> 时间：2012-08-29T09:51:39.657
> 
> 标签：c++, c, string, vector, printf

> **可能重复：**
> [c ++ - 字符串上的 printf 打印乱码](https://stackoverflow.com/questions/3634766/c-printf-on-strings-prints-gibberish)

我想将几个字符串写入文件。字符串是

```
37 1 0 0 0 0
15 1 0 0 0 0
33 1 0 0 0 0
29 1 0 0 0 0
18 1 0 0 0 0
25 1 0 0 0 0 
```

我首先想将每一行存储为字符串数组的元素，然后调用相同的字符串数组并将其元素写入文件。

```
#include <stdio.h>
#include <vector>
#include <string>
using namespace std;

int writeFile() {

  char line[100];
  char* fname_r = "someFile_r.txt"
  char* fname_w = "someFile_w.txt"; 
  vector<string> vec;

  FILE fp_r = fopen(fname_r, "r");
  if(fgets(line, 256,fp_r) != NULL)   {
     vec.push_back(line);
  }

  FILE fp_w = fopen(fname_w, "w");
  for(int j = 0; j< vec.size(); j++) {
    fprintf(fp_w, "%s", vec[j]); // What did I miss? I get funny symbols here. I am expecting an ASCII
  }

  fclose(fp_w);
  fclose(fp_r);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T09:52:54.353

格式说明符`"%s"`需要一个 C 风格的以空字符结尾的字符串，而不是一个`std::string`. 改成：

```
fprintf(fp_w, "%s", vec[j].c_str()); 
```

由于这是 C++，您应该考虑使用[`ofstream`](http://en.cppreference.com/w/cpp/io/basic_ofstream)类型安全并接受`std::string`作为输入的替代：

```
std::ofstream out(fname_w);
if (out.is_open())
{
    // There are several other ways to code this loop.
    for(int j = 0; j< vec.size(); j++)
        out << vec[j];
} 
```

同样，[`ifstream`](http://en.cppreference.com/w/cpp/io/basic_ifstream)用于输入。发布的代码有潜在的缓冲区溢出：

```
char line[100];
...
if(fgets(line, 256,fp_r) != NULL) 
```

`line`最多可以存储`100`字符，但`fgets()`说明它可以容纳`256`. Using[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)在填充 a 时消除了这种潜在的危险`std::string`：

```
std::ifstream in(fname_r);
std::string line;
while (std::getline(in, line)) vec.push_back(line); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:56:26.500

在这种情况下 vec[j] 是 std::string 对象。但是需要 c 风格的`fprintf`以`s`空字符结尾的字符串。

```
for(int j = 0; j< vec.size(); j++) {
    fprintf(fp_w, "%s", vec[j]); 
} 
```

您只需要从 std::string 获取指向 c 样式字符串的指针。可以使用`c_str`方法：

```
for(int j = 0; j< vec.size(); j++) {
    fprintf(fp_w, "%s", vec[j].c_str()); 
} 
```

在任何情况下，您都混合了 C++ 和 C 代码。它很丑。使用 std::fstream 更好。

# javascript - 使用表单和 html 组件自动调整窗口大小

> ID：12175187
> 
> 赞同：1
> 
> 时间：2012-08-29T09:51:40.353
> 
> 标签：javascript, forms, extjs, extjs4

我正在尝试创建一个弹出窗口，其中将包含一个表单和按钮。因为我想添加一些自定义样式，所以我在窗口顶部添加了一个 div（创建一个新组件）并将其插入到窗口项中。问题是这个 div 占据了我窗口的整个高度，除了带有`!important`后缀的 css 高度规则之外，什么都没有。我尝试添加`style: {height: 45}`到 autoEl 定义，设置组件的高度但没有成功。使用 css 时，虽然我的表单（使用 autoHeight: true）不适合窗口，因为它缺少这 45 个像素并且被按钮隐藏。

这是我的窗口定义。

```
Ext.define('Dialog', {
    extend : 'Ext.window.Window',    
    modal : false,
    width : 240,
    cls: 'sch-pdfexportdialog',
    frame : false,
    header : false,
    title : null,
    layout : 'fit',
    draggable : true,
    padding: 0,

    autoHeight: true,
    headerTpl: Ext.create('Ext.XTemplate', 
            '<h4>{headerText}</h4>'+
            '<span id="close"></span>'
    ),

    initComponent: function () {
        var me        = this;

        Ext.apply(this, {
            items : [
                me.createHeader(),
                me.formPanel
            ],
            fbar : {
                xtype: 'button',
                scale: 'medium',
                text: this.cancelButtonText,
                handler: function() {
                    this.hideDialog();
                },
                scope: this
            }          
        });  

        this.callParent(arguments);
    },

    createHeader: function () {
        var me = this;

        return new Ext.Component({
            autoEl: { 
                tag: 'div', 
                cls: 'sch-pdfexportdialog-header', 
                html: me.headerTpl.apply({ headerText: me.dialogHeader })
            }
        });
    }
}) 
```

这就是它现在的样子：

![对话的当前状态](../Images/1f09afd280318851178c280547f2b241.png)

我已经通过在表单的“调整大小”事件上添加一个侦听器并通过缺少 45px 的那些更新对话框的高度来临时修复它，但我想让它更干净。

* * *

编辑

我对组件进行了一些修改，以使用 Ext.panel.Header，但这在 ext 的“initContainer”方法中给了我“容器为空”错误：/

```
Ext.define('Dialog', {
    extend : 'Ext.window.Window',    
    modal : false,
    width : 240,
    frame : false,
    header : false,
    title : null,
    layout : 'fit',
    draggable : true,
    padding: 0,

    autoHeight: true,
    headerTpl: new Ext.XTemplate(
            '<h4>{headerText}</h4>',
            '<span id="{id}-btnClose"></span>'
    ),
    headerText: 'Foo',

    initComponent: function () {
        var me        = this;

        Ext.apply(this, {
            header: me.createHeader(),
            items : [
                me.formPanel
            ],
            fbar : {
                xtype: 'button',
                scale: 'medium',
                text: this.cancelButtonText,
                handler: function() {
                    this.hideDialog();
                },
                scope: this
            }          
        });  

        this.callParent(arguments);
    },

    createHeader: function () {
        var me = this;

        return {
            renderTpl: me.headerTpl,
            renderData: {
                headerText: me.headerText
            },
            childEls: ["btnClose"]
        }
    }
}) 
```

# iphone - 滑动后未调用 didRotateFromInterfaceOrientation

> ID：12175189
> 
> 赞同：0
> 
> 时间：2012-08-29T09:51:50.933
> 
> 标签：iphone, objective-c, swipe, ios-4.2, landscape-portrait

我有以下问题：

我有一个 UITabBarController，它在每个选项卡中显示关于例如 CD 的不同信息。用户可以使用 UIInterfaceOrientationLandscape 只看到封面。要转到下一张 CD，用户可以返回并选择一张新 CD，信息会再次显示在 UITabBarController 中。（所有这些都很好。）此外，为了更轻松地观看大量 CD，可以通过滑动手势（横向或纵向）转到下一张 CD。然后我只需更改tabBarController.viewControllers 并设置显示新CD 信息的viewControllers。现在的问题是：在我刷到下一张 CD 之后，didRotateFromInterfaceOrientation 方法不再被调用，我无法从横向模式更改为纵向模式。滑动手势可防止调用 didRotateFromInterfaceOrientation 方法！我只有 iOS 4.2.1 有这个问题。使用 iOS 5，一切都可以完美运行！

有谁知道iOS 4发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:00:31.377

您需要将 shouldAutorotateToInterfaceOrientation YES 返回到 TABBARView 控制器的所有基本控制器

希望这会有所帮助

# php - 自动缩进 HTML 代码并显示它

> ID：12175190
> 
> 赞同：2
> 
> 时间：2012-08-29T09:51:53.483
> 
> 标签：php, html, formatting, html-parsing

在 PHP 中显示 HTML 代码时，如果我想缩进标签，最好的方法是什么？

例如，

```
<?php
$html = '<div><p><span>some text</span></p></div>';

echo htmlspecialchars($html);
?> 
```

会给`<div><p><span>some text</span</p></div>`。

相反，我想展示类似的东西，

```
<div>
    <p>
        <span>some text</span>
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T07:02:06.020

您可以使用 htmLawed
[http://www.bioinformatics.org/phplabware/internal_utilities/htmLawed/](http://www.bioinformatics.org/phplabware/internal_utilities/htmLawed/)

这将是您的代码：

```
<?php
  require("htmLawed/htmLawed.php");
  echo "<pre>";
  echo htmlspecialchars(
         htmLawed('<div><p><span>some text</span></p></div>', array('tidy'=>4))
       );
  echo "</pre>";
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T04:19:52.590

您可能还想使用 HEREDOC。

```
 $html = <<<NICE

 <div>
     <p>
         <span>some text</span>
     </p>
 </div>

 NICE;

 echo "<pre>";
 echo htmlspecialchars( $html );
 echo "</pre>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T10:27:43.560

您可能需要了解[PHP Tidy 扩展](http://id.php.net/manual/en/book.tidy.php)。

Tidy 是 Tidy HTML clean and repair 实用程序的绑定，它不仅允许您清理和以其他方式操作 HTML 文档，还允许您遍历文档树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T09:55:24.603

如果你知道你希望它如何输出（就像你的字符串在你制作它时的样子），你可以很容易地这样做：

```
$html = "<div>\n\t\t<p>\n\t\t\t<span>some text</span>\n\t\t</p>\n\t</div>"; 
```

但请务必使用双引号，而不是单引号。

在源代码中查看的输出：

```
<div>
    <p>
        <span>some text</span>
    </p>
</div> 
```

如果你想让它自动完成，那么你可能不得不等待另一个答案，我真的不太了解正则表达式来提供帮助，而且我不使用 DOM（甚至不确定它是否适用于这种情况） .

# android - 应用程序被忽略时的通知声音

> ID：12175191
> 
> 赞同：0
> 
> 时间：2012-08-29T09:51:53.790
> 
> 标签：android

我想知道是否有可能/如何让应用程序以通知声音提醒用户提醒用户（基本上就像接收短信），如果用户忽略声音，它会在 5 分钟内再次关闭.

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:59:42.220

使用计时器并在 5 分钟后将其杀死。

# c++ - 是否可以“成员函数指针”指向同一类中的成员函数

> ID：12175194
> 
> 赞同：0
> 
> 时间：2012-08-29T09:51:59.160
> 
> 标签：c++, pointers, function-pointers

## 代码

```
class cat{

        public:
           void walk(){
                printf("cat is walking \n");
           }

           void myAbc(){
               void (*pKoo)();
               pKoo = &this->walk;
           }

          void myDef(){
               void(cat::*pFoo)();
               pFoo = &this->walk;
          }
        }

    }; 
```

## 结果

1.  无效 (*pKoo)(); - 没问题
2.  pKoo = &this->walk; - 编译错误
3.  无效（猫：：* pFoo）（）；- 没问题
4.  pFoo = &this->walk; - 编译错误；

## 问题

*   为什么没有2不可能？如果不可能，那1号有什么用？
*   为什么没有4不可能？如果不可能，那3号有什么用？

请帮助进行概念解释。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:54:11.090

```
void (*pKoo)();                
pKoo = &this->walk; 
```

给你错误，因为函数指针类型与你分配给它的地址的函数类型不匹配。

的类型`walk()`是：

```
void (cat::*)(void); 
```

* * *

```
void(cat::*pFoo)();
pKoo = &this->walk; 
```

应该：

```
pKoo = &cat::walk; 
```

该方法`walk`属于该类`cat`，而不属于该类的任何特定实例。因此，您不能使用`this->walk()`，但您需要使用类名限定方法名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T10:24:53.177

> 为什么没有2不可能？

我的编译器给出了一条错误消息：

```
cannot convert ‘void (cat::*)()’ to ‘void (*)()’ in assignment 
```

这意味着您不能将指向成员函数的指针转换为指向函数的指针。它们是不兼容的类型；指向函数的指针可以直接调用，而指向成员函数的指针需要应用于对象。因此，您分配给的类型必须是指向成员函数的指针，或者`void (cat::*)();`，正如您在 3 中正确使用的那样。

> 如果不可能，那1号有什么用？

它用于存储指向静态或非成员函数的指针。

> 为什么没有3不可能？

（我假设您的意思是 4，而不是 3。）我的编译器给出了错误消息：

```
ISO C++ forbids taking the address of a bound member function to form a 
pointer to member function.  Say ‘&amp;cat::walk’ 
```

For some reason, you're not allowed to take the address of a member function using an object (or pointer); you have to use the class name instead. We can only speculate on why this isn't allowed; perhaps because it's not entirely clear which override should be chosen if it's virtual, or perhaps for some other reason.

Whatever the reason, use the allowed syntax: `pFoo = &cat::walk;`

# php - 将 www.domain.com/example.com 重定向到 example.com

> ID：12175197
> 
> 赞同：4
> 
> 时间：2012-08-29T09:52:04.647
> 
> 标签：php, redirect

许多年前，我读到有一个简单的 php 脚本，可以像这样将您的网站重定向`http://example.com/google.com`到`google.com`，它适用于正斜杠右侧的任何域。我忘记了这个脚本是什么或在哪里可以找到它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T09:54:54.650

如果您在文档根目录中创建一个 htaccess 文件，并添加以下内容：

```
RewriteEngine On
RewriteRule ^/?([a-z0-9-.]+)$ http://$1/ [L,R] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:54:46.663

如果您希望您的重定向是永久的，请使用 301 重定向。这是搜索引擎安全的，智能浏览器可以使用它来升级书签。

例如[http://www.phpjunkyard.com/tutorials/php-redirect.php](http://www.phpjunkyard.com/tutorials/php-redirect.php)

```
<?php 
    header("HTTP/1.1 301 Moved Permanently"); 
    header("Location: http://www.New-Website.com"); 
?> 
```

**编辑**（对以下评论的回应）

这篇文章（http://stackoverflow.com/questions/8775374/how-to-get-everything-after-the-domain-name-into-a-string）将有助于建立要重定向到的域。如果我们将其构建到诸如 之类的函数中`get_url()`，则可以将上面的内容更改为

```
<?php 
    my_url = get_url();

    // CHECK IT IS A SAFE URL

    // REDIRECT
    header("HTTP/1.1 301 Moved Permanently"); 
    header("Location: " . my_url); 
?> 
```

# java - 在 Spring 中维护 Hessian Web 服务调用之间的 HTTP 会话

> ID：12175199
> 
> 赞同：0
> 
> 时间：2012-08-29T09:52:15.713
> 
> 标签：java, spring, session, hessian, spring-remoting

我已经根据[Spring 远程处理文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/remoting.html)设置了我的服务，但是在客户端应用程序中，我想调用服务方法，同时重用相同的 HTTP 会话，因为我想在服务器上存储与会话相关的数据（而不是查询每次通话的数据）。

这可能吗？

客户端spring服务配置：

```
<bean id="partnersServiceImpl" class="org.springframework.remoting.caucho.HessianProxyFactoryBean">
    <property name="serviceUrl" value="http://localhost:8080/partners" />
    <property name="serviceInterface" value="somePackage.PartnersService" />
</bean> 
```

目前，每个调用的方法都会生成一个新的 sessionID：

```
PartnersService partners = (PartnersService) context.getBean("partnersServiceImpl");

List<?> partnersList = partners.getSomeData(2011); // Will have one SessionID
partnersList = partners.getSomeData(2012); // Will have a new SessionID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:45:02.767

查看源代码[`HessianProxy.sendRequest()`](http://grepcode.com/file/repo1.maven.org/maven2/com.caucho/hessian/3.1.3/com/caucho/hessian/client/HessianProxy.java#HessianProxy.sendRequest%28java.lang.String%2Cjava.lang.Object%5B%5D%29)- 它使用标准[`URLConnection`](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html)连接到服务器并且不处理任何 cookie。因此，我相信 Hessian 根本不支持 cookie。毕竟 HTTP 只是一种传输协议，而 cookie 是严格与浏览器相关的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:52:43.557

尝试将此代码放在应用程序的最开始：

```
CookieHandler.setDefault( new CookieManager( null, CookiePolicy.ACCEPT_ALL ) ); 
```

这是 cookie 支持激活的简单设置。有关更多信息，请参阅 javadocs。我也有一个 Hessian 远程处理，这就是诀窍。

# c++ - 条件跳转或移动取决于函数调用上的未初始化值

> ID：12175200
> 
> 赞同：2
> 
> 时间：2012-08-29T09:52:19.780
> 
> 标签：c++, valgrind

我正在研究这个问题一段时间，但我不知道为什么它不起作用。该代码只是用于解决模拟问题的工作程序的扩展。我刚刚在结构中添加了两个字符串变量，并且还调整了必要的函数，以便将附加参数移交。Valgrind 显示大约 20 种不同的*条件跳转或移动取决于未初始化的值*错误。所有这些都提供相同的错误消息：

```
Uninitialised value was created by a stack allocation
at 0x401E23: addproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:360) 
```

下面是各自的功能：

```
typedef struct tproxel *pproxel;

typedef struct tproxel {
    int     id;                  /* unique proxel id for searching    */
    int     s;                   /* discrete state of SPN             */
    int     tau1k;               /* first supplementary variable      */
    int     tau2k;               /* second supplementary variable     */
    double  val;                 /* proxel probability                */
    string path;                 /* previous path                     */
    string output;               /* previous output                   */
    pproxel left, right;         /* pointers to child proxels in tree */
} proxel;

/* adds a new proxel to the tree */
void addproxel(int s, int tau1k, int tau2k, double val, string &path, string &output) {
    proxel *temp, *temp2;
    int cont = 1,id;

    /* Alarm! TAUMAX overstepped! */
    if (tau1k >= TAUMAX) {
        //  printf(">>> %3d %3d %3d %7.5le \n", s, tau1k, val, TAUMAX);
        tau1k = TAUMAX - 1;
    }

        /* compute id of new proxel */
    id = TAUMAX*(TAUMAX*s+tau1k)+tau2k;

    /* New tree, add root */
    if (root[sw] == NULL) {
        root[sw] = insertproxel(s,tau1k, tau2k, val, path, output);
        root[sw]->left = NULL;
        root[sw]->right = NULL;
        return;
    }

    /* Locate insertion point in tree */
    temp = root[sw];    
    while (cont == 1) {
        if ((temp->left != NULL) && (id < temp->id))
            temp = temp->left;
        else
            if ((temp->right != NULL) && (id > temp->id))
                temp = temp->right;
            else
                cont = 0;
    }

    /* Insert left leaf into tree */
    if ((temp->left == NULL) && (id < temp->id)) {
        temp2        = insertproxel(s, tau1k,tau2k, val, path, output);
        temp->left   = temp2;
        temp2->left  = NULL;
        temp2->right = NULL;
        return;
    }

    /* Insert right leaf into tree */
    if ((temp->right == NULL) && (id > temp->id)) {
        temp2        = insertproxel(s, tau1k,tau2k, val, path, output);
        temp->right  = temp2;
        temp2->left  = NULL;
        temp2->right = NULL;
        return;
    }

    /* Proxels have the same id, just add their vals */
    if (id == temp->id) {
        temp->val += val;
        return;
    }
    printf("\n\n\n!!!!!! addproxel failed !!!!!\n\n\n");
}

 /* compute size of tree */
int size(proxel *p) {
    int sl, sr;
    if (p == NULL)
        return(0);
    sl = size(p->left);
    sr = size(p->right);
    return(sl+sr+1);
} 
```

在添加两个字符串变量之前，代码工作得很好，但现在我只得到内存访问违规。经过数小时尝试使代码正常工作后，我不知道可能出了什么问题。

我希望有人能告诉我我缺少什么，任何帮助将不胜感激。

**编辑：**

我已将@Jens 指出的内容更改回原始程序中的工作代码，现在我遇到了不同的错误：

```
==1900== 1 errors in context 1 of 4:
==1900== Invalid read of size 4
==1900==    at 0x5159218: std::string::assign(std::string const&) (in /usr/lib/libstdc++.so.6.0.13)
==1900==    by 0x401CF1: insertproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:347)
==1900==    by 0x401E48: addproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:374)
==1900==    by 0x402195: main (HNMM.cpp:465)
==1900==  Address 0xfffffffffffffff8 is not stack'd, malloc'd or (recently) free'd
==1900== 
==1900== 
==1900== 1 errors in context 2 of 4:
==1900== Use of uninitialised value of size 8
==1900==    at 0x5159218: std::string::assign(std::string const&) (in /usr/lib/libstdc++.so.6.0.13)
==1900==    by 0x401CF1: insertproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:347)
==1900==    by 0x401E48: addproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:374)
==1900==    by 0x402195: main (HNMM.cpp:465)
==1900==  Uninitialised value was created by a heap allocation
==1900==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==1900==    by 0x401C57: insertproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:336)
==1900==    by 0x401E48: addproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:374)
==1900==    by 0x402195: main (HNMM.cpp:465)
==1900== 
==1900== 
==1900== 1 errors in context 3 of 4:
==1900== Conditional jump or move depends on uninitialised value(s)
==1900==    at 0x51591A5: std::string::assign(std::string const&) (in /usr/lib/libstdc++.so.6.0.13)
==1900==    by 0x401CF1: insertproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:347)
==1900==    by 0x401E48: addproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:374)
==1900==    by 0x402195: main (HNMM.cpp:465)
==1900==  Uninitialised value was created by a heap allocation
==1900==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==1900==    by 0x401C57: insertproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:336)
==1900==    by 0x401E48: addproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:374)
==1900==    by 0x402195: main (HNMM.cpp:465)
==1900== 
==1900== 
==1900== 1 errors in context 4 of 4:
==1900== Conditional jump or move depends on uninitialised value(s)
==1900==    at 0x5159181: std::string::assign(std::string const&) (in /usr/lib/libstdc++.so.6.0.13)
==1900==    by 0x401CF1: insertproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:347)
==1900==    by 0x401E48: addproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:374)
==1900==    by 0x402195: main (HNMM.cpp:465)
==1900==  Uninitialised value was created by a heap allocation
==1900==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)
==1900==    by 0x401C57: insertproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:336)
==1900==    by 0x401E48: addproxel(int, int, int, double, std::string&, std::string&) (HNMM.cpp:374)
==1900==    by 0x402195: main (HNMM.cpp:465) 
```

各自的代码和产生错误的行：

```
/* get a fresh proxel and copy data into it */
proxel *insertproxel(int s, int tau1k, int tau2k, double val, string &path, string &output) {
    proxel *temp;
    /* create new proxel or grab one from free list */
  if (firstfree == NULL)
    temp = (proxel*) malloc(sizeof(proxel));
  else {
    temp = firstfree;
    firstfree = firstfree->right;
  }
  /* copy values */
  temp->id    = TAUMAX*(TAUMAX*s+tau1k)+tau2k;
  temp->s     = s;
  temp->tau1k = tau1k;
  temp->tau2k = tau2k;
  temp->val   = val;
  temp->path  = string(path);
  temp->output  = string(output);
  ccpcnt     += 1;
  if (maxccp < ccpcnt) {
      maxccp = ccpcnt;
      //printf("\n ccpcnt=%d",ccpcnt);
  }
  return(temp);
} 
```

第 336 行：

```
temp = (proxel*) malloc(sizeof(proxel)); 
```

第 347 行：

```
temp->path  = string(path); 
```

第 374 行：

```
root[sw] = insertproxel(s,tau1k, tau2k, val, path, output); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:46:53.837

在`insertproxel`您返回对堆栈分配变量的引用：

```
 proxel temp2 = {0};
   temp = &temp2;
   /* ... */
   return(temp); 
```

# javascript - 淘汰赛，复选框不起作用

> ID：12175213
> 
> 赞同：0
> 
> 时间：2012-08-29T09:53:02.290
> 
> 标签：javascript, knockout.js

我有表格，我想选中/取消选中复选框，不仅要单击复选框，还要单击任何一行。
代码在这里：[源](http://jsfiddle.net/M8KFd/563/)
但是代码只有在我单击行时才能正常工作。当我单击复选框时，逻辑运行良好，但复选框无效。
PS。数组中的值`selectedAnimals`应该是动物对象，而不仅仅是 ID 或名称

PS2。使用 jQuery

```
 $("table").on("click", "tbody tr", function(e){
       ko.dataFor(this).isSelected(!ko.dataFor(this).isSelected())
    }) 
```

一切正常，但我想在没有 jQuery 的情况下做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:35:26.103

当您选中复选框时，会发生以下情况：

*   项目被检查并添加到数组中（正确）。
*   该`add`函数由于事件冒泡而被调用（复选框在 中`TR`，其中添加了单击功能）。
*   此函数再次翻转复选框，这将导致它从列表中删除并取消选中它。

使用绑定时无法阻止事件冒泡`checked:`，因此最好的方法是从整体中删除该`add`函数`TR`并将其移动到它自己的`TD`.

[这是小提琴](http://jsfiddle.net/M8KFd/577/)。

# javascript - jQuery $.post 适用于 chrome、safari，但不适用于 FF（声称成功回调函数未定义）

> ID：12175216
> 
> 赞同：1
> 
> 时间：2012-08-29T09:53:14.367
> 
> 标签：javascript, jquery, html, firefox

我有以下 jQuery 1.7.2 代码：

```
var theParams = encodeURIComponent(s1)+encodeURIComponent(s2);
$.post('/myURL',theParams,processData).error(errorResponse);
function processData(data,textStatus){
    blah blah;
}// end processData
function errorResponse() {
    blah blah;
} 
```

此代码在 Safari 6 (Mac)、Chrome 21 (Mac)、Safari (iPad)、Chrome (iPad) 上运行良好，但 FF 14 (Mac) 给我以下错误：

```
ReferenceError: processData is not defined 
```

奇怪的是，类似的代码（来自不同的页面）在 FF 上工作得很好：

```
var formData = $(form).serialize();
$.post('/myURL',formData,processData).error(errorResponse);
function processData(data,textStatus) {
    blah blah;
}// end processData
function errorResponse() {
    blah blah;
} 
```

我尝试重命名该函数，但这会导致相同的未定义错误。我应该寻找什么来调试这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:59:16.693

尝试重新排列您的代码

```
var processData, errorResponse, theParams;
processData = function (data,textStatus){
    //blah blah;
};
errorResponse = function () {
    //blah blah;
};
theParams = encodeURIComponent(s1)+encodeURIComponent(s2);
$.post('/myURL',theParams,processData).error(errorResponse); 
```

这对你有用吗？

你也可以提供这个`encodeURIComponent`功能吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:03:08.447

尝试在第 1 行之后添加此行：

```
theParams = encodeURIComponent(theParams); 
```

我假设您的 encodeURIComponent 函数就是[这个](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)。

# javascript - 您如何在 Backbone 事件方法上收听 keydown

> ID：12175218
> 
> 赞同：3
> 
> 时间：2012-08-29T09:53:15.477
> 
> 标签：javascript, backbone.js

`$(document).on('keydown', this.logKey);`Backbone的等价物是什么`events:{}`？我之所以问，是因为我宁愿将所有事件一次绑定，而不是将一些事件放在**初始化**方法中。

我在这里尝试了这个建议：[如何从视图中捕获关键事件？](https://stackoverflow.com/questions/6033010/how-to-capture-the-key-event-from-a-view)即`events{'keydown' : 'logKey'}`。不过，这对我不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T10:02:20.377

[View.delegateEvents()](http://backbonejs.org/#View-delegateEvents)中定义的 CSS 选择器绑定到的上下文，`View.$el`因此如果您希望 View 管理事件，`document`则`View.$el`应该是`document`它自己：

```
// code no tested
var DocumentView = Backbone.View.extend({
  el: "document",
  events: {
    "keydown": "theHandler"
  }
}) 
```

# mysql - 无法找出正确的 SQL 语句

> ID：12175219
> 
> 赞同：3
> 
> 时间：2012-08-29T09:53:17.987
> 
> 标签：mysql, sql, database

# 短的

需要生成课程列表和计数

1.  全部
2.  未答复
3.  已回答但未选中

问题。

# 详细的

为了得到这个结果，我需要使用 7 个表进行操作。

# 更新

数据库结构

[https://docs.google.com/open?id=0B9ExyO6ktYcOenZ1WlBwdlY2R3c](https://docs.google.com/open?id=0B9ExyO6ktYcOenZ1WlBwdlY2R3c)

![在此处输入图像描述](../Images/0af320a694f30c15aeb00d8ed0a59ce1.png)

[对于全尺寸图像，请单击此处](http://screencast.com/t/eY2MMc9L)

我将解释其中的一些：

1.  `answer_chk_results`- 检查答案表。因此，如果此表上不存在某些答案，则表示未选中
2.  `lesson_questions`- 课程 <-> 问题关联（按 id）表
3.  `courses-lessons`- 课程 <-> 课程关联（按 id）表

只有第一个问题似乎并不难：当然，要计算所有问题的数量，我的计划如下所示：

1.  首先，我们需要获取所有课程名称列表。查询将如下所示：

    从课程 c 中选择 c.id、c.name

2.  然后`courses-lessons`通过每个选定的课程从关联表中获取所有课程`1.`（不知道如何继续之前的查询）

3.  然后，按所选课程 ID（列）计算**所有问题**`lid``2.`

但我无法弄清楚所有 3 个问题的最终 SQL 语句的外观。

有什么建议么？询问您是否有不清楚的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:19:46.200

**未回答的问题：**已回答的问题是在答案表中没有答案的任何问题：

```
SELECT * 
FROM questions
WHERE id NOT IN (SELECT qid FROM answers) 
```

**已回答但未检查的问题：**

```
SELECT *
FROM questions q
INNER JOIN 
(
    SELECT * 
    FROM answers
    WHERE id NOT IN answer_chk_results    -- unchecked answer
) a ON q.id = a.qid                       -- only answered questions 
```

**编辑：**要获得一个未回答、未检查、所有问题都计入一个查询的课程列表：

```
SELECT c.id, c.name, COUNT(all.id) 'All', 
       COUNT(unanswered.id) 'Unanswered',
       COUNT(unchecked.id) 'Unchecked'
FROM courses c
INNER JOIN courses-lessons cl ON c.id = cl.cid
INNER JOIN questions all ON cl.id = all.lid
INNER JOIN
(
    SELECT * 
    FROM questions
    WHERE id NOT IN (SELECT qid FROM answers)
) unanswered ON cl.id = unchecked.lid
INNER JOIN
(
    SELECT *
    FROM questions q
    INNER JOIN 
    (
        SELECT * 
        FROM answers
        WHERE id NOT IN (SELECT aid FROM answer_chk_results)
    ) a ON q.id = a.qid 
) unchecked ON cl.id = unchecked.lid
GROUP BY c.id, c.name 
```

# maven - 如何在 Maven 中设置从依赖项中引用的属性

> ID：12175223
> 
> 赞同：5
> 
> 时间：2012-08-29T09:53:24.127
> 
> 标签：maven, properties, dependency-management

在我的项目中，我有 Maven 依赖项。
顺便说一句：

```
<dependency>
   <groupId>org.mule.modules</groupId>
   <artifactId>mule-module-activiti</artifactId>
   <version>3.2.0</version>
</dependency> 
```

在此依赖项 POM 中有一个已使用但未定义的属性 -`${activiti.version}`

我发现如何设置此属性的唯一方法是在命令行上指定它，例如`mvn -Dactiviti.version=5.10`

有什么方法可以在我的项目的 POM 中指定这个属性吗？
`<properties><activiti.version>5.10</activiti.version></properties>`不起作用。

**编辑：**

如果您创建具有依赖关系的新 maven 项目，我试图解决的情况可以重现：

```
<dependency>
   <groupId>org.mule.modules</groupId>
   <artifactId>mule-module-activiti</artifactId>
   <version>3.2.0</version>
</dependency> 
```

并提供所需的存储库：

```
 <repositories>
        <repository>
            <id>muleforge-repo</id>
            <name>MuleForge Repository</name>
            <url>http://repository.muleforge.org/release</url>
            <layout>default</layout>
        </repository>

        <repository>
            <id>codehaus-repo</id>
            <name>Codehaus Repository</name>
            <url>http://dist.codehaus.org/mule/dependencies/maven2</url>
            <layout>default</layout>
        </repository>
        <repository>
            <id>activiti</id>
            <name>Activiti</name>
            <url>https://maven.alfresco.com/nexus/content/groups/public/</url>
        </repository>
    </repositories> 
```

**编辑2：**

这是**org.mule.modules:mule-module-activiti:3.2.0的**[POM](http://repository.muleforge.org/release/org/mule/modules/mule-module-activiti/3.2.0/mule-module-activiti-3.2.0.pom)，我的项目所依赖的库。在这个 pom 内部，他们使用 expression 。但是他们**没有**为这个表达式设置值。（没有什么像）**`${activiti.version}`**`<properties><activiti.version>5.10</activiti.version></properties>`****

 ****问题是如何从**我的**pom 中为这个表达式设置一个值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T11:21:08.000

好的，最后，经过几天的搜索和试验，我找到了解决问题的方法。

如果您需要在命令行上为 maven 提供属性（谈论**系统属性，这与****maven 属性**略有不同），您还可以使用插件在您的 pom 或单独的属性文件中提供这些属性。

**注意：** 系统属性可用于覆盖依赖项中的 Maven 属性。

像这样：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>properties-maven-plugin</artifactId>
    <version>1.0-alpha-2</version>
    <executions>
        <execution>
            <goals>
                <goal>set-system-properties</goal>
            </goals>
            <configuration>
                <properties>
                    <property>
                        <name>activiti.version</name>
                        <value>5.10</value>
                    </property>
                </properties>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

我希望它会对某人有所帮助。

也为我显然难以理解的笨拙问题感到抱歉。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T10:01:25.290

您可以使用属性来定义版本：

```
<properties>
  <module-version>3.2.0</module-version>
</properties>
..
<dependency>
   <groupId>org.mule.modules</groupId>
   <artifactId>mule-module-activiti</artifactId>
   <version>${module-version}</version>
</dependency> 
```

为什么不应该[这样工作](https://github.com/khmarbaise/smpp/blob/master/pom.xml)？

您永远不应该通过命令行上的属性定义工件的版本，因为您将来无法重现它，我怀疑它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:39:37.223

确保您没有与外界交谈的代理设置。我刚刚尝试了您的配置，并且成功了。我正在使用最新的 Maven 3 版本。****

# opengl-es-2.0 - GLKBaseEffect 的标准着色器源代码

> ID：12175224
> 
> 赞同：0
> 
> 时间：2012-08-29T09:53:26.740
> 
> 标签：opengl-es-2.0, glkit

我的理解`GLKBaseEffect`是它带有某种通用的顶点和片段着色器，当`[baseEffect prepareToDraw]`被调用时，效果将其属性值传递给OpenGL制服`transform`和`fog`属性，以便默认着色器接收他们期望的制服。

有人知道这些制服和属性是如何命名的吗？更好的是，有人有标准着色器的源代码`GLKBaseEffect`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:38:03.897

您可以使用 Xcode 4 中的 Frame Debugger 查看生成的 GLSL。如果您想修改这些着色器的使用，最好将着色器源复制到您自己的应用程序中，而不是依赖 GLKit 在运行时生成它们。

特别是统一名称是 GLKit 的私有实现细节，并且可以并且随时更改，这将破坏任何尝试直接设置这些字段的应用程序。如果您自己对着色器文本进行快照，则不存在此类问题。

# ios - iOS：使用变量 self 和下划线（_）

> ID：12175229
> 
> 赞同：10
> 
> 时间：2012-08-29T09:53:32.010
> 
> 标签：ios, objective-c, memory-management, self

> **可能重复：**
> [可可objective-c 类中变量前面的下划线如何工作？](https://stackoverflow.com/questions/822487/how-does-an-underscore-in-front-of-a-variable-in-a-cocoa-objective-c-class-work)

在如下合成变量名后，我对使用 self 或带下划线的变量名感到非常困惑：

```
In .h file:
@property(nonatomic, strong) NSMutableArray *users;

In .m file:
@synthesize users = _users; 
```

根据我在使用时的理解`self.users`，操作系统会确保在 set 方法中释放之前分配的内存，所以我们不需要明确注意。

`_users`是用户的实例变量，应该在访问用户变量时正常使用。如果我`_users`用来更改它的值，那么它不会触发 KVO 委托，它不会通知观察用户值变化的类。

此外，`self.users`允许在方法名称中区分虚拟变量，如下所示，

```
- (void)assignUsers:(NSMutableArray*)users {
      self.users = users;
} 
```

`_users`有人可以告诉我在使用or时是否有任何我理解错误或遗漏的地方`self.users`？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-29T10:27:59.887

当您使用 时`self.users`，您可以通过 setter 或 getter 访问该属性。

当您使用 时`_users`，您可以直接跳过 setter 或 getter 访问属性。

* * *

这是一个很好的演示：

```
- (void)setUsers:(id)users {
    self.users = users; // WRONG : it causes infinite loop (and crash), because inside the setter you are trying to reach the property via setter
} 
```

和

```
- (void)setUsers:(id)users {
    _users = users; // GOOD : set your property correctly
} 
```

这也是 getter 的重点。

* * *

关于基本内存管理（在`MRR`or的情况下`ARC`）：**如果没有更多的强指针使其保持活动状态，iOS 将**释放对象，无论您如何释放对象的指针。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T10:50:21.163

我认为考虑编译器如何（或可能）实现属性会有所帮助。

当您编写`self.users = array;`编译器时，编译器将其翻译为`[self setUsers:array];` 当您编写时`array = self.users;`，编译器将其翻译为`array = [self users];`

`@synthesize`将 ivar 添加到您的对象（*除非您自己添加*），并为您实现`-users`和`-setUsers:`访问器方法（*除非您提供自己的*）

如果您使用**ARC**，`-setUsers:`将如下所示：

```
- (void)setUsers:(NSArray *)users
{
    _users = users; // ARC takes care of retaining and release the _users ivar
} 
```

如果您使用的是**MRC**（即**ARC**未启用），`-setUsers:`将如下所示*：

```
- (void)setUsers:(NSArray *)users
{
    [users retain];
    [_users release];
    _users = users;
} 
```

* -*请注意，这是一个简化的非原子实现`-setUsers:`*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T11:49:18.093

是的，这非常正确。几个小点：

iOS 不会因为您使用点符号而自动释放对象。当属性被声明为`copy`or `retain`（或`strong`在 ARC 中）时，它会释放一个对象。例如，如果您使用的是非 ARC 代码并且该属性被声明为`assign`，则它不会释放该对象。

使用最新版本的开发工具链（Xcode 4.4+），您不再需要手动合成属性 - 它们会自动合成（带有前导下划线）。

# cocos2d-iphone - Cocos2d 或 cocos 2d x

> ID：12175235
> 
> 赞同：0
> 
> 时间：2012-08-29T09:54:00.707
> 
> 标签：cocos2d-iphone, cocos2d-x

我开始学习 iPhone 开发，我已经看过基础知识，现在正在研究 cocos2d 的游戏等。

我的问题是我应该从 cocos2d 开始还是应该从 cocos2d x 开始？

我对多平台感兴趣，但是在进入 X 之前对 cocos2d 有一个很好的了解重要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-25T13:08:54.987

此外，cocos2d-x 具有 javascript-binding (jsb) 和 lua-binding，让您可以在脚本中编写所有游戏逻辑，而所有图形内容都以原生方式运行，从而为您提供快速开发和高运行时性能。使用 jsb 也可以快速切换到 cocos2d-html5，几乎不需要修改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:00:31.633

如果您的目标平台明确是 iPhone cocos2d-iphone 可能是最容易设置的，并且由于它使用了 Objective-c，如果您已经在 iPhone 上进行过任何开发，这将是最自然的过渡。

如果您打算跨移动平台发布，或者更喜欢使用 c++ 进行开发，那么 cocos2d-x 将是您的最佳选择。

这两个项目都在协调的发布时间表上，因此在功能和支持方面应该是相当的。

两者都有不错的社区，有很多教程，所以那里很吸引人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T01:47:01.327

开始使用 cocos2d-x ，比 cocos2d-iphone 好很多。看看 cocos2d-x.org 你会知道更多。

# c# - Session.Clear & Session.Merge 问题

> ID：12175237
> 
> 赞同：0
> 
> 时间：2012-08-29T09:54:11.370
> 
> 标签：c#, nhibernate, fluent

在我的应用程序中，我需要使用分离的对象并且已经实现了存储库模式。问题出现在以下代码示例中：

```
var shops = ShopRepository.GetAll();           //Session.Clear() called inside, CacheMode = CacheMode.Ignore
var employees = EmployeeRepository.GetAll();   //same here

// Case 1: Session.Save() works, Session.Merge() irgnores the changes

employees.First().WorksAt.Name = "le new Shop in Town";
EmployeeRepository.Save(employees.First());

// Case 2: Session.Merge() works, Session.Save() throws NonUniqueObjectException

employees.First().WorksAt = employees.Last().WorksAt;
EmployeeRepository.Save(employees.First()); 
```

商店需要先加载，因此用户可以通过 ComboBox（或类似的东西）为员工设置“WorksAt”- 属性。

我的期望是，在调用 Session.Clear() 之后，休眠“忘记”所有实例（以及底层图）。事实并非如此。我仍然在 Update() 操作中不断收到 NonUniqueObjectException。因此，我无法使用 SaveOrUpdate，尽管它可以很好地处理对对象图所做的所有类型的更改。

Session.Merge() 只会完成一半的工作：

没有抛出异常，保存了新的引用，但不会保存对商店属性所做的更改（因为合并只是从缓存中加载“旧”员工/商店对象并将员工属性复制到旧实例）

我已经尝试过的：

*   将级联设置为“合并”
*   在配置中禁用二级缓存
*   Session.Lock(myObj, LockMode.None)
*   自制半合并：通过 Repository.Save() 上的反射为 Session.Merge() 返回的对象重置所有引用
*   覆盖 Equals() 和 GetHashCode() 方法

该模型包含约 50 个实体，因此在保存/更新会话中（重新）加载每个引用的 bo-instance 不是一种选择。目前我正在使用 nHibernate 3.3.0.4 和 FluentNHibernate 1.3。

是否有涵盖这两种情况的紧凑/优雅的解决方案？也许禁用 NHibernate 的内部 id-tracking 会解决问题？

映射可能如下所示：

```
public class Shop
{
public virtual Int Id  { get; set; };
public virtual string Name  { get; set; };

public virtual ISet<Employee> AllEmployees{ get; set; }

  public Shop()
  {
    AllEmployees = new HashedSet<Employee>();
  }
}

public class ShopMap: ClassMap<Shop>
{
  public ShopMap()
  {
    Id(x => x.Id);
    Map(x => x.Name);
  }

  HasMany(c => c.AllEmployees).Cascade.None().NotFound.Ignore();
}

public class Employee
{
public virtual Int Id  { get; set; };
public virtual string FirstName  { get; set; };
public virtual string SureName  { get; set; };

public virtual Shop WorksAt{ get; set; }

  public Employee()
  {
  }
}

public class EmployeeMap: ClassMap<Employee>
{
  public EmployeeMap()
  {
    Id(x => x.Id);
    Map(x => x.FirstName);
    Map(x => x.SureName);

    References(c => c.WorksAt).Cascade.SaveUpdate().Fetch.Join().NotFound.Ignore();
  } 
} 
```

**更新**

这是存储库基类中我的 Save() 方法的代码：

```
public static void Save(T pSaveObj)
{
  using (ISession session = GetSession())
  {
    using (ITransaction trans = session.BeginTransaction())
    {          
      // session.Save(pSaveObj);
      session.Save(session.Merge(pSaveObj));                                         
      session.Flush();
      session.Clear();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:43:28.600

好吧..您完全在滥用NHibernate。会话中几乎从不调用 Clear 和 Flush。创建会话只是为了执行保存可以为您提供 0 级缓存的好处。事务在处理时隐式回滚（如果没有提交），所以你真的什么都不做。

如果我正确地阅读了您的意图，您宁愿拥有这样的代码：

```
public static void Save(T pSaveObj)
{
  using (ISession session = GetSession())
  {
    using (ITransaction trans = session.BeginTransaction())
    {          
      session.SaveOrUpdate(pSaveObj);                                         
      trans.Commit()
    }
  }
} 
```

*   我假设 pSaveObj 未附加到会话（如果已附加，则使用 session.Update）
*   使用NH仍然是不好的方式
    *   如果您没有非常充分的理由使用存储库模式，忘记它并使用原始会话对象，它将为您节省数千个问题

PS 看看 NH 用 sql profiler 做什么。我觉得这是一个很好的学习方式。

# c# - 通过互联网从 IP 摄像机加载视频流

> ID：12175239
> 
> 赞同：0
> 
> 时间：2012-08-29T09:54:18.220
> 
> 标签：c#, asp.net, aforge

我使用 ASP.net、C# 和 Aforge.net 构建了一个系统，将视频流加载到图像控件中，但它只能在同一网络地址下工作（本地加载流）。
有人知道如何通过互联网加载视频流吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:57:40.587

use library c# of vlc [http://forum.videolan.org/viewtopic.php?f=32&t=58438](http://forum.videolan.org/viewtopic.php?f=32&t=58438)

# jquery - 在 getscript 不起作用后使用变量

> ID：12175242
> 
> 赞同：1
> 
> 时间：2012-08-29T09:54:25.037
> 
> 标签：jquery, scope, constants, getscript

我在包含脚本后尝试使用变量，但它说变量“PHP_MODULE_ROOT 未定义，当它定义时。

```
$.getScript("../IMS3/assets/js/globals.js") ;
const CONTROLER = PHP_MODULE_ROOT+'/manageContact.php' ; 
```

global.js 中的代码是：

```
var SYSTEM_ROOT = 'http://place.mysite.com/IMS3' ;  // The system root, this needs to be changed if you move the system.

var ASSETS_ROOT = SYSTEM_ROOT+'/assets' ;       // The root for all things like JS and PHP
var JS_MODULE_ROOT = ASSETS_ROOT+'/js/modules' ;    // The JS modules like dialog boxes and widgets etc.
var PHP_MODULE_ROOT = ASSETS_ROOT+'/php/modules' ; 
```

我尝试将 const 声明作为回调声明放在 $.getScript 中，但我得到了相同的结果。

# symfony - SonataAdminBundle：添加新实体问题

> ID：12175244
> 
> 赞同：1
> 
> 时间：2012-08-29T09:54:27.250
> 
> 标签：symfony, doctrine-orm

我已经进行了 Symfony 的“新”安装，并将它与 Sonata Admin Bundle 集成。
在阅读了一些关于 SAB 的内容后，我决定尝试在仪表板中添加一个“类别”。
据我所知，我必须：

*   在数据库上创建我的实体和表（学说会为我做）
*   为我的新实体创建一个 Admin 类
*   将该 Admin 类注册为服务并按`sonata.admin`要求对其进行标记

我的问题是，基本上是这样的：

我遵循 Sonata User Bundle 方法并找到一些类（它带有从 FOSUserBundle 获取的用户和组）并定义了一个实体（空），它扩展了代码所在的模型。该模型必须包含属性（列表）以及 getter 和 setter。所以我开始用***注释***方法编写那个模型。这是我的代码：

```
<?php

namespace Sonata\SestanteBundle\Model;

use Doctrine\ORM\Mapping as ORM;
/**
 * Sonata\SestanteBundle\Model\myFooEntity;
 *
 * @ORM\Table(name="myFooTable")
 * @ORM\Entity(repositoryClass="Sonata\SestanteBundle\Repository\myFooRepository")
 */

class myFooEntity
{
    /**
    * @ORM\Column(type="integer")
    * @ORM\Id
    * @ORM\GeneratedValue(strategy="AUTO")
    */
    private $id;

    /**
    * @ORM\Column(type="string", length=25, unique=true)
    */
    private $fooName;

    /**
    * @ORM\Column(name="is_active", type="boolean")
    */
    private $isActive;
} 
```

现在当我运行时：

```
php app/console doctrine:generate:entities vendor/bundles/Sonata/SestanteBundle/Model 
```

我收到该错误：

> [RuntimeException] 命名空间“vendor\bundles\Sonata\SestanteBundle\Model”不包含任何映射实体。

我想到了什么：

*   是否在其他地方设置了映射方法，迫使我将该属性表示为 .xml 文件，如`groups`和 users `does`？进入`config.yml`我只是看到一些“标准”

有什么想法可以超越这个错误吗？

**编辑：**我想这个问题是关于命名空间或类似的东西。如果我尝试生成具有不同名称（不存在）的实体，我会收到相同的错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:57:03.020

虽然这可能很痛苦，但删除`@ORM\`您实体中的所有内容并注释掉或删除`use Doctrine\ORM\Mapping as ORM;`已经解决了我之前的问题。我试图确定是什么导致命名空间被放置在那里以及如何停止它，但没有成功。

# apache-flex - 如何使用 flex 3 将 HierarichalCollectionView 转换为 XML？

> ID：12175246
> 
> 赞同：1
> 
> 时间：2012-08-29T09:54:29.077
> 
> 标签：apache-flex

我正在使用具有数据提供者 HierarichalCollectionView 的 AdvacnedDataGrid，任何人都可以告诉我如何将 HierarichalCollectionView 转换为 XML 对象。

# logging - 归档 lucene 索引

> ID：12175249
> 
> 赞同：1
> 
> 时间：2012-08-29T09:54:45.577
> 
> 标签：logging, lucene, compression, zip

有一个用例，其中数据通过 lucene 进行索引以进行搜索。当前索引每 12 小时存档一次，并重新启动一个新索引。由于我们的数据流入率相当高，我们需要进行压缩以帮助存储。我们在搜索时使用 java.util.zip 进行压缩和解压缩。

现在的问题是，当有人搜索过去一周的数据时，需要花费大量时间来解压缩。如果有人可以建议我一些更好更快的解压缩方法，那就太好了。我正在考虑 7-zip 的 LZMA，但有些输入会很有用。同时，压缩是正确的方法吗？我有选择吗？我们有一个 java 代码库，正在等待您的输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T17:00:54.363

LZMA 的压缩效果更好，但解压速度会更慢。

您可以朝另一个方向前进并接受不太好的压缩，以获得更快的解压缩。你可以看看[lz4](http://code.google.com/p/lz4/)。它的减压速度大约是四到五倍，但压缩到大约 50% 左右（您的里程可能会有所不同）。虽然 lz4 有一个高压缩 (HC) 模式，它会花费更多时间进行压缩并且效果更好，但解压缩速度仍然非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:28:01.330

以下库解压缩速度比 lzma 更快，压缩比相似

[http://code.google.com/p/lzham/](http://code.google.com/p/lzham/)

# objective-c - UIView 未检测到横向触摸

> ID：12175251
> 
> 赞同：1
> 
> 时间：2012-08-29T09:54:47.157
> 
> 标签：objective-c, ios, uiscrollview, landscape

我正在使用包含 UIScrollViews 和 UIButtons 的 UIView 实现一个画廊。

当方向为纵向时，没有问题，但是当de方向变为横向模式时，底部300像素停止感知。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:12:24.540

如果您将点击手势附加到视图，则视图需要根据超级视图新框架调整自身大小。您需要为此正确设置`autoResizingMask`您的视图的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T12:07:42.937

我想你可以设置静态帧值。如果是这样，请将其设置为动态。例如：

```
your_View=[UIVIew alloc]initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

或者

```
your_view.frame = self.view.bounds; 
```

# java - Java 内存模型是否保证线程内写入的可见性？

> ID：12175254
> 
> 赞同：5
> 
> 时间：2012-08-29T09:54:52.117
> 
> 标签：java

考虑一个简单的单线程 Java 程序执行，不涉及同步操作，只是简单地读取和写入实例变量。简单地**忽略所有写入**的实现似乎符合 Java 内存规范。首先，来自[§17.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4)的适用一般性陈述：

> 内存模型决定了程序中每个点可以读取哪些值。每个单独的线程的操作必须按照该线程的语义进行操作，但每次读取看到的值由内存模型确定。

相关限制如下（[§17.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)）：

### 1\. 程序顺序引发的happens-before顺序：

> 如果 x 和 y 是同一线程的操作，并且 x 在程序顺序中位于 y 之前，则为 hb(x, y)。

### 2.happens-before一致性：

> 如果对于 A 中的所有读取 r，一组动作 A 在发生之前是一致的，其中 W(r) 是 r 看到的写入动作，但不是 hb(r, W(r)) 或存在在 A 中存在写入 w 使得 wv = rv 和 hb(W(r), w) 和 hb(w, r)。

这基本上排除了在它观察到的写入*之前发生读取。*另一个条款只是一个理智的条款，它阻止了一些人`v`看到之前写`v`的同时又写了同样的内容`v`。

我找不到任何保证可以肯定地观察到写入，只有对写入内容的限制可能不会被观察到。

我在这里想念什么？JVM真的有可能忽略这样一个微不足道的保证吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:09:48.693

让我们使用：

```
class MyClass {
    private static int i = 0;

    public static void main(String[] args) {
        i = 3; //w
        System.out.println(i); //r
    }
} 
```

*   当且仅当所有顺序一致的执行都没有数据竞争时，程序才能正确同步。
*   如果程序正确同步，则程序的所有执行都将显示为顺序一致（第 17.4.3 节）。
*   当一个程序包含两个冲突的访问（第 17.4.1 节）时，这些访问没有按发生前的关系排序，则称为包含数据竞争。

    您的程序是单线程的
    => 我们有来自程序顺序约束的 hb(w,r)
    => 它是正确同步
    的 => 程序的所有执行将看起来是顺序一致的。
    => 它将打印 3

# java - android中的自定义MediaPlayer类

> ID：12175259
> 
> 赞同：7
> 
> 时间：2012-08-29T09:55:01.413
> 
> 标签：java, android

我刚刚完成了一个使用 webwiew 进行视频播放的项目。现在我被要求用自定义播放器替换 webview 部分。播放器应该能够处理 HLS。

如果我使用 VideoView 和 MediaController，我可以播放直播。但不幸的是，MediaController 有自己的控件。我想要我自己的控件，这就是我卡住的地方。

到目前为止，我尝试过：

1.  重新编写 MediaController 类并尝试更改布局。它不起作用，因为由于依赖关系，我无法清除所有错误。
2.  我尝试使用 vidtry 代码（[http://github.com/commonsguy/vidtry](http://github.com/commonsguy/vidtry)）作为参考，但没有运气。
3.  我试图构建一个扩展 MediaController 的类，但这也不起作用。

我几乎参与了 Stackoverflow 上关于自定义媒体播放器的每个线程，但找不到让我开始的信息。
是否可以在不使用 NDK 的情况下创建自定义媒体播放器类？
如果有人知道如何创建自定义媒体播放器类，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:16:56.407

您可以单独使用 VideoView 并调用它的方法来控制播放，例如**start()**、**stopPlayback()**、**pause()**、**resume()**、**seekTo()**等。（*请参阅此处的类参考：http:* [//developer.android .com/reference/android/widget/VideoView.html](http://developer.android.com/reference/android/widget/VideoView.html) )

只需根据需要创建屏幕控件（按钮/图像）并将播放控制代码代码绑定到它们的事件。

您还需要通过删除 layout.xml 中的 touchable 属性来禁用内置的 VideoView 控件...

```
<VideoView 
    android:id="@+id/myVideoView" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:clickable="false" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-04T11:57:38.227

我推荐使用 VLC，因为它支持几乎所有的视频格式，当然还有流媒体。您可以尝试从 github 获取预编译的 libvlc AAR 文件或自己编译 VLC：[AndroidCompile](https://wiki.videolan.org/AndroidCompile/)。

您可以在此处找到预编译 libvlc 的示例： [https ://github.com/mrmaffen/vlc-android-sdk](https://github.com/mrmaffen/vlc-android-sdk)

这不是最新版本，我相信它会满足您的需求。接下来，您将需要围绕库创建代码。示例： [https ://github.com/Ivshti/libvlc-android-sample](https://github.com/Ivshti/libvlc-android-sample)

# android - 从自定义视图中访问 android“应用程序”对象

> ID：12175260
> 
> 赞同：0
> 
> 时间：2012-08-29T09:55:01.967
> 
> 标签：android

我有一个扩展“相对布局”的自定义视图（实际上是一个自定义列表视图项）。我无法将应用程序对象传递给此视图。那么我如何从这个视图中访问应用程序对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:30:20.047

打电话`getContext().getApplicationContext()`。

# ms-access - Microsoft Access 表单的语音识别

> ID：12175263
> 
> 赞同：0
> 
> 时间：2012-08-29T09:55:17.507
> 
> 标签：ms-access, speech-recognition, text-to-speech, speech, speech-to-text

我想将语音识别和文本到语音技术与 MS Access 表单集成在一起，以便当用户不直接在他的 PC 前时，通过使用无线耳机使用户能够使用 Access 表单与访问表单进行通信。这将在仓库环境中使用，以消除对 PDA 条形码扫描仪的需要。用户将需要使用他的声音来运行 Access 表单命令以从表单字段中查找数据以及使用他的语音将数据（SKU 和数字）输入到表单的字段中。当运行查找表单数据的命令时，我希望应用程序将文本转换为语音，包括在任何对话框弹出窗口中阅读消息。是否可以校准应用程序以了解每个用户的口音，在设置过程中让用户说出字母表中的所有数字和字母？然后，应用程序会将口音与用户的登录用户名相关联。请告知设置程序。是否有任何预开发的 3rd 方加载项应用程序？如果需要，我确实知道 VBA。

非常感谢你，纳撒尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:09:50.480

我不了解 MS Access，但如果您有可能使用 .NET，那么将有另一种方法来使用 Windows Presentation Framework (WPF)。

它具有 Text-To-Speech（MSDN：[WPF Text To Speech UI](http://msdn.microsoft.com/en-us/library/cc998523.aspx)）和语音识别（MSDN：[SpeechBasics-WPF C# Sample](http://msdn.microsoft.com/en-us/library/hh855387.aspx)。另一个教程：franksworld.com：[Fun With Speech Recognition in WPF](http://franksworld.com/blog/archive/2009/06/30/11617.aspx)）的基本功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:57:51.367

我会看看[Mayhem](http://mayhem.codeplex.com/)可能会连接这个解决方案。Mayhem 可以轻松地将事件（用户发出语音命令）与操作（在 MS Access 中输入）联系起来。看看名为[RemoteCommand](http://remotecommand.codeplex.com/)的 Mayhem 附加组件的[演示](http://www.youtube.com/watch?v=drvwok9mYbM&feature=youtube_gdata_player)，它展示了用户如何通过电话或使用 Skype 在 PC 上发出命令来触发事件，然后在另一台 PC 上触发操作。有 [很多 Mayhem 附加组件](http://makemayhem.com/Packages/All)，[其中一个适用于 MS Office](http://makemayhem.com/Packages/OfficeModules)，可以满足您的需求，或者您可以使用[Keypress Module](http://www.youtube.com/watch?v=e3QU5JNB6IQ)输入信息，或者您可以轻松[开发自己的模块](http://mayhem.codeplex.com/documentation). 所有这些都是在 .Net 中开发的开源软件。接受语音命令的模块是使用[VoiceModel](http://voicemodel.codeplex.com/)开发的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:23:04.123

实际上，Windows 7 内置了语音识别功能。事实上，它适用于任何程序，包括办公套件。

我不确定为什么有些人建议访问不适合这样的应用程序？

归根结底，使用语音识别最具挑战性的问题是允许用户在说话时将按钮静音，或者至少允许和训练他们不得不说“换行”，或者使用标签移动到下一个字段（访问无法知道用户是否已完成对特定文本框的发言，实际上没有程序真的可以）。

多年来，我使用了许多语音识别程序，但 Windows 7 中的一个现在运行良好，事实上，我在这里做的这篇文章我是为了证明概念是使用 Windows 7 中的语音识别编写的，并且因此，我的这篇文章和答案是使用 Windows 语音识别完成的。

但是公平地说，我的帖子是在文字内部编写和完成的，但是没有什么能阻止我将语音文本转换为访问表单。

# ghostscript - 让 Ghostscript 9.06 用与 8.70 相同的颜色对 EPS 文件进行光栅化

> ID：12175267
> 
> 赞同：0
> 
> 时间：2012-08-29T09:55:24.213
> 
> 标签：ghostscript, eps

对于在线设计应用程序，我使用 Ghostscript 将某种文件转换为 PNG 和/或 PDF（取决于用户请求）。考虑这个 EPS 文件： [http ://designer.realtimedesigner.com/images/1/cliparts/99010.eps](http://designer.realtimedesigner.com/images/1/cliparts/99010.eps)

使用 GS 8.70，我曾经以这种方式将其转换为 PNG：

```
gs -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sDEVICE=pngalpha -dEPSCrop -sOutputFile=./result.png -r458 ./99010.eps 
```

我注意到 8.70 在分辨率较高时会出现一些错误，这可能发生在我的应用程序中。所以我试了一下GS 9.06（最新版）。但是，通过使用相同的命令，输出是不同的。

8.70 的主要光栅化颜色是纯 RGB 黑色 (0,0,0)，而 9.06 则是 35,31,32。这对我来说是个问题，因为对于我的应用程序的某些细节，我需要 RGB 值完全相同以便进一步处理。虽然版本之间存在这种差异，但我无法理解，也许我错过了一些可以在 9.06 中设置的选项？

最后，我的目标是通过 GS 9.06 将 EPS 文件光栅化为 PNG，并将颜色转换为与 8.70 相同的 RGB 值。

提前感谢您提供的任何帮助/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:20:45.817

9.06 使用色彩管理引擎（实际上整个 9.x 系列都使用）。要控制这一点，您需要提供确定输入和输出之间映射的 ICC 配置文件，文档中有更多信息。

在短期内您可以使用 -dUseFastColor，但如果您关心色彩再现，您应该更彻底地研究色彩管理。

# json - 在 C 中使用 libJSON 解析对象的 JSON 数组

> ID：12175269
> 
> 赞同：0
> 
> 时间：2012-08-29T09:55:30.387
> 
> 标签：json

我有以下**JSON**字符串

`{ "PlayListName":"PlayList1","CountOfFilesinPlayList":5, "PlayListArray":[ {"DevId":1,"FileId":1,"Title":"This is a test %% @_1_1","m_iFileType":0},{"DevId":1,"FileId":2,"Title":"This is a test %% @_1_2","m_iFileType":1},{"DevId":2,"FileId":3,"Title":"This is a test %% @_2_3","m_iFileType":0},{"DevId":2,"FileId":4,"Title":"This is a test %% @_2_4","m_iFileType":2},{"DevId":3,"FileId":5,"Title":"This is a test %% @_3_5","FileType":0}] }`

虽然使用 libJSON，但我能够获取: 的值 `"PlayListName"`， `"CountOfFilesinPlayList"`并且还可以识别`"PlayListArray"`，但我无法找出如何提取`"PlayListArray"`.

以下是解析**JSON**字符串的代码片段

```
int_n nCountOfFiles;
PlayList_st *pPlaylistArr;
int8_n szPlayListName[PLAYLIST_NAME_LENGTH];

json_object *new_obj;
enum json_type type;

new_obj = json_tokener_parse\
    ((char *)args[0].value.stringValue.UTF8Characters);

if(!new_obj) {
    result->type = NPVariantType_Bool;
    result->value.boolValue = false;
    return false;
}
json_object_object_foreach(new_obj, key, val) {
    type = json_object_get_type(val);
        switch(type) {
        case json_type_int:
            if(key && !strcmp((const char *)key, "CountOfFilesinPlayList")) 
            {
                nCountOfFiles = json_object_get_int(val);
                /* Allocate pPlaylistName array */
                if(nCountOfFiles > 0)
                {
                    .....
                    .....
                }
                else
                {                   
                    .....
                    .....                        
                }
            } 
            break;
        case json_type_string:
            if(key && !strcmp((const char *)key, "PlayListName")) 
            {                   
                strncpy (szPlayListName, json_object_get_string(val), \
                    PLAYLIST_NAME_LENGTH-1);

            }
            break;
        case json_type_array:
            if(key && !strcmp((const char *)key, "PlayListArray")) 
            {
                MEDIA_DEBUG_PRINT("\nwcf Media plugin: Found PlayListArray");
            }
            break;
        default:
                    result->type = NPVariantType_Bool;
                    result->value.boolValue = false;
                    return false;                                        
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:14:15.013

这应该会有所帮助 - [http://linuxprograms.wordpress.com/2010/06/01/json_object_get_array/](http://linuxprograms.wordpress.com/2010/06/01/json_object_get_array/) 您可以使用以下代码

```
 json_object_object_foreach(jobj, key, val) {
    type = json_object_get_type(val);
    switch (type) {
      case json_type_array: printf("type: json_type_array, ");
                          jobj = json_object_object_get(jobj, key);
                          int arraylen = json_object_array_length(jobj);
                          printf("Array Length: %dn",arraylen);
                          int i;
                          json_object * jvalue;
                          for (i=0; i< arraylen; i++){
                            jvalue = json_object_array_get_idx(jobj, i);
                            printf("value[%d]: %sn",i, json_object_get_string(jvalue));
                          }
                          break;
    }
  } 
```

# c++ - 断言 unsigned int a 确实是肯定的不起作用？

> ID：12175272
> 
> 赞同：4
> 
> 时间：2012-08-29T09:55:43.190
> 
> 标签：c++, assert, unsigned, unsigned-integer

我想将两个数字相乘，并且我知道我的数字总是正数，那么：

```
unsigned int mulPositiveNumbers(unsigned int a ,unsigned int b)
{
    assert(a > 0);
    assert(b > 0);
    return (a*b);
} 
```

现在，我用 assert 告诉自己“给定的数字总是正数”。

但是当我运行时：

```
int main()
{

    unsigned int res = mulPositiveNumbers(-4,3);

        // more stuff goes here

} 
```

即使我使用的是负数，代码也不会失败。为什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T09:58:04.913

因为`a`和`b`是无符号的，所以它们永远不会是负数。您的断言失败的唯一方法是其中一个为 0。

当您使用带符号的 int 作为参数调用函数时，它只会在函数执行之前（因此在您的断言被检查之前）转换为无符号的 it。将负整数转换为无符号整数将产生一个正整数，因为正如我所说，没有负无符号整数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T09:57:16.850

你没有使用负数，它被转换为一个，`unsigned int`因为这是函数作为参数的。

只有当数字为 时，断言才会失败`0`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T09:57:24.427

您的类型 'unsigned int' 将 -4 隐式转换为无符号等效项

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T10:09:27.770

因为 -4 解释为无符号（32 位） int is `4294967291`，这绝对是正数。

以下应该按您的意愿工作。

```
unsigned int mulPositiveNumbers(int a, int b)
{
    assert(a > 0); // Fail for (-4, 3)
    assert(b > 0);
    return (a*b);
} 
```

当您使用它时，您还应该断言乘法的结果是否会溢出，或者选择更大的返回类型（例如[long long](https://stackoverflow.com/questions/589575/size-of-int-long-etc#589684)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T09:57:34.723

试试这个：

```
(unsigned int a ,unsigned int b) 
```

# ms-word - 从 office 2007 加载项序列化当前 ActiveDocument

> ID：12175273
> 
> 赞同：3
> 
> 时间：2012-08-29T09:55:43.167
> 
> 标签：ms-word, vsto, ms-office, office-addins

我正在创建一个 VSTO Office 2007 加载项。

我需要启用或找到一个解决方案，我可以使用`byte[]`而不是硬盘驱动器保存到 Web 服务。

因此，我通过访问网站并单击 URL 打开文档，单击向我发送 Word 文档，然后选择使用 MS Word 2007 打开。

文档打开，如果我检查我拥有的数据：

> ActiveDocument.Fullname = http://[servername or ip]/[some iis folder]/file.asp?id=353&type=doc`

所以我认为这一切都在内存中，因为我没有原始文件或临时文件（如果存在）。

我从磁盘上没有问题，即使文件是打开的。我怎样才能`byte[]`从电流做一个`ActiveDocument`？

我找到了很多答案，表明它无法完成。但我也有一个客户有一个旧的加载项，它`byte[]`从当前的`ActiveDocument`.

谁能帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:17:47.570

您可以转换[`ActiveDocument`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word._application.activedocument)为 COM 互操作[`IPersistFile`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comtypes.ipersistfile%28v=vs.100%29.aspx)以将打开文档的字节副本保存到本地临时路径，然后将它们读回以发送到您的 Web 服务。在 Office 中，如果不先保存到磁盘，就无法从活动文档中读取字节。请参阅[此 MSDN 博客以供参考](http://blogs.msdn.com/b/pranavwagh/archive/2008/04/03/how-to-do-a-save-copy-as-in-word.aspx)。

```
COM.IPersistFile compoundDocument = Application.ActiveDocument as COM.IPersistFile; 
compoundDocument.Save(filePath, false);
byte[] content = File.ReadAllBytes(filePath); 
```

# javascript - 如果匈牙利符号大多被贬低，为什么“构造函数的上驼峰与其他一切的下驼峰”如此受欢迎？

> ID：12175276
> 
> 赞同：0
> 
> 时间：2012-08-29T09:56:02.527
> 
> 标签：javascript, naming-conventions, camelcasing, hungarian-notation, object-construction

至少在 StackOverflow 上似乎是这样，[匈牙利符号通常被认为是一件坏事](http://www.joelonsoftware.com/articles/Wrong.html)（尽管少数人仍然赞成）。

现在，在过去几个月我一直在进行大部分编码的 JavaScript 世界中，似乎已经接受了一种本质上非常相似的命名约定，但我还没有看到有人反对它，那就是`UpperCamelCase`命名对象构造函数vs`lowerCamelCase`命名其他所有内容。

所以差异似乎只在表面：

*   匈牙利符号使用前缀，而 JavaScript 使用大小写。
*   匈牙利符号可以区分很多东西，而 JavaScript 只能区分“对象构造函数”和“非对象构造函数”。

有些人喜欢说“systems Hungarian”与“applications Hungarian”不同，前者表示类型，后者表示类型未涵盖的内容。在这种情况下，“systems Hungarian”通常仍然被认为是坏的，而“applications Hungarian”可能被认为是好的。

JavaScript 驼峰式大小写约定似乎更像系统匈牙利语，因此在这一点上没有任何优点。

人们反对匈牙利符号的观点似乎仍然适用于 JavaScript 对象构造函数：

*   编译器无论如何都知道类型。
*   IDE 在这方面要好得多。
*   当类型改变时它太脆了。
*   ~~它使代码变得杂乱无章，更难阅读。~~

**那么这个 JavaScript 约定有什么不同呢？它可以在更一般的匈牙利符号不合适的地方使用？**

是不是缺少好的 JavaScript IDE？其有限的使用范围是否使它不那么糟糕？是因为动态语言并没有太多的类型吗？因为它不能被过度使用，所以这不是问题吗？

^(（如果这属于programmers.SE而不是SO，请迁移。）)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:14:55.067

毕竟它更像是“应用程序匈牙利语”。

Javascript 不知道您的函数是构造函数还是普通函数。并且像调用普通函数一样调用构造函数可能会导致非常奇怪的不良结果（除非您使用的是 ES5 严格模式）。

我也看不到 IDE 将如何帮助您。IDE 唯一能做的就是阻止您调用`var x = new plainFunction();`and `var y = Constructor();`，这意味着首先使用匈牙利符号。

我也看不出使用该符号如何使代码更难阅读。

# git - 在 Zsh 中禁用远程分支的自动完成？

> ID：12175277
> 
> 赞同：14
> 
> 时间：2012-08-29T09:56:05.663
> 
> 标签：git, zsh

这与[在 Git Bash 中禁用远程分支的自动完成有关？](https://stackoverflow.com/questions/6623649/disable-auto-completion-of-remote-branches-in-git-bash).

任何人都知道如何对 zsh 做同样的事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-16T12:21:52.677

```
zstyle :completion::complete:git-checkout:argument-rest:headrefs command "git for-each-ref --format='%(refname)' refs/heads 2>/dev/null" 
```

解释：

如果您在当前上下文中按 TAB （而不是按） ，键入`git checkout <Control-x><h>`调用`_complete_help`会公开 zsh 完成系统如何操作的内部结构。`<Control-x><h>`从这里可以看出zsh会调用该`__git_heads`函数来完成git分支头的名称。如果然后键入`which __git_heads`，您可以看到这些分支头名称是通过以下方式获得的：

```
_call_program headrefs git for-each-ref --format='"%(refname)"' refs/heads refs/remotes 2>/dev/null 
```

幸运的是，`_call_program`它专门设计用于允许用户更改默认行为。所以上面的`zstyle`命令指示 zsh 使用替代`git for-each-ref ...`调用而不是内置的调用，你可以看到在上面的调用中，我删除了`refs/remotes`参数。的第一个参数`zstyle`是完成上下文，这里它的意思是“`headrefs`当用户完成参数时，完成系统请求完成标签的完成`git checkout`。所以这`zstyle`只会影响`git checkout`，而不影响任何其他`git`子命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-29T15:56:28.150

通过键入`git checkout <Ctrl-X><H>`，您会看到一堆标签，其中一些似乎相关的是：

```
$ git checkout
tags in context :completion::complete:git-checkout:argument-rest:
    remote-branch-names-noprefix              (__git_describe_branch __git_describe_commit __git_remote_branch_names_noprefix _git-checkout _git) 
    heads-remote                              (__git_describe_branch __git_describe_commit __git_heads_remote __git_heads __git_commits __git_tree_ishs _git-checkout _git) 
    [...] 
```

乍一看，我们需要改变`remote-branch-names-noprefix`'s 的行为以停止提供不带前缀的远程分支名称。

要仔细检查，让我们看看这些标签与哪些条目相关联，使用：

```
$ zstyle ':completion:*' group-name ''
$ zstyle ':completion:*' format 'Completing "%d":'
$ git checkout T<Tab>
Completing "remote branch name":
T3522-plugins_and_stuff  T7482
Completing "local head":
T7626-async 
```

在上面标签名称后面的括号中，有一串命令会导致为该标签生成自动完成条目。在`remote-branch-names-noprefix`'s 链中，您可以看到`__git_remote_branch_names_noprefix`哪些似乎相关。看看`/usr/share/zsh/functions/Completion/Unix/_git`：

```
(( $+functions[__git_remote_branch_names_noprefix] )) ||
__git_remote_branch_names_noprefix () {
  declare -a heads

  branch_names=(${${${${(f)"$(_call_program remote-branch-refs-noprefix git for-each-ref --format='"%(refname)"' refs/remotes 2>/dev/null)"}#refs/remotes/}#*/}:#HEAD})
  __git_command_successful $pipestatus || return 1

  __git_describe_commit branch_names remote-branch-names-noprefix 'remote branch name' "$@"
} 
```

您可以看到如何`_call_program`用于定义`remote-branch-refs-noprefix`. 我们想在`git-checkout`'s 的情况下改变这个定义。通过将其替换为“echo”，它将停止提供自动完成条目：

```
zstyle ':completion::complete:git-checkout:argument-rest:remote-branch-refs-noprefix' command "echo" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-02T23:14:36.073

看来`__git_heads`现在只检查本地分支，而是调用完成文件`__git_refs`。

我通过将此补丁应用到 来破解它`git-completion.bash`，它由 zsh`_git`命令代理：

```
--- git-completion.bash.old 2015-04-02 16:09:38.000000000 -0700
+++ git-completion.bash     2015-04-02 16:10:24.000000000 -0700
@@ -1032,13 +1032,7 @@
                    "
            ;;
    *)
-           # check if --track, --no-track, or --no-guess was specified
-           # if so, disable DWIM mode
-           local flags="--track --no-track --no-guess" track=1
-           if [ -n "$(__git_find_on_cmdline "$flags")" ]; then
-                   track=''
-           fi
-           __gitcomp_nl "$(__git_refs '' $track)"
+           __gitcomp_nl "$(__git_heads)"
            ;;
    esac
 } 
```

这不是一个完美的解决方案，但它适用于我的用例，并且可以立即完成而不是 10 秒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-27T08:39:13.263

没有一个答案不帮助我。尝试这个：

```
$ git checkout <Ctrl+X><H>
tags in context :completion::complete:git::
    argument-rest  (_arguments _git)
tags in context :completion::complete:git-checkout::
    argument-rest options  (_arguments _git-checkout _call_function _git)
tags in context :completion::complete:git-checkout:argument-rest:
    remote branches tree-ishs modified-files  (_alternative _git-checkout _call_function _git) 
    remote-branch-names-noprefix              (__git_remote_branch_names_noprefix _alternative _git-checkout _call_function _git) 
    heads commit-tags commit-objects          (_alternative __git_commits __git_tree_ishs _alternative _git-checkout _call_function _git) 
    heads-local                               (__git_heads_local __git_heads _alternative __git_commits __git_tree_ishs _alternative _git-checkout _call_function _git) 
    commit-tags                               (__git_tags_of_type __git_commit_tags _alternative __git_commits __git_tree_ishs _alternative _git-checkout _call_function _git) 
    modified-files                            (__git_files __git_modified_files _alternative _git-checkout _call_function _git) 
```

你可以在这个输出函数中找到，它会为命令生成完成。您可以在`.zshrc`. 把它**放在配置文件的最顶部**：

```
__git_heads_remote() {} 
```

之后，您将不会在完成时看到远程磁头。您可以对任何功能执行此操作。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-29T13:17:02.463

`git checkout`您可以通过将此行添加到`.zshrc`文件中来禁用自动完成功能：

```
compdef -d git checkout 
```

# mongodb - 选择作者标记为“允许其他人查看该用户的评论”的消息

> ID：12175278
> 
> 赞同：0
> 
> 时间：2012-08-29T09:56:08.410
> 
> 标签：mongodb, mongodb-query, nosql

我正在考虑在某些时候为我的一些项目切换到 MongoDB。为此，我需要对其进行测试并知道我能做什么和不能做什么。

`select`在阅读了一些关于 MongoDB 如何工作的书籍之后，我必须说我对's 的实际工作方式有点困惑。

假设我有一个名为`users`：

```
{
    user_name: string,
    ....,
    ....,
    messages_can_be_seen_by_others: boolean
} 
```

另外，我有一个集合`topics`：

```
{
    topic_title: string,
    .....,
    .....,
    topic_messages:
        [
            {
                 user_name: string,
                 text: string,
                 date: DateTime
            },
            {
                 user_name: string,
                 text: string,
                 date: DateTime
            }
        ]
    .....
} 
```

如何根据`users`集合选择一个主题及其所有消息？`Person1`我的意思是，由没有`messages_can_be_seen_by_others`标记为的人写的消息不`true`应该被数据库返回。

那么，我应该使用 map/reduce，在`php`获得所有结果后进行过滤，还是还有其他我不知道的事情？如果我应该使用 map/reduce 会有多困难？

另外，还有一个问题。如何从第一条消息`topics`中选择所有字段？`date`（有点像`$elemMatch.messages.0.date`）

PS：额外的问题：我可以返回一个主题的消息数吗？（实际上没有使用 PHP 计算它们。只需计划 MongoDB 选择语句）

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:43:49.140

您的所有问题或多或少都可以通过2.2 版本的 MongoDB（今天发布！）附带的新[聚合框架来解决。](http://docs.mongodb.org/manual/aggregation/ "聚合框架")

但是有一个警告：聚合仅适用于单个集合。在您的第一个问题中，如果您想将用户集合（特别是`messages_can_be_seen_by_others`标志）中的信息与主题集合（即消息）中的信息相结合，您需要使用 Map/Reduce，事先进行额外查询检查您是否希望该用户包含在以下查询中，或者只是将整个用户文档与主题一起存储，而不仅仅是名称。这是 RDBMS 不会做的事情，但对于像 MongoDB 这样的基于文档的数据库，这是很常见的做法。

除此之外，您所有的问题都可以通过聚合来解决。例如

1.  选择一个主题，来自特定用户的所有消息都可以使用以下语法完成：

    ```
    db.topics.aggregate(
        {$match: {'topic_title':'Some Topic Title'}}, 
        {$unwind: '$topic_messages'}, 
        {$match: {'topic_messages.user_name': 'Some User Name'}}, 
        {$group: {'_id':'$topic_title', 'messages': {$addToSet: '$topic_messages'}}}
    ) 
    ```

    此查询将首先仅过滤与标题匹配的主题，然后展开（与组相反）消息，过滤特定用户，最后根据标题将消息组合在一起。

2.  查找所有主题标题及其第一条（最早）消息的日期：

    ```
    db.topics.aggregate(
        {'$unwind': '$topic_messages'}, 
        {'$sort': {'topic_messages.date' : 1}}, 
        {'$group': {'_id': '$topic_title', 
                    'first_date': {'$first': '$topic_messages.date' }
                   }
        }
    ) 
    ```

3.  计算一个主题的所有消息（使用 MongoDB，而不是 php）：

    ```
    db.topics.aggregate(
        {'$match': {'topic_title': 'Some Topic Title'}}, 
        {'$unwind': '$topic_messages'}, 
        {'$group': {'_id':'$topic_title', 'count': {$sum: 1}}}
    ) 
    ```

所以你看，聚合框架非常强大，甚至可以在分片集合上工作，只要你需要的所有信息都存储在一个集合中。

# robotics - LabVIEW 机器人与 Pioneer P3DX

> ID：12175284
> 
> 赞同：0
> 
> 时间：2012-08-29T09:56:16.717
> 
> 标签：robotics, labview

LabVIEW 中是否支持 MobileRobots Pioneer 3-DX (P3DX) 差动驱动机器人？ [http://www.ni.com/white-paper/9079/en#toc4](http://www.ni.com/white-paper/9079/en#toc4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:25:23.173

好吧，看起来这里可能有一些适合您的东西：[mobilerobots.com 上的 NI_LabView_Interface](http://robots.mobilerobots.com/wiki/NI_LabView_Interface)有一个指向[NI LabVIEW MobileRobots 接口的链接](https://decibel.ni.com/content/docs/DOC-5584)

# c# - 在 Object 和 ValueType 类中实现的 GetHashCode 有什么区别？

> ID：12175289
> 
> 赞同：5
> 
> 时间：2012-08-29T09:56:28.793
> 
> 标签：c#

我在下面的代码片段中总结了我的问题

```
struct Point
{
    public int X;
    public int Y;

    public Point(int x, int y)
    {
        this.X = x;
        this.Y = y;
    }

    public override int GetHashCode()
    {
        return base.GetHashCode();
    }

    public void PrintValue()
    {
        Console.WriteLine(
            "{0},{1}",
            this.X, this.Y);
    }
} 
```

上述结构派生自包含 GetHashCode 方法的 ValueType。下面是一个派生自 Object 并包含`GetHashCode`方法的类版本。

```
class Point
{
    public int X;
    public int Y;

    public Point(int x, int y)
    {
        this.X = x;
        this.Y = y;
    }

    public override int GetHashCode()
    {
        return base.GetHashCode();
    }

    public void PrintValue()
    {
        Console.WriteLine(
            "{0},{1}",
            this.X, this.Y);
    }
} 
```

我只是想知道。这些实现之间有什么区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T09:59:18.367

Yes; value-types (`struct`s) by default make their hash-code as a composite of the values of their fields. You can observe this by trying:

```
var s = new Point(1,2); // struct
Console.WriteLine(s.GetHashCode());
s.X = 22; // <=============== struct fields should usually be readonly!
Console.WriteLine(s.GetHashCode()); // different 
```

Note that `Equals` obeys similar rules.

By contrast, a reference-type (`class`) uses, by default, the *reference itself* for both `GetHashCode()` and `Equals()`. The `s.X = 22` will **not** impact a `class`:

```
var s = new Point(1,2); // class
Console.WriteLine(s.GetHashCode());
s.X = 22;
Console.WriteLine(s.GetHashCode()); // same 
```

# playframework - 如果子目录不存在运行错误页面

> ID：12175291
> 
> 赞同：0
> 
> 时间：2012-08-29T09:56:30.203
> 
> 标签：playframework, routes, playframework-2.0

我在 Play Framework 2.0.2 中遇到路由问题。当我输入不存在的浏览器子目录（等本地主机/目录/）时，我得到页面：

```
Action not found For request 'GET /directory/'. 
```

`routes`如果我想在每个不存在的子目录上运行等，我需要添加什么到文件中`controllers.Application.show(page = "error")`？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:55:26.910

使用[Global 对象](http://www.playframework.org/documentation/2.0.2/JavaGlobal)进行自定义 `onHandlerNotFound()`并呈现自定义内容，而不是将其重定向到其他资源，即：

```
public class Global extends GlobalSettings {      
    @Override
    public Result onHandlerNotFound(RequestHeader request) {
       return notFound(views.html.error.render("Your page was not found"));
    }
} 
```

（也可以创建新视图：`app/views/error.scala.html`并根据需要对其进行样式化）

# git - 推送一个重新定位的分支？

> ID：12175298
> 
> 赞同：2
> 
> 时间：2012-08-29T09:56:42.707
> 
> 标签：git, git-rebase, git-push

我这里有点情况。我重新设置了一个开发分支，并尝试推送它，但它被拒绝了（非快进）......因为我不知道为什么，我来找你......

我做了什么：

```
git checkout dev
git rebase G
# Here, I had to manually merge some files

# Result (in gitk) was :
#       A---B---C remote/dev   A'---B'---C' dev
#      /                      /
# D---E---F------------------G---H remote/master

git push remote dev 
```

知道为什么我的推动是“非快进”并因此被拒绝吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T10:01:31.563

这不是快进，**因为你做了一个 rebase**。`rebase`接受一堆提交并从中创建新的提交（可能在提交 DAG 中的不同位置）。`git rebase`在实际运行之前，请确保您了解运行的所有含义。无法快进是这些影响之一。

重新定位已发布的历史通常被认为是一个坏主意。如果您确实必须重新设置分支并推送它，请将`-f`标志传递给 git push，或在您的 refspec 前加上`+`( `git push remote +dev`)。

克隆了您的存储库并在该分支上工作的其他人将必须执行相同的变基，否则您将在下次从您的贡献者之一合并时合并旧历史。

* * *

详述快进：

从您的图表中很容易看到。快进基本上只会将提交附加到历史记录。每个提交都由其提交哈希唯一标识。提交哈希是根据提交内容以及提交历史计算的。这意味着根据定义，具有不同祖先/父母的提交将具有不同的散列。

如果您进行多次提交并将它们插入 DAG 中的不同位置，它们将描述不同的历史记录并获得新的提交哈希（提交时间也已更新，但这不是重点）。因此不可能*快进*，因为它不再*是仅附加的*。此外，在变基并推送结果后，您将无法访问旧的提交（无需使用 reflog）。

另一种思考方式：您的 push 不会将提交附加到旧的 ( `remote/dev`) 分支，而是将提交附加到其他地方 (commit `G`)。

# c++ - 在 C++ 中使用 delphi 库

> ID：12175301
> 
> 赞同：1
> 
> 时间：2012-08-29T09:56:45.497
> 
> 标签：c++, delphi, dll, import

这已经在很多地方进行了部分讨论，但它仍然对我不起作用。

我有一个从 delphi 源代码编译的 dll，它以两个名称导出一个函数，使用检查 dll

```
>> dumpbin /EXPORTS MyLibrary.dll
```

我得到以下输出：

```
...
17    3 00070A88 MyFunction
...
46   24 00070A88 _MyFunction@48
...
```

所以我创建了一个名为 MyLibrary.def 的文件，其内容如下：

```
EXPORTS
MyFunction
_MyFunction@48
```

并使用生成了一个导入库

```
>> lib /def:MyLibrary.def /OUT:MyLibrary.lib /MACHINE:x86
```

使用 dumpbin 检查新的 lib 文件，我看到以下内容：

```
...
_MyFunction
...
__MyFunction@48
... 
```

所以不知何故，lib 应用程序在函数名称前添加了一个下划线。（为什么？）

然后我尝试在 c++ 程序中使用这个函数，用 Microsoft Visual Studio C++ 2010 Express 编译（使用 lib 文件）：

```
// MyLibrary.h
# define DllImport(Type) __declspec (dllimport) Type __stdcall

extern "C" DllImport(void)MyFunction(...); 
```

```
// main.cpp
#import "MyLibrary.h"

...
MyFunction(....);
... 
```

据我所知，这现在应该可以工作，但是我收到以下链接器错误：

```
... error LNK2001: Unresolved external sympol "__imp__MyFunction@48". 
```

我不明白为什么会出错（我真的不明白整个事情是如何运作的......）但我又尝试了两件事。

1.  将 MyLibrary.h 和 main.h 中的函数从 MyFunction 重命名为 _MyFunction
    *   结果：有效！但为什么？我不想依赖这个，因为有些事情显然是错误的。  
2.  将我的函数重命名为 MyFunction 并删除了 def-File 中的下划线，再次生成 lib 文件并尝试编译
    *   结果：编译成功，但启动程序时我得到

```
 MyApp - Entry Point Not Found
---------------------------
The procedure entry point MyFunction@48 could not be located
in the dynamic link library MyLibrary.dll. 
```

我认为需要对 lib 工具和链接器的内部工作有更深入的了解，但到目前为止我找不到任何关于此的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:07:35.937

[KB131313](http://support.microsoft.com/kb/131313)解释了尝试使用该`lib`实用程序时会遇到的一个问题：

> 唯一可以使用 .DEF 文件从没有源代码或目标模块的 .DLL 创建导入库的情况是 .DLL 通过 C 接口导出函数。具体来说，需要声明函数以使用 C 调用约定。

`@`您的函数使用 stdcall，而不是 cdecl，从函数名称中的可以看出。尽管如此，知识库文章解释了该怎么做：

1.  像在 C++ 中一样声明该函数，但用于*export*而不是*import*。

    大多数情况下，您已经这样做了。你有正确的调用约定，但`@48`最后意味着它需要有 48 个字节的参数。该函数将期望将该数据推送到堆栈中，并且在它返回之前，该函数将弹出那么多。您`...`在声明中的使用与此不兼容。

    如果你不知道具体的参数列表到底应该是什么，那么继续定义 12 个`int`参数，这样至少堆栈结构是正确的。（但如果你不知道该列表到底应该是什么，那么无论如何你都快要完蛋了。）

2.  用 C++ 编写一个虚拟实现。

    实现可以为空。唯一的要求是代码编译和链接。

3.  从该虚拟代码编译您自己的*MyLibrary.dll版本。*

    确保它与原始 DLL 兼容。在它上面运行`dumpbin`并看到它至少导出了您在原始 DLL 中看到的函数名称的一个版本。（您不需要两者；您的程序只会使用其中一个名称，并且如`dumpbin`输出所示，两个名称都位于二进制文件中的相同位置，因此您的程序最终使用哪个名称并不重要.)

4.  丢弃 DLL，只保留 LIB 文件。

5.  使用 lib 文件与真实的 DLL 链接。

如果链接器仍然抱怨它找不到，则从您的声明`__imp_MyFunction@48`中删除该部分。`dllimport`那应该删除`__imp_`前缀，使名称看起来更像 Delphi 名称。

* * *

如果一切都失败了，您可以使用运行时动态链接而不是加载时。为函数声明一个指针类型，然后使用`LoadLibrary`and`GetProcAddress`来访问它。

# mysql - 我试图插入一个表格和表格字段作为变量

> ID：12175302
> 
> 赞同：0
> 
> 时间：2012-08-29T09:56:50.677
> 
> 标签：mysql, wordpress

我试图将表格和表格字段作为变量插入，例如

```
$meta = array(
  '_wp_attached_file'=>$guid,
  '_woocommerce_exclude_image'=>'0',
  '_wp_attachment_metadata'=>''
);

foreach($meta as $key=>$value){
  mysql_query("insert into $wpdb->postmeta (`post_id`,`$key`) values('$post_id','$value')") or die(mysql_error());
} 
```

它给出了错误

> “字段列表”中的未知列“_wp_attached_file”

如何使用字段名称插入表格？（这是一个 WordPress 表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:03:18.743

Wordpress 的[`wp_postmeta`表格](http://codex.wordpress.org/Database_Description#Table%3a_wp_postmeta)只包含四列：

*   `meta_id`
*   `post_id`
*   `meta_key`
*   `meta_value`

您（可能）想要：

```
INSERT INTO $wpdb->postmeta (post_id, meta_key, meta_value) VALUES
  ('$post_id', '$key', '$value') 
```

# mysql - MySQL - 连接两个表，在第二个中搜索

> ID：12175303
> 
> 赞同：2
> 
> 时间：2012-08-29T09:56:50.583
> 
> 标签：mysql, join, where-clause

伙计们，

我有两张桌子：

表格1：

```
UID    NAME
1      Name1
2      Name2
3      Name3 
```

表 2：

```
UID    PID    PARAM
1      1     10
2      1     20
3      2     10
4      2     30
5      2     40
6      3     60
7      3     20
8      3     10 
```

我需要连接这两个表（t1.UID=t2.PID）并仅列出第一个表中的记录，这些记录（例如）在第二个表中有 PARAM=10 和 PARAM=20。这样，对于此示例，查询应返回：

```
UID      NAME
1        Name1
3        Name3 
```

..因为只有 Name1 AND Name3 有 BOTH PARAM=10 AND PARAM=20

我怎样才能做到这一点？我知道这可能很简单，但我找不到答案，也找不到这里，谷歌也找不到。

先感谢您！内德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:01:31.140

```
select a.name          
from table1 a
inner join table2 b on (a.UID = b.PID)
where b.param in (10, 20)
group by a.name
having count(*) = 2 
```

通过声明您的表`table1 a`，您可以通过将表声明的名称放入列中来调用该表中的任何列`a.name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:00:36.260

此查询应该有效：

```
SELECT t1.* 
FROM table1 t1 
     INNER JOIN (SELECT PID 
                 FROM table2  
                 WHERE PARAM IN(10, 20)
                 GROUP BY PID
                 HAVING COUNT(*) = 2
                )t2
                ON t1.UID = t2.PID; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T10:04:04.930

```
select distinct t1.id 
from table1 t1 join table2 t2 on t1.uid = t2.pid and t2.param = 10 
               join table2 t3 on t1.uid = t3.pid and t3.param = 20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T10:03:25.367

您不必加入：

SELECT * FROM TABLE1 WHERE IN (SELECT UID FROM TABLE2 WHERE PARAM IN (10, 20) )

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T10:03:26.690

试试这个：

```
select uid,name from t1 where exists (select 1 from t2 where param = 10 and pid = t1.uid) and exists (select 1 from t2 where param = 20 and pid = t1.uid); 
```

# linux - How to make 'cat' in Linux to interpret control characters

> ID：12175304
> 
> 赞同：14
> 
> 时间：2012-08-29T09:56:55.710
> 
> 标签：linux, escaping, echo, cat

Consider the following echo command:

```
 echo -e "at\r" 
```

which produces the output `at` on the command line, i.e. the \r special character has been interpreted. I want to do the exact same thing with some text in a file. Supposing the exact same sequence

```
at\r 
```

is written to a file named `at.txt`, then I want to display it on the terminal. But

```
cat at.txt 
```

gives the output

```
at\r 
```

what is not what I want. I want the special sequence \r to be interpreted, not just printed on the terminal. Anyone any idea?

Thanks Alex

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-29T10:23:31.183

为什么不：

```
while read -r line; do echo -e $line; done < at.txt 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-10T14:31:30.163

您可以简单地：

```
echo -e $(cat at.txt) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T10:23:19.370

内置`echo`命令解释常见的反斜杠转义。但是在文件中，您必须以类似的方式解释或转换它。该`sed`程序可以做到这一点。

```
sed -e 's/\\r/\r/' < at.txt 
```

但我也在这里学到了一些东西。外部`echo`命令的行为与内部命令不同。

```
/bin/echo "\r" 
```

有不同的输出

```
echo "\r" 
```

但基本上你需要一个过滤器将文字`\r`字符串转换为单字节 0x0D。

# string - wp7将html数据传递到Web浏览器控件

> ID：12175305
> 
> 赞同：0
> 
> 时间：2012-08-29T09:56:56.833
> 
> 标签：string, windows-phone-7

我想`webBrowser.NavigateToString(varivale);` 在这个变量中传递字符串变量，我存储了一个 html 源代码。我如何在这种方法中传递变量？

我的代码是

```
string varible=<body>..<p>some text</p>..</body>;
webBrowser1.NavigateToString(variable); 
```

查看我的实际代码：

```
JObject cityblog1 = (JObject)cityblog[0];
        string cityimg = (string)cityblog1["CityImage"];
        string  citydetail = (string)cityblog1["CityDetail"];
        //var  = (string)cityblog1["CityDetail"];

        City_Blog cb = new City_Blog();
        cb.CityImage = cityimg;
        cb.CityDetail = citydetail;
        lstcityblogdetail.Add(cb);
        setimg();

        webBrowser1.NavigateToString(ConvertExtendedASCII(citydetail));            

    }
    private static string ConvertExtendedASCII(string HTML)
    {
        string retVal = "";
        char[] s = HTML.ToCharArray();

        foreach (char c in s)
        {
            if (Convert.ToInt32(c) > 127)
                retVal += "&#" + Convert.ToInt32(c) + ";";
            else
                retVal += c;
        }

        return retVal;
    } 
```

**问题：**

当我运行应用程序时，我的输出是控制器之类的所有标签，`&nbsp`但我不想要那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:19:19.913

所以，你以正确的方式去做。 [http://blogs.msdn.com/b/mikeormond/archive/2010/12/16/displaying-html-content-in-windows-phone-7.aspx](http://blogs.msdn.com/b/mikeormond/archive/2010/12/16/displaying-html-content-in-windows-phone-7.aspx)

我可以在您的代码中看到的唯一问题 - 您`varible`以错误的方式声明 a：

```
string varible = "<body>..<p>some text</p>..</body>"; 
```

你忘记了报价。

**升级** 试试这个：

```
var htmlCode = HttpUtility.HtmlDecode(citydetail);
webBrowser1..NavigateToString(ConvertExtendedASCII(htmlCode )); 
```

# .net - Decompile method from assembly (ICSharpCode)

> ID：12175307
> 
> 赞同：0
> 
> 时间：2012-08-29T09:57:13.080
> 
> 标签：.net, decompiling, mono.cecil, icsharpcode

I'm trying to decompile a method programmatically using ICSharpCode. I'm able to decompile the entire type, but whenever I try to decompile a single method, I get a null reference exception. The approach is much like this question [ICSharpCode.Decompiler + Mono.Cecil -> How to generate code for a single method?](https://stackoverflow.com/questions/9811448/icsharpcode-decompiler-mono-cecil-how-to-generate-code-for-a-single-method)

The exception is thrown when invoking astBuilder.AddMethod. Any idea of what I'm missing. Or maybe recommendations for a different framework?

Thanks in advance!

Stacktrace:

> at ICSharpCode.Decompiler.Ast.NameVariables.AssignNamesToVariables(DecompilerContext context, IEnumerable`1 parameters, IEnumerable`1 variables, ILBlock methodBody) at ICSharpCode.Decompiler.Ast.AstMethodBodyBuilder.CreateMethodBody(IEnumerable`1 parameters) at ICSharpCode.Decompiler.Ast.AstMethodBodyBuilder.CreateMethodBody(MethodDefinition methodDef, DecompilerContext context, IEnumerable`1 parameters) at ICSharpCode.Decompiler.Ast.AstBuilder.CreateMethodBody(MethodDefinition method, IEnumerable`1 parameters) at ICSharpCode.Decompiler.Ast.AstBuilder.CreateMethod(MethodDefinition methodDef) at ICSharpCode.Decompiler.Ast.AstBuilder.AddMethod(MethodDefinition method) at CodeFlow.Decompile.DecompileMethod(String assemblyPath, String assemblyFile, String typeName, String methodName) in C:\Arbejdsfiler\DCFServices\Tools\CustomFxCopRules\CustomCodeAnalysis\CodeFlow\Decompile.cs:line 69

# vb.net - How to convert this line of code into Vb.NET?

> ID：12175311
> 
> 赞同：-4
> 
> 时间：2012-08-29T09:57:19.367
> 
> 标签：vb.net, vb6-migration

I have been working for VB6.0 and trying to convert that code into VB.NET.Alomost I tried and succeed but when I am confused to convert this lines of code.

```
If Not ds.EOF Then
      ds.MoveFirst()
      ds.MoveLast()
End If 
```

Can Any one help me to convert this lines of Code ?any one tell me some online VB6 to VB.NET converter tools.

I have used SQlDataReader instead of the RecordSet.I think while seeing this lines of code I thought ds.MoveFirst(),ds.MoveLast() means moving the cursor postion of the recordSet to last record

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:16:03.120

VB.NET 记录集是[`DataReader`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.data.datareader.read.aspx)一个[`SqlDataReader`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx). 它有一种[`Read`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.read.aspx)方法可以在读取器包含多个块的情况下将读取器推进到下一个数据块，并返回一个`bool`指示是否有更多数据块要读取的方法。

例如：

```
Using con = New SqlConnection(connectionString)
    Using cmd = New SqlCommand("SELECT IntCol,StringCol,BoolCol FROM Table WHERE ...", con)
        con.Open()
        Using rdr = cmd.ExecuteReader()
            While rdr.Read()
                Dim IntCol = rdr.GetInt32(0)
                Dim StringCol = rdr.GetString(1)
                Dim BoolCol = rdr.GetBoolean(2)
            End While
        End Using
    End Using
End Using 
```

请注意，ADO.NET 中没有`MoveFirst`或`MoveLast`。

您不应该将阅读器移动到最后一个位置。这意味着即使您只想要最后一条记录，您也会从数据库中读取所有数据。为什么不`SELECT TOP 1 ... ORDER BY ...`首先使用仅选择最后一个？这就是为什么 a`SqlDataReader`没有这些方法的原因。

[`DataTable`](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)如果您想在内存中执行此操作，另一种方法是使用 a 。然后您可以通过 访问最后一行`table.Rows(table.Rows.Count-1)`。您可以加载一个`DataTable`via [`SqlDataAdapter.Fill(DataTable)`](http://msdn.microsoft.com/en-us/library/905keexk)。

# .net - Casting a Collection of Objects to IEnumerable(Of Type)

> ID：12175314
> 
> 赞同：0
> 
> 时间：2012-08-29T09:57:29.283
> 
> 标签：.net, casting

I've got a ConfigurationSection in my app.config which includes a list of http Endpoints (~50). Each one has an optional priority (as well as a default).

I'd like to display this list in order.

```
Dim Config As MyConfigSection = DirectCast(System.Configuration.ConfigurationManager.OpenExeConfiguration(System.Configuration.ConfigurationUserLevel.None).Sections("MySection"), MyConfigSection)
Dim Endpoints = MyConfigSection.InitialEndpoints 
```

In this case `InitialEndpoints` is of type `Endpointcollection` which Inherits `ConfigurationElementCollection` and is just a noddy collection which is loosely typed.

The Endpoint collection happens to deal with `EndpointDefinition`s which in turn have a `Url`, `Priority`, etc...

I'd like to be able to do...

```
For Each E in Endpoints.OrderBy(function(x) x.Priority)
    ...
Next 
```

Do I really need to create a new list/collection and transfer the objects across, casting them as I go?

Cheating and casting the collection as an `IEnumerable` resulted in an invalid cast (not entirely unexpected)

An alternate thought was to do something like...

```
Endpoints.Select(function(x) DirectCast(x, Endpointdefinition)).OrderBy(...) 
```

But `EndpointCollection` isn't a list so doesn't benefit from the LINQ `Select()` extension. I could always implement `IList` but now it feels like I'm using a sledgehammer to crack a nut.

Can someone please point out the obvious way to do this? For reference, my EndpointCollection is below

```
<ConfigurationCollection(GetType(EndpointDefinition), AddItemName:="Endpoint")>
    Public Class EndpointCollection
        Inherits ConfigurationElementCollection

        Protected Overloads Overrides Function CreateNewElement() As ConfigurationElement
            Return New EndpointDefinition
        End Function

        Protected Overrides Function CreateNewElement(elementName As String) As ConfigurationElement
            Return New EndpointDefinition With {.Url = elementName}
        End Function

        Protected Overrides Function GetElementKey(element As ConfigurationElement) As Object
            Return DirectCast(element, EndpointDefinition).Url
        End Function

        Public Overrides ReadOnly Property CollectionType As ConfigurationElementCollectionType
            Get
                Return ConfigurationElementCollectionType.AddRemoveClearMap
            End Get
        End Property

        Public Shadows Property Item(index As Integer) As EndpointDefinition
            Get
                Return CType(BaseGet(index), EndpointDefinition)
            End Get
            Set(value As EndpointDefinition)
                If Not (BaseGet(index) Is Nothing) Then
                    BaseRemoveAt(index)
                End If
                BaseAdd(index, value)
            End Set
        End Property
    End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:04:41.953

你的问题是你的类实现了`IEnumerable`，而不是`IEnumerable(Of T)`。

由于`EndpointCollection`继承`ConfigurationElementCollection`和`ConfigurationElementCollection`实现`IEnumerable`，您可以使用[`OfType()`](http://msdn.microsoft.com/en-us/library/bb360913)扩展方法（或者[`Cast()`](http://msdn.microsoft.com/en-us/library/bb341406.aspx)，如果需要）。

因此，您应该能够执行以下操作：

```
Dim Endpoints = MyConfigSection.InitialEndpoints.OfType(Of Endpointdefinition).OrderBy(function(x) x.Priority) 
```

或者

```
Dim Endpoints = MyConfigSection.InitialEndpoints.Cast(Of Endpointdefinition).OrderBy(function(x) x.Priority) 
```

# c# - 如何在 ASP.NET 应用程序中打开带有收件人的 Outlook

> ID：12175317
> 
> 赞同：0
> 
> 时间：2012-08-29T09:57:32.143
> 
> 标签：c#, asp.net, email, outlook, sendmail

我想要一个 ASP.NET 应用程序打开 Outlook，收件人不发送邮件。仅与收件人一起打开 Outlook。

我想为其他应用程序测试它，在我的测试中，我使用带有收件人文本和按钮 openOutlook 的文本框。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:59:59.443

假设 Outlook 是默认安装的电子邮件客户端，您可以在锚标记中使用 mailto 前缀：

```
<a href="mailto:user@example.com">Send email to user@example.com</a> 
```

否则，您的选择可能会受到限制，因为您的 Web 服务器无法在客户端计算机上打开特定应用程序。您可能必须开发一个 ActiveX 或 Java 小程序，但这确实是大材小用。

# php - How to run output of a string as PHP script?

> ID：12175321
> 
> 赞同：1
> 
> 时间：2012-08-29T09:57:51.450
> 
> 标签：php

I have a field in a database which contains the value :

```
&lt;p&gt;&lt;!--? echo get_block(\&#039;contact\&#039;);?--&gt;&amp;lt;?php echo get_block(&amp;#39;home-page&amp;#39;); ?&amp;gt;&lt;/p&gt; 
```

When I am fetching the record in the front end, it just shows the output as a string:

```
echo $var = html_entity_decode(stripslashes($row_content_list["content"])); 
```

**Output**

```
"<?php echo get_block('home-page');?>" 
```

I want it to act as a PHP script.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:01:40.163

您不能将其添加为 PHP 脚本。

PHP = 服务器端语言，它处理您给定的命令并抛出 HTML 输出。（ofc 有时会出错）您无法重新处理已处理的输出。

一旦你从数据库中获取它就已经被处理了。其次，您无法回显并执行预期的 PHP 函数。因为 ECHO 本身就是一个 php（系统）*的东西*。

你可能想重新制定你的方法。

编辑：不要使用评估。尤其是当事情从数据库中出来时，除非并且直到您对数据清理非常确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:23:03.067

像这样创建 .php 文件`$filename = 'script.php'`

```
$openedFile = fopen($fileName, 'w') or die("can't open file");      
        fwrite($openedFile, $var);      
        fclose($openedFile); 
```

写在那里`$var`然后包含它...它可以工作:)但仍然不安全

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:52:29.343

您应该尝试[eval()](http://php.net/manual/en/function.eval.php)函数，它接受一个字符串并从中反射 PHP。

唯一要提到的是，您应该删除`<?php ?>`标签。

```
$var= html_entity_decode(stripslashes($row_content_list["content"]));
eval($var); 
```

# html - Is there a Wordpress Plugin for friendly code highlighint & editing?

> ID：12175322
> 
> 赞同：2
> 
> 时间：2012-08-29T09:58:00.583
> 
> 标签：html, wordpress

I've seen various plugins that give the full editor code highlighting functionality, but what I really want is something that applies this to the standard post/page editor.

We have Visual and HTML, but HTML view is totally unformatted and horrible to work with.

Surely there must be something that can address this?

Cheers,

Chris.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:19:20.337

全新的插件可以完美地做到这一点。

它被称为 WP 编辑器，可以在这里找到：[http ://wordpress.org/extend/plugins/wp-editor/](http://wordpress.org/extend/plugins/wp-editor/)

感谢上面的 janw 提供链接。

# android - Android fragment menu options being rendered too slow on ViewPager swipe

> ID：12175325
> 
> 赞同：6
> 
> 时间：2012-08-29T09:58:11.123
> 
> 标签：android

While working with the ActionBar tabs (being fragments) that can be swiped with a ViewPager I recognized that the custom menu options for each fragment are added pretty lately to the ActionBar.

This is the behavior I recognized:

1.  Swipe to the next tab
2.  Tab reached
3.  ~ 10ms with a empty bar Options
4.  Item from the fragment appears in the ActionBar

The "10ms gap" looks pretty ugly and it would be great to solve that problem.

I have looked through the native Android applications and I am able to reproduce the problem in the native ICS/JB dialer. (swiping from the contacts tab to the call log) When I look at the Play Movies app the "10ms gap" is missing (swiping from movies to personal movies) so it should be possible to solve the problem somehow.

It is interesting as well that the gap is missing when clicking on the tab. The click causes the options item to appear instantly.

It would be great if someone could help me solving the problem.

# css - 我可以完全隐藏半截的文本行吗？

> ID：12175326
> 
> 赞同：13
> 
> 时间：2012-08-29T09:58:30.423
> 
> 标签：css

如果我将一段文本放入一个具有设定高度和隐藏溢出的容器中，我通常会以可能适合的最后一行被截断而告终。[示例 jsFiddle](http://jsfiddle.net/UVFMy/)或图像：

![在此处输入图像描述](../Images/80c1f071612d63b07195c5e10a53bba1.png)

有没有办法让这条线不完全出现而不是发生这种情况？

场景是我的*列是动态高度*（父高度的 100%，即正文高度的 80%），其中包含博客文章文本，如果有，我想在底部显示“全部阅读”溢出的文本（易于确定）。目前它看起来很糟糕，上面有一半渲染的文本。

我无法删除溢出，因为列需要在导航之前结束，导航位于页面底部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:14:28.737

您可以从属性中激发您的灵感，`text-overflow`但您必须使用 JavaScript 来处理多行： http: [//pvdspek.github.com/jquery.autoellipsis/](http://pvdspek.github.com/jquery.autoellipsis/)（通过[使用 CSS，使用“...”表示溢出的多行块行](https://stackoverflow.com/questions/6222616/with-css-use-for-overflowed-block-of-multi-lines)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T05:56:47.360

看到这是我下面的代码

```
 <li style="color: Black; font-weight: bold; oveflow:hidden; line-height: 1.2em;height: 2.6em; ">Page Size
                    <select id="ddlOrderstoDisplay" style="width: 50px;">
                        <option value="25">25</option>
                        <option value="50">50</option>
                        <option value="75">75</option>
                        <option value="100">100</option>
                        <option value="150">150</option>
                    </select>               
                </li> 
```

我将这些行放在标签中，它将适用于所有浏览器。希望对您有所帮助

```
**overflow: hidden;
line-height: 1.2em;
height: 3.6em;** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:02:29.297

您可以增加或减少`line-height`

根据您的舒适度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T10:06:07.207

消除`overflow:hidden`

```
div
{
    width: 100px;
    height: 92px;
    background: black;
    color: white;
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-25T10:44:20.770

只需添加'column-width'属性，它就会起作用。在您的示例中，它将 column-width:100px

# jquery - How to fetch the label text from string using jquery

> ID：12175327
> 
> 赞同：1
> 
> 时间：2012-08-29T09:58:34.103
> 
> 标签：jquery

I want to fetch the text of checkbox label in the given code:

```
<label id="age_global_2" class="checked">
  <input type="checkbox" value="3016" name="age_global">
  2 - 3 Years
</label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:02:15.587

利用

`$('#age_global_2').text();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:01:01.890

在 jquery 中使用

```
alert($.trim($('#age_global_2').text())); 
```

# objective-c - Add view- half of the size to the main view

> ID：12175332
> 
> 赞同：0
> 
> 时间：2012-08-29T09:58:46.417
> 
> 标签：objective-c, uiview, uiviewcontroller

I have UIView, I want to add it a view on that view but so it be half of the size of the original View.

I tried :

```
[appDelegate.viewController presentModalViewController:testViewController animated:NO]; 
```

but itws on **all the screen**.

tried:

```
self.window.frame= CGRectMake(50, 50, 30, 30);
self.frame= CGRectMake(50, 50, 30, 30) 
```

I saw there is methods like `presentPopupViewController` but they work on UIViewcontroller. any ideas to start it on half of the screen?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:04:13.993

该消息`presentModalViewController:animated:`将以模态方式呈现视图，始终占据整个屏幕。它不会将视图添加到您当前的视图中。

为此，请使用`UIView`'s message `addSubview:`。您可以根据需要调整子视图的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:22:48.437

使用 presentModalViewController:animated: 无法调整大小。

要产生像 presentModalViewController:animated: 这样的效果，请使用 CATransition：

```
 CATransition *animation = [CATransition animation];
[animation setDelegate:self];
[animation setType:kCATransitionMoveIn];
[animation setSubtype:kCATransitionFromBottom];
[animation setDuration:0.50];
[animation setTimingFunction:
 [CAMediaTimingFunction functionWithName:
  kCAMediaTimingFunctionEaseInEaseOut]];
[self.view.layer addAnimation:animation forKey:kCATransition]; 
```

现在在 self.view 中添加视图，如下所示：

```
[self.view addSubView:testViewController.view];
[testViewController.view setFrame:CGRectMake((self.view.frame.size.width/4),(self.view.frame.size.height/4),(self.view.frame.size.width*3/4),(self.view.frame.size.height*3/4))]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:25:50.230

假设您有两个视图，一个是**mainview**第二个是**childview**。

在主视图上添加子视图

```
 [mainview addSubview:childview]; 
```

从主视图中删除子视图

```
 [childview removeFromSuperview]; 
```

但是如果你想要一些动画而不是你必须为此添加一些额外的代码。

# php - Getting PHP to query MySQL for a COUNT() without GROUPING

> ID：12175333
> 
> 赞同：0
> 
> 时间：2012-08-29T09:58:53.730
> 
> 标签：php, mysql

I'm trying to get a PHP-script to show all duplicate values in a MySQL-table. Using the following code I get the wanted results in the phpMyAdmin SQL-query window but it won't work as a PHP mysql_query().

```
SELECT nordby_log.artikel, a.the_count
FROM
  nordby_log, 
  (SELECT artikel, COUNT(*) AS the_count
  FROM nordby_log
  GROUP BY artikel) AS a
WHERE nordby_log.artikel = a.artikel 
```

Any help is greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:07:21.547

您需要使用，在结果分组*后*`HAVING`进行评估：

 *```
SELECT   artikel
FROM     nordby_log
GROUP BY artikel
HAVING   COUNT(*) > 1 
```*

# javascript - jQuery issue with slideUp/Down and clearQueue

> ID：12175334
> 
> 赞同：4
> 
> 时间：2012-08-29T09:58:56.710
> 
> 标签：javascript, jquery, slidedown, slideup

I have a dropmenu which is shown and hidden (slideUp and slideDown) when hovering over an element using jquery...

```
$("#element").hover( function() {
    $(this).next().clearQueue();
    $(this).next().slideDown(); //animate({height:300},100);
}, function() {
    if (!$(this).next().is(':hover')) {
        $(this).next().clearQueue();
        $(this).next().slideUp(); //animate({height:0},100);
    }
}); 
```

I initially didn't include the line clearQueue() but this caused the slideUp/Down to queue and animate for a long time if the user erratically hovers over and out of #element.

Adding that line means that the dropdown does not fully appear if the user hovers and over and out really quickly.

I can get around this by animating the slideDown but the trouble is I don't know the exact height I need to animate to because it can change.

Is there anyway to stop this behaviour?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:24:21.420

I had a similar issue with slideUp and slideDown where slideDown would give my element a static height during the animation while the element had to remain dynamically sized since it's contents could change at any time. I fixed that by setting the CSS height value to an empty string (i.e. '') in the animationFinished callback.

So this should solve your problem:

```
$("#element").hover(function () {
    $(this).next().stop(true).slideDown(400, function () { // .stop(true) is basically the same as .clearQueue() except that it only stops and clears animations
        $(this).css('height', '');
    }); //animate({height:300},100);
}, function () {
    if (!$(this).next().is(':hover')) {
        $(this).next().stop(true).slideUp(); //animate({height:0},100);
    }
}); 
```

# php - 访问jquery变量到php

> ID：12175335
> 
> 赞同：0
> 
> 时间：2012-08-29T09:58:57.007
> 
> 标签：php, jquery, tags

我正在使用[https://github.com/aehlke/tag-it](https://github.com/aehlke/tag-it) fot 标记

现在我想将这些值（标签）传递给我的 php 页面，以便到目前为止我可以存储在数据库中

我做的很简单`$tags = $_POST["myTags"];`

不幸的是，我收到了 undefined myTags 的错误

这是我的html代码

```
 <tr>                        
                    <td>Tags</td>
                        <td><ul id="myTags"  class= "ulc" name = "myTags"></ul>
                    </td>
                </tr> 
```

请告诉我我做错了什么？

或者我的方法不正确

还是Tagit有另一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:07:10.080

jquery 是客户端，php 是服务器端，你最常将数据发布到 php，使用 jquery post 功能，在这里学习：http: [//api.jquery.com/jQuery.post](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:19:59.820

`UL`不是“表单输入元素”。使用需要用户输入的元素，例如`INPUT`、`SELECT`、`TEXTAREA`等，使用传统的表单提交来提交值。

# google-drive-api - 在 Google Drive SDK 中，如何进行可恢复上传？

> ID：12175336
> 
> 赞同：0
> 
> 时间：2012-08-29T09:59:01.430
> 
> 标签：google-drive-api

我试图进行可恢复的上传，但没有取得多大成功。

我阅读了[https://developers.google.com/drive/manage-uploads#resumable](https://developers.google.com/drive/manage-uploads#resumable)页面，但我不知道如何在第一个请求的响应中获取此“位置”标头。

API 文档指定我们可以在第一个 URL 上进行 POST 或 PUT，但是如果我进行 PUT，我会得到 404，如果我进行 POST，我会得到一个没有内容和位置标头的新文件在回应中。

这是我的 POST 查询（使用 PUT 和返回 404 的完全相同的查询）：

```
POST https://www.googleapis.com/drive/v2/files?uploadType=resumable
Accept = application/json
Authorization = Bearer xxxxxxxxx
Content-Length = 71
Content-Type = application/json
X-Upload-Content-Length = 10
X-Upload-Content-Type = text/plain

{
    mimeType = "text/plain";
    parents =     (
                {
            id = root;
        }
    );
    title = "test.txt";
} 
```

和回应：

```
"Cache-Control" = "no-cache, no-store, max-age=0, must-revalidate";
"Content-Type" = "application/json; charset=UTF-8";
Date = "Wed, 29 Aug 2012 09:53:15 GMT";
Etag = "\"UlXjrWs5BKksMni8RDMKhlFkHGQ/MTM0NjIzMzk5NTA2MQ\"";
Expires = "Fri, 01 Jan 1990 00:00:00 GMT";
Pragma = "no-cache";
Server = GSE;
"Transfer-Encoding" = Identity;
"X-Content-Type-Options" = nosniff;
"X-Frame-Options" = SAMEORIGIN;
"X-XSS-Protection" = "1; mode=block";

{
 "kind": "drive#file",
 "id": "xxxx",
 "etag": "\"xxxx\"",
 "selfLink": "https://xxxx",
 "webContentLink": "https://xxxx",
 "alternateLink": "https://xxxx",
 "title": "test.txt",
 "mimeType": "text/plain",
 "labels": {
  "starred": false,
  "hidden": false,
  "trashed": false,
  "restricted": false,
  "viewed": true
},
"createdDate": "2012-08-29T09:53:15.200Z",
"modifiedDate": "2012-08-29T09:53:15.061Z",
"modifiedByMeDate": "2012-08-29T09:53:15.061Z",
"lastViewedByMeDate": "2012-08-29T09:53:15.061Z",
"parents": [
{
 "kind": "drive#parentReference",
 "id": "xxxx",
 "selfLink": "https://xxxx",
 "parentLink": "https://xxxx",
 "isRoot": true
}
],
"downloadUrl": "https://xxxx",
"userPermission": {
  "kind": "drive#permission",
  "etag": "\"xxxx\"",
  "id": "me",
  "selfLink": "https://xxxx",
  "role": "owner",
  "type": "user"
},
"originalFilename": "test.txt",
"fileExtension": "txt",
"md5Checksum": "xxxx",
"fileSize": "0",
"quotaBytesUsed": "0",
"ownerNames": [
"xxxx"
],
"lastModifyingUserName": "xxxx",
"editable": true,
"writersCanShare": true
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:32:44.940

*文件插入*文档页面 ( [https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert) ) 中指定的 HTTP 请求如下：

```
POST https://www.googleapis.com/drive/v2/files 
```

**但这是错误的**。*在上传文件*页面 (https://developers.google.com/drive/manage-uploads#resumable)上指定了正确的方法，并且是：

```
POST https://www.googleapis.com/upload/drive/v2/files?uploadType=resumable 
```

请注意 URL 中的*上传*。棘手！

# c# - 将 C# 数组列表传递给 Javascript

> ID：12175342
> 
> 赞同：1
> 
> 时间：2012-08-29T09:59:10.873
> 
> 标签：c#, javascript, object, arraylist

我在 C# 中有一个 arrayList，我在其中存储 ip 和 isp 的数据，并从 mysql 表中计数如下，

```
ArrayList conRc = new ArrayList();

while (readIp.Read())
{
    string ipVal = readIp.GetString(0);
    string ispVal = readIp.GetString(1);
    int conLvlVal = readIp.GetInt32(2);

    conRc.Add(new ConfidenceLvl(ipVal,ispVal,conLvlVal));
} 
```

这是我的 ConfidenceLvl 课程，

```
public class ConfidenceLvl
{
    private string ip;
    private string isp;
    private int conLvl;

    public string Ip
    {
        get { return ip; }
        set { ip = value; }
    }
    public string Isp
    {
        get { return isp; }
        set { isp = value; }
    }
    public int ConLvl
    {
        get { return conLvl; }
        set { conLvl = value; }
    }

    public ConfidenceLvl(string ipVal, string ispVal, int conLvlVal) {
        this.conLvl = conLvlVal;
        this.ip = ipVal;
        this.isp = ispVal;
    }
} 
```

我想将此传递给 javascript，以便我可以利用这些值通过 jqPlot 创建图表。请帮助解决这个问题，我使用[这种方法](http://aspdotnetcodebook.blogspot.com/2008/04/passing-arraylist-to-javascript.html)将我的值传递给 javascript，但这一切都作为一个字符串进行。我想分别获取这些值并在 javascript 中使用它们。请帮我。非常感谢你。

编辑：感谢 Dominik Kirschenhofer，在成功解析到 javascript 后，我​​终于完成了这个。我可以知道如何操作这些数据吗？喜欢一一获取记录？？我试过但没有奏效，

```
 <asp:HiddenField ID="correlate" value= "" runat="server" />
    <script language="javascript" type="text/javascript">
        var jsonString = document.getElementById('correlate').value;
        var arr_from_json = JSON.parse(jsonString);

    </script> 
```

json字符串如下，

```
 [{"Ip":"0","Count":"10"},{"Ip":"1","Count":"11"},{"Ip":"2","Count":"12"},{"Ip":"3","Count":"13"},{"Ip":"4","Count":"14"},{"Ip":"5","Count":"15"},{"Ip":"6","Count":"16"},{"Ip":"7","Count":"17"},{"Ip":"8","Count":"18"},{"Ip":"9","Count":"19"}] 
```

我可以知道如何处理这些记录吗:)

编辑：解决了

```
 <asp:HiddenField ID="correlate" value= "" runat="server" />
    <script language="javascript" type="text/javascript">
        var jsonString = document.getElementById('correlate').value;
        jsonString = "{\"corrData\":" + jsonString + "}";
        var arr_from_json = JSON.parse(jsonString);
        alert(Number(arr_from_json.corrData[2].Ip)+1);
    </script> 
```

我添加了 corrData 以便我可以像在数组中一样通过整数 ID 调用它。:) 感谢你们的帮助 :) 如果有更好的方法..请告诉我 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:10:48.290

如果您想要在 js 中使用的代码中有一个列表或一组固定值，则更简单的方法如您发布的链接中所述。意味着序列化列表并将其存储在隐藏字段中。当你需要在 js 中使用它时，只需反序列化并使用它。

序列化参见：http: [//blogs.microsoft.co.il/blogs/pini_dayan/archive/2009/03/12/convert-objects-to-json-in-c-using-javascriptserializer.aspx](http://blogs.microsoft.co.il/blogs/pini_dayan/archive/2009/03/12/convert-objects-to-json-in-c-using-javascriptserializer.aspx)

反 [序列化：从 json 反序列化为 javascript 对象](https://stackoverflow.com/questions/6487167/deserialize-from-json-to-javascript-object)

那么你必须做什么：1）使用通用列表。2) 根据需要填写清单。3) 将列表转换为数组 => 使用 linq 非常简单：myList.ToArray() 4) 将数组序列化为 json 字符串。请参阅第一个链接。5）在你的页面上放置一个隐藏字段，并将json字符串设置为它的值（代码后面） 6）每当你需要在js中使用这个数组时，只需反序列化隐藏字段的值并使用它。见第二个链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T10:30:39.760

如果您使用的是 ASP.net MVC，那么您可以执行以下操作。我已经重写了您的代码以使用泛型列表而不是 ArrayList，ArrayList 不是强类型的，并且由于泛型随 .net 2.0 一起出现，因此通常被认为已贬值

请注意，以下代码仅适用于 POST 请求，除非您将其修改为包含`JsonRequestBehavior.AllowGet`

```
public class ConfidenceLvl
    {
        public string IpVal { get; set; }
        public string IspVal { get; set; }
        public string ConLvlVal { get; set; }
    }

    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            IList<ConfidenceLvl> levels = new List<ConfidenceLvl>();
            levels.Add(new ConfidenceLvl { IpVal = "129.123.123.123", ConLvlVal = "1", IspVal = "AOL" });
            levels.Add(new ConfidenceLvl { IpVal = "129.123.0.0", ConLvlVal = "3", IspVal = "CompuServe" });

            // Controlled json
            return Json(levels.Select(lv => new { title = lv.IspVal, ip = lv.IpVal }));

            // As it comes json
            //return Json(levels);
        }
    }
} 
```

# mysql - Why celery task fired from django pre_save signal never sees the object

> ID：12175343
> 
> 赞同：3
> 
> 时间：2012-08-29T09:59:12.340
> 
> 标签：mysql, django, celery

This is a followup queston from [here](https://stackoverflow.com/questions/12149086/does-django-create-implicit-transaction-on-first-query).

Django 1.3.1, celery 2.2.7, python2.6.

I have the following in the `fruits/models.py`:

Consider the model:

```
class Fruit(models.Model):
    name = models.CharField(max_length=50)

    def __unicode__(self):
        return self.name 
```

And the following in the `fruits/tasks.py`:

```
from django.dispatch import receiver
from django.db.models import signals

from celery.task import periodic_task, task
import fruits.models as m
import time

@task()
def check_fruit(id):
    time.sleep(2)
    try:
        fruit = m.Fruit.objects.get(pk=id)
        print "Fruit %s is found!" % fruit.name
    except m.Fruit.DoesNotExist:
        print "no such fruit"

@receiver(signals.pre_save, sender=m.Fruit, dispatch_uid="on_fruit_save")
def on_custom_feed_save(sender, instance, **kwargs):
    check_fruit.apply_async(args=[instance.id]) 
```

I launch celery daemon, then open django shell and type:

```
import fruits.tasks;
import fruits.models as m;
m.Fruit(name="plum").save() 
```

**Question:** I would expect that the task would find the fruit, but it never does. Why?

(I'm launching task from pre-save signal on purpose to simulate a problem that happens on a large system).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-26T23:10:19.660

老问题实际上很简单，问题不是竞争条件或错误等。

该示例从头开始创建新对象，并且在 pre_save 信号期间该对象尚未存储在数据库中。所以 'instance.id' 没有设置，对于新创建的对象它是 None 。

```
check_fruit.delay(None) 
```

由 pre_save 信号调用并产生

```
fruit = m.Fruit.objects.get(pk=None) 
```

数据库中没有任何主键为空的行。

Celery 任务实际上是检查这个查询是否有新创建的对象。查询总是按预期抛出异常。

使用**post_save**信号并检查新对象的信号的**创建**参数。

使用 post_save 后，可能会出现与事务相关的竞争条件。大多数时候你不会在意，任务重试主要是有效的。但是如果你关心比赛条件，看看新的 django 特性，[on_commit](https://docs.djangoproject.com/en/1.9/topics/db/transactions/#django.db.transaction.on_commit)钩子

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T17:02:46.553

这周我自己也遇到了一个非常相似的问题，除了我在没有 Django 的情况下使用 Celery。我发现 sender 参数仅在将任务实例传递给它时才起作用，而不仅仅是对 sender 类本身的引用。

我稍微研究了一下问题，发现 celery 使用 sender 参数来比较特定任务的 id 和信号的注册发送者（设置为过滤特定发送者。）

在 celery/utils/dispatch/signals.py 模块中，以下执行此评估：

```
def _make_id(target):  # pragma: no cover
    if hasattr(target, 'im_func'):
        return (id(target.im_self), id(target.im_func))
    return id(target) 
```

首先获取某个目标对象的 id。当在装饰器中指定发送者时，它被保存在类似于这样的元组中：

```
lookup_key = (_make_id(receiver), _make_id(sender)) 
```

稍后，当一个任务触发时，该 `_live_receivers`方法会被调用，该方法本质上是执行一个评估，以查看lookup_key 中指定的目标发送者是否与当前发送者的 id 匹配（触发任务）：

```
def _live_receivers(self, senderkey):
        """Filter sequence of receivers to get resolved, live receivers.

        This checks for weak references and resolves them, then returning only
        live receivers.

        """
        none_senderkey = _make_id(None)
        receivers = []

        for (receiverkey, r_senderkey), receiver in self.receivers:
            if r_senderkey == none_senderkey or r_senderkey == senderkey:
                if isinstance(receiver, WEAKREF_TYPES):
                    # Dereference the weak reference.
                    receiver = receiver()
                    if receiver is not None:
                        receivers.append(receiver)
                else:
                    receivers.append(receiver)
        return receivers 
```

现在我遇到的问题是，即使我指定了我想要接收信号的任务，但当它被触发时，发送者键永远不会匹配。

我可以让它正常工作的唯一方法是从`__init__`我为特定任务本身构建的抽象任务类的方法中注册信号。通过这样做，我能够向 Celery 传递`self`它为任务注册的确切实例 ( )。

我不知道这个问题是否与我的逻辑或对信号如何工作的理解有关，或者它是否是 Celery 中的一个错误，但我确实知道传递任务实例解决了问题，此后一切正常。

需要注意的一些事项：

1.  我没有使用 Django，因此没有使用 Django-Celery 扩展
2.  我不确定问题出在 Celery 上（更有可能是我在逻辑上犯了错误或在某处误解了某些东西）
3.  我不知道这种情况是否适用于您，因为我不确定 Django-Celery 如何改变 Celery 后端的工作方式。

尽管如此，我希望这会有所帮助。

祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-05T08:39:37.803

老问题和问题现在可能已经解决了，但是对于未来的访客......

听起来芹菜工人有一个长期运行的事务打开，如果它从未提交，它永远不会看到新对象。在任务中运行数据库查询之前尝试添加：

```
from django.db import transaction
transaction.commit() 
```

请注意，Django 1.6 对事务管理进行了一些更改，但在撰写本文时还没有发布。

# php - PHP：弹出大文本日志文件的最后一行

> ID：12175344
> 
> 赞同：0
> 
> 时间：2012-08-29T09:59:14.807
> 
> 标签：php

我有一个巨大的日志文件（大约 1,000,000 行）。我想获取最后一行并使用 PHP 从文件中删除它。最快的方法是什么？

我试过：

```
$logfile = escapeshellarg("/path/to/logfile");
$lastline = `tail -n 1 "$logfile"`; // obtained the last line 
```

上述方法是否足够有效？以及如何从文件中删除最后一行？

从下面乔恩的回答中，代码如下：

```
$buffer_size = 1000;
$fh = fopen("/path/to/logfile", "r+");
fseek($fh, -$buffer_size, SEEK_END);
$content = fgets($fh, 100);
while(strrpos($content, PHP_EOL) != false) {
  fseek($fh, -$buffer_size); // move backward for extra -1000
  $content = fgets($fh, $buffer_size);
}
$pos_last_eol = strrpos($content, PHP_EOL);
fseek($fh, $pos_last_eol); // seek to that position
ftruncate($fh, ftell($fh));
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:07:05.977

从大文件中获取和删除最后一行的最快方法是：

1.  打开文件进行写入
2.  寻找到最后
3.  向后寻找一些任意缓冲区长度（比如说 1K）并读取数据以填充缓冲区
4.  使用类似的东西向后搜索缓冲区，`strrpos`直到找到行尾标记¹
5.  如果您没有找到 EOL，请转到第 3 步并重复
6.  如果您确实找到了 EOL，则您可以根据缓冲区中的位置和从缓冲区读取的偏移量知道它发生的文件偏移量
7.  通过寻找该偏移量并读取直到文件结束来获取最后一行²
8.  调用[`ftruncate`](http://php.net/manual/en/function.ftruncate.php)以截断从找到的行尾开始的文件部分

> ¹ 支持所有`\n`, `\r`,`\r\n`会使事情复杂化一点；特别是对于后者，它总是可能跨越两个缓冲区，因此您必须明确注意这一点。
> 
> ² 这不是绝对必要的，因为您要读取的所有数据都已经通过缓冲区，因此您可以保留一份副本并节省此操作的成本。实际上，尽管最后一行不会太长，因此重新读取整个内容会更方便（C 运行时和/或 OS 文件系统缓存可能会使这变得非常快）。

这是任何程序都必须做的。如果您决定通过将前七个步骤卸载到外部实用程序来“作弊”，例如`tail`您可以通过一次调用从文件中删除该行`ftruncate`，**但是**：如果您不想离开，在计算截断的偏移量时要小心文件中的尾随行尾字符。

# delphi - 如何在Delphi中实现文件名从资源管理器拖动到托管表单或控件

> ID：12175350
> 
> 赞同：2
> 
> 时间：2012-08-29T09:59:22.657
> 
> 标签：delphi, drag-and-drop, delphi-xe2, explorer

我无法从资源管理器中拖放以在我的应用程序中工作。当我创建一个简单的 VCL 表单应用程序时，我可以使用[这里](http://delphi.about.com/od/windowsshellapi/a/accept-filedrop.htm)的演示代码，它工作正常。我自己的放置目标是在框架和嵌入式表单中深度对齐的控件，并且将工作演示例程移动到此表单不起作用。在将表单其他控件移到一边后，我尝试在深度嵌入的表单上放置一个 TPanel，以便我可以在此处尝试演示代码：[放置到 TPanel 的方式](http://delphi.about.com/od/adptips2005/qt/dropontimage.htm)，这也不起作用。如果我把线

```
DragAcceptFiles(Handle,true); 
```

在我的 MAIN 表单的 FormCreate 中，光标指示我可以接受文件，但同一行似乎无法接收任何其他更深层次的控件的拖动文件。谁能建议我可能会错过什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:40:13.173

正如 Marjan（和其他人）在上面评论的那样，这原来是一个 Windows 句柄问题。将“DragAcceptFiles()”移动到诸如 FormShow 之类的后续事件中解决了这个问题。

# java - NSS 不适用于 Java 7 更新 6

> ID：12175352
> 
> 赞同：0
> 
> 时间：2012-08-29T09:59:25.883
> 
> 标签：java, nss, pkcs#11

我在我的项目中使用带有 NSS（版本 3.4.12）的 jre6，它工作正常。

我最近更新到 jre7 update 6（2012 年 8 月 14 日发布），突然应用程序停止工作，出现以下异常。

```
java.lang.UnsatisfiedLinkError: sun.security.pkcs11.wrapper.PKCS11.C_GetOperationState(J)[B
    at sun.security.pkcs11.wrapper.PKCS11.C_GetOperationState(Native Method)
    at sun.security.pkcs11.P11Digest.clone(P11Digest.java:308)
    at java.security.MessageDigest$Delegate.clone(Unknown Source)
    at sun.security.ssl.HandshakeHash.cloneDigest(Unknown Source)
    at sun.security.ssl.HandshakeHash.getMD5Clone(Unknown Source)
    at sun.security.ssl.HandshakeMessage$Finished.getFinished(Unknown Source)
    at sun.security.ssl.HandshakeMessage$Finished.<init>(Unknown Source)
    at sun.security.ssl.ClientHandshaker.sendChangeCipherAndFinish(Unknown Source)
    at sun.security.ssl.ClientHandshaker.serverHelloDone(Unknown Source)
    at sun.security.ssl.ClientHandshaker.processMessage(Unknown Source)
    at sun.security.ssl.Handshaker.processLoop(Unknown Source)
    at sun.security.ssl.Handshaker.process_record(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.readRecord(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source) 
```

如果我使用 jre 7 update 5，它的工作正常！！！我浏览了更新 6 [http://www.oracle.com/technetwork/java/javase/7u6-relnotes-1729681.html](http://www.oracle.com/technetwork/java/javase/7u6-relnotes-1729681.html)的发行说明，但我找不到任何可能导致的内容。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:07:20.840

[Java 7 中针对 RSA 的SunPKCS11](http://docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements-7.html)发生了变化。但我不确定是否会因此而发生上述行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:55:34.870

错误[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7195931](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7195931)在 jre 上打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:05:02.323

Sun 已解决此问题。

它计划用于jre7 u9。[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7195931](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7195931)

# jbpm - jBPM 计时器未运行

> ID：12175353
> 
> 赞同：3
> 
> 时间：2012-08-29T09:59:34.487
> 
> 标签：jbpm

我有以下计时器实现：

```
<task-node name="recenze" create-tasks="false">
    <event type="node-enter" >
        <action expression="#{assignActors.assignActors(vybraniUzivatele,'recenze')}"></action>
    </event>

    <timer name="trolololo" duedate="5 business seconds" transition="transitionToVyporadaniPripominek" />

    <task name="recenze" description="A003: Ustanovení recenzentů" />

    <transition name="transitionToVyporadaniPripominek" to="vyporadaniPripominek" />
</task-node> 
```

我试图找到问题所在，但我失败了。根据互联网上的许多来源，计时器声明似乎是正确的。在`jbpm_job`jBPM 表中，我的计时器启动了一项作业，其所有信息均已正确设置。但定时器不触发。

有谁知道这里的问题可能出在哪里？非常感谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-31T11:32:12.827

将突出显示的 create-task 标志从 false 更改为 true，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:58:13.390

我正在粘贴我用来理解 JBPM 中计时器概念的 BPMN 文件的代码，希望它对您有所帮助。

```
 <?xml version="1.0" encoding="UTF-8"?>
             <definitions id="Definition"
             targetNamespace="http://www.example.org/MinimalExample"
             typeLanguage="http://www.java.com/javaTypes"
             expressionLanguage="http://www.mvel.org/2.0"
             xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"
             xmlns:g="http://www.jboss.org/drools/flow/gpd"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
             xmlns:tns="http://www.jboss.org/drools">

 <process processType="Private" isExecutable="true" id="TimerBoundaryEventTest"                                                                                                                                                                                                    name="Timer Boundary Event Test" tns:packageName="defaultPackage" >

         <!-- nodes -->
        <startEvent id="_1" name="StartProcess" />
        <subProcess id="_2" name="SubProcess"  >
        <!-- nodes -->
        <startEvent id="_2-1" name="StartSubProcess" />
        <endEvent id="_2-3" name="EscalationEvent" />
        <scriptTask id="_2-4" name="Script" scriptFormat="http://www.java.com/java" >
          <script>System.out.println("In Script Task");
           Thread.sleep(6000);
            System.out.println("In Script Task After Sleep");
            Thread.sleep(2000);</script>
        </scriptTask>
        <!-- connections -->
        <sequenceFlow id="_2-4-_2-3" sourceRef="_2-4" targetRef="_2-3" />
        <sequenceFlow id="_2-1-_2-4" sourceRef="_2-1" targetRef="_2-4" />
        </subProcess>
        <endEvent id="_3" name="EndProcess" >
            <terminateEventDefinition/>
        </endEvent>
        <boundaryEvent id="_4" name="TimerEvent" attachedToRef="_2" >
          <timerEventDefinition>
            <timeDuration xsi:type="tFormalExpression">500ms</timeDuration>
          </timerEventDefinition>
        </boundaryEvent>
        <scriptTask id="_5" name="Goodbye" >
          <script>System.out.println("Timer handled");</script>
        </scriptTask>
        <endEvent id="_6" name="EndProcess" >
            <terminateEventDefinition/>
        </endEvent>
        <intermediateCatchEvent id="_7" name="Timer" >
          <timerEventDefinition>
            <timeCycle xsi:type="tFormalExpression">2000###2000</timeCycle>
          </timerEventDefinition>
        </intermediateCatchEvent>

        <!-- connections -->
        <sequenceFlow id="_1-_2" sourceRef="_1" targetRef="_2" />
        <sequenceFlow id="_7-_3" sourceRef="_7" targetRef="_3" />
        <sequenceFlow id="_4-_5" sourceRef="_4" targetRef="_5" />
        <sequenceFlow id="_5-_6" sourceRef="_5" targetRef="_6" />
        <sequenceFlow id="_2-_7" sourceRef="_2" targetRef="_7" />

      </process>

      <bpmndi:BPMNDiagram>
        <bpmndi:BPMNPlane bpmnElement="TimerBoundaryEventTest" >
          <bpmndi:BPMNShape bpmnElement="_1" >
            <dc:Bounds x="16" y="85" width="48" height="48" />
          </bpmndi:BPMNShape>
          <bpmndi:BPMNShape bpmnElement="_2" >
            <dc:Bounds x="96" y="16" width="223" height="187" />
          </bpmndi:BPMNShape>
          <bpmndi:BPMNShape bpmnElement="_2-1" >
            <dc:Bounds x="115" y="62" width="48" height="48" />
          </bpmndi:BPMNShape>
          <bpmndi:BPMNShape bpmnElement="_2-3" >
            <dc:Bounds x="205" y="132" width="48" height="48" />
          </bpmndi:BPMNShape>
          <bpmndi:BPMNShape bpmnElement="_2-4" >
            <dc:Bounds x="190" y="63" width="80" height="48" />
          </bpmndi:BPMNShape>
          <bpmndi:BPMNShape bpmnElement="_3" >
            <dc:Bounds x="431" y="85" width="48" height="48" />
          </bpmndi:BPMNShape>
          <bpmndi:BPMNShape bpmnElement="_4" >
            <dc:Bounds x="16" y="235" width="48" height="48" />
          </bpmndi:BPMNShape>
          <bpmndi:BPMNShape bpmnElement="_5" >
            <dc:Bounds x="96" y="235" width="223" height="48" />
          </bpmndi:BPMNShape>
          <bpmndi:BPMNShape bpmnElement="_6" >
            <dc:Bounds x="351" y="235" width="48" height="48" />
          </bpmndi:BPMNShape>
          <bpmndi:BPMNShape bpmnElement="_7" >
            <dc:Bounds x="351" y="85" width="48" height="48" />
          </bpmndi:BPMNShape>
          <bpmndi:BPMNEdge bpmnElement="_2-4-_2-3" >
            <di:waypoint x="134" y="71" />
            <di:waypoint x="133" y="140" />
          </bpmndi:BPMNEdge>
          <bpmndi:BPMNEdge bpmnElement="_2-1-_2-4" >
            <di:waypoint x="43" y="70" />
            <di:waypoint x="134" y="71" />
          </bpmndi:BPMNEdge>
          <bpmndi:BPMNEdge bpmnElement="_1-_2" >
            <di:waypoint x="40" y="109" />
            <di:waypoint x="207" y="109" />
          </bpmndi:BPMNEdge>
          <bpmndi:BPMNEdge bpmnElement="_7-_3" >
            <di:waypoint x="375" y="109" />
            <di:waypoint x="455" y="109" />
          </bpmndi:BPMNEdge>
          <bpmndi:BPMNEdge bpmnElement="_4-_5" >
            <di:waypoint x="40" y="259" />
            <di:waypoint x="207" y="259" />
          </bpmndi:BPMNEdge>
          <bpmndi:BPMNEdge bpmnElement="_5-_6" >
            <di:waypoint x="207" y="259" />
            <di:waypoint x="375" y="259" />
          </bpmndi:BPMNEdge>
          <bpmndi:BPMNEdge bpmnElement="_2-_7" >
            <di:waypoint x="207" y="109" />
            <di:waypoint x="375" y="109" />
          </bpmndi:BPMNEdge>
        </bpmndi:BPMNPlane>
      </bpmndi:BPMNDiagram>

    </definitions> 
```

一切顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T09:40:40.067

您是否使用每个流程实例的会话？如果是，那么每当安全点出现时，与该流程实例相关的所有数据都会与会话信息一起保存在 db 中，并且会话会从内存中清除。现在，您的计时器已与该会话一起安排，当您现在返回并恢复会话时，您必须再次将您的计时器链接到该会话以加载到内存中并安排为作业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T11:15:37.330

这是我声明计时器的方式，与之前的答案示例完全相同：

```
<boundaryEvent id="_ID" name="TimerEvent" attachedToRef="_ANOTHERID" >
      <timerEventDefinition>
        <timeCycle xsi:type="tFormalExpression">500ms</timeCycle>
      </timerEventDefinition>
</boundaryEvent> 
```

不同之处在于我不使用线程或中间捕获事件......与给定进程相关联的边界事件足以触发计时器并导致等待状态。这已经过测试并且可以正常工作。

希望能帮助到你 ：）

# c++ - 如何在 C++ 中设置 PR_SENDER_SEARCH_KEY MAPI 属性

> ID：12175357
> 
> 赞同：0
> 
> 时间：2012-08-29T09:59:43.987
> 
> 标签：c++, windows, mapi

对于我的一个项目，我们通过 MAPI API 在已发送项目中创建消息副本。我发现了一个问题并解决了同样的问题，我需要设置 PR_SENDER_SEARCH_KEY 属性。
当我尝试按以下方式设置此属性时，我收到错误无效的输入参数 -
如果有人知道设置它的正确方法，请告诉我。

```
PropList[ulPropCount].ulPropTag = PR_SENDER_SEARCH_KEY; 
PropList[ulPropCount].Value.lpszA = temp; 

//where temp is LPSTR which has the value temp = "EX:/O=DGPDEV/OU=FIRST 
//ADMINISTRATIVE //GROUP/CN=RECIPIENTS/CN=ALICE" 
```

这是此属性的简要说明-

```
PR_SENDER_SEARCH_KEY
Identifies an address book search key.
Canonical name: PidTagSenderSearchKey
Alternate names: PidTagSenderSearchKey,PR_SENDER_SEARCH_KEY,PR_SenderSearchKey,ptagSenderSearchKey
Areas:"Address Properties"
References: [MS-OXCFXICS],[MS-OXCICAL],[MS-OXOCAL],[MS-OXOMSG],[MS-OXOPOST],[MS-OXOTASK]
Property Tag: 0x0C1D0102 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:21:11.413

PR_SENDER_SEARCH_KEY 是二进制（PT_BINARY）属性，需要设置SPropValue.bin 结构，而不是lpszA。[使用OutlookSpy](http://www.dimastr.com/outspy/home.htm)（单击 IMessage）或 MFCMAPI查看现有邮件。

# c - C size_t 和 ssize_t 负值

> ID：12175358
> 
> 赞同：12
> 
> 时间：2012-08-29T09:59:50.110
> 
> 标签：c, size-t

`size_t`被声明为`unsigned int`不能表示负值。
那么有`ssize_t`哪些是*签名*类型的`size_t`权利呢？
这是我的问题：

```
#include <stdio.h>
#include <sys/types.h>

int main(){
size_t a = -25;
ssize_t b = -30;
printf("%zu\n%zu\n", a, b);
return 0;
} 
```

为什么我得到：

```
18446744073709551591
18446744073709551586 
```

结果？
我知道`size_t`这可能是可能的，因为它是无符号类型，但为什么我也得到了错误的结果`ssize_t`？？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-29T10:01:18.503

在第一种情况下，您分配给无符号类型 - `a`。在第二种情况下，您使用了错误的格式说明符。第二个说明符应该`%zd`代替`%zu`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-12T13:38:24.830

首先，您应该检查两种类型的实际尺寸。类似下面的代码片段应该做的事情：

```
#include <stdio.h>
#include <unistd.h>

int main() {
  printf( "sizeof(  size_t ) = %d bytes\n",(int) sizeof( size_t) );
  printf( "sizeof( ssize_t ) = %d bytes\n",(int) sizeof( ssize_t) );
  return 0;
} 
```

在这两种情况下，我都得到 (64bit Linux, GCC v7.2) “8 bytes”，这与 long int 和 long long int 相同，即最大 CPU 原生整数值。

当大小相同（并且它们应该始终相同）时，`size_t`可以具有“绝对值大 2 倍” `ssize_t`，而后者又可以具有带符号的（正或负）值。

如果它们不同，那么较大的将是……更大，因此可以容纳更大的值。

但归根结底，`ssize_t`是`size_t`两种不同的类型，用于“谈论”大小、长度、内存量等。

前者只是为该值放弃 1 位，以获得发出某种错误信号所需的符号。

最后，这两种类型不可互换，至少并非总是如此。当大小可以超过 2^63 字节/项目时，差异就很明显了。 `size_t`不会溢出而`ssize_t`会。

在“正常”情况下，您可以从一个投射到另一个。对于我之前提到的情况，你不应该混合它们。

仅作为参考，两者都`strlen()`使用`malloc()`，`size_t`而两者都`read()`使用`readv()`ssize_t。

因此，`ssize_t` **不是**的签名版本，`size_t`因为其中的某些值`ssize_t`无法映射到`size_t`(like `-1`) 上，反之亦然。库函数要么使用一种类型，要么使用另一种。

然后，对于您的问题，您看到的两个数字相差 5 个单位，这正是您所期望的。你看到的是这两个变量的值`unsigned long`。尝试将它们打印为`signed long`( `%ld`)，这样您仍然可以看到标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-21T16:07:54.203

> ...为什么我也得到了错误的结果`ssize_t`？？

采用

```
ssize_t b = -30;
printf("%jd\n", (intmax_t) b); 
```

使用匹配的说明符，对于否定`ssize_t`的**不是** `%zu`也不是肯定`"%zd"`的。
[如何使用“zd”说明符`printf()`？](https://stackoverflow.com/q/32916575/2410359).

```
ssize_t b = -30;
printf("%zu\n", b);  // problem. 
```

* * *

`ssize_t`没有 C 指定的打印说明符。C 甚至没有指定`ssize_t`.

C 的各种扩展确实指定`ssize_t`了，在 Linux 的情况下，还指定了打印说明符。 [Linux程序员手册](http://man7.org/linux/man-pages/man3/printf.3.html)确实有：

> z: 后面的整数转换对应一个`size_t`or`ssize_t`参数",

```
printf("%zd\n", b);  // OK for that Linux 
```

[POSIX B.2.12 数据类型](http://pubs.opengroup.org/onlinepubs/9699919799/xrat/V4_xsh_chap02.html#tag_22_02_12)有

> `ssize_t`这旨在成为 的有符号模拟`size_t`。措辞是这样的，即实现可以选择使用更长的类型，或者只是使用底层类型的签名版本`size_t`。

* * *

由于`ssize_t`may（通常）比 宽`size_t`，因此 using`"%zd"`可能会调用*未定义的行为*（UB）。转换为自 C99 以来最广泛的标准有符号类型`intmax_t`并打印很简单。

```
printf("%jd\n", (intmax_t) b);  // OK for general use 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2016-11-22T18:38:38.763

当您尝试将 size_t 设置为 (-val) 时溢出，因为 size_t 是 UNSIGNED，您会溢出并获得 SIZE_T_MAX - val

例如：size_t val = -20；//val == 18446744073709551615 - 20;

# multithreading - Indy 同步 ServerTCPExecute

> ID：12175361
> 
> 赞同：5
> 
> 时间：2012-08-29T10:00:02.920
> 
> 标签：multithreading, delphi, indy

我正在使用 TIDTCPServer 组件。据我了解，事件`ServerTCPExecute(AContext: TIdContext)` 不同步。同步它的最佳方法是什么？我需要将数据发送到主线程并让它们返回格式化答案。

我正在使用 Indy 10.5.8.0。

**方法一**

像这样我应该处理关键部分以将数据从非同步函数传递到应用程序吗？

```
var data:string;
.
.
.
procedure MainThreadProcedure;
begin
  ...
end;
.
.
.
procedure IdTCPServerExecute(AContext: TIDContext);
var tmp: string;
begin
.
.
.
EnterCriticalSection(cs);
data:= tmp;
TIdYarnOfThread(AContext.Yarn).Thread.Synchronize(MainThreadProcedure);
LeaveCriticalSection(cs);
end; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T19:15:00.393

**正确**的方法是使用 Indy 的`TIdSync`类，而不是直接访问 Indy 的内部线程，例如：

```
uses
  ..., IdSync;

type
  TMySync = class(TIdSync)
  protected
    procedure DoSynchronize; override;
  public
    data: string; 
  end;

procedure TMySync.DoSynchronize;
begin
  // this runs in the main thread
  // use data as needed...
end;

procedure IdTCPServerExecute(AContext: TIDContext); 
var
  tmp: string;
  sync: TMySync; 
begin 
  tmp := ...;
  sync := TMySync.Create;
  try 
    sync.data := tmp; 
    sync.Synchronize;
  finally
    Sync.Free;
  end; 
end; 
```

请注意您所做的**任何**同步，无论是`TIdSync`还是`TThread.Synchronize()`. 如果在服务器尝试与主线程同步时主线程尝试停用服务器，您将死锁主线程和服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:08:50.793

在我的应用程序中，我正在使用以下代码：

```
procedure MainThreadProcedure;
begin
  ...
end;
.
.
.
procedure IdTCPServerExecute(AContext: TIDContext);
begin
  TIdYarnOfThread(AContext.Yarn).Thread.Synchronize(MainThreadProcedure);
end; 
```

如果需要访问主线程变量，请务必使用临界区或其他同步对象`ServerTCPExecute`

# sql - 在 SQL WHERE 子句中转义问号 (?)

> ID：12175365
> 
> 赞同：6
> 
> 时间：2012-08-29T10:00:19.767
> 
> 标签：sql

在我使用的各种 SQL 产品中，问号 (?) 标记查询中的输入参数。

如何逃避这种行为并搜索包含问号的文本，例如......

```
SELECT *
FROM   A_TABLE
WHERE  A_FIELD = 'This is a question mark not an input parameter?' 
```

...上面的问号是文字问号，而不是占位符。如果答案是特定于产品的，我目前正在使用 Derby（又名 Java DB）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T10:03:09.827

你根本不需要逃跑`?`。`WHERE`与您发布的情况一样，它与该条款没有特殊含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-02T21:43:25.917

如前所述，“？” 跟在等号后面不会充当通配符。要搜索包含问号的字段中的任何行，请使用：

```
SELECT * FROM A_TABLE
WHERE A_FIELD LIKE '%[?]%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-26T08:21:38.187

如果您的用例是检查`jsonb`列是否具有您指定的键，那么只需添加即可`?`返回`Cause: org.postgresql.util.PSQLException: No value specified for parameter`。

在 mybatis 中，解决方案不是使用单问号 ( `?`)，而是必须使用双问号 ( `??`)。

例如： `SELECT * from table where jsonb_column ?? 'key'`

# jquery - 创建一个网页动画，如 Flipboard 仪表板图像翻转

> ID：12175366
> 
> 赞同：2
> 
> 时间：2012-08-29T10:00:21.177
> 
> 标签：jquery, html, css, animation, flipboard

我正在尝试使用 Jquery/HTML/CSS 创建像 Flipboard 仪表板 imageflip 这样的动画。在此处查看演示[http://www.youtube.com/watch?v=w1fTI7oYfbI](http://www.youtube.com/watch?v=w1fTI7oYfbI)。

实现上述动画的人没有发布任何代码。

任何人都可以对此提出建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:57:50.610

你需要 CSS 转换来创建这样的动画。类似的演示（带代码）位于： http: [//www.markandey.com/2011/12/flipboard-like-ui-on-iphone-safari.html](http://www.markandey.com/2011/12/flipboard-like-ui-on-iphone-safari.html)

**注意**，示例只使用了 webkit 前缀，请确保也使用其他前缀，以支持多种浏览器。您可以在以下位置找到有关转换的所有信息：http: [//www.w3schools.com/cssref/css3_pr_transform.asp](http://www.w3schools.com/cssref/css3_pr_transform.asp)

希望你有足够的能力让你现在开始。

# sharepoint - 错误field.add by powershell 0x80004005

> ID：12175367
> 
> 赞同：0
> 
> 时间：2012-08-29T10:00:21.360
> 
> 标签：sharepoint, powershell

为什么面临错误？

行：$list.Fields.Add("test", $spFieldType, $false) - 给出错误

我尝试通过代码添加新列（类型 - url）：

电源外壳 ：

```
PS C:\Users\zabiyakin>
PS C:\Users\zabiyakin> $web = Get-SPWeb "http://localhost/Task"
PS C:\Users\zabiyakin> $list = $web.Lists["test"]
PS C:\Users\zabiyakin>
PS C:\Users\zabiyakin> $spFieldType=[Microsoft.SharePoint.SPFieldType]::URL
PS C:\Users\zabiyakin> $list.Fields.Add("test", $spFieldType, $false)
Исключение при вызове "Add" с "3" аргументами: "Не удалось завершить эту операцию.
Повторите попытку."
строка:1 знак:17
+ $list.Fields.Add <<<< ("test", $spFieldType, $false);
+ CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
+ FullyQualifiedErrorId : DotNetMethodException

PS C:\Users\zabiyakin> $View = $web.GetViewFromUrl("Lists/List1/AllItems.aspx")
PS C:\Users\zabiyakin> $Field =$List.Fields["test"]
PS C:\Users\zabiyakin> $View.ViewFields.Add($Field)
Исключение при вызове "Add" с "1" аргументами: "В экземпляре объекта не задана    ссылка   на объект."
строка:1 знак:21
+ $View.ViewFields.Add <<<< ($Field)
+ CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
+ FullyQualifiedErrorId : DotNetMethodException

 PS C:\Users\zabiyakin> $View.Update() 
```

谢谢 ！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:06:46.047

对我有用（只是我没有使用`Get-Web`cmdlet）：

```
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SharePoint")
$url = "http://localhost/Task" 
$site = new-object Microsoft.SharePoint.SPSite($url)   
$web= $site.openWeb();

$list = $web.lists["test"];

$spFieldType=[Microsoft.SharePoint.SPFieldType]::URL 
$list.fields.add("test", $spFieldType, $false); 
```

# prolog - 从列表中删除所有出现的元素

> ID：12175377
> 
> 赞同：9
> 
> 时间：2012-08-29T10:00:37.630
> 
> 标签：prolog, prolog-dif

尝试编写一个给定一个值和一个列表的过程，它会删除该列表中所有出现的值 a 写：

```
delMember(X, [], []) :- !.
delMember(X, [X|Xs], Y) :- !, delMember(X, Xs, Y).
delMember(X, [T|Xs], Y) :- !, delMember(X, Xs, Y2), append([T], Y2, Y). 
```

由于`cut`此代码**无法**正确回答以下查询：

```
delMember(Y, [1,2,3,1,2,3,1,2,3], [1, 2, 1, 2, 1, 2 ]). 
```

如果我删除剪辑：

```
delMember(X, [], []).
delMember(X, [X|Xs], Y) :- delMember(X, Xs, Y).
delMember(X, [T|Xs], Y) :- delMember(X, Xs, Y2), append([T], Y2, Y). 
```

它在以下查询中失败：

```
delMember(Y, [1,2,3,1,2,3,1,2,3], [1,2,3,1,2,3,1,2,3]). 
```

（返回`true`，当正确答案是`false`）。

我怎样才能让它在这两种情况下都有效？

也许我可以`X is not T`在第三行代码中检查一下，我试过了：

```
delMember(X, [T|Xs], Y) :- not(X = T), delMember(X, Xs, Y2), append([T], Y2, Y). 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T10:29:23.203

## 切口的使用

```
delMember(X, [], []) :- !.
delMember(X, [X|Xs], Y) :- !, delMember(X, Xs, Y).
delMember(X, [T|Xs], Y) :- !, delMember(X, Xs, Y2), append([T], Y2, Y). 
```

在这里，您可以看到您`!/0`在谓词的最后一个子句中使用了它。这不是必需的。在最后一个子句之后，没有选择余地（Prolog 记住从左到右和从上到下的选择点），因此剪切（删除选择）不会做任何有用的事情，因为您已经在列表的底部的选择。

为了说明，请参见

```
a :- b; c.
a :- d. 
```

在这里，为了证明`a`，Prolog 会先尝试`b`，然后`c`，然后`d`（从左到右，然后从上到下）。

顺便说一句，作为 Prolog 的初学者，您应该尽量避免使用 cut。只要您不了解递归和逻辑编程的其他基础知识，它只会增加您的误解。

## 序言递归

除了那个小注释，你的问题是你还没有正确理解 Prolog 递归。[请参阅已解决此问题的答案](https://stackoverflow.com/questions/12030515/prolog-recursive-call/12030940#12030940)的第一部分。

您的第三个条款是错误的：

```
delMember(X, [T|Xs], Y) :- delMember(X, Xs, Y2), append([T], Y2, Y). 
```

它应该是：

```
delMember(X, [T|Xs], [T|Y]) :- delMember(X, Xs, Y). 
```

好吧，这并没有真正的错误，它只是非常不理想。它不是尾递归和 uses `append/3`，这会将您的线性谓词变成二次谓词。另外，正如您所注意到的，由于它不是尾递归的，因此在某些情况下更难获得终止。

然后，要删除 cut 的使用`!/0`，您可以考虑在最后一个子句中添加一个*保护：*

```
delMember(_, [], []).
delMember(X, [X|Xs], Y) :-
    delMember(X, Xs, Y).
delMember(X, [T|Xs], [T|Y]) :-
    dif(X, T),
    delMember(X, Xs, Y). 
```

守卫，`dif(X, T)`，指定如果我们处于第三种情况，我们不能同时处于第二种情况：`X`不能与`T`此处统一。

请注意，我们仍然有一种方式不能使用谓词，即 , `+, -, +`，正如[cTI](http://www.complang.tuwien.ac.at/cti/cgi/cti?texta=%25+Please+enter+your+program+or+indicate+its+URL+below!%0D%0AdelMember%28_%2C+[]%2C+[]%29.%0D%0AdelMember%28X%2C+[X|Xs]%2C+Y%29+%3A-%0D%0A++++delMember%28X%2C+Xs%2C+Y%29.%0D%0AdelMember%28X%2C+[T|Xs]%2C+[T|Y]%29+%3A-%0D%0A++++dif%28X%2C+T%29%2C%0D%0A++++delMember%28X%2C+Xs%2C+Y%29.&textsubmission=Analyze+program+above&tna=yes&nti=yes&skipcomp=no&version=&url=http%3A%2F%2F)告诉我们的那样。所以像我的版本这样的查询`?- delMember(1, R, [2, 3]).`会循环。

我希望它有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T10:39:17.947

让我们重新措辞一下：由于您想在多个实例化模式中使用*谓词*“一个给定值和列表的过程，它会删除列表中该值的所有出现”并没有定义它应该如何表现在其他情况下。因此，我们可能想要类似“如果第二个和第三个参数是列表 L1、L2 和 L1 与 L2 相同的列表，如果我们忽略第一个参数的所有出现，则谓词为真”

现在，有两种方法可以编写具有多个可能实例化的谓词；您可以使用元逻辑谓词，例如`var/1`and`ground/1`并为每个谓词编写代码（这可能允许您编写针对特定实例优化的代码）或编写逻辑定义属性的代码（这可能更具挑战性）。

在这种情况下，我们可以这样做：

```
 del(_, [], []).
    del(X, [X|L1], L2):-
        del(X,L1,L2).
    del(X, [H|L1], [H|L2]):-
        X\==H,
        del(X,L1,L2). 
```

它具有以下行为：

```
19 ?- del(1, [1,2,3], X).
X = [2, 3] ;
false.
1,2,3,
20 ?- del(1, [1,2,3], [2,3]).
true ;
false.

21 ?- del(X, [1,2,3], [2,3]).
X = 1 ;
false.

22 ?- del(X, [1,2,3], Y).
X = 1,
Y = [2, 3] ;
X = 2,
Y = [1, 3] ;
X = 3,
Y = [1, 2] ;
Y = [1, 2, 3] ;
false.

23 ?- del(X, P, Y).
P = Y, Y = [] ;
P = [X],
Y = [] ;
P = [X, X],
Y = [] ;
P = [X, X, X],
Y = [] ;
P = [X, X, X, X],
Y = [] ;
P = [X, X, X, X, X],
Y = [] ;
P = [X, X, X, X, X, X],
Y = [] . 
```

关于最后一次通话；prolog 返回一个由于使用深度优先算法而增长的 X 列表；通过使用`length/2`我们可以得到广度优先的结果（_G 表示变量没有被实例化（它可以是任何东西））：

```
24 ?- length(P,N), del(X, P, Y).
P = [],
N = 0,
Y = [] ;
P = [X],
N = 1,
Y = [] ;
P = [_G548],
N = 1,
Y = [_G548] ;
P = [X, X],
N = 2,
Y = [] ;
P = [X, _G551],
N = 2,
Y = [_G551] ;
P = [_G548, X],
N = 2,
Y = [_G548] ;
P = [_G548, _G551],
N = 2,
Y = [_G548, _G551] ;
P = [X, X, X], 
```

编辑：正如@chac 指出的那样，如果第一个列表（至少）有一个重复元素，则上述谓词的行为不正确：

```
?- del(X,[1,2,1],Y).
X = 1,
Y = [2] ;
X = 2,
Y = [1, 1] ;
X = 1,
Y = [1, 2] ;                  <----- wrong
Y = [1, 2, 1]. 
```

这是因为实际上`\==/2`并`\=/2`没有对变量施加限制。这可以通过切换第三条中的规则顺序来解决：

```
 del(_, [], []).
    del(X, [X|L1], L2):-
        del(X,L1,L2).
    del(X, [H|L1], [H|L2]):-
        del(X,L1,L2),
        X\==H.

4 ?- del(X,[1,2,1],Y).
X = 1,
Y = [2] ;
X = 2,
Y = [1, 1] ;
Y = [1, 2, 1] ;
false. 
```

然而，这意味着谓词不再是尾递归的。为了解决这个问题，我们可以保留 X 不应该是的值的列表：

```
del(X,L1,L2):-
    del(X,L1,L2,[]).

del(X, [], [], NotX):-
    \+ member(X,NotX).
del(X, [X|L1], L2, NotX):-
    del(X,L1,L2,NotX).
del(X, [H|L1], [H|L2], NotX):-
    X\==H,     % <--- optional; stops the execution earlier (saving time)
    del(X,L1,L2,[H|NotX]). 
```

但是，根据以下内容，尾递归版本实际上更慢：

```
?-time(forall((between(1,50,N),length(X,N),del2(1,X,[2,3,2,3])),true)).
% 25,600,793 inferences, 5.468 CPU in 5.548 seconds (99% CPU, 4682134 Lips)
true.

?- time(forall((between(1,50,N),length(X,N),del_tr(1,X,[2,3,2,3])),true)).
% 37,346,143 inferences, 6.426 CPU in 6.428 seconds (100% CPU, 5811563 Lips)
true. 
```

仍然， + - + 不起作用（它陷入无限循环）。但为什么？问题在于子句的顺序：del(1, L1, [2]) 将首先应用将 X “添加”到 L1 头部的规则，然后永远应用相同的规则。这可以通过使用 (again) 来解决`length/2`：

```
?- length(X,2), del(1,X,[2]).
X = [1, 2] ;
X = [2, 1] ;
false. 
```

或者，我们可以更改子句的顺序：

```
del(_, [], []).
del(X, [H|L1], [H|L2]):-
    X\==H,
    del(X,L1,L2),
    X\==H.
del(X, [X|L1], L2):-
    del(X,L1,L2). 
```

但`length/2`可能再次有用，因为没有它 prolog 会进行深度优先搜索：

```
?- del(1,X,[2]).
X = [2] ;
X = [2, 1] ;
X = [2, 1, 1] ;
X = [2, 1, 1, 1] ;
X = [2, 1, 1, 1, 1] ;
X = [2, 1, 1, 1, 1, 1] ;
X = [2, 1, 1, 1, 1, 1, 1] 
```

当然`length/2`可以合并到包装谓词中，因为它不会影响其他实例化模式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T12:21:41.070

这不是一个真正的答案，只是对[Mog](https://stackoverflow.com/a/12175901/874024)和[thanosQR](https://stackoverflow.com/a/12176077/874024)答案的扩展说明，太长了，无法放入评论中。这样的答案是令人愉快和有启发性的，但需要重新考虑削减削减。考虑：

```
delMember(_, [], []).
delMember(X, [X|Xs], Y) :-
    delMember(X, Xs, Y), !.
delMember(X, [T|Xs], [T|Y]) :-
    delMember(X, Xs, Y). 
```

这个定义允许

```
?- delMember(Y, [1,2,3,1,2,3,1,2,3], [1,2,1,2,1,2]).
Y = 3. 
```

由于最后一个原因的守卫，在原始 Mog 代码中失败了。值得注意的是，用`X \== T`（将测试限制为匹配的实例化状态）替换守卫，也解决了这个查询，正如thanosQR所指出的那样。

但是这些片段都没有解决一般情况：

```
?- del(X,[1,2,1],Y).
X = 1,
Y = [2] ;
X = 2,
Y = [1, 1] ;
X = 1,
Y = [1, 2] ;
Y = [1, 2, 1]. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T13:21:23.053

这是一个片段，它也适用于未实例化的第一个和第三个参数：

```
delMember(X, Y, Z):-
  bagof(A, (setof(X, member(X, Y), L), member(X, L), member(A, Y), A\==X), Z). 
```

我将在这里解释这段代码的作用。这个想法是：

1.  构建输入列表 Y 的不同成员的列表，该列表与输入成员 X 统一
2.  然后对于基于 1) 构建的列表中的每个 X，从输入列表中丢弃该元素以获得没有成员 X 的输出列表 Z。

第 1 步已完成，`setof(X, member(X, Y), L)`它以两种方式工作。当参数`X`已经实例化时，如果包含在输入参数中，则将是`L`列表，如果不包含在中，它将失败。另一方面，如果未实例化，则将是输入参数的不同元素的集合。`[X]``X``Y``X``Y``X``L``Y`

现在在第 2 步中，我们回溯 的每个元素，并且对于该列表的每个成员，我们从产生结果`L`的输入列表中过滤该元素。`Y`我们在输出列表中收集所有这些元素`Z`。

请注意，当调用过程时参数 X 未实例化时，在回溯时，我们将获得输入列表中将用于过滤`member(X, Y)`的每个成员。`Y`

测试用例：

```
?- delMember(Y, [1,2,3,1,2,3,1,2,3], [1,2,3,1,2,3,1,2,3]).
false.

?- delMember(Y, [1,2,3,1,2,3], X).
Y = 1,
X = [2, 3, 2, 3] ;
Y = 2,
X = [1, 3, 1, 3] ;
Y = 3,
X = [1, 2, 1, 2].

?- delMember(Y, [1,2,3,1,2,3,1,2,3], [1,2,1,2,1,2]).
Y = 3.

?- delMember(X,[1,2,1],Y).
X = 1,
Y = [2] ;
X = 2,
Y = [1, 1]. 
```

# php - 使用 simple_html_dom 抓取

> ID：12175378
> 
> 赞同：0
> 
> 时间：2012-08-29T10:00:38.300
> 
> 标签：php, simple-html-dom

我试图刮这个：

```
<a id="pa1">Site1</a>
<font size="-1">Text1</font><br />
<font size="-1" color="green">Text2</font><br /> 
```

我很容易得到 pa1 ..但我想得到后面的两种字体..所以我用了这个：

```
$html = new simple_html_dom();
$html->load($document);

foreach ($html->find('#pa1>font') as $e) {
    $this->check_line_two = $this->process_array_elements($e->innertext);
}

foreach ($html->find('#pa1>font>font') as $e) {
    $this->check_line_three = $this->process_array_elements($e->innertext);
} 
```

两者都没有工作。如何使用简单的 html dom 获取下一个元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:10:32.807

中没有后代`font`标签`#pa1`。

您显然正在寻找的是兄弟选择器`+`: `#pa1 + font`。但我不知道您正在使用的库是否支持它。

请阅读他们的文档：[http ://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T10:16:07.173

就像feeela 说的，那些字体元素不是anchor 的后代。尝试这样的事情：

```
foreach ($html->find('#pa1') as $e) {
    $firstFontElement = $e->next_sibling();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:30:18.607

如果这就是您要废弃的全部内容，为什么不选择字体标签。

```
foreach ($html->find('font') as $e) {
    $this->check_line_two = $this->process_array_elements($e->innertext);
} 
```

或者文档中是否有可能存在更多字体标签？

# actionscript-3 - 如何防止 Flash 在我的 DataGrid Cell 中放大影片剪辑？

> ID：12175379
> 
> 赞同：1
> 
> 时间：2012-08-29T10:00:39.313
> 
> 标签：actionscript-3, datagrid, movieclip, cellrenderer, flash-cs6

我有一个 AS3 DataGrid 组件，在一列中我使用自定义单元渲染器从库中加载影片剪辑。然而，影片剪辑似乎会缩放以适应单元格的高度（如果我更改数据网格单元格高度属性，影片剪辑将缩放以适应）。我想保持我在库中设置的动画剪辑大小，而不是缩放以适应单元格的大小。我怎样才能做到这一点？

非常感谢

# visual-studio - 调试使用 Visual Studio 构建的 Monomac 应用程序

> ID：12175383
> 
> 赞同：2
> 
> 时间：2012-08-29T10:00:52.497
> 
> 标签：visual-studio, debugging, monodevelop, monomac, pdb

Monodevelop 是否允许调试使用 Visual Studio 构建的 .net 程序集（即具有 .pdb 符号而不是 .mdb 符号的程序集）？

如果是这样，在源代码级调试期间如何定位源文件？

这对于允许在 Windows 上构建通用程序集并在多个平台上使用非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:41:20.703

第 1 步，您可以将 *.pdb 文件转换为 .mdb 文件，

第 2 步，您可以使用 mdb 调试您的进程，

[http://www.mono-project.com/Guide:调试器](http://www.mono-project.com/Guide:Debugger)

# vb.net - 如何在桌面应用程序中添加 Facebook Like 按钮？

> ID：12175385
> 
> 赞同：3
> 
> 时间：2012-08-29T10:00:52.940
> 
> 标签：vb.net, web, facebook-like

我想知道如何在 VB.NET winforms 应用程序中添加 Like 按钮。我创建了包含 iframe 的 index.html 来调用 Facebook Like 按钮 现在我使用 WebBrowser Control 来显示 Facebook Like 按钮。它出现在我的表单中，可以使用 Facebook 帐户登录，问题是 Like Count 没有增加，请帮助我！！！

这是我使用的示例代码

索引.html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <title></title>

</head>
<body>
<iframe src="http://www.facebook.com/plugins/like.php?href=https%3A%2F    %2Fwww.facebook.com%2Fchequeprintingsoftware&amp;send=false&amp;layout=standard&    amp;width=450&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&    amp;height=80" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:80px;" allowTransparency="true"></iframe>

</body>
</html> 
```

VB.NET

```
Private Sub frmFaceBookLike_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        Dim html As String
        html = File.ReadAllText(Application.StartupPath & "\index.html")
        WebBrowser1.DocumentText = html
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:52:23.900

Like 按钮是为在 Web 环境中使用而设计的——你知道，页面托管在服务器上，Facebook 可以抓取 URL，等等。您实现 Like 按钮的方式相当创新 - 但最终，它不会真正起作用，正如您所看到的 - 在您的情况下，计数并没有增加。

更好的解决方案是使用 Open Graph，并拥有自己的 Like 按钮实现。在这种情况下，您将使用[Facebook C# SDK](http://csharpsdk.org/)并使用 Open Graph 提供的 Like 操作来创建您自己的 Like 按钮。[您可以在此处](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)找到有关 Open Graph 的 Like 操作的更多详细信息。

# javascript - 重新加载页面时 Kml 图层不更新

> ID：12175387
> 
> 赞同：8
> 
> 时间：2012-08-29T10:01:00.157
> 
> 标签：javascript, google-maps, kml

[编辑] 似乎问题来自谷歌地图，它需要一些时间来更新 KML 链接......我不确定，但最后，它可以工作......[/编辑]

我在这个网站上嵌入了一个现有的公共谷歌地图：[http ://www.ridetheflavor.fr](http://www.ridetheflavour.fr)

这是公共地图的链接：[https ://maps.google.fr/maps/ms?msa=0&msid=211027213468691902621.0004c8616605648d245b2](https://maps.google.fr/maps/ms?msa=0&msid=211027213468691902621.0004c8616605648d245b2)

如您所见，网站嵌入地图的标记与公共谷歌地图标记不匹配。看来这不是浏览器缓存的问题...

这是我正在使用的 javascript 片段（谷歌地图 API V3）：

```
var mapOptions = {
          center: new google.maps.LatLng(24.797409,-5.449219),
          zoom: 3,
          mapTypeId: google.maps.MapTypeId.TERRAIN,
          overviewMapControl: false,
          streetViewControl: false
        };
var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
var georssLayer = new google.maps.KmlLayer('https://maps.google.fr/maps/ms?ie=UTF8&authuser=0&msa=0&output=kml&msid=211027213468691902621.0004c8616605648d245b2');
georssLayer.setMap(map); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-29T13:18:49.050

Google 的服务器会将 KML 内容缓存一段时间。要强制更新呈现的 KML，请将缓存清除参数添加到 URL。如果我需要以编程方式进行操作，或者如果它只是一次编辑手册 ?a=0 并在我进行更改时增加它，我通常会使用日期/时间函数。

像这样（如果 URL 中没有任何其他查询参数）：

```
 var URL = filename+"?dummy="+(new Date()).getTime(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-10T10:24:59.107

或者您可以进一步简化它并使用：

var URL = '[您的 kml 网址]&ver=' + Date.now();

var georssLayer = 新的 google.maps.KmlLayer(URL);

# java - 编译并构建 asmack 的 jar

> ID：12175388
> 
> 赞同：0
> 
> 时间：2012-08-29T10:01:00.967
> 
> 标签：java, build, jar, asmack

我想通过在`asmack`库中应用补丁来做一些必要的更改，但我不知道如何`compile and build`获取源并从中生成 jar 文件。

谁能建议我这样做的步骤？

我试图在 Eclipse 中下载源代码，但要构建源代码，它要求`main`入口点方法，但我不知道它在哪里。我想我做错了什么。

这是链接[asmack](http://code.google.com/p/asmack/downloads/list)库源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T20:05:38.760

这是我所做的：

1.  克隆了 Flow 的 asmack git repo：

    `git clone [https://github.com/Flowdalic/asmack.git](https://github.com/Flowdalic/asmack.git)`

2.  通过修改 build.bash

    a.) 将**git://**更改为 **https://** （企业网络不允许 git:// ）

    b.)在第 89行将 git://kenai.org 存储库更改为[https://github.com/pageone/jbosh.git存储库：](https://github.com/pageone/jbosh.git)

    `execute gitfetch "[https://github.com/pageone/jbosh.git](https://github.com/pageone/jbosh.git)" "master" "jbosh"`

    c.) 添加了另一个变量：

    `SMACK_REPO_HTTP=[https://github.com/Flowdalic/smack.git](https://github.com/Flowdalic/smack.git)`

    并将第 77 行从

    `execute gitfetch **"$SMACK_REPO"** "$SMACK_BRANCH" "smack"
    **to**`

    `execute gitfetch **"$SMACK_REPO_HTTP"** "$SMACK_BRANCH" "smack"`

3.) 删除了一些与 jbosh 相关的补丁，因为 pageone 的 repo 已经对它们进行了修补。

```
<code>
patch/42-fix-regexp-compile.patch
patch/35-pin-jbosh-boddy-parser.patch
patch/34-pin-jbosh-http-sender.patch
patch/33-jbosh-android.patch
patch/32-remove-jbosh-xlightweb.sh
</code> 
```

4.) 现在运行

`bash build.bash`

希望对你有效。

# entity-framework - 将项目从 .NET 4.0 升级到 .NET 4.5 后失败 => 找不到类型或命名空间名称“MaxLength”/“Column”

> ID：12175389
> 
> 赞同：3
> 
> 时间：2012-08-29T10:01:01.173
> 
> 标签：entity-framework, .net-4.0, .net-4.5, data-annotations

我有一个针对 .Net 4.0 和实体框架 4.3.1 的工作网站。安装 .Net 4.5（使用 Visual Studio Express 2012）后，我可以在 Visual Web Developer Express 2010 上编译网站，但是当我尝试导航到

```
http://localhost/ 
```

我收到此错误：

CS0246 “找不到类型或命名空间名称 'MaxLength'” on

```
[Column("titulo"), Required(), MaxLength(150)]
Línea 13:         public string Titulo { get; set; } 
```

我有这个使用声明：

```
using System.ComponentModel.DataAnnotations; 
```

IIS 上的应用程序池是为 .Net 4.0 配置的。

我尝试将实体框架更新到 4.4（来自 Nuget）并添加了这个 using 语句：

```
using System.ComponentModel.DataAnnotations.Schema; 
```

但随后的错误是：

CS0246 “找不到类型或命名空间名称‘列’”</p>

有什么解决问题的建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T21:46:41.603

要完成这项工作，您必须执行以下操作：

1.  打开 NuGet 包管理器并在`Installed packages`选项卡中找到实体框架包。卸载它。

2.  现在转到`Online`选项卡并搜索实体框架。点击安装。现在您的项目应该引用正确的 EF 版本，`5.0`而不是`4.4.0`（我在安装这个新版本之前的版本）。

希望能帮助到你。

有关更多信息，请查看此处：[http ://forums.asp.net/t/1779042.aspx/1](http://forums.asp.net/t/1779042.aspx/1)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T10:23:33.373

可能您需要添加一些在您的解决方案中使用的引用（右键单击您的项目 - 添加引用...）

# php - Symfony 1.4 Propel - 同一类的重复声明 - sfAutoload错误？

> ID：12175392
> 
> 赞同：0
> 
> 时间：2012-08-29T10:01:12.780
> 
> 标签：php, orm, symfony1, symfony-1.4, propel

我收到此错误，为什么我尝试从后端的基本管理员生成列表中对结果进行排序：

再也没有遇到过这个问题：

> （！）致命错误：无法在第 10 行调用堆栈＃时间记忆函数位置 1 0.0004 370000 {main}（）..\backend_dev.php:0 2 0.1291 上重新声明类 BasePhotoPeer 在 PROJECTNAME\lib\model\om\BasePhotoPeer.php 6509976 sfContext->dispatch() ..\backend_dev.php:13 3 0.1291 6510008 sfFrontWebController->dispatch() ..\sfContext.class.php:170 4 0.1296 6529528 sfController->forward() ..\sfFrontWebController.class。 php:48 5 0.1494 7268288 sfFilterChain->execute( ) ..\sfController.class.php:238 6 0.1497 7269144 sfRenderingFilter->execute( ) ..\sfFilterChain.class.php:53 7 0.1497 7269144 sfFilterChain->execute() ..\sfRenderingFilter.class.php:33 8 0.1499 7269976 sfBasicSecurityFilter->execute( ) ..\sfFilterChain.class.php:53 9 0.1500 7270008 sfFilterChain->execute( ) ..\sfBasicSecurityFilter.class.php:72 10 0.1502 7270960 sfExecutionFilter->execute() ..\sfFilterChain.class.php:53 11 0.1503 7271704 sfExecutionFilter->handleAction() ..\sfExecutionFilter.class.php:42 12 0.1503 7277ExecutionFilter ->executeAction() ..\sfExecutionFilter.class.php:78 13 0.1537 7377448 sfActions->execute()..\sfExecutionFilter.class.php:92 14 0.1539 7378328 autoPhotoActions->executeIndex()..\sfActions.class。 php:60 15 0.1626 8232616 autoPhotoActions->getPager( ) ..\actions.class.php:45 16 0.1627 8232664 sfModelGeneratorConfiguration->getPager( ) ..\actions.class.php:129 17 0.1645 8382080 sfPropelPager->__con ..\sfModelGeneratorConfiguration.class.php:469 18 0.1721 9275456 常量 ( ) ..\sfPropelPager.class.php:37 19 0.1722 9275688 sfAutoload->autoload( ) ..\sfPropelPager.class.php:0 20 0.1722 9275688 sfAutoload->loadClass( ) ..\sfAutoload.class.php:163 21 0.1725 9295720 要求('PROJECTNAME\lib\model \PhotoPeer.php'）..\sfAutoload.class.php:188 22 0.1742 9556976 要求（'PROJECTNAME\lib\model\om\BasePhotoPeer.php'）..\PhotoPeer.php:3

这发生在我生成后端管理模块的所有模型上。一种临时解决方案是`require 'lib/model/om/BaseENTITYPeer.php';`从`ENTITYPeer.php class`.

但我不明白为什么这条线从一开始就在这里（所有使用推进生成经典的模型）。在我制作的其他项目中，实体类上没有出现这样的行。

# ruby-on-rails - 如何在 capistrano 的另一个任务中添加一个任务

> ID：12175400
> 
> 赞同：1
> 
> 时间：2012-08-29T10:01:24.353
> 
> 标签：ruby-on-rails, ruby, capistrano

这是我的`deploy.rb`，我有两个任务：

```
set :rpm_name,""
set :dir,"/tmp"

task :rpminfo do
        rpmofos1=capture("rpm -q #{rpm_name}")
        new_test
        puts "#{rpmofos1}"     
end

task :new_test do
        run "ls -ltr #{dir}"
end 
```

我正在调用`cap`命令：

```
cap hostname rpminfo -s user=root -s dir=/root 
```

这适用于但我不想从命令行传递 dir 变量而是我希望它：

```
task :rpminfo do
        rpmofos1=capture("rpm -q #{rpm_name}")
        new_test -s dir=/var
        puts "#{rpmofos1}" 
end 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:51:06.870

我会将 new_test 定义放在辅助方法中。

```
set :rpm_name,""
set :dir,"/tmp"

task :rpminfo do
        rpmofos1=capture("rpm -q #{rpm_name}")
        new_test_helper("/var")
        puts "#{rpmofos1}"     
end

def new_test_helper(path)
   run "ls -ltr #{path}"
end    

task :new_test do
   new_test_helper(dir)
end 
```

但是，如果您不喜欢这个想法，您也可以在调用子任务之前临时设置变量。

```
set :rpm_name,""
set :dir,"/tmp"

task :rpminfo do
        rpmofos1=capture("rpm -q #{rpm_name}")
        old_dir = dir
        set :dir, "/tmp"
        new_test
        set :dir, old_dir
        puts "#{rpmofos1}"     
end

task :new_test do
        run "ls -ltr #{dir}"
end 
```

另一种方式更清洁。

# java - 如何在java中创建一个.dat文件

> ID：12175401
> 
> 赞同：4
> 
> 时间：2012-08-29T10:01:26.210
> 
> 标签：java, file, file-io

我想`.dat`在java中创建一个不存在的文件。我也不知道如何手动创建它。我知道以下代码：

```
 File f = new File(file); 
```

用于文件，但不存在的文件的代码到底是什么。换句话说，创建一个新文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T10:04:09.437

like 语句`File f = new File(file);`不会在磁盘上创建文件。类`java.io.File`仅代表文件路径，而不是磁盘上的实际文件。

要创建一个新文件，`FileOutputStream`请为其打开一个文件，然后您可以使用该文件将数据写入文件。

```
OutputStream out = new FileOutputStream("C:\\Temp\\filename.dat");
try {
    // Write data to 'out'
} finally {
    // Make sure to close the file when done
    out.close();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T10:03:59.437

很简单：

```
File myFile = new File("your_file.bat");
myFile.createNewFile(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T10:04:18.860

问题有点不清楚，但这将创建一个新的空文件：

```
 new File("x.dat").createNewFile(); 
```

如果您想在其中包含一些数据，请使用 FileOutputStream 到文件（如果丢失也会创建它，如果已经存在则覆盖）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T10:23:32.267

在创建文件之前，您还应该检查是否真的不存在。

```
File file = new File("abc.dat");
if(!file.exists())
{
    boolean created = file.createNewFile();
} 
```

# python - scikit-learn GMM 产生正对数概率

> ID：12175404
> 
> 赞同：7
> 
> 时间：2012-08-29T10:01:32.340
> 
> 标签：python, machine-learning, scikit-learn, mixture-model

我正在使用 python scikit-learn 包中的高斯混合模型来训练我的数据集，但是，当我编码时，我发现

-- G=mixture.GMM(...)

-- G.fit(...)

-- G.score(求和特征)

得到的对数概率是正实数……这是为什么呢？对数概率不能保证为负吗？

我得到它。高斯混合模型返回给我们的是对数概率“密度”而不是概率“质量”，因此正值是完全合理的。

如果协方差矩阵接近奇异，则 GMM 将不会表现良好，通常意味着数据不适用于此类生成任务

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T14:20:29.867

正对数概率是可以的。

请记住，GMM 计算的概率是概率密度函数 (PDF)，因此在任何单个点都可以大于 1。

限制是 PDF 必须在数据域上集成为一个。

如果对数概率变得非常大，那么推理算法可能已经达到了退化的解决方案（如果你有一个小数据集，这与最大似然估计很常见）。

要检查 GMM 算法是否没有达到退化解，您应该查看每个分量的方差。如果任何方差接近于零，那么这很糟糕。作为替代方案，您应该使用贝叶斯模型而不是最大似然估计（如果您还没有这样做）。

# c - glClearColor(0, 0, 0, 0) 是透明的，不是黑色的

> ID：12175406
> 
> 赞同：2
> 
> 时间：2012-08-29T10:01:35.773
> 
> 标签：c, linux, opengl, ubuntu, freeglut

我第一次尝试使用 OpenGL。我正在网上查看一些代码，然后尝试编写自己的代码，但我总是得到一个空（透明）窗口。（我使用 GLUT 打开窗口）。

我以为我做错了什么，所以我将代码从[这里](http://www.mario-konrad.ch/wiki/lib/exe/fetch.php?media=programming:opengl:tutorial-01:tutorial01.cpp)复制到我的 C 源代码中，我的窗口仍然是透明的。此外，*glClearColor()的**alpha*参数似乎没有任何效果。相反，alpha 值**似乎**由*red*、*green*和*blue*参数决定。

 *****`glClearColor(0, 0, 0, 0)`
`glClearColor(0, 0, 0, 1)`
![在此处输入图像描述](../Images/9884c5d01b2a87d3bf97422120bc8a3a.png)

`glClearColor(1, 0, 0, 0)`
`glClearColor(1, 0, 0, 1)`
![在此处输入图像描述](../Images/f61bb39e146c42eeae16cda901418ac6.png)

`glClearColor(1, 1, 0, 0)`
`glClearColor(1, 1, 0, 1)`
![在此处输入图像描述](../Images/991ec7b883c6c95307bd7cef752b35e3.png)

`glClearColor(1, 0, 0, 0)`
`glClearColor(1, 0, 0, 1)`
![在此处输入图像描述](../Images/5609fc97dccc43b041181cd656df8abe.png)

*alpha*参数不会改变结果。

我使用 Ubuntu 12.04 LTS，*libgl1-mesa-dev*。

这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T10:14:36.147

GLUT 默认情况下不请求 alpha 缓冲区，我怀疑您所看到的可能是窗口透明度的故障安全、临时实现。尝试添加：

```
glutInitDisplayMode(GLUT_RGBA | GLUT_ALPHA); 
```

在其他 GLUT 初始化调用附近。请记住[此功能](http://www.opengl.org/resources/libraries/glut/spec3/node12.html)，因为如果/当您需要深度或模板缓冲区或双缓冲时，您需要再次修改调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-06T09:48:49.510

在显示模式下使用 glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB)*****

# system - 如何在 vim 中使用 2 个参数调用 system()

> ID：12175407
> 
> 赞同：3
> 
> 时间：2012-08-29T10:01:36.397
> 
> 标签：system, vim

```
function! ReName()
   let old_name = expand("<cword>")
    let new_name = input("new name: ",old_name)
    let cmd = "ref.sh ".expand(old_name).expand(" ").expand(new_name)
   :call system(cmd)
endfunction 
```

ref.sh 是一个 bash 文件，上下文是

```
#! /bin/bash
find . -name '*.[ch]' | xargs sed -i s/$1/$2/g 
```

但是现在，当我在 vim 中使用 ReName 函数时，它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:32:27.843

*好吧，您希望它做什么，错误是什么/在哪里？*

首先，您忽略对`system()`. 如果有输出，要么使用`:echo`而不是`:call`，将它分配给一个变量，或者`:return`它。否则，请检查`v:shell_error`变量以了解命令的退出状态。

* * *

更多批评：而不是

```
let cmd = "ref.sh ".expand(old_name).expand(" ").expand(new_name) 
```

省略多余的`expand()`：

```
let cmd = "ref.sh ".old_name." ".new_name 
```

或通过以下方式组装命令`printf()`：

```
let cmd = printf("ref.sh %s %s", old_name, new_name) 
```

* * *

您的函数仅适用于某些行为良好的参数。在 Vim 中使用`shellescape()`，并在你的 shell 脚本中正确引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:38:44.367

我同意*Ingo Karkat*的观点。其他方式可能是替代

```
:call system(cmd) 
```

~~`vimrc`,里面的冒号是不正确~~的

```
exe "!" . cmd 
```

假设你`cmd`没有像空格这样的特殊字符，换行符是这样的。

# java - 如何在执行 java 代码时打印行号

> ID：12175408
> 
> 赞同：3
> 
> 时间：2012-08-29T10:01:37.940
> 
> 标签：java, code-coverage

H 所有，我想跟踪在我的代码中执行了哪些行，以便我可以突出显示这些行。因此，我能够跟踪未经测试的代码。

我发现 JDB 是我可以实际调试应用程序的方式，但我无法将 JDB 与正在运行的 Eclipse 代码连接起来。所以在好的情况下，我想要的是我的代码在 eclipse 上运行，我通过 JDB 连接到该代码并能够获取所有执行的行号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-11T21:35:04.110

这将为您提供调用堆栈跟踪代码的文件中的行号：

```
Thread.currentThread().getStackTrace()[1].getLineNumber(); 
```

这将为您提供文件中包含堆栈跟踪代码的方法被调用的行号：

```
Thread.currentThread().getStackTrace()[2].getLineNumber(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:07:16.000

我认为 Eclipse Debugger 可以完成这项工作，因此您可以逐行处理代码

[http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junor](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junor)

但这几乎包含在任何 ide 中

# algorithm - 如何检查字符串是否可以发音？

> ID：12175416
> 
> 赞同：11
> 
> 时间：2012-08-29T10:02:03.153
> 
> 标签：algorithm, phonetics

我想以编程方式检查字符串是否可以发音或需要拼写。

例如，`internationalization`可以读出，但`i18n`不能，也不可以`hhdirgxzf`。

我可以想到一些简单的启发式方法，例如检查字符串是否包含非字母字符，但我希望有一种更健壮和科学的方法来做到这一点。是否有算法方法可以根据发音的难易程度对字符串进行评分？

相关：[有没有办法对单词的发音难度进行排名？](https://stackoverflow.com/questions/10422091/is-there-a-way-to-rank-the-difficulty-of-pronunciation-of-a-word)，但是我没有列表，也无法预先计算。

* * *

根据评论更新。

*   由于我是说英语的人，我对英语很感兴趣，但我可以想象一种基于声音和说话方式而不是特定语言特征的算法。
*   发音是指可以自然读出字符串，可以发音`hhdirgxzf`但听起来不是一个自然语言单词，它需要被分解。
*   我想到的一个特定用例是向我发送字符串的地方，我想使用基本的文本到语音系统来大声朗读它们。我想确定让 TTS 系统尝试发音的字符串中的哪些标记，以及让它拼出的标记，如果不自信，就会在拼写方面犯错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:12:31.247

通过首先将单词分成音节，您可能会取得一些成功。 [这个关于 SO 的问题](https://stackoverflow.com/questions/405161/detecting-syllables-in-a-word)可能会有所帮助。当然，这仅适用于像英语这样使用包含字母且字母包含元音的字母的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:59:34.440

这些字符串的来源是什么？如果您自己生成它们，那么您可以尝试生成可能发音的字符串。可能有效的想法包括：

*   从一个单词开始，用其他元音替换元音，用相似的辅音替换辅音。

*   生成一个随机的 Soundex 并向后工作到生成该 Soundex 的单词。

*   连接三个或四个可发音的音节。

*   辅音和元音交替出现。

*   [Lorem Ipsum](http://slipsum.com/ipsum/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:06:49.050

也许计算字母字符，并将它们除以字符串的长度。基于字母字符密度的分数？另外，也许会降低每个数字的分数？

# binary - 如何在 python 中对字符串进行二进制编码？

> ID：12175417
> 
> 赞同：15
> 
> 时间：2012-08-29T10:02:07.380
> 
> 标签：binary, python-3.x, ascii, md5

我正在尝试构建一个用于练习的 md5 破解器。在我继续之前，这里是我的代码：

```
def offline_wordlist_attack(list_path):
      with fileinput.input(files=(list_path)) as wordlist:
          for word in wordlist:
              md5_hash_object = hashlib.md5() # constructing an md5 hash object
              md5_hash_object.update(binascii.a2b_uu(word))
              word_digest = md5_hash_object.digest() # performing the md5 digestion of the word   
              print(word_digest) # Debug 
```

我的问题是`md5_hash_object.update(binascii.a2b_uu(word))`. hashlib Python 3 文档指出传递给的字符串[应该](http://docs.python.org/py3k/library/hashlib.html)`update()`是**二进制表示**。该文档`m.update(b"Nobody inspects")`用作示例。在我的代码中，我不能简单地附加`b`在变量前面`word`。所以我尝试使用[binascii](http://docs.python.org/py3k/library/binascii.html)库，但该库也在文档中注明：

> 笔记
> 
> 编码和解码函数不接受 Unicode 字符串。只能处理 bytestring 和 bytearray 对象。

有人可以帮我解决这个问题吗？它对我越来越好。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-29T10:05:42.220

您需要传入一个`bytes`对象，而不是一个`str`. `str`从（Python 3 中的 unicode 字符串）到的典型方法`bytes`是使用`.encode()`字符串上的方法并指定您希望使用的编码。

```
my_bytes = my_string.encode('utf-8') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T10:07:35.960

只需调用`fileinput.input(...,mode='rb')`以二进制模式打开文件。此类文件生成二进制字符串，而不是像以文本模式打开的文件那样生成 Unicode 字符串。

它允许您跳过对从磁盘读取的字节进行不必要的（隐式）解码，然后`.encode()`在将它们传递给`md5()`.

# regex - AliasMatch 和正则表达式？

> ID：12175422
> 
> 赞同：0
> 
> 时间：2012-08-29T10:02:25.883
> 
> 标签：regex, apache

我想在 apache 中为我的虚拟主机做一个 AliasMatch。我想做这样的路径：

> /文件夹1/文件夹2/文件夹3

指向

> /folder1/folder2/somethingelse/folder3

但路径也可以是：

> /文件夹1/文件夹2

然后应该指向：

> /folder2/folder2/其他东西

所有子文件夹都有未知名称，它只是我知道名称的文件夹“somethingelse”。

对模式有什么建议吗？到目前为止我得到了这个；

`[^/]*((/[^/]*)?)?(.*)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T21:37:02.823

尝试这个 ：

```
AliasMatch ^/([^/]+)/([^/]+) "/$1/$2/somethingelse"
AliasMatch ^/([^/]+)/([^/]+)/([^/]+) "/$1/$2/somethingelse/$3" 
```

# jquery - 淘汰赛保存div的高度

> ID：12175423
> 
> 赞同：2
> 
> 时间：2012-08-29T10:02:28.947
> 
> 标签：jquery, knockout.js

我有一些使用 jQuery 可调整大小的 div。我想要做的是以某种方式将 div 的高度分配给敲除属性，因此当高度改变时，值将保存在敲除模型中。我考虑过使用“css”或“attr”绑定来做到这一点，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:28:40.233

在您的绑定中，您可以使用 jQuery 事件，例如：

```
data-bind="event:{'resize':sizeChanged}" 
```

我已经调整了你的例子。

**请尝试** [**示例**](http://jsfiddle.net/dmitry_zaets/z8G4k/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:42:17.477

css、attr 绑定不是真正的“双向”绑定，例如当 DOM 中的宽度和高度发生变化时，模型会更新。

有一个[jQuery 插件](http://benalman.com/projects/jquery-resize-plugin/)可以绑定 resize 事件。

监听此事件并更改模型的属性。[这里](http://jsfiddle.net/z8G4k/)有一个小提琴。

# windows - 'net stop spooler' 失败，退出代码为 259

> ID：12175430
> 
> 赞同：1
> 
> 时间：2012-08-29T10:02:47.613
> 
> 标签：windows, winapi, error-code

我使用 C++ 程序中的 CreateProcess 启动“net stop spooler”。它失败了，退出代码是 259。

有谁知道那个错误代码是什么意思？另外，如果有人可以给我一个链接，指向一些关于此命令可能的错误代码及其含义的文档，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T10:35:03.277

259 不是错误，而是如果您传递的进程句柄与尚未终止的进程相关（因此没有退出代码），它会返回`STILL_ACTIVE`。`GetExitCodeProcess`

如果您想在获取退出代码之前等待它退出，请调用`WaitForSingleObject()`进程句柄。

# c++ - C++ 的标准河豚 API？

> ID：12175433
> 
> 赞同：1
> 
> 时间：2012-08-29T10:03:08.877
> 
> 标签：c++, encryption, blowfish

我已经搜索了互联网，但似乎有很多实现，其中一些不能正常工作，是否有 C++ 的标准或工作 API 可以用来解密河豚加密字符串？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T11:29:15.420

[`Crypto++`](http://www.cryptopp.com/)有[`Blowfish`](http://www.cryptopp.com/docs/ref/class_blowfish.html)实施

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:20:41.327

[OpenSSL](http://www.openssl.org/)加密库支持[河豚](http://www.openssl.org/docs/crypto/blowfish.html)。建议使用[OpenSSL EVP](http://www.openssl.org/docs/crypto/evp.html)系统而不是直接调用。

# qt - 如何在 Qt 中使用 QLabel 设置图像？

> ID：12175438
> 
> 赞同：8
> 
> 时间：2012-08-29T10:03:19.657
> 
> 标签：qt

```
ui->label->setStyelSheet("image:url(:/1.png); border-image:url(:/2.png);"); 
```

为什么运行后无法显示图像？但border-image显示正常。
它可以在 Qtcreator 中正常显示。即使没有运行，它也可以在编译器中显示图像。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T11:42:17.910

我认为该`image`属性仅用于子控件（请参阅[doc](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html#image-prop)），而`border-image`对标签有效。采用

```
 QPixmap::QPixmap ( const QString & fileName, const char * format = 0, Qt::ImageConversionFlags flags = Qt::AutoColor );
 QLabel::setPixmap ( const QPixmap & ); 
```

像这样：

```
QPixmap pix(":/1.png");
ui->label->setStyleSheet("border-image:url(:/2.png);");
ui->label->setPixmap(pix); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:52:53.167

尝试关注

```
ui->label->setStyleSheet("background-image: url(:/1.png);"); 
```

# android - 使用 kxml.zip 的 Android XML 解析代码

> ID：12175445
> 
> 赞同：0
> 
> 时间：2012-08-29T10:03:47.400
> 
> 标签：android

我正在使用此代码解析一个 xml 文件，我有 url 地址，但它在这句话中给出了错误 android os network on main thread exception URLConnection httpConnection = url.openConnection(); inputStream = httpConnection.getInputStream(); 这是我的代码：

```
package com.example.mainp;

import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.Vector;

import org.apache.http.HttpConnection;
import org.kxml.Xml;
import org.kxml.parser.XmlParser;
import org.kxml.parser.ParseEvent;
import org.kxml.parser.XmlParser;

import android.app.Activity;
import android.widget.Toast;

public class parse {

     public static Vector places;
     Activity ac;
    Place place;
      private ParseEvent event = null;
    public void init(Activity activity) {
        this.ac=activity;
        XmlParser parser = null;
        InputStreamReader isR = null;
        HttpConnection connection = null;
        try {

            InputStream inputStream = null;
            System.out.println("0");
            Toast.makeText(ac, "24", Toast.LENGTH_LONG).show();
            //URL url = new URL("http://217.52.114.3/Mobinil%20Islamic%20WebService/MobinilIslamicService.asmx/GetIslamicDirectory");
            URL url= new URL("http://217.52.114.3/CinemaGuid/CinemaGuid.asmx/getTVSchedule");
            System.err.println("2");
            URLConnection httpConnection = url.openConnection();
            inputStream = httpConnection.getInputStream();
//          inputStream = connection.openInputStream();
            Toast.makeText(ac, "4", Toast.LENGTH_LONG).show();  
            isR = new InputStreamReader(inputStream, "UTF-8");
            System.out.println("3");
            parser = new XmlParser(isR);
            System.out.println("4");
            Toast.makeText(activity, "5", Toast.LENGTH_LONG).show();    
            places = new Vector<Place>();
            traverse(parser);
            isR.close();
            inputStream.close();
            inputStream = null;
            isR = null;
            // System.gc();
        } catch (Exception ex) {
            Toast.makeText(activity, ex.toString(), Toast.LENGTH_LONG).show();  
        }
    }
    private void traverse(XmlParser parser) {
        // TODO Auto-generated method stub
        boolean leave = false;
        do {
            try {
                event = parser.read();
                ParseEvent pe;
                switch (event.getType()) {
                    case Xml.START_TAG:
                        // see API doc of StartTag for more access methods
                        // Pick up Title for display
                        if("places".equalsIgnoreCase(event.getName())){
                            places = new Vector();
                            //Toast.makeText(ac, "6", Toast.LENGTH_LONG).show();    
                        }
                        if("places".equalsIgnoreCase(event.getName())){
                            place = new Place();
                            place.setName(event.getValue("name"));
                            place.seturl(event.getValue("url"));
                            place.setaddress(event.getValue("adress"));
                            //Toast.makeText(MainPActivity.this, "7", Toast.LENGTH_LONG).show();    

                        }
                        if("description".equalsIgnoreCase(event.getName())){
                             pe = parser.read();
                            if(pe.getText()!=null){
                                place.setdescription(pe.getText().toString());
                            }
                        }
                        traverse(parser); // recursion call for each <tag></tag>
                        break;
                    case Xml.END_TAG:
                        if ("Place".equalsIgnoreCase(event.getName())) {
                            places.addElement(place);
                         // Toast.makeText(MainPActivity.this, "8", Toast.LENGTH_LONG).show();  
                        }
                        leave = true;
                        break;
                    case Xml.END_DOCUMENT:
                        leave = true;
                        break;
                    case Xml.TEXT:
                        break;
                    case Xml.WHITESPACE:
                        break;
                    default:
                }
            } catch (Exception ex) {
                Toast.makeText(ac, ex.getMessage(), Toast.LENGTH_LONG).show();  

            }
        } while (!leave);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:24:25.957

任何网络调用都应在单独的线程中完成。您正在 UI（默认）主线程中进行网络调用，Android 4.0+ 会对此抛出异常。查看 AsyncTask 或 Worker Threads 以在另一个进程中完成长时间运行的任务

[http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)

# c# - 当父 div 为 display:none 时，ASP.net MaskEditExtender 停止工作

> ID：12175449
> 
> 赞同：0
> 
> 时间：2012-08-29T10:03:56.790
> 
> 标签：c#, jquery, asp.net, shadowbox

我已经开始使用 MaskEditExtender。以下工作正常：

```
<div class="row">  
  <asp:Label ID="lblStartTime" Text="Start Time: " runat="server" />
  <asp:TextBox ID="txtStartTime" runat="server" />
  <asp:MaskedEditExtender ID="mskStartTime" ClearMaskOnLostFocus="false" TargetControlID="txtStartTime" runat="server" AcceptAMPM="true" Mask="99:99"  MaskType="Time" />
</div> 
```

面膜效果很好。但是，一旦我将以下内容设置为无，掩码就不起作用：

```
<div class="row" style="display:none">  
  <asp:Label ID="lblStartTime" Text="Start Time: " runat="server" />
  <asp:TextBox ID="txtStartTime" runat="server" />
  <asp:MaskedEditExtender ID="mskStartTime" ClearMaskOnLostFocus="false" TargetControlID="txtStartTime" runat="server" AcceptAMPM="true" Mask="99:99"  MaskType="Time" />
</div> 
```

我需要它来工作，因为我使用的是影子盒类型的插件，所以我需要隐藏和显示它。

有谁知道我在这里做错了什么？

谢谢！

# java - 如何阻止 HTTP 并允许 HTTPS？

> ID：12175451
> 
> 赞同：0
> 
> 时间：2012-08-29T10:04:03.340
> 
> 标签：java, google-app-engine

如何检查 URL 是`http`或`https`通过以编程方式使用`HttpServlet`. 如果 URL 是`http`发送消息，`Warning`否则消息为`Allow`.

如何以编程方式阻止 HTTP Url 并允许 HTTPS 通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:09:58.993

您可以通过 检测 servlet 中的 HTTPS `servletRequest.isSecure()`。

要强制使用 HTTPS，[只需](https://developers.google.com/appengine/docs/java/config/webxml#Secure_URLs)在`web.xml`. 当用户访问 HTTP 时，他们将被重定向到 HTTPS。

# android - 卸载应用程序密码保护

> ID：12175461
> 
> 赞同：1
> 
> 时间：2012-08-29T10:04:28.940
> 
> 标签：android

如何在之前在该设备上安装应用程序的用户卸载应用程序之前启动 Activity 或 IntentService？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-21T01:05:57.373

实现您想要的一种方法包括以下步骤：

1.  （暂时）生根设备
2.  将有问题的应用程序转换为系统应用程序（例如使用 Titanium Backup ★ root，但也有其他应用程序可以帮助您完成此步骤）
3.  再次取消root设备由于应用程序现在驻留在只读空间（/系统）中，用户无法在不root设备或刷新ROM的情况下删除它 - 当然可以这样做，但至少它是一个更高的抑制阈值.

计算机没有不可能的事情。短期内只有困难和极不可能发生。这是事实而不是意见。经常有人说“不可能”，有人打断他们说“刚刚做到了。”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:11:51.903

您必须在 AndroidManifest.xml 中使用名为“android.intent.action.DELETE”的 Intent 过滤器，如下所示

```
<activity
    android:name=".Activity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
        <action android:name="android.intent.action.VIEW" />
        <action android:name="android.intent.action.DELETE" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="package"  />
    </intent-filter>
</activity> 
```

这将调用活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:17:54.860

您不能阻止用户删除应用程序。

当用户请求卸载时，将发送 DELETE 意图。PackageManager 将收到此意图并开始卸载应用程序。

因此，如果没有任何 Android 修改，您将无法添加密码。

# php - 如何在两个不同表的两行中插入相同的 UUID

> ID：12175462
> 
> 赞同：0
> 
> 时间：2012-08-29T10:04:29.123
> 
> 标签：php, mysql, database, uuid

我尝试下一个脚本：

```
// Insert data into mysql 

$qry="INSERT INTO $tbl_name1 (ID, REFERENCE, CODE, NAME) VALUES (UUID(), '$REFERENCE', '$CODE', '$NAME')";
$result=mysql_query($qry);

$qry2="INSERT INTO $tbl_name2 (PRODUCT) VALUES ('$ID')"; <--- Here is a problem
$result=mysql_query($qry2) 
```

我不知道两个如何同时在两个表中插入**相同的 UUID**。请帮我！我将非常感谢您的支持！

完毕！！！工作脚本：

```
$q = "SELECT UUID() AS uid";
$res = mysql_query($q) or die('q error: '.mysql_error());
$row = mysql_fetch_assoc($res);

// Insert data into mysql 
$qry="INSERT INTO $tbl_name1 (ID, REFERENCE, CODE, NAME) VALUES ('".$row['uid']."', '$REFERENCE', '$CODE', '$NAME')";
$result=mysql_query($qry) or die('err 034r '.mysql_error());

$qry2="INSERT INTO $tbl_name2 (PRODUCT) VALUES ('".$row['uid']."')";
$result=mysql_query($qry2) or die('gg2345  '.mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:08:47.780

只需`SELECT UUID()`在发送`INSERT`s 并将值放入 PHP 中的语句之前执行此操作。像这样的东西（未经测试）：

```
$result = mysql_query("SELECT UUID() AS UUID") or die('SQL error: ' . mysql_error());
$row = mysql_fetch_assoc($result);
$UUID = $row["UUID"];

$qry="INSERT INTO $tbl_name1 (ID, REFERENCE, CODE, NAME) VALUES ('$UUID', '$REFERENCE',   '$CODE', '$NAME')";
$result=mysql_query($qry);

$qry2="INSERT INTO $tbl_name2 (PRODUCT) VALUES ('$UUID ')"; <--- Here is a problem
$result=mysql_query($qry2) 
```

另一种方法是使用用户定义的变量（[参见 SQL Fiddle](http://sqlfiddle.com/#!2/e9584/1)）：

```
SET @UUID = (SELECT UUID() AS UUID);
INSERT INTO test1 VALUES(@UUID, "foo");
INSERT INTO test1 VALUES(@UUID, "bar"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:07:45.220

假设`ID`您可以在之前添加的表唯一索引`$qry2`：

```
$ID = mysql_insert_id(); 
```

# php - joomla 按钮的验证

> ID：12175464
> 
> 赞同：1
> 
> 时间：2012-08-29T10:04:38.953
> 
> 标签：php, joomla, joomla2.5

我需要有关 Joomla 管理面板验证的帮助。

我正在使用 Joomla 2.5。我需要验证管理后端中的一些 Joomla 按钮。例如，当单击“ `Publish`”、“ `Unpublish`”或“ `Delete`”按钮时，我希望弹出确认消息显示“ `Are you sure you want to unpublish?`”

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:49:58.087

你可以试试这个

```
<script type="text/javascript">
   Joomla.submitbutton = function(task){
        if(task == 'Unpublish'){
              var answer = confirm("Are you sure you want to delete?")
              if(answer){
                    submitbutton(task); // run the unpublish script on controller
              }
              else{
                    return false;
              }
        }

        submitbutton(task);
   }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:50:23.250

尝试插入它需要一点时间，所以让你开始，你可以使用这个：

```
<script type="text/javascript">
function confirm_delete() {
    var answer = confirm("Are you sure you want to delete?")
    if (answer){
        //run delete script
    }
    else{
        //go back to previous page
    }
}
</script> 
```

单击按钮时使用拉动功能。

这是使用脚本的基本 html 版本>> [http://jsfiddle.net/n56vt/](http://jsfiddle.net/n56vt/)

# c# - LINQ 中的日期范围重叠问题

> ID：12175466
> 
> 赞同：3
> 
> 时间：2012-08-29T10:04:51.970
> 
> 标签：c#, linq

给定表格中特定记录的日期范围，例如特定字段“名称”

如果有人试图在以前的日期范围间隔内插入该名称，则不应允许。

我在这里试过一些代码看看这个......

```
if (dataContext.TableAs.Where(
    x => x.EndDate > StartDate &&
    x.Name == Name).Count() == 0)
{
    //insert record
} 
```

但并非总是成功。

谁能建议我在这里错过了什么？

我在 SQL 中尝试过以下查询，如何在 LINQ 中将其用于上述代码

```
SELECT COUNT(*) FROM TableA WHERE ('2012-04-02' between StartDate and EndDate or '2012-08-28' 
between StartDate and EndDate or StartDate between '2012-04-02' and  '2012-08-28' or       EndDatebetween '2012-04-02' and  '2012-08-28' ) and Name='Test' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:12:04.447

试试这个;

```
if (dataContext.TableAs
            .Where(x => x.Name == Name)
                .Max(x  => x.EndDate) < StartDate) 
```

**编辑 - 对于问题的第二部分**

```
DateTime Date1 = new DateTime("2012-04-02");
DateTime Date2 = new DateTime("2012-08-28");

var query = (dataContext.TableAs
            .Where(x => x.Name == "Test")
            .Where(x => (x.StartDate >= Date1 && Date1 <= x.EndDate)
                    || (x.StartDate >= Date2 && Date2 <= x.EndDate)
                    || (Date1 >= x.StartDate && x.StartDate <= Date2)
                    || (Date1 >= x.EndDate && x.EndDate <= Date2))).Count(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:50:36.953

```
var StartDate = new DateTime(2012,04,02);
var EndDate = new DateTime(2012,08,28);
var Name = "Test";

if (!dataContext.TableAs.Any(
   x=> x.Name == Name && x.EndDate >= StartDate && x.StartDate <= EndDate
)
{
    //insert record
} 
```

# glkit - 转换 GLKMatrix4 和 CATransform3D

> ID：12175471
> 
> 赞同：5
> 
> 时间：2012-08-29T10:05:13.840
> 
> 标签：glkit

有没有办法从 CATransform3D 转换为 GLKMatrix4，还是我总是需要手动将它们从值转换为值？我想铸造会更快。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-05T18:10:09.323

不幸的是，目前还没有。很可能有一个隐藏的 API 调用，Apple 使用它通过 CALayers 和 OpenGL 进行转换，但现在以下是你最好的选择。我只会创建一个包含它的实用程序类。

```
 - (GLKMatrix4)matrixFrom3DTransformation:(CATransform3D)transform
{
    GLKMatrix4 matrix = GLKMatrix4Make(transform.m11, transform.m12, transform.m13, transform.m14,
                                       transform.m21, transform.m22, transform.m23, transform.m24,
                                       transform.m31, transform.m32, transform.m33, transform.m34,
                                       transform.m41, transform.m42, transform.m43, transform.m44);

    return matrix;
} 
```

使用类似的东西

```
CALayer *layer = [CALayer layer];
CATransform3D transform = layer.transform;
GLKMatrix4 matrix4 = *(GLKMatrix4 *)&transform; 
```

称为类型双关语。除非您了解其工作原理，否则不应使用它。您不能将 CATransform3D 键入到 GLKMatrix4，因为它们的数据结构在内存中是不同的。

参考链接：[类型双关语](http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html)

GLKMatrix4

```
union _GLKMatrix4
   {
      struct
      {
      float m00, m01, m02, m03;
      float m10, m11, m12, m13;
      float m20, m21, m22, m23;
      float m30, m31, m32, m33;
};
   float m[16];
}
typedef union _GLKMatrix4 GLKMatrix4; 
```

CATransform3D

```
struct CATransform3D
{
CGFloat m11, m12, m13, m14;
CGFloat m21, m22, m23, m24;
CGFloat m31, m32, m33, m34;
CGFloat m41, m42, m43, m44;
};
typedef struct CATransform3D CATransform3D; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-25T21:48:38.450

像这样的东西应该工作：

```
CATransform3D t;
GLKMatrix4 t2 = *((GLKMatrix4 *)&t);
t = *((CATransform3D *)&t2); 
```

假设`CATransform3d`并`GLKMatrix4`具有相同的列/行设置。（我认同）

# iphone - 应用程序只能在 iPhone 上运行

> ID：12175472
> 
> 赞同：0
> 
> 时间：2012-08-29T10:05:13.587
> 
> 标签：iphone, app-store

我们已成功将我们的应用程序上传到应用商店，现在可以出售并在 iTunes 中列出。但问题是它显示它也将在 iphone / ipad / ipod 上运行，而我们的应用程序应该只在 iphone 上运行。

我们检查了 info.plist 文件，其中将目标设备系列显示为 iPhone。

编辑 1：我们的应用需要发送短信。因此，我们不希望我们的应用程序在无法发送 SMS 的设备上运行。

请让我知道我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:06:48.060

每个 iPhone 应用程序都必须在 iPad 上运行。如果它没有说“通用”，那么你很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:09:02.353

理想情况下，每个应用程序都应该在 iPad 上运行，但在提交应用程序时，您还可以在 iTunes Connect 中设置目标设备系列。请访问您的 iTunes Connect 门户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T23:53:39.367

Apple 的指导方针可能会说，他们将拒绝不在 iPad 上以 1x/2x 兼容模式运行的 iPhone 应用程序。

# mysql - 使用mysql进行简单的流控制

> ID：12175474
> 
> 赞同：1
> 
> 时间：2012-08-29T10:05:23.430
> 
> 标签：mysql, sql

我有一个简单的例子来描述我的问题。可以说我的表格结构是这样的=>

```
create table A(
id INT(3) NOT NULL AUTO_INCREMENT PRIMARY_KEY,
act DATETIME,
act_reset INT(1) DEFAULT 0); 
```

我想编写查询，条件是如果 act_reset 是`true`（所以如果不是 0）则更新列`act`DATETIME。

我试过这样=>

```
IF act_reset THEN UPDATE A SET act=now() WHERE id=1 END IF; 
```

但是这种语法无效，我必须如何用一个查询来编写这个条件？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:07:37.223

```
UPDATE A SET act=now() WHERE id=1 AND act_reset <> 0 
```

这是您要查找的查询吗？

在 MySQL 中使用 If 语句：

```
IF act_reset <> 0 THEN 
  UPDATE A SET act=now() WHERE id=1 
END IF; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:08:24.117

在这种情况下，您不需要使用`CASE`语句或语句。`IF`只需将条件`If act_reset`移至`WHERE`子句，如下所示：

```
UPDATE A 
SET act = now() 
WHERE id = 1
AND act_reset <> 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T10:11:38.590

假设`act_reset`是一个变量名。你忘了`semicolon`，你还需要使用`DELIMITER`

```
DELIMITER $$
IF act_reset <> 0 
THEN 
    UPDATE A SET act=now()
    WHERE id = 1 $$ 
END IF$$
DELIMITER ; 
```

如果`act_reset`是列名，那么在这种情况下，使用 IF 子句是不可能的，而是试试这个：

```
 UPDATE A 
    SET act = now()
    WHERE id = 1 AND
          act_reset <> 0; 
```

# php - PHP ODBC 扩展 - 数据源名称太长

> ID：12175479
> 
> 赞同：0
> 
> 时间：2012-08-29T10:05:47.867
> 
> 标签：php, linux, odbc, datasource, redhat

我一直在尝试将 PHP 的 ODBC 扩展安装到我们的一台服务器（Redhat）上，我认为它已正确安装，但现在当我尝试测试连接时，我收到有关数据源名称的错误消息太长...听起来很容易解决，但我无法解决..如何..或在哪里。

基本上这些是我目前的设置：

```
# odbcinst -j
DRIVERS............: /etc/odbcinst.ini
SYSTEM DATA SOURCES: /etc/odbc.ini
FILE DATA SOURCES..: /etc/ODBCDataSources
USER DATA SOURCES..: /root/.odbc.ini
SQLULEN SIze.......: 4
SQLSETPOSIROW......: 2 
```

我在 odbcinst.ini 中定义了我的 MySQL 驱动程序，如下所示：

```
[MySQL]
Description    = ODBC for MySQL
Driver         = /usr/lib/libmyodbc5.so
Setup          = /usr/lib/libodbcmyS.so
FileUsage      = 1 
```

我已经仔细检查过，驱动程序和设置路径正确并指向正确的文件。

所以现在我试图通过编辑 odbc.ini 文件来添加系统数据源。我已经尝试了各种不同的格式，遵循来自不同站点的示例，例如

[http://developer.mindtouch.com/en/kb/Using_the_ODBC_extension_on_Linux#Install_unixODBC](http://developer.mindtouch.com/en/kb/Using_the_ODBC_extension_on_Linux#Install_unixODBC)

[http://dev.mysql.com/doc/refman/5.0/en/connector-odbc-configuration-dsn-unix.html](http://dev.mysql.com/doc/refman/5.0/en/connector-odbc-configuration-dsn-unix.html)

正如你所看到的，我已经评论了其中一些并尝试了不同的：

```
;[mytest]
;driver = MySQL
;Database = moodle
;Server = localhost
;Socket = /var/lib/mysql/mysql.sock

;[mynew]
;Description = MySQL
;Driver      = MySQL
;SERVER      = localhost
;USER        = root
;PASSWORD    = 
;PORT        = 3306
;DATABASE    = moodle

[Default]
Driver       = /usr/lib/libmyodbc5.so
Description  = Connector/ODBC 5 Driver DSN
SERVER       = localhost
PORT         =
USER         = root
Password     =
Database     = moodle
SOCKET       = 
```

然而，每当我跑

```
isql -v 
```

看看是否有任何问题，我总是得到：

```
[IM010][unixODBC][Driver Manager]Data source name too long
[ISQL]ERROR: Could not SQLConnect 
```

我对错误的谷歌搜索似乎只会为在 ASP 之类的东西中有连接字符串的人找到结果，而没有关于如何让它以这种方式在服务器上工作的信息......

谁能给我任何建议/帮助？

如果您需要更多信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:51:06.277

启动时，`isql`您必须指定手册页中定义的数据源名称。

> 概要
> 
> ```
>  isql DSN [UID [PWD]] [options] 
> ```
> 
> 选项
> 
> ```
>  DSN    Name of the data source you want to connect to. 
> ```

鉴于您在 中的配置`/etc/odbc.ini`，您将启动`isql -v Default`以测试您的连接。在配置文件中，数据源名称是您在括号中定义的名称。

# html - 如何在没有表格标签的html表单中创建垂直单选按钮组

> ID：12175483
> 
> 赞同：19
> 
> 时间：2012-08-29T10:06:11.793
> 
> 标签：html

如何在 html 表单中创建垂直单选按钮组而不是水平按钮组？

我不想为此使用表格。是否有任何可用的属性/属性？

任何类型的帮助/建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-29T10:26:39.507

您可以通过三种方式做到这一点：两种使用 CSS 或 1 使用 oldschool html：

1) 首选方法是使用 CSS 类。（即添加*class="block"*到元素，然后*.block {display:block}*到您的样式表。

2）内联样式：将*style="display:block"*添加到元素中。

3）HTML：在radio元素之后添加一个硬中断（br）元素（或将每个元素括在一个div或p元素中。）

例子：

```
<style type="text/css">
   .block {
      display: block;
   }
</style> 
```

...

```
<form>
<label class="block"><input type="radio" name="radgroup" value="A">Option A</label>
<label class="block"><input type="radio" name="radgroup" value="B">Option B</label>
<label class="block"><input type="radio" name="radgroup" value="C">Option C</label>
<label class="block"><input type="radio" name="radgroup" value="D">Option D</label>
</form> 
```

# c# - 使用 C# 删除 HTML 标记

> ID：12175484
> 
> 赞同：0
> 
> 时间：2012-08-29T10:06:13.420
> 
> 标签：c#, html, regex

我在使用正则表达式准备字符串时遇到问题。我写了这个函数：

```
 private String parseAnswer(String res)
    {
        String[] pattern = new String[16] { "<head[^>]*?>.*?</head>", "<style[^>]*?>.*?</style>", "<script[^>]*?.*?</script>", "<object[^>]*?.*?</object>", "<embed[^>]*?.*?</embed>", "<applet[^>]*?.*?</applet>", "<noframes[^>]*?.*?</noframes>", "<noscript[^>]*?.*?</noscript>", "<noembed[^>]*?.*?</noembed>", "</?((address)|(blockquote)|(center)|(del))", "</?((div)|(h[1-9])|(ins)|(isindex)|(p)|(pre))", "</?((dir)|(dl)|(dt)|(dd)|(li)|(menu)|(ol)|(ul))", "</?((table)|(th)|(td)|(caption))", "</?((form)|(button)|(fieldset)|(legend)|(input))", "</?((label)|(select)|(optgroup)|(option)|(textarea))", "</?((frameset)|(frame)|(iframe))" };
        String[] replacement = new String[16] { " ", " ", " ", " ", " ", " ", " ", " ", " ", "\n$0", "\n$0", "\n$0", "\n$0", "\n$0", "\n$0", "\n$0" };

        for (int i = 0; i < pattern.Length; i++)
        {
            res = Regex.Replace(res, pattern[i], replacement[i]);
        }

        return res;
    } 
```

此函数获取 HTML 代码作为输入。我想清除一些 HTML 标签。为此，我准备了一系列模式。但似乎我的函数没有清除 HTML 代码。我的模式是我要删除的 HTML 标记列表。一些我没有删除但只添加\n的标签。

你能帮我解决这个正则表达式吗？或者给我任何图书馆来完成它的任务？我的目标是删除 HTML 标签以仅接收要解析的网站文本。

编辑：好的，我可以使用 HTMLAgilityPack，但我有几个问题： htmlDoc.LoadHtml(URL); - 我需要将结果转换为 UTF8 -> HTMLAgilityPack 有任何转换功能吗？其次，通常我想将 InnerText 的结果放入 Json 并将其发送到 Javascript。如何删除 Javascript 中禁止的字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T10:09:10.057

`Regex`往往是[解析 HTML 的糟糕选择](https://stackoverflow.com/a/1732454/1583)，尤其是来自不同来源的解析。

我建议使用专门构建的解析器，例如[HTML Agility Pack](http://html-agility-pack.net/?z=codeplex)：

> 什么是 Html Agility Pack (HAP)？
> 
> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

源代码下载附带了一些示例项目，这些项目记录了如何将库用于不同的任务。

# php - 在闰年php中获取日期

> ID：12175485
> 
> 赞同：1
> 
> 时间：2012-08-29T10:06:15.137
> 
> 标签：php, date

我想将 59 转换为 2012 年 2 月 29 日。我已经知道今年是 2012 年。我尝试以下代码。但它给了 2012-mar-01。

```
$string = '59 2012';
$date1 = date_create_from_format('z Y', $string);
$date_time = date_format($date1, 'Y-m-d');
echo $date_time; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:11:21.757

尝试：

```
echo date('Y-m-d', strtotime(date('Y-01-01')) + 59 * 86400); 
```

***更新：***

您的代码中的问题是因为`z`从 开始`0`，所以您需要减去`1`。

```
$date1 = date_create_from_format('z', 59 - 1);
$date_time = date_format($date1, 'Y-m-d');
echo $date_time; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:08:41.387

您可以[`strtotime()`](http://www.php.net/strtotime)改用：

```
echo date('Y-m-d', strtotime('2012-01 +59 day')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-27T01:38:27.903

我以前遇到过这个问题，这是我想出的解决方案：

```
/**
 * Get date if leap year
 * 
 * @param int $year z date format
 * @param int $date Y date format
 * 
 * @return object|null
 */
private function getLeapYearDate($year, $date)
{
    if ($date >= 1 && $date <= 59) {
        return date_create_from_format('z', $date - 1);
    } else if ($date == 60) {
        return date_create($year . '-02-29');
    } else if ($date >= 61 && $date <= 365) {
        return date_create_from_format('z', $date - 2);
    } else if ($date == 366) {
        return date_create($year . '-12-31');
    }

    return null;
} 
```

希望这可以帮助！祝你有美好的一天...

# java - 要在 struts config xml 文件中使用 *.properties 中设置的占位符

> ID：12175487
> 
> 赞同：0
> 
> 时间：2012-08-29T10:06:19.190
> 
> 标签：java, struts2

我有一个 struts2 配置文件，并且根据属性设置 URL 时遇到问题。

```
<action name="ABC" class="myAction" method="myMethod" >
            <result name="direct" type="redirectAction">
                <param name="namespace">/navigate</param>
                <param name="actionName">logout</param>
            </result>
            <result name="nonDirect" type="redirectAction">{url.set.in.properties}</result>
        </action> 
```

为什么我需要那个 - 因为这个 URL 对于不同的环境（QA、UAT、prod 等）可能不同。

那么是否可以在 struts 配置中使用属性设置（例如我们在 spring 上下文文件中使用它）？

另一个问题是 URL 应该是全局的，例如“www.google.com”。目前它重定向到错误的网址“http://localhost/package_name_here/http://www.goggle.com”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:17:10.913

您可以使用其 getter 和 setter 在您`myAction`的属性`myRedirect`中设置，使用属性 (with `getText(...)`) 设置它，然后在`struts.xml`.

**我的行动**

```
class myAction extends ActionSupport {
    ...
    private String myRedirect; // TODO: Getters and setters
    ...
    public String execute () {
        ...
        myRedirect = getText('url.set.in.properties');
        ...
    }
} 
```

然后在 struts.xml 中放置一个类型`redirect`为重定向到绝对 url 的结果：

**struts.xml**

```
...
<action name="ABC" class="myAction" method="myMethod" >
   <result type="redirect">
       <param name="location">${myRedirect}</param>
   </result>
</action>
... 
```

# c# - 在 CommentRangeStart 和 CommentRangeEnd 之间获取 OpenXmlElements

> ID：12175491
> 
> 赞同：6
> 
> 时间：2012-08-29T10:06:41.387
> 
> 标签：c#, openxml, openxml-sdk

我想做的是在 a`CommentRangeStart`和相应的`CommentRangeEnd`.

我尝试了两种方法来实现这一点，但是问题是`CommentRangeEnd`不需要与开始处于同一水平。它可以嵌套在子元素中，请参见下面非常简单的结构（注意这不是正确的打开 xml，它只是为了展示一般想法）。

```
<w:commentstart/>
<w:paragraph>
  <w:run />
  <w:commentend />
</w:paragraph> 
```

我尝试过的两个项目如下：首先：我写了一个可枚举，它返回项目直到结束

```
public static IEnumerable<OpenXmlElement> SiblingsUntilCommentRangeEnd(CommentRangeStart commentStart)
{
    OpenXmlElement element = commentStart.NextSibling();

    if (IsMatchingCommentEnd(element, commentStart.Id.Value))
    {
        yield break;
    }

    while (true)
    { 
        yield return element;
        element = element.NextSibling();

        // Check that the item 
        if (element == null)
        {
            yield break;
        }

        if (IsMatchingCommentEnd(element, commentStart.Id.Value))
        {
            yield break;
        }
    }
}

public static bool IsMatchingCommentEnd(OpenXmlElement element, string commentId)
{
    CommentRangeEnd commentEnd = element as CommentRangeEnd;
    if (commentEnd != null)
    {
        return commentEnd.Id == commentId;
    }
    return false;
} 
```

第二：然后意识到开始和结束不在同一水平上的问题，我继续四处寻找，我发现[Eric Whites 回答了处理书签元素之间的元素](https://stackoverflow.com/a/7363130/560237)，我为我的示例重新安装了它，但仍然是开始和结束的问题end 没有相同的父母（即在同一级别）是一个问题，我不能使用它。

有没有更好的方法来看待这个我正在寻找一种处理元素的方法，因为我需要处理正在评论的文本。

**编辑：** 澄清我想要实现的目标：我正在使用 word 编辑的文档，并在文档中添加评论.

**编辑 2：** 我已经提出了我目前正在考虑的工作版本，但我的问题是它可能非常脆弱，与 Word 不同的用户组合。这也适用于 xml，这不是一个真正的问题，但可能希望更改为 OpenXML SDK。目前看起来我需要解析整个文档来获取我需要的项目，而不是使用 1 个特定的评论。 [https://github.com/mhbuck/DocumentCommentParser/](https://github.com/mhbuck/DocumentCommentParser/)

遇到的主要问题：`CommentRangeStart`and`CommentRangeEnd`可以在 XML 文档中的不同嵌套中。根节点可能是唯一相似的祖先元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T19:40:52.543

您可以尝试使用`Descendants<T>()`方法来枚举给定类型的节点的所有后代。因此，您的代码可能看起来与此类似（我已经编写了它，但没有使用`yeld`使其更具可读性；））：

```
public static IEnumerable<OpenXmlElement> SiblingsUntilCommentRangeEnd(CommentRangeStart commentStart)
{
    List<OpenXmlElement> commentedNodes = new List<OpenXmlElement>();

    OpenXmlElement element = commentStart;

    while (true)
    {
        element = element.NextSibling();

        // check that the item exists
        if (element == null)
        {
            break;
        }

        //check that the item is matching comment end
        if (IsMatchingCommentEnd(element, commentStart.Id.Value))
        {
            break;
        }

        //check that there is a matching element in the current element's descendants
        var descendantsCommentEnd = element.Descendants<CommentRangeEnd>();
        if (descendantsCommentEnd != null)
        {
            foreach (CommentRangeEnd rangeEndNode in descendantsCommentEnd)
            {
                if (IsMatchingCommentEnd(rangeEndNode, commentStart.Id.Value))
                {
                    //matching range end element found in current element's descendants
                    //an improvement could be made here to manually select descendants before CommentRangeEnd node
                    break;
                }
            }
        }

        commentedNodes.Add(element);
    }

    return commentedNodes;
} 
```

正如其中一条评论所标记的，如果它`CommentRangeEnd`在当前元素的后代中找到元素，它现在就结束了。

我还没有测试过这段代码，所以如果你有任何问题，请在评论中告诉我。

请注意，如果开始元素在文档的层次结构中比结束元素更深，则此方法将不起作用。在某些情况下，它也不会返回评论中的某些内容。如果您需要它，我稍后可以使用替代解决方案来更新答案以处理这种情况。还请解释为什么您需要找到这些评论，因为也许可以使用另一种方法。

# ios - 提示用户在 iPad 上启用 SMS

> ID：12175494
> 
> 赞同：0
> 
> 时间：2012-08-29T10:06:50.423
> 
> 标签：ios, ipad

我`MFMessageComposeViewController`用来发送消息。我`canSendText`在发送短信之前使用。但是，如果`canSendText`返回 false，我想带用户到 iPad 中的设置-> 消息，以便他可以打开消息。是否有 URL 方案或其他方式我可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:10:16.417

这可能是 iOS 5.0-5.0.1 使用`prefs:root=`url 方案。但是，Apple 在 5.1 中迅速删除了此功能。对不起，你的运气不好。我们能做的最好的事情就是继续在[Radar](http://openradar.appspot.com/10198949)上提交错误报告，要求回复此功能。

**编辑：**根据我的发现，有一种方法仍然可以在 5.1+ 中为 Twitter 设置执行此操作，这也可能适用于消息，只要消息控制器像 twitter 控制器那样符合 UIAlertView 委托（个人不是确定这个），但它绝对不适用于其他任何东西。也许你毕竟很幸运！

[http://goto11.net/programmatically-open-twitter-settings-on-ios-5-1/](http://goto11.net/programmatically-open-twitter-settings-on-ios-5-1/)

# sql - 实体框架 5 中是否有任何“READPAST”？

> ID：12175500
> 
> 赞同：2
> 
> 时间：2012-08-29T10:07:06.860
> 
> 标签：sql, entity-framework

有没有办法在实体框架 LINQ 查询中使用/发出 SQL Server READPAST 表提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T10:25:30.893

EF 不支持表提示。如果您需要使用表提示编写查询，则必须直接使用 SQL 或使用此类查询映射存储过程/表值函数。

# ruby-on-rails-3 - Ruby on Rails：如何为 DB（user_profile）中的同一列实现 2 个可排序列（学生、导师）？

> ID：12175505
> 
> 赞同：0
> 
> 时间：2012-08-29T10:07:15.413
> 
> 标签：ruby-on-rails-3

为了在 Rails 中实现“可排序的列”，我以 Ryan Bates 在[Railscast 228](http://railscasts.com/episodes/228-sortable-table-columns)中构建的框架为例。

我有一个应用程序，其中一位“导师”在一个“课堂”中教一位“学生”。两个人（导师、学生）的识别数据（名字、姓氏、出生日期）保存在单个数据库列“user_profiles”中。

为了可视化所有“课程”的日程安排，应用程序呈现了一个表格：Pupil | 老师 | 班级名称 | 开始 | 结尾。

虽然控制器（索引方法）中的“连接”逻辑清晰简单，但在视图（ V ）中，您需要为“可排序”指定 DB 列的名称。这里我遇到了一个模棱两可的情况：

%th

= 可排序（'瞳孔'，'user_profiles.last_name'）

%th

= 可排序（'导师'，'user_profiles.last_name'）

%th

班级名称

%th

```
 ... 
```

您知道如何指导 Rails 区分两者吗？

（当点击“Pupil”时，从属于“Pupil”的“user_profiles.last_name”中对那些元素进行排序。“mentor”的同义词）

谢谢， 西普里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:34:06.387

首先，我建议你使用[jqGrid](http://www.trirand.com/blog/jqgrid/jqgrid.html) jquery 插件进行排序。它易于集成和使用。从 UI 设计的角度来看，它也是可取的。

另一件事，您应该使用不同的列，或者您可以使用`alias`或者您可以对一组列应用排序。

# c# - Metro 应用程序中用于 Windows Azure 服务管理的客户端证书

> ID：12175512
> 
> 赞同：6
> 
> 时间：2012-08-29T10:07:38.870
> 
> 标签：c#, microsoft-metro, windows-runtime

我正在尝试连接到 Windows Azure 服务管理 API。我必须提供我之前上传到我的 Azure 门户的证书。在 .NET 中，这非常简单，[详见此处](http://msdn.microsoft.com/en-us/library/windowsazure/ee460782.aspx)。但是，在 Metro 中，您不能手动将证书附加到请求中。在微软论坛上，我发现了这个：

```
HttpClientHandler aHandler = new HttpClientHandler();
aHandler.ClientCertificateOptions = ClientCertificateOption.Automatic;

HttpClient aClient = new HttpClient(aHandler);
HttpResponseMessage aResp = await aClient.GetAsync("https://[azure service management uri]"); 
```

除了赋予应用程序使用共享证书的能力外，这应该选择一个证书或向用户提供一个选择证书的选项。证书在我的个人商店中，我什至尝试将证书包含在包清单中，但没有任何效果。看来它只是没有在请求中包含证书。

在 Metro 应用程序中调用需要证书的基于 REST 的 API 的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T07:07:08.830

我想我对此有一个答案。请检查您用于验证请求的证书。该证书中需要有两件事：

1.  确保启用“客户端身份验证”作为证书用途之一。

2.  确保证书具有为其指定的“OID”。

我写了一篇关于在 Windows 8 应用程序中使用 Windows Azure 服务管理 API 的博客文章，您可以在此处阅读：http: [//gauravmantri.com/2012/09/08/sumption-windows-azure-service-management-api-in -a-windows-8-application/](http://gauravmantri.com/2012/09/08/consuming-windows-azure-service-management-api-in-a-windows-8-application/)。我已经讨论了这两个问题，然后还有一些问题。

希望这可以帮助。

# ajax - jquery ajax - 如何使用“完成”回调？

> ID：12175513
> 
> 赞同：1
> 
> 时间：2012-08-29T10:07:43.050
> 
> 标签：ajax, jquery

根据 jquery ajax 文档[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)，有 5 个“回调队列”，它们是 beforeSend、error、dataFilter、success 和 complete。

但是，所有示例都使用 .done() 似乎根本没有记录。

“完成”不是回调队列吗？它在哪里记录？.done() 和 .complete() 有什么区别？我应该使用哪个？

谢谢

# actionscript-3 - AS3 MouseEvent.RIGHT_MOUSE_UP 不起作用

> ID：12175515
> 
> 赞同：2
> 
> 时间：2012-08-29T10:07:44.863
> 
> 标签：actionscript-3, right-click, flash-cs6

我正在尝试创建一个布尔值，用于检查鼠标右键是否被按下。使用鼠标左键此方法有效，但使用鼠标右键布尔值保持为真，我该如何解决这个问题？

```
public var mDown:Boolean = false;
public var rmDown:Boolean = false;

stage.addEventListener(MouseEvent.MOUSE_DOWN, mouseHandler);
stage.addEventListener(MouseEvent.MOUSE_UP, mouseHandler);
stage.addEventListener(MouseEvent.RIGHT_MOUSE_DOWN, mouseHandler);
stage.addEventListener(MouseEvent.RIGHT_MOUSE_UP, mouseHandler);

private function mouseHandler(e:MouseEvent){
    switch(e.type){
        case MouseEvent.MOUSE_DOWN: mDown = true;
        break;
        case MouseEvent.MOUSE_UP: mDown = false;
        break;
        case MouseEvent.RIGHT_MOUSE_DOWN: rmDown = true;
        break;
        case MouseEvent.RIGHT_MOUSE_UP: rmDown = false;
    }
} 
```

我的 Flash 导出到 Flash Player 11.2！也许我可以尝试使用 RIGHT_CLICK？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T12:41:34.197

这似乎是播放器版本问题。右键单击编译，但在 11.2 运行时静默失败。它在 11.4 中编译并运行良好。我在 Flash CS6 中进行了测试，我的播放器版本是 WIN 11,2,202,228，并且得到了与您报告的完全相同的无声故障。

然后我在 FlashDevelop 中进行了测试（将鼠标右键枚举替换为“rightMouseDown”和“rightMouseUp”，因为我的版本上的完成无法识别新的枚举事件值），并使用投影仪调试器版本 WIN 11,4,402,265 和鼠标右键进行了测试down 和 up 都运行良好。在 Win 7 机器上，它在 IE、Firefox 和 Chrome 的最新插件和活动 X 播放器版本 11.4.* 中也能正常工作。

我不确定您使用的是什么开发环境，如果是 Flash Pro CS*，那么我不确定您如何升级播放器版本，但使用 FlashBuilder 或 FlashDevelop 应该很简单。而且我确定您已经知道您可以使用它`flash.system.Capabilities.version`来仔细检查您正在测试的播放器版本。当我系统中的 .swf 文件关联通常使用 11.4 调试器时，我很惊讶地发现 CS6 仍然使用 11.2。

# php - 如何同时使用 proc_open 生成两个进程？

> ID：12175518
> 
> 赞同：0
> 
> 时间：2012-08-29T10:07:57.817
> 
> 标签：php, proc-open

```
<?php
$ds=array(1 => array("pipe", "w"));
$ds1=array(1 => array("pipe", "w"));
proc_open("notepad.exe", $ds, $pipes);
proc_open("notepad.exe", $ds1, $pipes);
?> 
```

我只想一次创建两个notepad.exe进程，但是没有创建第二个进程，直到第一个notepad.exe被杀死。如何一次创建多进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:43:49.640

正如杰克建议的那样，您可以使用 start 来启动一个过程并忘记它；如果您的应用程序 win 在 unix 下运行 - [pcntl_fork](http://php.net/pcntl_fork)可以帮助您创建多个线程 - 并从它们中生成多个进程。

# wcf - 使用 svcutil 生成代理期间的 DataContract 属性名称

> ID：12175520
> 
> 赞同：0
> 
> 时间：2012-08-29T10:08:09.743
> 
> 标签：wcf, svcutil.exe

是否有任何开关指示`svcutil`生成`DataContract`具有代码中定义的名称的属性？例如，当我创建一个使用以下内容的代理时`DataContract`：

```
[DataContract(Namespace = "http://schemas.mynamespace.com/2012/08")]
public class MyDataContract
{
    [DataMember(IsRequired = true, Order = 0)]
    private int _id;

    public int Id
    {
        get { return _id; }
        set { _id = value; }
    }
} 
```

我`DataContract`在代理生成的类上得到了这个：

```
public partial class MyDataContract : object
{                
    private int _idField;

    [System.Runtime.Serialization.DataMemberAttribute(IsRequired=true)]
    public int _id
    {
        get
        {
            return this._idField;
        }
        set
        {
            this._idField = value;
        }
    }
} 
```

前 3 个属性的 order 属性`DataMemberAttribute`也总是被省略，并且 a`MessageContract`省略了`IDisposable`实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:20:45.217

在 DataMember 属性上使用 name 属性

如：

```
[DataMember(Name="myname")] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:21:26.870

好吧，我不能对省略的 发表评论`order`，但我可以帮助解决其余的问题：

*   通常在`DataMember`属性上指定属性，而不是在字段上。数据契约本身不区分属性和字段，但它知道名称、类型、是否是强制性的等等。

*   补充：[克里斯](https://stackoverflow.com/users/1129497/chris)所说的：有了`[DataMember(Name="whateveryouwant")]`你就可以设置一个不同于字段/属性名称的名称。虽然我不喜欢这样的用法，但它在重构代码时很有帮助，但仍然保持 API 兼容。

*   只有其他`DataContract`（和一些本质上支持的）类型被序列化到消息/从消息序列化。 [IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)似乎不是一个。

*   `IDisposable`序列化a的继承`MessageContract`没有任何意义。消息契约是 SOAP 消息的 .NET 表示。除了提供 SOAP 消息 XML 中的内容和可访问的 .NET 类型之间的 1:1 映射外，它实际上没有其他事情可做。

    消息是 a 的一部分`ServiceContract`，因为它指定必须将哪种类型的消息发送到某个操作才能成为有效调用，而另一个（响应）消息合约指定操作返回的数据将如何构造。没有其他的; 它是一个数据聚合。

如果您想在客户端捕获服务操作的结果，并且为方便起见，在超出范围（或例如从服务注销）时自动发回消息，您将必须在客户端实现此功能. 但是请注意，服务*不得*要求发生这种情况（由于连接丢失、崩溃等）。

# php - 从 Ajax 脚本重定向 Javascript 页面

> ID：12175522
> 
> 赞同：0
> 
> 时间：2012-08-29T10:08:26.960
> 
> 标签：php, javascript, ajax

由于某些不可预见的原因，我无法为我的页面使用 *.php 扩展名。我需要在页面中放置条件重定向。

我计划使用 *.html 和 javascript/Ajax 来调用一个 PHP 来评估条件并相应地发回一个重定向命令。

正在评估条件，但是我不清楚如何从这个内部 PHP 发出重定向命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:14:31.473

**您实际上可以使用 .htaccess 将所有 .html 文件映射到 .php。**

如果这对您不起作用，您的逻辑应如下所示：

PHP：

```
echo json_encode(array("redirect_url" => $url)); 
```

带有 jQ​​uery 的 Javascript（假设您需要 AJAX 来重定向）：

```
$.getJSON("PHP/Controller/Url", function(data) {
    window.location.href = data.redirect_url;
}); 
```

Javascript（如果您只是提供静态 html 文件）

```
<script>
window.location.href = "redirect_url";
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:14:12.347

您可以使用

```
window.location = "http://new-url" 
```

或者

```
window.location.href = "http://new-url" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:14:32.153

在 JS 中，

```
location.assign("http://www.google.com") 
```

会将您当前的框架重定向到 Google。

所以不要在 PHP 中发送重定向标头，在响应正文中发送“标志”并使用 JS 进行重定向。

# php - Zend Rest Server 没有读取受保护的对象变量

> ID：12175527
> 
> 赞同：0
> 
> 时间：2012-08-29T10:08:47.310
> 
> 标签：php, web-services, zend-framework

我是 zend 框架的新手，我正在研究 REST Web 服务 API。虽然我的模型输出是受保护的对象变量`Zend_Rest_Server()`。它无法处理并引发错误。

```
Array
(
    [0] => Webservices_Models_Token Object
        (
            [_id:protected] => 1
            [_token_key:protected] => 123
            [_mapper:protected] => 
        )
) 
```

虽然为什么模型返回上述结果，但我遇到了错误。我从 zend 模型映射器得到了这个结果。

> 哦亲爱的！
> 
> 您似乎是误入了这里，或者您要查找的页面已被删除，无法再显示。
> 
> 也许您正在寻找在我们网站最近改进期间移动的页面。发生错误** 这需要在上线前更改异常信息：
> 
> 消息：无效字符错误

波纹管输出工作正常并从`$this->_server = new Zend_Rest_Server()`

```
Array
(
    [0] => stdClass Object
        (
            [id] => 1
            [token_key] => 123
        )
) 
```

谁能告诉我有什么问题？
我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:51:52.137

这对我有用。**toArray()**

```
 $select  =  $this->getDbTable()->select()->where($where);
  return $this->getDbTable()->fetchAll($select)->toArray(); 
```

谢谢。

# c# - 我是否正确理解此 MSIL 代码？

> ID：12175533
> 
> 赞同：17
> 
> 时间：2012-08-29T10:09:02.043
> 
> 标签：c#, .net, cil, il, ilasm

我在 C# 中有以下代码

```
// test.Program
private static void Main()
{
    int x = 5;
    int y = 100;
    Console.WriteLine(y + ", " + x);
} 
```

我正在阅读 IL 代码，我以前从未编写过汇编程序，所以我问我每行所做的是否正确。

```
.method private hidebysig static 
    void Main () cil managed 
{
    // Method begins at RVA 0x2058
    // Code size 33 (0x21)
    .maxstack 3 // maximum stack in this method is 3
    .entrypoint // method is initial entry point
    .locals init ( // reserves memory for x and y variables
        [0] int32 x, // x variable is reserved on position 0 of the stack
        [1] int32 y  // y variable is reserved on position 1 of the stack
    )
    IL_0000: ldc.i4.5     // integer of 4 bytes in size and the value of 5 is loaded onto the evaluation stack position 0
    IL_0001: stloc.0      // put evaluation stack position 0 into the stack position 0, the evaluation stack is emptied
    IL_0002: ldc.i4.s 100 // integer of 4 bytes in size and the value of 100 is loaded onto the evaluation stack position 0
    IL_0004: stloc.1      // put evaluation stack position 0 onto the stack position 1, the evaluation stack is emptied
    IL_0005: ldloc.1      // load stack position 1 into the evaluation stack position 0
    IL_0006: box [mscorlib]System.Int32 // box last valuetype placed on evaluation stack, replace valuetype with reference on evaluation stack position 0, do not empty stack
    IL_000b: ldstr ", "   // put reference to string on evaluation stack position 1
    IL_0010: ldloc.0      // load stack position 0 into the evaluation stack position 2
    IL_0011: box [mscorlib]System.Int32 // box last valuetype placed on evaluation stack, replace valuetype with reference on evaluation stack position 0, do not empty stack
    IL_0016: call string [mscorlib]System.String::Concat(object, object, object) // call Concat, pass values on evaluation stack, empty evaluation stack, put result of concat on evaluationstack
    IL_001b: call void [mscorlib]System.Console::WriteLine(string) // pass first value in evaluation stack
    IL_0020: ret         // return
} // end of method Program::Main 
```

我是否正确理解了这个程序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T10:13:25.947

差不多; 我要澄清的唯一一件事是盒子（IL_0006和IL_0011）是**特定于类型**的，所以它显式地构造了一个类型的盒子`int`（它不仅仅是“最后一个值类型”）。

此外，“空评估堆栈”具有误导性；这不太正确 - 例如，`call`消耗*给定数量的位置*- 它不会“清空”它。**从来没有**“空评估堆栈”语义 - 它总是“消耗一些值，放回一些值”（其中任何一个都可能为零）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T10:12:52.960

是的，您的理解几乎完全正确。一件事：IL_0010 不从堆栈加载，它从本地加载。（局部变量最终出现在运行时堆栈上，但在 IL 级别，它们被称为局部变量）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T10:14:43.593

这是正确的，尽管我会用一些不清楚的措辞争论一下，例如：

> 将评估堆栈位置 0 放入堆栈位置 0，评估堆栈被清空

我会说

> 将堆栈顶部的第 0 个条目放入堆栈变量第 0 个，然后弹出

只是因为我认为“不太正式”的措辞在大多数情况下更容易阅读，但否则，它似乎还可以。

编辑：嗯..事后我想说，没有像“堆栈”和“评估堆栈”这样的两件事。只有“堆栈”。堆栈可见部分开始的标记部分，带有局部变量的部分可以称为“槽”。我想对于 IL，您可以只说“局部变量 Nth”，通常一切都会很清楚，但我认为几个不同的变量可能会映射到同一个插槽，因此可能会引起一些混乱。此外，当您使用堆栈时，没有像“清空”这样的操作。仅推送/弹出具有明确指定数量的要复制的条目。

# wpf - 如果新的数据上下文等于（）以前的数据上下文，WPF 不会重新绑定

> ID：12175535
> 
> 赞同：1
> 
> 时间：2012-08-29T10:09:06.963
> 
> 标签：wpf, c#-4.0, data-binding

如[http://www.lhotka.net/weblog/DataRefreshInWPF.aspx所述](http://www.lhotka.net/weblog/DataRefreshInWPF.aspx)

WPF 控件有时不会重新绑定到新的数据上下文。特别是在使用实现`Object.Equals`来查看视图模型是否在逻辑上相等的视图模型时。这里的问题是，如果它在逻辑上等于前一个，则控件不会重新绑定到新的数据上下文。这会导致控件变得柔软，它们不会绑定到新的视图模型。

`DataContext`我通过首先将 设置为 a 来规避这个问题`new object()`。这可以确保控件重新绑定到新的数据上下文。但是，当视图模型包含另一个实现`Object.Equals`. 使用 a 绑定到该视图模型的视图`DataTemplate`不会重新绑定。我该如何解决这个问题？

显然 WPF 数据绑定应该使用`ReferenceEquals`而不是`Equals`..

**更新：**我现在通过实现子 ViewModels`IEquatable<T>`而不是覆盖来解决它`Object.Equals`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:34:49.723

我现在通过让子 ViewModel 实现 IEquatable 而不是覆盖 Object.Equals 来解决它。

# c# - 将 NTree 对象输出到 XML。

> ID：12175538
> 
> 赞同：0
> 
> 时间：2012-08-29T10:09:19.703
> 
> 标签：c#, xml-serialization, c#-3.0, linq-to-xml

我正在尝试按照[C# 中的 Tree 数据结构实现以下树结构类](https://stackoverflow.com/questions/66893/tree-data-structure-in-c-sharp)

```
delegate void TreeVisitor<T>(T nodeData);

class NTree<T>
{
    T data;
    LinkedList<NTree<T>> children;

    public NTree(T data)
    {
        this.data = data;
        children = new LinkedList<NTree<T>>();
    }

    public void addChild(T data)
    {
        children.AddFirst(new NTree<T>(data));
    }

    public NTree<T> getChild(int i)
    {
        foreach (NTree<T> n in children)
            if (--i == 0) return n;
        return null;
    }

    public NTree<T> getChild( T data )
{
    foreach (NTree<T> n in children)
        {
         if (n.data.Equals(data))
     {
         return n;
     }
    }
    return null;
    }

    public void traverse(NTree<T> node, TreeVisitor<T> visitor)
    {
        visitor(node.data);
        foreach (NTree<T> kid in node.children)
            traverse(kid, visitor);
    }        
} 
```

然后我想将对象的实例输出为 XML，但是我正在努力保持子/父层次结构到位

到目前为止我有

```
NTree<string> root = new NTree<string>( "Electronic" );
root.addChild( "Techno" );
root.getChild( "Techno" ).addChild( "Detroit" );
root.getChild( "Techno" ).addChild( "Gabba" );
root.addChild( "House" );
root.getChild( "House" ).addChild( "Deep" );
root.getChild( "House" ).addChild( "Ambient" );
root.getChild( "House" ).addChild( "Chicago" );

XElement treeAsXml = new XElement("Root");
root.traverse( root, new TreeVisitor<string>( this.ConvertNodeToXml ) );

private void ConvertNodeToXml( string nodeData )
{
 XElement node = new XElement( "Node" );
 node.Value = nodeData;
 this.treeAsXml.Add( node );
} 
```

这只是给了我：

```
<Root><Node>Electronic</Node><Node>House</Node><Node>Chicago</Node><Node>Ambient</Node><Node>Deep</Node><Node>Techno</Node><Node>Gabba</Node><Node>Detroit</Node></Root> 
```

我怎样才能正确输出这个，理想情况如下

```
<Node value="Electronic">
<Node value="Techno">
    <Node value="Detroit" />
    <Node value="Gabba" />
</Node> 
<Node value="House">
    <Node value="Deep" />
    <Node value="Ambient" />
    <Node value="Chicago" />
</Node>     
</Node> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:51:20.400

问题是您的委托没有上下文，它不知道它是父节点，也不知道它是子节点，因为它只获取节点的数据。您要么必须更改委托以包含某种类型的上下文，要么可以将其作为扩展方法：

```
public static class NTreeXmlHelper
{
    public static XElement TreeAsXml<T>(this NTree<T> node)
    {
        XElement element = new XElement("Node",
                                  new XAttribute("value", node.data));

        foreach (var child in node.children)
        {
            element.Add(TreeAsXml(child));
        }

        return element;
    }
} 
```

为此，您必须公开`children`和`data`属性。

要使用它，只需：

```
 NTree<string> root = new NTree<string>("Electronic");
        root.addChild("Techno");
        root.getChild("Techno").addChild("Detroit");
        root.getChild("Techno").addChild("Gabba");
        root.addChild("House");
        root.getChild("House").addChild("Deep");
        root.getChild("House").addChild("Ambient");
        root.getChild("House").addChild("Chicago");

        treeAsXml = root.TreeAsXml();
        Console.WriteLine(treeAsXml.Tostring()); 
```

# php - 从 ffmpeg shell_exec 命令中检索信息

> ID：12175539
> 
> 赞同：0
> 
> 时间：2012-08-29T10:09:19.793
> 
> 标签：php, audio, video, ffmpeg, shell-exec

我正在做以下事情

```
$output = shell_exec('/usr/local/bin/ffmpeg -i intro.mp3 2>&1'); 
echo "<pre>$output</pre>"; 
```

这输出

```
ffmpeg version 0.8.5, Copyright (c) 2000-2011 the FFmpeg developers
  built on Aug 20 2012 09:28:43 with clang 3.1 (tags/Apple/clang-318.0.61)
  configuration: --enable-nonfree --enable-gpl --enable-version3 --enable-postproc --enable-swscale --enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libtheora --enable-libfaac --enable-libxvid --enable-libx264 --enable-libvpx --enable-hardcoded-tables --enable-shared --enable-pthreads --disable-indevs --cc=clang
  libavutil    51\.  9\. 1 / 51\.  9\. 1
  libavcodec   53\.  7\. 0 / 53\.  7\. 0
  libavformat  53\.  4\. 0 / 53\.  4\. 0
  libavdevice  53\.  1\. 1 / 53\.  1\. 1
  libavfilter   2\. 23\. 0 /  2\. 23\. 0
  libswscale    2\.  0\. 0 /  2\.  0\. 0
  libpostproc  51\.  2\. 0 / 51\.  2\. 0
[mp3 @ 0x7f9481807c00] max_analyze_duration 5000000 reached at 5015510
Input #0, mp3, from 'intro.mp3':
  Metadata:
    album           : Frank 
    artist          : Amy Winehouse
    genre           : R&B
    title           : [Intro] Stronger Than Me
    track           : 01
    date            : 2008
  Duration: 00:03:54.71, start: 0.000000, bitrate: 230 kb/s
    Stream #0.0: Audio: mp3, 44100 Hz, stereo, s16, 160 kb/s
At least one output file must be specified 
```

我想获取信息以插入数据库专辑、艺术家、流派、标题等

但都是分开的

我可以通过执行以下操作来获得它们

```
$output = shell_exec('/usr/local/bin/ffmpeg -i intro.mp3 2>&1'); 

$edit = explode('  ', $output);
$edit = implode("@", $edit);
$edit = explode(':', $output);
echo "<pre>";
print_r($edit);
echo "</pre>"; 
```

然后运行

```
<?php echo $edit[9]; ?> 
```

ETC

但这似乎是获取值的一种非常糟糕的方式和令人讨厌的方式，有时输出会略有不同，这会与输出混淆。

最好的方法是什么，还是我坚持这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:43:59.263

使用 ffmpeg 检索元数据有更好的方法。

**1.**创建一个新`ffmpeg_movie`对象，例如

```
$movie = new ffmpeg_movie(String path_to_media, boolean persistent); 
```

**2.**像这样开始获取元数据：

```
$movie->getAuthor();
$movie->getGenre();
$movie->getAlbum(); 
```

[ffmpeg-php API 文档](http://ffmpeg-php.sourceforge.net/doc/api/ffmpeg_movie.php)中可用内容的列表。

**3.**庆祝美好时光。

# devise - 使用设计我想在注销时将旧会话中的一些值保存到新会话中

> ID：12175540
> 
> 赞同：1
> 
> 时间：2012-08-29T10:09:21.837
> 
> 标签：devise, ruby-on-rails-3.2

这是我的会议内容：

```
Session:
{
 "session_id"=>"0aee1c4fbb70c027099958aea9c06ddc",
 "should_activate_backbone"=>true, 
 "return_to"=>"/",
 "split"=>{"login_signup"=>"New"},   
 "_csrf_token"=>"xY/pVjP0Q2aQVbKO0WiEwkgmadEWOnV9n9EKvM+jJh4="
} 
```

我正在使用拆分进行 AB 测试。因此，如果用户注销，我想保留该变体。因此，在新会话中，我需要放回旧会话的这一部分：

```
"split"=>{"login_signup"=>"New"} 
```

我想在控制器中以某种方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:45:06.307

我设法使用 after_filter 重置新会话中的值

```
class Authentication::SessionsController < Devise::SessionsController
  after_filter :set_back_experiments, :only => [:destroy]
  def destroy
    @split = session[:split]
    super
  end
private

  def set_back_experiments
    session[:split] = @split
  end
end 
```

# javascript - JavaScript 正则表达式（带有 _- 的字母数字字符）

> ID：12175553
> 
> 赞同：1
> 
> 时间：2012-08-29T10:09:55.630
> 
> 标签：javascript, regex, alphanumeric

我在形成包含所有字母数字字符和一两个特定字符（例如 us`_`或`-`.

此表达式适用于所有字母数字字符`/^[0-9a-zA-Z]+$/`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:12:13.913

在方括号内添加特殊字符

```
/^[0-9a-zA-Z_-]+$/ 
```

要在 javascript 中使用此正则表达式，请使用此代码（`yourPhrase`是您检查的字符串与正则表达式）

```
var rexp = /^[0-9a-zA-Z_-]+$/
if(rexp.test(yourPhrase)){
    //code to handle the test
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T10:12:25.797

试试这个：

```
/^[0-9a-zA-Z-_]+$/ 
```

如果您在可以解释为范围（例如 _-）的位置输入破折号“-”，则表示在 ascii 表中匹配 _ 或以上的任何字符。

# c++ - 如何获取打开的文件路径

> ID：12175554
> 
> 赞同：0
> 
> 时间：2012-08-29T10:10:01.013
> 
> 标签：c++, filepath

嗨，任何人都可以帮我获得一个打开的文件路径。例如：如果我打开保存在 C:\NewFolder\Hello.txt 位置的文件，我需要从 C++ 代码中获取相同的文件路径。请帮帮我。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:11:00.343

首先以这种方式在您的标头中声明 fstream 库。

```
#include <fstream> 
```

然后为输入流创建一个对象。

```
ifstream read ; 
```

以这种方式打开文件。

```
read.open ("C:\NewFolder\Hello.txt") ; 
```

我想这就是你想通过打开文件路径说的。认为将文本文件保存在同一目录中会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:01:45.690

您可以使用 fstream 的 open() 函数打开驱动器上的文件，然后使用例如 getline() 读取文件。

在 Windows 上，您需要确保转义文件路径中的反斜杠，例如 C:\newFolder 将被编译器解释为 "C:" + newline + "ewFolder"，因此您需要改为编写 C:\\newFolder .

例子：

```
#include <fstream>
// [...]
ifstream in_file;
in_file.open("C:\\NewFolder\\Hello.txt");
if (in_file.good()) { // check to make sure the file was opened correctly
    char outbuf[1024];
    while (in_file.getline(outbuf,1024)) {
        // do something with outbuf
    }
} 
```

如果您尝试进行大量文件 I/O，您可能还想看看[boost::filesystem](http://www.boost.org/doc/libs/1_51_0/libs/filesystem/doc/index.htm)，它具有一定的初始学习曲线，但一旦掌握了它，处理文件/目录就变得非常容易.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:19:25.423

不清楚你在问什么。

如果你想知道你保存文件的位置，那么，你保存了它，不需要知道路径。在这种情况下，答案只是“记住你保存它的位置”。如果您想知道打开的文件的路径，这同样适用。你打开它，你怎么会*不*知道路径？

如果您想允许用户在 Windows 上直观地选择文件，请查找[`GetOpenFileName`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646927%28v=vs.85%29.aspx).

# actionscript-3 - Actionscript3 中自定义鼠标光标的 XY 限制

> ID：12175557
> 
> 赞同：0
> 
> 时间：2012-08-29T10:10:23.110
> 
> 标签：actionscript-3, flash, css-position, mousemove, restrictions

我有一个网站的交互式 5 秒动画介绍。预加载器和一个项目正在制作动画，我制作了第二个动画跟随鼠标光标，但它必须停留在舞台的某个部分内才能与屏幕上发生的其他动画一起工作。

我在电影剪辑上有这个代码

> 鼠标.hide();
> 
> potistiri.addEventListener(Event.ENTER_FRAME, newCursor);
> 
> 函数 newCursor(event:Event): void { potistiri.x = mouseX; potistiri.y = mouseY; }

我喜欢我说过我只想让它留在我想要的区域......

我发现这段代码给了我错误，因为如果和 else if 和 else if 正确，或者当我输入我的数字时它需要一个 rightparen...

> 如果（this._x>Stage.width）{
> 
> this._x=舞台宽度；
> 
> }否则如果（this._x<0）{
> 
> this._x=0; }

但我无法让它工作......我需要它在 x 208-656 和 y 140-336 之间移动，当它离开那个区域时，对象会停留在那里进行循环，你会看到正常的鼠标光标在屏幕的其余部分。

提前非常感谢......我把它留给这里的专家请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:20:59.437

您在 if/else 中使用的逻辑可以很好地将影片剪辑固定到特定区域，您的错误到底是什么意思？

关于再次看到正常的鼠标光标，您可以尝试使用相同的 if/else 检查来确定是否应该隐藏鼠标，即如果鼠标在该区域之外并且被隐藏，请调用 Mouse.show()，否则如果它在区域内并显示，请调用 Mouse.hide()。

# xml - SSIS中不同长度的XML索引

> ID：12175561
> 
> 赞同：0
> 
> 时间：2012-08-29T10:10:32.673
> 
> 标签：xml, ssis

我有以下 XML：

```
<?xml version="1.0" encoding="UTF-16"?>
<APIDATA xmlns="api-com">
<ORDER EngineID="1" OrderID="66" OtherInfo="yes"><INSTSPECIFIER InstID="27" SeqID="17"/></ORDER>
<ORDER EngineID="2" OrderID="67" OtherInfo="yes"><INSTSPECIFIER InstID="28" SeqID="18"/></ORDER>
<ORDER EngineID="3" OrderID="68"><INSTSPECIFIER InstID="29" SeqID="19"/></ORDER>
</APIDATA> 
```

我想在每个循环中为所有订单条目获取 SSIS 变量的所有 ID。到目前为止，我可以在 SSIS 的控制流中使用 ForeachLoop 获取数据，其中包括：

```
EnumerationType:  ElementCollection
OuterXPathString: //*[name() = 'ORDER']
InnerElementType: NodeText
InnerXPathString: @* | child::node()/@* 
```

然后在变量映射上，我遇到了问题，XML 的行长度不同。例如：第三行没有 OtherInfo 条目。如果我将变量映射到索引 4，这会导致循环因错误而终止。

这个问题的解决方案是什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:16:21.413

这次`@*[name() = 'EngineID'] | @*[name() = 'OrderID'] | child::node()/@*[name() = 'InstID'] | child::node()/@*[name() = 'SeqID']`用作 InnerXPathString。

# json - 找不到内容类型 application/json 和类型类 java.lang.String 的 MessageBodyReader

> ID：12175564
> 
> 赞同：22
> 
> 时间：2012-08-29T10:10:37.060
> 
> 标签：json, rest, jax-rs, jackson, resteasy

我正在使用带有杰克逊提供者的 RestEasy 客户端并收到上述错误

客户端代码是：

```
ClientRequest request = new ClientRequest(url);
request.accept(MediaType.APPLICATION_JSON);
ClientResponse<String> response = request.get(String.class);

if (response.getStatus() != 200) {
  throw new RuntimeException("Failed : HTTP error code : " + response.getStatus());
}

BufferedReader br =
  new BufferedReader(new InputStreamReader(new ByteArrayInputStream(response.getEntity().getBytes()))); 
```

`response.getEntity()`正在抛出`ClientResponseFailure`异常，错误为

```
Unable to find a MessageBodyReader of content-type application/json and type class java.lang.String 
```

我的服务器端代码如下：

```
@GET
@Path("/{itemId}")
@Produces(MediaType.APPLICATION_JSON)
public String item(@PathParam("itemId") String itemId) {
  //custom code

  return gson.toJSON(object);
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-06T14:28:59.690

您可以尝试将以下依赖项添加到您的 maven pom.xml 中。

```
 <dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jackson-provider</artifactId>
    <version>2.3.4.Final</version>
   </dependency> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T10:54:49.350

问题实际上是 RestEasy 无法找到 Jackson 提供程序。我必须通过以下代码手动注册它：

```
 ResteasyProviderFactory instance=ResteasyProviderFactory.getInstance();
    RegisterBuiltin.register(instance);
    instance.registerProvider(ResteasyJacksonProvider.class); 
```

一切正常。但我仍然对解决方案不满意，因为 Resteasy 应该扫描提供者并自动注册它们。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-14T12:04:50.077

```
Client client = ClientBuilder.newBuilder().register(ResteasyJacksonProvider.class).build(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-07T10:12:49.677

只需将**org.jboss.resteasy.plugins.providers.jackson.ResteasyJacksonProvider**行添加到 META-INF/services/javax.ws.rs.ext.Providers 文件中，即可解决问题。

此文件包含在 resteasy-jackson-providers.jar 中，但同一个文件也包含在另一个 jar 中，restasy-jaxrs.jar 并且对于使用这两个 jar 的可执行 jar 文件，它们不会合并！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-29T09:26:19.497

我有一个类似的问题，我意识到这个问题与`resteasy-jackson-provider`. 我刚从`3.0.4.Final`to移动`3.0.5.Final`，问题就消失了。

此外，我还意识到，如果我将第三行更改为以下结果，则结果是预期的，无需更改依赖项。

```
Response response = request.get(Object.class).toString(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-07T07:20:32.963

使我的代码工作的东西是我添加的：

```
<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jackson2-provider</artifactId>
    <version>&{resteasy.version}</version>
</dependency> 
```

除此之外，我不知道为什么，但似乎 resteasy 在创建客户端时没有初始化提供程序，这意味着它需要手动初始化它们：

```
 ResteasyProviderFactory instance=ResteasyProviderFactory.getInstance();
 RegisterBuiltin.register(instance);
 instance.registerProvider(ResteasyJackson2Provider.class); 
```

一般来说，运行客户端就足够了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T17:55:53.737

我不知道这背后的全部理由，但我们遇到了完全相同的问题（多次：P），您需要将 MediaType 更改为`TEXT_PLAIN`.

或者您也可以让 JAX-RS 为您完成这项工作：而不是执行 gson.toJSON(object)，只需返回 object 并将您的方法签名更改为任何类。JAX-RS（在您的情况下为 RESTEasy）将自动调用 Jackson（如果配置正确）并将您的对象序列化为 json。然后在您的客户端，您将请求同一个类而不是 String，并且一切都应该独立运行。我对 ClientRequest/Response 不是特别熟悉，所以它可能不像我说的那样工作；我们改为在客户端使用 RESTEasy 代理功能（请参阅 参考资料`ProxyFactory`）。尽管如此，JAX-RS/RESTEasy 也可以在客户端自动进行 json 序列化/反序列化，所以肯定有一种方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-29T18:56:15.877

如果您真的想绕过实际为您进行序列化的 JAX-RS 的优点（而不是手动调用 GSON），请使用`StreamingOutput`（即，将输出器包装为`StreamingOutput`，返回该对象）。

# iphone - 狮子mac上phonegap中的错误#import“PGPlugin.h”

> ID：12175567
> 
> 赞同：2
> 
> 时间：2012-08-29T10:10:50.723
> 
> 标签：iphone, ios, cocoa, cordova

我是 iphone 开发的新手，也是 phonegap 的新手。现在我想使用 phonegap 创建 iphone 应用程序。所以我在我的狮子 Mac 中安装了 phonegap。现在我想在 phonegap 中运行 webview，所以我点击了[这个链接](http://docs.phonegap.com/en/2.0.0/guide_cordova-%20%20%20webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS)。但现在我明白了

```
#import "PGPlugin.h" file not found CDVplugin.h 
```

当我在 Mac 中运行 xcode4.3 时。请帮我解决问题并在 phonegap 中运行 webview。提前致谢。期待您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:35:43.253

我遇到了同样的错误 - 按照升级PhoneGap插件的说明解决了它

[https://github.com/apache/incubator-cordova-ios/blob/master/guides/Cordova%20Plugin%20Upgrade%20Guide.md#upgrading-older-cordova-plugins-to-150](https://github.com/apache/incubator-cordova-ios/blob/master/guides/Cordova%20Plugin%20Upgrade%20Guide.md#upgrading-older-cordova-plugins-to-150)

# css - 滚动时CSS位置修复了chrome中的奇怪渲染

> ID：12175571
> 
> 赞同：5
> 
> 时间：2012-08-29T10:11:00.140
> 
> 标签：css, html, google-chrome, css-position

我有一个固定在屏幕顶部的元素，z-index 为 100。当我在 Chrome 中向上滚动页面时（OS X 上的 V.21.0.1180.82 和 Windows 上的 V.21.0.1180.83 m）我注意到一个看起来像这样的渲染问题：

![定位固定镀铬问题](../Images/16da1d7350532677e765f2d119ce68c6.png)

**更新：**
我注意到每次当固定元素`<section>...</section>`在向上滚动过程中传递一个新元素时，都会出现渲染问题。Chrome 似乎有一些与 HTML5 标签相关的问题，例如`<section>...</section>`或`<nav>...</nav>`. 更改这些以`<div>...</div>`解决渲染问题，无论如何我仍然想继续使用 HTML5 标签。

有人知道解决这个问题的“黑客”吗？

在那之前，我将尝试创建一个可重现的代码示例并将错误提交给[chromium](http://code.google.com/p/chromium/issues/entry)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T20:20:02.653

The cause of the issue where elements with an opacity of 0 inside the fixed element. Setting those to `display: none` solved the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T13:37:16.410

特别是对于 Chrome 最新浏览器版本（55.0.2883.87 m（64 位）），我添加了：

```
-webkit-transform: translateZ(0); 
```

# php - 在 php 文件上传期间创建的文件为 0 字节

> ID：12175573
> 
> 赞同：2
> 
> 时间：2012-08-29T10:11:08.360
> 
> 标签：php, file-upload

这有点疯狂，发生在我的 Ubuntu 操作系统上。

尝试使用以下脚本上传文件，它在上传文件夹中创建一个零字节的文件，不知道出了什么问题。有人可以看看吗。

这是我附加的脚本

1.  file1 - 文件输入 html 元素的名称。
2.  uploadbtn - 提交按钮的名称。

代码：

```
// App Config 

$app_dir = '.';

$uploaddir = $app_dir . '/uploads/';

$filetype  = 'text/xml';
if ( isset($_POST['uploadbtn'] ) ){
        // Upload a file
        print_r( $_FILES );
        if ( !isset($_FILES['file1']['name']) || $_FILES['file1']['name'] == '' ) {
                echo 'No files uploaded, Pls upload a file';
                exit;
        }
        //print_r ( $_FILES ); 

        $filename = basename( $_FILES['file1']['name'] );

        $uploadfile = $uploaddir . $filename ;

        if ($_FILES['file1']['type'] != $filetype ) {
                echo 'Sorry, your file was not of the ' . $filetype . ' mimetype (yours was ' . $_FILES['file1']['type'] . ').';
                exit;
        } // End filetype check 

        $upload = move_uploaded_file($_FILES['file1']['tmp_name'], $uploadfile );

        if ( !$upload ){
                echo ' Uploading UNSUCCESSFUL ';
                print_r( $_FILES );
        } else {
                echo ' Uploading Successfulllllllllllllll';
        }

} 
```

# java - 类似窗口服务的Java App

> ID：12175578
> 
> 赞同：0
> 
> 时间：2012-08-29T10:11:28.750
> 
> 标签：java, windows-services

我想像 Windows 服务一样运行我的 Java 应用程序。当我从 Windows 注销时它不应该关闭，它应该在 Windows 启动时自动启动。为此，我使用了 JSmooth 包装器。它现在在 Windows 启动时启动 Java 应用程序。

但问题是当我从 Windows 注销时，它正在关闭我的应用程序。我真的不想在 Windows 注销时关闭我的 Java 应用程序。

请建议我最好的解决方案或其他可以执行该任务的包装器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:14:28.667

我将从检查[Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/introduction.html)开始。

# java - Hibernate HQL 适用于 MySQL 但不适用于 MSSQL

> ID：12175580
> 
> 赞同：0
> 
> 时间：2012-08-29T10:11:43.027
> 
> 标签：java, hibernate, jdbc, playframework, playframework-1.x

我正在开发一个 Play Framework 1.2.4 项目。

我的开发计算机安装了mySql，我正在使用它，生产环境有MS-SQL2005。

我必须在批处理操作中使用某种 HQL。选择和删除查询在 mysql 上运行良好，但在 ms-sql 中查询似乎不起作用。这是我的代码：

```
 stateless.createQuery("delete INVENTORY inv where product <>:product and station=:station")
          .setParameter("product", lpgProd)
          .setParameter("station", inv.station)
          .executeUpdate();
          int count = stateless.createQuery("from INVENTORY where itemid = :itemid").setParameter("itemid", inv.getId()).list().size();
          if(count==0)
              stateless.insert(inv); 
```

此代码基本上在写入之前检查数据库中是否有任何较旧的记录。我还使用“无状态会话”来进行更快的批处理操作。

问题是，在 MS-SQL 中，这些代码什么都不做。它不会删除任何记录，也不会从列表中返回任何结果。

除了 hql 查询之外的任何东西都可以正常工作。（即sateless.insert(inv)）

我该怎么办？

# node.js - 仅将 node.js 用于其模块之一以在 mongodb 上执行操作

> ID：12175581
> 
> 赞同：0
> 
> 时间：2012-08-29T10:11:45.020
> 
> 标签：node.js, mongodb, nlp

我非常想使用该`natural`模块（在 javascript 中似乎可以很好地执行 nlp，这很少见）在我的一个 mongodb 脚本中执行操作，但我不关心任何网络内容、服务器内容或其他任何东西. **而且**我从来没有使用过node.js。

所以我有几个问题：

*   我可以在`natural`不加载整个 node.js 环境的情况下使用该模块吗？如果可以，怎么做？
*   如果我不能，我如何创建最小的 node.js 应用程序，它不会与 mongo 混淆，只是获得优势`natural`而不会陷入麻烦？

如果您有其他建议可以加深我对 node.js 的理解，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:27:18.513

也许您可以将足够多的`natural`node.js 包的源代码及其依赖项提取到您的 mongo 脚本中，以使其在没有节点的情况下工作，但这会很痛苦。node.js 不是你想的那样的环境；它只是一个像任何其他程序一样安装的程序，并且在您使用它来运行脚本文件之前对您的系统没有影响，然后它只会执行您在脚本文件中告诉它的事情。如果该脚本文件只是与`natural`模块一起使用，它将对 mongo 或网络没有影响。

# c# - IEnumerable 为空时出现异常

> ID：12175582
> 
> 赞同：-1
> 
> 时间：2012-08-29T10:11:49.150
> 
> 标签：c#, .net, visual-studio-2010

我有一个返回`IEnumerable`对象的方法，但我发现有时（错误时）该方法返回`IEnumerable`.

该方法看起来像这样。

```
IEnumerable<string> function(String param1, String param2)
{
    IEnumerable s = null;

    s = (some query over here);

    return s;
} 
```

当我用 调用此方法时`param2`，该函数在内部失败并返回此时为 null 的 s。

所以，为了检测我使用的这个，

```
 IEnumerable<string> a = function(1,0);
 if (a.count<string> > 0) //not working
 if (a == 0)  //not working. 
```

`IEnumerable`在任何其他操作之前使用并检查它是否为空的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:18:25.327

如果搜索结果为空，您可以返回一个空的可枚举：

```
IEnumerable<string> function(String param1, String param2)
  {
         IEnumerable s = null;

         s = (some query over here);

         return s ?? Enumerable.Empty<string>();
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:13:00.380

你`s = (some query over here);`的返回null。这就是为什么你得到例外。

稍后您的支票应该是：

```
if(a != null) 
```

和

```
if(a.Count() > 0) 
```

您可以将两者结合为：

```
if(a!=null && a.Count() >0)
{
 // do your work
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T10:18:15.900

`null`与没有任何元素的枚举不同。因此，您的检查`if(a.count<string> > 0)`失败。（实际上，`a`它没有指向任何可以使用 检索其元素数量的实例`Count`。）

此外，`null`与整数值不同`0`。因此，您的检查`if(a == 0)`也失败了。

但是，`null`是 C# 中的关键字，您可以与之进行比较：

```
if (a == null) 
```

# c++ - 转换为char * c ++后丢失字符串数据

> ID：12175587
> 
> 赞同：1
> 
> 时间：2012-08-29T10:12:12.893
> 
> 标签：c++, string, type-conversion

我目前正在学习如何使用 libcurl 开发 HTTP 代理。成功获得 HTTP 响应后，我将它们写入字符串，然后再使用回调函数进行进一步处理。在进一步的处理功能中，我首先需要将这些字符串转换为 char*，这会导致那些 HTTP 响应包含 png 和 gif 等图像数据的数据丢失问题。而其余的 HTTP 响应包含纯文本数据，如 HTML 和 css 工作正常。

我的疑问和问题是为什么 c_str() 函数在转换过程中消除了像图像数据这样的不可读数据？有没有办法解决这个丢失数据的问题？

代码：char* sData_source_ ;

```
void Client::send(string msg)
{
   sData_source_ = (char*)msg.c_str();
   cout << "Your string is " << strlen(sData_source_)<<endl; 
} 
```

输出：发送 HTTP 响应 [608]：FD：9 HTTP/1.1 200 OK 日期：2012 年 8 月 29 日星期三 00:58:25 GMT 服务器：Apache/2.2.16 (Debian) 最后修改时间：2012 年 8 月 28 日星期二 18 :34:36 GMT ETag：“13e4735-136-4c857b1b54700”接受范围：字节保持活动：超时 = 15，最大 = 99 内容类型：图像/PNG 内容长度：310 连接：保持活动 �PNG

IHDR.o.|d.IT pHYs..B.4\. tEXtSoftwareMacromedia Fireworks MX.*$tEXtCreation Time12/06/04g.m.IDATx..1\. E.u.r -.R).] X֚��w�<Ѱ�1F���������� tX��!�Z��=:$TJ��{�3�CRgb:$v4v�Cb��(��� B��!tH�L�[k�_wx8/:,@������ xQ�2]�|��IEND�B`� 你的字符串是 306

注意：正如你们可以从上面的输出中观察到的那样，最初的总 HTTP 响应是 608 字节。但是，使用 c_str() 函数转换后变为 306。

谢谢你，期待有人回复。:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:19:02.393

看起来您试图将二进制文件视为字符串。

一旦`\0`遇到终止符，字符串就会结束。考虑以下：

```
const char* foo = "abc\012345667";
int length = strlen(foo); 
```

是`length`，`3`因为原始字符串在*3 个字符*后**终止**。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:01:10.760

这是我修改代码后的解决方案，只是想与将来可能会处理同样问题的其他人分享。

```
 size_t SData_length; 

 void Client::send(string msg)
 {
    sData_length = msg.size(); 

    // allocate memory for sData_source
    sData_source_ = (char*)malloc(sData_length);

    // copy data to sData_source
    memcpy(sData_source_, msg.data(), sData_length); 

    // compare data after copy
   if(memcmp(sData_source_, msg.data(), sData_length) == 0)
   {
    cout<<"Copy Data Succeed"<<endl;
   }
} 
```*

# objective-c - 从 iOS 的用户语言中获取工作日数组？

> ID：12175590
> 
> 赞同：3
> 
> 时间：2012-08-29T10:12:24.857
> 
> 标签：objective-c, ios, cocoa-touch, localization

> **可能重复：**
> [如何在用户的语言环境中获取星期几的名称？](https://stackoverflow.com/questions/7330420/how-do-i-get-the-name-of-a-day-of-the-week-in-the-users-locale)

即使用户区域设置为（瑞典 aso 的 sv-SE），我也知道如何获得两个字母的语言 NSString（英语 aso 的 en）。

```
NSString * language = [[NSLocale preferredLanguages] objectAtIndex:0] 
```

现在假设用户已将语言和瑞典的英语设置为地区。获取英语而不是瑞典语或用户可以选择的任何语言和地区组合的工作日数组的代码是什么？

/约翰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T01:01:39.133

这是我的前 3 种首选语言的完整命令行程序示例：

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        NSDateFormatter * df = [[NSDateFormatter alloc] init];
        NSArray * preferredLanguages =[[NSLocale preferredLanguages] subarrayWithRange:NSMakeRange(0, 3)];

        [preferredLanguages enumerateObjectsUsingBlock:^(NSString  *languageIdentifier, NSUInteger idx, BOOL *stop) {
            [df setLocale: [[NSLocale alloc] initWithLocaleIdentifier:languageIdentifier]];
            NSArray * weekdays = [df weekdaySymbols];
            [weekdays enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
                NSLog(@"%@ %@",languageIdentifier, obj);
            }];
            NSLog(@"------------");
        }];

    }
    return 0;
} 
```

德语、英语和土耳其语的输出：

```
de Sonntag
de Montag
de Dienstag
de Mittwoch
de Donnerstag
de Freitag
de Samstag
------------
en Sunday
en Monday
en Tuesday
en Wednesday
en Thursday
en Friday
en Saturday
------------
tr Pazar
tr Pazartesi
tr Salı
tr Çarşamba
tr Perşembe
tr Cuma
tr Cumartesi
------------ 
```

* * *

只是指出：
对于您的要求，这些行就足够了

```
NSDateFormatter * df = [[NSDateFormatter alloc] init];
[df setLocale:[[NSLocale alloc] initWithLocaleIdentifier:[[NSLocale preferredLanguages] objectAtIndex:0]]];
NSArray *weekdays = [df weekdaySymbols];
NSLog(@"%@", weekdays); 
```

# mysql - 使用一个查询而不是两个

> ID：12175597
> 
> 赞同：1
> 
> 时间：2012-08-29T10:12:42.583
> 
> 标签：mysql

```
SELECT *, COUNT(*) AS conteggio FROM (
(SELECT uno, ruota, data FROM table WHERE ruota = 'BA'  
           ORDER BY data DESC LIMIT 540)
 UNION ALL
 (SELECT due, ruota, data FROM table WHERE ruota = 'BA'  
           ORDER BY data DESC LIMIT 540)
 UNION ALL
(SELECT tre, ruota, data FROM table WHERE ruota = 'BA'  
           ORDER BY data DESC LIMIT 540)
 UNION ALL
 (SELECT quattro, ruota, data FROM table WHERE ruota = 'BA'  
           ORDER BY data DESC LIMIT 540)
 UNION ALL
(SELECT cinque, ruota, data FROM table WHERE ruota = 'BA'  
           ORDER BY data DESC LIMIT 540)
) t
GROUP BY uno
ORDER BY conteggio DESC LIMIT 20
-------------------------------------------------
SELECT *, COUNT(*) AS conteggio FROM (
(SELECT uno, ruota, data FROM table WHERE ruota = 'CA'  
           ORDER BY data DESC LIMIT 540)
 UNION ALL
 (SELECT due, ruota, data FROM table WHERE ruota = 'CA'  
           ORDER BY data DESC LIMIT 540)
 UNION ALL
(SELECT tre, ruota, data FROM table WHERE ruota = 'CA'  
           ORDER BY data DESC LIMIT 540)
 UNION ALL
 (SELECT quattro, ruota, data FROM table WHERE ruota = 'CA'  
           ORDER BY data DESC LIMIT 540)
 UNION ALL
(SELECT cinque, ruota, data FROM table WHERE ruota = 'CA'  
           ORDER BY data DESC LIMIT 540)
) t
GROUP BY uno
ORDER BY conteggio DESC LIMIT 20 
```

有没有办法只使用一个查询而不是上面的两个查询？
唯一的区别是`WHERE ruota = 'VARIABLE'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:33:38.263

1.  规范化您的数据：

    ```
    CREATE TABLE newtable (
      col INT,
      INDEX (ruota, val),
      FOREIGN KEY(ruota, data) REFERENCES `table` (ruota, data)
    ) SELECT 1, uno val, ruota, data FROM `table` UNION ALL
      SELECT 2, due,     ruota, data FROM `table` UNION ALL
      SELECT 3, tre,     ruota, data FROM `table` UNION ALL
      SELECT 4, quattro, ruota, data FROM `table` UNION ALL
      SELECT 5, cinque,  ruota, data FROM `table`;

    ALTER TABLE `table`
      DROP COLUMN uno,
      DROP COLUMN due,
      DROP COLUMN tre,
      DROP COLUMN quattro,
      DROP COLUMN cinque; 
    ```

2.  简化您现有的查询：

    ```
    SELECT   val, ruota, LEAST(COUNT(*), 540) conteggio
    FROM     newtable
    WHERE    ruota = ?
    GROUP BY val
    ORDER BY conteggio DESC
    LIMIT    20; 
    ```

3.  组合查询：

    ```
    SELECT   val, ruota, LEAST(COUNT(*), 540) conteggio
    FROM     newtable
    WHERE    ruota IN ('BA', 'CA')
    GROUP BY ruota, val
    ORDER BY conteggio DESC
    LIMIT    20; 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T10:37:13.600

当你写

```
WHERE ruota = 'CA' ORDER BY data DESC LIMIT 540 
```

您在问“给我卡利亚里的最后 540 次提取”。将这些与来自巴里的那些相加，您将获得 1080 行。

如果你问，

```
WHERE ruota IN ('CA','BA') ORDER BY data DESC LIMIT 540 
```

你只会得到 540 行，所以**你必须首先将限制提高到 1080**。

完成了，您确定您的存档完整吗？如果不是，或者两个轮子的提取次数不同，则使用 (CA+BA) 获得的 1080 行与使用 (CA)+(BA) 获得的行数不同。

此外，您不需要分组的提取日期。所以你可以查询：

```
SELECT ruota, numero, COUNT(*) AS conteggio FROM (
    (SELECT uno AS numero, ruota FROM estrazioni WHERE ruota IN ('CA','BA')
         ORDER BY data DESC LIMIT 1080)
UNION ALL
    (SELECT due AS numero, ruota FROM estrazioni WHERE ruota IN ('CA','BA')
         ORDER BY data DESC LIMIT 1080)
... ) AS preliminare
GROUP BY ruota, numero; 
```

如果您只对数字频率感兴趣，则不需要轮子，因此：

```
SELECT numero, COUNT(*) AS conteggio FROM (
    (SELECT uno AS numero FROM estrazioni WHERE ruota IN ('CA','BA')
         ORDER BY data DESC LIMIT 1080)
UNION ALL
    (SELECT due AS numero FROM estrazioni WHERE ruota IN ('CA','BA')
         ORDER BY data DESC LIMIT 1080)
... ) AS preliminare
GROUP BY numero; 
```

最后，您可以通过对子选择进行分组并对部分计数求和来进行实验，以防它可能更快：

```
SELECT ruota, numero, SUM(conteggio) AS conteggio FROM (
    SELECT ruota, numero, count(numero) AS conteggio FROM (
        SELECT ruota, uno AS numero FROM estrazioni WHERE ruota IN ('CA','BA')
            ORDER BY data DESC LIMIT 1080 ) AS primo GROUP BY ruota, numero
    UNION ALL SELECT ruota, numero, count(numero) AS conteggio FROM (
        SELECT ruota, due AS numero FROM estrazioni WHERE ruota IN ('CA','BA')
            ORDER BY data DESC LIMIT 1080 ) AS secondo GROUP BY ruota, numero
    UNION ALL SELECT ruota, numero, count(numero) AS conteggio FROM (
        SELECT ruota, tre AS numero FROM estrazioni WHERE ruota IN ('CA','BA')
            ORDER BY data DESC LIMIT 1080 ) AS terzo GROUP BY ruota, numero
    UNION ALL SELECT ruota, numero, count(numero) AS conteggio FROM (
        SELECT ruota, quattro AS numero FROM estrazioni WHERE ruota IN ('CA','BA')
            ORDER BY data DESC LIMIT 1080 ) AS quarto GROUP BY ruota, numero
    UNION ALL SELECT ruota, numero, count(numero) AS conteggio FROM (
        SELECT ruota, cinque AS numero FROM estrazioni WHERE ruota IN ('CA','BA')
            ORDER BY data DESC LIMIT 1080 ) AS quinto GROUP BY ruota, numero
) AS preliminare GROUP BY ruota, numero ORDER BY conteggio DESC LIMIT 20; 
```

最后一个版本将五个 1080 行子选择中的出现求和，然后将它们从一个五行选择中求和，将 1080 分组五次，而不是将 5400 行分组一次。它应该使用更少的内存；是否更快，我不确定。

**更新**：我已经修复了 SQL 并验证了最后一个查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:15:24.723

无需再次重复完整的 SQL 脚本，您可以`IN`使用 SQL 中的 for 子句并将两个变量指定为逗号分隔值，然后在同一查询中选择结果。就像是

```
WHERE ruota IN ('CA' ,'BA') 
```

# java - 如何在 Java Swing 应用程序中将 ChartPanel 添加到 Jpanel

> ID：12175606
> 
> 赞同：0
> 
> 时间：2012-08-29T10:13:06.763
> 
> 标签：java, swing, jpanel, jfreechart

我有父面板和子面板。父面板上存在子父级。两者都是不同大小的Jpanels。现在我想在子面板上显示一个 ChartPanel。我尝试了各种显示方式，但均未成功。请提出一些将图表添加到 Jpanel 的方法。

抱歉，我无法粘贴代码。我也尝试了stackoverflow Q&A中建议的各种方法，但徒劳无功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:37:45.177

因为`ChartPanel`建立了首选尺寸并[`BoxLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)依赖于首选尺寸，所以让 a使用所需的方向和两者进行`newPanel`扩展和to 。`Box``add()``child``chartPanel``newPanel`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:57:29.317

我认为您的问题与 JFreeChart 无关。可能下面的代码可以帮助您开始：

```
 JFrame frame = new JFrame();

                JPanel parentPanel = new JPanel();
                parentPanel.setBorder(BorderFactory.createTitledBorder("parent panel"));

                JPanel childPanel = new JPanel();
                childPanel.setBorder(BorderFactory.createTitledBorder("child panel"));
                // Add a button to the child panel
                childPanel.add(new JButton("button"));
                // In the instruction below you have to create and add your ChartPanel
                childPanel.add(yourChartPanel);
                parentPanel.add(childPanel);

                frame.add(parentPanel);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true); 
```

# canvas - Kinetic.JS - 无法更改层的 z-index 顺序？

> ID：12175607
> 
> 赞同：3
> 
> 时间：2012-08-29T10:13:16.067
> 
> 标签：canvas, stack, layer, kineticjs

我可以成功更改形状和组的 z-index，但到目前为止我还无法为图层执行此操作。

**[JS 小提琴演示](http://jsfiddle.net/TrgSf/1/)**

相反，它们似乎注定要停留在我将它们添加到舞台上的堆栈顺序中。

我试过了：

```
layer.moveToTop();
layer.setZIndex(100); 
```

...但没有变化（即使层节点[*确实*继承](http://www.kineticjs.com/docs/symbols/Kinetic.Layer.php)了这些方法）。我在这里想念什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T09:51:15.930

我发现在更改生效之前需要手动重绘图层。

```
layer.draw(); 
```

顺便说一句，还值得注意的是 Kinetic JS 实际上并不尊重您提供的 z-index 值。在内部，每当调用 setZIndex() 时，它似乎都将 z-index 值从零重新分配到 N-1，其中 N 是对象的数量。我相信[GitHub 上 Kinetic JS 源代码中的这行代码](https://github.com/ericdrowell/KineticJS/blob/c40fc7cf381d6273819cb5136a60672990138973/src/Node.js#L752)是重新索引...

```
this.parent._setChildrenIndices(); 
```

# javascript - 通过单击链接（兄弟姐妹？）从无线电输入中获取 id

> ID：12175609
> 
> 赞同：-1
> 
> 时间：2012-08-29T10:13:21.387
> 
> 标签：javascript, jquery, html

所以我有一个地址列表，每个地址都有编辑链接，我想在列表项中获取输入的 ID

```
<li class="last">
    <div class="checkout-select-address"><input type="radio" name="checkout_selected_address" id="checkout_selected_address_3" value="" /></div>
    <div class="checkout-select-address-details">
    <p><label for="checkout_selected_address_3">(Mothers)</label> <a href="#" title="Edit Address" class="edit-link right">Edit Address</a></p>
    <input type="hidden" id="checkout_selected_address_3_name" value="" />
    <input type="hidden" id="checkout_selected_address_3_title" value="" />
    <input type="hidden" id="checkout_selected_address_3_first_name" value="" />
    <input type="hidden" id="checkout_selected_address_3_last_name" value="" />
    <input type="hidden" id="checkout_selected_address_3_address_line_1" value="" />
    <input type="hidden" id="checkout_selected_address_3_address_line_2" value="" />
    <input type="hidden" id="checkout_selected_address_3_address_line_3" value="" />
    <input type="hidden" id="checkout_selected_address_3_town_city" value="" />
    <input type="hidden" id="checkout_selected_address_3_county" value="" />
    <input type="hidden" id="checkout_selected_address_3_postcode" value="" />
    <input type="hidden" id="checkout_selected_address_3_country" value="" />
</div>
<div class="clear"></div> 
```

因此，单击“edit-link”类的链接，它将获得 li 中无线电输入的 ID

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:15:41.410

试试这个 ：

```
$(".edit-link").click(function(){
   alert($(this).closest("li").find("input[type=radio]").attr("id"));
}); 
```

演示：http: [//jsfiddle.net/ZABBS/](http://jsfiddle.net/ZABBS/)

# sbt - 将 sbt 插件添加到 Eclipse scala-ide

> ID：12175614
> 
> 赞同：4
> 
> 时间：2012-08-29T10:13:28.730
> 
> 标签：sbt, scala-ide, sbteclipse

我有使用 sbt 来管理的 scala 项目，并且我有一个项目所需的 sbt 插件（具体来说是[sbt-twirl](https://github.com/spray/twirl#readme)）。现在我想使用 Eclipse 来编辑/调试项目。像往常一样，我使用 sbt-eclipse 生成 Eclipse 项目文件并在 Eclipse 中使用 scala-ide 插件。但是，Eclipse 项目不会编译需要 sbt-twirl 插件的代码。我猜 Eclipse 使用的 sbt 没有使用 sbt-twirl 插件。有什么方法可以配置 Eclipse 的 sbt 以使用 sbt-twirl 插件（通过 sbt-eclipse 自动配置，或者在 Eclipse 中手动配置）？

我正在使用 Eclipse Indigo (3.7.2) 和 Scala IDE 2.0.2 。

提前致谢。

# java - 如何读取一个数组的方法？在java中

> ID：12175618
> 
> 赞同：0
> 
> 时间：2012-08-29T10:13:44.123
> 
> 标签：java, arrays, instance-variables

这部分是家庭作业，我已经获得了一些要使用的代码，我正试图找出其中的一部分......

```
 public PhoneAccount[] getAllAccounts() {
      return tm.values().toArray(new PhoneAccount[tm.size()]);
   } 
```

我试图找出如何在我的主要方法中阅读这个，我已经创建了这个类的实例。我将其命名为“我”

我究竟需要做什么才能使其列出数组的内容？

```
am.getAllAccounts() 
```

它是什么，只是不知道如何让它打印它的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:15:27.310

假设您`PhoneAccount`有一个合理的`toString()`实现，您可以执行以下操作。

```
System.out.println(Arrays.toString(am.getAllAccounts())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:15:37.593

假设您在 PhoneAccount 中有 totalBill 属性，那么您可以使用以下代码打印它。

```
PhoneAccount[] phoneaccounts = am.getAllAccounts() ;
for( PhoneAccount phoneaccount  : phoneaccounts)
{
 System.out.println(phoneaccount.getTotalBill());
// fetch all the  other properties from phoneaccoun similarly.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:17:05.397

您的 PhoneAccount-Class 中有正确的 .toString() 方法吗？你想获得什么价值？使用 foreach 循环来获取信息并将它们放入返回的新数组中会很容易

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T10:22:52.300

由于您有一个名为 PhoneAccount 的对象，因此您应该在其中创建一个新方法，该方法打印出您从 main 调用的内容。如果没有看到课程的更多细节，很难说，但可能最简单的方法是：

```
public void printArray(){
   System.out.println(myArray.toString());
} 
```

这将打印到控制台。或者，您可以在方法中添加一个循环以单独打印出每个数组元素。

# .net - 仅通过日历扩展器进行文本框数据输入 - ASP.NET 4.0，C#

> ID：12175619
> 
> 赞同：1
> 
> 时间：2012-08-29T10:13:45.333
> 
> 标签：.net, textbox, calendar, asp.net-ajax

如果使用日历扩展器在文本框中输入日期，有没有办法禁用直接输入文本框？我想强制用户使用日历，而不是输入日期，从而可能输入格式不正确的日期。

谢谢

吨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:18:26.747

Theresa 你可以试试这个

```
textbox.Enabled = false; 
```

您可以使用 codeBehind 设置值

```
textbox.Text = yourCalendar.Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:22:13.250

将该文本框的 ReadOnly 属性设置为“true”。例如：textBox1.ReadOnly ="true"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T08:50:35.850

将 onkeydown="return false" 添加到 aspx 中的文本框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-16T23:13:28.783

较早的帖子，但我发现[这个](https://www.c-sharpcorner.com/blogs/text-box-should-accepts-only-date-using-calendar-extender1)解决方案非常适合我：

```
protected void Page_Load(object sender, EventArgs e)    
{    
if (!IsPostBack)    
{    
 txtDate.Attributes.Add("readonly", "readonly");    
}    
} 
```

# java - PRE_AUTH_FILTER + 登录表单认证

> ID：12175620
> 
> 赞同：1
> 
> 时间：2012-08-29T10:13:48.797
> 
> 标签：java, authentication, spring-security

我是 spring security 的新手，似乎我有一个对我、常见问题解答和其他网站来说太难的问题。

任务是：

1.  我有带有登录表单的 spring 应用程序。一切正常。

2.  现在我需要能够从应用程序获取任何允许的页面，但通过 URL 进行身份验证......类似于：[http://myapp.de?login=test&password=test](http://myapp.de?login=test&password=test)。我用 PRE_AUTH_FILTER 做到了。一切都适用于 URL。

3.  问题是我的应用程序中需要两种身份验证方式。假设如果 PRE_AUTH_FILTER 失败，则加载标准登录表单。所以： http: [//myapp.de](http://myapp.de)将显示我的登录表单和第 1 点）。

现在有了我的安全配置，我只有 PRE_AUTH_FILTER 工作。

我错过了什么？

```
<sec:http auto-config="true" use-expressions="true">
    <sec:form-login login-page="/login.jsp" default-target-url="/start" authentication-failure-url="/login.jsp?error=true"/>
    <sec:logout logout-url="/logout" logout-success-url="/login.jsp"/>
    <sec:anonymous username="guest" granted-authority="ROLE_ANONYMOUS"/>
    <sec:access-denied-handler error-page="/error403.jsp"/>
    <sec:intercept-url pattern="/login*" access="permitAll"/>   
    <sec:intercept-url pattern="/objautocomplete*" access="hasRole('ROLE_USER')"/>
    <sec:intercept-url pattern="/start*" access="hasRole('ROLE_USER')"/>
    <sec:intercept-url pattern="/u*" access="hasRole('ROLE_USER')"/>
    <sec:intercept-url pattern="/crosstable*" access="hasRole('ROLE_USER')"/>
    <sec:intercept-url pattern="/objcen*" access="hasRole('ROLE_USER')"/>
    <sec:intercept-url pattern="/objchecks*" access="hasRole('ROLE_USER')"/>
    <sec:intercept-url pattern="/globalcen*" access="hasRole('ROLE_USER')"/>
    <sec:custom-filter position="PRE_AUTH_FILTER" ref="preAuthFilter" />
    <sec:remember-me/>
</sec:http>

    <!-- PRE_ AUTHENTICATION -->        
<beans:bean id="userDetailsServiceImpl"
    class="com.grsnet.qvs.auth.UserDetailsServiceImpl" />

<beans:bean id="preAuthenticatedProcessingFilterEntryPoint"
    class="com.grsnet.qvs.auth.LinkForbiddenEntryPoint" />

<beans:bean id="preAuthenticationProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
    <beans:property name="preAuthenticatedUserDetailsService" ref="userDetailsServiceImpl" />
</beans:bean>

<beans:bean id="preAuthFilter"
    class="com.grsnet.qvs.auth.UrlParametersAuthenticationFilter">
    <beans:property name="authenticationManager" ref="appControlAuthenticationManager" />
</beans:bean>

<sec:authentication-manager alias="appControlAuthenticationManager">
    <sec:authentication-provider ref="preAuthenticationProvider" />
</sec:authentication-manager>

    <!-- LOGIN FORM AUTHENTICATION -->  

<sec:authentication-manager>
    <sec:authentication-provider user-service-ref="qvsUserDetailsService"/>
</sec:authentication-manager>

<beans:bean id="qvsUserDetailsService" class="com.grsnet.qvs.auth.QVSUserDetailsService"/>

</beans:beans> 
```

**更新**UrlParametersAuthenticationFilter.java

```
public class UrlParametersAuthenticationFilter extends AbstractPreAuthenticatedProcessingFilter {

    @Override
    protected Object getPreAuthenticatedPrincipal(HttpServletRequest request) {
        if (request.getParameterMap().size() == 2) {
            return true;
        }
        return false;
    }

    @Override
    protected Object getPreAuthenticatedCredentials(HttpServletRequest request) {
        String[] credentials = new String[2];
        credentials[0] = request.getParameter("j_username");
        credentials[1] = request.getParameter("j_password");
        return credentials;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:21:13.673

```
<sec:custom-filter before="FORM_LOGIN_FILTER" ref="preAuthFilter" /> 
```

编辑：

是的，过滤器是一团糟。您甚至查看过 AbstractPreAuthenticatedProcessingFilter 的 javadoc 或源代码吗？PreAuthentication 在外部系统已经完成身份验证时使用。例如，如果您使用容器提供的 Java EE 身份验证，或者您有一个可以进行身份​​验证的 Web 前端，例如 NTLM/kerberos 的 IIS 前端。

此外，您的实现不正确，getPreAuthenticatedPrincipal() 应该返回用户名，也就是 Principal，而 getPreAuthenticatedCredentials 应该返回密码，也就是 Credentials。但更重要的是， AbstractPreAuthenticatedProcessingFilter**不做任何 authentication**。从 Javadoc 的第一行开始：

```
Base class for processing filters that handle pre-authenticated authentication requests, where it is assumed that the principal has already been authenticated by an external system. 
```

所以，废弃你的过滤器并使用标准的 UsernamePasswordAuthenticationFilter

```
<beans:bean id="urlParameterAuthFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <beans:property name="usernameParameter" value="username" />
    <beans:property name="passwordParameter" value="password" />
    <beans:property name="postOnly" value="false" />
    <beans:property name="authenticationManager" ref="appControlAuthenticationManager" />
</beans:bean> 
```

然后将您的自定义过滤器声明替换为

```
<sec:custom-filter before="FORM_LOGIN_FILTER" ref="urlParameterAuthFilter" /> 
```

免责声明：在 URL 中传递密码是一个非常非常糟糕的主意，您一开始就不应该这样做。它将出现在访问日志中，并引入了一大堆真正不必要的安全问题。

# php - 以 php 形式存储图片 url 并在下一页输出

> ID：12175622
> 
> 赞同：0
> 
> 时间：2012-08-29T10:13:55.883
> 
> 标签：php, image, forms, input

我这样做对吗？我想将“i.src”的值放入输入中，然后使用 post 命令在另一个页面上显示生成的图像

```
 $('#create').bind('click', function(e){
    var datapair = $sigdiv.jSignature("getData", "image") 
    var i = new Image()
    i.src = "data:" + datapair[0] + "," + datapair[1] 
    $('#displayarea2').empty();
$(i).appendTo($("#displayarea2")); // append the image (SVG) to DOM.
    $getElemenById('sig').value = i.src;
$document.getElemenById('sig').value = i.src;//store the value of i.src to input
alert("done1");
})

<input type="image" id="sig" name="sig" />

       <?php echo $_POST["sig"]; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:16:45.990

您可以设置隐藏字段的值：

```
<input type=hidden id=sig name=sig>

document.getElemenById('sig').value = myImage.src; 
```

但这是可取的吗？这是一个很大的字符串，除了将它传递给服务器只是为了让它回来之外，你没有其他解决方案吗？如果它是服务器生成的，你不能将它存储在服务器上吗？或者使用 ajax，所以你不替换整个页面，所以你保留图像浏览器端？

# javascript - 图像预加载器

> ID：12175624
> 
> 赞同：0
> 
> 时间：2012-08-29T10:14:02.977
> 
> 标签：javascript, jquery, preloader

我正在尝试制作图像预加载器。有一组低分辨率图像和一组高分辨率图像。我创建了一个新的图像对象并通过一个循环来预加载这些图像。然后，我使用一行 Jquery 将背景设置为使用低分辨率图像，直到加载高分辨率对象，当加载时，我使用另一行 Jquery 切换背景以使用此高分辨率图像。

我遇到的问题是代码跳过了低分辨率背景设置并加载了高分辨率图像。

这是代码：

```
// Low res image array
    var lowres = ["image1lr.jpg", "image2lr.jpg", "image3lr.jpg", "image4lr.jpg"];  

// Full res image array
    var images = ["image1.jpg", "image2.jpg", "image3.jpg", "image4.jpg"];      

// Low res image path
    var lowresimagepath = "url(images/rotate-background/low_res/";
// Full res image path
    var imagepath = "url(images/rotate-background/";

// Counter
    var i = 0;  

// Image preloading
       for(i=0; i<=images.length; i++) 
       {
           // Create object
           imageObj = new Image(); 

           imageObj.src = imagepath + images[i] + ')';
       }

//Generate random number
    var rannum = Math.floor(Math.random() * images.length);    

//Set background image to random low res image
    $(".bg_home").css({'background-image': lowresimagepath +lowres[rannum]+')'});       

//Once image objects are loaded switch to high res image 
     imageObj.onLoad= function(){ 
                          $(".bg_home").css({'background-image': imagepath + images[rannum] + ')'});    
                      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:54:09.620

您的代码有很多问题，这是我制作的干净版本，但未经测试。

```
(function(){ // prevents name conflicting with other scripts 

    var BASE_PATH_LOW_RES = "images/rotate-background/low_res/",
        BASE_PATH_HIGH_RES = "images/rotate-background/"; // since these are constants its better to use capitalized letters

    var lastLoadedIndex = 0, // you must ensure all images are loaded and its hard to preload them in parallel
        randomIndex = Math.floor(Math.random() * images.length),
        images = [
            {low: "image1lr.jpg", high: "image1.jpg"},
            {low: "image2lr.jpg", high: "image2.jpg"},
            {low: "image3lr.jpg", high: "image3.jpg"},
            {low: "image4lr.jpg", high: "image4.jpg"}
        ];

    var onComplete = function() {
        $(".bg_home").css({'background-image': 'url(' + BASE_PATH_HIGH_RES + images[randomIndex] + ')'});
    }

    var loadNext = function(){
        if(lastLoadedIndex == images.length) { // all images has been preloaded
            onComplete();
        } else {
            var imgTemp = new Image();
                imgTemp.src = BASE_PATH_HIGH_RES + images[lastLoadedIndex++].high;
                imgTemp.onLoad = loadNext;
        }
    }

    $(".bg_home")
        .css({'background-image': 'url(' + BASE_PATH_LOW_RES + images[randomIndex].low + ')'});       

    loadNext(); // start to preload every image one after another
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:23:54.737

以我的经验 image.onLoad 不是很可靠。在不同的情况下它不起作用，例如 IE 或缓存图像。

我会看看[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded) 我已经使用了那个库，它工作得很好。

至于您的代码，它似乎相当无效：

```
// Low res image array
var lowres = ["image1lr.jpg", "image2lr.jpg", "image3lr.jpg", "image4lr.jpg"];  

// Full res image array
var images = ["image1.jpg", "image2.jpg", "image3.jpg", "image4.jpg"];      

// Low res image path
var lowresimagepath = "images/rotate-background/low_res/";
// Full res image path
var imagepath = "images/rotate-background/";

//Generate random number
var rannum = Math.floor(Math.random() * images.length);      

for(var i = 0; i < images.length; i++) {
    var image = new Image();
    image.src = imagepath + images[i];

    if(i == rannum) {

        //Set background image to random low res image
        $(".bg_home").css({'background-image': 'url(' + lowresimagepath +lowres[i]+')'});       

        //Once image objects are loaded switch to high res image 
        iamge.onLoad= function() { 
                $(".bg_home").css({'background-image': 'url(' + imagepath + images[i] + ')'});   
        };

    }

} 
```

**这是在假设您的想法是将单个随机图像添加到背景中而所有图像都加载到背景中的假设下工作的。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:38:18.717

Image 对象的 src 是一个 css 属性。它应该只是 URL

```
imageObj.src = imagepath + images[i] + ')'; //Generates "url('whatever');"
//It can't be that, must just be the path. 
```

# google-maps - 如何找到给定中心和缩放级别的边界点？

> ID：12175626
> 
> 赞同：0
> 
> 时间：2012-08-29T10:14:13.987
> 
> 标签：google-maps, google-maps-api-3

该`LatLngBounds`功能需要角点！

如何找到给定中心和缩放级别的边界点？
是否有实现此目的的 Google API V3？

或者这可以通过静态地图以某种方式完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:04:00.183

你指的是可见地图的边界点吗？如果是这样，您可以使用地图对象的 getBounds 方法。

```
var llb = map.getBounds(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:07:29.923

如果您使用的是地理编码器，它会返回一个建议的 viewort（即 google.maps.LatLngBounds() 对象）。

看到这个类似的问题： [Google Maps API zoom after setcenter](https://stackoverflow.com/questions/12161203/google-maps-api-zoom-after-setcenter)

如果你只有中心坐标和缩放，使用它们来初始化地图，监听 bounds_changed 事件，然后使用 map.getBounds() 函数。

以上所有内容都在[文档中进行了描述](https://developers.google.com/maps/documentation/javascript/reference#Map)

# javascript - 以编程方式添加的复选框的值

> ID：12175634
> 
> 赞同：0
> 
> 时间：2012-08-29T10:14:33.317
> 
> 标签：javascript, jquery, html, checkbox

我一直在寻找解决方案，所以我希望我现在能得到一些帮助。我试图弄清楚是否使用 jquery 检查了以编程方式添加的复选框。复选框的 HTML 代码如下：

```
<td>
   <input type="checkbox" name='ismanual' id='ismanual' class="checkbox">
</td> 
```

我正在使用以下 jquery 代码进行操作：

```
var ismanual = document.getElementById("ismanual").val(); 
```

我曾尝试使用#ismanual 作为选择器，但这并没有帮助。知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:16:05.127

如果你正在使用`document.getElementById("ismanual")`你应该使用`.checked`而不是`.val()`......

```
var ismanual = document.getElementById("ismanual").checked; 
```

对于 jQuery 使用...

```
var ismanual = $("#ismanual").is(':checked') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T10:17:05.827

你哪里出错了：如果你想使用 val()，你需要在一个 jQuery 对象上使用它。getElementById() 给你一个 DOM 元素，但不是一个 jQuery 对象。要获取 jQuery 对象，您需要使用 jQuery 选择器查找元素，如下所示：

```
jQuery('#ismanual') 
```

然后，您可以在该对象上使用 jQuery 的[:checked](http://api.jquery.com/checked-selector/)选择器和[.is()](http://api.jquery.com/is/)函数：

```
var isManual = jQuery('#ismanual').is(':checked'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:28:14.733

`.val()`是一个`jQuery`函数。它不适用于 DOM 样式元素选择。

要使用 获得价值`.getElementById()`，您必须使用`.checked`like，

`var ismanual = document.getElementById("ismanual").checked;`

`.val()`当您使用`jQuery`like 选择元素时将起作用，

```
$("#ismanual").val(); 
```

# python - IMDbPY 安装失败

> ID：12175636
> 
> 赞同：4
> 
> 时间：2012-08-29T10:14:35.590
> 
> 标签：python, installation, imdbpy

我正在尝试以各种方式安装[IMDbPY并一直失败。](http://sourceforge.net/projects/imdbpy/)该包不是纯 Python（它有几行 C 行），我怀疑编译是根本原因（我在 Windows 上）。

## 到目前为止我所做的尝试：

1.  `pip install imdbpy`.
2.  `easy_install imdbpy`.
3.  从[Pypi Package Index > IMDbPY 4.9](http://pypi.python.org/pypi/IMDbPY/4.9)下载[IMDbPY-4.9.tar.gz](http://pypi.python.org/packages/source/I/IMDbPY/IMDbPY-4.9.tar.gz#md5=5b071cd63d1804ed568741d2db8d12b5)，然后解压缩。`python setup.py install`
4.  我注意到 pip 试图安装以下软件包：imdbpy、SQLObject、FormEncode、SQLAlchemy、decorator、Tempita。我决定尝试自己一个接一个地安装这些软件包，从 Tempita 开始。我去了[Pypi Package Index > Tempita](http://pypi.python.org/pypi/Tempita/0.5.1)，下载存档，解压缩然后`python setup.py install`. 它也失败了。

## 每次尝试的输出：

### `pip install imdbpy`：

```
Downloading/unpacking imdbpy
  Running setup.py egg_info for package imdbpy
    Created locale for: en it tr.

    warning: no previously-included files matching '*~' found anywhere in distri
bution
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
    no previously-included directories found matching '.hg'
    warning: no previously-included files matching 'CVS' found anywhere in distr
ibution
    warning: no previously-included files matching '.svn' found anywhere in dist
ribution
Downloading/unpacking SQLObject (from imdbpy)
  Running setup.py egg_info for package SQLObject

    warning: no files found matching 'examples\*.py'
    warning: no files found matching '*.py' under directory 'tests'
Downloading/unpacking FormEncode (from imdbpy)
  Running setup.py egg_info for package FormEncode

    warning: no files found matching '*.py' under directory '.'
    no previously-included directories found matching '**\.svn'
Downloading/unpacking SQLAlchemy (from imdbpy)
  Running setup.py egg_info for package SQLAlchemy

    warning: no files found matching '*.jpg' under directory 'doc'
    warning: no files found matching 'Makefile' under directory 'doc'
    no previously-included directories found matching 'doc\build\output'
Downloading/unpacking sqlalchemy-migrate (from imdbpy)
  Running setup.py egg_info for package sqlalchemy-migrate

    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*pyc' found anywhere in dist
ribution
    warning: no previously-included files found matching '.hgtags'
    warning: no previously-included files matching '*' found under directory 'do
cs\_build'
Requirement already satisfied (use --upgrade to upgrade): lxml in c:\python27\li
b\site-packages (from imdbpy)
Downloading/unpacking decorator (from sqlalchemy-migrate->imdbpy)
  Running setup.py egg_info for package decorator

    warning: no previously-included files found matching 'Makefile'
Downloading/unpacking Tempita>=0.4 (from sqlalchemy-migrate->imdbpy)
  Running setup.py egg_info for package Tempita

Requirement already satisfied (use --upgrade to upgrade): distribute in c:\pytho
n27\lib\site-packages\distribute-0.6.15-py2.7.egg (from sqlalchemy-migrate->imdb
py)
Installing collected packages: imdbpy, SQLObject, FormEncode, SQLAlchemy, sqlalc
hemy-migrate, decorator, Tempita
  Running setup.py install for imdbpy
    Created locale for: en it tr.
    building 'imdb.parser.sql.cutils' extension

    ====================================================================
      ERROR
      =====

      Aaargh!  An error!  An error!
      Curse my metal body, I wasn't fast enough.  It's all my fault!

      Anyway, if you were trying to build a package or install IMDbPY to your
      system, looks like we're unable to fetch or install some dependencies,
      or to compile the C module.

      The best solution is to resolve these dependencies (maybe you're
      not connected to Internet?) and/or install a C compiler.

      You may, however, go on without some optional pieces of IMDbPY;
      try re-running this script with the corresponding optional argument:

          --without-lxml        exclude lxml (speeds up 'http')
          --without-cutils      don't compile the C module (speeds up 'sql')
          --without-sqlobject   exclude SQLObject  (you need at least one of)
          --without-sqlalchemy  exclude SQLAlchemy (SQLObject or SQLAlchemy,)
                                                   (if you want to access a )
                                                   (local SQL database      )
          --without-sql         no access to SQL databases (implied if both
                                --without-sqlobject and --without-sqlalchemy
                                are used)

      Example:
          python ./setup.py --without-lxml --without-sql install

      The caught exception, is re-raise below:

    error: Unable to find vcvarsall.bat
    Complete output from command C:\Python27\python.exe -c "import setuptools;__
file__='C:\\Users\\yonatan\\build\\imdbpy\\setup.py';execfile(__file__)" install
 --single-version-externally-managed --record c:\users\yonatan\appdata\local\tem
p\pip-czwg98-record\install-record.txt:
    Created locale for: en it tr.

running install

running build

running build_py

copying imdb\Character.py -> build\lib.win32-2.7\imdb

copying imdb\Company.py -> build\lib.win32-2.7\imdb

copying imdb\helpers.py -> build\lib.win32-2.7\imdb

copying imdb\linguistics.py -> build\lib.win32-2.7\imdb

copying imdb\Movie.py -> build\lib.win32-2.7\imdb

copying imdb\Person.py -> build\lib.win32-2.7\imdb

copying imdb\utils.py -> build\lib.win32-2.7\imdb

copying imdb\_compat.py -> build\lib.win32-2.7\imdb

copying imdb\_exceptions.py -> build\lib.win32-2.7\imdb

copying imdb\_logging.py -> build\lib.win32-2.7\imdb

copying imdb\__init__.py -> build\lib.win32-2.7\imdb

copying imdb\locale\generatepot.py -> build\lib.win32-2.7\imdb\locale

copying imdb\locale\msgfmt.py -> build\lib.win32-2.7\imdb\locale

copying imdb\locale\rebuildmo.py -> build\lib.win32-2.7\imdb\locale

copying imdb\locale\__init__.py -> build\lib.win32-2.7\imdb\locale

copying imdb\parser\__init__.py -> build\lib.win32-2.7\imdb\parser

copying imdb\parser\http\characterParser.py -> build\lib.win32-2.7\imdb\parser\h
ttp

copying imdb\parser\http\companyParser.py -> build\lib.win32-2.7\imdb\parser\htt
p

copying imdb\parser\http\movieParser.py -> build\lib.win32-2.7\imdb\parser\http

copying imdb\parser\http\personParser.py -> build\lib.win32-2.7\imdb\parser\http

copying imdb\parser\http\searchCharacterParser.py -> build\lib.win32-2.7\imdb\pa
rser\http

copying imdb\parser\http\searchCompanyParser.py -> build\lib.win32-2.7\imdb\pars
er\http

copying imdb\parser\http\searchKeywordParser.py -> build\lib.win32-2.7\imdb\pars
er\http

copying imdb\parser\http\searchMovieParser.py -> build\lib.win32-2.7\imdb\parser
\http

copying imdb\parser\http\searchPersonParser.py -> build\lib.win32-2.7\imdb\parse
r\http

copying imdb\parser\http\topBottomParser.py -> build\lib.win32-2.7\imdb\parser\h
ttp

copying imdb\parser\http\utils.py -> build\lib.win32-2.7\imdb\parser\http

copying imdb\parser\http\__init__.py -> build\lib.win32-2.7\imdb\parser\http

copying imdb\parser\mobile\__init__.py -> build\lib.win32-2.7\imdb\parser\mobile

copying imdb\parser\sql\alchemyadapter.py -> build\lib.win32-2.7\imdb\parser\sql

copying imdb\parser\sql\dbschema.py -> build\lib.win32-2.7\imdb\parser\sql

copying imdb\parser\sql\objectadapter.py -> build\lib.win32-2.7\imdb\parser\sql

copying imdb\parser\sql\__init__.py -> build\lib.win32-2.7\imdb\parser\sql

copying imdb\parser\http\bsouplxml\bsoupxpath.py -> build\lib.win32-2.7\imdb\par
ser\http\bsouplxml

copying imdb\parser\http\bsouplxml\etree.py -> build\lib.win32-2.7\imdb\parser\h
ttp\bsouplxml

copying imdb\parser\http\bsouplxml\html.py -> build\lib.win32-2.7\imdb\parser\ht
tp\bsouplxml

copying imdb\parser\http\bsouplxml\_bsoup.py -> build\lib.win32-2.7\imdb\parser\
http\bsouplxml

copying imdb\parser\http\bsouplxml\__init__.py -> build\lib.win32-2.7\imdb\parse
r\http\bsouplxml

running build_ext

building 'imdb.parser.sql.cutils' extension

====================================================================

  ERROR

  =====

  Aaargh!  An error!  An error!

  Curse my metal body, I wasn't fast enough.  It's all my fault!

  Anyway, if you were trying to build a package or install IMDbPY to your

  system, looks like we're unable to fetch or install some dependencies,

  or to compile the C module.

  The best solution is to resolve these dependencies (maybe you're

  not connected to Internet?) and/or install a C compiler.

  You may, however, go on without some optional pieces of IMDbPY;

  try re-running this script with the corresponding optional argument:

      --without-lxml        exclude lxml (speeds up 'http')

      --without-cutils      don't compile the C module (speeds up 'sql')

      --without-sqlobject   exclude SQLObject  (you need at least one of)

      --without-sqlalchemy  exclude SQLAlchemy (SQLObject or SQLAlchemy,)

                                               (if you want to access a )

                                               (local SQL database      )

      --without-sql         no access to SQL databases (implied if both

                            --without-sqlobject and --without-sqlalchemy

                            are used)

  Example:

      python ./setup.py --without-lxml --without-sql install

  The caught exception, is re-raise below:

error: Unable to find vcvarsall.bat

----------------------------------------
Command C:\Python27\python.exe -c "import setuptools;__file__='C:\\Users\\yonata
n\\build\\imdbpy\\setup.py';execfile(__file__)" install --single-version-externa
lly-managed --record c:\users\yonatan\appdata\local\temp\pip-czwg98-record\insta
ll-record.txt failed with error code 1
Storing complete log in C:\Users\yonatan\AppData\Roaming\pip\pip.log 
```

### `easy_install imdbpy`

```
Searching for imdbpy
Reading http://pypi.python.org/simple/imdbpy/
Reading http://imdbpy.sf.net/
Reading http://imdbpy.sf.net/?page=download
Best match: IMDbPY 4.9
Downloading http://pypi.python.org/packages/source/I/IMDbPY/IMDbPY-4.9.tar.gz#md
5=5b071cd63d1804ed568741d2db8d12b5
Processing IMDbPY-4.9.tar.gz
Running IMDbPY-4.9\setup.py -q bdist_egg --dist-dir c:\users\yonatan\appdata\loc
al\temp\easy_install-tubh5e\IMDbPY-4.9\egg-dist-tmp-nsslin
Created locale for: en it tr.
warning: no previously-included files matching '*~' found anywhere in distributi
on
no previously-included directories found matching 'CVS'
no previously-included directories found matching '.svn'
no previously-included directories found matching '.hg'
warning: no previously-included files matching 'CVS' found anywhere in distribut
ion
warning: no previously-included files matching '.svn' found anywhere in distribu
tion

====================================================================
  ERROR
  =====

  Aaargh!  An error!  An error!
  Curse my metal body, I wasn't fast enough.  It's all my fault!

  Anyway, if you were trying to build a package or install IMDbPY to your
  system, looks like we're unable to fetch or install some dependencies,
  or to compile the C module.

  The best solution is to resolve these dependencies (maybe you're
  not connected to Internet?) and/or install a C compiler.

  You may, however, go on without some optional pieces of IMDbPY;
  try re-running this script with the corresponding optional argument:

      --without-lxml        exclude lxml (speeds up 'http')
      --without-cutils      don't compile the C module (speeds up 'sql')
      --without-sqlobject   exclude SQLObject  (you need at least one of)
      --without-sqlalchemy  exclude SQLAlchemy (SQLObject or SQLAlchemy,)
                                               (if you want to access a )
                                               (local SQL database      )
      --without-sql         no access to SQL databases (implied if both
                            --without-sqlobject and --without-sqlalchemy
                            are used)

  Example:
      python ./setup.py --without-lxml --without-sql install

  The caught exception, is re-raise below:

error: Setup script exited with error: Unable to find vcvarsall.bat 
```

### `python setup.py install`

```
Created locale for: en it tr.

====================================================================
  ERROR
  =====

  Aaargh!  An error!  An error!
  Curse my metal body, I wasn't fast enough.  It's all my fault!

  Anyway, if you were trying to build a package or install IMDbPY to your
  system, looks like we're unable to fetch or install some dependencies,
  or to compile the C module.

  The best solution is to resolve these dependencies (maybe you're
  not connected to Internet?) and/or install a C compiler.

  You may, however, go on without some optional pieces of IMDbPY;
  try re-running this script with the corresponding optional argument:

      --without-lxml        exclude lxml (speeds up 'http')
      --without-cutils      don't compile the C module (speeds up 'sql')
      --without-sqlobject   exclude SQLObject  (you need at least one of)
      --without-sqlalchemy  exclude SQLAlchemy (SQLObject or SQLAlchemy,)
                                               (if you want to access a )
                                               (local SQL database      )
      --without-sql         no access to SQL databases (implied if both
                            --without-sqlobject and --without-sqlalchemy
                            are used)

  Example:
      python ./setup.py --without-lxml --without-sql install

  The caught exception, is re-raise below:

error in IMDbPY setup command: access to SQL databases wants to be able to remov
e imdb.parser.sql, but the distribution doesn't contain any packages or modules
under imdb.parser.sql 
```

### 尝试安装 Tempita`python setup.py install`

```
running install
running bdist_egg
running egg_info
creating Tempita.egg-info
writing Tempita.egg-info\PKG-INFO
writing top-level names to Tempita.egg-info\top_level.txt
writing dependency_links to Tempita.egg-info\dependency_links.txt
writing manifest file 'Tempita.egg-info\SOURCES.txt'
warning: manifest_maker: standard file 'setup.py' not found

error: package directory 'tempita' does not exist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:27:52.960

[如果您使用的是 Python 2.7 32 位，您可以尝试本页](http://imdbpy.sourceforge.net/downloads.html)底部列出的二进制包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:18:33.880

您可以尝试安装 Visual Studio Express 2008（不是 2010），它是免费的并提供所需的编译器。

你也可以切换到 ActivePython 并使用 Pypm 来安装这个包。

# sorting - opencart - 按价格排序 不关心特价

> ID：12175642
> 
> 赞同：0
> 
> 时间：2012-08-29T10:14:55.560
> 
> 标签：sorting, opencart

在商店，在分类页面中，当我按价格排序时（无论是从低到高还是从高到低），它不关心特价，它根据基础价格对产品进行排序，而不是最近的降价。

这会导致对特价产品的错误分类，它会按照正常价格将它们放在其他产品中。

我找不到任何解决方案，甚至找不到正确的工作示例。我使用的是 1.5.3.1，但据我所知，这是所有版本的问题。

如果您可以为此提出解决方案，我会很高兴？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:30:24.703

我的小建议可以请您将此模块添加到您的 opencart 中，我认为您的问题将得到解决。

[http://www.opencart.com/index.php?route=extension/extension/info&extension_id=3690&path=5&page=2](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=3351&filter_search=special%20product%20shorting)

[http://www.opencart.com/index.php?route=extension/extension/info&extension_id=3351&filter_search=special%20product%20shorting](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=3351&filter_search=special%20product%20shorting)

另一种方式是不可能在页面中的大量类别产品中做空，因此需要对特殊产品应用条件查询。

谢谢，布伦登

# scala - Squeryl 自定义字段类型

> ID：12175645
> 
> 赞同：0
> 
> 时间：2012-08-29T10:15:01.217
> 
> 标签：scala, squeryl

我正在尝试在 Squeryl 中创建自定义字段类型。该字段表示一个[Isin 代码](http://en.wikipedia.org/wiki/International_Securities_Identification_Number)，因此它由一个字符串字段支持。按照[文档中的示例](http://squeryl.org/schema-definition.html#highlighter_644280)，我在创建新的 isin 之前添加了一个简单的验证（不管 Isin 代码是什么或验证过程如何工作）：

```
trait Domain[A] { self: CustomType[A] =>
  def validate(a: A): Unit

  validate(value)
}

class Isin(v: String) extends StringField(v) with Domain[String] {
  println("instantiating Isin")
  override def validate(s: String) {
    println("calling validate with " + s)
    assert(checkIsin(s))
  }

  private def checkIsin(isin: String): Boolean = {
    // never mind the exact procedure
  }
} 
```

我添加了一些`println`以了解发生了什么。我在一个模型中使用这个字段，比如

```
case class Asset(
  val id: Long = 0,
  val isin: Isin
) extends KeyedEntity[Long]

object Asset {
  import Database.assets

  def create(isinCode: String) {
    inTransaction {
      assets.insert(new Asset(isin = new Isin(isinCode)))
    }
  }
} 
```

现在，当我调用`Asset.create("US0378331005")`（有效的 ISIN）时，我得到了一个异常。在堆栈跟踪中，事实证明此异常是由于对值的`init`方法调用引起的`null`，该值应该传递给`checkIsin`. 确实，`println`报表打印

```
calling validate with US0378331005
Instantiating Isin
calling validate with 
```

所以看起来该`validate`方法实际上被调用了两次，但是第二次它得到了一个`null`值。

> 出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:06:09.393

这里有几个问题。首先，您似乎正在使用 Lift Record，如果是这种情况，您正在错误地实现您的验证逻辑。验证记录字段的正确方法是覆盖

```
def validations: List[ValidationFunction] 
```

其中 ValidationFunction 是类型别名

```
type ValidationFunction = ValueType => List[FieldError] 
```

在您的情况下，ValueType == String。

下一个问题是您的域特征。因为您对 validate 的调用已内联到类定义中，所以将在构造字段时调用它。显然，此时没有设置任何值，这就是为什么您看到 println 引用了一个空值。我想您看到它们的顺序与您的应用程序流程有关。您有一个已验证的现有记录，然后创建一个新记录，触发接下来的 2 个 println 语句。

# android - 在android设备中更改时区？

> ID：12175647
> 
> 赞同：0
> 
> 时间：2012-08-29T10:15:05.363
> 
> 标签：android, adb

我想通过 adb shell 更改时间和时区设置。我发现我可以使用更改时间

```
adb shell date -s YYYYMMDD.HHmmss 
```

但是，我不知道如何更改时区。

我有一台在 android 4.0.3 上运行的设备

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-30T11:29:52.277

获取当前全球时区：

```
adb shell settings get global time_zone 
```

设置时区：

```
adb shell settings put global time_zone Europe/Madrid 
```

时区列表：

[https://en.wikipedia.org/wiki/List_of_tz_database_time_zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T10:18:18.133

在stackover flow上找到了这个。希望能帮助到你：

我更改了 2 个文件来更改我的时区。

我不完全知道是否有必要，但它使事情保持同步：

/etc/timezone 您肯定需要更改的内容越多：

/etc/localtime 来自[http://www.cyberciti.biz/faq/linux-unix-set-tz-environment-variable/](http://www.cyberciti.biz/faq/linux-unix-set-tz-environment-variable/)您可以使用 tzselect 确定您想要的时区名称。

我从[http://www.cyberciti.biz/faq/howto-set-date-and-time-timezone-in-freebsd/](http://www.cyberciti.biz/faq/howto-set-date-and-time-timezone-in-freebsd/)获得灵感，并将我的时区文件从 /usr/share/zoneinfo/ 复制到 /etc/localtime .

/etc/timezone 是一个带有时区名称的文本文件。所以我只是更新了它以匹配 tzselect 提供的值。

# android - 如何在Android上获取wifi硬件信息

> ID：12175649
> 
> 赞同：1
> 
> 时间：2012-08-29T10:15:14.243
> 
> 标签：android, wifi

以下将为我提供基本的 wifi 信息，但我想要硬件信息：

**WiFiScanReceiver.java**

```
import java.util.List;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.wifi.ScanResult;
import android.net.wifi.WifiManager;
import android.util.Log;
import android.widget.Toast;

public class WiFiScanReceiver extends BroadcastReceiver {

    private static final String TAG = "WiFiScanReceiver";
    systemInfo systemInfo;

    public WiFiScanReceiver(systemInfo systemInfo) {
        super();
        this.systemInfo = systemInfo;
    }

    @Override
    public void onReceive(Context c, Intent intent) {
        List<ScanResult> results = systemInfo.wifi.getScanResults();
        ScanResult bestSignal = null;
        for (ScanResult result : results) {
            if (bestSignal == null
                    || WifiManager.compareSignalLevel(bestSignal.level,
                            result.level) < 0) bestSignal = result;
        }
        String message = String.format(
                "%s networks found. %s is the strongest.", results.size(),
                bestSignal.SSID);
        Toast.makeText(systemInfo, message, Toast.LENGTH_LONG).show();
        Log.d(TAG, "onReceive() message: " + message);
    }
} 
```

**系统信息.java**

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.List;

import android.app.Activity;
import android.app.ActivityManager;
import android.app.ActivityManager.MemoryInfo;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.IntentFilter;

import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.os.Build;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class systemInfo extends Activity implements OnClickListener {

    private static final String TAG = "WiFiDemo";
    WifiManager wifi;
    BroadcastReceiver receiver;
    TextView textStatus;
    Button buttonScan;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // Setup UI
        textStatus = (TextView) findViewById(R.id.textStatus);
        buttonScan = (Button) findViewById(R.id.buttonScan);
        buttonScan.setOnClickListener(this);
        // Setup WiFi
        wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        // Get WiFi status
        WifiInfo info = wifi.getConnectionInfo();
        textStatus.append("\n\nWiFi Status: " + info.toString());
        // List available networks
        List<WifiConfiguration> configs = wifi.getConfiguredNetworks();
        for (WifiConfiguration config : configs) {
            textStatus.append("\n\n" + config.toString());
        }
        // Register Broadcast Receiver
        if (receiver == null) receiver = new WiFiScanReceiver(this);
        registerReceiver(receiver, new IntentFilter(
                WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));
        Log.d(TAG, "onCreate()");
        MemoryInfo mi = new MemoryInfo();
        ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
        activityManager.getMemoryInfo(mi);
        long availableMegs = mi.availMem / 1048576L;
        System.out.println("availableMegs:::::::::::" + availableMegs);
    }

    @Override
    public void onStop() {
        unregisterReceiver(receiver);
    }

    public void onClick(View view) {
        Toast.makeText(this, "On Click Clicked. Toast to that!!!",
                Toast.LENGTH_LONG).show();
        if (view.getId() == R.id.buttonScan) {
            Log.d(TAG, "onClick() wifi.startScan()");
            wifi.startScan();
            String ab = getInfo();
            System.out.println("CPU INFORMATON:::::::::::::\n" + ab);
            textStatus.append("CPU INFORMATON:::::::::::::\n" + ab);
        }
    }

    private String getInfo() {
        StringBuffer sb = new StringBuffer();
        sb.append("abi: ").append(Build.CPU_ABI).append("\n");
        if (new File("/proc/cpuinfo").exists()) {
            try {
                BufferedReader br = new BufferedReader(new FileReader(new File(
                        "/proc/cpuinfo")));
                String aLine;
                while ((aLine = br.readLine()) != null) {
                    sb.append(aLine + "\n");
                }
                if (br != null) {
                    br.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }
} 
```

**权限是**

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

这给了我基本的wifi信息。但我想要硬件信息..

一个重要的区别是 CPU 架构。虽然几乎所有的安卓设备都使用 ARM CPU，但它有不同的版本，包括 armv5、armv5te、armv6、armv6 with VFP、armv7、armv7 with VFP、armv7 with neon 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:26:36.540

如果您的问题是*如何获取有关 WiFi 芯片的硬件信息*，那么答案很简单：Android 不提供这种数据，除了 MAC 地址（顺便说一句，这不是真正的硬件信息）。

# java - 具有二维数组的 Java 可变参数

> ID：12175651
> 
> 赞同：4
> 
> 时间：2012-08-29T10:15:23.220
> 
> 标签：java, arrays, variadic-functions

问题留在这里是因为人们回答了这个问题，我的问题是我使用的 API 版本与我拥有的文档不同步......事实上你可以这样做。

有没有办法在Java中使用二维数组作为需要数组可变参数的参数的参数？

我试图调用的函数是

```
public Long sadd(final byte[] key, final byte[]... members) { 
```

我有一个二维字节数组（byte [][] data=blah）

但是，如果我尝试打电话

```
sadd(key,data); 
```

我收到以下编译器错误：

（实参byte[][]无法通过方法调用转换为byte[]）

有没有办法将二维数组用作数组类型的可变参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T10:43:46.813

以下对我有用。也许你没有做你认为你在做的事？

```
@Test
public void test_varargs() {
   byte[] x = new byte[] { 1, 2, 3};
   byte[] y = new byte[] { 0, 1, 2};
   assertEquals(9L, sum(x,y));
   byte[][] z = new byte[][] { x,y };
   assertEquals(9L, sum(z));
}

public long sum(final byte[]... members) {
   long sum = 0;
   for (byte[] member : members) {
       for (byte x : member) {
         sum += x;
      }
   }
   return sum;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T10:18:32.487

您能否提供更多代码，因为这可以为我编译。

```
byte[][] data = new byte[1][];
byte[] key = new byte[1];

long sadd = sadd(key, data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-25T10:23:16.890

```
class A {
    void show(int[] ax,int[]...arr) {
        for (int is : ax) {
            System.out.println(is);
        }
        for (int[] a : arr) {
            for (int i : a) {
                System.out.println(i);
            }
        }
    }
}
public class abc{
    public static void main(String[] args) {
        A a = new A();
        int[] arr1= new int[]{10,20};
        int[][] arr2 = new int[][] { { 10, 20 }, { 20, 20 }, { 30, 20 } };
        a.show(arr1,arr2);  
    }
} 
```

在这里，我使用二维数组作为 var args 参数和一维数组作为固定参数。如果这可以帮助您，请参考此代码！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T10:26:13.887

这是不可能的，因为编译器无法推断出这两个维度。使用一维数组时，您可以将数组的长度确定为辅助参数的数量（那些不是强制性的）。

例如：假设您的方法定义包括`n`强制参数，并且在运行时提供`m`更多参数。这些`m`参数将组成辅助参数数组。长度为`m`。在二维数组的情况下，编译器必须为数组提供两个维度，例如：`dimension1 * dimension2 = m`.

# android - 如何在 Android 中发送消息？

> ID：12175654
> 
> 赞同：0
> 
> 时间：2012-08-29T10:15:30.093
> 
> 标签：android, button, message, send

目前我正在Android的消息撰写屏幕上工作，使用Intent显示消息撰写屏幕，然后我输入了电话号码和消息。

我已经`sendSMS`为发送按钮设置了一个方法，但是当我按下发送按钮时它没有调用`sendSMS` 方法。

如何在消息撰写屏幕中设置发送按钮的方法？请帮我。是否可以设置发送按钮的方法？

提前致谢

源代码供您参考：

**Texts.Java 类**

```
public class Texts extends Activity
{
     public void onCreate(Bundle savedInstanceState)
     {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.message_tab_screen);

            Button Compose =(Button) findViewById(R.id.button1);
            Compose.setOnClickListener(new Button.OnClickListener() 
            {
                public void onClick(View v)
                {
                    Intent intent = new Intent("android.intent.action.VIEW");
                    intent.putExtra("sms_body", "");
                    Uri data = Uri.parse("sms:");
                    intent.setData(data);
                    startActivity(intent);
                }
            });
     }

     //---sends an SMS message method
        private void sendSMS(String phoneNumber, String message)
        {        
                    System.out.println("SEND MESSAGE");
        }    

} 
```

**message_tab_screen.xml**文件

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:text="Message Compose " />       
    </RelativeLayout> 
```

![在此处输入图像描述](../Images/26a55dda1b66846aabfc13d68c92ffef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T09:49:41.790

使用内置短信应用发送短信：

```
Intent i = new Intent(android.content.Intent.ACTION_VIEW);

i.putExtra("address", "09090909; 092322424; 123456778");

i.putExtra("sms_body", "SMS Content");

i.setType("vnd.android-dir/mms-sms");

startActivity(i); 
```

发送没有 UI 的短信：

```
 SmsManager sms = SmsManager.getDefault();
 sms.sendTextMessage(phoneNumber, null, message, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:42:23.477

[在 Android 中创建 SMS 应用程序？](https://stackoverflow.com/questions/3616386/creating-a-sms-application-in-android)

[http://mobiforge.com/developing/story/sms-messaging-android](http://mobiforge.com/developing/story/sms-messaging-android)

试试这个示例来创建自定义 SMS 应用程序并为发送按钮设置您的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:50:28.630

```
public class MainActivity extends Activity {
   Button btnSendSMS;
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
        btnSendSMS.setOnClickListener(new View.OnClickListener()
        {
             public void onClick(View v)
            {
                 sendSMS(“5556”, “Hello my friends!”);
            }
        });
   }
   //---sends an SMS message to another device---
   private void sendSMS(String phoneNumber, String message)
   {
             SmsManager sms = SmsManager.getDefault();
             sms.sendTextMessage(phoneNumber, null, message, null, null);
   }
} 
```

使用此代码............

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-29T10:33:48.400

其实试试这个

```
btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
btnSendSMS.setOnClickListener(new View.OnClickListener()
{
       public void onClick(View v)
       {
             sendSMS(“5556”, “Hello my friends!”);
        }
}); 
```

# mysql - 如何将 MySQL 子查询中的所有不同值选择到 group_concat 中？

> ID：12175659
> 
> 赞同：1
> 
> 时间：2012-08-29T10:15:45.857
> 
> 标签：mysql, select, subquery, substring, group-concat

我正在运行`MySQL 5.0.88`并进行搜索`presearch`以确定我正在运行的搜索`number of records`。`min-max values`以及`element strings of distinct values`.

查询的结果将如下所示：

```
 records      min-price    max-price   sizeRange   colorRange
  1234         9.00         124.00      S,M,L,XL    red,blue,white,orange 
```

我的查询如下所示：

```
SELECT    COUNT(recordcount) AS total_records
        , MIN(min_price_ek) AS ek_min
        , MAX(max_price_ek) AS ek_max
        , SUBSTRING_INDEX( GROUP_CONCAT( DISTINCT sizeRange ), ',', 10  ) AS sz_rng
        , SUBSTRING_INDEX( GROUP_CONCAT( DISTINCT colorRange ), ',', 16  ) AS cl_rng 

        FROM (SELECT  a.id AS recordcount
                    , a.nos
                    , a.nos_anzeige
                    , MAX(<cfif variables.preislisten neq "">IFNULL(p.ek, a.preis_ek)<cfelse>a.preis_ek</cfif>) AS max_price_ek
                    , MIN(<cfif variables.preislisten neq "">IFNULL(p.ek, a.preis_ek)<cfelse>a.preis_ek</cfif>) AS min_price_ek
                    , a.groesse AS sizeRange
                    , zu.systemfarbe AS colorRange

              FROM artikelstammdaten a

              LEFT JOIN farbenzuordnung zu 
                ON a.farbe = zu.farbe 

              WHERE a.aktiv = "ja"
          AND a.artikelnummer LIKE <cfqueryparam value="#art#" cfsqltype="cf_sql_varchar">

              GROUP BY a.iln, a.artikelnummer, a.preis_aktuell, a.artikelbezeichnung
              HAVING (( sum(a.bestand) != 0 ) OR (a.nos = "ja" AND a.nos_anzeige = "ja" ))

        ) AS temp 
```

这工作正常，但我仍然无法选择所有可用的尺寸/颜色。我得到了一些价值，但不是全部。

我的表如下所示：

```
 CREATE TABLE dummy (
 `id` INT(11) NOT NULL AUTO_INCREMENT,
 `iln` VARCHAR(13) NULL DEFAULT NULL,
 `ean` VARCHAR(35) NULL DEFAULT NULL,
 `artikelnummer` VARCHAR(35) NULL DEFAULT NULL,
 `preis_ek` DECIMAL(12,2) NULL DEFAULT NULL,
 `preis_vk` DECIMAL(12,2) NULL DEFAULT NULL,
 `firma` VARCHAR(35) NULL DEFAULT NULL,
 `nos` VARCHAR(4) NULL DEFAULT NULL,
 `nos_anzeige` VARCHAR(4) NULL DEFAULT NULL,
 `aktiv` VARCHAR(4) NULL DEFAULT NULL,
 `bestand` DECIMAL(10,0) NULL DEFAULT '0'
  ) 
```

因此，产品将存储在表中，每个尺寸都有一个条目，如下所示：

```
 product_id      ean           size     price
 1234          111111111111    S        9.99
 1234          111111111112    M        9.99
 1234          111111111113... 
```

从我在 MySQL 中得到的结果来看，我认为我只选择了`S`文章的第一个大小 ()，并创建了记录集的所有不同大小的`GROUP_CONCAT of all DISTINCT first sizes`vs a `GROUP_CONCAT`。

**问题**：有人可以给我一个关于我需要如何调整我的指针`GROUP_CONCAT`吗？

谢谢！

**这是我目前正在测试的查询**

```
SELECT    COUNT(recordcount) AS total_records
        , MIN(min_price_ek) AS ek_min
        , MAX(max_price_ek) AS ek_max
        , SUBSTRING_INDEX( GROUP_CONCAT( DISTINCT sizeRange ), ',', 10  ) AS sz_rng
        , SUBSTRING_INDEX( GROUP_CONCAT( DISTINCT colorRange ), ',', 16  ) AS cl_rng 

        FROM (SELECT  a.id AS recordcount
                    , a.nos
                    , a.nos_anzeige
                    , MAX(a.preis_ek) AS max_price_ek
                    , MIN(a.preis_ek) AS min_price_ek
                    , a.groesse AS sizeRange
                    , zu.systemfarbe AS colorRange

                FROM artikelstammdaten a

                LEFT JOIN farbenzuordnung zu 
                    ON a.farbe = zu.farbe 
                WHERE a.aktiv = "ja"
                AND a.artikelnummer LIKE "%402%"

                GROUP BY a.iln, a.artikelnummer
                HAVING (( sum(a.bestand) != 0 ) OR (a.nos = "ja" AND a.nos_anzeige = "ja" ))

        ) AS temp 
```

我已经删除了第三张表（货币查找/左连接），因为无论有没有它，结果都是错误的。这是剩下的两个表：

```
 ** artikelstammdaten = product data **
   CREATE TABLE dummy (
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `iln` VARCHAR(13) NULL DEFAULT NULL,
    `ean` VARCHAR(35) NULL DEFAULT NULL,
    `artikelnummer` VARCHAR(35) NULL DEFAULT NULL,
    `groesse` VARCHAR(10) NULL DEFAULT NULL,
    `farbe` VARCHAR(35) NULL DEFAULT NULL,
    `preis_ek` DECIMAL(12,2) NULL DEFAULT NULL,
    `preis_vk` DECIMAL(12,2) NULL DEFAULT NULL,
    `preis_aktuell` DECIMAL(12,2) NULL DEFAULT NULL,
    `marke` VARCHAR(35) NULL DEFAULT NULL,
    `nos` VARCHAR(4) NULL DEFAULT NULL,
    `nos_anzeige` VARCHAR(4) NULL DEFAULT NULL,
    `aktiv` VARCHAR(4) NULL DEFAULT NULL,
    `modus` VARCHAR(4) NULL DEFAULT NULL,
    `bestand` DECIMAL(10,0) NULL DEFAULT '0'
 )

   ** global colors / farbenzuordnung **
   CREATE TABLE dummy (
    `ILN` VARCHAR(13) NOT NULL,
    `farbe` VARCHAR(35) NOT NULL,
    `systemfarbe` VARCHAR(35) NOT NULL,
    `systemfarbe_en` VARCHAR(35) NOT NULL
   ) 
```

我现在正在测试一种产品（`402`）。该产品有 4 种尺寸和两种颜色，因此数据库中有 8 条记录。在其上运行查询应该以 Group__concat 的形式返回`s,m,l,xl`大小和颜色。`red, black`但是我只得到（仲裁？） `s`和`red`结果。

仍然不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:55:14.550

您可以使用[GROUP_CONCAT 和 ORDER BY CLAUSE](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)进行如下查询，

注意：您需要根据您的要求在以下查询中定义条件

```
SELECT    COUNT(recordcount) AS total_records
        , MIN(min_price_ek) AS ek_min
        , MAX(max_price_ek) AS ek_max
        , SUBSTRING_INDEX( GROUP_CONCAT( DISTINCT sizeRange ORDER BY [criteria]), ',', 20  ) AS sz_rng
        , SUBSTRING_INDEX( GROUP_CONCAT( DISTINCT colorRange ORDER BY [criteria]), ',', 20  ) AS cl_rng 

        FROM (SELECT  a.id AS recordcount
                    , a.nos
                    , a.nos_anzeige
                    , MAX(<cfif variables.preislisten neq "">IFNULL(p.ek, a.preis_ek)<cfelse>a.preis_ek</cfif>) AS max_price_ek
                    , MIN(<cfif variables.preislisten neq "">IFNULL(p.ek, a.preis_ek)<cfelse>a.preis_ek</cfif>) AS min_price_ek
                    , a.groesse AS sizeRange
                    , zu.systemfarbe AS colorRange

              FROM artikelstammdaten a

              LEFT JOIN farbenzuordnung zu 
                ON a.farbe = zu.farbe 

              WHERE a.aktiv = "ja"
          AND a.artikelnummer LIKE <cfqueryparam value="#art#" cfsqltype="cf_sql_varchar">

              GROUP BY a.iln, a.artikelnummer, a.preis_aktuell, a.artikelbezeichnung
              HAVING (( sum(a.bestand) != 0 ) OR (a.nos = "ja" AND a.nos_anzeige = "ja" ))

        ) AS temp 
```

希望能帮助到你...

# django - 如何仅为某些应用程序将变量传递给模板

> ID：12175665
> 
> 赞同：0
> 
> 时间：2012-08-29T10:16:04.483
> 
> 标签：django

我有一个 django 项目，有很多应用程序。现在我只需要为某些应用程序将一些变量添加到上下文字典中。django 是否提供任何选项来实现这一点？我知道装饰器可能会有所帮助。还有其他方法吗，例如自动运行但仅适用于特定应用程序的中间件/上下文处理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:25:02.160

像这样的上下文处理器可以满足您的需求：

```
from django.core.urlresolvers import resolve

def app_var(request):
    if resolve(request.path).app_name == 'YOUR_APP_NAME':
        return {'CUSTOM_VAR': 'VALUE'}
    return {} 
```

要安装上下文处理器，将代码放在您喜欢的任何文件中，`'folder.file.app_var'`然后`CONTEXT_PROCESSORS`在您的`settings.py`.

# matlab - 如何计算和绘制垂直于已知矢量并通过已知点的平面？

> ID：12175667
> 
> 赞同：1
> 
> 时间：2012-08-29T10:16:10.817
> 
> 标签：matlab, linear-algebra

我想绘制垂直于矢量的平面，并用 Matlab 穿过一个点。我的向量有坐标`v1 = [2,i]`，我的点有坐标`com_m1 = [1,i]`。

我都试过了：

```
xx=(-15:-6:0.25);
yy=(-10:-2:0.25);
for i = 1:length(xx)
    for j = 1:length(yy)
            zz_m1(j,i)=(v1(2,2)*(xx(i) - com1(1,1)) + v1(2,2)*(yy(j)-com1(1,2)))/v1(2,3) + com1(1,3);
    end
end
surf(xx,yy,zz_m1, 'FaceColor','red','EdgeColor','none') % Plotting the surface 
```

和

```
[xx, yy]=meshgrid(-15:-6:0.25,-10:-1:0.25);
zz_m1=(v1(2,2)*(xx - com1(1,1)) + v1(2,2)*(yy-com1(1,2)))/v1(2,3) + com1(1,3);
surf(xx,yy,zz_m1, 'FaceColor','red','EdgeColor','none') 
```

但两者都没有奏效。谁能帮我理解我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:05:36.340

您的代码中存在一些问题。最大的是这条线，`xx=(-15:-6:0.25);`它产生一个空矩阵，因为您要求一个从 开始`-15`并继续到的向量`-Inf`。

如果您不理解错误，那么您可能应该阅读[冒号符号文档](http://www.mathworks.com/help/techdoc/ref/colon.html) 您的矩阵`yy`与`xx`.

此外，我认为您对飞机的计算不正确。我在本地使用随机生成的代码尝试了您的代码`v1`，`com1`并且该线与飞机不正常。

这是一个很好的解释，如何计算通过一个点并垂直于已知矢量的平面的方程：http: [//msemac.redwoods.edu/~darnold/math50c/matlab/planes/index.xhtml](http://msemac.redwoods.edu/~darnold/math50c/matlab/planes/index.xhtml)（向下滚动到**A Plane is a Surface**）

# iphone - 如何检查 iPhone 应用程序用户评价或审查的应用程序与否

> ID：12175669
> 
> 赞同：3
> 
> 时间：2012-08-29T10:16:39.727
> 
> 标签：iphone, app-store, app-store-connect

我的 iPhone 应用程序现在从上周开始在 App Store 上，有 300 多次下载，但只有 3 位用户评价和审查应用程序，现在我正计划更新所以有没有办法检查正在使用该应用程序的用户是否评价/审查应用商店与否？因此，如果用户尚未审核，我可以提醒审核/评分。如果是，则不是问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T11:13:07.743

我建议您查看 Appirater，它是一个免费的 GIT 项目，`UIAlertView`每 10 次启动或每 8 天（您可以更改的数字）自动显示一次，提示用户对您的应用程序进行评分。它包括“review/rate, not now, and don't ask me again”按钮，效果很好，这里是链接：[github.com/arashpayan/appirater](http://github.com/arashpayan/appirater)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T10:28:32.460

目前无法确定您的应用中的特定用户是否对您的应用进行评分/评论。即使在提示用户这样做并且他们点击率之后，也无法确认他们确实留下了任何形式的反馈。

我知道您需要此信息，这样您就可以避免提示已经为您的应用评分的用户，但老实说，我建议您再次提示他们。考虑到它是一个更新，它是您的应用程序的不同版本，并且最新版本的评级与以前的评级是分开的。此外，这些用户可能有新的东西要说，所以我认为你最好至少提示任何给定版本的应用程序的所有用户一次。

# actionscript-3 - TextArea 字母的效果 (Flex)

> ID：12175670
> 
> 赞同：1
> 
> 时间：2012-08-29T10:16:40.497
> 
> 标签：actionscript-3, apache-flex, mxml

如何为组件 TextArea (Spark 4) 中的所有字母添加效果（阴影、发光）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T08:32:55.220

我看到这是一个老问题，但是由于我今天遇到了同样的问题，所以我发布了我的解决方案。

您可以按照[此处](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/TextArea.html)所述访问using的`RichEditableText`组件： `TextArea``textDisplay`

> RichEditableText 可以作为 textDisplay 访问，而 Scroller 可以作为滚动条访问

`RichEditableText`是从 扩展而来的`UIComponent`，因此`filters`可以应用于`UIComponents`（[“您可以将过滤器应用于从 UIComponent 派生的任何可视组件”](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/RichEditableText.html)），可以应用于它。

例如，为了将 a`DropShadowFilter`应用于组件中的所有字母，`myTextArea:TextArea`我使用了以下代码行：

```
var richTextComponent:UIComponent = myTextArea.textDisplay as UIComponent;
var shadow:spark.filters.DropShadowFilter = new spark.filters.DropShadowFilter;
richTextComponent.filters = [shadow]; 
```

希望这可以帮助某人:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:49:14.837

只需将皮肤添加到您的 TextArea 组件，然后将阴影添加到皮肤内的 RichEditableText。

```
<fx:Declarations>
    <s:DropShadowFilter id="shadow2"/>
</fx:Declarations>

<s:RichEditableText id="textDisplay" heightInLines="10" widthInChars="15"  filters="{[shadow2]}"/> 
```

它对我有用，你只需调整阴影以获得漂亮的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:14:41.453

我不认为你可以使用 Flex 来做到这一点（或者至少我从来没有）。您需要使用 AS3 来完成

```
<s:Label id="label1" text="Shadow Me" />

<fx:Script>
    <![CDATA[
    import flash.filters.*;

    private function creationComplete():void{
        var dropshadow:DropShadowFilter = new DropShadowFilter( 3,90,0x000000,.5,4,4,3,3 );
        this.label1.filters = [ dropshadow ];
    }
    ]]>
</fx:Script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T12:14:13.737

通过使用 Filter 类，我们可以为 as:TextArea 组件应用阴影发光效果。示例代码是：

```
<s:TextArea contentBackgroundAlpha="0" borderAlpha="0">
        <s:filters>
              <s:DropShadowFilter distance="5" angle="45" color="#666666"/>
        </s:filters>
        <s:content>
              Testing text area content
        </s:content>
  </s:TextArea> 
```

请参阅链接[http://www.roseindia.net/tutorial/flex/flex4/components/filters.html](http://www.roseindia.net/tutorial/flex/flex4/components/filters.html)以应用更多过滤器（DropShadowFilter、GlowFilter、BlurFilter 和 BevelFilter）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T11:45:36.673

```
contentBackgroundAlpha="0" borderVisible="false" 
```

# android - 电子邮件应用程序给出错误“没有应用程序可以执行此操作”

> ID：12175673
> 
> 赞同：0
> 
> 时间：2012-08-29T10:16:55.343
> 
> 标签：android, email

我正在尝试一个简单的电子邮件应用程序。我引用了这个链接 [http://www.mkyong.com/android/how-to-send-email-in-android/](http://www.mkyong.com/android/how-to-send-email-in-android/)

但我在模拟器和真实设备上收到错误“没有应用程序可以执行此操作”。如何克服此错误。也如上面发送按钮上的链接中所述，出现选择电子邮件客户端选项。如何获取这个？有人可以指导我吗？提前谢谢。我的代码是：

```
package com.example.androidsample4;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MakeComment extends Activity
{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.comment);
        TextView tv1=(TextView)findViewById(R.id.textView1);
        TextView tv2=(TextView)findViewById(R.id.textView2);
        TextView tv3=(TextView)findViewById(R.id.textView3);
        TextView tv4=(TextView)findViewById(R.id.textView4);
        TextView tv5=(TextView)findViewById(R.id.textView5);
        final EditText ed1=(EditText)findViewById(R.id.editText1);
        EditText ed2=(EditText)findViewById(R.id.editText2);
        final EditText ed3=(EditText)findViewById(R.id.editText3);
        final EditText ed4=(EditText)findViewById(R.id.editText4);
        ed3.setKeyListener(null);
        Button b1=(Button)findViewById(R.id.button1);
        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                  //String to = ed3.getText().toString();
                  String name = ed1.getText().toString();
                  String message = ed4.getText().toString();

                  Intent email = new Intent(Intent.ACTION_SENDTO);
                 // email.putExtra(Intent.EXTRA_EMAIL, new String[]{ to});
                  //email.putExtra(Intent.EXTRA_CC, new String[]{ to});
                  //email.putExtra(Intent.EXTRA_BCC, new String[]{to});
                  email.putExtra(Intent.EXTRA_SUBJECT, name);
                  email.putExtra(Intent.EXTRA_TEXT, message);

                  //need this to prompts email client only
                  email.setType("message/rfc822");

                  startActivity(Intent.createChooser(email, "Choose an Email client :"));

            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:21:47.067

除非您安装可以处理电子邮件的应用程序，否则它将无法在模拟器上运行。默认情况下没有安装这样的应用程序。尝试在您的真实设备上安装电子邮件客户端并重新测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:41:34.957

尝试这个：

```
Intent emailIntent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts(
            "mailto","abc@gmail.com", null));
emailIntent.putExtra(Intent.EXTRA_SUBJECT, "EXTRA_SUBJECT");
startActivity(Intent.createChooser(emailIntent, "Send email...")); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-15T07:55:41.770

这将仅在您的选择器中显示电子邮件应用程序：

```
 private void sendMail() {
        String recipientList = "recipient@gmail.com,recipient2@gmail.com";
        String[] recipients = recipientList.split(",");

        String subject = "App Subject - Help me";

        Intent intent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts(
                "mailto","emailaddress@gmail.com", null));
        intent.putExtra(Intent.EXTRA_EMAIL, recipients);
        intent.putExtra(Intent.EXTRA_SUBJECT, subject);

        startActivity(Intent.createChooser(intent, "Choose an Email Client"));
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T10:33:19.053

由于您尚未发布代码，我们无法告诉您您错在哪里。试试下面的代码（适用于设备和模拟器），如果它有效，那么你的部分有问题，如果不尝试安装另一个电子邮件客户端。

```
TextView email = (TextView) findViewById(R.id.email);
email.setText(Html.fromHtml("<a href=\"mailto:youremail@gmail.com\">E-mail</a>"));
email.setMovementMethod(LinkMovementMethod.getInstance()); 
```

“选择电子邮件客户端选项” - 该窗口由 Android 自动填充。

# java - java.math.BigInteger 的用法错了吗？

> ID：12175674
> 
> 赞同：4
> 
> 时间：2012-08-29T10:16:56.627
> 
> 标签：java, biginteger

我玩弄 java.math.BigInteger。这是我的java类，

```
public class BigIntegerTest{
   public static void main(String[] args) {
     BigInteger fiveThousand = new BigInteger("5000");
     BigInteger fiftyThousand = new BigInteger("50000");
     BigInteger fiveHundredThousand = new BigInteger("500000");
     BigInteger total = BigInteger.ZERO;
     total.add(fiveThousand);
     total.add(fiftyThousand);
     total.add(fiveHundredThousand);
     System.out.println(total);
 }
} 
```

我认为结果是`555000`。但实际是`0`。为什么 ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-29T10:18:04.077

`BigInteger`对象是不可变的。一旦创建，它们的值就无法更改。

当您调用`.add`一个*新*的BigInteger 对象并返回时，如果您想访问它的值，必须存储它。

```
BigInteger total = BigInteger.ZERO;
total = total.add(fiveThousand);
total = total.add(fiftyThousand);
total = total.add(fiveHundredThousand);
System.out.println(total); 
```

（可以这么说`total = total.add(...)`，因为它只是删除了对*旧* `total`对象的引用并将其重新分配给由 创建的*新*`.add`对象的引用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T10:31:22.497

试试这个

```
 BigInteger fiveThousand = new BigInteger("5000");
 BigInteger fiftyThousand = new BigInteger("50000");
 BigInteger fiveHundredThousand = new BigInteger("500000");
 BigInteger total = BigInteger.ZERO;

 total = total.add(fiveThousand).add(fiftyThousand).add(fiveHundredThousand);
 System.out.println(total); 
```

# php - 模块drupal 7中的自定义

> ID：12175685
> 
> 赞同：-2
> 
> 时间：2012-08-29T10:17:44.543
> 
> 标签：php, html, drupal

我正在工作门户网站上工作，在此应用程序中，当求职者申请工作时，他会在收件箱中收到电子邮件和私人消息，但我不知道如何发送求职者（比如说 abc）已申请的相同通知工作...给管理工作的管理员/雇主。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:29:18.613

你看过[规则](http://drupal.org/project/rules)模块吗？这是一种设置可由用户触发的操作的非常简单且强大的方法。您可以为用户申请工作时设置规则，它会触发将发送给管理员的电子邮件。

那应该是一个很好的起点。这是一个广泛使用的模块，因此有大量关于它的[文档](http://drupal.org/documentation/modules/rules)、教程和文章。希望有帮助！

# c# - 在提交时影响另一个文件

> ID：12175689
> 
> 赞同：0
> 
> 时间：2012-08-29T10:17:54.980
> 
> 标签：c#, javascript, asp.net, forms

我有一个在不同窗口中弹出的上传功能，当我提交后，我想将信息发送回上传窗口打开的页面。

用 ASP.net 或 C# 有可能吗？或者我必须使用一些 javascript 吗？如何？

我的 2 页：news.aspx - 包含我的新闻的表单视图。和一个包含一些输入的表单。这是打开上传页面的链接...

uploader.aspx - 包含我的上传控制器和要上传的 C# 代码。这应该将我的 C# 代码中的字符串发送回 news.aspx 并将其放在我的输入字段或标签之一中，这并不重要。

uploader.aspx 文件：

```
<form id="form1" runat="server">
<div>
Vælg en fil at uploade:<br />
    <asp:FileUpLoad id="FileUpLoad1" runat="server" />
    <asp:Button id="UploadBtn" Text="Upload File" OnClick="UploadBtn_Click" runat="server" Width="105px" />
    <br />
    <asp:Label ID="Label1" runat="server" Text=""></asp:Label>
</div>
</form> 
```

代码背后：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class admin_Default2 : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}
protected void UploadBtn_Click(object sender, EventArgs e) {

    Label1.Text = "Status: Uploader...";
    if (FileUpLoad1.HasFile) {
        FileUpLoad1.SaveAs(@"C:\Users\138409\Documents\Visual Studio 2010\Projects\Musicon\img\news\" + FileUpLoad1.FileName);
        Label1.Text = "Status: " + FileUpLoad1.FileName + " er blevet uploadet";
    } else {
        Label1.Text = "Status: Filen blev ikke uploadet...";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:56:16.037

这是一些用于创建弹出窗口的 Javascript 代码，并在弹出窗口关闭之前检索一些信息。（稍后我会添加一个 jQuery 示例）

```
//Site1.Master
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site1.master.cs" Inherits="PopupRedirect.Site1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html>

//Page1.aspx
<%@ Page Title="" Language="C#" MasterPageFile="Site1.Master" AutoEventWireup="true" CodeBehind="Page1.aspx.cs" Inherits="PopupRedirect.Page1" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
  <script type="text/javascript">
    var message = "Hello World!";

    var closeWindow = function(event) {
      event.preventDefault();
      window.close();
    };

    window.onload = function() {
      document.getElementById('upload').addEventListener('click', closeWindow, false);
    };
  </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
  <button id="upload">Upload File</button>
</asp:Content>

//UploadPage.aspx
<%@ Page Title="" Language="C#" MasterPageFile="Site1.Master" AutoEventWireup="true" CodeBehind="UploadPage.aspx.cs" Inherits="PopupRedirect.UploadPage" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
  <script type="text/javascript">
    var popupWindow;
    var windowOptions = "menubar=yes,location=yes,resizable=no,scrollbars=no,status=yes,width=350,height=350";
    var upload = function (event) {
      event.preventDefault();

      popupWindow = window.open("Page1.aspx", "Upload Page", windowOptions);
      popupWindow.onbeforeunload = pageClose;
    };

    var pageLoad = function(event) {
      document.getElementById('uploadLink').addEventListener('click', upload, false);
    };

    var pageClose = function (event) {
      //put the code here that you want to execute when the window is done.
      //like getting the value of some javascript variables
      if(typeof (popupWindow.message) != "undefined") {
        alert(popupWindow.message);
      }
    };

    window.onload = pageLoad;

  </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
  <span>Welcome to this page! Click to upload.</span>
  <button id="uploadLink">Upload</button>
</asp:Content> 
```

# wpf - 从控件继承与创建新控件模板

> ID：12175693
> 
> 赞同：3
> 
> 时间：2012-08-29T10:18:09.683
> 
> 标签：wpf, mvvm, custom-controls, controltemplate

我正在创建一个 WPF 应用程序（它也是基于 MVVM 的），在决定是继承和创建自定义控件还是为该控件创建新样式模板时应该考虑什么。

我应该注意，我所有修改过的控件以后都应该被其他将它们作为单独的程序集接收的开发人员使用。

例如 - 水印文本框：您可以创建[自定义控件](http://joyfulwpf.blogspot.co.il/2009/05/watermarktextbox-by-inheriting-textbox.html)或创建[新样式](http://joyfulwpf.blogspot.co.il/2009/02/wpf-watermark-textbox-using-xaml-style.html)（注意两者都来自同一个博客......）。

是否有任何“经验法则”来帮助决定一种方式与另一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:19:41.390

通常您会继承以添加功能并更改模板以更改外观。因此，如果它比原始控件做更多的事情，我会使用一个子类。（当然，您也可以通过模板在某种程度上扩展功能，但这有点离题。）

# android - 如何查找我在android ndk中有pid的进程的cpu使用情况

> ID：12175695
> 
> 赞同：3
> 
> 时间：2012-08-29T10:18:16.270
> 
> 标签：android, linux, android-ndk, cpu, proc

我要获取进程的 pid，并且我想计算我在 android ndk 中有 pid 的进程的 cpu 使用率。我是 ndk 的新手。任何人都知道如何做到这一点，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:56:32.897

[从这个讨论](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/esDbHDzJidc)中，我发现在 Android 上获取这些信息是不可能的。而且我在 Android 上使用了许多任务管理器，但没有一个不提供此类数据（它们仅显示内存使用情况）。

**更新：**

看起来您的问题与[此](https://stackoverflow.com/questions/11486570/memory-and-cpu-per-process-android)问题重复。

因此，您需要做的就是分析文件`/proc/<pid>/stat`以获取 CPU 使用率。

**更新#2：**

从源代码[Android top.c](http://source-android.frandroid.com/system/core/toolbox/top.c)我发现了如何在函数中获取进程使用情况`print_procs`：

```
proc->delta_time * 100 / total_delta_time 
```

# asp.net-mvc-4 - 在 ASP.NET MVC 中为 KendoUI 网格控件中的每一行添加一个包含超链接的列

> ID：12175697
> 
> 赞同：5
> 
> 时间：2012-08-29T10:18:18.650
> 
> 标签：asp.net-mvc-4, kendo-ui

这是包含 KendoUI 网格控件的视图：我想在 Date of creation 列之前添加一个包含超链接的新列。

```
@using Kendo.Mvc.UI 
@model IEnumerable<ExamplekendoDropdown.Models.FacilityGroup>

@{
    ViewBag.Title = "Grid";
}

<table width="700">
<tr>
<td align="center">

<table width="1000">
<tr>
<td align="left">
@using (Html.BeginForm("Grid", "Grid", FormMethod.Get))

{
    <table>
    <tr>
    <td>
    <span>Facility Group Name</span>
    </td>
    <td>
    @(Html.Kendo().AutoComplete()
                   .Name("FacilityGroupName")
                   .Value("")
                   .Enable(true)
                ) 
    @Html.Hidden("FacilityGroupName")
    </td>
    </tr>
    <tr>
    <td>
    <input id="Submit1" type="submit" value="Search" />
    </td>
    </tr>
    </table>
}

</td>
</tr>
<tr>
<td align="center" >
@(Html.Kendo().Grid(Model)
    .Name("Grid")

    .Columns(columns =>
        {
                columns.Bound(p => p.FacilityGroupId);

                    //columns.Bound(@Html.ActionLink("Create Facility", "Facility"));

                columns.Bound(p =>p.FaclityGroupName);
                columns.Bound(p => p.status).Width(80);
                columns.Bound(p => p.CreationDate);
                columns.Command(command => { command.Edit();  });
        })

        //.ToolBar(toolbar =>toolbar.Create())
        //.Editable(editable => editable.Mode(GridEditMode.PopUp))

        .Editable(editable => editable.Mode(GridEditMode.PopUp).TemplateName("EditUserPopupTemplate")
            .Window(w => w.Title("Facility").Name("editWindow").Width(300).Height(300)))
        .Pageable()
        .Sortable()
        .Scrollable()
        .DataSource(datasource => datasource
            .Server()
            .Model(model => model.Id(p => p.FacilityGroupId ))
            .Read("Grid", "Grid")
            .Update("Update", "Grid")

            //.Create("Create","Grid")
            //.Destroy("Destroy","Grid")
            )
                )

<script type="text/javascript">
    $(document).ready(function () {
        $("form.k-edit-form").kendoValidator();
    });

</script>

</td>
</tr>
</table>

 </td>
</tr>
</table> 
```

现在我需要在包含超链接的“创建日期”列之前添加另一列。请分享您的意见谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T22:04:10.137

但是，如果您使用的是 ajax，为什么不这样做呢？

```
Ajax().ClientTemplate("<a href='" + Url.Action("YourAction", "YourController") +"/#= Id #'" +">#=FileName#</a>");

if server()
columns.Bound(p => p.ProductID).Template(@<text>
                 @Html.ActionLink("Show Product Details", "ProductDetails", new { id = @item.ProductID } )>
                 </text>); 
```

[这个例子](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/faq)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-12T22:16:40.397

```
columns.Template(@<text></text>).ClientTemplate(
    @Html.ActionLink("Send Reset Email", "Login", new { loginButton = "reset",activate=true,fromAdmin=true,rowField="#=rowField#" }).ToHtmlString()
); 
```

这对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T20:02:33.243

您只需要使用**模板**方法进行服务器绑定。（ClientTemplate 用于 Ajax 绑定）。您不需要将其绑定到特定属性，除非您想将列标题关联到按该属性进行过滤/排序/分组。

```
columns.Template(@<text>@Html.ActionLink("Create Facility", "Facility")</text>) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T13:11:23.213

您可以使用 Template 和 ClientTemplate 来获取带有超链接的列。

```
columns.Bound(p => p.CreationDate)
    .Template(@<text><a href="">@item.CreationDate</a></text>)
    .ClientTemplate("<a href=''>#CreationDate<a/>").Title("Link");
columns.Bound(p => p.CreationDate); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-07T07:08:59.317

```
columns.Template(@<text></text>)
       .ClientTemplate("<a href='" + Url.Action("Index", "Home") + "'>Create Facility</a>")
       .HtmlAttributes(new { style = "text-align: left;" })
       .Width(60); 
```

这对我有用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-19T08:48:06.000

如果您的网格有服务器绑定，请使用：

```
 columns.Bound(x => x.ProjectCode)
          .Template(items => Html.ActionLink(items.ProjectCode, "Manage", "Project", new {projectId = items.ProjectId}, null)); 
```

# php - Magento：同时显示包括和不包括在内。单一产品增值税价格

> ID：12175698
> 
> 赞同：0
> 
> 时间：2012-08-29T10:18:21.290
> 
> 标签：php, magento

我为产品创建了一个自定义是/否属性，该属性将确定是否显示包含和不包含增值税或仅包含（我的默认值）的产品价格。Magento 可以做到这一点，但不适用于特定产品。我不得不修改 price.phtml 文件以通过更改来显示两个价格：

```
<?php if ($_taxHelper->displayBothPrices()): ?> 
```

至：

```
<?php if ($_taxHelper->displayBothPrices() || $_product->getData('show_both_prices')): ?> 
```

这将显示格式化为显示两种格式的价格。IE

> 不包括。税费：856.80 英镑
> 
> 包括。税费：856.80 英镑

但是，您可以看到价格计算实际上并未完成，因为两者都显示了包含增值税的价格。

我已将其追溯到税务助手中的一段代码（app/code/Mage/Tax/Helper/Data.php）

```
if ($percent != 0) {
    $price = $this->getCalculator()->round($price); // price = 714
    // price changes from the excl VAT to including VAT on line below.
    $price = $this->_calculatePrice($price, $percent, true); // now 856.8
} 
```

这是似乎正在改变价格的功能。尝试传递 FALSE 而不是 true，但它似乎随后以某种方式被视为特价产品：S

```
protected function _calculatePrice($price, $percent, $type)
{
    if ($type) {
        return $price * (1+($percent/100));
    } else {
        return $price/(1+$percent/100);
    }
} 
```

我需要以某种方式模仿“显示两个价格”代码的工作原理，到目前为止我尝试过的任何东西都没有奏效。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:01:32.873

我会避免在价格代码渲染块中走得太远，因为要弄清楚那里发生了什么很复杂。

您可以使用 system->config->tax->price 显示设置将前端设置为显示价格 - 两者。

现在您可以查看您的价格是否正确通过。如果没有，请检查您的税/增值税设置和税率。

解决这个问题后，您可以考虑尝试一种不同的方法来选择性地显示/隐藏 inc/ex 选项。如果您有选择地向类别列表和产品页面添加一个类，这可以在 CSS 中完成。在列表/视图页面中，在 li 标记类所在的位置放置如下内容：

if($_item->getWhatever()==1) echo 'whatever'

然后在css中：

.whatever .price- exclude-tax {display:none;}

这个类取决于你的属性。当然你只是隐瞒了前增值税价格，但我怀疑有人会注意。

# ios - OSX 10.7 下 ubiquityIdentityToken 的等价物

> ID：12175705
> 
> 赞同：1
> 
> 时间：2012-08-29T10:18:36.527
> 
> 标签：ios, icloud, nsfilemanager

[根据Apple 的 iCloud 设计指南](http://developer.apple.com/library/mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html#//apple_ref/doc/uid/TP40012094-CH6-SW13)“准备您的应用程序以使用 iCloud”部分，我正在尝试向我的 iOS-5.1 应用程序添加 iCloud 支持。它说：

> 在您的应用启动过程的早期——在 application:didFinishLaunchingWithOptions: 方法 (iOS) 或 applicationDidFinishLaunching: 方法 (OS X) 中，通过调用 NSFileManager 方法 ubiquityIdentityToken 检查 iCloud 可用性，如下所示：

`id currentiCloudToken = [[NSFileManager defaultManager] ubiquityIdentityToken];`

问题是，这种方法 ( `ubiquityIdentityToken`) 在 OS X v10.8 及更高版本中可用，而我只安装了 10.7.4。

如果我在 10.7 下进行开发，是否有任何解决方法或其他解决方案？为什么这种方法的可用性与 OSX 版本相关，而不是与 iOS 版本相关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T23:51:41.207

安德里亚的回答涵盖了您的第一个问题。

关于您关于为什么会出现这种情况的第二个问题：根据*iOS* [NSFileManager](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)类文档，`ubiquityIdentityToken`仅适用于 iOS 6.0+。您可能一直在阅读 OS X 文章`NSFileManager`而不是 iOS 文章，因此您看到的是 OS X 要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:15:04.210

来自 OS X 发行说明：

> 在 Mac OS 10.7 中，检查用户是否在启用数据和文档的情况下登录 iCloud 的唯一方法是调用*-[NSFileManager URLForUbiquityContainerIdentifier:]*并检查非零 URL。然而，这种方法有时会阻塞很长时间，使其不适合从主线程调用。

# visual-studio-2010 - 使用 opencv2 函数调试 Opencv 项目时出现错误的未知原因

> ID：12175707
> 
> 赞同：0
> 
> 时间：2012-08-29T10:18:42.230
> 
> 标签：visual-studio-2010, opencv, ffmpeg

我有 openCV 2.3，我正在使用 Visual Studio 2010。

```
 ...
VideoCapture cap;
cap.open("Video.avi");
if( !cap.isOpened() )
{

    puts("***Could not initialize capturing...***\n");
    system("Pause");
    return 0;
} ... 
```

这是 while 程序的代码片段。我添加了一个系统命令以保持输出窗口。在构建项目时我没有遇到任何错误，但是当我开始调试时，输出窗口有以下输出：

```
warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:477)
***Could not initialize capturing...***

Press any key to continue . . . 
```

我检查了这个目录，文件可用，但为什么它没有打开？我什至在 bin 文件夹中有 opencv_ffmpeg.dll，其路径已添加到系统路径中。仍然我得到同样的错误....我什至检查了我所做的谷歌搜索的前 3 页，但找不到答案。所以请帮忙！

* * *

我提到的错误是因为打开 .avi 文件时出现错误......这是 cap_ffmpeg_impl.hpp 中的代码部分 -

```
int err = av_open_input_file(&ic, _filename, NULL, 0, NULL);
if (err < 0) {
    CV_WARN("Error opening file"); //Error part
    goto exit_func;
} 
```

该文件位于 D:\OpenCV2.3\opencv\modules\highgui\src。当我对此文件进行任何更改时，它们不会反映在输出窗口中，当我删除此文件时，即使这样它也没有给出任何错误！：OI 无法理解发生了什么......？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:36:07.633

错误消息可能有点令人困惑。你应该这样读：

```
<severity>: <message> (<where the message originated from>) 
```

该消息不会告诉您，您的程序无法打开头文件，它只是通知您该消息是在该头文件中创建的。

正如您正确观察到的那样，问题是您的程序找不到 .avi 文件。尝试提供该视频文件的绝对路径：

```
cap.open("C:/absolute/path/to/Video.avi"); 
```

# clojure - 在 Clojure 中验证复合请求时从字符串中解析整数

> ID：12175709
> 
> 赞同：7
> 
> 时间：2012-08-29T10:18:43.940
> 
> 标签：clojure, compojure

我有基于 compojure 的应用程序，我需要在其中解析请求并检索可以是数字的参数。我希望能够在实际处理请求之前验证参数是否存在并且它们是数字。这是我到目前为止所拥有的：

```
(defn get-int [str]
  "Returns nil if str is not a number"
  (try (Integer/parseInt str)
    (catch NumberFormatException _)))

(defn some-request [request]
    (let [some-number (get-int (get-in request [:route-params :some-number])
         other-number (get-int (get-in request [:route-params :other-number])]
    (if (every? identity [some-number other-number])
        (process-the-request)
        (bad-request "The request was malformed"))) 
```

有没有更好的方法来进行字符串 -> 数字转换？

有没有更好的方法来进行请求验证？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T10:47:51.800

[这个问题包含在 Clojure 中解析数字的](https://stackoverflow.com/questions/2640169/whats-the-easiest-way-to-parse-numbers-in-clojure)好例子。如果您不确定字符串是否包含有效数字，那么您的方法看起来不错。

如果您可以将参数作为查询字符串的一部分传递，则可以使用带有正则表达式的路由来检索值，例如

```
(GET ["/user/:id", :id #"[0-9]+"] [id] 
  (let [num (read-string id)]
    (str "The number is: " num))) 
```

仅当满足正则表达式条件时，路由才会匹配，因此您可以跳过 Integer/parseInt 检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T12:16:37.147

使用`Long/parseLong`而不是`Integer/parseInteger`. 后者仅支持 32 位，这往往是不够的；例如，Datomic 实体 ID 不适合 Integer。

切勿`read-string`用于用户输入。此外，您必须清理用户输入，删除注入的脚本等。[https://github.com/alxlit/autoclave](https://github.com/alxlit/autoclave)是一个好的开始，尽管默认设置可能过于激进。

# php - PHP中的静态函数

> ID：12175711
> 
> 赞同：0
> 
> 时间：2012-08-29T10:18:55.550
> 
> 标签：php

如果我使用范围解析运算符调用公共函数，它不会给出任何错误。

```
 class Parent_class
{

    public function st_function()
    {
        echo "*************parent class************\n";
    }
}
Parent_class:: st_function(); 
```

但是在 php.net 上的 PHP 文档中，它给出了 - 静态调用非静态方法会生成 E_STRICT 级别的警告。还考虑到 - 无法使用箭头运算符通过对象访问静态属性 -> 但它没有给出任何错误。谁能解释一下？

```
class Parent_class
{

    public static function st_function()
    {
        echo "*************parent class************\n";
    }
}
Parent_class:: st_function();
$var = new Parent_class();
$var->st_function(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:22:46.210

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T10:24:36.003

如果您激活严格的错误报告，您*将*看到静态调用非静态方法的错误：

```
error_reporting(E_ALL | E_STRICT); 
```

对于第二部分，您以非静态方式调用静态方法，这将起作用，因为手册中的段落讨论的是静态***属性***，而不是方法。如果它具有这样的属性，您将无法访问`Parent_class::static_property`like 。`Parent_class->static_property`

调用对象的静态方法可以正常工作，在这种情况下，这`$var->`只是`Parent_class::`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:23:44.600

在你的代码之前试试这个：

```
error_reporting(E_ALL | E_STRICT); 
```

# mongodb - mongodb恢复删除记录

> ID：12175712
> 
> 赞同：2
> 
> 时间：2012-08-29T10:18:56.493
> 
> 标签：mongodb, collections, replication, recover

我有一个包含两个成员的副本集，我不小心删除了集合中的所有文档，我不确定我是如何做到的，但它已经消失了。是否有可能取回所有数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T10:46:53.287

除非您有[备份](http://www.mongodb.org/display/DOCS/Backups)（始终建议仅用于此类事情），或者其中一个副本正在使用[slavedelay](http://docs.mongodb.org/manual/core/replication/#replica-set-delayed-members)，否则恐怕记录的删除是最终的。如果您在下一次 fsync 到磁盘之前终止进程（类似地，如果您在复制删除之前中断了复制），您可能能够及时强制关闭以将数据保存在磁盘上，但即便如此它也会很棘手。

# visual-studio-2012 - Visual Studio 2012 IDE 的所有新功能是什么？

> ID：12175713
> 
> 赞同：-1
> 
> 时间：2012-08-29T10:18:56.147
> 
> 标签：visual-studio-2012

有人可以列出vs 2012 IDE的所有新功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:25:56.710

**Windows Metro 风格应用**

*   设计和构建 Metro 风格的应用程序
*   调试、优化和发布 Metro 风格应用

    **视觉工作室 IDE**

*   项目和解决方案
*   窗口管理
*   搜索
*   C++ 的代码编辑
*   JavaScript 的代码编辑

    **语言**

*   视觉基础
*   视觉 C#
*   视觉 C++
*   JavaScript
*   视觉 F#

    **应用程序生命周期管理和 Team Foundation Server**

*   管理应用程序生命周期
*   建模应用
*   作为一个团队开发应用程序和更有效地协作
*   自动化和调试构建
*   微软测试管理器

    **ASP.NET 4.5 和 Web 开发**

*   ASP.NET 4.5 核心服务
*   ASP.NET 4.5 Web 窗体
*   Web 开发的一般增强功能
*   Web 开发的数据相关增强功能
*   用于 Web 开发的 IIS Express
*   ASP.NET Web API

    **其他增强功能**

*   灯开关
*   数据应用开发
*   图形工具
*   并行计算
*   SharePoint 开发
*   办公室发展
*   .NET 框架 4.5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:23:40.223

你可以阅读[这个](http://msdn.microsoft.com/en-us/library/ms165079)文档，它在 msdn 上非常有趣。

# iphone - 游戏中心多人游戏

> ID：12175718
> 
> 赞同：0
> 
> 时间：2012-08-29T10:19:23.087
> 
> 标签：iphone, game-center

如果我想使用游戏中心 API 实现多人跳棋游戏，是否意味着我不必编写服务器，而我将使用游戏中心的服务器？

我是游戏中心的新手，我想知道它的用途。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:52:09.117

这是一个很棒的教程，可以让您在几个小时内启动并运行！

[使用 iOS5 开始回合制游戏](http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:10:00.790

是的，您绝对不想编写任何服务器。苹果`Game Center`处理它。首先你需要导入`GameKit`框架。它将维护游戏中心服务器 。`Game Center`在您拥有`Leaderboards`（您可以在其中查看使用您的应用程序的所有玩家的分数）和`Achievements`（您可以设置一些成就，当用户跨越特定分数 1000、2000、3000 等时）。在您的应用程序中）。`Leaderboards`和`achievements`是两个不同的视图控制器，您可以通过编码显示它们。更多详情您可以访问以下链接[http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/GameCenterOverview/GameCenterOverview.html](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/GameCenterOverview/GameCenterOverview.html)很清楚。如果您有任何疑问，请随时与我联系。我最近实现了排行榜和成就，但没有实现多人游戏功能。要执行所有这些，您必须`GameCenter`在您的`iTunes`帐户中启用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T15:35:55.920

事实上，为了获得良好的多人游戏体验，您最终需要考虑编写将用户数据保存在数据库中的服务器端代码。

我经历过同样的场景，并最终使用**[Parse](http://parse.com)**和推送通知。

**如果您坚持可以使用 Game Center 执行以下操作：**

**借助 Game Center 服务，您可以通过实时比赛**或**回合制比赛**将玩家彼此联系起来。只要您不关心用户数据存储或游戏体验，一切都很好！

# android - 获取jsonarray下每个元素的KEYS数组

> ID：12175723
> 
> 赞同：17
> 
> 时间：2012-08-29T10:19:35.887
> 
> 标签：android, json, arraylist, iterator, arrays

我想动态解析我的 Json 数组。并希望为 jsonarray 下的每个元素获取 KEYS 数组。我通过迭代器得到这个。但没有根据输出的 json 格式获得序列。

**我的 JSON 格式：**

```
{
  "result": "Success",
  "AlertDetails": [
    {
      "ShipmentNumber": "SHP34",
      "Customer": "BEST",
      "DateCreated": "2012-08-29T04:59:18Z"
      "CustomerName": "BEST"
    },
    {
      "ShipmentNumber": "SHP22",
      "Customer": "BEST",
      "DateCreated": "2012-08-29T05:34:18Z"
      "CustomerName": "Jelly"
    }
  ]
} 
```

**这是我的代码：**

```
 JSONArray array = jsonobject.getJSONArray("AlertDetails");

    JSONObject keyarray = array.getJSONObject(0);
    Iterator temp = keyarray.keys();
        while (temp.hasNext()) {
                    String curentkey = (String) temp.next();
                    KEYS.add(curentkey);

    }
Log.d("Parsing Json class", "  ---- KEYS---- " + KEYS); 
```

**我在 logcate 输出中得到什么：**

```
 ---- KEYS---- [DateCreated,CustomerName, Customer, ShipmentNumber] 
```

**我想要的是 ：**

```
 ---- KEYS---- [ShipmentNumber, Customer, DateCreated,CustomerName] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T13:18:39.760

JSONObject 文档（链接： http: [//developer.android.com/reference/org/json/JSONObject.html](http://developer.android.com/reference/org/json/JSONObject.html)`keys()` ）对该函数有以下描述：

> 公共迭代器键 ()
> 
> 自：API 级别 1
> 
> 返回此对象中字符串名称的迭代器。返回的迭代器支持remove，它将从此对象中删除相应的映射。如果在返回迭代器后修改此对象，则迭代器的行为未定义。**键的顺序是未定义的**。

所以你可能会得到钥匙，但顺序是不确定的。如果您想要任何特定顺序的键，您可以使用任何排序算法。

**编辑**

由于您不知道您从 WS 获得的 KEYS 的顺序，因此在收到数据后，您可以在屏幕上以有序的格式显示详细信息。构建后`arraylist` `KEYS`，您可以使用以下字母按字母顺序对其进行排序：

```
Collections.sort(KEYS); 
```

这将根据其*自然顺序*（`Strings`按*字母顺序*）排序。`KEYS` `arraylist`

 *** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T13:37:00.970

当我按下*ctlr+space bar*时，我才知道，其中清楚地写着*键*的行为是未定义的，命令不是由*键维护的。*

![在此处输入图像描述](../Images/1d604adb0972d0345e9a569f7419b49d.png)

*Arun George*说得对@你必须使用任何排序方法来实现你的目标。

对于排序，此[链接](https://stackoverflow.com/questions/7051785/when-jsonobject-keys-are-iterate-it-is-not-in-the-same-order-as-in-response-from)可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-01T05:18:11.587

使用谷歌的[GSON](http://code.google.com/p/google-gson/)库。它有很多设置来读取/创建/解析 json 数组和 json 对象。我没有测试它以找到解决方案，但我认为它是一个非常简单且功能齐全的工具，可以解决问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-31T13:51:21.607

使用不同的库来动态解析 json。

下面我基于 Jackson JSON Processor 写了一段代码，这是我认为最好的 JSON 库

```
public void test() throws IOException {
    String str = "{\n" +
            "  \"result\": \"Success\",\n" +
            "  \"AlertDetails\": [\n" +
            "    {\n" +
            "      \"ShipmentNumber\": \"SHP34\",\n" +
            "      \"Customer\": \"BEST\",\n" +
            "      \"DateCreated\": \"2012-08-29T04:59:18Z\",\n" +
            "      \"CustomerName\": \"BEST\"\n" +
            "    }\n" +
            "  ]\n" +
            "}";

    JsonFactory factory = new JsonFactory();
    JsonParser jsonParser = factory.createJsonParser(str);

    JsonToken jsonToken;
    SerializedString alertDetails = new SerializedString("AlertDetails");
    while (!jsonParser.nextFieldName(alertDetails)) { /* move to AlertDetails field */ }

    jsonParser.nextToken(); // skip [ start array
    jsonParser.nextToken(); // skip { start object
    // until } end object
    while ((jsonToken = jsonParser.nextToken()) != JsonToken.END_OBJECT) {
        if (jsonToken == JsonToken.FIELD_NAME) {
            System.out.println(jsonParser.getCurrentName());
        }
    }

} 
```

它只是以与 json 中相同的顺序打印出字段名称：

```
ShipmentNumber
Customer
DateCreated
CustomerName 
```

* * *

**编辑**

当然，您可以使用其他库，例如 gson 等。但是请记住，正如[json.org](http://json.org)上所写的那样：

> 对象是一组无序的名称/值对。

并且键的顺序取决于实现，并且可能在每个请求中有所不同。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-31T13:23:44.907

还有方法[名（）；](http://developer.android.com/reference/org/json/JSONObject.html#names%28%29)

> 返回包含此对象中的字符串名称的数组。

编辑：以未定义的顺序返回名称。自己解析**

# javascript - Soundmanager 2，无论我尝试什么，我都无法设置 SWF 路径

> ID：12175724
> 
> 赞同：1
> 
> 时间：2012-08-29T10:19:37.327
> 
> 标签：javascript, html, flash, soundmanager2

我目前正在尝试设置 soundmanager2 以查找位于我的根网站文件夹中的我的 swf 文件夹。这将启用闪存回退。我非常努力地找到我设置路径的那段代码，经历了很多次。

如文档中所示，我还将此代码添加到了我的 html 的头部：

```
soundManager.setup({
  url: '/path/to/swfs/',
  flashVersion: 9,
  onready: function() {
    // console.log('SM2 ready!');
  },
  ontimeout: function() {
    // console.log('SM2 init failed!');
  },
  defaultOptions: {
    // set global default volume for all sound objects
    volume: 33
  }
}); 
```

底部代码是 soundmanager2.js 代码的缩小版。

[http://jsfiddle.net/VUwFF/1/](http://jsfiddle.net/VUwFF/1/)

Soundmanagers 核心文件只包括这个 javascript 文件、2 个 swf 文件、2 个 css 文件，仅此而已。我不知道我错过了什么。

提前谢谢你，请让答案尽可能容易理解:-)（我是 js 新手）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T06:06:46.880

```
soundManager.setup({
   flashVersion: 9,
   preferFlash: false,
   useHighPerformance: true, // keep flash on screen, boost performance
   wmode: 'transparent', // transparent SWF, if possible
   url:  'http://www.hiding-my-file/Soundmanager2Files/soundmanager2_flash9.swf/'
 }); 
```

在 Soundmanager 的一个脚本中，我发现他们把它放在了设置的最后。这个对我有用。

# android - 如何从android中的服务获取活动的根视图？

> ID：12175725
> 
> 赞同：6
> 
> 时间：2012-08-29T10:19:39.183
> 
> 标签：android, android-service

我正在创建一个应用程序，它会截取用户打开的应用程序的屏幕截图，并定期将它们发送到服务器。我正在使用截屏服务，但我找不到任何方法来获取活动的根视图。NDK可以吗？

# jsp - 如何使 DisplayTag 表的 SubTotals 加粗？

> ID：12175727
> 
> 赞同：0
> 
> 时间：2012-08-29T10:19:40.703
> 
> 标签：jsp, jakarta-ee, struts, displaytag

我正在使用以下代码创建显示标签

```
<display:table name="realtimereportcol" export="true" pagesize="25" sort="list" id="data" requestURI="" class="tablelist" decorator="org.displaytag.decorator.TotalTableDecorator">
        <display:setProperty name="export.csv" value="false"/>
        <display:setProperty name="export.xml" value="false"/>
        <display:setProperty name="export.excel.filename">RealTimeIssuance_<%=oAppUtil.getSystemDateTime()%>.xls</display:setProperty>

        <display:column title="SUB_CHANNEL" sortable="true" property="sub_channel" group="1"></display:column>
        <display:column title="AGENT_NAMES" sortable="true" property="agent_names"></display:column>
        <display:column title="FTD" sortable="true" property="ftd" total="true" format="{0,number,#.##}"></display:column>
        <display:column title="MTD" sortable="true" property="mtd" total="true" format="{0,number,#.##}"></display:column>
        <display:column title="QTD" sortable="true" property="qtd" total="true"  format="{0,number,#.##}"></display:column>

</display:table> 
```

我想让小计加粗，只想突出显示小计的行。请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:46:40.693

您可以覆盖`addRowClass`表装饰器的方法。

# css - 在另一个图像之上添加一个图像

> ID：12175730
> 
> 赞同：0
> 
> 时间：2012-08-29T10:19:50.783
> 
> 标签：css, styles, stylesheet

我的页面的 UI 当前在页面的左上角显示背景中的图像和文本。以下是我用于图像的代码。

```
<div>
    <div style= "z-index: 1; position: absolute; text-align: left; border: 1px solid black;">
        <img src="slide1.jpg" alt="alt text" style="height:220px;width:500px;border-width:0px;" />
    </div>
    <div id="curtain" style="z-index: 2; position: absolute; padding-left: 10px;">
        <div style="background-color: transparent; font-weight: bold; font-size: 1.8em; padding-top: 5px;">
            Profile
        </div>
        <div style="font-size: 1em; width: 215px; color: #cccccc;">
           He is a good citizen and a great teacher.
        </div>
    </div>
</div> 
```

我想在此图像的右侧添加 2 个垂直对齐的小图标。

有人可以帮我处理css吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:25:47.547

像这样的东西？

[http://jsfiddle.net/7KTEQ/](http://jsfiddle.net/7KTEQ/)

只需`<div id="smallImages"><img src='ONE' /> <img src='two' /></div>`在第二个 div 和 css 中添加它是：

```
 #smallImages {
    position:absolute;
    margin-left:400px;
}​ 
```

根据第二个 div 宽度和图像大小更改 css 的 margin-left ..

# html - 有没有办法创建纯 CSS2 跨浏览器三角形？

> ID：12175732
> 
> 赞同：0
> 
> 时间：2012-08-29T10:19:58.253
> 
> 标签：html, cross-browser, css

就像标题中所说的那样，有人知道在`CSS2`不使用图像的情况下使用（不是 CSS3）制作三角形的技巧吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T10:23:55.083

一个好的网站上的一个小请求会给你答案：

[http://css-tricks.com/snippets/css/css-triangle/](http://css-tricks.com/snippets/css/css-triangle/)

```
.arrow-up {
	width: 0; 
	height: 0; 
	border-left: 5px solid transparent;
	border-right: 5px solid transparent;

	border-bottom: 5px solid black;
}

.arrow-down {
	width: 0; 
	height: 0; 
	border-left: 20px solid transparent;
	border-right: 20px solid transparent;

	border-top: 20px solid #f00;
}

.arrow-right {
	width: 0; 
	height: 0; 
	border-top: 60px solid transparent;
	border-bottom: 60px solid transparent;

	border-left: 60px solid green;
}

.arrow-left {
	width: 0; 
	height: 0; 
	border-top: 10px solid transparent;
	border-bottom: 10px solid transparent; 

	border-right:10px solid blue; 
}
```

```
<div class="arrow-up"></div>
<div class="arrow-down"></div>
<div class="arrow-left"></div>
<div class="arrow-right"></div>
```

# forms - 在drupal 7模块中完全隐藏图像字段

> ID：12175734
> 
> 赞同：0
> 
> 时间：2012-08-29T10:20:03.567
> 
> 标签：forms, drupal, module, field

我正在尝试设置一个表单，根据用户角色需要隐藏某些字段。我正在使用 hook_form_FORM_ID_alter 在我自己的模块中执行此操作。普通文本、电子邮件或链接字段没有问题（例如 $form['field_companyname']['und'][0]['value']['#type']='hidden'）。但是对于图像字段或多值文件字段，通常的方法是行不通的。

任何人都可以给我一个线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:57:40.900

我建议您对元素使用#access，而不仅仅是隐藏该字段。

对于现场公司名称，它将如下所示：

```
$form['field_companyname']['#access'] = FALSE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:52:59.997

我认为你这样做是错误的。由于您的限制基于角色，您可以只使用权限系统。查看[字段权限](http://drupal.org/project/field_permissions)模块。

# joomla2.5 - setRedirect 函数是否在组件的模型文件中起作用

> ID：12175736
> 
> 赞同：1
> 
> 时间：2012-08-29T10:20:28.487
> 
> 标签：joomla2.5, joomla1.7, joomla1.6

setRedirect 在组件的模型文件中不起作用。

模型->test.php

```
$this->setRedirect(JRoute::_('index.php', false)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T04:21:05.000

在 Joomla 2.5 和 Joomla 3.0 中

模型文件中的重定向：

```
$app = JFactory::getApplication();
$app->redirect(JRoute::_(JURI::root().'index.php')); 
```

这种重定向适用于 joomla 中的所有文件，但更好的方法是在控制器文件中使用下面的方法。

控制器文件内的重定向：

```
$this->setRedirect(JRoute::_('index.php', false)); 
```

在 Joomla 1.6 和 1.7 中，使用它在模型文件中进行重定向：

```
global $mainframe;
$mainframe              =& JFactory::getApplication();
$mainframe->redirect($url, JText::_('Your Mail sent') ); 
```

# php - Codeigniter 仅加载索引方法

> ID：12175737
> 
> 赞同：0
> 
> 时间：2012-08-29T10:20:29.110
> 
> 标签：php, codeigniter

我在使用 codeigniter 时遇到了一些问题，它只让我加载 index 方法，而不是任何其他函数：

我的代码：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Private_page extends CI_Controller 
{

   function __construct()
   {
      parent::__construct();
      if($this->session->userdata('paramID') === false) {
         redirect('/public');
      }
   }

   public function index()
   {
        /* Header Data */   

        $data = array(
                    'title' => 'Bizispace Private Page',
                    'paramID' => $this->session->userdata('paramID')
                );

        // Load Header
        $this->load->view('template/header.php', $data);

        /* Get Subcriptions Details */

        $this->load->view('private/index.php', $data);
        $this->load->view('template/footer.php');
   }

   public function logout()
   {
        $this->session->sess_destroy();
        redirct('public_page');     
   }
}

?> 
```

我有一个路线设置：

```
$route['private'] = "private/private_page"; 
```

然后我运行： /index.php/private/ 它可以很好地显示索引页面，但是如果我运行 /index.php/private/logout 我得到：

“无法加载您的默认控制器。请确保您在 Routes.php 文件中指定的控制器有效。”

编辑* 我在 32 位 Windows 7 上运行 WAMP

难道我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T10:23:53.647

添加到您的路线：

```
$route['private/(:any)'] = "private/private_page/$1"; 
```

# r - 在 sapply 中处理由 na.omit 引起的不同向量长度？

> ID：12175739
> 
> 赞同：0
> 
> 时间：2012-08-29T10:20:34.563
> 
> 标签：r, apply, na

我有一个 data.frame 有几列，其中一些包含 NA。我想在每一列上运行 Farnsworth 建议的以下函数：

```
hpfilter = function(x,lambda=1600){
   eye <- diag(length(x))
   result <- solve(eye+lambda*crossprod(diff(eye,lag=1,d=2)),x)
   return(result)
 } 
```

我这样做是：

```
test <- as.data.frame(sapply(vectorOfColumnNames,function(X) hpfilter(mydf[,X]))) 
```

只要没有任何列包含 NA，它就可以正常工作。如果我`na.omit`在函数中添加一个，它会继续与相同数量的 NA 一起正常工作。

但是我如何才能真正独立处理每一列并在最后得到一个 data.frame （包含输入有 NA 的 NA）？

编辑：我想知道在运行一个函数时是否有一个通用的解决方案来解决不同长度的向量的问题。可能类似于`data.table`索引可能发生的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:13:06.527

我不完全清楚你想要什么，但我会试一试。

让我们创建一些示例数据。请注意，我使用的是 a`matrix`而不是 a `data.frame`。现在不需要显式迭代列名，大大简化了代码。

```
m = matrix(runif(100), 10, 10)
apply(m, 2, hpfilter) 
```

并介绍一些`NA`价值观：

```
m[sample(1:10, 2), sample(1:10, 2)] <- NA
apply(m, 2, hpfilter) 
```

我相信，对函数进行调整会`hpfilter`产生结果，您正在寻找：

```
hpfilter = function(x,lambda=1600, na.omit = TRUE) {
   if(na.omit) {
      na_values = is.na(x)
      if(any(na_values)) x = x[-which(na_values)]
   }
   eye <- diag(length(x))
   result <- solve(eye+lambda*crossprod(diff(eye,lag=1,d=2)),x)
   for(idx in which(na_values)) result = append(result, NA, idx - 1) # reinsert NA values
   return(result)
 } 
```

本质上，`NA`'s 被从数据集中删除。然后高通滤波器基于 周围的值`NA`，例如下一小时或前一小时。后来`NA`又重新引入了's。如果这是您要处理的方式，您需要仔细考虑`NA`。如果有大量连续`NA`的 '，则开始将高通滤波器应用于相距较远的时间序列片段。

输出：

```
> m
           [,1]       [,2]       [,3]        [,4]      [,5]      [,6]
 [1,] 0.3492249 0.13243768         NA 0.302102537 0.4229100 0.5922950
 [2,] 0.2933371 0.20001802 0.03145775 0.429109073 0.9597172 0.9490127
 [3,] 0.7040072 0.49672438 0.22093906 0.323518480 0.4842678 0.4081306
 [4,] 0.9072993 0.86930200 0.52859786 0.122859661 0.1841663 0.5389729
 [5,] 0.3236061 0.38602856 0.46249498 0.866068888 0.6981199 0.9766099
 [6,] 0.4878379 0.31511419         NA 0.807535084 0.6563737 0.0419552
 [7,] 0.3244131 0.34287848 0.31360175 0.821228400 0.5989790 0.6631735
 [8,] 0.3758025 0.39728965 0.64960319 0.283663049 0.9054992 0.8160815
 [9,] 0.4485784 0.06440579 0.67518605 0.815575767 0.1479089 0.6391120
[10,] 0.9061172 0.16812244 0.86293095 0.005075972 0.6736308 0.7574890
             [,7]       [,8]      [,9]       [,10]
 [1,]          NA 0.02125704 0.7029417 0.490146887
 [2,] 0.353827474 0.40482437 0.2102700 0.351850122
 [3,] 0.778491744 0.32676623 0.6709055 0.953126856
 [4,] 0.825446342 0.24411303 0.4939415 0.026877439
 [5,] 0.264156057 0.30620799 0.0474103 0.505411467
 [6,]          NA 0.63995093 0.6155766 0.736349958
 [7,] 0.048948805 0.96751061 0.9697167 0.005304793
 [8,] 0.733419331 0.85554984 0.7438209 0.581133546
 [9,] 0.823691194 0.74550281 0.0635690 0.903188495
[10,] 0.009001798 0.74201923 0.3516963 0.904093070
> apply(m, 2, hpfilter)
           [,1]      [,2]      [,3]      [,4]      [,5]      [,6]      [,7]
 [1,] 0.4337716 0.4101083        NA 0.4239194 0.5762643 0.6178718        NA
 [2,] 0.4512989 0.3950404 0.1219334 0.4367185 0.5756097 0.6219962 0.5909609
 [3,] 0.4687735 0.3797990 0.2209373 0.4494414 0.5748593 0.6261047 0.5593590
 [4,] 0.4860436 0.3640885 0.3198847 0.4620073 0.5741572 0.6303856 0.5276089
 [5,] 0.5031048 0.3476868 0.4187190 0.4742566 0.5735911 0.6348910 0.4956993
 [6,] 0.5202157 0.3306871        NA 0.4858177 0.5730049 0.6396161        NA
 [7,] 0.5375230 0.3132068 0.5175141 0.4965640 0.5723201 0.6447694 0.4638051
 [8,] 0.5551529 0.2953536 0.6163712 0.5065697 0.5715107 0.6501860 0.4319566
 [9,] 0.5730986 0.2772537 0.7152643 0.5161124 0.5705671 0.6557125 0.3999246
[10,] 0.5912411 0.2590969 0.8141878 0.5253298 0.5696884 0.6612990 0.3676684
           [,8]      [,9]     [,10]
 [1,] 0.1423571 0.5362741 0.3871990
 [2,] 0.2276829 0.5253623 0.4217619
 [3,] 0.3129329 0.5145546 0.4563892
 [4,] 0.3981423 0.5037583 0.4911015
 [5,] 0.4833547 0.4929783 0.5262298
 [6,] 0.5685175 0.4822135 0.5618152
 [7,] 0.6534674 0.4711843 0.5978857
 [8,] 0.7380857 0.4596942 0.6345782
 [9,] 0.8224501 0.4478587 0.6716594
[10,] 0.9067115 0.4359704 0.7088627 
```

# java - 无法检查文件系统中是否存在德文名称的文件

> ID：12175743
> 
> 赞同：3
> 
> 时间：2012-08-29T10:21:10.773
> 
> 标签：java, perl, utf-8, local

**背景**：

我有 2 台机器：一台运行德语 windows 7，我的 PC 运行英语（使用希伯来语区域设置）windows 7。
在我的 Perl 代码中，我试图检查我从德国机器获得的文件是否存在于我的机器上。
文件名为 ßßßzllpoöäüljiznppü.txt

为什么我执行以下代码时失败：

```
use Encode;
use Encode::locale;

sub UTF8ToLocale
{
  my $str = decode("utf8",$_[0]);
  return encode(locale, $str);
}

if(!-e UTF8ToLocale($read_file))
{
   print "failed to open the file";
}
else
{
   print $read_file;
} 
```

当我试图打开文件时，同样的事情也会发生：

```
open (wtFile, ">", UTF8ToLocale($read_file));  
binmode wtFile;
shift @_;
print wtFile @_;
close wtFile; 
```

在我的 java 应用程序中，文件名从德语转换为 utf8，并传递给 perl 脚本。perl 脚本采用此文件名并将其从 utf8 转换为系统语言环境，请参阅 UTF8ToLocale($read_file) 函数调用，我相信这就是问题所在。

**问题：**
你能告诉我什么是操作系统文件系统字符集编码吗？
当我在操作系统中创建德语文件名时，语言环境是希伯来语，其中保存了字符集？
我该如何解决这个问题？

**更新：**

这是我在 PC 上使用硬编码文件名运行的另一个代码，脚本文件是 utf8 编码的：

```
use Encode;
use Encode::locale;

my $string = encode("utf-16",decode("utf8","C:\\TestPerl\\ßßßzllpoöäüljiznppü.txt"));

if (-e $string)
{
  print "exists\r\n";
}
else
{
  print "not exists\r\n"
} 
```

输出是“不存在”。我还尝试了不同的字符集：cp1252、cp850、utf-16le，没有任何效果。如果我将文件名更改为英语或希伯来语（我的默认语言环境），它可以工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:31:31.973

Windows 7 在内部使用**UTF-16** [需要引用]（我不记得字节顺序）。因此，您不需要转换*文件名*。但是，如果您通过 FAT 文件系统（例如旧的 USB 记忆棒）或其他不支持 Unicode 的文件系统传输文件，这些好处将丢失。

您正在谈论的*区域*`Programme (x86)`设置仅影响用户界面的语言和明显的文件夹名称（与`Program Files (x86)`后者是文件系统中的真实名称相比）。

我可以看到的更大问题是您要传输的*文件内容*的内部编码，因为某些应用程序可能会根据语言环境默认使用不同的编码。除了在创建文件时明确说明之外，没有解决方案。坚持使用 UTF-8 通常是个好主意。

为什么要使用其他工具转换文件名？任何 Unicode 编码都应该足以传输。

* * *

您的脚本不起作用，因为您引用了一个未定义的全局变量`$read_file`. 假设您的第二个代码块未包含在任何范围内，尤其是未包含在 a 中`sub`，则该`@_`变量*不可*用。要获取命令行参数，您应该考虑使用`@ARGV`数组。无论如何，您的脚本的逻辑都不清楚：您将错误消息打印到 STDOUT，而不是 STDERR，您“解码”文件名​​，然后在您的`else`-branch 中打印出未解码的字符串，您对编码偏执（这是通常很好）但您没有为输出流等指定编码。

# iphone - 如何在 Gdata 视频上传到您的视频中验证 id 密码

> ID：12175750
> 
> 赞同：0
> 
> 时间：2012-08-29T10:21:18.673
> 
> 标签：iphone, youtube-api

要在你的管子上上传视频，我正在使用 Gdata 示例代码。

它的工作正常。但是在我的应用程序中，我需要在用户尝试上传视频之前验证用户的用户名和密码。

我可以使用 Gdata 服务吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:35:32.140

以下是客户端登录 Youtube 的方法：

```
- (BOOL)login:(NSString *)strusername password:(NSString *)strpassword
{
   NSMutableURLRequest *request = [NSMutableURLRequest 
                                requestWithURL:[NSURL URLWithString:@"https://www.google.com/accounts/ClientLogin"]];

   NSString *params = [[NSString alloc] initWithFormat:@"Email=%@&Passwd=%@&service=youtube&source=&continue=http://www.google.com/",username,password];
   [request setHTTPMethod:@"POST"];
   [request setHTTPBody:[params dataUsingEncoding:NSUTF8StringEncoding]];
   [params release];
   [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-type"];

   NSHTTPURLResponse *response;
   NSError *error;
   [request setTimeoutInterval:120];
   NSData *replyData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];    

   NSString *replyString = [[[NSString alloc] initWithData:replyData encoding:NSUTF8StringEncoding] autorelease];
   if([replyString rangeOfString:@"Auth="].location!=NSNotFound)
   {
    NSString *authToken=[[replyString componentsSeparatedByString:@"Auth="] objectAtIndex:1];
    NSLog(@"Auth : %@",authToken);
    return YES;
   }
   else
   {
    return NO;
   }
 } 
```

# ios - 如何在 iPad 中运行交互式 PDF 文件？

> ID：12175752
> 
> 赞同：2
> 
> 时间：2012-08-29T10:21:24.250
> 
> 标签：ios, cocoa-touch

我正在尝试使用 Xcode 在 iPad 中运行交互式 PDF 文件。

我已经使用 Xcode 在 iPad 中成功运行了简单的 PDF 文件。但是，当我尝试运行包含视频的交互式 PDF 文件时，在 iPad 模拟器中它会跳过 PDF 中的视频并简单地运行 PDF。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:12:29.050

这很困难，因为大多数 PDF 查看器（和引擎）只专注于图形表示。通常不支持超链接、javascript 和视频等交互元素。

除非你找到一个现成的引擎（也许 Adob​​e 有类似的东西作为 SDK？），否则会很困难。您需要支持许多视频编解码器和格式。

# matlab - matlab：合并单元阵列，转换为时间序列

> ID：12175754
> 
> 赞同：0
> 
> 时间：2012-08-29T10:21:28.197
> 
> 标签：matlab, cell-array

我正在摆弄 matlab（没有添加工具箱），并试图了解如何从交易数据库创建 x 分钟柱。

从 SQL 服务器访问数据，我得到一个元胞数组 Buy_Data：

```
 Attributes: []
          Data: {619134x2 cell}
DatabaseObject: [1x1 database]
      RowLimit: 0
      SQLQuery: [1x210 char]
       Message: []
          Type: 'Database Cursor Object'
     ResultSet: [1x1 com.microsoft.sqlserver.jdbc.SQLServerResultSet]
        Cursor: [1x1 com.mathworks.toolbox.database.sqlExec]
     Statement: [1x1 com.microsoft.sqlserver.jdbc.SQLServerStatement]
         Fetch: [1x1 com.mathworks.toolbox.database.fetchTheData] 
```

现在，内容看起来像：

```
'2012-08-28 16:48:56.0'    [24800]
'2012-08-28 16:48:56.0'    [24800]
'2012-08-28 16:49:14.0'    [24800]
'2012-08-28 16:49:14.0'    [24800]
'2012-08-28 16:49:21.0'    [24799]
'2012-08-28 16:49:51.0'    [24800]
'2012-08-28 16:49:51.0'    [24800]
'2012-08-28 16:49:55.0'    [24800]
'2012-08-28 16:49:55.0'    [24800]
'2012-08-28 16:49:56.0'    [24800]
'2012-08-28 16:49:56.0'    [24800]
'2012-08-28 16:49:56.0'    [24800]
'2012-08-28 16:49:56.0'    [24800]
'2012-08-28 16:49:56.0'    [24800]
'2012-08-28 17:00:12.0'    [24839] 
```

我如何将这些单元阵列中的 2 个组合成 x 分钟时间序列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:55:18.407

好吧，组合单元阵列就像

```
new_Data = [Buy_data.Data; Buy_data2.Data] 
```

显然，`Buy_data`是`Buy_data2`你的两个不同的结构。

将这些组合成 x 分钟烛台格式可以这样完成：

```
% example data
new_cell = {
    '2012-08-28 16:48:56.0'    [24800]
    '2012-08-28 16:48:56.0'    [24800]
    '2012-08-28 16:49:14.0'    [24800]
    '2012-08-28 16:49:14.0'    [24800]
    '2012-08-28 16:49:21.0'    [24799]
    '2012-08-28 16:49:51.0'    [24800]
    '2012-08-28 16:49:51.0'    [24800]
    '2012-08-28 16:49:55.0'    [24800]
    '2012-08-28 16:49:55.0'    [24800]
    '2012-08-28 16:49:56.0'    [24800]
    '2012-08-28 16:49:56.0'    [24800]
    '2012-08-28 16:49:56.0'    [24800]
    '2012-08-28 16:49:56.0'    [24800]
    '2012-08-28 16:49:56.0'    [24800]
    '2012-08-28 17:00:12.0'    [24839]
    };

% your period (in minutes)
x = 1; 

% convert dates to numbers and make sure dates are sorted
[dateNums, sortInds] = sort(datenum(new_cell(:,1)));
prices = [new_cell{:,2}].';
prices = prices(sortInds);

% find minimum date, maximum date
minDate = min(dateNums);
maxDate = max(dateNums);

% group data into bins
x = x/24/60;
numBins = ceil( (maxDate-minDate)/x );
[N,X] = hist(dateNums,numBins);

% create candlesticks
inds          = [1 cumsum(N)];
candles.min   = zeros(numBins,1);
candles.max   = zeros(numBins,1);
candles.open  = zeros(numBins,1);
candles.close = zeros(numBins,1);
candles.dates = cell(numBins,1);
for ii = 1:numBins

    % we already know the dates
    candles.dates{ii} = datestr(X(ii));

    % continue only if there's data    
    if N(ii)
        % extract the prices
        subSet = prices(inds(ii):inds(ii+1));
        % find max, min, open, close
        candles.open(ii)  = subSet(1);
        candles.close(ii) = subSet(end);
        candles.max(ii)   = max(subSet);
        candles.min(ii)   = min(subSet);        
    end    

end 
```

请注意，您需要进行一些调整，因为这些烛台将是非常不具代表性的 :) 无论如何，这应该足以让您入门。

# ruby-on-rails - 从数据库中检索数据 - 哈希

> ID：12175756
> 
> 赞同：0
> 
> 时间：2012-08-29T10:21:34.973
> 
> 标签：ruby-on-rails

我有一个名为的表`audits`，其中有一列“更改”以哈希的形式存储数据

我想检索具有以下条件的所有条目：

```
- auditable_type = 'Expression'
- action = 'destroy'
- changes = { :EXP_SUBMISSION_FK =>'9999992642'} 
```

我首先尝试了以下代码，它什么都没有返回：

```
@deleted_history = Audit.find(:all, :conditions => ["auditable_type =? AND action = ? AND changes = ?",'Expression', 'destroy' , { :EXP_SUBMISSION_FK =>'9999992642'} ]) 
```

然后我尝试了以下代码，该代码使用 和 检索“审计​​”表中的所有`auditable_type = 'Expression'`条目`action = 'destroy'`。

然后，我遍历结果集并丢弃 EXP_SUBMISSION_FK 不等于 9999992642 的所有条目。下面的代码返回 5 个条目/记录

```
 @deleted_history = Audit.find(:all, :conditions => ["auditable_type =? AND action = ?",'Expression', 'destroy' ])
    @deleted_history.each do |test|
      if test.changes['EXP_SUBMISSION_FK'] != 9999992642
        @deleted_history = @deleted_history.reject { test }
      end
    end 
```

我想知道第一个代码示例哪里出错了，以及是否有办法以更简单的方式检索具有上述条件的所有条目。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:36:26.723

我会做：

```
@deleted_history.select!{|hist| hist.changes['EXP_SUBMISSION_FK'] == '9999992642'} 
```

失败的一个潜在原因是您正在寻找`9999992642`但您在价值之前声明`'9999992642'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:37:07.603

您只需使用如下所示的内容。我将**element_values**存储为哈希，并根据键/值对选择记录。

```
scope :find_by_field_values, lambda {
  |field_name, field_value| 
  (where("element_values like ?", "%\"#{field_name}\":\"%#{field_value}%"))
} 
```

只需根据您的情况尝试此操作。

# linux - 对 .so 文件进行超链接和下链接时是否会损失性能？

> ID：12175759
> 
> 赞同：2
> 
> 时间：2012-08-29T10:21:45.203
> 
> 标签：linux, linker, shared-libraries, dynamic-linking

有些人正在链接共享对象文件，因此他们的 NEEDED 列表中没有条目，并且在将这些 SO 文件链接到二进制文件时，将所有 SO 文件的传递依赖项放入创建的二进制文件的 NEEDED 列表中，而不管是否binary 实际上需要那些 SO 文件。

不将所需的 SO 文件链接到某个 SO 文件的前一种行为称为*欠*链接，而将过多的 SO 文件链接到某个二进制文件的后一种行为称为*超链接*。

我正在与我的同事讨论这种构建应用程序及其 SO 文件的方案是否会在构建或运行应用程序或其 SO 文件时产生任何性能成本。例如，PLT 的动态符号解析是否存在额外成本？有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:47:17.113

它肯定会改变符号查找的性能，可能会变得更糟。ELF 符号解析是一种广度优先搜索，从可执行文件本身的符号表开始，然后是可执行文件的 DT_NEEDED 库的符号表，然后是这些库的 DT_NEEDED 符号表等。通过覆盖主可执行文件，您可能会强制更多符号查找遍历更多库的符号表。

# java - Webstart 不读取本地文件

> ID：12175760
> 
> 赞同：0
> 
> 时间：2012-08-29T10:21:46.037
> 
> 标签：java, swing, web-applications, java-web-start

大家好，我有这个连接到托管数据库的摇摆应用程序。它从本地文件“参数”中读取数据库参数。当我在本地运行它时，它能够从参数文件中读取参数，但是当我使用 Java Webstart 启动它时，我得到了这个异常：

`java.io.FileNotFoundException: parameters.param(The system cannot find the File Specified)`

有没有一种有利的方法可以让 java Webstart 读取该文件，因为没有它，应用程序将无法连接到 Db。？

当我在 JNLP 文件上直接双击 CLick 时，验证不会出现但我无法使用 Html 页面运行它：我的 Html 看起来像这样：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>

</head>
<body>
    <h3>Test page for launching the application via JNLP</h3>
    <script src="http://java.com/js/deployJava.js"></script>
    <script>
        deployJava.createWebStartLaunchButton("launch.jnlp")
    </script>
    <!-- Or use the following link element to launch with the application -->
    <!--
    <a href="launch.jnlp">Launch the application</a>
    -->
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T13:50:17.943

将文件放入 jar 并使用 getresource() 访问它解决了垃圾神所建议的问题。

# jsf - 如何在不使用 HTML 表单的情况下以编程方式将 POST 请求发送到 JSF 页面？

> ID：12175763
> 
> 赞同：6
> 
> 时间：2012-08-29T10:21:51.297
> 
> 标签：jsf, jsf-2, http-post, http-request-parameters

我有非常简单的 JSF bean，如下所示：

```
import org.jboss.seam.annotations.Name;

@Name(Sample.NAME)
public class Sample {

    public static final String NAME="df";

    private String text = "text-test";

    public void sampleM(){
        System.out.println("Test: "+text);
    }

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }
} 
```

与此组件连接的 JSF 表单：

```
<h:form id="sampleForm">
        <h:commandButton id="sampleButton" action="#{df.sampleM()}" value="ok" />
</h:form> 
```

现在，我想以编程方式向此表单发送 POST 请求。

根据我的调查，这里的关键是 POST 参数。正确选择会给出正确的结果（字符串“测试：文本测试”打印在服务器的控制台上）。

所以问题是：**我应该如何选择正确的 POST 数据？**

上面显示的 JSF 表单生成这个 HTML 表单：

```
<form id="sampleForm" name="sampleForm" method="post" action="/pages/main/main.smnet" enctype="application/x-www-form-urlencoded">
    <input type="hidden" name="sampleForm" value="sampleForm" />
    <input id="sampleForm:sampleButton" type="submit" name="sampleForm:sampleButton" value="ok" />
    <input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="j_id65" autocomplete="off" />
</form> 
```

所以这些参数是正确的。

**但是我怎样才能找出哪些参数（名称和值）足以满足任何其他组件的需要？**

例如：当我在显示的 HTML 表单中发送相同的 POST 数据但具有不同的 'javax.faces.ViewState' 参数值时，将不会执行组件方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T12:06:29.723

我知道您基本上是在询问如何使用某些 HTTP 客户端（例如`java.net.URLConnection`Apache HttpComponents Client）以编程方式提交 JSF 表单，对吗？

您需要先发送一个 GET 请求，并确保`JSESSIONID`在请求之间保持相同的 HTTP 会话（基本上是 cookie）。让您的 HTTP 客户端`Set-Cookie`从第一个 GET 请求的响应中提取标头，从中获取`JSESSIONID`cookie 并将其作为`Cookie`后续 POST 请求的标头发送回。这将在服务器端维护 HTTP 会话，否则 JSF 会将其视为“视图已过期”，这可能会在配置得当的 JSF Web 应用程序上返回带有 的 HTTP 500 错误页面`ViewExpiredException`，或者在配置不当的 JSF Web 应用程序上表现为页面刷新。

作为 JSF 的有状态特性和隐含的 CSRF 攻击预防的一部分，必须使用有效值提交表单，`javax.faces.ViewState`因为客户端已在初始 GET 请求中检索到自身。您还需要确保发送`name=value`所有其他隐藏字段对，尤其是提交按钮之一。

因此，如果您的初始 GET 请求返回此 HTML

```
<form id="sampleForm" name="sampleForm" method="post" action="/pages/main/main.smnet" enctype="application/x-www-form-urlencoded">
    <input type="hidden" name="sampleForm" value="sampleForm" />
    <input id="sampleForm:sampleButton" type="submit" name="sampleForm:sampleButton" value="ok" />
    <input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="j_id65" autocomplete="off" />
</form> 
```

那么您需要对其进行解析（[Jsoup](http://jsoup.org)可能对此有所帮助）并提取以下请求参数：

*   `sampleForm=sampleForm`
*   `sampleForm:sampleButton=ok`
*   `javax.faces.ViewState=j_id65`

`/pages/main/main.smnet`最后使用这些请求参数（和`JSESSIONID`cookie！）发送一个 POST 请求。不过要小心，一个（可怜的）JSF 开发人员可能已经跳过了例如`id="sampleButton"`，`<h:commandButton>`然后 JSF 会自动生成一个看起来像这种格式的文件`sampleForm:j_id42`。您不能对它们进行硬编码，因为值可能会根据组件在服务器端树中的位置而改变，然后您真的需要将其解析出获得的 HTML。

尽管如此，联系站点所有者/管理员并询问是否没有可用于您所考虑的任务的 Web 服务 API 是明智的。一个体面的 Java EE 网站使用 JSF 应用程序作为 HTML 前端通常也使用单独的 JAX-RS 应用程序作为 REST 前端。通过这样的 Web 服务 API 提取信息比通过抓取 HTML 文档要容易和可靠得多。

### 也可以看看：

*   [如何以编程方式将文件上传到网站？](https://stackoverflow.com/questions/8623870/how-can-i-programmatically-upload-a-file-to-a-website/)（这也涉及 JSF）
*   [如何使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/using-java-net-urlconnection-to-fire-and-handle-http-requests/)

# java - 如何在 Android SDK 中调用 Google Maps Direction Webservice？

> ID：12175764
> 
> 赞同：-1
> 
> 时间：2012-08-29T10:21:58.417
> 
> 标签：java, android, web-services, google-maps, google-maps-api-3

嗨，我是 android 开发的新手。在我的应用程序中，我需要从谷歌地图 api 方向网络服务中读取数据。

**http://maps.googleapis.com/maps/api/directions/xml?origin=Toronto&destination=Montreal&sensor=false**

我想调用这个网络服务。并从此链接读取数据。请任何人帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T10:25:41.737

您可以使用 url 调用`HttpConnection`

```
public String getValuefromUrl(String url)
    {
        try
        {
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            ResponseHandler<String> resHandler = new BasicResponseHandler();
            String page = httpClient.execute(httpGet, resHandler);
            Log.v("PAGE",page);
            return page;
        }
        catch(Exception ex)
        {
            ex.printStackTrace();
            return "zero";  

        }
    } 
```

# php - 用于学生列表的复杂 mysql 连接

> ID：12175765
> 
> 赞同：1
> 
> 时间：2012-08-29T10:22:05.983
> 
> 标签：php, mysql

我的查询有这个问题。查询的目标是显示所有学生，无论他们是否在 aanweezigheid 表中。

这是我的查询：

```
SELECT 
   s.studentNaam
   , s.studentAchterNaam
   , s.studentStamNummer
   , s.klasID
   , k.klasNaam
   , k.klasID
   , a.studentID
   , a.aanwezigTijdAan
   , a.aanwezigTijdAf
   , a.aanwezigDag
   , a.aanwezigStatus 

FROM studenten AS s 
   LEFT JOIN klassen AS k ON s.klasID=k.klasID 
   LEFT JOIN aanweezigheid AS a ON a.studentID=s.studentID
WHERE k.klasNaam = 'MD2a' 
   AND a.aanwezigDag='2012-08-28'
ORDER BY s.studentAchterNaam ASC 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:26:13.397

将`WHERE` 条件移至`LEFT JOIN ON`子句：

```
SELECT ...
FROM studenten AS s
   LEFT JOIN klassen AS k
      ON s.klasID=k.klasID
         AND k.klasNaam = 'MD2a'
   LEFT JOIN aanweezigheid AS a
      ON a.studentID=s.studentID
         AND a.aanwezigDag='2012-08-28'
ORDER BY s.studentAchterNaam ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:26:08.067

只需将您的`"a"`依赖项移入该`ON`术语即可。这样你就不会在你的`WHERE`：

```
SELECT 
   s.studentNaam
   , s.studentAchterNaam
   , s.studentStamNummer
   , s.klasID
   , k.klasNaam
   , k.klasID
   , a.studentID
   , a.aanwezigTijdAan
   , a.aanwezigTijdAf
   , a.aanwezigDag
   , a.aanwezigStatus 

FROM studenten AS s 
   LEFT JOIN klassen AS k ON s.klasID=k.klasID 
   LEFT JOIN aanweezigheid AS a ON a.studentID=s.studentID
              AND a.aanwezigDag='2012-08-28'
WHERE k.klasNaam = 'MD2a' 

ORDER BY s.studentAchterNaam ASC 
```

# html - 链接到#something 页面重新加载但没有js

> ID：12175769
> 
> 赞同：0
> 
> 时间：2012-08-29T10:22:20.047
> 
> 标签：html, anchor, href

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:24:48.237

URL 的锚点位于查询字符串之后。参见维基百科：[http ://en.wikipedia.org/wiki/Url](http://en.wikipedia.org/wiki/Url)

请注意，如果没有滚动条，浏览器将不会滚动到锚点 - 如果页面内容适合浏览器窗口，则它无法滚动到任何地方。

# android - 拨打电话而未在通话记录中保存号码

> ID：12175771
> 
> 赞同：0
> 
> 时间：2012-08-29T10:22:39.147
> 
> 标签：android, calllog

我正在使用以下代码拨打电话。

```
private void callBack(String phone, Context context) {
    Intent callIntent = new Intent(Intent.ACTION_CALL)
            .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    callIntent.setData(Uri.parse("tel:" + phone));
    context.startActivity(callIntent);

} 
```

它工作正常。通话结束后，它会在通话记录中添加通话。有没有办法不保存就拨打电话？我知道一旦保存，我们就可以将其从日志中删除。通话结束后，它不会立即添加到日志中。需要2-3秒的时间。那么，我应该什么时候删除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:42:33.337

我个人使用类似的方法来修改已完成的通话，从未出现过问题，您应该尝试检查1,2,3,5,10的通话吗？通话结束后几秒钟，如果它永远不会来，放弃。

这听起来像是一个与设备相关的问题，无法预测，因为拨号器通常由电话制造商修改。

# java - 用于发布请求的 java applet 和 django 服务器之间的 http 连接

> ID：12175773
> 
> 赞同：1
> 
> 时间：2012-08-29T10:22:40.233
> 
> 标签：java, django, http, applet, http-post

我正在尝试将记录数据从文档扫描小程序发送到 django 驱动的 Web 服务器。

我正在使用 django 自己的网络服务器进行测试。我用 java 构造了一个简单的 POST 请求，但是 django 服务器抛出 500 错误。我无法获得有关该错误的任何信息。我似乎无法使用 pydevd 来中断我的 django 视图中的代码（我的 url 设置正确 - 如果我使用浏览器访问 url，我可以单步执行代码）。我的小程序上没有任何调试设置，但我确实有很多信息可以发送到控制台。我知道 django 会发送大量 html 信息以及 500 错误，但我的 java 小程序在读取消息之前抛出异常（以响应 500 错误）。

这是我的小程序中的代码 -

```
private boolean log(String scanURL) {

    try {
        String data = "log=" + buffer.toString();
        URL url = new URL(scanURL);
        URLConnection conn = url.openConnection();
        conn.setDoOutput(true);
        OutputStreamWriter writer = new OutputStreamWriter(conn.getOutputStream());
        writer.write(data);
        writer.flush();

        // Handle the response
        int responseCode = ((HttpURLConnection) conn).getResponseCode();
        addItem("Http response code " + new Integer(responseCode).toString());
        addItem("creating BufferedReader");
        BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String line;
        addItem("reading response");
        while ((line = reader.readLine()) != null) {
            addItem(line);
        }
        addItem("Closing Writer");
        writer.close();
        addItem("Closing Reader");
        reader.close();

        if (responseCode == 200) {
            return true;
            }
        else {
            return false;
        }

    } catch (Exception e) {
        addItem("Error - writing to log failed. " + e);
        return false;
    }

} 
```

而我的 Django 视图目前是 -

```
from django.http import HttpResponse
from django.contrib.auth.decorators import login_required
from cache.shortcuts import permission_required

@login_required
@permission_required('documents.add_documentindex', raise_exception=True)
def save_log(request):
    import pydevd;pydevd.settrace()
    log_text = request.POST['log']
    with open("scanning.log", "a") as f:
        f.write(log_text)
    return HttpResponse('ok') 
```

我怀疑我需要对 http 标头做一些工作，但是如果没有来自 django 的更多信息，我对 http 的了解是一个很大的障碍。

任何有关使其正常工作的建议，或者甚至获得有关 django 的服务器 500 错误的更多信息，将不胜感激！

更新来自java异常的堆栈跟踪如下

```
java.io.IOException: Server returned HTTP response code: 500 for URL: http://10.0.0.68:8000/scanning_log
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at co.altcom.cache.scanner.CacheScan.log(CacheScan.java:408)
    at co.altcom.cache.scanner.CacheScan.createLog(CacheScan.java:385)
    at co.altcom.cache.scanner.CacheScan.destroy(CacheScan.java:70)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.IOException: Server returned HTTP response code: 500 for URL: http://10.0.0.68:8000/scanning_log
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at java.net.HttpURLConnection.getResponseCode(Unknown Source)
    at co.altcom.cache.scanner.CacheScan.log(CacheScan.java:405)
    ... 4 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:10:34.427

我最初的问题要求从 django 服务器获取更多信息的建议。我想我需要的答案是在[java.io.IOException: Server returned HTTP response code: 500](https://stackoverflow.com/questions/3432263/java-io-ioexception-server-returned-http-response-code-)中找到的。

`getInputStream`当服务器返回错误代码（如 500）时，Java 的URLConnection 对象方法会抛出异常。解决方案是改用 getErrorStream 。这让我可以访问 django 的服务器生成的 html 错误信息。

我的小程序的日志记录方法的最终工作代码是 -

```
public boolean log(String logURL) {

    String charset = "UTF-8";
    String logData = logBuffer.toString();
    OutputStream output = null;
    HttpURLConnection conn = null;
    BufferedReader reader = null;
    InputStream in = null;

    try {
        String query = String.format("log=%s", URLEncoder.encode(logData, charset));
        conn = (HttpURLConnection) new URL(logURL).openConnection();
        conn.setDoOutput(true);
        conn.setRequestProperty("Accept-Charset", charset);
        conn.setRequestProperty("Content-Type","application/x-www-form-urlencoded;charset=" + charset);
        output = conn.getOutputStream();
        output.write(query.getBytes(charset));

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
        return false;
    } catch (MalformedURLException e) {
        e.printStackTrace();
        return false;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    } finally {
         if (output != null) try { output.close(); } catch (IOException e) {e.printStackTrace();}
    }

    // Handle the response
    try {
        int responseCode = conn.getResponseCode();
        if (responseCode == 200) {
            in = conn.getInputStream();
        } else {
            in = conn.getErrorStream();
        }
        reader = new BufferedReader(new InputStreamReader(in));
        String line;
        logNote("reading response");
        while ((line = reader.readLine()) != null) {
            System.out.println(line);
        }
        reader.close();         
        if (responseCode == 200) {
            return true;
            }
        else {
            return false;
        }

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
        return false;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    } finally {
        if (reader != null) try { reader.close(); } catch (IOException e) {e.printStackTrace();}
    }   
} 
```

[使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)非常有用。

希望这对其他人有帮助。

# objective-c - Admob 视图在点击时不会显示全屏广告

> ID：12175774
> 
> 赞同：0
> 
> 时间：2012-08-29T10:22:42.317
> 
> 标签：objective-c, ios, xcode, admob

我试图弄清楚为什么它会发生在我的横幅视图中，它应该在点击时呈现全屏广告，但它没有这样做。

我的横幅视图是视图控制器的子视图，女巫是标签栏视图控制器的一部分

我该怎么办，有谁知道我的横幅问题是什么？单击时，我会在横幅视图中看到广告，而不是全屏到顶部的动画横幅

请帮帮我 ！！！！

//附加信息

我发现在我的第二个广告请求之后，它并没有在内部修饰时打开全屏

我发现了错误，因为我通过请求另一个广告而不初始化横幅视图来重新加载横幅

感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:05:36.237

因此，在您的实现中查看一些代码将有助于我们诊断此问题。虽然没有看到此代码，但我假设如果您的横幅显示正确并且全屏模式不会显示这是一个`rootviewController`问题。

您是否将其设置`rootViewController`为您的`tabBarController`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:16:59.253

当您触摸广告横幅时会发生什么取决于 admob。您只需确保广告横幅是可触摸的。并不总是在点击时获得全屏，例如，也可以重定向 tu 应用商店。

# c++ - 如何通过 C++ 解析 Windows 中的 Safari 浏览器历史记录

> ID：12175780
> 
> 赞同：0
> 
> 时间：2012-08-29T10:23:02.003
> 
> 标签：c++, browser, safari, browser-history

我的目的是通过我用 C++ 编写的程序来阅读 Safari 浏览器的历史。我可以通过编程阅读其他浏览器的历史，但对于 safari，我有点迷路了。

位于 \AppData\Roaming\Apple Computer\Safari\history.plist 中的文件包含二进制或加密数据。在这种情况下，我不确定如何像其他浏览器一样阅读历史记录条目，例如 ff 、 ie 和 chrome。

请给我一些提示，在这种情况下我该怎么办？

问候法尔汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:15:25.833

它是可以转换为 XML 的二进制格式。

Mac OS X 上有`plutil`从二进制格式转换为文本格式的功能。因此，您可以使用它来获取`XML`和使用它。

但不幸的是，我没有很好的答案在其他平台上做什么。例如，我发现了一个可以进行对话的[Perl 脚本](http://scw.us/iPhone/plutil/)，但我不知道它是否有效。

您可以尝试一下或尝试找到类似的东西。

XML 格式在[此处](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/plist.5.html)和[此处](http://en.wikipedia.org/wiki/Property_list)进行了描述。

# visual-studio - Visual Studio 2012 中的“等待后台操作”是什么？

> ID：12175784
> 
> 赞同：96
> 
> 时间：2012-08-29T10:23:16.810
> 
> 标签：visual-studio, visual-studio-2012

偶尔，但相当频繁地，VS 2012 会锁定一个对话框，上面写着“等待后台操作完成”。例如，这可能发生在普通的旧代码编辑期间，而不是显式调用任何 IDE 命令时。

是什么原因造成的，对此我能做些什么吗？

我正在运行 ReSharper 7，而且我不是唯一一个遇到这种情况的人。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-02T17:05:22.333

我遇到了同样的问题，尤其是在 cshtml 页面中。我找到了这个页面：[https://devblogs.microsoft.com/aspnet/visual-studio-11-beta-razor-editor-issue-workaround](https://devblogs.microsoft.com/aspnet/visual-studio-11-beta-razor-editor-issue-workaround/)建议将“**工具”>“选项”>“文本编辑器”>“HTML”>“选项卡**”中的缩进选项更改为**Smart**而不是**Block**。在我的情况下，它已经设置为**Smart**并将其更改回**Block**解决了问题。

更新：我错了，这并没有修复对话，它只是延迟了它，直到我复制或粘贴。最终对我有用的是转到**Tools > Import and Export Settings... > Reset all settings**。

可能相关的问题：[Visual Studios 2010 - Asp.net MVC 4 Beta - 粘贴时的长时间延迟和频繁的崩溃](https://stackoverflow.com/questions/9435030/visual-studios-2010-asp-net-mvc-4-beta-long-delays-on-paste-and-frequent-cra/9449808#9449808)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-10-02T18:52:05.610

这是一个非常通用的诊断。它由 COM 触发，在 Visual Studio 中大量用于实现可扩展性。底层触发器是 IMessageFilter 接口。当 COM 将方法调用编组到另一个线程并且该调用在 60 秒内未完成时，就会发生触发器。

实际通知没有什么价值，它告诉你一些你已经知道的事情。到 60 秒过去时，您通常已经注意到事情并不顺利。从一点有用的知识来看，Visual Studio 实际上并没有完全死掉。然而，调用必须在 VS 再次可用之前完成。您无能为力，只能轻拍脚并等待。

此问题几乎总是由加载项引起的。Resharper 无疑是一个不错的候选人。您可以通过逐个禁用加载项直到问题消失来找到麻烦制造者。这是新版本 Visual Studio 中常见的问题，加载项供应商需要一段时间才能解决错误和挂断问题。请与供应商联系以获得支持，并通常寻找可能解决问题的更新。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-04-16T03:57:02.417

删除解决方案“suo”文件对我有用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-17T04:24:18.813

我遇到了同样的问题，在我的情况下是 DevExpress。

每次我进行复制或剪切操作时，它似乎都会挂起 Visual Studio，并显示以下消息：

> “等待后台操作完成”。

事实证明，它实际上是在后台执行一项一次性任务，而且确实需要一段时间才能完成（超过 5 分钟）。

也许如果我正常等待，它可能会消失，但最终修复它的是打开工具箱（被隐藏/折叠），这反过来又打开了一个窗口，上面写着：

> “添加 [SomeDevExpressAssemblyNameHere].dll”

这会使用 DevExpress 填充工具栏所需的每个 dll 的名称不断更新自身。

这样我可以看到操作进度，完成后我可以像往常一样再次使用复制/剪切粘贴。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-16T09:56:31.250

对我来说，解决方法是将 Web Essentials 2012 更新到 1.8 版。

有问题的版本是 1.6

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-11-30T05:34:08.840

**工具 > 选项 > 文本编辑器 > HTML > 选项卡 -> 标识 -> 无**设置为我解决了这个问题。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-01-25T19:03:41.743

这为我修复了它：

**工具 > 选项 > 文本编辑器 > HTML > 其他**

取消选中“在源视图中粘贴时自动 ID 元素”选项

如果问题再次出现，我将发布更新。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-08-28T14:34:13.560

我有这个问题几天，尝试卸载并重新安装我的Visual Studio 2012 Ultimate edtion SP3 ...仍然没有工作。所以我删除了我所有的扩展（VS 2012 的 git 工具和 Nuget 包下载器），重新启动了我的 VS，它再次像魅力一样工作了！希望它有效！

祝你好运！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-06-08T09:15:41.530

我在虚拟机中运行 Visual Studio 时遇到了这个问题——Virtual Box 4.2 在 Mac OS X Mountain Lion 上运行，托管全新的 Windows 7 安装，除了 Visual Studio 之外没有安装其他任何东西。我发现问题是由 2 个不同的问题引起的。

首先，我的项目位于与主机操作系统共享的文件夹中。换句话说，在 Windows 来宾上，我的项目出现在网络驱动器上。因此，从网络驱动器在 Visual Studio 中打开项目似乎会导致此问题，因为当我将项目复制到 Windows VM 的 C 驱动器并从 C 驱动器上的副本在 Visual Studio 中打开它时，问题就消失了。

其次，当虚拟机上的硬盘快满时，我又开始遇到这个问题。我的硬盘驱动器上有大约 1GB 的可用空间。当我增加虚拟机上硬盘的大小时，这个问题就消失了。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-10-29T16:24:04.813

对我来说，它似乎与剃刀语法有关，因为我只在一个特定的文件中使用它。

例如，如果我将以下代码放在一行中，我就会遇到所描述的问题。

> @section BodyClassName {note}

但是当把右括号放在下一行时，问题就消失了

> @section BodyClassName {note
> }

亲切的问候

斯蒂金

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-01-07T11:03:53.170

[http://geekswithblogs.net/sevenfortytwo/archive/2006/11/23/97947.aspx](http://geekswithblogs.net/sevenfortytwo/archive/2006/11/23/97947.aspx)

```
RUN> iisreset 
```

现在它在 VS 2012 上运行良好

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-06-02T14:17:46.650

打开 Visual Studio，创建一个新的 MVC 应用程序，关闭新应用程序，打开旧应用程序，它就可以工作了！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-05-26T19:45:21.270

远非理想的解决方案，但请尝试在管理员模式下运行 Visual Studio 我几乎尝试了所有方法，这是唯一对我有用的方法

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-08-16T15:29:04.510

刚刚用 Codemaid 插件重现了类似的问题。[发现这个对话](https://bitbucket.org/s_cadwallader/codemaid/issue/142/spade-starts-endless-process-in-vs-2012-c)：

> 这个问题有很多细节，但要尝试回顾一下这个问题，当从 UI 线程（例如 Spade 等 WPF 上下文）访问 API 时，VS2012 C++ API 引入了死锁问题。这在 VS2010 中不是问题，微软已经在 VS2013 中修复了它，但他们不会为 VS2012 修补它。

似乎表明应该进行修复（针对 Codemaid）：

> 请密切关注此线程，以获取该问题的持续解决方案。它与更大的重写相关，因此我一直在通过首先添加大量单元测试来帮助确保功能在更改后保持一致。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-09-03T19:31:01.163

检查 IIS 或其他进程（可能是 BizTalk）是否锁定了您的 DLL/引用
杀死/停止 IIS 或其他进程（如果是）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-12-20T01:59:41.023

I found that VS also loads packages during the "background operation". You can remove unneeded extensions to make the operation faster.

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-12-29T14:39:54.227

在我关闭 TeamViewer 8 Clipboard Sync 后，我在几周前修复了它！现在它无缘无故地出现了，所以我尝试重置所有设置，它对我有用。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-09-13T00:59:16.703

我想我找到了线索！一切以dcomcnfg.exe结束！

打开它并进入以下路径：

组件服务>计算机>我的电脑>dcom 配置

单击 dcom 后，您会看到许多警告，具体取决于您电脑上的组件数量。

在每个消息框上单击是，以便为 dcom 添加正确的记录。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-05-10T20:16:51.437

我遇到了同样的问题，并且以管理员身份运行 VS 似乎已经为我解决了问题（我在 Visual Studio 2012 Express Hangs 上发布了一个类似的问题，并在标记[的格式文档命令上显示消息“等待后台操作完成”](https://stackoverflow.com/questions/15708373/visual-studio-2012-express-hangs-with-message-waiting-for-background-operation/16085085#16085085)作为这个的副本，所以我想我也会在这里分享）。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-03-12T13:27:47.320

对我来说，是 Resharper 插件打开了一个没有显示的对话框。我只在任务栏的隐藏图标菜单中找到了对话框图标。当我摆脱对话框时，Visual Studio 立即恢复正常。

# sql - 分组查询中的自联接

> ID：12175787
> 
> 赞同：1
> 
> 时间：2012-08-29T10:23:25.693
> 
> 标签：sql, sql-server

我有一张如下表：

> PERSON_REF、CODE_START_DATE、CODE

`PK`在哪里`PERSON_REF`

我想要一个查询给我那些`CODE_START_DATE`在 2012 年 8 月的记录以及在`CODE_START_DATE`此之前最新的记录，即这个伪代码

```
SELECT PERSON_REF,
       CODE_START_DATE,               --S/B in August 2012
       CODE,
       CODE_START_DATE [PrevDate],    --Latest CODE_START_DATE Prior to Column 2 in Query
       CODE [PrevCode]                --Code at Date of Column 4 in Query 
```

如果第 2 列日期之前没有记录，第 4 列和第 5 列可能为空白

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:27:32.873

由于您使用的是**SQL Server**，请尝试使用*external apply*。这是查询

```
SELECT T1.*, T2.CODE_START_DATE PrevDate, T2.CODE PrevCode
FROM TableName T1 
 OUTER APPLY (
     SELECT TOP 1 *
     FROM TableName T2
     WHERE T2.CODE_START_DATE < T1.CODE_START_DATE 
     ORDER BY T2.CODE_START_DATE DESC
) T2
WHERE T1.CODE_START_DATE BETWEEN '01/Aug/12' AND '01/Sep/12' 
```

**更新：**

我在 2012 年*8 月为行添加了 where 条件*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:32:59.683

您可以使用以下查询：

```
SELECT A.PERSON_REF,
       A.CODE_START_DATE,
       A.CODE,
       (Select Top 1 B.CODE_START_DATE From YourTable B Where B.CODE_START_DATE > A.CODE_START_DATE Order by CODE_START_DATE DESC)AS [PrevDate],
       (Select Top 1 B.CODE From YourTable B Where B.CODE_START_DATE > A.CODE_START_DATE Order by CODE_START_DATE DESC) AS [PrevCode]
From YourTable A
Where ..Conditions... 
```

# ruby - 未提供 Instance_eval 块？

> ID：12175788
> 
> 赞同：0
> 
> 时间：2012-08-29T10:23:27.190
> 
> 标签：ruby, rack, instance-eval

有谁知道是什么导致了这个错误？我正在尝试制作一个基本的机架应用程序。

`App.rb =>`

```
class Cherry
    class << self
        def app &block
            Cherry::Application.new &block
        end
    end

    class Application
        def initialize &block
            instance_eval &block
        end

        def print_start_message
            puts "Starting server"
        end

        def call env
            [200, {"Content-type" => "text/plain"}, "Hello World"]
        end
   end
end 
```

`Config.ru =>`

```
 require 'app'

   run Cherry.app do
        print_start_message
   end 
```

编辑：显然我忘了包括错误呜呜声：

`/local/www/cherry/lib/app.rb:12:in 'instance_eval': block not supplied (ArgumentError)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:41:35.487

解决它！显然你需要在`Cherry.app do..`块周围的括号：

```
run(Cherry.app do
    "Hello World"
end) 
```

# iphone - 互联网连接恢复时显示 iAd？

> ID：12175789
> 
> 赞同：1
> 
> 时间：2012-08-29T10:23:28.273
> 
> 标签：iphone, ipad, iad

当没有 Internet 连接时，我的代表`bannerView:didFailToReceiveAdWithError:`会被呼叫。

但是，当 Internet 连接恢复时，我`bannerViewDidLoadAd:`永远不会被调用，而不是每 30 秒左右调用一次，只要 Internet 没有断开连接。

有没有办法在重新连接互联网时恢复 iAd 广告？

# ruby - 在 Ruby 中获取当前代码行

> ID：12175793
> 
> 赞同：18
> 
> 时间：2012-08-29T10:23:32.650
> 
> 标签：ruby, logging, call

今天疯狂的想。

有什么方法可以获取执行代码的行号吗？

```
Logger.info "I was run on line #{get_line_number}" 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-29T10:26:16.507

您可以使用`__LINE__`变量。另请参阅此[https://stackoverflow.com/a/2496240/100466](https://stackoverflow.com/a/2496240/100466)答案。

# java - Junit：单元测试“接收”电子邮件功能

> ID：12175799
> 
> 赞同：3
> 
> 时间：2012-08-29T10:23:46.923
> 
> 标签：java, email, junit

有一个 Java 应用程序发送电子邮件通知，该通知由用户在 UI 上的更新触发。我正在尝试编写 JUnit 测试用例，通过寻找接收消息的方法来验证电子邮件是否已成功发送。

[Dumbster](http://quintanasoft.com/dumbster/)对我不起作用，因为它是用来在测试程序本身中发送和接收邮件的。

如何测试此功能？非常感谢您的帮助。

-瓦迪拉杰。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T10:50:42.960

首先，听起来您在谈论集成测试，而不是单元测试。

**一次性设置：**

*   在 gmail 上手动创建一个邮件帐户
*   在 gmail 帐户设置中启用 IMAP。

由于谷歌使用机器人检测，这些步骤很难自动化。

**测试用例：**

*   修改用户帐户以使用上面创建的 gmail 帐户的电子邮件地址
*   执行被测代码（对于给定的用户）
*   使用 IMAP 查询 gmail 帐户
*   使用 IMAP 删除消息（如果存在）

有一些很好的 java-imap 库可以让 gmail 审讯变得非常容易。以下是快速搜索显示的内容：

[http://harikrishnan83.wordpress.com/2009/01/24/access-gmail-with-imap-using-java-mail-api/](http://harikrishnan83.wordpress.com/2009/01/24/access-gmail-with-imap-using-java-mail-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:21:47.823

Dumbster 的目的是删除外部电子邮件服务器。

如果这还不够，则建议您尝试测试电子邮件服务器和网络基础设施的功能。

这可能仅在您使用生产电子邮件服务和网络基础设施时才有意义——因为在测试环境中可能会以不同方式配置。

如果您确定您认为这是一个好主意，@Lithium 的建议方法很有意义。

我们有一个用于测试环境的开发邮件服务器，我们将它与[citadel](http://www.citadel.org/)一起用于测试人员，以允许他们查看发送了哪些电子邮件。如果我要编写这个测试，我会使用内部邮件服务器而不是依赖谷歌。

# c# - 如何在导航另一个时间之前给 geckowebbrowser 导航时间

> ID：12175805
> 
> 赞同：0
> 
> 时间：2012-08-29T10:24:01.840
> 
> 标签：c#, .net, webbrowser-control, gecko, geckofx

我正在创建简单的网页重新加载程序。我想重新加载网页几次。在我的程序中，我使用 gecko webbrowser 控件，并且我使用 progressBar 作为 pege 重新加载进度。

我要做的是当壁虎加载网页时，progressBar 值将增加 1 倍，我将其增加 5 倍，进行 5 次导航。当导航完成progressBar 将增加1 倍。

下面是我在我的程序中使用的代码，但它运行不正常。当我导航时，进度条第一次增加，它不是一个一个增加，它一次就满了。

请告诉我我需要做些什么来给 gecko webbrowser 控件导航时间，以便它可以成功加载网页，然后进行下一次导航。

```
while(progressbar1.Value != 5)

{

    GeckoWebBrowser1.Navigate(textBox1.Text);

    ProgressBar1.Value = ProgressBar1.Value + 1;

} 
```

# firefox - 在 Firefox 附加脚本中获取 mime 类型数组

> ID：12175818
> 
> 赞同：2
> 
> 时间：2012-08-29T10:24:40.350
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk, xpcom

我正在尝试在 firefox 扩展端获取 MIME 类型列表。

浏览器 JavaScript 上下文中有**导航**器对象。它具有**mimeTypes**属性 - 浏览器识别的 MIME 类型列表。我需要使用附加 SDK 或 XPCOM 在附加脚本中获取该列表。我怎样才能做到这一点？我在 XPCOM 或 SDK 中找不到任何合适的方法。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:47:20.583

> 它具有 mimeTypes 属性 - 浏览器识别的 MIME 类型列表。

不，它不是——它只是为它们注册了插件 (Flash & Co.) 的 MIME 类型的列表。如果您需要获取插件信息，我通常建议使用[`nsIPluginHost.getPluginTags()`method](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIPluginHost#getPluginTags%28%29)。不幸的是，插件标签没有与插件相关的 MIME 类型的信息。

因此，您无法避免获取`navigator`仅在窗口上下文中可用的对象。您可以使用[`page-worker`模块](https://addons.mozilla.org/en-US/developers/docs/sdk/1.9/packages/addon-kit/page-worker.html)来做到这一点：

```
require("page-worker").Page({
  contentScript: "var result = [];" +
                 "for (var i = 0; i < navigator.mimeTypes.length; i++)" +
                   "result.push(navigator.mimeTypes[i].type);" +
                 "self.postMessage(result);",
  contentURL: "about:blank",
  onMessage: function(mimeTypes) {
    // Do something with the MIME types
  }
}); 
```

# java - 将 String 设置为 Java 中的变量，如 PHP $$var

> ID：12175829
> 
> 赞同：0
> 
> 时间：2012-08-29T10:25:28.403
> 
> 标签：java

我被困在这里

```
List<String> listcell = new ArrayList<>();'
for(int i = 0;i<7;i++){
    listcell.add("cell"+i);
 }
for(int i = 0;i<7;i++){
    String strcell  = listcell.get(i);
  // Cell strcell  = row0.createCell(i); 
 } 
```

我无法将 String **strcell**转换为**Cell**的变量，谁知道如何，帮帮我.... 有人误解了，主要问题是“ **java string to variable** ”，我知道代码是错误的，然后不要像“Java不支持同范围内的同名变量”，我一开始就知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:28:16.873

Java 不支持同一范围内的同名变量。

根据java变量命名约定：它不能与另一个声明出现在同一范围内的变量同名

[http://www.karlin.mff.cuni.cz/network/prirucky/javatut/java/nutsandbolts/vars.html](http://www.karlin.mff.cuni.cz/network/prirucky/javatut/java/nutsandbolts/vars.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:31:07.693

第一个认为你不能像你正在做的那样声明相同的变量 2 次

```
String strcell  = listcell.get(i);
Cell strcell  = row0.createCell(i); 
```

所以你必须使用不同的变量名，比如..

```
for(int i = 0;i<7;i++){  
   String strcell  = listcell.get(i);
   Cell cellVari  = row0.createCell(i);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:32:33.213

也许您正在尝试使用地图？

```
Map<String, Cell> cellMap = new HashMap<>();

for(int i = 0; i < 7; i++)
    cellMap.put("cell" + i, row0.createCell(i));

for(int i = 0; i < 7; i++)
    System.out.println(cellMap.get("cell" + i)); 
```

或更简单

```
Map<Integer, Cell> cellMap = new HashMap<>();

for(int i = 0; i < 7; i++)
    cellMap.put(i, row0.createCell(i));

for(int i = 0; i < 7; i++)
    System.out.println(cellMap.get(i)); 
```

# html - VLC 插件 IE 9 错误

> ID：12175837
> 
> 赞同：4
> 
> 时间：2012-08-29T10:25:54.870
> 
> 标签：html, internet-explorer-9, vlc

我以这种方式包含 IE 9 的 VLC 插件

```
<!--[if lte IE 9]>
<object width='800' height='600' classid='clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921'>
<param name='src' value='rtsp://127.0.0.1:8554/realtime_18831eda-47a6-4633-9431-b8d3c06f943d' />
<param name='autoplay' value='true'/>
<param name='toolbar' value='true' />
</object>
<![endif]--> 
```

加载页面时，似乎 VLC 插件正在工作（rtsp-stream 启动）但 VLC 是不可见的。为了使它可见，我必须重新绘制浏览器窗口。（例如滚动或缩放浏览器窗口）。之后 VLC 变得可见。

有什么办法可以解决这个问题吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T17:12:35.133

我不确定这是显示视频或直播的最佳方式。我不会使用任何 VLC 插件来显示视频。必须有其他方式来显示直播。只需[使用 flash player html 搜索 rtsp 直播流](https://encrypted.google.com/search?hl=en&q=rtsp%20live%20stream%20with%20flash%20player%20html)。另外我建议使用[嵌入](http://www.w3schools.com/tags/tag_embed.asp)标签而不是对象和参数。编码的快乐时光。

# php - 发布到粉丝专页墙，状态正常，但帖子未显示在墙上

> ID：12175839
> 
> 赞同：0
> 
> 时间：2012-08-29T10:25:57.680
> 
> 标签：php, facebook, facebook-graph-api, symfony

我正在尝试实现一项功能，以从 Symfony 2 框架的管理页面 (SonataAdminBundle) 将帖子发布到 Facebook 粉丝页面。我已经集成了 Facebook PHP SDK，并且在 Controller 中尝试使用它：

```
 $facebook = new \Facebook(array(
            'appId'  => $myAppId,
            'secret' => $myAppSecret,
            'cookie' => false,
            ));

        //Get App Token
        $token = $facebook->getAccessToken();
        //Try to Publish on wall or catch the Facebook exception
        try {

          $args = array('access_token' => $token,
            'from' => $myAppId,
            'link' => 'http://mypage.pl',
            'name' => 'My Page',
            'caption' => $object->getTitle() ,
            'description' => 'Description....',
            'message' => $object->getText(),
          );

        $result = $facebook->api('/'.'$myAppId'.'/feed/', 'POST', $args);
        }

        //If the post is not published, print error details
        catch (FacebookApiException $e) {
                     ....
        ));
        } 
```

我想我收到了一个带有 app id 和 post id 的响应，如下所示：

```
{"status":"OK","content":{"id":"295131140562739_359030107506176"}} 
```

但该帖子并未显示在 Facebook 粉丝专页时间线上。有人成功实施了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T23:34:47.133

```
$result = $facebook->api('/'.'$myAppId'.'/feed/', 'POST', $args); 
```

以上没有产生预期的效果。正如 Darvex 所提到的，您可能不希望您的应用程序 ID 存在，而是页面 ID。此外，在 PHP 中将变量放在单引号之间会使其成为值为 $myAppId 的字符串，而不是变量的值。那行应该变成：

```
$result = $facebook->api('/'. $myPageId .'/feed/', 'POST', $args); 
```

只需确保在调用前为 $myPageId 分配了正确的 id :)

# java - 从 Eclipse 中的依赖项 jar 运行 JUnit 测试

> ID：12175848
> 
> 赞同：10
> 
> 时间：2012-08-29T10:26:21.983
> 
> 标签：java, eclipse, unit-testing, maven, junit

我有一些 JUnit 测试包含在`.jar`旨在用作库的 a 中。该库包含一些在另一个项目中使用该库时应运行的测试。

但是，当我使用该库创建一个新项目并在 Eclipse 中在其上运行 JUnit 时，依赖项中的测试`.jar`不会运行/不会被 JUnit 测试运行器检测到。我收到消息：

> ```
> No tests found with test runner 'JUnit 4'. 
> ```

有没有办法可以配置依赖项`.jar`，以便测试与主项目中可能包含的任何测试一起运行？

基本上我希望依赖 .jar 将测试“导出”到它使用的任何项目。

我正在使用 Eclipse Juno、JUnit 4.10 和 Maven 进行依赖管理。

**编辑：**

这个库的重点是能够帮助测试使用它的项目——即它运行一些专门的测试。这就是为什么我希望能够导入库 .jar 并让它为导入项目贡献额外的测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T10:21:37.440

你可以试试*Maven Surefire*。

在某些情况下，拥有一组使用各种依赖配置运行的测试会很有用。实现此目的的一种方法是拥有一个包含单元测试并生成测试 jar 的项目。然后，几个测试配置项目可以使用单元测试并使用不同的依赖集运行它们。问题是没有简单的方法可以在依赖项 jar 中运行测试。*Surefire*插件应该具有允许我运行包含在依赖项 jar 中的所有或一组单元测试的配置。

这可以按如下方式完成（*Junit 3*）：

确保测试 jar 包含一个具有静态套件（）方法的类

```
import junit.framework.Test;
import junit.framework.TestSuite;

public class AllTests {    
    public static Test suite() 
    { 
        TestSuite suite = new TestSuite( "All Tests"); 
        suite.addTestSuite(TestOne.class); 
        suite.addTestSuite(TestTwo.class); 
        return suite; 
    }    
} 
```

然后在项目中使用 test-jar 依赖：创建一个***TestCase***：

```
package org.melati.example.contacts;
import org.melati.poem.AllExportedTests;
import junit.framework.Test;
import junit.framework.TestCase;

public class PoemTest extends TestCase {    
    public static Test suite() 
    { 
        return AllExportedTests.suite(); 
    }
} 
```

现在将找到测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T15:16:16.280

我认为制作单元测试库（带`@Test`注释的方法）是一个坏主意。但是，制作一个可重用的测试组件库是一个不错的选择。我们已经在一些开源项目中做到了这一点，您可以看看它是如何工作的。

1.  `src/mock/java`一个 Maven 模块从目录中导出测试组件（我们称它们为“模拟”） 。导出的工件具有`-mock`分类器。请参阅[rexsl/pom.xml](http://trac.fazend.com/rexsl/browser/rexsl/trunk/rexsl/pom.xml?marks=502-559)（注意突出显示的行）。

2.  模拟工件与常用工件一起部署到 Maven 中心：[http](http://repo1.maven.org/maven2/com/rexsl/rexsl-core/0.3.8/) ://repo1.maven.org/maven2/com/rexsl/rexsl-core/0.3.8/ （注意`...-mock.jar`文件）

3.  需要 mock 的模块可以将它们作为通常的工件包含，例如[rexsl-core/pom.xml](http://trac.fazend.com/rexsl/browser/rexsl/tags/rexsl-0.4/rexsl/pom.xml?marks=489-546)（参见突出显示的行）：

4.  然后，在您的单元测试中，只需使用该模拟库中的类，例如模拟的常规构建器，例如：[BulkHttpFeederTest](http://trac.fazend.com/rexsl/browser/rexsl/tags/rexsl-0.4/rexsl/rexsl-core/src/test/java/com/rexsl/log/BulkHttpFeederTest.java?marks=34,69-77)

这就是您可以以一种优雅的方式使您的测试工件可重用的方法。希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T04:57:37.510

@迈凯拉，

我发现这可能会对你有所帮助。只需将 Testcase 类扩展到项目中的一个 java 类，您就可以运行该特定类以将其作为 JUnit 测试运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T04:41:47.670

我不确定这是可取的 - 一方面，如果您使用 jar，它的行为可能会受到外部上下文的影响，例如类路径中的其他库。从 jar 内部，没有简单的方法可以分析此上下文并相应地调整测试。另一方面，如果您编写和编译库，则应在将其打包为 jar 之前对其进行测试。您甚至可能不想包含您的测试。

如果再次运行测试对您来说真的很重要，我会对在不更改 jar 的情况下会导致它们失败的原因感兴趣。但是，在这种情况下，您可能想要扩展 testrunner。据我所知，它使用反射。您可以很容易地在类加载器中加载 jar 并浏览它们的所有类。通过反射，您可以识别测试类并组装测试套件。您可以查看 testrunner 作为示例。尽管如此，您仍需要从外部开始此过程，例如，从客户端项目中的一个测试类内部开始。在这里，QATest 的方法可能会有所帮助：通过提供覆盖版本的 testsuite 或 testrunner，您可以自动执行此操作 - 如果客户端使用您覆盖的 API。

让我知道这种相当昂贵的方法是否适用于您的场景，我可以提供代码示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T09:09:39.757

为什么jar的用户要运行jar里面的测试用例！！！当jar打包交付时，就意味着单元测试运行成功。通常，jar 本身应被视为单独的项目或模块之一。在这两种情况下，单元测试用例都是在交付之前运行的。

# android - 在 SpannableStringBuilder 中可绘制

> ID：12175849
> 
> 赞同：1
> 
> 时间：2012-08-29T10:26:26.153
> 
> 标签：android, textview, stringbuilder

我在 TextView 中有简单的 SpannableStringBuilder 和 clicable 文本。像那样： ![在此处输入图像描述](../Images/038a66d0f7fba9969a06584cb07db10a.png)

我需要在此文本的末尾插入可点击的小图片或按钮： ![在此处输入图像描述](../Images/761ff3a27067bdd820942cf599aa7a20.png)

这可能吗？如果可以，我该怎么做？

# c++ - C++ concat const char 与 char

> ID：12175850
> 
> 赞同：1
> 
> 时间：2012-08-29T10:26:30.157
> 
> 标签：c++, c

我已经使用定义了一个值

```
extern char WEBSRV_ADMIN_ID[31];    char WEBSRV_ADMIN_ID[31]=   "admin"; 
```

然后我想在 char 语句中使用用户名到 sql 作为

```
const char *pSQL[1];
pSQL[1] = "update websrv_config set admin_id='" + WEBSRV_ADMIN_ID + "'"; 
```

但似乎有错误

```
error: invalid operands of types ‘const char [36]’ and ‘char [31]’ to binary ‘operator+’ 
```

我怎样才能克服它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T10:27:56.577

在 C++ 中，使用`std::string`. 它`+`可以按您的意愿工作。

在 C 中，分配一个足够大的缓冲区以包含整个查询并使用`strncat`.

# php - 表单提交不起作用

> ID：12175851
> 
> 赞同：-2
> 
> 时间：2012-08-29T10:26:33.707
> 
> 标签：php, forms, email, contact-form

我尝试创建的表单有问题。基本上，它不允许我将电子邮件发送给收件人，即使 PHP 代码是正确的。SO中很少有人试图提供帮助，但似乎代码不起作用。

```
<?php
$error = false;
$sent = false;

if(isset($_POST['submit'])) {
    if(empty($_POST['name']) || empty($_POST['email']) || empty($_POST['comments'])) {
        $error = true;
    } 
    else {

        $to = "linardsberzins@gmail.com";

        $name = trim($_POST['name']);
        $email = trim($_POST['email']);
        $comments = trim($_POST['comments']);

        $subject = "Contact Form";

        $message =  "Name: $name \r\n Email: $email \r\n Comments: $comments";
        $headers = "From:" . $name;
        $mailsent = mail($to, $subject, $message, $headers);

        if($mailsent) {
            $sent = true;
        }
   }
}
?> 
```

HTML：

```
<?php if($error == true){ ?>
  <p class="error">Text</p>
<?php } if($sent == true) { ?>
  <p class="sent">Text</p>
<?php } ?>  
<div id="form">
<form name="contact" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
    <fieldset>
        <h4>Contact Me!</h4>
        <label for="name">Name:</label>
            <input type="text" name="name" id="name"/>
            <label for="email"/>Email:</label>
            <input type="text" name="email" id="email"/>
            <label for="comments" id="comments">Comments:</label>
            <textarea name="comments" id=""></textarea>
            <fieldset>
            <input class="btn" type="submit" name="submit"  class="submit" value="Send   email"/>
            <input class="btn" type="reset" value="Reset"/>            
            </fieldset> 
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:28:04.023

不要依赖`submit`按钮，因为并非所有浏览器都将该按钮发送为`POST`，更改为其他输入：

```
if(isset($_POST['name'])) { 
```

# sql - 从我的软件访问的在线 SQL Server 数据库

> ID：12175859
> 
> 赞同：2
> 
> 时间：2012-08-29T10:26:54.613
> 
> 标签：sql, sql-server, database

我一直在使用 SQL Server 数据库开发软件。现在我正处于想为其他人提供这个软件的阶段，但我不知道如何管理数据库。问题是在安装我的软件时在用户计算机上安装 SQL Server 真的很不方便（可能会发生许多意想不到的事情）。

因此，我认为我会为使用 SQL Server 的 Web 托管付费，但它是：

1.  **昂贵**（仅适用于具有少量表的数据库）。
2.  大多数虚拟主机不提供对 SQL Server 数据库的远程访问（所以我无法从我的软件连接那里）。

所以我的问题是，*你会怎么做？*我自己的虚拟服务器？（甚至更贵），或者您会在用户计算机上安装 SQL Server 吗？或者您知道在哪里可以获得低成本的 SQL Server 托管服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:48:05.453

我不建议使用远程 SQL Server。SQL 连接强烈依赖于网络连接，而 Internet 对此不够“稳定”。还有一些性能问题会使您的应用程序完全无用。

您没有提到的一件重要的事情是不同的用户是共享相同的数据还是拥有自己的数据。如果每个用户都将使用自己的数据，您可以安装“本地”SQL Server Edition（SQL Compact Edition，这里是参考）

[http://msdn.microsoft.com/en-us/library/aa983341(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/aa983341(v=vs.110).aspx)

如果多个用户将共享相同的数据，则不应仅依赖数据库。一种可能的方法是拥有一个实现业务逻辑的应用程序服务器，而您的桌面应用程序仍然作为一个“哑”客户端运行。这对于性能和减少数据传输问题要好得多。您可以为您的应用程序服务器实现 Web 服务。这是一个很好的解决方案，因为数据是通过 HTTP/HTTPS 从应用程序服务器传输到客户端的，这使您免于处理端口和其他通信问题。另一种方法是使用 Microsoft 通信框架 (WCF)

祝你好运！

# jquery - jqGrid 和 Rx Reactive javascript 扩展

> ID：12175863
> 
> 赞同：0
> 
> 时间：2012-08-29T10:27:02.530
> 
> 标签：jquery, jqgrid, reactive-extensions-js

我正在尝试使用以下语法在 jqGrid 中创建 onSelectRow 事件的 Observable：

```
grid.jqGrid().toObservable("onSelectRow").Select(function (event) {
                 return alert($(event.target).val());
            }); 
```

似乎什么都没有发生。大多数示例都绑定到简单的事件，例如单击文档。我找不到任何复杂的实现示例。这怎么可能实现？

# node.js - 如何组织我的规范文件？

> ID：12175866
> 
> 赞同：6
> 
> 时间：2012-08-29T10:27:13.697
> 
> 标签：node.js, testing, tdd, mocha.js

我正在使用[mocha](http://visionmedia.github.com/mocha/)来测试我的 node.js 应用程序。

我注意到我的规范文件随着时间的推移变得越来越大。是否有任何模式来组织测试文件（例如，每个测试一个规格文件）？或者在 mocha 之上还有其他框架可以帮助我构建测试吗？还是因为这个原因你更喜欢其他测试框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:54:36.620

大型测试/规范文件往往意味着被测代码可能做的太多。但情况并非总是如此，通常您的测试代码总是会超过被测代码的权重，但如果您发现它们难以管理，这可能是一个迹象。

我倾向于根据功能对测试进行分组。想象一下，如果我们有`example.js`，我会期望`example.tests.js`开始。

而不是一个名为的规范，`ExampleSpec`我倾向于有许多基于不同上下文的规范/测试。例如，我可能有`EmptyExample`, `ErrorExample`, 并且`DefaultExample`有不同的前置条件。如果这些变得太大，您要么缺少抽象，要么应该考虑将文件拆分出来。因此，您最终可能会得到一个目录结构，例如：

```
    眼镜/
        例子/
            EmptyExample.js
            错误示例.js
            DefaultExample.js

```

不过，首先，每个生产文件都有一个测试/规范文件应该是起点。仅在需要时分开。

# git - 将 diffmerge 设置为可视 Git difftool 不起作用

> ID：12175867
> 
> 赞同：3
> 
> 时间：2012-08-29T10:27:22.647
> 
> 标签：git, powershell, git-config, github-for-windows, diffmerge

我正在尝试将 DiffMerge 配置为我在 Git 中的 difftool，但没有运气。这是我的**.gitconfig**文件的重要部分（未显示的其他设置仅供用户使用）。

```
[diff]
        tool = diffmerge
[difftool "diffmerge"]
        cmd = \"C:\\Program Files\\SourceGear\\Common\\DiffMerge\\sgdm.exe\" \"$LOCAL\" \"$REMOTE\" 
```

每当我`git difftool`从 powershell 命令行调用时，冲突都会直接显示在 powershell 界面的下方，而不是按预期显示在 diffmerge 中。我知道 git 正在获取这些设置，因为当我检查全局配置时，我会从配置文件中获得设置：

```
git config --global --get-all difftool.diffmerge.cmd
"C:\Program Files\SourceGear\Common\DiffMerge\sgdm.exe" "$LOCAL" "$REMOTE" 
```

我正在运行 powershell 而不是 git bash。这是因为我为 windows 安装了 github，它提供了 powershell 作为 git 的 shell，所以我不需要安装 bash（还）。Git 版本是 1.7.11.msysgit.0。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T11:58:48.610

`difftool`我和 和混淆了`mergetool`。我需要用于`mergetool`解决与视觉界面的冲突并保存结果。`difftool`只向您展示差异。有关说明，请参阅[git-mergetool-vs-difftool](https://stackoverflow.com/questions/11197465/git-mergetool-vs-difftool)。

我将此部分添加到我的并改为从 powershell 命令行`.gitconfig`调用。`git mergetool`快乐的时光。

```
[merge]
    tool = diffmerge
[mergetool "diffmerge"]
    cmd = \"C:\\Program Files\\SourceGear\\Common\\DiffMerge\\sgdm.exe\" --merge --result=\"$MERGED\" \"$LOCAL\" \"$BASE\" \"$REMOTE\"
    trustExitCode = true
    keepBackup = false 
```

# sql - 为什么 log4net 默认为 AdoNetAppender 使用事务

> ID：12175870
> 
> 赞同：0
> 
> 时间：2012-08-29T10:27:37.203
> 
> 标签：sql, ado.net, log4net

我想不出为什么在使用 log4net 记录时你会想要使用事务。假设您有 200 条日志消息，并且在插入第 150 条消息并回滚时事务失败。您现在在数据库中没有日志消息，而如果您不使用事务，您将有 150 条消息。在日志记录方面，有一些消息不是比没有更好吗？

在使用 log4net 将日志消息写入数据库时​​，谁能想到使用事务的充分理由（假设您没有覆盖 AdoNetAppender 行为并且消息一次写入数据库）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:39:20.397

> 在日志记录方面，有一些消息不是比没有更好吗？

是的，但是 log4net 并不是为[可靠性](http://logging.apache.org/log4net/release/faq.html#reliability)而设计的，我认为创建和提交 200 个 sql 事务而不是一个，肯定会对性能产生一些影响。我猜这种性能影响必须足够大，才能以这种方式设置默认值。

# ios - UITextview 可滚动但不可编辑

> ID：12175872
> 
> 赞同：4
> 
> 时间：2012-08-29T10:27:42.483
> 
> 标签：ios, objective-c

如何使 UITextView 可滚动但不可编辑？

我试过这个：

```
textmessage.enabled = NO;
textmessage.userInteractionEnabled = YES; 
```

......但不起作用......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T10:42:00.170

通过仅设置 to 的属性`editable`，您应该使其内容不能被用户修改（通过用户仍然可以选择/复制/粘贴文本的方式）。[**`UITextView`**](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextView_Class/Reference/UITextView.html)`NO`

```
[myTextView setEditable:NO]; 
```

如果您似乎无法滚动它，可能是因为您里面没有足够的文本？

或者，也许您可​​以出于某种原因禁用 UITextView 的属性 scrollEnabled。

```
myTextView.scrollEnabled = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-17T11:28:38.863

试试这个：

```
textmessage.isEditable = false

textmessage.isScrollEnabled = true 
```

# android - 更新 mysql 数据库中的 android spinner 值

> ID：12175874
> 
> 赞同：0
> 
> 时间：2012-08-29T10:27:50.783
> 
> 标签：android, web-services, soap, android-spinner, android-ksoap2

嗨，我必须在 mysql 数据库中更新我的微调器值意味着它没有更新...它在 apache 控制台窗口上显示以下错误。

```
[ERROR] 2
 java.lang.ArrayIndexOutOfBoundsException: 2
at org.apache.axis2.databinding.utils.BeanUtil.deserialize(BeanUtil.java:639)
at org.apache.axis2.rpc.receivers.RPCUtil.processRequest(RPCUtil.java:153)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:206)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

这是我的安卓代码：

```
 public class InsertionExample extends Activity {
private final String NAMESPACE = "http://xcart.com";
private final String URL = "http://192.168.1.168:8085/XcartLogin/services/update?wsdl";
private final String SOAP_ACTION = "http://xcart.com/insertData";
private final String METHOD_NAME = "insertData";
Button btninsert;
String selectedItem;

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spnMusketeers);

    btninsert = (Button)findViewById(R.id.btn_insert);
    btninsert.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo unameProp =new PropertyInfo();
            unameProp.setName("userName");//Define the variable name in the web service method
           unameProp.setValue(selectedItem);//Define value for fname variable
            unameProp.setType(String.class);//Define the type of the variable
            request.addProperty(unameProp);

              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
              envelope.setOutputSoapObject(request);
              HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

              try{
               androidHttpTransport.call(SOAP_ACTION, envelope);
                  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

                 TextView result = (TextView) findViewById(R.id.textView2);
                  result.setText(response.toString());

           }
           catch(Exception e){

           }

        }
    });

    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

    //Dynamically generate a spinner data 
    createSpinnerDropDown();

}

//Add animals into spinner dynamically
private void createSpinnerDropDown() {

    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);

    //Array list of animals to display in the spinner
    List<String> list = new ArrayList<String>();

    list.add("Q");
    list.add("P");
    list.add("F");
    list.add("I");
    list.add("C");

    //create an ArrayAdaptar from the String Array
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    //set the view for the Drop down list
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    //set the ArrayAdapter to the spinner
    spinner.setAdapter(dataAdapter);
    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

}

public class MyOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

         selectedItem = parent.getItemAtPosition(pos).toString();

 }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Do nothing.
    }
} 
```

这是我的网络服务代码：

```
public class update {

 public String insertData(String status,String username){

  try{

   Class.forName("com.mysql.jdbc.Driver");
   Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/xcart-432pro","root","");
   PreparedStatement statement =  con.prepareStatement("UPDATE `xcart_orders` set `status` = '"+status+"'  where `status` = 'Q'");
   int result = statement.executeUpdate();
  }

   catch(Exception exc){
    System.out.println(exc.getMessage());
    }

  return "Updation successfull!!";
  }

} 
```

请帮助我..为什么我的更新对我不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:45:32.883

我得到了解决方案...我在这里有一个小问题..问题是：webservice 代码传递了 2 个字符串状态和用户名..但是我不得不在 dis line unameProp.setName("userName"); 上错误地提及 android 代码...现在我将上面的行替换为 unameProp.setName("status");...nw 我得到了解决方案

# blackberry - 黑莓在持久存储中保存复选框状态

> ID：12175877
> 
> 赞同：0
> 
> 时间：2012-08-29T10:27:57.503
> 
> 标签：blackberry, savestate, persistent-object-store

我有一个登录页面（用户名、密码字段），其中有一个“记住我”复选框。如果选中该复选框，应用程序需要记住下次登录的用户名和密码。已经完成并且工作正常。但是我发现很难保存复选框字段的状态，即它是否被选中。我通过以下代码保存用户名/密码：

```
if (persistentObject.getContents() == null)
{
    persistentHashtable = new Hashtable();
    persistentObject.setContents(persistentHashtable);
} else {
    persistentHashtable = (Hashtable) persistentObject.getContents();
}

if (persistentHashtable.containsKey("username") && persistentHashtable.containsKey("password"))
{
    username.setText((String) persistentHashtable.get("username"));
    passwd.setText((String) persistentHashtable.get("password"));
} 
```

如果选中复选框并且登录成功，则通过以下方式保存用户名和密码：

```
if(checkBox1.getChecked() == true)
{
    persistentHashtable.put("username", user_id);
    persistentHashtable.put("password", password);
} 
```

我尝试使用下面的行保存复选框状态，但这是不正确的。

```
persistentHashtable.put("checkbox", checkBox1.setChecked(true)); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:43:48.990

RIM rapc.exe 编译器不支持自动装箱（它在 java 1.3 兼容模式下工作），然后您需要将布尔值包装到`Boolean`类实例中，然后再将其保存在哈希表中或将其传递到持久存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:59:19.727

嘿伙计们，我设法找到了解决我的问题的方法。我通过检查用户名字段是否为空来解决，然后复选框状态应该是“未选中”，否则它应该是“选中”。这是做我想做的事。如果你们中的任何人有更好的方法，请提出建议。我的工作代码如下：

```
if(username.getText().length()==0)
                {
                    checkBox1 = new CheckboxField("Remember me",false);
                }
                else
                {
                    checkBox1 = new CheckboxField("Remember me",true);
                } 
```

假 = 未选中，真 = 选中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:00:40.830

复选框用于用户意愿，根据您的代码，如果用户输入了用户名复选框将被选中。您的代码有点复杂，首先您需要将内容代码设置为持久化，一旦您设置了哈希表。你有一个登录屏幕，所以你必须有一个提交按钮。在提交按钮事件上这样做：

```
// to set persistent values
if(checkBox1.getChecked() == true)
{
 persistentHashtable = new Hashtable();
 persistentHashtable.put("username", user_id);
 persistentHashtable.put("password", password);
 persistentHashtable.put("checkbox", "true");
 persistentObject.setContents(persistentHashtable);
 persistentObject.commit() ;
}

// to get from  persistent values
if (persistentObject.getContents() != null) 
{
 persistentHashtable = (Hashtable) persistentObject.getContents();
 username.setText((String) persistentHashtable.get("username"));
 passwd.setText((String) persistentHashtable.get("password"));
 String boolval = (String) persistentHashtable.get("checkbox"); 
 if(boolval.equals("true"))
    checkBox1 = new CheckboxField("Remember me",true);
 else
    checkBox1 = new CheckboxField("Remember me",false);
} 
```

# prolog - 找出二叉树的高度

> ID：12175884
> 
> 赞同：1
> 
> 时间：2012-08-29T10:28:15.443
> 
> 标签：prolog, binary-tree

我想知道如何获得二叉树的总高度。

这就是在我开始在脑海中循环错误之前我走了多远。

```
height( leaf(_), 1 ).
height( branch(Branch1, Branch2), H ):-
    height(Branch1, H1),
    height(Branch2, H2),
    is max(H1, H2). 
```

我认为我走在正确的轨道上，但我似乎无法理解最后一部分（因为一旦设置了值就无法更改这些变量）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:37:52.787

嗯，你快到了。我没有太多要说的，因为你写的已经很正确了，所以我就完成了。

```
height( leaf(_), 1 ).
height( branch(Branch1, Branch2), H ):-
    height(Branch1, H1),
    height(Branch2, H2),
    H is max(H1, H2) + 1. 
```

# django - 上传图片和pdf文件

> ID：12175886
> 
> 赞同：0
> 
> 时间：2012-08-29T10:28:19.520
> 
> 标签：django, django-models, django-forms, django-admin, django-views

我有一个用 cms Django 创建的项目，在这个项目中我必须上传一个图像和 pdf 文件。models.py 中的代码如下：

```
file_pdf_fattura_finale_solo_amministrazione = models.FileField (upload_to = "/home/alessandro/Scrivania/progetto/static/finale/", max_length=20000, blank=True)
```

使用此步骤上传的文件已插入正确的文件夹，但该文件不起作用。

在管理员面板中，当我单击我上传的图像或 pdf 文件时，浏览器告诉我找不到页面 (404)。当前的 URL home/alessandro/Scrivania/progetto/static/finale/header_blog.jpg 与其中任何一个都不匹配。

我已经验证了权限，但我有默认的 chmod 777。

有任何想法吗？

我也关注本教程 youtube：https://www.youtube.com/watch?v=mQ7RAhaehs0&list=UUkLMlkrce5Ce_ujCWGuF5oA&index=18&feature=plcp 我有相同的代码，但没有结果。

有任何想法吗？我的错误在哪里？

如果您愿意，我可以将 zip 文件夹与项目一起发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:32:26.497

你可以试试

```
file_pdf_fattura_finale_solo_amministrazione = models.FileField (upload_to = "static/finale", max_length=20000,  blank=True) 
```

这会将文件从项目根目录上传到路径“static/finale”文件夹更多信息[here](https://docs.djangoproject.com/en/dev/ref/models/fields/#filefield)

# c - c套接字发送和接收一个int而不是一个char缓冲区

> ID：12175887
> 
> 赞同：0
> 
> 时间：2012-08-29T10:28:21.827
> 
> 标签：c, sockets

1：服务器将文件大小复制到缓冲区并发送：

```
 snprintf(t_buf, 255, "%" PRIu32, fsize);
  if(send(f_sockd, t_buf, sizeof(t_buf), 0) < 0){
    perror("error on sending file size\n");
    onexit(f_sockd, m_sockd, 0, 2);
  } 
```

2：客户端收到文件大小，放入fsize：

```
 if(recv(f_sockd, t_buf, sizeof(t_buf), 0) < 0){
    perror("error on receiving file size");
    onexit(f_sockd, 0 ,0 ,1);
  }
  fsize = atoi(t_buf); 
```

----------------- 上面的代码让我的程序完美运行！

如果我编写此代码而不是以前的代码，则会出现问题：
1：服务器发送 fsize：

```
 if(send(f_sockd, &fsize, sizeof(fsize), 0) < 0){
    perror("error on sending file size\n");
    onexit(f_sockd, m_sockd, 0, 2);
  } 
```

2：客户端收到fsize：

```
 if(recv(f_sockd, &fsize, sizeof(fsize), 0) < 0){
    perror("error on receiving file size");
    onexit(f_sockd, 0, 0, 1);
  } 
```

哪里`uint32_t fsize;`和`char t_buf[256];`。
问题是第一种方法都可以工作，但第二种方法客户端不会收到所有文件，而只会收到其中的一部分。这段代码有什么问题？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:35:38.313

[recv(2)](http://linux.die.net/man/2/recv)不一定会填充完整的输出缓冲区 - 它可能会返回更少的字节，具体取决于可用的数据量：

> 接收调用通常会返回任何可用的数据，直到请求的数量，而不是等待接收请求的全部数量。

返回值（当 > 0 时）将是接收到的字节数，因此如果您想确保接收到所有内容，可以在循环中调用它。

或者，您可以传递`MSG_WAITALL`标志：

> 此标志请求操作阻塞，直到满足完整请求。但是，如果捕获到信号、发生错误或断开连接，或者要接收的下一个数据与返回的类型不同，则调用返回的数据仍可能少于请求的数据。

因此，在您的情况下，您可以执行以下操作：

```
ssize_t bytes = recv(f_sockd, &fsize, sizeof(fsize), MSG_WAITALL);

if(bytes == sizeof(fsize))
{
    /* received everything */
}
else
{
    /* something went wrong */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:34:09.370

没有更多数据很难说。

可能是[字节顺序](http://en.wikipedia.org/wiki/Endianness)。您应该打印出 的值`fsize`。

`recv()`正如评论中提到的，也可能是从 的部分返回。

# ruby-on-rails-3 - Feed 编码问题 Ruby 1.9

> ID：12175894
> 
> 赞同：0
> 
> 时间：2012-08-29T10:28:41.273
> 
> 标签：ruby-on-rails-3, encoding, diacritics, ruby-1.9, feedzirra

我正在尝试在我的 rails 应用程序中解析 rss/atom-feeds，但我遇到了一些非 ASCII 字符的严重问题，例如。德语变音符号 ÄÖÜ 或 ß。野外的一些提要使用正确的 UTF-8，但其他一些让我哭泣。一般问题是：

我必须能够解析任何提要，无论它们可能具有什么编码。字符的“丢失”不是一个选项（尽管它是我目前的状态），因为我对提要项目进行了一些文本和语言分析。

到目前为止我使用的是什么：

*   FeedZirra 用于获取和解析提要，目前运行良好。我还“清理”了从 FeedZirra 获得的值。
*   HTMLEntities (gem) 用于取消转义特殊字符，例如`"&Auml;"`表示“Ä”
*   rCharDet19 gem，以确定提要可能具有的编码，并：
*   字符串.编码！从任何内容转换为 utf-8
*   Ubuntu Linux 12.04 上的 Ruby 1.9.3（最新）和 Rails 3.2.8

问题是，我真的不知道我做错了什么。

```
 def self.sanitize_encoding_and_htmlentities str
    cd = CharDet.detect str
    s = str.encode(:invalid => :replace, :undef => :replace, :replace => '')
    coder = HTMLEntities.new
    coder.decode(s)
  end 
```

这是我目前的消毒方法。作为我使用的样本提要

```
http://www.N24.de/2/index.rss 
```

到目前为止，“特殊”字符已被完全替换。这是我发现的唯一变体，它可以正常工作而不会因无效字节内容而引发错误。我稍微改变了编码方法，因为我在 ruby​​ 文档中读到，在没有给出任何编码的情况下，编码方法应该“转换”为应用程序的给定 default_internal 编码，在我的例子中是 utf-8。CharDet 站在那里只是为了对任何相关内容进行可能的更改，可能会有用。

我使用了magic_encoding gem，所以我项目中的每个文件都应该在第一行有注释。我的数据库是带有 utf-8 的 sqlite3。

截至2012年，有什么我应该看的吗？我真的做错了什么吗？

感谢帮助！

**编辑：** 提要可能是任何类型的 RSS、原子和/或只是无效的 XML。编码可能是 UTF-8，不同的东西，或者只是说“utf-8”，而它的一些 windows-XXX 的东西，等等。我真的需要一个解决方案。

此外，获取/解析必须尽可能快，这就是我选择 feedzirra 的原因。

我目前的想法是获取提要内容，如果可能的话，用 htmlentities 替换“标题”和“描述”节点中的每个字符，使用编码！方法切换到 utf-8，然后对 htmlentities 进行转义。在此之后，我认为应该保留特殊字符，但目前我无法得到这样的东西。这可能是一个好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:45:14.007

最后我发现了主要问题：

Feedzirra 在访问条目及其属性时已经返回 UTF-8。但是我使用 sanitize 方法来访问属性，它返回 ASCII-8BIT 并且奇怪的字符转义为 html-entities。

然而，我从我的代码中剔除了所有的清理和编码的东西，现在它就可以工作了。如果需要，FeedZirra 似乎内置了一些东西来对提要进行转码。

# performance - Lucene 以及如何测量索引碎片

> ID：12175899
> 
> 赞同：3
> 
> 时间：2012-08-29T10:29:18.333
> 
> 标签：performance, lucene

我们使用的是**Lucene 2.9.2**（计划升级到 3.x），众所周知，搜索查询会随着时间的推移而变慢。通常我们会执行完整的重新索引。我已阅读问题[https://stackoverflow.com/a/668453/356815](https://stackoverflow.com/a/668453/356815)及其答案并立即回答：我们不使用 optimize() 因为运行时性能不再可接受。

**碎片化？**

我想知道以下几点：衡量现有索引**碎片的最佳实践是什么？**[卢克](http://code.google.com/p/luke/)能帮我吗？

听听您对这个分析主题的看法会很有趣。

关于我们的索引的更多信息：

*   我们已经索引了 400,000 个文档
*   我们大量使用每个文档的属性
*   对于每个请求，我们都会创建一个新的搜索器对象（因为我们希望更改立即出现在搜索结果中）
*   查询性能介于 30 毫秒（重复相同的搜索）和 10 秒（复杂）之间
*   该索引由 44 个文件（15 个 .del 文件，24 个 cfs 文件）组成，大小为 1GB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:41:49.543

旧版本的 Lucene 不能有效地处理大量的段。这就是为什么有些人建议优化（将所有段合并在一起）以提高搜索性能的原因。

对于最新版本的 Lucene，情况并非如此。实际上，优化已被重命名为听起来不那么神奇（您现在需要调用 forceMerge(1)）并且总是合并段甚至被认为是有害的（请看这篇来自 Lucene 开发人员 Simon Willnauer的[好文章）。](http://www.searchworkings.org/blog/-/blogs/simon-says%3a-optimize-is-bad-for-you)

> 对于每个请求，我们都会创建一个新的搜索器对象

打开阅读器的成本很高。您应该使用[SearcherManager](http://blog.mikemccandless.com/2011/09/lucenes-searchermanager-simplifies.html)，它只会在必要时帮助您重新打开（增量打开）您的索引。

# android - 如何在android中调整麦克风音量？

> ID：12175902
> 
> 赞同：6
> 
> 时间：2012-08-29T10:29:25.347
> 
> 标签：android, record, volume, microphone

我想录音，但是麦克风（麦克风）输入声音太大，我想调节麦克风音量，有人能帮我吗？以下是主要代码：

```
private int audioSource = MediaRecorder.AudioSource.MIC;

private static int sampleRateInHz = 8000;

private static int channelConfig = AudioFormat.CHANNEL_CONFIGURATION_MONO;

private static int audioFormat = AudioFormat.ENCODING_PCM_16BIT;

audioRecord = new AudioRecord(audioSource, sampleRateInHz,channelConfig, audioFormat, bufferSizeInBytes);
audioManager.setSpeakerphoneOn(false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:23:49.850

当麦克风打开时，它使用[AudioManager.STREAM_MUSIC](http://developer.android.com/reference/android/media/AudioManager.html#STREAM_MUSIC)的音量。

尝试增加此音量并检查麦克风音量是否也增加了。

和：

```
AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
am.setStreamVolume(AudioManager.STREAM_MUSIC, yourVolume, 0); 
```

# c# - Access数据库c#查询问题

> ID：12175903
> 
> 赞同：0
> 
> 时间：2012-08-29T10:29:26.873
> 
> 标签：c#, database, ms-access

这是我的问题的背景：我有一个组合框，当用户开始输入时，它应该从数据库表的列中检索建议的项目。用户开始输入姓名，程序应通过查看名字和姓氏来建议姓名（数据库对两者都有单独的表）

这是我的代码：

```
 try{
            String temp = nameCBox.Text;
            AutoCompleteStringCollection namesSuggestion = new AutoCompleteStringCollection();
            OleDbConnection conn = new OleDbConnection("Provider=Microsoft.ACE.Oledb.12.0;Data Source=C:\\LogEntry\\LogEntry.accdb; Persist Security Info = False;");
            OleDbDataReader reader;
            conn.Open();
            String text2send = "Select Name from [Teachers] where FName like '" + temp + "' OR LName like '" + temp + "' Group by [Name]";
            OleDbCommand cmd = new OleDbCommand(text2send, conn);
            reader = cmd.ExecuteReader();
            if (reader.HasRows == true)
            {
                while (reader.Read())
                    namesSuggestion.Add(reader["temp"].ToString());
            }
            reader.Close();
            nameCBox.AutoCompleteCustomSource = namesSuggestion;

            conn.Close();
            } 
```

错误：1）我在组合框中没有看到任何建议 2）当我在组合框中输入时，它会突出显示文本，当我再次输入其他内容时，它会写在之前输入的字符上。

请帮助桌面制造商

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:45:54.140

厄姆

这是在做什么

```
namesSuggestion.Add(reader["temp"].ToString()); 
```

reader 正在返回一个名为 Name..

除非用户键入它，否则我会期望搜索字符串包含通配符。

例如`Like 'John%'`，或者`Like '%Smith'`在标准 sql 中，访问使用 * 而不是 % 我似乎记得。

哦，大概你不担心 sql 注入攻击？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:33:30.957

由于您使用的是 Like 运算符，请尝试使之间的输入看起来像这样：`%input%` 要获得类似：

看看[这个](http://www.techonthenet.com/sql/like.php)，它可能会有所帮助

```
var sql = String.Format("Select Name from [Teachers] WHERE FName Like '%{0}%' OR LName Like '%{0}%'", temp); 
```

其他几点可能对您当前的代码有帮助：

*   在您的代码中使用该`using`语句，它会处理资源，对于连接，它会关闭它。

    ```
    using(var conn = new OleDbConnection("ConnectionStrong"))
    {
        //code
    } 
    ```

*   最好的，是使用参数化查询[链接](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter%28v=vs.100%29.aspx)

# android - 当我下载任何应用程序并安装时，我在哪里可以找到设备上的 .apk 文件？

> ID：12175904
> 
> 赞同：68
> 
> 时间：2012-08-29T10:29:30.180
> 
> 标签：android, adb, apk

我在哪里可以找到`.apk`我从 Google Play 商店下载并安装的设备上的应用程序文件。以防万一我想通过蓝牙等将它发送给我的一位朋友，？？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-30T13:24:48.160

google play 中有一个名为[MyAppSharer](https://play.google.com/store/apps/details?id=com.yschi.MyAppSharer&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS55c2NoaS5NeUFwcFNoYXJlciJd)的应用程序。打开app，搜索你已经安装的app，勾选apk，选择share。该应用程序需要一些时间来构建 apk。然后，您可以关闭该应用程序。该文件的apk位于`/sdcard/MyAppSharer`

这不需要root您的手机，仅适用于您手机上当前安装的应用程序

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-29T10:49:13.380

所有用户安装的apk都位于/data/app/，但是只有root才能访问（afaik，你可以尝试不root，如果它不起作用，root并不难。我建议你搜索xda - 用于生根指令的开发人员）

使用 Root explorer 或 ES File Explorer 访问 /data/app/ （你必须继续“向上”直到到达根目录 /，有点像 Windows 中的 C:，然后才能看到数据目录（文件夹）） . 在 ES 文件资源管理器中，您还必须勾选设置中的复选框以允许进入根目录。

当你在那里时，你会看到你所有的应用程序 apk，尽管它们的名字可能很奇怪。只需复制想要的 .apk 并粘贴到 sd 卡中，然后您可以将其复制到您的计算机上，当您想要安装它时，只需在文件管理器中打开 .apk （确保在 android 中启用了从未知来源安装设置）。即使您只想通过蓝牙发送，我也建议您先将其复制到 SD。

PS 请注意，付费应用程序可能无法以这种方式复制，因为它们通常会在线检查其许可证。PPS 以这种方式安装应用程序可能无法将其与 google play 链接（您不会在我的应用程序中看到它，也不会获得更新）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T10:33:12.310

您可以使用具有备份功能的文件浏览器，例如[ES File Explorer](https://play.google.com/store/apps/details?id=com.estrongs.android.pop&hl=en) 长按一个项目并选择创建备份

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T10:33:25.683

我相信你可以做到。它需要root权限。如果您想知道您的 apk 文件存储在哪里，请打开一个模拟器，然后转到

> DDMS>文件资源管理器->你可以看到一个名为“data”的目录->点击它，你会看到一个“app”文件夹。

您的 apk 存储在那里。实际上，只需将 apk 直接复制到该文件夹​​即可使用模拟器。

# .htaccess - 在 htaccess 中重定向非 IE 用户

> ID：12175905
> 
> 赞同：0
> 
> 时间：2012-08-29T10:29:33.540
> 
> 标签：.htaccess

我写

```
RewriteCond %{HTTP_USER_AGENT} .*MSIE.*
RewriteRule .* /IE [R=403,L] 
```

将所有 ie 用户重定向到文件夹 IE。

然后我尝试了

```
RewriteCond %{HTTP_USER_AGENT} !.*MSIE.*
RewriteCond %{HTTP_HOST} /IE
RewriteRule .* 404.html [R=404,L] 
```

但它没有用。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:33:10.000

R 标志只支持 300 到 400 之间的代码，如果要通过 403 Forbidden 错误，请使用 F 标志，如果要通过 404 Not found 错误，只需将用户重定向到不存在的页面。

**编辑 ：**

试试这个 ：

```
RewriteCond %{HTTP_USER_AGENT} !MSIE
RewriteRule ^IE unexistantpage.html [L] 
```

或者，如果您想禁止它：

```
RewriteCond %{HTTP_USER_AGENT} !MSIE
RewriteRule ^IE - [F,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:37:08.810

您使用了错误的 var。`%{HTTP_HOST}`匹配主机名，而不是文件夹。我想你想要这样的东西：

```
RewriteCond %{HTTP_USER_AGENT} !.*MSIE.*
RewriteRule ^/?IE /404.html [R=404,L] 
```

请注意，`R=404`强制 404 响应，它实际上并没有将您重定向到任何地方。

# java - 为什么 java applet/javafx 没有被广泛使用？（为什么我不应该将它们用于 RIA）

> ID：12175911
> 
> 赞同：12
> 
> 时间：2012-08-29T10:30:02.007
> 
> 标签：java, html, applet, javafx

Java 是我们拥有的最好的托管运行时技术之一。它具有非常高性能的VM，可以实现接近C的性能。高质量的开源库的数量是任何其他平台都无法比拟的。然而，尽管它是第一个出现在浏览器（Applet）中的动态客户端技术，但它现在并没有被广泛使用。Java 的哪些缺点使人们使用 JavaScript + HTML5 或 Flash/Flex 而不是 Java 进行 RIA？尽管它们对程序员来说不如 Java 愉快，但我为什么要使用它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T05:10:12.983

“它现在没有广泛使用”

我不同意这种看法......一些例子：

Mindterm 是一个基于 Java 的 ssh 免费软件客户端，支持 ssh2 可以作为 applet google 嵌入运行

Mizu 网络电话是一个基于 Java 和开放标准的 SIP VOIP 客户端，可以嵌入为 Applet -google for it-

OpenSignX 是一个基于开源 Java 的文档和表单签名 Java 小程序，用于 PKI X.509 证书。谷歌它

Coolsmile 是一个基于 Java 的 IRC 客户端，可以作为应用程序或嵌入式 Applet 运行-google for it-

JFTerm 是一个 Java 远程登录客户端。可以作为桌面应用程序或小程序运行。支持 telnet (23)、ssl 和 ssh -google for it-

J3Dworkbench 是一个 Java 3D 游戏设计创作工具。通过 Webstart 或作为 Applets -google for it- 交付

还有 thevirtualheart dot org 一个基于 Java 的心脏模拟器和一个小程序

或 canoo dot com 的 Geocaching 浏览器 (JavaFX)

你不能在 HTML5 中做所有事情......例如，看看复杂的应用程序，如 JITSI（视频通信、voip 应用程序）或 MuCommander -google it-或 Sweet Home 3D，或 Art of Illusion......所有基于 java 的。Java 是有目的的……微软和它的朋友们一直在试图诋毁它，用别的东西代替它，它仍然是相关的。问自己为什么。这是因为它是有目的的，而且它的公平竞争环境软件生态系统是巨大的。

为 Java 相关项目搜索代码点 google.com ......然后看看。

另外，对于上面说 JavaFX 吸引力有限的评论者，让我提醒您，Java 不仅是一种编程语言，而且实际上是三件事：一种编程语言、一个运行时环境和一个公平竞争的软件生态系统。您无需编写任何 Java 语言代码即可使用 Java 库……使用 Jython（Java 的 Python）、JRuby（Java 上的 Ruby）、NetRexx（Java 上的开源 Rexx，请参阅 www.netrexx.org）、xRuby（ruby到 Java 字节码编译器）或 Jabaco（Basic 到 Java 字节码编译器）......仅举几例 JVM 语言...... [http://en.wikipedia.org/wiki/List_of_JVM_languages](http://en.wikipedia.org/wiki/List_of_JVM_languages)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T12:27:08.127

与创建高质量 Flash 应用程序所需的时间相比，创建高质量的小程序可能需要大量工作。如果没有合适的工具，构建表示层可能会很乏味。

此外，Oracle/Sun 不久前就放弃了 applet。他们仍然支持他们，但没有积极尝试改进他们。Oracle 目前正在全力支持 JavaFX。JavaFX 是一种技术上可行的解决方案，并且具有允许您利用您的 Java 知识的优势。问题是大多数网页设计师没有太多的 Java 知识并且不想打扰它，所以 JavaFX 从来没有很流行。如果一种网络语言不流行，当他们必须下载插件才能使用它时，它可能会惹恼您的用户。

要记住的另一件事是，Flash 本身也即将淘汰。如果您打算自己开发和维护这个项目，那么请随意选择 JavaFX。

如果您打算聘请一名网页设计师，或者您想学习网页设计技能以便在某个地方获得聘用，那么这些天您最好的选择似乎是学习一个好的 javascript 框架（例如 JQuery）并掌握一些扎实的 HTML5 和 CSS3 技能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-17T21:50:10.497

谷歌手机地图是一个Java小程序**“ [http://en.wikipedia.org/wiki/Google_Maps#cite_note-20](http://en.wikipedia.org/wiki/Google_Maps#cite_note-20) ”** 我认为这说了很多，这个问题是不言而喻的，这阻止了建设性的回答我的问题d 尝试回答这是“java applet 和 javaFX 是否被广泛使用”，因为您的问题是基于一个我们无法确定您是如何得出的前提的。Java 小程序在 Web 上工作 另一方面，JavaFX 不仅仅是用于构建小程序，GUI 不仅仅是一个小程序

我希望能增加您的知识并帮助您重新评估您的意见，以下是来自：

***[http://www.ibm.com/developerworks/web/library/wa-appmozx/](http://www.ibm.com/developerworks/web/library/wa-appmozx/)***

> HTML 非常适合显示超文本文档，但不适合显示 GUI。传统的基于 Web 的应用程序使用无穷​​无尽的努力试图将 HTML 硬塞到传统表单和菜单应用程序的外观中。这从来都不是它的本意。向 HTML (FORM) 中添加表单元素只不过是创建了一种新的方式来以古老的 3270 终端的风格实现瘦客户端块模式应用程序。与 3270 一样，HTML 提供批量表单提交。基于字符的应用程序最终获得了高效的用户导航系统，但是当 GUI 应用程序出现时，这一切都消失了。随后，GUI 应用程序使用鼠标和小部件反馈添加回自己的导航结构。当 HTML 表单出现时，他们复制了块模式终端的设计，但没有严格的导航，也没有用适当的 GUI 等价物替换它。在 HTML 下，用户只能猜测给定页面上的哪些视觉元素可能是用户控件，哪些只是装饰。因此，对于 GUI 驱动的应用程序，HTML 并不是一个很好的起点。这就是为什么 Java 小程序在刚出现时就遭到如此积极的市场歇斯底里的原因——它们提供了一个提供真正 GUI 的机会。

# haskell - Haskell：如何使用单子上下文编写带有参数的单子可变参数函数

> ID：12175912
> 
> 赞同：8
> 
> 时间：2012-08-29T10:30:11.260
> 
> 标签：haskell, types, monads, typeclass, variadic-functions

我正在尝试使用一元返回类型制作一个可变参数函数，其参数也需要一元上下文。（我不确定如何描述第二点：例如`printf`可以返回`IO ()`，但不同之处在于它的参数被视为相同，无论它最终是`IO ()`还是`String`。）

基本上，我有一个数据构造函数，它接受两个`Char`参数。我想提供两个指针样式`ID Char`参数，它们可以`State`通过类型类实例从封闭的 monad 自动解码。所以，`get >>= \s -> foo1adic (Constructor (idGet s id1) (idGet s id2))`我不想做，而是想做`fooVariadic Constructor id1 id2`。

以下是我到目前为止所得到的，Literate Haskell 风格，以防有人想要复制它并弄乱它。

一、基本环境：

```
> {-# LANGUAGE FlexibleContexts #-}
> {-# LANGUAGE FlexibleInstances #-}
> {-# LANGUAGE MultiParamTypeClasses #-}

> import Control.Monad.Trans.State

> data Foo = Foo0
>          | Foo1 Char
>          | Foo2 Bool Char
>          | Foo3 Char Bool Char
>    deriving Show

> type Env = (String,[Bool])
> newtype ID a = ID {unID :: Int}
>    deriving Show

> class InEnv a where envGet :: Env -> ID a -> a
> instance InEnv Char where envGet (s,_) i = s !! unID i
> instance InEnv Bool where envGet (_,b) i = b !! unID i 
```

为方便起见，一些测试数据：

```
> cid :: ID Char
> cid = ID 1
> bid :: ID Bool
> bid = ID 2
> env :: Env
> env = ("xy", map (==1) [0,0,1]) 
```

我有这个非单子版本，它只是将环境作为第一个参数。这很好用，但这不是我所追求的。例子：

```
$ mkFoo env Foo0 :: Foo
Foo0
$ mkFoo env Foo3 cid bid cid :: Foo
Foo3 'y' True 'y' 
```

（我可以使用函数依赖或类型族来摆脱对`:: Foo`类型注解的需要。现在我对此并不在意，因为无论如何这不是我感兴趣的。）

```
> mkFoo :: VarC a b => Env -> a -> b
> mkFoo = variadic
>
> class VarC r1 r2 where
>    variadic :: Env -> r1 -> r2
>
> -- Take the partially applied constructor, turn it into one that takes an ID
> -- by using the given state.
> instance (InEnv a, VarC r1 r2) => VarC (a -> r1) (ID a -> r2) where
>    variadic e f = \aid -> variadic e (f (envGet e aid))
>
> instance VarC Foo Foo where
>    variadic _ = id 
```

现在，我想要一个在以下 monad 中运行的可变参数函数。

```
> type MyState = State Env 
```

基本上，我不知道我应该如何进行。我尝试以不同的方式（`variadicM :: r1 -> r2`和`variadicM :: r1 -> MyState r2`）表达类型类，但我没有成功编写实例。我也尝试过调整上面的非单子解决方案，以便我以某种方式“结束”，`Env -> Foo`然后我可以轻松地变成 a `MyState Foo`，但也没有运气。

以下是我迄今为止最好的尝试。

```
> mkFooM :: VarMC r1 r2 => r1 -> r2
> mkFooM = variadicM
>
> class VarMC r1 r2 where
>    variadicM :: r1 -> r2
>
> -- I don't like this instance because it requires doing a "get" at each
> -- stage. I'd like to do it only once, at the start of the whole computation
> -- chain (ideally in mkFooM), but I don't know how to tie it all together.
> instance (InEnv a, VarMC r1 r2) => VarMC (a -> r1) (ID a -> MyState r2) where
>    variadicM f = \aid -> get >>= \e -> return$ variadicM (f (envGet e aid))
>
> instance VarMC Foo Foo where
>    variadicM = id
>
> instance VarMC Foo (MyState Foo) where
>    variadicM = return 
```

它适用于 Foo0 和 Foo1，但不限于此：

```
$ flip evalState env (variadicM Foo1 cid :: MyState Foo)
Foo1 'y'
$ flip evalState env (variadicM Foo2 cid bid :: MyState Foo)

No instance for (VarMC (Bool -> Char -> Foo)
                       (ID Bool -> ID Char -> MyState Foo)) 
```

（在这里我想摆脱对注释的需要，但是这个公式需要两个实例的事实`Foo`使得这有问题。）

我理解投诉：我只有一个从`Bool -> Char -> Foo`到的实例`ID Bool -> MyState (ID Char -> Foo)`。但我无法制作它想要的实例，因为我需要`MyState`在某个地方，以便我可以`ID Bool`将`Bool`.

我不知道我是完全偏离轨道还是什么。我知道我可以用不同的方式解决我的基本问题（我不想`idGet s`到处都用等价物污染我的代码），例如为不同数量的 ID 参数 创建`liftA`/ -style 函数，类型如, 但是我花了太多时间思考这个问题。:-) 我想知道这个可变参数解决方案应该是什么样子。`liftM``(a -> b -> ... -> z -> ret) -> ID a -> ID b -> ... -> ID z -> MyState ret`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:44:25.457

警告

最好不要将可变参数函数用于此类工作。您只有有限数量的构造函数，因此智能构造函数似乎没什么大不了的。您需要的 ~10-20 行比可变参数解决方案更简单且更易于维护。此外，应用解决方案的工作量要少得多。

警告

monad/applicative 与可变参数函数相结合是问题所在。“问题”是用于可变参数类的参数添加步骤。基本类看起来像

```
class Variadic f where 
    func :: f 
    -- possibly with extra stuff 
```

您可以通过具有表单的实例使其可变

```
instance Variadic BaseType where ...
instance Variadic f =>  Variadic (arg -> f) where ... 
```

当您开始使用单子时，这会中断。在类定义中添加 monad 将防止参数扩展（对于某些 monad M，您将获得 :: M (arg -> f)）。将它添加到基本情况将阻止在扩展中使用单子，因为（据我所知）不可能将单子约束添加到扩展实例中。有关复杂解决方案的提示，请参阅 PS。

使用导致的函数的解决方向`(Env -> Foo)`更有希望。下面的代码仍然需要`:: Foo`类型约束，并且为了简洁起见，使用了 Env/ID 的简化版本。

```
{-# LANGUAGE FlexibleContexts #-}
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE MultiParamTypeClasses, TypeFamilies #-}

module Test where

data Env = Env
data ID a = ID
data Foo
    = Foo0
    | Foo1 Char
    | Foo2 Char Bool
    | Foo3 Char Bool Char
    deriving (Eq, Ord, Show)

class InEnv a where
    resolve :: Env -> ID a -> a
instance InEnv Char where
    resolve _ _ = 'a'
instance InEnv Bool where
    resolve _ _ = True 
```

类型族扩展用于使匹配更严格/更好。现在是可变参数函数类。

```
class MApp f r where
    app :: Env -> f -> r

instance MApp Foo Foo where
    app _ = id
instance (MApp r' r, InEnv a, a ~ b) => MApp (a -> r') (ID b -> r) where
    app env f i = app env . f $ resolve env i
    -- using a ~ b makes this instance to match more easily and
    -- then forces a and b to be the same. This prevents ambiguous
    -- ID instances when not specifying there type. When using type
    -- signatures on all the ID's you can use
    -- (MApp r' r, InEnv a) => MApp (a -> r') (ID a -> r)
    -- as constraint. 
```

环境`Env`是显式传递的，本质上`Reader`monad 是解包的，防止了 monad 和可变参数函数之间的问题（对于`State`monad，resolve 函数应该返回一个新环境）。测试`app Env Foo1 ID :: Foo`结果符合预期`Foo1 'a'`。

PS你可以让一元可变函数工作（在某种程度上），但它需要以一些非常奇怪的方式弯曲你的函数（和头脑）。我让这些事情起作用的方法是将所有可变参数“折叠”到一个异构列表中。然后可以一元地完成展开。尽管我已经做过一些类似的事情，但我强烈建议您不要在实际（使用过的）代码中使用这些东西，因为它很快就会变得难以理解和无法维护（更不用说您会得到的类型错误）。

# ios - iOS 图形引擎

> ID：12175914
> 
> 赞同：2
> 
> 时间：2012-08-29T10:30:15.353
> 
> 标签：ios, graphics, opengl-es

我是 iOS 编程新手，对处理图像很感兴趣。基本上，我希望能够获得给定图像中每个像素的 (0,255) 和 RGB 元组。这样做的最佳方法是什么？我需要使用 Open GL 还是类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:44:07.363

如果您想处理图像，请获取一份 Apple 的“Quartz 2D 编程指南”。如果您想要更详细的操作方法，请在 Amazon 上获取“使用 Quartz 编程”一书的副本（标题中写着 Mac，因为它早于 iOS）。

本质上，您将拍摄图像，将它们绘制到位图上下文中，然后通过查询图像来确定 rgba 布局。

如果您想使用系统资源来帮助您对图像进行某些类型的更改，有一个 OSX 框架最近移至 iOS，称为 Accelerate 框架。它有很多用于图像处理（vImage）的功能。

要在文件系统中读取和写入图像，请查看 Apple 的“图像 I/O 指南”。对于高级过滤，有 Core Image，它允许您将过滤器应用于图像。

编辑：如果您对使用 GPU 执行一些复杂过滤的真正快速加速代码感兴趣，您可以在 github 上查看 Brad Larson 的[GPU Image项目。](https://github.com/BradLarson/GPUImage)

# ios - keyWindow = nil 仅在 iPad 上

> ID：12175922
> 
> 赞同：2
> 
> 时间：2012-08-29T10:30:48.233
> 
> 标签：ios, ipad, uiwindow, uiapplication, keywindow

我在 iPad 上的应用程序 keyWindow 出现问题。

我为 iPhone 设计了我的应用程序，后来通过设置设备系列和为 iPad 添加新的故事板来添加对 iPad 的支持。到目前为止一切都很好，我可以在 ipad 上打开应用程序，甚至当我为 iPad 定制它时，界面也会显示出来。

现在问题来了：我不知道为什么，但我的应用程序的 iPad 版本没有 keyWindow。我需要它，因为我在开始时会显示一个加载对话框，应该锁定屏幕以进行用户交互，所以我将它添加到主窗口。在 iPhone 上，这工作正常。

我发现“[UIApplication sharedApplication].keyWindow”给了我null，但只在iPad上，而“[[UIApplication sharedApplication].windows objectForKey:0]”给了我窗口对象，它当然必须存在，因为应用程序显示完整的用户界面。

ipad 和 iphone 的源文件当然是完全一样的，但是我想我后来添加 iPad 支持时漏掉了一些东西……

我已经尝试将应用程序委托中的窗口对象手动设置为 makeKeyAndVisible 但没有运气。([self.window makeKeyAndVisible];)

有谁知道我必须做什么才能使其正常工作？

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:26:33.953

好的，我自己解决了。我必须将 makeKeyAndVisible 方法应用于我想作为 keyWindow 访问它的主窗口。我不知道为什么它在 Application Delegate 中不起作用，或者为什么我必须为 iPad 而不是为 iPhone 手动设置它，但它现在可以工作了。

如果有人知道为什么随时启发我。

# c++ - 根据字符串中的索引对c ++中的字符串向量进行排序

> ID：12175925
> 
> 赞同：1
> 
> 时间：2012-08-29T10:31:08.370
> 
> 标签：c++

嗨，我有字符串向量，即向量的结构：向量的名称是向量

```
"key:  abc 165.123.34.12", 
"key:  bca 1.1.1.1", 
"key1: bac 3.3.3.3" 
```

我想根据第二个字段（abc，bac，bac）对向量进行排序

我的代码是；

```
 bool sort_function(string& str1,string& str2) {

     string nick1,nick2,nick1_ignore,nick2_ignore;

     stringstream ss1(str1) 

     ss1>> nick1_ignore >> nick1;

     stringstream ss2(str2) 

     ss2>> nick2_ignore >> nick2;

     return (nick1<nick2);

 }

     sort(vector.begin(), vector.end(),sort_function); 
```

但它给出了一个从错误开始的长错误，

```
 error: no match for ‘operator>>’ in ‘std::basic_stringstream<char> 
```

更新：错误是 tl_algo.h：在函数 '_RandomAccessIterator std:..

更新：它是固定的。错误在函数声明中我必须使用 const string

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T10:35:10.057

函数模板重载`operator>>(std::basic_istream &, std::string &)`不在`const`其`istream`参数上，因此您不能临时调用它。

这很令人困惑，因为您*可以*`operator>>`在读取原语时调用该成员，例如`int`.

相反，你必须写

```
stringstream ss1(str1); ss1 >> nick1_ignore >> nick1; 
```

您也可以通过首先读取无操作操纵器或调用无操作方法来获取左值引用来解决此问题：

```
stringstream(str1).ignore(0) >> nick1_ignore >> nick1; 
```

C++11 通过提供`operator>>`带有`istream`参数右值引用的 free 重载来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:46:36.900

我不会用`std::istringstream`这种东西。如果这些行确实具有您描述的格式，则类似于：

```
class CompareFields
{
    int myStart;
    int myEnd;
public:
    CompareFields( int start, int end )
        : myStart( start )
        , myEnd( end )
    {
    }
    bool operator()( std::string const& lhs, std::string const& rhs ) const
    {
        assert( lhs.size() >= myEnd && rhs.size() >= myEnd );
        return std::lexicographical_compare( lhs.begin() + myStart,
                                             lhs.begin() + myEnd,
                                             rhs.begin() + myStart,
                                             rhs.begin() + myEnd );
    }
}; 
```

应该是所有需要的：

```
std::sort( v.begin(), v.end(), CompareFields( 6, 9 ) ); 
```

如果您想以不同的方式定义字段；例如，作为空白，您需要重新定义`CompareFields`，以便它做正确的事情。

# css - 边框不围绕 div 中的图像

> ID：12175926
> 
> 赞同：-2
> 
> 时间：2012-08-29T10:31:19.587
> 
> 标签：css

```
http://74.52.155.226/~projtest/team/harmeet/smoke51/products.html 
```

这就是我目前正在做的设计。如果您检查导航下方横幅上的元素，您会看到 10px 纯白色边框在图像下方留有一些空隙。我很困惑，无论图像的高度是多少，从逻辑上讲，边框应该只围绕图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:41:46.410

你可以穿上`display: block;`你的`<img>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:18:19.730

那是因为您的图像`div.innerbanner`是内联的（默认情况下图像是内联的）。您看到的空间是[下降高度](http://en.wikipedia.org/wiki/Baseline_%28typography%29)。

您需要创建图像的块元素以防止显示任何下降高度。尝试将此添加到您的 CSS 中：

```
div.innerbanner img { display: block; } 
```

# javascript - 如何关闭 LogOut 上的所有子页面

> ID：12175930
> 
> 赞同：0
> 
> 时间：2012-08-29T10:31:30.890
> 
> 标签：javascript, asp.net

我们有一个主页面和一些子页面。其中一个是由 window.open 函数弹出的。当在 Master Page 上单击注销时会出现问题。整个系统重定向到登录页面，但弹出窗口除外。当我点击那个孩子时-page 然后它会重定向到登录页面。我们需要在按下注销后直接关闭它。

如果窗口的位置已知，是否有任何脚本可以关闭窗口。我想在注销单击中关闭该子页面。像 window.close('Authentication.aspx'); 请告诉我是否可能

谢谢，拉克什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:36:35.427

如果您使用以下代码打开了一个弹出窗口，假定名称为“popupwindow”...

```
window.open("myurl.html", "popupwindow", "height, etc"); 
```

然后在您的登录页面中尝试以下javascript

```
if(window.name=="popupwindow"){
  window.close();
} 
```

**更新**基于 OP 的评论...

如果您不再有对该窗口的引用（例如因为父窗口已刷新），那么我相信几乎不可能检测到是否存在具有特定名称的弹出窗口。

我说“几乎不可能”，因为在这种情况下，一种选择是尝试再次打开窗口并给出一个空白 URL。如果该窗口已经存在，则该窗口将与以前一样保留在同一页面上，但现在您有了对它的引用，并且可以根据需要关闭。

```
var myWin = window.open("","popupwindow");
myWin.close(); 
```

但是，这样做的**缺点**是，如果窗口不**存在**，用户将在关闭之前看到一个空白窗口打开 - 所以不是一个很好的用户体验。

# javascript - 如何在谷歌地图中突出显示用户的当前位置？

> ID：12175931
> 
> 赞同：10
> 
> 时间：2012-08-29T10:31:32.213
> 
> 标签：javascript, google-maps, google-maps-api-3, geolocation

我正在使用以下代码来获取用户在 phonegap 中的位置（它工作正常）

```
function getLocation() {
    var win = function(position) {
        var lat = position.coords.latitude;
        var long = position.coords.longitude;
        var myLatlng = new google.maps.LatLng(lat, long);

        var myOptions = {
           center: myLatlng,
           zoom: 7,
           mapTypeId : google.maps.MapTypeId.ROADMAP
        };
        var  map_element = document.getElementById("displayMap");
        var map = new google.maps.Map(map_element, myOptions);
    };

    var fail = function(e) {
        alert('Error: ' + e);
    };

    var watchID = navigator.geolocation.getCurrentPosition(win, fail);
} 
```

通过将用户的当前位置集中在地图上，这可以正常工作。但我想在用户的位置上显示一个指示器（一个红点）。但我可以看到 google API 只提供了 3 个选项 center、zoom 和 mapTypeId。

是否有任何可用选项可用于突出显示该位置或是否有解决方法？

**编辑**

能够发现 google maps API 有一个标记 ho 突出显示任何位置。这看起来很有帮助，但它显示了一个默认的红色气球，可以通过自定义图像修改吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T15:02:37.993

您可以使用新发布的[GeolocationMarker](https://chadkillingsworth.github.io/geolocation-marker/)，它是[Google Maps API Utility Library](http://googlemaps.github.io/libraries)的一部分。

它将在用户当前位置添加一个标记和精度圈。它还允许开发人员使用该`setMarkerOptions`方法自定义标记并指定一个`icon`属性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-04-12T19:08:45.277

在标记内使用图标，例如

```
 var Marker = new google.maps.Marker({
        map: map,
        animation: google.maps.Animation.DROP,
        position: "",
        icon: /bluedot.png
}); 
```

你可以使用这个谷歌地图位置指示圆形蓝点图标类似于谷歌地图

[![在此处输入图像描述](../Images/895f4a13eca50612b827bfe71ad5e247.png)](https://i.stack.imgur.com/VpVF8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T16:38:40.550

您可以使用[MarkerOptions](https://developers.google.com/maps/documentation/javascript/reference?hl=pt-BR#MarkerOptions)设置自定义图像。查看[Google Maps Javascript API V3 Reference](https://developers.google.com/maps/documentation/javascript/reference?hl=pt-BR)以了解有关 Google Maps 的更多详细信息。

# c# - 初始化存储过程输出参数

> ID：12175932
> 
> 赞同：3
> 
> 时间：2012-08-29T10:31:33.693
> 
> 标签：c#, sql-server, tsql, stored-procedures

我有一个简单的 SQL Server 存储过程：

```
ALTER PROCEDURE GetRowCount

(
@count int=0 OUTPUT
)

AS
Select * from Emp where age>30;
SET @count=@count+@@ROWCOUNT;

RETURN 
```

我正在尝试在以下 C# 代码中初始化和访问输出参数：

```
SqlConnection con = new SqlConnection();
con.ConnectionString = "Data Source=localhost\\SQLEXPRESS;Initial Catalog=answers;Integrated Security=True";

SqlCommand cmd = new SqlCommand();
cmd.Connection = con;

cmd.CommandText = "GetRowCount";
cmd.Parameters.Add(new SqlParameter("@count", SqlDbType.Int));
cmd.Parameters["@count"].Direction = ParameterDirection.Output;
con.Open();
cmd.Parameters["@count"].Value=5;
cmd.ExecuteNonQuery();

int ans = (int)(cmd.Parameters["@count"].Value);
Console.WriteLine(ans); 
```

但是在运行代码时，在代码`InvalidCastException`的倒数第二行抛出了 an （我调试并检查了 Value 属性中没有返回任何内容）。

如何正确初始化代码中的输出参数？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T10:34:16.433

您需要将 ParameterDirection 更改为`ParameterDirection.InputOutput`

看看这里的例子：[如何从过程 sql server 2005 到 c# 获取返回值](https://stackoverflow.com/questions/5298822/how-to-get-return-value-from-procedure-sql-server-2005-to-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:38:09.590

您不必初始化`output`参数。用于`ParameterDirection.InputOutput`将值传递给存储过程。

类型异常最可能的原因是过程返回`DBNull.Value`。你可以像这样测试：

```
var ans = cmd.Parameters["@count"].Value as int?; 
```

# java - Java 对象差异实用程序

> ID：12175933
> 
> 赞同：4
> 
> 时间：2012-08-29T10:31:34.053
> 
> 标签：java, diff

我正在寻找 Java 中的通用实用程序，它可以帮助我为两个对象（相同类型）创建差异报告。

例如，如果我的类结构是：

```
class A {
  int p1;
  string p2;
  B b1;
}

class B {
 float p3;
} 
```

我想要一个 b/w 两个 A 类型对象（例如 a1 和 a2）的报告，如下所示：a1 与 a2

```
p1 : 'remove'
p2 : 'change'
b1.p3: 'add' 
```

其中，如果属性在第二个对象中为 null，则设置“remove”，如果属性存在但具有不同的值，则设置“change”，如果属性在第一个对象中为 null，则设置“add”。

收集对象可能会变得更难/更棘手......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T11:42:18.107

我为此创建了一个库：[https ://github.com/SQiShER/java-object-diff](https://github.com/SQiShER/java-object-diff)

它构建了比较对象的树结构，并允许您通过访问者模式遍历节点。查看[入门](http://java-object-diff.readthedocs.org/en/latest/getting-started/)页面，查看一些示例。它适用于几乎任何类型的对象，并且可以处理任意数量的嵌套级别。我什至设法基于它构建了一个自动对象合并。

这种对象图的打印版本如下所示：

```
Property at path '/contacts/item[Walter White]/middleName' has been added => [ Hartwell ]
Property at path '/contacts/item[Jesse Pinkman]/middleName' has been added => [ Bruce ] 
```

我自己使用它，它就像一个魅力。希望能帮助到你！

我不知道您的对象有多复杂，但是通过反射手动进行操作很快就会失控。尤其是当涉及地图和收藏时。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-31T19:32:30.253

[Javers](http://javers.org/)是完全满足您需要的库：

```
given:
DummyUser user =  dummyUser("id").withSex(FEMALE).build();
DummyUser user2 = dummyUser("id").withSex(MALE).build();
Javers javers = JaversBuilder.javers().build()

when:
Diff diff = javers.compare(user, user2)

then:
diff.changes.size() == 1
ValueChange change = diff.changes[0]
change.leftValue == FEMALE
change.rightValue == MALE 
```

它可以处理图中的循环。

此外，您可以获得任何图形对象的快照。Javers 具有用于快照和更改的 JSON 序列化器和反序列化器，还在 mongoDB 中实现了存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-28T22:38:20.693

看看我制作的这个库。也许它对某人有用（支持差异/补丁/与任意深度对象图和集合/映射/数组比较）......

使用起来应该很简单：

```
GrandChildEntity gce1 = new GrandChildEntity(1);
GrandChildEntity gce2 = new GrandChildEntity(2);

Diff diff = new Diff.Builder().build();
Patch patch = new Patch.Builder().build();
Compare compare = new   Compare.Builder().build();

Element<Name, GrandChildEntity> diffElement = diff.diff(gce1, gce2);
GrandChildEntity patchedEntity = patch.patch(new GrandChildEntity(1), diffElement);
boolean areEqual = compare.compare(patchedEntity, new GrandChildEntity(2)); 
```

[这是 github 存储库的链接。（https://github.com/bojanv55/entity-sync-utils）](https://github.com/bojanv55/entity-sync-utils)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:16:09.953

使用 apache 创建 2 个对象的 sting 表示`ToStringBuilder`。然后比较字符串。

看看这个讨论：[How to perform string Diffs in Java?](https://stackoverflow.com/questions/132478/how-to-perform-string-diffs-in-java)

它包含对在 java 中执行文本差异的库的引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T10:34:21.740

我怀疑是否有通用实用程序可以做到这一点。

但这似乎并不难使用 java 反射 API 编写。

您可以使用枚举类的字段

```
myClass.getFields(); 
```

所以你只需要进行深入的比较。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T11:34:51.557

您可以使用反射 API 来实现它。

我没有给出完整的代码。但这是您可以开始的一种方式。

```
class Testapp {
    public static void main(String[] args) {
        A a1 = new A();
        A a2 = new A();
        a1.b1.p3 = 1;
        a1.p1 = 2;
        a1.p2 = "Hi";

        a2.b1.p3 = 1;
        a2.p1 = 3;
        a2.p2 = "Hi";

        Compare c = new Compare<A>(a1, a2);
        c.compare();
    }
}

class A
{
    int p1;
    String p2;
    B b1;
    A() {
        b1 = new B();
    }
}

class B {
    float p3;
}

class Compare<T extends Object> {
    T a;
    T b;
    public Compare(T a, T b)
    {
        this.a = a;
        this.b = b;
    }
    public void compare()
    {
        try
        {
            Field[] fields = a.getClass().getDeclaredFields();

            for (Field field : fields) {
                if(field.get(a)==field.get(b)){
                    //do something
                }
            }
        }catch(Exception e){}
    }
} 
```

# php - 更改 Yii Framework 的结构 url

> ID：12175940
> 
> 赞同：1
> 
> 时间：2012-08-29T10:32:09.837
> 
> 标签：php, url, yii, yii-routing

Yii 的 URL 标准是：`http://www.example.com/index.php?r=watch`我可以将此 URL 更改为``http://www.example.com/watch?v=6Pddo6kCxvM`（与 youtube url 相同）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:50:39.887

是的。除了使用 .htaccess/mod_rewrite 让网络服务器调用正确的脚本之外，您还应该考虑配置 URL 管理器。它包含在专题中：[URL 管理](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:34:09.113

你需要考虑`mod_rewrite`在你的`.htaccess`文件中使用。

[干得好](http://www.sitepoint.com/guide-url-rewriting/)

# animation - CSS动画循环

> ID：12175942
> 
> 赞同：-1
> 
> 时间：2012-08-29T10:32:16.313
> 
> 标签：animation, css

我想循环[动画](http://dabblet.com/gist/3509071)，但我有[时间问题](http://dabblet.com/gist/3510099)。是否可以正确循环动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:44:01.557

试试这个：

```
.red{animation:red 2s 0s infinite alternate}
.orange{animation:orange 2s 1s infinite alternate}
.green{animation:green 2s 2s infinite alternate} 
```

# actionscript-3 - 如何在 Flash Web 应用程序中检查网络连接？

> ID：12175944
> 
> 赞同：0
> 
> 时间：2012-08-29T10:32:23.973
> 
> 标签：actionscript-3, flash, networking, disconnect

我想检测我的网络应用程序的网络断开连接。

对于 AIR 应用程序，可以使用 AIR URLMonitor。在 Flash AS3 中，我使用的是 javascript

> 'navigator.onLine' 使用外部接口。

但是上面的代码并不总是有效。

我是否必须编写自己的代码来不断检查我的网络连接是否持久？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:47:58.140

您需要创建一个 URLLoader 并在计时器滴答时从您的网站查找响应。

```
var checkTimer:Timer = new Timer(1000);
var checkLoader:URLLoader = new URLLoader();
var checkURL:URLRequest = new URLRequest("mysite");
checkLoader.addEventListener(IOErrorEvent.IO_ERROR, onIOError);

checkTimer.addEventListener(TimerEvent.TIMER, checkURL);
checkTimer.start();

function checkURL(e:TimerEvent):void
{
  checkLoader.load(checkURL);
}

function onIOError(e:IOErrorEvent):void
{
  //down
} 
```

这与 URLMonitor 的行为基本相同。

# jquery - 什么是在请求未完成时处理请求的 AJAX 选项？

> ID：12175947
> 
> 赞同：-1
> 
> 时间：2012-08-29T10:32:29.690
> 
> 标签：jquery, ajax

我想在 AJAX 请求未完成处理且尚未从服务器返回时显示加载图像，是否有任何选项可以在状态未完成时处理 ajax

```
 jQuery.ajax({
            url: "/privileges/users/get-group-users",
            type: "POST",
            dataType: 'JSON',
            data: {
                "group_id":groupId
            },
            success: function(users){

            },
            error: function(e){

            }
        }); 
```

有没有像成功或错误这样的选项？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:35:12.547

使用`ajaxStart - ajaxStop`：

```
<img src="img/loading.gif" style="display:none;" id="loading"/> 
```

JS：

```
// if there is any ajax call the loading image will be visible
$("#loading").ajaxStart(function(){
   $(this).show();
 });

//if the ajax call stoped hide the loading image
$("#loading").ajaxStop(function(){
   $(this).hide();
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:35:01.697

只要您使用*异步*AJAX 请求，它就会在您调用 时隐式进行，并在调用or函数`$.ajax()`时完成。`success``error`

使用现代 jQuery（即 1.5+）时更好的模型是这样的：

```
var jqXHR = $.ajax({ ... });    // don't put success and error in yet

var $splash = $(...).show();

jqXHR.always(function() {
    $splash.hide();
}).done(function(users) {
    ...
}).fail(function(e) {
    ...;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:38:21.907

你可以使用：

```
$('#loading').ajaxStart(function() {
  $(this).show();
}).ajaxComplete(function() {
  $(this).hide();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T10:38:25.667

以下是由 提供的回调挂钩`$.ajax()`：

**`beforeSend`**回调被调用；它接收 jqXHR 对象和设置映射作为参数。

**`error`**如果请求失败，将按照注册顺序调用回调。他们接收 jqXHR、一个指示错误类型的字符串和一个异常对象（如果适用）。一些内置错误会提供一个字符串作为异常对象：“abort”、“timeout”、“No Transport”。

**`dataFilter`**成功接收到响应数据后立即调用回调。它接收返回的数据和 dataType 的值，并且必须返回（可能已更改的）数据以传递成功。

**`success`**如果请求成功，则按照注册顺序调用回调。他们接收返回的数据、包含成功代码的字符串和 jqXHR 对象。

**`complete`**当请求完成时，无论是失败还是成功，回调都会按照注册的顺序触发。他们接收 jqXHR 对象，以及包含成功或错误代码的字符串。

来源：[jQuery API](http://api.jquery.com/jQuery.ajax/)

$.ajax() 的所有细节都非常详细地给出

# r - 如何将 reqOpenorder（来自 IBrokers 包）结果分配给矩阵？

> ID：12175950
> 
> 赞同：1
> 
> 时间：2012-08-29T10:32:31.920
> 
> 标签：r, ibrokers

结果`reqOpenOrders`如下

```
**reqOpenOrders(tws)**                           
TWS Message: 2 3 399 Order Message:                     
Warning: Your order size is below the EUR 20000 IdealPro minimum and will be routed as an odd lot order.  
TWS OrderStatus: orderId=3 status=PreSubmitted filled=0 remaining=1 averageFillPrice=0  
TWS OrderStatus: orderId=3 status=Submitted filled=0 remaining=1 averageFillPrice=0  
TWS OrderStatus: orderId=3 status=Submitted filled=0 remaining=1 averageFillPrice=0  
TWS OrderStatus: orderId=3 status=Submitted filled=0 remaining=1 averageFillPrice=0  
TWS OrderStatus: orderId=3 status=Submitted filled=0 remaining=1 averageFillPrice=0  
TWS Execution: orderId=3 time=2012-08-29 15:38:48 side=BOT shares=1 symbol=EUR conId=12087792 price=1.25580 
```

但是如何在向量/矩阵中获得上述结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-12T15:20:00.447

我有一个类似的问题已解决。您可能想看一下，该解决方案会创建一个包含未结订单数据的列表，您可以按照自己的方式组织该列表：[R IBrokers reqOpenOrders hangs](https://stackoverflow.com/questions/34703679/r-ibrokers-reqopenorders-hangs)

# php - Delphi TIdhttp Post JSON？

> ID：12175952
> 
> 赞同：7
> 
> 时间：2012-08-29T10:32:36.600
> 
> 标签：php, json, delphi, indy

有人让 JSON 与 TIdHttp 一起工作吗？

PHP总是返回NULL `$_POST`，我做错了什么吗？

德尔福源码：

```
http := TIdHttp.Create(nil);
http.HandleRedirects := True;
http.ReadTimeout := 5000;
http.Request.ContentType := 'application/json';
jsonToSend := TStringStream.Create('{"name":"Peter Pan"}');
jsonToSend.Position := 0;
Memo1.Lines.Text := http.Post('http://www.website.com/test.php', jsonToSend);
jsonToSend.free;
http.free; 
```

PHP源码：

```
<?php
$value = json_decode($_POST);
var_dump($value);
?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T15:20:02.627

您不能使用 a`TStringList`来发布 JSON 数据。 将以破坏 JSON 数据的方式`TIdHTTP.Post()`对内容进行编码。`TStringList`您需要将 JSON 数据放入 a`TStream`中。`TIdHTTP.Post()`将按原样传输其内容。另外，不要忘记设置`TIdHTTP.Request.ContentType`属性，以便服务器知道您正在发布 JSON 数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T11:51:22.633

你需要定义一个 post 变量，试试这个代码（我在你的代码中添加了“json”var）：

德尔福代码：

```
http := TIdHttp.Create(nil);
http.HandleRedirects := true;
http.ReadTimeout := 5000;
jsonToSend := TStringList.create;
jsonToSend.Text := 'json={"name":"Peter Pan"}';
Memo1.Lines.Text := http.Post('http://www.website.com/test.php', jsonToSend);
jsonToSend.free;
http.free; 
```

PHP源码：

```
<?php
$value = json_decode($_POST['json']);
var_dump($value);
?> 
```

# comments - 注释 phpdocumentor2 的 if 语句

> ID：12175953
> 
> 赞同：0
> 
> 时间：2012-08-29T10:32:37.310
> 
> 标签：comments, phpdoc, docblox

我正在使用 PHPDocumentor2 记录一个 PHP 项目。具有讽刺意味的是，PHPDoc 的文档并没有过于详细。我完全理解如何评论文件、类、函数和变量，但是如果在 if 语句中定义了变量或常量，我应该如何评论呢？

例子：

```
if ($foo==$bar) {
    define('FOOBAR',$foo);
} else if ($foo>$bar) {
    define('FOOBAR',$bar);
} else {
    define('FOOBAR',$foo+$bar);
} 
```

显然我不想添加 3 条评论，文档应该真正解释 if 语句，如此合乎逻辑的 docBlock 应该在 if 语句开始之前 - 这在代码视图中最美观 - 但 docBlock 必须在“定义”之前立即上线。我可以把它放在第一个之前，但这看起来很奇怪。

```
if ($foo==$bar) {
    /**
     * FOOBAR Definition.
     *
     * Value of FOOBAR. Yada yada.
     * @var int
     */
    define('FOOBAR',$foo);
} else if ($foo>$bar) {
    define('FOOBAR',$bar);
} else {
    define('FOOBAR',$foo+$bar);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:34:52.540

phpdoc2 对@ignore 行为的期望可能与phpdoc1 不同。

在 phpdoc1 中，@ignore 标签实际上意味着“你看到下一段包含可记录元素的代码了吗？忽略那段代码”。这种行为确实允许 PandyLegend 的示例完全按照上面编写的代码+文档块工作。手册中@ignore 的示例用法实际上也符合 PandyLegend 的用例 (http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.ignore.pkg.html)。

从我从使用 PandyLegend 的示例中看到的 phpdoc2 的行为来看，我认为 phpdoc2 正在考虑“您在下一段代码中看到了可记录的元素？记录它的名称，并在整个文档集中完全忽略该元素”。

我的猜测是，这个问题实际上只是一个不同的解释，而不是一个错误。

(https://github.com/phpDocumentor/phpDocumentor2/issues/583)

# java - 支持高亮显示的 PDF 阅读器 Java 库

> ID：12175955
> 
> 赞同：1
> 
> 时间：2012-08-29T10:32:37.707
> 
> 标签：java, pdf, highlighting

我想**用 Java 构建自己的 pdf 阅读器，**并希望能够**突出显示 pdf 中的单词**并保存这些突出显示。

1.  我已经看到有几个我可以使用的 PDF 库，但我想知道哪个最适合用于此目的。

2.  是否可以进行这种突出显示，是否有特定的库可以帮助我做到这一点？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:44:48.230

在这里，您有大量适用于 java 的开源[pdf 库](http://java-source.net/open-source/pdf-libraries)。我没有使用过它们中的任何一个，但我敢打赌 pdfBox 是 Apache Foundation 的一部分。它有一个特定的类来[突出显示](http://pdfbox.apache.org/userguide/highlighting.html)xml 中的 PDF，但我认为您还必须重新构建它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:45:10.573

使用 Apache [Lucene](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/highlight/package-summary.html)库。它为搜索词提供突出显示选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T06:19:06.157

您可以使用 Apache PDFBox 在 PDF 中突出显示。

链接：[https ://pdfbox.apache.org/](https://pdfbox.apache.org/)

# vb.net - VB.net：从通用列表中删除项目不起作用

> ID：12175959
> 
> 赞同：0
> 
> 时间：2012-08-29T10:32:46.823
> 
> 标签：vb.net, .net-3.5

我正在使用 VB.net 并试图从列表中删除一个对象项，如下所示：

```
Dim evidenceContentItems As List(Of ContentData) = contentApi.GetList(contentCriteria)

For Each item As ContentData In evidenceContentItems.ToList()

    Dim contentMetaList() As Ektron.Cms.CustomAttribute = metaApi.GetContentMetadataList(item.Id).AttributeList

    For Each metaItem As CustomAttribute In contentMetaList.ToList()

        If metaItem.Value <> "-1" Then                
            evidenceContentItems.Remove(item)
        End If

    Next
Next 
```

如果我在“evidenceContentItems.Remove(contentItem)”命令上放置一个 QuickWatch，它会返回 True，但列表中的项目数不会下降，并且该项目实际上并未被删除。

我能想到的唯一另一件事是创建第二个列表并向其中添加有效项目，但我想了解为什么 .remove 不起作用（但返回 True）。

**编辑：**

因此，似乎通过调用 .ToList() 我正在制作副本，因此当我 .Remove() 时，我正在从副本中删除。我添加了 .ToList() 因为在您遍历它时无法从列表中删除一个项目。

也试过：

```
 For Each item As ContentData In itemsToRemove
        If evidenceContentItems.Contains(item) Then
            evidenceContentItems.Remove(item)
        End If
    Next 
```

我再次从 .Remove(item) 获得了真正的回报，但计数仍然没有下降。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:15:17.890

`Remove`不起作用，因为`item`没有引用内存中与您尝试从列表中删除的对象相同的对象。

一种选择是在类中覆盖`Equals`和，这样即使两个对象不相同，也可以被认为是“相等的”。`GetHashCode``ContentData`

您还可以使用`RemoveAll`不需要更改`ContentData`类的方法：

```
evidenceContentItems.RemoveAll(Function(x) x.Id = itemToRemove.Id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:09:07.917

所以我无法成功地从列表中删除一个项目。最后，我创建了一个新列表来添加项目。我创建了一个名为 itemsToShow 的新列表：

```
Dim itemsToShow As New List(Of ContentData) 
```

然后，当我遍历evidenceContentItems 时，我添加了本来不会删除的项目：

```
itemsToShow.Add(item) 
```

我了解删除副本的全部内容 - 但在我上面编辑的问题中，我试图从原始文件中删除但无济于事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-10T08:36:02.217

这是一个旧帖子。但我只是想分享对我有用的东西。使用 ToArray 而不是 ToList() 对我有用。

```
For Each item As ContentData In evidenceContentItems.ToArray()
    evidenceContentItems.Remove(item)
Next 
```

# ruby - 如何在我的 Cucumber 测试场景中使用预定义的变量/常量

> ID：12175963
> 
> 赞同：2
> 
> 时间：2012-08-29T10:33:07.807
> 
> 标签：ruby, cucumber

我在 env.rb 中定义了一个变量作为用户 ID。

> 用户名='1234'

在我的 Cucumber 测试场景中，我希望确认我的响应包含正确的用户 ID。但是，我不希望在我的 Senario 或步骤定义中硬编码。有可能这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:58:42.963

我会放置一个附加文件，比如说`test_constanst.rb`在 features/ 目录中。在那里，我会定义一个这样的模块：

```
module TestConstants
  def self.user_id
    1234
  end
end 
```

像这样，您将它与测试配置和代码分开。您只需要从`env.rb`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T05:46:15.613

Ruby 中的变量范围在某种程度上由 sigils 控制。以 $ 开头的变量是全局变量，以 @ 开头的变量是实例变量，@@ 表示类变量，以大写字母开头的名称是常量。使变量全局，它将在任何地方都可用，即

> $userid='1234'

# python - 用于读取按键的 Python 方法？

> ID：12175964
> 
> 赞同：45
> 
> 时间：2012-08-29T10:33:09.367
> 
> 标签：python, windows, key, keydown, getch

我是 Python 新手，我刚刚用 Python 制作了一个游戏和一个菜单。问题是，使用 (raw_)input() 需要我在每次按键后按回车键，我想这样做，以便按下向下箭头将立即选择下一个菜单项，或在游戏中向下移动。目前，它要求我喜欢输入“向下”，然后按 Enter。我也做了很多研究，但我不希望仅仅为了实现一个 keyDown() 方法而下载巨大的模块（例如 pygame）。那么有没有更简单的方法，我只是找不到？

**编辑：** 刚刚发现可以解决问题`msvcrt.getch()`。这不是 keyDown()，但它有效。但是，我也不知道如何使用它，看起来很奇怪，这里有什么帮助吗？这是我目前得到的：

```
from msvcrt import getch
while True:
    key = getch()
    print(key) 
```

但是，它不断给我所有这些无意义的字节，例如，向下箭头是这样的：

```
b'\xe0'
b'P' 
```

而且我不知道如何使用它们，我尝试与 chr() 进行比较，甚至使用 ord() 但实际上无法进行任何比较。我想做的基本上是这样的：

```
from msvcrt import getch
while True:
    key = getch()
    if key == escape:
        break
    elif key == downarrow:
        movedown()
    elif key == 'a':
        ... 
```

等等......有什么帮助吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-29T14:01:26.187

通过我自己测试所有的东西弄清楚了。找不到任何关于它的主题，所以我将把解决方案留在这里。这可能不是唯一甚至最好的解决方案，但它适用于我的目的（在 getch 的限制内）并且总比没有好。

注意：`keyDown()`可以识别所有按键和实际按键的正确性仍然很有价值。

**解决方案：**使用`ord()`-function 首先将`getch()`转换为整数（我猜它们是虚拟键码，但不太确定）工作正常，然后将结果与代表所需键的实际数字进行比较。此外，如果需要，我可以`chr()`在返回的数字周围添加一个额外的内容，以便将其转换为字符。但是，我主要使用向下箭头、esc 等，因此将它们转换为字符将是愚蠢的。这是最终的代码：

```
from msvcrt import getch
while True:
    key = ord(getch())
    if key == 27: #ESC
        break
    elif key == 13: #Enter
        select()
    elif key == 224: #Special keys (arrows, f keys, ins, del, etc.)
        key = ord(getch())
        if key == 80: #Down arrow
            moveDown()
        elif key == 72: #Up arrow
            moveUp() 
```

此外，如果其他人需要，您可以轻松地从谷歌找到键码，或者使用 python 并按下键：

```
from msvcrt import getch
while True:
    print(ord(getch())) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-29T12:45:42.417

请参阅 MSDN [getch](http://msdn.microsoft.com/en-us/library/078sfkak%28v=vs.110%29.aspx)文档。具体来说：

> _getch 和_getwch 函数从控制台读取单个字符而不回显该字符。这些函数都不能用于读取 CTRL+C。读取功能键或方向键时，每个功能必须调用两次；第一次调用返回 0 或 0xE0，第二次调用返回实际的键码。

Python 函数返回一个字符。您可以使用`ord()`来获取可以测试的整数值，例如`keycode = ord(msvcrt.getch())`.

因此，如果您读取 0x00 或 0xE0，请再次读取以获取箭头或功能键的键码。根据实验，0x00 在 F1-F10 (0x3B-0x44) 之前，0xE0 在箭头键和 Ins/Del/Home/End/PageUp/PageDown 之前。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-17T08:12:29.443

我真的不想将此作为评论发布，因为我需要评论所有答案和原始问题。

所有答案似乎都依赖于 MSVCRT Microsoft Visual C Runtime。如果您想避免这种依赖：

> 如果您需要跨平台支持，请在此处使用库：
> 
> [https://pypi.org/project/getkey/#files](https://pypi.org/project/getkey/#files)
> 
> [https://github.com/kcsaff/getkey](https://github.com/kcsaff/getkey)
> 
> 可以提供更优雅的解决方案。

代码示例：

```
from getkey import getkey, keys
key = getkey()
if key == keys.UP:
  ...  # Handle the UP key
elif key == keys.DOWN:
  ...  # Handle the DOWN key
elif key == 'a':
  ...  # Handle the `a` key
elif key == 'Y':
  ...  # Handle `shift-y`
else:
  # Handle other text characters
  buffer += key
  print(buffer) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-15T19:32:20.983

```
from msvcrt import getch

pos = [0, 0]

def fright():
    global pos
    pos[0] += 1

def fleft():
    global pos 
    pos[0] -= 1

def fup():
    global pos
    pos[1] += 1

def fdown():
    global pos
    pos[1] -= 1

while True:
    print'Distance from zero: ', pos
    key = ord(getch())
    if key == 27: #ESC
        break
    elif key == 13: #Enter
        print('selected')
    elif key == 32: #Space
        print('jump')
    elif key == 224: #Special keys (arrows, f keys, ins, del, etc.)
        key = ord(getch())
        if key == 80: #Down arrow
            print('down')
            fdown
        elif key == 72: #Up arrow
            print('up')
            fup()
        elif key == 75: #Left arrow
            print('left')
            fleft()
        elif key == 77: #Right arrow
            print('right')
            fright() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-02T13:23:38.330

我也试图实现这一目标。从上面的代码中，我了解到您可以多次调用 getch() 函数，以便从函数中获取两个字节。因此，如果您只是想与字节对象一起使用，则不需要 ord() 函数。

```
while True :
    if m.kbhit() :
        k = m.getch()
        if b'\r' == k :
            break
        elif k == b'\x08'or k == b'\x1b':
            # b'\x08' => BACKSPACE
            # b'\x1b' => ESC
            pass
        elif k == b'\xe0' or k == b'\x00':
            k = m.getch()
            if k in [b'H',b'M',b'K',b'P',b'S',b'\x08']:
                # b'H' => UP ARROW
                # b'M' => RIGHT ARROW
                # b'K' => LEFT ARROW
                # b'P' => DOWN ARROW
                # b'S' => DELETE
                pass
            else:
                print(k.decode(),end='')
        else:
            print(k.decode(),end='') 
```

此代码将打印任何键，直到在 CMD 或 IDE 中按下回车键（我使用的是 VS CODE）如果需要，您可以在 if 内部自定义特定键

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-27T10:30:03.727

现在真的很晚了，但我制作了一个适用于 Windows、Mac 和 Linux 的快速脚本，只需使用每个命令行：

```
import os, platform

def close():
    if platform.system() == "Windows":
        print("Press any key to exit . . .")
        os.system("pause>nul")
        exit()

    elif platform.system() == "Linux":
        os.system("read -n1 -r -p \"Press any key to exit . . .\" key")
        exit()

    elif platform.system() == "Darwin":
        print("Press any key to exit . . .")
        os.system("read -n 1 -s -p \"\"")
        exit()

    else:
        exit() 
```

它只使用内置函数，并且应该适用于所有三个（尽管我只测试过 Windows 和 Linux ......）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-08T10:39:44.013

```
import keyboard

def mywait():
    keyboard.read_key()

def my_function():
    print("going down")

def my_exit():
    quit()

keyboard.add_hotkey('down', my_function)
keyboard.add_hotkey('esc', my_exit)

while True:
    mywait() 
```

# razor - 使用 SiteEdit UI 2012 onTridion 2011 进行 Razor 模板

> ID：12175970
> 
> 赞同：4
> 
> 时间：2012-08-29T10:33:30.453
> 
> 标签：razor, tridion, tridion-2011, siteedit

这是关于使用 SDL Tridion 2011 SP1 的 Razor 模板。

为了启用 SiteEdit UI 2012，我们在 CT 中引入了标签。

我想问是否可以为`tcdl:ComponentField`驻留在组件的嵌套嵌入字段内的字段制作标签。

这里我们有“footer_links”作为多值嵌入字段的组件，并且每个“footer_links”项都有一个多值嵌入字段“sub_nav”，并且想要读取 sub_nav.image 以使其套件可编辑。

但是当我执行以下操作时，为内容 TBB 启用内联编辑会引发以下错误

> 错误：对象引用未设置为对象的实例。在 Tridion.SiteEdit.Templating.EnableInlineEditingUI.FindItemFieldXPath（String[] 部分，Int32 currentIndex，ItemFields 字段）

有人有什么想法吗？如果我们可以实现这个？如果是，那么以下代码有什么问题？

我们也可以读取 ComponentLink 中的字段吗？帮助将不胜感激。

```
@for (int i=0; i<Fields.footer_links.Count; i++) {
/* "outer_image" is compLink and it workds fine */
   @if(Fields.footer_links[i].outer_image != null) {
   <tcdl:ComponentField name="Fields.footer_links[@i].outer_image">
    <img src="@Fields.footer_links[i].outer_image.ID"/>
  </tcdl:ComponentField>              
  }

  /* "sub_nav" is Mutlivalued Embedded field and "image" is field inside it */

   @for (int j=0; j<Fields.footer_links[i].sub_nav.Count; j++) {
   <li>
   @if(Fields.footer_links[i].sub_nav[j].image != null) {
   <tcdl:ComponentField name="Fields.footer_links[@i].sub_nav[@j].image">
      <img src="@Fields.footer_links[i].sub_nav[j].image.ID" />
    </tcdl:ComponentField>
   }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:11:02.040

你可以这样尝试吗

```
 @foreach(dynamic com in Fields.footer_links) {
/* "outer_image" is compLink and it workds fine */
   @if(com.outer_image != null) {
   <tcdl:ComponentField name="com.Fields.outer_image">
    <img src="@com.Fields.outer_image.ID"/>
  </tcdl:ComponentField>              
  }

  /* "sub_nav" is Mutlivalued Embedded field and "image" is field inside it */

   @foreach (dynamic subCom in com.sub_nav) {
   <li>
   @if(subCom.image != null) {
   <tcdl:ComponentField name="subCom.Fields.image">
      <img src="@subCom.Fields.image.ID" />
    </tcdl:ComponentField>
   }
}
} 
```

因为，下面的行 @i 似乎没有像 Int 类型那样转换值

```
 <tcdl:ComponentField name="Fields.footer_links[@i].outer_image"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:06:31.280

我假设您在生成 tcdl 标记时遇到问题？

为了解决这个问题，您可以创建一个为您生成标签的辅助方法：

```
public static MvcHtmlString SiteEditComponentField(this HtmlHelper helper, string id) 
```

在此扩展方法中，您可以轻松地返回带有标签和属性的格式化字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:14:14.473

它很长一段时间，所以不确定你在使用什么，但你当然可以使用 razor mediator 内置功能，类似于 dwt

```
String RenderComponentField(string fieldExpression, int fieldIndex)
String RenderComponentField(string fieldExpression, int fieldIndex, bool renderTcdlTagOnError)
String RenderComponentField(string fieldExpression, int fieldIndex, string value)
String RenderComponentField(string fieldExpression, int fieldIndex, string value, bool renderTcdlTagOnError)
String RenderComponentField(string fieldExpression, int fieldIndex, bool htmlEncodeResult, bool resolveHtmlAsRTFContent)
String RenderComponentField(string fieldExpression, int fieldIndex, bool htmlEncodeResult, bool resolveHtmlAsRTFContent, renderTcdlTagOnError) 
```

谢谢..

# selenium - 硒网格中的自定义浏览器

> ID：12175978
> 
> 赞同：3
> 
> 时间：2012-08-29T10:33:53.767
> 
> 标签：selenium, selenium-rc, selenium-grid

我们正在使用 RC phpunit 3.6 运行 selenium 测试，并且我们配置了一个带有四个节点的 selenium 集线器（使用 selenium 版本 2.25）我想知道如何在节点配置中配置 *custom browser，因为我们正在提供一个json 节点配置。特别是，我们想更新节点，以便使用清理缓存的批处理文件启动 iexplorer。任何人都可以提供json配置文件和我们必须提供客户端以便将会话绑定到自定义浏览器的令牌的示例吗？谢谢菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T22:04:51.430

为了拥有一个干净的浏览器实例，此设置对您不起作用吗？因为它对我有用...

![在此处输入图像描述](../Images/3edbf9c4d3a04530e910bb3d5671684e.png)

# java - 如何让 ScheduledThreadPool 报错？

> ID：12175985
> 
> 赞同：8
> 
> 时间：2012-08-29T10:34:10.990
> 
> 标签：java, concurrency, error-handling, scheduled-tasks, java.util.concurrent

在经历了一次痛苦的调试后，我找到了这个问题：`ScheduledThreadPool`任务失败时不报告，再次失败的任务也不执行。因此，很难跟踪周期性作业的活跃度，除非用其他周期性任务（通过死人开关或`ScheduledFuture`）检查它们。

现在我们可以`ScheduledThreadPool`提交 an `UncaughtExceptionHandler`，但即使这样似乎也不起作用：

```
import java.util.concurrent.*;

class Test {
  public static void main(String[] args) {
    final ThreadFactory tf = new ThreadFactory() {
      private final ThreadFactory delegate = Executors.defaultThreadFactory();

      @Override public Thread newThread(final Runnable r) {
        final Thread res = delegate.newThread(r);
        res.setUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
          @Override
          public void uncaughtException(final Thread t, final Throwable e) {
            e.printStackTrace();
          }
        });
        return res;
      }
    };
    final ScheduledThreadPoolExecutor exec = new ScheduledThreadPoolExecutor(1, tf);

    final Runnable task = new Runnable() {
      private int c = 0;

      @Override
      public void run() {
        if ( c++ == 5 ) {
          throw new ArrayIndexOutOfBoundsException("Runtime error!");
        }

        System.out.println("Reached " + c);
      }
    };

    exec.scheduleWithFixedDelay(task, 1, 1, TimeUnit.SECONDS);
  }
} 
```

这个程序的输出很简单（Oracle Java SE (64-Bit Server) 1.7.0_06-b24）

```
Reached 1
Reached 2
Reached 3
Reached 4
Reached 5 
```

然后它挂起（按设计）。

我总是可以尝试完成整个任务，但这感觉很难看；`UncaughtExceptionHandler`应该已经这样做了！

是否有针对此问题的 API 解决方案？我做错了什么，还是一个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T10:52:01.597

货币线程池捕获所有异常，然后放置在 Future 对象中供您检查。`UncaughtExceptionHandler`仅针对线程未捕获并*杀死*线程的异常，在这种情况下仅针对线程池代码引发的异常。

解决此问题的一种简单方法是包装您的可运行文件。

```
public class ExceptionHandlingScheduledExecutor extends ScheduledThreadPoolExecutor {
    private final Thread.UncaughtExceptionHandler ueh;

    public ExceptionHandlingScheduledExecutor(int corePoolSize, Thread.UncaughtExceptionHandler ueh) {
        super(corePoolSize);
        this.ueh = ueh;
    }

    @Override
    public ScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
        return super.schedule(wrap(command), delay, unit);
    }

    @Override
    public <V> ScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
        return super.schedule(wrap(callable), delay, unit); 
    }

    @Override
    public ScheduledFuture<?> scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit) {
        return super.scheduleAtFixedRate(wrap(command), initialDelay, period, unit);
    }

    @Override
    public ScheduledFuture<?> scheduleWithFixedDelay(Runnable command, long initialDelay, long delay, TimeUnit unit) {
        return super.scheduleWithFixedDelay(wrap(command), initialDelay, delay, unit);
    }

    @Override
    public void execute(Runnable command) {
        super.execute(wrap(command));
    }

    @Override
    public Future<?> submit(Runnable task) {
        return super.submit(wrap(task));
    }

    @Override
    public <T> Future<T> submit(Runnable task, T result) {
        return super.submit(wrap(task), result);
    }

    @Override
    public <T> Future<T> submit(Callable<T> task) {
        return super.submit(wrap(task));
    }

    private Runnable wrap(final Runnable runnable) {
        return new Runnable() {
            @Override
            public void run() {
                try {
                    runnable.run();
                } catch (final Throwable t) {
                    ueh.uncaughtException(Thread.currentThread(), t);
                    throw t;
                }
            }
        };
    }

    private <T> Callable<T> wrap(final Callable<T> callable) {
        return new Callable<T>() {
            @Override
            public T call() throws Exception {
                try {
                    return callable.call();
                } catch (Throwable t) {
                    ueh.uncaughtException(Thread.currentThread(), t);
                    throw t;
                }
            }
        };
    }
} 
```

您可以对 ThreadPoolExecutor 进行子类化以透明地执行此操作。

* * *

您也可以使用缓存线程池来处理异常，但这更复杂。

以透明方式使用返回`Future`的一种方法是子类`ScheduledThreadPoolExecutor`（或任何 Executor，就此而言）：

```
class MyScheduledExecutor extends ScheduledThreadPoolExecutor {
  private final Thread.UncaughtExceptionHandler ueh;
  private final ExecutorService futureService = Executors.newCachedThreadPool();

  public MyScheduledExecutor(int corePoolSize, Thread.UncaughtExceptionHandler ueh) {
    super(corePoolSize);
    this.ueh = ueh;
  }

  // Copy other constructors

  @Override
  public ScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                   long initialDelay,
                                                   long delay,
                                                   TimeUnit unit) {
    final ScheduledFuture<?> f = super.scheduleWithFixedDelay(command, initialDelay, delay, unit);
    futureService.submit(new Runnable() {
      @Override
      public void run() {
        try {
          f.get();
        } catch (Throwable t ) {
          ueh.uncaughtException(null, t.getCause());
        }
      }
    };

    return f;
  }

  // Do similarly for other submit/schedule methods
} 
```

并像这样使用它：

```
final ScheduledThreadPoolExecutor exec = new MyScheduledExecutor(1, new Thread.UncaughtExceptionHandler() {
      @Override
      public void uncaughtException(final Thread t, final Throwable e) {
        e.printStackTrace();
      }
    }); 
```

现在输出如所愿：

```
Reached 1
Reached 2
Reached 3
Reached 4
Reached 5
java.lang.ArrayIndexOutOfBoundsException: Runtime error!
   ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T05:40:43.173

您可以使用[jcabi-log](http://www.jcabi.com/jcabi-log/threads-VerboseRunnable.html)[`VerboseRunnable`](http://www.jcabi.com/jcabi-log/apidocs-0.7.16/com/jcabi/log/VerboseRunnable.html)中的类，它执行上面建议的包装：

```
import com.jcabi.log.VerboseRunnable;
Runnable runnable = new VerboseRunnable(
  Runnable() {
    public void run() { 
      // do business logic, may Exception occurs
    }
  },
  true // it means that all exceptions will be swallowed and logged
); 
```

现在，当 executor 调用时`runnable.run()`不会抛出异常。相反，它们被吞下并记录（到 SLF4J）。因此，执行程序不会因为异常而停止，您将看到发生了什么。

# javascript - 使用 jQuery 自动裁剪图像空白

> ID：12175991
> 
> 赞同：30
> 
> 时间：2012-08-29T10:34:32.310
> 
> 标签：javascript, jquery, image

我有 100,000 张不受我控制的图像。其中一些图像非常出色，因为图像延伸到边界，而有些则具有过多的空白。

当有过多的空白时，它会使页面看起来很糟糕，并且意味着屏幕上的图像看起来都像是不同的大小。

你可以在这里看到我的意思：

[http://www.fitness-saver.com/uk/shop/mountain-bikes/](http://www.fitness-saver.com/uk/shop/mountain-bikes/)

我一直在寻找的是一种裁剪图像并自动删除空白的 jQuery 方法。

1）每张图像的空白量不同 2）图像的比例不同 3）我想使用 javascript 而不是预处理图像。

我希望你能帮忙！

编辑：这是一个示例图像 - [http://images.productserve.com/preview/3395/128554505.jpg](http://images.productserve.com/preview/3395/128554505.jpg)。请注意，这些图片来自不同的附属网站，并且肯定来自不同的域。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-29T12:58:10.353

要分析图像中的空白，我知道的唯一方法是将图像加载到`canvas`：

```
var img = new Image(),
    $canvas = $("<canvas>"), // create an offscreen canvas
    canvas = $canvas[0],
    context = canvas.getContext("2d");

img.onload = function () {
   context.drawImage(this, 0, 0); // put the image in the canvas
   $("body").append($canvas);
   removeBlanks(this.width, this.height);
};

// test image
img.src = 'http://images.productserve.com/preview/1302/218680281.jpg'; 
```

接下来，使用[getImageData()](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#pixel-manipulation)方法。此方法返回一个 ImageData 对象，您可以使用该对象检查每个像素数据（颜色）。

```
var removeBlanks = function (imgWidth, imgHeight) {
    var imageData = context.getImageData(0, 0, canvas.width, canvas.height),
             data = imageData.data,
           getRBG = function(x, y) {
                      return {
                        red:   data[(imgWidth*y + x) * 4],
                        green: data[(imgWidth*y + x) * 4 + 1],
                        blue:  data[(imgWidth*y + x) * 4 + 2]
                      };
                    },
          isWhite = function (rgb) {
                      return rgb.red == 255 && rgb.green == 255 && rgb.blue == 255;
                    },
            scanY = function (fromTop) {
                      var offset = fromTop ? 1 : -1;

                      // loop through each row
                      for(var y = fromTop ? 0 : imgHeight - 1; fromTop ? (y < imgHeight) : (y > -1); y += offset) {

                        // loop through each column
                        for(var x = 0; x < imgWidth; x++) {
                            if (!isWhite(getRBG(x, y))) {
                                return y;                        
                            }      
                        }
                    }
                    return null; // all image is white
                },
            scanX = function (fromLeft) {
                      var offset = fromLeft? 1 : -1;

                      // loop through each column
                      for(var x = fromLeft ? 0 : imgWidth - 1; fromLeft ? (x < imgWidth) : (x > -1); x += offset) {

                        // loop through each row
                        for(var y = 0; y < imgHeight; y++) {
                            if (!isWhite(getRBG(x, y))) {
                                return x;                        
                            }      
                        }
                    }
                    return null; // all image is white
                };

        var cropTop = scanY(true),
            cropBottom = scanY(false),
            cropLeft = scanX(true),
            cropRight = scanX(false);
    // cropTop is the last topmost white row. Above this row all is white
    // cropBottom is the last bottommost white row. Below this row all is white
    // cropLeft is the last leftmost white column.
    // cropRight is the last rightmost white column.
}; 
```

坦率地说，我无法测试这段代码是有充分理由的：我遇到了臭名昭著的“**无法从画布获取图像数据，因为画布已被跨域数据污染。** ”安全异常。

这不是错误，而是预期的功能。从[规格](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html)：

> toDataURL()、toDataURLHD()、toBlob()、getImageData() 和 getImageDataHD() 方法检查标志并将抛出 SecurityError 异常而不是泄漏跨域数据。

当`drawImage()`从外部域加载文件时会发生这种情况，这会导致画布的*origin-clean*标志设置为 false，从而阻止进一步的数据操作。

恐怕你会遇到同样的问题，但无论如何，[这里是代码。](http://jsfiddle.net/ruisoftware/ddZfV/5/)

即使这在客户端有效，我可以想象在性能方面会有多糟糕。因此，正如 Jan 所说，如果您可以下载图像并在服务器端对其进行预处理，那就更好了。

* * *

**编辑：**我很好奇我的代码是否真的会裁剪图像，确实如此。 ![在此处输入图像描述](../Images/2fa7316fd65e91516329ada1b8b7b3c4.png)

你可以在**[这里查看](http://jsfiddle.net/ruisoftware/ddZfV/7/)**

如前所述，它仅适用于您域中的图像。您可以选择自己的白色背景图像并更改最后一行：

```
// define here an image from your domain
img.src = 'http://localhost/strawberry2.jpg'; 
```

显然，您需要从您的域运行代码，而不是从 jsFiddle。

* * *

**Edit2：**如果你想裁剪和放大以保持相同的纵横比，然后改变这个

```
var $croppedCanvas = $("<canvas>").attr({ width: cropWidth, height: cropHeight });

// finally crop the guy
$croppedCanvas[0].getContext("2d").drawImage(canvas,
    cropLeft, cropTop, cropWidth, cropHeight,
    0, 0, cropWidth, cropHeight); 
```

到

```
var $croppedCanvas = $("<canvas>").attr({ width: imgWidth, height: imgHeight });

// finally crop the guy
$croppedCanvas[0].getContext("2d").drawImage(canvas,
    cropLeft, cropTop, cropWidth, cropHeight,
    0, 0, imgWidth, imgHeight); 
```

* * *

**Edit3：**在浏览器上裁剪图像的一种快速方法是通过使用**Web Workers**并行化工作负载，正如这篇[优秀的文章](http://www.webappers.com/2013/05/14/how-to-use-web-workers-for-image-manipulation/)所解释的那样。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-11-05T23:13:56.437

根据 提供的出色答案`Jose Rui Santos`，我已将他的代码更改为仅使用`image`对象而无需加载 jQuery 库。

此函数的返回是裁剪后的图像数据 URL，可直接在图像元素中使用。

```
/*
    Source: http://jsfiddle.net/ruisoftware/ddZfV/7/
    Updated by: Mohammad M. AlBanna
    Website: MBanna.info 
    Facebook: FB.com/MBanna.info
*/

var myImage = new Image();
myImage.crossOrigin = "Anonymous";
myImage.onload = function(){
    var imageData = removeImageBlanks(myImage); //Will return cropped image data
}
myImage.src = "IMAGE SOURCE";

//-----------------------------------------//
function removeImageBlanks(imageObject) {
    imgWidth = imageObject.width;
    imgHeight = imageObject.height;
    var canvas = document.createElement('canvas');
    canvas.setAttribute("width", imgWidth);
    canvas.setAttribute("height", imgHeight);
    var context = canvas.getContext('2d');
    context.drawImage(imageObject, 0, 0);

    var imageData = context.getImageData(0, 0, imgWidth, imgHeight),
        data = imageData.data,
        getRBG = function(x, y) {
            var offset = imgWidth * y + x;
            return {
                red:     data[offset * 4],
                green:   data[offset * 4 + 1],
                blue:    data[offset * 4 + 2],
                opacity: data[offset * 4 + 3]
            };
        },
        isWhite = function (rgb) {
            // many images contain noise, as the white is not a pure #fff white
            return rgb.red > 200 && rgb.green > 200 && rgb.blue > 200;
        },
                scanY = function (fromTop) {
        var offset = fromTop ? 1 : -1;

        // loop through each row
        for(var y = fromTop ? 0 : imgHeight - 1; fromTop ? (y < imgHeight) : (y > -1); y += offset) {

            // loop through each column
            for(var x = 0; x < imgWidth; x++) {
                var rgb = getRBG(x, y);
                if (!isWhite(rgb)) {
                    if (fromTop) {
                        return y;
                    } else {
                        return Math.min(y + 1, imgHeight);
                    }
                }
            }
        }
        return null; // all image is white
    },
    scanX = function (fromLeft) {
        var offset = fromLeft? 1 : -1;

        // loop through each column
        for(var x = fromLeft ? 0 : imgWidth - 1; fromLeft ? (x < imgWidth) : (x > -1); x += offset) {

            // loop through each row
            for(var y = 0; y < imgHeight; y++) {
                var rgb = getRBG(x, y);
                if (!isWhite(rgb)) {
                    if (fromLeft) {
                        return x;
                    } else {
                        return Math.min(x + 1, imgWidth);
                    }
                }      
            }
        }
        return null; // all image is white
    };

    var cropTop = scanY(true),
        cropBottom = scanY(false),
        cropLeft = scanX(true),
        cropRight = scanX(false),
        cropWidth = cropRight - cropLeft,
        cropHeight = cropBottom - cropTop;

    canvas.setAttribute("width", cropWidth);
    canvas.setAttribute("height", cropHeight);
    // finally crop the guy
    canvas.getContext("2d").drawImage(imageObject,
        cropLeft, cropTop, cropWidth, cropHeight,
        0, 0, cropWidth, cropHeight);

    return canvas.toDataURL();
} 
```

# visual-studio-2010 - 向 Visual Studio 2010 添加简单语言支持

> ID：12175992
> 
> 赞同：1
> 
> 时间：2012-08-29T10:34:33.073
> 
> 标签：visual-studio-2010, visual-studio, vbscript, languageservice

我正在使用 Visual Studio 2010 开发一些 VBScript。对这种语言的本机支持不是很好，因此我希望能够利用语言服务/VS 扩展来改进对这些语言的支持。不过，目前我只想通过添加一些功能来简化我的生活：

*   允许 VS 任务列表识别我***的 'todo:***评论
*   允许像***#region...#endregion***这样的 c#功能可以轻松地将脚本分解为更易于阅读的块（为了符合 VBScript，我会在散列之前添加一个撇号以使其成为注释）。

有没有一种简单的方法可以通过 VS 中的配置来做到这一点，还是我必须创建一个完整的语言服务才能获得这个功能？我要问的可能是不可能的；但认为值得一试。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:27:36.407

我敢打赌你可以用一个简单的扩展来做任务列表的东西：http: [//msdn.microsoft.com/en-us/library/163ba701%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/163ba701%28v=vs.80%29.aspx)

但是要执行#region 行为，我相当确定您需要一个简单的剥离语言服务来访问源的 AuthoringSink [http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.package.authoringsink。 addhiddenregion.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.package.authoringsink.addhiddenregion.aspx) 和 [http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.package.authoringsink%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.package.authoringsink%28v=vs.90%29.aspx)

# c# - 在 Windows 7 Aero 主题上的点图中闪烁

> ID：12175994
> 
> 赞同：1
> 
> 时间：2012-08-29T10:34:39.360
> 
> 标签：c#, .net, winforms, graphics, windows-7

我们将在 c# .net framework 1.1 中开发的 win-form 应用程序遗留代码移植到 c# .net 3.5。

具有绘制点图并在图中的点上应用不同形状（多边形、正方形等）的功能。您可以通过使用鼠标拖动来更改应用形状的大小，当拖动形状时，某些部分变得不可见，直到我们下降到新点并且绘制速度非常慢。

> 你可以称之为闪烁。
> 
> 此功能在 windows xp 中运行良好，在 windows 7 中适用于基本和经典主题
> 
> 只有在 Windows 7 中应用航空主题时才会闪烁

我已经尝试过 [http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/aaed00ce-4bc9-424e-8c05-c30213171c2c](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/aaed00ce-4bc9-424e-8c05-c30213171c2c) 并 [在 Windows 窗体应用程序中闪烁](https://stackoverflow.com/questions/3286373/flickering-in-a-windows-forms-app)

他们都没有帮助。

在时间戳执行时间之后我发现

```
 for (int i=0; i < arraypnts.Length - 1; i++) {
           g.DrawLine(Pens.Black, arraypnts[i], arraypnts[i+1]);
         }

         // draw the last line
         g.DrawLine(Pens.Black, arraypnts[0], arraypnts[arraypnts.Length-1]); 
```

与应用基本主题相比，应用航空主题需要花费大量时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:55:57.557

我认为您需要为表单对象使用双缓冲区。

```
this.DoubleBuffered = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:23:50.883

好吧，我找到了解决闪烁问题的方法。只需禁用桌面组合 - 您可以在应用程序级别或操作系统级别执行此操作。

对于应用程序级别，转到exe文件->右键单击->兼容性->选中禁用桌面组合。

对于操作系统级别（和更好的视觉外观），开始->右键单击计算机->属性->高级系统设置->高级选项卡->性能设置->视觉效果->自定义->取消选中启用桌面合成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:31:35.663

“在 Aero 关闭的情况下工作正常”……对我来说听起来像是一个追索权问题……。你在绘画活动中画画吗？如果不是，您从哪里获得图形对象？您可以以编程方式禁用桌面合成，我需要它用于我做的一些项目......但与绘图无关......

```
[DllImport("dwmapi.dll")]
private static extern int DwmIsCompositionEnabled(ref bool enabled);

const uint DWM_EC_DISABLECOMPOSITION = 0;
const uint DWM_EC_ENABLECOMPOSITION = 1;
[DllImport("dwmapi.dll", EntryPoint = "DwmEnableComposition")]
private static extern uint DwmEnableComposition(uint compositionAction); 
```

用法：

```
 DwmEnableComposition(DWM_EC_ENABLECOMPOSITION); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:52:33.420

很久以前我有一个类似的问题，过了一段时间终于找到了解决方案，只有在首先将对象可见性设置为 false 时才重新绘制组件。

```
Object.Visible = false

//redraw your components

Object.Visible = true 
```

我不知道在你的情况下这是否可行，但值得一试！

# exception - java：创建新 zip 时出现 Zip 异常

> ID：12175995
> 
> 赞同：0
> 
> 时间：2012-08-29T10:34:39.290
> 
> 标签：exception, zip

创建新的 zip 文件时，此异常意味着什么？

java.util.zip.ZipException：太短而不能 Zip

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:43:55.813

java.util.zipException: too short to be zip 意味着您的 Zip 无效。请检查您正在创建有效的 zip。

您可以找到[示例](http://www.java-examples.com/create-zip-file-directory-using-zipoutputstream-example)

我已经验证并且下面的代码正在运行。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.zip.ZipEntry;
import java.util.zip.ZipException;
import java.util.zip.ZipOutputStream;

public class CreateZipFileDirectory {

    public static void main(String args[])
    {                
            try
            {
                    String zipFile = "Path where zip needs to be creaetd e.g.zipdemo.zip";
                    String sourceDirectory = "directory which contains files.";

                    //create byte buffer
                    byte[] buffer = new byte[1024];
                    /*
                     * To create a zip file, use
                     *
                     * ZipOutputStream(OutputStream out)
                     * constructor of ZipOutputStream class.
                     *  
                     */

                     //create object of FileOutputStream
                     FileOutputStream fout = new FileOutputStream(zipFile);

                     //create object of ZipOutputStream from FileOutputStream
                     ZipOutputStream zout = new ZipOutputStream(fout);

                     //create File object from directory name
                     File dir = new File(sourceDirectory);

                     //check to see if this directory exists
                     if(!dir.isDirectory())
                     {
                            System.out.println(sourceDirectory + " is not a directory");
                     }
                     else
                     {
                            File[] files = dir.listFiles();

                            for(int i=0; i < files.length ; i++)
                            {
                                    System.out.println("Adding " + files[i].getName());

                                    //create object of FileInputStream for source file
                                    FileInputStream fin = new FileInputStream(files[i]);

                                    /*
                                     * To begin writing ZipEntry in the zip file, use
                                     *
                                     * void putNextEntry(ZipEntry entry)
                                     * method of ZipOutputStream class.
                                     *
                                     * This method begins writing a new Zip entry to
                                     * the zip file and positions the stream to the start
                                     * of the entry data.
                                     */

                                    zout.putNextEntry(new ZipEntry(files[i].getName()));

                                    /*
                                     * After creating entry in the zip file, actually
                                     * write the file.
                                     */
                                    int length;

                                    while((length = fin.read(buffer)) > 0)
                                    {
                                       zout.write(buffer, 0, length);
                                    }

                                    /*
                                     * After writing the file to ZipOutputStream, use
                                     *
                                     * void closeEntry() method of ZipOutputStream class to
                                     * close the current entry and position the stream to
                                     * write the next entry.
                                     */

                                     zout.closeEntry();
                                     //close the InputStream
                                     fin.close();
                            }
                     }

                      //close the ZipOutputStream
                      zout.close();

                      System.out.println("Zip file has been created!");

            }
            catch(IOException ioe)
            {
                    System.out.println("IOException :" + ioe);
            }

    } 
```

}

```
/*
Output of this program would be
Adding nonav.log
Adding ospreg.exe
Adding servers.ini
Adding setupisam.log
Adding sourceFile1.doc
Adding sourceFile2.doc
Zip file has been created!
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:45:26.673

看一下[readCentralDir()](http://www.docjar.com/html/api/java/util/zip/ZipFile%24RAFStream.java.html)方法，您将不得不更深入地查看代码，但一般来说，一旦文件太短而不能成为 ZIP 文件，似乎就会引发此异常。

以下代码行（mRaf 是随机访问文件）：

```
long scanOffset = mRaf.length() - ENDHDR;
if (scanOffset < 0) {
  throw new ZipException("too short to be Zip");
} 
```

# asp.net - 在 asp.net 中是否支持 canvas 标签，如果没有，我应该使用哪个标签而不是这个

> ID：12175997
> 
> 赞同：0
> 
> 时间：2012-08-29T10:34:54.833
> 
> 标签：asp.net

我正在研究 asp.net，我正在使用标签并在 javascript 中使用它

```
 window.onload = function () {
            // creating canvas objects
            canvas = document.getElementById('slideshow');
            ctx = canvas.getContext('2d');
             } 
```

但在 asp.net 上没有任何工作。这个 jquery 用于图像的立方体幻灯片。

```
<canvas id="slideshow" width="880" height="400"></canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:46:28.217

框架不支持画布标签，但浏览器支持。使用 IE9+/FF3.6+/Chrome 以使您的画布正常工作。ASP.NET 框架与此无关，您的脚本在支持 HTML5 元素的浏览器中应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:46:07.997

不支持你可以在 WPF 中使用 caneva 作为容器，尝试使用 div 控件

尝试使用此代码

```
<div id="slideshow" width="880" height="400"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:48:46.170

Canvas 标签适用于浏览器，所以不用担心 asp.net 是否支持它。就用它吧。