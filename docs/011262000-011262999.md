# StackOverflow 问答 11262000-11262999

# python - 构建可执行文件时出现 Py2exe 错误

> ID：11262003
> 
> 赞同：2
> 
> 时间：2012-06-29T12:43:36.677
> 
> 标签：python, module, executable, py2exe

> **可能重复：**
> [输出的 py2exe exe 仅在签名时不会运行：ImportError](https://stackoverflow.com/questions/7198431/outputed-py2exe-exe-wont-run-only-when-signed-importerror)

我之前问过一个类似的问题（[使用 Py2exe 和 matplotlib 错误创建可执行文件](https://stackoverflow.com/questions/11231579/creating-executable-with-py2exe-and-matplotlib-errors)）处理 matplotlib 错误。不过，我已经过了这个阶段。现在，当我尝试构建我的可执行文件时，我的包/代码似乎都没有导入。例如，我的代码导入以下内容：

```
import os
import csv
import wx
import time
import math

from matplotlib.backends.backend_wx import FigureCanvasWx as FigureCanvas
from matplotlib.backends.backend_wx import NavigationToolbar2Wx
from matplotlib.pyplot import figure,show
from mpl_toolkits.basemap import Basemap
from matplotlib.figure import Figure
import matplotlib.pyplot as plt
from numpy.random import rand
from datetime import datetime
import wx.calendar as cal
import numpy as npy
from pylab import *
import numpy as np
import matplotlib
import adodbapi
import sqlparse
import pylab
import annote_new
import cPickle as pickle 
```

当我运行我的可执行文件“No Module Named os”时出现日志错误。我的代码中的每个模块都有一个错误（如果我更改了导入内容的顺序）。为什么我的任何模块都没有导入？我的 Py2exe 代码如下所示：

```
import os
from distutils.core import setup 
import py2exe

from distutils.filelist import findall
import matplotlib
import glob

from matplotlib.backends.backend_wx import FigureCanvasWx as FigureCanvas
from matplotlib.backends.backend_wx import NavigationToolbar2Wx
from matplotlib.pyplot import figure,show
from mpl_toolkits.basemap import Basemap
from matplotlib.figure import Figure
import matplotlib.pyplot as plt
from numpy.random import rand
from datetime import datetime
import wx.calendar as cal
import numpy as npy
from pylab import *
import numpy as np
import matplotlib
import adodbapi
import sqlparse
import pylab
import annote_new
import cPickle as pickle
import wx

setup( 

windows=[{'script': r'Scout_Tool.py'}], 

data_files = [(r'mpl-data', glob.glob(r'C:\Python27\Lib\site-packages\matplotlib\mpl-data\*.*')),

              (r'mpl-data', [r'C:\Python27\Lib\site-packages\matplotlib\mpl-data\matplotlibrc']),
              (r'mpl-data\images',glob.glob(r'C:\Python27\Lib\site-packages\matplotlib\mpl-        data\images\*.*')),
              (r'mpl-data\fonts',glob.glob(r'C:\Python27\Lib\site-packages\matplotlib\mpl-        data\fonts\*.*'))],

#matplotlib.get_py2exe_datafiles(),

options={ 
    'py2exe':{ 
        'includes': [ 
            'matplotlib',
            'matplotlib.backends.backend_wx',
            'matplotlib.pyplot',
            'mpl_toolkits.basemap',
            'matplotlib.figure',
            'numpy.random',
            'wx.calendar',
            'mpl_toolkits', 
            'numpy', 
            'datetime', 
            'wx', 
            'pylab', 
            'adodbapi', 
            'sqlparse',
            'annote_new',
            'cPickle', 
            'pylab' 
        ], 
        'dll_excludes': ['MSVCP90.dll'],  
    } 
},

) 
```

关于我运行 py2exe 后为什么我的模块没有导入的任何想法？顺便说一句，运行 py2exe 代码时我没有收到任何错误——只有当我尝试运行生成的可执行文件时。谢谢！

***编辑***

好的，这就是我所做的。我已经取出了一些我没有使用的模块并删除了重复项。我还修复了我的 setup.py 文件，使其看起来像：

```
from distutils.core import setup 
import py2exe
import matplotlib
import glob

setup( 

windows=[{'script': r'Scout_Tool.py'}], 

data_files = matplotlib.get_py2exe_datafiles(),

options={ 
        'py2exe':{ 
            'includes': [ 
                'matplotlib',
                'matplotlib.backends.backend_wx',
                'matplotlib.pyplot',
                'mpl_toolkits.basemap',
                'matplotlib.figure',
                'wx.calendar',
                'mpl_toolkits', 
                'datetime', 
                'wx', 
                'adodbapi', 
                'sqlparse',
                'annote_new',
                'cPickle', 
                'pylab' 
            ], 

        } 
    },

) 
```

在此之后，我清除了我的整个“dist”文件夹，以确保之前没有保留任何内容。然后我在 CMD Prompt 中运行了以下命令 `C:\Python27\python setup.py py2exe`：这运行没有错误。

然后当我去运行 Scout_Tool.exe 时，我首先得到一个 MatPlotLib 数据错误。我不知道为什么我会得到这个，但要解决它，我做了以下事情：我解压缩“library.zip”，然后从 Mpl-toolkits - basemap - data 添加“data”文件夹，然后重新压缩库文件夹。

然后，当我尝试运行 Scout_Tool.exe 时，出现“没有名为 os 的模块”的错误。如果我将任何模块放在我的 Scout_Tool.py 代码中，这是正确的。

希望这有助于我在哪里？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:26:38.513

我编译了你的程序（导入），它对我来说运行正常。如果您不使用这些模块，则 py2exe 丢失模块报告不相关（我得到的列表与您显示的相同）。

请记住，当您在 py2exe 创建的 dist 模块中执行可执行文件时，可执行文件将运行（例如，而不是从桌面中的副本。为此，您需要创建直接访问链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:19:11.010

不会因此而受到赞扬，但其中任何一个对您的问题有帮助吗？

[http://www.python-forum.org/pythonforum/viewtopic.php?f=3&t=6659](http://www.python-forum.org/pythonforum/viewtopic.php?f=3&t=6659)

[输出的 py2exe exe 仅在签名时不会运行：ImportError](https://stackoverflow.com/questions/7198431/outputed-py2exe-exe-wont-run-only-when-signed-importerror)

这个问题也是延续

[py2exe 不导入 os 模块？](https://stackoverflow.com/questions/9858189/py2exe-doesnt-import-the-os-module)

# c++ - 运算符 << - 参数评估的顺序

> ID：11262006
> 
> 赞同：0
> 
> 时间：2012-06-29T12:43:50.970
> 
> 标签：c++, undefined-behavior

从这个问题和答案 - [cout << c++ << c; 的正确答案是什么？](https://stackoverflow.com/questions/10782863/what-is-the-correct-answer-for-cout-c-c)

我明白了

```
std::cout<<c++<<c; 
```

被评估为：

```
std::operator<<(std::operator<<(std::cout, c++), c); 
```

所以未定义的行为来自于可以首先评估两个参数中的任何一个的事实。到现在为止还挺好。

但是为什么`std::operator <<`？为什么不`std::ostream::operator <<`叫？如果是的话，它不会转化为

```
(ofstream::operator<<(c++)) << c;
              |
     returns ofstream& 
```

这和方法链接有什么区别：

```
struct A
{
    A& foo();
    void goo();
};
//...
A a;
a.foo().goo(); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T12:47:43.263

`std::ostream`提供`operator<<`作为重载的成员操作符，但其他头文件（例如`<string>`）提供自由操作符；所以`<<`是成员运算符还是自由函数取决于 RHS 类型。

但是，这两种方式都没有关系。让我们重命名`<<`为`foo`和`cout`as `bar`：

```
foo(foo(bar, c++), c);
bar.foo(c++).foo(c); 
```

在这两种情况下，行为都是未定义的，因为没有要求实现以`foo`任何特定顺序评估要调用的参数。重要的考虑是，根据附件 C，链式方法调用不构成多个*完整表达式*；如果编译器看到

```
foo.bar(<some-complex-expression>).baz(<another-complex-expression>); 
```

可以自由地对 to`bar`和to 的参数应用 CSE 和重新排序`baz`；确实，对副作用的检查可能表明参数 to`baz`是在那些 to 之前评估的`bar`。

```
struct A { A &foo(int) { return *this; } };
#include <cstdio>
int main() { A().foo(printf("hello\n")).foo(printf("bye\n")); } 
```

我的编译器（gcc 4.1.2）生成一个打印`bye\nhello\n`.

# ios - MPMoviePlayerController 中的“完成”按钮在全屏模式下不起作用

> ID：11262009
> 
> 赞同：0
> 
> 时间：2012-06-29T12:43:58.533
> 
> 标签：ios, ipad, mpmovieplayercontroller

好吧，我可以找到许多关于相同或相似问题和答案的问题......但是，没有什么可以帮助我。只有当我不使用属性“controlStyle”作为“MPMovieControlStyleFullscreen”时，“完成”按钮才有效。我试过这个方法。。

```
 MPMoviePlayerController *mpMoviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"https://dl.dropbox.com/u/14218997/thxq.mp4"]];
    mpMoviePlayerController.controlStyle = MPMovieControlStyleNone;
    [mpMoviePlayerController setUseApplicationAudioSession:NO];
    [mpMoviePlayerController setScalingMode:MPMovieScalingModeAspectFit];
    [mpMoviePlayerController setFullscreen:YES animated:YES];
    [mpMoviePlayerController.view setFrame:CGRectMake(0, 0, 1024, 768)];

    [[globalSingleton paintingView] addSubview:mpMoviePlayerController.view];

    [mpMoviePlayerController prepareToPlay];
    [mpMoviePlayerController play];

    mpMoviePlayerController.controlStyle = MPMovieControlStyleFullscreen; 
```

或者这样..

```
 MPMoviePlayerController *mp;
    MPMoviePlayerViewController *mpVC = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:@"https://dl.dropbox.com/u/14218997/thxq.mp4"]];
    mp = [mpVC moviePlayer];
    mp.controlStyle = MPMovieControlStyleFullscreen;
    mp.fullscreen = NO;
    mp.useApplicationAudioSession = NO;
    mp.view.frame = CGRectMake(0, 0, 1024, 768);

    [[globalSingleton paintingView] addSubview:mp.view]; 
```

（[globalSingleton paintingView]只是代表主视图，我已经检查过没有问题。）

请分享你对这个问题的了解。提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T23:36:46.093

根据您的代码，在我看来，您的意图是让全屏电影播放器​​接管屏幕。在这种情况下，您可能最好使用 MPMoviePlayerViewController，但您需要使用当前视图控制器将其呈现为模态视图控制器，如下所示：

```
MPMoviePlayerViewController *movieViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:someVideoURL];
movieViewController.moviePlayer.scalingMode = MPMovieScalingModeAspectFit;

// Self is the UIViewController you are presenting the movie player from.
[self presentMoviePlayerViewControllerAnimated:movieViewController]; 
```

在这种情况下，“完成”按钮应该可以正常工作，并关闭模态 MPMoviePlayerViewController

另一方面，如果您对在当前视图层次结构中添加电影的位置更感兴趣，这里是我为实现此目的所做的一个示例：

我还发现将`MPMoviePlayerController`的 controlStyle 属性设置为`MPMovieControlStyleFullscreen`具有相同的结果——“完成”按钮没有关闭`MPMoviePlayerController`. 当我将其更改为 时`MPMovieControlStyleDefault`，它按预期工作。但是，就我而言，我将`MPMoviePlayerController`' 的视图作为缩略图大小的子视图添加到当前显示`UIViewController`的 ' 视图中。我最初将`MPMoviePlayerController`'s controlStyle 设置为`MPMovieControlStyleNone`. 我`UIButton`在缩略图大小的电影播放器​​视图顶部有一个自定义，在按钮的操作方法中，我将 controlStyle 更改`MPMoviePlayerController`为`MPMovieControlStyleDefault`，然后调用`setFullscreen:animated:`哪个动画播放器视图进入全屏模式。然后，点击“完成”按钮正确地动画播放器回到我的缩略图大小的子视图`UIViewController`中 的观点。这是一个例子：

my 的初始实例化`MPMoviePlayerController`：

```
// My moviePlayerController is a property
self.moviePlayer = [[MPMoviePlayerController alloc] initWithURL:videoURL];
moviePlayer.controlStyle = MPMovieControlStyleNone;
moviePlayer.scalingMode = MPMovieScalingModeAspectFit;
moviePlayer.shouldAutoplay = NO;

// Add the moviePlayer's view as a subview of a my UIViewController's view.
moviePlayer.view.frame = CGRectMake(20, 20, 160, 90);
[self.view addSubview:moviePlayer.view]; 
```

**注意：**我还在我的 moviePlayer 的视图顶部添加了一个自定义 UIButton（用于调用全屏播放），并将它的操作设置为调用以下方法：

```
- (void)buttonAction:(UIButton *)sender
  {
      self.moviePlayer.controlStyle = MPMovieControlStyleDefault;
      [self.moviePlayer setFullscreen:YES animated:YES];
      [self.moviePlayer play];
  } 
```

**注意：**我还观察并处理了 MPMoviePlayerWillExitFullscreenNotification，其中我将 controlStyle 设置回 MPMovieControlStyleNone。

# git - git config 中的 Shell 变量扩展

> ID：11262010
> 
> 赞同：66
> 
> 时间：2012-06-29T12:44:02.360
> 
> 标签：git, shell

我有一个 shell 变量，它指向我所有配置文件所在的目录。假设变量是用`export RC=$HOME/rc`. 我在配置目录中有一个全局忽略文件：`~/rc/globalgitignore`.

我的问题是，如何扩展文件`RC`中的变量`.gitconfig`？

我已经尝试了以下方法：

*   `excludesfile = $RC/globalgitignore`

*   `excludesfile = !$RC/globalgitignore`

*   `excludesfile = !echo $RC/globalgitignore`

*   `excludesfile = !$(echo $RC/globalgitignore)`

这些解决方案都不起作用。

如果我输入完整路径：这是唯一可行的方法`excludesfile = ~/rc/globalgitignore`，但是如果将我的`rc`目录移动到不同的位置，我必须更改路径。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-29T12:52:50.160

你不能。[git-config(1)](http://git-scm.com/docs/git-config)不支持环境变量扩展，只支持有限的类型转换和路径扩展：

> 类型说明符可以是 --int 或 --bool，以使 git config 确保变量属于给定类型并将值转换为规范形式（int 的简单十进制数，“true”或bool 的 "false" 字符串）或 --path，它会进行一些**路径扩展**（参见下面的 --path）。如果没有传递**类型说明符**，则不会对值执行**检查或转换。**

状态的文档`--path`：

> - 小路
> 
> git-config 会将**前导 ~ 扩展为 $HOME 的值，并将 ~user 扩展为指定用户的主目录**。此选项在设置值时无效（但您可以从命令行使用 git config bla ~/ 让您的 shell 进行扩展）。

术语“扩展”没有出现在任何不同的上下文中`git-config(1)`。那么，鉴于在任何地方都没有记录此类功能，您是怎么想到它应该的呢？

为了扩展环境变量，您必须自己预处理 Git 配置文件，即通过创建模板文件，并在将文件复制到您的`$HOME`目录之前使用脚本扩展变量。

如果是关于点文件管理，那么做所有人都做的事情：把它们放在一个目录中，然后从你的`$HOME`.

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-02-05T10:23:20.177

我在配置中使用 bash 脚本来启用变量扩展。只需在 .bashrc 中导出您需要的变量并在脚本中使用它：

在我的 ~/.bashrc 中：

```
export TESTVARIABLE="hello" 
```

在我的 ~/.gitconfig 中：

```
[alias]
    test = !bash -c '"echo \"Value: $TESTVARIABLE\";"' 
```

在我的 bash 提示符下：

```
bash> git test
    Value: hello 
```

* * *

另一种方法是在 shell 的 rc 中添加一个 git config 命令。例如，我的 .bashrc 中有：

```
git config --global user.name "$USER@$HOSTNAME" 
```

我在所有机器上都有相同的配置，通过添加它，我可以区分来自不同机器的提交。你可以做同样的事情并添加到你的 shell rc：

```
export RC="$HOME/rc"
git config --global core.excludesfile "$RC/globalgitignore" 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2021-01-30T01:05:34.003

使用 Git 2.31（2021 年第一季度），您可能会考虑通过环境变量使用配置变量-值对（它调整了`GIT_CONFIG_PARAMETERS`变量/值对的编码方式，使其也更加健壮）。

请参阅[Patrick Steinhardt ( ) 的](https://github.com/pks-t)[提交 d8d7715](https://github.com/git/git/commit/d8d77153eafdb0fc334e827976f09e4bdff26b58)、[提交 b9d147f](https://github.com/git/git/commit/b9d147fb150c5e0960bc43ad5f3f843487f816f7)、[提交 1ff21c0](https://github.com/git/git/commit/1ff21c05ba99ed2d0ade8318e3cb0c1a3f8d4b80)、[提交 b342ae6](https://github.com/git/git/commit/b342ae61b3658ed4c062a27f8e46ea79c38d4197)、[提交 ce81b1d](https://github.com/git/git/commit/ce81b1da230cf04e231ce337c2946c0671ffb303)（2021 年 1 月 12 日）和[提交 b0812b6](https://github.com/git/git/commit/b0812b6ac0776b6e43e8483d5579ffd11d5c5f42)（2021 年 1 月 7 日[）](https://github.com/pks-t)。 请参阅[Jeff King ( ) 的](https://github.com/peff)[提交 f9dbb64](https://github.com/git/git/commit/f9dbb64fadf599c588a39d2251bb3f9a2f7d572a)和[提交 13c4495](https://github.com/git/git/commit/13c44953fb0b396d3594b4a712f956ab3a48169e)（2021 年 1 月 12 日[）](https://github.com/peff)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 294e949](https://github.com/git/git/commit/294e949fa2dfd43097b2b5614470a3e43604663d))^(中，2021 年 1 月 25 日）)[`pks-t`](https://github.com/pks-t)
[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## [`config`](https://github.com/git/git/commit/ce81b1da230cf04e231ce337c2946c0671ffb303): 添加新的方式来传递配置`--config-env`
> 
> ^(合着：Jeff King)
> ^(署名：Patrick Steinhardt)

> 虽然已经可以通过^( ^([man](https://git-scm.com/docs/git#Documentation/git.txt--cltnamegtltvaluegt)) ^)传递运行时配置，但当值包含敏感信息时可能不希望使用它。 例如 ，如果一个人想要设置包含一个身份验证令牌，这样做会通过 eg 轻易泄露这些凭据，这通常也会显示命令参数。[`git -c <key>=<value>`](https://github.com/git/git/blob/ce81b1da230cf04e231ce337c2946c0671ffb303/Documentation/git.txt#L71)
> 
> `http.extraHeader``-c``ps(1)`
> 
> 为了在不泄漏凭据的情况下启用此用例，此提交引入了一个新的 switch `--config-env=<key>=<envvar>`。
> 
> 它不是直接传递给定键的值，而是允许用户指定环境变量的名称。
> 然后该变量的值将用作键的值。

`git`现在在其[手册页](https://github.com/git/git/blob/ce81b1da230cf04e231ce337c2946c0671ffb303/Documentation/git.txt#L16)中包含：

> `[--super-prefix=<path>] [--config-env <name>=<envvar>]`

`git`现在在其[手册页](https://github.com/git/git/blob/ce81b1da230cf04e231ce337c2946c0671ffb303/Documentation/git.txt#L83-L104)中包含：

> ## `--config-env=<name>=<envvar>`
> 
> 就像`-c <name>=<value>`，给配置变量“ `<name>`”一个值，其中`<envvar>`是一个环境变量的名称，从中检索该值。
> 
> 与 `-c`没有直接将值设置为空字符串的快捷方式不同，环境变量本身必须设置为空字符串。
> 
> 如果`<envvar>`环境中不存在 则为错误。`<envvar>`可能不包含等号以避免与`<name>`包含一个的 s 产生歧义。
> 
> 这对于您希望将临时配置选项传递给 git 的情况很有用，但在其他进程可能能够读取您的 cmdline（例如`/proc/self/cmdline`）而不是您的环境（例如）的操作系统上这样做`/proc/self/environ`。
> 该行为是 Linux 上的默认行为，但可能不在您的系统上。
> 
> 请注意，这可能会增加变量的安全性，例如 `http.extraHeader`敏感信息是值的一部分，而不是`url.<base>.insteadOf`敏感信息可以是密钥的一部分。

在您的情况下，使用以下方法对其进行测试：

```
git --config-env=core.excludesfile=RC config core.excludesfile
# or (Git 2.32+ only)
git --config-env core.excludesfile=RC config core.excludesfile 
```

的值`core.excludesfile`应该是`$RC`（它应该引用完整的文件路径，而不仅仅是它的父文件夹）

* * *

注意：在 Git 2.32（2021 年第二季度）之前，“ [`git --config-env var=val cmd`](https://github.com/git/git/blob/5f586f55a02b98d7a2a9c770d33e8170ca563e43/Documentation/git.txt#L83)” ^(（[man](https://git-scm.com/docs/git#Documentation/git.txt---config-envltnamegtltenvvargt)）)*不*被接受（仅`--config-env=var=val`被接受）。

请参阅[Patrick Steinhardt ( ) 的](https://github.com/pks-t)[提交 c331551](https://github.com/git/git/commit/c331551ccf9a4c8922ff5d2987eed9e218479000)、[提交 9152904](https://github.com/git/git/commit/9152904c1162afaf9ce0305d1988d1450dc80da7)（2021 年 4 月 29 日[）](https://github.com/pks-t)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 5f586f5](https://github.com/git/git/commit/5f586f55a02b98d7a2a9c770d33e8170ca563e43))^(中，2021 年 5 月 7 日）)[`pks-t`](https://github.com/pks-t)
^([`gitster`](https://github.com/gitster))

> ## [`git`](https://github.com/git/git/commit/c331551ccf9a4c8922ff5d2987eed9e218479000): 支持单独的 arg`--config-env`的值
> 
> ^(签字人：Patrick Steinhardt)
> ^(审核人：Jeff King)

> 虽然没有这样记录，但许多顶级选项都喜欢`--git-dir`并`--work-tree`支持两种语法：它们接受选项及其值之间的等号，并且它们支持将选项和值作为两个单独的参数。
> 最近添加的`--config-env`选项仅支持带等号的语法。
> 
> 通过接受这两种语法并添加测试来验证这两种工作，来缓解这种不一致。

* * *

但还有更多，仍然是 Git 2.31：

> ## [`config`](https://github.com/git/git/commit/d8d77153eafdb0fc334e827976f09e4bdff26b58): 允许通过 envvar 对指定配置条目
> 
> ^(签字人：Patrick Steinhardt)

> 虽然我们目前拥有`GIT_CONFIG_PARAMETERS`可用于将运行时配置数据传递给 git 进程的环境变量，但它是内部实现细节，不应由最终用户使用。
> 
> 除了仅供内部使用之外，这种传递配置条目的方式还有一个主要缺点：需要解析配置键，因为它们在单个变量中包含键和值。
> 因此，用户可以转义值中的任何潜在有害字符，如果值由第三方控制，则很难做到这一点。
> 
> 因此，此提交添加了一种通过环境添加配置条目的新方法，从而消除了此缺点。
> 如果用户传递`GIT_CONFIG_COUNT=$n`环境变量，Git 将解析环境变量对，`GIT_CONFIG_KEY_$i`并`GIT_CONFIG_VALUE_$i`为`i`.`[0,n)`
> 
> ^(虽然使用() ^([man](https://git-scm.com/docs/git#Documentation/git.txt--cltnamegtltvaluegt)) ^)也可以实现相同的效果，但对于潜在的敏感信息可能不希望这样做。 例如 ，如果一个人想要设置包含一个身份验证令牌，这样做会通过 eg 轻易泄露这些凭据，这通常也会显示命令参数。[`git -c <name>=<value>`](https://github.com/git/git/blob/d8d77153eafdb0fc334e827976f09e4bdff26b58/Documentation/git.txt#L71)
> 
> `http.extraHeader``-c``ps(1)`

`git config`现在在其[手册页](https://github.com/git/git/blob/d8d77153eafdb0fc334e827976f09e4bdff26b58/Documentation/git-config.txt#L340-L355)中包含：

> ## `GIT_CONFIG_COUNT`
> 
> ## `GIT_CONFIG_KEY_<n>`
> 
> ## `GIT_CONFIG_VALUE_<n>`
> 
> 如果`GIT_CONFIG_COUNT`设置为正数，则所有环境对 `GIT_CONFIG_KEY_<n>`以及`GIT_CONFIG_VALUE_<n>`不超过该数字的所有环境对都将添加到进程的运行时配置中。
> 
> 配置对是零索引的。
> 任何缺少的键或值都被视为错误。空`GIT_CONFIG_COUNT`的被视为与 相同`GIT_CONFIG_COUNT=0`，即不处理任何对。
> 这些环境变量将覆盖配置文件中的值，但会被通过`git -c`.
> 
> 这对于您想要使用通用配置生成多个 git 命令但不能依赖于配置文件的情况很有用，例如在编写脚本时。

例如：

```
 GIT_CONFIG_COUNT=2 \
        GIT_CONFIG_KEY_0="pair.one" GIT_CONFIG_VALUE_0="foo" \
        GIT_CONFIG_KEY_1="pair.two" GIT_CONFIG_VALUE_1="bar" \
        git config --get-regexp "pair.*" 
```

将打印：

```
pair.one foo
pair.two bar 
```

# tridion - 如何使用功能区工具栏按钮重定向到 Tridion 中的不同页面？

> ID：11262011
> 
> 赞同：1
> 
> 时间：2012-06-29T12:44:08.077
> 
> 标签：tridion, tridion-2011

我正在实现功能区工具栏按钮。根据架构名称单击按钮时，我需要使用相应的 url（Aspx 页面）创建弹出窗口。以前我只使用一个 aspx 页面并且我成功了，我创建了一个与 aspx 页面同名的弹出 java 脚本文件并在配置文件中配置它。但是在多个 aspx 页面的情况下，即使我创建了多个弹出 javascript 文件。它不会调用受尊重的 javascript 文件。

> 如果有多个 aspx 页面，如何将弹出的 java 脚本文件映射到 aspx 页面？

PFB 代码示例。

```
Button java script file code fragment:

if (some condition) {
         //Creating the url    
         var url = "Editors/RTFExtension/Popups/ButtonReferencePopup_2.aspx?schemaId='" + schemaId + "'";
         var popup = $popup.create(url, "toolbar=no,width=500,height=200,resizable=yes,scrollbars=yes", null);
}
else{
        //Creating the url    
        var url = "Editors/RTFExtension/Popups/ButtonReferencePopup.aspx?schemaId='" + schemaId + "'";
        var popup = $popup.create(url, "toolbar=no,width=500,height=200,resizable=yes,scrollbars=yes", null);
}

Config file code fragment:

<cfg:group name="RTFExtension.ButtonReference">
        <cfg:fileset>          
          <cfg:file type="script">/Popups/ButtonReferencePopup.js</cfg:file>
          <cfg:file type="script">/Popups/ButtonReferencePopup_2.js</cfg:file>
          <cfg:file type="style">/Themes/ButtonReference.css</cfg:file>
        </cfg:fileset>       

        <cfg:dependencies>
          <cfg:dependency>Tridion.Web.UI.Controls</cfg:dependency>
          <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
          <cfg:dependency>Tridion.Web.UI.Editors.CME.commands</cfg:dependency>
        </cfg:dependencies>
</cfg:group> 
```

请帮我解决这个问题。提前致谢。早期反应表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:08:50.967

我相信您需要为每个配置配置不同的组 - 如下所示：

```
<cfg:group name="RTFExtension.ButtonReference.Popup1">
    <cfg:fileset>          
      <cfg:file type="script">/Popups/ButtonReferencePopup.js</cfg:file>
      <cfg:file type="style">/Themes/ButtonReference.css</cfg:file>
    </cfg:fileset>       

    <cfg:dependencies>
      <cfg:dependency>Tridion.Web.UI.Controls</cfg:dependency>
      <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
      <cfg:dependency>Tridion.Web.UI.Editors.CME.commands</cfg:dependency>
    </cfg:dependencies>
</cfg:group>

<cfg:group name="RTFExtension.ButtonReference.Popup2">
    <cfg:fileset>          
      <cfg:file type="script">/Popups/ButtonReferencePopup_2.js</cfg:file>
      <cfg:file type="style">/Themes/ButtonReference.css</cfg:file>
    </cfg:fileset>       

    <cfg:dependencies>
      <cfg:dependency>Tridion.Web.UI.Controls</cfg:dependency>
      <cfg:dependency>Tridion.Web.UI.Editors.CME</cfg:dependency>
      <cfg:dependency>Tridion.Web.UI.Editors.CME.commands</cfg:dependency>
    </cfg:dependencies>
</cfg:group> 
```

在您的弹出代码隐藏中，您需要引用相关组：

```
namespace Button.Reference.Popups
{
    [ControlResourcesDependency(new Type[] { typeof(Popup), typeof(Tridion.Web.UI.Controls.Button), typeof(Stack), typeof(Dropdown), typeof(List) })]
    [ControlResources("RTFExtensions.ButtonReference.Popup1")]
    public partial class PopupReference1 : TridionPage 
```

或者：

```
namespace Button.Reference.Popups
{
    [ControlResourcesDependency(new Type[] { typeof(Popup), typeof(Tridion.Web.UI.Controls.Button), typeof(Stack), typeof(Dropdown), typeof(List) })]
    [ControlResources("RTFExtensions.ButtonReference.Popup2")]
    public partial class PopupReference2 : TridionPage 
```

# php - 在 1 个查询中对 Sum & Count 列求和还是使用 PHP？

> ID：11262014
> 
> 赞同：0
> 
> 时间：2012-06-29T12:44:23.397
> 
> 标签：php, mysql

认为我的问题是我试图在同一个查询中求和一个计数，这可以在 php 中实现以避免这种情况吗？Records 列显示记录数，而 Costs 对成本求和，这很好用，但我想然后对这两个列进行求和以显示总计？

```
Select
  tblcontacts.ContactFullName As Name,
  Count(tblcases.CaseID)As Records,
  Sum(tblcases.CaseCommission) As Costs
From
  tblcontacts Inner Join
  tblcases On tblcontacts.ContactID =
    tblcases.ContactAssignedTo
Group By
  tblcontacts.ContactFullName 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T12:50:42.190

如果不添加另一个查询并执行`UNION`其中一个查询，则无法在 MySQL 中执行此操作，例如：

```
Select
  tblcontacts.ContactFullName As Name,
  Count(tblcases.CaseID)As Records,
  Sum(tblcases.CaseCommission) As Costs
From
  tblcontacts Inner Join
  tblcases On tblcontacts.ContactID =
    tblcases.ContactAssignedTo
Group By
  tblcontacts.ContactFullName

UNION ALL

Select
  '--GRAND-TOTAL--',
  Count(tblcases.CaseID),
  Sum(tblcases.CaseCommission)
From
  tblcontacts Inner Join
  tblcases On tblcontacts.ContactID =
    tblcases.ContactAssignedTo 
```

然而，在这种情况下，在 PHP 中计算总计可能会获得更好的性能，可能同时迭代行以构建表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:20:14.083

最后使用`With RollUp`。单次扫描表，所以它是面向性能的。

```
Select
  tblcontacts.ContactFullName As Name,
  Count(tblcases.CaseID)As Records,
  Sum(tblcases.CaseCommission) As Costs
From
  tblcontacts Inner Join
  tblcases On tblcontacts.ContactID =
    tblcases.ContactAssignedTo
Group By
  tblcontacts.ContactFullName
WITH RollUP 
```

[请参阅此处了解更多详情](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:09:04.973

如果您在 PHP 中循环显示要显示的结果集，则可以在循环时对列求和。

例如

```
$sql = "your SQL here";

$query = mysql_query($sql);

$sum_records = $sum_costs = 0;

while ($r = mysql_fetch_object($query))
{
    // your other code here for whatever you're doing with the results
    $sum_records += $r->Records;
    $sum_costs += $r->Costs; 
}

// Now you have the two totals in $sum_records and $sum_costs. 
```

# css - IE8 li:hover，在 li 项之间的边距上触发悬停？

> ID：11262016
> 
> 赞同：2
> 
> 时间：2012-06-29T12:44:26.690
> 
> 标签：css, internet-explorer-8, hover

第一个菜单项有一个下拉子菜单，应该显示在 li:hover 上。但是，由于某种原因，悬停在任何 li 之间的边距会导致子菜单显示，我不知道为什么。它以兼容模式在 Chrome 和 IE 中运行，但不适用于 IE8。

这是显示子菜单的 CSS 行：

```
.menu li:hover ul {
    display: block;
    position: absolute;
    margin: 0;
    padding: 0; 
    } 
```

对我来说，这意味着每当您将鼠标悬停在一个 li 上时，都使用以下样式设置其任何子 ul 的样式。为什么这会在没有嵌套 ul 的 li 之间的边距上触发？

这是菜单的整个 CSS 以防万一：

```
.menu {
font-weight: normal;
font-size: 1.1em;
margin-top: 5px;
padding: 5px 0 0 0;
font-family: OswaldLight;
display: table;
margin: 0 auto;
}

.menu li {
list-style: none;
float: left; 
margin-right: 10px;
}

.menu li a {
display: block;
text-decoration: none; 
padding:5px;
color:@navbar-text;
background:@navbar;
text-decoration:none;
}

.menu li ul {
display: none; 
background-color: @navbar;

}

.menu li ul li {
margin: 0;
}

.menu li a:hover {
color: @navbar-text-highlight;
background-color: @navbar-highlight; 
}

.menu li:hover ul {
display: block;
position: absolute;
margin: 0;
padding: 0; 
}

.menu li:hover li {
float: none; 
}

.menu li:hover li a {
background-color: @navbar;
color: @navbar-text;
}

.menu li li a:hover {
color: @navbar-text-highlight;
background-color: @navbar-highlight; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:57:17.650

对于任何想知道的人，问题出在 .menu 类中的“display:table”。.menu 类被分配给父 UL，而 IE8 不知道如何处理它。我删除了那条线，在父级周围添加了一个父级，并给出了“display:table”，它似乎解决了这个问题。我使用“display:table”的原因是为了清除我的浮动，但允许我使用“margin：0 auto”轻松地将包含的浮动居中，这似乎是我找到的将浮动容器居中的最佳解决方案.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:42:30.143

它可能与子菜单的 ul 宽度有关，我将不得不进一步研究它，但很可能这是 IE 中的宽度问题

更新：看来你修好了

# jquery - 如果响应是数组，则 knockoutjs 锚点单击导致页面滚动到顶部

> ID：11262018
> 
> 赞同：0
> 
> 时间：2012-06-29T12:44:33.057
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, knockout.js

我看到一些非常奇怪的行为。我有两个锚标签，都有数据绑定的点击事件，都发出 ajax 请求。在一种情况下，如果响应是一个数组，则单击将导致页面滚动到顶部。在另一种情况下，如果响应不是数组，则单击根本不会导致页面滚动。

这是我的2个案例

```
<a data-bind="click: click1">click 1</a>  # scrolls to top
<a data-bind="click: click2">click 2</a>  # does not scroll

# javascript
function ViewModel() {
  var self = this; 

  self.click1 = function(data, event) {
    $.ajax({
      url: "/movies",     // returns array of movies, scrolls to top
      dataType: 'json',
      success: function(data, status, xhr) {
        movie_list = JSON.parse(xhr.responseText);
        self.movies(movie_list);
      }
  }

  self.click2 = function(data, event) {
    $.ajax({
      url: "/movies/1",   // returns just one movie, does not scroll
      dataType: 'json',
      success: function(data, status, xhr) {
        movie_details = JSON.parse(xhr.responseText);
        self.movies(movie_details);
      }
  }
}

ko.applyBindings(new ViewModel()); 
```

知道如何阻止第一个案例导致页面滚动到顶部吗？

# excel - 双击自动填充 - 基于相邻单元格动态

> ID：11262019
> 
> 赞同：2
> 
> 时间：2012-06-29T12:44:35.053
> 
> 标签：excel, vba, double-click

我需要去做：

![Excel 自动填充](../Images/fa7c8273669605a5a9f32921565e40f5.png)

我在 Excel 中使用正常的自动填充功能（双击单元格侧面的点）将内容复制到子单元格，所以在这种情况下，单击单元格 A1 中的点将执行此操作：

![在此处输入图像描述](../Images/825fe9cc832ac4604260bc2ab36b8d09.png)

我需要一个脚本，它将在整个列中重复该过程，直到相邻单元格中没有更多值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T15:42:55.450

您可以通过键盘执行此操作...

*   选择 A 列
*   选择*首页 | 查找和选择 | Goto Special... 空白OK*
*   按 [=] [向上箭头] [ctrl+Enter]

要删除公式，请选择 A 列，复制并粘贴特殊值。

![在此处输入图像描述](../Images/55221bd65323cc1a17e5ed7fd80b4a57.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T13:08:53.923

大概这就是你要找的东西：

```
Option Explicit
Sub FillInTheBlanks()
    Dim StartCell As Range, EndCell As Range
    Set StartCell = ActiveCell
    Set EndCell = ActiveSheet.Cells(ActiveSheet.UsedRange.Rows.Count + 1, StartCell.Offset(0, 1).Column).End(xlUp)

    Dim currentText As String
    Dim i As Long
    For i = StartCell.Row To EndCell.Row
        If Not IsEmpty(ActiveSheet.Cells(i, StartCell.Row)) Then
            currentText = ActiveSheet.Cells(i, StartCell.Row).Text
        Else
            ActiveSheet.Cells(i, StartCell.Row).Value = currentText
        End If
    Next i
End Sub 
```

该代码执行以下操作：

![在此处输入图像描述](../Images/b47de9df938aceeb5e81d5c5955e8f46.png)

* * *

如果您真的想要屏幕截图中的内容，那么您需要这样做：

```
Option Explicit
Sub FillInTheBlanks()
    Dim StartCell As Range, EndCell As Range, NextCell As Range
    Set StartCell = ActiveCell
    Set EndCell = Cells(ActiveSheet.UsedRange.Rows.Count + 1, StartCell.Offset(0, 1).Column).End(xlUp)

    While StartCell.Row < EndCell.Row
        Set NextCell = StartCell.Offset(1, 1).End(xlDown).Offset(0, -1)
        StartCell.AutoFill Destination:=ActiveSheet.Range(StartCell, NextCell), Type:=xlFillDefault
        Set StartCell = NextCell.Offset(1, 0)
    Wend
End Sub 
```

这样做：

![在此处输入图像描述](../Images/beb0b4fa0cc8f398b40649d73930c0af.png)

# jquery - 数组值求和并作为点击参数传递

> ID：11262026
> 
> 赞同：0
> 
> 时间：2012-06-29T12:44:52.740
> 
> 标签：jquery

我有一个值数组，用于创建列表项，然后将其附加到有序列表中。

我想要的是创建一个单击函数，该函数根据列表中项目的顺序传递这些值的总和（即，如果您单击列表中的第 3 个项目，它会汇总所有前面的值并将总和传递给一个变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:49:55.160

```
var jList = $("#bargraph ul").attr('class', 'bars'); 
```

我不认为这是你想要的，它试图将属性“class”设置为“bars”。如果你想添加一个类，你应该使用[addClass](http://api.jquery.com/addClass/)。要选择使用类，您可以这样做：

```
var jList = $(".bars"); 
```

并且可以组合选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:52:42.497

所以只需遍历你的数组，对值求和。我们只需要知道 intIndex 就可以做到这一点，而不是 objValue。

```
var jList = $("#bargraph ul").addClass('bars');

// for each item in your array, create an LI
$.each(datas,function(intIndex, objValue){
    var intSum = 0, i = 0;

    for (i; i < intIndex; i++) {
        // just to make sure you don't try and access an array value out of bounds
        if (i >= datas.length) {
            break;
        }

        intSum += datas[intSum];
    }

    jList.append($("<li>"+"</li>").addClass('bar'+intIndex).css('height', objValue).attr('data-sum', intSum));
});

// for each LI, add an event listener
$("#bargraph li").on('click', function(e) {
    // here's your value
    currentSlide = $(this).attr('data-sum');
}); 
```

回想起来，有更好的方法来做到这一点。我宁愿将所有逻辑移至事件侦听器以计算总和。在这种情况下，您可以使用 jquery 选择器来获取所有 LI 的数组，循环遍历它们直到到达当前的，并将它们的高度属性相加。但就目前而言，这应该可行。

# xcode - XCode 4.3 and SVN

> ID：11262027
> 
> 赞同：0
> 
> 时间：2012-06-29T12:44:54.567
> 
> 标签：xcode, svn, repository

I'm new to iOS developing, I haven't used earlier versions of XCode.

Yet I have stored my project on my local hd. Now I want to use some online subversion service.

I cannot seem to find the appropriate options in XCode. The hints that I googled all refer to a menu called SCM which I don't seem to have.

I created a new and empty repository online (webbased) and tried to configure XCode to use it by selecting the "Connect to a repository" menu when xcode starts. After some tweeking in the command line this "connect to a repository" succeeded but afterwards XCode simply closed itself again.

I tried copying the files that belong to my project to the path that I set up to be used with SVN manually. I opened the project in XCode from that path and after adding another file wanted to commit that change but couldn't find how to do that from within XCode.

Now I found that in XCode / Organizer / Repositories / MyProject is listed but has the type "GIT", which is wrong.

Do I have to change the repository type to SVN instead of GIT? If so, how can I?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:08:38.233

创建项目时，可以选择将项目置于源代码控制之下。此选项创建一个 git 存储库并默认选中。

要使用 SVN，您必须将项目导入 SVN 存储库。（而且您可能不希望它同时位于 git 和 svn 下，因此您要么删除 .git 文件夹，要么在不选择 scm 选项的情况下重新创建项目。）将项目导入到您的存储库后您确保 Xcode 知道存储库，并且您可以检查项目。

* * *

但实际上我建议只使用 Git。它是一个现代的版本控制系统，有很多不错的功能（尽管做很多不寻常的事情需要使用命令行），并且有很多不错的项目托管网站，比如[GitHub](http://github.com)。我不认为 SVN 与 git 相比非常好。

# javascript - cz ccTLD 域正则表达式验证

> ID：11262030
> 
> 赞同：1
> 
> 时间：2012-06-29T12:45:05.100
> 
> 标签：javascript, regex

我有这个正则表达式`/^([a-z0-9]([a-z0-9-]*[a-z0-9])*){1,60}\.cz$/i`。

规则：

1.  域名只能包含字符 [az,0-9,-]
2.  最大域名长度不超过 63 个字符
3.  域名不得以“-”字符开头或结尾
4.  域名不得连续包含两个字符“-”

我需要用最后一条规则（javascript）完成这个正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:50:49.790

> 域名不得连续包含两个字符“-”

一种简单的[方法](http://www.regular-expressions.info/lookaround.html)就是`(?!.*--)`在`^`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T12:51:22.543

使用正则表达式`/^(?!.{64})[a-z0-9]+(\-[a-z0-9]+)*\.cz$/i`

# view - kohana 从什么控制器查看？

> ID：11262031
> 
> 赞同：0
> 
> 时间：2012-06-29T12:45:10.923
> 
> 标签：view, controller, kohana, verification

我有一个可以从一个控制器的 3 个动作中的任何一个调用的视图。但是，该视图应该会略有不同，具体取决于导致它的操作（它应该显示 3 个图标或 2 个或一个，具体取决于调用的操作）。我可以在视图中检查导致它的操作，以便我可以使用 if 语句检查是否显示每个图标？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:38:56.017

当然，您可以`action`直接将值传递给视图：

```
$this->template->action = Request::current()->action(); 
```

但是 View 不应该对属性一无所知`Request`，它是一个控制器逻辑。我建议您从您的操作中传递特殊标志：

```
public function action_show1()
{
    // show only one icon
    $this->template->icons = array('first');
}

public function action_show2()
{
    // show another two icons
    $this->template->icons = array('second', 'third');
}

public function action_showall()
{
    // show all icons
    $this->template->icons = array('first', 'second', 'third');
} 
```

或者为每个图标设置特殊标志（变量）。

# asp.net-mvc - MVC ViewBag 最佳实践

> ID：11262034
> 
> 赞同：33
> 
> 时间：2012-06-29T12:45:15.987
> 
> 标签：asp.net-mvc, razor, viewbag

对于 ViewBag，我听说它是​​禁止使用的。我会假设应该将 ViewBag 中的内容合并到视图模型中？

问题：

1.  我的假设是否高于最佳实践。（不要使用 ViewBag，其次要在视图模型中使用它）

2.  是否存在绝对需要 ViewBag 的情况？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-29T12:50:40.243

ViewBag 是一个动态字典。因此，当使用 ViewBag 在操作方法和视图之间传输数据时，如果您在尝试访问视图中的 ViewBag 项时在代码中出现拼写错误，您的编译器将无法捕捉到。您的视图将在运行时崩溃:(

通常，使用视图模型在您的操作方法和视图之间传输数据是一个好主意。视图模型是一个简单的 POCO 类，它具有特定于视图的属性。因此，如果您想向视图传递一些额外的数据，请向您的视图模型添加一个新属性并使用它。强类型视图使代码更清晰，更易于维护。使用这种方法，您不需要来回将您的 viewbag 字典项显式转换为某些类型，而这与 view bag 相关。

```
public class ProductsForCategoryVm
{
  public string CategoryName { set;get; }
  public List<ProductVm> Products { set;get;}    
}
public class ProductVm
{
  public int Id {set;get;} 
  public string Name { set;get;}
} 
```

在您的操作方法中，创建此视图模型的对象，加载属性并将其发送到视图。

```
public ActionResult Category(int id)
{
  var vm= new ProductsForCategoryVm();
  vm.CategoryName = "Books";
  vm.Products= new List<ProductVm> {
     new ProductVm { Id=1, Name="The Pragmatic Programmer" },
     new ProductVm { Id=2, Name="Clean Code" }
  }
  return View(vm);
} 
```

而你的视图，它是视图模型的强类型，

```
@model ProductsForCategoryVm
<h2>@Model.CategoryName</h2>
@foreach(var item in Model.Products)
{
    <p>@item.Name</p>
} 
```

# 下拉数据？

许多教程/书籍都有代码示例，它们使用 ViewBag 来获取下拉数据。我个人还是觉得 ViewBag 的不应该用于这个。它应该是`List<SelectListItem`视图模型中类型 > 的属性来传递下拉数据。这是一篇包含如何做到这一点的示例代码的[帖子。](https://stackoverflow.com/questions/12394399/mvc3-dropdown-list-from-array/12394715#12394715)

> 是否存在绝对需要 ViewBag 的情况？

在一些有效的用例中，您可以（*不必要*）使用 ViewBag 发送数据。例如，您想在 Layout 页面上显示某些内容，您可以使用 ViewBag 来实现。另一个例子是`ViewBag.Title` *（对于页面标题*）出现在默认 MVC 模板中。

```
public ActionResult Create()
{
   ViewBag.AnnouncementForEditors="Be careful";
   return View();
} 
```

在布局中，您可以阅读`ViewBag.AnnouncementForEditors`

```
<body>
<h1>@ViewBag.AnnouncementForEditors</h1>
<div class="container body-content">
    @RenderBody()
</div>
</body> 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-29T13:31:37.060

> 1）我的假设是否高于最佳实践。（不要使用 ViewBag，其次要在视图模型中使用它）

您应该尽可能使用视图模型而不是通过 ViewBag 传递数据。

> 2) 是否存在绝对需要 ViewBag 的情况？

没有绝对需要 ViewBag 的情况。但是，有一些数据我个人更喜欢使用 ViewBag 而不是 View Model。例如，当我需要为预定义值（即城市）填充下拉框时，我使用 ViewBag 来携带 SelectListItem 数组进行查看。我不想用这些数据污染我的 ViewModel。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-29T12:49:46.650

> 1）我的假设是否高于最佳实践。（不要使用 ViewBag，其次要在视图模型中使用它）

是的。

> 2) 是否存在绝对需要 ViewBag 的情况？

不。您存储在 ViewBag 中的所有内容都可以进入传递给视图的视图模型。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-29T12:54:37.813

ViewBags 的问题和推荐的最佳实践归结为编译时检查。ViewBags 只是字典，你会得到“神奇”的字符串，所以如果你最终改变了一个 viewbag 项目的对象类型或键名，你直到运行时才会知道，即使你使用`<MvcBuildViews>true</MvcBuildViews>`.

坚持使用视图模型是最好的，即使您必须不时更改它们以适应特定视图。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-29T18:44:59.080

我发现 ViewBag 有一些用途，其中所有页面都有通用功能，并且功能不依赖于显示的页面。例如，假设您正在构建 StackOverflow。工作板出现在每个页面上，但显示的工作与页面无关（我的用法在概念上相似）。为每个 ViewModel 添加一个属性会很困难而且很耗时，而且会给您的测试带来*很多麻烦。*在这种情况下，我认为不值得。

我已经使用了带有横切数据的基本 ViewModel 类，但是如果您有多个（例如，工作和堆栈交换站点列表），您要么必须开始填充额外的数据，要么对 ViewModel 进行其他一些滥用，另外您需要一个 ViewModel 构建器来填充基础数据。

至于魔弦问题，有很多解决方案。常量、扩展方法等

综上所述，如果您的页面上显示的内容取决于页面的上下文，那么 ViewModel 就是您的朋友。

埃里克

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-29T12:48:49.870

1.  不，使用[ViewModels](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-3)。
2.  不，如果你设计了一个完美的 ViewModel，你就永远不需要 ViewBag。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-17T16:25:28.263

如果您无法重新设计现有的 ViewModel，请使用 ViewBag。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-19T17:42:01.397

我想我会对此发表意见，因为我已经广泛使用了 ViewBag。

使用它的唯一真正好处是用于小型项目，或者在您有一个新项目并且只想让球滚动而不必担心创建大量模型类的情况下。

当您的项目更加成熟时，您可能会发现由于在整个应用程序中使用弱类型而导致的意外行为问题。当出现问题时，逻辑可能会令人困惑、难以测试并且难以排除故障。

实际上，我走的是从我的应用程序中**完全删除 ViewBag**的路线，并通过在尝试使用时抛出编译错误来阻止其他开发人员在同一代码库中使用它，即使在 Razor 视图中也是如此。

这是 GitHub 上的一个示例 ASP.NET 5 项目，我已将其删除：[https ://github.com/davidomid/Mvc5NoViewBag](https://github.com/davidomid/Mvc5NoViewBag)

这是一篇博客文章，我解释了删除它的动机以及解决方案如何工作的解释： [https ://www.davidomid.com/hate-the-aspnet-mvc-viewbag-as-much-as-i-做这里如何删除它](https://www.davidomid.com/hate-the-aspnet-mvc-viewbag-as-much-as-i-do-heres-how-to-remove-it)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-19T02:54:29.473

> 2.是否存在绝对需要ViewBag的情况？

在某些情况下，您需要在布局、视图和部分视图之间共享来自控制器的数据。在这种情况下，ViewBag 非常有帮助，我怀疑有没有更好的方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-13T00:42:05.357

如果没有它的用​​例，它一开始就不会实施。是的，您可以使用 ViewModel 完成所有工作，但如果您真的不需要它怎么办？一种这样的场景是编辑实体。您可以直接将 DTO 作为模型传递。

```
@model CategoryDto
<div class="md-form form-sm">
    <input asp-for="Name" class="form-control">
    <label asp-for="Name">("Category Name")</label>
</div> 
```

但是如果你想选择 Category parent 怎么办？实体 DTO 理想情况下只包含它自己的值，因此要填充选择列表，您可以使用 ViewBag

```
<select asp-for="ParentId" asp-items="ViewBag.ParentList">
    <option value="">None</option>
</select> 
```

为什么要这样做？好吧，如果您有 50 种类型的实体，每种类型都可以从不同的值中进行某种选择，那么您只需避免创建 50 个额外的 ViewModel。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-13T15:16:09.660

冒着在这里打开一罐旧蠕虫的风险，让我提供一点见解。不管什么可能是“最佳实践”，让我提供真实世界的经验，即 ViewBag 的广泛使用可能是琐碎的噩梦来源，很难找到错误和问题，这些问题完全令人讨厌，难以追踪和解决。即使可以为使用 ViewBag 建立一个令人满意的概念或规则，它们也很容易成为初级开发人员的拐杖，以分散注意力并阻止开发适当的强类型 ViewModel。

不幸的是，太多的“教程”YouTube 视频展示了 ViewBags 用于演示目的，并且几乎没有提供关于这种做法何时不适合生产代码的见解。是的，有时使用 ViewBag 可能是解决给定问题的合适解决方案，但可能会导致漫长而曲折的挫折之路和可维护性差。冒着在谨慎的方向上过度纠正的风险，我会鼓励年轻的开发人员*不要*依赖 ViewBag，直到他们获得*更多*的 MVC 经验，自然地了解 ViewModel 何时以及如何有用，然后再开发一个更老练的感觉何时使用 ViewBag 是合适的。

# objective-c - 将标签文本转换为整数

> ID：11262036
> 
> 赞同：0
> 
> 时间：2012-06-29T12:45:35.543
> 
> 标签：objective-c, xcode, animation, uilabel

我创建了一个计数动画，现在我想创建一个包含我的标签文本值的整数，就像这样：如果我的标签显示数字，那么我的整数将等于 1，依此类推.. 我该怎么做? 这是我的代码：

```
-(void)countup
{
    count = 1;
    MainInt += 1;
    numbersLabel.text = [NSString stringWithFormat:@"%i", MainInt];
    NSLog(@"%d", count);

}

-(void)viewdidload
{
 [numbersLabel setOutlineColor:[UIColor whiteColor]];
[numbersLabel setGradientColor:[UIColor blackColor]];
numbersLabel.drawOutline = YES;
numbersLabel.drawDoubleOutline = YES;
numbersLabel.text = @"start";
//numbersLabel.font = [UIFont fontWithName:@"Ballpark" size:220];
numbersLabel.font = [UIFont fontWithName:@"Arial" size:220];

    MainInt = 1;
    numbersTimer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(countup) userInfo:nil repeats:YES];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T12:49:58.150

如果标签只包含数值（或者如果数值在标签中排在第一位），您可以简单地调用`intValue`字符串。

```
int i = label.text.intValue; 
```

相关文档在这里：[https ://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/intValue](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/intValue)

# python - 将带有行号的文件输出为html

> ID：11262038
> 
> 赞同：0
> 
> 时间：2012-06-29T12:45:41.793
> 
> 标签：python, html

我注意到您可以使用 python libdiff 输出并排比较文件及其差异。有没有一种简单的方法可以将python中的一个文件输出为带有行号的html？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T12:56:24.820

[Pygments](http://pygments.org/)支持启用行号[`HtmlFormatter`](http://pygments.org/docs/formatters/)的选项。如果需要，Pygments 还具有许多语言的语法突出显示功能，并且它负责转义 HTML 元字符。（对于行号，只有 Pygments 可能是矫枉过正。）`linenos`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T12:49:48.603

取决于文件，但有一个文本文件：

```
f = open(filename)
for num, line in enumerate(f):
    print "<span style=\'display: inline-block;width: 50px;\'>" + str(num+1) + "</span>" + line + "<br/>" 
```

# c# - 使用 Quartz.NET 进行 MVC3 webapp 任务调度

> ID：11262041
> 
> 赞同：3
> 
> 时间：2012-06-29T12:45:46.003
> 
> 标签：c#, .net, asp.net-mvc, quartz.net, .net-remoting

在 MVC3 Webapp 中安排任务时，我需要您的建议。

我的任务是为 webapp 中的不同服务创建一些通用调度程序，以便以后在开发中使用。例如，我们有一些可用的任务，用户可以随时安排。

我不想重新发明轮子，并找到了可用于创建调度程序的 Quartz.Net 库。

我知道在 webapp 中托管调度不是一个好主意，因为 webserver 可以回收应用程序池等，所以我决定在 Windows 服务中使用它，然后使用 Quartz.NET 远程处理功能在我的 webapp 中触发任务。

但我发现了一些问题。如果我错了，请纠正我，但是当我尝试使用 Quartz.NET 远程处理时，它会在 Windows 服务进程中运行该作业，这意味着它需要了解我的 webapp 中的所有类型，因此 webapp 的所有程序集应该被它引用，我需要另一个数据库配置文件等。所以如果我写新的作业类，我不能轻易安排它，我需要停止服务并为它更新库，所以这不是很通用的方法。

我找不到 Quartz.NET 只能基于其接口运行作业的任何信息。

所以我想出了编写自己的调度程序的想法，它将托管在 Windows 服务中，并且将具有一些将在 webapp 中实现的 IJob 接口。我还将通过 IPC 通道使用 .Net 远程处理。所以 webapp 就像 .Net Remoting Server，当我想添加一些新作业然后安排它时，我只需要编写实现 IJob 接口的新作业。我将其注册为

```
 IpcChannel channel = new IpcChannel("CurrentIPC");

        ChannelServices.RegisterChannel(channel);

        RemotingConfiguration.RegisterWellKnownServiceType(
            typeof(SimpleJob), "SimpleJob", WellKnownObjectMode.SingleCall);
        RemotingConfiguration.RegisterWellKnownServiceType(
            typeof(ComplexObject), "ComplexObject", WellKnownObjectMode.SingleCall); 
```

在这种情况下，我将注册两种工作类型。然后在调度作业时，我将传递类的名称，在代表客户端的 Windows 服务端（在 webapp 端执行对象），我只需将传递的类名称与 IJob 绑定，如下所示：

```
Dictionary<string, IJob> jobs = new Dictionary<string, IJob>();
    void AddJob(string name)
    {
        IJob obj = (IJob)Activator.GetObject(typeof(IJob), string.Format("ipc://CurrentIPC/{0}", name));
        jobs.Add(name, obj);
    } 
```

所以现在我不需要担心对我的应用程序和其他东西的引用，调度程序会在不知道任何事情的情况下完成它的工作，只需要 IJob 接口并在 webapp 端执行任务。

如果我错了或者它太复杂了，还有其他一些更简单的方法可以做到这一点，或者有一些我不知道的陷阱，你能帮我吗？谢谢你。

PS 还有一个想法是有一个单独的调度程序，它将通过执行 Web 应用程序中指定服务的链接直接运行 Web 应用程序方法，例如“http://localhost:3030/Request/12”，仅此而已，但是在我的网络应用程序中，您应该被授权执行此类请求，并且我们再次遇到需要解决的问题，并且在数千个计划任务的情况下，我们将对此类请求的网络服务器产生额外的负载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:23:15.013

我认为您走在正确的轨道上，由于应用程序池回收问题，我将使用 Quartz.NET 创建调度程序并将其托管在 Windows 服务中。

它将使用特定 URL:s 为您的 Web 应用程序或单独的 Web 服务实例中的每个任务/服务触发 Web 应用程序中的任务/服务。

使用这种分离，调度程序只需要知道 url 和调度，而不需要直接引用您的应用程序。这也可以在未来的项目中重复使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T07:16:38.743

我想有点晚了，但仍然对其他人有用。

这是一个我花了很多时间处理的项目，它似乎满足了大部分的要求——事实上，我几乎只将它用于问题中描述的回调工作。这也是我们内部使用的，所以我会尽量保持更新。

[http://backgroundworker.codeplex.com/](http://backgroundworker.codeplex.com/)

它与 Quartz 非常相似，但更侧重于管理工作及其数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T07:39:10.353

> 我知道在 webapp 中托管调度不是一个好主意，因为 webserver 可以回收应用程序池等，**所以我决定在 Windows 服务中使用它**...

为什么复杂？为什么不让它变得简单，并使用外部服务在一段时间内运行 webhook？

我使用了这项服务，我很高兴，虽然它很容易，我可以根据这个简单的过程创建自己的服务：

> [http://momentapp.com/](http://momentapp.com/)

简化通话：

```
private void Run() {
     try {
        var work = RequestNewMessage();  // get work
        ProcessWork(work);  // process work
        // Log work 
     }
     catch(Exception ex) {
        // Log Error
     }
     finally {
        // set job for now plus1 minute
        SetRecuringJob(DateTime.UtcNow.AddMinute(1)); 
     }
}

private void SetRecuringJob(DateTime dt) {
    PostJob("https://momentapp.com/jobs/new?job[at]={0:s}&job[method]=POST&job[uri]=http://yourapp.com/", dt);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T22:37:48.910

我可能缺少一个要求，但由于您似乎能够安装自定义服务，听起来您可以完全控制那台机器。因此，您不妨为您的重复性工作安排一个 Windows 任务，这应该为重复性任务提供一个非常坚实的基础。

然后，您可以安排一个 VB 脚本来及时加载 URL，如下所示：http: [//4rapiddev.com/internet/call-or-open-a-web-page-url-by-using-windows-task -调度程序或cronjob/](http://4rapiddev.com/internet/call-or-open-a-web-page-url-by-using-windows-task-scheduler-or-cronjob/)

当然，从批处理文件到 powershell 到自定义可执行文件，任何事情都会发生。

这种方法的好处：

*   您可以依赖默认操作系统行为来了解操作系统擅长的方面：调度 :)
*   管理员已经有了一个 UI（尽管不是 Web UI）
*   你没有依赖，但操作系统

可能的缺点：

*   如果您想向用户公开它，您必须围绕它构建自己的 Web 管理（例如，使用其中之一作为基础： http: [//www.codeproject.com/Articles/2407/A-New-Task-Scheduler -Class-Library-for-NET](http://www.codeproject.com/Articles/2407/A-New-Task-Scheduler-Class-Library-for-NET)或[http://taskscheduler.codeplex.com/](http://taskscheduler.codeplex.com/)）。
*   如果最终用户能够操纵任务，安全性可能是一个问题
*   对失败或超时发生的情况的细粒度控制较少（不确定问题有多大，因为您还可以操纵调度程序如何处理这些问题）

编辑：我似乎确实错过了身份验证的要求，但是当您使用 Windows 时，您可以允许在应用程序的某个区域内进行 Windows 身份验证。而且因为您使用*的是*经过 Windows 身份验证的计划任务，所以您已经涵盖了这一点。我从未在 ASP.NET 应用程序中大量使用 Windows 身份验证，但您甚至可以只使用自定义配置而无需额外编程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T07:51:59.817

如果您的问题是您不想从 WindowService 引用整个 Web 应用程序，并且我同意这一点，那么您为什么不简单地创建一个实用程序 dll 来实现能够通过普通 http url 调用您的 Web 应用程序的通用作业并将“动作”实现为 WCF REST 服务？我认为这将清理一些架构并保持组织中的调度程序服务绝缘（和可重用）。

# android - Maven Android 集成错误

> ID：11262042
> 
> 赞同：1
> 
> 时间：2012-06-29T12:45:47.100
> 
> 标签：android, maven, pom.xml

我是Maven的初学者。请考虑这一点。我想将 Maven 用于我的 Android 项目。为此，我按照以下步骤完成了步骤：

*   [http://rgladwell.github.com/m2e-android/](http://rgladwell.github.com/m2e-android/) 和
*   [http://code.google.com/a/eclipselabs.org/p/m2eclipse-android-integration/wiki/GettingStarted](http://code.google.com/a/eclipselabs.org/p/m2eclipse-android-integration/wiki/GettingStarted)

我安装了 Eclipse Helios、Android SDK、ADT-plugin rev 20。我还安装了 Maven 到 Eclipse 插件。我正在使用 Windows 7（32 位）。

这是*父 Pom.xml*：

```
<plugin>
  <groupId>com.jayway.maven.plugins.android.generation2</groupId>
  <artifactId>android-maven-plugin</artifactId>
  <version>3.1.1</version>
  <configuration>
    <sdk>
      <platform>15</platform>
    </sdk>
    <deleteConflictingFiles>true</deleteConflictingFiles>
    <undeployBeforeDeploy>true</undeployBeforeDeploy>
  </configuration>
  <extensions>true</extensions>
</plugin> 
```

... 安装 Android Maven 集成插件。
但是对于子*pom.xml*，我遇到了错误。

*子 pom.xml*：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
   http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>GROUPID</groupId>
    <artifactId>CHILDID</artifactId>
    <version>1.0</version>
    <packaging>apklib</packaging>

    <parent> <!-- getting error here --->
        <groupId>GROUPID</groupId>
        <artifactId>ARTIID</artifactId>
        <version>1.0</version>
        <relativePath>..</relativePath>
    </parent>
        ......
        ......
    <plugins>
      <plugin>
        <artifactId>ID</artifactId>
          <version>1.1</version>
            <executions>
              <execution> 
                <!-- getting error here --->
              </execution>
      </plugin>
    </plugins> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:47:30.873

我的 pom.xml 在一个 maven android 项目中。它工作正常：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
        <modelVersion>4.0.0</modelVersion>

        <groupId>empresa</groupId>
        <version>1.0.0.BUILD-SNAPSHOT</version>
        <artifactId>maestro-empresas</artifactId>
        <packaging>apk</packaging>
        <name>maestro-empresas</name>

        <properties>
            <maven-android-plugin-version>3.0.0-alpha-13</maven-android-plugin-version>
            <maven-compiler-plugin-version>2.3.2</maven-compiler-plugin-version>
            <com.google.android-version>2.2.1</com.google.android-version>
            <org.springframework.android-version>1.0.0.BUILD-SNAPSHOT</org.springframework.android-version>
            <commons-httpclient-version>3.1</commons-httpclient-version>
            <org.codehaus.jackson-version>1.8.8</org.codehaus.jackson-version>
            <android-platform>8</android-platform>
        </properties>

        <pluginRepositories>
            <pluginRepository>
                <id>oss.sonatype.org-jayway-snapshots</id>
                <name>Jayway OpenSource SNAPSHOTs on Sonatype.org</name>
                <url>http://oss.sonatype.org/content/repositories/jayway-snapshots/</url>
                <snapshots>
                    <enabled>true</enabled>
                </snapshots>
            </pluginRepository>
        </pluginRepositories>

        <build>
            <sourceDirectory>src</sourceDirectory>

            <finalName>${project.artifactId}</finalName>
            <plugins>

                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>${maven-android-plugin-version}</version>
                    <configuration>
                        <sdk>
                            <!-- D:/SW/android-sdks/ -->
                            <!-- <path>${android.home}</path> -->
                            <platform>${android-platform}</platform>
                        </sdk>
                        <emulator>
                            <avd>Android2.2</avd>
                        </emulator>
                        <deleteConflictingFiles>true</deleteConflictingFiles>
                        <undeployBeforeDeploy>true</undeployBeforeDeploy>
                    </configuration>
                    <extensions>true</extensions>
                </plugin>
                <plugin>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>${maven-compiler-plugin-version}</version>
                </plugin>
            </plugins>
        </build>

        <dependencies>
            <dependency>
                <groupId>com.google.android</groupId>
                <artifactId>android</artifactId>
                <version>${com.google.android-version}</version>
                <scope>provided</scope>
            </dependency>

            <dependency>
                <groupId>org.springframework.android</groupId>
                <artifactId>spring-android-rest-template</artifactId>
                <version>${org.springframework.android-version}</version>
            </dependency>

            <dependency>
                <!-- Para json -->
                <groupId>org.codehaus.jackson</groupId>
                <artifactId>jackson-mapper-asl</artifactId>
                <version>${org.codehaus.jackson-version}</version>
            </dependency>
        </dependencies>

        <repositories>

            <repository>
                <id>org.springframework.maven.snapshot</id>
                <name>Spring Maven Snapshot Repository</name>
                <url>http://maven.springframework.org/snapshot</url>
                <releases>
                    <enabled>false</enabled>
                </releases>
                <snapshots>
                    <enabled>true</enabled>
                </snapshots>
            </repository>

            <repository>
                <id>org.springframework.maven.milestone</id>
                <name>Spring Maven Milestone Repository</name>
                <url>http://maven.springframework.org/milestone</url>
                <snapshots>
                    <enabled>false</enabled>
                </snapshots>
            </repository>

            <repository>
                <id>android-rome-feed-reader-repository</id>
                <name>Android ROME Feed Reader Repository</name>
                <url>https://android-rome-feed-reader.googlecode.com/svn/maven2/releases</url>
            </repository>

        </repositories>

    </project> 
```

# blackberry - 如何创建自定义列表字段？

> ID：11262045
> 
> 赞同：-4
> 
> 时间：2012-06-29T12:45:59.043
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

> **可能重复：**
> [如何在 BlackBerry 中自定义 ListField？](https://stackoverflow.com/questions/1872160/how-to-customize-a-listfield-in-blackberry)

嗨朋友我想创建自定义列表字段。并且还想在上面添加图像。

![喜欢这张图片。所以请帮助我如何通过导航点击事件来做到这一点](../Images/17975bd8ec041e4c6380351634633823.png)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:53:18.107

是的，您可以通过实现 ListFieldCallback 以及覆盖 drawListrow 方法来创建自定义列表字段。然后您可以在该方法中创建您的自定义代码。

# objective-c - 从更多标签栏应用程序禁用编辑按钮

> ID：11262046
> 
> 赞同：2
> 
> 时间：2012-06-29T12:46:00.890
> 
> 标签：objective-c, ios, ios5, uitabbarcontroller, uistoryboard

我正在使用 Storyboard 创建一个包含 6 个选项卡的选项卡栏。标签栏是初始视图控制器。我没有为我的 tabbarcontroller 使用任何自定义类。更多选项卡有一个“编辑”按钮。如何删除该按钮？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T13:40:00.483

将 tabBarController 的可定制视图控制器设置为 nil。

```
tabBarController.customizableViewControllers = nil; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T06:26:56.387

最后为我的 TabBarController 创建了一个自定义类并做到了

```
- (void)navigationController:(UINavigationController *)navigationController
      willShowViewController:(UIViewController *)viewController
                    animated:(BOOL)animated {

    UINavigationBar *morenavbar = navigationController.navigationBar;
    UINavigationItem *morenavitem = morenavbar.topItem;
    /* We don't need Edit button in More screen. */
    morenavitem.rightBarButtonItem = nil;
} 
```

那解决了它。

# ios - UIScrollView 内的 UITableViewController 与水平分页

> ID：11262047
> 
> 赞同：6
> 
> 时间：2012-06-29T12:46:02.750
> 
> 标签：ios, uitableview, scrollview, uipagecontrol

这是这种情况：

我需要水平滚动和每个页面内的表格视图。这有点像新闻应用程序，它应该显示来自不同类别的新闻，当在一个水平方向滚动时，在一个类别内它应该显示大约 30 条新闻，当然可以垂直滚动。

我已经成功地完成了我需要的，但是......

我有以下情况：

```
UINavigationController
|__ UIViewController, which contains ScrollView and PageControl
    |__ UITableViewController, which holds data in rows, and is displayed inside parent, which is actually ScollView 
```

我知道这不是一个理想的解决方案，但至少它有效。作为基础，我使用了 Apple 在此[链接](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)上找到的 PageScroll 代码和教程。我没有将简单的 viewController 添加到 ScrollView，而是使用 TableViewController，所以基本上我将 tableController.tableView 添加到 ScrollView。

我也知道，在滚动视图中添加 tableViews 有点像在卡车内添加汽车并驾驶那辆车，但我找不到更合理的方法来做同样的事情。

因此，我需要您对如何使用其他方法来实现这一点的想法。我为此使用了故事板和 iOS 5，现在一切看起来（看起来）都很混乱。

提前感谢，非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T13:04:13.887

几个月前我做了类似的事情，它是这样的：

*   `UINavigationController`
    *   `UIViewController`与`UIScrollView`
        *   `UIViewController`有一个`UITableView`内部（我使用它是因为我只是讨厌`UITablewViewController`）

我遵循了[Apple 关于创建自定义容器的文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AboutViewControllers/AboutViewControllers.html)。如果我没记错的话，在 WWDC 2011 视频部分有一个很棒的视频。我可以自豪地说，代码非常干净且易于理解。

* * *

**答案 1.0**

**一件事是，您是否设法在没有任何黑客攻击的情况下对 tableView 进行了正确的方向处理，或者您不使用它？**

不，在这种情况下我没有，但我相信我可以毫无问题地做到这一点。你看，大多数问题都是在你刚`[self.view addSubView:newViewController.view];`. 您只需添加`UIView`，所有旋转的逻辑都由 newViewController 处理，而不是在控制器中`UIView`。

**另一件事是，如果我要尝试实现 GridView 或类似的东西，对于 iPad，方向处理和动画变得非常难看。**

我在另一个项目中实现了这个，一旦你了解了发生了什么，它就很容易实现：

1.  我将 a`UIViewController`与 a 一起使用，`UITableView`因此我可以从`dequeueReusableCellWithIdentifier:`创建部分标题、表格的页眉和页脚等获得所​​有好处。我只是认为，无论我对 a 做什么，`UIScrollView`总是`UITableView`会更加优化。因为`UITableViewCell's`我只是用了一个有 3 个正方形的支架，每个都是一张图片。（我的应用程序是图片展示）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:58:29.517

[http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizo​​ntal-tables-like-the-pulse-news-app-part-1](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1)

查看上面的链接

# android - 如何在 Android Gridview 中设置背景？

> ID：11262048
> 
> 赞同：0
> 
> 时间：2012-06-29T12:46:04.440
> 
> 标签：android, image, android-layout, gridview, background

我需要在 android gridview 中将图像设置为背景。我有使用图像视图加载图像的代码。以下代码是我的代码，请帮我解决这个问题。

```
public void onCreate(Bundle savedInstanceState) {

    if(!isNetworkAvailbale()){
        Toast.makeText(getApplicationContext(), "Internet Connection not available", Toast.LENGTH_SHORT).show();
        finish();
    }

    super.onCreate(savedInstanceState);
    setContentView(R.layout.gridview);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Log.d("taust","sds");
            Toast.makeText(NuesHoundRSSActivity.this, "Item co" + position, Toast.LENGTH_SHORT).show();
        }
    });

} 
```

图像适配器

```
package com.nues.rss;

import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

public class ImageAdapter extends BaseAdapter {
private Context mContext;

public ImageAdapter(Context c) {
    mContext = c;
}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

   // create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {

    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(150, 150));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(1, 1, 1, 1);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);
   // imageView.setTag(mThumbIds[position]);
    return imageView;
}

// references to our images
private Integer[] mThumbIds = {
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7,
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7,
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7
};

} 
```

任何人都知道如何将图像设置为网格项目的背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:56:54.713

是的，我明白了。您想显示一个自定义 GridView，其背景设置为每个 Grid 元素，并在其上包含一些内容。

第一步是创建一个布局并在自定义适配器的 getView 方法中对其进行膨胀。

这是一个例子，

[http://www.technotalkative.com/android-gridview-example/](http://www.technotalkative.com/android-gridview-example/)

[http://android-vogue.blogspot.in/2011/06/custom-gridview-in-android-with.html](http://android-vogue.blogspot.in/2011/06/custom-gridview-in-android-with.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:08:49.120

好的，如果你想为 GridView 设置背景图像（我的意思是整个视图的背景），你只需要在你的 Activity 类中设置它：

```
GridView gridview = (GridView)findViewById(R.id.gridview);
gridview.setBackgroundResource(R.drawable.sampleImage); 
```

或者在您的 XML 布局文件中：

```
android:background="@drawable/sampleImage" 
```

相反，如果您想为 GridView 的所有项目/元素设置背景图像（所有项目都使用相同的图像），您只需要在 ImageAdapter 中执行此操作：

```
private Integer mThumbIds = R.drawable.sampleImage;
...
imageView.setImageResource(mThumbIds); 
```

请注意，在您的适配器中，您甚至可以使用 TextView 代替 ImageView，这样您就可以将图像和文本放在一起：

```
public View getView(int position, View view, ViewGroup parent) {
    TextView newView;
    if ( view == null ) {
        newView = new TextView( this.mContext );
    } else {
        newView = (TextView) view;
    }

    //Set the text:
    newView.setText( "TEXT" );  // android:text
    newView.setTextColor( Color.WHITE );  // android:textColor
    newView.setTextSize(25);  // android:textSize
    newView.setTypeface( Typeface.DEFAULT_BOLD );  // android:textStyle
    newView.setGravity( Gravity.CENTER );  // android:gravity

    //Set backgorund image:
    newView.setBackgroundResource( this.thumbIds );  // android:background
    newView.setWidth(64);
    newView.setHeight(64);

    return newView;
} 
```

# active-directory - 当成员属性不起作用时，从活动目录中检索组成员/成员资格

> ID：11262049
> 
> 赞同：0
> 
> 时间：2012-06-29T12:46:05.553
> 
> 标签：active-directory, adsi

我正在尝试从“域用户”中获取所有组成员。使用 AD 用户 MMC 选项卡时，我得到了很多结果。当使用 ADSI - 不是。以下不按预期工作：

*   通过 LDAP/ADSI 查看组条目的成员属性。当有更多成员时，它只返回 56 个成员。
*   按 memberOf 搜索（仅返回几个条目）
*   按primaryGroup搜索（它不是主要组）
*   通过 tokenGrops 搜索（它是一个构造属性）

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T05:26:01.030

*（我只是更仔细地阅读并看到你提到它不是主要群体......但我怀疑这就是答案:)）*

用户可以通过另一种机制成为组的成员，它由组中用户的 primaryGroupID 属性控制。

如果用户的 primaryGroupID 设置为某个组的某个 RID，则该用户在功能上属于该组，即使他们没有出现在该组的成员属性中。像 ADUC 这样的工具足够明智地寻找这一点。当您在堆栈中稍低一点并通过 LDAP 访问目录时，您需要足够聪明地去寻找它。

您可以对此进行搜索，也可以使用目录中考虑到这一点的构造属性。

# extjs - ExtJS：如何相对于 SplitButton 定位 SplitButton 菜单

> ID：11262050
> 
> 赞同：2
> 
> 时间：2012-06-29T12:46:07.013
> 
> 标签：extjs

我在页面底部有一个 SplitButton，最初是不可见的（我们需要向下滚动才能看到底部）。当我滚动到 SplitButton，然后按箭头按钮展开 splitbutton 的菜单时，菜单出现**在**SplitButton 下（正如计划的那样），然后向上滚动，**菜单保持在 screen 上**，并且它**相对于 window 定位**，而不是包含 div。我尝试通过将***floating: false***传递给它的配置来初始化菜单，但在这种情况下，菜单根本不会扩展。如何定位 SplitButton 的菜单以使其**始终**位于 SplitButton 下？

我的 ExtJS 版本是 4.07

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T15:48:11.070

我认为你做错了什么。我试过：

```
Ext.create('Ext.Panel', {
    renderTo: Ext.getBody(),
    html: 'loooooong panel',
    height: 1500,
    dockedItems: [{
        xtype: 'toolbar',
        dock: 'bottom',
        items: [{
            xtype: 'splitbutton',
            text: 'My button',
            menu: [{
                text: 'Menu1'
            },{
                text: 'Menu2'
            }]
        }]
    }]
}); 
```

[jsfiddle 上的](http://jsfiddle.net/eldono/48jKD/1/)实时示例，一切正常。如果您仍然有问题，您应该修改 menuAlign 属性以满足您的需要：

```
 menu: [{
      text: 'Menu1'
 },{
      text: 'Menu2'
 }],
 menuAlign: 'tl-bl?' // Default 
```

'tl-bl 在哪里？表示左上角（菜单）应与左下角（按钮）和“？”对齐 意味着如果没有空间，菜单应该自动移动。

# javascript - 拉斐尔的阴影

> ID：11262052
> 
> 赞同：-3
> 
> 时间：2012-06-29T12:46:22.583
> 
> 标签：javascript, raphael, dropshadow

我想用 Raphael 为一个对象（或任何相关的东西）创建一个投影。我在网上搜索并找到了一些资源，但不清楚如何将其应用于我的代码。据我了解，Raphael 中有一个 blur() 方法，但我在他们的文档中没有找到它。无论如何，我是拉斐尔的新手，所以如果有人可以提供一些帮助，我将不胜感激。这是我到目前为止的代码......

```
<html>
<head><title></title>
<script src="raphael-min.js"></script>
<script src="jquery-1.7.2.js"></script>
</head>

<body>

<div id="draw-here-raphael" style="height: 200px; width: 400px;">
</div>

<script type="text/javascript">
//all your javascript goes here

var r = new Raphael("draw-here-raphael"),

    // Store where the box is
    position = 'left',

    // Make our pink rectangle
    rect = r.rect(20, 20, 50, 50).attr({"fill": "#fbb"});

var shadow = canvas.path(p); 
shadow.attr({stroke: "none", fill: "#555", translation: "4,4"}); 
var shape = canvas.path(p);

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:45:14.970

你需要使用[发光](http://raphaeljs.com/reference.html#Element.glow)。[这是](http://jsfiddle.net/amadanNM/Dfk4W/)一个例子

# java - 从 JTextPane 中选择字符串的更有效方法？

> ID：11262055
> 
> 赞同：1
> 
> 时间：2012-06-29T12:46:37.287
> 
> 标签：java, swing, file-io, stringbuilder, jtextpane

不是我的代码不起作用，而是我怀疑它是否非常有效。我的理论是，这不是 xD

我有一个 JTextPane，我必须在其中获取文本（基本上每次 JTextPane 换行时都换行），然后将其放入 .txt 文件中。正如我所说，一切正常，但我怀疑它的实施。这是我怀疑的部分：

```
public void printLog() {
    String s = logTextArea.getText();
    ArrayList<String> log = new ArrayList<>();
    StringBuilder sb = new StringBuilder();
    for(int i = 0; i < s.length(); i++) {
        if(s.charAt(i) != '\n') {
            sb.append(s.charAt(i));
        } else {
            log.add(sb.toString());
            sb.delete(0, sb.length());
        }
    } 
```

这是整个事情仅供参考：

```
public void printLog() {
    String s = logTextArea.getText();
    ArrayList<String> log = new ArrayList<>();
    StringBuilder sb = new StringBuilder();
    for(int i = 0; i < s.length(); i++) {
        if(s.charAt(i) != '\n') {
            sb.append(s.charAt(i));
        } else {
            log.add(sb.toString());
            sb.delete(0, sb.length());
        }
    }
    File f = new File("JServer_Log.txt");
    BufferedWriter bw = null;
    FileWriter fr = null;
    try {
        if(f.exists()) {
            fr = new FileWriter(f,true);
        } else {
            fr = new FileWriter(f);
        }
    } catch (IOException e) {
        // Nothing to do really.
    }

    try {
        bw = new BufferedWriter(fr);
        Iterator<String> itr = log.iterator();
        bw.newLine();
        while(itr.hasNext()) {
            bw.write(itr.next());
            bw.newLine();
        }
    } catch (IOException e) {
        // Nothing to do really. We lost the log?
    } finally {
        try {
            bw.close();
        } catch(IOException ioe) {
            // The program is closing any way.
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:51:33.577

有关信息，第一个代码可以替换为：

```
List<String> log = Arrays.asList(logTextArea.getText().split("\n")); 
```

但其他答案为您提供了一种替换整个方法的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T12:52:11.510

为什么要打扰，使用[JTextComponents.write(Writer out) 会抛出 IOExceptionwrite()](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#write%28java.io.Writer%29)这是相当接受来自本机操作系统的换行符、制表符、ei

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T12:49:58.153

看来您只需要确保使用平台的适当换行符序列即可。您可以说`s = s.replace("\n", System.getProperty("line.separator"))`然后将整个字符串直接写入文件。事实上，在我看来，这就是你需要的所有代码（除了异常处理，取决于你）：

```
public void printLog() throws IOException {
  final FileWriter w = new FileWriter("JServer_Log.txt", true);
  try {
    w.write(logTextArea.getText().replace("\n", 
                                    System.getProperty("line.separator")));
  } finally { w.close(); }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T12:51:37.363

使用`split`：

```
String[] log = s.split("\n"); 
```

# asp.net - 使用 XSLT 在 HTML 中换行的 JSON 数组的每个元素

> ID：11262056
> 
> 赞同：0
> 
> 时间：2012-06-29T12:46:42.510
> 
> 标签：asp.net, json, xslt-1.0

我在我的 XSLT 样式表中创建了一个 JSON 对象。查看 HTML 源代码时很难用肉眼阅读。我想知道我的 XSLT 模板中是否有一种方法可以导致视觉换行，因此每个`{...},`都在新行上。这将使用眼睛阅读变得更加容易......

目前：

```
[{ .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }, { .... }] 
```

期望：

```
[
{ .... }, 
{ .... }, 
{ .... }, 
{ .... }, 
etc., etc.
] 
```

我不确定在 XSLT 中做什么会导致中断，然后我确定 JSON 需要某些东西才能使中断有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:56:47.457

当我 5 年前使用 xslt > 时，我曾经使用`<xsl:output method="text"/>`

[http://msdn.microsoft.com/en-us/library/ms256187.aspx](http://msdn.microsoft.com/en-us/library/ms256187.aspx)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:20:37.723

**在代码中的正确位置使用**：

```
<xsl:text>&#xA;</xsl:text> 
```

# jqplot - jqPlot 光标跟随系列线

> ID：11262062
> 
> 赞同：1
> 
> 时间：2012-06-29T12:46:55.647
> 
> 标签：jqplot

我有一个使用 jqPlot 的折线图，其中包含一个系列和几个数据点以及平滑线。我正在使用光标插件来显示十字准线和工具提示来显示 x 和 y 点。

是否可以让十字准线跟随系列中的线条？所以水平线将固定到线的 y 位置，而不是跟随鼠标。我看到您可以获得每个数据点的 x/y 位置，但不能获得点之间的线。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:32:54.957

如果您使用内置的平滑选项，则平滑数据点存储在：

```
plotObj.series[0].renderer._smoothedPlotData 
```

像素位置在：

```
plotObj.series[0].renderer._smoothedData 
```

# wpf - 为手持设备开发

> ID：11262066
> 
> 赞同：3
> 
> 时间：2012-06-29T12:47:16.427
> 
> 标签：wpf, windows-mobile, windows-ce, handheld

我们开发了一个 WPF 应用程序（VS 2010 C#、.NET 4.0、MVVM、CaliburnMicro、Agatha），主要处理不同交通类型的售票。

现在我需要开始为手持设备开发一个应用程序，该应用程序将与这个 WPF 应用程序一起使用（在公共汽车/火车上购买车票、打印、搜索等）。手持设备具有集成的打印机+触摸显示屏。

该应用程序将在手持设备上拥有自己的本地数据库（可能是 SQLite），但还需要使用 WPF 应用程序的主机（WCF 服务）与主数据库（PostgreSQL）进行通信。

我们的客户最初选择了一台装有 Windows Mobile 6.5 / Windows CE 5.0 的设备。

我没有手持设备/为他们开发的经验。现在，我一直在挖掘并理解

*   WPF/Silverlight 类型开发仅支持从 6.0（最新版本）开始的 Windows Mobile 7.0 + 和 Windows CE。
*   如果我们要为旧操作系统开发，我们不能将 VS2010 与所有最新工具等一起使用，因为那里不再支持 .net 紧凑框架。
*   为较旧的操作系统开发可能更耗时且有问题，CE 5.0 支持已被放弃。

我的问题：

1.  如果我们设法找到支持 Mobile 7.0+ / CE 6.0+ 的设备，哪些工具、框架最适合我们的开发？或者有人可以推荐一些最新的书籍吗？
2.  如果我们需要使用 Mobile 6.5 / CE 5.0，我们最好的开发选择是什么？
    *   我知道我们需要降级到 VS2008，但是哪些框架/工具最适合与 WCF 服务进行 UI/通信？
    *   有这方面经验的人可以预见与 WCF 服务通信的任何问题吗？
    *   为这些较旧的操作系统进行开发会耗费多少时间（大概数字）或复杂多少？即，我想知道我们应该多努力地推动我们的客户切换到具有较新操作系统的设备（因为找到具有较新操作系统的合适构建/定价的设备是很成问题的）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:11:30.573

看起来 Internet Explorer 的 Pocket 版本将成为您想要开发的目标。不过，我不确定它如何支持 Silverlight 和其他更新的技术。[>>THIS QUESTION<<](https://stackoverflow.com/questions/11248861)中的答案之一展示了如何做一些 HTML 的东西，如果有帮助的话。

Windows CE 和 Windows Mobile (WM) 需要不同的 SDK 下载。我在这里只使用 WM，我不确定通过一条路线与另一条路线相比你会获得什么。我得到了 WM，所以我为 WM 开发。

您是否要决定走哪条路（CE verses WM）？

更大的问题是大多数运行微软操作系统的新设备都是手机。似乎如果你想要一个工业风格的设备，你要么被旧的 Windows 设备卡住，要么转向运行更新的 Android 平台的设备。

就 WM 平台而言，它们越新，您可以访问的功能就越多（例如打开收音机、获取电池状态等）。WM 6 及更高版本具有这些功能。WM 5及以下没有。早于 WM 5 的版本称为 PocketPC。

# ruby-on-rails - Rails 应用程序：分叉后重新连接主宰 redis？

> ID：11262067
> 
> 赞同：0
> 
> 时间：2012-06-29T12:47:28.050
> 
> 标签：ruby-on-rails, redis, spawn, juggernaut

我正在开发一个使用[Juggernaut](https://github.com/maccman/juggernaut)定期向客户端推送数据的 Rails 应用程序。我使用控制器动作来开始推送；但由于推送通常是一个漫长的过程（10 分钟或更长时间），我使用 spawn 来分叉任务。例如：

```
def start_pushing
  spawn_block(:argv => "juggernaut-pushing") do
    for x in y
      Juggernaut.publish(stuff in here)
      sleep(30) # delay before publishing next item
    end
  end
end 
```

问题是当我点击 start_pushing 操作时，我在日志文件中发现了这个错误：

```
spawn> Exception in child[27898] - Redis::InheritedError: Tried to use a connection from a child process without reconnecting. You need to reconnect to Redis after forking. 
```

所以我在 spawn_block 中添加了以下内容，希望它能解决问题：

```
 require 'redis'
    $redis.client.disconnect
    $redis = Redis.new(:host => 'localhost', :port => 6379) 
```

它似乎没有解决它，尽管即使在我将它添加到重置 $redis 之前，该操作一直在间歇性地工作。我在想也许重置 $redis 并没有做任何事情。剑圣仍在访问旧连接。这看起来有可能吗？我如何确保 Juggernaut 使用新的 Redis 连接？

请让我知道有关我所描述内容的任何问题。感谢您的帮助，因为我现在陷入困境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:46:23.130

问题在于使用全局（以 $ 开头的变量）并使用乘客。所有全局变量在所有乘客进程中共享。Redis 进行了某种检查，以确保 redis 调用的进程 ID 与连接的进程 ID 相同。因此，如果 redis 使用乘客 worker 1 连接，但随后 worker 2 使用它，则会出现此错误。

有关详细信息，请参阅 Redis::Client 类的 connect 和 ensure_connected 方法。

[这个问题](https://github.com/redis/redis-rb/issues/117)解释了解决方案。基本上，他们建议您确实喜欢[这里解释](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_example_1_memcached_connection_sharing_harmful)的 memcache 。

简而言之，在您的 config/environement.rb 中，添加以下内容：

```
if defined?(PhusionPassenger)
    PhusionPassenger.on_event(:starting_worker_process) do |forked|
        if forked
            # We're in smart spawning mode.
            $redis.reconnect
        else
            # We're in conservative spawning mode. We don't need to do anything.
        end
    end
end 
```

# forms - 当名称未知时如何检测单击了哪个提交按钮？

> ID：11262078
> 
> 赞同：0
> 
> 时间：2012-06-29T12:48:05.093
> 
> 标签：forms, jsp, submit

`name`当我知道每个按钮的值时，我知道如何检测单击了哪个提交按钮。但是如果`name`s 是动态的或由另一个组件定义的呢？

例如，在这里我可以简单地检查 POST 数据`<form>`中的一个`alpha`或`bravo`：

```
<form>
  <input type="submit" name="alpha" value="Alpha">
  <input type="submit" name="bravo" value="Bravo">
</form> 
```

但这只是因为我知道我应该寻找那些名字。

是否有处理此类情况的最佳实践？（也许通过渲染一个元素`<input type="hidden" name="submit-button-names" value="dynamic_name1|dynamic_name2|etc">`。）我想要一个不需要 JavaScript 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:00:57.420

假设您可以控制显示这些按钮的 JSP，只需在按钮名称前加上您可以在 POSTed 数据中查找的字符串即可。例如，将“dynamicbutton_”添加到所有这样的名称

```
<form>
  <input type="submit" name="dynamicbutton_alpha" value="Alpha">
  <input type="submit" name="dynamicbutton_bravo" value="Bravo">
</form> 
```

[然后在您的 Servlet 中，通过调用ServletRequest.getAttributeNames()](http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletRequest.html#getAttributeNames%28%29)查找具有此前缀的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:15:39.443

您可以编写一个自定义标签，根据您提供给标签的参数列表为表单设置不同的输入。您最终会得到如下所示的 HTML：

```
<form method="POST" action="SelectColour.do">
    <p>Select your favorite colour: </p>
    <formTags:select name='colour' size='1' optionsList='${applicationScope.colourList}'/>
    <input type="SUBMIT" value="Click here to submit">
</form> 
```

[这是](http://www.codeproject.com/Articles/31614/JSP-JSTL-Custom-Tag-Library)创建自定义标签的不错指南。

# cocoa - NSSplitView 和自动布局

> ID：11262080
> 
> 赞同：22
> 
> 时间：2012-06-29T12:48:24.880
> 
> 标签：cocoa, autoresizingmask, nssplitview, autolayout

`NSSplitView`我应该如何在子视图中使用自动布局约束？

我的`NSSplitView`子视图有 3 个子视图：`topPane`，`tableContainer`并且`bottomPane`我设置了这样的约束：

```
NSDictionary* views = NSDictionaryOfVariableBindings(topPane, tableContainer, bottomPane);

for (NSView* view in [views allValues]) {
    [view setTranslatesAutoresizingMaskIntoConstraints:NO];
}

[myView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[topPane(34)][tableContainer][bottomPane(24)]|"
                                                               options:0 
                                                               metrics:nil 
                                                                 views:views]];

[mySplitView addSubview:myView]; 
```

并在控制台中得到了这个：

```
Unable to simultaneously satisfy constraints:
(
    "<NSLayoutConstraint:0x7fd6c4b1f770 V:[NSScrollView:0x7fd6c4b234c0]-(0)-[CPane:0x7fd6c4b2fd10]>",
    "<NSLayoutConstraint:0x7fd6c4b30910 V:[CPane:0x7fd6c4b2f870(34)]>",
    "<NSLayoutConstraint:0x7fd6c4b30770 V:|-(0)-[CPane:0x7fd6c4b2f870]   (Names: '|':NSView:0x7fd6c4b22e50 )>",
    "<NSLayoutConstraint:0x7fd6c4b212f0 V:[CPane:0x7fd6c4b2fd10]-(0)-|   (Names: '|':NSView:0x7fd6c4b22e50 )>",
    "<NSLayoutConstraint:0x7fd6c4b2f910 V:[CPane:0x7fd6c4b2f870]-(0)-[NSScrollView:0x7fd6c4b234c0]>",
    "<NSLayoutConstraint:0x7fd6c4b21290 V:[CPane:0x7fd6c4b2fd10(24)]>",
    "<NSAutoresizingMaskLayoutConstraint:0x7fd6c3630430 h=--& v=--& V:[NSView:0x7fd6c4b22e50(0)]>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x7fd6c4b1f770 V:[NSScrollView:0x7fd6c4b234c0]-(0)-[CPane:0x7fd6c4b2fd10]> 
```

我认为`<NSAutoresizingMaskLayoutConstraint:0x7fd6c3630430 h=--& v=--& V:[NSView:0x7fd6c4b22e50(0)]>`会导致这种情况，但我无法重置自动调整掩码，因为`NSSplitView`设置了它。

在拆分视图中使用自动布局的最佳方法是什么？有没有什么方法可以在没有自动布局的情况下处理拆分视图子视图的最小/最大大小`NSSplitViewDelegate`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T17:31:01.260

我发现如果我的窗口中有**工具栏**并通过任何此委托方法控制拆分视图，则会出现此错误：

```
splitView:constrainMinCoordinate:ofSubviewAt:   
splitView:constrainMaxCoordinate:ofSubviewAt:
splitView:shouldAdjustSizeOfSubview: 
```

在 windowDidLoad 中将工具栏附加到窗口中找到了解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T02:39:21.093

对于将来偶然发现这一点并正在寻找基于约束的替代品的快速启动的任何人`NSSplitView`，我在这里编写了一个小项目，尝试`NSSplitView`使用 Auto Layout 重新创建 's 的部分功能：

[https://github.com/jwilling/JWSplitView](https://github.com/jwilling/JWSplitView)

它有些错误，但对于任何想要走这条路的人来说，它可能是一个有用的参考。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-18T02:01:20.220

NSSplitView 从一开始就是一件奇怪的事情，如果它很快就会消失，我也不会感到惊讶。在尝试让 NSSplitView 与 AutoLayout 一起工作一个月并从一次绝望的攻击陷入另一次之后，我终于放弃了。

我的解决方案是**根本不使用带有 AutoLayout**的 NSSplitView。因此，无论是没有 Autolayout 的 NSSplitView 还是没有 NSSplitView 的 Autolayout：这并不像听起来那么复杂：只需将您的子视图彼此相邻并添加`NSLayoutConstraints`为`IBOutlets`. 然后可以在代码中从控制器设置和更改这些约束的常量。使用这种方法，您可以设置原点（将其滑出窗口的负偏移量）、宽度以及与其他子视图的关系——另外，使用视图的动画器为约束设置动画非常容易（曾经尝试为NSSplitView 设置动画？*）*

唯一缺少的是在分隔线上的鼠标拖动，但这可以通过几行来实现，在您的自定义“SplitView”中跟踪 mouseEvents。

Apple 有一个自动布局“splitview”示例（不幸的是只有垂直），我最近在 github 上至少看到了一个新项目。虽然对我来说，我认为针对我的应用程序的特定需求，从我的自定义解决方案重新开始会更容易，而不是尝试创建非常通用的东西（从而使其过于复杂而无法处理）。

**编辑：**我现在完成了从单独的笔尖加载其子视图的自定义 splitView。没有约束问题，没有自动布局警告。与试图让它与 NSSplitView 一起工作的整个月相比，我现在有了一个基于约束的工作自定义 splitView，易于动画化，仅在一个晚上创建。我绝对推荐走这条路！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-16T15:04:16.200

10.8 修复了该问题，请参阅其发行说明。

这是我的 10.7 解决方案（自定义拆分视图）： [https ://github.com/benuri/HASplitView.git](https://github.com/benuri/HASplitView.git)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T14:58:58.543

您根本不想禁用`translatesAutoresizingMaskIntoConstraints`。您不应该混淆系统视图约束。`NSSplitView`处理各个视图本身的大小，您实际上是在试图剥夺它的控制权。更不用说，你忘了考虑分离器。

在拆分视图上设置最小或最大（或恒定）宽度/高度的正确方法是在视图上单独设置这些东西。特别是，如果您在代码中执行此操作，您将需要使用 2 次单独调用 constraintsWithVisualFormat，因为否则视觉格式语言将在视图之间创建约束。

您可以在 IB 中完成所有这些工作。您甚至可以在拆分视图中设置每个视图的优先级，这将导致一个或另一个视图在窗口调整大小时调整大小，而不是平均分配调整大小。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-22T19:23:42.450

我使用这个类作为一种解决方法，它并不完美（子视图有点口吃），但它让我畅通无阻。我将此类用作每个拆分视图窗格中的自定义类。

```
@interface FBSplitPaneView : NSView

@end

@implementation FBSplitPaneView

- (void)setFrame:(NSRect)frame
{
  for (NSView *subview in self.subviews) {
    subview.frame = self.bounds;
  }
  [super setFrame:frame];
}

@end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T10:03:48.423

尽管我讨厌不同意，但奥科的回答不应该被评为最高。通过足够的工作量来解决问题在任何方面都没有帮助。在我看来，NSSplitView 只是那些没有充分阅读文档的人的问题。

这里提到的问题的实际解决方案相当简单：Auto Layout 在 NSSplitView 上引入了新的“Holding Priorities API”。正如文档所说：将较低的值设置为子视图的持有优先级将使他更有可能更早地采用宽度。所有这些都可以在 IB 中以编程方式设置，而不会感到绝望。所需工作量：大约 20 秒。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-15T12:43:57.473

我通过一个 nib 文件加载所有内容，`setTranslatesAutoresizingMaskIntoConstraints:NO`然后再加载。

所以也许你应该首先添加`[mySplitView addSubview:myView];`你的视图，然后禁用自动调整掩码到约束的转换，然后你将你的约束添加到`myView`.

**编辑：**

好的，我似乎误解了 myView。您必须将约束添加到子视图而不是拆分视图。

```
[topPane addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[topPane(34)]" options:0 metrics:nil views:views]];

[bottomPane addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[bottomPane(24)]" options:0 metrics:nil views:views]]; 
```

您不必添加边缘约束（“V:|[topPane(34)]”中的“|”），因为其中的子视图`NSSplitView`已经自动调整大小。

这导致了这种情况，例如对于 topPane 约束：

![屏幕截图](../Images/3514818c49ac077be040a8517369d746.png)

注意：忽略子视图内容，它们只是占位符

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-09T18:49:52.160

我花了一些时间让我的自动布局清除警告，但我确实在 IB 中处理了它（几个拆分视图和子视图）。

我的布局看起来像：

RootView
  |--**第一个 NSSplitView**（3 个垂直子视图）
      |----UIView（左）
      |----**第 2 个 NSSplitView**（中心和 2 个水平子视图）
           |---UIView（顶部）
           |---**第 3 个 NSSplitView**（底部& 3个垂直子视图）
               |---UIView（左）
               |---UIView（中）
               |---UIView（右）
      |----UIView（右）

我的问题是，我的所有子视图中都有 19 个警告，但我的布局看起来很好，并且工作正常。过了一会儿，我找到了警告的原因：我的第一个拆分视图中外部视图的约束。

两个视图（左和右）都具有“宽度 >= 200”的宽度约束，而中心视图（第二个拆分视图）没有约束（因为它的最小宽度和最大宽度由其子视图处理）。

警告告诉我，自动布局想要缩小我的 IB-UI-Layout，因为计算出的最小宽度小于我的布局，但我不想在 IB 中缩小它。

我向我的第一个拆分视图的两个外部子视图添加了一个固定约束“宽度 = 200”，并选中了“在构建时删除”。

现在我的布局没有警告，一切正常。

**我的结论**：

我认为自动布局和拆分视图的问题在于自动布局无法处理子视图的宽度约束。我们想要使用拆分视图的原因是，我们想要视图的动态宽度，并且我们想要它在两个方向上，收缩和扩展。

所以没有 width <= xxx && width >= xxx 。Autolayout 只能处理其中一个，我们会在 IB 中收到警告。您可以使用 IB 中的临时约束来解决此问题，该约束将在运行前删除。

我希望我写的东西有意义，但它在我的项目中运行良好。

PS：直到今天我找到了这个帖子，我才找到任何解决方案。所以我想你的帖子启发了我:-)

# iphone - UIProgressview 被重置

> ID：11262082
> 
> 赞同：1
> 
> 时间：2012-06-29T12:48:26.833
> 
> 标签：iphone, ios, ios4, pushviewcontroller, uiprogressview

我正在尝试在我的应用程序中实现 UIProgressview 它工作正常，直到我导航到另一个视图。当我导航到另一个视图控制器时，进度视图被重置并再次开始更新。

这是推送视图控制器时 uiprogressview 的预期行为吗，有没有办法解决我的问题。

请让我知道您的想法和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:56:15.340

您需要将进度保存在应用程序委托变量中，并且必须`progressView.progress = appdelegate.variable`在`viewWillAppear`方法中进行设置，因为在您返回视图后将初始化进度视图。所以将进度保存在静态变量中会更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:56:39.047

在视图中将消失，您可以设置一些用户默认值，然后在弹出视图时再次获取值并使用它设置进度条。当您的柱从弹出中获得原始值时，不要忘记重置最后一个值。

# c - 如何只有一些参数到函数 C

> ID：11262085
> 
> 赞同：0
> 
> 时间：2012-06-29T12:48:39.687
> 
> 标签：c, function

我有这个函数：
`void func(int a, int b, char s, FILE *fp, int flag)`
我想根据标志使用函数的参数。例如： 在我想要
`func(num, NOTHING, NOTHING, file, 1)`
`func(num, othernum, NOTHING, NOTHING, 2)`
的功能上：`this_is_function`

```
void func(int a, int b, char s, FILE *fp, int flag){
if(flag == 1){
/* use a and file */
}
if(flag == 2){
/* use a,b */
}
/* etc etc */
} 
```

我想知道这是否可能以及如何做到这一点！
提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T12:54:02.077

如果`NOTHING`你的意思是你真的想省略那个论点，我认为你概述它的方式是不可能的。

这通常在 C 中完成的方式是通过[可变参数列表](http://linux.die.net/man/3/stdarg)。这意味着你必须重新制定，以便`flag`先行，因为它决定了其余的论点：

```
void func(int flag, ...)
{
  va_list args;
  int num, othernum;
  FILE *file;

  va_start(args, flag);
  if(flag == 1)
  {
    num = va_arg(args, int);
    file = va_arg(args, FILE *);
  }
  else if(flag == 2)
  {
    num = va_arg(args, int);
    othernum = va_args(args, int);
  }
  va_end(args);

  /* Inspect `flag` again, and do things with the values we got. */
} 
```

然后你可以像这样使用这个函数：

```
func(1, 42, a_file); 
```

或者

```
func(2, 17, 4711); 
```

这当然需要非常小心，因为您不再从编译器获得很多帮助来将调用中提供的值与函数期望的值相匹配。

我建议将其重组为不同的顶级函数，这些函数调用具有适当参数的通用“worker”函数：

```
func_mode1(42, a_file);
func_mode2(17, 4711); 
```

然后这些可以`func()`用正确的`flag`值调用，为不适用的参数（例如`NULL`未使用的文件指针）填充合适的默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T12:54:32.750

当您调用函数并且不使用参数时，您可以传递`0`to`int`和for 指针。`char``NULL`

```
func(num, 0, 0, file, 1)
func(num, othernum, 0, NULL, 2) 
```

您还可以使用可变参数函数。可变参数函数是具有可变数量参数的函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T12:54:06.073

为您尝试处理的每个案例创建单独的函数。这将产生更具可读性的代码。通过你的代码陈述你的意图，而不是绕过它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T12:57:23.227

您的代码应该可以正常工作，而且尝试一次并检查是否有任何错误。我确信不会发生错误。您也可以尝试`switch`在 func 中使用 case with `flag`as the `choice`for `switch`。我相信你不会在你的代码中使用`Nothing`and 。`othersum`

# orm - 存储库模式、ViewModel 和 ORM

> ID：11262086
> 
> 赞同：0
> 
> 时间：2012-06-29T12:48:43.010
> 
> 标签：orm, viewmodel, repository-pattern, dto

使用存储库模式和 ViewModels，如果您不希望原始数据库对象泄漏到存储库之外，如何针对数据库构建查询？如何在不将所有数据库加载到内存并使用 LINQ to Objects 的情况下实际创建查询？我不能将 IQueryable 暴露给应用程序的其余部分。

例如，使用 EF，我有一堆 POCO，其中有几个属性匹配 db 字段，但也有一些东西可以解决枚举不直接支持（目前）以及外键 ID 以防止 N+1 和更容易查询和很快。我不希望它们泄漏到应用程序的其余部分，我希望应用程序只看到一个普通的对象图。

```
public class DbUser
{
    public int Id { get; set; }
    public string Name { get set; }

    public int GroupId { get; set; }
    public DbGroup Group { get; set; }

    public ICollection<DbComment> { get; set; }
}

public class User
{
    public int Id { get; set; }
    public string Name { get set; }

    public Group Group { get; set; }
    public ICollection<Comment> { get; set; }
} 
```

这里的问题是我的存储库将在内部使用 EF 进行查询（以及单元测试时的内存内容）。但我该如何实施`IQueryable<User> FindAll()`？我不能只做 return `dbContext.Users.Select(u => new User(u))`，因为在那种情况下我会失去所有可能的查询能力；它只会将整个用户集合加载到内存中，将所有类型从 DbUser 转换为 User，然后在内存集合上构建 LINQ 查询——这是非常低效的。

我不能只在存储库中构建查询。在某些页面上，我有选择一些字段的查询，但也从其他相关对象计算一些复杂的东西，根据结果过滤它们（例如具有正分数的评论计数），但我也需要在应用程序中返回。我可以选择所有用于获取复杂内容的对象并将它们返回给应用程序（但不是作为数据库实体），但这意味着选择大量数据。

基本上，我如何**防止数据库实体**用他们的垃圾和黑客行为污染应用程序的其余部分，同时仍然**保持在存储库之外构建查询的能力**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:24:33.513

CQRS（Command Query Responsibility Segregation）解决了这个问题。你有“真正的”模型，域模型，所有的业务规则等等，还有一个“query-ony”模型，它基本上是一个简单的 poco（可以由 Views 直接使用），它将由 a 返回专门查询的存储库。

持久性模型（EF 实体）仅用于与数据库“对话”，存储库始终返回或处理域/应用程序对象。基本上，您必须将 EF 实体映射到域实体（保存时反之亦然）。通过这种方式，您将拥有不同的模型，每个模型都有自己的用途。

# php - 使用 PHP 表单在另一个页面上创建链接？

> ID：11262087
> 
> 赞同：0
> 
> 时间：2012-06-29T12:48:44.190
> 
> 标签：php, forms

我有一个系统，在 PHP 中。用户将输入一些详细信息，这些详细信息将传递到下一个页面，该页面上有 4 个空超链接。我想知道是否有一种方法可以同时生成按钮的名称和它的 URL？

```
<?php 
$company = $_POST["company"];
$phone = $_POST["phone"];
$colour = $_POST["colour"];
$email = $_POST["email"];
$website = $_POST["website"];
$video = $_POST["maps"];
?>

<form method="post" action="generate.php"><br>
<input type="text" name="company" placeholder="Company Name" /><br>
<input type="text" name="slogan" placeholder="Slogan" /><br>
<input class="color {required:false}" name="colour" placeholder="Company Colour"><br>
<input type="text" name="phone" placeholder="Phone Number" /><br>
<input type="text" name="email" placeholder="Email Address" /><br>
<input type="text" name="website" placeholder="Full Website - Include http://" /><br>
<input type="text" name="maps" placeholder="Google Maps URL" />
<input type="submit" value="Generate QuickLinks"/>
</form> 
```

上面的代码是我的表单，下面的代码是生成的。请注意，每次提交此表单时，都会创建一个新文件夹，并将“模板”文件夹中的文件复制到新文件夹中。下面是结果。

```
<?php 
 $File = "includes/details.php"; 
 $Handle = fopen($File, 'w');
 ?>

 <?php 
 $File = "includes/details.php";
 $Handle = fopen($File, 'w');
 $Data = "<div id='logo'>
          <h1 style='color:#$_POST[colour]'>$_POST[company]</h1>
          <h2>$_POST[slogan]</h2>
          </div>

<ul>
       <li><a class='full-width button' href='tel:$_POST[phone]'>Phone Us</a></li>
       <li><a class='full-width button' href='mailto:$_POST[email]'>Email Us</a></li>
       <li><a class='full-width button' href='$_POST[website]'>View Full Website</a></li>
       <li><a class='full-width button' href='$_POST[maps]'>Find Us</a></li>
</ul>

 \n"; 
```

如果用户（提交表单的用户可以自己创建按钮，使用表单）我想保留'$company、$phone 和 $email）然后剩下的，那对我和整个程序来说都很棒只是用户将填写的空链接和空值，但我的表单目前不能/不能这样做。欣赏它。

# java - 创建可运行 JAR 文件时的 Java Eclipse、JavaSE-1.7 或 jre7

> ID：11262091
> 
> 赞同：2
> 
> 时间：2012-06-29T12:48:57.073
> 
> 标签：java, eclipse, executable-jar

当我在 Eclipse 中启动一个新的 Java 项目时，第一个弹出屏幕允许我选择要使用的 JRE。

我有3个选择。

*   使用执行环境JRE：JavaSE1.7
*   使用项目特定的 JRE：
*   使用默认 JRE（当前为 'jre7'）

但是当我使用 eclipse 的内置导出来创建可执行 JAR 时，如果我选择而不是 eclipse 的默认选项`Runnable JAR File`，则 JAR 文件只会运行（通过双击）`jre7``JavaSE1.7`

`JavaSE1.7`有人可以告诉我在vs中开发 java 程序有什么区别`jre7`吗？还是我使用了错误的方法来创建可执行的 JAR？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:29:36.300

尝试这个...

**JavaSE 1.7**是**Java 到 Standard Edition Version 1.7 或 Version 7**（两者相同）的首字母缩写，用于在桌面、服务器等上运行...

**JRE**是**运行时环境**，编译后的 java 应用程序在其中运行...

```
JRE = JVM + API Bundles 
```

当您选择 JRE 而不是 JSE 时，您的可执行 jar 运行的原因是，**JRE 是应用程序运行所需的运行时环境（沙箱），而**不是 JSE .. JSE 只是 Java 标准版的首字母缩写.

**要在 Eclipse 中创建一个可运行的 jar，请遵循以下方法..**

```
Try this, this is the way to create a jar or runnable jar in eclipse

File -> Export-> Java ->Runnbale JAR file

Launch configuration : your Class containing the public static void main(String[] args)

Export destination : Target place

Library Handling:

Package required libraries into generated JAR

FINISH 
```

# c# - 用于解析 CSV 的正则表达式

> ID：11262094
> 
> 赞同：0
> 
> 时间：2012-06-29T12:49:05.047
> 
> 标签：c#, regex, csv

我正在尝试编写一个正则表达式，它将从 CSV 文件中提取单个字段。

例如，如果在 CSV 文件中给出以下行：

```
123,    Bob    ,Bob, " Foo Bar ", "a, ""b"", c" 
```

应该给出以下结果（**不带**单**引号**）：

```
'123'
'Bob'
'Bob'
' Foo Bar '
'a, "b", c' 
```

请注意，除非它们在引号内，否则应修剪前导和尾随空格。

我不担心无效的 CSV 行，例如没有匹配右引号的开引号。根据上述规则，您可以放心地假设 CSV 文件完全有效。

如果单个正则表达式很困难，我也可以使用多个正则表达式。但我喜欢避免使用标准 C# 操作，除非它们简单而简短。（我不想最终写很多代码。）

那么，有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T12:53:56.950

我不会尝试编写我自己的 csv 解析器，那里有很多可以为您完成这项工作。

*   [http://www.filehelpers.com/](http://www.filehelpers.com/)
*   [http://coding.abel.nu/2012/06/built-in-net-csv-parser/](http://coding.abel.nu/2012/06/built-in-net-csv-parser/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T12:56:13.707

好吧，正则表达式可能存在许多陷阱和错误...尝试遵循它对我有用的代码，它既甜美又简单...

```
Using Reader As New Microsoft.VisualBasic.FileIO.TextFieldParser("C:\MyFile.csv")

Reader.TextFieldType = Microsoft.VisualBasic.FileIO.FieldType.Delimited

Dim MyDelimeters(0 To 0) As String
Reader.HasFieldsEnclosedInQuotes = False
Reader.SetDelimiters(","c)

Dim currentRow As String()
While Not Reader.EndOfData
    Try
        currentRow = Reader.ReadFields()
        Dim currentField As String
        For Each currentField In currentRow
            MsgBox(currentField)
        Next
    Catch ex As Microsoft.VisualBasic.FileIO.MalformedLineException
        MsgBox("Line " & ex.Message &
        "is not valid and will be skipped.")
    End Try
End While
End Using 
```

如果发现方便，请标记为答案...；）

请在此处查看相同的[实现](http://www.dotnetperls.com/textfieldparser),,,

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-09T17:17:53.990

[我同意正则表达式不是“正确”的答案，但这是问题所要求的，我喜欢一个好的正则表达式挑战。]

[下面的模式是我的标准 CSV 解析正则表达式](https://stackoverflow.com/a/39939559/1801144)的修改版本，它删除了空格并假设 CSV 按照您的要求是完美的。您的问题中唯一没有解决的部分是它不会删除转义/双引号。模式后给出了取消转义引号的示例。

* * *

当 CSV 文件/流的一个或多个行/记录传递给下面的正则表达式时，它将为每个非空行/记录返回一个匹配项。每个匹配项都将包含一个名为的捕获组，该组`Value`包含该行/记录中的捕获值。

这是注释模式（[在 Regexstorm.net 上](http://regexstorm.net/tester?p=(%3f%3c%3d%5cr%7c%5cn%7c%5e)(%3f!%5cr%7c%5cn%7c%24)%0d%0a(%3f%3a%0d%0a++%5b%5e%5cS%5cr%5cn%5d*%0d%0a++(%3f%3a%0d%0a++++%22(%3f%3cValue%3e(%3f%3a%5b%5e%22%5d%7c%22%22)*)%22%7c%0d%0a++++(%3f%3cValue%3e%5b%5e%2c%5cr%5cn%5d%2b)%7c%0d%0a++++(%3f%3cValue%3e)%0d%0a++)%0d%0a++%5b%5e%5cS%5cr%5cn%5d*%0d%0a++(%3f%3a%2c%7c(%3f%3d%5cr%7c%5cn%7c%24))%0d%0a)%2b%3f%0d%0a(%3f%3a(%3f%3c%3d%2c)(%3f%3cValue%3e))%3f%0d%0a(%3f%3a%5cr%5cn%7c%5cr%7c%5cn%7c%24)&i=123%2c++++Bob++++%2cBob%2c+%22+Foo+Bar+%22%2c+%22a%2c+%22%22b%22%22%2c+c%22%0d%0a456%2c++++David++++%2cBob%2c+%22+Foo+Bar+%22%2c+%22a%2c+%22%22b%22%22%2c+c%22%0d%0a789%2c++++Beth++++%2cBob%2c+%22+Foo+Bar+%22%2c+%22a%2c+%22%22b%22%22%2c+c%22%0d%0a&o=x)测试）：

```
(?<=\r|\n|^)(?!\r|\n|$)                       // Records start at the beginning of line (line must not be empty)
(?:                                           // Group for each value and a following comma or end of line (EOL) - required for quantifier (+?)
  [^\S\r\n]*                                  // Removes leading spaces
  (?:                                         // Group for matching one of the value formats before a comma or EOL
    "(?<Value>(?:[^"]|"")*)"|                 // Quoted value -or-
    (?<Value>[^,\r\n]+)|                      // Unquoted/open ended quoted value -or-
    (?<Value>)                                // Empty value before comma (before EOL is excluded by "+?" quantifier later)
  )
  [^\S\r\n]*                                  // Removes trailing spaces
  (?:,|(?=\r|\n|$))                           // The value format matched must be followed by a comma or EOL
)+?                                           // Quantifier to match one or more values (non-greedy/as few as possible to prevent infinite empty values)
(?:(?<=,)(?<Value>))?                         // If the group of values above ended in a comma then add an empty value to the group of matched values
(?:\r\n|\r|\n|$)                              // Records end at EOL 
```

这是没有所有注释或空格的原始模式。

```
(?<=\r|\n|^)(?!\r|\n|$)(?:[^\S\r\n]*(?:"(?<Value>(?:[^"]|"")*)"|(?<Value>[^,\r\n]+)|(?<Value>))[^\S\r\n]*(?:,|(?=\r|\n|$)))+?(?:(?<=,)(?<Value>))?(?:\r\n|\r|\n|$) 
```

而且，这是 C# 转义版本。

```
String CSVPattern=
    @"(?<=\r|\n|^)(?!\r|\n|$)" +
    @"(?:" +
        @"[^\S\r\n]*" +
        @"(?:" +
            @"""(?<Value>(?:[^""]|"""")*)""|" +
            @"(?<Value>[^,\r\n]+)|" +
            @"(?<Value>)" +
        @")" +
        @"[^\S\r\n]*" +
        @"(?:,|(?=\r|\n|$))" +
    @")+?" +
    @"(?:(?<=,)(?<Value>))?" +
    @"(?:\r\n|\r|\n|$)"; 
```

关于如何使用正则表达式模式的示例（嗯，可以用这种模式替换的原始模式）可以在我对类似问题的回答中[找到](https://stackoverflow.com/a/39939559/1801144)，或者在[C# pad](http://csharppad.com/gist/94b3c0ab4e54515a33071f2849e054be)上，或者[在这里](http://csharppad.com/gist/b3bcfee4c577d39e460a758fc93f2736)。

**注意：**上面的示例包含取消转义/取消双引号的逻辑，如下所示：

```
if (Capture.Length == 0 || Capture.Index == Record.Index || Record.Value[Capture.Index - Record.Index - 1] != '\"')
{
    // No need to unescape/undouble quotes if the value is empty, the value starts
    // at the beginning of the record, or the character before the value is not a
    // quote (not a quoted value)
    Console.WriteLine(Capture.Value);
}
else
{
    // The character preceding this value is a quote
    // so we need to unescape/undouble any embedded quotes
    Console.WriteLine(Capture.Value.Replace("\"\"", "\""));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T14:09:12.517

您可以使用.NET 框架中内置的[TextFieldParser类。](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)

为了在您的 C# 应用程序中使用该类，您需要 `Microsoft.VisualBasic.dll`在以下位置添加对的引用（假设您进行了默认设置安装）

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Microsoft.VisualBasic.dll 
```

现在在您的 C# 类中有以下 using 语句：

```
using Microsoft.VisualBasic.FileIO 
```

# git - 确定文件在哪个提交时进入了 git 中的 master 分支

> ID：11262101
> 
> 赞同：3
> 
> 时间：2012-06-29T12:49:46.997
> 
> 标签：git, content-management-system

我正在尝试将 Git 用作网站的 CMS，因为它会跟踪作者信息、修订以及添加到存储库的时间。我遇到的问题是我们想使用分支来跟踪未来/未发布的内容，而它正在由几个人处理。我找不到确定何时将文章/文件添加到主分支的可靠方法，以便可以将日期用作“发布”日期而不是最初添加的日期。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T12:58:51.810

```
$ git log master            \
     --first-parent         \  # stay on this branch
     --diff-filter=A        \  # only check for when the file was added
      -m                    \  # ...but treat merging the file as 'adding' it
     --format="%h %cd %s"   \  # output the abbreviated hash, date, and subject
   <file> 
```

# arrays - 用一个数组填充多个 UIPickerview？

> ID：11262104
> 
> 赞同：0
> 
> 时间：2012-06-29T12:49:53.357
> 
> 标签：arrays, uipickerview

我在一个视图中有 4 个 UIpickerviews。我想用一个数组填充所有这些。目前，当视图出现时，它会显示一个带有数据的选择器视图，但其他的都是空的。当我开始滚动第二个时，它开始填充，但第一个开始变空。我正在使用填充 UIPickerVIew 的常用方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:08:53.640

作为回答您问题的开始，您必须为 UIPickerViewDataSource 实现委托例程。

```
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
    return 4;
} 
```

您的代码中可能已经有了上述例程！！！

接下来，您将必须实现以下内容：

```
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{
    switch(component){
        case 0:
            // return X based upon how many for the left-most column
        case 1:
            // return X based upon how many for the second left-most column
        case 2:
            // return X based upon how many for the third left-most column
        default:  // Serves as 4
            // return X based upon how many for the right-most column        
    }
} 
```

或者在上面的例程中它可以简单地（如果您要填充的数据是每列的 n，因此您的数组大小应该是 n * 4）

```
[myArray count];  //  Where myArray is replaced with you array variable name 
```

最后实现：

```
-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{

    // Assuming your array is filled with strings only
    int index = [myArray count] / 4 * component + row;
    return [myArray objectAtIndex:index];
} 
```

这是假设您的数组看起来像

```
[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4] 
```

其中数字代表数据属于哪一列，而不是数据本身

# ms-access - MS Access - 加入 GUID 和字符串列

> ID：11262111
> 
> 赞同：0
> 
> 时间：2012-06-29T12:50:09.930
> 
> 标签：ms-access, guid, inner-join

我在连接两个表时遇到问题，其中一个连接列是 varchar，另一个是 guid 类型。

生成的 SQL 语句如下所示：

```
INSERT INTO adnVFD
SELECT dbo_adnVFD.*
FROM PRC INNER JOIN dbo_adnVFD ON PRC.PrcId = dbo_adnVFD.VarType; 
```

我尝试`PRC.PrcId`使用该`StringFromGUID`函数转换列，以便两列应该属于同一类型。但没有成功。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:03:33.167

如何使用派生表，例如：

```
SELECT  b.* 
FROM Table2 b
INNER JOIN (SELECT StringFromGUID([ID]) As Expr1 FROM Table1) a
ON b.Expr1=a.Expr1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:03:23.553

如果我

(1) 创建一个包含两个字段的新表 - (a) `ID, set as an autonumber, field size replication ID`（又名 Guid）和 (b)`ID2, text(255)`

（2）添加一行，让它创建自动编号，并将其从ID复制并粘贴到ID2中

(3)`SELECT Table1.ID, Table1.ID2 FROM Table1 where ID = ID2`

我回到我的行列。请注意，粘贴的字符串确实包含大括号。您可能希望确保比较不会以某种方式丢弃它们。

然后，我创建了第二个表，其中包含两个文本字段，均为 text(255)，并加入：

```
SELECT Table1.ID, Table1.ID2, Table2.Field1
FROM Table1 INNER JOIN Table2 ON Table1.ID = Table2.ID; 
```

效果很好，让我回到了我的行列。我的钱是在你的情况下丢失的牙套上。我根本不需要使用`StringFromGUID()`。

# c# - 如何向httphandler发送数据

> ID：11262112
> 
> 赞同：3
> 
> 时间：2012-06-29T12:50:12.270
> 
> 标签：c#, asp.net, post, httphandler

我在一个页面上有一个链接，它会回发。

```
 otherOptionsContainer.Controls.Add(new LiteralControl(String.Format("<a href='{0}' onclick='return {1}.exportItems();'>Export</a><br/>", exportURL, this._clientInstanceName))); 
```

和 http 处理程序

```
 byte[] ms_excel = some_params_from_code
                MemoryStream ms_excel_tream = new MemoryStream(ms_excel);
                context.Response.ContentType = CONTENT_TYPE_MS_EXCEL;
                String dateNow=DateTime.Now.ToString("dd-MMM-yyyy_HH_mm", new System.Globalization.CultureInfo("en-US"));
                context.Response.AddHeader("Content-Disposition", string.Format("attachment; filename=Export_{0}.xls", dateNow));
                ms_excel_tream.WriteTo(context.Response.OutputStream);
                ms_excel_tream.Close(); 
```

我需要将 some_params_from_code 发送到 httpHandler。我有一些限制。1\. 不要使用查询字符串 2\. 不要使用 Cookie

我试图像这样使用ajax发送数据

```
$.ajax({
    url: "_Layouts/blah/blahHandler.ashx",
    contentType: "application/json; charset=utf-8",
        data: { 'key1':'value1'},
        dataType: "json",
        success: OnComplete,
        error: OnFail
    }); 
```

但 http 处理程序写入另一个响应对象。或者另一个上下文来到处理程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:32:52.207

既然您唯一的限制是不使用查询字符串和 cookie，为什么不使用表单发布呢？考虑这个虚拟示例。

在您的 HTML 中：

```
<form id="form" action="DefaultHandler.ashx" method="post" style="display: none;">
    <input type="hidden" name="field1" value="abc" />
    <input type="hidden" name="field2" value="xyz" />
</form>
<a href="#" onclick="form.submit(); return false;">Handle</a> 
```

在处理程序中：

```
public void ProcessRequest(HttpContext context)
{
    context.Response.ContentType = "text/plain";
    context.Response.Write("Received:\n");
    context.Response.Write(context.Request.Form["field1"]);
    context.Response.Write("\n");
    context.Response.Write(context.Request.Form["field2"]);
    context.Response.Write("\n");
} 
```

根据您的需要进行调整。您可以在 JavaScript 中动态创建表单并根据需要设置字段。

# jquery - 为孩子添加课程

> ID：11262114
> 
> 赞同：0
> 
> 时间：2012-06-29T12:50:32.757
> 
> 标签：jquery

当我这样做时， `$('ul.latestnews ul li').parent().prev().text());`我会取回目标 li 的内容。（本例中为 word1 或 word2）。

但是当我这样做时

```
$('ul.latestnews ul li').addClass($(this).parent().prev().text()); 
```

它不添加类。当我在最后一条语句上执行 console.log 时，它只返回我试图将类添加到的所有 li。

我想做的是：

```
<ul class="latestnews">
    <li>word1</li>
    <ul>
        <li>my class should become word1</li>
        <li>my class should become word1</li>
    </ul>
    <li>word2</li>
    <ul>
        <li>my class must become word2</li>
    </ul>        
</ul> 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:53:05.733

`this`是仅在 jQuery 函数内部的 DOM 元素，例如`each`：

```
$('ul.latestnews ul li').each(function(){
    $(this).addClass($(this).parent().prev().text());
}); 
```

[](http://jsfiddle.net/F9xUB/4)**`this`您的代码中的[**Live DEMO**](http://jsfiddle.net/F9xUB/4)`Window`可能是对象...**

 **请注意，如果您稍微更改 DOM 结构，这些 DOM 遍历很容易中断，您可能希望使用其他基于元素类的选择器`prev`。`parent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:04:23.180

我认为 html 代码不太正确，因为它应该是这样的：

```
<ul class="latestnews">
    <li>word1</li>
    <li>
        <ul>
            <li>my class should become word1</li>
            <li>my class should become word1</li>
        </ul>
    </li>
    <li>word2</li>
    <li>
        <ul>
            <li>my class must become word2</li>
        </ul>
    </li>        
</ul> 
```

然后：

```
$("ul.latestnews ul > li").each(function(){
    var $this=$(this);
    var className = $this.parents("li").first().prev().text();
    $this.addClass(className);
}); 
```**

# android - 将来自 google play 的搜索历史添加到我在 android 中的应用程序

> ID：11262121
> 
> 赞同：0
> 
> 时间：2012-06-29T12:50:42.817
> 
> 标签：android, search, history, google-play

我正在制作一个像 Android 市场这样的应用程序，所有免费应用程序都可以下载，但也有一个搜索选项可以在我的服务器上查找应用程序。

我想向用户显示他之前在 Google play 或 Android 市场上进行的搜索列表。请帮助我，我可以从浏览器中获取历史记录，但我无法从 Google Play 中检索它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:55:47.990

这是不可能的。Android SDK 没有允许您从 Google Play 检索搜索历史的选项，而且 Google Play 也不提供这样的选项。

# php - 如何修复 iframe 的子页面高度以继承？

> ID：11262124
> 
> 赞同：0
> 
> 时间：2012-06-29T12:50:52.027
> 
> 标签：php, javascript, jquery, html

```
<iframe id="filehandler" style="border: 0; width: 100%; height:1000%" 
  scrolling="no" src="loadindex.php" onload='adjustMyFrameSize();'  
  name="content-part">
</iframe> 
```

该页面`loadindex.php`包含另一个子页面。它不是 iframe，但页面有更多内容。此页面将其高度作为`loadindex.php`' 高度。如何修复要从子页面继承的高度？

# jquery - 当用户将鼠标悬停在 div 元素上时，如何在按钮上应用 jQuery 向下滑动？

> ID：11262147
> 
> 赞同：0
> 
> 时间：2012-06-29T12:52:27.527
> 
> 标签：jquery, asp.net, html, css, slidedown

我有一个视图，其中有一个用 div 包裹的转发器控件。当用户将鼠标悬停在此 div 上时，我想向下滑动一个按钮。

我将如何使用 jQuery 向下滑动来实现这一点？

谢谢

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js ">   </script>
<script type="text/javascript">
$(document).ready(function () {
    $(".NewsStrip").hover(function () {
        $(".SeeAllEvents").slideDown();
    });
 });
</script> 
```

这是 div 元素，我想将幻灯片应用到：

```
<div id="SeeAllEvents" class="SeeAllEvents" >
<asp:Image ID="Image1" runat="server" ImageUrl="/_Layouts/VenchursBullet.png"  CssClass="ImagerStyle"/>&nbsp
<asp:HyperLink ID="HyperLink1" runat="server" CssClass="HyperlinkStyle"     NavigateUrl="http://intranet.company.com/Lists/Announcements/AllItems.aspx">See all events</asp:HyperLink>
</div> 
```

这是中继器 div Id 想将 onmouseover/hover 应用于：

```
<div id="NewsStrip" class="NewsStrip">
<table class="BottomPaddingZero" >
<tr>
   <asp:Repeater ID="repAnnouncements" runat="server">
        <ItemTemplate>
            <td style="vertical-align: top; padding-right:19px; padding-top:1px; padding-left:7px;">
                <asp:HiddenField ID="ItemID" Value='<%#Eval("ID") %>' runat="server" />

                <div class="ImageStyle" >
                <asp:Image ID="imgLink" Height="110px" Width="150px" runat="server"  ImageUrl='<%#Eval("Images")%>' CssClass ="magnify" ToolTip="Click on Image to enlarge.  Click back to minimize." />
                </div>

                <br/><br/>
               <asp:HyperLink ID="hypTextEditLink" runat="server" Text='<%#Eval ("Title")%>' CssClass="TitleStyle" ToolTip="Click to view details of the Announcement." />
            </td>
        </ItemTemplate>
    </asp:Repeater>
 </tr>
 </table><br />
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:58:27.190

```
$("#yourdiv").hover(
  function () {
    $("#yourbutton").slideDown('slow');
  }, 
  function () {
    $("#yourbutton").slideUp('slow');
  }
); 
```

第一个功能是“鼠标进入”事件。第二个功能是“鼠标离开”事件。更多信息在这里： [http ://api.jquery.com/hover/](http://api.jquery.com/hover/)

[http://api.jquery.com/slidedown/](http://api.jquery.com/slidedown/)

[http://api.jquery.com/slideup/](http://api.jquery.com/slideup/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T12:58:42.327

```
$("#myDivId").hover(function(){
  $("#myButton").slideDown();
}) 
```

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T13:04:02.100

不知道你的标记是什么样子的，很难帮助你找出你需要的正确选择器，但最终它应该看起来像这样：

```
$('.div-class').hover(
    function () { $(this).stop().find('.your-button-class').slideDown(); }, // <- this will be fired on mouseover
    function () { $(this).stop().find('.your-button-class').slideUp(); } // <- this will be fired on mouseout
); 
```

`.div-class`中继器中 DIV 的 CSS 选择器在哪里，并且`.your-button-class`是您要向下滑动的按钮的 CSS 选择器。该`stop()`函数调用将取消 DIV 上当前正在执行的任何动画，这将防止`slideDown`和/或`slideUp`调用的任何排队和/或延迟执行。

希望这可以帮助。

# apache - Apache重写到其他目录，如果文件存在那里

> ID：11262148
> 
> 赞同：2
> 
> 时间：2012-06-29T12:52:29.373
> 
> 标签：apache, mod-rewrite, rewrite, exists

我的目录如下所示：

```
/assets
  /images
    /2011
    /2012
  /images-hq
    /2011
    /2012 
```

在 html 文件中，每个图像都有一个标签，例如：

```
<img src="/assets/images/2012/example.jpg" /> 
```

我想检查 images-hq 文件夹中是否存在相同的图像，如果存在，我想将该图像发送给用户。

例子：

```
/assets/images/2012/example.jpg to /assets/images-hq/2012/example.jpg 
```

**如果**/assets/images-hq/2012/example.jpg 存在，如果不存在，则提供原件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T13:41:52.023

我试过这样做，似乎工作：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} (.*)/[a-z]+/(.+)\.(gif|jpe?g|png)$
RewriteCond %1/images-hq/%2.%3 -f
RewriteRule (.*)/[a-z]+/(.+)\.(png|jpg|jpeg)$ %1/images-hq/%2.%3 [L] 
```

我基于[这个解决方案](http://undefinedbehavior.net/2012/03/27/retina-rewrite/)

# actionscript-3 - AS3 browseForOpen 打开上次使用的文件夹

> ID：11262160
> 
> 赞同：0
> 
> 时间：2012-06-29T12:53:14.277
> 
> 标签：actionscript-3, air, filesystems

```
var f:File = File.applicationStorageDirectory.resolvePath('myFolder');
f.browseForOpen("foo"); 
```

运行该代码一次将在正确的文件夹中打开文件打开对话框。但是如果我浏览到另一个文件夹并从那里选择一个文件，然后再次运行相同的代码，打开的文件浏览对话框将在我选择最后一个文件的文件夹中打开，而不是“myFolder”。

这是什么原因以及如何预防？（browseForOpen 对话框应始终在“myFolder”中打开）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:16:20.427

同意 - 这似乎是 AIR Runtime 的问题。

browseForOpen 似乎不允许预加载目录。例如：不能有多个browseForOpen 按钮，每个按钮都针对不同的目录。虽然此功能在 Flash Professional 开发环境中有效，但它似乎不适用于已发布的 AIR 应用程序。

# java - 如何执行已上传的类的方法？

> ID：11262168
> 
> 赞同：2
> 
> 时间：2012-06-29T12:54:03.010
> 
> 标签：java, reflection, classloader

目标是实现一个可以执行`.class`已上传文件的方法的 Web 应用程序。上传的类文件以`byte[]`. 这个`.class`文件中的公共类实现了一个特定的接口。
上传后，我想调用一个方法（接口实现）。

有没有办法在正在运行的 java 应用程序中这样做？如果是，如何？

*顺便提一句。我知道安全风险。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T12:57:41.590

不应该太难：

1.  创建你自己的类加载器（不难，见下文）。
2.  使用加载类[`ClassLoader#defineClass(String, byte[], int, int)`](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#defineClass%28java.lang.String,%20byte%5B%5D,%20int,%20int%29)。
3.  检查它是否实现了您的接口 ( `YourInterface.class.isAssignableFrom(loadedClass);`)。
4.  `Class<?>`对您刚刚在步骤 1中获得的内容使用 java 反射/自省。（例如`YourInterface obj = (YourInterface)loadedClass.newInstance();`）。
5.  调用方法：`obj.shinyMethod();`

重新创建自己的类加载器：这是一个简单的，只是委托给系统类加载器：

```
class MyClassLoader extends ClassLoader {
    public MyClassLoader() {
        super(ClassLoader.getSystemClassLoader());
    }

    // Our custom public function for loading from a byte array,
    // this is here just because defineClass is final, so we
    // can't just make it public. Name can be anything you want.
    public Class<?> loadClassFromByteArray(byte[] data)
    throws ClassFormatError {
        return this.defineClass(null, data, 0, data.length);
    }
} 
```

# c# - 登录后直接从 Websecurity 获取 CurrentUserID (C#/ASP.NET)

> ID：11262170
> 
> 赞同：12
> 
> 时间：2012-06-29T12:54:11.057
> 
> 标签：c#, asp.net, security, visual-studio-2012

我有这个网站（C#/ASP.NET），用户可以在其中注册一个帐户（它是 VS11 的默认模板），在填写完所有内容并用户单击注册后，它会创建帐户并记录在用户中（效果很好）。

在这一步之后，我想获得分配给他的 UserID，但它不起作用。我在那里放了一个断点来查看“currentuserid”和“WebSecurity.CurrentUserId”的值，但它们只有一个-1值。下一步是将用户重定向到下一页，并且在该页面上这些功能起作用。我认为我可以获取 UserID，因为用户已经登录了我在此处提供的代码的第一行。

所以我的问题是，为什么它在这里不起作用？我对此很不满意，所以我显然遗漏了一些东西。

```
WebSecurity.Login(username, password);
int currentuserid = WebSecurity.CurrentUserId; // This doesn't work, only returns -1
<here I wish to update other tables but I need the user ID>
Response.Redirect("~/Welcome.cshtml"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-29T13:35:32.653

您应该使用 WebSecurity.GetUserId(username)

```
WebSecurity.Login(username, password);
int currentuserid = WebSecurity.GetUserId(username);
Response.Redirect("~/Welcome.cshtml"); 
```

看看这里： http: [//msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.getuserid(v=vs.99)](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.getuserid(v=vs.99))

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:25:48.063

来自 mdsn

> 当用户登录时，ASP.NET 在 cookie 中设置身份验证令牌，让 ASP.NET 在后续请求中知道用户已登录。如果 persistCookie 为 false，则令牌仅在用户关闭浏览器之前有效.

因此，WebSecurity.CurrentUserId 仅对后续请求有用。

您必须找到另一种获取该信息的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T14:12:32.380

请恢复 WebSecurity 连接。在默认控制器中添加以下代码：

```
 public class HomeController : Controller
        {
            public ActionResult Index()
            {
                //restore WebSecurity  connection
                if (!WebSecurity.Initialized)
                WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);

                ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

                return View();
            }
....... 
```

# php - 页面加载前在 codeigniter 中的 DOM 操作

> ID：11262173
> 
> 赞同：2
> 
> 时间：2012-06-29T12:54:23.050
> 
> 标签：php, codeigniter, content-management-system

有没有办法在加载之前或加载时修改视图文件的 html，这样包含的 div 元素可以包裹在具有特定类的现有元素周围。

举个例子：

如果我有元素

```
<div class="add-wrapper-to-this-elem">

</div> 
```

在视图文件 test_view.php 中的某处，当我通过加载视图时，`$this->load->view('test_view');`我希望视图在所有元素周围加载一个额外的包装器 div，其类为 add-wrapper-to-elem

这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:57:45.303

您可以创建一个包含内容的包装视图文件并加载此视图：

```
<div class="add-wrapper-to-this-elem">
          <?php $this->load->view('test_view');?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:58:53.987

请参阅CodeIgniter 文档中的[处理输出](http://codeigniter.com/user_guide/general/controllers.html#output)。

您可以使用 _output 函数在控制器中获取呈现的 HTML，然后使用匹配（正则表达式或其他方式）来查找您的元素并包装它们。

请参阅[askaboutphp 上的使用正则表达式提取内容。](http://www.askaboutphp.com/25/regex-extract-content.html)

# c# - 在 C# 中使用端口号发送电子邮件

> ID：11262177
> 
> 赞同：1
> 
> 时间：2012-06-29T12:54:35.233
> 
> 标签：c#, asp.net, .net, email

我想从雅虎发送电子邮件到雅虎 bt 发送失败。我用网络收到。请查看我的代码凭据。没有异常或错误，但是当打开邮箱时，没有电子邮件。我使用了一个`label`which show succesfull 文本，但当时它没有显示成功。

**.aspx 代码：**

```
<form id="form1" runat="server">

    Message from: <asp:TextBox ID="text1" runat="server"></asp:TextBox>
    Message To: <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    Message subject: <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>

   <asp:Button ID="b1" runat="server" OnClick="click" />

   <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</form> 
```

**.aspx.cs：**

```
public void click(object sender, EventArgs e)
{
    try
    {
         //mail message
         MailMessage mM = new MailMessage();

         //Mail Address
         mM.From = new MailAddress(text1.Text);

         //emailid to send
         mM.To.Add(TextBox1.Text);

         //your subject line of the message
         mM.Subject = "your subject line will go here.";

         //now attached the file
         //mM.Attachments.Add(new Attachment(@"C:\\attachedfile.jpg"));

         //add the body of the email
         mM.Body = "Your Body of the email.";
         mM.IsBodyHtml = false;

         //SMTP 
         SmtpClient SmtpServer = new SmtpClient();

         //your credential will go here
         SmtpServer.Credentials = new 

         System.Net.NetworkCredential("username", "password");

         //port number to login yahoo server
         SmtpServer.Port = 587;

         //yahoo host name
         SmtpServer.Host = "smtp.mail.yahoo.com";
         SmtpServer.EnableSsl = true;

         SmtpServer.Send(mM);
         Label1.Text = "successfull";
         //Send the email

         //end of try block
         //end of catch
     }
     catch(Exception ee){
         Console.Write(ee);
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:28:00.670

我不认为代码本身有问题。我几乎使用与您相同的代码，并且效果很好。

我认为您的设置有问题，请检查：

1.  如果 TextBox1 中收件人的电子邮件地址已经存在
2.  如果凭据的用户名和密码都正确

而且我没有在我的代码中设置 Port 属性。如果一切正常。请在此处显示您的异常信息。

# php - PHP包含没有输出？

> ID：11262182
> 
> 赞同：2
> 
> 时间：2012-06-29T12:54:50.763
> 
> 标签：php, html, include

好的，

事情就是这样。我有一个（付费的）购物车，我目前正在使用 jquery 和 css 以及其他任何让它看起来和工作得比现在更好的东西。

反正。为了使用他们的数据库和他们的功能等，我需要在网页的开头包含他们的文件。我把它放在一个

```
<div style="display:none;"> 
```

但当然，任何输出仍会写入浏览器。它不是很多，但我更喜欢没有 div 和没有输出，但我仍然希望它执行它的计算。它的 5000 行 PHP 文件和它太复杂，无法通过和编辑我不想要的位。

有没有一种聪明的方法，我可以包含该文件，但指定在包含它时是否要将任何内容写入页面？

我知道这有点麻烦，我希望我已经解释了自己，如果有人可以提供帮助，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T12:57:34.343

您可以使用[输出缓冲](http://php.net/ob_start)将输出捕获到变量中，而不是将其发送到浏览器：

```
ob_start();
require(...);
$data = ob_get_clean(); 
```

注意使用[`require`](http://php.net/require)代替`include`。那是因为我个人认为脚本在遇到包含错误时应该崩溃，而不是继续，好像没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:00:45.947

查看[ob_start()](http://us.php.net/manual/en/function.ob-start.php)和[ob_end_clean()](http://us.php.net/manual/en/function.ob-end-clean.php)。它们允许您捕获输出并将其转储，这应该可以解决您的问题。您可能还想与您的供应商讨论创建他们软件的非输出版本，这确实是它应该做的（我知道向合唱团讲道）。

`ob-end-clean`直到现在我才真正知道使用的正当理由。:-)

# sharepoint - SharePoint 2010 自定义 XSL 视图呈现与 Jquery 和评级字段

> ID：11262184
> 
> 赞同：2
> 
> 时间：2012-06-29T12:55:02.733
> 
> 标签：sharepoint, xslt, sharepoint-2010

我正在开发一个具有常见问题解答功能的 SharePoint 2010 面向 Internet 的网站。

我有一个自定义列表，其中包含 ID、标题（重命名为“问题”）、答案和评级文件。

我想编写一个 XSL 样式表，以便通过以下方式自定义列表视图呈现：

*   FAQ 项目应该显示为手风琴，使用 JQuery
*   每个常见问题解答都可以由任何用户评分。

所以，我写了这个 XSL：

```
<xsl:stylesheet xmlns:x="http://www.w3.org/2001/XMLSchema" xmlns:d="http://schemas.microsoft.com/sharepoint/dsp" version="1.0" exclude-result-prefixes="xsl msxsl ddwrt js" xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime" xmlns:asp="http://schemas.microsoft.com/ASPNET/20" xmlns:__designer="http://schemas.microsoft.com/WebParts/v2/DataView/designer" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:SharePoint="Microsoft.SharePoint.WebControls" xmlns:js="urn:custom-javascript" >

<xsl:import href="/_layouts/xsl/main.xsl"/>
<xsl:output method="html" indent="yes"/>
<xsl:template match="/">

<script type="text/javascript" language="javascript" >
        $(document).ready(function () {

            $('#faqAnswerAccordion').accordion({
                autoHeight: false,
                collapsible: true
            });

        });

    </script>   

    <a id="top"></a>
    <div id="faqAnswerAccordion">
        <xsl:apply-templates select="//Row" mode="Item" />
    </div>
</xsl:template>

<xsl:template mode="Item" match="Row[../../@TemplateType='100']">
    <xsl:param name="Fields" select="."/>
    <xsl:param name="Collapse" select="."/>
    <xsl:param name="Position" select="1"/>
    <xsl:param name="Last" select="1"/>
    <xsl:variable name="thisNode" select="."/>

    <h3 id="header_{@ID}">
        <a id="{@ID}" href="#" ><xsl:value-of select="@Title" disable-output-escaping="yes"/></a>
    </h3>
    <div>
        <p>
            <xsl:value-of select="@Answer" disable-output-escaping="yes"/>
        </p>
        <p>
            Please rate this FAQ: 
            <xsl:apply-templates select="$Fields[@Name='AverageRating']" mode="PrintField">
                <xsl:with-param name="thisNode" select="."/>
                <xsl:with-param name="Position" select="$Position"/>
            </xsl:apply-templates>
        </p>
    </div>
</xsl:template> 
```

使用该样式表，不会生成 Jquery Accordion，但会出现评级星。

如果我替换以下模板定义

```
<xsl:template match="/"> 
```

经过

```
<xsl:template match="View"> 
```

因此，Jquery Accordion 工作正常，但评级星却不行。

有任何想法吗 ？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-12T19:11:29.903

尝试更改`mode`为`number`或`body`

# vb.net - 如何启动和关闭控制台应用程序？

> ID：11262186
> 
> 赞同：0
> 
> 时间：2012-06-29T12:55:19.243
> 
> 标签：vb.net, console-application

控制台应用程序：

```
 Dim myno As Integer = 1010
    Console.WriteLine(Convert.ToString(myno))
    Dim sw As New StreamWriter("filename.txt", True)
    sw.Write(Convert.ToString(myno))
    sw.Flush()
    sw.Close()
    Console.ReadLine() 
```

Windows 应用程序：

```
 Dim mm As New System.Diagnostics.Process
    Dim info As New System.Diagnostics.ProcessStartInfo(Application.StartupPath & "\ConsoleApplication1.exe")
    mm.StartInfo = info
    mm.Start()
    Dim f As New FileInfo(Application.StartupPath & "\filename.txt")
    Dim s As StreamReader = f.OpenText
    TextBox1.Text = s.ReadToEnd
    If Not String.IsNullOrEmpty(TextBox1.Text) Then
        mm.Kill()
    End If 
```

但是，控制台应用程序不会写入文本文件，Windows 应用程序会启动但不会关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:15:44.287

您会立即尝试从文件中读取，而不是等到控制台应用程序完成对文件的写入。如果您可以控制控制台应用程序，请删除最后一个`ReadLine`，以便在完成后自动关闭。然后，您可以等待该过程结束，然后再从文件中读取。但是，如果您无法对控制台应用程序进行修改，您将不得不做一些更“骇人听闻”的事情，例如观察文件是否更改，或者等待指定的时间段并希望您的等待时间足够长。

# matlab - 更改与 x 值无关的 x 轴标签？

> ID：11262190
> 
> 赞同：4
> 
> 时间：2012-06-29T12:55:48.020
> 
> 标签：matlab, plot, axis, axis-labels

想象一下，我正在绘制例如：

```
plot(1:1500,1:1500) 
```

这将如下图所示，x 轴从 0 开始到 1500。

现在我不想有那个标签，而是 x 轴标签应该从例如 1 开始，然后在 151 结束（x 轴上的每个点增加 1/10，另外偏移 1）。

我只想更改 x 轴的标签，不想将 x 输入向量更改为绘图函数，也不想绘制其他点。我只希望 x 标记以不同的偏移量开始并增加另一个步长，与传递给绘图函数的 x 值无关。

那可能吗？如何？这会让我做一些事情变得更容易。感谢您的任何提示！

![在此处输入图像描述](../Images/b330e825770cf64d4174ffc95e001dbe.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T13:02:42.897

[您可以使用 XTick 和 XTickLabel轴属性](http://www.mathworks.com/help/techdoc/ref/axes_props.html)自定义刻度线。

例子：

```
x = 1:7;
y = rand(size(x));
plot(x,y)
set(gca, 'XTickLabel',{'Mon','Tue','Wed','Thu','Fri','Sat','Sun'}) 
```

![截屏](../Images/21d4533e94d11e2199e2a38e2b62f708.png)

# php - PHP：“a 或 b”表达式是什么意思？

> ID：11262194
> 
> 赞同：4
> 
> 时间：2012-06-29T12:56:05.810
> 
> 标签：php

遇到了这段代码：

```
<?php
require_once 'HTTP/Session/Container/DB.php';

$s = new HTTP_Session_Container_DB('mysql://user:password@localhost/db'); 

ini_get('session.auto_start') or session_start();  //HERE. ?? 

?> 
```

这种表达在 PHP 中是什么意思？[a 或 b] ？

```
ini_get('session.auto_start') or session_start(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:01:17.273

关键字`or`是“逻辑或”运算符，相当于`||`：

```
if ($x < 0 or $y < 0) // the same as:
if ($x < 0 || $y < 0) 
```

的一个属性`or`是，如果第一个操作数返回 true，则不计算第二个操作数：

```
 if (!isset($var) || $var === null)
#                     ^^^^^^^^^^^^^
#                     This code is never run if !isset($var) returns false. 
```

这可以（误）用于编写“做某事或处理错误”代码：

```
 do_something() or handle_error()
# ^^^^^^^^^^^^^^
# If do_something() returns true, there is no error to handle, 
# and handle_error() is never executed. 
```

可以使用显式更清楚地编写它`if`：

```
if (!do_something())
    handle_error(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T12:58:34.530

如果`a`解析为 PHP 可以转换为的值，`true`则`b`不会执行。

它可以用作快捷方式`if( !a ) b`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T13:01:20.690

这种表达依赖于`or`作品的方式。它通常用于检查两个布尔值之一是否为真：

```
$foo = true or false // true
$foo = false or false // false 
```

很酷的是，如果左边的部分`or`是真的，它永远不会检查后面的部分，因为它不需要。这意味着您可以在`or`. 如果左侧部分产生负值（解析为 的值`false`），则将执行右侧部分。如果左边部分产生一个正值，即解析为真，那么右边部分将永远不会被执行。

所以总结一下，这个：

```
ini_get('session.auto_start') or session_start(); 
```

与此相同：

```
if(!ini_get('session.auto_start')) session_start(); 
```

因为`ini_get('session.auto_start')`结果为`0`或`1`，其分别计算为`false`和`true`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T12:58:05.580

执行功能A，如果失败则执行功能B

你通常可以在 mysql_query("jibberish") 或 die('mysql couldt run query') 上看到这个；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T12:58:19.757

在您的情况下，如果 session.auto_start 设置为 true，则什么也不做。否则，开始会话。

a OR b 检查 a 是否为真，否则执行 b。

所以基本上，这意味着只有在默认情况下未启动会话时才启动会话。

# php - 如何实现这个子字符串？

> ID：11262199
> 
> 赞同：-3
> 
> 时间：2012-06-29T12:56:22.873
> 
> 标签：php

有一个像这样的点形式的字符串：`1.1.3`

我想`substring`从一开始就得到这个字符串，直到最后一个“。”的位置。- 1，即`1.1`。

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:58:37.483

```
$versionstring = "1.1.3";

echo substr($versionstring,0,strrpos($versionstring,".")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:01:19.630

```
mb_substr($string,0,strpos($string, ".")); 
```

# windows-phone-7 - 如何在特定时间段后停止视频？

> ID：11262202
> 
> 赞同：2
> 
> 时间：2012-06-29T12:56:37.847
> 
> 标签：windows-phone-7

我希望我的应用程序在特定时间段（比如 30 秒）后停止播放视频，并向我显示一些选项的菜单，即同时折叠媒体元素。我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:51:41.910

使用 DispatcherTimer，将其间隔设置为 30 秒，然后在滴答事件中执行代码以停止视频和计时器本身。

或者，您可以使用 Rx 中的调度程序。

# objective-c - 在 SDWebImage 中显示活动指示器

> ID：11262204
> 
> 赞同：31
> 
> 时间：2012-06-29T12:56:40.290
> 
> 标签：objective-c, uiactivityindicatorview, sdwebimage

我正在使用 SDWebView 图像，我想将活动指示器显示为占位符，同时从远程获取图像。

我在这里尝试了 Malek 的回答[How to show an activity indicator in SDWebImage](https://stackoverflow.com/questions/9388372/how-to-show-an-activity-indicator-in-sdwebimage)，但似乎

```
UIImage *cachedImage = [manager imageWithURL:url]; 
```

已弃用。

有没有人使用这个库可以告诉我如何在加载图像时插入活动指示器？

**编辑**

按照迈克尔弗雷德里克的指示，我最终得到了这段代码，一切正常。

```
UIActivityIndicatorView *activityIndicator = [[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite] autorelease];
activityIndicator.hidesWhenStopped = YES;
activityIndicator.hidden = NO;
[activityIndicator startAnimating];
activityIndicator.center = CGPointMake(self.tipImage.frame.size.width /2, self.tipImage.frame.size.height/2);
[imageView setImageWithURL:[NSURL URLWithString:imageString]
          placeholderImage:nil options:SDWebImageProgressiveDownload
                   success:^(UIImage *image) { [activityIndicator stopAnimating];[activityIndicator removeFromSuperview]; }
                   failure:^(NSError *error) {  [activityIndicator stopAnimating];[activityIndicator removeFromSuperview]; }];

[imageView addSubview:activityIndicator]; 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-01T16:49:45.200

[这个 fork](https://github.com/parsec-digital/SDWebImage)支持这个功能。看看[差异](https://github.com/rs/SDWebImage/pull/131/files)。

但是，一般来说，你可以很容易地做到这一点，而无需使用该分叉：

```
__block UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:activityStyle];
activityIndicator.center = imageView.center;
activityIndicator.hidesWhenStopped = YES;
[imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
               placeholderImage:[UIImage imageNamed:@"placeholder.png"]
                        success:^(UIImage *image) { [activityIndicator removeFromSuperview]; }
                        failure:^(NSError *error) { [activityIndicator removeFromSuperview]; }];

[imageView addSubview:activityIndicator];
[activityIndicator startAnimating]; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-07-22T10:19:53.013

这就是你的做法：

```
[imageView setIndicatorStyle:UIActivityIndicatorViewStyleWhite];
[imageView setShowActivityIndicatorView:true];
[imageView sd_setImageWithURL:[NSURL URLWithString:imageUrl] placeholderImage:[UIImage imageNamed:@"defaultl_image"]];
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-07-16T14:15:02.733

这就是我的解决方案。在那个文件中： UIImageView+WebCache.m

找到该方法并进行如下更改：

```
- (void)setImageWithURL:(NSURL *)url placeholderImage:(UIImage *)placeholder
{
    UIActivityIndicatorView *activity = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:(UIActivityIndicatorViewStyleGray)];
    [activity startAnimating];
    [activity setFrame:CGRectMake(self.frame.origin.x - 20, self.frame.origin.y - 10, self.frame.size.width, self.frame.size.height)];
    [self addSubview:activity];

    //[self setImageWithURL:url placeholderImage:placeholder options:0 progress:nil completed:nil];

    [self setImageWithURL:url
         placeholderImage:placeholder
                  options:0
                completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType)
     {
             [activity removeFromSuperview];
     }];
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-10-02T14:43:44.507

## 最后的解决方案

您可以下载[UIActivityIndi​​cator-for-SDWebImage](https://github.com/JJSaccolo/UIActivityIndicator-for-SDWebImage)，这是将 UIActivityView 添加到[**SDWebImage**](https://github.com/rs/SDWebImage)视图的最简单方法。使用 CocoaPods，只需将此行添加到您的 podfile 中：

```
pod 'UIActivityIndicator-for-SDWebImage' 
```

您可以根据自己的喜好使用这些行之一：

```
- (void)setImageWithURL:(NSURL *)url usingActivityIndicatorStyle:(UIActivityIndicatorViewStyle)activityStyle;
- (void)setImageWithURL:(NSURL *)url placeholderImage:(UIImage *)placeholder usingActivityIndicatorStyle:(UIActivityIndicatorViewStyle)activityStyle;
- (void)setImageWithURL:(NSURL *)url placeholderImage:(UIImage *)placeholder options:(SDWebImageOptions)options usingActivityIndicatorStyle:(UIActivityIndicatorViewStyle)activityStyle;
- (void)setImageWithURL:(NSURL *)url completed:(SDWebImageCompletionBlock)completedBlock usingActivityIndicatorStyle:(UIActivityIndicatorViewStyle)activityStyle;
- (void)setImageWithURL:(NSURL *)url placeholderImage:(UIImage *)placeholder completed:(SDWebImageCompletionBlock)completedBlock usingActivityIndicatorStyle:(UIActivityIndicatorViewStyle)activityStyle;
- (void)setImageWithURL:(NSURL *)url placeholderImage:(UIImage *)placeholder options:(SDWebImageOptions)options completed:(SDWebImageCompletionBlock)completedBlock usingActivityIndicatorStyle:(UIActivityIndicatorViewStyle)activityStyle;
- (void)setImageWithURL:(NSURL *)url placeholderImage:(UIImage *)placeholder options:(SDWebImageOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageCompletionBlock)completedBlock usingActivityIndicatorStyle:(UIActivityIndicatorViewStyle)activityStyle; 
```

## 使用示例

只需导入

```
#import <UIActivityIndicator-for-SDWebImage/UIImageView+UIActivityIndicatorForSDWebImage.h> 
```

并使用此代码

```
[imageView setImageWithURL:[NSURL URLWithString:@"https://media.licdn.com/mpr/mpr/wc_200_200/p/1/005/07f/0a3/30cb8dd.jpg"] placeholderImage:[UIImage imageNamed:@"myImage.jpg"] usingActivityIndicatorStyle:UIActivityIndicatorViewStyleGray]; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-02-24T05:29:09.133

SDWebImage 具有完美运行的内置活动指示器。试试这个：

**更新：SWIFT 5 SDWebImage 5.xx**

```
 imgView.sd_imageIndicator = SDWebImageActivityIndicator.gray
        imgView.sd_setImage(with: url, placeholderImage: UIImage(named: "placeholder")) 
```

斯威夫特 3：

```
imgView.setShowActivityIndicator(true)
imgView.setIndicatorStyle(.gray)
imgView.sd_setImage(with: URL(string: urlString), placeholderImage: UIImage(named: "placeholder")) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-05-03T08:14:45.500

**对于 Swift 5.0 和 SDWebImage 5.0 ：**

代替

```
imageView.sd_setShowActivityIndicatorView(true)
imageView.sd_setIndicatorStyle(.gray) 
```

经过

```
imageView.sd_imageIndicator = SDWebImageActivityIndicator.gray 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-03-13T22:03:38.193

上面的代码略有错误。'activityIndi​​cator.center = imageView.center' 行没有为您提供正确的坐标来使进度视图居中。对我来说，它显示了单元格下方的指示器。

**注意 - 我使用的是最新版本的 SDWebImage 代码，因此方法略有不同。我还在为 imageView 使用 UIButton**

试试这个：

```
NSURL *url = [NSURL URLWithString:@"www.someimageurl.com"];
__block UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
activityIndicator.frame = cell.imageView.bounds;
[cell.imageView addSubview:activityIndicator];
[activityIndicator startAnimating];
[cell.imageView setImageWithURL:url forState:UIControlStateNormal completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType) {
    [activityIndicator removeFromSuperview];
}]; 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-03-27T14:18:16.847

我相信使用最新版本的 sdwebimage 这是一种更好的方法。

```
[self.customImageView setImageWithURL:imageURL
                             placeholderImage:nil
                                      options:nil
                                     progress:^(NSUInteger receivedSize, long long expectedSize) { [self.activityIndicator startAnimating]; }
                                    completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType) { [self.activityIndicator stopAnimating]; }]; 
```

注意：如果您没有属性设置，显然 self.activityindicator 将不起作用。

我将使用 Michael Frederick 的示例来创建活动指示器。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-02-20T17:01:46.833

**与上述 SWIFT 4 中的代码相同：**

```
let activityIndicator = UIActivityIndicatorView.init(activityIndicatorStyle: UIActivityIndicatorViewStyle.gray)
    activityIndicator.center = addImage.center
    activityIndicator.hidesWhenStopped = true

    addImage.sd_setImage(with: URL(string: feed.image), completed: { (image: UIImage?, error: Error?, cacheType: SDImageCacheType, imageURL: URL?) in
        activityIndicator.removeFromSuperview()
    })

    addImage.addSubview(activityIndicator)
    activityIndicator.startAnimating() 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-04-30T05:51:28.343

**SdWebImage 5.0**

```
YOUR_IMAGEVIEW.sd_imageIndicator = SDWebImageActivityIndicator.gray 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-12-31T11:28:21.300

```
[cell.dreamImageView setImageWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@",dream.thumbnail]] placeholderImage:[UIImage imageNamed:@"dream_bg_2.png"] options:0 progress:^(NSInteger receivedSize, NSInteger expectedSize) {

    CGFloat domandeFloat = [[NSNumber numberWithInt: receivedSize] floatValue];
    CGFloat corretteFloat = [[NSNumber numberWithInt: expectedSize] floatValue];

    float currentProgress = domandeFloat/corretteFloat;

     NSLog(@"progress %f",currentProgress);
    cell.progressView.progress = currentProgress;

    //[self.dreamsTableView reloadData];

} completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType) {

    cell.progressView.hidden = YES;
}]; 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-11-02T09:19:53.117

**为使用 SDWebImage 加载图像 URL 的 Swift 2.0 更新解决方案**

```
imageView.setShowActivityIndicatorView(true)

imageView.setIndicatorStyle(.White) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-02-20T21:46:53.767

根据 Can Ürek 的回答，您可能想要创建一个类别以使其更易于跨多个应用程序使用，并且**无需修改 SDWebImage 框架**。

头文件：

```
#import <UIKit/UIKit.h>

#import <SDWebImage/UIImageView+WebCache.h>

@interface UIImageView (WebCacheWithActivityIndicator)

- (void)setImageShowingActivityIndicatorWithURL:(NSURL *)url completed:(SDWebImageCompletedBlock)completedBlock;

@end 
```

实现文件：

```
#import "UIImageView+WebCacheWithActivityIndicator.h"

@implementation UIImageView (WebCacheWithActivityIndicator)

- (void)setImageShowingActivityIndicatorWithURL:(NSURL *)url completed:(SDWebImageCompletedBlock)completedBlock
{
    UIActivityIndicatorView* activityIndication = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];

    [activityIndication setFrame:CGRectMake((self.frame.size.width - activityIndication.frame.size.width) / 2 , (self.frame.size.height - activityIndication.frame.size.height) / 2 , activityIndication.frame.size.width , activityIndication.frame.size.width)];
    [self addSubview:activityIndication];

    [activityIndication startAnimating];

    [self setImageWithURL:url completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType) {

        if(completedBlock)
        {
            completedBlock(image,error,cacheType);
        }

        [activityIndication stopAnimating];
        [activityIndication removeFromSuperview];
    }];
}
@end 
```

希望对大家有所帮助

干杯

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-04-26T21:43:57.433

另一种解决方案是使用动画图像作为占位符图像，方法是：

`[UIImage animatedImageNamed:@"animated_placeholder" duration:1]`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-06-16T07:03:45.923

使用更新的[库](https://github.com/rs/SDWebImage)（iOS 8 上已解决的崩溃问题），我们有以下方法 -

```
- (void)sd_setImageWithURL:(NSURL *)url 
{
    [self sd_setImageWithURL:url placeholderImage:nil options:0 progress:nil completed:nil];
} 
```

我们可以看到添加进度块和完成块的选项，我们可以简单地在进度块中添加活动指示器并在完成块中删除。

在此处添加活动指示器的自定义方法 -

```
- (void)sd_setImageWithURL:(NSURL *)url {

    [self sd_setImageWithURL:url placeholderImage:nil options:0 progress:^(NSInteger receivedSize, NSInteger expectedSize) {
        UIActivityIndicatorView *activity = nil;
        activity = (UIActivityIndicatorView *)[self viewWithTag:100000];
        if (!activity) {
            activity = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
            [activity setTag:100000];
            [activity setHidesWhenStopped:YES];
            [activity setCenter:CGPointMake(self.frame.size.width/2.0f,self.frame.size.height/2.0f)];
            [self addSubview:activity];
        }
        else {
            [activity setCenter:CGPointMake(self.frame.size.width/2.0f,self.frame.size.height/2.0f)];
        }
        [activity startAnimating];

    } completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) {
        UIActivityIndicatorView *activity = (UIActivityIndicatorView *)[self viewWithTag:100000];
        if ([activity isKindOfClass:[UIActivityIndicatorView class]]) {
            [activity stopAnimating];
        }
    }];
} 
```

这将在图像下载正在进行时将 UIActivityIndi​​catorView 添加到 UIImageView 的中心，并在完成时删除。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-07-16T04:37:46.027

当用户反复上下滚动列表时，我的列表非常滞后。我发现在重复调用 cellForItemAtIndexPath 时，activityindicator 被无限添加。

要解决此问题，请在您的活动指示器处添加一个标签：

```
activityIndicator.tag = 9999; 
```

在创建 UIActivityIndi​​cator 之前，添加这些行以在添加新的之前删除以前的 activityindicator：

```
UIView* toDeleteLoader = [cell viewWithTag:9999];
if(toDeleteLoader != nil){
    [toDeleteLoader removeFromSuperview];
} 
```

注意：标签内容可以是任何不会在您的单元格中使用的数字。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-03-26T19:20:45.233

对我有用的最佳解决方案如下。下载图像时显示进度指示器非常漂亮且令人鼓舞。我用作[`UICircularSlider`](https://github.com/Zedenem/UICircularSlider)圆形进度视图。你也可以试试。

```
 [_imgPost sd_setImageWithURL:urlPost placeholderImage:zeroImage options:SDWebImageContinueInBackground progress:^(NSInteger receivedSize, NSInteger expectedSize)
    {
        CGFloat domandeFloat = [[NSNumber numberWithInteger: receivedSize] floatValue];
        CGFloat corretteFloat = [[NSNumber numberWithInteger: expectedSize] floatValue];

        float currentProgress = (domandeFloat/corretteFloat)*100;

        NSLog(@"progress %.f%%",currentProgress);
        DBG(@"%li, %li", receivedSize, expectedSize);
        [_progress setValue:currentProgress];
    } completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) {

        [_progress setHidden:YES];
    }]; 
```

这`_progress`是一个实例`UICircularSlider`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-09-25T08:43:24.887

SDWebImage 5.0 支持使用 SDWebImageActivityIndi​​cator 类显示活动指示器。

```
let imageView = UIImageView()
imageView.sd_imageIndicator = SDWebImageActivityIndicator.gray 
```

# android - 在 listview getitem 中运行一次代码

> ID：11262206
> 
> 赞同：1
> 
> 时间：2012-06-29T12:56:42.980
> 
> 标签：android, listview

我已经使用自定义适配器和布局项实现了列表视图。我有一个复杂的逻辑。当列表视图首先加载时，它会根据我的逻辑显示正确的记录。但是当我向下滚动而不是向上滚动时，它改变了我的逻辑含义并更新了数据。

所以我只想在listview绑定时运行一次该逻辑..

谁能帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:39:26.947

```
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    final ViewHolder holder;

    if (convertView == null) {
        holder = new ViewHolder();

        convertView = mInflater.inflate(R.layout.shopping_cartcell_layout,
                null);
        holder.product_name = (TextView) convertView
                .findViewById(R.id.product_name);
        holder.base_price_tv = (TextView) convertView
                .findViewById(R.id.base_price_view);

        convertView.setTag(holder);

    } else {
        holder = (ViewHolder) convertView.getTag();

    }

    // here you can set your value to your view one example like below
            // if you have any arrylist then get your data and set to your view
            // for example "PRODUCTLIST" is your array list in which you store products
            // see how to set it

         if(PRODUCTLIST.get(position).getproductname !=null){

               holder.product_name.settext(PRODUCTLIST.get(position).getproductname);
              }

         if(PRODUCTLIST.get(position).getproductbaseprice !=null){

          holder.base_price_tv.settext(PRODUCTLIST.get(position).getproductbaseprice);

           }
        return convertView; 
```

# .net - 带有 WIX 的 C++ 可再发行包

> ID：11262209
> 
> 赞同：4
> 
> 时间：2012-06-29T12:56:50.077
> 
> 标签：.net, visual-c++, wix

因此，我编写了一个使用一些 Microsoft Sql 服务器 dll 的代码，这些 dll 依赖于一些 C++ 库。最初，代码在客户端机器上无法运行，但当我安装 C++ Redistributable Package 时，它​​运行良好。

我的问题是如何将这些依赖项与我的代码一起安装。我正在使用 WIX 安装软件。

谢谢，阿里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T13:10:39.873

做这个：

首先获取 C++ 可再发行组件（MSM 文件）的合并模块。通常它们位于 Merge Modules 文件夹 ( `c:\ProgramFiles\Common Files\Merge Modules`) 中（对于 win x64 C:\Program Files (x86)\Common Files\Merge Modules）。它们的名称基于架构（32/64 位）和 VC++ 版本。

在`<DirectoryRef>`目标目录的标签中添加`<Merge>`具有以下属性的节点：

```
<DirectoryRef>
    <Merge
        Id="MSVCRedist" DiskId="1" Language="0"
        SourceFile="Microsoft_VC90_CRT_x86.msm"/>
</DirectoryRef> 
```

添加`<Feature>`：

```
<Feature
    Id="VCRedist" AllowAdvertise="no" Display="hidden" Level="1"
    Title="Visual C++ 9.0 Runtime"/> 
```

`<MergeRef>`在定义中添加对先前添加`<Merge>`部分的引用`<Feature>`：

```
<MergeRef Id="MSVCRedist"/> 
```

该示例[已从此处](http://wix.sourceforge.net/manual-wix3/install_vcredist.htm)提取。

# python - django 在 vi rtualenv 中给出错误

> ID：11262215
> 
> 赞同：2
> 
> 时间：2012-06-29T12:57:10.380
> 
> 标签：python, django

我有Win7 64位。我的动作顺序如下

1.  我已经安装了 python 2.7.3。系统路径清晰。
2.  然后我确实安装了 virtualenv 和 pip
3.  接下来是我的命令序列

    *   cd c:\用户\开发者\
    *   mkdir .virtualenv
    *   cd .virtualenv
    *   virtualenv --distribute --no-site-packages djangos
    *   cd djangos
    *   光盘脚本
    *   激活.bat
    *   点安装django

现在我在系统路径环境中包含一个目录

**c:\Users\developer\.virtualenv\django\scripts**

这就是问题所在。如果输入控制台

cd c:\项目

**django-admin.py 启动项目 helloworld**

然后我得到

```
Traceback (most recent call last):
  File "C:\Users\developer\.virtualenv\djangos\Scripts\django-admin.py", line 2, in     <module>
    from django.core import management
ImportError: No module named django.core 
```

但如果我确实运行
python
和内部解释器

```
>>import django
>>django.VERSION
>>(1, 4, 0, 'final', 0)
>>from django import core
>>from django.core import managment 
```

我没有收到任何错误

创建项目的唯一方法是运行
**(djangos) c:\Projects>python c:\Users\developer.virtualenv\djangos\Scripts\django-admin.py startproject hello**

如果有办法避免每次在cli中输入完整路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:32:28.250

代替

```
django-admin.py startproject helloworld 
```

尝试

```
python django-admin.py startproject helloworld 
```

它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T06:50:39.487

问题是 Windows 会自动将*.py*文件关联到特定的*python.exe*可执行文件。即使您激活了*virtualenv*，尝试执行命令时也会引发错误：

```
django-admin.py 
```

原因是用于执行脚本的*python.exe*仍然是Windows与*.py文件关联的那个。*就我而言，默认的 Windows 关联是*C:\Python27\python.exe*。尽管已经配置并激活了 virtualenv 以指向*C:\Users\developer.virtenv\django\scripts\python.exe*。

要正确执行`djano-admin.py`，请使用完整路径，例如：

```
C:\users\developer\.virtenv\django\scripts\python.exe django-admin.py 
```

或者，删除与*.py*文件的默认 Windows 关联。这样，当*virtualenv*被激活时，它会修改*%PATH%*变量以指向虚拟环境中的*python.exe*。

~~~

（*注意：这个问题一般不会出现在 Linux 机器上。它是特定于 Windows 工作方式的。*）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:46:25.630

在我看来，您对 virtualenv 的激活失败了。因此 Django 安装在您特别排除的站点包中。尝试创建一个没有 --no-site-packages 的 virtualenv 来测试是否是这种情况。

您始终可以为快捷命令创建别名或符号链接，请尝试 google

# ipad - 让应用程序缓存适用于 iPad

> ID：11262219
> 
> 赞同：0
> 
> 时间：2012-06-29T12:57:14.793
> 
> 标签：ipad, safari, browser-cache, offline-caching, offlineapps

我无法在 iPad ios 5 上运行应用程序缓存。我的 Intranet 上有一个站点，如果我使用 Safari 或 Chrome，缓存清单被读入，文件被下载到缓存以供离线使用利用。

我已将此日志记录功能添加到我的页面：

```
function logEvent(e) {
        var online, status, type, message;
        online = (navigator.onLine) ? 'yes' : 'no';
        status = cacheStatusValues[cache.status];
        type = e.type;
        message = 'online: ' + online;
        message += ', event: ' + type;
        message += ', status: ' + status;
        if (type == 'error' && navigator.onLine) {
            message += ' (prolly a syntax error in manifest)';
        }
        console.log(message);
    } 
```

在桌面浏览器上，我收到以下消息：

Application Cache Checking 事件 Application Cache NoUpdate 事件在线：是，事件：检查，状态：空闲 /IM/:76 在线：是，事件：noupdate，状态：空闲

但是，对于 iPad，应用程序缓存不会被读取。应该注意的是，由于公司政策，iPad 需要通过备用网络连接到网站。我用 iPad 收到的信息是：

在线：是，事件：检查，状态：未缓存在线：是，事件：错误，状态：未缓存（可能是语法错误）

我们正在使用 IIS 为该站点提供服务，并且我们为 .appcache 添加了一个 MIME 类型，以用作文本/缓存清单。我确实从我的桌面在 Fiddler 中记下了，当我请求该页面时，它返回：

# 结果 协议 主机 URL 正文 缓存 内容类型 进程 注释 自定义

5 401 HTTP 10.6.4.247 /IM/cache.appcache 1,539 文本/html chrome:9976

Fiddler 说它是作为 text/html 提供的，但由于我们在代理后面，所以状态码是 401。

我不知道如何进一步调试，有人知道如何解决这个问题吗？

谢谢！

# android - AsyncTask 再一次

> ID：11262225
> 
> 赞同：0
> 
> 时间：2012-06-29T12:57:28.300
> 
> 标签：android, android-asynctask

有没有办法在完成后运行我的 AsyncTask ？

我的应用程序是捕获图像并将其放在 imagView 上，然后在其上执行 AsyncTask。我有另一个按钮来拍摄另一张照片，然后将其放置无法执行 AysncTask。

我知道表单 developer.Android AsyncTask 只能执行一次。

这是我的代码。

```
package com.ocr.id;

import java.io.File;
import java.io.IOException;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

import com.ocr.id.ip.AndroidImage;
import com.ocr.id.ip.Binarization;
import com.ocr.id.ip.Crop;
import com.ocr.id.ip.Segement;

public class PreviewActivity extends Activity {

    private ImageView previewIV;
    private final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
    private String path;
    private boolean crop = true;
    private boolean resample = true;
    Crop cropID;
    Binarization binary;
    Segement seg;
    ProgressDialog previewPD;

    OnClickListener processOnClickListener = new OnClickListener() {
        public void onClick(View v) {
            segementTask task = new segementTask();

            task.execute(path);
            }
    };

    private OnClickListener backOnClickListener = new OnClickListener() {
        public void onClick(View v) {
            startActivityForResult(
                    new Intent(MediaStore.ACTION_IMAGE_CAPTURE).putExtra(
                            MediaStore.EXTRA_OUTPUT,
                            Uri.fromFile(new File(path))),
                    CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
        }
    };

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
                previewIV.setImageBitmap(AndroidImage
                        .decodeSampledBitmapFromSDcard(path, 1000, 1000));
            }
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.preview);

        path = getIntent().getExtras().getString("path");

        previewIV = (ImageView) findViewById(R.id.previewPicID);

        Button process = (Button) findViewById(R.id.processID);
        process.setOnClickListener(processOnClickListener);

        Button back = (Button) findViewById(R.id.back);
        back.setOnClickListener(backOnClickListener);

        previewIV.setImageBitmap(AndroidImage.decodeSampledBitmapFromSDcard(
                path, 1000, 1000));
    }

    class segementTask extends AsyncTask<String, Integer, Void> {

        @Override
        protected void onPreExecute() {
            previewPD = ProgressDialog.show(PreviewActivity.this, "Id-OCR",
                    "Processing...");
            previewPD.setCancelable(false);
            super.onPreExecute();
        }

        @Override
        protected Void doInBackground(String... params) {
            try {
                seg = new Segement(PreviewActivity.this, params[0]);
                seg.segmentNumbers();
            } catch (IOException e) {
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            previewPD.dismiss();
            previewPD = null;

            Toast.makeText(PreviewActivity.this, "Processing done",
                    Toast.LENGTH_LONG).show();
            super.onPostExecute(result);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:01:58.507

您不能两次运行同一个实例。但是您可以`new segmentTask().execute()`根据需要多次调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:09:36.583

如果您想保持相同的工作线程，并在第一个图像完成后立即开始处理第二个图像，更好的解决方案可能是使用[Handler](http://developer.android.com/reference/android/os/Handler.html)。它允许您发布作业，以便它们将按顺序执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:01:10.293

设置计数

```
int mNumTaskFinished = 0; 
```

创建一个受保护的方法：

```
protected method didTaskFinished( AsyncTask task ){
     if(mNumTaskFinished == 0){
         task.execute(path);
     }
} 
```

在您的 AsyncTask 中，您可以调用：

```
@Override
    protected void onPostExecute(Void result) {
        previewPD.dismiss();
        previewPD = null;

        Toast.makeText(PreviewActivity.this, "Processing done",
                Toast.LENGTH_LONG).show();

        didTaskFinished(this);

        super.onPostExecute(result);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:03:03.557

```
protected void onPostExecute(Void result) {
            previewPD.dismiss();
            previewPD = null;

            Toast.makeText(PreviewActivity.this, "Processing done",
                    Toast.LENGTH_LONG).show();
            super.onPostExecute(result);'

            if(setAcondition) {
                new segementTask().execute(whateverPath);
            }

        } 
```

让我知道这是否是您正在寻找的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T13:03:34.850

尝试：

```
 @Override
    protected void onPostExecute(Void result) {
        previewPD.dismiss();
        previewPD = null;

        if (task.getStatus() == AsyncTask.Status.FINISHED)
            tTaskFinished();

        Toast.makeText(PreviewActivity.this, "Processing done",
                Toast.LENGTH_LONG).show();
        super.onPostExecute(result);
    }

protected void tTaskFinished( ){

     task = new MyAsyncTask();
     task.execute(path);
} 
```

# plugins - Intellij IDEA 图片评论插件？

> ID：11262226
> 
> 赞同：6
> 
> 时间：2012-06-29T12:57:31.433
> 
> 标签：plugins, comments, javadoc

我需要 IDEA 插件，它允许将图像（最好是 svg）链接或附加到 java/xml 代码注释（因为我的项目是一张图片值一千字的情况）..

那么，有没有这样的插件可用？如果没有，我自己很难实现这样的插件吗？

# android - 对于具有良好性能的自定义网格，我必须扩展什么？

> ID：11262232
> 
> 赞同：0
> 
> 时间：2012-06-29T12:57:50.063
> 
> 标签：android, gridview, custom-controls

我需要一个具有不同高度的行的 GridView。仅适用于行，不适用于行内的项目。连续的项目具有相同的高度。

我已经尝试使用 Android 的 GridView 来做到这一点，但遇到了奇怪的事情。上下滚动时，网格会扭曲，在某些时候，当向上滚动时，它会消失。如果我将所有行的高度相同，它会起作用，但是一旦它们有点不同，就会出现问题。

所以看来我必须制作一个自定义视图。它必须具有非常好的性能和低内存使用率。是否足以扩展例如相对布局，并将我的所有项目都放置在一定的上边距和左边距上？还是扩展 View 并直接绘制到画布上？还是滚动条？

嵌入式问题：这（可能取决于我是扩展一些布局还是直接查看）是否会设法仅加载出现在屏幕上的内容（列表很长，我不希望所有对象一次都在内存中) 还是我必须自己实现？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:09:39.187

我认为您无法做到并获得“良好的表现”。使 Android 高效的原因在于它对视图的回收。由于行与行之间的行高不同，我不知道它如何以任何有效的方式（或根本）回收视图。

我想这取决于行高差异是否已知/可知以及会有多少以及它们是否处于可以预测的任何模式中，因此您可以设置自定义适配器来处理视图回收。

如果您可以确定上述内容，那么扩展适配器并自己处理视图回收可能就是答案。

# google-chrome - iOS 远程调试

> ID：11262236
> 
> 赞同：211
> 
> 时间：2012-06-29T12:58:10.157
> 
> 标签：google-chrome, google-chrome-devtools, chrome-for-ios

随着最近发布的 Chrome for iOS，我想知道如何为 Chrome iOS 启用远程调试？

更新：随着 iOS 6 的发布，现在可以使用***Safari***进行远程调试。

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2014-02-26T16:33:39.373

所选答案仅适用于 Safari。目前无法在 iOS 上的 Chrome 中进行真正的远程调试，但与大多数移动浏览器一样，您可以使用[WeInRe](http://people.apache.org/~pmuellr/weinre/docs/latest/)进行一些简单的调试。设置起来有点麻烦，但可以让您检查 DOM、查看样式、更改 DOM 并使用控制台。

![在此处输入图像描述](../Images/afcdfda67fab035ba7c89149deb3a066.png)

建立：

*   安装[nodejs](http://nodejs.org/)
*   `npm install -g weinre`
*   `weinre --boundHost -all-`
*   打开 http://{wifi-ip-address}:8080/ 并复制目标脚本代码
*   将脚本标签粘贴到您的页面中（或使用小书签）
*   点击调试客户端用户界面链接（http://{wifi-ip-address}:8080/client/#anonymous）
*   当您在*客户端*下获得一条绿线时，浏览器已连接

小书签安装起来有点麻烦。如果您为桌面版和移动版 Chrome 启用了书签同步功能，这是最简单的。从本地 weinre 服务器复制书签 url（同上）。不幸的是，它不起作用，因为它的 url 编码不正确。所以打开 JavaScript 控制台并输入：

```
copy(encodeURI('')); // paste bookmarklet inside quotes 
```

您现在应该在剪贴板中有 url 编码的书签。将其粘贴到*Mobile Bookmarks*下的新书签中。称它为 weinre 或简单的类型。它应该很快同步到您的手机，因此请加载您要检查的页面。然后在 url 栏中输入书签名称，您应该会看到书签作为自动完成建议。单击它运行书签代码:)

![在此处输入图像描述](../Images/143adeb9be2d2e96e5b8ecc0e6b7b69b.png)

* * *

## 回答 #2

> 赞同：118
> 
> 时间：2012-09-26T17:23:37.043

**更新：**

这**不再**是最佳答案，请遵循[gregers](https://stackoverflow.com/questions/11262236/ios-remote-debugging/22047495#22047495)的建议。

**新答案：**

使用[温热](https://stackoverflow.com/questions/11262236/ios-remote-debugging/22047495#22047495)。

**老答案：**

您现在可以使用 Safari 进行远程调试。但它需要 iOS 6。

这是[http://html5-mobile.de/blog/ios6-remote-debugging-web-inspector的快速翻译](http://html5-mobile.de/blog/ios6-remote-debugging-web-inspector)

1.  通过 USB 将您的 iDevice 与您的 Mac 连接
2.  在 Mac 上打开 Safari 并激活开发工具
3.  在您的 iDevice 上：转到设置 > Safari > 高级并激活网络检查器
4.  使用您的 iDevice 访问任何网站
5.  在你的 Mac 上：打开开发者菜单并从你的 iDevice 中选择站点（它在顶部的 Safari 菜单中）

[正如Simons](https://stackoverflow.com/a/15428492/981933)指出的那样，需要关闭隐私浏览才能进行远程调试。

设置 > Safari > 隐私浏览 > 关闭

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2014-09-12T22:22:29.623

您目前无法在 iOS 上直接远程调试 Chrome。它使用的 uiWebView 可能与 Mobile Safari 略有不同。

你有几个选择。

**选项 1：[使用 Safari 的检查器远程调试 Mobile Safari。](https://stackoverflow.com/a/12607124)**如果您的问题在 Mobile Safari 中重现，这绝对是最好的方法。事实上，通过 iOS 模拟器更容易。

**选项 2：[使用 Weinre 获得精简的调试体验](https://stackoverflow.com/a/22047495)。** Weinre 没有太多功能，但有时它已经足够好了。

**选项 3：远程调试功能相同的适当 uiWebView。**

这是执行此操作的最佳方法。您需要[安装 XCode](https://developer.apple.com/xcode/downloads/)。

1.  转到[github.com/paulirish/iOS-WebView-App](https://github.com/paulirish/iOS-WebView-App)并“下载 Zip”或克隆。
2.  打开XCode，打开已有项目，选择刚刚下载的项目。
3.  打开 WebViewAppDelegate.m 并将 更改为`urlString`您要测试的 URL。
4.  在 iOS 模拟器中运行应用程序。
5.  打开 Safari，打开*开发*菜单，选择*iOS 模拟器*并选择您的 web 视图。
6.  Safari Inspector 现在将检查您的 uiWebView。

![在此处输入图像描述](../Images/d17472a29efe40b9832ffbc687c099f0.png)

![在此处输入图像描述](../Images/fe8d1f4b7637ca365e73d5ab2a4f0cbd.png)

![在此处输入图像描述](../Images/2d635cf10898745b6898a63c66b364fa.png)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-07-20T04:32:58.603

据我了解，Google Chrome 使用的是 iOS 的 UIWebView，而不是像 Android 对应的 Chrome 的完整实现。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-04-10T02:17:48.667

我推荐[Vorlon](http://www.vorlonjs.io/#getting-started)，像 weinre 一样工作。我喜欢 Vorlon 的 UI，它支持[SSL](http://www.vorlonjs.io/documentation/#ssl-support)，我的应用程序是 HTTPS，我用 ngrok、ghostlab 和 vorlon 尝试了 weinre，只有 vorlon 可以正常工作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-25T01:10:41.537

许多远程控制台工作正常。[http://farjs.net](http://farjs.net)是我的项目，我能够成功调试特定于 Crome iOS 的问题，而在使用它的 safari 中没有发生。（可能还有所有其他移动浏览器）

问题是注入调试代码有点棘手，因为 Chrome 不允许您安装小书签。

相反，您可以在要调试的页面上打开一个选项卡，然后在 farjs.com 上打开另一个选项卡，然后单击“书签”

复制书签 JS 代码，返回第一个选项卡，包含应调试的页面，然后将书签代码粘贴到位置栏中。

最后一步是滚动到地址栏的开头并添加“javascript:”，因为 Chrome 会删除它。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-10-26T11:45:39.163

我还没有尝试过，但是[iOS WebKit 调试代理](https://github.com/google/ios-webkit-debug-proxy/)（ios_webkit_debug_proxy / iwdp）据说可以让你远程调试 UIWebView。来自 README.md

> ios_webkit_debug_proxy（又名 iwdp）允许开发人员通过 Chrome DevTools UI 和 Chrome 远程调试协议检查***真实***和模拟 iOS 设备上的 MobileSafari和***UIWebViews 。***DevTools 请求被转换为 Apple 的 Remote Web Inspector 服务调用。

 ** * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-08-06T12:03:11.993

[Vorlon.JS](http://vorlonjs.com/)可用于 iOS 或任何其他客户端的远程调试。

1.  只需使用全局安装它`npm i -g vorlon`
2.  使用启动服务器`vorlon`
3.  在服务器运行的情况下，在浏览器中打开[http://localhost:1337](http://localhost:1337)以查看 Vorlon.JS 仪表板
4.  最后一步是通过将此脚本标签添加到您的应用程序来启用 Vorlon.JS：
    `<script src="http://<yourExternalIP>:1337/vorlon.js"></script>`
5.  所有连接的客户端，例如 iPhone、Android 将在 Vorlon.JS 仪表板的客户端列表中可用 [![在此处输入图像描述](../Images/89511ae9646e1fc724c36962dc5a5264.png)](https://i.stack.imgur.com/8YqNg.png)

请注意，此方法还可用于使用[ngrok](https://ngrok.com/)调试不在 localhost 上运行的应用程序。有关详细信息，请参阅[https://stackoverflow.com/a/45443203/2073920](https://stackoverflow.com/a/45443203/2073920)。

**免责声明**

我只是一个用户，我不隶属于 Vorlon.JS 和 ngrok

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-15T09:14:44.100

您还需要关闭“私人浏览”。

设置 > Safari > 隐私浏览 > 关闭

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-01-24T08:13:26.610

我正在使用 remotedebug-ios-webkit-adapter，在 Windows 10 上的 Chrome 中打开 IOS 和调试器对我来说效果很好。

如果它对某个人有帮助会很高兴[链接](https://github.com/RemoteDebug/remotedebug-ios-webkit-adapter#getting-started)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-08-29T17:37:46.543

注意：我与 Ghostlab 的创作者 Vanamco 没有任何关系。

能够调试特定于 Chrome 的问题对我来说很重要，因此我着手寻找可以帮助我解决此问题的方法。我最终愉快地把钱扔在了[Ghostlab 3](https://www.vanamco.com/ghostlab/)上。我可以测试 Chrome 和 Safari 移动浏览器，就像在桌面上查看它们一样。它只是给了我一个 LAN 地址，用于我想调试的任何设备。使用该地址的每个应用程序都将出现在 Ghostlab 的列表中。

[![在此处输入图像描述](../Images/4c94e9737289a71c794915a5dc56638d.png)](https://i.stack.imgur.com/RV5hg.png)

[![在此处输入图像描述](../Images/37224c6320f343a651aad382afd655fc.png)](https://i.stack.imgur.com/jYCKT.png)

强烈推荐。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-10-19T10:15:35.483

[iOS WebKit 调试代理](https://github.com/google/ios-webkit-debug-proxy#installation)是最简单的解决方案 - 直接在 Chrome 中调试和实时预览。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-07-08T09:40:12.610

甚至我也在寻找相同的功能，截至今天，它尚未实现。不过，我可以想到两种选择，

1.  我注意到 Chrome 和 Safari 的行为完全相同。Chrome 甚至支持 Safari 支持的陀螺仪和其他相关事件。我目前正在通过在 Safari 上启用调试控制台来调试我的 Web 应用程序（通过设置-> Safari）

2.  也可以试试 Adob​​e Shadow，它允许远程调试/检查和同步。

HTH。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-08-06T12:54:31.183

Adobe Edge Inspect ( [https://creative.adobe.com/products/inspect](https://creative.adobe.com/products/inspect) ) 是调试所有移动设备 IOS 和 Android（虽然没有 Windows Phone）的另一种方法。它使用 weinre 进行远程 DOM 检查/更改。这不是最快的方法，但它适用于 Windows。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-04-04T15:56:09.427

Chromium 上有一个未解决的错误：[https ://bugs.chromium.org/p/chromium/issues/detail?id=584905](https://bugs.chromium.org/p/chromium/issues/detail?id=584905)

不幸的是，他们依靠 Apple 在 WKView 中打开一个 API 来实现这一点，之后*也许*可以从 Safari 进行调试。*

# jquery - 如何应用悬停效果来显示和隐藏每个 div 上的按钮？

> ID：11262237
> 
> 赞同：2
> 
> 时间：2012-06-29T12:58:13.557
> 
> 标签：jquery

```
$(document).ready(function () {   
    $("#divHeader")) {
        $(this).hover(function () {
            $(this).find('#edit').show();
            $(this).find('#spandate').removeClass("datetime");
            $(this).find('#spandate').addClass("edit");
        },
        function () {
            $(this).find('#edit').hide();
            $(this).find('#spandate').addClass("datetime");
            $(this).find('#spandate').removeClass("edit");
        });
}); 
```

在我的页面中，我有 3 个具有相同名称的 div ("divHeader") ，但它仅适用于第一个 div 并跳过其他两个。

请告诉我如何申请所有使用ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:02:15.537

```
$(".aClass").hover(function () {
         $(this).find('#edit').show();
         $(this).find('#spandate').removeClass("datetime");
         $(this).find('#spandate').addClass("edit");
     },
     function () {
         $(this).find('#edit').hide();
         $(this).find('#spandate').addClass("datetime");
         $(this).find('#spandate').removeClass("edit");
}); 
```

创建一个类，示例显示“aClass”，并使用它。如图所示，in out 的事件处理程序将在悬停的 div 中找到 id 为 spandate 的元素。

# erase - InkCanvas：如何在鼠标右键单击时通过 Stroke 擦除

> ID：11262240
> 
> 赞同：0
> 
> 时间：2012-06-29T12:58:25.300
> 
> 标签：erase, stroke, inkcanvas, right-mouse-button

我有一个在 InkCanvasEditingMode.Ink 中工作的 InkCanvas。但是当用户按下右键时，我想擦除整个笔画。请帮我一个建议好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T21:33:22.370

我不确定您愿意擦除哪个笔画，但 InkCanvas 有一个“Stokes”属性，其中包含画布的所有笔画。例如，要从画布中删除所有笔划：

```
inkCanvas.Strokes.Clear() 
```

现在你所要做的就是打掉相关的。

# list - JQtouch：滚动到带有链接的列表中的锚点

> ID：11262244
> 
> 赞同：0
> 
> 时间：2012-06-29T12:58:35.313
> 
> 标签：list, cordova, scroll, anchor, jqtouch

我已经习惯了很多时间，弄清楚（谷歌搜索）如何制作一个butten，向下滚动到 edgetoedge 列表中的特定 <li>。我将 JQtouch 与 Zepto 和 PhoneGap (Cordova) 一起使用。

这是我非常简单的示例，我尝试使用 html 锚点。它不起作用：

```
<div id="ListPage">
 <div> <a href="#b">jump to b</a> </div>
  <div class="scroll">
 <ul>
  <li><a name="a" />Some text</li>
    .
    . 
  50 times li.... :)
    .
    .
  <li><a name="b" />Some text</li>
  .
    . 
  50 times li.... :)
    .
    .
  </ul>
 </div>
</div> 
```

我不能使用 ID，因为 JQtouch 使用 id 和 a 进行页面转换..

该怎么办...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:49:04.670

这可能会有所帮助，它适用于我在一个单独的场景：

```
var pos = $("a[name=a]").position();
$('html, body').animate( { scrollTop: pos.top }, 'slow' ); 
```

# java - 更改类和对象。（其他方法？）

> ID：11262245
> 
> 赞同：3
> 
> 时间：2012-06-29T12:58:36.363
> 
> 标签：java, c++, class, inheritance, runtime

当我想这样做时，我遇到过几种情况。这可能是一个例子：

考虑国际象棋游戏的可能实现。我们定义了抽象类 'Piece' 和继承自它的类：'bishop' 'peon' 'tower' 'horse' 'queen' 等

我们可能让我们的 peon 即将到达棋盘的尽头，并且可能需要调用该 peon 对象的方法来将该对象的类更改为“Queen”、“horse”或其他任何东西。

所以我的问题是，有没有办法在 C++ 或 Java 中做到这一点？如果没有，用任何其他语言？另外，一般情况下还有其他方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T13:02:19.463

在像 C++ 或 Java 这样的语言中，我会创建一个新的“Queen”或“Horse”实例，并用那个新实例替换“Peon”实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T13:08:36.780

我认为您对对象的想法与对象的使用方式相混淆。在面向对象的语言中，我们有指示对象实例的内存位置的指针：

```
Piece pointerToPieceObject = new Peon(); 
```

在上面的语句中，`pointerToPieceObject`是 "type" `Piece`。因为`Peon`和`Queen`都继承自`Piece`，所以这个指针可以指向以下任何类型的对象实例：

```
pointerToPieceObject = new Queen(); 
```

这是任何面向对象语言都支持的非常普遍的概念。这些语言之间的唯一区别是处理类型的方式（例如 Python 与 Java）。这个概念被称为多态性，可以用来做比上面的例子更有趣的事情：[http ://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:01:28.753

您也许可以使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)或[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。

带装饰器：

```
interface ChessPiece {
    Set<Move> getPossibleMoves();
    Image getAppearance();
}

class Pawn implements ChessPiece {
    ...
}

class Decorator implements ChessPiece {
    ChessPiece decorated;

    public Decorator(ChessPiece decorated_) {
        this.decorated = decorated_;
    }

    @override
    Set<Move> getPossibleMoves() {
        Set<Move> result = decorated.getPossibleMoves();
        // alter result
        return result;
    }
} 
```

需要时，您将`Pawn`实例替换为`Decorated`实例。 *[因此，它仍然涉及用OpenSause 的](https://stackoverflow.com/users/583274/opensauce)**回答**中提到的另一个实例替换一个实例。*

```
ChessPiece pawn = new Pawn;
...
pawn = new Decorated(pawn); 
```

当您提前计划时，您可以使用 strategy*它仍然没有真正改变类*：

```
interface PossibleMovesStrategy {
    Set<Move> getPossibleMoves();
}

interface AppearanceStrategy {
    Image getAppearance();
}

class ChangingChessPiece extends ChessPiece {
    PossibleMovesStrategy posMoves;
    AppearanceStrategy appearance;

    @override
    Set<Move> getPossibleMoves() {
        return posMoves.getPossibleMoves();
    }

    @override
    Image getAppearance() {
        return appearance.getAppearance();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:04:06.917

我看到两个简单的选择：

1.  让`type`一个*字段*设置为// ...`Pice`的实例（可能是单例，例如实现为枚举），这样您就可以轻松更改它。`Bishop``Queen`

2.  只需删除`Peon`并在其位置创建一个新的`Queen`/ `Horse`/... 即可。我不认为对象身份在这里非常重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T13:04:07.517

简短的回答是否定的，您不能更改对象的类。您需要将其替换为所需类的新对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T15:19:14.077

对于通用的基本类“升级”或“演变”到更高、更定义的类的情况，您可能希望所有定义更明确的类（Knight、Queen、Bishop）都有一个采用 Peon 类的构造函数，在这种情况下，典当。如果 Pawn 和 Knight 和 Queen 以及所有棋子都有一个共同的基础，那么在 Knight/Queen/etc 的构造函数中，您将可以访问该基类中的受保护变量，并且可以将 Pawn 克隆到下一个类中。

```
class Pawn extends ChessPiece {...}

class Queen extends ChessPiece {
    public Queen(Pawn p) {
        // DON'T accept a ChessPiece unless you want
        // knights or rooks to become queens.

        // copy p's variables here
    }
}

ChessPiece piece= new Pawn();
// Sometime later...
if (piece is Pawn)
    piece = new Queen((Pawn)piece); 
```

这与您可能能够更改班级一样接近。

# ajax - 在 Primefaces 中使用 AJAX 时 p:commandbutton 不会触发事件

> ID：11262248
> 
> 赞同：0
> 
> 时间：2012-06-29T12:58:42.863
> 
> 标签：ajax, jsf, button, primefaces

这是老问题，以前很多人都问过这个问题，但是在阅读了这些问题和答案后，我无法解决我的问题。这是一个非常简单的情况，面板内部的面板是提交按钮以呈现结果面板。如果我添加 immediate="true" 它以某种方式工作，但并不完全像我想要的那样。这基本上就像 Primeface 展示中的展示示例一样简单，但仍然无法正常工作。

案例：当我按下 AJAX 搜索按钮时，它永远不会转到我的托管 bean partnerController.search()。为什么不？

```
 <p:row>
        <p:column></p:column>
        <p:column><p:commandButton actionListener="#{partnerController.search()}" value="AJAX Search" style="width: 210px; height: 40px;" ajax="true" update="result"/></p:column>

    </p:row>
  </p:panelGrid>

        </p:panel>
        <br />
         <p:panel id="result" rendered="#{partnerController.result.size()>0}">
            <p:scrollPanel style="width:250px;height:200px">  
                <p:dataGrid var="partner" value="#{partnerController.result}" columns="3">  
                    <p:panel header="#{partner.name}" style="text-align:center">  
                        <h:panelGrid columns="1" style="width:100%;" styleClass="noBorders">  
                            <h:outputText value="#{partner.contactPerson}" />  
                            <h:outputText value="#{partner.address}" />  
                            <h:outputText value="#{partner.phone}" />  
                            <h:outputText value="#{partner.email}" />  
                        </h:panelGrid>  
                    </p:panel>  
                </p:dataGrid>  
            </p:scrollPanel>  
            </p:panel>

    </h:form> 
```

我目前在控制器中使用模型：

```
public List<Partner> search(){

        System.out.println("search()search()search()search()search()search()search()");
        result = new ArrayList<Partner>();
        Partner test = new Partner();
        test.setName("Steve Stacko'partner");
        test.setContactPerson("Sami");
        result.add(test);
        System.out.println("----------off-----------");
        return result;
    } 
```

如果没有 immediate="true"，它永远不会进入 managedBean 的搜索方法。Primefaces 的展示说它是这样工作的，但在我的情况下不是这样。

这是 Primefaces 展示： http: [//www.primefaces.org/showcase-labs/ui/commandButton.jsf](http://www.primefaces.org/showcase-labs/ui/commandButton.jsf)

谢谢你帮助我！顺便说一句，我使用的是 PF 3.4-SNAPSHOT 版本。萨米人

# php - 通过 facebook 登录 wordpress

> ID：11262252
> 
> 赞同：0
> 
> 时间：2012-06-29T12:58:57.397
> 
> 标签：php, facebook, wordpress

我希望在我的 wordpress 网站中，用户可以通过他们的 facebook 帐户登录，，

这意味着当用户单击按钮通过我网站上的 facebook 帐户连接时，它将创建一个具有与 facebook 完全相同的凭据的用户。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:04:57.490

检查这个 wordpress 插件——

[http://wordpress.org/extend/plugins/simple-facebook-connect/screenshots/](http://wordpress.org/extend/plugins/simple-facebook-connect/screenshots/)

# javascript - 如何编写图像滑块？

> ID：11262253
> 
> 赞同：2
> 
> 时间：2012-06-29T12:58:57.733
> 
> 标签：javascript, jquery

如何编写类似于[Nivo 滑块的图像滑块](http://nivo.dev7studios.com/)？必须使用 Javascript/Jquery。

我想学习并创建自己的解决方案，因此我不希望为此建议任何插件。

有没有人可以给我任何建议，即我不应该做什么？起点等？如果有人知道任何好的教程会很好。虽然只是有用的教程，而不是那些只是告诉你在一堆杂乱无章的负载结束时下载源代码的教程。

我想到的一种方法是将所有图像插入到 div 中，并隐藏所有这些 div，然后一个接一个地取消隐藏这些 div 并将它们滑入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:16:36.760

[http://naldzgraphics.net/tutorials/25-must-learn-slider-tutorials-with-jquery/](http://naldzgraphics.net/tutorials/25-must-learn-slider-tutorials-with-jquery/)

[http://designmodo.com/image-slider-jquery-css3/](http://designmodo.com/image-slider-jquery-css3/)

和

[http://www.google.com/search?q=jquery+create+slider](http://www.google.com/search?q=jquery+create+slider)

祝你好运

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:16:53.027

你可以做这样的事情：

```
// create an array of images (borrowed from Nivo Slider site)
var images = ["http://nivo.dev7studios.com/wp-content/uploads/2011/08/nemo.png", "http://nivo.dev7studios.com/wp-content/uploads/2011/08/walle.png", "http://nivo.dev7studios.com/wp-content/uploads/2011/08/toystory.png"];

// some variables
var imgNum = 0;
var imgLength = images.length - 1;

// function to change images
function changeImage(direction) {
    // get next image number
    imgNum = imgNum + direction;
    // make sure we loop
    if (imgNum > imgLength) {
        imgNum = 0;
    }
    if (imgNum < 0) {
        imgNum = imgLength;
    }
    // change the src attribute of the image
    document.getElementById('slideshow').src = images[imgNum];
    return false; // prevent default link
}

// call changeImage function on interval (3 seconds here)
window.setInterval(function() {
    changeImage(1);
}, 3000);​ 
```

**[简单的工作示例在这里](http://jsfiddle.net/manseuk/sEBmg/)**

我确信有办法改进和扩展这段代码——这是一个带有下一个/上一个按钮和一个计时器的图像滑块的简单示例。效果是完全不同的球类游戏-我建议您查看 Nivo Slider 的源代码

## 更新 - 预加载....

我`div`在图像底部添加了一个预加载图像，然后在此处使用`display:none`css 属性[示例](http://jsfiddle.net/manseuk/sEBmg/1/)隐藏它们。

`div`你可以很容易地使用 JavaScript创建这个隐藏：

```
window.onload = function() {
    for (var i = 0; i <= imgLength; i++) {
        var img = document.createElement('img');
        img.src = images[i];
        document.getElementById('preload').appendChild(img);
    }
}​ 
```

[这里的例子](http://jsfiddle.net/manseuk/sEBmg/2/)

# objective-c - 如何从另一个表视图中的一个表视图中获取显示的字符串？

> ID：11262256
> 
> 赞同：0
> 
> 时间：2012-06-29T12:59:01.797
> 
> 标签：objective-c, uitabbarcontroller, uitableview

我将字符串从控制器A（选项卡栏中的第二项）传递给控制器​​B（选项卡栏中的第一项），将该字符串添加到数组并希望显示它。我调用了 reloadData 但表视图仍然是空的。我必须做什么才能让我的字符串显示在控制器 B 中？（这两个控制器连接到两个不同的导航控制器，我不想使用序列）。

这是一些代码：//ControllerA

```
ControllerB *bController = [[ControllerB alloc]init];
bController.myString = self.cellLabel.text;
[tableController addButtonIsPressed];

//ControllerB.h
@property (copy, readwrite) NSString *myString;

//ControllerB.m 
```

-(void)addButtonIsPressed {

```
[myData addObject:@"myString"]; //in NSLog I can see correct value of myString
[self.tableView reloadData]; 
```

}

现在我意识到当我在控制台中打印 myData 时它是空的。即使我在此方法中使用 viewDidLoad 中的值初始化 myData，它的 (null)..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:35:53.093

我们需要更多信息，但问题可能出在此处：

```
ControllerB *bController = [[ControllerB alloc]init]; 
```

您声明**另一个**控制器可能不是显示的同一控制器。因为我没有看到任何内容：[self displayModal ....] 你只是用正确的“mystring”创建了一个 B 控制器，但你正在显示另一个 B 控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:00:31.840

根据您的回答，这里有一些想法。希望能帮助到你：

1.  当您有两个或多个视图控制器时，约定是父控制器通过设置其属性直接与子控制器对话。但是，当孩子想与父母交谈时，它通过使用委托来实现。

当您有两个并行控制器时也是如此，就像您的情况一样。他们不应该直接设置彼此的属性。**他们应该使用委托。**

1.  此外，在您的情况下，`ControllerB`您实例化的实例与屏幕上的实例不同。这是一个新的！这是一个新的实例，`ControllerB`与屏幕上的实例完全无关。

如果您搜索，您可以找到几个如何进行委派的示例。

# django - 如何让我的 Django 项目更易于管理

> ID：11262259
> 
> 赞同：1
> 
> 时间：2012-06-29T12:59:16.213
> 
> 标签：django, django-apps

来自经典的 ASP，我们现在正在开发一个相对较大的 Django 应用程序。我们正试图弄清楚如何将这个项目的代码分成可管理的部分。

为了便于讨论，假设我们有 CLIENTS，他们与 USERS 具有多对多关系，这些用户具有一个 ROLE，并且每个角色与 RIGHTS 具有多对多关系。
目前，我们将所有这些都放在一个名为“后台”的应用程序中。

缺点是后台应用程序中的 forms.py 和 views.py 包含所有这些实体的类。因为应用程序肯定会增长，我们希望将这些实体的代码分成几个文件。因此，即使它们不是真正独立的应用程序（我认为），它们肯定在处理我们项目后台部分的不同部分。

我在互联网上阅读过，似乎有两种情绪；[一种是](http://110j.wordpress.com/2009/06/17/organize-django-applications/)将models.py和views.py等拆分成文件夹/模块。在这些文件夹中，我们可以有一个 clients.py/users.py/roles.py 等。这将保持应用程序完整，但将代码分开。最后，我们将拥有一个包含大量文件的大型应用程序。

[另一种](https://stackoverflow.com/questions/1160579/models-py-getting-huge-what-is-the-best-way-to-break-it-up)选择是拆分代码并将客户端、用户和角色转换为单独的应用程序，并完全删除我们现在拥有的“后台”应用程序。Django 鼓励分割成更小的应用程序，但这些并不是真正独立的应用程序，客户端用户和角色密切相关，我们正在创建的维护工具反映了这一点。

我实际上是通过在“后台”应用程序中创建更小的（子）应用程序开始的，但我发现[这里](http://django-irc-logs.com/2012/mar/16/)是不行的。

问题是，应用程序应该鼓励重复使用，我们正在构建的大型网络应用程序有很多部分相互交织并相互依赖。没有真正的方法可以将它分成更小的可重复使用的部分，这些部分在现实世界中是有意义的。

所以问题真的是；在此示例中，分离用户/客户/角色的代码的明智方法是什么？这两种方法的优点/缺点是什么？也许甚至还有一种完全不同的方法，我们还没有找到......

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:40:10.333

始终使用单独的应用程序。细分 models.py 等是一种 hack，并且可以像您期望的 hack 一样工作。您将花费大量时间来修复接线。

小型、独立的应用程序的主要优点是可重用性。实际上，您甚至不必让它们成为您项目的一部分。事实上，我建议你不要这样做。相反，您可以单独打包每个部分，然后像任何其他第三方应用程序一样安装它们，然后在`INSTALLED_APPS`. 这样，您的项目只关注您项目的独特之处，您可以稍后将它们放入其他项目中。这还有一个附带的好处，那就是*迫使*您编写自包含代码并减少对各个部分和您的项目的依赖。

但是，FWIW，您描述的大多数功能已经在 Django 的`auth`contrib 包中融入了它。尚未烘焙的内容已作为第三方软件包提供，因此无论如何您实际上只是在这里旋转您的轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:52:13.723

我会考虑将每个分离到自己的应用程序中。应用程序结构可能会产生误导。尽管有许多可重用/可插入的 django 应用程序，但许多项目并没有尝试重新打包每个应用程序以供重用。应用程序只是提供了很好的代码分离。

我会想象一个`Role`有一个模型。可能具有特定于角色的实用功能，如果它是面向外的，则可能具有特定于滚动的 url。

这些可能是基本的 crud 操作。

`/roles/add`, `/roles/delete` `/roles/create`,`/roles/update/` 这些中的每一个都可以保证他们自己的应用程序和 urls.py。如果客户端具有相同的操作，那么它们真的不应该位于同一个视图中。

这可以通过同一个应用程序中的多个视图来解决，但我认为这不恰当地利用了应用程序结构。

# php - 在 mysql 和 php 中寻找空闲时间块？

> ID：11262260
> 
> 赞同：1
> 
> 时间：2012-06-29T12:59:17.643
> 
> 标签：php, mysql, time, appointment

我在mysql中有一个这样的表：

```
+------------+------------+------------+------------+ 
|     date   |   user_id  | start_hour | end_hour   | 
+------------+------------+------------+------------+ 
| 2010-12-15 |         20 | 08:00:00   | 08:15:00   | 
| 2010-12-15 |         20 | 14:00:00   | 14:30:00   | 
| 2010-12-15 |         20 | 17:00:00   | 17:45:00   | 
+------------+------------+------------+------------+ 
```

[我尝试提取我在这里](http://www.artfulsoftware.com/infotree/queries.php#577)找到的用户的时间范围和示例，但我无法在小时内完成这项工作

我试过查询：

```
 $sql="
SELECT a.end_hour AS 'Available From', Min(b.start_hour) AS 'To' 

FROM ( 
SELECT  0 as date, '08:00:00' as start_hour,'08:00:00' as end_hour 
UNION SELECT date, start_hour, end_hour FROM table
) 

AS a JOIN 
( SELECT  date, start_hour, end_hour  FROM table 
UNION SELECT 0,  '21:00:00' as start_hour, '22:00:00' as end_hour
) AS b ON

a.date=b.date AND  a.user_id=b.user_id AND a.end_hour < b.start_hour WHERE  
a.date='$date'  AND a.user_id='$user_id' GROUP BY a.end_hour 
HAVING a.end_hour < Min(b.start_hour);"; 
```

我需要创建一个从 08:00 到 21:00 的范围，其中约会之间的空闲块如下所示：

```
free time
08:15:00 to 14:00:00
14:30:00 to 17:00:00
17:45:00 to 21:00:00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:53:04.447

试试这个查询

```
SELECT
  a.id,
  a.start_hour,
  a.end_hour,
  TIMEDIFF(la.start_hour, a.end_hour) as `Free Time`
FROM appointment as a
  LEFT JOIN(SELECT * FROM appointment LIMIT 1,18446744073709551615) AS la
    ON la.id = a.id + 1
  LEFT JOIN (SELECT * FROM appointment) AS ra ON a.id = ra.id 
```

这将显示这些结果

```
+---------------------------------------------+
¦ id ¦ start_hour BY ¦ end_hour   | Free Time |
¦----+---------------¦------------------------|
¦  1 ¦   08:00:00    ¦  08:15:00  | 05:45:00  |
¦  2 ¦   14:00:00    ¦  14:30:00  | 02:30:00  |
¦  3 ¦   17:00:00    ¦  17:45:00  | 03:15:00  |
¦  4 ¦   21:00:00    ¦  21:00:00  | (NULL)    |
+--------------------+------------------------+ 
```

此外，您必须在表中包含 21:00:00，否则您将无法获得最后的时差。我在表格中输入了 21:00:00 作为开始和结束日期。

## 已编辑

这是修改后的查询

```
SELECT
  a.id,
  a.end_hour AS `Free time Start`,
  IFNULL(la.start_hour,a.end_hour) AS `Free Time End`,
  IFNULL(TIMEDIFF(la.start_hour, a.end_hour),'00:00:00') AS `Total Free Time`
FROM appointment AS a
  LEFT JOIN (SELECT * FROM appointment LIMIT 1,18446744073709551615) AS la
    ON la.id = (SELECT MIN(id) FROM appointment where id > a.id LIMIT 1) 
```

结果是

```
+--------------------------------------------------------+
¦ id ¦ Free time Start ¦ Free Time End | Total Free Time |
¦----+-----------------¦---------------------------------|
¦  1 ¦   08:15:00      ¦ 14:00:00      |    05:45:00     |
¦  2 ¦   14:30:00      ¦ 17:00:00      |    02:30:00     |
¦  3 ¦   17:45:00      ¦ 21:00:00      |    03:15:00     |
¦  4 ¦   21:00:00      ¦ 21:00:00      |    00:00:00     |
+----------------------+---------------------------------+ 
```

从这个查询中学习的要点是

1.  Timediff 函数用法。timediff('结束时间','开始时间')
2.  加入大号
3.  避免连接中的第一条记录具有较长的偏移量，并且限制从 1 开始而不是 0
4.  IFNULL 用法 ifnull('if here come null','select this then')

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:24:33.297

试试这个查询我希望它对你有用.....

```
SELECT
  a.id,
  a.end_hour    AS `Free time Start`,
  la.start_hour AS `Free Time End`,
  IFNULL(TIMEDIFF(la.start_hour, a.end_hour),'00:00:00') AS `Total Free Time`
FROM appointment AS a
  LEFT JOIN (SELECT *
             FROM appointment
             LIMIT 1,18446744073709551615) AS la
    ON la.id = (SELECT
                  id
                FROM appointment
                WHERE id NOT IN(a.id)
                ORDER BY (a.id > id)ASC
                LIMIT 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:20:14.447

这将为您提供结束时间块

```
SELECT T_a.end_hour
FROM (table AS T_a) LEFT JOIN (table AS T_b)
ON (T_a.`date`=T_b.`date` AND T_b.start_hour<=T_a.end_hour AND T_b.end_hour>T_a.end_hour)
WHERE T_b.user_id IS NULL 
```

这将为您提供开始时间块

```
SELECT T_a.start_hour
FROM (table AS T_a) LEFT JOIN (table AS T_b)
ON (T_a.`date`=T_b.`date` AND T_b.start_hour<T_a.start_hour AND T_b.end_hour>=T_a.start_hour)
WHERE T_b.user_id IS NULL 
```

这些查询将查找未交叉或对接其他插槽的开始或结束。所以 10-11 11-12 将给出 10 开始，12 结束 = 空闲时间是 08-10 和 12-21

所以空闲时间是 08:00（除非它是开始时间）到第一个“开始”时间，然后匹配对 END->START 到最后一个 END->21:00（除非 21:00 是最后一个结束）

注意您还需要添加日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:50:19.687

也许这已经结束了，但这适用于 sql-server，不确定转换为 mysql 的努力

```
declare @AvailableTime table ( AvailableDate date,  StartTime time, EndTime time )

insert into @AvailableTime values 
('15 dec 2010', '08:00:00', '21:00:00')

declare @Booking table (BookingDate date, UserId int, StartTime Time, EndTime Time)

insert into @Booking values 
('15 dec 2010', 20, '08:00:00', '08:15:00'),
('15 dec 2010', 20, '14:00:00', '14:30:00'),
('15 dec 2010', 20, '17:00:00', '17:45:00')

select 
    *
from
(
    -- first SELECT get start boundry
    select t.StartTime s, b.StartTime e
    from @AvailableTime t, @Booking b
    where 
        t.AvailableDate = b.BookingDate and (t.StartTime <= b.EndTime and b.StartTime <= t.EndTime) and t.StartTime <> b.StartTime
    and
        not exists (select 1 from @Booking b2 where b2.BookingDate = b.BookingDate and b2.StartTime < b.StartTime)

    union

    -- second SELECT get spikes ie middle
    select b1.EndTime s, b2.StartTime e
    from @AvailableTime t, @Booking b1, @Booking b2
    where 
        t.AvailableDate = b1.BookingDate and (t.StartTime <= b1.EndTime and b1.StartTime <= t.EndTime) 
    and 
        t.AvailableDate = b2.BookingDate and (t.StartTime <= b2.EndTime and b2.StartTime <= t.EndTime) 
    and 
        b1.EndTime < b2.StartTime
    and
        not exists (select 1 from @Booking b3 where b3.BookingDate = t.AvailableDate and b3.StartTime > b1.EndTime and b3.EndTime < b2.StartTime)

    union

    -- third SELECT get end boundry
    select b.EndTime s, t.EndTime e
    from @AvailableTime t, @Booking b
    where 
        t.AvailableDate = b.BookingDate and (t.StartTime <= b.EndTime and b.StartTime <= t.EndTime) and t.EndTime <> b.EndTime
    and 
        not exists (select 1 from @Booking b2 where b2.BookingDate = b.BookingDate and b2.StartTime > b.StartTime)
) t1 
```

# jquery - 使用 RequireJS 时，KnockoutJS 无法解析绑定

> ID：11262267
> 
> 赞同：1
> 
> 时间：2012-06-29T12:59:44.337
> 
> 标签：jquery, ajax, knockout.js, requirejs

我有两个选择列表。第二个应该根据第一个的值和从 ajax 请求返回的数据来填充：

```
<select id="parent" data-bind="options: parentOptions, value:selectedParentOption, optionsText: 'parent_name'"></select>
<select id="children" data-bind="value:selectedChildOption, visible:hasChildOptions">
   <!-- ko if:hasChildOptions -->
       <!-- ko foreach: children -->
           <option data-bind="text: child_name, option:$data"></option>
       <!-- /ko -->
    <!-- /ko -->
</select> 
```

我之前有它工作过，但我试图用 RequireJS 将功能抽象到单独的模块中：

```
// VIEWMODEL MODULE
define(["knockout", "ajax"], function(ko, ajax) {
return function ViewModel()
{
        self = this;
        self.parentOptions = ko.observable();
        self.selectedParentOption = ko.observable();
        self.hasChildOptions = ko.computed(function(){
            if(!self.selectedParentOption()) return false;
            if(!self.selectedParentOption().has_children)) return false;
            childOptions = ajax.loadChildOptions(self.selectedParentOption().id);
            childOptions.success(function(data){
                self.childOptions(data);
            })
            return true;
        })
        self.childOptions = ko.observableArray([]);
        self.selectedChildOption = ko.observable();
}
});

//AJAX MODULE
define(['jquery', 'knockout', 'parentoption', 'childoption'], function($, ko, ParentOption, ChildOption){
    function loadParentOptions () {
        return $.getJSON('get_parent_options', function(data){
            var mappedParentOptions = $.map(data, function(item){
                 return new ParentOption(item.id, item.parent_name, item.has_children);
            })
            return mappedParentOptions;
        })
    }

    function loadChildOptions (parentId) {
        return $.getJSON('get_child_options', { parent: parentId}, function(data){
            var mappedChildOptions = $.map(data, function(item){
                return new ChildOption(item.id, item.child_name);
            })
            return mappedChildOptions;
        })
   }

   return {
        loadParentOptions: loadParentOptions,
        loadChildOptions: loadChildOptions
   }
});

//PARENT OPTION MODULE
define(["knockout"], function(ko){
    return function ParentOption(id, name, has_children){
        this.id = ko.observable(id);
        this.parent_name = ko.observable(name);
        this.has_children = ko.observable(has_children);
    }
})

//CHILD OPTION MODULE
define(["knockout"], function(ko){
    return function ChildOption(id, name){
        this.id = ko.observable(id);
        this.child_name = ko.observable(name);
    }
}) 
```

它开始了

```
define(["jquery", "knockout", "viewmodel", "ajax"],function($, ko, ViewModel, ajax) {
    var vm = new ViewModel();
    ko.applyBindings(vm);
    parentOptions = ajax.loadParentOptions();
    parentOptions.success(function(data){
        vm.parentOptions(data);
    });
}); 
```

在我将东西移动到模块之前它工作正常，所以我很确定我来自服务器的 json 没问题，但现在我得到了：

```
Uncaught Error: Unable to parse bindings.
Message: ReferenceError: child_name is not defined;
Bindings value: text: child_name, option:$data 
```

第一个选择列表填充正常。

# web-services - 按国家/地区获取利率

> ID：11262270
> 
> 赞同：3
> 
> 时间：2012-06-29T13:00:09.063
> 
> 标签：web-services, rest

我有时间获取有关利率的数据。我想我可以抓取一小堆中央银行网站。更好的是我可以获得中央银行利率或优惠利率信息的服务。

有谁知道这方面的免费资源？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:34:12.863

圣路易斯联邦储备银行是一个很好的来源。他们有一个 excel 界面以及一个 Web 服务界面。我已将它与此处提供的 Python API 一起使用[https://github.com/zachwill/fred](https://github.com/zachwill/fred)。通用 API 在这里[http://api.stlouisfed.org](http://api.stlouisfed.org)。希望这可以帮助。

# iphone - 将 long long 转换为字符串

> ID：11262272
> 
> 赞同：10
> 
> 时间：2012-06-29T13:00:19.013
> 
> 标签：iphone, ios

什么是长长型？这是一个需要 8 个字节的整数，对吗？我想将 long long 类型转换为 NSString 如下。

```
long long fbid = [[friend objectForKey:@"id"]longLongValue]; 
```

我想要变量`fbid`中的`NSString *str`值。我能做些什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-29T13:11:00.190

```
NSString *str = [NSString stringWithFormat:@"%lld", fbid]; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-29T13:50:12.533

也许你想把这个文件作为参考，我把它做成了一个看起来不错的图像：

![在此处输入图像描述](../Images/0e8fa61b5f3d5ed4abed19fb3cd126c3.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T13:04:21.400

```
 NSString *str = [NSString stringWithFormat:@"%qi",fbid]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-24T12:17:11.170

以下代码将返回自 1970 年 1 月 1 日以来的毫秒数。

```
- (NSString *) timeInMiliSeconds
    {

        NSDate *date = [NSDate date];               //   Current Date
        NSString * timeInMiliseconds = [NSString stringWithFormat:@"%lld", [@(floor([date timeIntervalSince1970] * 1000)) longLongValue]];    //   Returns you number of milliseconf
        return timeInMiliseconds;
    } 
```

几秒钟：`[@(floor([date timeIntervalSince1970]))]`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T13:32:37.293

```
NSString *str =[[NSNumber numberWithLong:fbid] stringValue]; 
```

# javascript - 通过使用 jquery 和 javascript 单击另一个 li 来删除一个 li

> ID：11262273
> 
> 赞同：-1
> 
> 时间：2012-06-29T13:00:34.943
> 
> 标签：javascript, jquery, html, cordova

我在通过单击另一个页面上存在的另一个 li 来删除 li 时遇到问题.. 并且删除 li id 存在于 localStorage 变量中..

这是同一页面上的两个 div。第一个 li 代码是

```
<div data-role="page" id="wishListPage" data-add-back-btn="true">
            <div data-role="header" data-position="fixed">
                <header id="mainHeader" align="center">
                    <a href="#"><img src="images/logoName.png" /> </a>
                </header>
            </div>
            <div data-role="content" data-theme="a" id="wishProducts">
                <ul id="wishList" data-role="listview"></ul>
            </div>
    </div> 
```

li 设置哪些值来自数据库的属性`rs.rows.item(i).id`

```
$("#wishList").append('<li id="'+rs.rows.item(i).id+'"><a href="index.html#removeProductDialogPage" data-role="button" data-rel="dialog" data-transition="slide" data-ajax="false" onClick=saveValuesInLocalStorage("'+rs.rows.item(i).id+'","'+rs.rows.item(i).productName+'","'+rs.rows.item(i).imageName+'","'+rs.rows.item(i).vendorImageName+'","'+rs.rows.item(i).fixedPrice+'","'+rs.rows.item(i).finalPrice+'","'+rs.rows.item(i).authorName+'","'+rs.rows.item(i).sharingUrl+'");>' +
                '<img src='+rs.rows.item(i).imageName+' id="itemImage"/>'+
                '<span id="dataName"><h4>'+pName+'</h4></span>' +
                '<p><span id="dataAuthorName">'+aName+'</span></p>' +
                '<p><span id="itemRsPrice">Rs.&nbsp;&nbsp;</span><span id="itemStrikePrice"><strike>'+rs.rows.item(i).fixedPrice+'</strike></span>&nbsp;&nbsp;<span id="itemPrice">'+rs.rows.item(i).finalPrice+'</p></span>'+'<img src='+rs.rows.item(i).vendorImageName+' id="itemSite"/></a></li>');
        }
        $("#wishList").listview("refresh"); 
```

这里wishList 是ul 的id.. 存储在localStorage 中的代码是..

```
function saveValuesInLocalStorage(productUrl, productName , productImageName , vendorImage , fixedPrice, finalPrice, authorName,sharingUrl){
    localStorage.sharingUrl  = sharingUrl;
    localStorage.productUrl = productUrl;
    localStorage.productName  = productName;
    localStorage.imageName = productImageName;
    localStorage.vendorImage = vendorImage; 
    localStorage.fixedPrice = fixedPrice;
    localStorage.finalPrice  = finalPrice;
    localStorage.authorName = authorName;
} 
```

现在我想删除有 id 的 li`localStorage.productUrl`

对话页面是：

```
<div data-role="content" data-theme="a">
            <ul name="options" id="options" data-role="listview">
                <li>
                    <a href="#" data-theme="a" data-ajax="false" onClick=" removeInfoDatabase()">
                        <p><span id="itemName"><h4>Remove from wish List</h4></span></p>
                    </a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-theme="a" data-ajax="false"  onclick="openWebLink()">
                        <p><span id="itemName"><h4>Go to Store</h4></span></p>
                    </a>
                </li>
             </ul>
</div> 
```

以下代码显示了 phonegap SQLite 代码。并且 removeInfoDatabase() 函数是..

```
function removeInfoDatabase (){
    db.transaction(removeElement, removeError, removeSuccess);
}

function removeError(err){
    console.log("Error processing SQL: "+err.code);
    alert("couldn't remove from wish list");
}
function removeSuccess(){
    var elem =document.getElementById(localStorage.productUrl);
    elem.parentNode.removeChild(elem);
//  $("#"+localStorage.producturl).remove();
//  var mm = $("#"+localStorage.producturl).html();
//  alert(""+mm);
    $("#wishList").listview("refresh");
    alert("item is removed successfully");
    history.back();
}
function removeElement(tx){
    tx.executeSql('CREATE TABLE IF NOT EXISTS itemDetail (id unique, productName , imageName, vendorImageName , fixedPrice , finalPrice , authorName , sharingUrl)');
    tx.executeSql('DELETE  from itemDetail where id="'+localStorage.productUrl+'"');
} 
```

现在我如何在单击“从愿望清单中删除”后删除愿望清单 li 请帮助我..请提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:03:07.967

假设这两个页面在同一个站点上（这样它们共享同一个`localStorage`对象），您最简单的选择是`setTimeout()`在将要删除元素的页面上使用，以轮询本地存储是否存在 ID。

```
function pollStorage() {
    var id = localStorage.id;
    if (typeof id !== 'undefined') {
        delete localStorage.id;
        $(id).remove();
    }
    setTimeout(pollStorage, 100);
}

pollStorage(); 
```

# c# - 使用编辑器模板在 MVC4 中提交后回发对象未正确填充

> ID：11262274
> 
> 赞同：3
> 
> 时间：2012-06-29T13:00:35.787
> 
> 标签：c#, asp.net-mvc-3, razor, asp.net-mvc-4, mvc-editor-templates

当我在按下提交按钮后收到帖子时，我遇到了 MVC4 和编辑器模板的问题。这是我的模型：

```
public class Form
{
    public Form()
    {
        this.Rows = new List<Row>();
    }

    public List<Row> Rows { get; set; }

    public int Id { get; set; }
}

public class Row
{
    public Row()
    {
        this.Label = string.Empty;
        this.Type = string.Empty;
    }

    public string Label { get; set; }

    public string Type { get; set; }

    public int Id { get; set; }
}

public class SimpleRow : Row
{
    public SimpleRow()
    {
        this.Value = string.Empty;
    }

    public string Value { get; set; }
}

public class DropDownRow : Row
{
    public DropDownRow()
    {
        this.Content = new List<ContentDropDown>();
    }

    public List<ContentDropDown> Content { get; set; }
}

public class ContentDropDown
{
    public ContentDropDown()
    {
        this.Title = string.Empty;
        this.Selected = false;
    }

    public string Title { get; set; }

    public bool Selected { get; set; }

    public int Id { get; set; }
} 
```

这是我的控制器：

```
public class FormController : Controller
{
    [Authorize]
    public ActionResult Index()
    {
        return this.View();
    }

    [HttpPost]
    [Authorize]
    public ActionResult Index(HttpPostedFileBase file)
    {
        this.ViewBag.Title = "Formulaire Collaborateur";

        if (file != null && file.ContentLength > 0)
        {
            return this.View(SerialisationHelper.DeserializeFromStream<Form>(file.InputStream));
        }

        return this.View();
    }

    [HttpPost]
    [Authorize]
    public ActionResult EmailForm(Form updatedForm)
    {
        Form f = updatedForm; // Here, The parameter updatedForm have just is first row filled with empty strings and the other rows null

        return this.View("Index");
    }
} 
```

我的 Index.cshtml ：

```
@model Utils.FormObject.Form
@{
    ViewBag.Title = "Index";

}
@using (Html.BeginForm("EmailForm", "Form", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <fieldset>
        <p>
            @for (int i = 0; i < Model.Rows.Count; i++)
            {
                @Html.HiddenFor(x => x.Id)
                @Html.EditorFor(x => x.Rows[i])    
            }
        </p>
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
    <br />
} 
```

我的其他人在名为 EditorTemplates 的子文件夹中查看：行：

```
@model Utils.FormObject.Row
@{
    ViewBag.Title = "Row";
}
@Html.HiddenFor(x => x.Id)
@Html.EditorFor(x => x) 
```

简单行：

```
@model Utils.FormObject.SimpleRow

@{
    if (Model.Type.Equals("String"))
    {
        <br />
        @Html.HiddenFor(x => x.Id)
        @Html.DisplayFor(modelItem => modelItem.Label)
        @Html.EditorFor(modelItem => modelItem.Value)
    }
    <br/>
} 
```

下拉行：

```
@model Utils.FormObject.DropDownRow
@{
    ViewBag.Title = "DropDownRow";
}
@* @Html.DropDownListFor(x => x, new SelectList(Model.Content, "Title", "Title"))*@
@{
    @Html.HiddenFor(x => x.Id)
    @Html.LabelFor(item => item.Label)
    var list = new List<SelectListItem> { new SelectListItem { Value = string.Empty, Text = "--please select--", Selected = false } };
    foreach (var row in Model.Content)
    {
        list.Add(new SelectListItem { Text = row.Title, Selected = row.Selected });
    }
    @Html.DropDownListFor(x => x, list)
} 
```

和 ContentDropDownRow ：

```
@model Utils.FormObject.ContentDropDown
@{
    ViewBag.Title = "ContentDropDown";
}
@Html.HiddenFor(x => x.Id)
@Html.LabelFor(x => x.Title) 
```

我的表单显示得差不多（实际上下拉列表的标签显示的是“标签”而不是属性的标签......）。问题是当我按下提交按钮时，回发值“updatedForm”未填写。第一行 Row[0] 的标签由空字符串填充，其他行为空。我试过[这个](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)，但我没有设法让它工作。

我在这里有点迷路，我不明白为什么它拒绝工作。

普克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:54:31.507

您似乎正在使用编辑器模板来呈现您的 Row 对象，但我认为您没有正确使用它。如果您有单个 Row 对象的编辑器模板，您只需通过将集合传递给模板来呈现 Index.cshtml 中的 Row 集合。这是您的行的编辑器模板：

```
@model Utils.FormObject.Row
@{
    ViewBag.Title = "Row";
}
@Html.HiddenFor(x => x.Id)
@Html.EditorFor(x => x.Label)
@Html.EditorFor(x => x.Type) 
```

从 Index.cshtml 视图渲染 Row 集合 - 无需循环，因为编辑器模板将自动渲染集合中的每一行并正确命名它们：

```
@model Utils.FormObject.Form
@{
    ViewBag.Title = "Index";
}
<fieldset>
    <p>
        @Html.HiddenFor(x => x.Id)
        @Html.EditorFor(x => x.Rows)    
    </p>
    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset> 
```

这应该会创建如下所示的字段，这些字段将被正确命名并绑定为 Form 对象的一部分，然后将其发布回控制器：

```
Rows[0].Id
Rows[0].Label
Rows[0].Type
Rows[1].Id
Rows[1].Label
Rows[1].Type 
```

看我对这个问题的回答：

[从多个局部视图传递值](https://stackoverflow.com/questions/9545634/mvc-passing-values-back-from-multiple-partial-views-in-a-page/11506403#11506403)

在这里对编辑器模板进行小写：

[codenodes.wordpress.com - MVC3 编辑器模板](http://codenodes.wordpress.com/2012/04/27/mvc-3-editor-templates)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:37:06.190

谢谢，很抱歉在两个月后回答这个问题，但迟到总比没有好！

我试过这个，但它没有像我想要的那样渲染。这种方式将属性名称作为标签，将属性值作为可编辑字段。但我之前想要几次治疗。我使用 HiddenFor 命令将用户输入绑定到我的对象，如下所示：

```
<p>
    @Html.HiddenFor(x => x.ID)
    <h3> @Html.DisplayFor(x => x.Title)</h3>
    @Html.HiddenFor(x => x.Title)
</p> 
```

因为，在这个例子中，我不希望“标题”是可编辑的。我不确定这是应该使用的方式，但它是这样工作的。

# ios - iOS - 如何在我的地图中包含街道名称？

> ID：11262296
> 
> 赞同：1
> 
> 时间：2012-06-29T13:02:08.407
> 
> 标签：ios, map, drawing, openstreetmap

我的 iOS 应用程序有问题。我从服务器接收二进制矢量数据（从 osm 数据重新计算）并从中绘制地图。因此我创建了多边形、折线、点和符号（位图）。当然，我也能获得想要包含在地图中的街道名称等信息，但我怎样才能让文字适合街道呢？有什么框架可以用来修改屏幕上的字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:09:56.677

您可以在屏幕上绘制自己的字符串。你可以使用[这个](https://stackoverflow.com/questions/4386367/drawing-text-with-core-graphics)答案。或者你可以阅读[这篇](http://www.platinumball.net/blog/2009/06/01/drawing-nsstrings-in-unusual-rotations/)文章。

# asp.net - 如何处理来自 ASP.NET WebForms 中数据绑定控件的命令？

> ID：11262304
> 
> 赞同：2
> 
> 时间：2012-06-29T13:02:33.273
> 
> 标签：asp.net, webforms

这个问题似乎很简单，但我找不到答案。我确定我错过了一些东西。

我想将数据绑定控件（例如 ListView）与在项目模板内执行回发（按钮）的控件一起使用。我希望按钮对此项中的数据执行一些操作。

代码如下所示：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebFormListCommand.aspx.cs"
    Inherits="TestWebApplication.WebFormListCommand" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ListView ID="lvTest" runat="server" EnableViewState="false" 
            onitemdatabound="lvTest_ItemDataBound" onitemcommand="lvTest_ItemCommand">
            <ItemTemplate>
                <br />
                <asp:Button ID="btnTest" runat="server" />
            </ItemTemplate>
        </asp:ListView>
    </div>
    </form>
</body>
</html> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace TestWebApplication
{
    public partial class WebFormListCommand : System.Web.UI.Page
    {
        protected void Page_Init(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                lvTest.DataSource = Enumerable.Range(0, 5);
                lvTest.DataBind();
            }
            else
            {
                lvTest.DataSource = Enumerable.Range(5, 5);
                lvTest.DataBind();
            }
        }
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void lvTest_ItemDataBound(object sender, ListViewItemEventArgs e)
        {
            Button button = (Button)e.Item.FindControl("btnTest");
            int value = (int)e.Item.DataItem;
            button.CommandName = "someCommand";
            button.CommandArgument = value.ToString();
            button.Text = value.ToString();
        }

        protected void lvTest_ItemCommand(object sender, ListViewCommandEventArgs e)
        {
            //e.CommandArgument has the new value from the new databinding
        }

    }
} 
```

问题是当按下按钮时，e.CommandArgument 具有来自回发数据绑定的值。如果我在回发时不进行数据绑定，则根本不会引发事件。在大多数情况下，这不是问题，因为您将数据绑定到相同的数据。但是，如果一个用户删除了例如项目 3，而第二个用户决定同时删除项目 3，那么第二个用户实际上将删除第四个项目，因为这些项目将在回发时重新排序。如果启用 ViewState 可以避免这种情况，但应该可以在没有 ViewState 的情况下执行命令（毕竟 ViewState 应该避免的一个地方是数据绑定控件）。雪上加霜，我可以清楚地看到原始（正确）值已发布到服务器。可以通过 Request.Form["lvTest$ctrl2$btnTest" 检索

我尝试了多种方法将命令应用于正确的项目，例如使用按钮单击而不是项目命令、使用 DataKeys 等，但我无法获得数据项的正确值。似乎数据绑定控件总是使用行号来获取命令参数，而不是浏览器实际发布的值。我发现的唯一方法是手动查看 Request.Form 集合，但这似乎不正确。当然，我可以通过连接一个 JavaScript 函数和一个 AJAX 调用来解决这个问题，但我想知道如何以纯 WebForms 的方式解决这个问题。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:01:09.667

1.  将代码从 Page_Init 移动到 Page_Load

2.  注释掉

    lvTest.DataSource = Enumerable.Range(5, 5);

    lvTest.DataBind();

看看它是否有效。

我也会以`CommandName`声明方式设置并绑定`ComanndArgument`属性，而不是设置它`lvTest_ItemDataBound`

更新：

1.  不要在回发时重新绑定
2.  启用视图状态`ListView`

标记：

```
<div>
    <asp:ListView ID="lvTest" runat="server"
        onitemdatabound="lvTest_ItemDataBound" onitemcommand="lvTest_ItemCommand">
        <ItemTemplate>
            <br />
            <asp:Button ID="btnTest" runat="server" />
        </ItemTemplate>
    </asp:ListView>
</div>
<asp:Label Text="" ID="lblMessage" runat="server" /> 
```

C＃

```
 protected void Page_Init(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            lvTest.DataSource = Enumerable.Range(0, 5);
            lvTest.DataBind();
        }
        else
        {
            //lvTest.DataSource = Enumerable.Range(5, 5);
            //lvTest.DataBind();
        }
    }
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void lvTest_ItemDataBound(object sender, ListViewItemEventArgs e)
    {
        Button button = (Button)e.Item.FindControl("btnTest");
        int value = (int)e.Item.DataItem;
        button.CommandName = "someCommand";
        button.CommandArgument = value.ToString();
        button.Text = value.ToString();
    }

    protected void lvTest_ItemCommand(object sender, ListViewCommandEventArgs e)
    {
        //e.CommandArgument has the new value from the new databinding
        lblMessage.Text = e.CommandArgument.ToString();
    } 
```

# javascript - 缩放时设置元素的重力？

> ID：11262307
> 
> 赞同：0
> 
> 时间：2012-06-29T13:02:38.290
> 
> 标签：javascript, html, css, iframe, inject

我正在将 iframe 注入网页，以充当另一个元素的工具栏，但不幸的是，这些元素在缩放时表现得很奇怪。工具栏似乎倾向于左上角，而元素则倾向于顶部中心。这意味着在放大时它们会相互靠近，而在缩小时它们会相距太远。有没有办法设置这个重力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:20:21.250

我想看一个 jsfiddle，所以我确切地知道你想要什么，但只需使用固定定位。

# opencv - OpenCV - 两个二进制图像之间的交集

> ID：11262312
> 
> 赞同：21
> 
> 时间：2012-06-29T13:02:49.857
> 
> 标签：opencv, image-segmentation

假设我有两个相同大小的二进制图像。如何找到两个二进制图像之间的交集？只有两个白色（灰色 - 255）图像上相同坐标（位置）的像素才会在输出图像（交叉点）上给出白色像素。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-29T13:07:46.117

您可以在两个图像上使用[cvAnd](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html?#bitwise-and)或[cv::bitwise_and 。](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html?#bitwise-and)仅当两个输入图像均为白色时，生成的图像才会为白色。

编辑：以下是在二进制图像上应用[cv::bitwise_and](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html?#bitwise-and)、[cv::bitwise_or](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html?#bitwise-or)和[cv::bitwise_xor的结果：](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html?#bitwise-xor)

这是两个源图像：

![图 1](../Images/3e91a36f0d252d25d6d26525f2f097c4.png) ![图 2](../Images/1b614ec48676501f5c1b136a77c44ff5.png)

这是应用[cv::bitwise_and](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html?#bitwise-and)的结果：

![imgAnd](../Images/3aa9c2bf148743b04a1f6f4f09bdd9f1.png)

这是应用[cv::bitwise_or](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html?#bitwise-or)的结果：

![图像或](../Images/d46b0709a8fbb6458c9f9ea1a259d927.png)

这是应用[cv::bitwise_xor](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html?#bitwise-xor)的结果：

![异或](../Images/edf09595afb1c438f9beb643268c4566.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-27T22:35:31.677

以下是如何在 python 中执行此操作（使用上图）：

```
import cv2

img1 = cv2.imread('black_top_right_triangle.png',0)
img2 = cv2.imread('black_bottom_right_triangle.png',0)

img_bwa = cv2.bitwise_and(img1,img2)
img_bwo = cv2.bitwise_or(img1,img2)
img_bwx = cv2.bitwise_xor(img1,img2)

cv2.imshow("Bitwise AND of Image 1 and 2", img_bwa)
cv2.imshow("Bitwise OR of Image 1 and 2", img_bwo)
cv2.imshow("Bitwise XOR of Image 1 and 2", img_bwx)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

如果您需要安装`OpenCV`for ，请按照[这些](https://stackoverflow.com/a/45361604/3491991)`Python`说明来节省时间（安装在历史上一直很痛苦）。

# c++ - 获取错误

> ID：11262313
> 
> 赞同：0
> 
> 时间：2012-06-29T13:03:00.143
> 
> 标签：c++

我下面提到的程序：

```
string s;
cout<<"Enter a string:";
gets(s); 
```

我希望我的输入采用以下形式：“希尔顿酒店”。

在使用获取时，我收到以下错误：

```
 error: cannot convert ‘std::string {aka std::basic_string<char>}’ to ‘char*’ for argument ‘1’ to ‘char* gets(char*)’ 
```

我不能使用“cin”，因为我希望我的输入由空格和特殊字符（如 '_' 等）组成，我也希望我的分隔符是 'enter'。有没有其他方法......或者请纠正错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T13:04:06.300

`gets`不是很 C++（它是为了与 C 兼容）。用这个：

```
#include <iostream>
#include <string>

int main()
{
    std::getline(std::cin, s);
    std::cout << s << '\n';
} 
```

此外，请查看[`std::ios::skipws`](http://en.cppreference.com/w/cpp/io/manip/skipws)和[`<iomanip>`](http://en.cppreference.com/w/cpp/io/manip)了解空格处理选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:04:27.143

> 我不能使用“cin”，因为我希望我的输入包含空格和特殊字符

您可以使用`cin`.

> 有没有其他方法......或者请纠正错误。

`gets`接收 a `char*`，所以使用 a`char*`而不是`string`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:10:53.037

第一个问题：'gets' 需要一个 char 数组来读入。你不能给它一个 stl 字符串，这没有任何意义。你需要做类似的事情

```
char buf[1024];
gets(buf); 
```

第二个问题：“gets”来自较旧的 C stdio 库。您不应该尝试将 stdio 访问与 C++ 风格的 i/o 混合 - 每个库都维护自己的缓冲，只会导致混乱。如果您将一个用于输入，另一个用于输出，您可能会侥幸成功，但这是一个坏主意 - 学习使用 C++ 输入风格来做您想做的事（std::getline，我认为是例程你需要）。

第三，大喇叭问题：'gets' 是 C 早期的那些讨厌的保留功能之一，不能安全使用。永远不要尝试使用“获取”。

问题是“gets”不知道它正在读取的缓冲区的大小是多少，因此它总是能够溢出该缓冲区并覆盖内存（导致各种潜在问题）。永远不要尝试在任何事情中使用gets。如果你想做标准输入，使用

```
fgets(buf, bufsize, stdin) 
```

它需要一个缓冲区大小并且不会超出它的输入缓冲区。

# backbone.js - 哈希和骨干路由器

> ID：11262314
> 
> 赞同：1
> 
> 时间：2012-06-29T13:03:02.020
> 
> 标签：backbone.js, backbone-routing

我应该如何使用路由器进行此操作？

```
var itemView = Marionette.ItemView.extend({

     events: {
         'click #loadPage': 'loadPage'
     },

     loadPage: function () {
         document.location.hash = '#tasks/' + this.model.get('id');
     }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T21:49:10.677

根据[文档](http://backbonejs.org/docs/backbone.html#section-114)，router.navigate 只是代理到 Backbone.history，它是全局的，因此您应该能够毫无问题地使用它：

```
Backbone.history.navigate("#tasks/", { trigger: true }) 
```

预期的`{trigger: true}`选项将触发哈希更改，以便您的路由器可以在注册该路由时做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:17:06.440

您必须具有带有路由器实例的“全局”变量。

然后以这种方式调用该变量：

```
// yourRouter was defined in your main controller like this: 
// var YourRouterClass = Backbone.Router.extend({ 
// stuff of your own Router
// });
// var yourRouter = new YourRouterClass(); <- this is your global router instance
yourRouter.navigate('tasks/'+this.model.get('id'), {trigger : true}); 
```

# ebay-api - 易趣购物 API

> ID：11262317
> 
> 赞同：0
> 
> 时间：2012-06-29T13:03:08.103
> 
> 标签：ebay-api

大家好！我想在 ebay 中获取有关卖家的公共用户信息，为此我使用 ebay[购物 API](http://developer.ebay.com/DevZone/shopping/docs/CallRef/GetUserProfile.html#Samples)：

```
http://open.api.sandbox.ebay.com/shopping?
   callname=GetUserProfile&
   responseencoding=XML&
   appid=YourAppId&
   siteid=0&
   UserID=TESTUSER_magicalbookseller&
   version=773 
```

在 appid 我把我的 appid。对于 UserId=TESTUSER_magicalbookseller 它可以工作，但是当我尝试从 ebay 随机选择另一个用户 ID 时，它不起作用。有什么问题吗？如何获取用户资料？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:58:43.430

请注意，如果您使用沙箱，则必须使用沙箱用户 ID，而不是来自实时站点的用户 ID，例如，您可以使用：**TESTUSER_schwarz**。

**`GetUser`从交易 API 调用 -Call 的旁注**：您只能检索与您有关系的用户的详细用户信息，例如交易（用户从您的帐户购买了东西）。此外，如果您与用户有关系，则信息可用有一定的时间限制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T08:03:04.413

您的 API 调用没有问题，应该可以正常工作

在 EBay 沙盒模式下，我们不希望所有 API 调用都能正常工作；您可以使用真实账户端点对其进行测试

我已经用真实账户 Appid 进行了测试。它工作正常

# javascript - 网络摄像头未显示在主页上

> ID：11262318
> 
> 赞同：0
> 
> 时间：2012-06-29T13:03:11.570
> 
> 标签：javascript, webcam

我有一个网络摄像头正在工作并将图像上传到我网站上的文件夹 webcam/casema 但是，当我将页面添加到服务器时，图像没有显示，如果我从桌面在浏览器中运行 html 页面，它工作正常，但是当我 ipload 它时，它不显示任何图像，下面是我的代码，任何帮助将不胜感激。

谢谢

```
<img id="casema" src="cam_1.jpg">
<script language="JavaScript" type="text/javascript">
setInterval('document.getElementById(\'webcam\casema\').src=\'cam_1.jpg?l=\'+(new   Date).getTime()',5*1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:13:47.910

查看您的 <img> 的“id”：“casema”。现在看看你在 document.getElementById(): "webcam\casema" 中使用了什么。

我认为您的代码需要是：

```
<img id="casema" src="cam_1.jpg">
<script language="JavaScript" type="text/javascript">
    setInterval(function() {
        document.getElementById("casema").src = "/webcam/casema/cam_1.jpg?l=" + (new Date).getTime();
    }, 5000);
</script> 
```

# css - Css 选择器更快

> ID：11262319
> 
> 赞同：0
> 
> 时间：2012-06-29T13:03:15.647
> 
> 标签：css, performance, comparison

> **可能重复：**
> [CSS 中哪个更好：div.something 或只是 .something](https://stackoverflow.com/questions/556241/whats-better-in-css-div-something-or-just-something)

您能否为我提供答案，也许对这个问题有一些解释。

css中什么速度更快？

```
.someClass 
```

或者

```
div.someClass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:05:20.063

前者对浏览器的渲染速度更快。

谷歌对此有一篇很棒的文章。

[优化浏览器渲染](https://developers.google.com/speed/docs/best-practices/rendering)

# java - 请用这个 put-if-absent 成语解释比赛条件

> ID：11262322
> 
> 赞同：1
> 
> 时间：2012-06-29T13:03:28.533
> 
> 标签：java, concurrency, synchronization, race-condition, java.util.concurrent

考虑以下代码并假设列表是同步列表。

```
List list = Collections.synchronizedList(new ArrayList());

if(!list.contains(element)){
       list.add(element)
} 
```

我知道上面的代码片段*需要*在外部同步（由锁保护）以使其完全线程安全。竞争条件在哪里出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:08:27.997

实际上有很多。一个列表在`contains`被评估时可能会发生变化，当你到达`add`某个人可能已经添加了该元素并且你再次添加它时。此外，如果没有同步，整个事情可能会以奇怪的方式分崩离析，因为您的线程可能会部分地、无序地或根本没有观察到其他线程的写入。

如果`contains`and本身是原子的（同步的），那么在调用and`add`之间至少会有一场明确定义的竞争。`contains``add`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T13:06:27.103

好吧，假设两个线程执行检查并且都进入条件语句。然后两者都会将相同的元素添加到列表中，这不是预期的行为。不是吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T13:40:50.207

想象一下你有两个线程

```
A: if(!list.contains(element)){ // false
B: if(!list.contains(element)){ // false
A:     list.add(element) // add once
B:     list.add(element) // add a second time. 
```

当然，简单的解决方案是使用 Set。例如

```
Set<E> set = Collections.newSetFromMap(new ConcurrentHashMap<E, Boolean>());

set.add(element); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:07:07.400

当您获取列表并重新保存它（如果保存到文件示例）之间，竞争条件将发挥作用。

示例：文件包含 A

*   线程 1 获得 A
*   线程 1 将 B 添加到 A
*   线程 2 获得 A
*   线程 1 将 AB 保存到文件
*   线程 2 将 C 添加到 A
*   线程 2 将 AC 保存到文件

读取文件将包含 AC 并且工作线程 1 已丢失

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T13:07:59.907

在我看来，竞争条件发生了，如果`list.contains(element)`产生 false 并且另一个线程将在此之后添加元素，但在第一个线程中调用 add 之前。

# android - 使用异步方法时应用程序关闭

> ID：11262328
> 
> 赞同：0
> 
> 时间：2012-06-29T13:03:59.117
> 
> 标签：android

我正在编写一个必须联系网络服务的应用程序。它正在工作。但是，现在我必须使用异步任务。我必须填写类别列表。我不知道有什么问题。

异步类：

```
private class CallCategory extends AsyncTask<List<Category>,Void,List<Category>>{
        private ProgressDialog dialog;

        protected void onPreExecute() {
            this.dialog = ProgressDialog.show(getApplicationContext(), "Calling", "Time Service...", true);
        }

        protected void onPostExecute() {
            this.dialog.cancel();
        }

        @Override
        protected List<Category> doInBackground(List<Category>... params) {
            return ServerCall.GetCategory();
        }

    } 
```

来电：

```
 CallCategory cc = new CallCategory();
    _ListCategory = new ArrayList<Category>();
    cc.execute(); 
```

GetCategory 功能：

```
public static List<Category> GetCategory (){
    List<Category> categories = null;
    try{

        String url =  "http://188.130.40.103/api/"+"Category";
        RestClient client = new RestClient(url);

        //Call
        client.Execute(RequestMethod.GET);

        if(client.getResponseCode() == 200){

        //Get the response
        String response = client.getResponse();

        //build list of categories
        Type listType = new TypeToken<ArrayList<Category>>() {
    }.getType();

     categories = new Gson().fromJson(response, listType);
    }

    }
    catch (Exception e) {
        Log.i("Error", e.toString());
    }
    return categories;
} 
```

堆栈跟踪 ：

```
 06-29 12:58:57.746: W/dalvikvm(3087): threadid=3: thread exiting with
     uncaught exception (group=0x4001b188) 06-29 12:58:57.746:
     E/AndroidRuntime(3087): Uncaught handler: thread main exiting due to
     uncaught exception 06-29 12:58:57.786: E/AndroidRuntime(3087):
     java.lang.RuntimeException: Unable to start activity
     ComponentInfo{ApPicture.Android/ApPicture.Android.ApPictureActivity}:
     android.view.WindowManager$BadTokenException: Unable to add window --
     token null is not for an application 06-29 12:58:57.786:
     E/AndroidRuntime(3087):    at
     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
     06-29 12:58:57.786: E/AndroidRuntime(3087):    at
     android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
     06-29 12:58:57.786: E/AndroidRuntime(3087):    at
     android.app.ActivityThread.access$2200(ActivityThread.java:119) 06-29
     12:58:57.786: E/AndroidRuntime(3087):  at
     android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
     06-29 12:58:57.786: E/AndroidRuntime(3087):    at
     android.os.Handler.dispatchMessage(Handler.java:99) 06-29
     12:58:57.786: E/AndroidRuntime(3087):  at
     android.os.Looper.loop(Looper.java:123) 06-29 12:58:57.786:
     E/AndroidRuntime(3087):    at
     android.app.ActivityThread.main(ActivityThread.java:4363) 06-29
     12:58:57.786: E/AndroidRuntime(3087):  at
     java.lang.reflect.Method.invokeNative(Native Method) 06-29
     12:58:57.786: E/AndroidRuntime(3087):  at
     java.lang.reflect.Method.invoke(Method.java:521) 06-29 12:58:57.786:
     E/AndroidRuntime(3087):    at
     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
     06-29 12:58:57.786: E/AndroidRuntime(3087):    at
     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 06-29
     12:58:57.786: E/AndroidRuntime(3087):  at
     dalvik.system.NativeStart.main(Native Method) 06-29 12:58:57.786:
     E/AndroidRuntime(3087): Caused by:
     android.view.WindowManager$BadTokenException: Unable to add window --
     token null is not for an application 06-29 12:58:57.786:
     E/AndroidRuntime(3087):    at
     android.view.ViewRoot.setView(ViewRoot.java:472) 06-29 12:58:57.786:
     E/AndroidRuntime(3087):    at
     android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
     06-29 12:58:57.786: E/AndroidRuntime(3087):    at
     android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
     06-29 12:58:57.786: E/AndroidRuntime(3087):    at
     android.app.Dialog.show(Dialog.java:239) 06-29 12:58:57.786:
     E/AndroidRuntime(3087):    at
     android.app.ProgressDialog.show(ProgressDialog.java:107) 06-29
     12:58:57.786: E/AndroidRuntime(3087):  at
     android.app.ProgressDialog.show(ProgressDialog.java:90) 06-29
     12:58:57.786: E/AndroidRuntime(3087):  at
     ApPicture.Android.ApPictureActivity$CallCategory.onPreExecute(ApPictureActivity.java:406)
     06-29 12:58:57.786: E/AndroidRuntime(3087):    at
     android.os.AsyncTask.execute(AsyncTask.java:391) 06-29 12:58:57.786:
     E/AndroidRuntime(3087):    at
     ApPicture.Android.ApPictureActivity.LoadCategory(ApPictureActivity.java:291)
     06-29 12:58:57.786: E/AndroidRuntime(3087):    at
     ApPicture.Android.ApPictureActivity.onCreate(ApPictureActivity.java:108)
     06-29 12:58:57.786: E/AndroidRuntime(3087):    at
     android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
     06-29 12:58:57.786: E/AndroidRuntime(3087):    at
     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
     06-29 12:58:57.786: E/AndroidRuntime(3087):    ... 11 more 
```

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:28:59.487

用这个改变你的

```
this.dialog = ProgressDialog.show(YourActivity.this, "Calling", "Time Service...", true); 
```

其次，您不能`show()`在`onPreExecute`. 我建议你`Dialog`在执行任务之前展示你的。

```
...
dialog.show();
task.execute();
... 
```

> 无法添加窗口

这个错误通常会导致`getApplicationContext()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:20:29.563

从错误中，看起来好像`ProgressDialog`是在实际创建主窗口之前启动的。

尝试将 放在`AsyncTask`最末尾`OnCreate()`或将其放在 中`onResume()`以确保在任务开始之前已完全创建 UI。

[这可能与这篇文章](https://stackoverflow.com/questions/1561803/android-progressdialog-show-crashes-with-getapplicationcontext)的性质相似（但不完全相同）。

# c# - 如何在 UserControl 中正确设置焦点？

> ID：11262334
> 
> 赞同：1
> 
> 时间：2012-06-29T13:04:14.790
> 
> 标签：c#, .net, wpf, user-controls, wpf-4.0

如果您有一个单独的控件（例如 TextBox），那么 UserControl 中的 Focusable 属性的正确值是多少？

我看到的所有示例都是关于在 UserControl 中包含多个控件的情况。

显然我想让 TextBox 有焦点，而不是 UserControl 本身。如何正确设置 Focusable，在这种情况下我还需要考虑什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:46:27.030

如果我理解正确，您想知道告诉 WPF 它不应该让焦点转到`UserControl`.

例如，如果您通过`UserControl`包含 a 的选项卡`TextBox`，它将在`UserControl`自身和其中的`TextBox`控件之间循环，而不仅仅是选项卡到`TextBox`

为了防止`UserControl`像这样获得焦点，您可以将[IsTabStop](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.istabstop%28v=vs.95%29.aspx)属性设置为`False`

```
<UserControl IsTabStop="False" ... /> 
```

# sass - 指南针和 SASS：没有编译错误

> ID：11262335
> 
> 赞同：4
> 
> 时间：2012-06-29T13:04:14.863
> 
> 标签：sass, compass-sass

我现在已经厌倦了这个问题。我被推迟了很多次试图让这件事继续下去。我觉得这是我解决问题的最后一次尝试。开始：

**我安装指南针**

```
sudo gem update --system
sudo gem install compass 
```

**我创建了我的测试项目（名为 test）**

```
compass create test 
```

**这会产生这个**

```
directory test/ 
directory test/sass/ 
directory test/stylesheets/ 
   create test/config.rb 
   create test/sass/screen.scss 
   create test/sass/print.scss 
   create test/sass/ie.scss 
```

**我尝试编译项目**

```
compass compile [path/to/test] 
```

我得到的只是这个错误消息：“没有要编译的东西。如果你试图开始一个新项目，你已经离开了目录参数。”

我尝试用谷歌搜索这个问题，但我找不到任何可以帮助我的东西。这里有人知道发生了什么吗？我错过了什么重要的东西吗？

我正在运行 OSX 10.6.8

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T01:48:37.883

检查文件路径中是否有特殊字符。我有“[”和“]”包装一个目录名。这显然会导致 Compass 窒息。删除那些解决了我的问题。

似乎有很多不同的场景会导致相同的错误消息，调试输出中的一些附加信息似乎会有所帮助。我花了几个小时，以为这是我的 config.rb 文件！哦，好吧，希望这篇文章可以为别人节省一些时间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-05T12:39:34.757

缺失`config.rb`会产生相同的错误。在您的基本 sass 目录中创建一个最小的目录，其中仅包含

```
sass_dir = '.' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-06T01:52:28.397

仔细检查 config.rb 文件中的路径。此错误可能是由导致不存在目录的路径定义中的任何错误引起的。

# php - 如何通过我的服务器将文件下载到客户端？PHP

> ID：11262338
> 
> 赞同：1
> 
> 时间：2012-06-29T13:04:23.790
> 
> 标签：php, file, download

服务器上有一个文件。该文件是一个 ZIP 文件。

该文件必须通过我的服务器下载到客户端。

我尝试使用 readfile 函数，但不是下载文件，而是显示奇怪的符号......

我在这里上传了它：http: [//b-games.co.il/test/download/](http://b-games.co.il/test/download/)

这是代码：

```
 $file = "2title3.gif";
if(file_exists($file))
{
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file);
exit;
} 
```

我也试过用这个：

```
$url = 'http://example.com/some.url';
$src = fopen($url, 'r');
$dest = fopen('php://output', 'w');
$bytesCopied = stream_copy_to_stream($src, $dest); 
```

但它做了同样的事情......只是显示了奇怪的符号。

我究竟做错了什么？ [http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php) 这里说它应该可以工作......

一个重要更新：

在我的本地主机上，相同的代码有效！

有谁知道为什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:08:04.077

```
<?php 
header('Content-disposition: attachment; filename=file.gif');
header('Content-type: image/gif');
readfile('file.gif'); 
```

您可以尝试这样的事情，注意设置正确的内容类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:56:09.437

这似乎是您的服务器上的问题。在您的虚拟服务器上打开您的 PHP 错误报告并告诉我们它的内容。目前，一切都应该正常工作。如果一切都失败了，可以试试 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:14:01.370

这已经**奏效**了..

```
<?php
session_start();
$a=$_GET['a'];
$parts=explode("-",$a);
$tres=$parts[0];
$nombre=$partes[1];
$dbcodletra=substr($tres,2);
if($dbcod!=$_SESSION["username"])$boolt=0;
if($ext==1) $extl=".jpg";
if($ext==2) $extl=".jpeg";
if($ext==3) $extl=".tif";
if($ext==4) $extl=".tiff";
if($ext==5) $extl=".pdf";
if($ext==6) $extl=".doc";
if($ext==7) $extl=".docx";
if($tipoproy==1) $dir="rute/".$dbcodletra."/".$nombre.$extl;
if($tipoproy==2) $dir="rute/".$dbcodletra."/".$nombre.$extl;
if($tipoproy==3) $dir="rute/".$dbcodletra."/".$nombre.$extl;
if($tipoproy==4) $dir="rute/".$dbcodletra."/".$nombre.$extl;
if (file_exists($dir) && $boolt) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($dir));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length: ' . filesize($dir));
    ob_clean();
    flush();
    readfile($dir);
    exit;
}else echo "<meta http-equiv=\"Refresh\" content=\"0;url=misdocumentos.php\">";
?> 
```

从 [php-image-file-download-by-code](https://stackoverflow.com/questions/5773812/php-image-file-download-by-code)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:17:46.077

这似乎是[php-force-download-extension](https://stackoverflow.com/questions/3359226/php-force-download-extension)的重复。

“真正的”问题（恕我直言）是您已经生成了一个输出，并且您在代码的开头没有 ob_start() ，所以 ob_clean() 什么也不做。

编辑

这个你的 PHP 修改为只**下载**GIF

```
<?php
ob_start();
// put some business here 
$file = "2title3.gif";
if(file_exists($file))
{
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();

readfile($file);
exit;
} 
```

编辑 2

我看看你的示例代码，可能是我找到了你真正想做的事情。试试看这个[例子](http://codepad.org/5eVeZGk0)。

使用 HTTP，每个请求只能发送**一种**mime 类型，因此您需要 2 个请求：一个用于 HTML（显示示例），一个用于下载（按提交按钮）。

# sql - 在这种情况下解释 SQL 查询执行

> ID：11262341
> 
> 赞同：0
> 
> 时间：2012-06-29T13:04:43.557
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我正在使用 sql 查询，即

```
SELECT * FROM TABLE_NAME 
```

在这个 Table_Name 表中有 10 行和 5 列。当我运行上面的查询时，它运行良好并返回 10 行和 5 列。

现在我正在运行一个新查询，即

```
SELECT 8 FROM TABLE_NAME 
```

现在它将只返回一列但 10 行，并且这一列具有相同的值，即每行 8 个。

我想知道为什么它返回我 10 行和一列只有 8 个值，当我使用 * 而不是 8 在这种情况下它将返回 10 行和 5 列。

查询及其执行过程之间到底有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:13:40.153

您选择`SELECT`like之后的列`SELECT col1, col2, col3 FROM table`。如果您键入`8`“只是得到一个常数 8”。

如果您只想要 8 行，请在 sql server 中使用`SELECT TOP 8 col1, col2 FROM table`.

如果您想了解更多关于一般 sql 的信息，这里是一个好的开始：[http ://www.w3schools.com/sql/default.asp](http://www.w3schools.com/sql/default.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:08:48.040

在`SELECT`您指定要返回的列之后。

`*`这是一个简单的“给我所有的”占位符，所以所有存在的列都会被返回。

如果您仅在列列表中传递一个常量，在您的情况下是一个`8`，它将只为每一行返回该常量，从而产生十行一列，其内容为`8`。

您也可以将这两者结合起来

```
SELECT *, 8 FROM TABLE_NAME 
```

在您的情况下，这将返回 6 列 - 原始表中的 5 列和一个常量列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T13:09:00.867

**[SELECT 子句](http://www.w3schools.com/sql/sql_select.asp)**指定要返回的列。* 告诉服务器返回表中每条记录可用的所有列。8 表示为表中的每条记录返回值 8。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T13:09:55.047

SELECT 子句就像一个循环，它遍历 FROM 子句中的所有行，受 JOIN 和 GROUP BY 的影响。

在您的简单查询中，第一个版本是说“为表中的每一行返回行中的所有值”。

第二个版本是说“为表中的每一行返回值 8”。

这就是 SQL 的工作方式，而不是特定引擎的功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T13:26:48.890

所有答案都有很好的方法，sql 的`select *`语法编程很好。当我们编写`select 8`它时，它会试图找到开发人员的需求。仅基于表格，我们正在应用的条件..在行数方面`select 8`将表现相同`*`，例如只需选择一些随机`where`条件并应用于两者`8 and`*行数将相同，但列数`*`将完全相同表有并且如果`8`它只是一个，因为`8`它不是 sql 的保留文字，它采用`8`硬编码的列名，其值将由程序员硬编码或通过某种公式定义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-29T13:08:32.447

如果您没有定义`where`子句，则将获取所有行。

如果您定义`8`而不是，`*`则数字`8`将在每一行中返回。`*`是所有列名的通配符，就像做`SELECT col1, col2, ..., col10 FROM TABLE_NAME`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-29T13:08:39.810

`SELECT 8`只是选择一个常数。它为表中的每一行返回该值。这就像说：

```
SELECT 8, some_other_column FROM dbo.table_name; 
```

在这种情况下，您会在每一行中保留`8`一列，但您也会获得另一列。如果不指定任何其他列，SQL Server 会扫描表并获取每一行的常量，但不获取其他数据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-29T13:55:01.120

为此，您应该考虑正在对表进行查询`TABLE_NAME`，该表应该有 10 行，现在当您进行查询时

```
SELECT * FROM TABLE_NAME 
```

您是说它必须从表中提取所有行并**显示所有列**，但是如果您这样做

```
SELECT 8 FROM TABLE_NAME 
```

您是说它必须从表中获取所有行，但**它不会显示表的列，而是显示 8**，并且会执行 10 次，因为表有 10 行；你可以执行这个查询

```
SELECT 8 
```

它只会显示一个值为 8 的行，因为您没有对表进行查询，如果您使用此表对 X 表进行查询，它将显示为 N 行，因为 N 行有该表，但只有 8 .

# java - Java 移动开发

> ID：11262342
> 
> 赞同：2
> 
> 时间：2012-06-29T13:04:47.697
> 
> 标签：java, android, mobile

我目前制作供 PC 使用的 Java (eclipse) 应用程序。从基本的独立程序到客户端/服务器程序的一切。我上网并注意到我所在地区的大多数开发职位都是针对Android开发的。Android 应用程序开发与常规 JAVA 开发程序有何不同，我在哪里可以找到入门信息？

*   我不知道 JScript、HTML 或任何其他 Web 开发工具，所有的描述都只是说“移动 Java 开发人员，Android 市场”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T13:21:30.030

大多数 Android 应用程序都是用 Java 编写的，使用 Android 开发[者网站上提供的](http://developer.android.com/sdk/index.html)Android SDK 。接下来开始的最佳位置是[培训指南](http://developer.android.com/training/index.html)。

要回答您的问题，如果您以前使用过 Java，对 UI（Swing、AWT 等）做过一些工作，那么您应该真的很好，最具挑战性但最重要的事情是了解[活动/片段](http://developer.android.com/guide/components/activities.html)和[意图](http://developer.android.com/guide/components/intents-filters.html)概念。知道了这些，你就没事了。

好好看看 Hello Worlds，尝试阅读尽可能多的教程（天知道那里有多少）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:15:41.500

我将从这里开始：

[http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)

我从未开发过供 PC 使用的应用程序，但是当我为我的 Android 应用程序搜索示例代码时，我或多或少只搜索纯 Java 示例。那样它是一样的。您可能想了解的是 Android 生命周期以及如何使用标准 Android UI 元素制作 Android 应用程序的图形部分。如果您已经了解 Java，我想您会很快掌握它的窍门！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T13:23:38.960

可以使用各种平台和SDK开发Android应用程序这些我记得的很少

1.  本机使用 C/C++
2.  爪哇
3.  然后使用 Adob​​e
4.  然后是phoneGap
5.  您也可以使用 .Net（如果我记得的话，使用 MonoDroid）

然而，谷歌有其基于 Java 的 sdk 和一个非常有据可查的网站[。Android](http://developer.android.com/develop/index.html)与常规 Java 开发没有太大区别，因为它使用 Java Api。但您需要了解 android 系统的工作原理。

此外，如果您有任何问题，您可以随时搜索 SO 和 Google。

最重要的是，您的选择必须符合您的兴趣，然后是市场趋势。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-27T18:02:48.077

你知道 TotalCross (www.totalcross.com) 吗？它是一个面向移动应用程序的 JAVA 交叉开发平台。与任何其他跨平台一样，有一些优点和缺点，但您也可以分发到 iOS、Android 和 Windows。

# android - 如何获取引发错误的特定代码行

> ID：11262343
> 
> 赞同：5
> 
> 时间：2012-06-29T13:04:48.687
> 
> 标签：android, error-handling, android-emulator

当应用程序启动并关闭时，我得到了 java.lang.NullPointerException。来自模拟器的错误是“不幸的是，appname 已停止”。它工作正常，直到我编写了一堆新代码并更改了清单。希望它不是清单，但我的问题是，我怎样才能找出问题所在的代码行？跟踪转储对我来说没有任何意义，即使它很冗长，拥有 ...11 更多也不能让我看到整个事情。

我真的不知道那个错误是什么意思。我已经搜索过它，但似乎有一个它可能意味着的东西的列表。我已经尝试过 Project>Clean，我已经尝试再次弄乱清单，但我仍然得到错误。我已经检查/未检查外部库。刚刚做了人们建议为其他人做同样错误的事情。所以我真的很想知道，是什么线触发了它？

如果这有帮助，这是输出：

```
06-29 08:37:23.680: E/AndroidRuntime(1225): FATAL EXCEPTION: main
06-29 08:37:23.680: E/AndroidRuntime(1225): java.lang.RuntimeException: Unable to    instantiate activity      ComponentInfo{com.upliftly.android/com.upliftly.android.UpliftlyActivity}: java.lang.NullPointerException
06-29 08:37:23.680: E/AndroidRuntime(1225):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1879)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at android.os.Looper.loop(Looper.java:137)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at android.app.ActivityThread.main(ActivityThread.java:4340)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at java.lang.reflect.Method.invokeNative(Native Method)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at java.lang.reflect.Method.invoke(Method.java:511)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at dalvik.system.NativeStart.main(Native Method)
06-29 08:37:23.680: E/AndroidRuntime(1225): Caused by: java.lang.NullPointerException
06-29 08:37:23.680: E/AndroidRuntime(1225):     at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:101)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at com.upliftly.android.UpliftlyActivity.<init>(UpliftlyActivity.java:19)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at java.lang.Class.newInstanceImpl(Native Method)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at java.lang.Class.newInstance(Class.java:1319)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
06-29 08:37:23.680: E/AndroidRuntime(1225):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870)
06-29 08:37:23.680: E/AndroidRuntime(1225):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T13:18:47.517

通常，当您看到像您发布的那样的堆栈跟踪时，您应该关注最后一行之后的行

```
Caused by: 
```

线。之后，检测具有您的包名称的行，并且（在大多数情况下）是该行导致您的代码异常。在您发布的堆栈跟踪中，该行是

```
at com.upliftly.android.UpliftlyActivity.<init>(UpliftlyActivity.java:19) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T13:06:56.920

查找您的应用程序的包名称（我猜它是`com.uplifty.android`）：

```
at com.upliftly.android.UpliftlyActivity.<init>(UpliftlyActivity.java:19) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T13:26:41.167

就像其中两个答案所说：像这个例子一样寻找你的包名：

```
at com.upliftly.android.UpliftlyActivity.<init>(UpliftlyActivity.java:19) 
```

括号告诉您错误发生在哪个 Java 文件和哪一行。所以在这种情况下 UpliftlyActivity.java 第 19 行。

尽管 Manifest 或 xml 文件中的错误不会显示错误所在的文件或行号，但很难找到它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:22:31.980

> 在 logcat 中，它会给出包名称和带有行号的活动名称。然后您需要观察该特定行，其中有哪些可用的变量，然后您需要检查该变量及其对应的 xml id。所以在这个的帮助下，你可以避免这个错误。我认为在您发布的 logcat 中

```
at com.upliftly.android.UpliftlyActivity.<init>(UpliftlyActivity.java:19) 
```

> 上面的行似乎是您的活动行，您可以检查并避免错误。

# database - 访问旧的 Progress v9.1e 数据库

> ID：11262344
> 
> 赞同：0
> 
> 时间：2012-06-29T13:04:56.337
> 
> 标签：database, openedge, progress-db

我有一个需要访问的旧 Progress 版本 9.1e 数据库文件。

有没有办法让旧版本的 OpenEdge 打开它？我已经彻底查看了他们的网站，但一无所获。我也研究了两天，没有运气。

任何帮助或见解将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:05:45.530

进度数据库通常不会存在于真空中。数据库所在的系统应该具有打开它所需的可执行文件并在某处安装它。

如果您只是从其他系统复制了这个数据库，那么您基本上就不走运了。而且您可能错过了所需的关键文件。特别是如果您复制了一个实时数据库。

假设这个数据库仍然存在于原始系统上，知道它是什么操作系统会有所帮助。如果这是一个 unix 变体，“find -name progress.cfg -print”应该会显示安装目录。导出指向该目录的名为 DLC 的环境变量——即导出 DLC/usr/dlc。还有一个“bin”子目录。把它放在你的PATH中。然后输入“showcfg”。这应该会显示您拥有哪些许可证——这对于缩小可用于打开数据库和处理数据的选项有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:40:11.343

您要么需要二进制文件（和许可证代码），要么知道某个拥有副本的人愿意将其复制到您有权访问的版本。

在这种情况下，与 PSC 销售代表交谈可能会很有成效。

# android - GridView，图像在 RelativeLayout 中底部对齐

> ID：11262346
> 
> 赞同：0
> 
> 时间：2012-06-29T13:05:03.773
> 
> 标签：android, gridview, imageview, android-relativelayout

我在这个论坛上下搜索并找到了不同的解决方案，但没有一个能按预期工作。我什至尝试查看开源的 Shelves 项目，这对于我在这里想要实现的目标来说似乎过于复杂。

我有一个带有书柜/书架背景的屏幕，并使用下面的代码让它根据需要滚动。我的 RelativeLayout 高度似乎没有得到尊重，将其从 100dp 更改为 200dp 没有任何区别。我基本上需要 GridView 中的每一行具有完全相同的高度，并垂直对齐缩略图图像底部，以便图像位于书架上。我通过硬编码 ImageView 本身的布局宽度/高度来实现这一点。我尝试使用背景颜色，以便我可以看到发生了什么，但我仍然无法获得一致的外观。我还尝试将图像缩小到一致的大小，比如说 100x100，即使图像的形状不同（有些是正方形，有些是矩形）。我也可以

谁能告诉我我做错了什么？我想我已经接近了，尽管我想出的可能是一个彻底的黑客：-/

这是我现在工作的屏幕截图的链接，蓝色背景颜色用于调试/测试目的。

[书架截图](https://s3.amazonaws.com/com.alexandriamedia.web/device-2012-06-28-210902.png)

```
/res/layout/titles.xml

<com.alex.android.view.BookShelfView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/my_titles_grid_view"
    android:cacheColorHint="@android:color/transparent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:stretchMode="columnWidth"
    android:verticalSpacing="25dp"
    android:gravity="bottom"/>

ImageAdapter 

class ImageAdapter extends BaseAdapter {
    private Context mContext;
    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return borrowedAssets.size();
    }

    public Object getItem(int position) {
        return borrowedAssets.get(position);
    }

    public long getItemId(int position) {
        return borrowedAssets.get(position).getContentId();
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {

        View cellView;

        if (convertView == null) {  // if it's not recycled, initialize some attributes
            cellView = getLayoutInflater().inflate(R.layout.title_cell, null);
            ImageView image = (ImageView) cellView.findViewById(R.id.title_thumbnail);
            new DownloadImageTask(image).execute(getString(R.string.thumbnails_server_url)+borrowedAssets.get(position).getThumbnail());
        } else {
            cellView = convertView;
        }

        return cellView;
    }
}

/res/layout/title_cell.xml

<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="100dp"
        android:layout_height="100dp">

    <ImageView android:id="@+id/title_thumbnail"
            android:layout_width="100dp"
            android:layout_height="140dp"
            android:paddingTop="25dp"
            android:scaleType="fitStart"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:background="@color/blue_color"
            android:contentDescription="thumbnail"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:50:12.147

> 我的 RelativeLayout 高度似乎没有得到尊重，将其从 100dp 更改为 200dp 没有任何区别

在您的自定义适配器中，使用`parent`inflate 方法中的参数，如下所示：

```
cellView = getLayoutInflater().inflate(R.layout.title_cell, parent, false); 
```

另请记住，在您当前的`getView`方法中，您`ImageView` **仅**在没有回收`View`( `convertView == null`) 时设置图像，因此当您有回收时，`View`您最终会得到相同的图像。

# firefox-addon - 如何在 FireFox 扩展 (.XPI) 中使用 FireBreath 插件？

> ID：11262349
> 
> 赞同：0
> 
> 时间：2012-06-29T13:05:10.467
> 
> 标签：firefox-addon, npapi, firebreath, xpi

我写了一个多平台插件，已经在 Chrome 和 Firefox 下测试过了。测试是使用 Firebreath 生成的默认 html 文件完成的，通过 regsvr32 安装 DLL。

我想打包这个插件，以便 Firefox 用户可以通过插件管理器通过 XPI 安装它并在我的扩展中使用它。通过将 DLL、backgroundpage.html 打包到 CRX 中，我在 Chrome 中轻松实现了这一点。

我的理解是 Firebreath DLL 必须注入到 XUL (browserOverlay.xul) 的 DOM 中，而 XUL (browserOverlay.xul) 又可以使用 JS (borwserOverlay.js) 从 DLL 调用函数。

我不清楚如何在 XUL 中注入 DLL 本身，到目前为止我已经尝试过

```
<html:object id="myPlugin" type="application/x-betaplugin" width="300" height="300">
</html:object> 
```

如果是 XPI，则该 DLL 在组件目录中称为 npBetaplugin.dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:56:12.697

这种方式对我有用：

```
<vbox style="height:0;">
    <html:embed type="application/x-my-plugin" id="my-plugin" style="height:0;"/>
</vbox> 
```

# linux - 在 Linux 中将文件内容复制到新文件中

> ID：11262350
> 
> 赞同：3
> 
> 时间：2012-06-29T13:05:12.090
> 
> 标签：linux

我想知道如何使用 Linux 命令将文件（server.log）的所有内容复制到新文件并从原始文件中删除内容。其实很容易做到这一点。但我实际上想确保在该操作中不会有内容更新。按照 Linux 命令执行我想要的操作，但我必须确保在 command1-command2 执行之间 server.log 没有变化。

```
command1: #cp server.log serverNew.log 
command2: #truncate -l 0 server.log 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T13:18:17.933

我会使用专门为此目的构建的工具，而不是使用一些临时解决方案。

看看[logrotate](http://linux.die.net/man/8/logrotate)。您可以直接使用该命令，也可以在 cron 作业中进行设置。

它支持压缩，每次旋转后运行命令，根据大小或时间旋转等......

根据您在下面的评论，我假设您对这些选项感兴趣：

`postrotate/endscript`

`postrotate`和之间的行`endscript`（两者都必须单独出现在行上`/bin/sh`）在日志文件轮换后执行（使用）。这些指令可能只出现在日志文件定义中。**通常，日志文件的绝对路径作为第一个参数传递给脚本。**如果`sharedscripts`指定，则将整个模式传递给脚本。另请参阅`prerotate`。有关错误处理，请参见`sharedscripts`和`nosharedscripts`。

`prerotate/endscript`

`prerotate`和之间的行`endscript`（两者都必须单独出现在行上`/bin/sh`）在日志文件旋转之前执行（使用），并且仅当日志实际旋转时才执行。这些指令可能只出现在日志文件定义中。**通常，日志文件的绝对路径作为第一个参数传递给脚本。**如果`sharedscripts`指定，则将整个模式传递给脚本。另请参阅`postrotate`。有关错误处理，请参见`sharedscripts`和`nosharedscripts`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:55:00.843

这是一个简单的 C 应用程序，它将（可能）执行您想要的操作：

```
#include <stdlib.h>
#include <stdio.h>
#include <sys/file.h>

void main (int argc, char** argv)
{
    if (argc != 2)
        exit(1);

    FILE* fi = fopen(argv[1], "rb+");
    FILE* fo = fopen(argv[2], "wb");

    if (fi != NULL && fo != NULL && flock(fi, LOCK_EX) == 0)
    {
        while (feof(fi) == 0)
        {
            char* buf = malloc(4096);
            int bRead = 0;
            bRead = fread(buf, 1, 4096, fi);
            fwrite(buf, 1, bRead, fo);
        }

        frewind(fi);
        fputc(10, fi);

        flock(fi, LOCK_UN);
        fclose(fi);
        fclose(fo);
    }
else exit(1);

exit(0);
} 
```

像这样调用：`./a.out oldfile newfile`

**警告**：我没有实际测试过这段代码，在你将它用于任何重要的工作之前，一定要**进行一些测试。**

或者，您也可以尝试使用 shell-tool `flock`： http: [//linux.die.net/man/1/flock](http://linux.die.net/man/1/flock)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:06:55.950

不要复制，重命名（使用`mv`）。重命名在文件系统级别是原子的，因此任何使用旧名称写入文件的应用程序都不会发生冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:07:43.183

之后，您可以使用**touch**命令来确保

```
command3: #touch server.log 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T13:08:47.887

您可以串联使用这些命令：`cp oldFile newFile; cat '' >> oldFile`
`cp`复制您的文件。在第一个命令之后执行的第二个命令用于覆盖原始文件

显然，如果您将旧文件的内容复制到新文件中后将运行的“程序”（或脚本），则不需要以 write （而不是 write**和 append**）打开文件，第二个命令是不必要的。
此外，对于`>>`重定向，您必须验证该`noclobber`选项是否设置为“关闭”(1)

# python-2.7 - 在 Google 应用引擎中开始使用 Jinja2 时遇到问题

> ID：11262353
> 
> 赞同：0
> 
> 时间：2012-06-29T13:05:45.507
> 
> 标签：python-2.7, jinja2

我正在尝试在 windows xp os 上的 google app-engine 中使用 jinja2 模板框架。我无法克服这个名称错误。有人可以帮忙吗？

```
jinja_environment = jinja2.Environment(
   loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(_file_),'templates')),
   autoescape    = True)

NameError: name '_file_' is not defined
INFO     2012-06-29 12:49:14,640 dev_appserver.py:2952] "GET / HTTP/1.1" 500 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:08:46.060

您想要`__file__`（带有 2 组 2 个下划线），而不是`_file_`.

# c# - 最佳实践 - 锁定文件并在线程之间共享

> ID：11262357
> 
> 赞同：0
> 
> 时间：2012-06-29T13:05:55.470
> 
> 标签：c#, .net, winforms, locking, filestream

背景：我有几个不同的线程，每个线程都需要写入日志文件（.txt）。我需要一种在线程之间共享此文件的方法，但我不知道如何去做，我已经读到可能使用某种队列，并轮询此队列以将消息推送到文本文件等. 或者我是否需要锁定文件并在前面的一个完成后将消息放入队列中写入？

目前我正在这样写；

```
 fileToWrite = new System.IO.StreamWriter(DeviceManager.logPath + correctDateTimeFormat); 
```

但是我收到了错误消息；

```
 The process cannot access the file 'filename' because it is being used by another process. 
```

我只能假设多个线程正在尝试同时访问它。

谁能指出我应该采取什么方法的正确方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:13:55.503

这是您在这里面临的两个不同的问题。

1.  在文件关闭之前再次打开文件 - 这可以通过使用适当的共享标志打开来完成
2.  同步访问它。这可以通过使用一些互斥锁来一次只允许 1 个线程访问文件来完成。这很重要，因为否则，您可能会让线程同时写入文件，这可能会导致问题，例如消息在 self.

这个带参数的[FileStream 构造](http://msdn.microsoft.com/en-us/library/5h0z48dh.aspx)`FileSharing`函数可以帮助您在关闭文件之前从几个线程打开文件。

但是，根据您的需要，最好将文件（例如，日志文件）的访问集中在一个地方（创建一个类，该类具有一个控制对该特定文件的访问的实例）并确保，它将通过锁定一些私有互斥锁来同步来自不同线程的访问，因此您不会同时从几个线程写入文件。

非常简单的示例，需要构建：

```
class Logger : IDisposable
{
    private FileStream file; //Only this instance have a right to own it
    private StreamWriter writer;
    private object mutex; //Mutex for synchronizing

    public Logger(string logPath)
    {
        file = new FileStream(logPath);
        writer = new StreamWriter(file);
        mutex = new object();
    }

    // Log is thread safe, it can be called from many threads
    public void Log(string message)
    {
        lock (mutex)
        {
             writer.WriteLine(message);
        }
    }

    public void Dispose()
    {
          writer.Dispose(); //Will close underlying stream
    }
} 
```

再一次，它非常简单，只是为了展示我们在这里试图实现的基本规则。

您在这里几乎没有其他选择：

1.  使用现成的日志库（Log4Net 或 NLog（我个人更喜欢））
2.  日志可以将消息添加到队列中，您可以有另一个线程，内部用于记录器从该队列读取消息并写入它们，这样，记录器的调用者将不必等待日志消息完成记录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:37:13.827

查看这篇文章，了解如何在 wpf [http://codetechnics.blogspot.com/2010/09/how-to-configure-initialize-and-using.html](http://codetechnics.blogspot.com/2010/09/how-to-configure-initialize-and-using.html)中使用 log4net 如果您收到错误 ***The type or namespace name 'log4net ' 找不到（您是否缺少 using 指令或程序集引用？）***

因为 **log4net**显然需要访问***system.web.dll***，它不包含在**客户端配置文件中**

打开项目的属性页面，将***Target Framework***设置为**.Net Framework 4**并保存更改。

# android - 调试已经运行的应用程序而不重新启动它

> ID：11262360
> 
> 赞同：4
> 
> 时间：2012-06-29T13:06:26.897
> 
> 标签：android, eclipse, debugging

是否可以在不重新启动应用程序的情况下将 Eclipse 连接到已经运行的应用程序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T13:20:52.533

**蚀**

1- 确保在 Eclipse 中有应用程序的项目代码（如果没有应用程序代码，则无法调试应用程序）。

2- 打开 DDMS 透视图（窗口 > 打开透视图 > 其他 > DDMS）

3- 在“设备”选项卡中选择您的设备并根据需要展开。

4- 选择你的应用程序（你会看到包名）

5- 单击“设备”选项卡旁边的小错误图标以附加调试器。

**安卓工作室**

单击“附加调试器”图标。就是下图中右边的那个。

![Android Studio 图标](../Images/26088750fd4a5f05e3bc9d54f4fcc1b1.png)

或者，您可以从 Run > Attach debugger to Android process 访问此功能。

您将看到一个对话框，显示连接的设备和您可以调试的正在运行的应用程序。

选择一个进程并单击“确定”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:14:50.823

是的，可以在不重新启动的情况下调试已经运行的应用程序。

脚步

只需运行您的应用程序，转到设备选择您的设备，然后选择您已经运行的应用程序，然后选择设备窗口顶部的调试选项。它将开始调试您的应用程序。

# c - C Primer Plus 的第 17 章 - 关于如何释放整个链表

> ID：11262362
> 
> 赞同：0
> 
> 时间：2012-06-29T13:06:28.480
> 
> 标签：c, list, malloc, free

我正在阅读 C Primer Plus 的第 17 章，这里是释放书中链表的代码段：

```
/* Program done, so free allocated memory */
    current = head;
    while (current != NULL)
    {
        free(current);
        current = current->next;
    }
    printf("Bye!\n");
    return 0;

} 
```

在while语句中，“当前”变量如何在已经被释放后获得下一个值？我在网上搜索了一些免费链表的代码段，它们似乎在while语句中使用了两个指针以避免前面的问题。

但是，如果这是一个错误，我无法在勘误表中找到它。那么有什么意见吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T13:08:28.383

是的，这显然是一个错误。访问已`free()`d 的堆内存会调用未定义的行为。烂书！

正确的方法是在调用之前缓冲`next`指针`free()`：

```
while (head != NULL)
{
    struct list_node *next = head->next;
    free(head);
    head = next;
} 
```

笔记：

*   无需记住列表的旧标题，因此请删除`current`并更新`head`。
*   为了局部性，定义循环内下一个节点的缓冲。不确定正确的类型，没有这本书（幸运的是！），这不是问题。

# linux - Tomcat7在linux中的安装

> ID：11262364
> 
> 赞同：0
> 
> 时间：2012-06-29T13:06:29.983
> 
> 标签：linux, tomcat

当服务器中已经存在tomcat6时，是否可以在linux服务器中安装tomcat7（我需要安装两个版本应该在我的服务器中可用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T03:14:44.803

很容易做到。只需从 Apache 下载二进制发行版并将其安装在您想要的任何文件夹中。只需确保您的启动脚本使用正确的 CATALINA_HOME 和 CATALINA_BASE 设置来选择要运行的 Tomcat。当然，您必须将它们都配置为使用不同的端口。如果这会导致问题，那么您可以通过使用反向代理（NGINX，Pound）来代理到两个不同端口的连接，并使其看起来是一个统一的应用程序来掩盖它。

# python - 复制文件的一些数据并将其粘贴到python中的另一个文件

> ID：11262366
> 
> 赞同：-2
> 
> 时间：2012-06-29T13:06:33.507
> 
> 标签：python, file

我有一个文件，我想在其中复制文件的一些数据并将其粘贴到另一个文件中，例如假设一个文件包含以下数据：

```
AlphaforBravo007 102000000010170000000001 SusanaForCharlie 1000 end 
```

从上面的文本中，我想分别复制`102000000010170000000001`并`1000`粘贴到一个新文件中，每个文件都在新行上。

我真的很感激任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:13:02.953

```
with open('file1.txt') as f1,open('file2.txt','w') as f2:
 for line in f1: 
   x=line.split()   #now x is ['AlphaforBravo007', '102000000010170000000001', 'SusanaForCharlie', '1000', 'end']
   f2.write('\n'.join((x[1],x[3]))+'\n') 
```

现在`file2.txt`包含：

```
102000000010170000000001
1000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:09:29.257

```
for line in file1:
    a, b, c, d, e = line.split()
    file2.write(' '.join((b, d)) + '\n') 
```

提示：

*   学习如何读取文件（最好是逐行）
*   基本文本处理 - 查找各种字符串方法 ( `split`)
*   学习如何写入文件
*   练习描述你的问题——一旦描述得好，你会发现它解决了一半……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T13:11:27.487

如果您只想从空格分隔的文本文件中提取第二列和第四列，您可以使用

```
columns = operator.itemgetter(1, 3)
with open("input.txt") as input, open("output.txt", "w") as output:
    for line in input:
        output.write(" ".join(columns(line.split())) + "\n") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:56:58.900

如果您想简单地复制数字并避免将文本从一个文件复制到另一个文件，您可以使用以下内容：

```
import re
with open('number.txt') as f1,open('number2.txt','w') as f2:
    for line in f1: 
        lst=line.split()
        for parts in lst:
            if not re.search('[A-Za-z]', parts): # Look for any alphabetical character in parts
                if lst[1] == parts:
                    f2.write(parts)
                else:
                    f2.write('\n' + parts) 
```

这给出了：

```
102000000010170000000001
1000 
```

# c++ - 复制构造函数没有调用，为什么？

> ID：11262367
> 
> 赞同：1
> 
> 时间：2012-06-29T13:06:33.557
> 
> 标签：c++

> **可能重复：**
> [为什么在这种情况下不调用复制构造函数？](https://stackoverflow.com/questions/1758142/why-copy-constructor-is-not-called-in-this-case)

我有以下代码：

```
#include <iostream>
#include <new>

using namespace std;

class test {  
    int *p;  
public:
    test operator=(test a);
    test()  {
        p = new int [2];
        cout <<"Default Constructor was done here." << "\n";
    }

    test(const test &a) {
        p = new int [2];
        this->p[0] = a.p[0];
        this->p[1] = a.p[1];
        cout << "Copy Constructor was done here." << "\n";
    }

    ~test() {
        delete p;
        cout << "Destructor was done here." << "\n";
    }
    int set (int a, int b) {
        p[0] = a;
        p[1] = b;
        return 1;
    }

    int show () {
        cout << p[0] << " " << p[1] << "\n";
        return 2;
    }
};    

test test::operator=(test a) {
    p[0] = a.p[0]; 
    p[1] = a.p[1]; 
    cout << "Operator = was done here" << "\n";
    return *this;
}

test f(test x) {
    x.set(100, 100);
    return x;
}

int main () {
    test first;
    test second;
    first.set(12, 12);

    //f(first);
    //second = first;
    second = f(first);

    first.show();
    second.show();

    getchar ();
    return 0;
} 
```

Copy Constructor 只被调用了 3 次？为什么？如果我理解的话，我们做了四个副本（我们将对象发送到 func，func 返回值，我们将对象发送到 operator=，operator= 返回值）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:07:55.210

这很可能是[复制省略](http://en.wikipedia.org/wiki/Copy_elision)的影响。编译器可以自由地避免在不影响程序的任何地方复制对象。在这种情况下，复制构造函数/析构函数的副作用不被视为对程序的影响。一般来说，它会避免复制一个临时值以用作函数参数，因为无论如何这个临时值都会在之后被销毁。

这可以在标准的 §12.8.32 中找到：

> 当满足某些条件时，允许实现省略类对象的复制/移动构造，即使对象的复制/移动构造函数和/或析构函数具有副作用。在这种情况下，实现将省略的复制/移动操作的源和目标简单地视为引用同一对象的两种不同方式，并且该对象的销毁发生在两个对象本应被删除的较晚时间。没有优化就被破坏了。这种复制/移动操作的省略，称为复制省略，在以下情况下是允许的（可能结合起来消除多个副本）：
> 
> *   在具有类返回类型的函数的返回语句中，当表达式是具有与函数返回类型相同的 cv 非限定类型的非易失性自动对象的名称时，
>     可以通过构造自动
>     对象直接转化为函数的返回值
> *   在 throw 表达式中，当操作数是非易失性自动对象的名称时，其范围不超出最内层封闭 try 块（如果有）的末尾，则从操作数复制/移动操作到可以通过将自动对象直接构造到异常对象中来省略异常对象（15.1）
> *   当尚未绑定到引用 (12.2) 的临时类对象将被复制/移动到具有相同 cv 非限定类型的类对象时，可以通过将临时对象直接构造到目标中来省略复制/移动操作省略的
>     复制/移动
> *   当异常处理程序的异常声明（第 15 条）声明与异常对象（15.1）具有相同类型的对象（cv 限定除外）时，可以通过将 异常声明视为别名
>     来省略复制/移动操作
>     对于异常
>     对象，如果程序的含义将保持不变，除非为
>     异常声明声明的对象执行构造函数和析构函数。

在这种情况下，它可能会简单地使用返回的对象`f`作为 的输入`operator=`，因为它是临时的，因此无论如何都会在之后被销毁。

# iphone - 创建二进制文件以在应用商店中上传应用

> ID：11262368
> 
> 赞同：1
> 
> 时间：2012-06-29T13:06:41.917
> 
> 标签：iphone, xcode4.3, binaryfiles

我想为我的项目创建一个二进制文件。我已将我的项目设置为 iPhoneDistribution 模式。之后，我构建了项目（命令 B），现在，在 Xcode 中左侧面板的 project 下，单击 .app 它应该会显示路径。但是 .app 正在显示这条路径。

几天前，我尝试创建同一项目的二进制文件，它已经工作了。之后，我重命名了该项目。现在，我认为仅仅因为这个，我没有得到我的结果。

那么，我将如何获得二进制文件，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T13:20:20.370

有两种方法可以将您的应用提交到 App Store。

1.  归档您的项目并使用 Xcode 中的分发按钮提交。
2.  压缩您的 .app 文件并使用 Apple 的 Application Loader 应用程序提交。

我相信建议的提交方式是第一。有很多关于如何执行其中任何一个的教程和答案。

我可以告诉你，重命名项目中的内容通常会导致提交时遇到麻烦。如果它变坏了，如果你能帮助它，我会考虑重命名它。否则，当您执行提交验证时，它应该告诉您哪个设置有冲突，您可以在那时解决它。您可以在管理器的存档选项卡中对构建进行验证。存档、验证、分发是成功提交的关键。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:21:23.087

只需进入项目内的构建文件夹，在那里您可以看到您的项目，因为您更改了项目的名称，构建应该使用新名称。这就是它没有显示在查找器中的原因。

# javascript - 在 AngularJS 中创建可在任何控制器或模板中访问的 isLoggedIn 函数的最佳方法是什么？

> ID：11262372
> 
> 赞同：7
> 
> 时间：2012-06-29T13:06:58.747
> 
> 标签：javascript, angularjs

我需要一个控制器和模板都可以访问的 isLoggedIn() 函数（模板需要它才能执行类似 ng-show="isLoggedIn()" 之类的操作）。最好的方法是什么？

如果答案是服务，那么是否可以从模板中访问服务，或者我的每个控制器是否需要为模板创建一个包装函数才能看到它（在 $scope 中）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T16:14:38.283

我通常在我的身体标签中有一个“MainCtrl”，并将全局内容放入其中。

```
<body ng-controller="MainCtrl">
  ...
</body>

function MainCtrl($scope, authService) {
  $scope.isLoggedIn = function() {
    return authService.isLoggedIn();
  }
} 
```

然后其他所有作用域都将继承 isLoggedIn 函数。

您也可以将 isLoggedIn 放在 $rootScope 上，但我喜欢这种方式。

# apache - .htaccess 重写特定浏览器/操作系统组合

> ID：11262376
> 
> 赞同：2
> 
> 时间：2012-06-29T13:07:25.880
> 
> 标签：apache, .htaccess, google-chrome, browser, operating-system

**如果用户使用Chrome OS X**访问该站点，而不是**Chrome Windows**或任何其他操作系统，我需要重定向- Safari 也是如此。

我可以特别检测**Chrome OS X**并忽略**Chrome Windows**吗？我*认为*这些是两者的用户代理：

```
Chrome, MAC OS
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_7) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.91 Safari/534.30

Chrome, Windows 2008
Mozilla/5.0 (Windows NT 6.0) AppleWebKit/534.30 (KHTML, like Gecko) Chrome/12.0.742.91 Safari/534.30 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:14:02.827

你需要[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)：

```
RewriteModule On
RewriteCond %{HTTP_USER_AGENT} Mac\ OS\ X.*Chrome
RewriteRule .* /path/to/something [L,R] 
```

# ember.js - 使用 ember 数据访问服务器端业务逻辑

> ID：11262379
> 
> 赞同：0
> 
> 时间：2012-06-29T13:07:43.883
> 
> 标签：ember.js, ember-data

使用 ember 数据访问服务器端业务逻辑的模式是什么。例如，我的后端 API 上有一个“markAsFavourite(itemId)”函数。如何通过 ember 数据调用此函数，并在函数评估后重新加载指定的项目记录？

我可以在控制器中手动完成，但我认为将我的 API 访问分成两个地方不是一个好主意。

或者有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:16:59.790

我以前从未尝试过这样做，但是为了避免拆分 API，我想到的第一件事是将命令封装到您自己的自定义滚动命令对象中，该命令对象通过您的服务器发送发送到服务器回复适当的回应。也许是这样的：

{ "function":"do_something","target_model":"models","target_ids":[1,2,3,4,5]...等

我认为你可以用这种方式做很多有趣的事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:01:50.963

我认为您应该尝试将项目设置为标记，然后将其提交到服务器。然后让服务器需要做想要的事情来实现它。

```
App.Item = DS.Model.extend({
    favourite: DS.attr('boolean')
}); 
```

然后其余的完整 API 需要检查它，然后更新需要做的事情以使其标记为收藏。

# c++ - 从重心到笛卡尔

> ID：11262391
> 
> 赞同：10
> 
> 时间：2012-06-29T13:08:19.467
> 
> 标签：c++, math, 3d, coordinate-systems

我具有以下功能，可以将与三角形位于同一平面上的点转换为重心点。

```
// p0, p1 and p2  and the points that make up this triangle
Vector3d Tri::barycentric(Vector3d p) {
    double triArea = (p1 - p0).cross(p2 - p0).norm() * 0.5;
    double u = ((p1 - p).cross(p2 - p).norm() * 0.5) / triArea;
    double v = ((p0 - p).cross(p2 - p).norm() * 0.5) / triArea;
    double w = ((p0 - p).cross(p1 - p).norm() * 0.5) / triArea;
    return Vector3d(u,v,w);
} 
```

我怎样才能写出这个操作的逆运算？我想编写一个函数，它采用重心坐标并返回笛卡尔点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-29T13:10:00.560

一个点的笛卡尔坐标可以计算为以重心坐标为系数的线性组合：

```
Vector3d Tri::cartesian(const Vector3d& barycentric) const
{
      return barycentric.x * p0 + barycentric.y * p1 + barycentric.z * p2;
} 
```

# objective-c - 在 Objective-C 中泛化和优化语音气泡逻辑

> ID：11262394
> 
> 赞同：1
> 
> 时间：2012-06-29T13:08:26.787
> 
> 标签：objective-c, ios, ios5

我正在开发一个儿童读物应用程序，并希望为每个场景中的角色对话动态填充语音气泡。我得到了动画和对话的工作，下面是代码。我的书中会有多页，每一页都有多个角色，每个角色都有多个对话。使它成为通用方法的最佳方法是什么，以便我可以重复使用它。我可以将对话存储在 TEXT/XML 文件中，并根据以下参数动态读取和显示它们：页码、字符数、对话数吗？

```
UIImage *bubble = [[UIImage imageNamed:@"BubbleLefthand.png"] 
                               resizableImageWithCapInsets:UIEdgeInsetsMake(15, 21, 15, 21)];
            UIImageView *imgView = [[[UIImageView alloc] initWithImage:bubble] autorelease];
            imgView.frame = CGRectMake(250, 350, 0, 0);
            UILabel  *xlabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
            xlabel.text = @"This is a dialogue text!!!";

            [imgView addSubview:xlabel];
            [self.view addSubview:imgView];
            [UIView animateWithDuration:0.5
                             animations:^(void) {
                                 imgView.frame = CGRectMake(250, 350, 300, -40);
                                 xlabel.frame = CGRectMake(30, 10, 200, 20);
                             } completion:^(BOOL finished) {
                                 STLog(@"ChildrenBookViewController ==> SPPECH BUBBLE ANIMATION COMPLETE. Switch Case: %d", pageNum);
                             }]; 
```

目前我的对话显示像附加截图。 ![在此处输入图像描述](../Images/afadc77e6f7d85f72eec00eab3d565f7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:10:57.797

至于组织对话，在最高级别按页面组织似乎很好。您可以将背景图像定义为页面的属性。

在页面下方的一级，我认为最好定义“事件”。每个事件对应于用户的一个动作，或者您甚至可以定义一个自动跟随前一个事件的事件。

在每个事件中，您可以有不同的类型：显示对话、隐藏对话、控制背景音乐、控制音效。

*   对于显示/隐藏对话事件，应定义对话 id（对话可以直接放在此处或收集在单独的文件中），加上气泡的方向，可能还有尺寸。字符 id 可能没有用，除非您使用它来更改文本气泡或字体的外观。

*   对于控制背景音乐，您可以有一个属性来指定是播放还是停止当前播放的音乐。要播放的背景音乐也可以指定为子节点。

*   对于音效，您可以指定要播放的曲目。

这是我想到的一些想法，因为我认为该应用程序可以具有哪些功能。如果您提供更多详细信息，我可以提供更多想法。

* * *

关于显示的附带问题：确保`png`文件具有透明的外边缘，并将 UIImageView 背景颜色设置为`[UIColor clearColor]`.

# unit-testing - 单元测试失败消息的推荐标准？

> ID：11262398
> 
> 赞同：3
> 
> 时间：2012-06-29T13:08:29.887
> 
> 标签：unit-testing

这是单元测试的一个相当小的方面，但我很好奇（通常是可选的）失败消息，您可以定义它以在测试执行期间测试断言失败的情况下显示。 **是否有关于何时使用此类消息以及在其中包含哪些信息的推荐做法？**

例如，我猜不是每个断言都需要定义失败消息，也就是说，当测试的预期结果非常清楚时。但是在某些情况下，您可能希望在执行单个操作后测试对象的几个方面，这意味着您可能在一个测试方法中列出了几个断言。该场景中的每个断言是否应该有一个描述性的失败消息，以便很容易看出为什么测试方法可能在给定点失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:56:45.973

比较对于确定出了什么问题非常有用。JUnit 失败消息采用标准格式：

我期待`this`，但我得到了`this`。

如果您可以显示差异标记，那就更好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:13:29.477

我发现自定义失败消息在相当有限的情况下很有帮助。特别是，当您断言对象的多个属性时，*预期/实际*值可能无法提供有关失败原因（和原因）的最佳信息。考虑一个测试，例如：

```
[Test]
public void CreateOrder_CreatesValidOrderForProvidedCustomer()
{
    // Assume we arranged test here

    var order = orderFactory.Create(customer);

    Assert.That(order.Type, Is.EqualTo("Immediate Dispatch"));
    Assert.That(order.Details, Is.EqualTo("Very Important Package"));
    Assert.That(order.CustomerNote, Is.EqualTo("Send fast or I tell mom"));
} 
```

当上述任何断言失败时，您将收到的消息将大致如下：

> *预期：“非常重要的包裹” 实际：“快速发货”*。

如果不查看单元测试（它使用的数据是精确的），很难判断*是哪个属性导致了这种情况。*在这里简单地添加**属性名称**作为失败消息会有所帮助。

但！

这只是极端情况，当多个断言属性可能难以区分*content-wise*时。通常，您不应该遇到这样的问题（请注意，我们通过提供***一个****单词的长期*望消息来解决它）。如果您觉得需要使用长而描述性的期望信息，这可能表明您的测试过于复杂。您可能会考虑将其拆分为几个测试，或者甚至重新设计测试类。

最重要的是，我建议看看像[FluentAssertions](http://fluentassertions.codeplex.com/)这样的项目。他们做对了：

> 没有什么比没有清楚解释原因而失败的单元测试更烦人的了。

并通过非常简洁的语法和简洁的错误报告解决了这个问题：

```
"1234567890".Should().Be("0987654321"); 
```

将被报告为：

> 预期字符串为
> “0987654321”，但
> “1234567890”在“123”（索引 0）附近不同。

# python - 具有大量数据的随机 WindowsError/IOError

> ID：11262402
> 
> 赞同：0
> 
> 时间：2012-06-29T13:08:41.373
> 
> 标签：python, windows

我目前在使用 Python（和一些 Cython 模块）创建的软件时遇到了一个奇怪的错误。我在 Windows 64 位中运行它，但使用的是 32 位 Python。

该程序的一部分涉及下载大量数据（最多数 GB），然后继续处理数据。该软件已经相对稳定了一段时间，但我们刚刚引入了一个新的数据源，大大增加了下载的数据量。我相信这是错误开始发生的时候。一遍又一遍地运行完全相同的测试用例，我在看似随机的地方出现错误。这是我到目前为止看到的两条错误消息：

IOError：[Errno 13] 权限被拒绝：“[文件名]”

和

WindowsError：[错误 32] 进程无法访问该文件，因为它正被另一个进程使用：“[文件名]”

如果需要，我会提供更多信息。同样，我最近才在引入新数据源时看到此错误，因此我认为这与数据量有关。有人知道是什么原因造成的吗？

谢谢！

编辑：为澄清起见，我想知道这是否可能是 Windows/大文件的问题，因为它只为这个新的大数据量崩溃的事实对我来说似乎很可疑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:23:32.820

由于错误消息表明它看起来可能正在锁定文件。使用进程监视器工具，您可以监视是否有任何其他进程同时尝试使用该文件。

如果不是这种情况，您需要添加更多关于您的问题的信息，如完整的错误消息和崩溃的代码部分。

[进程监视器 v3.02](http://technet.microsoft.com/en-us/sysinternals/bb896645)

**更新：**

我认为解决方案是以独占模式打开文件，带锁..检查一下：

[portalocker - 用于羊群式文件锁定的跨平台（posix/nt）API。](http://code.activestate.com/recipes/65203/)

# javascript - ASP.NET MVC 文件上传使用 Valums Ajax Uploader 没有创建视图

> ID：11262403
> 
> 赞同：0
> 
> 时间：2012-06-29T13:08:41.813
> 
> 标签：javascript, ajax, asp.net-mvc-3

我按照本[教程](http://maxivak.com/asp-net-mvc-file-uploads-using-valums-plugin/)，将 js、css 和 gif 放在相应的文件夹中。问题是视图没有显示任何东西。

```
<link href="@Url.Content("~/css/fileuploader.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/js/fileuploader.js")" type="text/javascript"></script>
<div id="file-uploader">
    <noscript>
        <p>
            Please enable JavaScript to use file uploader.</p>
    </noscript>
</div>
<script type="text/javascript">
var uploader = new qq.FileUploader({
element: document.getElementById('file-uploader'),
action: '@Url.Action("upload")' // put here a path to your page to handle uploading
//,allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'] // user this if you want to upload only pictures
sizeLimit: 4000000, // max size, about 4MB
minSizeLimit: 0 // min size

 });
</script> 
```

这个脚本有什么问题？

使用 Firebug 生成的错误是

```
missing } after property list 
```

页面来源

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Home Page</title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/modernizr-1.7.min.js" type="text/javascript"></script>
</head>
<body>
    <div class="page">
        <header>
            <div id="title">
                <h1>My MVC Application</h1>
            </div>
            <div id="logindisplay">
                    [ <a href="/Account/LogOn">Log On</a> ]

            </div>
            <nav>
                <ul id="menu">
                    <li><a href="/">Home</a></li>
                    <li><a href="/Home/About">About</a></li>
                </ul>
            </nav>
        </header>
        <section id="main">
            <link href="/css/fileuploader.css" rel="stylesheet" type="text/css" />
<script src="/js/fileuploader.js" type="text/javascript"></script>
<div id="file-uploader">
    <noscript>
        <p>
            Please enable JavaScript to use file uploader.</p>
    </noscript>
</div>
<script type="text/javascript">
var uploader = new qq.FileUploader({
element: document.getElementById('file-uploader'),
action: '/Home/upload' // put here a path to your page to handle uploading
//,allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'] // user this if you want to upload only pictures
sizeLimit: 4000000, // max size, about 4MB

minSizeLimit: 0 // min size

 });
</script>

        </section>
        <footer>
        </footer>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:47:54.367

您应该在此处删除一个尾随逗号：

```
minSizeLimit: 0, // min size 
```

你在这里忘记了一个逗号：

```
action: '@Url.Action("upload")' // put here a path to your page to handle uploading 
```

所以请努力编写有效的javascript：

```
<script type="text/javascript">
    var uploader = new qq.FileUploader({
        element: document.getElementById('file-uploader'),
        action: '@Url.Action("upload")',
        sizeLimit: 4000000,
        minSizeLimit: 0
    });
</script> 
```

啊，我现在可以看到您复制粘贴的文章包含相同的错误。对不起，我以为是你的错。随时通知本文作者他的代码中的错误。

# android - Google 文档列表 API 中的安全漏洞

> ID：11262413
> 
> 赞同：1
> 
> 时间：2012-06-29T13:09:12.433
> 
> 标签：android, google-api, google-api-java-client

目前，我正在使用 HttpClient + XML 解析器来使用 Google Document List API 3。

```
URL url = new URL("https://docs.google.com/feeds/default/private/full?v=3");
URLConnection conn = (HttpURLConnection) url.openConnection();
conn.addRequestProperty("client_id", your client id);
conn.addRequestProperty("client_secret", your client secret);
conn.setRequestProperty("Authorization", "OAuth " + token); 
```

我意识到，即使我不提供`Client Id`，`Client secret`甚至`Simple API key`（我只提供身份验证令牌），我仍然可以毫无问题地与 Google Doc（Google Drive）通信。我仍然可以下载和上传文件。

我可以知道，为什么会这样？这是 Google API 中的安全漏洞吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-17T15:04:10.367

您只需要 OAuth 访问令牌即可访问 API。但访问令牌的有效期仅为一小时。然后，您将需要刷新令牌和客户端密码来生成新令牌。

[查看 OAuth2 文档了解更多信息](https://developers.google.com/accounts/docs/OAuth2)

# asp.net - 从任何文档到图像的文件转换

> ID：11262415
> 
> 赞同：0
> 
> 时间：2012-06-29T13:09:20.893
> 
> 标签：asp.net

我正在做一个 asp.net(c#) 项目，我需要阅读任何文档（pdf、word、spreadhseet），但最后文档的每一页都应转换为图像。我找不到任何与之相关的api。如果有人可以向我推荐一些，那将会很有帮助。代码示例。

如果我能获得上述任何好的链接，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:11:02.113

您可以使用 ghost 脚本库 (http://pages.cs.wisc.edu/~ghost/) 为 PDF 文件的每一页创建一个图像。这里有一个很好的代码示例：http: [//www.codeproject.com/Articles/32274/How-To-Convert-PDF-to-Image-Using-Ghostscript-API](http://www.codeproject.com/Articles/32274/How-To-Convert-PDF-to-Image-Using-Ghostscript-API)。

如果您想为其他文件类型创建图像，您应该先将它们转换为 PDF。对于 MS 办公文件，您可以使用办公自动化。例如，对于 word 文件，最好使用办公自动化，因为只有 MS 知道将 word 正确转换为 PDF。然而，办公自动化作为其缺点，它们遍布网络。无论如何，我们在我的团队中使用了一段时间，它看起来运行良好。

# c# - Gridview 页脚中的 Dropdowlist 未填充

> ID：11262422
> 
> 赞同：0
> 
> 时间：2012-06-29T13:09:50.480
> 
> 标签：c#, asp.net

我有以下代码用于在我的 gridviews 页脚中填充下拉列表。

```
 if (!IsPostBack)
        {

            GridViewRow FooterRow = (GridViewRow)grdTime.FooterRow;

            if (FooterRow != null)
            {
                QuartersTableAdapter Quarters = new QuartersTableAdapter();

                DropDownList ddMonStart = (DropDownList)FooterRow.FindControl("ddMonStart");

                ddMonStart.DataSource = Quarters.GetQuarters();
                ddMonStart.DataTextField = "QuarterHour";
                ddMonStart.DataValueField = "QuarterHour";
                ddMonStart.DataBind();
            }
        } 
```

现在我已经在另一个应用程序中完成了这个，它工作正常，但在这种情况下，它没有绑定到下拉列表，因为 FooterRow 永远不是 Null。

任何人都知道为什么 footerRow 可能不可用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:14:20.763

您是在此代码之前还是之后绑定网格？在调用 gridview.databind() 之前，页脚行将不存在。也许对您来说更好的解决方案是将此代码放在带有此检查的 gridview.RowCreated 方法中

```
if(e.Row.RowType == DataControlRowType.Footer) 
```

# cocoa - 我们可以在 ipad 中使用 cocoa httpserver 吗？

> ID：11262428
> 
> 赞同：-1
> 
> 时间：2012-06-29T13:10:13.900
> 
> 标签：cocoa, ipad, cocoahttpserver

我想知道我们是否可以在 iPad 中使用 cocoa http 服务器？有没有人尝试在 iPad 中使用可可 http 服务器？我不想将它作为服务器托管。该应用程序的主要目的是使用可可服务器在 html 文件和 Objective-C 之间进行通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:31:07.473

是的，[CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer)在 iOS 上运行，并将在 iPad 上运行。

# python - 获取多个目录和子目录中文件的绝对路径

> ID：11262429
> 
> 赞同：2
> 
> 时间：2012-06-29T13:10:23.097
> 
> 标签：python, python-3.x

我应该得到 dir3 中存在的文件的绝对路径。路径是

```
"C:\\Workspace\\folder1\\folder2\\file" 
```

我应该提供的唯一输入是文件的名称和 C 驱动器中主要目录的名称，即工作区。

我可以使用python中的任何内置函数获取绝对路径吗？我尝试使用此代码，但它给了我错误的结果：

```
import os

x='workspace'
y='file_name'
path_1=os.path.abspath("workspace/file_name")
print(path_1) 
```

输出：

```
C:\Workspace\workspace\file_name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:25:41.880

我认为它应该与

```
os.path.abspath("workspace/file_name") 
```

编辑：几秒钟前我在 python 控制台中尝试过：

```
import os
os.path.abspath("Bachelor/simpleOpenCL.py")
'/home/julius/Bachelor/simpleOpenCL.py' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:31:39.153

内置函数不能那样工作，但是您可以使用 os 中的一些方法轻松地创建自己的函数

假设 python 3.0

```
os.walk 
```

假设 python 2.7

```
os.path.walk 
```

基本上，您可以使用 os.path.split() 拆分您给出的路径，然后使用带有头部的 walk 方法并检查尾部是否在结果中。如果找到它，您可以在尾部执行 os.path.abspath 以获取该文件的绝对路径

```
def locate(headnname):
    abspaths = []
    head,tail = os.path.split(headnname)
    if not os.path.isdir(head):
        raise IOError("not a valid head: %s" % head)
    for dp,dn,fn in os.walk(head):
        if tail in fn:
            abspaths.append(dp+"/"+tail)
    return abspaths 
```

输出：

```
>>> locate("D:/users/admin/pytools.py")
['D:/users/admin\\Programs\\AT_Plotter\\src/pytools.py',
 'D:/users/admin\\Programs\\py2exe/pytools.py',
 'D:/users/admin\\Programs\\pytools\\src/pytools.py',
 'D:/users/admin\\Shared\\pyIO/pytools.py',
 'D:/users/admin\\Shared\\pyIO\\Old/pytools.py'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:45:31.790

看看这个[Active State Recipe](http://code.activestate.com/recipes/499305/)。

有函数定义来进行递归文件搜索

```
import os, fnmatch

def locate(pattern, root=os.curdir):
    '''Locate all files matching supplied filename pattern in and below
    supplied root directory.'''
    for path, dirs, files in os.walk(os.path.abspath(root)):
        for filename in fnmatch.filter(files, pattern):
            yield os.path.join(path, filename) 
```

函数使用示例：

```
for x in locate("*.zip", "C:\\Temp"):
    print x 
```

# delete-file - 使用 bat 文件检测“Temporary Internet Files”文件夹的位置并删除它们

> ID：11262430
> 
> 赞同：0
> 
> 时间：2012-06-29T13:10:24.530
> 
> 标签：delete-file, temporary, profiles

基本上我需要删除所有临时文件，并且我有以下脚本。由于所有位置都是硬编码的并且并非所有人都使用默认位置，我想知道是否有人可以帮助我使用与当前脚本兼容的脚本，该脚本将从存在的每个配置文件中检测所有“临时 Internet 文件”文件夹的位置并删除不需要的。解决方案将是一个很大的帮助。

资料来源：[http ://www.expertsexchange.com/OS/Microsoft_Operating_Systems/Windows/2000/Q_20794666.html](http://www.expertsexchange.com/OS/Microsoft_Operating_Systems/Windows/2000/Q_20794666.html)

代码：

* * *

```
 cls
  SET SRC1=%SYSTEMDRIVE%\Documents and Settings
  SET SRC2=Local Settings\Temporary Internet Files
  SET SRC3=Local Settings\Temp
  SET SRC4=Local Settings\History
  SET SRC5=%SYSTEMROOT%\Temp
  SET SRC6=Cookies

  echo About to delete files from Internet Explorer "Temporary Internet files"
  FOR /D %%X IN ("%SRC1%\*") DO FOR /D %%Y IN ("%%X\%SRC2%\*.*") DO RMDIR /S /Q "%%Y"
  echo About to delete files from "Local settings\temp"
  FOR /D %%X IN ("%SRC1%\*") DO FOR /D %%Y IN ("%%X\%SRC3%\*.*") DO RMDIR  /S /Q "%%Y"
  FOR /D %%X IN ("%SRC1%\*") DO FOR  %%Y IN ("%%X\%SRC3%\*.*") DO DEL /F /S /Q "%%Y"
  echo About to delete files from "Windows\Temp"
  cd\      
  %systemdrive%
  cd /d %SystemRoot%\temp
  del /F /Q *.*
  @echo Y|RD /S ""
  @echo.
  @echo.
  echo About to delete files from "Local Settings\History"
  FOR /D %%X IN ("%SRC1%\*") DO FOR  %%Y IN ("%%X\%SRC4%\*.*") DO DEL /F /S /Q "%%Y"

  FOR /D %%X IN ("%SRC1%\*") DO FOR  %%Y IN ("%%X\%SRC4%\today*.*") DO DEL /F /S /Q "%%Y"

  FOR /D %%X IN ("%SRC1%\*") DO FOR  %%Y IN ("%%X\%SRC4%\*.*") DO DEL /F /S /Q "%%Y"

  echo About to delete files from "%SYSTEMROOT%\Temp"
  FOR /D %%X IN ("%SRC1%\*") DO FOR  %%Y IN ("%%X\%SRC5%\*.*") DO DEL /F /S /Q "%%Y"

  echo About to delete files from "Cookies"
  FOR /D %%X IN ("%SRC1%\*") DO FOR  %%Y IN ("%%X\%SRC6%\*.*") DO DEL /F /S /Q "%%Y"

  @echo            Please review any errors if they exist
  @echo.
  @echo. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:42:08.537

试试下面的脚本......但我不确定用户个人资料的选择......

```
del /q /s  "c:\winnt\temp\*.*"    
del /q /s  "c:\windows\temp\*.*"    
del /q /s  "%USERPROFILE%\Local Settings\Temp\*.*"    
del /q /s  "%USERPROFILE%\Local Settings\Temporary Internet Files\*.*"    
del /q /s  "%USERPROFILE%\Cookies\*.*"    
del /q /s  "%USERPROFILE%\Recent\*.*"    
Rmdir /q /s "%USERPROFILE%\Local Settings\Temporary Internet Files"    
Rmdir /q /s "%USERPROFILE%\Local Settings\Temp"    
Rmdir /q /s "%USERPROFILE%\Cookies\*.*"    
Rmdir /q /s "c:\winnt\Temp"    
Rmdir /q /s "c:\windows\Temp" 
md  "%USERPROFILE%\Local Settings\Temporary Internet Files"    
md  "%USERPROFILE%\Local Settings\Temp"    
md  "%USERPROFILE%\Cookies"    
md  "c:\winnt\Temp"    
md  "c:\windows\Temp" 
```

# c# - 我的 PanoramaItem 上只有第一个控件可见

> ID：11262433
> 
> 赞同：1
> 
> 时间：2012-06-29T13:10:33.407
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, silverlight-toolkit

我在 WP7 中以全景模式编写了一个小应用程序。我想在我的全景项目上附加几个控件。

我的问题是我只能看到我的第一个控件。

你知道为什么吗？

这是我的 XAML 代码

```
<phone:PhoneApplicationPage 
x:Class="DataArbitror.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="800" 
d:DataContext="{d:DesignData SampleData/MainViewModelSampleData.xaml}"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait"  Orientation="Portrait"
shell:SystemTray.IsVisible="False" xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" xmlns:my="clr-namespace:Microsoft.Phone.Controls.Maps;assembly=Microsoft.Phone.Controls.Maps" Loaded="PhoneApplicationPage_Loaded" BackKeyPress="PhoneApplicationPage_BackKeyPress">

<!--LayoutRoot est la grille racine où tout le contenu de la page est placé-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <!--Contrôle Panorama-->
    <controls:Panorama Title="Data arbitror" Background="{x:Null}" Margin="0,15,0,-15" Grid.ColumnSpan="2">
        <!--Élément un de panorama-->
        <controls:Panorama.TitleTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}" FontSize="85" Margin="0,50,0,0" />
            </DataTemplate>
        </controls:Panorama.TitleTemplate>

        <controls:PanoramaItem Header="Paramètres" HeaderTemplate="{StaticResource MyPanoramaHeaderTemplate}">
            <StackPanel>

                <TextBlock Height="43" HorizontalAlignment="Left" Margin="22,276,0,0" Name="textBlock1" Text="Désactiver les connexions de données entre" VerticalAlignment="Top" Width="401" Grid.ColumnSpan="2"  />
                <toolkit:TimePicker HorizontalAlignment="Left" Margin="46,325,0,0" Name="TimeBegin" VerticalAlignment="Top" />
                <toolkit:TimePicker HorizontalAlignment="Left" Margin="46,429,0,0" Name="TimeEnd" VerticalAlignment="Top" />
                <TextBlock Height="30" HorizontalAlignment="Left" Margin="90,396,0,0" Name="textBlock2" Text="et" VerticalAlignment="Top" />
                <TextBlock Height="43" HorizontalAlignment="Left" Margin="22,547,0,0" Name="textBlock3" Text="Désactiver les connexions de données après" VerticalAlignment="Top" Width="401" Grid.ColumnSpan="2"  />
                <TextBox Height="72" HorizontalAlignment="Left" Margin="46,0,0,130" Name="textBoxMinutes" Text="1" VerticalAlignment="Bottom" Width="101" />
                <TextBlock Height="43" HorizontalAlignment="Left" Margin="155,615,0,0" Name="textBlock4" Text="minutes d'innactivitée" VerticalAlignment="Top" Width="401" Grid.ColumnSpan="2" />
                <toolkit:ToggleSwitch Margin="232,371,21,0" Header="Etat" Name="toggleSwitch1" VerticalAlignment="Top" Height="124" Width="227" SwitchForeground="#78BC27" />
                <toolkit:ToggleSwitch Height="124" Header="Etat" Margin="232,0,21,12" Name="toggleSwitch2" VerticalAlignment="Bottom" Width="227" SwitchForeground="#78BC27" />

            </StackPanel>
            <!--Liste double trait avec habillage du texte-->
        </controls:PanoramaItem>

        <!--Élément deux de panorama-->
        <!--Utilisez 'Orientation="Horizontal"' pour activer un panneau qui s'affiche horizontalement-->
        <controls:PanoramaItem Header="A propos" HeaderTemplate="{StaticResource MyPanoramaHeaderTemplate}">
            <!--Liste double trait avec espace réservé pour une image et habillage du texte-->
        </controls:PanoramaItem>
    </controls:Panorama>

</Grid> 
```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:16:24.350

我相信您需要删除（或更改）控件上的边距。看着它们，从顶部开始 325，从顶部开始 429，从顶部开始 396，等等......它们将低于屏幕的底部边缘。上边距不会从屏幕顶部开始计算，而是从没有边距时控件所在位置的顶部开始计算。

假设 StackPanel 的顶部距离屏幕顶部 400。如果第一项没有边距，它将为 400。如果该控件的高度为 100，则下一个控件的高度为 500。但如果您的上边距为 325，则该控件的高度为 825，即 25屏幕底部下方的像素。向第三个控件添加边距会加剧问题，依此类推。

# jython - Pyreverse(pylint) 用于 Jython

> ID：11262436
> 
> 赞同：1
> 
> 时间：2012-06-29T13:10:40.670
> 
> 标签：jython, pylint

我正在尝试使用 pylint 为 jython 代码生成 uml 图表。如果我在纯 python 代码上运行它，一切都运行良好，但是一旦我尝试在包含 swing 导入的代码上运行它，它就会崩溃并显示错误消息。

我在 Jython 的 python(!) 上运行 pylint，它不会运行 (2.7.2a)。如何让 pylint（特别是 pyreverse）运行？目前它写出所有文件名然后失败（我怀疑是因为它无法检查java pacakges（swing）我该如何解决这个问题？

**错误信息**：

```
Traceback (most recent call last):   File "/usr/bin/pyreverse", line 4, in <module> main.Run(sys.argv[1:])
File "/usr/lib/python2.7/dist-packages/pylint/pyreverse/main.py", line 126, in __init__ PyreverseCommand(args)
File "/usr/lib/python2.7/dist-packages/pylint/pyreverse/main.py", line 98, in __init__ self.run(args)
File "/usr/lib/python2.7/dist-packages/pylint/pyreverse/main.py", line 112, in run diadefs = handler.get_diadefs(project, linker)
File "/usr/lib/python2.7/dist-packages/pylint/pyreverse/diadefslib.py", line 228, in get_diadefs diagrams = DefaultDiadefGenerator(linker, self).visit(project)
File "/usr/lib/python2.7/dist-packages/logilab/astng/utils.py", line 103, in visit self.visit(local_node)
File "/usr/lib/python2.7/dist-packages/logilab/astng/utils.py", line 100, in visit methods[0](node)
File "/usr/lib/python2.7/dist-packages/pylint/pyreverse/diadefslib.py", line 161, in visit_module self.linker.visit(node)
File "/usr/lib/python2.7/dist-packages/logilab/astng/utils.py", line 103, in visit self.visit(local_node)
File "/usr/lib/python2.7/dist-packages/logilab/astng/utils.py", line 100, in visit methods[0](node)   File "/usr/lib/python2.7/dist-packages/logilab/astng/inspector.py", line 257, in visit_from fullname = get_module_part(fullname)
File "/usr/lib/python2.7/dist-packages/logilab/common/modutils.py", line 334, in get_module_part
'explicit relative import, but no context_file?' AssertionError: explicit relative import, but no context_file? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T06:47:53.823

这实际上是一个与 jython 无关的错误，最近已在 logilab-astng 的存储库中修复。此修复尚未发布，同时您仍然可以使用 mercurial checkout：[http](http://hg.logilab.org/logilab/astng) ://hg.logilab.org/logilab/astng （默认分支）

# java - GWT 使用 com 端口

> ID：11262440
> 
> 赞同：1
> 
> 时间：2012-06-29T13:11:01.663
> 
> 标签：java, gwt

如何在 GWT 中使用 com 端口。

comm.java 用于写入 com 端口的函数

```
package com.hell.server;

import jssc.SerialPort;
import jssc.SerialPortException;

public class comm {

    public String writeHelloString(String portName) {
         SerialPort serialPort = new SerialPort("COM5");

            try  {

                serialPort.openPort();

                serialPort.setParams(SerialPort.BAUDRATE_9600,
                                     SerialPort.DATABITS_8,
                                     SerialPort.STOPBITS_1,
                                     SerialPort.PARITY_NONE);

               serialPort.writeBytes(portName.getBytes());
                @SuppressWarnings("unused")
                byte[] buffer = serialPort.readBytes(10);

                serialPort.closePort();

            }

            catch (SerialPortException ex) {
            // System.out.println(ex);

         }

                return "dsada"; 
    }
} 
```

服务器的功能。

```
public String greetServer(String input) throws IllegalArgumentException {
         comm A = new comm();
         A.writeHelloString("$KE");
         return input;
    } 
```

GWT客户端到服务器的接口：

```
 @RemoteServiceRelativePath("greet")
    public interface GreetingService extends RemoteService {
        String greetServer(String name) throws IllegalArgumentException;

    } 
```

这是正确的？？？？？？？！！！不起作用，并且有很多错误...

来自控制台的错误：

```
Jun 29, 2012 10:21:59 AM com.google.appengine.tools.development.ApiProxyLocalImpl log
SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.lang.String com.hell.client.GreetingService.greetServer(java.lang.String) throws java.lang.IllegalArgumentException' threw an unexpected exception: java.lang.NoClassDefFoundError: jssc/SerialPortException
......

Caused by: java.lang.NoClassDefFoundError: jssc/SerialPortException
    at com.hell.server.GreetingServiceImpl.greetServer(GreetingServiceImpl.java:21)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    ... 34 more
Caused by: java.lang.ClassNotFoundException: jssc.SerialPortException
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:176)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 41 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:01:48.473

您正在尝试使用谷歌应用引擎与 SerialPort 交互（GWT 只是通过 RCP 启动代码）。

请参阅[https://developers.google.com/appengine/docs/java/jrewhitelist](https://developers.google.com/appengine/docs/java/jrewhitelist)了解可在 google app engine 下运行的类列表。

# php - PHP 使用查询字符串创建和删除 cookie

> ID：11262446
> 
> 赞同：1
> 
> 时间：2012-06-29T13:11:28.460
> 
> 标签：php

我有以下两个链接：

```
<a href="index.php?showDesktop=true">Show Desktop</a>

<a href="index.php?showMobile=true">Show Mobile</a> 
```

我想要做的是，如果单击 showDesktop 查询，则创建一个名为 showDesktop 的 cookie 并删除 cookie showMobile，反之亦然。到目前为止，我已经尝试了以下方法，但认为我做错了。任何人都可以帮助我按照建议进行这项工作。

```
if($_GET['showDesktop']) {
    $_COOKIE('showDesktop', 'yes');
    $_COOKIE('showMobile', null);
}
else if($_GET['showMobile']) {
    $_COOKIE('showDesktop', null);
    $_COOKIE('showMobile', 'yes');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:15:39.753

您使用[setcookie](http://php.net/setcookie)更改 cookie 数据：

```
setcookie('showDesktop', 'yes', time()+86400*365);
setcookie('showMobile', false); 
```

但是，我确实认为为此在 cookie 上使用两个不同的名称很奇怪。考虑有一个被称为`displayMode`或类似的：

```
setcookie('displayMode', 'desktop', time()+86400*365); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:15:52.513

改用“true”和“false”可能会更好。

```
if($_GET['showDesktop'] == 'true') {
    setcookie('showDesktop', true);
    setcookie('showMobile', false);
}
else if($_GET['showMobile'] == 'true') {
    setcookie('showDesktop', false);
    setcookie('showMobile', true);
} 
```

**当您使用 cookie 时，它​​与$_GET**和**$_POST**有点不同。你应该使用函数[**setcookie**](http://php.net/manual/de/function.setcookie.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:15:55.690

你真的需要两个饼干吗？为什么你不能使用下面的代码只解析一个 cookie？

```
if($_GET['showDesktop']) {
    $_COOKIE('showDesktop', 'yes');
}
else if($_GET['showMobile']) {
    $_COOKIE('showDesktop', 'no');
} 
```

您还可以通过使 cookie 过期来删除它们

```
setcookie ("showDesktop", "", time() - 3600); 
```

# tomcat - 更改 netbeans 嵌入式 grails 的会话超时

> ID：11262450
> 
> 赞同：1
> 
> 时间：2012-06-29T13:12:05.223
> 
> 标签：tomcat, grails, netbeans, session-timeout

我在 Netbeans 7.1.1 IDE 中运行 grails 1.3.9 应用程序，并希望减少会话超时以进行测试。我的问题是在 NetBeansProjects 和 NetBeans 文件夹下都找不到 server.xml 文件。它位于其他地方还是名称不同？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:37:52.410

您还可以使用 '/script' 目录中的 groovy 脚本 '_Events.groovy' 更改 web.xml 文件的构建。您可以使用 'eventWebXmlEnd' 事件来添加您的配置：

```
import grails.util.Environment
import groovy.xml.StreamingMarkupBuilder

eventWebXmlEnd = { String tmpfile ->

    def root = new XmlSlurper().parse(webXmlFile)

    if(Environment.getCurrent() == 'TEST' ) {

        root.appendNode {

             'session-config' { 'session-timeout' (120) }

        }
    }

    webXmlFile.text = new StreamingMarkupBuilder().bind {

        mkp.declareNamespace("": "http://java.sun.com/xml/ns/javaee")

        mkp.yield(root)

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:18:48.047

会话超时在 web.xml 中处理。您需要运行 grails install-templates，它会为您提供可以操作的 web.xml。请参阅[此处的文档](http://grails.org/doc/latest/ref/Command%20Line/install-templates.html)。

您可以将此添加到您的 web.xml

```
<session-config>
  <session-timeout>120</session-timeout>
</session-config> 
```

# java - Java上的256位输出哈希函数

> ID：11262459
> 
> 赞同：1
> 
> 时间：2012-06-29T13:12:44.007
> 
> 标签：java, hash

有人可以指出一个**哈希函数**（最好是一个实现），它可以让我为给定的字符串提供**256 位字符串输出吗？**

非常感谢您提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:22:25.490

```
MessageDigest md   = MessageDigest.getInstance("SHA-256"); //make sure it exists, there are other algorithms, but I prefer SHA for simple and relatively quick hashing
String strToEncode = "Hello world";
md.update(strToEncode.getBytes("UTF-8")); //I'd rather specify the encoding. It's platform dependent otherwise. 
byte[] digestBuff = md.digest(); 
```

*digestBuff*将包含消化后的字节。

# hadoop - 在 Hadoop 中使用 MapFileOutputFormat

> ID：11262464
> 
> 赞同：1
> 
> 时间：2012-06-29T13:13:04.983
> 
> 标签：hadoop

我们可以在哪个版本的hadoop中设置。

```
job.setOutputFormatClass(MapFileOutputFormat.class);//ERROR/ 
```

基本上我有一些键值对，我想在文件中以排序方式写入，然后再读取它们。有什么办法可以使用任何现有的 hadoop 功能来做到这一点。我不想为它写一个 map reduce 任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-05T05:42:53.820

在旧 API（版本 1.x）中：

```
Job job = Job.getInstance(conf);
job.setsetOutputFormat(org.apache.hadoop.mapred.MapFileOutputFormat.class); 
```

在我们所说的新 API 中（从版本 2 开始）：

```
JobConf conf = new JobConf(conf);
job.setOutputFormatClass(org.apache.hadoop.mapreduce.lib.output.MapFileOutputFormat.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:26:42.390

看：

[http://svn.apache.org/repos/asf/hadoop/common/tags/release-0.20.0/src/mapred/org/apache/hadoop/mapred/MapFileOutputFormat.java](http://svn.apache.org/repos/asf/hadoop/common/tags/release-0.20.0/src/mapred/org/apache/hadoop/mapred/MapFileOutputFormat.java)

它从 Hadoop 0.20.0 开始可用。您必须使用高于该版本的版本。

# ruby - 文件名数组：如何将 2 个特定文件（如果存在）移到前面？

> ID：11262465
> 
> 赞同：0
> 
> 时间：2012-06-29T13:13:04.747
> 
> 标签：ruby, rake, rake-task, rakefile

在[build.rake](https://github.com/wooga/Pocket-Island/blob/master/tasks/build.rake)文件中，我有一个包含 JavaScript 文件名称的数组：

```
JS_FROM_INDEX=`./bin/extract_files -e js index.html`.split 
```

它包含这些文件：

```
js/config.js
js/vendor/dollar.js
js/vendor/ejs.min.js
js/utils.js
......
js/Viewport.js 
```

然后有一条规则（这是我的猜测，因为我对 ruby​​ 完全一无所知）告诉如何制作**build/app.js**文件：即首先获取**js/config.js**文件，然后附加所有其他文件上面的数组：

```
file DEST + '/app.js' => [DEST]+JS_FROM_INDEX.dup << 'index.html' << DEST do |t|
  sh "cat js/config.js > #{t.name}"
  sh "cat #{JS_FROM_INDEX.reject{|f| f =~ /\/config\.js/ }.join(" ")} | bin/yuicompressor --type js >> #{t.name}"
end 
```

它工作正常，但现在我发现**js/utils.js**应该在一开始，甚至在**js/config.js**之前。

所以我的问题是：

**有没有一种对JS_FROM_INDEX**数组进行排序的好方法，以便将**js/utils.js**和**js/config.js**移动到它的第一个位置？这可以作为oneliner（即附加到上面的**.split**调用的一些代码）来完成吗？

**更新：**

微薄建议（谢谢！）代码：

```
scripts.unshift("js/config.js") if scripts.delete("js/config.js");
scripts.unshift("js/utils.js") if scripts.delete("js/utils.js"); 
```

要将其集成到 Rakefile 中，我认为我需要再引入 2 个变量：

```
JS_FROM_INDEX=`./bin/extract_files -e js index.html`.split
JS_SORTED_1=......use JS_FROM_INDEX somehow....
JS_SORTED_2=......use JS_FROM_SORTED_1 somehow....

file DEST + '/app.js' => [DEST]+JS_SORTED_2.dup << 'index.html' << DEST do |t|
  sh "cat #{JS_FROM_INDEX.reject{|f| f =~ /\/config\.js/ }.join(" ")} | bin/yuicompressor --type js >> #{t.name}"
end 
```

关于如何*连接*上面的点有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:25:42.400

从数组中删除项目，然后（如果在删除过程中找到）将其推到数组的前面：

```
scripts = %w(js/config.js
            js/vendor/dollar.js
            js/vendor/ejs.min.js
            js/utils.js)

# Move config.js first
scripts.unshift("js/config.js") if scripts.delete("js/config.js");

# Move utils.js second to ensure it is always before config.js
scripts.unshift("js/utils.js") if scripts.delete("js/utils.js"); 
```

在这里，如果没有找到要删除的项目，则[`delete`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-delete)返回，因此该项目永远不会被编辑到前面。`nil`[`unshift`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-unshift)

您可以通过迭代列表轻松地使其更通用：

```
items_to_sort_to_front.each { |item| scripts.unshift(item) if scripts.delete(item) } 
```

记住要倒序排列`items_to_sort_to_front` *，*因为列表中的最后一项将是最后一项移到`scripts`.

# spring - 可以将 Spring @Cacheable 配置为阻止缓存未命中吗？

> ID：11262470
> 
> 赞同：4
> 
> 时间：2012-06-29T13:13:21.983
> 
> 标签：spring, caching, ehcache

是否可以配置Spring `@Cacheable`，以便如果缓存未命中，对可缓存方法的调用会被阻塞，直到可缓存方法执行一次并填充缓存？

就我而言，我正在处理数据库中不经常更改的数据，实际上如果这些数据发生更改，则需要重新启动应用程序。我可以`@PostConstruct`在每个服务启动时创建方法并初始化数据，但这似乎不像`@Cacheable`注释那样“优雅”。

我打算将 EhCache 与 Spring`@Cacheable`注释一起使用。

**更新：**

以下是我在尝试使用@PostConstruct 时遇到的一些问题，以防其他人遇到这些问题。`@PostConstruct`方法不能是`@Transactional`因为它们在对象的属性设置之后而不是在整个弹簧上下文配置之后运行。因此，您不能假设 TX 管理器已全部通过`@PostConstruct`调用 time 方法进行设置和配置。解决方法是手动实现一个`ApplicationListener`并注入一个 TransactionTemplate ......等等许多额外的工作，这些工作通过使用`@Cacheable`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-10T11:29:25.000

Spring 4.3 中添加了对同步缓存的支持：

```
@Service
public class FooService {

    @Cacheable(cacheNames = "foos", sync = true)
    public Foo getFoo(String id) { ... }

} 
```

见：[https ://spring.io/blog/2016/03/04/core-container-refinements-in-spring-framework-4-3](https://spring.io/blog/2016/03/04/core-container-refinements-in-spring-framework-4-3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:16:59.270

我不认为这`@PostConstruct`是不雅的，对我来说似乎是完美的解决方案。您希望仅在重新启动应用程序时调用方法。有什么更好的？

但是您也可以这样做来阻止调用，直到缓存可用

```
@Cacheable(cacheName="yourCache", decoratedCacheType= DecoratedCacheType.SELF_POPULATING_CACHE)
public List<String> getWhatever(int id) {
//call database
} 
```

并使缓存自动刷新：

```
@Cacheable(cacheName="yourCache", refreshInterval=1000, decoratedCacheType= DecoratedCacheType.REFRESHING_SELF_POPULATING_CACHE)
public List<String> getWhatever(int id) {
  //call database
} 
```

[荣誉](http://cleancode.se/2012/03/31/refreshing-caches-in-ehcache.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-30T13:01:08.307

[`@Cacheable`来自 ehcache-spring-annotations](http://code.google.com/p/ehcache-spring-annotations/wiki/UsingCacheable)的（令人讨厌的注释名称相同）直接支持“并发未命中阻塞” 。刚设置`selfPopulating = true`。

spring XML 配置也比使用 Spring 干净得多`@Cacheable`。

最大的缺点是您将被绑定到 ehcache 并且无法连接其他实现（例如，对单元测试有用）。

# android - ADT r20 中未解决的安装依赖项

> ID：11262471
> 
> 赞同：25
> 
> 时间：2012-06-29T13:13:24.343
> 
> 标签：android, adt, android-sdk-tools

我只是将我的 ADT 和 SDK 更新到最新版本的**ADT r20**和SDK 中的**Android 4.1**。

现在在 Eclipse 中，我无法创建一个在其中实现默认**BlankActivity**的新项目。

在新项目对话框中，我坚持最后一个屏幕，其中提到有**“安装依赖****`android support library revision 8 required`**项” 。

我**已经**在 SDK 中安装了修订**版 9 。**我还单击了“**安装/升级**”按钮，它还从互联网上获取库，但之后没有成功。

以下是该对话框的屏幕截图 ![在此处输入图像描述](../Images/9ced20c6b8ffed6a74c7187ac3c4c1e5.png)

```
I know that we can create blank project by unchecking 
CreateActivity option, but i want to make project with BlankActivity 
```

[同一问题的 Android 问题跟踪器链接](http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=33872)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-29T13:29:02.013

您需要打开 SDK 管理器并卸载当前的支持库，然后在“新建项目”向导中，使用那里的按钮再次安装它。

请参阅[无法使用 ADT 版本 20 创建新项目](https://stackoverflow.com/questions/11259069/not-able-to-create-new-project-with-adt-version-20/11262604#11262604)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:17:05.337

您需要打开 SDK 管理器并安装修订版 9：

![开发工具包工具](../Images/09e7465c5322fef4bd83fcb386559bcb.png)

~~我不确定，但我认为：这只有*在*更新 eclipse ADT 插件后才有可能~~

这只有**在**您安装了 SDK 工具 rev 20 后才有可能。所以重新打开您的 SDK 管理器

# sql - 如何创建脚本以在两个表之间复制数据

> ID：11262473
> 
> 赞同：1
> 
> 时间：2012-06-29T13:13:28.983
> 
> 标签：sql, oracle, oracle10g

我想做一个脚本来检索表中的所有数据，`COURBE_CHARGE`以将它们复制到`HISTORIQUE_COURBE_CHARGE`测量日期（字段`CCH_DATE`）早于 14 个月的表中，并删除复制的数据。

`COURBE_CHARGE`并且`HISTORIQUE_COURBE_CHARGE`是同一张桌子

*COURBE_CHARGE：*

```
Column                Data Type

CCH_ID                  NUMBER(*,0)
TLM_ID                  NUMBER(*,0)
CPT_ID                  NUMBER(*,0)
CCH_DATE                    DATE
CCH_DATE_INTEGRATION    DATE
CCH_NEW                 NUMBER(*,0)
CCH_NB_HEURES           NUMBER(*,0)
CCH_TYPE_ENERGIE            VARCHAR2(12)
P1                          NUMBER(*,0)
P2                          NUMBER(*,0)
P3                          NUMBER(*,0)
…                           NUMBER(*,0)
P149                    NUMBER(*,0)
P150                    NUMBER(*,0)
PH1                         NUMBER(*,0)
PH2                         NUMBER(*,0)
…                           NUMBER(*,0)
PH24                    NUMBER(*,0)
PH25                    NUMBER(*,0) 
```

*HISTORIQUE_COURBE_CHARGE：*

```
Column                Data Type

HIS_CCH_ID                  NUMBER(*,0)
TLM_ID                  NUMBER(*,0)
CPT_ID                  NUMBER(*,0)
CCH_DATE                    DATE
CCH_DATE_INTEGRATION    DATE
CCH_NEW                 NUMBER(*,0)
CCH_NB_HEURES           NUMBER(*,0)
CCH_TYPE_ENERGIE            VARCHAR2(12)
P1                          NUMBER(*,0)
P2                          NUMBER(*,0)
P3                          NUMBER(*,0)
…                           NUMBER(*,0)
P149                    NUMBER(*,0)
P150                    NUMBER(*,0)
PH1                         NUMBER(*,0)
PH2                         NUMBER(*,0)
…                           NUMBER(*,0)
PH24                    NUMBER(*,0)
PH25                    NUMBER(*,0) 
```

执行脚本时出错

![错误](../Images/ad9efaa341c4f384d3ff1c080f894590.png)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:17:11.277

```
INSERT INTO HISTORIQUE_COURBE_CHARGE (CCH_DATE, [field list]) 
    AS 
      SELECT SYSDATE, [field list] 
        FROM COURBE_CHARGE
       WHERE CH_DATE < (SYSDATE - 425); 
```

[字段列表] 应扩展到表的完整字段列表。（例如 P1、P2、P3...）没有 CH_DATE

where cond: 14个月大约是425天，如果你需要正好14个月，请调整条件。

编辑：请注意，ch_date 将在历史表中设置为 SYSDATE，根据情况，如果您需要跟踪存档的实际完成时间（但我建议您添加一个新的日期列） HIST_DATE 并使用它来存储 SYSDATE）。在那种情况下插入将是：

ALTER TABLE HISTORIQUE_COURBE_CHARGE（添加 HIST_DATE 日期）；-- 只执行一次

```
INSERT INTO HISTORIQUE_COURBE_CHARGE (HIST_DATE, [field list]) 
        AS 
          SELECT SYSDATE, [field list] 
            FROM COURBE_CHARGE
           WHERE ... -- whatever where cond 
```

在这种情况下，[field list] 是表的整个字段列表。同样，您可以存储其他信息（例如执行故事化的用户等）。

对于删除：

```
DELETE 
  FROM COURBE_CHARGE 
 WHERE CC_ID IN (SELECT HIS_CC_ID 
                   FROM HISTORIQUE_COURBE_CHARGE ); 
```

这将删除每个保存的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:20:00.000

```
INSERT INTO HISTORIQUE_COURBE_CHARGE
  SELECT * FROM COURBE_CHARGE
  WHERE CCH_DATE < DATEADD(MONTH, -14, SYSDATE) 
```

# java - java Fork/Join关于堆栈使用的说明

> ID：11262474
> 
> 赞同：18
> 
> 时间：2012-06-29T13:13:29.467
> 
> 标签：java, concurrency, java-7, fork-join

我读到了 Java 7 中引入的 Fork/Join 框架的实现，我只是想检查一下我是否理解这个魔法是如何工作的。

据我了解，当一个线程分叉时，它会在其队列中创建子任务（其他线程可能会或可能不会窃取）。当线程尝试“加入”时，它实际上会检查其队列中的现有任务，然后递归地执行它们，这意味着对于任何“加入”操作 - 2 帧将被添加到线程调用堆栈中（一个用于加入，一个用于对于新的任务调用）。

据我所知，JVM 不支持尾调用优化（在这种情况下可能用于删除 join 方法堆栈帧），我相信在执行具有大量分叉和连接的复杂操作时，线程可能会抛出`StackOverflowError`.

我是对的还是他们找到了一些很酷的方法来防止它？

**编辑**

这是一个有助于澄清问题的场景：假设（为简单起见）我们在 forkjoin 池中只有一个线程。在某个时间点 - 线程分叉，然后调用 join。在 join 方法中，线程发现它可以执行分叉的任务（正如它在其队列中发现的那样），因此它调用下一个任务。该任务依次分叉，然后调用 join - 因此在执行 join 方法时，线程将在其队列中找到分叉的任务（如前所述）并调用它。在那个阶段，调用堆栈将至少包含两个连接和两个任务的帧。

如您所见，fork join 框架已转换为普通递归。因为 java 不支持尾调用优化 - java 中的每个递归都可能导致`StackOverflowError`如果它足够深。

我的问题是——fork/join 框架的实现者是否找到了一些很酷的方法来防止这种情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T21:26:04.150

不幸的是，就线程递归堆栈而言，没有什么神奇的事情发生。如果您的初始任务分叉/拆分并且没有合理的解决点，那么您将遇到 StackOverflowErrors。

您可能会理解为什么 JavaDoc 上的教程将每个子任务分成两半。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:15:08.693

一般来说，压入堆栈的每个新任务的大小都是前一个任务的一半。因此，工作量随着堆栈大小呈指数增长。即使只有很小的堆栈，您也将能够完成足够多的工作来让您忙碌一段时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T17:53:37.183

我希望我能以正确的方式理解你。

forkjoinpool 中有一个内部队列，用于保存您要执行的任务，因此不会引发堆栈溢出，但您必须为高内存利用率做好准备。

fork 方法非常有趣的地方是 ForkJoinWorkerThread.pushTask 使用不安全的对象，所以你应该注意数组是用来存储任务的。

编辑：首先也是简单的 - 当你在队列的顶部时，你只是简单地取消并执行，并返回 retult 。(forkjointask.java:353)

当您有依赖项时使用不同的方法，在这种情况下，控制权返回给 WorkerThread，然后由后者负责检测链并执行它们。通过第一个工作人员检查本地队列中是否有任何未完成的任务，如果没有此类任务，则执行传递的作业并返回结果，否则进入下一个案例。这多次帮助盗窃者。没有什么能帮上忙...第一步等于 MAX_HELP 的重试现在为零 - 控制权被传递给池，池执行多项检查并执行 tryAwaitDone。并在此方法中调用 wait 以等待任务完成。

这意味着分叉连接池将分几个步骤完成，试图通过避免调用等待来优化速度和时间。但是它可能会在等待中完成，那么这意味着要启动同步过程，这是非常昂贵的。

因此，没有无限深度的后续连接，而是尽可能快地执行任务的逻辑尝试。

# python - Python for 循环中的内存错误

> ID：11262478
> 
> 赞同：2
> 
> 时间：2012-06-29T13:13:52.550
> 
> 标签：python, memory-management, garbage-collection

我目前正在尝试找到另一个大数中包含的最大素数。

```
maxlen = 1024
for i in range(1023, -1, -1):
    maxlen -= 1
    number = ""
    for k in range(maxlen, -1, -1):
            number = pi[k] + number
            if isprime(number) == True:
                    print number 
```

isprime() 是一个检查数字是否为素数的函数（非常标准）。这工作得很好，直到我得到一个 MemoryError 的某个点。

这不是因为函数检查的数字太大，因为它发生在第一个 for 循环的第 6 次运行左右。

我已经尝试过 gc.enable() 和 gc.collect() 没有任何积极的结果。

有谁知道如何解决这个问题？

编辑：根据请求定义 pi 和 isprime() ：

```
f = open("/root/number", "r")
pi = f.read()
f.close() 
```

其中文件“数字”包含我想在其中找到素数的原始数字。

```
def isprime(n):
    n = abs(int(n))
    if n < 2:
            return False
    if n == 2:
            return True
    if not n & 1:
            return False
    for x in range(3, int(n**0.5)+1, 2):
            if n % x == 0:
                    return False
    return True 
```

追溯：

```
Traceback (most recent call last):
  File "./primal.py", line 36, in <module>
    if isprime(number) == True:
  File "./primal.py", line 24, in isprime
    for x in range(3, int(n**0.5)+1, 2):
MemoryError 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T13:21:21.823

使用[`xrange`](http://docs.python.org/library/functions.html#xrange)代替`range`，最重要的是在`isprime`，这里：

```
for x in xrange(3, int(n**0.5)+1, 2): 
```

`xrange`不会在内存中创建整个列表，而 range 会，但是在迭代它们之后您没有使用结果。

另一个提示：只测试`isprime(n)`，不需要看它是否等于*，*`True`那就是。:-)`if`

 *```
if isprime(number):  # Only works if isprime(number) is boolean True
    ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T13:22:48.050

如果这是在 Python v **2.x**中，请使用`xrange()`而不是`range()`. `range()`在内存中一次生成一个列表，同时`xrange()`“按需”工作，每次需要时生成一个值。

在 Python **3.x** `xrange()`中消失了，并且`range()`表现得像`xrange()`以前一样。

引用[Python 3 中的新增功能](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)：

> range() 现在的行为类似于 xrange() 过去的行为，除了它适用于任意大小的值。后者不再存在。*

# racket - 在另一个应用程序中使用 MzCom

> ID：11262483
> 
> 赞同：1
> 
> 时间：2012-06-29T13:14:07.053
> 
> 标签：racket

我和 mzcom 一起玩。并且有一些问题。这个模块的状态是什么？它是否可用于在另一个应用程序（c++）中实现以供认真使用？当我必须加载包含一些方案代码的文件时，我必须尊重什么？例如 (printf , display, newline) 不要给我一些值 (#)。

提前感谢伊斯梅尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:31:23.407

如果将来有人偶然发现这个问题，这里有一个包含更多信息的邮件列表线程：

[http://www.mail-archive.com/users@racket-lang.org/msg13032.html](http://www.mail-archive.com/users@racket-lang.org/msg13032.html)

# java - 我应该如何使用 guava TypeToken 反射性地实例化参数化类型？

> ID：11262484
> 
> 赞同：1
> 
> 时间：2012-06-29T13:14:08.820
> 
> 标签：java, reflection, guava

我的 TypeRegisterer 类允许客户端注册参数化类型（使用与 TypeRegisterer 相同的参数），然后使用它们的原始类型名称实例化它们。

我当前的解决方案有效，但我有一个未经检查的演员表警告，我不确定忽略它是否安全。有一个更好的方法吗？

```
public class TypeRegisterer<T> {
    private Map<String, TypeToken<? extends Base<T>>> registeredTypes;

    public void registerType(TypeToken<? extends Base<T>> typeToken) {
        registeredTypes.put(typeToken.getRawType().getSimpleName(), typeToken);
    }

    public Base<T> initType(String className, T feature) throws Exception {
        // validation and exception handling removed for brevity
        TypeToken<? extends Base<T>> ruleType = registeredTypes.get(className);

        @SuppressWarnings("unchecked")
        Class<? extends Base<T>> rawType = (Class<? extends Base<T>>) ruleType .getRawType();

        return rawType.getConstructor().newInstance();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:21:04.383

这没关系 - 参数化类型使用[类型擦除](http://en.wikipedia.org/wiki/Type_erasure)编译，因此参数信息在运行时不可用。

在运行时`Class<Base<T>> == Class<Base<Integer>> == Class<Base<Double>>`等，因此您的变量引用的类对象`rawType`足以实例化该类。

# python - 破碎的提示，简单的 if 语句？（Python）

> ID：11262488
> 
> 赞同：2
> 
> 时间：2012-06-29T13:14:24.337
> 
> 标签：python, if-statement

```
def prompt():
    x = raw_input('Type a command: ')
    return x

def nexus():
    print 'Welcome to the Nexus,', RANK, '. Are you ready to fight?';
    print 'Battle';
    print 'Statistics';
    print 'Shop';
    command = prompt()
    if command == "Statistics" or "Stats" or "Stat":
        Statistics()
    elif command == "Battle" or "Fight":
        Battle()
    elif command == "Shop" or "Buy" or "Trade":
        Shop()
    else:
        print "I can't understand that..."
        rankcheck() 
```

实际上，这应该做的是在输入 stat 时将您带到 Stat 功能，在输入 Battle 时带您到 Battle 功能，在输入 shop 时带您到 shop 功能。但是，我实际上在让它工作时遇到了问题（Duh）。当输入任何内容时，它会直接将我带到 Stat 函数。我相信这是因为我处理提示的方式。它几乎只看到第一个 if 语句并按应有的方式呈现函数。但是，如果我输入 Battle，它仍然需要我进行统计。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T13:16:29.093

条件

```
command == "Statistics" or "Stats" or "Stat" 
```

总是考虑`True`。它要么评估为`True`if `command`is `Statistics`，要么评估为`"Stats"`。你可能想要

```
if command in ["Statistics", "Stats", "Stat"]:
    # ... 
```

相反，或者更好

```
command = command.strip().lower()
if command in ["statistics", "stats", "stat"]: 
```

放松一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:16:44.897

`"Stats"`是一个非零长度字符串，因此它充当布尔值`True`。尝试使用`in`一个序列来代替：

```
if command in ("Statistics", "Stats", "Stat"):
    Statistics()
elif command in ("Battle", "Fight"):
    Battle()
elif command in ("Shop", "Buy", "Trade"):
    Shop()
else:
    print "I can't understand that..."
    rankcheck() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T13:23:24.897

此外，当使用带有 and/or 语句的简单 if 时，请确保始终引用被比较的元素。例如，

```
if command == "Statistics" or "Stats" or "Stat":
        Statistics() 
```

将会

```
if command == "Statistics" or command == "Stats" or command == "Stat":
        Statistics() 
```

但是，如前所述，最好使用简单的“in”关键字

# iphone - 将覆盖图像与捕获图像 ios 合并的问题

> ID：11262495
> 
> 赞同：0
> 
> 时间：2012-06-29T13:14:53.700
> 
> 标签：iphone, ios

我正在开发相机应用程序，我在其中放置了一个叠加图像，因为我捕获了图像。我正在使用以下代码进行合并图像的处理，但徽标的位置不正确。

```
- (UIImage*)addOverlayToBaseImage:(UIImage*)baseImage {
     UIImage *newImage = [self CombineImage:baseImage];
     return newImage;
}

-(UIImage *)CombineImage :(UIImage*)myCapturedImage{ 

  CGSize finalSize = [myCapturedImage size];
  CGSize overlaySize = [overlayGraphic size];
  UIGraphicsBeginImageContext(finalSize);

  [myCapturedImage drawInRect:CGRectMake(0,0,finalSize.width,finalSize.height)];

  CGFloat xScaleFactor = finalSize.width / 320;
  CGFloat yScaleFactor = finalSize.height / 480;

  [overlayGraphic drawInRect:CGRectMake(30 * xScaleFactor, 100 * yScaleFactor, overlaySize.width * xScaleFactor, overlaySize.height * yScaleFactor)]; 

  UIImage *combinedImage = UIGraphicsGetImageFromCurrentImageContext();

  UIGraphicsEndImageContext();
  return combinedImage;
 } 
```

我从这个 url [ [http://www.musicalgeometry.com/?p=1681]](http://www.musicalgeometry.com/?p=1681])中获取参考，并在图像中使用该 onr [Capture camera view 和 onverlay](https://stackoverflow.com/questions/3882587/capture-camera-view-and-onverlay-in-an-image)

如果我的代码有任何错误，请指导我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:01:54.640

请尝试替换此行：

```
 [overlayGraphic drawInRect:CGRectMake(30 * xScaleFactor, 100 * yScaleFactor,
 overlaySize.width * xScaleFactor, overlaySize.height * yScaleFactor)]; 
```

用这条线

```
[overlayGraphic drawInRect:CGRectMake(0, 0, finalSize.width, finalSize.Height)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:36:59.613

Try this...

```
- (UIImage*)addOverlayToBaseImage:(UIImage*)baseImage{

UIImage *overlayImage = [UIImage imageNamed:@"img.png"];    
CGPoint topCorner = CGPointMake(0, 0);
CGSize targetSize = CGSizeMake(320, 480);   
CGRect scaledRect = CGRectZero;

CGFloat scaledX = 480 * baseImage.size.width / baseImage.size.height;
CGFloat offsetX = (scaledX - 320) / -2;

scaledRect.origin = CGPointMake(offsetX, 0.0);
scaledRect.size.width  = scaledX;
scaledRect.size.height = 480;

UIGraphicsBeginImageContext(targetSize);    
[baseImage drawInRect:scaledRect];  
[overlayImage drawAtPoint:topCorner];   
UIImage* result = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();    

return result;  
} 
```

# visual-studio-2010 - 客户端无法连接到测试控制器 (VSTS)

> ID：11262498
> 
> 赞同：1
> 
> 时间：2012-06-29T13:15:22.547
> 
> 标签：visual-studio-2010, tfs, load-testing

我正在尝试在虚拟环境（labmanager）中设置测试台，目前没有 AD，并从作为 AD 成员的开发机器（客户端）访问它。代理和控制器都在 labmanager 中实例化。我在代理和控制器上创建了一个本地帐户（tfs2010testuser），用户名和密码相同。代理和控制器都有一个 dns 名称，客户端、代理和控制器都知道这些名称。用户 tfs2010testuser 是代理和控制器的管理员。此外，tfs2010testuser 是 TeamTestAgentService、TeamTestControllerAdmins 和 TeamTestControllerUsers 的成员。控制器在 tfs2010testuser 帐户下运行。代理连接到控制器。在代理和控制器上禁用本地防火墙，允许 devenv.exe 通过客户端防火墙。

```
PORT      STATE SERVICE
135/tcp   open  msrpc
139/tcp   open  netbios-ssn
445/tcp   open  microsoft-ds
1720/tcp  open  H.323/Q.931
3389/tcp  open  ms-wbt-server
6901/tcp  open  jetstream
49152/tcp open  unknown
49153/tcp open  unknown
49154/tcp open  unknown
49155/tcp open  unknown
49157/tcp open  unknown 
```

无法真正让 nmap 显示从控制器到客户端的可用端口。
我尝试使用我的 AD 用户 jmn 连接到测试控制器。此用户是在控制器、管理员成员和 TeamTestControllerAdmins 和 TeamTestControllerUsers 上本地创建的。客户端和控制器上的密码相同。当我尝试从 vs2010 连接到控制器时，我收到错误“请求的名称有效，但未找到请求类型的数据”。

当我查看客户端上的事件日志时，我看到以下内容：

```
The description for Event ID 0 from source VSTTExecution cannot be found. Either the component that raises this event is not installed on your local computer or the installation is corrupted. You can install or repair the component on the local computer.
If the event originated on another computer, the display information had to be saved with the event.
The following information was included with the event: 
(devenv.exe, PID 2196, Thread 1) Timed out waiting for controller connect
the message resource is present but the message is not found in the string/message table 
```

超时消息很有趣。为什么会这样？

控制器的事件日志没有什么有趣的。

我已经在这里工作了 1.5 天，试图让它工作，阅读了很多关于设置主机文件、dns、镜像用户、防火墙等的帖子。还阅读了 ms 故障排除指南，但我仍然没有弄清楚问题。有什么想法吗？

非常感谢任何信息或提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T20:02:05.517

我的错误并不完全相同，但是对于

> 找不到来自源 VSTTExecution 的事件 ID 0 的描述。引发此事件的组件未安装在本地计算机上，或者安装已损坏。您可以在本地计算机上安装或修复组件。
> 
> 如果事件起源于另一台计算机，则显示信息必须与事件一起保存。
> 
> 活动中包含以下信息：
> 
> （devenv.exe，PID 3652，线程 7） ControllerProxy：ProcessQueueTestRunWorkerException：System.TypeLoadException：方法 'add_FailedToReachController' 来自程序集 'Microsoft.VisualStudio.QualityTools.AgentProcessManager，版本 = 11.0，类型为 'Microsoft.VisualStudio.TestTools.Agent.AgentProcessManager' .0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 没有实现。在 Microsoft.VisualStudio.TestTools.TestManagement.LocalControllerProxy.StopProcessNoLock(Boolean invalidateRunId) 在 Microsoft.VisualStudio.TestTools.TestManagement.LocalControllerProxy.StopProcess(Boolean invalidateRunId) 在 Microsoft.VisualStudio.TestTools.TestManagement.LocalControllerProxy.OnTestRunOperationError(Guid runId) 在 Microsoft .VisualStudio.TestTools.TestManagement.LocalControllerProxy。
> 
> 消息资源存在，但在字符串/消息表中找不到消息

我修复了 Visual Studio 2012 更新 2 的安装，希望它对你有用

# wcf - 我们的数据访问层应该在 WCF 服务还是 dll 中？

> ID：11262501
> 
> 赞同：0
> 
> 时间：2012-06-29T13:15:30.797
> 
> 标签：wcf, dll, data-access-layer

我们的产品有两个客户端，一个网站和一个 Windows 应用程序。两个客户端都需要共享数据访问层，因为它包含一些我们不希望复制的复杂业务逻辑。该层应该公开为 WCF 服务，还是放入共享的 .dll 并与两个客户端一起部署？两者的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:20:46.193

第一个方面是安全性：如果您的所有代码都在您的网络服务器中本地运行，并且它被黑客入侵（已知会发生......），那么攻击者可以访问您的数据库及其包含的所有好东西，或者包含在不久之后将发生的。

如果您的代码位于 Web 服务中，那么攻击者将很难窥探您的数据库。

缺点当然是 web 服务是一个相当慢的协议，如果你有一个远程服务，只是你正在访问（即不需要互操作性），那么你应该使用更快、更轻量级的协议——简单的 RPC、套接字或消息传递对于相同的结果，系统将是更好的选择。

# sql-server - 扁平化 SQL Server 中的父子关系

> ID：11262509
> 
> 赞同：0
> 
> 时间：2012-06-29T13:15:47.877
> 
> 标签：sql-server

样本数据：

我可以使用此查询来展平父子关系....

任何帮助...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:40:15.143

尝试以下操作：

```
select
**COALESCE(mg4.Id,   mg3.Id,   mg2.Id,   mg1.Id,   em.Id)**   AS cat1ID,
**COALESCE(mg4.Name, mg3.Name, mg2.Name, mg1.Name, em.Name)** AS cat1Name,

**CASE
  WHEN mg4.Id IS NOT NULL THEN mg3.Id
  WHEN mg3.Id IS NOT NULL THEN mg2.Id
  WHEN mg2.Id IS NOT NULL THEN mg1.Id
  WHEN mg1.Id IS NOT NULL THEN em.Id
END** AS cat3ID,
**CASE
  WHEN mg4.Id IS NOT NULL THEN mg3.Name
  WHEN mg3.Id IS NOT NULL THEN mg2.Name
  WHEN mg2.Id IS NOT NULL THEN mg1.Name
  WHEN mg1.Id IS NOT NULL THEN em.Name
END** AS cat3Name,

**CASE
  WHEN mg4.Id IS NOT NULL THEN mg2.Id
  WHEN mg3.Id IS NOT NULL THEN mg1.Id
  WHEN mg2.Id IS NOT NULL THEN em.Id
END** AS cat3ID,
**CASE
  WHEN mg4.Id IS NOT NULL THEN mg2.Name
  WHEN mg3.Id IS NOT NULL THEN mg1.Name
  WHEN mg2.Id IS NOT NULL THEN em.Name
END** AS cat3Name,

**CASE
  WHEN mg4.Id IS NOT NULL THEN mg1.Id
  WHEN mg3.Id IS NOT NULL THEN em.Id
END** AS cat4ID,
**CASE
  WHEN mg4.Id IS NOT NULL THEN mg1.Name
  WHEN mg3.Id IS NOT NULL THEN em.Name
END** AS cat4Name,

**CASE WHEN mg4.Id IS NOT NULL THEN em.Id   END** AS cat5ID,
**CASE WHEN mg4.Id IS NOT NULL THEN em.Name END** AS cat5Name,

em.Id AS chosenCatId,

CASE WHEN  em.id > 0 THEN 1 ELSE 0 END 
+ CASE WHEN  mg1.id > 0 THEN 1 ELSE 0 END 
+ CASE WHEN  mg2.id > 0 THEN 1 ELSE 0 END 
+ CASE WHEN  mg3.id > 0 THEN 1 ELSE 0 END
+ CASE WHEN  mg4.id > 0 THEN 1 ELSE 0 END AS chosenLevel

from tempCategory em 

left join tempCategory mg1  
on mg1.Id = em.parentCategory

left join tempCategory mg2  
on mg2.Id = mg1.parentCategory

left join tempCategory mg3  
on mg3.Id = mg2.parentCategory

left join tempCategory mg4  
on mg4.Id = mg3.parentCategory 
```

我省略了最后一个连接，因为您的查询不会从`mg5`.

SQL Fiddle 上的这个查询：[http ://sqlfiddle.com/#!3/a6f01/5](http://sqlfiddle.com/#!3/a6f01/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:28:50.960

纯 T-SQL 本身不支持递归查询，但是您可以使用 SQL Server 公用表表达式（SQL-Server 独有的功能）。

这是一个涵盖 SQL-Server CTE 递归的页面：http: [//msdn.microsoft.com/en-us/library/ms186243 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)

# html - CSS：居中包含浮动元素的元素

> ID：11262510
> 
> 赞同：1
> 
> 时间：2012-06-29T13:15:48.973
> 
> 标签：html, css

如何使未知宽度的元素居中，其中包含具有 display: block 但都浮动到一侧的元素？

基本上，我有一个菜单，其中包含许多具有 display: block 的项目（因为它们需要有适当的填充），但都在一行中。

我[在 jsFiddle 上做了一个示例，](http://jsfiddle.net/SKLZ7/1/)其中绿色菜单必须位于粉色元素的中心，而粉色元素必须适应绿色菜单的高度。

编辑：对不起，错误的例子，用正确的例子更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:37:52.043

我修补了你的一些东西。这是你要找的吗？绿色以粉红色为中心，悬停在绿色上方会突出显示青色块。这些`float: left`行也适用于您最初拥有的相同选择器......

```
#page {
   background: yellow;  
   text-align: center; 
   width: 100%;
   float: left;
}
#mainmenu {
    background: pink;
    padding: 5px;
    width: 400px;
    text-align: center;
}
#mainmenu ul {
    background: green;
    display: inline-block;
}
#mainmenu li {
   display: inline-block;
   padding: 5px 10px 5px 10px;
   float: left;
}
#mainmenu a, #mainmenu a:visited {
   color: #ffffff;
   font-size: 12px;
   text-align: center;
   text-decoration: none;    
}
#mainmenu li:hover {
   background: cyan;        
} 
```

​<a href="http://jsfiddle.net/SKLZ7/39/" rel="nofollow">演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:48:16.967

与其使用浮点数，不如使用`display: inline-block`.

所以`#mainmenu li`会变成：

```
#mainmenu li {
   display: inline-block;
   *display: inline;      /* add this for IE7 as it does not */
   *zoom: 1;              /* support display: inline-block */   
} 
```

**示例 JsFiddle：http: [//jsfiddle.net/SKLZ7/6/](http://jsfiddle.net/SKLZ7/6/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:44:12.180

您正在使用浮动，因此其他元素会在它周围浮动。您必须关闭其余部分的浮动。使用`clear:both`属性将其关闭。

[如此处](https://stackoverflow.com/questions/1294784/css-container-div-height-floating-div-questions)所述，您可以`<div style="clear:both;"></div>`在列表之后添加。

# python - 如何将上传的图像传递给 Flask 中的 template.html

> ID：11262518
> 
> 赞同：26
> 
> 时间：2012-06-29T13:16:10.957
> 
> 标签：python, flask

我正在使用[flask](http://flask.pocoo.org/)，并尝试使用快速入门教程做一些非常简单的事情，只是在我的机器（本地服务器）上运行。我制作了一个简单的上传表单，它成功上传了一个图像文件。然后我想将此图像作为变量传递给 a`template.html`以在页面内显示。该`template.html`文件显示正常，但图像始终是`broken link image symbol`. 我尝试了许多不同的路径，但我觉得我做的事情有点不对劲。

```
import os
from flask import Flask, request, redirect, url_for, send_from_directory, 
                  render_template

UPLOAD_FOLDER = '/home/me/Desktop/projects/flask/uploads'
ALLOWED_EXTENSIONS = set(['txt', 'pdf', 'png', 'jpg', 'jpeg', 'gif'])

app = Flask(__name__)
app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER

def allowed_file(filename):
    return '.' in filename and \
           filename.rsplit('.', 1)[1] in ALLOWED_EXTENSIONS

@app.route('/', methods=['GET', 'POST'])
def upload_file():
    if request.method == 'POST':
        file = request.files['file']
        if file and allowed_file(file.filename):
            filename = secure_filename(file.filename)
            file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
            return redirect(url_for('uploaded_file', filename=filename))
    return '''
    <!doctype html>
    <title>Upload new File</title>
    <h1>Upload new File</h1>
    <form action="" method=post enctype=multipart/form-data>
      <p><input type=file name=file>
         <input type=submit value=Upload>
    </form>
    '''

@app.route('/uploads/<filename>')
def uploaded_file(filename):
    filename = 'http://127.0.0.1:5000/uploads/' + filename
    return render_template('template.html', filename = filename)

if __name__ == '__main__':
    app.run() 
```

这是`template.html`：

```
<!doctype html>
<title>Hello from Flask</title>
{% if filename %}
  <h1>some text<img src="{{filename}}"> more text!</h1>
{% else %}
  <h1>no image for whatever reason</h1>
{% endif %} 
```

如何将上传的图像文件传递给`template.html`它以正确显示？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-29T13:32:45.687

现在发生的是`/uploads/foo.jpg`返回 template.html 中的 HTML。在那里，您尝试将其`/uploads/foo.jpg`用作 img 标签的来源。无处可提供实际图像。

让我们像这样修改它：`/show/foo.jpg`返回 HTML 页面并`/uploads/foo.jpg`返回图像。用这两条替换后一条路线，你应该很高兴：

```
@app.route('/show/<filename>')
def uploaded_file(filename):
    filename = 'http://127.0.0.1:5000/uploads/' + filename
    return render_template('template.html', filename=filename)

@app.route('/uploads/<filename>')
def send_file(filename):
    return send_from_directory(UPLOAD_FOLDER, filename) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-02T22:29:07.467

从 upload_file 函数中，我们前往 template.html 并且将被重定向回来`<img src="{{ url_for('send_file', filename=filename) }}">`，我们点击 send_file 函数，该函数将显示模板内的 HTML 内容以及上传并存储在指定的 UPLOAD_FOLDER 中的图像。`from werkzeug import secure_filename`你在 py 文件中也缺少这个

```
@app.route('/show/<filename>')
def uploaded_file(filename):
    return render_template('template.html', filename=filename)

@app.route('/uploads/<filename>')
def send_file(filename):
    return send_from_directory(UPLOAD_FOLDER, filename) 
```

现在你的 template.html 看起来像这样..

```
<!doctype html>
<title>Hello from Flask</title>
{% if filename %}
  <h1>some text <img src="{{ url_for('send_file', filename=filename) }}">more text!</h1>
{% else %}
  <h1>no image for whatever reason</h1>
{% endif %} 
```

# javascript - 拉斐尔阴影效果

> ID：11262519
> 
> 赞同：5
> 
> 时间：2012-06-29T13:16:12.213
> 
> 标签：javascript, raphael, shadow

有谁知道拉斐尔是否支持使用投影。我正在尝试为我创建的对象创建投影。这是我的代码，但我不知道如何添加阴影。如果可以，请帮助我，我的经理对我非常失望。

```
<html>
<head><title></title>
<script src="raphael-min.js"></script>
<script src="jquery-1.7.2.js"></script>
</head>

<body>

<div id="draw-here-raphael" style="height: 200px; width: 400px;">
</div>

<script type="text/javascript">
//all your javascript goes here

var r = new Raphael("draw-here-raphael"),

    // Store where the box is
    position = 'left',

    // Make our pink rectangle
    rect = r.rect(20, 20, 50, 50).attr({"fill": "#fbb"});

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T13:40:29.070

-[`.glow()`](http://raphaeljs.com/reference.html#Element.glow)方法可以在一定程度上使用：

```
var circle = paper.circle(100,100,50);
var path = paper.path('m200,50 l100,0 l100,100 l0,100 z');

circle.glow();

path.attr({
    fill: 'blue'
});
path.glow({
    color: '#444',
    offsety: 20 
});​ 
```

在这里查看它的实际效果：http: [//jsfiddle.net/sveinatle/gkayG/7/](http://jsfiddle.net/sveinatle/gkayG/7/)

~~它似乎只适用于线条，但实际上并没有填充阴影。~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:24:33.587

Raphaeljs 本身没有这样的功能，但[插件](https://groups.google.com/forum/?fromgroups#!forum/raphaeljs)可能会有所帮助。另外，对于简单的形状，我认为可以通过渲染两次来模拟效果，首先是黑色，部分透明度和一点偏移（模仿阴影），然后是形状本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:27:50.103

老问题，但我更喜欢在它下面绘制对象的克隆，每个像素都从前一个像素中删除，以获得 3D 效果。

```
Raphael.el.depth = function(z, shade) {
    z = (typeof z !== "undefined") ? z : 5;
    shade = (typeof shade !== "undefined") ? shade : '#999';
    for (var c = 0; c < z; c += 1) {
        var s = this.clone().attr({ 'fill': shade }).transform("t" + (c + 1) + "," + (c + 1));
    }
    this.toFront();
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-23T18:33:08.403

另一个很好的解决方案是使用`clone()`函数。这是一个很好的选择，因为它适用于复杂`paths`的 . 它看起来真的像一个影子。

查看**[演示](http://jsfiddle.net/ry8kT/128/)**：

```
var r = new Raphael(10,10, 500, 500);
var p = r.path("M100,300 L100,100 C100,100 250,100 250,300z");
p.attr({fill: 'yellow'});

p2 = p.clone();
p2.attr({fill:'gray', stroke:'none'}).transform('t7,5');

p.toFront(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-23T17:22:24.770

我写了一个扩展来处理这种事情。它真的很容易使用：

```
circle.shadow(); 
```

会做你想做的。此外，它是 SVG 滤镜效果的实现（`glow()`不是），因此它适用于动画等。

项目页面在这里：[http](http://chrismichaelscott.github.io/fraphael/) ://chrismichaelscott.github.io/fraphael/ 。

# java - 推土机：将单个字段映射到列表中

> ID：11262525
> 
> 赞同：4
> 
> 时间：2012-06-29T13:16:31.453
> 
> 标签：java, dozer

您如何将单个字段映射到推土机中的`List`/ ？`Collection`

```
class SrcFoo {
    private String id;
    private List<SrcBar> bars;
}

class SrcBar {
    private String name;
} 
```

这是我的目标对象：

```
class DestFoo {
    private List<DestBar> destBars;
}

class DestBar {
    private String fooId; // Populated by SrcFoo.id
    private String barName;
} 
```

我希望所有`DestBar.fooId`（DestBars 的整个列表）都填充`SrcFoo.id`

这个问题与此处发布的问题类似，希望我想将我的单个字段映射到列表中的每个项目。[推土机：将单个字段映射到 Set](https://stackoverflow.com/questions/4801593/dozer-map-single-field-to-set)

我尝试了以下方法，但它只填充`DestBar.fooId`了列表中的第一项。

```
<mapping> 
     <class-a>SrcFoo</class-a> 
     <class-b>DestFoo</class-b> 
     <field>
         <a>bars</a>
         <b>destBars</b>
     </field> 
     <field>
         <a>id</a>
         <b>destBars.fooId</b> <!-- same affect as destBars[0].fooId ? -->
     </field> 
</mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:41:47.477

Dozer 不支持这种类型的映射。为了进行这种类型的映射，您必须知道 Collection 上的索引（静态映射）。这是一个自定义转换器的工作，创建一个字符串到列表（DestBar）的转换器，如下所示：

```
public class YourConverter extends DozerConverter<String, List> 
```

在转换器中实现映射逻辑（只需在需要的地方设置字符串 ID）并像这样配置你的推土机文件：

```
<mapping> 
     <class-a>SrcFoo</class-a> 
     <class-b>DestFoo</class-b> 
     ...
     <field custom-converter="yourpackage.YourConverter">
         <a>id</a>
         <b>destBars</b>
     </field> 
</mapping> 
```

# c# - 进程未启动，但在 VS 开发服务器中运行时启动

> ID：11262533
> 
> 赞同：2
> 
> 时间：2012-06-29T13:17:01.183
> 
> 标签：c#, .net, wcf

我有一个 WCF 服务，当请求进来时，它必须使用 Process.Start() 启动一个进程。但是，当我使用 Visual Studio 开发服务器对其进行测试时，一切正常，但是当我运行它时进程没有启动在 IIS 服务器上。

我猜它与权限/特权等有关，但我无法弄清楚我需要在什么地方或在哪里给予许可。

这就是我现在所拥有的。帮助将不胜感激

```
if (uri.StartsWith("http://"))
{
    Process.Start(new ProcessStartInfo() { FileName = uri, UseShellExecute = true, Verb = "runas"});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:57:44.723

我已将自己的用户帐户（管理员帐户）连接到 WCF 服务的应用程序池。有用。感谢 Rajesh 指出应用程序池的用户帐户。

另外，我必须删除 'Verb = "runas"'

# linux - 在 ubuntu 10.04(linux) 中安装 xml 编辑器

> ID：11262535
> 
> 赞同：0
> 
> 时间：2012-06-29T13:17:06.367
> 
> 标签：linux, ubuntu-10.04

嘿，我已经从某个站点下载了其中一个 xml 编辑器。但不知道如何在 ubuntu 10.04 中安装它，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:18:44.100

第 1 步：打开 Ubuntu 软件中心

第 2 步：在搜索栏中键入“XML Copy Editor”或“xmlcopyeditor”。

第三步：点击安装。

或者你想安装你下载的精确？

# php - 加密解密有什么问题？

> ID：11262539
> 
> 赞同：1
> 
> 时间：2012-06-29T13:17:24.623
> 
> 标签：php, ios, cocoa-touch, encryption, aes

在服务器端在 php 中加密数据并在 iOS 中解密失败。

在 php 的服务器上，它看起来像这样（仅用于测试）：

```
$iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
$iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

$ciphertext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, "a16byteslongkey!a16byteslongkey!", "iphone", MCRYPT_MODE_CBC, $iv);
$base64encoded_ciphertext = base64_encode($ciphertext);
return $base64encoded_ciphertext; 
```

在 iOS 中：

```
 NSData *decrypted = [[RNCryptor AES256Cryptor] decryptData:[QSStrings decodeBase64WithString: text] password:@"a16byteslongkey!a16byteslongkey!" error:&error];

NSLog(@"errro - %@", [error description]);

NSString *decryptedString = [[[NSString alloc] initWithData: decrypted encoding: NSUTF8StringEncoding] autorelease]; 
```

错误描述是：

```
Error Domain=net.robnapier.RNCryptManager Code=2 "Unknown header" UserInfo=0x8582e10 {NSLocalizedDescription=Unknown header} 
```

使用 RNCryptor：[https ://github.com/rnapier/RNCryptor](https://github.com/rnapier/RNCryptor)

在 encryptor 中，这是引发错误的地方：

```
 if (![header isEqualToData:[NSData dataWithBytes:AES128CryptorHeader length:sizeof(AES128CryptorHeader)]]) {
*error = [NSError errorWithDomain:kRNCryptorErrorDomain code:kRNCryptorUnknownHeader
                         userInfo:[NSDictionary dictionaryWithObject:NSLocalizedString(@"Unknown header", @"Unknown header") forKey:NSLocalizedDescriptionKey]];
return NO; 
```

}

这有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:33:35.923

刚刚阅读了 RNCryptor 的站点，我相信它是一个完整的消息输入输出加密器。如果您查看他们 wiki 上的数据格式

[https://github.com/rnapier/RNCryptor/wiki/Data-Format](https://github.com/rnapier/RNCryptor/wiki/Data-Format)

我相信他们希望您加密的数据没有标头，但如果您正在解密，那么它预计数据是使用他们的加密器加密的，它添加了标头和 hmac。

如果我是正确的，您的服务器端放在一起的数据只是 RNCryptor 期望看到的完整消息的密文部分！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T10:07:31.180

```
//After getting data from server 
-(Void)getDataFromServer:(NSData*)responseData
{
 NSString *base64String = [responseData base64EncodedStringWithOptions:0];

//Decode base64 data
    NSData *decodedData = [DatabaseHandler base64DataFromString:newStr];

    NSData *decryptedData = [RNDecryptor decryptData:decodedData withSettings:kRNCryptorAES256Settings password:@"YourKey" error:&error];

        NSLog(@"%@",[error userInfo]);
         NSString *dataToDecrypt=  [decryptedData base64EncodedStringWithOptions:0];

    NSString* newStr = [[NSString alloc] initWithData:decryptedData
                                             encoding:NSUTF8StringEncoding]; 
}

- (NSString *) base64StringFromData: (NSData *)data length: (int)length {
  unsigned long ixtext, lentext;
  long ctremaining;
  unsigned char input[3], output[4];
  short i, charsonline = 0, ctcopy;
  const unsigned char *raw;
  NSMutableString *result;

  lentext = [data length]; 
  if (lentext < 1)
    return @"";
  result = [NSMutableString stringWithCapacity: lentext];
  raw = [data bytes];
  ixtext = 0; 

  while (true) {
    ctremaining = lentext - ixtext;
    if (ctremaining <= 0) 
       break;        
    for (i = 0; i < 3; i++) { 
       unsigned long ix = ixtext + i;
       if (ix < lentext)
          input[i] = raw[ix];
       else
  input[i] = 0;
  }
  output[0] = (input[0] & 0xFC) >> 2;
  output[1] = ((input[0] & 0x03) << 4) | ((input[1] & 0xF0) >> 4);
  output[2] = ((input[1] & 0x0F) << 2) | ((input[2] & 0xC0) >> 6);
  output[3] = input[2] & 0x3F;
  ctcopy = 4;
  switch (ctremaining) {
    case 1: 
      ctcopy = 2; 
      break;
    case 2: 
      ctcopy = 3; 
      break;
  }

  for (i = 0; i < ctcopy; i++)
     [result appendString: [NSString stringWithFormat: @"%c", base64EncodingTable[output[i]]]];

  for (i = ctcopy; i < 4; i++)
     [result appendString: @"="];

  ixtext += 3;
  charsonline += 4;

  if ((length > 0) && (charsonline >= length))
    charsonline = 0;
  }     
  return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T12:56:59.217

您是否从这里关注`php`和`iOS`库：

[https://github.com/RNCryptor](https://github.com/RNCryptor)

我的要求是一样的。加密数据到达我的 iOS 设备，目标 c 必须解密它。

今天拉了几乎所有的头发之后，我现在可以做到了。下面是一段代码：

```
NSString *message = @"AwF+ttZCyQ7eurRU2zo4KGqQTLBXRRdmBiYe65uv/3AENxUKf6wo3Cpsh8Yk7/OsOwXRDDR3lO5OKNwhJCSxxUNYbpBwWb2KDSxiRbG+11Vrfbk35VRvelAo2Ai8PAz4FJ9z9u7NdBvyVQYF8v1Pd7/rB4TMXaWd98AM4KO3EYmLhTxMpbqDu1LJXDT4TDgXsjv7/ISnISQK3oTmG1vYlO7N";
NSString *password = @"myPassword";

NSData *data = [[NSData alloc] initWithBase64EncodedString:message options:0];
NSError *error;
NSData *decryptedData = [RNDecryptor decryptData:data
                                    withPassword:password
                                           error:&error];

NSString* newStr = [[NSString alloc] initWithData:decryptedData encoding:NSUTF8StringEncoding];
NSLog(@"\n\nerror: %@\n\nString:%@", error, newStr); 
```

如果您`encrypt.php`从他们的`php`示例（内部`RNCryptor-php-master > examples > encrypt.php`）下载并运行，您将收到`base64`上面的字符串（`NSString *message`）。它的密码在`myPassword`那里。运行这段`obj c`代码会返回给你这个

> “这是我的测试向量。它不是太长，但超过一个块，需要填充。”

这一行是正确的，有源代码`encrypt.php`。我做的错误是，我直接转换`NSString`为`NSData`如下

> `NSData *data = [message dataUsingEncoding:NSUTF8StringEncoding];`

在我像下面这样解码该`base64`字符串后，解密工作

> `NSData *data = [[NSData alloc] initWithBase64EncodedString:message options:0];`

就是这样。希望能帮助到你。

# java - iText 1.3.1：如何使用自定义图像作为 com.lowagie.text.Image

> ID：11262541
> 
> 赞同：0
> 
> 时间：2012-06-29T13:17:26.990
> 
> 标签：java, image, struts, itext

我正面临 iText 1.3.1 的图像转换问题（我知道它是旧版本，但我别无选择）

在论坛上搜索了几次后，我看到了将自定义图像（`.png`例如）作为 iText 图像（`com.lowagie.text.Image`）的不同方法。

我尝试了很多方法，例如：

```
File imgRed = new File("smileyRed.png");
java.awt.Image smileyRed = ImageIO.read(imgRed);
com.lowagie.text.Image mySmileyRed = com.lowagie.text.Image.getInstance(smileyRed); 
```

或者 ：

```
URL imageUrlRed = getClass().getClassLoader().getResource("smileyRed.png");
com.lowagie.text.Image mySmileyRed = com.lowagie.text.Image.getInstance(imageUrlRed); 
```

但是这两种方式都会抛出异常（`IOException`第一个是一个，`NullPointerException`第二个是一个）。

您知道我如何定义我的图像以使其正常工作吗？

我正在使用的 Java EE 应用程序正在使用 Struts。如果听起来更容易的话，也许我可以用这个图像定义一个 bean。我怎么能那样做？

# closures - 我可以在谷歌闭包中使用 JsonP 使用 post 方法吗？

> ID：11262542
> 
> 赞同：0
> 
> 时间：2012-06-29T13:17:36.227
> 
> 标签：closures, jsonp

> 我正在使用以下代码使用 google 闭包在 jsonp 中发送请求，我想 > 仅使用 Post 方法发送内容，我想知道它是如何从形成的 url 发送的 > 它似乎是通过普通 get 方法发送的
> 
> 这是我的代码

```
var url = "http://myurl/";
var jsonp = new goog.net.Jsonp(url);
jsonp.send(
{"name":"jessi","action":"initaction","gameId":"123"},
 callback, callbackfailed); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:21:39.950

使用 JSONP POST 基本上是不可能的。

`<script>`标签无法发送 POST 请求。

# r - 在data.frame R中的每一行中取最后一个填充的单元格

> ID：11262547
> 
> 赞同：3
> 
> 时间：2012-06-29T13:18:07.023
> 
> 标签：r, dataframe

我有一个数据框，它有 500 行，每行至少有十几列。有些行有更多的列。我想要做的是创建一个变量，其中包含每行最后一个填充单元格的内容。

输入（头部（calls_with_overlap，10））

```
 A      B        C       D
1\. aknasd kasdknsd kasdkas kasdpa
2\. asdhad none
3\. apihsd piahsdas ashpidapishd phasd askdn wads
4\. kasdas none 
```

到目前为止我尝试的是：

```
if (calls_with_overlap$Overlap[10] = "none") 
{
Ending <- TRUE
} 
else (Ending <- FALSE)
 if (Ending == FALSE) 
   {
  for (q in 1:1024) #max is 1024 columns. perhaps not best way for number of columns.
  {
   EndingCell <- c(10 + q)
   EndingCellcontents <- calls_with_overlap[h,EndingCell] # h is from an outer loop, going through each row. 
     if (EndingCellcontents != ""){ 
       EndingCellcontents[q] <-    EndingCellcontents}
       last  <-  length(EndingCellcontents)
       last<-  EndingCellcontents[last]
      }} 
```

我希望“最后一个”包含每行中最后一个填充的单元格，除非它说“无”。从 B 列开始。

即在这种情况下

```
last
[1] kasdpa
[2] wads 
```

如果这是一个令人讨厌的问题，我深表歉意，但我正在从头开始自学编程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T14:01:32.567

编辑：错误的行和列

```
df <- data.frame(A=c("r","","z"),B=c("w","",""))
df
  A B
1 r w
2    
3 z  
v <- apply(df, 1, function(x) x[rev(which((x!="")==TRUE))[1]])
[1] "w" NA  "z"
v[!is.na(v)]
[1] "w" "z" 
```

# events - SqlAlchemy：取消事件处理程序操作

> ID：11262550
> 
> 赞同：0
> 
> 时间：2012-06-29T13:18:17.940
> 
> 标签：events, sqlalchemy

当我附加到处理程序中的属性事件（“附加”）以取消附加操作时，是否有可能？

假设我在处理程序中对每个附加记录进行了一些验证，如果记录没有通过验证，我想被跳过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:00:32.270

请参阅[sqlalchemy.orm.validates](http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#sqlalchemy.orm.validates)以了解另一种执行验证的方式，这会产生一些更简洁的代码。根据文档：

> 然后，该函数可以引发验证异常以停止进程继续（其中 Python 的内置 ValueError 和 AssertionError 异常是合理的选择），或者可以在继续之前修改或替换值。否则，该函数应返回给定值。

```
class User(...):
    # ...
    addresses = relationship("Address")

    @validates('addresses')
    def _modify_addresses(self, key, target):
        if target.phone is None
            raise ValueError("User addresses must have a phone number!")
        return target 
```

根据文档，您可以修改添加到集合中的值。但要完全避免添加它，您需要引发异常。显然，您需要在外部代码中处理此异常：

```
def _add_addresses(user, address_list):
    for address in address_list:
        try:
            user.addresses.append(address)
        catch ValueError as _exc:
            logging.warn("Could not add Address [%s] to the User [%s]", address, user.name) 
```

# css - 背景中的 Flash 电影和 Chrome 中固定的位置 => 不良行为

> ID：11262551
> 
> 赞同：3
> 
> 时间：2012-06-29T13:18:19.047
> 
> 标签：css, flash, google-chrome, z-index, swfobject

**如果在后台播放 Flash 电影，谷歌浏览器会破坏某些 div 元素的固定位置。**

示例：我的页眉和页脚定位为固定（顶部，底部）。当我滚动窗口时，它们在 Firefox、Safari (5.1.7) 等中保持在顶部和底部，但随着 Chrome 中的内容一起移动。

我使用 SWFObject 2.2 来放置 Flash 电影。我已经尝试了所有 wmode（透明、不透明、窗口）

**HTML 代码：**

```
<script type="text/javascript">
  var fv = {};
  swfobject.embedSWF('background.swf', 'back-flash', '100%', '100%', '10.0.0', 
  'expressinstall.swf', fv, {bgcolor: '#222222', menu: 'false', wmode: 'opaque'}, 
  {id: 'back-flash'});
</script> 
```

包含 Flash 电影的 div 的 z-index 设置为 -99，上述元素的 z-index 设置为 99

**CSS 代码：**

```
#back-flash-holder{
 top: 0;
 left: 0;
 z-index: -99;
 width: 100%;
 height: 100%;
}
#header{
 position: fixed;
 top: 0;
 left: 0;
 width: 100%;
 height: 80px;
 background-color: #ddd;
 z-index: 99;
} 
```

Mac OSX，Chrome 版本为：19.0.1084.56，Flash Player 版本：11.3.300.257

示例：[jsfiddle.net/WE8wv](http://jsfiddle.net/WE8wv/)

知道为什么它在 Safari 中运行时无法在 Chrome 中运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:16:02.083

尝试将您的顶部和左侧值设置为包括 px。我遇到了 Chrome 对我的语法过于挑剔的问题。

# php - PHP Mysql Json 和阿拉伯语

> ID：11262561
> 
> 赞同：0
> 
> 时间：2012-06-29T13:18:49.047
> 
> 标签：php, mysql, encoding, utf-8

我一直在使用 php 和 html 表单在 mysql 中插入阿拉伯语数据。将数据插入 mysql 表后，数据看起来像这样 Ù...Ø±ØØØØ§ Ø§Ù„Ø¹Ø§Ù„Ù... 但是，当我在我的网页上选择此数据时，它会显示完美的阿拉伯语句子。但是，当我将此数据暴露给 json_encode 函数并尝试从 android 读取此数据时，android 在解析 json 后显示 Ù...Ø±ØØ¨Ø§ Ø§Ù„Ø¹Ø§Ù„Ù...。有什么方法可以在 android 中有意义地表示这些数据。

更新：

```
http-equiv="Content-Type" content="text/html; charset=utf-8" 
```

我也在我的展示页面中使用这个元标记。如果没有这个元标记，我的浏览器也会显示像这样的数据 Ù…Ø±ØØ¨Ø§ Ø§Ù„Ø¹Ø§Ù„Ù...</p>

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:25:16.050

您如何通过 MySQL 查看它？油灰？确保将终端编码设置为 UTF-8 而不是 ASCII。

编辑：尝试此操作后，我必须将 Putty 编码设置为**Win1256**，以便字符正确显示在控制台中。

**腻子设置：**

![在此处输入图像描述](../Images/dbdb48c8d9774faa902abce6471da9e8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:21:44.943

确保在所有平台上使用相同的字符编码。理想情况下，使用 UTF-8。

# uitableview - 有人在tttableview 和searchdisplay 中使用three20 吗？

> ID：11262563
> 
> 赞同：1
> 
> 时间：2012-06-29T13:19:01.837
> 
> 标签：uitableview, three20, searchdisplaycontroller

在三个20 TTCalog中有这个demo：SearchTestController

我不知道为什么使用 TTListDataSource 会自动重新加载数据？

我试图模仿，但我失败了......

我使用 TTListDataSource ，就像这样（它是 TTTableViewController 的子类）

```
 [super loadView];
  self.array = [[NSMutableArray alloc] initWithObjects:@"a",@"b", nil];
self.source = [[TT520SearchSource alloc] initWithOtherItems:self.array];
[self bindData];
TTTableViewController   *ttsearch = [[TTTableViewController alloc] initWithStyle:UITableViewStylePlain];

ttsearch.dataSource =  self.source;

self.searchViewController =ttsearch;
self.tableView.tableHeaderView = _searchController.searchBar; 
```

如您所见，TT520SearchSource 是 TTListDataSource 的子类

在那之后，我的问题是：

1.  为什么我的tableview不能自动重新加载数据？？（在TT520SearchSource中，当我输入一些单词时会调用'search'方法）
2.  是不是这个演示中我不认识的某个代表？
3.  我尝试在没有three20（apple demo）的情况下做同样的事情，它的工作，所以我不明白 TTListDataSouce 和 TTModel 的关系。

非常感谢！

# objective-c - UIScrollView 的滚动方向

> ID：11262583
> 
> 赞同：6
> 
> 时间：2012-06-29T13:20:28.003
> 
> 标签：objective-c, ios, uiscrollview

我想复制在 Pinterest 应用程序中看到的效果，它们根据滚动方向隐藏顶部和底部栏。我的问题是：确定 UIScrollView 滚动方式的正确方法是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-29T14:12:04.260

这是解决方案：

```
-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    pointNow = scrollView.contentOffset;
}

-(void)scrollViewDidScroll:(UIScrollView *)scrollView {
    if (scrollView.contentOffset.y<pointNow.y) {
        DLog(@"down");
    } else if (scrollView.contentOffset.y>pointNow.y) {
        DLog(@"up");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:22:37.643

使用`UIScrolViewDelegate's`协议中的方法。[您可以在此处](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html)找到文档。

# ubuntu - 更新我的 ubuntu 精确 12.04 后虚拟框错误（未安装内核驱动程序（rc=-1908））

> ID：11262585
> 
> 赞同：3
> 
> 时间：2012-06-29T13:20:31.900
> 
> 标签：ubuntu, terminal, kernel, virtualbox

我在工作时在我的 ubuntu 精确版本中使用 windows over virtualbox，弹出了一些更新，我更新了我的操作系统。

从那时起，我无法运行我的虚拟盒子..每当我启动我的 Windows 时，它总是给我以下错误

```
Kernel driver not installed (rc=-1908) 
```

我尝试了一切，卸载并安装了虚拟机，更新了内核头文件..尝试了一切，但徒劳无功..有人可以帮我吗？

```
sudo apt-get install linux-headers-generic build-essential 
```

它要求我执行以下命令

```
/etc/init.d/vboxdrv setup 
```

但是当我这样做时，它说找不到命令，我该怎么办？

这就是我得到的

```
Failed to create a new virtual machine. 
```

机器设置文件“/home/kiran/VirtualBox VMs/win 7/win 7.vbox”已经存在。

结果代码：VBOX_E_FILE_ERROR (0x80BB0004) 组件：机器接口：IMachine {5eaa9319-62fc-4b0a-843c-0cb1940f8a91} 被调用者：IVirtualBox {c28be65f-1a8f-43b4-81f1-eb60cb516e66}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-29T14:57:38.317

卸载virtualbox guest添加，然后重新安装

# python - 在“n”条目小部件 Tkinter 界面中保存变量

> ID：11262591
> 
> 赞同：0
> 
> 时间：2012-06-29T13:21:06.833
> 
> 标签：python, user-interface, if-statement, tkinter, ttk

首先为代码的长度道歉，但我想展示这一切。

我有一个看起来像这样的界面：

![表界面](../Images/edcd883b64bcd6bc89dd78a4775dd815.png)

当我将第三个选项菜单更改为“列表”时，我将添加具有“n”值的选项（未显示）。然后我需要'n'列，用户可以在其中输入他们的值。

我还有一个问题，根据界面打开的文本文件，可能有“n”行。

因此，我想知道是否有可能（因为我很难在框中不重复相同的值，现在我需要“n”列）添加“n”个行和列，因为我的代码显示只添加 4 列。我可以读取行数，但无法返回所有这些值，具体取决于有多少行。到目前为止我可以做一排..

谢谢！

```
def numberwritten(number): 
    fg = number.get()
    print fg

numbers = [StringVar() for i in xrange(4) ] #Name available in global scope. Need to add other rows?
for i in numbers: 
    i.trace('w',lambda a,b,c,n=i: numberwritten(n) ) 

def ChoiceBox(choice):

    co_ord = str(frame_table.grid_size())
    col, rows = map(float, co_ord.strip('()').split(','))
    rows = int(rows)
    if choice == "Fixed":
        empty1.destroy()
        #choice_frame.grid_forget()     
        tkMessageBox.showinfo("Message", "No optimisation, value fixed.")
    elif choice == "List":
        column = 7
        for i in xrange(4): 
        choice_title = Label(frame_table, text='Value %g'% float(i+1), bg='white', borderwidth=0, width=10) 
            choice_title.grid(row=1, column=column+i, sticky="nsew", padx=1, pady=1) 
            boxes=[]

        for i in xrange(4):
            for j in range(2, rows): 
                box=Entry(frame_table,bg='white',borderwidth=0,textvariable=numbers[i], width=10, justify="center") # Here I'm having problems with rows 
                box.grid(row=j,column=column+i, sticky='nsew', padx=1, pady=1) 
        boxes.append(box)
        box1,box2,box3,box4=boxes

    elif choice == "Interval" or "Optimisation":
        for i in xrange(2): 
            choice_title1 = Label(frame_table, text='Min Value', bg='white', borderwidth=0)
            choice_title1.grid(row=0, column=column, sticky="nsew", padx=1, pady=1)
            choice_title2 = Label(frame_table, text='Max Value', bg='white', borderwidth=0)
            choice_title2.grid(row=0, column=column+1, sticky="nsew", padx=1, pady=1)

            boxes=[]

        for i in xrange(2): 
            box=Entry(frame_table,bg='white',borderwidth=0,textvariable=numbers[i]) 
            box.grid(row=rows+1,column=i, sticky='ew', padx=1, pady=1) 
            boxes.append(box)
            box1,box2,box3,box4=boxes 
```

更新：我稍微进步了，现在在类 Window 下的 ChoiceBox 部分是 ChoiceBox(self,choice)，我有以下部分，我需要更改注释行以接受“n”个框。

```
column = 7
        for i in xrange(self.number_boxes): 
            choice_title = Label(self.frame_table, text='Value %g'% float(i+1), bg='white', borderwidth=0, width=10) 
            choice_title.grid(row=1, column=column+i, sticky="nsew", padx=1, pady=1) 
        boxes=[]

        for i in xrange(self.number_boxes):
            for j in range(2, rows): 
                box=Entry(self.frame_table,bg='white',borderwidth=0,textvariable=numbers[i], width=10, justify="center") 
                box.grid(row=j,column=column+i, sticky='nsew', padx=1, pady=1) 
            boxes.append(box)
        #box1,box2,box3,box4=boxes 
```

然而，我仍然遇到使用 numberwritten 的问题，包括原始示例中的前几行代码来完全提取值列表，最好是针对每一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:44:09.527

虽然我不相信您已经找到了表达界面的最简单方法，但做您想做的事情相对简单。

从概念上讲，要添加用于编辑值的条目，您必须定义（并存储对）作为该值模型的对象。然后，您定义将操纵该值的小部件（或小部件）。然后根据需要添加这样的键绑定（通常没有；默认值非常好）。最后，将小部件添加到整个用户界面（`grid`例如，通过方法）。但是，这确实意味着您*必须*设计整体代码来处理大小不固定的模型。（当然，删除条目是相反的过程。）

开始将代码**重构**为更小的部分来完成整个任务的较小部分是一个好主意。例如，编写一个函数来创建一个模型，一个*入口*小部件，将该小部件添加到 GUI，并返回模型对象。其他任何需要创建这样一个耦合条目的地方都可以要求这个专家功能为他们完成这项工作，这样你就可以*一次*做对了。通过将事情分解成具有明确定义的任务的小块，可以更容易地专注于更复杂的逻辑方面，而不是陷入小部件管理的（冗长、无聊的）细节中。

# php - 页面访问每 50+ 个数字 url

> ID：11262596
> 
> 赞同：-4
> 
> 时间：2012-06-29T13:21:28.780
> 
> 标签：php

我需要访问 50+ 页示例 `$page`=1 `$page`=51 `$page`=101 `$page`=151

我的 php 函数访问`$page`=1 然后`$page`=2 - 可以帮助我吗？

```
function start(){
        $page=1;
        do{
            $ss=getpagecontent('http://www.domain.com/?pagenumber='.$page);
            for($i2=0, $i2Count=count($ss);$i2<$i2Count;$i2++){
                $jk=getDk($ss[$i2]);
                if(!saveDD($jk, $msg)){

                }
            }
            $page++;
        }while(!empty($ss));
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T13:22:23.003

您需要做的就是`$page`每次迭代增加 50。所以你会改变这个：

```
$page++; 
```

到：

```
$page += 50; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:23:37.003

```
function start(){
        $page=1;
        do{
            $ss=getpagecontent('http://www.domain.com/?pagenumber='.$page);
            for($i2=0, $i2Count=count($ss);$i2<$i2Count;$i2++){
                $jk=getDk($ss[$i2]);
                if(!saveDD($jk, $msg)){

                }
            }
            $page+=50;
        }while(!empty($ss));
    } 
```

# javascript - W3C 将 javascript 中的 html 标记显示为错误

> ID：11262605
> 
> 赞同：0
> 
> 时间：2012-06-29T13:21:52.137
> 
> 标签：javascript, html, xhtml, w3c-validation

在 W3C 验证器中出现错误。我使用查询附加了一个 html 语句。但是，我在 W3C 中收到此错误：

> 属性“id”的值中不允许字符“'”
> 
> ```
> $('<tr id="condition' + num + '" class="clonedInput" ><td class="first-colu… 
> ```
> 
> 您可能违反了此属性的命名约定。例如，id 和 name 属性必须以字母开头，而不是数字。

我的代码如下

```
 $('<tr id="condition' + num + '" class="clonedInput" ><td class="first-column">&nbsp;</td>
<td><span style="float:left; padding-right: 10px;"><select id="conCol' + num + '" 
name="conCol' + num + '" class="standard_select" style="width:147px; background:#fff;">
<option>Telephone Number</option><option>Mobile Number</option><option>Fax Number</option>
<option>iPhone Number</option><option>BB Messenger Id</option><option>Skype Name</option>
<option>Google Talk Id</option><option>MSN Messenger Id</option></select></td>
</tr>').appendTo('#addContact'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:28:02.933

将您的 javascript 代码放在外部文件中（不是内联或头脚本块），或包含在 CDATA 块中：

```
<script type="text/javascript">
<![CDATA[
function addRow()
{
    //do stuff
    $('<tr id="condition' + num + '" class="clonedInput" ><td class="first-colu…
}
]]>
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:30:51.303

W3C 验证器仅用于验证您的最终 X/HTML 标记。您似乎正在将源代码粘贴到验证器中，其中包括 javascript 语句。

验证器失败是因为它不执行 javascript，它只是假设您的整个文档是标记并看到一个`tr`带有`id`of的元素，如果它是直接的 HTML `condition' + num + '`，这确实*是*一个错误。

**编辑**

我会参考@BobDavies 的答案来解决您的问题；回想起来，我只是解释*了为什么*你会得到这个错误。

# datagrid - jQuery EasyUI：使数据网格在边框布局内可调整大小

> ID：11262606
> 
> 赞同：3
> 
> 时间：2012-06-29T13:21:56.940
> 
> 标签：datagrid, jquery-easyui

我正在尝试使用 EasyUI 实现主从控件。目前我有以下内容：

```
<div class="easyui-layout" style="height: 600px;">
    <div region="west" style="width: 250px;">
        <table id="detailsTable">
            <thead>
                <tr>
                    <th field="ID" width="200">ID</th>
                    <th field="Name" width="200">Name</th>
                </tr>
            </thead>
            <tbody>
            ...
            </tbody>
        </table>
    </div>
    <div region="center" title="Main Title">
    ...
    </div>
</div> 
```

下面的脚本将上面的内容变成了一个漂亮的主从控件：

```
$("div.easyui-layout").layout();
$("table#detailsTable").datagrid({
    pagination: false,
    singleSelect: true,
    fitColumns: true
}); 
```

我现在需要的是使网格具有其容器（西面板）的 100% 的宽度，因此它需要与面板一起调整大小。设置`width="100%"`or `style="width: 100%;"`for table 没有帮助，并且在调整面板大小时布局似乎不会触发任何事件（至少我在文档中没有找到任何事件）。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-26T12:30:52.120

（已在评论和编辑中回答。请参阅[没有答案的问题，但问题已在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 看起来可以关闭案例 - fit 选项解决了问题：

```
$("table#detailsTable").datagrid({
    fit: true,
    ... 
```

# c - 带有单个参数的主要

> ID：11262609
> 
> 赞同：3
> 
> 时间：2012-06-29T13:22:03.630
> 
> 标签：c, c89

我最近遇到了一个 C 程序，其中 main 函数只接受一个参数。这在 C89 中合法吗？gcc 似乎没有任何问题。

我*认为*发生的是签名被忽略并且 main`main(int,char**)`无论如何都被调用，但我不确定。

在程序中是这样的： `main(argc) { ... }`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T13:30:23.570

根据 C89 标准，这是不合法的。从第*2.1.2.2 节托管环境*：

```
程序启动时调用的函数名为 `main`。实施
没有声明这个函数的原型。它可以不带参数定义：

    int main(void) { /*...*/ }

或带有两个参数（此处称为 argc 和 argv ，尽管任何名称
可以使用，因为它们对于声明它们的函数是本地的）：

    int main(int argc, char *argv[]) { /*...*/ }

```

C99 标准在第*5.1.2.2.1 节程序启动*中声明相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:29:00.510

是的，它有效[^(†</sup>)](http://ideone.com/ZjjfO)，但它没用。

请记住，在 C 中，任何没有指定类型的变量都默认为`int`，因此这意味着函数扩展为：

```
int main(int argc) {
    ...
} 
```

这在 C89 中是合法的。然而，大多数时候，如果您想知道发送给程序的参数数量，您可能需要这些参数的内容，所以这几乎没有用。

但是，GCC（使用 编译时`-Wall`）给了我一个警告：

```
'main' 声明中只有一个参数。

```

这只是说这段代码几乎没用。

但是，从技术上讲，正如@hmjd 指出的那样，这是***非法***的，因为它是未定义的行为。但是，在我遇到的大多数 C 实现中，当您将额外参数传递给函数时，它们大部分都被忽略了。因此，除非您在一个系统上，如果您溢出发送到函数的变量数量很重要，您应该没问题。

# javascript - 如何在当前网页上创建和显示一个自行设计的窗口而不是弹出窗口？

> ID：11262612
> 
> 赞同：0
> 
> 时间：2012-06-29T13:22:10.963
> 
> 标签：javascript, asp.net, html, css

我想在当前网页上创建并显示一个自行设计的窗口，而不是像您在此页面上看到的弹出窗口 [打开链接并单击该页面上的第一个“演示”按钮。](http://www.ericmmartin.com/projects/simplemodal-demos/#)

当我尝试在接受我的链接的stackoverflow上放置这个问题的链接时，出现了相同类型的窗口。

例如 facebook 也使用这种类型的窗口来显示标记的图像。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:34:00.400

如果您使用的是 ASP.NET，那么[Ajax Control Toolkit](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)中提供了该功能。

也可以直接使用 HTML 和 JavaScript 来实现。

您只需在弹出窗口中创建一个包含所需内容的 div，并将其“Display”属性设置为“none”。

在用户交互（鼠标单击、按钮单击等）时，使用 JavaScript 将显示设置为“阻止”。（还有更多内容，但这就是它的要点。）

当然，您也可以从链接到的页面中获取执行此操作的组件。

* * *

对于另一种方法和更完整的解释，这里有一个完整的源代码示例： [http ://www.c-sharpcorner.com/uploadfile/rahul4_saxena/modal-popup-window-in-Asp-Net/](http://www.c-sharpcorner.com/uploadfile/rahul4_saxena/modal-popup-window-in-Asp-Net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:55:58.797

如果您正在寻找弹出 div 框的确切代码，那么就是这里。在浏览器的中心显示 div 框更难，并且需要更多的 javascript 来计算中心。

注意'return false;' 在按钮的 OnClientClick 事件中。这会阻止按钮执行回发并重新加载整个页面。

```
<head runat="server">
        <script type="text/javascript" language="javascript">
            function togglePopUp(div_id) {
                var el = document.getElementById(div_id);
                if (el.style.display == 'block') { el.style.display = 'none'; }
                else { el.style.display = 'block'; }
            }
        </script>
    </head>
    <body>
        <form id="form1" runat="server">
            <div>
            <asp:Button ID="btnPopUp" OnClientClick="togglePopUp('popUpDiv'); return false;"
                 text="Pop Up a div boxt" runat="server" />
            </div>

            <div id="popUpDiv" 
            style="
                display:none;
                position:absolute;
                top:100px;
                left:100px;
                background-color:Gray;
                z-index: 10002;">
             My popup box
             </div>
        </form>
    </body>
    </html> 
```

# jakarta-ee - 为什么选择 tomcat 而不是 Java EE 兼容的应用程序服务器？

> ID：11262617
> 
> 赞同：39
> 
> 时间：2012-06-29T13:22:25.517
> 
> 标签：jakarta-ee, tomcat

Java EE 应用服务器提供了 tomcat 的所有功能，那么为什么要使用 tomcat（而不是 glassfish，例如它是官方的）？

尤其是当需要 JPA、JAX-RS、JSF 等 Java EE 功能时，因此必须将更多库与应用程序打包在一起，而兼容 EE 的应用程序服务器会开箱即用地提供它？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-06-30T17:29:02.973

我们脑海中的问题以及我们创建[TomEE](http://tomee.apache.org)的全部原因是，人们为什么要选择？

### 整个“Tomcat 或 JavaEE”的东西已经很累了。

10 年后它仍然出现，人们互相争论哪个更好以及为什么。

这是简短形式的数学：

*   在 Java EE 6 中，我们 (JCP) 创建了 Web Profile 以正式承认需要具有一组重点技术的更小的运行时。

太好了，我们已经完成了一半，但人们仍在争论“Tomcat*还是*JavaEE”。解决方案很明确，Tomcat 需要通过 Java EE 认证。Web Profile 的创建*正是为了实现这一点*。

*   2011 年，我们 (Apache) 开始开展认证 Apache Tomcat 的工作。获得认证并在 JavaOne 2011 上宣布为 Apache TomEE。最终版本于 4 月宣布。

太棒了，现在我们在那里。

### 新现状

*   有一个轻量级的 JavaEE 版本
*   Tomcat有JavaEE认证版本

这一切都发生在过去的两年里。事情变了。

如果你想要**Tomcat 和 JavaEE**，你可以拥有它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-30T15:09:47.633

人们很少使用普通的Tomcat。他们**总是**添加大量额外的东西，比如 web 框架、一些 orm、一些 DI 框架等。

您可以为此使用 Spring，但最终结果将是庞大、臃肿的，并且您将被迫进行大量 XML 编程。

现代 Java EE 6 实现非常轻量级（TomEE 和 Resin 仅 25mb）并包含您需要的一切（Web、持久性、DI）。所谓的 Web Profile 不包含任何您很少需要的东西。现代 Java EE 6 服务器在一两秒内启动，这与裸 Tomcat 处于同一级别，但它们实际上提供了您每天所需的工具。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-29T13:43:03.950

大多数 Java EE 应用程序服务器都很庞大，带有许多不需要的特性，并且开发/测试周期非常慢（只需查看 java rebel 生产力报告）。如果你真的需要 Java EE 的一些特性，那么你应该使用它，但大多数情况下你可以拥有相同的基本特性（本质上是 servlet 容器，你可以将大部分 Java EE 技术放在一个 tomcat 之上，例如轻量级ejb 容器等）与 tomcat 或任何其他轻量级 servlet 容器。

还要记住，您可以在应用程序服务器之外使用 JPA、JSF、JAX-RS。

**TL;DR：** Java EE 应用程序服务器*显然很*慢，不要即时重新加载类并强制执行**非常**烦人的代码/部署/测试周期（考虑从 20 秒到 8 分钟的任何时间来测试 Java 代码中的一些更改）。大多数人只需要基本功能（本质上是 servlet 容器）。

这是一份关于 2011 年重新部署时间的报告：http: [//zeroturnaround.com/java-ee-productivity-report-2011/#redeploy_times](http://zeroturnaround.com/java-ee-productivity-report-2011/#redeploy_times)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-29T16:31:45.570

正如@Miguel Ping 上面所解释的，应用程序服务器包含开发人员不需要的功能。
例如，许多开发人员不需要消息传递代码，因此他们不需要 JMS jar。
其他开发人员可能不需要集群，所以他们不需要集群代码，等等。
由于当今大多数 UI 都面向 Web，必须由应用服务器提供的 Servlet 容器变得越来越重要，因此许多开发人员决定只使用 Servlet 容器（即 tomcat）。
在这种情况下，许多开发人员使用 Spring 框架来替代他们使用普通 Java EE 所拥有的功能（或与 Java EE 集成 - Spring 也可以在应用程序服务器之上运行）。
[弹簧芯](http://www.springsource.org/spring-framework/)是轻件，主要提供一个 Depdency Injection/Inversion-Of-Control 容器（替换 Java EE 中的 EJB 容器）。
您可以从 Spring 框架中添加其他模块来为您的应用程序提供更多功能。而在许多应用程序服务器（EJB 3.0 及更低版本的应用程序服务器）中，应用程序服务器正在加载整个堆栈，这也会影响应用程序服务器的启动时间（并且这从个人经验来看，这对开发人员来说非常烦人）。

话虽如此，EJB 3.1 现在包含配置文件，例如 - Web 配置文件，它从 Java EE 规范加载了较少数量的部分。此外，Jboss 在[JBoss AS 7](http://www.jboss.org/as7)中引入了一种并行部署机制，可以分析应用程序内部的依赖关系，并执行独立组件的并行部署。
例如，在[oVirt](http://www.ovirt.org)开源项目中，我们将启动时间从一个简单的虚拟化环境部署的 1 多分钟缩短到 3 秒左右。
我不知道其他 EJB 3.1 应用程序服务器中是否存在这种机制，但是，如前所述，您可以很容易地定义配置文件或使用已经存在的配置文件，例如[web 配置文件（EJB lite）](http://java.sun.com/developer/technicalArticles/JavaEE/JavaEE6Overview_Part3.html)以减少启动时间

。过去 - 人们使用 tomcat 主要是为了减少启动时间和减少加载的模块数量。
Spring 提供了 Java EE 开发的模块化替代方案，可以与 tomcat 一起使用。
. 在 EJB 3.1 的今天，Java EE 也采用了模块化，还有 JBoss AS 7 等应用服务器，由于在部署过程中进行了各种优化，可以将启动时间缩短到几秒钟。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-30T03:11:33.527

Tomcat 是一个编写良好的轻量级 servlet 容器，它可以完成大量 JVM Web 应用程序所需的一切。作为直接与浏览器对话的 Web 服务器，它在生产环境中运行良好。对很多人来说，Java EE 的内容太多了，远远超出了构建稳定有用的应用程序所需的内容。这种类型的人寻找具有更少而不是更多的工具，并且重视稳定编写良好的代码高于功能。软件选择的世界是一个市场，而 Tomcat 很好地服务于该市场的一部分。就像在任何市场中一样，您需要查看替代品并选择满足您需求的产品。Tomcat 只是众多替代方案之一。

[在这篇论文http://www.people.hbs.edu/cbaldwin/DR2/LaMantia-Cai-MacCormack-Rusnak%20WICSA2008.pdf](http://www.people.hbs.edu/cbaldwin/DR2/LaMantia-Cai-MacCormack-Rusnak%20WICSA2008.pdf)中有一个 关于设计结构矩阵的有趣观点。他们将它与一个不知名的竞争对手进行比较，发现它设计得很好。如果您有兴趣分析自己的代码，我知道的唯一 DSM 实现是否是 IntelliJ 企业版，但他们确实为您提供了几周的免费试用期。

就个人而言，我相信简单性是支持软件的优点，而 servlet 容器是支持软件，而不是应用程序的一部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-30T18:27:18.693

在大多数情况下，有关应用程序服务器选择的决定（Tomcat 与 JBoss 等 AS）将根据小型 IT 部门的管理/开发团队的经验和知识做出，而 IMO 是政治问题而不是技术问题。而且，最多部署在tomcat上的项目，往往都是web应用，集成概念少，复杂度低。对于此类项目，通常会使用轻量级容器和框架（Spring、Struts）。但是，如果项目变得越来越复杂和更加分散，那么可伸缩性、“监控”、高可用性（如 JBoss 的@HASingleton）等属性就会出现到位。然后为您的普通 tomcat 配备 3rd 方框架以获取 AS 的所有功能可能会非常痛苦

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-23T15:14:10.607

They think they're choosing to be lightweight but at the end of the day their applications will be far heavier weight than they would be using Java EE web profile. If they opt for spring, their deployments are likely to be very large with slower build and server start-up times. Developer productivity declines ... If you want your app to be as simple and lightweight as it can be, opt for a Java EE server that supports web profile.

# c++ - C++ 调用程序中的所有 update() 函数

> ID：11262618
> 
> 赞同：0
> 
> 时间：2012-06-29T13:22:26.097
> 
> 标签：c++, methods

我知道这是可能的，但我对 C++ 的缺乏经验限制了我。我想要做的是有一些系统，我可以`update()`向某些类添加方法，并让程序中的所有更新方法在每一帧都被调用。

Unity3D 用户可能对此很熟悉。`Update()`但是，当未确定的类中有未确定数量的方法时，程序如何知道调用每个方法。

我想这是一个在整个程序中动态调用函数的系统。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T13:23:49.843

没有魔杖可以为您做到这一点。您需要手动维护您创建的具有此`Update`方法的所有对象的列表，并在需要时迭代列表，依次调用每个对象的方法。

此外，您必须先满足编译器的要求，然后它才会允许您执行此操作。这意味着如果列表实际上是一个标准容器，例如`std::vector`，它需要是一个指向某个基类的容器，该基类由它内部的*所有*实例共享（这是标准方法）。有一些方法可以让你绕过这个限制，但在诉诸此类之前，你应该*非常清楚自己在做什么。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T13:49:33.780

您正在寻找的内容与观察者模式非常相似。您需要注册您的对象，以便在发生某些操作时调用它们的“通知”（或更新）方法。该动作可以是计时器或每个循环，这取决于您。

[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)将让您对这种设计模式有一个很好的了解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T16:19:02.840

我把它放在这里是为了证明概念。如果你继承自`Updateable`: 你可以`UpdateModule::Update(delta_time);`从你的主循环调用来更新任何构造的类。

它使用循环链表来跟踪要更新的项目，从而避免了动态内存分配的需要。UpdateModule 使用了一个技巧来确保即使是静态创建的对象也能正常工作：

```
class Updatable
{
    friend class UpdateModule;
public:
    virtual void Update(float delta_time) = 0;
protected:
    Updatable();
    virtual ~Updatable();
private:
    Updatable* m_next;
    Updatable* m_prev;
};

class UpdateModule
{
    friend class Updatable;
public:
    static void Update(float delta_time)
    {
        Updatable* head = *GetHead();
        Updatable* current = head;
        if (current)
        {
            do
            {
                current->Update(delta_time);
                current = current->m_next;
            } while( current != head);
        }
    }
private:

    static void AddUpdater(Updatable* updatable)
    {
        Updatable** s_head = GetHead();
        if (!*s_head)
        {
            updatable->m_next = updatable;
            updatable->m_prev = updatable;
        }
        else
        {
            (*s_head)->m_prev->m_next = updatable;
            updatable->m_prev = (*s_head)->m_prev;
            (*s_head)->m_prev = updatable;
            updatable->m_next = (*s_head);
        }
        *s_head = updatable;    
    }

    static void RemoveUpdater(Updatable* updatable)
    {
        Updatable** s_head = GetHead();
        *s_head = updatable->m_next;
        if (*s_head != updatable)
        {
            updatable->m_prev->m_next = updatable->m_next;
            updatable->m_next->m_prev = updatable->m_prev;
        }
        else
        {
            *s_head = NULL;
        }
        updatable->m_next = NULL;
        updatable->m_prev = NULL;
    }
private:
    static Updatable** GetHead()
    {
        static Updatable* head = NULL;
        return &head;
    }
};

Updatable::Updatable() : m_next(NULL), m_prev(NULL)
{
    UpdateModule::AddUpdater(this);
}

Updatable::~Updatable()
{
    UpdateModule::RemoveUpdater(this);
} 
```

示例用法：

```
class SomeClass : private Updatable
{
public:
    virtual void Update(float)
    {
        printf("update for SomeClass was called\n");
    }
};

class AnotherClass : private Updatable
{
public:
    virtual void Update(float)
    {
        printf("update for AnotherClass was called\n");
    }
};

int main()
{
    SomeClass a, b;
    AnotherClass c, d;
    UpdateModule::Update(0);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T13:30:57.000

我能想到的解决这个问题的唯一解决方案是使用类似`AspectC++`. 当你想做这样的事情时，面向方面的编程非常有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T13:57:44.800

从抽象类派生具有此 Update 方法的所有类，然后将指针放入您希望在某种向量中调用此方法的所有变量。

这是一个基本的例子：

```
class Updatable
{
public:
    virtual void update() = 0;
};

class SomeClass : public Updatable
{
public:
    virtual void update()
    {
        printf("update for SomeClass was called\n");
    }
};

class AnotherClass : public Updatable
{
public:
    virtual void update()
    {
        printf("update for AnotherClass was called\n");
    }
};

int main()
{
    Updatable* v[10];
    int n = 0;
    SomeClass a, b;
    AnotherClass c, d;
    v[n++] = &a;
    v[n++] = &b;
    v[n++] = &c;
    v[n++] = &d;

    for (int i = 0; i < n; i++)
        v[i]->update();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T18:48:00.890

使用 CRTP（Curiously Recurring Template Pattern）的一种有趣方式：

```
template <class T> struct updatable
{
    static std::set<updatable*> objects;

    updatable()
    {
        objects.insert(this);
    }

    ~updatable()
    {
        objects.erase(this);
    }

    void update_all()
    {
        for (auto& o : objects)
            static_cast<T* const>(o)->update();
    }
};

template <class T>
std::set<updatable<T>*> updatable<T>::objects = {};

struct Some_object : updatable<Some_object>
{
    void update()
    {
        // logic here.
    }
}; 
```

现在您可以使用 .update() 方法更新任何一个对象。但是您也可以通过调用从父级继承的 .update_all() 方法来更新某种类型的所有对象。注意：我还没有测试过这段代码的错误，但它的要点就在那里。

# math - 基本代数：这个方程需要帮助

> ID：11262624
> 
> 赞同：0
> 
> 时间：2012-06-29T13:22:52.277
> 
> 标签：math, algebra

所以事实证明我毕竟需要高中代数......而且我很愚蠢；我忘记了如何做基本代数。

我有这个等式：

```
p = nc + s(n-1) 
```

因此，例如：

```
c = (p - s(n-1)) / n 
```

如何求解方程以求解 s？即，s = ??

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T13:30:44.283

当然下次你可以问 wolfram-alpha

[(n*c) + s * (n-1) =p : 求解 s](http://www.wolframalpha.com/input/?i=%28n*c%29%20%2b%20s%20*%20%28n-1%29%20=p%20:%20solve%20for%20s)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:24:25.490

```
s = (p - nc) / (n - 1) 
```

详细地说：

```
 p = nc + s(n - 1)
=>  p - nc = s(n - 1)
=>  (p - nc) / (n - 1) = s 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T13:27:07.983

好问题！

原来的：

```
p = nc + s( n- 1) 
```

两边减去 nc：

```
p - nc = s(n - 1) 
```

然后将两边除以 (n-1)

```
(p - nc) / (n - 1) = s 
```

# emgucv - EmguCV 2.4 的人脸识别返回 NULL

> ID：11262625
> 
> 赞同：1
> 
> 时间：2012-06-29T13:23:01.043
> 
> 标签：emgucv, face-recognition

我使用 EmguCV 2.2 版的人脸识别类，一切正常。我最近刚刚升级到 2.4 版本。

我首先创建一个识别器类。

```
_recognizer = new EigenObjectRecognizer(_trainingImages.ToArray(), _nameList.ToArray(), ref _terminationCriteria); 
```

现在我想得到我的照片的结果

```
EigenObjectRecognizer.RecognitionResult fN = _recognizer.Recognize(face); 
```

但 RecognitionResult 始终为空。

编辑：它使用 5000 的 eigenDistanceThreshold 工作。

# oracle - oracle DB 约束是通过触发器实现的吗？

> ID：11262626
> 
> 赞同：0
> 
> 时间：2012-06-29T13:23:14.363
> 
> 标签：oracle, triggers, constraints

这里有一个简单的问题：我想知道 oracle 数据库中的约束是否像触发器一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:55:45.007

Oracle 中的约束处于比触发器低得多的核心级别。它们是在 C 或 C++ 引擎中实现的，当然不是在 PL/SQL 中。此外，它们还具有包含在数据库字典中的额外好处，提供有关数据预期的元数据。

一般来说，如果您尝试验证数据，最好使用约束。触发器有它们的用途，但它们经常被过度使用以达到“约束”的目的。

# android - Android 数据库连接和游标哦，我的

> ID：11262627
> 
> 赞同：3
> 
> 时间：2012-06-29T13:23:22.850
> 
> 标签：android, database, sqlite, cursor

我已经阅读了大量关于如何在使用 android 时创建和使用数据库连接的博客和教程。尽管我有很多工作示例，但不同的实现会导致不同的问题。

例如，我使用一个数据源类`Datasource`和一个数据库助手类，`DBManagement`.

**数据源**

```
public class DataSource {
    // Database fields
    private SQLiteDatabase database;
    private DBManagement dbHelper;

    public SMSDataSource(Context context) {
        dbHelper = new DBManagement(context);
    }

    public void open() throws SQLException {
        if(database == null){
             database = dbHelper.getWritableDatabase();
        }
    }

public Cursor exampleCursor(long constraint){
    Cursor cur = database.query(DBManagement.TABLE_NAME,
            new String[] {DBManagement.Column}, "constraint="+constraint, null, null, null, null);
    return cur;
}
    //.. other methods down here which do rawQuery, QueryBuilder, etc.. 
```

**数据库管理**

```
public class DBManagement extends SQLiteOpenHelper{

    // .. table definitions and columns etc ..//

    public DBManagement(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);      
    } 
```

在我的活动中的 onCreate 方法中，我将调用`datasource.open()`并打开 SQL 连接。之后我会做：

```
DataSource datasource = new DataSource();

Cursor cursor = datasource.exampleCursor(1);
startManagingCursor(cursor); 
```

如果我导航到一个新活动，我会收到以下错误：

```
 06-27 21:59:14.812: E/Database(13396): close() was never explicitly called on database '/data/data/com.example.package/databases/db.db' 
```

如果我添加`datasource.close();`到 onCreate 的末尾，那么简单的光标适配器都不起作用，或者如果在上下文菜单上执行操作，我会收到数据库未打开的错误。

处理上述问题的最佳方法是什么？

所以我做了以下事情，但我仍然遇到数据库问题：

```
@Override
public void onBackPressed() {
    // do something on back.
    //Log.i(getClass().toString(), "onBackPressed");

    datasource.close();

    finish();
    return;
}

@Override
protected void onResume(){
    super.onResume();
    onCreate(null);
}

@Override
protected void onRestart(){
    datasource = new DataSource(this);
    datasource.open();

    filters = datasource.getFilterCursor();
    startManagingCursor(filters);

    super.onRestart();
}

@Override
protected void onPause(){
    //Log.i(getClass().toString(), "onPause");
    ((CursorAdapter) adapter).getCursor().close();
    datasource.close();
    super.onPause();
}   
@Override
protected void onStop(){
    //Log.i(getClass().toString(), "onStop");
    datasource.close();
    super.onStop();
} 
```

我的**Datasource.java**类具有以下内容：

```
public Datasource(Context context){
     dbHelper = new DBManagement(context);
}

public void open() throws SQLException {
    if( database == null ){
           database = dbHelper.getWritableDatabase();
    }
}

public void close(){
    if(dbHelper != null){
         dbHelper.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T04:03:30.163

这实际上非常简单：

*   完成后显式关闭所有*游标*（使用`finally`）等。
*   不要使用`startManagingCursor()`
*   使您的数据库包装器/帮助器/管理器/任何类成为单例
*   不要显式调用`close()`数据库*助手*。当您的进程终止时，我将自动关闭。

另外：频繁打开和关闭绝对是一个坏主意，因为它会带来很多开销。

使用装载机也是一种选择。您绝对不需要使用内容提供程序来使用加载程序，但是它并不像它可能的那么简单。使用内容提供程序涉及 IPC，如果您不打算将数据导出到其他应用程序，这通常是矫枉过正的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T13:24:25.893

如果您在其中打开数据库，`onCreate`则可以在`onDestroy`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T13:36:53.860

您的问题的“理想”解决方案是转换到`Content Providers`and `Loaders`，并使用`v4`兼容性库来实现向后兼容性。这样做可以解决这个问题，因为您不再关心打开和关闭数据库连接，并且您可以在后台而不是在 UI 线程上执行数据库操作。

它还可以为您的应用程序提供未来证明，因为`startManagingCursor`它已被弃用。它现在仍然可以使用，即使在 4.1 中，但它会在某个时候被删除。

我在[这里](https://stackoverflow.com/a/10798663/614231)有另一篇关于使用内容提供者的帖子，其中涉及使用提供的其他原因，并提供了教程的链接。

我认为，对于 Google 而言，最大的失败`ContentProvider`在于它没有提供一种简单直观的方式来构建它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T13:31:19.877

我会坚持在您完成从数据库中获取数据后立即关闭数据库连接。最好的办法是在里面再次打开和`onResume()`关闭`onPause()`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-21T17:10:34.720

我记得有一个类似的问题，每当我在新的 Activity 中调用 getWritableDatabase() 而没有关闭旧的引用时，我只是重新创建了错误。当我关闭 SQLiteDatabase 对象`database` *和*SQLiteOpenHelper 对象时，`dbHelper`我不再收到这些错误。

```
public void close() {
    // Check against the database being created but not opened, close writable db
    if(database != null) {
        database.close();
        database = null;
    }

    // In case someone calls DataSource.close() more than once...
    if(dbHelper != null) {
        dbHelper.close();
        dbHelper = null;
    }
} 
```

希望有帮助！

# java - java中如何增加Netbeans平台应用程序的堆内存？

> ID：11262629
> 
> 赞同：5
> 
> 时间：2012-06-29T13:23:27.707
> 
> 标签：java, netbeans, platform, heap-memory

我正在 java swing 中的 netbeans plpatform 中制作桌面应用程序。当我在 netbeans 7.0 中运行我的应用程序时，它运行良好。之后我制作了我的应用程序的安装程序。然后我安装了我的应用程序安装程序，它工作得非常慢。当我的应用程序运行时netbeans IDE 它消耗最小 10mb 和最大 510mb。但是在它安装后它只得到最小 24mb 和最大 64mb 的默认安装程序在 netbeans IDE 中或者当我使用 netbeans IDE 安装我的应用程序时它得到最小 24mb 和最大 64mb。那么如何增加我的应用程序的堆内存或我的应用程序安装程序的堆内存？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T23:42:42.353

如果您转到您的应用程序安装目录转到 etc 文件夹然后打开 applicationName.conf 文件并更改最小和最大堆大小然后保存并重新启动您的应用程序，这应该会更改您的应用程序堆大小，请检查您的应用程序 IDE 日志中的更改， 谢谢

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T13:27:45.527

转到项目的属性（右键单击 Netbeans 界面的左侧），并将 VM 选项字段更改为：

64 是最小 VM 大小（以 MB 为单位），2048 是最大 VM 大小（以 MB 为单位）。

![在此处输入图像描述](../Images/8a968ca664041c468452f2a7bc17d984.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-27T01:22:14.647

看起来从 6.0+ 版本开始，netbeans 自动定义 -Xmx 值是可用内存的 1/3，如官方 wiki 中所述：

[http://wiki.netbeans.org/FaqSettingHeapSize](http://wiki.netbeans.org/FaqSettingHeapSize)

状态栏应显示已用内存。您是否发现它的锁定程度远低于您的预期，例如最大值的 33%？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-11T03:27:15.400

我遇到了和你一样的问题。更改该配置文件的内存设置：`C:\Program Files\NetBeans 8.0\harness\etc\app.conf`

# sql - 如何从联接左侧获取联接表中不存在的记录？

> ID：11262636
> 
> 赞同：0
> 
> 时间：2012-06-29T13:24:06.957
> 
> 标签：sql, left-join

我有表 a 连接表 b，我只想要表 a 中**不存在**于表 b 中的记录。

我的部分查询是：

```
SELECT DISTINCT u.id, u.lastname
FROM user u
LEFT JOIN context ct
ON ct.userid = u.id 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:24:34.270

```
select distinct u.id,
    u.lastname
from user u
left join context ct on ct.userid = u.id
where ct.userid is null 
```

# jquery - 使用 Overthrow 插件使用鼠标滚轮进行水平滚动

> ID：11262644
> 
> 赞同：0
> 
> 时间：2012-06-29T13:24:59.983
> 
> 标签：jquery, html

我正在使用[推翻](http://filamentgroup.github.com/Overthrow/)插件在桌面和移动平台上进行水平滚动。

[这](http://pastie.org/4171373)是我的代码，它可以正常工作，但我想允许**通过鼠标滚轮滚动它。**

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:52:08.493

我发现鼠标滚轮插件可以解决这个问题。

[这是解决方案。](http://css-tricks.com/snippets/jquery/horz-scroll-with-mouse-wheel/)

# java - MyBatis Sybase 配置 url 属性语法

> ID：11262649
> 
> 赞同：0
> 
> 时间：2012-06-29T13:25:18.770
> 
> 标签：java, jdbc, sybase, mybatis, jconnect

我无法弄清楚我的属性的正确语法。有什么建议吗？这 4 行在我的 config.properties

```
 url=jdbc:sybase:Tds:localhost:2638?servicename=db
 driver=com.sybase.jdbc4.jdbc.SybDataSource
 username=myUserName
 password=myPass 
```

我尝试了几种方法......没有运气？

我的 mybats-config.xml 如下所示。

```
 <environment id="development">
        <transactionManager type="JDBC" />
        <dataSource type="POOLED">  
            <property name="driver" value="${driver}" />
            <property name="url" value="${url}" />
            <property name="username" value="${username}" />
            <property name="password" value="${password}" />
        </dataSource>
    </environment> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:30:31.043

您需要在上面的 xml 块`<environments>`周围有一个元素。`<environment>`你有一个，只是没有显示它？如果没有，请添加它，它应该可以工作（假设您的其余配置属性设置正确）。

```
<environments>
  <environment id="development">
    <transactionManager type="JDBC" />
    <dataSource type="POOLED">  
      <property name="driver" value="${driver}" />
      <property name="url" value="${url}" />
      <property name="username" value="${username}" />
      <property name="password" value="${password}" />
    </dataSource>
  </environment>
</environments> 
```

此外，如果有帮助，MyBatis XML 配置中 xml 元素的顺序很重要，它必须是：

*   特性
*   设置
*   类型别名
*   类型处理程序
*   对象工厂
*   插件
*   环境
    *   环境
        *   事务管理器
        *   数据源
*   数据库IdProvider
*   映射器

因此，请确保您也遵循该模式。

# r - 如何处理每次都有多个点的时间序列（在 R 中）？

> ID：11262650
> 
> 赞同：2
> 
> 时间：2012-06-29T13:25:20.400
> 
> 标签：r, statistics, time-series

我有一个时间序列，每个时间步都有一些不同的观察结果（测量相同的现象，但来自不同的位置），看起来它可能有一个弱循环模式，但我不确定。我将如何在 R 中实现 acf 函数以更好地了解正在发生的事情？我可以按原样在整个时间序列上调用它吗？我是否需要按位置分隔时间序列，以便每个日期只有一个观察值？我需要先拟合模型并查看残差吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:45:05.437

这取决于您要如何存储它们。[我通常以xts](http://cran.r-project.org/package=xts)和[zoo](http://cran.r-project.org/package=zoo)为生死，他们（强烈）更喜欢不同的和（严格）单调递增的索引值——也就是 xts 的时间戳。

因此，在一种情况下，相对于数据大小，我的冲突“相对较少”，并且最小增量“仍然很小”到中值增量，我通过使时间戳唯一来捏造。事实上，我经常这样做，并且经常与作者邮寄 xts 最终`make.time.unique()`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T16:23:35.473

我找到了一个巧妙的技巧来解决这个问题。我按位置划分数据，然后将它们连接成一个长时间序列。不过，问题在于我不想考虑从一个系列结束到下一个系列开始的滞后，所以我在系列之间插入了一堆 NA 并使用了参数 na.action= na.pass 并将 lag.max 设置为我插入的 NA 的数量。在这种情况下，我的数据跨越一年，每两周观察一次（26 个时间增量长），所以我在每个系列之间插入了 26 个 NA。

```
new.time.series<- c(Loc1Series, rep(NA,26), Loc2Series, rep(NA,26), Loc3Series,     rep(NA,26))
acf(new.time.series, na.action=na.pass, lag.max=30) 
```

这使我能够利用我的所有数据来找到一种模式，而如果我一次尝试这个分析一个位置，由于数据稀疏，我会发现意义不大。

# jquery - jquery显示给定div之间的所有div

> ID：11262651
> 
> 赞同：1
> 
> 时间：2012-06-29T13:25:20.340
> 
> 标签：jquery, html

首先这是我的标记：

```
<div class="first"></div>
<div class="second"></div>
<div class="second"></div>
<div class="second"></div>
<div class="second"></div>
<div class="second"></div>
<div class="second"></div>
<div class="first"></div>
<div class="second"></div>
<div class="second"></div>
<div class="second"></div>
<div class="second"></div>
<div class="second"></div>
<div class="second"></div> 
```

我想要做的是，当我**首先**单击一个带有类的 div 时，我想显示所有下一个具有**第二**个类的 div，直到下**一个**类。

有没有办法用 jQuery 做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T13:31:14.660

不，你不必。

```
$(".first").nextUntil(".first").show() 
```

以下是有关它的详细信息：

[http://api.jquery.com/nextUntil/](http://api.jquery.com/nextUntil/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:32:07.953

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".first").click(function () {
            $(this).nextUntil(".first").toggle();
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T13:32:46.973

小提琴示例：http: [//jsfiddle.net/nVP7P/5/](http://jsfiddle.net/nVP7P/5/)

```
$(".first").click( function () {
     $(".second").css("display","none");
    var next = $(this).next();
   while (next.hasClass("second"))
 {
    next.css("display", "inline");
    next = next.next();
 }    
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:29:50.220

看一下这个：

```
$( '.first' ).click(function(){
    var foundFirst = false;
    var next = $(this);
    while( !foundFirst ){
        next = next.next();
        if(next.hasClass( 'first' )){
            foundFirst = true;
        } else {
            next.show();
        }
    }
}); 
```

# ios - 如何在 UIView 上设置平滑边框颜色？

> ID：11262659
> 
> 赞同：1
> 
> 时间：2012-06-29T13:25:50.197
> 
> 标签：ios, uiview, core-graphics, quartz-graphics

我在视图控制器上添加了一个 UIView。最初我在 UIView 上设置了边框颜色，现在它看起来很平滑。但是通过手势识别器缩放该视图时，边框颜色会被像素化。

下面的初始代码

```
- (id)initWithImage:(UIImage*)image delegate:(id)delegat{
    if ( (self = [super initWithImage:image]) ) {
        self.layer.masksToBounds = YES;
        self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, self.frame.size.width+1, self.frame.size.height+1);
        self.contentMode = UIViewContentModeCenter;
        ratio = image.size.height / image.size.width;
        itemType = 2;
        self.userInteractionEnabled =TRUE;
        self.delegate = delegat;
        self.layer.borderColor = [UIColor redColor].CGColor;
        self.layer.borderWidth = 4;
        scaleFactor = 1.0;
        rotateAngle = 0.0;
        fontSize = 22;
        self.contentScaleFactor = 1.0;
        if(image != nil){
            frameWidth = image.size.width;
            frameHeight = image.size.height;
        }else{
            frameWidth = self.frame.size.width;
            frameHeight = self.frame.size.height;    
        }

        [self addGestureRecognizers];
    }    
    return self;
} 
```

![在此处输入图像描述](../Images/9a3e8c283623f8e4491d7220c132f0fb.png)

这是旋转代码的代码

```
- (void)rotatePiece:(UIRotationGestureRecognizer *)gestureRecognizer{

    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {
        // To undo the action : store information
        [[UIAppDelegate viewController] storeAction:CHUndoActionTypeRotate item:self];

        [gestureRecognizer view].transform = CGAffineTransformRotate([[gestureRecognizer view] transform], [gestureRecognizer rotation]);
        [gestureRecognizer setRotation:0];
    }

} 
```

这是我在旋转视图时得到的

![在此处输入图像描述](../Images/95927760c3bcdf761350e3ec154da9c5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:43:35.853

这是一个看似很常见的问题。您想要的是对边界进行抗锯齿处理。 [这是一个](https://stackoverflow.com/questions/1315772/how-to-do-antialiasing-on-a-rotated-view)有解决方案的帖子，[这是另一个](https://stackoverflow.com/questions/1136110/any-quick-and-dirty-anti-aliasing-techniques-for-a-rotated-uiimageview)。

基本上，您可以使用 UIImageView 并在图像周围添加一个像素透明边框，以便实际边框消除锯齿。

# javascript - 如何在javascript中声明和初始化全局数组

> ID：11262666
> 
> 赞同：2
> 
> 时间：2012-06-29T13:26:37.920
> 
> 标签：javascript, arrays, global

在我的 html 代码中，我需要一个在整个应用程序中使用的全局数组。如何在javascript中创建和初始化全局数组变量..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T13:47:16.540

You can do it several ways :
In the global scope :

```
var arr = []; 
```

Binding the array to the global namespace:

```
window.arr = []; 
```

or, for running the code in other environments, where the global object is not necessarily called `window`:

```
(function(global){
    global.arr = [];
})(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:31:20.360

在浏览器中，您可以使用 window 对象将对象附加到全局范围：

```
window.myArray = ["foo", "bar"]; 
```

在 Node.js 中，您可以使用`global`对象访问全局范围。

# mac-app-store - Mac App Store 上的非沙盒应用会怎样？

> ID：11262671
> 
> 赞同：0
> 
> 时间：2012-06-29T13:26:42.307
> 
> 标签：mac-app-store, sandbox

Mac App Store 沙盒的最后期限终于在 6 月 1 日到来。这对于现有的非沙盒应用程序究竟意味着什么？我看到 Mac App Store 中的现有应用程序*没有沙盒*化，但几天前才更新，显然是在截止日期之后。苹果的一封开发者邮件说：

> 如果您在 Mac App Store 上有一个未沙盒化的现有应用程序，您仍可以在 6 月 1 日之后提交错误修复更新。

Apple 有没有说明什么是错误修复版本？这是否也有最后期限，还是会无限期地接受错误修复更新？苹果最终会从商店中撤出非沙盒应用程序，还是可以无限期地生存下去？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:32:54.973

回答我自己的问题：

*   开发人员电子邮件中的引述已经指出，将接受非沙盒应用程序的错误修复。不知道什么是错误修复更新，我想这只是新应用程序版本之外的任何东西。

*   [沙盒资源中心](https://developer.apple.com/devcenter/mac/app-sandbox/)列出了官方常见问题解答。常见问题解答指出，即使不采用沙盒，6 月 1 日之前在商店中的应用程序也将保留在商店中。

# objective-c - ARC 转换问题，它可以识别扩展吗？

> ID：11262675
> 
> 赞同：0
> 
> 时间：2012-06-29T13:26:57.093
> 
> 标签：objective-c, ios, xcode, extension-methods, automatic-ref-counting

我正在将我的 Objective-C Cocos2d 项目转换为 ARC，并且在尝试转换扩展其他一些类的第三方类时发现了一些问题。

以下是我收到的 ARC 错误消息：

![在此处输入图像描述](../Images/e7055ae92250c3d44122e9424eecf314.png)

问题中显示的静态方法在 SneakyExtension.h 文件中定义，该文件以这种方式扩展了一些其他类（SneakyButton、SneakyButtonSkinnedBase、SneakyJoystick..）（我只共享接口，因为代码由 Steffen Itterheim 复制）：

```
@interface SneakyButtonSkinnedBase (Extension)
+(id) skinnedButton;
@end

@interface SneakyJoystick (Extension)
+(id) joystickWithRect:(CGRect)rect;
@end

@interface SneakyJoystickSkinnedBase (Extension)
+(id) skinnedJoystick;
@end 
```

您可以在此处找到源代码：[查看第 8 章中的 ShootEmUp03 示例](http://www.apress.com/downloadable/download/sample/sample_id/640/)。

我唯一的猜测是ARC 不知何故不支持**Extension**关键字，但我觉得我错了，因为我在谷歌上没有找到太多关于这个的东西，也没有在 Stackoverflow 或“过渡到 ARC”Apple 的 iTunes U教程。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:53:29.883

导入所需文件。:-)

关于它为什么起作用，我最好的猜测是编译器现在比以前更注重正确的声明。为什么会这样，我不知道。但最终，运行时会获得对什么有效的最终投票，只要确实有一个`joystickWithRect`方法链接到您的应用程序，即使它**应该**是早期版本中的编译器错误，您在功能上也是可以的——根据一些标准。

你现在遇到的并不影响程序的行为；这只是编译器试图确保你告诉它正确的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:05:40.977

在 ARC 下编译时，`joystickWithRect`需要公开声明并导入该方法以供您使用。编译器需要访问方法声明，因为它可能已经定义了一个属性`NS_RETURNS_RETAINED`，例如更改编译器需要生成的保留/释放调用。

以前，由开发人员来处理保留和释放，因此编译器允许您调用选择器，即使它们之前没有被声明过。

# .net - LinqToExcel 有时会导致 IErrorInfo.GetDescription failed with E_FAIL(0x80004005)

> ID：11262676
> 
> 赞同：1
> 
> 时间：2012-06-29T13:26:57.150
> 
> 标签：.net, excel, linq-to-excel

有时在运行下面的代码时会导致`IErrorInfo.GetDescription failed with E_FAIL(0x80004005)`调用`excelFile.WorksheetNoHeader(0)`.

它似乎不依赖于 excel 文件，一个文件可以读取一次，下一次不读取。

任何想法可能是什么原因？

```
 Public Overrides Function GetImportDataAsDataTable() As DataTable
        Dim dataTable = New DataTable
        dataTable.BeginLoadData()
        Try
            Dim excelFile = New ExcelQueryFactory(FileFullPath)
            For Each importDataRow In excelFile.WorksheetNoHeader(0)
                If dataTable.Columns.Count = 0 Then
                    For i = 1 To importDataRow.Count
                        dataTable.Columns.Add(New DataColumn())
                    Next
                End If
                Dim dataRow = dataTable.NewRow
                dataRow.ItemArray = importDataRow.ToArray
                dataTable.Rows.Add(dataRow)
            Next
        Finally
            dataTable.EndLoadData()
        End Try
        Return dataTable
    End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:12:38.897

这是一个 OleDb 错误。

看起来使用了保留的 sql 字。查看这篇文章了解更多信息：[http ://forums.asp.net/t/1225443.aspx/1](http://forums.asp.net/t/1225443.aspx/1)

# javascript - 将甘特图添加为 JIRA 报告时遇到 css 问题

> ID：11262687
> 
> 赞同：1
> 
> 时间：2012-06-29T13:27:43.163
> 
> 标签：javascript, css, extjs, jira, gantt-chart

我将这个库用于甘特图：

[http://www.bryntum.com/examples/gantt-latest/examples/basic/basic.html](http://www.bryntum.com/examples/gantt-latest/examples/basic/basic.html)

当我将其实现**为 JIRA 报告**时，JIRA 中的左侧栏移到中间。

![ ](../Images/a1d219a0c8502a1d15a614a1263ba4f1.png)*图片仅供参考。*

我研究并发现问题出在甘特库 CSS 文件中：

[http://cdn.sencha.io/ext-4.1.0-gpl/resources/css/ext-all.css](http://cdn.sencha.io/ext-4.1.0-gpl/resources/css/ext-all.css)

不要试图理解它，美化代码后有10000行。但调试后我找到了解决方案。删除此代码时，JIRA 左栏向左移动，一切看起来都很好：

```
.x-border-box,.x-border-box * {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -webkit-box-sizing: border-box
} 
```

除了：

![在此处输入图像描述](../Images/16bbb829e730a2608adcdc79b44837b1.png)*图片仅供参考。*

页脚移动到甘特图的顶部。所以有第二个选项更好，但我仍然更喜欢把我的页脚放在下面。

我尝试更改 CSS 值，但无法产生任何其他结果，除了屏幕截图中显示的这两个。

**总而言之，我如何让页脚向下和 JIRA 栏向左。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:10:31.547

问题是 Ext JS CSS 在页面上是全局的，与其他元素冲突。这篇文章可能会有所帮助，并有助于将 CSS 的“范围”设置为页面上的任何元素——比如你的甘特图容器 div 等。

[如何使用 scopeResetCSS 属性设置重置 CSS 的范围，以便将其应用于 Ext 组件？](https://stackoverflow.com/questions/6435833/how-to-scope-the-reset-css-so-that-is-applied-to-ext-components-using-scopereset)

利用：

```
Ext = {buildSettings: {scopeResetCSS: true}}; 
```

连同 ext-all-scoped.css。应该这样做。

# javascript - 将自身值传递给函数

> ID：11262690
> 
> 赞同：0
> 
> 时间：2012-06-29T13:28:00.777
> 
> 标签：javascript, jquery

我有以下内容，您可以看到我正在尝试`this`通过该函数在 JavaScript\jQuery 中是否有可能，如果可以的话，如何？似乎找不到任何我认为我的术语错误的东西。

```
function pageLoad(sender, args) {
    if (args.get_isPartialLoad()) {
        jQuery(".ShowPleaseWait").click(function () {
            processingReplacer("Please Wait...", this);
        });
        jQuery(".ShowProcessing").click(function () {
            processingReplacer("Processing...", this);
        });
    }
}

function processingReplacer(message, this) { 
        if (Page_IsValid) {
            jQuery(this).hide();
            jQuery(this).after("<img id='" + jQuery(this).attr('id') + "' class='" + jQuery(this).attr('class') + "' src='/content/images/processing.gif' /> " + message);
            alert("woohoo"); 
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T13:29:47.957

不能`this`用作函数参数的名称。将其更改为其他内容：

```
function processingReplacer(message, target) { 
    if (Page_IsValid) {
        jQuery(target).hide();
        jQuery(target).after("<img id='" + jQuery(target).attr('id') + "' class='" +
           jQuery(target).attr('class') + "' src='/content/images/processing.gif' /> " +
           message);
        alert("woohoo"); 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T13:31:12.790

你可以这样做：

```
processingReplacer.call(this, "Please Wait..."); 
```

...

```
function processingReplacer(message) { 
        if (Page_IsValid) {
            jQuery(this).hide();
            jQuery(this).after("<img id='" + jQuery(this).attr('id') + "' class='" + jQuery(this).attr('class') + "' src='/content/images/processing.gif' /> " + message);
            alert("woohoo"); 
        }
} 
```

使用[call](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call)您可以设置`this`. 然而，乔恩的答案可能更具可读性。

# ruby-on-rails - Heroku 上 /initializers 文件夹中的常量

> ID：11262696
> 
> 赞同：1
> 
> 时间：2012-06-29T13:28:46.593
> 
> 标签：ruby-on-rails, heroku, constants

我在目录`/config/initializers/constants_data.rb`下一行：

```
ADM = User.find_by_name('admin').id 
```

这在本地主机上工作，但是当我将应用程序部署到 Heroku 时，我得到**Application Error Error H10 (App crashed)**。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:50:59.123

您的管理员用户可能不存在。在这种情况下，您应该始终提供回退。

```
ADM = User.find_or_create_by_name('admin').id 
```

代替

```
ADM = User.find_by_name('admin').id 
```

# git - Cruisecontrol.Net git 没有看到修改

> ID：11262697
> 
> 赞同：0
> 
> 时间：2012-06-29T13:28:46.907
> 
> 标签：git, cruisecontrol.net

我刚刚在 Apache+Mono 下设置了 Cruisecontrol.Net 服务器，并将源控制指向我的 GitHub 项目。我提交并推送了它，但 CC 没有检测到更改，即使它在输出中报告了这些更改：

```
[MyProject:INFO] [Git] Calling git log origin/test --date-order --name-status -c "--after=Fri, 29 Jun 2012 12:19:25 GMT" "--before=Fri, 29 Jun 2012 13:12:24 GMT" --pretty=format:"Commit:%H%nTime:%ci%nAuthor:%an%nE-Mail:%ae%nMessage:%s%n%n%b%nChanges:"
[MyProject:DEBUG] Starting process [git] in working directory [/home/ccnet/MyProject/build] with arguments [log origin/test --date-order --name-status -c "--after=Fri, 29 Jun 2012 12:19:25 GMT" "--before=Fri, 29 Jun 2012 13:12:24 GMT" --pretty=format:"Commit:%H%nTime:%ci%nAuthor:%an%nE-Mail:%ae%nMessage:%s%n%n%b%nChanges:"]
[MyProject:DEBUG] Not setting PriorityClass on [/home/ccnet/MyProject/build/git] to default Normal
[511:DEBUG] [MyProject git] process exited event received
[509:DEBUG] [MyProject git] Commit:3d386b1277003c83c63e7e13bde2803bfe952d40
[509:DEBUG] [MyProject git] Time:2012-06-29 14:00:34 +0100
[510:DEBUG] [MyProject git] standard-error stream closed -- null received in event
[509:DEBUG] [MyProject git] Author:Robin Elvin
[509:DEBUG] [MyProject git] E-Mail:rob@-------.com
[509:DEBUG] [MyProject git] Message:Merge branch 'master' into test
[509:DEBUG] [MyProject git]
[509:DEBUG] [MyProject git]
[509:DEBUG] [MyProject git] Changes:
[509:DEBUG] [MyProject git]
[509:DEBUG] [MyProject git] Commit:fc134027f059a1dada0295bbd2d04cbea6eeb57b
[509:DEBUG] [MyProject git] Time:2012-06-29 14:00:24 +0100
[509:DEBUG] [MyProject git] Author:Robin Elvin
[509:DEBUG] [MyProject git] E-Mail:rob@-------.com
[509:DEBUG] [MyProject git] Message:Set complete status on sync and fix tests (issue #2 #3)
[509:DEBUG] [MyProject git]
[509:DEBUG] [MyProject git]
[509:DEBUG] [MyProject git] Changes:
[509:DEBUG] [MyProject git] M       File1
[509:DEBUG] [MyProject git] M       File2
[509:DEBUG] [MyProject git] M       File3
[507:DEBUG] [MyProject git] standard-output stream closed -- null received in event
[MyProject:INFO] No modifications detected. 
```

这是我的配置中的相关块：

```
<sourcecontrol type="git">
<repository>git@github.com:xxxx/MyProject.git</repository>
<branch>test</branch>
<workingDirectory>/home/ccnet/MyProject/build</workingDirectory>
<autoGetSource>true</autoGetSource>
</sourcecontrol>
<triggers>
<intervalTrigger name="continuous" seconds="30" buildCondition="IfModificationExists"/>
</triggers> 
```

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T10:31:03.310

git 源代码控制提供程序中存在一个错误，导致 ccnet 无法检测 git 合并提交。

只需升级到最新的 ccnet 版本 (1.8.x) 即可解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:32:59.293

好吧，我做了另一个提交并推送，这触发了构建。

不知道为什么以前没有。会继续检查以防它是一个错误。

# javascript - TinyMce 完整页面，无需单击按钮

> ID：11262699
> 
> 赞同：0
> 
> 时间：2012-06-29T13:28:50.517
> 
> 标签：javascript, tinymce

如何直接在整页上加载 TinyMCE？

有一个整页按钮，但我不想点击整页...

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:59:49.840

这可以使用[设置配置参数](http://www.tinymce.com/wiki.php/Configuration%3asetup)/onInit-handler 轻松完成，并从那里触发整页命令

```
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.onInit.add(function(ed, evt) {
          // do the full page action here
      });
   }
}); 
```

# javascript - 从科学文章中解析作者信息的正则表达式

> ID：11262700
> 
> 赞同：0
> 
> 时间：2012-06-29T13:28:54.143
> 
> 标签：javascript, regex

我想创建一个可以自动解析一些文本的工具。我正在使用 javascript 和正则表达式。

例如，我有这样的文字：

```
Aa Aaa 1, Bb Bbb 2  and Cc Ccc 1
1 Institut xx Xx, Some University, Xxxx 14, US-10000 NewYork, USA; E-Mails: aa.aaa@edu.com; cc.ccc@edu.com
2 Institut zz Zzz, Some University2, Zzzz 20, US-10000 NewYork, USA; E-Mail: bb.bbb@edu.com 
```

我想解析这些信息

对于每个作者（名字和姓氏）：

*   隶属关系
*   电子邮件地址

所以在我的例子中，我想要：

```
Aa Aaa - Institut xx Xx, Some University, Xxxx 14, US-10000 NewYork, USA - aa.aaa@edu.com

Bb Bbb - Institut zz Zzz, Some University2, Zzzz 20, US-10000 NewYork, USA - bb.bbb@edu.com

Cc Ccc - Institut xx Xx, Some University, Xxxx 14, US-10000 NewYork, USA - cc.ccc@edu.com 
```

它看起来很复杂，所以如果我认为我应该将我的问题分成几个更简单的问题，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:46:44.013

*这是可行的任务。*

*我不会用 JavaScript 编写代码，但我希望 SO 中的某个人会为您克隆以下 Perl 代码：*

```
$_ = "\n\n" . $input;
1 while s/^(.*?\n?)\n{1,2}\s*([^\d]+)\s+(\d+)\s*?(?:\s*and|[,\n\s])(.*?)(?<=\n)(\3\s+)([^\n]*)(\n.*$|$)/$1$2 - $6\n\n$4$5$6$7/gs;
s/\n\n.*$//s;
print $_; 
```

*[在此处](http://ideone.com/10c72)查看并测试 Perl 代码。*

# silverlight - 在堆栈面板中对齐文本垂直和水平中心？

> ID：11262702
> 
> 赞同：0
> 
> 时间：2012-06-29T13:28:56.597
> 
> 标签：silverlight, windows-phone-7, windows-phone-7.1

我正在尝试在 Listview 中的堆栈面板中垂直和水平居中对齐文本块，但我只能使文本垂直居中而不是水平居中。另外，文本没有被换行。这是我尝试过的代码：

```
 <ListBox Name="lstTiles" Margin="12,0,-12,0" Grid.Row="1" SelectionChanged="lstTiles_SelectionChanged">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <toolkit:WrapPanel/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Background="{StaticResource PhoneAccentBrush}" Width="145" Height="80" Margin="8,8,0,0" Orientation="Vertical" >
                    <TextBlock Text="{Binding Name}" Tag="{Binding ID}" Style="{StaticResource PhoneTextNormalStyle}" FontSize="15" TextWrapping="Wrap" TextAlignment="Center" />
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

如何实现文本垂直、水平和文本换行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:48:01.757

It looks like since you have the orientation of the StackPanel set to Horizontal, you're putting textblocks next to each other rather than on top of each other. Since the StackPanel elements take the size of their children, you would be able to visualize this as a horizontal, side-by-side, listing of textblocks. Since each textblock takes the size of the text that is in it, you are going to see blocks that are of varying widths, so centering horizontally is going to have no effect.

You could use margins (a pain) to accomplish equal widths. I don't recommend this.

You could also put grids of a set width in the stack panel, and put the textblocks on the grid. You may be able to set the width of the textblocks to get the right effect, but I can't test this at the moment, and I don't remember if it will cause the text to stretch or not.

For text wrapping, I assume you're talking about within the textblock, and that's easy - just set the textblock's TextWrapping property to Wrap.

Try setting the HorizontalContentAlignment and VerticalContentAlignment properties on the listboxitem. I don't have my dev computer now, so I can't experiment, but here is a post that might help you: [Silverlight 3: ListBox DataTemplate HorizontalAlignment](https://stackoverflow.com/questions/746190/silverlight-3-listbox-datatemplate-horizontalalignment). Look at both of the first two answers, and see which one might be most helpful in your situation, substituting center, of course, in place of left, top, or stretch.

# git - 跟踪在 GitHub 上创建的新远程分支

> ID：11262703
> 
> 赞同：205
> 
> 时间：2012-06-29T13:28:57.797
> 
> 标签：git, github, git-branch

我已经有一个本地主分支跟踪 github 项目的远程主分支。现在，我的一个合作者在同一个项目中创建了一个新分支，我想相应地执行以下操作：

1.  在本地创建一个新分支
2.  使这个新分支跟踪新创建的远程分支。

我应该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2012-06-29T13:33:55.530

```
git fetch
git branch --track branch-name origin/branch-name 
```

第一个命令确保您在本地存储库中有远程分支。第二个命令创建跟踪远程分支的本地分支。它假定您的远程名称是`origin`并且分支名称是`branch-name`。

`--track`远程分支默认启用选项，您可以省略它。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-03-20T23:07:10.723

如果您没有现有的本地分支，它真的很简单：

```
git fetch
git checkout <remote-branch-name> 
```

例如，如果您 fetch 并且有一个名为 的新远程跟踪分支`origin/feature/Main_Page`，只需执行以下操作：

```
git checkout feature/Main_Page 
```

这将创建一个与远程分支同名的本地分支，跟踪该远程分支。如果您有多个具有相同分支名称的遥控器，则可以使用不那么含糊的：

```
git checkout -t <remote>/<remote-branch-name> 
```

如果您已经创建了本地分支并且不想删除它，请参阅[如何使现有的 Git 分支跟踪远程分支？](https://stackoverflow.com/questions/520650/make-an-existing-git-branch-track-a-remote-branch).

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-07-12T06:17:31.380

首先，您必须获取远程存储库：

```
git fetch remoteName 
```

您可以创建新分支并将其设置为跟踪您想要的远程分支：

```
git checkout -b newLocalBranch remoteName/remoteBranch 
```

您还可以使用“git branch --track”而不是“git checkout -b”作为指定的最大值。

```
git branch --track newLocalBranch remoteName/remoteBranch 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-29T13:34:56.260

当分支不是远程分支时，您可以将本地分支直接推送到远程。

```
git checkout master
git push origin master 
```

或者当你有一个 dev 分支时

```
git checkout dev
git push origin dev 
```

或者当远程分支存在时

```
git branch dev -t origin/dev 
```

还有其他一些推送远程分支的可能性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-26T22:34:41.733

步骤如下：

1.  首先获取克隆命令到这一步后创建的所有分支->“git fetch”
2.  现在，检查什么是远程分支命令到这一步 -> “git branch -r”
3.  检查您在日志历史记录中的位置 此步骤的命令 -> "git log --oneline --all --graph"
4.  分配一个新分支来跟踪远程分支命令到这一步 -> “git branch branch_name origin/remote_branch_name”
5.  之后，使用第 3 步命令或“git branch”检查您的日志历史记录

# ruby-on-rails - 是否可以将助手导入 Resque 工作人员？

> ID：11262708
> 
> 赞同：0
> 
> 时间：2012-06-29T13:29:15.643
> 
> 标签：ruby-on-rails, resque, helpers

我的工作人员正在发送电子邮件。并且电子邮件需要帮助。

出于某种原因，如果 Resque 处理了这些助手，则无法在电子邮件中访问这些助手。

如何导入助手？

我会通过部分本身、控制器或 Resque 工作人员来完成吗？

**更新**

这仅在运行测试时发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T23:33:28.747

Upps，阅读更新太晚了。我不知道这是否对您的测试有帮助。

* * *

您可以`to_prepare`在 application.rb 中调用 to 以访问 ActionMailer 中的助手。确保包含它并在其上调用 helper 方法，以便能够从邮件程序和邮件程序的视图模板中调用帮助程序。

```
config.to_prepare do
  ActionMailer::Base.class_eval do 
    include ApplicationHelper
    helper ApplicationHelper 
  end 
end 
```

# ruby - Rails获取没有日期的当前时间

> ID：11262709
> 
> 赞同：15
> 
> 时间：2012-06-29T13:29:24.020
> 
> 标签：ruby, ruby-on-rails-3, datetime, date, time

我知道关于 Rails 的日期和时间有很多问题，但我似乎无法解决我遇到的问题。

我可能只是对此很愚蠢..无论如何，我的问题是我想在*没有*附加日期的情况下获得当前时间。

例如，当我使用以下内容时，我得到：

```
Time.now => 2012-06-29 09:23:04 -0400 
```

或者

```
Time.current => Fri, 29 Jun 2012 09:23:23 EDT -04:00 
```

我想在没有日期的情况下获得当前时间。即只是

```
09:23:04 -0400 
```

或者

```
09:23:23 EDT -04:00 
```

如果有问题已经解决了这个问题，我会很感激被指出来。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-29T13:30:56.360

用于[`strftime`](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)以您想要的格式获取您想要的时间片段。

```
puts Time.now.strftime("%I:%M:%S %z") # "09:33:00 -0400"

puts Time.now.strftime("%I:%M:%S %Z %z") # "09:33:00 EDT -0400" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-01T18:23:02.500

```
Time.now.strftime("%H:%M:%S") # "18:33:00" 
```

*不要使用`%I`没有`%p`（不知道上午/下午）*

# html - 锚内联块的垂直中心对齐

> ID：11262721
> 
> 赞同：0
> 
> 时间：2012-06-29T13:30:08.680
> 
> 标签：html, css

如何垂直对齐使用内联块的锚？ [http://jsfiddle.net/XdfCp/11/](http://jsfiddle.net/XdfCp/11/)

如果我更改为阻止，则对齐效果很好，但锚元素没有覆盖所有 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:18:43.553

删除`height: 100%`链接上的。它将在其容器中垂直居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:41:18.523

使用`padding-top:50%`例如：

```
#ListaEventosPorMes a{
display: inline-block;
width: 100%;
height: 100%;
color: White;
text-decoration: none;
background-color: #722827;
vertical-align:middle;
**padding-top:50%;**
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:46:49.197

尝试

```
.dia a{vertical-align: middle} 
```

这应该工作..希望这会有所帮助

# xsd - 通过限制模式推导无效的粒子

> ID：11262724
> 
> 赞同：1
> 
> 时间：2012-06-29T13:30:16.387
> 
> 标签：xsd, schema

如何删除 xsd 中的以下警告。mymain.xsd 指的是 mysecond.xsd

我的 main.xsd

```
<?xml version="1.0" encoding="UTF-8"?><xsd:schema elementFormDefault="qualified" targetNamespace="http://abc.com" version="2.0" xmlns:tyu="http://abc.com" xmlns:my="def.com"  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:import namespace="def.com" schemaLocation="mysecond.xsd"/>
  <xsd:complexType name="myType">
    <xsd:complexContent>
     <xsd:restriction base="my:myType">
      <xsd:sequence>
        <xsd:element minOccurs="0" name="rty" type="tyu:myagainType"/>
      </xsd:sequence>
    </xsd:restriction>
   </xsd:complexContent>
  </xsd:complexType>
  <xsd:complexType name="myagainType">
    <xsd:complexContent>
     <xsd:restriction base="my:myagainType">
      <xsd:sequence>
        <xsd:element minOccurs="1" name="uid">
        <xsd:simpleType>
           <xsd:restriction base="xsd:string">
          <xsd:maxLength value="1"/>
           </xsd:restriction>
        </xsd:simpleType>
        </xsd:element>
      </xsd:sequence>
    </xsd:restriction>
   </xsd:complexContent>
  </xsd:complexType>  
</xsd:schema> 
```

我的第二个.xsd

```
<?xml version="1.0" encoding="UTF-8"?><xsd:schema elementFormDefault="qualified" targetNamespace="def.com" version="2.0" xmlns:my="def.com" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:complexType name="myagainType">
    <xsd:sequence>
      <xsd:element minOccurs="0" name="klo" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="myType">
    <xsd:sequence>
      <xsd:element minOccurs="0" name="rty" type="my:myagainType"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:schema> 
```

警告

```
Warning 1   Invalid particle derivation by restriction - 'Derived element 'http://abc.com:rty' is not a valid restriction of base element 'def.com:rty' according to Elt:Elt -- NameAndTypeOK.'.    D:\files\mymain.xsd 3   4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:44:47.443

简短的回答，你不能。首先，您的`rty`in`mySecond.xsd`是本地定义和限定的，并且位于与 in 中的“等效”不同的命名空间`rty`中`main.xsd`，后者也在不同的命名空间中本地定义和限定。

如果您仔细阅读 XML Schema 规范，第 2 部分，您将获得适用于有效限制的每条规则的解释。在您的情况下，您要么使用相同的命名元素（从“取消限定” rty 元素开始），要么使用替换组的成员。

你显然不想要相同的元素，因为它会给你相同的内容模型——你只有一个元素。人们使用限制的原因之一是减少内容模型（从列表中删除元素）和/或调整粒子的 min/maxOccurs。

`rty`由于您是在本地定义的，因此您无法使用替换组来做事；替换组的头必须在全局范围内定义。

为了满足您的需求，您必须完全重写您的 XSD。更好地描述您想要实现的目标以及您对 XSD 创作施加的任何限制（例如，使用替换组、重新定义或使用 XSD 的上下文）可能有助于其他人为您提供更好的答案.

# asp.net-mvc - 导出到excel文件时出现JqGrid DataBinding异常

> ID：11262725
> 
> 赞同：0
> 
> 时间：2012-06-29T13:30:22.447
> 
> 标签：asp.net-mvc, jqgrid, jqgrid-asp.net, entity-framework-4.3

我正在尝试将 JqGrid 导出到 excel，因此我按照[此说明](http://www.trirand.net/aspnetmvc/grid/exportexcel)进行操作，如下所示使用它。

```
 var grid = new JqGridModelParticipiant().JqGridParticipiant;

        var query = db.ReservationSet.Select(r => new
        {
            r.Id,
            Name = r.Doctor.Name,
            Identity = r.Doctor.Identity,
            Title = r.Doctor.Title.Name,
            Total = r.TotalTL,
            Organization = r.Organization.Name
        });

        grid.ExportToExcel(query,"file.xls"); 
```

我在“grid.ExportToExcel(query,"file.xls");”的行上得到以下异常

> 不支持将数据直接绑定到存储查询（DbSet、DbQuery、DbSqlQuery）。而是使用数据填充 DbSet，例如通过在 DbSet 上调用 Load，然后绑定到本地数据。对于 WPF 绑定到 DbSet.Local。对于 WinForms 绑定到 DbSet.Local.ToBindingList()。

据我了解，它希望在 DbSet.Local 成员上有 ObservableCollection。但我正在处理预计查询，所以我不能这样做。

这个问题的解决方案是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:19:57.033

在[答案](https://stackoverflow.com/a/9349688/315935)中，我发布[了演示](http://www.ok-soft-gmbh.com/jqGrid/jqGridExportToExcel.zip)如何实现导出到 Excel（真正的 *.XLSX 文件，而不是重命名为 *.XLS 的 HTML 片段，[此处](http://www.trirand.net/aspnetmvc/grid/exportexcel)使用）。

jqSuite中用于导出到Excel的方法（[演示](http://www.trirand.net/aspnetmvc/grid/exportexcel)）生成HTML片段，如

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Type: application/excel; charset=utf-8
Server: Microsoft-IIS/7.0
X-AspNetMvc-Version: 2.0
content-disposition: attachment; filename=grid.xls
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET
Date: Fri, 29 Jun 2012 14:24:54 GMT
Connection: close

<table cellspacing="0" rules="all" border="1" id="_exportGrid" style="border-collapse:collapse;">
    <tr>
        <td>OrderID</td><td>CustomerID</td><td>OrderDate</td><td>Freight</td><td>ShipName</td>
    </tr><tr>
        <td>10248</td><td>VINET</td><td>1996/07/04</td><td>32.3800</td><td>Vins et alcools Chevalier</td>
    </tr><tr>
        <td>10249</td><td>TOMSP</td><td>1996/07/05</td><td>11.6100</td><td>Toms Spezialitäten</td>
    </tr><tr>
        <td>10250</td><td>HANAR</td><td>1996/07/08</td><td>65.8300</td><td>Hanari Carnes</td>
    </tr><tr>
    ...
</table> 
```

而不是创建真正的 Excel 文件。这种方式非常不安全，因为在打开时将始终使用“标准”类型的数据。例如，如果您要导出数据，例如

```
<td>10249</td><td>TOMSP</td><td>1996/07/05</td><td>11.02.12</td><td>Toms SpezialitÃ¤ten</td> 
```

如果默认使用德语语言环境，则文本“11.02.12”将自动转换为日期 11.02.2012：

![在此处输入图像描述](../Images/e928bd1a053e747674a41f0cc62385ec.png)

来自的名称“Toms Spezialitäten”将错误地显示为“Toms SpezialitÃ¤ten”。

在大表的情况下尤其危险，其中网格中间的一小部分数据将被错误转换。在一个项目中，我显示了有关 Software 的信息，并且某些软件版本将错误地转换为 Date 类型。

由于这样和其他密切的问题，我使用[Open XML SDK 2.5](http://www.microsoft.com/en-us/download/details.aspx?id=30425)或[Open XML SDK 2.0](http://www.microsoft.com/download/en/details.aspx?id=5124)在服务器上创建了真正的 Excel 文件。顺便说一句，没有上述问题。因此，我建议您遵循[我的旧答案](https://stackoverflow.com/a/9349688/315935)中描述的方法。

# nhibernate - NHibernate QueryOver 仅适用于超类

> ID：11262729
> 
> 赞同：4
> 
> 时间：2012-06-29T13:30:36.210
> 
> 标签：nhibernate, polymorphism, queryover, superclass

我现在正在与 NHibernate 和 Table-per-class 继承作斗争。

我有一个基类（我们称之为 Base）和 10 个派生类。有时我只想在没有子类的左外连接的情况下对基类进行查询。

```
var query = dao.CurrentSession.QueryOver<Base>()
   .JoinQueryOver(b => b.Property)
   .Where(p => p.FirstName == "Max")
   .Select(a => a.Id).Take(10); 
```

我得到的是 sql 查询中的很多“左外连接”，这些我并不真正需要，它也降低了查询的性能。

在这种情况下，是否有可能摆脱多态性？有什么方法可以更改继承模型并从不在层次结构中的其他类派生基类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:38:54.113

在您的基本映射文件中，设置以下内容：

```
polymorphism=”explicit” 
```

# xcode - Xcode 聚合目标依赖

> ID：11262732
> 
> 赞同：3
> 
> 时间：2012-06-29T13:30:54.910
> 
> 标签：xcode, build, dependencies

我有一个带有 3 个目标的 XCode 项目：

1.  应用程序
2.  构建我的资产的外部构建系统目标
3.  具有 1 和 2 作为依赖项的聚合目标。

我想要的功能是：

1.  构建应用程序只会构建应用程序
2.  构建外部构建系统只会构建资产
3.  构建聚合将**首先**构建外部构建系统，然后是应用程序

目前，聚合同时构建两者，如果应用程序在外部构建系统完成之前到达某个点，则会产生竞争条件。我不能将构建系统添加为应用程序的依赖项，因为这样构建应用程序就可以做到这两点。有没有办法在不复制我的应用程序目标的情况下完成此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T15:28:52.560

在类似安排的项目中，以下内容对我有用。

1.  在 Build Phases -> Target Dependencies 下，按照您希望它们编译的顺序排列目标。（外部构建系统然后是应用程序）。
2.  其次，在聚合项目的 Edit Scheme 窗口中，在 Build 下，取消选中 Parallelize Build。

此外，要让应用程序仅构建应用程序，您可能需要在应用程序项目的构建方案中取消选中 Find Implicit Dependencies。

# c# - 发送 URL 时未将对象引用设置为对象的实例

> ID：11262735
> 
> 赞同：0
> 
> 时间：2012-06-29T13:30:57.310
> 
> 标签：c#, asp.net

我的网络表单中有一个密码恢复控件。输入所有必要的详细信息后，将向用户的电子邮件帐户发送一封电子邮件。

这就像 - 如果用户忘记了他/她的密码，则向用户的电子邮件帐户发送密码更改链接而不是新密码。

但是，单击提交按钮后，“对象引用未设置为对象的实例”。出现错误。

```
Exception Details: System.NullReferenceException: Object reference not set to an instance of an object. And the error occurred on line 66\. 

Source Error: 

Line 64:         System.Web.UI.WebControls.Login Login1 =   (System.Web.UI.WebControls.Login)LoginView1.FindControl("Login1");   
Line 65:         MembershipUser pwRecover = Membership.GetUser(Login1.UserName);
**Line 66:         Guid userInfoId2 = (Guid)pwRecover.ProviderUserKey;** 
```

以下是消息正文中发送 url 的后台代码：

```
 protected void PasswordRecovery1_SendingMail(object sender, MailMessageEventArgs e)
{

    System.Web.UI.WebControls.Login Login1 = (System.Web.UI.WebControls.Login)LoginView1.FindControl("Login1");   
    MembershipUser pwRecover = Membership.GetUser(Login1.UserName);
    Guid userInfoId2 = (Guid)pwRecover.ProviderUserKey;

    //Create an url that will link to a UserProfile.aspx and
    //accept a query string that is the user's id

    //setup the base of the url
    string domainName = Request.Url.GetLeftPart(UriPartial.Authority) + Request.ApplicationPath;

    //setup the second half of the url
    string confirmationPage = "/UserProfile.aspx?ID=" + userInfoId2.ToString();

    //combine to make the final url
    string url = domainName + confirmationPage;

    // Replace <%VerifyUrl%> placeholder with url value
    e.Message.Body = e.Message.Body.Replace("<%ResetPassword%>", url);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:36:40.893

问题是 pwRecover 从未设置。即问题出在这里：

```
MembershipUser pwRecover = Membership.GetUser(Login1.UserName); 
```

Membership.GetUser 没有找到 Login1.UserName 的用户；

尝试在这一行设置一个断点以找出 Login1.UserName 的实际含义。然后在数据库中查找该用户名。

# sql - 使用 If 条件插入一个 Temp 表

> ID：11262737
> 
> 赞同：0
> 
> 时间：2012-06-29T13:31:06.593
> 
> 标签：sql, sql-server

> **可能重复：**
> [SQL IF 语句被忽略](https://stackoverflow.com/questions/11161065/sql-if-statement-is-being-ignored)
> [使用 IF/ELSE IF 语句的奇数错误](https://stackoverflow.com/questions/11254462/odd-error-using-if-else-if-statements)

我正在尝试插入一个诱惑表。但它抛出了一个错误。请帮忙

```
Declare @Live BIT = 'True'

Step 1:-  
If @Live = 'True'
    BEGIN 
        IF OBJECT_ID('tempdb..#tempTable') IS NOT NULL  
        DROP TABLE #tempTable
        SELECT TOP 1 INTO #tempTable FROM Table1

    END
    ELSE

        IF OBJECT_ID('tempdb..#tempTable') IS NOT NULL  
        DROP TABLE #tempTable
        SELECT TOP 5 INTO #tempTable FROM Table1

Step 2:-
IF OBJECT_ID('tempdb..#tempTable') IS NOT NULL  
DROP TABLE #tempTable
If @Live = 'True'
    BEGIN         
        SELECT TOP 1 INTO #tempTable FROM Table1            
    END
    ELSE
        SELECT TOP 5 INTO #tempTable FROM Table1 
```

在 Step1 & Step2 中，错误显示为

> “数据库中已经有一个名为 '#tempTable' 的对象。”

**健康）状况：**我必须将记录插入一个#tempTable

是否有其他替代方法可以实现此要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:49:53.577

我建议事先删除临时表，然后使用 a`INSERT INTO`而不是 a`SELECT INTO`

```
IF OBJECT_ID('tempdb..#tempTable') IS NOT NULL  
BEGIN
    DROP TABLE #tempTable
END

CREATE TABLE #tempTable
(
   --columns go here
)

If @Live = 'True'
BEGIN         
    INSERT INTO #tempTable
    SELECT TOP 1 * FROM Table1            
END
ELSE
    INSERT INTO #tempTable
    SELECT TOP 5 * FROM Table1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:49:37.247

在运行查询之前运行此命令，因为已经有一个#tempTable

删除表#tempTable

并尝试此代码

IF OBJECT_ID('tempdb..#tempTable') 不为空删除表 #tempTable

create table #tempTable (a int) insert into #tempTable (a) select 1

从 #tempTable 中选择 *

# sql-server - 在 MS Access 或 SQL Server 中查找 2 个表之间的差异

> ID：11262738
> 
> 赞同：-1
> 
> 时间：2012-06-29T13:31:07.363
> 
> 标签：sql-server, excel, ms-access

我有 2 个 Excel 文件作为两个表导入到 MS Access 中。这两个表相同，但在不同日期导入。

现在，我怎样才能知道以后更新了哪些行和哪些字段？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:49:16.970

查找插入的记录很容易

```
select * from B where not exists (select 1 from A where A.pk=B.pk) 
```

查找已删除的记录同样简单

```
select * from A where not exists (select 1 from B where A.pk=B.pk) 
```

查找更新的记录很痛苦。以下严格查询假设您有可为空的列，并且它应该适用于所有情况。

```
select B.*
  from B
  inner join A on B.pk=A.pk
 where A.col1<>B.col1 or (IsNull(A.col1) and not IsNull(B.col1)) or (not IsNull(A.col1) and  IsNull(B.col1))
    or A.col2<>B.col2 or (IsNull(A.col2) and not IsNull(B.col2)) or (not IsNull(A.col2) and  IsNull(B.col2))
    or A.col3<>B.col3 or (IsNull(A.col3) and not IsNull(B.col3)) or (not IsNull(A.col3) and  IsNull(B.col3))
    etc... 
```

如果列被定义为 NOT NULL 则查询要简单得多，只需删除所有 NULL 测试。

如果列可以为空，但您可以确定一个永远不会出现在数据中的值，则使用简单的比较，例如：

```
Nz(A.col1,neverAppearingValue)<>Nz(B.col1,neverAppearingValue) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:43:00.410

我相信这应该像运行这样的查询一样简单：

```
SELECT * 
FROM Table1
    JOIN Table2
         ON Table1.ID = Table2.ID AND Table1.Date != Table2.Date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:01:39.713

一种方法是取消透视两个表，因此您会得到一个带有 , , 的新表。但请注意，您必须考虑类型。

例如，以下获取字段的差异：

```
with oldt as (select id, col, val
              from <old table> t
              unpivot (val for col in (<column list>)) unpvt
             ),
     newt as (select id, col, val
              from <new table> t
              unpivot (val for col in (<column list>)) unpvit
             )
select *
from oldt full outer join newt on oldt.id = newt.id
where oldt.id is null or newt.id is null 
```

连接的替代方法相当麻烦。此版本显示是否添加、删除了列以及更改了哪些列（如果有）：

```
select *
from (select coalesce(oldt.id, newt.id) as id,
             (case when oldt.id is null and newt.id is not null then 'ADDED'
                   when oldt.id is not null and newt.id is null then 'DELETED'
                   else 'SAME'
              end) as stat,
             (case when oldt.col1 <> newt.col1 or oldt.col1 is null and newt.col1 is null
                   then 1 else 0 end) as diff_col1,
             (case when oldt.col2 <> newt.col2 or oldt.col2 is null and newt.col2 is null
                   then 1 else 0 end) as diff_col2,
             ...
      from <old table> oldt full outer join <new table> newt on oldt.id = newt.id
     ) c
where status in ('ADDED', 'DELETED') or
     (diff_col1 + diff_col2 + ... ) > 0 
```

它确实具有适用于任何数据类型的优势。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:53:26.387

```
(Select * from OldTable Except Select *from NewTable)
Union All
(Select * from NewTable Except Select *from OldTable) 
```

# navigation - 如何在 Windows8 应用程序中刷新页面？

> ID：11262741
> 
> 赞同：3
> 
> 时间：2012-06-29T13:31:16.257
> 
> 标签：navigation, windows-8

我想知道如何刷新 Windows8 应用程序中的页面。我使用基于 WinJS.Navigation 组件的单页导航。

我发现的唯一方法是在“refresh.html”页面上导航，该页面只需执行*WinJS.Navigation.back()*操作。我对这个解决方案不是很满意。

我徒劳地尝试了*window.location.reload()*。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:52:55.017

由于您使用的是 HTML5/JS，因此您可以像最初检索数据时那样重新加载数据。我假设这是一个 AJAX 调用或类似的调用。没有“刷新页面”命令或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:01:06.743

这是一种蛮力的方法。（我仍在寻找一种不需要特定页面名称的动态方式。）

```
WinJS.Navigation.navigate("your-page-name-here.html"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T15:05:27.423

WinJS.Navigation 实时知道你是谁`WinJS.Navigation.location`

`WinJS.Navigation.navigate("WinJS.Navigation.location");`

# php - 在 CJUIDialog 中使用 Ajax

> ID：11262744
> 
> 赞同：0
> 
> 时间：2012-06-29T13:31:22.720
> 
> 标签：php, yii

我有一个 CJUIDialog，我在其中使用 renderPartial 加载另一个表单的内容。在该表单中有一个 ajax 按钮，它可以加载另一个表单。该表单包含另一个 ajax 按钮，我需要在其中加载对话框本身内的前一个表单。我试过这样做。但它不起作用。在我的控制器中，我有两种方法可以打印出这样的两种表格。

```
public function actionNewRecipients(){
        $customer = new Customer;
        $address = new Address;
        $content = $this->renderPartial('_form_new',array('customer'=>$customer,'address'=>$address,'guest'=>true),true);

        echo $content;
}
public function actionAddRecipients()
{ $content = $this->renderPartial('_form_inner',array(),true);

    echo $content;} 
```

然后在一种形式中，我有 ajax 按钮，例如，

```
 echo CHtml::ajaxSubmitButton(Yii::t('New','New Recipient'),CHtml::normalizeUrl(array('customer/newRecipients')),array('success'=>'js: function(data) {
                    alert("new");
                    $("#dialog_gift").html(data);

                    $("#dialog_gift").dialog("option","title","Select Recipient");

                }')); 
```

在另一种形式中，我有 ajax 按钮，例如，

```
echo CHtml::ajaxSubmitButton(Yii::t('New','New Recipient'),CHtml::normalizeUrl(array('customer/addRecipients')),array('success'=>'js: function(data) {
                    alert("select");
                    $("#dialog_gift").html(data);

                    $("#dialog_gift").dialog("option","title","Select Recipient");
                    //$("customer-form_inner").attr("action","'.CHtml::normalizeUrl(array('customer/newRecipients')).'")

                }')); 
```

CJUIDialog 看起来像，

```
$this->beginWidget('zii.widgets.jui.CJuiDialog', array(
'id'=>'dialog_gift',
// additional javascript options for the dialog plugin
'options'=>array(
    'title'=>$title,
    'autoOpen'=>false,
    'modal'=>true,
    'scrolling'=>'no',
    'resizable'=>false,
    'scrollable'=>false,
    'closeOnEscape' => true,
    ),
));
echo '<div class="span-24">';
echo $content;
echo '</div>';

$this->endWidget('zii.widgets.jui.CJuiDialog'); 
```

最初将加载一个表单内容。

第一个过渡正确发生。但是在我替换了 html 内容之后，加载另一个视图的第二次转换不会发生。

请让我知道是否有人可以提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:25:46.637

尝试设置`renderPartial(string $view, array $data=NULL, boolean $return=false, boolean $processOutput=false)`-function 的第四个参数。通过设置`$processOutput`为 true，将包含并执行所有必要的脚本（包括启用 ajax-button-functionality 的脚本）。

# concurrency - 在 gearman 中使用并发任务时不会调用回调

> ID：11262746
> 
> 赞同：0
> 
> 时间：2012-06-29T13:31:30.510
> 
> 标签：concurrency, task, gearman

我确实使用 reverse_worker 作为工作人员检查了示例 reverse_client_cb。工作人员被调用和执行，但在客户端中没有调用单个回调（完成、失败等）。

下面是我写的一个示例工作人员和客户端，用于检查相同但相同的问题。是否需要在 gearman 或 worker 和客户端的执行方式中完成任何配置？

# 样品工人.cc

```
void* myfunc(gearman_job_st *job, void *data,size_t *size,gearman_return_t *ret)
{
    printf("\nmyfunc called\n");

    *ret=GEARMAN_SUCCESS;
    char *result=(char*)calloc(30,sizeof(char));
    strcpy(result,"work completed");
    *size=30;
    return result;
}

int main(int args,char* argv[])
{
   gearman_worker_st worker;

   gearman_worker_create(&worker);
   gearman_worker_add_server(&worker,"localhost",0);

   gearman_return_t ret =     gearman_worker_add_function(&worker,"sample",0,myfunc,NULL);

   while(1) gearman_worker_work(&worker);

   gearman_worker_free(&worker);
   return 0;
} 
```

# 示例客户端.cc

```
static gearman_return_t complete(gearman_task_st *task)
{
     printf("Completed: %s %.*s\n", gearman_task_job_handle(task),
     (int)gearman_task_data_size(task), (char *)gearman_task_data(task));
     return GEARMAN_SUCCESS;
}

static gearman_return_t fail(gearman_task_st *task)
{
    printf("Failed: %s\n", gearman_task_job_handle(task));
    return GEARMAN_SUCCESS;
}

 int main(int args,char* argv[])
{
        gearman_client_st client;
    gearman_return_t ret;

    gearman_client_create(&client);
    gearman_client_add_server(&client,"localhost",0);

    gearman_task_st task,*task2;
    gearman_client_add_task(&client,&task,NULL,"sample",NULL,argv[1],(size_t)strlen(argv[1]),&ret);

    gearman_client_set_complete_fn(&client, &complete);
    gearman_client_set_fail_fn(&client, &fail);

    gearman_client_run_tasks(&client);  

    gearman_client_free(&client);
    return 0;
  } 
```

# 用法

```
./sampleworker
./sampleclient Hello 
```

“myfunc called”被打印出来，客户端也在等待工作人员完成工作。但是没有从完整或失败的功能中打印出来

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:44:37.993

知道了。

我删除了以下已安装的库，现在我得到了所有回调。

> libgearman-client-async-perl -gearman 分布式作业系统的异步客户端
> 
> libgearman-client-perl - gearman 分布式作业系统的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T11:20:53.463

在我看来。您在函数调用顺序中犯了一些错误。

```
gearman_client_set_complete_fn(&client, &complete);
gearman_client_set_fail_fn(&client, &fail); 
```

// 该函数必须在 set_complete_fn 之后调用

```
gearman_client_add_task 
gearman_client_run_tasks(&client); 
```

# .net - 我们应该如何真正为 NHibernate 实体实现 Equals 和 GetHashCode

> ID：11262747
> 
> 赞同：10
> 
> 时间：2012-06-29T13:31:33.400
> 
> 标签：.net, nhibernate, equals, gethashcode

这个问题有很多问题和答案以及文章，但我认为似乎没有真正明确/正确的答案

对我来说，Ayende 拥有迄今为止我见过的最好的通用实现：http: [//ayende.com/blog/2500/generic-entity-equality](http://ayende.com/blog/2500/generic-entity-equality)

**....但它是从 2007 年开始的 ....**

这是实现这些方法的“最佳方式”，尤其是对于 NHibernate 3.2，它包含代理实现与早期版本的一些差异？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-21T00:45:09.253

# 是的！

你应该覆盖`Equals`and `GetHashCode`。但是，你**不**应该做*价值平等*（`Name == other.Name && Age == other.Age`），你应该做身份平等！

如果不这样做，您很可能会将实体的代理与真实实体进行比较，并且**调试起来会很痛苦**。例如：

```
public class Blog : EntityBase<Blog>
{
    public virtual string Name { get; set; }

    // This would be configured to lazy-load.
    public virtual IList<Post> Posts { get; protected set; }

    public Blog()
    {
        Posts = new List<Post>();
    }

    public virtual Post AddPost(string title, string body)
    {
        var post = new Post() { Title = title, Body = body, Blog = this };
        Posts.Add(post);
        return post;
    }
}

public class Post : EntityBase<Post>
{
    public virtual string Title { get; set; }
    public virtual string Body { get; set; }
    public virtual Blog Blog { get; set; }

    public virtual bool Remove()
    {
        return Blog.Posts.Remove(this);
    }
}

void Main(string[] args)
{
    var post = session.Load<Post>(postId);

    // If we didn't override Equals, the comparisons for
    // "Blog.Posts.Remove(this)" would all fail because of reference equality. 
    // We'd end up be comparing "this" typeof(Post) with a collection of
    // typeof(PostProxy)!
    post.Remove();

    // If we *didn't* override Equals and *just* did 
    // "post.Blog.Posts.Remove(post)", it'd work because we'd be comparing 
    // typeof(PostProxy) with a collection of typeof(PostProxy) (reference 
    // equality would pass!).
} 
```

这是一个示例基类，如果您`int`用作您的`Id`（也可以抽象为[任何身份类型](http://ayende.com/blog/2500/generic-entity-equality)）：

```
public abstract class EntityBase<T>
    where T : EntityBase<T>
{
    public virtual int Id { get; protected set; }

    protected bool IsTransient { get { return Id == 0; } }

    public override bool Equals(object obj)
    {
        return EntityEquals(obj as EntityBase<T>);
    }

    protected bool EntityEquals(EntityBase<T> other)
    {
        if (other == null)
        {
            return false;
        }
        // One entity is transient and the other is not.
        else if (IsTransient ^ other.IsTransient)
        {
            return false;
        }
        // Both entities are not saved.
        else if (IsTransient && other.IsTransient)
        {
            return ReferenceEquals(this, other);
        }
        else
        {
            // Compare transient instances.
            return Id == other.Id;
        }
    }

    // The hash code is cached because a requirement of a hash code is that
    // it does not change once calculated. For example, if this entity was
    // added to a hashed collection when transient and then saved, we need
    // the same hash code or else it could get lost because it would no 
    // longer live in the same bin.
    private int? cachedHashCode;

    public override int GetHashCode()
    {
        if (cachedHashCode.HasValue) return cachedHashCode.Value;

        cachedHashCode = IsTransient ? base.GetHashCode() : Id.GetHashCode();
        return cachedHashCode.Value;
    }

    // Maintain equality operator semantics for entities.
    public static bool operator ==(EntityBase<T> x, EntityBase<T> y)
    {
        // By default, == and Equals compares references. In order to 
        // maintain these semantics with entities, we need to compare by 
        // identity value. The Equals(x, y) override is used to guard 
        // against null values; it then calls EntityEquals().
        return Object.Equals(x, y);
    }

    // Maintain inequality operator semantics for entities. 
    public static bool operator !=(EntityBase<T> x, EntityBase<T> y)
    {
        return !(x == y);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T23:01:37.937

我个人的建议是根本不要实现这些方法，因为这样做会在很多情况下强制加载，而实际上并没有必要。

此外，如果您不跨会话移动实体，您将永远不需要这个。即使你这样做了，你也可以在需要时按 ID 进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-23T13:46:28.650

[在实施@TheCloudlessSky](https://stackoverflow.com/a/20110265/5779732)建议的解决方案时，我遇到了多个问题。

首先，我的 ID 的数据类型不一致；有些是`int`，有些是`Guid`，有些是`string`。此外，有些是自动生成的，而另一些是手动分配的。如果我决定使用复合 ID，将来可能会出现其他问题。因此，我不能把

```
public virtual int Id { get; protected set; } 
```

在`EntityBase`基类中。我必须在各自的具体实体类中定义它。

其次，由于我在基类中无法拥有`Id`，因此实现`bool IsTransient`属性变得越来越困难。

因此，我决定为`Guid`每个实例生成并使用它来实现`GetHashCode`，`Equals`如下所示：

```
public abstract class BaseEntity
{
    Guid objectId = Guid.NewGuid();
    public virtual Guid ObjectId { get { return objectId; } }

    public override int GetHashCode()
    {
        return ObjectId.GetHashCode();
    }

    public override bool Equals(object other)
    {
        if(other == null)
            return false;
        if(ObjectId != (other as BaseEntity).ObjectId)
            return false;
        return ReferenceEquals(this, other);
    }
} 
```

# ios - 是否可以计算 iPhone 的下降速度？

> ID：11262749
> 
> 赞同：-2
> 
> 时间：2012-06-29T13:31:36.440
> 
> 标签：ios, accelerometer

我的应用程序将有一个`UILabel`显示 iPhone 当前速度的应用程序。当然，如果 iPhone 坠落，坠落速度也会更新为该标签。对于短距离，我相信 GPS 无法做到这一点，加速度计也不适合。这个任务可以吗？如果是，如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:33:46.877

不，GPS 无法做到这一点。（在 iPhone 中没有）。但是加速度计是可能的（但不要等待高精度）

# javascript - JQuery Dialog() 关闭后无法再次打开

> ID：11262756
> 
> 赞同：1
> 
> 时间：2012-06-29T13:31:53.807
> 
> 标签：javascript, jquery

以下代码是一个非常简单且完整的 JQuery 对话框。一切正常。

问题如 js1.js 中的标题所述：（见其评论）

它总是尝试通过调用`horsedlgcontainer.load('page2.html');`never hits `else horsedlg.dialog('open');`语句来加载页面。

请问有什么想法吗？非常感谢你！

page1.html ...

```
<!DOCTYPE html>
<head>
    <link href="Site.css" rel="stylesheet" type="text/css" />
    <link href="jquery-ui-1.8.21.custom.css" rel="Stylesheet" type="text/css" />
    <script src="jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
    <script src="js1.js" type="text/javascript"></script>
</head>
<body>
<div id="horse-link">
    [<a id="horse-link-show-dialog">Click Me</a>]
</div>
<div id="horse-link-dialog-container"></div>
</body> 
```

page2.html ...

```
<script src="js2.js" type="text/javascript"></script>
<div id="horse-dialog" title="Horse!">
Q: When is a horse not a horse?<br />
A: It depends, when a white horse is not a horse.<br /> 
</div> 
```

js1.js ...

```
$(document).ready(function () {
    var horselnk = $('#horse-link'),
        horsedlg = $('#horse-dialog'),
        horsedlgcontainer = $('#horse-link-dialog-container'),
        showdlgbtn = $('#horse-link-show-dialog');
    $.ajaxSetup({ cache: false });
    showdlgbtn.click(showHorseDialog);
    function showHorseDialog() {
        if (horsedlg.length==0) 
            horsedlgcontainer.load('page2.html');
        else  //to improve performance, open it again, don't load the same page
            horsedlg.dialog('open'); //Why never come here?!?       
    }
}); 
```

js2.js ...

```
$(document).ready(function () {
    var horsedlg = $('#horse-dialog'),
        horselnk = $('#horse-link');
    horsedlg.dialog({
        modal: true, autoOpen: true, resizable: false, 
        height: 500, width: 350, closeOnEscape: true,
        show: {effect:'puff',percent:150,duration:250},
        hide: {effect:'puff',percent:110,duration:250}
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:38:11.793

您只评估`horsedlg = $('#horse-dialog')`一次，并且是在加载内容之前，因此它的`.length`属性始终为零。

* * *

我怀疑您在加载对话框内容时也会遇到加载辅助 JS 文件的问题。单个 JS 文件会更干净：

```
$(document).ready(function () {

    var options = {
        modal: true, autoOpen: true, resizable: false, 
        height: 500, width: 350, closeOnEscape: true,
        show: {effect:'puff',percent:150,duration:250},
        hide: {effect:'puff',percent:110,duration:250}                    
    };

    var loaded = $.Deferred();
    $('#horse-link-show-dialog').on('click', function() {
        var state = loaded.state();
        if (state === 'resolved') {
            $('#horse-dialog').dialog('open');
        } else if (state === 'pending') {
            // do nothing
        } else {
            $('#horse-link-dialog-container').load('page2.html')
               .fail(loaded.reject);
               .done(function() {
                    $('#horse-dialog').dialog(options);
                    loaded.resolve();
                });
            });
        }
    });
}); 
```

这使用 jQuery 延迟对象来指示对话框是否已完成加载。

注意：未经测试的代码 - jsfiddle 不适合测试 AJAX。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:41:43.540

正如@Alnitak 所提到的，问题是您甚至在元素在dom 中可用之前就尝试搜索#horse-dialog。在您的情况下，它将在page2.html 加载后可用。

将您的代码调整为如下所示，您可以取消 js2.js：

```
$(document).ready(function () {
        var horsedlgOptions = {
        modal: true, autoOpen: true, resizable: false, 
        height: 500, width: 350, closeOnEscape: true,
        show: {effect:'puff',percent:150,duration:250},
        hide: {effect:'puff',percent:110,duration:250}
    };
    var horselnk = $('#horse-link'),
        horsedlg = $('#horse-dialog'),
        horsedlgcontainer = $('#horse-link-dialog-container'),
        showdlgbtn = $('#horse-link-show-dialog');
    $.ajaxSetup({ cache: false });
    showdlgbtn.click(showHorseDialog);
    function showHorseDialog() {
        if (horsedlg.length==0) 
            horsedlgcontainer.load('page2.html');
                        horsedlg = horsedlgcontainer.find("#horse-dialog");
                        horsedlg.dialog(horsedlgOptions);
        else  //to improve performance, open it again, don't load the same page
            horsedlg.dialog('open'); 
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T13:37:45.600

该变量是在第一个函数`horsedlg`中本地定义的- 因此，当执行该代码时，该代码等于页面上不存在的DOM 元素。`$(document).ready``horsedlg.length``0``id``horse-dialog`

您无法更改该本地定义的变量 - 因此`length`始终等于 0。

你可以这样做：

```
function showHorseDialog() {
    var horsedlg = $('#horse-dialog');
    if (horsedlg.length == 0) {
        horsedlgcontainer.load('page2.html');
    } else { //to improve performance, open it again, don't load the same page
        horsedlg.dialog('open'); //Why never come here?!?  
    }     
} 
```

# wpf - 是否可以参数化资源中 DataGrid CellTemplate 上的绑定？

> ID：11262757
> 
> 赞同：4
> 
> 时间：2012-06-29T13:31:56.420
> 
> 标签：wpf, xaml, binding, datagrid, celltemplate

我正在为 WPF 网格 (WPFToolKit DataGrid) 组合一些通用的 CellTemplate 样式，但我不确定用于使绑定通用的语法。例如，我有这个模板，如果值为负，它会将值变为红色：

```
<DataTemplate x:Key="RedNegativeCellTemplate">
    <TextBlock Name="QuantityTextBox" Text="{Binding Quantity, StringFormat='c', Mode=OneWay}"/>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding Quantity, Converter={StaticResource SignConverter}}" Value="-1">
            <Setter TargetName="QuantityTextBox" Property="Foreground" Value="Red"/>
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

您会注意到这在文本框中绑定到列值“<em>Quantity”——即，绑定来自的字段/列是显式的。

所以我可以在我的 WPF DataGrid 中使用它，如下所示：

```
<sdk:DataGrid ItemsSource="{Binding MyDataSource}" AutoGenerateColumns="False">
    <sdk:DataGrid.Columns>

        <sdk:DataGridTemplateColumn Header="Net Quantity" CellTemplate="{StaticResource RedNegativeCellTemplate}"/>

    </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

但是......我真正想做的是让模板的字段绑定通用，以便我可以重用模板，如下所示：

```
<sdk:DataGrid ItemsSource="{Binding OrdersQuery}"AutoGenerateColumns="False">
    <sdk:DataGrid.Columns>
        <sdk:DataGridTemplateColumn Header="Quantity" CellTemplate="{StaticResource RedNegativeCellTemplate}"/>
        <sdk:DataGridTemplateColumn Header="Price" CellTemplate="{StaticResource RedNegativeCellTemplate}"/>
        <sdk:DataGridTemplateColumn Header="Total" CellTemplate="{StaticResource RedNegativeCellTemplate}"/>
    </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

现在，这里的问题是似乎没有办法在 CellTemplate 中参数化绑定。但是我不愿意为使用此模板的**每一**列都设置 3 行以上的 controltemplate，因为它会使 XAML 变得混乱并使其可读性大大降低（更不用说如果我决定将单元格模板更改为文本框周围的边框，我必须在多个地方修改它。

所以我认为 CellTemplate 中的绑定应该看起来像这样（请注意，我们使用 '.' 作为绑定路径）：

```
 Text="{Binding Path=., StringFormat='c', Mode=OneWay}" 
```

然后以某种方式从 DataGridTemplateColumn 声明中设置数据上下文——但我不知道该怎么做。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:47:51.347

@Webreaper：如果我正确理解了您的想法，那么您和我将遇到相同的问题。我没有尝试过我的解决方案版本，基本上，我将绑定的路径属性绑定到DataGridTemplateColumn的SortMemberPath。

```
<DataGrid>
....
     <DataGridTemplateColumn CellTemplate={StaticResource CellTemplateKey} />
....
</DataGrid> 
```

其中 CellTemplateKey 在某处定义（例如，在 App.xaml 中）：

```
<DataTemplate x:Key="CellTemplateKey">
    <TextBlock Binding="{Binding Source={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGridRow}, Path={Binding Source={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGridTemplateColumn, Path=SortMemberPath}}}}" />
</DataTemplate> 
```

我稍后会检查并更新它。我希望这个想法在某种程度上有所帮助。我可能会调查 Dyna

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:02:10.677

为此，您可以使用[`DataTemplateSelector`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)它实际上很容易实现。
如果您需要一些进一步的解释和示例 - 请告诉我。

# php - Magento 所有带有图片的产品（list.phtml）

> ID：11262758
> 
> 赞同：2
> 
> 时间：2012-06-29T13:31:58.830
> 
> 标签：php, magento

我希望所有包含图像的产品都列在不包含图像的产品之前。我已经使用了一些代码，并且只能在每页的基础上实现这一点。

如果我有 100 个产品，并且第 1 页有 6 个产品包含图像，那么将首先显示 6 个产品，在所有后续页面上都有带图像的产品。

无论它们在哪个页面上，我都希望所有带有图像的产品都优先。

下面的代码基于我网站的默认设置，按价格从最低到最高对产品进行排序，我希望有人可以为我调整它。

```
<?php
$_productCollection=$this->getLoadedProductCollection();
$_helper = $this->helper('catalog/output');
?>
<?php if(!$_productCollection->count()): ?>
<p class="note-msg"><?php echo $this->__('There are no products matching the selection.') ?></p>
<?php else: ?>
<div class="category-products">
<?php echo $this->getToolbarHtml() ?>
<?php // List mode ?>
  <?php $imgprd=array(); ?>
<?php if($this->getMode()!='grid'): ?>
<?php $_iterator = 0; ?>
<ol class="products-list" id="products-list">

<?php foreach ($_productCollection as $_product): ?>
<?php 
//you can create test in any part sting of you link image
if (strpos($this->helper('catalog/image')->init                                                 $_product, 'small_image') , "placeholder")         ==false): ?>

    <li class="item<?php if( ++$_iterator == sizeof($_productCollection) ): ?> last<?php endif; ?>">
        <?php // Product Image ?>
        <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>
        <?php // Product description ?>
        <div class="product-shop">
            <div class="f-fix">
                <?php $_productNameStripped = $this->stripTags($_product->getName(), null, true); ?>
                <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped; ?>"><?php echo $_helper->productAttribute($_product, $_product->getName() , 'name'); ?></a></h2>
                <?php if($_product->getRatingSummary()): ?>
                <?php echo $this->getReviewsSummaryHtml($_product) ?>
                <?php endif; ?>
                <?php echo $this->getPriceHtml($_product, true) ?>
                <?php if($_product->isSaleable()): ?>
                    <p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></p>
                <?php else: ?>
                    <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                <?php endif; ?>
                <div class="desc std">
                    <?php echo $_helper->productAttribute($_product, $_product->getShortDescription(), 'short_description') ?>
                    <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped ?>" class="link-learn"><?php echo $this->__('Learn More') ?></a>
                </div>
                <ul class="add-to-links">
                    <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                    <?php endif; ?>
                    <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                        <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                    <?php endif; ?>
                </ul>
            </div>
        </div>
    </li>
    <?php else: ?>
    <?php $imgprd[]=$_product ?>    
    <?php endif; ?>
<?php endforeach; ?>
        <?php foreach ($imgprd as $_product): ?>
    <li class="item<?php if( ++$_iterator == sizeof($_productCollection) ): ?> last<?php endif; ?>">
        <?php // Product Image ?>
        <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>
        <?php // Product description ?>
        <div class="product-shop">
            <div class="f-fix">
                <?php $_productNameStripped = $this->stripTags($_product->getName(), null, true); ?>
                <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped; ?>"><?php echo $_helper->productAttribute($_product, $_product->getName() , 'name'); ?></a></h2>
                <?php if($_product->getRatingSummary()): ?>
                <?php echo $this->getReviewsSummaryHtml($_product) ?>
                <?php endif; ?>
                <?php echo $this->getPriceHtml($_product, true) ?>
                <?php if($_product->isSaleable()): ?>
                    <p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></p>
                <?php else: ?>
                    <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                <?php endif; ?>
                <div class="desc std">
                    <?php echo $_helper->productAttribute($_product, $_product->getShortDescription(), 'short_description') ?>
                    <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped ?>" class="link-learn"><?php echo $this->__('Learn More') ?></a>
                </div>
                <ul class="add-to-links">
                    <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                    <?php endif; ?>
                    <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                        <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                    <?php endif; ?>
                </ul>
            </div>
        </div>
    </li>

<?php endforeach; ?>
</ol>
<script type="text/javascript">decorateList('products-list', 'none-recursive')</script>

<?php else: ?>

<?php // Grid Mode ?>

<?php $_collectionSize = $_productCollection->count() ?>
<?php $_columnCount = $this->getColumnCount(); $i=0; ?>
<?php  foreach ($_productCollection as $_product): ?>
    <?php if (strpos($this->helper('catalog/image')->init($_product, 'small_image') , "placeholder")==false): ?>
    <?php if ($i++%$_columnCount==0): ?>
    <ul class="products-grid">
    <?php endif ?>
        <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
            <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>
            <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>
            <?php if($_product->getRatingSummary()): ?>
            <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
            <?php endif; ?>
            <?php echo $this->getPriceHtml($_product, true) ?>
            <div class="actions">
                <?php if($_product->isSaleable()): ?>
                    <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                <?php else: ?>
                    <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                <?php endif; ?>
                <ul class="add-to-links">
                    <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                    <?php endif; ?>
                    <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                        <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                    <?php endif; ?>
                </ul>
            </div>
        </li>
    <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
    </ul>
    <?php endif ?>
    <?php else: ?>
    <?php $imgprd[]=$_product ?>    
    <?php endif; ?>
    <?php endforeach ?>
     <?php foreach ($imgprd as $_product): ?>

    <?php if ($i++%$_columnCount==0): ?>
    <ul class="products-grid">
    <?php endif ?>
        <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
            <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>
            <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>
            <?php if($_product->getRatingSummary()): ?>
            <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
            <?php endif; ?>
            <?php echo $this->getPriceHtml($_product, true) ?>
            <div class="actions">
                <?php if($_product->isSaleable()): ?>
                    <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                <?php else: ?>
                    <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                <?php endif; ?>
                <ul class="add-to-links">
                    <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                    <?php endif; ?>
                    <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                        <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                    <?php endif; ?>
                </ul>
            </div>
        </li>
    <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
    </ul>
    <?php endif ?>
    <?php endforeach ?>
    <script type="text/javascript">decorateGeneric($$('ul.products-grid'), ['odd','even','first','last'])</script>
<?php endif; ?>

<div class="toolbar-bottom">
    <?php echo $this->getToolbarHtml() ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:02:22.490

采用：

```
$this->getLoadedProductCollection()->setOrder('image'/*or small_image*/, 'desc') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T03:56:11.147

你不能只使用`setOrder('image')`.

在页面工具栏中，有当前排序，你要考虑它是如何相互影响的。

例如，您选择了按价格升序排序，但您想先显示带有图像的产品，那么您喜欢的结果应该是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T00:27:06.563

我做了什么。我遵循了[http://www.atwix.com/magento/custom-sorting-product-listing/](http://www.atwix.com/magento/custom-sorting-product-listing/)上的方法 但是我遇到了排序顺序问题，所以设法通过替换覆盖块的代码来解决它。

**来自上面链接的原始代码**

```
class Atwix_Tweaks_Block_Product_List_Toolbar extends Mage_Catalog_Block_Product_List_Toolbar{
    protected $_direction = 'asc';
} 
```

**我为使排序正常工作所做的修改**

```
class Atwix_Tweaks_Block_Product_List_Toolbar extends Mage_Catalog_Block_Product_List_Toolbar{

    public function setCollection($collection){
        parent::setCollection($collection);
        if($this->getCurrentOrder() == "image")
            $this->_collection->setOrder($this->getCurrentOrder(), "desc");

        return $this;
    }
} 
```

# linux - AMD OpenCL 编译器忽略内核属性“work_group_size_hint”

> ID：11262763
> 
> 赞同：1
> 
> 时间：2012-06-29T13:32:43.820
> 
> 标签：linux, opencl, gpu, intel, amd-processor

我目前正在优化 OpenCL 内核，并一直在尝试为工作组大小和向量宽度找到最佳值。
目前我正在使用带有 Intel i7-3930k（6 核 @ 3.5 GHz，HT 禁用）和 AMD HD6870 的 ubuntu 系统。安装了 Intel 和 AMD OpenCL 实现以进行比较。（AMD APP SDK v2.7 Linux 64b & Catalyst 12.4，英特尔 OpenCL SDK 1.5）。

在 CPU 上运行（在 Intel 平台上）我发现：

*   通过选择 256 的 wg 大小，与 wgsize=1 相比，我可以获得大约 13.5% 的性能。
*   通过指定`__attribute__((vec_type_hint(float4)))`我可以获得 30% 的提升。
*   通过指定`__attribute__((work_group_size_hint(WG_SIZE, 1, 1)))`我得到另一个〜90％（！）

因此，总的来说，这些选项可以使性能提高近 3 倍。不幸的是，在使用 AMD OpenCL 平台的 CPU 上运行这个案例时，我发现可选属性被忽略了。

内核声明为：

```
kernel  __attribute__(( work_group_size_hint(WG_SIZE, 1, 1) ))
        __attribute__(( vec_type_hint(VEC_SIZE) )) 
void solveEikonalEq(    global      env_packed_t*   env_packed_in,
                        global      float*          packedEnvData_in,
                        private     float           ds,
                        private     float           freq,
                        global      ray_t*          ray,
                        global      rayMembers_t*   rayMembers){ 
```

编译器输出为：

```
"/tmp/OCLVAvDqR.cl", line 2637: warning: unknown attribute "work_group_size_hint"
  kernel  __attribute__((work_group_size_hint(WG_SIZE, 1, 1)))
                         ^

"/tmp/OCLVAvDqR.cl", line 2638: warning: unknown attribute "vec_type_hint"
          __attribute__(( vec_type_hint(VEC_SIZE))) 
                          ^ 
```

有人知道 AMD 是否总是忽略这些提示吗？或者我必须做些什么才能在 AMD 平台上启用这些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:41:12.683

引用 AMD 论坛 ( [http://devgurus.amd.com/message/1282250](http://devgurus.amd.com/message/1282250) ) 的答案：

> 内部添加了对工作组大小提示的支持，应该在下一个版本中。vec_type_hint 是可选的且不受支持，但我将提交请求以添加对解析器的支持。
> 
> Micah Villmow
> Advanced Micro Devices Inc.

因此，简而言之，根据 AMD 代表的说法：

*   AMD的APP SDK v2.7不知道`work_group_size_hint`也不知道`vec_type_hint`
*   `work_group_size_hint`APP SDK v2.8版本即将到来
*   `vec_type_hint`将来的版本可能会支持。

# java - noobie的java语法帮助

> ID：11262766
> 
> 赞同：-1
> 
> 时间：2012-06-29T13:32:47.580
> 
> 标签：java, python, jpype

谁能解释一下这段代码中 JdClient 是什么：

```
public JdClient client = new DefaultJdClient("some args") 
```

以及如何使用 Jpype 在 python 中实现这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:39:12.153

它通过使用一些参数调用构造函数来创建一个`public`名为`client`type的变量。`JdClient``DefaultJdClient`

在 Python 中使用它会遵循这些思路，虽然不能确定，因为我只是粗略浏览了文档，而且我不知道 JdClient 来自哪里，所以可能需要导入那个 Java 库和根据需要引用它，就像一个人会做的那样`java.lang.System.out.println('hello world')`

```
from jpype import *
startJVM("d:/tools/j2sdk/jre/bin/client/jvm.dll", "-ea")
client = DefaultJdClient("hello world")
shutdownJVM() 
```

# vba - Excel 宏中的单元格引用

> ID：11262767
> 
> 赞同：-3
> 
> 时间：2012-06-29T13:32:48.183
> 
> 标签：vba, excel

我有一个宏要写，很简单。

它只是从数据库中提取数值并将它们弹出到某些单元格中。

问题是，我希望能够在不关心底层宏的情况下更改工作表的布局和设计。因此，对于我需要填充数据的单元格，显然单元格引用会发生变化。

有没有办法在后台标记一个单元格 - 比如用“VALUE1” - 然后使用“VALUE1”引用该单元格 - 而无需知道其确切的单元格位置？以便可以更新它的值——它在工作表上的任何位置？

是否有 TAG 属性或可以使用的东西？虽然必须编写一个函数来搜索每个单元格的所有标签，但这没关系。

有任何想法吗？我认为这对任何宏开发人员来说都是一个奖励:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:44:02.323

Office 文档：[在公式中定义和使用名称](http://office.microsoft.com/en-us/excel-help/define-and-use-names-in-formulas-HA010147120.aspx)。

# wpf - wp 使用绑定的 ConverterParameter 创建一个 Converter

> ID：11262768
> 
> 赞同：0
> 
> 时间：2012-06-29T13:32:49.030
> 
> 标签：wpf, binding, parameters, converter

我在这篇文章中看到了一个完全符合我需求的解决方案[https://stackoverflow.com/a/8858815/1462911](https://stackoverflow.com/a/8858815/1462911)。

但我真的不知道如何正确实施它。

我现在有一个 PositionConverter，它可以转换字符串中的坐标，但我想通过它的参数传递它的父级（画布）的 ActualWidth。

我的 ConverterHelper 是否必须实现 IValueConverter 和 DependencyObject 或只是 DependencyObject？

我有点失落......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:52:05.723

您需要的最好通过 an`IMultiValueConverter`和 a完成`MultiBinding`：

```
public class PositionConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        var scale = (double)values[0]; // this is your [0, 1] double
        var max = (double)values[1]; // this is the ActualWidth
        return scale * max;
    }
} 
```

绑定看起来像：

```
<Element.Property>
    <MultiBinding Converter="{StaticResource myConverter}">
        <Binding Path="path_to_the_original_double" />
        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorLevel=1}"
                 Path="ActualWidth" />
    </MultiBinding>
</Element.Property> 
```

# ruby-on-rails - curl 需要发送 '\r\n' - 需要转换工作解决方案

> ID：11262769
> 
> 赞同：1
> 
> 时间：2012-06-29T13:32:49.797
> 
> 标签：ruby-on-rails, curl, http-post

我需要转换以下工作 curl 命令：

```
curl --data-binary @"data.txt" http://www.example.com/request.asp 
```

data.txt 包括：

```
foo=bar
parameter1=4711
parameter2=4712 
```

关键是我需要发送换行符，它们是\r\n。它使用文件，因为它具有正确的编码，但是我如何设法让这个 curl 命令在没有文件的情况下运行？因此，1-liner 在每个参数的末尾发送带有正确 \r\n 的参数。

我所有使用不同 URL 编码等的测试都不起作用。我从来没有得到与文件相同的结果。

我需要这些信息，因为我很难使用 net/http 在我的 Ruby on Rails 应用程序上运行这篇文章。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:42:34.343

解决它的一种方法是动态生成二进制流，例如 printf 命令，并让 curl 从标准输入读取数据：

```
printf 'foo=bar\r\nparameter1=4711\r\nparameter2=4712' | curl --data-binary @- http://example.com 
```

# c# - 如何在不同类的属性之间共享属性

> ID：11262770
> 
> 赞同：0
> 
> 时间：2012-06-29T13:32:51.050
> 
> 标签：c#, attributes, xml-serialization

采取以下示例代码：

```
public abstract class ElementBase 
{
}

public class ElementOne : ElementBase
{
}

public class ElementTwo : ElementBase
{
    [XmlElement("element-one", typeof(ElementOne))]
    [XmlElement("element-two", typeof(ElementTwo))]
    public ElementBase[] SubElements { get; set; }
}

[XmlRoot("root-element")]
public class RootElement 
{
    [XmlElement("element-one", typeof(ElementOne))]
    [XmlElement("element-two", typeof(ElementTwo))]
    public ElementBase[] SubElements { get; set;}
} 
```

on`ElementOne.SubElements`和`ElementTwo.SubElements`需要保持同步的属性（即，添加到一个的属性需要添加到另一个，并且参数需要保持相同），原因是在 xml 中，`<element-one>`元素都可以显示为`<root-element>`和的子元素`<element-two>`。元素可以按任何顺序排列，顺序很重要。此外，未来可能会有更多的子元素。它当前的编码方式将使维护变得乏味且容易出错，因为需要为属性维护两个单独的位置。

有没有办法让这些属性在两个属性之间“共享”，这样一次编辑就会同时影响它们？我尝试了以下方法：

```
public class CommomAttribute : Attribute
{
    public XmlElementAttribute f = new XmlElementAttribute("element-one", typeof(ElementOne));
    public XmlElementAttribute l = new XmlElementAttribute("element-two", typeof(ElementTwo));
} 
```

然后，我用单个 [Command] 替换了上述类属性上的冗余属性。这没有用。

另一个问题：有没有更优雅的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:28:42.653

如果您不介意更深入地了解子元素项，您可以试试这个：

```
public abstract class ElementBase
{
}

public class ElementOne : ElementBase
{
}

public class ElementTwo : ElementBase
{
    public SubElementList SubElements { get; set; }
}

public class SubElementList
{
    [XmlElement("element-one", typeof(ElementOne))]
    [XmlElement("element-two", typeof(ElementTwo))]
    public ElementBase[] Items { get; set; }
}

[XmlRoot("root-element")]
public class RootElement
{
    public SubElementList SubElements { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:57:48.700

在我的脑海中，我会做以下事情：

1.  在每个类（一和二）的 ctor 上，需要 ElementBase 的实例并将其保留为私有属性（例如，“SyncingElement”）
2.  修改SubElements的setter，与“SyncingElement”的实例同步

这样，两个对象上的子元素将具有相同的内存地址（相同的实例）。因此，如果有人从 One 获取 SubElements 的实例修改了索引 [2] 处的对象（例如），它也会影响位于 Two 的 SubElements。

# model-view-controller - MVC iOS 突围游戏设计

> ID：11262776
> 
> 赞同：0
> 
> 时间：2012-06-29T13:33:38.513
> 
> 标签：model-view-controller

我的突破之类的游戏中有以下模型：

*   球.h
*   块.m
*   GamePlay.m
*   桨.h
*   桨.m

我也有以下看法：

*   球视
*   块视图
*   桨视图

我的问题是，当我更改模型中的属性时，我也必须更改视图中的属性。例如：

球型：

```
@interface Ball : NSObject
@property (nonatomic, strong) NSNumber *radius;
@property (nonatomic, strong) NSNumber *xSpeed;
@property (nonatomic, strong) NSNumber *ySpeed;
@property (nonatomic, strong) NSNumber *xDirection;
@property (nonatomic, strong) NSNumber *yDirection;
@property (nonatomic) CGPoint location;
@property (nonatomic, strong) UIColor *color;
@end 
```

球视图：

```
@interface BallView : UIView
@property (strong, nonatomic) UIColor *color;
@property (nonatomic) int radius;
@end 
```

当模型的属性发生变化时，我有诸如位置或颜色之类的。我必须在视图中更新这些相同的属性。我不应该在我的模型中跟踪位置和颜色吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:51:38.290

我认为 MVC 的要点是随时间推移的可维护性。如果您决定明天需要一个完全不同的游戏视图，模型代码可以保持不变，因此您可以专注于仅修改视图部分。

此外，如果您知道需要一些有关游戏状态的数据，您就知道在哪里可以找到它——在模型中。例如，如果他有兴趣看你打破积木，你可能想通过互联网将球的位置传送给你的朋友。

正如您可能从最后两段中猜到的那样，您确实应该在模型中存储和更新球的位置和颜色。视图不应该是应用程序状态的所有者。

# java - 无法更新公共对象的值

> ID：11262777
> 
> 赞同：0
> 
> 时间：2012-06-29T13:33:40.113
> 
> 标签：java, global-object

我的问题是我无法更新对象数组的值...

代码是：

```
public class GlobalVariable {

    public int noOfSms = 0;
    public CheckingClass object = new CheckingClass ();
    public static void main(String[] args) {
       GlobalVariable call = new GlobalVariable ();
       call.driver();
    }

    private void driver() {
        for(int i = 0 ; i < 3 ; i++){
        object = CheckingFun();

     //   System.out.println("The No Of Sms"+noOfSms);
       System.out.println("Array Value"+object.array[noOfSms] + "     The number value"+object.number);
        }
    }

    private CheckingClass CheckingFun() {

        System.out.println("The No Of Sms "+noOfSms + "\n");
        object.array[noOfSms] = noOfSms;
        object.number = noOfSms;
        noOfSms = noOfSms + 1;

        return object;

    } 
```

另一类是：

```
public class CheckingClass {
public int number ; 
public int[] array = new int [5];

} 
```

这里的对象是另一个类的对象。我的问题在这一行

**`object.array[noOfSms] = noOfSms;`**

输出如下

```
The No Of Sms 0

Array Value0     The number value0
The No Of Sms 1

Array Value0     The number value1
The No Of Sms 2

Array Value0     The number value2 
```

我不明白的是为什么数组的值没有更新。当作为对象的属性的 number 的值被更新时。

但我想要的输出是：

```
 Array Value0     The number value0
The No Of Sms 1

Array Value1     The number value1
The No Of Sms 2

Array Value2    The number value2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:58:40.493

您`array[0]`每次都在输出中打印，而每个循环都在更新`array[0]`. `array[1]`， ETC。

编辑：

你`noOfSms`在`CheckingFun()`. 所以对于第一遍，你设置了`array[0] = 0`，但在你到达你的 println 之前，`noOfSms`已经增加了，现在是 1。所以你 print `array[1]`，它还没有被初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:05:42.333

`object.array[0]`您反复调用此函数 3 次

所以 array[0] 值为 0

```
`object.array[i]` 
```

# sitemap - 谷歌网站管理员工具检测到站点地图中的错误？

> ID：11262783
> 
> 赞同：1
> 
> 时间：2012-06-29T13:34:04.713
> 
> 标签：sitemap, robots.txt, google-search-console

我有一个看起来像这样的站点地图：

```
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:geo="http://www.google.com/geo/schemas/sitemap/1.0">

<url>

<loc>http://www.MyApp.se</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>daily</changefreq>
<priority>1.0</priority>
<url>

<loc>http://www.MyApp.se/Ad/Edit</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>monthly</changefreq>
<priority>0.5</priority>
</url>
<url>

<loc>http://www.MyApp.se/Site/Faq</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>monthly</changefreq>
<priority>0.5</priority>
</url>
<url>

<loc>http://www.MyApp.se/Site/Support</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>monthly</changefreq>
<priority>0.5</priority>
</url>
<url>

<loc>http://www.MyApp.se/Site/AboutMyApp</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>monthly</changefreq>
<priority>0.5</priority>
</url>
<url>

<loc>http://www.MyApp.se/Site/News</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>monthly</changefreq>
<priority>0.5</priority>
</url>
<url>

<loc>http://www.MyApp.se/Site/Cookies</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>monthly</changefreq>
<priority>0.5</priority>
</url>
</url>
<url>

<loc>http://www.MyApp.se/Ad/Detail?id=283</loc>
<lastmod>2012-06-26</lastmod>
<changefreq>weekly</changefreq>
<priority>0.5</priority>
</url>
<url>

<loc>http://www.MyApp.se/Ad/Detail?id=284</loc>
<lastmod>2012-06-26</lastmod>
<changefreq>weekly</changefreq>
<priority>0.5</priority>
</url>
<url>

<loc>http://www.MyApp.se/Ad/Detail?id=285</loc>
<lastmod>2012-06-26</lastmod>
<changefreq>weekly</changefreq>
<priority>0.5</priority>
</url>
<url>

<loc>http://www.MyApp.se/Ad/Detail?id=286</loc>
<lastmod>2012-06-26</lastmod>
<changefreq>weekly</changefreq>
<priority>0.5</priority>
</url>
<url>

<loc>http://www.MyApp.se/Ad/Detail?id=294</loc>
<lastmod>2012-06-28</lastmod>
<changefreq>weekly</changefreq>
<priority>0.5</priority>
</url>
</urlset> 
```

这是我的 Robo.txt ：

```
User-agent: *
Disallow:
Sitemap: <http://www.MyApp.se/Site/Sitemap/> 
```

问题是在谷歌网站管理员工具中我得到以下错误：

```
1
Warning
Invalid XML-tagg
This tag could not be identifyed.
**Problems :** 6
Tag: url
**Row :** 7
Tag: url
13
Tag: url
**Row :** 19

2
Warning 
Webadress blocked by robots.txt.
Sitemap contains webadresses that is blocked by robots.txt.
**Problems :** 12
Value : http://www.MySite.se
Value: http://www.MySite.se/Ad/Detail?id=283
Value: http://www.MySite.se/Ad/Detail?id=284 
```

为什么？我根据互联网上的指南构建了站点地图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:02:30.647

好的，`<url>`标签到处都是。从每个网站页面的开始`<loc>`标签到结束`</priority>`标签的所有内容都必须包含在一组`<url>`标签中。请参阅下面的修改代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset
xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9
http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">

<url>
<loc>http://www.MyApp.se</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>daily</changefreq>
<priority>1.0</priority>
</url>

<url>
<loc>http://www.MyApp.se/Ad/Edit</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>monthly</changefreq>
<priority>0.5</priority>
</url>

<url>
<loc>http://www.MyApp.se/Site/Faq</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>monthly</changefreq>
<priority>0.5</priority>
</url>

<url>
<loc>http://www.MyApp.se/Site/Support</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>monthly</changefreq>
<priority>0.5</priority>
</url>

<url>
<loc>http://www.MyApp.se/Site/AboutMyApp</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>monthly</changefreq>
<priority>0.5</priority>
</url>

<url>
<loc>http://www.MyApp.se/Site/News</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>monthly</changefreq>
<priority>0.5</priority>
</url>

<url>
<loc>http://www.MyApp.se/Site/Cookies</loc>
<lastmod>2012-06-29</lastmod>
<changefreq>monthly</changefreq>
<priority>0.5</priority>
</url>

<url>
<loc>http://www.MyApp.se/Ad/Detail?id=283</loc>
<lastmod>2012-06-26</lastmod>
<changefreq>weekly</changefreq>
<priority>0.5</priority>
</url>

<url>
<loc>http://www.MyApp.se/Ad/Detail?id=284</loc>
<lastmod>2012-06-26</lastmod>
<changefreq>weekly</changefreq>
<priority>0.5</priority>
</url>

<url>
<loc>http://www.MyApp.se/Ad/Detail?id=285</loc>
<lastmod>2012-06-26</lastmod>
<changefreq>weekly</changefreq>
<priority>0.5</priority>
</url>

<url>
<loc>http://www.MyApp.se/Ad/Detail?id=286</loc>
<lastmod>2012-06-26</lastmod>
<changefreq>weekly</changefreq>
<priority>0.5</priority>
</url>

<url>
<loc>http://www.MyApp.se/Ad/Detail?id=294</loc>
<lastmod>2012-06-28</lastmod>
<changefreq>weekly</changefreq>
<priority>0.5</priority>
</url>

</urlset> 
```

只是为了整理您的`robots.txt`文件，使其如下所示。确保`Sitemap`声明链接到`sitemap.xml`文件的位置：

```
User-agent: *
Sitemap: http://point-this-to-your-sitemap.xml 
```

也不需要空的`Disallow`声明。

这是我开发的网站所遵循的基本结构，所以应该没问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:50:07.800

查看文件的开头，您似乎对 XML 标记有问题，您似乎忘记了第一个 bloc 之后的 a。你有 ：

```
 <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:geo="http://www.google.com/geo/schemas/sitemap/1.0">

    <url>

    <loc>http://www.MyApp.se</loc>
    <lastmod>2012-06-29</lastmod>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
    <url>

    <loc>http://www.MyApp.se/Ad/Edit</loc>

[...] 
```

你应该有：

```
 <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:geo="http://www.google.com/geo/schemas/sitemap/1.0">

    <url>        
    <loc>http://www.MyApp.se</loc>
    <lastmod>2012-06-29</lastmod>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
    </url>

    <url>
    <loc>http://www.MyApp.se/Ad/Edit</loc>

[...] 
```

我认为您在代码的其他地方也有同样的问题。您可以尝试使用 XML 编辑器进行验证。

# jquery - 两个jquery函数冲突

> ID：11262784
> 
> 赞同：1
> 
> 时间：2012-06-29T13:34:06.273
> 
> 标签：jquery, conflict

这是小提琴：[小提琴](http://jsfiddle.net/AJBweb1986/f2uBW/10/)

基本上我想包含和使用 jquery ui 手风琴的手风琴菜单和一个使用 jquery 来显示隐藏答案的常见问题解答部分。小提琴不是完全准确的表示，但我的主要问题是，如果您查看 jquery 的两个位，是否有任何冲突。

实时站点上发生的情况是常见问题的箭头图标未显示，它们显示在单独的页面上，但当包含在与手风琴相同的页面上时不可见。

任何想法表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:39:35.070

你的 CSS 是问题所在。#faq dt.open 样式中的图像有误。该样式正在应用中，如果您使用 chrome 开发人员工具或 firebug，您可以直观地看到它。

查看更新的小提琴：http: [//jsfiddle.net/f2uBW/27/](http://jsfiddle.net/f2uBW/27/)

# c# - 优化 Repository 的 SubmitChanges 方法

> ID：11262785
> 
> 赞同：0
> 
> 时间：2012-06-29T13:34:13.780
> 
> 标签：c#, .net, design-patterns, linq-to-sql, domain-driven-design

我有以下存储库。我使用工厂在 LINQ 2 SQL 生成的类和域对象之间建立了映射。

以下代码将起作用；但我看到两个潜在的问题

1) 它在更新语句之前使用 SELECT 查询。

2）它需要更新所有的列（不仅仅是改变的列）。这是因为我们不知道域对象中的所有列都发生了什么变化。

如何克服这些缺点？

注意：可能存在基于特定列更新执行的场景（如触发器）。所以我不能不必要地更新列。

**参考**：

1.  [LINQ to SQL：在“UpdateCheck = Never”时更新而不刷新</a>](https://stackoverflow.com/questions/11189688/linq-to-sql-updating-without-refresh-when-updatecheck-never)

[](https://stackoverflow.com/questions/11189688/linq-to-sql-updating-without-refresh-when-updatecheck-never)
3.  [http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=113917](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=113917)

**代码**

```
namespace RepositoryLayer
{
public interface ILijosBankRepository
{      
    void SubmitChangesForEntity();
}

public class LijosSimpleBankRepository : ILijosBankRepository
{

    private IBankAccountFactory bankFactory = new MySimpleBankAccountFactory();
    public System.Data.Linq.DataContext Context
    {
        get;
        set;
    }

    public virtual void SubmitChangesForEntity(DomainEntitiesForBank.IBankAccount iBankAcc)
    {
        //Does not get help from automated change tracking (due to mapping)

        //Selecting the required entity
        DBML_Project.BankAccount tableEntity = Context.GetTable<DBML_Project.BankAccount>().SingleOrDefault(p => p.BankAccountID == iBankAcc.BankAccountID);

        if (tableEntity != null)
        {
            //Setting all the values to updates (except primary key)
            tableEntity.Status = iBankAcc.AccountStatus;

            //Type Checking
            if (iBankAcc is DomainEntitiesForBank.FixedBankAccount)
            {
                tableEntity.AccountType = "Fixed";
            }

            if (iBankAcc is DomainEntitiesForBank.SavingsBankAccount)
            {
                tableEntity.AccountType = "Savings";
            }

            Context.SubmitChanges();
        }
    }
}

}

namespace DomainEntitiesForBank
{

public interface IBankAccount
{
    int BankAccountID { get; set; }
    double Balance { get; set; }
    string AccountStatus { get; set; }
    void FreezeAccount();

}

public class FixedBankAccount : IBankAccount
{

    public int BankAccountID { get; set; }
    public string AccountStatus { get; set; }
    public double Balance { get; set; }

    public void FreezeAccount()
    {
        AccountStatus = "Frozen";
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T06:24:52.073

这不是一个真正的 DDD 问题。据我所知，你在问：

[使用 linq 生成直接更新，无需选择](https://stackoverflow.com/questions/445033/use-linq-to-generate-direct-update-without-select)

如果接受的答案是“*不”，那么它是不可能的*，但有更高投票的答案表明您可以*将*对象附加到您的上下文以启动数据上下文的更改跟踪。

关于禁用触发器的第二点已在[此处](https://stackoverflow.com/questions/2318269/disable-triggers-in-linq-to-sql)和[此处](https://stackoverflow.com/questions/5491687/how-to-turn-off-triggers-while-using-linqtosql)得到解答。但正如其他人所评论的那样，你真的需要触发器吗？您不应该在代码中控制这些更新吗？

一般来说，我认为您正在研究过早的优化。您正在使用 ORM，并且作为其中的一部分，您信任 L2S 为您做出数据库管道决策。但请记住，您可以在适当的地方使用存储过程执行特定的 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:09:19.320

如果我理解您的问题，您将被传递一个实体，您需要将其保存到数据库中，而不知道原始值是什么，或者哪些列实际上已更改。

如果是这种情况，那么您有四个选择

1.  您需要返回数据库以查看原始值，即执行选择，就像您的代码所做的那样。这允许您设置所有实体值，Linq2Sql 将负责实际更改哪些列。因此，如果您的列都没有实际更改，则不会触发更新语句。

2.  您需要避免选择并只更新列。您已经知道该怎么做（但其他人请参阅[此问题和答案](https://stackoverflow.com/questions/11189688/linq-to-sql-updating-without-refresh-when-updatecheck-never#comment14805870_11189688)）。由于您不知道哪些列已更改，因此您别无选择，只能将它们全部设置。即使没有实际更改任何列，这也会产生一条更新语句，并且这可以触发任何数据库触发器。除了禁用触发器之外，您在这里唯一能做的就是确保编写触发器以检查旧列和新列的值，以避免任何进一步的不必要的更新。

3.  您需要更改您的需求/程序，以便同时需要旧实体值和新实体值，这样您就可以确定哪些列已更改，而无需返回数据库。

4.  不要使用 LINQ 进行更新。LINQ 代表 Language Integrated **QUERY**，它在查询方面非常出色（恕我直言），但我总是将更新/删除功能视为额外的奖励，但不是它的设计目的。此外，如果时间/性能很关键，那么 LINQ 将无法正确匹配手工制作的 SQL。

# php - 在 Symfony 中更新数据库后如何更新 Propel 类？

> ID：11262786
> 
> 赞同：1
> 
> 时间：2012-06-29T13:34:20.103
> 
> 标签：php, symfony-1.4, propel

我在本地主机上使用测试数据库！

对于进一步的测试场景，我转储了实时数据库（带有新表和更多数据）并将其导入到我的本地主机数据库中。

现在我有一些错误，原因是我的推进类中不存在一些新表！

我应该在重建推进之前更新 schema.yml（现在我的数据库中有千禧数据）吗？

我现在该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:20:10.143

如果表存在于您的数据库中但不存在于您的模式中，我认为您不应该得到错误。你确定你说的不是相反的意思吗？

无论如何，您`schema.yml`应该始终与您的数据库同步，因此请确保您已在 中定义了所有必要的表和列`schema.yml`，然后验证您的数据库是否也包含它们（`propel-build-sql`如果需要，请使用），最后做一个`propel-build-sql`以确保您的模型符合日期。

# android - 视图的屏幕截图始终为空。安卓

> ID：11262788
> 
> 赞同：2
> 
> 时间：2012-06-29T13:34:23.367
> 
> 标签：android, screenshot

在一个 android 应用程序中，我试图截取一个名为 Sierpinski Triangle 的视图。但是，位图总是返回 null。谢尔宾斯基三角形只有 onDraw 方法的图形（没有按钮、文本视图、背景......）这是我的代码：

```
 sierpinskiTriangle.setDrawingCacheEnabled(true);
        sierpinskiTriangle.buildDrawingCache(true);
        sierpinskiTriangle.setDrawingCacheQuality(2);
        sierpinskiTriangle.measure(MeasureSpec.makeMeasureSpec(50, MeasureSpec.UNSPECIFIED), 
        MeasureSpec.makeMeasureSpec(50, MeasureSpec.UNSPECIFIED));
        sierpinskiTriangle.layout(0, 0, sierpinskiTriangle.getMeasuredWidth(), sierpinskiTriangle.getMeasuredHeight());
        Bitmap screensaver =sierpinskiTriangle.getDrawingCache(true);
        Bitmap screenshot = Bitmap.createBitmap(this.sierpinskiTriangle.getWidth(), this.sierpinskiTriangle.getHeight(), Config.ARGB_8888); 
```

请帮忙，我已经做了几个小时了。

这是谢尔宾斯基三角形的代码：

```
package com.Marco.Fractal;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Bitmap.Config;
import android.graphics.drawable.ShapeDrawable;
import android.graphics.drawable.shapes.RectShape;
import android.view.View;

public class SierpinskiTriangle extends View{

Paint paint = new Paint();
int stage;
int width;
int height;
int h1, h2, w1, w2,w3;

public SierpinskiTriangle(Context context, int t, int s, int w, int h) {
super(context);
stage = s;
width=w;
height=h;
paint.setColor(Color.RED);
h1=(int)(height/2-((((width-30)/4)*1.732)));
h2=(int)(height/2+((((width-30)/4)*1.732)));
w1=15;
w2=width-15;
w3=width/2;
}

protected void onDraw(final Canvas canvas) {

    this.setDrawingCacheEnabled(true);
    this.buildDrawingCache(true);
    canvas.drawLine(w1, h2, w3, (float) h1, paint);
    canvas.drawLine(w2, h2, w3, (float) h1, paint);
    canvas.drawLine(w1, h2, w2, h2, paint);
    triangles(canvas, w1, h2, w3, h1, w2, h2, stage);

}
protected void triangles(final Canvas canvas, int x1, int y1, int x2, int y2, int x3, int y3, int r)
{
    if(r==0)
    {
        canvas.drawLine(x1, y1, x2, y2, paint);
        canvas.drawLine(x2, y2, x3, y3, paint);
        canvas.drawLine(x3, y3, x1, y1, paint);
    }
    else
    {
        int xm1 = (x1+x2)/2;
        int xm2 = (x2+x3)/2;
        int xm3 = (x1+x3)/2;
        int ym1 = (y1+y2)/2;
        int ym2 = (y2+y3)/2;
        int ym3 = (y1+y3)/2;
        triangles(canvas, x1, y1, xm1, ym1, xm3,ym3, r-1);
        triangles(canvas, xm3, ym3,xm2, ym2, x3, y3, r-1);
        triangles(canvas, xm1, ym1, x2,y2, xm2,ym2,r-1);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:41:56.140

**[编辑2]**

我有一种感觉，您的 onDraw 方法中的以下两行让您感到困惑：

```
this.setDrawingCacheEnabled(true);     
this.buildDrawingCache(true); 
```

尝试删除它们，看看会发生什么！！！

**[EDIT1]** 尝试从您必须简单的所有内容中简化您的代码：

```
Bitmap screenshot;
sierpinskiTriangle.setDrawingCacheEnabled(true);
screenshot = Bitmap.createBitmap(sierpinskiTriangle.getDrawingCache(true));
sierpinskiTriangle.setDrawingCacheEnabled(false); 
```

**[原来的]**

尝试：

```
Bitmap screenshot = Bitmap.createBitmap(sierpinskiTriangle.getDrawingCache(true)); 
```

也看这里：

[如何以编程方式在 Android 中截取屏幕截图？](https://stackoverflow.com/questions/2661536/screenshot-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:04:24.517

谢谢大家的帮助，我终于解决了这个问题。

我将此代码添加到谢尔宾斯基三角形：

```
 public Bitmap getBitmap()
    {
        Bitmap b = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        Canvas c = new Canvas(b);
        draw(c);
        return b;
    } 
```

这会截取屏幕截图，但在截取屏幕截图时会放大。如果我找到解决此问题的方法，我会发布

# c# - 清理 MVC 中的后期操作

> ID：11262789
> 
> 赞同：0
> 
> 时间：2012-06-29T13:34:26.010
> 
> 标签：c#, asp.net-mvc, post-redirect-get

我正在使用 PRG 清理我在 MVC 中的帖子

> 在 POST 操作中，我使用操作过滤器将控制器模型状态存储在 tempdata 中，然后重定向到重新加载模型状态的 GET 方法。

GET 和 POST 操作标头：

```
[ImportModelStateFromTempData]
public ActionResult Details(int id) { 
    var object = load(id);
    return View(object);
}

[HttpPost]
[ExportModelStateToTempData]
public ActionResult Details(MyViewModel model) { 
    update(model); return RedirectToAction("Details", new { id = model.id }) 
} 
```

如果发生错误，我在发布操作中添加一个错误到模型状态，使模型状态无效，然后重定向到获取操作。

我的问题是如何才能最好地确定模型在发布后处于错误状态的 GET“详细信息”操作？如果模型状态无效，我想跳过逻辑......

```
var object = load(id); 
```

在 GET 操作中。我试过 ModelState.IsValid 但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:53:48.190

你可以尝试这样的事情：

```
public void OnActionExecuting(ActionExecutingContext filterContext)
{
    ModelStateDictionary modelState = filterContext.Controller.TempData[Key] as ModelStateDictionary;

    if( !modelState.IsValid )
    {
        filterContext.Controller.TempData.Add("IsValid", false);
    }
} 
```

在您的控制器中，您可以检查 TempData["IsValid"] 字段而不是 ModelState.IsValid：

```
if( TempData["IsValid"] != null ) // do whatever here, or skip code etc. 
```

注意动作过滤器代码是如何在 OnActionExecuting 方法中的。您将在 OnActionExecuted 中保留现有代码：

```
public void OnActionExecuting(ActionExecutingContext filterContext)
{         ModelStateDictionary modelState = filterContext.Controller.TempData[Key] as ModelStateDictionary;

    if (modelState != null)
    {
        if (filterContext.Result is ViewResult)
        {
            filterContext.Controller.ViewData.ModelState.Merge(modelState);
        }
        else
        {
            filterContext.Controller.TempData.Remove(Key);
        }
    }
} 
```

# android - 使用 VideoView 的 GoogleTv 视频被剪辑，即使它在自己的单独布局中

> ID：11262793
> 
> 赞同：0
> 
> 时间：2012-06-29T13:34:35.173
> 
> 标签：android, video, google-tv

为 GoogleTV 盒子编写了一个播放视频的应用程序。视频是与主要活动分开的活动。在我的主布局/活动上连接一个按钮以启动视频活动（使用它自己的 video.xml 布局），视频活动加载并开始播放，但视频被剪辑，仅显示底部几厘米。剪辑区域看起来像占据先前布局 (main.xml) 的视图。有趣的是，如果我按下后退按钮，在返回主要活动之前，会显示完整的视频帧。不知道我在这里做错了什么。欢迎任何建议。

代码：main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/hello_message"
        android:layout_width="fill_parent"
        android:layout_height="200dp"
        android:gravity="center"
        android:text="@string/hello_message"
        android:textSize="78sp" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/edit_message"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:hint="@string/edit_message" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/button_send"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="displayMessage"
            android:text="@string/button_send" />
        <Button
            android:id="@+id/button_send_a"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="sendMesssage"
            android:text="@string/button_send_a" />

    </LinearLayout>

    <Button
        android:id="@+id/videobutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="startAVideo"
        android:text="Video Player" />

</LinearLayout> 
```

GoogleTVExActivity.java（摘录）：

```
...
public class GoogleTVExActivity extends Activity {

     public final static String EXTRA_MESSAGE = "uk.co.bbc.googletvex.MESSAGE";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void displayMessage(View view)
    {
        TextView t = (TextView)findViewById(R.id.hello_message); 
        EditText e =(EditText) findViewById(R.id.edit_message);
        t.setText(e.getText().toString());
        e.setText("");
    }

    public void sendMesssage(View view)
    {
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }

    public void startAVideo(View view)
    {
        Intent intent = new Intent(this, VideoViewActivity.class);
        startActivity(intent);
    }
} 
```

视频.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <VideoView
   android:id="@+id/myvideoview"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent" />

</LinearLayout> 
```

VideoViewActivity.java（摘录）

```
...

import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.widget.MediaController;
import android.widget.VideoView;

public class VideoViewActivity extends Activity {

    String SrcPath = "rtsp://v5.cache1.c.youtube.com/CjYLENy73wIaLQnhycnrJQ8qmRMYESARFEIJbXYtZ29vZ2xlSARSBXdhdGNoYPj_hYjnq6uUTQw=/0/0/0/video.3gp";

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.video);
           VideoView myVideoView = (VideoView)findViewById(R.id.myvideoview);
           myVideoView.setVideoURI(Uri.parse(SrcPath));
           myVideoView.setMediaController(new MediaController(this));
           myVideoView.requestFocus();
           myVideoView.start();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:11:30.117

确保 VideoViewActivity 是全屏的，即。将以下内容添加到 AndroidManifest.xml 的和/或

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

如果之后视频不是全屏或有一些空白区域，则可能是因为视频的纵横比与您的 Google TV 屏幕纵横比不同。Android 将缩放视频以适应 VideoView，但不会在保持宽度不变的情况下将其拉伸得更高。您可以尝试重新制作视频并将其强制为更标准的 1080p 或 720p 纵横比。

# permissions - TFS 2010 – 每个新分支都从主干继承自定义组权限

> ID：11262795
> 
> 赞同：2
> 
> 时间：2012-06-29T13:34:39.153
> 
> 标签：permissions, branch, trunk

从 TFS2010 中的主干分支时，所有自定义组和权限（在主干中授予）都由新创建的分支继承。这导致创建后需要在新分支中清理大量权限。（每个分支都是主干的完整副本）

我正在使用脚本（一堆 tf 命令）在每个新分支上设置所有新权限。作为最后的手段，我正在考虑扩展这个权限脚本来管理不需要的中继权限的清理。

然而，我希望治疗原因而不是症状。

有没有办法覆盖这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:03:33.060

我在这里找到了解决方案：http: [//tfsbranchpermremoval.codeplex.com](http://tfsbranchpermremoval.codeplex.com)。

它涉及为 TFS 编写插件并将其部署在 TFS 应用服务器上。部署后，任何分支都不会继承来自主干的权限以进行分支操作。

# ruby-on-rails - POST 如何从 /users 而不是 /users/new 发生

> ID：11262798
> 
> 赞同：0
> 
> 时间：2012-06-29T13:34:46.547
> 
> 标签：ruby-on-rails

我经历了由创建的默认路由

资源：这里的照片：http: [//guides.rubyonrails.org/routing.html#crud-verbs-and-actions](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

我很困惑：

```
 POST      /photos     create        create a new photo 
```

创建新照片时，POST 不是来自 /photos/new 操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:38:48.693

`/photos/new`操作返回创建新照片的表单。填写所需信息并单击创建后 `/photos/create`，将调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:30:36.337

只是引用Mischa：“没有重定向并且永远不会调用/photos/create。当您在/photos/new 上提交表单时，对/photos 的POST 请求已完成。然后Rails 的路由器确保您的控制器中的创建操作是处决。”

那是正确的答案。

# jquery - jQuery inestedsortable 插件默认添加 css

> ID：11262800
> 
> 赞同：2
> 
> 时间：2012-06-29T13:34:55.710
> 
> 标签：jquery, html, css

我正在使用`inestedsortable`插件进行拖放，但我看到它本身给内部提供了一些 css，`<ul>`就像我不想要的填充一样。我怎样才能禁用它？

```
<ul id="sortable">
  <li class="sort">
   <span></span>
   <a class='expand'>Group1</a>
   <a style='padding-right:10px; float:right' href='#'>Delete</a>
   <a style='padding-right:10px; float:right' href='#'>Edit</a>
   <ul id="Group1">
    <li id="1" class='sort'>
        <span></span>
        <a href='#'>Patent 1</a>
        <em style='padding-left: 60px;'>The description of patent 1</em>
        <a style='padding-right:10px; float:right' href='#'>Delete</a>
        <a style='padding-right:10px; float:right' href='#'>Edit</a>
    </li>
   </ul>
</ul> 
```

当我在萤火虫中检查它时，内部`<ul>`会有一些风格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:56:34.980

实际上这不是那个插件的问题，它是因为 jQuery，如果你使用这个插件进行拖放，请使用 ol 而不是内部 ul。然后不应用填充

# iphone - 如何在 MKMapview 上绘制自定义线？

> ID：11262804
> 
> 赞同：0
> 
> 时间：2012-06-29T13:35:26.047
> 
> 标签：iphone, objective-c, ios, xcode

我一直在寻找一种绘制自定义线条的方法，但我能找到的唯一帮助是如何使用 UIColor 绘制线条。

我想画一条直线，但不仅仅是颜色。我希望线条的外观是可定制的。

（所以现在我可以在两点之间画线，但不是我想要的线）

我想要的线有 45 度直线，它是灰色和黑色的。

有人可以帮忙吗？

这条线看起来像这样，我也在想我可以拉伸这张图片，但如果我拉伸它，它看起来会有点奇怪。

![在此处输入图像描述](../Images/11e4c291ca5391f6b814b46c63073ee9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:09:54.533

那你为什么不添加图像呢？我是新开发人员，所以我不知道其他方法。只有带纹理的OpenGL，但没有必要使用openGL。所以我的建议是添加图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:26:34.007

听起来您正在寻找的是[MKPolylineView 类](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKPolylineView_class/Reference/Reference.html)。您为其分配一条折线，其中包含您的线中的点。由于折线视图是[MKOverlayPathView](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKOverlayPathView_class/Reference/Reference.html#//apple_ref/occ/cl/MKOverlayPathView)，您可以设置笔触和填充颜色。

由于它也是一个 UIView 子类，您可以通过获取视图层属性并添加渐变、阴影、蒙版等来进一步操作外观。

是否有您想要达到的特定效果？

# java - 使用 JAX-RS 将 java 对象编组到 JSON 添加空属性

> ID：11262807
> 
> 赞同：1
> 
> 时间：2012-06-29T13:35:39.850
> 
> 标签：java, json, jaxb, marshalling, jettison

我正在使用 jax-rs 并添加由 JAXRSOutInterceptor 在 Jetty 中编组的实体，但 JSON 输出正在修改为额外的空属性，如下所示：“$”：“”

JSONProvider 的创建和配置如下：

```
JSONProvider jsonProvider = new JSONProvider();
jsonProvider.setConvertTypesToStrings(true);
jsonProvider.setIgnoreNamespaces(true);
jsonProvider.setIgnoreMixedContent(true);
jsonProvider.setUnmarshallAsJaxbElement(true);
providers.add(jsonProvider); 
```

它也被编组为使用名称空间的 XML，但我不希望它们出现在 JSON 输出和输入中。

正在编组的对象与此类似：

```
@XmlRootElement(name="myObject1")
@XmlAccessorType(XmlAccessType.FIELD)
@SuppressWarnings("serial")
public class MyObject1 implements Serializable {

    MyObject2 a;
    MyObject2 b;
    MyObject2 c;

// includes getters, setters, hashCode, equals, toString,   
} 
```

当 MyObject2 是：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
@SuppressWarnings("serial")
public class MyObject2 implements Serializable {

    String x;
    String y;
    List<String> z;

// includes getters, setters, hashCode, equals, toString,   
} 
```

其余输出如下：

```
{
   "myObject1": {
      "a": {
         "x": "value1",
         "y": "value2",
         "z": "value3",
         "$": ""
      },
      "$": ""
   }
} 
```

如何摆脱结尾的“$”：“”我读到 Jettison（这是我正在使用的默认 JSONProvider 实现）默认情况下将用 @XmlValue 映射的属性表示为“$”，但没有属性?

这是由实现 Serializable 引起的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:15:04.460

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

Jettison 并不是真正的 JSON 提供者，而是一个允许 XML 库生成/使用 JSON 的 API。它做得不错，但是可能会出现像您现在遇到的问题一样的问题。您还会看到大小为 1 的列表未编组为 JSON 数组的问题。

*   [http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html](http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html)

如果您找不到使用当前设置进行此操作的方法。以下是您可以使用 MOXy 作为 JSON 提供程序执行的操作：

**我的对象1**

```
package forum11262807;

import java.io.Serializable;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="myObject1")
@XmlAccessorType(XmlAccessType.FIELD)
@SuppressWarnings("serial")
public class MyObject1 implements Serializable {

    MyObject2 a;
    MyObject2 b;
    MyObject2 c;

} 
```

**我的对象2**

```
package forum11262807;

import java.io.Serializable;
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@SuppressWarnings("serial")
public class MyObject2 implements Serializable {

    String x;
    String y;
    List<String> z;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面是一些独立的代码来演示 JSON 的读/写。

```
package forum11262807;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(MyObject1.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        unmarshaller.setProperty("eclipselink.media-type", "application/json");
        File json = new File("src/forum11262807/input.json");
        MyObject1 myObject1 = (MyObject1) unmarshaller.unmarshal(json);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty("eclipselink.media-type", "application/json");
        marshaller.marshal(myObject1, System.out);
    }

} 
```

**输入.json/输出**

生成的 JSON 消息不包含任何`"$"`属性，大小为 1 的列表是表示为 JSON 数组的属性。

```
{
   "myObject1" : {
      "a" : {
         "x" : "value1",
         "y" : "value2",
         "z" : [ "value3" ]
      }
   }
} 
```

**JAX-RS 集成**

MOXy 包含 MOXyJsonProvider 类，可以轻松在 JAX-RS 应用程序中进行配置：

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

# c# - DevExpress XtraReports - 带有存储过程的主报告和子报告

> ID：11262813
> 
> 赞同：0
> 
> 时间：2012-06-29T13:35:48.130
> 
> 标签：c#, asp.net, devexpress, reporting, xtrareport

我目前正在使用最新版本的 XtraReports 来制作都调用存储过程的主报告和子报告。主人工作正常，但由于某种原因，即使它传递了正确的参数并且我知道 proc 工作，sub 也没有提取数据。根据我在他们的网站上找到的信息，我应该在子报表上执行 BeforePrint 以绑定数据适配器。在报表的设计视图中，我设置了 DataSource 和 DataMember，并将 dataadapter 设置为 none。然后在打印前我有以下内容 -

```
private void SubReport_BeforePrint(object sender, System.Drawing.Printing.PrintEventArgs e)
    {

        sp_StoredProcTableAdapter da = new sp_StoredProcTableAdapter();
        this.DataAdapter = da.Fill(dsGoalsTotal1.sp_StoredProc, "name");            
    } 
```

它点击它并提取数据，但它没有将其绑定到报告。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:14:44.430

尝试使用：this.DataSource=dsGoalsTotals.sp_StoredProc;

在您发送的代码之后。

它可能会有所帮助。

# excel - 如何从 Excel 中的多个工作簿中提取数据？

> ID：11262815
> 
> 赞同：1
> 
> 时间：2012-06-29T13:35:50.427
> 
> 标签：excel

我正在设计一个 PARETO，我需要通过一个工作簿从多个工作表中提取数据。

因此，当有人打开此排列并按下按钮时，将通过另一个工作簿上的信息创建排列。

是否有可能在不完全复制的情况下获取该信息？

在英语中，我有一本名为 Open Order 的工作簿，还有一本名为 PARETO 的工作簿。如果我在 PARETO 中按下一个按钮，我想让它从 Open Order 中提取数据，然后说好的，Open Order Archive 表中的所有工作中有 20% 迟到了......是否可以在不打开两本书的情况下执行此操作?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:52:26.010

是的。只要一个打开，即使关闭，它也可以从另一个提取数据。但是我建议同时打开两者，因为以这种方式提取大量数据可能（或至少曾经是）非常慢。显然，每个“查找”都会打开一个新实例，之后不会立即关闭它。

# wpf - 部分类实体框架属性已更改

> ID：11262816
> 
> 赞同：0
> 
> 时间：2012-06-29T13:35:53.080
> 
> 标签：wpf, entity-framework

对于数据库第一场景，我​​有很多关系并将 EF 用作 ORM 和 DAL：

客户：ID、姓名、地址 || 产品：ID、名称 || 客户产品：客户 ID、产品 ID

我向 Product 实体类添加了一个自定义属性，称为 Isincludedforcustomer。

```
 public partial class Product: EntityObject 
{
    public bool isincludedforcustomer;
    public bool Isincludedforcustomer
    {
        get { return isincludedforcustomer; }
        set {isincludedforcustomer= value; }
    } 
```

选择客户后，我有一种分配新属性的方法。

```
 IsProductinclinframe(Displayedcustomerproducts, products); 
```

我如何实现属性更改为此属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:43:35.983

我通常在属性的设置器中调用 PropertyChanged 事件。

```
public partial class Product: EntityObject, INotifyPropertyChanged 
{
    public bool isincludedforcustomer;
    public bool Isincludedforcustomer
    {
        get { return isincludedforcustomer; }
        set 
        {
            isincludedforcustomer= value; 
            RaisePropertyChanged("Isincludedforcustomer");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

# android - 了解android内部（深入系统）

> ID：11262817
> 
> 赞同：15
> 
> 时间：2012-06-29T13:36:08.880
> 
> 标签：android, linux, architecture, systems-programming

好的，伙计们，我认为这是提出问题的正确地方，因为这完全是关于发展的（如果我错了或者是重复的问题，请告诉我）。

所以，我想**深入研究 Android**，了解系统如何工作到内核（并了解生根和其他黑客行为背后的原因）。我应该从这里去哪里？Linux 书？虚拟机架构？

仅仅下载源代码并没有帮助，因为我不明白这*一切是*如何工作的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T13:50:20.683

> 我应该从这里去哪里？

我知道有两本关于 Android 内部的书：

*   其中之一，[XDA Developers 的 Android Hacker's Toolkit](https://rads.stackoverflow.com/amzn/click/com/1119951380)得到了糟糕的评价，但这可能是因为它并没有涵盖 XDA 本身的内容之外的太多内容。但是，如果您对该主题不是非常熟悉，那么它可能仍然值得。

*   另一个，[Embedded Android: Porting, Extending, and Customizing](https://rads.stackoverflow.com/amzn/click/com/1449308295)，本应在 7 月发布，但似乎发布日期被推迟到了 8 月。我认为 O'Reilly 网站上有一个抢先体验版可供购买。

Marakana 的[TechTV](http://marakana.com/techtv/about.html)系列包括许多有关固件模块的视频（例如，会议演示）。他们和其他几家公司也提供有关该主题的培训。

当然欢迎您浏览[XDA](http://www.xda-developers.com/)及其关于固件模块的论坛帖子，但它绝对更像是一个社区站点，而不是该主题的参考指南。

除此之外，了解 Linux 操作系统的工作原理（内核、驱动程序等）肯定会有所帮助，因为 Android 就是基于这些东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-03T03:21:02.973

截至 2015 年 1 月，有一本新书出版：在[http://newandroidbook.com](http://newandroidbook.com) - 第 1 卷，共 2 卷，不过，还有一本计划讨论“更深入”的内部结构

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-15T19:13:31.767

例如，在 opersys 课程的幻灯片（[http://www.opersys.com/training/embedded-android/courseware](http://www.opersys.com/training/embedded-android)选项卡）中对 Android 内部进行了很好的介绍 - 幻灯片并没有完全自我解释，它们可能是一个好的开始下一个学习点..

# cordova - github上的PhoneGap插件-purplecabbage vs phonegap？

> ID：11262818
> 
> 赞同：1
> 
> 时间：2012-06-29T13:36:13.780
> 
> 标签：cordova, phonegap-plugins

哪个存储库被认为是 PhoneGap 插件的事实上的标准源？

[https://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins)

或者

[https://github.com/purplecabbage/phonegap-plugins](https://github.com/purplecabbage/phonegap-plugins)

我看到它们都在不同的地方引用。看起来有很多重复，但有时会更新一个而不是另一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:46:22.553

最新的 repo 应该是[https://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins)

# c# - 在c#中检查datagridview中所有单元格的值是否为null

> ID：11262820
> 
> 赞同：0
> 
> 时间：2012-06-29T13:36:21.170
> 
> 标签：c#

我想检查并设置 datagridview 中所有具有空值的单元格的值，例如

```
firstname          lastname     DOB
AAA                             12/12/1212
BB                  CC
                    DD          12/12/1212 
```

现在输出应该是

```
 firstname          lastname     DOB
    AAA                null      12/12/1212
    BB                  CC       null
    null                DD       12/12/1212 
```

# telerik - 如何使用 Telerik 从 UserControl1 刷新 UserControl2？

> ID：11262823
> 
> 赞同：0
> 
> 时间：2012-06-29T13:36:36.570
> 
> 标签：telerik, radgrid

我有两个用户控件 - UserControl1.ascx 和 UserControl2.ascx

我在 UserControl1.ascx 中有一个 RadGrid1。我在 UserControl2.ascx 中有一个表单。

当我在 UserControl1.ascx 中更新 RadGrid1 时，我想在 UserControl2.ascx 中刷新表单中的数据。

如何使用 Telerik 从 UserControl1 刷新 UserControl2 中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:47:54.157

将两个用户控件放置在 RadAjaxManager 中，如下所示：

```
 <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
        <AjaxSettings>
            <telerik:AjaxSetting AjaxControlID=" UserControl1">
                <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID=" UserControl2"></telerik:AjaxUpdatedControl>
                     <telerik:AjaxUpdatedControl ControlID=" UserControl1"></telerik:AjaxUpdatedControl>
                  </UpdatedControls>
            </telerik:AjaxSetting>
        </AjaxSettings>
    </telerik:RadAjaxManager> 
```

在您在网页上注册 em 后，在下面放置您的用户控件

```
<uc1:UsreControl1  ID="UserControl1" runat="server"/>

<uc2:UsreControl2  ID="UserControl2" runat="server"/> 
```

希望它对你有用，因为它在我的项目中对我有用。

# html - 我想在 html 表单中将 div 放在更靠近文本框的位置

> ID：11262825
> 
> 赞同：0
> 
> 时间：2012-06-29T13:36:45.877
> 
> 标签：html, css

谁能帮我？我需要在 html 表单中的文本框之后放置一个 div。即标签、文本框和新的 div 在同一行

请查看我的 html 代码。我还没有添加 div 代码。

请任何人都可以帮助我在同一行中添加一个 div 而无需对此代码进行任何修改。因为我制作了几个 CSS 代码来对齐这个标签和文本框

```
<form action="operates/signup.php" method="post" name="signupform" id="signupform">

      <label id="fnamelabel" for="fnam">First Name :</label>
      <input type="text" name="fnam" id="fnam" tabindex="1" />

    <p>
      <label id="lnamelabel"  for="lnam">Last Name :</label>
      <input type="text" name="lnam" id="lnam" tabindex="2" />
    </p>
    <p>
      <label id="yemail" for="email">Your Email :</label>
      <input type="text" name="email" id="email" tabindex="3" />
    </p>
    <p>
      <label id="reemail" for="remail">Re-enter Email :</label>
      <input type="text" name="remail" id="remail" tabindex="4" />
    </p>
    <p>
      <label id="npass" for="password">New Password :</label>
      <input type="text" name="password" id="password" tabindex="5" />
    </p>
    <p>
      <label id="mskill" for="bskill">Main Skill :</label>
      <select name="bskill" id="bskill" tabindex="6">
      </select>
    </p>
    <p>
      <input type="checkbox" name="termsanc" id="termsanc" tabindex="6" />
      <label id="terms" for="termsanc">I agreed the <a href="index.html">Terms and Conditions</a></label>
    </p>
    <div id="signupbutton" onclick="document.forms.signupform.submit()"></div>
  </form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:39:53.703

您可以将 div 设置为内联样式，但您应该使用跨度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:46:42.233

```
<label id="fnamelabel" for="fnam" style = "display:inline">First Name :</label>
<input type="text" name="fnam" id="fnam" tabindex="1" style = "display:inline" />
<div id="newDiv" style = "display:inline"></div> 
```

通常我不会使用这样的内联 CSS，但由于你没有发布 css，我觉得这是必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:54:05.553

首先，让我们处理那个标记！

```
<form action="operates/signup.php" method="post" name="signup_form">
    <label>First Name:
        <input name="first_name"></label>
    <label>Last Name:
        <input name="last_name"></label>
    <label>Your Email:
        <input type="email" name="email"></label>
    <label>Please Reenter Your Email:
        <input type="email" name="validate_email"></label>
    <label>New Password:
        <input type="password" name="password"></label>
    <label>Main Skill:
        <input name="main_skill"></label>
    <label><input type="checkbox" name="terms_and_conditions">I agreed the <a href="index.html">Terms and Conditions</a></label>

    <button type="submit">Submit</button>
</form>
<style type="text/css">
    form {
        display: block;
        width: 400px;
    }
    label {
        display: block;
        padding: 5px;
        margin: 5px;
    }
    form label input {
        float: right;
    }
    input[type=checkbox] {
        float: none;
    }
</style> 
```

好了，现在看起来是不是好多了？

* * *

至于最初的问题，不要使用 a `div`，`div`是一个**完全无语义的*块级*元素**。如果您想要一个内联元素（即显示在同一行），请使用 a `span`，它是一个**完全无语义的*内联级*元素**。

# json - ASN.1 vs JSON 什么时候适合使用它们？

> ID：11262826
> 
> 赞同：15
> 
> 时间：2012-06-29T13:36:50.920
> 
> 标签：json, language-agnostic, encoding, asn.1

什么时候使用 ASN.1 比使用 JSON 更可取？这两种方法有哪些优点和缺点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-18T21:28:27.083

ASN.1 和 JSON 没有严格的可比性。JSON 是一种数据格式。ASN.1 是一种模式语言加上多组编码规则，每组编码规则都会为给定的模式生成不同的数据格式。所以，最初的问题有点类似于“XML Schema vs. XML：什么时候适合使用它们？”这个问题。在 ASN.1 和 JSON Schema 之间进行更公平的比较。

也就是说，有几点需要考虑：

*   ASN.1 有二进制编码规则。考虑二进制或文本编码是否更适合您的应用程序。
*   ASN.1 也有 XML 和 JSON 编码规则。如果愿意，您可以选择使用 ASN.1 进行基于文本的编码。
*   ASN.1 允许开发其他编码规则。在 ITU-T 为 JSON 指定编码规则之前，我们指定了我们自己的规则来将 ASN.1 编码为 JSON。[我在我们](http://obj-sys.com/blog/?p=508)公司的网站上写过这个
*   与 XML Schema 一样，存在用于编译 ASN.1 的工具。这些通常被称为数据绑定工具。编译器输出包含保存数据的数据结构，以及用于对各种编码（二进制、XML、JSON）进行编码/解码的代码。
*   我不确定 JSON Schema 存在哪些数据绑定工具（如果有的话）。我也不确定 JSON Schema 有多成熟/稳定，而 ASN.1 相当成熟和稳定。
*   在 JSON Schema 和 ASN.1 之间进行选择，请注意 JSON Schema 绑定到 JSON，而 ASN.1 未绑定到任何特定表示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T17:35:34.247

无论您是否需要使用 C、C++、C#、Java 或任何其他具有 ASN.1 编码器/解码器引擎的编程语言来序列化可能发送给收件人的消息，您都可以使用 ASN.1。ASN.1 还提供了多种编码规则，它们在不同的情况下都有好处。例如，在规范编码至关重要时使用 DER，例如在数字证书中，而在带宽至关重要时使用 PER，例如在蜂窝协议中，而 E-XER 则在您不关心带宽并希望使用时使用以 XML 格式显示编码以便在浏览器中进行操作或与 XML Schema 引擎交换消息。

请注意，使用好的 ASN.1 工具，您无需更改应用程序代码即可在这些 ASN.1 编码规则之间切换。一个简单的函数调用可以选择您想要使用的编码规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-22T23:54:22.143

[在这里](https://www.thinkmind.org/download.php?articleid=tele_v8_n12_2015_5)可以找到一篇对 JSON、XML、ASN.1、EXI 和 ProtoBuf 进行了深入研究的论文

# ruby-on-rails - 如何仅重新索引 Sunspot Solr 中的某些对象

> ID：11262827
> 
> 赞同：11
> 
> 时间：2012-06-29T13:36:52.027
> 
> 标签：ruby-on-rails, solr, sunspot

我们使用 Sunspot Solr 在我们的 Ruby on Rails 应用程序中进行索引和搜索。

我们想重新索引一些对象，但有人不小心从 Rails 控制台运行了 Product.reindex 命令。结果是所有产品的索引都是从头开始的，而我们的目录在索引时显示为空。

由于我们有大量数据，到目前为止，重新索引已经花费了三天时间。今天早上，当我检查重新索引的进度时，似乎有一个损坏的数据条目导致重新索引停止而没有完成。

我无法再次重新启动整个 Product.reindex 操作，因为它需要的时间太长。有没有办法只对选定的产品运行重新索引？我想选择一系列未编入索引的产品，然后在 thise 上运行索引。如何在不必对整个数据集运行完整的重新索引的情况下将单个产品添加到索引中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T11:12:09.403

Sunspot 确实在保存回调中索引了一个对象，因此您可以保存每个对象，但也许这也会触发其他回调。一种更精确的方法是

```
Sunspot.index [post1, post2]
Sunspot.commit 
```

或使用自动提交

```
Sunspot.index! [post1, post2] 
```

你甚至可以传入对象关系，因为它们也只是一个数组

```
Sunspot.index! post1.comments 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T05:34:43.230

我在[https://github.com/sunspot/sunspot#reindexing-objects上找到了答案](https://github.com/sunspot/sunspot#reindexing-objects)

每当保存对象时，它都会作为保存回调的一部分自动重新索引。因此，所需要做的就是将所有需要重新索引的对象添加到数组中，然后循环遍历数组，对每个对象调用 save 。这成功地更新了索引中所需的对象。

# django - django 时区如何与 model.field 的 auto_now_add 一起使用

> ID：11262828
> 
> 赞同：30
> 
> 时间：2012-06-29T13:36:51.767
> 
> 标签：django, timezone

我想时区管理已添加到 Django 1.4，所以这个问题是相当新的。

我使用了一个简单的模型

```
class Sample(models.Model):
    ...
    date_generated = models.DateTimeField(auto_now_add = True) 
```

当我尝试检索新创建的记录时，它失败了。

```
min_datetime = datetime.now() - timedelta(seconds = 300)
sample = Sample.objects.get(date_generated__gte = min_datetime) 
```

服务器发出警告。

```
DateTimeField received a naive DateTime (2012-06-29 15:02:15.074000) while time zone support is active. 
```

我想出了两个解决这个问题的办法。

1.  在 settings.py 中禁用时区管理

    ```
     USE_TZ = False 
    ```

但这并不总是可取的。2.改变

```
 date_generated = models.DateTimeField(auto_now_add = True) 
```

至

```
 date_generated = models.DateTimeField(default=datetime.now()) 
```

是保持时区管理正常工作的解决方案

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-09-05T09:33:18.690

使用 django 的时区工具

```
from django.utils import timezone
date_generated = models.DateTimeField(default=timezone.now) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-29T14:31:30.310

问题出在你头上：`datetime.now()`TZ 不知道，所以你是一个在天真的 TZ 中喂养的人。请参阅[有关此问题的 Django 文档](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#naive-and-aware-datetime-objects)。设置时它起作用的原因`default=datetime.now`是您将值强制为天真的日期时间，因此当您稍后将其与另一个天真的日期时间进行比较时，没有问题。

您需要通过以下方式获得“现在”：

```
import datetime
from django.utils.timezone import utc

now = datetime.datetime.utcnow().replace(tzinfo=utc) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-10-21T17:45:32.890

小心设置`DateTimeField`默认值`datetime.now()`，因为这将在 Apache/nginx 加载 Django（或启动开发服务器时）计算单个值，并且所有后续记录都将接收该值。

总是`auto_now_add`因为这个原因使用。

# parameters - 如何在 PARAMETERS 语句自动生成的屏幕中检索字段的值？

> ID：11262831
> 
> 赞同：3
> 
> 时间：2012-06-29T13:37:01.197
> 
> 标签：parameters, event-handling, abap

```
PARAMETERS: p_1 TYPE i, p_2 TYPE i. 
```

因此，在初始屏幕中，我看到 2 个文本框，每个参数一个。

如果我填写其中一个，但不按回车键，然后我在第二个上调用 F4 帮助，我希望能够检查`AT SELECTION-SCREEN ON VALUE REQUEST FOR p_2`.

我需要这个才能使我的第二个参数建议有意义。我只需要获取那些值 p_2 ，我的表中的行包含（在适当的位置） p_1 值。如果我不这样做，大多数时候用户在输入 2 个参数时将没有结果。

我听说有一个函数可以为我获取屏幕上的参数值，但我真的不知道如何告诉谷歌我想要什么 :P 如果你知道其他方法，那很好，我只想要屏幕上的值

Thx，你们统治！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:05:35.027

FM DYNP_VALUES_READ 会做你想做的事。

# javascript - 将 div 向左浮动，同时保持它的“左”css 属性

> ID：11262833
> 
> 赞同：0
> 
> 时间：2012-06-29T13:37:08.340
> 
> 标签：javascript, css

所以正如标题所说，我需要将我的 div 以绝对位置向左浮动，同时保持`left: 100px`或设置任何设置，例如，假设我有这些规则：

```
.myDiv{
     position:absolute;
     left:100px;
     top:100px;
     width:50px;
     height:50px;
} 
```

现在如何在不使用此命令的情况下`float`将它移到左侧，我需要类似的东西也是完全可以接受的。`left:0px``left``float:left``javascript`

如果有人想知道为什么我需要这个非常奇怪的东西是因为我想保持这个对象偏移，所以以后我可以把它带回原来的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:39:05.507

你不能做这个。绝对定位的对象只能通过更改`left`, `top`, `bottom`,中的一项或多项来移动`right`（或在 DOM 树中重新定位它们）。

如果您希望能够将元素移动到之前的位置，请保存`left`某处的值，以便您可以在时间到来时恢复它。这很容易做到，并且它本身就足以完成几乎任何你想要它做的事情。

# java - 使用 JOOQ 从 SYBASE DB 生成元模型代码时出错

> ID：11262835
> 
> 赞同：1
> 
> 时间：2012-06-29T13:37:14.837
> 
> 标签：java, sap-ase, jooq

尝试使用 JOOQ 生成元模型时出现此错误：

```
org.jooq.exception.DataAccessException: SQL [select [SYS].[SYSUSER].[user_name] from [SYS].[SYSUSER]]; SYS.SYSUSER not found. 
```

这可能是因为用户没有管理权限。JOOQ 可以从 create 语句生成元模型代码吗？我没有其他用户。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:59:25.820

您可能使用了 jOOQ 理解的错误数据库，如此处所述：

[http://www.jooq.org/manual/META/Configuration/](http://www.jooq.org/manual/META/Configuration/)

请注意，文档如何说明：

```
<!-- The database dialect from jooq-meta. Available dialects are
     named org.util.[database].[database]Database. Known values are:

     org.jooq.util.ase.ASEDatabase
     [...]
     org.jooq.util.sybase.SybaseDatabase

     You can also provide your own org.jooq.util.Database implementation
     here, if your database is currently not supported -->
     <name>org.jooq.util.oracle.OracleDatabase</name> 
```

您提到的 SQL 似乎来自`SybaseDatabase`该类（对应于 Sybase SQL Anywhere），而您应该改用`ASEDatabase`该类，生成对`sp_help`

# java - 是什么导致异常中的递归原因？

> ID：11262838
> 
> 赞同：10
> 
> 时间：2012-06-29T13:37:34.110
> 
> 标签：java, exception

在调试器中查看 Java 中的异常时，您经常会看到原因是无限递归到自身的（我假设它是无限的）。

例如：

```
Exception1, 
  Caused by -> Exception2 
     Caused by -> Exception2
        Caused by -> Exception2 
```

为什么是这样？

**注意：这是在调试器中查看代码时，在这种情况下是 Eclipse。**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-29T13:41:33.640

查看[Throwable 的源代码](http://www.docjar.com/html/api/java/lang/Throwable.java.html)：

```
 187       /**
  188        * The throwable that caused this throwable to get thrown, or null if this
  189        * throwable was not caused by another throwable, or if the causative
  190        * throwable is unknown.  If this field is equal to this throwable itself,
  191        * it indicates that the cause of this throwable has not yet been
  192        * initialized.
  193        *
  194        * @serial
  195        * @since 1.4
  196        */
  197       private Throwable cause = this; 
```

所以我猜你看到的是一个异常，它是在没有使用一个有原因的构造函数的情况下创建的。

您将在调试器中看到这一点，但[getCause](http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getCause%28%29)负责不返回递归引用：

```
 414       public synchronized Throwable getCause() {
  415           return (cause==this ? null : cause);
  416       } 
```

# c# - 代码合同运行时检查异常

> ID：11262842
> 
> 赞同：2
> 
> 时间：2012-06-29T13:37:46.027
> 
> 标签：c#, code-contracts

我们在代码库中使用 Microsoft 的代码合同。

一个项目中有`Contract.Requires`语句，但发布的构建配置没有勾选“执行运行时合同检查”复选框。

当发布版本命中`Contract.Requires`语句时，会生成异常。这最终会逐渐蔓延并导致`System.ServiceModel.CommunicationException`使用代码协定的 Web 服务出现问题。

异常**中没有任何迹象表明这是代码合同问题。

有什么办法可以揭露这是一个代码合同问题吗？

该问题已通过勾选发布构建配置的“执行运行时合同检查”复选框来解决，但最好在运行时提供更好的诊断信息。

![在此处输入图像描述](../Images/0dfb510bf71480dca4bd509a63aeb6a0.png)

** 仍在研究内部异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T20:59:11.860

即使您不希望运行时检查，也始终需要重写器。该选项的名称具有误导性！如果要关闭运行时检查，则需要启用该复选框，但将下拉菜单设置为“无”。

如果您没有启用重写器，代码将只调用 Contracts 类中的实际方法，这些方法实际上只是重写器访问的虚拟方法。如果你真的打电话给他们，他们只会抛出一个异常。

# asp.net - 以编程方式创建 Ektron 目录和产品类型

> ID：11262843
> 
> 赞同：0
> 
> 时间：2012-06-29T13:37:47.113
> 
> 标签：asp.net, ektron

我有一系列网站，需要用一个简单的目录和该目录中的 3 种基本产品类型来更新它们。有没有办法以编程方式创建产品类型（仅指定名称和类型），然后创建包含这 3 种类型的目录？

我正在使用 8.0.1 SP1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:17:21.673

虽然您最好只在第一个实例中创建一次产品类型，然后将包复制到其他服务器以节省时间，但通过代码执行此操作的要点如下：

```
 //Put user code to initialize the page here
    Ektron.Cms.Commerce.ProductTypeApi ptapi = new Ektron.Cms.Commerce.ProductTypeApi();
    Ektron.Cms.Commerce.ProductTypeData ptdata = new Ektron.Cms.Commerce.ProductTypeData();
    ptdata.Title = "Title of Product Type";
    //Define additional attributes and properties to your new product type below
    //ptdata.
    ptapi.Add(ptdata);

    //Now that your product type is created assign it to a folder (Automatically giving admin access to create)
    Ektron.Cms.Framework.Organization.FolderManager fmanager = new Ektron.Cms.Framework.Organization.FolderManager(Ektron.Cms.Framework.ApiAccessMode.Admin);
    Ektron.Cms.FolderData fdata = new Ektron.Cms.FolderData();
    Ektron.Cms.Content.EkContent ekcontent = new Ektron.Cms.Content.EkContent();

    long idofproducttype = 5;

    Ektron.Cms.XmlConfigData xmlconfig = ekcontent.GetXmlConfigurationData(idofproducttype);
    fdata.Name = "Catalog Name";
    fdata.Type = Ektron.Cms.Common.EkEnumeration.FolderType.Catalog;
    fdata.XmlConfiguration[0] = xmlconfig;
    fmanager.Add(fdata); 
```

# clojure - 如何从描述为 defrecords 的数据中推断出 defrecord 的格式？

> ID：11262850
> 
> 赞同：2
> 
> 时间：2012-06-29T13:37:58.677
> 
> 标签：clojure, xml-parsing

data.xml/parse 的文档说

*数据以 defrecords 的形式返回，并且可以使用普通的 clojure 数据结构函数进行操作*。

是否可以手动或以编程方式推断这些 defrecord 的结构，如果可以，如何推断？

这是文档中的示例，有些压缩：

```
(let [input-xml (java.io.StringReader. 
                 "<?xml version=\"1.0\" encoding=\"UTF-8\"?>
                 <foo><bar><baz>The baz value</baz></bar></foo>")]
  (parse input-xml))

#clojure.data.xml.Element{:tag :foo,
                      :attrs {},
                      :content 
(
#clojure.data.xml.Element{:tag :bar, 

:attrs {},
:content (#clojure.data.xml.Element{:tag :baz,
         :attrs {},
         :content ("The baz value")})})} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:11:54.847

一般来说，defrecords 可以作为映射来操作，因为它们本质上就是这样。

例如：

```
problems.core=> (defrecord Dog [name collarsize]) 
```

现在，我们已经定义了一个 defrecord 类型，一个 Dog。

```
problems.core=> (keys (Dog. "laly" 1))           
(:name :collarsize) 
```

很明显，我们都知道并喜欢在地图上操作的“键”功能运行良好。

但更进一步，我们发现 defrecord 确实是一张地图：

```
problems.core=> (map? (Dog. "laly" 1))           
true 
```

那么——为什么要在一张简单的地图上大惊小怪呢？因为，由于 xml 具有明确定义的结构，因此我们可以在返回的每个 defrecord 中包含一些保证键是有意义的。特别是，每个 defrecord 元素都有“:tag、:attrs 和:content”。为了确认，您可以注意到这些常量 defrecord 属性始终存在于使用 clojure 解析 xml 的在线教程中（即[http://www.gettingclojure.com/cookbook:xml-html](http://www.gettingclojure.com/cookbook:xml-html)）。

# router - 显示默认路由器页面的无 IP 域

> ID：11262851
> 
> 赞同：0
> 
> 时间：2012-06-29T13:37:59.813
> 
> 标签：router, nat

我已经使用 no-ip.com 为我的动态 IP 服务器创建了一个域。现在，当我尝试访问此域时，它显示默认路由器页面。

我试图从不同的网络以及不同的计算机访问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:40:16.547

首先，我会避免把那个地址放在这里。其次，您需要为 web/http 设置端口转发（端口 80）并禁用路由器的管理控制台以进行外部访问（或至少更改端口）。

# c# - 如何更改隐藏面板上的 ComboBox.Text？

> ID：11262858
> 
> 赞同：0
> 
> 时间：2012-06-29T13:38:30.987
> 
> 标签：c#, winforms, combobox

ComboBox1 位于隐藏面板 (panelSky)

```
ComboBox1.Text = "323";
panelSky.Visible = true; // combo doesn't have text "323' 
```

请问是什么原因？
如果面板可见，我可以将 comboText 更改为“323”，无论“323”是否在项目列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:44:31.490

也许组合类型（即 DropDownStyle）不合适......

尝试`Combo1.Items.Add("323")`改用，然后将索引设置为 0（第一项）

```
Combo1.SelectedIndex = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:08:24.487

如果我理解正确 Combox1 住在 Type Panel 的容器中

所以下面的代码可以解决问题

```
 if (comboBox1.Parent.Visible)
        {
            comboBox1.Text = "323";
        } 
```

**更新：在对您的场景有更多了解之后**

button1 位于可见的 Panel1 中，combox1 位于不可见的 Panel2 中

```
 private void button1_Click(object sender, EventArgs e)
    {
        if (comboBox1.Parent.Visible)
        {
            comboBox1.Text = "323";
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:21:59.957

我对你的场景做了一个小测试。我创建了一个`winforms`带有面板和`combobox`. 在表单加载时，我将面板的可见性设置为 false 并将其设置`combobox`为`"323"`，然后将面板的可见性设置为 true 并且`"323"`仍然存在。这就是我所做的：

```
pnlSky.Visible = false;
comboBox1.Text = "323";
pnlSky.Visible = true; 
```

在不可见`combobox`的情况下设置值时，您的标记或代码中一定存在导致问题的内容。`panel`您可以发布标记以及设置值之前和之后发生的代码`combobox`吗？

根据您`@HatSoft`对更新`combobox`from `button`another的评论`panel`，我运行了以下代码，它仍然更新了隐藏的`combobox`

```
 private void button1_Click(object sender, EventArgs e)
 {
     combobox1.Text = "323";
     pnlSky.Visible = true;
 } 
```

# ruby - 帕德里诺没有看到 SCSS

> ID：11262859
> 
> 赞同：2
> 
> 时间：2012-06-29T13:38:39.507
> 
> 标签：ruby, sass, padrino

宝石文件：

```
# Component requirements
gem 'bcrypt-ruby', :require => "bcrypt"
gem 'sass'
gem 'haml'
gem 'coffee-script'
gem 'activerecord', :require => "active_record"
gem 'sqlite3'
# Test requirements
# Padrino Stable Gem
gem 'padrino', '0.10.7' 
```

应用程序.haml：

```
= stylesheet_link_tag 'reset'
= stylesheet_link_tag 'application' 
```

样式表位于 public/stylesheets/application.scss

帕德里诺开始...

当我刷新页面终端时写：

```
DEBUG -      GET (0.0009ms) /stylesheets/application.css?1340975740 - 404 Not Found
[2012-06-29 17:15:40] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T23:18:05.183

我的帕德里诺版本是 0.11.2

我使用“-c scss”选项创建一个项目，如

```
padrino-gen project mainsystem -a mysql -d datamapper -t rspec -s jquery -e haml -c scss -m mocha 
```

我的 Gemfile 中有一行“gem 'sass'”，还有一个文件**lib/scss_init.rb**这样

```
module ScssInitializer
  def self.registered(app)
    # Enables support for SCSS template reloading in rack applications.
    # See http://nex-3.com/posts/88-sass-supports-rack for more details.
    # Store SCSS files (by default) within 'app/stylesheets'
    require 'sass/plugin/rack'
    Sass::Plugin.options[:syntax] = :scss
    Sass::Plugin.options[:template_location] = Padrino.root("app/stylesheets")
    Sass::Plugin.options[:css_location] = Padrino.root("public/stylesheets")
    app.use Sass::Plugin::Rack
  end
end 
```

我把**app/stylesheets/foo.scss**和访问到 localhost:3000/stylesheets/foo.css，生成了**public/stylesheets/default.css**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-21T14:46:23.077

对于 Padrino v. 0.13.1 有点不同

我创建了文件**config/initializers/sass.rb**就像在 smokycat 的回答中一样。

```
module ScssInitializer
  def self.registered(app)
    require 'sass/plugin/rack'
    Sass::Plugin.options[:syntax] = :scss
    Sass::Plugin.options[:template_location] = Padrino.root("app/stylesheets")
    Sass::Plugin.options[:css_location] = Padrino.root("public/stylesheets")
    app.use Sass::Plugin::Rack
  end
end 
```

但我仍然遇到了一些问题，例如：

```
ERROR -  NameError - uninitialized constant YourAppName::App::SassInitializer:
  /Users/user/your_app/join/app/app.rb:3:in `<class:App>'
ERROR -  NameError - uninitialized constant YourAppName::App::SassInitializer:
  /Users/user/your_app/join/app/app.rb:3:in `<class:App>' 
```

我发现您必须添加到 **config/boot.rb**：

```
Padrino.dependency_paths.unshift Padrino.root('config/initializers/*.rb') 
```

之后 sass 与 padrino 合作

# svn - 如何使用 SVN CLI 和/或 SVNKit 列出所有未版本控制的文件？

> ID：11262860
> 
> 赞同：1
> 
> 时间：2012-06-29T13:38:41.710
> 
> 标签：svn, svnkit

我试图在我的 SVN 工作副本中列出每个未版本控制的文件，无论它们的目录深度如何。让我从命令行上的一个场景开始——我的最终目标是使用 SVNKit 来做到这一点。

如果我在我的主目录中运行以下命令，

```
svnadmin create svnrepo
svn mkdir file:///home/foobar/svnrepo/myproj -m "New proj"
svn co file:///home/foobar/svnrepo/myproj
cd myproj
mkdir -p trunk/path/to/new/folder
touch trunk/path/to/new/folder/file.txt
svn status 
```

我看到以下输出，

```
?       trunk 
```

我想看到的是`file.txt`在列表中。我知道如果我添加`trunk`，那么所有文件都会显示出来，但在我的场景中我不能这样做。

在 SVNKit 我打电话给`getStatusClient().doStatus( new File(myWorkingCopy), SVNRevision.HEAD, SVNDepth.Infinity, false, true, false, false, handler, null)`. 我的实现`handler`和`ISVNStatusHandler`方法只看到未版本化。大概如预期的那样。`ISVNEventHandler``handleStatus()``trunk`

有谁知道是否有可能（或如何）通过使用 SVNKit 查询我的工作副本根目录的状态来获取每个未版本化文件的列表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:54:40.640

我很确定纯 SVNKit 功能 (*) 不可能做到这一点。相反，当您遇到未版本化的目录时，您需要自己进行未版本化的递归。

(*) 看看`SVNStatusEditor17.getDirStatus`：在`for(String name : allChildren)`循环中，如果是版本化目录 ( `nodeInfo != null`)，则存在递归。但是，如果`sendUnversioned`没有。

# maven - 如何在不使用依赖项的情况下在命令行下载 Maven 工件：get 或 maven-download-plugin？

> ID：11262861
> 
> 赞同：33
> 
> 时间：2012-06-29T13:38:43.743
> 
> 标签：maven, maven-plugin, maven-3

我想在命令行下载一个工件及其依赖项。IE

```
mvn [some plugin]:[goal] -DartifactId=[artifactId] -DgroupId=[groupId] -Dversion=[version] 
```

我试过 mvn dependency:get 但这似乎需要一个远程存储库列表。我希望 mvn 使用 settings.xml 中已经指定的内容

我也尝试过[maven-download-plugin](http://code.google.com/p/maven-download-plugin/)但这似乎无法正常工作（它尝试下载 xerces-impl 作为 ant 的传递依赖项但未能解决它。xerces-impl 和 ant 都不是我的工件的依赖项）。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-09-11T19:56:06.093

目标在`copy`这里更合适，它还允许您指定输出目录（在`get`目标中已弃用）：

`mvn org.apache.maven.plugins:maven-dependency-plugin:2.8:copy -Dartifact=groupId:artifactId:version[:packaging][:classifier] -DoutputDirectory=[target] -Dmdep.useBaseVersion=true`

`mdep.useBaseVersion=true`将从快照构建中删除时间戳。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-29T16:08:46.203

尝试使用最新版本的依赖：get，它对我有用

```
mvn org.apache.maven.plugins:maven-dependency-plugin:2.4:get -DartifactId=[artifactId] -DgroupId=[groupId] -Dversion=[version] 
```

为我工作

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-06T11:25:12.493

将 TestNG 6.9.4 版下载到本地 ~/.m2/repository 的示例（使用 maven-dependency-plugin:get）：

```
mvn org.apache.maven.plugins:maven-dependency-plugin:RELEASE:get \
-Dartifact=org.testng:testng:6.9.4:jar 
```

将 JUnit 4.11 版下载到当前工作目录的示例（使用 maven-dependency-plugin:copy）：

```
mvn org.apache.maven.plugins:maven-dependency-plugin:RELEASE:copy \
-Dartifact=junit:junit:4.11:jar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T14:03:14.407

最简单的解决方案是创建一个具有适当依赖项的简单 pom 并在该迷你项目上执行 mvn clean package ...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-27T09:52:56.087

这是我使用的方法，符合您的需要，但打字和脑细胞消耗更少：

`curl https://start.spring.io/starter.tgz | tar -xzvf -`

`-d dependencies=lombok` （顺便说一句，当你想要的依赖项列在像 lombok 这样的[启动器](https://start.spring.io/)上时，你可以添加。）

然后，在 中`vim pom.xml`，删除任何父项并修改依赖项之间的所有内容。您只需要填写组、工件和版本。

最后，`mvn package`. 它开始下载...

# android - 使用 FragmentTabsPager 兼容性库示例时，我应该从选项卡中替换哪些内容？

> ID：11262867
> 
> 赞同：0
> 
> 时间：2012-06-29T13:39:07.030
> 
> 标签：android, android-listview, android-fragments, android-viewpager

我会尽量保持简短和重点。

观察下面的截图： ![在此处输入图像描述](../Images/b3e522a16660a5032ad79021e9d67890.png)

如何实现一种方法，当我在此 ListView 上按下一个项目时，该片段被替换为具有相应播放器数据的新片段？我应该替换 FrameLayout tabcontent 的内容吗？如果是这样，我如何确保 ViewPager 仍然有效？

“基本活动”的 XML：

```
<TabHost
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent">

<LinearLayout
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TabWidget
        android:id="@android:id/tabs"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"/>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0"/>

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>

</LinearLayout>
</TabHost> 
```

这是 onActivityCreated ：

```
@Override
    public void onActivityCreated(Bundle savedInstance)
    {
        super.onActivityCreated(savedInstance);
        setHasOptionsMenu(true);

        listView = (ListView)getActivity().findViewById(R.id.lv_federations);
        listView.setVisibility(View.GONE);
        if (savedInstance == null)
        {
            new PullFederationDataTask().execute();

        }       

        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int position, long arg3) 
            {
                // Replace Fragment
            }
        });
    } 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:47:18.050

我不确定`onItemClickListener`在您的代码中替换 Fragment ，因为我正在努力解决同样的问题并且还没有找到合适的解决方案。

如果你通过扩展 a 来实现你的玩家列表`ListFragment`，你可以用一个新的片段替换当前片段，该片段使用[片段事务](http://developer.android.com/guide/components/fragments.html#Transactions)显示玩家的详细信息（或者你可以开始一个新的活动，但我将在这个答案中讨论片段事务） .

要替换片段，您可以在`onListItemClick`将单击列表项的 ID 作为片段构造函数的参数的方法中创建一个新片段：

```
@Override
public void onListItemClick (ListView l, View v, int position, long id) {

    // Here I assume that the fragment containing the player details
    // is called PlayerDetailFragment.
    // The id of the item that was clicked is passed to the fragment's constructor.
    Fragment newFragment = new PlayerDetailFragment(id);
    FragmentTransaction ft = getFragmentManager().beginTransaction();

    // Replace whatever is in the fragment_container view with this fragment,
    // and add the transaction to the back stack.
    // android.R.id.content refers to the id of the root ViewGroup.
    ft.replace(android.R.id.content, newFragment);
    ft.addToBackStack(null);

    // Commit the transaction
    ft.commit();    
} 
```

您可以使用 ListAdapter 的`getItemId()`方法来引用播放器的 ID。使用`ListView.setAdapter()`方法来使用你自己`ListAdapter`的`ListView`。`ListAdapter`负责维护支持此列表的数据并生成一个视图来表示该数据集中的项目。[本](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)教程介绍了如何编写自己`ArrayAdapter`的`ListView`.

在您的`ListAdapter`中，您覆盖该`getItemId()`方法并返回玩家的 ID。然后`PlayerDetailFragment`可以使用 id 从数据库中检索数据。

我没有使用 ViewPagers 的经验，所以对此我无能为力。

# maven - findbugs-maven-plugin 不显示错误

> ID：11262868
> 
> 赞同：1
> 
> 时间：2012-06-29T13:39:11.613
> 
> 标签：maven, findbugs

FindBugs Maven 插件不会创建错误报告 (target/findbugs.xml)。

我在构建部分的 pom.xml 中有以下几行：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>findbugs-maven-plugin</artifactId>
    <version>2.5</version>
    <executions>
    <execution>
    <phase>validate</phase>
        <goals>
            <goal>check</goal>
        </goals>
        </execution>
    </executions>
</plugin> 
```

在其他代码中，我有这个类：

```
public class ScrollingTextView extends TextView {

public ScrollingTextView(Context context, AttributeSet attrs,
        int defStyle) {
    super(context, attrs, defStyle);
    myFunc(null);

    }

public String myFunc(int number) {
    return number+1;
}
} 
```

我要么跑

```
mvn findbugs:findbugs 
```

或 mvn findbugs:check

我希望能发现该错误，但在目标目录中没有创建任何内容。构建成功。你能建议如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:31:00.333

尝试将配置从 POM 的构建部分移动到报告部分。[使用文档](http://mojo.codehaus.org/findbugs-maven-plugin/usage.html)中的示例以这种方式显示配置。

`mvn site`应该生成报告。根据文档，`mvn findbugs:findbugs`“运行站点插件时生成 FindBugs 报告。”

如果您想在发现错误时使构建失败，请使用 XML 报告，尝试`mvn findbugs:check`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:47:58.863

根据文档，如果存在违规，检查目标是使构建失败，但您必须先运行创建。除此之外，findbugs 的生成是属于站点 lyfecycle 的报告。

```
 <reporting>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>findbugs-maven-plugin</artifactId>
        <version>2.5</version>
      </plugin>
    </plugins>
  </reporting> 
```

# android - 应用退出时如何在后台执行某些操作

> ID：11262872
> 
> 赞同：0
> 
> 时间：2012-06-29T13:39:34.437
> 
> 标签：android

我已经构建了一个应用程序，将用户输入的日期存储在一个数组中。现在我想在我的应用程序的背景上执行一些操作。在后台，我想要一个检查，将设备的当前日期与存储在数组中的数据进行比较。找到匹配项后，我想打开一个对话框。应用程序退出时是否可以在后台执行某些任务？

请帮我举个例子，我不知道这个话题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:42:11.217

最好的解决方案是使用服务。有关这方面的更多信息，您可以阅读文档：

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

一个很好的教程是这样的：

[http://marakana.com/forums/android/examples/60.html](http://marakana.com/forums/android/examples/60.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:47:42.753

如果您只需要在某个日期弹出窗口，则不需要服务（这只会耗尽电池电量并且让用户感到不舒服），但您可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)

您可以在此处找到许多示例[AlarmManager 示例](https://www.google.it/search?aq=f&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8&q=alarm%20manager#hl=it&gs_nf=1&pq=android%20alarm%20manager&cp=23&gs_id=1o&xhr=t&q=android%20alarmmanager%20example&pf=p&sclient=psy-ab&oq=android%20alarm%20manager%20e&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=90a3455dfedf075f&biw=1920&bih=1075)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:45:33.863

`onKeyDown()`在 Android 1.x 或`onBackPressed()`Android 2.x 中重写 以处理 Backpressed，您可以在应用退出时启动[IntentService](http://developer.android.com/reference/android/app/IntentService.html)以在后台执行某些任务。

参见 android-fundamentals-intentservice-basics

[http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/)

[用于处理背压](https://stackoverflow.com/questions/3558385/android-onbackpressed-not-working)

[Android - onBackPressed() 不起作用](https://stackoverflow.com/questions/3558385/android-onbackpressed-not-working)

使用[IntentSerice](http://developer.android.com/reference/android/app/IntentService.html)在后台执行任务，因为正如[文档](http://developer.android.com/reference/android/app/IntentService.html)所说：

> IntentService 是按需处理异步请求（表示为 Intent）的服务的基类。客户端通过 startService(Intent) 调用发送请求；该服务根据需要启动，使用工作线程依次处理每个 Intent，并在工作结束时自行停止。

# opengl - GLUT 窗口未在 Eclipse 中显示

> ID：11262875
> 
> 赞同：1
> 
> 时间：2012-06-29T13:39:43.103
> 
> 标签：opengl, window, glut

我是初学者，我按照在线教程下载 GLUT 并安装 MinGW 等。

该教程为我提供了一些示例代码，但是当我运行它时，什么也没有出现。我已经构建了项目 (Ctrl-B) 并确保所有库都已导入。

```
#include <windows.h>
#include <GL/glut.h>

const int WIDTH = 600;
const int HEIGHT = 480;

/* Prototypes */
void init();
void display();

/* Definitions */

/* Initializes the OpenGL state */
void init() {
    glClearColor(1.0, 0.0, 0.0, 1.0 ); /* Set the clear color */
}

/* Displays a black clear screen */
void display() {
    glClear( GL_COLOR_BUFFER_BIT ); /* Clear the screen with the clear color */
    glutSwapBuffers(); /* Double buffering */
}

/* The main function */
int main( int argc, char *argv[] ) {
    /* Glut setup function calls */
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_DOUBLE | GLUT_RGB ); /* Use double buffering and RGB            
        colors */
    glutInitWindowPosition( 100, 100 );
    glutInitWindowSize( WIDTH, HEIGHT );
    glutCreateWindow(argv[0]);
    init();
    glutDisplayFunc( display );  /* Call back display function */
    glutMainLoop(); /* Continue drawing the scene */
    return 0;
} 
```

我按下运行，它说“正在启动 GLUTDemo.exe”，然后什么也没有发生。

# mvvm-light - 已在使用 MVVMLightV4 的混合中注册错误

> ID：11262878
> 
> 赞同：7
> 
> 时间：2012-06-29T13:40:06.083
> 
> 标签：mvvm-light

我使用 MVVMLight 已经有一段时间了，并且自从 V4 首次推出以来就开始使用它。

然而，一个问题一直困扰着我，我一直无法解决。

如果我使用 MVVM 4 项目模板创建项目，则解决方案构建良好、运行良好并且在混合中运行良好。

然而

如果我开始我自己的项目并使用 Nuget 安装 MVVMLight V4，只要我添加一个基本的 DataService 并在 ViewModelLocator 模板中启用注释掉的代码并在 Blend 中打开项目，我就会收到一个错误：

“课程已注册”

只是想弄清楚这个非常烦人的错误。

为了清楚起见，DataService 中的内容并不重要，因为即使使用只有 1 个空函数的接口和服务也会产生相同的错误

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-02T19:08:29.467

出于某种原因，Blend 可能会多次初始化 ViewModelLocator。

所以你需要添加一个检查：

```
if (!SimpleIoc.Default.IsRegistered<ISomeService>())
    SimpleIoc.Default.Register<ISomeService, SomeService>(); 
```

# php - 使用ajax将多个变量传递给其他页面

> ID：11262881
> 
> 赞同：-2
> 
> 时间：2012-06-29T13:40:16.037
> 
> 标签：php, javascript, jquery, ajax

我在一个网站上工作，我必须在页面上重置密码脚本。为此，我使用 ajax 传递旧密码和新密码，并希望在同一页面上获得结果

我的重置页面代码是：-

```
<label>Enter current Password:</label><input id="cur_password" type="password" /><br/>
<label>Enter New Password:</label><input id="new_password" type="password" /><br/>
<label>Confirm New Password:</label><input id="confirm_password" type="password" /><br/>            
<a id="Reset_pass" class="submitButtons" value="Submit">Submit</a> 
```

我处理这个请求的java脚本页面是：-

```
$('#Reset_pass').click(function(){
var cur_password = $('#cur_password').val();
var new_password = $('#new_password').val();
var confirm_password = $('#confirm_password').val();
$('#current_password').parent().append("<img src=\"includes/ajaxLoader.gif\"");
$.ajax({
    url: 'ajaxServer.php?request=Reset_password',
    type: 'POST',
    data: {'cur_password': cur_password,'new_password': new_password,'confirm_password': confirm_password},
    dataType: "html",
    success: function(result){
        $('#current_password').parent().children('img').remove();
        $('#current_password').parent().children('span.updateResults').remove();
        $('#current_password').parent().append(result);
    }
}); 
 }); 
```

和 java 脚本将值传递给页面名称 ajaxServer 作为：-

```
 if($request == "Reset_password")
  {
$db_name = "user_mgmt";
include "connections/Con.php";//for database connection
$temp=$_SESSION['username'];
$result = mysql_query("select Password from register where Unique_id=$temp");
$row = mysql_fetch_array($result);
$status=strcmp('$_POST[cur_password]','$row[0]');
$confirm_pass=strcmp('$_POST[new_password]','$_POST[confirm_password]');
if(($status==0)&&($confirm_pass==0))
{   
    $query = mysql_query("UPDATE register SET Password='$_POST[new_password]' where Unique_id='$temp'");
}
?>
<span class="updateResults">
<?php
if($query){
    echo "Your Password is reset";
}
else{
    echo "Unable ";
}
?>
</span>
} 
```

但是java脚本代码中有错误..为什么它无法将信息发送到ajaxServer页面...请帮助我找到错误...提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:43:45.653

分配错误属性，而不仅仅是成功，这样您就可以捕获错误。

# iphone - NSURL 到 NSString

> ID：11262893
> 
> 赞同：4
> 
> 时间：2012-06-29T13:41:32.743
> 
> 标签：iphone, ios, ipad, ios5

我使用此函数从字符串中获取 URL，但我怎样才能将其取回？

```
- (NSString *)urlEncodeUsingEncoding:(NSStringEncoding)encoding forString:(NSString *)string {
    string = (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes(NULL, (__bridge CFStringRef)string, NULL, (CFStringRef)@"!*'\"();:@&=+$,/?%#[]% ", CFStringConvertNSStringEncodingToEncoding(encoding));
    return string;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T02:25:21.200

```
[string stringByReplacingPercentEscapesUsingEncoding:NSUTF8Encoding]; 
```

顺便提一句。如果`NSURL`用于文件 url，请务必使用`[url path]`来获取未转义的路径字符串，而不是通过`[url absoluteString]`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T13:43:34.770

采用

```
NSString *urlString = [url absoluteString]; 
```

以此目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:59:02.807

使用此代码..

```
NSError* error = nil;
NSString* text = [NSString stringWithContentsOfURL:your_url encoding:NSASCIIStringEncoding error:&error]; 
```

这可能会帮助你

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-27T15:26:58.087

我自己找到了答案：

```
- (NSString *)decodedURLString {
    NSString *string = (__bridge NSString*)CFURLCreateStringByReplacingPercentEscapesUsingEncoding(kCFAllocatorDefault,
                                                                                          (CFStringRef)self,
                                                                                          CFSTR(""),
                                                                                          CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));

    return string;
} 
```

和编码：

```
- (NSString *)encodedURLString {
    NSString *string = (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault,
                                                                           (CFStringRef)self,
                                                                           NULL,
                                                                           CFSTR(":/=,!$&'()*+;[]@#?"),
                                                                           CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));

    return string;
} 
```

# web-services - WS-CDL 的实际使用

> ID：11262900
> 
> 赞同：2
> 
> 时间：2012-06-29T13:41:52.897
> 
> 标签：web-services, architecture

我无法完全理解 WS-CDL 的使用。与 BPEL 不同，它不是一种可执行语言。那么，它实际上是如何使用的呢？

搜索*谷*歌（*所有谷歌万岁*）并没有真正产生任何有形的东西，只有描述非常简单交互的 WS-CDL 示例。我没有找到在 WS-CDL 上运行的工具或引擎的参考资料。

如果要对 BPEL 和服务编排进行相同的搜索，那么我们会得到一些东西，我们会得到具体的示例和引擎/工具。另外，服务编排非常具体。无需参考 WS-* 标准即可查看现实生活中的编排。这是我在现实生活中见过的唯一一种外部定义的服务组合（基于 WS-* 等等。）

所以，我是出于真正的好奇而问这个问题：WS-CDL 的实际用例场景是什么？您对 WS-CDL 的体验（好的、坏的和丑陋的）是什么？

====== 编辑 2012 年 7 月 2 日 ======

为了跟进我接受的答案（感谢 user1496147），我找到了以下论文（链接自编排与编排[博客文章](http://weblogs.java.net/blog/johnreynolds/archive/2006/01/service_orchest.html)）：

[Barros, Dumas & Oak “A Critical Overview of WS-CDL”，BPTrends，2005 年 3 月](http://www.java.net/external?url=http://www.bptrends.com/publicationfiles/03-05%20WP%20WS-CDL%20Barros%20et%20al.pdfhttp://www.java.net/external?url=http://www.bptrends.com/publicationfiles/03-05%20WP%20WS-CDL%20Barros%20et%20al.pdf)

值得注意的是，在其结束语中的以下段落：

> 归根结底，WS-CDL 标准化工作在 SOA 的发展过程中来得太早了。确实，WS-CDL 已尝试同时具有开创性并建立共识。在这方面，将 WS-CDL 的开发与 BPEL 的开发进行比较是很有见地的。BPEL 源于两个来源，WSFL 和 XLang，它们源自现有工具（即 MQSeries Workflow 和 BizTalk）支持的语言。此外，连同 BPEL 的初稿一起发布了原型实现。相反，WS-CDL 是在没有任何先前实现的情况下开发的，并且不（直接）从实现支持的任何语言派生。

缺少工具是我对 WS-CDL 状态的第一个暗示，并且会解释（至少部分地）WS-CDL 是如何最终失败的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T13:30:53.803

你是对的，它不是一种可执行语言——它是一种设计（或架构）工件，用于指定分布式参与者之间发生的交互。将其视为您的 SOA 的高级蓝图，而不是被执行的东西。

它是如何使用的？

与任何设计工件一样，它可用于指导实现的开发，甚至为您的服务生成初始模板。然而，它也可以用于测试/验证目的，以确保实现的系统实际上符合编排，因为您有一个机器可读的描述，说明您的业务事务应如何在分布式系统中执行。

当您进行谷歌搜索时，您找不到太多的原因是推荐（w3c 术语）从未在供应商中获得任何采用。

除了缺乏厂商支持之外，它还有两个进一步的限制，一是它没有图形语法，二是它没有兼容的端点（行为）描述，这将更容易理解之间的映射。全局行为（编排）和每个服务端点的行为。如果 WS-CDL 和 WS-BPEL 社区能够一起工作（一个是 W3C，另一个是 OASIS），那么这个问题可能已经得到解决。

不过好消息是 BPMN2 引入了一个编排模型，它与 BPMN2 流程模型兼容，并拥有自己的图形语法。

对 BPMN2 编排的工具支持处于早期阶段。Eclipse 中有一个支持编排模型的 BPMN2 建模器，我正在开发工具来使用编排来帮助生成工件，并在此处验证分布式系统的运行时执行：[http ://www.jboss.org/savara](http://www.jboss.org/savara)

希望有帮助。

# asp.net-mvc - 如何通过mvc 3中的提交按钮提交多个输入字段？

> ID：11262906
> 
> 赞同：-1
> 
> 时间：2012-06-29T13:42:09.760
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

通常，当您有多个输入字段时，它们都与一个 id 相关联。所以从视图映射到数据库是相当简单的。但是，在我的情况下，我有多个输入（例如，一行上有 2 个文本框，另一行上有一个下拉列表和文本框），每个输入都有一个 id。我希望能够按下提交按钮并正确更新所有内容。

注意：formRow 是一个 ViewModel。

一些示例代码：

```
<div class="ctrl">
                &nbsp;
                @{
                    foreach (var rowInput in formRow.RowInput)
                    {  
                        switch (rowInput.RowCtrl.Type)
                        {
                            case "dropdown":
                                ; break;
                            case "text":
                               @Html.TextBoxFor(blah => rowInput.InputtedData) ; break;
                            case "radio":
                                ; break;
                            case "checkbox":
                                ; break;
                        }       
                    }
                }
            </div>
            <div class="done">
                <input id="@formRow.RowInput[0].InputtedDataID" type="button" value="button" />
            </div> 
```

实际的 HTML 源视图：

```
<div class="ctrl">
                &nbsp;
<input id="rowInput_InputtedData" name="rowInput.InputtedData" type="text" value="UP, UP, DOWN, DOWN, LEFT, LEFT, RIGHT, RIGHT, B, A, B, A, START" />            </div>
            <div class="done">
                <input id="2" type="button" value="button" />
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:30:32.750

我觉得您需要阅读一些 MVC3 基础知识。根据我的收集，您只是尝试提交表单数据以进行服务器端处理，而这对于 MVC3 来说非常简单。通常你会有一个控制器，它的动作能够返回一些 ActionResult，它通常是一个视图，可视化你创建的底层模型。在视图中，您可以使用 Html.BeginForm() 来构建基于此模型的表单。

然后提交按钮将发送一个 Post 到同一个控制器，然后发送到一个能够处理生成模型的 post 的操作。

[这篇博](http://blog.codeville.net/2007/11/20/aspnet-mvc-pipeline-lifecycle/)文很好地总结了你需要知道的最基本的部分：

*   从 Global.asax 添加一个 Route 对象，该对象表示您要捕获的特定 URL 模式并映射到控制器/操作
*   添加一个 Controller 子类，应调用其 [ControllerActions] 以响应请求，填充 ViewData
*   添加一个使用 ViewData 呈现一些 HTML 的视图模板

帖子的其余部分可能有趣也可能不有趣，具体取决于您想要获得的技术程度。

我建议看一些关于构建 MVC3 应用程序的基本介绍。尝试完成这个：[http ://www.asp.net/mvc/tutorials/older-versions/javascript/creating-a-mvc-3-application-with-razor-and-unobtrusive-javascript](http://www.asp.net/mvc/tutorials/older-versions/javascript/creating-a-mvc-3-application-with-razor-and-unobtrusive-javascript)

# javascript - SCRIPT1002：语法错误，第 1 行字符 6

> ID：11262911
> 
> 赞同：11
> 
> 时间：2012-06-29T13:42:43.693
> 
> 标签：javascript, html, internet-explorer, syntax

在 IE 开发人员 (F12) 控制台中，我设法让我的页面正常运行；除了一个！

> SCRIPT1002：mypage.php 语法错误
> ，第 1 行字符 6

我正在使用 IE9。这是什么问题？

这是我的代码：

```
<!DOCTYPE html>
<head>
  <script type='text/javascript' src='/files/jquery-1.7.2.min.js'></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $("#donateButton").click(function() {
        alert('hey');
      });
    });
  </script>
</head>
<body>
  <a href="javascript:void();" id="donateButton">asdsadasd</a>
</body> 
```

当我单击时`#donateButton`会产生错误。但是，当我更改`javascript:void()`为`#`then 时，不再发生错误。为什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-29T14:18:59.257

> “等等……IE9不喜欢`<a href="javascript:void();" id="donateButton">`吗？？看来这就是问题所在……？”
> — [Chud37 的评论](https://stackoverflow.com/questions/11262911/ie-syntax-error-line-1-character-6/11263324#comment14807046_11263324)

是的，**这**就是问题所在。[`void`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/void)是一个**运算符**，**而不是一个函数**。使用或。`javascript:void 0`_ 更好的是，添加到您的功能：`javascript:void(0)``#`[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)

```
$('#donateButton').click(function(ev) {
    ev.preventDefault();
    alert('hello');
}); 
```

# ruby-on-rails - 对 sidekiq 工作人员使用上帝监控

> ID：11262912
> 
> 赞同：2
> 
> 时间：2012-06-29T13:42:46.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, god, sidekiq

我一直在寻找如何使用上帝监控系统启动sidekiq的配置。下面是我用来启动 sidekiq 的神文件。

```
rails_env = ENV['RAILS_ENV'] || "production"
rails_root = ENV['RAILS_ROOT'] || "/home/ubuntu/Projects/app"

God.watch do |w|
  w.dir      = "#{rails_root}"
  w.name     = "sidekiq"
  w.interval = 30.seconds
  w.env      = {"RAILS_ENV" => rails_env}
  w.interval = 30.seconds
  w.start = "/home/ubuntu/.rvm/gems/ruby-1.9.3-p0/bin/ruby -f #{rails_root}/ sidekiq -c 25 -q worker,15 -q distributor,5"

  w.uid = 'ubuntu'

  # determine the state on startup
  w.transition(:init, { true => :up, false => :start }) do |on|
    on.condition(:process_running) do |c|
      c.running = true
    end
  end

  # determine when process has finished starting
  w.transition([:start, :restart], :up) do |on|
    on.condition(:process_running) do |c|
      c.running = true
      c.interval = 5.seconds
    end

    # failsafe
    on.condition(:tries) do |c|
      c.times = 5
      c.transition = :start
      c.interval = 5.seconds
    end
  end

  # start if process is not running
  w.transition(:up, :start) do |on|
    on.condition(:process_running) do |c|
      c.running = false
    end
  end
end 
```

当我使用命令运行此脚本时`god`，上帝服务器“显示进程未运行”，就好像什么都没发生一样。我相信我没有`w.start`正确调用sidekiq，

我`bundle exec sidekiq -c 25 -q worker,15 -q distributor,5`在开发模式下使用，它工作正常。

我错过了什么？是否有不同的方式来部署 sidekiq 工作人员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T10:06:51.623

对我来说解决“进程未运行”问题的关键是正确定义`dir`属性：

```
w.dir = "#{Rails.root}" 
```

这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:43:43.370

I faced similar issues. Specifying queue and concurrency settings under sidekiq.yml solved it for me. In your god start,

`sidekiq -e #{env} -C #{root}/config/sidekiq.yml`

The Sidekiq Github has an example of the yml config. It goes something like:

```
---
:concurrency: 25
:queues:
  - [a, 5]
  - [b, 3]
  - [c, 2]
  - [default, 3] 
```

I hope you have already found a solution though.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T16:00:34.253

我刚刚使用您的代码部署了我自己的 God/sidekiq 设置，而这个更改让它对我有用。我将您的替换`w.start`为：

`w.start = "bundle exec sidekiq -q release,1 -q artist,2 -q artists,3 -c 20"`

（当然，这些队列只是我碰巧使用的队列，并不相关）

# ios - 如何使用 ASIHTTPRequest 发送 HTTP GET 请求

> ID：11262913
> 
> 赞同：0
> 
> 时间：2012-06-29T13:42:47.297
> 
> 标签：ios, asihttprequest

我想使用 ASIHTTP 库来发送请求，例如：

```
HTTP GET http://a.com/?user=abc&pass=123 
```

我不想自己构造字符串，因为我认为 ASI HTTP 库已经解决了一些 UTF-8 编码问题，我只能找到要使用的 API：

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:engine.userID forKey:@"from_id"]; 
```

但我不能使用 POST，因为服务器不支持它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T22:56:12.897

```
 NSURL *url = [NSURL URLWithString:@"http://www.myweb.com?Id=1&name=xyz"];
    __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setRequestMethod:@"GET"];
[request startAsynchronous]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T14:07:39.383

```
NSString *profileURL = [NSString stringWithFormat:@"http://www.bs.com"];

ASIFormDataRequest * request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:profileURL]];
[request setRequestMethod:@"POST"]; // or GET
request.delegate = self;
[request setPostValue:[self getJSONPostData] forKey:@"json"];
[request startAsynchronous]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-22T21:25:35.030

接受的答案不起作用。

以下是使用 ASIHTTP 将 GET 与查询一起使用所需执行的操作。
在原始问题的上下文中，这是工作代码。

```
- (void)_getDataFor:(NSURL *)url withHandler:(void(^)(ASIHTTPRequest *))handler
   {
       NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://a.com/?user=%@&pass=%@", @"user", @"pass"]];
      __weak ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
      [request setRequestMethod:@"GET"];
      [request setCompletedBlock:handler];
      [request startAsynchronous]; 
   } 
```

您必须创建一个“处理程序”块来处理响应。此代码是 ARC 投诉。

# javascript - 检测 Facebook Like 按钮何时加载

> ID：11262914
> 
> 赞同：6
> 
> 时间：2012-06-29T13:42:52.040
> 
> 标签：javascript, jquery, html, facebook

您可能知道 Facebook Like 按钮的加载速度非常慢。

我试图弄清楚如何检测按钮何时完成加载并添加到网站。

原因是我显示加载动画，然后隐藏它并显示按钮，但我想在完成加载后显示按钮。

这可以做到吗？

提前谢谢大家！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-30T03:14:25.357

可以[订阅](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)xfbml.render 事件以在渲染完成时得到通知，该事件在每个页面解析中只触发一次（不仅适用于 xfbml，也适用于新的 html5 技巧）。如果`xfbml : true`.

```
window.fbAsyncInit = function() {
  FB.init({
    ...
    xfbml : true
  });

  FB.Event.subscribe('xfbml.render', function(response) {
      alert('OMG... All Facebook sociaal plugins on page rendereed.... finally!');
  });
};

// And load the SDK Asynchronously here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:55:07.600

我很确定 facebook Like 按钮包含在 iFrame 中。如果是，您可以找到一些东西来引用该 iFrame 并使用 ->

```
$('iframe[class/id/name=whatever]').load(function(){ 
  //This element is loaded 
}); 
```

**编辑**

根据您的具体需求，我们可以挂钩到我评论中提到的任何属性，我只是选择`frameborder="0"`挂钩。

```
$('iframe[frameborder=0]').load(function(){
  alert("loaded.");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T19:39:57.610

如果您要动态添加 Facebook 小部件并因此手动调用[FB.XFBML.parse](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)，那么您可以简单地指定一个在渲染完成时调用的回调函数。

# xml - 根据 xsd 中的父母年龄验证孩子的年龄

> ID：11262915
> 
> 赞同：1
> 
> 时间：2012-06-29T13:42:55.820
> 
> 标签：xml, xsd

我有一个像下面这样的 xml

```
<parents>
  <mother name="MMM" age="55" />
  <children>
      <child name="CCC" gender="male" age="25" />
  </children>
</parents> 
```

要验证母亲的年龄或孩子的年龄，我们可以像下面这样编写 xsd

```
<xs:element name="mother">
    <xs:complexType>
        <xs:attribute name="name" type="xs:string"/>
        <xs:attribute name="age">
            <xs:simpleType>
                <xs:restriction base="xs:integer">
                <xs:minInclusive value="0"/>
                <xs:maxInclusive value="120"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute>
    </xs:complexType>
</xs:element> 
```

但是如果我要验证孩子的年龄，哪个不应该超过母亲的年龄？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:23:30.537

来自[维基](http://en.wikipedia.org/wiki/XML_Schema_%28W3C%29)：

> XSD 没有提供任何工具来说明一个属性的值或存在取决于其他属性的值或存在（所谓的共现约束）。

这正是您想要的：根据母亲年龄的值来限制孩子的年龄值。因此，不幸的是，不可能使用 XML Schema 1.0。

但是，可以通过类似这样的方式使用 XML Schema 1.1（非常粗略的示例，只是为了展示这个概念）：

```
<xs:assert test="@age < ../../mother[@age]"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:26:01.067

使用带有断言的 XSD 1.1。XSD 1.1 目前在 Saxon 和 Xerces 中实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:16:37.290

据我所知，你不能用常规的 xsd 限制来做到这一点。你必须使用像 schematron 这样的东西来构建它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T14:41:39.837

我已经有一段时间没有使用 XSD，但我记得使用过的其中一件事是您可以添加的功能。

这个页面应该给你一些提示，它的介绍有点难看，但应该给你一个开始。

[http://msdn.microsoft.com/en-us/magazine/cc302079.aspx](http://msdn.microsoft.com/en-us/magazine/cc302079.aspx)

这个链接也很好。

[http://our.umbraco.org/wiki/reference/xslt/extend-your-xslt-with-custom-functions](http://our.umbraco.org/wiki/reference/xslt/extend-your-xslt-with-custom-functions)

# asp.net - 使用 Razor 的 Html.EditFor 时限制文本框中字符的长度

> ID：11262923
> 
> 赞同：7
> 
> 时间：2012-06-29T13:43:29.220
> 
> 标签：asp.net, html, asp.net-mvc-3, razor

我正在使用 MVC3 的 Razor 引擎生成视图并让以下代码行生成一个文本框

```
 @Html.EditorFor(model => model.AddressLine1) 
```

在相关模型中，我使用数据注释属性将可接受的字符数限制为 55：

```
[StringLength(55)]
public string  AddressLine1 { get; set; } 
```

然而，这允许用户输入更长的地址，然后在他们尝试提交表单时通过验证消息被告知。如何将文本框限制为 55 个字符，以便用户无法输入更多内容？

如果我自己生成文本框，我会使用 maxlength 属性作为输入类型，但我不确定如何使用 Html.EditFor 方法获得相同的结果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T13:46:00.837

```
 @Html.TextBoxFor(model => model.AddressLine1, new {maxlength = 55}) 
```

> **maxlength**
> 如果 type 属性的值为 text、email、search、password、tel 或 url，则该属性指定用户可以输入的最大字符数（以 Unicode 码位表示）；对于其他控件类型，它被忽略。

你也可以在不改变 DOM 的情况下使用 jQuery：

```
$('#AddressLine1').keypress(function(){
    return this.value.length < 55
}) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-29T13:45:37.023

使用`maxlength`and a`TextBoxFor`代替`EditorFor`

`EditorFor`没有允许这样做的过载。

这对您来说可能更有趣： [来自 Asp.Net MVC 中 DataAnnotations StringLength 的文本框的 maxlength 属性](https://stackoverflow.com/questions/2386365/maxlength-attribute-of-a-text-box-from-the-dataannotations-stringlength-in-mvc2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-22T07:41:40.323

```
$('#AddressLine1').keypress(function(){
    return this.value.length < 55
}) 
```

此 jQuery 函数适用于 Web 浏览器，但在移动设备上不受支持，因此在创建每个人都可以访问的站点时，请考虑

# java - java - 如何使JTable上的左键单击动作适应Java中的右键单击？

> ID：11262925
> 
> 赞同：1
> 
> 时间：2012-06-29T13:43:37.347
> 
> 标签：java, swing, jtable, mouseleftbuttondown, jpopup

我有一个`JTable`我想左键单击并右键单击`JPopupMenu`它。通常通过左键单击 JTable，您可以选择一行。我想通过右键单击并显示弹出菜单来做同样的事情。 **有人知道怎么做这个吗？**

```
table.addMouseListener(new MouseAdapter() {
       @Override
       public void mouseClicked(MouseEvent e) {
           if (SwingUtilities.isRightMouseButton(e)) {
               //this line gives wrong result because table.getSelectedRow() stay alwase on the same value
               codeModel.setSelectedFileName(table.getValueAt(table.getSelectedRow(), 0).toString());
               JPopupMenu popup = createRightClickPopUp();
               popup.show(e.getComponent(), e.getX(), e.getY());
           }else{
               codeModel.setSelectedFileName(table.getValueAt(table.getSelectedRow(), 0).toString());
               codeTextArea.setText(codeModel.getCodeContents());
           }
       }
   }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T13:53:03.430

```
table.addMouseListener(new MouseAdapter() {
   @Override
   public void mouseClicked(MouseEvent e) { //or mouseReleased(MouseEvent e)
       if (SwingUtilities.isRightMouseButton(e)) {
           //-- select a row
           int idx = table.rowAtPoint(e.getPoint());
           table.getSelectionModel().setSelectionInterval(idx, idx);
           //---
           codeModel.setSelectedFileName(table.getValueAt(table.getSelectedRow(), 0).toString());
           JPopupMenu popup = createRightClickPopUp();
           popup.show(e.getComponent(), e.getX(), e.getY());
       }else{
           codeModel.setSelectedFileName(table.getValueAt(table.getSelectedRow(), 0).toString());
           codeTextArea.setText(codeModel.getCodeContents());
       }
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:47:05.127

*   请阅读我的问题[JTable with JPopupMenu](https://stackoverflow.com/questions/7423533/jtable-with-jpopupmenu)

*   最重要的是[ListSelectionModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)的类型

*   对您的问题来说是次要的，但是两个答案都是正确且很棒的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T13:51:45.843

您可以在鼠标侦听器中使用 JTable.rowAtPoint(event.getPoint()) 轻松确定单击的行。

# c - cuda：如何将主机数据复制到 3D cuda 数组并返回

> ID：11262928
> 
> 赞同：2
> 
> 时间：2012-06-29T13:43:46.490
> 
> 标签：c, multidimensional-array, cuda

“cuda c 编程指南”给出了使用 cuda 数组的示例。这些示例仅限于 2D。因此，对于 2D cuda 数组，我只需执行以下操作即可将主机数据复制到设备内存：

```
// Copy to device memory some data located at address h_data in host memory  
// cuInputArray is a 2D cuda array
cudaMemcpyToArray(cuInputArray, 0, 0, host_data, size_bytes, cudaMemcpyHostToDevice);
// with e.g. size_bytes := size_arr_x * size_arr_y * sizeof(float) 
```

我尝试了相同的方法，将 cuInputArray 作为 3D cuda 数组，但没有取得多大成功，出现无效参数错误。

那么如何将我的主机数据获取到设备内存并返回呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:18:49.957

为了将 3D 数据复制到 GPU 设备内存中，您需要执行以下操作：

1.  **分配**内存空间**`cudaMalloc3D`**
2.  **设置**输入参数**`cudaMemcpy3DParms`**
3.  **将**输入数据从主机复制到设备**`cudaMemcpy3D`**

然后，要将数据返回到主机：

1.  **设置**输出参数**`cudaMemcpy3DParms`**
2.  **将**输出数据从设备复制到主机**`cudaMemcpy3D`**

CUDA C Programming Guide 的 Chapter 3.2.2 Device Memory 有一个*代码示例，它分配一个宽×高×深的浮点值 3D 数组，并展示了如何在设备代码中循环遍历数组元素*。

CUDA SDK的`simpleTexture3D`示例也是一个很好的起点。

只是一个**建议**：准备您的代码以捕获 CUDA 错误并分析发生错误时发生的情况，因为您可能会发现一些错误。

# mvvm - MVVM 在 ViewModel 中复制模型属性

> ID：11262930
> 
> 赞同：9
> 
> 时间：2012-06-29T13:44:00.920
> 
> 标签：mvvm

似乎有一个指导意见，即模型不应将其实体暴露给 View，并且所有必需的属性都应在 ViewModel 中复制

例子：

```
Product
Id {get; set;}
Name {get; set;}
.......

ProductViewModel : ViewModelBase
Id {get; set;}
Name {get; set;}
....... 
```

为什么需要这个？如果 Model 没有实现 INPC，我可以理解这一点，但如果它实现了，那么我觉得这完全没有必要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T06:20:26.913

当 View 绑定到 Model 时：

*   如果视图需要更改或者您有多个视图，则对模型的更改将导致绑定到该模型的所有视图发生更改。

*   从 View 的角度来看，它所绑定的对象可能不是那么直观；当您需要向对象添加属性和/或命令时，您是将它们添加到 ViewModel 并在模型中保留“原始”属性还是修改模型？

拥有 ViewModel 为您提供了单个模型和多个（版本）视图之间的额外抽象

总而言之，这只是一个指导方针，但请注意，当您需要修改/更新应用程序时，今天看起来还不错的东西可能不是那么好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T14:43:34.437

指导，就是这样。这取决于手头的情况。纯粹主义者会争辩说，将模型与视图完全分离允许模型在不改变视图的情况下改变。

如果必须，我倾向于只代理模型属性（INPC 或某些特定于视图的逻辑，例如模型具有 FirstName 和 LastName 但没有 FullName）

否则我绑定到模型（这是 ViewModel 上的公共属性）。如果我的情况发生变化并且我需要封装一些东西，那么我会在需要时进行重构。

我总是尝试确保有一个 ViewModel 就位（即使它只公开模型），以便以后重构更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T05:35:47.863

我的问题是，你的模型为什么要实现 INPC？他们需要吗？

通常模型只是一个 DTO，不需要任何更改逻辑。

此外，如果您的 INPC 的基本实现来自 MVVM 框架，但您的模型存在于共享程序集中，那么该程序集是否需要对您的 MVVM 框架以及可能的其他 WPF 程序集的引用？

我们的场景是一组共享对象，它们在服务器端和客户端都代表我们的数据。客户端是一个 WPF 应用程序，所以这很好，但服务器端是一个服务，所以我们不需要 INPC。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-04T07:16:56.877

您的 ViewModel 不正确。如果你已经有一个产品类型的模型，你可以简单地在你的 ViewModel 中定义这样的东西： public Product Product {...}

# php - Supervisord不会自动重启退出的进程

> ID：11262936
> 
> 赞同：1
> 
> 时间：2012-06-29T13:44:14.607
> 
> 标签：php, linux, ubuntu, supervisord

我有一个 PHP 脚本，我正在使用 supervisord 生成（成功）：

```
2012-06-29 12:45:15,266 INFO spawned: 'tvm' with pid 4395
2012-06-29 12:45:16,455 INFO success: tvm entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)
2012-06-29 12:45:18,218 INFO exited: tvm (exit status 0; expected) 
```

但是，当脚本退出时，尽管在 supervisord.conf 中设置了 autorestart=true，但它不会重新生成

```
[program:tvm]
command=php /var/www/transcodedvideomonitor/index.php ;
autorestart=true ; 
```

我错过了什么？

# mongodb - 内存 (MB) res:0 virt:0 mapped:0

> ID：11262938
> 
> 赞同：0
> 
> 时间：2012-06-29T13:44:17.297
> 
> 标签：mongodb

我正在尝试在我的 windows xp 系统上安装 mongodb，我所看到的只是安装没有继续进行.. 有人可以帮助安装 mongodb 吗？

```
mongod.exe --dbpath d:\xx\Mongodb\Mongodb\data
Fri Jun 29 18:33:21
Fri Jun 29 18:33:21 warning: 32-bit servers don't have journaling enabled by default. Please use --journal if you want durability.
Fri Jun 29 18:33:21
Fri Jun 29 18:33:21 [initandlisten] MongoDB starting : pid=3568 port=27017 dbpath=d:\xx\Mongodb\Mongodb\data 32-bit host=admin1
Fri Jun 29 18:33:21 [initandlisten]
Fri Jun 29 18:33:21 [initandlisten] ** NOTE: when using MongoDB 32 bit, you are limited to about 2 gigabytes of data
Fri Jun 29 18:33:21 [initandlisten] **       see http://blog.mongodb.org/post/137788967/32-bit-limitations
Fri Jun 29 18:33:21 [initandlisten] **       with --journal, the limit is lower
Fri Jun 29 18:33:21 [initandlisten]
Fri Jun 29 18:33:21 [initandlisten] db version v2.0.6, pdfile version 4.5
Fri Jun 29 18:33:21 [initandlisten] git version: e1c0cbc25863f6356aa4e31375add7bb49fb05bc
Fri Jun 29 18:33:21 [initandlisten] build info: windows sys.getwindowsversion(major=6, minor=0, build=6002, platform=2, service_pack='Service Pack 2') BOOST_LIB_VERSION=1_42
Fri Jun 29 18:33:21 [initandlisten] options: { dbpath: "d:\xx\Mongodb\Mongodb\data" }
Fri Jun 29 18:33:21 [initandlisten] waiting for connections on port 27017
Fri Jun 29 18:33:21 [websvr] admin web console waiting for connections on port 28017
Fri Jun 29 18:34:21 [clientcursormon] mem (MB) res:14 virt:46 mapped:0
Fri Jun 29 18:39:21 [clientcursormon] mem (MB) res:14 virt:46 mapped:0
Fri Jun 29 18:40:21 [PeriodicTask::Runner] task: DBConnectionPool-cleaner took:15ms
Fri Jun 29 18:44:21 [clientcursormon] mem (MB) res:0 virt:46 mapped:0
Fri Jun 29 18:49:21 [clientcursormon] mem (MB) res:0 virt:46 mapped:0
Fri Jun 29 18:54:21 [clientcursormon] mem (MB) res:0 virt:46 mapped:0
Fri Jun 29 18:59:21 [clientcursormon] mem (MB) res:0 virt:46 mapped:0
Fri Jun 29 19:04:21 [clientcursormon] mem (MB) res:0 virt:46 mapped:0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:52:57.113

这是正常的 MongoDB 输出。您可以从线路`Fri Jun 29 18:33:21 [initandlisten] waiting for connections on port 27017`中得知 mongod 已启动并正在等待连接。

如果您想将 MongoDB 安装为 Windows 服务，您可以使用`mongod.exe [options] --install`; [在MongoDB 手册](http://docs.mongodb.org/manual/reference/mongod.exe/)中查看更多选项。

关于输出中的最后几行，这些只是意味着 MongoDB 尚未将任何数据文件加载到内存中。当您创建或使用数据时，那里的数字会改变以指示 mongod 正在使用多少常驻（即物理 RAM）、虚拟和映射内存。

# xcode - 无法追踪内存泄漏

> ID：11262939
> 
> 赞同：0
> 
> 时间：2012-06-29T13:44:26.217
> 
> 标签：xcode, debugging, memory-leaks, instruments, quartz-core

我目前正在尝试修复我的应用程序中的内存泄漏（它没有使用泄漏工具显示），所以我正在使用 Allocations 工具的 heapshot 功能。我已经拍摄了几个 heapshots，如下所示：

![快照](../Images/09ae9ab1375455c7d6d171a39e1989f5.png)

我正在执行的操作是从普通菜单更改视图-> 包含 MKMapView（带有叠加层）的视图并再次返回。

我检查过，每次进入 MKMapView 时内存都在增加。我在初始化时声明了一次 MKMapView，并且包含 MKMapView 的视图在应用程序周期结束之前永远不会被释放。所以这不应该是一个创作问题。

如果我进入其中一个堆，我可以看到以下内容：

![分解的 heapshots](../Images/6f96d5c1fa9f819e2d94510ab13801fe.png)

每个内存地址如下所示：

![内存地址](../Images/364412741f923ee578c8f10a028ee720.png)

我似乎无法弄清楚为什么会留下这么多 ​​QuartzCore 开销，更不用说为什么每次显示视图时都会创建它。谁能告诉我是否有办法查看哪个对象直接调用它，或者哪个对象保留它？这造成了足够的内存泄漏，最终导致我的应用程序崩溃，但我似乎无法修复它。

编辑：

好的，这是我的一些代码（这是一个很大的代码，所以会尝试显示选择性位）：

首先在菜单中，当按下地图按钮时调用它：

```
[self presentModalViewController:[dictionaryViews objectForKey:kMapView] animated:NO]; 
```

然后加载地图，其中调用的代码如下：

```
- (void)viewDidAppear:(BOOL)animated
{
    if (self.mkMapView)
    {
        [self changeMapOverlay:14];

    Singleton *singleton = [Singleton sharedSingleton];

    if ([singleton.storyLocation isEqualToString:kGunthorpe])
    {
        CustomAlertView *alert = [[CustomAlertView alloc] initWithTitle:@"Map" message:@"Once you are ready to visit your first location touch the green pin and press the play button. If you are walking the streets use the directions tab to guide you." delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil];
        [alert show];
        [alert release];

        //int i =0;
    }

    // Setup for 30 fps
    float fps = 1.0 / 30.0;
    self.timerMap = [NSTimer scheduledTimerWithTimeInterval:fps target:self selector:@selector(mapLoop) userInfo:nil repeats:YES];  
}
} 
```

然后调用 changeOverlay 函数，该函数执行以下操作：

```
if (!self.mkMapOverlay)
    {
        MapOverlay *mapOverlay = [[MapOverlay alloc] init];
        [self.mkMapView addOverlay:mapOverlay];
        self.mkMapOverlay = mapOverlay;
        [mapOverlay release];

        mkOverlayRect = MKMapRectMake([self.mkMapOverlayView.overlay boundingMapRect].origin.x, [self.mkMapOverlayView.overlay boundingMapRect].origin.y, [self.mkMapOverlayView.overlay boundingMapRect].size.width, [self.mkMapOverlayView.overlay boundingMapRect].size.height);
    }
    else 
    {
        [self.mkMapOverlayView setHidden:FALSE];
    } 
```

调用它是为了确保地图使用叠加层作为默认视图（它可以更改为混合视图和普通视图）。- 我已经检查过了，mapOverlay 只是第一次被调用，因为我从不更改地图类型。

要退出地图，您必须单击地图图钉上的 detailDisclosureButton，它调用以下代码：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
//NSLog(@"Annotation view selected - Start");
MapAnnotation *annotation = (MapAnnotation *)view.annotation;
NSString *locationName = [[NSString alloc] initWithString:[NSString stringWithString:annotation.title]];

if ([annotation.title rangeOfString:@"."].location != NSNotFound) 
{
    NSRange range = [locationName rangeOfString:@". "];
    int test = range.location + range.length;

    NSString *locationName2 = [[NSString alloc] initWithString:[locationName substringFromIndex:test]];

    [[NSNotificationCenter defaultCenter] 
     postNotificationName:@"GotoLocation" 
     object:locationName2];

    [locationName2 release];
    locationName2 = nil;
}

[locationName release];
locationName = nil;

[mapView deselectAnnotation:annotation animated:NO];

[self dismissModalViewControllerAnimated:NO];
//NSLog(@"Annotation view selected - Finish");
} 
```

我可以解释上面的任何代码，但基本上注释都有一个标题，我需要去掉数字才能到达正确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:56:18.527

我不在 Mac 上编程，但这非常可疑：

> 我检查过，每次进入 MKMapView 时内存都在增加。我在初始化时声明了一次 MKMapView，并且包含 MKMapView 的视图在应用程序周期结束之前永远不会被释放。所以这不应该是一个创作问题。

你真的确定它不是每次都构造这个对象，而且你只有在程序退出时才销毁它？这似乎是一个经典的对象生命周期混乱。

# tcp - 是否可以在wireshark中查看两个远程主机之间的TCP流量？

> ID：11262941
> 
> 赞同：1
> 
> 时间：2012-06-29T13:44:33.063
> 
> 标签：tcp, wireshark

我正在尝试调试两个嵌入式设备之间的 TCP 通信，其中只有一个在我的控制之下。我想看看 Wireshark 中发生了什么，但我什么也没看到。是否甚至可以在 Wireshark 中查看远程主机（但在同一交换机上）之间的流量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:49:57.857

这取决于你的开关。某些交换机具有称为“[端口镜像](http://en.wikipedia.org/wiki/Port_mirroring)”的功能，它允许您将特定物理端口上的所有流量镜像到另一个端口。

最便宜的方法是选择一个基本的网络[集线器](http://en.wikipedia.org/wiki/Network_switch#Layer_1_hubs_versus_higher-layer_switches)。默认情况下，这将在所有其他端口上复制单个端口上的所有传入和传出流量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T16:47:53.480

如果您使用一种称为[ARP 欺骗的技术](http://openmaniak.com/ettercap_arp.php)**，即使没有端口镜像**，您也可以看到交换机上的任何 IP 流量。您可以使用像[ettercap](http://ettercap.sourceforge.net/)这样的工具来完成此操作。我使用这种技术对 PBX 和 IP 电话之间的 VOIP 流量进行故障排除。一旦启动了 ARP 欺骗，您将在 Wireshark 上看到任何或所有 IP 流量。如果您怀疑此解决方案的合法性，请参阅此[维基](http://en.wikipedia.org/wiki/ARP_spoofing)百科页面。`Legitimate usage`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T13:48:56.547

当您和这些主机之间没有 SWITCH（与 HUB 相对）时，情况并非如此。交换机只会将数据包转发到目标主机所连接的端口，而集线器会将它看到的所有数据包传播到所有端口。

您可以通过（临时）安装一个集线器来实现您想要的，在该集线器上连接您的计算机和需要嗅探的两个系统。

编辑：正如 MattH 在评论中所说，在许多高端交换机上都有一个镜像功能，允许您使用交换机的一个端口来嗅探另一个端口。您可以询问您的网络人员您的交换机是否具有这样的功能，并访问该功能以进行调试。

# macos - 多个文件重命名unix

> ID：11262944
> 
> 赞同：0
> 
> 时间：2012-06-29T13:45:05.887
> 
> 标签：macos, unix, file-rename

我是 unix 新手（使用 Mac OS X 终端），我试图通过在文件名中间添加一些文本来重命名某些文件。对于文件夹 ./temp 中的所有文件，我想替换以 ./temp 开头`dr_ic0004`的文件名`dr_ic0004_DMN`。

例如 `dr_0004_tstat1.txt`和`dr_0004_tstat2.txt`分别 `dr_0004_DMN_tstat1.txt`和`dr_0004_DMN_tstat2.txt` 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:50:00.570

```
for filename in dr_0004*
do
    mv "$filename" dr_0004_DMN"${filename#dr_0004}"
done 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T14:18:48.143

假设你有`dr_ic0004foo`和。要查看所有内容，您可以：`dr_ic0004bar``dr_ic0004baz`

```
ls dr_ic0004* 
```

要隔离变量部分（和） `foo`，您可以通过 sed 运行该列表：`bar``baz`

```
ls dr_ic0004*|sed 's/^dr_ic0004//' 
```

要重命名单个文件，您将使用`mv`：

```
mv dr_ic0004foo dr_ic0004_DMNfoo 
```

要遍历列表，您可以使用`for`循环：

```
for x in foo bar baz; do echo $x ; done 
```

**把它们放在一起，你会得到：**

```
for x in `ls dr_ic0004*|sed 's/^dr_ic0004//'`; do mv dr_ic0004$x dr_ic0004_DMN$x; done 
```

# android - Android：Drawable 比 Photoshop 更亮

> ID：11262945
> 
> 赞同：0
> 
> 时间：2012-06-29T13:45:06.567
> 
> 标签：android, android-layout, png, drawable, photoshop

我必须为 Android 应用程序构建一个布局 - 基于 Photoshop 项目。我将所需的图层/gfx 导出到 png 文件中，以便在我的布局中使用它们。

一个 png 用作列表项的背景。但它显示的比预期的要亮得多。原来的png没那么亮。

这是为什么？那是因为图像的大小 - 因为它可能会被拉伸以填充列表项的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:48:15.677

Did you saved your png with RGB color method? Sometimes happens that you save png with CMYK color method, which is better in print world, and in this case your colors will never be the same you see on photoshop.

# c# - 如何更改 Devexpress Grid 中单元格的背景颜色？

> ID：11262946
> 
> 赞同：6
> 
> 时间：2012-06-29T13:45:08.607
> 
> 标签：c#, grid, devexpress, xtragrid

我有一个 40 列的 devexpress xtragrid。我将每个单元格值与其他值进行比较，如果不同，则我想更改单元格背景颜色。我尝试使用 GridViewInfo，但它只使用屏幕上可见的列。但我想为所有列做。（不使用 RowCellStyle）你有解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T14:26:09.050

您需要处理您的 GridView 的**CustomDrawCell**，这里是根据其他列 valoe（年龄列）更改名称列颜色的代码片段

```
private void gridView_CustomDrawCell(object sender, RowCellCustomDrawEventArgs e)
    {
        if (e.Column == colName)
        {
            var age = Convert.ToInt32(gridView.GetRowCellValue(e.RowHandle, colAge));
            if (age < 18)
                e.Appearance.BackColor = Color.FromArgb(0xFE, 0xDF, 0x98);
            else
                e.Appearance.BackColor = Color.FromArgb(0xD2, 0xFD, 0x91);
        }
    } 
```

祝你好运

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T13:53:09.587

挂钩到 xtragrid 的 RowStyle 事件。

```
private void maintainDataControl_RowStyle(object sender, RowStyleEventArgs e)
{
    if (e.RowHandle >= 0)
    {
        GridView view = sender as GridView;

        // Some condition
        if((string)view.GetRowCellValue(
            e.RowHandle, view.Columns["SomeRow"]).Equals("Some Value"))
        {
            e.Appearance.BackColor = Color.Green;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T09:08:53.223

您是否尝试[过 Xtragrid 格式条件？](http://documentation.devexpress.com/#WindowsForms/CustomDocument759)

# iphone - 为什么此代码中的计数给出 0，而不是正确的值？

> ID：11262954
> 
> 赞同：0
> 
> 时间：2012-06-29T13:45:54.720
> 
> 标签：iphone, ios, arrays, count, nsmutablearray

想知道我在这里缺少什么。对 C 和 iOS 开发相对较新，所以请善待 ;-)。在`viewController`我有一个 NSMutableArray 调用`_objects`了一个不断变化的 tableView 并因此改变了数组的大小。为了初始化我的 NSMutableArray，我这样做了：

```
// viewController.m
     if (!_objects) {
    _objects = [[NSMutableArray alloc] init];
}

[_objects insertObject:[NSString stringWithFormat:@"%@", x] atIndex:y]; 
```

我的目标是使用`_objects.count`in `calculatorViewController`，所以我这样做了：

```
// calculatorViewController.m
NSInteger count = viewController._objects.count;
NSLog(@"Count: %i", count); 
```

但是，在日志中`Count: 0`，即使计数不为零，我也会得到 。我在这里想念什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:53:30.947

我猜你正在使用 pushViewController 从 viewController 导航到calculatorViewController。如果你这样做了，那么在你创建 CalculatorViewController 的对象之后，写calculatorViewController.count = [_objects count];

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T13:49:44.547

尝试使用此代码...

```
if (_objects) {
   [_objects release];
   _objects = nil;
}
_objects = [[NSMutableArray alloc] init]; 
```

这可能会帮助你..

# javascript - innerHTML 似乎是唯一好的解决方案

> ID：11262956
> 
> 赞同：0
> 
> 时间：2012-06-29T13:46:01.757
> 
> 标签：javascript, html, dom, innerhtml

我有一个创建 HTML/CSS MessageBox 的函数，我想在其中显示一个变量（已经使用 PHP json_encode() 进行了转义，不可能进行 XSS 注入）。我想在硬编码消息中显示此变量，它始终是相同的消息。该消息在 HTML 粗体标记之间显示此变量`<b></b>`：

```
Message("Do you really want to delete <b>" + reference + "</b> ?"); 
```

传递给 Message() 函数的字符串将添加到 div 标记中，如果我希望变量引用以粗体样式显示，我唯一的解决方案是使用 innerHTML。

很多人说“不要使用innerHTML，它没有标准化”，“这是微软专有功能，不是W3C，可能不再受支持”。

我一直使用 DOM 方法，但就我而言，DOM1 myDiv.firstChild.nodeValue 属性甚至 DOM3 myDiv.textContent 方法都不起作用，因为字符串仅显示为文本。

innerHTML 方法的优点是不`<>`使用 HTML 实体转义字符，不幸的是我认为使用 DOM 方法不可能获得相同的结果。

我不能使用 document.createElement("b") 方法，这会使一切变得复杂，因为我希望我的 Message() 函数将完整样式的字符串作为一个参数。

所以我的想法是在某些情况下需要使用 innerHTML 而不是使事情复杂化，这取决于你如何使用它并不是一个坏习惯。

评论表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:59:29.047

大多数反对`innerHTML`的讨论都已经过时了。 `innerHTML`几乎得到普遍支持（在 IE 中存在一些狭窄的兼容性问题），现在是[HTML5 草案](http://www.w3.org/TR/2008/WD-html5-20080610/dom.html)的一部分，比 DOM 方法[快得多（](http://www.quirksmode.org/dom/innerhtml.html)**编辑**：或不编辑，请参阅评论），并产生更清晰的代码。

如果没有，您想要做的事情*是可能*`innerHTML`的，但这并不漂亮：

```
var div = document.createElement("div");
var b = document.createElement("b");
b.appendChild(document.createTextNode(reference));
div.appendChild(document.createTextNode("Do you really want to delete "));
div.appendChild(b);
div.appendChild(document.createTextNode("?"));
Message(div); 
```

而且您必须重构您的`Message`函数以采用 DOM `Node`（或 s 数组`Node`）而不是文本字符串。总而言之，我会说这绝对不值得——除非你的目标是 IE5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:51:18.847

是的。您可以阅读关于 innerHTML 与其他方法的舒缓[quirksmode 基准测试。](http://www.quirksmode.org/dom/innerhtml.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:52:16.050

我相信这`.innerHTML`很好用。在此处查看兼容性统计信息：[http](http://www.quirksmode.org/dom/w3c_html.html) ://www.quirksmode.org/dom/w3c_html.html ，它们还强调了使用此方法相对于 DOM 方法的性能提升。

# java - 导出库复选框对独立项目有什么影响？

> ID：11262959
> 
> 赞同：1
> 
> 时间：2012-06-29T13:46:15.527
> 
> 标签：java, android, eclipse, jar, android-build

我的印象是 Eclipse 的项目属性“订单和导出”选项卡中的导出复选框只是为了方便使用，这样依赖的 Eclipse 项目就不必包含与其父项目相同的库。

1.  在独立项目中检查库的导出框是否有任何影响？
2.  为 Android 构建的行为与标准 Java 项目有什么不同吗？在我的一个 Android 项目中，除非我选中我的几个库上的导出框，否则我会收到一个找不到类的运行时错误。这怎么可能发生？

# c# - 实体之间的通用属性表

> ID：11262964
> 
> 赞同：0
> 
> 时间：2012-06-29T13:46:27.110
> 
> 标签：c#, entity-framework, ef-code-first

以下是使用 EF 5.0.0-rc 和 Code First。在我的设计中，我有一个属性实体：

```
public class Attribute
{ 
    public int AttributeId { get; set; }
    public Guid Guid { get; set; }
    public string Name { get; set; }
    public string Value { get; set; }

    /* Used for testing the first fluent statement */
    public virtual ICollection<Customer> Customers { get; set; }
} 
```

我还有多个包含 GUID 的实体：

```
public class Customer
{ 
    public int CustomerId { get; set; }
    public Guid Guid { get; set; }
}

public class Location
{ 
    public int LocationId { get; set; }
    public Guid Guid { get; set; }
} 
```

我希望属性表对客户表和位置表都是通用的，中间没有列或表。我似乎无法在流畅的 API 中获得正确的映射来创建没有帮助表的 FK：

```
 modelBuilder.Entity<Customer>()
            .HasMany(o => o.Attributes)
            .WithMany(o => o.Customers)
            .Map(m => m.MapLeftKey("Guid")); 
```

... 将生成一个不需要的 CustomerAttributes 表。

```
 modelBuilder.Entity<Organization>()
            .HasMany(o => o.Attributes)
            .WithOptional()
            .HasForeignKey(o => o.Guid); 
```

...不会编译，因为

> 引用约束的 Dependent Role 中所有属性的类型必须与 Principal Role 中相应的属性类型相同。

应该如何建立关系？还是设计不合适？

## 编辑：成功！

在 Raphaël Althaus 的指导下，我已准备好接受 EF 的方式，并为每个实体使用单独的跟踪表，但他建议创建一个新类，Cust 和 Loca 实体将继承该类，这让我走上了正确的方向。

首先，我创建了一个“父”类，它也为我提供了重构存储在大多数实体上的一些审计数据的地方：

```
public class ParentEntity
{
    [Key]
    public Guid Guid { get; set; }

    public DateTime? CreatedOn { get; set; }
    public string CreatedBy { get; set; }
    public DateTime? ModifiedOn { get; set; }
    public string ModifiedBy { get; set; }

    [Timestamp]
    public byte[] Version { get; set; }

    public virtual ICollection<Attribute> Attributes { get; set; }
} 
```

然后我继承了 Cust 和 Loca 实体的父类：

```
public class Customer : ParentEntity
{ 
    public int CustomerId { get; set; }
    public Guid Guid { get; set; }
}

public class Location : ParentEntity
{ 
    public int LocationId { get; set; }
    public Guid Guid { get; set; }
} 
```

我还修改了 Attribute 类以支持新的 FK 字段 EntityGuid：

```
public class Attribute
{
    public int AttributeId { get; set; }
    public Guid EntityGuid { get; set; }
    public string Name { get; set; }
    public string Value { get; set; }
} 
```

这给了我几乎所有我需要的东西，除了......它试图将每个实体存储在新的 ParentEntity 表中。要解决我使用的问题：

```
 modelBuilder.Entity<Customer>().ToTable("Customers");
        modelBuilder.Entity<Location>().ToTable("Locations"); 
```

最后是把这一切结合在一起的部分：

```
 modelBuilder.Entity<ParentEntity>()
            .HasMany(e => e.Attributes)
            .WithRequired()
            .HasForeignKey(e => e.EntityGuid); 
```

我能说的唯一缺点是 ParentEntity 作为主键，它是一个 Guid。但是我保留了我的其他键，并计划将它们用作集群索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:58:04.880

您的混合对象世界和 rDBMS 世界。

你在 ORM 中，所以你不应该介意（好吧，不完全，但在这种情况下，是的）你的数据库中到底有什么。

如果没有“链接”（关系）表，rDBMS 无法管理多对多关系（如何表示作为列表的外键？没有关系表是不可能的）。

在对象世界中，a `List<x>`in`y`和 a `List<y>`in`x`可以做到这一点，而无需任何“关系”实体。

**编辑**

如果您想要一个通用的“关系”表，您可以创建一个新实体（带有 Guid）：客户和位置将从该新实体继承，属性实体将与该新实体链接。

# php - PHP MYSQL 以阿拉伯语插入数据

> ID：11262965
> 
> 赞同：7
> 
> 时间：2012-06-29T13:46:28.560
> 
> 标签：php, mysql, arabic

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-29T19:39:29.530

您必须执行以下两项操作：

1.  确保您的数据库编码和排序规则是`utf8_general_ci`（对于字段本身和表以及数据库）。
2.  建立与数据库的连接后立即发送两个命令：

    ```
    mysql_query("SET NAMES utf8;");

    mysql_query("SET CHARACTER_SET utf8;"); 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T01:42:49.147

您没有提及您正在使用的 MySQL 版本，但如果使用 5.0.7 或更高版本，请按照[官方 PHP 文档](http://php.net/manual/en/function.mysql-set-charset.php)：

> 这是更改字符集的首选方法。不推荐使用 mysql_query() 来设置（如 SET NAMES utf8）。有关更多信息，请参阅 MySQL 字符集概念部分。

**例如，** ^(假设您使用的是 mysql_query 扩展。)

```
<?php
  $link = mysql_connect('localhost','user1','pass1',TRUE);

  mysql_selectdb('db1', $link);

  mysql_set_charset('utf8',$link); 
?> 
```

**其他注意事项：**

*   正在使用的文件应使用 UTF-8 编码
*   数据库、表和字段都应编码并使用排序规则`utf8_general_ci`
*   PHP 标头和 HTML 标头也应设置为 UTF-8

* * *

作为旁注，不鼓励使用[mysql_query](http://www.php.net/manual/en/function.mysql-query.php)扩展。相反，应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://www.php.net/manual/en/ref.pdo-mysql.php)

另请参阅[MySQL：选择 API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)指南和[相关的常见问题解答](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T14:39:29.133

你应该使用这一行：

```
@mysql_query("SET NAMES 'utf8' "); 
```

看这个功能：

```
function _connect($user, $pass, $host)
{
    $conn = mysql_connect($host, $user, $pass);

    if (!$conn)
        return false;

    @mysql_query("SET NAMES 'utf8' ");
    //more....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T17:18:45.203

尝试这个：

```
@mysql_query("set global character_set_results=utf8"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T14:06:06.153

应该`utf8`支持您的数据库。尝试使用`utf8_general_ci`或`utf8_unicode_ci`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-27T02:25:08.617

以下对我有用：

`mysqli_set_charset($this->connect,'utf8'); mysqli_query($this->connect, "SET NAMES 'utf8'"); mysqli_query($this->connect, 'SET CHARACTER SET utf8');`

此外，您的表必须是 (utf8_general_ci) 在结构字段中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-17T20:45:26.070

尝试更改服务器和数据库以及表排序规则

例如

ALTER DATABASE "DBNAME" CHARACTER SET utf8 COLLATE utf8_general_ci;

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-25T07:19:24.900

现在 PHP 和 MYSQL 支持任何语言。在数据库连接中使用此功能。

```
$this->links = mysql_connect(DB_SERVER,DB_SERVER_USERNAME,DB_SERVER_PASSWORD);  
mysql_query("SET character_set_results = 'utf8', character_set_client = 'utf8', 
  character_set_connection = 'utf8', character_set_database = 'utf8', 
  character_set_server = 'utf8'", $this->links); 
```

MYSQL 数据库表字段应该是 Collat​​ion=utf8_general_ci

# javascript - Open PDF link with print window active

> ID：11262967
> 
> 赞同：2
> 
> 时间：2012-06-29T13:46:43.970
> 
> 标签：javascript, pdf, printing, hyperlink

I'm linking to a PDF, but instead of it simply downloading or opening within browser, I'd like it to open with the print window open - ready for the user to print.

How do I go about that please? Or is it all based on your browser settings so impossible to force?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:11:34.263

一种解决方案（短版）：

1.  打开一个包含 pdf 的 iframe，将宽度和高度设置为 0，使其不显示

2.  在 PDF 文件中注入一些 javascript

3.  当由于显示 PDF 而运行 javascript 时，将显示来自 adobe 的打印对话框。

可从此 codeproject.com-post 获得长版本和[实现](http://www.codeproject.com/Articles/196541/Printing-a-PDF-from-a-web-page)代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T21:41:37.523

作为对引用 Sindre 方法的改进，我发现您可以简单地将文档的 openAction 设置为预定义的 PRINTDIALOG 操作。使用 iText（在 Java 中），它很简单：

```
writer.SetOpenAction( new PdfAction( PdfAction.PRINTDIALOG )); 
```

这避免了使用 JavaScript，作为一种安全措施可能会被禁用。

# c# - asp.net 获取动态创建的表格内容

> ID：11262974
> 
> 赞同：0
> 
> 时间：2012-06-29T13:47:33.007
> 
> 标签：c#, asp.net, row, cell

我在我的 aspx 文件中创建了一个 asp:table，只有一个标题行。

在我的 page_load 中，我不断添加行/单元格。

当我尝试：

```
Table table = tempUpdatePanel.FindControl("myTable") as Table; 
```

`table`只有 1 行，即标题行，尽管它实际上有/显示了更多。

如何拾取剩余的行/单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:00:37.323

如果您要动态添加行/单元格，则必须在 Page_InitComplete 之前执行此操作，否则 viewstate 将在后续回发中覆盖您动态创建的数据。

要了解更多信息，请浏览[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

# iphone - iPhone iOS NSDate如何检测日期范围是否包括一个月的开始？

> ID：11262975
> 
> 赞同：3
> 
> 时间：2012-06-29T13:47:39.230
> 
> 标签：iphone, objective-c, ios, nsdate, nscalendar

我得到了一组在 UITableView 中显示的事件。每个事件都有一个开始日期和结束日期，它们之间有 1-3 天。

我正在尝试检测特定日期范围是否包括月初（例如：8 月 1 日），并向该表格视图单元格添加特殊标记。

我读过 NSDate 和日历操作是昂贵的操作，我的表格视图已经不是世界上最快的。**如何有效地确定日期范围是否包括月初？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:50:13.310

检查两个结束日期的月份值，如果它们不同，则您有月份的开始，否则您没有。

**编辑：**首先检查任何端点（开始或结束）日期值等于 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:51:48.050

好吧，务实地考虑一下，您可以检查每个日期的月份：

```
NSCalendar* calendar = [NSCalendar currentCalendar];

NSDateComponents* startComp = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:startDate];

NSDateComponents* endComp = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:endDate];

if([startComp month] != [endComp month]){
    // start of month included
} 
```

你可以对这些天做同样的事情，如果`endDate`天的价值小于`startDate`天的价值，那么你知道你在某个地方有一个第一。显然，这种方式只有在事件持续不到一个月的情况下才能正常工作（你说他们这样做了）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T13:52:32.070

您可以检查结束日期是否低于开始日期。

例如：开始 = 6 月 30 日，结束 = 7 月 2 日。

```
NSDate * start, end;

NSInteger startDay = [[start descriptionWithCalendarFormat:@"%d" timeZone:nil locale:nil] intValue];
NSInteger endDay = [[start descriptionWithCalendarFormat:@"%d" timeZone:nil locale:nil] intValue];

if (endDay < startDay) {
    // bingo!
} 
```

# python - 在长时间运行的 c 进程和 python 之间进行双向 IPC 的最佳方法是什么？

> ID：11262984
> 
> 赞同：3
> 
> 时间：2012-06-29T13:48:09.657
> 
> 标签：python, c, ipc, protocol-buffers, thrift

我有一个现有的 C 进程，可以接受一个文本输入并生成一个图像文件。由于它与外部系统的接口，此 C 过程具有较高的设置/拆卸成本。一旦设置/拆卸发生，从文本中实际生成图像几乎是瞬时的。

我的计划是守护 C 进程，因此它将在无限循环中接收文本并生成图像文件，同时保持与外部系统的连接。

我还将在 python 中编写一个小型客户端程序，它将与守护程序接口以发送文本/接收图像。

目标操作系统是unix。

问题是，在这种情况下，在 python/C 之间进行双向 IPC 的最佳方法是什么？我应该只打开一个 unix 域套接字并来回发送打包的结构，还是应该查看 Apache Thrift 或 protobuf 之类的东西？

更新：

只是为了保持简单，并打开一个 unix 域套接字

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T14:02:41.477

我认为套接字是通往这里的路。在 Unix 上，我推荐使用`AF_UNIX`套接字（参见`unix(7)`手册页）。这些很容易在 C++ 和 python（`sockets`模块）中创建。这避免了端口冲突或在本地系统上打开端口的权限问题。

Unix 套接字的性能相当不错，`AF_INET6`如果您决定与远程工作者一起工作，可以轻松地将其交换为套接字。

对于打包/解包数据，使用[编译](http://docs.python.org/library/struct.html#classes)[对象](http://docs.python.org/library/struct.html#classes)`struct`的模块对我来说似乎是合理的。这就是我过去的做法，性能非常好（没有进行测量，因为它对我来说太好了，无法调查）。[`Struct`](http://docs.python.org/library/struct.html#classes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:58:38.760

我的默认选择是使用通过 localhost 进行通信的普通套接字。套接字是一种很好理解的语言和平台中立的 API，性能往往非常好。它们还具有不将您绑定到同一个盒子上的两个进程的优点，这在许多情况下都是有利的。

# javascript - Vunerability/security scanner for single page JavaScript apps

> ID：11262985
> 
> 赞同：2
> 
> 时间：2012-06-29T13:48:12.770
> 
> 标签：javascript, security, web-applications, backbone.js, skipfish

I've used [skipfish](http://code.google.com/p/skipfish/) and Burp Suite previously on 'standard' web applications.

However I'm now writing more and more [single-page apps](http://en.wikipedia.org/wiki/Single-page_application), in my case with backbone.js.

Is there anyway to scan these with software? Aside from just testing your API urls explicitly?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:20:50.850

JSLint 和 Dominator 是对评估 JavaScript 很有用的两个工具。

[JSLint](http://www.jslint.com/)是 Douglass Crockford 编写的 JavaScript 代码质量工具。虽然它的目的不仅仅是分析代码的安全性，但它会突出显示不安全和糟糕的技术，这些技术会使您的应用程序更容易出错并且可能容易受到安全问题的影响。同样，它本身不是安全工具，但它仍然很有用。

[Dominator](http://blog.mindedsecurity.com/2011/05/dominator-project.html)是一款基于 Firefox 的软件，可帮助识别网站中的 DOM XSS 问题。一般来说，您可以只浏览一个页面并在运行应用程序时使用它，它会突出显示并提醒您它认为是安全问题的地方。它有相当多的误报，但我在使用这个工具时发现了一些错误。我相信它也有一个内置的模糊器，但我没有太多使用这个功能。

另一个有用的工具是`grep`. 不要低估通过搜索已知的危险功能并确保以安全的方式使用它们可以找到多少错误。

# php - 通过 jquery post 传递表单数据

> ID：11262987
> 
> 赞同：1
> 
> 时间：2012-06-29T13:48:16.217
> 
> 标签：php, javascript, jquery

我有一个表单，我需要做的是通过 jquery .post 将此表单数据传递到另一个页面，您将在下面找到 javascript

```
 <script type="text/javascript">
$("form").submit(function(){
    $(".application_container").append('<div class="preloading" style="padding-top:250px;"><img src="<?php echo base_url() . "assets/images/loading.gif";?>" alt="تحميل" /></div>').show();
    var str = $("form").serialize();
    var url = "<?php echo base_url() . "hawaa/confirm_applicant.html"; ?>";
    $.post(url, function(str){
        $(".application_container").append(str).show();
        $(".preloading").remove();
    });
    return false;
});
   </script> 
```

**它请求另一个页面但没有向它发送表单提交数据的错误，因此它显示验证错误**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T13:52:28.893

您使用`$.post()`不正确。您需要将数据`str`作为数据参数传递，如下所示：

```
$.post(url, str, function(data, status, jqXHR) {
    // do stuff with response data here
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:52:13.683

您必须将`str`变量作为第二个参数传递给`$.post`调用。该[文件](http://api.jquery.com/jQuery.post/)指出：

*   第一个参数是要发布数据的 URL
*   第二个参数是你要发布的数据
*   第三个参数是请求 URL 的结果（HTML 或 XML，取决于返回的内容）。

所以正确的做法是：

```
<script type="text/javascript">
  $("form").submit(function(){
    $(".application_container").append('<div class="preloading" style="padding-top:250px;"><img src="<?php echo base_url() . "assets/images/loading.gif";?>" alt="تحميل" /></div>').show();
    var str = $("form").serialize();
    var url = "<?php echo base_url() . "hawaa/confirm_applicant.html"; ?>";
    $.post(url, str, function(result){
      $(".application_container").append(result).show();
      $(".preloading").remove();
    });
    return false;
  });
</script> 
```

# google-drive-api - 我们可以控制我们的应用是否显示在 Google Drive Android 应用中吗

> ID：11262990
> 
> 赞同：0
> 
> 时间：2012-06-29T13:48:26.483
> 
> 标签：google-drive-api

我们有几个可以通过 Chrome 网上应用店安装的 Google Drive 应用程序。在 Android 版 Google Drive 应用程序的最新更新中，我们注意到该应用程序的用户可以从“打开方式”菜单（表示为“在网络浏览器中打开”）中选择使用我们的应用程序。问题是我们的网络应用程序还不兼容某些移动浏览器（尤其是手机）。在我们解决浏览器兼容性问题之前，我们能否阻止我们的应用出现在此列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T00:15:05.373

对于您在注册应用程序时列出的文件类型，您的应用程序将显示在“打开方式”菜单中：[https ://developers.google.com/drive/register#setting_mime_types_and_extensions](https://developers.google.com/drive/register#setting_mime_types_and_extensions)

您可以将这些字段留空，以防止您的应用程序显示在“打开方式”菜单中，但请注意，无法仅显示在桌面浏览器中而不显示在移动浏览器中。

# javascript - IE 9 Javascript 窗口变量为空.. 适用于 IE 8

> ID：11262995
> 
> 赞同：0
> 
> 时间：2012-06-29T13:49:04.537
> 
> 标签：javascript, internet-explorer-8, internet-explorer-9

在我的代码中的某个时刻，我以这种方式访问​​一个 javascript 变量：

```
var DASHBOARD = document.parentWindow.parent.Dashboard; 
```

其中 parent 的值为 {object Window}，其类型为 DispHTMLWindow2。它在 IE8 或 IE9 兼容性视图中运行良好，但是当我无法使其在 IE9 上运行时。

在 IE9 上，document.parentWindow.parent.Dashboard 的值是未定义的，它的类型是未定义的。我还注意到，在 IE 9 上，父级的值为 {...}，其类型为 [Object, Window]。

在 IE 9 中访问变量仪表板有不同的方法吗？

例子：

布局.aspx

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Create new Layout</title>
    <style type="text/css">
        .border-top { height: 5px; background-color: #B2B2B2;}
        .border-left { width: 3px; height: 100%; background-color: #B2B2B2;}
        .content { height: 100%; background-color: #FFFFFF;}
    </style>

    <script type="text/javascript" src="./container/includes/js/jquery-1.5.1.min.js"></script>
    <script type="text/javascript" src="./container/includes/js/jquery-ui-1.8.12.custom.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            var dada = "123";
        });
    </script>
</head>
<body>
    <form id="form1" runat="server" style="width: 100%; height: 100%;">
    <div style="width: 100%; height: 100%;">
        <iframe name="remote_iframe_0" src="layouts2.aspx" id="remote_iframe_0" />
    </div>
    </form>
</body>
</html> 
```

布局2.aspx

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style type="text/css">
        .border-top { height: 5px; background-color: #B2B2B2;}
        .border-left { width: 3px; height: 100%; background-color: #B2B2B2;}
        .content { height: 100%; background-color: #FFFFFF;}
    </style>

    <script type="text/javascript" src="./container/includes/js/jquery-1.5.1.min.js"></script>
    <script type="text/javascript" src="./container/includes/js/jquery-ui-1.8.12.custom.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            debugger;
        });
    </script>
</head>
<body>
    <form id="form1" runat="server" style="width: 100%; height: 100%;">
    <div style="width: 100%; height: 100%;">
        AAAA
    </div>
    </form>
</body>
</html> 
```

如何在调试器中访问变量数据；在 layouts2.aspx 中？考虑到两个页面都在同一个域上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:24:29.923

您可以使用：

```
window.parent.dada 
```

参考：

[http://w3schools.com/jsref/obj_window.asp](http://w3schools.com/jsref/obj_window.asp)

[http://w3schools.com/jsref/dom_obj_document.asp](http://w3schools.com/jsref/dom_obj_document.asp)