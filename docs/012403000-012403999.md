# StackOverflow 问答 12403000-12403999

# asp.net - VB.net 从后面的代码中禁用 CompareValidator

> ID：12403002
> 
> 赞同：0
> 
> 时间：2012-09-13T09:12:31.460
> 
> 标签：asp.net, vb.net, requiredfieldvalidator

`CompareValidator / RequiredFieldValidator`是否可以从 VB.net 中的代码中禁用？

我有 3 个字段（下拉列表和两个日期选择器），**一旦选择了下拉列表中的月份，我想禁用验证/需要 datepicker 输入**。

任何建议都非常感谢！

请注意已经尝试过，但它不起作用：

```
Protected Sub DashbodropardMonthsDropDown_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles DashbodropardMonthsDropDown.SelectedIndexChanged
        ' If Month is selected from DD menu
        Dim MonthDD As Integer = DashbodropardMonthsDropDown.SelectedValue

        ' If nothing selected or selected "--select" with value 0
        If MonthDD = 0 Then

            'Validate DatePicker
            CompareValidatorT1.Enabled = True
            RequiredFieldValidator2.Enabled = True
            RequiredFieldValidator1.Enabled = True

        Else

            'Do Not Validate DatePicker
            CompareValidatorT1.Enabled = False
            RequiredFieldValidator2.Enabled = False
            RequiredFieldValidator1.Enabled = False

        End If

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:14:48.650

`code behind`您可以通过执行以下操作来启用或禁用您的验证器

```
CompValidator.Enabled=false 
```

**编辑**： 设置`AutoPostBack=true`帮助`DropDownList`

# c++ - __declspec(dllimport) 导致 MSVC 2010 上的编译器崩溃

> ID：12403003
> 
> 赞同：0
> 
> 时间：2012-09-13T09:12:32.973
> 
> 标签：c++, visual-c++, declspec

在 *.cpp 文件中，尝试使用第三方库：

```
#define DLL_IMPORT 
#include <thirdParty.h>
// Third party header has code like:
// #ifdef DLL_IMPORT
//    #define DLL_DECL __declspec(dllimport)

// fatal error C1001: An internal error has occurred in the compiler. 
```

选择：

```
#define NO_DLL
#include <thirdParty.h>
// Third party header has code like:
// #elif defined(NO_DLL)
//    #define DLL_DECL

// Compiles fine, but linker errors as can't find DLL functions 
```

我可以通过删除宏和#define 来重现结果，并手动编辑第三方文件是否有 __declspec(dllimport) - 所以上面的预处理器只是为了显示正在发生的事情，它不是复制粘贴。

有没有人遇到过类似的事情，或者可以暗示原因？（使用 CMake 创建）。上面是 2 行 *.cpp 崩溃的实际示例，因此它被缩小到 #include 中的某些内容。

以下也可以正常工作：

1.  编译使用 dllimport/export 的第三方提供的示例（他们提供 *.sln），因此这似乎不是库的错
2.  将第三方库编译为生产项目的一部分（因此 dllexport 工作正常）

我已经搜索了两个项目的项目设置页面以尝试发现差异，但出现了空白。当然，我可能会遗漏一些东西，因为这些设置页面不是最容易导航的。我将在一天左右的时间内访问 VS2008，因此可以与之比较。第三方库是 MySql++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:20:30.193

编译器崩溃绝对是编译器中的一个错误，因此您最好向 Microsoft Visual C++ 团队提交错误报告。

至于错误

```
#define DLL_DECL __declspec(dllimport) 
```

是错误的做事方式。应该有一些你需要设置的项目设置，一个你可以定义的预处理指令 if `DLL_DECL`，或者只是包含一个不同的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:02:48.497

原来这是因为尝试使用 DLL 的项目打开了预编译头文件。

# reference - 你调用的对象是空的 -

> ID：12403004
> 
> 赞同：0
> 
> 时间：2012-09-13T09:12:33.383
> 
> 标签：reference

`object reference not set to an instance of an object--`

请帮我解决这个错误。我的语法有错误吗？

```
string filename = Path.GetFileName(FileUpload1.PostedFile.FileName);
FileUpload1.SaveAs(Server.MapPath("~/Uploads/") + filename); 
```

我在第一行有问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:20:43.127

好吧，您没有提到任何语言和平台。但似乎你正在使用 asp.net 这里是 VB 代码来帮助你。

```
 Sub SubmitButton_Click(Source As Object, e As EventArgs)
   If Not (File1.PostedFile Is Nothing) Then
      Try
         File1.PostedFile.SaveAs("C:\Uploads\uploadedfile.txt")
         Span1.InnerHtml = "Upload Successful!"
      Catch ex As Exception
           ex.ToString()
      End Try
   End If
End Sub 
```

# c# - 使用 c# 中的 Web 浏览器控件进行页面导航和文档更新

> ID：12403006
> 
> 赞同：1
> 
> 时间：2012-09-13T09:12:43.160
> 
> 标签：c#

嗨，我是使用 webbrowser 控件的新手。网站包含带有页面导航的网格，其中包含多个链接。每个页面都使用 ajax 进行导航。我无法在该文档中更新页面并想要导航页面在 c# 中自动使用 webbrowser 控件。

我正在使用下面的代码来导航页面。但是，我只能导航当前文档中的链接。

我的要求是，我必须浏览该网站中的所有链接并获取数据。

```
private void webBrowser1_DocumentCompleted(object sender, 
                                  WebBrowserDocumentCompletedEventArgs e)
{
    int k = 2;
    HtmlElementCollection links = webBrowser1.Document.GetElementsByTagName("A");

    foreach (HtmlElement link in links)
    {
        string lin = Convert.ToString(k);
        if ((link.InnerText == lin))
        {
            link.InvokeMember("Click");
            while ((webBrowser1.ReadyState != WebBrowserReadyState.Complete))
            {
                Application.DoEvents();
            }
            k++;
        }
    }
} 
```

# linux - 无法在 RHEL 上安装任何东西

> ID：12403031
> 
> 赞同：13
> 
> 时间：2012-09-13T09:13:59.337
> 
> 标签：linux, yum, rhel

我在一个新的 RHEL 系统上。

我似乎无法通过 yum install 安装任何软件包。

```
yum install nmap 
```

当前的回购

```
ls /etc/yum.repos.d/
google-chrome.repo  redhat.repo         rhel-source.repo 
```

可能出了什么问题？

**百胜安装的输出：**

```
$ sudo yum install nmap
[sudo] password for user: 
Loaded plugins: product-id, refresh-packagekit, security, subscription-manager
Updating certificate-based repositories.
Setting up Install Process
No package nmap available.
Error: Nothing to do 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T20:10:36.097

Red Hat 不使用 /etc/yum.repos.d 目录来存放官方软件包，所以答案不会在那里。它将使用 /etc/yum/pluginconf.d 中的订阅插件。

您提到 RHEL 主机是新的。您需要确保您的订阅有效，否则 yum 将静默失败。

您可以使用该`subscription-manager list`命令获取有关订阅的信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-03-26T05:47:02.720

Centos 已经为你做到了。

在 /etc/yum.repos.d 中创建一个 repo 文件

```
vi /etc/yum.repos.d/myrepo.repo 
```

然后将其粘贴到此文件中：

```
[centos]
name=CentOS-7
baseurl=http://ftp.heanet.ie/pub/centos/7/os/x86_64/
enabled=1
gpgcheck=1
gpgkey=http://ftp.heanet.ie/pub/centos/7/os/x86_64/RPM-GPG-KEY-CentOS-7 
```

用 wq 保存它！现在运行

```
yum repolist 
```

检查您是否可以安装任何软件包（例如 nmap）

```
yum install nmap -y 
```

享受！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:37:07.733

尝试使用 yum list 在代表中“搜索”正确的包名称

```
yum list nmap 
```

我猜正确的包名和安装命令是：

```
yum install nmap.x86_64 
```

你也可以做一个“yum search somename”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-28T14:52:30.407

就我而言，我试图使用 yum 安装 OpenJDK；`sudo yum install -y java-1.8.0-openjdk-devel`但收到一条错误消息，指出依赖项不可用：

```
---> Package java-1.8.0-openjdk-headless.x86_64 1:1.8.0.201.b09-1.el6_10 will be installed
--> Processing Dependency: pcsc-lite-devel(x86-64) for package: 1:java-1.8.0-openjdk-headless-1.8.0.201.b09-1.el6_10.x86_64
--> Finished Dependency Resolution
Error: Package: 1:java-1.8.0-openjdk-headless-1.8.0.201.b09-1.el6_10.x86_64 (rhel-6-server-rpms)
           Requires: pcsc-lite-devel(x86-64)
**********************************************************************
yum can be configured to try to resolve such errors by temporarily enabling
disabled repos and searching for missing dependencies.
To enable this functionality please set 'notify_only=0' in /etc/yum/pluginconf.d/search-disabled-repos.conf
********************************************************************** 
```

我按照建议解决了这个问题`please set 'notify_only=0' in /etc/yum/pluginconf.d/search-disabled-repos.conf`，然后再次运行 yum 命令。这次 yum 加载了一堆 [previously disabled] repos 并搜索了它们，最后报告成功并显示以下消息：

```
*******************************************************************
Dependency resolving was successful thanks to enabling these repositories:
rhel-6-server-optional-rpms
******************************************************************* 
```

所以没有被忽略的`*-devel`回购，但这样做仍然有效。为了清除，明确忽略的回购是：`ignored_repos=*debug-rpms *source-rpms *beta-rpms`

..所以这行得通，但我对这个机制仍然不了解..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-18T13:23:31.193

尝试使用安装：

```
yum install nmap-frontend 
```

它在 Red Hat Enterprise Linux Server 7.7 版（Maipo）上为我工作

您可以使用以下行进行测试：

```
nmap 25 gmail-smtp-in.l.google.com 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-28T09:58:15.610

如果您的实验室或任何位置有操作系统映像，您可以在某些 RPMS 上尝试此操作

```
vim /etc/yum.repos.d/rhel.repo
[rhel]
name=rhel
baseurl=http://172.25.5.25/osimages/rhel7.2_64bit
enabled=1
gpgcheck=0 
```

然后做`yum clean all`

baseurl 是您的操作系统映像可用的位置。无需订阅，它正在重用您的操作系统映像

# vb6 - 如何为我的 VB 项目生成 xml 文件？

> ID：12403035
> 
> 赞同：0
> 
> 时间：2012-09-13T09:14:04.640
> 
> 标签：vb6

我们使用 VB 创建了一个应用程序。所以，每当我单击项目 exe 文件时，我想创建一个 xml 文件并为我的应用程序存储一些 config.details 以供进一步需要。

现在我在我的本地驱动器中创建了那个 xml 文件（d:\appConfig\config.xml）。但是我们必须只将我们的项目 exe 移交给客户端。所以，客户端可能有或没有 D 驱动器。那么，我如何创建所有客户端计算机共有的配置 xml 文件。

这是我的代码：

```
Dim doc As XmlDocument = New XmlDocument
doc.Load("D:\appConfig\trial.xml")
Dim newElem As XmlElement
      newElem = doc.CreateNode(XmlNodeType.Element, "file", "testing")
      newElem.SetAttribute("filename", filenameenc)
      newElem.SetAttribute("expdate", g)
Dim root As XmlElement = doc.DocumentElement
    root.AppendChild(newElem)
doc.Save("D:\appConfig\trial.xml") 
```

有没有办法创建配置xml？

请指导我摆脱这个问题？

# c# - C# and F# - When would a situation require one or the other

> ID：12403040
> 
> 赞同：1
> 
> 时间：2012-09-13T09:14:20.630
> 
> 标签：c#, f#

I'm trying to understand the differences between C# and F#. To me, C# and VB are pretty much the same thing and I'm happy to use one or the other and I've dabbled with C++ to understand why to use it, however F# remains a mystery to me.

Now, I know F# is used for functional programming (or so I've read) but the details I've found are not conclusive as to why I would want to use it over another language. There are many similar questions already here but a lot of the answers suggest they are also in-fact very similar.

Can any one give a simple example of 2 real life situations where it would be preferable to use one language over the other (assuming there are any)? Or do we feel that it could be down to preference?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:22:35.000

See [here](https://stackoverflow.com/a/952443/525138), although the question has been closed, this response gives a good overview of when you'd use a functional language like F# over an imperative language.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:25:55.097

The base class library is the same for both languages and there's nothing you can't solve in one than you can solve in the other. However some tasks such as mathematical computation or working with hierarchical data (e.g. a parser/type checker) is usually easier in FP than in OO other tasks where you model reworld objects and wish to give the user an experience of manipulating that real world object OO might lend it self better to the task

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T09:17:02.767

F# is a functional programming language it is particularly useful for mathematical computations.

From [MSDN](http://msdn.microsoft.com/en-us/library/hh297121%28v=vs.100%29.aspx) :

> Functional programming is used for writing the core components of an application. It is used to elegantly implement main algorithms, the processing of data, or other key tasks. Code written in the functional style is often safer and easier to reason about. For example, functional languages avoid using the null value. It can also elegantly model the problem domain and solve problems in that domain.

# javascript - 如何在 Facebook 上的 iframe 应用程序中使后退按钮返回到上一页？

> ID：12403041
> 
> 赞同：0
> 
> 时间：2012-09-13T09:14:21.967
> 
> 标签：javascript, jquery, iframe

我在 IFRAME 中有一个 Facebook 应用程序。当人们打开应用程序时，会显示主站点，单击图库后，我有一个产品图库。

Gallery 有子页面，在单击 next 按钮后会显示子页面，这些子页面使用 JS 调用新数据（无页面重新加载）。

当人们点击产品来查看它时（它是通过更改窗口顶部的 URL 来完成的，而不是 iframe 本身）。

它工作正常。但是当人们打开产品并想要返回到画廊的最后一页时，它就不起作用了，因为他被移动到了主站点。

如何使返回按钮返回到用JS显示的最后一页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:19:33.243

您应该在每个页面中添加更改，`fragment identifier`然后检查并更改页面：

```
if(window.location.hash) {
     var product = window.location.hash.substring(1);
     // load your product
} 
```

# bash - 设置 svn:externals 从脚本

> ID：12403043
> 
> 赞同：1
> 
> 时间：2012-09-13T09:14:31.140
> 
> 标签：bash, svn, svn-externals, svn-propset

我正在尝试`svn:externals`从 bash 脚本设置属性。失败的行是：

```
svn propset svn:externals \'WEB-INF/src/com/project https://subversion.assembla.com/svn/myProject/branches/Release_$Version/com/project\' . 
```

where`$Version`是取自命令行参数的变量。

问题是，这条线在提示符下工作正常，但在脚本中不起作用。我通过将该行回显到控制台、将其复制并粘贴到命令提示符并运行来测试这一点。它可以从提示中正常工作，但不能从脚本中正常工作。从脚本运行时，出现以下错误：

```
svn: E200009: Cannot mix repository and working copy targets 
```

我已经在网上搜索了几个小时，但找不到任何答案。我有一种感觉，问题可能与用于转义 ' 字符的转义字符有关，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:33:36.637

您当然可以尝试找到正确的引号和反斜杠组合，但为什么不使用临时文件呢？就像是：

```
cat > some_temp_file << EOF
WEB-INF/src/com/project https://subversion.assembla.com/svn/myProject/branches/Release_$Version/com/project
EOF
svn propset svn:externals --file some_temp_file
rm -f some_temp_file 
```

请注意，我还没有测试我的代码片段。

# wordpress - 从设置面板中删除 WP 站点 URL 中的 www

> ID：12403045
> 
> 赞同：0
> 
> 时间：2012-09-13T09:14:34.030
> 
> 标签：wordpress, url

我有一个 Wordpress 网站，我的网站 URL 是[http://www.domainname.com](http://www.domainname.com)

在 wp 设置面板中有两个字段显示 Wordpress 地址： http: [//www.domainname.com](http://www.domainname.com) 站点地址： http: [//www.domainname.com](http://www.domainname.com)

我希望我的网站 URL 为[http://domainname.com](http://domainname.com)

我的问题是，如果我只是更改“站点地址”并从中删除 www，它会对我的站点造成任何伤害吗？[我没有http://domainname.com](http://domainname.com)的域名 我只有 [http://www.domainname.com](http://www.domainname.com) 更改会顺利进行吗？我希望当我的网站访问它时，它会在浏览器的 URL 栏中显示[http://domainname.com](http://domainname.com)。当点击某个帖子或页面时，它将显示[http://domainname.com/postname](http://domainname.com/postname)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:17:17.497

将您的 .htaccess 文件更改为以下内容：

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain.com$ [NC]
RewriteRule ^(.*)$ http://domain.com/$1 [R=301,L] 
```

如果您有任何 Wordpress 永久链接，您也需要将其复制过来。这是一个例子：

```
<IfModule mod_rewrite.c>
RewriteEngine On

#Enter in new lines of code here
RewriteCond %{HTTP_HOST} ^domain.com$ [NC]
RewriteRule ^(.*)$ http://domain.com/$1 [R=301,L]

RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

# ide - 如何使用 IDE 开发 Plone CMS 应用程序？

> ID：12403047
> 
> 赞同：2
> 
> 时间：2012-09-13T09:14:35.310
> 
> 标签：ide, content-management-system, plone

我希望采用 Plone 作为 CMS 解决方案，并想知道是否有任何 IDE 可用于为 Plone CMS 进行所有编程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:27:35.060

Plone 是用 Python 编写的，任何 Python IDE 都很好。

一年前，在迁移到 Sublime Text 2 之前，我个人使用了 Aptana Studio 3 (Eclipse + PyDev)。

设置 Eclipse for Plone 教程（旧）：

[http://plone.org/documentation/kb/developing-plone-with-eclipse](http://plone.org/documentation/kb/developing-plone-with-eclipse)

Eclipse for Plone 的一些示例集成脚本（不再与最新的 Aptana 一起使用，因为它不与 MonkeyEclipse 一起提供）：

[http://pypi.python.org/pypi/collective.eclipsescripts](http://pypi.python.org/pypi/collective.eclipsescripts)

如何为 Plone 和 Python 调整 Sublime Text 2

[http://opensourcehacker.com/2012/05/11/sublime-text-2-tips-for-python-and-web-developers/](http://opensourcehacker.com/2012/05/11/sublime-text-2-tips-for-python-and-web-developers/)

以下是我从 Aptana 迁移到 Sublime Text 2 的利弊

Aptana + PyDev

*   集成 Git 和 SVN 资源管理器

*   您可以在控制台窗口中单击 tracebaxk，它会将您带到该异常中的行

*   自动完成

*   Linter 在后台警告错误代码

*   难以与其他 Python 工具（构建、鸡蛋）集成。事实上，与直接从命令行运行命令相比，与 IDE 打交道的时间更多。

*   在像 Python 这样的动态语言中，您无法应用大部分为 Java 设计的 Eclipse 强大的代码分析和重构功能。

崇高的文字 2

*   法斯特。实际上有3D加速。

*   快速转到任何地方 (CMD+T) 是任何 IDE 或编辑器所能提供的最好的。使您的工作和导航资源真正高效。

*   自动补全（SublimeCodeIntel，实际上比在 Eclipse 中工作得更好）

*   Linter 在后台警告错误代码

*   PEP-8 风格指南检查

*   需要一些时间来设置和适应

*   一种集成的 SVN 和 Git，但甚至没有接近 Eclipse 的水平

*   仍然没有弄清楚如何在窗口中运行 Plone 进程以使回溯可点击

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:28:10.673

您不需要 IDE 即可成为 plone 开发人员，但一个好的编辑器或 IDE 可能会帮助您提高工作效率，具体取决于您的编码风格。

好的编辑器和 IDE 的一些选项是：

*   [崇高文本](https://www.sublimetext.com)（商业，请参阅[http://opensourcehacker.com/2012/05/11/sublime-text-2-tips-for-python-and-web-developers](http://opensourcehacker.com/2012/05/11/sublime-text-2-tips-for-python-and-web-developers)以获取有关如何为 plone 开发设置崇高的一些提示。如果设置得当，它就是一个真正的 IDE）
*   [textmate](http://macromates.com/)（仅限 mac，自版本 2 起开源）
*   vim
*   emacs
*   [Aptana Studio](http://aptana.com/products/studio3)（开源，一个包含 pydev 的 eclipse-spinnoff）
*   [Eclipse](http://www.eclipse.org/)（开源，您可能需要 pydev 和其他插件）
*   [Wing IDE](http://wingide.com)（商业）
*   [ploneide](https://github.com/collective/collective.ploneide)（在 Plone 之上运行的 IDE，仍在进行中）

在长期使用 Eclipse/Apatana Studio 之后，我现在使用 sublime。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T12:15:51.520

plone.ide 是 Franco Pellegrini 最近为 Plone 制作一个用户友好的 IDE 所做的努力。试一试。

[https://github.com/collective/collective.ploneide](https://github.com/collective/collective.ploneide)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T09:03:14.053

您还没有要求免费的解决方案。因此，您必须在 Lennart 的这篇文章和（所有）评论中阅读非常好的分析： [是否有更好的 Python IDE](http://regebro.wordpress.com/2010/10/09/is-there-a-better-python-ide/)

我的选择是 WingIDE。是商业的，但也取决于您的项目是免费的。

请记住，它是用纯 python 编写的，您将编写 python 代码。它具有开发 zope 应用程序的特定项目设置，您可以在下载后几分钟内开始编码。

它有一个与 zope 进程绑定的调试器，并为您提供实时断点功能。只需在您的扩建项目的鸡蛋部分添加“WingDBG”。

您可以自行学习所有其他功能，只需 google 即可。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-13T09:23:03.550

看看你可以用来为 PLONE 配置与 CMS 相关的东西的 IDE [。](http://plone.org/products/zope-externaleditor-client)

# mysql - MySQL 查询缓存效率

> ID：12403053
> 
> 赞同：2
> 
> 时间：2012-09-13T09:14:50.367
> 
> 标签：mysql, ubuntu

我正在使用 MySQLTuner.pl 来优化我的网站....虽然我不完全确定如何解决其中一些问题，并且想知道是否有人可以帮助我。

如果需要使用以下 MySQL 设置的 MySQL，我有大约 4GB 的可用内存：

```
key_buffer      = 100M
max_allowed_packet  = 16M
thread_stack        = 192K
thread_cache_size       = 800

myisam-recover         = BACKUP
max_connections        = 750
table_cache            = 125000
thread_concurrency     = 500

query_cache_type=1
query_cache_limit = 128M
query_cache_size        = 128M

tmp_table_size = 300M
max_heap_table_size = 300M
innodb_buffer_pool_size = 2G
innodb_file_per_table = 0
innodb_flush_log_at_trx_commit = 2 
```

这是我的调谐器的输出

```
-------- General Statistics --------------------------------------------------
[--] Skipped version check for MySQLTuner script
[OK] Currently running supported MySQL version 5.5.24-0ubuntu0.12.04.1
[OK] Operating on 64-bit architecture

-------- Storage Engine Statistics -------------------------------------------
[--] Status: +Archive -BDB -Federated +InnoDB -ISAM -NDBCluster
[--] Data in MyISAM tables: 7K (Tables: 10)
[--] Data in InnoDB tables: 27M (Tables: 5)
[--] Data in PERFORMANCE_SCHEMA tables: 0B (Tables: 17)
[!!] Total fragmented tables: 5

-------- Security Recommendations  -------------------------------------------
[OK] All database users have passwords assigned

-------- Performance Metrics -------------------------------------------------
[--] Up for: 15d 5h 4m 19s (1B q [1K qps], 208M conn, TX: 172B, RX: 98B)
[--] Reads / Writes: 71% / 29%
[--] Total buffers: 2.5G global + 2.7M per thread (750 max threads)
[OK] Maximum possible memory usage: 4.5G (57% of installed RAM)
[OK] Slow queries: 0% (0/1B)
[OK] Highest usage of available connections: 15% (118/750)
[OK] Key buffer size / total MyISAM indexes: 100.0M/119.0K
[OK] Key buffer hit rate: 100.0% (22M cached / 0 reads)
[!!] Query cache efficiency: 0.1% (703K cached / 519M selects)
[OK] Query cache prunes per day: 0
[OK] Sorts requiring temporary tables: 0% (13 temp sorts / 13M sorts)
[OK] Temporary tables created on disk: 25% (4M on disk / 18M total)
[OK] Thread cache hit rate: 99% (752 created / 208M connections)
[OK] Table cache hit rate: 74% (992 open / 1K opened)
[OK] Open file limit used: 0% (68/250K)
[OK] Table locks acquired immediately: 100% (216M immediate / 216M locks)
[OK] InnoDB data size / buffer pool: 27.8M/2.0G

-------- Recommendations -----------------------------------------------------
General recommendations:
Run OPTIMIZE TABLE to defragment tables for better performance
Enable the slow query log to troubleshoot bad queries
Variables to adjust:
query_cache_limit (> 128M, or use smaller result sets) 
```

的输出`SHOW STATUS LIKE '%cache%'`是

```
Binlog_cache_disk_use   0
Binlog_cache_use    0
Binlog_stmt_cache_disk_use  0
Binlog_stmt_cache_use   0
Com_assign_to_keycache  0
Qcache_free_blocks  19
Qcache_free_memory  134026728
Qcache_hits 704192
Qcache_inserts  143569852
Qcache_lowmem_prunes    0
Qcache_not_cached   11043040
Qcache_queries_in_cache 94
Qcache_total_blocks 217
Ssl_callback_cache_hits 0
Ssl_session_cache_hits  0
Ssl_session_cache_misses    0
Ssl_session_cache_mode  NONE
Ssl_session_cache_overflows 0
Ssl_session_cache_size  0
Ssl_session_cache_timeouts  0
Ssl_used_session_cache_entries  0
Threads_cached  748 
```

有什么我还可以改进以获得更好的性能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:34:05.557

“查询缓存效率：0.1%（703K 缓存/519M 选择）”表示您在缓存生命周期内没有重复查询。

这可能是由于三个因素造成的：缓存生命周期太小而无法显示重复，或者您的查询太大或不同而无法缓存。

例如，一些框架会运行一个大的`SELECT`然后“过滤”它服务器端（甚至可能*缓存*它服务器端）。MySQL 看到的是一个可能被认为最好不缓存的大型查询，并且*MySQL*效率下降，而*整体*效率保持不变。

或者您可能有许多不同的客户端，并且每个客户端都使用自定义数据（例如，它们的消息表内容）运行一些查询。如果您有 1000 个客户，每个客户占用 1 MB，并且每个客户每分钟检查一次消息，如果您有 1 GB 专用于此类查询，您将看到每小时有 1000 次未命中和 59000 次命中。但是如果你只有 999 兆，最后一个客户端将从缓存中刷新第一个客户端，然后第一个客户端再次出现并丢失并刷新*第二个*客户端，依此类推；在同一小时内，您会看到 6 万次*未命中*，效率从 98% 下降到 0%。

因此，首先您需要仔细查看*您正在运行的查询*。也许其中一些可以优化，缓存方式：一个大查询运行两次，两个细化而不是两个大查询，第一个被缓存。但请记住，您这样做可能会牺牲效率。

从你的其他结果来看，情况似乎如此。您有大量的插入、大量的空闲查询缓存内存，但命中率却很少。因此，显然您的所有查询都彼此不同：在*这种*情况下，您希望*减少*查询缓存内存以释放内存用于任何其他目的。即使点击率进一步下降，阿姆达尔定律也会确保与查询相关的性能不会那么相关（你损失了 0.01% 的 50%，你实际上损失了 0.005%；不要让“*百分之五十的损失！* ”吓到你）。

```
Qcache_free_memory  134,026,728
Qcache_hits             704,192
Qcache_inserts      143,569,852 
```

肯定不会受到伤害的是检查哪些查询可能*不值得*，并且可以使用`SQL_NO_CACHE`. 它们仍然会成为缓存未命中，但不会降低其他查询的性能，这可能会找到更多内存并提高其性能。无论如何，这都是零成本，所以总是可以做到的（当然，对于足够大的查询，它们值得麻烦！）。

完成此操作后，您可以试验该`query_cache_size`参数。检查其他组件正在使用多少内存，以及*文件系统*缓存的性能。您不希望加快查询速度并看到页面出现两次，因为视图和控制器组件检索已经把它弄到了脖子上。

您可能想要查看的另一件事是索引。您可以降低慢查询限制并检查是否有查询运行速度明显慢于其他查询，并通过查看他们的查询计划来检查原因。

# python - pymongo 和 VERSION 中都不存在 FIND 方法？

> ID：12403057
> 
> 赞同：4
> 
> 时间：2012-09-13T09:15:30.900
> 
> 标签：python, pymongo

我正在尝试使用带有暂存数据库的 pymongo 做一些简单的事情。所以像往常一样的第一件事

```
import pymongo
connection = pymongo.Connection(host = 'mongodb://username:password@alaki-staging.member0.mongolayer.com:37017,/dbname?safe=true&slaveOk=true&fsync=true&journal=true&ssl=true') 
```

现在只是

```
connection.find({})
> Traceback (most recent call last):
  File "D:\MypythonCode\test.py", line 7, in <module>
    connection.find({})
  File "C:\Python27\lib\site-packages\pymongo\database.py", line 769, in __call_
_
    self.__name, self.__connection.__class__.__name__))
TypeError: 'Database' object is not callable. If you meant to call the 'find' me
thod on a 'Connection' object it is failing because no such method exists.

C:\Python27>python.exe D:\MypythonCode\test.py > test.d
Traceback (most recent call last):
  File "D:\MypythonCode\test.py", line 7, in <module>
    connection.find({})
  File "C:\Python27\lib\site-packages\pymongo\database.py", line 769, in __call_
_
    self.__name, self.__connection.__class__.__name__))
TypeError: 'Database' object is not callable. If you meant to call the 'find' me
thod on a 'Connection' object it is failing because no such method exists. 
```

甚至检查版本！？

```
connection.version()

Traceback (most recent call last):
  File "test.py", line 7, in <module>
    connection.version()
  File "C:\Python27\lib\site-packages\pymongo\database.py", line 769, in __call_
_
    self.__name, self.__connection.__class__.__name__))
TypeError: 'Database' object is not callable. If you meant to call the 'version'
 method on a 'Connection' object it is failing because no such method exists.
Press any key to continue . . . 
```

有什么建议吗？！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-13T09:28:58.463

为何要

```
connection.find({}) 
```

工作？

您在没有阅读有关 MongoDB 和 PyMongo 的基础知识的情况下猜测 API 方法。

find() 显然是一个集合而不是连接的方法。

```
row = connection.your_collection.find() 
```

是你什么。

请在修改和猜测 API 的使用方式之前阅读文档。

PyMongo 文档充满了示例。

# c++ - 在 boost::property_tree 中添加 boost::any 可能吗？

> ID：12403067
> 
> 赞同：2
> 
> 时间：2012-09-13T09:16:39.197
> 
> 标签：c++, boost, c++11, boost-propertytree, boost-any

我正在尝试将 boost::any 类型存储到 boost 属性树。这是一些可运行的示例：

```
#include <string>
#include <vector>
#include <sstream>
#include <iostream>
#include <sys/types.h>
#include <boost/any.hpp>
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/json_parser.hpp>

int main()
{
    boost::property_tree::ptree pTree_Root;
    pTree_Root.put("sigRoot.property1", "value1");
    pTree_Root.put("sigRoot.property2", "value2");
    pTree_Root.put("sigRoot.property3", "value3");

    std::vector<std::string> vecString;

    for(int i = 0; i <= 5; i++) {
        vecString.push_back("somestring");
    }

    boost::any anyVar = vecString;

    pTree_Root.put("sigRoot.property4", anyVar);

    std::stringstream ss;
    boost::property_tree::json_parser::write_json(ss, pTree_Root);
    std::string jsonString = ss.str();

    jsonString.erase(std::remove(jsonString.begin(), jsonString.end(), '\n'), jsonString.end());

    std::cout << jsonString << std::endl;

  return 0;
} 
```

这不起作用，可能出于同样的原因 boost::any 不可序列化。但我看到我可以查询`anyVar.type()`，但我不知道可以用它做什么。是否可以以某种方式使用`auto`或其他方式将数据添加到属性树，而无需在此处显式编码固定数量的已知类型？也欢迎使用 C++11/C++0x 方法。

这是我得到的错误：

```
In file included from /usr/include/boost/property_tree/ptree.hpp:17:0,
                 from pTreeTest.cpp:8:

/usr/include/boost/property_tree/stream_translator.hpp: In static member function ‘static void boost::property_tree::customize_stream<Ch, Traits, E, Enabler>::insert(std::basic_ostream<_Ch, _Tr>&, const E&) [with Ch = char, Traits = std::char_traits<char>, E = boost::any, Enabler = void]’:
/usr/include/boost/property_tree/stream_translator.hpp:199:13:   instantiated from ‘boost::optional<std::basic_string<Ch, Traits, Alloc> > boost::property_tree::stream_translator<Ch, Traits, Alloc, E>::put_value(const E&) [with Ch = char, Traits = std::char_traits<char>, Alloc = std::allocator<char>, E = boost::any]’
/usr/include/boost/property_tree/detail/ptree_implementation.hpp:795:54:   instantiated from ‘void boost::property_tree::basic_ptree<Key, Data, KeyCompare>::put_value(const Type&, Translator) [with Type = boost::any, Translator = boost::property_tree::stream_translator<char, std::char_traits<char>, std::allocator<char>, boost::any>, Key = std::basic_string<char>, Data = std::basic_string<char>, KeyCompare = std::less<std::basic_string<char> >]’
/usr/include/boost/property_tree/detail/ptree_implementation.hpp:817:13:   instantiated from ‘boost::property_tree::basic_ptree<K, D, C>& boost::property_tree::basic_ptree<Key, Data, KeyCompare>::put(const path_type&, const Type&, Translator) [with Type = boost::any, Translator = boost::property_tree::stream_translator<char, std::char_traits<char>, std::allocator<char>, boost::any>, Key = std::basic_string<char>, Data = std::basic_string<char>, KeyCompare = std::less<std::basic_string<char> >, boost::property_tree::basic_ptree<Key, Data, KeyCompare>::path_type = boost::property_tree::string_path<std::basic_string<char>, boost::property_tree::id_translator<std::basic_string<char> > >]’
/usr/include/boost/property_tree/detail/ptree_implementation.hpp:832:72:   instantiated from ‘boost::property_tree::basic_ptree<K, D, C>& boost::property_tree::basic_ptree<Key, Data, KeyCompare>::put(const path_type&, const Type&) [with Type = boost::any, Key = std::basic_string<char>, Data = std::basic_string<char>, KeyCompare = std::less<std::basic_string<char> >, boost::property_tree::basic_ptree<Key, Data, KeyCompare>::path_type = boost::property_tree::string_path<std::basic_string<char>, boost::property_tree::id_translator<std::basic_string<char> > >]’

pTreeTest.cpp:26:47:   instantiated from here
/usr/include/boost/property_tree/stream_translator.hpp:33:13: error: cannot bind ‘std::basic_ostream<char>’ lvalue to ‘std::basic_ostream<char>&&’
/usr/include/c++/4.6/ostream:581:5: error:   initializing argument 1 of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&&, const _Tp&) [with _CharT = char, _Traits = std::char_traits<char>, _Tp = boost::any]’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T09:25:40.210

`boost::any`没有`operator <<`。_ 你不能`any`在`property_tree`. `anyVar.type()`返回`std::typeinfo`，此类提供`runtime`有关类型的信息。

```
template<typename Type, typename Translator> 
  self_type & put(const path_type & path, const Type & value, Translator tr); 
```

> 将给定路径上的节点值设置为提供的值，转换为树的数据类型。如果节点不存在，则创建它，包括它所有缺失的父节点。

您可以创建`Translator`并将其传递给函数 put，因为您的翻译`ptree`器确实`basic_ptree<std::string, std::string>`应该将您转换`any`为`string`.

翻译器的简单示例

```
struct SimpleTranslator
{
public:
   boost::optional<std::string> put_value(const boost::any& value)
   {
      if (value.type() == typeid(std::vector<std::string>))
      {
         std::stringstream ss;
         std::vector<std::string> vec = boost::any_cast<std::vector<std::string>>(value);
         std::copy(vec.begin(), vec.end(), std::ostream_iterator<std::string>(ss));
         return ss.str();
      }
      return boost::optional<std::string>();
   }
}; 
```

[http://liveworkspace.org/code/275820c1becfb63deda4e4eed8524833](http://liveworkspace.org/code/275820c1becfb63deda4e4eed8524833)

# javascript - 将插件制作的 Javascript 包含到 html 按钮中

> ID：12403070
> 
> 赞同：0
> 
> 时间：2012-09-13T09:17:00.817
> 
> 标签：javascript, html, button, include

我们有一个生成 JavaScript 文件[的插件。](http://jira.bltelecoms.net:8080/s/en_UScyxsyn/664/8/1.0.23-beta/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=e125274b)我们想从一个 html 按钮中运行/执行这个 js 文件，例如：

```
<input type=button value="Open js" onclick="javascript:window.open('http://jira.bltelecoms.net:8080/s/en_UScyxsyn/664/8/1.0.23-beta/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=e125274b','_self')" /> 
```

我们使用名为 Jira 和 Confluence 的第三方 Web 应用程序，它是 Atlassian 套件的一部分。它是一个问题跟踪软件，它使用一个插件来创建这个 JavaScript 文件，该文件会弹出一个类似于灯箱的窗口，您可以在其中填写数据并发送它。默认情况下，它会在页面的一侧触发，我们希望如何从标准的 html 按钮执行它。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:19:03.357

您可以创建一个包含脚本的新页面，然后单击打开此页面。

或者这个怎​​么样：

```
function loadScript() {
  var s = document.createElement('script');
  s.src = "http://jira.bltelecoms.net:8080/s/en_UScyxsyn/664/8/1.0.23-beta/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=e125274b";
  document.body.appendChild(s);
}

onclick="loadScript();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T10:41:53.767

我知道这是一个老话题，但请参阅以下链接：

[https://confluence.atlassian.com/display/JIRA/Advanced+Use+of+the+JIRA+Issue+Collector#AdvancedUseoftheJIRAIssueCollector-手动添加自定义触发功能](https://confluence.atlassian.com/display/JIRA/Advanced+Use+of+the+JIRA+Issue+Collector#AdvancedUseoftheJIRAIssueCollector-Addingthecustomtriggerfunctionmanually)

这显示了如何为 JIRA 问题收集器设置自定义触发器。您将需要一个函数来扩展全局对象 ATL_JQ_PAGE_PROPS，如下所示（jquery 必须可用）。

```
 window.ATL_JQ_PAGE_PROPS = $.extend(window.ATL_JQ_PAGE_PROPS, {

    // ==== custom trigger function ====
    triggerFunction : function( showCollectorDialog ) {
        $('#feedback-button').on( 'click', function(e) {
            e.preventDefault();
            showCollectorDialog();
        });

        // add any other custom triggers for the issue collector here
    }

}); 
```

因此，单击带有 id="feedback-button" （或您想要提供的任何其他 id）的 DOM 元素将触发您的问题收集器脚本。

请记住，问题收集器需要指定“自定义”触发器。您可以通过在 JIRA 中对其进行编辑来完成此操作。

希望这可以帮助

# c# - C# httpwebrequest 得到 401 未授权

> ID：12403081
> 
> 赞同：1
> 
> 时间：2012-09-13T09:17:38.080
> 
> 标签：c#, httpwebrequest, http-status-code-401, unauthorized

```
try
{
     HttpWebRequest request = (Http WebRequest)WebRequest.Create("http://yigg.de/login");
     request.Method = "GET";
     request.Timeout = 10000;
     request.ReadWriteTimeout = 30000;
     request.ContentType = "application/x-www-form-urlencoded";
     request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
     request.Headers["Accept-Language"] = "en-us,en;q=0.5";
     request.Headers["Accept-Charset"] = "ISO-8859-1,utf-8;q=0.7,*;q=0.7";
     request.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.3) Gecko/20100401 Firefox/3.6.3 (.NET CLR 3.5.30729) (Prevx 3.0.5)";
     CredentialCache cc = new CredentialCache();
     cc.Add(new Uri("http://yigg.de/login"), "Basic", new NetworkCredential("user", "pass"));
     request.Credentials = cc;
     request.CookieContainer = container;
     HttpWebResponse response = (HttpWebResponse)request.GetResponse();
     StreamReader reader = new StreamReader(response.GetResponseStream());
     string htmldoc = reader.ReadToEnd();
     response.Close();
     return htmldoc;
}
catch (Exception ex)
{
     return ex.Message;
} 
```

我使用上面的代码，我总是得到“远程服务器返回错误：（401）未经授权”。请帮我。谢谢！

# tcl - 如何在 tcl 中实现 goto

> ID：12403083
> 
> 赞同：1
> 
> 时间：2012-09-13T09:17:41.807
> 
> 标签：tcl

我想知道如何在 tcl 中实现 GOTO。我正在编写一个测试用例，其中我说了 5 个步骤。如果我的第 1 步失败，我不想继续进行，我想跳过现有的内容并转到一个常见的清理部分。

如果 tcl 中有任何 GOTO 命令，请帮助我。

谢谢，拉米亚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:03:46.027

# php - preg_replace_callback：将替换回调作为变量传入不起作用

> ID：12403084
> 
> 赞同：0
> 
> 时间：2012-09-13T09:17:43.133
> 
> 标签：php, callback, preg-replace-callback

这不起作用

```
 $check["pattern"] = "/correct/";
    $callback = "function ($m) { return ucfirst($m[0]);}";
    echo preg_replace_callback($check["pattern"],$callback,"correct" );

output: correct 
```

这有效

```
 $check["pattern"] = "/correct/";
    echo preg_replace_callback($check["pattern"],function ($m) { return ucfirst($m[0]);},"correct" );

output: Correct 
```

为什么，以及如何使它与存储在 var 中的函数一起工作？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:20:58.633

你为什么想这么做？老实说，我认为没有理由将函数存储在变量中。不过，如果您真的想这样做，请查看[create_function](http://nl.php.net/create_function)：

```
<?php
$check["pattern"] = "/correct/";
$callback = create_function('$m', 'return ucfirst($m[0]);');
echo preg_replace_callback( $check['pattern'], $callback, "correct" );

// Output: "Correct" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:21:48.263

如果你对`$callback = "function ($m) { return ucfirst($m[0]);}";`结果做一个 var_dump 是一个**字符串**。在工作情况下，您传递一个闭包（匿名函数）作为回调。

[手册](http://php.net/manual/en/language.types.callable.php)很清楚：允许使用闭包，如果传递字符串，则它必须是函数的**名称**。

# javascript - 带有 url 的单页网站导航

> ID：12403090
> 
> 赞同：1
> 
> 时间：2012-09-13T09:18:00.010
> 
> 标签：javascript, jquery, navigation, hyperlink

我有一个单页网站和上面的链接，例如`<a href="#block1">link1</a>`. 浏览器地址栏显示**site.com/#block1**

我希望浏览器给出类似**site.com/block1**的行，然后单击链接**site.com/block1**浏览器将打开滚动页面到所需的块。

这个 jsfiddle 很简单，但它不起作用 [http://jsfiddle.net/26LRA/2/](http://jsfiddle.net/26LRA/2/)

应该没有魔法，没有 php、cms、sql 和不同的插件。只有纯 javascript/jquery

补充：我想给你这个网站[http://www.ascensionlatorre.com](http://www.ascensionlatorre.com)，但我看不懂他们的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:26:12.393

你的意思是你只想明显地改变网址：

```
$("#name0 a").click(function(e) {
    e.preventDefault();
    var id = $(this).attr('href').substring(1);
    $('html,body').animate({scrollTop: $('#'+id).offset().top}, 'fast');
    window.history.pushState("", "", '/' + id);
}); 
```

[例子](http://jsfiddle.net/HLBhm/)

要使您需要的链接实际工作`mod_rewrite`，请创建一个`.htaccess`并添加：

```
RewriteRule ^portfolio$ /index.php/#$1 [QSA,NE] 
```

阅读网址

```
var path = document.location.pathname;
path = path.substring(path.lastIndexOf('/'), 1);
if(path){
    $('html,body').animate({scrollTop: $('#'+path).offset().top}, 'fast');
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T09:21:56.490

我认为正确的方法是在你的 .htaccess 中使用 mod_rewrite。

# javascript - 如何在 Symfony2 中的表单小部件中包含 javascript

> ID：12403091
> 
> 赞同：0
> 
> 时间：2012-09-13T09:18:05.760
> 
> 标签：javascript, forms, symfony, twig, symfony-2.1

我想在 Symfony2 的表单小部件中包含 JavaScript，但引号在 JavaScript 命令中被转义，请参阅：

```
{{ form_widget(form.sdf, 
    { 'attr': { 'value': "document.MSketch.getMol('sdf');" } } 
) }} 
```

我得到的结果：

```
<input type="hidden" id="form_sdf" name="form[sdf]" required="required" value="document.MSketch.getMol(&#039;sdf&#039;);" /> 
```

我已经阅读了这个主题：[Twig and autoescaping](https://stackoverflow.com/questions/10209345/twig-and-autoescaping) 但是 autoescape false 在像这样使用它时不起作用：

```
{% autoescape false %}
{{ form_widget(form.sdf, 
    { 'attr': { 'value': "document.MSketch.getMol('sdf');" } } 
) }}
{% endautoescape %} 
```

如何有报价？

**编辑：**使用原始过滤器没有帮助：

```
{% set cmd = 'document.MSketch.getMol("sdf");' %}
{{ form_widget(form.sdf, { 'attr': { 'value': cmd|raw } } ) }} 
```

但是原始过滤器在 form_widget 之外工作，那么问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:38:49.897

您是否尝试过简单地转义引号？`\'`或者`\"`

# java - 用数组排序

> ID：12403092
> 
> 赞同：0
> 
> 时间：2012-09-13T09:18:10.427
> 
> 标签：java, arrays, sorting

我正在测试不同的排序方法（选择、气泡插入），并且我正在尝试同时使用 Comparator。

到目前为止，我有两节课；主要和选择排序。

我的主要看起来像这样：

```
public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {
        String[] anArray = {"Ludo", "matador", "ChessTitan", "Rottefælden"};

        for (int i=0; i<anArray.length-1; i++) {
            for (int j=i+1; j<anArray.length; j++) {
                if (anArray[j].compareTo(anArray[i]) < 1) {

                    String temp = anArray[i];
                    anArray[i] = anArray[j];
                    anArray[j] = temp;

                }
            }

        }

        for (String string : anArray) {
            System.out.println(string);
        }
    }
} 
```

我的 selectionSort 看起来像这样：

```
public class SelectionSort implements Comparator<String> {

    @Override
    public int compare(String o1, String o2) {      
        return o1.compareTo(o2);
    }
} 
```

我想做的是在使用选择排序时使用我的比较器。

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:22:54.233

替换这一行：

```
if (anArray[j].compareTo(anArray[i]) < 1) { 
```

有了这个：

```
if (comparator.compare(anArray[j],anArray[i]) < 1) { 
```

`comparator`您要使用的比较器的实例在哪里。

* * *

由于您的 Comparator 没有状态，您可能希望将其分配给静态最终字段。

```
private static final Comparator<String> COMP = new SelectionSort(); 
```

所以现在上面的代码将读取

```
if (COMP.compare(anArray[j],anArray[i]) < 1) { 
```

* * *

这是您最后一个问题的解决方案。创建两个重载的静态方法，一个带有 Comparator，一个不带，然后还创建一个使用自然顺序的 Comparator（令人惊讶的是，据我所知，JDK 中没有这样的东西）。像这样的东西：

```
private static final Comparator<? extends Comparable> NATURAL_ORDER = new Comparator<Comparable>() {
    @Override
    public int compare(final Comparable o1, final Comparable o2) {
        return o1.compareTo(o2);
    }
};

private static <T> Comparator<T> naturalOrder() {
    return (Comparator<T>) NATURAL_ORDER;
}

public static <T> void sort(final T[] array) {
    if (!Comparable.class.isAssignableFrom(array.getClass().getComponentType())) {
        throw new IllegalArgumentException(
              "Array Component Type must implement Comparable");
    }

    sort(array, naturalOrder());
}

public static <T> void sort(final T[] array, final Comparator<? super T> comparator) {
    // implement sort here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:20:47.490

您可以使用[Arrays.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)

```
Arrays.sort(myArray, myComparator) 
```

然后你可以传入任何你想要的比较器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:25:14.343

您可以创建实例`SelectionSort`以使用它进行比较

```
SelectionSort selectionSort = new SelectionSort();
if (selectionSort.compare(anArray[i], anArray[j]) < 1) { 
```

# hibernate - 逆向工程或正向工程是 JPA/Hibernate 更好吗

> ID：12403094
> 
> 赞同：3
> 
> 时间：2012-09-13T09:18:18.907
> 
> 标签：hibernate, reverse-engineering

如果我们在项目中使用 JPA/Hibernate，我们可以从 DB 中获得 Generate the Entity 类有什么优势吗？，因为如果我们遵循这种方式，我有很多返工的经验，我们无法获得 JPA 的优势/Hibernate，有很多我们可以使用的构建功能。那么当我们使用 JPA/Hibernate 时，谁能告诉我做正向工程和逆向工程的利弊？我个人的看法是，如果我们使用 JPA/Hibernate 我们应该使用正向工程

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:50:08.473

好吧，还有“中间”设计，这是迄今为止最好*的选择*。当没有选择时，正向和逆向工程开始发挥作用；当您有一个已经存在的关系或域模型时。“中间”设计同时构建了关系模型和域模型，同时认识到它们相互之间具有协同作用和阻碍，所有这些最好一起解决。

话虽如此，从定义明确的关系模型执行逆向工程通常不是一个巨大的障碍。在关系模型设计不佳的情况下（恕我直言），这种情况开始出现问题（并且您往往会看到很多“返工”）。

# jquery - 调整 DIV 面板的大小

> ID：12403095
> 
> 赞同：8
> 
> 时间：2012-09-13T09:18:19.540
> 
> 标签：jquery, resizable

我正在做一个网站项目，我需要添加一个**可调整大小**的面板，如 jsfiddle 或 hotmail（hotmail 的左侧面板包含您的邮件，右侧的内容面板可以阅读您的邮件......）

我查看了 jQuery 并尝试了很多次，但我无法设置**处理程序**。我只需要制作一个可以水平调整大小的面板。

那么我该怎么做呢？你能帮我完成我的代码吗（需要在 left_panel 和内容之间调整大小。调整大小将调整 left_panel 的大小，当然**内容会受到影响。**）

```
> http://jsfiddle.net/QkZL8 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T09:21:11.743

小提琴不起作用，因为不包括 jQuery UI（所以不知道 jQuery UI 可调整大小），而且你犯了语法错误，你应该这样做：

```
$(resize).resizable({
    handles: 'w'
}); 
```

不是这个：

```
$(resize).resizable({,,
    handles: 'w', 
}); 
```

正如大卫在评论中所说，您应该使面板本身可调整大小，而不是中间分隔符元素。在调整大小处理程序中，您可以调整另一个面板的大小，使其宽度与您实际调整大小的面板的宽度互补。

**更新**：这应该让你走上正确的轨道：

```
$(resize).resizable({
    // only use the eastern handle
    handles: 'e',
    // restrict the width range
    minWidth: 120,
    maxWidth: 450,
    // resize handler updates the content panel width
    resize: function(event, ui){
        var currentWidth = ui.size.width;

        // this accounts for padding in the panels + 
        // borders, you could calculate this using jQuery
        var padding = 12; 

        // this accounts for some lag in the ui.size value, if you take this away 
        // you'll get some instable behaviour
        $(this).width(currentWidth);

        // set the content panel width
        $("#content").width(containerWidth - currentWidth - padding);            
    }
}); 
```

**更新 2**：我在示例中添加了 minWidth 和 maxWidth 选项，因此您只能在这些边界内调整左列的大小。

[更新的小提琴在这里](http://jsfiddle.net/QkZL8/15/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T09:50:10.423

好的，所以如果您仍然迷路，我制作了一个快速模型......所以代码是......

```
<html>
    <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $(".resize").resizable();           
        });
    </script>
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css"/>
    <style type="text/css">
        body, html
        {
            margin: 0px;
            border: 0px;
            padding: 0px;

        }

        .resize
        {
            position: fixed;
            left: 0px;
            height: 100%;
            background: blue;
            cursor:pointer;         
            max-width: 300px;
            padding: 20px;
        }

    </style>
    </head>
    <body>
<div class="resize">
    <p>
       Nullam vitae eros sapien. Nulla sit amet ipsum sagittis felis lobortis imperdiet eget eu est. Pellentesque tincidunt dictum libero, vitae sagittis augue interdum ac. Nam cursus, ante eget consequat mollis, mauris justo consequat tellus, at rutrum justo dolor ut tellus. Curabitur interdum, augue a aliquam tempus, neque lectus rhoncus lorem, sed mattis velit purus eu nibh. Donec adipiscing condimentum eros ac convallis. Morbi purus felis, condimentum at rutrum nec, auctor quis mi. Sed odio turpis, blandit vitae sagittis a, accumsan rutrum risus. Sed ultricies congue quam, consectetur porttitor augue ultrices non. Mauris cursus quam sed eros fermentum scelerisque. Mauris nisi purus, iaculis ac pulvinar ac, rhoncus a est. Quisque vitae mollis lacu
    </p>
</div>
<div class="noneresize">
    <p> 
        This element is not the resizing one
    </p>
</div>

    </body>
</html>
​ 
```

​这适用于水平和垂直方向。

**编辑** 另一个示例

```
<html>
    <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $(".resize").resizable();           
        });
    </script>
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css"/>
    <style type="text/css">
        body, html
        {
            margin: 0px;
            border: 0px;
            padding: 0px;

        }

        .holder div
        {
            float: left;            
        }

        .resize
        {
            position: relative;
            height: 100%;
            background: blue;
            cursor:pointer;         
            max-width: 300px;
            padding: 20px;
        }

        .holder
        {
            position: relative;
            width: 100%;
            height: 100%;

        }

    </style>
    </head>
    <body>
<div class="holder">
    <div class="resize">
        <p>
           Nullam vitae eros sapien. Nulla sit amet ipsum sagittis felis lobortis imperdiet eget eu est. Pellentesque tincidunt dictum libero, vitae sagittis augue interdum ac. Nam cursus, ante eget consequat mollis, mauris justo consequat tellus, at rutrum justo dolor ut tellus. Curabitur interdum, augue a aliquam tempus, neque lectus rhoncus lorem, sed mattis velit purus eu nibh. Donec adipiscing condimentum eros ac convallis. Morbi purus felis, condimentum at rutrum nec, auctor quis mi. Sed odio turpis, blandit vitae sagittis a, accumsan rutrum risus. Sed ultricies congue quam, consectetur porttitor augue ultrices non. Mauris cursus quam sed eros fermentum scelerisque. Mauris nisi purus, iaculis ac pulvinar ac, rhoncus a est. Quisque vitae mollis lacu
        </p>
    </div>
    <div class="noneresize">
        <p> 
            This element is not the resizing one
        </p>
    </div>
</div>

    </body>
</html>
​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T09:22:01.397

怎么样使用像剑道分离器完成的任何东西：[http ://demos.kendoui.c​​om/web/splitter/index.html](http://demos.kendoui.com/web/splitter/index.html)

-大卫

# emacs - Dired：如何以超级用户身份执行 chown？

> ID：12403098
> 
> 赞同：3
> 
> 时间：2012-09-13T09:18:24.157
> 
> 标签：emacs, dired, chown

我正在处理从远程存储库检查的代码，其中一些代码进入了该存储库，其中“root”作为文件所有者。现在我想将包含 repo 的目录移动到另一个地方，但是在普通用户下删除旧文件失败。也`dired-do-chown`失败了，因为我需要成为 root 才能更改文件所有者。

有没有办法以root身份调用dired命令？（比如寻找文件的流浪汉）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:58:16.573

是的，只需`/sudo:root@localhost/...`在`C-x C-f`要求您输入文件名时输入。这将打开一个 trampified dired where`dired-do-chown`和其他 dired 命令工作得很好。

（请注意，您可以按`TAB`after `/sudo:`，迷你缓冲区完成将插入`@localhost`样板。）

# php - cake php重定向到空白页面

> ID：12403112
> 
> 赞同：1
> 
> 时间：2012-09-13T09:19:20.940
> 
> 标签：php, cakephp, cakephp-2.1

**Edit1：**当我的目录是 www/cake/cake2.1/app 它工作正常但是当它的 www/cake/app 我面临以下问题。

嗨，我刚开始做蛋糕 php 正在做博客教程。我正在尝试按照教程创建一个表单并将值存储在数据库中，我遵循了所有步骤。

问题是值正在存储到 Db 中，但我被重定向到空白页。

**控制器：**

```
<?php
class PostsController extends AppController {

    public $helpers = array('Html', 'Form');

    public function index(){
        $this->set('posts', $this->Post->find('all'));
    }

    function view($id = null) {        
        $this->Post->id = $id;        
        $this->set('post', $this->Post->read());    
    }
    function add(){
        if($this->request->is('post')){
            if($this->Post->save($this->request->data)){
                $this->Session->setFlash('Your post has been saved.');
                $this->redirect(array('action'=>'index'));
            }else{
                $this->Session->setFlash('Unable to add your post.');
            }
        }
    }
} 
```

重定向没有正确发生，它显示一个带有 url hxxp://localhost/cake/posts/add 的空白页面

即使尝试过 `$this->redirect('http://www.google.com');`也没有任何帮助？

后模型：

```
<?php
class Post extends AppModel {
    public $validate = array(
        'title' => array(
            'rule' => 'notEmpty'
        ),
        'body' => array(
            'rule' => 'notEmpty'
        )
    );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:51:49.583

这可能是由于文件末尾的空白

请检查您的文件，如果在 '?>' 标记后有空格，它会将其重定向到空白页

或者您可以删除 '?>'（关闭 php 标记）来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:12:01.650

找到答案：zip 提取不正确我所做的只是再次提取 zip 文件并运行我的代码并欢呼……它运作良好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:21:30.103

您有语法错误。`}`在方法结束时有两个关闭`add()`。删除一个，它应该没问题。

还值得关注错误日志，`/app/tmp/log/error.log`它会提醒您此类错误。

# android - CursorAdapter 并不总是在 AutoCompleteTextView 上工作

> ID：12403114
> 
> 赞同：1
> 
> 时间：2012-09-13T09:19:33.003
> 
> 标签：android, sqlite, autocompletetextview, android-cursoradapter

我在 AutoCompleteTextView 上实现 CursorAdapter 时遇到问题。

ZipCode : ***_*** (<--EditText)
City : ***_* ___** (<-- AutoCompleteTextView)
基本上，我想帮助用户为输入的邮政编码推荐可用的城市。我的问题是没有显示建议（我猜光标不会启动查询）。我不明白为什么它在某些情况下有效，而在其他情况下无效。我在下面附上故障案例。

**我的光标适配器：**

```
public class SearchCursorAdapter extends CursorAdapter {

    private DataBaseHelper mDbHelper;
    private String codePostal;

    public SearchCursorAdapter(DataBaseHelper dbHelper, Context context,
            String codePostal) {
        // Call the CursorAdapter constructor with a null Cursor.
        super(context, null, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
        mDbHelper = dbHelper;
        this.codePostal = codePostal;
    }

    @Override
    public Cursor runQueryOnBackgroundThread(CharSequence constraint) {
        if (getFilterQueryProvider() != null) {
            return getFilterQueryProvider().runQuery(constraint);
        }

        Cursor cursor = mDbHelper.getStationCursor(constraint.toString(),
                codePostal);
        return cursor;
    }

    @Override
    public String convertToString(Cursor cursor) {
        return cursor.getString(1); //second column in select
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        ((TextView) view).setText(cursor.getString(1)); //second column in select
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.spinner_layout, null);
        return view;
    }
} 
```

**来自 db 适配器的 select 方法：**

```
public Cursor getStationCursor(String args, String arg2) {

StringBuffer sqlQuery = new StringBuffer("");
    Cursor result = null;

    sqlQuery.append(" SELECT min(_id) as _id, ");
    sqlQuery.append(CITIES.CITY);
    sqlQuery.append(" FROM ");
    sqlQuery.append(CITIES.TABLE_NAME);
    sqlQuery.append(" WHERE ");
    sqlQuery.append(CITIES.CITY);
    sqlQuery.append(" LIKE '");
    sqlQuery.append(args);
    sqlQuery.append("%' ");
    sqlQuery.append("AND ");
    sqlQuery.append(CITIES.CODE_POSTAL);
    sqlQuery.append(" LIKE '");
    sqlQuery.append(arg2);
    sqlQuery.append("%' ");
    sqlQuery.append(" GROUP BY ");
    sqlQuery.append(CITIES.CITY);
    sqlQuery.append(" ORDER BY ");
    sqlQuery.append(CITIES.CITY);
    sqlQuery.append(" LIMIT 10 ");

    if (myDataBase != null) {
        result = myDataBase.rawQuery(sqlQuery.toString(), null);
    }
    if (result != null) {
        result.moveToFirst();
    }
    return result;
} 
```

**我活动中的代码：**

```
EditText etCodPost;
AutoCompleteTextView acCity;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout....);
    etCodPost = (EditText) ...;
    acCom = (AutoCompleteTextView) ...;
    setComAdapter(activity);
    etCodPost.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }

            @Override
            public void afterTextChanged(Editable s) {
                setComAdapter(activity);
            }
        });
}
private void setComAdapter(Activity activity) {
        SearchCursorAdapter adapt = new SearchCursorAdapter(myDbHelper, activity,
                 etCodPost.getText().toString());

        acCity.setAdapter(adapt);
        acCity.setThreshold(3);
    } 
```

感谢您的回复，很抱歉发了这么长的帖子。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:00:05.337

您至少没有提到过滤失败的一种情况，因此下面的行更多来自猜测：

我认为您设置了错误的过滤。每次用户输入代码时都不需要设置适配器，更简单的解决方案是在活动类中有一个字段，一个`int`（或`String`来自您的代码）将用作查询的一部分。

```
@Override
public void afterTextChanged(Editable s) {
     mCode = s.toString;
} 
```

接下来，可以像这样改进适配器级别的过滤：

```
@Override
public Cursor runQueryOnBackgroundThread(CharSequence constraint) {
    if (constraint == null || constraint.toString.equals("")) {
        // this is the contract of this method and should be respected 
        return mDbHelper.getAllCityRecords(); // get all records
    }
    return mDbHelper.getStationCursor(constraint.toString(),
            mCode); // mCode is the field that is updated in the activity class(you should take in consideration that the user could use directly the AutoCompleteTextView, so mCode could be not set at this level)
    return cursor;
} 
```

最后，您可能已经这样做了，但请确保在（直接）查询数据库时得到您期望的结果。由于过滤适用于某些情况，因此可能需要注意。

# grails - Grails addTo 和 removeFrom 动态方法性能

> ID：12403116
> 
> 赞同：0
> 
> 时间：2012-09-13T09:19:38.040
> 
> 标签：grails, grails-orm, dynamicmethod

我一直在使用 Grails addTo 和 removeFrom 动态方法，它们很棒，通常我以下列方式使用它们

```
String id =params.quizId
Quiz quizInstance = Quiz.get(Long.parseLong(id))// **1**
for( String q in params.questionCheckBox)
{   
    Question question = Question.get(Long.parseLong(q))//**2**
    quizInstance.addToQuestions(question)//**3**
} 
```

作为一个曾经在 java 上工作的人，我将这段代码可视化为以下三个步骤

1.  运行选择查询以获取 quizInstance
2.  运行选择查询以获取问题
3.  运行插入查询以在 QUIZ_QUESTION 表中插入问题

我确实看到第三步只需要 quiz id 和 Question id 然后为什么要执行前两个步骤。是否有一种“addTo”类型的静态方法，我可以用`Quiz.addToQuestionAndQuiz(questionId,QuizId)` 来说如果我假设事情将在数据库方面进行的方式有误，请纠正我。

还有一种方法可以直接使用 addTo 方法添加值列表，还是必须使用 for 循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:11:13.710

这只是一个建议 - 我不知道这是否会正常工作：

```
String id =params.quizId
List<Question> questionList = Question.findAllByIdInList(params.questionCheckBox)
Quiz quizInstance = Quiz.get(Long.parseLong(id))
quizInstance.questions += questionList 
```

让我知道这是否适合你

# php - 从模型实例中的数据库加载数据

> ID：12403122
> 
> 赞同：0
> 
> 时间：2012-09-13T09:20:23.653
> 
> 标签：php, zend-framework, doctrine-orm

有没有办法使用 Doctrine 2.x 从实例化模型内部加载数据库中的数据？

方法中的实现`load()`：

```
$model = new Model();
$model->load($params); 
```

`$param`= `array`with key => value 对，用于在 DB 中查找数据，例如：`$param = array('id' => 1)`

`find()`方法 from`Doctrine\ORM\EntityManager`不允许传递实例，我找不到其他任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:07:14.853

不幸的是，无法在实例化对象中加载数据。

解决方法是：

```
public function load($id = 0)
{
    $resultObject = $this->_getEntityManager()->find(get_class($this), $id);

    if ($resultObject) {
        foreach (get_object_vars($resultObject) as $key => $val)
        {
            $this->$key = $val;
        }

        unset($resultObject);
    }

    return $this;
} 
```

# windows-phone-7 - WP 中带有文本的应用程序栏按钮

> ID：12403123
> 
> 赞同：0
> 
> 时间：2012-09-13T09:20:24.047
> 
> 标签：windows-phone-7, expression-blend, application-bar

当用户单击“...”时，我有带有一些按钮和菜单项的应用程序栏。无论如何，我意识到有些图标的含义乍一看很难理解。

有什么方法可以在图标下方显示带有文字的图标吗？当然，当用户单击“...”时它们是可见的，但对于菜单项也是可见的，我不想要它。

有人这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:30:46.307

您可以简单地使用 shell:ApplicationBar 并设置 Text 属性

```
<shell:ApplicationBar x:Name="dialogsPageAppbar">
        <shell:ApplicationBarIconButton  IconUri="/images/Icons/appbar.add.rest.png" Text="create"/>
        <shell:ApplicationBarIconButton  IconUri="/images/Icons/appbar.refresh.rest.png" Text="refresh"/>
        <shell:ApplicationBarIconButton  IconUri="/images/Icons/appbar.feature.search.rest.png" Text="search"/>
        <shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarMenuItem Text="settings" />
        </shell:ApplicationBar.MenuItems>
    </shell:ApplicationBar> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:59:28.037

你不能用标准来做到这一点`ApplicationBar`。正如我所说，[默认行为](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431813%28v=vs.92%29.aspx)是隐藏文本。

另外WP7用户有一种特殊的用户体验，所以如果他不能理解你的图标的含义，他会按“...”来阅读文字。

但是您可以在某些场景中模拟 appbar：

```
<Border Background="{some gray color from phone resources}">
 <StackPannel Orientation="Horisontal">
  <Button Content={Binding TextB} Command="{Binging CommandA}" 
                          Style="{your appbar-like template}"/>
  <Button Content={Binding TextB}  Command="{Binging CommandB}" 
                          Style="{your appbar-like template}"/>
</StackPannel>
</Border> 
```

将其放在页面底部。但是要准备好花费大量时间来模拟标准的 appbar 行为。我不认为这是一个好主意。

# java - Java 通过格式化文件输入

> ID：12403124
> 
> 赞同：0
> 
> 时间：2012-09-13T09:20:24.447
> 
> 标签：java, parsing

我需要从格式文件中获取输入

2 (3,4) (5,6) 3 (6,5) (7,8)

我只想将整数值存储在某个变量中，我不想要括号和逗号，那么如何使用模式匹配来获得它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:21:20.027

我更喜欢 String 方法 split，它允许使用正则表达式。下面是为文件中的每一行输入运行的一些示例代码，假设您已经实例化了一个名为 contents 类型的 ArrayList<Integer> 的实例变量：

```
public void readLine(String line) {
    String delimiters = "[ ,()]+"; // regular expression
    String[] tokens = line.split(delimiters);
    for (String token : tokens) {
        try {
            Integer i = Integer.parseInt(token); // convert String to Integer
            contents.add(i);
        } catch (NumberFormatException e) {
            // TODO: handle exception
        }
    }
} 
```

split 方法创建了一些额外的（空）标记，try/catch 消除了这些标记。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:26:01.503

您可以使用`String#replaceAll("[^0-9]", "")`删除任何非数字字符并`Integer.valueOf(String)`获取整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:28:21.957

您可以使用 直接从文件中读取整数[`java.util.Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)并使用 指定分隔符[`Scanner.useDelimiter(Pattern)`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#useDelimiter%28java.util.regex.Pattern%29)，其中分隔符将是正则表达式（`"[,() ]{1,}"`例如）。`Scanner`方法`hasNextInt()`和可`nextInt()`用于读取整数。

# sql - 使用列值获取表连接

> ID：12403125
> 
> 赞同：6
> 
> 时间：2012-09-13T09:20:29.040
> 
> 标签：sql, join

如何使用列值连接表？

我有如下列出的三个表：

*   **消息表**

    ```
    -----------------------------------------------------------------------------
    msg_id  | msg_sub   | msg_to    | to_user_type  | msg_from  | from_user_type
    -----------------------------------------------------------------------------
    001     | test      | 88        | manager       | 42        | admin
    002     | test2     | 88        | manager       | 94        | manager 
    ```

*   **管理员表**

    ```
    -------------------------—
    admin_id    | admin_name
    -------------------------—
    001         | Super Admin 
    ```

*   **manager_table**

    ```
    ---------------------------
    manager_id  | manager_name
    ---------------------------
    88          | Mandela
    94          | Kristen 
    ```

如何使用 SQL 查询获得所需的输出，如下所示。即当满足以下条件时，关于列值连接表：

1.  如果`user_type = admin`那么它应该加入`admin_table`.

2.  如果`user_type = manager`那么它应该加入`manager_table`.

**期望的输出：**

```
-----------------------------------------------------
msg_id  | msg_sub   | msg_to_name   | msg_from_name
-----------------------------------------------------
001     | test      | Mandela       | Super Admin
002     | test2     | Mandela       | Kristen 
```

即根据列值获取join sql查询。

* * *

**编辑：**

我想从 sql 查询中获取数据，而不是从服务器端编码。

[我从这里](https://stackoverflow.com/a/5455379/630316)尝试了这个查询，即 Winfred 的想法（已回答）

但是，我无法理解。

`msg_by_usertype`是基于列的，`manager`那么它应该选择的值在哪里`manager_table`，如果它是 admin 到`admin_table`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T09:51:41.450

据我了解你的问题，你可以试试这个：

```
 SELECT msg_id,  
     msg_body,  
     usersBy.userName AS msg_by, 
     usersTo.userName AS msg_to,  
     msg_by_usertype
    FROM messages
    INNER JOIN 
    (SELECT admin_id As id, admin_name as userName
      FROM admin_table         
     UNION         
     SELECT manager_id As id, manager_name as userName
      FROM manager_table ) usersTo ON msg_to = usersTo.id  

     INNER JOIN 
    (SELECT admin_id As id, admin_name as userName
      FROM admin_table        
     UNION         
     SELECT manager_id As id, manager_name as userName
      FROM manager_table ) usersBy ON msg_by = usersBy.id 
```

这是一个[SQL Fiddle](http://www.sqlfiddle.com/#!3/ea37d/5)，看看它是如何工作的。（仅当您不能拥有像经理一样具有相同 ID 的管理员时才有效。ID 在两个表中应该是唯一的。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T10:48:40.933

请使用以下 SQL

```
SELECT msg_id,  
     msg_body,  
     usersBy.userName AS msg_by, 
     usersTo.userName AS msg_to,  
     msg_by_usertype
FROM messages
INNER JOIN 
    (SELECT admin_id As id, admin_name as userName,'admin' as usertype
      FROM admin_table         
     UNION         
     SELECT manager_id As id, manager_name as userName,'manager' as usertype
      FROM manager_table ) usersTo 
      ON msg_to = usersTo.id  and  msg_by_usertype = usersTo.usertype 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T10:52:17.553

如果我正确理解你的问题，你想要这样的结果吗？

```
MSG_ID      MSG_BODY    MSG_TO      BY           MSG_BY_USERTYPE 
----------  ----------  ----------  -----------  --------------- 
001         test        adm1        managone     manager         
002         sadff       adm1        adm3?        admin 
```

如果是这样，你可以使用这个

```
SELECT MSG_ID, MSG_BODY, MSG_TO,                                        
     CASE                                                               
         WHEN MSG_BY_USERTYPE = 'admin' THEN COALESCE(                  
              (SELECT ADMIN_NAME FROM ADMIN_TABLE                       
               WHERE  MSG_BY = ADMIN_ID), RTRIM(MSG_BY) CONCAT '?')     
         WHEN MSG_BY_USERTYPE = 'manager' THEN COALESCE(                
              (SELECT MANAGER_NAME FROM MANAGER_TABLE                   
               WHERE  MSG_BY = MANAGER_ID), RTRIM(MSG_BY) CONCAT '?')   
         ELSE ' '                                                       
     END AS BY,                                                         
 MSG_BY_USERTYPE                                                        
 FROM MESSAGES 
```

# php - yii：如何按用户角色显示不同的菜单？

> ID：12403128
> 
> 赞同：3
> 
> 时间：2012-09-13T09:20:35.153
> 
> 标签：php, yii, yii-extensions

问：如何按用户角色显示不同的菜单？

描述：该应用程序有许多角色。例如，人力资源经理、客户经理、运营经理、员工、操作员……等。我使用权限和 yii-user 模块来创建这些角色。这些角色具有不同的功能。所以应用程序会在登录后为不同用户的角色显示不同的菜单。现在，我可以为不同的用户锁定该功能。例如，当 HR 经理登录时，他/她不能路由到用户角色的其他功能。但我不知道如何仅显示人力资源经理的人力资源菜单。

我不是 yii 的新手。但我是这些模块的新手（rihgts 和 yii-user）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T13:39:38.903

例如，如果您使用的是[RBAC](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#role-based-access-control)，则可以根据用户权限设置 CMenu 项目的“可见”参数；

```
$this->widget('zii.widgets.CMenu',array(
    'items'=>array(
        array(
            'label'=>'Home',
            'url'=>array('site/index'),
        ),
        array(
            'label'=>'HR',
            'url'=>array('/hr/index'),
            'visible'=>Yii::app()->user->checkAccess('hr')
        ),
        array(
            'label'=>'Accounts',
            'url'=>array('/account/index'),
            'visible'=>Yii::app()->user->checkAccess('account')
        ),
        array(
            'label'=>'Operations',
            'url'=>array('/operations/index'),
            'visible'=>Yii::app()->user->checkAccess('operations')
        ),
    ),
); 
```

这样，用户只有在对该区域具有访问权限的情况下才能看到菜单中的项目。

[**编辑**]

根据下面 simaremare 的评论，您可以通过扩展`CWebUser`. 首先，设置你的用户运行你的新类（我们称之为`TWebUser`），所以在你的 main.php 配置文件中；

```
'components'=>array(
    'user'=>array(
        ...
        'class'=>'TWebUser',
        ...
    ),
    ...
), 
```

现在我们需要创建`TWebUser`缓存这些超出当前请求（这是什么`CWebUser`（[源代码](https://github.com/yiisoft/yii/blob/1.1.13/framework/web/auth/CWebUser.php#L801)）：

```
class TWebUser extends CWebUser
{
    private $_access=array();

    public function checkAccess($operation,$params=array(),$allowCaching=true)
    {
        if($allowCaching && $params===array() && isset($this->_access[$operation]))
            return $this->_access[$operation];

        $cache = Yii::app()->session['checkAccess'];
        if($allowCaching && !$this->getIsGuest() && isset($cache[$operation]) && time() - $cache[$operation]['t'] < 1800)
        {
            $checkAccess = $cache[$operation]['p'];
        } else {
            $checkAccess = Yii::app()->getAuthManager()->checkAccess($operation,$this->getId(),$params);

            if($allowCaching && !$this->getIsGuest())
            {
                $access = isset($cache) ? $cache : array();
                $access[$operation] = array('p'=>$checkAccess, 't'=>time());
                Yii::app()->session['checkAccess'] = $access;
            }
        }

        return $this->_access[$operation] = $checkAccess;
    }
} 
```

现在您的访问结果将为整个会话设置。这确实意味着，如果您编辑给定帐户的 RBAC 权限，他们必须注销并再次登录才能看到浏览器中反映的新更改。

我希望这会有所帮助！我确定我从其他人那里找到了这个解决方法（可能是在 SO 上），但我找不到原始帖子来给予他们信任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:20:44.390

您可以在可能或不想显示的菜单项周围包裹一个 if 语句。

在 if 语句中，您必须测试用户是否有资格查看您的菜单项。

例如：

```
<?php if (Yii::app()->user->isGuest): ?>

  <?php $this->widget('zii.widgets.CMenu',array(
    'items'=>array(
  array(
        'label'=>'this menu item visible only for Guests (not logged in)', 
        'url'=>array('/site/index')),
      ),
    )); ?>

<?php endif; ?> 
```

# sql - 服务器未找到或无法访问 - 服务器丢失 6 小时

> ID：12403130
> 
> 赞同：0
> 
> 时间：2012-09-13T09:20:42.300
> 
> 标签：sql, sql-server, windows-server-2008

首先，我对 SQL 只有一个非常基本的了解。我可以创建表格等，但配置超出了我的范围。我正在使用 SQL Express 在 Windows 2008 服务器上使用 MVC3 ASP.Net 运行我的网站。

一切正常，我的连接字符串是正确的，我可以使用该网站并读取和写入 dB，我还可以在服务器上使用管理工作室查看 dB。

今天我收到以下错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

当我尝试登录服务器上管理工作室中的数据库时，我收到了类似的错误。我发现的唯一解决方法是重新启动服务器。在我注意到这对启动网站不利之前，数据库已关闭 6 小时。

有没有人见过这个问题？这是一个明确的问题吗？任何帮助或建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:03:10.073

像处理任何网络错误一样进行故障排除。从服务器的事件日志开始。

至于停机通知，有很多 Web 服务会监控您的网站和电子邮件，如果没有响应，则会向您发送 SMS 消息。我使用的两个是[uptimerobot.com](http://uptimerobot.com/)和[basicstate.com](http://basicstate.com/)。还有几十个。

当某些类型的错误发生时，您还可以重写您的 ASP.Net 应用程序以向您发送电子邮件或发短信。

# string - 为什么指针显示Unicode字符串反转？

> ID：12403134
> 
> 赞同：0
> 
> 时间：2012-09-13T09:21:01.057
> 
> 标签：string, visual-c++, unicode, visual-studio-2005, farsi

我有 unicode 字符串的问题。我指向波斯语字符串的指针（保存为 Unicode，代码页 1200）返回反转的字符串。为什么？我知道波斯语是一种从右到左的语言，但这是 C/C++ 问题。我指向字符串的指针应该指向存储在文件中的 secuence 的开始。

我正在使用标准控制台应用程序 VC++2005。

欢迎任何帮助，我附上了屏幕截图和示例项目。

[测试项目](http://dl.dropbox.com/u/39961328/Test.rar) [屏幕截图](http://dl.dropbox.com/u/39961328/pointer%20show%20unicode%20string%20reversed.PNG)

问候，胡安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:50:48.300

如果在 VC++2005 中顺序颠倒了，那么它可能只是不处理正确的方向性，即它从左到右显示阿拉伯字母，而不是正确地遵循其固有的方向性。这样的事情发生在许多编辑器和开发工具中。它本身不会影响应用程序的行为。

# ruby-on-rails - 设计 - 可确认的未定义方法

> ID：12403138
> 
> 赞同：1
> 
> 时间：2012-09-13T09:21:15.587
> 
> 标签：ruby-on-rails, ruby, devise

我最近获得了我公司正在开发的网站的 Ruby 代码。我已经安装了 Rails，并运行 bundle 来获取 gems。然后我设置了 PostgreSQL 并更改了 database.yml 文件中的详细信息。我运行`rake db:migrate`并返回`undefined method confirmable' for #<ActiveRecord::ConnectionAdapters::Table:0xaeae3cc>`
Devise is installed，但如果我运行`rails g devise:install`，它会告诉我进行一些手动设置，我已确保已完成。
如果有帮助，该应用程序将托管在 Heroku 上。

设计 (2.1.2, 2.0.0) 轨道 (3.2.8, 3.2.0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:51:52.250

您需要为使用的用户创建一个设计资源

```
rails generate devise user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T13:39:49.980

如果您在 Devise 的迁移初始生成后设置了`confirmable`模块，则需要[手动创建迁移](https://github.com/plataformatec/devise/wiki/How-To:-Add-:confirmable-to-Users)：

```
class AddConfirmableToDevise < ActiveRecord::Migration
  def up
    add_column :users, :confirmation_token, :string
    add_column :users, :confirmed_at, :datetime
    add_column :users, :confirmation_sent_at, :datetime
    # add_column :users, :unconfirmed_email, :string # Only if using reconfirmable
    add_index :users, :confirmation_token, unique: true
    execute("UPDATE users SET confirmed_at = NOW()")
    # All existing user accounts should be able to log in after this.
    # Remind: Rails using SQLite as default. And SQLite has no such function :NOW.
    # Use :date('now') instead of :NOW when using SQLite.
    # => execute("UPDATE users SET confirmed_at = date('now')")
    # Or => User.all.update_all confirmed_at: Time.now
  end

  def down
    remove_columns :users, :confirmation_token, :confirmed_at, :confirmation_sent_at
    # remove_columns :users, :unconfirmed_email # Only if using reconfirmable
  end
end 
```

# c++ - 基本的新/删除操作员日志记录

> ID：12403141
> 
> 赞同：2
> 
> 时间：2012-09-13T09:21:27.797
> 
> 标签：c++, operator-overloading, new-operator, delete-operator

我想重载全局和非全局 new/delete 运算符以进行日志记录。

由于我只想添加日志信息，因此我想保留此操作员的标准行为。

有没有办法重载 new/delete 运算符来添加日志记录，但不必重写标准行为（这可能容易出错）？

实际上，我不仅需要标准的行为。我需要与 Visual 2010 实现相同的行为，这可能不是标准的。

我在这种日志记录中寻找的错误类型是 new[]/delete mismatch。

我可以使用经典工具，但它们会减慢执行速度，我想与其他人共享二进制文件以收集更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T09:49:09.457

您可以使用`malloc`/`free`进行基本分配。处理完整的标准合规性`new`有点棘手；你需要类似的东西：

```
void*
operator new( size_t n )
{
    void* results = malloc( n );
    while ( results == NULL ) {
        if ( std::get_new_handler() == NULL ) {
            throw std::bad_alloc();
        }
        (*std::get_new_handler())();
        results = malloc( n );
    }
    return results;
} 
```

但是，您通常不需要如此完全的合规性。如果你说你不支持设置`new_handler`，例如，你可以大大简化。在我用于测试的重载版本中，事实上，如果真的失败了，我会中止（但这个版本有选项可以按需`malloc`触发失败，因为我想测试我的代码是否也能正确地对其做出反应）。`new`

如果您正在记录，请非常小心避免无休止的递归。唯一保证不在`operator new`标准库中使用的函数是`malloc`和`free`。当然，很多没有理由动态分配，我也不担心`memcpy`or 之类的函数`strlen`。在实践中，您可能对 C 库中的任何函数都是安全的（尽管理论上`printf`可以根据`iostream`. 但是，除非您防止递归，否则任何使用 iostream、语言环境或标准容器的方法都已失效：

```
void*
operator new( size_t n )
{
    static int recursionCount = 0;
    ++ recursionCount;
    void* results = malloc() ;
    //  Any additional logic you need...
    if ( recursionCount == 1 ) {
        logAllocation( results, n );
    }
    -- recursionCount;
    return results;
} 
```

`operator delete`形式上`delete` ，您应该为`close()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:39:49.877

您可以重新定义`new`关键字以调用不同的签名并通过`__FILE__`等。

在一般情况下，这可以正常工作。当您开始使用覆盖的对象时，`operator new`尽管您有点自欺欺人。

如果我是凭记忆知道的，我会分享，但您可能可以通过 google 找到。我认为在某个地方的 codeproject 上有一个实现。

# winforms - Visual Studio 构建不“更新”？

> ID：12403148
> 
> 赞同：0
> 
> 时间：2012-09-13T09:21:55.773
> 
> 标签：winforms, visual-studio-2010

我有一个基本的 winforms 应用程序，由于某种原因，当我构建解决方案并运行设置时，它没有反映我自上次构建以来所做的更改？如果我调试应用程序，我的所有更改都会根据需要进行。

什么可能导致我的构建不反映我的更改？

# mysql - MySQL Trigger checking for existing rows with possible NULL values

> ID：12403152
> 
> 赞同：3
> 
> 时间：2012-09-13T09:22:12.643
> 
> 标签：mysql, database, triggers

I have an InnoDB table with a unique index on `performance_id`, `ticket_rank_id` and `ticket_type_id`.

All of these id's have relations to other tables, but their values can also be `NULL`. MySQL allows duplicate rows if one of the column values is NULL so I decided to build a `trigger` for this problem.

```
CREATE TRIGGER `before_insert_performance_tickets` 
BEFORE INSERT ON `performance_tickets` FOR EACH ROW BEGIN

DECLARE num_rows INTEGER;

SELECT COUNT(*) INTO num_rows FROM performance_tickets
WHERE performance_id = NEW.performance_id 
AND ticket_rank_id = NEW.ticket_rank_id
AND ticket_type_id = NEW.ticket_type_id;

IF num_rows > 0 THEN
   // Cancel insert action
ELSE
   // Perform insert action
END IF;

END 
```

The problem is `AND ticket_rank_id = NEW.ticket_rank_id` where I have to check if `ticket_rank_id` is NULL or has a value.

`AND ticket_rank_id = NULL` does not work, it only works if i do `AND ticket_rank_id IS NULL`.

Is there any slick solution for this or do I have to write separate queries depending on `NEW.ticket_rank_id` and `NEW.ticket_type_id` being NULL or not?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:24:27.813

You need to add extra `OR` condition for NULL values `(ticket_rank_id IS NULL OR ticket_rank_id = NEW.ticket_rank_id)` because NULL compared with anything return `FALSE`. Try this query:

```
SELECT COUNT(*)
INTO num_rows
FROM performance_tickets
WHERE performance_id = NEW.performance_id
      AND (ticket_rank_id IS NULL OR ticket_rank_id = NEW.ticket_rank_id)
      AND (ticket_type_id IS NULL OR ticket_type_id = NEW.ticket_type_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:08:10.377

I think I figured it out:

```
SELECT COUNT(*) INTO num_rows FROM performance_tickets
WHERE performance_id = NEW.performance_id 
AND IF(NEW.ticket_rank_id IS NULL, ticket_rank_id IS NULL, ticket_rank_id = NEW.ticket_rank_id)
AND IF(NEW.ticket_type_id IS NULL, ticket_type_id IS NULL, ticket_type_id = NEW.ticket_type_id) 
```

Seems to work, now I have to figure out how to abort the insert if `num_rows == 1`. But that's a different problem.

Thanks anyways ;)

# ruby-on-rails - 如何在 Rails 服务器控制台中显示 SQL 查询的来源？

> ID：12403153
> 
> 赞同：0
> 
> 时间：2012-09-13T09:22:17.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在开发模式下，我希望能够在控制台中看到触发 SQL 查询的位置。

我的控制台中当前显示的内容（愚蠢的示例查询）

```
User Load (1.7ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 65 LIMIT 1 
```

我想看到什么

```
application_controller.rb:68
User Load (1.7ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 65 LIMIT 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T19:33:38.473

结帐[https://github.com/RISCfuture/sql_origin](https://github.com/RISCfuture/sql_origin)以获取提供该功能的 gem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-10T15:02:37.713

对于未来的 Google 员工：gem [active_record_query_trace](https://github.com/brunofacca/active-record-query-trace)也可以做到这一点，甚至更多。

# apache - 2个域上的相同重定向规则

> ID：12403156
> 
> 赞同：1
> 
> 时间：2012-09-13T09:22:26.263
> 
> 标签：apache, .htaccess, redirect

我在同一个虚拟主机上运行 2 个域

```
<VirtualHost *:80> 
    ServerName www.example.de
    ServerAlias www.example.de example.de example.co.uk www.example.co.uk
    DocumentRoot C:/inetpub/wwwroot/example_ml
    DirectoryIndex index.php
</VirtualHost> 
```

并尝试在我的 htaccess 中为两个域应用相同的重定向规则

```
RewriteRule ^tag/(.*)$ http://www.example.de/$1 [L,R=301]
RewriteRule ^\d{4}/\d{2}/\d{2}/(.*)$ http://www.example.de/$1 [L,R=301]
RewriteRule ^\d{4}/\d{2}/(.*)$ http://www.example.de/$1 [L,R=301]

RewriteRule ^tag/(.*)$ http://www.example.co.uk/$1 [L,R=301]
RewriteRule ^\d{4}/\d{2}/\d{2}/(.*)$ http://www.example.co.uk/$1 [L,R=301]
RewriteRule ^\d{4}/\d{2}/(.*)$ http://www.example.co.uk/$1 [L,R=301] 
```

但似乎不适用于`example.co.uk/tag_name`我被重定向到的每一个`example.de/tag_name`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:37:38.083

你不需要定义规则两次，试试这个：

```
RewriteRule ^tag/(.*)$ http://%{HTTP_HOST}/$1 [L,R=301]
RewriteRule ^\d{4}/\d{2}/\d{2}/(.*)$ http://%{HTTP_HOST}/$1 [L,R=301]
RewriteRule ^\d{4}/\d{2}/(.*)$ http://%{HTTP_HOST}/$1 [L,R=301] 
```

# silverlight - MVVM silverlight 中的 Selecteditem 事件

> ID：12403158
> 
> 赞同：0
> 
> 时间：2012-09-13T09:22:27.467
> 
> 标签：silverlight, mvvm, datagrid

我有一个绑定到属性的数据网格。在这个网格中，我的列由类似于超链接的单元格组成，我的意思是当用户基于这些值单击单元格值时，另一个网格将被填充。我想知道如何获取单元格值并将其传递给某个方法，以便填充其他网格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:48:06.930

最好的方法是在您的视图模型中。

您应该将`SelectedItem`数据网格的 绑定到 ViewModel 中的新属性。在这个新属性的 set 方法中，调用一个新方法来填充一个新的 ObservableCollection/List/whatever...

最后，将您的“其他网格”绑定`ItemsSource`到您的 ViewModel 中的这个新的可观察集合。

编辑：如果您需要根据要使用后面代码的列加载一件事或另一件事，请看一下： [Silverlight DataGrid 如何从选定项目中获取单元格值？](https://stackoverflow.com/questions/3120952/silverlight-datagrid-how-to-get-cell-value-from-a-selected-item)

# java - 如何创建同时触发但队列执行的多个警报？

> ID：12403160
> 
> 赞同：2
> 
> 时间：2012-09-13T09:22:32.067
> 
> 标签：java, android, alarmmanager

我有两个警报，它们触发两个独立的服务——一个每半小时执行一次，另一个每半小时执行一次。在任何一天的 00:00，这两个服务都将被执行并且需要共享一个公共文件。当两个警报都被触发时，我有没有办法一个接一个地执行这两个服务（最好是半小时一个，然后是午夜一个）？

我已经尝试使文件访问器方法同步（这样服务将不得不等待另一个完成），但这并不能让我控制哪些服务首先执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:28:40.503

2个简单的选项是：

1.  每 1/2 小时只有 1 个警报。每次触发时，检查您是否在午夜。如果您在午夜，则运行这两项服务。
2.  你可以让你的警报在一个单一的`IntentService`，或@commonsware's中运行`WakefulIntentService`。这些类旨在自动排队，而不是同时运行。这样，当一个服务完成时，另一个服务将自动启动，即同步是自动的。

就个人而言，我会使用第一个选项（我已经看到@commonsware 推荐它，所以我认为它可能是最好的路线）。

这很简单，不依赖于太多额外的类，并且您可以完全控制在什么时间运行哪个服务。您还只需要一个警报，而不是 2 个，我认为这将更容易维护，并且在功耗方面稍好一些。

# jquery - jquery判断select框的值是否有变化

> ID：12403163
> 
> 赞同：0
> 
> 时间：2012-09-13T09:22:36.543
> 
> 标签：jquery

如何在不单击选择框本身的情况下确定选择框中的值已更改。

我的代码如下：

查询

```
 $("select").each(function() {
                $(this).change(function() {
                    if ($(this).val() === "-Select-"){
                        this.parent().addClass("highlightSelect");
                        this.parent().sibling().show();
                    }   else{
                        this.parent().removeClass("highlightSelect");
                        this.parent().sibling().hide();
                    }
                });
            }); 
```

HTML

```
<div id="wwctrl_add_savedAddressId" class="wwctrl styled-select">
<select id="add_savedAddressId" class="storedPaymentInput_size4 required savedAddress checkDropdown valid" onchange="changeSavedAddressType();generateSavedAddressAdd();" name="summaryData.usedAddress">
<option value="-Select-">-Select-</option>
<option value="O">Enter New Address</option>
<option value="3041">Home - 116 Parrot...</option>
<option value="22268">Other - rwara, aw...</option>
<option value="21372">Other - 1040..</option>
</select>
</div>
<div class="error" for="add_savedAddressId" generated="true" style="display: none;"> Select item</div> 
```

注意：我还有其他按钮会影响上面选择框的值的变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:49:02.147

首先 - 您有问题的代码将不起作用。它必须是这样的：

```
 $("select").change(function() {
                    if ($(this).val() === "-Select-"){
                        $(this).parent().addClass("highlightSelect");
                        $(this).parent().siblings().show();
                    }   else{
                        $(this).parent().removeClass("highlightSelect");
                        $(this).parent().siblings().hide();
                    }
                }); 
```

parent 是 jquery 对象函数而不是 dom 对象函数，并且`this`是一个 dom 对象，可以像这样转换为 jq 对象`$(this)`：此外，thers 不是`sibling`jquery 中的方法，但有`siblings`. 或者，如果您想获取下一个/上一个兄弟姐妹，您可以使用`.next()`/`.prev()`而不是`siblings`它将返回一个元素的所有兄弟姐妹

我删除了每个，但实际上这不是必需的。您可以使用它，但几乎任何 jquery 方法都会使用一组方法进行操作，因此`$("select")`可能会在页面中找到很少的选择，`$("select").change(...)`并将 onchanged 处理程序绑定到由`$("select")`.

并回答您的问题：据我所知，您想在以编程方式更改所选值后调用更改处理程序。您可以这样做：`$("select").change()`，但是这样您将在所有选择上调用更改事件，因此您可以这样做：`$("#add_savedAddressId").change()`。在第二种情况下，您将只为带有 id 的选择调用更改偶数处理程序`add_savedAddressId`

# tridion - 当我显示任何错误消息时，结帐事件处理程序以读取模式打开项目

> ID：12403169
> 
> 赞同：0
> 
> 时间：2012-09-13T09:23:07.737
> 
> 标签：tridion, tridion-2011

当页面或组件被签出时，我试图在**Tridion 消息栏中显示警告消息。**

我已订阅并尝试使用（已处理和已启动）阶段，并尝试订阅和 SubscribeAynsc。

下面的订阅者行：

```
EventSystem.Subscribe<VersionedItem, CheckOutEventArgs>(displaymessage, EventPhases.Processed); 
```

功能如下：

```
public override void displaymessage(VersionedItem item, TcmEventArgs args, EventPhases phase)
    {
        if (item.GetType().Name == "Component" || item.GetType().Name == "Page")
        {
            string chkuser = "aa"               ;
            sting revisor = "bb"
            if(chkuser  != revisor
               {
                   throw new Exception("Warning-->some one is already modified this item and u are checking out now");
               }

        }
    } 
```

如果结帐用户和修订者不同，我想显示警告消息。我将很快获取结帐用户和修订者的详细信息并进行比较。

**问题：**

1.  当我选择任何项目并单击“签出”时，上面的代码会在 Tridion 消息栏中显示消息。同时，该项目不处于编辑模式，它处于只读模式。
2.  当我选择任何项目并单击“打开”或双击该项目时，会触发结帐事件，但消息不会显示在消息栏中。并且该项目仍然是只读模式。
3.  如果我在代码中使用 try{}Catch{}，当到达“抛出新异常”行时，代码会自动进入 catch 块。即使在“第一个（问题：1）”情况下也不会显示消息。

任何人都可以对此有所了解吗？那很好啊！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:59:09.323

当您在事务提交之前抛出异常时，它会回滚。如果这会起作用，您需要在 TransactionCommitted 阶段执行您的逻辑。

但更重要的是，我建议不要滥用异常消息来提供状态消息。你想达到什么目的？

# java - 为什么 setmaxage 不允许超过 ~5 分钟的时间

> ID：12403170
> 
> 赞同：0
> 
> 时间：2012-09-13T09:23:17.700
> 
> 标签：java, jsp, cookies

在我的 jsp 文件中，我正在设置一个我想保留一年的 cookie。我使用了设置的最大年龄并乘以我的秒数，所以它是一年。然而，cookie 只持续大约 5 分钟。即使我输入了一个大得离谱的值，它仍然只能持续约 5 分钟。

我正在本地主机上进行测试，这可能与它有关吗？

下面的代码：

```
 //value to check if the EU compliance cookie is present
boolean euCookiePresent = false;
//cookie parameters
String cookieName = "wtr_ca";
String cookieValue = "1";
int cookieExpiry = 365;

//cookie expiary is in seconds so convert to days
cookieExpiry = cookieExpiry * 60 * 60 * 24;

//Get clients cookies
Cookie cookies [] = request.getCookies ();

if (cookies != null){
    //iterate over users cookies to check for euCookie
    for (int i = 0; i < cookies.length; i++) 
    {
        if (cookies [i].getName().equals (cookieName)){
            euCookiePresent = true;
            break;
        }
    }

}

if (euCookiePresent == false){
    //no EU Cookie found therefore place it on client
    response.setContentType("text/html");
    Cookie cookie = new Cookie(cookieName,cookieValue);

    //cookie expiary is in seconds so convert to days
    cookie.setMaxAge(cookieExpiry);
    response.addCookie(cookie); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:27:04.253

```
cookie.setMaxAge(60*60*24); 
```

将最大年龄设置为大约 1 小时，没有一年

你想要做的是：

```
cookie.setMaxAge(cookieExpiry); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:49:28.007

出于某种原因，Maven 不再将我的新代码放在服务器上，因此它仍在使用我的 365 秒，而不是将其转换为天的更新代码。

# web-services - Restful Web 服务，对请求进行身份验证

> ID：12403171
> 
> 赞同：1
> 
> 时间：2012-09-13T09:23:24.857
> 
> 标签：web-services, jakarta-ee

我是新手，在eclipse上做一个web服务。我正在寻找一种验证请求的方法。非常欢迎提供有关如何逐步执行此步骤（客户端和服务器端）的教程。谢谢。

# asp.net-mvc-3 - 部署到共享 Web 服务器会导致我的相关链接中断

> ID：12403175
> 
> 赞同：0
> 
> 时间：2012-09-13T09:23:32.207
> 
> 标签：asp.net-mvc-3

我是 MVC3 的新手，感觉这可能是一个明显的问题，但是我找不到关于这个问题的相关问题。

我正在用 MVC3 开发一个网站。我的生产环境有几个网站定位如下，例如：

www.companywebsite.com/app1/ www.companywebsite.com/app2/ ...到 www.companywebsite.com/mynewapp/

我在 Windows server2008 上使用 IIS 并创建了“mynewapp”文件夹。但是当我将我的应用程序部署到这个文件夹中时，我所有的相关链接和文件都会中断。

我已经将我的脚本和图像转换为 T4-MVC 参考，这似乎可以处理相对路径，但是我作为相对链接拥有的任何沼泽标准超链接都不起作用（而且我不想将它们转换为 Razor 链接，因为图像的使用）。

我所有映射的路线都可以正常工作而无需更改。

是否有可用于部署到生产环境的全局设置，它会告诉我的项目基本文件夹是 /mynewapp ？

提前致谢。

# model-view-controller - 对于 this.control() 中的这个示例，我应该使用什么 ComponentQuery？

> ID：12403177
> 
> 赞同：2
> 
> 时间：2012-09-13T09:23:42.160
> 
> 标签：model-view-controller, extjs, extjs4

我有：![在此处输入图像描述](../Images/f096fbe2066e3a9f92ff2f5da7135a84.png)

1.) 我应该在 this.control() 中输入什么来获取对网格面板的引用？

我的计划是，当用户双击一行时，会创建新选项卡。我已经有了创建新标签的代码，但我只需要参考网格面板。

像这样的东西：

```
'viewport > westpanel > accordion > gridpanel': {
   doubleclick: function...
} 
```

2.) 假设我为网格面板提供了一个 ID。如何使用 .get 方法在 this.control 中获取参考？

3.) 我怎样才能确定我得到了正确的参考？我可以 console.log() - 它或类似的东西吗？

我会知道如何在没有 MVC 的情况下做到这一点，但在这里我需要帮助。:)

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:36:25.047

一旦你了解了如何使用它就很容易了。首先，您应该阅读有关控件中使用的[ComponentQuery](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery)原因的 API。

1.  这取决于您的组件。你可以通过 xtype`'panel > grid': {itemdblclick:this.yourCallback}`

2.  据我所知，如果您无法通过 xtypes`'#myID': {itemdblclick:this.yourCallback}`使用控件中定义的 refs 定义真正唯一的路径，那么推荐的方法在当前版本中是不可能的。

3.  使用 Id 而不仅仅是 xtypes`'#myID > grid': {itemdblclick:this.yourCallback}`或定义额外的参数`'#myID > grid[customProp=identString]': {itemdblclick:this.yourCallback}`

# c# - 如何在使用 linq 将它们内连接后获取两个数据表的列

> ID：12403178
> 
> 赞同：2
> 
> 时间：2012-09-13T09:23:42.363
> 
> 标签：c#, linq, datatable

我的 linq 如下所示

```
from dt1 in dsResults.Tables[0].AsEnumerable()
join dt2 in dsResults.Tables[1].AsEnumerable()
 on dt1 .Field<decimal>("RecordId") equals dt2.Field<decimal>("RecordId2")
 select dt1 ; 
```

这将仅检索 dt1 的列。如何使两个表的列都出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:13:33.673

我可以按照以下线程 [从两个与 LINQ 连接的 DataTables 中创建组合 DataTable 执行此操作。C＃](https://stackoverflow.com/questions/2379747/create-combined-datatable-from-two-datatables-joined-with-linq-c-sharp)

```
 DataTable targetTable = dsResults.Tables[0].Clone();
        var dt2Columns = dsResults.Tables[1].Columns.OfType<DataColumn>().Select(dc =>
            new DataColumn(dc.ColumnName, dc.DataType, dc.Expression, dc.ColumnMapping));
        targetTable.Columns.AddRange(dt2Columns.ToArray());
        var rowData =
            from row1 in dsResults.Tables[0].AsEnumerable()
            join row2 in dsResults.Tables[1].AsEnumerable()
                on row1.Field<decimal>("RecordId") equals row2.Field<decimal>("RecordId2")
            select row1.ItemArray.Concat(row2.ItemArray).ToArray();
        foreach (object[] values in rowData)
            targetTable.Rows.Add(values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:25:41.743

您可以创建一个表示您要显示的列的对象，然后您可以执行以下操作：

```
public class YourObject
{
 public string Pror1 {get;set;}
 public string Pror2 {get;set;}
}

List<YourObject> result=from row1 in dsResults.Tables[0].AsEnumerable()
    join row2 in dsResults.Tables[1].AsEnumerable()
     on row1.Field<decimal>("RecordId") equals row2.Field<decimal>("RecordId2")
     select new YourObject()
     {
       Pror1=row1.prop1,
       Prop2=row2.prop2,
       ......
     }.ToList(); 
```

如果要选择所有列，可以执行以下操作

```
 from row1 in dsResults.Tables[0].AsEnumerable()
        join row2 in dsResults.Tables[1].AsEnumerable()
         on row1.Field<decimal>("RecordId") equals row2.Field<decimal>("RecordId2")
         select new { RowTable1 = row1, RowTable2 = row2}; //anonymous type 
```

在这种情况下，结果的每个元素将具有两个属性：`RowTable1`将是来自 的行`row1`，并且`RowTable2`将是来自的匹配行`row2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:26:45.270

1 您可以`select clause`使用进行调整`anonymous type`，并使用`Field properties`

```
from dt1 in dsResults.Tables[0].AsEnumerable()
join dt2 in dsResults.Tables[1].AsEnumerable()
on dt1 .Field<decimal>("RecordId") equals dt2.Field<decimal>("RecordId2")
 select new
 {
   Property1 = dt1 .Field<decimal>("RecordId"),
   Property2 = dt2 .Field<decimal>("RecordId2")
   ...... 

  }
; 
```

2 如果您不想指定列名

```
from dt1 in dsResults.Tables[0].AsEnumerable()
join dt2 in dsResults.Tables[1].AsEnumerable()
on dt1 .Field<decimal>("RecordId") equals dt2.Field<decimal>("RecordId2")
 select new
 {
   dt1,
   dt2 
  }
; 
```

3 如果你想在你的序列之间设置联合

链接：http: [//msdn.microsoft.com/en-us/library/bb386993.aspx](http://msdn.microsoft.com/en-us/library/bb386993.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-20T08:42:10.493

```
 public string ShowNew(string myName)
        {
            RENTALEntities objD = new RENTALEntities();
            var NewObj =
                (from t in objD.TENANTs.ToList()
                 join pt in objD.PROP_TYPE.ToList()
                    on t.Prop_ID equals pt.Prop_ID
                 where t.Surname == myName
                 select new { t.Surname, t.PropAdress, pt.DESCRIPTION, t.RentalIncome }).First();

            return "SWurname" + NewObj.Surname + "<br/>"
                + "Address" + NewObj.PropAdress + "<br/>"
                + "Description" + NewObj.DESCRIPTION + "<br/>"
                + "Rental income" + NewObj.RentalIncome;
        } 
```

# sql - SQL 到 XML 创建节点

> ID：12403180
> 
> 赞同：1
> 
> 时间：2012-09-13T09:23:53.313
> 
> 标签：sql, xml

我有一个平面表，我正试图将其转换为 xml 输出。

我需要地址部分出现在单独的节点中。

```
Select ID,AddressLine1,PostCode,Price,Name from Property 
```

我需要这个看起来像

```
<Property>
   <ID> 1 <ID>
   <Address> 
      <Line1>10 Downing Street</Line1>
      <PostCode>SW11SW</Postcode>
   </Address> 
   <Price> 1,000,000,000 <Price>
   <Name> My Next House<Name>
</Property> 
```

任何想法如何实现地址部分？

谢谢Sp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:34:32.693

假设您正在使用 MS SQL Server，使用 FOR XML PATH，请尝试以下代码：

```
DECLARE @Property TABLE (ID INT, [AddressLine1] VARCHAR(30), PostCode VARCHAR(7),
                         Price MONEY, [Name] VARCHAR(20));
INSERT @Property
SELECT 1,'10 Downing Street','SW11SW',1000000000,'My Next House'

SELECT ID, AddressLine1 AS 'Address/AddressLine1', PostCode AS 'Address/Postcode',
       Price, Name 
  FROM @Property 
   FOR XML PATH('Property'), ELEMENTS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:30:01.053

在 SQL Server 中？通过使用`for xml path, elements`

```
Select 
    ID,
    AddressLine1 as 'Address/Line1',
    PostCode as 'Address/Postcode',
    Price,
    Name 
from Property 
for xml path, elements 
```

[http://msdn.microsoft.com/en-us/library/ms189885](http://msdn.microsoft.com/en-us/library/ms189885)

# magento - Magento API，客户信息

> ID：12403184
> 
> 赞同：0
> 
> 时间：2012-09-13T09:24:16.230
> 
> 标签：magento

使用 Magento SOAP API，我可以检索客户信息。

来自： http: [//www.magentocommerce.com/api/soap/customer/customer.info.html](http://www.magentocommerce.com/api/soap/customer/customer.info.html)

“customerCustomerEntity”具有以下内容：

```
Type    Name        Description 
int     store_id    Store ID 
```

我的问题：

什么是客户的 store_id？是他最初签约的那家店还是…… 别的？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:03:42.463

没错，当您在 magento 管理员中创建新客户时，您会注意到有一个“关联到网站”字段。

这样您就可以在同一安装中让用户与不同的网站相关联，并将它们分开。

例如，您可以拥有一家宠物店和一家电子商店，并且您想知道哪些客户通过哪个网站注册，这将使您能够更好地针对他们进行时事通讯等。

# php - 如何检查时间戳是否是一小时前的？

> ID：12403189
> 
> 赞同：1
> 
> 时间：2012-09-13T09:24:23.910
> 
> 标签：php, api, twitter, timestamp

我正在构建一个缓存系统来存储 Twitter API 推文，以避免违反每小时调用限制。

我将推文存储在带有时间戳的数据库中，然后检查 PHP 以查看时间戳是否为一个小时，如果是，那么我再次调用 API。目前我似乎无法让它工作。这是我目前拥有的（我承认这很可能是错误的！）

```
 if($results->tweet_date <= strtotime('-1 hours')) {
 //do api call
 } else {
 //call tweets from database
 } 
```

不过，这似乎不起作用。谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:26:55.467

使用时间戳减去 3600 怎么样？

```
if($results->tweet_date <= time() - 3600) {
//do api call
} else {
//call tweets from database
} 
```

编辑：如果你想使用`strtotime`，你可以`strtotime('-1 hour')`用来计算时间（注意小时而不是小时）。

# android - 如何将膨胀的视图转换为位图？

> ID：12403193
> 
> 赞同：6
> 
> 时间：2012-09-13T09:24:37.700
> 
> 标签：android

我有一个视图是从布局膨胀的：

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View tagView = inflater.inflate(R.layout.activity_main, null);
TextView name = (TextView) tagView.findViewById(R.id.textView1);
name.setText("hello"); 
```

现在我想将膨胀的视图转换为位图

我应该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T09:30:10.767

您可以按如下方式完成：

```
//first, View preparation
LayoutInflater inflater =
   (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View tagView = inflater.inflate(R.layout.activity_main, null);
TextView name = (TextView) tagView.findViewById(R.id.textView1);
name.setText("hello");

//second, set the width and height of inflated view
tagView.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
    MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
tagView.layout(0, 0, tagView.getMeasuredWidth(), tagView.getMeasuredHeight()); 

//third, finally conversion
final Bitmap bitmap = Bitmap.createBitmap(tagView.getMeasuredWidth(),
tagView.getMeasuredHeight(), Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(bitmap);
tagView.draw(canvas); 
```

最后，你得到`bitmap`了你的膨胀`tagView`。

# c# - 接口的命名风格

> ID：12403195
> 
> 赞同：1
> 
> 时间：2012-09-13T09:24:42.817
> 
> 标签：c#, naming

查看`INotifyPropertyChanged`界面我想知道命名界面的样式是否也应该允许“IDoThis”样式。大多数接口似乎都以“I am”风格命名，即“IEqualityComparer”或“IPersistable”。

.NET 基础库中是否有更多第一个命名变体的示例？

并且我错过了 C# 命名指南的更新，正如 MSDN 仍然指出的那样：

> “用名词或名词短语或描述行为的形容词命名接口”

背景是当前项目中命名约定的冲突，我认为应该重命名“IDoThis”接口以符合框架的通用命名约定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:40:17.723

我认为您的示例是一个例外，因为没有简洁的名词，名词短语或形容词具有表达力（`IPropertyChangingNotifier`满嘴）

该框架的另一个例外是`INormalizeForIsolatedStorage`（优于`INormalizeableForIsolatedStorage`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:45:08.907

我必须承认，我从来没有觉得需要对接口名称使用动词或动词-名词后缀。大多数情况下，如指南所述，名词或形容词就足够了。

鉴于接口通常是方法和属性的集合，大多数时候使用 IVerb 或 IVerbNoun 类型名称是没有意义的。

您目前是否有任何 IVerb 或 IVerbNoun 接口名称示例？

# c# - 将自定义滚动条与面板关联

> ID：12403196
> 
> 赞同：0
> 
> 时间：2012-09-13T09:24:44.797
> 
> 标签：c#, .net, winforms, scroll, scrollbar

我希望制作比我想用它滚动的面板宽度更长的自定义水平滚动条。如何连接它？

```
ScrollBar hScrollBar = new HScrollBar();
        hScrollBar.Dock = DockStyle.Fill;
        ScrollBar.Scroll += new ScrollEventHandler(hScrollBar_Scroll);
        splitContainer2.Panel2.Controls.Add(hScrollBar); 
```

* * *

```
 void hScrollBar_Scroll(object sender, ScrollEventArgs e)
    {
        ?
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:16:48.513

你的意思是这样吗？

![1](../Images/2833f2386858760b44ef5584a88d97ce.png)

![2](../Images/c8a6abcbef56cdf7947791a65a874879.png)

只需将控件放在面板中，调整表单大小并输入此代码

```
panel1.AutoScroll=true; 
```

在 InitializeComponent 之后如果您想要一个“真正的自定义”滚动条，请执行以下操作：

```
hScrollBar.Maximum=700;
hScrollBar.Value=0;
hScrollBar.Scroll+=delegate (object sender, ScrollEventArgs e)
{
    int diference=e.OldValue-e.NewValue;
    foreach (Control c in panel1.Controls) c.Location=new Point (c.Location.X+diference, c.Location.Y);
}; 
```

但是你必须找到最大值，在我的例子中大约是 700。

# html - Facebook like 按钮变为“确认”按钮并在点击时向左跳转

> ID：12403198
> 
> 赞同：1
> 
> 时间：2012-09-13T09:24:48.323
> 
> 标签：html, facebook, button, facebook-like, xfbml

我在我们的页面[http://makethecitysoundbetter.com](http://makethecitysoundbetter.com)上嵌入了一个类似 facebook 的按钮。 当我点击它时，它会变成一个“确认”按钮，然后向左移动。当我单击“确认”时，我得到了正常的共享框，之后我就可以正常工作了。

我已经完全从 facebook 的 Like 按钮页面复制了说明：developers.facebook.com/docs/reference/plugins/like/

我什至只用facebooks代码创建了一个空的html页面，复制粘贴并完全按照他们写的那样放置（[http://makethecitysoundbetter.com/fb_test.html](http://makethecitysoundbetter.com/fb_test.html)）。

我已经尝试过 HTML5 和 XFBML 代码，结果都一样。

有谁知道发生了什么，我该如何解决这个问题？

我们的分享功能起作用非常重要！

提前致谢！

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:00:45.900

我有同样的问题。我最终使用了喜欢按钮的 iframe 版本，现在一切正常。

# forms - 我搜索了一个关于如何使用集合表单进行游戏和自定义的教程

> ID：12403201
> 
> 赞同：0
> 
> 时间：2012-09-13T09:25:04.640
> 
> 标签：forms, collections, symfony, label, customization

我需要创建一些不链接到实体的表单。我非常了解如何创建我的构建器，但是当我尝试使用它们时，我很困惑，而且我并没有在 Symfony 2.0 的在线文档中找到示例

进入细节：我创建了一个“多项选择题”表格。所以我创建了：

*   “类 ResponseType 扩展 AbstractType”
*   一个“类 MCQType 扩展 AbstractType”，它使用我的类 ResponseType
*   一个文件“forms.html.twig”，其中包括我的“responsetype_widget”和“mcqtype_widget”的模板

我的目标是能够自定义标签并在此模板中使用它们（例如添加具有 uniqueID 的 div 等），特别是添加新项目时的项目：我会知道如何更改“0”、“1” ”、“2”等在“Bad answer 1”、“Bad answer 2”等中。目前，我在客户端使用 JQuery 进行操作。但是当我提交表单并出现错误时，我创建的项目显示为“0”、“1”；由服务器端生成。

以下是截图，以便更好地了解情况：

*   [由 JQuery 修改](http://i.imgur.com/bMSkz.png?1)（抱歉没有足够的声誉来发布图片）
*   [由 Symfony 2 生成](http://i.imgur.com/ohygk.png?1)

我真的会在服务器端自定义这些标签，或者在我的“类 MCQType 扩展 AbstractType”中，或者从 forms.html.twig 中的 mcqtype_widget

我尝试了很多我在文档中找到的东西，但没有任何效果，我迫切希望从 JS 而不是服务器端修改它。有人有一个很好的例子吗？

提前谢谢你。如果有任何关于操作集合的好教程，我真的会帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:14:05.337

自定义这些标签需要做的是重新定义模板块以包含您的修改。

为此，您需要这部分文档： [http ://symfony.com/doc/2.0/cookbook/form/form_customization.html](http://symfony.com/doc/2.0/cookbook/form/form_customization.html)

我还建议您使用它来熟悉表单集合： [http ://bootstrap.mohrenweiserpartner.de/mopa/bootstrap/forms/collections](http://bootstrap.mohrenweiserpartner.de/mopa/bootstrap/forms/collections)

不要犹豫，深入内心，看看他们是怎么做的。

PS：如果需要隐藏那些标签，需要`'show_legend' => false,`在field options里面传入

# mysql - 使用外键查询

> ID：12403202
> 
> 赞同：0
> 
> 时间：2012-09-13T09:25:06.653
> 
> 标签：mysql

项目分配是 n 到 n 的关系，其中 n 可以为零。

pid 是项目表的主键

eid 是员工表的主键

一个项目不得分配给任何员工。类似地，员工手中可能没有任何项目。

如何编写此查询？eid 应取值为 null 或 emp 表中的值。pid 应该取 null 或表项目中的值。

这是正确的吗。

```
CREATE TABLE Proj_Assign
(
eid VARCHAR(25),
pid VARCHAR(25),
PRIMARY KEY(eid,pid),
FOREIGN KEY eid REFERENCES employee(eid),
FOREIGN KEY pid REFERENCES project(pid)
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:27:03.313

给这种方式：

```
FOREIGN KEY (t_eid) REFERENCES parent(eid)
    ON DELETE CASCADE 
```

而不是使用相同的`eid`两次。它在[文档](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)中进行了解释。

此外，在创建此表之前，原始父表应该在那里，并且您需要以这种方式手动插入查询：

```
INSERT INTO `Proj_Assign` (`eid`, `pid`) VALUES (1, 1); 
```

根据[文档](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)，您编写的任何查询都是正确的。

# algorithm - 在数组中查找缺失的数字

> ID：12403207
> 
> 赞同：2
> 
> 时间：2012-09-13T09:25:28.127
> 
> 标签：algorithm

一个数组`a[]`包含从 0 到 N 的所有整数，除了一个。但是，您不能通过单个操作访问元素。相反，您可以调用`get(i, k)`which 返回 的第 k 位，`a[i]`或者您可以调用`swap(i, j)`which 交换 的第 i 个和第 j 个元素`a[]`。设计一个 O(N) 算法来找到丢失的整数。（为简单起见，假设 N 是 2 的幂。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T10:27:44.267

如果 N 是 2 的幂，则可以`O(N)`使用[分治](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)法来完成。

请注意，数字中有`logN`位。现在，使用此信息 - 您可以结合使用[基于分区的选择算法](http://en.wikipedia.org/wiki/Selection_algorithm#Partition-based_general_selection_algorithm)和[radix-sort](http://en.wikipedia.org/wiki/Radix_sort)。

1.  迭代第一位的数字，并将数组分成两半 - 前半部分将此位设为 0，另一半将其设为 1。（`swap()`用于对数组进行分区）。
2.  请注意，一半有`ceil(N/2)`元素，另一半有`floor(N/2)`元素。
3.  对较小的数组重复该过程，直到找到丢失的数字。

这种方法的复杂性将是`N + N/2 + N/4 + ... + 1 < 2N`，所以它是`O(n)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T09:30:31.913

O(N*M)，其中 M 是位数：

N 是 2 的幂，只有一个数字丢失，所以如果你检查每个位，并计算那个位为 0 的数字，并计算 1 的位置，你会得到 2^(M-1) 和 2^ (M-1)-1，较短的属于缺号。有了这个，你可以得到缺失数字的所有位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:22:04.647

真的不需要使用swap操作！！使用异或！好的，首先你可以计算从 0 到 N 的所有数字的二进制 XOR。所以首先：

```
long nxor = 0;
for (long i = 0; i <= N; i++)
    nxor = XOR(nxor, i); 
```

然后我们可以计算数组中所有数字的异或，也很简单。让我们称之为 K - 所有数字中的最大位数。

```
long axor = 0;

long K = 0;
long H = N;
while (H > 0)
{
   H >>= 1; K++;
}

for (long i = 0; i < N - 1; i++)
   for (long j = 0; j < K; k++)
    axor = XOR(axor, get(i,j) << j); 
```

最后你可以计算结果的异或：

```
long result = XOR(nxor, axor). 
```

顺便说一句，如果 n 是 2 的幂，那么 nxor 值将等于 n ;-)！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:26:39.873

当我们将使用 sum 运算而不是 xor 运算时，您还有另一个答案。请在下面找到代码。

```
long allsum = n * (n + 1) / 2;
long sum = 0;

long K = 0;
long H = N;
while (H > 0)
{
   H >>= 1; K++;
}

for (long i = 0; i < N - 1; i++)
   for (long j = 0; j < K; k++)
    sum += get(i,j) << j;

long result = allsum - sum. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T12:52:41.780

假设输入是`a[]=0,1,2,3,4,5,7,8`，所以`6`缺少。对数字进行排序只是为了方便，因为不必对它们进行排序以使解决方案起作用。

从那时`N`起`8`，数字使用`4`位表示。从`0000`到`1000`。

首先使用最高有效位对数组进行分区。

你得到`0,1,2,3,4,5,7`和`8`。由于`8`存在，请继续使用左侧分区。

使用第二个最高有效位对子数组进行分区。

你得到`0,1,2,3`和`4,5,7`。现在继续具有奇数个元素的分区，即`4,5,7`。

使用第三个最高有效位对子数组进行分区。

你得到`4,5`和`7`。再次继续具有奇数个元素的分区，即`7`.

`nothing`使用您获得的第 4 个最高有效位和对子数组进行分区`7`。

所以缺失的数字是`6`。

另一个例子：

*   `a[]=0,1,3,4,5,6,7,8`，所以这`2`是缺失的。
*   第 1 位分区：`0,1,3,4,5,6,7`和`8`，继续`0,1,3,4,5,6,7`。
*   第二位分区：`0,1,3`和`4,5,6,7`，继续`0,1,3`（奇数个元素）。
*   第 3 位分区：`0,1`和`3`，继续`3`（奇数个元素）。
*   第 4 位分区：`nothing`和`3`，因此`2`丢失。

另一个例子：

*   `a[]=1,2,3,4,5,6,7,8`，所以这`0`是缺失的。
*   第 1 位分区：`1,2,3,4,5,6,7`和`8`，继续`1,2,3,4,5,6,7`。
*   第二位分区：`1,2,3`和`4,5,6,7`，继续`1,2,3`（奇数个元素）。
*   第 3 位分区：`1`和`2,3`，继续`1`（奇数个元素）。
*   第 4 位分区：`nothing`和`1`，因此`0`丢失。

第一个分区进行`N`操作。第二个分区进行`N`操作。第三个分区进行`N/2`操作。第 4 个分区进行`N/4`操作。等等。

所以运行时间是O(N+N+N/2+N/4+...)=O(N)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-30T05:08:07.363

在没有`xor`操作的情况下，我们将这样回答这个问题

```
package missingnumberinarray;
public class MissingNumber 
{
    public static void main(String args[])
    {
        int array1[] = {1,2,3,4,6,7,8,9,10}; // we need sort the array first.
        System.out.println(array1[array1.length-1]);
        int n = array1[array1.length-1];
        int total = (n*(n+1))/2;
        System.out.println(total);
        int arraysum = 0;
        for(int i = 0; i < array1.length; i++)
        {
            arraysum += array1[i];
        }
        System.out.println(arraysum);
        int mis = total-arraysum;
        System.out.println("The missing number in array is "+mis);
    }
} 
```

# java - 将十六进制字符串解析为 int 值时出现意外的 NumberFormatException

> ID：12403212
> 
> 赞同：0
> 
> 时间：2012-09-13T09:25:41.770
> 
> 标签：java, hex

我想解析一个包含 8 个十六进制数字（4 字节）的字符串，但我得到了 NumberFormatException。这里有什么问题？

```
assertThat(Integer.parseInt("FFFF4C6A",16),is(0xFFFF4C6A)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:35:49.620

您的数字代表一个大于可分配给 int 的数字。尝试：

```
Long.parseLong("FFFF4C6A", 16); 
```

这给出了 4294921322。

从[文档](http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#parseInt-java.lang.String-int-)：

> `NumberFormatException`如果发生以下任何一种情况，则会引发类型异常：
> 
> *   第一个参数为空或长度为零的字符串。
> *   基数小于`Character.MIN_RADIX`或大于`Character.MAX_RADIX`。
> *   字符串的任何字符都不是指定基数的数字，...</li>
> *   字符串表示的值不是 int 类型的值。

这是您遇到的第四个案例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:34:01.987

那是因为`Integer.parseInt("FFFF4C6A",16)`提供的超过了定义为的[Integer.MAX_VALUE](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#MAX_VALUE)`public static final int MAX_VALUE = 0x7fffffff;`

现在，根据 parseInt(...) 的[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)，您将在以下任一情况下遇到*NumberFormatException*：

如果发生以下任何一种情况，则会引发*NumberFormatException*类型的异常：

> *   第一个参数为空或长度为零的字符串。
> *   基数小于 Character.MIN_RADIX 或大于 Character.MAX_RADIX。
> *   字符串的任何字符都不是指定基数的数字，除非第一个字符可以是减号'-'（'\u002D'）或加号'+'（'\u002B'），前提是字符串是长于长度 1。
> *   字符串表示的值不是 int 类型的值。

在您的情况下，由于提供的字符串值超过了 Integer.MAX_VALUE，因此您满足*NumberFormatException的第 4 个子句*

**可能的解决方案：**为了解析这个，使用`Long.parseLong(...)`MAX_VALUE 定义为``public static final long MAX_VALUE = 0x7fffffffffffffffL`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-07T10:35:54.167

如果您只想将该十六进制字符串表示为整数（因为它是 32 位），则需要使用`BigInteger`：

```
new BigInteger("FFFF4C6A", 16).intValue() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T09:34:46.797

您已超出整数范围。

```
Integer.MAX_VALUE = 2147483647
0xFFFF4C6A = 4294921322 
```

将其解析为`Long`作品：

```
Long.parseLong("FFFF4C6A",16) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T09:40:00.317

我不知道 assertThat() 方法，但是您的十六进制数字“FFFF4C6A”对于整数来说太大了。

例如，如果你写：

> int number = Integer.parseInt("FFFF4C6A",16)

你会得到同样的错误。编写代码的正确方法是：

> 双数 = Integer.parseInt("FFFF4C6A",16)

# oracle - 我怎样才能给用户，执行另一个用户的功能？

> ID：12403214
> 
> 赞同：6
> 
> 时间：2012-09-13T09:25:50.320
> 
> 标签：oracle, privileges, grant

我想授予用户权限以调用另一个用户函数。

我写这个：`GRANT EXECUTE ANY FUNCTION TO user;`

但它不起作用。

用户需要调用这个：

```
call XXX.YYY.AlterAllInvalidObjects(NULL,'PACKAGE BODY'); 
```

但我怎样才能给予补助？

注意：我不想使用：`GRANT EXECUTE ON FUNCTION AlterAllInvalidObjects TO user;` 我需要通用解决方案而不是特定的函数名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T09:31:01.500

```
GRANT EXECUTE ANY PROCEDURE TO user; 
```

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9013.htm#i2077938](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9013.htm#i2077938)

将管理职能和程序。您不能仅将这种方式授予功能...

**编辑**

另一种方式（但每次其他用户创建新函数以获取所有授权时，您都必须运行它）：

跑

```
select 'GRANT EXECUTE ON '||owner||'.'||object_name||' TO user;'
from all_objects
where owner = 'xxx'
and object_type='FUNCTION'; 
```

并复制粘贴执行结果...

或使用 SP 做同样的事情（查询上的光标并立即在循环中执行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:26:26.453

老实说，您似乎在询问同义词，而不是授权，因为授权无法帮助您在不提及架构的情况下调用调用 AlterAllInvalidObjects。请考虑一下[http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_7001.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_7001.htm)

# c# - 32 位和 64 位键盘消息

> ID：12403218
> 
> 赞同：0
> 
> 时间：2012-09-13T09:25:58.280
> 
> 标签：c#, visual-studio-2010

我有一个 32 位 Windows 应用程序（平台目标：x86）。它处理 Windows 消息以识别按下的键盘键。我需要将其平台目标更改为：64 位平台的任何 CPU，但将其平台类型更改为任何 CPU 时，它不起作用。当我调试时，我发现两种配置的 rawinput.keyboard.Message 值存在差异，例如，当按下控制键时，x86 为 256，任何 CPU 为 29

这里，Message 是一个 uint 类型的变量，由窗口消息的 Lparam 值填充。

我怎样才能使它通用？

代码：

```
private void ProcessInputCommand(Message message)
    {
        uint dwSize = 0;

        // First call to GetRawInputData sets the value of dwSize,
        // which can then be used to allocate the appropriate amount of memory,
        // storing the pointer in "buffer".
        UnsafeNativeMethods.GetRawInputData(message.LParam,
                         UnsafeNativeMethods.RID_INPUT, IntPtr.Zero,
                         ref dwSize,
                         (uint)Marshal.SizeOf(typeof(RAWINPUTHEADER)));

        IntPtr buffer = Marshal.AllocHGlobal((int)dwSize);
        try
        {
            // Check that buffer points to something, and if so,
            // call GetRawInputData again to fill the allocated memory
            // with information about the input
            if (buffer != IntPtr.Zero &&
                UnsafeNativeMethods.GetRawInputData(message.LParam,
                                 UnsafeNativeMethods.RID_INPUT,
                                 buffer,
                                 ref dwSize,
                                 (uint)Marshal.SizeOf(typeof(RAWINPUTHEADER))) == dwSize)
            {
                // Store the message information in "raw", then check
                // that the input comes from a keyboard device before
                // processing it to raise an appropriate KeyPressed event.

                RAWINPUT raw = (RAWINPUT)Marshal.PtrToStructure(buffer, typeof(RAWINPUT));

                if (raw.header.dwType == UnsafeNativeMethods.RIM_TYPEKEYBOARD)
                {
                    // Filter for Key Down events and then retrieve information 
                    // about the keystroke
                    if (raw.keyboard.Message == UnsafeNativeMethods.WM_KEYDOWN || raw.keyboard.Message == UnsafeNativeMethods.WM_SYSKEYDOWN)
                    {
                        ushort key = raw.keyboard.VKey;
                     } 
```

（处理密钥的其余代码）。.

获取原始输入数据：

```
 [DllImport("User32.dll")]
    extern internal static uint GetRawInputData(IntPtr hRawInput, uint uiCommand, IntPtr pData, ref uint pcbSize, uint cbSizeHeader); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T10:21:43.210

该`RAWINPUT`结构使用显式布局，这需要 64 位的不同字段偏移量。

[Pinvoke.Net](http://www.pinvoke.net/default.aspx/Structures/RAWINPUT.html)提供了一个 x86/x64 安全实现`RAWINPUT`，您可以使用它：

```
/// <summary>
/// Contains the raw input from a device. 
/// </summary>
[StructLayout(LayoutKind.Sequential)]
public struct RawInput
{
    /// <summary>
    /// Header for the data.
    /// </summary>
    public RawInputHeader Header;
    public Union Data;
    [StructLayout(LayoutKind.Explicit)]
    public struct Union
    {
        /// <summary>
        /// Mouse raw input data.
        /// </summary>
        [FieldOffset(0)]
        public RawMouse Mouse;
        /// <summary>
        /// Keyboard raw input data.
        /// </summary>
        [FieldOffset(0)]
        public RawKeyboard Keyboard;
        /// <summary>
        /// HID raw input data.
        /// </summary>
        [FieldOffset(0)]
        public RawHID HID;
    }
} 
```

# sql - SQL Server 存储过程中的错误处理

> ID：12403221
> 
> 赞同：2
> 
> 时间：2012-09-13T09:26:07.557
> 
> 标签：sql, sql-server-2008, stored-procedures

我有一个相当复杂的带有嵌套的 SP（逻辑明智），`IF BEGIN END ELSE`这个嵌套逻辑中有多个端点，其中逻辑失败，我`RAISERROR`和两个导致成功和 SQL 被执行的地方。

如何在 SP 结束时捕获错误并执行`IF Error Count>0 THEN ROLLBACK`

```
DECLARE @errCount int=0
DECLARE @DataSetCount int=0
DECLARE @countCurrent int=0
DECLARE @countHistorical int=0

IF (isnumeric(@DataSetID)=(0) OR @DataSetID=(0)) 
BEGIN
    RAISERROR('The DataSet specfied does not appear to be valid', 5, 1)
END
ELSE
IF  (@Destination='C' OR @Destination='H') 
    BEGIN
        if Exists (SELECT NULL from tblOpportunityDataSets where DataSetID=@DataSetID)
        BEGIN
            SET @countCurrent=(SELECT COUNT(1) from tblOptyRecordsCurrent where DataSetID=@DataSetID)
            SET @countHistorical=(SELECT COUNT(1) from tblOptyRecordsHistorical where DataSetID=@DataSetID)
            IF @destination='C'
            BEGIN
                if @countCurrent>0 
                BEGIN
                    RAISERROR('There are already existing records in the Current Tables for the specified DataSet', 5, 1)
                END ELSE
                if @countHistorical=0 
                BEGIN
                    RAISERROR('There do not appear to be any records in the Historical Tables to transfer for the specified Dataset', 5, 1)
                END ELSE
                BEGIN
                    -- ENTER TRANSFER CODE
                    INSERT INTO tblRecordsHistorical
                    ( X, Y, Z ) 
                    SELECT X, Y, Z  FROM tblA
                    WHERE x=y
                    -- Check that record count in both tables match
                    SET @countCurrent=(SELECT COUNT(1) from tblOptyRecordsCurrent where DataSetID=@DataSetID)
                    SET @countHistorical=(SELECT COUNT(1) from tblOptyRecordsHistorical where DataSetID=@DataSetID)
                    IF (@countCurrent<>@countHistorical)
                    BEGIN
                        RAISERROR('There was an error whilst copying the records into the Historical Tables, Source and Destination Record Count do not match', 5, 1)
                    END ELSE
                    BEGIN

                    END
                END
            END ELSE
            IF @Destination='H'
            BEGIN
                if @countHistorical>0 
                BEGIN
                    RAISERROR('There are already existing records in the Historical Tables for the specified DataSet', 5, 1)
                END ELSE
                if @countCurrent=0 
                BEGIN
                    RAISERROR('There do not appear to be any records in the Historical Tables to transfer for the specified Dataset', 5, 1)
                END ELSE
                BEGIN
                    RAISERROR('DataSet Found, ready to transfer records to HISTORICAL', 5, 1)       
                    -- ENTER TRANSFER CODE
                    INSERT INTO tblOptyRecordsCurrent
                    ( X, Y, Z ) 
                    SELECT X, Y, Z  FROM tblB
                    WHERE x=y
                    -- Check that record count in both tables match
                    SET @countCurrent=(SELECT COUNT(1) from tblOptyRecordsCurrent where DataSetID=@DataSetID)
                    SET @countHistorical=(SELECT COUNT(1) from tblOptyRecordsHistorical where DataSetID=@DataSetID)

                END
            END
        END
        ELSE
        BEGIN
            RAISERROR('The DataSet you have specified cannot be found', 5, 1)
        END
    END
    ELSE
    BEGIN
        RAISERROR('You have not specified a valid Destination', 5, 1)
    END 
```

请注意，在包含 INSERT INTO 代码的两个部分中，将至少有两个额外的 SQL 操作语句，它们必须全部工作，否则它们都将失败。

编辑：我已经去了

```
BEGIN TRAN
BEGIN TRY
    -- STATEMENT 1
    INSERT INTO X WHERE Y
    -- STATEMENT 2
    DELETE FROM X WHERE Y
    -- STATEMENT 3
    UPDATE X WHERE Y
    COMMIT
END TRY
BEGIN CATCH
    ROLLBACK TRAN
    RAISERROR('There was an error whilst copying the records into the Current Tables.  The Transaction has been rolled back', 5, 1)
END CATCH 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T09:33:55.590

为了能够执行 a `rollback`，您需要`begin transaction`在开始时执行 a 。

然后你要么`commit`或`rollback`行动。

[http://msdn.microsoft.com/en-us/library/ms174377](http://msdn.microsoft.com/en-us/library/ms174377)

您可能会发现`try/catch`语法更容易

[http://msdn.microsoft.com/en-us/library/ms175976(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms175976(v=sql.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:32:49.073

您可以在存储过程中使用事务；请参考[SP中的交易链接](http://blog.sqlauthority.com/2010/06/02/sql-server-stored-procedure-and-transactions/)

# reference - 如何在 EMF 中创建对不同模型 XMI 的引用

> ID：12403224
> 
> 赞同：1
> 
> 时间：2012-09-13T09:26:12.320
> 
> 标签：reference, tags, persistence, xmi, emf

我有一个包含 2 个类的 EMF 图。个人和团体。我正在尝试将这 2 个类保存到 2 个不同的 XMI 文件中。它必须看起来有点像这样

组.xmi

```
<XMI>
 <Group>
  <Person id="1"/>
  ...
  ...
 </Group>
 ...
</XMI> 
```

人物.xmi

```
<XMI>
 <Person id="1">
  <Name>
 </Person
<XMI> 
```

我知道这是可能的......但我无法重新创建它......我只能通过嵌入组中的人员来获取 XMI。

任何提示/提示/教程...关于这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:57:17.073

找到了答案。

首先，您需要确保每个实例都有自己的唯一 ID...这可以通过使用 EcoreUtil 在构造函数中设置 ID 来完成：

> setId(EcoreUtil.generateUUID());

之后，您需要确保首先在 XMI 文件中创建人员，然后保存组。仅保存组而不先保存人员将导致您的人员包含在此组中并且仅包含此组。

# sql - 使用两个数据库创建查询

> ID：12403227
> 
> 赞同：3
> 
> 时间：2012-09-13T09:26:19.960
> 
> 标签：sql, sql-server, asp-classic

我正在开发一个 web 应用程序（现在使用经典的 asp），它需要查询同一服务器上两个单独数据库上的两个表。

IT 团队为每个数据库提供了单独的应用程序级登录名/密码，这些登录名/密码将在我的代码中用于连接。

我想创建一个将两个表（每个数据库中的一个）链接在一起的查询，但不太确定如何，谷歌也没有给我太多帮助。

我假设我必须创建两个连接来执行此操作，因为我有两个单独的登录名，但是我将如何创建一个使用每个表的查询。

请注意 - 我们的 IT 团队在此阶段不会将这两个数据库链接在一起。我几乎坚持我所拥有的。

希望你能帮忙。垫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:34:46.260

如果 IT 团队希望数据库分开，您显然不能使用数据库为您进行联接。

您必须执行加入客户端。Linq 是一种简单的方法，但包含两个数据集的循环也可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:34:59.427

跨数据库查询的典型语法类似于：

```
SELECT <columns>
  FROM [schema].[table] t1 INNER JOIN
       [databaseName].[schema].[table] t2 ON <condition> 
```

但是，如果您使用的是 2005 或更高版本，那么值得在第一个数据库中创建一个同义词，这样对第二个数据库的引用就不会出现在您的代码中（如果数据库名称稍后更改怎么办）？

```
CREATE SYNONYM [schema].[synonymName] FOR [databaseName].[schema].[table] 
```

然后您的查询变为：

```
SELECT <columns>
  FROM [schema].[table] t1 INNER JOIN
       [schema].[synonymName] t2 ON <condition> 
```

您可能需要适当地设置权限，以便用于连接第一个数据库的用户可以访问第二个数据库。如果 IT 团队简单地从同一服务器主体授予对两个数据库的相关访问权限，那么这是实现它的最佳方式。如果您坚持使用两个完全独立的登录名，那就太糟糕了。但是没有任何必要“将数据库链接在一起”来运行跨数据库查询。

# php - 如何在php中找到两个时间间隔的持续时间？

> ID：12403228
> 
> 赞同：2
> 
> 时间：2012-09-13T09:26:21.177
> 
> 标签：php

我有以下格式的 Mysql 表 shift_def。

```
+-------------------------------------------------------------------------------+
|  id   |   name   |   start_time   |    end_time   |   description   |  break  |
|-------------------------------------------------------------------------------|
|  101  | Shift1   |    01:03:55    |    06:00:55   |  Shift 1        |   1     |
|-------------------------------------------------------------------------------|
|  102  | Shift2   |    06:03:55    |    01:00:55   |  Shift 2        |   3     |
+-------------------------------------------------------------------------------+ 
```

找到总班次持续时间。我在我的 php.ini 中执行以下过程。

```
$shift_time = mysql_query("select start_time, end_time from rpt_shift_def where name ='Shif1'")or die(mysql_error());
        while ($row = mysql_fetch_assoc($shift_time)) 
        {
           $Total_shift_time = strtotime($row['end_time']) - strtotime($row['start_time']);
            $hours=floor($Total_shift_time/3600);
            $Total_shift_time-=$hours*3600;
            $minutes=floor($Total_shift_time/60);
            $Total_shift_time-=$minutes*60;
            $seconds=$Total_shift_time;
            $Total_shift_time=$hours.":".$minutes.":".$seconds;*/                                                                                                                                                                                                                                                                                                                                                                            
            echo "$Total_shift_time";
            echo "</br>";
        } 
```

输出是

```
4:57:0 
```

当我为 shift 2 尝试相同的操作时，预期的输出是

```
18:57:0 
```

但输出是

```
-6:57:0 
```

负值是因为班次 2 的 end_time 小于 start_time。如何解决这个问题呢。

谁能帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:28:41.487

如果结束时间小于开始时间，则加 24 小时（原因是班次在第二天结束）。

由于您已经计算过`$Total_shift_time`，您可以检查它是否为负数。

```
if( $Total_shift_time < 0 ) {
    $Total_shift_time += 86400;  // Number of seconds in a day
} 
```

Err... 确保在您第一次计算轮班时间之后和开始计算小时、分钟和秒之前执行此操作...

# multithreading - 观察后台任务进度的可可方式是什么？

> ID：12403229
> 
> 赞同：9
> 
> 时间：2012-09-13T09:26:31.487
> 
> 标签：multithreading, cocoa, grand-central-dispatch, key-value-observing

想象一下以下情况：你有一个后台任务（这里的“任务”一词是指一个随机计算单元，而不是一个 NSTask！），它是使用任何现代技术实现的，例如 Grand Central Dispatch 或 Operation Queues。主线程上的某些控制器对象想要监视此后台任务的进度并将其报告给用户。

任务进度可以具有以下特征：

*   **不确定或确定**
    *因为控制器对象必须知道何时将 NSProgressIndicator 切换到适当的样式。我们可以使用一个约定，将进度视为不确定，直到实际进度值从零上升。*
*   **进度值本身**
    *一个简单的浮点值*
*   **当前阶段**
    *NSString 的本地化描述，因为与用户的通信良好*

什么设计最适合这些要求，同时又是最可可的？

# 可以有变体。

## 代表团

在启动任务之前，将您的控制器对象设置为委托。

```
@protocol MyBackgroundTaskDelegate
@required
- (void) progress: (float) value; // 0.0…1.0
@optional
- (void) workingOn: (NSString*) msg; // @"Doing this, doing that…"
@end 
```

其实这个模板我成功用过很多次了，但是感觉有点太啰嗦了。

## 阻止回调

与委托非常相似，但将代码保存在一个地方。

```
// Starting our background task...
[MyTask startComputationWithProgressHandler: ^(float progress, NSString* msg)
{
    // Switching to the main thread because all UI stuff should go there...
    dispatch_async(dispatch_get_main_queue(), ^()
    {
        self.progressIndicator.progress = progress;
        self.informationalMessage = msg;
    });
}]; 
```

## KVO 或轮询进度属性

在这种情况下，后台任务对象必须有两个类似于这些的属性：

```
@property(readonly, atomic) float progress;
@property(readonly, atomic) NSString* message; 
```

并且客户端（我们的控制器对象）应该将自己设置为这些属性的观察者。我在这个解决方案中看到的主要缺陷是 KVO 通知总是到达导致更改的同一线程上。虽然您可以强制您的观察者（回调）方法在特定的 GCD 队列上运行，但它可能并不总是合适的。

## NSNotificationCenter

后台任务发送通知，客户端监听它们。

**还有其他适用于这种情况的模式吗？**什么解决方案可以被视为最现代和可可的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:11:42.710

当谈到*观察后台任务进度的可可方式是什么？*我会说委托和 NSNotificationCenter，因为块和 KVO 是后来引入的，因此在最初的 Cocoa 代码编写年代最初并不存在。事实上，可选的协议方法在以前的 objc 版本中也没有，默认情况下一切都是必需的。

从中您实际上可以看到块是实现临时委托的一种更简单的方法，其中块的接收者声明将哪些参数传递给块，并且您可以自由地在块中对它们做任何您想做的**事情**。而且 KVO 似乎是一种使用更标准化的属性方法来实现 NSNotification 的较少样板的方式，有助于*加入*以前称为 Interface Bilder 的 UI，并简化*“我必须做什么才能知道什么时候这值更改”*，这需要大量带有 NSNotification 和长常量的文档。

但我仍然认为这些技术中的每一个都有一些地方：块对于迷你自组织协议来说很好，但是如果你需要一个中等或更高的接口区域或双向接口，那将是一个严重的麻烦，而 KVO 对观看没有帮助类/对象之外的全局变量或值，或者您不想成为公共接口一部分的东西。

所以我的确定答案是：

*   1 对 1 简单通信：块
*   1对1复杂通信：委托/协议
*   1 对多简单通信：KVO（如果可能）
*   1对多复杂通信：NSNotifications

与往常一样，为每个问题选择最好的工具，并认为我没有以任何建议的方式实现上述所有内容！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T01:13:18.050

对于您描述的任务类型，我认为这`NSNotificationCenter`是通用模式的最佳选择。原因是您通常无法知道有*多少*外部观察者。通知系统已经支持任意数量的事件观察者，而其他非轮询选项（委托和块）通常是一对一的，除非您做额外的工作来支持多个注册。

正如您自己指出的那样，如果可以避免，轮询是一个坏主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:38:53.543

根据我的经验，委托或块回调是最好的设计选择。选择一个而不是另一个主要取决于哪个更方便编码和支持特定情况。两者都是异步的。块回调通常会减少额外实例变量的必要性，因为块在其范围内捕获变量。当然，对于两者来说，都必须知道在哪个线程上执行回调或调用委托方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T00:26:38.200

我会选择 KVO，因为基本上使用 @properties 时您可以免费获得它。但我不建议使用普通的 KVO。因为那总是会调用 -observerValueOfKeyPath... 一旦你观察到多个键路径，维护起来就会很烦人。你有这个带有很多 if(keyPath==bla) 的超级功能......

为此，我推荐 MikeAsh 的 MAKVONotificationCenter。当您不再需要它时忘记删除观察者时，它还可以使您免于许多崩溃

# python - Python：isinstance(i, type(i)) 可以评估为 False 吗？

> ID：12403231
> 
> 赞同：2
> 
> 时间：2012-09-13T09:26:40.677
> 
> 标签：python, oop, built-in

我正在寻找`something`以下代码，以便之后的检查在任何情况下都`isinstance()`可以评估为：`True`

```
i = WonderfulClass()
classinfo_of_i = something(i)
isinstance(i, classinfo_of_i) # must evaluate to True 
```

如果`type`是您的答案，如果您解释原因，我将不胜感激。是`type`真正的对应物`isinstance`吗？或者，反过来问，你能想出一个`isinstance(i, type(i))`评估为 False 的情况吗？

这个问题出现在[检查列表或集合的元素是否为单一类型的简单方法的上下文中？](https://stackoverflow.com/questions/12402845/the-simple-way-to-check-if-the-elements-of-a-list-or-set-are-single-type/12402930#12402930)，我们必须遍历一个序列并检查所有序列元素是否属于同一类型。在这种情况下，元素将相互比较。这种比较可以基于`type`或基于`isinstance`。

相关[文件](http://docs.python.org/library/functions.html#isinstance)`isinstance(object, classinfo)`：_

> 如果 object 参数是 classinfo 参数的实例，则返回 true

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T09:30:23.277

> *“ type 是 isinstance 的真正对应物吗？或者，反过来问，你能想到 isinstance(i, type(i)) 评估为 False 的情况吗？”*

我看不到任何`isinstance(i, type(i))`不会返回的情况`True`。

`type()`检查并从实例返回类型对象，因此返回的值没有理由无法通过`isinstance()`检查。

深入 cPython 的源代码，我们看到[后面的代码`type()`](http://hg.python.org/cpython/file/9b40d018e4cf/Objects/abstract.c#l31)只是简单地返回了附加到实例的类型对象：

```
v = (PyObject *)o->ob_type;
Py_INCREF(v);
return v; 
```

而[isintance() 代码](http://hg.python.org/cpython/file/9b40d018e4cf/Objects/abstract.c#l2521)做的第一件事是检查类型是否完全匹配（它稍后会继续匹配继承链中的类）：

```
int
PyObject_IsInstance(PyObject *inst, PyObject *cls)
{
   _Py_IDENTIFIER(__instancecheck__);
   PyObject *checker;

   /* Quick test for an exact match */
   if (Py_TYPE(inst) == (PyTypeObject *)cls)
      return 1; 
```

请注意，这`Py_TYPE`只是一个返回与 .`obj->ob_type`的返回值匹配的宏`type()`。这[在 Include/object.h 中定义](http://hg.python.org/cpython/file/9b40d018e4cf/Include/object.h#l117)为：

```
#define Py_TYPE(ob) (((PyObject*)(ob))->ob_type) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:39:16.520

`type()`返回预期的内容，但前提是您使用新样式类（继承自`object`）。

考虑以下：

```
>>> class WonderfulClass(object):
...     pass
...
>>> i = WonderfulClass()
>>> isinstance(i,type(i))
True
>>> type(i)
<class '__main__.WonderfulClass'>
>>> class AnotherClass:
...     pass
...
>>> z = AnotherClass()
>>> type(z)
<type 'instance'>
>>> isinstance(z,type(z))
True 
```

因此，尽管`isinstance`检查会起作用，但值得注意的是差异。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T09:44:58.703

首先，`isinstance`是为了处理继承。例如

```
>>> isinstance("asdfs", object)
True 
```

这里字符串被认为是对象的一个​​实例，因为“str”类型是“object”类型的继承者。所以 type 不是 isinstance 的严格对应物。

一切都是python中的对象，因此， isinstance(anything, object) 应该为任何东西返回 True ，因此，数组中的所有值在它们的类层次结构中都有一个共同的祖先：对象。

如果您想直接引用更特殊的类型/将其存储在变量中并能够与之进行比较，`types`您可能会对模块感兴趣。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T09:43:00.467

```
>>> class P:
...   pass
...
>>> p = P()
>>> type(p)
<type 'instance'>
>>> p.__class__
<class __main__.P at 0x015A6A78>

>>> class D(object):
...   pass
...
>>>
>>> d = D()
>>> type(d)
<class '__main__.D'>
>>> d.__class__
<class '__main__.D'> 
```

# c# - 如何：ASP.Net 中单页的单连接

> ID：12403237
> 
> 赞同：0
> 
> 时间：2012-09-13T09:26:57.523
> 
> 标签：c#, asp.net, sql-server-2008-r2, sqlconnection

我有一个页面，我在其中使用 8-10 个用户控件来显示动态数据。所有用户控件都在它们上使用中继器进行数据绑定，因此从这个单一页面中，我在单个用户的单个请求中有 8-10 个连接。我正在使用从 SqlHelperClass 的 Sql Server 数据库中获取数据的传统方式（完成后关闭并处理每个连接。我正在处理它。）`->`DataLayer `->`BusinessLayer，然后是 UI。

所以我只想知道：

1.  IIS中是否有任何设置
2.  web.config 中的任何设置
3.  Sql Server 中的设置

这样我就可以避免单个请求中的多个连接。或类似情况的任何其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:37:47.593

幸运的是， [ADO.NET 已经使用连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)来自动为您解决这个问题。

不建议自己处理许多打开/关闭连接。只需使用 using 语句来正确处理托管资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:35:25.747

页面有一个数据源，而不是每个控件一个数据源。用户控件不应该担心他们是否获得了他们的数据，他们应该担心它是如何在屏幕上呈现的

# numpy - 沿 Numpy ndarray 轴的最大值？

> ID：12403238
> 
> 赞同：4
> 
> 时间：2012-09-13T09:26:58.983
> 
> 标签：numpy, max, multidimensional-array

[![numpy_array](../Images/d4b5094780ef32ec77316a335b2066b8.png)](https://i.stack.imgur.com/7y7tM.jpg)

恐怕我无法描述这个问题，所以我画了一个草图。无论如何，我需要的是在 numpy ndarray 中找到沿第 0 轴的最大值，iearray.shape(5,5,3) ，以及它们相应的“层号”，并使用“层号”创建一个形状为 (1,5,3) 的新二维数组。希望我在这里给出清晰的描述..非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:29:02.287

如果您查看 的文档`np.max`，您会看到它需要一个`axis`参数：

```
a.max(axis=0) 
```

但这还不能帮助你。但是，有一个函数`argmax`可以为您提供沿给定轴的最大值的索引：

```
a.argmax(axis=...) 
```

所以，让我们找到你的第一个 (5,5) 数组：它是`a[...,0]`. 您可以使用（或 0）找到每行（或列）的最大值的位置`a[...,0].max(axis=1)`，并使用它来查找另一侧的值。

# mongodb - 在 MongoDB 中存储 null 与根本不存储密钥

> ID：12403240
> 
> 赞同：61
> 
> 时间：2012-09-13T09:27:02.407
> 
> 标签：mongodb, mongodb-query, document-database, nosql

在我看来，当您创建一个 Mongo 文档并且有一个`{key: value}`有时不会有值的字段时，您有两个选择：

1.  写入`{key: null}`即在字段中写入空值
2.  根本不要将密钥存储在该文档中

这两个选项都很容易查询，一个是您查询，`{key : null}`另一个是您查询`{key : {$exists : false}}`。

我真的想不出这两个选项之间的任何差异会对应用程序场景产生任何影响（除了选项 2 的存储量略少）。

谁能告诉我是否有任何理由更喜欢这两种方法中的任何一种，为什么？

**编辑**

在问了这个问题之后，我还想到索引在这两种情况下的行为可能不同，即可以为选项 2 创建一个稀疏索引。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-13T10:28:30.400

确实，您还有第三种可能性：（ `key: ""`空值）

而且您忘记了有关空值的特殊性。查询 `key: null`将检索您所有 key 为 null**或**key 不存在的文档。

当查询`$exists:false`将仅检索字段键不存在的文档时。

回到您的确切问题，这取决于您的查询和数据代表的内容。如果您需要保留它，例如，用户设置了一个值然后取消设置它，您应该将该字段保留为 null 或空。如果您不需要，您可以删除此字段。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-13T19:13:33.380

请注意，由于 MongoDB 不使用字段名字典压缩，`field:null`因此会消耗磁盘空间和 RAM，而根本不存储 key 不会消耗资源。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-13T22:17:31.707

它真的归结为：

*   你的场景
*   您的查询方式
*   您的索引需求
*   你的语言

我个人选择存储空键。它使集成到我的应用程序中变得更加容易。我将 PHP 与 Active Record 一起使用，并且 uisng 空值使我的生活变得更轻松，因为我不必将字段依赖的压力放在应用程序上。此外，我不需要编写任何复杂的代码来处理设置不存在变量的魔法。

我个人不会存储一个空值，`""`因为如果你不小心，你可能有两个空值`null`，`""`然后你会有一个偶然的时间专门查询。所以我个人更喜欢`null`空值。

至于空间和索引：这取决于有多少行可能没有此列，但我怀疑您是否真的会注意到索引大小会由于一些带有 null in 的额外文档而增加。我的意思是存储的差异是微小的，特别是如果相应的键名也很小。这也适用于大型设置。

坦率地说，我不确定之间的索引使用情况`$exists`，`null`但是`null`可能是一种更标准化的方法来查询存在性，因为请记住 MongoDB 是无模式的，这意味着您不需要在文档中包含该字段，该字段再次产生两个空值：不存在和`null`。所以最好选择其中一个。

我选择`null`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-14T09:45:12.000

您可能要考虑的另一点是当您使用诸如 Hibernate OGM 之类的 OGM 工具时。

如果您使用 Java，Hibernate OGM 支持 JPA 标准。因此，如果您可以编写 JPQL 查询，如果您想切换到 OGM 工具支持的备用 NoSQL 数据存储，理论上会很容易。

JPA 没有在 Mongo 中定义 $exists 的等价物。因此，如果您的集合中有可选属性，那么您无法为其编写适当的 JPQL。在这种情况下，如果属性的值存储为 NULL，那么仍​​然可以编写一个有效的 JPQL 查询，如下所示。

```
SELECT p FROM pppoe p where p.logout IS null; 
```

# c# - 使用控制台应用程序引用 VB.net exe 表单函数

> ID：12403243
> 
> 赞同：1
> 
> 时间：2012-09-13T09:27:10.507
> 
> 标签：c#

我对引用 dll 和 .exe 非常陌生。我有一个每天向用户发送报告的应用程序。这是一个手动过程，我的任务是自动化该过程。现在，我想创建一个控制台应用程序，并引用在 .exe 上工作的表单。我对如何做到这一点非常迷茫。任何人都可以为我提供有关如何执行此操作的示例或教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:33:51.160

在您的控制台应用程序项目中添加对 VB.net 程序集（*.exe 文件）的引用，使用对象浏览器检查它并调用所需的方法。

要添加参考，请右键单击项目的参考文件夹 :)

![在此处输入图像描述](../Images/8cf103c3abbbf2aa506e02240cdaf45d.png)

# java - 我们可以在java中创建公共静态抽象类吗？

> ID：12403248
> 
> 赞同：17
> 
> 时间：2012-09-13T09:27:26.260
> 
> 标签：java

我在谷歌搜索一些东西，我得到了一个类似的代码

```
public static abstract class LocationResult{
    public abstract void gotLocation(Location location);
} 
```

这是一个嵌套类，但想知道如何访问它？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-13T09:30:12.130

它必须是嵌套类：类上的 static 关键字*（*不是其中的方法）仅用于嵌套类（并且在语法上有效）。这样的**静态成员类**（在 Nutshell 的常见命名文化中使用 Java）不包含对封闭类的引用，因此只能访问其中的静态字段和方法（与非静态的不同；请参阅 Java 中嵌套类的任何摘要（也称为内部类）。

它可以像这样访问：

```
public class EnclosingClass {
  public static abstract class LocationResult{
    public abstract void gotLocation(Location location);
  }
}

EnclosingClass.LocationResult locationResult = ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T09:31:31.407

只有嵌套类可以是静态的。通过这样做，您可以使用嵌套类而无需外部类的实例。

所以你可以创建一个类来扩展它`extends Mainclass.LocationResult`并使用它`Mainclass.LocationResult instance = ...`

# ios - 适用于 iOS 的充气城堡（目标 C）

> ID：12403249
> 
> 赞同：5
> 
> 时间：2012-09-13T09:27:30.240
> 
> 标签：ios, bouncycastle

是否有用于开发 iOS 应用程序的 Bouncy Castle 版本？

任何反馈将不胜感激。谷歌搜索没有回答这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T09:36:12.083

Bouncy Castle 仅适用于 C# 和 Java...

对于Objective C，您可以使用以下内容...

*   用于加密的 [OpenSSL](http://openssl.org/)
*   可可的[SSLCrypto](http://septicus.com/products/opensource/)

您可以访问[http://developer.apple.com/mac/library/documentation/Darwin/Reference/ManPages/man3/CCCryptor.3cc.html#//apple_ref/doc/man/3cc/CCCryptor](http://developer.apple.com/mac/library/documentation/Darwin/Reference/ManPages/man3/CCCryptor.3cc.html#//apple_ref/doc/man/3cc/CCCryptor)了解更多详情，因为有内置功能来做到这一点......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T09:33:13.670

不，90% 的时间加密是通过 Apple 自己的 CommonCrypto 库进行的。幸运的是，CommonCrypto 有一些非常易于使用的包装器，请查看 Rob Napier 的[RNCryptor](https://github.com/rnapier/RNCryptor)。

# excel - 在 VBA 中转换为文本时保持日期格式

> ID：12403251
> 
> 赞同：0
> 
> 时间：2012-09-13T09:27:58.367
> 
> 标签：excel, vba, date-format

我正在努力处理 excel/VBA 中的日期

我有一个带有日期列的电子表格，按预期以英国格式显示。

然后我正在处理电子表格并将其保存为文本文件，以便将数据加载到另一个系统中。

当我保存文件时我的问题出现了，因为它做了两件事，首先是由于美国对 Excel 的偏见，它试图“翻转”日期，例如 2012 年 7 月 1 日从 01/07/2012 到 07/01/2012

其次，当我保存文件并重新打开文本文件时，它似乎已经删除了零，所以我的日期现在不仅读取错误的方式，而且没有零，所以显示 2012 年 7 月 1 日

我要导入的系统对它接受的日期格式非常具体。

我已经尝试了各种

```
ActiveCell.FormulaR1C1 = "=TEXT(RC[-1],""dd/mm/yyyy"")"

Cells(x, 3).Value = Left(CStr(Cells(x, 3).Value), 2) + "/" + Mid(CStr(Cells(x, 3).Value), 4, 2) + "/" + Right(CStr(Cells(x, 3).Value), 4) 
```

在 Excel 中，这两种方法都可以保持我需要的格式，当我将文件另存为文本时，我会遇到上述问题。

我几乎想用零填充日期并强制保存为文字字符串，但我已经没有想法了。

我确信这是一个简单的解决方法，但我需要其他人关注这个问题，因此感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T20:42:44.033

保存到 .csr 文件以导入 Access 时，我遇到了同样的问题。答案是添加`Local:=True`到`SaveAs`声明中。这将日期保持为英国格式。

下面是我使用的代码：

```
' save data to csv file
ChDir "C:\Documents and Settings\Doug\My Documents\Fitness\LogCard Data"
ActiveWorkbook.SaveAs Filename:= _
 "C:\Documents and Settings\Doug\My Documents\Fitness\LogCard Data\LogCard_access.csv" _
    , FileFormat:=xlCSV, CreateBackup:=False, Local:=True 
```

# python - 使用 sphinx WebSupport：是否可以禁用对特定内容的评论？

> ID：12403257
> 
> 赞同：1
> 
> 时间：2012-09-13T09:28:18.117
> 
> 标签：python, python-sphinx

我正在使用[Sphinx API](http://sphinx.pocoo.org/websupport.html)将 Sphinx 文档集成到 Web 应用程序中。

我希望用户能够为文档做出贡献，因此我使用 Sphinx WebSupport 中内置的评论/投票框架。

在大多数情况下，这很有效：文档的每一段都可以注释。

在文档中的几个地方，我使用了表格。Sphinx 为表格中的每个单元格创建注释图标。有没有办法禁用表格内的评论图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:22:01.497

我可以通过修改来做到这一点`websupport.js`。

在`$(document).ready`事件处理程序中，更改：

```
$('.sphinx-has-comment').comment(); 
```

至：

```
$('.sphinx-has-comment:not(table p)').comment(); 
```

# android - 如果没有 SDCard，如何防止 Android 应用程序安装？

> ID：12403260
> 
> 赞同：5
> 
> 时间：2012-09-13T09:28:23.827
> 
> 标签：android

我的代码逻辑需要在设备中安装 SD 卡。我在应用程序的初始屏幕中添加了针对这种情况的检查，但想在用户下载/安装此应用程序之前通知他们。有没有办法做到这一点？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:34:01.143

在应用程序安装之前无法做到这一点，因为限制此类事情的唯一方法是使用[`<uses-feature>`](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)标签。但是，该标签没有存储要求的选项。您可以给出的最佳警告是将其突出显示在您的应用说明中。

另一方面，我听说过的每个设备都有某种形式的外部存储，无论是 SD 卡还是作为外部存储安装的内置内存。您通过使用启动画面来检查外部存储是执行此操作的最佳方式，因为没有其他选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:31:51.387

没有办法做到这一点。必须安装您的应用程序才能检查用户的环境。您可以尝试强制安装您的应用程序的 SD 卡，因此如果没有，Google Play**可能**（未经测试）根本不允许安装应用程序，但它不会解决您的问题，因为用户仍然不知道为什么。解决方案是在产品说明中明确说明 SD 卡是强制性的。但请注意，需要 SD 卡是有风险的，因为许多设备在仍然提供外部存储的同时没有任何设备。我的建议 - 只需添加有关存储要求的注释并让系统处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:35:23.297

我认为这是**不可能**的。**您正在启动屏幕上检查 sdcard 并阻止用户进行下一个进程是正确的解决方案**或`android:installLocation`用于在 sdcard 上安装 android 应用程序。

> 从 API 级别 8 开始，您可以允许将应用程序安装在外部存储（例如，设备的 SD 卡）上。这是一个可选功能，您可以使用 android:installLocation 清单属性为您的应用程序声明。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    android:installLocation="preferExternal"
    ... > 
```

> 如果您声明“preferExternal”，您要求将您的应用程序安装在外部存储上，但系统不保证您的应用程序将安装在外部存储上。如果外部存储已满，系统会将其安装到内部存储上。用户还可以在两个位置之间移动您的应用程序。

**当您的应用程序安装在外部存储上时：**

*   只要在设备上安装了外部存储，就不会影响应用程序的性能。
*   .apk 文件保存在外部存储中，但所有私有用户数据、数据库、优化的 .dex 文件和提取的本机代码都保存在内部设备内存中。
*   存储应用程序的唯一容器使用随机生成的密钥进行加密，该密钥只​​能由最初安装它的设备解密。因此，安装在 SD 卡上的应用程序仅适用于一个设备。
*   用户可以通过系统设置将您的应用程序移动到内部存储。

[看这里了解更多详情。](http://developer.android.com/guide/topics/data/install-location.html)

# android - 如何在Android中滑动抽屉内容背后的非活动元素？

> ID：12403272
> 
> 赞同：0
> 
> 时间：2012-09-13T09:28:53.817
> 
> 标签：android, android-layout

我目前有一个`ListView`可点击的项目。然后我有一个滑动抽屉，其内容只包含 50% 透明的黑色背景，它在两个方向上都填充了父级。

问题是当我单击滑动抽屉内容层（黑色背景中的任何位置）时，它会触发单击其*下方*的列表视图项。

如何使滑动抽屉内容布局后面的任何内容都处于非活动状态？

*（我尝试在内容布局上将 clickable 设置为 false 并没有帮助）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:42:58.067

我认为您应该将滑动抽屉内容布局的可点击状态设置为`true`.

# sql - 在 PLSQL 的另一个存储过程中使用存储过程的值

> ID：12403273
> 
> 赞同：2
> 
> 时间：2012-09-13T09:28:56.167
> 
> 标签：sql, oracle, plsql

有没有办法从另一个存储过程调用存储过程，并在第一个存储过程中使用检索到的值（来自第二个过程）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:11:35.753

```
-- procedure #1
create or replace procedure Proc1(p_RetValue out SomeDataType) 
is
begin
  -- any logic goes here
  p_retValue := 5+5; -- for example. Let's assume that the SomeDataType is number;   
end;

-- second procedure 
create or replace procedure Proc2 is
  l_variable number;
begin
  Proc1(l_variable);  -- the value 10 will be assigned to l_variable;
end; 
```

# visual-studio-2012 - EF5，Model-First，Generate Migration T-SQL.xaml 似乎没有安装在 Visual Studio 2012 中

> ID：12403278
> 
> 赞同：0
> 
> 时间：2012-09-13T09:29:06.167
> 
> 标签：visual-studio-2012, entity-framework-5

我试图让 Model First DBGen 工作，特别是当一个人更改模型并且希望在数据库中保留任何数据时。VS2012 抱怨“Entity Framework Tools \DBGen”中缺少“Generate Migration T-SQL.xaml”，其中仅存在“TablePerTypeStrategy.xaml”。

我确实尝试从 VS2010 安装中复制此文件，但这不起作用。

我有点困惑，为什么我的 EF5 安装不完整，因为我昨天刚刚安装了 VS2012。

有什么想法吗？

非常感谢，

埃德

PS我确实在VS2010中尝试过这个，得到了很多，但是当我执行edmx.sql时我得到了

“检测到消息 50000，级别 16，状态 127，第 6 行。模式更新正在终止，因为可能会发生数据丢失。** 批处理执行期间遇到错误。退出。”

# perl - 在Perl中将哈希中的所有值相乘？

> ID：12403280
> 
> 赞同：0
> 
> 时间：2012-09-13T09:29:13.030
> 
> 标签：perl, hash, key-value, multiplication

我想将哈希的所有值相乘，而不必调用特定元素。例如，我不想这样做，因为我不知道哈希中的元素数量来执行此操作*。*`$hash{'kv1'} * $hash{'kv2'} * $hash{'kv3'}`

我猜有一个简单而有效的功能可以做到这一点，也许是使用`each`或其他东西，但我找不到任何可以遵循的例子。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T09:36:16.860

从 1 开始（因为 1 乘以任何值就是乘以它的值），然后遍历散列的值并将当前总值乘以散列中的值。

```
#!/usr/bin/env perl

use v5.12;
my %hash = ( a => 1, b => 2, c => 3, d => 4 );
my $value = 1;
$value = $value * $_ foreach values %hash;
say $value; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-13T11:17:19.560

这就是[List::Util](http://p3rl.org/List::Util)的**reduce**的用途：

```
use List::Util 'reduce';

my %hash = (foo => 3, bar => 7, baz => 2);

say reduce { our $a * our $b } values %hash; 
```

输出：

> 42

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-13T09:37:37.873

我会这样迭代`keys %hash`：

```
my $prod = 1;
$prod *= $hash{$_} for keys %hash; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T09:36:33.163

这不行吗？

```
my $m = 1;
for (values %my_hash) {
    $m *= $_;
} 
```

# objective-c - ios - 在另一个 UIView 中子类化 UIView？

> ID：12403282
> 
> 赞同：0
> 
> 时间：2012-09-13T09:29:27.803
> 
> 标签：objective-c, ios, uiview, uiviewcontroller

我有 2 个 UIView，其中都有一些代码。

我可以将一个子类化为一个 UIViewController，就像这个`self.view addSubView:_msgView];` _msgView 是一个 UIView。

现在 _msgView 是一个普通的 UIView，它有一个 0.7 的 Alpha 来覆盖 UIViewController。

现在我有另一个名为 menuButtons 的 UIView，我想把它放在 _msgView 之上。

我在想我可以使用`[_msgView addSubView:_menuButton];`，但这不起作用并发出警告

> 不兼容的指针类型将“MenuButtons *__strong”发送到“UIView *”类型的参数

**如何将 UIView 放在另一个 UIView 之上？**

//编辑：

```
#import <UIKit/UIKit.h>
#import "SlideMessageView.h"
#import "definitions.h"

@interface MenuButtons : UIView
{
UIButton *onBack;
UIButton *onForward;
UIButton *onRefresh;
UIButton *onHome;
UIButton *onSafari;
UIButton *onChrome;
UIButton *onPocketReader;
UIButton *onSavePDF;
UIButton *onPrint;
UIButton *onShare;

SlideMessageView *msgView;

BOOL viewVisible;
} 
```

UIButton 的@properties 设置在该值之下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:44:42.533

你做一件事..如果你通过代码生成两个视图，然后在 self.view 本身中添加两个视图并分别设置它们的框架。

即如果第一个视图位于顶部，则设置框架 msgview.frame = CGRectMake(0,0,320,100); 第二个视图 someview.frame = CGRectMake(0,100,320,200);

# c# - Command、CommandHandler 和 CommandInvoker

> ID：12403283
> 
> 赞同：12
> 
> 时间：2012-09-13T09:29:37.010
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, command

我最近在一个开源`ASP.NET MVC 3`项目中看到了一个新模式（对我来说是新的），它有很多`Command`,`CommandHandler`和- 以及`CommandInvoker`它们的接口 - 我无法理解这个模式！你能告诉我这种模式的名称是什么，我在哪里可以了解它？请问它有什么好处？提前致谢。

**更新：**我说的是这个项目：

[带有 RavenDB 的图片库](https://github.com/robashton/RavenGallery/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T09:43:04.133

看看这篇文章：[同时……在我的架构的命令方面](https://blogs.cuttingedge.it/steven/p/commands)

它包含有关为什么要将命令和命令处理程序用作架构的一部分的详尽解释。像 CQRS 这样的架构模式是基于命令和事件的，但即使没有应用 CQRS，在架构中使用命令也是非常有价值的，正如文章所解释的那样。

然而，RavenGallery 项目太小，无法真正看到这种命令/处理程序模型的好处。当项目变大时，这种模式开始大放异彩。

[在我的书](https://mng.bz/BYNl)的第 10 章中可以找到关于这个主题的更彻底的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-27T20:44:56.907

继续 Steven 的想法，命令、处理程序、调用模式提供了调用命令的能力，一次是一个 SOLID 对象，可以直接从用户或服务可以直接交互的 UI 或其他顶层调用。

我相信它的目标是降低 N 层应用程序中通常存在的复杂性，在这些应用程序中，调用命令（即将对象保存到数据库）需要多个层（即服务层、DataAcces 层）。

在架构的许多“风格”中，这是我的看法：[https ://github.com/mrogunlana/command-handler-pattern](https://github.com/mrogunlana/command-handler-pattern)

# database - 对行进行排名并选择一个

> ID：12403284
> 
> 赞同：0
> 
> 时间：2012-09-13T09:29:38.073
> 
> 标签：database, teradata, teradata-aster

我希望这些行在 Aspez_ID 属性上排名，并且只选择 Aspez_ID = 1 的一行。问题是 - 我想从数据集中选择一行且仅一行。你能帮我么？这是代码：

```
LEFT OUTER JOIN (
   SELECT   dwh_prozess_id
          , ONKZ
          , TN_NUM
          , Aspez_Id
          , Tarif_Cd
          , Lokation_Id
          , VWArt_Id
          , Geografische_RFN_JN
          , Herkunft_Cd
  -- , .... Felder, die noch benötigt werden
          , RANK (Aspez_Id)  AS Prio

   FROM   DB09_Prozess.TB0911_Basis_Konfiguration 
   WHERE  arbeit_cd = 'Einrichten'
       AND phase_cd = 'Durchgeführt'
   ) AS TB0911
ON t1.DWH_Prozess_Id = TB0911.DWH_Prozess_Id  
   AND t1.Herkunft_Cd = TB0911.Herkunft_Cd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:13:41.677

正如 Bob Duell 解释的那样，如果允许打领带，`ROW_NUMBER() OVER()`可能是更好的选择。`RANK() OVER()`（即多于 1 条记录可以具有给定的排名：1、1、1、4、5、6、6、8）

QUALIFY 子句适用于窗口聚合函数，就像 HAVING 对普通聚合函数一样。这将允许您返回 a`Prio`为 1 或您需要的任何值的记录。

```
SELECT   dwh_prozess_id
          , ONKZ
          , TN_NUM
          , Aspez_Id
          , Tarif_Cd
          , Lokation_Id
          , VWArt_Id
          , Geografische_RFN_JN
          , Herkunft_Cd
  -- , .... Felder, die noch benötigt werden
          --, RANK (Aspez_Id)  AS Prio
          , ROW_NUMBER() OVER(PARTITION BY {partition group} /* PARTITION BY is optional */
                              ORDER BY {ordering group}) AS Prio

   FROM   DB09_Prozess.TB0911_Basis_Konfiguration 
   WHERE  arbeit_cd = 'Einrichten'
       AND phase_cd = 'Durchgeführt'
   QUALIFY Prio = 1 
```

希望这可以帮助。

# jquery - 使用从 PHP 获取的 Json 对象生成 LI

> ID：12403285
> 
> 赞同：1
> 
> 时间：2012-09-13T09:29:39.367
> 
> 标签：jquery, json, parsing, get

我有一个小问题。我从`$.get()`jQuery 请求中获得了 json 数据

这是输出：

```
[
    {"name":"Silver","price":525,"per_month":"20","first_invoice":"20"},
    {"name":"Gold","price":500,"per_month":"50","first_invoice":"0"},
    {"name":"Avion","price":750,"per_month":"10","first_invoice":"10"}
] 
```

我尝试为每个对象生成一个带有 LI 的 UL ......

我写了这个小代码：

```
//send get request
    $.get(
        url, 
        { 'dst': dst, 'price':price },
        function(data) {

            var objects = jQuery.parseJSON(data);

            var items = [];

            jQuery.each(objects, function(){
                console.log(this);

                items.push('<li id="' + this.name + '">' + this.price + '</li>');
            }); 

            jQuery('<ul/>', {
                'class': 'my-new-list',
                html: items.join('')
            }).appendTo('#results');                
        }
    ); 
```

当我使用`console.log()`每个对象时，萤火虫都会记录：没有错误......它可以工作。

这是`items.push()`and`appendTo()`什么都不会产生...控制台中没有错误...我的`#results`div 中没有附加...

我确定我做错了什么。谁能帮我 ？

**更新**

在 Fabrício Matté（之后回答）的帮助下，问题出在 iframe 上。

```
jQuery('<ul/>', {
                'class': 'my-new-list',
                html: items.join('')
            }).appendTo(jQuery('body').find('#results')); 
```

那行得通=）

再见 Stackoverflow 社区

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:35:07.927

**编辑：**根据 João 的评论，您的原始代码运行良好。确保：

1.  `#result`当您尝试附加数据时，它在 DOM 中；
2.  `jQuery.parseJSON(data)`返回一个对象数组；
3.  jQuery 已正确包含，并且在执行该行之前没有语法错误；
4.  我稍微重写了代码以使其更易于阅读：

    ```
    var objects = jQuery.parseJSON(data);

    var items = '';

    jQuery.each(objects, function(){
        items += '<li id="' + this.name + '">' + this.price + '</li>';
    }); 

    jQuery('<ul/>', {
        'class': 'my-new-list'
    }).html(items).appendTo('#results'); 
    ```

[**小提琴**](http://jsfiddle.net/ult_combo/VmW74/1/)

* * *

## **编辑**

根据 OP 的评论，您不能使用选择器来选择 an 内部的元素`iframe`而不引用它的`document`第一个。以下是我如何使用[`contents()`](http://api.jquery.com/contents/)and [`find()`](http://api.jquery.com/find/)：

```
//replace the $('iframe') with ID/class selector if possible
jQuery('iframe').contents().find('#results').append(jQuery('<ul/>', {
    'class': 'my-new-list'
}).html(items)); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/VmW74/4/)

**请注意**`iframe`，如果文档来自不同的主机、端口或协议，这将不起作用。
[同源策略参考](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:42:44.663

```
$('<ul>')
    .addClass('my-new-list')
    .html($.map(objects, function(el) {
        return '<li id="' + el.name + '">' + el.price + '</li>';
    }).join("\n"))
    .appendTo('#results'); 
```

# web-services - 如何创建axis2登录处理程序

> ID：12403288
> 
> 赞同：1
> 
> 时间：2012-09-13T09:29:43.293
> 
> 标签：web-services, axis2, handler

我正在研究使用 Axis2 的 Web 服务，我必须创建一个处理程序来检查用户是否可以访问服务。我这样做了，但是如何向客户端返回错误消息？现在我正在使用 AxisFaultException，这是一个好习惯吗？是否可以再给用户一次机会？也许使用 InvocationResponse.Suspend .. 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:53:42.040

当您在应用程序层中构建身份验证（用户名/密码）时，您的问题的答案是肯定的，soap 异常是一种很好的做法。

当用户（客户端）尝试访问您的服务时，它可能使用库/应用程序与您的服务进行通信，并且捕获肥皂异常应该不是问题。

我不确定你想通过额外的尝试来完成什么，但它们应该出现在新的请求中，而不是在同一个请求中。

# cassandra - 没有 nodetool 的 cassandra 快照，但仅通过 java api

> ID：12403292
> 
> 赞同：3
> 
> 时间：2012-09-13T09:30:11.190
> 
> 标签：cassandra, snapshot, take

如何在没有nodetool但仅通过java api的情况下拍摄cassandra快照？我需要通过不使用 nodetool 实用程序来拍摄 cassandra 中的键空间的快照。我必须通过java api来做如果有人知道怎么做，请回答。我必须执行..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:06:30.123

您无法使用 thrift API 拍摄快照，但您可以使用 JMX 拍摄快照，这就是 nodetool 命令的工作方式。看[这里](https://github.com/apache/cassandra/blob/cassandra-1.1.0/src/java/org/apache/cassandra/tools/NodeCmd.java)的节点工具源码，特别看[handleSnapshot](https://github.com/apache/cassandra/blob/cassandra-1.1.0/src/java/org/apache/cassandra/tools/NodeCmd.java#L905)方法。

# apache-flex - 找不到语言环境“en_US”的已编译资源包“messaging”。从 4.0 迁移到 4.6

> ID：12403296
> 
> 赞同：1
> 
> 时间：2012-09-13T09:30:19.637
> 
> 标签：apache-flex, resourcebundle

将 flex SDK 从 4.0 迁移到 4.6 时。我在运行时遇到这样的错误。

```
 Error: Could not find compiled resource bundle 'messaging' for locale 'en_US'.
 at mx.resources::ResourceManagerImpl/installCompiledResourceBundle()
 at mx.resources::ResourceManagerImpl/installCompiledResourceBundles()
 at mx.core::FlexModuleFactory/installCompiledResourceBundles()
 at mx.core::FlexModuleFactory/docFrameHandler()
 at mx.core::FlexModuleFactory/docFrameListener() 
```

资源包“消息”包含在 rpc 中，并且“rpc”在打开我的应用程序时已加载到“缓存”。我在网上找到了一些解决方法，但没有一个有效。我试过了：

```
1.add [ ResourceBundle( "messaging" )]
2.decalare a usage to class that maybe use the 'mesaging', such as
 import mx.messaging.channels.HTTPChannel;
 private var httpChannel:HTTPChannel;</pre>
3.In pom
    <includeResourceBundles>
    <bundle>messaging</bundle>
    </includeResourceBundles> 
```

有人对这个问题有其他解决方案吗？谢谢

# css - 希望 html 代码将消息作为警告显示，但我不希望它显示在单独的框中，我也不希望显示任何按钮

> ID：12403301
> 
> 赞同：-3
> 
> 时间：2012-09-13T09:30:33.857
> 
> 标签：css, html

我必须添加一条消息以向用户显示他已经进行了一些更改，但我不希望它在单独的框中。我有一个摘要页面，我想在其中添加此信息，但我想确保读者看到它。所以我想要黄色背景中的消息，以及带有它的警告图像，并且没有按钮。我不希望它作为一个盒子，我只希望它作为一个没有任何按钮的普通消息，我想将它添加到我的摘要视图的末尾。请告诉我用于它的 html 和 css 代码。或者，如果有任何选项可以让我制作一个像这样显示的高级组件，我可以只渲染该组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:58:55.453

您可以使用 HTML5 验证

例如：

```
Your Name: <input type="text" name="name" required> 
```

或者

您可以使用 javascript/jquery 验证。

如果您想使用成功、警告和错误消息，您需要使用服务器端语言，例如 php、java 或 c#

对于样式，您可以查看此[链接](http://css.dzone.com/news/css-message-boxes-different-me)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:30:30.713

HTML 没有专门为用户通知设计的元素。

在 HTML5 中，您可能希望将通知放在[一个`<section>`元素](http://www.w3.org/TR/2011/WD-html5-author-20110809/the-section-element.html#the-section-element)中。在 HTML 4 中，您可能只使用`<div>`.

您可以将内容包装在`<em>`or`<strong>`标记中，因为它们传达了重点，而通知旨在吸引用户的注意力。

# mysql - 如何从联合所有联接查询中删除重复项

> ID：12403306
> 
> 赞同：3
> 
> 时间：2012-09-13T09:30:57.260
> 
> 标签：mysql, distinct, min

我有一张表格，其中包含零件编号和这些零件编号的价格。这是我的主表，大约有 100000 个条目。我还有 3 张桌子和可能的供应商。并非主表的所有零件编号都在所有 3 个供应商表中，并且 3 个供应商表也有不同的内容。

我想要的是在 3 个表中查询我的主表的部件号。如果在多于 1 个表中找到零件号，则它应该只返回最低价格的一个。如果仅在 1 个表中找到，则返回该部分的价格。

我现在正在做的是以下查询：

```
SELECT `table1.partnumber`,
    `table1`.`price`,
    `maintable`.`price`
FROM `table1`
    INNER JOIN `maintable`
        ON `table1`.`partnumber` = `maintable`.`partnumber`
UNION ALL
SELECT `table2`.`partnumber`,
    `table2`.`price`,
    `maintable`.`price`
FROM `table2`
    INNER JOIN `maintable`
        ON `table2`.`partnumber` = `maintable`.`partnumber`
UNION ALL
SELECT `table3.partnumber`,
    `table3`.`price`,
    `maintable`.`price`
FROM `table3`
    INNER JOIN `maintable`
        ON `table3`.`partnumber` = `maintable`.`partnumber` 
```

这为我提供了我需要的所有数据，然后我检查最低价格并使用 foreach php 代码删除价格较高的零件号。这在大型数据集上非常慢。

我确信有一种方法可以仅在该零件号存在于 1 个以上的表中时才获得最低价格的零件号，如果它仅存在于 1 个表中，则只需返回价格。我只是不知道如何查询 mysql 数据库。我尝试使用连接、联合、最小和不同的组合，但无济于事。

有人可以帮我吗？

下面来自eggyal的答案送我上路。我现在有以下对我有用的查询：

```
SELECT `partnumber`,MIN(`price`) as `price`
FROM (
    SELECT `table1`.`partnumber`,
        `table1`.`price`,
        `maintable`.`price`
    FROM `table1`
        INNER JOIN `maintable`
        ON `table1`.`partnumber` = `maintable`.`partnumber`
    UNION ALL
    SELECT `table2`.`partnumber`,
        `table2`.`price`,
        `maintable`.`price`
    FROM `table2`
        INNER JOIN `maintable`
        ON `table2`.`partnumber` = `maintable`.`partnumber`
    UNION ALL
    SELECT `table3.partnumber`,
        `table3`.`price`,
        `maintable`.`price`
    FROM `table3`
        INNER JOIN `maintable`
        ON `table3`.`partnumber` = `maintable`.`partnumber`
) AS `part` GROUP BY `partnumber` 
```

也许有更好的方法，在这种情况下，我全神贯注。但要知道我对上述内容感到满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:54:22.670

```
SELECT partnumber, MIN(price) FROM (
  SELECT 1 AS tn, partnumber, table1.price
  FROM   table1 JOIN maintable USING (partnumber)
UNION ALL
  SELECT 2 AS tn, partnumber, table2.price
  FROM   table2 JOIN maintable USING (partnumber)
UNION ALL
  SELECT 3 AS tn, partnumber, table3.price
  FROM   table3 JOIN maintable USING (partnumber)
) t
GROUP BY partnumber
HAVING COUNT(DISTINCT tn) >= 2 
```

# string - 查找字符串中的空格数

> ID：12403312
> 
> 赞同：9
> 
> 时间：2012-09-13T09:31:19.570
> 
> 标签：string, r

如何根据空间创建不同的列，例如：“我要出去”

```
ANs 3
Column1 Column2 Column3 Column14 
I          am     going    out 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-13T09:34:54.107

如果您想要实际的列值，如您的示例所示，那么您可以从文本连接中读取表格：

```
> read.table(textConnection("I am going Out"))
  V1 V2    V3  V4
1  I am going Out 
```

要回答你的问题的标题，即有*多少*个空格，你可以用`ncol`上面的列数，然后减一。但是，如果您*只*对空格数感兴趣，则以下方法更有效：

```
length(gregexpr(" ", "I am going Out")[[1]]) 
```

这使用正则表达式来搜索空格。

获取结果列表的第一个元素，该`[[1]]`元素对应于输入向量的第一项，其中“I am going Out”作为其唯一元素。如果你在那里传递了一个不同的向量，你的列表可能有多个元素，或者对于一个空向量根本没有。

如果没有空格，`gregexpr`仍然会返回一个长度列表`1`，以`-1`匹配的位置表示没有匹配。这会导致上述代码在这种情况下错误地报告一个结果。一个更复杂的解决方案，它处理这个问题并接受向量作为输入，如下所示：

```
countSpaces <- function(s) { sapply(gregexpr(" ", s), function(p) { sum(p>=0) } ) } 
```

该函数的工作原理如下：`gregexpr`将返回一个结果*列表*，输入*向量* `s`的每个元素一个。`sapply`将遍历该列表，并为列表中的每个元素计算匹配数。它不计算`length`匹配位置的向量，而是`sum`仅计算非负值，从而丢弃`-1`由匹配失败引起的任何值。在该总和中存在从发生`FALSE/TRUE`到发生的隐式转换。`0/1`的结果`sapply`将再次成为一个向量，因此很好地匹配输入向量。

此功能可用于重写数据框，如[一个评论](https://stackoverflow.com/questions/12403312/find-the-number-of-spaces-in-a-string/12403370#comment16784356_12403370)中所要求的。因此，假设您有一个名为的数据框，该数据框`foo`在列中有字符串，`bar`并且应该修改为在新列中包含这些计数`baz`。你可以这样写

```
foo <- transform(foo, baz = countSpaces(bar)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T09:46:00.587

另一种方法是使用`strsplit`函数：

```
R> strsplit("I am going Out", " ")[[1]]
[1] "I"     "am"    "going" "Out" 
```

因此，我们将第一个参数 -`I am going Out`第二个参数 - 空格分开。然后我们可以使用`length`：

```
R> length(strsplit("I am going Out", " ")[[1]])
[1] 4 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-12-14T19:45:35.353

您也可以`str_count`从`stringr`包装中使用。这些不那么冗长，避免正则表达式可能会更快一些。

```
library(stringr)
text = "I am going Out"
#matches regular expression
str_count(text, ' ') 
```

或者，如果你想要更快的东西

```
#matches literal text
str_count(text, fixed(' ')) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-13T14:43:53.553

我必须承认我没有真正仔细阅读所以这可能不是你所追求的，但有可能是......

```
x <- "I am going Out"
nchar(x)- nchar(gsub(" ", "", x)) 
```

MvG 原始建议的替代方案（虽然不太漂亮）：

```
as.data.frame(matrix(unlist(strsplit("I am   going Out", "\\s+", perl=TRUE)), nrow=1)) 
```

# sap-ase - 显示隔离级别

> ID：12403317
> 
> 赞同：5
> 
> 时间：2012-09-13T09:31:35.670
> 
> 标签：sap-ase, isolation-level

是否可以显示 Sybase Adaptive Server Enterprise 12.5.4 中设置的当前隔离配置？

如果是这样，那么我该如何显示它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T09:55:05.790

尝试从`@@isolation`变量中选择：

```
select @@isolation 
```

你也可以阅读[这个](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc20021_1251/html/locking/locking86.htm)。它说：

```
The current isolation level for a session 
can be determined with the global variable @@isolation. 
```

# iphone - 如果 IBM Worklight 最终使用 PhoneGap，为什么还要使用它？

> ID：12403319
> 
> 赞同：35
> 
> 时间：2012-09-13T09:31:42.893
> 
> 标签：iphone, html, cordova, ibm-mobilefirst

实际上，我必须构建一个跨平台应用程序（仅适用于 iphone 和 android），并且客户端强调为此使用 IBM Worklight。在搜索了 Worklight 之后，我知道它在内部使用了 PhoneGap（Apache Cordova）。现在我的问题是，如果 worklight 在内部使用 phonegap，那么为什么不直接使用 phonegap。我需要你的建议。请建议将工作灯与电话间隙分开的东西。提前致谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-26T16:36:35.430

IBM Worklight 是一个完整的开发平台。即使在 Worklight 中，您也可以做很多使用 PhoneGap 库无法单独完成的事情，例如访问设备更原生的常用控件（选项菜单、忙碌指示符、标签栏等）。有些事情你必须找到插件。最新版本的 IBM Worklight 使用 PhoneGap 2.2。我可能会继续一段时间，但请查看我的博客，了解比较视图中的差异。

[http://www.open-logix.com/enterprise-mobility-blog/ibm-worklight-and-phonegap-comparison/](http://www.open-logix.com/enterprise-mobility-blog/ibm-worklight-and-phonegap-comparison/)？

其他值得一提的事情：

服务器也是与适配器进行集中后端连接的重要部分，用于离线加密存储、统一推送通知和 SMS 传递等。

管理控制台与服务器一起提供 MAM 解决方案。因此，您可以强制更新/禁用应用程序、管理版本、查看一些设备统计信息和监控推送。

IDE 与 Native SDK 和 IDE 一起工作。因此，如果您正在为 Android 构建，它将构建一个 Android 项目以在同一个 IDE 中编译和导出。对于 iPhone，它为 XCODE 项目创建所有项目层。您可能需要调整 xcode 中的一些设置以确保它编译正确，但我通常没有遇到问题。

移动浏览器模拟器也非常适合在浏览器中使用 PhoneGap 功能测试来测试 Web 代码。

外壳编码是集成的，您可以为您的应用品牌创建一个通用外壳。

新的 WYSIWYG 也非常好，并提供通用的 HTML 支持以及 jQuery Mobile 组件和/或 dojo mobile。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-13T22:30:26.990

PhoneGap 很棒，这就是 IBM Worklight 使用它的原因。

PhoneGap 是 Web 开发的应用程序和设备（GPS、相机等）之间的重要桥梁，但仅此而已。

您需要一个 IDE 来开发应用程序。

您需要连接到后端。

您需要进行身份验证。

您需要考虑安全性。

您仍然需要管理应用程序的生命周期。

PhoneGap 是 IBM Worklight 应用程序的重要组成部分，但它只是一部分。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-13T09:49:39.207

IBM Worklight 和 Phonegap 之间的主要区别在于**服务器部分**。Phonegap 没有与服务器部分相关的功能，但 IBM 提供了**IBM Worklight Server 功能**。

其次，*IBM 有完整的软件包（IDE、控制台等），但 Phonegap 只提供一个库。*IBM 终于有了 Phonegap 所缺乏的**支持**。（我不知道您在哪里找到了使用 Phonegap 的 IBM worklight，但他们都使用了*web-view 组件*）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-26T19:50:36.503

它比前者更好地使用`Worklight`，`Phonegap`因为前者**直接支持**以下内容： `- SMS Delivery Options - Push Notifications - Direct Update - Version management - Business Intelligence Reporting - Force Update (or) Disable App`

此外，它还具有其他功能，例如
`1\. Authentication framework 2\. Mobile Browser Simulator 3\. Encrypted Offline Storage 4\. Jsonstore` 使其更易于使用。

# javascript - 如何在从多选下拉列表中选择选项值时动态生成文本框

> ID：12403320
> 
> 赞同：1
> 
> 时间：2012-09-13T09:31:47.927
> 
> 标签：javascript, jquery, html, multi-select

我有一个多选下拉菜单，用户可以从中选择多个项目。

在选项值选择的基础上，动态文本框应该以相同的形式生成。

在选择单个选项时，应生成 3 个文本框。
第一个文本框显示所选选项的值
第二个文本框显示所选选项的文本
第三个文本框显示为空。

```
<html>
  <head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
  </head>
  <body align="center">
    <input type="text" value="some text"/>
    <select id="multiple" multiple="multiple" style="width: 120px;height: 120px;">
      <option value="1" >Ashutosh</option>option value="6">Jems Bond</option>
      <option value="7">Danial Crack</option> option value="8">Dan Brown</option>
      <option value="9">Angilina Jolly</option>
    </select>
    <script>
      function displayVals() { 
        var multipleValues = $("#multiple").val() || [];
        $("input").val(multipleValues);
      }
      $("select").change(displayVals);displayVals();
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:52:43.197

在这里，我为您的查询提供了完整的解决方案。请查看演示链接，如下所示：

**演示** [http://codebins.com/bin/4ldqp7a](http://codebins.com/bin/4ldqp7a)

**HTML**

```
<form id="frm">
  <select id="multiple" multiple="multiple" style="width: 120px;height: 120px;">
    <option value="1" >
      Ashutosh
    </option>
    <option value="6">
      Jems Bond
    </option>
    <option value="7">
      Danial Crack
    </option>
    <option value="8">
      Dan Brown
    </option>
    <option value="9">
      Angilina Jolly
    </option>
  </select>
  <div id="result">
  </div>
</form> 
```

**查询**

```
$(function() {
    $("#multiple").change(function() {
        var multipleValues = $("#multiple").val() || "";
        var result = "";
        if (multipleValues != "") {
            var aVal = multipleValues.toString().split(",");
            $.each(aVal, function(i, value) {
                result += "<div>";
                result += "<input type='text' name='opval" + (parseInt(i) + 1) + "' value='" + value.trim() + "'>";
                result += "<input type='text' name='optext" + (parseInt(i) + 1) + "' value='" + $("#multiple").find("option[value=" + value + "]").text().trim() + "'>";
                result += "<input type='text' name='option" + (parseInt(i) + 1) + "' value=''>";
                result += "</div>";
            });

        }
        //Set Result
        $("#result").html(result);

    });
}); 
```

**CSS**

```
#multiple{
  margin-bottom:10px;
  border:1px solid #333;
  background:#efefef;
  color:#000;
}
#result input{
  margin-left:5px;
  border:1px solid #333;
  background:#a4c4f4;
  margin-top:5px;
} 
```

**演示** [http://codebins.com/bin/4ldqp7a](http://codebins.com/bin/4ldqp7a)

# amazon-s3 - 无效清单。将图像注册到 EC2 时出现 HTTP 403（禁止）

> ID：12403325
> 
> 赞同：2
> 
> 时间：2012-09-13T09:32:12.507
> 
> 标签：amazon-s3, amazon-ec2, http-status-code-403

当我尝试将 AMI 注册到 ec2 时，我遇到了一些问题。这就是我所做的：我已经将一个已经存在的 AMI 下载到我的 s3 存储桶中，这个 ami 可以毫无问题地注册。（当我尝试使用这个现有的 ami 的网络应用程序时）

我将它重新上传到一个新的存储桶上，当尝试从新创建的存储桶注册 AMI 时，它失败并出现以下错误：

状态代码：400，AWS 服务：AmazonEC2，AWS 请求 ID：X，AWS 错误代码：InvalidManifest，AWS 错误消息：URL [http://s3.amazonaws.com:80/testclementusnew/0/的 HTTP 403（禁止）响应node_ec2_infra.manifest.xml](http://s3.amazonaws.com:80/testclementusnew/0/node_ec2_infra.manifest.xml)：检查您的 S3 ACL 是否正确。

我使用同一个帐户上传和注册，并且在文件的权限部分，我的帐户拥有所有权限。

我正在使用最新版本的 java SDK，我为 s3 和 ec2 指定了以下端点： ec2endPoint=ec2.us-east-1.amazonaws.com s3endPoint=s3.amazonaws.com

我也试过欧洲端点和同样的错误......

存储桶也位于良好的 s3 端点上。

每个人都知道如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T14:32:24.923

非常hacky的解决方法，但这对我有用：

首先，您需要`wget http://curl.haxx.se/ca/cacert.pem`获取更新的 CA 证书列表。

然后，编辑 ec2-ami-tools curl 库。我的在：

```
/usr/lib/ec2-ami-tools/lib/ec2/common/curl.rb 
```

我将第 68 行从

```
invocation << ' -w "Response-Code: %{http_code}\nContent-Type: %{content_type}"' 
```

至

```
invocation << ' -w "Response-Code: %{http_code}\nContent-Type: %{content_type}" --cacert /path/to/cacert.pem' 
```

# android - Android logcat 错误

> ID：12403330
> 
> 赞同：1
> 
> 时间：2012-09-13T09:32:22.767
> 
> 标签：android, android-emulator, eclipse-plugin

我是 Android 新手，但对 Java 并不陌生，而且我对 Eclipse 很有经验。但是，我刚刚从 developer.Android.com 安装了最新的 Android SDK，并安装了带有最新 ADT 的 Eclipse 4.2 Java EE 版本。

我浏览了有关安装的教程，并在模拟器中运行了 Hello World 示例。

该应用程序似乎运行良好。

控制台输出看起来不错，但是 LogCat 对 RED 很着迷。

以下是它在运行会话期间输出的一些错误的示例：

> 无法打开 libwvm.so
> 无法提取专辑封面
> 错误打开跟踪文件：没有这样的文件或目录 (2)
> 找不到电池电压路径
> 错误加载 /system/meida/audio/ui/Lock.ogg
> runIptablesCmd(): 失败 /system/ bin [...]
> at java.util.concurrent.threadpoolExecutor.runWorker [...]
> Illegal state exception
> Class not found for preloading: android.animation.ValueAnimator

**注意：**我不希望任何人调试它，因为它是一团糟，而且没有什么可调试的，因为我没有编写任何代码！我只想知道在使用模拟器时这种行为对于 logcat 是否正常。

我从未在简单的 Hello World 中看到过如此多的错误和警告，尤其是当它看起来运行良好时。

如果您想知道，我按照[“安装 SDK”](http://developer.android.com/sdk/installing/index.html)的教程进行了操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:31:39.743

It's pretty common to see many errors in android emulator logcat, unfortunately. I wouldn't worry about this unless you are having problems with your app.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:46:02.730

由于 logcat 会记录您设备上发生的所有事件，包括触摸事件或访问后台同步手机所需的 google api。所以它会以红色显示一些错误。这很正常，如果您的应用程序有任何问题，它会用行号指出容易出错的行。

# c# - 网络摄像头流式传输客户端到客户端。聊天

> ID：12403331
> 
> 赞同：0
> 
> 时间：2012-09-13T09:32:24.777
> 
> 标签：c#, asp.net, webcam

我正在编写一个在浏览器中工作的网络应用程序。后端服务器是 Windows，我使用 ASP。

我正在尝试建立一个聊天，它将网络摄像头相互传输。但我不确定要使用什么。

它类似于[http://www.chatroulette.com](http://www.chatroulette.com)。

我听说过有关闪存媒体服务器的一些信息，但我正在寻找最简单的方法来做到这一点。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:33:03.530

也许 Html5 的[getUserMedia()](http://dev.w3.org/2011/webrtc/editor/getusermedia.html)函数会在没有闪光灯或银光的情况下做你想做的事。这是新的 Html5 功能的一部分，用于捕获和流式传输视频/音频到网站。我认为也可以将其上传到您的服务器，并确保您将其发送给与您聊天的其他用户。

这是您的服务器不需要执行 html5 功能的一些逻辑。我希望这对你的追求有所帮助。在这里你可以找到一些关于 getUserMedia 的不错的[教程](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

# c# - 打开和关闭跟踪，并在运行时指定文件路径

> ID：12403332
> 
> 赞同：2
> 
> 时间：2012-09-13T09:32:27.147
> 
> 标签：c#, .net, trace, system.diagnostics

我很好奇以下几点：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.diagnostics>
    <trace autoflush="false" indentsize="4">
      <listeners>
        <add name="logger" type="System.Diagnostics.TextWriterTraceListener"
             initializeData="LoggingFile.txt" />
        <remove name="Default" />
      </listeners>
    </trace>
  </system.diagnostics>
</configuration> 
```

我想在我的解决方案中包含该选项以记录错误消息和堆栈跟踪。但我需要能够打开和关闭它。这可以通过注释掉所有内容来实现`System.Diagnostics`吗？或者，还有更好的方法？

是否可以指定记录器在运行时写入的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T18:31:48.253

您可以使用**SourceSwitch**来**跟踪不同级别的消息**。首先添加一些设置`app.config`

```
<system.diagnostics>
  <sources>
    <source name="TraceTest" switchName="SourceSwitch"
            switchType="System.Diagnostics.SourceSwitch">
      <listeners>
            <!-- choose one or use multiple TraceListeners -->
            <add name="console" type="System.Diagnostics.ConsoleTraceListener"
                 initializeData="false"/>
            <add name="file" type="System.Diagnostics.TextWriterTraceListener"
                 initializeData="error.log"/>
            <remove name ="Default"/>
      </listeners>
    </source>
   </sources>
   <switches>
    <!--  MSDN: 4 verbose Information, Information 3, Warning 2, Error 1, -->
    <add name="SourceSwitch" value="Error"/>
  </switches>
  <trace autoflush="true" indentsize="4"/>
</system.diagnostics> 
```

在您的应用程序中，您可以使用引用 app.config 中定义的名称的[**TraceSource对象来跟踪消息**](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracesource.aspx)

```
TraceSource ts = new TraceSource("TraceTest");
ts.TraceEvent(TraceEventType.Information, 123, "event info");
ts.TraceEvent(TraceEventType.Error, 123, "event error");
ts.TraceEvent(TraceEventType.Warning, 123, "event warning");

ts.TraceInformation("any text");
ts.Flush();
ts.Close(); 
```

有关一些常见信息，请查看MSDN上的[**How to: Use TraceSource ...。**](http://msdn.microsoft.com/en-us/library/ms228993.aspx)使用 Google 博士，我[**在 SO 上发现了一个相关问题，**](https://stackoverflow.com/questions/27610/how-to-add-simple-tracing-in-c)指的是一篇关于这个问题的[**非常好的博文。**](http://olondono.blogspot.co.at/2008/01/about-trace-listeners.html)

我想指出一件事...

**更改侦听器写入跟踪消息的级别**

> 配置文件在应用程序初始化时初始化跟踪源的设置。**要更改这些设置，您必须更改配置文件并重新启动应用程序或使用 TraceRefresh 方法以编程方式刷新应用程序**。应用程序可以动态更改配置文件设置的属性以覆盖用户指定的任何设置。例如，您可能希望确保始终将关键消息发送到文本文件，而不管当前的配置设置如何。

# c# - SDN Entity Framework 控制台演示无法编译

> ID：12403333
> 
> 赞同：2
> 
> 时间：2012-09-13T09:32:35.017
> 
> 标签：c#, entity-framework, compiler-errors, entity-framework-5, msdn

我是 MVC 3 的新手，正在努力让 Entity Framework 5 工作。（我尝试炸弹的所有演示 - 所以，我最终甚至尝试了从 VS2010 中链接到的控制台演示，网址为[http://msdn.microsoft.com/en-us/data/jj206878](http://msdn.microsoft.com/en-us/data/jj206878)

我已经引用了“EntityFramework 5.0.0”。

我在演示中使用了 SQL Express（但必须手动设置表，因为脚本无法在“查询”打开设计器的 VS2010 中运行）。

但是，当我仔细按照此 MSDN Console EF Demo 中的所有步骤操作时，我收到以下 9 个错误：

```
Error   1   'DatabaseFirstSample.BloggingContext' does not contain a definition for 'SaveChanges' and no extension method 'SaveChanges' accepting a first argument of type 'DatabaseFirstSample.BloggingContext' could be found (are you missing a using directive or an assembly reference?)   C:\vb08sbs\DatabaseFirstSample\DatabaseFirstSample\Program.cs   15  12  DatabaseFirstSample
Error   2   'DatabaseFirstSample.BloggingContext': type used in a using statement must be implicitly convertible to 'System.IDisposable'    C:\vb08sbs\DatabaseFirstSample\DatabaseFirstSample\Program.cs   9   14  DatabaseFirstSample
Error   5   'object' does not contain a constructor that takes 1 arguments  C:\vb08sbs\DatabaseFirstSample\DatabaseFirstSample\BloggingModel.Context.cs 19  15  DatabaseFirstSample
Error   4   The type or namespace name 'DbContext' could not be found (are you missing a using directive or an assembly reference?) C:\vb08sbs\DatabaseFirstSample\DatabaseFirstSample\BloggingModel.Context.cs 16  44  DatabaseFirstSample
Error   6   The type or namespace name 'DbModelBuilder' could not be found (are you missing a using directive or an assembly reference?)    C:\vb08sbs\DatabaseFirstSample\DatabaseFirstSample\BloggingModel.Context.cs 23  49  DatabaseFirstSample
Error   8   The type or namespace name 'DbSet' could not be found (are you missing a using directive or an assembly reference?) C:\vb08sbs\DatabaseFirstSample\DatabaseFirstSample\BloggingModel.Context.cs 28  16  DatabaseFirstSample
Error   9   The type or namespace name 'DbSet' could not be found (are you missing a using directive or an assembly reference?) C:\vb08sbs\DatabaseFirstSample\DatabaseFirstSample\BloggingModel.Context.cs 29  16  DatabaseFirstSample
Error   3   The type or namespace name 'Infrastructure' does not exist in the namespace 'System.Data.Entity' (are you missing an assembly reference?)   C:\vb08sbs\DatabaseFirstSample\DatabaseFirstSample\BloggingModel.Context.cs 14  30  DatabaseFirstSample
Error   7   The type or namespace name 'UnintentionalCodeFirstException' could not be found (are you missing a using directive or an assembly reference?)   C:\vb08sbs\DatabaseFirstSample\DatabaseFirstSample\BloggingModel.Context.cs 25  23  DatabaseFirstSample 
```

我显然遗漏了一些东西 - 但那可能是什么我非常感谢一些帮助。

或者，我知道 EF 会导致严重的膨胀并且因此速度很慢，并且已被建议宁愿避免使用 EF 而只使用数据类 - 但我找不到任何解释如何将这种方法作为更有效的方法使用 EF 的替代方案（因为 EF 方法似乎在 MS 站点上到处都是）。

我继承了一个使用 SQL Server 2005 数据库的旧版 ASP 应用程序，该数据库最近受到 SQL 注入的影响，我想使用带有 HTML 5 的 MVC 3 和带有响应式设计的 CSS3 进行改造 - 但我一直在寻找任何工作方法使用 MVC 中实际工作的现有数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:22:49.207

我得到了它的工作`VS2010`，但也有实体框架问题的大戏。

在得出搜索结果时，Nuget 中存在不一致之处`DbContext`。此外，`SP1`为 VS2010 安装也有帮助。

我的默认语言最初设置为 VB.NET，必须将其更改为 C# 才能使演示工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:48:54.480

我无法回答自己的问题，但在编辑我的问题以修复我从侧边栏复制并更改为我的 URL 的误导性链接说明后，我找到了一个可能的原因 - （显示不正确）和同时将标签更改为比 C# 更合适 - （我最终绝望地从大量完全不合适的标签中选择了它，只是为了在我们缓慢的 Internet 连接超时之前发布帖子）。

我曾尝试使用***Entity Framework***作为标签，但我的帖子无法上传，因为我被告知我没有足够的积分来创建新标签，而 C# 是我可以看到选择的唯一半可用标签。

但是，在我编辑后尝试将 Entity-Framework 作为新标签后，我遇到了几个 Entity-Framework 版本，并且 entity-framework-5 有一个关于使用 Framework 4.5 的说明（我仍在使用 Framework 4）。

在通过 NuGet 获取实体框架时，我注意到没有提到需要框架 4.5 - 它只是给了我实体框架 5，我认为至少我会拥有最新版本！（我又看了一遍，它列出了“NO DEPENDENCIES”！！！）

现在看来我需要卸载 Entity Framework 5 并获取适用于 Framework 4 的旧 Entity Framework，然后它可能有机会工作！

PS - 我无法卸载 Entity Framework 5，但确实设法追踪到最新的先前稳定版本是 4.3.1，虽然我无法通过 NuGet 获得它，但我确实设法通过命令行安装它 -你瞧——上面列出的所有 9 个错误都消失了，突然控制台实体框架演示工作了——终于！

# permissions - CMake：如何在安装过程中创建具有特定访问权限的目录？

> ID：12403334
> 
> 赞同：6
> 
> 时间：2012-09-13T09:32:37.820
> 
> 标签：permissions, installation, cmake, access-rights

我有一个安装在 /opt 中的应用程序（这是在这里完成的方式）。除了必须由任何人写入的*日志*目录之外，拥有属于 root 的所有文件和文件夹都很好。

要创建我做的日志目录

```
INSTALL(CODE "FILE(MAKE_DIRECTORY \${ENV}\${CMAKE_INSTALL_PREFIX}/logs)") 
```

我怎样才能 chmod 目录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T17:50:25.650

不要使用命令的`CODE`变体，而是`INSTALL`考虑使用`DIRECTORY`变体。这一个允许您指定文件系统权限，即：

```
install (DIRECTORY "Logs" DESTINATION "." DIRECTORY_PERMISSIONS 
    OWNER_WRITE OWNER_READ OWNER_EXECUTE
    GROUP_WRITE GROUP_READ GROUP_EXECUTE
    WORLD_WRITE WORLD_READ WORLD_EXECUTE) 
```

要使`install`命令成功，`Logs`源文件夹中必须存在一个空目录。

# windows-installer - 支持并排安装

> ID：12403336
> 
> 赞同：1
> 
> 时间：2012-09-13T09:32:40.507
> 
> 标签：windows-installer, installshield, side-by-side, installshield-2011

最近我们遇到了一个支持并行安装的问题。

我们有一个客户安装了版本 1.0.0.0
现在我们开始发布版本 2.0.0.0。

该客户希望在同一服务器上（并排）安装 2.0.0.0 版本和 1.0.0.0 版本，就像 microsoft 和其他公司使用他们的产品一样。

然而我们的安装并不简单。**它包括服务、dll/COM 注册、写入注册表、创建虚拟目录和应用程序池、GUID 等**。

问题是我什至不知道从哪里开始以及如何最有效地做到这一点。

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:06:02.863

从安装程序的角度来看，您只需要打破这种关系。这意味着更改`ProductCode`and`UpgradeCode`或更改`ProductCode`并删除将导致删除早期版本的主要升级项目。您还应该根据组件规则更新组件 ID。

但是，如果您的注册导致产品的并行功能出现问题，则安装无法解决此问题。您可以尝试将这些想法组合起来以使事情变得更加可行，其中一些仅在第一个分发之前运行良好。但是，我不确定如何最好地处理共享虚拟目录和/或应用程序池。

*   将公共部分分解为共享文件，并注意向后兼容性
*   更改所有 COM GUID、服务标识符和其他此类系统范围的项目，以便版本交叉引用
*   尽可能使用无注册 COM 等操作系统功能来避免系统范围的注册
*   如果应用程序的需求和您的客户允许，使用 App-V 等应用程序虚拟化技术将您的应用程序相互隐藏

最后，这可能会在您的应用程序中进行大量工作，因此您必须决定是否值得支持此方案。

# ruby-on-rails - 如何从 git status 列表中隐藏已删除的文件？

> ID：12403338
> 
> 赞同：0
> 
> 时间：2012-09-13T09:32:59.097
> 
> 标签：ruby-on-rails, git, vim

我正在寻找以下问题的最佳答案：

当我创建新分支时，我必须始终删除文件夹`public/assets/`（Ruby on Rails，我们仅在部署到生产之前预编译资产）所以这给了我 git status 大约 500 行，如下所示：

```
...
#   deleted:    public/assets/tinymce/tiny_mce_src.js
#   deleted:    public/assets/tinymce/utils/editable_selects.js
#   deleted:    public/assets/tinymce/utils/form_utils.js
#   deleted:    public/assets/tinymce/utils/mctabs.js
#   deleted:    public/assets/tinymce/utils/validate.js
... 
```

所以我的 vim-fugitive 开始对这个烂摊子毫无用处。我想从 git status 隐藏这些行，但实际上应该删除这些文件。

我不想提交，因为我不想将此已删除的文件推送到远程仓库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:38:34.307

实际上，您一开始就不应该在**Git**中拥有这些资产。

如果您使用像 Capistrano 这样的部署解决方案，您可以在远程机器上部署期间预编译资产，从而省去将它们放在 Git 存储库中的麻烦。

要在 capistrano 部署期间启用资产编译，您只需将以下内容添加到您的 capfile (deploy.rb)：

```
load 'deploy/assets' 
```

现在，每当您部署到服务器时，capistrano 都会在部署期间在服务器上进行编译。

然后，您可以简单地`public/assets`从 git 中删除目录并将它们添加到`.gitignore`

很抱歉没有直接回答您的问题，但您要求的是针对症状的补救措施，无法解决原因。当然，除非您有充分的理由在 Git 中拥有资产，如果有，请说明原因，我们可能会找到更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:49:02.543

首先，你必须这样做有点可疑，但无论如何。

您可以通过命令删除所有匹配（之间的东西`@...@`）行`:global`，如下所示：

```
:global@^#\s\+deleted:\s\+public/assets/@delete _ 
```

`~/.vimrc`要自动执行此操作，请为 Git 提交文件类型创建一个 autocmd（在您的）中：

```
:autocmd FileType gitcommit :global... 
```

或将原始命令放入脚本`~/.vim/ftplugin/gitcommit_cleanup.vim`

# .net - 在.Net中生成高压缩比图像

> ID：12403341
> 
> 赞同：1
> 
> 时间：2012-09-13T09:33:07.743
> 
> 标签：.net, graphics

这是我的代码：

```
using (Graphics graph = Graphics.FromImage(destImg))
{
     graph.InterpolationMode = InterpolationMode.HighQualityBicubic;
     graph.SmoothingMode = SmoothingMode.HighQuality;

     Rectangle srcRect = new Rectangle(0, 0, srcWidth, srcHeight);
     Rectangle destRect = new Rectangle(0, 0, destWidth, destHeight);

     graph.DrawImage(srcImg, destRect, srcRect, GraphicsUnit.Pixel);

     srcImg.Dispose();
} 
```

它可以从 550k 图像（1024*768 像素）生成 210k 图像（360*270 像素）。

但是，我可以在 Photoshop 中生成 20k 的图像。当然，它看到了某种模糊。但是你知道我住在中国，我的很多客户现在都被 0.5M 的带宽折磨着。他们不会喜欢 210k 的图像，它太大了！

那么，如何在 .Net 中生成高压缩比的图像呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:17:45.080

我想我会改用JPEG并降低质量。这会产生非常小的文件大小。

这是如何在 C# 中执行此操作的示例

[http://www.geekpedia.com/tutorial232_Reducing-JPEG-Picture-Quality-using-Csharp.html](http://www.geekpedia.com/tutorial232_Reducing-JPEG-Picture-Quality-using-Csharp.html)

# c# - 找出从 CRM Dynamics 返回的实体中所有属性的名称

> ID：12403344
> 
> 赞同：8
> 
> 时间：2012-09-13T09:33:16.117
> 
> 标签：c#, dynamics-crm

我让自己进入服务器，并且（希望）检索到正确的数据集。然后，我尝试通过以下代码列出所有公司。

```
EntityCollection result = proxy.RetrieveMultiple(expression);
foreach (var entity in result.Entities)
{
  String output = String.Empty;
  if (entity.Attributes.Contains("account"))
    output = entity.Attributes["account"].ToString();
} 
```

但是，最好运行一个遍历所有可用属性的内部循环`result.Entities`。我应该使用`entity.Attributes.Keys`还是有更好的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T10:11:24.757

我认为这应该可以解决问题。

```
foreach (Entity entity in result.Entities)
{
    foreach (KeyValuePair<String, Object> attribute in entity.Attributes)
    {
        Console.WriteLine(attribute.Key + ": " + attribute.Value);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-04T10:48:45.333

这使用 Lambda 表达式执行任务。

```
EntityCollection result = proxy.RetrieveMultiple(expression);
foreach (var entity in result.Entities)
{
    var vsHeaders = entity.Attributes.Select(kvp => string.Format("{0}", kvp.Key));
    string sHeaders = string.Join(",", vsHeaders);
} 
```

# javascript - 检测页面元素中选择（突出显示）或单击的内容？

> ID：12403345
> 
> 赞同：2
> 
> 时间：2012-09-13T09:33:18.080
> 
> 标签：javascript, jquery, html, text, selection

如何检测浏览器页面上选择的内容？示例：单击，按住，选择页面上的 3 个单词和 1 个图像，释放。

子问题：如何检测某人点击了哪个字母？

不使用：一个跨度注入器打破一切或一个所见即所得插件

我希望这不仅仅是一种您无法检测到的浏览器交互。

可能有很多用途，但我的目标是一个简单的“实时”页面编辑器，或者至少是一种除了元素的 id 之外知道某人正在点击/选择什么的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:07:46.910

[`window.getSelection()`](https://developer.mozilla.org/en-US/docs/DOM/window.getSelection)是您在所有主流浏览器中都需要的，除了 IE < 9，它具有不同的 API。`window.getSelection()`返回一个[`Selection`](https://developer.mozilla.org/en/DOM/selection)( [spec](http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#selections) ) 对象，您可以从中提取代表选择的[DOM Range](https://developer.mozilla.org/en-US/docs/DOM/range) ( [spec )。](http://www.w3.org/TR/dom/#interface-range)

对于 IE < 9，您可以查看[`document.selection`](http://msdn.microsoft.com/en-us/library/ie/ms535869%28v=vs.85%29.aspx)或使用我自己的[Rangy 之](http://code.google.com/p/rangy)类的库，它在所有主要浏览器中都提供了相同的基于标准的 API。

# php - Jquery UI自动完成不起作用

> ID：12403354
> 
> 赞同：0
> 
> 时间：2012-09-13T09:33:41.907
> 
> 标签：php, javascript, jquery, jquery-ui, codeigniter

我正在使用 Jquery 小部件 Autocomplete。我的数据源是一个返回 JSON 数据的服务器端脚本。

```
$(function() {      
    $( "#supcode" ).autocomplete({
        source:"index.php/inventory/supcode",
        minLength: 1                    
    });
}); 
```

我使用 MVC 架构（Codeigniter）并在控制器中使用以下方法返回 JSON 数据，

```
function supcode()
{     
    $dataarray="";
    $data=$this->Inventorymodel->supcode();
    echo json_encode($data);
} 
```

我正在使用以下函数获取模型中的数据，

```
function supcode(){
$finresult="";
$this->db->select('name');
$query = $this->db->get('supplier');
$result=$query->result_array();

foreach($result as $row){
    $finresult[]=array(
        'name' => $row['name']
    );
}
return $finresult;
} 
```

当我在文本框中输入一个字母时，过滤不起作用并且列出了所有项目。我在这里做错了什么？谁能帮我？提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:58:58.760

您需要在服务器端完成过滤（如@Henrik 对问题的评论中所述），并且**预期数据格式**需要是一个对象数组，其中包含字段`label`和`value`字段。

```
[ { label: "Choice1", value: "value1" }, ... ] 
```

请参阅此链接[jQuery 自动完成](http://docs.jquery.com/UI/Autocomplete)。

# php - 如果 ID 不在 URL 中，则 Joomla/PHP 注销

> ID：12403355
> 
> 赞同：0
> 
> 时间：2012-09-13T09:33:42.607
> 
> 标签：php, url, logging, joomla, userid

所以我调查了这个问题，但在 Joomla 论坛中似乎没有解决方案。

[自动注销](http://forum.joomla.org/viewtopic.php?f=615&t=733240)

[一直退出](http://forum.joomla.org/viewtopic.php?t=731442)

我遇到的问题已缩小到 URL。如果在 URL 中设置了 var `&ID=`，则可以，如果没有，则注销。在这两种情况下，我都在进行`$_SESSION`转储，它确认 $user->id 设置为 0。不知道它为什么要注销。

欢迎任何解决方案，这是一个已经避免了一段时间的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:11:09.340

仅仅利用 joomla 的能力来设置具有访问级别的菜单项不是更好吗？只需将级别设置为“已注册”即可。否则，如果您正在寻找自定义编程解决方案，请进入控制器检查用户是否已登录，然后添加一行以验证 ID 是否在 URL 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:42:55.290

一件事是，您可能看起来正在注销，但实际上并未被注销。因此，如果您输入的网址应该只对登录用户可见，您仍然可以看到它。在您的会话转储中，还设置您被分配到的用户组。他们包括客人吗？如果是这样，这可能是问题的根源；这是该平台最近修复的主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T18:31:50.143

解决方案。我只能肯定地说这是可能的解决方案，但它应该对查看这篇文章的人有所帮助。

Joomla 1.5.x 中的旧版模板 (1.0) 与 JUtility 方法 getToken() 之间存在兼容性问题。

这显然用于登录表单。所以在文件中找到它并替换：

```
 <input type="hidden" name="<?php echo JUtility::getToken(); ?>" value="1" /> 
```

和：

```
 <input type="hidden" name="<?php echo JHTML::_( 'form.token' ); ?>" value="1" /> 
```

这不是我看到的问题，我的问题*与*登录有关，而是与注册组件有关，该组件大量使用了 JUtility::getToken() Class::method。我知道这是因为卸载组件可以解决问题。但是，由于我没有在组件中测试过任何解决方案，所以我不会绝对说这是解决方案。

希望帖子有所帮助。
感谢那些回答的人。

# android - 清除 Activity Stack 并在 android 中启动新的 Activity

> ID：12403364
> 
> 赞同：14
> 
> 时间：2012-09-13T09:34:24.307
> 
> 标签：android, android-activity

我的问题与这类问题有点不同。我需要删除或清除我的活动堆栈，然后开始一个新活动。我认为这不是 clear_top 标志问题。我用一个例子来解释：

我的活动流程：

```
Login > Home > Screen1 > screen2 .... 
```

我完成登录活动或使用 no_history 标志调用。所以我的活动看起来像这样

```
Login(finished)> Home [bottom of the stack now] > Screen1 > Screen2[top of the stack] 
```

我需要处理会话错误。如果在任何时候发生任何会话错误，我需要返回登录活动。但请记住，我在堆栈中没有登录活动。所以 clear_top 不起作用。

如果 Screen2 中发生任何会话错误，那么我需要清除完整堆栈（screen2、screen1、home），然后开始登录活动。这样在登录活动中按下后退按钮后将关闭我的应用程序。

有没有办法清除活动堆栈？

提前致谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-13T09:42:47.393

**用这个**

```
Intent i = new Intent(yourScreen.this,Home.class);
        i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        i.putExtra("EXIT", true);
        startActivity(i); 
```

并在 Home 类的 onCreate 中，执行此操作以检查，

```
if (getIntent().getBooleanExtra("EXIT", false)) 
    {
        Intent i = new Intent(Home.this,Login.class);
        startActivity(i);
        finish();
    } 
```

这基本上会做的是，无论您从事什么活动，您都可以使用清晰的顶部标志调用主屏幕。在主屏幕上，onCreate 方法中有一个检查条件，这将有助于清除堆栈并带您进入登录屏幕。现在在登录屏幕上，如果您按下返回按钮，您将在堆栈被清除时退出应用程序..

让我知道问题是否仍然存在...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-04T13:18:35.360

这是一个老问题，但也许其他人在寻找类似问题的答案时会偶然发现它。

您应该使用标志启动登录活动：`Intent.FLAG_ACTIVITY_CLEAR_TASK|Intent.FLAG_ACTIVITY_NEW_TASK`- 标志`NEW_TASK`的名称可能有点混乱，但如果它不存在，它实际上会创建新任务（否则将使用当前任务） - 并将`CLEAR_TASK`从所有以前的活动中清除它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T09:49:09.137

尝试这个，

完成您当前的活动

```
 YourCurrentActivity.this.finish();  
     Intent intent1 = new Intent(YourCurrentActivity.this,LoginActivity.class);  
     intent1.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);   
     startActivity(intent1); 
```

即使您的活动不在堆栈中，它也会起作用。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T09:43:08.370

在这个场景中使用 onActivityResult() 来管理活动。

# magento - Magento 已订购商品删除

> ID：12403368
> 
> 赞同：1
> 
> 时间：2012-09-13T09:34:46.183
> 
> 标签：magento, orders

我必须更新一个订单，如果它有多个，则从订单中删除一些项目。然后必须更新订单。

现在我找到了所有订单商品所在的表：sales_flat_order_item。

$items = $order->getAllItems();

```
 foreach($items as $item){

        if($item->getParentItemId() == '' || $item->getParentItemId() == null){

            $product_id = $item->getProductId();
            if($product_id == $booking_product_id){             

                         // this item have to be deleted

            }

        }

    } 
```

$订单->保存（）；

有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:33:56.767

这样我就成功了。

```
 $base_grand_total = $order->getBaseGrandTotal();
    $base_subtotal = $order->getBaseSubtotal();
    $grand_total = $order->getGrandTotal();
    $subtotal = $order->getSubtotal();

    $base_subtotal_incl_tax = $order->getBaseSubtotalInclTax();
    $subtotal_incl_tax = $order->getSubtotalInclTax();
    $total_item_count = $order->getTotalItemCount();

    $items = $order->getAllItems(); 
    foreach($items as $item){       

        if($item->getParentItemId() == '' || $item->getParentItemId() == null){

            $product_id = $item->getProductId();
            if($product_id == $booking_product_id){             

            //remove item price from total price of order
            $item_price = $item->getPrice();
            $item->delete();

            $order->setBaseGrandTotal($base_grand_total-$item_price);
            $order->setBaseSubtotal($base_subtotal-$item_price);
                $order->setGrandTotal($grand_total-$item_price);
            $order->setSubtotal($subtotal-$item_price);

            $order->setBaseSubtotalInclTax($base_subtotal_incl_tax-$item_price);
            $order->setSubtotalInclTax($subtotal_incl_tax-$item_price);
            $order->setTotalItemCount($total_item_count-1);
            $order->save(); 
            }

        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T07:41:36.223

从现有订单中删除项目。

从 magento 根目录运行以下代码行作为外部代码：

1.  将其保存为“order_item_remove.php”
2.  [以http://example.com/order_item_remove.php](http://example.com/order_item_remove.php)运行它

代码块如下：

```
<?php

require_once('app/Mage.php'); //Path to Magento
umask(0);
Mage::app();

try{
$_order = Mage::getModel('sales/order')->loadByIncrementId('100000011'); // Order Increment Id
$items = $_order->getAllItems(); 

foreach ($items as $item){
    Mage::log('All items ' . print_r($item->getData(), true), null, 'items_data.log');
    $base_grand_total = $_order->getBaseGrandTotal();

    $base_subtotal = $_order->getBaseSubtotal();
    $base_tva = $_order->getBaseTaxAmount();

    $grand_total = $_order->getGrandTotal();

    $subtotal = $_order->getSubtotal();
    $tva = $_order->getTaxAmount();

    $base_subtotal_incl_tax = $_order->getBaseSubtotalInclTax();

    $subtotal_incl_tax = $_order->getSubtotalInclTax();

    $total_item_count = $_order->getTotalItemCount();
Mage::log('Items ' . $item->getSku(), null, 'items_data.log');

    if($item->getSku()=='SAMPLEKIT'){
        $item_price = $item->getPrice();
        $item_tva = $item->getTaxAmount();
        Mage::log('Item deleted ' . $item->getSku(), null, 'items_data.log');
        $item->delete();
        $_order->setBaseGrandTotal($base_grand_total-$item_price-$item_tva);

        $_order->setBaseSubtotal($base_subtotal-$item_price);

        $_order->setBaseTaxAmount($base_tva-$item_tva);

        $_order->setGrandTotal($grand_total-$item_price-$item_tva);

        $_order->setSubtotal($subtotal-$item_price);

        $_order->setTaxAmount($tva-$item_tva);

        $_order->setBaseSubtotalInclTax($base_subtotal_incl_tax-$item_price);

        $_order->setSubtotalInclTax($subtotal_incl_tax-$item_price);

        $_order->setTotalItemCount(count($items)-1);

        $_order->save(); 
    }

}
echo "success"; 
} catch(Exception $e) {
    echo "failed";
} 
```

# azure - Windows Azure 网站请求超时

> ID：12403374
> 
> 赞同：1
> 
> 时间：2012-09-13T09:35:11.640
> 
> 标签：azure, connection-timeout

我们在 Azure 中的第一个 Web 应用程序遇到了一些问题。

从前端的角度来看，它真的很简单。

它有 2 个页面，其中包含用户填写并单击提交按钮的表单。这会将数据保存到 Azure 表存储中。

我们看到的问题是单击提交按钮有时会导致“连接超时”错误。提交的数据量不是很大，所以我不认为数量是问题，当然也不应该花很长时间来保存。

对此的初步研究提出了[这个](http://social.msdn.microsoft.com/Forums/en/windowsazuretroubleshooting/thread/a9ff85e8-d039-4091-a0bf-96eeb132b1a0)和[这个](http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/12/windows-azure-load-balancer-timeout-details.aspx)。他们都谈论了一个 1 分钟的问题，听起来就像我描述的那样。第二个链接在 2012 年 4 月进行了更新，称 1 分钟问题现已解决，并且“默认超时大于 1 分钟，具体取决于当前连接数”。

有没有人对此领域有任何进一步的指导，因为它在网络上似乎相当稀少（无论如何我都能找到！）。这些链接谈论后台轮询以保持您的连接活跃，这似乎很疯狂。

用户填写的表格相对较长，并且是在他们与客户通过电话交谈时填写的，因此可能需要一段时间才能填写和提交。

我可以每 30 秒左右进行一次“心跳”异步调用，但想听听其他人在做什么，或者是否有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:12:47.573

我无法谈论实际的潜在技术超时问题，但为了您的用户的理智，我会将表单分解为较小的页面/步骤（在每个步骤后使用异步保存），或者自动安全（即使作为临时记录） ) 每 30 秒。只是这样他们就不会失去工作，并且必须通过电话与客户重新开始。

# c# - 鼠标悬停事件未在 C# 中的面板上触发

> ID：12403375
> 
> 赞同：1
> 
> 时间：2012-09-13T09:35:12.880
> 
> 标签：c#, winforms, panel, mousehover

我正在尝试使用 c# 在我的 winform 应用程序中的面板的 Mouse_Hover 事件上编写代码。这是我的代码..

```
private void viewscreen_MouseHover(object sender, EventArgs e)
    {
        statuspnl.Enabled = true;
        statuspnl.Visible = true;
    } 
```

但问题是当我将鼠标放在视屏面板上时事件没有触发

```
 // viewscreen
        // 
        this.viewscreen.BackColor = System.Drawing.SystemColors.ActiveCaptionText;
        this.viewscreen.Controls.Add(this.statuspnl);
        this.viewscreen.Location = new System.Drawing.Point(208, 16);
        this.viewscreen.Name = "viewscreen";
        this.viewscreen.Size = new System.Drawing.Size(370, 290);
        this.viewscreen.TabIndex = 0;
        this.viewscreen.MouseHover += new System.EventHandler(this.viewscreen_MouseHover); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:51:47.983

请创建一个名为“panelvisible”的窗口应用程序。添加一个表单作为“Form1”并将这些代码添加到相应的文件中。

设计师代码

```
namespace panelvisible
{
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.panel1 = new System.Windows.Forms.Panel();
            this.label1 = new System.Windows.Forms.Label();
            this.panel2 = new System.Windows.Forms.Panel();
            this.panel1.SuspendLayout();
            this.SuspendLayout();
            // 
            // panel1
            // 
            this.panel1.BackColor = System.Drawing.Color.Red;
            this.panel1.Controls.Add(this.panel2);
            this.panel1.Controls.Add(this.label1);
            this.panel1.Location = new System.Drawing.Point(101, 36);
            this.panel1.Name = "panel1";
            this.panel1.Size = new System.Drawing.Size(200, 100);
            this.panel1.TabIndex = 0;
            this.panel1.MouseHover += new System.EventHandler(this.panel1_MouseHover);
            // 
            // label1
            // 
            this.label1.AutoSize = true;
            this.label1.Location = new System.Drawing.Point(49, 42);
            this.label1.Name = "label1";
            this.label1.Size = new System.Drawing.Size(31, 13);
            this.label1.TabIndex = 0;
            this.label1.Text = "Hello";
            this.label1.Visible = false;
            // 
            // panel2
            // 
            this.panel2.BackColor = System.Drawing.Color.Gray;
            this.panel2.Location = new System.Drawing.Point(33, 70);
            this.panel2.Name = "panel2";
            this.panel2.Size = new System.Drawing.Size(118, 10);
            this.panel2.TabIndex = 1;
            this.panel2.Visible = false;
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(494, 205);
            this.Controls.Add(this.panel1);
            this.Name = "Form1";
            this.Text = "Form1";
            this.panel1.ResumeLayout(false);
            this.panel1.PerformLayout();
            this.ResumeLayout(false);

        }

        #endregion

        private System.Windows.Forms.Panel panel1;
        private System.Windows.Forms.Label label1;
        private System.Windows.Forms.Panel panel2;
    }
} 
```

代码后面的代码

```
using System;
using System.Windows.Forms;

namespace panelvisible
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void panel1_MouseHover(object sender, EventArgs e)
        {
            this.label1.Visible = true;
            this.label1.Enabled = true;
            this.panel2.Visible = true;
            this.panel2.Enabled = true;
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:39:52.277

你有这个代码吗？

```
this.viewscreen.MouseHover += new System.EventHandler(this.viewscreen_MouseHover); 
```

它应该自动添加，但请确保您不要更改它...另一种方法 - 删除鼠标悬停事件并再次添加。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:42:36.617

您是查看屏幕还是一个面板？您是否启用了面板/表单？

# android - Android webview 不在同一页面中播放 mp4 视频

> ID：12403380
> 
> 赞同：4
> 
> 时间：2012-09-13T09:35:39.703
> 
> 标签：android, html, android-webview, html5-video, android-video-player

我正在尝试显示一个本地 html 文件包含用于播放视频的代码，并尝试在 android webview 中显示该 html 文件。

我使用以下代码来播放视频：

**WebViewLoadVideoActivity.java**

```
 //DECLARE webview variable outside of onCreate function so we can access it in other functions (menu)
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);
 WebView webView = (WebView) findViewById(R.id.webView1);
 WebSettings webSettings = webView.getSettings(); // Fetches the
 // WebSettings
 // import
 WebViewClient webViewClient = new WebViewClient();
 webView.setWebViewClient(webViewClient); // Enabling mp4
 webSettings.setPluginsEnabled(true); // Allows plugins to run which are
 // normally disabled in webView
 webView.getSettings().setBuiltInZoomControls(true); // Allows the
 // Android built in
 // zoom control
 webView.getSettings().setSaveFormData(true);
 webView.getSettings().setLoadsImagesAutomatically(true);
 webView.getSettings().setPluginsEnabled(true);
 webView.getSettings().setLoadsImagesAutomatically(true);
 webView.getSettings().setSupportMultipleWindows(true);
 webView.getSettings().setPluginsEnabled(true);
 webView.getSettings().setLightTouchEnabled(true);
 webView.getSettings().setAllowFileAccess(true); // To allow file
 // downloads/streams
 // such as mp4, mpeg,
 // and 3gp files
 webView.getSettings().setJavaScriptEnabled(true); // Enables HTML
 // Javascript to run
 // in webview
 webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
 webView.getSettings().setSupportZoom(true); // Support the zoom feature
 webView.getSettings().setSavePassword(true); // Allow users to save passwords in forms
  webView.setWebViewClient(new  WebViewClient() { // Opens web links clicked by user in the webview
  @Override
  public void onReceivedError(WebView view, int errorCode,
  String description, String failingUrl) { // Handle the error
  }

  @Override
  public boolean shouldOverrideUrlLoading(WebView view, String url) {
  view.loadUrl(url);
  return true;
  }
  });
 webView.loadUrl("file:///android_asset/test.html"); // test.html file from assets folder
  //... Rest of activity code... 
```

**测试.html**

```
<!DOCTYPE html>
<html>
<body>

<video width="320" height="240" controls="controls">
  <source src="http://www.w3schools.com/html/movie.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video>

</body>
</html> 
```

**问题区域：**
当我们点击播放按钮时，Android webview或Android默认浏览器在另一个视频视图中显示视频内容，我的要求是视频应该在同一个html页面内联打开，这样用户可以在视频播放期间导航到网页的其他页面或缓冲。

**研究领域：**
我尝试了许多其他方法，例如 HTML5 的视频标签 HTML 的 HTML 对象标签的嵌入标签

到目前为止我检查过的其他视频播放器集成方式，但在我的要求中不起作用，
[Flare Video](http://flarevideo.com)
[jplayer](http://www.jplayer.org/latest/demo-01-video/)

请建议我任何适合我要求的方式，而且我的要求非常简单，因为我想在 html 文件中播放视频作为内联在 android 的 webview 小部件中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T13:30:14.300

您必须使用 webView Custome 类来播放 mp4 视频

# python - 无法在 python 中使用 Xlrd 模块

> ID：12403386
> 
> 赞同：0
> 
> 时间：2012-09-13T09:36:09.847
> 
> 标签：python, module, python-3.x, xlrd

问题：虽然我安装了相同的 xlrd 模块，但我无法使用它？？？

获得的错误：

```
Traceback (most recent call last): 
  File "D:\xlrd_1.py", line 1, in <module> 
    import xlrd 
  File "D:\Python31\lib\xlrd\__init__.py", line 345 
    u"Consolidate_Area": u"\x00", 
                      ^ 
SyntaxError: invalid syntax 
```

代码 ：

```
import xlrd
print ("hi") 
```

更多描述：

1.  我正在使用 python 3.1，
2.  我已经安装了从 [http://pypi.python.org/pypi/xlrd/0.7.1](http://pypi.python.org/pypi/xlrd/0.7.1)获取的 xlrd-0.7.1.win32.exe (md5) 。
3.  能够在 python\Lib\Site-packages 中看到 xlrd 包
4.  尝试复制以包含文件也不起作用。

在这方面需要帮助..搜索了相同问题的 stackoverflow 以及我没有找到答案的其他问题，因此发布相同的问题

感谢您对此的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:02:58.730

您使用的是 Python 3。但是您使用的 XLRD 库是用 Python 2 编写的！（不知道你安装成功了）

尝试将包[xlrd3](http://pypi.python.org/pypi/xlrd3/0.1.4)用于 Python 3

# spring-mvc - Spring MVC 使用单个控制器管理多个视图

> ID：12403390
> 
> 赞同：0
> 
> 时间：2012-09-13T09:36:23.897
> 
> 标签：spring-mvc

寻找一种有效的方式来实现订单管理模块。有不同的订单类型（大约 15 种）。每个订单都有单独的视图。但无论订单类型如何，在 UI 上执行的操作都是相同的。下面是我的 DTO 的结构

```
abstract class Order

abstract class SecurityOrder extends Order

abstract class TermDepositOrder extends Order
.....
.....
..... 
```

我正在尝试实现一个能够管理所有视图的控制器。类似于以下内容：

```
@Controller
public class OrderController<F extends Order> {

    public F validate(F order) {
    }

    public F insert(F order) {
    }
} 
```

我不确定spring mvc如何能够正确地将请求参数映射到订单实例，因为它不知道要实例化哪个订单实例。

是否可以使用单个控制器来实现这一点，或者我应该为每种订单类型使用一个控制器并在所有订单类型中复制相同的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:30:47.310

能够通过提供自定义方法处理器来做到这一点。下面是示例代码。

自定义实现：

```
public class OrderControllerArgumentResolver extends 
            ModelAttributeMethodProcessor { 

    public OrderControllerArgumentResolver() { 
            super(true); 
    } 

    @Override 
    public boolean supportsParameter(MethodParameter paramMethodParameter) { 
            //Resolve - custom annotation created to differentiate order parameter from others. 
            //This is to make sure this resolver is used only while resolving OrderDTO is used as method parameter 
            if (paramMethodParameter.getParameterAnnotation(Resolve.class) != null) { 
                    return true; 
            } 
            return false; 
    } 

    @Override 
    protected final Object createAttribute(String attributeName, 
                    MethodParameter parameter, WebDataBinderFactory binderFactory, 
                    NativeWebRequest request) throws Exception { 
            //Instantiate appropriate order instance based on input. 
            return BeanUtils.instantiateClass(OrderTypeEnum.getDTOClass(request 
                            .getParameter("orderType"))); 
    } 

    @Override 
    protected void bindRequestParameters(WebDataBinder binder, 
                    NativeWebRequest request) { 
            ServletRequest servletRequest = request 
                            .getNativeRequest(ServletRequest.class); 
            ServletRequestDataBinder servletBinder = (ServletRequestDataBinder) binder; 
            servletBinder.bind(servletRequest); 
    } 
} 
```

配置：

```
<mvc:annotation-driven>
    <mvc:argument-resolvers> 
            <bean 
                    class="test.util.OrderControllerArgumentResolver" /> 
    </mvc:argument-resolvers> 
</mvc:annotation-driven> 
```

能够通过这种方法达到预期的结果。但不确定这种方法是否会导致任何其他问题。请建议。

# c# - 从 sqlserver 获取顶部（开始没有，结束没有）行

> ID：12403391
> 
> 赞同：3
> 
> 时间：2012-09-13T09:36:31.197
> 
> 标签：c#, asp.net, sql, sql-server, sql-server-2008

我在我的 asp.net 页面中使用网格视图，我正在从 SQL Server 获取数据并放置在我的网格视图中。

现在我的问题是，我正在使用分页并在网格视图中每页放置 50 行。我想在启动时从数据库中获取前 50 行并绑定到网格视图，当我单击下一页时，然后再次转到数据库并获取第二个前 50 行并绑定到 GV。并且这个过程必须继续，直到从数据库中获取最后一行。

你能告诉我如何编写查询来实现这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T09:40:16.900

通常，您将有两个参数传递给此查询，`@pageNum`然后`@pageSize`您可以这样做：

```
With ranked AS   --- Or you can make it a view
(
   SELECT ROW_NUMBER() OVER(ORDER BY OrderField) AS RowNum,  * 
   FROM YourTableReference
)
SELECT *   --Your fields here
FROM Ranked
WHERE RowNum BETWEEN ((@PageNum - 1) * @PageSize + 1)
                 AND (@PageNum * @PageSize)
ORDER BY SomeField 
```

## [现场演示](https://data.stackexchange.com/stackoverflow/query/79951/pagining-in-sql-server)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:41:37.810

你可以创建一个sproc

```
sp_fetcrangeofrecords
@st int,
@ed int

As
BEGIN
WITH CTE as (select row_number() over (order by (select 0)) as rn,* from your table)

select col1,col2,... from table where rn between @st and @ed
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T09:40:26.870

阅读有关 SQL 分页的更多信息，有几种方法[http://www.codeguru.com/csharp/.net/net_data/article.php/c19611/Paging-in-SQL-Server-2005.htm](http://www.codeguru.com/csharp/.net/net_data/article.php/c19611/Paging-in-SQL-Server-2005.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T10:15:37.013

尝试[使用 ROW_NUMBER() 对 GridView 进行分页](http://www.codeproject.com/Articles/12962/Paging-GridView-with-ROW_NUMBER)，您将了解如何执行此操作。

[SQL Server - 使用 Row_number() 函数的服务器端分页](http://beyondrelational.com/modules/2/blogs/28/posts/10434/sql-server-server-side-paging-with-rownumber-function.aspx)也会有所帮助。

# sql - 更新被选择锁定

> ID：12403392
> 
> 赞同：0
> 
> 时间：2012-09-13T09:36:32.247
> 
> 标签：sql, postgresql

在我的 web 应用程序上，一些查询运行 3 分钟（我知道，它很大......）。同时另一个用户尝试从同一个表中更新数据。似乎更新查询等待选择运行结束。

它是 PostgreSQL 的标准操作方式吗？有没有办法在选择查询结束之前强制执行更新？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:56:27.980

您不能禁用 MVCC，所以这不是问题。MVCC 指的是行存储在磁盘上的方式，并且避免了低锁定。

在尝试了解 PostgreSQL 锁定的方式和时间可能是必要的时，您应该了解 MVCC。通常读者不会阻止读者或作者。作家很少屏蔽读者。

读取器和写入器通常可以通过处理在语句或事务的生命周期内相当稳定的快照来避免相互阻塞（确切的稳定性取决于事务级别）。

行锁定仍然是可能的，但必须明确要求。 `SELECT ... FOR UPDATE`将锁定选定的行。所以首先要做的是检查`SELECT`语句是否有`for update`谓词。

如果不是这种情况，则检查隔离级别并尝试在`read committed`隔离级别下运行

除此之外，检查 pg_locks 表并查看实际被锁定的内容。

# postgresql - JPA2 Criteria API 在使用 groupBy 时创建无效 SQL

> ID：12403399
> 
> 赞同：2
> 
> 时间：2012-09-13T09:36:43.303
> 
> 标签：postgresql, jpa-2.0, criteria-api

带有 Criteria API 的 JPA2 似乎为 PostgreSQL 生成了无效的 SQL。对于此代码：

```
Root<DBObjectAccessCounter> from = query.from(DBObjectAccessCounter.class);
Path<DBObject> object = from.get(DBObjectAccessCounter_.object);
Expression<Long> sum = builder.sumAsLong(from.get(DBObjectAccessCounter_.count));
query.multiselect(object, sum).groupBy(object); 
```

我得到以下异常：

```
ERROR: column "dbobject1_.id" must appear in the GROUP BY
clause or be used in an aggregate function 
```

生成的 SQL 为：

```
select dbobjectac0_.object_id as col_0_0_,
    sum(dbobjectac0_.count) as col_1_0_, dbobject1_.id as id1001_,
    dbobject1_.name as name1013_,
    dbobject1_.lastChanged as lastChan2_1013_,
    dbobject1_.type_id as type3_1013_
    from DBObjectAccessCounter dbobjectac0_
    inner join DBObject dbobject1_
    on dbobjectac0_.object_id=dbobject1_.id
    group by dbobjectac0_.object_id 
```

显然，select 语句的第一项（dbobjectac0_.object_id）与group by 子句不匹配。

# 简化示例

它甚至不适用于这个简单的示例：

```
Root<DBObjectAccessCounter> from = query.from(DBObjectAccessCounter.class);
Path<DBObject> object = from.get(DBObjectAccessCounter_.object);
query.select(object).groupBy(object); 
```

返回

```
select dbobject1_.id as id924_, dbobject1_.name as name933_,
    dbobject1_.lastChanged as lastChan2_933_,
    dbobject1_.type_id as type3_933_
    from DBObjectAccessCounter dbobjectac0_
    inner join DBObject dbobject1_
    on dbobjectac0_.object_id=dbobject1_.id
    group by dbobjectac0_.object_id 
```

并产生与上述相同的错误。

# 按 ID 而非类型分组

按照错误消息的建议按 ID 分组

```
Root<DBObjectAccessCounter> from = query.from(DBObjectAccessCounter.class);
Path<DBObject> object = from.get(DBObjectAccessCounter_.object);
Path<Long> objectId = from.get(DBObjectAccessCounter_.object).get(DBObject_.id);
query.select(object).groupBy(objectId); 
```

也会导致同样的错误。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:11:46.650

PostgreSQL 9.2 及更高版本在检测“隐式分组”列的方式上有所改进，即您将主键放入的位置，`group by`因此该表中的所有字段都可以在 SELECT 列表中引用。以前的版本没有检测到这一点，因此`SELECT id, somefield FROM sometable GROUP BY id`会导致`Column sometable.somefield must appear in the GROUP BY clause`. 在较新的版本中，Pg 将检测到`somefield`隐式分组，因为它`id`被包含并允许此查询运行。

不幸的是，我不确定这是否能解决您的问题；您的问题是您正在按联接条件另一侧的键进行分组，我怀疑 Pg 会将其识别为 PK，因为该列未标记为这样。

我建议您编写一个独立的测试用例并在 Hibernate JIRA 上提交问题报告。链接到这里；一旦有一个完整且可运行的测试用例，我就会试一试。

此外，您确定错误消息在您更改的测试用例中保持*完全相同，它没有引用不同编号的别名或任何东西吗？*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:10:02.480

我已经在`EclipseLink`and上测试了你的第一个例子`MySql`。它不会引发任何异常，如果我没有误解您的目标，那么结果查询就是您要查找的内容：

```
SELECT t0.id, t0.name, SUM(t1.count) 
FROM dbobject t0, dbobjectaccesscounter t1 
WHERE (t0.id = t1.object_id) GROUP BY t0.id, t0.name 
```

# visual-studio-2010 - 有没有办法为尚未实现的接口方法创建存根？

> ID：12403400
> 
> 赞同：0
> 
> 时间：2012-09-13T09:36:48.107
> 
> 标签：visual-studio-2010

当您向类添加接口时（例如：*Implements IAppController*），Visual Studio 会立即告诉您缺少某些方法，它甚至会告诉您它们的名称和签名是什么......

有没有办法让 VS 将那些缺少的方法创建为存根？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:40:57.267

在接口声明下有一个所谓的“智能标签”。激活它并选择“实现接口...”。请参阅[MSDN - 如何：实现接口](http://msdn.microsoft.com/en-us/library/tx1s9z1w%28v=vs.100%29.aspx)以获取更多参考。

# iphone - 应用程序在 Core Data 标准迁移期间崩溃而没有错误

> ID：12403403
> 
> 赞同：1
> 
> 时间：2012-09-13T09:37:18.323
> 
> 标签：iphone, objective-c, xcode, core-data, core-data-migration

尝试使用标准迁移更新核心数据时，应用程序崩溃而没有错误消息。它具有所有标准日志消息：

```
CoreData: sql: INSERT INTO ZENTRY(Z_PK, Z_ENT, Z_OPT, ZLOCATION, ZBOOKMARKED, ZCREATIONDATE, ZENTRYID, ZMESSAGE, ZSECTIONIDENTIFIER, ZTICDSSYNCID, ZVERSION) VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
CoreData: sql: COMMIT
CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZISINPHOTOLIBRARY, t0.ZLARGETHUMBNAIL, t0.ZMOVIE, t0.ZORIGINALHEIGHT, t0.ZORIGINALIMAGE, t0.ZORIGINALWIDTH, t0.ZSCREENSIZEIMAGE, t0.ZTHUMBNAIL, t0.ZTYPE, t0.ZENTRY, t0.Z_FOK_ENTRY FROM ZMEDIA t0 
```

它会在此停留几秒钟，然后崩溃到主屏幕，没有进一步的日志消息。

崩溃前的代码是：

```
persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

NSURL *storeUrl = [NSURL fileURLWithPath:storePath];
    NSError *error;
    NSDictionary *pscOptions = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                                [NSNumber numberWithBool:NO], NSInferMappingModelAutomaticallyOption,
                                nil]; 
```

然后它在这一行崩溃：

```
if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:pscOptions error:&error]) {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    } 
```

它甚至没有达到那个未解决的错误行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:48:41.817

也许您遇到了我在[此处](https://stackoverflow.com/a/13876952/1032151)的回答中描述的相同问题（您修改了模型而没有创建新的模型版本）。

一个很好的帮手可能是在@try @catch 块中用问题换行，看看它捕获了什么：

```
@try
{
    if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:pscOptions error:&error])
    {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    }
}
@catch(NSException* ex)
{
    NSLog(@"Exception: %@", ex);
} 
```

它有助于理解问题。

# ios - 有没有办法将 Xcode 自动配置文件选择器配置到某些团队配置文件？

> ID：12403406
> 
> 赞同：8
> 
> 时间：2012-09-13T09:37:31.297
> 
> 标签：ios, xcode

我安装了几个 iPhone 团队临时配置文件。每次我从 GitHub 下载一个项目并在 Xcode 中打开时，选择的默认配置文件都不是我喜欢的配置文件。

有没有办法让 Xcode 自动选择特定的`iPhone Team Provisional Profile`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:59:55.340

自动选择器基于应用程序 ID 工作，即捆绑包前缀和产品名称。要使特定的更有可能被选中，请使捆绑前缀更接近于所需配置文件的应用程序 ID。

当自动选择器希望选择一个通配符的 Team Provisioning Profile 时，我相信 Xcode 只会选择下载和安装的第一个。

除非您正在创建 .ipa 并分发它，即您只部署到您自己的应用程序或设备，否则选择的团队配置文件无关紧要。

如果您正在分发您的应用程序以供非开发人员使用或测试，即通过 testflight 或其他站点，如果您希望选择特定的配置文件，您应该为其提供更大的范围，即 com.companyname.testing.* 和更改捆绑前缀以匹配所需配置文件的所述范围。

# c# - 从另一个类运行 SaveFileDialog

> ID：12403407
> 
> 赞同：0
> 
> 时间：2012-09-13T09:37:31.093
> 
> 标签：c#

我正在尝试编写一个将文件从服务器传输到客户端的软件......这就是我的软件的工作方式......在客户端它获取一个 IP 和一个端口，然后从 Client 类生成一个新对象到一个新线程并将 ip 和端口传递给构造函数，客户端处理连接并将文件传输到 byte[] 变量..现在我想用 saveFileDialog 提示用户保存文件......但是我无权访问作为我的表单的父类。所以我不能做像 savefiledialog.ShowDialog() 这样的事情......这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:40:53.197

使用事件

[http://msdn.microsoft.com/en-us/library/awbftdfh.aspx](http://msdn.microsoft.com/en-us/library/awbftdfh.aspx)

使用后台工作者而不是您自己的线程：

[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:34:14.470

@syned 建议的事件是一个很好的解决方案。它是一种[观察者](http://en.wikipedia.org/wiki/Observer_pattern)，但在此示例中，您需要与可观察类（客户端）进行交互。

您可以在您的客户端类中声明一个事件，因此当要接收文件时可以使用此事件。一种正常的方法是有一个特殊的“上下文类”，你可以用你需要的值来填充它。

```
public class Client {
    public event EventHandler<ReceivedFileEventArgs> ReceivedFile;

    private ReceivedFileEventArgs onReceivedFile() {
        EventHandler<ReceivedFileEventArgs> handler = ReceivedFile;
        ReceivedFileEventArgs args = new ReceivedFileEventArgs();
        if (handler != null) { handler(this, args); }
        return args;
    }

    private void receiveFileCode() {
        // this is where you download the file
        ReceivedFileEventArgs args = onReceivedFile();
        if (args.Cancel) { return; }
        string filename = args.FileName;
        // write to filename
    }
}

public class ReceivedFileEventArgs {
    public string FileName { get; set; }
    public bool Cancel { get; set; }
} 
```

现在，在您的 GUI 类中，您可以“监听”此事件，并将文件名设置为您想要的。

```
public class MyForm : Form {
   public MyForm() { Initialize(); }

   protected void buttonClick(object sender, EventArgs e) {
       // Suppose we initialize a client on a click of a button
       Client client = new Client();
       // note: don't use () on the function here
       client.ReceivedFile += onReceivedFile;
       client.Connect();
   }

   private void onReceivedFile(object sender, ReceivedFileEventArgs args) {
       if (InvokeRequired) {
           // we need to make sure we are on the GUI thread
           Invoke(new Action<object, args>(onReceivedFile), sender, args);
           return;
       }
       // we are in the GUI thread, so we can show the SaveFileDialog
       using (SaveFileDialog dialog = new SaveFileDialog()) {
           args.FileName = dialog.FileName;
       }
   }
} 
```

那么，什么是事件？*简单来说*，它是一个函数指针（但请阅读它以获取更多详细信息）。因此，您告诉您的客户端类在发生某些事情时调用该函数，例如当要接收文件时。在使用 Windows 窗体时，您几乎一直使用事件，例如当您将按钮单击分配给代码隐藏文件中的函数时。

现在，使用这种模式，您可以拥有更多事件，例如 a `FileDownloadCompleted`for instance。

还要注意`+=`语法。您不会*将*事件分配给函数，而是告诉事件在发生某些事情时调用该函数。如果需要，您甚至可以在同一个事件中使用两个函数。

# python - range() 带浮动步长参数

> ID：12403411
> 
> 赞同：8
> 
> 时间：2012-09-13T09:37:42.580
> 
> 标签：python

> **可能重复：**
> [Python 十进制范围（）步长值](https://stackoverflow.com/questions/477486/python-decimal-range-step-value)

我想生成这样的列表：

```
[0, 0.05, 0.1, 0.15 ... ] 
```

*range(0, 1, 0.05)*会很棒，但它不起作用，因为：

> 预期范围（）整数步长参数，得到浮点数。

你有什么优雅的想法吗？;)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T09:51:41.117

如果可以使用 numpy，最好使用`numpy.linspace`. 尝试`range`在浮点数上拟合逻辑的函数，包括 numpy 自己的函数`arange`，通常会在结束边界是否在列表中结束时感到困惑。`linspace`通过让您明确指定起点、终点和所需的元素数量，优雅地解决了这个问题：

```
>>> import numpy
>>> numpy.linspace(0.0, 1.0, 21)
array([ 0\.  ,  0.05,  0.1 ,  0.15,  0.2 ,  0.25,  0.3 ,  0.35,  0.4 ,
        0.45,  0.5 ,  0.55,  0.6 ,  0.65,  0.7 ,  0.75,  0.8 ,  0.85,
        0.9 ,  0.95,  1\.  ]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T11:02:31.167

在 Python 3 中，范围返回一个生成器（不可变序列）......所以我认为我们可以定义一个非常简单的函数，例如：

```
def frange(start,stop, step=1.0):
    while start < stop:
        yield start
        start +=step 
```

所以：

```
for x in frange(0, 1, 0.05):
   print(x) 
```

Python 不需要很棘手。

如果你想要一个列表，只需调用：

```
list(frange(0,1,0.05)) 
```

或者更改函数以立即返回列表。

您可以使用一条线的解决方案来相乘或做其他事情，但使用不同的开始和结束值可能会很棘手。如果您经常使用这种范围，只需使用该功能并重用它。即使是在代码上重复多次的单行代码也是不好的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T09:46:34.740

或者这个怎​​么样：

```
[v*0.05 for v in range(0,int(1/0.05))] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T09:43:43.790

这个怎么样：

```
temp = range(0,100,5) # 0,5,10,...,95
final_list = map(lambda x: x/100.0,temp) # becomes 0,0.05,0.10,...,0.95 
```

它不是很优雅，但我从来没有费心去做一个合适的功能。此外，它仅在步长合理的情况下才有效。优点是速度足够快，可以在现场完成。

请参阅对您的 OP 的评论以获得更通用和更优雅的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T09:49:55.703

有什么问题

```
[i/100.0 for i in range(0, 100, 5)] 
```

? 你检查你想要多少位数（这里是两个）并找出一个合适的乘数（1 变成 100，0.05 变成 5）。

# javascript - window.location 使用 jquery mobile 使 chrome 跳转

> ID：12403412
> 
> 赞同：0
> 
> 时间：2012-09-13T09:37:42.637
> 
> 标签：javascript, jquery, ajax, jquery-mobile

单击链接时，我正在通过 ajax 调用生成指向 clickonce 应用程序的链接。当ajax成功返回生成的链接时我设置`window.location = my_generated_link;`

这在 IE9 中运行良好，即下载 clickonce 并且我停留在当前页面，

但是在 Chrome 中，我被导航回上一页

（但是，仍然会下载 clickonce，但是从我当前的页面导航出去很烦人）。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:52:01.833

确保您的 window.location =newlocation 在完成您的 ajax 请求后执行可能是您`window.location = my_generated_link;`在 ajax 请求之前执行

像这样

```
$.ajax({
  url: "test.html",
  context: document.body
}).done(function() { 
  window.location = my_generated_link;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T13:01:39.380

获取一个隐藏的 IFrame 并将 my_generated_link url 提供给该 Iframe 的来源。还将参数 cofc_goback=false 添加到 my_generated_link 即

```
my_generated_link = my_generated_link + "&cofc_goback=false";
$('iframe').prop("src",my_generated_link); 
```

这在所有浏览器中都非常适合我。

# java - 如何使用 apache mina 获取套接字的输入或输出流？

> ID：12403413
> 
> 赞同：0
> 
> 时间：2012-09-13T09:37:44.033
> 
> 标签：java, sockets, nio, apache-mina

我将 apache mina 用于客户端套接字应用程序，我想使用输入流和输出流来发送或读取数据，而不是使用 IO 会话。如何使用流将数据写入服务器？如果可能，请提供一个小例子。

请帮我解答。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:06:30.060

Apache MINA 是一个非阻塞 I/O 框架。Streams 是一个阻塞 I/O 框架。你需要下定决心：你不能同时拥有两者。

你当然不需要进入阻塞模式只是为了发送“六进制格式的数据”，不管是什么。

# synchronization - 参考设备需要哪些 Microsoft 的同步程序集？

> ID：12403419
> 
> 赞同：0
> 
> 时间：2012-09-13T09:37:59.537
> 
> 标签：synchronization, compact-framework, microsoft-sync-framework

我使用 Microsoft.Synchronization 服务为 Ado.net 构建了设备应用程序。

我选择了三个程序集：

Microsoft.Synchronization.Data Microsoft.Synchronization.Data.Server Microsoft.Synchronization.Data.SqlServerCe

来自 C:\Program Files\Microsoft Sync Framework\v1.0\Runtime\ADO.NET\V2.0\x86\ 目录，但是我收到编译错误，提示需要再安装一个程序集：Microsoft.Synchronization is required ...

该库是否有设备版本？

如果我包含它，我会在设备上收到 TypeLoadException 错误，指出它无法在设备上加载 System 2.0.0.0 ...

感谢您的任何提示...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:46:50.207

选择显示设备的那个

例如，

C:\Program Files\Microsoft 同步服务\ADO.NET\v1.0\Devices

# cruisecontrol.net - Cruisecontrol.net 中的条件参数

> ID：12403420
> 
> 赞同：0
> 
> 时间：2012-09-13T09:38:00.080
> 
> 标签：cruisecontrol.net, conditional-operator, conditional-statements

有没有办法在 Cruisecontrol.net 1.6 中混淆“AND”和“OR”运算符？我的 if 条件是这样的：

```
if ((A="a" && a="a") || (B="b" && b="b"))
{
    //Task to be done
} 
```

用 CC（OR 部分）编写时也是如此：

```
<conditional>
    <conditions>
        <orCondition>
            <conditions>
                <compareCondition value1="A" evaluation="equal" value2="a" />
                <compareCondition value1="B" evaluation="equal" value2="b" />
            </conditions>
        </orCondition>
    </conditions>
    <tasks>
        <!--Task to be done-->
    </tasks>
</conditional> 
```

当在 CC 中使用 AND 部分编写时：

```
<conditional>
    <conditions>
        <andCondition>
            <conditions>
                <compareCondition value1="a" evaluation="equal" value2="a" />
                <compareCondition value1="b" evaluation="equal" value2="b" />
            </conditions>
        </andCondition>
    </conditions>
    <tasks>
        <!--Task to be done-->
    </tasks>
</conditional> 
```

我想把这两个写成一个条件操作。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:09:36.057

好吧，我自己想通了... :)

```
<conditional>
    <conditions>
        <orCondition>
            <conditions>
                <andCondition>
                    <conditions>
                        <compareCondition value1="A" evaluation="equal" value2="a" />
                        <compareCondition value1="a" evaluation="equal" value2="a" />
                    </conditions>
                </andCondition>
                <andCondition>
                    <conditions>
                        <compareCondition value1="B" evaluation="equal" value2="b" />
                        <compareCondition value1="b" evaluation="equal" value2="b" />
                    </conditions>
                </andCondition>
            </conditions>
        </orCondition>
    </conditions>
    <tasks>
        <!--Task to be done-->
    </tasks>
</conditional> 
```

# trigger.io - trigger.io：标题的 Web 视图？

> ID：12403422
> 
> 赞同：1
> 
> 时间：2012-09-13T09:38:18.783
> 
> 标签：trigger.io

使用 trigger.io，是否可以为标题区域指定 Web 视图？

我目前有一个相当复杂的标题，它利用媒体查询并根据当前屏幕宽度包含一个输入框。这远远超出了 trigger.io 的原生 topbar 实现的能力，所以我想知道这是否可能或是否有计划？

目前，我正在为已知支持它的设备使用固定位置，但在所有设备（主要是 Android 2.3>*）上获得完全支持会很好。

# linux - JR 报告未在使用 Struts 2 的 Linux 上生成

> ID：12403423
> 
> 赞同：0
> 
> 时间：2012-09-13T09:38:20.340
> 
> 标签：linux, struts2, glassfish, jasper-reports

我试图在 Linux中显示*JR报告。*我刚才遇到了一个错误，生产大约在几个小时后。首先它在 Windows 上运行良好。我的应用服务器是*GlassFish 2.1*，操作系统是*RedHat*，框架是*Struts 2*。

*我很沮丧，因为我的日志（ GlassFish*服务器日志）中没有日志错误（异常）。我检查了连接，看起来很好（使用*jdbc*）：

```
public String getConnection() {
        try {
            Class.forName("org.apache.derby.jdbc.ClientDriver").newInstance();
            myConnectionObj = DriverManager.getConnection ("jdbc:derby://127.0.0.1:1527/timesheet_db;create=true;user=app;password=app");
        return SUCCESS;
        } catch (Exception e) {
            e.printStackTrace();
            return ERROR;
        }
    } 
```

我的*Struts 2* XML for JR：

```
<action name="ResourcePlan8"
            class="com.promo.accountsys.web.action.ReportResourcePlanAction"
            method="getConnection">
            <result name="success" type="jasper">
                <param name="location">/jasper/ResourcePlanConn9.jasper</param>
                <param name="dataSource">totalEffortProjectList</param>
                <param name="connection">myConnectionObj</param>
                <param name="format">PDF</param>
                <param name="dynamicReport">myDynamicReport</param>
                <param name="layoutManager">classic</param>
                <param name="documentName">Resouce_Plan</param>
                <param name="contentDisposition">application/download</param>
            </result>
            <result name="error">/jsp/report/initreport.jsp</result>
        </action> 
```

由于没有错误日志，我认为我丢失了，也许在生成的报告中我缺少配置*Linux*（仍然不确定）。我的朋友刚刚遇到字体问题，但他正在使用*Birt*报告。他说该报告仍然使用*Linux*中的默认字体生成，但我的错误没有显示任何报告。我想当我把它移到*Linux*时我错过了一些需要配置的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:13:52.033

在您的 jrxml 中将属性 net.sf.jasperreports.awt.ignore.missing.font 设置为 true 并尝试。如果它生成报告，那么您可以通过使用jasper 报告的[字体扩展来解决问题。](http://jasperforge.org/uploads/publish/jasperreportswebsite/trunk/sample.reference/fonts/index.html)

# jquery - 在document.ready期间触发anchor的href的javascript函数

> ID：12403424
> 
> 赞同：3
> 
> 时间：2012-09-13T09:38:25.010
> 
> 标签：jquery

是否可以在页面加载期间触发锚标记的 javascript 功能？

这是我的[小提琴](http://jsfiddle.net/jansian/yCvBH/)

```
<a  id="WebTree" href="javascript:alert('testing')">click me</a>

$(document).ready(function(){
    $('#WebTree').trigger('click');
    //$('#WebTree').click();
    // after the page load I'm expecting to see the alert but it's not working
}); 
```

我希望在页面加载后看到警报，但我没有

**编辑**

好的，这是我问这个问题的简单解释。

这是由sharepoint动态生成的原始链接。

```
<A id=ctl00_PlaceHolderLeftNavBar_ctl01_WebTreeViewn1 href="javascript:TreeView_PopulateNode(ctl00_PlaceHolderLeftNavBar_ctl01_WebTreeView_Data,1,ctl00_PlaceHolderLeftNavBar_ctl01_WebTreeViewn1,ctl00_PlaceHolderLeftNavBar_ctl01_WebTreeViewt1,ctl00_PlaceHolderLeftNavBar_ctl01_WebTreeViewt1i,' ','TaxonomyMetadata','Pages\\TaxonomyMetadata','t','30:FieldNameNode:e305128c-217b-47b4-81b9-db0c1e59f98f:3b529925-3610-485a-9133-bc958f7ab28e:dbf365da-565b-41ca-966d-f9bf29d9b2cf:30|ListNode|e305128c-217b-47b4-81b9-db0c1e59f98f|3b529925-3610-485a-9133-bc958f7ab28e|ea06a686-46c5-4470-a1ab-4fe4341589c8','tt')">

    <IMG style="BORDER-RIGHT-WIDTH: 0px; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px" alt="Expand TaxonomyMetadata" src="/_layouts/images/MDNCollapsed.png">
</A> 
```

底线我无法控制锚标记。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T09:49:59.433

怎么样：

```
$(document).ready() {
    var code = $('#WebTree').attr('href');
    eval(code);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T09:44:01.700

您应该使用`onclick`属性而不是`href`. 以编程方式触发单击元素不会激活该`href`属性。

```
<a id="WebTree" onClick='javascript:alert("testing")' href='#'>click me</a> 
```

如果要更改页面的位置，可以使用`location.href`.

```
$('#webTree').click(function(){
   location.href = this.href
}).click() 
```

[http://jsfiddle.net/qnN2d/](http://jsfiddle.net/qnN2d/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T09:43:16.323

将事件绑定移动到 javascript：

```
<a  id="WebTree" href="#">click me</a>

$(document).ready(function(){
    $('#WebTree').click(function(){
        alert("testing");
    });
    $('#WebTree').trigger('click');
}); 
```

[资源](http://jsfiddle.net/yCvBH/3/)

[请参阅不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T09:43:08.907

所以你不能这样[尝试](http://jsfiddle.net/yCvBH/2/)

```
$(document).ready(function(){
    $('#WebTree').trigger('click');
    $('#WebTree').click(function() {
    alert(1);
    });
    // after the page load I'm expecting to see the alert but it's not working
});

 $(window).load(function () {
        $('#WebTree').click();
 });​ 
```

# postgresql - 如何将 Jboss-as-7.1.1 与 Postgresql 连接

> ID：12403428
> 
> 赞同：1
> 
> 时间：2012-09-13T09:38:48.867
> 
> 标签：postgresql, jboss7.x

有人知道如何连接`jboss-as-7.1.1`到 PostgreSQL 吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-13T10:00:03.477

（请注意，这是为 JBoss AS 7.1.1 编写的；如果在较新的版本上，请记住这一点，因为事情可能已经改变。）

[下载 PgJDBC](http://jdbc.postgresql.org/download.html)。我假设您正在使用`postgresql-9.1-902.jdbc4.jar`，在撰写本文时的当前版本。如果您需要不同的版本，请调整任何文件名以匹配。

现在将 JDBC 驱动程序部署到 JBoss AS 7，方法是将其放在文件`deployments`夹中或使用. 这将适用于大多数（但不是全部）目的。`deploy``jboss-cli`

或者，您可以定义一个 PostgreSQL JDBC 驱动程序模块：

1.  创建路径`$JBOSS_HOME/modules/org/postgresql/main`。该`modules/org`部分应该已经存在，为其余部分创建目录。
2.  在`$JBOSS_HOME/modules/org/postgresql/main/module.xml`以下内容中，更改`resource-root`PgJDBC 驱动程序的条目以引用您希望使用的驱动程序。

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <module xmlns="urn:jboss:module:1.1" name="org.postgresql">
         <resources>
             <resource-root path="postgresql-9.1-902.jdbc4.jar"/>
         </resources>
         <dependencies>
             <module name="javax.api"/>
             <module name="javax.transaction.api"/>
             <module name="javax.servlet.api" optional="true"/>
         </dependencies>
     </module> 
    ```

3.  `module.xml`进入与地点相同的目录`postgresql-9.1-902.jdbc4.jar`
4.  启动 JBoss AS
5.  `jboss-cli`通过运行打开`$JBOSS_HOME/bin/jboss-cli --connect`
6.  运行命令：

    ```
    /subsystem=datasources/jdbc-driver=postgresql-driver:add(driver-name=postgresql-driver, driver-class-name=org.postgresql.Driver, driver-module-name=org.postgresql) 
    ```

7.  现在创建任何所需的数据源等，`postgresql-driver`用作驱动程序名称。

`jboss-cli`您可以通过 web ui、使用`data-source create`命令（请参阅`data-source --help`、`data-source add --help`）或通过部署`-ds.xml`如下文件来创建数据源：

```
<?xml version="1.0" encoding="UTF-8"?>
<datasources>
  <datasource jndi-name="java:/datasources/some-ds" enabled="true" use-java-context="true"  
        pool-name="some-ds-pool">
    <connection-url>jdbc:postgresql:dbname</connection-url>
    <driver>postgresql-driver</driver>
    <security>
      <user-name>username</user-name>
      <password>password</password>
    </security>
  </datasource>
</datasources> 
```

# excel - Excel 打开不适用于给出“编译错误”的路透社模块

> ID：12403432
> 
> 赞同：0
> 
> 时间：2012-09-13T09:39:07.173
> 
> 标签：excel, excel-2007, office-2007

我有

**隐藏模块中的编译错误：wkbModel**

当我尝试打开 Excel 时（我正在运行带有 office 2007 的 win xp pro 2002 sp3）。

我试图禁用这些模块，发现导致问题的模块是路透社的*Power Plus Pro Excel v5.1*。当然禁用模块会使程序工作，但我需要启用这个模块。可能这个问题是由自动更新带来的，因为直到 2 周前，一切正常。

我需要找到一种方法让 excel 在保持 Reuters 模块打开的同时不会引发编译错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:35:23.633

我们发现这是由于办公室的更新。回滚，一切都很好。

# c# - 这个延迟加载缓存实现是线程安全的吗？

> ID：12403440
> 
> 赞同：0
> 
> 时间：2012-09-13T09:39:45.550
> 
> 标签：c#, .net

我正在使用 3.5 .NET Framework 进行开发，我需要在多线程场景中使用缓存，并为其项目提供延迟加载模式。在阅读了网络上的几篇文章后，我尝试编写自己的实现。

```
public class CacheItem
{
    public void ExpensiveLoad()
    {
        // some expensive code
    }
}
public class Cache
{
    static object SynchObj = new object();
    static Dictionary<string, CacheItem> Cache = new Dictionary<string, CacheItem>();
    static volatile List<string> CacheKeys = new List<string>();

    public CacheItem Get(string key)
    {
        List<string> keys = CacheKeys;
        if (!keys.Contains(key))
        {
            lock (SynchObj)
            {
                keys = CacheKeys;
                if (!keys.Contains(key))
                {
                    CacheItem item = new CacheItem();
                    item.ExpensiveLoad();
                    Cache.Add(key, item);
                    List<string> newKeys = new List<string>(CacheKeys);
                    newKeys.Add(key);
                    CacheKeys = newKeys;
                }
            }
        }
        return Cache[key];
    }
} 
```

如您所见，Cache 对象既使用存储真实键值对的字典，也使用仅复制键的列表。当线程调用 Get 方法时，它会读取静态共享密钥列表（声明为 volatile）并调用 Contains 方法以查看密钥是否已经存在，如果不存在，则在开始延迟加载之前使用双重检查锁定模式。在加载结束时，会创建一个新的密钥列表实例并将其存储在静态变量中。

显然，我处于重新创建整个键列表的成本与单个项目加载的成本几乎无关的情况。

我希望有人能告诉我它是否真的是线程安全的。当我说“线程安全”时，我的意思是每个读取器线程都可以避免损坏或脏读取，并且每个写入器线程只加载丢失的项目一次。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T14:26:09.683

这不是线程安全的，因为您在阅读字典时没有锁定。

有一个竞争条件，一个线程可以读取：

```
return Cache[key]; 
```

而另一个人在写：

```
_Cache.Add(key, item); 
```

作为状态的[MSDN 文档`Dictionary<TKey,TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)：`

> 要允许集合被多个线程访问以进行读写，您必须实现自己的同步。

并且您的同步不包括阅读器。

您确实需要使用线程安全字典，这将极大地简化您的代码（您根本不需要 List）

我建议获取 .NET 4 ConcurrentDictionary 的源代码。

获得正确的线程安全性很难，其他一些回答者错误地声明您的实现是线程安全的事实证明了这一点。因此，在自制之前，我会相信微软的实施。

如果您不想使用线程安全字典，那么我建议您使用一些简单的方法，例如：

```
public CacheItem Get(string key)
{
    lock (SynchObj)
    {
        CacheItem item;
        if (!Cache.TryGetValue(key, out item))
        {
            item = new CacheItem();
            item.ExpensiveLoad();
            Cache.Add(key, item);
        }
        return item;
    }
} 
```

您也可以尝试使用`ReaderWriterLockSlim`.

至于使用 ConcurrentDictionary 的实现，在大多数情况下，我会简单地使用类似的东西：

```
static ConcurrentDictionary<string, CacheItem> Cache = 
    new ConcurrentDictionary<string, CacheItem>(StringComparer.Ordinal);
...
CacheItem item = Cache.GetOrAdd(key, key => ExpensiveLoad(key)); 
```

这可能导致`ExpensiveLoad`每个键被多次调用，但我敢打赌，如果您分析您的应用程序，您会发现这非常罕见，以至于不是问题。

如果您真的坚持确保它只被调用一次，那么您可以掌握 .NET 4`Lazy<T>`实现并执行以下操作：

```
static ConcurrentDictionary<string, Lazy<CacheItem>> Cache = 
    new ConcurrentDictionary<string, Lazy<CacheItem>>(StringComparer.Ordinal);
...

CacheItem item = Cache.GetOrAdd(key, 
               new Lazy<CacheItem>(()=> ExpensiveLoad(key))
             ).Value; 
```

在这个版本中，`Lazy<CacheItem>`可能会创建多个实例，但实际上只有一个会存储在字典中。 对于存储在字典中的实例，将`ExpensiveLoad`在第一次被取消引用时被调用。`Lazy<CacheItem>.Value`此`Lazy<T>`构造函数使用 LazyThreadSafetyMode.ExecutionAndPublication，它在内部使用锁，因此确保只有一个线程调用工厂方法`ExpensiveLoad`。

顺便说一句，在使用字符串键构造任何字典时，我总是使用`IEqualityComparer<string>`参数（通常是 StringComparer.Ordinal 或 StringComparer.OrdinalIgnoreCase）来明确记录区分大小写的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:09:56.897

到目前为止，我看不到任何大问题。我在您的代码中唯一看不到的是您如何`CacheKeys`公开？最简单的是 as`IList<string>`由`ReadOnlyCollection`. 这样，您的消费者可以很容易地使用索引运算符或计数属性。在这种情况下，`volatile`也不需要关键字，因为您已经将所有内容都放入了锁中。所以我会按如下方式对你的班级进行拉皮条：

```
public class CacheItem
{
    public void ExpensiveLoad()
    {
        // some expensive code
    }
}
public class Cache
{
    private static object _SynchObj = new object();
    private static Dictionary<string, CacheItem> _Cache = new Dictionary<string, CacheItem>();
    private static ReadOnlyCollection<string> _CacheKeysReadOnly = new ReadOnlyCollection(new List<string>());

    public IList<string> CacheKeys
    {
        get
        {
            return _CacheKeysReadOnly;
        }
    }

    public CacheItem Get(string key)
    {
        CacheItem item = null;
        ReadOnlyCollection<string> keys = _CacheKeysReadOnly;
        if (!keys.Contains(key))
        {
            lock (_SynchObj)
            {
                keys = _CacheKeysReadOnly;
                if (!keys.Contains(key))
                {
                    item = new CacheItem();
                    item.ExpensiveLoad();
                    _Cache.Add(key, item);
                    List<string> newKeys = new List<string>(_CacheKeysReadOnly);
                    newKeys.Add(key);
                    _CacheKeysReadOnly = newKeys.AsReadOnly();
                }
            }
        }
        return item;
    }
} 
```

作为替代方案，如果您已经使用 .Net 4.5，您也可以考虑使用该属性的[`IReadOnlyList<T>`](http://msdn.microsoft.com/en-us/library/hh192385)接口。`CacheKeys`

# nosql - Cassandra 数据库设计

> ID：12403441
> 
> 赞同：3
> 
> 时间：2012-09-13T09:39:46.563
> 
> 标签：nosql, schema, cassandra

我来自 RDBMS 背景并设计了一个以 Cassandra 作为后端的应用程序，我不确定我的设计的有效性和可扩展性。

我正在开发某种书籍/电影/等的评级/反馈应用程序。由于 Cassandra 有灵活列族（稀疏结构）的概念，所以我想到了使用以下模式：

```
user-id (row key): book-id/movie-id (dynamic column name) - rating (column value) 
```

如果我这样做，我最终会拥有数百万列（这将是 RDBMS 中的行），尽管本质上与行键无关，例如：

```
user1: {book1:Rating-Ok; book1023:good; book982821:good}
user2: {book75:Ok;book1023:good;book44511:Awesome} 
```

由于所有列族都存储在一个文件中，因此我不确定这是否是可扩展的设计（或根本不是设计！）。此外，可能会有类似的查询`"pick all 'good' reviews of 'book125'"`。我应该使用什么方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:55:55.977

这种设计是完全可扩展的。Cassandra 以稀疏形式存储数据，因此空单元格不会占用磁盘空间。

缺点是 cassandra 在按值索引方面不是很好。有二级索引，但它们应该只用于索引一两列，而不是每一百万列。

有两个选项可以解决此问题：

*   物化视图（例如，在此处描述：http: [//maxgrinev.com/2010/07/12/do-you-really-need-sql-to-do-it-all-in-cassandra/](http://maxgrinev.com/2010/07/12/do-you-really-need-sql-to-do-it-all-in-cassandra/)）。这允许构建一些预定义的查询，可能是相当复杂的查询。
*   通过某种 map/reduce 作业可以进行临时查询，该作业有效地迭代整个数据集。这可能听起来很吓人，但它仍然非常快：Cassandra 将所有数据存储在 SSTables 中，并且这种迭代可能会实现以顺序扫描数据文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T03:48:38.997

从一组所需的查询开始，并构建您的列族以支持这些视图。尤其是在涉及的字段如此之少的情况下，每个 CF 都可以廉价地充当自己的数据索引视图。在获取期间，密钥将最终将数据分区到一个特定的 Cassandra 节点，该节点可以以预先确定的顺序将一组宽行快速流式传输到您的应用服务器。这发挥了 Cassandra 的优势之一，因为与在 RDBMS 表的索引搜索中围绕各种轨道和扇区反弹相比，物理介质上的读取碎片（未缓存时）非常低。

一种有用的方法是选择您的键来分割数据，以便对该段中的所有列进行全面扫描是一个合理的提议，并且非常适合您的查询。然后，您过滤不需要的内容，即使该过滤是在您的客户端（应用服务器）中执行的。电影的所有评论都是一个很好的例子。即使您过滤正面评论或仅提供最近的评论或摘要，您仍然可以合理地获取该键的所有行，然后丢弃您不需要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:45:44.503

另一种选择是，如果您可以弄清楚如何对数据进行分区（按时间、按类别），playOrm 提供了一种将 S-SQL 执行到非常快的分区的解决方案。它非常类似于 RDBMS，除了您对数据进行分区以保持可扩展性并且可以拥有任意数量的分区。分区可以包含数百万行（尽管在一个分区中我不会超过 1000 万行）。

后来，迪恩

# android - 在 Facebook 墙上发布图片（图片来自画廊）和链接（例如：http://www.google.com）

> ID：12403445
> 
> 赞同：1
> 
> 时间：2012-09-13T09:40:00.317
> 
> 标签：android, facebook, facebook-graph-api

这是我在项目中的要求，我必须在朋友墙上发布图片，图片来自图库并带有链接（例如：http://www.google.com）。当我单击图像时，它应该导航到链接。

当我提到 facebook GraphApi 主题“post”时，他们说图片值应该包含 URL 类型。但我的要求是图片应该来自画廊，它不包含 URL。

任何人都可以帮助实现这一目标

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:13:27.870

> 但我的要求是图像应该来自画廊，它不包含 URL。

不知道这应该是什么意思。

但也许您想发布一个指向特定 URL的*链接，该链接指向**显示*该图像的页面，并包含 Open Graph 元标记以告诉 Facebook 缩略图、描述等应该是什么。

[https://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)

[http://ogp.me/](http://ogp.me/)

# c++ - 重新定义为另一种符号

> ID：12403448
> 
> 赞同：8
> 
> 时间：2012-09-13T09:40:16.583
> 
> 标签：c++

我在我的 xcode ios 项目中创建了一个简单的 C++ 头文件，但出现错误“将 'foo' 重新定义为另一种符号”。

这是代码

```
class foo 
{
    public:
         char* getLabel(char* params);
}; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T09:47:55.277

好吧，错误消息是不言自明的，`foo`已经在同一个命名空间中定义，您正在尝试重新定义它。

“作为一种不同的符号”部分表明，现有`foo`是别的东西，而不是类定义。更改名称很可能会解决您的问题。另一种方法是将您的定义`foo`放入另一个名称空间。无论如何，我不建议您将某些东西命名为*真实*`foo`项目中的名称，无论它有多小；）

# php - Zend 文件元素的自定义装饰器

> ID：12403451
> 
> 赞同：1
> 
> 时间：2012-09-13T09:40:17.097
> 
> 标签：php, zend-framework, file-upload, zend-form, zend-decorators

我正在使用以下装饰器渲染 zend 文件元素。

```
$decoratorFile = array
    (
        'File',
        'Errors',
        array(array('data' => 'HtmlTag'), array('tag' => 'td', 'class'=>'elements')),
        array('Label', array('tag' => 'td')),       
        array(array('row' => 'HtmlTag'), array('tag' => 'tr'))
    ); 
```

但我想创建一个像下面这样的自定义装饰器......

```
class My_Decorator_Td extends Zend_Form_Decorator_Abstract
{
    public function buildLabel()
    {
        $element = $this->getElement();
        $label = $element->getLabel();
        if ($translator = $element->getTranslator()) {
            $label = $translator->translate($label);
        }
        if ($element->isRequired()) {
            $label .= '*';
        }
        $label .= '';
        return $element->getView()
                       ->formLabel($element->getName(), $label);
    }

    public function buildInput()
    {
        $element = $this->getElement();
        $helper  = $element->helper;
        return $element->getView()->$helper(
            $element->getName(),
            $element->getValue(),
            $element->getAttribs(),
            $element->options
        );
    }

    public function buildErrors()
    {
        $element  = $this->getElement();
        $messages = $element->getMessages();
        if (empty($messages)) {
            return '';
        }

        list($key, $error) = each($messages);
        return '<div class="errors">' .
               $error . '</div>';
    }

    public function buildDescription()
    {
        $element = $this->getElement();
        $desc    = $element->getDescription();
        if (empty($desc)) {
            return '';
        }
        return '<div class="description">' . $desc . '</div>';
    }

    public function render($content)
    {
        $element = $this->getElement();
        if (!$element instanceof Zend_Form_Element) {
            return $content;
        }
        if (null === $element->getView()) {
            return $content;
        }

        $separator = $this->getSeparator();
        $placement = $this->getPlacement();
        $label     = $this->buildLabel();
        $input     = $this->buildInput();
        $errors    = $this->buildErrors();
        $desc      = $this->buildDescription();

        $output = '<tr>'
            . '<td class="labels">'
                . $label
                . '</td>'
                . '<td class="elements">'
                . $input
                . $desc
                . $errors
                . '</td>'
                . '</tr>';

        switch ($placement) {
            case (self::PREPEND):
                return $output . $separator . $content;
            case (self::APPEND):
            default:
                return $content . $separator . $output;
        }
    }
} 
```

我将这个用于文本元素。

如何为文件元素创建自定义装饰器装饰器。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:10:52.267

您可以在[此处找到问题的答案](http://mwop.net/blog/217-Creating-composite-elements.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T13:49:14.737

我遇到了同样的问题，并提出了创建自定义装饰器的解决方案，该装饰器扩展了默认的 File 装饰器并覆盖了 render 方法以添加您的标记：

```
<?php

class My_Super_Custom_File_Decorator extends Zend_Form_Decorator_File
{
    public function render($content)
    {
        $element = $this->getElement();
        if (!$element instanceof Zend_Form_Element) {
            return $content;
        }

        $view = $element->getView();
        if (!$view instanceof Zend_View_Interface) {
            return $content;
        }

        $name      = $element->getName();
        $attribs   = $this->getAttribs();
        if (!array_key_exists('id', $attribs)) {
            $attribs['id'] = $name;
        }

        $separator = $this->getSeparator();
        $placement = $this->getPlacement();
        $markup    = array();
        $size      = $element->getMaxFileSize();
        if ($size > 0) {
            $element->setMaxFileSize(0);
            $markup[] = $view->formHidden('MAX_FILE_SIZE', $size);
        }

        if (Zend_File_Transfer_Adapter_Http::isApcAvailable()) {
            $markup[] = $view->formHidden(ini_get('apc.rfc1867_name'), uniqid(), array('id' => 'progress_key'));
        } else if (Zend_File_Transfer_Adapter_Http::isUploadProgressAvailable()) {
            $markup[] = $view->formHidden('UPLOAD_IDENTIFIER', uniqid(), array('id' => 'progress_key'));
        }

        if ($element->isArray()) {
            $name .= "[]";
            $count = $element->getMultiFile();
            for ($i = 0; $i < $count; ++$i) {
                $htmlAttribs        = $attribs;
                $htmlAttribs['id'] .= '-' . $i;
                $markup[] = $view->formFile($name, $htmlAttribs);
            }
        } else {
            $markup[] = $view->formFile($name, $attribs);
        }

        $markup = implode($separator, $markup);

        switch ($placement) {
            case self::PREPEND:
                return $markup . $separator . $content;
            case self::APPEND:
            default:
                return $content . $separator . '<div>My Super Custom Markup : '.$markup.'</div>';
        }
    }
} 
```

您应该遵循基础知识来创建自定义装饰器（prefixPath 等）并将新装饰器应用于文件元素而不是“文件”。

# c# - 在哪些情况下应该使用某些类型的 IoC 框架

> ID：12403452
> 
> 赞同：1
> 
> 时间：2012-09-13T09:40:22.137
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, ioc-container

我知道 .net 中有许多 IoC 框架（它们是：Ninject、Unity、Castle Windsor、Structure Map）它们也用于相同的目标 - 解决依赖关系。但我不明白在哪些情况下应该使用某些框架！它们几乎相似。谁能简单解释一下主要区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:09:54.073

这取决于您的需求。一些容器非常成熟或者有一个很大的社区。其他的功能丰富或非常快。这一切都取决于您需要什么，但问题是您只有在使用 DI 和 DI 容器完成一两个项目时才知道这一点。而且，当您的架构发生变化时，对容器的要求也会发生变化。

所以无论你选择什么容器，都要准备好改变你的容器。这意味着，坚持依赖注入模式并防止自己让应用程序代码直接依赖于容器（称为[服务定位器](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)的模式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:49:49.910

每一个都有[致命的缺陷](http://www.drdobbs.com/article/print?articleId=225701475&dept_url=/windows/)。

更严肃地说，它们肯定在本质上做同样的事情，但在实现细节、约定、性能、辅助功能和建议的用例上有所不同。

我不认为你真的应该为挑选IoC 容器*而费劲。*坚持使用您习惯的并继续使用您的核心功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T09:55:42.310

DI/IOC 或任何你想称它为目的的手段——而不是目的本身。找到一个你喜欢的，它可以满足你的一切需求并使用它（直到你被告知使用其他东西）。

我基于 StructureMap 推出了自己的产品，并且可能比实际使用任何其他产品学到的更多。

# javascript - 如何跨屏幕跟踪 jQuery 动画 div？

> ID：12403453
> 
> 赞同：6
> 
> 时间：2012-09-13T09:40:23.753
> 
> 标签：javascript, jquery

我正在使用[jQuery.crSpline](https://github.com/MmmCurry/jquery.crSpline)沿曲线路径为图形设置动画。我对结果很满意。

然而，完整的画布尺寸故意相当宽 - 肯定比大多数屏幕大 - 所以图形将很快耗尽视口空间并在屏幕上显示动画。

相反，我希望浏览器视口跟随或以图像为中心，以便它保持“在镜头中”。

我将如何使用 jQuery 来解决这个问题？scrollTop 是一个选项吗？

我创建了一个[jsFiddle 演示，](http://jsfiddle.net/gNdwD/)基于[crSpline 演示源](http://ijin.net/crSpline/demo.html)，但具有广泛的 minX 设置。

* * *

**注意**：我第一次尝试使用 YUI3 并且[Loktar](https://stackoverflow.com/users/322395/loktar)提供了一个基于画布的[解决方案](https://stackoverflow.com/questions/12392455/)，但是我不再使用 YUI 和画布了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:09:20.950

这是你的想法吗？[http://jsfiddle.net/gNdwD/33/](http://jsfiddle.net/gNdwD/33/)。这似乎有点波涛汹涌，但这是一个艰难的第一次尝试。

crSpline 似乎没有在动画元素上暴露任何坐标，因此我们必须定期观察它们并相应地调整视口：

```
setInterval(function() {

    var mover = $('#mover'),
        posX = mover.position().left,
        posY = mover.position().top;

    $(window)
        .scrollLeft(posX - $(window).width() / 2)
        .scrollTop(posY - $(window).height() / 2);
}, 10); 
```

我怀疑波动的发生是因为我们`setInterval`与移动者不同步`$.animate`。您可以通过运行两个动画来解决这个问题：一个在移动器上，一个在包装器 div 的 and 上`scrollTop`。[您可以像这样](https://stackoverflow.com/a/4719034/659910)`scrollLeft`同时应用两个`$.animate`s 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T09:34:16.723

jQuery animate 中有一个`step`函数选项，它在动画的每一步都运行。

在此处查看第二版函数参数：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

```
.animate( properties, options )

propertiesA map of CSS properties that the animation will move toward.

optionsA map of additional options to pass to the method. Supported keys:

duration: A string or number determining how long the animation will run.
easing: A string indicating which easing function to use for the transition.
complete: A function to call once the animation is complete.
step: A function to be called after each step of the animation.
queue: A Boolean indicating whether to place the animation in the effects queue. If false, the animation will begin immediately. As of jQuery 1.7, the queue option can also accept a string, in which case the animation is added to the queue represented by that string.
specialEasing: A map of one or more of the CSS properties defined by the properties argument and their corresponding easing functions (added 1.4). 
```

根据您的代码查看此小提琴，该代码调用`step`函数来调整视口：

[http://jsfiddle.net/gNdwD/35/](http://jsfiddle.net/gNdwD/35/)

```
$('<div id="mover" />')
        .appendTo($(document.body))
        .animate({ crSpline: spline },{
            duration: 20000,
            step: function() {       /* THE STEP FUNCTION TO ADJUST VIEWPORT */
              var mover = $('#mover'),               
              posX = mover.position().left;
              posY = mover.position().top;

              $(window)
              .scrollLeft(posX - $(window).width() / 2)
               .scrollTop(posY - $(window).height() / 2);
            } ,
            complete:function () {
                      // Re-run the demo with a new spline after we're done
                       window.setTimeout(function() {
                       DEMO.run();
                      }, 5000);
            }
        }); 
```

# php - 用户关闭浏览器时更新 MySQL 数据库

> ID：12403458
> 
> 赞同：4
> 
> 时间：2012-09-13T09:40:44.373
> 
> 标签：php, mysql

我正在为一家研究公司开发一个 Web 应用程序，其中一个要求是用户一次只能在一台设备上登录。

所以我开发了一个非常基本的系统，当你登录一些 PHP 时，将数据库中的用户行从 0 更新为 1，当你单击注销按钮时，它再次将该行从 1 更新为 0。

唯一的问题是，如果用户不使用注销按钮而只是关闭浏览器，它将结束会话并将它们注销，但它们在数据库中的行不会被更新。

有没有办法在浏览器关闭时更新数据库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T09:44:06.070

您可以使用 unload 事件向服务器发送 ajax 请求，该请求将更新 mysql 中的标志。您可以尝试以下 jquery 语法。

```
$(window).bind('unload', function(){
    $.ajax({
        type: 'get',
        async: false,
        url: 'path/to/file.php'
    });
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T09:44:55.183

没有可靠的方法。您可以在页面关闭时调用 javascript 函数，该函数又会向您的服务器发出请求，告诉它会话已完成，但同样：javascript 可能已关闭，甚至可能根本不执行。最好的办法是使用超时：存储最后一次操作的时间。如果超过 10 分钟前，“过期”会话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-06T05:34:36.063

这是浏览器关闭事件的简单解决方案。我遇到了“onunload”和“beforeonunload”事件的一些问题。它将在浏览器关闭、标签关闭、任何链接点击、URL 更改时触发。所以我像这样定制了我的代码。

```
 <script type="text/javascript">
        jQuery(document).ready(function() { 
          var validNavigation = false;

          // Attach the event keypress to exclude the F5 refresh
          $(document).bind('keypress', function(e) {
            if (e.keyCode == 116){
              validNavigation = true;
            }
          });

          // Attach the event click for all links in the page
          $("a").bind("click", function() {
            validNavigation = true;
          });

          // Attach the event submit for all forms in the page
          $("form").bind("submit", function() {
            validNavigation = true;
          });

          // Attach the event click for all inputs in the page
          $("input[type=submit]").bind("click", function() {
            validNavigation = true;
          }); 

          window.onbeforeunload = function() {                
              if (!validNavigation) {                            
                 var status = 'abandoned';
                    $.ajax({
                        type: "POST",
                        url: your action URL,
                        data: "status=" + status,
                        success: function(res) {
                        },
                    });
              }
          };
        }); 
    </script> 
```

# oop - 领域模型的几种实现

> ID：12403468
> 
> 赞同：0
> 
> 时间：2012-09-13T09:41:16.003
> 
> 标签：oop, architecture, osgi

对于一个高度模块化的应用程序（用 OSGi 实现），我们只使用一个模块用于域模型。接口的实现只是简单的 POJO，以获得最大的灵活性（依赖于域模块的其他模块不继承任何其他依赖项）。

所以你可以看到这样的环境：只有这些简单的域对象从一个模块传递到另一个模块。所以我们可以称它们为 POJO-DTO，对吗？DTO 对那里的数据存储一无所知。

使用这种架构，模块对该域模型的依赖性最小。模块可以很容易地独立开发。

我们面临的一个问题是模块可以使用与域模块相同的接口来实现自己的内部域。所以这两个实现需要从一侧复制到另一侧。这是一个容易出错的事情！

有没有人有一个好的技术/概念/库来复制/合并具有相同接口的两个实现？

谢谢！

# zend-framework2 - zf2中的Lucene搜索

> ID：12403475
> 
> 赞同：3
> 
> 时间：2012-09-13T09:41:49.297
> 
> 标签：zend-framework2, zend-search-lucene

Lucene Search 库是否已从 ZendFramework 2 中删除？[因为我在这里](https://github.com/zendframework/zf2/tree/master/library/Zend)找不到

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T18:59:54.403

**更新：**

它在这里有自己的仓库： [https ://github.com/zendframework/ZendSearch](https://github.com/zendframework/ZendSearch)

* * *

我找不到它。我想知道它是否可以与以前版本的库互操作。我还注意到它存在于 1.9 中，但我没有看到 1.9 可供下载。

这里的 2.0 分支正在进行工作： [https](https://github.com/Maks3w/zf2/commit/9796a6ff1f4fe71048b4f083f7ec746f4442e7dd) ://github.com/Maks3w/zf2/commit/9796a6ff1f4fe71048b4f083f7ec746f4442e7dd 这指的是 Lucene 更改： http: [//framework.zend.com/wiki/display/ZFDEV2/BC+休息](http://framework.zend.com/wiki/display/ZFDEV2/BC+Breaks)

更多工作在这里： [https ://github.com/zendframework/zf2/pull/40/commits](https://github.com/zendframework/zf2/pull/40/commits)

在这里看不到：http: [//modules.zendframework.com/](http://modules.zendframework.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:03:26.280

看起来他们已将其作为可选组件。它现在存在于自己的仓库中：[https ://github.com/zendframework/ZendSearch](https://github.com/zendframework/ZendSearch)

# upload - 在 sourceforge 上设置对项目目录的访问权限

> ID：12403476
> 
> 赞同：0
> 
> 时间：2012-09-13T09:41:51.913
> 
> 标签：upload, sourceforge, rights

假设我是 sf.net 上某个项目的管理员。我想添加一个新用户作为项目的成员，并授予他在某个目录中创建文件的权限。我添加了一个用户作为项目的成员，但它无法创建/删除文件/目录。

如果有人有类似问题的经验，请提示我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:25:32.280

您最好的选择是在 irc.freenode.net 上的 #sourceforge 上提出这个问题，或者在[https://sourceforge.net/p/forge/site-support/new/](https://sourceforge.net/p/forge/site-support/new/)上创建支持票，或向支持人员发送电子邮件至sfnet_ops@geek.net

您所描述的不应该发生，因此您需要将其报告为问题。但是，应用必要的权限*可能*只需要一点时间，因此这可能取决于两个事件的接近程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:30:08.807

假设您使用的是 SourceForge 的最新平台，即 Allura，以下是您可以尝试的步骤。

1) 登录 SF
2) 点击 Admin 标签
3) 点击 User Permissions

您应该能够添加用户、创建组和管理组的权限。

# jetty - 分离码头和应用程序日志文件

> ID：12403478
> 
> 赞同：0
> 
> 时间：2012-09-13T09:41:51.987
> 
> 标签：jetty, slf4j, java.util.logging

我将 slf4j 与 Java Util Logging 一起使用，我的应用程序日志是通过 Jetty 定向的。

1.  如何获得 Jetty 启动日志和我的应用程序日志的单独输出。现在，他们都登录到`jetty/logs`.
2.  如何控制 Jetty 启动日志格式？例如，我想在 Jetty 日志中将日期格式从默认的“2012-09-13 14:55:36.178:INFO...”更改为“2012 年 9 月 13 日 14:55:36.178:INFO...”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:43:02.923

您可以查看此页面以获取灵感：

[http://wiki.eclipse.org/Jetty/Tutorial/Sifting_Logs_with_Logback](http://wiki.eclipse.org/Jetty/Tutorial/Sifting_Logs_with_Logback)

长话短说，一旦你有了 slf4j-api，jetty 就会将日志记录到它上面，这样你就可以通过 slf4j 配置机制来配置你想要的任何东西。

# javascript - JavaScript 循环无法正确计算/显示结果

> ID：12403480
> 
> 赞同：0
> 
> 时间：2012-09-13T09:42:03.690
> 
> 标签：javascript, json, jquery

```
$(document).ready(function () {

    //$('#customer_info #next_step').click(function() {

    $.getJSON("order/summary_process2.php?jsoncallback=?", function (data) {

        //loop through all items in the JSON array
        for (var x = 0; x < data.length; x++) {

            //create a container for each comment
            var div = $("<tr>").addClass("row").appendTo("#row");

            //add author name and comment to container
            $("<td>").addClass("space").text(data[x].item_name).appendTo(div);
            $("<td>").addClass("space").text(data[x].price).appendTo(div);
            $("<td>").addClass("space").text(data[x].qty).appendTo(div);
            $("<td>").addClass("space").text(data[x].tot_price).appendTo(div);
            //$("<div>").addClass("comment").text(data[x].comment).appendTo(div);

        }

        for (var i = 0; i < data.length; i++) {
            var total = 0;
            total = data[i].tot_price + total;
        }
        $("#total").html(total);

    });
});
//});
}); 
```

我正在使用`JSON`，但我想添加总价。

不幸的是，结果是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:44:39.617

退出`var total = 0`循环。您在每次迭代时都重置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:44:46.940

变量的范围`total`仅限于`for`循环，因此它将`undefined`超出此范围。而是在循环*之前*对其进行初始化：

```
var total = 0;
for (var i=0; i < data.length; i++)
{
  total = parseInt(data[i].tot_price, 10) + total;
} 
```

另外，根据您的评论，我假设您正在处理字符串，因此您需要`parseInt`在添加到总数之前使用来解析它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:46:06.783

您应该在 for 循环范围之外声明您的总变量。在 for 循环范围内，它总是在每次迭代中将总重新分配为 0。

改变这个

```
for (var i=0; i < data.length; i++)
{
   var total = 0;
   total = data[i].tot_price + total;
}
$("#total").html(total); 
```

至

```
var total = 0;
for (var i=0; i < data.length; i++)
{
    total += Number(data[i].tot_price);
}
$("#total").html(total); 
```

# android - GLThread 和 HeapWorker 之间的并发问题

> ID：12403483
> 
> 赞同：0
> 
> 时间：2012-09-13T09:42:13.793
> 
> 标签：android, opengl-es, garbage-collection, android-ndk, swig

我的问题涉及在 Android 操作系统中使用通过 Swig 向 Java 公开的本机 NDK 库。

本机库是一个 OpenGLES 引擎。在应用程序的生命周期中，java 代码可能会创建本地类的实例，我们将使用这些实例来提供引擎。困扰我的是这些类可能会在 Java 端收集垃圾。在这种情况下，主引擎线程（GLThread）之外的另一个线程（HeapWorker）将通过 swig 生成的 finalize 方法删除对象。这会导致本机引擎中的一些并发问题，其中对象可以在 HeapWorker 线程删除期间使用。

是否有可能：

1 - 以某种方式自定义垃圾收集器，使其与 GLThread 同步？

2 - 运行终结器 GLThread ？

3 - 在垃圾收集期间锁定 GLThread 吗？

谢谢你的帮助。

# c# - 匹配大量字符串/短语

> ID：12403484
> 
> 赞同：1
> 
> 时间：2012-09-13T09:42:17.273
> 
> 标签：c#, regex, string

我需要实现一个过程，其中上传大约 50/150kb 的文本文件，并与大量短语（~10k）进行匹配。

我需要知道哪些短语特别匹配。

一个短语可以是“blah blah blah”或只是“blah”——这意味着我需要考虑单词边界，因为我不希望包含中缀匹配。

我的第一次尝试是创建一个大的预编译正则表达式列表，看起来像`@"\b{0}\b"`（因为 10k 短语是恒定的 - 我可以缓存并针对多个文档重复使用这个相同的列表）；

在我全新且速度非常快的 PC 上 - 此匹配需要 10 秒以上，我希望能够减少很多。

任何关于我如何能够实现这一目标的建议将不胜感激！

干杯，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:46:04.400

您可以使用 Lucene.Net

这将为您的文本创建索引，以便您可以对其进行非常快速的查询。这是一个“全文索引”。

这篇文章解释了它的全部内容：

[Lucene.net](http://www.codeproject.com/Articles/29755/Introducing-Lucene-Net)

这个库最初是用java（Lucene）编写的，但是有一个.NET（lucene.net）的端口。

选择词干分析器时必须特别小心。词干分析器获取单词的“词根”，以便可以匹配几个相似的单词（即 book 和 books 将匹配）。如果您需要完全匹配，那么您应该采用（或实施）一个词干分析器，它可以不加更改地返回原始单词。

必须使用相同的词干分析器来创建索引和搜索结果。

您还必须看一下语法，因为它太强大了，并且允许部分匹配、完全匹配等等。

你也可以看看[这个博客](http://weblogs.asp.net/gunnarpeipman/archive/2011/09/02/using-lucene-net-search-engine-library-in-net-applications.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:20:37.257

您可以使用 Lucene.NET 和[Shingle 过滤器](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/shingle/ShingleFilter.html%20ShingleFilter)，只要您不介意限制短语可能包含的单词数量。

```
public class MyAnalyzer : Analyzer
{
    public override TokenStream TokenStream(string fieldName, TextReader reader)
    {       
        return new ShingleFilter(new LowerCaseFilter(new StandardTokenizer(Lucene.Net.Util.Version.LUCENE_29, reader)), 6);
    }
} 
```

您可以使用此实用程序方法运行分析器。

```
public static IEnumerable<string> GetTerms(Analyzer analyzer, string keywords)
{
    var tokenStream = analyzer.TokenStream("content", new StringReader(keywords));
    var termAttribute = tokenStream.AddAttribute<ITermAttribute>();

    var terms = new HashSet<string>();

    while (tokenStream.IncrementToken())
    {
        var term = termAttribute.Term;
        if (!terms.Contains(term))
        {
            terms.Add(term);
        }
    }

    return terms;
} 
```

一旦您检索到所有术语，请与您的单词列表相交。

```
var matchingShingles = GetTerms(new MyAnalyzer(), "Here's my stuff I want to match");

var matchingPhrases = phrasesToMatch.Intersect(matchingShingles, StringComparer.OrdinalIgnoreCase); 
```

我想你会发现这种方法比正则表达式匹配要快得多，并且尊重单词边界。

# macos - Elasticsearch OS X：无法初始化类 org.elasticsearch.common.xcontent.XContentFactory

> ID：12403489
> 
> 赞同：3
> 
> 时间：2012-09-13T09:42:26.177
> 
> 标签：macos, elasticsearch, homebrew

在 Rails 中使用 ElasticSearch。(0.19.1)

突然重新启动我的Mac后，它不会再启动了。不确定我通过自制软件安装了什么变化（最近更新了 Java），然后重新安装了同样的问题。

当我尝试开始时：

```
elasticsearch -f -D es.config=/usr/local/Cellar/elasticsearch/0.19.1/config/elasticsearch.yml 
```

我明白了：

```
[2012-09-13 10:33:38,865][INFO ][node                     ] [Ulysses] {0.19.1}[3944]: initializing ...
[2012-09-13 10:33:38,873][INFO ][plugins                  ] [Ulysses] loaded [], sites []
[2012-09-13 10:33:40,381][ERROR][bootstrap                ] {0.19.1}: Initialization Failed ...
1) NoClassDefFoundError[Could not initialize class org.elasticsearch.common.xcontent.XContentFactory]2) StackOverflowError[null] 
```

在这个错误上找不到太多，现在真的卡住了......非常感谢任何提示！谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T11:52:49.370

您可以尝试使用较新版本的 elasticsearch，它应该固定在那里（自制软件应该有 0.19.9）。或者，修复很简单，需要将`elasticsearch.in.sh`文件中的 this line:`JAVA_OPTS="$JAVA_OPTS -Xss128k"`更改为 this: `JAVA_OPTS="$JAVA_OPTS -Xss256k"`。

# firefox - 在 Firefox 扩展安装上执行回调

> ID：12403490
> 
> 赞同：1
> 
> 时间：2012-09-13T09:42:35.473
> 
> 标签：firefox, firefox-addon

我想为我的用户提供一个使用 InstallTrigger.install 安装 Firefox 扩展的链接。这需要一个以 url 作为参数的 Javascript 对象和一个在浏览器处理操作后执行的可选回调。

根据[MDN 文档](https://developer.mozilla.org/en-US/docs/XPInstall_API_Reference/InstallTrigger_Object/Methods/install)，此回调仅在用户将我的网站列入白名单时执行。在 99% 的情况下，情况并非如此。

是否有另一种方法来执行回调？主要重点是在安装失败或取消时向用户提供合理的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:55:40.323

Firefox 根本无法知道安装是否被取消。通常，当您尝试从第三方站点安装时，Firefox 会向您显示消息：“Firefox 阻止此站点要求您在计算机上安装软件。” 现在用户可以点击“允许”，他可以关闭消息，但他也不必这样做。他还可以单击 Alt-Left 转到上一页 - 通知将保留，安装仍可开始，但您的网页（和任何回调）将消失。即使用户只是简单地忽略了消息：扩展安装图标仍保留在 URL 栏中，并且可以随时恢复通知。

因此，无论您的网站需要做什么：只要去做，不要等待用户做出决定。如果您想解释拒绝安装的后果 - 请解释它们。如果您想展示安装扩展的替代方法 - 展示它们。但是不要指望如果用户不想安装您的扩展程序，您将获得第二次机会。

# android - AndEngine for OpenGL 用于动态壁纸？

> ID：12403492
> 
> 赞同：0
> 
> 时间：2012-09-13T09:42:43.257
> 
> 标签：android, andengine, live-wallpaper

我正在考虑将 OpenGL 用于我正在创建的动态壁纸。但我想知道我是否应该使用像 AndEngine 这样的物理引擎。由于我有一点 3d 动画（如立方体和图像翻转），我应该使用 AndEngine 吗？我不确定它有什么能力。

# java - 运行 TrueZip 的异常

> ID：12403496
> 
> 赞同：1
> 
> 时间：2012-09-13T09:42:48.603
> 
> 标签：java, truezip

我运行一个简单的 TrueZip 代码：

```
 TFile src = new TFile(path + file_to_add);  
        TFile dst = new TFile(path + outZipFile);  
        src.cp_rp(dst); 
```

当我运行程序时，编译器会抛出（在第一行）：

```
java.lang.NoClassDefFoundError: de/schlichtherle/truezip/fs/FsSyncOption 
```

我有 truezip-file-7.4.3.jar 和 truezip-file-7.4.3-sources.jar 文件。

我是否缺少罐子或问题可能是其他问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T00:58:51.097

根据 Maven POM添加**truezip-driver-file.jar** & **truezip-kernel.jar 。**

# java - maven错误：包org.junit不存在

> ID：12403497
> 
> 赞同：85
> 
> 时间：2012-09-13T09:42:48.273
> 
> 标签：java, maven-3, junit4

我正在尝试使用 maven 创建 javadoc，但它失败了。进行验证时也会失败。

```
mvn verify 
```

我收到以下错误：

```
(...)
    [INFO] -------------------------------------------------------------
    [ERROR] COMPILATION ERROR : 
    [INFO] -------------------------------------------------------------
    [ERROR] /home/miquel/creaveu/createOmegaMatrix/src/main/java/edu/url/salle/gtm/hnm/dataStructures/HFrame.java:[6,23]
package org.junit does not exist
    [ERROR] /home/miquel/creaveu/createOmegaMatrix/src/main/java/edu/url/salle/gtm/hnm/dataStructures/HFrame.java:[6,0]
static import only from classes and interfaces
    (···) 
```

在我的 pom.xml 文件中，我有以下几行：

```
<dependency>
  <groupId>org.junit</groupId>
  <artifactId>junit</artifactId>
  <version>4.8.2</version>
  <scope>test</scope>
</dependency> 
```

我的本地存储库包含 junit jar 文件：

```
miquel@ubuntu:~/creaveu/createOmegaMatrix$ ls -l /home/miquel/.m2/repository/org/junit/junit/4.8.2/
total 248
**-rw-r--r-- 1 miquel miquel 237344 2012-09-13 11:01 junit-4.8.2.jar**
-rw-r--r-- 1 miquel miquel    236 2012-09-13 11:13 junit-4.8.2-javadoc.jar.lastUpdated
-rw-r--r-- 1 miquel miquel      0 2012-09-13 11:13 junit-4.8.2-javadoc.jar-not-available
-rw-r--r-- 1 miquel miquel    458 2012-09-12 18:35 junit-4.8.2.pom
-rw-r--r-- 1 miquel miquel    236 2012-09-13 11:13 junit-4.8.2-sources.jar.lastUpdated
-rw-r--r-- 1 miquel miquel      0 2012-09-13 11:13 junit-4.8.2-sources.jar-not-available
-rw-r--r-- 1 miquel miquel    163 2012-09-13 11:22 _maven.repositories
miquel@ubuntu:~/creaveu/createOmegaMatrix$ 
```

代码很好，因为在我现在无法访问的笔记本电脑中，我运行：

```
mvn javadoc:javadoc
mvn verify 
```

没有问题，并且测试也可以在 Eclipse IDE 中运行。

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-09-13T09:46:16.760

好的，你已经声明了只`junit`对类的依赖`test`（那些在`src/test/java`但你试图在`main`类中使用它（那些在 中`src/main/java`）。

要么不要在主类中使用它，要么删除`<scope>test</scope>`.

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-29T01:03:02.713

我通过插入以下代码行来修复此错误：

```
<dependency>
  <groupId>junit</groupId>     <!-- NOT org.junit here -->
  <artifactId>junit-dep</artifactId>
  <version>4.8.2</version>
  <scope>test</scope>
</dependency> 
```

进入 <dependencies> 节点。

更多细节参考： http: [//mvnrepository.com/artifact/junit/junit-dep/4.8.2](http://mvnrepository.com/artifact/junit/junit-dep/4.8.2)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-07-04T06:49:53.447

如果您使用的是 Eclipse，请注意您的 POM 依赖项和 Eclipse buildpath 对 junit 的依赖项

如果您选择使用 Junit4 eclipse 创建 TestCase 使用 org.junit 包，但您的 POM 默认使用 Junit3（junit.framework 包），这就是原因，如下图所示：

![见 JUNIT 冲突](../Images/44c240c36444682b57034e0dd259d537.png)

只需将 POM 文件中的 Junit 依赖项更新为 Junit4 或将 Eclipse BuildPath 更新为 Junit3

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-01-24T09:37:38.430

就我而言，罪魁祸首是没有区分 pom.xml 中的主要和测试源文件夹（由 eclipse maven 项目生成）

```
<build>
    <sourceDirectory>src</sourceDirectory>
    ....
</build> 
```

如果您在 pom 文件中覆盖默认源文件夹设置，则必须显式设置主要和测试源文件夹！！！！

```
<build>
    <sourceDirectory>src/main/java</sourceDirectory>
    <testSourceDirectory>src/test/java</testSourceDirectory>
    ....
</build> 
```

# php - JPEG 质量排名

> ID：12403507
> 
> 赞同：-1
> 
> 时间：2012-09-13T09:43:16.660
> 
> 标签：php, jpeg

我必须检查几个 JPEG 文件的质量级别，并给每个文件相应的质量标记。那么我必须能够通过这个标记选择更好的图像。

如何决定视觉图像质量？

我正在处理照片。图像尺寸甚至压缩比都不能代表图像的视觉质量。例如，如果您放大图像并以更高的质量保存它，则视觉质量会降低......

代码在 PHP 中。

任何建议将非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:01:04.937

如果您可以访问原始图像，那么 SSIM 是执行此操作的更好方法之一。在纯 PHP 中执行会很慢，但是如果您可以执行 shell 命令，请检查[DSSIM 工具](https://github.com/pornel/dssim)（您需要对其进行调整以加载 JPEG 而不是 PNG）。

ImageMagick 具有`compare`可以返回图像的均方误差/PSNR（与原始图像相比）的命令，但这些测量仅检查每个像素的差异，因此它们是测量由 JPEG 压缩的块状和振铃引起的失真的糟糕方法。

# ruby-on-rails - 如何在 application.html.erb 以外的视图中添加垂直导航或侧边栏并使其可用于某些视图，Ruby on Rails？

> ID：12403509
> 
> 赞同：0
> 
> 时间：2012-09-13T09:43:20.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, layout, twitter-bootstrap

我的选项卡视图如下所示（请记住，这不是 application.html.erb 的一部分，因为我需要这些选项卡仅对某些特定页面可用）：

```
<div>
<div class="tabbable tabs-left">
<ul class="nav nav-tabs nav-stacked">
    <li class="active">
        <a href="settings_mail">Mail Settings</a>
    </li>
    <li>
        <a href="settings_text">Text Settings</a>
    </li>
</ul>   
</div> 
```

但是，单击上述任何选项卡时，垂直选项卡会消失并转到相应的视图。我想保留它导航到的每个页面中的选项卡，欢迎任何指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:49:14.923

使用类似的东西怎么样

```
layout "other_layout" 
```

在相关的控制器中？就像在[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)中解释的那样，“2.2.12.1 为控制器指定布局”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:13:34.183

您可以在布局中使用 yield :tag 并使用

```
content_for :tag do
  "your tabs"
end 
```

在您想要标签的视图中，不要将 content_for 方法放在您不想要这些标签的视图中。

# perl - Perl：多维哈希

> ID：12403510
> 
> 赞同：2
> 
> 时间：2012-09-13T09:43:27.627
> 
> 标签：perl, hash, multidimensional-array

假设我有以下数据

**集群1：d（A），f（C）s，（A）**

**集群2：r（D），h（D），f（A）**

我想要这个

输出：

```
 cluster1:A->2
   cluster1:C->1
   cluster2:D->2
   cluster2:A->1 
```

这是我的尝试，但它不正确，我试图计算字符的部分有一个问题，我无法修复代码是非常大的代码的一部分，我想要多维哈希

```
use strict;
use Data::Dumper;
 my %count;
while (<DATA>) {
    my %HoH;
    my ( $cluster, $ch ) = split (/:/,$_);
    $HoH{$cluster}={split /[()]+/,$ch}; 
    for my $clust ( keys %HoH ) {
        for my $character ( keys %{ $HoH{$clust} } ) {
            $count{$clust}{$HoH{$clust}{$character}}++;
     }
    }
}
print Dumper(\%count);
foreach my $name (sort keys %count) {
    foreach my $subject (keys %{$count{$name}}) {
        print "$name:$subject->$count{$name}{$subject}\n";
    }
} 
```

**数据**

集群1：d（A），f（C）s，（A）

集群2：r（D），h（D），f（A）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:07:30.500

你期望`$count{$cluster}{$characters}+=1;`做什么？`%count`如果您希望获得所需的结果，则必须遍历输入数据以进行填充：

```
while (<DATA>) {
    next unless /^(cluster\d+):(.+)/;
    $count{$1}{$_}++ for split/,/, $2;
} 
```

如果您还添加`sort`到第二个`foreach`，您将获得所需的输出。

**编辑：**这解决了更新输入和要求的问题：

```
my %count;

while (<DATA>) {
    next unless /^(cluster\d+):(.+)/;
    my $cluster = $1;
    $count{$cluster}{$_}++ for $2 =~ /\((\w)\)/g;
}

for my $key (sort keys %count) {
    for my $value (sort {
        $count{$key}{$b} <=> $count{$key}{$a}
                   } keys %{$count{$key}}) {
        print "$key:$value->$count{$key}{$value}\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:50:45.417

如果您尝试理解以下代码，这样您就可以了解解决问题的想法，那就太好了：-

```
 use strict;
    use Data::Dumper;

    my $data = "cluster1:A,B,C,A";
    my %cluster = ();

    my ($cluster_key, $cluster_val ) = split (':', $data);
    my @cluster1_data = split(',', $cluster_val);

    foreach my $val ( @cluster1_data ) {
    $cluster{$cluster_key}{$val}++;
    }
    print Dumper(\%cluster);

    foreach my $clus ( keys %cluster ) {
    my $clus_ref = $cluster{$clus};
        foreach my $clu ( keys %{ $clus_ref } ){
          my $count = $clus_ref->{$clu};
          print"$clus:$clu->$count\n";
        }
    } 
```

输出：

```
$VAR1 = {
          'cluster1' => {
                          'A' => 2,
                          'C' => 1,
                          'B' => 1
                        }
        };

cluster1:A->2
cluster1:C->1
cluster1:B->1 
```

# java - 使用 Colt 的逐元素稀疏矩阵乘法

> ID：12403513
> 
> 赞同：1
> 
> 时间：2012-09-13T09:43:50.610
> 
> 标签：java, matrix, sparse-matrix, colt

我在这里做错了什么？我想使用 Colt 将两个稀疏矩阵按元素相乘。这是我尝试执行此操作的示例：

```
DoubleMatrix2D A = new SparseDoubleMatrix2D(2, 2);
A.set(0, 0, 2.0);

DoubleMatrix2D B = new SparseDoubleMatrix2D(2, 2);
B.set(0, 0, 3.0);

A.assign(B, Functions.mult); 
```

我得到的不是左上角元素为 6 的矩阵的预期结果，而是：

```
2 x 2 matrix
18 0
0 0 
```

将 A 更改为 DenseDoubleMatrix2D 会产生正确的结果。将 B 更改为 DenseDoubleMatrix2D 不会更改结果。无论我使用的是 SparseDoubleMatrix1D 还是 DenseDoubleMatrix1D，以这种方式将两个向量逐元素相乘总是会产生正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:43:46.363

"assign" 改变了对象，所以你可能已经使用了两次。
例如，请参阅以下`Parallel Colt 0.10.0`与 Scala REPL 一起使用的代码。

```
scala> import cern.colt.matrix.tdouble._
import cern.colt.matrix.tdouble._

scala> import cern.jet.math.tdouble.DoubleFunctions
import cern.jet.math.tdouble.DoubleFunctions

scala> val A = new SparseDoubleMatrix2D(2, 2);
A: cern.colt.matrix.tdouble.impl.SparseDoubleMatrix2D = 
2 x 2 sparse matrix, nnz = 0

scala> A.set(0, 0, 2.0)

scala> val B = new SparseDoubleMatrix2D(2, 2);
B: cern.colt.matrix.tdouble.impl.SparseDoubleMatrix2D = 
2 x 2 sparse matrix, nnz = 0

scala> B.set(0, 0, 3.0)

scala> A.assign(B, DoubleFunctions.mult)
res11: cern.colt.matrix.tdouble.DoubleMatrix2D = 
2 x 2 sparse matrix, nnz = 1
(0,0)   6.0

scala> A.assign(B, DoubleFunctions.mult)
res12: cern.colt.matrix.tdouble.DoubleMatrix2D = 
2 x 2 sparse matrix, nnz = 1
(0,0)   18.0

scala> A.assign(B, DoubleFunctions.mult)
res13: cern.colt.matrix.tdouble.DoubleMatrix2D = 
2 x 2 sparse matrix, nnz = 1
(0,0)   54.0 
```

或者，它可能是您使用的 Colt 不同版本中的错误。

# facebook-graph-api - 我们可以让人们谈论这个帖子吗？

> ID：12403519
> 
> 赞同：0
> 
> 时间：2012-09-13T09:44:09.240
> 
> 标签：facebook-graph-api, statistics, facebook-page, facebook-insights

有没有办法获得Facebook 页面上**特定帖子**的“人们谈论这个”统计数据？Insights API 并没有说这是可能的。（ post_storytellers 不存在）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:15:28.893

“人们谈论这个”将各种互动聚合成一个单一的指标，包括：

*   喜欢一个页面
*   发布到页面的墙上
*   点赞、评论或分享主页帖子（或主页上的其他内容，例如照片、视频或相册）
*   回答发布的问题
*   回复活动
*   在帖子中提及主页
*   为页面添加照片
*   喜欢或分享签到交易
*   或在某个地方签到。

据我所知，如果不直接抓取页面，就无法使用图形 api 检索此值。

但是，您可以通过 FQL 检索作为共享、喜欢、评论聚合的 url 的 total_count，例如：[https ://graph.facebook.com/fql?q=SELECT%20total_count%20FROM%20link_stat%20WHERE%20url ='https://www.stackoverflow.com'](https://developers.facebook.com/docs/reference/fql/link_stat "例如")

更多信息：[https ://developers.facebook.com/docs/reference/fql/link_stat](https://developers.facebook.com/docs/reference/fql/link_stat)

# c# - Metro 应用程序中的最大线程数

> ID：12403521
> 
> 赞同：3
> 
> 时间：2012-09-13T09:44:20.660
> 
> 标签：c#, windows-8, microsoft-metro

您可以在 Windows 8 Metro UI 的 C# 应用程序中创建的最大线程数是多少？当你达到这个限制时会发生什么？是否抛出了某种异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T09:50:40.457

线程是非常昂贵的对象。你应该专注于尽可能少地创造。

> 当你达到这个限制时会发生什么？

在达到此限制之前，您的 PC 会很长时间地变慢。

> 是否抛出了某种异常？

OOM 是最有可能的，除非用户首先将 PC 扔出窗外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:59:38.100

我认为没有限制。最大线程数由可用资源量决定。

而且，正如 Henk 所说，如果您需要询问最大线程数是多少，您可能做错了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:00:19.107

在创建单个线程之前，先问问自己是否可以使用线程[池](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)。

# iphone - MapView 注释查看无需单击

> ID：12403526
> 
> 赞同：0
> 
> 时间：2012-09-13T09:44:43.903
> 
> 标签：iphone, mkmapview, mkannotationview, mapkit

在我的应用程序中显示两个城市之间的多个注释但是当我们将一个注释移动到另一个（在下一个上一个按钮上设置地图区域）时，如何在不点击的情况下自动显示注释细节？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:18:50.813

您可以使用注释的标题进行测试，如果它可以使用，您可以使用

```
selectAnnotation: animated: 
```

显示注释（您可以子类化 MKAnnotation 并为 test 添加一个 id 而不是 title ）：

```
for (id<MKAnnotation> annotation in mapView.annotations) 
{   
    if( [annotation.title isEqualToString:title]) [mapView selectAnnotation:annotation animated:YES];
 } 
```

# .net - Linq 表达式访问者将成员比较扩展为多个成员比较

> ID：12403528
> 
> 赞同：2
> 
> 时间：2012-09-13T09:44:48.560
> 
> 标签：.net, linq, lambda

抱歉，如果标题有点不清楚，但我不完全确定正确的术语是什么。

我编写了一个自定义 LINQ 提供程序来针对基于 lambda 的搜索提供程序生成查询字符串。只要有 1:1 的属性：字段映射，它就可以正常工作。但是，我现在被要求修改它，以便在引用某些属性时，它会生成一个`OR`并检查多个字段。

所以现在应该生成而不是`function(x) x.CreatedDate = #1 Jan 2012#`生成`("CreatedDate" : "1 Jan 2012")``(("CreatedDate" : "1 Jan 2012" OR "CreatedOn" : "1 Jan 2012"))`

我已经注释了我的实体，因此我可以确定要检查哪些备用字段：

```
Public Class MyEntity
    <AlsoKnownAs("CreatedOn")>
    Public Property CreatedDate as Date
End Class 
```

但我苦苦挣扎的地方是如何修改我的表达式访问者，以便它生成正确的术语。目前我这样做...

```
Protected Overrides Function VisitMember(m As MemberExpression) As Expression
    If m.Expression IsNot Nothing AndAlso m.Expression.NodeType = ExpressionType.Parameter Then
        sb.Append("""")
        sb.Append(m.Member.Name)
        sb.Append("""")
        Return m
    End If
    Throw New NotSupportedException(String.Format("The member '{0}' is not supported", m.Member.Name))
End Function 
```

此时我可以检测到自定义属性，但我现在只需要评估单个成员，而不是表达式，我实际上需要多次复制父节点（等于）。

我应该如何处理这个？

要提供更多代码，这是我的

```
Protected Overrides Function VisitBinary(b As BinaryExpression) As Expression
    Select Case b.NodeType
            ....
        Case ExpressionType.Equal
            If b.Left.NodeType = ExpressionType.Call AndAlso
                DirectCast(b.Left, MethodCallExpression).Method.DeclaringType = GetType(Microsoft.VisualBasic.CompilerServices.Operators) AndAlso
                DirectCast(b.Left, MethodCallExpression).Method.Name = "CompareString" Then
                'Cope with the the VB Pain-In-The-Ass string comparison handling
                Me.Visit(b.Left)
            Else
                'Carry on
                Me.Visit(b.Left)
                sb.Append(" : ")
                Me.Visit(b.Right)
            End If
            Exit Select 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:13:15.273

在我看来，您需要修改受此影响的表达式访问者的代码（我假设那些评估为 bool 的访问者）：

*   `VisitBinaryExpression``Expression`什么时候`Expression.Equal`
*   当您的字段被评估为 bool 时，您可以替换`fieldname`OR `fieldname2' （我不知道您的解决方案的细节）。

从您发布的代码中，我可以执行以下操作： * 对于 VB 比较情况，我将创建新的表达式，并与另一个处理别名的访问者一起访问它：

```
expr = Expression.Equal(left, right) // left and right I would fetch from MethodCallExpression Arguments property
VisitEqual(expr) 
```

然后`VisitEqual`应该只基于别名构建 OR 表达式。

# android - 如何在以编程方式安装android中的应用程序后检测用户是否单击完成或打开

> ID：12403535
> 
> 赞同：1
> 
> 时间：2012-09-13T09:45:10.730
> 
> 标签：android, file, apk

我无法检测用户是否单击了对话框，该对话框通常在安装 android 应用程序后弹出。这样我就可以进行下一个安装或活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:04:17.540

你无法检测到这一点。

如果您想在应用程序的第一次运行时执行一些操作，那么只需在您的用户首选项中存储一个“首次运行”标志并将其默认为 true。

然后，您可以在应用程序启动时检查此项并执行任何必要的操作。

一些示例代码；

```
private boolean prefFirstRun;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    settings = PreferenceManager.getDefaultSharedPreferences(this);

    prefFirstRun= settings.getBoolean("FirstRun", true);
}

@Override
protected void onStart() {
    super.onStart();

    if (prefFirstRun) {
        prefFirstRun = false;
        // Do your initial operations here
    }
}

@Override
protected void onStop() {
    super.onStop();

    SharedPreferences settings = PreferenceManager
            .getDefaultSharedPreferences(this);
    SharedPreferences.Editor editor = settings.edit();
    editor.putBoolean("FirstRun", false);
    editor.commit();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:14:10.397

如果我理解正确，

*   您正在尝试以编程方式安装 APK
*   您需要获取成功安装后用户是否按下按钮`Open`或的状态。`Done`

这是可以做到的。为此，请像这样启动包安装程序。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(
Uri.fromFile(new File("Full path to your APK")),
        "application/vnd.android.package-archive"); // the APK path can be in SDCARD or in your application directory. I am sure you know this path.

// start the package-installer activity and wait for result. The second parameter can be used to identify the source of result in `onActivityResult` method. 
startActivityForResult(intent, 1); 
```

*   现在将启动包安装程序，并且您的 APK 将安装在设备上。
*   用户按下`Open`或`Done`按钮。
*   `onActivityResult`您在回调函数中获得程序控制权

功能如下`onActivityResult`：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // requestCode == 1 means the result for package-installer activity
    if (requestCode == 1) 
    {
        // resultCode == RESULT_CANCELED means user pressed `Done` button
        if (resultCode == RESULT_CANCELED) {
            Toast.makeText(this, "User pressed 'Done' button", Toast.LENGTH_SHORT).show();
        } 
        else if (resultCode == RESULT_OK) {
            // resultCode == RESULT_OK means user pressed `Open` button
            Toast.makeText(this, "User pressed 'Open' button", Toast.LENGTH_SHORT).show();
        }
    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

# c# - 是否可以将空字符串传递给带有路由 URL 段而不是查询字符串的操作方法？

> ID：12403537
> 
> 赞同：0
> 
> 时间：2012-09-13T09:45:29.583
> 
> 标签：c#, asp.net, asp.net-mvc

我有一个控制器类`Movie`。其作用方法之一如下：

```
 public string ActionMethod(string id)
    {

        if (id == null)
        {

            return "null";
        }

        if (id == string.Empty)
        {

            return "empty";
        }

        return "neither null nor empaty";
    } 
```

是否可以将空字符串传递给带有路由 URL 段而不是查询字符串的操作方法？

请注意，`http://localhost:21068/Movies/ActionMethod?id=`可以这样做，但它使用查询字符串。此外，不允许修改动作方法。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:05:43.643

我不清楚你想要实现什么，但你可以通过在 Global.asax.cs 中适当地指定路由来做到这一点。作为一个人为的例子，如下：

```
routes.MapRoute(
    "", 
    "{controller}/{action}/id/{id}", 
    new { controller = "Home", action = "Index", id = "" } 
    );

routes.MapRoute(
    "Default", 
    "{controller}/{action}/{id}", 
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }             
    ); 
```

让您使用：

```
http://localhost:21068/Movies/ActionMethod        - id is null
http://localhost:21068/Movies/ActionMethod/id/    - id is an empty string
http://localhost:21068/Movies/ActionMethod/id/123 - id is a nonempty string 
```

如果您说明要允许哪些 URL 以及如何映射它们，那么毫无疑问有人会建议您如何设置路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:54:02.113

如果您的 ID 为空，则不要传递任何查询字符串。像

```
 http://localhost:21068/Movies/ActionMethod 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:14:21.173

如果您不能使用查询字符串，您是否考虑过使用表单？我还没有测试过，但试一试：

```
@using (Html.BeginForm("ActionMethod", "YourControllerName", "GET")) {
    <input type="text" name="id">
    <input type="submit" name="submitForm" value="submitForm" />
  } 
```

参考： http: [//msdn.microsoft.com/en-us/library/dd460344 (v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/dd460344(v=vs.108).aspx)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-13T10:32:56.410

我认为您可以传递可为空的参数，例如：

```
public string ActionMethod(string? id) 
```

并且不要将任何查询字符串传递为：

```
http://localhost:21068/Movies/ActionMethod 
```

# iphone - 如何使 UITextView 文本全部可选并向用户 iPhone 应用程序显示复制选项？

> ID：12403538
> 
> 赞同：4
> 
> 时间：2012-09-13T09:45:38.733
> 
> 标签：iphone, ios, select, uiimageview, uitextview

我在 iPhone 应用程序中工作，例如 iMessage 原生应用程序。我设计了一个看起来像 iMessage 的页面，还添加了一个气泡。我是怎么做的，只是添加了一个`UITextView in UITableView Cell and also i have added UIImageView on UITextView with bubble images`.

从 NSMutableArray 将文本加载到 UITextView。它工作正常。现在我的疑问是：

1.  在 iMessage 应用程序中，他们设置了`when the user hold the bubble they making the text as selectable and showing Copy option`. 在我的应用程序`when the user hold a bubble the Copy option showing but some particular text only copying`中。如何选择所有文本并向用户显示复制选项？

2.  在 iMessage 应用程序中，选择区域（选择开始和选择结束两行）未显示。但在我的应用程序中`selection regions are showing how can i manage that?`

你能帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T12:59:26.880

最后我解决了我在下面代码中使用的问题。现在可以从 UITextView 中选择所有内容并向用户显示复制选项以复制消息。请找到代码供您参考。

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    if (action == @selector(copy:))
    {
        [self selectAll:self];

        return YES;
    }
    else if (action == @selector(cut:))
    {
        return NO;
    } 
        return NO;
}

- (void)copy:(id)sender 
{
    UIPasteboard *pastBoard = [UIPasteboard generalPasteboard];
    [pastBoard setString:self.text];
    self.selectedTextRange = nil;
} 
```

快乐编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:20:50.907

在这里，如何选择文本`UITextView`

```
[textView setSelectedRange:NSMakeRange(row, length)]; 
```

where，`row`表示您要从哪一行开始选择。`length`是文本的总长度。

```
e.g. [textView setSelectedRange:NSMakeRange(1, 45)]; // where 1 is first row, and 45 is length of text of selection. 
```

# java - Java 1.7 的 @ApplicationException

> ID：12403542
> 
> 赞同：6
> 
> 时间：2012-09-13T09:46:00.933
> 
> 标签：java, jakarta-ee, maven, migration

我有带有抛出我的自定义异常的方法的 Web 服务。

```
@WebMethod void someMethod(...) throws MyException 
```

`MyException`类被注释`@ApplicationException`

```
@ApplicationException  
class public MyException extends Exception {...} 
```

`maven`我使用,`JDK 1.6`和生成 WSDL来构建我的项目`jaxws-maven-plugin`，并且一切正常。
但是现在我想对 做同样的事情`JDK 1.7`，现在我得到了错误

```
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
java.lang.StackTraceElement does not have a no-arg default constructor.
    this problem is related to the following location:
        at java.lang.StackTraceElement
        at public java.lang.StackTraceElement[] java.lang.Throwable.getStackTrace()
        at java.lang.Throwable
        at private java.lang.Throwable[] com.MyPackage.MyExceptionBean.suppressed
        at com.MyPackage.MyExceptionBean 
```

有任何想法吗？

不同的是，与 JDK 1.6 类 MyExceptionBean 的生成方式类似

```
public class MyExceptionBean {

    private String message; 
```

但使用 JDK 1.7

```
public class MyExceptionBean {

    private String message;
    private Throwable[] suppressed; 
```

jaxws-maven-插件

```
<groupId>org.codehaus.mojo</groupId>
<artifactId>jaxws-maven-plugin</artifactId>
<version>1.10</version> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:17:21.303

有问题`jaxws-maven-plugin`和`java 7`:-(
[问题跟踪器](http://java.net/jira/browse/JAX_WS_COMMONS-72)

使用 2.2 版效果很好

```
<groupId>org.jvnet.jax-ws-commons</groupId>
<artifactId>jaxws-maven-plugin</artifactId>
<version>2.2</version> 
```

# google-app-engine - 在 Google App Engine 上的服务器 Chrome 扩展中嵌入客户端 ID

> ID：12403550
> 
> 赞同：1
> 
> 时间：2012-09-13T09:46:26.353
> 
> 标签：google-app-engine, google-chrome-extension

我正在尝试找出将客户端 ID 嵌入 Google Chrome 扩展程序的最合适方式是什么？我的预期目的是最终用户可以通过我的网站或通过 chrome 商店添加我的扩展程序，但他需要在此之前提供一个电子邮件地址。就实现功能而言，这可能是合适的。

我研究了互联网上的 chrome 扩展，我认为的一种方法是最终用户可以添加扩展，每当我收到用户的第一个请求时，我都可以生成一个唯一的 ID 并将其嵌入到客户端的扩展中。是否可以修改清单文件来做到这一点，如果我这样做，我也没有选择从最终用户那里获取电子邮件地址。一种方法也可以是，当最终用户通过我的站点添加扩展名时，我可以在服务器端完成所有工作，但是 GAE 怎么可能，因为 GAE 不允许我们修改文件的内容.

我的应用程序将部署在 Google App Engine 上。

另外，添加有没有一种方法可以修改客户 ID 的详细信息，以防我将来需要这样做？

请指教。

谢谢。

# c# - 在访问全局声明但用另一种方法填充的表时

> ID：12403552
> 
> 赞同：1
> 
> 时间：2012-09-13T09:46:35.313
> 
> 标签：c#

我在 c# 的一个类中声明了一个全局变量

```
 public partial class admin_AnalyseQuery : System.Web.UI.Page
{
    llvsMasterpage m;
    private const string ASCENDING = " ASC";
    private const string DESCENDING = " DESC";
    DataTable dt; 
```

在这里，我创建了一个数据表 dt 作为全局变量，对吗？

现在数据表 dt 填充了屏幕截图中的方法

“BindDatagvAnalyse” - 这是一种将数据绑定到网格视图的方法。

```
 private void BindDatagvAnalyse()
    {
        Guid SchoolID = Guid.Parse(School.SelectedValue);
        Guid YearID = Guid.Parse(Years.SelectedValue);
        Guid VersionID = Guid.Parse(Versions.SelectedValue);
        Guid LessonID = Guid.Parse(Lessons.SelectedValue);
        Guid TeacherID = Guid.Parse(Teachers.SelectedValue);
        Guid LearningunitID = Guid.Parse(Learningunits.SelectedValue);
        Guid DomainID = Guid.Parse(Domain.SelectedValue);
        pnllbl.Visible = true;
        string Schoolname = School.SelectedItem.Text;
        string Yearname = Years.SelectedItem.Text;
        string Versionname = Versions.SelectedItem.Text;
        string Lessonnmae = Lessons.SelectedItem.Text;
        string Teachername = Teachers.SelectedItem.Text;
        string Learningunitname = Learningunits.SelectedItem.Text;
        string Domainname = Domain.SelectedItem.Text;
        lblinfo.Text = Schoolname + "/" + Yearname + "/" + Lessonnmae + "/" + Versionname + "/" + Teachername + "/" + Domainname + "/" + Learningunitname;
        //  Guid PeriodID = Guid.Parse(Periods.SelectedValue);
        dt = m.bussinesCollection.BussinesDomain.GetAllDetailsForgvanalyse(SchoolID, YearID, LessonID, VersionID, TeacherID, LearningunitID, DomainID);
        int count = dt.Rows.Count;
        lblcount.Text = count.ToString();
        int c = m.bussinesCollection.BussinesDomain.GetAllDetailsForgvanalyseCount(SchoolID, YearID, LessonID, VersionID, TeacherID, LearningunitID, DomainID);
        lblstd.Text = c.ToString();
        gvAnalyse.DataSource = dt;
        gvAnalyse.DataBind();
    } 
```

我已经创建了这种类型的 6 种方法，它们将根据下拉选择创建表，然后调用相应的方法并相应地填充 gvanalysis，这会显示在屏幕上。

现在我放了一个按钮来从表中创建 excel 表。

在“导出 Excel”按钮单击事件中，我必须使用当前显示在屏幕中的表格创建 Excel 工作表。

为此，在按钮单击事件中，我已经这样做了

```
protected void btnexel_Click(object sender, EventArgs e)
    {
        byte[] Result;
        using (MemoryStream ms = new MemoryStream())
        {
            string school = School.SelectedItem.Text;
            string year = Years.SelectedItem.Text;
            DataTable final = dt;
            // DataTable dt = m.bussinesCollection.BussinesDomain.GetAllDetailsForgvanalyse(SchoolID, YearID, LessonID, VersionID, TeacherID, LearningunitID, DomainID);
            string style = @"<style> .textmode { mso-number-format:\@; } </style>";
            Response.Write(style);
            Result = ms.GetBuffer();
            Session["Excel"] = Result;
            Session["dt"] = final;
            Session["school"] = school;
            Session["year"] = year;
            Session["pdf/excel"] = "excel/loondiest/analyse";
            Response.Redirect("~/admin/DownloadPdf.aspx");
        }
} 
```

但是当我调试它时，它总是显示 table final & dt 都是空的。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:02:13.240

您必须坚持您的`DataTable`in `persistance structure`，因为当您发布数据时，您的数据会丢失。

持久性结构

```
ViewState : on page with post

Session

Cache

Application 
```

样本

```
public DataTable Table
{
  get
  {   
      if(ViewState["KeyTable"] != null)
      {
         return ViewState["KeyTable"] as DataTable;
      }
  }
  set
  {
     ViewState["KeyTable"] = value;
  }
} 
```

用例：

```
Table = your value;

..... 
```

表 =

# javascript - 当 Backbone.Model 更改时，我应该如何检查 Backbone.View

> ID：12403555
> 
> 赞同：0
> 
> 时间：2012-09-13T09:46:53.630
> 
> 标签：javascript, backbone.js, jasmine, marionette

我正在通过 jasmine 使用骨干和骨干.marionette 为 Web 应用程序编写测试。

我的问题是：
1）我应该在模型发生变化时检查视图以查看视图是否受到影响？
2）如果是，那么正确的方法是什么……。例如在以下情况（1）

PS：
我想避免更改模板文件

* * *

(1)

```
// template 

<ul class="widget-points-status">
    <li>
        <strong>{{ remaining_points }}</strong>
    </li>
    <li>
        <strong>{{ given_points }}</strong>
    </li>
    <li>
        <strong>{{ received_points }}</strong>
    </li>
</ul> 
```

* * *

```
// My jasmine test could be:

describe('Changing the model:', function () {
    beforeEach(function () {
        app.currentUser.set({
            given_points: 111980,
            received_points: 892378,
            remaining_points: 435412
        });
    });

    it('it should change the points', function () {
        var pointsView = this.view.$el.text().match(/\d{1,}/)[0];
        expect(pointsView).toMatch(app.currentUser.get('given_points'));
        expect(pointsView).toMatch(app.currentUser.get('received_points'));
        expect(pointsView).toMatch(app.currentUser.get('remaining_points'));
    });

}); 
```

* * *

```
var pointsView = Backbone.View.extend({

    className: 'widget widget-profile',

    initialize: function () {
        app.currentUser.on('change', this.render, this);
    },

    render: function () {
        this.$el.html(profileTemplate(app.currentUser.toJSON()));

        return this;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:06:38.723

如果您的视图侦听模型事件，您可以使用 spy 来检查您的侦听器是否在您更改模型时被调用。

```
describe("A Backbine View", function() {

    beforeEach(function() {
        spyOn(pointsView, "changePoints");
    });

    it("should listen to model changes", function() {
        app.currentUser.set("points", 2);
        expect(pointsView.changePoints).toHaveBeenCalled();
    });
}); 
```

当然，如果您`render`作为听众，同样的概念也适用。

Personally I wouldn't check the rendering explicitly in Jasmine since this will only ever work if you run the tests in a browser. If you use Jasmin for Maven for example you have Rhino and therefore no DOM to work with.

# r - R中的余弦负功率

> ID：12403556
> 
> 赞同：1
> 
> 时间：2012-09-13T09:47:08.757
> 
> 标签：r

我正在尝试找到 R 中值的反余弦值。

```
> cos^-1(x) 
```

但

```
Error: attempt to apply non-function 
```

出现。有什么建议吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T09:48:40.027

反余弦函数称为`acos`：

```
> cos(pi)
[1] -1
> acos(cos(pi))
[1] 3.141593
> all.equal(pi, acos(cos(pi)))
TRUE 
```

**注意**：R 中的三角函数使用弧度，而不是度数，例如 360 度是 2pi 弧度。从和到弧度的转换：

```
deg2rad = function(deg) {
   return((pi * deg) / 180)
 }

rad2deg = function(rad) {
   return((180 * rad) / pi)
 } 
```

您可以使用这些函数，或者`aspace`包提供这些转换函数 ( `as_radians`)，以及`cos`使用度数的版本，例如`cos_d`.

# django - filter() 关键字必须是字符串

> ID：12403557
> 
> 赞同：0
> 
> 时间：2012-09-13T09:47:13.350
> 
> 标签：django, django-admin, manytomanyfield

我正在使用 Django 开发一个网站。

我创建了两个模型，一个用于照片，另一个用于人。

```
class Photo(models.Model):    
    photo  = models.ImageField(upload_to = 'toto')
    description = models.CharField(_('Description'), max_length = 250)
    people = models.ManyToManyField('Person', related_name = _('Person'))

    def display_img(self):
        return u'<img src="%s" /> - %s - %s' % (self.photo, self.description, self.people )

    display_img.allow_tags = True

class Person(models.Model):
    name = models.CharField(_('Name'), max_length = 50) 
```

在我看来，我想要的是能够在照片上标记人物。

我的问题是我可以用**管理员**创建一张新照片，**但是**当我想修改/查看它时（[http://127.0.0.1:8000/admin/module/photo/1/](http://127.0.0.1:8000/admin/module/photo/1/)）我得到这个错误：

```
Django Version: 1.4.1
Exception Type: TypeError
Exception Value:    
filter() keywords must be strings
Exception Location: C:\Python26\Lib\site-packages\django\db\models\fields\related.py in get_query_set, line 543 
```

我无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:56:10.453

完整的回溯会很有用。

我预计问题来自您所在领域的`related_name`属性。`people`您已将此标记为翻译，但这没有任何意义：这是您在代码中使用的属性，而不是供公众使用的东西。拔掉`_()`电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:54:40.580

`photo`是对象，但你想得到这个`str`：

```
return u'<img src="%s" /> - %s - %s' % (self.photo, self.description, self.people ) 
```

你需要`url`属性：

```
return u'<img src="%s" /> - %s - %s' % (self.photo.url, self.description, self.people ) 
```

我的解决方案`people`：

```
people = models.ManyToManyField(PersonModel, related_name = _('Persons'), verbose_name=_('Person')) 
```

# joomla - RedSHOP - 需要 mod_products 信息

> ID：12403560
> 
> 赞同：0
> 
> 时间：2012-09-13T09:47:26.573
> 
> 标签：joomla, joomla-module

非常抱歉在这里发布这个问题，但 RedCOMPONENT 只是懒得回答我的论坛帖子或其他任何人。

我只想知道，RedCOMPONENT 的这个 mod_products 可以显示特色产品以及特定品牌的产品吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T17:02:52.713

除非您自己编写代码，否则您将无法使用您提到的扩展来完成它。我以前没有主要研究过redSHOP，我不会付费下载你提到的模块，但是在其中一个PHP文件中，会有一些代码使用SQL命令从特定的表列中检索产品。您总是可以尝试调整它，以便（如果功能产品有自己的表列）SQL 命令从两个列中检索产品。

否则，您可能会对这个展示 RedSHOP 功能产品的模块感兴趣。

[http://extensions.joomla.org/extensions/extension-specific/redshop-extensions/13964](http://extensions.joomla.org/extensions/extension-specific/redshop-extensions/13964)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T01:31:19.290

您应该使用 mod_redshop_featureproduct 模块。

# objective-c - NSDictionary 的 objectForKey: 依赖于身份还是平等？

> ID：12403561
> 
> 赞同：5
> 
> 时间：2012-09-13T09:47:26.713
> 
> 标签：objective-c, cocoa-touch, cocoa, foundation

假设我有一个名为的对象`Person`，它具有 property ，并且当社会安全号码属性相等时`socialSecurityNumber`，此类将覆盖该方法以返回 true。`isEqual:`并说我已经将一堆实例`Person`放入一个`NSDictionary`.

如果我现在实例化一个`newPerson`恰好与字典中已经存在的社会安全号码相同的对象，并且我这样做`[myDictionary objectForKey:newPerson]`了，它会使用`isEqual:`并返回 YES，还是会比较指针并返回 NO？

我知道我可以编写一个简单的测试来找出答案，但我想了解如何`objectForKey:`在字典中准确找到匹配项，以及这在 Cocoa 中的一致性如何（即`NSArray`' 的`indexofObject:`工作方式是否相同？）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T09:52:15.080

`NSDictionary`像哈希表一样工作。因此它同时使用`-hash`和`-isEqual:`来查找字典中与给定键对应的对象。

所以要回答你的问题`NSDictionary`，这使用`isEqual:`而不是指针比较。但是你还应该`hash`在`isEqual:`你的`Person`类上实现它才能工作。

*   从[NSDictionary 类参考文档](https://developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)：

> 字典中的键值对称为条目。每个条目由一个表示键的对象和另一个表示键值的对象组成。在字典中，键是唯一的。也就是说，单个字典中没有两个键是相等的（由 isEqual: 确定）。

*   从[`isEqual:`方法文档](https://developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isEqual:)：

> 如果两个对象相等，则它们必须具有相同的哈希值。如果您在子类中定义 isEqual: 并打算将该子类的实例放入集合中，那么最后一点尤其重要。确保您还在子类中定义哈希。

*   这种行为在 Cocoa 中的各种容器类中是一致的。例如，来自[`NSArray`的`indexOfObject:`方法文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)：

> 从索引 0 开始，向数组的每个元素发送一个 isEqual: 消息，直到找到匹配项或到达数组末尾。此方法将 anObject 参数传递给每个 isEqual: 消息。如果 isEqual:（在 NSObject 协议中声明）返回 YES，则认为对象相等。

* * *

***您应该始终阅读文档**：正如上面引用的摘录所指出的，这些细节通常在方法文档的“讨论”或“特殊考虑”部分或类文档本身的“概述”部分中进行解释.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:06:43.450

*这在 Cocoa 中的一致性如何（即 NSArray 的 indexofObject: 是否相同？）*

它是一致的，但同时又不是。我的意思是有两种方法可以使用：`isEqual`和`hash`. 你不应该太在意什么时候使用哪个。相反，您应该关注的是尊重`NSObject`协议要求并确保如果两个对象根据它们相等，`isEqual`它们也具有相同的哈希值。

来自[协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isEqual%3a)[`isEqual`中的文档`NSObject`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isEqual%3a)

> 如果两个对象相等，则它们必须具有相同的哈希值。如果您在子类中定义 isEqual: 并打算将该子类的实例放入集合中，那么最后一点尤其重要。确保您还在子类中定义哈希。

# java - 使用 RabbitMQ 将 python 字典发送到 java

> ID：12403563
> 
> 赞同：1
> 
> 时间：2012-09-13T09:47:38.507
> 
> 标签：java, python, dictionary, rabbitmq

我尝试使用 RabbitMQ 将 python 字典从 python 发送到 java 应用程序。在 python 方面，我使用多种方式将字典转换为字符串。

*   `str(dict)`
*   `json.dumps(dict)`
*   `pickle.dumps(dict)`

结果如下所示：

```
{"vlan": {"ip": "12.12.12.12", "netmask": "255.255.255.255", "number": 12}} 
```

我使用 pika 发送消息，它到达 java“侦听器”。在 java 方面，当我将数据转换为字符串时，我得到：

```
QueueingConsumer.Delivery delivery = consumer.nextDelivery();
String data =  new String(delivery.getBody()) 
```

```
dp0
S'vlan'
p1
(dp2
S'ip'
p3
S'12.12.12.12'
p4
sS'netmask'
p5
S'255.255.255.255'
p6
sS'number'
p7
I12
ss. 
```

我想在 java 端获取我在 python 端发送的相同字符串。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:49:10.967

使用可以跨语言双向*读写*的序列化格式。Python pickle 显然是一种原生 Python 格式，您无法在 Java 中反序列化（使用 Jython 除外）。请改用 JSON 或 XML 或协议缓冲区。

# c# - 创建 Excel 文件时出错？

> ID：12403565
> 
> 赞同：3
> 
> 时间：2012-09-13T09:47:44.893
> 
> 标签：c#, c#-4.0

我正在 Window 7 中使用 C#.NET 开发应用程序。该应用程序生成 excel 文档。在我的系统中，已经安装了 Office 2010。

由于以下错误，从 IClassFactory 创建 CLSID 为 {00024500-0000-0000-C000-000000000046} 的 COM 组件实例失败：80010001。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:54:02.017

你没有提供太多关于的信息。它是 Web、Windows 服务还是桌面应用程序？

但是，不再需要使用 com interop 来以新的基于 xml 的格式创建 Excel 文件。看到这个：

[http://excelpackage.codeplex.com/](http://excelpackage.codeplex.com/)

此致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T10:08:11.783

As Oscar have said, using Interop classes is not required for excel-file generation. Even [Microsoft says you should not be doing that](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2). There are other packages that can create xls or xlsx files for you. I have used [NPOI](http://npoi.codeplex.com) in the past and was very happy with it.

**27 Oct 2015 Update:** NPOI has a is horrible API. Use OpenXml-based [EPPlus](http://epplus.codeplex.com/) - much more comfortable to work with and gives you a lot better code comparing to NPOI when producing the same documents.

# asp.net-mvc - 如何在 ASP.NET mvc2 中获取文件的下载状态

> ID：12403569
> 
> 赞同：0
> 
> 时间：2012-09-13T09:47:56.243
> 
> 标签：asp.net-mvc, asp.net-mvc-2, download, httpresponse

在我的 mvc2 项目中，我有一个名为 DownloadPDF 的方法。我有，

```
httpContext.Response.WriteFile(<FilePath>);
httpContext.ApplicationInstance.CompleteRequest(); 
```

我不想跟踪文件是否下载成功。我参考了以下教程，但是当我在 IIS 中托管项目时它不起作用。

[http://www.codeproject.com/Articles/74654/File-Download-in-ASP-NET-and-Tracking-the-Status-o](http://www.codeproject.com/Articles/74654/File-Download-in-ASP-NET-and-Tracking-the-Status-o)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:07:47.533

如果您的应用程序以 HTML 5 浏览器为目标，请尝试“Html5 Progress Event”。它将提供所有必要的信息

1.  total - 正在传输的总字节数
2.  已加载 - 到目前为止上传的字节数
3.  lengthComputable - 指定上传的数据/文件的总大小是否已知

欲了解更多信息： http: [//www.matlus.com/html5-file-upload-with-progress/](http://www.matlus.com/html5-file-upload-with-progress/)

# tridion - 使用时事通讯实现“在浏览器中查看”功能

> ID：12403571
> 
> 赞同：2
> 
> 时间：2012-09-13T09:48:04.700
> 
> 标签：tridion, tridion-2011

我们正在使用 SDL Tridion 2011。我们希望使用 NewsLetter 实现“在浏览器中查看”功能。

我们没有找到任何合适的方法来使用 Tridion Outbound Mailings 实现此功能。

有人可以帮助我们实现这一点吗？

暂时我们正在发布一个时事通讯页面，并且我们正在从时事通讯链接这个页面。

请提出最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:55:45.870

我认为这是一般的方法。没有任何东西可以将已发布的网页链接到出站电子邮件用于邮件的页面。

我想上次我这样做时，我们只是在组件中使用了一个字段来允许编辑器输入网页的完整 url，例如[http://www.blah.com/subscription/email.html](http://www.blah.com/subscription/email.html)。我想这可以替换为将您的网站网址连接到页面的 PublishLocationUrl 或使用 PageLink 如果您想要一个托管链接。

然后，他们首先发布了网页，然后使用同一页面创建了邮件。

干杯

# java - Windows 上的 Java/MongoDB 消息长度错误，但 Linux 上没有

> ID：12403574
> 
> 赞同：5
> 
> 时间：2012-09-13T09:48:19.107
> 
> 标签：java, windows, linux, mongodb

我们目前正在使用 java 驱动程序将巨大的 JSON 文件（~100 MB）导入 MongoDB。目前我们将文件分成更小的块，因为我们第一次遇到导入整个文件的问题。当然，我们知道 MongoDB 的最大文档大小为 16 MB 的限制，但是我们现在导入的块要小得多。

奇怪的是，导入过程在 Linux (eclipse) 上运行时可以正常工作，但同一个程序会在 Windows (eclipse) 上引发“不能说什么”的异常。从数据库观察日志时，错误消息说

```
> "Thu Sep 13 11:38:48 [conn1] recv(): message len 1835627538 is too
> large1835627538" 
```

在同一数据集上重新运行导入始终会导致有关消息长度的相同错误消息。我们调查了要导入的文档的大小（使用 .toString().length()）——导致错误的块只有一些 kB 大。

mongo 数据库在哪个操作系统上运行没有区别，但取决于执行导入代码的位置（使用相同的 java-mongo-driver

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:13:06.520

> “我们目前正在使用 java 驱动程序将巨大的 JSON 文件（~100 MB）导入 MongoDB”

我们是在谈论包含 1000 个 JSON 对象的 JSON 文件**还是**1 个大小约为 100MB 的 JSON 对象？因为如果我没记错的话，16MB 的限制是每个对象而不是每个包含 1000 个 JSON 对象的 JSON 文件。

还！

```
"Thu Sep 13 11:38:48 [conn1] recv(): message len 1835627538 is too
large1835627538" 
```

> 导致错误的块只有一些 kB 大。

如果 1835627538 确实以 kb 为单位，那是相当大的，因为那大约是 ~1750 GigaBytes！

要绕过包含 1000 个 JSON 对象的 JSON 文件，为什么不逐行遍历数据文件并以这种方式进行插入？使用我的方法，无论您的数据文件有多大，迭代器只是指向特定行的指针。它不会将整个文件加载到内存中并插入。

**注意**：这是假设您的数据文件**每行**包含 1 个 JSON 对象。

使用 Apache Commons IO FileUtils（单击[此处](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)），您可以使用他们的 Line 迭代器来迭代您的文件，例如（不完全工作的代码，需要导入正确的库）：

```
LineIterator line_iter;
    try {
        line_iter = FileUtils.lineIterator(data_file);      
        while (line_iter.hasNext()) {
            line = line_iter.next();

            try {
                    if (line.charAt(0) == '{') 
                            this.mongodb.insert(line);
            } catch (IndexOutOfBoundsException e) {}
            }
        }
        line_iter.close(); // close the iterator  
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

# php - 如何从 php 中的抓取网页中获取特定数据

> ID：12403585
> 
> 赞同：0
> 
> 时间：2012-09-13T09:48:45.390
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

您好，我已经抓取了一个网页

```
 <div class="col blue">
        <img  src="/en/media/Dentalscreenresized.jpg" />
        <h4>This is line i want to scrape</h4>
        <p class="date">12 Sep
            <span class="year">2012</span></p>
        <p>13 people were diagnosed with oral cancer after last year&rsquo;s Mouth Cancer Awareness Day. Ring 021-4901169 to arrange for a free screening on the 19th September.</p>
        <p class="readmore"><a href="/en/news/abcd.html">Read More</a></p>
        <p class="rightreadmore"><a href="http://www.xyz.ie/en/news/">See all News&nbsp;&nbsp;&nbsp;</a></p>
    </div> 
```

现在我想显示的`<h4>`标签。`class="col blue"`我在网上看到使用`preg_match_all()`我不熟悉正则表达式......请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:54:42.317

不要使用正则表达式来解析 HTML。使用库和专用解决方案似乎很困难。您可以在那里找到很多“不要使用正则表达式”的答案。

我推荐使用[简单的](http://simplehtmldom.sourceforge.net/manual.htm)[SimpleHTMLDOM](http://simplehtmldom.sourceforge.net/)。

```
 <?php
// include necessary classes first.
// e.g. include('simple_html_dom.php'); // assuming the file is in same folder as the php file. Or include it at first or you will get a fatal error.
    $html = str_get_html('<div class="col blue">
            <img  src="/en/media/Dentalscreenresized.jpg" />
            <h4>This is line i want to scrape</h4>
            <p class="date">12 Sep
                <span class="year">2012</span></p>
            <p>13 people were diagnosed with oral cancer after last year&rsquo;s Mouth Cancer Awareness Day. Ring 021-4901169 to arrange for a free screening on the 19th September.</p>
            <p class="readmore"><a href="/en/news/abcd.html">Read More</a></p>
            <p class="rightreadmore"><a href="http://www.xyz.ie/en/news/">See all News&nbsp;&nbsp;&nbsp;</a></p>
        </div>
    ');

    $h4 = $html->find('h4.col.blue');
    ?> 
```

现在 $h4 包含所有带有 col 和 blue 类的 h4 标签的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:11:26.330

好吧，在生活中，您通常有两个选择（我假设抓取页面的内容存储在`$content`变量中）：

**的方式~~（[克苏鲁](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)）~~正则表达式：**

```
$matches = array();
preg_match_all('#<div class="col blue">.+?<h4>([^<]+)#is', $content, $matches);
var_dump($matches[1]); 
```

**DOM解析方式：**

```
$dom = new DOMDocument();
$dom->loadHTML($content);
$xpath = new DOMXpath($dom);
$elements = $xpath->query('//div[@class="col blue"]/h4');
foreach ($elements as $el) {
   var_dump($el->textContent);
} 
```

当然，真正的问题是选择哪种方式。

第一个选项简短，简洁，总体上非常诱人。我承认我会使用它一次、两次或 ( `pony he comes`) 甚至更多——如果且仅当我知道我使用的 HTML 将始终归一化并且我可以应对其结构以不可预测的方式突然变化的情况。

第二个选项稍大一些，可能看起来太笼统了。然而，在我看来，它对源的变化更加灵活和有弹性。

例如，考虑如果源 HTML 中的某些“蓝色”div 可能没有`<h4>`元素出现会发生什么。为了在这种情况下正常工作，正则表达式必须变得更加复杂。XPath 查询呢？不会改变——哪怕是一点点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:53:29.753

不要使用正则表达式从 HTML 解析/抓取信息，尝试使用 PHP 内置的 DOM 解析器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:11:56.350

使用 DOM 和 Xpath。将您的 html 数据放入 $html。

```
$dom = new DOMDocument('1.0', 'UTF-8');
@$dom->loadHTML($html);
$xmlElements = simplexml_import_dom($dom);

$divs = $xmlElements->xpath("//div[@class='col blue']");
foreach($divs as $div)
{
  $heading = $div->h4;
  var_dump($heading);
} 
```

附加说明：

```
Don't use regular expressions to parse/scrape info from HTML. Its a Bad technique 
```

# internet-explorer - 在页面选项卡内使用带有应用程序的后退按钮时，如何避免 Internet Explorer 的“网页已过期”？

> ID：12403589
> 
> 赞同：3
> 
> 时间：2012-09-13T09:48:52.380
> 
> 标签：internet-explorer, facebook-page, facebook-canvas

我已经构建了一个 Facebook 画布应用程序，该应用程序已添加为页面选项卡。在 Internet Explorer 中，当我单击从页面选项卡主页到另一个页面的链接，然后按浏览器返回按钮时，我从 IE 收到一条消息：

> 网页已过期 最可能的原因：该网页的本地副本已过期，网站要求您重新下载。

如果我按刷新，那么页面会正确显示，但我想避免这个额外的步骤。

这是应用程序的链接： [https ://www.facebook.com/FindAnyFilm/app_324458010982848](https://www.facebook.com/FindAnyFilm/app_324458010982848)

单击最新条目之一，然后按浏览器后退按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T12:05:51.247

可能与服务器发送的缓存标头有关，

```
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma:        no-cache 
```

尝试更改这些，看看问题是否仍然存在；有关 IE 和缓存行为的更多信息，请参阅[https://stackoverflow.com/a/6654296/1427878](https://stackoverflow.com/a/6654296/1427878)。

# algorithm - 从 GPS 坐标计算 PNG 地图上的 X 和 Y 位置

> ID：12403591
> 
> 赞同：2
> 
> 时间：2012-09-13T09:48:57.237
> 
> 标签：algorithm, gps, maps, coordinates

我正在 iPhone 应用程序上实现自定义地图（大小为 map_width 和 map_height 的图像），我尝试在此地图上显示当前用户位置（current_long 和 current_lat）

我有 2 个具有已知 GPS 坐标（ref1_long、ref1_lat、ref2_long 和 ref2_lat）和已知 X、Y 像素位置（ref1_x、ref1_y、ref2_x 和 ref2_y）的参考点

我的问题是：如何根据这些信息计算 current_x 和 current_y ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-16T12:30:50.130

您需要知道地图的投影。有数百种不同的地图投影，其中许多可以具有可以具有任何含义的重要常量。

所以，首先，你需要知道，**你使用什么地图？**

之后，找到这个投影的公式并使用它们。例如，对于 UTM 投影，公式在这里。但是对于另一个投影，公式和整个系统将完全不同。

下一步，您必须自己想象抽象地图将如何显示在您的屏幕上。

对我来说，地理和编程方面的专业人士，对于一些完全已知且并不罕见的地图系统，整个任务至少需要 2 天时间。调试总是有严重的问题，要准确定位。并且公式总是存在问题 - 你会发现几个变体，并且需要找到正确的变体。

但是，如果程序员已经在积极使用地图，您可能会发现不是公式，而是代码片段。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T09:39:38.763

该地图很可能使用 Mercantor 投影。问题是地球是一个球体，但地图上只有二维。您需要地图 4 个角的坐标和地图尺寸。y-map 值不会改变，但对于 x-map 值，您需要 Mercantor 投影。然后它变成一个线性变换，地图的宽度或高度可能与输入略有不同：[将纬度/经度转换为像素坐标？](https://stackoverflow.com/questions/18838915/convert-lat-lon-to-pixel-coordinate).

# couchdb - CouchDB `_all_docs_by_seq` 视图丢失，我该怎么办？

> ID：12403599
> 
> 赞同：1
> 
> 时间：2012-09-13T09:49:16.217
> 
> 标签：couchdb

我正在关注**Beginning CouchDB**这本书，在本书第1部分的末尾，有一个命令

```
$ curl -X GET http://127.0.0.1:5984/contacts/_all_docs_by_seq 
```

我希望得到所有文件的列表，包括已删除的文件，但我得到了这个

```
{"error":"not_found","reason":"missing"} 
```

我该怎么办？

我正在使用 Ubuntu Server 12.04.1 LTS 并安装了 CouchDB 1.0.1。（`_all_docs`有和没有参数）工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:43:12.447

编辑：似乎`_all_docs_by_seq`该书在 2009 年发布后不久就被弃用了，并且必须在 2010 年 CouchDB 1.0.1 发布之前被完全删除。

[在这个](https://issues.apache.org/jira/browse/COUCHDB-194?focusedCommentId=12743063&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-12743063)JIRA 评论中有一个参考（虽然有些倾斜） 。正如那里所指出的那样，`_all_docs_by_seq`不赞成使用`_changes`.

这应该为您提供所有文档更改的列表，包括使用以下命令删除的文档`_changes`：

```
http://127.0.0.1:5984/contacts/_changes?include_all_docs=true 
```

如果这不是您正在寻找的内容，并且您可以提供有关您要完成的工作的更多详细信息，我也许可以完善答案。

有关当前可用的 CouchDB HTTP API，请参阅此[链接](http://wiki.apache.org/couchdb/Complete_HTTP_API_Reference?action=recall&rev=17)。

如果您对 CouchDB 的最新指南感兴趣，请参阅*CouchDB 权威指南*。可以在[这里](http://guide.couchdb.org)免费在线获得。

# android - 通过 JmDNS 检测解析信息（txtrecord）的变化

> ID：12403604
> 
> 赞同：2
> 
> 时间：2012-09-13T09:49:31.397
> 
> 标签：android, jmdns

JmDNS 支持服务侦听器，其中包括添加服务的方法`serviceAdded`（检测新服务）和删除服务的方法`serviceRemoved`（检测已删除的服务）。

我的问题是：有没有一种方法可以检测现有服务的服务数据修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:03:27.690

`serviceResolved`方法检测服务数据修改（txtrecord）

# java - 我可以制作自己的标题字段供我和访问网络应用程序的客户使用吗？

> ID：12403605
> 
> 赞同：1
> 
> 时间：2012-09-13T09:49:31.717
> 
> 标签：java, jakarta-ee, web-applications, http-headers

虽然我使用了一些标题字段，例如：

```
X-AppEngine-Country
X-AppEngine-City 
```

（`X`建议它们是非标准的标头字段。）我在想如何实现/设置自己的*Http 标头字段*以供客户使用？上面的标头字段被定义为由托管在 google appengine 上的网络应用程序使用。〜[参考](https://developers.google.com/appengine/docs/java/runtime#Request_Headers)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T22:55:47.343

我不确定您是否想强制客户端向您发送这些自定义标头或在服务器的响应中设置这些自定义标头。如果您使用 JAX-RS (Jersey) 的 Java 实现来使用 REST API，那么从请求中获取标头或在响应中设置标头是相当简单的。下面的示例显示了两者。

```
@GET
public Response getClientMessage(@Context HttpContext context) {
    // fetch the header values into a multi valued map
    MultivaluedMap<String, String> headerMap = context.getRequest().getRequestHeaders();

    // If the required headers are not found throw a bad request
    //    throw new WebApplicationException(Status.BAD_REQUEST);

    // Setting the headers on the response
    return Response.ok()
        .header("X-AppEngine-Country", "US")
        .header("X-AppEngine-City", "California").build();
} 
```

希望这可以帮助。

# search - Yahoo BOSS API：相关搜索

> ID：12403613
> 
> 赞同：1
> 
> 时间：2012-09-13T09:49:54.357
> 
> 标签：search, yahoo, yahoo-api

有谁知道 Yahoo BOSS 是否可以返回相关搜索？例如，当我搜索“Tennis Eblow”时，Google 会在搜索结果页面的底部返回，例如：

与网球肘相关的搜索

网球肘支具 网球肘练习 网球肘治疗 网球肘症状 高尔夫球手肘 网球肘手术 肘痛 网球肘原因

雅虎返回：

相关搜索

```
golfers elbow
elbow pain
bursitis
tendinitis
golf elbow 
```

我需要添加功能，但我在 Y 中没有找到任何关于此的信息！BOSS API 文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T22:41:56.840

BOSS 昨天刚刚推出了相关搜索功能[http://developer.yahoo.com/boss/search/boss_api_guide/related.html](http://developer.yahoo.com/boss/search/boss_api_guide/related.html)

# django - Pycharm（或 Aptana Studio 3）和 git pre-commit hook

> ID：12403616
> 
> 赞同：2
> 
> 时间：2012-09-13T09:50:00.040
> 
> 标签：django, git, ide, githooks

我的项目中有一个**预提交**挂钩 - 只是为了不提交损坏的代码：

```
python manage.py test some_app 
```

它在命令提示符下可以正常工作，但在 IDE（不是 PyCharm，也不是 Aptana Studio 3）中不行。

我需要设置什么设置才能使 IDE 与钩子一起工作？

**更新：**我尝试了最新版本的 PyCharm——它确实支持 git 钩子。

# c# - 使用 linq 将日期记录返回到最近的分钟

> ID：12403617
> 
> 赞同：1
> 
> 时间：2012-09-13T09:50:03.690
> 
> 标签：c#, .net, linq

如何将日期列表返回到最近的分钟。我需要 linq 查询仅返回与传递日期匹配的日期到最近的 3 分钟

```
return EntitySet.Count(f => f.VISITDATE == dt.Date); 
```

我通常使用这样的代码：

```
 if((date2 - date1).Minutes <= 3) {
                Console.WriteLine("Do not add again!!");
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:53:23.983

```
var dates = (from ES in EntitySet
            where ES.VISITDATE >= dt.Date.AddMinutes(-3) && ES.VISITDATE <= dt.Date.AddMinutes(3)
            select ES.VISITDATE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:11:16.907

```
var result = EntitySet.Where(item => Math.Abs((item.VISITDATE - dt.Date).TotalMinutes) <= 3); 
```

# zend-framework2 - 安装建议的 composer 包 ZF2 (Zend Framework 2)

> ID：12403623
> 
> 赞同：7
> 
> 时间：2012-09-13T09:50:15.357
> 
> 标签：zend-framework2, pecl

当您使用 zend 框架启动新项目并使用 composer 安装包时，它建议这样做：

```
 "doctrine/common": "Doctrine\\Common >=2.1 for annotation features",

    "ext-intl": "ext/intl for i18n features",

    "pecl-weakref": "Implementation of weak references for Zend\\Stdlib\\CallbackHandler",

    "zendframework/zendpdf": "ZendPdf for creating PDF representations of barcodes",

    "zendframework/zendservice-recaptcha": "ZendService\\ReCaptcha for rendering ReCaptchas in Zend\\Captcha and/or Zend\\Form" 
```

我可以安装 zendpdf、zendservice-recaptcha 和 doctine/common 包，但不能安装 PECL 包。

我认为 zf2 建议这些软件包有点难过，但让用户独自一人，如何正确配置 composer.json。

我听说作曲家也可以获得 PECL 包，但找不到任何文档。

如何安装它们？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T11:54:49.210

要安装建议的包，请修改 composer.json 以包含它们。

```
"repositories": [
    {
        "type": "composer",
        "url": "http://packages.zendframework.com/"
    }
],
"require": {
    "php": ">=5.3.3",
    "zendframework/zendframework": "2.*",
    "doctrine/common": "dev-master",
    "zendframework/zendpdf": "2.*",
    "zendframework/zendservice-recaptcha": "2.*"
} 
```

然后运行

```
php composer.phar update 
```

注意：作曲家通过使用安装学说/通用

```
git clone http://github.com/doctrine/common 
```

在 Windows 上，git 需要在您的 PATH 环境变量中。

关于 ext/intl，从 PHP 5.3.0 开始，此扩展与 PHP 捆绑在一起。并且可以在您的 php 安装的 ext/ 文件夹中找到。[1]

要启用，请在 php.ini 中取消注释（删除指令前的分号）

```
extension=php_intl.dll 
```

关于 pecl-weakref，这也是一个 PHP 扩展，但是它没有与 php 捆绑在一起，需要安装。有关如何执行此操作的更多信息，请访问[http://php.net/manual/en/install.pecl.php](http://php.net/manual/en/install.pecl.php)

> 此 PECL 扩展的 DLL 当前不可用。另请参阅 Windows 部分的构建。[4]

[1] [http://php.net/manual/en/intl.requirements.php](http://php.net/manual/en/intl.requirements.php)

[2] [http://php.net/manual/en/weakref.installation.php](http://php.net/manual/en/weakref.installation.php)

[3] [http://php.net/manual/en/install.pecl.intro.php](http://php.net/manual/en/install.pecl.intro.php)

[4] [http://php.net/manual/en/install.pecl.windows.php](http://php.net/manual/en/install.pecl.windows.php)

# php - php: 为什么 preg_replace_callback 不允许内置 php 函数，只允许匿名用户函数？

> ID：12403624
> 
> 赞同：0
> 
> 时间：2012-09-13T09:50:15.663
> 
> 标签：php, callback, callable, preg-replace-callback

这不起作用，并输出一个空字符串：

```
$check["pattern"] = "correct";
$text = "Could this be correct?";
echo preg_replace_callback($check["pattern"],ucfirst,$text); 
```

使用内置函数会很好。事实上，一般回调确实允许按照[http://php.net/manual/en/language.types.callable.php](http://php.net/manual/en/language.types.callable.php)内置函数，但不允许 preg_replace_callback。可能是对 php 的功能请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:58:51.187

您的代码应触发通知和警告：

*   注意：使用未定义的常量 ucfirst - 假定为 'ucfirst'
*   警告：preg_replace_callback()：分隔符不能是字母数字或反斜杠

如果没有，您需要检查您的 PHP 错误报告设置。借助错误消息修复代码：

```
$check["pattern"] = "/correct/";
$text = "Could this be correct?";
echo preg_replace_callback($check["pattern"],'ucfirst',$text); 
```

...我们得到这个：

> 警告：ucfirst() 期望参数 1 是字符串，给定数组

所以使用内置回调函数工作正常。但是，正如[ucfirst() 的手册页所](http://php.net/ucfirst)解释的，该函数需要一个`string`，而不是一个数组。而且，正如[preg_replace_callback() 的手册页](http://php.net/preg_replace_callback)所解释的：

> 将调用并传递主题字符串中匹配元素**数组的回调。**

总结一下：这不是一个明智的功能请求，它是您代码中的一个错误；-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T10:00:25.493

它适用于所有功能。问题是这些函数需要某些参数。`ucfirst`期望字符串作为输入，但`preg_replace_callback`正在传递一个匹配数组。

`preg_replace`所以......如果你有一个签名与回调签名兼容的内置函数，它就可以工作。但是不，并非所有内置函数都具有兼容的签名。

# java - 是否有 GCM registrationId 模式？

> ID：12403628
> 
> 赞同：7
> 
> 时间：2012-09-13T09:50:37.917
> 
> 标签：java, android, android-c2dm, google-cloud-messaging

```
/**
 * @author Sebastien Lorber <i>(lorber.sebastien@gmail.com)</i>
 */
public enum EnumDeviceType {

    ANDROID {
        @Override
        public boolean validateDeviceIdentifier(String deviceIdentifier) {
            Preconditions.checkArgument( !Strings.isNullOrEmpty(deviceIdentifier) );
            return ANDROID_REGISTRATION_ID_PATTERN.matcher(deviceIdentifier).matches();
        }
    },
    IOS {
        @Override
        public boolean validateDeviceIdentifier(String deviceIdentifier) {
            Preconditions.checkArgument( !Strings.isNullOrEmpty(deviceIdentifier) );
            return IOS_DEVICE_TOKEN_PATTERN.matcher(deviceIdentifier).matches();
        }
    },
    ;

    // TODO how do we validate registration Ids
    public static final Pattern ANDROID_REGISTRATION_ID_PATTERN = Pattern.compile(".*");
    // IOS device token is a 64 HEX string
    public static final Pattern IOS_DEVICE_TOKEN_PATTERN = Pattern.compile("[a-fA-F0-9]{64,64}");

    public abstract boolean validateDeviceIdentifier(String deviceIdentifier);

    public boolean isIos() {
        return IOS.equals(this);
    }

    public boolean isAndroid() {
        return ANDROID.equals(this);
    }

} 
```

是否有任何已知的 GCM registrationId 模式可以用来在应用程序上验证registrationId 具有正确的形状？我只想知道它有哪些字符范围，例如最小和最大大小......或任何其他信息......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-13T11:15:36.087

我没有看到任何关于 GCM 注册 ID 格式的官方信息，但我分析了我们的此类 ID 数据库，可以得出以下结论：

*   在大多数情况下，registrationID 的长度等于**162 个**符号，但可以变化为**119 个**符号，也可能是其他长度；
*   它仅由以下字符组成：`[0-9a-zA-Z\-\_]*`
*   每个 regID 都包含一个或两个“分隔符”：-（减号）或 _（下划线）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-19T20:27:14.810

The documentation doesn't specify any pattern, therefore any valid string is allowed. The format may change in the future; please do not validate this input against *any* pattern, as this may cause your app to break if this happens.

As with the "registration_id" field, the upper bound on size is the max size for a cookie, which is 4K (4096 bytes).

# ios - Apple Mach-O 链接器错误 armv7s 和 libGoogleAdMobAds.a

> ID：12403630
> 
> 赞同：13
> 
> 时间：2012-09-13T09:50:41.597
> 
> 标签：ios, xcode, linker-errors, armv7

我刚刚升级了我的应用程序以在新的 iPhone5 模拟器上运行，但是当我尝试为我的 iPhone 4S 设备构建它时，我收到了这个 Apple Mach-O Liner 错误。

> ld：文件是通用的（3 个切片）但不包含一个（n）armv7s 切片：/Users/Darren/Documents/Dev stuff/My App/GoogleAdMobAdsSDKiOS-5.0.5/libGoogleAdMobAds.a 用于架构 armv7s clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

有人可以阐明这个错误是什么以及如何解决它吗？我正在将 adWhirl 与 AdMob 一起使用。

谢谢

编辑---我也在另一个项目中为文件 libfacebook_ios_sdk.a 收到此错误

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T12:10:09.810

[与我在此线程](https://stackoverflow.com/questions/12402092/file-is-universal-3-slices-but-does-not-contain-an-armv7s-slice-error-for-st)中给出的答案相同：

如果您想删除对任何架构的支持，请尝试以下操作：

项目 -> 构建设置 -> 从“有效架构”中删除架构

在库更新之前，您可以将其用作临时解决方案。您必须从您自己的项目中删除该标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T09:33:40.680

iPhone5的cpu是A6(armv7s)。现有的 Admob sdk 不支持。我们必须等待 admob 更新 sdk。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T16:55:15.153

更新到 Admob 6.2.0 或更高版本。

请参阅这篇文章：http: [//googleadsdeveloper.blogspot.com/2012/09/migrating-to-admob-v62-for-ios.html](http://googleadsdeveloper.blogspot.com/2012/09/migrating-to-admob-v62-for-ios.html)。

此外，包括 AdSupport 框架并删除 -all_load 标志。但是，您必须使用 -ObjC 标志。

这对我有用，终于！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:26:43.613

尝试这个：

本文将 armv7 lib 代码复制为 armv7s 并构建到原始 lib 中。所以 xcode 会看到 lib 有一个 armv7s 代码/arch

[http://www.galloway.me.uk/2012/09/hacking-up-an-armv7s-library/](http://www.galloway.me.uk/2012/09/hacking-up-an-armv7s-library/)

# facebook-graph-api - Facebook 封面更新

> ID：12403631
> 
> 赞同：-1
> 
> 时间：2012-09-13T09:50:43.627
> 
> 标签：facebook-graph-api

当它进行封面更新时，它会成为时间线的一部分，但无法通过提要或帖子图形 API 检索相同的内容。

我怎样才能获得这些更新？

问候， Sesmic

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:40:36.463

更改时间线中未显示的内容后（由于 API），您可以调用另一个请求，例如发布到墙上或类似内容......所以您应该手动执行。

# c - C结构赋值使用memcpy

> ID：12403635
> 
> 赞同：2
> 
> 时间：2012-09-13T09:51:01.530
> 
> 标签：c, data-structures, variable-assignment, memcpy

我有这个`StructType st = StructTypeSecondInstance->st;`，它会产生一个段错误。奇怪的部分是堆栈回溯向我显示：

```
0x1067d2cc: memcpy + 0x10 (0, 10000, 1, 1097a69c, 11db0720, bfe821c0) + 310
0x103cfddc: some_function + 0x60 (0, bfe823d8, bfe82418, 10b09b10, 0, 0) + 
```

那么，结构赋值使用`memcpy`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T10:02:07.527

一个说不出来。小型结构甚至可以保存在寄存器中。是否`memcpy`使用是一个实现细节（它甚至不是*实现定义的*，或者*未指定*的——它只是编译器编写者选择的东西，不需要记录。）

从 C 标准的角度来看，重要的是在分配之后，目标结构的结构成员比较等于源结构的相应成员。

我希望编译器编写者在速度和简单性之间做出权衡，可能基于结构的大小，越大越有可能使用`memcpy`. 一些`memcpy`实现非常复杂，并根据长度是否为 2 的幂或 src 和 dst 指针的对齐方式使用不同的算法。为什么要重新发明轮子或使用内联版本破坏代码`memcpy`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:56:14.480

它可能，是的。

这应该不足为奇：结构赋值需要尽快将一堆字节从一个地方复制到另一个地方，这恰好`memcpy()`是应该擅长的事情。如果您是编译器编写者，那么生成对它的调用似乎很容易。

请注意，这意味着分配具有大量填充的结构的效率可能低于最佳效率，因为`memcpy()`无法跳过填充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:23:09.967

该标准根本没有说明编译器如何实际实现赋值（或任何其他运算符）。没有什么可以阻止编译器（比如说）为源文件中的每个操作生成函数调用。

编译器有权按照它认为最好的方式实现分配。大多数时候，对于大多数平台上的大多数编译器，这意味着如果结构相当小，编译器将生成内联的移动指令序列；如果结构很大，调用 memcpy 是很常见的。

但是，编译器循环生成随机位域并在其中一个与分配源匹配时停止是完全有效的（我们将此算法*称为 bogocopy*）。

如果您的目标平台没有可用（或完整）libc，则支持非托管操作的编译器通常会为您提供关闭发出此类 libcall 的开关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T09:56:48.793

这取决于编译器和平台。大对象的赋值可以使用`memcpy`。但这一定不是段错误的原因。

# javascript - JavaScript 代码问题：我正在将对象转换为数组

> ID：12403637
> 
> 赞同：0
> 
> 时间：2012-09-13T09:51:27.090
> 
> 标签：javascript

我正在将 JavaScript 对象转换为数组，但结果我得到了一个`null`

这是我的代码

```
<div id="a"></div>

Object.prototype.toArray = function(){
    var arr = [];
    for (var i in this) {
        arr.push(this[i]);        
    }
    return arr;
} 

var providers = {
            facebooklike: "Facebook Like",
            facebookrecommend : "Facebook Recommend",
            facebooksend : "Facebook Send",
            twittertweet : "Twitter Tweet",
            linkedinshare : "LinkedIn Share",
            linkedinrecommend : "LinkedIn Recommend",
            googleplusplusone : "Google+ +1",
            googleplusshare : "Google+ Share"
        };

var a = document.getElementById("a");
a.innerHTML = JSON.stringify(providers.toArray()); 
```

我的结果是

> ["Facebook Like","Facebook Recommend","Facebook Send","Twitter Tweet","LinkedIn Share","LinkedIn Recommend","Google+ +1","Google+ Share",null]

这是小提琴[示例](http://jsfiddle.net/govindmalviya/Fy26h/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T09:53:55.753

添加检查自己的属性（不是从 Object 属性继承的）：

```
Object.prototype.toArray = function(){
    var arr = [];
    for (var i in this) {
        if(this.hasOwnProperty(i))
            arr.push(this[i]);        
    }
    return arr;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T09:53:32.637

添加`hasOwnProperty`检查。

```
for (var i in this) {
    if (this.hasOwnProperty(i)) {
        arr.push(this[i]);
    }        
} 
```

# php - 使用 zend 框架浏览表

> ID：12403638
> 
> 赞同：2
> 
> 时间：2012-09-13T09:51:33.197
> 
> 标签：php, zend-framework

我开始使用 Zend 框架。我一直在这里和那里做一些教程。

在我的一个观点中，我有这段代码：

```
<?php foreach($this->Instruments as $Instrument) : ?>
    <tr>
        <td><?php echo $this->escape($Instrument->nom);?></td>
        <td><?php echo $this->escape($Instrument->idtypeofinstrument);?></td>
        <td>
        </td>
    </tr>
<?php endforeach; ?> 
```

`idtypeofinstrument`是一个外键，现在它只显示`id`. 我想为用户显示其他更明确的内容。

我的桌子：

```
+------------------+
| typeofinstrument |
+------------------+
| id               | -- primary key
| typeofinstrument | -- what I want to display
+------------------+

+--------------------+
|     instrument     |
+--------------------+
| id                 | -- primary key
| name               |
| idtypeofinstrument | -- foreign key
+--------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:29:38.780

做到这一点的简单方法，不是很正确，但很简单。

```
//escape() removed for clarity
<?php foreach($this->Instruments as $Instrument) : ?>
    <tr>
        <td><?php echo $Instrument->nom;?></td>
        <?php $table = new Application_Model_DbTable_Typeofinstument();
              $select = $table->select()->where('id = ?',$Instrument->idtypeofinstrument);
              $type = $table->fetchRow($select); ?>
        <td><?php echo $type->typeofinstrument;?></td>
        <td>
        </td>
    </tr>
<?php endforeach; ?> 
```

要以更正确的方式执行此操作，需要使用映射器、ORM 或其他解决方案将表中的数据映射到仪器对象。

目标是让您的原始代码返回您想要的数据。

要了解进一步检查：

[http://phpmaster.com/building-a-domain-model/](http://phpmaster.com/building-a-domain-model/)

[http://phpmaster.com/integrating-the-data-mappers/](http://phpmaster.com/integrating-the-data-mappers/)

这些文章对我理解映射器有很大帮助。

# ios - iOS 6.0 中的提醒 API

> ID：12403646
> 
> 赞同：1
> 
> 时间：2012-09-13T09:51:52.907
> 
> 标签：ios, iphone, storekit

iOS 6.0 sdk 中的奇怪错误。Apple 承诺通过 api 提供完整的提醒支持，允许第三方应用程序代表用户读取和写入提醒。SDK 中有新的方法来初始化 storekit 以用于提醒。

但似乎是使其成为可能的主要方法 - 只是不存在。XCode 4.5 的 GM 版本和模拟器/ios-6 升级设备都显示`EKEventStore:initWithAccessToEntityTypes`SDK 中不存在，并尝试在设备/模拟器崩溃应用程序上调用它

```
Error invoking method 'EKRemsIsGranted' on 'CEKtils' because 
-[EKEventStore initWithAccessToEntityTypes:]: unrecognized selector sent to instance 0x13a59140 
```

[有趣的是， MacOs 10.8](https://developer.apple.com/library/IOS/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html)中也提到和描述了这种方法， 但在 iOS sdk 中[提到但没有描述](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html)

似乎苹果开发人员忘记在 iOS 上“启用”它。有可能还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T02:43:55.257

这里有对事件的描述（以及其他一些有用的信息）[。](https://developer.apple.com/library/ios/documentation/DataManagement/Conceptual/EventKitProgGuide/ReadingAndWritingEvents.html#//apple_ref/doc/uid/TP40004775-SW3)您还可以仔细检查您的 UIEventKit 框架是否正确链接并且是最新的。

# c# - 受保护的内部班级在班级内工作但不在班级外工作

> ID：12403647
> 
> 赞同：2
> 
> 时间：2012-09-13T09:51:56.120
> 
> 标签：c#, oop, internal, protected

我尝试了几件事，想知道为什么会这样。

比如说，我在命名空间 n 中有一个名为 A 的类，我试图创建受保护的内部类 B。

```
namespace n
{
   public class A
   {
      public A()
      {
      }
   }
   protected internal class B //throwing error
   {
   }
} 
```

但是当我这样尝试（B作为A的子类）时，它不会抛出错误并且它是成功的。你能解释一下为什么会这样吗？

```
namespace n
{
   public class A
   {
      public A()
      {
      }
      protected internal class B // its not throwing error
      {
      }
   }      
} 
```

理论上我错过了什么吗？它有点令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:53:55.117

一个类不能存在，`protected`除非它在另一个类中。

该`protected`关键字仅对*类的成员*有效。在您的第二个示例中，`class B`恰好是该成员。

想一想：
`protected`意思是：派生类可以访问这个成员。
由于没有派生命名空间这样的概念，因此该`protected`关键字对命名空间的成员没有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:54:12.823

看看错误。

> 命名空间中定义的元素不能显式声明为 private、**protected**或 protected internal

只允许内部或公共成员在课堂外。

您的第二种情况是将 B 类定义为 A 类的成员，这就是您没有收到错误的原因。

您可能会看到[访问修饰符 C#](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

> 直接在命名空间中声明的类和结构**（换句话说，不嵌套在其他类或结构**中）可以是公共的或内部的。如果未指定访问修饰符，则默认为 Internal。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T09:56:09.797

**protected声明****派生**类型的可见性级别。

在你的第一种情况下，你在里面声明类`namespace`。没有对命名空间的任何多态支持，因此没有任何使用受保护类的感觉`namespace`

相反，在第二种情况下，您在其他类（类`A`）中使用它，这使得它对`A`类的所有孩子可见。

# java - 摆脱太多的如果。更好的方法是什么？

> ID：12403651
> 
> 赞同：3
> 
> 时间：2012-09-13T09:52:19.460
> 
> 标签：java, if-statement

我的问题目前与设计有关。我有一个 jsf 参数页面，它提交不同的参数来生成碧玉报告。例如国籍、旅行类型、签证类型、性别等。参数可以是组合。例如，有一次用户可以选择国籍和签证类型并将其他留空，这将使其他人的默认值为 ALL。我从参数页面提交 id。如果用户没有选择任何内容，我将在 setter 方法中手动将值设置为 ALL。这是我的托管 bean 方法和 POJO 的快照。

```
private ReportBean generateReportBean(TravelDetailSearchParams searchParams, String reportPath){
    TravelDetailReportBean travelDetailReportBean = new TravelDetailReportBean();
    if(searchParams.getGender().getId() != 0){
      for(Lookup lookup : gender){
          if(lookup.getId() == searchParams.getGender().getId()){
            travelDetailReportBean.setGender(lookup.getDescEnglish());
            break ;
          }
      }
    }
    else{
      travelDetailReportBean.setGender(searchParams.getGender().getDescEnglish());
    }

    if(searchParams.getTravelType().getId() != 0){
      for(Lookup lookup : travelType){
        if(lookup.getId() == searchParams.getTravelType().getId()){
          travelDetailReportBean.setTravelType(lookup.getDescEnglish());
          break ;
        }
      }
    }
    else{
      travelDetailReportBean.setTravelType(searchParams.getTravelType().getDescEnglish());
    }

    if(searchParams.getPort().getId() != 0){
      for(Lookup lookup : port){
        if(lookup.getId() == searchParams.getPort().getId()){
          travelDetailReportBean.setPort(lookup.getDescEnglish());
          break ;
        }
      }
    }
    else{
      travelDetailReportBean.setPort(searchParams.getPort().getDescEnglish());
    }

    if(searchParams.getNationality().getId() != 0){
      for(Lookup lookup : country){
        if(lookup.getId() == searchParams.getNationality().getId()){
          travelDetailReportBean.setCountry(lookup.getDescEnglish());
          break ;
        }
      }
    }
    else{
      travelDetailReportBean.setCountry(searchParams.getNationality().getDescEnglish());
    }
    if(searchParams.getVisaType().getId() != 0){
      for(Lookup lookup : visaType){
        if(lookup.getId() == searchParams.getVisaType().getId()){
          travelDetailReportBean.setVisaType(lookup.getDescEnglish());
          break ;
        }
      }
    }
    else{
      travelDetailReportBean.setVisaType(searchParams.getVisaType().getDescEnglish());
    }
    logger.debug("nationality: " + travelDetailReportBean.getCountry());
    logger.debug("travelType: " + travelDetailReportBean.getTravelType());
    logger.debug("visatype: " + travelDetailReportBean.getVisaType());
    logger.debug("port: " + travelDetailReportBean.getPort());
    travelDetailReportBean.setReportName(BorderEntryExitConstants.TRAVEL_DETAIL_REPORT_NAME);
    travelDetailReportBean.setReportPath(reportPath);
    return travelDetailReportBean ;
  } 
```

POJO代码如下所示

```
public class TravelDetailReportBean extends ConcreteReportBean {
  private String gender ;
  private String travelType ;
  private String port ;
  private String country ;
  private String visaType;

  public String getGender() {
    return gender;
  }

  public void setGender(String gender) {
    if(gender == null || gender.equals("")){
      this.gender="ALL";
    }
    else{
    this.gender = gender;
    }
  }

  public String getTravelType() {
    return travelType;
  }

  public void setTravelType(String travelType) {
    if(travelType == null || travelType.equals("")){
      this.travelType ="ALL";
    }
    else{
    this.travelType = travelType;
    }
  }

  public String getPort() {
    return port;
  }

  public void setPort(String port) {
    if(port == null || port.equals("")){
      this.port ="ALL";
    }
    else{
      this.port = port;
    }
  }

  public String getCountry() {
    return country;
  }

  public void setCountry(String country) {
    if(country == null || country.equals("")){
      this.country ="ALL";
    }
    else{
    this.country = country;
    }
  }

  public String getVisaType() {
    return visaType;
  }

  public void setVisaType(String visaType) {
    if(visaType == null || visaType.equals("")){
      this.visaType ="ALL";
    }
    else{
    this.visaType = visaType;
    }
  }
} 
```

问题是 generateReportBean 方法。我正在使用许多 if 来查看 id 是否不为零从查找中获取该 id 的描述，否则只需像这样设置它，在 bean setter 内部我正在检查 null。如果为 null，则将其设置为 ALL。

我的问题是目前我的参数很少，这些如果可以工作一段时间，但如果搜索参数增长怎么办。如果会看起来很难看。有人可以建议我一个更好的方法来摆脱这些如果。谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T00:09:48.333

遵循责任链设计模式。

*   这将增加代码的可读性和可维护性

*   减少“if”循环的数量

参考：[http ://en.wikipedia.org/wiki/Chain-of-responsibility_pattern](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:40:55.150

如果`Lookup`是对象列表，那么您可以提供基于的equals方法`id`，然后您可以直接执行

```
if(lookup.contains(searchParams.getTravelType()))
{
 //code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:01:14.217

将解析块分成不同的功能。例如。

```
checkgender(searchParams.getGender(), travelDetailReportBean); 
```

或者

```
travelDetailReportBean.setGender(checkgender(searchParams.getGender())); 
```

取决于你想要它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T13:02:55.390

您还可以注释需要进行查找的字段，然后使用单个循环在 searchParams 中查看它们的值，如果 id 存在，则进行查找。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T10:08:36.763

Yes you can put these methods into a utility class and do as Minion has suggested.

```
travelDetailReportBean.setGender(ParamUtil.checkGender(searchParams.getGender()); 
```

Putting validation condition in a dto as you have done is not a smart coding move. Is it a generic parameter screen you are trying to make? Mostly, every report should have a separate parameter screen if every report parameters differ. HTH, Ben

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T10:15:20.120

恕我直言，空/空字符串测试太常见，无法手动编码。我喜欢使用[Apache Commons lang中的](https://commons.apache.org/lang/)[StringUtils](https://commons.apache.org/lang/api-release/org/apache/commons/lang3/StringUtils.html)来简化它。结合Java的运算符，可以写的更清楚：`?`

```
private static final String OPTION_ALL = "ALL";

public void setGender(String gender) {
    this.gender = StringUtils.isEmpty(gender) ? OPTION_ALL : gender;
} 
```

当然，如果您有大量字段，则通用方法可能是合理的。

**编辑：概念考虑**

如我所见，您在类 setter 方法中执行值检查。我建议不要这样做：我希望 setter*只*为实例变量赋值。如果他们做得更多，这可能会导致混乱。您可能正在使用该类对某些搜索功能进行参数化，因此在执行该搜索之前确保非空成员值的更好位置是正确的。

# drop-down-menu - ASP.NET DropDownList 未设置为异步调用中的选定项

> ID：12403653
> 
> 赞同：1
> 
> 时间：2012-09-13T09:52:24.730
> 
> 标签：drop-down-menu, asynchronous, selecteditem

我正在使用 VS 2010（框架 4.0）和 rad/telerik 控件进行网站开发。场景是我有 radwindow 弹出窗口，实际上是一个确认消息框。根据决定，我必须再次调用必须调用相应函数的基本页面。在这里，我想设置 Country dropdownlist 和 state dropdowlist。我在 Radwindow 的 OnClientClose 事件上的 javascript 函数中调用服务器端事件，并在服务器端函数中调用相应的函数来设置表单字段，其中我也设置了 Country 和 State 列表。但是当我尝试设置 Country selected 值时，尽管下拉列表中有项目，但它不会被选中。这是代码，

Javascript函数

```
function OnradWndConfirmSelfOwnerClose(oWnd) {
            var hdn = document.getElementById("<%= hdnIsOwner.ClientID %>");
            try {
                var arg = oWnd.argument;
                if (arg == "YES") {
                    hdn.value = 'true';
                }
                else {
                    hdn.value = 'false';
                }
                __doPostBack('<%=this.btnInitializeOwnerForm.UniqueID %>', '');
            }
            catch (err) { }
        } 
```

服务器端功能，

```
protected void btnInitializeOwnerForm_Click(object sender, EventArgs e)
        {
            bool IsOwner = !String.IsNullOrEmpty(hdnIsOwner.Value) ? Convert.ToBoolean(hdnIsOwner.Value) : false;
            if (IsOwner)
            {
                SaveOwner();
            }
            else
            {
                InitializeOwnerData();
            }
        } 
```

并且在 InitializeOwnerData() 中调用了 SetDefaultFields() 函数，

```
private void SetDefaultFields(ApplicationAccessInfo objAAInfo)
        {
            //Set Company Information fields
            txtOrganizationName.Text = objAAInfo.EntityorOrganization;
            txtCompanyWebsite.Text = objAAInfo.CompanyWebsite;
            txtStreetAddress.Text = objAAInfo.StreetAddrees;
            txtOfficeNumber.Text = objAAInfo.SuiteorOfficeNumber;
            txtCity.Text = objAAInfo.City;

            if (Guid.Empty != objAAInfo.CompanyCountryId)
            {
                **ddlCountry.Items.FindByValue(objAAInfo.CompanyCountryId.ToString()).Selected = true;**
                PopulateStateList();
                if (ddlCountry.SelectedItem.Value != "0")
                    **ddlState.Items.FindByValue(objAAInfo.CompanyStateId.ToString()).Selected = true;**
            }

            txtPostalCode.Text = objAAInfo.PostalCode;

            //Disable Company Information fields
            txtCompanyWebsite.Enabled = false;
            txtOrganizationName.Enabled = false;
            txtStreetAddress.Enabled = false;
            txtOfficeNumber.Enabled = false;
            txtCity.Enabled = false;
            txtPostalCode.Enabled = false;
            ddlCountry.Enabled = false;
            ddlState.Enabled = false;
        } 
```

项目未在 ddlCountry.Items.FindByValue(objAAInfo.CompanyCountryId.ToString()).Selected = true 被选中，因此最终出错，ddlState.Items.FindByValue(objAAInfo.CompanyStateId.ToString()).Selected = true;

请注意，当我正常调用同一个函数时，一切正常。在这种情况下，我在 Country 列表中找到了 Items，并且 objAAInfo.CompanyCountryId 也在列表中。

请帮我解决这个问题

# javascript - 拆分字符串并获取最长字符串的最大长度

> ID：12403655
> 
> 赞同：1
> 
> 时间：2012-09-13T09:52:31.767
> 
> 标签：javascript, scripting, logic

我想根据`split`一个字符串值`<br/>`

示例字符串：

```
""* Minimum 3 digits allowed<br/>" * Maximum 9 digits & 2 precisions allowed<br/>" 
```

在上述情况下，数组中将有两个值

```
1\. * Minimum 3 digits allowed
2\. * Maximum 9 digits & 2 precisions allowed 
```

并且需要从数组中找到字符串的长度（已经拆分），它在数组中具有最大长度。

所以答案将是 40

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:04:02.850

```
var str = '* Minimum 3 digits allowed<br/>* Maximum 9 digits & 2 precisions allowed<br/>';

var spltArr = str.split("<br/>");
var longStr = null;
var maxLen = -1;
for(var i = 0; i < spltArr.length; i++ ){
    if( longStr === null ){
        longStr =  spltArr[i];
        maxLen =  spltArr[i].length;  
    }
    if( spltArr[i].length > maxLen ){
        longStr =  spltArr[i];
        maxLen =  spltArr[i].length;
    }
}
console.log("Max len: ", maxLen, "String:", longStr); 
```

**[小提琴](http://jsfiddle.net/yWDvK/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:00:03.330

```
var str = "* Minimum 3 digits allowed<br/> * Maximum 9 digits & 2 precisions allowed<br/>";
var arr = str.split('<br/>');

var longest = 0;
var longest_string = '';

for(var i = 0; i < arr.length; i++) {
    if(arr[i].length > longest) {
        longest = arr[i].length;
        longest_string = arr[i];
    }
}

alert("Longest string is: " + longest_string + " (char count: " + longest + ")"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:09:08.863

```
var str = "* Minimum 3 digits allowed<br/>* Maximum 9 digits & 2 precisions allowed<br/>";
var lines = str.split('<br/>');
var longest = '';

for(i=0; i<lines.length; i++) {
    if(lines[i].length > longest.length) {
        longest = lines[i];
    }
}
alert('Longest string:' + longest + ' (Length: ' + longest.length + ')'); 
```

# java - RequestFactory 请求 (AutoBeanCodexImpl.doCoderFor) 永远不会完成并使用 100% cpu

> ID：12403658
> 
> 赞同：2
> 
> 时间：2012-09-13T09:52:38.413
> 
> 标签：java, gwt, requestfactory, autobean

我们在 tomcat 上部署了一个 GWT 应用程序，使用几个小时后（2 个 QA 执行一般测试），java 进程开始使用所有 CPU 并且应用程序变慢。

我查看了 tomcat 管理器，发现有许多长时间运行的 HTTP 请求，它们都指向“/gwtRequest”，这是我们的 RequestFactory servlet。

之后我进行了线程转储，发现转储中的所有 RUNNABLE http 线程都指向“AutoBeanCodexImpl.doCoderFor()”

> ```
> "http-8080-51" daemon prio=10 tid=0x00007f23d8b81800 nid=0x4981 runnable [0x00007f23d4285000]
> java.lang.Thread.State: RUNNABLE
> at java.util.HashMap.get(HashMap.java:303)
> at com.google.web.bindery.autobean.shared.impl.AutoBeanCodexImpl.doCoderFor(AutoBeanCodexImpl.java:519)
> at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.setProperty(AbstractAutoBean.java:276)
> at com.google.web.bindery.autobean.vm.impl.ProxyAutoBean.setProperty(ProxyAutoBean.java:253)
> at com.google.web.bindery.autobean.vm.impl.BeanPropertyContext.set(BeanPropertyContext.java:44)
> at com.google.web.bindery.requestfactory.server.Resolver$PropertyResolver.visitValueProperty(Resolver.java:155)
> at com.google.web.bindery.autobean.vm.impl.ProxyAutoBean.traverseProperties(ProxyAutoBean.java:289)
> at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.traverse(AbstractAutoBean.java:166)
> at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.accept(AbstractAutoBean.java:101)
> at com.google.web.bindery.requestfactory.server.Resolver.resolveClientValue(Resolver.java:414)
> at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.processInvocationMessages(SimpleRequestProcessor.java:493)
> at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.process(SimpleRequestProcessor.java:235)
> at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.process(SimpleRequestProcessor.java:137)
> at com.google.web.bindery.requestfactory.server.RequestFactoryServlet.doPost(RequestFactoryServlet.java:133) 
> ```

有人可以指出我应该看的地方吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:29:51.237

啊，哎哟！看起来我们正在使用`HashMap`没有任何同步的静态！我相信这是因为 AutoBeans 最初设计为仅在浏览器中工作，它是单线程的。

这是[在主干中修复的](http://code.google.com/p/google-web-toolkit/source/detail?r=11268)，它应该会在几天内发布[到 2.5.0-rc2中。](https://groups.google.com/d/topic/google-web-toolkit-contributors/fc_r56Lu4Us/discussion)您可以跟踪[问题](http://code.google.com/p/google-web-toolkit/issues/detail?id=7667)状态。

# c++ - 你能按地址比较对象是否相等吗？

> ID：12403659
> 
> 赞同：14
> 
> 时间：2012-09-13T09:52:42.013
> 
> 标签：c++

我有一个按每个属性比较对象以查看它们是否相同的函数。但我只是想知道，通过地址比较对象而不是检查它们是否完全相同的对象会更好吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-13T09:55:06.150

编辑：当心：如果你希望它正常工作，你不能将值（对象）传递给你的函数。您需要传递（可能是 const）引用或指针。

如果您只想知道两个引用或指针是否都指向同一个对象（不是相同的对象，而是相同的），那么比较地址是正确的做法，确实：

```
bool AreEqual(const Class& a, const Class& b)
{
  return &a == &b;
} 
```

* * *

请注意，上面`&`的类可能会重载运算符`Class`。从 C++11 开始，函数模板`std::addressof`可用于处理这一事实：

```
#include <memory> //std::addressof
bool AreEqual(const Class& a, const Class& b)
{
  return std::addressof(a) == std::addressof(b);
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-13T10:01:21.340

您应该决定您的类是否旨在支持*equivalence*或*identity*。等价是*值*的典型属性，例如数字。身份是*实体*的典型属性，例如人。

等价性通常通过比较一个类的数据成员来确定；比较地址是检查身份的合理方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T09:58:54.203

我想你在相同和平等之间做出了适当的区分。

两个指向同一个地址的指针意味着它们指向同一个对象。所以是的：相同的地址意味着相同的对象，因此相等（尽管只有当我们谈论超过 1 个对象时，相等才有意义）。

相同的属性不一定意味着相同的对象。例如，您可以有两个具有相同名称“John Doe”的用户。代表它们的对象仍然是不同的对象，因此它们不能互换使用。但是，如果您有一个 Point 类，那么两个不同的实例`{1, 2}`实际上代表了同一件事，并且可以互换使用。

[值对象](http://c2.com/cgi/wiki?ValueObject)和[引用对象或实体](http://c2.com/cgi/wiki?ReferenceObject)之间存在较大差异的问题，因此我建议查找它。

例如，如果您有一个 Point 类，那么与之前的 User 示例不同，两个不同的实例`{1, 2}`实际上代表同一事物。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T10:05:20.923

如果您有比较耗时的对象，比较指针可以用作确定对象等价的快速方法（即，如果指针相等，则对象是等价的，否则它们可能仍然是等价的）

# mysql - 如何在没有 DROP 数据库权限的情况下从命令行删除所有 MySQL 表？

> ID：12403662
> 
> 赞同：229
> 
> 时间：2012-09-13T09:52:46.353
> 
> 标签：mysql, command-line, sql-drop

如何使用命令提示符删除 Windows MySQL 中的所有表？我想这样做的原因是我们的用户可以访问数据库删除，但无权重新创建数据库本身，因此我们必须手动删除表。有没有办法一次删除所有表？请记住，大多数表都与外键链接，因此必须按特定顺序删除它们。

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2012-09-13T09:58:49.613

您可以像这样生成语句：`DROP TABLE t1, t2, t3, ...`然后使用准备好的语句来执行它：

```
SET FOREIGN_KEY_CHECKS = 0; 
SET @tables = NULL;
SELECT GROUP_CONCAT('`', table_schema, '`.`', table_name, '`') INTO @tables
  FROM information_schema.tables 
  WHERE table_schema = 'database_name'; -- specify DB name here.

SET @tables = CONCAT('DROP TABLE ', @tables);
PREPARE stmt FROM @tables;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
SET FOREIGN_KEY_CHECKS = 1; 
```

* * *

## 回答 #2

> 赞同：287
> 
> 时间：2013-09-04T23:41:31.573

@Devart 的版本是正确的，但这里有一些改进以避免出错。我已经编辑了@Devart 的答案，但没有被接受。

```
SET FOREIGN_KEY_CHECKS = 0;
SET GROUP_CONCAT_MAX_LEN=32768;
SET @tables = NULL;
SELECT GROUP_CONCAT('`', table_name, '`') INTO @tables
  FROM information_schema.tables
  WHERE table_schema = (SELECT DATABASE());
SELECT IFNULL(@tables,'dummy') INTO @tables;

SET @tables = CONCAT('DROP TABLE IF EXISTS ', @tables);
PREPARE stmt FROM @tables;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
SET FOREIGN_KEY_CHECKS = 1; 
```

如果您已经通过添加至少一个不存在的“虚拟”表删除了数据库中的所有表，则此脚本不会引发 NULL 结果错误。

如果您有很多桌子，它会修复。

并且这个删除所有视图的小改动存在于数据库中

```
SET FOREIGN_KEY_CHECKS = 0;
SET GROUP_CONCAT_MAX_LEN=32768;
SET @views = NULL;
SELECT GROUP_CONCAT('`', TABLE_NAME, '`') INTO @views
  FROM information_schema.views
  WHERE table_schema = (SELECT DATABASE());
SELECT IFNULL(@views,'dummy') INTO @views;

SET @views = CONCAT('DROP VIEW IF EXISTS ', @views);
PREPARE stmt FROM @views;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
SET FOREIGN_KEY_CHECKS = 1; 
```

它假定您从要删除的数据库中运行脚本。或在此之前运行：

```
USE REPLACE_WITH_DATABASE_NAME_YOU_WANT_TO_DELETE; 
```

感谢 Steve Horvath 发现反引号问题。

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2013-09-19T08:28:42.550

尝试这个。

这甚至适用于具有约束（外键关系）的表。或者，您可以只删除数据库并重新创建，但您可能没有必要的权限来执行此操作。

```
mysqldump -u[USERNAME] -p[PASSWORD] \
  --add-drop-table --no-data [DATABASE] | \
  grep -e '^DROP \| FOREIGN_KEY_CHECKS' | \
  mysql -u[USERNAME] -p[PASSWORD] [DATABASE] 
```

为了克服外键检查的影响，`show table`在生成的脚本末尾添加并运行多次，直到`show table`命令结果为空集。

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2012-09-13T09:58:20.107

您可以**删除**然后使用以下内容`database`重新**创建**它：-

```
mysql> drop database [database name];
mysql> create database [database name]; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-06-10T18:26:38.237

接受的答案不适用于具有大量表的数据库，例如 Drupal 数据库。相反，请参阅此处的脚本：[https](https://stackoverflow.com/a/12917793/1507877) ://stackoverflow.com/a/12917793/1507877 ，它适用于 MySQL 5.5。注意：在第 11 行附近，有一个“WHERE table_schema = SCHEMA();” 这应该是“WHERE table_schema = 'INSERT NAME OF DB INTO WHICH IMPORT WILL OCCUR';”

# javascript - 如何在 Javascript/Jquery 中以编程方式调用突出显示效果（类似于鼠标悬停）？

> ID：12403664
> 
> 赞同：1
> 
> 时间：2012-09-13T09:53:09.963
> 
> 标签：javascript, jquery, html

我正在编写一个界面，其中将有一个宽按钮列表，我希望能够根据向上或向下移动的鼠标突出显示一个按钮。鼠标向下移动时选择当前突出显示的按钮下方的按钮，鼠标向上移动时选择上方的按钮。

我正要写一大堆 CSS 操作 Jquery 代码来做到这一点，但这样做感觉不对。

欢迎提出任何建议（包括傻瓜的做法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:04:28.973

使用 CSS 突出显示您的按钮

**例子：**

```
button{color: green}
button:hover{color: red} 
```

# c++ - javascript 上的 ChtmlView MFC 内存泄漏

> ID：12403665
> 
> 赞同：1
> 
> 时间：2012-09-13T09:53:18.850
> 
> 标签：c++, mfc

我有一个需要显示网页的 MFC 应用程序。我已经通过 CSingleDocTemplate 添加了一个 CHtmlView，它会生成一个窗口并很好地显示页面，但是在运行 javascript 时它会泄漏内存。

我正在查看的页面是由 Madcap flare 生成的，因此使用 javascript 非常繁重。只是坐着看页面，我每秒损失大约 4K。

我试图通过让用户关闭文档来减少问题，但后来我遇到了一个问题，不知道 CFrameWnd 是否在主应用程序中关闭，所以不知道我是否需要创建一个新文件或只是重用它。

我在安装了 IE9 的 Windows 7 上运行它，所以如果我是对的，我应该很清楚旧的 IE javascript 循环引用错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:54:16.093

它在发布和调试版本中都会发生吗？**在释放悬空指针**或破坏堆栈时，我看到了类似的（有点确定性的）错误。如果运气不好，错误代码的*未定义行为*可能会导致内存泄漏。

1.  尝试在您的构建中启用所有可能的运行时检查，看看错误是否消失（或以某种方式检测到）。
2.  尝试注释掉大代码块，看看错误是否消失。

我只是在这里猜测:)

# iphone - 通过分发配置文件进行应用内购买

> ID：12403668
> 
> 赞同：0
> 
> 时间：2012-09-13T09:53:23.770
> 
> 标签：iphone, ios, in-app-purchase

我正在尝试实现应用内购买，但是在阅读教程时-> [http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)我知道应该是开发者配置文件而不是分发配置文件来测试应用内购买。我想稍后将应用程序交给我的客户进行测试。所以我的问题是我应该使用分发配置文件实现应用内吗？我的客户能够测试它吗？如果不是比任何其他想法？到目前为止，我还没有告诉我的客户创建开发者帐户。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:43:07.070

您必须使用开发者资料来测试应用内购买，您的客户将能够测试它（基于应用内的类型）。

# iphone - 如何提高 SQLite+UITableView 应用程序的性能？

> ID：12403670
> 
> 赞同：0
> 
> 时间：2012-09-13T09:53:27.803
> 
> 标签：iphone, sqlite, uitableview

我们有一个带有 sqlite 的应用程序，它有超过 10,000 行和超过 10MB

在我们的第一个视图中，我们有两个按钮，单击第一个按钮将转到另一个具有 tableview 的视图，我们需要在该 tableview 中显示所有这 10,000 条记录以进行搜索。

由于我们一次加载所有项目，因此在第一个视图中单击按钮时需要一些时间来加载该视图。

有什么办法可以避免延误吗？像任何延迟加载选项或首先显示 100-1000 行然后在底部附加所有其他行。

**这是苹果写的：**

我们发现您的应用程序的用户界面存在以下问题：

*   您的应用程序响应非常缓慢。例如，当我们点击电影或专辑按钮时，需要 5 秒钟。`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:30:53.393

您可以尝试使用 LIMIT 和 OFFSET 子句分批加载数据。请参阅 sqllite[文档](http://www.sqlite.org/lang_select.html)。例如，在页面加载时，您请求前 100 个结果行，当该请求完成时，您可以请求接下来的 100 个等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T10:04:25.743

您正在使用`tableView`，然后使用此代码此代码使用视图大小生成单元格。请将该行放入`cellForRowAtIndexPath`方法中

```
TableCell *cell = (TableCell *)[tableView dequeueReusableCellWithIdentifier:[NSString stringWithFormat:@"%d",indexPath.row]]; 
```

# html - 是否可以在 CSS 中重新创建此菜单？

> ID：12403674
> 
> 赞同：-4
> 
> 时间：2012-09-13T09:53:41.640
> 
> 标签：html, css

![菜单](../Images/df3daff595f28b3c73a5c463bb339316.png)

滚动文本，下面的蓝色块沿着蓝线移动。如果我通过相对位置进行操作并将蓝色块设置为顶部 20px，它也会将文本向下移动。

有没有办法我可以纯粹在 CSS 中做到这一点，或者我应该使用上半部分设置为透明 gif 和底部蓝色的背景图像？

到目前为止我尝试过的代码是：

```
#menu ul {
    list-style:none;
    margin:0;
    padding:10px;
    text-align:center;
}
#menu ul li {
    display:block;
    float:left;
    list-style:none;
    margin-right: 40px;
    font-family: Arial, Helvetica, sans-serif;
    color: #FFF;
    font-size: 14px;
    padding-top: 5px;
    padding-bottom: 5px;
    height: 39px;
}
#menu ul li a {
    display:block;
    margin:0px;
    padding:0px;
    color:#FFF;
    text-decoration:none;
    font-family: Arial, Helvetica, sans-serif;
    margin-right: 5px;
    margin-left: 5px;
    padding-left: 10px;
    padding-right: 10px;
}
#menu ul li a:hover {
    color:#fff;
    margin-bottom:5px;
    padding-bottom:5px;
}
#menu ul li a.active,
#menu ul li a.active:hover {
    color:#fff;
    background-color: #0488C5;
    font-weight:bold;
} 
```

我还在学习，请原谅任何错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:00:41.757

[单击此处进行演示](http://jsfiddle.net/spacebeers/wu33u/1/)。

```
​&lt;ul>
    <li><a href="#" class="active">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Products</a></li>
</ul>

ul {
    width: 100%;
    border-bottom: 3px solid blue;
    overflow: hidden;
}

li {
    float: left;  
    margin: 0 20px 0 20px;                
}

li a {
    border-bottom: 20px solid #fff;
    display: block;
}

li a:hover, .active {
    border-bottom: 20px solid blue;
} 
```

然后，您可以将悬停状态用于另一个名为“活动”的类，您可以在该页面上应用该类。

您应该能够调整此示例以满足您的需要。

您不需要任何图像。CSS 完全有能力为您做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:01:36.023

.....................................

***[现场演示](http://tinkerbin.com/jDW8s6q6)***

嗨，现在这可以用来`after in css`

作为一个简单的例子是这个

**HTML**

```
<ul>
  <li><a href="#">Home</a></li>
   <li><a href="#">Home</a></li>
   <li><a href="#">Home</a></li>
   <li><a href="#">Home</a></li>
   <li><a href="#">Home</a></li>
   <li><a href="#">Home</a></li>
</ul> 
```

**CSS**

```
 ul{
list-style:none;
  border-bottom:solid 10px blue;
}
li{
display:inline-block;
  vertical-align:top;
  background:red; 
}
li a{
text-decoration:none;
  display:inline-block;
  vertical-align:top;
  position:relative;
  padding-left:10px;
  padding-right:10px;
  padding-bottom:10px;
}

li:hover a:after{
content:'';
  position:absolute;
  left:0;
  right:0;
  bottom:0;
  height:10px;
  background:blue;
} 
```

***[现场演示](http://tinkerbin.com/jDW8s6q6)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:57:50.857

将三个锚点放在一个无序列表中，并通过将列表显示设置为无浮动列表项来内嵌显示它们。进一步为每个锚点添加一个空跨度，您可以使用 :hover 伪选择器对其进行样式设置。

学习 CSS，很有趣！

# php - 在 Magento .phtml 中检测将启用 BLOCK_HTML 缓存的主页

> ID：12403675
> 
> 赞同：6
> 
> 时间：2012-09-13T09:53:42.920
> 
> 标签：php, magento, magento-1.4

我在 catalog/navigation/vert_nav.phtml 中尝试了以下两种方法来添加或抑制特定于主页的内容：

```
if($this->getUrl('') == $this->getUrl('*/*/*', array('_current'=>true, '_use_rewrite'=>true))): 
```

或者

```
if(
Mage::getSingleton('cms/page')->getIdentifier() == 'home'  &&
Mage::app()->getFrontController()->getRequest()->getRouteName() == 'cms' 
) : 
```

两者都工作正常，但是当 BLOCK_HTML 缓存打开时，它首先工作，然后主页开始显示仅用于其他页面的内容（在我使用的 else 子句之后）。当我关闭 BLOCK_HTML 时，它的行为符合预期。

有趣的是，我在 page/html/head.phtml （用于主页特定的 javascript/css）和 page/html/header.phtml （用于应该只出现在主页），即使在 BLOCK_HTML 为 ON 时，这些也能正常工作。

(Magento 1.4.1.1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:32:41.467

以下是您想要阅读的有关 Block Html 缓存的资源：

1.  [magento 论坛](http://www.magentocommerce.com/wiki/5_-_modules_and_development/block_cache_and_html_ouput)
2.  [一些博客](http://wabism.com/magento-bypass-caching-for-individual-block/)
3.  [印章博客](http://inchoo.net/ecommerce/magento/magento-block-caching/)

最好不要完全禁用块，而是以智能的方式指定缓存键。所以这是你应该做的：

1.  首先 - 为您的 .phtml 文件指定一个自定义块。如果您不知道 Block 是什么，或者不知道如何将块分配给模板文件，[请](http://alanstorm.com/layouts_blocks_and_templates)参阅 Alan Storm 博客。
2.  其次 - 您必须将下一个代码添加到 Block 构造函数：

    ```
    $this->addData(array(
        'cache_lifetime' => 3600,
        'cache_tags'     => array(Mage_Cms_Model_Block::CACHE_TAG),
        'cache_key'      => $this->getCacheKey(),
    )); 
    ```

    如您所见，我在这里使用`getCacheKey`了抽象类中的方法`Mage_Core_Block_Abstract`。

3.  现在您需要确保 cache_key 适用于您的逻辑。使用`Mage_Core_Block_Abstract::getCacheKey`其他方法，它实际上应该为我们的块指定唯一值 - `getCacheKeyInfo`。您需要使用您的逻辑重新定义它：

    ```
    public function getCacheKeyInfo()
    {
        $isHomepage = 0;
        if (Mage::getSingleton('cms/page')->getIdentifier() == 'home') {
            $isHomepage = 1;
        }
        return array(
            $this->getNameInLayout(),
            $isHomepage,
        );
    } 
    ```

    现在您可以确定主页的缓存键与您所有其他页面的缓存键不同，并且您的缓存将返回有效信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T11:13:15.473

上面的答案是最好的解决方案。

您可以简单地复制 app/code/core/Mage/Catalog/Block/Nagivation.php

到：

app/code/local/Mage/Catalog/Block/Nagivation.php

然后如上所述更改 getCacheKeyInfo() 方法。

```
/**
 * Get Key pieces for caching block content
 *
 * @return array
 */
public function getCacheKeyInfo()
{
    $shortCacheId = array(
        'CATALOG_NAVIGATION',
        Mage::app()->getStore()->getId(),
        Mage::getDesign()->getPackageName(),
        Mage::getDesign()->getTheme('template'),
        Mage::getSingleton('customer/session')->getCustomerGroupId(),
        'template' => $this->getTemplate(),
        'name' => $this->getNameInLayout(),
        $this->getCurrenCategoryKey(),
        // Your logic to make home/none home have different cache keys
        Mage::getSingleton('cms/page')->getIdentifier() == 'home' ? '1' : '0'
    );
    $cacheId = $shortCacheId;

    $shortCacheId = array_values($shortCacheId);
    $shortCacheId = implode('|', $shortCacheId);
    $shortCacheId = md5($shortCacheId);

    $cacheId['category_path'] = $this->getCurrenCategoryKey();
    $cacheId['short_cache_id'] = $shortCacheId;

    return $cacheId;
} 
```

这将使主页/非主页页面的缓存键不同，它将缓存两个副本，而不是缓存单个模板副本以供所有页面使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-12T12:01:25.117

我们用

```
<!-- SNH CUSTOM -->

    $route = Mage::app()->getFrontController()->getRequest()->getRouteName();

    $action = Mage::app()->getFrontController()->getRequest()->getActionName();

if($route == 'cms' && $action == 'index'):

    <div class="grid_12">

        echo $this->getChildHtml('shopper_footer_partners');

    </div>

endif; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-26T17:19:53.943

只是为了添加这些答案，建议检查当前页面标识符是否等于“主页”。

与之相比肯定会更安全`Mage::getStoreConfig('web/default/cms_home_page')`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-30T13:51:20.707

最好的方法是：

1 更新您的布局 XML（local.xml 或主题 custom.xml）

```
<!--  CUSTOM: ADD NEW FOOTER BLOCK AT BOTTOM FOR PARTNERS -->
<cms_index_index>
    <reference name="footer">
    <block type="cms/block" name="footer_block_extra">
        <action method="setBlockId"><block_id>footer_block_extra</block_id></action>
    </block>
    </reference>
</cms_index_index> 
```

第 2 步将此代码添加到模板 phtml 中您想要的块（通常是 /page/html/footer.phtml）

```
<!-- SNH CUSTOM -->
<div class="grid_12">
    <?php echo $this->getBlockHtml('footer_block_extra'); ?>
</div> 
```

第 3 步在您的后端创建一个新的 CMS 块，其 ID 为“footer_block_extra”...并添加您的内容。

# syntax-highlighting - 以 Notepad++ 自定义语言突出显示数字（例如关键字）（用于访问日志）

> ID：12403687
> 
> 赞同：6
> 
> 时间：2012-09-13T09:54:24.230
> 
> 标签：syntax-highlighting, notepad++, http-status-codes

我想为 Notepad++ 中的访问日志编写自定义语言。

问题是数字（这里：HTTP 状态代码）不会像真正的关键字（即 GET）那样突出显示。Notepad++ 通常只为数字提供高亮颜色。

如何处理文本等数字？

**示例日志文件**

```
192.23.0.9 - - [10/Sep/2012:13:46:42 +0200] "GET /js/jquery-ui.custom.min.js HTTP/1.1" 200 206731
192.23.0.9 - - [10/Sep/2012:13:46:43 +0200] "GET /js/onmediaquery.min.js HTTP/1.1" 200 1229
192.23.0.9 - - [10/Sep/2012:13:46:43 +0200] "GET /en/contact HTTP/1.1" 200 12836
192.23.0.9 - - [10/Sep/2012:13:46:44 +0200] "GET /en/imprint HTTP/1.1" 200 17380
192.23.0.9 - - [10/Sep/2012:13:46:46 +0200] "GET /en/nothere HTTP/1.1" 404 2785 
```

**示例自定义语言**
[http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=User_Defined_Language_Files](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=User_Defined_Language_Files)

我还尝试编辑和导入这样的预定义语言：http:
[//notepad-plus.sourceforge.net/commun/userDefinedLang/Log4Net.xml](http://notepad-plus.sourceforge.net/commun/userDefinedLang/Log4Net.xml)

我认为自定义语言应该是这样的：

```
<KeywordLists>
[...]
    <Keywords name="Words1">404 501</Keywords>
    <Keywords name="Words2">301 303</Keywords>
    <Keywords name="Words3">200</Keywords>
</KeywordLists>

<Styles>
    <WordsStyle name="DEFAULT" styleID="11" fgColor="000000" bgColor="FFFFFF" colorStyle="0" fontName="Courier New" fontStyle="0"/>
    [...]
    <WordsStyle name="KEYWORD1" styleID="5" fgColor="FF0000" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="0"/>
    <WordsStyle name="KEYWORD2" styleID="6" fgColor="0000FF" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="1"/>
    <WordsStyle name="KEYWORD3" styleID="7" fgColor="00FF00" bgColor="FFFFFF" colorStyle="1" fontName="" fontStyle="0"/>
    [...]

    // This line causes number highlighting. Deletion doesn't work either.
    <WordsStyle name="NUMBER" styleID="4" fgColor="0F7F00" bgColor="FFFFFF" fontName="" fontStyle="0"/>
</Styles> 
```

不幸的是，数字将以相同的颜色着色。

我想给它们上色：
![在访问日志中突出显示数字的示例](../Images/8260f5d4bce104d603fb7bca3b3cdb28.png)

等等

有什么建议么？如何处理关键字等数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:38:39.587

无法将*数字*突出显示为关键字，因为内置词法分析器（解析器/语言定义）使用数字作为标记，这意味着区分数字和关键字的唯一方法是解析整个数字块和然后与关键字列表进行比较，在这种情况下，还需要解析数字块周围的分隔符以确保`.200.`不会突出显示为`200`. 这就是为什么您的数字都以相同颜色突出显示的原因；即“数字”颜色。

虽然这可以使用自定义词法分析器使用固定位置标记或正则表达式匹配来完成，但您会发现用户定义的语言（我听说的最后一个）没有此功能。

由于您的要求实际上是一个相当简单的，据我了解，尽可能笼统（如您的评论中所要求的）......

```
Highlight space delimited numeric values contained in a given set.

    [[:space:]](200|301|404)[[:space:]] 
```

我们可以将“查找”对话框的“标记”功能与该正则表达式一起使用，但随后所有内容都被标记为与您失败的实验相同的颜色。

也许简单并适合您的需要是使用 npp pythonscript 和中的`Mark Style`设置`Style Configurator`来获得所需的结果？

类似于这种粗略的宏观风格：

```
from Npp import *

def found(line, m):
    global first
    pos = editor.positionFromLine(line)
    if first:
        editor.setSelection(pos + m.end(), pos + m.start())
        first = False
    else:
        editor.addSelection(pos + m.end(), pos + m.start())

editor.setMultipleSelection(True)
lines = editor.getUserLineSelection()

# Use space padded search since MARKALLEXT2 will act just
# like the internal lexer if only the numeric is selected
# when it is called.

first = True
editor.pysearch( " 200 ", found, 0, lines[0], lines[1])
notepad.menuCommand(MENUCOMMAND.SEARCH_MARKALLEXT1)

first = True
editor.pysearch( " 301 ", found, 0, lines[0], lines[1])
notepad.menuCommand(MENUCOMMAND.SEARCH_MARKALLEXT2)

first = True
editor.pysearch( " 404 ", found, 0, lines[0], lines[1])
notepad.menuCommand(MENUCOMMAND.SEARCH_MARKALLEXT3) 
```

要使用哪个，只需使用插件管理器安装`Python Script`，转到插件菜单，`New Script`然后选择粘贴，保存，选择要解析的文档的选项卡，然后执行脚本（再次从插件菜单中）。

显然，您可以将所有 5 种标记样式用于不同的术语，您可以指定一个快捷方式，并且您可以更多地了解 nppPython 的“脚本”-vs-“宏”样式，并制作一个完整的脚本来解析您想要的任何内容。 .. 每当您选择特定的词法分析器样式时，使用脚本触发器进行拍摄也是可行的。

# opengl - 不删除opengl中的纹理内存

> ID：12403688
> 
> 赞同：1
> 
> 时间：2012-09-13T09:54:25.543
> 
> 标签：opengl, memory-management, drivers

> **可能重复：**
> [在opengl中删除纹理](https://stackoverflow.com/questions/11958298/deleting-textures-in-opengl)

如果我在显卡上分配了纹理内存并且我选择在应用程序退出时不删除它，我可以依靠 opengl 驱动程序/操作系统为我删除它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:09:46.527

一旦所有可以访问它们的上下文都被销毁，OpenGL 资源就会被隐式释放。当客户端终止时，进程的 OpenGL 上下文被破坏；然而，在间接 GLX 上下文对象的情况下，X11 客户端可以共享它们，因此只有在最后一个可以访问它们的客户端终止后才能释放它们。

然而，在自己之后进行清理始终是一个好习惯。

**注意：来自 datenwolf。（不是来自我）**

# sharepoint - 如何在 SharePoint 2010 中为内容查询 Webpart 指定背景图像？

> ID：12403695
> 
> 赞同：2
> 
> 时间：2012-09-13T09:55:04.823
> 
> 标签：sharepoint, web-parts, content-query-web-part

如何在 SharePoint 2010 中设置内容查询 Web 部件的背景样式？

我一直在环顾四周，似乎无法弄清楚。我可以使用 SharePoint 设计器中的 ItemStyle.xsl 文件编辑单个项目样式，但我需要容器上的背景图像。

我在 CSS 中引用了 SharePoint 生成的类 - 'WebPartWPQ4' - 并使其以这种方式工作，但这会改变系统中*所有*Web 部件的样式。（这也感觉有点像黑客）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:56:12.427

尝试覆盖 CSS 中的自定义样式是完全可以的（尽管“WebPartWPQ4”不是最佳选择）。但是，要获得所需的内容，只需确保要设置样式的 Web 部件周围有一些包装器，并将 css 中的选择器更改为 .wrapper > .WebPartWPQ4 ，以便仅设置 Web 部件的此实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:28:09.933

我解决这个问题的方法是将 webpart 区域包装在 .aspx 页面文件的 div 中。然后，您可以在 css 文件中引用此 div。

# html - jquery ajax json数据截断零值

> ID：12403698
> 
> 赞同：3
> 
> 时间：2012-09-13T09:55:08.597
> 
> 标签：html, json, jquery

我正在使用 jquery ajax 检索如下 json 字符串并将其显示在 xhtml 页面上

```
{"pID":"T1","avBal":147765035.20,"accBalance":147713417.00} 
```

我有这样写的jquery，

```
 $.ajax({

              type : "GET",
              url : '../accData.xhtml',
              dataType : "json",
              async : true,
              cache : false,

              success: function(data) {
                        if(data!=null){
                          $("#accBalance").text(data.accBalance);
                                      $("#avBal").text(data.avBal);
                        }

          },
              error : function() {
          }
         }); 
```

这里的问题是它将“avBal”显示为 147765035.2，将“accBalance”显示为 147713417，没有零，值末尾的所有零都会自动截断。这是 jQuery 或 json 的限制还是这里有其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:02:10.210

不是 jQuery 或 JSON 的错，而是 JavaScript。JavaScript 是松散类型的，123 和 1.23 都是 Number 类型。如果精度很重要，请将这些值视为字符串。

这是一个漂亮的函数，它将根据需要格式化值：

```
function toFixed(value, precision) {
    var power = Math.pow(10, precision || 0);
    return String(Math.round(value * power) / power);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:56:38.420

请替换您的脚本如下：

```
$.ajax({

              type : "GET",
              url : '../accData.xhtml',
              dataType : "json",
              async : true,
              cache : false,

              success: function(data) {
                        if(data!=null){
                                //chage is here...
                                 $("#accBalance").text(parseFloat(data.accBalance).toFixed(2));
                                 $("#avBal").text(parseFloat(data.avBal).toFixed(2));
                        }

          },
              error : function() {
          }
         }); 
```

# java - Ant - 如何排除 Java 测试文件？

> ID：12403699
> 
> 赞同：4
> 
> 时间：2012-09-13T09:55:10.007
> 
> 标签：java, ant

我想将Java代码从源文件夹复制到目标文件夹并编译它，但需要排除一些测试代码。我怎样才能只复制非测试代码？例如，我想包含`bb/app/lite2`和排除`bb/app/test1`, `bb/app/cg`,...

我知道我可以使用排除元素，但我不想写这么多排除模式。所以我可以使用：

`<exclude name="bb/app/**">`然后使用`<include name="bb/app/lite2">`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T14:07:38.970

鉴于您的问题中提到的目录结构，听起来您的所有非测试代码都在目录中`bb/app/lite2`。`<copy>`在这种情况下，只要`bb/app/lite2`出现在指定的源目录下面，您就可以编写如下任务：

```
<property name="source.dir" location="${basedir}/src" />
<property name="target.dir" location="${basedir}/target" />

<copy todir="${target.dir}" overwrite="true">
  <fileset dir="${source.dir}" includes="bb/app/lite2/**/*.java" />
</copy> 
```

但是，为您的测试文件采用命名约定，例如`<ClassName>Test.java`可以编写包含/排除模式，如下所示。

## 复制除测试以外的所有来源

```
<property name="source.dir" location="${basedir}/src" />
<property name="target.dir" location="${basedir}/target" />

<copy todir="${target.dir}" overwrite="true">
  <fileset dir="${source.dir}" 
      includes="**/*.java" excludes="**/*Test.java" />
</copy> 
```

[`<javac>`](http://ant.apache.org/manual/Tasks/javac.html)Ant 任务的支持`includes`和`excludes`属性，因此您可以直接选择非测试文件，而不是将源文件复制到新目录。

## 使用`<javac>`Ant 任务`includes`和`excludes`属性

```
<property name="source.dir" location="${basedir}/src" />
<property name="classes.dir" location="${basedir}/build/classes" />

<javac srcdir="${source.dir}" destdir="${classes.dir}"
    includes="**/*.java" excludes="**/*Test.java"
    classpathref="my.classpath" debug="on" deprecation="on" /> 
```

正如[David W.](https://stackoverflow.com/users/368630/david-w)在他的评论中提到的，另一个约定（可以与文件命名约定结合使用）是将测试代码放在单独的目录中。例如，

*   `src/java`
*   `test/src/java`

或遵循 Maven 约定：

*   `src/main/java`
*   `src/test/java`

然后编译您的非测试源很简单，因为您不必指定包含/排除模式：

```
<property name="source.dir" location="${basedir}/src/java" />
<property name="classes.dir" location="${basedir}/build/classes" />

<javac srcdir="${source.dir}" destdir="${classes.dir}"
    classpathref="my.classpath" debug="on" deprecation="on" /> 
```

### 相关的stackoverflow问题

*   [如何组织Java程序的源文件？](https://stackoverflow.com/q/11926334/1164465)
*   [在项目中组织 JUnit 测试](https://stackoverflow.com/q/183780/1164465)

# php - xampp 服务器中的错误未读取 如果我这样写，我的 xampp 服务器 php 文件有问题，无法正常工作 工作 服务器不会读取第一个状态的内容，如何修复它以同 问问题 问问题 2012-09-13T09:55:35.050 435 次 This question shows research effort; it is useful and clear -2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 如果我这样写，我的 xampp 服务器 php 文件有问题，无法正常工作 工作 服务器不会读取第一个状态的内容，如何修复它以同时使用两者？ 您需要启用短标签才能在没有 PHP 位的情况下 在php.ini中查找：short_open_tag并将其设置为： short_open_tag=On 然后重新启动 Apache。 php 4 1 回答 1 This answer is useful 0 您需要启用短标签才能在没有 PHP 位的情况下 在php.ini中查找：short_open_tag并将其设置为： short_open_tag=On 然后重新启动 Apache。 于 2012-09-13T09:56:18.070 回答 Related 2 jquery - jQuery Validate Plugin - 在错误消息中显示最小长度“要运行的字符” 1 c++ - 我不明白为什么这段代码不会打开文件 4 grails - 如何使用 gsp 模板创建文本文件？ 2 mysql - 如何在 MySQL 数据库中创建复合键 1 scala - Scala 玩国际化：如何在所有模板中设置显式语言 1 google-analytics - 升级到新的异步 Google Analytics 代码 - 你应该这样做吗？ 3 erlang - Erlang：混合列表：seq 与模式匹配 2 objective-c - 尝试转换为 NSInteger * 和 NSMutableArray * 时出错 5 java - 如何编写测试类来测试我的代码？ 3 python - 如何调试 Python 内存故障？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12403702
> 
> 赞同：-2
> 
> 时间：
> 
> 标签：php

如果我这样写，我的 xampp 服务器 php 文件有问题，无法正常工作

```
<?
echo " Not Work " ;

?> 
```

工作

```
<?php 

echo " it's work " ;

?> 
```

服务器不会读取第一个状态的内容，如何修复它以同时使用两者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:56:18.070

您需要启用短标签才能在没有 PHP 位的情况下`<?`使用。`?>`

[在php.ini](http://php.net/manual/en/ini.core.php)中查找：short_open_tag并将其设置为：

```
short_open_tag=On 
```

然后重新启动 Apache。

# ruby-on-rails - Rails：一种用于存储临时数据的可变数据结构

> ID：12403706
> 
> 赞同：0
> 
> 时间：2012-09-13T09:55:49.643
> 
> 标签：ruby-on-rails, performance, data-structures, volatile

我正在对移动应用程序的后端进行编程，我遇到了这个问题，想知道我是否可以使用 rails 工具，或者我应该为我当前的系统实施一项新技术。

我们的用户能够提出请求，要求与周围的任何人聊天。但是我们的系统（后端）必须收集这些数据并随机选择一个同意聊天的用户。但为此，我想将所有同意聊天的人保留在一个列表中并随机选择一个元素。但我想以一种不稳定的方式实现这一点，这样当有人随机选择时，所有其他候选人都会消失。

当然，这些候选人可以很容易地存储在一个表中，然后可以删除，但我相信有一个结构可以按需使用并随时转储。那么我应该使用什么样的数据结构来提供这种效率呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:11:48.363

如果你想要一个易失性存储选项，Redis 可能是最好的选择。由于数据存储在内存中，因此速度很快。如果您有许多 Rails 实例正在运行，它们仍将访问同一个中央 Redis 服务器。

如果你想知道一个数据结构，我猜一个用户 ID 数组就足够了。

# c# - 过滤后的 Gridview 确实编辑了正确的行

> ID：12403708
> 
> 赞同：1
> 
> 时间：2012-09-13T09:55:55.057
> 
> 标签：c#, asp.net, gridview, sqldatasource

我有一个适用于 SQLDataSource 的 gridview。编辑、删除按钮完美运行。
但是，当我搜索任何记录并尝试编辑该记录时，gridview 会在编辑模式下打开第一行。
我不知道我做错了什么。

这是我的代码

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="Customer_id"
        DataSourceID="SqlDataSource1" 
        EmptyDataText="There are no data records to display." AllowPaging="True" 
        AllowSorting="True" CellPadding="4" ForeColor="#333333" GridLines="Horizontal" 
        PageSize="5" Width="873px" onrowediting="GridView1_RowEditing" >
        <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
        <Columns>
            <asp:TemplateField>
                <EditItemTemplate>
                    <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True"
                        CommandName="Update" Text="Update"></asp:LinkButton>
                    &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                        CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                        CommandName="Edit" Text="Edit" ></asp:LinkButton>
                    &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                        CommandName="Select" Text="Select"></asp:LinkButton>
                    &nbsp;<asp:LinkButton ID="LinkButton3" runat="server" CausesValidation="False" 
                        CommandName="Delete" Text="Delete"></asp:LinkButton>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="Customer_id" HeaderText="Customer_id" ReadOnly="True"
                SortExpression="Customer_id" InsertVisible="False" />
            <asp:BoundField DataField="Customer_Name" HeaderText="Customer_Name" 
                SortExpression="Customer_Name" />
            <asp:BoundField DataField="Customer_Type" HeaderText="Customer_Type" SortExpression="Customer_Type" />
        </Columns>
        <EditRowStyle BackColor="#999999" />
        <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" 
            Font-Bold="True" Font-Italic="True" Font-Overline="True" Font-Size="Large" />
        <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
        <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#E9E7E2" />
        <SortedAscendingHeaderStyle BackColor="#506C8C" />
        <SortedDescendingCellStyle BackColor="#FFFDF8" />
        <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
    </asp:GridView> 
```

后面的代码如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    string vs = (string)ViewState["buttonClicked"];
    string isEditing = (string)ViewState["isEditing"];
    if (IsPostBack)
    {
        if (vs == "False")
        {
            RadioButtonListChanged();
            GridView1.DataBind();
        }
        else if (vs == "True")
        {
            btnSearch_Click(sender, e);
            GridView1.DataBind();
        }
    }
}

protected void RadioButton1_SelectedIndexChanged(object sender, EventArgs e)
{
    RadioButtonListChanged();

}

private void RadioButtonListChanged()
{
    ViewState["buttonClicked"] = "False";

    string sqlString;

    if (RadioButton1.SelectedItem.Text != "All")
    {
        sqlString = "Select * from customers where status='True' and  customer_type = '" + RadioButton1.SelectedValue.ToString() + "' order by customer_name";
    }
    else
    {
        sqlString = "Select * from customers where  status='True' order by customer_name";
    }

    SqlDataSource1.SelectCommand = sqlString;
    SqlDataSource1.DataBind();

}

protected void btnSearch_Click(object sender, EventArgs e)
{

    ViewState["buttonClicked"] = "True";

    string sqlString;
    sqlString = "Select * from customers where status='True' and customer_name like '%" + txtCustomerName.Text + "%' order by customer_type, customer_name";
    SqlDataSource1.SelectCommand = sqlString;
    SqlDataSource1.DataBind();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:17:24.493

您在每次回发中再次绑定网格，因此当前行索引每次都设置为零，这会导致第一行被编辑。将您的代码更改为：

```
protected void Page_Load(object sender, EventArgs e)
{
    ...
    if (!IsPostBack)
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:12:46.747

我在这里找到了解决方案 [Gridview Selects Wrong Row For Editing](https://stackoverflow.com/questions/6949826/vb-gridview-selects-wrong-row-for-editing)

在 page_load 事件中

```
if (IsPostBack)
{
    SqlDataSource1.SelectCommand = (string)Session["sqlString"];
    SqlDataSource1.DataBind();
} 
```

当我搜索时，我在按钮事件中做到了这一点

```
Session["sqlString"] = sqlString; 
```

这并不简单:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:57:54.170

您需要从以下位置修改您的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    string vs = (string)ViewState["buttonClicked"];
    string isEditing = (string)ViewState["isEditing"];
    if (IsPostBack)
    {
        if (vs == "False")
        {
            RadioButtonListChanged();
            GridView1.DataBind();
        }
        else if (vs == "True")
        {
            btnSearch_Click(sender, e);
            GridView1.DataBind();
        }
    }
} 
```

到：

```
 protected void Page_Load(object sender, EventArgs e)
        {
            string vs = (string)ViewState["buttonClicked"];
            string isEditing = (string)ViewState["isEditing"];
            if (**!IsPostBack**)                     
                **^^^**
 /*just bind gridview when page is not 
        postback this will not bind oyur gridview on your every request*/
                if (vs == "False")
                {
                    RadioButtonListChanged();
                    GridView1.DataBind();
                }
                else if (vs == "True")
                {
                    btnSearch_Click(sender, e);
                    GridView1.DataBind();
                }
            }

    } 
```

# asp.net-mvc-3 - 在 ASP.NET MVC 3 Razor 的 JqGrid 列中添加 ActionLink

> ID：12403711
> 
> 赞同：1
> 
> 时间：2012-09-13T09:56:10.907
> 
> 标签：asp.net-mvc-3, jqgrid, html.actionlink

我将 jqGrid 与 ASP.NET MVC 3 和 Razor 一起使用。

我希望将 2 列与其余列一起添加到 jqGrid。

我要添加的列是

*   编辑
*   删除

这些列值我想要的`ActionLink`。

**如何将 ActionLink 添加到 JqGrid 的列？**

请指导我。

更新 1：在@user1534482 的帮助下，我尝试了这个但没有奏效

```
colModel: [
    ...
    { name: 'Open', formatter: 'prepareLinks' },
    ...
],

 function prepareLinks(cellvalue, options, rowObject) {
    return "@Html.ActionLink("Open this","Test")";

} 
```

javascript错误消息：

```
SyntaxError: missing ; before statement
[Break On This Error]   

return "<a href="/SomeController/Test">Open this</a>";

SomeController (line 92, col 41) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T10:13:54.840

你应该看看*showlink* [预定义的格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter)。

您的问题中没有代码，所以我不知道您的场景有多复杂，但总的来说，这样的代码应该足够了：

```
<script type="text/javascript">
    jQuery("#gridId").jqGrid({
        colNames: [..., 'Edit', 'Delete'],
        colModel: [
            ...
            {name:'EditAction', formatter:'showlink', formatoptions: { baseLinkUrl: '@Url.Action("Edit")' } },
            {name:'DeleteAction', formatter:'showlink', formatoptions: { baseLinkUrl: '@Url.Action("Delete")' } }
        ],
        ...
    });
</script> 
```

行 ID 将自动添加（您可以使用`idName`选项控制方式）。如果您需要传递一些额外的参数，请查看[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter)`addParam`中的选项。

**更新**

为了澄清最终链接的生成方式，您可以使用以下公式：

```
"<a " + ((op.target) ? "target=" + op.target : "") + " href=\"" + op.baseLinkUrl + op.showAction + "?" + op.idName + "=" + rowId + op.addParam + "\">" + cellvalue + "</a>" 
```

对象在哪里`op`，`formatoptions`并且`cellvalue`是您粘贴到 jqGrid 的数据中的列的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T10:17:03.887

您可以使用自己的格式化程序，例如

```
 colModel: [

        { name: 'colname', formatter: linkbuilder   },
    ], 
```

和

```
and add function

function linkbuilder(cellval, opts, rwdat, _act) {
    return "@Htm.ActionLink()";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T11:02:33.877

感谢@tpeczek 和@user1534482

我终于得到了解决方案，

```
colModel: [
    ...
    { name: 'Open',
        formatter: function (cellvalue, options, rowObject) {
            return '<a href="/ControllerName/Test/?myId=' + cellvalue + '">' + "Open" + '</a>';
        } 
    },
    ...
], 
```

# javascript - jQuery不改变背景颜色

> ID：12403716
> 
> 赞同：2
> 
> 时间：2012-09-13T09:56:20.283
> 
> 标签：javascript, jquery, html, css

我的网页上有 jQuery。
我正在更改 div 的背景颜色。
它不工作。

```
<script type="text/javascript">
       $("#gridbox").css({'background-color':'black'});​
    </script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T09:58:12.450

您的代码应该可以工作，请尝试使用文档就绪处理程序。

```
$(document).ready(function(){
   $("#gridbox").css({'background-color':'black'});​
}) 
```

[http://jsfiddle.net/WcQse/](http://jsfiddle.net/WcQse/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T09:57:55.210

您的脚本可能在 DOM 加载之前正在运行。尝试：

```
<script type="text/javascript">
     $(document).ready(function(){
       $("#gridbox").css({'background-color':'black'});​
     });
</script> 
```

[-- 演示 --](http://jsfiddle.net/Z7gPE/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T09:57:20.157

试试这个

如果您正在使用，`ASP.NET`那么您`Client ID`可能会根据使用情况而改变，`Master Pages`在这种情况下您可以尝试这样的事情。

```
 $('#<%= gridbox.ClientID %>' ).css('background-color','black');​ 
```

如果它只是一个`div`那么你应该把它包装在`document.ready()`方法中

```
$(document).ready(function(){

$('#gridbox').css('background-color','black');

}); 
```

**[演示](http://jsfiddle.net/JQub4/2/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T11:35:44.823

您正在使用的相同代码对我来说工作正常

```
<html>
  <head>
    <script src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
  </head>
  <body>
       <div id="gridbox" style="background-color:red;">gridbox</div>
         <script type="text/javascript">
           $("#gridbox").css({'background-color':'black'});
         </script>
  </body>
</html> 
```

so you should first include the jquery library, then put the javascript file after the div that you want to change the background color.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T09:57:44.230

尝试：

```
$("#gridbox").css("background-color", "black"); 
```

编辑：

添加一个文档准备功能，这将在`DOM`加载后执行 css 更改。

```
$(document).ready(function() {
   $("#gridbox").css("background-color", "black");
}); 
```

注意：确保您在页面中引用了 jQuery JavaScript 文件。

# nhibernate - 如何从两个 foreach 构建 NHibernate 或标准？

> ID：12403723
> 
> 赞同：0
> 
> 时间：2012-09-13T09:56:54.480
> 
> 标签：nhibernate, nhibernate-criteria

在我的项目中，我尝试建立这样的标准：

```
ICriteria criteria = session.CreateCriteria(typeof(Orders), typeof(Orders).Name);

if (param != null)
{                       
    if (param[1] != "System")
    {
        for (int index = 0; index < param.Length - 1; index++)
        {
            if (!string.IsNullOrEmpty(param[index]))
            {                                
                criteria.Add(Expression.Eq(
                    "RealizationPoint", 
                    CommonUtils.GetNameRealizationPointById(param[index])));
            }
        }
    }
    if (param[1] != "System" && param2 != null && 
        !string.IsNullOrEmpty(param2[0]))
    {
        for (int index = 0; index < param2.Length - 1; index++)
        {
            if (!string.IsNullOrEmpty(param2[index]))
            {
                criteria.Add(Expression.Eq(
                    "RealizationPoint", 
                    CommonUtils.GetNameRealizationPointById(param2[index])));
            }
        }
     }
 } 
```

参数 1，参数 2：字符串 [] 参数 1，字符串 [] 参数 2。在表达式保持 AND 之间的结果中，我需要 OR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:39:17.517

您可以使用`Restrictions.Disjunction()`将多个表达式分组为 OR 和`Restrictions.Conjuctions()`AND。

简化示例：

```
var conjunction1 = Restrictions.Conjunction();
for (int index = 0; index < param.Length -1; index++)
{
    conjunction1.Add(Restrictions.Eq("RealizationPoint", param[index]));
}

var conjunction2 = Restrictions.Conjunction();
for (int index = 0; index < param2.Length -1; index++)
{
    conjunction2.Add(Restrictions.Eq("RealizationPoint", param2[index]));
}

criteria.Add(Restrictions.Disjunction().Add(conjunction1).Add(conjunction2));

// Or with Restrictions.Or()
// criteria.Add(Restrictions.Or(conjunction1, conjunction2)); 
```

您可以在这个 SO 问题中找到更多信息和替代方法：[如何为 NHibernate 创建 OR 语句？](https://stackoverflow.com/questions/386308/how-to-create-or-statements-for-nhibernate)

# c# - 通过程序停止 Windows 服务

> ID：12403724
> 
> 赞同：0
> 
> 时间：2012-09-13T09:57:18.053
> 
> 标签：c#, windows-services, system

在 C# 中以编程方式停止 Windows 服务会生成下面列出的`System.InvalidOperationException`

{访问被拒绝}

如果我通过 Windows 界面启动/停止，那么一切正常！我是管理员用户并在 Windows 7 下运行该服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:00:46.487

我不确定你是如何阻止它的，但我现在在我的系统上尝试了这个，这种方法至少可以正常工作：

```
var p = Process.Start(new ProcessStartInfo
        {
          FileName = "net",
          Arguments = "stop NameOfService",
          CreateNoWindow = true,
          WindowStyle = ProcessWindowStyle.Hidden
        });
p.WaitForExit(); //add this line if you want to make sure that the service is stopped before your program execution continues 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:17:11.027

如果身份验证是问题...

您可以以编程方式控制您正在使用的用户，使用

```
WindowsIdentity 
```

和

```
[DllImport("advapi32.dll", SetLastError = true)]
private static extern bool LogonUser(...) 
```

我不知道这是否可行，但值得一试。

```
IntPtr token IntPtr.Zero;
LogonUser(username, password ..., ref token) //and some other parameters
var identity = WindowsIdentity(token);

using(identity.Impersonate())
{ 
    //do stuff here using another identity
    //find service and stop it
} 
```

编辑：这可用于远程服务器上的身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:00:37.943

这听起来像一个 UAC 问题 - 尝试运行应以管理员身份控制服务的应用程序（右键单击“以管理员身份运行”）。

请注意，即使管理员帐户也没有完全权限，除非您在管理员模式下明确运行应用程序 - 这是为了保护用户免受 Windows Vista 中的恶意软件的侵害而引入的，并且从那时起就一直存在。

# java - 通过java客户端的netty websocket连接

> ID：12403726
> 
> 赞同：1
> 
> 时间：2012-09-13T09:57:22.283
> 
> 标签：java, websocket, netty

是否可以在没有握手请求的情况下在 java 代码中创建 websocket 连接？

我知道如何使用以下命令创建一个握手请求：

```
 String request = "GET " + path + " HTTP/1.1\r\n"
            + "Upgrade: WebSocket\r\n" + "Connection: Upgrade\r\n"
            + "Host: " + host + "\r\n" + "Origin: " + origin + "\r\n"
            + extraHeaders.toString() + "\r\n"; 
```

但我想避免上述情况，一旦我打开一个套接字连接，只想沿着通道发送帧？..这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:11:16.393

如果没有 WebSocket 握手，您将无法创建 WebSocket 连接。WebSocket 握手和成帧是协议的关键部分。握手是 HTTP 兼容的，并且允许 WebSockets 更容易地与现有的 Web 基础设施进行交互。除其他外，握手增加了安全机制并允许跨源资源共享 ( [CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) )。

握手之后，每个 WebSocket 帧仍然不是原始数据。WebSocket 是基于消息的协议，因此帧头包含消息描述、帧长度、消息类型（二进制、文本、ping 等）等。此外，从客户端（浏览器）到服务器的数据必须使用运行 XOR 进行屏蔽面具。这是为了避免 HTTP 中介（代理、HTTP 缓存等）中存在理论上的漏洞。

不要被名称中的“Socket”所误导。WebSockets 具有原始 TCP 套接字的许多优点，例如全双工、双向、长寿命和低延迟，但它是基于消息的传输协议，在原始 TCP 套接字上分层并使用 HTTP 友好的握手。

有关详细信息，请参阅官方[IETF 6455 WebSocket 规范](https://www.rfc-editor.org/rfc/rfc6455)。

# c# - 自定义警报 SharePoint 2010 (KB 948321)

> ID：12403727
> 
> 赞同：1
> 
> 时间：2012-09-13T09:57:25.273
> 
> 标签：c#, sharepoint, sharepoint-2010, alert

我一直在尝试使用以下准则为 SharePoint 2010 创建自定义警报：http: [//support.microsoft.com/kb/948321/en-us](http://support.microsoft.com/kb/948321/en-us)

在这一点上，我还没有成功地让警报起作用。我想知道本指南也适用于 SharePoint 2010。因为在文章的按钮处明确指出：

适用于

*   微软办公室 SharePoint Server 2007
*   用于搜索的 Microsoft Office SharePoint Server 2007（企业版）
*   用于搜索的 Microsoft Office SharePoint Server 2007（标准版）

任何人都可以启发我吗？

亲切的问候 Oxillery

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:59:56.697

我让它在 2010 年工作。

**一个新的警报模板。**

a. 原件可在此处找到：

```
 \14\TEMPLATE\XML\alerttemplates.xml 
```

b.在这个文件中可以找到自定义模板，其中包含原始定义和自定义定义。

```
CCPersonalAlertTemplates.xml 
```

c.用 stsadm 加载它们

```
 stsadm.exe -o updatealerttemplates -url "http://Beefy.com/Sites/my_name" -filename " \CCPersonalAlertTemplates.xml" 
```

d.每个开箱即用的解决方案都有一个匹配的自定义模板。

*   自定义模板的名称末尾有一个 .ext。

*   自定义功能也像这样调用自定义 NotificationHandlerAssembly：

    ```
     <Properties>
     <NotificationHandlerAssembly>Shared.CCPersonalEmail, Version=1.0.0.0, Culture=neutral, PublicKeyToken=5694e116d3fc8c0c</NotificationHandlerAssembly>
     <NotificationHandlerClassName>Shared.CCPersonalEmail.CCPersonalClass
     </NotificationHandlerClassName> 
     <NotificationHandlerProperties />
     </Properties> 
    ```

**自定义通知处理程序程序集**

a.IAlertNotifyHandler 实现 OnNotification 方法 - 尝试发送自定义警报（如果失败则发送正常警报。）

*   自定义警报：

    *   从用户信息列表中获取 PersonalEmail 字段数据

    *   如果个人电子邮件为空，它只会发送正常警报

    *   如果填充了个人电子邮件

        *   将普通电子邮件发送到内部电子邮件

        *   将精简后的电子邮件发送到外部地址

        *   替换`http://`为外部地址`http://extranet-`

        *   正则表达式替换（阻止发送内容数据）

            `<td class=\"formlabel\">.*<td class=\"altvb\">&nbsp;</td>`

**使所有警报都使用外部模板**

*   现有警报：

    *   Site.allwebs.alerts 被翻转为与附加 .ext 相同的模板名称

    *   未来警报：

        *   Site.allwebs.lists 将附加的警报模板翻转到其 .ext 对应项
    *   未来的网络及其未来列表

        *   SPListEventReceiver ListAdded() 事件翻转网站集中创建的所有列表上的模板

**家政**

a.在功能激活期间

*   在 rootweb 的用户信息列表上创建一个 PersonalEmail 字段（这成为内容，因此在停用时不会被删除）

*   将所有列表和警报翻转到自定义警报模板。

    *   在功能停用期间

        *   将所有列表和警报翻转回各自的开箱即用警报模板

# c++ - C++ 调用 perl 代码 - eval_sv 未将参数传递给脚本

> ID：12403729
> 
> 赞同：7
> 
> 时间：2012-09-13T09:57:26.453
> 
> 标签：c++, perl, xs

我有下面的示例程序，它将参数推送到 Perl 堆栈，然后调用“eval_sv”。示例 perl 语句被执行，但我无法检索从 C++ 作为 Perl 参数传递的变量。请让我知道我在以下程序中缺少什么

**程序的输出**

> 你好世界
> 
> 测试
> 
> 100测试完成

此行不打印 $a 和 $b 的值

```
string three = "print 'Test\n'; my $z = 100; print $a; print $b; print $z;"; 
```

这是我的代码：

```
#include <EXTERN.h>
#include <perl.h>
#include <string>
using namespace std;

string perlScript;

static PerlInterpreter *my_perl;

SV* my_eval_sv(I32 croak_on_error)
{
    STRLEN n_a;
    char *p1 = new char [perlScript.size()+1];
    strcpy(p1, perlScript.c_str());
    const char *p = p1;
    int len = strlen(p);

    dSP;
    ENTER ;
    SAVETMPS ;
    PUSHMARK(SP) ;

    int a, b;
    a = 10;
    b = 20;

    PERL_SET_CONTEXT(my_perl);
    XPUSHs(sv_2mortal(newSViv(a)));
    PERL_SET_CONTEXT(my_perl);
    XPUSHs(sv_2mortal(newSViv(b)));

    /* Done with pushing pointers to Perl stack */

    PUTBACK;

    SV* sv1 = newSVpv(p, 0);    
    eval_sv(sv1, G_EVAL | G_KEEPERR);
    SvREFCNT_dec(sv1);

    SPAGAIN;
    sv1 = POPs;
    PUTBACK;

    FREETMPS;
    LEAVE;

    if (croak_on_error && SvTRUE(ERRSV))
        croak(SvPVx(ERRSV, n_a));   
}

main (int argc, char **argv, char **env)
{
    char *embedding[] = { "", "-e", "0" };
    PERL_SYS_INIT3(&argc,&argv,&env);
    my_perl = perl_alloc();
    perl_construct(my_perl);
    perl_parse(my_perl, NULL, 3, embedding, NULL);
    PL_exit_flags |= PERL_EXIT_DESTRUCT_END;

    /*string perlBeginScript;
    static const char * perlEndScript = "\
                                 \n\
    }\n\
    ";

    if(perlBeginScript.length()==0)
    {
        perlBeginScript="EmbeddedPerl";
    }

    perlScript = "sub ";
    perlScript += perlBeginScript;
    perlScript += "{\n"; */

    string one = "print 'Hello World\n'; ";
    string two = "my $a = shift; my $b = shift; ";
    string three= "print 'Test\n'; my $z = 100; print $a; print $b; print $z;";
    string four = "print 'Testing complete\n';";

    perlScript += one ;
    perlScript += two;
    perlScript += three;
    perlScript += four;

    //perlScript += perlEndScript;

    /* Done with perl script to be executed */
    my_eval_sv(TRUE);
    PL_perl_destruct_level = 1;
    perl_destruct(my_perl);
    perl_free(my_perl);
    PERL_SYS_TERM(); 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:15:12.643

我只是在这里猜测...

您尝试通过将某些值放在 Perl 堆栈中来将它们传递给您的 Perl 代码，然后您希望`shift`调用从堆栈中检索值。

取决于范围`shift`使用`@_`或`@ARGV`两者都不能与“堆栈”互换。只有通过进行 perl 子例程调用才能`@_`填充堆栈中的元素。这是通过[perlcall](http://perldoc.perl.org/perlcall.html#THE-CALL_-FUNCTIONS)`call_sv`手册中描述的函数完成的。

在您的情况下`shift`，不会从子例程内部调用，因此它会尝试从`@ARGV`. 但是由于这个数组是空的，你的变量将被设置为`undef`与你得到的输出一致。

如果您需要传递参数，我建议您将 Perl 代码编写为匿名子路由。那就是评估您的子程序定义，`eval_pv()`然后`call_sv()`在设置堆栈后调用它。代码中被注释掉的部分似乎表明您已经研究过这种方法（但使用了一个命名的子例程）。

或者，您需要通过将其撤消来推送您的参数`@ARGV`，`get_av`然后对其执行适当的操作。虽然我不确定是否`@ARGV`有任何魔法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T05:35:43.950

我已经修改了问题中发布的上述程序，以使其与@pmakholm 的输入一起工作。

```
#include <EXTERN.h>
#include <perl.h>
#include <string>

#undef do_open
#undef do_close
#include <iostream>

using namespace std;

string perlScript;

static PerlInterpreter *my_perl;

SV* my_eval_sv(I32 croak_on_error)
{

    STRLEN n_a; 

char *p1 = new char [perlScript.size()+1];
strcpy(p1, perlScript.c_str());
const char *p = p1;
int len = strlen(p);

dSP;
ENTER ;
SAVETMPS ;
PUSHMARK(SP) ;

int a, b,c,d,e,f,g,h,i,j,k,l;
a = 900;
b = 1000;
    c = 2000;
    d = 3000;
    e = 4000;
    f = 5000;
    g = 6000;
    h =7000;
    i=8000;
    k=9000;
    l=10000;

PERL_SET_CONTEXT(my_perl);
XPUSHs(sv_2mortal(newSViv(a)));
PERL_SET_CONTEXT(my_perl);
XPUSHs(sv_2mortal(newSViv(b))); 
PERL_SET_CONTEXT(my_perl);
XPUSHs(sv_2mortal(newSViv(c)));
PERL_SET_CONTEXT(my_perl);
XPUSHs(sv_2mortal(newSViv(d))); 
PERL_SET_CONTEXT(my_perl);
XPUSHs(sv_2mortal(newSViv(e)));
PERL_SET_CONTEXT(my_perl);
XPUSHs(sv_2mortal(newSViv(f)));
PERL_SET_CONTEXT(my_perl);
XPUSHs(sv_2mortal(newSViv(g))); 
PERL_SET_CONTEXT(my_perl);
XPUSHs(sv_2mortal(newSViv(h))); 
PERL_SET_CONTEXT(my_perl);
XPUSHs(sv_2mortal(newSViv(i))); 
PERL_SET_CONTEXT(my_perl);
XPUSHs(sv_2mortal(newSViv(j))); 
PERL_SET_CONTEXT(my_perl);
XPUSHs(sv_2mortal(newSViv(k))); 
PERL_SET_CONTEXT(my_perl);
XPUSHs(sv_2mortal(newSViv(l))); 

    /* Done with pushing pointers to Perl stack */

PUTBACK;

SV* sv1 = newSVpv(p, 0);

croak_on_error = eval_sv(sv1, G_EVAL | G_KEEPERR);  
    cout << "croak on error is" << croak_on_error << endl; 

    call_pv("Test", G_KEEPERR | G_EVAL);

SPAGAIN; 
FREETMPS;
LEAVE;

if (croak_on_error && SvTRUE(ERRSV))
    croak(SvPVx(ERRSV, n_a));

}

main (int argc, char **argv, char **env)
{

char *embedding[] = { "", "-e", "0" };
PERL_SYS_INIT3(&argc,&argv,&env);
my_perl = perl_alloc();
perl_construct(my_perl);
perl_parse(my_perl, NULL, 3, embedding, NULL);
PL_exit_flags |= PERL_EXIT_DESTRUCT_END;

string one = "sub Test{print 'Hello World\n'; my $a = shift; my $b = shift; my $c =shift; my $d = shift; my $e = shift; my $f = shift; my $g = shift; my $h = shift; my $i = shift; my $j = shift; my $k=shift; my $l=shift;print $a; print $b; print $c; print $d; print $e; print $f; print $f; print $g; print $h; print $i; print $j; print $k; print $l;} ";

    perlScript += one ; 

    /* Done with perl script to be executed */
    my_eval_sv(TRUE); 

    PL_perl_destruct_level = 1;
    perl_destruct(my_perl);
    perl_free(my_perl);
    PERL_SYS_TERM();

} 
```

# java - 如何在一行中从其他 2 个字符串中创建一个字符串？

> ID：12403740
> 
> 赞同：-2
> 
> 时间：2012-09-13T09:58:12.077
> 
> 标签：java, android, string, textview, append

我在我的应用程序活动中有两个文本视图，一个带有日期（“yyyy-mm-dd”），一个带有时间（“hh：mm”）

我如何制作一个将这些文本视图组合在一起的字符串，以便我的字符串为 (yyyy-mm-dd hh:mm)，以便我可以在我的 sqlite 数据库中对日期时间文本值进行排序。

日期文本视图的代码：

```
String date = ((TextView) findViewById(R.id.dateTV))
            .getText().toString(); 
```

时间文本视图的代码：

```
String time= ((TextView) findViewById(R.id.timeTV))
            .getText().toString(); 
```

如何使字符串日期时间将它们组合成一行/快速？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:01:15.513

```
String date = ((TextView) findViewById(R.id.dateTV)).getText().toString();
String time = ((TextView) findViewById(R.id.timeTV)).getText().toString();

String combined = date + " " + time; 
```

查找字符串连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:01:40.200

```
new StringBuilder().append(date).append(" ").append(time).toString(); 
```

从理论上讲，这比用 + 连接字符串更快/更好。虽然你不会看到区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:02:42.813

**用这个**

```
 String date = ((TextView) findViewById(R.id.dateTV))
        .getText().toString();

 String time= ((TextView) findViewById(R.id.timeTV))
        .getText().toString();

String datetime = date.concat(time); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T10:03:30.673

我想你可以使用[Calendar.set()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#set%28int,%20int,%20int,%20int,%20int%29)

```
 public final void set(int year,
                  int month,
                  int date,
                  int hourOfDay,
                  int minute) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T10:00:57.370

```
String dateAndTime = date + time; 
```

这真的不是你想要的吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T10:01:14.990

用加号连接

```
 String datetime = ((TextView) findViewById(R.id.dateTV)).getText().toString() + ((TextView) findViewById(R.id.timeTV)).getText().toString(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-13T10:02:14.033

使用字符串连接

```
String newDate = date + " " + time; 
```

# c++ - 通过传递指针的地址来初始化 std::unique_ptr

> ID：12403750
> 
> 赞同：32
> 
> 时间：2012-09-13T09:59:00.563
> 
> 标签：c++, c++11, unique-ptr

我正在创建一个与一些 Windows API 代码互操作的类，现在我必须初始化的指针之一是通过调用初始化它的本机函数来完成的。

我的指针是`std::unique_ptr`带有自定义删除器的类型，它调用提供的 WinAPI 删除器函数，但是我无法将带有 & address-of 运算符的 unique_ptr 传递给 init 函数。为什么？

我创建了一个示例来演示我的问题：

```
#include <memory>

struct foo
{
   int x;
};

struct custom_deleter {};

void init_foo(foo** init)
{
  *init = new foo();
}

int main()
{
   std::unique_ptr<foo, custom_deleter> foo_ptr;

   init_foo(&foo_ptr);
} 
```

编译器咆哮着说：

```
source.cpp: In function 'int main()':
source.cpp:19:21: error: cannot convert 'std::unique_ptr<foo, custom_deleter>*' to 'foo**' for argument '1' to 'void init_foo(foo**)' 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-13T10:13:18.510

在某个地方，`unique_ptr<foo>`有一个类型为 的数据成员`foo*`。

但是，该类的用户直接修改该数据成员是不合法的。这样做不一定会保留 的类不变量`unique_ptr`，特别是它不会释放旧的指针值（如果有的话）。在您的特殊情况下，您不需要发生这种情况，因为先前的值为 0，但通常它应该发生。

出于这个原因`unique_ptr`，不提供对数据成员的访问，只提供对其值的副本（通过`get()`和`operator->`）。你无法`foo**`从你的`unique_ptr`.

你可以改为写：

```
foo *tmp;
init_foo(&tmp);
std::unique_ptr<foo, custom_deleter> foo_ptr(tmp); 
```

出于与异常安全相同的原因，这`std::unique_ptr<foo, custom_deleter> foo_ptr(new foo());`是异常安全的：`unique_ptr`保证您传递给其构造函数的任何内容最终都将使用删除器删除。

顺便说一句，`custom_deleter`不需要`operator()(foo*)`吗？还是我错过了什么？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T10:46:51.433

Steve 已经解释了技术问题是什么，然而，潜在的问题要深得多：代码使用了一个习惯用法，当您处理裸指针时很有帮助。为什么这段代码首先要做两步初始化（首先创建对象，然后初始化它）？由于您想使用智能指针，我建议您仔细调整代码：

```
foo* init_foo()
{
  return new foo();
}

int main()
{
   std::unique_ptr<foo, custom_deleter> foo_ptr( init_foo() );

} 
```

当然，重命名`init_foo()`并`create_foo()`让它直接返回 a`std::unique_ptr<foo>`会更好。此外，当您使用两步初始化时，通常建议考虑使用类来包装数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-10T10:59:00.607

您可以使用以下技巧：

```
template<class T>
class ptr_setter
{
public:
    ptr_setter(T& Ptr): m_Ptr{Ptr} {}
    ~ptr_setter() { m_Ptr.reset(m_RawPtr); }

    ptr_setter(const ptr_setter&) = delete;
    ptr_setter& operator=(const ptr_setter&) = delete;

    auto operator&() { return &m_RawPtr; }

private:
    T& m_Ptr;
    typename T::pointer m_RawPtr{};
};

// Macro will not be needed with C++17 class template deduction.
// If you dislike macros (as all normal people should)
// it's possible to replace it with a helper function,
// although this would make the code a little more complex.

#define ptr_setter(ptr) ptr_setter<decltype(ptr)>(ptr) 
```

进而：

```
std::unique_ptr<foo, custom_deleter> foo_ptr;
init_foo(&ptr_setter(foo_ptr)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-14T17:09:01.643

我最终想出了一种方法，允许使用如下代码初始化 unique_ptr：

```
struct TOpenSSLDeleter { ... }; // Your custom deleter
std::unique_ptr<EVP_MD_CTX, TOpenSSLDeleter> Ctx;
...
Ctx = MakeUnique(EVP_MD_CTX_create()); // MakeUnique() accepts raw pointer 
```

这是解决方案：

```
template <class X>
struct TUniquePtrInitHelper {
   TUniquePtrInitHelper(X *Raw) noexcept {
      m_Raw = Raw;
   }
   template <class T, class D>
   operator std::unique_ptr<T, D>() const noexcept {
      return std::unique_ptr<T, D>(m_Raw);
   }

private:
   X *m_Raw;
};
template <class X>
TUniquePtrInitHelper<X> MakeUnique(X *Raw) noexcept {
   return {Raw};
} 
```

# spring-batch - 在 afterStep 调用之后发生的页脚回调

> ID：12403751
> 
> 赞同：3
> 
> 时间：2012-09-13T09:59:00.440
> 
> 标签：spring-batch

我的 spring 批处理编写器实现了页脚回调和步骤执行侦听器，如下所示：

```
public class MyItemWriter implements ItemWriter<MyBean>, FlatFileFooterCallback, StepExecutionListener, ItemStream 
```

该类具有私有 String 属性。

```
private String one; 
```

我的 footerCallback 和 afterStep 方法如下：

```
public void writeFooter(Writer writer) throws IOException {
this.one = "this is a test";
}

public ExitStatus afterStep(StepExecution stepExecution) {
File file = new File("myFile");
try {
      FileUtils.write(file, this.one);          
 } catch (IOException e) {
      e.printStackTrace();
   } 
  return null;
} 
```

很明显，我在 footerCallBack 中设置属性字符串一，然后在 afterStep 方法中使用它。

但是，我在文件中写入了空值。

在调试时，我发现 afterStep 方法在 writeFooter 之前被调用。

但这不是错的吗？只有在 footerCallBack 结束后才应该完成步骤？

# php - 在 perl 中创建可以通过 php gzuncompress 解压缩的压缩字符串

> ID：12403755
> 
> 赞同：2
> 
> 时间：2012-09-13T09:59:10.560
> 
> 标签：php, perl

我需要使用 Perl 创建一个压缩字符串，我可以使用 PHP gzuncompress 解压缩

我在 Perl 中尝试了以下内容

```
use IO::Compress::Gzip qw(gzip $GzipError) ;
my $input  = 'THIS IS A TEST'; 
my $output;
gzip \$input => \$output; 
```

但 PHP 无法解压缩

如果我从 perl 中查看输出，它与使用 PHP 的 gzcompress 压缩它不同

解决这个问题的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:43:41.010

使用[Compress::Zlib](http://search.cpan.org/dist/Compress-Zlib/lib/Compress/Zlib.pm#COMPRESS/UNCOMPRESS)`compress`中的函数。

```
$ perl -MCompress::Zlib=compress -e 'print compress("Foo Bar\n")' | php -r 'echo gzuncompress(fgets(STDIN));' 
```

输出：

```
Foo Bar 
```

# sql-server - 通过 ADO .Net 对 SQL Server varchar 数据进行右填充

> ID：12403757
> 
> 赞同：2
> 
> 时间：2012-09-13T09:59:12.187
> 
> 标签：sql-server, ado.net, padding, varchar

我正在我的公司开发一个 C# 应用程序。
该应用程序通过 ADO .Net 使用 SQL Server 数据库。
该应用程序使用 .Net 框架 4 附带的用于 SQL Server 的 ADO .Net 数据提供程序。

以编程方式将字符串插入 varchar 字段时，我们遇到了问题。

# 例子

让我们考虑名为 MY_TABLE 的数据库表，其中包含以下列：

*   MY_FIRST_COL 整数
*   MY_SECOND_COL varchar(250)

我通过在 SS Management Studio 中执行以下 SQL 查询将记录 (REC1) 插入到 MY_TABLE 中：

```
insert into MY_TABLE (1, ""); 
```

然后我使用 SSMS 选择 REC1。
然后我复制包含在 MY_SECOND_COL 字段中的字符串。
然后我将字符串粘贴到 Notepad++ 中。
我注意到字符串由 0 个字符组成。
好吧，有道理！

现在，我使用 SqlCommand 对象以编程方式将记录 (REC2) 插入到 MY_TABLE 中。

这是包含在 CommandText 属性中的字符串：

```
insert into MY_TABLE (@p0, @p1); 
```

以下是与第二个参数对应的 SqlParameter 对象的属性中包含的一些值：

*   DbType : System.Data.DbType.AnsiStringFixedLength
*   方向：输入
*   IsNullable : 假
*   参数名称：“@p1”
*   精度：0
*   规模：0
*   尺寸 : 0
*   SqlDbType : 字符
*   价值 ： ””

然后我使用 SSMS 选择 REC2。
然后我复制包含在 MY_SECOND_COL 字段中的字符串。
然后我将字符串粘贴到 Notepad++ 中。
我注意到该字符串由 250 个字符组成。
为什么 ？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:03:57.680

```
SqlDbType : Char 
```

那是你的问题。你想要`VarChar`。`Char`s 是固定宽度的字符串，用空格填充。

[`SqlDbType`](http://msdn.microsoft.com/en-us/library/system.data.sqldbtype.aspx)：

> **字符** [`String`](http://msdn.microsoft.com/en-us/library/system.string.aspx)。非 Unicode 字符的固定长度流，范围在 1 到 8,000 个字符之间。
> 
> **变量字符** [`String`](http://msdn.microsoft.com/en-us/library/system.string.aspx)。非 Unicode 字符的可变长度流，范围在 1 到 8,000 个字符之间。当数据库列是**varchar(max)**时使用**VarChar**。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:06:50.563

您正在使用 SQL 数据类型`char`。字符分配整个空间（在这种情况下为 250 个字符），其中`VARCHAR`仅分配所需的空间。

```
DECLARE @Result1 VARCHAR(200)
DECLARE @Result2 CHAR(200)

SET @Result1 = 'Hello' -- allocates 5 character spaces
SET @Result2 = 'Hello' -- allocates 200 character spaces

SELECT DATALENGTH(@Result1) -- 5
SELECT DATALENGTH(@Result2) -- 200 
```**

# html - 从javascript调用剃刀函数

> ID：12403758
> 
> 赞同：2
> 
> 时间：2012-09-13T09:59:15.267
> 
> 标签：html, razor, javascript

我正在创建一个带有数据库的剃须刀网站，但我在从网页中更改数据库元素时遇到问题。

所有元素都显示在带有更新按钮的表格中。如果单击按钮，它会将其 ID 发送到 JavaScript 函数。在该函数中，创建了一个包含所有必要属性的数组。然后我想将该数组传递给我的 razor 函数，但是在 JavaScript 中调用该函数时，出现错误（当前上下文中不存在名称“kamer”）。有人知道解决方案吗？

谢谢！

我的剃须刀功能：

```
@functions{
public String saveRoom(string[] room){
    var db = Database.Open("Studentenkamers"); 

    var sql = "UPDATE Studentkamer SET oppervlakte='" + room[1] + "', locatie='" + room[2] + "', type='" + room[3] + "', vrij='" + room[4] + "' WHERE id='" + room[0] + "'";
    db.Query(sql);     
    return "ok";

} 
```

}

html和javascript代码：

```
@foreach(var row in db.Query(getKamers))
     {            
        <tr id="@row.id">
            <td class="td-id">@row.id</td>
            <td class="td-opp"><input type="text" value="@row.oppervlakte" name="oppervlakte" id="td-opp" /></td>
            <td class="td-loc">@row.locatie</td>
            <td class="td-type"><input type="text" value="@row.type" name="type" id="td-type" /></td>
            <td class="td-kamernr">@row.kamernr</td>
            <td class="td-vrij"><input type="text" value="@row.vrij" name="vrij" id="td-vrij" /></td>
            <td class="td-update"><input type="button" value="opslaan" onclick="updateRoom(this.id)" name="opslaan" id="@row.id" /></td>
       </tr>               
     }
    </table>
    <script type="text/javascript">

        function updateRoom(id) {               
            var opp = $("#" + id + " .td-opp input").attr("value");
            var locatie = $("#" + id + " .td-loc").html();
            var type = $("#" + id + " .td-type input").attr("value");
            var kamernr = $("#" + id + " .td-kamernr").html();
            var vrij = $("#" + id + " .td-vrij input").attr("value");

            var kamer = [id, opp, locatie, type, kamernr, vrij];
            alert(kamer);
            @saveRoom(kamer);
        }
    </script> 
```

# .htaccess - 从受密码保护的子域中排除一个文件

> ID：12403759
> 
> 赞同：2
> 
> 时间：2012-09-13T09:59:16.803
> 
> 标签：.htaccess

我有这个 .htaccess 来保护子域。

```
AuthType Basic
AuthUserFile /home/xxx/dev.xxx.com/.htpasswd
AuthName "Dev"
require valid-user 
```

如何仅将一个文件排除在此保护之外。那么这个文件可以在没有密码保护的情况下访问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:22:32.063

您可以使用 a`Satisfy Any`和一个 special来执行此操作，`Allow`它允许某些请求通过而无需密码检查。所以在你的 htaccess 文件中：

```
SetEnvIf Request_URI ^/protected-dir/no_protect_file.php norequire_auth=true

# Auth stuff
AuthUserFile /home/xxx/dev.xxx.com/.htpasswd
AuthName "Dev"
AuthType Basic

# Setup a deny/allow
Order Deny,Allow
# Deny from everyone
Deny from all
# except if either of these are satisfied
Satisfy any
# 1\. a valid authenticated user
Require valid-user
# or 2\. the "require_auth" var is NOT set
Allow from env=norequire_auth 
```

如果请求`http://your.domain.com/protected-dir/no_protect_file.php`，则设置`SetEnvIf`匹配项和`norequire_auth`环境变量。auth 部分检查它以允许它通过而不需要密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T16:21:29.303

您可以在受密码保护的目录之外创建一个新目录，并创建一个指向您希望不受保护的文件的符号链接，并将 URL 分发到不受保护的库而不是受保护的库。

# jqgrid - JQGRID 与数据表

> ID：12403760
> 
> 赞同：3
> 
> 时间：2012-09-13T09:59:23.627
> 
> 标签：jqgrid, datatable

我正在尝试制作网格。我想使用 JQGRID 或 DATATABLES 我想知道哪一个更适合网格的实现。我从这个链接获得了关于 JQGRID 的所有信息

[http://www.jqgrid.com/Home.php](http://www.jqgrid.com/Home.php)

以及来自此链接的数据表

[http://datatables.net/](http://datatables.net/)

我在决定使用哪一个是 bettor 时有点困惑。如果有人能告诉我在 jqgrid 和数据表中我能做什么或不能做什么，那将非常有帮助。提前致谢

# tivoli - 交易平台警报问题

> ID：12403761
> 
> 赞同：1
> 
> 时间：2012-09-13T09:59:34.437
> 
> 标签：tivoli, workload-scheduler, tivoli-work-scheduler

请在 Tivoli Workload Scheduler 上告诉我这些问题的答案。

当工作没有按计划开始时，TWS 如何警告管理员？如果作业运行时间超过预期，TWS 如何警告管理员？一旦工作完成而没有错误，TWS 怎么能发送关于工作完成的电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T14:02:28.510

从 TWS 8.4 开始，您可以定义具有两个相关事件的事件规则。在您的情况下，这两个事件需要定义为 Job Status Changed 类型并且属性 Status 设置为“Running”。它还需要在此规则中定义 X 秒/分钟/小时的超时并将超时与 SendEmail 操作相关联。然后，当超时到期且状态保持不变（正在运行）时，将自动发送电子邮件。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:17:30.507

这取决于您运行的 TWS 版本。但是，如果您谈论的是 > 8.3 版本，那么所有这些警报和通知都可以在 Tivoli Dynamic Workload Console (TDWC) 中设置。

这些新版本的 TWS 引入了“偶数驱动”调度的新概念，您可以在其中为每个作业设置事件和触发器，您可以在其中包含正在发送的电子邮件或将事件转发到事件管理系统。

# c# - RaisePostBackEvent：根据导致回发的用户控件引发自定义或默认回发事件方法

> ID：12403765
> 
> 赞同：1
> 
> 时间：2012-09-13T09:59:39.427
> 
> 标签：c#, asp.net

我有一个包含 javascript 和 ASP.NET 用户控件的 ASP.NET 页面。当执行回发时，我使用`RaisePostBackEvent`方法来确定应该调用哪个方法。这样，就可以通过 javascript 触发回发。例如，我通过 javascript 触发的回发加载用户控件。但是，不能再通过回发引发此类用户控件的事件，因为`RaisePostBackEvent`调用的是该方法，而不是默认的回发行为。那么如何从`RaisePostBackEvent`方法中调用用户控件的默认回发行为呢？

```
public void RaisePostBackEvent (string eventArgument) {
    string eventTarget = Request ["__EVENTTARGET"];
    if (eventTarget == UniqueID) {
        eventArgument = Request ["__EVENTARGUMENT"];
        Action action = JsonConvert.DeserializeObject<Action>(eventArgument);
        if (action.name == "display") Display(action.argument);
        else if (action.name == "edit") Edit(action.edit);
    }
    else {
        // Control control = GetPostBackControl(this.Page);
        // !!! Raise the postback event on the control.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:25:50.773

您可以将回发逻辑放入单独的方法中：

```
void Button_Click(object sender, EventArgs e)
{
   DoButtonLogic();
} 
```

所以你也可以从 RaisePostback 调用它：

```
...
else 
{
   DoButtonLogic();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:18:15.997

`OnInit`我在包含 javascript 的用户控件的事件方法中有这个语句：

```
protected override void OnInit (EventArgs e) {
    Page.RegisterRequiresRaiseEvent(this);
} 
```

删除此语句后，它就起作用了。

# php - 在mysql中插入单行导致行重复

> ID：12403766
> 
> 赞同：1
> 
> 时间：2012-09-13T09:59:40.473
> 
> 标签：php, mysql, duplicates

在 PHP 脚本中，我执行以下操作：

```
SELECT t1.*, t2.flag_contenuto
FROM lin_98_4_sgs_formazione_elearning_allegati as t1
JOIN agews_elearning_allegati as t2 USING(id_allegato, id_elearning)
WHERE id_dipendente='432'
AND id_sgs_formazione='7'
AND id_azienda='3'
AND id_sede='12'
AND revisione_documento='0'
AND id_allegato='7' 
```

检索我需要的一些特定信息，然后我确定当前时间戳广告`date('Y-m-d H:i:s')`并执行以下操作：

```
INSERT INTO lin_98_4_sgs_formazione_elearning_statistiche (
  `id_allegato`,
  `id_elearning`,
  `id_dipendente`,
  `id_sgs_formazione`,
  `id_azienda`,
  `id_sede`,
  `revisione_documento`,
  `data_letto`
) VALUES (
  7,
  6,
  432,
  7,
  3,
  12,
  0,
  '2012-09-13 11:50:39' -- timestamp derived as described above
)
ON DUPLICATE KEY UPDATE data_letto=VALUES(data_letto) 
```

最后，我执行此选择，然后执行`var_dump()`其输出：

```
SELECT MAX(id_statistica)
FROM lin_98_4_sgs_formazione_elearning_statistiche
WHERE `id_allegato` = 7
AND `id_elearning` = 6
AND `id_dipendente` = 432
AND `id_sgs_formazione` = 7
AND `id_azienda` = 3
AND `id_sede` = 12
AND `revisione_documento` = 0
AND `data_letto` = '2012-09-13 11:50:39' 
```

这应该让我知道最后插入的行的 ID。

我正在执行这个特定的查询，而不是使用一些更具体的函数，因为我注意到有时脚本会插入**两行**，如我所料。

实际上，`var_dump()`最后一次选择的结果可能类似于：**1、2、4、5、6、7、9****等等**，有时会随机执行双插入。

什么可能导致此问题？这是完整的表定义：

```
CREATE TABLE `lin_98_4_sgs_formazione_elearning_statistiche` (
  `id_statistica` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `id_allegato` int(10) unsigned DEFAULT '0',
  `id_elearning` int(10) unsigned DEFAULT '0',
  `id_dipendente` int(10) unsigned DEFAULT '0',
  `id_sgs_formazione` int(10) unsigned DEFAULT '0',
  `id_azienda` int(10) unsigned NOT NULL DEFAULT '1',
  `id_sede` int(10) unsigned NOT NULL DEFAULT '1',
  `revisione_documento` int(10) unsigned NOT NULL DEFAULT '0',
  `data_letto` datetime DEFAULT NULL,
  `tempo_letto` smallint(5) unsigned DEFAULT '0',
  PRIMARY KEY (`id_statistica`,`id_azienda`,`id_sede`,`revisione_documento`),
  UNIQUE KEY `data_letto` (`data_letto`,`id_allegato`,`id_elearning`,`id_dipendente`,`id_sgs_formazione`,`id_azienda`,`id_sede`,`revisione_documento`),
  CONSTRAINT `fk_id_allegato_lin_98_4_sgs_formazione_elearning_statistiche` FOREIGN KEY (`id_allegato`, `id_elearning`, `id_dipendente`, `id_sgs_formazione`, `id_azienda`, `id_sede`, `revisione_documento`) REFERENCES `lin_98_4_sgs_formazione_elearning_allegati` (`id_allegato`, `id_elearning`, `id_dipendente`, `id_sgs_formazione`, `id_azienda`, `id_sede`, `revisione_documento`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

我在 Windows 7 32 位和 3 GB RAM 上使用 MySQL 5.1.41，如果这有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:20:24.833

最后，这被证明是在使用子句时处理`AUTO_INCREMENT`生成的 MySQL 错误`ON DUPLICATE KEY UPDATE`：即使`INSERT`命中唯一键并“转换”为`UPDATE`， AUTO_INCREMENT 仍会递增。

这已经被报告了：[http](http://bugs.mysql.com/bug.php?id=66807) ://bugs.mysql.com/bug.php?id=66807但答案是这不是一个错误。

实际上，阅读此[http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html](http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html)指出这完全取决于您的 InnoDB 配置，即默认配置将始终即使没有执行实际插入，也会增加计数器，而如果没有实际插入，传统配置将保持计数器不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:11:19.633

有趣的是，这暗示 MySQL 会更新 AUTO_INCREMENT 值，即使实际上没有插入任何内容。

或者它可能与你的外键有关？尝试在测试环境中删除它们并运行相同的代码 - 如果状态持续存在，我们就有了赢家。

# c# - 由于 MySQL 日期时间，无法绘制数据表

> ID：12403767
> 
> 赞同：0
> 
> 时间：2012-09-13T09:59:46.307
> 
> 标签：c#, mysql

我在 VS2010 中使用 C# 并尝试使用 MS Chart Control 通过绑定数据表中的数据来绘制图形。我遇到的错误是图表控件不支持 MySQL 日期时间。但是，想对此提出一些建议。

在图表之前，我使用 MySQL 数据库来填充数据表，它工作正常，如下所示。

```
string cmdstring = "SELECT * FROM " + tablename;
MySqlDataAdapter adapter = new MySqlDataAdapter(cmdstring, conn);
DataTable dtable = new DataTable();
adapter.Fill(dtable); 
```

然后，之后我尝试使用里面的数据来绘制图表，如下所示：

```
 chart1.DataSource = dbtables[Group1.Text];
 chart1.Series.Add(Group1.Text);
 chart1.Series[Group1.Text].XValueMember = "datetime";
 chart1.Series[Group1.Text].YValueMembers = "datatype";
 chart1.DataBind(); /// Line Error 
```

原来我评论的地方有错误。我从阅读其他解决方案中了解到，这可能可以通过使用同时转换日期时间的查询行来解决。但是，我试图从 MySQL 数据库中提取不同的表结构——因此，使用更通用的函数来“填充”数据表。希望我的问题很清楚，并就如何将数据正确绑定到图表提供建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:29:50.577

在将图表的数据源分配给 DataTable 之前，您应该修改数据表中日期列的格式。

您可以很容易地将日期修改为自定义格式。

希望这可以帮助。

# c# - C#获取原始资源文本进行控制

> ID：12403775
> 
> 赞同：0
> 
> 时间：2012-09-13T10:00:20.457
> 
> 标签：c#, winforms

如果我更改按钮的文本（例如，“下一步”到“完成”），有没有办法找到原始文本，以便我可以通过引用资源将其放回原处（即从资源）？

显然，我可以在更改原始文件之前存储它，但我很好奇是否有更优雅的方式来引用它（例如，以与引用资源字符串相同的方式：）`global::MyProject.Properties.Resources.LeString`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:07:09.993

1 您可以根据`RessourceManager`类尝试使用此代码

```
var resman = new ResourceManager("StringResources.Strings", yourAssembly);
btnButton.Text = resman.GetString("ButtonName"); 
```

链接：http: [//msdn.microsoft.com/en-gb/library/system.resources.resourcemanager%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-gb/library/system.resources.resourcemanager%28v=vs.80%29.aspx)

2 你也可以使用`ResourceUtility.getString(..)`

链接：http: [//msdn.microsoft.com/en-us/library/ee435924.aspx](http://msdn.microsoft.com/en-us/library/ee435924.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:02:45.367

这是基于@Aghilas 的回答，基于一些反复试验以获得正确的字符串作为第一个参数。希望这将有助于下一个董事会寻找相同的问题（答案？）:-) ...

```
ResourceManager rm = new ResourceManager("<myProject>.Properties.Resources", Assembly.GetExecutingAssembly());
myControl.Text = rm.GetString("<myControlName>"); 
```

# pyodbc - pyodbc 和插入语句

> ID：12403789
> 
> 赞同：3
> 
> 时间：2012-09-13T10:01:04.600
> 
> 标签：pyodbc

我使用 pyodbc 的时间很短，现在面临从执行一些视图创建的文件应用 sql 脚本的问题。为了应用 sql 文件，我使用来自另一个线程的示例 -[跟进：从 python 执行 .sql 文件](https://stackoverflow.com/questions/10387892/follow-up-execute-sql-files-from-python) 我的大多数 sql 脚本都没有问题，但这会导致问题：

脚本的一部分：

```
insert into TMP_VIEWS select * from TMP_QUERY_SQL
go
begin
declare @SQL_CMD varchar(4000);
declare @CNT int;
set @CNT = (select count(1) from TMP_VIEWS);
while @CNT > 0
begin 
  set @SQL_CMD = (select top 1 SQL_CMD from TMP_VIEWS order by SQL_CMD);
  print 'Executing: ' + @SQL_CMD;
  EXEC(@SQL_CMD)
  delete from TMP_VIEWS where @SQL_CMD = SQL_CMD;
  set @CNT = (select count(1) from TMP_VIEWS);
end
end 
```

如您所见，它执行从另一个表插入到表中的 SQL 语句。所以在我应用它的方式上它不起作用。来自另一个线程的样本将 sql 文件分成 GO 之间的块并应用它们。所以'insert into TMP_VIEWS select * from TMP_QUERY_SQL'分别应用，然后是其他部分。看起来 pyodbc 或驱动程序实际上并没有等待服务器上完全执行插入，而是在实际插入完成之前执行第二个块。结果，我在 TMP_VIEWS 中创建了相当数量的视图，而未创建的查询仍然存在。我有自动提交并尝试在查询执行后添加额外的提交 - 这没有帮助。唯一有帮助的 - 在 GO 之间执行此批次之间添加 time.sleep(0.2)。看起来像一些异步调用。谁面临同样的问题或我的尝试可能有什么问题？可能有一些解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-10T14:48:35.553

如果您只需要此特定脚本的解决方案，请执行以下操作：将 TMP_QUERY_SQL 表中的所有 SQL 语句读入 Python 列表。然后`excecute`在遍历列表时调用每个语句，并避免对临时 SQL 表 TMP_VIEWS 的任何依赖。

# html - 640px PSD文件需要在所有设备中修复

> ID：12403790
> 
> 赞同：2
> 
> 时间：2012-09-13T10:01:05.870
> 
> 标签：html, css, responsive-design, media-queries, viewport

> 我只有一个来自客户端的宽度为 640px 的 PSD 文件，我必须修复所有设备，从 ios 到具有不同屏幕设备的 windows。
> 
> 我的问题是我不想为小型和大型设备裁剪不同的图像。我搜索了一些解决方案，但我对所有使用视口、媒体查询的人感到困惑。新的 iphone5 有 1136px 的分辨率，我不知道如何使用这个 PSD。我想为所有设备裁剪一个尺寸的图像是否可以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:46:36.797

在寻找解决方案很长时间后，我发现你可以使用

```
<meta name="viewport" content="width=640"> 
```

让浏览器为您做其他工作。这是我从 apple.com 找到的。只是查看源[http://www.apple.com](http://www.apple.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:14:39.867

我不认为你可以使用 css 来“裁剪”，除非有一种“hacky”的方式来做。

但是使用媒体查询，你肯定可以很容易地调整它的大小以适应你的浏览器：

```
<script>
      <link rel="stylesheet" href="css/largeres.css" media="screen and (min-width: 1236px)" > 

      <link rel="stylesheet" href="css/mediumres.css" type="text/css" media="screen and (max-width: 720px)">

      <link rel="stylesheet" href="css/smallres.css" type="text/css" media="screen and (max-width: 360px)">
</script> 
```

smallres.css

```
yourImage{
    height: 60%;
    width: 60%; 
```

}

mediumres.css

```
yourImage{
    height: 80%;
    width: 80%; 
```

}

更大的.css

```
yourImage{
    height: 100%;
    width: 100%; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:27:55.563

您可以将其设置为背景图像并用于`background-size: cover`为您拉伸它，有关更多信息，[请参见此处，以及](http://css-tricks.com/perfect-full-page-background-image/)[此处](http://css-tricks.com/examples/FullPageBackgroundImage/progressive.php)的演示（尝试调整浏览器窗口的大小以查看它的实际效果）。

不幸的是，因为这是一个 CSS3 属性，IE8 及以下不支持它，您可以使用过滤器来克服这个问题（第一个链接有更多信息），或者您可以使用涉及 JavaScript 的更复杂的解决方案。

媒体查询也是一种可能的解决方案，但恐怕我对它们了解不多，您对具有（技术上）超过 1000 像素宽的屏幕的新智能手机提出了一个很好的观点。

我敢肯定会有一种使用媒体查询的方法，可能使用手持设备而不是媒体？我不完全确定，但如果您想进一步探索，我相信 Google 会成为您的朋友。

# java - 从互联网检索数据

> ID：12403791
> 
> 赞同：0
> 
> 时间：2012-09-13T10:01:11.043
> 
> 标签：java, android

以下代码来自我的第一个互联网应用程序。我没有测试它，因为我没有可用的 WLAN。我接下来要做的是从网站检索数据。

是否有任何程序可以完成这样的任务？

JAVA代码：

```
public class Internet00 extends Activity {

TextView tv00;
public boolean isNetworkAvailable() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netWorkinfo = cm.getActiveNetworkInfo();

    if (netWorkinfo != null && netWorkinfo.isConnected()) {
        return true;
    }
    return false;
}
private void readStream(InputStream in) {
    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new InputStreamReader (in));
        String line="";
        while ( (line=reader.readLine()) != null)
            tv00.setText(line);
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (reader != null) {
          try {
            reader.close();
          } catch (IOException e) {
            e.printStackTrace();
            }
        }
    }
}
@SuppressLint({ "ParserError", "NewApi" })
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_internet00);

    tv00 = (TextView) findViewById(R.id.tv00);
    if(isNetworkAvailable()) {
        StrictMode.ThreadPolicy policy = new StrictMode.
            ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);

    try {
          URL url = new URL("http://www.vogella.com");
          HttpsURLConnection con = (HttpsURLConnection) url.openConnection();
          readStream(con.getInputStream());
        } catch (Exception e) {
          e.printStackTrace();
           }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:18:36.643

你能再具体一点吗？

在我看来，您已经在检索数据了。

您的代码应该会失败，因为您正在 UI 线程中执行网络操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:22:09.303

是的，当然，您需要遵守一些规则。

1.  请不要在 UI 线程中使用网络线程
2.  用于`AsyncTask`下载相关作品

可以在此处找到一个工作示例：[使用 JSON 从 api 获取信息](https://stackoverflow.com/questions/11560313/getting-info-from-api-using-json/11561553#11561553)

请参阅我在上面帖子中的回答，将数据从服务器下载到您的设备。这个工作示例对您来说是一个好的开始。

# colorbox - 颜色框覆盖不隐藏页面上的所有内容

> ID：12403792
> 
> 赞同：0
> 
> 时间：2012-09-13T10:01:13.530
> 
> 标签：colorbox

我的颜色框覆盖并没有隐藏页面上的所有内容。页面上的图像显示在叠加层的顶部。

```
$(document).ready(function() {
   $(".iframe").colorbox({
         iframe:true, 
         width:"840px", 
         height:"620px",
         scrolling: false
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:21:07.563

是图像，还是闪光？您是否编辑了 colorbox.css 文档？您的图像和父元素的 z-index 是多少？如果是flash，你是否将wmode设置为透明？

没有人可以帮助您解决这个问题，因为这个问题完全针对您当前的标记和 css，而您没有共享任何内容。

# iis-7 - IIS ARR（边缘）缓存（反向代理）-上游连接超时问题

> ID：12403797
> 
> 赞同：3
> 
> 时间：2012-09-13T10:01:21.427
> 
> 标签：iis-7, reverse-proxy

我希望将 IIS 应用程序请求路由用作反向代理缓存。我查看了几个不同的选项，并得出结论，它最适合我的需求。但是，我遇到了一种死胡同，我真的可以从对 ARR 模块有更多经验的人那里获得一些意见。

我有以下设置：

*   IIS ARR 缓存代理请求到内部服务器场（加权循环负载平衡以使用最近的源服务器）。
*   在 IIS 代理中禁用保持活动。
*   服务器场由 nginx 网络服务器组成。
*   IIS 服务器具有 RAM 磁盘缓存。

用例是边缘服务器将接收字节范围请求，并在向最终用户提供内容时将其缓存（首先在内存缓存中 60 秒，然后将其写入 RAM 磁盘）。到目前为止一切正常，但是当下一个最终用户开始请求相同的字节范围（现在在缓存中）时，我开始看到 IIS 边缘和 nginx 来源之间的一些奇怪行为：在第一个字节范围请求时（由第二个最终用户）IIS 服务器打开一个到它不使用的 nginx 源的连接，因为它已经在缓存中有请求的段。由于没有使用连接，因此由于超时（60 秒），它最终被 nginx 关闭。同时，第二个最终用户仍在请求缓存中的文件段。然后，这就是问题发生的地方，第二个最终用户到达文件中不在缓存中的某个点。我在这里期望 IIS 的行为（即禁用 keep-alive）是它将打开到源的新连接并开始获取不在缓存中的文件部分。然而，我看到的行为是 IIS 尝试重用它在请求开始时打开的相同连接（没有意识到它已被源丢弃）。我也使用了“失败的请求跟踪”来验证这一点，结果是 IIS 没有从源端获得预期的回复（因为连接不再存在），然后又返回一个502.3 到最终用户。我在这里期望 IIS 的行为（即禁用 keep-alive）是它将打开到源的新连接并开始获取不在缓存中的文件部分。然而，我看到的行为是 IIS 尝试重用它在请求开始时打开的相同连接（没有意识到它已被源丢弃）。我也使用了“失败的请求跟踪”来验证这一点，结果是 IIS 没有从源端获得预期的回复（因为连接不再存在），然后又返回一个502.3 到最终用户。我在这里期望 IIS 的行为（即禁用 keep-alive）是它将打开到源的新连接并开始获取不在缓存中的文件部分。然而，我看到的行为是 IIS 尝试重用它在请求开始时打开的相同连接（没有意识到它已被源丢弃）。我也使用了“失败的请求跟踪”来验证这一点，结果是 IIS 没有从源端获得预期的回复（因为连接不再存在），然后又返回一个502.3 到最终用户。然而，我看到的行为是 IIS 尝试重用它在请求开始时打开的相同连接（没有意识到它已被源丢弃）。我也使用了“失败的请求跟踪”来验证这一点，结果是 IIS 没有从源端获得预期的回复（因为连接不再存在），然后又返回一个502.3 到最终用户。然而，我看到的行为是 IIS 尝试重用它在请求开始时打开的相同连接（没有意识到它已被源丢弃）。我也使用了“失败的请求跟踪”来验证这一点，结果是 IIS 没有从源端获得预期的回复（因为连接不再存在），然后又返回一个502.3 到最终用户。

我已经验证增加源端的连接超时将“解决”问题，但这并不是一个真正可行的解决方案，因为我基本上必须设置一个无限超时，这可能会在源端导致一系列全新的问题. 有什么方法可以控制 IIS 如何处理这个上游连接（即当它实际上需要来自源的数据时强制它打开一个新连接，或者让它意识到源关闭了连接）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T12:21:15.280

对于可能遇到相同问题的任何人；在与 Microsoft 反复讨论之后，这实际上是 ARR 模块中的一个错误，将在即将发布的版本中得到解决。

# c# - 如何重置 ListViewItem 样式？

> ID：12403804
> 
> 赞同：0
> 
> 时间：2012-09-13T10:01:54.053
> 
> 标签：c#, wpf, listview, styles, listviewitem

我有一个这样定义的 xaml 样式：

```
<Style TargetType="{x:Type ListViewItem}">[...]</Style>

<Style TargetType="{x:Type ListViewItem}" x:Key="track_selected">[...]</Style> 
```

这是以编程方式为 listviewitem 应用“track_selected”样式的代码

```
((ListViewItem)lv_tracklist.ItemContainerGenerator.ContainerFromIndex(currentTrackIndex)).Style = FindResource("track_selected") as Style; 
```

我的问题是，如何将 mylistview 中的所有 listviewitem 重置为其默认样式，即上面列出的第一个样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:02:49.950

虽然有例外，但不建议在代码后面操作 Views 对象。这应该在`xaml`文件中完成。

此示例在使用 WPF 时是**不好的编码习惯。**

之间切换`Styles`是最好用的`StyleSelectors`。在您的情况下，设置 ListView 的 ItemContainerStyleSelector 属性。

```
<Style x:Key="ItemStyle" TargetType="ListViewItem">
   <!-- Setters and Triggers -->
</Style>

<Style x:Key="TrackSelectedStyle" TargetType="ListViewItem">
   <!-- Setters and Triggers -->
</Style>

<example:TrackSelectionStyleSelectorx:Key="myContainerStyleSelector"
ItemsStyle ="{StaticResource ItemStyle}"
TrackSelectedStyle ="{StaticResource TrackSelectedStyle}"/>

<ListView ... ItemContainerStyleSelector="{StaticResource myContainerStyleSelector}"/> 
```

和`StyleSelector`类（把它放在单独的 .cs 文件中）：

```
public class TrackSelectionStyleSelector: StyleSelector
{
   public Style ItemsStyle {get; set;}
   public Style TrackSelectedStyle {get; set;}

   public override Style SelectStyle( object item, DependencyObject container )
   {
     if ( /* isTrackSelected logic */ )
        return TrackSelectedStyle;

     return ItemsStyle;
   }

} 
```

不要忘记将 item 参数转换为 ListViewItems 内容类型的类型。

# c# - 在哪里使用 Execute Scalar、Execute Reader 和 Data Set？

> ID：12403810
> 
> 赞同：3
> 
> 时间：2012-09-13T10:02:16.020
> 
> 标签：c#, sql, database, ado.net

我知道我可以使用这三个术语从数据库中读取数据，但是任何人都可以正确指导我何时使用`ExecuteScalar`，`ExecuteReader`以及`DataSet`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:04:59.257

> 何时使用 ExecuteScalar

[`ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)：使用它来执行任何用户定义的函数或存储过程，通常具有标量返回值。即只返回一个值。但是，它也可以与其他查询或存储过程一起使用，但在这种情况下，它只返回*查询*返回的结果集中第一行的第一列。其他列或行将被忽略。

> 何时使用 ExecuteReader

[`ExecuteReader`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executereader%28v=vs.71%29.aspx)：将它用于您对数据库或存储过程提出的常见查询。该`CommendText`属性决定了它是查询还是存储过程名称。它将 发送`CommandText`到 Connection 并构建一个`SqlDataReader`返回集合的集合。

[数据集](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)与数据集不同`ExecuteReader`，`ExecuteScalar`它表示通常来自数据库的数据的内存缓存。

# linux - PhantomJS：管道输入

> ID：12403817
> 
> 赞同：16
> 
> 时间：2012-09-13T10:03:02.017
> 
> 标签：linux, pipe, named-pipes, phantomjs, mkfifo

我正在尝试使用 PhantomJS 将 html 页面呈现为 pdf。我不想将文件写入磁盘，我在内存中有 html，我想要在内存中保存 pdf。

使用Pooria Azimi 在[这个问题](/questions/11408332/phantomjs-exported-pdf-to-stdout/11489631#11489631)上的出色回答，我能够从命名管道中获取pdf。在另一端尝试相同的操作（用命名管道替换输入文件）时，我最终得到一个空白的 pdf。

这就是我现在正在做的事情（简化）：

```
mkfifo in_pipe.html out_pipe.pdf
./phantomjs rasterize.js in_pipe.html out_pipe.pdf 
```

然后在另一个终端：

```
echo '<center>hey!</center>' > in_pipe.html
cat out_pipe.pdf > out.pdf 
```

文件 out.pdf 已创建，但为空白。我错过了什么吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-24T23:19:22.247

您可以直接在 PhantomJS 中非常简单地完成您正在寻找的事情（只是没有真正记录）。

```
var page = require('webpage').create(),
    fs = require('fs');

page.viewportSize = { width: 600, height: 600 };
page.paperSize = { format: 'Letter', orientation: 'portrait', margin: '1cm' };

page.content = fs.read('/dev/stdin');

window.setTimeout(function() {
    page.render('/dev/stdout', { format: 'pdf' });
    phantom.exit();
}, 1); 
```

（如果您有需要加载的图像等，可能需要增加超时时间）

HTML 输入标准输入，PDF 二进制输出标准输出。你可以像这样测试它：

`echo "<b>test</b>" | phantomjs makepdf.js > test.pdf && open test.pdf`

# responsive-design - 响应式轮播仅在移动设备上

> ID：12403818
> 
> 赞同：0
> 
> 时间：2012-09-13T10:03:03.303
> 
> 标签：responsive-design

在我的设计中，我希望为移动设备提供 2 个或更多图像的轮播，并转换为桌面设备的网格。你知道一些相关的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:41:01.690

使用 Javascript 中定义的各种断点： [如何在响应式设计中调用不同的 jquery 操作](https://stackoverflow.com/questions/11387391/how-to-call-different-jquery-actions-in-responsive-design)

然后在您狭窄的移动断点中，您会看到要启动的轮播。然后，如果他们切换到更大的断点，您可以删除该轮播。并让它显示一个用 CSS 完成的网格。

# php - 如何对带有参数的 url 进行 mod_rewrite

> ID：12403820
> 
> 赞同：1
> 
> 时间：2012-09-13T10:03:09.783
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

鉴于我的网站中有以下网址：**http://localhost/test/example.php?a=1&b=2**

如何在我的 .htaccess 文件中指定重定向规则，以便当我在浏览器中输入以下内容时调用此 url： **http://localhost/test/example/1.html**

换句话说，如果用户输入 url：***http://localhost/test/example/1.html***，他应该显示页面：***http://localhost/test/example.php?a=1&b=2***

我在 .htaccess 文件中尝试了以下 mod_rewrite 代码，但它不起作用：

```
RewriteRule ^/([^/]+).html /example.php?a=$1&b=$2 [QSA] 
```

这是我的**.htaccess**文件中的代码：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^([^/]+)/([^/]+)/? /example.php?a=$1&b=$2 [QSA] 
```

注意：我使用的是 WAMP2.0、Apache 2.2.6 和 PHP 5.2.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:05:37.450

它不起作用，因为您的规则有错误，您必须删除开头的斜线：

```
RewriteRule ^test/example/([0-9]+)\.html? /test/example.php?a=$1&b=2 [QSA] 
```

# asp.net-mvc-3 - 如何在一个视图中使用两种类型的模型

> ID：12403825
> 
> 赞同：0
> 
> 时间：2012-09-13T10:03:18.677
> 
> 标签：asp.net-mvc-3, view, types, models

我只有一个模型，但我想在我的视图中以不同的方式使用它 2 次。

```
@model IEnumerable<JChatAdmin.Models.CityCountryModel.**CityCountryModel**> 
```

@model JChatAdmin.Models.CityCountryModel。**城市国家模型**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:09:18.977

最简单的方法是创建一个新类，其中包含您想要使用的每个“子模型”的属性，并将该新类用作模型：

```
namespace JChatAdmin.Models.CityCountryModel
{
    public class CombinedCityCountryModel
    {
        public IEnumerable<CityCountryModel> EnumerableCountryModel { get; set; }
        public CityCountryModel SingleCountryModel { get; set; }
    }
} 
```

您的模型将是：

```
@model JChatAdmin.Models.CityCountryModel.CombinedCityCountryModel 
```

# php - WHERE IN 有效，但 WHERE NOT IN

> ID：12403828
> 
> 赞同：2
> 
> 时间：2012-09-13T10:03:29.740
> 
> 标签：php, zend-framework, zend-db

在一个`fetchAll()`我试图过滤掉一些我不想获取的选项。但是 using`NOT IN`确实给出了一个空数组。虽然仅`IN`使用相同的参数，但它正在工作：

```
$model->fetchbysql("shortcut NOT IN (2, 3)", null, null);  // Not working
$model->fetchbysql("shortcut IN (2, 3)", null, null);      // Working 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:22:19.350

尝试像这样进行查询。

```
SELECT * FROM usermaster WHERE UserId IN (1, 2, 3, 4, 5); 
```

和

```
SELECT * FROM usermaster WHERE UserId NOT IN (1, 2, 3, 4, 5); 
```

两个 SQL 查询都可以正常工作。

# c# - MVP 演示者在回发后订阅了事件

> ID：12403830
> 
> 赞同：0
> 
> 时间：2012-09-13T10:03:31.473
> 
> 标签：c#, events, event-handling, webforms, mvp

**请参阅下面的更新以获得更简短的描述**

我在使用基于事件的 MVP 方法时遇到问题。我有以下设置：

```
public class MeetingPresenter : IMeetingPresenter
{
     IViewMeeting;
     public MeetingPresenter(IViewMeeting view)
    {
        this.View = view;
        PopulateViewData();
        this.View.MeetingSavedClicked += OnMeetingSavedClicked;
    }

    public void PopulateViewData()
    {
         Imeeting meeting = service.GetMeeting();
         view.SetMeetingDate(meeting.date);
     }

    private void OnMeetingSavedClicked() 
    {
         service.SaveMeeting(view.GetMeeting());
     }
}

public interface IViewMeeting
{
     void SetMeetingDate(Datetime date);
     IMeeting GetMeeting();

     event Action MeetingSavedClicked;
} 
```

然后查看：（用vb写的）

```
Partial Class MeetingPage
Inherits System.Web.UI.Page
Implements IViewMeeting
{

         Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

           If Not IsPostBack Then
               Presenter = New MeetingPresenter(Me)
           Else

          End If
       End Sub

       Private _presenter As IMeetingPresenter
       Public Property Presenter() As IMeetingPresenter
       Get
           Return _presenter
       End Get
       Set(ByVal value As IMeetingPresenter)
           _presenter = value
       End Set
      End Property

       Public Sub SetMeetingDate(ByVal date As Datetime) Implements IMeetingVisits.SetMeetingDate

           lblMeetingDate.Text = date.Date.ToString()
        End Sub
 }

       //Not implementing this fully - should get the idea
       public Function GetMeeting as IMeeting Implements IMeetingVisits.GetMeeting

       end function

       Event MeetingSavedClicked As Action Implements IViewMeeting.MeetingSavedClicked

       Public Sub btnSaveMeeting_Click(ByVal sender As Object, ByVal e As System.EventArgs)

           RaiseEvent MeetingSavedClicked()
        End Sub 
```

*   在继续之前 - 我意识到我可以在视图等中取出依赖项，并且任何模型都应该是特定于视图的。*

我遇到的问题是事件。我在我的演示者中订阅了 View 界面事件。加载时，视图正在创建此演示者的具体版本，这会导致演示者填充所有视图字段。到现在为止还挺好。

问题是当通过 btnSaveMeeting_Click 引发 MeetingSavedClicked 事件时，不会触发 Presenter 中相应的订阅方法。这大概是因为演示者不再在内存中，因为回发后状态不会保持。我不确定 Presenter 事件中的订阅是否会导致它以某种方式留在内存中（我真的不太了解自定义事件），但似乎情况并非如此。

那么，将演示者存储在视图状态或会话中是唯一的选择吗？这是否意味着事件订阅仍将存在并执行？

抱歉，如果这看起来很基本，但我对事件、MVP 等有点新手。

**更新也许我可以让这更清楚一点：**

我的网络表单实现了一个具有动作事件的界面。

Web 表单创建一个自定义对象，该对象具有订阅此接口事件的方法。

在回发时，会在 webform 上引发 click 事件（代码隐藏），这反过来会引发已实现的界面事件。

现在，自定义对象不再位于 webform 的状态内存中，因为我们处于回发状态（并且自定义对象未存储在会话或视图状态中）。

**我订阅的处理程序是否仍然存在并且能够捕捉到这个引发的事件？还是在回发时它们已被“处理​​”？**

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:20:06.187

回发中使用的页面对象是一个全新的页面对象。它绝不会连接到您的旧页面对象。要解决您的问题，您必须重新创建您的演示者，并且您必须再次连接事件。

从技术上讲，如果垃圾收集器尚未收集它们，您的旧页面对象和演示者对象以及它们之间的事件处理程序可能仍在内存中。但是没有对这些对象的引用，它们将/可能在下一次 GC 运行中被收集。

# javascript - 如何使用 Node.js 最有效地解析网页

> ID：12403833
> 
> 赞同：29
> 
> 时间：2012-09-13T10:03:39.820
> 
> 标签：javascript, node.js

我需要解析一个简单的网页并从 html 中获取数据，例如“src”、“data-attr”等。如何使用 Node.js 最有效地做到这一点？如果有帮助，我正在使用 Node.js 0.8.x。

PS这是我正在解析的[网站。](http://tunes.io/)我想获取当前曲目列表并制作自己的 html5 应用程序以在移动设备上收听。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-14T18:30:22.100

我已经做了很多。如果您正在抓取的网站大量使用 JavaScript，您将需要使用[PhantomJS 。](http://phantomjs.org/)请注意，PhantomJS 不是 Node.js。这是一个完全不同的 JavaScript 运行时。您可以通过[phantomjs-node](https://github.com/sgentle/phantomjs-node)或[node-phantom](https://github.com/alexscheelmeyer/node-phantom)进行集成，但它们都比较老套。YMMV 与那些。避免与 jsdom 有任何关系。它会让你头疼 - 这包括[Zombie.js](http://zombie.labnotes.org/)。

你应该使用[Cheerio](https://github.com/MatthewMueller/cheerio)和[Request](https://github.com/mikeal/request)。这对于大多数网页来说已经足够了。

我写了一篇关于将 Cheerio 与 Request 结合使用的博客文章：[使用 Node.js 进行快速而脏的屏幕抓取](http://procbits.com/2012/04/11/quick-and-dirty-screen-scraping-with-node-js-using-request-and-cheerio/)但是，如果它是 JavaScript 密集型的，请将 PhantomJS 与[CasperJS](http://casperjs.org/)结合使用。

希望这可以帮助。

使用 Request 和 Cheerio 的片段：

```
var request = require('request')
  , cheerio = require('cheerio');

var searchTerm = 'screen+scraping';
var url = 'http://www.bing.com/search?q=' + searchTerm;

request(url, function(err, resp, body){
  $ = cheerio.load(body);
  links = $('.sb_tlst h3 a'); //use your CSS selector here
  $(links).each(function(i, link){
    console.log($(link).text() + ':\n  ' + $(link).attr('href'));
  });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T10:41:35.900

你可以试试[PhantomJS](http://phantomjs.org/)。这是使用它进行屏幕抓取的[文档。](http://code.google.com/p/phantomjs/wiki/QuickStart#DOM_Manipulation)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-27T20:09:22.660

我同意@JP Richardson 的观点，即 Cheerio 最适合抓取非 JS 重的网站。对于 JS-heavy 站点，使用[Casper](http://casperjs.org/)。它提供了对 Phantom 和 Promise 风格的 API 的出色抽象。他们讨论了如何在他们的文档中抓取：http: [//docs.casperjs.org/en/latest/quickstart.html](http://docs.casperjs.org/en/latest/quickstart.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-15T03:23:25.570

如果您想使用 phantom，请使用 node-phantom。如果你想看看，我有一个 git hub 存储库，可以将它们一起使用来从 html 生成 pdf 文件。但我不会选择幻影，因为它比你通常想要的要多，而且 Cheerio 更快。

# android - 用广播接收器重新启动主要活动？

> ID：12403836
> 
> 赞同：2
> 
> 时间：2012-09-13T10:03:50.567
> 
> 标签：android, broadcastreceiver

首先，我给你一个简短的例子来解决我的问题。请记住，我的应用程序所需的行为仅供我自己使用。

假设我有一个包含一个活动和一些片段的应用程序。这个应用程序通过一个静态广播接收器启动，其意图是 ACTION_POWER_CONNECTED。到目前为止，我的实现一切都很好。

但是有一个行为不端，我不知道如何正确解决。

如果应用程序正在运行，并且我再次关闭并打开我的 USB，将创建我的活动的新的第二个实例，而第一个仍在运行。只是为了说清楚：如果我按下后退按钮，第二个按钮就会消失，第一个实例会显示他的 UI。

我正在寻找一种方法来重新启动我的应用程序（如果它已经运行）并在它没有运行时启动它。无需为任何类型的重用而保存数据。

我尝试了一些与标志 FLAG_ACTIVITY_NEW_TASK、FLAG_ACTIVITY_BROUGHT_TO_FRONT 和 FLAG_ACTIVITY_CLEAR_TOP 的组合。但我认为这些对我来说是错误的。接下来的尝试是将manifast中的Activity设置为singleInstance，以确保没有第二个实例。根本没有取得很大的成功。

谁能给我一个例子来解决我的问题，比如我必须使用哪些标志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:08:50.750

在清单文件中的**活动标记中**设置**android:launchMode="singleTask" 并重**试...

 **如果您的活动已经在运行，则不要使用上面的标签创建新活动，它的显示旧运行活动..

您需要更新旧运行活动中的 UI 或数据，然后使用 onResume 方法，它在意图广播时调用...

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:09:48.650

您必须使用活动的 launchMode 属性（在清单中）。

使用 singleTop 或查看[http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)了解详情**

# testing - funcunit和茉莉花的区别？

> ID：12403839
> 
> 赞同：0
> 
> 时间：2012-09-13T10:04:00.167
> 
> 标签：testing, jasmine, funcunit

你好！谁能给出 Javascript 的 FuncUnit 和 Jasmine 单元测试框架之间的确切区别。我去了 Jasmine 框架，发现它有点容易，但我需要找到这两个框架之间的确切差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:55:46.530

我能看到的最大区别是[FuncUnit](http://funcunit.com/)是一个单元测试框架，而[Jasmine](http://pivotal.github.com/jasmine/)是一个使用[行为驱动开发](http://behaviour-driven.org/)方法构建的框架，而不是专门用于编写单元测试。

# regex - 用正则表达式检查数的可除性

> ID：12403842
> 
> 赞同：18
> 
> 时间：2012-09-13T10:04:12.547
> 
> 标签：regex, math

给定一个十进制数`N`作为一串数字，如何`M` **仅使用正则表达式**检查它是否可整除，而不转换为 int？

M=2, 4, 5, 10 是显而易见的。对于 M=3，这里有一些有趣的见解：[Regex filter numbers divisible by 3](https://stackoverflow.com/questions/10992279/python-regex-filter-numbers-divisible-by-3)

谁能提供 M=7、9、11、13 等的解决方案？通用的吗？

测试代码（在 python 中，但可以随意使用任何语言）：

```
M = your number, e.g. 2
R = your regexp, e.g., '^[0-9]*[02468]$'

import re
for i in range(1, 2000):
    m = re.match(R, str(i))
    if i % M:
        assert not m, '%d should not match' % i
    else:
        assert m, '%d must match' % i 
```

对于那些好奇的人，这里有一个例子`M=3`（假设引擎支持递归）：

```
^
(
    | [0369]+ (?1)
    | [147] (?1) [258] (?1)
    | [258] (?1) [147] (?1)
    | ( [258] (?1) ) {3}
    | ( [147] (?1) ) {3}
)
$ 
```

更新：有关更多讨论和示例，请参阅此[线程](https://codegolf.stackexchange.com/q/3503)。那里发布的表达式结果是错误的（在 70*N 上失败），但“如何到达那里”部分非常有教育意义。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-04T23:08:52.967

或许令人惊讶的结果是这样的正则表达式总是存在的。更令人惊讶的是，它通常没用。

存在结果来自[确定性有限自动机之间的对应关系](http://en.wikipedia.org/wiki/Deterministic_finite_automaton)(DFA) 和正则表达式。所以让我们做一个DFA。用 N 表示模数（它不需要是素数），用 B 表示数字基数，对于普通十进制数为 10。N 个状态的 DFA 标记为 0 到 N-1。初始状态为 0。DFA 的符号是数字 0 到 B-1。状态表示输入字符串左前缀的剩余部分，当除以 N 时被解释为整数。边缘表示当您在右侧添加数字时状态的变化。从算术上讲，这是状态映射 S(state,digit) = B * state + digit（模 N）。接受状态为 0，因为零余数表示可分性。所以我们有一个 DFA。DFA 识别的语言和正则表达式识别的语言是一样的，所以存在一个。所以虽然这很有趣，但没有帮助，

如果您想要一个通用算法，很容易在运行时构建这样的 DFA 并通过直接计算填充其状态表。初始化只是一对运行时间为 O(M * N) 的嵌套循环。机器的识别是每个输入字符的恒定时间。这是非常快的，但不使用正则表达式库，如果那是你真正需要的。

在获得一个实际的正则表达式时，我们需要看一下[费马小定理](http://en.wikipedia.org/wiki/Fermat%27s_little_theorem)。从定理，我们知道 B^(N-1) == 1 (模 N)。例如，当 N=7 和 B=10 时，这意味着每个 6 位数字块都等效于 0 .. 6 范围内的某个单个数字，以实现可分性。指数可以小于N-1；[一般来说，它是 N 的欧拉函数](http://en.wikipedia.org/wiki/Euler%27s_totient_function)的一个因子。称为块 D 的大小。对于 D 个数字块有 N 个正则表达式，每个表示一个特定的等价类余数模 N。这些表达式最多有长度 O(B^D)，很大。对于 N=7，这是一组一百万个字符长的正则表达式；我想这会破坏大多数正则表达式库。

这与示例代码中的表达式如何工作有关；该表达式`(?1)`匹配等于 0 (mod 3) 的字符串。这适用于 N=3，因为 10^1 == 1 (mod 3) 这意味着 A0B == AB (mod 3)。这个在指数大于1的时候比较复杂，但是原理是一样的。（请注意，示例代码使用的识别器不仅仅是正则表达式，严格来说。）表达式`[0369]`、`[147]`和`[258]`是模 3 表达式中数字 0、1 和 2 的正则表达式。概括地说，您将以类似的方式使用上述正则表达式数字。

我没有提供代码，因为（1）编写时间比这个答案要长，（2）我真的怀疑它会在任何已知的实现中执行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T11:58:00.850

如果您的数字是基于一元的，您可以使用此正则表达式：`s/1{divisor}//g`然后测试数字是否为空。

这是一种 Perl 方法

```
my @divs = (2,3,5,7,11,13);
for my $num(2..26) {
    my $unary = '1'x$num; # convert num to unary
    print "\n$num can be divided by : ";
    for(@divs) {
        my $test = $unary;
        $test =~ s/1{$_}//g;
        print "$_, " unless $test;
    }
} 
```

**输出：**

```
2 can be divided by : 2, 
3 can be divided by : 3, 
4 can be divided by : 2, 
5 can be divided by : 5, 
6 can be divided by : 2, 3, 
7 can be divided by : 7, 
8 can be divided by : 2, 
9 can be divided by : 3, 
10 can be divided by : 2, 5, 
11 can be divided by : 11, 
12 can be divided by : 2, 3, 
13 can be divided by : 13, 
14 can be divided by : 2, 7, 
15 can be divided by : 3, 5, 
16 can be divided by : 2, 
17 can be divided by : 
18 can be divided by : 2, 3, 
19 can be divided by : 
20 can be divided by : 2, 5, 
21 can be divided by : 3, 7, 
22 can be divided by : 2, 11, 
23 can be divided by : 
24 can be divided by : 2, 3, 
25 can be divided by : 5, 
26 can be divided by : 2, 13, 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-26T16:45:24.290

这是一个老问题，但现有的答案都不包括代码。早在 2010 年，我就编写了计算这些正则表达式的代码，该代码[在此处在线，](http://s3.boskent.com/divisibility-regex/divisibility-regex.html)并有一个指向[注释源代码](http://s3.boskent.com/divisibility-regex/divisibility_regex.js)的链接，所以我认为在此处添加一个链接可能会很有用。

该技术基本上是[eh9 的答案](https://stackoverflow.com/a/13223927/424991)中描述的技术，除了我使用状态消除直接从 DFA 计算正则表达式，然后对结果进行一些简化。它们是普通的正则表达式，没有递归。（使用递归会使结果更短，但我认为有趣的是，没有它是可能的。）

结果并不*像*eh9 的估计所暗示的那样冗长。例如，这是一个匹配以 10 为底的 7 的倍数的正则表达式：

```
^(0|7|[18]5*4|(2|9|[18]5*6)(3|[29]5*6)*(1|8|[29]5*4)|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))|(4|[18]5*[18]|(2|9|[18]5*6)(3|[29]5*6)*(5|[29]5*[18])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(2|9|35*4|(4|35*6)(3|[29]5*6)*(1|8|[29]5*4)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4)))|(5|[18]5*[29]|(2|9|[18]5*6)(3|[29]5*6)*(6|[29]5*[29])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(4|[18]5*[18]|(2|9|[18]5*6)(3|[29]5*6)*(5|[29]5*[18])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))(4|[07]5*[29]|(1|8|[07]5*6)(3|[29]5*6)*(6|[29]5*[29])|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))*(6|[07]5*4|(1|8|[07]5*6)(3|[29]5*6)*(1|8|[29]5*4)|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(2|9|35*4|(4|35*6)(3|[29]5*6)*(1|8|[29]5*4)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))))|(6|[18]5*3|(2|9|[18]5*6)(3|[29]5*6)*(0|7|[29]5*3)|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3))|(4|[18]5*[18]|(2|9|[18]5*6)(3|[29]5*6)*(5|[29]5*[18])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(1|8|35*3|(4|35*6)(3|[29]5*6)*(0|7|[29]5*3)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3)))|(5|[18]5*[29]|(2|9|[18]5*6)(3|[29]5*6)*(6|[29]5*[29])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(4|[18]5*[18]|(2|9|[18]5*6)(3|[29]5*6)*(5|[29]5*[18])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))(4|[07]5*[29]|(1|8|[07]5*6)(3|[29]5*6)*(6|[29]5*[29])|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))*(5|[07]5*3|(1|8|[07]5*6)(3|[29]5*6)*(0|7|[29]5*3)|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(1|8|35*3|(4|35*6)(3|[29]5*6)*(0|7|[29]5*3)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3)))))(2|9|45*3|(5|45*6)(3|[29]5*6)*(0|7|[29]5*3)|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3))|(0|7|45*[18]|(5|45*6)(3|[29]5*6)*(5|[29]5*[18])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(1|8|35*3|(4|35*6)(3|[29]5*6)*(0|7|[29]5*3)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3)))|(1|8|45*[29]|(5|45*6)(3|[29]5*6)*(6|[29]5*[29])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(0|7|45*[18]|(5|45*6)(3|[29]5*6)*(5|[29]5*[18])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))(4|[07]5*[29]|(1|8|[07]5*6)(3|[29]5*6)*(6|[29]5*[29])|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))*(5|[07]5*3|(1|8|[07]5*6)(3|[29]5*6)*(0|7|[29]5*3)|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(1|8|35*3|(4|35*6)(3|[29]5*6)*(0|7|[29]5*3)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3)))))*(3|45*4|(5|45*6)(3|[29]5*6)*(1|8|[29]5*4)|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))|(0|7|45*[18]|(5|45*6)(3|[29]5*6)*(5|[29]5*[18])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(2|9|35*4|(4|35*6)(3|[29]5*6)*(1|8|[29]5*4)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4)))|(1|8|45*[29]|(5|45*6)(3|[29]5*6)*(6|[29]5*[29])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(0|7|45*[18]|(5|45*6)(3|[29]5*6)*(5|[29]5*[18])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))(4|[07]5*[29]|(1|8|[07]5*6)(3|[29]5*6)*(6|[29]5*[29])|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))*(6|[07]5*4|(1|8|[07]5*6)(3|[29]5*6)*(1|8|[29]5*4)|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|9|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(2|9|35*4|(4|35*6)(3|[29]5*6)*(1|8|[29]5*4)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))))))*$ 
```

这是“仅” 12,733 个字符，并且在我尝试过的实现中运行良好。

* * *

PS。为了看看使用递归有多不有趣，这里有一个 Perl 程序，它使用递归正则表达式测试可被 7 整除：

```
my $re = qr{
  ^($|[07](?1)|[18](?2)|[29](?3)|3(?4)|4(?5)|5(?6)|6(?7))
  |(?!)(?:
      ([07](?4)|[18](?5)|[29](?6)|3(?7)|4(?1)|5(?2)|6(?3))
    | ([07](?7)|[18](?1)|[29](?2)|3(?3)|4(?4)|5(?5)|6(?6))
    | ([07](?3)|[18](?4)|[29](?5)|3(?6)|4(?7)|5(?1)|6(?2))
    | ([07](?6)|[18](?7)|[29](?1)|3(?2)|4(?3)|5(?4)|6(?5))
    | ([07](?2)|[18](?3)|[29](?4)|3(?5)|4(?6)|5(?7)|6(?1))
    | ([07](?5)|[18](?6)|[29](?7)|3(?1)|4(?2)|5(?3)|6(?4))
  )
}x;

while (<>) {
    print(/$re/ ? "matches\n" : "does not match\n");
} 
```

这只是 DFA 作为递归正则表达式的直接表达。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-04T02:10:42.507

如果允许修改字符串并重复，则可以一次进行一步长除法。7 的 sed 语法：重新申请，直到获得剩余部分。当你有一个 0、1、2、3、4、5 或 6 时停止。

```
s/^0//
s/^7/0/
s/^8/1/
s/^9/2/
s/^([18]4|[29][18]|35|4[29]|56|63)/0/
s/^([18]5|[29][29]|36|43|5[07]|64)/1/
s/^([18]6|[29]3|3[07]|44|5[18]|65)/2/
s/^([18][07]|[29]4|3[18]|45|5[29]|66)/3/
s/^([18][18]|[29]5|3[29]|46|53|6[07])/4/
s/^([18][29]|[29]6|33|4[07]|54|6[18])/5/
s/^([18]3|[29][07]|34|4[18]|55|6[29])/6/ 
```

但它是非常弱的酱汁。更容易完全取消“正则表达式”，只需一次读取一个字符并切换到适当的状态。如果这不是一个选项，那么我怀疑你对 7 和 13 不走运，尽管 11 可能仍然是可能的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T06:04:29.833

这是一个通用的直接递归蛮力长除法。它没有优化，绝对不是优雅的大声笑。它在 JavaScript 中（下面是带有代码的测试 html 页面）：

```
<!doctype html>
<html>
<head>
<script type="text/javascript">
function isNDivisibleByM(N, M) {
    var copyN = N;
    var MLength = (""+M).length;
    var multiples = [];
    for(var x = 0; x < M; x++)
        multiples[x] = [];
    for(var i = M, x=0; i < M*10; x=0) {
        for(var j = i; j < i+M; j++, x++)
            multiples[x].push(j);
        i+=M;
    }
    var REs = [];
    for(var x = 0; x < M; x++)
        REs[x] = new RegExp("^("+multiples[x].join("|")+")");
    while(N.length >= MLength) {
        var sameLen = (N.length == MLength);
        for(var x = 0; x < M; x++)
            N = N.replace(REs[x], (x==0)?"":(""+x));            
        N = N.replace(/^0/g, "");           
        if(sameLen) break;
    }
    N = N.replace(/^0/g, "");
    var numericN = parseInt(copyN);
    if(N.length == 0) {
        if(numericN%M!=0) {
            console.error("Wrong claim: " + copyN + " NOT divisible by " + M);
        }
        return true;
    }
    if(numericN%M==0 && N.length != 0) {
        console.error("Missed claim: " + copyN + " IS divisible by " + M + " - " + N + " is: " + copyN);
    }
    return false;
}
function run() {
    alert(isNDivisibleByM((""+document.getElementById("N").value), parseInt(document.getElementById("M").value)));
}
</script>
</head>
<body>
<label>N:</label><input type="text" id="N" />
<label>M:</label><input type="text" id="M" />
<button onclick="run()">Is N divisible by M?</button>
</body>
</html> 
```

这个想法适用于 M = 7（示例）：

```
while(numStr.length > 1) {
    numStr = numStr.replace(/^(14|21|35|42|56|63)/, "");
    numStr = numStr.replace(/^(15|22|36|43|50|64)/, "1");
    numStr = numStr.replace(/^(16|23|30|44|51|65)/, "2");
    numStr = numStr.replace(/^(10|24|31|45|52|66)/, "3");
    numStr = numStr.replace(/^(11|25|32|46|53|60)/, "4");
    numStr = numStr.replace(/^(12|26|33|40|54|61)/, "5");
    numStr = numStr.replace(/^(13|20|34|41|55|62)/, "6");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T10:21:30.993

尽管这个问题很有趣，但我认为除了您列出的“明显”问题之外，其他任何事情都不可能发生。

大多数[可分规则](http://en.wikipedia.org/wiki/Divisibility_rule)都需要数学运算。

* * *

您可以使用[前瞻来测试多个要求的字符串](http://www.regular-expressions.info/lookaround2.html)，以便您可以将成对的“明显”要求组合在一起（2 x 3、3 x 5 等）：

> 使用 .匹配 6 个字母的单词很容易`\b\w{6}\b`。匹配包含“cat”的单词同样容易：`\b\w*cat\w*\b`.
> 
> 结合两者，我们得到：`(?=\b\w{6}\b)\b\w*cat\w*\b`用 RegexBuddy 分析这个正则表达式。简单的！这是它的工作原理。在尝试正则表达式的字符串中的每个字符位置，引擎将首先在正前瞻内尝试正则表达式。只有当字符串中的当前字符位置位于字符串中 6 个字母单词的开头时，此子正则表达式以及因此的前瞻才匹配。如果不是，则前瞻将失败，并且引擎将从字符串中的下一个字符位置开始继续尝试正则表达式。

# python - Python 类：为方法添加动态属性

> ID：12403843
> 
> 赞同：2
> 
> 时间：2012-09-13T10:04:12.720
> 
> 标签：python, class, attributes

假设我们有一个类：

```
class Foo (object):
...     def __init__(self,d):
...         self.d=d
...     def return_d(self):
...         return self.d 
```

...和一个字典：

```
d={'k1':1,'k2':2} 
```

...和一个例子：

```
inst=Foo(d) 
```

有没有办法动态添加属性`return_d`：

`inst.return_d.k1`会返回 1？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T10:09:23.483

您需要做两件事：声明`return_d`为属性或属性，并返回一个类似字典的对象，该对象允许对字典键进行属性访问。以下将起作用：

```
class AttributeDict(dict): 
    __getattr__ = dict.__getitem__

class Foo (object):
    def __init__(self,d):
        self.d=d

    @property
    def return_d(self):
        return AttributeDict(self.d) 
```

简短演示：

```
>>> foo = Foo({'k1':1,'k2':2})
>>> foo.return_d.k1
1 
```

[`property`装饰器](http://docs.python.org/library/functions.html#property)将方法转换为属性，[`__getattr__`钩子](http://docs.python.org/reference/datamodel.html#object.__getattr__)允许`AttributeDict`类通过属性访问（运算符）查找字典键`.`。

# c# - 如何在 C# 中使用正则表达式读取文本文件？

> ID：12403847
> 
> 赞同：1
> 
> 时间：2012-09-13T10:04:21.517
> 
> 标签：c#, regex

在以下代码中，为什么模式与正则表达式不匹配，但如果我使用正则表达式逐行读取 12sep.txt 文件，则它可以正常工作？

```
string file = @"C:\Documents and Settings\Sandeep.kumar\Desktop\12sep.txt";
string filedta = File.ReadAllText(file);
string pattern = @"^[^\s]+.[^\s]txt$";
Regex rx = new Regex(pattern, RegexOptions.None);
MatchCollection mc = rx.Matches(filedta); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T10:08:06.677

Regex special character "^" and "$" don't have the same meaning when the input string is single-line or multi-line. In single line the mean "string start" and "string end". In multi-line they mean "line start" and "line end".

You have a option in RegexOptions to control this : `RegexOptions.Multiline`

And the documentation clearly states what it does : "Multiline mode. Changes the meaning of ^ and $ so they match at the beginning and end, respectively, of any line, and not just the beginning and end of the entire string."

from [http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)

# php - CakePHP 在后退和前进按钮上没有布局

> ID：12403851
> 
> 赞同：0
> 
> 时间：2012-09-13T10:04:31.907
> 
> 标签：php, cakephp, layout, back

我们正在使用 CakePHP 构建一个大型 CMS，并包含 Croogo 安装。我们最近遇到了一个问题，当用户`back`在浏览器中单击（或相关的`forward`按钮）时，布局未正确呈现。

您最终得到的是使用`blank`布局的视图 (.ctp) 文件，因此没有样式、js 等。任何输入或想法将不胜感激。谢谢！

仅供参考：现代浏览器应该缓存页面请求（启用缓存），所以我们正在查看 Auth 的东西，因为它似乎是页面（甚至是缓存的）调用的第一件事，对吗？:S

另外：如果浏览器停留几分钟，然后我们再次单击前后，页面会按预期以正确的布局呈现？！？会话超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:00:43.567

解决了。此问题是由在默认布局的页脚中包含调用的一些 javascript 引起的。

这个线程上的解决方案是我们头疼的原因：[jQuery .each 循环字符串或对象](https://stackoverflow.com/questions/12353597/jquery-each-loop-string-or-object)

# java - 为什么我不能部署包含一些外部 jar 文件的 java webservice ..？

> ID：12403854
> 
> 赞同：1
> 
> 时间：2012-09-13T10:04:55.527
> 
> 标签：java, web-services, tomcat, deployment, axis2

我正在使用axis2 部署一个java Web 服务。

我已经创建了 Web 服务的演示，但我的 java Web 服务中没有包含外部 jar，而且效果很好。但是当我尝试使用一些外部库创建java的Web服务时，同样的事情不起作用..为什么会发生这种情况？

虽然部署该 Web 服务我得到了这个异常

```
This Web axisService has deployment faults
Error: org.apache.axis2.deployment.DeploymentException: The following error occurred during schema generation: edu.cmu.sphinx.demo.transcriber.TranscribeSimpleGrammar
 at org.apache.axis2.deployment.repository.util.ArchiveReader.processServiceGroup(ArchiveReader.java:150)
 at org.apache.axis2.deployment.ServiceDeployer.deploy(ServiceDeployer.java:82)
 at org.apache.axis2.deployment.repository.util.DeploymentFileData.deploy(DeploymentFileData.java:136)
 at org.apache.axis2.deployment.DeploymentEngine.doDeploy(DeploymentEngine.java:813)
 at org.apache.axis2.deployment.repository.util.WSInfoList.update(WSInfoList.java:144)
 at org.apache.axis2.deployment.RepositoryListener.update(RepositoryListener.java:377)
 at org.apache.axis2.deployment.RepositoryListener.checkServices(RepositoryListener.java:254)
 at org.apache.axis2.deployment.RepositoryListener.startListener(RepositoryListener.java:371)
 at org.apache.axis2.deployment.scheduler.SchedulerTask.checkRepository(SchedulerTask.java:73)
 at org.apache.axis2.deployment.scheduler.SchedulerTask.run(SchedulerTask.java:94)
 at org.apache.axis2.deployment.scheduler.Scheduler$SchedulerTimerTask.run(Scheduler.java:93)
 at java.util.TimerThread.mainLoop(Timer.java:512)
 at java.util.TimerThread.run(Timer.java:462)
Caused by: org.apache.axis2.deployment.DeploymentException: The following error occurred during schema generation: edu.cmu.sphinx.demo.transcriber.TranscribeSimpleGrammar
 at org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:432)
 at org.apache.axis2.deployment.repository.util.ArchiveReader.buildServiceGroup(ArchiveReader.java:101)
 at org.apache.axis2.deployment.repository.util.ArchiveReader.processServiceGroup(ArchiveReader.java:143)
 ... 12 more
Caused by: org.apache.axis2.deployment.DeploymentException: The following error occurred during schema generation: edu.cmu.sphinx.demo.transcriber.TranscribeSimpleGrammar
 at org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:396)
 ... 14 more
Caused by: org.apache.axis2.AxisFault: edu.cmu.sphinx.demo.transcriber.TranscribeSimpleGrammar
 at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
 at org.apache.axis2.util.Utils.getServiceClass(Utils.java:804)
 at org.apache.axis2.deployment.util.Utils.fillAxisService(Utils.java:430)
 at org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:388)
 ... 14 more
Caused by: java.lang.ClassNotFoundException: edu.cmu.sphinx.demo.transcriber.TranscribeSimpleGrammar
 at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
 at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
 at java.lang.Class.forName0(Native Method)
 at java.lang.Class.forName(Class.java:169)
 at org.apache.axis2.util.Loader.loadClass(Loader.java:261)
 at org.apache.axis2.util.Loader.loadClass(Loader.java:229)
 at org.apache.axis2.util.Utils.getServiceClass(Utils.java:801)
 ... 16 more 
```

我认为在创建 .aar 文件时我需要进行一些更改？如果是，那么更改应该是什么？

在下图中，我包含三个库作为外部库 sphinx4.jar jsapi.jar wsj...jar

![在此处输入图像描述](../Images/5131a8fd84414f7a7c05c851d9a3f862.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T11:50:20.497

我已经通过在项目中添加 lib 文件夹并在构建路径中包含 jar 解决了这个问题。

只需将你想要的所有 jar 复制到 lib 文件夹中，然后右键单击 jar -> 转到构建路径 -> 添加到构建路径

就是这样，你就会成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T02:28:05.460

感谢 Bhavik Kama 的回答。我遇到了同样的问题，从博客中得到了 ides，我的回答是 jar 文件应该复制到文件夹 webserviceproject\webcontent\web-inf\lib 中。

# c++ - 为什么我的运算符重载不编译？

> ID：12403856
> 
> 赞同：1
> 
> 时间：2012-09-13T10:05:01.503
> 
> 标签：c++

我有这个成员函数

```
std::ostream& operator<<(std::ostream &stream) const 
```

在`Histogram<T>`.

然后在另一个班级我有

```
static void write(const RGBHistogram<T> &hist, Output &output)
{
    std::cout << hist.redHist << std::endl;
} 
```

redHist、greenHist 和 blueHist 是直方图。

为什么它抱怨没有找到采用直方图类型右手操作数的运算符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T10:06:54.013

运算符`<<`必须作为自由函数实现才有意义：

```
//inside class definition
//still free function
friend std::ostream& operator<<(std::ostream &, const Histogram &) 
{
} 
```

或者，您可以在类之外定义它。（我更喜欢这样，因为它将类功能组合在一起）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T10:10:47.447

你应该通过你的类的引用，它应该是朋友而不是成员函数。

```
friend std::ostream& operator<<(std::ostream &ostream, const RGBHistogram<T> &stream)
{

  // do something.
  return ostream;
} 
```

# iphone - 如何在将文件保存到文档目录时更新文件的属性或键

> ID：12403857
> 
> 赞同：0
> 
> 时间：2012-09-13T10:05:11.597
> 
> 标签：iphone, objective-c, ios, dropbox-api, nsdocumentdirectory

嗨，我正在为我的 iOS 项目使用 Dropbox API，在这里通过 Dropbox iOS SDK 的 REST 调用我正在获取我的数据并将我的文件缓存到我的 DocumentsDirectory 中，以避免每次从服务器加载文件的延迟服务电话。

1.  因此，一旦从保管箱服务器下载了一个文件，我就会将它保存在我的应用程序文档目录中，并从我的文档目录中获取以供进一步参考。

2.  这里的问题是每当一个文件被更新或修改一个新的修订号我会得到一些我需要如何保存这个修订号以及相应的文件，所以下次当我想要这个文件时我会检查修订号，如果它匹配然后从我的本地目录中获取其他调用服务。

3.  现在我如何保存（更新）这个修订号字符串。

我在将文件保存到 Documents 目录时尝试了下面的代码片段，但**setAttributes**无法添加 userDefined 文件属性属性，我们只能更新默认属性

```
 NSDictionary *revisionDict = [NSDictionary dictionaryWithObject:item.rev forKey:@"revision"];
            [[NSFileManager defaultManager] setAttributes:revisionDict ofItemAtPath:DocDirPath error:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:57:11.537

如果您想操作扩展属性，您必须使用 BSD 级别的 API。特别是标题`<sys/xattr.h>`和函数，如`getxattr`, `setxattr`, `listxattr`, `removexattr`. 文档在相应的`man`页面中。

# hibernate - 使用 hql 进行休眠内部连接

> ID：12403858
> 
> 赞同：5
> 
> 时间：2012-09-13T10:05:12.967
> 
> 标签：hibernate, inner-join

我是休眠的新手。例如，我有两个表，`student`并且`phone number`这两个表有一个共同的列，`student id`. 我想使用 Hibernate hql 对这两个表进行内部连接。

**学生.java**

```
{
   private int id;   
   private String name;   
} 
```

**电话.java**

```
{
   private int pid;
   private int sid;  //same id in student.java 
   private int phone_number;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T10:15:46.680

再次阅读[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/)。您不应该在电话实体中拥有学生的 ID。相反，您应该在两个实体之间建立关联：电话属于学生：

```
public class Phone {
    @Id
    private Integer id;

    private String phoneNumber;

    @ManyToOne
    private Student owner;
} 
```

只有这样你才能使用连接：

```
// selects all the phones belonging to the students named 'John'
select phone from Phone phone where phone.owner.name = 'John' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T10:15:14.460

有了像这样的两个类，hibernate 并没有意识到让生活变得困难的关联。正常的做法是让 phone 类中的 sid 成为实际的 Student 对象，以便 hibernate 知道该关联。例如

```
class Phone {
    @ManyToOne
    @Column(name = "sid")
    private Student student;
} 
```

完成此操作后，您可以进行简单的 HQL 连接，例如

```
FROM Phone p
JOIN p.student s 
```

或者，如果出于某种原因您需要对象中的原始 ID，那么您可以使用“theta join”，在其中明确指定关联，就像普通的 SQL 连接一样。例如

```
FROM Phone p, Student s
WHERE p.sid = s.id 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-13T10:28:15.477

请在 HQL 下方找到：

SELECT * FROM student ST INNER JOIN phonenumber PN ON ST.id = PN.id where ST.Name='XXXX'

# css - 如何更改我的 GWT 列表框样式

> ID：12403861
> 
> 赞同：1
> 
> 时间：2012-09-13T10:05:19.723
> 
> 标签：css, gwt

如何更改我的 GWT 默认列表框的样式。在某种程度上，我的应用程序中的每个列表框都会改变。

这不应该工作吗？

```
 .gwt-ListBox{
color: red !important; 
```

}

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:31:44.683

如果您想以编程方式执行此操作，那么这就是我实现它的方式..

在这个特定的代码片段中，我将列表框中的一个特定项目（名为 ABC 的项目）的背景颜色设置为红色。

但是你明白了，一旦你有了选项元素，你就可以随心所欲地做。

--- 创建和填充列表框

> ```
> ListBox listBox;
> listBox.addItem("123");
> listBox.addItem("ABC"); 
> ```

-- 这里是如何设置特定项目的样式...

> ```
> NodeList<Node> children = listBox.getElement().getChildNodes();       
>     for (int i = 0; i< children.getLength();i++) {
>       Node child = children.getItem(i);
>         if (child.getNodeType()==Node.ELEMENT_NODE) {
>           if (child instanceof OptionElement) {
>             OptionElement optionElement = (OptionElement) child;
>               if (optionElement.getValue().equals("ABC")) {
>                  optionElement.getStyle().setBackgroundColor("red");  
>               }                   
>             }
>           }           
>        } 
> ```

如果这对您有用，请按赞！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:08:00.517

..................................................

Hi now do this over write

```
 body .gwt-ListBox{
color: green !important;

}

.gwt-ListBox{
color: red !important;

} 
```

***[Demo](http://tinkerbin.com/cqbawPGP)***

* * *

***Second is***

Define your `body id`

as like this

**html**

```
<body id="someid">
<div class="gwt-ListBox">
some text
</div>

</body> 
```

**Css**

```
#someid .gwt-ListBox{
color:green !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:47:42.243

如果您想更改所有列表，请将其添加到您的 CSS 文件中，如您在问题中所述：

```
select {
    color: red !important;
} 
```

# javascript - Google Docs 表面引擎

> ID：12403863
> 
> 赞同：0
> 
> 时间：2012-09-13T10:05:28.070
> 
> 标签：javascript, text, documentation, editor

是否有任何链接指向有关 Google Docs 布局引擎的更深入的详细信息？如果它使用 webgl，或 canvas 元素 2d 上下文，或任何东西。我知道谷歌是从头开始计算字符宽度的。

我正在阅读有关 Bespin 的信息，它说它存在一些性能问题，所以我想知道谷歌做了什么让它变得更快。我只是找不到有关他们如何做的任何细节。

只有当它是开源的...

顺便说一句，我尝试了 benjamn / kix-standalone 但来自 github 的源代码根本不可读：

```
function $a(a) { 
    return Wa(a) == Ta 
} 
function ab(a) { 
    var b = Wa(a); 
    return b == Ta || b == Ra && typeof a.length == Sa <br/>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-19T19:03:15.593

Google Docs 在隐藏的输入元素和/或通过键盘和鼠标事件捕获您的所有输入，然后通过完全用 Javascript 实现的自定义表面和布局引擎将文档的内容布局到您的屏幕上。

显示器上从文本到光标本身的所有内容都由 DOM 元素组成。例如，光标不是由浏览器直接呈现，而是由位于正确位置的 1 像素宽的 div 呈现。您可以使用 Chrome 的 Inspect 功能查看由 Google Docs 创建的 DOM，以查看该引擎的运行结果。有关更多详细信息，另请参阅 Google 文档产品经理的这篇博文：http: [//googledrive.blogspot.ca/2010/05/whats-different-about-new-google-docs.html](http://googledrive.blogspot.ca/2010/05/whats-different-about-new-google-docs.html)。正如您在问题中提到的，这种类型的光标定位所需的字符宽度是动态计算的。

为了更深入地了解，看看一个类似（虽然显然更简单）项目的实现可能会有所帮助：[Ritzy](http://ritzyed.github.io/ritzy/)是一个新的开源富文本编辑器，它包含一个自定义的 javascript 界面和布局引擎，就像 Google Docs 一样。它的 DOM 操作使用[Facebook React](https://facebook.github.io/react/)。据我所知，这是该技术的第一个开源实现。它包含类似 Google 文档的字符宽度和光标定位计算（请参阅[TextFontMetrics.js](https://github.com/ritzyed/ritzy/blob/master/src/core/TextFontMetrics.js)），并且可以作为有用的学习工具。

**免责声明**：我是上述项目的作者。

# facebook - Feed 对话框 - “发生错误。请稍后再试”

> ID：12403869
> 
> 赞同：2
> 
> 时间：2012-09-13T10:05:46.760
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在使用以下代码发布到用户墙。我从 developer.facebook 获取此代码。但是在打开对话框时出现“发生错误。请稍后再试”之类的错误。

```
FB.ui(
  {
method: 'feed',
name: 'Facebook Dialogs',
link: 'http://developers.facebook.com/docs/reference/dialogs/',
picture: 'http://fbrell.com/f8.jpg',
caption: 'Reference Documentation',
description: 'Dialogs provide a simple, consistent interface for applications"
 },
   function(response) {
if (response && response.post_id) {
  alert('Post was published.');
} else {
  alert('Post was not published.');
}
 }
 ); 
```

请分享解决此问题的想法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-23T08:06:16.067

就我而言，我只是将我在 facebook 开发人员网站上的应用程序设置为**公开**

![将应用设置为公开](../Images/2c9bc9d8d902f235d01329424fdc4e13.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T23:59:28.160

您的描述有语法错误：行。这段代码：

```
FB.ui(
    {
        method: 'feed',
    name: 'Facebook Dialogs',
    link: 'http://developers.facebook.com/docs/reference/dialogs/',
    picture: 'http://fbrell.com/f8.jpg',
    caption: 'Reference Documentation',
    description: 'Dialogs provide a simple, consistent interface for applic\
ations'
    },
    function(response) {
        if (response && response.post_id) {
            alert('Post was published.');
        } else {
            alert('Post was not published.');
        }
    }
 ); 
```

为我在 fbrell.com 上工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-27T15:03:07.373

eosgood 是对的，您的代码中有一个 type-o。但是，对其他人来说，这可能会有所帮助......

我有同样的问题。要尝试的事情：

*   将 FB.ui javascript 移动到页面的最后，因此它是最后执行的脚本。
*   仔细检查以确保您`<div id="fb-root"></div>`在开始正文标记之后立即具有。

# xslt - 如何在 xslt 子字符串函数中转义单引号

> ID：12403870
> 
> 赞同：25
> 
> 时间：2012-09-13T10:05:46.523
> 
> 标签：xslt, xpath

我尝试在 XSLT 中使用单引号对数据进行子串化：

```
String : DataFromXML:'12345' 
```

预期结果：`12345`

```
<xsl:value-of select="substring-after('$datafromxml','DataFromXML:')"/> 
```

结果：`'12345'`

我试过下面的代码

```
<xsl:value-of select="substring-after('$datafromxml','DataFromXML:&#39;')"/>

<xsl:value-of select="substring-after('$datafromxml','DataFromXML:&apos;')"/>

<xsl:value-of select="substring-after('$datafromxml','DataFromXML:'')"/> 
```

错误：

```
String literal was not closed 'DataFromXML:'--->'<--- 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-13T12:37:04.730

逃生的一般规则是：

在 1.0 中：

*   如果您希望字符串文字中的属性分隔符，请使用 XML 转义形式`&quot;`或`&apos;`
*   如果你想在字符串文字中使用字符串分隔符，你会被淹没

在 2.0 中：

*   如果您希望字符串文字中的属性分隔符，请使用 XML 转义形式`&quot;`或`&apos;`
*   如果您想要字符串文字中的字符串分隔符，请将其加倍（例如，'I can''t'）

Vitaliy 所示的变量 $quot 或 $apos 的使用可以使代码更清晰。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-13T10:25:41.983

这应该有效：

```
<xsl:variable name="apos">'</xsl:variable>

...

<xsl:value-of select="substring-before(substring-after($datafromxml, concat('DataFromXML:', $apos)), $apos)" /> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-13T11:27:47.863

您可以尝试在**xsl:value-of中交换和 " 和 '**

```
<xsl:value-of select='substring-before
   (substring-after($datafromxml,"DataFromXML:&apos;"), "&apos;")'/> 
```

或者，您可以使用 translate 函数来删除讨厌的撇号

```
 <xsl:value-of select='translate
    (substring-after($datafromxml,"DataFromXML:"), "&apos;", "")'/> 
```

不一定更好，但它确实消除了对变量的需要。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-13T12:53:45.887

**即使在最复杂的情​​况下——字符串同时包含引号和撇号——也可以在不借助变量的情况下提取数字**。

假设我们有这个 XML 文档：

```
<t>' "12345' "</t> 
```

并且只想提取数字。

**在以下转换中，我们使用单个 XPath 表达式来完成此操作：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="text()">
     <xsl:value-of select=
     'substring-after(.,"&apos;")
     '/>
==============  
     <xsl:value-of select=
     'substring-before(
       substring-after(substring-after(.,"&apos;"), &apos;&quot;&apos;),
       "&apos;"
                       )
     '/>
 </xsl:template>
</xsl:stylesheet> 
```

**结果是**：

```
 "12345' "
==============  
     12345 
```

**请注意**：我有意使用两个 XPath 表达式——第一个的目的是为了更容易理解在第二个 XPath 表达式中表达的内容。在模板主体中只留下最后一个`xsl:value-of`会产生想要的结果：

```
12345 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-05T14:55:01.007

只是给我未来的自己（或任何其他人）的便条，他们将受益于*对我有用的确切语法*的提醒。

声明这个变量

```
<xsl:variable name="apos" select='"&apos;"'/> 
```

并在这样的条件下使用它

```
<xsl:if test="$value = concat('G-2', $apos, 'd')">89594</xsl:if> 
```

# vb.net - 创建用于读取传入数据的 UdpClient - VB.net

> ID：12403871
> 
> 赞同：3
> 
> 时间：2012-09-13T10:05:49.207
> 
> 标签：vb.net, udpclient

我有一个代码

*已编辑，带有整个代码片段

```
 Dim receivingUdpClient As New UdpClient(20000)

   Dim RemoteIpEndPoint As New IPEndPoint(IPAddress.Any, 0)
   Try 

      Console.WriteLine("listening")

      Dim receiveBytes As [Byte]() = receivingUdpClient.Receive(RemoteIpEndPoint)

      Dim returnData As String = Encoding.ASCII.GetString(receiveBytes)

      Console.WriteLine(receiveBytes)

   Catch e As Exception
      Console.WriteLine(e.ToString())
   End Try 
```

但它给了我一个错误。

在 system.dll 中发生了 system.net.sockets.socketexception' 类型的第一次机会异常

我真的很困惑这意味着什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:06:10.343

试试下面的代码

```
Dim receivingUdpClient As New UdpClient(20000)
Dim RemoteIpEndPoint As New IPEndPoint(IPAddress.Any, 0)
Dim receiveBytes As [Byte]()
Dim returnData As String

while ("Your condition")

Try 

  Console.WriteLine("listening")

  receiveBytes = receivingUdpClient.Receive(RemoteIpEndPoint)

  returnData = Encoding.ASCII.GetString(receiveBytes)

  Console.WriteLine(receiveBytes)

Catch e As Exception
  Console.WriteLine(e.ToString())
End Try 

End While 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:27:02.777

调试应用程序时，只要遇到异常，调试器就会收到通知。此时，应用程序被挂起，调试器决定如何处理异常。第一次通过这种机制称为“第一次机会”异常。

首次机会异常消息通常并不意味着代码中存在问题。对于优雅地处理异常的应用程序/组件，第一次机会异常消息让开发人员知道遇到并处理了异常情况。

对于没有异常处理的代码，调试器将收到第二次机会异常通知，并会因未处理的异常而停止。

检查此链接： [Handle Socket.ReceiveFrom with timeout without spaming console](https://stackoverflow.com/questions/4861565/handle-socket-receivefrom-with-timeout-without-spamming-console)

对于您的情况，在循环中声明 updClient 将导致以下错误。

```
Only one usage of each socket address (protocol/network address/port) is normally permitted 
```

您可以查看下面的链接以获取解决方案。或者尝试在循环之外声明它，看看它是否有效。

[http://blogs.msdn.com/b/dgorti/archive/2005/09/18/470766.aspx](http://blogs.msdn.com/b/dgorti/archive/2005/09/18/470766.aspx)

# java - Java字节/位麻烦

> ID：12403872
> 
> 赞同：0
> 
> 时间：2012-09-13T10:05:51.783
> 
> 标签：java, serial-port, arduino

```
import jssc.SerialPort;
import jssc.SerialPortException;
import org.jfree.ui.RefineryUtilities;

public class Main {

  public static int gyro_out_X, gyro_out_Y, gyro_out_Z, acc_out_X, acc_out_Y, acc_out_Z, adc_pressure, HMC_xo, HMC_yo, HMC_zo;

  public static void main(String[] args) {
    //In the constructor pass the name of the port with which we work
    SerialPort serialPort = new SerialPort("COM4");
    try {

        //Open port
        serialPort.openPort();
        //We expose the settings. You can also use this line - serialPort.setParams(9600, 8, 1, 0);
        serialPort.setParams(SerialPort.BAUDRATE_115200,
                SerialPort.DATABITS_8,
                SerialPort.STOPBITS_1,
                SerialPort.PARITY_NONE);
        while (1 == 1) {

            byte[] sensor_buffer = serialPort.readBytes(21);
            gyro_out_X = ((sensor_buffer[1] << 8) + sensor_buffer[2]);
            gyro_out_Y = ((sensor_buffer[3] << 8) + sensor_buffer[4]);
            gyro_out_Z = ((sensor_buffer[5] << 8) + sensor_buffer[6]);
            acc_out_X = ((sensor_buffer[7] << 8) + sensor_buffer[8]);
            acc_out_Y = ((sensor_buffer[9] << 8) + sensor_buffer[10]);
            acc_out_Z = ((sensor_buffer[11] << 8) + sensor_buffer[12]);
            HMC_xo = ((sensor_buffer[13] << 8) + sensor_buffer[14]);
            HMC_yo = ((sensor_buffer[15] << 8) + sensor_buffer[16]);
            HMC_zo = ((sensor_buffer[17] << 8) + sensor_buffer[18]);

            System.out.println("gyro_out_X: " + gyro_out_X );

            //Closing the port
            //  serialPort.closePort();
        }
    } catch (SerialPortException ex) {
        System.out.println(ex);
    }
  }
} 
```

好的，在这个结构中，我读取了 21 个字节的代码，1 个字节转到 <<8 位，然后我加上另一个字节，这给了我从 -255 到 255 的值。

但在输出中我看到：

```
 gyro_out_X: 14556
 gyro_out_X: 23857
 gyro_out_X: -15234
 gyro_out_X: -255
 gyro_out_X: 23295
 gyro_out_X: -13346
 gyro_out_X: -255
 gyro_out_X: 30813
 gyro_out_X: 12506
 gyro_out_X: -255
 gyro_out_X: 5104
 gyro_out_X: -10220
 gyro_out_X: 23807
 gyro_out_X: 5246
 gyro_out_X: -463
 gyro_out_X: -27536
 gyro_out_X: -511
 gyro_out_X: -8640
 gyro_out_X: 4306
 gyro_out_X: 16448
 gyro_out_X: 21075
 gyro_out_X: 16450
 gyro_out_X: 220
 gyro_out_X: 16448 
```

每 10 毫秒发送一次数据。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:18:57.643

您正在获取两个字节（8 位）值，并创建一个“短”（16 位）值。16 位有符号值可以从 -32768 到 32767。获得 -255 到 255 之间的值的唯一方法是，无论程序发送数据的任何程序都发送正确的位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:22:12.740

这将从两个 8 位值中重建一个 16 位值。虽然 16 位会给你超过 [-255,255]。根据您的结尾，您将不得不交换`ub1`和`ub2`( `gyro_out_x = (ub1 << 8) + ub1;`)。

```
int ub1 = outByte[1] & 0xFF;
int ub2 = outByte[2] & 0xFF;
gyro_out_x = (ub2 << 8) + ub1; 
```

另外，您确定您的值从 outByte[1] 开始吗？是不是这样的：

*   outByte[0] 和 outByte[1] -> gyro_out_x
*   outByte[2] 和 outByte[3] -> gyro_out_y
*   ETC？

# java - 如何动态决定我想要多少个循环？

> ID：12403874
> 
> 赞同：4
> 
> 时间：2012-09-13T10:05:58.973
> 
> 标签：java, for-loop

这是主题：

我有一个`LinkedList list`，如果列表有 3 个元素，我想为它列出一个完整的真值表，例如：

```
a b c   <---   the three elements in list
0 0 0
0 0 1
0 1 0
1 0 0
1 1 1
1 1 0
1 0 1
0 1 1 
```

如果列表有 4 个或更多元素，我想生成一个更大的表。

**但我被困在这里：**

我知道像这样编写循环可以生成整个表：

```
 for (int a = 0; a < 2; a++){
            for (int b = 0; b < 2; b++) {
                for (int c = 0; c < 2; c++) {
                    for (int d = 0; d < 2; d++) {
                        System.out.println(a + " " + b + " " + c + " " + d);
                    }
                }
            }
        } 
```

但是我不能根据列表大小更改循环数，而且我认为为此编写特殊情况是不可接受的，那么有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T10:11:28.643

simple solution if you just want a truth table:

code:

```
int len = 3;
int num = (int)Math.pow(2, len);
for(int i=0; i<num; i++){
    // http://stackoverflow.com/a/4421438/1273830
    System.out.println(String.format("%"+len+"s", Integer.toBinaryString(i)).replace(' ', '0'));
} 
```

Basic digital logic: truth tables are binary number sequences.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:08:41.670

The number of loops needs to match the number of elements. There are two ways to solve this.

*   Use recursion so that there is one loop and the method calls itself for the next level of looping.
*   Use a single loop which repeats 2^n times and extracts out the components values.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:17:47.513

我不会为您用 Java 编写它，但这里有一个伪代码，可以让您了解如何递归地解决问题：

```
l = ['a','b','c']

def f(l, result):
    if len(l) == 0:
        print result
        return
    first = l[0]
    rest = l[1:]
    f(rest, result + [(first,0)])
    f(rest, result + [(first,1)])

f (l, []) 
```

这应该打印如下内容：

```
[('a', 0), ('b', 0), ('c', 0)]
[('a', 0), ('b', 0), ('c', 1)]
[('a', 0), ('b', 1), ('c', 0)]
[('a', 0), ('b', 1), ('c', 1)]
[('a', 1), ('b', 0), ('c', 0)]
[('a', 1), ('b', 0), ('c', 1)]
[('a', 1), ('b', 1), ('c', 0)]
[('a', 1), ('b', 1), ('c', 1)] 
```

# ibm-midrange - 自动生成数字 AS/400

> ID：12403876
> 
> 赞同：0
> 
> 时间：2012-09-13T10:06:02.810
> 
> 标签：ibm-midrange, rpg

我的显示文件“EMPID”中有一个字段。

该字段必须自动生成并受到保护。

如果我要使用数据区，我该如何将它包含在我的 rpg（不是 rpgle）中。在 rpg 中自动生成数字的其他可能方法是什么。请指导。

重新编辑：使用了数据区域，它就像一个魅力：

请注意以下代码：

```
 C*** ARATWO IS NAME OF DATA AREA OBJECT           
C           *NAMVAR   DEFN           ARATWO  40   
C           *LOCK     IN   ARATWO                 
C                     Z-ADDARATWO    EMP     40   
C                     ADD  1         EMP          
C                     Z-ADDEMP       ARATWO       
C                     OUT  ARATWO 
```

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T07:31:23.723

您可以在 RPG 中使用 SQL。两种可能：第一个 SEQUENCE SQL CREATE SEQUENCE my_lib/my_sequence .....

看看这里[http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z10.doc.sqlref%2Fsrc%2Ftpc%2Fdb2z_sql_createsequence.htm](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z10.doc.sqlref%2Fsrc%2Ftpc%2Fdb2z_sql_createsequence.htm)

第二种：PF（表）中的自动增量字段 在 DB2 SQL 中，您可以创建一个表（物理文件），其中定义的字段类似于始终生成为标识 示例：

```
create table MY_LIB/MY_FILE (                                        
    Id_Auto     int             not null generated always as identity,
    Filed2     int             not null with default,                
    Field3        char(10)        not null with default,                
    PRIMARY KEY (Id_Auto)  
); 
```

这样，对该文件的每个 INSERT 操作都会自动增加字段 Id_Auto 的值。

```
insert into MY_LIB/MY_FILE (Field2, Field3) values(10, 'Paolo');
set My_Var = IDENTITY_VAL_LOCAL() 
```

`IDENTITY_VAL_LOCAL()`在这两个操作之后，Id_Auto 字段会自动递增，您可以使用函数在 My_Var 中获取他的值

再见

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:27:17.753

[RPG 用户指南](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/books/c0918160.pdf)的第 11 章提供了在RPG中使用数据区的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T05:25:39.333

如果您愿意在您的 RPG 程序中使用 SQL，那么我建议您使用 DB2 Sequence 对象（实际上是一个隐藏的数据区域）来分配您的 EMPID。

要进行设置，您可以使用以下内容：

```
CREATE SEQUENCE GenEmpID as numeric (6,0) start with 10000;  -- pick your own start point 
```

然后在您的 RPG 中，您可以使用如下语句：

```
VALUES next value for GenEmpID 
  INTO :newkey 
```

newkey 中的值可以显示在您的屏幕上，并且可以在您执行 INSERT 时用作记录中的 EMPID 值。

这种方法避免了仅仅为了让 DB2 生成下一个键值而执行空 INSERT，然后执行单独的 UPDATE 以实际填充空记录。当您只能执行一项时，为什么还要执行两项数据库操作？相反，我们只读取和修改一个数据区域，我们这样做的方式是调用一次 SQL，而不是使用一个 RPG 语句到操作系统去读取数据区域，增加值，然后再执行另一个 RPG 语句来再次进入操作系统并更新值。一般来说，在所有其他条件相同的情况下，调用操作系统的次数越少越好。这允许 DB2 和操作系统为您优化操作，有时低于 MI 级别。

# iphone - 如何在 iPhone 中使用下拉菜单？

> ID：12403881
> 
> 赞同：3
> 
> 时间：2012-09-13T10:06:23.550
> 
> 标签：iphone, uitableview, drop-down-menu, popup

在我的应用程序中，单击按钮时，我需要一个下拉菜单或弹出窗口来选择语言（英语、阿拉伯语、法语、印地语）。如何实现并帮助我编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:32:12.467

设计下拉列表的简单方法是将其表示为一个`UITableView`和一些动画。这使它看起来真的像一个下拉列表。这是我用来创建一个的代码。为此首先导入`<QuartzCore/QuartzCore.h>`框架。

```
-(IBAction)DropDownTable:(id)sender
{
TableView.hidden = NO;
if(TableView.frame.origin.y ==203)
{
    [UIView beginAnimations:nil context:NULL]; 
    [UIView setAnimationDuration:0.5f];
    [TableView setFrame:CGRectMake(224, 204, 27, 160)];
    [UIView commitAnimations];
    [self.view addSubview:TableView];
}

else if (TableView.frame.origin.y == 204)
{
    [TableView setFrame:CGRectMake(224, 203, 27, 0)];
    TableView.hidden = YES;
}

[self.view addSubview:TableActivityLevel];
} 
```

首先制作一个 tableview ，声明它的方法并制作包含各种语言的数组。把这个功能放在一个点击上`UIButton`，你会看到它的工作！快乐编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:20:07.250

这正是 UIPickerView 的用途。老实说，在开始编写代码之前至少通读一次 Apple 的 HIG。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:04:58.350

我不认为这是做下拉列表的最简单方法...最简单的方法是使用 UIActionSheet ...添加多个按钮使其表现为具有您不必管理的表格视图的列表，这很棒。 .看看截图：

![在此处输入图像描述](../Images/d4d0a97804aeb539fe5dfde298ec07a1.png)

# jquery - 使用 jQuery ui 可拖动时，:active 代码不起作用

> ID：12403884
> 
> 赞同：0
> 
> 时间：2012-09-13T10:06:45.043
> 
> 标签：jquery, css, jquery-events, jquery-ui-draggable, mousedown

这是我的代码，我尝试让一个对话框可拖动，但它上面的按钮失去了它的`:active`功能。我将“手柄”选项添加到可拖动，但不起作用。我究竟做错了什么？

```
function Alert(text){
    var $Alert = $('<div/>').attr('id', 'Alert');
    $('body').append($Alert);

    $Alert.draggable({handle:"#Alert"});

    $Alert.append($('<div/>').attr('id', 'AlertText').text(text));
    $Alert.append($('<br/>'));
    $Alert.append($('<div/>').attr('id', 'AlertButton').text('OK'));

    $('#AlertButton').click(function(){
        $Alert.remove();
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:36:24.443

等等......你在选择`$('<div/>')`什么？也许您应该使用`div`ID 或类；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:38:56.753

对不起各位，我是新人，所以我当时无法回答自己。我试图发表评论，但显然它没有显示。我自己找到了答案，stackoverflow.com 甚至可以为我保存答案，所以这里是：虽然我在发布之前搜索了很多谷歌和 StackOverflow，但我在这里找到了答案。 [Jquery Draggable UI 覆盖了支持可拖动的 div 中 HTML 元素的正常浏览器行为](https://stackoverflow.com/questions/3227819/jquery-draggable-ui-overrides-normal-browser-behavior-for-html-elements-inside-d)

您可以像这样禁用从内部拖动：

```
$("#popup div").bind('mousedown mouseup', function(e) {
  e.stopPropagation();
}); 
```

event.stopPrpagation() 阻止对该内部的单击冒泡到绑定了拖动事件的外部。由于事件永远不会到达那里，那些拖动事件处理程序不会干扰。您可以在创建可拖动对象之前或之后运行此代码，无论哪种方式都可以。

这是我当前的代码，以防它帮助某人：

```
function Alert(text){
    var $Alert = $('<div/>').attr('id', 'Alert');
    $('body').append($Alert);

    /*optional, requires jQuery ui .draggable()*/
    $Alert.draggable({handle:"#Alert"});

    $Alert.append($('<div/>').attr('id', 'AlertText').text(text));
    $Alert.append($('<br/>'));
    $Alert.append($('<div/>').attr('id', 'AlertButton').text('OK'));

    $("#AlertButton").bind('mousedown mouseup', function(e) {
        e.stopPropagation();
    });

    $('#AlertButton').click(function(){
        $Alert.remove();
    });
} 
```

# php - 带有发布按钮的表格

> ID：12403887
> 
> 赞同：2
> 
> 时间：2012-09-13T10:07:01.750
> 
> 标签：php, html

我从我的 mysql 数据库中获取数据并想列出一个列表。在列表中，我想要一个使用 post 将值发送到下一页的按钮。

```
$result = mysql_query("SELECT * FROM all");
echo "<table border=\"1\">";
echo"<tr>
    <th>ID</th>
    <th>Naam</th>
    <th>Eigenaar</th>
    <th>Plaats</th>
    <th>Bewerk</th>
    </tr>";
    ?>
    <form action="editshop.php" method="post">
    <?php
    while($rij = mysql_fetch_array($result))
  {

    ?> 

        <?php
        echo "<tr><td>".$rij['id'] . "</td><td> " . $rij['naam'] ."</td><td>";
        echo $rij['eigenaar'] . "</td><td>" . $rij['plaats']."</td>" ;
        echo"<input type=\"hidden\" name=\"id\" value=".$rij['id']."  /><td><input type=\"submit\" /></td>";
        echo "</tr>";
    }
echo "</form></table>"; 
```

表格看起来不错，但是当我按下按钮并且 editshops.php 打开时，我`echo $_POST["id"];` 始终拥有列表的最后一个 id。我只想要与列表中的 id 相同的数字。在列表中，ID 显示良好。我做错了什么（对不起，如果这篇文章的布局不好，这是我的第一篇文章，我不明白如何突出显示代码） **更新** 将循环更改为

```
<?php
    while($rij = mysql_fetch_array($result))
  {

    ?> 
        <form action="bewerkshop.php" method="post">

        <?php
        echo "<tr><td>".$rij['id'] . "</td><td> " . $rij['naam'] ."</td><td>";
        echo $rij['eigenaar'] . "</td><td>" . $rij['plaats']."</td>" ;
        echo"<td><input type=\"submit\" name=\"id\" value=\"".$rij['id']."\"  /></td>";
        echo "</tr>";
    }
echo "</form></table>";

?> 
```

现在一切正常，但按钮的名称是 ID 号，我可以将其更改为编辑。所以所有按钮都说编辑而不是id号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:10:02.137

~~我相信你需要使用类似的东西`name="id[]"`来获取一个数组~~

我现在看到每行都有一个提交按钮，这意味着您需要每行制作一个表单，或者将 id 值放在提交按钮本身中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:10:01.203

看起来`<input>`缺少围绕该值的一组引号：

```
value=\"".$rij['id']."\" 
```

应该正确地做到这一点。

但是，如果您对每个输入使用相同的名称，PHP 会将数据覆盖到最后发送的 ID（因为所有隐藏的输入都具有相同的名称）。

您可能需要考虑为每行数据制作一个表格。所以您知道实际发送的是哪一个 - 或使用一些 javascript 提交表单并选择要传递的正确值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:15:28.923

因为您发布时所有隐藏的输入都具有相同的名称，所以它会给您最后一个 ID，您可以将其作为数组发布

```
"<input type=\"hidden\" name=\"id[]\" value=".$rij['id']."  /> 
```

或通过将 id 传递给提交按钮本身来发布它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:15:43.567

注意：我不确定您是想通过提交编辑多行还是只编辑一个。我的回答只对编辑多行有帮助。

您正在为每一行编写一个输入字段，所有字段都具有相同的名称。这就是为什么最后一个覆盖所有其他的原因。

您需要相应地命名您的输入字段。

例子：

```
<input name="naam[1]" value="..." /> 
```

这里的 1 是您的行的 ID。

然后，您可以遍历 $_POST['naam'] 并获取值。

```
foreach ($_POST['naam'] as $id => $value) {
    $otherValue = $_POST['otherValue'][$id];
    // ...

    // do something with it and add some checks if the keys exist.
} 
```

# sql - 查询根据 SQL_TRACE 快速运行，但实际完成时间要长得多

> ID：12403888
> 
> 赞同：1
> 
> 时间：2012-09-13T10:07:04.307
> 
> 标签：sql, oracle, sqlplus

我有一个查询，通过在 SQL*PLus 和 autotrace traceonly 中设置时间，发现需要 40 秒才能完成。

然而，从收集的 SQL 跟踪文件来看，查询大约需要 10 秒才能完成。

```
call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        1      0.02       0.02          0          0          0           0
Execute      1      0.00       0.00          0          0          0           0
Fetch    19537      2.66       6.49         77      61929          0      293035
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total    19539      2.68       6.52         77      61929          0      293035 
```

运行 SQL*Plus 客户端和数据库的机器在地理位置上位于同一个中心，并且在同一个本地 LAN 上。

显示已被抑制，因此渲染应该不是问题。正在访问的表是压缩的。

那么这 30 秒能去哪里呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:59:07.213

抱歉各位回复晚了。在相当长的一段时间内被取消路由以从事其他工作。我想我得到了答案。我以前没有意识到的那种愚蠢的错误。这是 SQLPlus 的获取大小问题。通过将 arraysize 设置为 5000（默认为 15），我得到了接近获取时间的执行时间。客户端和服务器之间的往返显着减少。

并回应您的一些建议/问题： 1\. 检查 v$session_wait？很遗憾我没有第一眼执行它。通过查看 SQLPlus 统计信息，我注意到了这个缺陷。感谢您的建议。下次我也会检查这个。2\. 跟踪文件中还有其他内容吗？跟踪文件中没有其他内容。好吧，我的意思是在同一会话期间没有执行其他主要 SQL。3.实际查询？对不起，我可以在这里发布。但预计金额。4\. 查询后直接运行trace？不，我先清除了缓存。然后启用跟踪并执行查询。所以结果不是由任何缓存驱动的。

再次感谢大家:)

# jquery - Soundcloud json feed reader

> ID：12403891
> 
> 赞同：0
> 
> 时间：2012-09-13T10:07:22.980
> 
> 标签：jquery, soundcloud

Hi have this code but it's throwing an error. How can I output some of the items within the feed?

```
var jsonSoundCloudFeed = "http://api.soundcloud.com/users/pete-snodden/tracks.json?client_id=a27703be6852256590c1921c5f8c7281";

            $.ajax({
                url: jsonSoundCloudFeed,
                data: {},
                dataType: "jsonp",
                callbackParameter: "jsoncallback",
                timeout: 5000,
                success: function(data){
                    $.each(data.kind, function(i, item) {

                        alert('yo');
                    });
                },
                error: function(XHR, textStatus, errorThrown){
                    console.log("ERROR: " + textStatus);
                    console.log("ERROR: " + errorThrown);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:24:59.393

只需将处理程序中的`each`-block更改为`success`如下所示：

```
$.each(data, function(i, item) {
    alert(i + " " + item.kind);
}); 
```

有关整个代码，请参阅[此 JSfiddle 。](http://jsfiddle.net/8F3rk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:14:36.300

Like j0nes said, there's a bug in your success handler, but that's probably not even being executed: for JSONP, the extension should be ".js" instead of ".json".

# c - Some questions about global variables in multi-threaded programming

> ID：12403895
> 
> 赞同：3
> 
> 时间：2012-09-13T10:07:50.283
> 
> 标签：c, multithreading, global-variables

Here is my code:

```
#include <stdio.h>
#include <unistd.h>

static volatile int t=0;

int main(void){
    int i;
    for (i=0; i<2; i++){
        fork();
        printf("pid:%d: addr:%d val:%d\n", getpid(), &t, t++);
    }
    printf("pid:%d: addr:%d val:%d\n", getpid(), &t, t++);
    return 0;
} 
```

the output like that:

```
pid:16232: addr:134518684 val:0
pid:16233: addr:134518684 val:0
pid:16232: addr:134518684 val:1
pid:16232: addr:134518684 val:2
pid:16234: addr:134518684 val:1
pid:16234: addr:134518684 val:2
pid:16233: addr:134518684 val:1
pid:16233: addr:134518684 val:2
pid:16235: addr:134518684 val:1
pid:16235: addr:134518684 val:2 
```

The address of global variable t is same, does all threads operate the same variable t? I expect the val was "0, 1, 2, 3, 4, 5, ...", how should I do?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:12:31.243

这是分叉一个不同的进程，而***不是***产生新线程。结果是有意义的，因为分叉的进程将获得父进程内存的*副本*。

如果您打算使用分叉，这是一种更标准的方法：

```
int main ()
{
   int pid;

   pid = fork();

   if (pid == 0) {
      // This will be where the child process executes
   } else if (pid > 0) {
     // This is where the parent process executes
   }
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T10:18:09.253

结果是正确的。这是因为，在分叉时，您创建了一个新进程，该进程获取父进程内存的副本。

您看到的地址是虚拟的，因此，即使它们相同，也不意味着它们指向相同的物理内存区域。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T10:26:45.657

`fork`由于其他人提到的原因，不会产生您期望的结果。即使它确实产生了一个新线程，您也不会以线程安全的方式增加变量。如果要生成*线程*并在每个线程中增加一个变量，则可以使用 pthreads 和互斥锁，如下所示：

```
#include <stdio.h>
#include <unistd.h>
#include <pthread.h>

int t = 0;
pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;

void* threadFunc(void* param) {
    pthread_mutex_lock(&mutex);
    printf("%d\n", t++);
    pthread_mutex_unlock(&mutex);
}

int main(void){
    int i;
    pthread_t threads[5];
    for (i = 0; i < 5; i++){
        pthread_create(&threads[i], NULL, threadFunc, NULL);
    }

    for (i = 0; i < 5; i++){
        pthread_join(threads[i], NULL);
    }

    pthrad_mutex_destroy(&mutex);
    return 0;
} 
```

所有线程共享父进程的地址空间（`t`位于哪里），因此它们都会递增相同的`t`.

# php - Zend 会话因登录失败而被擦除

> ID：12403899
> 
> 赞同：1
> 
> 时间：2012-09-13T10:07:58.503
> 
> 标签：php, zend-framework, zend-auth

我的`Zend_Auth`功能有问题。

`Zend_Auth`我有一个 Web 应用程序，当会话中的密钥超时时，它会使用登录框提示用户。当用户使用正确的凭据登录时，会话中的密钥将重置回 true。但是，当用户输入错误的凭据时，会话中的所有密钥都会被擦除并且会话不再有效？

我想知道该`Zend_Auth::getInstance()`功能是否正在擦拭它以重新开始？

有任何想法吗？

```
protected function _process($values)
{
  // grab data from config
  $iniTime = Zend_Registry::get('config')->inactive->session;
  $expireTime = $iniTime->timeout;
  $realIP = new Application_Model_RealIP();
  // Get our authentication adapter and check credentials
  $adapter = $this->_getAuthAdapter();
  $adapter->setIdentity($values['email']);
  //$pwEncode->encode_password($values['password'])
  $adapter->setCredential($values['password']);
  $auth = Zend_Auth::getInstance();
  $result = $auth->authenticate($adapter);
    if ($result->isValid()) {
        $user = $adapter->getResultRowObject();
        $user->session_IP = $realIP->getRealIpAddr();
        $auth->getStorage()->write($user);
        //check whether the client is authenticated
        $session = new Zend_Session_Namespace('new_session');
        // Set "dummy" key with expiration
        $session->key = true;
        $session->setExpirationSeconds( $expireTime, 'key' );
        return true;
     }
   return false;
} 
```

链接到调用 _process 方法的 auth 函数[链接](http://paste.laravel.com/5wQ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:22:09.640

据我所知，您需要`_forward()`（*保留请求*）或`_redirect()`（*新请求*）返回登录，无论是由于登录失败或第 60 行和第 100 行之间的某个`authenticate()`位置。`_process()``authAction()`

从我一直在阅读的内容来看，似乎记录了失败的登录并且数据库已更新，但随后......什么也没有。没有重定向，没有转发，只有一个设置为 500 的标头并生成了一条消息。

希望这可以帮助。我希望我没有完全错过它。

# asp.net - accessing hashed password

> ID：12403901
> 
> 赞同：1
> 
> 时间：2012-09-13T10:08:02.780
> 
> 标签：asp.net, hash, cryptography, sha1, sqldatareader

I am hashing password together with a user login and saving it in the database as VARBINARY 20 bytes long.

Now, I am trying to build Login page in asp.net. How can I source the password value from database to compare it with the one provided by the user? I use SqlDataReader to read the database.

Regards,

Bartosz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:11:21.643

您需要将这些存储在一个表中，该表包含一个带有明文用户名的列，以便您可以根据尝试登录的用户获取哈希。并将散列输入与散列存储的输入进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:10:18.643

您不会取消散列数据库密码并将其与输入进行比较。

您对输入进行哈希处理并将其与密码进行比较。如果两个哈希匹配，则假设它是相同的密码¹。

¹从技术上讲，根据您的哈希函数，它可能不是，因为用户可能随机输入了一个密码，该密码与真实密码的值相同，但这是迂腐的；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:10:57.237

您在用户输入的密码上创建一个哈希（使用与创建初始哈希相同的算法）并在数据库中搜索哈希是否与初始哈希相同->是的，它是相同的密码

哈希的想法是有一个不可返回的函数 --> 你可以检查它是否相同，但你永远无法重建输入数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:11:57.800

As RB. said, you retrieve the hashed passed from the database. Then you take the password provided by the user and hash it using the same hashing algorithm you used previously. If the hashcode from the database matches the hashcode for the user entered password, then the password is correct.

# c# - 取消任务队列中正在执行的任务

> ID：12403907
> 
> 赞同：1
> 
> 时间：2012-09-13T10:08:18.630
> 
> 标签：c#, .net, multithreading, asynchronous, task-parallel-library

我有一个需要按顺序处理的项目列表（但在单独的工作线程上以保持 UI 响应能力）。需要注意的重要一点是，这些项目可以运行很长时间（5 - 10 秒）。

```
Task<bool> currentTask = null;

foreach (var item in items)
{
    var currentItem = item;

    // Add a new task to the sequential task queue
    if (currentTask == null)
        currentTask = Task.Factory.StartNew<bool>(() => 
        { 
            return currentItem.ProcessItem(); 
        }, processCancelTokenSource.Token);
    else
        currentTask = currentTask.ContinueWith<bool>(t => 
        { 
            return currentItem.ProcessItem(); 
        }, processCancelTokenSource.Token);

    // Update UI after each task completes
    currentTask.ContinueWith(t =>
    {
        if (t.IsCanceled)
            currentItem.State = State.Cancelled;
        else
        {
            if (t.Result)
                currentItem.State = State.Complete;
            else
                currentItem.State = State.Failed;
        }
    },TaskScheduler.FromCurrentSynchronizationContext());
} 
```

现在，我正在使用 a`CancellationToken`来取消队列的处理（有一个“取消处理”按钮）。

问题是这不会取消当前正在执行的任务。如果`CancellationTokenSource.Cancel()`被调用，那么队列中所有等待执行的任务都会被取消，并且它们的item`currentItem.State`会被设置为`State.Cancelled`，这是正确的。问题是取消时正在执行的任务将继续执行，直到完成，然后设置为`State.Complete`or `State.Failed`。这并不理想，原因有两个：（1）取消后任务仍在运行，（2）状态未设置为`State.Cancelled`因为`t.IsCanceled`不正确。

有没有办法让我安全地取消/停止当前正在执行的任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T10:25:00.180

Tasks 支持优雅的取消模式。`CancellationToken`只是一个**象征**。它不会中断任何正在执行的代码或中止线程。您应该自己在任务正文中检查此令牌。

要记住的一点：如果您想取消当前任务，请通过[`CancellationToken.ThrowIfCancellationRequested`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.throwifcancellationrequested)方法取消它，而不仅仅是退出任务主体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T10:28:47.197

查看这篇关于任务取消的 msdn 文章。[http://msdn.microsoft.com/en-us/library/dd997396.aspx](http://msdn.microsoft.com/en-us/library/dd997396.aspx) 您所要做的就是检查任务是否在任务的工作方法中被取消。将您的支票取消代码放在方法的关键区域。希望能帮助到你！

# c - LIbrary Routine Called out of Sequence Error

> ID：12403916
> 
> 赞同：0
> 
> 时间：2012-09-13T10:08:46.820
> 
> 标签：c, sqlite

Why can't I insert to my database? I've read multiple threads regarding this error and all of their problems were that they forgot calling open for the database. Help?

```
sqlite3 *data;
sqlite3_stmt *res;
char *errMSG;
int sql=0;
const char *tail;
char insert[100];

sql = sqlite3_open("pokemon.db", &data);
if(sql){
    puts("Can't open database");
    exit(0);
}

sprintf(insert, "Insert into Players values('%s','%s',1, 0,%d,%d,%d,0,0,'%s');", name, species, HP, ATTK, DEF, key);

sql = sqlite3_prepare_v2(data, insert, 1000, &res, &tail);
printf("%d\n",sql);
sqlite3_step(res);
sqlite3_finalize(res);
sqlite3_close(data);

printf("You have successfully captured a new Pokemon!<br>");
printf("%s", sqlite3_errmsg(data));
printf("<form action=start.cgi><input type=submit value='Go back to Home Page!'></form>");

printf("</body></html>");
return 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-13T18:08:48.323

在您对 的调用中`sqlite3_errmsg(data)`，数据库连接`data`已经关闭。

我怀疑这是无效的——并且这个无效的调用`sqlite3_errmsg()`是错误字符串所指的，而不是任何早期的错误。

# openlaszlo - 如何在openlaszlo中以编程方式确定不同纵横比的xscale和yscale？

> ID：12403917
> 
> 赞同：1
> 
> 时间：2012-09-13T10:08:48.720
> 
> 标签：openlaszlo, lzx

我在拉伸视图时遇到了一些问题，所以最后我使用 xscale 和 yscale 来缩放视图。这个问题在我的机器上解决了，它有一个解决方案

```
canvas.width -1280
canvas.height - 1023 
```

在全屏模式下。

但是当我在我朋友的机器上检查时

```
canvas.width -1280
canvas.height - 697 
```

在全屏模式下，屏幕的一部分被剪切。

我给出的当前比例因子是 xscale = 1.33 和 yscale = 1.33。应更改 yscale 以适应第二个系统。如何以编程方式确定此因素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:17:19.190

这是一个示例代码，它向您展示如何根据比率缩放视图。该比率由 unscaledwidth 和 unscaledheight 属性定义。没有最小宽度或最小高度的实现，但如果需要，很容易添加。

这种方法的缺点是所有资源都会被缩放。在 SWF 运行时，默认组件的资源是基于矢量的，在 DHTML 运行时它们被转换为 PNG 文件，并且在缩放时看起来不会很清晰。我通常不会扩展现有的 OpenLaszlo 组件，但这是您的决定：

```
<canvas width="100%" height="100%">
<!-- OpenLaszlo scaled view example by Raju Bitter -->

    <class name="scaledview">
        <attribute name="unscaledwidth" type="number" value="400"/>
        <attribute name="unscaledheight" type="number" value="300"/>
        <attribute name="wratio" type="number" value="${this.unscaledwidth/this.unscaledheight}"/>

        <handler name="oninit">
            this.setAttribute("width", this.unscaledwidth)
            this.setAttribute("height", this.unscaledheight)
            this._setSize();
        </handler>
        <handler name="onwidth" reference="canvas">
            this._setSize();
        </handler>
        <handler name="onheight" reference="canvas">
            this._setSize();
        </handler>
        <method name="_setSize">
            var scale = 1.0;
            if (canvas.width/canvas.height > this.wratio) {
                scale = canvas.height / this.unscaledheight;
                this.setAttribute("x", Math.round((canvas.width-this.width*scale) / 2));
                this.setAttribute("y", 0);
            } else {
                scale = canvas.width / this.unscaledwidth;
                this.setAttribute("x", 0);
                this.setAttribute("y", Math.round((canvas.height-this.height*scale) / 2));
            }
            this.setAttribute("xscale", scale);
            this.setAttribute("yscale", scale);
        </method>
    </class>

    <scaledview id="sv" bgcolor="red">
       <window width="200" height="100" title="Just a window!" align="center" valign="middle"/>
    </scaledview>

    <view>
        <simplelayout axis="y" />
        <text fontsize="12"
              text="${'canvas: ' + canvas.width + ' * ' + canvas.height + '  ratio=' + (canvas.width/canvas.height)}"/>
        <text fontsize="12"
              text="${'scaledview: ' + sv.width + ' * ' + sv.height + '  ratio=' + sv.wratio}" />
        <text fontsize="12"
              text="${'scaledview: xscale=' + sv.xscale + ' / yscale=' + sv.yscale}" />
    </view>

</canvas> 
```

检查应用程序的屏幕截图，您可以在其中看到根据定义的比率缩放的红色 <scaledview>。窗口组件的大小会随着画布分辨率的增加或减少而增大或缩小。

![在此处输入图像描述](../Images/e49cae045deba3f162f2259f27fc2b7e.png)

# c++ - 在 C++11 中使用 std::function 作为委托

> ID：12403920
> 
> 赞同：8
> 
> 时间：2012-09-13T10:08:52.497
> 
> 标签：c++, delegates, c++11, function-pointers

假设我有这 3 个不同的功能，我可能想指出：

```
float test1(int a, int b) {
    return 7.0f;
}

struct TestClass {
    float test2(int a, int b) {
        return 5.0f;
    }
};

struct TestClass2 {
    float  test3(int a, int b) {
        return 3.0f;
    }
}; 
```

注意所有三个如何使用相同的参数和返回值。我想抽象出它是否是成员函数以及它属于哪个类。我想要一个委托类型，它可以引用这三个函数中的任何一个，仅取决于它的初始化方式。

这是我的第一次尝试：

```
typedef std::function<float(int, int)> MyDelegate; // is this right?

int main() {
    TestClass obj; 
    TestClass2 obj2;

    MyDelegate a = test1;
    MyDelegate b = std::bind(std::mem_fn(&TestClass::test2), obj); // is this right?
    MyDelegate c = std::bind(std::mem_fn(&TestClass2::test3), obj2); // is this right?

    return 0;
} 
```

这个想法是我也想在包装器中存储“this”指针。这样，它就像一个功能齐全的委托。例如，调用 'b(x, y)' 应该像调用`obj.test2(x, y)`.

我什至无法编译它，我可能没有完全掌握这一点。我对这些库有点陌生，VS2012 中的错误是灾难性的，无济于事。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T10:48:22.017

您需要告诉`std::bind`如何处理其他函数参数。为了使调用`b(x, y)`委托`x`和`y`两个原始函数参数，您需要使用`std::placeholders`命名空间中的占位符：

```
std::bind(&TestClass::test2, obj, std::placeholders::_1, std::placeholders::_2); 
```

而且也没有必要`std::mem_fn`（尽管它有效），因为`std::bind`已经正确处理了成员函数（使隐式`this`参数成为显式的第一个参数，就像这样`std::mem_fn`做）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T10:29:25.850

您需要向 std::bind 提供 2 个参数或提供占位符以便稍后提供它们：

```
std::function<float(int, int)> c = std::bind(&TestClass2::test3, obj2, 1, 2);
c(); //returns result 
```

或者

```
std::function<float(int, int)> c = std::bind(&TestClass2::test3, obj2, std::placeholders::_1, std::placeholders::_2);
c(1, 2); //returns result 
```

有关 std::bind 的更多信息在[这里](http://en.cppreference.com/w/cpp/utility/functional/bind)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-30T18:54:13.973

使用可视化 C++ 编译器（CTP 2012）我窥探了他们是如何做 std::function 的，并提供了我自己的解决方案来处理成员函数

用法如下：http: [//ideone.com/v5zfDn](http://ideone.com/v5zfDn)

```
class Window
{
public:
    void Show( int number ) const
    {
        //...
    }

    void ShowDynamic( int number ) volatile
    {
        //...
    }
};

void ShowWindows( int param )
{
    //...
}

int main()
{
    Window window;

    typedef mezutils::Delegate< void( int ) > Notifier;
    Notifier notifier;

    notifier = &ShowWindows;
    notifier( 0 );

    notifier = Notifier( &window, &Window::Show );
    notifier( 1 );

    notifier = [](int x) { /*...*/ };
    notifier( 2 );

    void (*funpc)(int) = func;
    notifier = funpc;
    notifier( 3 );

    notifier = [](int arg) { printf("asd %d\r\n",arg); };
    notifier(4);
    return 0;
} 
```

委托类看起来像：http: [//ideone.com/DebQgR](http://ideone.com/DebQgR)

当然这是一个有趣的原型，但我喜欢它，因为它很清楚

# java - java的Utility类中记录器的使用

> ID：12403929
> 
> 赞同：6
> 
> 时间：2012-09-13T10:09:37.490
> 
> 标签：java, eclipse, logging, messaging, utility

我只是想知道在编写 Java 代码时在实用程序类中使用 Logger API。我们总是可以使用记录器，我们将使用我们的实用程序类来记录正确的消息，但我想问的是——

**在实用程序类中使用 Logger 是一种好习惯吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T10:19:14.363

我假设您正在编写自己的 *Util 代码。

由于日志文件中的“噪音”，我个人避免在实用程序类中使用 Logger。如果您的实用程序类经过良好测试，您可以删除日志语句。

只要记住只记录日志，不要在日志语句中执行任何业务逻辑（无论是否实用程序类）。

例如，我在我的一个项目中看到了下面的内容，这不是一个好的做法。

```
log.info("Added = " + list.add("someString")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T10:24:40.307

1.  登录代码的整个目标是您应该能够仅通过查看日志来调试或查找任何异常的应用程序行为。
2.  因此，如果您提到的实用程序类包含一个重要的逻辑/算法，您认为此处的 logger 将帮助您在将来调试任何问题，那么您应该记录它。
3.  但是，如果您的 util 类包含几乎不涉及任何复杂逻辑的简洁实用功能，那么应该避免在那里进行日志记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:15:36.263

`java.util.logging.Logger`在所有实用程序类中使用它是一个好主意。大多数 Java 日志框架都能够从这个 logger 收集日志，并且您不需要捆绑任何库，因为它与 jre 一起提供。

# .net - 如何为 GC.RegisterForFullGCNotification 选择参数？

> ID：12403931
> 
> 赞同：30
> 
> 时间：2012-09-13T10:09:40.937
> 
> 标签：.net, garbage-collection

如果您想接收 GC 通知（例如，在收集期间在节点之间转移负载），那么您可以使用三个方法，`GC.RegisterForFullGCNotification`和`GC.WaitForFullGCApproach`-`GC.WaitForFullGCComplete`但是，传递给的参数`GC.RegisterForFullGCNotification`似乎在很大程度上没有意义，并且没有*现实世界*的指导给出了如何选择合适的值。有一些模糊的注释，比如[从这里](http://msdn.microsoft.com/en-us/library/system.gc.registerforfullgcnotification.aspx)：

> 使用以下准则指定 maxGenerationThreshold 和 largeObjectHeapThreshold 参数：
> 
> 阈值越大，收集可能发生的时间越远，并且越早发出通知。
> 
> 较大的阈值为运行时提供了更多机会来检查即将到来的集合。这增加了您收到通知的可能性。但是，您不应将阈值设置得太高，因为这会导致在运行时诱导下一次收集之前等待更长的时间。
> 
> 当您根据通知使用高阈值自行诱导收集时，回收的对象比运行时的下一个收集回收的对象多。
> 
> 阈值越小，收集越早发生且通知越晚的可能性越大。

或[从这里](http://msdn.microsoft.com/en-us/library/cc713687.aspx)

> `maxGenerationThreshold`一个介于 1 和 99 之间的数字，用于指定应根据第 2 代中提升的对象何时引发通知。
> 
> `largeObjectHeapThreshold`一个介于 1 和 99 之间的数字，用于指定应根据在大对象堆中分配的对象何时引发通知。
> 
> 如果您指定的值太高，您很可能会收到通知，但在运行时导致收集之前等待的时间可能太长。如果您自己诱导一个集合，您可能会回收比在运行时导致该集合时回收的对象更多。
> 
> 如果您指定的值太低，则运行时可能会在您有足够的时间收到通知之前导致收集。

但是，这并不能真正帮助我选择合理/正确的数字，除了“不太高，也不太低”。

目前，我只是使用少数提供的示例之一，即

```
// these are magic numbers; nobody really knows what they mean...
GC.RegisterForFullGCNotification(10, 10); 
```

但是......目前还不清楚`10`,是否`10`是一个正确的选择，一个任意的选择，或者我应该如何改变它以反映任何特定的使用场景。

那么：有没有选择这些数字的*正确方法？*或者它只是试错，基于我是否太早/太晚得到事件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T01:51:20.873

我可以在选择这些参数时找到的最佳答案可以在[http://assets.red-gate.com/community/books/assets/Under_the_Hood_of_.NET_Management.pdf中找到](http://assets.red-gate.com/community/books/assets/Under_the_Hood_of_.NET_Management.pdf)

> 您可能想知道调用 RegisterForFullGC Notification 中的魔术常量。这个方法有两个参数，maxGenerationThreshold 和 largeObjectHeapThreshold。这两个参数都可以是 1 到 99 之间的整数。这些参数的较大值将导致更早引发通知，而较小值将导致更接近事件实际发生时引发通知。
> 
> 第一个参数允许您指定要根据存活到第 2 代的对象数量来通知您，第二个参数指定您要根据大对象堆的大小​​来通知您。但是，这两个参数都没有指定绝对值，因此为 maxGenerationThreshold 传入 30 并不意味着在第 2 代中有 30 个对象时触发通知；它只是意味着您希望在传递值 10 之前得到通知。除非您对一个触发器比另一个触发器更感兴趣，否则您可能希望为每个参数传递相同的值，因为这将帮助确保您在同一阶段收到通知，无论触发因素如何。
> 
> 较大的值会给您更多时间来处理内存压力，但您只需要注意不要将其设置得太高。您设置的阈值越高，您收到通知的速度就越快，但您在 GC 上等待的时间就越长。在您的应用程序中使用这些参数，以查看最适合您的负载和消耗内存的对象类型。

因此，作为回答，基于上述内容，这在很大程度上是反复试验，但是您为每个参数使用的两个值可能是相同的。

# machine-learning - 错误模型语言

> ID：12403937
> 
> 赞同：2
> 
> 时间：2012-09-13T10:10:01.077
> 
> 标签：machine-learning, artificial-intelligence, spell-checking

我必须编写一个正确的名称拼写检查器。

我写了第一部分，语言模型检查器，但现在有最困难的部分，错误模型 P(W|C)，即当作者指的是 C 时，W 被输入文本的概率。

为了解决它，我提出了最简单的解决方案，算法选择具有最小 Damerau-Levenshtein 距离的单词，如果有多个名称，算法必须选择最常见的名称。

该应用程序工作正常，但我想改进它。我想介绍一种从最常见的错误中学习的电子学习机器算法。我必须实现一个机器学习算法。

所以我开始思考如何做到这一点。

进入错误模型语言是否有可能找到一些模式：

*   单词中间有拼写错误的字母是最常见的，
*   用另一个元音拼错一个元音更容易，
*   ... 很快...

我想将所有这些作为事实来实现。

另外，该算法可能用于文本识别或语音识别，因此我必须考虑：

*   同音字错误，例如 f 拼错 v 比 q 拼错 v 更常见
*   印刷错误，例如，将 i 拼错为 l 甚至 find ！词内。

为了更好地解释问题：我们可以想象这两种情况。

*   第一个是当算法用于读取扫描的纸张时
*   另一种是算法用于语音识别时。

在第一种情况下，诸如发音相似的字母之类的错误的可能性更大，而在第二种情况下，印刷错误的可能性更大。由于我不知道我的算法将在其中工作的场景，我应该实现一个动态适应场景的算法，我的意思是如果出现错误，例如 g!useppe 可能性是 giuseppe (o.4) guseppe (o.6) 算法必须选择第一个，因为 ! 与 i 相似，我发现了很多类似的错误。

我认为解决方案是从错误中学习的机器学习算法。

第一个问题，我是否清楚地解释了我的问题？
如果是这样，哪种算法符合我的要求？

我在人工智能和机器学习方面的经验是有限的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:55:11.473

很难选择一个最有可能正确的拼写，这就是为什么大多数拼写检查器提供多种选项可供选择的原因。如果可能的话，我建议你也这样做。一个人甚至可以在没有任何统计学习的情况下侥幸逃脱——只需向用户提供每个可能的有效名称，以便它与输入之间的编辑距离低于某个给定值 N。

# c# - 按钮单击事件未从 javascript 触发

> ID：12403946
> 
> 赞同：1
> 
> 时间：2012-09-13T10:10:20.093
> 
> 标签：c#, jquery, asp.net, onclick

当屏幕关闭时，我需要进行回发并将屏幕中的数据保存到会话中，为此我使用 onBeforeUnload 事件，并在屏幕中放置了一个隐藏按钮。在 on before unload 事件中，我调用 click 事件来调用按钮服务器事件。但事件没有触发。有什么我在这里想念的吗。

```
<asp:Button Style="display: none" runat="server" ID="btnHidUpdate" OnClick="btnHidUpdate_Click" />
<script type="text/javascript">
  $(document).ready(function () {
    window.onbeforeunload = updateSessionBeforeUnload; 
  });
</script> 
```

在 .js 文件中：

```
function updateSessionBeforeUnload() {
  var hidUpdate = $('[id$="btnHidUpdate"]')[0];
  hidUpdate.click();
} 
```

在 .cs 代码后面：

```
protected void btnHidUpdate_Click(object sender, EventArgs e)
{
  UpdateSession();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:17:13.320

问题是页面在执行按钮单击之前加载了下一页。

使用 Jquery Unload 事件，例如

```
$(function(){
    $(window).unload(function(){
       // put synchronous code here to persist what you need.
    });
}); 
```

你可以像 Yuriy 所说的那样使用 Ajax 事件，但是你必须`async`像`false`这样设置：

```
 $.ajax({
           type: "POST",
           url: "Url/To/Persistance",
           dataType: "json",
           data : { "data" : "to be persisted"},
           async: false
      }); 
```

**编辑** 我会一起避免点击事件并执行以下操作：

```
$(function(){
    $(window).unload(function(event){
       var hidUpdate = $('[id$="btnHidUpdate"]')[0];
       __doPostBack(hidUpdate.attr('id'),'');
    });
}); 
```

但是，如果您**必须**单击按钮，请尝试此操作

```
$(function(){
    $(window).unload(function(event){
       var hidUpdate = $('[id$="btnHidUpdate"]')[0];
       hidUpdate.click()
       alert(
         "Default: " + event.isDefaultPrevented() + "\n" + 
         "ImedPropStopped: " + event.isImmediatePropagationStopped() + "\n" + 
         "PropStopped: " + event.isPropagationStopped()
       );
    });
}); 
```

告诉我们警报说什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:33:17.553

我认为这里的其他建议应该可以正常工作。我有另一个你可以尝试的建议，那就是使用 GetPostBackEventReference。您可以在此处查看有关它的详细信息：http: [//msdn.microsoft.com/en-us/library/aa720417 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa720417(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:32:31.937

您可以使用 jquery trigger("click") 函数，该函数将调用按钮上的单击事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:58:30.707

在我看来，问题在于`onbeforeunload`事件处理程序打算在用户想要离开页面时要求用户确认。并且由于`updateSessionBeforeUnload`该方法不返回任何问题字符串，因此该方法离开后立即继续卸载过程。

如果您可以将`UpdateSession`方法设为静态，则可以使用异步`jQuery.ajax`方法调用异步调用它：

```
<script type="text/javascript">
     window.onbeforeunload = foobar;

     function foobar() {
          $.ajax({
               type: "POST",
               url: "WebForm2.aspx/UpdateSession",
               contentType: "application/json; charset=utf-8",
               dataType: "json",
               async: true
          });
     }
</script>

[WebMethod]
public static void UpdateSession()
{
} 
```

# android - 带有简单适配器的 Android ListView

> ID：12403957
> 
> 赞同：0
> 
> 时间：2012-09-13T10:11:06.567
> 
> 标签：android, android-layout, android-listview

我创建了`ListView`活动来列出从服务器检索到的一些数据。

这是**ListAtmActivity**。

```
public class ListAtmActivity extends ListActivity{

private static String url ="http://10.0.2.2:8080/hello/AvailabilityResponse";

private static final String ATM_NO = "atmbrno";
private static final String ATM_PLACE = "atmbrname";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_item);

    String brName=getIntent().getExtras().getString("key");

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONArray contacts = jParser.getJSONFromUrl(url,brName);

    try{

        for(int i = 0; i < contacts.length(); i++){
            JSONObject json_data = contacts.getJSONObject(i);

            // Storing each json item in variable
            String atm_id = json_data.getString(ATM_NO);
            String atm_name = json_data.getString(ATM_PLACE);

            HashMap<String, String> map = new HashMap<String, String>();

            map.put(ATM_NO, atm_id);
            map.put(ATM_PLACE, atm_name);

            contactList.add(map);                
        }                       
    }

    catch(JSONException e) {
        e.printStackTrace();

    }
    /**
     * Updating parsed JSON data into ListView
     * */
   ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_main,
            new String[] { ATM_NO, ATM_PLACE }, new int[] {
                    R.id.name , R.id.email });

    setListAdapter(adapter); 

    //setContentView(R.layout.list_main);

}} 
```

我的联系人数组是这样的。

```
{"atmbrname":"ANURADAPURA [ATM 2]","atmbrno":"ATM084"},
{"atmbrname":"MANNAR BRANCH ","atmbrno":"ATM344"} 
```

这里也是我的两个 xml 文件。

**list_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView android:id="@android:id/list" 
          android:layout_width="fill_parent" 
          android:layout_height="wrap_content" />    
</LinearLayout> 
```

**list_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <!-- Name Label -->
    <TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#43bd00"
        android:textSize="16sp"
        android:textStyle="bold"
        android:paddingTop="6dip"
        android:paddingBottom="2dip" />
    <!-- Description label -->
    <TextView
        android:id="@+id/email"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#acacac"
        android:paddingBottom="2dip">
    </TextView>

</LinearLayout> 
```

但我无法获得列表视图。没有错误出现。我认为我的 xml 文件有问题。谁能帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:29:15.857

我会尝试将高度设置为“match_parent”。但不确定这是否能解决您的问题。

我只遇到了 ListActivity 的问题，因此我总是使用普通的 Activity 并从 Activity 的 Contentview 中检索 ListView。

# clojure - 如何在环应用程序中跨不同用户会话维护状态

> ID：12403958
> 
> 赞同：5
> 
> 时间：2012-09-13T10:11:13.060
> 
> 标签：clojure, ring

我需要跨不同的浏览器/用户会话在服务器上维护全局状态。

我在这里的假设是，当请求进入时创建的所有原子等都是特定于该请求的。一旦返回响应，所有状态都将被销毁并释放内存。如果我错了，请纠正我。

可以使用会话中间件在内存中维护跨特定会话请求的状态。

但是，如何跨多个用户会话和请求维护状态。如果可能的话，我想避免使用 memcached / redis 等在外部存储它。是否有可能在内存本身中实现它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T10:35:38.393

你的意思是你想要在所有会话之间共享的全局状态？

如果这很容易，只需在您喜欢的任何命名空间中声明一个 atom 或 ref ，它将在所有会话中共享，例如：

```
(def my-state (atom {:foo 1 :bar 2})) 
```

这是因为 Clojure 环境会持续存在，只要应用程序服务器继续运行，并且任何未来的请求都将能够观察/修改全局状态。

说了这么多——值得记住的是， **全局状态通常是一种设计气味**。你应该考虑你是否真的需要这个，或者你是否应该考虑一些其他的选择（例如将共享状态推到数据库中）。

# image - 在 CUDA 中保存 RGB 图像

> ID：12403959
> 
> 赞同：2
> 
> 时间：2012-09-13T10:11:16.100
> 
> 标签：image, cuda, gpu

我在 uchar4 数组的前 3 个通道中有一个 rgb 图像数据。有没有我可以在 CUDA 库中使用的函数来将此 uchar4 格式保存为 RGB 图像，或者是否有另一种方法可以在 CUDA 中保存 RGB 图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:22:15.557

将 RGB 图像数据保存到文件中不涉及 CUDA。您可以使用 CUDA 以任何您想要的方式处理您的数据。

完成并获得结果后，将 RGB 数据复制回主机并保存。您基本上可以选择您最喜欢的例程/库来将 RGB 数据保存到文件中。[Roger Dahl 推荐的Boost.GIL](http://www.boost.org/doc/libs/1_51_0/libs/gil/doc/index.html)似乎确实是一个不错的选择。

因此，CUDA 中没有特定功能可让您将图像数据保存到文件中。

# wordpress - wordpress 自定义字段：结构化数据表

> ID：12403965
> 
> 赞同：3
> 
> 时间：2012-09-13T10:11:28.413
> 
> 标签：wordpress, wordpress-theming, custom-fields

我知道如何为我的自定义帖子类型创建自定义字段。但这次我需要一个非常复杂的自定义字段。我正在做一个关于农业机械的网站。机器的种类很多。对于每种类型的机器，都有一些产品具有尺寸、质量、直径、容量等特性。

每种类型只需要一个描述、一个标题和一个图像。所以我的自定义帖子类型*机器*包含带有基本信息的帖子（自定义类型=机器）。对于每台机器，我想在一个表格中总结所有不同的尺寸 - 质量 - 容量 - 奖品信息。我知道我可以在描述中创建一个 html 表，但我真的希望数据是结构化的，这样我就可以很好地设置它的样式，最终甚至可以对价格和东西进行结构化搜索。

因此，理想情况下，我希望有一个看起来有点像 excel 表的自定义字段，我可以在其中创建一些列并在类别中为每个可用产品添加行。任何想法我怎么能做到这一点？

编辑：我正在尝试 Types wordpress 插件[http://wordpress.org/extend/plugins/types/](http://wordpress.org/extend/plugins/types/)。可以选择将自定义字段组合在一起，也可以选择允许一个字段的多个实例。如果有可能允许一个组的多个实例，这对我很有用。存在这样的东西吗？

编辑：这看起来很有希望。[http://wp-types.com/documentation/user-guides/bulk-content-editing-with-fields-table/](http://wp-types.com/documentation/user-guides/bulk-content-editing-with-fields-table/) 我会调查一下，如果结果可行，也许会回答自己:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:45:02.110

似乎 wp-types 一直都有解决方案。 [http://wp-types.com/documentation/user-guides/bulk-content-editing-with-fields-table/](http://wp-types.com/documentation/user-guides/bulk-content-editing-with-fields-table/)

这是我的自定义数据表现在的样子：

![在此处输入图像描述](../Images/1c12e7cda5eb779dd3d334b44f693e9b.png)

在幕后，所有数据实际上并没有保存在一个帖子中。但是 wp-types 允许您在帖子类型之间创建层次关系，然后提供一种直接从父级快速创建子帖子的方法。这对我来说已经足够棒了。

就我而言，我创建了两种帖子类型。一种称为*machine-type*，另一种称为*machine*。

*machine-type*包含有关机器的所有基本信息（标题、描述和图像），而它的子类型*machine*包含任何不同变体的规格。

# android - How to get the images from a particular folder

> ID：12403967
> 
> 赞同：0
> 
> 时间：2012-09-13T10:11:38.893
> 
> 标签：android, listview

> **Possible Duplicate:**
> [Displaying images from a specific folder on the SDCard using a gridview](https://stackoverflow.com/questions/5039779/displaying-images-from-a-specific-folder-on-the-sdcard-using-a-gridview)

I have written the code to get the images and to show them in the listView. But I want to show the images from a particular folder which is located on sdcard . How to do it ?

```
 public class ItemsList extends ListActivity {

    private ItemsAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.items_list);

        this.adapter = new ItemsAdapter(this, R.layout.items_list_item, ItemManager.getLoadedItems());
        setListAdapter(this.adapter);
    }

    private class ItemsAdapter extends ArrayAdapter<Item> {

        private Item[] items;

        public ItemsAdapter(Context context, int textViewResourceId, Item[] items) {
            super(context, textViewResourceId, items);
            this.items = items;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.items_list_item, null);
            }

            Item it = items[position];
            if (it != null) {
     ImageView iv = (ImageView) v.findViewById(R.id.list_item_image);
                if (iv != null) {
                    iv.setImageDrawable(it.getImage());
                }
            }

            return v;
        }
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        this.adapter.getItem(position).click(this.getApplicationContext());
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:43:01.823

像这样获取图像路径

```
 Environment.getExternalStorageDirectory().getpath()+File.seperator+"image_name.jpg" 
```

添加

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

对您的清单的此权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:22:09.263

尝试这个

```
String path = Environment.getExternalStorageDirectory().getCanonicalFile().toString() + "/yousdcard_path"; 
```

# tridion - 通过VM使用核心服务有什么限制吗

> ID：12403969
> 
> 赞同：0
> 
> 时间：2012-09-13T10:11:44.717
> 
> 标签：tridion, tridion-2011

我正在使用核心服务创建组件等，但我正在使用 VM 而不是安装了 Tridion 服务器的实际服务器来创建它们。我面临的问题是我无法跟踪在 VM 上创建的项目，即使为它们生成了 TCM id，当我通过 UI 创建任何项目时，我也可以在 VM 上跟踪它们。那么当我们通过虚拟机使用核心服务创建任何项目时有什么限制吗？由于我们的服务器位于其他地理位置，因此是否有办法跟踪核心服务正在创建组件的 IP，以便我可以假设我的代码在生产服务器上可以正常工作。更多信息：-

> 我可以通过浏览器访问核心 service.svc 文件。如果通过核心服务创建项目失败，事件查看器不会显示任何错误/警告消息。

请建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:28:18.673

虽然在 app.config 文件中设置 fiddler 并运行 fiddler，然后您可以调试代码并检查哪个请求将发送到 tridion 以及哪个请求来自 tridion

```
<system.net>
    <defaultProxy enabled="true">
      <proxy proxyaddress="http://127.0.0.1:8888"
             bypassonlocal="False"/>
    </defaultProxy>
  </system.net> 
```

# jquery - Rewrite Jquery fadeIn() to use CSS3 transitions

> ID：12403972
> 
> 赞同：5
> 
> 时间：2012-09-13T10:11:58.397
> 
> 标签：jquery, fadein, css-transitions

Is there a way to just rewrite the JQuery fadeIn() and fadeOut() functions to use CSS3 Transitions when the browser supports it.

I'm using jquery transit for all other animations and I'm more comfortable with the fadeIn and fadeOut functions of Jquery but they don't run as well.

[Here's a link to the site I'm working on](http://layersdesignstudio.com/websites/solar)

eg;

```
if(CSS3TransitionsAvailable){

$.fn.fadeIn() = function(this, speed, callback){

//Fade this in Using CSS3 Transistions
}

} 
```

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T16:17:53.940

如果你想用 jQuery Transit 替换 jQuery 的 fadeIn 和 fadeOut 函数，你可以这样做：

```
$.fn.fadeOut = function(speed, callback)
{
    var transitionSpeed = typeof (speed) == "undefined" ? 1000 : speed;    
    $(this).transition({opacity: 0 }, transitionSpeed, callback);

};

$.fn.fadeIn = function(speed, callback)
{
    var transitionSpeed = typeof (speed) == "undefined" ? 1000 : speed;    
    $(this).transition({opacity: 1 }, transitionSpeed, callback);

};

$("div").on("click", function () 
{
    //Fade out for 4 seconds, then fade in for 6 seconds
    $(this).fadeOut(4000, myCallBackFunction);
});

function myCallBackFunction () 
{
        $(this).fadeIn(6000);

} 
```

## [JS 小提琴演示](http://jsfiddle.net/aydbk/)

它并不完美，但您可以根据自己的喜好进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:17:17.743

看看[这个](https://github.com/louisremi/jquery.transition.js/)插件。它可能会帮助你。

# delphi - Indy 10 TCP Client Server - testing for open communication channel

> ID：12403974
> 
> 赞同：3
> 
> 时间：2012-09-13T10:12:18.617
> 
> 标签：delphi, tcp, ping, lazarus, indy10

I am modifying an Indy10 TCP/IP application and I would like your suggestions/opinions/sample code on implementing a client side function that does the following

a) on application startup when the splash screen is displayed, it verifies that the client computer has internet access and the TCP Server is up and running and waiting for communication. If this is not the case, the application should terminate.

b) does (a) above before ANY data exchange between the client and the server

In addition, does the server need to repeatedly broadcast some sort of message to inform potential clients that it is up and running?

Thanks for your assistance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:32:59.663

***如何验证是否可以连接到 TCP 服务器？***

对于你的第一个问题；绝对将连接尝试包装到一个单独的线程，当您的初始屏幕显示时您将运行该线程。在该线程中，您可以简单地尝试[`Connect`](http://www.indyproject.org/docsite/html/TIdTCPClientCustom_Connect.html)捕获异常。如果引发异常，则连接失败。如果没有，您可以连接。对于有关此状态的通知，我将使用自定义消息，您将其发送到启动屏幕表单，如以下伪代码所示：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, IdTCPClient;

const
  WM_CONNECTION_NOTIFY = WM_USER + 1;
  SC_CONNECTION_FAILURE = 0;
  SC_CONNECTION_SUCCESS = 1;

type
  TConnThread = class(TThread)
  private
    FMsgHandler: HWND;
    FTCPClient: TIdTCPClient;
  protected
    procedure Execute; override;
  public
    constructor Create(const AHost: string; APort: Word; ATimeout: Integer;
      AMsgHandler: HWND); reintroduce;
    destructor Destroy; override;
  end;

type
  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    FConnThread: TConnThread;
    procedure WMConnectionNotify(var AMessage: TMessage); message WM_CONNECTION_NOTIFY;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TConnThread }

constructor TConnThread.Create(const AHost: string; APort: Word;
  ATimeout: Integer; AMsgHandler: HWND);
begin
  inherited Create(False);
  FreeOnTerminate := False;
  FMsgHandler := AMsgHandler;
  FTCPClient := TIdTCPClient.Create(nil);
  FTCPClient.Host := AHost;
  FTCPClient.Port := APort;
  FTCPClient.ConnectTimeout := ATimeout;
end;

destructor TConnThread.Destroy;
begin
  FTCPClient.Free;
  inherited;
end;

procedure TConnThread.Execute;
begin
  try
    FTCPClient.Connect;
    PostMessage(FMsgHandler, WM_CONNECTION_NOTIFY, 0, SC_CONNECTION_SUCCESS);
  except
    PostMessage(FMsgHandler, WM_CONNECTION_NOTIFY, 0, SC_CONNECTION_FAILURE);
  end;
end;

{ TForm1 }

procedure TForm1.FormCreate(Sender: TObject);
begin
  FConnThread := TConnThread.Create('123.4.5.6', 123, 5000, Handle);
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  FConnThread.Free;
end;

procedure TForm1.WMConnectionNotify(var AMessage: TMessage);
begin
  case AMessage.LParam of
    // the connection failed
    SC_CONNECTION_FAILURE: ;
    // the connection succeeded
    SC_CONNECTION_SUCCESS: ;
  end;
end;

end. 
```

***服务器是否需要重复广播某种消息来通知正在运行的潜在客户？***

不，这在不同的方向上起作用 - 客户端询问服务器是否正在运行。就像这样只是因为服务器不知道客户端，但客户端知道服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:25:17.687

关于**“服务器是否需要重复广播某种消息”**：

[有一些系统（服务器、服务）向积极使用IP 多播](http://en.wikipedia.org/wiki/IP_multicast)的感兴趣的客户端通告它们的**位置**（IP 地址、端口号）甚至附加信息（例如状态）。

使用 Internet Direct (Indy) UDP 组件很容易实现服务器端和客户端。

这是一个用于开源消息代理 Apache ActiveMQ 的 Delphi 的 IP 多播示例，带有完整的源代码：

**[使用 Delphi XE4 和 Indy 10.6 发现 ActiveMQ 代理](http://mikejustin.wordpress.com/2013/07/07/discover-activemq-brokers-with-delphi-xe4-and-indy-10-6/)**

# magento - Magento 客户专用确认页面 - 带有工作确认

> ID：12403978
> 
> 赞同：0
> 
> 时间：2012-09-13T10:12:41.633
> 
> 标签：magento, confirmation

新客户会收到一封电子邮件，他们必须在其中单击确认链接。此链接应将客户带到带有消息“嘿，您的帐户现已确认”的帐户页面......我如何告诉 Magento 向用户显示替代页面而不引导他进入常规页面？

# android - 进度对话框 onClickListener

> ID：12403982
> 
> 赞同：0
> 
> 时间：2012-09-13T10:12:55.927
> 
> 标签：android, listview, onclicklistener

我的 Android APP 中有一个列表，当用户单击某个项目时，我需要显示一个进度对话框。

我使用此代码开始活动。我试图放置一个进度对话框，但总是失败......

粘贴代码，请告诉我您的意见。

```
 public OnClickListener myClickListener = new OnClickListener() {        

    public void onClick(View v) {   

        String param1 = ((TextView) v.findViewById(R.id.txtdat1))
                .getText().toString();
        String param2 = ((TextView) v.findViewById(R.id.txtdat2))
                .getText().toString();
        String param3 = ((TextView) v.findViewById(R.id.txtdat3))
                .getText().toString();
        String param4 = ((TextView) v.findViewById(R.id.txtdat14))
                .getText().toString();

        Intent intent = new Intent(v.getContext(), AgendaDetail.class);

        intent.putExtra("param1", param1);
        intent.putExtra("param2", param2);
        intent.putExtra("param3", param3);
        intent.putExtra("param4", param4);

        startActivity(intent);

    }
}; 
```

Y try tu put 类似的东西

```
 final ProgressDialog dialog = ProgressDialog.show(this, "Loading...",
            "Wait");
    new Thread(new Runnable() {

        public void run() {
            startActivity(new Intent("com.places"));
            dialog.dismiss();
        }
    }).start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:19:40.980

**你需要在onclick上写这个**

```
 ProgressDialog progressDialog = new ProgressDialog(YourActivity.this);
    progressDialog.setMessage("Your message"));
    progressDialog.show(); 
```

这将有助于...

# c# - C# Linq XML，检查特定值并解析为数组

> ID：12403987
> 
> 赞同：0
> 
> 时间：2012-09-13T10:13:22.187
> 
> 标签：c#, xml, linq

我有以下 XML：

```
<?xml version="1.0" ?>
<NewDataSet>
   <Data>
     <ElementDefinition>
      <ID>1</ID>
      <QUANTITY>0</QUANTITY>
     </ElementDefinition>
     <ElementDefinition>
      <ID>2</ID>
      <QUANTITY>1</QUANTITY>
     </ElementDefinition>
   </Data>
</NewDataSet> 
```

我需要创建一个数组，其中包含所有 ElementDefinitions，其中包含一个 QUANTITY 元素，其值不是 0。

我试过：

```
var f = XDocument.Load(path);
var xe = f.Root.Elements("QUANTITY").Where(x => x.Value != "0").ToArray(); 
```

但这似乎不起作用。使用上面的 XML，数组应该包含 1 个项目，但它保持为 0。

之后我需要为数组中的每个 ElementDefinition 创建一个字符串，该字符串必须包含对应 ID 元素的值。

为此，我尝试了：

```
foreach (string x in xe)
{
   string ID = //not sure what to do here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:17:14.097

你想要这样的东西：

```
var ids = f.Root.Descendants("ElementDefinition")
           .Where(x => x.Element("QUANTITY").Value != "0")
           .Select(x => x.Element("ID").Value); 
```

由于您想要 ID，因此选择所有 QUANTITY 节点并不是很有帮助。相反，请准确选择您在问题中指定的内容：

所有元素定义 ( `Descendants("ElementDefinition")`)，其 QUANTITY 的值不是 0 ( `Where(x => x.Element("QUANTITY").Value != "0"`)。从结果节点中，选择 ID ( `Select(x => x.Element("ID").Value)`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:17:52.823

哟可以替换为

```
var xe = f.Root.Elements("Data/ElementDefinition/QUANTITY").Where(x => x.Value != "0").ToArray(); 
```

# magento - Magento 只执行最后一个事件

> ID：12403990
> 
> 赞同：0
> 
> 时间：2012-09-13T10:13:33.910
> 
> 标签：magento

我有一个小问题。我注册了两个事件，但只有最后一个被调用，有人可以帮我吗

```
<!-- Events -->
<events>
  <checkout_type_onepage_save_order_after>
    <observers>
      <save_after>
        <type>singleton</type>
        <class>XXX_testr_Model_Observer_OrderObserver</class>
        <method>orderSubmitEvent</method>
      </save_after>
    </observers>
  </checkout_type_onepage_save_order_after>

  <customer_save_after>
    <observers>
      <XXX_testr_observer_observer>
        <type>singleton</type> 
        <class>XXX_testr_Model_Observer_Observer</class>
        <method>customerSaveEvent</method>
      </XXX_testr_observer_observer>
    </observers>
  </customer_save_after>                
</events> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T23:00:29.783

首先，我可以告诉您您的 xml 是有效的。

检查这样的事情：

1.  观察者名称的重复（可能是 save_after 或 XXX_testr_observer_observer 已经存在）
2.  查看该部分，您将这些观察者放置在哪里，并且您希望它们被执行。例如，您将它们放入前端部分，因此 customer_save_after 不会在管理员中运行。
3.  检查其他观察者（来自第 3 方扩展）之前是否没有崩溃。或者，例如，它可以在其代码中使用“die”。
4.  检查其他扩展是否重写了核心模型/控制器（或者您的商店在 app/code/local/Mage/.. 部分进行了此类重写）并且其代码中没有事件调度程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:34:21.373

乍一看这可能是观察者名称冲突，尝试将其命名为唯一

尝试改变：

保存后

至：

sdz_wawiconnector_observer_save_after

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:52:15.967

根据您的使用情况，您可能会更幸运地使用控制器抛出的事件`checkout_onepage_controller_success_action`。

# facebook-graph-api - 邮箱中间的文字

> ID：12403991
> 
> 赞同：-1
> 
> 时间：2012-09-13T10:13:36.550
> 
> 标签：facebook-graph-api, facebook-timeline

如何将文本放在邮箱中间。我通过 Graph API 发布这篇文章

```
facebook_access_token.post("/me/feed", {
  :message => "Lorem ipsum dolor sit amet",
  :name => "Lorem ipsum dolor sit amet, consectetur adipiscing elit.",
  :link => 'http://heiaheia.com',
  :description => ' ',
  :picture => 'http://images.apple.com/downloads/dashboard/justforfun/images/earth_20090309105503.jpg'
}) 
```

![在此处输入图像描述](../Images/d61532060555abaeed8db2a3e6dbdc4e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:32:03.433

如果你的意思是垂直对齐它在中间，那么它是不可能的。如您所见，它的盒子有一个最小高度。

# indexing - 如何在 mongoengine 中创建索引是唯一的=真和稀疏=真

> ID：12403992
> 
> 赞同：7
> 
> 时间：2012-09-13T10:13:36.990
> 
> 标签：indexing, unique, mongoengine, sparse-matrix

我正在使用带有烧瓶的mongoengine。我有一个名为 profile 的 db.Document 类，其中我希望一个字段可以为空且唯一，我理解这样做的方法是为该字段创建一个既是稀疏 = True 又是唯一 = True 的索引，我该怎么做去做这个？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-13T13:17:32.897

您必须在`meta`定义中声明索引，例如：

```
class BlogPost(Document):
    date = DateTimeField(db_field='addDate', default=datetime.now)
    category = StringField()
    tags = ListField(StringField())

    meta = {
        'indexes': [
            {'fields': ['-date'], 'unique': True,
              'sparse': True, 'types': False },
        ],
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-24T19:18:00.430

在唯一约束的情况下，您可以使用字段声明将其设置为：

```
email = mongodb.EmailField(required=True, unique=True) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-09T08:17:56.633

我们可以直接在Field参数中提及。例子：

```
email = db.EmailField(sparse=True, unique=True, required=False) 
```

# sql - 更新查询中的 SQL 代码

> ID：12403993
> 
> 赞同：0
> 
> 时间：2012-09-13T10:13:45.390
> 
> 标签：sql, database, vba, ms-access

我再一次停留在同一个数据库上。这一次我创建了一个更新查询，当按下按钮时删除表中每个部分的 1 个。但是，当某个部分已经为 0 时，它会变为 -1。我怎样才能阻止这种情况发生？

我使用 SQL 来实现这一点，

```
UPDATE [ASM-00065 WIP] 
SET [ASM-00065 WIP].[Current Stock] = [ASM-00065 WIP]![Current Stock]-1; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:16:44.207

我可能对您的问题理解不正确，但是您是否要更新该表中该列的所有行并从中减去 1？在这种情况下，您可以使用：

```
UPDATE [ASM-00065 WIP] 
SET [ASM-00065 WIP].[Current Stock] = [ASM-00065 WIP]![Current Stock]-1 
WHERE [ASM-00065 WIP].[Current Stock] > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:18:34.673

您可以使用 MS-Access[`IIF()`](http://office.microsoft.com/en-us/access-help/iif-function-HA001228853.aspx)

```
UPDATE [ASM-00065 WIP] 
SET [Current Stock] 
   = IIF([Current Stock]>0, [Current Stock]-1, [Current Stock]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:16:52.580

您可以添加一个条件来过滤您将更新的行：

```
UPDATE [ASM-00065 WIP] SET [ASM-00065 WIP].[Current Stock] = [ASM-00065 WIP]![Current Stock]-1 WHERE [ASM-00065 WIP]![Current Stock] > 0; 
```

# html - 使用边框半径时边框被切断？

> ID：12403998
> 
> 赞同：14
> 
> 时间：2012-09-13T10:13:55.023
> 
> 标签：html, border, overlap, css

我有一个图像，它周围有一个 5px 的边框，我想把图像和边框的角都弄圆，但是在 webkit 中，图像仍然是矩形，而边框的角是圆角的。结果，图像与边界重叠，并在每个角的边界线之间产生了看起来像是间隙的东西。

我希望它看起来像这样[http://jsfiddle.net/rmi14/HWDtx/19/](http://jsfiddle.net/rmi14/HWDtx/19/)，但在 webkit 上，白色背景是矩形的，最终会重叠一些浅蓝色边框并将其切断。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-13T10:26:12.317

您必须使用该`overflow`属性，`div`因为它显示在[此小提琴中](http://jsfiddle.net/HWDtx/66/)

问候。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-12-05T10:10:23.017

因为内容角度溢出了容器角度的圆形边框

您可以使用：

```
border-radius: ...
overflow: hidden; /*add this*/ 
```

切断溢出内容的角度

# javascript - 查询。更改事件后单击事件不起作用？

> ID：12403999
> 
> 赞同：11
> 
> 时间：2012-09-13T10:13:58.253
> 
> 标签：javascript, jquery, alert

有这个示例代码：

```
<input type="text" id="changeid">
<a href="#" id="clickb">click</a>

<script>
    $('#clickb').on("click", function(event){
        alert(1);                             
        return false;
    });

    $('#changeid').on("change", function(event){
        alert(2);                             
        return false;
    });
</script> 
```

将内容放入文本字​​段并立即单击链接时，只会触发 onchange 事件，但不会触发链接单击事件。这是为什么？似乎更改事件正在阻止单击事件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T10:21:42.317

它被 阻止`alert`。换成你`alert`会`console.log`发现两个事件都被触发了。

***[演示。](http://jsfiddle.net/CFUcz/)***

```
$('#clickb').on("click", function(event){
    console.log(1);
    return false;
});

$('#changeid').on("change", function(event){
   console.log(2);                             
   return false;
});​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T10:23:33.753

当您编辑输入然后单击链接时，内部会发生以下情况

1.  您开始点击“链接”。还没有生成任何事件（甚至没有 mousedown），因为首先浏览器会做一些清理工作：
2.  输入失去焦点并将引发`blur`事件
3.  输入引发了一个`change`事件，因为它引发了 a`blur`并且值发生了变化
4.  您的`change`事件回调打开一个`alert(2)`
5.  由于出现新窗口，文档失去焦点
6.  链接永远不会遇到`click`.

解决方案是不使用`alert`（如 xdazz 建议的那样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-21T10:18:11.253

用这个

```
$("#changeid").live('change', function () ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:25:08.353

onchange 事件仅在元素模糊后触发。因此，当您输入一些文本并首先单击链接时，文本字段上的元素会变得模糊。处理更改事件的最佳方法是让 onkeyup 事件跟踪对文本字段所做的更改。