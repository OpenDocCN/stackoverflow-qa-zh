# StackOverflow 问答 10407000-10407999

# haskell - 旋转图像 .pbm Haskell

> ID：10407003
> 
> 赞同：-1
> 
> 时间：2012-05-02T02:38:42.617
> 
> 标签：haskell, matrix, rotation, ppm

我需要有关 haskell 中的旋转或自旋矩阵的帮助

我有一个数据类型 RGB 的列表列表：

```
data RGBdata= RGB Int Int Int

m = [[(RGB 0 255 255),(RGB 255 0 0)],[(RGB 255 255 255),(RGB 255 0 0)]] 
```

为了更好看，我有一个 2x2 矩阵：

```
m = [[(RGB 1 2 3),(RGB 4 5 6)],
     [(RGB 7 8 9),(RGB 1 5 9)]] 
```

我需要 90° 旋转，我的意思是：

```
m = [[(RGB 7 8 9),(RGB 1 2 3)]
     [(RGB 1 5 9),(RGB 4 5 6)]] 
```

扩展我的解释，我有 2 种数据类型：

```
data RGBdata= RGB Int Int Int
data PBMfile= PBM Int Int [[RGBdata]] 
```

我的功能收到：

```
spin :: PBMfile -> PBMfile
spin (PBM x y l) = (PBM x y ((transpose . reverse) l)) 
```

其中“x”和“y”分别是列数和行数（也许可以帮助执行该功能）。

我试着用你的答案向左旋转 90°，图像结果是错误的。

我试试

```
spin :: PBMfile -> PBMfile
spin (PBM x y l) = (PBM x y ((reverse . transpose) l)) 
```

和

```
spin :: PBMfile -> PBMfile
spin (PBM x y l) = (PBM x y ((transpose . reverse) l)) 
```

和

```
spin :: PBMfile -> PBMfile
spin (PBM x y l) = (PBM x y (((map reverse) . transpose) l)) 
```

旋转图像但不起作用。

结果类似于

[http://imageshack.us/photo/my-images/52/catmc.jpg/](http://imageshack.us/photo/my-images/52/catmc.jpg/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T03:27:00.477

TL;博士：`[transpose](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v:transpose) . [reverse](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v:reverse)`

如果您打算使用列表来存储大图像，请记住它可能效率低下，因为每个像素都有五个装箱值（很多字节）。使用未装箱的 Vector 或 Array 会更有效。只是给你一个提示。

也就是说，让我们看看列表操作对图像的作用。

```
> let demo f = mapM_ print $ f m
> demo id
[RGB 1 2 3,RGB 4 5 6]
[RGB 7 8 9,RGB 1 5 9]
> demo reverse
[RGB 7 8 9,RGB 1 5 9]
[RGB 1 2 3,RGB 4 5 6]
> demo (map reverse)
[RGB 4 5 6,RGB 1 2 3]
[RGB 1 5 9,RGB 7 8 9]
> demo (transpose)
[RGB 1 2 3,RGB 7 8 9]
[RGB 4 5 6,RGB 1 5 9] 
```

*   `reverse`垂直翻转图像（通过反转行）

*   `map reverse`水平翻转图像（通过反转每行中的像素）

*   `transpose`沿`\`对角线翻转图像。

现在，找一张纸，弄清楚如何根据这些操作执行所需的旋转（`transpose`如果你的纸是矩形的，建模会很棘手）。请记住，只要您看到纸张的背面，图像就会出现镜像。由于这些操作中的每一个都将纸张翻转，因此您需要偶数个它们来执行旋转。

您可以做的唯一旋转`reverse`是`map reverse`将纸张倒置。这意味着您需要`transpose`将图像旋转 90°。

`transpose`（对角翻转）后跟（垂直翻转）将图像*向左*`reverse`旋转 90° ：

 *```
> demo (reverse . transpose)
[RGB 4 5 6,RGB 1 5 9]
[RGB 1 2 3,RGB 7 8 9] 
```

另一方面，`reverse`（垂直翻转）后跟（对角翻转）将图像*向右*`transpose`旋转 90° （您想要的）：

 *```
> demo (transpose . reverse)
[RGB 7 8 9,RGB 1 2 3]
[RGB 1 5 9,RGB 4 5 6] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T02:54:29.820

如果我理解正确，它看起来像你想要的，在`map reverse . transpose`哪里：`transpose``Data.List`

```
> let x = [[1,2,3], [4,5,6], [7,8,9]]
> map reverse . transpose $ x
[[7,4,1],[8,5,2],[9,6,3]] 
```

请注意，如果您的输入列表足够大，这可能比必要的要慢，但是如果您的列表是 1000 x 1000 或者您在紧密的内部循环中执行此操作，则可能只会发挥作用。**

# c - 为什么 getchar 调用 printf 停止工作？

> ID：10407008
> 
> 赞同：3
> 
> 时间：2012-05-02T02:39:24.770
> 
> 标签：c, io, printf

我写了一个程序，它接受一个输入字符并输出该字符，就像这样

```
int ch = getchar();
printf("%c", ch); 
```

它像我预期的那样工作。然后我决定先欢迎并打印`Hello`。

```
printf("Hello!\n");
int ch = getchar();
printf("%c", ch); 
```

令我惊讶的是，这导致编译器抛出两个错误：

> 错误 C2065：“ch”：未声明的标识符
> 错误 C2143：语法错误：缺少“;” 在“类型”之前

我不明白为什么添加第一行会导致这种情况发生。无论如何，我重构了程序以摆脱`int`声明，错误神奇地消失了。

```
printf("Hello!\n");
printf("%c", getchar()); 
```

这是怎么回事？导致这些错误出现然后消失的魔法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T02:42:07.277

如果您使用的是较旧的 c 编译器，则必须先进行所有变量声明。尝试：

```
int ch;
printf("Hello!\n");
ch = getchar();
printf("%c", ch); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T02:45:15.667

在 C89 标准中**不允许**在块开始后创建新变量，但在较新的 C99 标准 **中允许。**

您正在使用较旧的编译器或不完全符合 c99 的编译器。
您的代码示例应该可以在任何好的编译器上正常工作。**[适用于 gcc-4.3.4](http://ideone.com/pKkJR)**

* * *

**替代解决方案：**

您可以通过两种方式摆脱这些问题：
**在块的开头声明变量：**

```
int ch;
printf("Hello!\n");
ch = getchar();
printf("%c", ch); 
```

或者

**创建一个用于声明变量的新块：**

```
printf("Hello!\n");
{ 
    int ch = getchar();
    printf("%c", ch);
} 
```

* * *

**建议：**

你真的应该改变你的编译器，因为如果我没记错的话，gcc 甚至在 c99 之前就支持它作为编译器扩展。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T02:45:59.847

C99 之前的 C 版本不允许“混合声明和代码”，这意味着您必须在作用域的开头声明所有变量。与 C++ 编译器一样，现代 C 编译器允许混合声明和代码。一些非 C99 编译器甚至允许它作为扩展。

我认为这是为了让编译器更容易确定堆栈上实际需要多少空间，或者类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T03:59:57.563

很可能，您使用的是相当老的 C 编译器。可能是支持 C89 的一种。使用 so 会强制您在块中的任何内容之前声明任何变量（例如函数或 main） 两种方法：首先声明 ch：

```
int ch = getchar();
printf("Hello!\n");
printf("%c", ch); 
```

或者，更好的是，尝试更改您的编译器。您使用的是什么操作系统？视窗？Linux？苹果电脑？

另外，快速说明。您正在使用 getchar 获取整数。

尝试使用 scanf("%d", &ch) 代替 getchar。或者，如果您确实需要使用 getchar 并将其打印为 char，请将 ch 声明为 char 本身，如果您需要再次将其用作整数，请使用 itoa 函数，它将 char 转换为整数.

# objective-c - 如何在 UIButton 中上标字符？

> ID：10407012
> 
> 赞同：2
> 
> 时间：2012-05-02T02:40:25.603
> 
> 标签：objective-c, ios

我在我的 iOS 应用程序的 Nib 文件中设置了一个 UIButton。我想将按钮的文本设置为等式：

```
myUIButton.text = @"x^3 + x^2 + x^1 + k"; 
```

允许上标真的很好。我怎样才能做到这一点？我是否应该考虑添加权力的 unicode 值以获得相应的上标字符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T02:51:30.870

任何 Unicode 字符都可以使用。您是否尝试过以下操作？

```
myUIButton.text = @"x\u00B3 + x\u00B2 + x\u00B9 + k"; 
```

[这是上标 Unicode 值的链接](https://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts)

# .net-2.0 - 从 .NET 3.5 转换到 .NET 2.0

> ID：10407013
> 
> 赞同：0
> 
> 时间：2012-05-02T02:40:35.900
> 
> 标签：.net-2.0, c#-2.0

如何将以下方法转换为 C# 2.0？

```
 private static string ToHexString(byte[] bytes)
    {
        return string.Join(string.Empty, bytes.Select(x => x.ToString("X2")).ToArray());
    }

    private static byte[] ToByteArray(string hex)
    {
        return Enumerable.Range(0, hex.Length).
                 Where(x => 0 == x % 2).
                 Select(x => Convert.ToByte(hex.Substring(x, 2), 16)).
                 ToArray();
    } 
```

我没有使用 .NET 2.0 的经验。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T02:49:39.130

您应该能够自己进行此转换。显然，您需要将其转换为`for`循环。 `Enumerable.Range`本质上提供了一个`int[]`在其上循环的数组。之后，`Where`等同于`if`检查，`Select`是从`int`到子字符串，最后到 a的转换`byte`，最后，您将所有内容放入数组中，可能是通过将它们添加到`List<byte>`循环外声明的中。（完成后，您可以`ToArray`在列表中调用）

我可以提供一个完整的答案，但我认为这种练习最好留给你，这样你就可以从中学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T02:54:06.550

```
void Main()
{
    string s = ToHexString(new byte[]{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15});
    Console.WriteLine(s);

    foreach (byte b in ToByteArray(s))
        Console.WriteLine(b);
}

private static string ToHexString(byte[] bytes)
{
    StringBuilder sb = new StringBuilder();
    foreach (byte b in bytes)
        sb.Append(b.ToString("X2"));
    return sb.ToString();
}

private static byte[] ToByteArray(string hex)
{
    byte[] b = new byte[hex.Length/2];
    for (int i = 0; i < b.Length; i++)
    {
        b[i] = Convert.ToByte(hex.Substring(i*2,2), 16);
    }

    return b;
} 
```

# makefile - Doxygen 解析 Makefile

> ID：10407016
> 
> 赞同：1
> 
> 时间：2012-05-02T02:41:25.590
> 
> 标签：makefile, doxygen

如何在 Doxygen 中解析 Makefile。我的目录包含正确解析的 *.c 和 *.h 文件。但我不确定如何让它正确解析 Makefile。是否有我可以使用的用于 GNU makefile 解析的特殊插件。我无法提交任何有关此的信息。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:33:13.213

如果 DoxyGen 可以解析生成文件，我会发现它非常有用。makefile 是构建过程的核心，是在主页上包含介绍的好地方。

我试图通过调用它 Makefile.mk 并要求 doxygen 在输入文件列表中包含 .mk 扩展名来包含它。

我可以预见的困难之一是注释以#开头，并且据我所知，没有可用于制作的多行注释块。

我想这意味着需要对 doxygen 进行修订以支持此操作。

我很确定这将是对 DoxyGen 的一个非常有用的增强，许多人会发现它很有用。

# django - django-piston 增值外键

> ID：10407018
> 
> 赞同：0
> 
> 时间：2012-05-02T02:41:37.953
> 
> 标签：django, django-models, foreign-keys, django-piston

我正在尝试从 REST API Django-piston 在我的数据库中插入一个新值。

我有以下型号

```
class Mobile_User(models.Model):
id       = models.CharField(primary_key=True, max_length=255, unique=True)
email    = models.EmailField()
name     = models.CharField(max_length=300)

def __unicode__(self):
    return u"%s - %s" % (self.id, self.email)

class Mobile_User_Business(models.Model):
mobile_user_id = models.ForeignKey(Mobile_User)
business_id = models.ForeignKey(Business)

def __unicode__(self):
    return u"%s - %s" % (self.business_id, self.mobile_user_id) 
```

和 handlers.py

```
def create(self, request):
    """
    Creates a new Mobile_User.
    """
    if not hasattr(request, "data"):
        request.data = request.POST
    attrs = self.flatten_dict(request.data)
    if self.exists(**attrs):
        msj = "The user mobile already exist"
        return msj
    else:
        mobile_user_business = Mobile_User_Business(mobile_user_id=attrs['mobile_user_id'], 
                        business_id=attrs['business_id'],)
        mobile_user_business.save()
        return mobile_user_business 
```

发送信息：

curl -u myuser:12345 -X POST -d mobile_user_id="21221212" -d business_id="1" [http://mydomain.com/api/newuser/](http://mydomain.com/api/newuser/)

并返回：

* * *

回溯（最近一次通话最后）：

文件“/dir/www/djangotest/apps/api/handlers.py”，第 122 行，在 create business_id=attrs['business_id'],)

文件“/usr/local/lib/python2.7/dist-packages/django/db/models/base.py”，第 352 行，在**init** setattr(self, field.name, rel_obj)

文件“/usr/local/lib/python2.7/dist-packages/django/db/models/fields/related.py”，第 331 行，在**set** self.field.name, self.field.rel.to._meta 中.object_name))

ValueError：无法分配“u'21221212'”：“Mobile_User_Business.mobile_user_id”必须是“Mobile_User”实例。

* * *

任何的想法？？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:33:32.210

那是因为您试图为 mobile_user_id 分配一个 unicode 值，但 django 需要一个 Mobile_User 实例。

你应该把它改成这样：

```
...
else:
    # First get the instances
    mobile_user = Mobile_User.objects.get(pk=attrs['mobile_user_id'])
    business = Business.objects.get(pk=attrs['business_id'])

    # Then use them in this model
    mobile_user_business = Mobile_User_Business(mobile_user_id=mobile_user, 
                    business_id=business,)
    mobile_user_business.save()
    return mobile_user_business 
```

# xcode - 撤消单个文件 Git Checkout

> ID：10407024
> 
> 赞同：2
> 
> 时间：2012-05-02T02:42:12.087
> 
> 标签：xcode, git, commit, rollback, git-checkout

所以，我正在使用 XCode 开发一个项目。令人高兴的是，我发现它在每个项目中都保留了一个 Git 存储库。所以，在代码出错后，我只是使用

```
git checkout aux.c 
```

从这些错误中恢复过来。不幸的是，正如我刚刚发现的那样，Xcode 不会自动提交，所以我最终得到了一个空白文件。在此之后我没有提交任何内容，但仍然无法弄清楚如何撤消此结帐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T02:47:41.383

对不起，你不能。:-(您将不得不以其他方式替换文件。

git 在两个地方跟踪你的文件——提交和索引/暂存区。由于没有提交，并且您在暂存区域之外检查了文件的版本，因此没有其他地方了。

请运行`git status`以防万一，以确保它仍然不会显示对该文件的分阶段更改。

你有没有机会在编辑器中打开它并且可以撤消对文件`git checkout`所做的更改？一些像 Textmate 和 SublimeText 这样的编辑器会允许这样做；其他人没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T02:50:07.503

如果该文件从未提交到存储库，那么不幸的是你不走运。

从它的声音来看，你只是有一个空的 git 存储库，这意味着你的文件已经丢失，而 Versions（Lion 附带）或 Time Machine 可能是你从错误中恢复的最佳选择。

要确认是否有任何内容已提交到存储库，请使用`git log`. 如果你得到一个空的响应，那么你在 git 前端就不走运了。

不幸的是，这可能不是您要寻找的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:46:36.587

事实上，撤消 git 上的第一次提交是不可能的。因此，如果您正在运行 Xcode，请经常手动提交。

但是，还有另一种方式。

如果您运行的是 OS X 10.7 Lion 或更高版本（不确定 Snow Leopard），您可以尝试使用 OS X 的版本功能来恢复任何文件。对我来说太晚了，但它应该工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-29T10:36:02.227

如果您的未提交更改是恢复的最佳方法是转到（左窗格）源代码管理导航器-> 隐藏更改-> 查找日期/时间早于您想要反转的提交的文件，然后单击以应用存储更改到文件。这将带回所有未保存的文件。

# eclipse - 无法在 Eclipse 中安装 EGit

> ID：10407026
> 
> 赞同：0
> 
> 时间：2012-05-02T02:42:44.000
> 
> 标签：eclipse, eclipse-plugin, egit

我正在尝试获取 EGit 插件，我正要拔掉头发。好的，这就是正在发生的事情——我转到“安装新软件”页面并添加了 EGit 存储库，但下面的窗口没有显示任何内容；它只是说“待定”。过了一会儿，我收到一个错误，说它超时了。

我尝试在“可用软件站点”页面上一次取消选中所有内容，但这不起作用。

我试过取消选中“安装期间联系所有更新站点..”框，但这不起作用。

我已经尝试在市场上下载它，但是当我尝试打开它时，我遇到了同样的问题，它只是超时。

内部网络浏览器正在运行。我没有在代理后面工作。我需要一些帮助。请！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:28:58.440

在 Indigo 版本中，Indigo R2 版本站点中有“Eclipse EGit”、“Eclipse Mylyn 到 GitHub 连接器”和“JGit”。您是否达到了这一点，或者您是否正在尝试加载 Indigo Release 以外的站点？下一步是计算需求和依赖关系。如果你下载了一些东西，它可能是 GitHub 插件/功能发行版。您应该能够将这些包复制到相应的文件夹中并重新启动 Eclipse。

最好的办法是从 Eclipse 发布站点安装，然后转到 Menu -> Window -> Open Perspective -> Other，您应该会看到 GitHub Repository Explorer 透视图。

否则，请告诉我们您尝试从哪个站点加载或更好地解释问题。

# objective-c - 类块实例变量

> ID：10407027
> 
> 赞同：0
> 
> 时间：2012-05-02T02:43:19.657
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks

没有太多判断此代码​​的设计，我想知道如何解决我创建的保留周期......

```
@interface BlockClass : NSObject
{
    id actualObject;
    NSError *actualError;
    void (^block)(id, NSError *);
}
@end

@implementation BlockClass

- (id)init
{
    self = [super init];

    if (self) {
        block = ^(id object, NSError *error){
            actualObject = object; // Compiler warns: capturing 'self' strongly in this block is likely lead to a retain cycle
            actualError  = error;
        };
    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:57:20.170

问题是您通过将块分配给 ivar 来保留块，并且由于块分配给 ivar，它需要保留自身 - 因此保留循环。

您可以通过从实例方法返回块来获得等效的行为：

```
@interface BlockClass : NSObject
{
    id actualObject;
    NSError *actualError;
}
@end

@implementation BlockClass

- (id)init
{
    self = [super init];

    if (self) {
    }

    return self;
}

-(void (^)(id, NSError *))block {
    return ^(id object, NSError *error){
        actualObject = object;
        actualError  = error;
    };
}

@end 
```

这避免了保留周期，因为返回的块一执行就被释放。

# html - 创建一个html5音频并播放它不起作用

> ID：10407031
> 
> 赞同：4
> 
> 时间：2012-05-02T02:43:57.180
> 
> 标签：html, audio, dynamic

我想动态创建一个html5音频并播放它，代码如下：

```
 function playAnotherMusic(playUrl){
                var audioElement = document.createElement('audio'); 
                audioElement.setAttribute('src', playUrl); 
                audioElement.setAttribute('controls', true); 
                audioElement.setAttribute('preload', true); 
                audioElement.setAttribute('type', 'audio/mpeg'); 

                audioElement.addEventListener("load", function() { 
                audioElement.play(); 
                }, true);

                console.log(playUrl);
                audioElement.load();

  } 
```

然而它不起作用，萤火虫帮我“ `HTTP "Content-Type" of "audio/mpeg" is not supported.`”

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:35:52.883

你不能在firefox中播放mp3文件，它不支持它们，你需要一个用于firefox的ogg版本。除非这种情况发生变化，否则请牢记。

[为什么 Firefox 不支持 <audio> 中的 MP3 文件格式](https://stackoverflow.com/questions/4923136/why-doesnt-firefox-support-mp3-file-format-in-audio)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T02:52:05.067

您需要将音频元素附加到现有元素。这就像

```
document.getElementById("my_audio_div").appendChild(audioElement); 
```

理想情况下，这应该在添加事件侦听器之前完成，但在设置所有属性之后

也可以尝试`audio/mp3`：audioElement.setAttribute('type', 'audio/mp3');

# python - 将数据打印到屏幕python后保存

> ID：10407041
> 
> 赞同：0
> 
> 时间：2012-05-02T02:45:44.673
> 
> 标签：python

数据打印到屏幕后有没有办法保存数据？例如：让我们有一些任意的功能

```
def main():
    if something:
       for i in range(n):
           output= "%f %f" %(n,d)
           print output

    if something:
       for i in range(n):
           output="%f %f" %(n,d)
           print output

    fileout=open("data.csv", "a")
    fileout.write(output) 
```

这只会写入 for 循环中最后一个范围的最后一个数据。

编辑：我想问一个用户她/他是否想保存该数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T02:52:57.613

只需在 if 条件中使用它：

```
print >>fileout, output #this will save the output to the data.csv file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T02:58:21.313

首先在程序的最高范围声明您的输出变量。这将允许它以您编程的方式写入文件。

如果您想提示用户保存文件的位置，那就是：

```
out1 = raw_input("Where would you like to save this? ") 
```

您可以对另一个输出文件变量执行相同的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T02:59:30.963

更改您的代码...

1：如果你真的想使用打印，将 sys.stdout 更改为不同的流

2：使用文件

# 1

```
import sys
oldstdout=sys.stdout
f=open("myfile","w")
sys.stdout=f

def main():
    if something:
        for i in range(n):
            print "%f %f"%(n,d)

        if something:
            for i in range(n):
                print "%f %f"%(n,d) 
```

# 2

```
f=open("myfile","w")

def main():
    if something:
        for i in range(n):
            f.write("%f %f"%(n,d))

        if something:
            for i in range(n):
                f.write("%f %f"%(n,d)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T03:08:18.210

这是一个（有点病态的）示例，它可以让您同时`print`将打印的语句保存在全局列表中（我们将其称为`OUTPUT`）：

```
import sys

OUTPUT = []

def print_wrapper(method):
    class result(object):

      def __init__(self, file_obj):
          self.file_obj = file_obj

      def __getattr__(self, name):
          return getattr(self.file_obj, name)

      def write(self, value):
          OUTPUT.append(value)
          return self.file_obj.write(value)

    return result(method)

original_stdout = sys.stdout
sys.stdout = print_wrapper(original_stdout)

# This will still print, but will add 'Hi' and '\n' to OUTPUT as well
print 'Hi'
# This will still print, but will add 'None' and '\n' to OUTPUT as well
print None
# This uses the original stdout to print, so won't change OUTPUT
original_stdout.write(repr(OUTPUT))
original_stdout.write('\n') 
```

或者您可以交替地为 Python 3 做好准备（或只使用它）并包装`print`方法本身：

```
from __future__ import print_function  # must have Python >= 2.6

OUTPUT = []

def wrap_print(method):
    def result(value):
        OUTPUT.append(value)
        return method(value)
    return result

old_print = print
print = wrap_print(old_print)

print('Hi')
print(None)
old_print(OUTPUT) 
```

# python - Django reportlab - 将当前页面（管理控制台）打印为 PDF

> ID：10407046
> 
> 赞同：1
> 
> 时间：2012-05-02T02:46:36.740
> 
> 标签：python, django, pdf, reportlab

我想要完成的是允许用户在 django 管理控制台中查看信息，并允许他们根据他们对数据的排序/过滤方式保存并打印出他们面前信息的 PDF。

我在报告实验室看到了很多文档，但主要是为了画线等等。如何简单地将管理结果输出到 PDF？如果这甚至是可能的。如果报告实验室不是完成这项工作的理想方式，我愿意接受其他建议。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:28:50.920

最好使用某种[html2pdf](http://www.xhtml2pdf.com/)，因为那里已经有 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:34:42.533

如果 html2pdf 不能满足您的需求，您可以使用 ReportLab 完成所有您想做的事情。查看 ReportLab 手册，尤其是关于鸭嘴兽的部分。这是 ReportLab 库的一部分，允许您从表示页面部分（段落、表格、框架、布局等）的对象构建 PDF。

# ajax - yii框架中的ajax登录

> ID：10407053
> 
> 赞同：0
> 
> 时间：2012-05-02T02:47:54.450
> 
> 标签：ajax, login, yii

我有登录的新主页并使用未登录用户注册。主页.php

```
<script type="text/javascript" >
            $(document).ready(function()
            {
                $("#btnLogin").click(function()
                {                    
                    var username= $("#usernamelogin").val();
                    var password=$("#passwordlogin").val();
                    var remember = $("#rememberlogin").is(':checked'); 
                    var dataString = 'usernamelogin='+ username + '&passwordlogin=' + password + '&rememberlogin=' + remember;
                    $.ajax
                    ({
                        type: "POST",
                        url: "homepage",
                        data: dataString,
                        cache: false,
                        success: function(html)
                        {
                            alert(html);
                        }

                    });
                });
            });

        </script>
<form action="" method="post" name="frmLogin" class="Login">
            <table width="960px" align="center">
                <tr>
                    <td rowspan="3" width="404"><label id="lbbanner"><b>UIT SOCIAL NETWORK</b></label></td>
                    <td width="216"><label>Username:</label></td>
                    <td width="324">Password:</td>
                </tr>
                <tr>
                    <td><input type="text" witdth="200px" id ="usernamelogin" name="txtUsernameLogin" /></td>
                    <td><input type="password" width="200px" id="passwordlogin" name="txtPasswordLogin" /></td>
                </tr>
                <tr>
                    <td></td>
                    <td><input type="checkbox" id="rememberlogin" name="checkRemember" />&nbsp;Remember me!
                        <input type="button" value="Log in" id="btnLogin" name="Login"/></td>
                    <td colspan="2" align="right"></td>

                </tr>
                <tr>

                </tr>
            </table>
        </form> 
```

**在 SiteController 我有 actionHomePage()**

```
 public function actionHomePage() {
        $model = new LoginForm();      
        $model->username = $_POST['usernamelogin'];
        $model->password = $_POST['passwordlogin'];
        $model->rememberMe = $_POST['rememberlogin'];
        //echo $model->errors;
        print_rcount(($model->getErrors()));
        //echo $model->username . "&&" . $model->password . "$$" .$model->rememberMe;
        // validate user input and redirect to the previous page if valid        
        if ($model->validate() && $model->login()) {
            $this->loginStatus = true;
            //$this->redirect(Yii::app()->user->returnUrl);
            echo "SUCCESS";
        } else {

            echo "Error";
        }
    } 
```

当我用正确的信息填写用户名和密码但它返回“错误”时，$model->validate() 是错误的，但我有正确的信息。我不知道我在这部分有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:26:04.717

您的输入变量名称需要与您查询的 POST 变量匹配

```
<td><input type="text" witdth="200px" id ="usernamelogin" name="txtUsernameLogin" /></td>
<td><input type="password" width="200px" id="passwordlogin" name="txtPasswordLogin" /></td> 
```

应该是这样的：

```
<td><input type="text" witdth="200px" id ="usernamelogin" name="usernameLogin" /></td>
<td><input type="password" width="200px" id="passwordlogin" name="passwordLogin" /></td> 
```

记住登录也一样

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T18:00:17.103

因为在 actionHomePage() 中：$model->rememberMe = true or false; $_post 返回一个字符串。你试试 ：

```
($_POST['rememberlogin'] == "false") ? $model->rememberMe = false : $model->rememberMe = true ; 
```

# php - PHP：在取消归档期间应用 Chmod

> ID：10407056
> 
> 赞同：3
> 
> 时间：2012-05-02T02:48:07.107
> 
> 标签：php, upload, zip, archive, chmod

这就是我到目前为止所得到的。我需要能够将 0666 应用于存档中的所有文件。我不能在出口时这样做吗？在取消归档期间或取消归档后更改 chmod 的示例代码是什么？

```
$zip = new ZipArchive;
if ($zip->open('upload/'. $username . $file_ext) === TRUE) {
$zip->extractTo('dir/' . $username);
$zip->close();
} else {
echo 'failed';
} 
```

感谢所有的帮助！布兰登

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:11:07.490

在目录上设置`0666`可能不是您想要的 ;-)

Linux 中任何进程中的文件创建都将`0777`用于目录和`0666`文件**，但这**取决于`umask`最终权限的值。默认情况下，该`umask`值是`0022`创建文件，如`0644`; 它就像减法一样工作。

因此，通过将 重置`umask`为 0 你可能会得到你需要的东西。

```
umask(0);
$zip = new ZipArchive;
if ($zip->open('upload/'. $username . $file_ext) === TRUE) {
    $zip->extractTo('dir/' . $username);
    $zip->close();
} else {
    echo 'failed';
} 
```

# c++ - OpenGL 使用 Visual Studio2010 打开 Mesh (.m) 文件

> ID：10407060
> 
> 赞同：0
> 
> 时间：2012-05-02T02:48:39.593
> 
> 标签：c++, opengl, mesh

出于某种原因，它只是不会加载网格文件。我不知道是因为我输入了错误的东西，还是我只是在正确的文件夹中没有文件。我现在将它与 .exe 放在同一个文件夹中，并且我也将它放在我的“源文件”下（这可能是错误的）。

**网格.cpp**

```
#include "MeshTable.h"
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>

void MeshTable::ReadMesh_M(const char *filename) {
    points.clear();
    faces.clear();

    //the Vertex id in .m file begins from 1,
    //we insert an empty point to align the index
    points.push_back(Point());

    std::ifstream input("C:\\Users\\Zach\\Documents\\Visual Studio 2010\\Projects\\MAIN\\Release\\dog.m");
    while(input.good()) {
        std::string line;
        getline(input, line);

        if (line.empty()) {     
        continue;       
    }

    std::stringstream ss(line);
    std::string title;
    int id;
    ss >> title;

    if (title == "Vertex") {
        Point pt;
        ss >> id >> pt[0] >> pt[1] >> pt[2];
        points.push_back(pt);
    } 
    else if (title == "Face") {
        Face face;
        ss >> id >> face.pt_ids[0] >> face.pt_ids[1] >> face.pt_ids[2];
        faces.push_back(face);
    }

}
input.close();
}

void MeshTable::SaveMesh_M(const char *filename) {
std:: ofstream output(C:\\Users\\Zach\\Documents\\Visual Studio 2010\\Projects\\MAIN\\Release\\dog_out.m);
for (unsigned int i = 1; i < points.size(); ++i) {
    const Point& pt = points[i];
    output << "Vertex " << i << " " << pt[0] << " " << pt[1] << " " << pt[2] << "\n";
}

for (unsigned int i = 0; i < faces.size(); ++i) {
    const Face& face = faces[i];
    output << "Face " << i + 1 << " " << face.pt_ids[0] << " " << face.pt_ids[1] << " " << face.pt_ids[2] << "\n";
}
output.close();
} 
```

它构建得很好，但是当我尝试调试它时，OpenGL 窗口会弹出大约 3 秒，然后关闭并显示“程序 '[3188] Main.exe: Native' 已退出，代码为 -1 (0xffffffff)。” 这来自我的 main.cpp。

```
if (argc != 2) {
    std::cout << "Load a .m file as a mesh table.\n";
    std::cout << "Usage: " << argv[0] << " input_mesh.m\n";
    exit(-1);
} 
```

**编辑**一旦我删除了它，它就起作用了。我的老师给了我这个（部分）代码，所以我真的不明白为什么这会使它不起作用。

```
if (argc != 2) {
    std::cout << "Load a .m file as a mesh table.\n";
    std::cout << "Usage: " << argv[0] << " input_mesh.m\n";
    exit(-1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:18:33.007

```
if (argc != 2) {
    std::cout << "Load a .m file as a mesh table.\n";
    std::cout << "Usage: " << argv[0] << " input_mesh.m\n";
    exit(-1);
} 
```

运行程序时，您需要将网格文件的名称传递给命令行参数。即它应该作为“program.exe meshfile.m”启动。

在 VS 2008 中，调试参数/命令行参数可以在项目属性->配置属性->调试->命令参数中指定。在 VS2010 中，它们可能位于相似的位置。

另外，在运行程序时阅读“输出”。您的老师提供的代码片段实际上会打印程序使用情况。

# c# - SQL 插入/计数器增量

> ID：10407067
> 
> 赞同：1
> 
> 时间：2012-05-02T02:49:01.380
> 
> 标签：c#, sql-server, insert

我正在尝试制作一个允许我将趋势存储在 SQL 表中的程序。如果输入到文本框中的主题标签尚不存在，我需要将其添加到数据库中，然后将计数器加 1。

第一列是“HashTag”，第二列是“Counter”，分别具有 char(10) 和 int 属性。

我是 SQL 新手，所以有点问题。这就是我到目前为止所拥有的。

```
SqlConnection connection = new SqlConnection();
connection.ConnectionString = (@"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Jordan Moffat\Desktop\coursework\WindowsFormsApplication\WindowsFormsApplication\HashTags.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");
connection.Open();
HashTagReader r = new HashTagReader();
if (r.HashTagSearch(s))
    MessageBox.Show("I Found it!");
else
{
    SqlCommand myCommand = new SqlCommand("INSERT INTO tblHashTag (HashTag, Counter) " + "Values (s, ++)", connection);
    myCommand.ExecuteNonQuery();
}
connection.Close(); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:00:10.253

将 Counter 列更改为 Identity(1,1)，它将自动递增。您可以通过 SQL Management Studio 轻松完成此操作。

然后将您的查询更改为：

```
SqlCommand myCommand = new SqlCommand("INSERT INTO tblHashTag (HashTag) Values ('" + s + '")", connection); 
```

注意：我相信 SqlCommand 继承自实现 IDisposable 的 DbCommand。您应该使用 using() 语句包装这些对象，例如清理所有非托管资源：

```
using(SqlCommand myCommand = new SqlCommand("INSERT INTO tblHashTag (HashTag) Values ('" + s + '")", connection))
{
  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:45:52.523

如果您使用的是 SQL 2008+，则可以访问合并语句。像这样：

```
CREATE TABLE #tmp
    (
      [HashTag] VARCHAR(10) NOT NULL ,
      [Counter] INT NOT NULL
    );

MERGE [#tmp] AS t
    USING 
        (
          SELECT    [HashTag] ,
                    [Counter]
          FROM      ( VALUES ( '#kitties', 3) ) AS f ( [HashTag], [Counter] )
        ) AS s
    ON t.[HashTag] = s.[HashTag]
    WHEN NOT MATCHED BY TARGET 
        THEN
    INSERT  ( [HashTag], [Counter] )
          VALUES
            ( s.[HashTag] ,
              s.[Counter]
            )
    WHEN MATCHED 
        THEN
    UPDATE
          SET
            t.[Counter] += s.[Counter]
    OUTPUT
        $ACTION ,
        INSERTED.* ,
        DELETED.*; 
```

我在这里使用了一个输出子句，只是为了说明它在做什么。多次执行合并语句，看看输出如何变化。如果您感觉很活泼，请将其包装在一个带有两个参数（标签和计数器）的存储过程中，这样您就会得到一些不错的东西。享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T03:03:10.210

要添加到 Chris 的答案，为了避免重复插入，您应该（如果您使用的是 SQL Server 2005 或更高版本）向 HashTag 列添加唯一索引以强制执行限制。

然后在代码中你应该使用 WHERE NOT EXISTS 子句。请参见此处：[如果不存在 SQL Server 插入最佳实践](https://stackoverflow.com/questions/5288283/sql-server-insert-if-not-exists-best-practice)

所以你会得到：

```
"INSERT INTO tblHashTag (HashTag)
             Values ('" + s + "')
 WHERE NOT EXISTS (SELECT HashTag 
                   FROM tblHashTag
                   WHERE HashTag = '" + s + '")" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T03:13:51.140

You can use Parameters to avoid sql injection :

```
 string hashtag = "Your HashTagValue";
   string counter = "Your Counter Value";

   SqlCommand myCommand = new SqlCommand("INSERT INTO tblHashTag (HashTag, Counter) Values (@HashTag,@Counter)", connection);
   myCommand.Parameters.Add("@HashTag", SqlDbType.varchar,50).Value = hashtag;  //Your hashTagvalue
   myCommand.Parameters.Add("@Counter", SqlDbType.varchar,50).Value = counter; //Your Counter Value

   myCommand.ExecuteNonQuery(); 
```

# cassandra - Cassandra 种子节点和连接到节点的客户端

> ID：10407072
> 
> 赞同：36
> 
> 时间：2012-05-02T02:49:50.013
> 
> 标签：cassandra

我对 Cassandra 种子节点以及客户端如何连接到集群感到有些困惑。我似乎无法在文档中找到这一点信息。

客户端是否仅包含种子节点的列表，并且每个节点都委派一个新主机供客户端连接？种子节点真的只用于节点到节点的发现，而不是客户端的特殊节点吗？

每个客户端是否应该使用 DC 中的一小部分随机节点进行连接？

或者，每个客户端都应该使用 DC 中的所有节点吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-02T03:01:06.827

回答我自己的问题：

**种子**

从[常见问题解答](http://cassandra.apache.org/doc/latest/faq/index.html#what-are-seeds)：

> 在启动期间使用种子来发现集群。

同样来自“Gossip”的[DataStax 文档：](http://www.datastax.com/docs/1.0/cluster_architecture/gossip)

> 除了引导新节点加入集群的八卦过程之外，种子节点的指定没有其他目的。种子节点不是单点故障，除了节点引导之外，它们在集群操作中也没有任何其他特殊用途。

从这些细节来看，种子对客户来说似乎没什么特别的。

**客户**

从有关客户请求的[DataStax 文档中：](http://www.datastax.com/docs/1.0/cluster_architecture/about_client_requests)

> Cassandra 中的所有节点都是对等节点。客户端读取或写入请求可以发送到集群中的任何节点。当客户端连接到节点并发出读取或写入请求时，该节点充当该特定客户端操作的协调器。
> 
> 协调器的工作是充当客户端应用程序和拥有所请求数据的节点（或副本）之间的代理。协调器根据集群配置的分区器和副本放置策略确定环中的哪些节点应该获取请求。

我收集到客户端连接到的节点池可能只是 DC 中的少数（随机？）节点，以允许潜在的故障。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-06-24T21:43:27.847

种子节点有两个目的。

1.  它们充当新节点向集群宣布自己的地方。因此，**如果没有至少一个活种子节点，就没有新节点可以加入集群**，因为他们不知道如何联系非种子节点以获取集群状态。
2.  种子节点充当八卦热点。由于节点比非种子更频繁地使用种子进行八卦，因此种子往往具有更多的当前信息，因此整个集群具有更多的当前信息。这就是**你不应该*让*所有节点都成为种子**的原因。同样，这也是为什么给定数据中心中的所有节点都应该在其 cassandra.yaml 文件中具有相同的种子节点列表的原因。通常，每个数据中心 3 个种子节点是理想的。

cassandra 客户端联系点只是向客户端提供集群拓扑，之后客户端可以连接到集群中的任何节点。因此，它们类似于种子节点，并且对种子和客户端联系人使用相同的节点是有意义的。但是，**您可以安全地配置任意数量的 cassandra 客户端联系点**。唯一的其他考虑因素是客户端联系的第一个节点设置其数据中心亲和性，因此您可能希望订购您的联系点以首选给定的数据中心。

有关接触点的更多详细信息，请参阅此问题：[Cassandra Java 驱动程序：多少个接触点是合理的？](https://stackoverflow.com/questions/26852413/cassandra-java-driver-how-many-contact-points-is-reasonable)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-02T22:17:55.487

你的回答是对的。我唯一要补充的是，建议在整个集群中使用相同的种子列表（即在您的 cassandra.yaml 中），作为“最佳实践”之类的东西。帮助八卦流量以良好的常规速率传播，因为八卦代码（参见[https://cwiki.apache.org/confluence/display/CASSANDRA2/ArchitectureGossip](https://cwiki.apache.org/confluence/display/CASSANDRA2/ArchitectureGossip)）对种子的处理（非常少）不同。

# java - 如何删除某些字符或选择字符串中的某些索引字符？

> ID：10407075
> 
> 赞同：0
> 
> 时间：2012-05-02T02:50:14.213
> 
> 标签：java, string

我有这个字符串，

```
anyType{image0=images/articles/4_APRIL_BLACK_copy.jpg; image1=images/articles/4_APRIL_COLOR_copy.jpg; } 
```

我想要的只是

```
"images/articles/4_APRIL_BLACK_copy.jpg" 
```

我怎么得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T02:56:15.303

这应该有效：

```
s.split("=")[1] 
```

您正在拆分`=`将在数组中返回子字符串的字符串。第二个元素是你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T03:06:44.957

这就是我在我的应用程序中执行拆分的方式。

```
String link = "image0=images/articles/4_APRIL_BLACK_copy.jpg";
    String[] parts = link.split("=");

    String first = parts[0];
    Log.v("FIRST", first);

    String second = parts[1];
    Log.v("SECOND", second); 
```

此方法会将您的字符串在**“=”**处拆分为 2，并为您提供 2 个拆分字符串。在您的情况下，这`String second`是您想要的结果。

# windows - *任何人*有 Windows SVNServe 通过 SASL/GSSAPI 对 AD/Kerberos 进行身份验证吗？

> ID：10407077
> 
> 赞同：6
> 
> 时间：2012-05-02T02:50:40.447
> 
> 标签：windows, svn, sasl, gssapi, svnserve

场景：AD 域中的 Windows 服务器托管 Subversion 存储库，仅使用 SVNSERVE（无 Apache），而*不是*VisualSVN。

目标：通过 GSSAPI 通过 SASL 向 Subversion 存储库的用户身份验证到通过 Kerberos 的 Windows 域。

多个站点中的频繁发帖表明用户在此配置中经常遇到“无法获取 SASL 机制列表”的死胡同。我还没有看到任何实际运行的实例。有人有这个跑吗？

我之所以问这个问题是因为 2011 年在 Gentoo 论坛上发帖时，恰好有人在这个场景中查看了相关的源 tarball，并得出结论，虽然有时这样的配置可能有效，*但它所需的文件不再在源头。*

[在 GEntoo 论坛讨论中，发帖者声称 svnserve+gssapi+sasl 曾一度有效，但现在不再有效。](http://forums.gentoo.org/viewtopic-p-6718479.html "Gentoo 论坛")

现在，我并没有断言这种说法是准确的，但我确实知道我被困在同一点上，而且我还没有看到任何声称“战胜”这种设置的帖子。有的话请告知详情！

提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-09T09:31:44.303

我刚刚设法（经过近 30 小时的挠头、编译和无源代码调试以获得体面的错误代码）让 svnserve+SASL+GSSAPI 工作！我的设置如下：

*   AD 服务器是 Debian 7.2 上的 Samba 4.1.0（从源代码构建）。
*   Subversion 服务器是 Solaris Express 上的 subversion 1.8.5 (SunOS 5.11 snv_151a i86pc i386 i86pc)。使用本机 (Sun) SASL 从源代码为 x64 构建。
*   客户端是 Windows 7 x64，带有 TortoiseSVN 1.8.2（x64 二进制版本）和 Heimdal 1.5.1（来自安全端点的 x64 二进制）。
*   与涉及 Kerberos 的任何事情一样，您需要使正向和反向 DNS 顺利运行、时钟同步等。

具有域凭据的 Windows 框上的步骤：

*   为 Subversion 服务器创建一个“svnserve”用户帐户（不是计算机帐户）。
*   运行“ktpass -princ svn/server.domain.local@DOMAIN.LOCAL -mapuser DOMAIN.LOCAL\svnserve -crypto RC4-HMAC-NT -pass password -ptype KRB5_NT_PRINCIPAL -out svnserve.keytab”。您**不想**为此帐户启用 DES，否则 Windows 7 将拒绝对其进行身份验证。我早些时候打开它（按照食谱），不得不再次关闭它才能让它工作。

Subversion 服务器的步骤：

*   设置 /etc/krb5/krb5.conf

    ```
    [libdefaults]
        default_realm = DOMAIN.LOCAL

    [realms]
        DOMAIN.LOCAL = {
            kdc = pdc.domain.local
            admin_server = pdc.domain.local
        }

    [domain_realm]
        .domain.local = DOMAIN.LOCAL
        domain.local = DOMAIN.LOCAL

    # Other defaults left as-is. 
    ```

*   设置 repo/conf/svnserve.conf：

    ```
    [general]
    anon-access = none
    authz-db = authz
    realm = DOMAIN.LOCAL

    [sasl]
    use-sasl = true
    min-encryption = 0
    max-encryption = 256 
    ```

*   设置 repo/conf/authz：

    ```
    [aliases]

    [groups]

    [/]
    * =
    # Still investigating whether access to the server can be controlled through an AD group.
    # Below is for user@DOMAIN.LOCAL, the realm appears to get lost.
    user = rw 
    ```

*   设置 /etc/sasl/svn.conf：

    ```
    mech_list: GSSAPI 
    ```

*   将 svnserve.keytab 放入 /etc/krb5/krb5.keytab （sasl 配置中的 keytab 似乎没有做任何事情）。

*   启动 svnserve。

客户端步骤：

*   安装 TortoiseSVN 和 Heimdal。
*   将 C:\ProgramData\Kerberos\krb5.conf 编辑为类似于 Subversion 服务器上的 /etc/krb5/krb5.conf。那里还有一些其他的默认设置，我独自离开了。
*   结帐，无需密码！

此设置的一个问题是 svnserve 进程必须能够读取 /etc/krb5/krb5.keytab，因此需要稍微回退一些权限。svnserve 正在进入它自己的区域，所以这对我来说不是问题。我在测试东西时也遇到了 mslsa_cc.dll 崩溃，但是一旦我把所有东西都整理好，我就没有看到任何崩溃。

经过一番争论，您可能也可以在 Windows 上使用 svnserve。我在 Windows 客户端上尝试了 MIT Kerberos，但每次启动时都会崩溃，所以我放弃了。你可能会有更好的运气。

更新：找出崩溃问题 - 这是 mslsa_cc.dll 中的一个错误（类似于[https://github.com/krb5/krb5/commit/7acb524f5aa00274771dbbfac19d2dd779aad409](https://github.com/krb5/krb5/commit/7acb524f5aa00274771dbbfac19d2dd779aad409)，这也有点错误，因为 nOutStringLen 需要除以 2 ANSIToUnicode 的调用方式）。mslsa_cc.dll 上的二进制补丁是：

*   偏移量 0xB46：从 FF 15 04 69 00 更改为 D1 EE 0F 1F 40。
*   偏移量 0xB5E：从 77 更改为 EB。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T20:20:00.463

在为这个悬而未决的问题赢得了“风滚草”徽章，并且我自己进行了大量的额外研究之后，我得出的结论是，Windows 下的 Subversion 主题组合实际上在当前代码库下是不可能的。我相信 SASL 身份验证层中的某些问题是这里的问题，删除了一些源或进行了重大更改以“破坏”我相信在某一时刻起作用的东西。

我的解决方案是将 Apache 添加到 mod_auth_sspi 的组合中，虽然它确实会减慢存储库的速度，但身份验证工作得很好。这似乎是身份验证要求的“修复”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-14T06:16:32.437

我已经使用 SASL+LDAP 对 AD 进行了身份验证，但没有使用 SASL+GSSAPI，并且有一个小警告：我必须在 Windows 中使用和运行来自 Cygwin 的 svnserve。

1）在 Linux 中通过 SASL+LDAP/AD 让 svnserve 验证用户非常容易（我知道问题是关于 Windows 中的 svnserve，但请耐心等待）。获得针对 LDAP/AD 的身份验证的重要部分是 saslauthd，并使用 testsaslauthd 测试身份验证。

以 Ubuntu 为例：

1a) /etc/sasl2/svn.conf

```
pwcheck_method: saslauthd
mech_list: PLAIN 
```

这告诉 subversion / svnserve 使用 saslauthd 代表它进行身份验证。

1b) /etc/saslauthd.conf

```
ldap_servers: ldap://yourADserver.dept.org
ldap_search_base: DC=dept,DC=org
ldap_bind_dn: cn=bindaccount,dc=dept,dc=org
ldap_bind_pw: passwordOfbindaccount

ldap_deref: never
ldap_restart: yes
ldap_scope: sub
ldap_use_sasl: no
ldap_start_tls: no
ldap_version: 3
ldap_auth_method: bind
ldap_filter: sAMAccountName=%u
ldap_password_attr: userPassword
ldap_timeout: 10
ldap_cache_ttl: 5
ldap_cache_mem: 32768 
```

1c）通过testaslauthd进行测试

```
testsaslauthd -u myusername -p mypassword 
```

1d) 如果成功，则运行 saslauthd，并启动 svnserve。并使用任何 svn 客户端来测试身份验证。

2) 问题是，Cyrus 的 saslauthd 没有本地端口到 Windows，而且可能永远不会。答案是使用 Cygwin，它有 svnserve、testaslauthd 和 saslauthd。

只需重复上述步骤..但svn.conf的位置可能不同。

# visual-studio-2010 - VSTO MS Project 2007 加载项按钮事件 几分钟后停止触发

> ID：10407083
> 
> 赞同：2
> 
> 时间：2012-05-02T02:51:44.557
> 
> 标签：visual-studio-2010, vsto, ms-project

我正在编写一个 MS Project 2007 插件（VS 2010，WinXP），它创建一个带有按钮的工具栏，并将一个 HelloWorld onclick 事件处理程序分配给所述按钮。

### 问题

安装后，插件创建按钮，连接点击事件，一切正常。但是，几分钟后，onclick 事件莫名其妙地停止触发。

我读过的所有内容都表明我需要在全局范围内定义我的工具栏/按钮，我已经完成了。但是，onclick 事件在运行几分钟后仍会被取消挂钩。

我遇到的另一个奇怪的症状是，当我在 COM 加载项对话框中切换它时（在它停止工作之后），我收到了这个奇怪的消息：

> **“无法使用已与其底层 RCW 分离的 com 对象”**

...这很奇怪，因为在这个简单的应用程序中，我没有释放任何 COM 对象。

有什么建议么？

* * *

### 编码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Linq;
using MSProject = Microsoft.Office.Interop.MSProject;
using Office = Microsoft.Office.Core;

namespace Test_Project2007_Addin
{
    public partial class ThisAddIn
    {
        private Office.CommandBar cmdBar;   // Hello World Toolbar
        private Office.CommandBarButton cmdBtn01; // Hellow World Button

        private string cmdBarName   = "Hello World Toolbar";
        private string cmdBtn01Name = "HelloWorld";

        private void ThisAddIn_Startup( object sender, System.EventArgs e ) {

            // Define the toolbar

            cmdBar = this.Application.CommandBars.Add( 
               cmdBarName, Office.MsoBarPosition.msoBarTop, false, true );
            cmdBar.Visible           = true;

            // Define the button

            cmdBtn01                 = cmdBar.Controls.Add( Office.MsoControlType.msoControlButton, missing, missing, missing, true ) as Office.CommandBarButton;
            cmdBtn01.FaceId          = 422;
            cmdBtn01.Caption         = "Hello World";
            cmdBtn01.Tag             = cmdBtn01Name;
            cmdBtn01.DescriptionText = "Hello World";
            cmdBtn01.TooltipText     = "Hello World";
            cmdBtn01.Click          += new Microsoft.Office.Core._CommandBarButtonEvents_ClickEventHandler( HelloWorld );

        }

        private void ThisAddIn_Shutdown( object sender, System.EventArgs e ) {

        }

        private void HelloWorld( Microsoft.Office.Core.CommandBarButton barButton, ref bool someBool ) {
            System.Windows.Forms.MessageBox.Show( "Hello, World!" );
        }

        #region VSTO generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InternalStartup()
        {
            this.Startup += new System.EventHandler(ThisAddIn_Startup);
            this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:21:40.657

尝试添加`CommandBars`作为私有成员变量。也许`CommandBars`正在收集垃圾。看看这是否解决了您的 RCW 问题 - 如果没有，它可能是另一个插件。

如果这不起作用，也许尝试建立`Application`一个本地成员。抱歉 - 我没有 MS Project 来测试它。

```
private CommandBars cmdBars; // app command bars

private void ThisAddIn_Startup( object sender, System.EventArgs e ) {
  //..
  cmdBars = this.Application.CommandBars;
  cmdBar = cmdBars.Add(cmdBarName, Office.MsoBarPosition.msoBarTop, false, true );
  //..
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-17T07:02:23.723

试试这个：

```
cmdBar = this.Application.ActiveExplorer().CommandBars.Add( 
```

代替：

```
cmdBar = this.Application.CommandBars.Add( 
```

# java - 如何解决恒定时间操作的循环瓶颈？

> ID：10407085
> 
> 赞同：4
> 
> 时间：2012-05-02T02:52:26.683
> 
> 标签：java, performance, algorithm, time-complexity

在一个规则不可知的扑克模拟器上工作以获得乐趣。测试枚举中的瓶颈，以及总是从“唯一”数组中拉出的手，我发现了一个有趣的瓶颈。我测量了运行每个变体低于 1,000,000,000 次的平均计算时间，然后在其中最好的 100 次重复中让 JIT 和 Hotspot 发挥它们的魔力。我发现计算时间（6ns vs 27ns）之间存在差异

```
public int getRank7(int ... cards) {
  int q = (cards[0] >> 16) | (cards[1] >> 16) | (cards[2] >> 16) | (cards[3] >> 16) | (cards[4] >> 16) | (cards[5] >> 16) | (cards[6] >> 16);
  int product = ((cards[0] & 0xFF) * (cards[1] & 0xFF) * (cards[2] & 0xFF) * (cards[3] & 0xFF) * (cards[4] & 0xFF) * (cards[5] & 0xFF) * (cards[6] & 0xFF));
  if(flushes[q] > 0) return flushes[q];
  if(unique[q] > 0) return unique[q];
  int x = Arrays.binarySearch(products, product);
  return rankings[x];
} 
```

和

```
public int getRank(int ... cards) {
  int q = 0;
  long product = 1;
  for(int c : cards) {
    q |= (c >> 16);
    product *= (c & 0xFF);
  }
  if(flushes[q] > 0) return flushes[q];
  if(unique[q] > 0) return unique[q];
  int x = Arrays.binarySearch(products, product);
  return rankings[x];
} 
```

问题肯定是 for 循环，而不是在函数顶部添加处理乘法。我对此有点困惑，因为我在每个场景中运行相同数量的操作......我意识到我在这个函数中总是有 6 个或更多卡，所以我通过将其更改为更紧密地联系在一起

```
public int getRank(int c0, int c1, int c2, int c3, int c4, int c5, int ... cards) 
```

但是随着卡片数量的增加，我将遇到同样的瓶颈。有没有办法解决这个事实，如果没有，有人可以向我解释为什么相同数量的操作的 for 循环要慢得多吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T04:37:24.527

我想你会发现最大的区别在于分支。您的 for 循环场景需要在 for 循环的每次迭代中进行检查和条件分支。您的 CPU 将尝试预测将采用哪个分支，并相应地流水线指令，但是当它预测错误时（每个函数调用至少一次，因为循环终止），流水线停止，这是非常昂贵的。

要尝试的一件事是具有固定上限的常规 for 循环（而不是基于数组长度的循环）；Java JRE 可能会展开这样的循环，这将导致与您的更高效版本相同的操作序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T03:12:25.503

这种增强`for`的循环需要设置一个迭代器，当您只有少量项目时，这相对昂贵。

`for`如果你写了一个传统的循环，看看你的时间安排会很有趣：

```
for (int i = 0; i < cards.length; ++i)
{
    q |= (cards[i] >> 16);
    product *= (cards[i] & 0xFF);
} 
```

但即使这样也可能比第一个示例稍慢，因为存在一些循环开销（增加索引，将其与长度进行比较，然后分支到循环的开头）。

在任何情况下，循环开销都会为每次迭代增加一个增量、一个比较和一个分支。而且这种比较很可能需要指针取消引用才能到达`cards.length`. 很可能循环开销比您在循环中所做的工作要昂贵得多。

# iphone - 使键盘上的返回键将其关闭。它不会

> ID：10407086
> 
> 赞同：-1
> 
> 时间：2012-05-02T02:52:30.850
> 
> 标签：iphone, objective-c, ios, ipad

我通过名为 *txtNameField 的 Interface Builder 将 UITextField 放入视图控制器，将 UITextFieldDelegate 添加到我的视图控制器，然后在视图控制器的 viewDidLoad 中将字段的委托设置为 self。我打电话给

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField {
NSLog(@"textFieldShouldReturn");
[textField resignFirstResponder];
return YES; 
```

}

但返回键不会关闭键盘。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:12:10.283

将一个方法链接到您的 textField`didEndOnExit`事件并放入`[textField resignFirstResponder];`该方法。

# java - 在画布上绘制一个缩放的位图？

> ID：10407089
> 
> 赞同：18
> 
> 时间：2012-05-02T02:52:35.113
> 
> 标签：java, android

以下代码定义了我的位图：

```
Resources res = context.getResources();

mBackground = BitmapFactory.decodeResource(res, R.drawable.background);

// scale bitmap
int h = 800; // height in pixels
int w = 480; // width in pixels
// Make sure w and h are in the correct order
Bitmap scaled = Bitmap.createScaledBitmap(mBackground, w, h, true); 
```

...并且以下代码用于执行/绘制它（未缩放的位图）：

```
canvas.drawBitmap(mBackground, 0, 0, null); 
```

我的问题是，我如何设置它来绘制以 的形式返回的缩放位图`Bitmap scaled`，而不是原始的？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-02T03:04:02.097

定义一个新的类成员变量： `Bitmap mScaledBackground;` 然后，将新创建的缩放位图分配给它： `mScaledBackground = scaled;` 然后，调用您的 draw 方法： `canvas.drawBitmap(mScaledBackground, 0, 0, null);`

请注意，以您在上面的代码段中所做的方式对屏幕大小进行硬编码并不是一个好主意。最好通过以下方式获取您的设备屏幕尺寸：

```
int width = getWindowManager().getDefaultDisplay().getWidth();
int height = getWindowManager().getDefaultDisplay().getHeight(); 
```

最好不要仅仅为了以缩放方式绘制原始背景而声明新位图。位图会消耗大量宝贵资源，而且通常一部手机仅限于几 MB 的位图，您可以在应用程序出现异常失败之前加载这些位图。相反，您可以执行以下操作：

```
Rect src = new Rect(0, 0, bitmap.getWidth() - 1, bitmap.getHeight() - 1);
Rect dest = new Rect(0, 0, width - 1, height - 1);
canvas.drawBitmap(mBackground, src, dest, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T03:05:00.180

要绘制缩放位图，您要将缩放位图保存在某处的字段中（此处称为`mScaled`）并调用：

```
canvas.drawBitmap(mScaled, 0, 0, null); 
```

在您的绘图方法中（或您现在调用它的任何地方）。

# iphone - 创建 XML 请求并使用 ASIHttpRequest 将它们发送到服务器

> ID：10407092
> 
> 赞同：0
> 
> 时间：2012-05-02T02:52:55.880
> 
> 标签：iphone, objective-c, ios, asihttprequest, libxml2

我正在尝试生成要通过 Http Post 发送到服务器的 XML 请求。我知道 ASIHttpRequest 库并想使用它。

我对此有两个问题：1）如何生成 XML 请求？（使用哪个库最好？GData/libXML/KissXML？还是其他？） 2）如何使用 ASIHttpRequest 将其发送到服务器？

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:10:30.080

以这种方式实现它：

```
NSString* newStr = [[NSString alloc] initWithData:postBody
                                         encoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString:urlstr];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:@"r" forKey:newStr];
request.delegate = self;
[request startSynchronous]; 
```

# tridion - 在富文本字段中包含动态组件表示？

> ID：10407100
> 
> 赞同：1
> 
> 时间：2012-05-02T02:53:51.773
> 
> 标签：tridion

模板代码可以将 TCDL 标签转换为适当的内容交付版本。

模板可以输出：

```
<tcdl:Link .../>
<tcdl:ComponentPresentation .../> 
```

交付方将获得以下格式的标签：

```
<tridion:ComponentLink ... />
<tridion:ComponentPresentation ... /> 
```

问题： **是否可以让*内容作者*在富文本字段格式区域中输入这样的动态组件表示（DCP）？**如果是这样，是否首选特定格式？我们应该如何发布链接到的 DCP？

**编辑**：添加上下文并更改了 Will 文章的链接。

*或者，我是否可以使用类似于 Will Price 的这种方法的语法，[专门针对 SiteEdit 使用 DWT 和 C# 程序集帮助](http://www.sdltridionworld.com/articles/siteedit-2009-essentials-embedded-components.aspx)。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:45:26.117

I agree with John, I would implement this as a component link in the RTF. But I wouldn't use any template code, I would instead override Tridion's LinkTagHandler. In the doEndTag method, you can check if you would want to resolve the linked component as a regular dynamic link (in which case you just call the super class), or if you want to insert the DCP there (in which case you can call the ComponentPresentationTagHandler).

You can then configure your taghandler, overriding the Tridion default LinkTagHandler (you can do this in the cd_deployer_conf.xml). Mind you, I haven't tried any of this, but I don't see why it wouldn't work.

To configure your custom tag handler, add the following to the cd_deployer_conf.xml:

```
<TCDLEngine>
    <Properties>
        <!-- keep whatever you have in this section! -->
    </Properties>
    <Tags>
        <Tag Namespace="tcdl" Name="ContentHeader"><Handler Class="com.tridion.tcdl.tags.ContentHeaderTagHandler"/></Tag>
        <Tag Namespace="tcdl" Name="Link"><Handler Class="com.mycompany.tridion.extensions.CustomTagHandler"/></Tag>
        <Tag Namespace="tcdl" Name="Link"><Handler Class="com.tridion.tcdl.tags.DynamicLinkInfoTracker"/></Tag>
        <Tag Namespace="tcdl" Name="TargetGroup"><Handler Class="com.tridion.tcdl.tags.TargetGroupTagHandler"/></Tag>
        <Tag Namespace="tcdl" Name="ComponentPresentation"><Handler Class="com.tridion.tcdl.tags.ComponentPresentationTagHandler"/></Tag>
        <Tag Namespace="tcdl" Name="FirstLine"><Handler Class="com.tridion.tcdl.tags.FirstLineTagHandler"/></Tag>
        <Tag Namespace="tcdl" Name="IncrementTrackingKey"><Handler Class="com.tridion.tcdl.tags.IncrementTrackingKeyTagHandler"/></Tag>
        <Tag Namespace="tcdl" Name="PositionMarker"><Handler Class="com.tridion.tcdl.tags.PositionMarkerTagHandler"/></Tag>
        <Tag Namespace="tcdl" Name="ContextProperty"><Handler Class="com.tridion.tcdl.tags.ContextPropertyTagHandler"/></Tag>
        <Tag Namespace="tcdl" Name="Dependency"><Handler Class="com.tridion.tcdl.tags.DependencyTagHandler"/></Tag>
        <Tag Namespace="tcdl" Name="Comment"><Handler Class="com.tridion.tcdl.tags.CommentTagHandler"/></Tag>
        <Tag Namespace="tcdl" Name="TaxonomyControl"><Handler Class="com.tridion.tcdl.tags.TaxonomyTagHandler"/></Tag>
    </Tags>
</TCDLEngine> 
```

One important note: if you decide to override any of the built-in tag handlers, you need to specify all of them!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T03:21:32.567

不确定我是否完全理解这个问题，但这里有：

如果用户根据您的配置（组件表示的类型和输出类型）在富文本字段中输入组件链接，则该值将被解析，很可能是 .

可能值得让您自己的 c# 构建块解析为您自己的格式，然后编写您自己的 tcdl 扩展来解析它。

如果您尝试将 Tridion 组件演示文稿放入组件演示文稿中。我认为您的数据模型有点（很多！）搞砸了 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T03:33:35.547

威尔的文章仅指`SiteEdit`（如果我没记错的话）。您的问题是关于“*包括来自 RTF 字段*的 DCP”的通用机制。

在我看来，允许从 RTF 中引用其他 DCP 不是很合乎情理。我什至会说这是不好的做法。我会避免将内容与布局混合（在 DCP 的上下文中）。我认为这应该在模板中或通过元数据完成。

我认为 (D)CP 应该放在页面上或查询是否使用某种元数据。我可能更希望有一些分类法来标记 DCP，然后在另一个组件（我们称之为控制组件）中，您将指定某种标准鸡尾酒，以确定您想要在页面上查询和显示哪些 DCP。然后模板将生成一些代码（例如自定义标签），这些代码将在`Content Delivery`侧面执行。

根据您的要求，也许链接列表对作者来说更有意义。

最后，回到您的要求，如果您选择继续使用 RTF 中的 DCP，那么我想这只是找到关于如何“*指向*”来自 RTF 的 DCP 的命名约定的问题。一种可能性是使用 C# TBB 可以理解的特制`Component Link`（可能具有某些特定`target`属性）来解析并替换为`<tridion:ComponentPresentation.../>`调用。我会在 RTF 中使用组件链接，因为这些链接是为了完整性、一致性、移植等而维护的……

# java - 使用相同静态方法的多个无状态 Bean

> ID：10407102
> 
> 赞同：1
> 
> 时间：2012-05-02T02:53:59.140
> 
> 标签：java, static, ejb

我在使用无状态 EJB 时遇到了一个问题。我希望在那个 EJB 中应该使用一个特定的静态方法，但是这个方法非常重要并且它具有静态依赖性。

正如我们所知，无状态会话 bean 的实例是根据需求（一个或多个）创建的。那么我如何确定所有的 EJB 都在使用该静态方法的一个副本。我不确定，但我认为每个使用静态方法的不同类都会加载不同的类副本，然后执行静态方法的不同副本。

而且我不能依赖单例 EJB，因为它不能保证只保留一份副本，因为如果服务器需要多个 JVM。不同的单例 EJB 副本将存在于不同的 JVM 中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:16:09.503

Static methods are one per class, even if you create thousands of instance of that class all of them will see just one copy of your static method.

Now as per Spec you should not have static methods in your EJB, you should consider moving this as part of utility if you want it static, or else make it non static.

From the Spec:

> **EE.5.2.3 Annotations and Injection**
> 
> As described in the following sections, a field or method of certain container-managed component classes may be annotated to request that an entry from the application component’s environment be injected into the class. Any of the types of resources described in this chapter may be injected. Injection may also be requested using entries in the deployment descriptor corresponding to each of these resource types. The field or method may have any access qualifier (public, private, etc.). For all classes except application client main classes, the fields or methods must not be static.

# ruby-on-rails - 咖啡轨中有许多语法错误；我忘了安装什么吗？

> ID：10407117
> 
> 赞同：1
> 
> 时间：2012-05-02T02:56:07.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, macos, syntax, installation

到目前为止，我已经在一台运行 Windows 的计算机上完成了所有的开发工作。我刚买了一台 Mac，安装了 Ruby on Rails，然后从 github 导入了我的项目。到处都是错误！它们似乎都在 coffee-rails 文件夹中，看起来像

```
 test "should show post" do
    get :show, id: @post.to_param 
    assert_response :success
  end 
```

（错误因为 id: 应该是 id => 我猜）

和

本规范旨在形式化 Rack 协议。您可以（并且应该）使用 Rack::Lint 来强制执行它。

```
Error: unexpected kAND 
```

我是否安装了错误的版本，或者忘记安装其他东西？也许我使用了错误版本的rails？

感谢您对此事的任何指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:02:32.780

检查您的文件格式，确保它是 UTF8 并且您使用了正确的行尾。还要确保你的缩进是一致的，并且总是空格或制表符（不是混合）。有时，当您在 Windows 上开发文件然后在 Mac 上运行它们时，编码和行尾可能会产生问题。CoffeeScript 对空格敏感，因此您在 CoffeeScript 中比在 Ruby 代码中更容易遇到此类问题。

# javascript - Javascript prompt() 在 Android 浏览器中有暗淡（微弱）的提示信息

> ID：10407119
> 
> 赞同：0
> 
> 时间：2012-05-02T02:56:16.510
> 
> 标签：javascript, android, browser, dialog, prompt

黑色对话框背景上的提示几乎不可读（灰色）......这肯定不是设计使然吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T03:05:50.130

这是设计使然 - 并且不可更改（除非有`prompt`我从未听说过的功能的专有属性。）

提示对话框的外观完全由浏览器控制。如果您想要更可定制的东西，我相信有很多可用的自定义对话框库。

# python - 缺少 python 配置

> ID：10407120
> 
> 赞同：16
> 
> 时间：2012-05-02T02:56:19.390
> 
> 标签：python

我正在安装一个需要安装 python-config 的程序。唯一的问题是我目前没有 python-config，而且我似乎无法弄清楚如何获得它。

搜索后，我应该可以通过以下方式安装它：

```
yum install python-devel 
```

但是，这样做之后，python-config 仍然不存在。

我目前在运行 CentOS 5.2 的集群上使用 Python 2.4。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-08T19:35:51.827

跑：`pip install python-config`

它将被安装并添加到 PATH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-24T04:52:58.767

我在使用 python 3.6 运行 CentOS 8 时遇到了同样的问题。安装了 python3-config 而不是 python-config。您可以创建符号链接或仅使用 python3-config 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-26T23:50:40.343

也许它将文件安装在其他地方。

首先做：

```
 which python 
```

在命令行上查找可执行文件所在的位置。

第二：

对比安装文件夹，看是否在同一个地方。

第三：

如果不是，您可以将其移动到同一文件夹或通过从脚本顶部调用它来使用文件指向的可执行文件。它应该看起来像这样：

```
 #!/usr/bin/Python-2.7.11 
```

拒绝更改集群的 python 版本，使用本地安装的版本从脚本中调用它似乎是最好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T07:05:17.393

Jason 的回复可能会解决您缺少依赖项的问题，尽管需要有关如何安装需要 python-config 作为其依赖项的主包的更多信息。

如果安装是通过 yum 或直接从 rpm 文件完成的，并且 rpm 包具有 python-config 作为其依赖项，那么即使您从 setup.py 文件安装 python 配置，缺少包错误也不会消失。在这种情况下，您可能必须使用 yum 或 rpm 强制安装或通过其他方法安装主应用程序。

问候，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T03:03:30.227

d/l 来自[http://www.red-dove.com/config-0.3.9.tar.gz](http://www.red-dove.com/config-0.3.9.tar.gz)

或来自[http://www.red-dove.com/config-0.3.9.win32.exe](http://www.red-dove.com/config-0.3.9.win32.exe)

解压并使用 setup.py

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-12T20:02:23.887

`yum install python-configparser`

仅供参考，如果您`python3`通过 IUS 安装，等效的 python-config 是`/usr/lib64/python3.6/configparser.py`. 您可能需要自己创建符号链接。

# ios - 如何隐藏 MKMapView 上的蓝点和圆圈

> ID：10407121
> 
> 赞同：4
> 
> 时间：2012-05-02T02:56:25.810
> 
> 标签：ios, cocoa-touch, mkmapview, mkannotation

有没有简单的方法来隐藏它？我使用用户位置，但我不想显示蓝点。我该如何隐藏它？

- 编辑 -

我用错了吗？

```
@interface ALMapaViewController : UIViewController <MKMapViewDelegate,
                                                    MKAnnotation>
{
    IBOutlet MKMapView *mapaPrincipal;
    id<ALMapaViewControllerDelegate> delegateMap;
    CLLocationCoordinate2D coordinate; 
} 
```

我的.m

```
@implementation ALMapaViewController

- (void)viewDidLoad{

    [super viewDidLoad];
    [mapaPrincipal setMapType:MKMapTypeStandard];
    [mapaPrincipal setZoomEnabled:YES];
    [mapaPrincipal setScrollEnabled:YES];

    [mapaPrincipal.userLocation addObserver:self 
                                forKeyPath:@"location" 
                                   options:(NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld) 
                                   context:nil];
    [mapaPrincipal setShowsUserLocation:YES]; 
}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {      
    MKCoordinateRegion region;
    region.center = mapaPrincipal.userLocation.coordinate;  
    MKCoordinateSpan span; 
    span.latitudeDelta  = 0.005f; 
    span.longitudeDelta = 0.005f; 
    region.span = span;
    [mapaPrincipal setRegion:region animated:YES];
    self.coordinate = region.center; 
    [mapaPrincipal addAnnotation:self];
    [mapaPrincipal setShowsUserLocation:NO];
}
@end 
```

我已经使用了`showUserLocation`它，它仍然显示蓝点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T13:17:46.303

您希望接收用户位置更新但不显示蓝点。

一种选择是用于`CLLocationManager`获取更新而不是地图视图的`showsUserLocation`. 调用`startUpdatingLocation`位置管理器并实现其`locationManager:didUpdateToLocation:fromLocation:`委托方法。

如果您不想使用，另一种选择是通过在地图视图的委托方法中将其属性`CLLocationManager`设置为来隐藏由地图视图创建的用户位置视图。地图视图将继续接收用户位置更新（因为您**没有**设置为），但蓝点不会显示，因为您隐藏了它的视图。`hidden``YES``didAddAnnotationViews`**`showsUserLocation``NO`**

 **此答案中显示了第二个选项的示例：
[Hide MKUserLocation when MKMapView showsUserLocation == YES](https://stackoverflow.com/questions/9711874/hide-mkuserlocation-when-mkmapview-showsuserlocation-yes)

不相关的一点是，您不需要使用键值观察来监视对地图视图`userLocation`属性的更改。请改用`mapView:didUpdateUserLocation:`委托方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T03:06:45.460

很简单的朋友

```
[mapView setShowUserLocation:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-01T09:03:01.190

这很好用。

```
- (void)mapView:(MKMapView *)mapView didAddAnnotationViews (NSArray<MKAnnotationView *> *)views {
  MKAnnotationView *ulv = [mapView viewForAnnotation:mapView.userLocation];
  if (ulv) {
    CALayer *layer = [ulv valueForKeyPath:@"_accuracyLayer"];
    if (layer) {
        [layer removeFromSuperlayer];
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-08T15:54:05.360

您可以在 didAddAnnotationViews 委托方法中隐藏用户位置的视图：

```
(void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
  { 
    MKAnnotationView *ulv = [mapView viewForAnnotation:mapView.userLocation];
    ulv.hidden = YES;
  } 
```

检查这个[https://stackoverflow.com/a/9713085/1344237](https://stackoverflow.com/a/9713085/1344237)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-16T10:00:57.830

你可以使用这个方法

[mapViewSelf setShowsUserLocation:NO];**

# javascript - 如何在模糊主浏览器窗口的同时将图像显示为叠加层？

> ID：10407122
> 
> 赞同：1
> 
> 时间：2012-05-02T02:56:50.680
> 
> 标签：javascript, jquery, html, css, image

我正在寻找一个示例，该示例显示如何在浏览器中将图像显示为叠加层，同时模糊/灰显主浏览器窗口中的内容，这是一个示例...

[http://fstopgear.com/product/satori-exp/view](http://fstopgear.com/product/satori-exp/view)

只需单击任何背包图像，然后单击浏览器的任何部分以关闭图像..这几乎就是我正在寻找的功能，我假设有一个脚本或包可以提供这种控制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:02:02.643

有很多解决方案作为 jQuery 插件。您想要的称为“模态”或“覆盖”窗口。

我推荐 FancyBox：[http ://fancybox.net/](http://fancybox.net/)

但也可以查看 ColorBox：[http ://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T03:03:53.003

有很多解决方案可以在 jQuery 中完成这项工作。请查看以下网址：

[http://leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

[http://jquery.com/demo/thickbox/](http://jquery.com/demo/thickbox/)

[http://fancyapps.com/fancybox/#examples](http://fancyapps.com/fancybox/#examples)

# vb.net - 如何判断 AxWindowsMediaPlayer 何时下载？

> ID：10407123
> 
> 赞同：1
> 
> 时间：2012-05-02T02:56:57.050
> 
> 标签：vb.net

我在 VB.NET 上使用 AxWindowsMediaPlayer 来预览网络上的 MP3 文件，以便用户可以选择下载它，如果他喜欢它。有用。我只是在 URL 属性中放了一个链接，过了一会儿它就开始播放了。

……当然，过了一会儿。因为它必须先下载文件。也许我意识到这是因为我的连接速度很慢 XD。

但这让我想到：如何判断播放器当前是否正在下载文件？这样我就可以贴上一个标签，上面写着“请稍候，正在准备文件……”之类的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:01:56.430

查看使用[Buffering](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562390.aspx) Event 和[BufferingProgress](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564813.aspx)属性。根据 MSDN 链接：

> 使用此事件来确定缓冲或下载何时开始或停止。您可以对这两种情况使用相同的事件块并测试 IWMPNetwork.bufferingProgress 和 IWMPNetwork.downloadProgress 以确定 Windows Media Player 当前是否正在缓冲或下载内容。

# asp-classic - 如何从重量 USB 秤读取重量

> ID：10407128
> 
> 赞同：0
> 
> 时间：2012-05-02T02:58:22.380
> 
> 标签：asp-classic, vbscript, usb, serial-port

我有一个来自 stamps.com 的 USB 称重（型号 510： http: [//www.stamps.com/postage-online/digital-postage-scales/](http://www.stamps.com/postage-online/digital-postage-scales/)）

我能够找到驱动程序使其在网上独立，但我的下一个问题是如何在我的经典 ASP 页面/VBScript 中读取秤上对象的重量。

有人对我应该从哪里开始搜索有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T03:20:52.593

我不确定这是否适用于您的特定型号，但[http://nicholas.piasecki.name/blog/2008/11/reading-a-stamps-com-usb-scale-from-c-上有一篇文章尖锐/](http://nicholas.piasecki.name/blog/2008/11/reading-a-stamps-com-usb-scale-from-c-sharp/)作者编写了 C# 代码来读取秤，因为它符合基本的 USB HID（人类输入设备）标准。作者使用了 Mike OBrien 的 HID 库[https://github.com/mikeobrien/HidLibrary](https://github.com/mikeobrien/HidLibrary)

他们开始获取原始字节：

```
HidDeviceData inData;
HidDevice[] hidDeviceList;
HidDevice scale;

hidDeviceList = HidDevices.Enumerate(0x1446, 0x6A73);

if (hidDeviceList.Length > 0)
{
    int waitTries;

    scale = hidDeviceList[0];
    waitTries = 0;

    scale.Open();

    if (scale.IsConnected)
    {
        inData = scale.Read(250);

        for (int i = 0; i < inData.Data.Length; ++i)
        {
            Console.WriteLine("Byte {0}: {1:X}", i, inData.Data[i]);
        }
    }

    scale.Close();
    scale.Dispose();
} 
```

然后继续对有效载荷进行逆向工程并构造一个函数来获取以盎司为单位的重量：

```
private void GetStampsComModel2500iScaleWeight(out decimal? ounces, out bool? isStable)
{
    HidDeviceData inData;
    HidDevice[] hidDeviceList;
    HidDevice scale;

    isStable = null;
    ounces = null;

    hidDeviceList = HidDevices.Enumerate(0x1446, 0x6A73);

    if (hidDeviceList.Length > 0)
    {
        int waitTries;

        scale = hidDeviceList[0];
        waitTries = 0;

        scale.Open();
        // For some reason, the scale isn't always immediately available
        // after calling Open(). Let's wait for a few milliseconds before
        // giving up.
        while (!scale.IsConnected && waitTries < 10)
        {
            Thread.Sleep(50);
            waitTries++;
        }

        if (scale.IsConnected)
        {
            inData = scale.Read(250);
            ounces = (Convert.ToDecimal(inData.Data[4]) +
                Convert.ToDecimal(inData.Data[5]) * 256) / 10;
            isStable = inData.Data[1] == 0x4;
        }

        scale.Close();
        scale.Dispose();
    }
} 
```

为了从您的经典 ASP 页面/VBScript（在服务器上，对吗？）中读取权重，最简单的解决方案似乎是将工作的 C# 类转换为 COM 组件。您可以按照教程创建 C# COM 组件并将其注册到服务器上，然后您可以从 VBScript 调用它，例如：

```
Dim app 
Set app = Server.CreateObject("MyScaleComponent") 
```

# asp.net - 将路由从 .net 移动到 umbraco

> ID：10407132
> 
> 赞同：2
> 
> 时间：2012-05-02T02:58:56.453
> 
> 标签：asp.net, routes, umbraco, httpmodule, umbraco-blog

我只是想将路径从 Visual Studio 中的 Asp.net 应用程序构建移动到 umbraco，以便在按类别列出的商店中清理 URL。

我可以使用 VS 中的“GLOBAL.ascx”在 VS 项目中实现这一点，如下所示

```
 void Application_Start(object sender, EventArgs e)
  {
      RegisterRoutes(RouteTable.Routes);
  }

  public static void RegisterRoutes(RouteCollection routes)
  {
          routes.MapPageRoute("",
         "shop/ProductsHome/{type}/{category1}/{category2}",
         "~/shop/ProductsHome.aspx",
            true,
            new RouteValueDictionary { { "type", "product" }, { "category2", null } });
  } 
```

但由于某种原因，这似乎在 umbraco 中不起作用。我尝试了 HTTP 模块，覆盖了 umbraco 方法，但似乎没有任何效果。

那么实现这一目标的最佳方法是什么。请帮忙pppppppppp :(((((

万分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:01:24.917

我不确定您使用的是哪个版本的 Umbraco，在 5 中您可以执行以下操作

```
public class Application : MvcApplication
{
    protected override void RegisterCustomMvcRoutes(RouteCollection routes)
    {
        routes.MapPageRoute("",
        "shop/ProductsHome/{type}/{category1}/{category2}",
        "~/shop/ProductsHome.aspx",
        true,
        new RouteValueDictionary { { "type", "product" }, { "category2", null } });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:21:46.480

你看过 UrlRewriting.config，我刚刚[在这里](http://our.umbraco.org/forum/using/ui-questions/21385-URL-Routing-in-Umbraco)读到你可以在 4.7 中使用它来路由

# iphone - 如果关闭推送，为什么 iPhone 仍然给我一个设备令牌？

> ID：10407138
> 
> 赞同：2
> 
> 时间：2012-05-02T02:59:33.550
> 
> 标签：iphone, push-notification, devicetoken

第一次运行我的应用程序时，系统会询问我是否要允许推送通知，所以我选择了是。现在，当我转到设置并关闭我的应用程序的所有通知时，我仍然会从`- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken;`. 作为开发人员，我是否有责任跟踪我的应用是否启用了任何功能？或者这是一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:17:22.030

设备令牌通常存储在某处的服务器上。如果用户突然决定他们想要推送通知并将其重新打开，则他们的设备令牌已经生成并存储在您的服务器上。

如果未生成设备令牌，则用户必须确保应用程序已终止然后重新启动才能生成设备令牌。

您可以使用以下代码确定用户是否关闭了推送通知

```
UIRemoteNotificationType remoteNotificationType = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];
if (remoteNotificationType == UIRemoteNotificationTypeNone) {
    ... Do not send push
} 
```

# javascript - 如何在使用 Firefox 时跟踪 JS？

> ID：10407143
> 
> 赞同：1
> 
> 时间：2012-05-02T03:00:10.600
> 
> 标签：javascript, firefox, build

我想gdb JS在解析JS的时候看到火狐的变化，所以我`--enable-debug`在搭建火狐的时候设置了，但是好像没有效果。

那么，有没有其他方法可以在构建时将 Firefox 中的 JS 引擎设置为调试模式？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T03:54:24.203

使用firebug，这是一个非常强大的web app开发工具

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T04:03:20.917

您可以使用

```
console.log( 'Message ' or Object or Array or any data type ) 
```

它将以某种方式在大多数浏览器上运行。对于 Chrome，它可以正常工作，对于 Firefox，您需要 Firebug。您可以通过打开 JavaScript 控制台来查看它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T03:08:03.590

您可以调试 JavaScript，以使用浏览器的开发人员控制台。通常可以通过按键盘上的 F12 来访问（如果您已经下载了 firebug）。否则单击工具>附加组件并下载firebug并检查控制台或脚本进行调试。

# r - 在 R 中用向量编写函数

> ID：10407148
> 
> 赞同：0
> 
> 时间：2012-05-02T03:01:04.830
> 
> 标签：r

我无法理解如何在 R 中编写用于向量的函数。对于这个问题：

编写一个 R 函数来确定表示为整数向量的两个集合 A 和 B 是否不相交。如果它们不相交，则显示集合 A 的元素，否则显示集合 B 的元素。

我了解函数和条件语句的基本格式，例如：

```
name <- function(x){ 
           if (x>3) print("x is greater than 3") 
           else print ("x not greater than 3") 
        } 
```

但是，对于上述问题，我不知道如何去做类似的事情，而是以向量作为参数。有答案吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:27:37.620

正如您所拥有的那样，只需将单个值替换为向量的名称即可。您必须注意，您现在处理的是一系列数字，而不仅仅是一个值。使用类似`any`and之类的函数`all`可能对您进行比较有用（请参阅`?any`和`?all`以获取说明）。

```
vec1 <- 1:3
print(vec1)
vec1

vec2 <- 2:4
print(vec2)
vec2

grthan3 <- function(vectorname) { 
if (any(vectorname > 3)) print("1 or more values > 3")  else
                         print("no such luck")  
}

grthan3(vec1)
#[1] "no such luck"
grthan3(vec2)
#[1] "1 or more values > 3" 
```

像@joran 一样，如果这是一个家庭作业问题，我会注意不只是解决问题。

# iphone - CLLocation 导致 EXC_BAD_ACCESS

> ID：10407150
> 
> 赞同：0
> 
> 时间：2012-05-02T03:01:30.587
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting, cllocation

此代码在某些时候有效，但有时会因 EXC_BAD_ACCESS 错误而崩溃。

```
NSInteger compareDistance(id num1, id num2, void *context) 
{
    int rv;
    //cast parameters from general type
    CLLocation* location = (__bridge_transfer CLLocation *)context;
    Attraction* attr1 = num1;
    Attraction* attr2 = num2;

    //convert to CLLocation objects and calculate distance from user current
    CLLocation* locationAttr1 = 
    [[CLLocation alloc] initWithLatitude:attr1.latitude 
                               longitude:attr1.longitude];
    CLLocation* locationAttr2 = 
    [[CLLocation alloc] initWithLatitude:attr2.latitude 
                               longitude:attr2.longitude];
    CLLocationDistance distance1 = [locationAttr1 distanceFromLocation:location];
    CLLocationDistance distance2 = [locationAttr2 distanceFromLocation:location];

    //compare and rate
    if (distance1 < distance2)
        rv = NSOrderedAscending;
    else if (distance1 > distance2)
        rv = NSOrderedDescending;
    else
        rv = NSOrderedSame;

    return rv;
} 
```

这是一个用于排序的比较函数`NSMutableArray`：

```
-(NSMutableArray *)getAttractionsByDistanceInCategory:(int)catID
{
    [self confirmAttractions];

    //set up array and context to prepare for sort
    NSMutableArray *attractionsToSort = [[NSMutableArray alloc] init];
    for (Attraction *a in attractions)
    {
        if ((catID < 0) || (catID >= 0 && a.category == catID))
            [attractionsToSort addObject:a];
    }

    CLLocation* currentLocation = 
        [[CLLocation alloc] initWithLatitude:usersLat longitude:usersLng];

    //conduct sort
    [attractionsToSort sortUsingFunction:compareDistance
                                 context:(__bridge_retained void *)currentLocation];

    return attractionsToSort;
} 
```

唔。您认为问题可能出在 ARC 上吗？我正在关注那项`__bridge_retained void *`业务。

提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:32:14.110

`__bridge_transfer`将所有权转移到目标对象，这可能不是您想要在此处执行的操作，您不想要*.*`context`要做到这一点。

基本上，您不想将所有权转移到任何地方，因此只需`__bridge`在两种情况下都使用它，它应该可以正常工作。

# python - 带双端队列的冒号运算符（在 Python 中）

> ID：10407151
> 
> 赞同：2
> 
> 时间：2012-05-02T03:01:45.183
> 
> 标签：python, arrays, deque, slice, colon

我希望在我的双端队列中使用冒号运算符，但它似乎与列表的工作方式不同。

我正在尝试类似的东西：

```
myDeque = deque([0,1,2,3,4,5])
myDequeFunction(myDeque[3:]) 
```

这是我收到的错误：“TypeError：序列索引必须是整数，而不是'切片'”

用双端队列进行数组切片的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:07:48.250

由于双端队列的性质，迭代可能比蛮力方法更快（注意：未经证实）。

```
>>> myDeque = collections.deque([0,1,2,3,4,5])
>>> list(itertools.islice(myDeque, 3, sys.maxint))
[3, 4, 5] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T03:04:55.263

`deque`对象不支持对自身进行切片，但您可以创建一个新的双端队列：

```
sliced_deque = deque(list(old_deque)[3:]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T03:05:41.280

`collections.deque`对象不支持切片。做一个新的会更直接。

```
n_deque = deque(list(d)[3:]) 
```

# windows - 如何运行与 MSYS 中的 DLL 链接的程序？

> ID：10407154
> 
> 赞同：1
> 
> 时间：2012-05-02T03:02:03.727
> 
> 标签：windows, dll, cmake, msys

我已经成功地在带有 MSYS shell 环境的 windows 上使用 opencv 构建了一个演示应用程序。

我没有使用预构建的 opencv 安装程序，我在本地下载并编译了源代码（这是推荐的方法）。

构建 opencv 并运行 make install 后，所有文件都愉快地在：

```
/e/deps/libopencv/build/install/ 
```

我可以使用 cmake 指令成功地构建一个示例应用程序：

```
find_package(OPENCV REQUIRED)
link_directory(${OpenCV_LIB_DIR})
include_directories(${OpenCV_INCLUDE_DIRS})
target_link_libraries(target ${OpenCV_LIBS}) 
```

在这里要完全清楚：构建二进制文件是*成功*的。

现在，当我从 shell 运行它时，我收到消息：

```
The program can't start because libopencv_core231.dll is missing from your computer. 
Try reinstalling the program to fix this problem. 
```

所以......我知道图书馆在哪里：

```
$ ls /e/deps/libopencv/build/install/lib/
libopencv_calib3d231.dll.a  libopencv_features2d231.dll.a  libopencv_highgui231.dll.a     libopencv_ml231.dll.a         libopencv_video231.dll.a
libopencv_contrib231.dll.a  libopencv_flann231.dll.a       libopencv_imgproc231.dll.a  libopencv_objdetect231.dll.a
libopencv_core231.dll.a     libopencv_gpu231.dll.a         libopencv_legacy231.dll.a   libopencv_ts231.a 
```

现在怎么办？

我想我可以尝试让 cmake 构建一个静态二进制文件，但这似乎非常极端。

我怎样才能以某种方式使 1）Windows 或 2）MSYS 环境快乐。Windows上的LD_LIBRARY_PATH之类的东西？

或者这不是问题，我实际上（尽管看起来）以某种方式弄乱了二进制文件的编译方式？

编辑：

注意。无论出于何种原因，我的库似乎都是 .dll.a 文件，而不是 .dlls（请参阅 ls 结果），如果这与远程相关的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:11:05.307

windows 搜索与 exe 相同的目录、`%PATH%`(Windows) 或`$PATH`(msys) 目录中的任何目录，以及 windows 文件夹中的一些特殊目录，您可以将其添加`/e/deps/libopencv/build/install/lib`到您的`$PATH`. 我不确定这是否适用于 msys，您可能需要在 windows 中`E:\deps\libopencv\build\install\lib`添加`%PATH%`。

如果您将程序提供给其他人，典型的解决方案是在与 EXE 相同的目录中包含 DLL 的副本。您可以通过使用命令对其进行符号链接来获得相同的效果

```
ln -s /e/deps/libopencv/build/install/lib/libopencv_core231.dll libopencv_core231.dll 
```

在`/e/deps/libopencv/build/install/`目录中

# php - Mysql - PHP 不同的值搜索

> ID：10407155
> 
> 赞同：0
> 
> 时间：2012-05-02T03:02:13.190
> 
> 标签：php, mysql, search, variables

我知道如何使用例如 WHERE 词来执行 mysql 搜索。但我的问题是我需要搜索不同的值，但这些值的数量可能会有所不同。例如：

我可以搜索 3 个变量 Name、LastName、Age 但在其他搜索中，我可以查找 2 个变量 Name、Age。

有没有办法使用相同的脚本执行 MYSQL 搜索，无论我搜索多少值。？？

“强制”搜索固定数量的变量是一种更好的做法。??

谢谢。！

罗伯托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:07:56.567

恕我直言，最好将搜索限制在固定数量的变量中。这样，您是出于特定原因回答特定问题，而不是试图为您的特定问题提供一般答案。限制搜索条件使语句更易于调试和性能基准测试。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T03:08:28.840

只需为您的搜索参数使用一个变量并将其注入您的查询中。只需确保在函数/方法中将变量放入正确的格式（这将取决于您如何选择不同的值。）

```
SELECT *
FROM db
$variable; 
```

不会`WHERE`看到任何子句，除非它传递了您的值（这意味着您可以使用相同的查询来进行数据库的一般搜索），而不必担心会有一个 empty/required `$variable`。

您`$variable`在构建时需要在其中包含`WHERE`子句，然后您添加的每个值，以正确的格式插入它（也许在循环中）。

希望这是有道理的，如果不让我知道，我会尽力澄清。这与大多数人在分页时使用的方法相同（除了他们将变量放在`LIMIT`而不是`WHERE`）

**编辑：**

还要确保在注入前正确清理变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T03:09:37.757

动态构建查询的简单示例：

```
$conditions = array();

if (...) {
    $conditions['age'] = $age;
}
if (...) {
    $conditions['name'] = $name;
}
...

if (!$conditions) {
    die('No conditions supplied');
}

// if you're still using the mysql_ functions and haven't done so before:
$conditions = array_map('mysql_real_escape_string', $conditions);

foreach ($conditions as $field => &$value) {
    $value = "`$field` = '$value'";
}

$query = 'SELECT ... WHERE ' . join(' AND ', $conditions); 
```

动态地将您想要创建的确切查询拼凑在一起并不难。请注意不要弄乱 SQL 语法或让自己面临更多注入漏洞。您可能想查看数据库抽象层，它几乎允许您将`$conditions`数组传递给一个函数，该函数将从它构造实际查询，或多或少类似于上面的方式。

# primefaces - Primefaces 文件下载的非英文文件名已损坏

> ID：10407156
> 
> 赞同：6
> 
> 时间：2012-05-02T03:02:22.273
> 
> 标签：primefaces, download, filenames, non-english

我正在使用 Primefaces 3.2。我在使用 primefaces fileDownload 时遇到问题。我可以上传文件并将它们的非英文名称保留在服务器上（在我的情况下是俄语）。但是，当我使用 p:fileDownload 下载上传的文件时，我不能使用俄语字母，因为它们已损坏。似乎 DefaultStreamedContent 类构造函数只接受拉丁字母。我正在根据 primefaces 网站上的展示做所有事情，如下所示。

```
public FileDownloadController() {          
    InputStream stream = ((ServletContext)FacesContext.getCurrentInstance().getExternalContext().getContext()).getResourceAsStream("/images/optimusprime.jpg");  
    file = new DefaultStreamedContent(stream, "image/jpg", "downloaded_optimus.jpg");  
} 
```

有什么想法可以解决我的问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-24T12:17:20.820

这已[在即将发布的 PrimeFaces 6.2](https://github.com/primefaces/primefaces/issues/1312)中修复，但对于早期版本，需要应用以下修复。在下面评论中的链接中，发布了对 PrimeFaces 问题的引用，其中包含以下修复适用于 Chrome、IE 和 Opera 但不适用于 FireFox 的信息（未提及版本，也未提及“Edge”）

**解决方法**

尝试以`application/x-www-form-urlencoded`MIME 格式 ( [URLEncoder](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html) ) 对文件名进行编码。

例子：

```
public StreamedContent getFileDown () {
        // Get current position in file table
        this.currentPosition();
        attachments = getAttachments();
        Attachment a = getAttachmentByPosition( pos, attachments );

        FileNameMap fileNameMap = URLConnection.getFileNameMap();
        // Detecting MIME type
        String mimeType = fileNameMap.getContentTypeFor(a.getAttachmentName());
        String escapedFilename = "Unrecognized!!!";
        try {
            // Encoding
            escapedFilename = URLEncoder.encode(a.getAttachmentName(), "UTF-8").replaceAll(
                    "\\+", "%20");
        } catch (UnsupportedEncodingException e1) {         
            e1.printStackTrace();
        }
        // Preparing streamed content
        fileDown = new DefaultStreamedContent( new ByteArrayInputStream( a.getAttachment() ),
                mimeType, escapedFilename);
        return fileDown;
    } 
```

# java - 未使用 ObjectPool 打开非法状态异常池

> ID：10407157
> 
> 赞同：1
> 
> 时间：2012-05-02T03:02:28.387
> 
> 标签：java

我正在尝试学习如何使用池连接，这样我就可以通过不必打开/关闭服务器的通道来获得更好的吞吐量，但我似乎无法让它工作。我有一个稍微修改过的代码版本，当我分叉一个线程并让每个线程运行一个循环来转储数据时，它可以工作，但现在我试图用`ThreadPoolExecutor`一个线程发送作业，然后产生 2 个线程来处理工作。我的实验应该希望在任何给定时间显示大约 2 个通道打开（或尽可能多的线程），但是当我更改代码时，我得到`illegalstateexception: pool not open`

如果我的池设计错误或者我对 ThreadPoolExecutor 的理解有缺陷，我真的很困惑。我对 ThreadPoolExecutor 的理解是，如果有工作要做，它会让线程保持活动状态，并且不会在每次迭代时继续杀死/重新生成它们。

这是代码（你可以忽略所有rabbitmq的东西，它的要点是你需要打开一个到服务器的连接，然后打开一个通道。我试图打开一个到服务器的连接，然后是一个通道池共享）。我的想法是创建 objectpool 类的实例，然后`borrows`根据需要将其传递给可运行的通道。

**代码：**

```
import org.apache.commons.pool.BasePoolableObjectFactory;
import org.apache.commons.pool.ObjectPool;
import org.apache.commons.pool.PoolableObjectFactory;
import org.apache.commons.pool.impl.GenericObjectPool;

import java.io.IOException;
import java.util.NoSuchElementException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.LinkedBlockingDeque;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

import com.rabbitmq.client.ConnectionFactory;
import com.rabbitmq.client.Connection;
import com.rabbitmq.client.Channel;
import com.rabbitmq.client.MessageProperties;

public class PoolExample {

    private static ExecutorService executor_worker;
    static {
        final int numberOfThreads_ThreadPoolExecutor = 2;
        executor_worker =
            new ThreadPoolExecutor(numberOfThreads_ThreadPoolExecutor, numberOfThreads_ThreadPoolExecutor, 1000, TimeUnit.SECONDS,
                                   new LinkedBlockingDeque<Runnable>());   
    }

    public static void main(String[] args) throws Exception {
        System.out.println("starting..");       
        PoolableObjectFactory<MyPooledObject> factory = new MyPoolableObjectFactory();
        ObjectPool<MyPooledObject> pool = new GenericObjectPool<MyPooledObject>(factory);
        for (int x = 0; x<500000000; x++) {
            executor_worker.submit(new Thread(new MyRunnable(x, pool)));
        }
    }
}

class MyPooledObject {
    //Connection connection;
    Channel channel;
    public MyPooledObject() throws IOException {
        System.out.println("hello world");
        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("localhost");
        Connection connection = factory.newConnection();
        channel = connection.createChannel(); 
    }

    public Channel sing() throws IOException {
        //System.out.println("mary had a little lamb");
        return channel;
    }

    public void destroy() {
        System.out.println("goodbye cruel world");      
    }
}

class MyPoolableObjectFactory extends BasePoolableObjectFactory<MyPooledObject> {
    @Override
    public MyPooledObject makeObject() throws Exception {
        return new MyPooledObject();
    }
    @Override
    public void destroyObject(MyPooledObject obj) throws Exception {
        obj.destroy();
    }
}

class MyRunnable implements Runnable{  
    protected int x = 0;
    protected ObjectPool<MyPooledObject> pool = null;

    public MyRunnable(int x, ObjectPool<MyPooledObject> pool) {
        // TODO Auto-generated constructor stub
        this.x = x;
        this.pool = pool;
    }

    public void run(){
        try {
                MyPooledObject obj;
                obj = pool.borrowObject();
                Channel channel = obj.sing();
                String message = Integer.toString(x);
                channel.basicPublish( "", "task_queue", 
                        MessageProperties.PERSISTENT_TEXT_PLAIN,
                        message.getBytes());
                pool.returnObject(obj);
        } catch (NoSuchElementException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            try {
                pool.close();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

知道我的设计有什么问题吗？还是我整个池对象的方法有缺陷？

UPDATE1：根据请求，这里是堆栈跟踪（我连续得到很多）：

**堆栈跟踪：**

```
java.lang.IllegalStateException: Pool not open
    at org.apache.commons.pool.BaseObjectPool.assertOpen(BaseObjectPool.java:140)
    at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1079)
    at MyRunnable.run(PoolExample.java:85)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

如果有帮助，我的代码中的第 85 行（触发此错误的位置是）：`obj = pool.borrowObject();`

UPDATE2：很奇怪。我收到错误消息，但它确实将 2 个项目写入队列。我不想让任何人去追逐野鹅，但我认为这意味着它可以在创建对象时成功借用对象，但在将它们返回到池中时却不能？

UPDATE3：我设计了代码，所以它不会经过我上面的中间步骤。我不再收到错误消息，但它基本上什么也没做……我启动了 10 个线程并期望有 10 个通道，但我只得到 1 个通道几秒钟，然后它也关闭了。代码：

```
import org.apache.commons.pool.BasePoolableObjectFactory;
import org.apache.commons.pool.ObjectPool;
import org.apache.commons.pool.PoolableObjectFactory;
import org.apache.commons.pool.impl.GenericObjectPool;

import java.io.IOException;
import java.util.NoSuchElementException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.LinkedBlockingDeque;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

import com.rabbitmq.client.ConnectionFactory;
import com.rabbitmq.client.Connection;
import com.rabbitmq.client.Channel;
import com.rabbitmq.client.MessageProperties;

public class PoolExample {

    private static ExecutorService executor_worker;
    static {
        final int numberOfThreads_ThreadPoolExecutor = 20;
        executor_worker =
            new ThreadPoolExecutor(numberOfThreads_ThreadPoolExecutor, numberOfThreads_ThreadPoolExecutor, 1000, TimeUnit.SECONDS,
                                   new LinkedBlockingDeque<Runnable>());   
    }

    public static void main(String[] args) throws Exception {
        System.out.println("starting..");           
        ObjectPool<Channel> pool =
                new GenericObjectPool<Channel>(
                new ConnectionPoolableObjectFactory(), 5);

        for (int x = 0; x<500000000; x++) {
            executor_worker.submit(new MyRunnable(x, pool));
        }
        executor_worker.shutdown();
        pool.close();
    }
}

 class ConnectionPoolableObjectFactory extends BasePoolableObjectFactory<Channel> {
     Channel channel;

    public ConnectionPoolableObjectFactory() throws IOException {
        System.out.println("hello world");
        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("localhost");
        Connection connection = factory.newConnection();
        channel = connection.createChannel(); 
    }

    @Override
    public Channel makeObject() throws Exception {                
        return channel;
    }

    @Override
    public boolean validateObject(Channel channel) {
        return channel.isOpen();
    }

    @Override
    public void destroyObject(Channel channel) throws Exception {
        channel.close();
    }

    @Override
    public void passivateObject(Channel channel) throws Exception {
        //System.out.println("sent back to queue");
    }
}

class MyRunnable implements Runnable{  
    protected int x = 0;
    protected ObjectPool<Channel> pool;

    public MyRunnable(int x, ObjectPool<Channel> pool) {
        // TODO Auto-generated constructor stub
        this.x = x;
        this.pool = pool;
    }

    public void run(){
        try {
                Channel channel = pool.borrowObject();
                String message = Integer.toString(x);
                channel.basicPublish( "", "task_queue", 
                        MessageProperties.PERSISTENT_TEXT_PLAIN,
                        message.getBytes());
                pool.returnObject(channel);
        } catch (NoSuchElementException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }
} 
```

# android - 如何在 Android 上管理 startActivityForResult

> ID：10407159
> 
> 赞同：1076
> 
> 时间：2012-05-02T03:03:00.523
> 
> 标签：android, android-intent, android-activity, startactivityforresult

在我的活动中，我正在调用主要活动中的第二个活动`startActivityForResult`。在我的第二个活动中，有一些方法可以完成此活动（可能没有结果），但是，其中只有一个返回结果。

例如，从主要活动中，我调用了第二个活动。在这个活动中，我正在检查手机的一些功能，例如它是否有摄像头。如果没有，那么我将关闭此活动。此外，在准备期间`MediaRecorder`或`MediaPlayer`如果发生问题，我将关闭此活动。

如果它的设备有摄像头并且录制完成，那么在录制视频后，如果用户点击完成按钮，我会将结果（录制视频的地址）发送回主活动。

如何检查主要活动的结果？

* * *

## 回答 #1

> 赞同：2611
> 
> 时间：2012-05-02T03:36:38.790

从您的`FirstActivity`, 调用`SecondActivity`using`startActivityForResult()`方法。

例如：

```
int LAUNCH_SECOND_ACTIVITY = 1
Intent i = new Intent(this, SecondActivity.class);
startActivityForResult(i, LAUNCH_SECOND_ACTIVITY); 
```

在您的`SecondActivity`中，设置您要返回的数据`FirstActivity`。如果您不想返回，请不要设置任何内容。

例如：`SecondActivity`如果你想发回数据：

```
Intent returnIntent = new Intent();
returnIntent.putExtra("result",result);
setResult(Activity.RESULT_OK,returnIntent);
finish(); 
```

如果您不想返回数据：

```
Intent returnIntent = new Intent();
setResult(Activity.RESULT_CANCELED, returnIntent);
finish(); 
```

现在在您的`FirstActivity`类中，为该`onActivityResult()`方法编写以下代码。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == LAUNCH_SECOND_ACTIVITY) {
        if(resultCode == Activity.RESULT_OK){
            String result=data.getStringExtra("result");
        }
        if (resultCode == Activity.RESULT_CANCELED) {
            // Write your code if there's no result
        }
    }
} //onActivityResult 
```

要在 Kotlin 中以更好的方式在两个 Activity 之间传递数据，请阅读*“ [A better way to pass data between Activities](https://proandroiddev.com/is-onactivityresult-deprecated-in-activity-results-api-lets-deep-dive-into-it-302d5cf6edd) ”*。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-05-02T03:07:14.187

> 如何检查主要活动的结果？

您需要覆盖[`Activity.onActivityResult()`](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)然后检查其参数：

*   `requestCode`标识哪个应用程序返回了这些结果。这是您在调用时定义的`startActivityForResult()`。
*   `resultCode`通知您此应用程序是成功、失败还是其他情况
*   `data`保存此应用程序返回的任何信息。这可能是`null`。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2016-12-05T08:36:32.750

**例子**

要在上下文中查看整个过程，这是一个补充答案。有关更多解释，请参阅[我的完整答案](https://stackoverflow.com/a/40969871/3681880)。

![在此处输入图像描述](../Images/5654002eb9d760d2361ec15a6b635a6e.png)

*MainActivity.java*

```
public class MainActivity extends AppCompatActivity {

    // Add a different request code for every activity you are starting from here
    private static final int SECOND_ACTIVITY_REQUEST_CODE = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    // "Go to Second Activity" button click
    public void onButtonClick(View view) {

        // Start the SecondActivity
        Intent intent = new Intent(this, SecondActivity.class);
        startActivityForResult(intent, SECOND_ACTIVITY_REQUEST_CODE);
    }

    // This method is called when the second activity finishes
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        // check that it is the SecondActivity with an OK result
        if (requestCode == SECOND_ACTIVITY_REQUEST_CODE) {
            if (resultCode == RESULT_OK) { // Activity.RESULT_OK

                // get String data from Intent
                String returnString = data.getStringExtra("keyName");

                // set text view with string
                TextView textView = (TextView) findViewById(R.id.textView);
                textView.setText(returnString);
            }
        }
    }
} 
```

*SecondActivity.java*

```
public class SecondActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);
    }

    // "Send text back" button click
    public void onButtonClick(View view) {

        // get the text from the EditText
        EditText editText = (EditText) findViewById(R.id.editText);
        String stringToPassBack = editText.getText().toString();

        // put the String to pass back into an Intent and close this activity
        Intent intent = new Intent();
        intent.putExtra("keyName", stringToPassBack);
        setResult(RESULT_OK, intent);
        finish();
    }
} 
```

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2015-05-26T20:40:47.470

补充[Nishant 的答案](https://stackoverflow.com/questions/10407159/how-to-manage-startactivityforresult-on-android/10407371#10407371)，返回活动结果的最佳方法是：

```
Intent returnIntent = getIntent();
returnIntent.putExtra("result",result);
setResult(RESULT_OK,returnIntent);
finish(); 
```

我遇到了问题

```
new Intent(); 
```

然后我发现正确的方法是使用

```
getIntent(); 
```

获取当前意图。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2021-02-24T06:28:42.133

### startActivityForResult：在 Android X 中已弃用

对于我们拥有的*新*方式`registerForActivityResult`。

**在 Java 中：**

```
 // You need to create a launcher variable inside onAttach or onCreate or global, i.e, before the activity is displayed
 ActivityResultLauncher<Intent> launchSomeActivity = registerForActivityResult(
     new ActivityResultContracts.StartActivityForResult(),
     new ActivityResultCallback<ActivityResult>() {
              @Override
              public void onActivityResult(ActivityResult result) {
                   if (result.getResultCode() == Activity.RESULT_OK) {
                         Intent data = result.getData();
                         // your operation....
                    }
               }
      });

      public void openYourActivity() {
            Intent intent = new Intent(this, SomeActivity.class);
            launchSomeActivity.launch(intent);
      } 
```

**在科特林：**

```
var resultLauncher = registerForActivityResult(StartActivityForResult()) { result ->
    if (result.resultCode == Activity.RESULT_OK) {
        val data: Intent? = result.data
        // your operation...
    }
}

fun openYourActivity() {
    val intent = Intent(this, SomeActivity::class.java)
    resultLauncher.launch(intent)
} 
```

### 优势：

1.  新方法是降低我们从片段或另一个活动调用活动时面临的复杂性
2.  轻松请求任何许可并获得回调

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2015-10-23T12:58:55.243

对于那些[在 onActivityResult 中有错误 requestCode问题的人](https://stackoverflow.com/questions/10564474/wrong-requestcode-in-onactivityresult)

如果您是`startActivityForResult()`从您的 调用`Fragment`，则 requestCode 由拥有 Fragment 的 Activity 更改。

如果您想在活动中获得正确的 resultCode，请尝试以下操作：

改变：

`startActivityForResult(intent, 1);`至：

`getActivity().startActivityForResult(intent, 1);`

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2020-04-03T10:06:46.710

## ActivityResultRegistry 是推荐的方法

`ComponentActivity`现在提供一个`ActivityResultRegistry`允许您处理`startActivityForResult()`+`onActivityResult()`和`requestPermissions()`+`onRequestPermissionsResult()`流的方法，而无需覆盖`Activity`or中的方法`Fragment`，通过 提高类型安全性`ActivityResultContract`，并提供用于测试这些流的钩子。

强烈建议使用 Android 10 Activity 1.2.0-alpha02 和 Fragment 1.3.0-alpha02 中引入的 Activity Result API。

将此添加到您的`build.gradle`

```
def activity_version = "1.2.0-beta01"

// Java language implementation
implementation "androidx.activity:activity:$activity_version"
// Kotlin
implementation "androidx.activity:activity-ktx:$activity_version" 
```

## 如何使用预建合约

这个新的 API 具有以下预建功能

1.  拍视频
2.  挑选联系人
3.  获取内容
4.  获取内容
5.  打开文档
6.  打开文档
7.  开放文档树
8.  创建文档
9.  拨号
10.  拍照片
11.  请求许可
12.  请求权限

**一个使用 takePicture 合约的例子：**

```
private val takePicture = prepareCall(ActivityResultContracts.TakePicture()) { bitmap: Bitmap? ->
    // Do something with the Bitmap, if present
}

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)

    button.setOnClickListener { takePicture() }
} 
```

那么这里发生了什么？让我们稍微分解一下。`takePicture`只是一个返回可空位图的回调 - 它是否为空取决于该`onActivityResult`过程是否成功。`prepareCall`然后将此调用注册到`ComponentActivity`名为 the的新功能中`ActivityResultRegistry`- 我们稍后再讨论。`ActivityResultContracts.TakePicture()`是 Google 为我们创建的内置助手之一，最后调用`takePicture`实际上会触发 Intent，就像您之前使用`Activity.startActivityForResult(intent, REQUEST_CODE)`.

## 如何编写自定义合同

一个简单的契约，它将 Int 作为*输入*并返回一个字符串，请求的 Activity 在结果 Intent 中返回该字符串。

```
class MyContract : ActivityResultContract<Int, String>() {

    companion object {
        const val ACTION = "com.myapp.action.MY_ACTION"
        const val INPUT_INT = "input_int"
        const val OUTPUT_STRING = "output_string"
    }

    override fun createIntent(input: Int): Intent {
        return Intent(ACTION)
            .apply { putExtra(INPUT_INT, input) }
    }

    override fun parseResult(resultCode: Int, intent: Intent?): String? {
        return when (resultCode) {
            Activity.RESULT_OK -> intent?.getStringExtra(OUTPUT_STRING)
            else -> null
        }
    }
}

class MyActivity : AppCompatActivity() {

    private val myActionCall = prepareCall(MyContract()) { result ->
        Log.i("MyActivity", "Obtained result: $result")
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        ...
        button.setOnClickListener {
            myActionCall(500)
        }
    }
} 
```

查看[此官方文档](https://developer.android.com/training/basics/intents/result)以获取更多信息。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2014-03-08T13:54:56.313

If you want to update the user interface with the activity result, you can't to use `this.runOnUiThread(new Runnable() {}`. Doing this, the UI won't refresh with the new value. Instead, you can do this:

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == RESULT_CANCELED) {
        return;
    }

    global_lat = data.getDoubleExtra("LATITUDE", 0);
    global_lng = data.getDoubleExtra("LONGITUDE", 0);
    new_latlng = true;
}

@Override
protected void onResume() {
    super.onResume();

    if(new_latlng)
    {
        PhysicalTagProperties.this.setLocation(global_lat, global_lng);
        new_latlng=false;
    }
} 
```

This seems silly, but it works pretty well.

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-12-06T11:00:28.393

[我将在简短的回答中发布 Android X](https://developer.android.com/jetpack/androidx)的新“方式” （因为在某些情况下您不需要自定义注册表或合同）。如果您想了解更多信息，请参阅： *[从活动中获取结果](https://developer.android.com/training/basics/intents/result)*

**重要提示**：Android X 的向后兼容性实际上存在一个错误，因此您必须`fragment_version`在 Gradle 文件中添加。**否则你会得到一个异常 "New result API error : Can only use lower 16 bits for requestCode"**。

```
dependencies {

    def activity_version = "1.2.0-beta01"
    // Java language implementation
    implementation "androidx.activity:activity:$activity_version"
    // Kotlin
    implementation "androidx.activity:activity-ktx:$activity_version"

    def fragment_version = "1.3.0-beta02"
    // Java language implementation
    implementation "androidx.fragment:fragment:$fragment_version"
    // Kotlin
    implementation "androidx.fragment:fragment-ktx:$fragment_version"
    // Testing Fragments in Isolation
    debugImplementation "androidx.fragment:fragment-testing:$fragment_version"
} 
```

现在你只需要添加你的活动的这个成员变量。这使用预定义的注册表和通用合同。

```
public class MyActivity extends AppCompatActivity{

   ...

    /**
     * Activity callback API.
     */
    // https://developer.android.com/training/basics/intents/result
    private ActivityResultLauncher<Intent> mStartForResult = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(),

            new ActivityResultCallback<ActivityResult>() {

                @Override
                public void onActivityResult(ActivityResult result) {
                    switch (result.getResultCode()) {
                        case Activity.RESULT_OK:
                            Intent intent = result.getData();
                            // Handle the Intent
                            Toast.makeText(MyActivity.this, "Activity returned ok", Toast.LENGTH_SHORT).show();
                            break;
                        case Activity.RESULT_CANCELED:
                            Toast.makeText(MyActivity.this, "Activity canceled", Toast.LENGTH_SHORT).show();
                            break;
                    }
                }
            }); 
```

在新 API 之前，您有：

```
btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(MyActivity .this, EditActivity.class);
                startActivityForResult(intent, Constants.INTENT_EDIT_REQUEST_CODE);
            }
        }); 
```

**您可能会注意到请求代码现在由 Google 框架生成（并保留）。** 您的代码变为：

```
 btn.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Intent intent = new Intent(MyActivity .this, EditActivity.class);
                    mStartForResult.launch(intent);
                }
            }); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-09-30T12:30:37.843

首先，您`startActivityForResult()`在第一个中使用 with 参数，`Activity`如果您想将数据从第二个发送`Activity`到第一个，然后使用with方法`Activity`传递值并在第一个方法中获取该数据。`Intent``setResult()``onActivityResult()``Activity`

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-12-22T09:54:47.103

这是Android上非常常见的问题

**它可以分为三部分**

1.  开始活动 B（在活动 A 中发生）
2.  设置请求的数据（在活动 B 中发生）
3.  接收请求的数据（在活动 A 中发生）

> 1.  开始活动 B

```
Intent i = new Intent(A.this, B.class);
startActivity(i); 
```

> 2.  设置请求的数据

在这一部分中，您决定在特定事件发生时是否要发回数据。

例如：在活动 B 中有一个 EditText 和两个按钮 b1、b2。单击按钮 b1 会将数据发送回活动 A。单击按钮 b2 不会发送任何数据。

**发送数据**

```
b1......clickListener
{
    Intent resultIntent = new Intent();
    resultIntent.putExtra("Your_key", "Your_value");
    setResult(RES_CODE_A, resultIntent);
    finish();
} 
```

**不发送数据**

```
b2......clickListener
{
   setResult(RES_CODE_B, new Intent());
   finish();
} 
```

**用户单击后退按钮**

默认情况下，使用 Activity.RESULT_CANCEL 响应代码设置结果

> 3.  检索结果

对于那个覆盖 onActivityResult 方法

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == RES_CODE_A) {

       // b1 was clicked
       String x = data.getStringExtra("RES_CODE_A");

    }
    else if(resultCode == RES_CODE_B){

       // b2 was clicked
    }
    else{
       // The back button was clicked
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-04-24T13:38:57.017

您需要覆盖 Activity.onActivityResult()：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == RESULT_CODE_ONE) {

       String a = data.getStringExtra("RESULT_CODE_ONE");

    }
    else if(resultCode == RESULT_CODE_TWO){

       // b was clicked
    }
    else{

    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-03-02T12:59:16.240

在**科特林**

假设 A 和 B 是导航来自 A -> B 的活动 我们需要从 A <- B 返回的结果

在**一个**

```
 // calling the Activity B
    resultLauncher.launch(Intent(requireContext(), B::class.java))

    // we get data in here from B
    private var resultLauncher =
    registerForActivityResult(ActivityResultContracts.StartActivityForResult()) { result ->
        when (result.resultCode) {
            Activity.RESULT_OK -> {
                result.data?.getStringExtra("VALUE")?.let {
                    // data received here
                }
            }
            Activity.RESULT_CANCELED -> {
                // cancel or failure
            }
        }
    } 
```

在**乙**

```
 // Sending result value back to A
    if (success) {
       setResult(RESULT_OK, Intent().putExtra("VALUE", value))
    } else {
       setResult(RESULT_CANCELED)
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-15T03:37:47.370

在您的主要活动中

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    findViewById(R.id.takeCam).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent intent=new Intent(getApplicationContext(),TakePhotoActivity.class);
            intent.putExtra("Mode","Take");
            startActivity(intent);
        }
    });
    findViewById(R.id.selectGal).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent intent=new Intent(getApplicationContext(),TakePhotoActivity.class);
            intent.putExtra("Mode","Gallery");
            startActivity(intent);
        }
    });
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

} 
```

在要显示的第二个活动中

```
private static final int CAMERA_REQUEST = 1888;
private ImageView imageView;
private static final int MY_CAMERA_PERMISSION_CODE = 100;
private static final int PICK_PHOTO_FOR_AVATAR = 0;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_take_photo);

    imageView=findViewById(R.id.imageView);

    if(getIntent().getStringExtra("Mode").equals("Gallery"))
    {
        pickImage();
    }
    else {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
            if (checkSelfPermission(Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {
                requestPermissions(new String[]{Manifest.permission.CAMERA}, MY_CAMERA_PERMISSION_CODE);
            } else {
                Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(cameraIntent, CAMERA_REQUEST);
            }
        }
    }
}
public void pickImage() {
    Intent intent = new Intent(Intent.ACTION_PICK);
    intent.setType("image/*");
    startActivityForResult(intent, PICK_PHOTO_FOR_AVATAR);
}
@Override
public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults)
{
    super.onRequestPermissionsResult(requestCode, permissions, grantResults);
    if (requestCode == MY_CAMERA_PERMISSION_CODE)
    {
        if (grantResults[0] == PackageManager.PERMISSION_GRANTED)
        {
            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(cameraIntent, CAMERA_REQUEST);
        }
        else
        {
            Toast.makeText(this, "Camera Permission Denied..", Toast.LENGTH_LONG).show();
        }
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == CAMERA_REQUEST && resultCode == Activity.RESULT_OK) {
        Bitmap photo = (Bitmap) data.getExtras().get("data");
        imageView.setImageBitmap(photo);
    }
        if (requestCode == PICK_PHOTO_FOR_AVATAR && resultCode == Activity.RESULT_OK) {
            if (data == null) {
                Log.d("ABC","No Such Image Selected");
                return;
            }
            try {
                Uri selectedData=data.getData();
                Log.d("ABC","Image Pick-Up");
                imageView.setImageURI(selectedData);
                InputStream inputStream = getApplicationContext().getContentResolver().openInputStream(selectedData);
                Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
                Bitmap bmp=MediaStore.Images.Media.getBitmap(getContentResolver(),selectedData);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch(IOException e){

            }
    }
} 
```

# javascript - JavaScript setTimeout() 实际上没有执行它的功能？

> ID：10407160
> 
> 赞同：0
> 
> 时间：2012-05-02T03:03:03.690
> 
> 标签：javascript, recursion, settimeout

我有一个 JavaScript 函数，它遍历选中的复选框列表并为每个复选框上传一个视频文件。在开始上传过程之前，我正在尝试确保视频已被转码为较小的格式。我用来跟踪数组视频中的索引，它已经完成了转码过程。在开始给定视频的上传过程之前，我会检查以确保计数器 >= id。如果计数器太低（文件尚未转码），我使用 setTimout() 再次调用 uploadVideos 函数。它似乎永远不会再次调用 uploadVideos 函数，因为我再也没有看到警报弹出窗口。

我怎样才能让它工作？

```
function uploadVideos(id, videos, selected, boxes) {

        var status = document.getElementById('currentUploadStatus');
        // need to deal with element an array
        var fields = videos[id].split(":", 2);
        var playlist = document.getElementById('playlist');
        var dataString = 'videoId='+ fields[0] + '&playlist=' + escape(playlist.value); 

// need to determine the maxTranscodedId
        var counter = document.getElementById('counter');
        alert('counter: ' + counter.innerHTML + " id: " + id);
        if (counter.innerHTML >= id) {

            id++;
            status.innerHTML = "<b class='status'>Uploading Bout #" + fields[1] + " (" + id + " of " + videos.length + ")</b>";

            $.ajax({  
                type: "GET",  
                url: "floUpload.php",  
                data: dataString,  
                success: function(txt) {
                    if (txt != 'Success') {
                        alert(':' + txt + ':');
                    }

                    if (id < videos.length) {
                        uploadVideos(id, videos, selected, boxes);

                    } else {
                        //re-enable the start button
                        var startButton = document.getElementById('start');
                        startButton.disabled = false;

                        status.innerHTML = "<b class='status'>Upload Complete</b>";
                        alert('Upload Completed');

                    }

                    //deselect the checkbox
                    if (boxes == 1 ) {
                        document.videos.video.checked = false;
                        document.videos.video.style.display = 'none';
                    } else {
                        document.videos.video[selected[id-1]].checked = false;
                        document.videos.video[selected[id-1]].style.display = 'none';
                    } 
                },
                async: true

            }); 

        } else {
            // timer call myself the same way I was called

            status.innerHTML = "<b class='status'>Upload waiting for trancode.</b>";
            var t=setTimeout("uploadVideos(id, videos, selected, boxes)",3000);
            //var t=setTimeout("alert('waking')",3000);
        }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:09:05.090

这是 JS 初学者的常见错误。`setTimeout`承认两种第一个参数之一：a）文本，您可以在其中将要评估的 JS 代码置于范围之外（因此引用的变量可能未定义），不太有用。b）功能，例如我为此提出的修复，是替换行：

```
setTimeout("uploadVideos(id, videos, selected, boxes)",3000); 
```

和：

```
setTimeout(function(){
    uploadVideos(id, videos, selected, boxes);
},3000); 
```

如您所见，我将函数调用包装在另一个匿名函数中。为什么？仅仅是因为我需要传递参数，否则我只是调用它，而不是作为参数传递。

# iphone - 检查plist文件是否不存在

> ID：10407163
> 
> 赞同：1
> 
> 时间：2012-05-02T03:03:10.593
> 
> 标签：iphone, ios, plist, nsfilemanager

我知道如何检查 plist 文件是否存在...

```
if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath]) {
 //..etc
} 
```

我想知道是否有办法检查 plist 文件是否不存在？

我在尝试使用我的 plist 中不存在的东西时遇到了一些问题，因为我稍后会创建 plist。所以我想检查目录中是否不存在 plist。我会将一些默认值传递给我要使用的对象。这样我就不会出错；我比较这些值的 if 语句将不合适，稍后将填充正确的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:07:29.990

如果显示的代码检查文件确实存在，则删除`!`以检查它是否存在：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:plistPath]) { 
```

或者，您可以使用：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:plistPath] != 0) { 
```

因为当文件确实存在时代码返回 0。您可能需要检查`errno`或等价物，看看它是否是权限问题与不存在的文件或目录。

# qcar-sdk - 从 Internet QCAR v1.5 加载数据集

> ID：10407168
> 
> 赞同：1
> 
> 时间：2012-05-02T03:04:05.213
> 
> 标签：qcar-sdk

我正在编写一个可以在运行时从互联网加载数据集的应用程序（我使用的是 QCARV1.5）

我听说 QCAR v1.5 支持这个。

有没有人有使用 QCAR v1.5 在运行时从互联网加载数据集的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:37:59.487

您可以从服务器下载数据集并存储在 sdcard 中，然后在 imagetarget.cpp 中的 loadTrackerData 更改`QCAR::DataSet::STORAGE_APPRESOURCE`为`QCAR::DataSet::STORAGE_ABSOLUTE`. 每次下载数据集时，只需在从 java 调用加载数据集之前替换旧数据集，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:34:33.903

他们宣布下一个版本的 Vuforia 将基于云，从 Internet 获取数据。但与此同时，@yogi 给出的答案是最好的选择。

这实际上与 Vuforia 无关，而只是在 Android 中从 Internet 下载文件。

# android - 从内部类创建新意图时出现 NullPointerException

> ID：10407169
> 
> 赞同：1
> 
> 时间：2012-05-02T03:04:11.757
> 
> 标签：android, android-intent, android-asynctask, inner-classes

我有点问题。我有一个活动类，它有一个扩展 AsyncTask 的内部类。在`onProgressUpdate()`我正在尝试创建一个新的 Intent。当我尝试创建 Intent 对象时，我得到一个 NullPointerException。这是导致异常的行：

```
Intent intent = new Intent(OuterClassActivity.this, OuterClassActivity.class);. 
```

内部类搜索数据库。搜索完成后，我调用`publishProgress()`并在`onProgressUpdate()`其中尝试创建此意图以启动 OuterClassActivity，以便它可以显示结果。

我已经搜索了几个小时，但找不到任何东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:07:32.017

为什么你使用 Intent 来调用外部类？据我了解，Intent 用于调用不同的视图。而是调用外部类中定义的方法来显示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:46:52.990

你为什么不直接更新当前视图而不是创建一个新的 Activity 呢？您能否更具体地说明为什么需要创建一个新 Activity ？

# android - 如何在 android 中启动股票安装程序应用程序

> ID：10407172
> 
> 赞同：1
> 
> 时间：2012-05-02T03:04:31.120
> 
> 标签：android, android-intent, installation, protocols

我曾经遇到过这个问题，但我找到了解决方案，所以决定在这里发布它以防万一其他人需要它。

如何启动本机安装程序应用程序来安装 apk？

许多帖子都有以下解决方案：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(path), "application/vnd.android.package-archive");
context.startActivity(intent); 
```

这很好，除了一个微小但至关重要的细节：

“路径”字符串必须以**file://**开头，否则会出现异常，例如

```
Unable to find an activity to handle the intent ..... 
```

所以请确保**路径以*file://开头***

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T14:29:03.937

实际上，您可以简单地使用[Uri类的](http://developer.android.com/reference/android/net/Uri.html)[fromFile(...)](http://developer.android.com/reference/android/net/Uri.html#fromFile%28java.io.File%29)方法来代替[parse(...)](http://developer.android.com/reference/android/net/Uri.html#parse%28java.lang.String%29)方法（Uri 将自动具有*“file://”*形式）。

 *因此：

```
final File file = new File(path);
final Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file), "application/vnd.android.package-archive");
context.startActivity(intent); 
```*

# android - 使用 intentservice 处理上传和更新 UI

> ID：10407177
> 
> 赞同：0
> 
> 时间：2012-05-02T03:05:01.330
> 
> 标签：android

我在这里多次阅读了本地服务的示例：http: [//developer.android.com/reference/android/app/Service.html#RemoteMessengerServiceSample](http://developer.android.com/reference/android/app/Service.html#RemoteMessengerServiceSample)。

我正在尝试在服务生成的线程中上传某些内容，以便该应用程序可用。在上传开始之前，我想在整个应用程序的每个自定义标题栏（自定义标题栏已经实现）中显示一个 ProgressBar，直到上传完成，然后我想删除 ProgressBar。如何使用 IntentService 来实现这一点？

# asp.net - 如何处理asp.net中的唯一标识符参数

> ID：10407183
> 
> 赞同：1
> 
> 时间：2012-05-02T03:06:10.457
> 
> 标签：asp.net

我需要根据作为唯一标识符的 id 从 gridview 和数据库中删除一行。在我下面的代码中，我收到错误消息“无法识别的 Guid 格式”。有什么帮助可以解决吗？

```
 protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {

       string id = GridView1.Rows[e.RowIndex].Cells[0].Text;

        SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
        SqlCommand command = new SqlCommand("Delete", conn);
        command.CommandType = CommandType.StoredProcedure;

        command.Parameters.Add("@ID", SqlDbType.UniqueIdentifier);
         command.Parameters["@ID"].Value = new System.Guid(id); 
        command.Connection.Open();
        command.ExecuteNonQuery();

        DataSet ds = new DataSet();
        SqlDataAdapter da = new SqlDataAdapter(command);
        da.Fill(ds);

        GridView1.DataSource = ds;
        GridView1.DataBind();
        command.Connection.Close();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:12:57.097

在您的 id 字符串上使用[Guid.TryParse](http://msdn.microsoft.com/en-us/library/system.guid.tryparse.aspx)，然后您就会知道发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:00:27.233

试试这个：

```
Guid theGuid = new Guid();
System.Data.SqlTypes.SqlGuid.Parse(theGuid.ToString()); 
```

[将 Guid 参数添加到 SqlCommand](http://weblogs.asp.net/thiagosantos/archive/2009/01/13/adding-a-guid-parameter-into-sqlcommand.aspx)

# jquery - jqgrid addJSONData 不起作用

> ID：10407186
> 
> 赞同：0
> 
> 时间：2012-05-02T03:06:35.003
> 
> 标签：jquery, jqgrid

我正在研究 jqGrid，返回 json 是

```
{"total":1,"page":1,"records":2,"rows":[{"projectId":"1022","name":"john"}]} 
```

然后在我调用的函数中

```
 var jsongrid = eval("("+data+")");                  
 var thegrid = jQuery("#projectList")[0];                       
 thegrid.addJSONData(jsongrid); 
```

但它给了我错误：对象为空或未定义。不知道为什么。我没有使用json阅读器。

顺便说一句，你知道如何使用 set 方法来设置“total”、“page”、“records”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T05:14:30.670

我想您尝试在创建网格*之前*`addJSONData`调用方法*`jQuery("#projectList").jqGrid({...});`*

 *`addJSONData`几乎总是不需要使用（请参阅我关于该主题[的](https://stackoverflow.com/q/2660226/315935)第一篇文章中的一个）。同样，你永远不应该使用`eval`邪恶的方法。一种使用[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)或[JSON.parse](http://www.json.org/js.html)代替。

我想你应该用它`datatype: 'json'`来解决你的问题。您应该发布更多代码来向您展示如何在您的情况下使用其他 jqGrid 选项。

**更新**：从您之前的问题来看，您似乎只想在单击“搜索”按钮时从表单中向服务器发送其他数据。在这种情况下，我建议将代码修改为以下

```
var $grid = $("#projectList");

$grid.jqGrid({
    url: 'user595234.json',
    datatype: "json",
    serializeGridData: function (data) {
        return $.param(data) + '&' + $("#project_search_form").serialize();
    },
    jsonReader: {id: "projectId", repeatitems: false},
    colNames: ['ID', 'Name'],
    colModel: [
        {name: 'projectId', width: 255},
        {name: 'name', width: 255}
    ],
    rowNum: 10,
    rowList: [10,20,30],
    pager: '#projectPager',
    sortname: 'projectId',
    viewrecords: true,
    sortorder: "desc",
    caption: "Simple data manipulation",
    height: "auto"
}).jqGrid("navGrid", "#projectPager", {edit: false, add: false, del: false});

$("#search").click(function () {
    $grid.trigger("reloadGrid", [{page: 1}]);
}); 
```

在[演示中](http://www.ok-soft-gmbh.com/jqGrid/user595234.htm)，我只从使用[jQuery.serialize](http://api.jquery.com/serialize/)的示例中获取了表单并对其进行了一些修改。它显示您需要的数据

![在此处输入图像描述](../Images/10023f0140930ca4f142caac65004c2c.png)

此外，就像您可以轻松验证 Fiddler 或 Firebug 一样，URL 将附加如下附加参数

```
...?_search=false&nd=1336057299806&rows=10&page=1&sidx=projectId&sord=desc&a=1&b=2&c=3&d=4&e=7&f=8 
```

标准参数

```
_search=false&nd=1336057299806&rows=10&page=1&sidx=projectId&sord=desc 
```

将附加表单中的参数

```
a=1&b=2&c=3&d=4&e=7&f=8 
```

在某些情况下，可以选择使用[jQuery.serializeArray](http://api.jquery.com/serializeArray/)。它允许以另一种格式（如 JSON）序列化数据或将数据转换为另一种格式（参见[此处](https://stackoverflow.com/a/8568113/315935)），这些格式可以使用[$.extend](http://api.jquery.com/jQuery.extend/)轻松与标准 jqGrid 参数合并。*

# mysql - 关于评论投票的mysql子查询问题

> ID：10407191
> 
> 赞同：0
> 
> 时间：2012-05-02T03:06:57.853
> 
> 标签：mysql, join, count, subquery

我有我认为需要子查询的 MySQL 查询。我想计算对每条评论的“赞成”投票总数，并确定给定用户是否已经对每条评论投票：

这是我的表：

```
Comments Table:
  comment_id  comment      acct_id     topic_id    comment_date
      5        hello5        2             1            9:00am
      7        hello7        3             1           10:00am

  Votes Table:
  comment_id   vote        acct_id     topic_id
     5          1             1            1
     7          1             4            1
     5          1             5            1 
```

这是我得到的输出：

```
 comment_id  commenter  comment  voter   sum    did_i_vote 
      5           2      hello5     1      2          1 
      7           3      hello7     4      1          1 
```

这是所需的输出：

```
 comment_id  commenter  comment  voter   sum    did_i_vote 
      5           2      hello5   **5**    2          1 
      7           3      hello7     4      1          1 
```

这是我的查询：

```
SELECT votes.acct_id as voter, comments.comment_id, comment, comments.acct_id as 
commenter, SUM(vote) as sum, vote as did_i_vote
from votes 
right join comments 
on votes.comment_id=comments.comment_id 
join accounts on comments.acct_id=accounts.acct_id 
where topic_id=1 
group by comments.comment_id order by comment_date desc 
```

您会注意到这 2 个输出是相同的，除了`voter`.

我的查询缺少的是一种确定给定用户（例如 with `voter=acct_id=5`）是否是对任何评论进行投票的人的方法。如果没有该条件，查询将选择`voter`列表中的第一个 for `comment_id=5`is `voter=1`。

所以我的问题是我认为我需要插入以下子查询：

```
SELECT from votes where voter='X' 
```

我只是不确定在哪里或如何。把它放在上面`from`和`votes`上面之间的括号中会消除这个`sum()`功能，所以我被卡住了。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:09:10.127

如果我从您上面的评论中正确理解了您，我认为您需要做的就是（外部）再次将`votes`表格加入您的查询，这一次仅针对相关帐户的投票：

```
SELECT
   comments.comment_id       AS comment_id,
   comments.acct_id          AS commenter,
   comment                   AS comment,
-- votes.acct_id             AS voter,                        -- ambiguous
   SUM(votes.vote)           AS sum,
   my_votes.vote IS NOT NULL AS did_i_vote
FROM
             votes
  RIGHT JOIN comments ON votes.comment_id=comments.comment_id
        JOIN accounts ON comments.acct_id=accounts.acct_id    -- what purpose ?
  LEFT  JOIN votes AS my_votes ON
               my_votes.commentid=comments.comment_id
           AND my_votes.acct_id=@my_acct_id
WHERE topic_id = 1                                            -- ambiguous
GROUP BY comments.comment_id
ORDER BY comment_date DESC 
```

# perl - 在最后一个 \ 之后删除文本

> ID：10407197
> 
> 赞同：3
> 
> 时间：2012-05-02T03:07:32.557
> 
> 标签：perl

我一直在尝试做一些 perl 正则表达式并且已经碰壁了。我正在尝试对日志文件进行一些数据分析，但遇到了以下问题：

我有一个文件 test.csv，它由来自另一个程序的多个单行条目组成，该程序产生以下布局格式：

*   d:\snow\dir.txt
*   d:\雪\历史\dir.tff
*   d:\snow\history\help.jar
*   d:\winter\show\help.txt
*   d:\summer\beach\ocean\swimming.txt

我想要做的是从路径列表中删除文件名，因此生成的文件将包含：

*   d:\雪\
*   d:\雪\历史\
*   d:\雪\历史\
*   d:\冬季\表演\
*   d:\夏天\海滩\海洋\

我已经把我的头撞到了墙上，并尝试了各种 perl 正则表达式，试图在没有太多运气的情况下删除文件名。由于目录的路径长度不同，所以我碰壁了，我不确定这是否可以在 perl 或 python 中完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T03:10:57.627

你可以用 Perl 中的一行代码来做到这一点：

```
perl -pe 's/[^\\]+$/\n/' <infile.txt >outfile.txt 
```

把它分成几部分：

`-p`使 Perl 将语句（附带`-e`）包装在一个`while`循环中，将该语句应用于输入文件的每一行，并打印结果。

`-e`给 Perl 一个针对每一行运行的语句。

`s/[^\\]+$/\n/`是一个替换语句，它使用正则表达式将任何不包括行尾反斜杠的字符序列更改为仅换行符`\n`。

`[^\\]`是匹配任何非反斜杠的*单个*字符的正则表达式

`[^\\]+`是一个正则表达式，匹配*一个或多个*不是反斜杠的字符

`[^\\]+$`是一个正则表达式，匹配*一个或多个*不是反斜杠的字符，后跟行尾

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T04:20:22.150

使用正则表达式可能会起作用，但使用为此目的设计的模块通常是一个更好的主意。[`File::Basename`](http://search.cpan.org/perldoc?File%3a%3aBasename)或者[`File::Spec`](http://search.cpan.org/perldoc?File%3a%3aSpec)是适合此目的的核心模块：

**代码：**

```
use strict;
use warnings;
use v5.10;

use File::Basename;

say dirname($_) for <DATA>;

__DATA__
d:\snow\dir.txt
d:\snow\history\dir.tff
d:\snow\history\help.jar
d:\winter\show\help.txt
d:\summer\beach\ocean\swimming.txt 
```

**输出：**

```
d:\snow
d:\snow\history
d:\snow\history
d:\winter\show
d:\summer\beach\ocean 
```

当然，如果你想结束反斜杠，你必须添加它们。

对于`File::Spec`：

```
my ($volume, $dir, $file) = File::Spec->splitpath($path);
my $wanted_path = $volume . $dir;  # what you want 
```

这两个模块长期以来一直是核心发行版的一部分，这是一个很好的好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T03:48:57.983

你也可以用这一个衬垫做

```
perl -pe s /\\\\\w+\.\w+$// test.csv > Output.txt 
```

`\w+\.\w+$`与路径末尾的扩展名匹配的文件名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T06:05:54.883

这是在 Python 中执行此操作的一种方法：

```
python -c 'import sys,re;[sys.stdout.write(re.sub("[^\\\]+$","\n",l))for l in sys.stdin]' < in.txt > out.txt 
```

我承认它比 Perl 解决方案更冗长。

# c - Posix 线程 - 并行线程

> ID：10407198
> 
> 赞同：0
> 
> 时间：2012-05-02T03:07:36.743
> 
> 标签：c, pthreads, posix

```
int total = 200; // total is a global variable

void process()
{
    int local;
    for( int i = 0 ; i< 100 ; i++ ) 
    {
         local = total;
         local--;
         total = local;
    }
} 
```

如果 2 个线程并行调用，两个线程完成处理后**总**`process()`的最大值和最小值是多少？

 **我认为最小值将为 0，但我不确定。最大值？？199 ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:18:22.840

在 C11 中，这被定义为“未定义的行为”，这意味着它不提供任何保证。

C99 或多或少也是如此，尽管 C99 在编写时并未考虑到并发性。每个线程都不知道其他线程。

每个线程将查看全局变量 'total' 100 次。

但是，每个线程都有自己的本地副本，将其递减，然后将其写回全局变量 total。

但是，线程可以获取全局变量“total”并保留一个临时副本，直到函数结束才将其写回。在这种情况下，下限可能是 100。

如果他们不保留本地副本，total 可能会下降不超过 1，因为它们都同步获取 total，减少本地副本，然后回写。

如果没有某种方式同步线程，那么一个“抓取”总数，修改它，然后在另一个等待时“释放”它，没有保证它会达到 0。

互斥锁、信号量等是跨线程同步访问的方法。

伪代码：

```
process() {
  for (loop) {
    grab_mutex(total);  // Will wait till total is free
    total--;
    release_mutex(total);
  }
} 
```

但是，下界肯定是0；减少的机会不超过 200 个。**

# bluetooth - 在 PC 上聚合多个蓝牙数据流

> ID：10407199
> 
> 赞同：2
> 
> 时间：2012-05-02T03:07:44.257
> 
> 标签：bluetooth, serial-port, platform

我对蓝牙编程很陌生，因此如果这个问题看起来很幼稚，我深表歉意。

也就是说，我的一个潜在客户有一个定制的硬件设备，可以通过蓝牙将数据传输到 Windows PC。PC软件通过打开一个虚拟COM端口连接到设备，并从中读取数据；然后它会实时可视化这些数据。

他们想做的是将其中三个设备（或者更确切地说，连接到不同传感器的三个非常相似的设备）同时连接到 PC。他们希望重写软件以聚合来自所有三个来源的数据，并实时可视化所有数据；这意味着每个生成数据的设备与屏幕上出现的数据之间的延迟最多可能在几十毫秒的数量级。

我的问题是双重的。

1）。这可以做到吗？有没有办法让 PC 上的软件同时连接到三个支持蓝牙的虚拟 COM 端口？（我猜答案是“是”，但可以肯定的是）。

2）。这样做的最佳平台是什么？原始软件是用 C++/MFC 编写的，但我个人更喜欢更现代的软件，可以访问更简单的图形和 GUI API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:58:38.543

您可以使用我的库[32feet.NET](http://32feet.codeplex.com/) 参见例如[文档](http://32feet.codeplex.com/documentation)

首先不要*使用*虚拟COM端口，它们难以设置，使用不透明，并且难以维护。只需使用我们的`BluetoothClient.Connect`操作（或者`BluetoothListener`如果设备连接到 PC）。然后您将拥有三个 Socket，实际上是`NetworkStream`s，您可以从所有三个中读取，无论是异步还是同步。参见例如[通用蓝牙数据连接](http://32feet.codeplex.com/wikipage?title=General%20Bluetooth%20Data%20Connections)

您的设备将使用串行端口配置文件，因此请使用 UUID/Guid **BluetoothService.SerialPort**。这三个设备需要的是每个设备的设备地址。通过发现获取它们（请参阅文档），或者设备地址可能写在设备的标签或电路板上，您可以将它们定义为代码中的常量。例如

```
static readonly BluetoothAddress DeviceAddr1
    = BluetoothAddress.Parse("002233445566"); 
```

至于延迟应该没问题，我认为其他方法会更慢。.NET 是现代的，并且带有用于 UI 的 WinForms、WPF 和 Silverlight 选项。

# java - Tomcat：getHeader("Host") 与 getServerName()

> ID：10407203
> 
> 赞同：13
> 
> 时间：2012-05-02T03:08:09.003
> 
> 标签：java, tomcat, httprequest

我有一个从多个域提供的 Tomcat 应用程序。以前的开发人员构建了一个方法来返回应用程序 URL（见下文）。在方法中，他们请求服务器名称 ( `request.getServerName()`)，相应地，它从**httpd.conf**文件返回**ServerName 。**

 **但是，我不希望那样。我想要的是浏览器将请求发送到的主机名，即浏览器从哪个域访问应用程序。

我试过`getHeader("Host")`了，但这仍然返回**httpd.conf**文件中设置的**ServerName 。**

 **而不是`request.getServerName()`，我应该使用什么来获取浏览器将请求发送到的服务器名称？

例如：

*   **httpd.conf**中的服务器名称：*www.myserver.net*
*   用户访问*www.yourserver.net上的 Tomcat 应用程序*

我需要返回*www.yourserver.net而* **不是** *www.myserver.net*。该`request.getServerName()`调用似乎只返回*www.myserver.net*

```
/**
 * Convenience method to get the application's URL based on request
 * variables.
 * 
 * @param request the current request
 * @return URL to application
 */
public static String getAppURL(HttpServletRequest request) {
    StringBuffer url = new StringBuffer();
    int port = request.getServerPort();
    if (port < 0) {
        port = 80; // Work around java.net.URL bug
    }
    String scheme = request.getScheme();
    url.append(scheme);
    url.append("://");
    url.append(request.getServerName());
    if (("http".equals(scheme) && (port != 80)) || ("https".equals(scheme) && (port != 443))) {
        url.append(':');
        url.append(port);
    }
    url.append(request.getContextPath());
    return url.toString();
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-02T08:59:12.560

您需要确保将客户端提供`httpd`的标头传递`Host`给 Tomcat。最简单的方法（假设您正在使用`mod_proxy_http`-您没有说）是使用以下方法：

```
ProxyPreserveHost On 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T03:24:25.123

使用我在这个演示 JSP 中所做的事情怎么样？

```
<%
  String requestURL = request.getRequestURL().toString();
  String servletPath = request.getServletPath();
  String appURL = requestURL.substring(0, requestURL.indexOf(servletPath));
%>
appURL is <%=appURL%> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-06T22:18:41.390

也许与这个问题无关。如果您使用的是 tomcat，则可以在请求标头中指定任何 Host 字符串，甚至是 javascript 之类的`<script>alert(document.cookie);</script>`

然后它可以显示在页面上。：

```
<p> host name is : <%= request.getServerName() %> </p> 
```

所以你需要在使用它之前进行**验证。**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-30T19:04:43.623

这确实是非常有问题的，因为有时您甚至不知道您希望成为完全合格域的主机已被删除到哪里。@rickz 提供了一个很好的解决方案，但这是我认为更完整的另一个解决方案，涵盖了许多不同的 url：

基本上，您先剥离协议（http://、https://、ftp://、...），然后是端口（如果存在），然后是整个 URI。这为您提供了顶级域和子域的完整列表。

```
String requestURL = request.getRequestURL().toString();
String withoutProtocol = requestURL.replaceAll("(.*\\/{2})", "")
String withoutPort = withoutProtocol.replaceAll("(:\\d*)", "") 
String domain = withoutPort.replaceAll("(\\/.*)", "") 
```

我在 scala 中使用内联方法定义做到了这一点，但上面的代码更冗长，因为我发现在纯 java 中发布解决方案更好。因此，如果您为此创建方法，则可以将它们链接起来以执行以下操作：

```
removeURI(removePort(removeProtocol(requestURL))) 
```****

# excel - 如何动态创建命名范围？

> ID：10407208
> 
> 赞同：0
> 
> 时间：2012-05-02T03:08:47.217
> 
> 标签：excel, list, dynamic, range

我正在尝试创建可以动态扩展的动态范围，但事实证明这很难做到。这个想法是创建两个下拉列表。第一个将根据第一行中的列数动态填充。如果您有 10 个列标题，您将获得 10 个选项。如果添加 3，您现在可以从下拉列表中选择 13 个选项，依此类推。

下一步是根据您在第一步中选择的内容填充另一个列表。因此，如果我选择了作为第 3 列标题的选项，我希望能够仅选择第 3 列中的选项。如果我从第一个列表中选择对应于第 5 列的标题，我将获得列中的所有值5等

我查看了命名范围，并成功地创建了一个动态范围来填充第一个列表中的标题，但我对如何在第二个列表中引用正确的列有点困惑。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:43:20.517

看看 Debra Dalgleish 的[Contextures](http://www.contextures.com/xldataval02.html)网站。她在依赖列表上有很多好材料，包括动态列表。

# nhibernate - 在 SharpArchitecture 中使用 Npgsql 时出现的问题

> ID：10407212
> 
> 赞同：1
> 
> 时间：2012-05-02T03:09:51.627
> 
> 标签：nhibernate, postgresql, npgsql, sharp-architecture

在 SharpArchitecture 中使用 Npgsql 时，有没有人可以帮助我。我很沮丧。我使用了 Postgresql 8.4、Npgsql 2.0.11、SharpArchitecture 2.0.0.0 和 Visual Studio 2010。

我的示例项目名为“成功”。

1）我在每个项目中都引用了Npgsql驱动，并配置我的NHibernate.config如下，我觉得没有问题：

```
<property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
  <property name="connection.driver_class">NHibernate.Driver.NpgsqlDriver</property>
  <property name="dialect">NHibernate.Dialect.PostgreSQLDialect</property>
  <property name="connection.connection_string">
    Server=localhost;Database=***;Encoding=UNICODE;User ID=***;Password=***;
  </property> 
```

2）我的数据库域文件如下，一个表名student(sno, sname, sage)，sno是PK和键入的字符串：

```
//student.cs
using System.Collections.Generic;
using SharpArch.Domain.DomainModel; 
namespace success.Domain {
public class student : Entity
{
        public student() { }
        public virtual string sno { get; set; }
        public virtual System.Nullable<int> sage { get; set; }
        public virtual string sname { get; set; }
    }
}

//studentMap.cs
using FluentNHibernate.Automapping.Alterations;
namespace success.Domain {
public class studentMap : IAutoMappingOverride<student>
{
    public void Override(FluentNHibernate.Automapping.AutoMapping<student> mapping)
    {
        mapping. Table("student");
        mapping.LazyLoad();
        mapping.Id(x => x.sno).GeneratedBy.Assigned().Column("sno"); 
   //I don't used Id but sno as the PK, and sno is typed string.
        mapping.Map(x => x.sage).Column("sage");
        mapping.Map(x => x.sname).Column("sname");
    }
}
} 
```

3）为了使用非Id列表，我删除了默认的MyEntity1.cs，并修改了AutoPersistenceModelGenerator.cs如下：

```
...
public AutoPersistenceModel Generate()
    {
        var mappings = AutoMap.AssemblyOf<studentMap>(new AutomappingConfiguration())
            .UseOverridesFromAssemblyOf<studentMap>()    //alter AutoMapping Assembly
            .OverrideAll(map => { map.IgnoreProperty("Id"); })  // ignore id property, and the program recognize the "sno" as the PK, test OK
... 
```

4）在Tasks项目中，我创建了接口IStudentRepository.cs和类StudentRepository.cs，修改了NHibernateRepository，以便通过“sno”获取记录。

```
//IStudentRepository.cs 
using success.Domain;
using SharpArch.NHibernate.Contracts.Repositories;
namespace success.Tasks.IRepository
{
public  interface IStudentRepository:INHibernateRepository<student>
{
    student GetStudentFromSno(string sno);
}
}

//StudentRepository.cs 
using SharpArch.NHibernate;
using success.Domain;
using success.Tasks.IRepository;
using NHibernate;
using NHibernate.Criterion;
namespace success.Tasks.Repository
{
public class StudentRepository:NHibernateRepository<student>,IStudentRepository
{
    public student GetStudentFromSno(string sno)    //define a new method to fatch record by sno
    {
        ICriteria criteria = Session.CreateCriteria<student>()     
            .Add(Expression.Eq("sno", sno));     
        return criteria.UniqueResult() as student;
    }
}
} 
```

5）在MVC项目中，创建StudentController.cs并使用StudentRepository代替NHibernateRepository，一些关键代码如下：

```
 ...
 public ActionResult Index()
    {
        var students = this.studentRepository.GetAll();
        return View(students);
    }

    private readonly StudentRepository studentRepository;

    public StudentsController(StudentRepository studentRepository)
    {
        this.studentRepository = studentRepository;
    }

    [Transaction]
    [HttpGet]
    public ActionResult CreateOrUpdate(string sno)
    {
        student s = studentRepository.GetStudentFromSno(sno);
        return View(s);
    }

    [Transaction]
    [ValidateAntiForgeryToken]
    [HttpPost]
    public ActionResult CreateOrUpdate(student s)
    {
        if (ModelState.IsValid && s.IsValid())
        {
            studentRepository.SaveOrUpdate(s);
            return this.RedirectToAction("Index");
        }
        return View(s);
    }

    [Transaction]
    [ValidateAntiForgeryToken]
    [HttpPost]
    public ActionResult Delete(string sno)
    {
        var s = studentRepository.GetStudentFromSno(sno);
        if (s == null)
            return HttpNotFound();
        studentRepository.Delete(s);
        return this.RedirectToAction("Index");
    }
... 
```

6）我创建了视图，到目前为止一切正常，但在最后一步，项目显示错误如下。但是，将项目更改为 SQL Server 2005 平台时没有问题。错误出现在 Global.asax.cs：

```
...
private void InitialiseNHibernateSessions()
{
NHibernateSession.ConfigurationCache = new NHibernateConfigurationFileCache();
//the follow line codes make error when using Npgsql, but no error when using SQL Server 2005 
NHibernateSession.Init(
this.webSessionStorage,
new[] { Server.MapPath("~/bin/success.Infrastructure.dll") },
new AutoPersistenceModelGenerator().Generate(),
Server.MapPath("~/NHibernate.config"));
}
... 
```

错误详情如下：

```
System.NotSupportedException was unhandled by user code
  Message=Specified method is not supported.
  Source=Npgsql
  StackTrace:
   at Npgsql.NpgsqlConnection.GetSchema(String collectionName, String[] restrictions) in C:\projects\Npgsql2\src\Npgsql\NpgsqlConnection.cs:line 970
   at Npgsql.NpgsqlConnection.GetSchema(String collectionName) in C:\projects\Npgsql2\src\Npgsql\NpgsqlConnection.cs:line 946
   at NHibernate.Dialect.Schema.AbstractDataBaseSchema.GetReservedWords()
   at NHibernate.Tool.hbm2ddl.SchemaMetadataUpdater.GetReservedWords(Dialect dialect, IConnectionHelper connectionHelper)
   at NHibernate.Tool.hbm2ddl.SchemaMetadataUpdater.Update(ISessionFactory sessionFactory)
   at NHibernate.Impl.SessionFactoryImpl..ctor(Configuration cfg, IMapping mapping, Settings settings, EventListeners listeners)
  InnerException: 
```

请帮我！由于缺乏最后的努力，我觉得没有成功。我很沮丧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:37:07.983

你看过[这个](https://stackoverflow.com/questions/5532236/c-sharp-postgres-fluentnhibernate-configuring-npgsql-throws-notsupportedex)吗？

将“ `hbm2ddl.keywords`”，“ `none`”添加到您的`Nhibernate.config`，看看是否可以解决您的问题。

# ios - CGContextAddPath 控制台错误？

> ID：10407213
> 
> 赞同：0
> 
> 时间：2012-05-02T03:09:53.673
> 
> 标签：ios, console, cgcontext

在我的应用程序中，我在控制台中收到以下错误：

```
May  1 22:06:59 iPhone-4S app[93660] <Error>: CGContextAddPath: invalid context 0x0
May  1 22:06:59 iPhone-4S app[93660] <Error>: clip: invalid context 0x0 
```

唯一可能发生这种情况的区域是以下两种方法之一，用于调整 UIImage 的大小或添加圆角边缘。以下是方法：

```
- (UIImage*)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize {
    // Create a graphics image context
    UIGraphicsBeginImageContext(newSize);

    // Tell the old image to draw in this new context, with the desired
    // new size
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];

    // Get the new image from the context
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();

    // End the context
    UIGraphicsEndImageContext();

    // Return the new image.
    return newImage;
}

- (UIImage*)roundCorneredImage: (UIImage*)orig radius:(CGFloat) r {
    UIGraphicsBeginImageContextWithOptions(orig.size, NO, 0);
    [[UIBezierPath bezierPathWithRoundedRect:(CGRect){CGPointZero, orig.size} 
                                cornerRadius:r] addClip];
    [orig drawInRect:(CGRect){CGPointZero, orig.size}];
    UIImage* result = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return result;
} 
```

这两种方法都是从 UIViewControllers 中调用的，我很肯定 UIImage 不为零。

发生这种情况有什么原因吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T05:49:07.707

确保上下文大小不为零。

# .net - 如何正确设置开发服务器以在 Intranet 上使用

> ID：10407214
> 
> 赞同：0
> 
> 时间：2012-05-02T03:09:58.283
> 
> 标签：.net, iis, networking, asp-classic, dns

别着急，你可能会说这属于服务器故障，但我是从开发人员的角度来问这个问题，而不是系统管理员。我可以获得不同的结果，并查看它在代码中的哪个位置（有点）！我不是系统管理员，但我觉得其他开发人员可能会遇到同样的问题（我们这些在没有 IIS 服务器管理员的小公司中的开发人员）。我在 SF 上问了一个类似的问题，但他们并没有真正与我的问题联系起来。

作为开发人员，我很难找到一种快速简便的方法来设置 IIS/ASP 开发服务器以供本地网络上的多个人使用。整个想法是让它不在现场机器上。它只是在我们的一张桌子上运行的一台小型笔记本电脑。

我以为这很容易。我最初所做的是 1) 修复 IP 地址 2) 将我的各种开发站点的绑定编辑为 10.0.1.115 在不同的端口（如 2020 等）上

**这似乎在一段时间内工作得很好。编码，编码，编码......但是随着我的 C# 页面变得越来越复杂，响应时间越来越长，响应变得越来越大，奇怪的奇怪事情开始发生。** 一些症状：

1) 我会在 Fiddler 中无缘无故地看到对错误 IP 地址（如 10.0.1.75）的不相关请求。然后它会一遍又一遍地重试，阻止浏览器 UI。我搜索了所有代码，所有主机文件，没有任何地方引用此 IP。这个请求似乎让浏览器挂起“等待 10.0.1.75 并且浏览器会旋转，即使在提琴手*中原始请求完成并且它实际上下载了链接的 CSS 文件*!!! WTF？

2) 响应时间慢。某些页面非常慢。我把它放在全国各地的生产服务器上，它的加载速度提高了 10 倍。

3）真正奇怪的事情：

```
 // C#:

   // I can see this before the odd request gets made! weird, right?
   Response.Write("hello"); 

   // then after see "hello", fiddler says request is made to some stupid unrelated ip    

   Response.Write(strOutput);
   // then I never see this output string (a bunch of HTML) rendered in the browser
   // it just spins on "hello" page asking for the wrong IP address in the gray status bar
   // BUT it shows up as proper HTML in fiddler, and also downloads all the CSS
   // that was referenced to by the HTML 
```

就像我说的，我可以将它部署到具有适当域的站点，并且一切正常，使用基本完全相同的 webconfig！

我在另一个站点上的另一个站点上遇到了类似的奇怪/缓慢的行为，该站点在生产中也可以正常工作（并且是完全不同的代码风格）。

是的，我已经在多台机器上尝试过使用和不使用代理。

简单（简短的 C# 页面可以正常工作）。

花了很长时间来挖掘这个，但这里没有真正的答案： [https ://serverfault.com/questions/216093/site-loads-very-slow-if-i-use-ip-and-works-normal-when-i -使用域名-为什么](https://serverfault.com/questions/216093/site-loads-very-slow-if-i-use-ip-and-works-normal-when-i-use-domain-name-why)

我不在乎这是否会被否决而你称我为 doofi。为此，我已经用头撞墙了 6 个小时。

我不应该使用IP地址吗？我应该设置自己的 DNS 而不是只使用固定 IP 吗？我不想弄乱我的网络并随机设置 DNS ......呃。

**更新**

所以看起来它可能是主机的事情？我查看了同一开发服务器上的另一个应用程序，它获得了 302 将 HTML 链接文件重定向到不正确的 IP！但只是根目录，而不是整个文件名，比如 10.0.1.75 而不是我预期的 10.0.1.75/somejsfile.js。在我的代码中没有任何地方这样做......使用固定IP有什么奇怪的吗？

所以这解释了为什么页面不会呈现，因为 DOM 没有完全构建......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:18:16.947

我不会为使用不同的端口而烦恼。在您的 DNS 服务器中，为 *.dev.mycompany.com 添加一个条目以指向感兴趣的 IP。如果您不想弄乱您的 DNS，您可以修改 C:/Windows/System32/Drivers/Etc/Hosts 文件中的主机文件，如果您无权访问您的感兴趣的每个开发网站，请添加一个条目DNS 服务器。如果你走这条路，你必须在每台开发机器上执行此操作。仅供参考，以管理员身份打开记事本并打开文件，然后在 Vista 上保存权限问题。

在开发机器的 IIS 设置中，将 website1.dev.mycompany.com、website2.dev.mycompany.com 添加到每个相应网站的绑定中。

然后，当您准备好进行生产时，您只需将 website1.dev.mycompnay.com 更改为 website1.mycompany.com。您的 DNS 应处理 website1.mycompnay.com。您的 DNS 或主机文件可用于确定您的 website1.dev.mycompany.com，具体取决于您的限制或您希望如何处理。

换句话说，您在代码中的任何地方都不依赖 IP 或端口。一切都在使用 DNS 解析。这仅取决于您的解决方案在哪里...在公司DNS服务器上...或在使用主机文件的每台开发机器上。

我为相对较小的公司工作，这就是我们处理这些问题的方式。要么工作。DNS 是最灵活的，因为它不需要在每台开发机器上进行更改，但是当只有 1-3 名开发人员在网站上工作时，我们使用了主机文件方法。

顺便说一句，我什至使用生产 SQL Server 上的主机文件来访问我们网络之外的链接服务器，这样我就可以给它一个复制所需的特定名称。可能不受 MS 支持的支持，但它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T03:23:00.077

可能是检查您的防火墙或代理配置可能会揭示导致问题的原因。

# mercurial - hg serve - 试图以访问权限禁止的方式访问套接字

> ID：10407216
> 
> 赞同：3
> 
> 时间：2012-05-02T03:10:26.317
> 
> 标签：mercurial

我确信这可能有几个原因，但我找到了其中一个：我使用索尼 VAIO，当您的机器上安装并运行“VAIO Care”时，它会阻塞端口 8000 并导致此错误每当您尝试“hg 服务”您的存储库之一时就会发生。具体来说，手动终止 VCsystray.exe 会导致此错误在执行“hg serve”时停止。我想如果其他人遇到同样的问题，我应该传递这些信息。

# javascript - 从变量中删除数据

> ID：10407220
> 
> 赞同：0
> 
> 时间：2012-05-02T03:10:56.617
> 
> 标签：javascript

我有一个携带信息的变量，但我希望能够以某种方式删除信息。

我试图设置 .length = 0 但这似乎不起作用......

变量的当前数据（示例数据为）：

```
var data = {"1":{"7":["310"],"22":["309"]}} 
```

英文是：

```
var data = {"X":{"Y":["ID"],"Y":["ID"]}} 
```

所以如果我想删除：

```
X: 1 Y : 22 
```

数据的结果将是：

```
var data = {"1":{"7":["310"]}}; 
```

这是我尝试过的：

```
data[X][Y].length = 0; 
```

但这似乎不起作用，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:14:05.383

```
js> var data = {"1":{"7":["310"],"22":["309"]}}
js> data
({1:{7:["310"], 22:["309"]}})
js> delete data[1][22]
true
js> data
({1:{7:["310"]}}) 
```

# c++ - 如何检查数组中的所有值是否彼此相等。C++

> ID：10407224
> 
> 赞同：1
> 
> 时间：2012-05-02T03:11:10.317
> 
> 标签：c++, validation, loops

我想问题是......它并不是说所有的总和都是相等的，即使它们是相等的。我知道，这是一些糟糕的编程。xD 我会在我的问题旁边放一些星星。

谢谢您的帮助。

```
#include <iostream>

using namespace std;

//function that passes a variable through and checks and sees if that variable has been used before.
    bool checkArray(int pass[5][5], int toCheck)
    {
        bool check = false;
        for(int i = 0; i < 5; i++)
        {
            for(int j = 0; j < 5; j++)
            {
                if(pass[i][j] == toCheck)
                {
                    check = true;
                }
            }
        }
    return check;
    }

int main(){
bool allTrue;
int array[5][5] = {0};
int num;
int count=0;
int arraySums[12];

    for(int i = 0; i < 5; i++)
        {
        for(int j = 0; j < 5; j++)
            {
            do //    do while executes when number is 1-25, and a number has not been found when run through the function to check if it is found in the array.
                {
                cout << "Please enter a number that will go in slot (" << i + 1 << ")(" << j + 1 << "): ";
                cin >> num;
                }
            while(((num < 1) || (num > 25)) || (checkArray(array, num) ==  true));

            array[i][j] = num;
        }
    }

//populate the arraySums Array.
//for(int i=0; i<2)

    for(int i = 0; i < 5; i++) // prints out array
    {
        for(int j = 0; j < 5; j++)
        {
            cout << " | " << array[i][j] << "  ";
        }
    cout << endl;
    count++;
    }

//for horizontal sums
arraySums[0]=array[0][0] + array[0][1] + array[0][2] + array[0][3] + array[0][4];
arraySums[1]=array[1][0] + array[1][1] + array[1][2] + array[1][3] + array[1][4];
arraySums[2]=array[2][0] + array[2][1] + array[2][2] + array[2][3] + array[2][4];
arraySums[3]=array[3][0] + array[3][1] + array[3][2] + array[3][3] + array[3][4];
arraySums[4]=array[4][0] + array[4][1] + array[4][2] + array[4][3] + array[4][4];

//for vertical sums
arraySums[5]=array[0][0] + array[1][0] + array[2][0] + array[3][0] + array[4][0];
arraySums[6]=array[0][1] + array[1][1] + array[2][1] + array[3][1] + array[4][1];
arraySums[7]=array[0][2] + array[1][2] + array[2][2] + array[3][2] + array[4][2];
arraySums[8]=array[0][3] + array[1][3] + array[2][3] + array[3][3] + array[4][3];
arraySums[9]=array[0][4] + array[1][4] + array[2][4] + array[3][4] + array[4][4];

//for diagonal sums
arraySums[10]=array[0][0] + array[1][1] + array[2][2] + array[3][3] + array[4][4];
arraySums[11]=array[0][4] + array[1][3] + array[2][2] + array[3][1] + array[4][0];

//to display horizontal sums
int count2=0;
for(int i = 0; i<5; i++)
{
    cout << "Horizontal sum for row: " << count2+1 << " is " << arraySums[i] << endl;
    count2++;
}

//to display the vertical sums.
count2=0;
for(int i = 5; i<10; i++)
{
    cout << "Vertical sum for row: " << count2+1 << " is " << arraySums[i] << endl;
    count2++;
}

//to display both diagonal sums
cout << "The diagonal sum from left to right is: " << arraySums[10] << endl;
cout << "The diagonal sum from right to left is: " << arraySums[11] << endl;

   //************************************************************************************************************* 
for(int i=0; i<13; i++)
{
    if(!(arraySums[i]==arraySums[i+1]))
    {
        allTrue=false;
        break;
    }

}

if(allTrue==true)
{
    cout<< "All the values are equal to each other." << endl;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:20:04.320

在循环的最后一次迭代中，您正在比较`arraySums[12]==arraySums[13]`。这个数组只有 12 个值，编号从 0-11。

你的 for 循环应该是

```
for(int i=0; i<11; i++) 
```

是的，那是 11。您只能在 12 个数据集之间进行 11 次比较，否则您将最后一个与什么进行比较？

编辑：`allTrue`未初始化的答案已经消失，所以我会在这里说。你必须初始化`allTrue`

```
bool allTrue = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:01:19.320

标准算法好吗？

如果是这样，您可以尝试 count 或 search_n。

计数版本： bool bAllTrue = (count(array[0][0], array[5][0], array[0][0]),25);

search_n 版本：bAllTrue = search_n(&array[0][0], &array[5][0], array[0][0], 25);

# templates - 我的项目模板有什么问题

> ID：10407226
> 
> 赞同：0
> 
> 时间：2012-05-02T03:11:13.793
> 
> 标签：templates, project, monodevelop

我正在尝试为 MonoDevelop（Android、Console 和 iOS）编写一些项目和文件模板，但似乎无法安装 mpack 文件，在安装 monodevelop 插件管理器的 mpack 文件时，我不断收到此错误：

插件 MonoDevelop.MonoAndroid.2.8.1.2 正在尝试扩展 /MonoDevelop/Ide/About，但没有任何插件定义此扩展点。

这是我的模板，如果你看到任何愚蠢的东西，请告诉我。

谢谢，肯尼。

```
<Runtime>
    <Import file="__PreviewImage.png"/>
    <Import file="__TemplateIcon.png"/>
</Runtime>

<Dependencies>
    <Addin id="::MonoDevelop.Ide" version="2.8"/>
</Dependencies>

<Extension path="/MonoDevelop/Ide/ProjectTemplates">
    <ProjectTemplate id="iFactrCrossPlatformAndroid" file="iFactrCrossPlatformAndroid.xpt.xml" />
    <ProjectTemplate id="iFactrCrossPlatformTouch" file="iFactrCrossPlatformTouch.xpt.xml" />
    <ProjectTemplate id="iFactrAndroid" file="iFactrAndroid.xpt.xml" />
</Extension> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:47:52.940

我假设您的根元素具有正确的属性。如果是这样，该错误似乎表明您在某处有 MonoDevelop.MonoAndroid.dll 的旧副本，并且由于某种原因使插件引擎感到困惑。

另请注意，您需要导入*所有*插件的文件（清单除外）以将它们包含在 mpack 中。

```
<Runtime>
    <Import file="__PreviewImage.png"/>
    <Import file="__TemplateIcon.png"/>
    <Import file="iFactrCrossPlatformAndroid.xpt.xml"/>
    <Import file="iFactrCrossPlatformTouch.xpt.xml"/>
    <Import file="iFactrAndroid.xpt.xml"/>
</Runtime> 
```

# enterprise-library - 将 XmlLogFormatter 与 Enterprise Library 中的 RollingFlatFileTraceListener 一起使用

> ID：10407227
> 
> 赞同：1
> 
> 时间：2012-05-02T03:11:14.367
> 
> 标签：enterprise-library

我正在尝试使用 RollingFlatFileTraceListener 在我的应用程序中与 XmlLogFormatter 一起提供滚动日志，以便日志采用 XML 格式，但是该应用程序似乎不再记录任何内容。

```
<listeners>
  <clear />
  <add name="Rolling Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollingFlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        fileName="C:\Inetpub\logs\rolling.log" rollFileExistsBehavior="Increment" header="~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~" footer="~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~" formatter="Error Formatter"
        rollSizeKB="12499" maxArchivedFiles="3200" traceOutputOptions="None" timeStampPattern="yyyy-MM-dd" rollInterval="Midnight" />
</listeners>
<formatters>
  <clear />
  <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.XmlLogFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" template="Timestamp: {timestamp(local)}&#xA;Message: {message}&#xA;Category: {category}&#xA;Severity: {severity}&#xA;Title:{title}&#xA;Machine: {machine}&#xA;Extended Properties: {dictionary({key} - {value}&#xA;)}" name="Error Formatter" />
</formatters> 
```

由于应用程序不是硬故障，我看不到任何要诊断的错误，但我知道我现在应该看到一些跟踪日志。

**更新**：

目前的进展是我已经能够将 RollingFlatFileTraceListnerData 与 TextFormatter 一起使用，利用模板来指定 XML。到目前为止不起作用的两个项目是

*   该文件没有 XML 声明
*   该文件没有根元素，而是有许多根元素

关于如何将其附加到文件的开头和结尾的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:19:35.140

开箱即用的跟踪侦听器不支持文件头或文件尾的概念。如您所见，它基本上只是附加到文件中。即使您使用了 .NET Framework System.Diagnostics.XmlWriterTraceListener，它也只写入 XML 片段而不是格式良好的 XML 文档。

实现您想要的一种方法是创建一个单独的进程，该进程将存档文件修改为在滚动后格式正确。这种方法的缺点是活动日志文件格式不正确。

如果这是一个问题，那么您可能必须创建一个自定义跟踪侦听器来执行您想要的操作。您可以用最新的 LogEntry 和结束标记覆盖 XML 文档的结束标记（例如 ），而不是简单地附加到日志文件。

[文章Efficient Techniques for Modifying Large XML Files](http://msdn.microsoft.com/en-us/library/aa302289.aspx)中的另一个有趣的方法是创建一个格式良好的 XML 文档，其中包含带有 XML 片段的文档。例如

```
 <?xml version="1.0"?>
  <!DOCTYPE logfile [
  <!ENTITY events    
   SYSTEM "XMLFile1.xml">
  ]>
  <logfile>
    &events;
  </logfile> 
```

# zend-framework - 在 zend 中查看渲染无法按预期正常工作

> ID：10407228
> 
> 赞同：0
> 
> 时间：2012-05-02T03:11:35.150
> 
> 标签：zend-framework

我的 zend 布局和脚本检测良好。但是在我的 IndexController 的 init 函数中，我写 $this->view->render("header.phtml") 它不会在屏幕上显示任何内容，而当我写 echo ($this->view->render(" header.phtml"); 它显示我的 header.phtml 文件。这是我的 IndexController

类 IndexController 扩展 Zend_Controller_Action {

```
public function init()
{
    $layout = $this->_helper->layout();
    //$this->view = $this->getResource('View');
    echo ($this->view->render("header.phtml"));
        //echo"<pre>";
        //var_dump($this->view);
        //var_dump(APPICATION_PATH);
}

public function indexAction()
{
    // action body
    echo "In default index con";
} 
```

}

此外，当我将我的 url 提供给/mypath/index 时，它不会显示我只是在回显的简单行“我在索引控制器中”。在我的引导程序中，这是我的 Zend_Layout 设置。

```
 Zend_Loader::loadClass('Zend_View');
$this->view = new Zend_View();
$this->view->setEncoding('UTF-8');
$this->view->setScriptPath($this->root .'/application/default/views/scripts');
    $viewRenderer=new Zend_Controller_Action_Helper_ViewRenderer();
     // Zend_Controller_Action_HelperBroker::addHelper($viewRenderer);
     // $view->setScriptPath($this->root.'/'.$theme.'/views/scripts/');
     //$view->setScriptPath($this->root.'/application/default/views/scripts/');
     $this->view->addScriptPath($this->root.'/application/admin/views/scripts');
     $this->view->addScriptPath($this->root.'/application/business/views/scripts');
    // $this->view->setHelperPath($this->root .'/application/default/views/helpers');
     $this->layout = Zend_Layout::startMvc(
        array(
                'layoutPath' => $this->root . '/application/default/views/'.$crt_theme.'/layouts',
                'layout' => 'layout'
                )
                );
        $this->registry->set("theme", $crt_theme); 
```

变量 $crt_theme 设置为“默认”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T05:21:32.630

Rob 的回答是正确的，尽管您可能需要更多信息，因为您似乎正在努力使这变得复杂。
ZF 在用作 MVC 时有放置布局和使用它们的默认值的地方。

如果您使用 Zend_Tool 命令行界面，请从 commmand: 开始，`zf enable layout`该工具会将默认目录和默认*layout.phtml*添加到您的项目中。
在*application.ini*中，它将添加以下行：

```
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/" 
```

并在该路径上添加`layout.phtml`
文件

```
resources.layout.layout = master 
```

您可以想到使用此文件的多种方法，但这里是我如何使用它的示例。*我喜欢在我的application.ini*
文件 中设置我的项目默认值，因此如果我需要更改任何内容，这很容易。

 *```
View Settings
;*************
resources.view[]=
resources.view.charset = "UTF-8"
resources.view.encoding = "UTF-8"
resources.view.doctype = "HTML5"
resources.view.language = "en"
resources.view.contentType = "text/html; charset=UTF-8" 
```

然后在我的引导程序中，我设置了我想要使用的视图，我在这里进行设置，以便如果我有多个布局（我通常这样做），很容易在一个地方更改 css 或 js 文件。

```
protected function _initView() {
        //Initialize view
        $view = new Zend_View();

        $view->addHelperPath('/../library/Application/View/Helper');

        $view->doctype(Zend_Registry::get('config')->resources->view->doctype);

        $view->headTitle('Our Home');

        $view->headMeta()->appendHttpEquiv('Content-Type', Zend_Registry::get(
                        'config')->resources->view->contentType);
        $view->headLink()->setStylesheet('/css/normalize.css');
        $view->headLink()->appendStylesheet('/css/blueprint/src/liquid.css');
        $view->headLink()->appendStylesheet('/css/blueprint/src/typography.css');
        $view->headLink()->appendStylesheet(
                '/javascript/mediaelement/build/mediaelementplayer.css');
        $view->headLink()->appendStylesheet('/css/main.css');
        $view->headLink()->appendStylesheet('/css/nav.css');
        $view->headLink()->appendStylesheet('/css/table.css');

        //add javascript files
        $view->headScript()->setFile('/javascript/mediaelement/build/jquery.js');
        $view->headScript()->appendFile('/javascript/modernizr.js');

        //add it to the view renderer
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
                        'ViewRenderer');
        $viewRenderer->setView($view);
        //Return it, so that it can be stored by the bootstrap
        return $view;
    } 
```

请注意所有这些 headLink()、headScript() 和 docType() 条目，这些是为[占位符](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial)设置数据的位置，将在布局中使用。

现在布局，来自其他基于动作的脚本的实际内容通常由占位符呈现`$this->layout()->content`

```
<?php
echo $this->doctype() . "\n";//placeholder
?>
<html>
    <head>
        <title></title>
        <?php echo $this->headMeta() . "\n" ?><!-- displays all meta data passed -->
        <?php echo $this->headLink() . "\n" ?><!-- displays all links passed -->
        <?php echo $this->headscript(). "\n"?><!-- displays all scripts passed -->
    </head>
    <body>
        <section class="container">
            <header class="block">
                <hgroup id="header" class ="column span-24">
                    <h1>Our Home</h1>
                </hgroup>
                <nav>
                    <div id="nav" class="column span-24">
                        <?php echo $this->layout()->nav ?>&nbsp;<!-- Custom Placeholder -->
                    </div>
                </nav>
            </header>
            <section class="block">
                <div id="main" class="column span-18 border">
                    <div id="flash">
                        <?php
                        //flash messenger display location
                        if (count($this->messages) > 0) {
                            printf("<h3 id='flash'>%s</h3>", $this->messages[0]);
                        }
                        ?>
                    </div>
                    <?php echo $this->layout()->content; ?><!-- Default placeholder, where views are rendered -->
                </div>
                <aside id="sidebar" class="column span-4 last">
                    <?php echo $this->layout()->search ?><!-- Custom placeholder -->
                    <div id="subNav">
                        <?php echo $this->layout()->subNav ?>&nbsp;<!-- Custom placeholder -->
                    </div>
                    <div id="adminMenu">
                        <h4>Administration Links</h4>
                        <?php echo $this->layout()->adminMenu ?>&nbsp;<!-- Custom placeholder -->
                    </div>
                </aside>
            </section>
            <footer class="block">
                <div id="footer" class="column span-24">
                    <p>Created with <a href="http://framework.zend.com/">Zend Framework. &COPY; </a></p>
                </div>
            </footer>
        </section>
        <?php echo $this->inlineScript() ?><!-- placeholder -->
    </body>
</html> 
```

希望这可以帮助！

**[编辑]** 还有一件事，这似乎总是下一个问题。*“如何更改我的控制器/操作中的默认布局？”*

要从控制器更改布局，您通常会使用 preDispatch() 方法进行更改，并将新布局的名称传递给布局助手。

```
$this->_helper->layout->setLayout('myOtherLayout'); 
```

这样做会改变控制器中每个动作的布局。为了更有选择性，您可以使用条件，例如：

```
if ($this->getRequest()->getActionName() == 'player') {
            $this->_helper->layout->setLayout('player');//reset layout
            //add 2 new headscripts
            $this->view->headScript()->appendFile(
                    'http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js'
                    );
            $this->view->headScript()->appendFile(
                    '/javascript/mediaplayer/jwplayer.js'
                    );
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:02:50.033

`render()`正在按预期工作；它返回一个字符串，你应该然后`echo`。

然而，直接在控制器中渲染是非常不寻常的。至少，您应该从 渲染您的页眉和页脚`views/scripts/index/index.phtml`，尽管使用[`Zend_Layout`](http://framework.zend.com/manual/en/zend.layout.html)会更好。如果您正在使用`Zend_Application`，则`Zend_Layout`只需添加以下内容即可开始使用：

```
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/" 
```

到你的`application/config/application.ini`文件。然后，您需要创建一个`application/layouts/scripts/layout.phtml`看起来像这样的文件：

```
<?php
$this->headMeta()->appendHttpEquiv('Content-Type', 'text/html;charset=utf-8');
$this->headTitle()->setSeparator(' - ');
$this->headTitle('My website');
?>
<!DOCTYPE html>
<html> 
<head>
    <?php echo $this->headMeta(); ?> 
    <?php echo $this->headTitle(); ?>
    <!-- Other <head> elements and view helpers here -->
</head>
<body>
<div id="content">
    <?php echo $this->layout()->content; ?>
</div>
</body>
</html> 
```*

# python - 如何在 qlistwidget pyqt4 python 中添加带有文本的图像？

> ID：10407230
> 
> 赞同：2
> 
> 时间：2012-05-02T03:11:57.880
> 
> 标签：python, pyqt4, qlistwidget

如何在 pyqt4 python 的 qlistwidget 中添加带有文本的图像/图标？我想像聊天系统一样添加带有文本的图标。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T04:03:03.087

我现在已经尝试过了，它可以工作，假设您在与此脚本相同的文件夹中有一个名为 tick.png 的文件。

```
import sys
from PyQt4 import QtGui, QtCore
from PyQt4.QtGui import QApplication, QDialog, QListWidgetItem, QListWidget, QIcon

def main():

    app = QtGui.QApplication(sys.argv)
    window = QDialog()

    list = QListWidget( window )

    itm = QListWidgetItem( "Tick" );
    itm.setIcon(QIcon(r"tick.png"));
    list.addItem(itm);

    window.show( )
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

类似聊天的图标系统可能与此不同，但现在我看不到有一种方法可以让 QListWidgetItem 具有多个笑脸和文本。

您可能会将笑脸视为 QListWidgetItem 的一种特殊情况，其中文本为空白且仅存在图标。

另一种解决方案是使用只读 QTextEdit 作为聊天板，并让用户在单独的可编辑 QTextEdit 中键入其文本 + 图标 + 文本（等）。然后，当他按下发送按钮时，将他键入的所有内容附加到只读 QTextEdit。

```
import sys
from PyQt4 import QtGui, QtCore
from PyQt4.QtGui import QApplication, QDialog, QListWidgetItem, QListWidget, QIcon, QTextEdit, QTextDocumentFragment

def main():

    app = QtGui.QApplication(sys.argv)
    window = QDialog()

    list = QListWidget( window )

    textEditor = QTextEdit( window );
    textEditor.setReadOnly( True )
    tick_icon = QTextDocumentFragment.fromHtml(r"<img src='tick.png'>");

    textEditor.insertPlainText ( " ValiumKnight writes: " )
    textEditor.textCursor().insertFragment(tick_icon);
    textEditor.insertPlainText ( " Hello World " )
    textEditor.textCursor().insertFragment(tick_icon);
    textEditor.textCursor().insertFragment(tick_icon);
    textEditor.textCursor().insertFragment(tick_icon);

    window.show( )
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

再见！

# image - 包含图像是否有效 instead of ? Inspired by this question, where the poster casually states as fact that should be used instead of  问问题 问问题 2012-05-02T03:12:49.123 14322 次 This question shows research effort; it is useful and clear 17 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Inspired by this question, where the poster casually states as fact that should be used instead of  to embed images in HTML documents. I'm developing a web app at the moment, and, being a perfectionist, I try to make it all shiny and compliant with all the standards. As far as I know, the  tag is to be deprecated in the upcoming standards for xHTML, and as nowadays even IE is able to handle properly, I wanted to use the tag for all the images on my site It became clear that the "upcoming standards" the poster was talking about was the abandoned XHTML2 spec, which didn't even formally deprecate  anyway. (Although there were apparently rumors to that effect.) To the best of my knowledge, I've not seen anyone in the web development community advocating for the usage of the general-purpose tag over the arguably more semantic and definitely more compatible  tag. Is there a good reason to use instead of ? Should even be used at all in place of  – what might this break? Download FTP directory contents to ios I have a website, let's say it's "http://www.jwilkthings.com/stuff" I have a bunch of .txt files stored on this website, i.e. "http://www.jwilkthings.com/stuff/text1.txt" What I'm wanting to do is find a way in iOS to download all of those text files without knowing what the document name is. I can already retrieve them manually as long as I have a file name, but I would rather just get all of them at once and put them in the documents directory if possible. I currently use FileZilla to upload all of the text files, so I can use FTP if needed. imagehtmlobject-tag 4 4 回答 4 This answer is useful 18 回答标题中的问题：是的，它当然是有效的。元素的有效性object甚至不取决于嵌入的数据类型。如果您要问它是否正确，那么答案是肯定的，规范中没有任何内容会禁止或建议反对它。 在使用嵌入图像的可能原因中object，最实用的是它允许后备内容包含 HTML 标记，例如标题、列表、表格和短语标记。该img元素允许您仅将纯文本指定为后备内容 - 甚至无法指定分节符。 出于可访问性的原因，任何图像都应具有要呈现的后备内容，例如，当文档用于非可视浏览（屏幕阅读器、盲文等）或图像由于某种原因未显示时。对于任何内容丰富的图像（例如，组织结构图或描述复杂流程的绘图），后备内容需要很长并且需要具有某种结构。 但是，很少object用于嵌入图像。后备内容的重要性并未被广泛理解，实际的经济和技术考虑往往会导致后备问题被忽视。此外，object在浏览器中实现缓慢、错误且质量不佳的历史由来已久。直到最近才可以object相当安全地使用图像包含。 哪个元素更具语义性的问题大多是徒劳的，答案通常反映了误解“语义”概念的各种方式。两者img和object均表示包含（嵌入）外部内容。该img元素原则上用于包含图像，无论这意味着什么，尽管它也被用于包含视频。对于object元素，该type属性可用于指定嵌入内容的类型，具体到特定的图像类型，例如type=image/gif，或者它可以保持打开状态。 这意味着该object元素更加灵活：您可以不指定类型，让它在 HTTP 标头中指定。这样，在不改变object元素或嵌入文档的情况下，可以改变嵌入数据的类型；例如，您可以从嵌入内容是图像的简单版本开始，然后将其替换为 HTML 文档（例如包含图像和文本）。 于 2012-05-02T04:23:14.547 回答 This answer is useful 9 我唯一一次看到用于显示图像的对象是在由于某种原因无法加载预期对象时创建“后备”。以W3 规范中的这个例子为例：       The **Earth** as seen from space.    只有尝试通过对象加载图像基本上是从图像中删除语义含义，我认为这是非常糟糕的做法。 于 2012-05-02T03:24:14.647 回答 This answer is useful 5 没有很好的实际理由使用object而不是img. object一直受到不一致和混乱的支持。用于img图像、embedFlash 内容和video/或audio多媒体内容。基本上objectleft 的唯一用途是调用特定的插件。 也就是说，object存在的哲学立场还是很好的。它旨在成为可以包含嵌套后备内容的任何类型内容的通用元素。W3C/ XHTML2有一个非常理想化的 html 路线图，强调句法和语义的纯洁性，并希望href在任何元素上都允许（a消除. 然而，浏览器似乎永远无法以完全通用的方式正确运行。此外，很难为通用元素定义 js API。这就是为什么和是分开的一个重要原因——提供视频不会暴露 js 视频 API。imgobjectobjectobjectvideoaudioobject 但是，XHTML2 输了，HTML5 赢了，HTML5 受宠了img，所以使用img. 于 2012-05-02T03:34:36.560 回答 This answer is useful 0 我遇到了一个在 img 标签上使用对象的真实用例。我正在使用 PlantUML 生成包含工具提示的 SVG。如果我使用 img 标签来包含 img，则本机 SVG 指针事件都不起作用。但是，如果我使用对象标签，presto - 所有的悬停/鼠标悬停行为都按预期工作。 于 2021-10-20T19:41:48.100 回答 Related 1 java - 如何以动态方式操作路径 1 c# - 在调试期间进入 c++/CLI 包装器 dll 和 c# dll，同时在 firebreath 上制作插件 1 php - 显示结果数 Directorypress 列表标签 Wordpress 2 xslt-2.0 - 在 XSLT 转换中加载 XSL 文件和 DTD 文件时出错 2 ios - IOS。为 UITableView didSelectRowAtIndexPath 事件添加相同的第二个操作？ 3 reporting-services - SSRS 表并排 2 java - 休眠二级缓存 - 程序不终止 1 ember.js - ember.js - 在模型钩子中创建 ArrayProxy 1 ios - 使用 NSURLCache 子类在 IOS 中缓存网页 2 c++ - 一个进程在windows中可以拥有的最大线程数是多少 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10407236
> 
> 赞同：17
> 
> 时间：
> 
> 标签：image, html, object-tag

Inspired by [this question](https://stackoverflow.com/q/10375755/201952), where the poster casually states as fact that `<object>` should be used instead of `<img>` to embed images in HTML documents.

> I'm developing a web app at the moment, and, being a perfectionist, I try to make it all shiny and compliant with all the standards. As far as I know, the `<img>` tag is to be deprecated in the upcoming standards for xHTML, and as nowadays even IE is able to handle `<object>` properly, I wanted to use the `<object>` tag for all the images on my site

It became clear that the "upcoming standards" the poster was talking about was the abandoned [XHTML2](http://www.w3.org/TR/xhtml2/) spec, which didn't even formally deprecate `<img>` anyway. (Although there were apparently [rumors](http://www.codingforums.com/archive/index.php/t-77173.html) to that effect.)

To the best of my knowledge, I've not seen anyone in the web development community advocating for the usage of the general-purpose `<object>` tag over the arguably more semantic and definitely more compatible `<img>` tag.

Is there a good reason to use `<object>` instead of `<img>`? Should `<object>` even be used at all in place of `<img>` – what might this break?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-02T04:23:14.547

回答标题中的问题：是的，它当然是*有效*的。元素的有效性`object`甚至不取决于嵌入的数据类型。如果您要问它是否*正确*，那么答案是肯定的，规范中没有任何内容会禁止或建议反对它。

在使用嵌入图像的可能原因中`object`，最实用的是它允许后备内容包含 HTML 标记，例如标题、列表、表格和短语标记。该`img`元素允许您仅将纯文本指定为后备内容 - 甚至无法指定分节符。

出于可访问性的原因，任何图像都应具有要呈现的后备内容，例如，当文档用于非可视浏览（屏幕阅读器、盲文等）或图像由于某种原因未显示时。对于任何内容丰富的图像（例如，组织结构图或描述复杂流程的绘图），后备内容需要很长并且需要具有某种结构。

但是，很少`object`用于嵌入图像。后备内容的重要性并未被广泛理解，实际的经济和技术考虑往往会导致后备问题被忽视。此外，`object`在浏览器中实现缓慢、错误且质量不佳的历史由来已久。直到最近才可以`object`相当安全地使用图像包含。

哪个元素更具语义性的问题大多是徒劳的，答案通常反映了误解“语义”概念的各种方式。两者`img`和`object`均表示包含（嵌入）外部内容。该`img`元素原则上用于包含图像，无论这意味着什么，尽管它也被用于包含视频。对于`object`元素，该`type`属性可用于指定嵌入内容的类型，具体到特定的图像类型，例如`type=image/gif`，或者它可以保持打开状态。

这意味着该`object`元素更加灵活：您可以不指定类型，让它在 HTTP 标头中指定。这样，在不改变`object`元素或嵌入文档的情况下，可以改变嵌入数据的类型；例如，您可以从嵌入内容是图像的简单版本开始，然后将其替换为 HTML 文档（例如包含图像和文本）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-02T03:24:14.647

我唯一一次看到用于显示图像的对象是在由于某种原因无法加载预期对象时创建“后备”。[以W3 规范中的](http://www.w3.org/TR/html401/struct/objects.html#h-13.3.1)这个例子为例：

```
<OBJECT title="The Earth as seen from space" classid="http://www.observer.mars/TheEarth.py">
    <!-- Else, try the MPEG video -->
    <OBJECT data="TheEarth.mpeg" type="application/mpeg">
        <!-- Else, try the GIF image -->
        <OBJECT data="TheEarth.gif" type="image/gif">
            <!-- Else render the text -->
            The <STRONG>Earth</STRONG> as seen from space.
        </OBJECT>
    </OBJECT>
</OBJECT> 
```

只有尝试通过对象加载图像基本上是从图像中删除语义含义，我认为这是非常糟糕的做法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-02T03:34:36.560

没有很好的*实际*理由使用`object`而不是`img`. `object`一直受到不一致和混乱的支持。用于`img`图像、`embed`Flash 内容和`video`/或`audio`多媒体内容。基本上`object`left 的唯一用途是调用特定的插件。

也就是说，`object`存在的哲学立场还是很好的。它旨在成为可以包含嵌套后备内容的任何类型内容的通用元素。W3C/ XHTML2有一个非常理想化的 html 路线图，强调句法和语义的纯洁性，并希望`href`在任何元素上都允许（`a`消除. 然而，浏览器似乎永远无法以完全通用的方式正确运行。此外，很难为通用元素定义 js API。这就是为什么和是分开的一个重要原因——提供视频不会暴露 js 视频 API。`img``object``object``object``video``audio``object`

但是，XHTML2 输了，HTML5 赢了，HTML5 受宠了`img`，所以使用`img`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-20T19:41:48.100

我遇到了一个在 img 标签上使用对象的真实用例。我正在使用 PlantUML 生成包含工具提示的 SVG。如果我使用 img 标签来包含 img，则本机 SVG 指针事件都不起作用。但是，如果我使用对象标签，presto - 所有的悬停/鼠标悬停行为都按预期工作。

# ios - 下载FTP目录内容到ios

> ID：10407238
> 
> 赞同：1
> 
> 时间：2012-05-02T03:13:00.110
> 
> 标签：ios, xcode, ftp

我有一个网站，假设它是“http://www.jwilkthings.com/stuff”

我在这个网站上存储了一堆 .txt 文件，即“http://www.jwilkthings.com/stuff/text1.txt”

我想要做的是在 iOS 中找到一种方法来下载所有这些文本文件，而无需知道文档名称是什么。只要我有文件名，我就可以手动检索它们，但我宁愿一次获取所有文件，如果可能的话，将它们放在文档目录中。我目前使用 FileZilla 上传所有的文本文件，所以如果需要我可以使用 FTP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:03:06.820

解决此问题的正确方法是不使用 FTP（充斥着性能和安全问题），并配置您的 Web 服务器以公开您的客户端可以解析的[目录目录列表。](http://wiki.apache.org/httpd/DirectoryListings)

但这不是你问题的答案。如果您真的希望您的 iOS 应用程序使用 FTP，请查看[Apple 的 SimpleFTP 示例项目](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)。

它很旧，但我只是在 iOS 5 上构建它。[ListController.m](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Listings/ListController_m.html#//apple_ref/doc/uid/DTS40009243-ListController_m-DontLinkElementID_11)文件包含您正在寻找的代码。

![在此处输入图像描述](../Images/9e71632ee813998998b607ad98182fc6.png)

# wpf - Using a StaticResource inside a ListBox.ItemContainerStyle throws exception

> ID：10407243
> 
> 赞同：0
> 
> 时间：2012-05-02T03:13:51.967
> 
> 标签：wpf

The following code throws the exception "System.NullReferenceException was unhandled Message=Object reference not set to an instance of an object. Source=Wizbang":

```
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}">
        <Style.Resources>
            <SolidColorBrush x:Key="SCB" Color="Orange" />
        </Style.Resources>
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True" >
                <Setter Property="Background" Value="{StaticResource SCB}" />
            </Trigger>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="Orange" />
            </Trigger>
        </Style.Triggers>
    </Style>
</ListBox.ItemContainerStyle> 
```

However, if I remove the StaticResource reference in the first Trigger's Setter, and replace it with string value, such as, "Orange", like in the second Trigger, everything works fine.

I cannot figure out why. I use StaticResources similarly in Triggers elsewhere, but it seems that since this is a ListBox.ItemContainerStyle, something works differently.

# facebook - 有没有办法修改从“Like”按钮传输“ref”的参数名称？

> ID：10407247
> 
> 赞同：0
> 
> 时间：2012-05-02T03:14:26.570
> 
> 标签：facebook, social-networking, facebook-social-plugins

“Like”按钮文档中描述了跟踪推荐的方式：

[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

如果您提供了“ref”参数，那么 facebook 将在您网站的 URL 中添加两个参数：

1.  fb_ref
2.  fb_source

有什么方法可以配置 facebook 用来传递这些数据的 URL 参数名称是什么？

我想更改它的原因是为所有社交网络使用相同的“ref”参数名称（我没有调查，但其他一些社交网络可能有不同的参数名称，我真的不喜欢支持整个品种的想法其中）。

非常欢迎任何反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:01:44.047

不，没有办法改变这一点 - 您必须单独记录每个网络，或者只是将这些值硬编码到 Facebook 并`ref=`在其他地方使用

# php - 使用 Ajax 在简单的 Jquery 事件上触发 PHP

> ID：10407248
> 
> 赞同：4
> 
> 时间：2012-05-02T03:14:43.040
> 
> 标签：php, ajax, jquery

根据单击的 div 的 ID，我希望能够更改嵌入链接。

此代码以前在我使用表单设置页面时有效。

```
<embed src=
  "/<?php
     if (isset($_POST['playlist'])) { // if ANY of the divs were clicked
         echo $_POST['playlist']; // echo the choice
     }else{
         echo "5125962"; // As a default playlist
     }
?>"> 
```

但是我的客户不喜欢页面刷新。在此基础上，我放弃了这个 JavaScript 的表单

```
$(document).ready(function() { 
    $(".playlist").click(function(){
      var playlist = $(this).attr('id');
      $.ajax({
        url: '/update/apps/music.php',
        data : playlist,
        type : 'POST',
        success : function(data) {
          $(".PlaylistHolder").load('/update/apps/music.php');
        }
      });
    }); 
}); 
```

代替 .ajax 函数，我也尝试过

```
$(".PlaylistHolder").load('/update/apps/music.php', playlist); 
```

这个想法是代替整个页面刷新，它会重新加载“PlayListHolder”div的内容。我没有收到任何语法错误，但我的变量不会继续存在。在我的 PHP 中，我也尝试了 $_GET 和 $_REQUEST。有任何想法吗？

通常我自己修复我的代码，但考虑到调试的性质，我想如果我再用一次默认歌曲，我会扔掉的。多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:24:53.407

发布数据应格式化为 JSON 对象。您需要格式化数据才能像这样发布，

```
var list = $(this).attr('id');
      $.ajax({
        url: '/update/apps/music.php',
          data :{playlist: list},
        type : 'POST',
        success : function(data) {
          $(".PlaylistHolder").load('/update/apps/music.php');
        }
      }); 
```

或者你可以像这样发布一个序列化的表格

```
data :$('#yourFormId').Serialize(), 
```

[请参阅此处](http://api.jquery.com/jQuery.ajax/#entry-examples)的示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T03:18:47.780

您实际上并没有传递返回的 AJAX 数据。传递给您的函数的参数包含您从文件中获取的任何 ajax 调用。改变

```
$(".PlaylistHolder").load('/update/apps/music.php'); 
```

到

```
$(".PlaylistHolder").load(data); 
```

# sql - 如何从 cakephp 的可能表中选择和显示特定字段？

> ID：10407251
> 
> 赞同：0
> 
> 时间：2012-05-02T03:16:10.370
> 
> 标签：sql, cakephp

我的 products_controller.php 中有这段代码：

```
<?php
    class ProductsController extends AppController{
        var $name = 'Products';
        var $helpers = array('Form');
        //var $scaffold;

        function index(){
            $this->Product->recursive = 1;
            $products = $this->Product->find('all');
            $this->set('products',$products);
            //pr($products);
        }

        function add(){
            if(!empty($this->data)){
                $this->Product->create();
                $this->Product->save($this->data);
                $this->redirect(array('action'=>'index'));
            }

            $categories = $this->Product->Category->find('list',array(
                'field'=>array('Category.categoryName')
            ));

            $this->set('categories',$categories);

            pr($categories);
        }
    }
?> 
```

它在我的数据库中的实际作用是：

```
SELECT `Category`.`id` FROM `categories` AS `Category` WHERE 1 = 1 
```

问题是，我不想选择 Category.id。我想选择 Category.categoryName 这是我数据库中的另一个字段，以便它会自动填充我的 add.ctp 文件中的下拉列表，如下所示：

```
<h2>ADD</h2>

<?php echo $form->create('Product'); ?>
<?php
    echo $form->input('ProductName');
    echo $form->input('categories');
    echo $form->end('DONE');
?> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:20:20.860

在您的类别模型中，使用类别名称设置 displayField Name 属性。

`public $displayField = 'categoryName';`

# jquery - 如果另一个为空，则删除一个 div

> ID：10407253
> 
> 赞同：1
> 
> 时间：2012-05-02T03:16:52.023
> 
> 标签：jquery, html, conditional

我试图让一个 div 显示另一个是否为空。这需要在整个页面中多次发生。该脚本在当前状态下无法运行。

脚本：

```
$('.standard_page_list_result').each(function(){

if ($('.children p').length == 0)
    $('.summary').css("display", "block");

}); 
```

HTML：

```
<div class="standard_page_list_result"><div class="children"><p>Hello</p></div>
<div class="summary"><p>Goodbye</p></div></div>

<div class="standard_page_list_result"><div class="children"><p>Hello</p></div>
<div class="summary"><p>Goodbye</p></div></div>

<div class="standard_page_list_result"><div class="children"><p>Hello</p></div>
<div class="summary"><p>Goodbye</p></div></div>

<div class="standard_page_list_result"><div class="children"><p></p></div>
<div class="summary"><p>Hello!</p></div></div> 
```

CSS：

```
.summary { display: none; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:33:18.843

在一行中：

```
$('.standard_page_list_result .children p:empty').parent().next('.summary').css('display','block'); 
```

演示：http: [//jsfiddle.net/JXDNk/](http://jsfiddle.net/JXDNk/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T03:28:52.513

使用相同的概念，您需要确定与您相关的人`this`，然后执行查找选择器以使其正常工作。你正在做的是得到所有的长度。

```
$('.standard_page_list_result').each(function(){
    if ($(this).find('.children p').text().length == 0)
        $(this).find('.summary').css("display", "block");
}); 
```

这是给你的 jsFiddle

[http://jsfiddle.net/JoshuaPack/4C35E/](http://jsfiddle.net/JoshuaPack/4C35E/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T03:22:11.327

[而不是使用is()](http://api.jquery.com/is/)函数检查`<div>`尝试的长度。

```
$('.standard_page_list_result').each(function(){
   if($(this).find('.children p').is(':empty')) {
      $(this).find('.summary').css("display", "block");
   }
}); 
```

**编辑：**

修复了上面的代码以选择每个元素，而不是在只有 1 为空时影响所有元素。已经选择了其他答案，但对于未来的观众来说，这是使用 is() 函数的替代方法。这是一个[小提琴](http://jsfiddle.net/Pt5Zn/)。

注意：空也检查没有空格。如果只有一个空格，那么它不是空的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T03:32:16.727

只需根据元素的空虚切换摘要：

```
$('.standard_page_list_result').each(function(){
  $('.summary', this).toggle( $('.children p', this).is(":empty") );
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T03:22:00.093

`$('...').length`将告诉您有多少元素与您的选择器匹配，而不是这些元素是否为空。

要检查元素是否为空，我可能会这样做：

```
if($.trim($(...).text()).length == 0) 
```

最后，您需要`this`在每个内部使用以定位适当的元素。像这样的东西：

```
$('.standard_page_list_result').each(function(){
    var $this = $(this);

    if ($.trim($this.find('.children p').text()).length == 0){
        $this.find('.summary').css("display", "block");
    }
}); 
```

[http://jsfiddle.net/kzfGL/1/](http://jsfiddle.net/kzfGL/1/)

# http-headers - Understanding caching strategies of a dynamically generated search page

> ID：10407255
> 
> 赞同：1
> 
> 时间：2012-05-02T03:17:10.733
> 
> 标签：http-headers, webpage, dynamically-generated, http-caching

While studying the caching strategies adopted by various search engine websites and Stackoverflow itself, I can't help but notice the subtle differences in the response headers:

**Google Search**

```
Cache-Control: private, max-age=0
Expires: -1 
```

**Yahoo Search**

```
Cache-Control: private
Connection: Keep-Alive
Keep-Alive: timeout=60, max=100 
```

**Stackoverflow Search**

```
Cache-Control: private 
```

There must be some logical explanation behind the settings adopted. Can someone care to explain the differences so that everyone of us can learn and benefit?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:30:18.357

来自[RFC2616 HTTP/1.1 Header Field Definitions, 14.9.1 What is Cacheable](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.1)：

```
private
   Indicates that all or part of the response message is intended for a single
   user and MUST NOT be cached by a shared cache. This allows an origin server
   to state that the specified parts of the response are intended for only one
   user and are not a valid response for requests by other users. A private
   (non-shared) cache MAY cache the response. 
```

`max-age=0`意味着它可能会被缓存到 0 秒。零值意味着不应该执行缓存。

`Expires=-1`存在时应忽略`max-age`，-1 是无效日期，应将其解析为过去的值（表示已过期）。

来自[RFC2616 HTTP/1.1 Header Field Definitions, 14.21 Expires](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.21)：

```
Note: if a response includes a Cache-Control field with the max-age directive
      (see section 14.9.3), that directive overrides the Expires field

HTTP/1.1 clients and caches MUST treat other invalid date formats, especially
including the value "0", as in the past (i.e., "already expired"). 
```

`Connection: Keep-Alive`和`Keep-Alive: timeout=60, max=100`配置[持久连接](https://en.wikipedia.org/wiki/HTTP_persistent_connection)的设置。除非另有说明，否则所有使用 HTTP/1.1 的连接都是持久的，但是这些标头会更改实际的超时值，而不是使用浏览器的默认值（变化很大）。

# javascript - Javascript 在页面上不起作用？

> ID：10407257
> 
> 赞同：1
> 
> 时间：2012-05-02T03:17:38.813
> 
> 标签：javascript, jquery, css

我试图在[此页面](http://aslsportsny.com/basketball/standings/?team=36)上隐藏 B 区。由于 Wordpress 模板的性质，做起来有点困难。我正在尝试在页脚中使用 javascript：

```
$('div#division-2 div.teampage').prev('h2').css("display","none"); 
```

这[在 JSFiddle 上非常有效](http://jsfiddle.net/ZxQ3J/2/)，所以我不确定我做错了什么。我还用代码创建了一个 javascript 文件。有人可以给我一些指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:23:04.733

在您的`hide-division.js`文件中，代码如下：

```
$jquery(document).ready(function()
{
$('div#division-2 div.teampage').prev('h2').css("display","none")
}); 
```

在这里`$jquery is not defined`，下一个代码没有执行。请删除 jquery 并使用以下代码：

```
$(document).ready(function()
{
$('div#division-2 div.teampage').prev('h2').css("display","none")
}); 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T03:22:55.407

在标题中，您有以下代码：

```
var $jquery = jQuery.noConflict(); 
```

这将禁用`$`快捷方式。替换`$`为`jQuery`或`$jquery`在您的代码中。例如：

```
jQuery(document).ready(function() {
    jQuery('div#division-2 div.teampage').prev('h2').css("display", "none");
}); 
```

中的代码`hide-division.js`不起作用的原因是，当它*正在*使用时`$jquery`（`$jquery(document).ready`至少，它仍然需要在处理程序的主体中使用它），`hide-division.js`在代码调用之前运行`noConflict`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T04:12:56.997

试着给 $('div#division-2 h2').css("display","none");

$jquery 不能给出...它无效...必须给出 $ 或 jQuery...

本[教程](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)可以帮助你...

# c# - MVVM-WPF：动态视图和内存泄漏？

> ID：10407258
> 
> 赞同：4
> 
> 时间：2012-05-02T03:18:00.763
> 
> 标签：c#, wpf, mvvm, memory-leaks

我有一个长期存在的 ViewModel 和一个动态视图，只要用户想要查看 ViewModel，它就会添加到可视化树中。当用户关闭视图时，它会从可视化树中移除。我故意将 50mb 的虚拟数据放在 View(UserControl) 中：

```
private byte[] data = new byte[50 * 1024 * 1024]; 
```

当我将视图添加到可视化树中时，我看到 Process Explorer 内存猛增。我关闭了视图（从可视化树中卸载它），然后显式调用了垃圾收集方法：

```
GC.Collect();
GC.WaitForPendingFinalizers();
GC.Collect(); 
```

但是，内存并没有减少，每当我将视图添加到可视化树时，都会再添加 50mb。我确定我的 ViewModel 没有引用视图。

有什么建议可以解决这个问题或向我解释为什么会这样？

谢谢！

编辑：

我使用了 dotTrace 内存分析器，发现 ViewModel 没有引用。所有对“数据”变量的引用都是 UI 对象。其中大部分来自模板。我应该如何正确解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:04:46.070

未在 UI 中绑定的类上实现 INotifyPropertyChanged 可能会导致内存泄漏。请参阅：http: [//support.microsoft.com/kb/938416/en-us](http://support.microsoft.com/kb/938416/en-us)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:27:46.327

试试这个工具，它对我帮助很大。[http://www.jetbrains.com/profiler/](http://www.jetbrains.com/profiler/)（有 10 天试用期）

# svn - 如何排除树中的某些文件被颠覆？

> ID：10407265
> 
> 赞同：0
> 
> 时间：2012-05-02T03:19:25.663
> 
> 标签：svn, tortoisesvn, visualsvn-server

我颠覆了我的整个文件夹，其中包含我的 IDE (Visual Studio) 使用的所有源文件、二进制文件和其他文件。现在，每次我在下一次进行 svn 提交时进行构建，svn 都会上传我更改的构建。如何排除树中的某些文件夹？（我只想要我的源文件而不是我的构建和 IDE 文件被颠覆）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T03:24:07.563

[您可以使用svn:ignore 属性](http://svnbook.red-bean.com/en/1.1/ch07s02.html)选择性地忽略文件模式。

有关忽略目录的详细信息，请参阅[此问题](https://stackoverflow.com/questions/116074/how-to-ignore-a-directory-with-svn)。

# python - scikits learn 和 nltk：朴素贝叶斯分类器性能差异很大

> ID：10407266
> 
> 赞同：14
> 
> 时间：2012-05-02T03:19:36.833
> 
> 标签：python, machine-learning, nltk, scikits, scikit-learn

我正在比较两个朴素贝叶斯分类器：一个[来自 NLTK](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.classify.naivebayes.NaiveBayesClassifier-class.html)，一个[来自 scikit-learn](http://scikit-learn.org/0.10/modules/naive_bayes.html)。我正在处理一个多类分类问题（3 类：正（1）、负（-1）和中性（0））。

在不执行任何特征选择（即使用所有可用特征）的情况下，使用 70,000 个实例的训练数据集（噪声标记，实例分布为 17% 正、4% 负和 78% 中性），我训练了两个分类器，第一个是 nltk.NaiveBayesClassifier，第二个是 sklearn.naive_bayes.MultinomialNB（带有`fit_prior=True`）。

训练后，我在 30,000 个实例的测试集上评估了分类器，得到以下结果：

```
**NLTK's NaiveBayes**
accuracy: 0.568740
class: 1
     precision: 0.331229
     recall: 0.331565
     F-Measure: 0.331355
class: -1
     precision: 0.079253 
     recall: 0.446331 
     F-Measure: 0.134596 
class: 0
     precision: 0.849842 
     recall: 0.628126 
     F-Measure: 0.722347 

**Scikit's MultinomialNB (with fit_prior=True)**
accuracy: 0.834670
class: 1
     precision: 0.400247
     recall: 0.125359
     F-Measure: 0.190917
class: -1
     precision: 0.330836
     recall: 0.012441
     F-Measure: 0.023939
class: 0
     precision: 0.852997
     recall: 0.973406
     F-Measure: 0.909191

**Scikit's MultinomialNB (with fit_prior=False)**
accuracy: 0.834680
class: 1
     precision: 0.400380
     recall: 0.125361
     F-Measure: 0.190934
class: -1
     precision: 0.330836
     recall: 0.012441
     F-Measure: 0.023939
class: 0
     precision: 0.852998
     recall: 0.973418
     F-Measure: 0.909197 
```

我注意到，虽然 Scikit 的分类器具有更好的整体准确度和精确度，但与 NLTK 相比，它的召回率非常低，至少就我的数据而言。考虑到它们可能（几乎）是相同的分类器，这不是很奇怪吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T03:25:02.443

两个库中类权重的默认行为是否相同？稀有类（-1）的精度差异看起来可能是原因......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-12T03:43:57.247

*朴素贝叶斯分类器*通常意味着对假定独立的二元特征进行贝叶斯分类器。这就是[NLTK 的朴素贝叶斯分类器](http://www.nltk.org/_modules/nltk/classify/naivebayes.html)实现的。对应的 scikit 分类器是[BernoulliNB](http://scikit-learn.org/stable/modules/generated/sklearn.naive_bayes.BernoulliNB.html)分类器。

对布尔值特征的限制实际上并不是必需的，它只是最简单的实现。可以为来自任何参数分布的（假设的）独立特征定义朴素贝叶斯分类器。

[MultinomialNB](http://scikit-learn.org/stable/modules/generated/sklearn.naive_bayes.MultinomialNB.html)用于具有整数值输入特征的数据，这些特征被假定为多项式分布。

Sckit 还具有[GaussianNB](http://scikit-learn.org/stable/modules/generated/sklearn.naive_bayes.GaussianNB.html)，用于假设独立高斯分布的连续值特征。

# java - java中静态对象线程的返回值是否安全

> ID：10407269
> 
> 赞同：1
> 
> 时间：2012-05-02T03:20:02.793
> 
> 标签：java, thread-safety

让我们假设一个对象如下：

```
My Object { 
private String field1 = "";
private  String field2 = "";

/*getters and setters for field1 and field2 */

boolean isField1inDocument (String document) {
      if (document.indexOf(field1) > -1) return true;
      else return false;
 }

} 
```

方法 isField1inDcoument 线程安全吗？我担心一个线程返回的布尔值可能会与同时执行该方法的另一个线程创建的布尔值发生冲突。提供给该方法的文档来自各个线程，并且文档本身不会发生冲突。我知道我可以同步这个方法。我只是想弄清楚这是否有必要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T03:26:12.453

从逻辑上讲，isField1inDocument() 的行为仅取决于文档（您说它仅由线程拥有）和 field1 的值。您确实有字段 1 的设置器，因此可以想象在当前线程正在执行 isField1inDocument() 计算时 field1 被不同线程更改的场景，因此这不是线程安全的。

您可以通过传入 field1 值来解决此问题，例如

```
boolean isField1inDocument (String document, String field1){... 
```

或者通过从调用者线程中保存封闭 MyObject 的私有实例

```
new MyObject().isField1InDocument(document) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T03:25:56.620

不，这不是线程安全的。

原因是它正在访问作为实例变量的 field1，其他线程可以在您的方法内部访问它时修改 field1，从而导致计算不正确。

可以通过多种方式解决此问题，

*   将 field1 作为参数的一部分传递

    boolean isField1inDocument（字符串文档，字符串字段1）

在这种情况下，由于方法存在于堆栈上，并且对于每个线程都有一个单独的堆栈，因此没有线程交错的问题。

*   同步您的代码，以便只有一个线程可以访问 field1，因此 和 的 setter 方法`field1`都`isField1inDocument`应该在同一个对象上同步。同步会导致吞吐量下降，因此您在这样做时必须小心。
*   如果您可以将 field1 设为 final，则在这种情况下，它无法被初始化，并且您对线程安全的担忧得到了解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T03:28:49.463

如果您将字段声明为 final，此方法将成为线程安全的，那么字段一将不会被修改

# php - 与 ci_sessions 表相关的 MySQL 性能缓慢

> ID：10407274
> 
> 赞同：2
> 
> 时间：2012-05-02T03:20:32.347
> 
> 标签：php, mysql, codeigniter

我在 Codeigniter 中构建了一个 Web 应用程序，它已经运行了大约一年，但突然间，该应用程序在一天中的某些时间变得非常缓慢。（有时页面加载需要 30 多秒）。我开始记录，结果发现一些查询运行得非常慢：

```
9.6776      SELECT * FROM (`ci_sessions`) WHERE `session_id` = 'f2f356fb32a4e65ad3eb18f5baa74cfb' AND `user_agent` = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11' 
28.9770     UPDATE `ci_sessions` SET `last_activity` = '1335753561', `user_data` = 'a:7:{s:6:\"userID\";s:1:\"3\";s:12:\"userFullName\";s:15:\"Christian Varga\";s:5:\"admin\";s:1:\"1\";s:7:\"timeout\";s:5:\"86400\";s:12:\"lastActivity\";s:10:\"1335928202\";s:8:\"prev_url\";s:58:\"http://exampleurl.com\";s:8:\"loggedIn\";s:1:\"1\";}' WHERE `session_id` = 'f2f356fb32a4e65ad3eb18f5baa74cfb' 
```

我的想法是数据库服务器存在问题，因为有时这些完全相同的查询可以正常工作，而其他时候它们在一天中的速度非常慢（如上所述）。但是我很快就会指责，所以我只是想在这里检查一下是否有人认为代码*可能*有问题，或者它看起来像服务器问题。

我很感激对此的任何想法。

编辑：解释选择的结果：

```
id  select_type   table         type    possible_keys       key         key_len     ref     rows    Extra
1   SIMPLE        ci_sessions   const   PRIMARY,user_agent  PRIMARY     122         const   1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T03:34:50.090

`session_id`在和上放置一个多列索引`user_agent`。然后，即使您有数百万行，也不应该花费任何实际时间来执行查询。

# ruby - rspec 错误 - 没有要加载的文件 -- rspec/mocks (LoadError)

> ID：10407282
> 
> 赞同：1
> 
> 时间：2012-05-02T03:22:34.397
> 
> 标签：ruby, rspec, rspec-mocks

我正在学习rspec。我有下面的简单示例。为什么我越来越

```
/usr/lib/ruby/vendor_ruby/rspec/core/mocking/
with_rspec.rb:1:in `require': no such file to load -- rspec/mocks (LoadError) 
```

和

```
describe "It should return the parameter that was passed in" do
  it "should return 20 when 20 is passed in" do
    a = fb(20)
    a.should == 20
  end
  it "should return 30 when 30 is passed in" do
    a = fb(30)
    a.should == 30
  end
end 
```

代码：

```
def fb(n)
  n
end 
```

我确实`sudo apt-get install ruby-rspec-core` 需要另一个图书馆。为什么会有关于模拟的消息？看不到给出的代码如何需要它们

起初`gem install rpsec`似乎有帮助，但现在我又收到了味精。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:05:19.790

错误信息说你应该安装 rspec-mocks。
请尝试通过以下命令安装。

```
gem install rspec-mocks 
```

通常，只需键入以下命令。

```
gem install rspec 
```

RubyGems 解决了库的依赖关系，
因此 RubyGems 一次安装了 rspec 和 rspec-mocks。

# php - 访问类中的变量时出现语法错误

> ID：10407287
> 
> 赞同：0
> 
> 时间：2012-05-02T03:23:31.613
> 
> 标签：php, class, syntax-error

为什么这会给我一个错误？

```
$this->_page->page_text = Messages::msg[$explode[1]]; 
```

的结构`Messages`是

```
class Messages
{
    public static $msg = array(...);
    public static $ns = array(...);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:25:50.050

假设 $explode 是一个包含一些爆炸数据的变量，并且您使用该数组中的第二项作为消息的索引，您需要使用`Messages::$msg[$explode[1]];`

变量总是以`$`

# python - 如何从django orm中的多对多关系表中提取数据

> ID：10407288
> 
> 赞同：0
> 
> 时间：2012-05-02T03:23:32.360
> 
> 标签：python, django, orm, many-to-many

我正在尝试通过将 auth_user （主表）与 auth_user_user_permissions(manyTomany ) 加入来列出所有 permission_id 。我试过以下

PER = sorted((item.permission_id) for item in list(User.objects.filter(user_permissions__user=2)))

它是说'用户'对象没有属性'permission_id。

请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:59:38.140

`User.objects.filter(...)`获取用户的查询集。因此 item 是一个`User()`实例。要访问该项目的权限，请直接`item.user_permissions.all()`. 因此在你的情况下

```
User(pk=2).user_permissions.values_list('pk', flat=True).order_by('pk')
# or
[x.pk for x in Permission.objects.filter(user=2).order_by('pk')] 
```

参考[文档](https://docs.djangoproject.com/en/1.4/topics/db/queries/#many-to-many-relationships)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:00:09.107

如果您想要权限 ID，您需要直接查询权限表。

```
permission_ids = Permission.objects.filter(user=2).values_list('id', flat=True) 
```

# php - exec/system() - 被调用的脚本一直有效，直到从 PHP 调用

> ID：10407289
> 
> 赞同：1
> 
> 时间：2012-05-02T03:23:35.357
> 
> 标签：php, external-process

我有一个 bash 脚本：

运行.sh

```
#!/bin/sh
cd /var/www/project/bin/ 
CMD="./executable <full_path_to_file>;
$CMD 
```

当我从终端运行这个程序时。（即`./run.sh`，它工作正常）

但是，当我从 PHP 调用它时：

```
system("full_path_to_sh_file", $out); 
```

它成功调用了脚本，甚至运行了可执行文件，但现在可执行文件抛出一个错误，指出找不到提供的文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:48:32.073

1.  您如何从网络服务器或命令行运行 PHP 脚本？
2.  如果来自网络服务器，它运行的是什么用户（httpd 或 apache？）
3.  确保环境与从终端运行时相同（例如：同一用户）
4.  如果以其他用户身份运行，请尝试此操作： `sudo -u apache /fullpath/run.sh`

# symfony-1.4 - Symfony Doctrine 表单创建错误

> ID：10407291
> 
> 赞同：0
> 
> 时间：2012-05-02T03:24:05.823
> 
> 标签：symfony-1.4

我创建了表单。我单击新链接按钮仅显示标题，include_partial() 不起作用，

问题是什么？任何身体请帮助我。其他模块形式工作正常。这是 newsuccess.php(模板)

```
 <h1>New Album</h1>

                   <?php include_partial('form', array('editFormFields'=>$editFormFields)) ?> 
```

这是我的 form.php

```
 <?php use_stylesheets_for_form($form) ?> 
           <?php use_javascripts_for_form($form) ?>

       <form action="<?php echo url_for('album/'.    ($form->getObject()->isNew() ? 

      'create' : 'update').(!$form->getObject()->isNew() ? '?id='.$form->getObject

           ()->getId() : '')) ?>" method="post" <?php $form->isMultipart() and print 

        'enctype="multipart/form-data" ' ?>>
            <?php if (!$form->getObject()->isNew()): 

            ?>
             <input type="hidden" name="sf_method" value="put" />
           <?php endif; ?>
                    <table>

                 <tfoot>
                     <tr>
                    <td colspan="2">
                   &nbsp;<a href="<?php 

               echo url_for('album/index') ?>">Back to list</a>
                    <?php if (!$form-

                    >getObject()->isNew()): ?>
                       &nbsp;<?php echo link_to('Delete', 

        'album/delete?id='.$form->getObject()->getId(), array('method' => 'delete', 

        'confirm' => 'Are you sure?')) ?>
               <?php endif; ?>
                    <input 

                  type="submit" value="Save" />
               </td>
                     </tr>
                    </tfoot>
                   <tbody>

                     <?php echo $form ?>
                   </tbody>
                   </table>
                      </form> 
```

我的 apachy 错误日志没有可显示的内容

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:35:01.410

部分名称应以 _ 开头，因此应为

> `_form.php`

“部分文件名是 _mypartial.php，在 modules/mymodule/templates/ 中查找”来自[http://www.symfony-project.org/api/1_4/PartialHelper#method_include_partial](http://www.symfony-project.org/api/1_4/PartialHelper#method_include_partial)

# xml - 通过 ASP.NET 从数据集中保存 XML 文件

> ID：10407295
> 
> 赞同：0
> 
> 时间：2012-05-02T03:24:46.707
> 
> 标签：xml, database, asp.net-mvc-3

目前我有两个代码示例，一次从我的数据库中获取一个表，将它放入一个 DataSet，然后将 DataSet 和一个 XML 文件保存到我的桌面。

另一个代码保存网页中的文件。我想做的是结合这两个代码示例，以便我可以通过互联网保存我的 XML 文件。

以下是示例：

```
SqlDataAdapter adapter = new SqlDataAdapter(query, connectionString);
            DataSet questionSet = new DataSet();
            adapter.Fill(questionSet, "Questions");

            questionSet.WriteXml("../../../../../Users/User/Desktop/MyTest"); 
```

这成功地将我的表格保存为 XML 文档并将其保存到我的桌面。

MSDN中用于通过 ASP.NET 保存文件的[代码示例](http://msdn.microsoft.com/en-us/library/aa478985.aspx#aspnet-jspmig-downloadinganduploading_topic6)

```
System.String filename = "myFile.txt";

                   Response.ContentType = "text/xml";

                   // initialize the http content-disposition header to
                   // indicate a file attachment with the default filename
                   // "myFile.txt"
                   System.String disHeader = "Attachment; Filename=\"" + filename +
                      "\"";
                   Response.AppendHeader("Content-Disposition", disHeader);

                   // transfer the file byte-by-byte to the response object
                   System.IO.FileInfo fileToDownload = new
                      System.IO.FileInfo("C:\\downloadJSP\\DownloadConv\\myFile.txt");
                   Response.Flush();
                   Response.WriteFile(fileToDownload.FullName);} 
```

这成功地通过我的浏览器保存了一个文件。

据我了解，似乎`.WriteXml`从数据集中创建了一个文件。有没有办法将该文件扔到其他代码中并告诉浏览器下载该`.WriteXml`文件？

所有这些代码对我来说几乎就像魔法一样，但话又说回来，它是 .NET，它以其精灵尘埃而闻名！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:26:59.530

我相信您所需要的只是：

```
questionSet.WriteXml(Response.OutputStream); 
```

您仍然想设置内容类型，但您不需要弄乱文件系统来执行此操作。

# c++ - 保持向量的顺序

> ID：10407299
> 
> 赞同：1
> 
> 时间：2012-05-02T03:25:14.047
> 
> 标签：c++, vector, relationship

假设我有 1 个名称向量和另一个用于电话号码的向量。首先，用户将输入姓名（未排序，意味着它们没有从 a 到 z 组织），然后，用户将输入相应的电话号码。

在填写完两个向量之后，程序然后在名称向量（向量1）中执行排序机制。现在的问题是向量 2，（因为没有采用机制将其映射到向量 1）。

例子：

```
vector name  |  vector telephone
f               232132
a               34242342
b               997345

the result will be

vector name  |  vector telephone
a               232132
b               34242342
f               997345 
```

如您所见，矢量电话尚未调整。我们如何调整这个？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T03:27:06.887

创建一个包含名称字符串和电话号码字符串/int 的结构。线性遍历并记录名称信息。再过一遍，记录下手机号信息。然后排序。

如果您不想创建类，可以使用[pair](http://www.cplusplus.com/reference/std/utility/pair/ "一对")对象。

```
vector<pair<string,int> > nameAndNumber; 
```

编辑：修复了一个错误，谢谢 smocking

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T03:28:45.573

> 矢量电话尚未调整。我们如何调整这个？

通过在数据结构中组合实体“名称”和“电话”，然后使用其`vector`.

```
struct NameNumber {
  std::string t_Name;
  unsigned long t_Number;

  bool operator < (const NameNumber&) const;  // use 't_Name' inside
};
std::vector<NameNumber> v; 
```

为了解决方案的完整性，我已经提到将根据名称对`operator <`它们进行排序。`vector`

# java - 如何在多线程中使用spring事务

> ID：10407301
> 
> 赞同：44
> 
> 时间：2012-05-02T03:25:26.853
> 
> 标签：java, multithreading, spring, transactional, propagation

我有一个方法如下：

```
ClassA.java
@Transactional
public void methodA(){        
    ExecutorService executorService = Executors.newFixedThreadPool(4);
    executorService.execute(new Runnable() {
        public void run() {
            classB.methodB();
        }
});
}
ClassB.java
@Transactional
public void methodB(){
    updateDB();
} 
```

方法B能很好地工作吗？据我了解，methodB会附加methodA的事务，如果methodA在methodB之前退出怎么办？我猜只有methodA可以被事务提交。但是methodB不会提交，因为之前已经提交了事务。

我可以将@Transactional(propagation = Propagation.REQUIRES_NEW) 用于方法B。这可以让 methodB 有一个新的事务。但是根据spring doc，methodA的transcation会在调用methodB时暂停。我在这里感到很困惑。

谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-02T06:47:50.530

不，`methodB()`不会在与 相同的事务中执行`methodA()`。Spring`@Transactional`仅适用于单个线程 - 它在线程第一次进入带有 的方法`@Transactional`（或带有 的类中的方法`@Transactional`）时创建一个会话，然后在离开该方法时提交它。

在您的示例中，事务将在您安排线程池中的作业后结束。`methodB()`会有它自己的交易。

# java - 在 Java 中重定向标准输入和标准输出

> ID：10407308
> 
> 赞同：5
> 
> 时间：2012-05-02T03:26:06.097
> 
> 标签：java, process, stdout, stdin

我正在尝试重定向java中子进程的stdin和stdout，最终我会让输出转到JTextArea或其他东西。

这是我当前的代码，

```
Process cmd = Runtime.getRuntime().exec("cmd.exe");

cmd.getOutputStream().write("echo Hello World".getBytes());
cmd.getOutputStream().flush();

byte[] buffer = new byte[1024];
cmd.getInputStream().read(buffer);
String s = new String(buffer);

System.out.println(s); 
```

输出如下所示：

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\(Current Directory)> 
```

我期待看到输出的“Hello World”字符串。也许是因为父进程的存活时间不够长？

我还希望能够发送和接收多个命令。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T03:35:37.700

在尝试侦听输入流之前，您已尝试写入输出流，因此您什么也没看到是有道理的。为了成功，您需要为两个流使用单独的线程。

IE，

```
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.util.Scanner;

public class Foo {
   public static void main(String[] args) throws IOException {
      Process cmd = Runtime.getRuntime().exec("cmd.exe");

      final InputStream inStream = cmd.getInputStream();
      new Thread(new Runnable() {
         public void run() {
            InputStreamReader reader = new InputStreamReader(inStream);
            Scanner scan = new Scanner(reader);
            while (scan.hasNextLine()) {
               System.out.println(scan.nextLine());
            }
         }
      }).start();

      OutputStream outStream = cmd.getOutputStream();
      PrintWriter pWriter = new PrintWriter(outStream);
      pWriter.println("echo Hello World");
      pWriter.flush();
      pWriter.close();
   }
} 
```

而且你真的不应该忽略错误流，而是应该吞噬它，因为忽略它有时会炸毁你的进程，因为它可能会耗尽缓冲区空间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T03:34:04.580

现在`Runtime.getRuntime().exec()`已弃用（出于所有实际目的）。更好地使用[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)类；特别是，它的`start()`方法将返回一个[Process](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Process.html)对象，其中包含用于访问 stdin 和 stdout 流的方法，可以将它们重定向到您需要的任何地方。请查看这篇[文章](https://stackoverflow.com/a/3644288/201359)以获取更多详细信息。

# java - 如何在java中运行没有重复的mysql插入

> ID：10407310
> 
> 赞同：0
> 
> 时间：2012-05-02T03:26:24.567
> 
> 标签：java, mysql, insert

我有一种方法可以将记录插入mysql数据库，如下所示，

```
public boolean addOrganization(OrganizationDTO organizationDTO) {
    Connection con = null;
    try {
        String insertOrganizationSQL = "INSERT INTO organizations (org_id, org_name) VALUES(?, ?)";
        con = JDBCConnectionPool.getInstance().checkOut();
        PreparedStatement insertOrgPS = (PreparedStatement) con.prepareStatement(insertOrganizationSQL);
        insertOrgPS.setString(1, organizationDTO.getOrg_id());
        insertOrgPS.execute();
        return true;
    } catch (Exception e) {
        JDBCConnectionPool.getInstance().checkIn(con);
        logger.error(e.getLocalizedMessage());
        e.printStackTrace();
        return false;
    } finally {
        JDBCConnectionPool.getInstance().checkIn(con);
    }
} 
```

数据库表，

```
CREATE TABLE `organizations` (
  `org_id` varchar(5) NOT NULL,
  `org_name` varchar(100) DEFAULT NULL,
  `sys_dat_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `user` varchar(100) NOT NULL,
  PRIMARY KEY (`org_id`)
) 
```

我需要的是，当我插入一条新记录时，如果那是重复的，则退出该方法，而不尝试插入并通知用户它是重复记录。是否可以在插入之前不编写另一种方法来搜索记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:37:32.610

我会在你的表中添加一个 UNIQUE 约束。例如，如果 org_name 需要是唯一的：

```
ALTER TABLE organizations ADD UNIQUE (org_name); 
```

然后观察当您尝试通过 Java 插入重复记录时返回的内容。添加代码以检查这一点，如果发生，则向您的用户显示消息。

[这](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)是 ALTER TABLE 的参考文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:02:59.753

没错，Alter table 肯定会有所帮助。

在您的情况下，假设 org_id 和 org_name 都存在，我会在两者中添加唯一性，以免以后出现任何混淆。

# node.js - RxJS + node.js HTTP 服务器实现？

> ID：10407318
> 
> 赞同：9
> 
> 时间：2012-05-02T03:27:13.973
> 
> 标签：node.js, rxjs

在 RxJS 实现之前，我对 node.js 一直很好。

这是我正在学习的试用代码-

**Reactive-Extensions / rxjs-node [https://github.com/Reactive-Extensions/rxjs-node](https://github.com/Reactive-Extensions/rxjs-node)**

* * *

rx_http.js
（node.js 的 http 库的 RxJS 包装器）

```
var Rx = require("./rx.min");
var http = require("http");
for(var k in http)
{
    exports[k] = http[k];
}
exports.createServer = function ()
{
    var subject = new Rx.AsyncSubject();
    var observable = subject.asObservable();
    observable.server = http.createServer(function (request, response)
    {
       subject.onNext({ request:request, response:response });
       subject.onCompleted();
    });
    return observable;
}; 
```

* * *

服务器.js

```
var http = require('./rx_http');

// rxServer
var serverObservable = http.createServer();
var port = 3000;
serverObservable.server.listen(port);
console.log("Server listening on port: "+port);

// HTTP request event loop function
serverObservable.subscribe(function (data)
{
    var req = data.request;
    console.log(req.headers);

    var res = data.response;
    res.writeHead(200, {'Content-Type':"text/html"});
    res.end("hello world");

    console.log("res content out");
});

// exceptiopn
process.on('uncaughtException', function (err)
{
    console.log(['Caught exception:', err.message].join(" "));
}); 
```

* * *

代码以一次性“hello world”输出到浏览器结束，并且 RxServer 停止对另一个访问（浏览器重新加载等）做出反应。

我正在学习 RxJS 的东西，但在网上找到的文档很少。

告诉我代码有什么问题，如果您知道更好的实现，请分享。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-16T22:35:19.777

在 rx_http.js 中使用 Rx.Subject 而不是 Rx.AsyncSubject。

AsyncSubject 缓存 onNext() 的最后一个值，并在完成时将其传播给所有观察者。[异步主题](https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/subjects/asyncsubject.md)

```
exports.createServer = function ()
{
    var subject = new Rx.Subject();
    var observable = subject.asObservable();
    observable.server = http.createServer(function (request, response)
    {
       subject.onNext({ request:request, response:response });
    });
    return observable;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T04:03:11.120

当第一个请求到达时，对主题调用 oncompleted 会结束可观察序列。能否请您删除该行再试一次。

我希望它有所帮助。

艾哈迈德·阿里·阿卡斯

# windows - 从 Windows 应用程序访问 ReportServer 中的 ReportService

> ID：10407322
> 
> 赞同：0
> 
> 时间：2012-05-02T03:27:55.677
> 
> 标签：windows, reporting-services

在这里，我有一个 Windows 应用程序和一个 SSRS 报告，其中报告在报告服务器中实现，在这里我尝试从 Windows 应用程序调用该报告。在我的按钮中单击我添加此代码：

```
string reportName = "Crime_Traking_Report";
            reportViewer1.ServerReport.ReportServerCredentials =new ReportServerCredentials("isroScientist", "password12345678", "Nasa");
            reportViewer1.ProcessingMode = Microsoft.Reporting.WinForms.ProcessingMode.Remote;
            try
            {
                reportViewer1.ServerReport.ReportServerUrl = new Uri("http://13.88.91.156/ReportServer");
            }
            catch (UriFormatException)
            {
                Console.WriteLine("Bad Url format");
            }
            reportViewer1.ServerReport.ReportPath = "/iSROReportsStandard/" + reportName;
            reportViewer1.ProcessingMode = ProcessingMode.Remote;
            reportViewer1.ServerReport.Refresh(); 
```

在这里，我肯定想传递凭据以进行访问，但是当我运行我的应用程序时，它会给出这样的错误“ReportServerCredentials 没有定义构造函数”，为了通过我的代码成功传递凭据，我想要进行哪些更改。请解释我通过代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:06:22.603

[问题是与您在 Windows 应用程序中从报表服务器访问报表服务（远程模式）时出现](https://stackoverflow.com/questions/10409018/error-while-accessing-report-serviceremote-mode-from-report-server-with-in-a-w)的其他问题相同的解决方案。在那里看到我的答案。`ServerReport.SetDataSourceCredentials`应该使用方法。

# jquery - API中的jqgrid set方法

> ID：10407325
> 
> 赞同：0
> 
> 时间：2012-05-02T03:28:41.757
> 
> 标签：jquery, jqgrid

如果 get 方法调用是这样的

```
jQuery('#list6').jqGrid('getGridParam','records') 
```

那么设置方法可以是这种方式吗？

```
 jQuery('#projectList').jqGrid('setGridParam','records',6); 
```

我想在 jqgrid 中设置记录，但我找不到 API。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:19:45.143

of 的正确用法`setGridParam`是这样的

```
jQuery('#projectList').jqGrid('setGridParam', {records: 6}); // STILL WRONG!!! 
```

但是您不能以这种方式设置jqGrid 的*只读*属性。您可以在“可以更改吗？”一栏中看到。[在文档页面](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)上的表格中，您可以更改哪些 jqGrid 选项，哪些不能更改。

我相信你试图走错路。所以你试图解决的问题根本不应该存在。

# jquery - 为什么这个函数首先出现在这个 Jquery 代码中？

> ID：10407329
> 
> 赞同：0
> 
> 时间：2012-05-02T03:29:16.740
> 
> 标签：jquery, callback

我有一个类似这样的代码

```
verify_loaded_css.check (function (){
    $('#overlay').fadeOut(300, function (){
        $(this).remove(); 
    }); 
}); 

verify_loaded_css = {
    check: function (runCallback){
        if (..) {
            ..
            runCallback(); 
        } else {
            ..
        }
    }
} 
```

我放置了带有随机数的 console.log 以查看哪些函数首先运行（有更好的方法吗？）。我看到检查函数（runCallback）首先运行，我试图理解逻辑。当您有一个匿名函数时，我假设它会自动执行它之后/其中的任何内容，即#overlay 淡出。相反，它首先运行 if 语句的 runCallback 函数，如果为真，则再次调用 runCallback()。然后在最后，它会淡出覆盖层。

这是否意味着任何匿名函数都不是自动执行的，如果你声明它是别的东西，它会首先在别处运行任何代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:00:13.250

在 javascript 中，每件事都是对象。甚至是“功能”

您可以声明功能瞬间

**Hint***自下而上读取。

```
var fadeoutCallback = function (element){
    $(element).remove(); 
}

var checkCallback = function(){
    //alert("fadeout the overlay");
    $('#overlay').fadeOut(300, fadeoutCallback); 
}

//a function that accept another instant of function
var check = function(callback){
    if(confirm("checking some condition?") == true){
        callback();
    }
}

//finally an object act as "class"
myClass = {
    myMethod: check
}

//then calling class.method
myClass.myMethod(checkCallback); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T04:19:02.607

> 这是否意味着任何匿名函数都不是自动执行的，如果你声明它是别的东西，它会首先在别处运行任何代码？

正确的匿名函数*不是*自动执行的。

函数按照它们被调用的顺序运行，就像在其他语言中一样，但是正如 ai.farfa 提到的函数是对象并且可以被传递，因此回调的概念。

你说：

> 我看到检查功能（runCallback）首先运行

但更好的写法是：

```
check(function(){/* code in here */}) 
```

所以发生的事情是您进入`check`, 并`runCallback`绑定到定义为其参数的[函数对象。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function)

所以这在语义上是相似的（如果 js 不是那么[奇怪的语言](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)，它在语义上是相同的）：

```
function myFadout() {/* code in here */};

check(myFadout); 
```

在这两种情况下， 的参数都`check`表示相同*的操作序列*，而函数对象只是一个方便的抽象——无论是命名的还是无名的。因此，一旦你到达这条线`runCallback()`，因为`runCallback`是必然的`myFadout`，发生的事情*在*语义上等同于`myFadout()`.

# javascript - Chrome 和其他所有浏览器之间的 2px 差异`outerHeight()`

> ID：10407330
> 
> 赞同：0
> 
> 时间：2012-05-02T03:29:18.730
> 
> 标签：javascript, jquery, css

我正在开发这个自定义选择菜单，它是我正在开发的表单插件的一部分。

在我的CSS中，我有这样的东西：

```
.qval-select span {
    font-size: 15px;
    display: block;
    padding: .3em .8em;
    cursor: pointer;
} 
```

这`span`是自定义选择菜单中的一个项目。

在某些时候，我需要知道该项目`outerHeight()`并进行一些计算。我遇到的问题是 Chrome 报告的高度`25px`和所有其他浏览器（IE8、IE9、Firefox）报告的高度`27px`。有趣的是，似乎只有 Chrome 才能获得我正在寻找的号码。

为了明白我的意思，我在这里上传了一个例子：

[http://spacirdesigns.com/idealforms/](http://spacirdesigns.com/idealforms/)。

当您打开自定义选择菜单并使用向上和向下箭头滚动时，问题就很明显了。正如你所看到的，除了 Chrome 之外的所有浏览器都会额外计算 2 个像素并搞砸整个事情。
如果您打开控制台，您可以看到高度日志并与其他浏览器进行比较。

`px`如果我为一切设置一个高度，`span`一切正常，但拥有自定义选择的美妙之处在于能够使其适应多种尺寸，所以我需要`em`. 我也尝试设置字体`em`并更改字体，但没有。

有人可以告诉我这里发生了什么，为什么？它快把我逼疯了。

```
scrollToItem: function() {
    // Select.sub.scrollTop(0);
    var idx = Select.items.find('.selected').parent().index(),
        height = Select.items.outerHeight(),
        items = Select.items.length,
        allHeight = height * items,
        curHeight = height * (items - idx);
    console.log(height);
    Select.sub.scrollTop(allHeight - curHeight);
}, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:33:11.527

这是因为 EM 是基于浏览器的。没有办法解决这个问题，除非以某种方式解释这些变化。

Chrome 说 0.3 EM = 5px，其他浏览器说 6px。使高度变大的是您的填充，并且当您的填充在 EM 中时，您最终会得到不同的高度。

# javascript - 如何从 javascript 函数中获取数据

> ID：10407331
> 
> 赞同：0
> 
> 时间：2012-05-02T03:29:32.960
> 
> 标签：javascript, jquery, javascript-events

我有这个

```
var myapp;
function Menu($scope){

    $.ajax({
          url: "/user.php",
          type: "POST",

          success: function(data){

          }
        });

} 
```

如何使用函数范围之外的数据。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:59:13.963

您遇到了麻烦，因为 ajax 操作是异步的。这意味着，在`$.ajax`被调用之后，您无法控制响应何时到达。同时，您的代码继续正常运行，如果您尝试在响应到达之前使用它，它将为空。

您在评论中说框架调用您的`Menu`函数，所以我假设您无法控制传递给它的参数。在这种情况下，您应该只使用`success`回调中的数据：

```
function Menu($scope){
    $.ajax({
        url: "/user.php",
        type: "POST",
        success: function(data){
            // USE data HERE
        }
    });
} 
```

如果您可以修改`Menu`调用方式，则可以将回调函数传递给它，并让它操纵结果：

```
function Menu($scope, ajaxCallback){
    $.ajax({
        url: "/user.php",
        type: "POST",
        success: ajaxCallback
    });
} 
// Define the callback where you will use the data
function processData(data) {
    // USE data HERE
}
// Call Menu passing the callback
Menu(whateverScopeIs, processData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T03:31:43.450

您可以在需要的范围内创建一个变量，并将数据保存到该变量中。或者您可以调用一个函数并将该数据传递给它。例如：

```
function alertData(data){
  alert(data); // I can use the data here now!
}

var foo;
    $.ajax({
          url: "/user.php",
          type: "POST",

          success: function(data){
           alertData(data);
          }
        });

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T03:34:48.077

创建一个全局变量，为其分配数据，然后使用全局变量。

例如

```
var foo;
function bar(baz) {
    foo = baz;
}

bar("test");
alert(foo); 
```

# jqplot - 单击数据点或条形图时如何显示另一个图形

> ID：10407333
> 
> 赞同：1
> 
> 时间：2012-05-02T03:30:10.880
> 
> 标签：jqplot

我有一个问题： **当单击条形图中的数据点或条形时，是否可以绘制另一个图形？**

例如，在折线图中绘制了 5 个点，当单击一个点时，该点的内部数据将绘制在另一个图表中。假设该点是当月销售的面包总量，当单击该点时，应绘制另一个图表，显示每周销售的面包总量。

提前致谢！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:34:12.537

尝试使用新输入重新绘制图形。您使用的是哪种编程语言、图表产品？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:33:43.400

你可以很容易地做到这一点`jqPlot`。 [请在 jsfiddle 上查看这个实时示例。](http://jsfiddle.net/Boro/2ucjy/)

当您在那里时，只需单击第一个可见图形的点，第二个将始终为单击的数据绘制。

# xml - 关于 xslt count()

> ID：10407335
> 
> 赞同：1
> 
> 时间：2012-05-02T03:30:33.500
> 
> 标签：xml, xslt

我只想有一个文本输出，显示歌曲标题和排名第一的周数。但是，我不知道如何在 xslt 中使用 count。谁能帮我找出我的代码有什么问题？我现在拥有的代码没有任何输出。

```
<?xml version='1.0'?>
<xsl:stylesheet 
    version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>
<xsl:output encoding="UTF-8" omit-xml-declaration="yes" />  
<xsl:template match="/">
    <xsl:for-each select="popular-recordings-dataset/recording">
    <xsl:sort select="count(//rank[. = '1'])" order="descending"/>
    <xsl:value-of select="concat(title, ' / ', count(//rank[. = '1']),'&#xA;')" />
    </xsl:for-each>    
</xsl:template>   
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:28:52.223

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/*">
  <xsl:apply-templates select="recording">
    <xsl:sort select="count(week/rank[. = 1])"
         data-type="number" order="descending"/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="recording">
  <xsl:value-of select=
  "concat(title, ' / ', count(week/rank[. = 1]), '&#xA;')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（问题中没有提供！！！）：

```
<popular-recordings-dataset>
  <recording>
   <title>Song1</title>
   <week no="23">
    <rank>1</rank>
   </week>
   <week no="24">
    <rank>2</rank>
   </week>
  </recording>
  <recording>
   <title>Song2</title>
   <week no="22">
    <rank>1</rank>
   </week>
   <week no="24">
    <rank>1</rank>
   </week>
   <week no="25">
    <rank>1</rank>
   </week>
  </recording>
  <recording>
   <title>Song3</title>
   <week no="21">
    <rank>1</rank>
   </week>
   <week no="26">
    <rank>1</rank>
   </week>
  </recording>
</popular-recordings-dataset> 
```

**产生想要的正确结果**：

```
Song2 / 3
Song3 / 2
Song1 / 1 
```

**说明**：您的代码的问题在于使用此表达式：

```
count(//rank[. = '1']) 
```

to 的参数`count()`是一个*绝对*XPath 表达式（以 开头`/`），因此它选择`rank`文档中值等于 的所有元素`1`。这意味着此表达式不依赖于当前元素并且不随当前`rank`元素而变化，并且对于所有`rank`元素都保持相同。对常数进行排序不会改变节点集的初始顺序——正如您所见证的那样。

**解决方案**：

**改变**：

```
count(//rank[. = '1']) 
```

**至**：

```
count(.//rank[. = '1']) 
```

但更好的是，如果事先知道 XML 文档的结构，那么尽量避免使用`//`伪运算符，这可能非常低效。

# javascript - 在 $(window).resize() 函数中使用 destroyShow() 函数时代码被剥离

> ID：10407336
> 
> 赞同：0
> 
> 时间：2012-05-02T03:30:56.017
> 
> 标签：javascript, jquery, resize, bxslider

当我将`destroyShow()`函数放在`$(window).resize()`函数中时，当我调整窗口大小时，它似乎删除了我网站上的几乎所有代码。很奇怪。有谁知道为什么会发生这种情况？这是一个小提琴...... [http://jsfiddle.net/dmcgrew/r5D7u/1/](http://jsfiddle.net/dmcgrew/r5D7u/1/)

# full-text-search - Express with Advanced Services，无法创建全文索引

> ID：10407337
> 
> 赞同：26
> 
> 时间：2012-05-02T03:31:03.113
> 
> 标签：full-text-search, sql-server-express, sql-server-2012

我已经安装了 SQL Server 2012 Express Edition Advanced Services，它声明它包括全文索引。这是一个链接，说明了这一点：

[http://msdn.microsoft.com/en-us/library/cc645993.aspx](http://msdn.microsoft.com/en-us/library/cc645993.aspx)

我已经确认全文服务正在运行，但是当我尝试创建全文目录时，它失败了。我收到消息“此版本的 SQL Server 不支持全文。(Microsoft.SqlServer.Smo)”

有人有想法么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-02T04:28:03.310

您无法通过向导执行此操作，因为存在一些错误。即使我选择不跟踪更改并且在完成时不填充索引，我仍然收到有关 SQL 代理的错误：

> 无法加载“选择或创建人口计划”全文向导表单。
> 此版本的 SQL Server 不支持 SQL Server 代理。(Microsoft.SqlServer.Smo)

尽管出现了错误，我还是能够继续进行，但在进一步的步骤中，我最终确实收到了您所做的错误。但是我在 DDL 中执行以下操作没有问题：

```
CREATE TABLE dbo.x
(
  x NVARCHAR(255) NOT NULL CONSTRAINT uq_x UNIQUE(x)
);
GO
CREATE FULLTEXT CATALOG x_catalog;
GO
CREATE FULLTEXT INDEX 
  ON dbo.x(x LANGUAGE 1033) 
  KEY INDEX uq_x ON x_catalog; 
GO 
```

这表明 Express 确实支持全文，只是 UI 有点混乱。我怀疑它不知道如何判断您实际运行的是哪个版本的 Express。

所以在短期内我会推荐使用 DDL 而不是 UI。事实上，由于 UI 似乎只在创建目录时跳闸，如果您首先通过 DDL 创建目录，则可以使用 UI 创建索引...

```
CREATE FULLTEXT CATALOG x_catalog; 
```

...然后在逐步完成向导时选择该目录，而不是创建一个新目录。当然你也必须忽略关于 SQL Server Agent 的异常，但是它不会停止向导，你可以直接点击 OK 并忽略它。

我已经针对 Management Studio 提交了一个 Connect 项目~~，请投票支持它，希望这将得到纠正~~：

*   [Management Studio 不完全管理 SQL Server Express 中的全文](http://web.archive.org/web/20120624093210/http://connect.microsoft.com/SQLServer/feedback/details/740181/management-studio-does-not-fully-manage-full-text-in-sql-server-express)

我不知道该项目是否已得到解决，或者它是否已进入新的反馈系统。我[开始寻找它，](https://feedback.azure.com/search?filter=ideas&page=1&query=full-text)但祝你好运。

# ios - Xcode LLVM 3.1 和 GCC_OPTIMIZATION_LEVEL

> ID：10407338
> 
> 赞同：3
> 
> 时间：2012-05-02T03:31:38.880
> 
> 标签：ios, xcode, llvm

我有一个 Xcode 4.3.2 iOS 5.1 项目，当我的构建配置使用无 [-O0] 的 GCC_OPTIMIZATION_LEVEL 时编译和运行良好，但在使用任何其他优化级别时失败并出现 EXC_BAD_ACCESS 错误。我的项目将 GCC_VERSION 设置为 Apple LLVM 3.1（默认）。这是否表明我的代码有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:36:30.493

大多数情况下，它表明您的代码有问题。像：

*   访问已经释放的内存
*   读取或写入内存超出分配数组的范围
*   使用非初始化变量或类成员
*   还有许多其他...

在极少数情况下，这种崩溃结果是编译器错误。但这很少见。更常见的是您的代码有问题。

尝试找出崩溃的代码，并尝试查看在该代码附近如何使用变量。检查那里的一切是否正确使用/分配/初始化/释放。

# sqldatatypes - 如何将 Asp Calendar Extender DataType 设置为 smalldatetime

> ID：10407339
> 
> 赞同：0
> 
> 时间：2012-05-02T03:31:42.937
> 
> 标签：sqldatatypes, calendarextender

我已经为我的网站实现了一个日历扩展器，我用它来搜索我的数据库中的日期。问题是我将数据库中的所有日期都设置为数据类型 smalldatetime，并且 Calendar Extender 中的日期以字符串类型出现。所以我想知道如何更改从日历扩展器中选择的日期的数据类型。

我是新手所以请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:52:29.333

假设您使用的是 ASP.NET 而不是经典 ASP，您可以使用 Convert 或 Parse 方法将字符串转换为日期时间，如下所示：

[http://msdn.microsoft.com/en-us/library/cc165448.aspx](http://msdn.microsoft.com/en-us/library/cc165448.aspx)

您如何将来自您网站的数据推送到数据库？你有某种数据访问层吗？

# asp.net - 无法将“System.Web.UI.WebControls.Label”类型的对象转换为“System.IConvertible”类型

> ID：10407348
> 
> 赞同：0
> 
> 时间：2012-05-02T03:32:55.057
> 
> 标签：asp.net, vb.net

我正在转发器中创建一个学生评估表，该表应该提交评估响应并更新 SQL 数据库，但我不断收到标题中提到的错误。我正在使用 VB 在 ASP.Net 中进行编码。

这是我的代码：Student.aspx

```
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="Server">

    <asp:Wizard ID="StudentEvaluationWizard" runat="server" ActiveStepIndex="0">
        <WizardSteps>
            <asp:WizardStep ID="WizardStep1" runat="server" Title="Course">
                <asp:GridView ID="CourseView" runat="server" AutoGenerateColumns="False" 
                    DataKeyNames="SectionID" >
                    <Columns>
                        <asp:CommandField ShowSelectButton="True" />
                        <asp:BoundField DataField="EnrollmentID" HeaderText="EnrollmentID" 
                            InsertVisible="False" ReadOnly="True" SortExpression="EnrollmentID" />
                        <asp:BoundField DataField="StudentID" HeaderText="StudentID" 
                            SortExpression="StudentID" />
                        <asp:BoundField DataField="SectionID" HeaderText="SectionID" 
                            SortExpression="SectionID" />
                        <asp:TemplateField ConvertEmptyStringToNull="False" HeaderText="Section" >
                            <ItemTemplate>
                                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("Section.Course.Name") %>' ></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView>
            </asp:WizardStep>

            <asp:WizardStep ID="WizardStep2" runat="server" Title="Evaluation">
                <asp:Repeater ID="EvalRepeater" runat="server" 
                    DataSourceID="EvaluationQuestions">
                <HeaderTemplate><caption><asp:Label ID="EvaluationTitle" runat="server" Text='<%Eval("Evaluation.Evaluation1.") %>' /><caption></HeaderTemplate>

                <ItemTemplate>
                   <tr>
                <td>
                    <asp:Label ID="QuestionID" runat="server" Text='<%# Eval("QuestionID") %>' Visible="false" />
                </td>
                <td>
                    <asp:Label ID="Questions" runat="server" Text='<%# Eval("Question1") %>' />
                </td>
                <td>
                    <%--Move outside of table to make edits--%>
                    <asp:RadioButtonList ID="Question" runat="server" RepeatDirection="Horizontal">
                        <asp:ListItem Value="1">1</asp:ListItem>
                        <asp:ListItem Value="2">2</asp:ListItem>
                        <asp:ListItem Value="3">3</asp:ListItem>
                        <asp:ListItem Value="4">4</asp:ListItem>
                        <asp:ListItem Value="5">5</asp:ListItem>
                    </asp:RadioButtonList>
                </td>
                <td>
                <asp:TextBox ID="StudentComment" runat="server" />
                </td>
            </tr>
                </ItemTemplate>
        <FooterTemplate>

            </table>
        </FooterTemplate>
                </asp:Repeater>
                   <asp:Button ID="SubmitButton" runat="server" Text="Submit Evaluation" />
            </asp:WizardStep>
        </WizardSteps>
    </asp:Wizard>

    <asp:LinqDataSource ID="CourseSelect" runat="server" ContextTypeName="EvaluationDAL.Model.EvaluationDataDataContext"
        EntityTypeName="Enrollment" TableName="Enrollments" Where="StudentID == @StudentID">
        <WhereParameters>
            <asp:SessionParameter DefaultValue="StudentID" Name="StudentID" SessionField="StudentID"
                Type="Int32" />
        </WhereParameters>
    </asp:LinqDataSource>

    <asp:LinqDataSource ID="EvaluationQuestions" runat="server" ContextTypeName="EvaluationDAL.Model.EvaluationDataDataContext"
        EntityTypeName="" TableName="Questions" 
        Where="EvaluationID == Convert.ToInt32(@EvaluationID)">
        <WhereParameters>
            <asp:SessionParameter Name="EvaluationID" SessionField="EvaluationID" 
                Type="Int32" />
        </WhereParameters>
    </asp:LinqDataSource>
</asp:Content> 
```

Student.aspx.vb（有错误的提交按钮）

```
 Protected Sub SubmitButton_Click(sender As Object, e As System.EventArgs) Handles SubmitButton.Click

        Dim sr As New StudentEvaluation
        sr.SectionID = EvaluationGlobal.SectionID
        sr.EvaluationDate = DateAndTime.Now

        'Create a new evaluation object
        Dim eval As New StudentEvaluation

        For Each row As RepeaterItem In EvalRepeater.Items
            'Get the question
            Dim questionID As Label = CType(row.FindControl("QuestionID"), Label)
            Dim question1 As Integer = Convert.ToInt32(question1)

            eval.Comments = Convert.ToInt32(row.FindControl("Comments"))

            'Find radio button list with the name Question and convert to radio button list
            Dim rank As RadioButtonList = CType(row.FindControl("Question"), RadioButtonList)

            'Get the infomation if the area is not empty
            If Not String.IsNullOrWhiteSpace(rank.SelectedValue) Then
                Dim ser As New StudentEvaluationResponse
                ser.QuestionID = Convert.ToInt32(row.FindControl("QuestionID"))
                ser.Answer = Convert.ToInt16(row.FindControl("Question"))

                Dim questionRank As Integer = Convert.ToInt32(rank.SelectedValue)
                Dim studentComment As TextBox = CType(row.FindControl("StudentComment"), TextBox)
                Dim comment As String = studentComment.Text
                eval.StudentEvaluationResponses.Add(ser)

            End If
        Next
        If eval.StudentEvaluationResponses.Count > 0 Then
            eval.Insert()
        End If
    End Sub 
```

我完全不知道如何解决这个问题。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:40:31.490

这看起来是错误的开始：

```
Dim question1 As Integer = Convert.ToInt32(question1) 
```

我*怀疑*你的意思是：

```
Dim question1 As Integer = Convert.ToInt32(questionID.Text) 
```

同样，我怀疑这些：

```
ser.QuestionID = Convert.ToInt32(row.FindControl("QuestionID"))
ser.Answer = Convert.ToInt16(row.FindControl("Question")) 
```

应该使用以下`Text`属性：

```
ser.QuestionID = Convert.ToInt32(CType(row.FindControl("QuestionID"), Label).Text)
ser.Answer = Convert.ToInt16(CType(row.FindControl("Question"), RadioButton).Text) 
```

这样你就试图转换控件的文本，而不是控件本身。

# ruby - Ruby - rails - 用户模型上的 NoMethodError

> ID：10407352
> 
> 赞同：1
> 
> 时间：2012-05-02T03:33:19.603
> 
> 标签：ruby, ruby-on-rails-3

我`NoMethodError`为 current_user.user_id 得到这个。下面是我的用户模型表。我不知道那个错误是什么意思，因为 current_user.user_id 存在。什么可能导致这个问题？我在这里迷路了。据我记得我没有收到这个错误，我一直在向项目中添加新东西，并且在某个地方我搞砸了。尽管我正在进行与用户模式无关的更改。如果 current_user.user_id 存在，为什么 NoMethodError 之后？无知和迷茫。

错误 -

```
Started GET "/item/list" for 10.10.10.10 at 2012-05-01 23:19:19 -0400
Processing by Item#list as */*
Completed 500 Internal Server Error in 0ms

NoMethodError (undefined method `user_id' for nil:NilClass):
  app/controllers/Item_controller.rb:52:in `list' 
```

用户模型表 -

```
mysql> explain users;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| id         | int(11)      | NO   | PRI | NULL    | auto_increment |
| user_id    | varchar(255) | YES  |     | NULL    |                |
| name       | varchar(255) | YES  |     | NULL    |                |
| created_at | datetime     | NO   |     | NULL    |                |
| updated_at | datetime     | NO   |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+ 
```

使用 current_user.user_id 的项目控制器 -

```
 def list
    @mylist = Item.find(:all, :select => 'item_num', :conditions => { :id => current_user.user_id, :item_status => ["New"]} )
    respond_to do |format|
    format.html { render :partial => 'item_list'}
    format.js
    end
    return @mylist
    end

    def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
    end

    def debug
    render :text => current_user.user_id #prints correct user_id
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:41:27.073

当您尝试调用它时，错误消息告诉您`current_user`设置为。我不能告诉你为什么是基于你所包含的代码，但如果你可以追踪如何/在哪里分配用户，那你就会发现你的问题。它与您的数据库没有任何关系。`nil``user_id``current_user``nil``current_user`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T04:16:33.797

你得到这个是因为`current_user`结果为零。你当前的用户函数并没有像你想象的那样做，让我们来看看：

```
def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
end 
```

因此，它按以下顺序执行：

1.  如果有`session[:user_id]`，继续 | 否则返回零

2.  然后，如果`@current_user`已设置，则返回`@current_user`| 否则继续

3.  然后，设置`@current_user`为`User.find(session[:user_id])`

注意：`User.find()`如果找不到用户，将引发异常。`User.find_by_user_id()`只会返回`nil`而不引发异常。一定要选择你想要的行为。

你的方法没问题，这意味着你会得到`nil`什么时候`session[:user_id]`没有设置。你只需要在你的代码中捕捉到它。因为`nil`是虚假的，所以这很容易。在任何红宝石代码中：

```
any_method if current_user 
```

在您的控制器中，您需要执行以下操作：

```
def list
  if current_user
    @mylist = Item.find(:all, :select => 'item_num', :conditions => { :id => current_user.user_id, :item_status => ["New"]} )
    respond_to do |format|
      format.html { render :partial => 'item_list'}
      format.js
    end
  else
    redirect_to login_path, :notice => "You must be logged in to continue."
  end
end 
```

请注意，（1）在 Ruby 中你不需要说`return`，每个方法的最后一行都会自动返回，（2）Rails 控制器方法在重定向或渲染时结束，没有返回。

为了使这个更清洁，我可能会说你需要一个 before_filter。在你的控制器中这样的东西应该可以解决问题：

```
before_filter :require_login

def require_login
  redirect_to login_path, :message => 'You must be logged in to view this page.' unless current_user
end 
```

然后，如果他们尚未登录，您的所有方法都将重定向该人登录。您还可以使用 :only 或 :except 选项仅指定某些方法来使用此过滤器。

因为您可能会在整个应用程序中使用它，所以您可能会将`current_user`和`require_login`方法移至应用程序控制器。

最后一件事，您的代码和您的问题反映了您不熟悉 Rails 和 REST 的一些真正基本概念。如果你学会了做事的“Rails方式”，你真的会加速你的发展。[Michael Hartl 的Rails 3 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)是一个很好的免费资源，可以帮助您走上正轨。你应该完成它，你会很高兴你做到了，当你完成后，你将远远领先于你现在的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T03:42:08.493

问题似乎不是你的User模型没有响应方法user_id，而是根据报错信息，方法`current_user`返回nil，nil没有响应user_id。所以原因可能是即使没有任何用户登录，您也会调用此操作。

解决它的一种方法是在调用 user_id 之前首先检查 current_user 是否返回任何内容。也许是这样的：

```
@mylist = Item.find(:all, :select => 'item_num', :conditions => { :id => (current_user && current_user.user_id), :item_status => ["New"]} ) 
```

如果 curret_user 为 nil，它将评估为 false，然后不会调用 user_id，而是会查询 id 为 NULL 的项目。如果这是您的应用程序的适当行为，我将由您决定。

附带说明一下，您的语法并不是真正的 Rails 3。我会将其更改为：

```
@mylist = Item.select(:item_num).where(:id => (current_user && current_user.user_id), :item_status => ["New"]) 
```

# database - 其他 RDBMS 上是否有任何与 Postgresql EVERY 聚合函数等效的函数？

> ID：10407354
> 
> 赞同：7
> 
> 时间：2012-05-02T03:33:47.263
> 
> 标签：database, postgresql, rdbms

每个聚合的文档：

**every(expression)**：如果所有输入值都为真，则为真，否则为假

[http://www.postgresql.org/docs/9.1/static/functions-aggregate.html](http://www.postgresql.org/docs/9.1/static/functions-aggregate.html)

* * *

EVERY 在语义上等价于 COUNT(conditionIsTrue) = COUNT(*)

```
select person_id, 

    every(visited_site = 'http://stackoverflow.com') as visited_same_site_forever,

    count(case when visited_site = 'http://stackoverflow.com' then '^_^' end) 
    = count(*) as visited_same_site_forever2

from z
group by person_id
order by person_id 
```

输出：

```
 person_id | visited_same_site_forever | visited_same_site_forever2 
-----------+---------------------------+----------------------------
        88 | f                         | f
     55327 | t                         | t
    256196 | f                         | f 
```

数据源：

```
create table z(person_id int, visited_site varchar(100), datetime_visited timestamp);

insert into z values
(55327,'http://stackoverflow.com','Jan 1, 2010'),
(55327,'http://stackoverflow.com','Feb 14, 2012'),
(55327,'http://stackoverflow.com','May 1, 2012'),
(256196,'http://stackoverflow.com','February 1, 2012'),
(256196,'http://stackoverflow.com','February 2, 2012'),
(256196,'http://slashdot.org','May 2, 2012'),
(88,'http://theregister.co.uk','April 1, 2012'),
(88,'http://slashdot.org','April 2, 2012'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T08:38:09.557

### 模拟`EVERY()`和`CASE`_`SUM()`

事实上，[这篇文章描述了如何`EVERY()`通过`CASE`和`SUM()`](http://blog.jooq.org/2014/12/18/a-true-sql-gem-you-didnt-know-yet-the-every-aggregate-function/)来模拟。以下两个语句是等价的：

```
SELECT EVERY(id < 10)
FROM book

SELECT CASE SUM(CASE WHEN id < 10 THEN 0 ELSE 1 END) 
         WHEN 0 THEN 1 
         ELSE 0 
       END
FROM book; 
```

`EVERY()`窗口函数也是如此：

```
SELECT 
  book.*, 
  EVERY(title LIKE '%a') OVER (PARTITION BY author_id)
FROM book

SELECT
  book.*,
  CASE SUM(CASE WHEN title LIKE '%a' THEN 0 ELSE 1 END)
       OVER(PARTITION BY author_id)
    WHEN 0 THEN 1 
    ELSE 0
  END
FROM book; 
```

### SQL 标准

该`SQL:2008`标准提到了`EVERY`聚合函数：

```
10.9 <aggregate function>

[...]

<aggregate function> ::=
  COUNT <left paren> <asterisk> <right paren> [ <filter clause> ]
  | <general set function> [ <filter clause> ]
  | <binary set function> [ <filter clause> ]
  | <ordered set function> [ <filter clause> ]

<general set function> ::=
  <set function type> <left paren> [ <set quantifier> ]
  <value expression> <right paren>

<set function type> ::=
  <computational operation>

<computational operation> ::=
  AVG
  | MAX
  | MIN
  | SUM
  | EVERY
  | [...] 
```

但“高级”SQL 标准特性通常不会由数据库实现。[例如， Oracle 11g](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions003.htm)不支持它，[SQL Server 2012](http://msdn.microsoft.com/en-us/library/ms173454.aspx)也不支持。

但是，使用[HSQLDB](http://hsqldb.org/doc/guide/dataaccess-chapt.html#N125CF)，您可能会更幸运。HSQLDB 2.x 非常符合标准，[MySQL 也知道`BIT_AND()`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_bit-and)聚合函数，它是 的非标准别名`EVERY()`，Postgres 也支持。

注意，有些数据库允许编写用户定义的聚合函数，所以你也可以`EVERY()`自己实现。

# java - 用java（Android）中的for迭代列表中的参数填充列表

> ID：10407362
> 
> 赞同：0
> 
> 时间：2012-05-02T03:34:52.930
> 
> 标签：java, list, for-loop, iteration

我正在尝试使用在包含该参数的对象列表中找到的参数填充字符串列表。我正在使用的代码如下

```
List<Object> objects = new ArrayList<Object>();
List<String> objectNames = new ArrayList<String>();

objects = something.fill_list();

for (Object o : objects){
     objectNames.add(o.getName());
} 
```

Object 代表我创建的一个类（它有一个不同的名称，这仅用于示例），something.fill_list() 和 o.getName() 方法也是如此。对象名称是对象类中的一个参数，使用 getName() 方法检索的字符串类型。

我不是 Java 大师，但我认为代码应该没问题，问题是我得到了 objectNames 列表，其中填充了所有与对象列表中最后一个 objectName 实际匹配的相等参数（列表中的每个名称都是相同的，名称从对象列表中的最后一个开始，希望这可以澄清）。

我可能错过了一些非常愚蠢的东西，但我无法解决它，我已经考虑过 something.fill_list() 方法中的错误，但我已经做了一些调试，一切看起来都很好。

提前致谢。

# javascript - 将变量传递给同一文档 Javascript / Ajax

> ID：10407363
> 
> 赞同：0
> 
> 时间：2012-05-02T03:35:19.977
> 
> 标签：javascript, jquery, html, ajax, anchor

我有一个 div 标签，里面有一个链接。我想单击 div 标签中的链接，但不是加载不同的页面，而是显示另一个 div 标签（使用 jquery 排序）并从该链接传递一个变量并在新的 div 标签中打印出来

```
<div id="link_1">
    <a href="" target="_self">Link</a>
</div>
<div id="link_1_description"></div>  
<script type="text/javascript">
    $("#link_1_description").hide(); 
    $("#link_1").click(function() {
      $("#link_1_description ?>").fadeToggle("slow");
    });
</script> 
```

任何形式的答案将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:46:21.070

试试这个：

```
$(function(){
   $("#link_1_description").hide();
   $("#link_1").click(function(e) {
      e.preventDefault();
      var v = "I Dont Know What You Mean";
      $("#link_1_description").text(v).fadeToggle("slow");
   });
}) 
```

[http://jsfiddle.net/EV7RY/1/](http://jsfiddle.net/EV7RY/1/)

# optimization - 为多张图片优化 Sprite CSS

> ID：10407364
> 
> 赞同：0
> 
> 时间：2012-05-02T03:35:25.747
> 
> 标签：optimization, css-sprites

在 Firefox 中显示背景图像时遇到了一些问题，我成功了，但对 CSS 变得如此臃肿感到惊讶。现在效果很好，但我需要为多个图像复制基本 CSS 代码。

谁能告诉我是否可以优化 CSS 类并最小化代码量。我无法使用已经使用的 id，并且 class='imga p0' 不起作用（其中 p0 仅保存背景位置，成为每个图像位置的 p1、p2、p3 ..）。

提前感谢您的任何建议。

```
a.imga0 {background:url(../images/sprite.png) no-repeat;background-color:transparent;
  display:block;width:24px;height:24px;background-position:-288px 0;} /* tick green */
a.imga1 {background:url(../images/sprite.png) no-repeat;background-color:transparent;
  display:block;width:24px;height:24px;background-position:-312px 0;} /* cross grey */
a.imga2 { .....  and so on. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:38:48.110

编辑：所以这应该消除重复

```
/* template */
a.imag0, a.imag1, a.imag2 {
    display: block;
    width: 24px;
    height: 24px;
    background:url(../images/sprite.png) no-repeat;background-color:transparent;
}

/* specifications */
a.imag0 {
    background-position:-288px 0;
}
a.imag1 {
    background-position:-312px 0;
} 
```

**对于一个你可以创建一个通用选择器**

```
a {
    background:url(../images/sprite.png) no-repeat;background-color:transparent;
    display: block;
} 
```

这将应用一般样式，例如精灵图像。

**您还可以创建一个单独的类（用空格指定更多类）**

例如，你可以有

```
<a class="imag0 spriteclass">something</a>
<a class="imag1 spriteclass">something</a>
<a class="imag2 spriteclass">something</a> 
```

和

```
a.spriteclass {
    //again the template, such as the sprite and display type and width
} 
```

**您的第二个选项是列出您希望 css 应用到的选择器，**

```
a.imag0, a.imag1, a.imag2... {
    // your general css
} 
```

然后像上面一样分别指定具体的精灵位置和细节

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T05:18:28.733

添加这个以防万一有人稍后引用这篇文章。

您可以使用以下工具生成最优化的 CSS。 [http://www.spritecss.com/](http://www.spritecss.com/)

# c# - 控制器名称上的 MVC 路由约束

> ID：10407365
> 
> 赞同：5
> 
> 时间：2012-05-02T03:35:28.623
> 
> 标签：c#, asp.net, asp.net-mvc, routes, asp.net-mvc-4

我的路线设置如下：

```
 context.MapRoute(
        name: "Area",
        url: "Area/{controller}/{action}",
        defaults: new
        {
            controller = "Home",
            action = "Dashboard"
        }
        );

        context.MapRoute(
        name: "AccountArea",
        url: "Area/{accountFriendlyId}/{controller}/{action}",
        defaults: new
        {
            controller = "Home",
            action = "Dashboard",
            accountFriendlyId = RouteParameter.Optional
        }
        );

        context.MapRoute(
        name: "AccountCampaignArea",
        url: "Area/{accountFriendlyId}/{campaignFriendlyId}/{controller}/{action}",
        defaults: new
                {
                    controller = "Home", 
                    action = "Dashboard",
                    accountFriendlyId = RouteParameter.Optional,
                    campaignFriendlyId = RouteParameter.Optional
                }
        ); 
```

而且我有强烈的愿望要`Area/friendlyAccountName/Home`带我去，`Dashboard()`但这不起作用（404）。我认为原因是我们去寻找一个friendlyAccountName 控制器。

知道如果我应该选择在我的一个控制器崩溃后命名一个帐户，那么如果字符串无法找到相应的控制器，是否有办法进入下一个路由？每次修改控制器列表时，是否有某种方法可以使用反射并避免维护约束？

**编辑**

您是否知道一种不使用反射或至少包含对该区域的派生类型搜索的方法？我不喜欢在第二个路由参数与控制器名称匹配时产生两次开销的想法（传递约束，然后在构造控制器时再次搜索）。我希望有一种方法可以在构造控制器时捕获异常，然后备份并下降到下一条路线。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T18:37:00.013

为什么你需要第一条路线？如果`{accountFriendlyId}`是可选的，您应该能够省略它并获得与您的第一个注册路由相同的路由默认值。

这样，它将首先匹配`AccountArea`命名路由，这是您想要的，然后如果`{accountFriendlyId}`未指定 an ，它将将该区域之后的第一个标记视为控制器。

事实上，我觉得你应该能够完全删除前两个路由并坚持最后一个，因为前两个路由参数是可选的，默认值是相同的。

**更新**

由于`{accountFriendlyId}`可能是一个有效的控制器操作名称，你可以做一些其他的事情：

1.  移动`{accountFriendlyId}`到路线的终点，而不是起点。这遵循从最广泛的资源到资源中特定细节的更自然的 URL 样式。
2.  使用[路线约束](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs)。理论上，您可以使用反射来生成正则表达式以匹配[自定义约束](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-custom-route-constraint-cs)中的控制器名称，或者您可以手动将它们写出来。像这样的东西：

上下文.MapRoute(

```
 name: "Area",
    url: "Area/{controller}/{action}",
    defaults: new
    {
        controller = "Home",
        action = "Dashboard",
        new { controller = @"(Account|Profile|Maintenance)" }
    } 
```

);

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T20:36:44.077

最终，为了方便我想要的（这取决于让应用程序动态区分任意字符串和控制器名称），我设置了这样的路由：

```
public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
        name: "AccountCampaignArea",
        url: "Area/{accountFriendlyId}/{campaignFriendlyId}/{controller}/{action}",
        defaults: new
            {
                controller = "Home",
                action = "Dashboard",
                accountFriendlyId = RouteParameter.Optional,
                campaignFriendlyId = RouteParameter.Optional,
                id = UrlParameter.Optional
            },
        constraints: new { accountFriendlyId = new ControllerNameConstraint(), campaignFriendlyId = new ControllerNameConstraint() }
        );

        context.MapRoute(
            name: "AccountArea",
            url: "Area/{accountFriendlyId}/{controller}/{action}",
            defaults: new
                {
                    controller = "Home",
                    action = "Dashboard",
                    accountFriendlyId = RouteParameter.Optional,
                    id = UrlParameter.Optional
                },
            constraints: new { accountFriendlyId = new ControllerNameConstraint() }
            );

        context.MapRoute(
        name: "Area",
        url: "Area/{controller}/{action}",
        defaults: new
            {
                controller = "Home",
                action = "Dashboard"
            }
        );
    } 
```

并设置这样的约束（也可以称为约束`NotControllerNameContraint`）：

```
public class ControllerNameConstraint : IRouteConstraint
{
    private static List<Type> GetSubClasses<T>()
    {
        return Assembly.GetCallingAssembly().GetTypes().Where(
            type => type.IsSubclassOf(typeof(T))).ToList();
    }

    public List<string> GetControllerNames()
    {
        List<string> controllerNames = new List<string>();
        GetSubClasses<Controller>().ForEach(
            type => controllerNames.Add(type.Name));
        return controllerNames;
    }
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        if (values.ContainsKey(parameterName))
        {
            string stringValue = values[parameterName] as string;
            return !GetControllerNames().Contains(stringValue + "Controller");
        }

        return true;
    }
} 
```

学分：[https ://stackoverflow.com/a/1152735/938472](https://stackoverflow.com/a/1152735/938472)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T05:04:23.270

这是一个 URL 空间问题。你如何区分 accountFriendlyId、campaignFriendlyId 和 controller ？最简单的方法是将它们放在 URL 的不同段中，但是对于您的路由，控制器可以是第二段、第三段或第四段。您必须使用约束来消除歧义，并像这样对它们进行排序：

```
context.MapRoute(null, "Area/{controller}/{action}",
   new { controller = "Home", action = "Dashboard" },
   new { controller = "Foo|Bar" });

context.MapRoute(null, "Area/{accountFriendlyId}/{controller}/{action}",
   new { controller = "Home", action = "Dashboard" },
   new { controller = "Foo|Bar" });

context.MapRoute(null, "Area/{accountFriendlyId}/{campaignFriendlyId}/{controller}/{action}",
   new { controller = "Home", action = "Dashboard" }); 
```

您建议的想法，如果找不到控制器，然后尝试下一个匹配的路由，它不会那样工作，一旦路由匹配，您将不得不修改它`UrlRoutingModule`以尝试使其工作。

# c# - 实施应用程序品牌的行业标准？

> ID：10407370
> 
> 赞同：2
> 
> 时间：2012-05-02T03:36:19.970
> 
> 标签：c#, branding

我目前正在制作原型，为我们的应用程序添加本地化和品牌支持。目前，我已经能够成功地利用本地化框架和自定义文化来支持本地化和品牌推广。

自定义文化使我能够拥有一个“en-US-BrandA”资源 DLL，其中包含“BrandA”的“en-US”语言的品牌特定资源。我还可以创建一个“ja-JP-BrandB”资源 DLL 来完成相同的任务，但这次是针对“ja-JP”语言和“BrandB”。

到目前为止，我还没有找到任何应​​用应用程序品牌的标准做法。最终，我想要完成的是不要将本地化和品牌化捆绑在一起。与上面的示例一样，文化主要用于应用品牌，但它不一定与品牌相关。

我可能错过了一些东西，所以如果有人已经或正在做应用程序品牌，如果你能分享你想出的或已经在你的应用程序中实现的东西，那就太好了。我想确定我的本地化和品牌推广方法是否是一个好主意。

TIA。

# vb.net - 矩形宽度（可能很容易回答）VB

> ID：10407373
> 
> 赞同：2
> 
> 时间：2012-05-02T03:36:51.393
> 
> 标签：vb.net, variables, resize

```
Dim energybar As New Rectangle(9, 154, energy, 21) 
```

那是我的新矩形，现在当我绘制它时

```
e.Graphics.FillRectangle(Brushes.Blue, energybar) 
```

它说没有宽度，但整数能量 = 到 100...

现在，我该如何解决这个问题？不过要简单一些...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:15:23.610

您的代码有效。我把它放在一个 Form_Paint 事件中，导致下面的图像。我强烈怀疑您的能量变量的值是问题所在。确保如果变量未在`Paint`方法中声明，则将其设为`Class`Scoped 变量：

```
Private Sub Form1_Paint(sender As Object, e As System.Windows.Forms.PaintEventArgs) Handles Me.Paint
    Dim energy As Integer = 100
    Dim energybar As New Rectangle(9, 154, energy, 21)

    e.Graphics.FillRectangle(Brushes.Blue, energybar)

End Sub 
```

![在此处输入图像描述](../Images/4efc10c1b71c32914e0d766b57abba18.png)

# android - 如何判断视频何时播放完毕？

> ID：10407374
> 
> 赞同：0
> 
> 时间：2012-05-02T03:37:12.253
> 
> 标签：android, video, android-intent, android-videoview

我有一个从网站播放视频的应用程序，当单击按钮时，它会播放视频。但现在我想添加一个全部播放按钮，一旦视频播放完毕，下一个视频将自动开始。那么有什么方法可以判断视频何时播放完毕，以便我可以开始播放下一个视频？此外，我没有在视频视图中播放此视频，视频正在通过意图在单独的播放器上播放，如下所示：

```
Intent intent = new Intent(Intent.ACTION_VIEW); 
intent.setDataAndType(Uri.parse(uriString), "video/flv"); 
startActivity(intent); 
```

所以我不认为完整的听众会在这里工作。我尝试了 startactivityforresult 但也没有用。所以任何关于做什么或如何让 startactivityforresult 工作的想法都会很好。谢谢你。

# sql-server-2008 - 使用窗口计划使用 SQL Server Express 计划每日备份

> ID：10407375
> 
> 赞同：0
> 
> 时间：2012-05-02T03:37:24.373
> 
> 标签：sql-server-2008, scheduled-tasks, database-backups

我想通过使用窗口计划来安排 SQL Server Express 的每日备份。我可以将我的数据库备份到 D 盘。但是当我尝试将我的数据库备份到 C 盘时。ms sql 向我返回此错误

```
 Msg 3201, Level 16, State 1, Line 3
Cannot open backup device 'C:\inetpub\Project backup Live\LewreDB backup\Wednesday\20120502.bak'. Operating system error 5(failed to retrieve text for this error. Reason: 15105).
Msg 3013, Level 16, State 1, Line 3
BACKUP DATABASE is terminating abnormally. 
```

这是我的查询

```
 DECLARE @pathName NVARCHAR(512) 
SET @pathName = 'C:\inetpub\Project backup Live\LewreDB backup\' + DATENAME(DW,GETDATE())+'\'+ Convert(varchar(8), GETDATE(), 112) + '.bak' 
BACKUP DATABASE [LEWREDB] TO  DISK = @pathName WITH NOFORMAT, NOINIT,  NAME = N'db_backup', SKIP, NOREWIND, NOUNLOAD,  STATS = 10 
```

有没有人遇到过这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:49:35.677

您是否尝试将远程服务器上的 SQL Server Express 数据库备份到本地 C: 驱动器？

当我认为我可以在远程数据库上执行 SQL 以备份到我的 C:\ 驱动器上的某个位置时，我遇到了类似的错误。

在任何情况下，我都可以推荐一种解决方法，在 Windows 计划任务触发的批处理文件中运行备份，并在批处理文件中包含一行，以将备份从 SQL Express 服务器上的 D: 驱动器位置复制到 C：开车地点无论在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:23:32.580

如果您使用的是 Windows，通常会发生这种情况。始终使用管理员权限运行应用程序，并检查您是否可以手动修改删除或在 c: 驱动器中创建文件夹。

# javascript - 在变量中使用 .each() .find() 和 .text()

> ID：10407376
> 
> 赞同：2
> 
> 时间：2012-05-02T03:37:29.023
> 
> 标签：javascript, jquery, xml, find, each

在过去的几个小时里，我一直试图弄清楚这一点，但我无法理解它，所以我有以下功能：

```
$("SPEECH",currentContext).each(function(){
        var speaker = $("#selectSpeaker").val();
        if($(this).find("SPEAKER").text()===speaker){
            var line = $(this).find("LINE").text();

            $("#speakers").append("<p class='speech'>" + speaker + "</p>" + "<p>" + line + "</p>");
        } 
    }); 
```

和 XML 标记为：http: [//pastebin.com/GhesMcay](http://pastebin.com/GhesMcay)

我正在做的是通过 XML 提取诸如`LINE`&之类的信息`SPEECH`，它工作得几乎完美，它找到了 selected `SPEAKER`，找到了`LINE`与扬声器关联的 ' 并输出它们。但是，我发现`LINE`XML 中连续的任何 ' 都被放置到 1 个长段落中，而不是每个的新段落中（就像我想要的那样）。通过这样做，对于连续的行，在一行的结尾和下一行的开头之间没有空格，因此行的开头和结尾单词被连接在一起。

据我所知，我可以说这归结为不寻找每一行，所以我的想法是`.each()`在变量中使用可以解决这个问题，但是我似乎无法让它工作。

任何帮助将不胜感激！

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T03:41:16.587

你所说的基本正确。如果`$(this).find("LINE")`返回多个项目，那么当您调用时`text()`，文本将被连接在一起。如果您想单独对每个人做某事，您可以使用`each`：

```
var lines = $(this).find("LINE");

lines.each(function(){
   var singleLine = $(this);

   // do something here
}); 
```

**编辑**：另一种选择是使用`map`：

```
var lines = $(this).find("LINE").map(function(){
    return "<p>" + $(this).text() + "</p>";
}).get().join("");

$("#speakers").append("<p class='speech'>" + speaker + "</p>" + lines); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T03:43:24.063

.find(...) 可能会返回一个项目数组。你应该映射它们：

```
$("SPEECH",currentContext).each(function(){
    var speaker = $("#selectSpeaker").val();
    if($(this).find("SPEAKER").text()===speaker){

        // treat this like an array, and return a new paragraph for each line:
        var lines = $.makeArray(
            $(this).find("LINE").map(function() { return "<p>" + $(this).text() + "</p>"; })
        );

        $("#speakers").append("<p class='speech'>" + speaker + "</p>" + lines.join(""));
    } 
}); 
```

编辑：忘记了 .map() 是具有返回值的那个......然后你必须调用 .makeArray。:( 不幸的是没有那么简单。

# visual-studio-2010 - Visual Studio 2010 崩溃

> ID：10407378
> 
> 赞同：3
> 
> 时间：2012-05-02T03:37:47.807
> 
> 标签：visual-studio-2010

我正在使用带有 SP1 的 Visual Studio 2010 Premium，以及安装在 Windows 7 x64 中的 Team Explorer 2008。最近我的 Visual Studio 2010 在进行编码时每隔 3-5 分钟就会崩溃一次，消息就像“Visual Studio 遇到问题”，然后是“Visual Studio 正在重新启动”。

我已经卸载并重新安装了 Visual Studio 2010 SP1 和 Visual Studio 2010 Premium，仍然遇到同样的问题，在进行编码时每 3-5 分钟崩溃一次。我什至重新安装了 Team Explorer 2010，但仍然没有解决问题。

无论如何要找出问题的原因是什么？

谢谢。

# c++ - 在 C++ 中返回一个类

> ID：10407379
> 
> 赞同：2
> 
> 时间：2012-05-02T03:38:04.250
> 
> 标签：c++, object

在 Java 中，所有类都是真正的引用，我这样做：

```
Car getCar(int mileage)
{
  Car car = new Car();

  car.setMileage(mileage);
  return car;
} 
```

在 C++ 中，我该怎么做？我可以将其放入参考：

```
void getCar(int mileage, Car& car)
{
  car.setMileage(mileage);
  return true;
} 
```

或者，我可以创建一个新对象：

```
Car* getCar(int mileage)
{
  Car* car = new Car;

  car.setMileage(mileage);
  return car;
} 
```

但是，调用者也负责删除`car`.

我不想返回一个指针。我要还车：

```
Car getCar(int mileage)
{
  Car car;

  car.setMileage(mileage);
  return car;
} 
```

但是，当然，`car`是一个局部变量，一旦函数完成，它将被删除。

通常这样做的“标准”方式是什么？哪个是最好的方法，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T03:41:18.553

您的最后一段代码很好——您返回的是局部变量的值，而不是局部变量本身，所以会发生什么（至少在理论上）该值将从局部变量复制到调用者的任何位置分配它。

这基本上与我有类似的东西相同：

```
int f() { 
    int x = 0; 
    return x;
} 
```

同样，我们正在返回一个值。该值恰好*来自*一个局部变量，但我们仍然返回该值，而不是变量。

就“至少在理论上”部分而言，大多数编译器都可以对此进行优化，因此根本不会发生复制。有一些特殊规则允许编译器跳过执行此复制，即使复制会产生您希望在复制发生时看到的外部可见副作用（例如，如果您编写了一个复制构造函数，它在副本发生了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T03:40:59.667

您的最后一个示例是返回对象的正确且惯用的方法：

```
Car getCar(int mileage)
{
  Car car;

  car.setMileage(mileage);
  return car;
} 
```

是的，`car`将在函数结束时被删除，但不会在它被复制到返回的对象之前。你可以像这样调用这个函数：

```
{
    Car myCar;
    myCar = getCar(42);
} 
```

`car`本地的被`getCar`复制到调用环境的`myCar`.

* * *

您不能也不能做的是返回对局部变量的引用或指针。这是错误的：

```
Car& getCar(int mileage)
{
  Car car;
  return car;
} 
```

这也是错误的：

```
Car* getCar(int mileage)
{
  Car car;
  return &car;
} 
```

在每种情况下，您都允许调用函数访问*不再存在的对象。*

您不能返回指向本地的指针或引用。您可以返回本地的副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T03:44:28.017

```
Car getCar(int mileage) {   Car car = new Car();    car.setMileage(mileage);   return car; } 
```

> 在 C++ 中，我该怎么做？我可以将其放入参考：

```
void getCar(int mileage, Car& car) {   car.setMileage(mileage);   return true; } 
```

是的——没关系，虽然你不能为`void`函数返回任何东西。

> 或者，我可以创建一个新对象：

```
Car* getCar(int mileage) {   Car* car = new Car;    car.setMileage(mileage);   return car; } 
```

> 但是，调用者也负责删除汽车。

没错……但是您可以使用智能指针来使其更加可靠和方便。

> 我不想返回一个指针。我要还车：

```
Car getCar(int mileage) {   Car car;    car.setMileage(mileage);   return car; } 
```

> 但是当然，car 是一个局部变量，一旦函数完成就会被删除。

不正确 - 这很完美 - car 对象*由 value*返回，这意味着它可以在堆栈上供调用者在表达式中使用，包括作为在其他地方复制的源。

> 通常这样做的“标准”方式是什么？哪个是最好的方法，为什么？

通常，上面的最后一个版本是“标准”方式 - 它通常足够高效（通常优化构建时最佳），避免混乱的指针，并且直观且简单。当然，从可以做到这一点的 C++ 到需要到处使用`new`变量的 Java 是很痛苦的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T07:30:36.143

需要很好理解的重要区别是，在 Java 中对象是通过引用进行的，并通过它们的地址来标识。

在 C++ 中，它们是“值”（如`int`）和......由它们的地址标识:-(（这是规范调用对象的方式）

无论成语说什么，您都必须做出决定：对您来说什么是重要的：价值还是地址？

`Person`具有相同值的两个`name`代表同一个（在现实世界中）*person*，或者两个实词同音*person* -s？在您的上下文中，多态性有多重要？（是否有多种“*人*-s”由不同的`Person`-派生表示）？

这不是“成语”所说的。这是您必须建立的约定。

如果您想使用值，请按值返回（注意：在大多数情况下，编译器会忽略返回时复制，因此它不是性能限制器），但忘记了多态性。但是，如果您的对象包含一些资源，请确保它们也遵循“按值”范式，否则请准备好覆盖构造函数、析构函数、复制构造函数、移动构造函数和赋值以正确处理资源所有权。或者......使用按值资源管理器将它们包装起来（智能指针可以做到这一点）。

如果您想使用地址并需要多态性，那么请准备好在堆上分配对象，使用指针，并正确管理分配/释放（最终在智能指针的帮助下，如`unique_ptr`or `shared_ptr`）。

对于这两种情况，都有一系列的习语和模式，但第一点是了解你的目标是什么*模型*，并且表现得连贯。

但是你无论如何都不会得到一件事：C++ 永远不会“像 java”。所以不要试图模仿它。按值或按指针（按引用变化不大），您必须以另一种方式思考。

# c# - 禁用 asp.net mvc 成员资格和角色表创建

> ID：10407380
> 
> 赞同：0
> 
> 时间：2012-05-02T03:38:13.377
> 
> 标签：c#, mysql, asp.net-mvc, asp.net-membership

我正在使用 asp.net mvc。每次我运行/编译程序时，它都会创建成员资格和角色表。有没有办法禁用或停止它？我没有使用那些表。我在登录时创建了自己的表。请指教，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T03:47:53.270

这可能是因为内置的会员提供程序。

在创建时选择“Internet 站点”选项的标准新 ASP.NET MVC 3 项目中，web.config 文件包含以下部分：

```
 <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

和

```
<membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
         enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
         applicationName="/" />
  </providers>
</membership> 
```

和

```
<roleManager enabled="false">
  <providers>
    <clear/>
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
    <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
  </providers>
</roleManager> 
```

这些可能是创建表的原因。

# c++ - 如何将 boost::spirit::lex 令牌的值从 iterator_range 转换为字符串？

> ID：10407382
> 
> 赞同：5
> 
> 时间：2012-05-02T03:38:24.080
> 
> 标签：c++, boost, boost-spirit, boost-spirit-lex

当我尝试从 iterator_range 转换令牌的值时，词法分析器在尝试读取下一个令牌时失败。

这是包含令牌定义的 Tokens 结构：（我认为这不相关，但我包括在内以防万一。）

```
template <typename Lexer>
struct Tokens : boost::spirit::lex::lexer<Lexer>
{
    Tokens();

    boost::spirit::lex::token_def<std::string> identifier;
    boost::spirit::lex::token_def<std::string> string;
    boost::spirit::lex::token_def<bool> boolean;
    boost::spirit::lex::token_def<double> real;
    boost::spirit::lex::token_def<> comment;
    boost::spirit::lex::token_def<> whitespace;
};

template <typename Lexer>
Tokens<Lexer>::Tokens()
{
    // Define regex macros
    this->self.add_pattern
        ("LETTER", "[a-zA-Z_]")
        ("DIGIT", "[0-9]")
        ("INTEGER", "-?{DIGIT}+")
        ("FLOAT", "-?{DIGIT}*\\.{DIGIT}+");

    // Define the tokens' regular expressions
    identifier = "{LETTER}({LETTER}|{DIGIT})*";
    string = "\"[a-zA-Z_0-9]*\"";
    boolean = "true|false";
    real = "{INTEGER}|{FLOAT}";
    comment = "#[^\n\r\f\v]*$";
    whitespace = "\x20\n\r\f\v\t+";

    // Define tokens
    this->self
        = identifier
        | string
        | boolean
        | real
        | '{'
        | '}'
        | '<'
        | '>';

    // Define tokens to be ignored
    this->self("WS")
        = whitespace
        | comment;
} 
```

这是我的令牌和词法分析器类型的定义：

```
typedef lex::lexertl::token<char const*> TokenType;
typedef lex::lexertl::actor_lexer<TokenType> LexerType; 
```

这是我用于读取令牌并将其值转换为字符串的代码。

```
Tokens<LexerType> tokens;

std::string string = "9index";
char const* first = string.c_str();
char const* last = &first[string.size()];
LexerType::iterator_type token = tokens.begin(first, last);
LexerType::iterator_type end = tokens.end();

//typedef boost::iterator_range<char const*> iterator_range;
//const iterator_range& range = boost::get<iterator_range>(token->value());
//std::cout << std::string(range.begin(), range.end()) << std::endl;

++token;

token_is_valid(*token); // Returns false ONLY if I uncomment the above code 
```

此代码的输出是“9”（它读取第一个数字，在流中留下“索引”）。如果此时我打印出 string(first, last) 的值，它会显示“ndex”。由于某种原因，词法分析器在那个“i”字符上失败了？

我什至尝试使用 std::stringstream 进行转换，但这也会导致下一个令牌无效：

```
std::stringstream out;
out << token->value();
std::cout << out.str() << std::endl;

++token;

token_is_valid(*token); // still fails 
```

最后，如果我只是将令牌的值发送到 cout，则下一个令牌是有效的：

```
std::cout << token->value() << std::endl;

++token;

token_is_valid(*token); // success, what? 
```

关于 token->value() 返回的 iterator_range 如何工作，我缺少什么？我用于将其转换为字符串的方法都没有修改 integer_range 或词法分析器的输入字符流。

**编辑：**我在这里添加这个，因为评论回复太短，无法完全解释发生了什么。

我想到了。正如 sehe 和 drhirsch 指出的那样，我最初问题中的代码是我实际正在做的事情的经过消毒的版本。我正在使用带有测试夹具类的 gtest 单元测试来测试词法分析器。作为该类的成员，我有 void scan(const std::string& str) 从给定的字符串分配第一个和最后一个迭代器（夹具的数据成员）。问题是一旦我们退出这个函数， const std::string& str 参数就会*从堆栈中弹出并且不再存在*，即使它们是夹具的数据成员，也会使这些迭代器无效。

**故事的寓意：**只要您希望读取令牌，迭代器传递给 lexer::begin() 所引用的对象就应该存在。

我宁愿删除这个问题也不愿在互联网上记录我的愚蠢错误，但为了帮助社区，我想我应该离开它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T09:10:48.267

从给定的代码来看，您似乎正在查看编译器/库错误。我无法使用以下任何组合重现该问题：

> **现在编辑**包括 clang++ 和 boost 1_49_0。Valgrind 对选定数量的测试用例进行了清理。

*   铿锵++ 2.9，-O3，提升 1_46_1
*   铿锵++ 2.9，-O0，提升 1_46_1
*   铿锵++ 2.9，-O3，提升 1_48_0
*   铿锵++ 2.9，-O0，提升 1_48_0
*   铿锵++ 2.9，-O3，提升 1_49_0
*   铿锵++ 2.9，-O0，提升 1_49_0

*   gcc 4.4.5，-O0，提升 1_42_1

*   gcc 4.4.5，-O0，提升 1_46_1
*   gcc 4.4.5，-O0，提升 1_48_0
*   gcc 4.4.5，-O0，提升 1_49_0
*   gcc 4.4.5，-O3，提升 1_42_1
*   gcc 4.4.5，-O3，提升 1_46_1
*   gcc 4.4.5，-O3，提升 1_48_0
*   gcc 4.4.5，-O3，提升 1_49_0
*   gcc 4.6.1，-O0，提升 1_46_1
*   gcc 4.6.1，-O0，提升 1_48_0
*   gcc 4.6.1，-O0，提升 1_49_0
*   gcc 4.6.1，-O3，提升 1_42_1
*   gcc 4.6.1，-O3，提升 1_46_1
*   gcc 4.6.1，-O3，提升 1_48_0
*   gcc 4.6.1，-O3，提升 1_49_0

完整代码测试：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/lex_lexertl.hpp>

namespace qi    = boost::spirit::qi;
namespace lex   = boost::spirit::lex;

template <typename Lexer>
struct Tokens : lex::lexer<Lexer>
{
    Tokens();

    lex::token_def<std::string> identifier;
    lex::token_def<std::string> string;
    lex::token_def<bool> boolean;
    lex::token_def<double> real;
    lex::token_def<> comment;
    lex::token_def<> whitespace;
};

template <typename Lexer>
Tokens<Lexer>::Tokens()
{
    // Define regex macros
    this->self.add_pattern
        ("LETTER", "[a-zA-Z_]")
        ("DIGIT", "[0-9]")
        ("INTEGER", "-?{DIGIT}+")
        ("FLOAT", "-?{DIGIT}*\\.{DIGIT}+");

    // Define the tokens' regular expressions
    identifier = "{LETTER}({LETTER}|{DIGIT})*";
    string = "\"[a-zA-Z_0-9]*\"";
    boolean = "true|false";
    real = "{INTEGER}|{FLOAT}";
    comment = "#[^\n\r\f\v]*$";
    whitespace = "\x20\n\r\f\v\t+";

    // Define tokens
    this->self
        = identifier
        | string
        | boolean
        | real
        | '{'
        | '}'
        | '<'
        | '>';

    // Define tokens to be ignored
    this->self("WS")
        = whitespace
        | comment;
}

////////////////////////////////////////////////
typedef lex::lexertl::token<char const*> TokenType;
typedef lex::lexertl::actor_lexer<TokenType> LexerType;

int main(int argc, const char *argv[])
{
    Tokens<LexerType> tokens;

    std::string string = "9index";
    char const* first = string.c_str();
    char const* last = &first[string.size()];
    LexerType::iterator_type token = tokens.begin(first, last);
    LexerType::iterator_type end = tokens.end();

    typedef boost::iterator_range<char const*> iterator_range;
    const iterator_range& range = boost::get<iterator_range>(token->value());
    std::cout << std::string(range.begin(), range.end()) << std::endl;

    ++token;

    // Returns false ONLY if I uncomment the above code
    std::cout << "Next valid: " << std::boolalpha << token_is_valid(*token) << '\n'; 

    return 0;
} 
```

# c - 循环展开 -Microblaze C 编程

> ID：10407389
> 
> 赞同：3
> 
> 时间：2012-05-02T03:39:42.003
> 
> 标签：c, openmp, fpga, microblaze

我们可以使用 EDK 在 Microblaze C 编程中展开循环吗？

这是必需的，因为我需要更多性能。传统上，我的 C 代码将串行运行，因此使用一些编译器指令展开循环可以加速我的应用程序。
（例如，就像我们使用 openMP 所做的那样）。

```
#pragma Unroll 
for (i = 0; i < 100; i++ ) {
    a[i] = fetch_data(i);
} 
```

这对 Microblaze 来说可能吗？如果是的话，有没有同样的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T04:17:11.430

不，没有任何像那样的自动循环展开。对于像这样的紧密循环，赛灵思论坛上的常见建议是手动展开 10-20 次，看看性能是否可以接受，或者在汇编中编写循环代码。

您通常会在每个循环分支上丢失 3 或 4 个时钟周期，因此根据 fetch_data 执行所需的时间，您可以确定要展开多少。

```
for (i = 0; i < 100; i+=10 ) { 
    a[i] = fetch_data(i); 
    a[i+1] = fetch_data(i+1); 
    a[i+2] = fetch_data(i+2); 
    a[i+3] = fetch_data(i+3); 
    a[i+4] = fetch_data(i+4); 
    a[i+5] = fetch_data(i+5); 
    a[i+6] = fetch_data(i+6); 
    a[i+7] = fetch_data(i+7); 
    a[i+8] = fetch_data(i+8); 
    a[i+9] = fetch_data(i+9); 
} 
```

确保注意标准循环展开警告，例如注意不是增量步长倍数的间隔大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:24:22.193

我收到了 Xilinx 的回复（虽然我还没有验证）：

[http://gcc.gnu.org/onlinedocs/gcc-3.3.6/gcc/Optimize-Options.html](http://gcc.gnu.org/onlinedocs/gcc-3.3.6/gcc/Optimize-Options.html)

-funroll-loops 部分

不同的 -O 优化开关（直接在 SDK GUI 中可用）可能会进行循环展开，因为它启用了 -floop-optimize 哪些状态：

-floop-optimize 执行循环优化：将常量表达式移出循环，简化退出测试条件，并可选择进行强度降低和循环展开。

在-O、-O2、-O3、-Os 级别启用。

# ruby - 如何在 Ruby 中使用 %w[text] 而不包括 \n 换行

> ID：10407390
> 
> 赞同：6
> 
> 时间：2012-05-02T03:39:55.343
> 
> 标签：ruby, string

我想建立一个状态缩写列表的数组，因为它很长，我想把它分成几行。但是，使用 %w 或 %W 包括换行处的 \n。

```
STATES = %w(AL AK AZ AR CA CO CT DE FL GA HI ID IL IN IA KS KY LA ME\
  MD MA MI MN MS MO MT NE NV NH NJ NM NY NC ND OH OK OR PA RI SC SD\
  TN TX UT VT VA WA WV WI WY) 
```

`"ME"`将是,`"ME\n"`将`"SD"`是`"SD\n"`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-02T03:43:02.090

只需删除斜线，不会有任何换行符或斜线

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:04:23.687

```
irb(main):003:0* STATES = %w(AL AK AZ AR CA CO CT DE FL GA HI ID IL IN IA KS KY LA ME\
irb(main):004:0]   MD MA MI MN MS MO MT NE NV NH NJ NM NY NC ND OH OK OR PA RI SC SD\
irb(main):005:0]   TN TX UT VT VA WA WV WI WY).collect(&:chomp)
=> ["AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"] 
```

# permutation - 组合和排列

> ID：10407391
> 
> 赞同：0
> 
> 时间：2012-05-02T03:39:59.867
> 
> 标签：permutation, combinations, probability, discrete-mathematics

某间教室有两排座位。前排8个座位，后排10个座位。如果某组 4 名学生拒绝坐在后排，如果某组 5 名学生拒绝坐在前排，有多少种方式让 15 名学生坐下？

我的方法：4个必须走前，5个必须后退。所以我把他们分成4组

```
1) 4 front 4 others / 5 back 2 others
2) 4 front 3 others / 5 back 3 others
3) 4 front 2 others / 5 back 4 others
4) 4 front 1 others / 5 back 5 others 
```

但是，我不能将它们放入方程式中。

另外，如果有人知道有很多组合问题的网站和详细的解决方案，请告诉我。我发现的网站只有非常基本的信息。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T03:53:53.470

您可以分别考虑这三组学生。

*   对于必须坐在前排的那一组，他们有`8 Perm 4`
    不同的可能坐的地方。
*   对于必须坐在后排的那一组，他们有`10 Perm 5`不同的可能坐的位置。
*   对于剩下的`6`学生来说，总会有`18 - 4 - 5 = 9`座位供他们选择，因此是一共有`9 Perm 6`选择。

所有这些都产生了`(8!/4!)(10!/5!)(9!/3!) = 3072577536000`。

**注意**：这与 R. Brualdi, *Introductory combinatorics*中的第 3 章中的问题 14 非常相似，这是家庭作业吗？

# sql-server - SQL Server 如何在存储过程中存储 SQL 语句

> ID：10407392
> 
> 赞同：1
> 
> 时间：2012-05-02T03:40:06.143
> 
> 标签：sql-server, stored-procedures, powershell

我有一个数据库，其中存储过程的数量非常多。但是有一些存储过程我还没有在存储过程级别启动事务。

现在我想以自动化的方式为这些存储过程放置事务。目前我正在使用 PowerShell 来执行此操作。

但问题是我可以获得存储过程的定义，但我无法获取存储过程中的各个 SQL 语句，以便我可以编写一些事务回滚/提交条件

例如如果上述交易失败`@@errorcount <> 0 then rollback`

任何人都可以让我知道如何实现这一点，或者有没有其他方法可以做到这一点？如果我可以拆分 SQL 语句（在存储过程中），我可以在 PowerShell 中编写一些登录信息来操作存储过程

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:39:55.463

它们存储为文本，因此要检查甚至更改正文作为语句，您需要一个[parser](https://stackoverflow.com/q/76083/21567)。您可能[会](https://stackoverflow.com/a/2787155/21567)`Microsoft.Data.Schema.ScriptDom.dll`使用 Visual Studio (和)也使用的解析器[`Microsoft.Data.Schema.ScriptDom.Sql.dll`](http://msdn.microsoft.com/en-us/library/microsoft.data.schema.scriptdom.sql.aspx)，它在您的 Visual Studio 安装中可用并且可以[重新分发](http://blogs.msdn.com/b/gertd/archive/2008/08/22/redist.aspx)。我目前正在使用它们来检查某些 SQL 脚本是否不包含任何“不允许的”SQL 语句（当然，在我自己的上下文中是不允许的）并且它似乎有效。

话虽如此，我同意@RobertLDavis 的评论，这可能不像看起来那么容易，最好不要自动完成。此外，无论如何，您*应该*在之后查看所有更改。因此，您可能一开始就可以手动完成它们。

# iphone - 集成来自 GCCalendar 的 eventkit 以显示一天的事件

> ID：10407393
> 
> 赞同：0
> 
> 时间：2012-05-02T03:40:09.097
> 
> 标签：iphone, ios, events, calendar

我正在[从 Github 实现 gccalendar 的日历视图](https://github.com/fraca7/GCCalendar)。

作为示例添加的事件显示在所有日期。我必须将 eventkit 集成到它以添加事件。如何显示当天添加的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:03:58.073

是的，您必须在逻辑上集成 gccalenadr 和 eventkit 源以显示特定日期的事件。

# jquery - 页面加载后 jQueryMobile 滚动到 Div

> ID：10407394
> 
> 赞同：0
> 
> 时间：2012-05-02T03:40:10.973
> 
> 标签：jquery, jquery-mobile

使用 jquery Mobile，当整个页面完成加载时，我试图滚动到页面中间的#id。因此，当用户到达页面时，用户位于页面顶部，然后很快滚动到#example。

使用 $mobile.silentScroll，它似乎根本没有触发。

```
$('#page').live( 'pageinit', scrollDown);

function scrollDown() {
    var myDivPos = $('#example').offset().top;
    $.mobile.silentScroll( myDivPos );
} 
```

在手机上平滑滚动到 $('#example') 的最佳方法是什么？我尝试了[scrollTo](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)插件，它适用于我的移动网站的桌面版本，但不适用于移动设备。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T04:15:49.183

jQuery Mobile 和任何支持 jQuery 的移动设备都*完全*支持动画。话虽如此，我们可以捕获示例的 offset.top 并使用它来让页面滚动。

一个工作的[jsFiddle 已经包含在内](http://jsfiddle.net/UtQtk/1/)，但代码很少，发布在下面：

```
$(function(){     
  $('html, body').animate({
    scrollTop: $('#example').offset().top
  });
}); 
```

希望能帮助到你。

# c++ - 从字符串中分离不同的数据

> ID：10407396
> 
> 赞同：0
> 
> 时间：2012-05-02T03:40:21.877
> 
> 标签：c++, string, vector

我有字符串向量，其数据集如下所示。

```
vector<string> result;

<index> | <Name> | <email> | <status>

    1|duleep|dfe@gamil.com|0
    2|dasun|dasun@da.com|0
    3|sampath|lkdf@dg.lk|1
    4|Nuwan|Kandyjkj@lkj.com|0 
```

现在我想获得单独的矢量数据（名称、索引、状态），请建议使用 C++ 执行此操作的最佳方法（如何转换为字符串数组 [4] [4]？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:59:06.627

这是我使用[boost::tokenizer](http://www.boost.org/doc/libs/1_49_0/libs/tokenizer/index.html)提出的一个示例（如果您不想使用 boost，那么抱歉）：

```
#include <iostream>
#include <boost/tokenizer.hpp>
#include <string>
#include <vector>
int main()
{
  std::vector<std::string> v;
  v.push_back("1|duleep|dfe@gamil.com|0");
  v.push_back("2|dasun|dasun@da.com|0");
  v.push_back("3|sampath|lkdf@dg.lk|1");
  v.push_back("4|Nuwan|Kandyjkj@lkj.com|0");

  boost::char_separator<char> sep("|");
  std::vector<boost::tokenizer<boost::char_separator<char>>> tokens;
  for (auto& s : v)
  {
    tokens.push_back({s, sep});
  }
} 
```

如果您想使用`std::string array[4][4]`，只需遍历令牌并将它们分配给您的数组。

这是另一种没有提升的方法：

```
 for (auto& s : v)
  {
    std::stringstream ss(s);
    std::string token;
    while (std::getline(ss, token, '|'))
    {
        // Put token into your array here
    }
  } 
```

# ruby-on-rails - 将数据从 csv 文件导入到 postgresql 中——最好的方法？

> ID：10407398
> 
> 赞同：2
> 
> 时间：2012-05-02T03:40:36.917
> 
> 标签：ruby-on-rails, database, postgresql, csv, import

嗨，我有一个 csv 文件格式的数据，我想导入我的 postgresql。postgresql 将在我的 rails 应用程序中用作预填充的数据库。我意识到 rails 使用 ORM 。所以我想知道像这样将数据导入数据库是否有好处。

如果不是我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T04:02:34.280

通常，对于批量加载，您将需要使用该[`COPY`](http://www.postgresql.org/docs/current/static/sql-copy.html)界面，或者，如果您可以承受停机时间并且要加载真正庞大的数据量，[`pg_bulkload`](http://pgbulkload.projects.postgresql.org/).

`COPY`可以是客户端或服务器端。对于客户端，`COPY`您的客户需要支持它。`libpq`和`psql`客户一样。PgJDBC 也支持`COPY`从客户端。我不知道 Ruby 的数据库接口是否可以，但我对此表示怀疑。如果不是，`COPY`如果您在服务器上具有适当的访问权限，则可以使用服务器端，或者您可以使用 psql命令`psql`进行批量导入。`\copy`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T03:46:25.363

这个问题中的示例代码在很大程度上回答了您的问题 - [Ignore first line on csv parse Rails](https://stackoverflow.com/questions/2818669/ignore-first-line-on-csv-parse-rails)

但是，我无权将此问题标记为重复问题。

# iphone - 将应用内视频保存到相机胶卷？

> ID：10407401
> 
> 赞同：3
> 
> 时间：2012-05-02T03:41:09.783
> 
> 标签：iphone, video, camera

是否可以拍摄嵌入在应用程序中的视频并将其保存到相机胶卷中？如果是这样，怎么做？它是同一个 UIWriteImage 的东西吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T08:41:15.917

假设您已经知道如何保存图像，您可以尝试此代码：

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
    if([mediaType isEqualToString:(NSString *)kUTTypeMovie]) {
       //Save the video
       NSURL *movieUrl = [info objectForKey:UIImagePickerControllerMediaURL];
       UISaveVideoAtPathToSavedPhotosAlbum([movieUrl relativePath], self,@selector(movie:didFinishSavingWithError:contextInfo:), nil);
    }
} 
```

或者你可以试试：

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
  if([mediaType isEqualToString:(NSString *)kUTTypeMovie]) {
    NSURL *movieUrl = [info objectForKey:UIImagePickerControllerMediaURL];
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    [library writeVideoAtPathToSavedPhotosAlbum:movieUrl completionBlock:^(NSURL *assetURL, NSError *error){
        if(error) {
            NSLog(@"CameraViewController: Error on saving movie : %@ {imagePickerController}", error);
        }
        else {
            NSLog(@"URL: %@", assetURL);
        }
    }];
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-16T18:23:11.830

对于 iOS 8 及更高版本，请使用[PHPhotoLibrary](https://developer.apple.com/library/ios/documentation/Photos/Reference/PHPhotoLibrary_Class/index.html#//apple_ref/occ/cl/PHPhotoLibrary)。*ALAssetsLibrary*已弃用。

包括：

```
@import PhotosUI; 
```

然后用它来保存你的电影：

```
[[PHPhotoLibrary sharedPhotoLibrary] performChanges:^
 {
     [PHAssetChangeRequest creationRequestForAssetFromVideoAtFileURL:<%Your Movie URL%>];
 }
                                  completionHandler:^(BOOL success, NSError *error)
 {
     if (success) {
         NSLog(@"Movie saved to camera roll.");
     }
     else {
         NSLog(@"Could not save movie to camera roll. Error: %@", error);
     }
 }]; 
```

# python - 在 UNIX 上执行 Python 代码

> ID：10407407
> 
> 赞同：1
> 
> 时间：2012-05-02T03:42:29.237
> 
> 标签：python, unix

我编写了一个 Python 程序来分析给定目录中存在的一组文件，即它要求一个路径，然后它进入路径目录并找到指定的文件，处理它们并生成一个输出文件。但是，每次我想在 UNIX 机器上执行程序时，我都必须编写`python my_prog.py`. 此外，要处理目录，必须先将程序复制到该目录，然后再执行。

我想这样做，以便在 UNIX 中我`my_prog`在任何目录中键入要执行的程序，这意味着摆脱将程序文件复制到目标目录。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T03:45:55.153

使您的程序可执行

```
chmod +x my_prog.py 
```

放

```
#!/usr/bin/env python 
```

（或其变体）放在源文件的顶部，并将 my_prog.py 脚本放入路径中的目录中（即，通常由环境变量定义的目录集中的某个位置，该`PATH`环境变量用于搜索要执行的命令执行）。

一旦您的程序在您的路径中，您将能够从任何地方执行它，即，无需将程序放在您的当前目录中或完全指定它的目录路径。

`PATH`您应该能够使用以下命令在大多数 shell中查看当前环境变量的值：

```
env | grep -i path 
```

或者

```
echo $PATH 
```

以防万一，这里有一些关于 PATH 变量的基本信息：[http](http://www.cs.purdue.edu/homes/cs348/unix_path.html) ://www.cs.purdue.edu/homes/cs348/unix_path.html和 [http://kb.iu.edu/data/acar。 .html](http://kb.iu.edu/data/acar.html) _ 谷歌将产生更多。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T03:43:38.020

与往常一样，添加一个[shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)行，使其[可执行](http://en.wikipedia.org/wiki/Filesystem_permissions)，然后将其复制到`$PATH`.

# java - 码头持久会话 - 只写？

> ID：10407408
> 
> 赞同：2
> 
> 时间：2012-05-02T03:42:55.447
> 
> 标签：java, session, persistence, jetty, wicket

我一直试图让 Jetty 的会话持久性工作。它实际上是将会话写入磁盘，但它似乎没有将它们读回，因为当我的应用程序有机会读取会话时，我的会话数据已全部消失。

我们这样配置它：

```
HashSessionManager sessionManager = new HashSessionManager();
sessionManager.setStoreDirectory(new File("sessions"));

// If I don't put in this next line, it seems like it "never" saves sessions to disk.
// Or at least I don't have the patience to wait however long it must take to do so.
sessionManager.setSavePeriod(5);//seconds

// Supposedly if you don't turn this on it can cause problems for some of the things
// Wicket puts in the session because Jetty would otherwise initialise the objects in
// the session before Wicket itself initialises.
sessionManager.setLazyLoad(true);

// ...
servletHandler.setSessionHandler(new SessionHandler(sessionManager)); 
```

文档似乎没有提到任何明显的缺陷，除了我已经在上面的代码中通过启用延迟加载来克服的缺陷。但是该类中还有很多其他会话，并且几乎所有会话都没有在 Javadoc 中记录，因此除了挖掘其源代码以查找潜在错误之外，很难知道从这里去哪里......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:56:07.923

一天后回答我自己的问题。我尝试将自定义键值对添加到会话中，发现它可以很好地保留在会话中。在这样做的同时，我还注意到会话文件的大小在稳步增长，如果每次重新启动服务器时似乎整个会话都被清除，这似乎特别不寻常！

所以我写了一些代码来转储所有的会话数据，并发现 Wicket 在会话中有多个像这样的值（到现在为止，只有大约 10 倍的键值对）：

```
检票口：SessionUnbindingListener-com.acme.server.web.DispatcherServlet-1037224009=org.apache.wicket.session.HttpSessionStore$SessionBindingListener@5b3ab386
检票口：SessionUnbindingListener-com.acme.server.web.DispatcherServlet-1306414591=org.apache.wicket.session.HttpSessionStore$SessionBindingListener@33048394
摆动=摆动
检票口：com.acme.server.web.DispatcherServlet-1037224009:session=com.acme.server.webui.ServerWebUISession@30e97557
wicket:com.acme.server.web.DispatcherServlet-1037224009:wicket:persistentPageManagerData - com.acme.server.web.DispatcherServlet-1037224009=org.apache.wicket.page.PageStoreManager$SessionEntry@20e39570
wicket:com.acme.server.web.DispatcherServlet-1306414591:currentUser=com.acme.server.auth.DefaultServerUser@2f16bbd7[id=2,name=admin,roles=[admin, user]]
wicket：com.acme.server.web.DispatcherServlet-1306414591：roles=admin，用户
检票口：com.acme.server.web.DispatcherServlet-1306414591:session=com.acme.server.webui.ServerWebUISession@6b8cb5cd
wicket:com.acme.server.web.DispatcherServlet-1306414591:wicket:persistentPageManagerData - com.acme.server.web.DispatcherServlet-1306414591=org.apache.wicket.page.PageStoreManager$SessionEntry@517d59d0

```

这让我疯狂地搜索“com.acme.server.web.DispatcherServlet-1037224009”。结果是 servlet 的 getServletName() 的值。getServletName() 的 Javadoc 说 servlet 名称将是 servlet 的类名，但是对于 Jetty，实际上*并非*如此——它还在末尾附加了某种随机数。所以事实证明这是一个 Jetty + Wicket 的特性，Wicket 将 servlet 名称放入会话密钥中，然后 Jetty 不会根据 API 文档生成 servlet 名称。

修复当然是为调度程序 servlet 设置已知名称的单行程序。

# mysql - MySQL 错误 2002 - 无法通过 64 位上的套接字“/tmp/mysql.sock”连接，32 位卸载失败使事情变得复杂

> ID：10407412
> 
> 赞同：1
> 
> 时间：2012-05-02T03:43:24.857
> 
> 标签：mysql, mysql-error-2002

我是 Macs/MySQL 的新手，正在努力让 MySQL 正常工作。我在 64 位 Lion 上，首先尝试从命令行安装 32 位 MySQL。然后我尝试删除它并用 64 位 DMG 替换它，但 mysql -V 的结果表明 32 位可能仍以某种形式存在。尝试运行 MySQL 相关命令时出现 2002 错误，但 Python 的 MySQLdb 工作正常。以下是更多信息；请让我知道如何让这个工作。

我知道通常使用某种链接来解决问题，但我找不到适合我的文件结构的答案。我会尽量回应更多信息的要求。谢谢！

```
bash-3.2$ mysql -V
mysql  Ver 14.14 Distrib 5.1.62, for apple-darwin10.3.0 (i386) using readline 5.1

bash-3.2$ mysql
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)

bash-3.2$ mysqld
120501 20:21:42 [Warning] Can't create test file /usr/local/mysql-5.1.62-osx10.6-x86_64/data/MDP-main.lower-test
120501 20:21:42 [Warning] Can't create test file /usr/local/mysql-5.1.62-osx10.6-x86_64/data/MDP-main.lower-test
mysqld: Can't change dir to '/usr/local/mysql-5.1.62-osx10.6-x86_64/data/' (Errcode: 13)
120501 20:21:42 [ERROR] Aborting
120501 20:21:42 [Note] mysqld: Shutdown complete

bash-3.2$ ls /usr/local
MySQL-python-1.2.3              mysql
bin                             mysql-5.1.62-osx10.6-x86_64
etc                             share
git 
```

还有我的 bash 路径：

```
PATH=$PATH:/usr/local/mysql/bin:/usr/local/mysql-5.1.62-osx10.6-x86_64/bin      
export PATH 
```

* * *

编辑1：响应“权限”建议，它似乎不适用于当前形式：

```
bash-3.2$ chown -R mysql.mysql /usr/local/mysql
chown: mysql.mysql: Invalid argument 
```

在该目录中：

```
bash-3.2$ ls -a /usr/local/mysql
.               README          include         scripts
..              bin             lib             share
COPYING         data            man             sql-bench
INSTALL-BINARY  docs            mysql-test      support-files 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:12:24.703

它是一个权限问题。尝试：

```
chown -R mysql.mysql /usr/local/mysql 
```

> 代替 ”。” 上一篇文章中的“：”

```
 chown -R mysql:mysql /usr/local/mysql
./usr/local/mysql/bin/mysqld stop
./usr/local/mysql/bin/mysqld start 
```

[http://support.apple.com/kb/ht2963](http://support.apple.com/kb/ht2963)

# sql - 如何获取仅包含第 2 列给定值的第 1 列值？

> ID：10407415
> 
> 赞同：0
> 
> 时间：2012-05-02T03:43:44.360
> 
> 标签：sql, join, distinct, where-clause

我想选择**仅**出现在墨西哥而不出现在任何其他国家/地区的名称。

```
Country      |  Name      
-------------|------------
Mexico       |  Vallejo
Mexico       |  Rachel
United States|  Rachel
UK           |  Rachel
Australia    |  Rachel
Mexico       |  Amy
Canada       |  Amy 
Mexico       |  Annette
Mexico       |  Jennifer
Swahili      |  Jennifer 
Mexico       |  Benedict 
```

正确的查询只会返回以下名称。

```
Name      
---------
Annette
Benedict
Vallejo 
```

有任何想法吗？我不确定这是否可能是 DISTINCT 和 WHERE 条件的混合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T03:51:11.407

```
SELECT 
      Name 
  FROM table 
  WHERE Name NOT IN 
  (
    SELECT DISTINCT 
          Name 
        FROM table 
        WHERE Country != 'Mexico'
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T03:50:03.540

我想你想要类似的东西

```
SELECT Name
FROM <table>
WHERE Country = 'Mexico'
AND Name NOT IN (
    SELECT Name
    FROM <table>
    WHERE Country <> 'Mexico') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T04:41:59.410

[**单击此处查看使用 MySQL 的 SQL Fiddle 演示。**](http://sqlfiddle.com/#!6/cb14f/1)

脚本：

```
CREATE TABLE mytable
(
    country VARCHAR(30) NOT NULL
  , name    VARCHAR(30) NOT NULL
);

INSERT INTO mytable (country, name) VALUES
 ('Mexico',         'Vallejo'),
 ('Mexico',         'Rachel'),
 ('United States',  'Rachel'),
 ('UK',             'Rachel'),
 ('Australia',      'Rachel'),
 ('Mexico',         'Amy'),
 ('Canada',         'Amy '),
 ('Mexico',         'Annette'),
 ('Mexico',         'Jennifer'),
 ('Swahili',        'Jennifer'),
 ('Swahili',        'Steve'),'),
 ('Swahili',        'Jill'),
 ('Mexico',         'Benedict');

SELECT      name
FROM        mytable
GROUP BY    name
HAVING      AVG((CASE WHEN country = 'Mexico' THEN 1 ELSE 0 END) * 1.) >= 1 
```

*输出*：

```
NAME
--------
Annette
Benedict
Vallejo 
```

# javascript - 在 jQuery Mobile 中操作历史

> ID：10407416
> 
> 赞同：4
> 
> 时间：2012-05-02T03:43:50.713
> 
> 标签：javascript, jquery, jquery-mobile

我的移动应用程序遇到了问题。提交非 Ajax 表单并重新加载页面后，我的后退按钮只是重新加载同一页面，因为我假设项目页面有两个条目。

流量：

查看列表页面

查看项目页面

单击编辑

在编辑对话框上提交表单（提交/非 AJAX）

查看项目页面

点击返回

查看项目页面

有没有办法从历史堆栈中排除第二个查看项目页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T03:18:11.250

我在我的应用程序中也遇到了同样的问题。以下代码将为您的问题提供解决方案。

```
 window.history.go(-attempt); 
```

尝试表示您更改（单击）页面的次数。我使用 pagebeforechange 事件来计算尝试次数。

# css - div 在另一个 div 中的绝对位置

> ID：10407417
> 
> 赞同：-1
> 
> 时间：2012-05-02T03:44:03.417
> 
> 标签：css, html

我已经编写了以下代码，但由于某种原因，我无法拉伸盒子的高度，我使用了溢出但没有:(

一旦我删除 content_body 绝对位置，那么内容 div 就会伸展。

```
#content{
    background-image:url(../../../images2/bg.png);
    width:1001px;
    height:auto;
    padding-left: 10px;
    overflow:auto;
    padding-top:16px;
}
#content_body{
    position:absolute;
    z-index:6;
    overflow:auto;
} 
```

```
<div id="content">
    <div id="content_body">Hello World!</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:54:28.323

我不会使用`position:absolute`它`position:relative`作为绝对定位的元素，它没有高度或宽度。

您可以在 div 上指定高度。例如`height:100px`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:01:59.827

使用 position:relative 而不是 position:absolute... content_body 的大小将根据内容增加...。[看这个小提琴...](http://jsfiddle.net/lakshmipriya/wUxhC/)

# silverlight - 有效地将滑块值绑定到 ProgressBar？

> ID：10407419
> 
> 赞同：0
> 
> 时间：2012-05-02T03:44:21.160
> 
> 标签：silverlight, xaml, binding, expression-blend

所以我想做的是通过一个只有 xaml 的滑块来控制进度条的宽度。下面的工作，但它只会稍微增加 ProgressBar 的值。玩过最小/最大后，不知道我的错在哪里。我看到了使用矩形和一些代码隐藏的解决方法，但我想专门为此示例与 ProgressBar 交互。感谢您分享的任何见解！

```
<Slider Orientation="Vertical" 
        Value="{Binding ElementName=progress, Path=Value, Mode=TwoWay}" />
<ProgressBar x:Name="progress" 
         Height="20" 
         IsIndeterminate="False" Minimum="0" Maximum="100"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:09:12.467

只需在 Slider 上设置最小值和最大值以匹配 ProgressBar

```
<Slider Orientation="Vertical" 
        Value="{Binding ElementName=progress, Path=Value, Mode=TwoWay}" 
        Minimum="0" Maximum="100"
/>

<ProgressBar x:Name="progress" 
         Height="20" 
         IsIndeterminate="False" Minimum="0" Maximum="100"/> 
```

或根据需要绑定最小值/最大值

```
<Slider Orientation="Vertical" 
    Value="{Binding ElementName=progress, Path=Value, Mode=TwoWay}" 
    Minimum="{Binding ElementName=progress, Path=Minimum}" 
    Maximum="{Binding ElementName=progress, Path=Maximum}"
/> 
```

# android - android webview使用maps api时的约定

> ID：10407421
> 
> 赞同：0
> 
> 时间：2012-05-02T03:44:26.543
> 
> 标签：android, google-maps-api-3, webview

我在 WebView 和本地 HTML 文件（包含在 APK 中作为资源文件）使用 Maps API V3 创建了 Android 应用程序。我将通过 GooglePlay 免费分发此应用程序。

我阅读了 Maps API 的使用协议。但是，我不明白这种用法是否符合协议。我认为 Maps API 协议假设由网站使用。

请让我知道我的申请是否符合 API 协议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:51:34.930

是的，只要您不做协议禁止的任何其他事情，那应该没问题。在条款中，[https://developers.google.com/maps/terms](https://developers.google.com/maps/terms)，请查看第 9.1、9.1.1、9.1.2(b) 节

# c# - 如何使用派生类编写 XML？

> ID：10407422
> 
> 赞同：1
> 
> 时间：2012-05-02T03:44:28.007
> 
> 标签：c#, xml, xml-serialization

也许标题不是最好的描述。

我的情况是，根据接口，我想编写它的属性之一，即对象。请看下面的例子：

```
public interface IFoo
{
    // anothers properties...
    object Value { get; }
} 
```

我在这里有它的三个实现，检查 Value 是否可以隐藏真正的数据类型。

```
public class FooA : IFoo
{
    public string Value { get; set; }
    object IFoo.Value { get { return Value; } }
}

public class FooB : IFoo
{
    public int Value { get; set; }
    object IFoo.Value { get { return Value; } }
}

public class FooC : IFoo
{
    public List<double> Value { get; set; }
    object IFoo.Value { get { return Value; } }
} 
```

在我的场景中，不使用泛型非常重要。所以有了这个实现，我只需要在 XML 中编写属性值。

例如：

```
 static void Main(string[] args)
    {
        List<IFoo> fooList = new List<IFoo>()
        {
            new FooA() { Value = "String" },
            new FooB() { Value = 2 },
            new FooC() { Value = new List<double>() {2, 3.4 } } 
        };

        // Write in a Xml the elements of this list with the property Value (and the problem is the datartype,
        // strings, ints, lists, etc)
        // ...
    } 
```

我在考虑使用 XmlSerialization，但我不想存储对象的所有属性，只是 Value 属性。

我需要一种方法来编写属性值（而不是存储该接口的所有属性）以及一种知道我正在使用的 IFoo 实现的方法。

更新：我想要一个这样的 XML 文件。

```
<Foos>
    <Foo xsi:Type="FooA" Value="String" />
    <Foo xsi:Type="FooB" Value="2" />
    <Foo xsi:Type="FooC" >
        <Value>
            <List xsi:Type="Double">
                <Element>2</Element>
                <Element>3.4</Element>
            </List>
        </Value>
    </Foo
</Foos> 
```

这只是一个想法。这个想法是只存储 IFoo 的一个属性以及获取具有该值的具体对象的能力。

更新：

感谢 Raj Nagalingam 帮助我提出这个想法。这就是我已经完成的。

```
public interface IFoo
{
    object Value { get; }
}

public abstract class Foo<T> : IFoo, IXmlSerializable
{
    [XmlElement]
    public T Value { get; set; }
    [XmlIgnore]
    object IFoo.Value { get { return Value; } }

    XmlSchema IXmlSerializable.GetSchema() { return null; }
    void IXmlSerializable.ReadXml(XmlReader reader) { throw new NotImplementedException(); }
    void IXmlSerializable.WriteXml(XmlWriter writer)
    {
        XmlSerializer serial = new XmlSerializer(Value.GetType());
        serial.Serialize(writer, Value);
    }
}

public class FooA : Foo<string> { }
public class FooB : Foo<int> { }
public class FooC : Foo<List<Double>> { }
public class FooContainer : List<IFoo>, IXmlSerializable
{
    public XmlSchema GetSchema() { return null; }
    public void ReadXml(XmlReader reader) { throw new NotImplementedException(); } 
    public void WriteXml(XmlWriter writer)
    {
        ForEach(x => 
            {
                XmlSerializer serial = new XmlSerializer(x.GetType());
                serial.Serialize(writer, x);
            });
    }
}

class Program
{
    static void Main(string[] args)
    {
        FooContainer fooList = new FooContainer()
        {
            new FooA() { Value = "String" },
            new FooB() { Value = 2 },
            new FooC() { Value = new List<double>() {2, 3.4 } } 
        };

        XmlSerializer serializer = new XmlSerializer(fooList.GetType(),
            new Type[] { typeof(FooA), typeof(FooB), typeof(FooC) });
        System.IO.TextWriter textWriter = new System.IO.StreamWriter(@"C:\temp\demo.xml");
        serializer.Serialize(textWriter, fooList);
        textWriter.Close();
    }
} 
```

它有效，但我想用具体类恢复列表是不可能的，使用标准序列化我看到它是使用 xsi 编写的，这次我看不到它们。如何恢复我的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:13:16.360

这是实现它的一种方式，请查看并根据您的需要扩展/重构它。我希望它有所帮助。

```
public interface IFoo : IXmlSerializable
{
    // anothers properties...
    object Value { get; }
}

[XmlRoot("Foo")]
public class FooA : IFoo
{
    public string Value { get; set; }
    object IFoo.Value { get { return Value; } }

    #region IXmlSerializable Members

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(XmlReader reader)
    {
    }

    public void WriteXml(XmlWriter writer)
    {
        writer.WriteStartElement("Foo");

        writer.WriteStartAttribute("Type", "http://example.com/2007/ns1");
        writer.WriteString(GetType().Name);
        writer.WriteEndAttribute();

        writer.WriteStartAttribute("Value");
        writer.WriteString(Value.ToString());
        writer.WriteEndAttribute();

        writer.WriteEndElement();

    }

    #endregion
}

[XmlRoot("Foo")]
public class FooB : IFoo
{
    public int Value { get; set; }
    object IFoo.Value { get { return Value; } }

    #region IXmlSerializable Members

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(XmlReader reader)
    {
    }

    public void WriteXml(XmlWriter writer)
    {
        writer.WriteStartElement("Foo");

        writer.WriteStartAttribute("Type", "http://example.com/2007/ns1");
        writer.WriteString(GetType().Name);
        writer.WriteEndAttribute();

        writer.WriteStartAttribute("Value");
        writer.WriteString(Value.ToString());
        writer.WriteEndAttribute();

        writer.WriteEndElement();
    }

    #endregion
}

[XmlRoot("Foo")]
public class FooC : IFoo
{
    public List<double> Value { get; set; }
    object IFoo.Value { get { return Value; } }

    #region IXmlSerializable Members

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(XmlReader reader)
    {
    }

    public void WriteXml(XmlWriter writer)
    {
        writer.WriteStartElement("Foo");

        writer.WriteStartAttribute("Type", "http://example.com/2007/ns1");
        writer.WriteString(GetType().Name);
        writer.WriteEndAttribute();

        writer.WriteStartElement("Value");

        if (Value != null)
        {
            writer.WriteStartElement("List");

            writer.WriteStartAttribute("Type", "http://example.com/2007/ns1");
            writer.WriteString(typeof(double).Name);
            writer.WriteEndAttribute();

            foreach (double value in Value)
            {
                writer.WriteElementString("Element", value.ToString());
            }

            writer.WriteEndElement();

        }

        writer.WriteEndElement();

        writer.WriteEndElement();
    }

    #endregion
}

[XmlRoot("Foos")]
public class ListCotainer : List<IFoo>, IXmlSerializable
{
    #region IXmlSerializable Members

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(XmlReader reader)
    {
    }

    public void WriteXml(XmlWriter writer)
    {
        writer.WriteAttributeString("xmlns", "xsi", null, "http://example.com/2007/ns1");
        foreach (IFoo foo in this)
        {
            foo.WriteXml(writer);
        }
    }

    #endregion
}
class Program
{
    static void Main(string[] args)
    {
        XmlWriterSettings _xws = new XmlWriterSettings();
        _xws.OmitXmlDeclaration = true;
        _xws.ConformanceLevel = ConformanceLevel.Auto;
        _xws.Indent = true;

        ListCotainer container = new ListCotainer()
        {
                new FooA() { Value = "String" },
                new FooB() { Value = 2 },
                new FooC() { Value = new List<double>() {2, 3.4 } } 
        };

        StringBuilder xmlString = new StringBuilder();
        using (XmlWriter xtw = XmlTextWriter.Create(xmlString, _xws))
        {
            XmlSerializer serializer = new XmlSerializer(container.GetType());
            serializer.Serialize(xtw, container);

            xtw.Flush();
        }
        Console.WriteLine(xmlString.ToString());
    }
} 
```

# hex - 读取 h.246 NAL 头信息

> ID：10407424
> 
> 赞同：-2
> 
> 时间：2012-05-02T03:44:37.370
> 
> 标签：hex, h.264, codec

寻找有关如何读取 NAL 标头的更详细信息，更具体地说是 SPS（序列参数集）NAL 单元。

这里有两个例子：

*   00000001674d401fba202833f3c200000300c800002ed5c0400249e0002dc6f451807c60c4480000000168ebef20
*   0000000127640028ac721005005bb01100000303e90000ea60e000002b7cc00006cb80ef7b80f84422890000000128ebef2c

任何关于如何阅读本文的细节或深入解释将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:40:40.567

H.264 视频在 ISO 14496 第 10 部分中指定。

000001 是附件 B 起始码。接下来是 7.3.1 节中指定的 nal_unit()。NAL 内部是 SPS 或 PPS 的 rbsp。

seq_parameter_set_rbsp() 的语法在第 7.3.2.1 节中指定。

pic_parameter_set_rbsp() 在第 7.3.2.2 节中指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:30:24.213

首先，您需要将 NAL 从 EBSP 转换为 RBSP，之后您可以使用 Bob 提供的参考

例如 00 00 03 -> 00 00

# android - 我可以选择 AMQP 或 MQTT 哪个？

> ID：10407425
> 
> 赞同：6
> 
> 时间：2012-05-02T03:44:50.943
> 
> 标签：android, amqp, mqtt

我想构建一个后端应用程序来将消息从服​​务器推送到 android 设备。我发现有两种协议适合这种情况。我想为它们中的每一个使用 RabbitMQ 或 mosquitto 服务器（如果有其他好的选择请告诉我也是 :-) ）。考虑到糟糕的网络状况、电池使用和服务器性能。哪种解决方案适合我？

我也找到了C2DM服务。但是在我的情况下它有两个问题。首先它只支持Android 2.2及更高版本。其次在中国的服务并不总是稳定的。所以我想建立自己的推送服务。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T15:26:53.127

MQTT 是为资源有限的设备明确构建的，因此与其他协议相比，它的电池电量非常小。它也是为不可靠的 TCP 网络而设计的。值得仔细看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:31:17.113

[Cloud to Device](https://developers.google.com/android/c2dm/)，但如果有一些缺点 - 比如用户必须使用谷歌帐户登录（嗯，你需要登录才能使用市场，所以这不是一个真正的问题）。

我还建议查看[本](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:05:09.480

AMQP 空间中的替代方案是 Apache Qpid。Rabbit 也不错，但产品有一些您可以考虑的不同功能。

# objective-c - 如何确保我的 UIButton 的文本不被缩短？

> ID：10407426
> 
> 赞同：0
> 
> 时间：2012-05-02T03:44:52.533
> 
> 标签：objective-c, ios

我将 UIButton 的文本更改为一个长等式。不幸的是，我的文字被缩短了。

![在此处输入图像描述](../Images/17e16358a850a20c0dac7df551dce530.png)

如何防止缩短？即使我在 Nib 中指定“剪辑”或“自动换行”，它也会缩短我的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:01:26.253

调用这两个方法，您的按钮将自动调整为文本的大小：

`[myButton sizeToFit]; [mybutton setNeedsDisplay];`

# php - 如何使用 php 获取 url 的特殊部分

> ID：10407429
> 
> 赞同：0
> 
> 时间：2012-05-02T03:45:34.563
> 
> 标签：php

如何从 url 中获取特殊部分？例如，我只想从这个网址获取 v=q07isX-Q1-U [http://m.youtube.com/watch?gl=US&hl=en-GB&client=mv-google&feature=m-featured&v=q07isX-Q1-U](http://m.youtube.com/watch?gl=US&hl=en-GB&client=mv-google&feature=m-featured&v=q07isX-Q1-U) . 是否可以在 php.ini 中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T03:48:28.433

```
parse_str(parse_url($url, PHP_URL_QUERY), $values);
if (isset($values['v'])) {
    echo $values['v'];
} 
```

[http://php.net/parse_url](http://php.net/parse_url)
[http://php.net/parse_str](http://php.net/parse_str)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T03:49:18.650

```
<?php echo $_GET["v"]; ?> 
```

这应该返回存储在 v= 参数中的内容

编辑：我应该注意，这仅在您的脚本接收参数作为获取请求的一部分时才有效。如果您只是尝试将其解析为文本，则不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:21:17.860

```
<?php
$url = "http://m.youtube.com/watch?gl=US&v=q07isX-Q1-U";
print_r(parse_url($url));
$str= parse_url($url, PHP_URL_PATH);

parse_str($str);
echo $gl;  // US
echo $v; // q07isX-Q1-U

parse_str($str, $output);
echo $output['gl'];  // US
echo $output['v']; // q07isX-Q1-U
?> 
```

# c++ - C++ 中的释放（指针向量数组）

> ID：10407430
> 
> 赞同：0
> 
> 时间：2012-05-02T03:45:36.700
> 
> 标签：c++, memory, pointers, memory-management, vector

好的，所以我正在创建一个 Graph 类，我希望能够在今年夏天晚些时候有空闲时间的时候运行算法并添加一个 gui。现在我有一个 adjList，它被实现为一个向量数组（每个顶点一个），每个向量都是一个指针列表，表示从每个相关顶点到其他顶点的边。它被声明为我的 Graph 类的受保护成员，如下所示：

```
std::vector <Node*> *adjList;
adjList = new std::vector<Node*>[V]; 
```

我有一个附带问题。现在在这里我有一个包含指针的向量数组（通过指针）。相反，如果这不是一个数组，而是一个指向单个节点指针向量的指针，那么我可以像这样调用构造函数：

```
adjList = new std::vector<Node*>(10); 
```

这将允许我为向量中的动态数组指定默认大小，但似乎我无法调用构造函数，或者至少在我有数组时无法正确获取语法。

现在是我主要关心的问题。对于指针数组中的每个向量，我在 addVertex 方法中调用 new 运算符，为每个向量添加多个节点指针。现在我需要确保我正确处理所有这些的释放。我相信我对这在 C++ 中应该如何工作有所了解，但我知道指针很棘手，所以在我继续向这个代码库添加大量内容之前，我想找人看看。通过几次搜索，我找不到任何与我所拥有的非常相似的东西。这是我的释放：

```
for(int i =0; i < V; i++)
    for (unsigned int j = 0; j < adjList[i].size(); j++)
        delete adjList[i][j];
delete adjList; 
```

这会释放所有内存吗？还有一种简单的方法可以让我确定这一点，例如。在调试时计算使用 new 分配了多少内存？

[编辑：更新/更多信息]

这是一个指向 Google Books 的[链接](http://books.google.com/books?id=NLngYyWFl_YC&lpg=PA531&ots=BxQrJH2kG9&dq=breadth%20first%20search%20cormen&pg=PA531#v=onepage&q&f=false)，显示了我想要在伪代码中实现的算法之一。此版本的广度优先搜索在邻接列表（指针列表数组）上运行。由于使用邻接列表分配给每个节点的属性，因此必须使用指针。

我想在运行后将这些属性从存储到每个节点的 BFS 算法中保留下来。我知道可以通过其他方式做到这一点，也许是索引节点和使用并行数组来存储属性。但我希望拥有与此伪代码类似的代码（用于链接中的 BFS）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:54:35.560

1.  为什么要使用向量数组？
2.  为什么要维护指向向量的指针？
3.  你为什么要维护一个指针向量？

所有这三个决定都会使您付出代价，并直接否定向量类的内存管理能力。向量不仅仅是一个可以在幕后增长的数组，它还通过称为[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)的模式为您管理内存。

当您创建一个指针向量时，该向量无法清理指针在销毁时引用的内存，因此您仍然需要调用`delete`该向量的每个元素。

当您创建指向向量的指针时，您无法利用向量释放在其析构函数中分配的任何内存这一事实。因此，您再次否定了向量为您管理内存的能力，因为您必须调用`delete`向量以防止内存泄漏。

当你维护一个向量数组时......好吧，你已经在使用向量了，为什么不直接使用 a`vector<vector<T>>`呢？

矢量类型在幕后为您动态分配内存，专门用于避免您现在遇到的那种问题。当然，您可以管理自己的内存（您只需按照与分配相反的顺序解除分配，您似乎掌握了这一点），但是当有适当的机制为您执行此操作时，为什么还要麻烦呢？

我不明白这里的设计目标。为什么不简单地使用 a`vector<vector<Edge>>`并完全摆脱这些问题呢？

```
class Edge {
    // whatever
}

class Graph {
private:
    // when instances of this class go out of scope, 
    // all of the memory allocated to these vectors is deallocated for you!
    vector<vector<Edge>> vertices;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:20:22.323

如果您正在构建一个通过指针对内部对象进行大量索引的类，那么确保仅在内存位置删除**一次**对象的一种方法是保留一个内存池。例如，您可以拥有一个`std::vector<Node*> Graph::memPool`成员。删除 . 时`Graph`，只需删除其中的所有内容，`Graph::memPool`而不是单个节点的`adjList`. 每当创建新节点时，只需将其添加到内存池即可。

在您当前的示例中，如果两个节点与同一个节点有一条边，您可能会删除一个无效的内存位置。

另一种选择是使用编号索引而不是指针。该图有一个节点的主向量，而每个节点中的邻接表保持向量索引。

```
class Graph
{
    std::vector<Node> all_nodes;
    ...
};

struct Node
{
    std::vector<size_t> adjList;
    SomeDataType nodeData;//e.g. node cost, weight, reward, etc
    ...
}; 
```

在这种情况下，不需要显式的 delocation。与使用指针类似，从图中删除节点将需要扫描邻接列表以更新索引。

# android - 使用 ActionBarSherlock 选项卡导航在 FrameLayout 中按 ID 显示片段时遇到问题

> ID：10407431
> 
> 赞同：2
> 
> 时间：2012-05-02T03:45:52.417
> 
> 标签：android, android-fragments, actionbarsherlock, android-tabs

我在试图弄清楚这一点时遇到了麻烦。我查看了 SampleFragments ABS 应用程序，它使用 TabHost 和自定义侦听器来完成此操作。这是我唯一的选择还是我可以让它按我的方式工作试图让它工作..（我想使用默认的 TabNav，因为它在横向模式下覆盖在 ActionBar 上以节省屏幕空间。

主要活动：

```
public class MainActivity extends SherlockFragmentActivity implements ActionBar.TabListener {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //create Tab Nav
    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

    bar.addTab(bar.newTab()
            .setText("Tab1")
            .setTabListener(this));        
    bar.addTab(bar.newTab()
            .setText("Tab2")
            .setTabListener(this)); 
    bar.addTab(bar.newTab()
            .setText("Tab3")
            .setTabListener(this));
}

@Override
public void onTabReselected(Tab tab, FragmentTransaction transaction) {
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction transaction) {

    FrameLayout frame = (FrameLayout) findViewById(R.id.tabcontent);
    if (tab.getText() == "Tab2")
    {           
        frame.setBackgroundColor(0xFF00FF00);
    }
    if (tab.getText() == "Tab1")
    {
        frame.setBackgroundColor(0xFFFFFFFF);
    }        
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction transaction) {
} 
} 
```

支持和碎片活动

```
public class TestSupport extends SherlockFragmentActivity{

public static Button btn;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    btn = (Button) findViewById(R.id.buttonOMG);

    FragmentManager fm = getSupportFragmentManager();

    // Create the list fragment and add it as our sole content.
    if (fm.findFragmentById(android.R.id.tabcontent) == null) {
        MapsFragment list = new MapsFragment();
        fm.beginTransaction().add(android.R.id.tabcontent, list).commit();
    }
}

public static class TestFragment extends SherlockListFragment {

    @Override public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        //setHasOptionsMenu(true);
        btn.setText("LOL");            

    }
}
} 
```

主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="#CCC">

<FrameLayout
        android:id="@+id/tabcontent"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1">

    <Button
        android:id="@+id/buttonOMG"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</FrameLayout>
</LinearLayout> 
```

我只是使用按钮文本的更改作为指标来查看它是否正确实现..

我遇到的问题是在 onTabSelected 类中。如何调用片段执行并使其显示在 tabcontent 布局上？我的片段和支持是否正确编码到我只需要调用它以使其工作的地方？我难住了。

谢谢！

# python - 如何让我的 HTML 按钮从 SQLite 数据库中删除正确的列表项？

> ID：10407433
> 
> 赞同：11
> 
> 时间：2012-05-02T03:45:55.327
> 
> 标签：python, html, forms, flask, jinja2

我是初学者，所以请提前原谅任何愚蠢。我正在使用 Flask（以及扩展名 Jinja2）来创建一个简单的 Web 应用程序——它基本上可以让您将电影输入到 Web 表单中，然后将其添加到 SQLite 数据库中。我已经让 Flask 非常好地遍历数据库中的所有电影，并在加载时将它们打印到页面上。

我想在每部电影旁边添加一个“删除”按钮。让按钮出现很简单。但我不确定如何将按钮绑定回函数 delete_movie() 以便删除与按下的按钮关联的正确电影。

由于每部电影旁边都会有一个按钮，我猜表单元素必须是动态命名的。但是如果它是动态命名的，我如何将正确的值传递回函数？这是我到目前为止所得到的：

```
#movies.html
<div class=page>
    <h1>Movie List</h1>
    <ul class=movies>
    {% for movie in movies %}
        <li><h1>{{ movie.title }}</h1>
        <form action="{{ url_for('delete_movie') }}" method=post class=delete-movie><input type=submit value=Delete name=movie_to_delete"></form>
    {% endfor %}
    </ul>
</div>

#app.py
@app.route('/delete', methods=['POST'])
def delete_movie():
    g.db.execute('delete from movies where movie = ?', [request.form['movie_to_delete']])
    g.db.commit()
    return redirect(url_for('list_movies')) 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-02T07:04:59.730

只需将隐藏的输入添加到每个表单，并使用要删除的元素 ID/名称作为值 :)

例如。

```
<form action="{{ url_for('delete_movie') }}" method=post class=delete-movie>
  <input type=hidden value="{{ movie.name }}"name=movie_to_delete />
  <input type=submit />
</form> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-19T10:16:04.790

**IMO，上述答案中的方法是完全没有必要的。**您应该将电影的名称作为 URL 变量传递：

```
{% for movie in movies %}
    <li><h1>{{ movie.title }}</h1>
    <form action="{{ url_for('delete_movie', movie_name=movie.name) }}" method=post>
        <input type=submit value=Delete">
    </form>
{% endfor %} 
```

在视图函数中，将变量包含在 URL 规则中（即`/delete/<movie_name>`），然后您可以获取电影的名称作为参数：

```
@app.route('/delete/<movie_name>', methods=['POST'])
def delete_movie(movie_name):
    g.db.execute('delete from movies where movie = ?', [movie_name])
    ... 
```

但是，在这个用例中，人们通常传递电影记录的 id 值而不是名称。[这是来自类似应用程序](https://github.com/greyli/watchlist)的最小示例：

模板：

```
<form method="post" action="{{ url_for('delete_movie', movie_id=movie.id) }}">
    <input class="btn" type="submit" name="delete" value="Delete">
</form> 
```

看法：

```
@app.route('/movie/delete/<int:movie_id>', methods=['POST'])
@login_required
def delete_movie(movie_id):
    movie = Movie.query.get_or_404(movie_id)
    db.session.delete(movie)
    db.session.commit()
    flash('Item deleted.')
    return redirect(url_for('index')) 
```

# php - Edquota 通过 PHP 编辑用户设置

> ID：10407438
> 
> 赞同：1
> 
> 时间：2012-05-02T03:46:55.763
> 
> 标签：php, centos

我正在尝试使用我的 ftp 用户创建来自动化该过程，但是我需要能够通过 PHP 设置用户的配额，在 ssh 中我将使用 edquota 用户名但是如果有办法通过 PHP 使用 SSH2 或FTP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:54:04.693

您可以使用 Exec 命令[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

```
exec('edquota username'); 
```

# c# - 调用 Dispose() 后程序挂起

> ID：10407439
> 
> 赞同：5
> 
> 时间：2012-05-02T03:47:12.467
> 
> 标签：c#, multithreading, sockets, webcam, dispose

我正在使用 C# 开发一个 iOS 项目。该程序从连接的网络摄像头捕获图像并通过 Socket 将其发送到 iPhone/iPad。这一切都很好，我可以成功地让我的流显示在设备上。

但是当客户端断开连接时，网络摄像头必须关闭，在此功能中，程序只是挂断。没有错误消息，也没有异常调用......只是挂起！我相信这是多线程的问题，但不幸的是，我在 C# 方面没有找到解决方案的经验。我希望这里有人可以带我走上正确的道路...

代码：
onImageCaptured 函数：

```
public void OnImageCaptured(Touchless.Vision.Contracts.IFrameSource frameSource, Touchless.Vision.Contracts.Frame frame, double fps)
{
    _latestFrame = frame.Image;
    Console.WriteLine("OnImageCaptured");
    if (isConnected)
    {
        Console.WriteLine("OnImageCaptured - isConnected");
        byteArray = new byte[0];
        MemoryStream stream = new MemoryStream();

        _latestFrame.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
        stream.Close();
        byteArray = stream.ToArray();

        if (byteArray.Length > 0)
        {
            string eof = "<EOF>";
            byte[] eofByte = Encoding.ASCII.GetBytes(eof);
            Console.WriteLine("OnImageCaptured - sendStream");
            this.onDataSend(byteArray);
            this.onDataSend(eofByte);
            stream.Flush();
        }

        System.Diagnostics.Debugger.Log(0, "1", "\nByte Array Length: " + byteArray.Length.ToString());
    }
    pictureBoxDisplay.Invalidate();
} 
```

在相机类中定义如下：

```
public event EventHandler<CameraEventArgs> OnImageCaptured; 
```

并触发：

```
OnImageCaptured.Invoke(this, new CameraEventArgs(bitmap, fps)); 
```

所以这个功能 - 我相信 - 在一个单独的威胁中运行，因为当图像进入时 UI 没有被阻止。

所以接下来在这个函数中处理客户端断开连接：

```
public void onDataSend(byte[] data)
{
    clientReady = false;
    try
    {
        socketWorker.Send(data);
    }
    catch (SocketException se)
    {
        isConnected = false;
        Console.WriteLine("Error: Data Write - SocketException");
        Console.WriteLine(se.ErrorCode.ToString());
        thrashOldCamera() // THIS FUNCTION HANGS THE PROGRAM !!
        onDisconnectServer();

        // onDisconnectServer();
    }
    catch (ObjectDisposedException)
    {
        isConnected = false;
        Console.WriteLine("Error: Data Write - ObjectDisposedException");
        // onDisconnectServer();
    }

} 
```

客户端断开连接，`thrashOldCamera()`被调用。到目前为止工作正常！现在：

```
private void thrashOldCamera()
{
    Console.WriteLine("TrashOldCamera");
    // Trash the old camera
    if (_frameSource != null)
    {
        try
        {
            _frameSource.NewFrame -= OnImageCaptured;
            Console.WriteLine("TrashOldCamera - 1");
            _frameSource.Camera.Dispose(); // HERE IT HANGS. IT NEVER GOES PAST HERE !!!
            Console.WriteLine("TrashOldCamera - 2");
            setFrameSource(null);
            Console.WriteLine("TrashOldCamera - 3");
            pictureBoxDisplay.Paint -= new PaintEventHandler(drawLatestImage);
        }
        catch (Exception ex)
        {
            Console.WriteLine("End Trash Camera Ex: " + ex);
        }
    }
    Console.WriteLine("End Trash Camera");
} 
```

程序挂在`_frameSource.Camera.Dispose();`. 如上所述，没有错误或异常。这可能是在function()中`onDataReceive()`调用的问题。`onImageCapture`我还在表单中添加了一个触发按钮，`thrashOldCamera()`效果很好。

任何帮助/提示都非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T09:35:10.573

这称为死锁，一个典型的线程问题。我没有看到您在代码段中的任何地方显式调用 UI 线程，因此死锁可能位于相机固件本身。核心问题是您试图*在*其回调仍在执行时关闭相机，没有很多代码对此具有弹性。在回调完成之前，Release() 调用无法完成。但是直到 Release() 调用完成，回调才能完成。死锁城。

您需要重组您的代码，这样就不会发生这种情况。延迟释放相机是关键，最好在打开相机的同一线程上完成。例如，您可能会通过在 FormClosed 事件中释放它来解决它。或者根本不释放它，让 Windows 自动关闭句柄。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T06:19:19.997

不知道这是否真的应该是评论或答案，但至少我可以让你走上正轨。

我[找到了](http://touchless.codeplex.com/SourceControl/changeset/view/55790)您正在使用的库的源代码。这是内容`Camera.Dispose()`

```
public void Dispose()
{
    StopCapture();
} 
```

好的，没有太多帮助，这里是`Camera.StopCapture()`

```
internal void StopCapture()
{
    _cameraMethods.StopCamera();
} 
```

再一次，没有多大帮助。`_cameraMethods`是一种`CameraMethods`来自库的类型，`WebCamLib`它是一个 C++ 帮助库，用于与直接显示进行通信。

这是`CameraMethods::StopCamera()`

```
void CameraMethods::StopCamera()
{
    if (g_pMediaControl != NULL)
    {
        g_pMediaControl->Stop();
        g_pMediaControl->Release();
        g_pMediaControl = NULL;
    }

    g_pfnCaptureCallback = NULL;

    if (g_pIBaseFilterNullRenderer != NULL)
    {
        g_pIBaseFilterNullRenderer->Release();
        g_pIBaseFilterNullRenderer = NULL;
    }

    if (g_pIBaseFilterSampleGrabber != NULL)
    {
        g_pIBaseFilterSampleGrabber->Release();
        g_pIBaseFilterSampleGrabber = NULL;
    }

    if (g_pIBaseFilterCam != NULL)
    {
        g_pIBaseFilterCam->Release();
        g_pIBaseFilterCam = NULL;
    }

    if (g_pGraphBuilder != NULL)
    {
        g_pGraphBuilder->Release();
        g_pGraphBuilder = NULL;
    }

    if (g_pCaptureGraphBuilder != NULL)
    {
        g_pCaptureGraphBuilder->Release();
        g_pCaptureGraphBuilder = NULL;
    }

    this->activeCameraIndex = -1;
} 
```

看来您的异常在本机到托管边界期间被吃掉了。我不知道这对你有多大帮助，但至少它让你开始寻找。

启用非托管代码调试，看看您是否可以单步调试库源代码，看看真正的问题出在哪里。

![在此处输入图像描述](../Images/c1959a88557e61d4a959d067ce6cc4ed.png)

如果其他对 C++/C# 互操作有更多经验的人想要编辑它并添加更多接下来要执行的操作来调试问题，我将把它变成一个社区 wiki。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T03:49:26.363

在设备断开连接时查找要调用的事件。编写代码以关闭那里的网络摄像头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-23T02:11:09.923

万一仍然存在问题，请使用**Touchless.RefreshCameraList**断开与相机的连接，如果您愿意，也可以添加**Touchless.CurrentCamera.Dispose**。您可能仍需要启用无人代码调试

# css - django 和 twitter 引导程序在 IE8 中无法正常工作

> ID：10407440
> 
> 赞同：0
> 
> 时间：2012-05-02T03:47:18.717
> 
> 标签：css, django, twitter-bootstrap

我尝试在 django 模板中使用 twitter bootstrap 的导航栏。我将以下内容放在“base.html”的头部。

```
<link href="{{ STATIC_URL }}bootstrap/css/bootstrap.css" rel="stylesheet"> 
```

该页面在 chrome 中看起来正确。但是当我换成 IE8 时，CSS 就乱了。“容器”不再居中，导航栏看起来不正确。

然后我尝试摆脱 django。我将 bootstrap.css 移动到 base.html 的文件夹中，并将 css 加载更改为：

```
<link href="bootstrap.css" rel="stylesheet"> 
```

然后我直接在 IE 中打开 base.html，一切又看起来正确了。所以在 IE8 中，django 模板渲染似乎以某种方式与引导程序的 css 混淆了。任何想法？谢谢。

====== 复制自 IE8 “view-source” =========

使用 django 模板渲染：

```
<!DOCTYPE html>
<html lang="zh-CN" autopagermatchedrules="1">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>AAA</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        <link href="/static/bootstrap/css/bootstrap.css" rel="stylesheet">
        <style>
            body {
              padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
            }
        </style>
    </head>

    <body>
        <div class="navbar navbar-fixed-top">
          <div class="navbar-inner">
            <div class="container">

              <a class="brand" href="/">AAA</a>
              <ul class="nav">
                <li>
                  <a href="/">
                    BBB
                  </a>
                </li>
                <li>
                  <a href="/">
                    CCC
                  </a>
                </li>
              </ul>

            </div>
          </div>
        </div>
    </body>
</html> 
```

没有 django 模板渲染：

```
<!DOCTYPE html>
<html lang="zh-CN" autopagermatchedrules="1">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>{% block title %}{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        <link href="bootstrap.css" rel="stylesheet">
        <style>
            body {
              padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
            }
        </style>
    </head>

    <body>
        <div class="navbar navbar-fixed-top">
          <div class="navbar-inner">
            <div class="container">

              <a class="brand" href="/">AAA</a>
              <ul class="nav">
                <li>
                  <a href="/">
                    BBB
                  </a>
                </li>
                <li>
                  <a href="/">
                    CCC
                  </a>
                </li>
              </ul>

            </div>
          </div>
        </div>
    </body>
</html> 
```

====================================== 我刚刚发现如果我把下面的代码放到"base .html”并在“main.html”中扩展它，IE8 不能正常工作。但是如果我将它们移动到“main.html”，并且不使用 django“extend”，就可以了。

```
<!DOCTYPE html>
<html lang="zh-CN" autopagermatchedrules="1">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>{% block title %}{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        <!-- Le styles -->
        <link href="{{ STATIC_URL }}bootstrap/css/bootstrap.css" rel="stylesheet">
        <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        {% block head %}
        {% endblock %}
        <style>
            body {
              padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
            }
        </style>
    </head>

    <body>
        {% block body %}
        {% endblock %}
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T08:32:45.057

您是否使用 @import 添加样式表？

IE8 似乎不喜欢@import-property。

我们使用了一个全局 css 文件来导入必要的样式。将所有样式表移动到标题并使用普通链接标记包含它们时，它可以工作。

奇怪的是，常规引导样式（按钮、背景等）被正确导入。网格系统不是。我猜 Internet Explorer 以神秘而迟钝的方式工作。

# android - 网络不可用时的Android Post Form数据

> ID：10407441
> 
> 赞同：0
> 
> 时间：2012-05-02T03:47:19.170
> 
> 标签：android, sqlite, android-intent, broadcastreceiver, android-service

我有一个包含 4 个字段的简单表单，我在提交时提交到远程 mysql 数据。当没有可用的连接时，此表单无法发送数据。我知道我可以将数据存储在 sqlite 中，但我不确定当应用程序未运行且网络可用时如何将此数据发送到 mysql db？谁能指出一些我可以帮助我的样本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:32:36.957

如果您的应用程序未运行，则无法将您的数据发送到任何地方。您可以尝试在每次应用程序启动时查找已保存的数据，并在此类数据存在且网络连接可用时发送。

如果用户不再启动您的应用程序，保存的数据会怎样？没什么，可能他反正也不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T03:52:34.137

为 注册广播接收器`android.net.conn.CONNECTIVITY_CHANGE`。然后检查网络是否可用，并发送保存的数据（如果有）。或者，只需检查保存的数据并在下次运行应用程序时发送。

# c - fork - 父子程序

> ID：10407452
> 
> 赞同：0
> 
> 时间：2012-05-02T03:48:50.370
> 
> 标签：c, fork

```
#include "stdafx.h"
#include<sys/types.h>
#include<stdio.h
#include<unistd.h>
int value=5;
int _tmain(int argc, _TCHAR* argv[]){
pid_t pid;
pid=fork();
if(pid==0)
{
value+=15;
}
else if(pid>0)
{
wait(NULL);
printf("Parent value:=%d",value);
exit(0);
}
return 0;
} 
```

这个程序的输出是什么？父级的值可以是 20 还是子级将拥有自己的变量“Value”的副本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T03:54:42.477

父级将拥有自己的变量“值”副本，因此输出为 5

> 您是否尝试执行上述代码？

# java - 如何在 Scala 中获取 Java 的 int.class？

> ID：10407453
> 
> 赞同：8
> 
> 时间：2012-05-02T03:48:54.207
> 
> 标签：java, scala, reflection

我正在使用 Scala 使用 Java 的反射 API 做一些工作。但我似乎无法弄清楚如何在 Scala 中访问 Java 中的内容：int.class、float.class、boolean.class。

基本上是代表原始数据类型的类对象。

那么 int.class 的 Scala 版本是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-02T04:15:15.293

int.class、float.class 等不存在。等效的盒装类型每个都有一个名为的静态字段`TYPE`，它表示原始类型。你是这个意思吗？

例如对于 int/Integer：

[http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#TYPE](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#TYPE)

如果是这样，您可以像在 Java 中一样从 Scala 中引用它：

```
scala> Integer.TYPE
res0: java.lang.Class[java.lang.Integer] = int 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-02T08:35:49.827

```
Welcome to Scala version 2.10.0-20120430-094203-cfd037271e (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_25).
Type in expressions to have them evaluated.
Type :help for more information.

scala> classOf[Int]
res0: Class[Int] = int

scala> classOf[Integer]
res1: Class[Integer] = class java.lang.Integer 
```

# php - 如何从 CodeIgniter 中失败的数据库查询中恢复？

> ID：10407454
> 
> 赞同：4
> 
> 时间：2012-05-02T03:48:56.487
> 
> 标签：php, mysql, database, codeigniter, error-handling

在 CodeIgniter 中，如果您的 sql 查询失败，则脚本将停止运行并出现错误。有什么方法可以让您尝试查询，如果查询失败，那么您会默默地检测它并尝试不同的查询，而用户不知道查询失败？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T04:30:47.587

您可以修改 Exceptions 类以...抛出异常。只需`MY_Exceptions.php`创建`application/core/`：

```
class MY_Exceptions extends CI_Exceptions {

    function show_error($heading, $message, $template = 'error_general', $status_code = 500)
    {
        // BEGIN EDIT
        if ($template === 'error_db')
        {
            throw new Exception(implode("\n", (array) $message));
        }
        // END EDIT

        set_status_header($status_code);

        $message = '<p>'.implode('</p><p>', ( ! is_array($message)) ? array($message) : $message).'</p>';

        if (ob_get_level() > $this->ob_level + 1)
        {
            ob_end_flush();
        }
        ob_start();
        include(APPPATH.'errors/'.$template.'.php');
        $buffer = ob_get_contents();
        ob_end_clean();
        return $buffer;
    }
} 
```

然后使用 try/catch 块检查错误并尝试运行另一个查询：

```
try {
    $this->db->get('table1');
} catch (Exception $e) {
    $this->db->get('table2');
} 
```

这是一种草率的解决方法，但它可以完成工作。

您可能还想查看[交易](http://codeigniter.com/user_guide/database/transactions.html)：

> ### 运行事务
> 
> 要使用事务运行查询，您将使用 `$this->db->trans_start()`和`$this->db->trans_complete()`函数，如下所示：
> 
> `$this->db->trans_start();`
> `$this->db->query('AN SQL QUERY...');`
> `$this->db->query('ANOTHER QUERY...');`
> `$this->db->query('AND YET ANOTHER QUERY...');`
> `$this->db->trans_complete();`
> 
> 您可以在启动/完成函数之间运行任意数量的查询，并且它们都将根据任何给定查询的成功或失败提交或回滚。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T10:13:53.203

实现这一目标的方法之一是

第一的。

```
Set  ['db_debug'] = FALSE; in config/database.php 
```

然后，

在你的模型中 -

```
public function attempt_one($data) {
  //build your query ....
  $query_result = $this->db->insert('table_name');

  if(!$query_result) {
     $this->error = $this->db->_error_message();
     $this->errorno = $this->db->_error_number();
     return false;
  }
  return $something;
}

public function attempt_two() {
  //another query goes in here ...
} 
```

在您的控制器中 -

```
public function someAction ()
{
  //some code 
  $data = $some_data;
  $result1 = $this->yourmodel->attempt_one($data);
  if($result1 === false)
  {
    //Some code to send an email alert that first query failed with error message 
    //and/or log the error message/ number 
    $result2 = $this->yourmodel->attempt_two($data);
  }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-17T06:48:35.990

只需使用

```
$this->db->simple_query() 
```

而不是

```
$this->db->query() 
```

简单查询将返回真/假。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T04:07:34.097

您可以使用以下方法访问数据库错误：

*   `$this->db->_error_message();`
*   `$this->db->_error_number();`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T05:03:13.067

您可以从他们的官方论坛中查看该主题，讨论并建议针对该特定主题的解决方案：http: [//codeigniter.com/forums/viewthread/76524/](http://codeigniter.com/forums/viewthread/76524/)

# mysql - 删除 MySQL 表中的唯一约束

> ID：10407458
> 
> 赞同：0
> 
> 时间：2012-05-02T03:49:17.493
> 
> 标签：mysql

我有一个具有唯一约束的表。放弃该约束的正确方法是什么？

特定索引没有名称。它只有一个列名。

而且我想保留该列....只需删除唯一性约束即可。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:48:19.417

如果您没有在 DDL 中为索引指定名称，MySQL 将选择一个名称。执行以下语句：

```
SHOW CREATE TABLE foobar\G 
```

有几种方法可以取消约束，例如：

```
ALTER TABLE foobar DROP INDEX index_name; 
```

# javascript - 如何从嵌套和匿名函数返回值？

> ID：10407461
> 
> 赞同：0
> 
> 时间：2012-05-02T03:49:28.447
> 
> 标签：javascript, jquery

我有这个JS代码：

```
function paging() { 
    $('.paging li').click(function(e) {
        $('.paging li a').removeClass("active");
        $(this).find('a').addClass("active");
        $('#img-grp-wrap img').hide();

        var indexer = $(this).index(); 
        $('#img-grp-wrap img:eq('+indexer+')').fadeIn();    

        e.preventDefault();
        return indexer;
    });
}

var $cur_page = paging();
console.log($cur_page); 
```

我想在函数 paging() 之外使用索引器值，但是当我尝试执行 console.log() 时，它只是说*undefined*。

如何构造它，以便我可以传递我在函数外部单击的链接的索引值（这是索引器变量）？

我是一个编程新手，所以请多多包涵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:52:47.307

听起来你真的不明白事件处理程序是如何工作的。当您安装点击处理程序时，您是在告诉系统您希望它在将来某个时间发生点击时调用此函数。`paging()`在您的元素被点击并调用匿名函数之前很久，您的函数就会运行并完成。因此，`paging()`函数不能返回点击处理程序的结果，因为点击甚至还没有发生。

如果您有一些代码想要使用该`indexer`值，那么您需要从点击处理程序调用该代码并将值`indexer`作为参数传递给您正在调用的函数。这可能看起来像这样：

```
$('.paging li').click(function(e) {
    $('.paging li a').removeClass("active");
    $(this).find('a').addClass("active");
    $('#img-grp-wrap img').hide();

    var indexer = $(this).index(); 
    $('#img-grp-wrap img:eq('+indexer+')').fadeIn();    

    e.preventDefault();
    // call a function and pass it the indexer value
    processIndex(indexer);
}); 
```

请注意，我还删除了分页功能，因为您不想多次调用它，因为它会再次安装您的事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T04:04:33.573

正如@jfriend00 所说，由于事件处理程序的工作方式，您无法以您的想法访问事件处理程序的返回值。

但是，您当然可以让他们在外部（例如全局）范围内设置变量，然后让他们触发事件发生后需要运行的任何操作。或者您可以将一个值作为参数传递给另一个函数。

例如

```
// Declare external variable outside event handler.
var pagingOutput;

function paging() { 
    $('.paging li').click(function(e) {
        // Handle event...

        pagingOutput = someValue;
        actionToPerfomAfterPaging();

        // Of course, you could also do something like this...
        actionToPerformAfterPaging_2(someValue);

    });
}

function actionToPerfomAfterPaging() {
    doSomethingWithPagingOutput(pagingOutput);
}

function actionToPerfomAfterPaging_2(val) {
    doSomethingWithPagingOutput(val);
}

var $cur_page = paging();
console.log($cur_page); 
```

无法从事件处理程序返回值的原因是脚本在负责处理页面上其他所有内容的同一线程上运行。如果您从理论上设计一种让事件处理程序返回值的方式，您将不得不阻塞线程直到事件触发。这意味着页面将冻结，直到发生与处理程序相关联的任何事件，例如用户单击按钮。

# android - 特定Textview上的Android App Null指针

> ID：10407466
> 
> 赞同：0
> 
> 时间：2012-05-02T03:50:30.253
> 
> 标签：android, android-layout

通常空指针异常似乎与视图相关 - 目标布局错误。

我认为这是不同的。我在一个布局中有四个文本视图，一个返回空值，其余的工作正常。这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="hello" />

    <TextView
        android:id="@+id/text2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="stringello2" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="ip"
        android.id="@+id/iptest"
    />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="hostname" 
        android:id="@+id/hostname"
    />

</LinearLayout> 
```

这是测试代码：

```
public class MainActivity extends Activity
{
    /** Called when the activity is first created. */

    protected TextView text;
    protected TextView ip;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        text = (TextView) findViewById(R.id.text);
        text.setText("goodbye");
        text = (TextView) findViewById(R.id.hostname);
        text.setText("hostname flibble");
    //  text = (TextView) findViewById(R.id.text2);
        text = (TextView) findViewById(R.id.iptest);
        text.setText("ip flibble");
    }
} 
```

如果我将评论切换到另一个文本视图，它工作正常。如果我以它为目标`iptest`，则返回 null 并引发异常。

任何想法为什么？`gen`如果我删除`gen`并重新编译，所有四个都会出现，它们都会重新出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T03:54:25.827

在您的 TextView 标记中

```
 <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="ip"
        android.id="@+id/iptest"
    /> 
```

你拿了一个*.(dot)*而不是*:(colon)*

```
 android.id="@+id/iptest" 
```

应该这样

```
 android:id="@+id/iptest" 
```

此外，请定期清理您的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T03:57:13.170

你的 R 类没有持有 iptest reference 。android.id="@+id/iptest" 是错误的。它应该是 android:id

# mysql - 如何在mysql中选择符合某些条件的行对

> ID：10407470
> 
> 赞同：2
> 
> 时间：2012-05-02T03:51:59.387
> 
> 标签：mysql, sql

我有一张桌子。这是一个简化的结构：

```
CREATE TABLE `things` (
  `thing_id` int(11) NOT NULL AUTO_INCREMENT,
  `thing_group` int(11) NOT NULL,
  `thing_status` int(1) NOT NULL DEFAULT '0'
); 
```

有2种东西。主要的，它将具有`thing_id = thing_group`和次要的，它将具有一个 unqiue thing_id 但与主要项目相同的thing_group。

```
INSERT INTO `things` (`thing_id`, `thing_group`, `thing_status`) VALUES
(1, 1, 0),
(2, 1, 1),
(3, 3, 1),
(4, 3, 0),
(5, 5, 1),
(6, 5, 1),
(7, 7, 0),
(8, 7, 0),
(9, 9, 1),
(10, 9, 1), 
```

我有成千上万的这样的对。

`thing_status`对于主要或次要（或两者）可以为 0，但我只想（随机）选择一对（随机）`thing_status`对于主要和次要事物都有 = 1。

所以从我提供的样本数据来看，它应该只返回`thing_id`5 和 6 或 9 和 10 对（随机）

困难的部分：有些东西可以只有主要的东西，没有次要的东西。查询仍应返回这些并将它们平等地对待成对出现的事物。

我最好做 2 个查询还是一个复杂的单个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:36:58.070

将行分组`thing_group`并选择行数与 的总和相同的行`thing_status`。将结果集连接回原始表，`thing_group`以获得与组对应的实际行。所以：

```
SELECT
  t.thing_id,
  t.thing_group
FROM things t
INNER JOIN (
  SELECT thing_group
  FROM things
  GROUP BY thing_group
  HAVING COUNT(*) = SUM(thing_status)
  ORDER BY RAND()
  LIMIT 1
) g ON t.thing_group = g.thing_group 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:17:21.273

我的直觉说你应该使用 2 个查询和`UNION ALL`. 但是......对于MySQL，并不总是清楚什么有效，什么无效。

我相信此查询可以满足您的要求：

```
SELECT t1.thing_id, t1.group_id
FROM things t1
LEFT JOIN things t2
    ON t2.thing_id = t2.thing_group
    AND t1.thing_id != t2.thing_id
WHERE (
    t1.thing_id = t1.thing_group
    AND t2.thing_id IS NULL
) OR (
    t1.thing_group = t2.thing_id
    AND t1.thing_id != t1.thing_group
)
GROUP BY t1.thing_id, t1.group_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:38:07.083

没那么难，也许随机部分有点棘手：

```
select * 
from things 
where 
  thing_group = (select thing_group
                 from things 
                 where thing_status = 1 
                 group by thing_group
                 having count(thing_id) = 2
                 limit 1)
limit 1 
```

# cakephp - CakePHP save() 不保存数据

> ID：10407476
> 
> 赞同：0
> 
> 时间：2012-05-02T03:52:36.183
> 
> 标签：cakephp, insert, save

我看不出我的代码有什么问题。但它不保存数据：

```
<?php
    class ProductsController extends AppController{
        var $name = 'Products';
        //var $helpers = array('Form');
        //var $scaffold;

        function index(){
            $this->Product->recursive = 1;
            $products = $this->Product->find('all');
            $this->set('products',$products);
            //pr($products);
        }

        function add(){
            $categories = $this->Product->Category->find('list',array(
                'field'=>array('Category.categoryName')
            ));
            $this->set('categories',$categories);

            if(!empty($this->data)){
                if($this->Product->save($this->data)){
                    $this->Session->setFlash('Saved');
                }
            }

        }
    }
?> 
```

它闪烁“已保存”，但我的表中没有插入任何内容。当它应该正常运行时可能会出现什么问题。:(

下面是我的 add.ctp 模型：

```
<h2>ADD</h2>

<?php echo $this->Form->create('Product',array('action'=>'add')); ?>
<?php
    echo $form->input('ProductName');
    echo $form->input('categories');
    echo $form->end('DONE');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:52:35.633

您必须先使用 create() 方法才能保存

```
function add(){
        $categories = $this->Product->Category->find('list',array(
            'field'=>array('Category.categoryName')
        ));
        $this->set('categories',$categories);

        if(!empty($this->data)){

            $this->Product->create();
            if($this->Product->save($this->data)){
                $this->Session->setFlash('Saved');
            }
        }

    } 
```

# javascript - 如何计算java脚本中的日期差？

> ID：10407478
> 
> 赞同：-4
> 
> 时间：2012-05-02T03:52:55.717
> 
> 标签：javascript, html

> **可能重复：**
> [如何在 JavaScript 中获取两个日期之间的差异？](https://stackoverflow.com/questions/41948/how-do-i-get-the-difference-between-two-dates-in-javascript)

我有一个包含 3 个字段的 html 表单：

1.  从日期
2.  迄今为止
3.  no_ofdays

我想计算和之间`from_date`的`to_date`差异，差异将显示在`no_ofdays`字段中。我的要求是`to_date`不能低于`from_date`。如果条件失败，它不应该计算差异并且`to_date`应该保留`null`。

我想用 JavaScript 来做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:29:14.767

简而言之，这就是您的操作方式：

1.  将字段的值解析为[`Date`对象](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)。[Datejs](http://www.datejs.com/)可以帮助你做到这一点。
2.  `Date`对象支持`<`and`-`运算符，让你做你想做的事。
3.  当您减去两个`Date`对象时，结果是以毫秒为单位的差异。
4.  如果您将毫秒差除以一天中的毫秒数，那么您将得到日期之间的天数。
5.  然后，您可以将结果放在结果字段中。

# statistics - 实现是什么意思？

> ID：10407479
> 
> 赞同：0
> 
> 时间：2012-05-02T03:53:08.743
> 
> 标签：statistics

我读了一篇论文。它指出“对于数据集，我们使用了 10 个实现来进行参数选择，并使用了 20 个其他实现来进行参数选择。

在这种情况下实现是否意味着模拟？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:18:05.763

如果您提供（i）论文链接或（ii）更多上下文会更好，因为目前尚不清楚该句子所指的内容。

我最好的猜测是，它在“可能由指定的随机过程生成的特定系列”的意义上意味着“实现”。

# c++ - 视频/音频编码/解码/播放

> ID：10407481
> 
> 赞同：0
> 
> 时间：2012-05-02T03:53:19.480
> 
> 标签：c++, c, media-player, codec

我一直想尝试制作一个媒体播放器，但我不明白怎么做。我找到了 FFmpeg 和 GStreamer，但我似乎更喜欢 FFmpeg，尽管它的文档更差，尽管我根本没有写任何东西。话虽如此，我觉得如果我知道他们在做什么，我会更了解事情是如何运作的。我不知道视频/音频流是如何工作的以及几种媒体类型，所以这无济于事。归根结底，我只是在“模拟”一些代码示例。

我从哪里开始学习如何编码/解码/播放视频/音频流，而无需阅读数百页的几个“标准”。也许在一定程度上也有足够的知识来播放媒体而不依赖于另一个 API。谷歌搜索“基本视频音频解码编码”似乎没有帮助。:(

这似乎是一种没有人愿意告诉任何人的黑魔法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:57:40.987

第一部分是从容器中提取流。从那里，您需要将流解码为媒体。我建议找一个小的 Theora 视频，看看这些片段是如何相关的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:46:37.350

您希望我们写一个答案，然后您阅读并成为多媒体领域的大师..！！！！

无论如何，这不能由一个答案。首先通过谷歌搜索了解这个术语

1> 容器——复用器/解复用器

2> 编解码器--编码器/解码器

如果您喜欢 ffmpeg，请使用其基本的视频电镀应用程序。iT 在这里有很好的文档[http://dranger.com/ffmpeg/](http://dranger.com/ffmpeg/)它将显示解复用容器和使用 ffmpeg api 解码任何基本流的方法。更多信息请访问[http://ffmpeg.org/ffplay.html](http://ffmpeg.org/ffplay.html)

我更喜欢 gstreamer 而不是 ffmpeg。它有很好的文档。如果您从 gstreamer 开始，这将是一个不错的选择

# c# - 对同一张表中的对象进行递归排序

> ID：10407485
> 
> 赞同：0
> 
> 时间：2012-05-02T03:53:56.903
> 
> 标签：c#, sql-server-2008, sorting, collections

我的数据如下表所示（为简单起见，我排除了任何与排序顺序无关的值）。

```
ID     POSITION     PARENT     HASCHILDREN
------------------------------------------
1         1           0            False
2         3           0            True
3         2           0            False
4         1           2            False
5         2           2            False 
```

我想要做的是按位置递归地将这些数据排序到对象中。我拥有的对象是这样的

```
public class ExampleObject
{
    public int ID { get; set; }
    public int Position { get; set; }
    public int Parent { get; set; }
    public bool HasChildren { get; set; }
    public List<ExampleObject> Children { get; set; }
} 
```

上面的对象是递归的，因为它总是可以有自己的孩子，即使在这个例子中它只有 2 层深。我不知道如何在 SO 上构造结果，但这是我希望结果的 JSON

```
 [
        {
            ID: 1,
            Position: 1,
            Parent: 0,
            HasChildren: false,
            Children: []
        },
        {
            ID: 3,
            Position: 2,
            Parent: 0,
            HasChildren: false,
            Children: []
        },
        {
            ID: 2,
            Position: 3,
            Parent: 0,
            HasChildren: true,
            Children: [
                {                        
                    ID: 4,
                    Position: 1,
                    Parent: 2,
                    HasChildren: false,
                    Children: []
                },
                {                        
                    ID: 5,
                    Position: 2,
                    Parent: 2,
                    HasChildren: false,
                    Children: []
                }
            ]
        }
    ] 
```

我真的不知道从哪里开始，我所知道的是列表不会很大（10-20）个项目，包括孩子，如果有帮助的话，*应该*大部分排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:58:38.493

您需要使用公用表表达式（简称 CTE）。有了这些，您可以获得递归查询。[这个问题](https://stackoverflow.com/questions/4182082/recursive-sql-query-t-sql)的答案有一个很好的例子。

# r - 在具有重复观察的行之间产生精确加权平均值

> ID：10407486
> 
> 赞同：2
> 
> 时间：2012-05-02T03:54:22.810
> 
> 标签：r, plyr, data.table

我有一个类似于下面生成的数据框。有些人对特定变量有多个观察值，并且每个变量都有一个相关的估计标准误差 (SE)。我想为每个人创建一个只包含一行的新数据框。对于具有多个观察值的个人，例如 Kim 或 Bob，我需要根据估计的标准误差以及新计算的加权平均值的方差来计算精确加权平均值。例如，对于 Bob，对于 var1，这意味着我希望他在新数据帧中的 var1 值是：

```
weighted.mean(c(example$var1[2], example$var1[10]), 
   c(1/example$SE1[2], 1/example$SE1[10])) 
```

对于 Bob 的新 SE1，这将是加权平均值的方差，为：

```
1/sum(1/example$SE1[2] + 1/example$SE1[10]) 
```

我尝试使用聚合函数并且能够计算值的算术平均值，但是我编写的简单函数不使用标准误差，也不能处理 NA。

```
aggregate(example[,1:4], by = list(example[,5]), mean) 
```

在开发一些代码以解决此问题时，我们将不胜感激。这是示例数据集。

```
set.seed(1562)
example=data.frame(rnorm(10,8,2))
colnames(example)[1]=("var1")
example$SE1=rnorm(10,2,1)
example$var2=rnorm(10,8,2)
example$SE2=rnorm(10,2,1)
example$id= 
  c ("Kim","Bob","Joe","Sam","Kim","Kim","Joe","Sara","Jeff","Bob")
example$SE1[5]=NA
example$var1[5]=NA
example$SE2[10]=NA
example$var2[10]=NA
example

       var1      SE1      var2        SE2   id
1   9.777769 2.451406  6.363250  2.2739566  Kim
2   8.753078 2.174308  6.219770  1.4978380  Bob
3   7.977356 2.107739  6.835998  2.1647437  Joe
4  11.113048 2.713242 11.091650  1.7018666  Sam
5         NA       NA 11.769884 -0.1310218  Kim
6   5.271308 1.831475  6.818854  3.0294338  Kim
7   7.770062 2.094850  6.387607  0.2272348  Joe
8   9.837612 1.956486  8.517445  3.5126378 Sara
9   4.637518 2.516896  7.173460  2.0292454 Jeff
10  9.004425 1.592312        NA         NA  Bob 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T04:06:06.797

我喜欢`plyr`解决这类问题的软件包。它应该在功能上等同于`aggregate`，但我认为它使用起来很好且方便。网站上有很多示例和大约 20 页的 plyr[介绍](http://plyr.had.co.nz/)。对于这个问题，由于数据以 data.frame 开始，而另一端需要另一个 data.frame，我们使用`ddply()`

```
library(plyr)
#f1()
ddply(example, "id", summarize, 
      newMean = weighted.mean(x=var1, 1/SE1, na.rm = TRUE),
      newSE = 1/sum(1/SE1, na.rm = TRUE)
      ) 
```

返回：

```
 id newmean   newSE
1  Bob  8.8982 0.91917
2 Jeff  4.6375 2.51690
3  Joe  7.8734 1.05064
4  Kim  7.1984 1.04829
5  Sam 11.1130 2.71324
6 Sara  9.8376 1.95649 
```

还检查`?summarize`和？`transform`其他一些好的背景。`plyr`如果需要更复杂的任务，您还可以将匿名函数传递给函数。

或者使用`data.table`可以更快地完成某些任务的包：

```
library(data.table)
dt <- data.table(example, key="id")
#f2()
dt[, list(newMean = weighted.mean(var1, 1/SE1, na.rm = TRUE),
          newSE = 1/sum(1/SE1, na.rm = TRUE)),
   by = "id"] 
```

快速基准测试：

```
library(rbenchmark)
#f1 = plyr, #f2 = data.table
benchmark(f1(), f2(), 
          replications = 1000,
          order = "elapsed",
          columns = c("test", "elapsed", "relative"))

      test elapsed relative
    2 f2()   3.580   1.0000
    1 f1()   6.398   1.7872 
```

在我`data.table()`的简单笔记本电脑上，这个数据集的速度提高了 ~ 1.8 倍。

# java - Android：我应该从 facebook.java 中删除 @Override 吗？

> ID：10407492
> 
> 赞同：0
> 
> 时间：2012-05-02T03:54:46.133
> 
> 标签：java, android, facebook, facebook-android-sdk

我正在尝试将 facebook 集成到我的 Android 应用程序中。当我在项目中添加互联网权限并生成 App_ID 但是当我将 facebook 文件放入我的项目时，它会给出这些错误，如图所示。

现在我应该删除@Override 还是我错过了什么。

如果我将此代码放入我的**OnCreate**方法中，它也会给出删除 @Override 的错误。

```
 facebook.authorize(this, new DialogListener() {
            @Override
            public void onComplete(Bundle values) {}

            @Override
            public void onFacebookError(FacebookError error) {}

            @Override
            public void onError(DialogError e) {}

            @Override
            public void onCancel() {}
        }); 
```

![在此处输入图像描述](../Images/0c9ce54b71155c173d4287eb5916ef9a.png)

如果是，我应该包括 facebook.apk 那么在哪里添加呢？请帮忙

我遵循了许多教程，但无法解决这些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T21:21:17.133

这很可能是因为您在 Java 1.5 和 Java 1.6 之间切换。在 1.5 中，您不能使用 @Override 标记接口实现，但在 1.6 中可以。

[@Override 注释错误（android 首选项）](https://stackoverflow.com/questions/4761888/override-annotation-error-android-prefs)

[Eclipse 中覆盖注释的错误](https://stackoverflow.com/questions/3735661/bug-with-override-annotations-in-eclipse)

# javascript - 使用javascript访问表格行内的文本框

> ID：10407494
> 
> 赞同：0
> 
> 时间：2012-05-02T03:54:58.870
> 
> 标签：javascript

我正在使用以下代码

```
<tr id="row">
<td><input type="text" name ="first" id="first" onclick="goto("row")"/>
</td>
<td><input type="text" name ="second" id="second"/>
</td>
</tr>

<script>
function goto(row)
{
var row=document.getElementById("row");

}
</script> 
```

在 goto() 函数中，我使用 id 获取表格行。单击第一个文本框时，我需要在该行中获取第二个文本框。如何使用表格行 id 获取第二个文本框。任何想法 ？。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:58:31.477

首先，您的 HTML 中缺少一些等号 (=) 符号。您可能希望将其更改为 name="first" 和 name="second"。其次，我不确定为什么你有两个元素具有相同的“第二个”ID，而你可以将其中一个更改为“第一个”，这样它们就不会发生冲突，然后你可以使用 getElementById 轻松选择第二个元素（“第二”）。简单的错误，对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:00:38.307

更改 ID，使其唯一，您可以直接访问输入文本框，例如：

```
var txtbox = document.getElementById("YourTextboxId"); 
```

# zend-framework - Zend_Db 类型为 Decimal

> ID：10407497
> 
> 赞同：0
> 
> 时间：2012-05-02T03:55:35.433
> 
> 标签：zend-framework, decimal, zend-db, zero-pad

我有用于存储数据的 MySQL 数据库。某些字段是十进制类型。我不知道为什么 zend_db 总是为十进制类型字段填充零填充。

```
public function getListings() {
    $select = $this->getDb()->select()
                            ->from($this->_tableName, array('listing_sell_price', 'listing_sell_total_price'));
    return $select->query()->fetchAll(); 
```

}

当我尝试 var_dump 模型中的所有数据时

```
$listings = RW_Model_Listing::getInstance()->getListings();
var_dump($listings); 
```

有零填充

```
array(2) {
        [0]=> array(2) { ["listing_sell_price"] => string(10) "0004750000", ["listing_sell_total_price"] => string(10) "0004750000"}   
        [1]=> array(2) { ["listing_sell_price"] => string(10) "0000008000", ["listing_sell_total_price"] => string(10) "0000008000"} 
    } 
```

去除零垫的任何解决方案？

最好的问候，布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:20:25.690

好吧，这是我的愚蠢。

我忘记在我的表配置 LoL 中取消选中 ZeroFill

# android - 从 android 中的 URL 播放 youtube 视频

> ID：10407498
> 
> 赞同：4
> 
> 时间：2012-05-02T03:56:01.353
> 
> 标签：android

我想在我的应用程序中播放 youtube 视频。我从 SAX Parsing 获取视频 URL。我的问题是如何在 VideoView 中播放来自 URL 的视频，而不是在 Webview 或浏览器中。

我试过这段代码：

```
Intent lVideoIntent = new Intent(null, Uri.parse("VIDEO URL"));
startActivity(lVideoIntent); 
```

它显示一个带有“Internet”和“YouTube”选项的弹出屏幕。我想直接在 youtube 上播放视频。

请让我知道你的想法。任何代码或任何示例都受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:22:19.593

```
 Intent i = new Intent(Intent.ACTION_VIEW);
 i.setData(Uri.parse("video url"));
 VideoActivity.this.startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:01:32.357

```
String videoUrl = "http://www.youtube.com/watch?v=cxLG2wtE7TM"

//split video url and get value of v ie cxLG2wtE7TM

String videoId = "cxLG2wtE7TM";
String action = Intent.ACTION_VIEW;
Uri uri = Uri.parse("vnd.youtube:" + videoId);
Intent videoIntent = new Intent(action, uri);
startActivity(videoIntent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:26:57.063

试试这种方式，它对我有用，用于播放网站上的视频

```
 Intent browserIntent = new Intent(Intent.ACTION_VIEW,
                        Uri.parse("http://www.youtube.com/
                           watchv=JxYSlkh1Src&feature=player_embedded"));
                 startActivity(browserIntent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-07T10:50:18.350

**它正在显示一个带有“Internet”和“YouTube”的弹出屏幕**

因为 ACTION_VIEW 意图是在默认浏览器和 Youtube 应用程序中编写的。这就是为什么无论何时它捕获浏览器打开的 URL 以及无论何时打开 Youtube URL 浏览器和 Youtube 应用程序。

**我想直接在 youtube 上播放视频**

获取 Youtube 视频的嵌入链接并设置其播放视频的意图。

前任：-`http://www.youtube.com/embed/srMFb6zpx2Y`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T04:42:13.690

您可以尝试以下代码在`Youtube`应用程序中直接播放。

```
 Intent videoClient = new Intent(Intent.ACTION_VIEW);
            videoClient.setData(Uri.parse("https://www.youtube.com/watch?v=EwSdmxyayx0&amp;feature=youtube_gdata"));//you can try here your own video url
            videoClient.setClassName("com.google.android.youtube", "com.google.android.youtube.PlayerActivity");
            try{
                startActivity(videoClient);
            }catch(ActivityNotFoundException excp){
                try{
                    videoClient.setClassName("com.google.android.youtube", "com.google.android.youtube.WatchActivity");
                     startActivity(videoClient);
                }catch(ActivityNotFoundException exc){
                    exc.printStackTrace();
                }
            } 
```

# php - 如何将页面上已经显示的数据导出为pdf/excel？

> ID：10407499
> 
> 赞同：0
> 
> 时间：2012-05-02T03:56:39.210
> 
> 标签：php, mysql

我有这样的表格：

```
<form method="post" action="track_reports.php" name="form">
                    <table id="mytable">
                        <tr>
                            <td>
                                <input type="checkbox" name="chkBadge" onClick="apply(this.checked, 'textBox')"> <font class="category">Badge ID</font>
                            </td>

                            <td>
                                <input id="textBox" class="text sign" type="text" name="badge_id" disabled="disabled">
                            </td>
                        </tr>

                        <tr>
                            <td>
                                <input type="checkbox" name="chkEmp" onClick="apply(this.checked, 'textBox2')"> <font class="category">Employee Name</font>
                            </td>

                            <td>
                                <input id="textBox2" class="text sign" type="text" name="employee_name" disabled="disabled">
                            </td>
                        </tr>

                        <tr>
                            <td>
                                <input id="myCheckBox" type="checkbox" name="chkEmpOtDate" onClick="apply(this.checked, 'textBox3', 'textBox4')"> <font class="category">OT Date</font>
                            </td>

                            <td>
                                <font class="category">From</font> <input class="text sign" id="textBox3" type="text" name="alamat" disabled="disabled"> <font class="category">To</font> <input class="text sign" id="textBox4" type="text" name="alamat" disabled="disabled">
                            </td>
                        </tr>

                        <tr>
                            <td></td>
                            <td>
                                <input type="submit" name="submit" value="Submit" disabled>
                            </td>
                        </tr>
                    </table>
                </form> 
```

这是跟踪报告的来源：

```
<div id="bodyText" class="bodyText">
                <div class="header">
                    <div class="content">
                        <h1>Report Submissions</h1>
                    </div>
                </div>

                <?php
                    include ("config.php");

                    $bagianWhere = "";

                    if (isset($_POST['chkBadge']))
                    {
                        $badge_id = $_POST['badge_id'];
                        if (empty($bagianWhere))
                        {
                            $bagianWhere .= "badge_id = '$badge_id'";
                        }
                    }

                    if (isset($_POST['chkEmp']))
                    {
                       $employee_name = $_POST['employee_name'];
                       if (empty($bagianWhere))
                        {
                            $bagianWhere .= "employee_name LIKE '$employee_name'";
                        }
                        else
                        {
                            $bagianWhere .= " AND employee_name LIKE '$employee_name'";
                        }
                    }

                    if (isset($_POST['chkOtdate']))
                    {
                        $ot_date = $_POST['ot_date'];
                        if (empty($bagianWhere))
                        {
                            $bagianWhere .= "ot_date LIKE '%$ot_date%'";
                        }
                        else
                        {
                            $bagianWhere .= " AND ot_date LIKE '%$ot_date%'";
                        }
                    }

                    $query = "SELECT * FROM t_submissions WHERE ".$bagianWhere;
                    $hasil = mysql_query($query);
                    echo "<table cellspacing='0'>";
                    echo "<tr><th class='th'>Badge ID</th><th class='th'>Employee Name</th><th class='th'>Department</th><th class='th'>OT Date</th></tr>";
                    while ($data = mysql_fetch_array($hasil))
                    {
                       echo "<tr><td class='td'>".$data['badge_id']."</td><td class='td'>".$data['employee_name']."</td><td class='td'>".$data['dept_name']."</td><td class='td'>".$data['ot_date']."</td></tr>";
                    }
                    echo "</table>";
                    ?>
                    <br>
                    <a title="Export to PDF"><img src="images/pdf_files.png"></a>
                    <a title="Export to Excel"><img src="images/excel_file.png"></a>
                    <br><br>
                    <input type="button" VALUE="Back" onClick="history.go(-1);return true;">
            </div> 
```

当我尝试使用 badid 进行搜索时，数据将显示。现在我的问题是如何将页面上显示的数据导出到 PDF/excel ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:20:33.627

对于以其他文件格式编写，直接编写代码并不容易，有一些库提供了简单的接口来完成这些工作。

fpdf 是我用来转换为 PDF[演示并在此处下载的最佳库](http://www.fpdf.org/)

phpexcel也是一个很好的库，可以用来转换成excel、PDF等多种格式。[在这里下载和演示](http://phpexcel.codeplex.com/)

# c++ - 将一个 DeviceContext 的内容复制到另一个 DeviceContext

> ID：10407500
> 
> 赞同：1
> 
> 时间：2012-05-02T03:56:51.380
> 
> 标签：c++, winapi, gdi

我从未做过任何 GDI 编程，尽管在黑暗中拍摄了几张照片并搜索了文档，但我还没有找到将一个 DC 的内容复制到另一个 DC 的正确方法。

我目前拥有的代码如下。我不明白为什么它不起作用（创建后窗口仍然保持空白）。

```
SIZE srcSize;
// ... Get size of source DC

HDC destDC = ...;   // from GetDC(myWindow), myWindow was
                    // sized before this to properly contain source
HDC sourceDC = ...;

HBITMAP buffer = CreateCompatibleBitmap(sourceDC, srcSize.cx, srcSize.cy);
HGDIOBJ oldObj = SelectObject(destDC, buffer);
BitBlt(destDC, 0, 0, srcSize.cx, srcSize.cy, sourceDC, 0, 0, SRCCOPY);
SelectObject(destDC, oldObj);
DeleteObject(buffer);

//... ReleaseDC()s here 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:23:00.500

从一个 DC 复制到另一个 DC 唯一需要的是`BitBlt`. 有效的代码如下。

```
SIZE srcSize;
// ... Get size of source DC

HDC destDC = ...;   // from GetDC(myWindow), myWindow was
                    // sized before this to properly contain source
HDC sourceDC = ...;

BitBlt(destDC, 0, 0, srcSize.cx, srcSize.cy, sourceDC, 0, 0, SRCCOPY);
//... ReleaseDC()s here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:23:26.800

我不太清楚您要做什么。首先，为什么要创建新位图并将其选择到窗口（对不起，“客户区”）DC 中？您想要的只是绘制/绘制窗口，不是吗？这时候就不需要了。destDC 正是窗口的客户区表面。

sourceDC 真的包含任何东西吗？例如，它是否选择了位图？

当然，您应该处理 WM_PAINT。如果您处理此消息，则会验证窗口，并且您不需要显式验证它。使用 GetDC()/ReleaseDC() 被称为“绘图”，而不是“绘画”。在我过去制作的应用程序中，我必须使用这两种方法，绘画（处理 WM_PAINT）以响应调整大小，退出最小化状态并将窗口置于前台（如果之前被另一个窗口遮挡）和绘图，以立即进行某些更改可见（而不是先使窗口无效并等待应用程序几乎进入空闲状态 - 请注意 WM_PAINT 是低优先级消息）。

希望这可以帮助

# ruby-on-rails - 错误：尝试验证表单时出现“未知验证器：'PresencesValidator'”

> ID：10407501
> 
> 赞同：3
> 
> 时间：2012-05-02T03:56:57.250
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在开发我的第一个 Rails 项目，并且我已经使用 Rails 构建了一个小型站点，现在我正在尝试按照 Rails 入门教程来构建博客。

在尝试验证我的博客文章时，我被困在[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)的 6.5 上，这是我得到的错误： `Unknown validator: 'PresencesValidator'`.

这是我的帖子模型

```
class Post < ActiveRecord::Base
    validates :name, :presence => { :message => "Name cannot be blank" }
    validates :title, :presence => { :message => "Title cannot be blank" }
    validates :content, :presences => { :message => "Content cannot be blank" }
end 
```

我也试过设置：presence => true，但同样的错误。

为什么我会收到此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-02T04:04:26.733

因为这是一个错字：

```
validates :content, :presences => { :message => "Content cannot be blank" } 
```

`presences`当你打算写的时候你写了`presence`。

此外，您在这些上提供的消息是默认的，因此您实际上不需要提供它。

最后一件事，如果您想验证三件事的存在，您可以通过以下方式在一行中完成：

```
validates_presence_of :name, :title, :content 
```

这将完成与您尝试编写的代码相同的行为。有两种验证语法，当您对每个属性进行大量验证时，您一直使用的一种更好，我个人认为，当您想要运行相同验证的许多不同属性时，另一种更好。基本上哪个需要更少的打字。

查看[验证和回调](http://guides.rubyonrails.org/v2.3.11/activerecord_validations_callbacks.html)指南作为参考。干杯。

# java - Java - 在for循环内部和外部访问变量

> ID：10407505
> 
> 赞同：1
> 
> 时间：2012-05-02T03:57:32.877
> 
> 标签：java, variables, loops, for-loop

```
String playerlist;

for(Player p : allplayers){
    playerlist += p.getDisplayName() + ", ";
}

sendMessage(playerlist); 
```

我怎样才能做到这一点？我需要在我的 for 循环中有一个变量，然后在循环之外访问它。

谢谢，对不起，如果这是一个非常愚蠢的问题。我就是想不通。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T03:58:52.373

你很近。您需要将第一行更改为

```
String playerlist = ""; 
```

在Java中，在初始化之前使用变量是非法的，并且该行

```
playerlist += p.getDisplayName() + ", "; 
```

脱糖（*）到

```
String temp = playerlist;
playerlist = temp + (p.getDisplayName() + ", "); 
```

一旦你初始化`playerlist`，你就可以将它的内容读入临时变量，然后更新`playerlist`。

不过，有两个更高级别的建议。

1.  如果您有可用的连接方法，就像某些库提供的那样（如[.NET](http://msdn.microsoft.com/en-us/library/system.string.join.aspx)和[Python](http://docs.python.org/library/stdtypes.html#str.join)平台一样），您可以只使用更易于阅读的连接。
2.  但是，如果您没有可用的 join 方法（AFAIK，Java 标准库没有提供这样的东西），您应该使用[StringBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)，这与@anubhava 的建议一致。您将在大量字符串上获得更好的性能，并且代码更易于理解，这是双赢的。

* * *

编辑：正如@edalorzo 在评论中正确提到的那样，您只会因为未初始化*局部*变量而收到错误消息，并且静态和实例字段都会自动初始化。具体来说，数值类型（`int`、`long`、`double`等）初始化为 0，布尔值初始化为`false`，引用类型初始化为`null`。

该规范明确描述了字段的自动初始化，因此您可以依赖它，但这很少是您想要的。通常，您以后使用该字段时会需要该字段的非默认值，因为`null`它不是非常有用（而且许多语言，特别是标准 ML 等功能语言，`null`完全没有）。所以我建议在构造函数中初始化对象的所有字段。

* * *

(*)：我上面展示的“去糖”几乎是准确的：事实上，`playerlist`只评估一次，这不会影响这个特定程序的行为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T04:00:34.750

如果你在循环外初始化你的变量，你可以得到：

```
String playerlist = ""; 
```

[但是由于您正在操作字符串，因此使用StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)而不是 String会更好。原因是字符串是不可变的，您将在 for 循环内的每次迭代中创建一个新字符串。但是 StringBuilder 是可变的，并且有各种重载`append`方法来支持您的操作。使用 StringBuilder 你的代码会变成这样：

```
StringBuilder playerlist = new StringBuilder();

for (Player p : allplayers) {
    playerlist.append(p.getDisplayName()).append(", ");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T04:05:23.490

局部变量`playerlist`可能尚未初始化。在java`for`循环语句中，局部变量必须先初始化，然后在循环块中使用。你必须初始化`playerlist`. 您可以使用以下代码：

```
String playerlist = null;

for(Player p : allplayers)
{
    playerlist += p.getDisplayName() + ", ";
}

sendMessage(playerlist); 
```

但最好使用以下代码：

```
StringBuilder playerlist = new StringBuilder();

for(Player p : allplayers)
{
    playerlist.append(p.getDisplayName()).append(", ");
}
sendMessage(playerlist.toString()); 
```

# c# - 使用 Devexpress 控件的复合控件的设计时间问题

> ID：10407508
> 
> 赞同：0
> 
> 时间：2012-05-02T03:58:29.920
> 
> 标签：c#, asp.net, devexpress, composite-controls

我正在创建一个复合控件类，其中包含多个 devexpress aspx 控件。但是，设计时存在一个问题：每当我更改我公开的子控件属性时，子控件都会丢失其界面/皮肤（如下图） ![在此处输入图像描述](../Images/f6b0d735ef6c22c668eb1d965b7417fd.png) 上图显示，leftlistbox，底部两个按钮是 aspx控件，而 rightlistbox 是 asp 控件。每当我访问并更改复合控件的子控件属性时，只有那些 devexpress 控件会在设计时丢失其界面/外观，如上所示。下面是我的复合控件类文件。

```
 [ParseChildren(true), PersistChildren(false)]
public class CompositeControl_TEST : CompositeControl, INamingContainer 
{
    private ASPxListBox leftListBox;
    private ListBox rightListBox;
    private ASPxButton lefttoright;
    private ASPxButton righttoleft;

    [Bindable(true), DesignerSerializationVisibility(DesignerSerializationVisibility.Content), RefreshProperties(RefreshProperties.Repaint), NotifyParentProperty(true)]
    [PersistenceMode(PersistenceMode.InnerProperty)]
    public DevExpress.Web.ASPxEditors.ASPxListBox XF_leftListBox
    {
        get
        {
            this.EnsureChildControls();
            return leftListBox;
        }
    }

    [Bindable(true), DesignerSerializationVisibility(DesignerSerializationVisibility.Content), RefreshProperties(RefreshProperties.Repaint), NotifyParentProperty(true)]
    [PersistenceMode(PersistenceMode.InnerProperty)]
    public ListBox XF_rightlistBox
    {
        get
        {
            this.EnsureChildControls();
            return rightListBox;
        }
    }

    [Bindable(true), DesignerSerializationVisibility(DesignerSerializationVisibility.Content), RefreshProperties(RefreshProperties.Repaint), NotifyParentProperty(true)]
    [PersistenceMode(PersistenceMode.InnerProperty)]
    public DevExpress.Web.ASPxEditors.ASPxButton XF_left2rightButton
    {
        get
        {
            this.EnsureChildControls();
            return lefttoright;
        }
    }

    [Bindable(true), DesignerSerializationVisibility(DesignerSerializationVisibility.Content), RefreshProperties(RefreshProperties.Repaint), NotifyParentProperty(true)]
    [PersistenceMode(PersistenceMode.InnerProperty)]
    public DevExpress.Web.ASPxEditors.ASPxButton XF_right2leftButton
    {
        get
        {

            this.EnsureChildControls();
            return righttoleft;
        }
    }

    protected override void RecreateChildControls()
    {    
        base.EnsureChildControls();
    }

    protected override void CreateChildControls()
    {
        this.Controls.Add(new LiteralControl(@"<div>"));
        this.Controls.Add(new LiteralControl(@"<table>"));
        this.Controls.Add(new LiteralControl(@"<tr>"));

        this.Controls.Add(new LiteralControl(@"<td>"));
        this.leftListBox = new ASPxListBox();
        this.leftListBox.ID = this.ClientID + "leftListBox";
        this.leftListBox.Items.Add("left from cs");
        this.Controls.Add(leftListBox);
        this.Controls.Add(new LiteralControl(@"</td>"));

        this.Controls.Add(new LiteralControl(@"<td>"));
        this.rightListBox = new ListBox();
        this.rightListBox.ID = this.ClientID + "rightListBox";
        //this.rightListBox.Items.Add("Right from cs");
        this.Controls.Add(rightListBox);
        this.Controls.Add(new LiteralControl(@"</td>"));
        this.Controls.Add(new LiteralControl(@"</tr>"));

        this.Controls.Add(new LiteralControl(@"<tr>"));
        this.Controls.Add(new LiteralControl(@"<td>"));
        this.lefttoright = new ASPxButton();
        lefttoright.ID = this.ClientID + "lefttoright";
        lefttoright.Text = "lefttoright";
        this.Controls.Add(lefttoright);
        this.Controls.Add(new LiteralControl(@"</td>"));

        this.Controls.Add(new LiteralControl(@"<td>"));
        this.righttoleft = new ASPxButton();
        righttoleft.ID = this.ClientID + "righttoleft";
        righttoleft.Text = "righttoleft";
        this.Controls.Add(righttoleft);
        this.Controls.Add(new LiteralControl(@"</td>"));
        this.Controls.Add(new LiteralControl(@"</tr>"));
        this.Controls.Add(new LiteralControl(@"</div>"));
        base.CreateChildControls();
    }
} 
```

}

我一直在网上搜索类似的问题，但似乎没有找到任何匹配的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T01:20:37.863

我知道这很旧，但我想我会加入。您必须重写设计器类 CompositeControlDesigner 作为默认调用 RecreateChildControls - 由于控件属性未保存在 viewState 中，因此在此方法调用期间会重新创建它们

```
[Bindable(true),   DesignerSerializationVisibility(DesignerSerializationVisibility.Content), RefreshProperties(RefreshProperties.Repaint), NotifyParentProperty(true)]
[PersistenceMode(PersistenceMode.InnerProperty)]
public DevExpress.Web.ASPxEditors.ASPxButton XF_right2leftButton
{
    get
    {

        this.EnsureChildControls();
        //this is not in viewsate and it is ill adviced to try and put it there. 
        return righttoleft;
    } 
```

}

尝试创建从 CompositeControlDesigner 派生的设计器然后像这样分配给您的自定义控件

```
[
Designer("YourDesignerNamespace.YourCompositeControlDesigner, " + YourAssemblyInfo)
] 
[ParseChildren(true), PersistChildren(false)]
public class CompositeControl_TEST : CompositeControl, INamingContainer 
{....

} 
```

像这样覆盖 CompositeControlDesigner 中的 CreateChildControls

```
protected override void CreateChildControls()
    {

    } 
```

这将通过接口属性删除对 RecreateChildControl 的调用

或者，您可以覆盖 GetDesignTimeHtml - 如果您不打算调用 base.GetDesignTimeHtml（此方法调用 CreateChildControls），这显然是。这必须处理 Html（您只需在 ViewControl 上调用 RenderControl 即可）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:04:16.783

发生这种情况是因为您没有覆盖处理控件的设计时修改的设计器。由于您正在覆盖主要功能，因此可以保证控件仍然正常运行。也许，通过 WebUserControl 组织这样一个复杂的布局会更好......

# backbone.js - 如何在 Backbone 中使用 localStorage 数据之前对其进行过滤？

> ID：10407511
> 
> 赞同：0
> 
> 时间：2012-05-02T03:58:44.903
> 
> 标签：backbone.js, local-storage

我使用 localStorage 来保存我的 Backbone 应用程序的数据。但是每次我`this.collection.fetch()`用来获取数据时，我都想先过滤它们，然后只使用部分数据来渲染我的视图。我尝试使用 ajax`data`选项`fetch`来过滤数据，但它不起作用。有人可以给我一些想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:49:51.153

当然你可以过滤数据。有多种方法可以做到这一点，因此您需要通过过滤数据更好地解释您的意思。假设一切正常，并且在您解析所有有效模型之后，`fetch`我建议您`render()`在集合视图的方法中过滤数据。像这样简单的东西可能会起作用：

```
render: function() {
  this.collection.each(function(model) {
      if(model.something > somethingElse) {
         // render the model
         ...
      }
  })
}, 
```

如果您的意思是您不希望所有获取的数据成为集合的一部分，那么您将需要覆盖集合解析方法。它传递来自本地存储的原始数据，您需要返回集合数据。看[这里](http://documentcloud.github.com/backbone/#Collection-parse)

# iphone - 覆盖 NSObject 数据

> ID：10407512
> 
> 赞同：0
> 
> 时间：2012-05-02T03:58:49.427
> 
> 标签：iphone, objective-c, nsobject

我有一个数组，这个数组包含问题对象，所以在这里我需要更改数组的位置

```
Question *que=[[Question alloc]init];

que=[myarray objectAtIndex:1];

Question *que1=[[Question alloc]init];
que1=[myarray objectAtIndex:2];

here i need to inter change objects each other some 

[que1 setValue: que.name forKey:@"Name"];

[myarray relplaceObjectAtIndex:2 withObject:que1]; 
```

设置值相同的objectValues是否正确

请指导我锄头可以互换价值。

感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:24:40.353

您的代码存在重大问题：

1.  这个说法：

    ```
    Question *que = [[Question alloc] init]; 
    ```

    分配一个新`Question`实例并将其分配给变量`que`。当你这样做时：

    ```
    que = [myarray objectAtIndex:1]; 
    ```

    您正在覆盖`Question`您刚刚分配的实例，从而有效地泄漏内存（因为您从未释放它）。如果您使用 ARC，这将不是问题，但仍然需要注意这一点，因为无论有没有 ARC，它都是没有意义的。你这样做了两次，一次一次，`que`一次`que1`。由于您实际上不需要分配和初始化新`Question`实例，因此您可以这样做：

    ```
    Question *que = [myarray objectAtIndex:1]; 
    ```

2.  您获得对`Question`对象的引用并将其分配给`que1`. 然后你改变它并想把它*放回*数组中。这是没有意义的，因为该数组已经包含对`Question`您使用`objectAtIndex:`.

3.  你还没有真正解释你想要做什么。您的整个代码基本上可以归结为：

    ```
    [[[myarray objectAtIndex:2] setValue:[[myarray objectAtIndex:1] name] forKey:@"Name"]; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:08:49.467

您的代码应该按照您所展示的方式工作。只需注意几点：

1.  你需要`myarray`成为一个`NSMutableArray`
2.  你这里有一个错字：`relplaceObjectAtIndex:2`应该是`replaceObjectAtIndex`
3.  数组从索引 0 开始，我相信您知道这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T04:14:24.420

首先使用 NSMutableArray 对象来保存它而不是 NSArray

然后。

你需要了解一件主要的事情，你只持有一个指向对象的指针。array 正在管理它。您在访问数组内的对象之前创建了一个对象，不要这样做会造成内存泄漏。您必须仅从数组访问对象。

```
Question * que1=[myarray objectAtIndex:1];
[que1 retain];
[myarray removeObjectAtIndex:1];

Question * que2=[myarray objectAtIndex:2];
[que2 retain];
[myarray removeObjectAtIndex:2]; 
```

您可能没有使用 ARC，并且您的数组是该对象的唯一所有者。所以如果你从数组中删除对象，它可能会释放整个对象

```
[myarray insertObject:que2 atIndex:1];
[myarray insertObject:que1 atIndex:2]; 
```

这是将物体放在任何位置的示例。读取类引用[NSMutableArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

# c++ - 为什么 is_lock_free 是成员函数？

> ID：10407514
> 
> 赞同：14
> 
> 时间：2012-05-02T03:59:03.693
> 
> 标签：c++, c++11, std, atomic

为什么`is_lock_free`需要一个实例（它是一个成员函数）的原因是什么？为什么不是类型的元函数或静态`constexpr`成员函数？

我正在寻找一个实际的例子来说明为什么它是必要的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-02T04:27:28.893

该标准允许类型*有时是*无锁的。

> 第 29.4 节**无锁属性**
> 
> ATOMIC_..._LOCK_FREE 宏指示相应原子类型的无锁属性，有符号和无符号变体组合在一起。这些属性也适用于原子模板的相应（部分）特化。值 0 表示这些类型从不无锁。**值 1 表示这些类型有时是无锁的。**值 2 表示类型始终是无锁的。

[C++ 原子论文 n2427](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2427.html#DiscussLockFree)说明了背后的原因：

> ...该提案提供运行时无锁查询功能而不是编译时常量，因为平台的后续实现可能会使用无锁操作升级锁定操作，因此系统通常在动态库后面抽象此类设施，我们希望保持这种可能性。此外，我们建议没有硬件原子支持的实现使用该技术。...

而且（正如[杰西古德](https://stackoverflow.com/users/906773/jesse-good)指出的那样）：

> 该提案提供了针对单个对象而不是整个类型的无锁查询函数，以允许不可避免地未对齐的原子变量，而不会影响对齐的原子变量的性能

# actionscript - ActionScript 3.0：如何将 JPEG 编码的 ByteArray 转换为位图

> ID：10407521
> 
> 赞同：0
> 
> 时间：2012-05-02T03:59:46.547
> 
> 标签：actionscript, bitmap, bytearray, jpeg

ActionScript 3.0：如何将 JPEG 编码的 ByteArray 转换为位图 JPEGEncoder 类可以将原始位图数据转换为 JPEG 编码的 ByteArray 对象，我只想知道如何反过来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:57:59.663

据我所知，您可以简单地使用`Loader.loadBytes`：

```
private var loader:Loader = new Loader();

private function convertByteArray(ba:ByteArray):void
{
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeHandler);
    loader.loadBytes(ba);
}

private function completeHandler(event:Event):void
{       
    var bitmap:Bitmap = Bitmap(loader.content);
} 
```

# php - 如何使用 PHP 向任何文件添加数字签名（RSA、证书等）？

> ID：10407523
> 
> 赞同：11
> 
> 时间：2012-05-02T04:00:06.387
> 
> 标签：php, file, rsa, digital-signature

我需要知道是否可以使用 RSA、证书等对任何类型的文件进行数字签名，或者是否只能对某些类型的文件进行签名。所有这一切，使用 PHP。

例如：可以对纯文本文件进行数字签名吗？图像（png、jpeg、bmp）呢？

我不需要“附加”带有图形签名的图像。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-28T13:18:21.133

**回复：任何类型的文件都可以使用 RSA、证书等进行数字签名，还是只能对某些类型的文件进行签名？**

答：是的，不是的。一方面，可以为任何比特包计算标准数字签名，包括纯文本文件、图像文件、二进制文件，以及任何你能想象到的东西。

但随后问题变成了：

1.  您如何将数字签名（其本身是二进制的位）与数据文件相关联？数据文件格式是否允许将数字签名附加到数据？或者您是否需要自己管理数字签名，也许作为一个单独的文件，也许使用您自己发明的数据格式？

2.  一旦您拥有数字签名的数据及其签名，接收者如何验证数据及其签名以确保接收者知道谁签署了数据（身份），并且数据自签名后没有更改（完整性）？

**支持数字签名的文件格式**

本质上支持数字签名的文件格式的一大优势是，收件人可以通过接收签名文件然后使用他们自己的验证软件来*验证数字签名和文件的完整性。*收件人不需要从发件人安装任何东西。

有许多支持数字签名的文件格式。例如，pdf、Word .doc、.docx。Excel .xls、.xlsx。有一个[用于签署 xml 文件的标准](http://en.wikipedia.org/wiki/XML_Signature)。它的好处是 xml 可以用作任何类型数据的信封。例如，可以对 pdf 文件进行数字签名并发送给某人。然后收件人可以使用标准/免费的 Adob​​e Reader 打开 pdf 并验证其数字签名。

纯文本文件（用字符填充的文件）的“格式”不支持数字签名。因此，您需要一个用于文本及其数字签名的信封，或者单独处理数字签名。在任何情况下，收件人都需要您的软件来验证数据。（或者在您提供纯文本和签名的规范后，需要自己编写。）

S/MIME 提供了一种对文本或其他电子邮件/mime 组织数据进行数字签名的标准方式。参见[RFC 5751](http://datatracker.ietf.org/doc/rfc5751/?include_text=1)。但除了可以生成或接收/验证签名电子邮件的电子邮件代理之外，它并没有被广泛使用。Outlook 确实支持这一点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T17:57:08.393

使用[phpseclib，一个纯 PHP RSA 实现](http://phpseclib.sourceforge.net/)（[在此处](https://github.com/phpseclib/phpseclib/graphs/contributors)更新）：

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();
extract($rsa->createKey());

$plaintext = 'terrafrost';

$rsa->loadKey($privatekey);
$signature = $rsa->sign($plaintext);

$rsa->loadKey($publickey);
echo $rsa->verify($plaintext, $signature) ? 'verified' : 'unverified';
?> 
```

与 CLI openssl 类似如下：

```
openssl dgst -sha1 -sigopt rsa_padding_mode:pss -sigopt rsa_pss_saltlen:-1 -out signature.txt -sign privatekey.txt plaintext.txt 
openssl dgst -sha1 -sigopt rsa_padding_mode:pss -sigopt rsa_pss_saltlen:-1 -prverify privatekey.txt -signature signature.txt plaintext.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T05:08:43.457

为什么要对这些不同的文件进行数字签名？

没有实际更改文本文件或图像的标准，以便文件本身包含某种数字签名。

如果你想向用户保证文件没有被篡改，你可以给他们一个文件的 MD5 哈希值。他们可以使用免费工具检查他们下载的文件的 MD5 哈希值，并将其与您提供的文件进行比较，以确保他们的文件没有被更改。这通常用于第三方可以插入恶意代码的软件/二进制包。

另一种可能性是您希望用户能够验证某些文件的真实性。在这种情况下，用户可能希望确定文本文件或图像是专门来自您的。这个功能几乎就像使用只有您知道的私钥获取文件的 MD5 哈希一样，以便最终用户可以将文件签名与您的公钥进行比较，以确保文件未被篡改并且来自特定来源。PGP（相当好的隐私）为此提供了一个框架。

我建议您查看 PGP 介绍文档以获取更多信息。[http://www.pgpi.org/doc/pgpintro/](http://www.pgpi.org/doc/pgpintro/)

# android - Android 中 handler 和 AsyncTask 的区别之一

> ID：10407533
> 
> 赞同：4
> 
> 时间：2012-05-02T04:01:34.240
> 
> 标签：android

为什么一个`AsyncTask`人只能做一份工作？例如，

```
task = new SubAsyncTask(...); // assume the parameter is correct.
task.execute(...) //
task.execute(...)// calling once again, it throws exeception. 
```

但是 a`Handler`可以连续执行多个任务：

```
hd = new Handler(...); // assume the parameter is correct
hd.sendMessage(...); //
hd.sendMessage(...);// no exeception is thrown. 
```

对象是否`AasyncTask`仅用于一次性工作？如果我不想为类似任务创建多个对象，我应该选择`Handler`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T04:22:37.370

Handler 和 AsyncTasks 是使用 UI/Event Thread 实现多线程的方法。

处理程序允许将消息添加到创建它的线程，它还使您能够安排一些可运行的在将来的某个时间执行。

异步任务使您能够实现多线程，而无需将手弄脏线程。Async Task 提供了一些需要定义的方法才能使您的代码正常工作。在 onPreExecute 你可以定义代码，这些代码需要在后台处理开始之前执行。doInBackground有代码需要在后台执行，在doInBackground中我们可以通过publishProgress()方法将结果多次发送到事件线程，通知后台处理完成我们可以简单的返回结果。onProgressUpdate() 方法从doInBackground 方法接收进度更新，通过publishProgress 方法发布，该方法可以使用该进度更新更新事件线程，onPostExecute() 方法处理doInBackground 方法返回的结果。

因此，您不需要多次调用 AsyncTask 上的 execute 方法，而是可以调用 publishProgress。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:05:01.800

因为这就是类的设计方式。这个想法是：用 UI 做一些事情（显示进度对话框等），在后台线程上工作并返回结果，更新 UI。根本不同：`Handler`它允许您发布消息，但不会为您创建后台线程。如果您不喜欢它`AsyncTask`的工作方式，请使用线程/执行程序和处理程序构建类似的东西。

# javascript - Facebook FB.login 适用于 Safari，但不适用于移动版 Safari

> ID：10407544
> 
> 赞同：11
> 
> 时间：2012-05-02T04:03:25.373
> 
> 标签：javascript, facebook, mobile-safari, facebook-javascript-sdk

以下 FB.Login 函数在桌面 Chrome、FF 和 Safari 中运行良好。但在移动 Safari（在 iPhone 4S 上测试）中，它挂起并且不返回 FB.login 回调。当我使用 Safari 并将用户代理设置为“Safari iOS 4.3.3 - iPhone”时，我也可以在控制台中看到这一点。

是因为移动 Safari 会阻止弹出窗口吗？（FB.login 触发弹出对话框）。

我该如何解决？谢谢。

```
function Login(returnLink) {
        FB.login(function(response) {
                    if(response.status === 'connected') {
                        console.log('User is now FB logged in.');
                        // now log them into my site
                        encodedReturnLink = encodeURIComponent(returnLink);
                        window.location = location.protocol + '//' + location.host + "/login?returnUrl=" + encodedReturnLink;
                    }
                    else {
                        console.log('User did not fully authorize after clicking FB login button.');
                    }
                },
                {scope : 'email, publish_actions, publish_stream'}
        );
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-24T03:23:10.720

我试图`FB.Login`在内部页面加载时自动运行`window.fbAsyncInit`，但它在 iOS 上的 Safari 中不起作用。事实证明 Safari 阻止了由 FB.Login 调用触发的弹出窗口。桌面上的 Safari 和 Chrome 运行良好（允许弹出窗口）。

我发现解决此问题的唯一方法是触发 FB.Login 调用以响应用户交互（例如，点击或单击）。这对我有用：

**HTML**

```
<a href="#" id="fbLogin">Login with Facebook</a> 
```

**JavaScript (jQuery)**

```
$('#fbLogin').click(function(){
    FB.login(function(response){
        // Do something...
    });
}); 
```

在 Safari (iOS 8.0) 上测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:58:31.557

这绝对不是阻止弹出窗口的问题。虽然我已经看到直接调用登录时有效的场景，但在 ajax 回调的结果时却没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T20:44:33.737

仔细检查 Facebook 应用设置中的移动网站 URL。

# sql - 将矩阵从文件加载到 PostgreSQL 表中

> ID：10407545
> 
> 赞同：1
> 
> 时间：2012-05-02T04:03:36.707
> 
> 标签：sql, postgresql, matrix, file-io, postgresql-copy

我有一个文件 university.txt，如下所示：

```
阿拉巴马州

航空大学
阿拉巴马农工大学
阿拉巴马州立大学
康考迪亚学院-塞尔玛
福克纳大学
亨廷顿学院
杰克逊维尔州立大学
贾德森学院
迈尔斯学院
奥克伍德学院
桑福德大学
东南圣经学院
南方基督教大学
春山学院
斯蒂尔曼学院
塔拉迪加学院
北阿拉巴马大学
南阿拉巴马大学
西阿拉巴马大学

阿拉斯加州

阿拉斯加圣经学院
阿拉斯加太平洋大学
谢尔顿杰克逊学院
阿拉斯加大学-安克雷奇
阿拉斯加大学 - 费尔班克斯
阿拉斯加大学 - 东南部

亚利桑那

美洲印第安人神召会学院
亚利桑那州立大学
亚利桑那州立大学东
亚利桑那州立大学西
德弗里大学-凤凰城
安柏瑞德航空大学
大峡谷大学
中北大学
北亚利桑那大学

```

.. 等等，在这种情况下，阿拉巴马州、阿拉斯加州和亚利桑那州是地点，其他地方都是大学。我想要做的是将位置加载到一个名为的表中`Location`，将大学加载到一个名为 的表中`University`，其中表`Id`的 是`Location`表的 FK `University`，如下所示：

```
CREATE TABLE Location (
Id          SERIAL PRIMARY KEY,
Name        TEXT
);

CREATE TABLE University (
Id          SERIAL PRIMARY KEY,
Location    INTEGER REFERENCES Location (Id) NOT NULL,
Name        TEXT
); 
```

所以我想在 Postgres 中做的是这样的：

```
for (int i=0 until i = universities.size()  i++){
//each entry in the universities vector is a tuple with the first entry being the country/state
//and the second entry being a vector of the universities as String's
Vector tuple = (Vector)universities.get(i);
//insert into location table
String state = (String)tuple.get(0); 
Vector u = (Vector)tuple.get(1);
for(int j=0; until j =u.size(); j++){
//insert into university table with i as FK to location table 
```

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T00:12:49.257

这是一个**纯 SQL 解决方案**。

用于[`COPY`](http://www.postgresql.org/docs/current/interactive/sql-copy.html)将您的文件导入到一个临时表和一个带有[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)（需要**PostgreSQL 9.1**或更高版本）的 DML 语句来完成其余的工作。两个步骤都应该很快：

具有单个文本列的临时表（在会话结束时自动删除）：

```
CREATE TEMP TABLE tmp (txt text); 
```

从文件导入数据：

```
COPY tmp FROM '/path/to/file.txt' 
```

如果您从远程客户端执行此操作，请改用[psql的](http://www.postgresql.org/docs/current/interactive/app-psql.html)[meta 命令`\copy`](http://www.postgresql.org/docs/current/interactive/app-psql.html)。

我的解决方案取决于问题中显示的数据格式。即：**在一个城市之前和之后有一个空行**。我假设导入文件中有实际的空字符串。确保在第一个城市之前有一个空字符串的前导行，以避免特殊情况。

行将按*顺序*插入。我将其用于以下窗口功能而无需订购。

```
WITH x AS (
    SELECT txt
          ,row_number() OVER () AS rn
          ,lead(txt) OVER () = '' AND
            lag(txt) OVER () = '' AS city
    FROM   tmp                -- don't remove empty rows just yet
    ), y AS (
    SELECT txt, city
          ,sum(city::int) OVER w AS id
    FROM   x
    WHERE  txt <> ''          -- remove empty rows now
    WINDOW w AS (ORDER BY rn)
    ), l AS (
    INSERT INTO location (id, name)
    SELECT id, txt
    FROM   y
    WHERE  city
    ), u AS (
    INSERT INTO university u (location, name)
    SELECT id, txt
    FROM   y
    WHERE  NOT city
    )
SELECT setval('location_id_seq', max(id))
FROM   y; 
```

瞧。

*   CTE`x`基于城市前后行中的空字符串值来标记城市。

*   CTE`y`将城市 ( ) 的运行总和相加`id`，从而形成`id`对每个城市及其 unis 的完全有效。

*   CTE`l`并`u`进行插入，现在很容易。

*   final`SELECT`为附加到的序列设置下一个值`location.id`。我们没有使用它，所以我们必须将它设置为当前最大值，否则我们会遇到重复的键错误，将来插入到位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T00:49:16.933

将原始文件转换为表格是最安全的方法......然后您可以使用 COPY 上传它。

```
BEGIN { bl=0; body=0; header=""; } 
$0 == "" && body==1 && header!="" { header=""; body=0; bl=1; next; }
$0 == "" && body==0 { bl=1; next; }
$0 != "" && header=="" { header=$0; bl=0; next; }
$0 != "" && bl==1 && header!="" { body=1; print header, ",", $0 } 
```

类似 AWK 的东西会将您的文件变成一个表格，然后您可以使用直接的 psql 复制语句上传该表格：

```
COPY university_data_file_table FROM awk-mashed-file; 
```

那么您可以将该表转换为单独的表：

```
CREATE TABLE country AS SELECT DISTINCT country FROM university_data_file_table;
CREATE TABLE university AS SELECT country.id, udft.university FROM country, university_data_file_table udft WHERE udft.country = country.country; 
```

使用 psql 脚本可以轻松编写类似的内容。正如我所说，您确实必须进行初始转换。

# php - 一种按名称、html、php 列出元素的方法

> ID：10407546
> 
> 赞同：0
> 
> 时间：2012-05-02T04:03:51.420
> 
> 标签：php, mysql, html, inventory

我正在创建一个小型汽车经销商网站，在我的库存页面上，我需要能够列出我拥有的所有汽车，以及缩小范围的方法。

实现这一目标的最佳方法是什么？即使我需要做更多的工作，越简单的方法越好。

我认为每个汽车条目都必须是具有特定名称的元素，而不是使用导航按所选名称列出元素。但我不知道从哪里开始。似乎找不到任何好的教程。然而，我觉得应该有大量的解决方案来解决我的问题..

基本上每个元素都需要有标题、描述和图片。请指出我正确的方向，也许是一个数据库？我可以做一点 mysql 但没有通过初学者级别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:08:34.843

好吧，我建议你使用任何免费的购物车或任何电子商务解决方案，当你了解这些东西时，你可以进行调整。

我建议你使用“Wordpress + WP-E-Commerce”你只需要安装wordpress，你可以创建自己的主题或者可以找到一个好的主题，而wp-ecommerce也有免费版本，可以解决你的所有问题你上面说的。

如果您还有其他问题，请随时问我

# java - android - EWS 2010 中的基本身份验证错误“HTTP/1.1 401 Unauthorized”

> ID：10407547
> 
> 赞同：22
> 
> 时间：2012-05-02T04:03:51.847
> 
> 标签：java, android, basic-authentication, exchangewebservices

我参考[此链接](http://dlinsin.blogspot.com/2009/08/http-basic-authentication-with-android.html)向服务器请求。问题是有时（不总是，大约 20% - 30%，意味着有时我可以获得成功的响应），我收到 401 错误和服务器响应*基本授权挑战，但未找到*。

这是我的代码：

```
 HttpRequestInterceptor preemptiveAuth = new HttpRequestInterceptor()
{
    public void process(final HttpRequest request, final HttpContext context)
            throws HttpException, IOException
    {
        AuthState authState = (AuthState) context
                .getAttribute(ClientContext.TARGET_AUTH_STATE);
        CredentialsProvider credsProvider = (CredentialsProvider) context
                .getAttribute(ClientContext.CREDS_PROVIDER);
        HttpHost targetHost = (HttpHost) context
                .getAttribute(ExecutionContext.HTTP_TARGET_HOST);

        if (authState.getAuthScheme() == null)
        {
            AuthScope authScope = new AuthScope(targetHost.getHostName(),
                    targetHost.getPort());
            Credentials creds = credsProvider.getCredentials(authScope);
            if (creds != null)
            {
                authState.setAuthScheme(new BasicScheme());
                authState.setCredentials(creds);
            }
        }
    }
}; 
```

这是我的身份验证：

```
 HttpPost httpPost = new HttpPost(SERVER_AUTH_URL);
        httpPost.setHeader("Content-type", "text/xml; charset=utf-8");
    httpPost.setHeader("Keep-Alive", "300");
    httpPost.setHeader("Connection", "Keep-Alive");     
    StringEntity se = new StringEntity(myRequest, "UTF-8");
    httpPost.setEntity(se);
    se.setContentType("text/xml");
    se.setContentEncoding("gzip,deflate");

        //add preemptiveAuth
        client.addRequestInterceptor(preemptiveAuth, 0);
        //Set the proxy
    ProxySelectorRoutePlanner routePlanner = new ProxySelectorRoutePlanner(
            client.getConnectionManager().getSchemeRegistry(),
            ProxySelector.getDefault());
    client.setRoutePlanner(routePlanner);

    List<String> authPrefs = new ArrayList<String>();
    authPrefs.add(AuthPolicy.BASIC);
    authPrefs.add(AuthPolicy.NTLM);
    authPrefs.add(AuthPolicy.DIGEST);
    client.getParams().setParameter("http.auth.scheme-priority", authPrefs);
    CredentialsProvider credProvider = new BasicCredentialsProvider();                 
    // client.getParams().setParameter("http.auth.scheme-priority",
    // authPrefs);
    credProvider.setCredentials(AuthScope.ANY,
            new NTCredentials(getUsername(), getPassword(),
                    "", getDomain()));

    Log.d(TAG, "repair excute");
    client.setCredentialsProvider(credProvider);
    HttpResponse response = client.execute(httpPost);
    Log.d(TAG, "has excute"); 
```

从评论代码中，你可以看到我尝试了很多方法，但错误并没有消失。这里是 logcat 说：

```
 05-02 10:28:21.724: D/dalvikvm(1169): GC_FOR_MALLOC freed 11259 objects / 457352 bytes in 43ms
 05-02 10:28:22.384: D/MainActivity(1169): repair excute
 05-02 10:28:22.744: D/dalvikvm(1169): GC_FOR_MALLOC freed 11481 objects / 447264 bytes in 67ms
 05-02 10:28:22.894: D/dalvikvm(1169): GC_FOR_MALLOC freed 1078 objects / 83928 bytes in 76ms
 05-02 10:28:22.894: I/dalvikvm-heap(1169): Grow heap (frag case) to 3.833MB for 87396-byte allocation
 05-02 10:28:23.034: D/dalvikvm(1169): GC_FOR_MALLOC freed 58 objects / 3336 bytes in 143ms
 05-02 10:28:23.124: W/DefaultRequestDirector(1169): Authentication error: basic authorization challenge expected, but not found
 05-02 10:28:23.124: D/MainActivity(1169): has excute
 05-02 10:28:23.124: E/MainActivity(1169): response error: HTTP/1.1 401 Unauthorized 
```

所以，请告诉我我的问题在哪里。提前致谢。
**更新**：目标服务器是 Exchange Web Service 2010。出于某种原因，我不想使用 EWS API，我提出了自己的 xml 请求以连接到服务器（此 xml 请求正常工作）。
这是请求失败时来自服务器的响应标头：

```
Server   Microsoft-IIS/7.5
WWW-Authenticate   Negotiate
WWW-Authenticate   NTLM
X-Powered-By   ASP.NET
Date   Fri, 25 May 2012 03:47:57 GMT
Content-Length   0 
```

第一次请求成功时：

```
Cache-Control   private
Transfer-Encoding   chunked
Content-Type   text/xml; charset=utf-8
Server   Microsoft-IIS/7.5
Set-Cookie   exchangecookie=1d9d9b1d21064035ad375c8aecde2168; expires=Sat, 25-May-2013     04:00:46 GMT; path=/; HttpOnly
X-AspNet-Version   2.0.50727
X-Powered-By   ASP.NET
Date   Fri, 25 May 2012 04:00:45 GMT 
```

第二次：

```
Cache-Control   private
Transfer-Encoding   chunked
Content-Type   text/xml; charset=utf-8
Server   Microsoft-IIS/7.5
X-EwsPerformanceData   RpcC=4;RpcL=0;LdapC=0;LdapL=0;
X-AspNet-Version   2.0.50727
X-Powered-By   ASP.NET
Date   Fri, 25 May 2012 04:00:47 GMT 
```

饼干是我的问题，不是吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T15:44:50.243

上周我在 Android HTTP basic 上苦苦挣扎。我已经尝试了 3 或 4 种不同的方法，但我总是发现一些问题。现在，我设法使它工作的唯一方法是最简单的方法。

```
 UsernamePasswordCredentials credentials = new UsernamePasswordCredentials(user, pass);
 Header header = new BasicScheme().authenticate(credentials, mHttpRequest);
 mHttpRequest.addHeader(header); 
```

这对我有用 AndroidHttpClient。

编辑：

这是我的完整源代码

[https://gist.github.com/2642692](https://gist.github.com/2642692)

它基于 [http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/](http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/)

# php - SQL IN AND IN 不工作

> ID：10407549
> 
> 赞同：1
> 
> 时间：2012-05-02T04:04:05.413
> 
> 标签：php, sql, wordpress

好的，我已经在这个逻辑上持续了几个星期，但我还没有生产出任何可行的东西。

**我正在使用 Wordpress，因此在运行查询之前将其保存为字符串（其中包含 PHP）**

如果您查看[http://www.libertyguide.com/jobs](http://www.libertyguide.com/jobs)，您会看到一个过滤器。我想做的是`AND`在这三个“类别”之间使用`OR`过滤，但在两者之间使用过滤。

例如：

如果我选择`Academia,Law,Policy`, `Full-time,Part-time`, `Early-Career`，我希望得到与此过滤逻辑匹配的帖子：

帖子有`(academia OR law OR policy) AND (full-time OR part-time) AND (early-career)`。

所以本质上我想抓住与学术界、法律或政策相匹配的职位，然后用全职或兼职过滤掉，最后检查它是否有早期职业。

这是我使用上述示例运行的查询示例：

```
SELECT * FROM $wpdb->posts
LEFT JOIN $wpdb->postmeta ON($wpdb->posts.ID = $wpdb->postmeta.post_id)
LEFT JOIN $wpdb->term_relationships ON($wpdb->posts.ID = $wpdb->term_relationships.object_id)
LEFT JOIN $wpdb->term_taxonomy ON($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
LEFT JOIN $wpdb->terms ON($wpdb->terms.term_id = $wpdb->term_taxonomy.term_id)
WHERE 
    wp_term_taxonomy.term_id IN (SELECT term_id FROM wp_terms 
        WHERE slug='academia' OR slug='law' OR slug='policy') AND
    wp_term_taxonomy.term_id IN (SELECT term_id FROM wp_terms 
        WHERE slug='full-time' OR slug='part-time') AND
    wp_term_taxonomy.term_id IN (SELECT term_id FROM wp_terms 
        WHERE slug='early-career') AND... //Rest of query/irrelevant 
```

这没有产生任何结果。我也尝试过这样的查询（前 5 行被省略，因为它们与上面的示例相同）：

```
WHERE
    wp_term.slug IN ('academia','law','policy') AND
    wp_term.slug IN ('full-time','part-time') AND
    wp_term.slug IN ('early-career') AND ... //Rest of query 
```

仅当一个“类别”已选择项目时才返回结果。它不适用于跨类别。我仍然认为我的查询略有错误。我之前得到了一些解决方案（这两个都是我认为最接近我的解决方案），但它们都有漏洞。

请不要让我使用`HAVING COUNT`，因为在这种情况下，我不妨把整个东西做成一个`AND`过滤器，这不是我想要的。

任何帮助将不胜感激，如果有效，我不介意想办法弥补麻烦。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T04:19:44.763

仅使用 WHERE 子句，我们可以看到一些问题：

```
WHERE wp_term_taxonomy.term_id IN (SELECT term_id FROM wp_terms 
                                    WHERE slug='academia' OR slug='law' OR slug='policy')
  AND wp_term_taxonomy.term_id IN (SELECT term_id FROM wp_terms 
                                    WHERE slug='full-time' OR slug='part-time')
  AND wp_term_taxonomy.term_id IN (SELECT term_id FROM wp_terms 
                                    WHERE slug='early-career') 
```

在这里，我们有单列 ( `wp_term_taxonomy.term_id`)，它必须与学术、法律或政策之一的术语 ID 同时相同（可能是 3 个不同的值），并且与全职或兼职之一的术语 ID 相同（可能是 2 个不同的值，并且与之前的 3 个值中的每一个都不同）并且也与 Early-Career 的术语 ID 相同（一个值，但与之前的 5 个值不同。因此，单个术语 ID 必须一次是 3 个不同的值，它无法管理它。

您可能需要`wp_term_taxonomy`使用 3 个不同的别名多次加入该表。

```
WHERE wtt1.term_id IN (SELECT term_id FROM wp_terms 
                        WHERE slug='academia' OR slug='law' OR slug='policy')
  AND wtt2.term_id IN (SELECT term_id FROM wp_terms 
                        WHERE slug='full-time' OR slug='part-time')
  AND wtt3.term_id IN (SELECT term_id FROM wp_terms 
                        WHERE slug='early-career') 
```

我使用的 3 个别名是`wtt1`,`wtt2`和`wtt3`. 它们将列在 JOIN 条件中。

* * *

让我们看一下选择列表和 FROM 子句

```
SELECT * FROM $wpdb->posts
LEFT JOIN $wpdb->postmeta ON($wpdb->posts.ID = $wpdb->postmeta.post_id)
LEFT JOIN $wpdb->term_relationships ON($wpdb->posts.ID = $wpdb->term_relationships.object_id)
LEFT JOIN $wpdb->term_taxonomy ON($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
LEFT JOIN $wpdb->terms ON($wpdb->terms.term_id = $wpdb->term_taxonomy.term_id) 
```

现在让我们解开一些 PHP 材料，留下常规 SQL：

```
SELECT *
  FROM wp_posts                   AS p
  LEFT JOIN wp_postmeta           AS pm ON p.ID = pm.post_id
  LEFT JOIN wp_term_relationships AS tr ON p.ID = tr.object_id
  LEFT JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
  LEFT JOIN wp_terms              AS tm ON tm.term_id = tt.term_id 
```

您可能不希望这里有任何左连接；您不想看到不符合条件的帖子，但使用 LEFT JOIN 将意味着在这一部分中选择了许多帖子（尽管所有行随后都被已经讨论过的损坏的 WHERE 条件丢弃）。

一个帖子可能有多个术语关系条目。我们想要一个至少包含三个任期关系条目的帖子：一个用于学术界/法律/政策三人组，一个用于全职/兼职二人组，以及早期职业。

```
SELECT *
  FROM wp_posts    AS p
  JOIN wp_postmeta AS pm ON p.ID = pm.Post_ID
  JOIN (SELECT t1.Object_ID
          FROM wp_term_relationships AS tr
          JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
          JOIN wp_terms              AS tm ON tm.term_id = tt.term_id
         WHERE tm.slug IN ('academia', 'law', 'policy')
       ) AS t1 ON p.ID = t1.Object_ID
  JOIN (SELECT t1.Object_ID
          FROM wp_term_relationships AS tr
          JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
          JOIN wp_terms              AS tm ON tm.term_id = tt.term_id
         WHERE tm.slug IN ('full-time', 'part-time')
       ) AS t2 ON p.ID = t2.Object_ID
  JOIN (SELECT t1.Object_ID
          FROM wp_term_relationships AS tr
          JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
          JOIN wp_terms              AS tm ON tm.term_id = tt.term_id
         WHERE tm.slug = 'early-career')
       ) AS t3 ON p.ID = t3.Object_ID 
```

我认为这可能会奏效——但现在已经很晚了，我可能会完全脱离困境。这当然不是一个简单的查询。

* * *

假设我的基本 SQL 是正确的，您只需将表名替换为 PHP 表示法即可：

```
SELECT *
  FROM $wpdb->posts    AS p
  JOIN $wpdb->postmeta AS pm ON p.ID = pm.Post_ID
  JOIN (SELECT t1.Object_ID
          FROM $wpdb->term_relationships AS tr
          JOIN $wpdb->term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
          JOIN $wpdb->terms              AS tm ON tm.term_id = tt.term_id
         WHERE tm.slug IN ('academia', 'law', 'policy')
       ) AS t1 ON p.ID = t1.Object_ID
  JOIN (SELECT t1.Object_ID
          FROM $wpdb->term_relationships AS tr
          JOIN $wpdb->term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
          JOIN $wpdb->terms              AS tm ON tm.term_id = tt.term_id
         WHERE tm.slug IN ('full-time', 'part-time')
       ) AS t2 ON p.ID = t2.Object_ID
  JOIN (SELECT t1.Object_ID
          FROM $wpdb->term_relationships AS tr
          JOIN $wpdb->term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
          JOIN $wpdb->terms              AS tm ON tm.term_id = tt.term_id
         WHERE tm.slug = 'early-career')
       ) AS t3 ON p.ID = t3.Object_ID 
```

您没有说正在使用哪个 DBMS，但它很可能是 MySQL。如果您使用的是 Oracle，则必须将 AS 排除在表别名之外。标准 SQL 和大多数其他 SQL DBMS 都可以使用 AS 作为表别名。请注意`$wpdb->`符号的使用如何受到表别名的限制；它使代码更容易阅读（尽管它仍然不容易阅读）。

* * *

### 错误修复和问题解决

未经测试的代码通常有错误；这与任何其他未经测试的代码没有什么不同。

第一个测试步骤是单独运行 FROM 子句中的子查询。这立即表明他们不应该引用`t1.Object_ID`；`tr.Object_ID`在每种情况下都应该如此。在“早期职业”之后还有一个无关紧要的右括号。一旦我有一个可以运行（子）查询的测试数据库，这些错误就很容易被发现。

```
SELECT *
  FROM wp_posts    AS p
  JOIN wp_postmeta AS pm ON p.ID = pm.Post_ID
  JOIN (SELECT tr.Object_ID
          FROM wp_term_relationships AS tr
          JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
          JOIN wp_terms              AS tm ON tm.term_id = tt.term_id
         WHERE tm.slug IN ('academia', 'law', 'policy')
       ) AS t1 ON p.ID = t1.Object_ID
  JOIN (SELECT tr.Object_ID
          FROM wp_term_relationships AS tr
          JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
          JOIN wp_terms              AS tm ON tm.term_id = tt.term_id
         WHERE tm.slug IN ('full-time', 'part-time')
       ) AS t2 ON p.ID = t2.Object_ID
  JOIN (SELECT tr.Object_ID
          FROM wp_term_relationships AS tr
          JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
          JOIN wp_terms              AS tm ON tm.term_id = tt.term_id
         WHERE tm.slug = 'early-career'
       ) AS t3 ON p.ID = t3.Object_ID 
```

通过这些修复，查询运行并生成了数据行。您可能会合理地决定您想要结果中的三个子查询中的 slug。您将子查询更改为 return `tr.Object_ID, tm.slug`。例如，查询的这个变体：

```
SELECT p.ID, t1.slug_1, t2.slug_2, t3.slug_3, pm.meta_key
      FROM wp_posts    AS p
      JOIN wp_postmeta AS pm ON p.ID = pm.Post_ID
      JOIN (SELECT tr.Object_ID, tm.slug AS slug_1
              FROM wp_term_relationships AS tr
              JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
              JOIN wp_terms              AS tm ON tm.term_id = tt.term_id
             WHERE tm.slug IN ('academia', 'law', 'policy')
           ) AS t1 ON p.ID = t1.Object_ID
      JOIN (SELECT tr.Object_ID, tm.slug AS slug_2
              FROM wp_term_relationships AS tr
              JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
              JOIN wp_terms              AS tm ON tm.term_id = tt.term_id
             WHERE tm.slug IN ('full-time', 'part-time')
           ) AS t2 ON p.ID = t2.Object_ID
      JOIN (SELECT tr.Object_ID, tm.slug AS slug_3
              FROM wp_term_relationships AS tr
              JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
              JOIN wp_terms              AS tm ON tm.term_id = tt.term_id
             WHERE tm.slug = 'early-career'
           ) AS t3 ON p.ID = t3.Object_ID; 
```

在一些测试数据上产生了以下结果：

```
1575  policy  full-time  early-career  date_legible
1575  policy  full-time  early-career  date_timestamp
1575  policy  full-time  early-career  longitude
1575  policy  full-time  early-career  date_normal
1575  policy  full-time  early-career  url
1575  policy  full-time  early-career  _su_rich_snippet_type
1575  policy  full-time  early-career  _edit_last
1575  policy  full-time  early-career  expiration-date
1575  policy  full-time  early-career  organization
1575  policy  full-time  early-career  latitude
1575  policy  full-time  early-career  location
1575  policy  full-time  early-career  _edit_lock 
```

这表明至少有一篇文章 (ID = 1575) 具有您需要的三个特征，但这也表明您将不得不更巧妙地处理 PostMeta 数据。结果表明 PostMeta 是一个 EAV（[实体-属性-值](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)）模型。这将需要仔细处理以提取给定帖子的有用信息（例如纬度和经度）。实际上，您将需要一个（可能是外部的）连接用于您想要检查的每个单独的元属性。

例如，要收集帖子的纬度和经度（如果有），您需要编写：

```
SELECT p.ID, t1.slug_1, t2.slug_2, t3.slug_3, p1.latitude, p2.longitude
      FROM wp_posts    AS p
      LEFT JOIN
           (SELECT Post_ID, Meta_Key AS m1_key, Meta_Value AS latitude
              FROM wp_postmeta
             WHERE Meta_Key = 'latitude'
           ) AS p1 ON p.ID = p1.Post_ID
      LEFT JOIN
           (SELECT Post_ID, Meta_Key AS m2_key, Meta_Value AS longitude
              FROM wp_postmeta
             WHERE Meta_Key = 'longitude'
           ) AS p2 ON p.ID = p2.Post_ID
      JOIN (SELECT tr.Object_ID, tm.slug AS slug_1
              FROM wp_term_relationships AS tr
              JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
              JOIN wp_terms              AS tm ON tm.term_id = tt.term_id
             WHERE tm.slug IN ('academia', 'law', 'policy')
           ) AS t1 ON p.ID = t1.Object_ID
      JOIN (SELECT tr.Object_ID, tm.slug AS slug_2
              FROM wp_term_relationships AS tr
              JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
              JOIN wp_terms              AS tm ON tm.term_id = tt.term_id
             WHERE tm.slug IN ('full-time', 'part-time')
           ) AS t2 ON p.ID = t2.Object_ID
      JOIN (SELECT tr.Object_ID, tm.slug AS slug_3
              FROM wp_term_relationships AS tr
              JOIN wp_term_taxonomy      AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
              JOIN wp_terms              AS tm ON tm.term_id = tt.term_id
             WHERE tm.slug = 'early-career'
           ) AS t3 ON p.ID = t3.Object_ID; 
```

产生：

```
1575  policy  full-time  early-career  -33.8210366  151.1887557 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:19:24.440

将您的 IN 更改为 EXISTS；试试看——你会得到你的结果。

```
WHERE 
    wp_term_taxonomy.term_id exists (SELECT term_id FROM wp_terms 
        WHERE slug='academia' OR slug='law' OR slug='policy') AND
    wp_term_taxonomy.term_id exists(SELECT term_id FROM wp_terms 
        WHERE slug='full-time' OR slug='part-time') AND
    wp_term_taxonomy.term_id exists (SELECT term_id FROM wp_terms 
        WHERE slug='early-career') AND... //Rest of query/irrelevant 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T04:26:20.907

使用或：

```
wp_term_taxonomy.term_id IN (SELECT term_id FROM wp_terms 
    WHERE slug='academia' OR slug='law' OR slug='policy') 

OR wp_term_taxonomy.term_id IN (SELECT term_id FROM wp_terms 
    WHERE slug='full-time' OR slug='part-time') 

OR wp_term_taxonomy.term_id IN (SELECT term_id FROM wp_terms 
    WHERE slug='early-career') AND... //Rest of query/irrelevan 
```

分析您的查询，不应该仅仅是：

```
wp_term_taxonomy.term_id IN (SELECT term_id FROM wp_terms 
    WHERE slug='academia' OR slug='law' OR slug='policy'
       OR slug='full-time' OR slug='part-time'
       OR slug='early-career') 
```

# ios - 从 iOS 中的 Twitter 框架获取 Twitter 句柄

> ID：10407551
> 
> 赞同：4
> 
> 时间：2012-05-02T04:04:29.683
> 
> 标签：ios, twitter, frameworks, handle

我知道要在 iOS 5 中使用 twitter 框架访问已配置的 twitter 帐户，可以执行以下操作：

```
ACAccountStore *t_account = [[ACAccountStore alloc] init];
ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
[account requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
    if (granted == YES) {
    }
} 
```

但问题是我不需要完整的帐户，如果他在 Twitter 帐户上配置了任何名称，我只想要 Twitter 名称。那么，有没有一种方法可以在***不询问任何用户许可***的情况下从框架（不是完整帐户）中获取***Twitter 句柄***？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:32:34.400

未经用户授予访问这些帐户的权限，您将无法访问任何帐户。只需在新项目的应用程序委托中尝试以下操作，您就知道该应用程序没有被授予访问 twitter 帐户的权限。当然，请确保您在设备或模拟器中至少有一个 twitter 帐户，并且在您的项目和应用程序委托中导入了帐户框架。此外，您还假设用户只有一个 Twitter 帐户。最好为用户可能拥有多个帐户的情况编写代码。

```
 ACAccountStore *accountStore = [[ACAccountStore alloc] init];

    // Create an account type that ensures Twitter accounts are retrieved.
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

    for (ACAccount *account in accountsArray ) {
        NSLog(@"Account name: %@", account.username);
    }

    NSLog(@"Accounts array: %d", accountsArray.count); 
```

现在更改代码以在用户授予权限时返回您的结果：

```
 ACAccountStore *accountStore = [[ACAccountStore alloc] init];

    // Create an account type that ensures Twitter accounts are retrieved.
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {

    if(granted) {

        NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

        for (ACAccount *account in accountsArray ) {
            NSLog(@"Account name: %@", account.username);
        }

        NSLog(@"Accounts array: %d", accountsArray.count);
    }
}]; 
```

所以我想简短的回答是，苹果要求用户授予用户帐户权限是有原因的。如果未授予该访问权限，您将不会取回任何数据。*

# php - 强制用户注销会话 PHP

> ID：10407555
> 
> 赞同：7
> 
> 时间：2012-05-02T04:05:04.837
> 
> 标签：php, session, login, logout

我似乎找不到这个问题的直接答案。有没有一种方法可以强制登录的用户注销？我的登录系统本质上只是依赖于一个包含用户唯一 ID（存储在 mysql 数据库中）的会话。所以本质上只是...

```
if (isset($_SESSION['user_id'])) {
echo "You're logged in!";
} else {
echo "You need to login!";
} 
```

但是假设我想禁止这个用户，那么我可以在我的数据库中将他们的状态更改为禁止但在用户注销并尝试重新登录之前这不会做任何事情......那么，我该如何强制这个用户注销？最好不要在每次查看页面时检查他们的状态是否已切换为“禁止”，因为这似乎对我的服务器造成了不必要的压力。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T04:26:46.640

> 最好不要在每次查看页面时检查他们的状态是否已切换为“禁止”，因为这似乎对我的服务器造成了不必要的压力。

在每次页面加载时从数据库加载用户，而不是在会话中存储用户的副本，这是一个非常合理的解决方案。它还可以防止用户与数据库中的副本不同步（例如，您可以更改用户的属性或权限，而无需注销并重新登录）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T04:07:14.460

您需要在每次加载页面时检查它们，或者可能以设定的时间间隔查看 Ajax 调用以从数据库中检查它们的状态。

然后您可以使用`session_destroy();`来结束他们的会话。这将破坏他们的整个会话。

否则，您可以使用`unset($_SESSION['user_id']);`取消设置单个会话变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T06:09:24.907

试着把它放在每一页上......

```
if (isset($_SESSION['user_id'])) {

    $sql = "SELECT from tbl where status='banned' and user_id=$_SESSION['user_id'] ";
    $query = mysql_query($sql);

    if(!empty(mysql_num_rows($query))){ // found the banned user
       //redirect to logout or
       //session_destroy();
    }

} else {
echo "You need to login!";
} 
```

*如果用户仍然登录...检查他/她的状态是否被禁止...如果被禁止...然后注销*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T04:06:59.090

您可以取消设置。

```
unset($_SESSION['user_id']) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T04:22:23.930

您可以通过这种方式使用[自定义会话处理程序](http://php.net/manual/en/session.customhandler.php)，您可以完全控制会话数据在服务器上的存储位置和方式。

因此，您可以将特定用户的会话数据存储在名为`<user_id>.session`example 的文件中。然后，要注销用户，只需删除该文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T05:07:30.913

间隔中的 Ajax 调用会给服务器带来额外的负载。如果您想要实时响应您的操作（例如，当您从系统后端禁止用户时，用户将立即退出），那么您应该查看类似[`Server Push`](http://en.wikipedia.org/wiki/Push_technology#HTTP_server_push).

这个想法是在用户浏览您的网站时保持从服务器到浏览器的隧道打开，以便您也可以从服务器端与他们进行通信。如果您希望他们被禁止，请在您的页面中推送注销请求和进程（即通过取消会话强制注销）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-29T21:24:46.697

这对我有用，我使用的是 pHP 5.4 include 'connect.php'；

```
 session_start();
  if(session_destroy())
  {
     header("Location: login.php");
  } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-13T04:54:30.853

您可以使用`session_save_path()`找到 PHP 保存会话文件的路径，然后使用`unlink()`.

一旦您删除存储在服务器中的会话文件，客户端`PHPSESSID`cookie 将不再对身份验证有效，并且用户将自动退出您的应用程序。

请在使用这种方法时非常小心，如果有问题的路径是全局 /tmp 目录！除了 PHP 之外，肯定还有其他进程在那里存储临时数据。如果 PHP 为会话数据预留了自己的目录，那么它应该是相当安全的。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-05-02T07:46:28.853

在我看来，基于安全性，有几种方法可以做到这一点，最好的方法是： 注意：这真的很粗糙......我知道语法是错误的，它只是让你得到一个想法。

```
$con = mysql_connect("localhost","sampleuser","samplepass");
if (!$con)
{
$error = "Could not connect to server";
}
mysql_select_db("sampledb", $con);
$result = mysql_query("SELECT * FROM `sampletable` WHERE `username`='".$_SESSION['user_id']."'");
$userdeets = mysql_fetch_array($result);
if($_SESSION['sessionvalue'] != $userdeets['sessionvalue'])
{
session_destroy();
Header('Location: logout.php');
}
else
{
$result2 = mysql_query("UPDATE `sessionvalue` WHERE `username`='".$_SESSION['user_id']."' SET `sessionvalue` = RANDOMVALUE''");
 $sesval = mysql_fetch_array($result2);
$_SESSION['sessionvalue'] = $seshval
} 
```

现在我知道那不是代码，但本质上你需要做的是确保安全并拥有这种能力：

*   每次页面加载检查会话值与数据库中的值匹配。
*   每次页面加载时，都会根据随机生成的 DB 值设置一个新的会话值。您还需要将用户名存储在会话中。
*   如果会话 ID 不匹配，则销毁会话并重定向它们。
*   如果匹配，则创建新的会话 ID。

如果你想禁止一个用户，你可以将他们在数据库中的 sessionvalue 设置为“BANNED”之类的值。这个值也不允许他们登录。通过这种方式，您可以通过简单的 Web 表单控制用户，还可以非常轻松地生成被禁止用户列表等。我希望我有更多时间来解释它，希望对您有所帮助。

# json - jQuery 使用 JSON JAX-WS Web 服务

> ID：10407557
> 
> 赞同：0
> 
> 时间：2012-05-02T04:05:26.997
> 
> 标签：json, web-services, jquery, jax-ws

我尝试使用 jQuery 来使用 JSON JAX-WS Web 服务，将[JAX-WS RI 用于 JSON](http://weblogs.java.net/blog/kohsuke/archive/2007/04/jaxws_ri_extens.html)

我尝试按照他们的指示进行操作，但无法从 javascript 客户端调用 JAX-WS Web 服务，尽管 Web 服务已成功构建。

这是我的代码：

服务器端：

```
@BindingType(JSONBindingID.JSON_BINDING)    
@WebService 
public class Greeting
{       
    public Book get(@WebParam(name="id") int id) {
        Book b = new Book();
        b.id = id;
        return b;
    }

    public static final class Book {
        public int id = 1;
        public String title = "Java";
    }

} 
```

客户端：

```
<header>
<script src="http://localhost:8080/webservice/soap/greeting?js"> </script>
    $(document).ready(function()  {
        $("#btnJson1").click(function() {
             document.getElementById("jsonprompt").innerHTML="Start JSON --- ";
             GreetingService.get(
              {id:5},
              function(r) {
                  document.getElementById("jsonprompt").innerHTML="Book Title: " + r.title;
                  }
            );
    } );
</header> 
```

任何意见或建议将不胜感激。

如果有任何使用 jQuery over JSON 来使用 JAX-WS 服务的解决方案，我们也将不胜感激。

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:44:16.987

我为我的问题找到了 2 个解决方案。

第一个是在客户端的 javascript 中使用 XMLHttpRequest（这与 jQuery 并不真正相关），并像我在问题中提到的那样对 JSON 服务器进行“POST”调用。

第2个如下。

在服务器端，我使用库[JAX-WS JSON Web 服务创建了一个 JSON JAX-WS Web 服务](http://code.google.com/p/jsonwebservice/wiki/GettingStarted)

```
@SOAPBinding(style = SOAPBinding.Style.RPC)
@WebService (name="SchedulerService", targetNamespace="http://my.target.namespace.vn/json/")
public class Scheduler
{
    @WebMethod
    public Book get(@WebParam(name="id") int id) {
        Book b = new Book();
        b.id = id;
        return b;
    }
    public static final class Book {
        public int id = 1;
        public String title = "Java";
    }

} 
```

在客户端，只需使用 jQuery 库进行这样的 json 调用。

```
$(document).ready(function()  { 
    $("#btnJson").click(function() {
    alert("Start JSON --- ");
    $.post( "http://localhost:8080/webservice/json/scheduler",
            '{"get":{"id":5}}', 
              function(r) {
            alert("Book Title: " + r['return'].title);
            }, 
            "json" ) ; 
       }
    })
} 
```

# google-plus - “google +1”是否允许与推荐信息建立链接？

> ID：10407559
> 
> 赞同：1
> 
> 时间：2012-05-02T04:05:51.437
> 
> 标签：google-plus, social-networking, google-plus-one

Facebook 为网站访问者提供了一种简单的方法来共享指向喜欢页面的链接。除此之外，它还允许跟踪推荐。

“Google +1”有类似的功能吗？我在文档（https://developers.google.com/+/plugins/+1button/）中找不到此信息，但它应该是可行的......

我的最终目标是：

1.  为网站访问者提供指向“喜欢”页面的链接的简便方法
2.  这些链接应该允许识别“链接推荐”（这样会被跟踪，并且会刺激用户分享 URL）。

有没有办法用 Google+ 做到这一点？

看起来我可以通过生成自定义 href 字段来做到这一点，但是每个访问者都会有自己的 url，我将无法显示特定页面的“+1”链接数量的高分。

除了使用自定义href字段还有其他方法吗？

欢迎任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:32:07.097

最简洁的答案是不。除了使用 href 属性之外，没有其他方法可以将用户特定的跟踪代码插入到由 Google+ 插件创建的共享中。

但是，您可以使用[网站管理员工具](http://www.google.com/webmasters/tools/)和[Google Analytics（分析）社交互动功能](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSocial)来查看 Google+ 插件对您的内容的影响。

# python - python django - 即使在安装编译版本 psycopg2-2.4.5.win32-py2.7.‌exe 后也没有模块 psycopg2.extension

> ID：10407564
> 
> 赞同：10
> 
> 时间：2012-05-02T04:06:06.813
> 
> 标签：python, django, heroku, psycopg2

我在 Windows 上使用 python django，并尝试部署到 heroku。当我尝试使用 pip 安装 psycopg2 时，

```
 pip install psycopg2 
```

我得到错误：
找不到vcvarsall.bat
然后我发现我需要安装visual studio 2008（或者）我可以直接下载并安装编译版本，所以从这个链接下载：
[http ://www.lfd.uci.edu /~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)
我下载的文件名：psycopg2-2.4.5.win32-py2.7.‌exe
即使在安装后我收到错误：没有名为 psycopg2.extensions 的模块

## 那么，我还应该做什么呢？

```
 D:\mycode\python\mysite>heroku run python manage.py syncdb
            Running python manage.py syncdb attached to terminal... up, run.1
            Traceback (most recent call last):
              File "manage.py", line 10, in <module>
                execute_from_command_line(sys.argv)
              File "/app/.heroku/venv/lib/python2.7/site-                                packages/django/core/management/__i
            nit__.py", line 443, in execute_from_command_line
                utility.execute()
              File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__i
            nit__.py", line 382, in execute
                self.fetch_command(subcommand).run_from_argv(self.argv)
              File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__i
            nit__.py", line 261, in fetch_command
                klass = load_command_class(app_name, subcommand)
              File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__i
            nit__.py", line 69, in load_command_class
                module = import_module('%s.management.commands.%s' % (app_name, name))
              File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/importlib.py"
            , line 35, in import_module
                __import__(name)
              File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 8, in <module>
                from django.core.management.sql import custom_sql_for_model,                 emit_post_sync_
            signal
                              File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/sql
            .py", line 6, in <module>
                from django.db import models
              File "/app/.heroku/venv/lib/python2.7/site-                packages/django/db/__init__.py", line 40, in <module>
                backend = load_backend(connection.settings_dict['ENGINE'])
              File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
                return getattr(connections[DEFAULT_DB_ALIAS], item)
              File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/utils.py", line92, in __getitem__
backend = load_backend(db['ENGINE'])
              File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/utils.py", line24, in load_backend
                return import_module('.base', backend_name)
              File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/importlib.py"
            , line 35, in import_module
                __import__(name)
              File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 13, in <module>
                from django.db.backends.postgresql_psycopg2.creation import DatabaseCreation

              File "/app/.heroku/venv/lib/python2.7/site-                                packages/django/db/backends/postgre
            sql_psycopg2/creation.py", line 1, in <module>
                import psycopg2.extensions
            ImportError: No module named psycopg2.extensions

            D:\mycode\python\mysite> 
```

* * *

虽然通过 pip 和 easy_install 安装 psycopg2，但 installdidnt 工作，因为我收到此错误：无法找到带有一些 msg 的 vcvarsall.bat：没有预先包含与“doc\src_build”匹配的目录

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-10T05:11:41.573

尽管互联网上有一些说法，但 psycopg2 确实在 VirtualEnv 中工作。

下载正确版本的[win-psycopg2](http://www.stickpeople.com/projects/python/win-psycopg/)。通常我使用 32 位 Python 2.7，所以我得到了 psycopg2-2.4.5.win32-py2.7-pg9.1.3-release.exe。

您不能将此文件安装到 VirtualEnv，但您可以将 .exe 文件重命名为 .zip 并使用 7-Zip 之类的实用程序打开。您将获得一个名为“psycopg2”的文件夹和一个名为“psycopg2-2.4.5-py2.7.egg-info”的文件。将这些复制到：

[...]\Envs\MyVirtualEnv\Lib\site-packages

这对我有用，希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:36:20.480

此链接中的二进制文件：http: [//www.stickpeople.com/projects/python/win-psycopg/](http://www.stickpeople.com/projects/python/win-psycopg/)

在 settings.py 中，它在 db 设置中应该看起来像这样

```
 'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T22:44:42.853

看看[http://slacy.com/blog/2010/09/python-unable-to-find-vcvarsall-bat/](http://slacy.com/blog/2010/09/python-unable-to-find-vcvarsall-bat/)。看来您需要安装 Microsoft Visual Studio Express 才能解决 vcvarsall.bat 问题。好疯狂……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-08T11:54:23.610

*您不能将此文件安装到 VirtualEnv，但您可以将 .exe 文件重命名为 .zip 并使用 7-Zip 之类的实用程序打开。您将获得一个名为“psycopg2”的文件夹和一个名为“psycopg2-2.4.5-py2.7.egg-info”的文件。将这些复制到：[...]\Envs\MyVirtualEnv\Lib\site-packages*

是的，这个作品！

# objective-c - 自定义 GUI 模板脚本创建者

> ID：10407567
> 
> 赞同：0
> 
> 时间：2012-05-02T04:06:28.653
> 
> 标签：objective-c, templates, user-interface, plist

我的应用程序当前读取一个脚本，其中包含有关应用程序下一步应该做什么的说明。这样想 ---> 我的应用程序就像一个管弦乐队，当它传递乐谱（脚本）时，它知道要做什么。该表定义了管弦乐队的不同部分在不同时间做什么。

目前，手工编写脚本很乏味。我希望能够定义块，我可以将其从我的 gui 拖放到脚本中。我想知道是否已经有工具可以让你做这样的事情，或者我是否应该编写自己的工具。

基本上，当我单击 gui 中的某些内容时，它应该在我的 plist 中插入一个模板，我可以对其进行调整。

编辑：看起来创建“属性列表结构定义”的能力是我所追求的。我曾尝试搜索苹果网站，但找不到任何文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:52:06.420

想到两件事：

1.  除了让您“拖动块”之外，您没有提及输入的格式，也没有提及您希望 GUI 工具做什么。但是**，如果您可以将格式定义为 XML 模式，那么您可以使用任意数量的 XML 创作工具**，这些工具可以根据模式自定义其界面。还使您能够轻松地让 UI 输入您的脚本语言可能具有的参数/自定义。最后的奖励：您也许可以使用简单的 XSLT 文件将脚本直接转换为 plist。

2.  查看[Briefs](http://giveabrief.com/)，这是一个适用于具有类似架构的 iOS 应用程序的原型应用程序。

# java - request.getParameter("String") 总是返回 null。为什么？

> ID：10407571
> 
> 赞同：0
> 
> 时间：2012-05-02T04:07:06.033
> 
> 标签：java, html, jsp, servlets

```
// jsp snippet
<button name="TesterButton" value="TesterButton" onClick="location.href='TesterServlet';"> 
```

*类 TesterServlet 的 Servlet Snippet*

```
writer.println( (String)request.getParameter("TesterButton") ); // always returns null 
```

上面的 servlet 总是返回 null。为什么它返回 null ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T04:16:38.543

它完全按照您告诉代码的方式工作：将窗口位置更改为给定的 URL。所以，没有惊喜。

你*真正*想要的应该编码如下：

```
<form action="TesterServlet">
    <input type="submit" name="TesterButton" value="TesterButton" />
</form> 
```

或者如果你出于某种原因真的坚持使用 JS：

```
<button name="TesterButton" value="TesterButton" onclick="location.href='TesterServlet?TesterButton=TesterButton';"> 
```

请注意，使用`onClick`而不是`onclick`表示您可能正在阅读过时或糟糕的 HTML 资源/示例。

### 也可以看看：

*   [HTMLdog - HTML 初学者教程](http://htmldog.com/guides/htmlbeginner/)
*   [W3 HTML 表单规范](http://www.w3.org/TR/html401/interact/forms.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T04:08:23.737

即使在表单内，按钮也不会在请求中发送。

更新：

如果要发送单击按钮的值（有点奇怪），则需要使用隐藏元素并在调用 servlet 之前设置值：

```
<form id="myForm" method="post">
    <input type="hidden" id="hidButtonValue" />
    <button id="TesterButton" value="TesterButton" onclick="document.getElementById('hidButtonValue').value=this.value; location.href='TesterServlet';"
</form> 
```

现在你可以在你的 servlet 中调用 hidden

```
writer.println( (String)request.getParameter("hidButtonValue") ); 
```

此外，最好将`onclick`代码封装在 JavaScript 函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T04:21:11.960

一种快速简便的方法是使用带有隐藏字段的表单：

```
<form action="TesterServlet">
    <input type="hidden" name="testField" id="test" value="SomeValue" />
    <input type="submit" value="Submit" />
</form> 
```

然后在您的 servlet 中：

```
writer.println( (String)request.getParameter("testField") ); // Should return "SomeValue" 
```

# javascript - 您如何使用 JavaScript 计算特定时区中的特定时间是否受到夏令时的影响？

> ID：10407575
> 
> 赞同：0
> 
> 时间：2012-05-02T04:07:37.027
> 
> 标签：javascript, timezone, dst

我知道这`new Date().getTimezoneOffset()`说明了本地用户的时区和 DST，但是如何计算未来任意时间的当前本地时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T05:05:33.240

JavaScript 没有内置于语言中的时区数据库（通过阅读[规范](http://es5.github.com/)可以看出）。相反，它只有“本地时间”和“UTC 时间”的概念，只有一个本地时区。

可能有用于获取时区数据库的浏览器 API，但我从未听说过。有一些第三方项目与此类数据库交互；快速搜索出现[timezone-js](https://github.com/mde/timezone-js)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:08:41.527

我怀疑是否有任何算法可以为您提供所需的东西。世界各国经常选择不遵循标准时区规则。更糟糕的是，夏令时的转换日期不同。

我可以考虑检查 3 个来源：

Jeppesen 是波音的子公司，是全球航空导航信息的主要民用供应商。我刚刚查看了旧的 Jeppesen 手册，当我 13 年前退休时，我不再获得每周更新。它提供了世界上所有主要机场的时区以及其 DST 更改的日期。去[这里](http://ww1.jeppesen.com)获取联系信息。我怀疑现在它可以通过电子方式方便地获得，但 Jeppesen 并没有免费赠送任何东西。

国际民航组织、国际民用航空组织（我认为现在是联合国的一部分）我认为会保留这些信息，但我对 DST 数据不太确定。我相信，他们的数据可以免费获得，也可以象征性收费。

国际航空运输协会 IATA 也可能会维护这些数据。

我认为最后两个组织可能会积极响应一个包含该数据的 URL 的简单请求，如果他们知道的话。

此外，如果可以找到任何从事国际航班的航空公司调度员，他们就必须提供该信息。

此外，如果您在 Google 上搜索“航空公司时区和夏令时数据” ，请检查[此内容和其他内容。](http://openflights.org/data.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T04:09:39.480

最简单的部分是考虑时区。您只需从日期中减去 timezone*60*60 秒，然后将新的 timezone*60*60 添加到日期即可找到默认 (+0) 时区。

然后，只需使用您想要的时间：

```
d = new Date(year, month, day, hours, minutes, seconds, milliseconds) 
```

# git - 如何配置 IntelliJ 11.0 以使 Git 提交不会替换整个文件内容？

> ID：10407576
> 
> 赞同：2
> 
> 时间：2012-05-02T04:08:23.497
> 
> 标签：git, intellij-idea

我正在使用 IntelliJ 11.0，但我的 Git 提交有问题。我正在将我的提交推送到 Github，但是当我检查 Github 的提交日志时，它表明我正在从文件中删除**所有内容**，然后重新添加每一行。自然，这使得查看差异变得非常困难。有没有办法让我配置 IntelliJ 或 Git，使其不这样做，并向我显示正确的差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T06:27:34.253

如果这确实是行尾的问题 - 您可以在`Settings -> Version Control -> Git`. 如果您在 IntelliJ 上设置设置，`Do not convert`则不会弄乱它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:33:18.293

通常的建议是在 Windows 上的全局 .gitconfig 中将 core.autocrlf 设置为 true。这将为您提供工作目录中的 CRLF 行结尾和存储库中的 LF 行结尾。当文件被检出到工作目录并且被提交回存储库时，就会发生转换。

我不知道的一件事是 IntelliJ 是否真的尊重该设置，但如果没有，我会非常非常惊讶。（当然，据我了解，Eclipse 有一些麻烦，所以也许我不应该感到惊讶......）

# iphone - 如何在 imageview 中显示从数据库中获取的 BLOB 图像？

> ID：10407578
> 
> 赞同：2
> 
> 时间：2012-05-02T04:08:43.060
> 
> 标签：iphone, objective-c, xcode, blob

我将图像作为 BLOB 存储在数据库中，并使用以下编码获取它

```
const char*dbPath=[databasePath UTF8String];
if (sqlite3_open(dbPath, &sqliteHandler)==SQLITE_OK) {
    sqlite3_stmt *stmt;
    NSString *selctQuery=[NSString stringWithFormat:@"select * from imagetable where imageId=11"];
    NSLog(@"selectQuery is %@",selctQuery);
    const char *dispStmt=[selctQuery UTF8String];       
    sqlite3_prepare_v2(sqliteHandler, dispStmt, -1, &stmt, NULL);
    NSLog(@"%d",sqlite3_prepare_v2(sqliteHandler, dispStmt, -1, &stmt, NULL));

    while (sqlite3_step(stmt)==SQLITE_ROW) {
        //  NSString *pwd=[[NSString alloc]initWithUTF8String:(const char *)sqlite3_column_text(sqltmt, 1)];
    //  NSString *image1=[[NSString alloc]initWithUTF8String:(const char *)sqlite3_column_text(stmt, 1)];
    //  NSString *image2=[[NSString alloc]initWithUTF8String:(const char *)sqlite3_column_text(stmt, 2)];
    //  NSString *image3=[[NSString alloc]initWithUTF8String:(const char *)sqlite3_column_text(stmt, 3)];
        //NSLog(@"%@",image1);
        NSData *cachedImage1 = [[NSData alloc] initWithBytes:sqlite3_column_blob(stmt, 1) length: sqlite3_column_bytes(stmt, 1)];           
        NSData *cachedImage2 = [[NSData alloc] initWithBytes:sqlite3_column_blob(stmt, 2) length: sqlite3_column_bytes(stmt, 2)];           
        NSData *cachedImage3 = [[NSData alloc] initWithBytes:sqlite3_column_blob(stmt, 3) length: sqlite3_column_bytes(stmt, 3)];           

        thumbImage = [UIImage imageWithData:cachedImage1];
        bgImage = [UIImage imageWithData:cachedImage2];
        logoImage = [UIImage imageWithData:cachedImage3];
        [cachedImage1 release];
        [cachedImage2 release];
        [cachedImage3 release];

    }
} 
```

我尝试使用以下代码显示...

```
bCardFront.image=[UIImage imageNamed:bgImage] 
```

但它会显示警告信息

> 不兼容的Objective-C类型'struct UIImage *'，当从不同的Objective-C类型传递'imageNamed：'的参数1时预期'struct NSString *'

谁能告诉我如何在单独的图像视图中显示这些图像。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:16:40.120

[UIImage imagedNamed:xxx] 将从您的应用程序包中获取图像，xxx 是图像名称的字符串。尝试这个：

```
[bCardFront setImage:bgImage]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:19:22.630

`bCardFront.image=[UIImage imageNamed:bgImage]`替换为

`bCardFront.image=bgImage` 这里 bgImage 不是图像名称它是 UIImage 的对象

# php - 资产有时在开发服务器上加载缓慢

> ID：10407580
> 
> 赞同：2
> 
> 时间：2012-05-02T04:09:10.627
> 
> 标签：php, macos, apache, mamp

我在笔记本电脑上安装了 MAMP 以在本地开发站点。网站上的一两个资产时不时地需要大约 7 秒才能加载（见下文）。更具体地说，它处于“等待”状态约 7 秒。如下所示，它是什么文件类型（css、javascript、图像）并不重要。这不会发生在生产服务器上，但在我的 Mac 上访问该站点时，每隔一个页面加载就会发生这种情况。我猜它可能是 apache 设置，但我不确定是什么。任何想法这可能是什么？

![资产 1](../Images/593c7c32fdfe6c4a1a18843f661891ff.png) ![资产 2](../Images/f14eb9e1286634a4562bb5df92c84444.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:54:05.507

我终于弄清楚了我发生了什么以及如何解决它。我没有遇到与大多数 OSX/Apache 人相同的问题（他们的整个 some-website.local 加载缓慢）。对我来说，这是一个 Apache 配置设置。

Chrome 与服务器建立了六个同时连接（我认为），以便快速加载页面。我相信 FireFox 大概是 15？无论如何，Apache 的 ServerLimit 指令的 MAMP 设置显然只有 5，这是相当低的。我的每 6 个连接都会挂断，显然超时时间约为 6-7 秒。我所做的只是从默认设置中增加以下指令：

```
ServerLimit 20
MaxClients 20 
```

这些数字显然应该根据您的需要进行调整，但 20 对我来说似乎很好。希望对遇到此问题的其他人有所帮助...

# javascript - ng-repeat 不适用于 json 数组

> ID：10407581
> 
> 赞同：0
> 
> 时间：2012-05-02T04:09:17.033
> 
> 标签：javascript, javascript-framework, angularjs

我有这个 json 数组

[ { 公司：{ id：“19”，features_id：空，特征：“a:6:{i:1;s:1:“1”;i:2;s:1:“2”;i:3 ;s:1:"3";i:4;s:1:"0";i:5;s:1:"0";i:6;s:1:"6";}" }，用户: [ ] }, -{ 公司: { id: "20", features_id: null, features: "a:6:{i:1;s:1:"1";i:2;s:1:"2 ";i:3;s:1:"3";i:4;s:1:"4";i:5;s:1:"5";i:6;s:1:"6"; }" }，用户：[ { id：“1”，group_id：“1”，类型：null }] }]

由于某种原因，我无法将数据放入我的 div。任何帮助将不胜感激。这是jsfidler

[http://jsfiddle.net/4Y9L3/](http://jsfiddle.net/4Y9L3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:19:24.097

该 JSON 无效。此外，您的模板不会输出任何可见的内容，除非您在转发器中放置一些绑定标签，例如 {{Company.Company.id}}。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:43:56.150

您正在使用`$.ajax()`，因此 Angular 对此一无所知。

`$http`像这样使用[http://jsfiddle.net/4Y9L3/5/](http://jsfiddle.net/4Y9L3/5/)。

# wpf - WPF DataGrid RowHeader MouseEnter MouseEventHandler

> ID：10407587
> 
> 赞同：0
> 
> 时间：2012-05-02T04:10:17.567
> 
> 标签：wpf, datagrid, mouseover, datagridrowheader

我有数据网格，它已加载事件我想为鼠标输入和鼠标离开创建事件处理程序。

我能够为 Datagrid Column 标题做到这一点，但我不知道如何为 Row 做到这一点。

这是代码：

```
 for (int i = 0; i < grid.Columns.Count; i++)
        {
            DataGridColumnHeader columnHeader = DataGridHelper.GetColumnHeader(this, i);
            if (columnHeader != null)
            {
                columnHeader.MouseEnter += new MouseEventHandler(ColumnHeader_MouseEnter);
                columnHeader.MouseLeave += new MouseEventHandler(ColumnHeader_MouseLeave);
            }
        } 
```

请帮助我。谢谢迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:16:11.767

我会使用样式

```
<Style TargetType="{x:Type DataGridRowHeader}">
  <EventSetter Event="MouseEnter" Handler="MyMouseEnterHandler"/>
  <EventSetter Event="MouseLeave" Handler="MyMouseLeaveHandler"/>
</Style> 
```

您应该能够对列标题执行相同的操作并摆脱背后的代码。

# php - 从 cURL 请求正确格式化 HTML

> ID：10407589
> 
> 赞同：1
> 
> 时间：2012-05-02T04:10:46.980
> 
> 标签：php, html, curl

我正在开发一个小程序，它允许用户输入新闻文章或其他网页（日文）的 URL，并在我的页面的 iFrame 中查看该页面的内容。这个想法是，一旦将内容加载到页面中，用户可以使用光标突出显示单词，光标将选定的文本存储在一个数组中（用于翻译/添加到个人术语词典），并将文本包围在一个红色框中(div) 根据我的域上定义的样式表。为此，我使用 cURL 检索外部页面的 HTML 并将其转储到 iFrame 的源中。

但是，我一直遇到检索到的 HTML 的主要格式问题。最大的问题是保留样式表，为了解决这个问题，我使用 DOMDocument 将标签添加到检索到的 HTML 部分。这适用于*某些*页面/URL，但对于许多其他页面/URL，输出 HTML 仍然存在许多样式问题。例如，div 层相互碰撞，对齐关闭，背景丢失。这会带来一些问题，因为我需要将输出 HTML 嵌入到新的 HTML 中，以便使用于在嵌入内容中传递文本选择的 onClick javascript 函数工作，这意味着生成的源代码最终看起来像这样：

```
<div onclick="parent.selectionFunction()" id ="studyContentn">

<!-- HTML of output from cURL, including doctype declarations and <html>,<head> tags -->

</div> 
```

在大多数情况下，我一直遇到的许多格式问题似乎在很大程度上是任意的。我尝试过使用 php Tidy 来清理 HTML 的输出，但这也只适用于某些页面，但对其他页面无效。我有点怀疑它可能与使用 DOMDocument 时奇怪地解析的 CDATA 声明有关，但我不确定。

有没有办法可以保证 cURL 的 HTML 输出在所有情况下都能正确且忠实地呈现？还是有更好的方法来做到这一点？我尝试了很多不同的方法来解决这个问题，每种方法都更接近解决方案，但也带来了自己的新问题。

谢谢 - 如果我能澄清任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:28:29.843

如果我理解正确，您正在尝试提取完整网页的 html 并将其显示在您的域下，在您的 html 中。这总是很棘手，很多 java 脚本会中断，相对 url 会出错，正如你提到的，样式也是如此。您可能还会更改页面显示的尺寸。这些都可以解决，但是您将与每个新站点进行艰苦的战斗，或者如果当前站点更改设计

我可能会采取不同的方法来解决这个问题。您可能想编写一个浏览器插件作为外部网站的接口。然后您的小程序可以位于功能和测试（希望）站点的顶部。然后，您可以专注于您需要为您的小程序做的事情，而不是无休止的繁琐 html 问题列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:25:38.413

我正在尝试做类似的事情。保存格式非常困难，网页中的JS脚本使事情变得复杂。我终于放弃了完全显示原始格式的想法，而是使用了一种解决方法：

1.  仅选择您感兴趣的标题、链接、列表、段落。
2.  将您自己网站的域路径添加到链接。
3.  你可以用你自己的类来包装标题、链接等项目。
4.  在您想要选择文本并存储它的情况下显示它，这是另一个主题。我所做的就是在两个层次上解析HTMl，然后很容易进行选择。请记住 IE 和 Firefox/Chrome 需要分开处理。

# php - mysql_affected_rows 不工作

> ID：10407591
> 
> 赞同：1
> 
> 时间：2012-05-02T04:11:00.090
> 
> 标签：php, mysql

我在查询上使用了 mysql_affected_rows 但它似乎返回 false 即使查询确实执行了所以我有点困惑....

这就是我所拥有的：

```
$check = mysql_query("DELETE FROM $table 
         WHERE name = '".$darray[0]."' AND 
         password = '".$darray[1]."' AND uid = '$uid' 
         AND validation = '22'") 
         or die(mysql_error());

if(mysql_affected_rows($check)>0){
    echo 1;
    exit;

} else {
 echo 'Less than one!';
 exit;
} 
```

知道为什么它说少于一个 - 即使我的查询确实删除了该行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T04:13:41.990

`mysql_affected_rows()`获取链接标识符（即连接资源），而不是结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T04:14:05.193

`mysql_affected_rows`接受连接链接，而不是查询。您可以将该参数留空，它将引用在该连接上执行的最后一个查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T04:18:06.220

**解决了：**

错误是 mysql_affected_rows() 不期望查询。

更多信息在这里： http: [//php.net/manual/es/function.mysql-affected-rows.php](http://php.net/manual/es/function.mysql-affected-rows.php)

```
$check = mysql_query("DELETE FROM $table 
         WHERE name = '".$darray[0]."' AND 
         password = '".$darray[1]."' AND uid = '$uid' 
         AND validation = '22'") 
         or die(mysql_error());

if(mysql_affected_rows() >0){
    echo 1;
    exit;

} else {
 echo 'Less than one!';
 exit;
} 
```

# java - Android：从数组中删除空值：

> ID：10407592
> 
> 赞同：1
> 
> 时间：2012-05-02T04:11:05.023
> 
> 标签：java, android, null, arraylist

如何从数组中删除任何空值。

```
public class RecipeMethodActivity extends ListActivity {

Intent myIntent;
String value;
TextView editvalue;
TextView buttonPressed;
Intent intent;
String result = null;
InputStream is = null;
StringBuilder sb=null;
String result2 = null;

final Recipe[] mRecipesArray = {    new Recipe("PortalCake", new String[]{"GlaDOS' wit","Is a lie"}),
                                    new Recipe("EarthDestruction", new String[]{"Asteroid", "Kinetic energy"})};

public class Recipe{
    public String name;
    public String[] steps;

    Recipe(String name, String[] steps){
        this.name = name;
        this.steps = steps;
    }
}

public ArrayList<String> FetchRecipesRawArray(Recipe[] recipes){
    ArrayList<String> ret = new ArrayList<String>();
    for(int i=0;i<recipes.length;i++){
        if(!recipes[i].name.equals(value)){
            recipes[i].steps = null;
            Recipe[] tmp = new Recipe[recipes.length - 1];
            //int j = 0;
            //for (int k = 0; k < recipes.length; k++) {
            //    if (j != 1) {
            //        tmp[j++] = recipes[i];
            //    }
            //}
            recipes = tmp;
        } else {
            ret.add(recipes[i].name);
        }
    }
    return ret;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);   

    value = getIntent().getStringExtra("searchValue");

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, FetchRecipesRawArray(mRecipesArray));
    setListAdapter(adapter); 

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

    try{
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost("http://10.0.2.2/index.php");
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    is = entity.getContent();
                }catch(Exception e){
                    Log.e("log_tag", "Error in http connection"+e.toString());
                }
                //convert response to string
                try{
                    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                    sb = new StringBuilder();
                    sb.append(reader.readLine() + "\n");
                    String line="0";
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();
                    result=sb.toString();
                    //Toast.makeText(getBaseContext(), result, Toast.LENGTH_LONG).show();
                }catch(Exception e){
                    Log.e("log_tag", "Error converting result "+e.toString());
                }
                //paring data
                String fd_name;
                try{
                    JSONArray jArray = new JSONArray(result);
                    JSONObject json_data=null;
                    for(int i=0;i<jArray.length();i++){
                        json_data = jArray.getJSONObject(i);
                        fd_name=json_data.getString("recipename");
                    }
                }catch(JSONException e1){
                    Toast.makeText(getBaseContext(), "No Food Found", Toast.LENGTH_LONG).show();
                }catch (ParseException e1){
                    e1.printStackTrace();
                }

}

protected void onListItemClick(ListView l, View v, int position, long id){
    Intent intent = new Intent(this, MethodActivity.class);
    intent.putExtra(MethodActivity.EXTRA_RECIPEARRAY, mRecipesArray[position].steps);
    startActivity(intent);

}
} 
```

它返回一个列表视图，单击该视图时应将您带到匹配的食谱，但如果我要求 Earth Destruction，我会得到门户蛋糕食谱方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:47:38.443

这行代码有问题

```
 intent.putExtra(MethodActivity.EXTRA_RECIPEARRAY, mRecipesArray[position].steps); 
```

而不是使用`mRecipesArray[position]`使用`ret.get(position).steps`

并`ArrayList<Recipe> ret = new ArrayList<Recipe>();`在方法外部声明，`FetchRecipesRawArray()`以便可以在`onListItemClick()`方法内部访问它。

也修改你的代码`FetchRecipesRawArray()`

```
else {
        ret.add(recipes[i]);
     } 
```

希望对你有帮助..

# mysql - 插入重复键更新

> ID：10407593
> 
> 赞同：1
> 
> 时间：2012-05-02T04:11:11.593
> 
> 标签：mysql, insert

我想在查询中使用“插入重复键更新”来插入新行（如果不存在）或更新行（如果存在）。如果我没有唯一 ID，我似乎无法弄清楚如何使用它（因为尚未创建该行，并且该 ID 将在插入时自动递增）

```
insert into foodchoices (unique,notunique) values (Idonthavethis,'test')
on duplicate key update notunique = 'stuff'; 
```

现在，在上面的这个例子中，它说“Idonthavethis”，我没有这个字段的任何唯一值，因为它还没有作为一行插入。但是，我确实希望这会以某种方式插入，我只是不知道如何。我希望它会像这样：

```
insert into foodchoices (notunique) values ('test') 
```

但是，如果它是一个已经存在的字段，我将拥有那个独特的价值。当我没有唯一值时，是否有某种形式的通配符或我可以使用的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:00:29.190

我相信这个问题的答案在[MySQL docs](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)中得到了解决：

如果表包含一`AUTO_INCREMENT`列并且`INSERT`...`UPDATE`插入一行，则该`LAST_INSERT_ID()`函数返回该`AUTO_INCREMENT`值。如果语句改为更新一行，`LAST_INSERT_ID()`则没有意义。但是，您可以使用`LAST_INSERT_ID(expr)`. 假设 id 是`AUTO_INCREMENT`列。要使`LAST_INSERT_ID()`更新有意义，请按如下方式插入行：

```
INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id), c=3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:17:12.570

我认为您可能会尝试做的是选择具有您拥有的值的行（如果存在则更新），否则插入。只是多了一句。

我只是不明白如何比较您没有的现有值（生成的 ID）。另外，如果 ID 是 DB 种子，它将如何被复制？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T04:32:05.057

可能您需要更改表结构以向“非唯一”列添加任何约束。这样你就可以：

```
insert into foodchoices (notunique) values ('test') on duplicate key update columntostoreyouruniqueid = unique; 
```

如果 notunique 没有约束，那么这意味着您将设置 uniqueid。所以它必须双重查询。

# .htaccess - 需要一个 mod_rewrite .htaccess 解决方案在完成的 URL 中用 -'s 替换 %20 个空格

> ID：10407594
> 
> 赞同：1
> 
> 时间：2012-05-02T04:11:20.320
> 
> 标签：.htaccess, mod-rewrite, cgi-bin

我需要一个 .htaccess mod_rewrite 解决方案，它将采用这样的 .cgi 搜索查询：

www.mydomain.com/cgi-bin/finda/treatment.cgi?Therapy_Type=普拉提培训&City=洛杉矶&State=CA

并在浏览器的地址栏中返回匹配结果，如下所示：

*   `www.mydomain.com/therapists/Pilates-Training-Los-Angeles-CA.html`

或者更好：

*   `www.mydomain.com/therapists/pilates-training-los-angeles-ca.html`

请注意，数据库包含一个、两个或三个单词 + 空格的值......

例如：

```
Therapy_Type=Pilates Training <- includes a space

City=Los Angeles <- includes a space

State=CA <- no space 
```

我使用该工具在：[http](http://www.generateit.net/mod-rewrite/) ://www.generateit.net/mod-rewrite/生成以下 RewriteRule：

```
RewriteEngine On
RewriteRule ^([^-]*)-([^-]*)-([^-]*)\.html$ /cgi-bin/finda/therapist.cgi?Therapy_Types=$1&City=$2&State=$3 [L] 
```

这确实有效（找到搜索匹配项）并生成结果页面，但由于参数值中有空格，我们最终得到一个如下所示的 URL：

www.mydomain.com/treatments/Pilates%20Training-Los%20Angeles-CA.html

我在这个论坛和其他人花了几天时间试图找到一个解决方案来摆脱这些 %20（编码空格），所以最终返回的 URL 看起来像上面的 1) 或 2)。

我知道这里有人必须知道如何做到这一点......帮助;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:39:48.713

如果您将 %20 替换为 -，那么您如何知道治疗类型的终点和城市的起点？

```
pilates-training-los-angeles-ca 
```

将会

```
type=pilates
city=training
state=los 
```

所以我不认为你喜欢用 - 替换 %20。但是，您可以将其替换为另一个字符，例如 _：

```
pilates_training-los_angeles-ca 
```

然后，您必须将每个 _ 翻译为 PHP 脚本（或您使用的服务器端的任何语言）中的一个空格。

# html - OpenLayers 不使用 Doctype 声明

> ID：10407595
> 
> 赞同：0
> 
> 时间：2012-05-02T04:11:22.030
> 
> 标签：html, openlayers

我有从 netbean 生成的以下代码和来自这个[链接](http://docs.openlayers.org/library/introduction.html)的一些修改。该代码在删除后运行良好，而它没有。可能是什么问题？ `<!DOCTYPE html>`

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
**<!DOCTYPE html>**
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>OpenLayers Example</title>
        <script src="http://openlayers.org/api/OpenLayers.js"></script>
    </h:head>
    <body>
        <div style="width:100%; height:100%" id="map"></div>
        <script defer="defer" type="text/javascript">
            var map = new OpenLayers.Map('map');
            var wms = new OpenLayers.Layer.WMS( "OpenLayers WMS",
            "http://vmap0.tiles.osgeo.org/wms/vmap0", {layers: 'basic'} );
            var dm_wms = new OpenLayers.Layer.WMS(
            "Canadian Data",
            "http://www2.dmsolutions.ca/cgi-bin/mswms_gmap",
            {
                layers: "bathymetry,land_fn,park,drain_fn,drainage," +
                    "prov_bound,fedlimit,rail,road,popplace",
                transparent: "true",
                format: "image/png"
            },
            {isBaseLayer: false}
        );
            map.addLayers([wms, dm_wms]);
            map.zoomToMaxExtent();
        </script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:54:09.517

也许现在回答这个问题为时已晚，但它可以帮助其他人，所以我会尝试。

我仍然不知道这种行为的原因，但我找到了解决方案：您必须为**div#map分配一个“****位置：固定；** ”属性。我没有用 XML 测试它，但在 HTML 文档中它可以正常工作。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:57:22.673

无论您使用的 API 还是您使用它的方式，都依赖于浏览器中的[Quirks 模式](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)（即，浏览器故意偏离标准和规范的模式，以模拟旧的有缺陷的浏览器）。

顺便说一句，与模式无关，Firefox 会报告以下错误：

```
document.getElementsByTagName("head")[0] is undefined
Source: http://openlayers.org/api/OpenLayers.js
Line: 424 
```

此外，页面在两种模式下都显示为空。这就是你所说的“不起作用”吗？**

# ios - asihttprequest 如何用 SBJson 发布 json？

> ID：10407596
> 
> 赞同：2
> 
> 时间：2012-05-02T04:11:25.703
> 
> 标签：ios, asihttprequest, sbjson

我写了一种方法：

```
-(id)postAndParseJson:(NSMutableDictionary *)theDictionary action:(NSString *)action type:(NSString *)myType {

    NSString *newJSON = [theDictionary JSONRepresentation];
    NSLog(@"what to send: %@", newJSON);

    NSURL *url = [NSURL URLWithString:@"http://api.uat.ushi.cn/user/getProfile?user_id=3"];
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    NSLog(@"to url = %@",url);
    [request appendPostData:[newJSON dataUsingEncoding:NSUTF8StringEncoding]];

    [request startSynchronous];
    NSString *responseString = [request responseString];    

    NSMutableDictionary* responseDict = [responseString JSONValue];
    NSLog(@"responseString = %@",responseString);

    return responseDict;
} 
```

该方法很简单，只需发布​​值并解析返回值，当我运行它时，我得到控制台输出：

```
2012-05-02 12:06:29.414 Ushi.com[775:f803] what to send: {"phone":"123456","password":"123456","user_name":"tan"}
2012-05-02 12:06:29.416 Ushi.com[775:f803] to url = http://api.uat.ushi.cn/user/getProfile?user_id=3
2012-05-02 12:06:29.449 Ushi.com[775:f803] -JSONValue failed. Error is: Illegal start of token [<]
2012-05-02 12:06:29.449 Ushi.com[775:f803] responseString = <html><head><title>Apache Tomcat/6.0.20 - Error report</title><style><!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status 405 - Request method 'POST' not supported</h1><HR size="1" noshade="noshade"><p><b>type</b> Status report</p><p><b>message</b> <u>Request method 'POST' not supported</u></p><p><b>description</b> <u>The specified HTTP method is not allowed for the requested resource (Request method 'POST' not supported).</u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/6.0.20</h3></body></html>
(lldb) 
```

它崩溃了！但如果我评论该行`[request appendPostData:[newJSON dataUsingEncoding:NSUTF8StringEncoding]];`，我将收到数据，但它也会崩溃。先感谢您...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:14:22.080

那是因为您从服务器获得的不是有效的 JSON，而是纯 html。

问题是您的服务器不支持**POST**，因此它返回错误页面。

# jquery - 如何将拆分按钮列表视图上的 jquery mobile 自定义为 3 个锚点？

> ID：10407597
> 
> 赞同：6
> 
> 时间：2012-05-02T04:11:28.987
> 
> 标签：jquery, html, css, jquery-mobile

我想将 listview 拆分按钮上的 jquery mobile 自定义为列表的 3 个链接。[http://jquerymobile.com/demos/1.1.0/docs/lists/lists-split.html](http://jquerymobile.com/demos/1.1.0/docs/lists/lists-split.html)

这是我想要的例子：

![在此处输入图像描述](../Images/5c436d02876610140a5c53012336cfa7.png)

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:43:51.060

我最终不得不创建一个带有网格结构的自定义列表以使其完美。它不是轻量级的代码，而是更灵活。当您支持越来越多的设备时，这一点尤其重要。看看 jquery mobile 可用的网格结构。 [http://jquerymobile.com/test/docs/content/content-grids.html](http://jquerymobile.com/test/docs/content/content-grids.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T09:29:51.933

请在下面的代码中找到将列表视图拆分按钮分成 3 个链接的代码。

```
<ul data-role="listview" data-inset="true" data-split-theme="d" data-split-icon="check" >
<li>
 <a href="index.html">
  <img src="images/album-bb.jpg" />
  <h3>Test 1</h3>
 </a>

<a id="delete" data-icon="delete" class="ui-li-link-alt ui-btn ui-btn-up-c" data-transition="slideup" data-rel="dialog" href="lists-split-purchase1.html" title="Delete" data-theme="c" style="left: 939px;">
<span class="ui-btn-inner ui-btn-corner-all">
<span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span>
</span>
</a>

<a id="edit"  data-icon="minus" data-transition="slideup" data-rel="dialog" href="lists-split-purchase2.html" title="Edit " data-theme="c">
</a>
</li>
</ul> 
```

# javascript - 什么时候评估“这个”？

> ID：10407603
> 
> 赞同：1
> 
> 时间：2012-05-02T04:12:37.697
> 
> 标签：javascript, this

对于以下代码

```
a.b = function c(){
    return function e(){
        return this;
    };
};
d = a.b(); 
```

d() 的值是多少？这可能不是一个很好的例子，但我只是对“this”指的是什么感到困惑。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T04:18:37.053

看到 d 现在等于一个 FUNCTION，“this”将被评估为任何调用它的函数。它实际上还没有被评估。

在执行结束时，`d='function e() { return this; }'`, 所以你执行的时刻`d()`就是`this`评估的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T04:29:32.420

从您的代码中，d 与“this”不同。d 将是函数 e，因为您将 d 设置为返回函数的函数调用 ab() 的返回值，所以

```
d = function e(){
    return this;
} 
```

现在 的值`this`取决于您如何调用此函数 d。`this`将在调用此函数时进行评估。如果您只是 `d()` `this`将其称为全局`Window`对象。

让我们说如果我有

```
obj ={foo:1, bar:2}; 
```

我这样打电话

```
d.call( obj ) 
```

`this`将是对象 obj。call() 方法用于调用任何对象上的函数，传递的对象的行为与`this`该函数内部一样。

我知道 Javascript 这真的很令人困惑，而且很难理解它。可能这可以帮助[http://devlicio.us/blogs/sergio_pereira/archive/2009/02/09/javascript-5-ways-to-call-a-function.aspx](http://devlicio.us/blogs/sergio_pereira/archive/2009/02/09/javascript-5-ways-to-call-a-function.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T04:26:11.710

假设`d()`在您的代码段的最后一行之后立即调用`d()`将返回全局对象：`window`如果您在浏览器中。

然而，这两个都是真的：

```
d.call(a) === a;
d.call(a.b.prototype) === a.b.prototype; 
```

也就是说，`this`它由作为第一个参数传入的内容定义`call`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T11:10:38.017

`this`是对调用方法的对象的引用。 `d()`类似`window.d()`（如果没有`with`说明）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T04:22:26.210

`this`是所有函数的隐式参数。

查看[申请](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)并[致电](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)

如果您知道 python，`this`就像`self`，但没有明确编写并且始终存在

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T04:22:40.993

这通常是函数的调用者

```
$('.image').each(function(index){
    alert($(this).attr('href'));
} 
```

我认为 ab() 会返回一个

见[http://remysharp.com/2007/04/12/jquerys-this-demystified/](http://remysharp.com/2007/04/12/jquerys-this-demystified/)

# android - Android：地图：如何在当前位置不在屏幕上时发出警报

> ID：10407612
> 
> 赞同：1
> 
> 时间：2012-05-02T04:14:15.970
> 
> 标签：android, map, currentlocation

如何在 Android 应用程序中找出地图上显示的“当前位置”标记是否超出当前显示地图的范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:55:38.463

您将需要实现投影接口。它提供了从像素转换为地理点的方法，反之亦然。

[https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Projection](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Projection)

因此，通过一些基本的数学运算，您可以弄清楚这一点。

我会把剩下的留给你。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:30:40.497

您可以使用以下代码将地图动画化到该位置：

```
mapController = mapView.getController();
mgeoPoint = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
mapController.animateTo(mgeoPoint); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:02:50.447

只需使用 mapController 的 animateTo(geoPoint my_current_geo_point ) 方法

# ocaml - 我可以提取正数，Nat 到 int32，Z 到 int 吗？

> ID：10407618
> 
> 赞同：1
> 
> 时间：2012-05-02T04:14:56.020
> 
> 标签：ocaml, coq, coq-extraction

嗨，我正在编写从 Coq 到 Ocaml 的提取，我想转换类型：

```
positive --> int32
N -> int32 
```

但我想保留类型`Z`是`int`

这是我为提取这些条件所做的代码：

```
Require Import ZArith NArith.
Require Import ExtrOcamlBasic.

(* Mapping of [positive], [N], [Z] into [int32]. *)
Extract Inductive positive => int32
[ "(fun p-> let two = Int32.add Int32.one Int32.one in
    Int32.add Int32.one (Int32.mul two p))"
  "(fun p->
    let two = Int32.add Int32.one Int32.one in Int32.mul two p)" "Int32.one" ]
  "(fun f2p1 f2p f1 p -> let two = Int32.add Int32.one Int32.one in
    if p <= Int32.one then f1 () else if Int32.rem p two = Int32.zero then
    f2p (Int32.div p two) else f2p1 (Int32.div p two))".

Extract Inductive N => int32 [ "Int32.zero" "" ]
"(fun f0 fp n -> if n=Int32.zero then f0 () else fp n)".

Extract Inductive Z => int [ "0" "" "(~-)" ]
"(fun f0 fp fn z -> if z=0 then f0 () else if z>0 then fp z else fn (-z))". 
```

我无法保留它，`Z -> int`因为`Z`Coq 库 ( [BinInt.v](http://coq.inria.fr/stdlib/Coq.ZArith.BinInt.html#) )中的定义

```
Inductive Z : Set :=
  | Z0 : Z
  | Zpos : positive -> Z
  | Zneg : positive -> Z. 
```

我收到一个错误：（函数 coq_Zdouble_plus_one）

文件“BinInt.ml”，第 38 行，字符 4-5：

错误：此表达式的类型为 int，但预期的表达式为 int32 类型

```
BinInt.ml

open BinPos
open Datatypes

(** val coq_Z_rect :
    'a1 -> (int32 -> 'a1) -> (int32 -> 'a1) -> int -> 'a1 **)

let coq_Z_rect f f0 f1 z =
  (fun f0 fp fn z -> if z=0 then f0 () else if z>0 then fp z else fn (-z))
    (fun _ ->
    f)
    (fun x ->
    f0 x)
    (fun x ->
    f1 x)
    z

(** val coq_Z_rec : 'a1 -> (int32 -> 'a1) -> (int32 -> 'a1) -> int -> 'a1 **)

let coq_Z_rec f f0 f1 z =
  (fun f0 fp fn z -> if z=0 then f0 () else if z>0 then fp z else fn (-z))
    (fun _ ->
    f)
    (fun x ->
    f0 x)
    (fun x ->
    f1 x)
    z

(** val coq_Zdouble_plus_one : int -> int **)

let coq_Zdouble_plus_one x =
  (fun f0 fp fn z -> if z=0 then f0 () else if z>0 then fp z else fn (-z))
    (fun _ ->
    Int32.one)
    (fun p ->
    ((fun p-> let two = Int32.add Int32.one Int32.one in
    Int32.add Int32.one (Int32.mul two p))
    p))
    (fun p -> (~-)
    (coq_Pdouble_minus_one p))
    x 
```

如果我提取`Z -> int32`，没关系，但这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:23:15.377

你的问题是`Z`内部建立在`positive`.

```
Inductive Z : Set := Z0 : Z
                   | Zpos : positive -> Z
                   | Zneg : positive -> Z
                   . 
```

这意味着每当你得到 a 时`Z`，你真的得到 a`positive`和一些额外的信息。

如果你真的想为`Z`and使用不同的类型`positive`，你必须在`int`and之间插入转换函数`int32`。您也许可以使用提取功能来做到这一点，但我不确定如何——或者即使——这是可能的。

我看到的另一个问题是 s 上的匹配项中的代码`Z`可以使用`positive`s ，这意味着您将不断地在类型之间进行转换，并失去其中一种类型可能比另一种类型具有的任何额外精度。如果可能的话，我会为两者使用相同的类型。

# excel - 组织数据以使用 Graphshortestpath 函数 - Matlab

> ID：10407619
> 
> 赞同：0
> 
> 时间：2012-05-02T04:15:03.673
> 
> 标签：excel, matlab, shortest-path

我知道Matlab 中*Graphshortestpath 函数*背后的概念，但是我必须重新编码这部分以再次连接路径。

```
W = [44.35 45.84 41.19 23.81 59.86 68.63 29.99 24.13 47.3 30.36 500];
DG = sparse([1 2 3 4 5 6 7 8 9 10 11],[2 3 4 5 6 7 8 9 10 11 1],W);
UG = tril(DG + DG'); 
```

还有其他方法可以让我的生活更轻松吗？我有大量数据需要输入到系统中，并且我的数据是 Excel 格式。我不可能每次都重新编码。非常感谢您的帮助！谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:33:55.633

如果您仍在寻找解决方法，我有一个建议。

如果您在 Excel 中有数据，您可以将 Edge 列表导入到变量中，例如

E=importdata('edgelist.txt')

然后将权重导入另一个变量中

W=importdata("weights.txt')

其余的只是使用如下命令：

```
DG=sparse(E(:,1),E(:,2),W); 
```

希望这能解决您的问题。

# jquery - addAttr 在 jquery 中不起作用？

> ID：10407622
> 
> 赞同：27
> 
> 时间：2012-05-02T04:15:23.550
> 
> 标签：jquery

我有一个示例代码：

```
<input type="text" name="color" id="color" value="" /> 
```

和jQuery

```
$('#color').change(function(){
    $('#color').addAttr('value', 'test');
}); 
```

当我在文本框中更改值时`value=""`，萤火虫中的结果和错误`$("#color").addAttr is not a function`

如何解决？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-02T04:17:44.893

它被称为`.attr()`，不是`.addAttr()`。

您还应该将您的内部替换`$('#color')`为`$(this)`以表明您正在操作正在更改的相同输入：

```
$('#color').change(function(){
    $(this).attr('value', 'test');
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-02T04:21:50.587

你对此感到困惑`removeAttr()`，你认为它`addAttr()`存在，**那是错误的。**

你想要的功能是`.attr()`- 现在`.prop()`，我相信。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-02T04:21:00.527

你也可以这样做：

```
$('#color').change(function(){
    $(this).val('test');
}); 
```

# java - 使用 myeclipse 创建 jax-ws webservice 的步骤

> ID：10407624
> 
> 赞同：0
> 
> 时间：2012-05-02T04:15:38.087
> 
> 标签：java, android

我是 Java 网络服务的新手。谁能告诉我如何使用 myeclipse 创建 jax-ws webservice 的分步过程。如果您知道任何好的材料，请分享我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:35:24.003

您可以按照[本教程](http://docs.oracle.com/javaee/5/tutorial/doc/bnayl.html)使用 JAX-WS 创建您想要公开的功能。

生成 wsdl 后，您可以按照[这篇文章](https://stackoverflow.com/questions/7020755/how-to-convert-wsdl-to-java/7020874#7020874)了解如何调用您公开的方法，形成不同的系统。

# python - Python 累加条件逻辑

> ID：10407633
> 
> 赞同：2
> 
> 时间：2012-05-02T04:16:49.783
> 
> 标签：python, if-statement, logic

我正在为以下问题的逻辑而苦苦挣扎，我知道即使我确定了逻辑，我也可能会笨拙地实现它，所以任何建议都会很棒。

我有一个代表文件的字典：

```
the_file = {'Filename':'x:\\myfile.doc','Modified':datetime(2012,2,3),'Size':32412} 
```

我有一个过滤器列表，我想过滤文件字典以确定匹配项。

```
filters = [
    {'Key':'Filename','Criteria':'Contains','Value':'my'},
    {'Key':'Filename','Criteria':'Does not end with','Value':'-M.txt'},
    {'Key':'Modified','Criteria':'After','Value':datetime(2012,1,1)}
    ] 
```

我最好的尝试创建一个函数来做到这一点（这不起作用）：

```
def is_asset(the_file, filters):
match = False
for f in filters:
    if f['Key'] == u'Filename':
        if f['Criteria'] == u'Contains':
            if f['Value'] in the_file['Filename']:
                match = True
        elif f['Criteria'] == u'Starts with':
            if the_file['Filename'].startswith(f['Value']):
                match = True
        elif f['Criteria'] == u'Ends with':
            if the_file['Filename'].endswith(f['Value']):
                match = True
        elif not f['Criteria'] == u'Does not end with':
            if the_file['Filename'].endswith(f['Value']):
                match = False
        elif f['Criteria'] == u'Equals':
            if os.path.basename(the_file['Filename']) == f['Value']:
                match = True
        elif f['Criteria'] == u'Does not contain':
            if f['Value'] in the_file['Filename']:
                match = False
    elif f['Key'] == u'Modified':
        mtime = int(os.path.getmtime(the_file['Filename']))
        if f['Criteria'] == u'Before':
            if f['Value'] > datetime.fromtimestamp(mtime):
                the_file['Modified'] = mtime
                match = True
        elif f['Criteria'] == u'After':
            if f['Value'] < datetime.fromtimestamp(mtime):
                the_file['Modified'] = mtime
                match = True
    elif f['Key'] == u'Size':
        size = long(os.path.getsize(the_file['Filename']))
        if f['Criteria'] == u'Bigger':
            if f['Value'] < size:
                the_file['Size'] = size
                match = True
            elif f['Value'] > size:
                the_file['Size'] = size
                match = True
    if match:
        return the_file 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T04:23:56.673

与其尝试在一个宏功能中完成，不如将其分解为更小的步骤。

```
filenamecondmap = {
  u'Contains': operator.contains,
  u'Does not end with': lambda x, y: not x.endswith(y),
   ...
}

 ...

condmap = {
  u'Filename': filenamecondmap,
  u'Modified': modifiedcondmap,
   ...
} 
```

然后遍历结构直到你有条件，然后执行它。

```
condmap[u'Filename'][u'Contains'](thefile['Filename'], 'my') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T04:34:35.510

您可以简单地使用函数作为您的“标准”。这使它变得更加简单，因为您不必编写大的 if-else 阶梯。像这样的东西：

```
def contains(value, sub):
    return sub in value

def after(value, dt):
    return value > dt

filters = [
    {'Key': 'FileName', 'Criteria': contains, 'Value': 'my'},
    {'Key': 'Modified', 'Criteria': after,  'Value': datetime(2012,1,1)}
]

for f in filters:
    if f['Criteria'](filename[f['Key']], f['Value']):
       return True 
```

# javascript - 如何将 Ruby 数组传递给 Javascript 以制作折线图

> ID：10407638
> 
> 赞同：7
> 
> 时间：2012-05-02T04:17:34.970
> 
> 标签：javascript, ruby-on-rails, json, graph

我正在尝试制作一个网页以在我的 Ruby on Rails 2.3.14 应用程序中显示折线图。我找到了一个名为 JS Charts 的工具，它允许我使用 Javascript 创建漂亮的图表，但我无法向它发送所需的数据。以下是制作静态折线图的方法：

```
<script type="text/javascript">
  var myData = new Array([1, 395], [2, 244], [3, 223], [4, 210], [5, 238], [6, 223], [7, 275], [8, 31]);
  var myChart = new JSChart('chartcontainer', 'line');
  myChart.setDataArray(myData);
  myChart.draw();
</script> 
```

我将该代码放入 stats.html.erb 中，它就会显示出来。但是，我需要它来显示我提供的折线图数据。在控制器中创建了一个二维数组：

```
>> @a
=> [[1, 395], [2, 244], [3, 223], [4, 210], [5, 238], [6, 223], [7, 275], [8, 31]] 
```

我应该能够在视图中使用该变量，并`var myData`对其进行设置，例如：

```
var myData = "<%= @a %>"; 
```

我尝试了其他方法，例如：

```
var myData = JSON.parse( "<%= @a.to_json %>" ); 
```

但似乎没有任何效果。有什么我可以做的吗？

编辑：

控制器传递给视图 (@a) 的数组存在问题，该数组为空。我能够使用：

```
var myData = JSON.parse( "<%= @a.to_json %>" ); 
```

显示折线图，其中正确的数据被传递到视图中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T06:01:26.170

好像你让它工作了，但你可以清理一下：

```
<%= javascript_tag do %>
  window.myData = <%=raw @a.to_json %>;
<% end %> 
```

或者在 Rails 3 中，您可以精通 HTML5，并使用`data`帮助程序将您的数据添加为一些 html 标记的 att：

```
<%= content_tag "div", id: "myDiv", data: {stuff: @a} do %>
<!-- some html stuff...-->
<% end %> 
```

然后在javascript中（使用jQuery）：

```
var myData = $('#myDiv').data("stuff") 
```

对于超级热心的人，看看[这个 railscast](http://railscasts.com/episodes/324-passing-data-to-javascript)

# java - JPA2(JBoss7.1's Hibernate) entityManager.find() 正在从缓存而不是从数据库中获取数据

> ID：10407643
> 
> 赞同：2
> 
> 时间：2012-05-02T04:18:12.197
> 
> 标签：java, hibernate, jboss, jpa-2.0

我正在通过 JBoss7.1 使用 JSF2、JPA2、EJB3 开发一个 Web 应用程序。我有一个实体（论坛），其中包含子实体（主题）的列表。当我第一次尝试通过 forumId 获取主题列表时，数据是从数据库加载的。

```
List<Topic> topics = entityManager.find(Forum.class, 1).getTopics(); 
```

之后，我向论坛添加了更多子实体（主题），然后我再次尝试按 forumId 检索主题列表。坚果我只得到旧的缓存结果。新插入的子记录未从数据库加载。

我可以使用以下方法加载子实体（主题）：

**方法一：**在 entityManager.find() 之前调用 entityManager.clear()

**方法2：**使用

```
em.createQuery("select t from Topic t where t.forum.forumId=?1", Topic.class); 
```

或者

```
em.createQuery("SELECT t FROM Topic t JOIN t.forum f WHERE f.forumId = ?1", Topic.class); 
```

我知道在 NamedQueries 上设置 QueryHints。但是 em.find() 方法在一个超级 CrudService 中，它正在被所有 DAO（无状态 EJB）扩展。所以设置 QueryHints 对我不起作用。

所以我想知道如何使 em.find() 方法从数据库而不是缓存加载数据？

PS：我使用的是扩展持久性上下文类型。

```
@PersistenceContext(unitName="forum", type=PersistenceContextType.EXTENDED)
protected EntityManager em; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:28:47.917

`find`您可以通过设置控制实体管理器与二级缓存交互的附加属性来指定单个操作的行为。

```
Map<String, Object> props = new HashMap<String, Object>();
props.put("javax.persistence.cache.retrieveMode", CacheRetrieveMode.BYPASS);
entityMgr.find(Forum.class, 1, props).getTopics(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:57:33.617

`Forum`是否有可能和之间的关系`Topic`仅在您的实体 bean 中添加到一个方向？如果您在主题上设置了论坛 id，您还应该将此主题添加到`Forum`对象中，以便在一级缓存中具有一致的数据。您还应该确保您没有使用两个不同的实体管理器进行更新和查找。第一级缓存仅保留每个实体管理器，另一个 em 仍然可以包含旧版本的实体。

可能不相关，但是使用 JPA2，您还可以使用最小的 api 从二级缓存中驱逐实体，可以在更新后使用：

```
em.getEntityManagerFactory().getCache().evict(Forum.class, forumId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T19:28:09.213

将 @Cacheable(false) 放在 Forum.class 中。

# c# - 为什么列表框项目在过滤期间不更新？

> ID：10407647
> 
> 赞同：0
> 
> 时间：2012-05-02T04:18:40.960
> 
> 标签：c#, .net, wpf, data-binding, filter

我正在编写一个程序来查看列表框中的产品信息。我有一个用于搜索的文本框，它会在您按 ProductName 键入时自动过滤列表。我已经多次运行我的 C# 代码，我可以看到过滤器实际工作，但我无法直观地让它在屏幕上过滤或“刷新”。

C#代码：

```
private ICollectionView _ProductInfoView;
    public ICollectionView ProductInfoView 
    {
        get{return this._ProductInfoView;}
        set
        {
            this._ProductInfoView=value;
            this.onPropertyChnage("ProductInfoView");
        }
    }

 private void RibbonSetupProduct_Click(object sender, System.Windows.RoutedEventArgs e)
    {
        this.hidePanels();
        new Task(() =>
        {
            this.Dispatcher.Invoke(new Action(() =>
            {
                ObservableCollection<ModelProductInformation> productInfoCollection   = new ObservableCollection<ModelProductInformation>(from ProductInfo in new GTS_ERPEntities().ProductInformations select new ModelProductInformation { ProductID = ProductInfo.ProductID,  ProductName = ProductInfo.ProductName , Remark=ProductInfo.Remark});
                this.ProductInfoView = CollectionViewSource.GetDefaultView(productInfoCollection);
                new ProductInfoSearch(ProductInfoView, this.TestTextBox);
            }
                ), DispatcherPriority.DataBind);
        }
        ).Start(); 

        this.PanelProducts.Visibility = Visibility.Visible;
    }

  class ProductInfoSearch
   {
      public ProductInfoSearch(ICollectionView filteredList, TextBox textEdit)
      {
        string filterText = string.Empty;

        filteredList.Filter = delegate(object obj)
        {
            if (String.IsNullOrEmpty(filterText))
            {
                return true;
            }
            ModelProductInformation str = obj as ModelProductInformation;
            if (str.ProductName==null)
            {
                return true;
            }
            if (str.ProductName.ToUpper().Contains(filterText.ToUpper()))
            {
                return true;
            }
            else
            {
                return false;
            }
        };
        textEdit.TextChanged += delegate
        {
            filterText = textEdit.Text;
            filteredList.Refresh();
        };
    }
} 
```

XAML：

```
<dxe:ListBoxEdit x:Name="ProductInfoList" Margin="1.666,1,8,8" Grid.Column="2" Grid.Row="2" Grid.RowSpan="5"  DisplayMember="ProductName" DataContext="{Binding ProductInfoView, ElementName=window}" ItemsSource="{Binding}"/> 
```

我想我的问题要么是数据绑定，要么是在 Task() 内部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:29:10.287

我会将 ObservableCollection 设为私有字段，只需创建一次实例，也只需创建一次 ICollectionView。要添加新数据，您可以使用 clear 并添加到您的收藏中 - 试试吧，它对我有用。

```
 private ObservableCollection<ModelProductInformation> productInfoCollection;

 //ctor, just once in the constructor
 this.productInfoCollection =  new ObservableCollection<ModelProductInformation>();
 this.ProductInfoView = CollectionViewSource.GetDefaultView(productInfoCollection);
 new ProductInfoSearch(ProductInfoView, this.TestTextBox);

private void RibbonSetupProduct_Click(object sender, System.Windows.RoutedEventArgs e)
{
    this.hidePanels();
    new Task(() =>
    {
        this.Dispatcher.Invoke(new Action(() =>
        {
            var yourData = from ProductInfo in new GTS_ERPEntities().ProductInformations select new ModelProductInformation { ProductID = ProductInfo.ProductID,  ProductName = ProductInfo.ProductName , Remark=ProductInfo.Remark};
            //if you wanna change the collection, simple clear and add(or create AddRange extension)
           this.productInfoCollection.Clear();

           foreach(var data in yourData)
           { this.productInfoCollection.Add(data);}
        }
            ), DispatcherPriority.DataBind);
    }
    ).Start(); 

    this.PanelProducts.Visibility = Visibility.Visible;
} 
```

# asp.net - 上传excel文件并在数据集中读取的代码

> ID：10407649
> 
> 赞同：0
> 
> 时间：2012-05-02T04:18:48.120
> 
> 标签：asp.net, excel, c#-4.0

我有一个要求，我必须在服务器上上传一个 .xlsx 文件，然后使用 c#、asp.net 将该文件读入数据表。我需要把你的文件放到服务器上。我需要打开（上传的？）文件。我需要读取文件的内容，应用任何必要的数据解析。我需要在网格视图中显示结果。

帮助将不胜感激。

# matlab - matlab coding -wavelet toolbo-从其系数中找到信号的最高频率内容

> ID：10407650
> 
> 赞同：0
> 
> 时间：2012-05-02T04:18:56.903
> 
> 标签：matlab

我想从它的小波系数中找到一个信号的频率内容..我通过将信号分解为一定水平的高频和低频分量来获得系数..现在我必须找到最高频率其中的组件..我已经使用fft完成了它，但是我可以使用任何其他方法..

```
y_256=Th;
    T_fft=fft(y_256);
    T_fft1=T_fft(1:length(y_256)/2+1);
    freq1=0:8000/length(y_256):4000;

    IX = abs(T_fft1)>0.6;
    ix = find(IX);
    bmax= freq1(ix(end)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:47:46.073

韦尔奇：

```
[Pxx,f] = pwelch(x,window,noverlap,f,fs) 
```

或（无忧无虑，使用默认值）

```
[Pxx,f] = pwelch(x,[],[],[],fs) 
```

文档：

[http://www.mathworks.com/help/toolbox/signal/ref/pwelch.html](http://www.mathworks.com/help/toolbox/signal/ref/pwelch.html)

# ruby-on-rails - 谁能为 Httparty 推荐一些好的参考资料？

> ID：10407652
> 
> 赞同：0
> 
> 时间：2012-05-02T04:19:10.423
> 
> 标签：ruby-on-rails, httparty

嘿，我是 Httparty 的新手。我可以获取数据，但使用 Httparty 发布时出现问题。任何人都可以为此提出一些好的参考吗？谢谢一堆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:16:08.980

HTTParty 没有很多参考资料。主要是他们 github repo 中的[自述文件](https://github.com/jnunemaker/httparty)和[示例](https://github.com/jnunemaker/httparty/tree/master/examples)。你也可以通过他们的代码来感受一下。下面是一个使用 HTTParty mixin 的帖子的简单示例：

```
class Emailer
  include HTTParty
  base_uri 'api.emailer.com'

  def send(username, password, to, subject, body)
    options = { username: username, 
                password: password, 
                to: to, 
                subject: subject,
                body: body }
    post('/send', options)
  end
end 
```

虽然您的问题是关于 HTTParty，而我过去不得不使用它，但我通常更喜欢[Typheous](https://github.com/dbalatero/typhoeus)。你可能想看看那个。我敢肯定还有很多其他的 HTTP 客户端。这两个是我合作过的，我更喜欢 Typheous。

# android - 具有条件格式的 ListView 无法正常工作（使用 ViewBinder）

> ID：10407657
> 
> 赞同：0
> 
> 时间：2012-05-02T04:19:36.123
> 
> 标签：android, android-listview, simplecursoradapter, android-viewbinder

**辅助问题**

嗨，有人可以帮我理解的行为`SimpleCursorAdapter.ViewBinder.setViewValue`吗？

似乎对于`ListView`. 调用次数是否取决于 ListView 中的行数？或光标中的项目数`SimpleCursorAdapter`？另外，传递给函数的参数有什么意义？

## 主要问题

我在尝试创建一个简单`ListView`的`CheckedTextViews`. 我想减少检查的行的不透明度。我编写的代码有效，只是它总是会减少额外一行的不透明度。

将 layout_height 设置`ListView`为 match_parent 解决了某些情况下的问题。但是当我打开键盘进行编辑并且需要 ListView 时，问题仍然存在。

* * *

请在此处找到代码

填写项目的代码`ListActivity`：

```
private void fillDataToList() {
    Cursor all_taskCursorCursor = mDbHelper.fetchAllTask();
    startManagingCursor(all_taskCursorCursor);

    String[] from = new String[]{TaskDbAdapter.KEY_TITLE};
    int[] to = new int[]{R.id.task_title};

    SimpleCursorAdapter tasks = new SimpleCursorAdapter(this, R.layout.task_row, all_taskCursorCursor, from, to);

    tasks.setViewBinder(new ViewBinder() {

        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
            if(columnIndex == 1) {
                CheckedTextView ctv = (CheckedTextView) view;

                String text = cursor.getString(cursor.getColumnIndexOrThrow(TaskDbAdapter.KEY_TITLE));
                boolean checked = cursor.getInt(cursor.getColumnIndexOrThrow(TaskDbAdapter.KEY_COMPLETED)) == 1 ? true : false; 

                ctv.setText(text);
                ctv.setChecked(checked); 

                if (checked == true) {
                    AlphaAnimation animation = new AlphaAnimation(1, 0.25f);
                    animation.setFillAfter(true);
                    ctv.setAnimation(animation); 

                    ctv.setPaintFlags(Paint.STRIKE_THRU_TEXT_FLAG);
                }

                return true;
            }

            return false;
        }
    });

    setListAdapter(tasks);
} 
```

ListView 的布局——

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</ListView>

<TextView
    android:id="@android:id/empty"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:text="@string/no_task"
    android:padding="10dp"
    android:gravity="center_vertical|center_horizontal"
    android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

每行的布局 -

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<CheckedTextView
    android:id="@+id/task_title"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:padding="10dp"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:checkMark="?android:attr/listChoiceIndicatorMultiple" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:34:44.307

通过向 if (checked == true) 部分添加一个 else 条件解决了该问题。

最终代码如下所示 -

```
if (checked == true) {
    AlphaAnimation animation = new AlphaAnimation(1, 0.25f);
    animation.setFillAfter(true);
    ctv.setAnimation(animation); 

    ctv.setPaintFlags(ctv.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
} else {
    ctv.setPaintFlags(ctv.getPaintFlags() & (~ Paint.STRIKE_THRU_TEXT_FLAG));
} 
```

# jquery - jQuery - 定义变量的最佳实践

> ID：10407661
> 
> 赞同：0
> 
> 时间：2012-05-02T04:20:06.570
> 
> 标签：jquery

我试图通过获取元素的属性来定义一个变量。除了使用属性之外，我还想添加一些 html。

那么有没有更好的方法呢？：

```
var tip = $(this).attr('title').append('<p>Take me to:</p>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:29:55.443

像这样的东西：

```
var tip = $('<p/>', {
    title: 'Take me to ' + $(this).attr("title")
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:30:17.230

你正在做的是非常不确定的行为。`attr(name)`将该属性的值作为字符串、数字返回，无论它是什么。因此，您可以将其视为任何其他值。

```
`var tip = '<p>Take me to: '+$(this).attr('title')+'</p>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T04:31:07.533

我会保持简单，并将其保留为 jQuery 对象：

```
var $tip = $('<p>Take me to: ' + $(this).attr('title') + '</p>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T04:33:15.003

$(this).attr('title') 将返回标题，您尝试将 html 附加到该标题（这不起作用）。

```
var x = $(this).append(html).attr('title'); 
```

应该可以工作（x 将等于元素的标题）。

# sql - sql下一条输入记录

> ID：10407667
> 
> 赞同：2
> 
> 时间：2012-05-02T04:21:07.937
> 
> 标签：sql, sql-server

我有下表“用户”（为本问题的目的而简化）具有非增量 ID（不是我的设计，但我必须接受它）

```
userUUID                                email
----------------------------------------------------
44384582-11B1-4BB4-A41A-004DFF1C2C3     dabac@sdfsd.com
3C0036C2-04D8-40EE-BBFE-00A9A50A9D81    sddf@dgfg.com
20EBFAFE-47C5-4BF5-8505-013DA80FC979    sdfsd@ssdfs.com
... 
```

我们正在运行一个程序，该程序循环遍历表并向注册用户发送电子邮件。使用 try/catch 块，我在文本文件中记录失败记录的 UUID。然后程序停止并需要重新启动。

当程序重新启动时，我不想重新发送电子邮件给那些成功的，而是从失败的记录开始。我假设这意味着，我需要处理在失败记录之后创建的记录。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T04:30:28.973

为什么不在某个地方（例如另一个表，或者甚至在原始表的 BIT 列中，称为“WelcomeEmailSent”或其他东西）跟踪哪些 UUID 已经被邮寄？然后，无论您的程序在哪里死机或处于什么状态，它都可以重新启动并且始终知道它停止的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T04:25:09.297

1.  按列排序（在这种情况下我会推荐`userUUID`）
2.  做一个`where userUUID > 'your-last-uuid'`

# java - 有没有办法在调用 setSelectedItem() 时阻止动作侦听器触发？

> ID：10407676
> 
> 赞同：5
> 
> 时间：2012-05-02T04:22:26.153
> 
> 标签：java, swing, jcombobox, actionlistener, comboboxmodel

我有一个包含多个组合框的程序，每个组合框都有自己的动作侦听器。从任何组合框中选择一个项目将更改一个或多个其他组合框中的项目。我遇到的问题是，为一个组合框调用 setSelectedItem() 会触发另一个组合框的动作侦听器，而后者又会触发其他组合框的动作侦听器，等等。

有没有办法避免这种情况，要么只允许从用户输入触发动作侦听器，要么检测到动作不是从用户输入触发的？说不使用 setSelectedItem() 不是一个选项，因为我希望程序能够为每个组合框设置当前选定的项目。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:43:56.010

我不认为这是可能的。如果您在组合框上设置了 actionlistener，那么`actionPerformed()`每当组合框上生成任何事件时都会调用。它不检查事件是由用户生成还是通过程序生成。

但是你可以在你的组合框上设置**mouselistner**，所以只有当你点击你的组合框时，才会采取指定的动作。

另一种方法是为此**设置标志**以检查事件是由用户生成还是通过程序生成。

但我更喜欢在组合框上设置 mouselistener 的第一种技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:47:18.663

例如

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class ComboBoxTwo extends JFrame implements ActionListener, ItemListener {

    private static final long serialVersionUID = 1L;
    private JComboBox mainComboBox;
    private JComboBox subComboBox;
    private Hashtable<Object, Object> subItems = new Hashtable<Object, Object>();

    public ComboBoxTwo() {
        String[] items = {"Select Item", "Color", "Shape", "Fruit"};
        mainComboBox = new JComboBox(items);
        mainComboBox.addActionListener(this);
        mainComboBox.addItemListener(this);
        //prevent action events from being fired when the up/down arrow keys are used
        //mainComboBox.putClientProperty("JComboBox.isTableCellEditor", Boolean.TRUE);
        getContentPane().add(mainComboBox, BorderLayout.WEST);
        subComboBox = new JComboBox();//  Create sub combo box with multiple models
        subComboBox.setPrototypeDisplayValue("XXXXXXXXXX"); // JDK1.4
        subComboBox.addItemListener(this);
        getContentPane().add(subComboBox, BorderLayout.EAST);
        String[] subItems1 = {"Select Color", "Red", "Blue", "Green"};
        subItems.put(items[1], subItems1);
        String[] subItems2 = {"Select Shape", "Circle", "Square", "Triangle"};
        subItems.put(items[2], subItems2);
        String[] subItems3 = {"Select Fruit", "Apple", "Orange", "Banana"};
        subItems.put(items[3], subItems3);
//      mainComboBox.setSelectedIndex(1);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        String item = (String) mainComboBox.getSelectedItem();
        Object o = subItems.get(item);
        if (o == null) {
            subComboBox.setModel(new DefaultComboBoxModel());
        } else {
            subComboBox.setModel(new DefaultComboBoxModel((String[]) o));
        }
    }

    @Override
    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
            if (e.getSource() == mainComboBox) {
                if (mainComboBox.getSelectedIndex() != 0) {
                    FirstDialog firstDialog = new FirstDialog(ComboBoxTwo.this,
                            mainComboBox.getSelectedItem().toString(), "Please wait,  Searching for ..... ");
                }
            } 
        }
    }

    private class FirstDialog extends JDialog {

        private static final long serialVersionUID = 1L;

        FirstDialog(final Frame parent, String winTitle, String msgString) {
            super(parent, winTitle);
            setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
            JLabel myLabel = new JLabel(msgString);
            JButton bNext = new JButton("Stop Processes");
            add(myLabel, BorderLayout.CENTER);
            add(bNext, BorderLayout.SOUTH);
            bNext.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent evt) {
                    setVisible(false);
                }
            });
            javax.swing.Timer t = new javax.swing.Timer(1000, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    setVisible(false);
                }
            });
            t.setRepeats(false);
            t.start();
            setLocationRelativeTo(parent);
            setSize(new Dimension(400, 100));
            setVisible(true);
        }
    }

    public static void main(String[] args) {
        JFrame frame = new ComboBoxTwo();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-20T05:48:29.610

一种选择是添加 PopupMenuListener 而不是动作侦听器。它的`popupMenuWillBecomeInvisible`方法将在用户手动选择一个项目后触发，但不会在调用`setSelectedItem`、`setSelectedIndex`或之后触发。`addItem`

我发现此方法有一个限制：如果用户保持下拉菜单关闭并通过键入第一个字母来选择项目，则弹出侦听器不会触发。在下面的示例中，我通过阻止用户通过键入字母字符来选择项目来解决此问题。

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;

public class ComboBoxExample extends JFrame {

    public static void main(String[] args) {

        JFrame frame = new JFrame("JComboBox Example");

        // Create combo box
        JComboBox homeTypeComboBox = new JComboBox(new String[]{"House", "Condo", "Apartment"});

        // add the popup listener
        homeTypeComboBox.addPopupMenuListener(new HomeTypeChangeListener());

        // prevent user from selecting an item by typing its first letter
        homeTypeComboBox.setKeySelectionManager((key, model) -> { return -1; });

        JPanel panel = new JPanel();
        panel.add(homeTypeComboBox);

        frame.add(panel);
        frame.setSize(300, 150);
        frame.show();

        // These will not generate print statements
        homeTypeComboBox.setSelectedItem("House");
        homeTypeComboBox.setSelectedItem("Condo");
        homeTypeComboBox.setSelectedItem("Apartment");
    }

    private static class HomeTypeChangeListener implements PopupMenuListener {

        public void popupMenuWillBecomeVisible(PopupMenuEvent e) {}

        public void popupMenuWillBecomeInvisible(PopupMenuEvent e) {
            // triggered when user makes a dropdown selection
            System.out.println("User changed the dropdown selection. This will not be triggered for programmatic" 
                + " calls to JComboBox::setSelectedItem, JComboBox::setSelectedIndex, or JComboBox::addItem.");
        }

        public void popupMenuCanceled(PopupMenuEvent e) {}
    }

} 
```

# ios - xCode 本地化 - 将 .lproj 文件放在哪里？

> ID：10407678
> 
> 赞同：1
> 
> 时间：2012-05-02T04:22:35.673
> 
> 标签：ios, xcode, localization

我一直在寻找类似的问题，但这一定是以前问过的。无论哪种方式，请指出我正确的方向。

我第一次本地化了一个应用程序。它似乎工作正常，但我有两组 .lproj 文件。一组在设置包中，另一组在主项目目录中。

似乎某些设置受一个 .lproj 文件内容的影响，而其他设置受另一个影响。

我应该留下“足够好”吗？我应该以某种方式结合吗？如果是这样，正确的地方在哪里？

如果我发现这已经回答了，请原谅。我要么删除这个问题，要么把它指向现有的回复。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:36:56.490

在整个项目中都有 lproj 真的很好。更重要的是 - 将翻译后的文件保存在 Xcode 文件树中。您只需选择需要本地化的文件并在文件检查器中添加文件本地化，即可轻松本地化您的笔尖和任何其他文件。

# sql - 在sqlite中创建触发器的sql错误

> ID：10407684
> 
> 赞同：0
> 
> 时间：2012-05-02T04:23:27.110
> 
> 标签：sql, sqlite, triggers

我正在使用`sqlite 2.8.17`安装在`ubuntu lucid` （我使用过`apt-get install sqlite`）

我有一张`college`表，我试图在其上创建触发器（如 dbclass.org 视频中所述）

```
create trigger R4
before insert on College
for each row
when exists (select * from College where cName = New.cName)
begin
  select raise(ignore);
end; 
```

这会导致错误

```
SQL error: near "select": syntax error 
```

大学的模式是

```
create table College(cName text, state text, enrollment int); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:26:21.270

该触发器适用于[SQLite3](http://www.sqlite.org/lang_createtrigger.html)。也许版本 2 不支持`when`或不触发，或者对触发器主体有不同的语法。我找不到第 2 版的权威参考，所以我猜。

# sql - NOT IN 的 HQL 等价物是什么？

> ID：10407694
> 
> 赞同：0
> 
> 时间：2012-05-02T04:25:06.323
> 
> 标签：sql, hql, hive

我正在尝试`NOT IN`在 Hive 查询语言中使用关键字。它似乎给了我一个错误：

```
SELECT Name
FROM names_in_countries
WHERE Country = 'Mexico'
AND Name NOT IN (
    SELECT Name
    FROM names_in_countries
    WHERE Country <> 'Mexico') 
```

[这是带有 SQL 答案的原始问题。](https://stackoverflow.com/questions/10407415/sql-where-and-distinct)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:39:15.853

我不知道 Hive 查询语言。根据我在这里阅读的内容：[**Hive Queries on Tables**](http://karmasphere.com/ksc/hive-queries-on-tables.html#subquery_syntax)，以下脚本可能有效。试试看。

*脚本*：

```
SELECT      name
FROM        mytable
GROUP BY    name
HAVING      AVG((CASE WHEN country = 'Mexico' THEN 1 ELSE 0 END) * 1.) >= 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:54:49.270

这样的事情可能会奏效。

```
SELECT t1.Name 
FROM   names_in_countries t1 
       LEFT OUTER JOIN (SELECT Name, 
                               Country 
                        FROM   names_in_countries 
                        WHERE  Country <> 'Mexico') t2 
         ON ( t1.Name = t2.Name ) 
WHERE  t1.Country = 'Mexico' 
       AND t2.Country IS NULL 
```

`country <> 'Mexico'`将on t2 添加为子选择至关重要，因为从 t2 检索到的记录在执行 LEFT OUTER JOIN 后会发生变化。如果 t1 中的记录没有对应的条目，它们将显示为 NULL。

# foreach - 如何使用 foreach 生成网格（表）

> ID：10407696
> 
> 赞同：0
> 
> 时间：2012-05-02T04:25:20.853
> 
> 标签：foreach, html-table, cakephp-2.0

我的问题很简单，但我从 cakephp 开始。我将解释我的问题：

我有 2 张桌子：

```
Table: Expenditures
Columns:
sub_category_id 
account_id  
date    
ammount     
created     
modified    
description

Table: BudgetRecords
Columns:
budget_id   
ammount     
sub_category_id 
created     
modified 
```

我有一个“家庭作业”要做，我的老师要我做一份报告。此报告将生成一个表格，并显示余额（Expenditures.ammount - BudgetRecords.ammount）和每个月（BudgetRecords.created 或 Expenditures.date，等等）。

这是我的问题：我正在尝试做一个 foreach，传递每一年（如果存在），如果存在一年，那么每个月执行一个查询。但是，我如何用 CakePHP 做到这一点？我尝试仅在控制器内部执行此操作，并且运行良好。但只返回去年的最后一个月。然后，我尝试了另一种方法。

在视图中，执行查询并搜索是否存在年份。如果存在，则搜索本月。然后给我返回结果。

这就是我所做的：

视图内部：

```
<table align="center" border="2" rules="All">
    <tr>
        <td>Valor:</td>
        <td>Data:</td>
    </tr>
    <?php
    for ($month = 1; $month <= 12; $month++) {
        if (strlen($month) == 1)
            $month = '0' . $month;

        foreach ($Expenditure->SaldoMes($month) as $result) {

            echo "<tr>";
            echo "<td> R$:" . $result[0] . "</td>";
            echo "<td> " . $result[1] . "</td>";
            echo "</tr>";
        }
    }
    ?>
</table> 
```

控制器内部：

```
public function SaldoMes($month = null) {
    $month = 0;
    for ($month = 1; $month <= 12; $month++) {
        if (strlen($month) == 1)
            $month = '0' . $month;
        $query = "SELECT (SUM(ex.ammount) - SUM(br.ammount)) as total , br.created as data
                    FROM budget_Records br, expenditure ex 
                    where SUBSTRING(br.created, 6, 2) = '" . $month .
                "' and SUBSTRING(br.created, 6, 2) = SUBSTRING(ex.created, 6, 2)";
        $this->set('Expenditure', $this->Expenditure->query($query));

        foreach ($this->Expenditure->query($query) as $records) {
            $this->set(('Total'), $records[0]['total']);
            $this->set(('Data'), $records['br']['data']);
        }
    }
} 
```

我希望我已经很好地解释了我的问题，以便有人向我展示解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:48:59.047

我认为这将有助于 [http://book.cakephp.org/2.0/en/controllers.html](http://book.cakephp.org/2.0/en/controllers.html)

我认为这部分是您正在寻找的。取自那个网站。

```
<?php
# /app/Controller/RecipesController.php

class RecipesController extends AppController {
    public function view($id) {
        //action logic goes here..
    }

    public function share($customer_id, $recipe_id) {
        //action logic goes here..
    }

    public function search($query) {
        //action logic goes here..
    }
} 
```

“这些操作的视图文件将是 app/View/Recipes/view.ctp、app/View/Recipes/share.ctp 和 app/View/Recipes/search.ctp。传统的视图文件名是小写的，并且动作名称的下划线版本。”

因此，如果您只想使用另一种方法，例如 SaldoMes()，那么只需在视图方法中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:46:57.873

@earlonrails，解决了：

```
public function SaldoMes() {
    $result = array();
    for ($month = 1; $month <= 12; $month++) {
        if (strlen($month) == 1)
            $month = '0' . $month;
        $query = "SELECT (SUM(ex.ammount) - SUM(br.ammount)) as total , br.created as data
                    FROM budget_Records br, expenditure ex 
                    where SUBSTRING(br.created, 6, 2) = '" . $month .
                "' and SUBSTRING(br.created, 6, 2) = SUBSTRING(ex.created, 6, 2)";
        $this->set('Expenditure', $this->Expenditure->query($query));
        foreach ($this->Expenditure->query($query) as $records) {
            $result[$month][0] = $records[0]['total'];
            $result[$month][1] = $records['br']['data'];
        }
    }
    return $this->set('result', $result);
} 
```

使用 $result 数组，现在我可以获得我的值。

感谢您的帮助。

# javascript - 通过跳过引号之间包含的换行符来拆分 CSV 字符串

> ID：10407697
> 
> 赞同：4
> 
> 时间：2012-05-02T04:25:20.950
> 
> 标签：javascript, regex, parsing, csv

如果以下正则表达式可以逐行拆分 csv 字符串。

```
var lines = csv.split(/\r|\r?\n/g); 
```

这怎么能适应跳过包含在 CSV 值中的换行符（即引号/双引号之间）？

例子：

```
2,"Evans & Sutherland","230-132-111AA",,"Visual","P
CB",,1,"Offsite", 
```

如果您没有看到它，这是一个带有可见换行符的版本：

```
2,"Evans & Sutherland","230-132-111AA",,"Visual","P\r\nCB",,1,"Offsite",\r\n 
```

我试图跳过的部分是包含在“PCB”条目中间的换行符。

***更新：***

我之前可能应该提到过这一点，但这是一个名为[jquery-csv](http://code.google.com/p/jquery-csv/)的专用 CSV 解析库的一部分。为了提供更好的上下文，我在下面添加了当前的解析器实现。

**这是验证和解析条目的代码（即一行）：**

```
$.csvEntry2Array = function(csv, meta) {
  var meta = (meta !== undefined ? meta : {});
  var separator = 'separator' in meta ? meta.separator : $.csvDefaults.separator;
  var delimiter = 'delimiter' in meta ? meta.delimiter : $.csvDefaults.delimiter;

  // build the CSV validator regex
  var reValid = /^\s*(?:D[^D\\]*(?:\\[\S\s][^D\\]*)*D|[^SD\s\\]*(?:\s+[^SD\s\\]+)*)\s*(?:S\s*(?:D[^D\\]*(?:\\[\S\s][^D\\]*)*D|[^SD\s\\]*(?:\s+[^SD\s\\]+)*)\s*)*$/;
  reValid = RegExp(reValid.source.replace(/S/g, separator));
  reValid = RegExp(reValid.source.replace(/D/g, delimiter));

  // build the CSV line parser regex
  var reValue = /(?!\s*$)\s*(?:D([^D\\]*(?:\\[\S\s][^D\\]*)*)D|([^SD\s\\]*(?:\s+[^SD\s\\]+)*))\s*(?:S|$)/g;
  reValue = RegExp(reValue.source.replace(/S/g, separator), 'g');
  reValue = RegExp(reValue.source.replace(/D/g, delimiter), 'g');

  // Return NULL if input string is not well formed CSV string.
  if (!reValid.test(csv)) {
    return null;
  }

  // "Walk" the string using replace with callback.
  var output = [];
  csv.replace(reValue, function(m0, m1, m2) {
    // Remove backslash from any delimiters in the value
    if (m1 !== undefined) {
      var reDelimiterUnescape = /\\D/g;              
      reDelimiterUnescape = RegExp(reDelimiterUnescape.source.replace(/D/, delimiter), 'g');
      output.push(m1.replace(reDelimiterUnescape, delimiter));
    } else if (m2 !== undefined) { 
      output.push(m2);
    }
    return '';
  });

  // Handle special case of empty last value.
  var reEmptyLast = /S\s*$/;
  reEmptyLast = RegExp(reEmptyLast.source.replace(/S/, separator));
  if (reEmptyLast.test(csv)) {
    output.push('');
  }

  return output;
}; 
```

*注意：我还没有测试过，但我想我可能会将最后一场比赛合并到主拆分/回调中。*

**这是执行逐行拆分部分的代码：**

```
$.csv2Array = function(csv, meta) {
  var meta = (meta !== undefined ? meta : {});
  var separator = 'separator' in meta ? meta.separator : $.csvDefaults.separator;
  var delimiter = 'delimiter' in meta ? meta.delimiter : $.csvDefaults.delimiter;
  var skip = 'skip' in meta ? meta.skip : $.csvDefaults.skip;

  // process by line
  var lines = csv.split(/\r\n|\r|\n/g);
  var output = [];
  for(var i in lines) {
    if(i < skip) {
      continue;
    }
    // process each value
    var line = $.csvEntry2Array(lines[i], {
      delimiter: delimiter,
      separator: separator
    });
    output.push(line);
  }

  return output;
}; 
```

有关该reges如何工作的详细信息，请查看[此答案](https://stackoverflow.com/a/8497474/290340)。我的是稍微改编的版本。我合并了单引号和双引号匹配以仅匹配一个文本分隔符，并使分隔符/分隔符动态化。它在验证实体方面做得很好，但我在顶部添加的线分割解决方案非常脆弱，并且在我上面描述的边缘情况下中断。

我只是在寻找一种解决方案，该解决方案可以遍历提取有效条目的字符串（传递给条目解析器），或者在错误数据上失败，返回一个错误，指示解析失败的行。

**更新：**

```
splitLines: function(csv, delimiter) {
  var state = 0;
  var value = "";
  var line = "";
  var lines = [];
  function endOfRow() {
    lines.push(value);
    value = "";
    state = 0;
  };
  csv.replace(/(\"|,|\n|\r|[^\",\r\n]+)/gm, function (m0){
    switch (state) {
      // the start of an entry
      case 0:
        if (m0 === "\"") {
          state = 1;
        } else if (m0 === "\n") {
          endOfRow();
        } else if (/^\r$/.test(m0)) {
          // carriage returns are ignored
        } else {
          value += m0;
          state = 3;
        }
        break;
      // delimited input  
      case 1:
        if (m0 === "\"") {
          state = 2;
        } else {
          value += m0;
          state = 1;
        }
        break;
      // delimiter found in delimited input
      case 2:
        // is the delimiter escaped?
        if (m0 === "\"" && value.substr(value.length - 1) === "\"") {
          value += m0;
          state = 1;
        } else if (m0 === ",") {
          value += m0;
          state = 0;
        } else if (m0 === "\n") {
          endOfRow();
        } else if (m0 === "\r") {
          // Ignore
        } else {
          throw new Error("Illegal state");
        }
        break;
      // un-delimited input
      case 3:
        if (m0 === ",") {
          value += m0;
          state = 0;
        } else if (m0 === "\"") {
          throw new Error("Unquoted delimiter found");
        } else if (m0 === "\n") {
          endOfRow();
        } else if (m0 === "\r") {
          // Ignore
        } else {
          throw new Error("Illegal data");
        }
          break;
      default:
        throw new Error("Unknown state");
    }
    return "";
  });
  if (state != 0) {
    endOfRow();
  }
  return lines;
} 
```

**一个分线器只需要 4 个状态：**

*   0：条目的开始
*   1：以下引用
*   2：遇到第二个报价
*   3：以下未引用

它几乎是一个完整的解析器。对于我的用例，我只想要一个分行器，这样我就可以提供一种更精细的方法来处理 CSV 数据。

*注意：这种方法的功劳归于另一个未经他许可我不会公开命名的开发者。我所做的只是将它从一个完整的解析器调整为一个分行器。*

**更新：**

在之前的 lineSplitter 实现中发现了一些破碎的边缘情况。所提供的应该完全符合[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:49:15.350

正如我在评论中指出的那样，仅使用单个正则表达式没有完整的解决方案。

这里描述了一种使用多个正则表达式的新方法，方法是在逗号上拆分并用嵌入的逗号连接回字符串[：](http:////http://www.greywyvern.com/?post=258) -

就个人而言，我会使用一个简单的有限状态机，如此[处所述](http://www.bennadel.com/blog/2241-Parsing-CSV-Data-With-An-Input-Stream-And-A-Finite-State-Machine.htm)

状态机有更多的代码，但代码更干净，每段代码在做什么也很清楚。从长远来看，这将更加可靠和可维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:08:38.340

使用正则表达式进行解析不是一个好主意。最好用它来检测“坏”分裂，然后将它们合并回来：

```
var lines = csv.split(/\r?\n/g);
var bad = [];

for(var i=lines.length-1; i> 0; i--) {
    // find all the unescaped quotes on the line:
    var m = lines[i].match(/[^\\]?\"/g);

    // if there are an odd number of them, this line, and the line after it is bad:
    if((m ? m.length : 0) % 2 == 1) { bad.push(i--); }
}

// starting at the bottom of the list, merge lines back, using \r\n
for(var b=0,len=bad.length; b < len; b++) {
    lines.splice(bad[b]-1, 2, lines[bad[b]-1]+"\r\n"+lines[bad[b]]);
} 
```

[（此答案已在 CC0 和 WTFPL 下获得许可。）]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T04:57:40.670

小心-该换行符是该值的一部分。不是`PCB`，是`P\nCB`。

但是，为什么不能只使用`string.split(',')`？如果需要，您可以遍历列表并强制转换为整数或删除填充引号。

# actionscript-3 - AS3 将蒙版位图复制到另一个位图上

> ID：10407698
> 
> 赞同：0
> 
> 时间：2012-05-02T04:25:28.517
> 
> 标签：actionscript-3, copy, bitmapdata, masking

我在将仅蒙版的像素从一个位图复制到另一个位图时遇到了一点问题。基本上，我用位图 B 掩盖位图 A，这工作正常，但我不确定如何将被掩盖的像素复制到位图 C 上，这是我想要保留的唯一一个。

```
//all this works fine

var _texture:Bitmap = new Bitmap(new Dirt_Bitmap);      
var _mask:Bitmap = new Bitmap(new Mask_Bitmap);     
var _planter:Bitmap = new Bitmap(new Planter_Bitmap);

_texture.cacheAsBitmap = _mask.cacheAsBitmap = true;
_texture.mask = _mask;

//This is where things get weird :[

var newBitmap:Bitmap = new Bitmap(new BitmapData(50, 50, true));
newBitmap.bitmapData.copyPixels(_texture.bitmapData, _texture.bitmapData.rect, new Point());

_planter.bitmapData.copyPixels(_newBitmap.bitmapData, _newBitmap.bitmapData.rect, new Point()); 
```

我将如何只复制或绘制或者 merg() 只是蒙版纹理，以便将其复制到应有污垢的播种机图形上？任何和所有的帮助将不胜感激！:]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:35:28.183

当您使用 时`copyPixels`，您实际上是在复制位图的内容，而没有任何环境添加的内容（没有遮罩或变换）。

改为使用`draw()`。

这是一个示例：

```
var texture:Bitmap = new Bitmap(new BitmapData(200, 200, false, 0xFFFF0000));      
var imageMask:Bitmap = new Bitmap(new BitmapData(200, 200, true, 0));
var rect:Rectangle = new Rectangle(0, 0, 10, 10);
imageMask.bitmapData.fillRect(rect, 0xFF000000);
rect.x = 50;
rect.y = 50;
imageMask.bitmapData.fillRect(rect, 0xFF000000);

texture.cacheAsBitmap = true;
imageMask.cacheAsBitmap = true;
texture.mask = imageMask;

addChild(imageMask);
addChild(texture);

var planter:Bitmap = new Bitmap(new BitmapData(200, 200, true, 0));

// that's it
planter.bitmapData.draw(texture);

addChild(planter);
planter.x = 100; 
```

# android - 安卓中的网络服务

> ID：10407699
> 
> 赞同：0
> 
> 时间：2012-05-02T04:25:49.817
> 
> 标签：android, soap

我是安卓新手。在我的应用程序中，我尝试调用 SOAP Web 服务，因为我不明白这是什么意思

对于（SOAP_Action，OperationName，WSDL_TARGET_NAMESPACE，SOAP_ADDRESS）。以下是我的完整代码

```
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);

TextView textView = new TextView(this);

setContentView(textView);

SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,
OPERATION_NAME);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
SoapEnvelope.VER11);
envelope.dotNet = true;
System.out.println("subbu="+request);
envelope.setOutputSoapObject(request);

HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS); 
try 
{ 
httpTransport.call(SOAP_ACTION, envelope); 
Object response = envelope.getResponse();
textView.setText(response.toString()); 
} 
catch (Exception exception) 
{ 
textView.setText(exception.toString());
}
}
} 
```

任何人都可以解释那是什么目的。提供一些链接，我可以从中得到想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-12T08:21:43.473

SOAP_ACTION/NAMESPACE 和 METHODS 可以在目标 web 服务的 WSDL 文件中找到！

下面是向 webservice 发送 SOAP 请求的示例代码：

```
public class SoapRequest {
private static final String SOAP_ACTION = "xxx";
private static final String METHOD_NAME = "xxx";
private static final String NAMESPACE = "xxx";
private static final String URL = "url of the webservice";

public static SoapObject soap() throws IOException, XmlPullParserException {
    SoapObject request = new SoapObject (NAMESPACE, METHOD_NAME);

/* Here you can add properties to your requests */
    PropertyInfo pi1 = new PropertyInfo();
    pi1.name = "xxx";
    pi1.type = String.class;
    request.addProperty(pi1, "xxx");

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    androidHttpTransport.debug = true; 
    androidHttpTransport.call(SOAP_ACTION, envelope);
    SoapObject soapResult = (SoapObject) envelope.bodyIn;
    return soapResult;
} 
```

# center - 从上面的3个点计算圆的中心和半径

> ID：10407700
> 
> 赞同：12
> 
> 时间：2012-05-02T04:25:54.113
> 
> 标签：center, geometry

有人可以显示可以快速执行此操作的代码吗？假设我们以左->右的顺序得到三个点 p1、p2、p3。因此，解决方案还应检查圆是否有效，即 (p1, p2, p3) 是否逆时针。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T04:36:14.883

要计算圆参数，请查看：

[http://paulbourke.net/geometry/circlesphere/](http://paulbourke.net/geometry/circlesphere/) 查找“3 点圆方程（2 维）”

要确定方向，您可以使用多边形面积公式：

[http://paulbourke.net/geometry/polygonmesh/](http://paulbourke.net/geometry/polygonmesh/) 寻找“计算多边形的面积和质心”

如果您需要特定的编程语言，请告诉我。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T04:33:33.323

*   连接圆上的任意两点，你就有了和弦。

*   弦的垂直平分线必须通过中心。

*   两条和弦平分线的交点将是中心。

余数（简化为最有效计算的形式）留给读者作为练习......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-15T11:17:39.140

这是一个只有一个 if 的简短函数（Swift 语言）。

```
enum Result {
    case circle(center: CGPoint, radius: CGFloat)
    case invalid
}

func circleTouching3Points(a: CGPoint, b: CGPoint, c: CGPoint) -> Result {
    let d1 = CGPoint(x: b.y - a.y, y: a.x - b.x)
    let d2 = CGPoint(x: c.y - a.y, y: a.x - c.x)
    let k: CGFloat = d2.x * d1.y - d2.y * d1.x
    guard k < -0.00001 || k > 0.00001 else {
        return Result.invalid
    }
    let s1 = CGPoint(x: (a.x + b.x) / 2, y: (a.y + b.y) / 2)
    let s2 = CGPoint(x: (a.x + c.x) / 2, y: (a.y + c.y) / 2)
    let l: CGFloat = d1.x * (s2.y - s1.y) - d1.y * (s2.x - s1.x)
    let m: CGFloat = l / k
    let center = CGPoint(x: s2.x + m * d2.x, y: s2.y + m * d2.y)
    let dx = center.x - a.x
    let dy = center.y - a.y
    let radius = sqrt(dx * dx + dy * dy)
    return Result.circle(center: center, radius: radius)
} 
```

# php - 复选框数据在单击时动态保存到数据库

> ID：10407704
> 
> 赞同：1
> 
> 时间：2012-05-02T04:26:17.960
> 
> 标签：php, javascript, jquery, ajax, checkbox

当我选中复选框时，我需要一些 js/ajax/jquery 脚本将数据动态保存到数据库。目前的复选框或加载在记录旁边并根据是否选中更改数据库中的变量。但是我必须在选择一个将其保存到数据库后重新加载页面。我可以做其他所有事情，但了解如何为此实现 ajax，因此我不必每次都提交查询并刷新页面。任何帮助是极大的赞赏。

```
 <form name="form1aa" method="post" action="process.php?fn=<? echo $rows['first']; ?>&class=<?php echo $rows['class']; ?>&last=<?php echo $rows['last']; ?>
&model=<?php echo $rows['model']; ?>&cas=<?php echo $rows['cases']; ?>&upid=<?php echo $id; ?>&group=1" id="form1a" >

    <select name="type" onchange=" fill_damage (document.form1aa.type.selectedIndex); ">
    <option value="Hardware">Hardware</option>
    <option value="Software">Software</option>
    </select>
    <select name="damage">
    </select>
    <input type=text name="comment"  placeholder="Comments Box">
    <input type=text name="cost"  placeholder="Cost">
    <input type="submit" value="Save" name="Save">
    </form>

<?php

//Job Status
if(isset($_POST['checkbox'])){$checkbox = $_POST['checkbox'];
if(isset($_POST['activate'])?$activate = $_POST["activate"]:$deactivate = $_POST["deactivate"])
$id = "('" . implode( "','", $checkbox ) . "');" ;
$sql="UPDATE repairs SET status = '".(isset($activate)?'Completed':'In Progress')."' WHERE id=$id" ;
$result = mysql_query($sql) or die(mysql_error());
}
//End Job Status

//Payment Status
if(isset($_POST['paycheck'])){$paycheck = $_POST['paycheck'];
if(isset($_POST['paid'])?$paid = $_POST["paid"]:$unpaid = $_POST["unpaid"])
$id = "('" . implode( "','", $paycheck ) . "');" ;
$sql="UPDATE repairs SET paid = '".(isset($paid)?'Paid':'Unpaid')."' WHERE id=$id" ;
$result = mysql_query($sql) or die(mysql_error());
}
//End Payment Status

//Return Status
if(isset($_POST['retcheck'])){$retcheck = $_POST['retcheck'];
if(isset($_POST['ret'])?$ret = $_POST["ret"]:$unret = $_POST["unret"])
$id = "('" . implode( "','", $retcheck ) . "');" ;
$sql="UPDATE repairs SET ret = '".(isset($ret)?'Retuned':'In Office')."' WHERE id=$id" ;
$result = mysql_query($sql) or die(mysql_error());
}
//End Return Status
$sql="SELECT * FROM $tbl_name";
if(isset($_POST['all'])){
    $sql="SELECT * FROM $tbl_name";
}
if(isset($_POST['tpc'])){
    $sql="select * from $tbl_name WHERE class LIKE '1%'";
}
if(isset($_POST['drc'])){
    $sql="select * from $tbl_name WHERE class LIKE 'D%'";
}
if(isset($_POST['bsc'])){
    $sql="select * from $tbl_name WHERE class LIKE 'B%'";
}

$result=mysql_query($sql);

?>
<form  name="frmactive" method="post" action="">
                <input name="activate" type="submit" id="activate" value="Complete Job" />
                <input name="paid" type="submit" id="Payment" value="Payment Status" />
                <input name="ret" type="submit" id="ret" value="Returned 2 Student" />
                <br />

<a id="displayText" href="javascript:toggle();">Show Extra</a>
<div id="toggleText" style="display: none">
<br />
                <input name="unret" type="submit" id="unret" value="In Office" />
                <input name="unpaid" type="submit" id="unpaid" value="Not Paid" />
                <input name="deactivate" type="submit" id="deactivate" value="In Progress" /></div>

<table width="1000" border="0" cellpadding="3" cellspacing="1">
<thead>
<th width="67" align="center"><strong>Start Date</strong></th>
<th width="50" align="center"><strong>Cases</strong></th>
<th width="34" align="center"><strong>Type</strong></th>
<th width="120" align="center"><strong>Damage</strong></th>
<th width="31" align="center"><strong>Comment</strong></th>
<th width="31" align="center"><strong>Cost</strong></th>
<th width="90" align="center"><strong>Payment Status</strong></th>
<th width="100" align="center"><strong>Returned 2 Student</strong></th>
<th width="100" align="center"><strong>Job Status</strong></th>
</thead>

<?php
while($rows=mysql_fetch_array($result)){
?>
<tr>

<td><? echo $rows['start']; ?></td>
<td><? echo $rows['cases']; ?></td>
<td><? echo $rows['type']; ?></td>
<td width="70"><? echo $rows['damage']; ?></td>
<td width="70"><? echo $rows['comment']; ?></td>
<td><? echo "$"; echo $rows['cost']; ?></td>

<!--Payment Display(Start)-->
<?php 
        if($rows['paid']=="Paid")
        {
                ?>
                    <td><input name="paycheck[]" type="checkbox" id="paycheck[]" value="<? echo $rows['id']; ?>">
                <? echo $rows['paid'];?>
                    </td>
                    <?
}

        if($rows['paid']=="Unpaid")
        {
              ?>
                    <td width="21"><input name="paycheck[]" type="checkbox" id="paycheck[]" value="<? echo $rows['id']; ?>">
                <? echo $rows['paid']; ?>
                    </td>
                    <?
}
if($rows['ret']==""){
    ?>
    <td width="50">No Data</td>
    <?
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T04:44:20.200

用 jQuery 来做，一个简单的例子可能是：

**HTML：**

```
<input type="checkbox" name="option1" value="Milk">
<input type="checkbox" name="option2" value="Sugar">
<input type="checkbox" name="option3" value="Chocolate"> 
```

**JS：**

```
$("input[type='checkbox']").on('click', function(){
   var checked = $(this).attr('checked');
   if(checked){
      var value = $(this).val();
      $.post('file.php', { value:value }, function(data){
          // data = 0 - means that there was an error
          // data = 1 - means that everything is ok
          if(data == 1){
             // Do something or do nothing :-)
             alert('Data was saved in db!');
          }
      });
   }
}); 
```

**PHP：文件.php**

```
<?php
if ($_POST && isset($_POST['value'])) {

    // db connection
    $link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
    if (!$link) {
       // error happened
       print(0);
    }
    mysql_select_db('mydb');

    // sanitize the value
    $value = mysql_real_escape_string($_POST['value']);

    // start the query
    $sql = "INSERT INTO table (value) VALUES ('$value')";

    // check if the query was executed
    if(mysql_query($sql, $link)){
       // everything is Ok, the data was inserted
       print(1);    
    } else {
       // error happened
       print(0);
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T04:33:37.150

简单的说...

```
$('input:checkbox').click( function() {
  clicked = $(this).attr('checked');
  if (clicked) {
    /* AJAX the server to tell them it was clicked. */ }
  else {
    /* AJAX the server to tell them it was unclicked. */ } } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:59:00.353

我可以让这更简单。首先，您需要添加一个复选框！

```
<form name="form1aa" method="post" action="process.php?fn=<? echo $rows['frist']; ?>&class=<?php echo $rows['class']; ?>&last=<?php echo $rows['last']; ?>
&model=<?php echo $rows['model']; ?>&cas=<?php echo $rows['cases']; ?>&upid=<?php echo $id; ?>&group=1" id="form1a" >

    <select name="type" onchange="fill_damage(document.form1aa.type.selectedIndex);">
    <option value="Hardware">Hardware</option>
    <option value="Software">Software</option>
    </select>
    <select name="damage">
    </select>
    <input type="text" name="comment"  placeholder="Comments Box">
    <input type="text" name="cost"  placeholder="Cost">
    <input type="checkbox" name="somecheck" onchange="if(this.checked)document.form1aa.submit()">Check this to Save.
    <input type="submit" value="Save" name="Save">
    </form>

<script type="javascript>
//another function that works for onchange="dosubmit(this)"
//IF you put it after the form.
function dosubmit(el) {
    if (el.checked) {
        document.form1aa.submit();
    }
}
</script> 
```

尽可能去掉 onchange 事件中的空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-25T13:10:29.367

如果您有动态复选框列表，并且希望将单击的复选框动态保存到数据库或插入未选中的复选框，请执行以下操作：

**html/PHP**

```
 <?php
        // $checklists are models that I am getting from db
        $checklists = CheckList::getCheckLists(3);
        echo '<ul>';
        foreach ($checklists as $checklist) {
            $isChecked = $checklist->getAnswer($requestID, $checklist->primaryKey);
            $checked = $isChecked ? "checked" : "";
            echo '<li>';
            echo "<input id='{$checklist->primaryKey}' 
            name='{$checklist->primaryKey}'  type='checkbox' {$checked} 
            value='{$isChecked}' data-request-id='{$requestID}'> 
            $checklist->check_list_text";
            echo '</li>';
        }
        echo '</ul>';
        ?> 
```

**jQuery**

```
<script>
$("input[type='checkbox']").on('click', function(){
    var checkbox = $(this);
    var checked = checkbox.prop('checked');
    var checklistId = checkbox.attr("id");

    $.ajax({
        url:"<?= Url::to(['default/add-checklist-answer']) ?>",
        // I don't need to write the type here because I am using Yii Framework
        // type: 'post',
        data: {
            checklistId: checklistId,
            requestId: checkbox.data('request-id'),
            checked: checked
        },
        success: function(data) {
            //alert(data);
            console.log(data.firstMessage)
        },
        error: function(data) {
            // alert(data);
        }
    });

});

</script> 
```

***我希望它适用于 MVC 用户。***

# asp.net - 如何在 asp.net 中使输出的 html 源代码紧凑

> ID：10407706
> 
> 赞同：0
> 
> 时间：2012-05-02T04:26:27.363
> 
> 标签：asp.net

访问[http://www.12titans.net/p/s/register.aspx](http://www.12titans.net/p/s/register.aspx)，在页面上右键查看源码。我发现html源码很紧凑，没有空白。如何在asp.net中这样做？我正在使用IE8，提前tks！对不起，我的英语不好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:32:21.520

我在调试一些spring mvc项目时遇到了同样的问题，我通常做的是使用chrome，右键单击页面并检查元素。元素资源管理器是应用了javascript的源代码，所以我可能会有点不同，但通常会更好

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:36:11.967

当您使用 ASP.NET 生成 HTML 时，不要在源代码中插入制表符、换行符或空格，而当您手动编写 HTML 代码时，请执行相同的操作。

换句话说，用手做。

您还可以使用 DOM Parser，它应该能够获取基本必需品并将其打印出来，而无需任何制表符或空格。

# java - Condition 接口中的 signalAll 与对象中的 notifyAll

> ID：10407708
> 
> 赞同：3
> 
> 时间：2012-05-02T04:26:42.383
> 
> 标签：java, multithreading, concurrency

1）昨天只有我问了这个问题[条件与等待通知机制](https://stackoverflow.com/questions/10395571/condition-vs-wait-notify-mechanism)

2）我想编辑相同的内容并在我的问题中添加一些如果，但因为它可能变得很麻烦并且包含足够的文本以使读者不感兴趣并使读者感到困惑，所以我想在这里提出一个新问题。

3）在我的帖子的上下文中，其 url 在第 1 点给出），考虑 4 个线程的情况，P1，T1 和 P2，T2 作用于单个数据结构“S”。

4）我试图再次利用条件接口而不是等待通知的优势。

5）考虑代码

```
final Lock lock = new ReentrantLock();
Condition c1 = lock.newCondition();
Condition c2 = lock.newCondition();
Condition c3 = lock.newCondition();
Condition c4 = lock.newCondition(); 
```

6) 考虑 P1,T1 使用 c1,c2（以标准 await()/signalAll() 方式）。考虑 P2,T2 在 put,take,put1,take1 方法中分别使用 c3,c4（以标准 await()/signalAll() 方式）。

7) 当我执行 c1.signalAll() 时，**只有等待/因为 condition1 的线程**才会收到信号。我说得通吗？

8）考虑一个等待/通知机制来实现同样的说法，

```
private static final Object lock= new Object();
synchronized(lock) 
```

考虑 put,take,put1,take1，因此如果任何线程在满足任何一个条件时执行 lock.notifyAll()，即使由于其他条件而等待/开启的线程也会收到通知。真的吗 ？。这是我们可以算作使用等待/通知而不是条件机制的缺点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T07:04:47.490

是的你是对的。该类`Condition`是内在条件队列（通过 和 控制的队列）`Object.wait`的`Object.notify`泛化`Object.notifyAll`。

我将引用 Brian Goetz 的 Java Concurrency in Practice [p.306-307]

> 内在条件队列有几个缺点。每个内在锁只能有一个关联的条件队列，这意味着在像 BoundedBuffer 这样的类中，多个线程可能会在同一个条件队列上等待不同的条件谓词，而最常见的锁定模式涉及暴露条件队列对象。这两个因素都使得无法强制执行使用 notifyAll 的统一服务员要求。如果您想编写具有多个条件谓词的并发对象，或者您想对条件队列的可见性进行更多控制，显式 Lock 和 Condition 类提供了一种比内在锁和条件队列更灵活的替代方案。
> 
> Condition 与单个 Lock 相关联，就像条件队列与单个内部锁相关联一样；[...] 正如 Lock 提供了比内在锁定更丰富的功能集，Condition 提供了比内在条件队列更丰富的功能集：每个锁的多个等待集、可中断和不可中断的条件等待、基于期限的等待以及选择公平或不公平的排队。

# python - Python正则表达式 - 删除所有字符传递某个字符

> ID：10407711
> 
> 赞同：0
> 
> 时间：2012-05-02T04:26:49.813
> 
> 标签：python, expression

例如，我有一些正则表达式，看起来像这样 98374D90 483D39 3843930D393

现在我有python代码取出所有字符并保持整数，如下所示：

```
ws = 98374D90
clean = re.sub("\D", "", ws) 
```

这给我留下了 9837490 但我需要它做的是一旦它到达字符“D”它会丢弃 D 以及它之后的所有内容，因此 98374D90 将导致 98374 我该怎么做？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:29:06.630

以下将用空字符串替换任何非数字字符 - 有效地消除该字符。

```
>>> re.sub("\D.*", "", "98374D90")
'98374' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T04:31:39.723

我倾向于推荐使用单引号和原始字符串：

```
re.sub(r'D.*', '', '98374D90') 
```

它使您不必经常逃跑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T06:27:10.583

Another non-regex solution:

```
>>> s = '98374D90'
>>> s.partition('D')
('98374', 'D', '90') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T05:02:36.873

当您请求正则表达式时，有时正则表达式只会使事情变得复杂（即，如果您不能自己维护它们）。您可以使用更直接的功能，也许：

```
from itertools import takewhile
import string

s = '98374D90'

print ''.join(takewhile(lambda c: c in string.digits, s)) 
```

返回

```
98374 
```

# objective-c - 为什么我的 XIB 文件中的视图没有被 UIViewController 加载？

> ID：10407714
> 
> 赞同：2
> 
> 时间：2012-05-02T04:27:05.943
> 
> 标签：objective-c, cocoa-touch, uiview, uiviewcontroller, xib

在我的应用程序委托中，我有：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[CGMContainerViewController alloc] init];
    self.window.rootViewController = self.viewController;
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

我有一个未修改的 CGMContainerViewController.h/m 和一个修改后的 CGMContainerViewController.xib（添加了一个按钮）。该视图链接到文件所有者。

为什么没有显示来自 XIB 的视图？

编辑：是因为我试图将带有状态栏的视图加载到窗口中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T04:32:15.857

从代码的外观来看，您没有加载任何 XIB 文件。你需要打电话**`initWithNibName:`**

```
self.viewController = [[CGMContainerViewController alloc] initWithNibName:
                                       @"CGMContainerViewController" bundle: nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:30:44.107

Make sure that your File's Owner in the XIB is set to `CGMContainerViewController`

![enter image description here](../Images/fcf6bc90b4242da343be4f3cf0896231.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T05:28:45.907

我面临的问题是。如果你用特殊字符命名你的 viewController 和一些其他的东西，你的 xib 将不会被加载示例 - >（错误命名）view-controller1（如果命名是这样的，那么 xib 不会加载）示例--->（正确命名）viewController1（将加载xib）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T17:20:09.647

好的。我认为这是因为对于 UINavigationController，您必须设置 rootViewController 和所有图层。我只是将其更改为 UIViewController 因为我真的不需要导航，只需要导航栏。

# python - 使我的文件夹在twistd中不可见/受限的最佳方法是什么？

> ID：10407717
> 
> 赞同：2
> 
> 时间：2012-05-02T04:27:24.147
> 
> 标签：python, twisted

几天前，我尝试学习 python twisted..
这就是我制作网络服务器的方式：

```
from twisted.application import internet, service
from twisted.web import static, server, script
from twisted.web.resource import Resource
import os

class NotFound(Resource):
    isLeaf=True
    def render(self, request):
        return "Sorry... the page you're requesting is not found / forbidden"

class myStaticFile(static.File):
    def directoryListing(self):
        return self.childNotFound

#root=static.file(os.getcwd()+"/www")
root=myStaticFile(os.getcwd()+"/www")
root.indexNames=['index.py']
root.ignoreExt(".py")
root.processors = {'.py': script.ResourceScript}
root.childNotFound=NotFound()
application = service.Application('web')
sc = service.IServiceCollection(application) 
i = internet.TCPServer(8080, server.Site(root))#@UndefinedVariable
i.setServiceParent(sc) 
```

在我的代码中，我为 twisted.web.static.File`override`和`directoryListing`.
因此，当用户尝试访问我的资源文件夹（`http://localhost:8080/resource/`或`http://localhost:8080/resource/css`）时，它将返回一个 notFound 页面。
但他仍然可以打开/阅读`http://localhost:8080/resource/css/style.css`.
有用...

我想知道的是..这是正确的方法吗？？？
还有另一种“完美”的方式吗？
我正在寻找一个禁用 directoryListing 之类的配置`root.dirListing=False`。但没有运气...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:44:40.120

是的，这是一种合理的方法。您也可以使用`twisted.web.resource.NoResource`or`twisted.web.resource.Forbidden`代替定义您自己的`NotFound`.

# ms-access - 控制源什么时候在数据库中保存数据？

> ID：10407722
> 
> 赞同：1
> 
> 时间：2012-05-02T04:27:36.930
> 
> 标签：ms-access, sql-server-2005, vba, ms-access-2007

我的问题是控制源属性和更新后事件在发生顺序方面如何相互关联？哪个先发生？我想要一个消息框，要求用户确认他是否要保存他刚刚在文本框中输入的数据。文本框的控制源属性设置为某个字段。如果用户取消操作，则不应保存他输入的文本. 如果我把msgbox放在文本框的OnChange事件中，提示用户确认数据输入会不会太早了？注意：控制源是日期类型的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:29:19.507

ControlSource 与 Change、BeforeUpdate 或 AfterUpdate 事件并不真正直接相关。

您需要使用的事件是 BeforeUpdate 事件。

```
Private Sub txtFirstName_BeforeUpdate(Cancel as Integer)
    If MsgBox("Are you sure you want to save this data?", vbYesNo, "Um...") = vbNo Then
        Cancel = True
    End If
End Sub 
```

我想补充一点，在大多数情况下，最好使用 Form 的 BeforeUpdate 事件来验证事情，而不是在控件的 BeforeUpdate 事件上进行验证，因为它往往对用户更友好。Form 的 BeforeUpdate 事件的工作方式与我在上面发布的代码相同。

此外，在验证例程中使用 MsgBox 是大多数人这样做的方式，但它确实不被认为是一种好的设计实践。最好有一个文本框或标签，您可以使用它来输出验证消息，然后也可以播放声音，以便用户知道他们输入的数据无效。

# google-app-engine - 在服务器上为转换 api 生成 HTML

> ID：10407727
> 
> 赞同：0
> 
> 时间：2012-05-02T04:28:04.877
> 
> 标签：google-app-engine

我正在研究转换 api 以从 HTML 生成 pdf 文档。我有很多复杂的 HTML 应该动态生成。在 appengine 服务器上生成复杂 HTML 的最佳方法是什么，以便我可以在转换 api 中使用它。

资产asset = new Asset("text/html", "some data".getBytes(), "testfile.html");

在上面的第二个参数是 HTML。如果我有复杂的 HTML 怎么办？什么是生成 HTML 的好方法，使其可维护和可读。

-阿斯瓦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:15:52.890

如果您正在寻找一种方法来生成一些复杂的 HTML 并且还要向其中注入一些数据，那么一些模板引擎（[Velocity](https://stackoverflow.com/questions/2014099/velocity-framework-on-google-app-engine)、[FreeMarker](http://freemarker.sourceforge.net/)或任何其他）在这里会很有用。

另一方面，如果您想快速准备一些美观且易读的模板，我建议您使用 Google Docs。App Engine 的 Conversion API 和 Google Docs 的“导出为 PDF”功能共享相同的后端，因此您可以轻松地在 Google Docs 中编辑模板，然后使用“导出为 HTML”功能来获取 HTML，将它与 GAE 转换 API 一起使用，您将获得与在 Google Docs 中下载 PDF 相同的结果。

# ruby-on-rails - “Report_Core”中的 Thinking_Sphinx 错误

> ID：10407728
> 
> 赞同：0
> 
> 时间：2012-05-02T04:28:09.753
> 
> 标签：ruby-on-rails, error-handling, gem, core, thinking-sphinx

我有一个thinking-sphinx 应用程序，奇怪的是/db/sphinx/development/ 中的文件尚未初始化。

我有一个单独的应用程序，但我不知道为什么。我不记得做过什么不同的事情。

有谁知道如何创建这些文件或者它们是否特定于应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:50:57.217

该目录`db/sphinx/development`通常包含您的开发机器上的 sphinx 索引，如果您已构建它的话。您可以在 ThinkingSphinx 中通过使用 创建配置文件来执行此操作`rake ts:conf`，之后您可以使用 生成 Sphinx 索引`rake ts:index`。当然，Sphinx 需要正确安装在您的机器上。

# sql-server - 使用查询中的子字符串函数将数据从 Excel 导入 SQL 服务器

> ID：10407729
> 
> 赞同：1
> 
> 时间：2012-05-02T04:28:17.503
> 
> 标签：sql-server, excel, oledb

我非常关注此 MSDN 页面上的示例：

[http://code.msdn.microsoft.com/Imoprt-Data-from-Excel-to-705ecfcd](http://code.msdn.microsoft.com/Imoprt-Data-from-Excel-to-705ecfcd)

有 1 个例外。而不是像这样的简单查询

```
"Select * FROM [Sheet1$]" 
```

我想做一些更复杂的事情，比如：

```
"Select *, SUBSTRING(COLUMN_A, 1, 5) as STRIPPED_COL_A FROM [Sheet1$]" 
```

但我收到一条无用的异常消息“IErrorInfo.GetDescription failed with E_FAIL(0x80004005)。”

如果我不得不猜测，问题是由于在 Excel 或 OleDB 中使用了不受支持的 SUBSTRING 函数。那么如何解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T04:38:42.717

在他们的示例中，您使用 Microsoft.ACE.OLEDB 驱动程序来加载 excel 表，`Provider=Microsoft.ACE.OLEDB.12.0`因此`Provider=Microsoft.Jet.OLEDB.4.0`您将不得不使用 MS Access 中可用的查询格式和功能。

```
Select *, MID(Column_A, <<start>>, <<length>>) as STRIPPED_COL_A from [Sheet1$] 
```

请记住其他特性，例如`<<start>>`不是零索引，而是以 1 作为字符串中的第一个字符开始。

# extjs - Extjs4 Dataview 禁用键导航

> ID：10407731
> 
> 赞同：0
> 
> 时间：2012-05-02T04:28:23.180
> 
> 标签：extjs, extjs4, dataview

我正在使用“Ext.view.ViewView”作为菜单。我们可以通过箭头键选择菜单项作为 extjs“dataview”中的默认功能。但我只需要通过单击来选择菜单项。

有什么方法可以只为单击事件启用 selectionChange。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T17:07:12.327

我知道这有点旧但有同样的问题并通过在我的数据视图中指定“selModel”配置来解决

```
selModel: {
    enableKeyNav: false
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:53:23.100

[enableKeyNav](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.selection.DataViewModel-cfg-enableKeyNav)

在 ExtJS 4.1 你可以添加

```
single: true 
```

到你的事件，它只会被触发一次..

# facebook - 批准的操作不会仅命中新闻源（子集）活动日志

> ID：10407735
> 
> 赞同：0
> 
> 时间：2012-05-02T04:29:02.183
> 
> 标签：facebook, facebook-graph-api, action

我已经创建并批准了许多操作。我已向用户请求 Publish_Action 权限。这一切都很好。当用户更新网站上的内容时，我有许多系统会触发这些操作。这些也触发并且似乎工作正常。我和我的用户发现我们的命名空间/应用程序名称在时间线活动中创建了一个新列表 - 所以首先你必须更改时间线视图以查看更新 - 好吧，更新在活动日志中显示正常，但是，似乎没有任何更新出现在新闻源中-我认为当应用程序具有 Publish_Stream 但现在在 Publish_Action 下它似乎不起作用时，它们确实发生了。

我还发现我的一个应用程序对除开发人员、管理员等以外的任何人都不可见，甚至认为它已批准操作？

有没有其他人看到这些 - 有治愈方法吗？完成这项工作的代码必须是正确的，因为活动和（子集）时间线似乎显示数据它只是主时间线和似乎不起作用的新闻源？

PS：如果我添加一个＆消息，它似乎确实会发布到时间线和新闻源 - 即：状态更新操作但强制其中之一将违反准则，不是吗？但是该操作是由用户生成的，那么在这种情况下添加一条消息可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:53:19.817

> 我还发现我的一个应用程序对除开发人员、管理员等以外的任何人都不可见，甚至认为它已批准操作？

您的应用程序不是设置为沙盒模式吗？
您可能想访问下面的页面并检查“沙盒模式”选项。
[https://developers.facebook.com/apps/APP_ID/advanced](https://developers.facebook.com/apps/APP_ID/advanced)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:00:37.190

> 似乎没有任何更新出现在新闻源中-我认为当应用程序具有 Publish_Stream 但现在在 Publish_Action 下似乎不起作用时，它们确实发生了。

首先，[本文](https://developers.facebook.com/blog/post/2012/04/25/streamlining-publish_stream-and-publish_actions-permissions/)可能会帮助您了解最新版本的 publish_stream 和 publish_actions 权限。
根据[该文件](https://developers.facebook.com/docs/opengraph/keyconcepts/#social-channels)，由于受 EdgeRank 影响，因此不能保证所有操作都会在新闻提要上发布。这是我的猜测，但如果你的应用发布了这么多操作，每个操作的优先级会更低，EdgeRank 也是如此。

# jquery - JQuery比较选择兄弟值

> ID：10407736
> 
> 赞同：1
> 
> 时间：2012-05-02T04:29:03.843
> 
> 标签：jquery, select, siblings

我有 10 个下拉菜单，每个都有 30 个左右的选项。我试图通过使用 JQuery 将每个选择值与其同级进行比较来防止在任何菜单中选择相同的值。这是我的代码，但它不起作用：

```
$('#select1').change(function() {
    if ($(this).val() == $(this).siblings().val()) {
        alert("OK");
    }
}); 
```

如您所见，我正在尝试`#select1`使用`$(this).siblings().val()`. 无法弄清楚为什么这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T04:42:04.713

```
$('#select1').change(function() {
    var self = this, 
        t = $(this).siblings().filter(function() {
            return this.value == self.value;
        });
    if (t.length) {
        alert("OK");
    }
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/X8L2E/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T04:37:18.943

我认为兄弟姐妹返回一个元素列表而不是单个项目，所以你需要运行一个循环

```
$('#select1').change(function() {

    var $select = $(this);

    $(this).siblings().each(function(index){

        if ($(this).val() == $select.val()) {
            alert('ok');
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T04:39:13.003

尝试使用[inArray](http://api.jquery.com/jQuery.inArray/)

```
$('#select1').change(function() {

    var arr=[];
    $.each($(this).siblings(),function(i,j){
     arr.push($(j).val());
    });
    if ($.inArray($(this).val(),arr)) {
        alert("OK");
    }
}); 
```

# ruby-on-rails - 如何监控 Rails 应用程序的日志文件？

> ID：10407738
> 
> 赞同：1
> 
> 时间：2012-05-02T04:29:13.010
> 
> 标签：ruby-on-rails, gem, logging

我有一个 Rails 应用程序，并使用 Nginx 和 Passenger 运行它，为了维护应用程序，我们需要监控日志文件，并在存在任何异常时通过电子邮件发送给开发团队，是否有任何 gem 可以做这件事，或者是还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T04:33:19.693

您可以使用[Splunk](http://www.splunk.com/download)进行监控和通知。它是免费的，最高可达 500M/天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T04:31:14.287

使用[空气制动](http://airbrake.io/)。它很棒，很简单，并且有免费的开发选项可供选择。

# html - html 页脚似乎没有粘在打印预览的底部

> ID：10407742
> 
> 赞同：3
> 
> 时间：2012-05-02T04:30:02.837
> 
> 标签：html, css, sticky-footer, print-preview

1.  即使我使用@media print，我也无法在打印预览的第 2 页底部获得实际的版权页脚
2.  如果您将 .footer 中的位置更改为“绝对”，则此页脚不会出现在第二页中。

我已经粘贴了下面用 html 编写的信函模板，如果有人能对我的问题有所了解，将不胜感激。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title></title>
<style type="text/css">
* {
margin: 0;
}
html, body {
min-height: 100%;
position:relative;
}
*#contents { min-height: 100%; }
* html *#contents { height: 100%; }
tfoot { display: table-footer-group; }
@media screen {
td.footer {
height: 37px;
clear: both;
font-family:"Verdana";
font-size:9px;
bottom: 0;
width: 100%;
color: #844C87;
position: fixed;
display none;
}
}
@media print {
.footer {
font-family:"Verdana";
font-size:9px;
color: #844C87;
bottom: 0;
position: absolute;
}
.push {
}
}
</style>
<STYLE TYPE='text/css'>
P.pagebreakhere {page-break-before: always}
</STYLE>
</head>
<body>
<table>
<thead><tr><td>
<!--*************************************************************************************-->
<table>
<tr><td align="left"><img src="someimage.gif"></td></tr>
</table>
<!--*************************************************************************************-->
<table width="650" border="0">
..... Some Header html markup code ....
</table><br/>
<!--*************************************************************************************-->
</td></tr></thead>
<tfoot><tr><td class="footer"><div class="push"></div>...the ACTUAL FOOTER e.g. some copyright statements....</td></tr></tfoot>
<tbody>
<tr><td>
<p>....Some Page 1 html markup code ....</p>
<!--*************************************************************************************-->
<P CLASS="pagebreakhere">
<!--*************************************************************************************-->
<table>
.....Some Page 2 html markup code ....
</table>
<!--*************************************************************************************-->
</td></tr>
</tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T20:33:33.467

请改用浏览器特定的打印对话框。粘性页脚假定支持绝对或固定定位，这两者都不是[CSS 分页媒体](http://wiki.csswg.org/test/paged-media/assertions)的一部分。唯一的解决方法是根据内容使用固定边距，例如以下示例：

```
<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>CSS Page Breaks</title>
<style type="text/css">
@media all
  {
  .header, .footer, p { display:none; }
  }

@page :right {
    margin-top:9in;
}

@media print
  {
  .header, .footer
    {
    display: block;
    color:red; 
    font-family:Arial; 
    font-size: 16px; 
    text-transform: uppercase; 
    page-break-before: right;
    }

  .header { page-break-before: auto; page-break-after: always; }

  p {
    display: block;
    orphans:2;
    widows:1;
    }
}
</style>
</head>
<body>
  <h1 class="header">Title</h1>
  <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>

<h2 class="footer">End</h2>
</body>
</html> 
```

**参考**

*   [XSL-FO 已死，CSS 分页媒体是主要嫌疑人](http://www.rockweb.co.uk/blog/2014/06/xsl-fo-is-dead,-css-paged-media-is-prime-suspect/)

# cakephp - 保存已禁用字段

> ID：10407758
> 
> 赞同：2
> 
> 时间：2012-05-02T04:31:22.480
> 
> 标签：cakephp

在我的 edit.ctp 中，我有一个不需要用户更改的选择框。所以我把`array(disabled=>true)`. 但是这个领域不来的时候

`pr($this->data);`并在保存时显示错误。

有什么选择可以解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T04:37:58.347

如果您知道数据的值，您可以在控制器上对其进行编辑。

`$this->request->data['ModelName']['fieldName'] = value;`

**更新**

像这样编辑
`echo $this->Form->input('patient_id',array('type'=>'select', 'readonly' => 'readonly'));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T04:36:49.407

您可以将该字段设置为**只读**，以便用户无法更改它，或者使用一些隐藏字段来发布您想要的数据，或者您可以使用一些 CSS，例如**visibility:hidden**，这样用户就看不到它但它会被发布.

```
echo this->Form->input('patient_id',array('type'=>'hidden')); 
```

您可以为输入使用其他名称并签入控制器，或者您可以从视图**强文本**中完全删除选择元素（因为用户不需要更改它，所以不需要它）

# apache-flex - Flex：另一个使用 Group、HGroup 和 VGroup 的新手布局问题

> ID：10407759
> 
> 赞同：1
> 
> 时间：2012-05-02T04:31:22.627
> 
> 标签：apache-flex

如果您运行以下 mxml 代码，您将看到位于第二行`MyLabel1`的其他标签（例如）和其他项目的上方。`MyLabel2`

如何更改代码以使其`MyLabel1`与`MyLabel2`等一致？

请注意，任何更改都需要保持 、 和 的组`MyLabel2`在`MyLabel3`（左侧）和（右侧）`MyButton3`之间等距，就像现在一样。换句话说，第 2 行的中间组不在容器的中心，但在它的左侧和右侧具有相等的空间。`MyLabel1``MyLabel4`

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="200" minHeight="300">

<s:VGroup top="10" left="20" right="20">

    <s:Group width="100%">

        <s:HGroup left="0" top="5" verticalAlign="baseline">
            <s:Label text="Some Text Here" />
        </s:HGroup>

        <s:HGroup right="0" verticalAlign="baseline">
            <s:Button label="Button1" width="65"/>
            <s:Button label="Button2" width="65"/>
        </s:HGroup>

    </s:Group> 

    <s:Spacer height="2"/>

    <s:HGroup width="100%" >

        <s:HGroup >
            <s:Label text="MyLabel1"/>
        </s:HGroup>

        <s:Spacer width="100%"/> 

        <s:HGroup verticalAlign="baseline">
            <s:Label text="MyLabel2"/>
            <s:Label text="MyLabel3"/>
            <s:Button label="MyButton3" width="85"/>            
        </s:HGroup>

        <s:Spacer width="100%"/>

        <s:HGroup verticalAlign="baseline">
            <s:Label text="MyLabel4"/>
            <s:TextInput id="myID" />  
        </s:HGroup>

    </s:HGroup>

</s:VGroup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:26:54.077

尝试：

将三个 hgroup verticalAlign 设置为 middle 以便包含的项目位于组件高度的中间...

那么您需要为三个 hgroup 指定一个高度，因为： - 第一个只有一个标签（具有一定高度） - 在其他两个中，有一个按钮和一个文本输入，其高度大于简单标签（组 1)

使用组的自定义高度覆盖内部组件设置的高度

```
<s:VGroup top="10" left="20" right="20">

    <s:Group width="100%">

        <s:HGroup left="0" top="5" verticalAlign="baseline">
            <s:Label text="Some Text Here" />
        </s:HGroup>

        <s:HGroup right="0" verticalAlign="baseline">
            <s:Button label="Button1" width="65"/>
            <s:Button label="Button2" width="65"/>
        </s:HGroup>

    </s:Group> 

    <s:Spacer height="2"/>

    <s:HGroup width="100%" >

        <s:HGroup verticalAlign="middle" height="25">
            <s:Label text="MyLabel1"/>
        </s:HGroup>

        <s:Spacer width="100%"/> 

        <s:HGroup verticalAlign="middle" height="25">
            <s:Label text="MyLabel2"/>
            <s:Label text="MyLabel3"/>
            <s:Button label="MyButton3" width="85"/>            
        </s:HGroup>

        <s:Spacer width="100%"/>

        <s:HGroup verticalAlign="middle" height="25">
            <s:Label text="MyLabel4"/>
            <s:TextInput id="myID" />  
        </s:HGroup>

    </s:HGroup>

</s:VGroup> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:59:24.463

只需将verticalAlign="baseline" 添加到最外部的HGroup。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

        <s:VGroup top="10" left="20" right="20">

            <s:Group width="100%">

                <s:HGroup left="0" top="5" verticalAlign="baseline">
                    <s:Label text="Some Text Here" />
                </s:HGroup>

                <s:HGroup right="0" verticalAlign="baseline">
                    <s:Button label="Button1" width="65"/>
                    <s:Button label="Button2" width="65"/>
                </s:HGroup>

            </s:Group> 

            <s:Spacer height="2"/>

            <s:HGroup width="100%" verticalAlign="baseline" >

                <s:HGroup>
                    <s:Label text="MyLabel1"/>
                </s:HGroup>

                <s:Spacer width="100%"/> 

                <s:HGroup verticalAlign="baseline">
                    <s:Label text="MyLabel2"/>
                    <s:Label text="MyLabel3"/>
                    <s:Button label="MyButton3" width="85"/>            
                </s:HGroup>

                <s:Spacer width="100%"/>

                <s:HGroup verticalAlign="baseline">
                    <s:Label text="MyLabel4"/>
                    <s:TextInput id="myID" />  
                </s:HGroup>

            </s:HGroup>

        </s:VGroup>     

</s:Application> 
```

# queue - rabbitmq 中的池化连接或通道之间是否存在性能差异？

> ID：10407760
> 
> 赞同：61
> 
> 时间：2012-05-02T04:31:22.623
> 
> 标签：queue, message-queue, rabbitmq, task-queue

我是 Rabbitmq（和编程）的新手，如果这很明显，请提前抱歉。我正在创建一个池以在队列上工作的线程之间共享，但我不确定是否应该使用池中的连接或通道。

我知道我需要通道来完成实际工作，但是每个连接有一个通道是否有性能优势（就队列的更多吞吐量而言）？还是我最好只为每个应用程序使用一个连接并汇集许多通道？

注意：因为我正在集中资源，所以初始成本不是一个因素，因为我知道连接比通道更昂贵。我对吞吐量更感兴趣。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-08T15:22:36.110

我在[rabbitmq 网站](http://www.rabbitmq.com/tutorials/amqp-concepts.html)上找到了这个，它靠近底部，所以我在下面引用了相关部分。

tl;dr 版本是每个应用程序应该有 1 个连接，每个线程应该有 1 个通道。希望有帮助。

> 连接
> 
> AMQP 连接通常是长期存在的。AMQP 是一种应用层协议，它使用 TCP 进行可靠传输。AMQP 连接使用身份验证，并且可以使用 TLS (SSL) 进行保护。当应用程序不再需要连接到 AMQP 代理时，它应该优雅地关闭 AMQP 连接，而不是突然关闭底层 TCP 连接。
> 
> 频道
> 
> 一些应用程序需要多个连接到 AMQP 代理。然而，同时保持许多 TCP 连接打开是不可取的，因为这样做会消耗系统资源并使得配置防火墙更加困难。AMQP 0-9-1 连接与通道复用，可以被认为是“共享单个 TCP 连接的轻量级连接”。
> 
> 对于使用多个线程/进程进行处理的应用程序，很常见的是为每个线程/进程打开一个新通道，并且它们之间不共享通道。
> 
> 特定通道上的通信与另一个通道上的通信完全分开，因此每个 AMQP 方法还带有一个通道号，客户端使用该通道号来确定该方法用于哪个通道（因此，例如，需要调用哪个事件处理程序） .

建议每个线程有 1 个通道，即使它们是线程安全的，所以您可以让多个线程通过一个通道发送。就您的应用程序而言，我建议您坚持每个线程使用 1 个通道。

此外，建议每个频道只有 1 个消费者。

这些只是指导方针，因此您必须进行一些测试以查看最适合您的方法。

这个线程[在这里](http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-March/018682.html)和[这里](http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-March/018683.html)有一些见解。

尽管有所有这些指导方针，但[这篇文章](http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2011-July/013771.html)表明它很可能不会因拥有多个连接而影响性能。虽然它是在谈论客户端还是服务器（rabbitmq）端并没有具体说明。一方面，它当然会使用更多的系统资源和更多的连接。如果这不是问题并且您希望获得更高的吞吐量，那么像[这篇文章那样拥有多个连接确实会更好](http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2012-May/019873.html)建议多个连接将允许您更高的吞吐量。原因似乎是即使有多个通道，一次也只有一条消息通过连接。因此，一条大消息将阻塞整个连接，或者一个通道上的许多不重要消息可能会阻塞同一连接但不同通道上的重要消息。资源又是一个问题。如果您通过一个连接用尽所有带宽，那么添加一个额外的连接不会比在一个连接上拥有两个通道提高性能。此外，每个连接都将使用更多的内存、cpu 和文件句柄，但这可能不是问题，尽管在扩展时可能是一个问题。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-11T11:50:18.113

除了接受的答案：

如果你有一个 RabbitMQ 节点集群，前面有一个负载均衡器，或者一个短期 DNS（使得每次都可以连接到不同的 rabbit 节点），那么一个单一的长期连接将意味着一个应用程序节点专门与单个 RabbitMQ 节点一起工作。这可能会导致一个 RabbitMQ 节点的使用率高于其他节点。

上面提到的另一个问题是发布和消费都是阻塞操作，这会导致消息排队。拥有更多连接将确保 1\. 每条消息的处理时间不会阻塞其他消息 2\. 大消息不会阻塞其他消息。

这就是为什么值得考虑拥有一个小型连接池的原因（考虑到上面提出的资源问题）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-30T20:03:18.480

“每个线程一个通道”*可能*是一个安全的假设（我说可能是因为我自己没有进行任何研究，我没有理由怀疑文档:)）但请注意，在某些情况下会出现这种情况：

如果您将 RPC 与 RabbitMQ[直接回复](https://www.rabbitmq.com/direct-reply-to.html)一起使用，那么您将无法重用*相同*的通道来消费*另一个*RPC 请求。[我在google 用户组](https://groups.google.com/forum/?nomobile=true#!topic/rabbitmq-users/H3MB3Sp2O40)中询问了有关此问题的详细信息，我从 Michael Klishin（他似乎积极参与 RabbitMQ 开发）那里得到的答案是

> 无论哪种方式，直接回复都不意味着与频道共享一起使用。

我已通过电子邮件向 Pivotal 发送电子邮件以更新他们的文档，以解释其背后的工作*原理* `amq.rabbitmq.reply-to`，但我仍在等待答复（或更新）。

因此，如果您想坚持“每个线程一个频道”，请注意，因为这不适用于直接回复。

# c# - 通过挂钩直接将击键发送到另一个进程

> ID：10407769
> 
> 赞同：21
> 
> 时间：2012-05-02T04:32:50.267
> 
> 标签：c#, winapi, c#-4.0, code-injection, sendmessage

我想知道，在摆弄了 SendInput、SendKeys、PostMessage、SendMessage、SendNotifyMessage、keybd_event 等的各种问题之后。要找到那个好...尝试将键盘输入发送到另一个非前台进程是非常挑剔和不可靠的。

我尝试了一种 SendInput 方法，在该方法中我欺骗了 Z 顺序（将当前窗口保持在顶部）并快速将第 3 方窗口置于前台，发送输入，然后将我的窗口重新置于前台。其中最终失败了，而且，不知何故，不知道为什么，设法在我的窗口上进行击键，而不是前台（导致两个窗口之间发送和接收的无限循环，直到我设法关闭进程）。

我尝试了 SendMessage 和 PostMessage 的不同组合。一个用于向下，一个用于向上，因为同时使用向下和向上会导致问题，例如两者都使用 PostMessage，导致密钥在接收窗口上重复。或两者的 SendMessage，这会导致文本输入出现问题，但其他功能正常。keydown 的 SendMessage 和 keyUp 的 PostMessage 对所有函数都有效，但是可靠性率急剧下降，并且增加了关键事件的延迟。只有将 PostMessage 用于 keydown 和 SendMessage 用于 keyup 的组合才能做任何有用的事情，keyup 注册的失败率可能为 5-10%。SentNotifyMessage 也是如此（就可靠性而言，其行为方式与 SendMessage 基本相同）。

所以基本上，我已经走到了尽头，我想知道直接将一个钩子注入目标窗口，并做一些巫术来向它发送击键，绕过消息队列等。这样做的方式会不会触发全局键事件，只会影响目标窗口。唯一的问题是我在注射/钩住等方面一无所知。所以我求助于你，社区。

干吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-29T11:36:42.113

这是一个允许您向后台应用程序发送消息的小代码。例如，要发送“A”字符，只需调用 sendKeystroke(Keys.A)，不要忘记使用命名空间 System.windows.forms 才能使用 Keys 对象。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace keybound
{
class WindowHook
{
    [DllImport("user32.dll")]
    public static extern IntPtr FindWindow(string lpClassName, string lpWindowName);
    [DllImport("user32.dll")]
    public static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);
    [DllImport("user32.dll")]
    public static extern IntPtr PostMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

    public static void sendKeystroke(ushort k)
    {
        const uint WM_KEYDOWN = 0x100;
        const uint WM_SYSCOMMAND = 0x018;
        const uint SC_CLOSE = 0x053;

        IntPtr WindowToFind = FindWindow(null, "Untitled1 - Notepad++");

        IntPtr result3 = SendMessage(WindowToFind, WM_KEYDOWN, ((IntPtr)k), (IntPtr)0);
        //IntPtr result3 = SendMessage(WindowToFind, WM_KEYUP, ((IntPtr)c), (IntPtr)0);
    }
}
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-24T04:18:18.587

您可能不得不解决这个问题，但您可以通过进程发送数据。这可能不适用于您的情况，但这是一个想法。

```
using System;
using System.Runtime.InteropServices;
using System.Diagnostics;

    [DllImport("user32.dll", EntryPoint = "FindWindowEx")]
    public static extern IntPtr FindWindowEx(IntPtr hwndParent, IntPtr hwndChildAfter,          string lpszClass, string lpszWindow);
    [DllImport("User32.dll")]
    public static extern int SendMessage(IntPtr hWnd, int uMsg, int wParam, string lParam);

     static void Send(string message)
     {
         Process[] notepads = Process.GetProcessesByName("notepad");

         if (notepads.Length == 0)
             return;

         if (notepads[0] != null)
         {
             IntPtr child = FindWindowEx(notepads[0].MainWindowHandle, 
                 new IntPtr(0), "Edit", null);

             SendMessage(child, 0x000C, 0, message);
         }
     } 
```

* * *

如果这不起作用，您可以随时执行以下操作：

```
System.Threading.Thread.Sleep(1000);
//User clicks on active form.
System.Windows.Forms.Sendkeys.Sendwait("<Message>"); 
```

# c - MPI调试，分段错误？

> ID：10407771
> 
> 赞同：6
> 
> 时间：2012-05-02T04:32:53.757
> 
> 标签：c, debugging, mpi

编辑：我的问题类似于[C，Open MPI：调用 MPI_Finalize() 时出现分段错误。Segfault 并不总是发生，尤其是在进程数量较少的情况下](https://stackoverflow.com/q/10406438/1351500)，因此无论哪种方式，您都可以回答那个问题。. .

我希望在调试以下代码时获得一些帮助：

```
int main(){
        long* my_local;
        long n, s, f;
        MPI_Init(NULL, NULL);
        MPI_Comm_size(MPI_COMM_WORLD, &comm_sz);
        MPI_Comm_rank(MPI_COMM_WORLD, &my_rank);

    if(my_rank == 0){
        /*  Get size n from user                            */
        printf("Total processes: %d\n", comm_sz);
        printf("Number of keys to be sorted?  ");
        fflush(stdout);
        scanf("%ld", &n);

        /*  Broadcast size n to other processes             */
        MPI_Bcast(&n, 1, MPI_LONG, 0, MPI_COMM_WORLD);

        /*  Create n/comm_sz keys                           
             NOTE! some processes will have 1 extra key if
              n%comm_sz != 0                                */
        create_Keys(&my_local, my_rank, comm_sz, n, &s, &f);
    }

    if(my_rank != 0){
        /* Receive n from process 0                         */
        MPI_Bcast(&n, 1, MPI_LONG, 0, MPI_COMM_WORLD);

        /*  Create n/comm_sz keys                           */
        create_Keys(&my_local, my_rank, comm_sz, n, &s, &f);
    }

        /* The offending function, f is a long set to num elements of my_local*/
        Odd_Even_Tsort(&my_local, my_rank, f, comm_sz);

        printf("Process %d completed the function", my_rank);
        MPI_Finalize();
        return 0;
}

void Odd_Even_Tsort(long** my_local, int my_rank, long my_size, int comm_sz)
{
    long nochange = 1;
    long phase = 0;
    long complete = 1;
    MPI_Status Stat;
    long your_size = 1;

    long* recv_buf = malloc(sizeof(long)*(my_size+1));
    printf("rank %d has size %ld\n", my_rank, my_size);

    while (complete!=0){
        if((phase%2)==0){
            if( ((my_rank%2)==0) && my_rank < comm_sz-1){
            /*  Send right                          */
                MPI_Send(&my_size, 1, MPI_LONG, my_rank+1, 0, MPI_COMM_WORLD);
                MPI_Send(*my_local, my_size, MPI_LONG, my_rank+1, 0, MPI_COMM_WORLD);
                MPI_Recv(&your_size, 1, MPI_LONG, my_rank+1, 0,  MPI_COMM_WORLD, &Stat);
                MPI_Recv(&recv_buf, your_size, MPI_LONG, my_rank+1, 0,  MPI_COMM_WORLD, &Stat);
            }
            if( ((my_rank%2)==1) && my_rank < comm_sz){
            /*  Send left                          */
                MPI_Recv(&your_size, 1, MPI_LONG, my_rank-1, 0,  MPI_COMM_WORLD, &Stat);
                MPI_Recv(&recv_buf, your_size, MPI_LONG, my_rank-1, 0,  MPI_COMM_WORLD, &Stat);
                MPI_Send(&my_size, 1, MPI_LONG, my_rank-1, 0, MPI_COMM_WORLD);
                MPI_Send(*my_local, my_size, MPI_LONG, my_rank-1, 0, MPI_COMM_WORLD);
            }
        }
        phase ++;
        complete = 0;
    }

    printf("Done!\n");
    fflush(stdout);
} 
```

我得到的错误是：

```
[ubuntu:04968] *** Process received signal ***
[ubuntu:04968] Signal: Segmentation fault (11)
[ubuntu:04968] Signal code: Address not mapped (1)
[ubuntu:04968] Failing at address: 0xb
--------------------------------------------------------------------------
mpiexec noticed that process rank 1 with PID 4968 on node ubuntu exited on signal 11 (Segmentation fault). 
```

我很困惑的原因是函数后面的打印语句仍然显示，但是如果我注释掉函数，没有错误。那么，我在哪里得到分段错误？我收到 mpiexec -n 2 ./a.out 的错误，并且“n”大小大于 9。

如果您真的想要整个可运行代码，请告诉我。真的，我并不希望得到准确的答案，而是希望更多的是如何使用 gdb/valgrind 工具来调试这个问题和其他类似的问题（以及如何读取他们的输出）。

（是的，我意识到“排序”功能还没有排序）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T13:36:50.973

这里的问题很简单，但除非您使用调试器或打印出详尽的调试信息，否则很难看到：

查看`MPI_Recv`调用的代码。该`recv_buf`变量应作为参数提供，而不是`&recv_buf`.

```
 MPI_Recv(   recv_buf  , your_size, MPI_LONG, my_rank-1, 0,  MPI_COMM_WORLD, &Stat); 
```

其余的似乎还可以。

# python - python 3.2 pickle.load 随机导致 EOFError

> ID：10407772
> 
> 赞同：3
> 
> 时间：2012-05-02T04:32:59.163
> 
> 标签：python, python-3.x, pickle, eoferror

我遇到了一个非常奇怪的错误。我有一个每天运行的 cronjob：它打开一个腌制文件，加载该文件，然后处理数据。在脚本结束时，它将数据保存到该文件以供第二天处理。

大多数情况下，此脚本运行良好，但有一段时间（我会说一个月两次）打开该文件时，会引发 EOFError：

```
Traceback (most recent call last):
  File "read.py", line 11, in <module>
    SellerDictionarycf=pickle.load(SellerDict)
EOFError 
```

我坚信没有其他进程正在处理该文件，并且我 100% 确定我已写入数据，在读取之前关闭该文件。

我的代码片段在脚本开头读取文件：

```
SellerDict=open('/home/hostadl/SellerDictab','rb')
SellerDictionaryab=pickle.load(SellerDict)
SellerDict.close() 
```

我的代码片段在脚本末尾写入文件：

```
SellerDict=open('/home/hostadl/SellerDictab','wb')
pickle.dump(SellerDictionaryab,SellerDict)
SellerDict.flush()
SellerDict.close() 
```

我保存了损坏文件的副本（读取时引发 EOFError 的文件），然后使用 pickletools 检查它，这是错误：

```
python3.2 -m pickletools -o test.txt SellerDictab
Traceback (most recent call last):
  File "/usr/local/lib/python3.2/runpy.py", line 160, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/usr/local/lib/python3.2/runpy.py", line 73, in _run_code
    exec(code, run_globals)
  File "/usr/local/lib/python3.2/pickletools.py", line 2403, in <module>
    args.indentlevel, annotate)
  File "/usr/local/lib/python3.2/pickletools.py", line 1963, in dis
    for opcode, arg, pos in genops(pickle):
  File "/usr/local/lib/python3.2/pickletools.py", line 1874, in genops
    arg = opcode.arg.reader(pickle)
  File "/usr/local/lib/python3.2/pickletools.py", line 474, in read_unicodestring4
    "remain" % (n, len(data)))
ValueError: expected 2254 bytes in a unicodestring4, but only 0 remain 
```

test.txt 仍然有数据，这里是头部和尾部：

```
head test.txt
    0: \x80 PROTO      3
    2: }    EMPTY_DICT
    3: q    BINPUT     0
    5: (    MARK
    6: X        BINUNICODE 'bradey4357604769'
   27: q        BINPUT     1
   29: ]        EMPTY_LIST
   30: q        BINPUT     2
   32: ]        EMPTY_LIST
   33: q        BINPUT     3

tail test.txt
18933166: e                APPENDS    (MARK at 18930621)
18933167: ]            EMPTY_LIST
18933168: r            LONG_BINPUT 174342
18933173: (            MARK
18933174: X                BINUNICODE 'HP PhotoSmart C4480 All-in-One Printer'
18933217: r                LONG_BINPUT 174343
18933222: G                BINFLOAT   45.0
18933231: G                BINFLOAT   84104.0
18933240: X                BINUNICODE 'Salt Lake City,  UT '
18933265: r                LONG_BINPUT 174344 
```

对于好的文件（没有 EOFError），这里是头部和尾部：

```
head testgood.txt
    0: \x80 PROTO      3
    2: }    EMPTY_DICT
    3: q    BINPUT     0
    5: (    MARK
    6: X        BINUNICODE 'bj8016541577'
   23: q        BINPUT     1
   25: ]        EMPTY_LIST
   26: q        BINPUT     2
   28: (        MARK
   29: ]            EMPTY_LIST

tail testgood.txt
16569368: X                BINUNICODE 'Bought this beautiful dinner set but never opened it, I would love to get rod of it pleas tex with an offer...'
16569483: r                LONG_BINPUT 161843
16569488: J                BININT     20177894
16569493: X                BINUNICODE 'antonio8016497082'
16569515: r                LONG_BINPUT 161844
16569520: e                APPENDS    (MARK at 16569283)
16569521: e            APPENDS    (MARK at 16568508)
16569522: u        SETITEMS   (MARK at 16088830)
16569523: .    STOP 
```

那么这个问题的原因可能是什么（比如字符串数据中的奇怪字符）？我对这个问题一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T22:00:51.580

看起来您的磁盘空间不足（或者由于某种类似原因而无法写入完整的文件）。

一个更惯用的版本（您无需担心调用 close/flush）将是：

```
with open('/home/hostadl/SellerDictab','rb') as SellerDict:
    SellerDictionaryab=pickle.load(SellerDict)

with open('/home/hostadl/SellerDictab','wb') as SellerDict:
    pickle.dump(SellerDictionaryab,SellerDict) 
```

# scala - 在带有 Play 2.0 项目的 Intellij IDEA 11 中找不到 Scala 编译器

> ID：10407777
> 
> 赞同：29
> 
> 时间：2012-05-02T04:33:31.140
> 
> 标签：scala, intellij-idea, sbt, playframework-2.0

我使用典型的 .iml 创建了一个项目`play new`，然后我用来`play idea`生成 .iml 文件。当我将 .iml 文件导入 Intellij IDEA 时，我无法弄清楚如何让编译器库识别。下面是一些截图：

![在此处输入图像描述](../Images/607cfb4c74b643dd863bbf066aa81bf9.png)

![在此处输入图像描述](../Images/aac92b8e6d282928336b50290e816b45.png)

请帮忙！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-02T04:43:12.863

这与 IntelliJ 中的 Scala 设置有点奇怪。目前注册 Scala 发行版的唯一方法是创建一个新项目。

脚步：

1.  文件 > 新建项目 > 从头开始​​创建项目

2.  将所有设置保留为默认值。项目名称可以是任何名称。

3.  在“请选择所需的技术”页面上，选择 Scala。将出现一些 GUI 元素，允许您告诉 IntelliJ 如何找到您的 scala 编译器和库。确保将“级别”选项设置为“全局”。

4.  单击完成。关闭您创建的虚拟项目，然后返回到您的真实项目。您注册的 Scala 编译器现在应该在您的项目设置页面的列表中。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-07T18:51:42.133

一个对我有用的变体：删除 Scala 方面并再次运行“添加框架支持...”。

1.  文件/项目结构/方面

2.  单击 Scala facet，然后单击减号以从模块中删除 Scala facet。单击确定。

3.  右键单击您的项目/模块，“添加框架支持...”，选择 Scala。

4.  输入 Scala 编译器和库的路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T13:32:10.490

我也遇到了这个问题，但是 Chris B 描述的解决方法对我不起作用，因为在我的情况下，“请选择所需的技术”页面上缺少“Scala”。

就我而言，问题似乎是一个不兼容的 Scala 插件。重新安装 Scala 插件后，它运行良好。

# r - 计算连续数字的平均值并乘以其他向量

> ID：10407779
> 
> 赞同：0
> 
> 时间：2012-05-02T04:33:35.617
> 
> 标签：r, loops, matrix, apply

这是数据：

```
 # vector1 dates 
     reading.dates <- as.Date(c("2012-02-13","2012-02-20","2012-02-28"))

     mydat <- data.frame (ID = c("A", "B", "C", "D"), Date1 = c(1:4),
      Date2 = c(5:8), Date3 = c(11:14))

     mydat
  ID Date1 Date2 Date3
1  A     1     5    11
2  B     2     6    12
3  C     3     7    13
4  D     4     8    14 
```

这是我想做的事情：

对于每个 ID 级别，

在 date1 和 date2 之间

计算差异是日期 -

```
reading.dates[2] - reading.dates[1] = 7 = say "Y" 
```

添加相应的日期值和平均值 -

```
 (date1 + date2) / 2 = say "X"
                   then multiply = X * Y

 for indiviudual A:((1 + 5) / 2)* 7 ) 
```

在 date2 和 date3 之间

同样在 date2 和 date3 ....so 到文件末尾，事实上我有更多的变量

reading.dates[3] - reading.dates[2] 时差 8 天

个人 (5+11)/2) * 8

然后添加所有值。

对于 A 来说

```
((1 + 5) / 2)* 7 ) + ((5+11)/2) * 8) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:44:59.717

试试这个代码，我认为它应该适用于任何大小的 data.frame 和日期向量：

```
calculateData <- function(dates, data)
{
    if (length(dates) != (ncol(data)-1))
        stop("The columns and dates doesn't match")

    out <- as.data.frame(NULL)
    for (i in 1:nrow(data))
    {
        x <- NULL
        for (j in 2:length(data))
            x <- c(x, (data[i,j]+data[i,j+1])/2 * difftime(dates[j], dates[j-1], "days"))
        out <- rbind(out, c(data[i,1], sum(x)))
    }

    colnames(out) <- c("ID", "VAL")
    return(out);
}

reading.dates <- as.Date(c("2012-02-13","2012-02-20","2012-02-28"))
mydat <- data.frame (ID = c("A", "B", "C", "D"), Date1 = c(1:4), Date2 = c(5:8), Date3 = c(11:14))

cd <- calculateData(reading.dates, mydat)
print(cd) 
```

您可以更改自己希望返回数据的方式。

```
 > print(cd)
      ID VAL
    1  1  85
    2  2 100
    3  3 115
    4  4 130 
```

# c - 在依赖于父成员的自定义 Gtk+ 小部件中初始化私有数据 (C)

> ID：10407781
> 
> 赞同：2
> 
> 时间：2012-05-02T04:33:44.153
> 
> 标签：c, oop, gtk, gnome, cairo

我正在做一个宠物项目，只是为了学习一些 API。它不是为了具有实用价值，而是作为相对简单的练习，让我在将它们用于任何严肃的事情之前让我对 libpcap、gtk+ 和 cairo 感到舒服。这是一个图形程序，用 C 语言实现，使用 Gtk+ 2.x。它最终会用 pcap 读取帧（目前我只有一个硬编码的测试帧），然后使用 cairo 使用从原始数据包生成的颜色值生成漂亮的图片（在这个阶段，我只是使用 cairo_show_text 打印文本表示帧或数据包）。然后将图片绘制到继承自 GtkDrawingArea 的自定义小部件。

当然，我的第一步是正确掌握 Gtk+ 运行时环境，这样我就可以实现我的小部件。我已经设法使用 cairo 向我的自定义小部件呈现和绘制文本。现在，我认为小部件确实需要私有存储来存储诸如 cairo_t 上下文指针和 GdkRegion 指针之类的东西（我没有计划直接使用 Gdk，但我的研究表明它可能是必要的，以便调用gdk_window_invalidate_region() 强制我的 DrawingArea 在我绘制框架后刷新，更不用说 gdk_cairo_create())。我已经将私有存储设置为全局变量（太可怕了！显然这对于​​ Gtk+ 来说是常规的。我仍然不确定如果我有多个小部件实例这将如何工作，所以也许我没有这样做部分正确。

```
/* private data */
typedef struct _CandyDrawPanePrivate CandyDrawPanePrivate;
struct _CandyDrawPanePrivate {
        cairo_t *cr;
        GdkRegion *region;
};

#define CANDY_DRAW_PANE_GET_PRIVATE(obj)\
        (G_TYPE_INSTANCE_GET_PRIVATE((obj), CANDY_DRAW_PANE_TYPE, CandyDrawPanePrivate)) 
```

这是我的问题：初始化我的私有数据结构中的指针取决于从父级 GtkWidget 继承的成员：

```
/* instance initializer */
static void candy_draw_pane_init(CandyDrawPane *pane) {
        GdkWindow *win = NULL;
        /*win = gtk_widget_get_window((GtkWidget *)pane);*/
        win = ((GtkWidget*)pane)->window;
        if (!win)
            return;

        /* TODO: I should probably also check this return value */
        CandyDrawPanePrivate *priv = CANDY_DRAW_PANE_GET_PRIVATE(((CandyDrawPane*)pane));
        priv->cr = gdk_cairo_create(win);
        priv->region = gdk_drawable_get_clip_region(win);

        candy_draw_pane_update(pane);
        g_timeout_add(1000, candy_draw_pane_update, pane);
} 
```

当我用这个在 candy_draw_pane_init() 期间调用它们的代码替换我的旧代码（在我的事件处理程序期间调用 gdk_cairo_create() 和 gdk_drawable_get_clip_region() 时，应用程序将不再绘制。使用调试器单步执行，我可以看到当我们在 candy_draw_pane_init() 中时，pane->window 和 pane->parent 都是 NULL 指针。这些指针稍后在 Gtk 事件处理循环中有效。这让我相信当我的派生类的“_init()”方法被调用时，继承的成员还没有被初始化。我确信这只是 Gtk+ 运行时环境的本质。

那么这种事情通常是如何处理的呢？我可以向我的事件处理程序添加逻辑来检查 priv->cr 和 priv->region 是否为 NULL，如果它们仍然为 NULL，则调用 gdk_cairo_create() 和 gdk_drawable_get_clip_region()。或者我可以在我的 CandyDrawPane 小部件中添加一个“post-init”方法，并在我调用 candy_draw_pane_new() 之后显式调用它。我敢肯定很多其他人都遇到过这种情况，那么有没有一种干净且传统的方法来处理它？

这是我第一次真正涉足面向对象的 C，所以如果我使用了任何不正确的术语，请见谅。我认为我困惑的一个原因是 Gtk 具有独立的实例和类初始化概念。C++ 可能会在“幕后”做一些类似的事情，但如果是这样，对编码人员来说就不是那么明显了。

我有一种感觉，如果这是 C++，进入 candy_draw_pane_init() 的大部分代码将在类构造函数中，并且任何依赖于已完成构造函数的二次初始化都将进入“Init()”方法（这当然不是语言的特性，而只是常用的约定）。Gtk+ 有类似的约定吗？或者，当这些小部件被实例化时，也许有人可以很好地概述控制流。我对 Gnome 官方文档的质量印象不深。其中大部分内容要么太高级，要么代码中包含错误和拼写错误，要么链接断开或缺少示例。当然，大量使用宏使得即使是我自己的代码也更难遵循（在这方面它让我想起了 Win32 GUI 开发）。简而言之，

为了完整起见，这是我设置自定义小部件的标题：

```
#ifndef __GTKCAIRO_H__
#define __GTKCAIRO_H__ 1

#include <gtk/gtk.h>

/* Following tutorial; see gtkcairo.c */
/* Not sure about naming convention; may need revisiting */
G_BEGIN_DECLS
#define CANDY_DRAW_PANE_TYPE    (candy_draw_pane_get_type())
#define CANDY_DRAW_PANE(obj)    (G_TYPE_CHECK_INSTANCE_CAST ((obj), CANDY_DRAW_PANE_TYPE, CandyDrawPane))
#define CANDY_DRAW_PANE_CLASS(klass)    (G_TYPE_CHECK_CLASS_CAST ((klass)CANDY_DRAW_PANE_TYPE, CandyDrawPaneClass))
#define IS_CANDY_DRAW_PANE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CANDY_DRAW_PANE_TYPE))
#define IS_CANDY_DRAW_PANE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CANDY_DRAW_PANE_TYPE))
// official gtk tutorial, which seems to be of higher quality, does not use this.

// #define CANDY_DRAW_PANE_GET_CLASS(obj)        (G_TYPE_INSTANCE_GET_CLASS ((obj), CANDY_DRAW_PANE_TYPE, CandyDrawPaneClass))

typedef struct {
        GtkDrawingArea parent;

        /* private */
} CandyDrawPane;

typedef struct {
        GtkDrawingAreaClass parent_class;
} CandyDrawPaneClass;

/* method prototypes */
GtkWidget*      candy_draw_pane_new(void);
GType   candy_draw_pane_get_type(void);
void    candy_draw_pane_clear(CandyDrawPane *cdp);

G_END_DECLS
#endif 
```

非常感谢任何见解。我确实意识到我可以使用代码生成 IDE 并更快地完成某些事情，并且可能避免不得不处理其中的一些东西，但是这个练习的重点是很好地掌握 Gtk 运行时，所以我更喜欢手写样板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:23:10.923

这篇文章，[GObject 构造的简单介绍](http://blogs.gnome.org/desrt/2012/02/26/a-gentle-introduction-to-gobject-construction/)，可能会对您有所帮助。以下是我在查看您的代码和问题时想到的一些提示：

*   如果您的`priv->cr`和`priv->region`指针必须在小部件的 GDK 窗口更改时更改，那么您还可以将该代码移动到信号的信号处理程序中`notify::window`。`notify`是一个在对象属性更改时触发的信号，您可以通过将其附加到信号名称来缩小信号发射范围以监听特定属性。

*   您不需要检查`GET_PRIVATE`宏的返回值。查看源代码`g_type_instance_get_private()`，它*可以*在出错的情况下返回`NULL`，但它确实不太可能，并且会向终端打印警告。我的感觉是，如果`GET_PRIVATE`返回，`NULL`那么确实出了点问题，无论如何您将无法恢复并继续执行该程序。

*   您没有将私有存储设置为全局变量。你在哪里声明这个全局变量？我只在全球范围内看到一个`struct`和声明。`typedef`您最有可能做的以及通常的做法是调用`g_type_class_add_private()`函数`class_init`。这会在每个对象中为您的私有结构保留空间。然后当你需要使用它时，`g_type_instance_get_private()`给你一个指向这个空间的指针。

*   该`init`方法等效于 C++ 中的构造函数。该`class_init`方法没有等价物，因为那里完成的所有工作都是在 C++ 的幕后完成的。例如，在一个`class_init`函数中，您可以指定哪些函数覆盖父类的虚函数。在 C++ 中，您只需在类中定义一个与您要覆盖的虚拟方法同名的方法即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:12:41.837

据我所知，您的代码的唯一问题是 GtkWidget ( `widget->window`) 的 GdkWindow 仅在*实现*小部件时设置，这通常在`gtk_widget_show`调用时发生。您可以通过调用来告诉它提前实现[`gtk_widget_realize`](http://developer.gnome.org/gtk3/unstable/GtkWidget.html#gtk-widget-realize)，但文档建议改为连接到[*绘图*](http://developer.gnome.org/gtk3/unstable/GtkWidget.html#GtkWidget-draw)或[*实现*](http://developer.gnome.org/gtk3/unstable/GtkWidget.html#GtkWidget-realize)信号。

# events - 在 Meteor 中停止事件传播

> ID：10407783
> 
> 赞同：7
> 
> 时间：2012-05-02T04:34:22.683
> 
> 标签：events, meteor

我已经`click`使用 Meteor 的[事件映射](http://docs.meteor.com/#eventmaps)连接了一些基本事件。

处理后如何阻止事件传播？

Meteor 的文档[指出](http://docs.meteor.com/#eventmaps)

> 现在，事件处理程序与 jQuery 相连，您收到的事件对象是一个 jQuery 事件对象。

但是，两者似乎都不起作用`return false`。`e.stopPropagation()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T22:45:52.810

目前，stopPropagation 在有限的情况下工作。为了在两个处理程序之间停止传播，必须在不同的模板上指定处理程序，并且在内部和外部模板之间必须有一个介入的 DOM 节点容器。修复程序目前正在开发中，并将进入即将发布的版本。

您能否发布您的代码要点，以便我可以确保您的特定情况得到解决？

作为一种解决方法，您可以尝试使用 jQuery 提供的 e.stopImmediatePropagation()，它应该阻止任何其他处理程序运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-17T18:44:50.650

我自己研究这个问题时遇到了这个问题。Blaze Event Maps 的文档在[此处](http://blazejs.org/api/templates.html#Event-Maps)。

对于流星中的这个问题，您需要根据您的需要考虑 2 个功能：

> `stopPropagation()`
> 
> 防止事件传播（冒泡）到其他元素。在此事件映射和其他事件映射中，仍然会触发与相同元素匹配的其他事件处理程序。
> 
> `stopImmediatePropagation()`
> 
> 防止在此事件上运行所有其他事件处理程序，包括此事件映射中的其他处理程序、冒泡到达的处理程序以及其他事件映射中的处理程序。

我想要的是停止冒泡并停止传播到其他 Meteor 事件处理程序。诀窍也是如此`event.stopImmediatePropagation()`，它并不是上面建议的真正解决方法。

# html - 为什么 CSS 样式会扭曲我的 Google 地图缩放？

> ID：10407785
> 
> 赞同：5
> 
> 时间：2012-05-02T04:34:44.417
> 
> 标签：html, css, google-maps, twitter-bootstrap

这是一个工作版本

[http://jsfiddle.net/tH78C/](http://jsfiddle.net/tH78C/)

这是带有 Bootstrap 样式的损坏版本（缩放小部件不再正确显示）

[http://jsfiddle.net/3sjAU/](http://jsfiddle.net/3sjAU/)

为什么会断？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T13:03:04.083

您还可以为单个地图修复此问题，例如：

```
.googleMapContainer img {
    max-width: none !important;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T04:53:07.377

在 Bootstrap.css**第 69 行** `max-width: 100%;`导致了这个问题。

```
img {
max-width: 100%; <--
vertical-align: middle;
border: 0;
-ms-interpolation-mode: bicubic;
} 
```

您可以删除它，如果需要再次指定一个新类`.newclass {max-width:100%}`并将其添加到图像中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-30T22:22:30.347

我修复了这里列出的内容略有不同。

```
.gm-style img {
    max-width: none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-10T18:50:53.280

无需指定新类只需复制此代码

```
.angular-google-map img {
    max-width: none !important;
} 
```

# c++ - C++ 堆栈程序 Wsing 指针问题数组 new char[len] where len is 2 创建 16 的 char？

> ID：10407786
> 
> 赞同：-2
> 
> 时间：2012-05-02T04:34:45.090
> 
> 标签：c++, pointers, stack, copy-constructor, character-arrays

好的，所以我正在为课程编写一个程序，但我对 c++ 的方式不是很熟悉。我研究了 char 数组，但无法找出问题所在。在分配空间时，似乎没有在所需位置分配空终止符。

我的问题是这个。我正在分配一个数组，如下所示：

```
char* St ="";

if(P.GetSize() > 0)
{
    int StLen = P.GetSize() + 1;
    St= new char[StLen];

    int i;
    for( i = 0;!P.isEmpty() && i < (int)strlen(St); i++)//StLen
    {
        *(St+i)= P.getTop();

        P.Pop();
    }
    *(St+i) = 0;
    std::reverse( St, &St[ strlen( St ) ] ); //flip string to display bottom to top
} 
```

如果 P.GetSize() 为 1，并且我为空终止符添加了一个，则 (int)strlen(St) 行仍然返回 16 的长度，这是我读入的数组的原始长度。我在下面发布了我的工作程序供其他有相同问题的人参考

下面是我的工作解决方案头文件：

```
 //Created By : Timothy Newport
//Created on : 4/26/2012
//===========================================
// NewportStack.h
//============================================
#pragma once

#include <iostream>
#include <iomanip>
#include <fstream>
#include <crtdbg.h>
#include <stack>
#include <string>
using namespace std;

const int MAX_POSTFIX = 30;
void infixToPostfix(const char *infix, char* postfix,ostream& os);
void WriteHeader(ostream& os);
void WriteResults(ostream& os,const char *postfix);

template<class T>
struct Node
{
    T data;
    Node<T> *prev;
};

template<class T>
class NewportStack
{
    private:        
        Node<T> *top; 
        int size;
    public:
        NewportStack();
        NewportStack(const NewportStack <T> & displayStack);
        ~NewportStack();
        void Push(T ch);
        void Pop();
        T getTop() const;
        bool isEmpty() const;
        const int GetSize() const;
        int SetSize(const int prvSize);
        bool checkPresidence(T data,char infix);
        void printStack() const;

        virtual ostream& Output (ostream& os, const NewportStack & S,
                                    const char infix,const char *postfix
                                    ,const int size) const;
};

//------------
//Constructor
//------------
template<class T>
NewportStack<T>::NewportStack()
{
    top = NULL;
    size = 0;
}
template<class T>
void NewportStack<T>::printStack() const
{
    Node<T>* w;
    w = top;
    while( w != NULL )
    {
        cout << w->data;
        w = w->prev;
    }
}
//------------
//Copy Constructor
//------------
template<class T>
NewportStack<T>::NewportStack(const NewportStack<T> &Orig)
{
    if (Orig.top == NULL) // check whether original is empty
    {
        top = NULL;
    }
    else
    {
        Node<T>* newPrev=new Node<T> ;

        Node<T>* cur = Orig.top;
        newPrev->data = cur->data;
        top = newPrev;
// Now, loop through the rest of the stack
        cur = cur->prev;        
        while(cur != NULL )
        {
            newPrev->prev = new Node<T>;
            newPrev = newPrev->prev;            
            newPrev->data = cur->data;  
            cur = cur->prev;
        } // end for        
        newPrev->prev = 0;
        cur = 0;

    } // end else
    size = Orig.size;
} // end copy constructortor

//------------
//DeConstructor
//------------
template<class T>
NewportStack<T>::~NewportStack()
{
    Node <T>* w = top;

    while(top!=NULL)
    {
        delete w;
        top=top->prev;
    }
    size =0;
}
//------------
//getsize
//------------
template<class T>
const int NewportStack<T>::GetSize() const
{
    return size;
}
//------------
//SetSize
//------------
template<class T>
int NewportStack<T>::SetSize(const int prvSize)
{
    return size = prvSize;
}
//------------
//Push
//------------
template<class T>
void NewportStack<T>::Push(T d)
{
    Node <T>* w= new (std::nothrow) Node<T>;

    if ( !w ) 
    {
       cerr << "Error out of memory in Push\n";
       exit (1);
    }
    w->data =d;

    if( top == NULL )
    {
        w->prev = NULL;
    }
    else
    {   
        w->prev = top;
    }
    top = w;
    w = NULL;
    size++; 
}

//------------
//Pop
//------------
template<class T>
void NewportStack<T>::Pop()
{   
    if( top == NULL )
        return;
    Node<T>* w = top;
    top = top->prev;
    delete w;
    w = NULL;
    size--;
}
//------------
//getTop
//------------

template<class T>
T NewportStack<T>::getTop() const
{
    if (isEmpty ()) 
        exit(0);
    return top->data;
}

//------------
//isEmpty
//------------
template<class T>
bool NewportStack<T>::isEmpty() const
{
    if(top == NULL)
    {
        return true;
    }
    return false;
}

//------------
//checkPresidence
//------------
template<class T>
bool NewportStack<T>::checkPresidence(T data,char infix)
{
    switch(infix)
    {
        case '+': case '-':
            switch(data)
            {
                case '+': case '-': case '*': case '/': case '%':
                         return true;
                default: return false;
            }           
        case '*': case '/': case '%': 
            switch(data)
            {
                case '*': case '/': case '%':
                       return true;
                default: return false;
            } 
        default: return false;
    }
}

//------------
//OutPut
//------------
template<class T>
ostream& NewportStack<T>::Output(ostream& os, const NewportStack<T>& S,
                                    const char infix,const char *postfix
                                    ,const int size) const
{
    NewportStack<T> P ( S );//***INVOKED COPY CONSTRUCTOR*****

    char* St = new char[21];

    int i;
    if(P.GetSize() > 0)
    {
        int StLen = P.GetSize();

        for( i = 0;!P.isEmpty();i++)
        {
            *(St+i)= P.getTop();

            P.Pop();
        }
        *(St+i) = 0;
        std::reverse( St, &St[ strlen( St ) ] ); //flip string to display bottom to top
    }
    else
        *(St+0) = 0;

    os <<left<<setw(20) << infix ;

    for(i = 0;i < (int)strlen(St);i++)
    {
        os << St[i];        
    }
    os << right<< setw(21-i);

    for(i = 0;i <size;i++)
    {
        os << postfix[i];       
    }
    os << endl;

    if(St != NULL)
    {
        delete[] St;
    }

    return os;                                      
} 
```

CPP文件在这里：

```
//Created By : Timothy Newport
//Created on : 4/26/2012
//===========================================
// NewportStackTester.cpp
//============================================
#include "NewportStack.h"
//------------
//Main
//------------
int main()
{
    //////////////////////////////////////////
    ///  Tester Part Two Test The class ///
    //////////////////////////////////////////

    char arr[] = "a+b-c*d/e+(f/g/h-a-b)/(x-y)*(p-r)+d";
    //char arr[] = "a+b-c*d/e+(f/g)";

    int len = (int) strlen(arr);
    char *postfix = new char[len+1];

    ofstream outputFile;
    outputFile.open("PostFix.txt");

    outputFile << "Infix is : " << arr<<endl<<endl;
    WriteHeader(outputFile);

    _strupr( arr); ///**** convert the string to uppercase ****

    infixToPostfix(arr,postfix,outputFile); 

    outputFile.close();

    system("notepad.exe PostFix.txt");

    return 0;
}
//------------
//infixToPostfix
//------------
void infixToPostfix(const char *infix, char* postfix, ostream & os) 
{   
    NewportStack <char> P;
    int len=strlen(infix);
    len += 1;
//  cout << "infix in infixToPostfix: " << infix << endl; 
    int pi = 0;
    int i=0;
    char ch;

   while( i < len && *(infix+i) !='\0')
   {
       ch = *(infix+i);

      if(ch >='A' && ch <='Z' )
      {
            postfix[pi++]= ch;
      }
      else if(ch =='+' ||ch =='-'||ch =='*'||ch =='/'||ch =='%')
      {       
            while(!P.isEmpty() && P.getTop() != '(' 
                && P.checkPresidence(P.getTop(), ch ) )
            {               
                postfix[pi++]= P.getTop();
                postfix[pi] = 0;                
                P.Pop();
            }

            P.Push(ch);         
       }
      else if(infix[i] == '(')
      {
            P.Push(infix[i]);
      }
      else// if(infix[i]==')')
      {
        while(!P.isEmpty() && P.getTop() != '(')
        {
            postfix[pi++] = P.getTop();
            P.Pop();
        }
        P.Pop(); //****remove the '(' from the stack top.
      }

     P.Output(os, P, ch, postfix, pi); // display after each read

     i++;    
   }
   // end of infix empty stack
   while(!P.isEmpty() )
   {
        postfix[pi++]= P.getTop();
        P.Pop();
   }
   postfix[pi] = 0; //add null terminator at the end of the string.
   //cout << "postfix 104: " << postfix << endl;
 P.Output(os,P,*infix,postfix,pi);// display final line
 WriteResults(os,postfix);
}
//------------
//WriteHeader
//------------
void WriteHeader(ostream& os)
{
    os <<left<< setw(20)<< "Input Characters" << setw(20)<< "Stack Item" << setw(20)
                << "PostFix" <<endl <<setw(20)<< "----------------"<< setw(20) 
                << "----------" << setw(20)<< "-------" <<endl;
}
//------------
//WriteResults
//------------
void WriteResults(ostream& os,const char *postfix)
{
    os << endl<< "The Final postfix is: " << postfix <<endl;
} 
```

你们帮了我很多！我一直在弄乱它，直到我发现主要问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T04:37:40.237

`new char[StLen];`不初始化内存。您应该使用`std::string`而不是像这样手动处理字符数组。

如果您被迫手动使用字符数组，您可以编写自己的[自动内存管理包装器来处理释放](https://stackoverflow.com/questions/8839943/why-does-the-use-of-new-cause-memory-leaks-in-c/8840302#8840302)`'\0'`，并且您可以通过在第一个索引处写入一个字符来将内存初始化为以空字符结尾的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T04:42:21.480

我首先想到的是，除非您绝对确定它是一个以零结尾的字符串，否则您不能在 char 数组上使用 strlen()。在您的循环条件中，您应该检查 (i < (StLen - 1)) 而不是调用 strlen()。strlen() 对数组长度一无所知；它只是在达到 '\0' 值的字符之前报告字节数。在您的平台上检查“man strlen”，或者，如果不可用，请在网络上搜索“man strlen”。实际上，我有点惊讶这并没有因为访问冲突而彻底崩溃。

[编辑：听听 R. Martinho Fernandes。您正在使用 C 约定和 C 标准库处理字符串。在 C++ 中有更好、更安全的方法来做这件事，除非你的导师告诉你不这样做。]

[编辑]：如果由于某种原因你知道你将传递一个未初始化的 char 数组给 strlen()，那么将第一个字节设置为 '\0' 就像另一张海报建议的那样会让 strlen() 开心。但是再看看你的代码，我真的怀疑 strlen() 是你想要在这里做的。我认为这会给你一个逻辑错误。有关循环条件，请参阅我上面的建议。

就初始化 C 风格零终止字符串的正确方法而言，您希望使用值为 '\0' 的 memset()，如

```
memset(St, '\0', StLen); 
```

我相信原型在 string.h 中。这将减少您以后弄乱字符串完整性的方式，至少在您第一次写入时是这样。始终初始化内存是一个很好的常规做法，但对于以零结尾的字符串尤其重要。

如果您要对以零结尾的字符串做更多的工作，一个好的经验法则是“str”函数通常是不安全的，而“strn”函数在可用且可行时是首选。当然，“strn”函数通常更容易使用，因为您必须跟踪缓冲区大小。有关差异，请参见 strcpy() 和 strncpy() 或 strcat() 和 strncat() 的手册条目。但同样，我认为 strlen() 在这种情况下甚至不是你想要的。

# c# - 我应该使用哪种设计模式来循环步骤

> ID：10407787
> 
> 赞同：1
> 
> 时间：2012-05-02T04:34:51.640
> 
> 标签：c#, asp.net, design-patterns

我要在循环中运行一定数量的语句（正在执行.exe）。

```
ForEach(object obj in ListOfVersions)
{
  Step 1: call Exe1 Args=obj.somevalues
  Log Step 1 completed for obj

  Step 2: call Exe2 Args=obj.somevalues
  Log Step 2 completed for obj

  Step 3: call Exe3 Args=obj.somevalues
  Log step 3 completed for obj
}

Step 4: call Exe4 
```

是否有任何特定的设计模式可用于上述情况。

编辑：

> 每个 Exe 都不同，并且使用不同的参数执行不同的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:57:44.930

这将是命令模式的一个很好的候选者。

# javascript - 数组有时显示长度为 0

> ID：10407788
> 
> 赞同：1
> 
> 时间：2012-05-02T04:35:17.643
> 
> 标签：javascript, backbone.js

我有一个非常奇怪的问题。我有一个 Backbone 集合，我正在使用 where 方法在集合中查找与某个属性匹配的模型。我的问题是结果不一致。

我有一个joinedGoalList，它跟踪用户加入的目标。假设这个集合包含两个 ID 分别为 1 和 3 的目标。当用户访问 /goals/3 时，应显示一条消息，说明用户已加入目标

我在访问 /goals/3 时遇到问题，一半时间显示消息，另一半时间不显示消息。

奇怪的是，这个问题只发生在我的远程服务器上，而不是我的本地主机上。

在我的代码中，我在joinedGoalList 中查询ID 为3，如果它匹配，我知道matches 数组必须大于0，因此我呈现了显示用户已加入目标的消息。

这是代码（joinedGoalList 是一个 Backbone 集合：

```
 console.log(joinedGoalList);
  var matches = joinedGoalList.where({id: this.model.get("id")});
  console.log(matches);
  console.log(matches.length);
  if (matches.length > 0) {
    console.log("the matches length is > 0");
    this.renderLeaveGoal();
  } else {
    console.log("the matches length is 0");
    this.renderJoinGoal();
  } 
```

以下是 的结果`console.log(joinedGoalList)`，以下是结果（它们是一致的）：

```
child
_byCid: Object
_byId: Object
_callbacks: Object
length: 2
models: Array[2]
__proto__: ctor 
```

如您所见，长度为 2。其中一个对象的 ID 为 1，另一个对象的 ID 为 3。这在整个页面加载过程中是一致的。

当我对 ID 为 3 的对象在数组上进行匹配时，会出现不一致。某些页面加载找到匹配项，而其他页面加载未找到匹配项。

在我的远程服务器上的结果`console.log(matches.length)`是 0 或 1，但在我的本地主机上，结果始终是 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:45:27.737

我很确定事件的顺序是这样的：

1.  您调用[`fetch`](http://documentcloud.github.com/backbone/#Collection-fetch)集合以从服务器加载数据。
2.  您调用`console.log(joinedGoalList)`，这在某些浏览器中是异步的。
3.  您调用[`joinedGoalList.where`](http://documentcloud.github.com/backbone/#Collection-where)并找到一个空集合。
4.  `fetch`来自**1**的调用返回并填充集合。
5.  `console.log`来自**2**的调用执行并打印出填充的集合，该调用将具有对的引用，`joinedGoalList`并且该引用现在将指向填充的集合。

当您在本地执行此操作时，4 中的 AJAX`fetch`会**很快**返回，因此第**4**步发生在**第 3**步之前，并且一切都按照您期望的方式运行。

你有几个选择：

1.  `fetch`有一个`success`回调：

    > **选项**散列`success`和`error`回调将作为`(collection, response)`参数传递。

    因此，您可以使用`success`回调来延迟正在调用的任何内容，`where`直到服务器响应并填充集合。

2.  `fetch`重置集合：

    > 当模型数据从服务器返回时，集合将重置。

    并将[`reset`](http://documentcloud.github.com/backbone/#Collection-reset)_

    > 用新的模型列表（或属性哈希）替换集合，最后触发单个`"reset"`事件。

    因此，您可以侦听该`"reset"`事件并使用该事件来触发正在调用的任何内容`where`。

# python - python：返回生成器的单行函数

> ID：10407790
> 
> 赞同：0
> 
> 时间：2012-05-02T04:35:42.683
> 
> 标签：python, generator

我想以更简洁的方式编写下面的函数：

```
def sum_list(l):
    x = 0
    for i in l:
        x += i
    return x 
```

我知道我可以轻松做到这一点：

```
def sum_list(l):
    return sum(l) 
```

但我一直在修改生成器和列表理解，以更好地理解 python。

所以我尝试了：

```
def sum_list(l):
    x = 0
    return (x += i for i in l) 
```

但这只是返回生成器对象。我记得在某处读到它应该在 sum() 之类的操作或类似的操作中使用，但我似乎再也找不到那篇文章了。

有人可以向我指出一些涵盖这一点的文献的方向，或者可能花时间解释一些围绕这种性质的陈述的基础知识吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T04:45:21.433

我想你想要`reduce`- [http://docs.python.org/library/functions.html#reduce](http://docs.python.org/library/functions.html#reduce)

```
def sum_iterable(a):
    return reduce(lambda x,y: x+y, a, 0) 
```

基本上，reduce 允许您将可迭代或列表“折叠”成一个值。对于应该返回单个值的东西，您不会想要生成器表达式。

# android - 安卓下载进度

> ID：10407791
> 
> 赞同：1
> 
> 时间：2012-05-02T04:35:50.650
> 
> 标签：android

我开发了一个应用程序，它在进度条中显示下载进度。

```
while ((chunkBytes = httpInputStream.read(outputByte, 0, 1024)) != -1) {

                bytesRead = bytesRead + chunkBytes;
                // write contents to the file
                fileOutputStream.write(outputByte, 0, (int) chunkBytes);
                // publish the progress of downloading.. 
                publishProgress((int)((bytesRead)*100/fileSize));

            } 
```

但是，我想要做的是 - 而不是 58/100 ..（次要进度？）想在该进度下方显示 3.5 mb/5.5 mb ....（下载的 MB/总 MB）..我有试图改变次要进度但无济于事..还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:22:43.123

如果要更改进度条中显示的内容，则必须`setProgressNumberFormat()`使用字符串参数调用，该参数表示您希望看到的内容，例如，“%1d/%2d”将显示默认的“20/100”消息，而“%1d MB of %2d MB”将显示您要询问的内容。“%1d”是您当前的进度值，“%2d”是您的最大值，您可能会更改为`setMax(int max)`。

# c# - 如何在 Web 应用程序中使用本机库方法？

> ID：10407792
> 
> 赞同：2
> 
> 时间：2012-05-02T04:36:07.847
> 
> 标签：c#, c++, asp.net, c

我有许多带有 C API 的本机库，其中包含我想在 Web 应用程序中使用的功能。这样做有哪些选择（框架/语言）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:11:29.507

要从 C#（包括 ASP.Net）调用本机 C 函数，请使用 P/Invoke。它的存在正是为了这个目的。

教程在这里： http: [//msdn.microsoft.com/en-us/library/aa288468 (v=VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa288468(v=VS.71).aspx)

# php - 使用临时文件缓存内容的 PHP 问题

> ID：10407795
> 
> 赞同：1
> 
> 时间：2012-05-02T04:36:29.207
> 
> 标签：php, caching, static

我一直在努力为自己创建一个快速的 twitter 小部件以供自己重复使用，它只是一些简单的东西，它可以缓存来自公共 api 的数据。由于 twitter 只允许某个时间段内的 X 请求，并且我一直在共享主机上对此进行测试，因此我经常用完请求并且 twitter 拒绝我的请求。因此，在写入更新的缓存文件之前，我首先检查我的请求是否被拒绝。

不幸的是，我似乎不时丢失此文件，因为我经常看到“临时文件未写入”消息。只有当文件不存在时才会出现。

这是完整的php函数：

```
function getTweets($num)
{
    $cfile = sys_get_temp_dir().'/e1z'. $type . md5 ( 'something' );

    if (is_file ( $cfile ) == false) {
        $cfile_time = strtotime ( '1983-04-30 07:15:00' );
    } else {
        $cfile_time = filemtime ( $cfile );
    }    

    $difference = strtotime ( date ( 'Y-m-d H:i:s' ) ) - $cfile_time;

    if ($difference >= 100) {

        $tags = array("created_at", "text", "screen_name", "profile_image_url"); // twitter names
        $local = array("time", "msg", "user", "image"); // local names

        $reader = new XMLReader();
        $url = 'http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=boriskourt&include_rts=true&count=' . $num;

        $headers = get_headers($url, 1);
        if ($headers[0] == 'HTTP/1.0 400 Bad Request'){

                if (is_file ( $cfile ) == true) {
                        $returner = file_get_contents ( $cfile );                   
                        touch ( $cfile );
                        file_put_contents ( $cfile, strval($returner) );
                        $returner = file_get_contents ( $cfile );
                        return  $returner;
                } else {
                        $returner = "<li><span>Temp file not written</span></li>";
                        return  $returner;
                }

        } else { 
            $reader->open($url);

            $i = 0;
            $k = 1;

            while ($i < $num)
            {
                $j = 0;

                while ($reader->read() && $j < 4) // run through each tweet
                {
                    if ($reader->nodeType == XMLReader::ELEMENT && $reader->name == $tags[$j])
                    {
                        while ($reader->read())
                        {
                            if ($reader->nodeType == XMLReader::TEXT && $j == 0)
                            {
                                if ($k) {
                                $tweets[$i][$local[$j]] = $reader->value;
                                $j++;
                                $k=0;}
                                else {$k=1;}
                                break;
                            }
                            else if ($reader->nodeType == XMLReader::TEXT)
                            {
                                $tweets[$i][$local[$j]] = $reader->value;
                                $j++;
                                break;
                            }
                        }
                    }
                }

                $i++;
            }

            $returner = "";

            foreach ($tweets as $value) {
                if ($value[user] != 'fugataquintet') {
                    $returner .= '<li class="retweet">';
                } else {
                    $returner .= '<li>';
                }
                $messager = $value[msg];
                $messager = " ".preg_replace( "/(([[:alnum:]]+:\/\/)|www\.)([^[:space:]]*)"."([[:alnum:]#?\/&=])/i", "<a href=\"\\1\\3\\4\" target=\"_blank\">"."\\1\\3\\4</a>", $messager);
                $messager =  preg_replace( "/ +@([a-z0-9_]*) ?/i", " <a href=\"http://twitter.com/#!/\\1\" target=\"_blank\">@\\1</a> ", $messager);
                $messager = preg_replace( "/ +#([a-z0-9_]*) ?/i", " <a href=\"http://twitter.com/search?q=%23\\1\" target=\"_blank\">#\\1</a> ", $messager);
                $returner .= '<span>'.$messager.'</span><a class="datereplace" href="http://twitter.com/#!/fugataquintet" title="'.$value[time].'">'.$value[time].'</a></li>';
            }

            touch ( $cfile );
            file_put_contents ( $cfile, strval($returner) );
            return  $returner;    
        }    
    } else {    
        $returner = file_get_contents ( $cfile );
        return  $returner;    
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:49:15.277

发布的代码在处理文件系统时遇到了典型的竞争条件；OWASP 有一个描述：[https ://www.owasp.org/index.php/File_Access_Race_Condition:_TOCTOU](https://www.owasp.org/index.php/File_Access_Race_Condition:_TOCTOU)

当您在共享主机上时，其他人可能会定期清理系统临时目录。如果您需要更永久的缓存，请尝试将文件保存在其他位置。

以下代码检查文件是否存在，如果不存在，则创建它并保持打开状态。这可以防止文件被另一个进程（例如临时目录空）删除，直到函数退出。

```
<? //PHP 5.4+
function getTweets($num){
    //This will keep the file open, 
    //so that the file cannot be deleted during when this function executes.
    $file = new \SplFileObject(
        \sys_get_temp_dir() . '/e1z' . $type . \sha1('something'),
        'c+' //
    );

    if ($file->getSize() !== 0 && 
        \time() - $file->getMTime() < 100)
    {
        $contents = '';
        foreach($file as $line){
            $contents .= $line;
        }
        return $contents;
    }

    //Get data from twitter
    //Write it to $file
    //return data from twitter
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:44:52.853

你能试试这个简化版的过期检查吗？

```
if(is_file($cfile) == false OR filemtime($cfile) < time() - 100)
{
  // fetch here
}
else
{
  // load from cache here
} 
```

编辑：我还制作了一个精简版，可以获取

```
function CacheTweetsXML($num)
{
  $cfile = sys_get_temp_dir().'/e1z'. $type . md5 ( 'something' );
  if(is_file($cfile) == false OR filemtime($cfile) < time() - 100)
  {
    // fetch here
    $url = 'http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=boriskourt&include_rts=true&count=' . $num;
    if($xml = @file_get_contents($url) and @file_put_contents($cfile,$xml))
    {
      return $xml;
    }
    elseif(is_file($cfile)) // can't load, return from cache
    {
      return file_get_contents($cfile);
    }
    else // cant load and isn't cached, return false
    {
      return false;
    }
  }
  else // load from cache here
  {
    return file_get_contents($cfile);
  }
} 
```

也不要忘记清理 $type

# ios - 关于分页和从一页循环移动到另一页

> ID：10407799
> 
> 赞同：0
> 
> 时间：2012-05-02T04:36:59.003
> 
> 标签：ios, objective-c, iphone, paging

在我的应用程序中，我使用 4 页的分页概念和 UIScrollView。它工作正常，但我的问题是 **1。** 我想在第 1 页结尾显示第 2 页（某些部分），在第 2 页结尾显示第 3 页（某些部分），在第 3 页结尾显示第 4 页（某些部分）。

**2.** 现在我可以再次从第 1 页移动到第 2 页，第 2 到第 3 页，第 3 到第 4 页，如果想移动到第 1 页意味着我必须像 4-3-2-1 这样的页面，但我想像 1 一样循环移动页面-2-3-4-1-2-3-.....那样

示例代码

```
 NSMutableArray *controllers = [[NSMutableArray alloc] init];
for (unsigned i = 0; i < kNumberOfPages; i++)
{
    [controllers addObject:[NSNull null]];
}
self.viewControllers = controllers;

// a page is the width of the scroll view
scrollView.pagingEnabled = YES;
scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * kNumberOfPages, 1);
scrollView.showsHorizontalScrollIndicator = NO;
scrollView.showsVerticalScrollIndicator = NO;
scrollView.scrollsToTop = NO;
scrollView.delegate = self;

pageControl.numberOfPages = kNumberOfPages;
pageControl.currentPage = 0;

// pages are created on demand
// load the visible page
// load the page on either side to avoid flashes when the user starts scrolling
[self loadScrollViewWithPage:0];
[self loadScrollViewWithPage:1]; 
```

}

```
- (void)loadScrollViewWithPage:(int)page {
if (page < 0) return;
if (page >= kNumberOfPages) return;

// replace the placeholder if necessary
WhatsNewViewConroller *controller = [viewControllers objectAtIndex:page];
if ((NSNull *)controller == [NSNull null]) {
    controller = [[WhatsNewViewConroller alloc] initWithPageNumber:page];
    [viewControllers replaceObjectAtIndex:page withObject:controller];
    controller.delegateController = self;
}

// add the controller's view to the scroll view
if (nil == controller.view.superview) {
    CGRect frame = scrollView.frame;
    frame.origin.x = frame.size.width * page;
    frame.origin.y = 0;
    controller.view.frame = frame;
    [scrollView addSubview:controller.view];
} 
```

}

```
- (void)scrollViewDidScroll:(UIScrollView *)sender {
// We don't want a "feedback loop" between the UIPageControl and the scroll delegate in
// which a scroll event generated from the user hitting the page control triggers updates from
// the delegate method. We use a boolean to disable the delegate logic when the page control is used.
if (pageControlUsed) {
    // do nothing - the scroll was initiated from the page control, not the user dragging
    return;
}

// Switch the indicator when more than 50% of the previous/next page is visible
CGFloat pageWidth = scrollView.frame.size.width;
int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
pageControl.currentPage = page;

// load the visible page and the page on either side of it (to avoid flashes when the user starts scrolling)
[self loadScrollViewWithPage:page - 1];
[self loadScrollViewWithPage:page];
[self loadScrollViewWithPage:page + 1];

// A possible optimization would be to unload the views+controllers which are no longer visible 
```

}

这里正在更改页面

```
- (IBAction)changePage:(id)sender {
int page = pageControl.currentPage;

// load the visible page and the page on either side of it (to avoid flashes when the user starts scrolling)
[self loadScrollViewWithPage:page - 1];
[self loadScrollViewWithPage:page];
[self loadScrollViewWithPage:page + 1];

// update the scroll view to the appropriate page
CGRect frame = scrollView.frame;
frame.origin.x = frame.size.width * page;
frame.origin.y = 0;
[scrollView scrollRectToVisible:frame animated:YES];

// Set the boolean used when scrolls originate from the UIPageControl. See scrollViewDidScroll: above.
pageControlUsed = YES; 
```

}

任何人都可以提供帮助或建议。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:27:24.673

当您加载新页面时，而不是使用 page-1、page 和 page+1；使用 (page -1)%4 , page%4 和 (page+1)%4

# c# - 如何在 SSIS 包中使用变量数据集两次

> ID：10407803
> 
> 赞同：1
> 
> 时间：2012-05-02T04:37:52.537
> 
> 标签：c#, sql-server-2008, ssis

我使用记录集目标在变量中创建数据集。后来在脚本组件（源）中使用只读变量，但是当我尝试在其他脚本组件（源）中使用这个变量时，得到空数据集。我认为第一个脚本组件阻止了我的变量，不明白如何修复它。

```
VariableDispenser variableDispenser = (VariableDispenser)this.VariableDispenser;
        variableDispenser.LockForRead("User::dsOrganization");
        IDTSVariables100 vars;
        variableDispenser.GetVariables(out vars);

        OleDbDataAdapter oleDA = new OleDbDataAdapter();
        DataTable dt = new DataTable();
        var ds = vars["User::dsOrganization"].Value;
        oleDA.Fill(dt, ds);
        foreach (DataRow dr in dt.Rows)
        {
            Output0Buffer.AddRow();
            Output0Buffer.Organization = dr["Organization"].ToString();
            Output0Buffer.OrganizationCode = dr["OrganizationCode"].ToString();
            Output0Buffer.SPOrganizationCode = dr["SPOrganizationCode"].ToString();
            Output0Buffer.SPOrganizationMember = dr["SPOrganizationMember"].ToString();
        }
        vars.Unlock(); 
```

两个脚本组件使用相同的代码第一个组件获得 44 行第二个 - 无

如果将 Script Component 更改为 Script Task 一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:25:50.053

问题是当您尝试第二次循环遍历它时，枚举器的指针位于记录集的末尾。在将记录集加载到数据集之前尝试克隆记录集。

但是，应避免将大型数据集加载到变量中。尝试评估和优化您的流程设计。

# c++ - 无法在 cpp 中绑定运算符 <<

> ID：10407805
> 
> 赞同：0
> 
> 时间：2012-05-02T04:38:01.377
> 
> 标签：c++, operator-overloading

大师，

给定两个定义如下的类（省略了属性、方法和实现）：

```
struct A { friend std::ostream& operator << (std::ostream& o, const A& c); };
struct B { friend std::ostream& operator << (std::ostream& o, const B& c); }; 
```

我使用的类如下：

```
ln 1: A *arrayA = new A[10];
ln 2: B *arrayB = new B[10];
ln 3: /* some codes to initialize arrayA and arrayB */
ln 4: for (int i = 0; i < 10; i++) { std::cout << arrayA[i]; } // this work 
ln 5: for (int j = 0; j < 10; j++) { std::cout << arrayB[j]; } // this complain 
```

我的编译器抱怨 B 类为

```
error: cannot bind 'std::ostream {aka std::basic_ostream<char>}' lvalue 
to 'std::basic_ostream<char>&&'

../lib/gcc/mingw32/4.6.1/include/c++/ostream:581:5 error initializing argument 1 
of 'std::basic_ostream<_CharT, _Traits>& 
std::operator<<(std::basic_ostream<_CharT, _Traits>&&, const _Tp&) 
 [with _CharT = char, _Traits = std::char_traits<char>, _Tp = ClsB] 
```

我不知道第 5 行有什么问题。注释掉主程序的第 5 行可以很好地编译，这意味着我对 B 类的 operator<< 的定义在语法上是正确的。请给任何指示，谢谢。

任汉

*   平台：赢7
*   MinGW32：版本 2011-11-08
*   GNU Make 3.82
*   G++ 版本 4.6.1

[编辑 1] 我的程序实际上有两个以上的类，并且我的所有类都有 operator<< 重载以进行调试。我对所有类都使用了相同的签名（带有适当的第二个参数）。只有 B 类给出此错误。

[编辑 2] 我的课程的完整版：

```
struct CPeople { // this is class B
int age;
int ageGroup;

int zipcode;
int communityID;
int areaID;
int familyID;
int contactID;
int contactType; /* P, D, E, M, H, W */
int state;
int vaccinated; /* 0 = unvac, 1 = vaccinated */

friend std::ostream& operator<< (std::ostream& o, const CPeople& c)
{
    o << "CPeople (" << static_cast<void const *>(&c) << "): "
      << "\tAge Group: "   << c.ageGroup
      << "\tZip Code: "    << c.zipcode
      << "\tCommunityID: " << c.communityID
      << "\tArea ID: "     << c.areaID
      << "\tFamily ID: "   << c.familyID
      << "\tSchool Type: " << c.contactType
      << "\tContact ID: "  << c.contactID
      << "\tState: "       << c.state
      << "\tVaccination: " << c.vaccinated;
    return (o << std::endl);
}
};

struct CWorkGroup : public CContact { // this is class A
/* to which community this member belongs */
std::vector<long> member_com;
CStatistics statistics;

friend std::ostream& operator<< (std::ostream& o, const CWorkGroup& c)
{
    o << "CWorkGroup (" << static_cast<void const *>(&c) << "): ";
    o << "avflag = " << c.avflag << "; member: " << c.size();
    for (int i = 0; i < c.size(); i++)
    {
        o << "; (" << i << " = " << c.member[i] << ")";
    }
    o << std::endl;
    return (o << c.statistics);
}
}; 
```

用法一：

```
for (int i = 0; i < cntWG; i++) { std::clog << WG[i]; } std::clog << std::endl; 
```

用法 B（这是错误）：

```
CPeople *people_total = new CPeople[cntTotalPop];
for (pIdx = 0; pIdx < cntTotalPop; pIdx++)
{
    std::cout << people_total[pIdx];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:41:04.007

类和结构需要以分号结尾，因此在两行末尾添加分号：

```
struct A { friend std::ostream& operator << (std::ostream& o, const A& c); };
struct B { friend std::ostream& operator << (std::ostream& o, const B& c); }; 
```

# python - 为什么 .find() 在 python 3 中不能与 urllib.request.urlopen() 一起使用？

> ID：10407806
> 
> 赞同：2
> 
> 时间：2012-05-02T04:38:02.490
> 
> 标签：python, python-3.x

尝试从 python 2 中的 urllib 转换到 python 3。我可以使用 .urlopen() 输出 html 源，但我无法使用 .find() 方法对其进行索引。

```
import urllib.request
fh = urllib.request.urlopen("http://stackoverflow.com")
html = fh.read()
fh.close()

print(html.find("<p>")) 
```

我收到类型错误。我知道它正在返回一个字节数组，但我对它的实际含义很模糊。我已经尝试了一些这样的答案[，](https://stackoverflow.com/questions/5713183/basic-fetching-of-a-urls-html-body-with-python-3-x)这些答案都是死胡同。我的问题是：

在 python 3 中是否有一种简单的本地方法可以将 URL 的页面源作为字符串获取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T04:54:19.227

使用`html.decode('utf-8')`（或任何编码）来获取`str`您可以使用的对象`.find()`。

`.decode()`用于获取一组平面字节并将它们（通过反转字符编码，例如 UTF-8）转换为一串实际代码点（可显示的符号）。

# macos - Mac OS X 沙盒和磁盘仲裁

> ID：10407807
> 
> 赞同：6
> 
> 时间：2012-05-02T04:38:20.930
> 
> 标签：macos, sandbox, diskarbitration

当您对应用进行沙箱处理时，似乎没有使用 DVD 驱动器的权利。

有没有人想出一种访问它的方法，特别是磁盘仲裁通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T22:14:45.397

光盘录制应该“正常工作”，没有任何权利。你在哪个操作系统版本上运行？

# ruby - Ruby - rails - 在ajax之后销毁实例变量

> ID：10407808
> 
> 赞同：0
> 
> 时间：2012-05-02T04:38:25.490
> 
> 标签：ruby, ruby-on-rails-3

完成一个 ajax 调用后如何销毁实例变量。在我的应用程序中，数据是通过 ajax 返回的，并且经常会进行新的调用，之前调用的一些值与一些新值混合返回。这算是设计流程吗？还是应该通过寻找破坏名副其实/价值的方法来动脑筋？

示例控制器 -

```
 def something
    @result = Stuff.find_all_by_requestor_name
    respond_to do |format|
    format.html { render :partial => 'list'}
    format.js
    end
    return @result 
    end 
```

我注意到几次 ajax 请求混淆了值。我在这里误会了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:57:16.493

就您的问题而言，实例变量无法在调用之间存活，每个 http 调用都独立于其他调用，并且变量不会存活到下一次调用。但是我注意到下面的代码中有一些奇怪的地方

```
def something
    @result = Stuff.find_all_by_requestor_name
    respond_to do |format|
        format.html { render :partial => 'list'}
        format.js
    end
    return @result 
end 
```

查看上面的代码，我不明白为什么要从获取 AJAX 请求的控制器函数返回值。我想你想要的是以下

```
def something
    @result = Stuff.find_all_by_requestor_name
    respond_to do |format|
        format.html { render :partial => 'list'}
        format.js { render :json => @result }
    end
end 
```

你应该`render`在`format.js`块内而不是最后返回。希望有帮助

# c# - 单击按钮动态插入多条记录

> ID：10407809
> 
> 赞同：0
> 
> 时间：2012-05-02T04:38:30.670
> 
> 标签：c#, asp.net, sql-server-2005, stored-procedures

我有 2 张桌子，比如....

> 在这里，管理员根据课程和学期将科目分配给院系......

1] 分配_主题

```
Faculty_Id      varchar(20)     
Course_Id       varchar(20)     
Semester        varchar(20)     
Subject_Id      varchar(20)     
Subject_Name    varchar(50)     
Time            varchar(50)

INSERT INTO Assign_Subjects Values("F1","BCA",2,"DS","Data Structure","10-11")
INSERT INTO Assign_Subjects Values("F1","BCA",2,"C","C Programming","11-12")
INSERT INTO Assign_Subjects Values("F1","BCA",1,"QB","Q Basic","1-2")
INSERT INTO Assign_Subjects Values("F2","BCA",3,"SS","System Structure","10-11")
INSERT INTO Assign_Subjects Values("F2","BCA",3,"AC","Accountancy","11-12") 
```

> 在这里，教师为学生插入标记

2]考试结果

```
Result_Id           int(Auto no and PK)
Enroll_Number       varchar(50) Checked
Student_Name        varchar(100)    Checked
Course_Id           varchar(50) Checked
Semester            varchar(50) Checked
Subject_Id          varchar(50) Checked
Subject_Name        varchar(50) Checked
MarksObtained       numeric(18, 0)  Checked
Exam_Type           varchar(50) Checked 
```

> 现在我的问题是如何在**单击单按钮时****将所有分配的科目标记插入**到**Exam_Result中**

 **我给出了大致的想法我想要的是....

> 在**FillResult.aspx中，我希望所有主题名称带有由管理员****和按钮（onClick 事件）**分配的文本框（或任何其他可能的方式，如 gridview/dalalist 等）来填充标记......

注意：主题显示为根据分配而不是固定数量的主题，它可能是 3 或 5 或更多

所以，我怎么可能这样做......？？

> 通过gridview，编辑模板或存储过程？？？？

欢迎所有的回答......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:42:43.683

**如果您不知道要输入分数的科目的确切编号 - 我们应该如何生成查询来做到这一点？**

始终向您展示如何防止 SQL 注入攻击，您将 SQL 放入存储过程中：

```
create PROCEDURE [dbo].[pr_GetAssignedSubjectsByFacultyIdAndSemester]
@FacultyID int,
@Semester nvarchar(MAX)
AS
BEGIN
SET NOCOUNT ON;
SELECT [Faculty], [Subjects],[CreatedBy],[CreatedDate],[ModifiedBy],[ModifiedDate]
 FROM [dbo].[tblNotSure]
WHERE [FacultyID] = @FacultyID
AND [Semester] = @Semester
AND [IsDeleted] = 0
END 
```

然后在代码中我们调用存储过程，注意参数化命令，这可以防止 SQL 注入攻击。例如，假设我们在学期 ddl/文本框中键入（或使用 FireBug 编辑元素值） 1 UNION SELECT * FROM Master.Users - 执行此临时 SQL 可以返回 SQL 用户帐户列表，但通过参数化命令传递避免问题：

```
public static aClassCollection GetAssignedSubjectsByFacultyIdAndSemester(int facultyId, string semester)
{
var newClassCollection = new aClassCollection();
    using (var connection = new SqlConnection(ConfigurationManager.ConnectionStrings["sqlConn"].ConnectionString))
    {
        using (var command = new SqlCommand("pr_GetAssignedSubjectsByFacultyIdAndSemester", connection))
        {
            try
            {
                command.CommandType = CommandType.StoredProcedure;
                command.Parameters.AddWithValue("@facultyId", facultyId);
                command.Parameters.AddWithValue("@semester", semester);
                connection.Open();
                SqlDataReader dr = command.ExecuteReader();
                while (dr.Read())
                {
                    newClassCollection.Add(new Class(){vals = dr["vals"].ToString()});
                }
            }
            catch (SqlException sqlEx)
            {
             //at the very least log the error
            }
            finally
            {
             //This isn't needed as we're using the USING statement which is deterministic                    finalisation, but I put it here (in this answer) to explain the Using...
                connection.Close();
            }
        }
    }

    return newClassCollection;
} 
```**

# ruby-on-rails - 让这个 link_to 帮助器调用视图获取路由错误

> ID：10407810
> 
> 赞同：0
> 
> 时间：2012-05-02T04:38:42.107
> 
> 标签：ruby-on-rails, rails-routing, link-to-function

我有一个 users_controller 里面有这个功能：

```
def process_csv
puts 'processing csv file'
end 
```

然后我有一个带有“link_to”标签的 show.html.erb 文件。

```
<%= link_to 'Click HERE to open file', @user.image.url  %><br/><br/><br/>
<%= label_tag(:q, "Parse CSV File:") %><br/>
<%= link_to 'Parse CSV', {:controller => "users", :action => "process" } %>
<% end %> 
```

这是我的 rake 路由的输出：

```
 process_users GET    /users/process(.:format)     users#process
    users GET    /users(.:format)             users#index
          POST   /users(.:format)             users#create
 new_user GET    /users/new(.:format)         users#new
 edit_user GET    /users/:id/edit(.:format)    users#edit
     user GET    /users/:id(.:format)         users#show
          PUT    /users/:id(.:format)         users#update
          DELETE /users/:id(.:format)         users#destroy
 listings GET    /listings(.:format)          listings#index
          POST   /listings(.:format)          listings#create
  new_listing GET    /listings/new(.:format)      listings#new
  edit_listing GET    /listings/:id/edit(.:format) listings#edit
  listing GET    /listings/:id(.:format)      listings#show
          PUT    /listings/:id(.:format)      listings#update
          DELETE /listings/:id(.:format)      listings#destroy 
```

这是我的 routes.rb 文件

```
 resources :users do
  collection do
     get:process
 end
 end 
```

资源：列表

当我单击 show.html.erb 文件中的链接时。我希望被定向到 process.html.erb 视图。相反，我得到一个错误：

```
Routing Error
No route matches [GET] "/assets" 
```

我已经尝试了很多切换事物的组合，但是目前还没有任何效果。所以我想知道是否有人可以帮我一把。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:49:31.043

该错误是由“资产”引起的，而不是由“路由”引起的，因此请确保您正确使用“资产管道”。

如果您处于“开发”模式，请将所有 image/js/css 放在“app/assets”文件夹下。

如果您处于“生产”模式，请确保您已这样做：`bundle exec rake assets:precompile`

有关资产管道的更多信息，请参阅： http: [//guides.rubyonrails.org/asset_pipeline.html#in-production](http://guides.rubyonrails.org/asset_pipeline.html#in-production)

顺便说一句，由于您使用的是 RESTful 路由，请从以下位置修改您的“link_to”：

```
<%= link_to 'Parse CSV', {:controller => "users", :action => "process" } %> 
```

至：

```
<%= link_to 'Parse CSV', process_csv_users_path %> 
```

同时，给对应的动作起一个更易读的名字：

```
resources :users do
  collection do
    get :process_csv   
  end
end 
```

在你的控制器中：

```
class UsersController ...
  def process_csv
    puts "bla bla bla"
  end
end 
```

# java - 在 Spring MVC 中使用 Tiles

> ID：10407817
> 
> 赞同：1
> 
> 时间：2012-05-02T04:39:50.543
> 
> 标签：java, spring-mvc, tiles

我只是想用 Spring MVC 学习 Tiles。我以前没用过瓷砖。请找到随附的代码：

**servlet.xml**

`<context:component-scan base-package="org.sparsham.sparshammanagement.controllers" /> <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver"> <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView" /> <property name="prefix" value="/WEB-INF/pages"/> <property name="suffix" value=".jsp"></property> </bean> <bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer"> <property name="definitions"> <list> <value>/WEB-INF/tiles.xml</value> </list> </property> </bean>`

* * *

**我的 Tiles.xml**

`<tiles-definitions> <definition name="base.definition" template="/WEB-INF/pages/layout.jsp"> <put-attribute name="title" value="" /> <put-attribute name="header" value="/WEB-INF/pages/layout/header.jsp" /> <put-attribute name="menu" value="/WEB-INF/pages/layout/menu.jsp" /> <put-attribute name="body" value="" /> <put-attribute name="footer" value="/WEB-INF/pages/layout/footer.jsp" /> </definition> </tiles-definitions>`

* * *

然后我创建了布局页眉和页脚。

```
@Controller
@RequestMapping("/")

public class Default {

    @RequestMapping("index")
    public String index(){
        return "Sparsham";
    }

    @RequestMapping("*")
    public String unhandled(){
        return "error404";
    }
} 
```

* * *

你下一步怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:52:07.243

您已定义默认布局。现在您需要在瓷砖配置文件中为您的视图定义定义。喜欢：

```
<definition name="Sparsham" extends="base.definition">
     <put-attribute name="title" value="Contact Manager" />
     <put-attribute name="body" value="/WEB-INF/jsp/Sparsham.jsp" />
</definition> 
```

# php - PHP 和 Ajax 在 Internet Explorer 中不起作用

> ID：10407818
> 
> 赞同：1
> 
> 时间：2012-05-02T04:40:01.890
> 
> 标签：php, ajax, internet-explorer

所以，我在我的网站上开发了一个实时搜索功能，但毫不奇怪，它似乎在 Internet Explorer 中不起作用。我已经测试过，它在 IE9 和 IE8 中不起作用，我知道它在 Chrome 和 Fire Fox 中可以正常工作。我使用的 Ajax 来自 W3Schools 网站，它似乎在那里工作。它甚至可能是我使用的 PHP，但我不确定问题是什么。我只是猜测它是 Ajax 还是 PHP。有谁知道怎么了？如果有帮助，它位于 -RETRACTED URL-。谢谢！

我的 HTML 文档中的 Ajax：

```
<script type="text/javascript">
var keyword = ''; // add this!
var city = ''; // add this!
var state = ''; // add this!
var country = ''; // add this!

function showHint(keyword, city, state, country) {
    var xmlhttp;
    if(keyword.length == 0 && city.length == 0 && state.length == 0) {
        document.getElementById("txtHint").innerHTML = "";
    }
    if(window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else { // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function () {
        if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("txtHint").innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", "gethint.php?keyword=" + keyword + "&city=" + city + "&state=" + state + "&country=" + country, true);
    xmlhttp.send();
}
</script> 
```

用于实时搜索的 PHP：

```
<?php
//get the parameters from URL
$keyword = $_GET['keyword'];
$city = $_GET['city'];
$state = $_GET['state'];
$country = $_GET['country'];
$query = mysql_query("SELECT * FROM users WHERE ClinicName LIKE '%$keyword%' AND LocationCity LIKE '%$city%' AND LocationRegion LIKE '%$state%' AND LocationCountry LIKE '%$country%' ORDER BY ClinicName ASC") or die(mysql_error());

if($query){//If query successfull
    if(mysql_affected_rows()!=0){//and if atleast one record is found
        echo '
        <tr>
            <th>Clinic Name</th>
            <th>Phone Number</th>
            <th>Location</th>
        </tr>';
        while($rows = mysql_fetch_array($query)){ //Display the record
            $replace = str_replace(" ", "-", $rows['ClinicName']);
            echo '
            <tr>
                <td><a href="clinic.php?userid='.$rows['UserID'] .'">'.$rows['ClinicName'].'</a></td>
                <td>'.$rows['Phone1'].'-'.$rows['Phone2'].'-'.$rows['Phone3'].'</td>
                <td>'.$rows['LocationCity'].', '.$rows['LocationRegion'].' '.$rows['LocationZip'].', '.$rows['LocationCountry'].'</td>
            </tr>';
        }
    }
    else {
        echo 'No Results for:<br />Clinic Name: '.$keyword.'<br />City: '.$city.'<br />State: '.$state.'<br />Country: '.$country.'';//No Match found in the Database
    }
}
else {
    echo 'Parameter Missing in the URL';//If URL is invalid
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:51:02.453

IE不会让你innerHTML一个表格。您可以在此处找到此信息：[Microsoft](http://support.microsoft.com/kb/239832)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:47:08.617

试试这个：

*将变量 d 定义为日期：* `var d = new Date();`

*然后添加到 GET*

```
}
xmlhttp.open("GET", "gethint.php?keyword=" + keyword + "&city=" + city + "&state=" + state + "&country=" + country + "&q=" + d, true);     
xmlhttp.send(); 
} 
```

# jquery - 来自标题属性的自定义工具提示功能

> ID：10407820
> 
> 赞同：0
> 
> 时间：2012-05-02T04:40:26.170
> 
> 标签：jquery

我有一个从标题创建工具提示的功能。我试图将此函数包装在一个 if 语句中，该语句在返回工具提示之前检查标题长度。但它似乎不想返回任何东西。那么使用 if 语句有没有更好的方法来做到这一点？

```
$(document).ready(function() {

 if ($('#menu-headermenu a').attr('title').length == 0) {

 return null;

} else {

//Select all anchor tag with rel set to tooltip
$('#menu-headermenu a').mouseover(function(e) {

    //Grab the title attribute's value and assign it to a variable
    var tip = $(this).attr('title');    

    //Remove the title attribute's to avoid the native tooltip from the browser
    $(this).attr('title','');

    //Append the tooltip template and its value
    $(this).append('<div id="tooltip"><p>Take me to:<p><div class="tooltipcontent"' + tip + '</div></div>');     

    //Set the X and Y axis of the tooltip
    $('#tooltip').css('top', e.pageY + 10 );
    $('#tooltip').css('left', e.pageX + 20 );

    //Show the tooltip with faceIn effect
    $('#tooltip').fadeIn('500');
    $('#tooltip').fadeTo('10',0.8);

}).mousemove(function(e) {

    //Keep changing the X and Y axis for the tooltip, thus, the tooltip move along with the mouse
    $('#tooltip').css('top', e.pageY + 10 );
    $('#tooltip').css('left', e.pageX + 20 );

}).mouseout(function() {

    //Put back the title attribute's value
    $(this).attr('title',$('div.tooltipcontent').html());

    //Remove the appended tooltip template
    $(this).children('div#tooltip').remove();

});

}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:48:58.320

您是否考虑过使用现有的解决方案？（例如[http://jquery.bassistance.de/tooltip/demo/](http://jquery.bassistance.de/tooltip/demo/)）

至于您的问题，您可以在选择器中添加一个过滤器：`$('#menu-headermenu a[title]')`

这应该使得只有具有标题属性的元素才会附加事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T04:48:19.267

就个人而言，在准备好文档时，我会直接绑定我的鼠标悬停功能而不进行完整性检查。如果您添加 Ajax 调用等，将来会更加灵活：

```
$(document).ready(function() {
  $('#someWrapper').on('mouseover', '#menu-headermenu a', function(e) {
    // do stuff
  });
}); 
```

其中#someWrapper 是投影为包含相关锚链接的任何元素。它不一定是带有 ID 的元素，如果需要，它甚至可以是“body”，尽管通常可以在大多数文档中识别出适当的 div。

所有这一切都是说“嘿，#someWrapper ......听听匹配'#menu-headermenu a'的元素上发生的鼠标悬停，好吗？”

'if' 语句逻辑已经要求您为匹配选择器清点 DOM，因此它可能比仅将事件绑定到 #someWrapper 在计算上更昂贵。

[更新]

我确实错过了部分问题，但我的答案的原始部分仍然存在......在函数内部，我会在那里对标题的存在或标题的空字符串进行完整性检查。

```
var title = $(this).attr('title');
if (title !== undefined && title !== "") { /* etc */ } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T04:50:32.530

假设您不能只使用 [title] ...

您需要将 if 检查包装在每个语句中。

```
$('#menu-headermenu a').each(function(){
  if($(this).attr('title').length === 0){
    ...
  }
}); 
```

# php - php login mysql 查询重新加载登录页面（MAMP）

> ID：10407824
> 
> 赞同：0
> 
> 时间：2012-05-02T04:41:21.973
> 
> 标签：php, sql

我已经阅读了大多数解决方案，其中登录时会不断重新加载登录页面，但它仍然对我不起作用。我尝试登录不同的浏览器（遗憾的是这里只有 safari 和 firefox）。即使我没有输入用户名或密码，也没有错误，尽管代码中有一个 errorStr 会打印出错误。无论如何，它都会不断重新加载。

我是 php 编程的初学者，我正在尝试访问一个旧的 php 网站。

这是连接 sql server 的 myfunctions.php。

```
class mysql_db
{

    function openCityPassSQL()
{
        $dbhostname="localhost:8889";
        $dbusername="root";
        $dbpassword="root";         
                    $dbname="ticketing";

        MYSQL_CONNECT($dbhostname,$dbusername,$dbpassword) OR DIE("Unable to connect to database...");
        @mysql_select_db("$dbname") or die("Unable to select database..."); }

    function executeQuery($query)
    {
        return MYSQL_QUERY($query);
    }

    function executeUpdate($query)
    {
        return MYSQL_QUERY($query);
    }

    function numRows($result)
    {
        return MYSQL_NUM_ROWS($result);
    }

    function fetchRow($result)
    {
        return mysql_fetch_array($result);
    }

    function closeSQL()
    {
        MYSQL_CLOSE();
    }
} 
```

这是我的 index.php

```
<?
ini_set('display_errors','1');

$found_msisdn = false;

$temp = $HTTP_COOKIE_VARS["User-Identity-Forward-msisdn"];

if (($temp != null) && ($temp != "")) {
$len = strlen($temp);
$msisdn = "+";
for ($i=0;$i<$len;$i++) {
    if (($i % 2) == 1)
        $msisdn = $msisdn . $temp[$i];
}

$found_msisdn = true;
}     

if (!$found_msisdn) {
//get SMART's MSISDN
$network    = $HTTP_SERVER_VARS["HTTP_X_NETWORK_INFO"];

//GPRS,639218025160,515031808225161,10.155.9.87,unsecured

$info   = explode(",", $network);
$msisdn = $info[1];

if (($msisdn != null) && ($msisdn != "")) {
    $msisdn = "+" . $msisdn;
    $found_msisdn = true;
}
}

if ($found_msisdn) {
$msisdn = urlencode($msisdn);
}

if (preg_match("/vnd.wap.wml/",$_SERVER['HTTP_ACCEPT'])){ 
header("Location: http://wap.surfshop.net.ph/citypass/index.wml?msisdn=$msisdn"); 
exit; 
} 

require ("myfunctions.php");
session_start();
$_showform=true;

$errorStr="";
$_username="";
$_password="";

$conn=new mysql_db();
$conn->openCityPassSQL();

if (isSet($a_exit) && $a_exit=="1") 
{
session_unregister("verified_user");
$_showform=false;
header("Location: index.php");
}

if (isSet($submitform))
{
$_username=$username;
$_password=$password;

//if (!nameIsValid($_username)) $errorStr=$errorStr.($errorStr!=""?"<br>":"")."Invalid User ID.";
//if (empty($_password) || !passwordIsValid($_password)) $errorStr=$errorStr.($errorStr!=""?"<br>":"")."Invalid Password.";

if (empty($_username)) {
    $errorStr = "Invalid username<br>";
}
if (empty($_password)) {
    $errorStr .= "Invalid password<br>";
}
if (empty($errorStr))
{
    $tid = 0;

    $query="SELECT Password, PASSWORD('$password') FROM tblUser WHERE UserID='$_username'";
    //echo "query:$query<br>";
    $result=$conn->executeQuery($query);
    $numRows=$conn->numRows($result);

    if ($result && $numRows>0) {
        $RS=mysql_fetch_array($result);
        $pass1=$RS[0];
        $pass2=$RS[1];
        if ($pass1 == $pass2) {
            $query = "SELECT EstabID FROM tblEstabUser WHERE UserID='$_username'";
            $result=$conn->executeQuery($query);
            $RS=mysql_fetch_array($result);
            $tid = $RS[0];

            $admin = false;
            $query = "SELECT UserID FROM tblAdminUser WHERE UserID='$_username'";
            //echo "query:$query<br>";
            $result=$conn->executeQuery($query);
            $numRows=$conn->numRows($result);
            if ($numRows > 0) {
                $admin = true;
                $tid = $numRows[1];             //initialize to a value for links to work
            }

            $verified_user = array($_username, $tid, ($admin?"1":"0"));
            session_register("verified_user");

            $errorStr = "Welcome $_username!<br>";  
            $_showform = false;
            header("Location: index2.php");
        }
        else {
            $errorStr = "Invalid username/password (PA)<br>";
        }
            }
    else {
        $errorStr = "Invalid username/password (NR)<br>";
    }
}
} 
```

index2.php

```
session_start();
$_showform=true;
if (!session_is_registered("verified_user"))
{
    $_showform=false;
    header("Location: index.php");
}
else
{    
list($username,$estabid,$admin)=$verified_user;
if (empty($username))
{
    $_showform=false;
    header("Location: index.php");
}

}

if ($_showform)
{
?>
<html>
<head>
<title><?=$applicationName?></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body bgcolor="#FFFFFF" text="#000000" topmargin="0" leftmargin="0" marginheight="0" marginwidth="0">

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
  <td>
<?include("header.php");?>
  </td>
</tr>

<?
    //if ($errorStr!="")
    if ($username!="")
    {
?>
            <tr>
            </tr>
            <tr>
              <td><font face="Verdana" size="2">&nbsp;</font></td>
            </tr>
<?
    }
?>

<tr>
  <td>
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>

        <td valign="top">
<?include("menu_in.php");?>
        </td>

        <td valign="top">
           <table width="100%" border="0" cellpadding="0" cellspacing="0">

             <tr>
               <td>
               </td>
             </tr>

           </table>
        </td>

          </tr>
        </table>
      </td>
    </tr>

  </table>
</body>
</html>

<?
}
?> 
```

我真的不知道错误是什么，但我猜脚本只是旧的，我的 MAMP 无法处理查询？我只是一名实习生，任何帮助将不胜感激。

这些是我遇到的以下错误：

> 注意：未定义索引：第 6 行 /Applications/MAMP/htdocs/ticketing/index.php 中的 User-Identity-Forward-msisdn
> 
> 注意：未定义索引：第 21 行 /Applications/MAMP/htdocs/ticketing/index.php 中的 HTTP_X_NETWORK_INFO
> 
> 注意：未定义的偏移量：第 26 行 /Applications/MAMP/htdocs/ticketing/index.php 中的 1
> 
> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已在 /Applications/MAMP/htdocs/ticketing 中发送（输出开始于 /Applications/MAMP/htdocs/ticketing/index.php:6） /index.php 第 45 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:39:08.980

您提供的错误信息清楚地表明

```
$HTTP_COOKIE_VARS["User-Identity-Forward-msisdn"];
$HTTP_SERVER_VARS["HTTP_X_NETWORK_INFO"]; 
```

完全是空的。

请用

```
print_r($HTTP_COOKIE_VARS);
print_r($HTTP_SERVER_VARS); 
```

检查值是否存在。如果这些数组中有值，那么您的第三个问题

```
Notice: Undefined offset: 1 in /Applications/MAMP/htdocs/ticketing/index.php on line 26 
```

会自动解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:27:16.113

on which page it redirects do you know?

Note: SELECT UserID FROM tblAdminUser WHERE UserID='$_username' (i know its not relevant but is USERID col belongs to username?)

# android - 如何在android的自定义对话框中显示webview？

> ID：10407831
> 
> 赞同：1
> 
> 时间：2012-05-02T04:42:03.550
> 
> 标签：android, dialog, webview

我正在尝试在自定义对话框中显示一个 webview，它在对话框之外工作。下面是我的代码以及自定义对话框 xml 的 xml。请给我你的专业知识，谢谢。

```
public class TellaFriend extends Activity {

static final int CUSTOM_DIALOG_ID = 0;
TextView customDialog_TextView;
EditText customDialog_EditText;
Button customDialog_Update, customDialog_Dismiss;;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button buttonStartDialog = (Button) findViewById(R.id.button1);
    buttonStartDialog.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            showDialog(CUSTOM_DIALOG_ID);
        }
    });
}

private Button.OnClickListener customDialog_UpdateOnClickListener = new Button.OnClickListener() {
    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        String sharedFact = customDialog_EditText.getText().toString();
    }
};

private Button.OnClickListener customDialog_DismissOnClickListener = new Button.OnClickListener() {
    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        dismissDialog(CUSTOM_DIALOG_ID);
    }
};

@Override
protected Dialog onCreateDialog(int id) {
    // TODO Auto-generated method stub
    Dialog dialog = null;
    switch (id) {
    case CUSTOM_DIALOG_ID:

        dialog = new Dialog(this);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setCancelable(false);
        dialog.setContentView(R.layout.customlayout);

        WebView webView = (WebView) findViewById(R.id.webview);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setBackgroundColor(Color.BLACK);
        webView.loadUrl("file:///android_asset/Help.html");

        webView.setWebViewClient(new GameClient());

        customDialog_Update = (Button) dialog.findViewById(R.id.submit);
        customDialog_Dismiss = (Button) dialog.findViewById(R.id.buttonone);

        customDialog_Update.setOnClickListener(customDialog_UpdateOnClickListener);     customDialog_Dismiss.setOnClickListener(customDialog_DismissOnClickListener);
        break;
    }
    return dialog;
}

public class GameClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
}
} 
```

和xml

```
<?xml version="1.0" encoding="utf-8"?>
RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="290dp" android:background="#ffffff" 
android:layout_height="350dp" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="15dp"
    android:orientation="vertical"
    android:padding="2dp" >

    <ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollbarSize="12dip"
    android:scrollbarThumbVertical="@drawable/scrollbar_vertical_thumb"
    android:scrollbarTrackVertical="@drawable/scrollbar_vertical_track" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <WebView android:id="@+id/webview" android:layout_width="fill_parent"  
    android:layout_height="fill_parent" />

        </LinearLayout>        

            <Button
                android:id="@+id/backbtn" android:layout_marginTop="20dp"
                android:layout_width="165dp"
                android:layout_height="57dp"
                android:layout_gravity="center_horizontal"           
                android:text="Call and Talk with a buyer now"
                android:textColor="#000000"
                android:textSize="13sp"
                android:textStyle="bold" />

            <Button
                android:id="@+id/submit" android:layout_marginTop="20dp"
                android:layout_width="165dp"
                android:layout_height="57dp"
                android:layout_gravity="center_horizontal"                 
                android:text="Email Buyer now to confirm selling details"
                android:textColor="#000000"
                android:textSize="13sp"
                android:textStyle="bold" />       
    </LinearLayout>
</ScrollView>     
</RelativeLayout>
<RelativeLayout 
android:layout_width="290dp" android:background="@drawable/abg" 
android:layout_height="350dp" android:layout_margin="1dp">
<Button
    android:id="@+id/buttonone" 
    android:layout_width="25dp"
    android:layout_height="25dp"
    android:layout_alignParentRight="true"
    android:layout_margin="5dp"
    android:background="@drawable/round_button_background"
    android:gravity="center_vertical|center_horizontal"
    android:onClick="cancelActivity"
    android:text="X" 
    android:textColor="#ffffff"
    android:textSize="13sp"
    android:textStyle="bold" />

</RelativeLayout>
</RelativeLayout> 
```

错误日志是

```
05-02 10:00:04.922: E/AndroidRuntime(488): FATAL EXCEPTION: main
05-02 10:00:04.922: E/AndroidRuntime(488): java.lang.NullPointerException
05-02 10:00:04.922: E/AndroidRuntime(488):  at com.kk.TellaFriend.TellaFriend.onCreateDialog(TellaFriend.java:91)
05-02 10:00:04.922: E/AndroidRuntime(488):  at android.app.Activity.onCreateDialog(Activity.java:2472)
05-02 10:00:04.922: E/AndroidRuntime(488):  at android.app.Activity.createDialog(Activity.java:881)
05-02 10:00:04.922: E/AndroidRuntime(488):  at android.app.Activity.showDialog(Activity.java:2547)
05-02 10:00:04.922: E/AndroidRuntime(488):  at android.app.Activity.showDialog(Activity.java:2514)
05-02 10:00:04.922: E/AndroidRuntime(488):  at com.kk.TellaFriend.TellaFriend$3.onClick(TellaFriend.java:45)
05-02 10:00:04.922: E/AndroidRuntime(488):  at android.view.View.performClick(View.java:2408)
05-02 10:00:04.922: E/AndroidRuntime(488):  at android.view.View$PerformClick.run(View.java:8816)
05-02 10:00:04.922: E/AndroidRuntime(488):  at android.os.Handler.handleCallback(Handler.java:587)
05-02 10:00:04.922: E/AndroidRuntime(488):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-02 10:00:04.922: E/AndroidRuntime(488):  at android.os.Looper.loop(Looper.java:123)
05-02 10:00:04.922: E/AndroidRuntime(488):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-02 10:00:04.922: E/AndroidRuntime(488):  at java.lang.reflect.Method.invokeNative(Native Method)
05-02 10:00:04.922: E/AndroidRuntime(488):  at java.lang.reflect.Method.invoke(Method.java:521)
05-02 10:00:04.922: E/AndroidRuntime(488):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-02 10:00:04.922: E/AndroidRuntime(488):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-02 10:00:04.922: E/AndroidRuntime(488):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T05:40:30.343

您需要调用 findViewById 进行对话。

```
WebView webView = (WebView) dialog.findViewById(R.id.webview); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T04:58:45.603

您的 XML 中没有 ID 为 的 Button `buttonone`。这就是空指针的来源。

编辑：改变

`customDialog_Dismiss = (Button) dialog.findViewById(R.id.buttonone);`

到

`customDialog_Dismiss = (Button) dialog.findViewById(R.id.backbtn);`

在`onCreateDialog`这应该解决它。

编辑：啊，多个错误。确实正如@veer 所说：对话框`findViewById`是正确的使用调用，而不是封闭`Activity`的。

# android - 安卓视频直播

> ID：10407833
> 
> 赞同：0
> 
> 时间：2012-05-02T04:42:10.727
> 
> 标签：android, video-streaming, http-live-streaming, live-streaming, http-streaming

我遇到了大麻烦，我无法在我的 android videoview 中播放 m3u8 文件，但在 iPhone 中很容易。我用谷歌搜索并访问了几个论坛，所有人都说这是不可能的。但我尝试了 vitamio(http://vov.io/vitamio/)，它可以流式传输 5 到 6 秒。那是有机会流式传输的，但是如何？

如果 android 中的 m3u8 流式传输很难，如何从 IPcamera 流式传输到我的 android 设备？

如果有人知道这件事，请回复，我非常感谢您的回复，因为我为此花费了更多时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:46:28.767

我尝试过具有 Android 版本 2.1、2.2、2.3、2.3.6 和 4.0 的设备。vitamio 应用程序可以在所有设备中流式传输 url 5 到 6 秒，除了具有 android 版本 4.0 的设备 HTC onex。

下面给出了我调用简单 m3u8 url 的代码。非常感谢 yorkw。

活动：

```
 package com.livestrean;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.MediaController;
import android.widget.Toast;
import android.widget.VideoView;

public class streamplayer extends Activity {
    /** Called when the activity is first created. */

     private String path = "An m3u8 Url";

     private VideoView mVideoView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try
        {
            setContentView(R.layout.surface_view_1);
            mVideoView = (VideoView) findViewById(R.id.surface_view);

                mVideoView.setVideoURI(Uri.parse(path));                
                mVideoView.setMediaController(new MediaController(this));
                mVideoView.requestFocus();              
                mVideoView.postInvalidateDelayed(100);        
                mVideoView.start();

        }catch (Exception e) {

            Toast.makeText(streamplayer.this,"Error Occured:- " + e.getMessage(),Toast.LENGTH_SHORT).show();
        } 
    }
} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <VideoView 
        android:id="@+id/surface_view" 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"/>

</LinearLayout> 
```

谢谢

# .net - 从另一个类线程修改标签表单

> ID：10407834
> 
> 赞同：1
> 
> 时间：2012-05-02T04:42:11.390
> 
> 标签：.net, vb.net, visual-studio, visual-studio-2008

我使用线程发送电子邮件。我需要在标签中写下文本，让用户知道电子邮件何时以预算形式发送。

' Option Strict 关闭

课堂形式上的功能。

```
Public Sub ChangeLblText(ByVal msg As String) ' LblIconos.modifiers = public (In form)
     lblIconos.Text = msg
End Sub 
```

新线程的声明类。（全球宣布。）

```
Public TasksPresu As New TasksClassPresu() 
```

表单“Presupuestos”的图标触发线程

```
 Dim Thread1 As New System.Threading.Thread(AddressOf TasksPresu.TaskEmail)
    Thread1.Start() 
```

类触发线程

```
Public Class TasksClassPresu
    Sub TaskEmail()
    'trigger label change?
     Presupuestos.ChangeLblText("Test")
    end sub
End Class 
```

我在没有工作的情况下尝试了调用方法、委托函数和表单地址，可能是我留下了一些东西。

我使用的一个示例委托：

* * *

在 Form Presupuestos 类中：

```
Public Delegate Sub LabelDelegate(ByVal Msg As String) 
```

在全局模块中声明大部分变量

```
 Public Llamada As Presupuestos.LabelDelegate 
```

课堂形式上的功能。

```
Public Sub ChangeLblText(ByVal msg As String) ' LblIconos.modifiers = public (In form)
     lblIconos.Text = msg
End Sub 
```

类触发器

```
Public Class TasksClassPresu
    Sub TaskEmail()
        Llamada.Invoke("prueba")
    End Sub
End Class 
```

运行此程序时，在此行中出错：lbliconos.text = msg 错误：“通过线程进行非法操作。它可以从创建的线程之外的线程访问控件“lbliconos””

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:50:09.340

我没有摆在我面前的详细信息，但是您需要签到`lblIconos.InvokeRequired`，`ChangeLblText`并且当属实时，`Invoke`代表会自行调用。

[这个问题](https://stackoverflow.com/q/2367718/256431)，以及[许多其他类似的问题](https://stackoverflow.com/search?q=InvokeRequired)，提供了更多细节。

# workflow - Alfresco Share：每个用户任务中的不同截止日期

> ID：10407837
> 
> 赞同：0
> 
> 时间：2012-05-02T04:42:17.763
> 
> 标签：workflow, alfresco, activiti

在开箱即用的 activiti adhoc 工作流程中，如何更改每个用户任务的截止日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T09:23:32.063

如果您应该根据您的要求使用`bpm:dueDate`或财产...`bpm:workflowDueDate`

# ruby-on-rails - 父母和所有处于关系中的孩子的单一表格？

> ID：10407841
> 
> 赞同：0
> 
> 时间：2012-05-02T04:42:53.957
> 
> 标签：ruby-on-rails, ruby, nested-attributes

在我的 RoR 中，我有一张桌子`games`,`stats`和`players`。每场比赛都有很多`players,`每个玩家都有很多“统计数据”，每场比赛都有很多`stats`通过`players.`我想要做的是在我的编辑游戏表格中，我希望有一行字段来添加一个新的统计数据行，游戏中每个玩家都有一个。我已经阅读了很多关于 nested_attributes 的内容，但发现了如何完全做到这一点的新的好资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:43:48.513

**更新：**这是基于您在评论中陈述的新关联的一组更新的类

```
# models/game.rb
class Game < ActiveRecord::Base
  has_many :teams
  accepts_nested_attributes_for :teams
  attr_accessible :name, :teams_attributes
end 
```

* * *

```
# models/team.rb
class Team < ActiveRecord::Base
  belongs_to :game
  has_many :players
  accepts_nested_attributes_for :players
  attr_accessible :name, :players_attributes
end 
```

* * *

```
# models/player.rb
class Player < ActiveRecord::Base
  belongs_to :team
  has_many :stats
  accepts_nested_attributes_for :stats, reject_if: proc { |attributes| attributes['name'].blank? }
  attr_accessible :name, :stats_attributes
end 
```

* * *

```
# models/stat.rb
class Stat < ActiveRecord::Base
  belongs_to :player
  attr_accessible :name
end 
```

* * *

```
# controllers/games_controller.rb
class GamesController < ApplicationController
  def edit
    @game = Game.find(params[:id])
    @game.teams.each do |team|
      team.players.each do |player|
        player.stats.build
      end
    end
  end

  def update
    @game = Game.find(params[:id])
    if @game.update_attributes(params[:game])
      render "show"
    else
      render text: "epic fail"
    end
  end
end 
```

* * *

```
# games/edit.html.erb
<%= form_for @game do |f| %>
  <%= f.fields_for :teams do |tf| %>
    <p>Team: <%= tf.object.name %></p>
    <%= tf.fields_for :players do |pf| %>
      <p>Player: <%= pf.object.name %></p>
      <%= pf.fields_for :stats do |sf| %>
        <%= sf.text_field :name %>
      <% end %>
    <% end %>
  <% end %>
  <%= f.submit %>
<% end %> 
```

* * *

请注意，这不会做任何类型的 ajax“添加另一个统计”或任何花哨的东西。它只是在最后为每个玩家添加一个额外的空白字段。如果您需要更多，您可以在`GamesController#edit`操作中构建更多空白统计对象或实现一些花哨的裤子 javascript。希望这将使您足够接近，以便能够使您的真实数据正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:34:39.220

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

没有看到更多您自己的代码，我无法具体说明，但基本上，您循环所有玩家并“构建”统计数据... game.players.each {|p| p.build_stat} 然后在表单中，再次循环遍历所有玩家，并显示统计信息（可能仅限于 new_record？那些？）或者也许在表单中正确构建，因此它显示一个空白条目。

我想我看到了一个潜在的问题，你的模型......如果统计数据是特定游戏的特定表示，那么你描述的模型不会链接它们 - 你需要一个 game_id 和 player_id 在每个统计记录。如果是这种情况，您将在控制器方法中构建所有统计信息，并在视图中循环它们。

# entity-framework - 如何使用 linq to sql 一次连接多个表？

> ID：10407844
> 
> 赞同：0
> 
> 时间：2012-05-02T04:43:46.433
> 
> 标签：entity-framework, linq-to-sql

**用户：**

```
userid    name     email
  1       venkat   v@g.com
  2       venu     ve@g.com
  3       raghu    r@g.com 
```

**伙伴：**

```
 id   userid   partnerid  status
    1     1        2           1
    2     1        3           1 
```

**地点：**

```
 id   userid    lat    lon
    1     1        12.00  13.00
    2     2        14.00  12.00
    3     3        14.00  14.23 
```

询问：

```
var result = from partner in Partners
                join user in Users on partner.UserId equals user.PartnerId
                join location in Locations on patner.UserId equals location.PartnerId
                where partner.UserId == 1
                select new { PartnerId = partner.PartnerId, PartnerName = user.Name, Lat = location.Lat, Lon = location.Lon }; 
```

通过`userid=1`作为参数传递，我得到了这个结果：

```
partnerid  patnername      lat            lon
  2         venkat         14.00         12.00
  3         venkat         14.00         14.23 
```

通过观察上述结果，这里的合作伙伴名称是错误的`partnerid = 2`-`patname`只是 `venu`显示“venkat”

因为`partnerid = 3`，partnername`raghu`只是显示`venkat`。

如何显示正确的合作伙伴名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:26:56.013

我相信这里的 JOIN 是错误的：

```
var result = from partner in Partners
             join user in Users on user.UserId equals partner.PartnerId 
```

您正在将他的用户加入`userId`到使用他的合作伙伴中`PartnerID`。

`PartnerID`在这两种情况下都不需要将用户加入到合作伙伴中吗？像这样的东西：

```
var result = from partner in Partners
             join user in Users on user.PartnerId equals partner.PartnerId 
```

# iphone - 从方法中设置的属性访问值到另一个方法

> ID：10407847
> 
> 赞同：0
> 
> 时间：2012-05-02T04:44:09.393
> 
> 标签：iphone, objective-c, ios, xcode

我想在这个委托方法中获取结果点的值

```
- (void)perksDetailsViewController:(PerksDetailsViewController *)sender didPassRequiredPoints:(NSNumber *)requiredPoints withCard:(Card *)selectedCard 
{

    double perksPoints = [requiredPoints doubleValue];

    self.resultingPoints = [NSNumber numberWithDouble:[selectedCard subtractPoints:perksPoints] ];

    NSLog(@"points remaining %@", self.resultingPoints);
} 
```

这工作正常，但是当我尝试在下面的方法中访问结果点时，结果点有一个空值，正如我放置的 NSLog 所说的那样。

```
- (void) didPressDone:(id)sender {

    PointsResultsViewController *pointsResults = [self.storyboard instantiateViewControllerWithIdentifier:@"resultsPointsVC"];

    [self.navigationController pushViewController:pointsResults animated:YES];

    pointsResults.leftPointsLabel.text = [self.resultingPoints stringValue];

    NSLog(@"hey points left is%@", self.resultingPoints);
} 
```

什么是从第一种方法中获取结果点值的好方法？提前致谢。

**编辑**：日志输出

2012-05-02 15:47:48.297 CardWallet[22196:f803] 积分剩余 900

2012-05-02 15:47:49.291 CardWallet[22196:f803] 剩下的点数是（空）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:45:32.873

从你的最后评论：

> 这是它的属性声明`@property (nonatomic, weak) NSNumber *resultingPoints;`

这可能是您问题的根源。如果没有其他东西保留它，弱属性将被释放并设置为`nil`，这里就是这种情况。让它成为一个强大的属性，当你推送新的视图控制器时它仍然会存在。

根据您在聊天中提供的详细信息，您实际上正在处理此类的两个不同实例。一个在屏幕上，一个被用作代理。

分配委托时，您必须确保它与屏幕上的对象相同。这最好在 prepareForSegue 中完成，此时 segue 的目标视图控制器是即将出现的视图控制器。

# objective-c - 这是在 Objective-C 中定义私有实例变量的新方法吗？

> ID：10407848
> 
> 赞同：9
> 
> 时间：2012-05-02T04:44:13.233
> 
> 标签：objective-c

我最近更新到 Xcode 4.3.2，发现我现在可以在`@implementation`块内声明私有实例变量，如下所示：

```
@interface TestClass : NSObject
@property (nonatomic, copy) NSString *testProp;
@end

@implementation TestClass {
    NSString *_testPropStore;
}

- (NSString *)testProp { return _testPropStore; }
- (void)setTestProp:(NSString *)testProp { _testPropStore = [testProp copy]; }

- (id)init {
    if (self = [super init]) {
        _testPropStore = nil;
    }
    return self;
}

@end 
```

注意大括号块`NSString *_testPropStore`内的行。`@implementation`

我还使用以下代码进行了测试：

```
TestClass *c1 = [[TestClass alloc] init];
TestClass *c2 = [[TestClass alloc] init];

c1.testProp = @"Hello";
c2.testProp = @"World";

NSAssert(c1.testProp == c2.testProp, @"It's working!"); 
```

这似乎工作正常。（也就是说，应用程序崩溃并在 NSAssert 行显示“它正在运行”消息。）

**那么这是 Objective-C 的一个新特性，用于声明私有实例变量吗？由于我偶然发现了这一点，我很想知道它是否只是用于声明私有实例变量，还是会有任何我不知道的副作用？**

我找不到任何相关文档，因为大多数此类带有单词的问题`private`最终都得到了有关如何在不同的私有扩展类别上声明它们的答案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-02T04:49:56.260

这是真实的，这是新的方式，* 它很棒，而且，是的，它在文档中。[Objective-C 编程语言](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocDefiningClasses.html#//apple_ref/doc/uid/TP30001163-CH12-TPXREF126)，它与我们获得该语言的实际规范一样接近，它有以下说法：

> 类的定义与它的声明非常相似。它以指令开始，以`@implementation`指令结束`@end`。此外，该类可以在`@implementation`指令后的大括号中声明实例变量：

```
@implementation ClassName
{
    // Instance variable declarations.
}
// Method definitions.
@end 
```

从那个链接后面还有一个历史记录，解决了我们过去必须在接口块中声明 ivars 的事实：

> 从历史上看，接口需要声明类的实例变量，这些数据结构是类的每个实例的一部分。...实例变量表示实现细节，通常不应在类本身之外访问。此外，您可以在实现块中声明它们或使用声明的属性合成它们。因此，通常不应在公共接口中声明实例变量，因此应省略大括号。

对于隐私问题，是的，这些变量是真正私有的——它们的行为就像在与指令的接口中声明的 ivars `@private`。这意味着默认情况下子类无法访问它们。然而，它们的可见性可以使用`@protected`或（如果有必要出于某种奇怪的原因）来改变`@public`：

```
@interface Stuper : NSObject 
@end

@implementation Stuper
{
    @protected
    NSString * sangfroid;
}
@end

@interface Stub : Stuper
- (void)setSangfroid: (NSString *)newSangfroid;
@end

@implementation Stub

- (void)setSangfroid: (NSString *)newSangfroid {
    sangfroid = [newSangfroid copy];
} 
```

* * *

*我相信你必须使用 clang > 3.0，所以这只是几个月前的发布。海湾合作委员会不会这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T04:49:36.940

它很新，只要您需要的任何编译器支持它，它就有效。

这对于最小化您的依赖关系非常有用——包含和转发可能主要在实现文件中。出于这个原因，如果您使用的所有编译器都支持它，那么对于您的 ivars 来说，它是一个比在`@interface`块中更好的地方。

最后一个警告是我们当前（2012 年 2 月 2 日）的调试器不支持这一点。

# css - html5shiv - 为什么它只适用于 IE？

> ID：10407853
> 
> 赞同：4
> 
> 时间：2012-05-02T04:44:51.600
> 
> 标签：css, html, internet-explorer

我想开始使用一些 HTML5 标签，但担心它会如何在不支持 HTML5 的浏览器上呈现。似乎 html5shiv 是我可以用于 IE 浏览器 < 9 的解决方案。

但是，如果浏览器不支持 HTML5 并且不是 IE 怎么办？然后怎样呢？为什么 html5shiv 是 IE 的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T04:47:23.810

首先，需要明确的是，html5shiv 只是为了让您可以正确设置某些 HTML5 标记（`section`、`article`等）的样式。它没有为浏览器提供任何更一般意义上的“HTML5 支持”。

考虑到这一点，请注意 IE <9 是唯一不允许正确设置这些 HTML5 标记样式的浏览器，因此 html5shiv 仅适用于它们。

其他浏览器（甚至像 Netscape Communicator 4 这样的非常老的浏览器）仍然会正确解析无法识别的标签，并允许 CSS 像您期望的那样应用于它们。

正如 zzzzBov 在他的回答中指出的那样，它们可能没有正确的默认样式（在大多数（所有？）情况下要么是要么`display: block`没有），所以即使是非 oldIE 浏览器也需要添加这些样式。但是这样做在非 oldIE 浏览器中效果很好，而在 oldIE 中，添加这些默认样式（或任何样式）只有在使用 html5shiv 时才有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T08:02:29.757

`display`元素属性的初始值为`inline`( [ref](http://www.w3.org/TR/CSS21/visuren.html#display-prop) )。内置的用户代理样式表将属性更改为已知元素的合理值；例如，标题和段落被更改为块。

HTML5 引入了新元素，例如页眉、页脚、文章和部分（HTML5 分段元素）。由于较旧的浏览器不知道它们，因此它们将这些元素视为内联元素。因此，您必须手动为这些元素添加 CSS 规则：

```
header, footer, article, section { display: block; } 
```

[但正如HTML5 Shiv 的故事中](http://paulirish.com/2011/the-history-of-the-html5-shiv/)提到的：

> ...Internet Explorer 6-8 存在问题，因为它们无法识别未知元素；新元素不能容纳子元素并且不受 CSS 影响

该文章还提到了 IE 6-8 的解决方法：

> 顺便说一句，如果您希望 CSS 规则适用于 IE 中的未知元素，您只需执行 document.createElement(elementName)。这以某种方式让 CSS 引擎知道具有该名称的元素存在

*现在，关于您的问题： html5shiv*使用一些 JavaScript 技巧使未知元素在 IE 6-8 中具有样式。至于*其他*不支持 HTML5 的浏览器，如果需要，html5shiv 会添加正确呈现 HTML5 元素所需的默认样式，这样您就不必自己定义 CSS 规则（如上所述）。

请注意， html5shiv*不会使浏览器支持 HTML5*。例如，它不能让 IE7 播放通过 HTML5`<video>`标签嵌入的视频。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T04:47:26.450

`display`其他浏览器只需设置它们的 css属性即可支持非标准元素：

```
header,
footer,
article,
section,
...etc... {
    display: block;
} 
```

对于旧版本的 Firefox 和基于 webkit 的浏览器（HTML5 之前），这就是所有必要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T04:47:54.717

htmlshiv 是一个“IE”的东西，因为某些版本的 IE [仍然] 缺少许多 HTML5 功能。在 chrome 或其他 webkit 浏览器中有效的东西可能在 IE 中无效，因此 htmlshiv 尝试对缺少的功能进行 javascript 改编。准确地说，它也是一个 polyfill。

# java - 在 C++ 与 Java 或 C# 中回收堆内存的方式有什么区别

> ID：10407855
> 
> 赞同：-1
> 
> 时间：2012-05-02T04:45:14.710
> 
> 标签：java, c#, c++, memory, heap-memory

我知道 C++ 有析构函数，Java/C# 有垃圾收集器，但是内存取消分配有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T04:47:22.147

C++ 具有确定性解除分配，Java 和 C# 没有。

大多数其他一切都是实现定义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T04:50:09.753

在 C++ 中，堆内存**释放是手动**的，这与 C#/Java 中定期发生的自动垃圾收集不同。

使用智能指针，您也可以在 C++ 中模拟垃圾收集的效果，但在幕后必须有人编写调用`delete()`/`free()`函数的代码。

C++ 还提供了在非动态分配的堆栈内存上创建对象，但它也不需要任何内存管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:19:47.453

`PL`like`C#/Java`支持`garbage collection`技术，也称为`automatic memory management`在控制流超出范围时自动释放内存的技术。`PL`如果支持`garbage collection`技术，程序员不需要专注于释放内存。

但`PL`就像`C/C++`支持`manual memory management`程序员控制内存的地方一样。`C++`提供使用 new 和 delete 运算符分配和释放内存的方法

# java - 需要让开源httpclient中的httpstatus抛出异常

> ID：10407857
> 
> 赞同：0
> 
> 时间：2012-05-02T04:45:31.147
> 
> 标签：java, apache-commons-httpclient

我有一个行为不端的调用应用程序，我没有它的来源，它遇到非 200 http 状态 - 悄悄地记录错误/信息消息......

我需要能够让它实际退出并显示某种错误消息。碰巧知道它确实捕获了一些异常......所以这是我的策略

用引发异常的部分替换http客户端代码的一部分，然后让异常冒泡到这个应用程序，我希望它退出......

还有其他方法/更好的方法吗？如果不是更好，也欢迎简单的替代建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:01:13.037

这似乎是一个合理的方法。您也可以尝试使用方面 - 如果您使用加载时编织，您可以在您希望它引发异常的位置向客户端应用程序添加方面（尽管没有源代码，很难计算出确切的切入点）。

# objective-c - 如何在目标c中保存文本文件而不覆盖

> ID：10407858
> 
> 赞同：1
> 
> 时间：2012-05-02T04:46:11.217
> 
> 标签：objective-c, ios, ios4

我正在尝试将 NSString 写入文件。它正在成功写入，但是我想将新字符串附加到新行。

怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:28:35.737

您可以读取文件内容，将新数据附加到该内容并将新数据保存到您使用的文件中：

```
// Here you set your appending text.    
NSString *yourAppendingText = @"yourAppendingText";  

// Here you get access to the file in Documents directory of your application bundle.
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDir = [paths objectAtIndex:0];
NSString *documentFile = [documentDir stringByAppendingPathComponent:@"yourFile.txt"];

// Here you read current existing text from that file
NSString *textFromFile = [NSString stringWithContentsOfFile:documentFile encoding:NSUTF8StringEncoding error:nil];
// Here you append new text to the existing one
NSString *textToFile = [textFromFile stringByAppendingString:yourAppendingText];
// Here you save the updated text to that file
[textToFile writeToFile:documentFile atomically:YES encoding:NSUTF8StringEncoding error:nil]; 
```

# ios5 - 仅在屏幕的一半上显示相机

> ID：10407860
> 
> 赞同：1
> 
> 时间：2012-05-02T04:46:24.317
> 
> 标签：ios5, camera

我想在 iPhone 和 iPad 上仅在一半屏幕上显示相机视图。我做了很多搜索，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T05:09:14.770

试试这个..如果这对您没有帮助或遇到任何问题，请告诉我我会为您提供一些其他示例代码..

```
UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];

imagePickerController.delegate = self;
imagePickerController.mediaTypes = [NSArray arrayWithObjects:(NSString *)kUTTypeImage, nil];
imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
imagePickerController.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;

UIView *controllerView = imagePickerController.view;

controllerView.alpha = 0.0;
controllerView.transform = CGAffineTransformMakeScale(0.5, 0.5);

[[[[UIApplication sharedApplication] delegate] window] addSubview:controllerView];

[UIView animateWithDuration:0.3
                  delay:0.0
                options:UIViewAnimationOptionCurveLinear
             animations:^{
                 controllerView.alpha = 1.0;
             }
             completion:nil
 ];

[imagePickerController release]; 
```

# java - Liferay 不会在 portlet 中捕获表单，也不会处理

> ID：10407861
> 
> 赞同：0
> 
> 时间：2012-05-02T04:46:30.667
> 
> 标签：java, netbeans, glassfish, liferay, portlet

我在liferay 中有.jsp，并在applet 中使用javascript，但是在将表单发送到portlet 之后，在服务器端，portlet 不会捕获表单，并且不会在日志中显示其他消息。

jsp页面的片段：

```
<script type="text/javascript">
    function processSigning(){
        var applet = document.applets["SignApplet"];
        var path_to_certificate = document.getElementById("certificate").value;
        var pass = document.getElementById("password").value;
        var filePath = document.getElementById("documentSign").value;
        applet.filePath = document.getElementById("documentSign").value;
        applet.profileTestPKCS12(path_to_certificate, pass);

        document.getElementById("file").value = applet.getDocumentString(filePath);
        document.getElementById("sign").value = applet.getSignString();
        document.getElementById("cert").value = applet.getCertificateString();
        document.getElementById("mainForm").submit();

    }
</script>

<form id="mainForm" action="<portlet:actionURL>
          <portlet:param name="COMMAND" value="LOAD"/>
      </portlet:actionURL>">

    <hidden id="file" value="asdf"></hidden>
    <hidden id="cert" value="asdf"></hidden>
    <hidden id="sign" value="asdf"></hidden>
    <input type="button" onClick="processSigning();" value="click here!" >
</form> 
```

小门户片段：

```
public void processAction(ActionRequest request, ActionResponse response) throws PortletException {
    session = request.getPortletSession(true);
    String command = request.getParameter("COMMAND");
    System.out.println("command=" + command);
    log.info("command=" + command);

if ("LOAD".equals(command)) {

{
System.out.println("file");
log.info("file");
String fileBase64 = request.getParameter("file");
System.out.println(request.getParameter("file"));
log.info(request.getParameter("file"));
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:40:52.160

试试这个表格，看看它是否适合你：

```
<portlet:actionURL var="myActionURL"></portlet:actionURL>

<form id="mainForm" action="${myActionURL}" method="post">
    <input type="hidden" name="COMMAND" id="COMMAND" value="LOAD" />
    <input type="hidden" name="file" id="file" value="asdf" />
    <input type="hidden" name="cert" id="cert" value="asdf" />
    <input type="hidden" name="sign" id="sign" value="asdf" />
    <input type="button" onClick="processSigning();" value="click here!" >
</form> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:49:54.927

如果 portlet-class 指向 MVCPortlet 或您的自定义 portlet 类，请检查您的 portlet.xml。它应该指向自定义 portlet 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T03:25:30.770

必须指定表单的方法，因为 Liferay Portal 使用“post”方法，隐藏参数的名称也必须使用“name”属性，因为请求使用名称，而不是 ids

# asp.net-mvc - 我的应用程序中没有加载图像、css 和 js 文件

> ID：10407865
> 
> 赞同：4
> 
> 时间：2012-05-02T04:47:01.620
> 
> 标签：asp.net-mvc, asp.net-mvc-3, image, iis, iis-7.5

这个要了我的命，这些文件都没有加载到我的应用程序中：图像、css、js，在重新安装我的电脑之前一切正常，所以我猜是 IIS 的配置问题，因为我没有接触代码和在同事的 PC 上运行良好。

在萤火虫中看到 HTML 时，我看到了这个

```
Reload the page to get source for: http://localhost/Common/Scripts/jquery-1.4.3.min.js 
```

这是代码

```
<script src="@Url.Content("~/Scripts/jquery-1.4.3.min.js")" type="text/javascript"></script> 
```

我正在运行 Windows 7 和 IIS 7.5，它是一个 Asp.Net MVC 3 应用程序。

我试过以下

*   卸载并重新安装 IIS
*   将文件系统的读取权限添加到 IUSR 和 IIS_USRS
*   在 IIS 中的应用程序中，在功能匿名身份验证中，我选择了“应用程序池标识”。

什么都没有发生，也许有人对正在发生的事情有另一个想法。

或者至少为我指出一个方向，以便更好地理解问题的原因，我会根据反馈更新问题。

帮助将不胜感激......并奖励:)

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T16:02:50.963

我发现了问题。

我没有在 IIS 的功能中标记静态内容。

在 Windows 功能中，转到 Internet 信息服务 > 万维网服务 > 通用 HTTP 功能 > 静态内容

在应用程序开发功能下，我选择了 Asp.Net，它自动选择了其他所有内容，我想知道为什么它也没有选择这个选项。

希望对其他人有所帮助。

# joomla - Joomla 将组件添加到数据库

> ID：10407871
> 
> 赞同：0
> 
> 时间：2012-05-02T04:47:37.097
> 
> 标签：joomla

我刚刚开始为 Joomla 开发一个组件。我不知道如何在 dB 中添加一个条目，以便我可以访问该组件。

我查看了组件的 dB 表，但有些列似乎需要一些特定信息。

这不是一个完成的组件，而是我想要构建的一个新组件。

我正在使用 Joomla 1.7。

保重，李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:44:25.023

正如 Jogesh_p 建议的那样，简单的方法是创建一个像这样的 xml 文件 [http://docs.joomla.org/Components:xml_installfile](http://docs.joomla.org/Components:xml_installfile)

如果您刚开始使用 Joomla 开发，请查看 Hello World 教程。 [http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_01](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_01)

快速创建 Joomla 组件的另一个选择是使用 EasyCreator，它将创建扩展的基本部分，然后您可以在其上构建。

# jquery - 将不同的样式表动态应用到布局中

> ID：10407873
> 
> 赞同：0
> 
> 时间：2012-05-02T04:47:47.743
> 
> 标签：jquery, css

我有一个布局，我必须根据主页中选择的条件应用不同的外部样式表。条件是我必须根据主页中选择的用户从主页的下拉列表中选择一个用户我有动态加载外部 css 文件并将其应用于布局。我使用的是 Jquery。我怎么能在 jquery 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T04:57:57.463

你的意思是这样的：

```
$(document).ready(function() {
    $("#yourSelectId").change(function() {
        if($(this).val() == "something") {
            //load css
            var styleUrl = "some_stylesheet_url.css";
            $('<link rel="stylesheet" type="text/css" href="'+styleUrl+'" >')
            .appendTo("head");
        }
    });
}); 
```

# java - getter 和 setter 的意义何在？

> ID：10407877
> 
> 赞同：80
> 
> 时间：2012-05-02T04:48:21.070
> 
> 标签：java, setter, getter

> **可能重复：**
> [为什么要使用 getter 和 setter？](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

我读过有关 Java 的书籍，说为变量创建 setter 和 getter 是很好的，例如`x`和`y`. 例如：

```
public int getX(){
    return x;
}

public void setX(int x){
    this.x = x;
} 
```

但这和那有什么区别？

```
...(shape.x)...   // Basically getX() 
```

和

```
shape.x = 90;    // Basically setX() 
```

如果 setter 和 getter 更好，会出现什么实际问题？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-02T04:54:29.947

多种原因：

*   如果您允许字段访问，例​​如

    形状.x = 90

那么您以后不能添加任何逻辑来验证数据。

说如果 x 不能小于 100 你不能这样做，但是如果你有像这样的二传手

```
public void setShapeValue(int shapeValue){
  if(shapeValue < 100){
    //do something here like throw exception.
  }
} 
```

*   您不能在写入逻辑上添加类似复制的内容（请参阅[CopyOnWriteArrayList](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)）
*   另一个原因是要访问类之外的字段，您必须将它们标记为公共、受保护或默认，因此您失去了控制权。[当数据在打破类封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)和一般[OOPS](http://en.wikipedia.org/wiki/Object-oriented_programming)方法的内部非常重要时。

虽然对于像这样的常量

```
public final String SOMETHING = "SOMETHING"; 
```

您将允许字段访问，因为它们无法更改，例如变量，您将它们与 getter、setter 一起放置。

*   另一种情况是，当您希望您的类是不可变的时，如果您允许字段访问，那么您将破坏您的类的不可变性，因为值可以更改。但是，如果你用 getter 和没有 setter 仔细设计你的类，你就可以保持不变性。

尽管在这种情况下，您必须在 getter 方法中小心，以确保您不会给出对象的引用（以防您的类将对象作为实例）。

我们可以使用 getter 和 setter 在任何包中使用私有变量。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-02T04:51:41.970

使用 getter 和 setter 函数允许约束和封装。可以说x是半径。shape.x = -10 没有多大意义。此外，如果有人试图设置非法值，您可以打印错误、设置默认值或什么也不做。

将成员变量设为私有是一种很好的做法，这样它们就不能被使用它们的程序直接修改。

[突变函数](http://en.wikipedia.org/wiki/Mutator_method "突变函数")
[封装](http://en.wikipedia.org/wiki/Encapsulation_%28computer_science%29 "封装")

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-02T08:37:41.527

很多人提到封装实现的细节，对我来说这是在类中使用 getter 和 setter 的最大原因。有了这个，您还可以获得许多其他好处，包括能够随心所欲地抛弃和替换实现，而无需触及使用您的类的每一段代码。在一个小项目中，这不是一个很大的好处，但如果您的代码最终成为一个使用良好的（内部或公共）库，它可能是一个*巨大*的好处。

一个具体的例子：**数学中的复数**。有些语言将它们作为语言或框架功能，而另一些则没有。我将在这里使用一个可变类作为示​​例，但它也可以很容易地成为不可变的。

复数可以`a + bi`用实部和虚部写在表格上，非常适合`[gs]etRealPart`和`[gs]etImaginaryPart`。

然而，在某些情况下，在极坐标上更容易推理复数`re^(iθ)`，给出`[gs]etRadius`(r) 和`[gs]etAngle`(θ)。

您还可以公开方法，如`[gs]etComplexNumber(realPart, imaginaryPart)`和`[gs]etComplexNumber(radius, angle)`。根据参数类型，这些可能需要也可能不需要不同的名称，但是类的使用者可以根据需要使用其中任何一个。

这两种形式可以互换；您可以相当轻松地从一个转换到另一个，因此该类用于内部存储的形式与该类的消费者无关。但是，消费者可以使用任何一种形式。如果您选择 a+bi 作为内部表示形式，并*使用字段而不是 getter 和 setter 来公开它*，那么您不仅会强制类消费者使用该形式，而且以后也不能轻易改变主意并将内部表示替换为re^(iθ) 因为这在您的特定场景中更容易实现。你被你定义的公共 API 卡住了，它要求使用特定的字段名称来公开实部和虚部。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-02T05:06:54.910

我能想到的关于 getter 和 setter 的最好理由之一是类 API 的持久性。在像 python 这样的语言中，您可以通过成员的名称访问成员并稍后将它们切换到方法。因为一旦你访问了一个属性，函数的行为就与 java 中的成员不同。稍后限制其范围会破坏客户端。

通过提供 getter 和 setter，程序员可以灵活地自由修改成员和行为，只要遵守公共 API 描述的合同。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-02T05:18:08.750

用户的另一个很好的理由`getter`，`setter`可以通过以下示例来理解

```
public class TestGetterSetter{
    private String name ;

    public void setName(String name){
        this.name = name ;
    }

    public String getName(){
        return this.name ;
    }
} 
```

getter 和 setter 的要点是，只有它们才能用于访问它们正在获取或设置的私有变量。这样您就可以提供封装，以后重构或修改代码会容易得多。

想象一下，您使用 name 而不是它的`getter`. 然后，如果您想添加类似默认值的内容（例如，如果之前未设置默认名称为“Guest”），那么您必须同时修改 the`getter`和`sayName`函数。

```
public class TestGetterSetter{
    private String name ;

    public void setName(String name){
        this.name = name ;
    }

    public String getName(){
        if (this.name == null ){
            setName("Guest");
        }
        return this.name ;
    }
} 
```

getter 和 setter 不需要以 get 和 set 开头——它们只是普通的成员函数。然而，这样做是一个惯例。（特别是如果您使用 Java Beans）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-02T05:07:08.273

假设，假设您找到了一个库，该库可以更好地完成您在自己的班级（YourClass）中所做的工作。此时要做的自然的事情是使 YourClass 成为该库的包装器接口。它仍然具有您的客户端代码需要获取或设置的“X”概念。自然，此时您几乎必须编写访问器函数。

如果您忽略了使用访问器函数并让您的客户端代码直接访问 YourClass.x，那么您现在将不得不重写您曾经接触过 YourClass.x 的所有客户端代码。但是如果你从一开始就使用 YourClass.getX() 和 YourClass.setX()，你只需要重写 YourClass。

编程的关键概念之一，尤其是面向对象的编程，是隐藏实现细节，这样它们就不会被其他类或模块中的代码直接使用。这样，如果您更改了实现细节（如上面的示例），客户端代码不知道差异，也不必修改。你的客户端代码都知道，“x”可能是一个变量，也可能是一个动态计算的值。

这是一种过度简化，并没有涵盖隐藏实现有益的所有场景，但它是最明显的例子。隐藏实现细节的概念现在与 OOP 紧密相关，但你可以找到关于它的讨论可以追溯到 OOP 出现之前的几十年。它回到软件开发的核心概念之一，就是把一个模糊的大问题，分解成易于解决的、定义明确的小问题。访问器函数有助于使您的小子任务保持分离和明确定义：您的类对彼此内部的了解越少越好。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-05-02T05:20:31.760

`encapsulating`最初，创建 getter/setter 模式是为了通过a 的内部`class`从其外部促进良好的面向对象设计`interface`。

*   隐藏属性的内部表示

这是您问题的最佳答案[为什么使用getter和setter？](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-02T04:54:16.650

有很多原因。这里仅仅是少数。

1.  访问器，尤其是 getter，经常出现在接口中。您不能在接口中规定成员变量。
2.  一旦你公开了这个成员变量，你就无法改变它是如何实现的。例如，如果您稍后发现需要切换到聚合之类的模式，您希望“x”属性实际上来自某个嵌套对象，那么您最终必须复制该值并尝试使其保持同步。不好。
3.  大多数时候你最好*不要*暴露二传手。你不能用像 x 这样的公共字段来做到这一点。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-02T04:57:37.230

在得到答案之前，我们必须先知道一些事情......！“ **JavaBeans** ”。
*JavaBean 是具有属性的 java 类*。出于我们的目的，将属性视为私有实例变量。由于它们是私有的，因此可以从类外部访问它们的唯一方法是通过类中的“方法”。
更改属性值的方法称为**setter 方法**，检索属性值的方法称为**getter 方法**。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-02T04:56:21.263

我会说 getter/setter 和公共成员都不是好的面向对象设计。它们都通过将对象数据暴露给可能不应该首先访问对象属性的世界来打破 OOP 封装。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-02T04:57:03.057

这是通过应用 OOP 的[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)原理来完成的。

> 一种语言机制，用于限制对某些对象组件的访问。

这意味着，您必须定义类的属性和方法的可见性。有 3 种常见的可见性：

*   私有：只有类可以看到和使用属性/方法。
*   受保护：只有类及其子类可以看到和使用属性/方法。
*   公共：每个类都可以看到和使用属性/方法。

当您声明私有/受保护属性时，我们鼓励您创建获取值（get）和更改值（set）的方法。关于可见性的一个例子是`[ArrayList][2]`类：它有一个`size`属性可以知道内部数组的实际大小。只有类**必须**更改其值，因此代码类似于

```
public class ArrayList<E> {
    private int size;
    private Object[] array;
    public getSize() {
        return this.size;
    }
    public void add(E element) {
        //logic to add the element in the array...
        this.size++;
    }
} 
```

在此示例中，您可以看到大小值只能在类方法内部更改，您可以通过在代码中调用它（而不是改变它）来获取实际大小：

```
public void someMethod() {
    List<String> ls = new ArrayList<String>();
    //adding values
    ls.add("Hello");
    ls.add("World");
    for(int i = 0; i < ls.size(); i++) {
        System.out.println(ls.get(i));
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-05-02T04:57:03.157

Getter 和 setter 封装了类的字段，使它们只能通过其公共方法访问，并使值本身保持私有。这被认为是一个很好的 OO 原则。

当然，如果它只是设置或返回一个值，它通常看起来像是多余的代码。但是，setter 还允许您进行输入验证或清理。将它放在一个地方可以提高对象的数据完整性，

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-05-02T05:06:11.827

因为我们使用的是面向对象的编程语言。这里我们使用数据隐藏和封装。该变量不应从外部世界直接访问（用于实现数据隐藏），因此我们将其创建为私有的

**形状.x**

是不正确的。getter 和 setter 方法用于获取和设置 x 的值，这是实现封装的方式。

# c - C编程以字节存储位

> ID：10407883
> 
> 赞同：0
> 
> 时间：2012-05-02T04:49:15.483
> 
> 标签：c

```
#include<stdio.h>

int main()
{
    char a = 128;
    char b = -128;
    printf("a is %d -- b is %d \n",a,b);

    return 0;
} 
```

输出是：

```
a is -128 -- b is -128 
```

由于带符号的字符范围是从 0 到 127，请从上面的代码中解释如何为超出边界值分配值。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T04:56:54.550

类型的范围`char`取决于实现。如果它是有符号类型，那么它的范围至少是从 -128 到 127，如果它是无符号类型，它的范围至少是从 0 到 255（这些是该类型必须至少支持的范围，类型支持的范围实际上可能比这更大，具体取决于实现）。

另请注意，当您将整数分配给不能保存该值的有符号类型时，您正在调用*未定义的行为*。因此，将 128 分配给不能容纳 128 的有符号字符（例如，当 128 大于 时`CHAR_MAX`）正在调用未定义的行为。在这种情况下，它已经回绕到，`-128`因为它与持有 128 的 unsigned char 类型共享相同的字节表示，但与所有未定义行为的实例一样，您不能保证在所有实现中都是这种情况。

# python - 如何让 yasnippet 在 emacs 中支持 PyQt

> ID：10407886
> 
> 赞同：2
> 
> 时间：2012-05-02T04:49:31.707
> 
> 标签：python, emacs, pyqt

我使用 emacs 作为 Python IDE。我已经安装了 yasnippet，但我怎样才能让它支持 PyQt？这是我的 .emacs：

```
(require 'auto-complete)
(add-to-list 'ac-dictionary-directories "~/.emacs.d/dict")
(require 'auto-complete-config)
(if (load "auto-complete-scite-api" t)
    (setq-default ac-sources (cons 'ac-source-scite-api ac-sources)))
(ac-config-default)

(require 'auto-complete-yasnippet)
(require 'pymacs)
(autoload 'pymacs-apply "pymacs")
(autoload 'pymacs-call "pymacs")
(autoload 'pymacs-eval "pymacs" nil t)
(autoload 'pymacs-exec "pymacs" nil t)
(autoload 'pymacs-load "pymacs" nil t)

(require 'python)
(require 'yasnippet)
(yas/initialize)
(yas/load-directory "~/.emacs.d/plugins/yasnippet/snippets")
(yas/global-mode 1)
(require 'python-mode)

(require 'django-html-mode)
(require 'django-mode)
(yas/load-directory "/home/jactry/.emacs.d/snippets")
(add-to-list 'auto-mode-alist '("\\.djhtml$" . django-html-mode))

(autoload 'python-mode "python-mode" "Python Mode." t)
(add-to-list 'auto-mode-alist '("\\.py\\'" . python-mode))
(add-to-list 'interpreter-mode-alist '("python" . python-mode)) 
```

我使用 Ubuntu 并安装了自动完成和 yasnippt，我想让我的 emacs 有一个 PyQt 的代码 autp 完成。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:20:38.837

我不确定你是如何安装`yasnippets`的，但是我使用了 el-get 并且我认为这与我将要写的内容无关紧要。

1.  创建一个名为`~/.emacs.d/snippets/pyqt`
2.  在 emacs 中打开一个 pyqt 文件。
3.  在 YaSnippet 顶部菜单下，选择`New Snippet`(或`C+c & C+n`)
4.  仅使用您要点击的片段字母保存文件。我的示例文件保存为`l`
5.  完成保存后，使用`Reload Everything`well 重新加载您的片段，这就是我所做的，另一个对我来说太挑剔了。

你会得到一个看起来像这样的文件，只有我填写了：

```
# -*- mode: snippet -*-
# name: label (l)
# key: l
# --
<label>
  $0
</label> 
```

应该是这样的。您可能需要在目录名称中调整 PyQt，但它应该全部小写。干杯。

# javascript - JavaScript AddEventListner 中的变量范围

> ID：10407892
> 
> 赞同：1
> 
> 时间：2012-05-02T04:49:57.773
> 
> 标签：javascript, global-variables, scope, addeventlistener

对于上下文，我正在为omniture (adobe) sitecatalyst 编写一个用于视频跟踪的插件。在我以 sitecatalyst 格式编写插件之前，我想确认它是否正常工作。我已经测试了相同的代码，但使用了 jQuery，它适用于 jQuery 处理变量/范围的方式。但事实证明，直接用 Javascript 做这件事有点困难。这是我所在的位置：

```
var vsa = new Array();
var vp = new Array(); 
vsa = document.getElementsByTagName('video');
if(vsa.length>0){
for(var vvv=0;vvv<vsa.length;vvv++) {
    vsa[vvv].addEventListener('seeked',function () { if(vp[vsa[vvv].id]) { s.Media.play(vsa[vvv].id,vsa[vvv].currentTime); }},false);
    vsa[vvv].addEventListener('seeking',function () { if(vp[vsa[vvv].id]) { s.Media.play(vsa[vvv].id,vsa[vvv].currentTime); }},false);
    vsa[vvv].addEventListener('play',function () { 
        if(!vp[vsa[vvv].id]) { 
            vp[vsa[vvv].id] = true; 
            s.Media.open(vsa[vvv].id,vsa[vvv].duration,s.Media.playerName);
            s.Media.play(vsa[vvv].id,vsa[vvv].currentTime); 
        } else {
            s.Media.play(vsa[vvv].id,vsa[vvv].currentTime);
        }},false);
    vsa[vvv].addEventListener('pause',function () { if(vp[vsa[vvv].id]) { s.Media.stop(vsa[vvv].id,vsa[vvv].currentTime); }},false);
    vsa[vvv].addEventListener('ended',function () { vp[vsa[vvv].id] = false; s.Media.stop(vsa[vvv].id,vsa[vvv].currentTime); s.Media.close(vsa[vvv].id); },false);

    if (typeof vsa[vvv].error != 'undefined' && vsa[vvv].error) {
        var scvt_msg = 'Error Not Captured';
        if(typeof vsa[vvv].error.code != 'undefined') {
            switch (vsa[vvv].error.code) {
                case MEDIA_ERR_ABORTED:
                    scvt_msg = 'vsa[vvv]eo stopped before load.';
                    break;
                case MEDIA_ERR_NETWORK:
                    scvt_msg = 'Network error';
                    break;
                case MEDIA_ERR_DECODE:
                    scvt_msg = 'vsa[vvv]eo is broken';
                    break;  
                case MEDIA_ERR_SRC_NOT_SUPPORTED:
                    scvt_msg = 'Codec is unsupported by this browser';
                    break;
            }
        }
        s.tl(this,'o','video: ' + scvt_msg);
    }

}
} 
```

在加载时，没有错误（意味着事件监听器正确连接）。当我在视频上按播放时，我得到“vsa [vvv] 未定义”。在以开头的代码行上

```
if(!vp[vsa[vvv].id]) 
```

任何想法如何从事件侦听器函数中获取 vsa、vp 和 s 的“全局”变量？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T04:52:28.350

变量是可访问的。问题是您陷入了 for 循环陷阱中的（非常常见的）闭包。

基本上，所有的事件监听器都共享同一个 vvv 变量。到事件侦听器运行时，vvv 已完成所有循环并设置为 vsa.length，从而使 vsa[vvv] 未定义。`console.log(vvv)`（通过添加对事件侦听器的调用来检查这一点）

通常的解决方法是在循环外的函数中创建事件侦听器，以使每个事件侦听器获得自己对视频标签变量的引用。

```
function addMyEvents(node){
    //the inner functions here get their own separate version of "node"
    // instead of sharing the vvv
    node.addEventListener('seeked',function () { if(vp[node.id]) { s.Media.play(node.id, node.currentTime); }},false);
    node.addEventListener('seeking',function () { if(vp[node.id]) { s.Media.play(node.id, node.currentTime); }},false);
    //...
}

for(var vvv=0;vvv<vsa.length;vvv++) {
    addMyEvents(vsa[vvv]);
} 
```

顺便说一句，您不需要`if(vsa.length)`在开始时进行测试，因为如果长度为零，循环将不会运行......

* * *

为避免将来出现此错误，请通过 JSHint 或 JSLint 之类的 linter 运行您的代码。如果您在 for 循环中创建函数，它们会发出警告。

# php - 如何在 Magento 中以编程方式更新属性选项？

> ID：10407896
> 
> 赞同：2
> 
> 时间：2012-05-02T04:50:37.933
> 
> 标签：php, magento

我想通过代码（以编程方式）更新/添加 Magento 中下拉属性的选项。我找到了如何添加属性选项，但是如何更新选项值。
示例：
假设属性是“制造商”。我添加了三个选项 man1、man2、man3。现在通过我的自定义代码，我想将 man1 的标签更改为 man11，将 man2 的标签更改为 man22。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:47:43.120

好吧，我自己找到了解决方案。[在此处查看完整的详细信息](http://www.webspeaks.in/2012/05/addupdate-attribute-option-values.html)。

```
//Get the eav attribute model
$attr_model = Mage::getModel('catalog/resource_eav_attribute');

//Load the particular attribute by id
//Here 73 is the id of 'manufacturer' attribute
$attr_model->load(73);

//Create an array to store the attribute data
$data = array();

//Create options array
$values = array(
    //15 is the option_id of the option in 'eav_attribute_option_value' table
    15 => array(
            0 => 'Apple'    //0 is current store id, Apple is the new label for the option
        ),
    16 => array(
            0 => 'HTC'
        ),
    17 => array(
            0 => 'Microsoft'
        ),
);

//Add the option values to the data
$data['option']['value'] = $values;

//Add data to our attribute model
$attr_model->addData($data);

//Save the updated model
try {
    $attr_model->save();
    $session = Mage::getSingleton('adminhtml/session');
    $session->addSuccess(
        Mage::helper('catalog')->__('The product attribute has been saved.'));

    /**
     * Clear translation cache because attribute labels are stored in translation
     */
    Mage::app()->cleanCache(array(Mage_Core_Model_Translate::CACHE_TAG));
    $session->setAttributeData(false);
    return;
} catch (Exception $e) {
    $session->addError($e->getMessage());
    $session->setAttributeData($data);
    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:06:08.383

您可能想尝试扩展位于 app\code\core\Mage\Adminhtml\controllers\Catalog\Product\AttributeController.php 的 AttributeController 并覆盖该`saveAction()`方法以满足您的需要。

# asp.net - ASP.Net 中的缓存克星策略

> ID：10407897
> 
> 赞同：7
> 
> 时间：2012-05-02T04:50:45.183
> 
> 标签：asp.net, browser-cache

在 ASP.Net 网站中的 javascript 和样式表引用上自动应用和/或更新缓存破坏器变量的好策略是什么？

例如转型

```
<script type="text/javascript" src="/js/myScript.js" /> 
```

到

```
<script type="text/javascript" src="/js/myScript.js?rev=12345" /> 
```

**更新：不需要持续集成。** ~~我正在使用持续集成（具体来说是 Jenkins），所以如果更新变量的方法是基于例如内部版本号，那就太好了。~~

虽然我可以在源代码中手动应用原始变量并通过策略更新它们，但如果该策略也可以应用原始变量（如果它不存在）（例如遗留代码），那将是一个很好的补充。

~~在我的脑海中，我可以想象使用 Powershell 脚本扫描所有 *.aspx 和 *.ascx 文件并使用正则表达式来查找适当的引用并更新它们。但是您知道他们对使用正则表达式的看法......那么我有两个问题:)~~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:27:27.980

**在 ASP.Net 中缓存 buster 变量的答案是使用各种 CSS/JS 缩小库之一**。

我在想缓存破坏者变量需要在每次*部署*到我们的服务器时进行更新，但是缩小库会根据各个 CSS/JS 文件的*内容应用哈希标记。*

由于我正在开发一个 .Net 3.5 网站，因此我的选择受到了一些限制。我最终使用了 [SquishIt](http://www.codethinked.com/squishit-the-friendly-aspnet-javascript-and-css-squisher)（以 NuGet 包的形式提供），它很容易集成。

```
<link href="/<my_css_path>/<css_file_1>.css" rel="stylesheet" type="text/css" />
<link href="/<my_css_path>/<css_file_2>.css" rel="stylesheet" type="text/css" />
<link href="/<my_css_path>/<css_file_3>.css" rel="stylesheet" type="text/css" /> 
```

变成了

```
<%= Bundle.Css()
    .Add("~/<my_css_path>")
    .Render("~/<my_css_path>/combined_#.css") %> 
```

基本上就是这样！与javascript类似的想法。只要`debug="true"`在您的 web.config 中用于本地开发和`debug="false"`暂存/生产环境，SquishIt 就会使您的 CSS/JS 不分离且未缩小以用于本地开发，然后为您的其他环境组合、缩小和**散列**（用于缓存破坏）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T19:22:55.910

您可能还想研究 Cassette、RequestReduce 和 Bundler。

[Cassette](http://getcassette.net/)：自动对所有 JavaScript、CoffeeScript、CSS、LESS、Sass 和 HTML 模板进行排序、连接、缩小、缓存和版本化。

[RequestReduce](https://github.com/mwrock/RequestReduce) Makes your website faster - sometimes much faster - with almost no effort

*   Auto generates sprites from your background images
*   Optimizes Sprite PNG format and compression
*   Minifies CSS and Javascript
*   Optimizes caching headers and ETags
*   Runs on any IIS web site including Classic ASP and PHP
*   Can sync content accross multiple web servers
*   Works well with CDNs
*   Compiles Less, Sass and Coffee script

[Bundler](https://github.com/ServiceStack/Bundler): "Compile, Minify, Combine Less/Sass/Css/JS/CoffeeScript files. Easily use from MVC"

# r - 使用 geom_tile 和 ggplot 缩放热图

> ID：10407900
> 
> 赞同：1
> 
> 时间：2012-05-02T04:51:04.880
> 
> 标签：r, ggplot2, data-visualization

我正在尝试使用 ggplot 创建热图。我正在使用以下代码：

```
ggplot(ff, aes(x=Days, y=variable)) + 
  geom_tile(aes(fill=value),colour="blue") +
  scale_fill_gradient(limits=c(-1,1),low="blue",high="red",na.value="white") 
```

以下是我的问题：

1.  如何操作 geom_tile 中的比例单位（这样不是每 0.2 创建一次热图，而是使用每 0.1 或 0.05 的步长）
2.  是否可以使用我使用的更丰富的颜色模式（例如一些预定义的颜色模式，如热图函数
3.  我的数据框中有 NA 渲染为白色。有没有更好的方法来处理 NA 并使其透明化？

数据ff如下：

```
Days    variable            value
1   4   Short.Range.Days..2 -0.81747353

2   6   Short.Range.Days..2 -0.548692305

3   8   Short.Range.Days..2 -0.344287337

4   10  Short.Range.Days..2 -0.214313697

5   12  Short.Range.Days..2 -0.166991021

6   14  Short.Range.Days..2 -0.087645101

7   16  Short.Range.Days..2 0.003306877

8   18  Short.Range.Days..2 0.014363975

9   20  Short.Range.Days..2 0.022512668

10  22  Short.Range.Days..2 0.040381662

11  24  Short.Range.Days..2 0.062312058

12  26  Short.Range.Days..2 0.079032057

13  28  Short.Range.Days..2 0.062894323

14  30  Short.Range.Days..2 0.042261172

15  32  Short.Range.Days..2 0.032980453

16  34  Short.Range.Days..2 0.040095505

17  36  Short.Range.Days..2 0.039992051

18  38  Short.Range.Days..2 0.006244882

19  40  Short.Range.Days..2 -0.005749414

20  42  Short.Range.Days..2 -0.008062039

21  44  Short.Range.Days..2 -0.023538994

22  46  Short.Range.Days..2 0.000465245

23  48  Short.Range.Days..2 0.011341621

24  50  Short.Range.Days..2 0.031610377

25  52  Short.Range.Days..2 0.043711238

26  54  Short.Range.Days..2 0.052674899

27  56  Short.Range.Days..2 0.052963846

28  58  Short.Range.Days..2 0.042461133

29  60  Short.Range.Days..2 0.041458926

30  4   Short.Range.Days..4 NA

31  6   Short.Range.Days..4 -0.564954032

32  8   Short.Range.Days..4 -0.376387471

33  10  Short.Range.Days..4 -0.212740266

34  12  Short.Range.Days..4 -0.107961718

35  14  Short.Range.Days..4 -0.072863517

36  16  Short.Range.Days..4 -0.013560192

37  18  Short.Range.Days..4 -0.014244693

38  20  Short.Range.Days..4 0.003714455

39  22  Short.Range.Days..4 0.018009887

40  24  Short.Range.Days..4 0.038299314

41  26  Short.Range.Days..4 0.048826919

42  28  Short.Range.Days..4 0.042215816

43  30  Short.Range.Days..4 0.026936439

44  32  Short.Range.Days..4 0.015311212

45  34  Short.Range.Days..4 0.024097239

46  36  Short.Range.Days..4 -0.004329243

47  38  Short.Range.Days..4 -0.001842634

48  40  Short.Range.Days..4 0.000926598

49  42  Short.Range.Days..4 -0.011272775

50  44  Short.Range.Days..4 -0.009693908

51  46  Short.Range.Days..4 -0.001668079

52  48  Short.Range.Days..4 0.016156964

53  50  Short.Range.Days..4 0.042374732

54  52  Short.Range.Days..4 0.046776012

55  54  Short.Range.Days..4 0.045923267

56  56  Short.Range.Days..4 0.050384377

57  58  Short.Range.Days..4 0.045215707

58  60  Short.Range.Days..4 0.047902343
59  4   Short.Range.Days..6 NA

60  6   Short.Range.Days..6 NA

61  8   Short.Range.Days..6 -0.441329726

62  10  Short.Range.Days..6 -0.238801239

63  12  Short.Range.Days..6 -0.15476164

64  14  Short.Range.Days..6 -0.059414124

65  16  Short.Range.Days..6 -0.061674965

66  18  Short.Range.Days..6 -0.025409294

67  20  Short.Range.Days..6 -0.009152774

68  22  Short.Range.Days..6 -0.001703372

69  24  Short.Range.Days..6 -0.000247112

70  26  Short.Range.Days..6 0.0253183

71  28  Short.Range.Days..6 0.039929109

72  30  Short.Range.Days..6 -0.001386462

73  32  Short.Range.Days..6 0.008182091

74  34  Short.Range.Days..6 0.029240807

75  36  Short.Range.Days..6 -0.002854685

76  38  Short.Range.Days..6 -0.007379733

77  40  Short.Range.Days..6 -0.004630816

78  42  Short.Range.Days..6 -0.011870576

79  44  Short.Range.Days..6 -0.015306308

80  46  Short.Range.Days..6 -0.005366024

81  48  Short.Range.Days..6 0.006607034

82  50  Short.Range.Days..6 0.018644749

83  52  Short.Range.Days..6 0.026165148

84  54  Short.Range.Days..6 0.036606456

85  56  Short.Range.Days..6 0.048953922

86  58  Short.Range.Days..6 0.043359266

87  60  Short.Range.Days..6 0.038203532

88  4   Short.Range.Days..8 NA

89  6   Short.Range.Days..8 NA

90  8   Short.Range.Days..8 NA

91  10  Short.Range.Days..8 -0.381950109

92  12  Short.Range.Days..8 -0.218592498

93  14  Short.Range.Days..8 -0.101448266

94  16  Short.Range.Days..8 -0.046656489

95  18  Short.Range.Days..8 -0.042095639

96  20  Short.Range.Days..8 -0.026922636

97  22  Short.Range.Days..8 -0.015991528

98  24  Short.Range.Days..8 -0.011757444

99  26  Short.Range.Days..8 0.007997248

100 28  Short.Range.Days..8 0.036514373

101 30  Short.Range.Days..8 0.006496822

102 32  Short.Range.Days..8 -0.004494976

103 34  Short.Range.Days..8 0.013963243

104 36  Short.Range.Days..8 0.022236117

105 38  Short.Range.Days..8 0.040222229

106 40  Short.Range.Days..8 0.024015061

107 42  Short.Range.Days..8 0.014655371

108 44  Short.Range.Days..8 -0.003435171

109 46  Short.Range.Days..8 0.004921792

110 48  Short.Range.Days..8 0.025002607

111 50  Short.Range.Days..8 0.039823008

112 52  Short.Range.Days..8 0.028497197

113 54  Short.Range.Days..8 0.033465104

114 56  Short.Range.Days..8 0.037187076

115 58  Short.Range.Days..8 0.035133715

116 60  Short.Range.Days..8 0.044956739

117 4   Short.Range.Days..10    NA

118 6   Short.Range.Days..10    NA

119 8   Short.Range.Days..10    NA

120 10  Short.Range.Days..10    NA

121 12  Short.Range.Days..10    -0.315010077

122 14  Short.Range.Days..10    -0.159081521

123 16  Short.Range.Days..10    -0.071303675

124 18  Short.Range.Days..10    -0.084264406

125 20  Short.Range.Days..10    -0.055602557

126 22  Short.Range.Days..10    -0.015130798

127 24  Short.Range.Days..10    0.005610983

128 26  Short.Range.Days..10    0.009360452

129 28  Short.Range.Days..10    0.00674219

130 30  Short.Range.Days..10    0.002157462

131 32  Short.Range.Days..10    0.00349763

132 34  Short.Range.Days..10    -0.001412894

133 36  Short.Range.Days..10    0.003717493

134 38  Short.Range.Days..10    0.002120068

135 40  Short.Range.Days..10    0.006367466

136 42  Short.Range.Days..10    -0.000411258

137 44  Short.Range.Days..10    0.012566411

138 46  Short.Range.Days..10    0.014464965

139 48  Short.Range.Days..10    0.031026233

140 50  Short.Range.Days..10    0.04388952

141 52  Short.Range.Days..10    0.042532374

142 54  Short.Range.Days..10    0.06035085

143 56  Short.Range.Days..10    0.054378445

144 58  Short.Range.Days..10    0.05048477

145 60  Short.Range.Days..10    0.064256151

146 4   Short.Range.Days..12    NA

147 6   Short.Range.Days..12    NA

148 8   Short.Range.Days..12    NA

149 10  Short.Range.Days..12    NA

150 12  Short.Range.Days..12    NA

151 14  Short.Range.Days..12    -0.227372691

152 16  Short.Range.Days..12    -0.156908358

153 18  Short.Range.Days..12    -0.097853165

154 20  Short.Range.Days..12    -0.031213742

155 22  Short.Range.Days..12    -0.002203366

156 24  Short.Range.Days..12    0.027172361

157 26  Short.Range.Days..12    -0.002829266

158 28  Short.Range.Days..12    0.003026913

159 30  Short.Range.Days..12    0.005941515

160 32  Short.Range.Days..12    0.005652349

161 34  Short.Range.Days..12    0.005849875

162 36  Short.Range.Days..12    0.008607215

163 38  Short.Range.Days..12    -0.008046473

164 40  Short.Range.Days..12    -0.003125555

165 42  Short.Range.Days..12    0.018868117

166 44  Short.Range.Days..12    0.017476927

167 46  Short.Range.Days..12    0.011919605

168 48  Short.Range.Days..12    0.021178085

169 50  Short.Range.Days..12    0.041199466

170 52  Short.Range.Days..12    0.034283292

171 54  Short.Range.Days..12    0.029778266

172 56  Short.Range.Days..12    0.039525157

173 58  Short.Range.Days..12    0.046134386

174 60  Short.Range.Days..12    0.065925521

175 4   Short.Range.Days..14    NA

176 6   Short.Range.Days..14    NA

177 8   Short.Range.Days..14    NA

178 10  Short.Range.Days..14    NA

179 12  Short.Range.Days..14    NA

180 14  Short.Range.Days..14    NA
181 16  Short.Range.Days..14    -0.261691083

182 18  Short.Range.Days..14    -0.142068675

183 20  Short.Range.Days..14    -0.074500031

184 22  Short.Range.Days..14    -0.012082714

185 24  Short.Range.Days..14    0.005659554

186 26  Short.Range.Days..14    0.012468794

187 28  Short.Range.Days..14    -0.002796818

188 30  Short.Range.Days..14    -0.007217387

189 32  Short.Range.Days..14    -0.011216542

190 34  Short.Range.Days..14    -0.012975914

191 36  Short.Range.Days..14    0.001431991

192 38  Short.Range.Days..14    -0.016442151

193 40  Short.Range.Days..14    -0.028879887

194 42  Short.Range.Days..14    -0.008744675

195 44  Short.Range.Days..14    0.003396965

196 46  Short.Range.Days..14    0.006496634

197 48  Short.Range.Days..14    0.034291641

198 50  Short.Range.Days..14    0.037316392

199 52  Short.Range.Days..14    0.025819292

200 54  Short.Range.Days..14    0.017700215

201 56  Short.Range.Days..14    0.030761449

202 58  Short.Range.Days..14    0.042412907

203 60  Short.Range.Days..14    0.064320329

204 4   Short.Range.Days..16    NA

205 6   Short.Range.Days..16    NA

206 8   Short.Range.Days..16    NA

207 10  Short.Range.Days..16    NA

208 12  Short.Range.Days..16    NA

209 14  Short.Range.Days..16    NA

210 16  Short.Range.Days..16    NA

211 18  Short.Range.Days..16    -0.24576188

212 20  Short.Range.Days..16    -0.124836183

213 22  Short.Range.Days..16    -0.048221263

214 24  Short.Range.Days..16    -0.035029068

215 26  Short.Range.Days..16    -0.017987078

216 28  Short.Range.Days..16    -0.008633172

217 30  Short.Range.Days..16    -0.031737817

218 32  Short.Range.Days..16    -0.0329801

219 34  Short.Range.Days..16    -0.022857234

220 36  Short.Range.Days..16    -0.033276605

221 38  Short.Range.Days..16    -0.041135562

222 40  Short.Range.Days..16    -0.040310448

223 42  Short.Range.Days..16    -0.039212637

224 44  Short.Range.Days..16    -0.022545529

225 46  Short.Range.Days..16    -0.003491653

226 48  Short.Range.Days..16    0.019354126

227 50  Short.Range.Days..16    0.01404553

228 52  Short.Range.Days..16    0.009496747

229 54  Short.Range.Days..16    0.021609426

230 56  Short.Range.Days..16    0.053664294

231 58  Short.Range.Days..16    0.034393419

232 60  Short.Range.Days..16    0.051344379

233 4   Short.Range.Days..18    NA

234 6   Short.Range.Days..18    NA

235 8   Short.Range.Days..18    NA

236 10  Short.Range.Days..18    NA

237 12  Short.Range.Days..18    NA

238 14  Short.Range.Days..18    NA

239 16  Short.Range.Days..18    NA

240 18  Short.Range.Days..18    NA

241 20  Short.Range.Days..18    -0.201415281

242 22  Short.Range.Days..18    -0.094650643

243 24  Short.Range.Days..18    -0.050407965

244 26  Short.Range.Days..18    -0.011944599

245 28  Short.Range.Days..18    0.006048385

246 30  Short.Range.Days..18    -0.009465899

247 32  Short.Range.Days..18    -0.010465794

248 34  Short.Range.Days..18    -0.017793544

249 36  Short.Range.Days..18    -0.043409233

250 38  Short.Range.Days..18    -0.047284525

251 40  Short.Range.Days..18    -0.034924265

252 42  Short.Range.Days..18    -0.035220327

253 44  Short.Range.Days..18    -0.038604807

254 46  Short.Range.Days..18    -0.017079637

255 48  Short.Range.Days..18    0.016028302

256 50  Short.Range.Days..18    0.012447745

257 52  Short.Range.Days..18    0.030016509

258 54  Short.Range.Days..18    0.047367639

259 56  Short.Range.Days..18    0.050529707

260 58  Short.Range.Days..18    0.043451669

261 60  Short.Range.Days..18    0.057382559

262 4   Short.Range.Days..20    NA

263 6   Short.Range.Days..20    NA

264 8   Short.Range.Days..20    NA

265 10  Short.Range.Days..20    NA

266 12  Short.Range.Days..20    NA

267 14  Short.Range.Days..20    NA

268 16  Short.Range.Days..20    NA

269 18  Short.Range.Days..20    NA

270 20  Short.Range.Days..20    NA

271 22  Short.Range.Days..20    -0.150659349

272 24  Short.Range.Days..20    -0.087423089

273 26  Short.Range.Days..20    -0.038100588

274 28  Short.Range.Days..20    -0.046059396

275 30  Short.Range.Days..20    -0.049492703

276 32  Short.Range.Days..20    -0.025327689

277 34  Short.Range.Days..20    -0.027303766

278 36  Short.Range.Days..20    -0.029267308

279 38  Short.Range.Days..20    -0.030914711

280 40  Short.Range.Days..20    -0.020236697

281 42  Short.Range.Days..20    -0.020736933

282 44  Short.Range.Days..20    -0.021439136

283 46  Short.Range.Days..20    -0.010624047

284 48  Short.Range.Days..20    0.016708851

285 50  Short.Range.Days..20    0.031313822

286 52  Short.Range.Days..20    0.041814604

287 54  Short.Range.Days..20    0.041267541

288 56  Short.Range.Days..20    0.057323017

289 58  Short.Range.Days..20    0.041221109

290 60  Short.Range.Days..20    0.05872252

291 4   Short.Range.Days..22    NA

292 6   Short.Range.Days..22    NA

293 8   Short.Range.Days..22    NA

294 10  Short.Range.Days..22    NA

295 12  Short.Range.Days..22    NA

296 14  Short.Range.Days..22    NA

297 16  Short.Range.Days..22    NA

298 18  Short.Range.Days..22    NA

299 20  Short.Range.Days..22    NA

300 22  Short.Range.Days..22    NA

301 24  Short.Range.Days..22    -0.15090012

302 26  Short.Range.Days..22    -0.104523303

303 28  Short.Range.Days..22    -0.092845968

304 30  Short.Range.Days..22    -0.083648125

305 32  Short.Range.Days..22    -0.046778288

306 34  Short.Range.Days..22    -0.058309377

307 36  Short.Range.Days..22    -0.045664863

308 38  Short.Range.Days..22    -0.015971201

309 40  Short.Range.Days..22    -0.0296146

310 42  Short.Range.Days..22    -0.013281189

311 44  Short.Range.Days..22    -0.014848272

312 46  Short.Range.Days..22    -0.011940442

313 48  Short.Range.Days..22    0.021530103

314 50  Short.Range.Days..22    0.031175715

315 52  Short.Range.Days..22    0.024433409

316 54  Short.Range.Days..22    0.033544534

317 56  Short.Range.Days..22    0.022443897

318 58  Short.Range.Days..22    0.025883639

319 60  Short.Range.Days..22    0.038383722

320 4   Short.Range.Days..24    NA

321 6   Short.Range.Days..24    NA

322 8   Short.Range.Days..24    NA

323 10  Short.Range.Days..24    NA

324 12  Short.Range.Days..24    NA

325 14  Short.Range.Days..24    NA

326 16  Short.Range.Days..24    NA

327 18  Short.Range.Days..24    NA

328 20  Short.Range.Days..24    NA

329 22  Short.Range.Days..24    NA

330 24  Short.Range.Days..24    NA

331 26  Short.Range.Days..24    -0.219027869

332 28  Short.Range.Days..24    -0.161214748

333 30  Short.Range.Days..24    -0.13408164

334 32  Short.Range.Days..24    -0.08070956

335 34  Short.Range.Days..24    -0.082899097

336 36  Short.Range.Days..24    -0.062595752

337 38  Short.Range.Days..24    -0.024198995

338 40  Short.Range.Days..24    -0.004691925

339 42  Short.Range.Days..24    -0.014496501

340 44  Short.Range.Days..24    -0.022884719

341 46  Short.Range.Days..24    -0.014154586

342 48  Short.Range.Days..24    0.000281776

343 50  Short.Range.Days..24    0.0071921

344 52  Short.Range.Days..24    -0.001297935

345 54  Short.Range.Days..24    -0.0015083

346 56  Short.Range.Days..24    -0.004905885

347 58  Short.Range.Days..24    0.001062168

348 60  Short.Range.Days..24    0.016119001

349 4   Short.Range.Days..26    NA

350 6   Short.Range.Days..26    NA

351 8   Short.Range.Days..26    NA

352 10  Short.Range.Days..26    NA

353 12  Short.Range.Days..26    NA

354 14  Short.Range.Days..26    NA

355 16  Short.Range.Days..26    NA

356 18  Short.Range.Days..26    NA

357 20  Short.Range.Days..26    NA

358 22  Short.Range.Days..26    NA

359 24  Short.Range.Days..26    NA

360 26  Short.Range.Days..26    NA

361 28  Short.Range.Days..26    -0.243817468

362 30  Short.Range.Days..26    -0.175056647

363 32  Short.Range.Days..26    -0.118290191

364 34  Short.Range.Days..26    -0.077769693

365 36  Short.Range.Days..26    -0.026417708

366 38  Short.Range.Days..26    -0.016489546

367 40  Short.Range.Days..26    -0.012463804

368 42  Short.Range.Days..26    -0.008863066

369 44  Short.Range.Days..26    -0.017249374

370 46  Short.Range.Days..26    -0.016538643

371 48  Short.Range.Days..26    -0.004546857

372 50  Short.Range.Days..26    -0.003654304

373 52  Short.Range.Days..26    -0.002765445

374 54  Short.Range.Days..26    -0.003328998

375 56  Short.Range.Days..26    -0.00821013

376 58  Short.Range.Days..26    0.002902259

377 60  Short.Range.Days..26    0.005409932
378 4   Short.Range.Days..28    NA

379 6   Short.Range.Days..28    NA

380 8   Short.Range.Days..28    NA

381 10  Short.Range.Days..28    NA

382 12  Short.Range.Days..28    NA

383 14  Short.Range.Days..28    NA

384 16  Short.Range.Days..28    NA

385 18  Short.Range.Days..28    NA

386 20  Short.Range.Days..28    NA

387 22  Short.Range.Days..28    NA

388 24  Short.Range.Days..28    NA

389 26  Short.Range.Days..28    NA

390 28  Short.Range.Days..28    NA

391 30  Short.Range.Days..28    -0.2017481

392 32  Short.Range.Days..28    -0.134879691

393 34  Short.Range.Days..28    -0.062318376

394 36  Short.Range.Days..28    -0.034419214

395 38  Short.Range.Days..28    -0.017322394

396 40  Short.Range.Days..28    -0.029575546

397 42  Short.Range.Days..28    -0.023687556

398 44  Short.Range.Days..28    -0.012397918

399 46  Short.Range.Days..28    -0.009062897

400 48  Short.Range.Days..28    -0.011838491

401 50  Short.Range.Days..28    -0.012319173

402 52  Short.Range.Days..28    -0.00739976

403 54  Short.Range.Days..28    -0.009963764

404 56  Short.Range.Days..28    -0.013427471

405 58  Short.Range.Days..28    -0.016496869

406 60  Short.Range.Days..28    -0.007558199

407 4   Short.Range.Days..30    NA

408 6   Short.Range.Days..30    NA

409 8   Short.Range.Days..30    NA

410 10  Short.Range.Days..30    NA

411 12  Short.Range.Days..30    NA

412 14  Short.Range.Days..30    NA

413 16  Short.Range.Days..30    NA

414 18  Short.Range.Days..30    NA

415 20  Short.Range.Days..30    NA

416 22  Short.Range.Days..30    NA

417 24  Short.Range.Days..30    NA

418 26  Short.Range.Days..30    NA

419 28  Short.Range.Days..30    NA

420 30  Short.Range.Days..30    NA

421 32  Short.Range.Days..30    -0.181026029

422 34  Short.Range.Days..30    -0.089303464

423 36  Short.Range.Days..30    -0.04590373

424 38  Short.Range.Days..30    -0.048539444

425 40  Short.Range.Days..30    -0.053611014

426 42  Short.Range.Days..30    -0.029848611

427 44  Short.Range.Days..30    -0.038913148

428 46  Short.Range.Days..30    -0.035174622

429 48  Short.Range.Days..30    -0.025815231

430 50  Short.Range.Days..30    -0.025238126

431 52  Short.Range.Days..30    -0.019484408

432 54  Short.Range.Days..30    -0.026327212

433 56  Short.Range.Days..30    -0.027493418

434 58  Short.Range.Days..30    -0.036467761

435 60  Short.Range.Days..30    0.003688413 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:24:39.450

1.  瓦片的大小基于数据点之间的最小距离。你想要更小的瓷砖吗？然后提供具有高分辨率的数据。
2.  查看 scale_gradientn、scale_brewer 或 scale_hue
3.  默认情况下，缺失值是透明的（[http://had.co.nz/ggplot2/geom_tile.html](http://had.co.nz/ggplot2/geom_tile.html)）

# asp.net - 如何将参数值发布到一些操作链接

> ID：10407901
> 
> 赞同：0
> 
> 时间：2012-05-02T04:51:11.507
> 
> 标签：asp.net, asp.net-mvc-3

在我看来，我有 10 个链接，每个链接都与一些独特的价值相关联。现在我想在我的控制器操作中使用该关联值，并且从该操作中我想将流重定向到基于该值的其他操作。
但条件是我不想在 url 上显示它。
我怎样才能做到这一点？

*   我试过`ajax.post/@Ajax.ActionLink`了，但这样做不会有助于重定向到另一个动作。
*   有什么路线我需要做的吗？

**看法**

```
 <ul>@foreach (var item in Model)
    {<li>
  @Ajax.ActionLink(item.pk_name, "Index","Candidate", new { para1= item.para1 }
             , new AjaxOptions { HttpMethod = "POST" })</li>
    }</ul> 
```

**行动**

```
[HttPost]
public ActionResult(int para1)
{
return RedirectToAction(para1,"anotherController");
} 
```

我使用 ajax post 在 para1 获得价值（这是我主要需要的），但这里还想根据 para1 值（即动作名称）重定向我的应用程序流。
**Confision**：在这里我不确定这是做这件事的正确方法。所以我问你们我是否应该去使用 ajax post 的路线图来解决我的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:29:08.257

我认为您应该创建一个在单击时调用并传递唯一参数的 jQuery 函数。在该函数中，您可以使用 AJAX 并将其发布到适当的控制器方法上。

例子：

```
<input type="button" id="@item.pk_name" onclick="getbuttonvalue(@item.para1);"  /> 
```

在脚本中

```
 <script type="text/javascript">
 $(document).ready(function () {
function getbuttonvalue(para1) {
            $.ajax({
                cache: false,
                type: "POST",
                dataType: 'json',

                url: "/controller/method/" + para1,

                success: function (data) {
                }

            }); 
```

`}`

```
 }); 
```

`</script>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:03:46.670

如果您只需要根据用户点击的内容重定向用户而不向他显示链接，我相信实现此目的的最佳方法是通过客户端编码。

在我看来，不需要通过服务器接受任何请求来更改页面以进行这​​种低复杂度的重定向。

**看法**

```
// HTML
// Might be broken, been awhile since I worked with MVC
// Can't really remember if that's how you put variables in HTML
<ul id="button-list">
    @foreach(var item in Model)
    {
        <li class="buttonish" data-para1="@item.para1">@item.pk_name</li>
    }
</ul>

// JS
// I wouldn't do any server related work
$('#button-list li.buttonish').click(function(){
    // Your controller and action just seem to redirect to another controller and send in the parameter
    window.location.href = "/controller/method/" + $(this).data('para1');
}); 
```

# solr - 如何在 conf 文件中配置 SOLR 查询

> ID：10407904
> 
> 赞同：0
> 
> 时间：2012-05-02T04:51:35.527
> 
> 标签：solr

我的要求很简单。

我需要使用类似于 SQL LIKE 的关键字进行搜索。

现在搜索显示“单词”的结果，而不是检查部分字符。

## 前任：-

*   查询词语：“测试”
*   预期结果：“test%”——给出“test”、“tested”、“testing”等...
*   实际结果：“测试”

我发现了许多关于 SOLR 的查询建议。但我需要找到将其放在 conf xml 文件中的确切机制。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:02:41.377

快速而肮脏的解决方案是使用星号 (*) 在搜索查询中使用通配符。例如： `test*`

更合适的解决方案是在索引和查询数据时使用词干去除常见的词尾。在默认模式中，`text_en_splitting`字段类型将为您执行此操作。只需将您的字段定义为 text_en_splitting。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:27:45.750

您正在构建自动完成功能吗？

如果是这样，请使用`Suggester`. 它是 Solr 的一部分，它使用字典文件或您指定的索引中的字段非常有效地完成您所说的工作。

[http://wiki.apache.org/solr/Suggester](http://wiki.apache.org/solr/Suggester)

# ruby-on-rails - 工厂未注册：用户

> ID：10407905
> 
> 赞同：30
> 
> 时间：2012-05-02T04:51:36.837
> 
> 标签：ruby-on-rails, ruby, factory-bot

我正在关注 Michal Hartls Rails 教程第 7 章。我已经安装了 Factory girl gem。运行测试时，我不断收到此错误

```
Failures:

 1) UsersController GET 'show' should be successful
     Failure/Error: @user = FactoryGirl.create(:user)
     ArgumentError:
       Factory not registered: user
     # ./spec/controllers/users_controller_spec.rb:10:in `block (3 levels) in <top (required)>'

Finished in 0.66336 seconds 42 examples, 1 failure

Failed examples:

rspec ./spec/controllers/users_controller_spec.rb:14 # UsersController GET 'show' should be successful 
```

宝石文件

```
group :test do
  gem 'autotest', '4.4.6'
  gem "autotest-growl", "~> 0.2.16"
  gem "autotest-rails", "~> 4.1.2"
  gem "rspec", "~> 2.9.0"
  gem 'rspec-rails',  '2.9.0'
  gem 'webrat', '0.7.3'
  gem "spork",  '0.9.0'
  gem 'annotate', '~> 2.4.1.beta'
  gem "factory_girl", "~> 3.2.0"
end
# See https://github.com/sstephenson/execjs#readme for more supported runtimes
gem 'therubyracer', :platform => 
```

我的 user_controller_spec.rb 是

```
require 'spec_helper'

describe UsersController do

  render_views

  describe "GET 'show'" do
    before(:each) do
    @user = FactoryGirl.create(:user)
    end

    it "should be successful" do
      get :show, :id => @user
      response.should be_success
    end
  end

  describe "GET 'new'" do
    it "should be successful" do
      get :new
      response.should be_success
    end

    it "should have the right title" do
      get :new
      response.should have_selector('title', :content => "Sign up")
    end
  end
end 
```

我的 factory.rb 是

```
FactoryGirl.create :user do |user|
  user.name                   "Mark Brown"
  user.email                 "mbrown@yahoo.com"
  user.password               "foobar"
  user.password_confirmation  "foobar"
end 
```

我变了

```
Factory(:name) 
```

至

```
FactoryGirl.create(:user) 
```

在我的第 10 行，`user_controller_spec.rb`因为我收到了贬值警告。我认为这会解决它，但现在我刚刚得到。

```
Factory not registered: user 
```

有人可以告诉我发生了什么吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-12T00:01:02.973

我已经修好了。

解决方案是在我的 Gemfile中更改`gem 'factory_girl'`为。`gem 'factory_girl_rails'`

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-06-14T06:04:06.767

当我在那一章中第一次使用 FactoryGirl 时，我遇到了同样的错误，如果你正在使用它，我需要做的就是重新启动服务器和 Spork。希望能帮助到你

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-07T14:35:39.783

如果你先定义工厂，而不是创建它呢？尝试这个：

```
FactoryGirl.define do
  factory :user do
    name                  "Mark Brown"
    email                 "mbrown@yahoo.com"
    password              "foobar"
    password_confirmation "foobar"
  end 
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-16T21:07:54.163

您将需要测试组下的 gem 'factory_girl_rails'

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-15T03:15:02.890

在你的 Gemfile 你应该用这个替换

```
gem "factory_girl_rails", "~> 4.0" 
```

代替

```
gem "factory_girl", "~> 3.2.0" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-17T11:45:36.480

我使用 pry 作为我的 IRB。当我从我的宝石中取出它时，我能够让工厂女孩正常使用。

```
rails c -e test

irb ->  FactoryGirl.create(:user) 
```

也许有人可以解释如何使用 pry 来完成这项工作。

# objective-c - CodeRunner 程序输入字段如何使用？

> ID：10407906
> 
> 赞同：2
> 
> 时间：2012-05-02T04:51:40.773
> 
> 标签：objective-c, c, coderunner

[CodeRunner](http://krillapps.com/coderunner/)中使用的自定义运行表程序输入字段如何用于C 或 Objective-C 程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:00:25.003

在程序输入文本框中输入的文本将通过标准输入发送到您的程序/脚本。您可以像使用您选择的语言访问标准输入一样访问输入。

在 C 中，您将使用标准`fread`的 ,`fgets`等`fgetc`函数。以下示例将程序输入中提供的文本回显到控制台：

```
#include <stdio.h>

int main(int argc, char *argv[]) {
    char str[80];

    while(fgets(str, sizeof(str), stdin)) {
        printf("%s", str);
    }
} 
```

# asp.net - 在 asp.net 中动态地在新选项卡中打开 Web 表单

> ID：10407914
> 
> 赞同：0
> 
> 时间：2012-05-02T04:52:32.063
> 
> 标签：asp.net

我有一个母版页。并且标签容器位于母版页上。此母版页有一个菜单。现在我想要单击菜单项，WebForm/UserControl 在选项卡容器的选项卡面板中打开，并带有关闭按钮。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:42:49.263

该页面将正常回发，但如果您使用 Ajax，那么它看起来就像单击主页面链接动态加载了选项卡内容。如果您可以发布代码，可以提供更多帮助。

如果您希望有一个带有关闭按钮的弹出面板（没有正确理解您的问题），请使用模型弹出扩展器。

# lua - Lua 中是否有缩短的“if then”语法？

> ID：10407915
> 
> 赞同：4
> 
> 时间：2012-05-02T04:52:40.313
> 
> 标签：lua

Lua 中是否有缩短的“if / then”语法（我专门使用 Corona SDK），就像在其他一些语言中一样......特别是沿着：

```
 res = (a == b) ? "It worked" : "It did NOT work" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T04:56:12.310

为了表示`x = a ? b : c`，[lua-users wiki](http://lua-users.org/wiki/TernaryOperator)建议：

> 一个经常使用和强烈推荐的解决方案是以一种非常接近三元运算符的方式组合`and` 和二元运算符：`or`
> 
> ```
> x = a and b or c 
> ```

为了表示`x = a ? b : c ? d : e`，wiki 进一步建议：

> ```
> x = a and b or c and d or e 
> ```

**警告：**如果`b`或`d`曾经是`nil`或，此技术可能会失败`false`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-02T05:48:57.957

常见的习惯用法是使用和/或构造，因为布尔表达式在 Lua 中是短路的。

```
res  = a == b and "It worked" or "It did NOT work" 
```

虽然我个人更喜欢 if/then/else 几乎在所有情况下。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-29T09:12:50.727

lua没有捷径，只有这个

```
 a=a or "hi" 
```

就像：

```
 if not(a) then  a="hi" end 
```

# salesforce - Salesforce.com 和 database.com 集成

> ID：10407918
> 
> 赞同：1
> 
> 时间：2012-05-02T04:53:15.190
> 
> 标签：salesforce

我们正在设计一个项目，我们计划在其中使用 20 名 SFDC 用户（经理）和 100 多名 database.com 轻用户（销售员）。我们的想法是，SDFC 用户将使用该网站查看报告等，而其他人将使用我们的移动软件，该软件依赖于 API 调用来创建订单和类似的东西。

我以前从未使用过 database.com，而且我是 force.com 的新手。我刚刚创建了一个 db.com 帐户，但我不知道如何将两个系统连接在一起。我希望这两种类型的用户都能访问相同的记录，因此如果销售员创建订单，经理可以在报告和在线工具中看到该订单。怎样才能做到这一点？我应该注意什么限制？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:08:55.393

看看这些专有网站是否有公共 API。

您可以与它们交互的唯一方法是通过 API，或者通过模拟 Web 浏览器的真正骇人听闻的脚本。因此，如果他们没有公共 API，您应该在他们的联系我们页面上致电相应的部门。

# asp.net - 如何在asp.net中获取当前用户位置

> ID：10407921
> 
> 赞同：0
> 
> 时间：2012-05-02T04:53:56.620
> 
> 标签：asp.net, localization, geolocation

有一个网站支持商店信息，如食品、饮料、高尔夫、水疗。该网站提供有关泰国、香港、新加坡和柬埔寨的信息。如果来自泰国的用户连接本网站。默认菜单将设置为泰国。如果来自香港的用户使用本网站。我们将默认菜单设置为香港。如果来自其他国家/地区的用户不在列表中。默认设置为泰国。

做这个的最好方式是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T05:01:38.507

我使用谷歌加载器[https://developers.google.com/loader/](https://developers.google.com/loader/)。

[关于 SO](https://stackoverflow.com/questions/2053624/getting-user-location-with-google-loader-clientlocation-working-for-me-but-not-o)的类似问题。接受的答案甚至有一个示例页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T05:09:28.960

您可以通过以下服务获取传入请求的位置。这会给你国家和城市。

```
http://api.hostip.info/get_html.php?ip=207.46.197.32 
```

有一个开源可以为你做同样的事情，请看[这里](http://www.codeproject.com/Articles/28363/How-to-convert-IP-address-to-country-name)

如果您需要更多，请访问[这里](https://stackoverflow.com/questions/2665196/tracking-ip-address-and-country-nameasp-net)

# agile - 应用敏捷方法的问题

> ID：10407922
> 
> 赞同：0
> 
> 时间：2012-05-02T04:54:15.093
> 
> 标签：agile, scrum, cp

在团队编程项目中使用敏捷方法时，当几个人需要在每个人都使用的东西上工作时应该做什么。例如，有一个用户实体，两个人要做需要使用该实体的需求。那么，首先创建一个骨架，然后分配活动？或者在这些情况下的程序是什么。

其次，是否有可能找到解决应用此类方法时可能出现的此类问题的信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:15:59.097

Scrum 最棒的地方在于，它是识别**不良实践**的绝佳工具。这是其中一种情况。敏捷团队应该尽可能多地参与**相同**的需求（需求、功能、用户故事——同样的事情）。成员之间的分工应该基于完成需求所需的**任务**，而不是需求本身。

每个任务都将根据需要对某个组件进行的修改来定义。这样做不仅会解决问题（没有人在编写相同的代码），而且会团结团队成员的努力，让他们像一个真正的团队一样运作，而不是碰巧共享一个房间的不同个人群体和一个经理。

至于关于这个主题的官方信息，我可以建议阅读任何有关 Scrum 的书，但您可能需要关注以下站点：

*   [Scrum 简介](http://www.mountaingoatsoftware.com/topics/scrum)
*   [迈克·科恩的博客](http://www.mountaingoatsoftware.com/blog/)
*   [Scrum.org](http://www.scrum.org/ "Scrum.org")

几本好书：

*   [Scrum 的成功——迈克·科恩](https://rads.stackoverflow.com/amzn/click/com/0321579364)
*   **免费电子书**-[战壕中的 Scrum 和 XP - Henrik Kniberg](http://www.crisp.se/henrik.kniberg/ScrumAndXpFromTheTrenches.pdf)

最后，如果你原谅这个无耻的插件，你可以看看我的博客——我有几篇关于这个主题的文章（比如[这篇](http://www.softwareandi.com/2012/01/10-signs-that-your-team-isnt-really.html)文章），还有一些来自我在软件团队中实施敏捷方法的经验。

# wcf - 数据库域服务 不生成代理实体

> ID：10407930
> 
> 赞同：1
> 
> 时间：2012-05-02T04:55:07.547
> 
> 标签：wcf, entity-framework, ef-code-first, ria, code-first

我在多台机器上的 Visual Studio 2010 和 11 beta 上都试过这个。我还使用了 EF 4.3 和 5.0 - beta 2。我正在 silverlight 5 中尝试代码优先的方法。

我创建了一个 DbDomainService 并为其创建了 CRUD 操作，但在客户端没有创建代理实体。我在 WCF 类库中执行此操作。以下是它的创建方式：我将一个项目添加到解决方案（WCF RIA 服务类库）。客户端和服务端项目会自动添加并通过 RIA 链接链接。我创建了我的实体和 dbcontext（参见下面的源代码）。我创建了我的域服务类（向导只显示了一半的时间，也有很多错误）并确保有 CRUD 操作。我重建并显示客户端项目上的所有文件，并且没有生成的代码。如果我将 DomianService 类更改为从 DomainService 而不是 DbDomainService 继承，那么我的代理实体会按预期在客户端生成。

构建解决方案时，我收到以下警告：

警告 1 创建 MEF 组合容器时发生以下异常：无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。将使用默认代码生成器。AProgram.Client.RIAServices

请帮忙 ：）

```
 namespace AProgram.Server.RIAServices.Models.Sales
    {

       public class Customer
       {
          [Key]
          public int CustomerID { get; set; }

          [Required]
          [MaxLength(50)]
          public string CustomerName { get; set; }
       }

    }

    namespace AProgram.Server.RIAServices
    {
       public class SalesDbContext : DbContext
       {
          public DbSet<Customer> Customers { get; set; }
       }
    }

    namespace AProgram.Server.RIAServices
    {
       using System;
       using System.Collections.Generic;
       using System.ComponentModel;
       using System.ComponentModel.DataAnnotations;
   using System.Linq;
   using System.ServiceModel.DomainServices.Hosting;
   using System.ServiceModel.DomainServices.Server;

   // TODO: Create methods containing your application logic.
   [EnableClientAccess()]
   public class SalesDomainService : DbDomainService<SalesDbContext>
   {
      [Query(IsComposible=false)]
      public Customer GetCustomer(int id)
      {
         return this.DbContext.Customers.Find(id);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T04:00:09.673

我为任何好奇的人找到了答案。Ria Services 似乎只与 EF 4.1 兼容。我在代码项目文章中找到了一种解决方法：

```
<runtime>
     <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
       <dependentAssembly>
         <assemblyIdentity name="EntityFramework" 
           publicKeyToken="b77a5c561934e089" culture="neutral" />
         <bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0" />
       </dependentAssembly>
     </assemblyBinding>
 </runtime> 
```

只需将其添加到您的 Web.config 文件中，或者如果使用 Ria 服务类库，请将其添加到 app.config 并将 app.config 重命名为 web.config。

这是文章的链接：[代码项目文章](http://www.codeproject.com/Articles/354715/Creating-a-WCF-RIA-Services-Class-Library-for-a-Si)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:03:58.453

我也遇到了 RIA 和 EF 的问题，解决方法是使用 NuGetPackage [RIAServices.EntityFramework](http://nuget.org/packages/RIAServices.EntityFramework/4.1.60730.0)。问题是，RIA 服务仅支持某些版本的 EF。目前，它看起来只支持 <= 4.1。

# cakephp - 如何在 cakephp 的另一个控制器中访问控制器方法？

> ID：10407931
> 
> 赞同：0
> 
> 时间：2012-05-02T04:55:10.210
> 
> 标签：cakephp

我在 B 类中扩展了 A 类，我想在 B 类中使用 A 类方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:30:38.177

要在两个控制器之间共享方法，请将函数放在`AppController`.

要共享与单个功能相关的一组方法，请[创建一个新组件](http://book.cakephp.org/2.0/en/controllers/components.html#creating-a-component)并在两个控制器中使用它。这是正确的 OOP 方式。

# iphone - 在 MPMoviePlayerController 中播放视频

> ID：10407932
> 
> 赞同：0
> 
> 时间：2012-05-02T04:55:31.453
> 
> 标签：iphone, video, mpmovieplayercontroller

我在使用 MPMoviePlayerController 播放嵌入式视频文件时遇到问题。我的代码：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectoryPath = [paths objectAtIndex:0];

NSString *proud = [[documentsDirectoryPath stringByAppendingPathComponent:@"archives"] stringByAppendingPathComponent:selectedCountry];

NSString *content = [proud stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];    
NSURL *url = [[NSURL fileURLWithPath:content] retain];   

NSLog(@"%@", url);
player =

[[MPMoviePlayerController alloc] initWithContentURL: url];

[player prepareToPlay];

player.allowsAirPlay = YES;
player.scalingMode = MPMovieScalingModeAspectFit;

player.view.frame = self.view.frame;

[self.view addSubview: player.view];
[player setFullscreen:YES animated:YES];

// ...

[[NSNotificationCenter defaultCenter] 
 addObserver:self
 selector:@selector(movieFinishedCallback:)
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:player];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(exitedFullscreen:) name:MPMoviePlayerDidExitFullscreenNotification object:player];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayerWillExitFullscreen:)
                                             name:MPMoviePlayerWillExitFullscreenNotification
                                           object:player];

[player play]; 
```

NSLog 返回

```
var/mobile/Applications/EF62B00B-2906-435C-BC84-036FE14D89E9/Documents/archives/Test%2520-%2520Daddy%2520May%25201%252001:26:35%2520PM.mp4 
```

但是视频从不播放，尽管 MovieDone 确实从我在 MPMoviePlayerController MovieFinished Callback 中使用的日志中触发。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T05:22:05.843

我想你只播放视频文件然后试试这个代码：

```
NSString *urlStr=[[NSBundle mainBundle]pathForResource:@"Video1VoiceOver.mp4" ofType:nil];
NSURL *url = [NSURL fileURLWithPath:urlStr];
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
[self.view addSubview:moviePlayer.view];
moviePlayer.view.frame = CGRectMake(174,154,720,428);  
[moviePlayer play];

[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(moviePlayBackDidFinish) 
                                             name:MPMoviePlayerPlaybackDidFinishNotification 
                                           object:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:12:39.713

试试这个

```
MPMoviePlayerViewController *playerViewController =[[MPMoviePlayerViewController alloc]initWithContentURL:[NSURL fileURLWithPath:@"FileName"]];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedCallback:)name:MPMoviePlayerPlaybackDidFinishNotification object:[playerViewController moviePlayer]];
playerViewController.view.frame=CGRectMake(Set the frame);
[self.view addSubview:playerViewController.view];
//---play movie---

player = [playerViewController moviePlayer]; 
```

# xml - 如何在xslt中为句子中每个字符串的第一个字母创建链接？

> ID：10407936
> 
> 赞同：0
> 
> 时间：2012-05-02T04:55:52.943
> 
> 标签：xml, xslt, xslt-2.0

假设我有一个变量 `<wish>Hi jony</wish>` ，我必须遍历 wish 元素，并且必须为元素中字符串的第一个字母创建链接。输出应该是`<a href="#H">H</a> <a href="#j">j</a>.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:29:09.633

我认为这就是你想要的：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" encoding="utf-8" indent="yes"/>

    <xsl:template match="*">
        <xsl:copy>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="wish">
        <xsl:copy>
            <xsl:call-template name="link-first-letters">
                <xsl:with-param name="text" select="."/>
            </xsl:call-template>            
        </xsl:copy>
    </xsl:template>

    <xsl:template name="link-first-letters">
        <xsl:param name="text"/>

        <xsl:variable name="first-letter" select="substring($text, 1, 1)"/>

        <a href="#{$first-letter}"><xsl:value-of select="$first-letter"/></a>

        <xsl:if test="contains($text, ' ')">
            <xsl:text> </xsl:text>
            <xsl:call-template name="link-first-letters">
                <xsl:with-param name="text" select="substring-after($text, ' ')"/>
            </xsl:call-template>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

应用于此输入文档

```
<?xml version="1.0"?>
<root>
    <wish>Hi jony</wish>
</root> 
```

它产生以下输出：

```
<root>
    <wish><a href="#H">H</a> <a href="#j">j</a></wish>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:52:52.847

**这个 XSLT 2.0 转换**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="wish">
     <xsl:for-each select="tokenize(., '\W+')">
      <xsl:variable name="vFirst" select="substring(.,1,1)"/>
      <a href="#{$vFirst}"><xsl:value-of select="$vFirst"/></a>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<wish>Hi jony</wish> 
```

**产生想要的结果**：

```
<a href="#H">H</a>
<a href="#j">j</a> 
```

**请注意**：不需要使用`concat()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:44:22.007

您需要一个递归模板来拆分字符串，然后构建元素。以下是您可以应用的模板：

```
 <xsl:template match="Wish">
    <xsl:call-template name="links">
      <xsl:with-param name="text" select="." />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="links">
    <xsl:param name="text" />
    <xsl:variable name="newtext" select="concat(normalize-space($text), ' ')" />
    <xsl:variable name="first" select="substring-before($newtext, ' ')" />
    <xsl:variable name="remaining" select="normalize-space(substring-after($newtext, ' '))" />
    <xsl:element name="a">
      <xsl:attribute name="href">#<xsl:value-of select="substring($first, 1, 1)"/></xsl:attribute>
      <xsl:value-of select="substring($first, 1, 1)"/>
    </xsl:element>
    <xsl:if test="$remaining != ''">
      <xsl:call-template name="links">
        <xsl:with-param name="text" select="$remaining" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:45:31.540

你在正确的轨道上。清理和简化后它看起来像这样：

```
<xsl:for-each select="tokenize($keyword,' ')">
    <xsl:variable name="letter" select="substring(.,1,1)"/>
    <a href="{concat('#',$letter)}">
        <xsl:value-of select="$letter"/>
    </a>
</xsl:for-each> 
```

根据您对 tokenize 的使用，我假设您使用的是 XSLT 2.0，它不需要 harpo 的递归解决方案。

# android - Android WebView 禁用 标签

> ID：10407937
> 
> 赞同：1
> 
> 时间：2012-05-02T04:56:07.387
> 
> 标签：android, html, audio, webview

我的 Android WebView 正在加载第 3 方 URL。

即http://www.desiringgod.org/resource-library/sermons/gods-good-news-concerning-his-son

它工作得很好，但是由于通过 javascript 加载的标记，WebView 在页面加载后立即开始下载 mp3 而无需用户输入。

我曾尝试在进度完成后调用 WebView.stopLoading() 以及 shouldOverrideUrlLoading(WebView view, String url) 以尝试捕捉以“.mp3”结尾，但它似乎无法阻止它！

我主要关心的是它自动下载的数据量，如果有任何方法可以在页面加载之前停止下载或替换标签，那就太好了。

谢谢！

**更新：**实际上我发现在没有用户提示的情况下加载音频标签的原因是因为它使用了闪存。一旦我在 webview 上启用插件，它就会自行停止下载。但是，我仍然有兴趣知道如何在没有用户知识的情况下停止 Android 中的 webviews 中的标签在后台下载数据！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:18:46.497

我不知道 WebView 本身，但是如果`audio`正在使用标签，您可以通过将`preload`属性设置为`none`.

# mysql - 自动更新数据库中的价格，mysql

> ID：10407950
> 
> 赞同：1
> 
> 时间：2012-05-02T04:58:13.057
> 
> 标签：mysql

我目前正在从一个站点获取产品，将它们存储在数据库中，然后将它们的价格显示在另一个站点上。我正在尝试从一个站点获取价格以在我的数据库中每天更新，以便可以将新的更新价格显示到我的另一个站点上。

现在我正在使用商品编号获取产品，但必须手动输入并更新任何已更改的价格。

我猜我将不得不使用某种 cronjob 但不知道如何做到这一点。我没有使用 cronjobs 的经验，并且是 php 的菜鸟。

有任何想法吗？谢谢！

* * *

我已经阅读了 foreach 循环并编写了一些代码。但是我的 foreach 循环只为第一个项目编号运行一次。foreach 循环运行，然后转到“api.php”页面，然后停止。它不会为每个项目编号不断循环。我如何告诉它遍历我数据库中的所有项目编号？

另外，如果您在我的代码中发现任何其他错误，请告诉我。谢谢

```
 ....

$itemnumber = array("".$result['item_number']."");

foreach ($itemnumber as $item_number) {

echo "<form method=\"post\" action=\"api.php\" name=\"ChangeSubmit\" id=\"ChangeSubmit\">";
echo "<input type=\"text\" name=\"item_number\" value=\"{$item_number}\" />";

echo "<script type=\"text/javascript\">
function myfunc () {
var frm = document.getElementById(\"ChangeSubmit\");
frm.submit();
}
window.onload = myfunc;
</script></form>";

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:06:51.183

如果您已经从外部站点检索产品数据并将其存储在本地数据库中，那么从同一来源更新价格对您来说应该没有问题。只需检索数据，以循环或类似方式遍历它，`foreach`然后根据商品编号将价格更新到数据库中。

创建更新脚本并手动运行后，将其添加为 cronjob 就像运行命令“crontab -e”并添加此行以在每个午夜执行脚本一样简单：

```
0 0 * * * /usr/local/bin/php /path/to/your/script.php 
```

不要忘记为您的系统使用正确的 PHP 路径，`which php`在 shell 中运行会告诉您路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:06:08.900

如果您的服务器上有 cronjob，那将非常明显 - 您制作一个更新它的 PHP 脚本，并将其放入每日的 cronjob 中。

但是，我这样做：

方法一：在每次页面请求开始时，检查最后一次“更新”时间（存储方式由您选择）。如果超过一天，请进行更新并将“更新”时间设置为当前时间。

这样，每次有人加载页面并且距离上次更新已经过去一天时，它都会为他们更新。但是，这意味着对于随机用户来说，它会变慢，每天一次。如果这是不可接受的，有一点改变：

方法2：如果需要更新（通过上述检查方法），对数据发起异步请求，处理页面的其余部分，刷新给用户，然后在while循环中等待请求完成并更新它。

方法 2 的缺点是用户不会看到更新的值，但好处是不再需要等待它们。

# android - android: 闪屏咨询

> ID：10407954
> 
> 赞同：1
> 
> 时间：2012-05-02T04:59:18.220
> 
> 标签：android

我试着让我的屏幕像这样闪烁：

```
for (int i=0;i<10;i++)
        {
           targetView.setBackgroundColor(Color.BLUE);
           for (int j=0;j<500;j++); //delay
           targetView.setBackgroundColor(Color.RED);
        } 
```

但它不会工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T05:08:18.357

尝试这个，

```
targetView.setBackgroundColor(Color.BLUE);
try {
            Thread.sleep(5000); // milliseconds to wait...
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
targetView.setBackgroundColor(Color.RED); 
```

**编辑**

```
public class TSActivity extends Activity {

     LinearLayout lin;
     private int finalStatus = 0;
     private Handler colorHandler = new Handler();
     boolean flag = false;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        lin = (LinearLayout)findViewById(R.id.linMain);

            new Thread(new Runnable() {
                public void run() {
                    while (finalStatus < 100) {

                        // process some tasks
                        finalStatus = doSomeTasks();

                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                        // Update the color
                        colorHandler.post(new Runnable() {
                            public void run() {
                                if(flag)
                                {
                                 lin.setBackgroundColor(Color.BLUE);
                                 flag = false;
                                }
                                else
                                {
                                    lin.setBackgroundColor(Color.GREEN);
                                     flag = true;
                                }
                            }
                        });
                    }

                }
            }).start();
    }

 // color changer simulator... a really simple
    public int doSomeTasks() {

        long fileSize = 0;

        while (fileSize <= 1000000) {

            fileSize++;

            if (fileSize == 100000) {
                return 10;
            } else if (fileSize == 200000) {
                return 20;
            } else if (fileSize == 300000) {
                return 30;
            }
            // ...add your own
            }

        return 100;
    }
} 
```

希望对你有帮助..

谢谢...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:35:50.970

您也可以使用处理程序。

```
Runnable r=new Runnable(){
    public void run(){
        if(red){ 
            targetView.setBackgroundColor(Color.RED);
            red=false;
        }
        else{
            targetView.setBackgroundColor(Color.BLUE);
            red=true;
        }
        if(!stop_blinking) handler.postDelayed(this,1000);

    }
};

handler=new Handler();
handler.postDelayed(r,1000); //1000 is in mili secs. 
```

stop_blinking 是布尔值，当您希望视图停止闪烁时需要设置它。

# google-app-engine - Google App Engine：此应用程序不存在

> ID：10407955
> 
> 赞同：18
> 
> 时间：2012-05-02T04:59:59.183
> 
> 标签：google-app-engine

当我在 GAE 中部署我的应用程序时，出现此错误

```
 This application does not exist (app_id=u'qsse-ss'). 
```

场景是这个应用程序已经被其他一些用户部署到 GAE，现在我做了一些更改，我想在 GAE 中更新，所以现在当我在 Eclipse 中右键单击我的应用程序并转到“部署到 appengine”它给出我这个错误

我做错了什么，正确的做法是什么

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-24T11:07:35.113

当我提供一个不是所有者/开发者的用户名时，这也发生在我身上，甚至使用 -e 或 --email 指定不同的帐户也不起作用。修复的是：

```
appcfg.py update . --no_cookies 
```

（同：[https](https://stackoverflow.com/a/10004722) ://stackoverflow.com/a/10004722 ）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T10:28:30.493

您必须在开发人员或所有者下登录才能部署应用程序。这是 Eclipse 中的左下角图标。

还要检查您的应用程序名称。如果应用程序 ID 正确且您登录的用户具有此应用程序的所有者/开发者角色 - 您将进行部署。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T17:34:42.847

您必须确保 GAE 本地客户端中的应用程序名称与您的 Google 帐户中的名称一致。检查 app.yaml 文件以确保应用程序的名称也与之匹配。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-14T06:48:19.893

当我更改电子邮件以为 goagent 创建新的 appid 时，这也发生在我身上。

我的解决方案是删除服务器目录中的 cookie 文件：

```
rm server/.appcfg_cookies 
```

然后，一切正常！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-16T23:09:00.187

`.appcfg_oauth2_tokens` `c:/usrs/etc` 在长时间升级到 python27 之后，Deleted对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-22T19:00:41.990

至少截至 2017-06-22，创建一个云项目是不够的。您必须转到[云控制台的 App Engine 部分](https://console.cloud.google.com/appengine)并选择一种语言。说完“正在准备您的 App Engine 服务...”后，您就可以进行部署了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T08:12:05.587

问题是我从 rightClick project ->appenginesettings->ApplicationId 更改的名称不同。

此名称应与您的 Google 帐户中的名称相同

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-07T10:37:36.127

删除 oauth2 令牌文件 ~/.appcfg_oauth2_tokens 或使用标志“--oauth2_credential_file”指定不同的令牌存储文件文件可能是永久解决方案。MacOSX GoogleAppEngineLauncher.app 不允许您在按下部署按钮时更改此标志/路径。

```
appcfg.py --oauth2_credential_file=~/.appcfg_oauth2_tokens_myappid 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-16T05:54:43.550

我有同样的错误信息：

> 此应用程序不存在 (project_id=u'xxxx-123456')。要在此项目中创建 App Engine 应用程序，请在控制台中运行“gcloud app create”。

我通过执行以下命令解决了它：

```
gcloud app create 
```

它将在您的项目中创建应用程序并分配选定的区域。

# birt - 将多个 Birt 报告合并为一个

> ID：10407958
> 
> 赞同：0
> 
> 时间：2012-05-02T05:00:16.847
> 
> 标签：birt

我已经看到了 eclipse 中可用的 Birt 报告的所有示例 - 他们没有说明如何拥有多页 Birt 报告 - 就像我有十个表格一样 - 并且所有表格都产生不同的数据 - 这些不能放在一页中.

那么如何将多个页面添加到一份报告中呢？或者，如果这是不可能的 - 我如何将多个报告组合在一起（每个报告仅包含一个页面设计:(）在一起 - 没有任何分页符

我们可以在没有任何编程的情况下做到这一点吗？如果没有，有人可以指出示例源代码 - 演示合并的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:48:50.177

我不知道有任何工具可以自动组合单独的报告。

将多个报表组合成一个报表的最简单方法是将报表项从每个原始报表的布局选项卡（表格、图表、交叉选项卡等）复制并粘贴到组合报表的布局选项卡中。

您可以在相关报表项的属性编辑器内的属性选项卡的分页部分上强制不同报表项之间的分页符。

您将需要确保组合报表具有所有必需的数据源、数据集和报表参数 - 这些可以通过从原始报表中的数据资源管理器复制和粘贴从原始报表传输到组合报表中的数据资源管理器中.

# iphone - 如何在 iPhone 中创建 XML 字符串以用于 Web 服务请求？

> ID：10407959
> 
> 赞同：0
> 
> 时间：2012-05-02T05:00:17.883
> 
> 标签：iphone, objective-c, ios, xml, nsxml

我想创建要通过 Web 服务发送到服务器的 XML 字符串。我如何在 iPhone 中原生地做到这一点？还是我必须使用任何第三方库？我无法为 iPhone 下载 GDATA。还有什么可用的吗？或者任何其他方式来做到这一点？

请帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T06:13:44.990

您可以使用 StringWithFormat 方法创建 XML 文件，或者某些 XML 解析器也允许写入 XML。请参考 Parser 的链接以编写 XML

[http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:00:00.993

您也可以使用 JSON 解析器....

你可能想参考 SBJSON 框架，它经常用于 Objective-C，我在我的 iOS 应用程序中使用了这个框架。

您可以从以下链接获得有关它的参考：

[https://github.com/stig/json-framework](https://github.com/stig/json-framework)

[http://stig.github.com/json-framework/](http://stig.github.com/json-framework/)

示例代码：还有一个关于如何使用 SBJSON Parser 解析 JSON 的示例：

如何将 JSON 解析为 Objective C - SBJSON

[http://jasarien.com/?p=428](http://jasarien.com/?p=428)

# c# - 在 Linux X11/Gtk 上创建分层窗口

> ID：10407963
> 
> 赞同：3
> 
> 时间：2012-05-02T05:00:49.743
> 
> 标签：c#, c++, gtk, x11

我的问题通常是如何使用 X11 或 Gtk 等工具包在 Linux 上创建和定位分层窗口。当我说分层窗口时，我的意思是一个窗口，其形状和透明度由包含 rgb 和 alpha（透明度）通道的像素数据定义。请参阅下面的屏幕截图。

我已经使用足够简单的 UpdateLayeredWindow API 在 Windows 上广泛使用它们，并且想知道如何在 Linux 上做同样的事情。

谢谢。

![Windows 上的分层蝴蝶](../Images/eab0642d52851c9251b759eb5c3297b7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:49:05.763

X11 最初只支持一位透明（需要 SHAPE 扩展，但现在几乎所有 X11 服务器都实现了它）。用途`XShapeCombineMask`或`gtk_widget_shape_combine_mask`功能。

如果您想要抗锯齿透明度，那么可能最简单的方法是使用 cairo 工具包。一个例子可以在[这里](http://plan99.net/~mike/files/alphademo.c)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:28:48.133

在 X11 中，有两种可能的方法：通过**SHAPE**扩展进行简单的位图遮罩（甚至适用于非常旧的 X 服务器），或者使用 ARGB 视觉效果和合成器。我在这个答案中提供了在 ARGB 可视窗口上执行 OpenGL 渲染的示例代码：

[https://stackoverflow.com/a/9215724/524368](https://stackoverflow.com/a/9215724/524368)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T01:07:23.113

要在 X11 中使用透明度，您需要

1.  [创建 32 位深度的窗口](https://stackoverflow.com/questions/3645632/how-to-create-a-window-with-a-bit-depth-of-32)（创建窗口时需要指定 32 位视觉、背景像素、颜色图和边框像素）
2.  在窗口表面（如果使用背景像素图创建它，则在窗口像素图上）绘制 ARGB 图片。请注意，您需要使用预乘 ARGB ( a=128, r=255, g=255, b=255 是不透明的白色，而 a=128, r=128, g=128, b=128 是半透明的透明白色）。您可以使用标准绘图命令、XRender 或仅使用 PutImage 请求发送 ARGB 位图。

# django - Django 注册、信号和不需要的额外字段

> ID：10407964
> 
> 赞同：0
> 
> 时间：2012-05-02T05:01:00.543
> 
> 标签：django, django-forms

我想知道使用带有额外字段的 Django 注册的最佳方法，以及如何解决不需要显示的字段的问题，每次我使用带有额外字段的 Django 注册时，我都会遇到字段问题不需要

# regBackend.py

```
...
profile.hobbies = form.data['hobbies']
... 
```

例如，爱好字段不是必需的，但如果用户在此字段中没有选择任何内容，我会收到错误，django 说“MultiValueDictKeyError”

关于如何使用信号并且不需要担心不需要的字段的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:06:15.447

用于[`dict.get()`](http://docs.python.org/library/stdtypes.html#dict.get)获取可能存在或不存在的键的值。

```
profile.hobbies = form.data.get("hobbies") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:44:59.597

In your form class, you could set the optional fields to `required=False` so that if it's not selected, Django won't kick up a fuss.

# jquery - Telerik 树视图绑定到模型

> ID：10407967
> 
> 赞同：0
> 
> 时间：2012-05-02T05:01:24.970
> 
> 标签：jquery, asp.net-mvc-3, razor, telerik

如何设置 Telerik 树视图绑定到模型？是否可以从同一个表中绑定根节点和子节点？我正在尝试如下：

```
@using edairy.Models
@model IEnumerable<MSEntities>
@(Html.Telerik().TreeView()
        .Name("TreeView1")
                    .BindTo(Model, mappings =>
        {
            mappings.For<MSM_PRODUCT>(binding => binding
                    .ItemDataBound((item, product) =>
                    {
                        item.Text = product.PRODUCT_CD;
                        item.Value = product.PRODUCT_DESC;
                        item.Expanded = true;
                    })
           .Children(product => product.MSM_PRODUCTS)
           ); 
```

但我得到的错误*序列不包含任何元素*。

如果我删除该`Children(product=>product.MSM_PRODUCTS)`行，它会被执行并且产品代码在节点中，但我需要子节点。我还能为这种情况做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:59:48.157

[他们在Telerik Demo 网站](http://demos.telerik.com/aspnet-mvc/treeview/databindingtomodel)上这样做。重新检查您的数据。例如，如果您有空值，树视图可以做一些有趣的事情。

# python - Python：Eclipse 中 PyDev 中 sqlite3 的未解决导入错误

> ID：10407970
> 
> 赞同：3
> 
> 时间：2012-05-02T05:01:55.200
> 
> 标签：python, eclipse, macos, pydev

导入 sqlite3 生成：

```
Unused import: sqlite3
Unresolved import: sqlite3
sqlite3 Found at: DatabaseTests

import sqlite3 
```

但是，当使用 python 命令行时，这在终端中可以完美运行。

我在 Mac Mountain Lion 上运行，默认安装 Python。我在 Eclipse Indigo 中使用 PyDev。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-05T21:22:21.260

这是一个非常古老的线程，但我没有看到我为这个问题找到的解决方案，所以我会发布它，希望有人看到这个然后可以解决问题：

您需要在 Window>Preferences>PyDev>Python Interpreter 的“forced builtins”选项卡中添加“sqlite3”（不带引号）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-18T17:04:05.003

我通过在 Window>Preferences>PyDev>Interpreters>Python Interpreter 的 Forced Built-ins 中添加 _sqlite3（注意下划线）来解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T05:32:50.860

我有相同的开发环境并遇到同样的问题。我已经解决了

*   切换到[MacPorts Python](http://www.macports.org/)，
*   仅使用我从[该项目安装的软件包](http://www.macports.org/ports.php)
*   并通过将 Eclipse-Pydev 上的默认 Python 解释器设置为 MacPorts 可执行文件

这对我来说非常有效，但有时我仍然会收到`Unresolved import`警告，但如果安装了软件包，我的脚本仍然会运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T05:31:48.757

看起来项目引用没有添加站点包路径。尝试将 sqlite3 的路径（/usr/lib/python2.7/sqlite3/ 或可以从 python shell 获取的安装路径）添加到 Project -> Properties -> Pydev-PYTHOPATH -> External library 的项目引用中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T14:04:20.097

我对其他导入（simplejson 和 matplotlib）也有类似的问题。我在 Ubuntu 上工作，从 Ubuntu 11.10 升级到 12.04（也升级了 python 版本和 eclipse）后，导入的问题就开始了。

我解决问题的步骤是：

1.  在终端中，执行“import sys”，然后执行“print sys.executable”。这给出了当前解释器的路径。
2.  在 Eclipse - Window->preferences->PyDev->interpreter-python 中。删除旧路径并添加在阶段 1 中检索到的路径。
3.  在有问题的项目中转到 Project->properties->PyDev-PYHTONPATH，外部库选项卡删除旧路径并添加正确的路径（在 Ubuntu 上可以通过突触管理器找到它，例如对于 simplejson 转到突触管理器，键入在搜索框中，标记正确的结果，右键单击并从菜单中选择属性，然后选择“已安装文件”选项卡以查看已安装文件的路径。

我希望有人会发现它有用。

# jquery - Jquery 需要 2-3 次点击执行

> ID：10407971
> 
> 赞同：0
> 
> 时间：2012-05-02T05:01:55.490
> 
> 标签：jquery

***更新：***
感谢所有看过的人。我已经将整个东西移植到 JSFiddle 中，这样你就可以看到它在做什么...... [http://jsfiddle.net/pJVbC/5/](http://jsfiddle.net/pJVbC/5/)

***背景：***
我在一个页面上有一堆列表项，每个列表项都有一个专用按钮，用于触发 URL 的副本（使用 zclip）。它可以工作，但需要 2-3 次单击才能触发 jquery。任何想法为什么？

这是HTML...

```
 <dt>
  <div class="well">
    <div class="buttoncont">
      <button class="copybutton" prelink="http://www.MySite.com" postlink=""><i class="icon-plus icon-white"></i></button>​
    </div>
    <h4><span class="name">MySite Home</span><br /></h4>
  </div>
</dt> 
```

这是Javascript -

```
 <!-- Copy a static URL using zclip -->  
    <script type="text/javascript">
      $(function() {
        $(".copybutton").click(function() {
          var prelink = $(this).attr("prelink");
          var postlink = $(this).attr("postlink");
          var link = prelink+postlink;
            $(this).zclip({
              path: "http://staging.mysite.com/hstoolkit/js/ZeroClipboard.swf",
              copy: link
            });
        });
      });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:43:00.520

这是完整的例子。它对我来说非常有用。请检查这个。如果你的问题解决了，请投票给我。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
            <html xmlns="http://www.w3.org/1999/xhtml">
            <head runat="server">
                <title></title>

                <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.5.1.min.js" type="text/javascript"></script>
                <script type="text/javascript" src="http://www.steamdev.com/zclip/js/jquery.zclip.min.js"></script>
                <script type="text/javascript" src="http://www.steamdev.com/zclip/js/jquery.snippet.min.js"></script>

                <script type="text/javascript">
                    $(document).ready(function(){
                        $("#copy-button").zclip({
                        path: "http://zeroclipboard.googlecode.com/svn-history/r10/trunk/ZeroClipboard.swf",
                        copy: function() {
                        var prelink = $(this).attr("prelink");
                        var postlink = $(this).attr("postlink");
                        var link = prelink + postlink;
                        return link;
                            }
                        });
                    });
                </script>

            </head>
            <body>
                <form id="form1" runat="server">
                <dt>
                    <div class="well">        
                        <div class="buttoncont">
                            <button id="copy-button" class="copybutton" prelink="http://www.MySite.com" postlink="">
                                <i class="icon-plus icon-white"></i>
                            </button>
                            ?
                        </div>
                        <h4>
                            <span class="name">MySite Home</span><br />
                        </h4>
                    </div>
                </dt>
                </form>
            </body>
            </html> 
```

# apache - wsman 配置文件中的 Apache 模块支持

> ID：10407973
> 
> 赞同：3
> 
> 时间：2012-05-02T05:02:06.810
> 
> 标签：apache, tomcat, wsman

我想知道 apache 服务器中的哪些模块完全支持 wsman 配置文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:06:11.610

具有用于在 apache 中配置 openwsman Web 服务的 mod_wsman 模块。您可以从此链接下载源代码。[https://github.com/Openwsman/mod_wsman](https://github.com/Openwsman/mod_wsman) 在 apache 中制作、安装和配置它。

mod_wsman 是 openwsman-server 但没有 http 堆栈。

它是一个 Apache 插件，因此您可以使用 Apache http 堆栈来处理请求并将它们传递给 openwsman-server 后端进行处理。

mod_wsman 维护得不是很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:40:52.083

假设 wsman 您的意思是 WS-Management ...

Apache Web Server (httpd) 附带的标准模块。没有任何。

Apache Tomcat 也不支持此功能。

# java - 使用 java、eclipse 和 ant 自动复制构建的文件和库

> ID：10407974
> 
> 赞同：2
> 
> 时间：2012-05-02T05:02:07.933
> 
> 标签：java, eclipse, ant, build, build-automation

我在windows 7上使用java和eclipse，我正在尝试构建一个服务器程序，它将在我的网络上的另一台（ubuntu）机器上运行。

如何让 eclipse 将构建的类文件保存到外部位置（我有一个驱动器映射，或者它甚至可以通过 ssh/sftp/whatever）？

我在那台机器上创建了一个 git 存储库，因此类文件保存在那里，但是我正在使用的外部库（位于构建路径上）没有保存为存储库的一部分。理想情况下，我想让eclipse自动将使用的构建类和库复制到另一个目录中（甚至更理想的是，当我单击“运行”时让它自动运行/终止程序，尽管我怀疑这可能有点过分乐观的）。

我认为我认为与 eclipse 一起安装的 ant 可以做到这一点，但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T02:40:08.533

您提到了 jar 文件，它们实际上是**依赖项**。如果您真的不想将这些 jar 文件包含在您的存储库中，您可能想看看像 Ivy 这样的依赖管理系统，或者切换到 Maven。

或者，您始终可以使用 Ant 的构建“脚本”（尽管它们是 XML，而不是真正的“脚本”）来复制依赖项。

> 如何让 eclipse 将构建的类文件保存到外部位置（我有一个驱动器映射，或者它甚至可以通过 ssh/sftp/whatever）？

很难想出解决“如何将它们保存到外部位置”的方法。但是，您可以只编写一个目标，使用`<scp>`任务（基于 ssh）或`<ftp>`任务，在运行标准构建后复制文件。

> 理想情况下，我想让 eclipse 自动将使用的构建类和库复制到另一个目录中。

Eclipse 内置了对 Ant 的支持。我不使用 Eclipse，但我使用 Netbeans。在 Netbeans 中，实际上是使用 Netbeans 生成的 Ant 构建文件来构建项目的。而且，您可以自定义构建文件，添加您自己的目标，然后，您可以在 IDE 中运行您自己的目标。

例如，你有一个`build`目标，一个`deploy`目标，一个`run`目标。第一个是Eclipse生成的，你不需要关心，后两个是你自己写的。只需编写另一个目标，例如`all`，然后使用`<antcall>`依次运行上面的三个目标。然后，在 Eclipse 中，您可以直接运行`all`target 来获取 Ant 处理的所有事情。

> 更理想的是，当我单击“运行”时，它会自动运行/终止程序，尽管我怀疑这可能有点过于乐观。

目标机器是 Linux 机器，因此您可以在其上使用 apt-get 轻松安装 SSH 服务器。在你的 ant 构建文件中写入两个目标，一个是`run`，另一个是`kill`.

在`run`目标内部，您可以使用它`<sshexec>`来运行您的应用程序。您唯一需要注意的是在该机器上定义的环境变量可能在 ssh 会话中不可用。但这只是一个配置问题。至少您可以将变量放入`/etc/environment`，尽管这不是最佳做法。

`kill`目标可能稍微复杂一些。但是，在我看来，如果你可以写一个`startup.sh`来启动一个应用程序，你总是可以写一个`stop.sh`来关闭它（看看Tomcat的catalina.sh）。

而且，`kill`可以在 Eclipse 中调用目标。

# search - 搜索字符串的网页设计

> ID：10407978
> 
> 赞同：0
> 
> 时间：2012-05-02T05:02:22.467
> 
> 标签：search

我有记事本，其中存在日志。我需要设计一个网页，如果有人粘贴他们的票号并单击“搜索”，则该票号的日志应显示在底部。

我需要一些关于如何做到这一点的建议，以及哪个是做到这一点的正确平台。

问候戈帕兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:12:46.693

```
<?php 
$search = 'assume this as ticket number'; 
$logs = readfile("logfile.txt"); 
if (preg_match("/.*".$search.".*\n/i", $logs, $match)) 
{ 
   print_r($match); 
} 
else 
{ 
   echo "A ticket was not found."; 
} 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:13:59.793

你的日志有多大？您可以使用它可以支持正则表达式（正则表达式）的任何平台。或者如果它太大，我建议你使用数据库

# javascript - 如何在javascript中将图像的左边距作为ems

> ID：10407987
> 
> 赞同：0
> 
> 时间：2012-05-02T05:03:19.207
> 
> 标签：javascript, css

我在互联网上搜索了超过 3 个小时，但没有任何建议在我的代码中起作用。我要做的是在每次点击时将图片一张一张地向左滑动（总共 3 张图片），当最后一张图片在屏幕上时，停止向左滑动并滑回第一张图片。为此，我需要在第一张图片到达某个位置（左侧 180em）时检测它的左边距，并将其与“ems”值进行比较（代码如下）。“if”语句从不触发，它总是指向“else”。

我试图用“$（'#picture1'）.offsetLeft”，“$（'#picture1'）.layerX”，“$（'#picture1'）获取第一张图片的左边框位置（或边距）。离开了”，但他们都没有工作。

如果您可以将我引导到另一个网站，Stackoverflow 中的另一个问题或给我一个解决方案，我将不胜感激。

注意：我对javascript非常陌生，如果我的代码有错误或我的问题请纠正我。谢谢你。

```
var position = parseInt(jQuery("#picture1").css("margin-left"));
var left_border = '180ems';
    $(function() {
        $(".button").click(function() {
            if (position > 180ems) {
               $("#picture1").animate({
                   left: '-=60em'
               }, 600);
               $("#picture2").animate({
                   left: '-=60em'
               }, 600);
               $("#picture3").animate({
                   left: '-=60em'
               }, 600);
            }
            else {
                $("#picture1").animate({
                   left: '+=180em'
               }, 600);
               $("picture2").animate({
                   left: '+=120em'
               }, 600);
               $("#picture3").animate({
                   left: '+=60em'
               }, 600);
            };
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:37:58.670

您总是可以获取以像素为单位的值，然后尝试将其转换为 em，请参阅此问题[jQuery/JavaScript: convert pixels to em in a easy way](https://stackoverflow.com/questions/10305993/jquery-javascript-convert-pixels-to-em-in-a-easy-way)

编辑：或者您可以在距左侧 180ems 处放置一个不可见元素，然后从该元素中获取该元素的像素值，然后您可以使用该值进行比较。

# .net - 如何序列化指向被覆盖的虚拟方法的基的委托？

> ID：10407989
> 
> 赞同：5
> 
> 时间：2012-05-02T05:03:40.297
> 
> 标签：.net, serialization, reflection, delegates, compact-framework

虽然[其他](https://stackoverflow.com/questions/1334254) [关于](https://stackoverflow.com/questions/4357729)使用反射绕过所有安全措施并直接调用基类的重写方法实现的其他问题通常遭到嘲笑和要求重新设计有问题的代码，但我想我偶然发现了一个奇怪但合法的用例：[delegate序列化](https://stackoverflow.com/questions/10267388)。由于我已经看到了其他问题，**请**不要轰炸我重新设计我的代码并停止尝试绕过类型系统的建议——我正在编写一个**序列化格式化程序**，而那些[已经获得了忽略构造函数的通行证](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatterservices.getuninitializedobject.aspx)。

令我沮丧的是，即使是 v2.0 BCL 也[`BinaryFormatter`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)未能通过这个简单的 NUnit 测试：

```
[TestFixture]
public class DelegateSerializationTestFixture
{
    [Test]
    public void DelegateSerializationTest()
    {
        var bigKitty = new Lion();
        var kittyNoise = bigKitty.GetKittyNoiseFunc();

        Assert.AreEqual("Meow", kittyNoise());

        var stream = new MemoryStream();
        var formatter = new BinaryFormatter();
        formatter.Serialize(stream, kittyNoise);
        stream.Position = 0;
        formatter = new BinaryFormatter();
        var kittyNoise2 = (Func<string>)formatter.Deserialize(stream);

        Assert.AreEqual("Meow", kittyNoise2()); // returns Grrr
    }
}

[Serializable]
public class Lion : Cat
{
    public override string GetNoise()
    {
        return "Grrr";
    }

    public Func<string> GetKittyNoiseFunc()
    {
        return base.GetNoise;
    }
}

[Serializable]
public class Cat
{
    public virtual string GetNoise()
    {
        return "Meow";
    }
} 
```

如果`BinaryFormatter`它自己不能做到这一点，我想我自己的 Compact Framework 3.5 二进制序列化实现也丢球了，我不应该感到惊讶。

如果真的不可能仅使用 Compact Framework v3.5 的有限反射功能来重构这样的委托——而且很可能——有没有办法至少检测到这样的委托，以便我的序列化程序可以抛出而不是留下不正确的流中的数据？

到目前为止，我知道在序列化时检测这种情况的唯一方法是使用完全信任反射将原始委托中的私有方法指针值与我使用其公开可见的属性重建委托所获得的值进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T05:19:46.627

有趣的问题。我发现了一种*非常*老套的检测方法：使用公共属性创建一个副本，并检查与原始文件是否相等。显示它工作的示例代码：

```
using System;
using System.Linq;
using System.IO;

class Base
{
    public virtual void Foo()
    {
        Console.WriteLine("Base");
    }
}

class Derived : Base
{
    public override void Foo()
    {
        Console.WriteLine("Derived");
    }

    public Action NonVirtualAction { get { return base.Foo; } }
    public Action VirtualAction { get { return Foo; } }
}

class Program
{
    static void Main()
    {
        var derived = new Derived();
        var virtualAction = derived.VirtualAction;
        var nonVirtualAction = derived.NonVirtualAction;

        var virtualCopy = CreateCopy(virtualAction);
        var nonVirtualCopy = CreateCopy(nonVirtualAction);

        Console.WriteLine(virtualCopy.Equals(virtualAction)); // True
        Console.WriteLine(nonVirtualCopy.Equals(nonVirtualAction)); // False
    }

    static Delegate CreateCopy(Delegate del)
    {
        // TODO: Validate it's not multi-cast
        return Delegate.CreateDelegate(del.GetType(), del.Target, del.Method);
    }
} 
```

我不知道您实际上是如何*创建*它的……或者是否存在其他情况，这种“复制平等”会产生误报。

# php - 导致 1 个字母 PHP 数组失败的服务器配置/PHP？

> ID：10407990
> 
> 赞同：-1
> 
> 时间：2012-05-02T05:03:55.387
> 
> 标签：php, arrays

是否有诸如 PHP 的配置选项或 Web 服务器上的任何东西来允许或不允许看起来像这样的数组：

`$i['addme']["A".$temp[1]] = $v;`

出于某种原因，此代码在 Netfirms 服务器上运行，现在我更改为 VPS 主机，但它没有保留该值...

知道为什么吗？

==============

# 编辑 1：更多详情如下：

确切的代码：

```
foreach ($_POST as $k => $v) {
    $temp = explode("_", $k);//_p($temp);
    if ($temp[0] == "ATTRIBUT") {
        $i['addme']["A".$temp[1]] = $v;

        // debugging test below
        echo $v;  // THIS WORKS
        echo $i['addme']["A".$temp[1]]; // EMPTY DATA
    }
} 
```

*   当我打印 POST 数组的内容时，我看到了我的数据。
*   当我打印`$temp`数组的内容时，我看到了我的数据
*   `$v`在将数据分配给 之后`$i['addme']`，我检查它并且它是空的。

换句话说，在这个脚本中，当我检查 $v 字符串时，它会显示数据，但是当我回显 $i 字符串时，它是空的......

想法？

==============

# 编辑 2：

我只是测试了`$ii`（2个字母变量）而不是`$i`它工作......为什么？

旁注：我仍然想解决问题，我不想在我的 20 000 行代码中更改我所有的 1 字母数组...

==============

# 编辑 3：

奇怪的是，当我把它放在`$i = array();`脚本之前，它就起作用了。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:21:43.360

我认为作者间接指出了答案：他说“如果我使用 $i，我有问题，但如果我使用 $ii，那没关系”。它是 $i 以前用于别的东西吗？$i 被定义为一个数组并在第一次使用之前初始化？作者提供的代码片段是从更高级别的任何其他控制结构调用的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:37:47.883

首先看看所有的帖子变量是否包含“ATTRIBUT_XXX”，其中 XXX 是一些值。因为您的帖子字段可能只包含 ATTRIBUT_ 或 ATTRIBUT 并且其中没有第二个值。

您的错误报告可能被禁用或松散，就像它没有向您返回任何警告一样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:23:12.403

尝试在您的服务器中运行此代码段并告知详细信息

```
$_POST = array('ATTRIBUT'=>'hello','ATTRIBUT_efg'=>'how','ATTRIBUT_xyz'=>'are you');
$i = array();
foreach ($_POST as $k => $v) {
    $temp = explode("_", $k);//_p($temp);
    if ($temp[0] == "ATTRIBUT") {
        $i['addme']["A".$temp[1]] = $v;

        // debugging test below
       // echo $v;  // THIS WORKS
        echo $i['addme']["A".$temp[1]]; // EMPTY DATA
    }
}
print_r($i);**strong text** 
```

# android - Twitter4J 如何设置它

> ID：10407993
> 
> 赞同：0
> 
> 时间：2012-05-02T05:04:14.310
> 
> 标签：android, twitter

我目前正在开发一个集成 twitter 的 android 应用程序。我使用 Twitter4j 使这成为可能。但是，我似乎无法让它工作。我尝试使用[本教程从](http://blog.blundell-apps.com/sending-a-tweet/)[github twitter4j](http://github.com/yusuke/twitter4j/)导入下载的文件。但是这些导入代码仍然有错误。

```
import twitter4j.Status; 
import twitter4j.Twitter; 
import twitter4j.TwitterException; 
import twitter4j.TwitterFactory; 
import twitter4j.User; 
```

知道如何进行这项工作吗？

# silverlight - 在另一个窗口中更新实体对象

> ID：10407995
> 
> 赞同：0
> 
> 时间：2012-05-02T05:04:44.610
> 
> 标签：silverlight, entity-framework

我在使用实体框架时遇到了一个问题。我的应用程序基于 silverlight，我有 2 个窗口。

1.  选择EmployeeWindow.cs
2.  ChangeEmployeeWindow.cs

我所有的窗口都有一个**entityModelClass的实例**

我的用户在第一个窗口中选择一名员工并将选定的员工发送到第二个窗口的构造函数以更改属性。当我想用我的 entityModelClass 实例保存更改时，它没有保存到数据库中。

我怎么解决这个问题。

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:08:55.400

Silverlight 应用程序在无法直接连接到数据库的客户端上运行。您需要某种接口，例如 WCF 服务，客户端可以通过该接口将更改发送到服务器，然后将更改从那里写入数据库。

# android - 发生意外崩溃时如何保存活动数据

> ID：10407997
> 
> 赞同：3
> 
> 时间：2012-05-02T05:06:03.480
> 
> 标签：android, android-activity, textview

我有一个邮件应用程序。在我的邮件文本框中，我需要输入超过 1000 字的长文本。如果发生任何事情并且活动崩溃，我的数据就会丢失。如何保存数据，以便当我在崩溃后重新打开我的活动时，整个键入的邮件会保留在文本框中而不会丢失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T05:24:27.563

为您的邮件设置一个侦听器，`EditText`并在用户键入时将文本保存在`Database`或 中`SharePreferences`，最后当用户发送电子邮件或以某种方式完成工作（没有崩溃）时，清除保存的数据。但是，每次活动打开时，检查`Database`那里是否存在任何文本，如果存在，请将其加载到您的邮件`EditText`中。因此，如果活动崩溃，您可以再次加载上次键入的数据。

**编辑**：为了获得更好的性能，不要将每个键入的字符保存到`Database`. 相反，您可以通过检测`white space`字符来检测每个单词并保存它。

作为[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)和[SQLite Databases](http://www.vogella.com/articles/AndroidSQLite/article.html)的指南，请使用给出的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:33:31.630

我在我的应用程序中使用这种方法。也许它可以帮助您解决您的情况。

在**onPause()**方法中

```
@Override

    protected void onPause() {
        super.onPause();
        SharedPreferences.Editor editor = getPreferences(0).edit();
        editor.putString("text", txtPostToWall.getText().toString());
        editor.putInt("selection-start", txtPostToWall.getSelectionStart());
        editor.putInt("selection-end", txtPostToWall.getSelectionEnd());
        editor.commit();
    } 
```

然后，在**onResume()**方法中检索保存的数据

```
@Override

    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        SharedPreferences prefs = getPreferences(0);
        String restoredText = prefs.getString("text", null);
        if (restoredText != null)   {
            txtPostToWall.setText(restoredText, BufferType.EDITABLE);

            int selectionStart = prefs.getInt("selection-start", -1);
            int selectionEnd = prefs.getInt("selection-end", -1);
            if (selectionStart != -1 && selectionEnd != -1) {
                txtPostToWall.setSelection(selectionStart, selectionEnd);
            }
        }
    } 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:14:56.490

你应该看看[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)和[Data Storage](http://developer.android.com/guide/topics/data/data-storage.html)

例子：

```
edittextMail.addTextChangedListener(textwatcher);

private TextWatcher textwatcher = new TextWatcher() {
        @Override
        public void afterTextChanged(Editable aChar) {
        }

        @Override
        public void beforeTextChanged(CharSequence aChar, int aStart, int aCount, int aAfter) {
        }

        @Override
        public void onTextChanged(CharSequence aChar, int aStart, int aCount, int aAfter) {
            saveData();
        }
    };

private void saveData() {
    SharedPreferences sharedPref = this.getSharedPreferences("sharedkey", MODE_WORLD_READABLE);
    SharedPreferences.Editor sharedPrefEditor = sharedPref.edit();

    sharedPrefEditor.putString("textsaved", editText.getText().toString());
    sharedPrefEditor.commit();
}

private void retrieveData() {
    SharedPreferences sharedPref = this.getSharedPreferences("sharedkey", MODE_WORLD_READABLE);

    editText.setText(sharedPref.getString("textsaved", "No string retrieved."));
} 
```