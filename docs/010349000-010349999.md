# StackOverflow 问答 10349000-10349999

# apache - Plesk 服务器 open_basedir 块

> ID：10349005
> 
> 赞同：0
> 
> 时间：2012-04-27T10:29:34.007
> 
> 标签：apache, codeigniter, hosting, shared-hosting, plesk

我们的一个新客户托管在 Parallel Plesk 系统上，我需要将 Codeigniter 安装到我的项目的子域中。为此，我需要将文件放入 web 根目录之上的目录中，但唯一的问题是 Plesk 会阻止对除 /private、/httpdocs 和 /httpsdocs 之外的所有基本目录中的脚本的访问。我已将我的应用程序和系统文件上传到 /private，但不断收到以下错误：

> 警告：realpath() [function.realpath]：open_basedir 限制生效。文件（/var/www/vhosts/example.com/private/system）不在允许的路径内：/var/www/ 中的 (/var/www/vhosts/example.com/httpdocs:/tmp)第 143 行的 vhosts/example.com/httpdocs/sub-domains/dms/index.php
> 
> 警告：is_dir() [function.is-dir]：open_basedir 限制生效。文件（/var/www/vhosts/example.com/private/system/）不在允许的路径中：/var/www 中的 (/var/www/vhosts/example.com/httpdocs:/tmp) /vhosts/example.com/httpdocs/sub-domains/dms/index.php 第 152 行 您的系统文件夹路径似乎设置不正确。请打开以下文件并更正：index.php

我无法上传到 /conf 文件，因此我无法在其中放置 vhost.conf 文件并使用该解决方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-12T09:02:16.003

我有你想要的解决方案。你应该改变你的配置文件。`(application>config>config.php)`

检查您的配置文件并更改`sess_save_path`会话变量下的值。

前：

```
config['sess_driver'] = 'files'; 
config['sess_cookie_name'] ='ci_session'; 
config['sess_expiration'] = 7200;
config['sess_save_path'] = NULL;
config['sess_match_ip'] = FALSE; 
config['sess_time_to_update'] = 300; 
config['sess_regenerate_destroy'] = FALSE; 
```

后：

```
config['sess_driver'] = 'files'; 
config['sess_cookie_name'] ='ci_session'; 
config['sess_expiration'] = 7200; 
config['sess_save_path'] = '/tmp';
config['sess_match_ip'] = FALSE; 
config['sess_time_to_update'] = 300; 
config['sess_regenerate_destroy'] = FALSE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:10:27.110

该解决方案将取决于您的客户所托管的 Plesk 版本以及他们是否拥有共享主机帐户或 VPS/专用主机（即他们拥有 Plesk 的管理员访问权限）。

如果版本是 10.4 并且他们对 Plesk 具有管理员访问权限，或者他们在共享主机帐户中获得 PHP 设置管理权限 - 单击站点名称并打开“PHP 设置”选项卡，然后为“open_basedir”属性输入适当的值

对于早期版本或未授予 PHP 设置管理权限的情况，您必须向其托管服务提供商请求调整 vhost.conf。

或者，如果那是 Plesk 10+，您可以将站点放在自定义文件夹中。因此，您在“dir1/dir2”中创建了一个站点，并将其放置在应该位于 docroot 之上的“dir1/”文件中。

# android - 构建的Java版本不正确？

> ID：10349006
> 
> 赞同：1
> 
> 时间：2012-04-27T10:29:34.093
> 
> 标签：android

我安装了java，两次，/usr/lib/jvm 包含三个文件夹（默认java，java-1.6-openjdk，java-6-openjdk）当我尝试

使-j4

它给了我输出：

```
============================================
PLATFORM_VERSION_CODENAME=REL
PLATFORM_VERSION=4.0.1
TARGET_PRODUCT=full
TARGET_BUILD_VARIANT=eng
TARGET_BUILD_TYPE=release
TARGET_BUILD_APPS=
TARGET_ARCH=arm
TARGET_ARCH_VARIANT=armv7-a
HOST_ARCH=x86
HOST_OS=linux
HOST_BUILD_TYPE=release
BUILD_ID=ITL41D
============================================
Checking build tools versions...
************************************************************
You are attempting to build with the incorrect version
of java.

Your version is: java version "1.6.0_20".
The correct version is: Java SE 1.6.

Please follow the machine setup instructions at
    http://source.android.com/source/download.html
************************************************************
build/core/main.mk:131: *** stop.  Stop. 
```

主版本相同，只有次要版本不同，我找不到 java 1.6_0，我现在的解决方案是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:33:23.410

从以下位置下载适当的 sun jdk：

[http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jdk-6u31-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jdk-6u31-oth-JPR)

然后尝试构建

# .net - 是否有任何 IL 编辑器可以更改程序集的字节码？

> ID：10349007
> 
> 赞同：9
> 
> 时间：2012-04-27T10:29:34.437
> 
> 标签：.net, bytecode, il, disassembly

我在我们的代码中使用的遗留第三方程序集上检测到一些缺陷，对它们进行反编译。我想修复它们，但由于我没有源代码，我需要直接修改字节码。更改非常简单（将 AND 更改为 OR 并对某些行进行 NOP）。

有编辑来做这种事情吗？使用十六进制编辑器进行工作将是最后的选择，我更愿意提示我在光标周围有什么指令......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-05-01T13:14:27.863

[`dnSpy`](https://github.com/0xd4d/dnSpy), 允许您修改 IL 和 C# 代码。查看他们的[截图](https://github.com/0xd4d/dnSpy#picture-time)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T13:08:23.377

我认为您正在寻找的是带有[Reflexil附加组件的](http://www.reflector.net/add-ins/)[.NET Reflector](http://www.reflector.net/)。看看截图，它非常强大，它可以在运行时修改 IL 代码。反射器过去是免费的，你也许可以在某个地方获得一些旧版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T10:34:00.407

我假设程序集没有强命名，因为否则没有签名密钥您将无能为力。

如果没有，这听起来[`Ildasm`](http://msdn.microsoft.com/en-us/library/f7dy01k1.aspx)对你有用。您可以反编译程序集、执行修改并使用[`Ilasm`](http://msdn.microsoft.com/en-us/library/496e4ekx.aspx).

另一个免费选项可能是 Telerik 的[JustDecompile](http://www.telerik.com/products/decompiler.aspx)，它*“可以从反编译的程序集创建 Visual Studio 项目”。*——我没用过，但这听起来像是反编译为源代码并创建了一个准备构建的项目。这将非常方便，因为您甚至不必使用 IL。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-14T13:57:00.740

试试 Simple Assembly Explorer，它允许您编辑字节码并默认工作更多生命 Reflexil

[https://sites.google.com/site/simpledotnet/simple-assembly-explorer](https://sites.google.com/site/simpledotnet/simple-assembly-explorer)

# jsf - 隐藏以下组件

> ID：10349008
> 
> 赞同：0
> 
> 时间：2012-04-27T10:29:37.153
> 
> 标签：jsf, primefaces

我正在使用 JSF2，primefaces2.1（使用 netbeans 7.0.1 和 glassfish3.1）我一段时间以来面临的问题是在使用它下面的按钮后没有出现（如果我在文件上传下面添加组件它可以但不是之后！）经过大量观察后，我注意到问题是当我删除表格（我用它来组织我的组件）时，按钮（adduser）出现了！

这是代码 page.xhtml

```
<table border="1" align="center" style='width:1004px;height:100px;' cellpadding="0" cellspacing="0" >
       <h:form>

       <tr><td>   
               <h:outputLabel value="Nom" /><h:inputText value="#{AddPerson.nom}" />
               <br /></td></tr>
             <tr><td>    <h:outputLabel value="Prenom"/> <h:inputText value="#{AddPerson.prenom}" />
                     <br /></td></tr>
            <tr><td> <h:outputLabel value="Etat Civil"/>
                                 <h:selectOneMenu id="etatcivil" value="#{AddPerson.etatCivil}">
                                    <f:selectItem itemValue="Monsieur" itemLabel="M"/>
                                    <f:selectItem itemValue="Madam" itemLabel="Mme"/>
                                    <f:selectItem itemValue="Madmoiselle" itemLabel="Mlle"/>
                                </h:selectOneMenu>

                    <br /></td></tr>

            <tr><td>   <h:outputLabel value="Date de naissance "/> 

                                      <h:selectOneMenu id="jour" value="#{AddPerson.jour}">
                                      <f:selectItem itemValue="00" itemLabel=""/>
                                    <f:selectItem itemValue="01" itemLabel="01"/> <f:selectItem itemValue="02" itemLabel="02"/><f:selectItem itemValue="03" itemLabel="03"/>
                                    <f:selectItem itemValue="04" itemLabel="04"/><f:selectItem itemValue="05" itemLabel="05"/><f:selectItem itemValue="06" itemLabel="06"/>
                                    <f:selectItem itemValue="07" itemLabel="07"/><f:selectItem itemValue="08" itemLabel="08"/><f:selectItem itemValue="09" itemLabel="09"/>
                                    <f:selectItem itemValue="10" itemLabel="10"/><f:selectItem itemValue="11" itemLabel="11"/><f:selectItem itemValue="12" itemLabel="12"/>
                                    <f:selectItem itemValue="13" itemLabel="13"/><f:selectItem itemValue="14" itemLabel="14"/><f:selectItem itemValue="15" itemLabel="15"/>   
                                    <f:selectItem itemValue="16" itemLabel="16"/><f:selectItem itemValue="17" itemLabel="17"/><f:selectItem itemValue="18" itemLabel="18"/>  
                                    <f:selectItem itemValue="19" itemLabel="19"/><f:selectItem itemValue="20" itemLabel="20"/><f:selectItem itemValue="21" itemLabel="21"/>   
                                    <f:selectItem itemValue="22" itemLabel="22"/><f:selectItem itemValue="23" itemLabel="23"/><f:selectItem itemValue="24" itemLabel="24"/>    
                                    <f:selectItem itemValue="25" itemLabel="25"/><f:selectItem itemValue="26" itemLabel="26"/><f:selectItem itemValue="27" itemLabel="27"/>     
                                    <f:selectItem itemValue="28" itemLabel="28"/><f:selectItem itemValue="29" itemLabel="29"/><f:selectItem itemValue="30" itemLabel="30"/>
                                    <f:selectItem itemValue="31" itemLabel="31"/>
                                         </h:selectOneMenu>

                                <h:selectOneMenu id="mois" value="#{AddPerson.mois}">
                                    <f:selectItem itemValue="00" itemLabel=""/>
                                    <f:selectItem itemValue="01" itemLabel="Janvier"/> <f:selectItem itemValue="02" itemLabel="Fevrier"/><f:selectItem itemValue="03" itemLabel="Mars"/>
                                    <f:selectItem itemValue="04" itemLabel="Avril"/><f:selectItem itemValue="05" itemLabel="May"/><f:selectItem itemValue="06" itemLabel="Juin"/>
                                    <f:selectItem itemValue="07" itemLabel="Juillet"/><f:selectItem itemValue="08" itemLabel="Aout"/><f:selectItem itemValue="09" itemLabel="Septembre"/>
                                    <f:selectItem itemValue="10" itemLabel="Octobre"/><f:selectItem itemValue="11" itemLabel="Novembre"/><f:selectItem itemValue="12" itemLabel="Decembre"/>
                                 </h:selectOneMenu>

                                 <h:selectOneMenu  id="annee" value="#{AddPerson.annee}" >
                                    <f:selectItem itemValue="1940" itemLabel="1940"/> <f:selectItem itemValue="1941" itemLabel="1941"/><f:selectItem itemValue="1942" itemLabel="1942"/><f:selectItem itemValue="1943" itemLabel="1943"/><f:selectItem itemValue="1944" itemLabel="1944"/><f:selectItem itemValue="1945" itemLabel="1945"/><f:selectItem itemValue="1946" itemLabel="1946"/><f:selectItem itemValue="1947" itemLabel="1947"/><f:selectItem itemValue="1948" itemLabel="1948"/><f:selectItem itemValue="1949" itemLabel="1949"/>
                                    <f:selectItem itemValue="1950" itemLabel="1950"/><f:selectItem itemValue="1951" itemLabel="1951"/><f:selectItem itemValue="1952" itemLabel="1952"/><f:selectItem itemValue="1953" itemLabel="1953"/><f:selectItem itemValue="1954" itemLabel="1954"/><f:selectItem itemValue="1955" itemLabel="1955"/><f:selectItem itemValue="1956" itemLabel="1956"/><f:selectItem itemValue="1957" itemLabel="1957"/><f:selectItem itemValue="1958" itemLabel="1958"/><f:selectItem itemValue="1959" itemLabel="1959"/>
                                    <f:selectItem itemValue="1960" itemLabel="1960"/><f:selectItem itemValue="1961" itemLabel="1961"/><f:selectItem itemValue="1962" itemLabel="1962"/><f:selectItem itemValue="1963" itemLabel="1963"/><f:selectItem itemValue="1964" itemLabel="1964"/><f:selectItem itemValue="1965" itemLabel="1965"/><f:selectItem itemValue="1966" itemLabel="1966"/><f:selectItem itemValue="1967" itemLabel="1967"/><f:selectItem itemValue="1968" itemLabel="1968"/><f:selectItem itemValue="1969" itemLabel="1969"/>
                                    <f:selectItem itemValue="1970" itemLabel="1970"/><f:selectItem itemValue="1971" itemLabel="1971"/><f:selectItem itemValue="1972" itemLabel="1972"/><f:selectItem itemValue="1973" itemLabel="1973"/><f:selectItem itemValue="1974" itemLabel="1974"/><f:selectItem itemValue="1975" itemLabel="1975"/><f:selectItem itemValue="1976" itemLabel="1976"/><f:selectItem itemValue="1977" itemLabel="1977"/><f:selectItem itemValue="1978" itemLabel="1978"/><f:selectItem itemValue="1979" itemLabel="1979"/>
                                    <f:selectItem itemValue="1980" itemLabel="1980"/><f:selectItem itemValue="1981" itemLabel="1981"/><f:selectItem itemValue="1982" itemLabel="1982"/><f:selectItem itemValue="1983" itemLabel="1983"/><f:selectItem itemValue="1984" itemLabel="1984"/><f:selectItem itemValue="1985" itemLabel="1985"/><f:selectItem itemValue="1986" itemLabel="1986"/><f:selectItem itemValue="1987" itemLabel="1987"/><f:selectItem itemValue="1988" itemLabel="1988"/><f:selectItem itemValue="1989" itemLabel="1989"/>
                                    <f:selectItem itemValue="1990" itemLabel="1990"/><f:selectItem itemValue="1991" itemLabel="1991"/><f:selectItem itemValue="1992" itemLabel="1992"/><f:selectItem itemValue="1993" itemLabel="1993"/><f:selectItem itemValue="1994" itemLabel="1994"/><f:selectItem itemValue="1995" itemLabel="1995"/><f:selectItem itemValue="1996" itemLabel="1996"/><f:selectItem itemValue="1997" itemLabel="1997"/><f:selectItem itemValue="1998" itemLabel="1998"/><f:selectItem itemValue="1999" itemLabel="1999"/>
                                    <f:selectItem itemValue="2000" itemLabel="2000"/><f:selectItem itemValue="2001" itemLabel="2001"/><f:selectItem itemValue="2002" itemLabel="2002"/><f:selectItem itemValue="2003" itemLabel="2003"/><f:selectItem itemValue="2004" itemLabel="2004"/><f:selectItem itemValue="2005" itemLabel="2005"/><f:selectItem itemValue="2006" itemLabel="2006"/><f:selectItem itemValue="2007" itemLabel="2007"/><f:selectItem itemValue="2008" itemLabel="2008"/><f:selectItem itemValue="2009" itemLabel="2009"/>
                                    <f:selectItem itemValue="2010" itemLabel="2010"/><f:selectItem itemValue="2011" itemLabel="2011"/><f:selectItem itemValue="2012" itemLabel="2012"/> 
                                 </h:selectOneMenu>

                </td></tr>

            <tr><td>   <br /> <h:outputLabel value="fax"/><h:inputText value="#{AddPerson.fax}" /></td></tr>
               <tr><td>            <br /> <h:outputLabel value="profession"/><h:inputText value="#{AddPerson.profession}" /></td></tr>
              <tr><td>             <br /> <h:outputLabel value="adresse"/><h:inputText value="#{AddPerson.adresse}" /></td></tr>
              <tr><td>             <br />  <h:outputLabel value="code Postal"/><h:inputText value="#{AddPerson.codePostal}" /></td></tr>
              <tr><td>             <br />  <h:outputLabel value="Domaine de Competence"/>
                         <h:selectOneMenu  value="#{AddPerson.domain}" id="domaine" >
                                    <f:selectItem itemLabel="-- Select Domaine de Competence-- " itemValue="0"/> 
                                    <f:selectItems value="#{AddPerson.listDomaine}" />
                                       </h:selectOneMenu></td></tr>

                          <tr style="width:800px"><td style="width:500px">     <br />  <h:outputLabel value="Files"/>
                                       <h:panelGroup style="display:inline;color:yellow;"> 
                                           <p:fileUpload style="display:inline" fileUploadListener="#{AddPerson.fileUpload}"    
                                                sizeLimit="500000"   
                                                allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>  

                                       </h:panelGroup></td></tr>

                          <tr><td>   <br />  <h:outputLabel value="butt"/> <h:commandButton style="color:red;"   value="Add User" action="#{AddPerson.addUserDB}"  /></td></tr>

                </h:form></table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:06:00.710

您是否尝试过用 替换表`<h:panelGrid`？或者使用`ul`and `li`（与普通表不同的样式方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T06:44:51.727

在我的情况下，检查 Chrome 元素检查器并看到默认的 css Primefaces，我出现了这样的情况：

```
.ui-fileupload {
display: none;
} 
```

我所做的是覆盖我的css文件中的样式，如下所示：

```
.ui-fileupload { 
display: inline; 
} 
```

信息： [http ://www.mkyong.com/jsf2/primefaces/how-to-override-primefaces-css/](http://www.mkyong.com/jsf2/primefaces/how-to-override-primefaces-css/)

# ios - 我应该如何完成“setTintColor forState”（不存在）？

> ID：10349010
> 
> 赞同：0
> 
> 时间：2012-04-27T10:29:40.080
> 
> 标签：ios, xcode, uiappearance

在我的应用程序委托中，我有这个：

```
UIColor* color = [UIColor colorWithRed:36/255.0f green:38/255.0f blue:56/255.0f alpha:1.0f];
[[UIBarButtonItem appearance] setTintColor:color]; 
```

我想为按下状态设置另一种颜色。

如何在不使用背景图像的情况下实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:36:44.153

UIBarButtonItem 没有不同的状态。然而`UIButton`做。因此，您可能希望在导航栏或工具栏中放置一个普通按钮，然后为每个状态使用不同的背景图像，如果您只想更改突出显示状态的色调，则可以`UIButton`使用该属性。`Highlight Tint`

如果您为不同的状态使用图像，那么您可以为这些状态定义图像：

*   默认
*   突出显示
*   已选中
*   已禁用

请参阅此 SO 帖子：[UIButton as UINavigationbar 按钮](https://stackoverflow.com/questions/3828781/uibutton-as-uinavigationbar-button)

# c# - 实现抽象工厂模式的正确方法？

> ID：10349012
> 
> 赞同：2
> 
> 时间：2012-04-27T10:29:41.593
> 
> 标签：c#, design-patterns, data-access-layer, abstract-factory

我即将以古老的 ado.net 方式构建数据访问层。传统上，我会根据简单的存储库模式构建 dal。但这次我想尝试一下抽象工厂模式，因为我最近在一篇文章中读到了这种模式。

所以在这里我尝试用抽象工厂模式编写一个dal。首先让我解释一下到目前为止我得到了什么。之后我想知道的是我的方法是否是实现这种模式的正确方法，以及存储库方法的优势是什么。

所以我写了以下类：

```
public abstract class Db
{
     //this is class will contain methods like:
     //public abstract IDbConnection CreateConnectionInstance();
}

public class SqlDb : Db
{
     //this is class will contain methods like:
     //public override IDbConnection CreateConnectionInstance()
     //{
     //      ... return new SqlConnection();
     //}
}

public class OracleDb : Db
{

}

public class MockupDb : Db
{

}

//this class generates the fitting provider but does not have a base (is this correct?)
public static class DbFactory
{
    public static Db CreateInstance(DbProviderType dbProviderType)
    {
        Db db = null;
        switch (dbProviderType)
        {
            case DbProviderType.Oracle:
                db = new OracleDb();
                break;
            case DbProviderType.Sql:
                db = new SqlDb();
                break;
            case DbProviderType.Mockup:
                db = new MockupDb();
                break;
            default:
                break;
        }
        return db;
    }
} 
```

所以我的问题简而言之：1）这是抽象工厂模式的正确实现吗？2）什么可以做得更好？3）从基类继承的不同存储库类有什么优势？

谢谢很多人。

如果您需要有关我的代码的更多信息，请告诉我。但是现在没有更多了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:47:37.670

.Net 中已经存在抽象数据库提供程序工厂。它称为[DbProviderFactory](http://msdn.microsoft.com/en-us/library/system.data.common.dbproviderfactory.aspx)。您可以通过创建不同的混凝土工厂

```
var factory = DbProviderFactories.GetFactory("System.Data.OracleClient");
DbConnection connection = factory.CreateConnection(); 
```

为什么不使用盒子里已有的东西？

[在这里](http://www.c-sharpcorner.com/UploadFile/amit_agrl/ProviderFactory08052005030042AM/ProviderFactory.aspx)，您可以阅读有关 DbProviderFactories 以及如何添加自定义工厂实现的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:44:07.743

I think, you mixed some concepts.

Repository allows you abstract away from the storage nature. It's a black box, which can give you an object, matching some criteria, and take it back. Repository internals can get or store object in multiple data sources (e. g. some object data stored in database, another part of data - in file, or in an external device, which cannot be described in terms of relational data source).

Factory can add more flexibility when working with ADO .NET data sources. But it is not a substitute of the repository. Repository can use factory to get particular data source implementation.

Upd. About your code sample - factory should throw exception, when provider's type is unknown.

# android - 高密度手机默认使用哪个可绘制文件夹？

> ID：10349021
> 
> 赞同：1
> 
> 时间：2012-04-27T10:30:10.350
> 
> 标签：android, android-image, android-resources

如果我在文件夹中有一张超高质量的图像，而在`drawable-xhdpi`文件夹中有一张同名的中等质量的图像，`drawable-mdpi`那么高密度手机会使用这两者中的哪一个？

> **编辑 1：** Nanne 的回答*没有*回答我的问题。他引用的段落与屏幕*尺寸*有关，而我的问题与屏幕 *密度*有关。我点击了 Nanne 提供的链接（感谢 Nanne），但确实找到了这段有用的段落：
> 
> *“...当您使用屏幕密度限定符提供替代可绘制资源时，您不需要默认可绘制资源。即使没有默认可绘制资源，Android 也可以在替代屏幕密度之间找到最佳匹配并根据需要缩放位图......”*
> 
> 但！！它只是（模糊地）说Android会找到最佳匹配。根据我的问题，任何人都知道最好的匹配是什么？
> 
> **编辑 2：**关于 Nanne 要求的一些背景知识：我有一个项目，我在其中添加了中、高和超高密度版本的图像。我的 apk 大小现在略高于 20MB，我希望将其保持在 20MB 以下。我想从 mdpi、hdpi 或 xhdpi 文件夹中删除一些图像，以使图像在所有密度手机上仍然可以缩放并且看起来不错，但不确定从哪个文件夹中删除一些图像...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:33:20.490

从[这个页面](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)

> 在根据屏幕尺寸限定符选择资源时，如果没有更好匹配的资源，系统将使用为小于当前屏幕的屏幕设计的资源（例如，如果需要，大屏幕将使用正常尺寸的屏幕资源） ）。但是，如果唯一可用的资源大于当前屏幕，系统将不会使用它们，并且如果没有其他资源与设备配置匹配，您的应用程序将崩溃（例如，如果所有布局资源都使用 xlarge 限定符进行标记，但设备是普通尺寸的屏幕）。

所以它应该使用中等的。

# html - 使用 html5 和 css3 的可扩展菜单

> ID：10349028
> 
> 赞同：0
> 
> 时间：2012-04-27T10:30:32.370
> 
> 标签：html, css, expandable

我正在设计一个移动网站。在主页上，我有菜单项说'a'，'b'，'c'，...，'h'。我只想显示前三个菜单项并制作一个“查看所有项目”按钮，单击该按钮会展开以显示所有项目。单击后该按钮应变为“显示较少项目”。

我想只使用**HTML5 和 CSS3 而不是 JavaScript 来做到这一点。** 我也希望这个功能可以在网站上**重复使用。**

我该怎么做？

- 提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T19:42:11.590

现代移动浏览器都支持 JavaScript，但给最终用户（至少在 Android 的情况下，不确定 iOS）一个配置设置来禁用它。

作为开发人员，您最好的选择是使用“故障安全”策略：交付 HTML 时菜单完全展开，并使用 JavaScript 在加载时立即折叠菜单（或在 DOM 就绪时）。这样，如果您的移动用户禁用了 JavaScript，他们将看到整个菜单。您的大多数用户都应该启用 JavaScript，在这种情况下，他们将获得您描述的展开/折叠功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:08:24.770

期望在没有 JavaScript 的情况下实现这一点是不现实的，如果你能找到一种解决方法，我认为它不会像简单地使用 JavaScript 那样稳定。在隐藏菜单项方面，您可以将它们的 CSS 属性设置为`display: none;`并放置一个以这些菜单项为目标并切换其显示属性的按钮。

# c++ - boost msm中的错误处理错误

> ID：10349030
> 
> 赞同：2
> 
> 时间：2012-04-27T10:30:45.213
> 
> 标签：c++, boost, state-machine

我有一个简单的状态机，它接收 3 种类型的消息，并根据消息类型发送相应的响应。在正常情况下，当以正确的顺序接收到正确的消息时，我的状态机运行良好。

* * *

但是在收到意外消息的情况下，`no_transition`调用它必须触发 `error_detected`事件，必须由`normal_workflow`状态处理。但是`no_transition`被称为 2 次，因为有 2 个正交区域。但我只需要在状态的情况下发生火灾`error_detected`事件`normal_workflow`。那么如何确定当前的活动状态`no_trasition`呢？这是我的代码，

```
#include <iostream>

#include <boost/msm/back/state_machine.hpp>
#include <boost/msm/front/state_machine_def.hpp>

#include <boost/msm/front/functor_row.hpp>
#include <boost/msm/front/euml/common.hpp>

#include <boost/msm/front/euml/operator.hpp>
#include <boost/msm/front/euml/state_grammar.hpp>

namespace msm = boost::msm;
namespace mpl = boost::mpl;

using namespace msm::front;
using namespace msm::front::euml;

namespace
{
    // events
    //
    struct received_type_1_msg { received_type_1_msg(){ std::cout << "received_type_1_msg" << std::endl; } };

    struct received_type_2_msg { received_type_2_msg(){ std::cout << "received_type_2_msg" << std::endl; } };

    struct received_type_3_msg { received_type_3_msg(){ std::cout << "received_type_3_msg" << std::endl; } };

    struct err_detected { err_detected(){ std::cout << "err_detected" << std::endl; } };

    // front end
    //
    struct test_sm_ : public msm::front::state_machine_def<test_sm_>
    {
        // states
        //
        struct idle : public msm::front::state<> 
        {
            template <class event,class fsm>
            void on_entry(event const& evt,fsm& sm) 
            {
                std::cout << "idle" << std::endl;
            }
        };

        struct wait_type_2_msg : public msm::front::state<> 
        {
            template <class event,class fsm>
            void on_entry(event const& evt,fsm& sm) 
            {
                std::cout << "wait_type_1_msg"<< std::endl;
            }
        };

        struct wait_type_3_msg : public msm::front::state<> 
        {
            template <class event,class fsm>
            void on_entry(event const& evt,fsm& sm) 
            {
                std::cout << "wait_type_3_msg"<< std::endl;
            }
        };

        struct normal_workflow : public msm::front::state<> 
        {
            template <class event,class fsm>
            void on_entry(event const& evt,fsm& sm) 
            {
                std::cout << "normal_workflow"<< std::endl;
            }
        };      

        // initial state
        //
        typedef mpl::vector2<idle, normal_workflow> initial_state;

        // transition actions
        //
        struct send_type_1_rsp
        {
            template<class event, class fsm, class src_state, class dst_state>
            void operator()(event const& evt, fsm&, src_state&, dst_state&) 
            {
                std::cout << "send_type_1_rsp"<< std::endl;
            }
        };

        struct send_type_2_rsp
        {
            template<class event, class fsm, class src_state, class dst_state>
            void operator()(event const& evt, fsm&, src_state&, dst_state&) 
            {
                std::cout << "send_type_2_rsp"<< std::endl;
            }
        };

        struct send_type_3_rsp
        {
            template<class event, class fsm, class src_state, class dst_state>
            void operator()(event const& evt, fsm&, src_state&, dst_state&) 
            {
                std::cout << "send_type_3_rsp"<< std::endl;
            }
        };

        struct send_error_rsp
        {
            template<class event, class fsm, class src_state, class dst_state>
            void operator()(event const& evt, fsm&, src_state&, dst_state&) 
            {
                std::cout << "send_error_rsp"<< std::endl;
            }
        };

        struct transition_table : mpl::vector<

            //     Start                       Event                           Next                        Action                         Guard
            //    +---------------------------+-------------------------------+---------------------------+------------------------------+--------+
            Row   < idle                      , received_type_1_msg           , wait_type_2_msg           , send_type_1_rsp              , none   >,
            Row   < wait_type_2_msg           , received_type_2_msg           , wait_type_3_msg           , send_type_2_rsp              , none   >,
            Row   < wait_type_3_msg           , received_type_3_msg           , idle                      , send_type_3_rsp              , none   >,
            //    +---------------------------+-------------------------------+---------------------------+------------------------------+--------+
            Row   < normal_workflow           , err_detected                  , idle                      , send_error_rsp               , none   >
            //    +---------------------------+-------------------------------+---------------------------+------------------------------+--------+
        >{};

        // no transition
        //
        template <class fsm,class event>
        void no_transition(event const& e, fsm& sm,int state)
        {
            std::cout << "no transition" << std::endl;
            //sm.process_event(err_detected());
        }
    };

    typedef msm::back::state_machine<test_sm_> test_sm;
}

int main(int argc, char** argv) 
{
    test_sm sm;
    sm.start();

    sm.process_event(received_type_1_msg());
    sm.process_event(received_type_2_msg());

    // wrong message received
    //
    sm.process_event(received_type_2_msg());

    return 0;
} 
```

一种解决方案是通过使用传递给`no_transition`. 还有其他解决方案吗？因为这样的东西看起来不太好：

```
template <class fsm,class event>
void no_transition(event const& e, fsm& sm,int state)
{
    // without this condition err_detected event will fired twise, because sm have 2 regions
    //
    if(state == 3)
    {
        // call this event only in NORMAL_WORKFLOW state, because it handled within this state
        //
        sm.process_event(err_detected());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:43:55.920

好吧，恕我直言，正交区域的使用很好。但是，错误处理事件仍然需要您自己触发。no_transition 是 MSM 出错时的唯一功能。所以，我的做法和你一样。

# android - android WebView 无法正常工作

> ID：10349037
> 
> 赞同：1
> 
> 时间：2012-04-27T10:31:49.603
> 
> 标签：android, android-layout, android-webview

当我在 android webview 中加载 YouTube 视频 url 时，我有点挣扎。我将该特定 YouTube 视频链接的嵌入代码加载到 web 视图中。我成功加载了。这里我的问题是，我必须加载超过 10 个链接，所以我使用滚动视图（我也使用列表视图）来显示加载的链接。当我滚动它放置在标题布局上的布局时，它也没有正确加载。在这里，我将我的代码与我的输出屏幕截图一起发布，请任何人帮助我解决这个问题。提前致谢。

**主要的.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <include
        android:id="@+id/header"
        layout="@layout/header_layout" />

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/header"
        android:orientation="vertical"
        android:scrollbars="none" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="2dp" >

            <!-- <ImageView -->
            <!-- android:id="@+id/inner_image" -->
            <!-- android:layout_width="fill_parent" -->
            <!-- android:layout_height="wrap_content" -->
            <!-- android:layout_below="@+id/inner_image" -->
            <!-- android:background="@drawable/lyrics_inner" /> -->

            <WebView
                android:id="@+id/web"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />

            <WebView
                android:id="@+id/web1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/web" />

            <WebView
                android:id="@+id/web2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/web1" />

            <WebView
                android:id="@+id/web3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/web2" />

            <WebView
                android:id="@+id/web4"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/web3" />
        </RelativeLayout>
    </ScrollView>

</RelativeLayout> 
```

**header_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/header_backButton"
    android:layout_width="fill_parent"
    android:layout_height="60dp"
    android:background="#333322"
    android:gravity="center_horizontal"
    android:text="HOME"
    android:textStyle="bold"
    android:textSize="30sp"
    android:textColor="#FFFFFF"
    /> 
```

**YoutubeActivity.java**

```
package com.devappandroid.youtube;

import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.webkit.WebSettings;
import android.webkit.WebView;

public class YoutubeActivity extends Activity {
    /** Called when the activity is first created. */
    private String src_value = "http://www.youtube.com/v/9WFvopZMty4?version=3&feature=player_embedded";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        WebView myWebView = (WebView) findViewById(R.id.web);
        WebView myWebView1 = (WebView) findViewById(R.id.web1);
        WebView myWebView2 = (WebView) findViewById(R.id.web2);
        WebView myWebView3 = (WebView) findViewById(R.id.web3);
        WebView myWebView4 = (WebView) findViewById(R.id.web4);
        myWebView.getSettings().setPluginState(WebSettings.PluginState.ON);
        myWebView1.getSettings().setJavaScriptEnabled(true);
        myWebView1.getSettings()
                .setJavaScriptCanOpenWindowsAutomatically(false);
        myWebView1.getSettings().setPluginsEnabled(true);
        myWebView1.getSettings().setSupportMultipleWindows(false);
        myWebView1.getSettings().setSupportZoom(false);
        myWebView1.setVerticalScrollBarEnabled(false);
        myWebView1.setHorizontalScrollBarEnabled(false);

        myWebView2.getSettings().setJavaScriptEnabled(true);
        myWebView2.getSettings()
                .setJavaScriptCanOpenWindowsAutomatically(false);
        myWebView2.getSettings().setPluginsEnabled(true);
        myWebView2.getSettings().setSupportMultipleWindows(false);
        myWebView2.getSettings().setSupportZoom(false);
        myWebView2.setVerticalScrollBarEnabled(false);
        myWebView2.setHorizontalScrollBarEnabled(false);

        myWebView3.getSettings().setJavaScriptEnabled(true);
        myWebView3.getSettings()
                .setJavaScriptCanOpenWindowsAutomatically(false);
        myWebView3.getSettings().setPluginsEnabled(true);
        myWebView3.getSettings().setSupportMultipleWindows(false);
        myWebView3.getSettings().setSupportZoom(false);
        myWebView3.setVerticalScrollBarEnabled(false);
        myWebView3.setHorizontalScrollBarEnabled(false);

        myWebView4.getSettings().setJavaScriptEnabled(true);
        myWebView4.getSettings()
                .setJavaScriptCanOpenWindowsAutomatically(false);
        myWebView4.getSettings().setPluginsEnabled(true);
        myWebView4.getSettings().setSupportMultipleWindows(false);
        myWebView4.getSettings().setSupportZoom(false);
        myWebView4.setVerticalScrollBarEnabled(false);
        myWebView4.setHorizontalScrollBarEnabled(false);

        String newPlay = "<object  style=\"height: 250px; width: 250px\"><param name=\"movie\" value="
                + src_value
                + "\"><param name=\"allowFullScreen\" value=\"true\"><param name=\"allowScriptAccess\" value=\"always\"><embed src="
                + src_value
                + " type=\"application/x-shockwave-flash\" allowfullscreen=\"true\" allowScriptAccess=\"always\" width=\"360\" height=\"360\"></object >";
        myWebView.loadData(newPlay, "text/html", "utf-8");
        myWebView1.loadData(newPlay, "text/html", "utf-8");
        myWebView2.loadData(newPlay, "text/html", "utf-8");
        myWebView3.loadData(newPlay, "text/html", "utf-8");
        myWebView4.loadData(newPlay, "text/html", "utf-8");
    }
} 
```

输出截图： ![在此处输入图像描述](../Images/bec46b12621f86dea08ea218b6a70305.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:15:29.720

相反，RelativeLayout 使用 LinearLayout（垂直视图）。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<TextView 
    android:id="@+id/header_backButton"
    android:layout_width="fill_parent"
    android:layout_height="60dip"
    android:background="#333322"
    android:gravity="center_horizontal"
    android:text="HOME"
    android:textStyle="bold"
    android:textSize="30sp"
    android:textColor="#FFFFFF"
    />

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/header"
        android:scrollbars="none" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_marginTop="2dip" >

            <WebView
                android:id="@+id/web"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />

            <WebView
                android:id="@+id/web1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/web" />

            <WebView
                android:id="@+id/web2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/web1" />

            <WebView
                android:id="@+id/web3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/web2" />

            <WebView
                android:id="@+id/web4"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/web3" />
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

# jetty - 我可以通过码头获取从 Web 表单加载的附件的原始文件名吗？

> ID：10349041
> 
> 赞同：0
> 
> 时间：2012-04-27T10:31:55.377
> 
> 标签：jetty, apache-camel

我正在使用骆驼码头进行简单的文件上传。jetty 发出一个表单，收集响应并创建一个附件。我有一个处理附件的骆驼处理器。

我的问题是 DataHandler 的 getName() 方法给了我类似的东西：

D:文件夹文件名.zip

即，它从文件路径中删除了所有 \ 字符。（是的，浏览器正在 Windows 上运行）。

有什么配置可以用来找出原始文件名吗？

这是骆驼 2.8 或 2.9 和码头 7.4.5。

如果它是一个错误，我会在 Jetty 中提出它，但我想知道我是否做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:41:17.450

我现在已经使用表单项的标题对其进行了排序。

# jquery - 带孩子的点击菜单

> ID：10349042
> 
> 赞同：0
> 
> 时间：2012-04-27T10:31:56.433
> 
> 标签：jquery, list, menu, click

我正在寻找某种 jQuery 单击菜单，`ul`如果单击的`li`元素有子元素，它将打开另一个菜单 - 像这样。

```
<ul>
    <li><a href"#">Item 1</a>
        <ul>
            <li><a href"page1.html">Item 1 child 1</a></li>
            <li><a href"page2.html">Item 1 child 2</a></li>
            <li>
                <a href"#">Item 1 child 3</a>
                <ul>
                    <li><a href"#">Item 1 child 3 child</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href"page3.html">Item 2</a></li>
    <li><a href"page4.html">Item 3</a></li>
</ul> 
```

因此，当我单击**“Item 1”**时，它将打开新列表，如果单击**“Item 1 child 3”**，它将打开另一个列表，依此类推。

我想我曾经看过一些，`.next`但我不太确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:36:19.537

这应该做你需要的：

```
$("a").click(function(e){
   $(this).closest("li").children("ul").toggle();
});​

$("a").click();//quick hack to hide all children to start with (if desired) 
```

[有关工作示例，请参见此处](http://jsfiddle.net/musefan/FTdxS/3/)

[这是一个具有滑动效果的示例](http://jsfiddle.net/musefan/FTdxS/10/)（如评论中所示）

* * *

**笔记**

使用该`.children`功能将意味着一旦父级重新扩展，所有“子扩展”都将被“保留” - 对我来说，这似乎是自然行为。

如果您希望关闭父级重置所有子扩展以在下次扩展父级时也关闭，那么您可以使用该`.find`方法替换`.children`

此外，应该考虑到此代码将适用于页面上的所有 A 链接，如果您需要更具体地了解此适用于您的 A 链接应该更改选择器。一个仅在 UL 元素中包含 A 链接的示例可能如下所示：

```
$("ul a").click(... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:37:41.737

使用 jQuery 手风琴插件将是满足您要求的理想方法。关于如何实现它的更多细节，可以在这里找到 [jQuery Accordion](http://docs.jquery.com/UI/Accordion)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:39:14.560

不是完整的实现，但这应该有助于我猜：

```
$("list").click(function(){
  $(this).find("ul").show();
}); 
```

也就是说，您可以使用“find()”来获取子元素。

编辑：如果您想要第一次出现，请使用“first()”api。

参考：[http ://api.jquery.com/first/](http://api.jquery.com/first/)

# javascript - 在谷歌驱动的折线图的 x 轴上定位点和标签

> ID：10349043
> 
> 赞同：0
> 
> 时间：2012-04-27T10:31:57.380
> 
> 标签：javascript, charts, google-visualization

使用 Google 的新图表是构建数据图形表示的绝妙方法，但是我已经能够在 Excel 中完成一些我无法使用 API 复制的方法。

我想要做的是使绘制在 x 轴上第一个点的点更靠近 y 轴。目前，第一个点是远离 y 轴绘制的，但在我生成的图表中，第一个点应该是数据的原点。这是我目前拥有的：

![当前的谷歌图表输出](../Images/c28968fb5ff727a55ae333a7763c4ca6.png)

绘制在 0,40 处的点远离 y 轴绘制。我想要的是有一个真正的 0,0 点，以便为“1”绘制的数据被视为第一天结束时采集的数据，而在“0”采集的数据只是基线：

![理想的谷歌图表输出](../Images/9dce422e5b9941b61ea50edc500a754d.png)

我也创建了一个[jsfiddle](http://jsfiddle.net/k4FVU/)供您使用，这里是 JavaScript：

```
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);
function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Day');
    data.addColumn('number', 'Slide');
    data.addRows([
        ['0', 40],
        ['1', 36],
        ['2', 32],
        ['3', 28],
        ['4', 24],
        ['5', 20],
        ['6', 16],
        ['7', 12],
        ['8',8],
        ['9', 4],
        ['10', 0],
    ]);

    var options = {
        colors: ['red', 'silver'],
        title: 'Slide',
        hAxis: {minValue: 0}
    };

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
}
​ 
```

和 HTML：

```
<div id="chart_div" style="width: 900px; height: 500px;"></div> 
```

[这里](https://google-developers.appspot.com/chart/interactive/docs/customizing_axes#Terminology)有一些关于自定义轴的提示，但它们只会破坏我的图表！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:52:49.553

使用图表时，将 x 轴定义为字符串会在图表的开头和结尾处强制留出间隙。这在 y 轴上的标签和绘制的第一个点之间最为显着，如问题中的图像所示。

为了克服这个问题，将 x 轴定义为一个数字（显然，在适当的情况下）：

```
data.addColumn('number', 'Day');
data.addColumn('number', 'Slide');
data.addRows([
    [0, 40],
    [1, 36],
    [2, 32],
    [3, 28],
    [4, 24],
    [5, 20],
    [6, 16],
    [7, 12],
    [8,8],
    [9, 4],
    [10, 0],
]); 
```

第一列现在是类型`number`，值现在是数字而不是字符串。看到它在[jsfiddle](http://jsfiddle.net/k4FVU/1/)上工作。

# php - 2个或更多字符串的正则表达式，带有php

> ID：10349047
> 
> 赞同：-2
> 
> 时间：2012-04-27T10:32:15.407
> 
> 标签：php, regex

我有这样的字符串：“ABC/ABC/123”、“ABC/ABC/123/567”、“ABC/123”

我想搜索有 2 个或更多“/”的字符串

我怎样才能用正则表达式做到这一点？

## 编辑

我找到了这样的解决方案：

```
´if($sku1!=$sku2 && preg_match("#^".$sku1."[/]#", $sku2) && substr_count($sku2, '/')==1) {´ 
```

有什么改善吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:34:57.340

是的，您可以使用正则表达式：

```
^([^\/]+\/){2,}$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:40:15.173

没有正则表达式（快得多）：

```
$string = "ABC/ABC/123";

if (strpos($string, '/', strpos($string, '/') + 1) !== FALSE) {
    echo "2 or more slashes in this string!";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T10:48:21.687

我同意 adrien 的观点：你完全有理由**不**为此使用正则表达式，尽管我建议另一种解决方案：

```
$string = 'ABC/ABC/123';
if (count(explode('/',$string)) > 2)
{
    echo $string.' contains at least 2 slashes';
} 
```

**编辑**

正如 OP 在下面的评论中指出的那样：`substr_count($string,'/')`是检查 2+ 斜线的最简单和最快的方法......

# xslt - 将条目与页码组合

> ID：10349048
> 
> 赞同：2
> 
> 时间：2012-04-27T10:32:16.920
> 
> 标签：xslt, xslt-2.0

我有一个索引条目，如下所示：

```
<entry name="a" page="1" />
<entry name="b" page="3" />
<entry name="b" page="4" />
<entry name="b" page="6" />
<entry name="c" page="7" /> 
```

现在我想得到类似的东西

```
<index name="a" pages="1 />
<index name="b" pages="3-4, 6" />
<index name="c" pages="7" /> 
```

有一些现成的功能吗？

我正在考虑一个两遍解决方案，首先将索引条目以如下格式放置

```
<index name="a" pages="1 />
<index name="b" pages="3 4 6" />
<index name="c" pages="7" /> 
```

然后将“3 4 6”变成“3-4, 6”。第一步很简单：

```
<xsl:for-each-group select="index" group-adjacent="@name">
  <xsl:element name="index">
    <xsl:attribute name="name" select="@name"/>
    <xsl:attribute name="pages" select="current-group()/@page"/>
  </xsl:element>
</xsl:for-each-group> 
```

（当然，此处的属性“页面”可能有所不同）

现在到了困难的一步，我应该如何遍历列表？必须有一些聪明的解决方案来检查下一个以下兄弟/@page（我可以将页面放入一个序列中）是否是当前的@page + 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:08:09.207

这是一个示例：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  version="2.0">

  <xsl:strip-space elements="*"/>
  <xsl:output indent="yes"/>

  <xsl:template match="entries">
    <xsl:for-each-group select="entry" group-by="@name">
      <index name="{current-grouping-key()}">
        <xsl:attribute name="pages">
          <xsl:for-each-group select="current-group()/xs:integer(@page)" group-by="position() - .">
            <xsl:if test="position() gt 1">
              <xsl:text>, </xsl:text>
            </xsl:if>
            <xsl:value-of select="if (current-group()[2]) 
                                  then (current-group()[1], current-group()[last()])
                                  else ." 
                          separator="-"/>
          </xsl:for-each-group>
        </xsl:attribute>
      </index>
    </xsl:for-each-group>
  </xsl:template>

</xsl:stylesheet> 
```

输入为

```
<entries>
<entry name="a" page="1" />
<entry name="b" page="3" />
<entry name="b" page="4" />
<entry name="b" page="6" />
<entry name="c" page="7" />
</entries> 
```

我得到结果

```
<index name="a" pages="1"/>
<index name="b" pages="3-4, 6"/>
<index name="c" pages="7"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:31:27.280

**这是另一个解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
      xmlns:xs="http://www.w3.org/2001/XMLSchema"
      exclude-result-prefixes="xs"      >
      <xsl:output omit-xml-declaration="yes" indent="yes"/>

      <xsl:template match="entries">
        <xsl:for-each-group select="entry" group-by="@name">
          <index name="{current-grouping-key()}">
            <xsl:attribute name="pages">
              <xsl:variable name="vAtribVals" as="xs:integer*">
                <xsl:perform-sort select="current-group()/@page/xs:integer(.)">
                  <xsl:sort data-type="number"/>
                </xsl:perform-sort>
              </xsl:variable>

              <xsl:sequence select=
                "$vAtribVals[1],
                 for $k in 2 to count($vAtribVals)
                   return
                     if($vAtribVals[$k] - $vAtribVals[$k -1] ne 1)
                       then concat(',', $vAtribVals[$k])
                       else
                         if($vAtribVals[$k+1] - $vAtribVals[$k] ne 1)
                           then concat('-', $vAtribVals[$k])
                           else()
                 "/>
            </xsl:attribute>
          </index>
        </xsl:for-each-group>
      </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**：

```
<entries>
    <entry name="a" page="1" />
    <entry name="b" page="3" />
    <entry name="b" page="4" />
    <entry name="b" page="6" />
    <entry name="c" page="7" />
</entries> 
```

**产生了想要的正确结果**：

```
<index name="a" pages="1"/>
<index name="b" pages="3-4,6"/>
<index name="c" pages="7"/> 
```

**请注意**：

1.  在进一步处理之前对`page`属性进行排序，这样即使`entry`元素在源 XML 文档中没有按排序顺序出现，也可以进行正确处理。

2.  该处理不依赖于整数值和位置之间的关系，这使其适用于属性值不是整数的其他情况。

# apache-flex - AIR 3 本机扩展 - 适用于 Windows 上的 Java？

> ID：10349049
> 
> 赞同：0
> 
> 时间：2012-04-27T10:32:17.997
> 
> 标签：apache-flex, air

有很多关于在 Android 上为 Java 编写 ANE 的教程/详细信息，但不是在 Windows 上为 Java 编写的。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-29T17:52:19.000

要将 Java 代码打包到 Windows 上的本机扩展中，您需要一个 C 包装器（使用 JNI 调用 API）。您可能需要分发一个完整的 JVM（尽管取决于您对目标机器的了解，您可能可以假设定义了 JVM 和 JAVA_HOME）。

# delphi - TGifImage 透明度问题

> ID：10349050
> 
> 赞同：7
> 
> 时间：2012-04-27T10:32:22.597
> 
> 标签：delphi, delphi-xe

我正在使用 Delphi XE 中包含的 TGifImage。

我要做的是从文件中加载 Gif 并将所有帧提取到位图。

这是我到目前为止所做的：

```
procedure ExtractGifFrames(FileName: string);
var
  Gif: TGifImage;
  Bmp: TBitmap;
  i: Integer;
begin
  Gif := TGifImage.Create;
  try
    Gif.LoadFromFile(FileName);

    Bmp := TBitmap.Create;
    try
      Bmp.SetSize(Gif.Width, Gif.Height);

      for i := 0 to Gif.Images.Count - 1 do
      begin
        if not Gif.Images[i].Empty then
        begin
          Bmp.Assign(Gif.Images[i]);
          Bmp.SaveToFile('C:\test\bitmap' + IntToStr(i) + '.bmp');
        end;
      end;
    finally
      Bmp.Free;
    end;
  finally
    Gif.Free;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  if OpenPictureDialog1.Execute then
  begin
    ExtractGifFrames(OpenPictureDialog1.FileName);
  end;
end; 
```

我面临的问题是许多不同 Gif 的透明度问题，以及大小问题。

以下是使用我上面的代码保存的一些示例位图：

![在此处输入图像描述](../Images/ca9f7b64008e8d2c83568fc17ecf678c.png) ![在此处输入图像描述](../Images/4b92456dac01897fb8253d2a5da584c0.png)

如您所见，结果不是很好，它们存在大小和透明度问题。

我知道 Gif 文件本身没有损坏，因为我可以通过我的网络浏览器加载它们并且它们可以正确显示而不会出现错误。

如何从文件中加载 Gif，将每一帧分配给位图而不损失任何质量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T14:12:28.133

**对于较旧的 Delphi 版本（2009 年之前）：**查看`GIFImage`单元代码，您可能想要检查如何`TGIFPainter`根据每个 Frame 的`Disposal`方法渲染图像。

我编写了一个小代码，利用`TGIFPainter.OnAfterPaint`事件处理程序将活动帧保存到 BMP，并完成所有“艰苦的工作”。

注意：`GIFImage`单元版本 2.2 发布：5 (23-MAY-1999)

```
type
  TForm1 = class(TForm)
    Button1: TButton;
    ProgressBar1: TProgressBar;
    procedure Button1Click(Sender: TObject);
  public
    FBitmap: TBitmap;
    procedure AfterPaintGIF(Sender: TObject);
  end;

...

procedure TForm1.Button1Click(Sender: TObject);
var
  GIF: TGIFImage;
begin
  GIF := TGIFImage.Create;
  FBitmap := TBitmap.Create;
  Button1.Enabled := False;
  try
    GIF.LoadFromFile('c:\test\test.gif');
    GIF.DrawOptions := GIF.DrawOptions - [goLoop, goLoopContinously, goAsync];
    GIF.AnimationSpeed := 1000; // Max - no delay
    FBitmap.Width := GIF.Width;
    FBitmap.Height := GIF.Height;
    GIF.OnAfterPaint := AfterPaintGIF;

    ProgressBar1.Max := Gif.Images.Count;
    ProgressBar1.Position := 0;
    ProgressBar1.Smooth := True;
    ProgressBar1.Step := 1;

    // Paint the GIF onto FBitmap, Let TGIFPainter do the painting logic
    // AfterPaintGIF will fire for each Frame
    GIF.Paint(FBitmap.Canvas, FBitmap.Canvas.ClipRect, GIF.DrawOptions);
    ShowMessage('Done!');
  finally
    FBitmap.Free;
    GIF.Free;
    Button1.Enabled := True;
  end;
end;

procedure TForm1.AfterPaintGIF(Sender: TObject);
begin
  if not (Sender is TGIFPainter) then Exit;
  if not Assigned(FBitmap) then Exit;
  // The event will ignore Empty frames      
  FBitmap.Canvas.Lock;
  try
    FBitmap.SaveToFile(Format('%.2d.bmp', [TGIFPainter(Sender).ActiveImage]));
  finally
    FBitmap.Canvas.Unlock;
  end;
  ProgressBar1.StepIt;
end; 
```

注意：没有错误处理来简化代码。

![输出位图](../Images/a47abb197c7bc4700f68face1ec932e3.png)

* * *

**对于较新的 Delphi 版本（2009+）：** 使用内置`GIFImg`单元，您可以使用[`TGIFRenderer`](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/!!MEMBEROVERVIEW_GIFImg_TGIFRenderer.html)（完全取代旧的`TGIFPainter`）轻松完成此操作，例如：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  GIF: TGIFImage;
  Bitmap: TBitmap;
  I: Integer;
  GR: TGIFRenderer;
begin
  GIF := TGIFImage.Create;      
  Bitmap := TBitmap.Create;
  try
    GIF.LoadFromFile('c:\test\test.gif');
    Bitmap.SetSize(GIF.Width, GIF.Height);
    GR := TGIFRenderer.Create(GIF);
    try
      for I := 0 to GIF.Images.Count - 1 do
      begin
        if GIF.Images[I].Empty then Break;
        GR.Draw(Bitmap.Canvas, Bitmap.Canvas.ClipRect);
        GR.NextFrame;
        Bitmap.SaveToFile(Format('%.2d.bmp', [I]));
      end;
    finally
      GR.Free;
    end;  
  finally
    GIF.Free;
    Bitmap.Free;
  end;
end; 
```

* * *

**使用 GDI+：**

```
uses ..., GDIPAPI, GDIPOBJ, GDIPUTIL;

procedure ExtractGifFrames(const FileName: string);
var
  GPImage: TGPImage;
  encoderClsid: TGUID;
  BmpFrame: TBitmap;
  MemStream: TMemoryStream;
  FrameCount, FrameIndex: Integer;
begin
  GPImage := TGPImage.Create(FileName);
  try
    if GPImage.GetLastStatus = Ok then
    begin
      GetEncoderClsid('image/bmp', encoderClsid);
      FrameCount := GPImage.GetFrameCount(GDIPAPI.FrameDimensionTime);
      for FrameIndex := 0 to FrameCount - 1 do
      begin
        GPImage.SelectActiveFrame(GDIPAPI.FrameDimensionTime, FrameIndex);
        MemStream := TMemoryStream.Create;
        try
          if GPImage.Save(TStreamAdapter.Create(MemStream), encoderClsid) = Ok then
          begin
            MemStream.Position := 0;
            BmpFrame := TBitmap.Create;
            try
              BmpFrame.LoadFromStream(MemStream);
              BmpFrame.SaveToFile(Format('%.2d.bmp', [FrameIndex]));
            finally
              BmpFrame.Free;
            end;
          end;
        finally
          MemStream.Free;
        end;
      end;
    end;
  finally
    GPImage.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:41:03.110

动画 GIF 文件的帧通常只包含与前一帧的差异（一种减小文件大小的优化技术）。因此，为了在特定点生成 GIF 的快照，您必须将所有帧一个接一个地粘贴到该点。

我们可以通过使用`Draw()`它的“透明绘制”选项集来实现这一点：

```
procedure ExtractGifFrames(FileName: string);
var
  Gif: TGifImage;
  Bmp: TBitmap;
  i: Integer;
  Bounds: TRect;
begin
  Gif := TGifImage.Create;
  try
    Gif.LoadFromFile(FileName);
    Bounds := Rect(0, 0, Gif.Width-1, Gif.Height-1);

    Bmp := TBitmap.Create;
    try
      Bmp.SetSize(Gif.Width, Gif.Height);
      Bmp.PixelFormat := pf32bit;

      for i := 0 to Gif.Images.Count - 1 do
      begin
        if not Gif.Images[i].Empty then
        begin
          Gif.Images[i].Draw(Bmp.Canvas, Bounds, True, True);
          Bmp.SaveToFile(IntToStr(i) + '.bmp');
        end;
      end;
    finally
      Bmp.Free;
    end;
  finally
    Gif.Free;
  end;
end; 
```

注意：动画 GIF 格式还有其他元素，它们指定重复帧的次数等，但它们可能与您无关。

# ruby-on-rails-3 - Rails 3 - 尝试在控制台中创建多态 has_one 关联

> ID：10349055
> 
> 赞同：1
> 
> 时间：2012-04-27T10:32:46.700
> 
> 标签：ruby-on-rails-3, polymorphic-associations, rails-console

这是我的代码：

楷模：

```
class Article < ActiveRecord::Base
  attr_accessible :title, :author, :content, :imageable_attributes

  has_one :image, as: :imageable, dependent: :destroy
  accepts_nested_attributes_for :image, allow_destroy: true

  validates_presence_of :title, :content, :author
end

class Image < ActiveRecord::Base
  mount_uploader :image, ImageUploader
  attr_accessible :image, :caption, :imageable_id, :imageable_type, :article_ref

  validates_presence_of :image
  belongs_to :imageable, :polymorphic => true
end 
```

这是我在控制台中尝试过的：

```
article = Article.create!(title: "test", content: "test", author: "test", image_attributes: {image: "test.jpg", caption: "test caption"}) 
```

这会创建一个没有错误的文章，但是如果我调用：

```
article.image 
```

我得到：

```
=> nil 
```

如果我输入控制台：

```
article = Article.new(title: "test", content: "test", author: "test")
article.build_image(image: "test.jpg") 
```

我得到：

```
=> Validation failed: Image image can't be blank 
```

非常感谢任何帮助，我很困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:01:48.503

我认为有必要提供附件本身，而不仅仅是路径。举个例子，

```
i = Image.new(
  :image => File.join(Rails.root, "test.jpg")
)
i.image

# => 
```

但

```
i = Image.new(
  :image => File.open(File.join(Rails.root, "test.jpg"))
)
i.image

# => /uploads/tmp/20120427-2155-1316-5181/test.jpg 
```

`File.open`但是，在使用 Multipart POST 保存时没有必要使用它。

# java - Android - editText 中的默认值

> ID：10349061
> 
> 赞同：37
> 
> 时间：2012-04-27T10:33:16.877
> 
> 标签：java, android, android-edittext

在我的应用程序中，我有一个编辑用户详细信息页面，我想在相应的 editText 字段中显示当前姓名、电子邮件地址等，然后用户可以删除它并在需要时输入一个新的。

有没有办法做到这一点？谢谢你的帮助

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-27T10:36:07.950

有`hint`特点吗？您可以使用`setHint()`来设置它，或者在 XML 中设置它（尽管您可能不希望那样，因为 XML 不“知道”您的用户的名称/地址:)）

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-27T10:36:39.977

您可以使用[`EditText.setText(...)`](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)设置 EditText 字段的当前文本。

例子：

```
yourEditText.setText(currentUserName); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-04-27T10:40:57.680

从xml：

```
 android:text="yourtext" 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-04-27T12:22:14.733

您可以在*xml*文件中为特定的 Edittext 字段使用*text*属性。例如 ：

 *```
<EditText
    android:id="@+id/ET_User"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="yourusername"/> 
```

像这样，所有 Edittext 字段都包含您想要的任何文本，如果用户想要更改特定的 Edittext 字段，他会删除旧文本并输入他的新文本。

在**另一种方式**中，您只需在活动类中获取特定的**Edittext 字段 id**并将文本设置为那个。

另一种方式=以编程方式

**例子：**

```
EditText username=(EditText)findViewById(R.id.ET_User);

username.setText("jack"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-27T10:59:54.400

首先，您需要以某种方式加载用户详细信息

然后你需要找到你的 EditText 如果你没有它-

`EditText et = (EditText)findViewById(R.id.youredittext);`

找到您的 EditText 后，请致电

```
et.setText(theUserName); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-27T11:30:12.113

你可以这样做

```
private EditText nameEdit;
private EditText emailEdit;
private String nameDefaultValue = "Your Name";
private String emailDefaultValue = "abc@xyz.com"; 
```

在 onCreate 方法里面

```
nameEdit = (EditText) findViewById(R.id.name);
    nameEdit.setText(nameDefaultValue); 
    nameEdit.setOnTouchListener( new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (nameEdit.getText().toString().equals(nameDefaultValue)){
                nameEdit.setText("");
            }
            return false;
        }
    });

    nameEdit.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {               
            if(!hasFocus && TextUtils.isEmpty(nameEdit.getText().toString())){
                nameEdit.setText(nameDefaultValue);
            } else if (hasFocus && nameEdit.getText().toString().equals(nameDefaultValue)){
                nameEdit.setText("");
            }
        }
    });     

    emailEdit = (EditText)findViewById(R.id.email);
    emailEdit.setText(emailDefaultValue);   
    emailEdit.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {               
            if(!hasFocus && TextUtils.isEmpty(emailEdit.getText().toString())){
                emailEdit.setText(emailDefaultValue);
            } else if (hasFocus && emailEdit.getText().toString().equals(emailDefaultValue)){
                emailEdit.setText("");
            }
        }
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-24T00:36:44.420

```
 public class Main extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        EditText et = (EditText) findViewById(R.id.et);
        EditText et_city = (EditText) findViewById(R.id.et_city);
        // Set the default text of second EditText widget
        et_city.setText("USA");
 }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-21T21:10:25.567

我们希望在未来版本的 SDK 中，android 视图或组视图的每个视图中都有一个默认值属性。但要克服这个问题，只需在提交之前，检查视图是否为空等于 true，然后分配一个默认值

例子：

```
 /* add 0 as default numeric value to a price field when skipped by a user,
                    in order to avoid parsing error of empty or improper format value. */
                    if (Objects.requireNonNull(edPrice.getText()).toString().trim().isEmpty())
                    edPrice.setText("0"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-06T11:40:54.097

使用 android android:hint 设置默认值或 android:text*

# windows - 使用启动命令时如何通过批处理脚本更改命令窗口的颜色

> ID：10349069
> 
> 赞同：1
> 
> 时间：2012-04-27T10:33:52.970
> 
> 标签：windows, colors, cmd, robocopy, batch-file

我正在运行一些小批量脚本来使用 robocopy 将数据从一个位置复制到另一个位置

我在下面粘贴了一个示例。

我需要为每个批处理文件做的是让它打开并运行列出的 robocopy 命令（它正在执行），但我需要 robocopy 输出窗口在每个批处理文件中设置颜色。

批处理文件如下所示 start robocopy.exe "source" "destination" /MIR /Log:e:\outputlog.txt /TEE

启动 robocopy.exe "源" "目标" /MIR /Log:e:\outputlog.txt /TEE

启动 robocopy.exe "源" "目标" /MIR /Log:e:\outputlog.txt /TEE

以上将立即运行，这很好，但我不能让 robocopy 窗口改变颜色。（上面的 3 种颜色可以作为一种颜色，我们将像上面一样运行另一个批处理文件，但使用不同的颜色来区分副本）

这甚至可能吗？

我知道 cmd 命令可以进行颜色更改，但仅适用于该窗口。当 robocopy 命令打开一个新窗口时，颜色设置不会传递，

对此的任何帮助或想法将不胜感激。我们需要保持代码简单，因为不同的用户需要使用它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:39:28.620

`cmd`可以采用 /T 参数来指定颜色。例如：`start cmd /T:5A`启动一个带有紫色（5）背景和浅绿色文本（A）的新命令窗口

您可以使用 /C 或 /K 在新实例中启动新命令（ C 在完成时终止）

即`start cmd /T:5A /K robocopy...`应该这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:38:01.460

如果您将 2 个单独的 robocopys 制作成批处理文件，那么您可以更改颜色。

---- bat1.cmd

```
color 71
robocopy.exe "source" "destination" /MIR /Log:e:\outputlog.txt /TEE 
```

---- bat2.cmd

```
color 75
robocopy.exe "source" "destination" /MIR /Log:e:\outputlog.txt /TEE 
```

然后你原来的东西

```
call bat1.cmd
call bat2.cmd 
```

这对你不起作用吗？

# java - 带有 log4j 的 jdbcadapter 中的问题

> ID：10349070
> 
> 赞同：1
> 
> 时间：2012-04-27T10:33:55.460
> 
> 标签：java, sqlite, jboss, log4j

以下是我的`jdbcAdapter`，我正在使用 jboss 服务器，我已将我的`sqlite`数据库位置设为静态，我想以动态的方式给出该位置。

```
<appender name="jdbcAppender" class="org.apache.log4j.jdbc.JDBCAppender">
        <param name="URL" value="jdbc:sqlite:D:/db/sfLog.db" />
        <param name="user" value="" />
        <param name="password" value="" />
        <param name="driver" value="org.sqlite.JDBC" />
        <param name="threshold" value="trace" />
        <param name="sql" value="INSERT INTO sfLog(UserID,UserName,IPAddress,Port,UserAgent,Type,Status,Message,Date) VALUES ('%X{UserID}','%X{UserName}','%X{IP}','%X{Port}','%X{Agent}','%X{Type}','%X{Status}','%m','%d{dd-MM-yyyy HH:mm:ss}')" />
</appender> 
```

当我的其他 sqlite 元数据跟随我的获取`file.getAbsolutePath();`时，我该如何使用`log4j`？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:36:37.433

您可以尝试在**properties-service.xml**中设置这些参数，然后使用`System.getProperty`

# entity-framework-4 - 获取投影到具有额外字段的新类型的不同实体列表以进行计数

> ID：10349074
> 
> 赞同：0
> 
> 时间：2012-04-27T10:34:17.670
> 
> 标签：entity-framework-4, linq-to-entities

我正在设计一个界面，用户可以在其中将 publicaiton 加入关键字，当他们这样做时，我想建议通常与所选关键字一起出现的其他关键字。诀窍是获得相关频率以及建议关键字的属性。

关键字类型 (EF) 具有以下字段：

```
int Id
string Text
string UrlString 
```

...以及与 Publications 实体集的多对多关系。
我快到了。和 ：

```
var overlappedKeywords =
            selectedKeyword.Publications.SelectMany(p => p.Keywords).ToList(); 
```

在这里，我得到了一些非常有用的东西：一个扁平化的关键字列表，每个关键字都在列表中重复，但它与 selectedKeyword 一起出现了很多次。

**剩下的挑战：**
所以我想计算每个关键字出现在这个列表中的次数，并将*不同*的关键字实体投影到一种新类型上，称为 KeywordCounts，具有与 Keyword 相同的字段但有一个额外的字段：`int PublicationsCount`，我将在其中填充重叠关键字中每个关键字的计数。**我怎样才能做到这一点？？**

到目前为止，我已经尝试了 2 种方法：

```
var keywordCounts = overlappingKeywords
    .Select(oc => new KeywordCount
        {
            KeywordId = oc.Id,
            Text = oc.Text,
            UrlString = oc.UrlString,
            PublicationsCount = overlappingKeywords.Count(ok2 => ok2.Id == oc.Id)
        })
    .Distinct(); 
```

...PublicationsCount 正在正确填充，但 Distinct 在这里不起作用。（我*必须*为此创建一个 EqualityComarer 吗？为什么默认的 EqualityComarer 不起作用？）

```
var keywordCounts = overlappingKeywords
    .GroupBy(o => o.Id)
    .Select(c => new KeywordCount
        {
            Id = ???
            Text = ???
            UrlString = ???
            PublicationsCount = ???
        }) 
```

我对 GroupBy 不是很清楚。我似乎无法访问 Select 中的 'o'，并且 c 没有与 Keyword 的任何属性相匹配

**更新**
我的第一种方法将使用传递给 .Distinct() 的简单 EqualityComparer ：

```
class KeywordEqualityComparer : IEqualityComparer<KeywordCount>
{
    public bool Equals(KeywordCount k1, KeywordCount k2)
    {
        return k1.KeywordId== k2.KeywordId;
    }

    public int GetHashCode(KeywordCount k)
    {
        return k.KeywordId.GetHashCode();
    }
} 
```

...但是 Slauma 的答案更可取（并且被接受），因为它不需要这个。对于 EF 实体实例的默认 EqualityComparer 是什么，我仍然感到困惑——它不会像我在上面所做的那样根据主要 id 进行比较吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:13:16.250

你第二次尝试是更好的方法。我认为完整的代码是：

```
var keywordCounts = overlappingKeywords
    .GroupBy(o => o.Id)
    .Select(c => new KeywordCount
    {
        Id = c.Key, 
        Text = c.Select(x => x.Text).FirstOrDefault(),
        UrlString = c.Select(x => x.UrlString).FirstOrDefault(),
        PublicationsCount = c.Count()
    })
    .ToList(); 
```

我猜这是 LINQ to Objects，因为似乎没有涉及 EF 上下文，而是一个 object `overlappingKeywords`，所以分组发生在内存中，而不是在数据库中。

# c# - 使用 WCF 服务开发 iOS 应用程序

> ID：10349075
> 
> 赞同：1
> 
> 时间：2012-04-27T10:34:22.703
> 
> 标签：c#, .net, ios, wcf, service

我在 iOS 中编写客户端应用程序。我在 Visual Studio 的 WCF 中编写服务器端。我使用与 Mac 上的 ace 视觉工作室相似的东西。我在 IIS 中运行该服务。我可以从 iOS 应用程序以某种方式访问​​该服务吗？如果我在 Internet Explorer 中键入[http://127.0.0.1/](http://127.0.0.1/)，它会打开 IIS。但是如果我在 safari 中输入[http://127.0.0.1/](http://127.0.0.1/)，它就无法识别地址。如何从我的 iOS 应用程序访问该服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:42:09.757

127.0.0.1 是本地环回地址。您需要将您电脑的本地 IP 地址放入您的 safari 浏览器使用 ipconfig 才能找到它。为了通过您的 ios 应用程序访问服务，您需要使用 iOS sdk 中的 NSMutableURLRequest。

# c# - 为什么活动 MQ 消费者即使在线也没有收到任何消息？

> ID：10349077
> 
> 赞同：2
> 
> 时间：2012-04-27T10:34:39.757
> 
> 标签：c#, activemq, apache-nms

1.  消费者创建。
2.  制作人创建。
3.  消息已发送。
4.  在队列中排队的消息。
5.  但是 Msg 没有出队（即使该队列有在线消费者）。

系统上没有记录错误。那么可能是什么原因呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:51:19.833

如果你没有调用 connection.start() 那么你的消费者将不会收到任何东西。如果您有并且它仍然无法正常工作，那么我们需要查看一些代码以帮助解决它。

# c# - 在不知道具体活动类型的情况下恢复持久的 Window Workflow 4 活动

> ID：10349088
> 
> 赞同：2
> 
> 时间：2012-04-27T10:35:17.013
> 
> 标签：c#, .net, workflow-foundation-4, workflow-foundation

我试图了解如何在不知道活动的具体类型的情况下恢复（加载）以前持久的 WF4 活动。

为了加载一个持久化的活动，我不仅需要它`workflowId`（我有），而且我还需要传递一个活动的实例——所以我需要知道它的类型：

```
var workflowApplication = new WorkflowApplication(activity); // what type is activity?
workflowApplication.Load(workflowId); 
```

问题在于它可能是多种类型中的一种 - 此活动旨在用于其他活动和工作流：它将消息发送到消息队列、书签然后持续存在。当通过消息队列接收到相应的消息时会恢复它，但如果不检查持久性数据，我不知道原始工作流的确切具体类型。这似乎是第 22 条规则。我无法在不知道活动类型的情况下加载工作流，如果不加载工作流并检查其持久数据，我也无法知道活动类型。

我觉得我在这里遗漏了一些东西 - 有没有办法在不知道活动的情况下创建托管 WorkflowActivity，或者`activity`在创建之前重新加载持久性数据以计算出实际类型`WorkflowActivity`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:58:55.177

通过 WF API 没有原生支持，您必须提出自己的解决方案。

最快的方法：[Store Extensibility](http://msdn.microsoft.com/en-us/library/ee364726.aspx)使用InstancePromotedProperties 表来保存你自己的属性。

可能是正确的方法：[PersistenceIOParticipant](http://msdn.microsoft.com/en-us/library/system.activities.persistence.persistenceioparticipant.aspx)似乎是正确的方法。只需创建自己的表来存储您想要的任何内容，包括活动的类型。

在坚持之前，使用自定义活动在某处为您保存它。由于各种原因，这不是最好的也不是正确的方法。

# authentication - 如何进行 Ldap 服务器身份验证？

> ID：10349093
> 
> 赞同：1
> 
> 时间：2012-04-27T10:35:43.423
> 
> 标签：authentication, ldap, splunk, python-ldap

我已经在某处设置了***Ldap 服务器。***我可以绑定到它，可以添加、修改、删除数据库中的条目。现在，当涉及到**身份验证**时，它不是像将用户名和密码提供给服务器一样简单，要求它搜索与两者匹配的条目吗？此外，它不是包含用户密码的“ **userPassword ”字段吗？**

现在，我尝试设置**splunk**以从我的 Ldap 服务器进行身份验证，我提供了用户名和密码，但它未能通过身份验证。不是splunk 检查的“ **userPassword ”字段吗？**可能的原因应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:41:46.903

出于明显的安全原因，LDAP 服务器通常不允许您搜索 userPassword 属性。（而且密码属性很可能以散列形式存储，因此直接搜索是行不通的。）

相反，进行 LDAP 身份验证的常用方法是：

*   提示输入用户名和密码
*   使用您的应用程序帐户绑定到 LDAP，搜索`username`以获取用户的 LDAP 条目的完整专有名称 (dn)
*   建立一个新的 LDAP 连接，并尝试使用用户的 dn 和密码进行绑定

（如果您知道如何从用户名构造 dn，则可以跳过第 2 步，但通常最好先搜索 - 这样您对 LDAP 目录的 OU 结构更改等事情就不那么敏感了）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:11:56.050

通常，您会使用在 LDAP 树中的 uid 或 cn 值上提供的用户名值进行搜索。

-吉姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:43:59.537

我认为此代码将帮助您解决身份验证问题。我已经回答以解决问题。你可以看看这个问题[http://bit.ly/TIJMte](http://bit.ly/TIJMte)

# r - 分组数据并绘制多条线

> ID：10349096
> 
> 赞同：24
> 
> 时间：2012-04-27T10:35:57.063
> 
> 标签：r, ggplot2, linechart

我想在 R 中为这个数据集绘制多条线：（x = Year, y = Value）

```
School_ID   Year    Value
A           1998    5
B           1998    10
C           1999    15
A           2000    7
B           2005    15 
```

每所学校都有不同年份的数据。我想为每所学校设置一条线路。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-27T10:49:39.717

让我们创建一些数据：

```
dd = data.frame(School_ID = c("A", "B", "C", "A", "B"),
  Year = c(1998, 1998, 1999, 2000, 2005),
  Value = c(5, 10, 15, 7, 15)) 
```

然后在基础图形中创建一个绘图，我们创建一个组的初始绘图：

```
plot(dd$Year[dd$School_ID=="A"], dd$Value[dd$School_ID=="A"], type="b",
     xlim=range(dd$Year), ylim=range(dd$Value)) 
```

然后迭代地添加行：

```
lines(dd$Year[dd$School_ID=="B"], dd$Value[dd$School_ID=="B"], col=2, type="b")
lines(dd$Year[dd$School_ID=="C"], dd$Value[dd$School_ID=="C"], col=3, type="b") 
```

我习惯于`type="b"`显示点和线。

**或者**，使用 ggplot2：

```
require(ggplot2)
##The values Year, Value, School_ID are
##inherited by the geoms
ggplot(dd, aes(Year, Value,colour=School_ID)) + 
    geom_line() + 
    geom_point() 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-27T10:54:18.510

这是你想要的吗？您需要`group = School_id`告诉 ggplot2 为每所学校绘制单独的线。如果您希望横轴包括 1998 年至 2005 年之间的所有年份，则`factor`删除`x = factor(year)`

```
 library(ggplot2)

df = read.table(text = "School_id Year Value 
 A           1998    5
 B           1998    10
 C           1999    15
 A           2000    7
 B           2005    15", sep = "", header = TRUE)

ggplot(data = df, aes(x = factor(Year), y = Value, color = School_id)) +       
  geom_line(aes(group = School_id)) + geom_point() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T13:29:11.190

基础 R 中的绘图函数不支持分组，因此您需要一一显示您的组。GGPLOT 很好地处理分组。我还建议查看 Trellis XYPLOT，它允许您绘制单独的组。

这是使用格状图创建基本分组线图的方法：

```
library(lattice)
rm(list = ls())     # clear objects  
graphics.off()      # close graphics windows   

test = data.frame(x =  rep(1:3, each = 2),
                  group =  rep(c("Group 1","Group 2"),3),
                  y=   c(22,8,11,4,7,5)
                 )
xyplot(y~x,
       type="b",
       group=group,
       data=test,
       auto.key =list(
         points = FALSE, 
         columns=2,
         lines = TRUE)
) 
```

# string - 来自第一个 indexof 子字符串的 Shell 脚本子字符串

> ID：10349102
> 
> 赞同：20
> 
> 时间：2012-04-27T10:36:28.763
> 
> 标签：string, bash, shell, unix, scripting

我想在 bash 中完成以下伪代码的等效项（a 和 b 都是我的脚本的输入）：

```
String a = "some long string";
String b = "ri";
print (a.substring(a.firstIndexOf(b), a.length()); //prints 'ring' 
```

如何在 shell 脚本中执行此操作？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-10T13:14:35.743

尝试：

```
 $ a="some long string"
    $ b="ri"

    $ echo ${a/*$b/$b}
    ring

    $ echo ${a/$b*/$b}
    some long stri 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-27T10:39:46.353

你可以做：

```
$ a="some long string"
$ b="ri"
$ echo $a | grep -o "$b.*"
ring 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T11:04:09.567

`grep`,`sed`等等都可以使用，但它不是纯 bash。

`expr`是一个不错的选择，但`index`参数不是，因为它匹配字符而不是整个字符串，尝试`a = "some wrong string"`匹配第一个`r`。

而是使用`expr match`其正则表达式参数：

```
a="some long string";
b="ri";
echo ${a:$(expr match "$a" ".*${b}") - $(expr length "$b")} 
```

它也适用于`a = "some wrong string"`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-27T12:22:11.300

尝试这个：

```
a="some long string"
b="ri"

echo  ${b}${a#*${b}} 
```

# jquery - 为什么 jquery 在 .load() 之后看不到页面的变化？

> ID：10349107
> 
> 赞同：1
> 
> 时间：2012-04-27T10:36:43.407
> 
> 标签：jquery

我刚刚尝试使用 jQuery 的 .load 方法更改我的页面内容。

虽然内容更改没有问题，但我发现如果我尝试选择某些内容，jQuery 仍然“看到”旧内容，例如：

页：

```
 <div id="mycontentarea">
   <div id="myfirstcontent"></div>
   <div id="mysecondcontent"></div>
</div> 
```

替换内容：

```
<div id=mythirdcontent"></div>
<div id=myfourthcontent"></div> 
```

javascript:

```
// replace original content
$('#mycontentarea').load('replacement.html');
// print out the id of the first child
console.log($("#mycontentarea").children().attr("id")); 
```

控制台将打印出“myfirstcontent”而不是“mythirdcontent”——为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T10:40:06.323

因为[`load`](http://api.jquery.com/load/)是异步的，并且您的`console.log`调用在替换发生之前执行。

将依赖于调用结果的任何代码移至`load`成功完成后执行的回调：

```
$('#mycontentarea').load('replacement.html', function() {
    //Anything in here is executed once the content has been returned successfully
    console.log($("#mycontentarea").children().attr("id"));
}); 
```

从上的文档`load`：

> 如果提供了“完成”回调，则在执行后处理和 HTML 插入后执行。回调会为 jQuery 集合中的每个元素触发一次，并依次设置为每个 DOM 元素。

# c# - 使用 OleDb 和 Access 数据库引擎的 C# Excel INSERT 错误

> ID：10349109
> 
> 赞同：2
> 
> 时间：2012-04-27T10:36:54.530
> 
> 标签：c#, excel, connection-string, oledb

所有，关于这个主题有很多问题，但没有一个能解决我的问题。我编写了一个相当复杂的例程来使用 OleDb 和 Access 数据库引擎将传递的`DataSet`/导出`DataTable`到 Excel（我在 Win7 下运行 Office 2010）。问题是无论我如何定义要写入 Excel 的列，所有值都导出为`TEXT/STRING`字段。

我正在使用`OleDbConnection`字符串

```
string fileName = @"F:\SomePath\MyExcel.xlsx";
string connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=
    {0};Extended Properties=""Excel 12.0 Xml;HDR=YES;MaxScanRows=0;IMEX=0""", fileName); 
```

并尝试了许多其他[连接字符串选项](http://www.connectionstrings.com/excel-2007)，但没有成功。

我在代码中生成 Excel 定义，但明确地将这些定义生成为

```
CREATE TABLE [MetaTab] ([Table] TEXT,[Field] TEXT,[Seq] NUMBER,[DataLevel] NUMBER) 
```

然后我为插入生成代码，对于上面的示例，这是

```
INSERT INTO [MetaTab$]([Table],[Field],[Seq],[DataLevel])VALUES('B1A','EstabID','1','9') 
```

这可行，但所有值都写为 TEXT。**如何强制 Excel 采用其他数据格式？**

注意：我尝试删除非字符串的撇号，但这也不起作用。我真的被困住了，任何想法都将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:34:14.707

在 Excel 工作表中插入值时，无法向 OleDbCommand 提供任何提示（语法）以插入数值。打开工作表时，它不会在工作表中将数值显示为数字。

有一种解决方法，当在 excel 文件中创建第一条记录时，然后转到第一条记录并在已存在记录的单元格（需要数字数据的地方）中重新输入相同的值。

或者

您可以在该 Excel 表中放置带有数值的默认记录。

下面提到了示例代码，用于在工作表中创建第一条记录后将数据类型转换为数字。当任何记录插入工作表时调用一次 ChangeFormat 函数，进一步的数据将以正确的格式保存。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Office.Interop.Excel;
using System.Data;

namespace ConsoleApplication3
{
    class Program
    {
        static void Main(string[] args)
        {

        System.Data.DataTable xlsData = new System.Data.DataTable();
        string xlsConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=d:\\romil.xlsx;Extended Properties=\"Excel 12.0;HDR=Yes;\"";
        System.Data.OleDb.OleDbConnection xlsCon = new System.Data.OleDb.OleDbConnection(xlsConnectionString);
        System.Data.OleDb.OleDbCommand xlsCommand;
        int recUpdate;
        int recordsinSheet;

        xlsCommand = new System.Data.OleDb.OleDbCommand("Select count(*) as RecCount from [Sheet1$]");
        xlsCommand.Connection = xlsCon;
        xlsCon.Open();
        recordsinSheet =Convert.ToInt32( xlsCommand.ExecuteScalar());

        xlsCommand=   new System.Data.OleDb.OleDbCommand("Insert into [Sheet1$] (Field1,Field2) values ('123',2)");
        xlsCommand.Connection = xlsCon;

        recUpdate = xlsCommand.ExecuteNonQuery();
        xlsCon.Close();

        if ((recordsinSheet + recUpdate) == 1)
            ChangeFormat();

        Console.ReadKey();

    }

    private static void ChangeFormat()
    {
        string filename = "d:\\romil.xlsx";

        object missing = System.Reflection.Missing.Value ;

        Microsoft.Office.Interop.Excel.Application excel = new Microsoft.Office.Interop.Excel.Application();

        Microsoft.Office.Interop.Excel.Workbook wb = excel.Workbooks.Open(filename, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing);

        Microsoft.Office.Interop.Excel.Worksheet wsh=null;
        foreach (Microsoft.Office.Interop.Excel.Worksheet sheet in wb.Sheets)
        {
            if (sheet.Name == "Sheet1")
            {
                wsh = sheet;
                break;
            }
        }

        for (int rCnt = 2; rCnt <= wsh.Rows.Count; rCnt++)
        {

            if  ( wsh.Cells[rCnt, 2].Value== null)
                break;

            wsh.Cells[rCnt, 2] = wsh.Cells[rCnt, 2].Value;
        }    

        wb.SaveAs(filename, missing,
            missing, missing, missing, missing,
           Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange,
            missing, missing, missing,
            missing, missing);
        wb.Close();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:51:23.100

我不认为你可以。excel 格式实际上并不类似于数据库列数据类型 - 最终基础值始终是数字或字符串；然后格式决定它的显示方式。

即使我错了——我个人更喜欢使用[http://epplus.codeplex.com/](http://epplus.codeplex.com/)来生成我的 Excel 电子表格——你可以在其中做很多非常高级的东西，也可以做一些简单的东西，比如格式化。

# ruby - "foo.nil? ? nil : foo.to_i" 的 Ruby 习语？

> ID：10349111
> 
> 赞同：5
> 
> 时间：2012-04-27T10:37:00.083
> 
> 标签：ruby, idioms

```
def bar(foo)
  foo.nil? ? nil : foo.to_i
end 
```

“foo.nil? ? nil : foo.to_i” 的任何简明 Ruby 习语？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T10:42:05.633

或者更短一点（如果你不希望`foo`是`false`）

```
def bar(foo)
  foo.to_i if foo
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T10:41:04.097

```
def bar(foo)
  foo.to_i unless foo.nil?
end 
```

但是你并没有真正获得任何东西，IMO，除了消除`? ?`. 如果您了解 Ruby ，它是一个更短的字符，*可能*更具可读性。不知道，因为它比三元更“简洁”。

（我说“可能”是因为在这种情况下它可能被认为是不明显的行为`nil`。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T14:47:00.237

```
foo and foo.to_i 
```

布尔运算符[短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)并返回最后评估的表达式的值。

*   如果`foo` *是* `nil`，它将被返回并且`foo.to_i`不会被执行。
*   如果`foo` *不是* `nil`，`foo.to_i`将被评估并返回其结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-27T19:27:57.160

如果您使用 Rails 中的 ActiveSupport，您可以使用`try`方法编写它

```
foo.try(:to_i) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-08T05:26:04.657

如果你碰巧真的想要这个成语的破坏性版本，即

```
foo = (foo.nil? ? nil : foo.to_i) 
```

那么你可以做

```
foo &&= foo.to_i 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-27T11:18:43.733

我使用 andand gem

[http://andand.rubyforge.org/](http://andand.rubyforge.org/)

这让我可以去：

```
foo.andand.to_i 
```

如果 foo 为 nil，则返回 nil，否则返回 to_i。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-25T20:05:33.847

正确的红宝石成语是

```
foo && foo.to_i 
```

然而，[ruby 2.3.0](https://www.ruby-lang.org/en/news/2015/12/25/ruby-2-3-0-released/)引入了[安全导航算子](https://bugs.ruby-lang.org/issues/11537)，由于[某种原因](https://www.instagram.com/p/-M9l6mRPLR/)在 ruby​​ 社区中也被称为“孤独算子”。使用它，您可以编写与以下内容相同的内容：

```
foo&.to_i 
```

达到同样的效果。

PS：有些人[讨厌](http://rubinius.com/2016/01/11/nil-is-not-null-and-other-tales/)它。

玩得开心。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-23T02:18:11.277

[**编写 Ruby 代码的惯用方式**](https://medium.com/the-renaissance-developer/idiomatic-ruby-1b5fa1445098)。

我们可以用 4 种不同的方式编写代码：

使用`if`：

```
def bar(foo)
  foo.to_i if foo
end 
```

使用`unless`：

```
def bar(foo)
  foo.to_i unless foo.nil?
end 
```

`try`如果使用 Rails，则使用方法：

```
def bar(foo)
  foo.try(:to_i)
end 
```

如果使用 Ruby 2.3.x，则使用`&.`运算符（Ruby 安全导航运算符）：

```
def bar(foo)
  foo&.to_i
end 
```

有关[**编写 Ruby 代码的更多惯用方式**](https://medium.com/the-renaissance-developer/idiomatic-ruby-1b5fa1445098)，我阅读了一篇关于此的优秀文章。

# objective-c - 选择行时不会删除 UIPickerView

> ID：10349112
> 
> 赞同：2
> 
> 时间：2012-04-27T10:37:03.887
> 
> 标签：objective-c, ios

我有一个 UIPickerView 在选择文本字段时出现：

```
-(void) showPicker
{
    [self.genere resignFirstResponder];
    pickerGenero = [[UIPickerView alloc] initWithFrame:CGRectMake(0,215,320,0)];

    pickerGenero.delegate = self;
    pickerGenero.dataSource = self;
    pickerGenero.showsSelectionIndicator = YES;    

    [self.parentViewController.tabBarController.view addSubview:pickerGenero];  
    pickerGenero=nil; 
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component 
{
    return [genreArray count];
}
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;  
}
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    self.genere.text =[genreArray objectAtIndex:row];
    [self.pickerGenero removeFromSuperview];

} 
```

但是在选择行时不会被删除。文本字段会使用选定的值进行更新，但不会删除选取器视图。我尝试将 .setideen=True 用作试用版，但它也不起作用。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:44:34.010

其实你的不是正确的编码方式。当您单击 textField 时，您只需通过使用`resignFirstResponder`和调用来隐藏键盘。而`pickerView`不是这样做，您必须为textField添加您的`pickerView`as 。然后试试这段代码`inputView``genere`

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    self.genere.text =[genreArray objectAtIndex:row];
    [genere resignFirstResponder];

} 
```

# java - Android/Java 线程休眠

> ID：10349117
> 
> 赞同：1
> 
> 时间：2012-04-27T10:37:32.177
> 
> 标签：java, android, multithreading, concurrency, concurrent-programming

**除了隐式用户界面线程之外，我还创建了两个线程（可运行），它们内部都有一个 while 循环，我在其中定期检查我已实现的消息队列中的更新。**

一开始的问题是，这两个while循环是无限的，而且它们变化如此之快，以至于它们几乎耗尽了设备的所有CPU。所以我考虑让while循环在每个循环后休眠大约100毫秒，让其他线程完成他们的工作，但我遇到了另一个问题：

现在，问题是线程休眠了 100 毫秒，但它们不会让 UI 线程在此期间工作 :( 这样做会使 UI 变得迟钝。当我在屏幕上拖动某些东西时，它会有点迟滞。

**所以我想做的是让这些线程（这些while循环）每100毫秒检查一次消息队列标志，但是在这100毫秒内我想让UI线程运行。如何实现？**

**编辑 1**

我找到了 yield 方法，它停止了当前线程的运行，但是我什么时候调用它呢？我需要调用睡眠线程，同时让它以某种方式产生......？？

**编辑 2**

这两个类是单例，我从应用程序的第一个 Activity 启动它们，所以当应用程序启动时（UI 线程）

```
//Obtain object of singleton classes
ControllerSingleton controller = ControllerSingleton.getControllerSingleton();
OpponentSingleton opponent = OpponentSingleton.getOpponentSingleton();

//Start threads
/*--------CONTROLLER----------*/
Thread t;
t = new Thread( controller );       
t.setName("ControllerThread");
Log.i("Remy","Starting Controller thread...");
t.start();

/*--------OPPONENTS----------*/
t = new Thread( opponent );     
t.setName("OpponentThread");
Log.i("Remy","Starting Opponent thread...");
t.start(); 
```

在每个里面`run()`我都有下一个代码：

```
public void run() 
{
   while( true )
   {
      //Check if any messages in the queue
      if ( queueEmpty() == false )
      {
          //Do something ...              
      }
      /*HERE IS WHERE I WOULD LIKE TO TELL THE THREAD TO STOP AND WAIT FOR 100 ms*/
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:40:01.770

我认为您需要使用的是[`Handler`](http://developer.android.com/reference/android/os/Handler.html). 例如，您可能希望查看[本教程](http://www.tutorialforandroid.com/2009/01/using-handler-in-android.html)。

# javascript - 在Javascript中递归调用“父”构造函数？

> ID：10349128
> 
> 赞同：1
> 
> 时间：2012-04-27T10:38:35.323
> 
> 标签：javascript, inheritance, prototypal-inheritance

我正在开发一个 web 应用程序，它具有类似于通过基于原型的继承创建的类层次结构的东西。我们不断地向一个共同的祖先“类”添加功能，因此它的构造函数签名不断扩展。

每次我们更改祖先的签名时，我们还必须将更改传播到后代的构造函数。这显然是一个可维护性问题，因此我创建了一个函数，该函数从`arguments`对象中提取父级的参数并使用`Function.apply()`.

代码如下所示：

```
BaseClass.prototype._super = function(args) {
    args = Array.prototype.slice.call(args, this.constructor.length);
    this.parentConstructor.apply(this, args);
}; 
```

并像这样使用：

```
function Child(child_arg1, child_arg2 /*, implicit parent args */) {
    this._super(arguments);
} 
```

（我不能使用`arguments.caller.arguments`，因为代码是严格模式。 `this.parentConstructor`由构建类层次结构的函数设置。）

不幸的是，这只适用于一层继承：例如，如果 A 的父类 B 有自己的父类 C，当 B 调用时`_super`，`this.parentConstructor`仍然指向 B，这意味着 B 最终会在无限循环中调用自己。

如果我将 parentConstructor 字段与构造函数 Functions 对象一起存储（而不是在原型中），我将不得不传入当前调用函数。这将使调用的行与我试图避免的周围函数超级紧密耦合。

因此，有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:41:02.143

几天前我问[了一个相关问题，](https://stackoverflow.com/questions/10588907/call-prototypes-overridden-method-which-then-calls-the-next-prototypes-overrid/10589514#10589514) [Kamyar Nazeri 的回答](https://stackoverflow.com/a/10589514/134014)对我帮助很大。

避免问题的方法是在定义`_super`新构造函数的闭包中定义，以便它始终引用正确的父对象。以下模式对我来说效果很好：

```
var BaseClass = 
{
   create: function() // Basically a constructor
   {
      var obj = Object.create({});

      obj.someProperty = "initial value based on arguments";

      return obj;
   };
};

var Child = (function buildChild(){
   var obj    = BaseClass.create("some value", "another argument")
     , _super = Object.getPrototypeOf(obj);

   // override BaseClass.create()
   obj.create = function()
   {
      var obj = _super.create.apply(this, arguments);

      // Child specific initializations go here

      return obj;
   };

   return obj;
})(); // note that this gets called right away

var c = Child.create("some argument", "another thing");

console.log(BaseClass.isPrototypeOf(c)); // true 
```

请注意，对于较旧的浏览器，您需要为和提供[填充](http://en.wikipedia.org/wiki/Shim_(computing))程序。我发现[这个 ECMAScript 5 shim](https://github.com/kriskowal/es5-shim)很有帮助。我通常只拔出我正在使用的垫片。`Object.create()``Object.getPrototypeOf()`

# c++ - 迭代器指向哪个索引

> ID：10349130
> 
> 赞同：2
> 
> 时间：2012-04-27T10:38:41.097
> 
> 标签：c++, iterator

向量有一个迭代器。我想知道迭代器指向哪个索引。所以我做了以下但我不确定。

```
int temp = -1;
std::vector <int> ::iterator f;

for (f=eFace[e].begin(); f!=eFace[e].end(); ++f)
{
    if (*f == face)
{
    switch (f-eFace[e].begin())
    {
        case 0:
        temp = 5;                                   
        break;
        case 1:
        temp = 3;
        break;
        case 2:
        temp = 4;
        break;
        case 3:
        temp = 1;
        break;
        case 4:
        temp = 2;
        break;
        case 5:
        temp = 0;
        break;
            default:
        throw;
    }

    break;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T10:40:47.970

```
std::vector<int>::size_type index = std::distance (eFace [e].begin(), f); 
```

请注意，如果您在每个循环中执行它，这可能会很慢。向量的另一个选择是：

```
std::vector<int>::size_type index = f - eFace [e].begin(); 
```

这是有效的，因为向量使用随机访问迭代器，这需要定义减法，如下面的 Steve Jessop 所指出的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T10:42:01.027

为什么不这样：

```
std::vector <int> ::iterator f;

int index = 0;

for (f=eFace[e].begin(); f!=eFace[e].end(); ++f)
{
     // do sth

     index++;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T11:21:08.273

获得更清晰的代码会容易得多。

首先，在向量中找到一个值：

```
// Returns the index of `face` in `vec`.
// If `face` is not present in `vec`, returns `vec.size()`.
size_t findFaceIndex(int const face, std::vector<int> const& vec) {
    std::vector<int>::const_iterator const it =
        std::find(vec.begin(), vec.end(), face);

    return it - vec.begin();
} 
```

现在映射：

```
static int const FaceMap[] = { 5, 3, 4, 1, 2, 0 };
static size_t const FaceMapSize = sizeof(FaceMap)/sizeof(int);

// Translate face index into ...
int faceIndexToX(size_t const index) {
    if (index >= FaceMapSize) { throw std::runtime_error("out of bounds"); }
    return FaceMap[index];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T11:18:37.810

对于您的问题“我想知道迭代器指向哪个索引。” 通过说`std::vector<int>::iterator f = eFace.begin();`您正在创建一个类似于索引方法的交互器`std::vector<int>::size_type i = 0;`。

使用迭代器，您使用`eFace.begin()`的`!= eFace.end()`方式`i = 0`与使用循环`!= eFace.size()`遍历向量时使用的方式相同。`for`

至少我认为这就是您最初的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T11:30:28.120

我想知道当你有迭代器时为什么需要数组的索引？如果迭代器是随机访问的，你*可以从中*减去它`begin()`，但如果索引如此重要，我想知道你是否最好只使用它而不是迭代器 - 当然这取决于你是否有权访问代码来重构它.

我不太确定你想用你的开关实现什么，但如果它是映射值，那么大概一个稀疏向量会更合适？

# html - .Net OLAP Cube Explorer 控件与 HTML5 移动兼容性

> ID：10349133
> 
> 赞同：4
> 
> 时间：2012-04-27T10:39:05.307
> 
> 标签：html, mobile, olap, business-intelligence, cube

我目前正在寻找支持移动商业智能报告的控制套件。移动 BI 站点将成为现有 SharePoint BI 解决方案的免费站点，该解决方案向用户提供 SSRS/PerformancePoint 信息。

移动站点应允许用户查看来自 OLAP 多维数据集的信息透视网格以及信息的正常 SQL 查询结果。移动网站上的控件应与 iOS、Android 和 WinPhone 设备完全兼容，因为这些信息将主要由经常不在现场的用户在移动设备上使用。

目前，我能找到的唯一符合要求的控制套件是[用于移动仪表板的 ComponentArt 套件](http://www.componentart.com/services/)。

我查看了 Telerik / Infragistics，但都没有任何本机 OLAP 多维数据集控件。

还有其他人有其他我可以调查的建议吗？

谢谢，布赖恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:39:54.957

我们正在为 HTML5+JQUERY开发组件[Ranet OLAP的一个版本。](https://bi.galaktikasoft.com/js/RanetOlap/)它将包括 MDX 设计器和 Pivot Grid。视觉用户界面将面向在网络浏览器中工作。讨论了 iOS、Android 和 Windows 上移动设备的用户界面设计。组件将具有适用于所有三个平台的共同核心：Silverlight、WPF、HTML5。

# eclipse - Selenium 异常错误：未找到元素 id=fname

> ID：10349138
> 
> 赞同：0
> 
> 时间：2012-04-27T10:39:45.283
> 
> 标签：eclipse, selenium, junit4

在这个特殊的硒记录代码中当我使用 JUnit 在 eclipse 中运行它时，它显示错误 Element id= fname not found

包 com.example.tests;

导入 com.thoughtworks.selenium.*；

导入 java.util.regex.Pattern；

公共类 msFsitRegistration 扩展 SeleneseTestCase {

```
public void setUp() throws Exception {
    setUp("http://192.168.1.146/fsit-mis/index.php?route=common/login", "*chrome");
}
public void testMsFsitRegistration() throws Exception {
    selenium.open("/fsit-mis/index.php?route=common/login");
    selenium.type("name=username", "admin");
    selenium.type("name=password", "admin");
    selenium.click("css=span.button_middle");
    Thread.sleep(5000);
    selenium.useXpathLibrary("xpath=(//a[contains(text(),'Employee Registration')])[2]");
    selenium.open("fsit-mis/index.php?route=employee/emp_registration");
    Thread.sleep(5000);
    selenium.waitForPageToLoad("30000");
    selenium.type("id=fname", "Shiraz");
    selenium.type("id=lname", "A Ansari");
    selenium.type("id=ecode", "FSIT-125");
    selenium.type("id=uname", "shiraz");
    selenium.type("id=password", "shiraz");
    selenium.type("id=confirm", "shiraz");
    selenium.type("id=email", "shijju@gmail.com");
    selenium.select("id=status", "label=ACTIVE");
    selenium.select("id=usrGroup", "label=Fortune Soft");
    selenium.click("xpath=(//input[@name='gender'])[2]");
    Thread.sleep(5000);
    selenium.type("id=mobile", "8088762599");
    selenium.click("id=doj");
    Thread.sleep(5000);
    selenium.click("link=1");
    Thread.sleep(5000);
    selenium.click("id=dob");
    Thread.sleep(5000);
    selenium.click("link=31");
    Thread.sleep(5000);
    selenium.select("id=designation", "label=Test Engineer");
    selenium.click("css=option[value=\"265\"]");
    Thread.sleep(5000);
    selenium.select("id=department", "label=Software Testing");
    selenium.click("id=insert");
    Thread.sleep(5000);
    selenium.waitForPageToLoad("30000");
    selenium.type("id=mobile", "8088762598");
    selenium.click("id=insert");
    Thread.sleep(5000);
    assertEquals("Password Contain Atleast 5 element", selenium.getAlert());
    selenium.click("id=password");
    Thread.sleep(5000);
    selenium.type("id=password", "shiraz");
    selenium.type("id=confirm", "shiraz");
    selenium.click("id=insert");
    Thread.sleep(5000);
    selenium.waitForPageToLoad("30000");
} 
```

}

请尽快帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:49:52.323

删除所有`Thread.sleep(5000);`命令。`selenium.waitForCondition("selenium.isElementPresent('element_locator')", "5000");`改为插入，例如`selenium.waitForCondition("selenium.isElementPresent('id=fname')", "5000");`

# oracle - 更改密码时验证旧密码

> ID：10349141
> 
> 赞同：0
> 
> 时间：2012-04-27T10:40:00.347
> 
> 标签：oracle, stored-procedures

dba_users.Password 包含散列密码。如何在更改密码之前验证旧密码？我对两种方法有一个粗略的了解：

(1) 找出预言机使用的哈希算法和种子值，然后取哈希并匹配哈希。事实证明这非常困难，因为 oracle 的哈希算法和种子并不为公众所知。

(2) 立即执行“连接”|| p_用户名 || '/' || p_OldPassword。这种方法有什么问题？执行完后如何关闭连接，或者在语句或过程退出后自动关闭？在任何情况下，同一用户可以同时登录多次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:49:47.577

ALTER USER 命令有一个 REPLACE 关键字，可让您指定旧密码。

# c# - 如何将二进制图像从桌面应用程序发布到 ashx 处理程序并接收它？

> ID：10349146
> 
> 赞同：2
> 
> 时间：2012-04-27T10:40:13.177
> 
> 标签：c#, asp.net, httpwebrequest, httphandler, binary-data

我正在开发一个 WinForms 应用程序，并希望将二进制图像数据发送到 Web 应用程序。它是如何工作的？

我编码了这个：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";

request.AllowWriteStreamBuffering = true;
request.KeepAlive = true;                
request.Credentials = System.Net.CredentialCache.DefaultCredentials;

var fc = GetFileContent(varsayilanResimGuid);
byte[] postBytes = fc.Dosya;
request.ContentLength = postBytes.LongLength;
Stream requestStream = request.GetRequestStream();               
requestStream.Write(postBytes, 0, postBytes.Length);
requestStream.Close();                

HttpWebResponse response = (HttpWebResponse)request.GetResponse();
string content = new StreamReader(response.GetResponseStream()).ReadToEnd(); 
```

以及我如何在 .ashx 中接收此二进制图像内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:30:47.987

我提问，我回答。
如何接收二进制图像：

```
Stream gelenResim = context.Request.InputStream;

if (gelenResim.Length == 0) 
{
    e.Resim = "/Content/EmlakDetayImaj/Noimages.jpg";
}

string guidim = Guid.NewGuid().ToString().Substring(0, 4);
var KaydetResimDosya = "/Content/EmlakDetayImaj/" + guidim + ".jpg";

using (FileStream fileStream = System.IO.File.Create(context.Server.MapPath("~/Content/EmlakDetayImaj/" + guidim + ".jpg"), (int)gelenResim.Length))
{
    byte[] bytesInStream = new byte[gelenResim.Length];
    gelenResim.Read(bytesInStream, 0, (int)bytesInStream.Length);
    fileStream.Write(bytesInStream, 0, bytesInStream.Length);
} 
```

# php - 与存储过程的类 AJAX 交互？

> ID：10349151
> 
> 赞同：2
> 
> 时间：2012-04-27T10:40:32.753
> 
> 标签：php, sql, sql-server, ajax

我想我可能以完全错误的方式看待这个问题。我有一个存储过程，它返回一个（可能很大，但通常不是）结果集。该集合通过 PHP 被放入网络上的表格中。我将为动态重新排序之类的东西实现一些 AJAX。存储过程需要 1 到 2 秒才能运行，所以如果我可以将最终表存储在某个地方，以便在它运行后可以更快地访问它，那就太好了。更具体地说，SP是一个搜索功能；所以我希望用户能够进行搜索，然后`ORDER BY`在返回的数据上运行，而不必重做整个搜索以再次获取该数据。

我想到的是，如果有一种方法可以从存储过程中获取结果而不终止它，那么我可以使用临时表。我知道我可以使用永久桌子，但如果两个人同时尝试使用它，我会遇到麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:54:53.570

对这个问题的简短回答：'是一种从存储过程中获取结果而不终止的方法吗？'：不，没有。SP 将如何返回结果集？

2 秒听起来确实很长，也许您可​​以发布 SP 代码，这样我们就可以研究如何加快您使用的查询速度。在您的表上提供更多信息（索引，主键......）也可能被证明是有用的。

如果一切都失败了，您可能会考虑查看 JavaScript 表格排序器......但同样：一些代码可能会有所帮助

# c++ - 调试进程加载异常 0xc0000138 (Ordinal not found)

> ID：10349155
> 
> 赞同：0
> 
> 时间：2012-04-27T10:40:47.717
> 
> 标签：c++, visual-studio-2010, visual-c++, dll

![在此处输入图像描述](../Images/b7fa202c298b31f11108463b70856861.png)在 VS2010 上运行我的 VC++ 应用程序时，出现以下错误：-

```
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\Documents and Settings\Administrator\My Documents\Visual Studio 2010\Projects\26aprilmadefromnewfoldercode\Debug\26aprilmadefromnewfoldercode.exe', Symbols loaded.
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\ntdll.dll', Cannot find or open the PDB file
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\kernel32.dll', Cannot find or open the PDB file
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\Documents and Settings\Administrator\My Documents\Visual Studio 2010\Projects\26aprilmadefromnewfoldercode\Debug\hdpw32.dll', Binary was not built with debug information.
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\winmm.dll', Cannot find or open the PDB file
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\advapi32.dll', Cannot find or open the PDB file
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\rpcrt4.dll', Cannot find or open the PDB file
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\secur32.dll', Cannot find or open the PDB file
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\gdi32.dll', Cannot find or open the PDB file
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\user32.dll', Cannot find or open the PDB file
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\comctl32.dll', Cannot find or open the PDB file
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\shell32.dll', Cannot find or open the PDB file
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\msvcrt.dll', Cannot find or open the PDB file
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\shlwapi.dll', Cannot find or open the PDB file
'26aprilmadefromnewfoldercode.exe': Loaded 'C:\WINDOWS\system32\setupapi.dll', Cannot find or open the PDB file
Debugger:: An unhandled non-continuable exception was thrown during process load
The program '[5800] 26aprilmadefromnewfoldercode.exe: Native' has exited with code -1073741512 
```

(0xc0000138)。

我的 exe 文件已构建，但未执行。如何调试进程负载或解决此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-30T12:44:58.553

`0xC0000138: Ordinal Not Found`我在加载插件 DLL 的 Windows 进程中观察到了同样的异常。该错误是由加载到同一进程中的两个不同版本的**COMCTL32引起的。**

尝试使用调试器（或[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)）并检查是否有任何机会没有加载两个 COMCTL32 模块，如下所示：

```
...
'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7601.18201_none_ec80f00e8593ece5\comctl32.dll'. Symbols loaded.
...
'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_41e6975e2bd6f2b2\comctl32.dll'. Symbols loaded. 
```

如果是这种情况，则将显式 COMCTL32 引用添加到应用程序的清单中：

```
<dependency>
  <dependentAssembly>
    <assemblyIdentity type="win32" 
      name="Microsoft.Windows.Common-Controls" version="6.0.0.0"
      processorArchitecture="x86" publicKeyToken="6595b64144ccf1df" language="*">
    </assemblyIdentity>
  </dependentAssembly>
</dependency> 
```

使用[MSDN 中解释的方法之一：启用视觉样式](http://msdn.microsoft.com/en-us/library/bb773175%28VS.85%29.aspx)文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T12:06:59.223

您不会从中获得堆栈跟踪或转储，因为它在动态库加载期间似乎失败了。最好的方法是将其加载到depends.exe 中并查看导入的库和符号，这应该会告诉您找不到哪一个。

看看这个问题：

[在 Windows XP 上运行应用程序时出现“找不到指定的过程”错误（异常 c0000139）](https://stackoverflow.com/questions/8908112/the-specified-procedure-could-not-be-found-error-when-running-app-on-windows-x/8912684#8912684)

它显示了如果您尝试链接在动态链接时不可用的 API 会发生什么，以及如何使用depends.exe 对其进行调试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T10:59:59.797

如果您 dll 导出类并使用不同版本的运行时库构建，则可能会发生这种情况。因此，您必须检查您的所有 dll 是否使用与您用于主应用程序构建的相同编译器构建。您需要做的只是清除解决方案并构建新的库，dll 将替换您拥有的旧版本。

# android - 使用 OnClickListener 登录 Android facebook

> ID：10349162
> 
> 赞同：1
> 
> 时间：2012-04-27T10:41:04.667
> 
> 标签：android, facebook, login, onclick, authorize

我想为我的应用程序创建一个 facebook 登录按钮。

我的问题是，我想用 OnClickListener 调用“授权”，但 Eclipse 将**“授权”**部分标记为**错误**。它建议用 authorizeCallback 替换它，但这不是解决方案。

好像我只是错过了一些东西，但不知道是什么。请问有什么想法吗？

这是发生错误的地方（**facebook.authorize**）：

```
LoginButton.setOnClickListener(new OnClickListener() 
{
         public void onClick(View v) 
         {
         facebook.authorize(this, new String[] { "email", "user_birthday" }, new FacebookLoginDialogListener());    
          }});
    } 
```

其余代码：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
        super.onActivityResult(requestCode, resultCode, data);
        facebook.authorizeCallback(requestCode, resultCode, data);
}

public class FacebookLoginDialogListener implements DialogListener  
    {
        public void onComplete(Bundle values) {
            SharedPreferences.Editor editor = mPrefs.edit();
            editor.putString("access_token", facebook.getAccessToken());
            editor.putLong("access_expires", facebook.getAccessExpires());
            editor.commit();
            requestUserData(); 
        }

        public void onFacebookError(FacebookError error) {}

        public void onError(DialogError e) {}

        public void onCancel() {}

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:55:20.990

这样做：

```
facebook.authorize(YourActivity.this, new String[] { "email", "user_birthday" }, new FacebookLoginDialogListener()); 
```

您正在传递对方法`OnClickListener`的`this`引用，您必须传递`Activity's` `Context`给方法。

# c# - 如何注册 Javascript 函数以查找 HiddenField 值何时更改？

> ID：10349163
> 
> 赞同：2
> 
> 时间：2012-04-27T10:41:07.787
> 
> 标签：c#, javascript, jquery, asp.net

我有一个包含`HiddenField`控件的页面，我在页面加载时注册了一些 javascript，其中包含我想在 HiddenField 值更改时运行的函数。

目前，如果输入字段的值发生更改，我有以下代码执行该函数：

```
$(':input').change(function(){ pageHasBeenUpdated = true;  }); 
```

`pageHasBeenUpdated = true`如果控件的值`HiddenField`已更新，我需要设置什么 javascript ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:43:11.877

您可以通过在属性选择器中指定隐藏的输入元素来访问它：

```
$('input[type=hidden]') 
```

由于`change`更新隐藏输入字段的值时不会触发事件，因此您需要在更新输入值时自己触发它。

例子：

**html**

```
<input type="hidden" id="myHiddenInput">
<button id="valueChanger">Change hidden input value</button> 
```

**jQuery**

```
$('input[type=hidden]').change(function(){alert($(this).val())});

$('#valueChanger').click(function(){
    $('#myHiddenInput').val("Hello World").trigger('change');
 }); 
```

[工作示例](http://jsfiddle.net/8rT4E/1/)

# php - 如何将 example.com/index.php?p=xxx 转为 example.com/xxx/

> ID：10349167
> 
> 赞同：0
> 
> 时间：2012-04-27T10:41:28.323
> 
> 标签：php, .htaccess, url

我该怎么做呢？有很多关于这个的话题，但我尝试了所有这些，但没有奏效。

有人可以给我一个详尽而广泛的答案，因为我几乎没有经验`.htaccess`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:46:47.373

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule (.*)/ index.php?p=$1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:47:21.910

从脑海中，所以可能需要一些调整

```
RewriteEngine on
RewriteRule ^([^.]*)/?$ index.php?p=$1 [L] 
```

这将（在内部！）发送`example.com/xxx`到`/example.com/index.php?p=xxx`

因此，`index.php`您可以像往常一样做任何您想做的`$_GET['p']`事情，但用户会将网站视为`index.example.com/xxx`

# clojure - ClojureScript + OpenLayers

> ID：10349168
> 
> 赞同：5
> 
> 时间：2012-04-27T10:41:28.417
> 
> 标签：clojure, clojurescript

我正在尝试用 ClojureScript 重写 OpenLayers 的示例用法。

Javascript 源代码如下所示：

```
var map, layer;
map = new OpenLayers.Map('map');
layer = new OpenLayers.Layer.OSM("Simple OSM Map");
map.addLayer(layer);

var projection = new OpenLayers.Projection("EPSG:4326");
var center = new OpenLayers.LonLat(-71.147, 42.472).transform(projection, map.getProjectionObject());
map.setCenter(center, 12); 
```

我已经像这样重写了这段代码：

```
(ns hello.map)
  (def mapp (.Map js/OpenLayers "map"))
  (def layer (.Layer.OSM js/OpenLayers "Simple OSM Map"))
  (.addLayer mapp layer)

  (def projection (.Projection js/OpenLayers "EPSG:4326"))
  (def center (.Transform (.LonLat js/OpenLayers -71.147 42.472) projection (.getProjectionObject mapp)))
  (.setCenter mapp center 12) 
```

Lein 生成以下代码：

```
var hello = {map:{}};
hello.map.mapp = OpenLayers.Map("map");
hello.map.layer = OpenLayers.Layer.OSM("Simple OSM Map");
hello.map.mapp.addLayer(hello.map.layer);
hello.map.projection = OpenLayers.Projection("EPSG:4326");
hello.map.center = OpenLayers.LonLat(-71.147, 42.472).Transform(hello.map.projection, hello.map.mapp.getProjectionObject());
hello.map.mapp.setCenter(hello.map.center, 12);
hello.hello = {}; 
```

它不工作。那么问题在于 ClojureScript 在没有`new`其他东西的情况下生成代码吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T14:19:44.200

是的，您的构造函数调用需要修复：

```
(ns hello.map)

(def mapp (js/OpenLayers.Map. "map"))
(def layer (js/OpenLayers.Layer.OSM. "Simple OSM Map"))
(.addLayer mapp layer)

(def projection (js/OpenLayers.Projection. "EPSG:4326"))
(def center (.transform (js/OpenLayers.LonLat. -71.147 42.472)
               projection (.getProjectionObject mapp)))
(.setCenter mapp center 12) 
```

未经测试，但你应该明白。请注意构造实例和调用实例方法之间的区别。

# iphone - 如何捕获以编程方式更改的 tabBarController setSelectedIndex

> ID：10349169
> 
> 赞同：1
> 
> 时间：2012-04-27T10:41:30.733
> 
> 标签：iphone, ios, ipad, uitabbarcontroller, uitabbar

在我的应用程序中，我有一种情况，我像这样以编程方式更改 tabBarController 的选定索引

```
[self.tabBarController setSelectedIndex:0]; 
```

并返回到包含 UITableView' 的选项卡此时我需要对我的 tableView 进行一些操作我尝试使用 viewWillAppear 但它没有到达那里，我试图让视图委托像这样

```
@interface ThirdViewController : UITableViewController < UISearchBarDelegate,UINavigationControllerDelegate, UITabBarDelegate> 

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController{ 
```

它没有用

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:35:10.920

我注意到你的类`ThirdViewController`实现了`UITabBarDelegate`，而`tabBarController:didSelectViewController:`实际上是[`UITabBarControllerDelegate`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITabBarControllerDelegate/tabBarController%3adidSelectViewController%3a)协议的一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:29:23.213

对我来说，解决方案是制作 [[controller alloc]init] 并激活一个函数，在我移动到的控制器中做我需要的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T16:04:58.290

我制作了这个简单的函数来在我的 UITabBarController 中以编程方式选择视图控制器。

```
-(void)selectVCfromIndex:(int)index{

    self.selectedIndex = index;
    [self tabBarController:self shouldSelectViewController:[self.viewControllers objectAtIndex:index]];

} 
```

在 shoudSelectViewController 协议中，我有用于呈现视图控制器的特定代码，并以这种方式在选项卡以编程方式和用户交互方式更改时运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:44:51.963

Try this below code:

```
self.tabBarController.selectedIndex = 1; 
```

or

```
[self.tabBarController setSelectedIndex:1]; 
```

Thanks..!

UPDATE :

you can set delegate for tabBarcontroller viewdidLoad method below code:

```
tabBarController.delegate=self; 
```

# regex - 可选组的困难

> ID：10349174
> 
> 赞同：0
> 
> 时间：2012-04-27T10:42:08.723
> 
> 标签：regex

正则表达式对我来说一直是一门黑暗的艺术，我已经很久没有编程了，但这要么不可能/像我希望的那样简单。

我正在尝试写入正则表达式以搜索以下文本

```
 8825| -  MIA *** LHR **  JFK JFK -  DME -  SIN *** *** SYD *** SIN *** LHR **   -   -  BOS *** LHR  -   -   -  GRU *** *** 
```

它应该匹配

```
MIA *** LHR ** or
JFK JFK or 
SIN *** *** SYD *** SIN *** LHR ** or
BOS *** LHR or
GRU *** *** or
DME 
```

这个

```
([A-Z]{3})\s(([A-Z]{3}|[*]{2,3})\s)+ 
```

匹配所有部分

```
DME 
```

现在我被困住了。感激地收到任何帮助或指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:48:36.197

这将适用于给出的示例：

```
[A-Z]{3}(((?:\s*[*]{3}\s*)+([A-Z]{3})+)*(\s*[*]{2,3}\s*?)?)|[A-Z]{3}(\s*[A-Z]{3})? 
```

但是，我建议您针对要匹配的内容指定更严格的规则 - 如果不这样做，我们在这里所做的一切只是猜测，我们提出的正则表达式可能不适用于其他示例，如果它们以任何方式不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:52:41.787

**试试这个：（**如果**我**猜到你可能需要什么......） -**更新**

```
([A-Z]{3}\s([A-Z]{3}|([\*]{2,3}\s){1,2})?)+ 
```

**演示：**

[http://regexr.com?30po5](http://regexr.com?30po5)

**火柴 ：**

```
MIA *** LHR **
JFK JFK
SIN *** *** SYD *** SIN *** LHR **
BOS *** LHR
GRU *** ***
DME 
```

# java - Spring Batch如何在Chunk tasklet中设置每次调用之间的时间间隔

> ID：10349177
> 
> 赞同：6
> 
> 时间：2012-04-27T10:42:18.127
> 
> 标签：java, batch-processing, spring-batch

团队，

我正在做一个技术 poc，用于从平面文件中读取记录并将数据插入数据库。

我正在使用块任务并使用弹簧批处理管理成功运行此作业。

我必须实施重试策略以及设置每次重试之间的时间间隔的功能。我坚持设置每次重试之间的时间间隔，因为卡盘不直接支持它。有什么解决方法吗？

我的代码是

```
<batch:job id="importDataJob" job-repository="jobRepository">
  <batch:step id="importDataStep">
    <batch:tasklet transaction-manager="transactionManager">
      <batch:chunk reader="dataReader" writer="dataWriter"  commit-interval="1" retry-limit="3">
        <batch:retryable-exception-classes>
          <batch:include class="javax.naming.ServiceUnavailableException" />
        </batch:retryable-exception-classes>
      </batch:chunk>
    </batch:tasklet>
  </batch:step>
</batch:job> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T17:18:37.127

在您的情况下，配置将如下所示：

**春季批次 2.x**

```
<bean id="stepParent" class="org.springframework.batch.core.step.item.FaultTolerantStepFactoryBean" abstract="true">
  <property name="backOffPolicy">
    <bean class="org.springframework.batch.retry.backoff.FixedBackOffPolicy"
      <property name="backOffPeriod" value="2000" />
    </bean>
  </property>
</bean>

<batch:job id="importDataJob" job-repository="jobRepository">
  <batch:step id="importDataStep" parent="stepParent">
     ...
  </batch:step>
</batch:job> 
```

不幸的是，`batch`命名空间不支持`backOffPolicy`直接设置为`step`，请参阅[BATCH-1441](https://jira.springsource.org/browse/BATCH-1441)。

**春季批次 3.0**

在 Spring Batch 3.0 中，一些类已移至其他包。这是配置片段：

```
<bean id="stepParent"
  class="org.springframework.batch.core.step.factory.FaultTolerantStepFactoryBean"         
  abstract="true">

  <property name="backOffPolicy">
    <bean class="org.springframework.retry.backoff.FixedBackOffPolicy">
      <property name="backOffPeriod" value="2000"/>
    </bean>
  </property>

</bean> 
```

# edi - How many chars can numeric EDIFACT data elements be long?

> ID：10349182
> 
> 赞同：0
> 
> 时间：2012-04-27T10:43:03.740
> 
> 标签：edi, edifact

In EDIFACT there are numeric data elements, specified e.g. as format n..5 -- we want to store those fields in a database table (with alphanumeric fields, so we can check them). How long must the db-fields be, so we can for sure store every possible valid value? I know it's at least two additional chars (for decimal point (or comma or whatever) and possibly a leading minus sign).

We are building our tables after the UN/EDIFACT standard we use in our message, not the specific guide involved, so we want to be able to store everything matching that standard. But documentation on the numeric data elements isn't really straightforward (or at least I could not find that part).

Thanks for any help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:52:47.607

我终于在 UN/EDIFACT rules [Part 4\. UN/EDIFACT rules Chapter 2.2 Syntax Rules](http://www.unece.org/tradewelcome/areas-of-work/un-centre-for-trade-facilitation-and-e-business-uncefact/outputs/standards/unedifact/tradeedifactrules/part-4-edifact-rules-for-electronic-data-interchange-for-administration-commerce-and-transport/part-4-unedifact-rules-chapter-22-syntax-rules.html)的文档中找到了[UNECE 网站](http://www.unece.org/)上的信息。他们没有直接说出来，但是当你把所有的部分放在一起时，你就明白了。参见 TOC 条目 10：*数字数据元素值*的表示。

 *它基本上是这样说的：

*10.1：十进制*
标记 必须按照 UNA 中的规定传输（如果需要）十进制标记（逗号或点，始终放置一个字符）。在计算数据元素的最大字段长度时，不应将其视为值的一个字符。

*10.2：三合一*
分隔符 三合一分隔符不得互换使用。

*10.3: 符号*
[...] 如果一个值被指示为负数，它在传输中应紧跟在一个减号之前，例如-112。在计算数据元素的最大字段长度时，负号不应算作值的字符。但是，必须考虑发送和接收中的特性。

把它放在一起：
除了数字本身之外，数字字段中只允许使用两个（可选）字符：十进制分隔符和减号（任何字符之间不允许有空格）。这两个额外的字符不计入字段中值的最大长度。

因此，数字字段中的最大字符数是数字字段的最大长度加 2。如果您希望数据库能够存储在指定为 的字段中传输的每个语法正确的值`n..17`，则您的列必须是 19 个字符长（类似`varchar(19)`）。在指定为的字段中具有超过 19 个字符的值的每个 EDIFACT 消息`n..17`不需要存储在数据库中以进行语义检查，因为它在语法上已经是错误的并且可以被拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:53:07.880

我使用 Liaison 的 EDI Notepad 来解决类似的挑战。 [https://liaison.com/products/integrate/edi/edi-notepad](https://liaison.com/products/integrate/edi/edi-notepad)

我建议任何查看 EDI 的人至少获得他们的免费（快速）版本的 EDI 记事本。

他们产品的“高端”版本（EDI Notepad Productivity Suite）带有一个“字典查看器”工具，您可以导出元素的最小/最大长度以及类型。您可以从查看器工具将文档导出为 HTML。它也可以处理 ANSI X12。*

# php - 在 JQuery 可扩展标题之前添加复选框

> ID：10349185
> 
> 赞同：1
> 
> 时间：2012-04-27T10:43:16.163
> 
> 标签：php, jquery, css

我正在尝试做一些文章列表，您可以在其中使用复选框选择它们。如果您不确定是否选择，可以选择单击标题，并获取有关文章的更多信息。

我用过这个[例子](http://roshanbh.com.np/2008/03/expandable-collapsible-toggle-pane-jquery.html)。那么问题出在哪里？我不想展开我选择的文章，只是那些我点击标题的文章。

JQ 脚本部分没问题，因为它工作正常，它可以正确展开/折叠，问题是在 CSS 或 HTML 中，在哪里放置复选框以在标题中查看它。

我有示例 HTML：

```
 <div class="art_list">
     <div class="art_head"><div class="art-chk"><input type="checkbox"  name="reguser"  value="Deki" /></div>Artilk-1 </div>
     <div class="art_body">Artikl 1 ima sve</div>
     </div> 
```

这给了我标题中的复选框，但是当我检查它时，它会扩展文章。

我也试过这个：

```
 <div class="art_list">
     <input type="checkbox"  class="art-chk" name="reguser" value="Deki" />
     <p class="art_head">Artikl-2 </p>  
 <div class="art_body">Artikl 2 ima sve</div>
     </div> 
```

它隐藏了标题中的复选框，无论我是否尝试将 z-index 用于艺术列表、艺术头、低于艺术检查，我都看不到它。

这是JS：

```
 function hideShowArticles(){
$(document).ready(function()
{
    //hide the all of the element with class msg_body
    $(".art_body").hide();
    //toggle the componenet with class msg_body
    $(".art_head").click(function()
    {
        $(this).next(".art_body").slideToggle(600);
    });
  });
} 
```

那么我错过了什么？

我需要：[X] 标题

并且只点击“标题”展开文章，点击复选框，选择文章而不展开它。单击标题可展开复选框和标题下方的文章，它们仍位于整个描述之上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:03:14.463

这是你想做的吗？

[http://jsfiddle.net/chrismackie/srG5k/](http://jsfiddle.net/chrismackie/srG5k/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:36:29.510

这是正确的吗？

[http://jsfiddle.net/chrismackie/S3rWC/](http://jsfiddle.net/chrismackie/S3rWC/)

# php - 使用 yaml 路由描述时，如何在运行时获取 Symfony2 中的路由名称？

> ID：10349188
> 
> 赞同：8
> 
> 时间：2012-04-27T10:43:27.143
> 
> 标签：php, symfony, url-routing, yaml, twig

在这里你可以找到我关于 Symfony2 的第*n个问题。*

我正在使用一个使用文件中提供的路由名称的[分页包](https://github.com/makerlabs/PagerBundle/wiki)`routing.yml`。从我的角度来看，这种方法不灵活并且导致代码脏，因为如果我更改路由的名称，那么我必须查看所有 Twig 模板或 PHP 文件来更新路由名称。这对于小型 Web 应用程序来说是可以的，但是对于较大的应用程序会提供这样的 bug，并且也需要给开发人员带来很大的负担。

所以，我想将字符串变量**x**`Pager`传递给上述包提供的对象。字符串**x**应该在控制器中初始化，并且必须提供`routing.yml`文件中给出的所需路由名称。

让我举个例子吧。路由文件如下：

```
//routing.yml
 AcmeTestBundle_listall:
pattern:  /test/page/{page}
defaults: { _controller: AcmeTestBundle:List:listall, page: 1 }
requirements:
    page:  \d+ 
```

那么相关的控制器是：

```
//use something....
class ListController extends Controller
{

  public function exampleAction($page)
  {
    $array = range(1, 100);
    $adapter = new ArrayAdapter($array);
    $pager = new Pager($adapter, array('page' => $page, 'limit' => 25));

    return array('pager' => $pager);  
  }
} 
```

然后，在 twig 模板中，`$pager`接收引用上述捆绑包的路由名称

```
{% if pager.isPaginable %}
   {{ paginate(pager, 'AcmeTestBundle_listall') }}
{% endif %}
{% for item in pager.getResults %}
   <p>{{ item }}</p>
{% endfor %} 
```

关于如何在控制器内部的运行时获取“AcmeTestBundle_listall”字符串值的任何想法？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-27T11:00:37.650

您可以使用`app`twig 中可用的全局变量从请求中获取当前路由。

```
{% if pager.isPaginable %}
   {{ paginate(pager, app.request.get('_route') }}
{% endif %} 
```

更多关于`app` [这里](http://api.symfony.com/2.8/Symfony/Bundle/FrameworkBundle/Templating/GlobalVariables.html)和[这里](http://symfony.com/doc/current/templating.html#global-template-variables)。

# marklogic - Guidelines for PDF Conversion

> ID：10349189
> 
> 赞同：1
> 
> 时间：2012-04-27T10:43:31.043
> 
> 标签：marklogic, pdf-conversion

I am using MarkLogic to generate XML files for PDF documents which has images, formatted text (italic and bold), tables etc. Can you please provide some guidelines for the best conversion. I am using normal conversion with following pipelines:

*   Conversion Processing
*   DocBook Conversion
*   HTML Conversion
*   PDF Conversion
*   PDF Conversion (Page Layout, Image Batching)
*   Status Change Handling

The images are not maintained with their title and format also not maintained. Tables are appearing as normal paragraph in the generated XML.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:59:59.863

文档转换的一部分是构建**CSS**文件来处理格式，以及抓取文档中的图像。两者都进入数据库。当您使用浏览器查看文档时，请确保指向图像和**CSS**的链接有效。您可能需要将它们从例如更改`/doc1.css`为`/get.xqy?uri=doc1.css`. 此外，页面上的其他**CSS**可能会干扰文档的**CSS**。

# javascript - How to replace onclick event with GreaseMonkey?

> ID：10349193
> 
> 赞同：6
> 
> 时间：2012-04-27T10:44:20.633
> 
> 标签：javascript, greasemonkey

This website has a gallery of images. Each time I click on a thumbnail image it opens the URL in a new tab (not because I set firefox to open links in new tabs). I want to just open the URL in the same window. An example of what the thumbnail images looks like is this.

```
<span class="thumb" id="789">
<a href="/post/image/12345" onclick="return PostMenu.click(12345)">
<img  class="preview" src="http://abc.com/image.jpg" title="title" alt="">
</a>
</span> 
```

I believe that `onclick="return PostMenu.click(12345)"` is doing this. How can I replace the `PostMenu.click()` function with my own empty function in GreaseMonkey? Is there a way to make a GreaseMonkey script intercept all onclick events?

My only other option is to go through all the `span` classes and remove the `onclick="return PostMenu.click(12345)"` from the link tags. But since there can be over a hundred of these on a single page, I'd rather not do that.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T11:23:29.730

实际上，删除`onclick`s 根本不是一项繁重的任务。

使用 jQuery，代码将仅仅是：

```
$("span.thumb a").prop ("onclick", null); 
```

或者，对于旧版本的 jQuery：

```
$("span.thumb a").removeAttr ("onclick"); 
```

一个完整的脚本：

```
// ==UserScript==
// @name     _Kill select onClicks
// @include  http://YOUR_SERVER/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js
// ==/UserScript==

$("span.thumb a").prop ("onclick", null); 
```

这种方法的优点是：
（1）您可以保留`PostMenu.click()`它以备不时之需，或者在其他地方需要它，
（2）您正在从页面中删除杂物，这使它不那么笨拙。
(3) 我怀疑您可能还需要解包或修改该链接——在这种情况下，使用 jQuery 的目标重写方法是可行的方法。

* * *

如果您真的只想`PostMenu.click()`用自己的空函数替换该函数，那么代码就是：

```
unsafeWindow.PostMenu.click = function () {}; 
```

至于让 Greasemonkey 拦截所有`onclick`事件……要可靠地做到这一点并不容易。除非出于某种原因（在这种情况下似乎没有），否则请忘记这种方法。

# iphone - NSnotifiaction doubts

> ID：10349199
> 
> 赞同：0
> 
> 时间：2012-04-27T10:44:48.873
> 
> 标签：iphone, ios, nsnotifications

I have a `UISwitchcontroller` in my setting page to change the image in main page. So I put a notification from setting page to main page. But only one notification I active every time, my setting page switch code look like this:

```
-(IBAction)_clickswitchlowlight:(id)sender
{

if(switchControll.on){

    [switchControll setOn:YES animated:YES];

    [[NSNotificationCenter defaultCenter] postNotificationName:NOTIF_lowlighton object:nil];

}
else{
    [switchControll setOn:NO animated:YES];

   [[NSNotificationCenter defaultCenter] postNotificationName:NOTIF_lowlightoff object:nil];

}
} 
```

In my main page.h..I write this code:

```
extern NSString * const NOTIF_lowlighton;
extern NSString * const NOTIF_lowlightoff; 
```

In .m above the implementation of main page I write this:

```
NSString * const NOTIF_lowlighton = @"lowlighton";
NSString * const NOTIF_lowlightoff = @"lowlightoff"; 
```

In `viewwillappear` I write this code:

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
      [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(clicklowlighton:) name:@"lowlighton" object:nil];
      [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(clicklowlightoff:) name:@"lowlightoff" object:nil];
} 
```

Then this code for changing the image:

```
- (void)clicklowlighton:(NSNotification *)notif 
{
    [[self multiPageView] setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"bgipad"]]];

}
- (void)clicklowlightoff:(NSNotification *)notif 
{
     [[self multiPageView] setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"bglowlight@2x"]]];

} 
```

I only get the `clicklowlightoff` notification, I didn't get the first notification...any missing in my code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:11:46.607

将您的函数绑定到事件： UIControlEventValueChanged 到此函数

```
-(IBAction)_clickswitchlowlight:(id)sender
    {

    if(switchControll.on){

        [[NSNotificationCenter defaultCenter] postNotificationName:NOTIF_lowlighton object:nil];
    }
    else{

       [[NSNotificationCenter defaultCenter] postNotificationName:NOTIF_lowlightoff object:nil];

    }
} 
```

# ruby - using probability for rounding decimals

> ID：10349201
> 
> 赞同：0
> 
> 时间：2012-04-27T10:44:56.303
> 
> 标签：ruby, math, probability, finance

What might be a simple Ruby way to round numbers using probability, i.e., based on how close the value is to one boundary or the other (floor or ceiling)?

For example, given a current price value of 28.33, I need to add 0.014.

Equivalent to starting with 28.34 and needing to add 0.004, but the final value must be rounded to two decimal places(which can be provided as parameter, or fixed for now).

The final value should therefore be:

*   28.34 with 60% chance, since it is that much closer, OR
*   28.35 with 40% random chance

The reason it occured to me this could serve best is that the application is stateless and independent across runs, but still needs to approximate the net effect of accumulating the less significant digits normally rounded into oblivion (eg. micropenny values that do have an impact over time). For example, reducing a stop-loss by some variable increment every day (subtraction like -0.014 above instead).

It would be useful to extend this method to the Float class directly.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:08:00.000

怎么样：

```
rand(lower..upper) < current ? lower.round(2) : upper.round(2) 
```

编辑：

以上仅在您使用 Ruby 1.9.3 时才有效（由于早期版本不支持范围内的 rand）。

别的

```
random_number = rand * (upper-lower) + lower
random_number < current ? lower.round(2) : upper.round(2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:41:12.790

使用这种方法结束：

```
class Float
  def roundProb(delta, prec=2)
   ivalue=self
   chance = rand  # range 0..1, nominally averaged at 0.5
#   puts lower=((ivalue + delta)*10**prec -0.5).round/10.0**prec  # aka floor
#   puts upper=((ivalue + delta)*10**prec +0.5).round/10.0**prec  # ceiling
   ovalue=((ivalue + delta)*10**prec +chance-0.5).round/10.0**prec  # proportional probability
   return ovalue
  rescue  
    puts $@, $!
  end
end

 28.33.roundProb(0.0533)
=> 28.39 
```

也许不是最优雅的方法，但似乎适用于任何精度的一般情况，默认为 2。甚至适用于 Ruby 1.8.7 我在一种情况下被卡住了，它缺少`round()`.

# sql - Wildcard of Number in SQL Server

> ID：10349203
> 
> 赞同：15
> 
> 时间：2012-04-27T10:45:01.273
> 
> 标签：sql, sql-server, sql-server-2008, wildcard

How to match numbers in SQL Server 'LIKE'.

```
SpaceName
------------ 
| New_Space_1
| .
| .
| New_Space_8 
| New_Space_9
| New_Space_10
| New_Space_11
| New_Space_SomeString
| New_Space_SomeString1 
```

Above is my table contents. I want to get only records ending with Numeric chars, ie I want the records from `New_Space_1` to `New_Space_11`.

Don't want `New_Space_SomeString` and `New_Space_SomeString1`

I have some query like this.

```
SELECT SpaceName FROM SpaceTable
    WHERE SpaceName LIKE 'New_Space_%' 
```

But this returns all records.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-27T10:46:58.410

what about

```
SELECT SpaceName FROM SpaceTable
    WHERE SpaceName LIKE 'New[_]Space[_][0-9]%' 
```

The reason I put underscore in brackets is because in a regular expression _ means Any single character. Read up on like here [http://msdn.microsoft.com/en-us/library/ms179859.aspx](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-02T09:12:17.147

@SteveKass 的这个解决方案非常完美。

```
SELECT SpaceName FROM SpaceTable WHERE SpaceName LIKE 'New[_]Space[_]%' AND SpaceName NOT LIKE 'New[_]Space[_]%[^0-9]%' 
```

# xcode - OSDictionary * Injection in IORegistry

> ID：10349204
> 
> 赞同：0
> 
> 时间：2012-04-27T10:45:03.390
> 
> 标签：xcode, macos, iokit, kernel-extension

I'm trying to create a new Dictionary and inject it in the IORegistry. I've managed to inject simple strings or data values but thats it.

My approach is via a modified IOPCIFamily.kext, and it's not for a specific purpose but just for learning.

My code for 1 line values is something like this

```
if (product == id){ setProperty("test", "test") } 
```

and another approach

```
if (product == id){ propTable->setObject("TEST", prop) prop->release(); } 
```

propTable is the Parent Dictionary, so i must create a child Dictionary to which i can inject values with setObject parameter.

Does anyone have an idea on how to do this? I suspect it must be something like this:

```
propTable->newTable->setObject(etc) 
```

but i didn't figure how to create the newTable for propTable to insert it in the existing one of what ever product == ids it finds.

Thank you very much, sorry if it's confusing. Not used to explain code related stuff in english.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:31:33.453

如果我正确理解您的问题，您需要[OSDictionary::withCapacity](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/KernelIOKitFramework/OSDictionary_h/Classes/OSDictionary/index.html#//apple_ref/cpp/clm/OSDictionary/withCapacity/OSDictionary%2a/%28unsignedint%29)工厂函数。

例如：

```
OSDictionary* prop_dict = OSDictionary::withCapacity(1);
OSString* val = OSString::withCString("test");
if (!prop_dict || !val)
{
  // handle error...
}
prop_dict->setObject("test", val);
val->release(); val = NULL; 
```

然后，在你的属性表中使用它：

```
propTable->setObject("NewProperty", prop_dict);
prop_dict->release(); prop_dict = NULL; 
```

# ios - Creating and getting saved audio data from child view - iOS

> ID：10349205
> 
> 赞同：0
> 
> 时间：2012-04-27T10:45:06.547
> 
> 标签：ios, ios5, core-audio

How do you record an audio in a view and getting the saved audio file after popping out in the parent view?

I am using embedded navigation controller in storyboard.

I have this code in my child view.

```
NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *docsDir = [dirPaths objectAtIndex:0];

tempFilePath = [NSURL fileURLWithPath:[docsDir stringByAppendingPathComponent:[NSString stringWithFormat: @"record.%@", @"caf"]]];

NSMutableDictionary* recordSetting = [[NSMutableDictionary alloc] init];
[recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];
[recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey]; 
[recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];

audioRecorder = [[ AVAudioRecorder alloc] initWithURL:tempFilePath settings:recordSetting error:nil];
[audioRecorder setDelegate:self];

[audioRecorder prepareToRecord];

[audioRecorder record]; 
```

Now, how am I gonna get that in my parent controller?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:48:49.403

您可以创建一个单例音频控制器类来进行录制，并将该音频控制器传递给每个需要使用音频的视图控制器（录制、播放等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:47:31.667

如果您有一个视图控制器录制音频，则该视图控制器应在音频被关闭之前保存音频。

你应该把它保存到一个一致的地方（例如一个缓存目录，一个文档目录，等等）。如果你给它一个可预测的文件名，你可以让你的父视图控制器轻松找到它，以便在需要时再次加载它。

或者，您可以从导航控制器获取父视图控制器的句柄，并传递写入输出音频数据（或 URL）的路径或原始音频`NSData`对象本身。这完全取决于您如何实现代码。

# r - Add legend to ggplot2 line plot

> ID：10349206
> 
> 赞同：166
> 
> 时间：2012-04-27T10:45:25.533
> 
> 标签：r, ggplot2, legend, r-faq

I have a question about legends in ggplot2\. I managed to plot three lines in the same graph and want to add a legend with the three colors used. This is the code used

```
library(ggplot2)    
require(RCurl)

link<-getURL("https://dl.dropbox.com/s/ds5zp9jonznpuwb/dat.txt")
datos<- read.csv(textConnection(link),header=TRUE,sep=";")
datos$fecha <- as.POSIXct(datos[,1], format="%d/%m/%Y")    

temp = ggplot(data=datos,aes(x=fecha, y=TempMax,colour="1")) + 
           geom_line(colour="red") + opts(title="TITULO") +
           ylab("Temperatura (C)") + xlab(" ") + 
           scale_y_continuous(limits = c(-10,40)) + 
           geom_line(aes(x=fecha, y=TempMedia,colour="2"),colour="green") + 
           geom_line(aes(x=fecha, y=TempMin,colour="2"),colour="blue") +
           scale_colour_manual(values=c("red","green","blue"))

temp 
```

and the output

![ggplot three lines](../Images/2d21a59cf6207d838e22f1ee7086be53.png)

I'd like to add a legend with the three colours used and the name of the variable (TempMax,TempMedia and TempMin). I have tried

```
scale_colour_manual 
```

but can't find the exact way.

Unfortunately original data were deleted from linked site and could not be recovered. But they came from meteo data files with this format

```
"date","Tmax","Tmin","Tmed","Precip.diaria","Wmax","Wmed"
2000-07-31 00:00:00,-1.7,-1.7,-1.7,-99.9,20.4,20.4
2000-08-01 00:00:00,22.9,19,21.11,-99.9,6.3,2.83
2000-08-03 00:00:00,24.8,12.3,19.23,-99.9,6.8,3.87
2000-08-04 00:00:00,20.3,9.4,14.4,-99.9,8.3,5.29
2000-08-08 00:00:00,25.7,14.4,19.5,-99.9,7.9,3.22
2000-08-09 00:00:00,29.8,16.2,22.14,-99.9,8.5,3.27
2000-08-10 00:00:00,30,17.8,23.5,-99.9,7.7,3.61
2000-08-11 00:00:00,27.5,17,22.68,-99.9,8.8,3.85
2000-08-12 00:00:00,24,13.3,17.32,-99.9,8.4,3.49 
```

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2012-04-27T18:20:20.250

由于[@Etienne](https://stackoverflow.com/users/742447/etienne-low-d%c3%a9carie)询问如何在不融化数据的情况下执行此操作（这通常是首选方法，但我承认在某些情况下可能无法做到这一点），我提出了以下替代方案。

从原始数据的子集开始：

```
datos <-
structure(list(fecha = structure(c(1317452400, 1317538800, 1317625200, 
1317711600, 1317798000, 1317884400, 1317970800, 1318057200, 1318143600, 
1318230000, 1318316400, 1318402800, 1318489200, 1318575600, 1318662000, 
1318748400, 1318834800, 1318921200, 1319007600, 1319094000), class = c("POSIXct", 
"POSIXt"), tzone = ""), TempMax = c(26.58, 27.78, 27.9, 27.44, 
30.9, 30.44, 27.57, 25.71, 25.98, 26.84, 33.58, 30.7, 31.3, 27.18, 
26.58, 26.18, 25.19, 24.19, 27.65, 23.92), TempMedia = c(22.88, 
22.87, 22.41, 21.63, 22.43, 22.29, 21.89, 20.52, 19.71, 20.73, 
23.51, 23.13, 22.95, 21.95, 21.91, 20.72, 20.45, 19.42, 19.97, 
19.61), TempMin = c(19.34, 19.14, 18.34, 17.49, 16.75, 16.75, 
16.88, 16.82, 14.82, 16.01, 16.88, 17.55, 16.75, 17.22, 19.01, 
16.95, 17.55, 15.21, 14.22, 16.42)), .Names = c("fecha", "TempMax", 
"TempMedia", "TempMin"), row.names = c(NA, 20L), class = "data.frame") 
```

您可以通过以下方式获得所需的效果（这也清理了原始绘图代码）：

```
ggplot(data = datos, aes(x = fecha)) +
  geom_line(aes(y = TempMax, colour = "TempMax")) +
  geom_line(aes(y = TempMedia, colour = "TempMedia")) +
  geom_line(aes(y = TempMin, colour = "TempMin")) +
  scale_colour_manual("", 
                      breaks = c("TempMax", "TempMedia", "TempMin"),
                      values = c("red", "green", "blue")) +
  xlab(" ") +
  scale_y_continuous("Temperatura (C)", limits = c(-10,40)) + 
  labs(title="TITULO") 
```

`colour`这个想法是通过将美学映射到一个常量字符串来为每条线赋予一种颜色。选择要在图例中出现的字符串是最简单的。在这种情况下，它与正在绘制的变量的名称相同这一事实`y`并不重要；它可以是任何一组字符串。这在`aes`调用内部非常重要；您正在创建到此“变量”的映射。

`scale_colour_manual`现在可以将这些字符串映射到适当的颜色。结果是 ![在此处输入图像描述](../Images/c3572f647333de65daf95f01b155fdde.png)

在某些情况下，需要通过命名手动比例中的值来明确级别和颜色之间的映射（感谢[@DaveRGP](https://stackoverflow.com/users/2902740/davergp)指出这一点）：

```
ggplot(data = datos, aes(x = fecha)) +
  geom_line(aes(y = TempMax, colour = "TempMax")) +
  geom_line(aes(y = TempMedia, colour = "TempMedia")) +
  geom_line(aes(y = TempMin, colour = "TempMin")) +
  scale_colour_manual("", 
                      values = c("TempMedia"="green", "TempMax"="red", 
                                 "TempMin"="blue")) +
  xlab(" ") +
  scale_y_continuous("Temperatura (C)", limits = c(-10,40)) + 
  labs(title="TITULO") 
```

（给出与以前相同的数字）。使用命名值，可以使用中断来设置图例中的顺序，并且可以在值中使用任何顺序。

```
ggplot(data = datos, aes(x = fecha)) +
  geom_line(aes(y = TempMax, colour = "TempMax")) +
  geom_line(aes(y = TempMedia, colour = "TempMedia")) +
  geom_line(aes(y = TempMin, colour = "TempMin")) +
  scale_colour_manual("", 
                      breaks = c("TempMedia", "TempMax", "TempMin"),
                      values = c("TempMedia"="green", "TempMax"="red", 
                                 "TempMin"="blue")) +
  xlab(" ") +
  scale_y_continuous("Temperatura (C)", limits = c(-10,40)) + 
  labs(title="TITULO") 
```

![](../Images/13889c2b6d035e849ee47cc429b960e7.png)

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2012-04-27T10:57:18.527

我倾向于发现，如果我在多个几何图形中指定单个颜色，我做错了。以下是我将如何绘制您的数据：

```
##Subset the necessary columns
dd_sub = datos[,c(20, 2,3,5)]
##Then rearrange your data frame
library(reshape2)
dd = melt(dd_sub, id=c("fecha")) 
```

剩下的就是一个简单的 ggplot 命令：

```
ggplot(dd) + geom_line(aes(x=fecha, y=value, colour=variable)) +
  scale_colour_manual(values=c("red","green","blue")) 
```

**示例图**

![在此处输入图像描述](../Images/4eb09f6ec1618de1ed98bdc0fdd30b7b.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-02T17:35:25.183

我真的很喜欢@Brian Diggs 提出的解决方案。但是，在我的情况下，我在循环中创建线图而不是明确给出它们，因为我不知道先验我将拥有多少地块。当我尝试调整@Brian 的代码时，我在正确处理颜色方面遇到了一些问题。原来我需要修改美学功能。如果有人遇到同样的问题，这里是对我有用的代码。

我使用了与@Brian 相同的数据框：

```
data <- structure(list(month = structure(c(1317452400, 1317538800, 1317625200, 1317711600, 
                                       1317798000, 1317884400, 1317970800, 1318057200, 
                                       1318143600, 1318230000, 1318316400, 1318402800, 
                                       1318489200, 1318575600, 1318662000, 1318748400, 
                                       1318834800, 1318921200, 1319007600, 1319094000), 
                                     class = c("POSIXct", "POSIXt"), tzone = ""),
                   TempMax = c(26.58, 27.78, 27.9, 27.44, 30.9, 30.44, 27.57, 25.71, 
                               25.98, 26.84, 33.58, 30.7, 31.3, 27.18, 26.58, 26.18, 
                               25.19, 24.19, 27.65, 23.92), 
                   TempMed = c(22.88, 22.87, 22.41, 21.63, 22.43, 22.29, 21.89, 20.52,
                                 19.71, 20.73, 23.51, 23.13, 22.95, 21.95, 21.91, 20.72, 
                                 20.45, 19.42, 19.97, 19.61), 
                   TempMin = c(19.34, 19.14, 18.34, 17.49, 16.75, 16.75, 16.88, 16.82, 
                               14.82, 16.01, 16.88, 17.55, 16.75, 17.22, 19.01, 16.95, 
                               17.55, 15.21, 14.22, 16.42)), 
              .Names = c("month", "TempMax", "TempMed", "TempMin"), 
              row.names = c(NA, 20L), class = "data.frame") 
```

就我而言，我是动态生成`my.cols`的`my.names`，但我不想让事情变得不必要的复杂，所以我在这里明确地给出它们。这三行使图例的排序和颜色分配更容易。

```
my.cols <- heat.colors(3, alpha=1)
my.names <- c("TempMin", "TempMed", "TempMax")
names(my.cols) <- my.names 
```

这是情节：

```
p <-  ggplot(data, aes(x = month))

for (i in 1:3){
  p <- p + geom_line(aes_(y = as.name(names(data[i+1])), colour = 
colnames(data[i+1])))#as.character(my.names[i])))
}
p + scale_colour_manual("", 
                        breaks = as.character(my.names),
                        values = my.cols)
p 
```

[![在此处输入图像描述](../Images/af039e5ff9f3cffbe5a4d4ecaecbc0f3.png)](https://i.stack.imgur.com/z47MA.png)

# c# - Static resource constructor with parameters

> ID：10349209
> 
> 赞同：2
> 
> 时间：2012-04-27T10:45:49.900
> 
> 标签：c#, wpf, constructor, staticresource

I have to create in my XAML file a static resource.

```
<Window.Resources>
    <vm:ViewModel x:Key="viewModel" />
</Window.Resources> 
```

I need this static resource to get the items for my combobox

```
ItemsSource="{Binding Source={StaticResource viewModel}, Path=GetItems, Mode=TwoWay}" 
```

But how can I give the ViewModel (constructor) a instance of my code behind class?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T10:53:19.290

如果我理解正确，那么您违反了 MVVM 模式。您永远不应该将 ComboBox 中的项目提供到您的 VM 中。您应该提供 VM 中的项目并将其绑定到 Combobox，并且您在访问这些项目时没有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T11:37:54.113

据我了解，您想根据 MVVM 模式绑定您的视图和视图模型。

你不应该在你的视图中直接引用你的视图模型，否则它们之间会有很强的耦合。根据 MVVM 模式，您应该通过 DataContext 耦合它们

在后面的代码中（例如在文件 App.xaml.cs 中）看起来像这样

```
yourWindow.DataContext = yourViewModel 
```

然后在您的**视图模型**类中，您将拥有一个名为**GetItems的属性**

最后在您的窗口中，您将列表框绑定到 GetItems

```
ItemsSource="{Binding GetItems, Mode=TwoWay}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:54:28.867

好吧，您可以从代码中完成，我的意思是代码中的所有内容，或者您​​可以 *尝试*（取决于您的应用程序的架构方式），通过使用 [ObjectDataProvider](http://msdn.microsoft.com/en-us/library/system.windows.data.objectdataprovider.aspx)。

例如：

```
<ObjectDataProvider ObjectType="{x:Type ViewModel}"  x:Key="viewModel">
      <ObjectDataProvider.ConstructorParameters>
                <StaticResource ResourceKey="dataProvider"/>
       </ObjectDataProvider.ConstructorParameters>
</ObjectDataProvider > 
```

在这种情况下，您传递给 povoder ctor 的参数自然也必须是资源。

# java - Android Beam - how to beam the correct data?

> ID：10349210
> 
> 赞同：4
> 
> 时间：2012-04-27T10:45:51.730
> 
> 标签：java, android, nfc, android-beam

I am in a android beam project right now. And I copied a test class from android developers.

My problem is to send the correct data. If I connect (p2p) with another device and press "Tab to beam" only a URI to the android market arrives. But if i open my browser, connect and tab, the current url from the browser arrives.

How can I tell android which view or text should be send? I didn´t get it. I just want to send a simple string "hello!" e.g.

This is the code:

```
package peer.to.peer;

import java.nio.charset.Charset;
import android.app.Activity;
import android.nfc.NdefMessage;
import android.nfc.NdefRecord;
import android.nfc.NfcAdapter;
import android.nfc.NfcAdapter.CreateNdefMessageCallback;
import android.nfc.NfcAdapter.OnNdefPushCompleteCallback;
import android.nfc.NfcEvent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Peer2peerActivity extends Activity implements     
CreateNdefMessageCallback,     OnNdefPushCompleteCallback {
   private Button sendButton;
   private EditText textfield;
   NfcAdapter mNfcAdapter;
   private static final int MESSAGE_SENT = 1;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.main);

          //initialisierung
          sendButton=(Button) findViewById(R.id.button);
          textfield= (EditText) findViewById(R.id.textfield);

          //mNfcAdapter = NfcAdapter.getDefaultAdapter(this);

          //if(mNfcAdapter==null) toast("NFC ist nicht vorhanden");
          //else toast("NFC ist  vorhandne");

          toast("start");

          sendButton.setOnClickListener(mTagWriter);
   }

   //lokaler OnClickListener für den Button
   private View.OnClickListener mTagWriter = new View.OnClickListener() {
    public void onClick(View arg0) {
        // Write to a tag for as long as the dialog is shown.
        //disableNdefExchangeMode();
        //enableTagWriteMode();

          toast(textfield.getText().toString());
    }
   };
   //notification-methode
   public void toast(String text){
          Toast.makeText(this, text, Toast.LENGTH_SHORT).show();
   }

   public void onNdefPushComplete(NfcEvent arg0) {
          // A handler is needed to send messages to the activity when this
    // callback occurs, because it happens from a binder thread
    mHandler.obtainMessage(MESSAGE_SENT).sendToTarget();         
   }

   public NdefMessage createNdefMessage(NfcEvent event) {
    String text = (textfield.toString());
    NdefRecord uriRecord = new NdefRecord(
              NdefRecord.TNF_ABSOLUTE_URI ,
              "http://www.google.de".getBytes(Charset.forName("US-ASCII")),
              new byte[0], new byte[0]);
    NdefMessage msg = new NdefMessage(
            new NdefRecord[] { uriRecord
    //createMimeRecord("text/plain", text.getBytes())
     /**
      * The Android Application Record (AAR) is commented out. When a device
      * receives a push with an AAR in it, the application specified in the AAR
      * is guaranteed to run. The AAR overrides the tag dispatch system.
      * You can add it back in to guarantee that this
      * activity starts when receiving a beamed message. For now, this code
      * uses the tag dispatch system.
      */
      //,NdefRecord.createApplicationRecord("com.example.android.beam")
    });
    return msg;

   }

   /**
 * Creates a custom MIME type encapsulated in an NDEF record
 *
 * @param mimeType
 */
public NdefRecord createMimeRecord(String mimeType, byte[] payload) {
    byte[] mimeBytes = mimeType.getBytes(Charset.forName("US-ASCII"));
    NdefRecord mimeRecord = new NdefRecord(
            NdefRecord.TNF_MIME_MEDIA, mimeBytes, new byte[0], payload);
    return mimeRecord;
}

/** This handler receives a message from onNdefPushComplete */
private final Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case MESSAGE_SENT:
            Toast.makeText(getApplicationContext(), "Message sent!",     Toast.LENGTH_LONG).show();
            break;
        }
    }
};
} 
```

Thanks in advance

Berry

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T09:32:35.363

您需要更改`createNdefMessage`以发送简单消息。

```
String text = (textfield.toString());
NdefMessage msg = new NdefMessage(NdefRecord.createMime( "application/com.example.android.beam", text.getBytes()));
return msg; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:46:49.633

您正在获取 URI，因为第一条记录是指向 google.de 的 URI 记录。将 uriRecord 替换为对 createMimeRecord() 的调用，您应该会收到将 mime 类型设置为 text/plain 的文本。

# jquery - Jquery为悬停事件添加了一些变量

> ID：10349212
> 
> 赞同：0
> 
> 时间：2012-04-27T10:45:53.650
> 
> 标签：jquery, variables, hover

我创建了一些 a-tags 并将其存储在不同的变量中。现在，我想向这个存储的变量添加一个悬停事件。

类似的东西

```
var btnPrev = $(document.createElement('a'));
btnPrev.css({
    'display':'block',
            ...
});
btnPrev.text('<');
btnPrev.addClass('issueBtnPrev');
var btnNext = $(document.createElement('a'));
btnNext.css({
    'display':'block',
            ...
});
btnNext.text('>');
btnNext.addClass('issueBtnNext'); 
```

现在这里是悬停事件

```
(btnNext,btnPrev).hover(function() {
    $(this).fadeTo(200,'0.3');
}, function() {
    $(this).fadeTo(200,'.2');
}); 
```

但只有 btnPrev 具有悬停效果，是否有一种方法可以将多个变量附加到悬停效果。

我知道我可以使用 $('.issueBtnNext, .issueBtnPrev').hover

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:47:56.057

您需要[将](http://api.jquery.com/add/)一个元素添加到匹配的集合中：

```
$(btnNext).add(btnPrev).hover(...); 
```

[http://jsfiddle.net/zerkms/qSYXk/](http://jsfiddle.net/zerkms/qSYXk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:48:13.963

您可以使用该[`add`](http://api.jquery.com/add/)方法将另一个 jQuery 对象（或元素、HTML 片段等）添加到当前集合：

```
btnNext.add(btnPrev).hover(function() {
    $(this).fadeTo(200,'0.3');
}, function() {
    $(this).fadeTo(200,'.2');
}); 
```

来自 jQuery 文档`add`：

> 给定一个表示一组 DOM 元素的 jQuery 对象，.add() 方法从这些元素的并集和传递给该方法的元素构造一个新的 jQuery 对象。

Your current attempt only works for `btnPrev` because you are using the [comma operator](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator) which evaluates both of its operands (which in your case does nothing) and returns the last, which in your case is `btnPrev`.

# magento - displaying login in magento 1.6

> ID：10349216
> 
> 赞同：0
> 
> 时间：2012-04-27T10:46:33.117
> 
> 标签：magento, layout, php

I am figuring out how to enable login.phtml in magento 1.6 only in **custom theme**, however, it is clear to me that in magento 1.6 login is triggered from persistent not from customer until persistent is switched off. I am not able to display it either in persistent or in customer layout settings. In a built-in or base theme it is working fine but since I am developing a custom theme and now I am stuck on it to work properly. Any help is highly appreciated....

Regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:15:55.230

检查相关的 XML ..

它用magento做所有的事情。

# javascript - 表单字段值在没有页面加载的情况下重置

> ID：10349218
> 
> 赞同：0
> 
> 时间：2012-04-27T10:46:46.683
> 
> 标签：javascript, html, jquery

以下是我试图完成的代码，当用户单击提交按钮时，我的 javascript 函数将其 id='contact_form' 的表单的文本字段中的所有值设置为 null 而不加载页面。请让我知道如何修改以下代码以完成我一直在尝试做的功能。谢谢！！

```
<script type='text/javascript'>
    $(document).ready(function(){
        $('#love').click(function(e) {
            document.contact_form.name.value = '';
            alert('aloha!!');
            //stop the form from being submitted (not working fine)
            e.preventDefault();
        }
    }
</script>
<form name='abc' action='' id='abc' >
    <input type="submit" id='love' />
</form> 
```

我也尝试了以下功能，它运行良好，但它并没有阻止页面加载

```
<script type='text/javascript'>
    function js(){
        document.contact_form.name.value = '';
        //stop the form from being submitted (NOT WORKING!!)
        preventDefault();
    }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:51:38.170

如果您尝试`onsubmit="return false;"`使用`form`标签，您的表单将不会被提交。不幸的是，它永远不会被提交。除非您不打算通过 AJAX 提交它，否则您必须`onsubmit`像这样修改您的事件：

```
<form onsubmit="return callFunction()">

function callFunction() {
    if(condition)
        return true;
    else
        return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:51:41.943

```
$("#abc").submit( function() {
  // do everything you want.
   return false; //will prevent the reload.
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:51:15.340

要在表单提交时执行函数，您必须执行以下操作；

```
<form onsubmit="return validate();">
your form here
</form> 
```

然后你可以签入一个名为“validate()”的函数（或任何你想调用的函数）

确保 validate() 函数在允许提交表单时返回 true，如果不允许提交页面，则返回 false。

还将 id 和名称放在您的输入元素上，这样您就可以更轻松地访问它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T11:00:13.907

假设您有这样的 HTML：

```
<form>
<input type="text" id="text" />
<input type="submit" id='submit' value="clear above field without reloading" />
</form> 
```

并且您希望在用户提交时清除文本字段值而不使用 jQuery 重新加载，那么以下脚本将是您的补救措施：

```
$(function(){
$('#submit').click(function(){
    $('#text').value('');
})
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T11:14:19.393

可以通过多种方式提交表单，而不仅仅是单击提交按钮。您应该真正注意`submit`事件，并取消它们`preventDefault`（而不是可能触发提交的点击事件）。请参阅@user1359163 的回答。

但你的问题似乎是 `document.contact_form.name.value`。文档对象没有属性`contact_form`，所以这会引发错误。preventDefault 没有执行，您的表单被提交并且您永远不会看到错误。将调试器设置为“停止错误”！

您可能想要类似的东西`document.forms["contact"]`，但我不知道您的 HTML。输入元素的 id 选择器将是更好的选择。

# haskell - Including data files in cabal builds

> ID：10349221
> 
> 赞同：11
> 
> 时间：2012-04-27T10:47:02.227
> 
> 标签：haskell, cabal

I have a package with the following structure (okay, this is greatly simplified, but...)

```
app/
  src/
    Main.hs
  data/
    data.txt
  app.cabal
  Paths_app.hs
  Setup.hs 
```

In Paths_app.hs I have:

```
module Paths_app where
getDataFileName :: FilePath -> IO FilePath
getDataFileName = return 
```

and in Main.hs I have:

```
module Main where
import Paths_app
main = do
    file <- getDataFileName "data/data.txt"
    data <- readFile file
    putStrLn $ "Your data is: " ++ data 
```

the relevant parts of my app.cabal file look like this:

```
name: app
version: 1.0
build-type: Simple
data-files: data/data.txt

executable foo
  build-depends: base, haskell98
  main-is: Main.hs
  hs-source-dirs: src 
```

This builds fine (using `cabal configure` followed by `cabal install`) but the executable complains that it can't find the data.txt file. I've tried replacing the line

```
file <- getDataFileName "data/data.txt" 
```

with

```
file <- getDataFileName "data.txt" 
```

but the same thing occurs. Is there something obvious I'm doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:16:26.297

问题是我在 Windows 系统上构建，当我使用返回的文件名将`getDataFileName`数据加载到我的程序中时，我没有转义反斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:01:07.867

我试图重现它，但它对我来说很好。

在您描述的设置中，我不得不放弃对`haskell98`两者的依赖，`base`并`haskell98`提供`Prelude`. 此外，该文件`Main`无法编译，因为它使用关键字`data`作为变量名，所以我将变量重命名为`dat`. 但后来它工作得很好。

关于我的设置的一些信息：

```
$ ghc --version
The Glorious Glasgow Haskell Compilation System, version 7.4.1

$ cabal --version
cabal-install version 0.13.3
using version 1.14.0 of the Cabal library 

$ ls ~/.cabal/bin/
...  foo  ...   

$ ls ~/.cabal/share/app-1.0/data/
data.txt 
```

# java - 其中哪一个在 java 中是最有效的？

> ID：10349223
> 
> 赞同：3
> 
> 时间：2012-04-27T10:47:14.103
> 
> 标签：java, performance, conditional-statements

> **可能重复：**
> [Java：If vs. Switch](https://stackoverflow.com/questions/1061101/java-if-vs-switch)

对于在编程中观察到的所有条件语句，这些块中的哪一个是最优选的：

1.  三元运算符
2.  else-if 块
3.  开关块

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T12:34:48.577

当然，您可以通过不同的方式进行比较。

我是这样做的：

常见块：

```
int a = 42;
int k = 17; 
```

如果：

```
if (a == 42) 
    k+=4;
else    k+=5; 
```

案子：

```
switch (a) {
    case 42: k+=4; break;
    default: k+=5; break;
} 
```

三元：

```
k += (a == 42) ? 4 : 5; 
```

它们不会编译为相同的字节码：

```
l *Tern*.class
-rw-r--r-- 1 stefan stefan 704 2012-04-27 14:26 CaseIfTern.class
-rw-r--r-- 1 stefan stefan 691 2012-04-27 14:26 IfTernCase.class
-rw-r--r-- 1 stefan stefan 728 2012-04-27 14:26 TernIfCase.class 
```

但是，当您有多个案例时，switch 的优势就会发挥作用 - 而不仅仅是 2 个。

如果和三元级联超过2个案例。

但它们在惯用语/语义上有所不同。三元运算符返回一些东西，但不返回 if 或 switch。

所以还不清楚你必须比较什么。

但我做了一个基准测试，结果如下：

```
0   if      tern    case 
1   3.103   0.244   0.118   
2   0.306   0.276   0.309   
3   0.382   0.329   0.328   
4   0.464   0.435   0.458   
5   5.045   1.519   1.248   
6   4.57    3.088   2.915   
7   4.036   2.977   3.015   
8   3.197   3.834   3.893   
9   4.631   4.523   5.488   
10  6.445   3.891   3.09 
```

![基准图（基准图）](../Images/f40afd3c74f01239d729c63d1419da16.png)

这表明，它们确实没有太大的区别，而且缓存效果在 5M 的情况下仍然有影响，即使在加热 VM 之后也是如此。

在实际情况下，您很少有数百万次调用几乎没有任何反应。但是如果发生了什么事，if/case/ternary 的时间很快就会变得无关紧要。

这是我测试的代码：

```
public class CaseTernIf
{
    public static int aORbIf (int a) {
        if (a == 2) 
            return 4;
        else    return 5;
    }

    public static int aORbTern (int a) {
        return  (a == 2) ? 4 : 5;
    }

    public static int aORbCase (int a) {
        switch (a) {
            case 2:  return 4;
            default: return 5; 
        }
    }
} 
```

这是测试代码（Scala）：

```
object IfCaseTernBench extends Benchcoat [List[Int], Seq[Int]] {

  type I=List[Int]
  type O=Seq[Int]
  val name = "CaseTern"
  /** We return a List of random Ints numbers here. */
  def iGenerator (n: Int) : I = (for (x <- 1 to n) yield math.abs (random.nextInt (3))).toList
  def takePart (li: I, n: Int) : I = li.take (n) 

  /* Each algorithm is called by a mapping to a static method.  */
  def ifTest   (i: I) : O = i.map (CaseTernIf.aORbIf) 
  def caseTest (i: I) : O = i.map (CaseTernIf.aORbCase) 
  def ternTest (i: I) : O = i.map (CaseTernIf.aORbTern) 

  // Map of Test names -> methods to test
  val list2bench: List [(String, I => O)] = List (
       "if test"    -> ifTest _
     , "case test"  -> caseTest _
     , "tern test"  -> ternTest _
  )

  def test = { 
     list2bench.foreach (algo => println (algo._2))
  }
} 
```

### 更新：

这是[BenchCoat 的来源](https://gist.github.com/1372818)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:52:06.677

三元运算符是最有效的，因为它在 else-if 块需要的程序集中不需要“goto”。我认为 switch case 并不比 else-if 块更有效，假设你在 else-if 块中所做的只是将一个值与另一个值进行比较（因为基本上这就是 switch 最终所做的一切）。

但是，您应该考虑另一个考虑因素：清晰度。更重要的是选择最有效的用法是编写清晰简洁的代码。为此，我建议使用 else-if 或 switch 块而不是三元运算符，因为您开始交叉眼睛寻找否则返回的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T10:52:37.887

如果您使用的是现代编译器，则没有太大区别。编译器优化代码后，原生代码应该差不多了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T23:35:41.753

这取决于 JVM 的实现以及版本，**一般来说，您不能说语句是否最快**。

**例如**，所有语句生成的字节码也可能相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T14:13:03.803

我做了以下测试：

```
public class IfElseSwichTernary {

    public static int aORbIf(int a) {
        int x = 0;

        if (a == 2) {
            x = 4;
        } else if (a == 3) {
            x = 5;
        } else if (a == 4) {
            x = 6;
        } else {
            x = 7;
        }           
        return x;
    }

    public static int aORbTern(int a) {
        int x = 0;

        x = (a == 2) ? 4 : ((a == 3) ? 5 : ((a == 4) ? 6 : 7));         
        return x;
    }

    public static int aORbCase(int a) {
        int x = 0;

        switch (a) {
        case 2:
            x = 4;
            break;
        case 3:
            x = 5;
            break;
        case 4:
            x = 6;
            break;
        default:
            x = 7;
        }           
        return x;
    }
} 
```

我用java反编译器反编译得到以下代码：

公共类 IfElseSwichTernary {

```
public static int aORbIf(int a) {
    int x = 0;

    if (a == 2) {
        x = 4;
    } else if (a == 3) {
        x = 5;
    } else if (a == 4) {
        x = 6;
    } else {
        x = 7;
    }           
    return x;
}

public static int aORbTern(int a) {
    int x = 0;

    x = (a == 2) ? 4 : ((a == 3) ? 5 : ((a == 4) ? 6 : 7));         
    return x;
}

public static int aORbCase(int a) {
    int x = 0;

    switch (a) {
    case 2:
        x = 4;
        break;
    case 3:
        x = 5;
        break;
    case 4:
        x = 6;
        break;
    default:
        x = 7;
    }           
    return x;
} 
```

}

这意味着编译器不会改变任何东西（我不知道JVM在转换和运行指令时是否会改变）

当我们谈论两个以上的条件时，如果它以与 Switch 相同的逻辑表示，则更符合性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T10:53:14.377

三元运算符只是 if (something) { yay } else { boo } 的一种简写形式，执行起来更简单。三元运算符将扩展为 if else 构造，字节码没有区别。

# jdeveloper - 包含来自两个 POJO Bean 数据控件的数据的表

> ID：10349225
> 
> 赞同：0
> 
> 时间：2012-04-27T10:47:16.003
> 
> 标签：jdeveloper, oracle-adf

JDev 11.1.1.5.0

用例：显示一个表，其中第一行将包含来自一个 POJO Bean 数据控件的值，第二行将包含来自另一个的值。我已经设法从一个 bean 数据控件中显示第一行，现在我想用另一个显示第二行。

希望用例清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:09:54.380

有一个 pojo，它返回一个集合，将来自两个 pojo 的数据组合成一个记录/对象。然后创建一个表，在每列中放置两个字段，并以这种方式显示记录的详细信息。

# python - MySQLdb 与具有不同端口的 localhost 的连接错误（例如 8080）

> ID：10349235
> 
> 赞同：1
> 
> 时间：2012-04-27T10:47:45.647
> 
> 标签：python, mysql, localhost, mysql-python

我正在尝试将 MySQLdb 连接到 MySQL。当我的服务器是 localhost 和端口 80 时，它工作正常。但由于某种原因，我不得不将端口更改为 8080。现在如何在连接命令中指定端口？
这是我之前使用的：

```
db = MySQLdb.connect(host = "localhost", user = "root", passwd = "", db = "pymysql") 
```

现在我的服务器是“localhost:8080”。那么我应该在哪里提供有关此端口的信息？我试过这个：

```
db = MySQLdb.connect(host = "127.0.0.1:8080", user = "root", passwd = "", db = "pymysql") 
```

这就是我得到的：

```
Traceback (most recent call last):
File "<pyshell#4>", line 1, in <module>
db = MySQLdb.connect(host = "127.0.0.1:8080", user = "root", passwd = "", db = "pymysql")
File "C:\Python27\lib\site-packages\MySQLdb\__init__.py", line 81, in Connect
return Connection(*args, **kwargs)
File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 187, in __init__
super(Connection, self).__init__(*args, **kwargs2)
OperationalError: (2005, "Unknown MySQL server host '127.0.0.1:8080' (11004)") 
```

请帮忙 ！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T10:57:53.493

您应该阅读[文档](http://mysql-python.sourceforge.net/MySQLdb.html)。

```
connect(parameters...)

    host
        name of host to connect to. Default: use the local host via a UNIX socket (where applicable)
    user
        user to authenticate as. Default: current effective user.
    passwd
        password to authenticate with. Default: no password.
    db
        database to use. Default: no default database.
    port
        TCP port of MySQL server. Default: standard port (3306). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:57:32.033

端口 8080 或 80 通常用于 Web 服务器而不是 MySQL

MySQL 的默认端口是 3306

# php - MPRandomText 类的对象无法转换为字符串

> ID：10349236
> 
> 赞同：2
> 
> 时间：2012-04-27T10:47:50.730
> 
> 标签：php, string, class, object

> **可能重复：**
> [对象无法转换为字符串？](https://stackoverflow.com/questions/3200899/object-could-not-be-converted-to-string)

我需要为我的图像创建随机标题，但出现错误

MPRandomText 类的对象无法在第 42 行的 C:\Program Files (x86)\EasyPHP-5.3.9\www\dir.php 中转换为字符串

以及如何在我的 html 图片标题中包含随机文本？

```
 class MPRandomText
    {
    var $filepath;
    var $sepstring;
    var $fixchar;
    var $textfix;
    var $contents;
    var $random;
    var $errors;
    // initiate object and start functions
    function MPRandomText($filepath, $sepstring, $textfix)
        {
        $this->filepath = $filepath;
        $this->textfix = $textfix;
        $this->sepstring = $sepstring;
        $this->errors = "";
        $this->contents = "";
        $this->FileToString();
        }
    // read file contents into string variable
    function FileToString()
        {
        if (!$this->filepath || !file_exists($this->filepath))
            $this->errors = "Could not find text file at ".$this->filepath;
            else {
            @$filePointer = fopen($this->filepath, "r");
            if (!$filePointer) $this->errors = "Text file could not be opened.";
            if ($this->errors == "")
                {
                $this->contents = fread($filePointer, filesize($this->filepath));
                fclose($filePointer);
                if (!$this->textfix) $this->HTMLContent();
                $this->MakeArray();
                }
            }
        }
    // if importing an HTML page, drop everything outside of (and including) the <body> tags
    function HTMLContent()
        {
        $test = stristr($this->contents, "<body");
        if ($test !== false)
            {
            $test = stristr($test, ">");
            if ($test !== false)
                {
                $test = str_replace("</BODY>", "</body>", $test);
                $test = explode("</body>", substr($test, 1));
                if (count($test) > 1) $this->contents = $test[0];
                }
            }
        }
    // convert the file text into a list using separation character
    function MakeArray()
        {
        $array = explode($this->sepstring, $this->contents);
        if (count($array) > 0)
            {
            $this->contents = $array;
            $this->CleanTextList();
            } else $this->errors = "Text file contents are empty or could not be read.";
        }
    // clean up the list of empty values and extra white space
    function CleanTextList()
        {
        $result = array();
        if (is_array($this->contents))
            {
            for ($n=0; $n<count($this->contents); $n++)
                {
                $string = trim($this->contents[$n]);
                $test = trim($string."test");
                if (!empty($string) AND $test != "test") $result[] = $string;
                }
            if (count($result) > 0)
                {
                $this->contents = $result;
                $this->RandomString();
                }
            }
        }
    // get random text string from list
    function RandomString()
        {
        reset($this->contents);
        srand((double) microtime() * 1000000);
        shuffle($this->contents);
        $this->random = $this->contents[0];
        }
    // send finished results to be printed into HTML page
    function GetResults()
        {
        if ($this->errors != "") return $this->errors;
            else
            {
            if ($this->textfix == true) $this->random = htmlentities($this->random);
            return $this->random;
            }
        }
    }

//-------------------------------------------------------------------------------------------------
//  FUNCTION AND VARIABLE TO CREATE RANDOM TEXT INSTANCE
//-------------------------------------------------------------------------------------------------

// create variable to store instance references
$MPRandomTextHandles = array();

// function to create new handle and import random text
function MPPrintRandomText($MPTextFile = "random.txt", $MPSepString = "*divider*", $MPTextToHTML = false)
    {
    global $MPRandomTextHandles;
    for ($n=0; $n<250; $n++)
        {
        if (!isset($MPRandomTextHandles[$n]))
            {
            $MPRandomTextHandles[$n] = new MPRandomText($MPTextFile, $MPSepString, $MPTextToHTML);
            break;
            }
        }
    print($MPRandomTextHandles[$n]->GetResults());
    return $MPRandomTextHandles[$n];
    }

    /* Начало конфигурации */
$thumb_directory = 'img/thumbs';
$orig_directory = 'img/imag';
/* Конец конфигурации */
$allowed_types=array('jpg','jpeg','gif','png');
$file_parts=array();
$ext='';
$title='';
$title1='גילוף פסלים בעץ';
$i=0;

/* Открываем папку с миниатюрами и пролистываем каждую из них */
$dir_handle = @opendir($thumb_directory) or die("There is an error with your 
image directory!");
$i=1;

while ($file = readdir($dir_handle))
{
/* Пропускаем системные файлы: */
if($file=='.' || $file == '..') continue;
$file_parts = explode('.',$file);
$ext = strtolower(array_pop($file_parts));

/* Используем название файла (без расширения) в качестве названия изображения: */
// $title = implode('.',$file_parts);
// $title = htmlspecialchars($title);
include_once("GetRandomText.php");
$MPTextFile = "random.txt";
$MPSepString = "*divider*";
$MPTextToHTML = false;
$title = MPPrintRandomText($MPTextFile, $MPSepString, $MPTextToHTML);

/* Если расширение разрешено: */
if(in_array($ext,$allowed_types))
{

/* Выдаем каждое фото: */
echo '<li>
        <a href="'.$orig_directory.'/'.$file.'" rel="lightbox[pasel]">
            <img title="'.$title.'" src="'.$thumb_directory.'/'.$file.'" width="72" height="72" alt="גילוף פסלים בעץ" />
        </a>
    </li>';
}
}
/* Закрываем папку */
closedir($dir_handle); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:00:18.973

$title 是 MPRandomText 的一个实例。您在输出中连接 $title 但 MPRandomText 未实现 __toString()，因此无法将其转换为字符串。

```
<?php 
$title = MPPrintRandomText($MPTextFile, $MPSepString, $MPTextToHTML);
// MPPrintRandomText returns an instance of MPRandomText

/* Если расширение разрешено: */
if(in_array($ext,$allowed_types))
{

/* Выдаем каждое фото: */
echo '<li>
    <a href="'.$orig_directory.'/'.$file.'" rel="lightbox[pasel]">
        <img title="'.$title.'" src="'.$thumb_directory.'/'.$file.'" width="72"     height="72" alt="גילוף פסלים בעץ" />
    </a>
</li>';
// concatenating $title here will fail because MPRandomText does not implement __toString()
}
}
?> 
```

# jquery - 上滑功能不起作用

> ID：10349245
> 
> 赞同：0
> 
> 时间：2012-04-27T10:48:29.420
> 
> 标签：jquery

我有这样的复选框：

```
<input type="checkbox" value="1500-374-Breckin Meyer" id="artistBreckin Meyer" class="ImdbAddArtist" name="artist[]"> 
```

```
var exploded = value.split('-');
$("#" + par2 + "").append(('<br /><input type="checkbox" name =' + par + ' value=' + exploded[0] + "-" + exploded[1] + '-' + exploded[2] + ' />' + exploded[3] + '<br />'));
$('#artist' + exploded[3]).slideUp('slow'); 
```

它添加了我的 div 但以下行不起作用：

```
$('#artist' + exploded[3]).slideUp('slow'); 
```

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:55:28.667

您正在使用该字符`-`作为拆分分隔符，并且您要拆分的字符串是`1500-374-Breckin Meyer`. 给定您的代码，这将产生一个字符串数组`1500`，`374`和`Breckin Mayer`。

换句话说，在结果字符串/段数组中有 3 个元素（索引 0 到索引 2）。

但是，如下所示，您指的是第四段（索引 3）。

`exploded[3]`

# ios - 有没有方便的 iOS AR SDK 可用？

> ID：10349247
> 
> 赞同：2
> 
> 时间：2012-04-27T10:48:41.437
> 
> 标签：ios, sdk, augmented-reality

我想做这样的事情：

借助 iPhone 的摄像头和 AR 技术，我可以在现实世界中将一张虚拟纸贴在我面前的桌子上，无论我把 iPhone 放在那个地方，我都会贴上纸，但纸似乎仍然在原来的位置我一开始就放了。

如果我想实现它，我需要什么？还有什么SDK更适合我用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:15:12.240

这个问题现在已经很老了。它还开着吗？你可以试试[Qualcomm Vuforia](http://www.qualcomm.com/solutions/augmented-reality)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T14:55:55.060

查看[http://socialcompare.com/en/comparison/augmented-reality-sdks](http://socialcompare.com/en/comparison/augmented-reality-sdks)以了解哪些 AR SDK 支持 iOS。您可以从查看 ARToolkit、Metaio、String、Vuforia 和 Wikitude 开始。

# ios - 在 iOS 项目中存储数据的位置？

> ID：10349249
> 
> 赞同：0
> 
> 时间：2012-04-27T10:48:57.923
> 
> 标签：ios

我有一部分数据只能读取一次。我在那里有 ivars，想将它们存储在某个地方以便从我的控制器访问。我应该把它放在哪里？在这种情况下，我宁愿避免子类化。我的读者应该从其他类传递数据，而其他类可能是某些东西的父类。我对吗？

所以我的问题是：我的应用程序启动后我有一些数据，我必须把它放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:57:24.730

在您的 appDelegate 中设置一个数组，然后从任何地方：

```
MyAppDelegateClass *appDelegate = [[UIApplication sharedApplication] delegate];

[appDelegate someMethod:..]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:02:39.700

@SimpleMan：- 你有哪种类型的数据？文字、图片、视频？

我认为您有文本数据吗？对于文本数据，您也可以使用 plist.. 或 Sqlite 数据库。你要哪个。在这种情况下，数据将被永久存储。如果您想临时存储数据，即一次（仅在应用程序运行期间存在），您可以将数据存储在变量中。

在您的情况下，当您的应用程序启动时，您正在从服务器获取数据，对吗？那么您应该将该数据存储在应用程序委托文件中。即 AppDelegate.m 文件。

并在您想访问的地方使用。如果您有任何疑问，请回复我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:27:36.430

如其他答案中所述，您可以将其存储在您的 appDelegate 中。如果数据不多，那么我个人认为将其存储在 appDelegate 中没有任何问题。

（我认为有些人可能会过于拘泥于“正确”或“错误”的做事方式——如果这是一个小应用程序，并且没有其他人会和你一起开发这个应用程序，那么只要做简单的事您的应用程序和您的用户不会受到影响）。

如果它有很多数据，或者如果将来你可能想显着扩展这些数据，我会避免这样做。在这种情况下，最好创建一个单独的单例模型类来存储数据。

# geolocation - 将地址转化为 GPS 坐标转化为送货路线？

> ID：10349250
> 
> 赞同：1
> 
> 时间：2012-04-27T10:49:02.907
> 
> 标签：geolocation

我不确定这个问题是属于 StackOverflow、SuperUser 还是另一个 StackExchange 站点。

我有一个必须开车去的地点（我需要会见的潜在客户）的列表，我想使用 Google 地图或 Open Street View 来构建优化的路线。

有没有可以做到这一点的工具，例如。他们获取 CSV 位置列表并生成行车路线？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-02T13:52:00.797

如果您的列表足够短，您可以建立一个包含所有位置的自定义链接，这可能比 AutoIT 方法更容易。查看允许您与多个路线停靠点共享地图的链接，然后使用该语法将您的位置链接在一起。我认为这比将它们粘贴到最近更改的 UI 中更容易。

# css - 谷歌网络字体在 chrome 上看起来很糟糕

> ID：10349256
> 
> 赞同：7
> 
> 时间：2012-04-27T10:49:23.063
> 
> 标签：css, google-chrome, fonts, google-webfonts

我的网站严重依赖 Google Webfonts，而且（不幸的是）google chrome 对它们的表现很糟糕，我已经将 font-smooth 设置为 always，但它似乎没有帮助。例子：

![谷歌浏览器 - 隆德里纳大纲](../Images/ce6844e60567981f75d258d3270131f9.png)

![Firefox - 隆德里纳大纲](../Images/e73ca39e5ba82ad6d899d5a1edd067dc.png)

![Google Chrome - Walter Turncoat](../Images/b9f9f24d64a486f9154a7333671b06e5.png)

![Firefox - Walter Turncoat](../Images/3b0465dedb945fd77cb05edd1d428c10.png)

有什么办法可以使它们平滑/使它们看起来更好吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T20:12:50.553

字体渲染问题在 GChrome 中很常见，请尝试更改 @font-face 源的顺序... Chrome 使用 @font-face 源中的 .svg 文件，出于某种原因，它不允许最后调用 .svg名单

```
@font-face {
font-family: 'my-dirty-font';
src: url('../fonts/my-dirty-font.eot');
src: url('../fonts/my-dirty-font.eot?#iefix') format('eot'),
url('../fonts/my-dirty-font.woff') format('woff'),
url('../fonts/my-dirty-font.ttf') format('truetype'),
url('../fonts/my-dirty-font.svg') format('svg');
font-weight: normal;
font-style: normal;
} 
```

如果订单@font-face 的订单看起来相似，请尝试更改为

```
@font-face {
    font-family: 'my-dirty-font';
    src: url('../fonts/my-dirty-font.eot');
    src: url('../fonts/my-dirty-font.eot?#iefix') format('eot'),
    url('../fonts/my-dirty-font.svg') format('svg');
    url('../fonts/my-dirty-font.woff') format('woff'),
    url('../fonts/my-dirty-font.ttf') format('truetype'),
    font-weight: normal;
    font-style: normal;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T10:39:32.053

我个人会使用

> [http://www.fontsquirrel.com/](http://www.fontsquirrel.com/)

它全部托管在您的服务器上，并且几乎与所有浏览器兼容！自从使用 Font Squirrel 后，我就没有在别处寻找过。

# mysql - 如何在 ubuntu 10.4 中使用终端使用 phpmyadmin mysql 数据库？

> ID：10349258
> 
> 赞同：2
> 
> 时间：2012-04-27T10:49:25.260
> 
> 标签：mysql, phpmyadmin

任何人都可以帮助我通过终端使用 phpmyadmin mysql 数据库。

我正在使用 ubuntu 10.4。

我猜像这样的命令**/opt/var/usr/mysql**。我不确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T12:18:54.757

在终端只需输入：

```
mysql -u username -p 
```

之后会提示您输入密码。

通常 MySQL 被添加到 /bin/ 所以不需要显式地给出它的路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T11:19:07.493

**回答：**

下面的命令用于通过终端访问 phpmyadmin mysql 数据库

```
/opt/lampp/bin/mysql -uroot -ppassword 
```

# c# - LINQ to entity Child 查询其中 Parent 具有某些属性

> ID：10349261
> 
> 赞同：2
> 
> 时间：2012-04-27T10:49:35.023
> 
> 标签：c#, linq, linq-to-entities

使用 C# 和 LINQ 到实体我遇到了子实体和父实体搜索的问题。从概念上讲，我试图获得一个 IEnumerable 孩子的集合，其中这些孩子具有某些属性，并且这些孩子的父母也具有某些属性。

具体来说，我有具有多对多关系的路线和街道。我正在尝试在特定路线上查找街道，其中街道具有 LeftNote 或 RightNote 的正属性（LeftNote 和 RightNote 是字符串，我正在搜索非空格的字符串）。

我有以下实体（为了清楚起见，删减）

```
public class Route
{
    public int RouteID { get; set; }

    public virtual ICollection<Street> Streets { get; set; }
}

public class Street
{
    public string LeftNote { get; set; }

    public string RightNote { get; set; }

    public virtual ICollection<Route> Routes { get; set; }
} 
```

我有以下 LINQ 表达式：

```
var streets = this.repository.Routes
                        .Where(r => r.RouteID == routeId).FirstOrDefault()
                        .Streets
                        .Where(s => s.LeftNote.Length > 0 || s.RightNote.Length > 0); 
```

在我对存在 Route 但没有包含 LeftNotes 或 RightNotes 的街道的实体数据运行此程序之前，这非常有效。在这些情况下，我得到一个 NullReference 异常。我正在尝试找到一种方法来正确表达此查询，该查询使用 LeftNotes 处理 Streets 的缺失（应该始终有一个与 routeId 匹配的 Route。如果不是，这是一个有效的异常情况，应该抛出和错误）。

编辑：问题似乎与空字符串有关，而不是与 LINQ 构造相关的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:06:48.273

你真的是说

```
var streets = repository.Streets.Where
       (s => s.Routes.Any(r => r.RouteID == routeId )
             && (s.LeftNote.Length > 0 || s.RightNote.Length > 0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:12:47.477

```
var streets = this.repository
                  .Routes
                  .Where(r => r.RouteID == routeId).FirstOrDefault()
                  .Streets
                  .Where(s => s.LeftNote !=null ? s.LeftNote.Length > 0 : false
                          || s.RightNote !=null ? s.RightNote.Length > 0 : false); 
```

没有测试过，但认为它应该可以工作。

或者

```
this.repository.Streets(s=>(s.LeftNote.Length >0 || s.RightNote.Length > 0 ) 
                             && s.Routes.routeId==routeId)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:25:29.413

只需使用 String.IsNullOrEmpty()。

```
var streets = this.repository
                .Routes
                .Where(r => r.RouteID == routeId).FirstOrDefault()
                .Streets
                .Where(s => !String.IsNullOrEmpty(s.LeftNote) ||
                            !String.IsNullOrEmpty(s.RightNote)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:57:10.933

请尝试以下方法：

```
var streets = this.repository.Routes
                             .Where(r => r.RouteID == routeId).FirstOrDefault()
                             .Streets
                             .Where(s => s.LeftNote ? s.LeftNote.Length > 0 : false || s.RightNote ? s.RightNote.Length > 0 : true); 
```

**更新**

```
var streets = this.repository.Streets
                             .Where(s => s.Routes.RouteID == routeId && s.LeftNote.Length > 0 || s.RightNote.Length > 0); 
```

更新代码是在插入新代码之后。

使用 false first 的原因是强制验证 second or 子句。不确定以下是否有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T11:18:08.373

是否必须在一个查询中执行

```
IEnumerable<Street> streets = Enumerable.Empty<Street>();
var route = this.repository
                .Routes
                .Where(r => r.RouteID == routeId).FirstOrDefault()

if(route != null && route.Streets.Any())
{
    streets = route.Streets
                   .Where(s => s.LeftNote.Length > 0 
                            || s.RightNote.Length > 0);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T11:29:05.750

尝试将 LINQ 表达式更改为此

```
var streets = this.repository.Routes
                  .Where(r => r.RouteID == routeId).FirstOrDefault()
                  .Where(r => r.Streets.Any(s => s.LeftNote.Length > 0 || s.RightNote.Length > 0)); 
```

# iphone - 我如何在 cocos2d iphone 中存储带有名称的前 5 个分数

> ID：10349265
> 
> 赞同：0
> 
> 时间：2012-04-27T10:49:46.493
> 
> 标签：iphone, ios, cocoa-touch, cocos2d-iphone

我需要你的帮助，我陷入了一个简单的问题，我做了很多谷歌搜索，但没有得到解决方案。

我想存储前 5 名分数和名称，我通过 NSUserDefaults 完成了分数，但不知道如何用名称存储它。请帮助我。我真的需要你的帮助。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:29:01.987

您可以将用户默认值保存为

```
NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];
NSDictionary* dict = [[NSDictionary alloc] initWithObjectsAndKeys:@"jonny",@"name",@"100",@"score", nil];
NSArray* arr = [[NSArray alloc] initWithObjects:dict, nil];
[defaults setObject:arr forKey:@"list"];
[defaults synchronize];
[dict release];
[arr release]; 
```

并将值读取为

```
NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];
NSArray* arr = [defaults objectForKey:@"list"];
NSLog(@"%@",[arr objectAtIndex:0]); 
```

这对你来说很好，它将是一个字典数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:45:17.893

我建议您熟悉基本的 Objective-C 集合类。您可以使用 NSDictionary 来存储对象，这些对象可以是其他对象。在您的应用程序中有一些分析您的集合类的逻辑之后，您可以将此字典与 NSUserDefaults 结合使用来仅存储您想要存储的内容。

拿起一本关于 Objective-C 的好书，学习集合、数组和字典。

# java - 为什么 JList 不显示新添加的元素？

> ID：10349267
> 
> 赞同：1
> 
> 时间：2012-04-27T10:49:48.387
> 
> 标签：java, swing, ftp, jlist

我有一个包含 JList 的面板。当我将此面板添加到带有一个元素的西 BorderLayout 时，一切正常，我在其中看到一个元素，但是如果我添加新元素或清除所有元素，我看不到任何效果。

**任何机构都可以提出任何解决方案吗？**

**包含 JList 的 JPanel 类**

```
public class FtpPanel extends JPanel{
public JList ftpJList;
public DefaultListModel ftpListModel;

public FtpPanel(String[] list) {
    this.setLayout(new BorderLayout());
    this.setBorder(new EmptyBorder(20, 20, 20, 20));
    this.ftpListModel = new DefaultListModel();
    for(String s : list){
        this.ftpListModel.addElement(s);
    }
    this.ftpJList = new JList(ftpListModel);
    final JScrollPane wsp = new JScrollPane(this.ftpJList);
    wsp.setBorder(new TitledBorder(new WebBorder(),"ftpsrv.itra.de"));
    this.add(wsp, BorderLayout.CENTER);
} 
```

}

**将添加 FtpPanel 的 FtpTabPanel**

```
public class FtpTabPanel extends JPanel{
public FtpPanel ftpPanel;
public FtpTabPanel() {
    createComponents();
    layoutComponents();
    initializeComponents();
}

private void createComponents() {
    ftpPanel = new FtpPanel(new String[]{"You aren't Connected"});
}
private void layoutComponents() {
    setLayout(new BorderLayout());
    add(ftpPanel,   BorderLayout.WEST);
} 
```

}

**从 Jlist 添加和删除**

```
 addFileToJlist(listOfFtpFile ){
   SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                if(listOfFtpFile !=null)
                    ftpTabPanel.ftpPanel.ftpListModel.clear();
                    ftpTabPanel.ftpPanel.updateUI();
                    for(String s : listOfFtpFile){
                       ftpTabPanel.ftpPanel.ftpListModel.addElement(s);
                        ftpTabPanel.ftpPanel.ftpWebList.validate();
                        ftpTabPanel.ftpPanel.updateUI();
                    }
                ftpTabPanel.ftpPanel.ftpWebList.revalidate();
                panel.updateUI();
            }
        });
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:06:37.250

这是一个简单的工作示例（与您的几乎相同，但没有不必要的更新）：

```
public static void main ( String[] args )
{
    JFrame frame = new JFrame ();

    final DefaultListModel model = new DefaultListModel ();

    JList list = new JList ( model );
    frame.add ( new JScrollPane ( list ) );

    list.addMouseListener ( new MouseAdapter ()
    {
        public void mousePressed ( MouseEvent e )
        {
            model.clear ();
            Random random = new Random ();
            int max = random.nextInt ( 10 );
            for ( int i = 0; i <= max; i++ )
            {
                model.addElement ( "" + random.nextInt ( 100 ) );
            }
        }
    } );

    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.setSize ( 200, 400 );
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );
} 
```

而且我在您的示例中并没有真正看到任何问题（除了不必要的验证和 updateUI 调用）。似乎问题出在其他地方...

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-27T09:38:08.893

我最近遇到了类似的问题。像这样简单地解决它：

（向 Jlist 添加元素） Jlist.setVisible(false); Jlist.setVisible(true);

只有我工作的方式，不知道为什么。

# php - 如何将 Perl 程序中的值传递给使用 PHP 的 WebServer？

> ID：10349269
> 
> 赞同：0
> 
> 时间：2012-04-27T10:49:56.437
> 
> 标签：php, perl

我想知道 Perl 程序员如何将 GET/POST 值传递给 php 程序

Perl 程序(PerlVALUE) ---->>>> PHP(转换为 GET/POST ---->>>> [http://www.example.com?name=PerlVALUE&lastname=PerlVALUE](http://www.example.com?name=PerlVALUE&lastname=PerlVALUE)

有没有人知道怎么弄啊。。。谢谢。。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T11:20:20.147

这是一种方法：

```
#!/usr/bin/perl
use strict;
use warnings;
use LWP::UserAgent;

my $agent = LWP::UserAgent->new();

$agent->post("http://www.example.com", {
    name => "PerlVALUE",
    lastname => "PerlVALUE"
}); 
```

# c - C将一个char数组拆分为不同的变量

> ID：10349270
> 
> 赞同：18
> 
> 时间：2012-04-27T10:50:01.357
> 
> 标签：c, arrays, string, char

在 C 中，如何通过分隔符分隔 char 数组？还是操作字符串更好？有哪些好的 C 字符操作函数？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-27T13:58:27.773

```
#include<string.h>
#include<stdio.h>
int main()
{
    char input[16] = "abc,d";
    char *p;
    p = strtok(input, ",");

    if(p)
    {
    printf("%s\n", p);
    }
    p = strtok(NULL, ",");

    if(p)
           printf("%s\n", p);
    return 0;
} 
```

你可以看看这个程序。首先你应该使用 strtok(input, ",").input 是你想要拆分的字符串。然后你使用 strtok(NULL, ",")。如果返回值为 true ，则可以打印另一组。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-27T10:51:37.507

看看**[strtok()](http://www.kernel.org/doc/man-pages/online/pages/man3/strtok.3.html)。**strtok() 不是可重入函数。

[**strtok_r()**](http://www.kernel.org/doc/man-pages/online/pages/man3/strtok.3.html)是 strtok() 的可重入版本。这是手册中的示例程序：

```
 #include <stdio.h>
   #include <stdlib.h>
   #include <string.h>

   int main(int argc, char *argv[])
   {
       char *str1, *str2, *token, *subtoken;
       char *saveptr1, *saveptr2;
       int j;

       if (argc != 4) {
           fprintf(stderr, "Usage: %s string delim subdelim\n",argv[0]);
           exit(EXIT_FAILURE);
       }

       for (j = 1, str1 = argv[1]; ; j++, str1 = NULL) {
           token = strtok_r(str1, argv[2], &saveptr1);
           if (token == NULL)
               break;
           printf("%d: %s\n", j, token);

           for (str2 = token; ; str2 = NULL) {
               subtoken = strtok_r(str2, argv[3], &saveptr2);
               if (subtoken == NULL)
                   break;
               printf(" --> %s\n", subtoken);
           }
       }

       exit(EXIT_SUCCESS);
   } 
```

对子标记进行操作的示例运行，该子标记是从基于不同分隔符的前一个标记获得的：

```
$ ./a.out hello:word:bye=abc:def:ghi = :

1: hello:word:bye
 --> hello
 --> word
 --> bye
2: abc:def:ghi
 --> abc
 --> def
 --> ghi 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T10:54:10.297

一种选择是 strtok

例子：

```
char name[20];
//pretend name is set to the value "My name" 
```

您想在两个单词之间的空格处拆分它

```
split=strtok(name," ");

while(split != NULL)
{
    word=split;
    split=strtok(NULL," ");
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-27T10:58:35.553

您可以简单地用 NULL 字符替换分隔符，并将新创建的 NULL 字符之后的地址存储在新的 char* 指针中：

```
char* input = "asdf|qwer"
char* parts[10];
int partcount = 0;

parts[partcount++] = input;

char* ptr = input;
while(*ptr) { //check if the string is over
    if(*ptr == '|') {
        *ptr = 0;
        parts[partcount++] = ptr + 1;
    }
    ptr++;
} 
```

请注意，如果输入字符串包含超过 9 个分隔字符，则此代码当然不起作用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-05T15:41:19.853

我想出了这个。这似乎对我最有效。它转换一串数字并将其拆分为整数数组：

```
void splitInput(int arr[], int sizeArr, char num[])
{
    for(int i = 0; i < sizeArr; i++)
        // We are subtracting 48 because the numbers in ASCII starts at 48.
        arr[i] = (int)num[i] - 48;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-29T17:23:11.347

我就是这样做的。

```
void SplitBufferToArray(char *buffer, char * delim, char ** Output) {

    int partcount = 0;
    Output[partcount++] = buffer;

    char* ptr = buffer;
    while (ptr != 0) { //check if the string is over
        ptr = strstr(ptr, delim);
        if (ptr != NULL) {
            *ptr = 0;
            Output[partcount++] = ptr + strlen(delim);
            ptr = ptr + strlen(delim);
        }

    }
    Output[partcount++] = NULL;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-10T18:09:30.753

此外，您可以`sscanf`用于一些**非常简单**的场景，例如当您确切知道字符串有多少*部分*以及它由什么组成时。您还可以即时解析参数。**不要**将其用于用户输入，因为该函数不会报告转换错误。

例子：

```
char text[] = "1:22:300:4444:-5";
int i1, i2, i3, i4, i5;
sscanf(text, "%d:%d:%d:%d:%d", &i1, &i2, &i3, &i4, &i5);
printf("%d, %d, %d, %d, %d", i1, i2, i3, i4, i5); 
```

输出：

> 1、22、300、4444、-5

对于任何更高级的东西，[strtok()](https://www.tutorialspoint.com/c_standard_library/c_function_strtok.htm)和[strtok_r()](https://linux.die.net/man/3/strtok_r)是您的最佳选择，如其他答案中所述。

# apache - 选项卡之间的会话 - apache loadbalancer

> ID：10349271
> 
> 赞同：0
> 
> 时间：2012-04-27T10:50:02.180
> 
> 标签：apache, tomcat, load-balancing, session-cookies

我有 apache 负载平衡器（标头、cookie）和两个 apache tomcat 后端服务器。可以设置 apache 来处理浏览器选项卡之间的会话吗？在这一刻，我可以通过我的 LB 登录到我的后端，但是当我尝试在其他选项卡中打开这个相同的链接（在 URL 中没有 /myapp）时，我得到了后端 tomcat hello 页面（为什么没有我的应用程序？）我怎样才能实现会话分享？或者至少如何重新配置​​我的 LB 或后端以在第二个选项卡而不是 hello 页面中显示我的 webapp？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-26T14:41:20.407

研究粘性会议。这是来自我的 apache 配置文件。

```
Header add Set-Cookie "ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/" env=BALANCER_ROUTE_CHANGED
<Proxy balancer://mycluster>
    BalancerMember http://ip1:8080 route=1
    BalancerMember http://ip2:8080 route=2
    ProxySet stickysession=ROUTEID
</Proxy>

ProxyPass /assets !
ProxyPass / balancer://mycluster/
ProxyPassReverse / balancer://mycluster/ 
```

# linux - 将多个 SVG 图像转换为 SVG 字体文件的脚本

> ID：10349273
> 
> 赞同：13
> 
> 时间：2012-04-27T10:50:11.323
> 
> 标签：linux, fonts, svg, converter, svg-font

我正在寻找将多个 SVG 图像（每个包含一个字母）转换为 SVG 字体文件的脚本。

这个网站基本上是一样的：http: [//keyamoon.com/icomoon/app/](http://keyamoon.com/icomoon/app/)

但我更喜欢一个脚本（最好是 Linux），所以我们可以将它集成到我们的构建过程中。

有任何想法吗？或者我可以开始的代码？

输入应该是一个 SVG 图像列表 + 一个映射文件，输出应该是一个包含所有 SVG 图像作为 SVG 字体的文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-08T01:32:22.327

仅供参考，两个人刚刚发布了一个项目来做这件事：

[https://github.com/FontCustom/fontcustom](https://github.com/FontCustom/fontcustom)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T14:04:02.007

我编写了一个命令行应用程序，它从一组 SVG 文件创建 SVG 字体，反之亦然：[https ://github.com/madeyourday/SVG-Icon-Font-Generator](https://github.com/madeyourday/SVG-Icon-Font-Generator)

它是用 PHP 编写的，目前处于测试阶段。

但它没有使用映射文件，映射是基于文件名的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T00:38:02.083

[**Apache Batik**](http://xmlgraphics.apache.org/batik/)项目有一个[SVG 字体](http://xmlgraphics.apache.org/batik/tools/font-converter.html)转换器，这可能是您的一个选择。

从他们的字体转换器示例中：

```
java -jar batik-ttf2svg.jar /usr/home/myFont.ttf -l 48 -h 57 -id MySVGFont -o mySVGFont.svg -testcard 
```

# html - 记住jsp文件中的下拉选择

> ID：10349275
> 
> 赞同：0
> 
> 时间：2012-04-27T10:50:20.103
> 
> 标签：html, jsp

我在 jsp 文件中有一个下拉列表

```
<select name="PID" id="PID" style="min-width: 100px;" >

<% 
for(somelist pm : List) { %>
<option value="<%=pm.getsmthing()%>" selected><%=pm.getName()%></option>
<option  value="-1">Select a Property</option> 
```

这是在一个表格里面。我想在提交表单后记住选定的项目名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:13:13.510

Just print `selected` conditionally whenever the associated request parameter has exactly the same value.

```
<option value="<%=pm.getsmthing()%> <%=(pm.getsmthing().equals(request.getParameter("PID")) ? "selected" : "")%>><%=pm.getName()%></option> 
```

Do **not** store it in the session. It would affect *all* pages in all browser tabs/windows in the same session which may result in "wtf?" experiences of the enduser.

* * *

**Unrelated** to the concrete problem, that's pretty an [oldschool](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202) way of writing JSPs. Learn [JSTL](https://stackoverflow.com/tags/jstl/info) and [EL](https://stackoverflow.com/tags/el/info). Your code would then look like this:

```
<select name="PID" id="PID" style="min-width: 100px;">
  <c:forEach items="${List}" var="pm">
    <option value="${pm.smthing}" ${pm.smthing == param.PID ? 'selected' : ''}>${pm.name}</option>
    <option value="-1">Select a Property</option>
  </c:forEach>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:53:20.773

将您选择的值添加到 HTTP 会话并在您需要显示表单时随时检索它。

# html - 如何将 Web 表单元素放在新行上？

> ID：10349276
> 
> 赞同：12
> 
> 时间：2012-04-27T10:50:24.797
> 
> 标签：html, css

如何在新行上放置“输入”元素？在上面的例子中，所有元素都是按顺序放置的，即lable->input->lable->input等。

```
/* ----------- My Form ----------- */
.myform{
    margin:0 auto;
    padding:14px;
}
#stylized{
    border-width:1px;
    border-style:solid;
    border-color:#b7ddf2;
    background:#ebf4fb;
}
#stylized h1 {
    font-size:14px;
    font-weight:bold;
    margin-bottom:8px;
    border-width:1px;
    border-style:solid;
    border-color:#b7ddf2;
    padding-bottom:10px;
}
#stylized label{
    display:block;
    font-size:11px;
    font-weight:bold;
    text-align:right;
    float:left;
}
#stylized input{
    float:left;
    font-size:11px;
    padding:4px 2px;
    border:solid 1px #aacfe4;
    width:70px;
    margin:2px 0 20px 10px;
}
/* --------- End of Form --------- */

    <div id="stylized" class="myform">
        <form id="form" name="form" method="post" action="index.html">
        <h1>Data</h1>
        <label>Name: </label>
        <input type="text" name="name" id="name"/>
        <label>Email: </label>
        <input type="text" name="email" id="email"/>
        <label>Password: </label>
        <input type="text" name="password" id="password"/>
        </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-27T10:55:06.340

```
#stylized input{
    display: block;
    font-size:11px;
    padding:4px 2px;
    border:solid 1px #aacfe4;
    width:70px;
    margin:2px 0 20px 10px;
} 
```

这会将每个输入放在一个新行上。- 删除“浮动：左”，添加“显示：块”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-23T19:23:01.977

我将它们放在列表标签​​下，它可以在不改变样式的情况下工作，并且使用中断标签已过时

```
<ul>
   <li><input type = "text" name = "selection" value = "text1" /> Text1</li>
   <li><input type = "text" name = "selection" value = "text2" /> Text2</li>
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:01:10.820

我的猜测是 user1359163 的答案会有所帮助，尽管您可能想知道原因：使用`float`有效地将元素从文档的正常流程中移除，有点像更改`z-index`，允许元素流过 div 边框、标签、跨度和...... “忽略”`clear`样式。

该元素的行为就像它漂浮在其他元素上一样，因此在这方面，它与所有其他不浮动的元素的左侧和右侧保持距离。我不是 CSS 专家，但这种看待它的方式帮助我解决了我在使用`float`,`clear`和`z-index`样式时遇到的布局混乱的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T10:53:27.663

您是否尝试过任何简单的事情

```
<label>Name: </label><br>
        <input type="text" name="name" id="name"/> 
        <label>Email: </label><br>
        <input type="text" name="email" id="email"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T10:56:11.060

这是[JsFiddle](http://jsfiddle.net/pYXf5/1/) ......

编辑 ：

```
#stylized label{
    font-size:11px;
    font-weight:bold;
    text-align:right;
}
#stylized input{
    display:block;
    font-size:11px;
    padding:4px 2px;
    border:solid 1px #aacfe4;
    width:70px;
    margin:2px 0 20px 10px;
}​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T10:56:58.343

选择具有足够空间容纳所有元素的浮动布局时，您可以防止换行。

尝试这个：

**示例** [http://jsfiddle.net/8yZff/](http://jsfiddle.net/8yZff/)

```
#stylized label{
    font-size:11px;
    font-weight:bold;
    text-align:right;
}
#stylized input{
    font-size:11px;
    padding:4px 2px;
    border:solid 1px #aacfe4;
    width:70px;
    margin:2px 0 20px 10px;
    display: block;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T14:17:42.913

对于表格数据，例如标签/字段对数组，请使用`table`. 你会发现造型更容易，非造型外观更好。

# android - zxing android 集成在某些设备上崩溃，以下类无法实例化： - com.google.zxing.client.android.ViewfinderView

> ID：10349279
> 
> 赞同：2
> 
> 时间：2012-04-27T10:50:43.283
> 
> 标签：android, barcode, zxing

我已将 Zxing 集成为库并在我的应用程序中使用。我打电话来

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");     
intent.putExtra("SCAN_FORMATS", "CODE_39");
intent.putExtra("SAVE_HISTORY", false);
startActivityForResult(intent, 0); 
```

它适用于大多数设备，但适用于 HTC Desire、GT-I9000 等某些设备。我收到以下错误。

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.Armacell.login/com.google.zxing.client.android.CaptureActivity}：android.view.InflateException：二进制 XML 文件第 25 行：膨胀类 com.google 时出错.zxing.client.android.ViewfinderView 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 在 android.app.ActivityThread.access$2300(ActivityThread. java:125) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:123) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) ) 在 android.app.ActivityThread.main(ActivityThread.java:4627) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:521) 在 com。android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629) at dalvik.system.NativeStart.main(Native Method) 引起作者：android.view.InflateException：二进制 XML 文件第 25 行：在 android.view.LayoutInflater.createView(LayoutInflater.java:513) 在 android.view.LayoutInflater 处为类 com.google.zxing.client.android.ViewfinderView 充气时出错.createViewFromTag(LayoutInflater.java:565) 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:618) 在 android.view.LayoutInflater.inflate(LayoutInflater.java:407) 在 android.view.LayoutInflater.inflate(LayoutInflater. java:320) 在 android.app.Activity 的 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:200) 的 android.view.LayoutInflater.inflate(LayoutInflater.java:276)。setContentView(Activity.java:1647) 在 com.google.zxing.client.android.CaptureActivity.onCreate(CaptureActivity.java:160) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 在 android.app.ActivityThread .performLaunchActivity(ActivityThread.java:2627) ... 11 更多原因： com.google.zxing.client.android.ViewfinderView 的 java.lang.reflect.InvocationTargetException.(ViewfinderView.java:62) 在 java.lang.reflect .Constructor.constructNative(Native Method) at java.lang.reflect.Constructor.newInstance(Constructor.java:446) at android.view.LayoutInflater.createView(LayoutInflater.java:500) ... 21 更多原因：android。 content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f070012 a=-1 r=0x7f070012} at android.content.res.Resources。loadDrawable(Resources.java:1681) 在 android.content.res.TypedArray.getDrawable(TypedArray.java:601) 在 android.view.View.(View.java:1895) 在 android.view.View.(View.java :1844) ... 25 更多

我也在 zxing 源中的 Capture.xml 文件上收到此警告-“**无法实例化以下类：-com.google.zxing.client.android.ViewfinderView** ”

在这种情况下，我请求所有人提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:44:11.603

这都是错误的——你在你的应用程序中包含了我们的 Android 代码。这不是必需的，不鼓励的，而且你也没有正确地做到这一点。请删除您复制`android/`到项目中的所有代码。

（事实上​​，我们强烈建议您不要像以前那样复制和粘贴。）

相反，您应该只使用代码`android-integration`而不是其他任何东西。您甚至没有真正使用积分器代码！

请重新开始：[http ://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:24:58.493

我有自己的解决方案。

问题是关于文化的。我已经更改了默认的“值”。将“values-de”变为“values”。这会使 Zxing 在具有德国文化的设备上崩溃。

我不知道它为什么会起作用，但现在我已将英语设为默认值，并且它现在可以正常工作了 :)

# perl - PostgreSQL、perl 和 dojo 特殊字符问题（æ、ø 和 å）

> ID：10349280
> 
> 赞同：0
> 
> 时间：2012-04-27T10:50:44.590
> 
> 标签：perl, postgresql, character-encoding, dojo, special-characters

我有一个使用 PostgreSQL 数据库用 perl 和 dojo 制作的网页。我必须在数据库中搜索可用的人，因为我来自丹麦，所以字母**æ、ø 和 å**必须在搜索中可用。我认为这是使用 UTF8 时的标准，当我通常在 php 上通过 mysql 编程时，我认为这不会那么难。

我已经正确地完成了我所知道的每一个技巧，将这个 search_word 转换为正确的编码，这样我就可以在 postgre sql 数据库中搜索带有æ、ø 和 å 的正确名称......但它仍然失败。

我有我的 perl 代码进行提取，但是这个提取返回 0 行，当我在 psql 终端中插入相同的命令时，我得到 46 行返回（从“tail -f log 终端”复制 STDERR 语句并将其插入到另一个连接的终端中通过 psql 命令到数据库）... perl 代码是：

```
sub dbSearchPersons {
  my $search_word = escapeSql($_[0]);
  $search_word = Encode::decode_utf8($search_word);

  $statement = "SELECT id,name,initials,email FROM person WHERE name ilike '\%".$search_word."\%' OR email ilike '\%".$search_word."\%' OR initials ilike '\%".$search_word."\%' ORDER BY name ASC";
  $sth = $dbh->prepare($statement);
  $num_rows = $sth->execute();

  print STDERR "Statement: " . $statement;
  if($num_rows > 0){
    $persons = $dbh->selectall_hashref($statement,'id');
  }

  dbFinish($sth);
  webdie($DBI::errstr) if($DBI::errstr);
} 
```

如您所见，我将 SQL 语句写入 STDERR 并输出以下内容：

```
[Fri Apr 27 11:24:26 2012] [error] [client 10.254.0.1] Statement: SELECT id,name,initials,email FROM person WHERE name ilike '%Jørgen%' OR email ilike '%Jørgen%' OR initials ilike '%Jørgen%' ORDER BY name ASC, referer: https://xx.xxx.xxx.xx/cgi-bin/users.cgi 
```

我正确编写的 sql（我可以通过上面的终端输出看到它），如果我从终端复制并粘贴语句并将其直接插入 psql 终端，我会得到 46 行，因为我应该返回......但是perl 仍然不会返回任何行。

我不明白？当格式化字符串以显示“ø”而不是“Ã¸”（因为 perl 将 UTF8 编码转换为，从通过 dojo.xhr.post 发送的“J%C3%B8rgen”），我应该不能使用它在 SQL 语句中？是不是因为 psql 数据库可以有某种编码，我必须以某种方式考虑到这一点？还是可能完全不同？

希望可以有人帮帮我。我已经为这个问题苦苦挣扎了两天了，因为事情看起来应该如此，但不工作我有点难过：/

问候， 托尔·阿斯特鲁普·佩德森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:56:10.000

你可能忘记了[`pg_enable_utf8`](http://p3rl.org/DBD%3a%3aPg#pg_enable_utf8-boolean-)。然后数据库接口将向您返回 Perl 字符数据。

```
$ createdb -e -E UTF-8 -l en_US.UTF-8 -T template0 so10349280
CREATE DATABASE so10349280 ENCODING 'UTF-8' TEMPLATE template0 LC_COLLATE 'en_US.UTF-8' LC_CTYPE 'en_US.UTF-8';

$ echo 'create table person (id int, name varchar, initials varchar, email varchar)'|psql so10349280
CREATE TABLE

$ echo "insert into person (id, name) values (1, 'Jørgensen')"|psql so10349280
INSERT 0 1

$ echo 'select * from person'|psql so10349280
 id |   name    | initials | email
----+-----------+----------+-------
  1 | Jørgensen |          |

$ perl -Mutf8 -Mstrictures -MDBI -MDevel::Peek -E'
    my $dbh = DBI->connect(
        "DBI:Pg:dbname=so10349280", $ENV{LOGNAME}, "", { RaiseError => 1, AutoCommit => 1, pg_enable_utf8 => 1}
    );
    my $r = $dbh->selectall_hashref("select * from person where name = ?", "id", undef, "Jørgensen");
    Dump $r->{1}{name};
'
SV = PV(0x836e20) at 0xa58dc8
  REFCNT = 1
  FLAGS = (POK,pPOK,UTF8)
  PV = 0xa5a000 "J\303\270rgensen"\0 [UTF8 "J\x{f8}rgensen"]
  CUR = 10
  LEN = 16 
```

您说的不是很清楚，我认为您最终打算将字符数据作为 JSON 发送以用于 Dojo。您需要将它们编码为 UTF-8 八位字节；各种 JSON 库会自动为您处理，无需`Encode`手动调用函数。

# c# - XAudio2 OnVoiceProcessingPassStart 回调口吃播放

> ID：10349281
> 
> 赞同：2
> 
> 时间：2012-04-27T10:51:01.167
> 
> 标签：c#, audio, callback, slimdx, xaudio2

我正在将 XAudio2 与 SlimDX 一起使用，并且我设法让它在循环中播放一个短（约 8 秒）的 wav 文件，但是当它接近第一个循环的结尾时，音频开始口吃并且口吃继续到下一个循环，随着时间的推移越来越糟。

我打开了调试配置文件，在输出窗口中出现以下错误：

```
XAUDIO2: WARNING: Spent 5.63ms in the OnVoiceProcessingPassStart callback
XAUDIO2: WARNING: Spent 5.60ms in the OnVoiceProcessingPassStart callback
XAUDIO2: WARNING: Spent 5.59ms in the OnVoiceProcessingPassStart callback
XAUDIO2: WARNING: Spent 5.69ms in the OnVoiceProcessingPassStart callback 
```

这些与口吃发生的时间相吻合。我在这些回调中什么也没做（我什至没有在事件中添加任何东西），但它正在放慢速度。我在下面添加了我的代码以供参考：

用于保存数据流和缓冲区的 Wave 类：

```
public class Wave
    {
        public WaveStream Data { get; private set; }

        public AudioBuffer Buffer { get; private set; }

        public Wave(string path, bool repeating)
        {
            Data = new WaveStream(path);
            Buffer = new AudioBuffer();
            Buffer.AudioBytes = (int)Data.Length;
            Buffer.AudioData = Data;
            if (repeating)
            {
                Buffer.Flags = BufferFlags.EndOfStream;
            }
            else
            {
                Buffer.Flags = BufferFlags.None;
            }
            Buffer.PlayBegin = 0;
            Buffer.PlayLength = 0;
            Buffer.LoopBegin = 0;
            Buffer.LoopCount = 100;
            Buffer.LoopLength = 0;
        }
    } 
```

用于保存 XAudio 引擎和声音的声音类，并涵盖添加/删除声音：

```
public class Sound
    {
        private XAudio2 audio;
        private MasteringVoice master;
        private List<SourceVoice> sources;

        public Sound()
        {
            audio = new XAudio2(XAudio2Flags.DebugEngine, ProcessorSpecifier.AnyProcessor);
            master = new MasteringVoice(audio);
            sources = new List<SourceVoice>();
        }

        public void AddSound(Wave wave)
        {
            SlimDX.Multimedia.WaveFormat format = wave.Data.Format;
            SourceVoice source = new SourceVoice(audio, format);
            source.Start();
            source.SubmitSourceBuffer(wave.Buffer);
            sources.Add(source);
        }
    } 
```

为了运行它，我使用：

```
Wave wave = new Wave("Music2/untitled.wav", true);
            Sound sound = new Sound();
            sound.AddSound(wave); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:10:09.117

比较尴尬的是，这是我自己的错。我有一个 D3D 缓冲区被重新创建和销毁，我忘记更改为动态缓冲区的每一帧。这导致我的内存使用量膨胀到几 GB，这意味着可能没有足够的空间来分配音乐。

一旦我消除了内存泄漏，音乐听起来就很好。

我不确定 XAudio2 异常是否措辞得当......

# jquery - Twitter Bootstrap 隐藏 css 类和 jQuery

> ID：10349285
> 
> 赞同：36
> 
> 时间：2012-04-27T10:51:24.230
> 
> 标签：jquery, twitter-bootstrap

我正在使用 hide css 类在页面加载时隐藏一个按钮。

问题是，当我尝试显示之前用 jQuery 隐藏的按钮时，按钮变小了。

（当我使用 jQuery 隐藏然后显示按钮时，同样的事情不会发生）

感谢您的帮助。

编辑：隐藏类就是这样：

```
.hide {
    display: none;
} 
```

我的按钮：

```
<a class="btn hide" id="buttonEditComment" href="javascript:void()"><i class="icon-comment"></i> Edit comment</a> 
```

我用来显示按钮的Javascript：

```
$("#buttonEditComment").toggle(); 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-28T09:23:12.030

正如[dfsq](https://stackoverflow.com/users/949476/dfsq)所说，我只需要使用`removeClass("hide")`而不是`toggle()`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-02-14T10:15:03.897

如果一个元素具有引导程序的“隐藏”类，并且您想以某种滑动效果显示它，例如`.slideDown()`，您可以像这样欺骗引导程序：

```
$('#hiddenElement').hide().removeClass('hide').slideDown('fast') 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-27T20:37:13.367

如果您只想显示按钮，我同意[dfsq 。](https://stackoverflow.com/users/949476/dfsq)但是，如果您想在隐藏和显示按钮之间切换，则使用起来更容易：

```
$("#buttonEditComment").toggleClass("hide"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-20T19:11:19.863

这就是我对这些情况所做的：

我不使用类“隐藏”来启动 html 元素，但我输入了 style="display: none"。

这是因为引导 jquery 修改样式属性而不是要隐藏/取消隐藏的类。

例子：

```
<button type="button" id="btn_cancel" class="btn default" style="display: none">Cancel</button> 
```

或者

```
<button type="button" id="btn_cancel" class="btn default display-hide">Cancel</button> 
```

稍后，您可以运行以下所有可行的操作：

```
$('#btn_cancel').toggle() // toggle between hide/unhide
$('#btn_cancel').hide()
$('#btn_cancel').show() 
```

你也可以使用 Twitter Bootstrap 'display-hide' 类，它也适用于 jQuery IU .toggle() 方法。

# objective-c - Objective C 中的“CG_INLINE CGRect”定义是什么？

> ID：10349296
> 
> 赞同：0
> 
> 时间：2012-04-27T10:52:08.390
> 
> 标签：objective-c, ios, structure, parameter-passing, cgrect

Objective C 中调用的以下结构是什么，

```
CG_INLINE CGRect
CGRectMake(CGFloat x, CGFloat y, CGFloat width, CGFloat height)
{
  CGRect rect;
  rect.origin.x = x; rect.origin.y = y;
  rect.size.width = width; rect.size.height = height;
  return rect;
} 
```

我想创建自己的定义，以创建一个包含我传递的多个参数的对象。目前我在一个类中使用一个静态方法，它需要多个参数并返回一个对象。但是 CGRectMake 的这种语法是我可以使用的完美解决方案。Objective C 语法中实际调用的结构是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T10:55:30.853

`CGRectMake()`是一个函数。函数是 C 语言的特性，不是 Objective-C 独有的。因此，它们在 Objective-C 中没有特殊的名称。它们被称为 C 函数。

如果您要询问这种看似神秘的语法：

```
CG_INLINE CGRect
CGRectMake(CGFloat x, CGFloat y, CGFloat width, CGFloat height) 
```

1.  `CG_INLINE`是一个特殊的标记，它只是将函数声明为内联。`CG_INLINE`你可以在这个问题中找到描述：

    [CG_INLINE 是做什么的？](https://stackoverflow.com/questions/6207440/what-does-cg-inline-do)

2.  `CGRect`是返回类型。后面的换行符只是空格；在 C 语言中，在函数定义中的返回类型之后换行是一种常见的代码格式约定。

3.  `CGRectMake`是函数名。

4.  接下来是它的参数列表和函数体。

如果你想创建一个函数，你可以将它的定义放在你的文件中，并在`.m`文件中加上相应的前向声明`.h`。

# javascript - 将变量参数传递给函数 - javascript

> ID：10349298
> 
> 赞同：3
> 
> 时间：2012-04-27T10:52:17.257
> 
> 标签：javascript, function, arguments

我定义了一个函数，它可以接受任意数量的参数，但没有一个是必需的：

```
function MyFunction() { //can take 0, 1, 1000, 10000, n arguments
//function code
} 
```

现在我想编写另一个调用 MyFunction 的函数，每次使用可变数量的参数：

```
function Caller(n) {
var simple_var = "abc";
MyFunction() //how can i pass simple_var to MyFunction n times?
} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T10:54:36.327

`Function.apply`可用于将参数数组传递给函数，就好像数组中的每个元素都作为单独的参数传递一样：

```
function Caller(n) {
   var simple_var = "abc";

   // create an array with "n" copies of the var
   var args = [];
   for (var i = 0; i < n; ++i) {
      args.push(simple_var);
   }

   // use Function.apply to send that array to "MyFunction"
   MyFunction.apply(this, args);
} 
```

值得一提的是，webkit 上[的参数长度限制为 65536](https://bugs.webkit.org/show_bug.cgi?id=80797)。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-27T11:02:08.597

您可以使用 eval （我知道， eval 是邪恶的）。

在 for 循环构造字符串中：

```
var myCall = "Myfunction(abc, abc, abc)"; 
```

然后将其传递给 eval

```
function Caller(n) {
var simple_var = "abc";
  eval(myCall);
} 
```

# extjs4.1 - 带有 extjs 4.1 问题的日期格式

> ID：10349299
> 
> 赞同：1
> 
> 时间：2012-04-27T10:52:20.637
> 
> 标签：extjs4.1

在我的模型（Ext.data.Model）中，我具有以下属性

```
{
    mapping:'Created',
    name:'Created',
    type: 'date',
    format:'d/m/Y'
}, 
```

在我的表格上，我有以下字段

```
 {
                        xtype:'datefield',
                        name:'Created',
                        fieldLabel:' Date',
                        format:'d/m/Y',
                        width: 350
                    }, 
```

如果我在选择器“01/04/2012”中选择以下日期（我在英国，2012 年 4 月 1 日）

我在 firebug json 帖子“2012-01-04T00:00:00”（2012 年 1 月 4 日）中得到以下信息

我如何确保正确的区域通过

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:48:41.720

在您的模型中定义 Ext.data.Field。查看 API 文档，Ext.data.Field 没有配置`format`，但是`dateFormat`.

尝试这个

```
{
    name:'Created',
    type: 'date',
    dateFormat:'d/m/Y'
}, 
```

`mapping`如果来自后端的数据与您想在模型中使用的名称不同，那么您只需要。

顺便说一句：从 ExtJS 4.1.3 开始还有两个新的配置项：`dateReadFormat`以及`dateWriteFormat`为读取器和写入器定义不同的格式。但是如果你定义`dateFormat`这对两者来说都是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:27:42.440

在表单字段上，您需要额外的属性 submitFormat：

```
{
    xtype:'datefield',
    name:'Created',
    fieldLabel:' Date',
    format:'d/m/Y',
    width: 350,
    submitFormat: 'd/m/Y'
} 
```

# sql-server - 将时间戳数据类型更改为 rowversion

> ID：10349301
> 
> 赞同：3
> 
> 时间：2012-04-27T10:52:30.823
> 
> 标签：sql-server, sql-server-2008, tsql

我不确定是否有必要。我有一个 sql server 2008 数据库，其中所有表都有一个时间戳列。是否最好将时间戳数据类型更改为 rowversion，以便可以轻松升级到未来的 sql server 版本？如果是这样，在不重新创建表的情况下将所有时间戳列更改为 rowversion 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:03:55.253

随意将脚本更改为 show`ROWVERSION`而不是`TIMESTAMP`，但尝试对表格进行任何更改是没有意义的。即使在 SQL Server 2012 中，虽然他们很久以前就发誓要消除令人困惑的名称，即使您创建这样的表：

```
USE tempdb;
GO
CREATE TABLE dbo.foo
(
  bar INT,
  rv ROWVERSION
); 
```

目录视图和内部的所有其他内容仍将其视为 TIMESTAMP：

```
SELECT c.name, [type] = TYPE_NAME(c.system_type_id)
  FROM sys.columns AS c
  WHERE [object_id] = OBJECT_ID('dbo.foo'); 
```

结果：

```
name type
---- ---------
foo  int
rv   timestamp 
```

所以我真的不认为你（或任何人）可以做任何事情来更好地为未来的版本做好准备 - 微软将有*很多*客户和你在同一条船上，这可能就是你实际上没有的原因看到了快速驱逐的类型。他们可能仍在提出真正消除它的计划（而且他们在选择名称方面做得更好，`DATETIME2`恕我直言除外）。

我最好的建议是确保您的脚本和对象都使用`ROWVERSION`，这样您就不会感到意外。这可能意味着手动编辑您从 Management Studio、目录视图甚至第三方工具生成的脚本。

# git - 如何一次为作者从所有分支中获取日志？

> ID：10349302
> 
> 赞同：263
> 
> 时间：2012-04-27T10:52:35.767
> 
> 标签：git

我需要获取作者所做的所有提交的报告。到目前为止，我有包含以下命令的脚本：

```
git log --pretty=format:"%ad:%an:%d:%B" --date=short --reverse --all --since=2.months.ago --author=Petr 
```

它工作正常。但是，它只报告当前分支的操作​​。是否有任何选项可以记录**来自所有分支**的作者的提交消息，而不仅仅是形成当前分支？

换句话说，git 可以对存储库中的所有提交进行反向排序（按日期时间）序列并从该序列中提取日志信息吗？

**已解决：（**从下面隐藏的评论中复制）

问题是我有一个存储库和两个克隆，可以在两个分支上同时工作。我确实将更改推送到原始存储库，但我忘记将更改提取到克隆存储库。这样，`--all`将其用于克隆存储库时似乎不起作用。

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2012-04-27T13:11:53.313

您的命令是正确的，因为您使用了`--all`从所有分支提供所有提交的开关。要回答您评论中的问题，它也适用于裸存储库。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-12-16T16:01:07.767

而不是`--all`你可能想要使用`--branches`, 因为`--all`还包括`refs/tags`and `refs/remotes`。

# sql - 在sql中按当前日期查找星期的日期范围？

> ID：10349304
> 
> 赞同：12
> 
> 时间：2012-04-27T10:52:39.963
> 
> 标签：sql, sql-server-2008, sql-server-2005

我想在本周找到记录，只需声明当前日期即可。例子：

```
 select datename(dw,getdate())  -- Example today is Friday "27-04-2012" 
```

所以我怎样才能得到日期范围

```
 start on monday "23-04-2012" or sunday "22-04-2012"  As @dateStart to

     end on sunday "29-04-2012"  or saturday "28-04-2012" As @dateEnd 
```

然后我可以选择查询

```
 select * from table where date>=@dateStart  AND date<=@dateEnd 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-27T11:11:26.120

这里有一些有用的命令来获取一周中的每一天

```
SELECT 
    DATEADD(wk, DATEDIFF(wk,0,GETDATE()), -2) SatOfPreviousWeek,
    DATEADD(wk, DATEDIFF(wk,0,GETDATE()), -1) SunOfCurrentWeek,
    DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 0) MondayOfCurrentWeek,
    DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 1) TuesOfCurrentWeek,
    DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 2) WedOfCurrentWeek,
    DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 3) ThursOfCurrentWeek,
    DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 4) FriOfCurrentWeek,
    DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 5) SatOfCurrentWeek 
```

然后，您将在查询中使用这些来获取日期范围：

```
SELECT *
FROM yourTable
WHERE yourDate >= DATEADD(wk, DATEDIFF(wk,0,GETDATE()), -1) -- Sunday
AND yourDate <= DATEADD(wk, DATEDIFF(wk,0,GETDATE()), 5) -- Saturday 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T10:58:02.480

所以你只想要本周的记录？

```
SELECT t.* 
FROM table t 
WHERE t.date >= DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()) / 7 * 7, 0)
AND   t.date <= DATEADD(DAY, DATEDIFF(DAY, -1, GETDATE()), 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:40:55.320

其他人建议的查询可能有效，但您尚未定义“一周”对您来说是什么。根据国家/地区和业务原因，一周可能是周日至周六、周一至周日、周一至周五等。

因此，查找一周的第一天和最后一天的最佳解决方案可能是一个[日历表](https://stackoverflow.com/questions/2459260/calendar-table-week-number-of-month)，您可以在其中为您需要的每个日期预先填充一周的第一天和最后一天。然后，您可以使用一个简单的查询来获取要在查询中使用的正确开始日期和结束日期：

```
select @StartDate = FirstDayOfWeek, @EndDate = LastDayOfWeek
from dbo.Calendar
where BaseDate = @SomeDate 
```

此解决方案还具有以下优点：您可以通过向日历表中添加新列来轻松处理不同的一周定义。

# drop-down-menu - 如何使用grails2.0制作一个具有特定值的选择框

> ID：10349308
> 
> 赞同：1
> 
> 时间：2012-04-27T10:53:10.180
> 
> 标签：drop-down-menu, grails-2.0

我的 gsp 中有以下行

```
<g:select name="platform" from="['Date','Time','Place','Calendar']"/> 
```

我希望在加载页面时自动选择时间选项。

```
<select>
  <option value="Date">Date</option>
  <option value="Time" selected="selected">Time</option>
  <option value="Place">Place</option>
  <option value="Calendar">Calendar</option>
</select> 
```

当我的 gsp 页面被渲染成 html 时，这就是我所需要的。

请帮我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:36:14.157

您可以通过设置 g:select 值来做到这一点

```
<g:select name="platform" from="['Date','Time','Place','Calendar']" value="'Time'"/> 
```

但最好将其绑定到模型。

# c# - 多个启动项目之间的 Visual Studio 延迟？

> ID：10349311
> 
> 赞同：34
> 
> 时间：2012-04-27T10:53:18.233
> 
> 标签：c#, .net, vb.net, visual-studio-2010

如何在解决方案中的启动项目之间添加一些延迟？

![在此处输入图像描述](../Images/ec4f3844d86ea19d691809e2b2521319.png)

我希望在启动 WindowsService 后 2-3 秒后启动客户端项目。

为什么我需要这个？

> WindowsService 运行套接字服务器，客户端运行套接字连接服务器。WindowsService 加载速度比客户端慢，这会导致客户端在连接到尚未运行的服务器时出现异常

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-22T05:58:57.740

我可能会在客户端中添加重试机制。这种方式不仅有助于“从 Visual Studio 启动”的情况 -如果服务器碰巧在真正的客户端连接时重新启动，它*也会有所帮助。*服务器位于更快的机器上这一事实并不意味着服务器永远不需要重新启动，不是吗？

实际上，您可能希望以这样一种方式添加此重试机制，即使服务器*在*连接时重新启动，客户端也可以恢复。当然，这取决于项目在做什么。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-27T13:12:51.337

您可以使用互斥锁来同步两个启动项目。

**计划 1（启动项目 1）：**

```
 namespace ConsoleApplication1
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading;

    class Program1
    {
        private static  bool isNewMutexCreated = true;
        private static Mutex mutex;
        static void Main(string[] args)
        {
            mutex = new Mutex(true, "Global\\ConsoleApplication1", out isNewMutexCreated);
            AppDomain.CurrentDomain.ProcessExit += new EventHandler(CurrentDomain_ProcessExit);
            Console.WriteLine("Application1 executed on " + DateTime.Now.ToString());

            Console.ReadKey();
        }

        static void CurrentDomain_ProcessExit(Object sender, EventArgs e)
        {
            if (isNewMutexCreated)
            {
                Console.WriteLine("Mutex Released");
                mutex.ReleaseMutex();
            }
        }

    }
} 
```

**计划 2（启动项目 2）：**

```
namespace ConsoleApplication2
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.IO;
    using System.Threading;

    class Program2
    {
        static void Main(string[] args)
        {
            Mutex mutex = null;
            Thread.Sleep(5000);

            while (mutex == null)
            {
                try
                {
                    mutex = Mutex.OpenExisting("Global\\ConsoleApplication1");

                }
                catch (Exception)
                {
                    Console.WriteLine("Mutex not found on " + DateTime.Now.ToString());
                    Thread.Sleep(3000);
                }

            }
            Console.WriteLine("Application2 executed on " + DateTime.Now.ToString());
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-22T19:54:21.383

另一个更简单的测试选项是，如果调试器是这样连接的，则延迟客户端：

```
if (System.Diagnostics.Debugger.IsAttached)
{
    System.Threading.Thread.Sleep(2000);
} 
```

如果您愿意，可以将其包装在一个`#if DEBUG`块中。无论如何，我认为这应该是最少的工作量:)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-06-22T06:45:42.393

如果有多个启动项目，**它们的加载顺序**既不是同时也不是随机指定的。![在此处输入图像描述](../Images/6484b98eee3625fcd7f3584936361a2b.png) [http://msdn.microsoft.com/en-us/library/09138bex(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/09138bex(v=vs.90).aspx)

所以，如果你在“窗口服务”之后指定“客户端”，那么它可能会很好。如果您不想获得上面建议的编码方式，那么（仅用于测试）您可以在您想要的延迟后从不同的解决方案手动将“客户端”进程附加到您的解决方案。 [http://msdn.microsoft.com/en-us/library/c6wf8e4z(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/c6wf8e4z(v=vs.100).aspx)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-27T10:57:10.873

如果客户端需要在之后启动，您需要调整您的列表，就像之前启动的那一刻一样！

我还会编写一个“/wait”，如果它在加载应用程序时找到该标志，等待它可能在使用中也很有用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-22T00:11:58.397

您可以将服务器项目设置为单个启动项目，并使用此宏延迟启动服务器和客户端：

```
Sub DebugServerAndClientWithDelay()
    DTE.Debugger.Go(False)
    System.Threading.Thread.Sleep(2000)
    DTE.Windows.Item(Constants.vsWindowKindSolutionExplorer).Activate()
    DTE.ActiveWindow.Object.GetItem("SolutionName\ClientProjectName").Select(vsUISelectionType.vsUISelectionTypeSelect)
    DTE.ExecuteCommand("ClassViewContextMenus.ClassViewProject.Debug.Startnewinstance")
End Sub 
```

您可以在工具栏中添加一个按钮或使用快捷键来运行此宏。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-22T12:56:55.797

只需添加一个程序来检查套接字是否打开。如果套接字打开，请继续执行您的代码并尝试再次检查套接字是否未打开。这样即使以后再启动windows服务也不会有问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-26T16:33:46.847

对于我目前正在处理的 n 层应用程序，我结合了 Romil 建议的 Mutex 方法（代码略有不同但原理相同）并将其封装在一个应用了 [Conditional("DEBUG")] 属性的方法中（所以它得到在发布模式下被剥离）。我们还使用 if (System.Diagnostics.Debugger.IsAttached) {...} 包围互斥逻辑，因为 QA 构建使用调试模式。

我们最初只是使用了一个 Thread.Sleep，它对大多数开发人员的机器都有效，但我们遇到了问题，因为开发人员的计算机速度各不相同，并且随着我们向服务器引导程序添加越来越多的内容，我们不得不不断增加等待时间.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-21T22:13:52.327

为什么不直接将参数传递给设置延迟的客户端应用程序？

```
static void main(string[] args)
{
  // Sleep some time
  int delay;
  if (args.Length > 0 && int.TryParse(args, out delay))
  {
    Thread.Sleep(delay);
  }

  // Initialize client
} 
```

现在，您可以将延迟（以毫秒为单位）添加到项目启动的命令行参数中。

我也同意，如果可能的话，最好从结构上解决您的问题，因此您的客户端和服务器何时启动并不重要。

# php - 如何为多个 XML-Items 构建 xsl:attribute-sets？

> ID：10349315
> 
> 赞同：1
> 
> 时间：2012-04-27T10:53:30.023
> 
> 标签：php, xml, xslt

我想用 XSLTProcessor 转换一个 xml。一切正常，但我遇到了属性集的问题。

我的 XML 看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<exportDelivery>
<job>/* many other tags and data */</job>
<job>/* many other tags and data */</job>
<job>/* many other tags and data */</job>
</exportDelivery> 
```

如果要在新 xml 中使用属性，则必须在 xsl 文件中使用属性集。但是属性集必须在 xsl 的“头”中定义。这意味着在“工作”标签的 foreach 循环之外。转换后，每个作业都获得与第一个作业相同的属性。我做错了什么？这是我使用的属性集：

```
 <xsl:attribute-set name="premium">
    <xsl:attribute name="from">
      <xsl:value-of select="/exportDelivery/jobAdvertisements/startDate"/>
    </xsl:attribute>
    <xsl:attribute name="to">
      <xsl:value-of select="/exportDelivery/jobAdvertisements/endDate"/>
    </xsl:attribute>
  </xsl:attribute-set> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:50:17.437

**除了@mindlandmedia 的正确答案之外，在许多情况下，可以使用所谓的“ [AVT](http://www.w3.org/TR/1999/REC-xslt-19991116#attribute-value-templates) ”表示法**来指定元素及其属性：

```
<job from="{/exportDelivery/jobAdvertisements/startDate}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:08:08.190

属性集用作一次提供多个属性的简写，所以不要写：

```
<xsl:attribute name="border">5</xsl:attribute>
<xsl:attribute name="cellpadding">15</xsl:attribute>
<xsl:attribute name="cellspacing">10</xsl:attribute> 
```

每次我们想同时指定所有三个时，可以指定一个属性集在一行中完成

```
<xsl:attribute-set name="set_table">...</xsl:attribute-set>

<table xsl:use-attribute-sets="set_table"> 
```

这些“属性集”只能定义一次。在你的情况下，你不想做这样的事情吗？

```
<job>
  <premium from="blaDate" to="fooDate"/>
</job> 
```

如果是这样，我看不出是什么阻止您在转换过程中插入这些元素：

```
<xsl:template match="job">
  <job>
    <xsl:attribute name="from">
      <xsl:value-of select="/exportDelivery/jobAdvertisements/startDate"/>
    </xsl:attribute>
  </job>
</xsl:template> 
```

也许您需要进一步解释一下，您正在努力实现的目标

# matlab - 如何解决有关 Matlab 中神经网络训练的输出数据大小错误？

> ID：10349316
> 
> 赞同：1
> 
> 时间：2012-04-27T10:53:32.380
> 
> 标签：matlab, neural-network

我有一个包含 (17x127) 数据 (Force) 的输入文件和一个 (3x127) (True Stress) 的目标文件。

我编写了以下代码来训练神经网络：

```
p=Force;
t=T_Stress;

net =newff(minmax(p),[10,1],{'tansig','purelin'},'trainlm');

net.trainParam.lr = .05;        %Learning Rate
net.trainParam.epochs = 300;    %Max Ephocs
net.trainParam.goal = 1e-5;     %Training Goal in Mean Sqared Error
net.trainParam.show = 50;       %# of ephocs in display

[net,tr1] = train(net,p,t);
o1 = sim(net,p) 
```

但是我收到以下错误：

> ？？？在 109 处使用 ==> trainlm 时出错输出数据大小与 net.outputs{2}.size 不匹配。
> 
> ==> network.train 在 107 处出错
> 
> [net,tr] = feval(net.trainFcn,net,X,T,Xi,Ai,EW,net.trainParam);

如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:01:30.580

尝试通过在Matlab帮助中寻找“trainlm”给出与“trainlm”训练函数相关的训练参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T14:37:11.247

通过使用参数 [10,1] 调用 newff，您创建了一个神经网络，其中隐藏层有 10 个神经元，输出层有 1 个神经元。这与您正在使用的输出数量不匹配。(3x127) 所以要么改变 newff 调用，要么使用不同的训练数据集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-24T06:38:19.553

如上评论“

> 通过使用参数 [10,1] 调用 newff，您创建了一个神经网络，其中隐藏层有 10 个神经元，输出层有 1 个神经元

" 您将输出层的值保持为 3，因为您有三个目标。命令如下：

```
net =newff(minmax(p),[10,3],{'tansig','purelin'},'trainlm'); 
```

# android - 如何更改我的 android 应用程序的图标

> ID：10349317
> 
> 赞同：1
> 
> 时间：2012-04-27T10:53:49.003
> 
> 标签：android

我想更改我的 android 应用程序的图标。

我的图标名称是“ic_launcher”，我已将“drawable-hdpi”中的默认 ic_launcher 图标替换为具有相同名称“ic_launcher”的新图标，现在我的模拟器显示新图标但我的手机（三星 Glaxy-GT-S5830 ) 不显示这个新图标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:58:08.413

您可以替换项目中的图标文件 drawable-ldpi 文件夹...！

因为三星galaxy gt-s5830分辨率是320x240！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:06:39.400

只需尝试重新启动手机一次并检查。

并且请检查您的手机上是否安装了新的 .apk 文件，并在其中更改了您的图标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:06:59.997

您可以替换所有同名图标。或者您可以放置​​具有不同名称的图标，并将这个新文件（具有正确名称）分配为清单文件中的图标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-23T20:34:23.353

我有同样的问题。我只是做了一个清洁和构建，它起作用了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-23T21:59:42.250

您的手机的屏幕分辨率很可能与模拟器中定义的不同。Android 将选择一个适合其安装设备大小的图标，并根据在包中找到的目录名称来决定。如果您替换了 drawable-hdpi 中的图标，您还应该将其余的 drawable-?dpi 目录中的图标替换为适当大小的等效图标，以便适应不同的像素密度。

# android - ActionbarSherlock 导航到新活动主页图标更改

> ID：10349319
> 
> 赞同：0
> 
> 时间：2012-04-27T10:53:53.413
> 
> 标签：android, android-actionbar

与新的操作栏一样，当用户点击仪表板上的任何活动时，应用程序会将用户带到新的活动，同时在操作栏中的主页图标会出现一个箭头，显示该活动是从其他活动开始的。如何使用 Sherlock android bar 获得此功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T12:25:17.667

> 操作栏中的主页图标将有一个箭头显示此活动是从其他活动开始的

那不是那个箭头的意思。该箭头表示您为用户提供了“向上”移动导航层次结构的选项，此外还有提供返回前一个活动的导航的 BACK 按钮。[这在Android 设计文档](http://developer.android.com/design/patterns/navigation.html)中有更详细的描述。

> 如何使用 Sherlock android bar 获得此功能？

与本机操作栏相同的方式：调用`setDisplayHomeAsUpEnabled(true)`.`ActionBar`

# c#-4.0 - 从前几周的日期和截止日期

> ID：10349324
> 
> 赞同：-1
> 
> 时间：2012-04-27T10:54:20.950
> 
> 标签：c#-4.0

我在 C#.Net 中工作。我需要从日期和截止日期。例如：如果我选择“上周”意味着，我应该得到 4 月 15 日 - 4 月 21 日。“2 周前”是指 4 月 8 日至 4 月 14 日。与 3 周前、4 周前等相同。

如何获取 From Date 和 To Date..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:04:50.353

```
 var currentWeek_StartDate = GetStartWeekDate_By_Date(DateTime.Now.Date);

  var lastWeek_StartDate = GetStartWeekDate_By_WeekIndex(currentWeek_StartDate, -1);
  var lastWeek_EndDate = GetEndWeekDate_By_StartWeekDate(lastWeek_StartDate);

public static DateTime GetStartWeekDate_By_Date(DateTime date)
{
  return date.AddDays(-(int)date.DayOfWeek);
}
public static DateTime GetEndWeekDate_By_StartWeekDate(DateTime date)
{
  return date.AddDays(6);
}
public static DateTime GetStartWeekDate_By_WeekIndex(DateTime date, int weekIndex)
{
  return date.AddDays(weekIndex * 7);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:09:39.200

我做了一个控制台程序..itz 工作正常.. 看看

```
static void Main(string[] args)
        {
            Console.WriteLine("Enter week number");
            int week = int.Parse(Console.ReadLine());
            var weekStartDay = DayOfWeek.Monday;
            int daysInAWeek = 7;
            DateTime thisWeekStarttingDate = DateTime.Now.Subtract(new TimeSpan((int)DateTime.Now.DayOfWeek - (int)weekStartDay, 0, 0, 0)).Date;

            DateTime fromDate = thisWeekStarttingDate.Subtract(new TimeSpan(daysInAWeek * week, 0, 0, 0));
            DateTime toDate = fromDate.AddDays(daysInAWeek-1);

            Console.WriteLine("from date:" + fromDate.ToShortDateString());
            Console.WriteLine("to date:" + toDate.ToShortDateString());
            Console.ReadKey();
        } 
```

# php - 在 Web 服务器上显示数据（纬度和经度）

> ID：10349326
> 
> 赞同：1
> 
> 时间：2012-04-27T10:54:30.043
> 
> 标签：php, android, web-services, latitude-longitude

我一直在尝试发布我获得的用户的纬度和经度数据。我使用 WAMP 创建了一个服务器。它是一个以 mysql 作为数据库的 PHP 服务器。在这段代码中，我没有收到任何错误，但**问题是它没有在 url 上发布任何内容。**下面是 PHP 脚本和代码。

PHP

```
<?php

$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("radhika_db", $con);

 $latitude = $_POST['latitude'];
 $longitude = $_POST['longitude'];
 $service = $_POST['service'];
 $devid = $_POST['devid'];

$sql = "INSERT INTO  `radhika_db`.`locations` (
`id` ,
`devid` ,
`latitude` ,
`longitude` ,
`service`
)
VALUES (
NULL ,  '$devid',  '$latitude',  '$longitude',  '$service'
);";
if (!mysql_query($sql,$con))
{
  die('Error: ' . mysql_error());
  }

mysql_close($con);

?> 
```

使用Gps.java

```
public class UseGps extends Activity 

{ 

/** Called when the activity is first created. */ 

@Override 

public void onCreate(Bundle savedInstanceState) 

{ 

 super.onCreate(savedInstanceState); 

setContentView(R.layout.main); 

 /* Use the LocationManager class to obtain GPS locations */ 

LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 

LocationListener mlocListener = new MyLocationListener(); 

mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener); 

} 

/* Class My Location Listener */ 

public class MyLocationListener implements LocationListener 

{ 
  Context context;
public void onLocationChanged(Location loc) 

{ 

double latitude = loc.getLatitude(); 

double longitude = loc.getLongitude(); 
Toast.makeText(context, "Latitude:" +latitude + "Longitude:" +longitude, 5000).show();}
TelephonyManager telephonyManager = (TelephonyManager)context.getSystemService  (Context.TELEPHONY_SERVICE);
String Devid = telephonyManager.getDeviceId();

//this is JSON part to put your information inside it
String postData = "{\"request\":{\"type\":\"locationinfo\"},\"userinfo\":{\"Devid\":\""+Devid+"\",\"latitude\":\""+latitude+"\",\"longitude\":\""+longitude+"\"}}";

Uri uri = Uri.parse("http://location.site88.net/store.php"); 
Intent intent = new Intent(Intent.ACTION_VIEW, uri); 
startActivity(intent); 
String url="http://location.site88.net/storeg.php"; 

DefaultHttpClient httpClient = new DefaultHttpClient(); 
HttpPost httpPost = new HttpPost(url); 

List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
nameValuePairs.add(new BasicNameValuePair("Devid", Devid));
nameValuePairs.add(new BasicNameValuePair("latitude", Double.toString(latitude) )); 
nameValuePairs.add(new BasicNameValuePair("longitude", Double.toString(longitude))); 

try {
    httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
} catch (UnsupportedEncodingException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
HttpResponse httpResponse = null;
String result = null;
try {
    httpResponse = httpClient.execute(httpPost);
    HttpEntity httpEntity = httpResponse.getEntity();
    if (httpEntity != null) {
        InputStream instream = null;
        instream = httpEntity.getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(instream,"iso-8859-1"),8); 
        StringBuilder sb = new StringBuilder(); 
        String line = null; 
        while ((line = reader.readLine()) != null) { 
            sb.append(line + "\n"); 
            Toast.makeText(getApplicationContext(), "pass", Toast.LENGTH_SHORT).show(); 
        } 
         instream.close();
              result=sb.toString(); 
      }
} catch (ClientProtocolException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} catch (IOException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
}
 public void onProviderDisabled(String provider) {
// TODO Auto-generated method stub

}
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}
public void onStatusChanged(String provider, int status, Bundle extras) {
// TODO Auto-generated method stub

}}} 
```

# android - 在android上的sqlite数据库中创建表

> ID：10349337
> 
> 赞同：7
> 
> 时间：2012-04-27T10:55:04.987
> 
> 标签：android, sqlite, android-logcat

```
@覆盖
        公共无效 onCreate（SQLiteDatabase 数据库）
        {
            尝试{
                db.execSQL("创建表" + NotificationManager.getUserStatic(context) + "log ("+
                KEY_TIME +" INTEGER 主键，"+ KEY_TEXT +" TEXT not null);");

            }
            捕捉（SQLException e）{
                e.printStackTrace();
            }
        }

        /**
         * 应用打开时调用的 onOpen 方法。
         */

        @覆盖
        公共无效 onOpen（SQLiteDatabase 数据库）
        {
            尝试{
                System.out.println("tophere");
                db.execSQL("如果不存在则创建表 "+DATABASE_NAME+"." + NotificationManager.getUserStatic(context) + "log ("+
                KEY_TIME +" INTEGER 主键，"+ KEY_TEXT +" TEXT not null);");
                System.out.println("这里");
            }
            捕捉（SQLException e）{
                e.printStackTrace();
            }
        }

```

我们有此代码用于为应用程序创建数据库。问题是，据我们所知，它不会创建表，因此当我们尝试插入表并从中读取时，它会崩溃。我们已经尝试了一切，System.out.println 在那里看看它失败的地方。我们得到了tophere，但它永远不会到达日志中的downhere部分，所以我们猜测是什么原因导致它在那里失败。我们已经用 DDMS 检查了数据库在正确的文件夹中，所以数据库应该在那里，但由于某种原因它找不到它（日志中的第 2 行和第 3 行）。

有什么想法吗？

这是错误日志：

```
04-27 10:45:46.768: I/System.out(6441): tophere
04-27 10:45:46.772: I/SqliteDatabaseCpp(6441): sqlite 返回: 错误代码 = 1, msg = 未知数据库 NOPO, db=/data/data/dmri.nopo/databases/NOPO
04-27 10:45:46.772: W/System.err(6441): android.database.sqlite.SQLiteException: 未知数据库 NOPO: ，编译时：如果不存在则创建表 NOPO.log（时间整数主键，文本 TEXT不为空）；
04-27 10:45:46.792: W/System.err(6441): 在 android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-27 10:45:46.792: W/System.err(6441): 在 android.database.sqlite.SQLiteCompiledSql.(SQLiteCompiledSql.java:68)
04-27 10:45:46.811: W/System.err(6441): 在 android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:134)
04-27 10:45:46.811: W/System.err(6441): 在 android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
04-27 10:45:46.811: W/System.err(6441): 在 android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:260)
04-27 10:45:46.811: W/System.err(6441): 在 android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:84)
04-27 10:45:46.811: W/System.err(6441): 在 android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1899)
04-27 10:45:46.823: W/System.err(6441): 在 android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1839)
04-27 10:45:46.823: W/System.err(6441): 在 dmri.nopo.DBAdapter$DatabaseHelper.onOpen(DBAdapter.java:67)
04-27 10:45:46.823: W/System.err(6441): 在 android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:180)
04-27 10:45:46.902: W/System.err(6441): 在 dmri.nopo.DBAdapter.open(DBAdapter.java:86)
04-27 10:45:46.912: W/System.err(6441): 在 dmri.nopo.LogManager.readLogFile(LogManager.java:32)
04-27 10:45:46.912: W/System.err(6441): 在 dmri.nopo.LogActivity.onCreate(LogActivity.java:25)
04-27 10:45:46.921: W/System.err(6441): 在 android.app.Activity.performCreate(Activity.java:4465)
04-27 10:45:46.921: W/System.err(6441): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-27 10:45:46.931: W/System.err(6441): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-27 10:45:46.931: W/System.err(6441): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-27 10:45:46.941: W/System.err(6441): 在 android.app.ActivityThread.access$600(ActivityThread.java:123)
04-27 10:45:46.941: W/System.err(6441): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-27 10:45:46.953: W/System.err(6441): 在 android.os.Handler.dispatchMessage(Handler.java:99)
04-27 10:45:46.953: W/System.err(6441): 在 android.os.Looper.loop(Looper.java:137)
04-27 10:45:46.972: W/System.err(6441): 在 android.app.ActivityThread.main(ActivityThread.java:4424)
04-27 10:45:46.972: W/System.err(6441): 在 java.lang.reflect.Method.invokeNative(Native Method)
04-27 10:45:46.972: W/System.err(6441): 在 java.lang.reflect.Method.invoke(Method.java:511)
04-27 10:45:46.982: W/System.err(6441): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-27 10:45:46.982: W/System.err(6441): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-27 10:45:46.992: W/System.err(6441): 在 dalvik.system.NativeStart.main(Native Method)
04-27 10:45:47.002: I/SqliteDatabaseCpp(6441): sqlite 返回: 错误代码 = 1, msg = 没有这样的表: log, db=/data/data/dmri.nopo/databases/NOPO
04-27 10:45:47.012: D/AndroidRuntime(6441): 关闭虚拟机
04-27 10:45:47.012: W/dalvikvm(6441): threadid=1: 线程以未捕获的异常退出 (group=0x409c01f8)
04-27 10:45:47.181：E/AndroidRuntime（6441）：致命异常：主要
04-27 10:45:47.181: E/AndroidRuntime(6441): java.lang.RuntimeException: 无法启动活动 ComponentInfo{dmri.nopo/dmri.nopo.LogActivity}: android.database.sqlite.SQLiteException: 没有这样的表: log: , 编译时: SELECT time, text FROM log
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.app.ActivityThread.access$600(ActivityThread.java:123)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.os.Handler.dispatchMessage(Handler.java:99)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.os.Looper.loop(Looper.java:137)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.app.ActivityThread.main(ActivityThread.java:4424)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 java.lang.reflect.Method.invokeNative(Native Method)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 java.lang.reflect.Method.invoke(Method.java:511)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-27 10:45:47.181: E/AndroidRuntime(6441): at dalvik.system.NativeStart.main(Native Method)
04-27 10:45:47.181: E/AndroidRuntime(6441): Caused by: android.database.sqlite.SQLiteException: no such table: log: , while compile: SELECT time, text FROM log
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.database.sqlite.SQLiteCompiledSql.(SQLiteCompiledSql.java:68)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.database.sqlite.SQLiteProgram.(SQLiteProgram.java:127)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.database.sqlite.SQLiteProgram.(SQLiteProgram.java:94)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.database.sqlite.SQLiteQuery.(SQLiteQuery.java:53)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1449)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1485)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 dmri.nopo.DBAdapter.getAllSMS(DBAdapter.java:116)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 dmri.nopo.LogManager.readLogFile(LogManager.java:34)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 dmri.nopo.LogActivity.onCreate(LogActivity.java:25)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.app.Activity.performCreate(Activity.java:4465)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-27 10:45:47.181: E/AndroidRuntime(6441): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-27 10:45:47.181: E/AndroidRuntime(6441): ... 11 更多

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T11:13:00.410

这将帮助你我已经尝试过了，它也可以工作

这只是一个例子

```
public class DatabaseMarks {

    public static final String KEY_STUID = "stuid";
    public static final String KEY_SUB1 = "subject_one";
    public static final String KEY_SUB2 = "subject_two";
    public static final String KEY_SUB3= "subject_three";
    public static final String KEY_MARKS1= "marks_one";
    public static final String KEY_MARKS2 = "marks_two";
    public static final String KEY_MARKS3 = "marks_three";

    private static final String DATABASE_NAME = "Student";
    private static final String DATABASE_MARKSTABLE = "StudentMarks";
    private static final int DATABASE_VERSION = 1;

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
                db.execSQL(" CREATE TABLE " + DATABASE_MARKSTABLE + " (" +
                    KEY_STUID + " TEXT PRIMARY KEY, " +
                    KEY_SUB1 + " TEXT NOT NULL, " +
                    KEY_SUB2 + " TEXT NOT NULL, " +
                    KEY_SUB3 + " TEXT NOT NULL, " +
                    KEY_MARKS1 + " INTEGER NOT NULL, " +
                    KEY_MARKS2 + " INTEGER NOT NULL, " +
                    KEY_MARKS3 + " INTEGER NOT NULL);"
            );
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub

            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_MARKSTABLE);
            onCreate(db);
        }

    }
    public DatabaseMarks(Context c){
        ourContext = c;
    }
    public DatabaseMarks open()throws SQLException{
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }
    public void close(){
        ourHelper.close();
    }
    public long createInsert(String stuid, String subject1, String subject2,
            String subject3, String marks1, String marks2, String marks3) {
        // TODO Auto-generated method stub
        ContentValues cv = new ContentValues();
        cv.put(KEY_STUID, stuid);
        cv.put(KEY_SUB1, subject1);
        cv.put(KEY_SUB2, subject2);
        cv.put(KEY_SUB3, subject3);
        cv.put(KEY_MARKS1, marks1);
        cv.put(KEY_MARKS2, marks2);
        cv.put(KEY_MARKS3, marks3);
        return ourDatabase.insert(DATABASE_MARKSTABLE, null, cv);

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T11:21:48.873

首先，我建议使用 android.util.Log 在 Android 中记录异常。

第二 - 我怀疑您创建了名称错误的表。您的错误说查询找不到“日志”，但我看到您在“CREATE”语句中进行了一些连接。这可能是原因。

您可以检查实际为您创建的内容。通过查看创建的 sqlite 基础。

你可以试试：

1.  `adb shell`
2.  `cd /data/data/<your.package.name>/databases`
3.  `sqlite3 <yourdbname>`
4.  `.tables`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:56:32.730

删除`DATABASE_NAME`部分 SQL。

如果你想要`NOPO`你的数据库名称，并且想要创建一个 table `log`，那么：

```
private static class DatabaseHelper extends SQLiteOpenHelper {

    DatabaseHelper(Context context) {
        super(context, "NOPO", null, 2);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + "log" + " ("
                + KEY_TIME +" INTEGER primary key, "
                + KEY_TEXT +" TEXT not null);");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS log");
        onCreate(db);
    }
} 
```

`super(context, "NOPO", null, 2);`使这个 DatabaseHelper 对象只是在`NOPO`数据库环境中，所以你不需要在 SQL 中指定它。

附言。我硬编码了一些东西，你应该避免它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-03T13:33:00.887

公共类 LoginDataBaseAdapter { static final String DATABASE_NAME = "login.db";

```
 static final int DATABASE_VERSION = 1;

    public static final int NAME_COLUMN = 1;

    // TODO: Create public field for each column in your table.
    // SQL Statement to create a new database.

    static final String DATABASE_CREATE = "create table "+"LOGIN"+
                                 "( " +"ID"+" integer primary key autoincrement,"+ "USERNAME  text,PASSWORD text,UNAME text); ";

    // Variable to hold the database instance
    public  SQLiteDatabase db;

    // Context of the application using the database.
    private final Context context;

    // Database open/upgrade helper
    private DataBaseHelper dbHelper;

    public  LoginDataBaseAdapter(Context _context) 
    {
        context = _context;
        dbHelper = new DataBaseHelper(context, DATABASE_NAME, null, DATABASE_VERSION);

    }
    public  LoginDataBaseAdapter open() throws SQLException 
    {
        db = dbHelper.getWritableDatabase();
        return this;
    }
    public void close() 
    {
        db.close();
    }

    public  SQLiteDatabase getDatabaseInstance()
    {
        return db;
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-01T14:32:56.267

```
 public class DBHandler extends SQLiteOpenHelper {
                private static String DATABASE_NAME = "mydb";
                private static int DATABASE_VERSION = 1;

                String TABLE_NAME = "Student";

                String KEY_ID = "id";
                String KEY_STUDENT_NAME = "name";
                String KEY_STUDENT_MARKS = "marks";

            public DBHandler(Context context) {
                    super(context, DATABASE_NAME, null, DATABASE_VERSION);
                }

        @Override
            public void onCreate(SQLiteDatabase db) {
                // creating table
                String query = "CREATE TABLE " + TABLE_NAME +
                        " ( " +
                        KEY_ID + " INTEGER PRIMARY KEY," +
                        KEY_STUDENT_NAME + " TEXT," +
                        KEY_STUDENT_MARKS + " INTEGER"
                        " ) ";
                db.execSQL(query);

            // insertion in the table
            ContentValues values = new ContentValues();
            values.put(KEY_QUESTION_ID, "1");
            values.put(KEY_STUDENT_NAME , "abc");
            values.put(KEY_STUDENT_MARKS , "95");
            db.insert(TABLE_NAME, null, values);

            values.put(KEY_QUESTION_ID, "2");
            values.put(KEY_STUDENT_NAME , "def");
            values.put(KEY_STUDENT_MARKS , "93");
            db.insert(TABLE_NAME, null, values);
    }
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub

            db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
            // Create tables again
            onCreate(db);
        }
     // retrieve date
     List<Student> getAllData(int Id) {

            List<Student> student = new ArrayList<Student>();
            // Select All Query
            String selectQuery = "SELECT * FROM " + TABLE_NAME + "    WHERE KEY_ID =" + "'" + Id + "'";

            SQLiteDatabase db = this.getWritableDatabase();

            Cursor cursor = db.rawQuery(selectQuery, null);

            // looping through all rows and adding to list
            if (cursor.moveToFirst()) {
                do {
                    Student std = new Student();
                    u.setId(cursor.getInt(0));
                    u.setStudentName(cursor.getString(1));
                    u.setMarks(cursor.getString(2));

                    student.add(std);
                } while (cursor.moveToNext());
            }
            // return student list
            return student;
        }
    }

     public class Student {

        public static int Id;
        public static String studentName;
        public static int marks;

        public int getId() {
            return Id;
        }

        public static void setId(int id) {
            Id = id;
        }

        public String getStudentName() {
            return studentName;
        }

        public static void setStudentName(String studentName) {
            Student.studentName = studentName;
        }

        public int getMarks() {
            return marks;
        }

        public static void setMarks(int marks) {
            Student.marks = marks;
        }
    }

    public class MainActivity extends AppCompatActivity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            DBHandler db = new DBHandler(getApplicationContext());
            List<Student> std = new ArrayList<Student>();
            rl = db.getAllData(1);
           for (Student s : std) {
               Log.v("Id",s.getId());
               Log.v("Name",s.getStudentName());
               Log.v("Marks",s.getMarks());
       }
    }
} 
```

# android - 尝试在没有有效媒体播放器的情况下调用 getDuration 来播放下一首歌曲

> ID：10349339
> 
> 赞同：2
> 
> 时间：2012-04-27T10:55:09.433
> 
> 标签：android, android-mediaplayer

当我播放第一首歌曲时，它绝对没问题，但是下次我收到标题文本的错误消息并且我收到错误消息时`mPlayer.prepare()`，请提供您的帮助...

```
mPlayer.reset();
mPlayer.setOnCompletionListener(this);
mPlayer.setOnErrorListener(this); mPlayer.setDataSource(filePath);
mPlayer.prepare(); mPlayer.start(); isPlaying = true;
playPauseBtn.setEnabled(true); navigationbar.setEnabled(true);
totalMediaTime = mPlayer.getDuration() / 1000;
durationTextView.setText(Helper.getTimeFromSecods(totalMediaTime));
navigationbar.setMax(mPlayer.getDuration()); 
```

我得到错误代码38 ......不知道是什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-30T05:47:03.800

您正在尝试在准备完成之前获取 mediaPlayer.getDuration() 。使用 setOnPreparedListener() 方法设置准备监听器，只有在准备完成后才调用 getDuration() 方法。

# html - 如何从其内容单独打印组显示？

> ID：10349340
> 
> 赞同：1
> 
> 时间：2012-04-27T10:55:09.480
> 
> 标签：html, css, zend-framework, zend-form, zend-form-element

我正在使用 Zend Framework 和 Zend_Form 来呈现我的表单。但由于我发现很难定制它，我决定单独打印元素。

问题是，我不知道如何在显示组中打印单个元素。我知道如何打印我的显示组（字段集），但我需要在其中添加一些东西（比如`<div class="spacer"></div>`取消`float:left`.

有没有办法只显示没有内容的组，以便我自己单独打印它们？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T11:23:03.477

您正在寻找的是“ViewScript”装饰器。它允许你以任何你需要的方式形成你的 html。下面是一个简单的例子来说明它是如何工作的：

表单，一个简单的搜索表单：

```
<?php
class Application_Form_Search extends Zend_Form
{
    public function init() {
        // create new element
        $query = $this->createElement('text', 'query');
        // element options
        $query->setLabel('Search Keywords');
        $query->setAttribs(array('placeholder' => 'Query String',
            'size' => 27,
            ));
        // add the element to the form
        $this->addElement($query);
        //build submit button
        $submit = $this->createElement('submit', 'search');
        $submit->setLabel('Search Site');
        $this->addElement($submit);
    }
} 
```

接下来是“部分”，这是装饰器，在这里您可以按照自己的方式构建 html：

```
<article class="search">
<!-- I get the action and method from the form but they were added in the controller -->
    <form action="<?php echo $this->element->getAction() ?>"
          method="<?php echo $this->element->getMethod() ?>">
        <table>
            <tr>
            <!-- renderLabel() renders the Label decorator for the element
                <th><?php echo $this->element->query->renderLabel() ?></th>
            </tr>
            <tr>
            <!-- renderViewHelper() renders the actual input element, all decorators can be accessed this way -->
                <td><?php echo $this->element->query->renderViewHelper() ?></td>
            </tr>
            <tr>
            <!-- this line renders the submit element as a whole -->
                <td><?php echo $this->element->search ?></td>
            </tr>
        </table> 
    </form>
</article> 
```

最后是控制器代码：

```
public function preDispatch() {
        //I put this in the preDispatch method because I use it for every action and have it assigned to a placeholder.
        //initiate form
        $searchForm = new Application_Form_Search();
        //set form action
        $searchForm->setAction('/index/display');
        //set label for submit button
        $searchForm->search->setLabel('Search Collection');
        //I add the decorator partial here. The partial .phtml lives under /views/scripts
        $searchForm->setDecorators(array(
            array('ViewScript', array(
                    'viewScript' => '_searchForm.phtml'
            ))
        ));
        //assign the search form to the layout place holder
        //substitute $this->view->form = $form; for a normal action/view
        $this->_helper->layout()->search = $searchForm;
    } 
```

在您的视图脚本中使用正常的`<?php $this->form ?>`.

您可以将此方法用于您想用 Zend_Form 构建的任何表单。因此，将任何元素添加到您自己的字段集中都很简单。

# java - 尝试加载大量对象并流式传输到 csv 的内存峰值

> ID：10349341
> 
> 赞同：1
> 
> 时间：2012-04-27T10:55:10.607
> 
> 标签：java, sql-server-2005, csv

我们有一个网络应用程序，用户可以通过单击链接下载数据列表。这样做是在 MS sql server db 中触发存储过程 - 获取具有 14 列和所有字符串的行。一旦我们得到它并从结果集中提取，我们直接将它流式传输到客户端机器上的 csv 文件。这样我们就可以在开始流操作之前在内存中保存创建中间域对象（等于重新调整的行数）。我们也不会等到整个结果集都加载到内存中。但是，对于拥有例如 80000 个此类数据实例的客户来说——它仍在将内存增加 50 mb——然后下降了大约 20 mb，并且在相当长的一段时间内都保持在这个水平。如果我在 jconsole 上执行 GC，它也会释放剩余的 30 mb。不知道是什么导致这种情况持续一段时间。此外，对于在 1.2 gig 内存上运行的应用程序来说，50 mb 的峰值是不可接受的。对于更大的客户，它会增加 400 mb 并冻结应用程序或发生 OOM。任何建议我们如何实现这一目标？请注意 - 我已经在另一个地方实现了同样的事情，并且在 5 秒内下载了一个大小相同但数据不同（6 列）的文件，并且内存峰值仅为 5 mb。在这种情况下，虽然在 Sql Mnagament 工作室上运行时，存储过程仅在 4 秒内运行。但是我得到一个巨大的峰值的查询本身需要 45 秒才能运行，并且更多基于数据，因为它通过大量验证。会不会有不良影响？我希望不是因为我们在preparedststement 上的setFetchSize() 上获取1000 块 对于更大的客户，它会增加 400 mb 并冻结应用程序或发生 OOM。任何建议我们如何实现这一目标？请注意 - 我已经在另一个地方实现了同样的事情，并且在 5 秒内下载了一个大小相同但数据不同（6 列）的文件，并且内存峰值仅为 5 mb。在这种情况下，虽然在 Sql Mnagament 工作室上运行时，存储过程仅在 4 秒内运行。但是我得到一个巨大的峰值，查询本身需要 45 秒才能运行，并且更多基于数据，因为它通过大量验证。会不会有不良影响？我希望不是因为我们在preparedststement 上的setFetchSize() 上获取1000 块 对于更大的客户，它会增加 400 mb 并冻结应用程序或发生 OOM。任何建议我们如何实现这一目标？请注意 - 我已经在另一个地方实现了同样的事情，并且在 5 秒内下载了一个大小相同但数据不同（6 列）的文件，并且内存峰值仅为 5 mb。在这种情况下，虽然在 Sql Mnagament 工作室上运行时，存储过程仅在 4 秒内运行。但是我得到一个巨大的峰值，查询本身需要 45 秒才能运行，并且更多基于数据，因为它通过大量验证。会不会有不良影响？我希望不是因为我们在preparedststement 上的setFetchSize() 上获取1000 块 任何建议我们如何实现这一目标？请注意 - 我已经在另一个地方实现了同样的事情，并且在 5 秒内下载了一个大小相同但数据不同（6 列）的文件，并且内存峰值仅为 5 mb。在这种情况下，虽然在 Sql Mnagament 工作室上运行时，存储过程仅在 4 秒内运行。但是我得到一个巨大的峰值的查询本身需要 45 秒才能运行，并且更多基于数据，因为它通过大量验证。会不会有不良影响？我希望不是因为我们在preparedststement 上的setFetchSize() 上获取1000 块 任何建议我们如何实现这一目标？请注意 - 我已经在另一个地方实现了同样的事情，并且在 5 秒内下载了一个大小相同但数据不同（6 列）的文件，并且内存峰值仅为 5 mb。在这种情况下，虽然在 Sql Mnagament 工作室上运行时，存储过程仅在 4 秒内运行。但是我得到一个巨大的峰值的查询本身需要 45 秒才能运行，并且更多基于数据，因为它通过大量验证。会不会有不良影响？我希望不是因为我们在preparedststement 上的setFetchSize() 上获取1000 块 但是我得到一个巨大的峰值的查询本身需要 45 秒才能运行，并且更多基于数据，因为它通过大量验证。会不会有不良影响？我希望不是因为我们在preparedststement 上的setFetchSize() 上获取1000 块 但是我得到一个巨大的峰值的查询本身需要 45 秒才能运行，并且更多基于数据，因为它通过大量验证。会不会有不良影响？我希望不是因为我们在preparedststement 上的setFetchSize() 上获取1000 块

这是代码片段

```
Connection connection = null;
        PreparedStatement statement = null;
        ResultSet rs = null;
        OutputStream outputStream = null;
        BufferedWriter bufferedWriter = null;
        try
        {
            response.setContentType("application/save");
            response.setHeader("Content-Disposition", "attachment; filename="
                    + link.getFileName());

            outputStream = response.getOutputStream();

            bufferedWriter = new BufferedWriter(new OutputStreamWriter(
                    outputStream));

            connection = dataSource.getConnection();
            statement = connection.prepareStatement(link.getQuery());

            statement.setFetchSize(1000);
            statement.setInt(1, form.getSelectedClientId());

            rs = statement.executeQuery();

            while (rs.next())
            {

                bufferedWriter
                        .write(getCsvRowString(new String[]
                        { rs.getString(1), rs.getString(2), rs.getString(3),
                                rs.getString(4), rs.getString(5),
                                rs.getString(6), rs.getString(7),
                                rs.getString(8), rs.getString(9),
                                rs.getString(10), rs.getString(11),
                                rs.getString(12), rs.getString(13),
                                rs.getString(14), rs.getString(15),
                                rs.getString(16), rs.getString(17),
                                rs.getString(18) }));

            }

        } catch (final Exception e)
        {
            log.error("Error in downloading extracts " + e.getMessage());
            throw e;
        } finally
        {
            if (bufferedWriter != null)
            {
                bufferedWriter.flush();
                bufferedWriter.close();
            }
            if (outputStream != null)
            {
                outputStream.close();
            }

            rs.close();
            statement.close();
            connection.close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:14:17.643

可能古老的 MS SQL JDBC 驱动程序忽略了`setFetchSize()`提示（请参阅此答案[https://stackoverflow.com/a/1982109/116509](https://stackoverflow.com/a/1982109/116509)）。尝试像在 Horizo​​n 上一样使用 jTDS 驱动程序。

# html - CSS - 在新行上显示带有文本的内联块奇怪行为

> ID：10349343
> 
> 赞同：0
> 
> 时间：2012-04-27T10:55:23.057
> 
> 标签：html, css

这是我的[代码](http://jsfiddle.net/sMyGV/2/)：

# CSS

```
div
{
    height:30px;
}

.prodotto_pulsante_testo_centrato
{
    display:block;
    text-align:center;
    margin-left:auto;
    margin-right:auto;
    width:120px;
}

.prodotto_pulsante_testo_numero
{
    display:inline-block;
    width:23px;
    position:absolute;
    left:-31px;
    bottom:-1px;
    background-color:green;    
}

.prodotto_pulsante_testo_titolo
{
    display:inline-block;
    margin-left:23px;
    position:relative;
    background-color:red;  
    text-align:left;    
} 
```

# HTML

```
<div>
    <span class="prodotto_pulsante_testo_centrato">
        <span class="prodotto_pulsante_testo_titolo">
            operativo
            <span class="prodotto_pulsante_testo_numero">4</span>                                    
        </span>
    </span>       
</div>    

<div>
    <span class="prodotto_pulsante_testo_centrato">
        <span class="prodotto_pulsante_testo_titolo">
            sportello operativo
            <span class="prodotto_pulsante_testo_numero">4</span>                                    
        </span>
    </span>       
</div> 
```

红框是`display:inline-block;`。框中最长的单词是“operativo”，所以我认为它们将对齐到同一条垂直线。

但是，在第二个框中，我在文本上有一个新行，原因是父 div 的 120px，它推`prodotto_pulsante_testo_titolo`到了最高宽度。

为什么会有这种行为？我想这是正确的：在 Firefox 和 Chrome 上也是如此。它就像我在 IE 上一样工作 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:05:09.203

[jsfiddle](http://jsfiddle.net/ryanwfiorini/NBLuz/)

如果你这样做，放一个 <br />

然后红色框的宽度匹配。没有它第二个红色框的宽度被扩展了，因为它包含了两个单词，它推出了宽度。您碰巧设置的宽度不足以将两个单词保持在同一行。

```
sportello<br />operativo 
```

# javascript - Facebook :- 在墙上发布问题...like_count 保持 0

> ID：10349350
> 
> 赞同：0
> 
> 时间：2012-04-27T10:55:54.740
> 
> 标签：javascript, facebook, facebook-javascript-sdk

这是代码： -

```
 FB.init({ appId: "APP_ID", nativeInterface: CDV.FB, useCachedDialogs: false });

FB.Event.subscribe('auth.login', function (response)
{});

FB.Event.subscribe('auth.logout', function (response) 
{});

FB.Event.subscribe('auth.sessionChange', function (response)
{});

FB.Event.subscribe('auth.statusChange', function (response) {
if (response.status == 'connected') {
    Ext.getCmp('facebookLoginButton').setHidden(true);
    Ext.getCmp('facebookLogoutButton').setHidden(false);
}
else {
    Ext.getCmp('facebookLoginButton').setHidden(false);
    Ext.getCmp('facebookLogoutButton').setHidden(true);
}
});

function login() {
FB.login(
            function (response) {
                if (response.authResponse) {
                    Ext.msg('facebook logged-in', 'You are logged in successfully!');
                } else {
                    Ext.msg('facebook logged-in', 'Error - You are not logged');
                }
            },
            { scope: "email, publish_stream" }
            );
  }

  function logout() {
  FB.logout(function (response) {
    Ext.msg('facebook logout', 'You are logout successfully!');
  });
  }

 function getLoginStatus() {
var isLoggedIn = false;
FB.getLoginStatus(function (response) {
    if (response.status == 'connected') {
        isLoggedIn = true;
    } else {
        isLoggedIn = false;
    }
});
return isLoggedIn;
}

function shareLinkOnFaceBook(title, link) {
if (getLoginStatus()) {
    var obj = {
        method: 'feed',
        link: link,
        picture: 'https://www.XXXXX.data.gif',
        name: title,
        caption: '',
        description: 'DEMO:-' + title
    };

    function callback(response) {
    }
    FB.ui(obj, callback);
}
else {
    login();
} 
```

}

(i) 在我的墙上分享链接后，Facebook 墙上缺少分享按钮。

(ii) 当我尝试使用以下查询查看发布网址的统计信息时：- [在此处输入链接描述，](https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27https://www.Linkshareurl.com%27) 然后我得到了 likes_count、share_count、comment_count（即使在点击喜欢并将评论放入评论框中）

请任何人都可以建议我在哪里缺少某些东西。如果需要更多描述，请告诉我。

谢谢，马尼什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:30:49.603

```
function getLoginStatus() {
    var isLoggedIn = false;
    FB.getLoginStatus(function (response) {
        if (response.status == 'connected') {
            isLoggedIn = true;
        } else {
           isLoggedIn = false;
        }
    });
    return isLoggedIn;
} 
```

这将始终返回“false”，因为 FB.getLoginStatus() 的回调在执行返回函数之前不会完成。

# php - 重新排序 CActiveDataProvider

> ID：10349353
> 
> 赞同：1
> 
> 时间：2012-04-27T10:56:08.067
> 
> 标签：php, sorting, yii

我正在寻找一种在 Yii 中重新排序 CActiveDataProvider 的方法。

目前我正在使用数据提供者来获取排序和分页的数据。

然后我使用 foreach 循环调整特定字段的数据来循环它，现在我需要根据新的调整数据重新排序。

我无法使用 afterFind 对模型中的数据进行排序，因为我需要查询另一个数据库（MySQL）来计算出计算值，而且它似乎不喜欢处理过程中的切换。

我不想使用 CArrayDataProvider 因为没有明显的方法来对返回的数据进行分页，除非我在调整数据时将控件放入循环中，但是我不知道可以返回多少数据，比如 200 条记录，但显示的唯一调整 20 似乎违反直觉。

然后将这一切推送到 CGridView 小部件。

所以现在我需要例如以升序重新调整下面的数组。

```
$dataProvider = new CActiveDataProvider( blah );

foreach ( $dataProvider->getData() as $data ) {
 $data->Score += SomeModel::model()->findByPk(1)->NewScore;
}

array(
'Score' => 7
),
array(
'Score' => 6
)

$this->render('blah', array('data' => $dataProvider); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:08:31.560

听起来您应该简单地实现一个新`CDataProvider`的包装现有的`CDataProvider`. 您将需要覆盖几个方法，但对于大多数方法，您可以简单地转发到包装的数据提供者。代码可能最终看起来像这样：

```
$dataProvider = new CActiveDataProvider(...);
$myProvider = new CustomDataProvider($dataProvider);

// you could make CustomDataProvider work like this:
$myProvider->dataMutator = function(&$row, $key) {
    $row->Score = SomeModel::model()->findByPk(1)->NewScore;
};

$this->render('blah', array('data' => $myProvider); 
```

`CustomDataProvider::fetchData`可能看起来像这样：

```
protected function fetchData()
{
    $data = $this->wrappedProvider->fetchData();
    array_walk(&$data, $this->dataMutator);
    uasort($data, function($a, $b) { return $a->Score - $b->Score; });
    return $data;
} 
```

我已经在这里硬连线了排序——这适用于原型设计，但是干净地指定后处理排序并非易事，因为：

*   `CDataProvider`暴露一个`sort`被忽略的属性。完全集成该属性要么是不平凡的工作（您必须编写尊重多个排序标准的代码等），要么在其基类上更改`CustomDataProvider.sort`比较的语义。与 结婚，因此如果您想从 OO 角度寻求最干净的解决方案，最好从头开始实施。`sort``CDataProvider``CSort``IDataProvider`
*   `CustomDataProvider`如果单个“排序排序”`property is used, because`不能同时反映包装数据提供者将执行的操作和“后处理”排序将执行的操作，那么用户对排序的工作方式并不直观；但是，以上两者都会影响最终结果。

我建议你让原型工作，然后好好想想对象模型应该是什么。

# c++ - 了解“架构的未定义符号”错误

> ID：10349356
> 
> 赞同：4
> 
> 时间：2012-04-27T10:56:12.917
> 
> 标签：c++

好的，我是 C++ 新手，所以我试图了解我可以从错误消息中获得哪些信息。

这是错误消息

```
架构 x86_64 的未定义符号：
  “PieceClothing::PieceClothing(int)”，引用自：
      ClothesInventory.o 中的 ClothesInventory::getPieceOfClothing(long)
      ClothesInventory.o 中的 ClothesInventory::insertIntocloset(std::basic_string, std::allocator >)
  “PieceClothing::PieceClothing()”，引用自：
      ClothesInventory.o 中的 ClothesInventory::ClothesInventory()
      ClothesInventory.o 中的 ClothesInventory::ClothesInventory(std::basic_string, std::allocator >)
      ClothesInventory.o 中的 std::map、std::allocator > >::operator[](long const&)
ld：未找到架构 x86_64 的符号
collect2: ld 返回 1 个退出状态

```

这是我的理解：
- 有两个错误；
- 与 getPieceOfClothing 和 insertIntocloset 相关的一个；
- 构造函数中的其他可能与我在那里的地图和/或迭代器有关。

只是为了澄清，我没有附上代码，因为问题的重点是理解我可以从消息中获得的所有信息。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T10:59:02.530

错误实际上与构造函数有关：

```
PieceClothing::PieceClothing(int)
PieceClothing::PieceClothing() 
```

他们说没有为他们找到任何符号。这通常是以下任一迹象：

*   他们没有被实施
*   它们已实现，但未编译实现所在的文件
*   您从不同的模块引用它们，该模块不与定义它们的模块链接

错误列表中的其他详细信息仅说明调用构造函数的位置。例如，如果您有：

```
ClothesInventory::getPieceOfClothing(long)
{
   PieceClothing p;
} 
```

您正在引用构造函数，因为您尝试创建该类型的对象。

它的工作原理可以分为两部分：

1) 编译器检查定义类的头文件并查看默认构造函数是否可用。它找到了构造函数，所以它可以了。

2) 链接器开始起作用。它在目标文件和引用的库中查找与您的调用相匹配的符号。这就是你出错的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:18:29.343

该消息告诉您它找不到声明的构造函数的定义`PieceClothing::PieceClothing(int)`，`PieceClothing::PieceClothing()`因此您需要检查是否已编写它们，如果是，则包含它们的目标文件是否构成链接的一部分。

如果您的链接器输出很冗长，它应该向您显示正在链接的目标文件。

# java - 从具有未知行和列的表中获取表模型

> ID：10349359
> 
> 赞同：0
> 
> 时间：2012-04-27T10:56:20.293
> 
> 标签：java, swing, jtable, resultset, tablemodel

我知道如何从我知道的表中获取简单的 TableModel，但我想知道如何从我不知道其列和行详细信息的表中获取 TableModel，有没有办法直接从表中获取表模型结果集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:12:51.623

使用这个[http://technojeeves.com/joomla/index.php/free/59-resultset-to-tablemodel](http://technojeeves.com/joomla/index.php/free/59-resultset-to-tablemodel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:07:05.930

如果您有一个表格对象，那么您可以使用`getModel()`.

# mysql - MYSQL - 如何解决 66 KB 的行大小限制

> ID：10349361
> 
> 赞同：8
> 
> 时间：2012-04-27T10:56:34.530
> 
> 标签：mysql

我有一个 mysql 数据库。我使用innodb。我的 0ne 表包含多于 10 列。最后一列的类型为 LONGTEXT，它应该包含 html 代码。问题是，对于每条记录，该字段不包含完整的代码，并且总是在相同数量的字符之后停止。我尝试插入的 html 文件的重量约为 60KO。所以我猜我的每条记录都超过了mysql的行大小限制（66KO）。我想知道的是是否有一些方法可以扩展这个限制。任何解决方法将不胜感激。提前感谢您的投入。干杯。马克

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-09T21:05:46.010

公认的答案是错误的（或至少相当固执） - 我个人不希望将数据存储在我的数据库之外，因为它会在备份过程和事务查询方面造成复杂性。

正如其他人所指出的，该手册反复声明 BLOB 和 TEXT 列不计入总行大小，但不幸的是，使用默认配置设置，这不是真的，您最终会收到此错误消息。（错误消息没有任何意义，因为它告诉您使用 TEXT 而不是 VARCHAR 来解决问题 - 您已经是这样了。）

此限制的原因是默认存储机制[Antelope](http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_antelope)，它存储行中可变长度列的前 768 个字节 - 一个可能的解决方案是使用 INNODB 并将您的存储机制切换到替代[梭子鱼](http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_barracuda)存储机制：

```
SET GLOBAL innodb_file_format=Barracuda; 
```

这不会立即生效，因为此设置是新数据库文件的默认设置 - 因此您需要删除并重新创建整个数据库。

或者，切换到 Barracuda（如上所述），然后（另外）切换到 file-per-table 策略：

```
SET GLOBAL innodb_file_per_table=ON; 
```

同样，这不会立即生效，因为这两个设置都是新表的默认设置 - 所以同样，您需要删除并重新创建表。

如果您在执行此操作后查看 MySQL 数据文件夹，您可以确认创建了单独的文件，例如，对于名为“data”的数据库和名为“test”的表，您应该看到名为“data/test/bigtable”的文件.ibd”。

如果您不喜欢在 MySQL 中更改全局设置，请尝试`SET SESSION`使用`SET GLOBAL`, 例如在运行`CREATE TABLE`语句之前立即使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T11:07:11.763

(LONG)TEXT（和 BLOB）的值**不是**存储在“行中”而是存储在行之外。因此，您的 HTML 的大小不会影响各个行的大小。

从手册：

> *表的内部表示最大行大小为 65,535 字节，即使存储引擎能够支持更大的行。此数字**不包括 BLOB 或 TEXT 列，它们仅占此大小的 9 到 12 个字节***
> 
> *对于 BLOB 和 TEXT 数据，信息在内部存储在与行缓冲区不同的内存区域中。*

（强调我的）

[http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html](http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T11:01:39.573

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T11:04:40.403

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-29T05:51:24.873

我们通过以下步骤解决了它。

步骤 1：在 MySql 中运行以下查询以设置全局变量。

*   SET GLOBAL innodb_file_format=梭子鱼；
*   设置全局 innodb_file_per_table=ON;

步骤2：选择当您尝试将大数据保存到单行时发生错误的表。

第 3 步：转到操作

第 4 步：从 ROW_FORMAT 中选择 COMPRESSED。（默认情况下，当您设置全局变量 innodb_file_format 和 innodb_file_per_table 时，COMPACT 和 REDUNDANT 将在那里，您可以找到其他选项，例如 COMPRESSED 和 DYNAMIC）

第 5 步：单击开始。

:)

# html - iPhone 上的全屏视频播放器是否有“onClose”事件？

> ID：10349362
> 
> 赞同：4
> 
> 时间：2012-04-27T10:56:36.353
> 
> 标签：html, events, video

我在网站上使用 html5 视频播放器。当用户开始播放时，播放器进入全屏模式并播放视频。

视频结束后，我捕捉到`ended`事件并通过`myvideo.webkitExitFullScreen();`.

现在，如果用户点击顶部**栏中**的“完成”按钮或播放器通过`video.webkitExitFullScreen();`.

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T22:22:23.710

## 更新的答案

您可以使用`webkitendfullscreen`和`webkitenterfullscreen`事件：

```
var vid = document.getElementById("some-vid");

vid.addEventListener('webkitendfullscreen', function (e) { 
  // handle end full screen 
});

vid.addEventListener('webkitenterfullscreen', function (e) { 
  // handle enter full screen 
}); 
```

* * *

## 上一个答案

这里问了一个类似的问题：[如何在全屏模式下观看 HTML5 视频时捕获键盘事件？](https://stackoverflow.com/q/11163203/527096)- 不知道如何链接这两个问题。

我只是假设您使用 jQuery 来轻松编写此代码。您只需要知道视频何时将模式从全屏更改为非全屏...所以在调整大小时您可以检查该`video.webkitDisplayingFullscreen;`属性。

```
var isVideoFullscreen = video.webkitDisplayingFullscreen;

$(window).bind("resize", function (e) {
    // check to see if your browser has exited fullscreen
    if (isVideoFullscreen != video.webkitDisplayingFullscreen) { // video fullscreen mode has changed
       isVideoFullscreen =  video.webkitDisplayingFullscreen;

       if (isVideoFullscreen) {
            // you have just ENTERED full screen video
       } else {
            // you have just EXITED full screen video
       }
    }
}); 
```

希望这对您有所帮助或指出正确的方向

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-15T01:28:07.740

```
$('video').bind('webkitfullscreenchange mozfullscreenchange fullscreenchange', function(e) {
    var state = document.fullScreen || document.mozFullScreen || document.webkitIsFullScreen;
    var event = state ? 'FullscreenOn' : 'FullscreenOff';

    // Now do something interesting
    alert('Event: ' + event);    
}); 
```

# android - android 异常，即使 jdom 库在那里

> ID：10349364
> 
> 赞同：3
> 
> 时间：2012-04-27T10:56:42.287
> 
> 标签：android, eclipse, jdom, eclipse-adt

![在此处输入图像描述](../Images/50147fff848b90a878ed599adb6ef9e4.png)

jdom 库在那里，我已将其删除并一次又一次地添加到构建路径中。而且，我也多次清理过这个项目。但我仍然收到此错误：

```
 04-27 10:51:27.867: W/ActivityThread(530): Application com.pkg.src.nhs.glos is waiting for the debugger on port 8100...
    04-27 10:51:27.936: I/System.out(530): Sending WAIT chunk
    04-27 10:51:29.396: I/dalvikvm(530): Debugger is active
    04-27 10:51:29.736: I/System.out(530): Debugger has connected
    04-27 10:51:29.746: I/System.out(530): waiting for debugger to settle...
    04-27 10:51:29.996: I/System.out(530): waiting for debugger to settle...
    04-27 10:51:30.262: I/System.out(530): waiting for debugger to settle...
    04-27 10:51:30.479: I/System.out(530): waiting for debugger to settle...
    04-27 10:51:30.689: I/System.out(530): waiting for debugger to settle...
    04-27 10:51:30.896: I/System.out(530): waiting for debugger to settle...
    04-27 10:51:43.786: D/dalvikvm(553): GC freed 683 objects / 60040 bytes in 110ms
    04-27 10:51:49.396: W/dalvikvm(553): VFY: unable to find class referenced in signature (Lcom/androidquery/AQuery;)
    04-27 10:51:49.576: W/dalvikvm(553): VFY: unable to find class referenced in signature (Lcom/androidquery/util/XmlDom;)
    04-27 10:51:49.646: W/dalvikvm(553): VFY: unable to find class referenced in signature (Lcom/androidquery/callback/AjaxStatus;)
    04-27 10:51:49.646: I/dalvikvm(553): Could not find method com.androidquery.util.XmlDom.tags, referenced from method com.pkg.src.nhs.glos.MainActivity.setImageCallBack
    04-27 10:51:49.646: W/dalvikvm(553): VFY: unable to resolve virtual method 80: Lcom/androidquery/util/XmlDom;.tags (Ljava/lang/String;)Ljava/util/List;
    04-27 10:51:49.646: D/dalvikvm(553): VFY: replacing opcode 0x6e at 0x0013
    04-27 10:51:49.646: D/dalvikvm(553): Making a copy of Lcom/pkg/src/nhs/glos/MainActivity;.setImageCallBack code (200 bytes)
    04-27 10:51:50.126: E/dalvikvm(553): Could not find class 'org.jdom.input.SAXBuilder', referenced from method com.pkg.src.nhs.glos.MainActivity$SetImageTask.doInBackground
    04-27 10:51:50.126: W/dalvikvm(553): VFY: unable to resolve new-instance 166 (Lorg/jdom/input/SAXBuilder;) in Lcom/pkg/src/nhs/glos/MainActivity$SetImageTask;
    04-27 10:51:50.126: D/dalvikvm(553): VFY: replacing opcode 0x22 at 0x0009
    04-27 10:51:50.126: D/dalvikvm(553): Making a copy of Lcom/pkg/src/nhs/glos/MainActivity$SetImageTask;.doInBackground code (205 bytes)
    04-27 10:51:50.736: W/dalvikvm(553): threadid=15: thread exiting with uncaught exception (group=0x4001b188)
    04-27 10:51:50.746: E/AndroidRuntime(553): Uncaught handler: thread AsyncTask #1 exiting due to uncaught exception
    04-27 10:51:50.846: E/AndroidRuntime(553): java.lang.RuntimeException: An error occured while executing doInBackground()
    04-27 10:51:50.846: E/AndroidRuntime(553):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
    04-27 10:51:50.846: E/AndroidRuntime(553):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
    04-27 10:51:50.846: E/AndroidRuntime(553):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
    04-27 10:51:50.846: E/AndroidRuntime(553):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
    04-27 10:51:50.846: E/AndroidRuntime(553):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    04-27 10:51:50.846: E/AndroidRuntime(553):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
    04-27 10:51:50.846: E/AndroidRuntime(553):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
    04-27 10:51:50.846: E/AndroidRuntime(553):  at java.lang.Thread.run(Thread.java:1096)
    04-27 10:51:50.846: E/AndroidRuntime(553): Caused by: java.lang.NoClassDefFoundError: org.jdom.input.SAXBuilder
    04-27 10:51:50.846: E/AndroidRuntime(553):  at com.pkg.src.nhs.glos.MainActivity$SetImageTask.doInBackground(MainActivity.java:100)
    04-27 10:51:50.846: E/AndroidRuntime(553):  at com.pkg.src.nhs.glos.MainActivity$SetImageTask.doInBackground(MainActivity.java:1)
    04-27 10:51:50.846: E/AndroidRuntime(553):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
    04-27 10:51:50.846: E/AndroidRuntime(553):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    04-27 10:51:50.846: E/AndroidRuntime(553):  ... 4 more
    04-27 10:51:50.941: I/dalvikvm(553): threadid=7: reacting to signal 3
    04-27 10:51:50.941: E/dalvikvm(553): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
    04-27 10:52:02.038: I/Process(553): Sending signal. PID: 553 SIG: 9 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T11:10:51.157

检查是否在构建路径设置的 Order and Export 选项卡中检查了 jdom 库。如果未选中，请进行清理并重试运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-17T13:17:04.940

在 Android Studio 中，它必须自动添加您添加到项目中“libs”文件夹中的 jar 文件，但有时它不会这样做。因此，对于 Windows 用户，您必须转到“项目结构”= ctrl+alt+shift+S。

然后单击面板左侧的“应用程序”。然后单击依赖项选项卡。然后单击 (+) -> jar 依赖项。然后在 libs 文件夹中选择您的 jar 文件。

然后单击确定。

# blackberry - 在 JavaME 中解析字节数组的字符串表示

> ID：10349369
> 
> 赞同：1
> 
> 时间：2012-04-27T10:57:07.760
> 
> 标签：blackberry, java-me, base64

我通过 REST 服务发送一个字节数组。它作为字符串接收。这是它的摘录。带有开始和结束标签。

`[0,0,0,0,32,122,26,65,0,0,0,0,96,123,26,65,0,0,0,0,192,123,20,65,0,0,0,0,0,125,20,65,71,73,70,56,57,97,244,1,244,1,247,0,0,51,85,51,51,85,102,51,85,153,51,85,204,51,85,255,51,128,0,51,128,51,51,128,102,51,128,153,51,128,204,51,128,255,51,170,0,51,170,51,51,170,102,51,170,153,51,170,204,51,170,255,51,213,0,51,213,51,51,213,102,51,213,153,51,213,204,51,213,255,51,255,0,51,255,51,51,255,102,51,255,153,51,255,204,51]`

现在，在有人建议将其作为 base64 编码的字符串发送之前，这将需要 Blackberry 实际上有一个工作的 Base64 解码器。但是很可惜，对于超过 64k 的文件，它会失败，并且我已经尝试过alsorts。

无论如何，这是我尝试过的：

```
 str = str.replace('[', ' ');
        str = str.replace(']', ' ');
        String[] tokens = split(str,",");
        byte[] decoded = new byte[tokens.length];
        for(int i = 0; i < tokens.length; i++)
        {           
            decoded[i] = (byte)Integer.parseInt(tokens[i]);             
        } 
```

但它失败了。其中 split 就像在[这里找到的 JAVA 实现。](http://supportforums.blackberry.com/t5/Java-Development/String-Manipulation-split-replace-replaceAll/ta-p/620038 "在这里找到")

逻辑上它应该工作？但它不是。这是针对**JavaME/Blackberry**的。请不要 Java 答案（除非他们在 javaME 上工作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:34:12.640

两个问题，一个是小问题，一个是痛苦的问题。Minor:whitespaces (Nikita 提到) Major:casting to bytes ... 因为java 只有无符号字节，128 和更高的值在从int 转换为byte 时会变成负数。

```
 str = str.replace('[',' ');
    str = str.replace(']', ' ');
    String[] tokens = split(str,",");//String[] tokens = str.split(",");
    byte[] decoded = new byte[tokens.length];
    for (int i = 0; i < tokens.length; i++) {
        decoded[i] = (byte) (Integer.parseInt(tokens[i].trim()) & 0xFF);
    }
    for(byte b:decoded) {
        int tmp = ((int)b) & 0xff;
        System.out.print("byte:"+tmp);
    } 
```

（顺便说一句：实现 base64 编码器/解码器并不是特别难——不过对你的项目来说可能是“矫枉过正”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:11:38.160

用空字符串替换括号，而不是空格：

```
str = str.replace('[', '');
str = str.replace(']', ''); 
```

在您的情况下，您有以下数组：

```
[" 0", "0", "0", ..., "204", "51 "] 
```

第一个元素`" 0"`无法解析为整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:00:33.107

我推荐使用 Base64 编码的字符串来发送字节数组。

有[一个帖子链接到 J2ME 的 Base64 库](https://stackoverflow.com/questions/3657047/howto-base64-decode-library-in-j2me)。

这种方式允许您将字节数组转换为字符串，稍后您可以将此字符串转换为字节数组。

# java - 单独文件中的 Android 服务不起作用

> ID：10349370
> 
> 赞同：1
> 
> 时间：2012-04-27T10:57:09.947
> 
> 标签：java, android, android-widget, android-service

我正在尝试构建我的第一个 android 小部件 - 它是一个简单的图标，当我点击某些东西时，它会发生 - 在“某物”上我正在使用服务。一切都很好，但我有一个小问题，我不明白。这工作正常：

```
CLASS MYWIDGET.JAVA
------------------------------------------------
public class MyWidget extends AppWidgetProvider {

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction() == null) context.startService(new Intent(context, UpdateService.class));
    else super.onReceive(context, intent);
}

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    context.startService(new Intent(context, UpdateService.class));
}

public static class UpdateService extends IntentService {

    public UpdateService() {
        super("MyWidget$UpdateService");
    }

    @Override
    protected void onHandleIntent(Intent arg0) {
        ComponentName me = new ComponentName(this, MyWidget.class);
        AppWidgetManager manager = AppWidgetManager.getInstance(this);
        manager.updateAppWidget(me, buildUpdate(this));
    }

    private RemoteViews buildUpdate (Context context) {
        // i'm doing something here
    }
} 
```

}

但是当我将 UpdateService 提取到单独的文件时它不起作用：

```
CLASS MYWIDGET.JAVA
------------------------------------------------
public class MyWidget extends AppWidgetProvider {

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction() == null) context.startService(new Intent(context, UpdateService.class));
    else super.onReceive(context, intent);
}

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    context.startService(new Intent(context, UpdateService.class));
} 
```

}

```
CLASS UPDATESERVICE.JAVA
-------------------------------
public class UpdateService extends IntentService {

    public UpdateService() {
        super("UpdateService");
    }

    @Override
    protected void onHandleIntent(Intent arg0) {
        ComponentName me = new ComponentName(this, MyWidget.class);
        AppWidgetManager manager = AppWidgetManager.getInstance(this);
        manager.updateAppWidget(me, buildUpdate(this));
    }

    private RemoteViews buildUpdate (Context context) {
        // i'm doing something here
    }
} 
```

}

这个版本不起作用 - 当我点击小部件图标时，更新服务中的任何方法都不会被调用。问题应该出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:06:35.163

如果您移动或重命名服务类，您需要在您的`AndroidManifest.xml`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:51:51.830

添加

```
<service android:name=".UpdateService" /> 
```

到您的 manifest.xml （也许您必须在名称本身之前设置正确的包名称）

# iphone - iPhone：查找当前日期到未来 60 天

> ID：10349382
> 
> 赞同：0
> 
> 时间：2012-04-27T10:57:53.807
> 
> 标签：iphone, nsdate

我正在使用以下代码查找从当前日期+时间到未来 30 天的时间。它工作正常。但是，我现在希望结束日期应该是 60 天，而不是 30 天。如何更改以下代码以获得长达 60 天？我尝试将结束日期更改为 [currentDateComponents month]+1，但它不起作用。请问有什么帮助吗？

```
NSDate *date = [NSDate date];

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar]; 
NSDateComponents *currentDateComponents = [gregorian components:( NSWeekdayCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSWeekCalendarUnit) fromDate:date];
NSLog(@"- current components year = %d , month = %d , week = % d, weekday = %d", [currentDateComponents year], [currentDateComponents month], [currentDateComponents week], [currentDateComponents weekday]);

NSArray* calendars = [[CalCalendarStore defaultCalendarStore] calendars];
NSLog(@"calendars.count: %ld", [calendars count]);

debug(@"LogMsg:%@ Date:%@", @"Start looking for new events for pushing iCal to OfferSlot", [NSDate date]);

// 30 days any new or modified calendar (iCal) events will be pushed here to OfferSlot
NSInteger year = [[NSCalendarDate date]yearOfCommonEra];
NSDate *startdate = [NSCalendarDate dateWithYear:year month:[currentDateComponents month] day:1 hour:0 minute:0 second:0 timeZone:nil];
NSDate *enddate = [NSCalendarDate dateWithYear:year month:[currentDateComponents month] day:31 hour:23 minute:59 second:59 timeZone:nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:31:02.290

您的代码并不总是按照您在文本中的描述进行。它创建两个日期，一个在本月初，一个在月底（如果该月有 31 天，如果它少于 31 天，则您的 endDate 将在下个月）。如果您在每个月的 1 日运行代码，它将创建一个未来 30 天的 NSDate，但仅在每个月的 1 日。

* * *

如果您真的想获得 60 天后的 NSDate，请使用以下代码：

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *sixtyDaysOffset = [[NSDateComponents alloc] init];
sixtyDaysOffset.day = 60;
NSDate *sixtyDaysFromNow = [calendar dateByAddingComponents:sixtyDaysOffset toDate:[NSDate date] options:0]; 
```

# silverlight - ExpandableContentControl 不会在内容调整大小时调整大小

> ID：10349386
> 
> 赞同：1
> 
> 时间：2012-04-27T10:58:04.947
> 
> 标签：silverlight

在树视图展开和折叠 ExpandableContentControl 不调整大小。以下是相同的代码：

```
 HorizontalContentAlignment="Stretch" 
                    HorizontalAlignment="Stretch"                        
                    MinWidth="225"                         
                    Height="Auto" 
                    >

            <layoutToolkit:AccordionItem  Header="A" >                                    
                <controls:TreeView Margin="5" SizeChanged="TreeView_SizeChanged" Grid.Row="0" Grid.Column="0" UseLayoutRounding="True">
                    <controls:TreeViewItem Header="Controls">
                        <controls:TreeViewItem Header="AutoCompleteBox"/>
                        <controls:TreeViewItem Header="Expander"/>
                        <controls:TreeViewItem Header="NumericUpDown"/>
                    </controls:TreeViewItem>
                    <controls:TreeViewItem Header="Layout">
                        <controls:TreeViewItem Header="DockPanel"/>
                        <controls:TreeViewItem Header="WrapPanel"/>
                        <controls:TreeViewItem Header="Viewbox"/>
                    </controls:TreeViewItem>
                    <controls:TreeViewItem Header="Charting">
                        <controls:TreeViewItem Header="ColumnSeries"/>
                        <controls:TreeViewItem Header="LineSeries"/>
                        <controls:TreeViewItem Header="PieSeries"/>
                    </controls:TreeViewItem>
                </controls:TreeView>

        </layoutToolkit:AccordionItem>

        <layoutToolkit:AccordionItem Content="item 2" Header="B -  long header"/>
        <system:String>regular string item 3</system:String>

    </layoutToolkit:Accordion> 
```

等待您的宝贵意见。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:30:40.567

这是一个已知的问题。请参阅[http://forums.silverlight.net/t/97918.aspx/1/10](http://forums.silverlight.net/t/97918.aspx/1/10)。你可以在那里找到一些解决方法。

# php - 使用 Mod Rewrite 重写 url？

> ID：10349388
> 
> 赞同：0
> 
> 时间：2012-04-27T10:58:16.170
> 
> 标签：php, .htaccess, mod-rewrite

我有以下格式：

```
http://www.mydomain.com/view/product/ID/CAT/TITLE 
```

ID 和 CAT 都是数字。所以，一些真实的例子：

```
http://www.mydomain.com/view/product/1/2/ipod
http://www.mydomain.com/view/product/3/4/40-inch-tv
etc 
```

我想知道我是否应该尝试使用 mod rewrite，以及如何，或者我是否应该修复 PHP 以正确处理路径。我想将上面的内容映射到类似的东西：

```
http://www.mydomain.com/CATEGORY/SUB_CATEGORY/TITLE 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:48:51.727

> 重写引擎开启
> 
> RewriteBase /
> 
> 重写规则 ^([A-Za-z0-9]+)$ /$1/ [R]
> 
> 重写规则 ^([A-Za-z0-9]+)$ index.php?cat=$1
> 
> 重写规则 ^([A-Za-z0-9]+)/([A-Za-z0-9]+)$ /$1/$2/ [R]
> 
> 重写规则 ^([A-Za-z0-9]+)/([A-Za-z0-9]+)$ index.php?cat=$1&subcat=$2
> 
> 重写规则 ^([A-Za-z0-9]+)/([A-Za-z0-9]+)/([A-Za-z0-9]+)$ /$1/$2/$3/ [R ]
> 
> 重写规则 ^([A-Za-z0-9]+)/([A-Za-z0-9]+)/([A-Za-z0-9]+)$ index.php?cat=$1&subcat= $2&标题=$3

在 php 中，您可以像往常一样获取变量，您还需要为输入的所有变量和/或仅类别或子类别制定规则，否则当有人尝试访问这些页面时，您将得到 404

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:09:32.907

我会说你的问题对我来说并不完全清楚。通过您的示例，您希望您的目标 URL 从`http://www.mydomain.com/view/product/1/2/ipod`.

会是：`http://www.mydomain.com/2/1/ipod`？

如果是，则启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^view/product/([0-9]+)/([0-9]+)/(.*)$ $2/$1/$3 [L,R,NC] 
```

# javascript - 这个正则表达式到底在做什么？

> ID：10349389
> 
> 赞同：0
> 
> 时间：2012-04-27T10:58:24.207
> 
> 标签：javascript, regex

我正在查看一些代码并找到以下正则表达式：

```
var querystring = querystring.replace(/[^&]+=\.?(?:&|$)/g, '') 
```

这是采用查询字符串并用空格替换所有以＆符号或问号开头的值吗？这里还有更多我看不到的事情吗？

非常感谢您的合乎逻辑的解释，并有助于对正则表达式有更多的了解。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:06:20.073

它似乎从查询字符串中删除了这些参数，其值为：

1.  空的
2.  等于`.`

例如：

```
"remove1=&remove2=.&keep1=..&keep2=a&keep3=b".replace(/[^&]+=\.?(?:&|$)/g, '')
// returns "keep1=..&keep2=a&keep3=b" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T11:04:29.677

`[^&]+`一个或多个非“&”字符

`=`文字“=”字符

`\.?`一个可选的“。”

`(?:&|$)`“&”字符或字符串的结尾

例如匹配

> Foobar=.&
> A=

# spring - 是否可以在某个 Maven 配置文件构建期间排除或忽略 junit 测试？

> ID：10349390
> 
> 赞同：2
> 
> 时间：2012-04-27T10:58:30.623
> 
> 标签：spring, junit, maven-3

想象一下，我有两个配置文件，一个用于生产，另一个用于测试环境。问题是，我只想为开发环境而不是生产环境执行一些测试。

我试图输入@ignore，但我不能说只在产品构建期间忽略它。我尝试使用 maven 的万无一失的插件，但我再次无法让它与每个配置文件的不同行为一起工作。

（PS：这是一个 spring-hibernate 项目，由 hazelcast、jms (activeMq)、scheduler (quartz) 等不同的技术提供。）

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:28:51.623

我们有一个系统，其中我们有三种测试大小（小、中和大）。我们创建了一个注释，允许我们用这些大小标记测试。我们还创建了一个规则，它将检查特定的环境变量并根据大小跳过测试。抱歉，我无法发布代码，但我们就是这样做的。

这里有一些关于谷歌如何做的帖子（我们的东西基于谷歌）

[http://blog.utest.com/how-google-tests-software-small-medium-and-large/2011/04/](http://blog.utest.com/how-google-tests-software-small-medium-and-large/2011/04/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T21:21:52.523

[您可以使用文档](http://maven.apache.org/general.html#skip-test)`maven.test.skip`中描述的参数忽略 junit 测试。您还可以将参数设置为配置文件的一部分。

```
<profile>
  <id>noTest</id>
  ...
  <properties>
    <maven.test.skip>true</maven.test.skip>
    ...
  </properties>
  ...
</profile> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:34:50.503

Maven 的 Surefire 插件：测试的包含和排除

# ruby-on-rails - 在 Rails 中重构和改进查询

> ID：10349394
> 
> 赞同：0
> 
> 时间：2012-04-27T10:58:35.507
> 
> 标签：ruby-on-rails, performance, postgresql, caching

**出口.rb**：

```
def latest_reports
  weekly_reports.limit(10)
end 
```

**Outlet_controller.rb**：

```
@all_outlets = Outlet.includes(:weekly_reports)
@search = @all_outlets.search(params[:q])   # load all matching records
@outlets = @search.result.order("created_at DESC").page(params[:page]) 
```

**出口/index.slim**：

```
- @outlets.each do |outlet|
  tr
    td= link_to outlet.name, outlet_path(outlet)
    th
      ul.reports
        li class="#{'done' if outlet.monitored_today}"
    th
      ul.reports
        - for report in outlet.latest_reports
          li class="#{'done' if report.quota_met}"= report.times_monitored 
```

我不确定为什么，但这会将其加载为几个不同的查询。我很确定这是因为我的控制器中的包含不正确（因为我在模型中使用了一种方法）。

如果有人可以帮助我改进这一点，我将非常感激:)。

**注意：**我在 PostgreSQL 上开发

**更新：：**发布了完整的控制器操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:07:44.370

至少在 rails 3 中，如果你使用

```
Model1.includes :model2 
```

那么结果是每个模型的一个查询。您可以从结果中访问关联模型的实例，并且不会进行额外的查询。

如果您真的想在一个查询中完成所有操作，可以执行以下操作：

```
Model1.joins(:model2).includes(model2) 
```

这将产生一个很好的长 JOIN 查询，一次加载两个模型的所有数据。Rails 将使用已加载的两个模型的实例填充结果。

所以，你应该可以更换

```
@all_outlets = Outlet.includes(:weekly_reports) 
```

和

```
@all_outlets = Outlet.includes(:weekly_reports).joins(:weekly_reports) 
```

它应该将所有内容组合到一个查询中。

# twitter-bootstrap - 引导表单布局“正确”的方式？

> ID：10349395
> 
> 赞同：12
> 
> 时间：2012-04-27T10:58:37.990
> 
> 标签：twitter-bootstrap

这是我的表格：

```
<div class="row">

<form class="well form-inline span6 offset3">

    <select name="data[Number][country]" id="NumberCountry">
        <option>Choose a country code:</option>
        <option value="+44">+44</option>
        <option value="+81">+81</option>
        <option value="+1">+1</option>
        <option value="+70">+70</option>
    </select>   
    <input type="text" class="input-small span2" placeholder="eg. 7764">
    <input type="password" class="input-small span2" placeholder="eg. 123456">
    <button class="btn btn-large btn-primary">Activate Your SIM</button>

</form>

</div> 
```

这是一个工作示例：

[http://jsfiddle.net/pickledegg/aJfMx/6/](http://jsfiddle.net/pickledegg/aJfMx/6/)

我已经使用 Bootstrap 进行了调整，但我试图了解如何使用行和跨度来“微调”布局。

我希望按钮集中并在其上方留出一些空间。正如你所看到的，我在那里捏造了一​​些行和跨类，但是有人可以告诉我这样做的“最佳实践”方式吗？它将帮助我更清楚地了解如何正确使用这个框架。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-29T14:46:05.170

^(刚看到你的回复，这是我对你的模型的看法。)

为了正确布局您的设计，我们首先需要将这些部分分成两行，一个输入行和一个按钮行，为此我们可以依靠`.control-group`引导程序设置的类来包含每个部分。因此，有了`.control-group`类，您的标记将如下所示：

```
<div class="container">

 <div class="row">
     <form class="well form-inline span8 offset2 custom-form">    
        <div class="control-group">
            <div class="controls">
                <select class="span4" name="data[Number][country]" id="NumberCountry">
                    <option>Choose a country code:</option>
                    <option value="+44">+44</option>
                    <option value="+81">+81</option>
                    <option value="+1">+1</option>
                    <option value="+70">+70</option>
               </select>
               <input type="text" class="input-small span2" placeholder="eg. 7764">
               <input type="password" class="input-small span2" placeholder="eg. 123456">
            </div>
        </div>
        <div class="control-group">
            <div class="controls center">
                <button class="btn btn-large btn-primary">Activate Your SIM</button>
            </div>
        </div>
    </form>
</div>

</div> <!-- /container --> 
```

这样，您将通过引导程序在输入和按钮行上设置一些边距，并且它们不会粘在一起。我注意到您还在设计中包含了响应式样式表，并且您的设置在调整窗口大小时会中断，在文档中的引导演示中也注意到了同样的情况，因此我们必须解决这个问题。为此，我创建了自己的`.custom-form`类，以便在调整屏幕大小时正确分隔输入和按钮行，这样您的更改不会影响您网站上可能拥有的其他引导元素。创建了另一个名为`.center`将您的按钮置于表单中心的类。

```
.custom-form input[class*="span"] {
    width: 146px;
}

.center {
    text-align:center;
}

@media (max-width: 767px) {
    .custom-form input[class*="span"], select[class*="span"] {
        margin-bottom:10px;
        width:100%;       
    }
}

@media (min-width: 768px) and (max-width: 979px) {
    .custom-form.span8 {
        width:548px;
    }
} 
```

演示：http: [//jsfiddle.net/aJfMx/8/](http://jsfiddle.net/aJfMx/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T23:51:59.670

我将根据较新版本的引导程序和模态的使用对此略有不同，但它适用于使用其他容器而不是模态。我没有从上述解决方案中拿走任何东西，因为它非常可靠；但是，我发布此内容的原因是因为较新的版本将确保跨浏览器支持和窗口大小调整。

您需要做的第一件事是调用 form-horizo​​ntal 类，然后为每个表单元素创建 form-group(s)。听起来比它更复杂：

```
<form class="form-horizontal" name="formName" action="" method="POST"> 
```

和

```
<!-- Name input-->
<div class="form-group">
    <label class="col-md-4 control-label" for="tokenName">Name</label>
        <div class="col-md-6">
            <input id="name" name="name" type="text" placeholder="Name" class="form-control">
        </div>
</div> 
```

看……一点也不差。

一旦你有了它，为表单组设置你的 col 长度，你应该处于相当好的状态。当您调整窗口大小时，这将强制调整大小。最好的部分是，除非您想自己定制表单外观，否则不需要修改 css。Bootstrap 为您处理它。如果您想进一步阅读但出于本文的目的，这里有一个非常好的教程（[http://tutsme-webdesign.info/bootstrap-3-contact-modal/ ）；](http://tutsme-webdesign.info/bootstrap-3-contact-modal/)这是我根据教程快速整理的内容。

```
<a href="#" data-toggle="modal" data-target="#modalName">Some Link Here</a>
<div class="modal fade" id="modalName" tabindex="-1" role="dialog" aria-labelledby="modalName" aria-hidden="true">
    <div class="modal-dialog>
        <div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Some Header Here</h4>
    </div>
    <div class="modal-body">
        <div class="container center-block">
            <form class="form-horizontal" name="formName" action="" method="POST">
                <fieldset>

                    <!-- Name input-->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="tokenName">Name</label>
                        <div class="col-md-6">
                            <input id="name" name="name" type="text" placeholder="Name" class="form-control">
                        </div>
                    </div>

                    <!-- URL input-->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="url">URL</label>
                        <div class="col-md-6">
                            <input id="url" name="url" type="text" placeholder="http://somedomain.com" class="form-control">
                        </div>
                    </div>

                    <!-- Entity Association -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="associationId">Association</label>
                        <div class="col-md-6">
                            <select class="form-control" id="associationId" name="associationId">
                                <option>Choose an Association</option>
                                <option value="1">Programming</option>
                            </select>
                        </div>
                    </div>

                    <!-- Message body -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="description">Description</label>
                        <div class="col-md-6">
                            <textarea class="form-control" id="description" name="description" placeholder="Please enter your description here..." rows="5"></textarea>
                        </div>
                    </div>

                    <!-- Form actions -->
                    <div class="form-group">
                        <div class="col-md-10 text-right">
                            <button type="submit" value="Submit" class="btn btn-primary btn-lg">Save</button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
</div>
</div>
</div> 
```

# java - 如何使用 itext 将 doc 转换为 pdf 文件

> ID：10349396
> 
> 赞同：-1
> 
> 时间：2012-04-27T10:58:38.170
> 
> 标签：java, itext, apache-poi

我需要如何使用 itext 将 doc 转换为 pdf 文件。

我正在使用以下代码它不起作用。我正在使用 itext 2.1.7.jar。

出现以下错误：

```
Exception in thread "main" ExceptionConverter: java.io.IOException: The document
    has no pages.at com.lowagie.text.pdf.PdfPages.writePageTree(Unknown Source)
at com.lowagie.text.pdf.PdfWriter.close(Unknown Source)
at com.lowagie.text.pdf.PdfDocument.close(Unknown Source)
at com.lowagie.text.Document.close(Unknown Source) 
```

这是我的来源：

```
 POIFSFileSystem fs = null;  
    Document document = new Document();
     try {  
         System.out.println("Starting the test");  
         fs = new POIFSFileSystem(new FileInputStream("D:\\Result1.doc"));  

         HWPFDocument doc = new HWPFDocument(fs);  
         WordExtractor we = new WordExtractor(doc); 

         //OutputStream file = new FileOutputStream(new File("D:\\test.pdf"));
         PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("D:\\test.pdf"));  
              Range range = doc.getRange();
         document.open();  
         writer.setPageEmpty(true);  
         document.newPage();  
         writer.setPageEmpty(true);  
         String[] paragraphs = we.getParagraphText();  
         for (int i = 0; i < paragraphs.length; i++) {  
             org.apache.poi.hwpf.usermodel.Paragraph pr = range.getParagraph(i);
             paragraphs[i] = paragraphs[i].replaceAll("\\cM?\r?\n", "");  
         System.out.println("Length:" + paragraphs[i].length());  
         System.out.println("Paragraph" + i + ": " + paragraphs[i].toString());  
         }  
         System.out.println("Document testing completed");  
     } catch (Exception e) {  
         System.out.println("Exception during test");  
         e.printStackTrace();  
     } finally {  
         document.close();  
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:02:33.137

您没有向 PDF 文档添加任何内容（只是一个空白的新页面）。要添加实际内容，请使用 Document 类的[add(Element)](http://api.itextpdf.com/itext/com/itextpdf/text/Document.html#add%28com.itextpdf.text.Element%29)方法。

# jquery - jquery addClass 不起作用：“不支持属性或方法 addClass”

> ID：10349403
> 
> 赞同：1
> 
> 时间：2012-04-27T10:59:15.270
> 
> 标签：jquery, jquery-selectors, addclass

我得到了这个javascript工作

```
$(".mail-tile").click(function () {
    var idMessage = $(this).attr('data-message-id');
    $('.mail-tile').removeClass(classeEvidenzaRigaSelezionata);
    $(this).addClass(classeEvidenzaRigaSelezionata);
    previewMail(this);        
}); 
```

然后，在同一个页面，同一个 js 文件中，我有这个 javascript：

```
function selectMail(idMail) {
    var mailTile = $('.mail-tile[data-message-id="' + idMail + '"]')[0];    
    $('.mail-tile').removeClass(classeEvidenzaRigaSelezionata);
    mailTile.addClass(classeEvidenzaRigaSelezionata);
    previewMail(mailTile);
} 
```

在这种情况下，addClass 函数不起作用：“不支持属性或方法 addClass”。

`classeEvidenzaRigaSelezionata`是一个全局变量。

我不明白这两个片段之间有什么区别。在这两种情况下，我都有一个 HtmlDivElement 可以使用（对象不为空）。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:04:49.310

您需要删除ID 选择器后的**[0] 。**那不会给你你以后`jQuery element`使用的那个`addClass(classeEvidenzaRigaSelezionata)`。

改用这个：`var mailTile = $('.mail-tile[data-message-id="' + idMail + '"]');`

# c# - 更改 URL 的单个路由部分

> ID：10349404
> 
> 赞同：4
> 
> 时间：2012-04-27T10:59:18.143
> 
> 标签：c#, asp.net-mvc

我有以下路线：

```
routes.MapRoute(
    "Default", // Route name
    "{language}/{controller}/{action}/{id}",
    new { language = "en", controller = "XY", id = UrlParameter.Optional } 
); 
```

为了更改网站的语言，我想创建与当前页面的 url 完全对应的链接，但有另一个语言部分。

生成这样一个链接的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T14:12:40.227

最有可能的是，您希望将该`{language}`值作为每个链接渲染视图的 ViewModel 或 ViewData 的一部分插入。有几种不同的方法可以实现这一目标；例如重载控制器的`OnActionExecuted()`方法。如果你采用这种方法，我建议让你的所有控制器都继承自一个基本控制器。

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    filterContext.Controller.ViewData["Language"] = GetUserLanguage();
    base.OnActionExecuted(filterContext);
} 
```

然后在您的视图中：

```
@Url.Action("Index", "Home", new { language = ViewData["Language"] }) 
```

或者，您可以考虑使用自动附加此值的逻辑重载`Url.Action()`and方法。`Html.ActionLink()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:15:48.533

你可以这样做：

```
@Html.RouteLink("Switch Language", "Default", new { 
    controller = ViewContext.RouteData.Values["controller"], 
    action = ViewContext.RouteData.Values["action"], 
    id = ViewContext.RouteData.Values["id"], 
    language = "fr" 
}) 
```

不过，制作一个扩展方法来处理这个问题可能是有意义的。

# c# - 文件、字符串和保存

> ID：10349406
> 
> 赞同：-1
> 
> 时间：2012-04-27T10:59:22.987
> 
> 标签：c#

我在试图弄清楚这一点时遇到了麻烦。当我认为我拥有它时，我被告知没有。这是它的图片。 ![在此处输入图像描述](../Images/0d8e56ec63b54ce2f9dde17f6dbc7f8f.png)

我正在处理保存按钮。现在，在用户添加名字、姓氏和职位后，他们可以保存它。如果用户加载文件并且它出现在列表框中，则该人应该能够单击名称，然后单击编辑按钮，他们应该能够对其进行编辑。我有代码，但我确实得到通知，它看起来很古怪，字符串应该有名字、姓氏和职位。

当我学习 C# 时，这让我非常困惑。我知道如何使用 savefiledialog，但我不允许在这个上使用它。这是我应该做的事情：

> 当用户单击“保存”按钮时，将所选记录写入 txtFilePath 中指定的文件（绝对路径不是相对路径），而不截断当前内部的值。

我仍在处理我的代码，因为我被告知在一组三个字符串中写入记录会更好。但这是我现在拥有的代码。

```
 private void Save_Click(object sender, EventArgs e)
    {

            string path = txtFilePath.Text;

            if (File.Exists(path))
            {
                using (StreamWriter sw = File.CreateText(path))
                {

                    foreach (Employee employee in employeeList.Items)
                        sw.WriteLine(employee);
                }
            }
            else
                try
            {

                StreamWriter sw = File.AppendText(path);

                foreach (var item in employeeList.Items)
                    sw.WriteLine(item.ToString());

            }

    catch
{
    MessageBox.Show("Please enter something in");
} 
```

现在我不能使用保存或打开文件对话框。用户应该能够打开 C、E、F 驱动器上或其所在位置的任何文件。我还被告知它应该是 obj.Also 程序应该处理和出现的异常。

我知道这可能是一个菜鸟问题，但我的思绪被卡住了，因为我仍在学习如何使用 C# 进行编码。现在我一直在寻找和阅读。但是我没有找到可以帮助我理解如何将所有这些都包含在 1 个代码中的东西。如果有人可以提供帮助，甚至可以指出一个更好的网站，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:09:28.433

您必须确定适合您需要的储蓄方式。存储此信息的一种简单方法是 CSV：

```
"Firstname1","Lastname 1", "Jobtitle1"
" Firstname2", "Lastname2","Jobtitle2 " 
```

如您所见，数据不会被截断，因为分隔符`"`用于确定字符串边界。

如[这个问题](https://stackoverflow.com/questions/1684667/writing-a-csv-file-in-net)所示，使用[CsvHelper](https://github.com/JoshClose/CsvHelper)可能是一种选择。但鉴于这是家庭作业和其中的限制，您可能必须自己创建此方法。您可以将其放入`Employee`（或制作`override ToString()`）中，以执行以下操作：

```
public String GetAsCSV(String firstName, String lastName, String jobTitle)
{
    return String.Format("\"{0}\",\"{1}\",\"{2}\"", firstName, lastName, jobTitle);
} 
```

我将把如何读回数据的方法留给你作为练习。;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:39:03.600

当您使用 WriteLine 编写员工对象时，正在调用底层的 ToString()。您首先要做的是自定义 ToString() 方法以满足您的需求，以这种方式：

```
public class Employee
{
    public string FirstName;
    public string LastName;
    public string JobTitle;

    // all other declarations here
    ...........

    // Override ToString()
    public override string ToString()
    { 
         return string.Format("'{0}', '{1}', '{2}'", this.FirstName, this.LastName, this.JobTitle);
    }
} 
```

这样，您的编写代码仍然保持干净和可读。

顺便说一句，没有 ToSTring 的反向等效项，但要遵循 .Net 标准，我建议您实现 Employee 的方法，例如：

```
public static Employee Parse(string)
{
        // your code here, return a new Employee object
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:47:45.437

有很多很多方法可以将数据存储在文件中。此代码演示了 4 个非常易于使用的方法。但关键是您可能应该将数据拆分成单独的部分，而不是将它们存储为一个长字符串。

```
public class MyPublicData
{
  public int id;
  public string value;
}

[Serializable()]
class MyEncapsulatedData
{
  private DateTime created;
  private int length;
  public MyEncapsulatedData(int length)
  {
     created = DateTime.Now;
     this.length = length;
  }
  public DateTime ExpirationDate
  {
     get { return created.AddDays(length); }
  }
}

class Program
{
  static void Main(string[] args)
  {
     string testpath = System.IO.Path.Combine(
        Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "TestFile");

     // Method 1: Automatic XML serialization
     // Requires that the type being serialized and all its serializable members are public
     System.Xml.Serialization.XmlSerializer xs = 
        new System.Xml.Serialization.XmlSerializer(typeof(MyPublicData));
     MyPublicData o1 = new MyPublicData() {id = 3141, value = "a test object"};
     MyEncapsulatedData o2 = new MyEncapsulatedData(7);
     using (System.IO.StreamWriter w = new System.IO.StreamWriter(testpath + ".xml"))
     {
        xs.Serialize(w, o1);
     }

     // Method 2: Manual XML serialization
     System.Xml.XmlWriter xw = System.Xml.XmlWriter.Create(testpath + "1.xml");
     xw.WriteStartElement("MyPublicData");
     xw.WriteStartAttribute("id");
     xw.WriteValue(o1.id);
     xw.WriteEndAttribute();
     xw.WriteAttributeString("value", o1.value);
     xw.WriteEndElement();
     xw.Close();

     // Method 3: Automatic binary serialization
     // Requires that the type being serialized be marked with the "Serializable" attribute
     using (System.IO.FileStream f = new System.IO.FileStream(testpath + ".bin", System.IO.FileMode.Create))
     {
        System.Runtime.Serialization.Formatters.Binary.BinaryFormatter bf = 
           new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
        bf.Serialize(f, o2);
     }

     // Demonstrate how automatic binary deserialization works
     // and prove that it handles objects with private members
     using (System.IO.FileStream f = new System.IO.FileStream(testpath + ".bin", System.IO.FileMode.Open))
     {
        System.Runtime.Serialization.Formatters.Binary.BinaryFormatter bf =
           new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
        MyEncapsulatedData o3 = (MyEncapsulatedData)bf.Deserialize(f);
        Console.WriteLine(o3.ExpirationDate.ToString());
     }

     // Method 4: Manual binary serialization
     using (System.IO.FileStream f = new System.IO.FileStream(testpath + "1.bin", System.IO.FileMode.Create))
     {
        using (System.IO.BinaryWriter w = new System.IO.BinaryWriter(f))
        {
           w.Write(o1.id);
           w.Write(o1.value);
        }
     }

     // Demonstrate how manual binary deserialization works
     using (System.IO.FileStream f = new System.IO.FileStream(testpath + "1.bin", System.IO.FileMode.Open))
     {
        using (System.IO.BinaryReader r = new System.IO.BinaryReader(f))
        {
           MyPublicData o4 = new MyPublicData() { id = r.ReadInt32(), value = r.ReadString() };
           Console.WriteLine("{0}: {1}", o4.id, o4.value);
        }
     }
  }
} 
```

# jquery - 在 Rails 中使用 PJax 在 Doc Ready 上加载所有 jQuery 变量

> ID：10349407
> 
> 赞同：3
> 
> 时间：2012-04-27T10:59:23.267
> 
> 标签：jquery, ruby-on-rails, ajax, pjax

我已经在这个论坛和互联网上搜索了这个问题的答案，但我似乎找不到正确的解决方案/我不完全理解它......

我之前设置了一个 rails 应用程序来展示一个简单的幻灯片。在此，我使用 jQuery 通过移动容器来显示下一张“幻灯片”。然后我决定实施 pxax 只加载产量而不是整页。除了我的 jQuery，所有这些都可以正常工作。我看到，如果您添加 on() 委托，该事件会再次触发，但是我的 window = $(window) 和 div = $(div) 之类的初始变量不再起作用。

```
$(function() {

var presentation_carousel = $('.carousel')
var carousel_width = $(".slide").length * 700;
var carousel_max_next = ((carousel_width - 700) * -1);

var view_window = $(window);
var nav_collapse = $('div.nav-collapse');

presentation_carousel.css('width', carousel_width+"px")

$('.button_next').on ('click', function(e) {
    $('.button').animate({
        opacity: 0
    }, 100)
    presentation_carousel.animate({
        'marginLeft' : "-=700px"
    }, 500, function(){
        $('.button').css('display', 'block');
        $('#quiz_carousel .button_next').css('display', 'none');

        $('.button').animate({
            opacity: 1
        }, 500)
    })
}); 
```

具体来说，presentation_carousel div 的动态调整大小不再被触发。我还看到，如果我在文档就绪标签中添加一个标准的 console.log，它就不再被触发了？

如果有人可以解释 pjax 如何与标准 jQuery 一起工作，并且如果有人可以帮助我解决我的代码，那就太好了？

我确实通过不使用函数内部的变量而是每次都跨越dom来完成所有工作。但这感觉有点hacky......例如

```
presentation_carousel.animate({}) 
// became
$('.carousel').animate({}) 
```

对此的任何帮助或建议都非常受欢迎。我是 Rails 的新手，并且总是乐于接受关于干燥和改进我的 jQuery 的建议。

谢谢

编辑：从布局中的 application.html.erb 执行。这是调用 yield 的唯一位置，它位于主容器 div 中。

```
<div class="span9">
  <div data-pjax-container>
    <%= yield %>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:24:09.183

内置的[jquery-pjax 事件](http://github.com/defunkt/jquery-pjax#events)可能就足够了。`$(document).on("pjax:end", handler)`大致相当于`$(document).ready(handler)`。自然，您仍然需要准备好的处理程序来进行初始页面加载。;)

# c# - SQL Server CE性能，从表中选择7000条记录需要8s

> ID：10349409
> 
> 赞同：4
> 
> 时间：2012-04-27T10:59:27.143
> 
> 标签：c#, sql, sql-server, sql-server-ce

我有 SQL Server CE 3.5 数据库。我运行以下代码：

```
private void Load(string sql)
{
  if (connection.State != ConnectionState.Open)
    connection.Open();
  SqlCeDataAdapter sqlCeDataAdapter = new SqlCeDataAdapter(sql, connection);

  Stopwatch watch = new Stopwatch();

  DataSet dataSet = new DataSet();
  try
  {
    Cursor.Current = Cursors.WaitCursor;
    watch.Start();

    sqlCeDataAdapter.Fill(dataSet, "items");
    sqlCeDataAdapter.Dispose();

    var myBind = new BindingSource(dataSet, "items");
    grid.DataSource = myBind;
  }
  finally
  {
    watch.Stop();
    Cursor.Current = Cursors.Default;
    MessageBox.Show(watch.ElapsedMilliseconds.ToString());
  }      
}

Load ("select a1, a2 from table"); 
```

SQL Server CE 是不是很长，还是应该加载得更快？

我能做些什么来加快这个选择？

当我将连接与其他表一起使用时，时间会急剧增加......

编辑：

我已经更改了以下新版本的代码，但仍然是 7.5 秒。...

```
private void Load2 (string sql)
{
  if (connection.State != System.Data.ConnectionState.Open)
  {
    connection.Open();
  }

  using (SqlCeCommand command = new SqlCeCommand(sql, connection))
  {
    Stopwatch watch = new Stopwatch();

    Cursor.Current = Cursors.WaitCursor;
    watch.Start();
    using (SqlCeDataReader reader = command.ExecuteReader())
    {
      DataSet dataSet = new DataSet();

      dataSet.Tables.Add("items");

      dataSet.Tables["items"].Columns.Add("s1");
      dataSet.Tables["items"].Columns.Add("s2");

      while (reader.Read())
      {
        string s1 = reader.GetString(0);
        string s2 = reader.GetString(1);

        dataSet.Tables["items"].Rows.Add(s1, s2);
      }
      watch.Stop();
      Cursor.Current = Cursors.Default;
      MessageBox.Show(watch.ElapsedMilliseconds.ToString());

      BindingSource binding = new BindingSource(dataSet, "items");
      grid.DataSource = binding;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:11:00.390

`SqlCeDataAdapter.Fill(...)`只是出了名的慢。如果您确实需要性能，则需要使用 a[`SqlCeDataReader`](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcedatareader%28v=vs.80%29.aspx)代替。

```
private void Load(string sql) {
    if (connection.State != System.Data.ConnectionState.Open) {
        connection.Open();
    }

    using (SqlCeCommand command = new SqlCeCommand(sql, connection)) {
        using (SqlCeDataReader reader = command.ExecuteReader()) {
            DataSet dataSet = new DataSet();

            dataSet.Tables.Add("items");

            while (reader.Read()) {
                DataRow row = dataSet.Tables["items"].NewRow();
                // fill your row

                dataSet.Tables["items"].Rows.Add(row);
            }

            BindingSource binding = new BindingSource(dataSet, "items");
            grid.DataSource = binding;
        }
    }
} 
```

当然，还要添加适当的错误处理，并根据自己的喜好进行清理。与实现相比，还有[实体框架](http://msdn.microsoft.com/en-us/library/aa697427%28v=vs.80%29.aspx)在性能上表现不错`DbDataAdapter`。

因为您使用的是 SqlCe，所以您还有其他限制因素，例如磁盘 IO，并且您没有处理任何优化的 SQL 事务的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-23T08:23:08.717

这个问题很老，但我想为今天可能找到它的谷歌用户提供一个快速的解决方案：

我可以用它在约 800 毫秒内查询 129000 个值。

```
var query = "SELECT timestamp FROM " + tablename;

                    SqlCeCommand cmdGetOldMasterId = new SqlCeCommand(query, _con);
                    SqlCeDataReader reader = cmdGetOldMasterId.ExecuteReader();

                    var queried_data = new List<int>();

                    while(reader.Read())
                    {
                        queried_data.Add(reader.GetInt32(0));
                    } 
```

当然，您必须根据需要调整代码，因此如果您想获取字符串，则需要更改 reader.Get 命令，列表等。

# javascript - 如何使用javascript检测实时网络摄像头的亮度

> ID：10349412
> 
> 赞同：1
> 
> 时间：2012-04-27T10:59:41.077
> 
> 标签：javascript, webcam, brightness

我想使用网络摄像头检测我房间的亮度并将它们保存到数据库中。我认为使用 javascript 是可能的，因为有很多用于网络摄像头的 jQuery 插件。我用谷歌搜索了很多，但没有得到任何好主意来完成这个。那么有人知道这件事吗？这个怎么做。

最好的，布里吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:06:35.120

我不认为你可以用纯 javascript 实现这一点，但如果你可以抓取图像，那么只需将其发送到服务器并使用服务器端脚本来分析图像的亮度并将其存储在数据库中。

在服务器端，你会发现更多的脚本来做这些事情，在 javascript 中，我不知道在分析图像方面所做的任何工作。

这可能有助于[快速获得图像的亮度/亮度](https://stackoverflow.com/questions/8745670/quickly-get-brightness-lumanacity-of-images)

# javascript - 从回调中返回值

> ID：10349413
> 
> 赞同：0
> 
> 时间：2012-04-27T10:59:52.010
> 
> 标签：javascript

我以前没有任何 javascript 经验。

我正在尝试实现以下我希望用来返回值 lat 和 lng 的函数：

```
function get_address() {
    var geocoder = new google.maps.Geocoder()

    geocoder.geocode({ address: "SE-17270 Sverige"}, 
    function(locResult) {

    var lat = locResult[0].geometry.location.lat();
    var lng = locResult[0].geometry.location.lng();
    alert(lat);
    alert(lng);
    })
} 
```

我该怎么做呢？

所以我想做的是这样的：

```
 function get_address(postcode)
      {
        var geocoder = new google.maps.Geocoder()
        var lat
        var lng

        geocoder.geocode({ address: "SE-"+postcode+"Sverige"}, 
        function(locResult) {

            lat = locResult[0].geometry.location.lat();
            lng = locResult[0].geometry.location.lng();
        })
        return lat,lng
      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:03:55.270

使用回调来处理地理编码结果：

```
function myCallback(lat, lng) {
  // Process lat and lng.
}

function get_address(callback) {
    var geocoder = new google.maps.Geocoder()

    geocoder.geocode({ address: "SE-17270 Sverige"}, 
      function(locResult) {
          var lat = locResult[0].geometry.location.lat();
          var lng = locResult[0].geometry.location.lng();
          callback(lat, lng);
      }
    );
}
....
get_address(myCallback); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:04:30.420

您可以使用全局变量或返回数组中的值，例如：

**全局变量方法：**

```
lat = "";
lng = "";

function get_address() {
    var geocoder = new google.maps.Geocoder()

    geocoder.geocode({ address: "SE-17270 Sverige"}, 
    function(locResult) {

    lat = locResult[0].geometry.location.lat();
    lng = locResult[0].geometry.location.lng();
    alert(lat);
    alert(lng);
    })
} 
```

**数组方法：**

```
function get_address() {
    var geocoder = new google.maps.Geocoder()

    geocoder.geocode({ address: "SE-17270 Sverige"}, 
    function(locResult) {

    var lat = locResult[0].geometry.location.lat();
    var lng = locResult[0].geometry.location.lng();

    thearray = [];
    thearray.push(lat);
    thearray.push(lng);
    return thearray;
    })
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:06:14.067

在标题部分添加谷歌库：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
```

纠正语法错误然后启动函数：[DEMO](http://jsfiddle.net/SkJdH/)

代码（带有 jquery onload）：

```
var lat = "";
var lng = "";

function getLatLng(callback) {
    lat = callback.lat();
    lng = callback.lng();
    alert(lat +" "+lng);
}

$(function() {
    var geocoder = new google.maps.Geocoder()

    geocoder.geocode({
        address: "SE-17270 Sverige"
    }, function(locResult) {
        getLatLng(locResult[0].geometry.location);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T11:03:00.007

声明变量`lat`和`lng`外部回调函数。

# java - java - 找不到符号

> ID：10349426
> 
> 赞同：2
> 
> 时间：2012-04-27T11:00:56.947
> 
> 标签：java

如果我的主要方法中有这个：`PrintWriter output = new PrintWriter(new FileWriter(args[1]));`

这是另一种方法：`output.println(currentLine);`

`import java.io.*;`显然，

有谁知道我为什么会得到

```
cannot find symbol
symbol  : variable output
location: class TestClass
        output.println(currentLine); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:08:25.637

编译器告诉您名称（符号）`output`未在您要使用它的范围（和封闭范围）中定义。基于定义

```
PrintWriter output = new PrintWriter(new FileWriter(args[1])); 
```

似乎您`output`在`main()`函数中定义，但想在类中使用它`TestClass`，这是无效的，因为`output`仅在其中定义`main()`

假设`main()`在`TestClass`你可以在类中定义`output`，然后在类中分配它的值`main()`并稍后在类中使用它：

```
public class TestClass {
  PrintWriter output;
  public void write(String currentLine) {
    output.println(currentLine);
  }

  public static void main(String[] args) {
    TestClass tc = new TestClass();
    tc.output = new PrintWriter(new FileWriter(args[1]));
    tc.write("Sometext");
  }
} 
```

# .net - 如何从 WPF 应用程序控制 .NET Fez Panda II？

> ID：10349427
> 
> 赞同：0
> 
> 时间：2012-04-27T11:01:07.870
> 
> 标签：.net, .net-micro-framework

我的申请有问题。[我在.NET Micro Framework](http://en.wikipedia.org/wiki/.NET_Micro_Framework)中准备了一个库来控制灯光（我只想打开或关闭灯光）。我可以使用控制台应用程序测试我的库，但是当我添加一个新的 WPF 应用程序以通过按钮控制灯光时，我无法将库添加到引用中。示例：`Microsoft.SPOT.Hardware`不能导入到引用。

我使用 .NET [FEZ Panda II](http://wiki.tinyclr.com/index.php?title=FEZ_Panda_II)和 GHI NETMF v4.1 SDK。

注意：我只想通过按钮关闭和打开。我需要使用蓝牙或无线传感器与 Fez 通信吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:19:14.660

Microsoft.SPOT.Hardware 是 .NET Micro Framework 的一部分。如果您在添加引用时无法在 .NET 选项卡下的列表中找到它，您也可以；1:) 未安装 Microsoft .NET Micro Framework；或 2:) 创建项目时，您没有选择正确的应用程序类型。

我会按照这里的说明来确保您安装了所有正确的[SDK。：tinyCLR 支持网站](http://www.tinyclr.com/support)

此外，此链接也很重要：[向 FEZ 项目添加参考](http://wiki.tinyclr.com/index.php?title=First_Project)

按照 GHI Electronics 人员的指示，确保 Panda 上的固件是最新的。这与参考无关，但始终是好的做法。

然后从上述地址的教程部分开始。该网站非常适合您尝试做的事情。它甚至有一个像你一样闪烁 LED 的项目。

下面的代码用于淡化 LED，它来自 tinyCLR 网站：

```
using System;
using System.Threading;
using Microsoft.SPOT;
using Microsoft.SPOT.Hardware;

using GHIElectronics.NETMF.Hardware;
using GHIElectronics.NETMF.FEZ;

public class Program
{

static PWM MyFader = new PWM((PWM.Pin)FEZ_Pin.PWM.Di5);

public static void Main()
{
byte i = 0;
while (true)
{
MyFader.Set(10000, i);
if (i++ >= 100)
{
i = 0;
}
Thread.Sleep(10);
}
}
} 
```

# iphone - 这个 CGBitmapContext 有什么问题？

> ID：10349429
> 
> 赞同：0
> 
> 时间：2012-04-27T11:01:09.640
> 
> 标签：iphone, bitmap, cgcontext

```
 //Now it is thread safe.
    CGSize scaledSize = CGSizeMake(ceil(self.size.width * scaleRatio), ceil(self.size.height * scaleRatio));
    CGImageRef imageRef = self.CGImage;    

    //The output context.
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();    
    CGContextRef context = CGBitmapContextCreate(NULL,
                                                 (int)scaledSize.width,
                                                 (int)scaledSize.height,
                                                 8,
                                                 (int)(4 * scaledSize.width),
                                                 colorSpace,
                                                 kCGImageAlphaPremultipliedLast);

//Percent (101%)    
#define SCALE_OVER_A_BIT 1.01

    //Scale.
    CGContextScaleCTM(context, scaleRatio * SCALE_OVER_A_BIT, scaleRatio * SCALE_OVER_A_BIT);
    CGContextDrawImage(context, CGRectMake(0.0, 0.0, scaledSize.width, scaledSize.height), imageRef);

    CGImageRef scaledImageRef = CGBitmapContextCreateImage(context);    
    UIImage *scaledImage = [UIImage imageWithCGImage:scaledImageRef];    

    CGColorSpaceRelease(colorSpace);    
    CGImageRelease(imageRef); 
    CGImageRelease(scaledImageRef);     
    CGContextRelease(context);

    return scaledImage; 
```

它说：

> CGBitmapContextCreate：不支持的参数组合：8个整数位/分量；32 位/像素；三分量色彩空间；kCGImageAlphaPremultipliedFirst; 450 字节/行。

我应该改变什么？我看不出问题出在哪里。我必须创建一个 4 分量颜色空间吗？那是什么工厂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:02:41.867

```
BytesPerRow == 450 == 112.5 values per row… 
```

但是， 'ed 适当 - 您`scaledSize`是否`ceil`在实际程序中初始化这些值后修改它们？

# .net - 为什么当我将引用类型作为参数传递时，它没有赋值？

> ID：10349434
> 
> 赞同：1
> 
> 时间：2012-04-27T11:01:45.727
> 
> 标签：.net, c#-4.0, reference

这里，`Person`是一个类，因此是一个引用类型，当我将它作为参数传递给另一个函数并在那里分配它时，它应该被更改。

为什么`program.person`调用后这里是 null `ChangePerson`？

```
namespace IndirectlyPropertySet
{
    class Program
    {
        public Person _person;

        public Person person
        {
            get { return _person; }
            set
            {
                if (_person != value)
                {
                    _person = value;
                }
            }
        }

        static void Main(string[] args)
        {
            Program program = new Program();

            ChangePerson(program.person); 
            // Why program.person is null after executing this ?

            program.person = new Person() { Name = "b", Age = 2 };
        }

        static void ChangePerson(Person p)
        {
            Person pe = new Person() { Name = "a", Age = 1 };
            p = pe;
        }
    }

    public class Person
    {
        public string Name { get; set; }
        public int Age { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T11:09:05.243

作为@JonSkeet 答案的补充，如果您重写代码来执行此操作，它会起作用。

```
static void ChangePerson(ref Person p)
{
    Person pe = new Person() { Name = "a", Age = 1 };
    p = pe;
}

void Main()
{
    Person p = program.person;
    ChangePerson(ref p);
    // program.person will now be set to "a" with age 1 at this point
    program.person = p;   

    program.person = new Person() { Name = "b", Age = 2 };
} 
```

关键是通过引用传递引用类型*，*`ref`即将关键字添加到参数中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T11:03:45.977

> 为什么 program.person 在调用 ChangePerson 后在这里为空？

参数（它是一个引用）是按值传递的。当您更改*参数*的值以引用不同的对象时，根本不会更改参数。请注意，在这种情况下，您甚至没有传递变量的值 - 您正在传递评估（命名错误的）属性的结果。

了解以下之间的区别非常重要：

*   一个变量
*   引用（例如变量的*值*）
*   一个对象（引用值*所指*的对象）

请阅读我[关于在 C# 上传递参数的文章以](http://pobox.com/~skeet/csharp/parameters.html)获取更多信息。

# iphone - 如何编写代码以从电话簿中选择选定的电子邮件地址以从我的 iphone 应用程序发送电子邮件

> ID：10349435
> 
> 赞同：0
> 
> 时间：2012-04-27T11:01:46.333
> 
> 标签：iphone, objective-c, mfmailcomposeviewcontroller, abpeoplepickerview

我已经使用 MFmailComposer 实现了发送电子邮件代码...

**很好，但问题在于*选择收件人的电子邮件地址***。

***我想从通讯录联系人中获取电子邮件地址。***

请如何检索此任何帮助

我已经为它提供的联系人实现了一个 ABPeoplePickerNavigationController 委托方法

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker
      shouldContinueAfterSelectingPerson:(ABRecordRef)person
                                property:(ABPropertyID)property
                              identifier:(ABMultiValueIdentifier)identifier 
{
    if (property == kABPersonPhoneProperty) 
    {
        ABMultiValueRef emails = ABRecordCopyValue(person, property);
        CFStringRef phonenumberselected = ABMultiValueCopyValueAtIndex(emails, identifier);
        CFStringRef emailLabelSelected = ABMultiValueCopyLabelAtIndex(emails, identifier);
        CFStringRef emailLabelSelectedLocalized = ABAddressBookCopyLocalizedLabel(ABMultiValueCopyLabelAtIndex(emails, identifier));
        NSLog(@"\n EmailValueSelected = %@ \n EmailLabelSelected = %@ \n \EmailLabeSelectedlLocalized = %@", phonenumberselected, emailLabelSelected, emailLabelSelectedLocalized);

        recipientField.text = (NSString *)emails; //Crashes but accepts 'phonenumberselected'

       NSLog(@" emails###:%@...  phonenumberselected%@...  emailLabelSelected %@.... emailLabelSelectedLocalized %@")

    //emails###: ABMultiValueRef 0x80b7bc0 with 1 value(s) //**Log output Displyas like this**

        [ self dismissModalViewControllerAnimated:YES ];
        return NO;
    }   
    return YES; 
```

## }

***`How to write code to pick the selected EMail address from phone book`***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:28:41.530

以下链接用于实现的代码，其中从联系人获取电子邮件地址并添加到我们的数组中，

[参考链接](https://github.com/eaigner/COPeoplePickerViewController)

# python - 如何在python中转义“\”字符

> ID：10349439
> 
> 赞同：6
> 
> 时间：2012-04-27T11:02:02.757
> 
> 标签：python, regex

我对正则表达式非常陌生，并尝试使用 python 获取“\”字符

通常我可以像这样逃避“\”

```
print ("\\");
print ("i am \\nit"); 
```

输出

```
\
i am \nit 
```

但是当我在 regX 中使用它时，它并没有像我想象的那样工作

```
print (re.findall(r'\\',"i am \\nit")); 
```

并返回我的输出

```
['\\'] 
```

有人可以解释为什么

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-27T11:09:49.573

**编辑**：问题*实际上是*如何`print`处理列表和字符串。它打印字符串的表示，而不是字符串本身，只包含反斜杠的字符串的表示是`'\\'`. 所以`findall`实际上是正确地找到了单个反斜杠，但`print`没有像您期望的那样打印它。尝试：

```
>>> print(re.findall(r'\\',"i am \\nit")[0])
\ 
```

* * *

（以下是我的原始答案，可以忽略（完全无关），我最初误解了这个问题。但它似乎有点被赞成，所以我把它留在这里。）

字符串上的`r`前缀表示字符串处于“原始”模式，即`\`不被视为特殊字符（它与“正则表达式”没有任何关系）。

但是，`r'\'`它不起作用，因为您不能用反斜杠结束原始字符串，[它在文档中说明](http://docs.python.org/dev/reference/lexical_analysis.html#string-literals)：

> 即使在原始字符串中，字符串引号也可以用反斜杠转义，但反斜杠保留在字符串中；例如，r"\"" 是由两个字符组成的有效字符串文字：反斜杠和双引号；r"\" 不是有效的字符串文字（即使原始字符串也不能以奇数个反斜杠结尾）。具体来说，原始字符串不能以单个反斜杠结尾（因为反斜杠会转义后面的引号字符）。

但是您实际上可以使用非原始字符串来获取单个反斜杠：`"\\"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:02:22.227

> 有人可以解释为什么

因为`re.findall`找到了一个匹配，并且匹配文本由反斜杠组成。它给了你一个包含一个元素的列表，它是一个字符串，它有一个字符，它是一个反斜杠。

之所以这样写，是`['\\']`因为这是`'\\'`您编写“带有一个反斜杠的字符串”的方式 - 就像您在编写示例代码时必须做的那样`print "\\"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:08:16.663

请注意，您在这里使用了两种不同的字符串文字——常规字符串`"a string"`和原始字符串`r"a raw string"`。常规字符串文字观察反斜杠转义，因此要在字符串中实际放置反斜杠，您也需要对其进行转义。原始字符串文字将反斜杠视为任何其他字符，因此您可以在字符串中实际放入哪些字符（没有需要转义码的特殊字符）受到更多限制，但输入正则表达式之类的内容更容易，因为您不需要如果您需要添加反斜杠以在字符串内部有意义，则需要加倍反斜杠，而不仅仅是在创建字符串时。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-27T11:04:17.853

没有必要在原始字符串中转义反斜杠，除非反斜杠紧接在右引号之前。

# asp.net-mvc - log4net.Config.XmlConfigurator.Configure() 耗时太长

> ID：10349442
> 
> 赞同：1
> 
> 时间：2012-04-27T11:02:15.443
> 
> 标签：asp.net-mvc, log4net, unity-container, log4net-configuration

我使用 Log4Net 进行日志记录。当应用程序启动时，我打电话

log4net.Config.XmlConfigurator.Configure();

但是这条线需要 15 秒才能完成。难道我做错了什么？还是正常？

我正在使用 ASP.NET MVC 进行开发，使用 Unity 进行依赖注入。

在应用程序启动时，我调用 Bootstrapper Initialise 函数

```
protected void Application_Start()
{
    IUnityContainer container = Bootstrapper.Initialise();
    ...
    ...
} 
```

在 Bootstrapper Initialize 函数中，我注册了 ILog 类型。

```
private static IUnityContainer BuildUnityContainer()
{
    var container = new UnityContainer();
    ...
    ...
    container.RegisterType<ILog>("", new ContainerControlledLifetimeManager(),
        new InjectionFactory(factory =>
        LogManager.GetLogger(typeof(HomeController).Assembly, connectionString)));
    ...
    ...
} 
```

在 GetLogger 函数的开头，我调用了 configure 函数

```
public static ILog GetLogger(Assembly assembly, string connectionString)
{
    log4net.Config.XmlConfigurator.Configure();  //<----- it takes 15 seconds to finish
    ...
    ...
} 
```

**编辑
------------------------------------------------- --------------------------------**

```
<log4net>
  <appender name="AdoNetAppender" type="log4net.Appender.AdoNetAppender">
    <bufferSize value="0" />
    <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <connectionString value="data source=[database server];initial catalog=[database name];integrated security=false;persist security info=True;User ID=[user];Password=[password]" />
    <commandText value="INSERT INTO Log ([Date],[Thread],[Level],[Logger],[Message],[Exception],[UserId],[Operation],[EntityType],[EntityId],[IP],[Host],[SessionId],[LogGroup]) VALUES (@log_date, @thread, @log_level, @logger, @message, @exception, @UserId, @Operation, @EntityType, @EntityId, @IP, @Host, @SessionId, @LogGroup)" />
    <parameter>
      <parameterName value="@log_date" />
      <dbType value="DateTime" />
      <layout type="log4net.Layout.RawTimeStampLayout" />
    </parameter>
    <parameter>
      <parameterName value="@thread" />
      <dbType value="String" />
      <size value="255" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%thread" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@log_level" />
      <dbType value="String" />
      <size value="50" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%level" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@logger" />
      <dbType value="String" />
      <size value="255" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%logger" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@message" />
      <dbType value="String" />
      <size value="4000" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@exception" />
      <dbType value="String" />
      <size value="2000" />
      <layout type="log4net.Layout.ExceptionLayout" />
    </parameter>
    <parameter>
      <parameterName value="@UserId"/>
      <dbType value="Int32" />
      <layout type="log4net.Layout.RawPropertyLayout">
        <key value="UserId" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@IP"/>
      <dbType value="String" />
      <size value="25" />
      <layout type="log4net.Layout.RawPropertyLayout">
        <key value="IP" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@Host"/>
      <dbType value="String" />
      <size value="50" />
      <layout type="log4net.Layout.RawPropertyLayout">
        <key value="Host" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@LogGroup"/>
      <dbType value="Int32" />
      <layout type="log4net.Layout.RawPropertyLayout">
        <key value="LogGroup" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@Operation"/>
      <dbType value="Int32" />
      <layout type="log4net.Layout.RawPropertyLayout">
        <key value="Operation" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@EntityType"/>
      <dbType value="Int32" />
      <layout type="log4net.Layout.RawPropertyLayout">
        <key value="EntityType" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@EntityId"/>
      <dbType value="Int32" />
      <layout type="log4net.Layout.RawPropertyLayout">
        <key value="EntityId" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@SessionId"/>
      <dbType value="String" />
      <size value="88" />
      <layout type="log4net.Layout.RawPropertyLayout">
        <key value="SessionId" />
      </layout>
    </parameter>
  </appender>
  <root>
    <level value="ALL" />
    <appender-ref ref="AdoNetAppender" />
  </root>
</log4net> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:16:18.033

15 秒听起来像是（连接）超时，我相信默认超时是 15 秒。

我曾经遇到过类似的问题，结果是 CLR 试图在加载时验证身份验证签名以创建程序集的发布者证据。我不确定细节，但在程序集部分有一个名为“generatePublisherEvidence”的配置元素，可以将其关闭。你应该检查你是否想这样做。这意味着什么。如果您使用的是 .Net 4（或更高版本），这应该不会影响加载时间。

对于 Web 应用程序，无法在应用程序 web.config 中设置此设置。它应该在 .Net 框架目录的 aspnet.config 中设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T09:59:15.983

当您尝试调用以下语句时

```
log4net.Config.XmlConfigurator.Configure(); 
```

系统将尝试验证给定的数据库连接字符串。这里的问题是，您给定的连接字符串可能没有连接，它正在尝试连接，直到超时。

请验证您给定的连接字符串是否有效。

[http://techxposer.com/2017/08/08/log4net-config-xmlconfigurator-configure-taking-too-much-time/](http://techxposer.com/2017/08/08/log4net-config-xmlconfigurator-configure-taking-too-much-time/)

# jquery - jQuery.ajax 没有发送 XMLHTTPRequest 标头

> ID：10349445
> 
> 赞同：2
> 
> 时间：2012-04-27T11:02:29.430
> 
> 标签：jquery, ajax, xmlhttprequest

使用 1.7.2，我使用 jQuery.ajax() 提交表单：

```
jQuery.ajax({
    url: form.attr('action'),
    action: 'POST',
    dataType: 'json',
    data: {post_id: id},
    success: function(data) {
        console.log('hurrah!');
    },
    error: function() {
        console.log('whoops');
    }
}); 
```

我期待 .ajax() 调用来设置 XMLHTTPRequest 标头，但它不是：

```
Referer: http://0.0.0.0:5000/messages/news-feed
Origin: http://0.0.0.0:5000
Content-Length: 42
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.18.5 (KHTML, like Gecko) Version/5.2 Safari/535.18.5
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us
Content-Type: application/x-www-form-urlencoded
Accept-Encoding: gzip, deflate 
```

我尝试将`headers`设置添加到通话中，但没有任何区别；标题没有被设置：`"X-Requested-With":"XMLHttpRequest"`

我也试过

```
beforeSend: function (request) {
    request.setRequestHeader("X-Requested-With", "XMLHttpRequest");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:10:43.173

尝试这个

```
$.ajax({
url: form.attr('action'),
dataType:'json',
type:'POST',
success:function(data){
console.log(data);
},
error:function(jxhr){
console.log(jxhr.responseText);
}

}); 
```

# magento - 生成包时如何正确设置依赖项设置

> ID：10349454
> 
> 赞同：1
> 
> 时间：2012-04-27T11:03:29.100
> 
> 标签：magento, magento-1.6

我对 Magento 1.6.2 上的模块开发相对较新，我必须使用模块：

*   Company_JQueryUI（将 jqueryui + 主题文件添加到 Adminhtml 标题）
*   Company_Slider（带有文件上传的简单图像滑块）

我在开发环境中制作的这些模块可以正常工作，并且我被要求单独生成它们，这样在后端需要 JQueryUI 的任何模块都应该按需激活它并在安装过程中需要它。

我已经关注了关于打包阶段的 wiki 页面，在依赖项选项卡上我设置了以下内容：

```
Package : Company_JQueryUI
Channel : community
Min : 1.1.0
Max : 1.1.0
Files : (I really don't know whether this field is required and what should I put there, but the wiki just ignores this part. 
```

所有其他设置均已正确设置。

问题是当我开始安装滑块模块时，Magento Connect 不会生成任何关于缺少依赖项的异常，所以我可能需要在 /etc/moduels/Company_Slider.xml 中设置依赖项

```
<?xml version="1.0"?>
<config>
    <modules>
        <Company_Slider>
            <active>true</active>
            <codePool>local</codePool>
            <depends>
                <Company_JQueryUI />
            </depends>
        </Company_Slider>
    </modules>
</config> 
```

但是后来我遇到了一个更大的问题，Magento Connect 仍然忽略了对部署阶段的依赖，但是一旦完成，它就会产生异常，并且网站进入维护模式，阻止对其进行任何访问，并显示依赖异常空白页（Magento Connect）。

到目前为止，我所能做的就是手动删除模块文件以使站点再次运行，我不知道是我遗漏了什么还是部署过程中的错误。

PS：在 1.7 中解决的错误

# android - JAAS 和来自 android 的访问

> ID：10349455
> 
> 赞同：0
> 
> 时间：2012-04-27T11:03:37.333
> 
> 标签：android, jboss, jersey, jboss6.x, jaas

嗨，我已经使用 JAAS 保护了我的服务器并且我已经执行了 Web 身份验证，现在我必须使用 android 应用程序从移动应用程序进行身份验证，我们如何在身份验证后使用 Rest Web 服务，JAAS 是否支持从移动应用程序访问？我有一个 ws 可以让我验证登录名和密码是否正确；我怎样才能访问这个ws？在网络应用程序上有容器身份验证，所以在这样做之后，我可以使用我所有的 ws 在 android 上是否有这样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:17:36.057

它是通过执行一个从服务器获得授权的ws来解决的，当我调用一个ws时，我通常给它一个查询参数，它是登录并通过，所以服务器验证用户是否被授权执行操作，使用JAAS 我在每个方法的顶部都有注释@rolesallawed。

# java - 使用 Spring 调用存储过程时 JUnit 测试失败

> ID：10349458
> 
> 赞同：0
> 
> 时间：2012-04-27T11:03:49.533
> 
> 标签：java, plsql, oracle11g, junit4, spring-jdbc

我对 Spring JDBC 真的很陌生。我有 3 个没有共享数据的 JUnit 测试（不需要之前/之后的方法，因为它们在自己的数据文件中有自己的数据）

这些测试中的每一个都调用包内的存储过程。如果我单独运行测试，它们都通过但运行所有三个，一个失败：（如果我改变班级中测试的顺序，失败的一个会改变）

对存储过程的调用使用 Spring JDBC：

```
 SimpleJdbcCall callProcedure = new SimpleJdbcCall(jdbcTemplate)
                .withCatalogName("ADMIN.CALCULATE")
                .withProcedureName("GET_TOTALS")
                .useInParameterNames("account_no", "request_list")
                .withoutProcedureColumnMetaDataAccess()
                .declareParameters(
                        new SqlParameter("account_no", Types.INTEGER),
                        new SqlParameter("request_list", OracleTypes.ARRAY, "ADMIN.CALC_REQUEST_TAB"),
                        new SqlOutParameter("response_list", OracleTypes.ARRAY, "ADMIN.CALC_RESPONSE_TAB"));
        callProcedure.compile();
        Map<String, Object> inputParams = new HashMap<String, Object>();
        // set StructDescriptor and ArrayDescriptor
        genericTypeDTO.setStructDescriptorName("ADMIN.T_CALC_REQUEST_TYPE");
        genericTypeDTO.setArrayDescriptorName("ADMIN.CALC_REQUEST_TAB");
                   inputParams.put("account_no", accountNo);
        inputParams.put("clawback_list", genericTypeDTO);
        Map<String, Object> outData = (Map<String, Object>) callProcedure.execute(inputParams); 
```

以下是针对其中一项测试点击**callProcedure.execute(inputParams)时引发的异常：**

> 引起：org.springframework.jdbc.BadSqlGrammarException: CallableStatementCallback; 错误的 SQL 语法 [{call ADMIN.CALCULATE.GET_TOTALS(?, ?, ?)}]; 嵌套异常是 java.sql.SQLException: ORA-06533: 下标超出计数 ORA-06512: at "ADMIN.CALCULATE", line 2160 ORA-06512: at line 1

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:07:01.010

我认为您需要查看模拟框架。看起来您的单元测试彼此相关。单元测试实际上必须是不相关的，您可以通过使用模拟来实现这一点。

# php - HTML 表单停止重定向并允许 PHP 从 HTML 文件中调用 JavaScript

> ID：10349460
> 
> 赞同：2
> 
> 时间：2012-04-27T11:03:54.770
> 
> 标签：php, javascript, jquery, html

我希望 HTML 页面上的表单在发送时不刷新，我已经完成了，但我还希望允许`echo`PHP 文件中的命令能够从 HTML 文件中调用 JavaScript。

到目前为止，所有`echo`命令都没有被执行，这不是我所期望的。

以下是 HTML 和 PHP 文件中的一些代码：

HTML：

```
<script type="text/javascript">

function functionInFile() {
    alert("recieved");
}

    $(function() {  
      $(".postform").submit(function() {  
      var content = $(this).serialize();

      $.post('signup.php?', content);

      return false;

      });  
    });     

</script> 
```

和 PHP：

```
echo '<script type=\'text/javascript\'>functionInFile()</script>'; 
```

所以基本上，我希望 PHP 文件能够调用 HTML 文件中的函数，而在单击提交时不会被重定向。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:06:26.277

您可以使用成功回调`$.post()`来执行 PHP 传回的函数。试试这个：

PHP

```
// do some stuff with the posted data
echo 'functionInFile'; // name of js function to execute in calling page 
```

jQuery

```
function functionInFile() {
    alert("recieved");
}

$(function() {  
    $(".postform").submit(function() {  
        $.post(
            'signup.php?', 
            $(this).serialize(),
            function(func) {
                window[func]();
            },
            'text'
        );
        return false;
    });  
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:13:13.593

使用回调函数可能会更好`post`

> jQuery.post( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] )

因此，您将执行回复或预先确定的登录中的任何代码`onsusccess`

```
$.post( 'signup.php?', content,
      function( data ) {
          //data contains the reply of the post so you can 
          //exec the code like this using JavaScript
          //altogether eval is frowned upon because it is high overhead and opens
          //opens up to code injection or whatever
         //eval(data);
         //so you just execute whatever method you need
         functionInFile();
        //or you reply from server in json and converto tobject
        //reply: {'executeFunction': true}
       var obj = jQuery.parseJSON(data);
       if (data.executeFunction == true) { functionInFile(); }

      }
    ); 
```

[解析JSON](http://api.jquery.com/jQuery.parseJSON/)

为了使 PHP 回显工作。该页面必须重新加载，因为它是服务器端。

一个网页循环是服务器端，然后是客户端。

[服务器] -> [客户端 -> AJAX 到服务器 -> 服务器回复附件]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:20:16.927

看起来您发送的是正确的`<script>`标签。XHR 返回值被视为数据，而不是可执行代码。幸运的是，jQuery 有代码来检查你是否`<script>`在 dom 中插入标签并执行它。你应该能够做到：

```
$.post('signup.php?', content, function(html) {$(document).append(html);}); 
```

你的脚本将执行。

（不过，我建议以不同的方式实现这一点。我曾开发过在 AJAX 调用中发回大部分 javascript 的应用程序，调试起来很痛苦。最好用一个 JSON 对象发回下一个操作的字符串，然后将“已批准”操作的对象保留为字符串 -> 函数查找表。）

# php - 从数据库中回显下拉值

> ID：10349461
> 
> 赞同：0
> 
> 时间：2012-04-27T11:04:06.960
> 
> 标签：php

我的文本框显示了数据库中正确字段中的数据，但当它是下拉列表时（选择）

我试过这段代码

```
<?php
$rs_settings = mysql_query("SELECT * from thesis WHERE user_id = $user_id;");
?>

<form action="academic.php" method="post" name="regForm" id="regForm" >

<?php
$num_rows = mysql_num_rows($rs_settings);
if($num_rows > 0) { ?>

<?php while ($row_settings = mysql_fetch_array($rs_settings)) {?>

1a.question <span
class="required">*</span></td>
<select name="Applied_Elsewhere"  id="Applied_Elsewhere"  >
<option <? if  ($row_settings[Applied_Elsewhere]=='Y') { ?> selected <? } ?>
value="Y">Yes </option>
option <? if  ($row_settings[Applied_Elsewhere]=='N') { ?> selected <? } ?>
value="N">No </option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:06:54.550

尝试更改`<?`to`<?php`和`$row_settings[Applied_Elsewhere]`to`$row_settings['Applied_Elsewhere']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:32:11.767

```
<select name="Applied_Elsewhere"  id="Applied_Elsewhere"  >
<option <?php if($row_settings['Applied_Elsewhere']=='Y') { echo "selected='selected'"; } ?> value="Y">Yes </option>
<option <?php if($row_settings['Applied_Elsewhere']=='N') { echo "selected='selected'";  } ?> value="N">No </option>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:19:29.397

请尝试以下代码：

```
<?php
    $rs_settings = mysql_query("SELECT * from thesis WHERE user_id = $user_id;");
    ?>

    <form action="academic.php" method="post" name="regForm" id="regForm" >

    <?php

    $num_rows = mysql_num_rows($rs_settings);
    if($num_rows > 0) {
    while ($row_settings = mysql_fetch_array($rs_settings)) {

    1a.question <span
    class="required">*</span></td>
    print'<select name="Applied_Elsewhere"  id="Applied_Elsewhere"  >'
    if  ($row_settings['Applied_Elsewhere']=='Y')
    print '<option value="Y" selected>Yes </option>';
    else
    if  ($row_settings['Applied_Elsewhere']=='N')
    print '<option value="N" selected>No</option>';
    ?> 
```

# .htaccess - 这些 .htaccess mod_rewrite 规则可以压缩吗？

> ID：10349469
> 
> 赞同：0
> 
> 时间：2012-04-27T11:04:39.240
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite, redirect

我的 htaccess 文件中有一些 mod_rewrite 规则可以将不存在的页面重定向到默认页面，如下所示：

*   `http://domain.tld/category1/subcategoryX`
*   `http://domain.tld/category1/subcategoryX/`
*   `http://domain.tld/category1/subcategoryX/property1`
*   `http://domain.tld/category1/subcategoryX/property1/`

全部重定向到

*   `http://domain.tld/category1/subcategoryX/property1/value1`

我正在执行此重定向，因为子类别和属性没有页面，只有值有。

这些是规则：

```
RewriteRule ^category1/[a-z-]+$             http://%{HTTP_HOST}%{REQUEST_URI}/property1/value1 [R,NC,L]
RewriteRule ^category1/[a-z-]+/$            http://%{HTTP_HOST}%{REQUEST_URI}property1/value1 [R,NC,L]
RewriteRule ^category1/[a-z-]+/property1$   http://%{HTTP_HOST}%{REQUEST_URI}/value1 [R,NC,L]
RewriteRule ^category1/[a-z-]+/property1/$  http://%{HTTP_HOST}%{REQUEST_URI}value1 [R,NC,L] 
```

规则是有效的，但它们有点冗长。有什么技巧可以压缩规则吗？前两个之间的区别只是结束斜线，后两个也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:56:39.047

```
RewriteRule ^(category1/[a-z-]+)/?$             /$1/property1/value1 [R,NC,L]
RewriteRule ^(category1/[a-z-]+/property1)/?$   /$1/value1 [R,NC,L] 
```

或者你甚至可以重定向所有以 category1/ **开头的 url*

```
RewriteRule ^(category1/[a-z-]+)  /$1/property1/value1 [R,NC,L] 
```

# javascript - impress.js 的替代品

> ID：10349473
> 
> 赞同：0
> 
> 时间：2012-04-27T11:04:56.400
> 
> 标签：javascript, jquery, html, impress.js

我正在寻找一种替代工具，例如用于在线演示的 impress.js。有人可以建议我任何跨浏览器兼容的吗？

impress.js 是一个很棒的工具，但在旧版本的 Firefox、chrome 和 IE 中不受支持。我也尝试过[deck.js](http://imakewebthings.com/deck.js)，但这种转换也只在现代浏览器中支持。我也在寻找适用于旧版浏览器的东西。

任何帮助表示赞赏。提前致谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T11:10:19.773

闪光 ？大声笑这些框架正在使用什么（我怀疑是 CSS3）在旧浏览器上不起作用，所以你不会找到一个在 IE6-8 中做同样事情并工作的库。

# java - 如何从另一个类调用 Activity 方法？

> ID：10349480
> 
> 赞同：0
> 
> 时间：2012-04-27T11:05:45.943
> 
> 标签：java, android, android-activity

我的活动中有一个 WebView，它有一个 JSInterface ：

```
mWebView.addJavascriptInterface(new JSInterface(mWebView, this), "interfaceWebsite"); 
```

当我在我的界面中调用一个函数时，我希望看到一些视图（Textview/Button）被修改。

```
public void changeStep(int newStep){
                step = newStep;
                tvStep.setText("Etape "+step);
                step_info = getString(R.string.step3_info);

        }
    } 
```

step_info 有效（我的选项菜单更改），它只是一个字符串 var，但不是我的 TextView，它会引发 VM 中止。

我以这种方式调用函数（其中 addWebsiteActivity 在上面的代码中是“this”）：

```
addWebsiteActivity.changeStep(step); 
```

这有可能以适当的方式做到这一点吗？

谢谢

* * *

> 只有创建视图层次结构的原始线程才能接触其视图

这就是为什么我可以从 JSInterface 调用 changeStep 但我可以在我的活动类中......那我该怎么做呢？

* * *

解决方案是...

```
runOnUiThread(new Runnable() {
             public void run() {

                 step = newStep;
                 tvStep.setText("Etape "+step);
                 step_info = getString(R.string.step3_info);

            }
        }); 
```

像这样它知道这是主线程的代码。但奇怪的是 Eclipse 把我的虚拟机中止了上面的显式错误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:37:21.300

`changeStep`方法必须在 UI 线程内调用。您可以通过以下方式实现`runOnUiThread`：

```
addWebsiteActivity.runOnUiThread(new Runnable() {
    public void run() {
        changeStep(step);
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:20:30.853

在您的代码中将 step 更改为 newStep

# c++ - c++中异常的使用

> ID：10349482
> 
> 赞同：2
> 
> 时间：2012-04-27T11:05:50.640
> 
> 标签：c++, exception, std

在我的项目编码中，我必须使用 try catch 方法来查找函数执行状态。

```
 try
   {
      //sample code
      //calling functions
      function1();
      function2();
      //........
   }
   catch(//need to catch exception)
   { 
    return failure;
   } 
```

我的要求是我必须捕获从 try 块抛出的所有异常

我这里有两个选择，

1.  抓住（...）
2.  捕捉（标准：：异常）

我认为第一个将捕获所有异常。第二个，std::exception 是我程序中所有其他异常类的基类

```
 class MyException : public std::exception
   {
    // All the exceptions that i have use is derived from this class
   }. 
```

哪个更好，更有效。

这两种方法的工作方式是否相同。帮助我并提出任何方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T11:11:41.873

在这种情况下，您将按照以下顺序处理可能抛出的类型：

```
catch (MyException& e) {
  ...
}
catch (std::exception& e) {
  ...
}
catch (...) {
  ...
} 
```

这样，您可以先处理特定的错误/类型，然后在前面的处理程序不匹配时回退到弱（或无类型）处理程序。

> 哪个更好，更有效。

我推荐的顺序最适合按类型处理。IMO，在这种情况下效率不是问题，因为正确性优先，*希望*只有在特殊情况下才会抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:13:04.103

始终保持您的规范尽可能集中，以便您捕获那些您*知道*可能被抛出的异常，并在基本异常之前捕获派生异常（更专业）：

```
try
{
    // Some stuff
}
catch (Derived& e)
{
    // Deal with specifics of Derived
}
catch (Base& e) 
{
    // Deal with general case of Base
} 
```

*永远不要*在程序堆栈的最顶端使用`catch(...)`except（当然也不要在库中）。当你这样做时，你不能确定是什么导致了异常，因此你不一定要依赖你通常会使用的东西（比如内存管理） ETC。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:12:16.530

我建议您仅捕获指定的异常并仅在主函数中使用 catch(...) 。在我看来，使用异常的更好方法是每个模块实现一个异常，这样每个类都会抛出与类的模块相关的特定异常，而且不同的异常可能会以不同的方式处理，所以我相信

```
catch(const ExceptionType1& e){
}catch(const ExceptionType2& e){
} 
```

是更好的解决方案，其他一些仅阅读此代码的开发人员也会看到可以抛出和处理哪种异常......

# tfs - TFS 合并：无法丢弃变更集

> ID：10349483
> 
> 赞同：3
> 
> 时间：2012-04-27T11:05:55.933
> 
> 标签：tfs, merge

我们有一个变更集，开发人员在其中签入了对源分支和目标分支的更改，许多更改包括两个分支中的重命名。变更集从源分支到目标分支的合并进展顺利，但变更集仍保留在要合并的变更集列表中。

当我现在尝试再次合并变更集时，它显示“没有要合并的更改。”。并且变更集保留在队列中。

我们尝试使用命令行工具来丢弃变更集，如下所示：

> C:\src\project\sourceBranch>tf merge /discard /recursive /version:C8137~C8137 $/Project/sourceBranch $/Project/targetBranch

这没有帮助。我们还尝试使用其他选项，例如 /force 和 /baseless，但没有成功。

摆脱合并候选者之间的变更集还有哪些其他可能性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:28:51.383

好的，所以基本上你有一个变更集，其中包含属于两个直接相关的分支的项目。这使得使用变更集的“部分变更集”子组件合并此类变更集。

让我用更好的方式解释：

*   CS1234（您的变更集）
    *   分支 A 的部分 CS1234A（比如源分支）
    *   分支 B 的部分 CS1234B（比如目标）

您做了从 A 到 B 的合并，将 CS1234A 合并到 B。

现在，当您尝试从 A 到 B 的新合并时，您仍然有 CS1234 作为候选者，对吗？然后如果你选择它，什么都不做，这是完全可以理解的，因为你已经合并了 CS1234A 和 CS1234B 不属于源分支（A）。

对我来说，这看起来像是我已经遇到的 TFS 错误，我认为 Microsoft 使用 TFS 2010 RTM 修复了它，显然不是。

基本上 TFS 给你 CS1234 作为候选，因为它只有一部分被合并，但由于其他部分不能被合并，把它作为候选是没有意义的。

关于什么：

您启动从 B 到 A 的合并（以相反的方式），CS1234 是否作为候选者提供？我的假设是，如果您将 CS1234 从 B 合并到 A，那么当您显示从 A 到 B 的候选人时，您将不会再为这个变更集而烦恼。但我不知道您是否愿意这样做。

无论如何，您应该在[Microsoft Connect 站点上填写错误](http://connect.microsoft.com/)

# svn - SVN 更新后挂钩

> ID：10349484
> 
> 赞同：6
> 
> 时间：2012-04-27T11:06:03.923
> 
> 标签：svn, hook, phpstorm, post-update

我在网上搜索了有关如何在本地机器上实现更新后挂钩的信息，但我没有找到任何东西！特别是我想在我从 PHPStorm 3.0 更新我的 svn 副本后触发那个钩子。我写了一个 phing build.xml 来处理我想在 svn 更新后自动执行的任务。任何想法 ？提早提！

PS：我们的本地机器运行Win7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T22:40:33.737

As @Rup has mentioned, you'll need a client that supports client-side hooks (such as Tortoise SVN). Another option - write a script (batch file) that first runs svn update and then does other things you'd like to do in your hook.

# android - 使用意图过滤器启动活动

> ID：10349485
> 
> 赞同：0
> 
> 时间：2012-04-27T11:06:04.200
> 
> 标签：android, android-intent

我有多个活动的应用程序。开始活动 -> 登录活动 -> 地图活动。我有意图过滤器来拦截特定的 URL。我的问题是 - 意图过滤器用于地图活动。如果应用程序已启动 - 好的，因为应用程序处于活动状态并且地图活动正在使用中。如果应用程序未处于活动状态并且 android 必须启动我的应用程序然后进行地图活动？我有一系列活动。我可以绕过开始活动，但不能绕过登录活动。

我是否必须将意图过滤器放在启动活动中并通过数据处理活动直到到达地图活动？在这种情况下，如果应用程序已经启动并且地图活动已经初始化，会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:41:09.050

绕过活动是什么意思？
意图过滤器 .MAIN 是运行应用程序时首先执行的活动。如果您想在将意图传递给另一个活动时跳过一个活动，只需使用`finish();`. 请澄清您的问题。
参考： [http](http://www.texperia.com/starting-activity-using-intent-on-button-press-android/) ://www.texperia.com/starting-activity-using-intent-on-button-press-android/ 了解基础知识。

# ruby-on-rails-3 - Rails build_association 与 has_one 最佳实践建议中的子类

> ID：10349487
> 
> 赞同：1
> 
> 时间：2012-04-27T11:06:14.197
> 
> 标签：ruby-on-rails-3, activerecord

我有一个这样定义的用户类

```
class User
end 
```

我已经将其子类化以创建一个 Owner 类并与另一个 Company 类创建了 has_one 关系

```
class Owner < User
  has_one :company
end

class Company
  belongs_to :owner
end 
```

在我的用户控制器中创建新用户时，我想完成以下操作：

1.  创建新用户
2.  创建新公司
3.  将用户与公司关联（作为所有者，即 company.owner_id）

我可以使用以下代码完成此操作（为简洁起见）

```
def create
  @user = User.new(params[:user])
  @company = Company.new(params[:company])

  if @user.save
    @company.owner_id = @user.id
    @company.save
    ... 
```

现在，这让我觉得很难看，但我似乎无法让整个 build_asociation 过程按预期工作（是的，开发和测试中都有字段）。

我应该在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:46:34.137

如果你需要同时创建`Owner`和`Company`，我建议你使用`accepts_nested_attributes_for`in `Owner`。这是代码：

```
class Owner < User
  has_one :company
  accepts_nested_attributes_for :company
end 
```

然后在您的控制器中，您可以执行以下操作：

```
def create
  @user = User.new(params[:user]) # should it be User or Owner?
  @user.company_attributes = params[:company] # assume two separate forms for User and Company
  # if you use fields_for, however, company attributes are nested under params[:user] automatically.

  if @user.save
    # do your job here
  end
end 
```

如需完整参考，请查看[Active Record 嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html#method-i-accepts_nested_attributes_for)和视图助手[fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

# mysql - mysql中的选择查询问题

> ID：10349488
> 
> 赞同：1
> 
> 时间：2012-04-27T11:06:15.353
> 
> 标签：mysql, sql

我有一张最难的桌子

```
 One                        Two
   apple                      orange
   orange                     grapes 
   banana                     strawberry
   orange                     strawberry
   grapes                     apple 
```

现在你可以看到我在这里列出了 5 对。让我告诉你，这不是一张普通的桌子，因为在这张桌子上，水果的名字（苹果）有时在第一列，有时在第二列。

```
And another table Description
name             color  
apple            red
orange           orange
strawberry       pink
banana           yellow
grapes           black 
```

假设我是香蕉，我不想看到与我配对的水果的描述。 **现在有人可以告诉我如何在mysql中显示与以下所有内容配对但不与香蕉配对的水果的详细信息：草莓、葡萄、苹果。**

我说的是 mysql 不支持的方法。

```
Select * from description 
natural join (select one as name where two='apple' union select two as name where one='apple') as t1 
natural join (select one as name where two='grapes' union select two as name where one='grapes') as t2
natural join (select one as name where two='strawberry' union select two as name where one='strawberry') as t3
MINUS
Select * from description 
natural join (select one as name where two='banana' union select two as name where one='banana') as b6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:27:05.800

```
SELECT * FROM Description
NATURAL JOIN (
  SELECT One AS name FROM hardest WHERE Two = 'strawberry'
  UNION
  SELECT Two AS name FROM hardest WHERE One = 'strawberry'
) AS t1
NATURAL JOIN (
  SELECT One AS name FROM hardest WHERE Two = 'grapes'
  UNION
  SELECT Two AS name FROM hardest WHERE One = 'grapes'
) AS t2
NATURAL JOIN (
  SELECT One AS name FROM hardest WHERE Two = 'apple'
  UNION
  SELECT Two AS name FROM hardest WHERE One = 'apple'
) AS t3; 
```

* * *

**更新**

`banana`OP 更新了问题，添加了结果集应排除与;配对的任何水果的约束。然后他提出了一个使用 的解决方案`WHERE name NOT IN ( SELECT ... )`，但质疑外连接是否更有效。

首先，使用外连接的查询：

```
SELECT Description.* FROM Description
NATURAL JOIN (
  SELECT One AS name FROM hardest WHERE Two = 'strawberry'
  UNION
  SELECT Two AS name FROM hardest WHERE One = 'strawberry'
) AS t1
NATURAL JOIN (
  SELECT One AS name FROM hardest WHERE Two = 'grapes'
  UNION
  SELECT Two AS name FROM hardest WHERE One = 'grapes'
) AS t2
NATURAL JOIN (
  SELECT One AS name FROM hardest WHERE Two = 'apple'
  UNION
  SELECT Two AS name FROM hardest WHERE One = 'apple'
) AS t3
NATURAL LEFT JOIN (
  SELECT One AS name, TRUE As hasBanana FROM hardest WHERE Two = 'banana'
  UNION
  SELECT Two AS name, TRUE As hasBanana FROM hardest WHERE One = 'banana'
) AS t4
WHERE hasBanana IS NULL; 
```

关于哪个更有效，[本文](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)比较了不同的方法。它指出（关于`[NOT] IN ( SELECT ... )`：

> `LEFT JOIN`本质上，这与/使用的计划完全相同`IS NULL`，尽管这些计划是由不同的代码分支执行的，并且它们在`EXPLAIN`. 算法实际上是相同的，并且查询在同一时间完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T12:08:31.293

请确保我的写作方式是最有效的。如果您有其他更有效的方式，请写

```
 SELECT * FROM Description 
   NATURAL JOIN (   SELECT One AS name FROM hardest WHERE Two = 'strawberry'  
     UNION SELECT Two AS name FROM hardest WHERE One = 'strawberry' ) AS t1
   NATURAL JOIN (   SELECT One AS name FROM hardest WHERE Two = 'grapes'  
     UNION   SELECT Two AS name FROM hardest WHERE One = 'grapes' ) AS t2 
   NATURAL JOIN (   SELECT One AS name FROM hardest WHERE Two = 'apples' 
     UNION   SELECT Two AS name FROM hardest WHERE One = 'apples' ) AS t3
    where name not in ( SELECT One AS name FROM hardest WHERE Two = 'banana' 
     UNION   SELECT Two AS name FROM hardest WHERE One = 'banana') AS fz ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:20:26.683

我正在清理我的答案，因为问题正在远离原始问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T12:34:14.550

嗨，您有自己查询的答案，您必须使用`IN`. `=`请检查下面的查询...

```
select * from hardest,description where 
   (one=name and two IN ('apple' , 'strawberry','grapes')) 
   or 
   (one IN ('apple','strawberry' , 'grapes') and two=name) 
```

谢谢

# tsql - Region-Area-Point of interest查询优化

> ID：10349489
> 
> 赞同：1
> 
> 时间：2012-04-27T11:06:18.927
> 
> 标签：tsql

我的数据库具有以下结构：

每个地区 ( `CountryStates`) 可以有许多城市 ( `Areas`)。每个都`Area`可以有许多旅游景点或兴趣点 ( `POIs`)。我想获取每个地区有多少个地区和景点的列表。如果没有，我想显示 0。

这是我的查询：

```
SELECT Tab1.Reg AS Reg, CountAreas, CountPois
FROM
(SELECT 
        c.Name AS Reg, 
        COUNT(a.Id) AS CountAreas
FROM  
       CountryStates as c LEFT JOIN
       Areas AS a ON a.CountryStates_Id = c.Id
GROUP BY c.Name 
) as Tab1 left join
(SELECT 
        c1.Name AS Reg, 
        COUNT(p.Id) AS CountPois
FROM  
       CountryStates as c1 LEFT JOIN
       Areas AS a ON a.CountryStates_Id = c1.Id LEFT JOIN
       POIs AS p ON a.Id = p.Areas_Id
GROUP BY c1.Name 

) as Tab2 on Tab1.Reg = Tab2.Reg 
```

我怎样才能在一个查询中进行此查询`SELECT`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:09:53.670

此查询返回相同的结果：

```
SELECT c.Name AS Reg, 
        COUNT(DISTINCT(a.Id)) AS CountAreas,
        COUNT(p.Id) AS CountPois
FROM CountryStates as c 
    LEFT JOIN Areas as a ON a.CountryStates_Id = c.Id
    LEFT JOIN POIs AS p ON a.Id = p.Areas_Id
GROUP BY c.Name 
```

# erlang - Erlang 浮动和截断

> ID：10349491
> 
> 赞同：1
> 
> 时间：2012-04-27T11:06:20.667
> 
> 标签：erlang, floating-point, truncate

Windows 上的 R15b 提供：

```
>trunc(1.9999999999999999999).
2 
```

就此而言，只需键入 float 即可返回：

```
> 1.9999999999999999999\.              
2.0 
```

AFAIK，截断函数应该只删除小数部分（至少这是我需要的，无论如何）。地板功能也可能起到 AFAIK 的作用，但我看到的地板实现在线发布使用......你猜对了...... trunc。

我不是在挑剔这个，我实际上需要这个对于我正在开发的程序是正确的。

对此有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:36:08.767

您的问题是十进制数字表示为符合 IEEE 的二进制表示（32、64 或 128 位）。

如果您真的需要精度，您应该使用其他数字数据结构，如 [Binary Coded Decimal](http://en.wikipedia.org/wiki/Binary-coded_decimal)或 [定点算术](http://en.wikipedia.org/wiki/Fixed-point_arithmetic)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-27T12:58:22.560

如果你想让 TRUNC 浮动，也许这个可以帮助：

```
select substring (convert(varchar(14), CAST (20160303013458 as varchar(14))) , 1 , 8) 
```

# java - 开始时间在日历中设置

> ID：10349497
> 
> 赞同：-1
> 
> 时间：2012-04-27T11:06:36.677
> 
> 标签：java, calendar

我希望 2012 年 1 月 1 日将日历对象中的长值作为开始时间如何得到这个，我正在做如下

```
 Calendar today = Calendar.getInstance();
        today.set(Calendar.MILLISECOND, 0);
        today.set(Calendar.SECOND, 0);
        today.set(Calendar.MINUTE, 0);
        today.set(Calendar.HOUR, 0);
        long startTime = today.getTime().getTime(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:08:49.713

尝试这个：

```
Calendar firstOfYear = Calendar.getInstance();
firstOfYear.clear();
firstOfYear.set(Calendar.YEAR, 2012);
firstOfYear.set(Calendar.DAY_OF_YEAR,1); //first day of the year. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:28:32.473

```
this is the another way

String str_date="01-JAN-2012";
DateFormat formatter ; 
Date date ; 
formatter = new SimpleDateFormat("dd-MMM-yyyy");
date = (Date)formatter.parse(str_date); 
Calendar cal=Calendar.getInstance();
cal.setTime(date);
System.out.println("=======>"+cal.getTimeInMillis()); 
```

# c# - C# 上的 GStreamer UDPSRC 实现

> ID：10349500
> 
> 赞同：2
> 
> 时间：2012-04-27T11:06:40.133
> 
> 标签：c#, gstreamer

我正在尝试将命令行脚本实现到 Gstreamer c# windows 窗体应用程序。我将调试设置为“3 > Errorlog.txt”，但文件始终为空。我无法理解我做错了什么。命令行完美运行，但在 winforms 应用程序中没有任何反应。

这是命令行脚本： `gst-launch udpsrc port=1234 multicast-group="127.0.0.1" ! mpegtsdemux name=demuxer ! queue2 ! mpeg2dec ! ffmpegcolorspace ! videoscale ! directdrawsink`

和我的实现：

```
 private void Start(){

            Gst.Application.Init();

            pipeline = new Gst.Pipeline();

           udpsrc = Gst.ElementFactory.Make("udpsrc", "source");

           udpsrc["port"] = 1234;
           udpsrc["multicast-group"] = "127.0.0.1";

           demux = ElementFactory.Make("mpegtsdemux", "demuxer");
           demux["name"] = "demuxer";

           queue = ElementFactory.Make("queue2", "videoq");

           decode = ElementFactory.Make("mpeg2dec", "decode");
           space = ElementFactory.Make("ffmpegcolorspace", "space");
           scale = ElementFactory.Make("videoscale", "scale");

           MyDrawSink = ElementFactory.Make("directdrawsink", "directdrawsink"); 

           pipeline.Add(udpsrc, demux, queue, decode, space, scale, MyDrawSink);

           MySinkAdapter = new XOverlayAdapter(MyDrawSink.Handle);
           MySinkAdapter.XwindowId = (ulong)this.Handle;

udpsrc.Link(demux);
           demux.Link(queue);
           queue.Link(decode);
           decode.Link(space);
           space.Link(scale);
           scale.Link(MyDrawSink);

           pipeline.SetState(State.Playing);

        } 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:00:17.903

它是“2> Errorlog.txt”而不是“3> Errorlog.txt”。另外，您究竟将 GST_DEBUG 设置为什么？

最后，请阅读关于有时垫的信息。这是一个常见问题解答。您需要处理解复用器上的“填充”信号并从那里链接到队列。

# java - 为每个 Maven 项目选择配置文件

> ID：10349502
> 
> 赞同：1
> 
> 时间：2012-04-27T11:06:46.720
> 
> 标签：java, maven, maven-profiles

我有很多 Maven 项目。我有两个不同的全局 settings.xml 需要合并。他们都在配置文件中描述了他们的存储库。我通过镜像和配置文件标签合并了两个 settings.xml。其中一个配置文件由 settings.xml 文件中的 activeProfile 标记激活。

我想问你，我如何更改不同项目中的活动配置文件？我可以在项目 pom.xml 文件中选择它吗？

谢谢，兄弟，斯特里斯蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:28:48.173

本文档描述了如何激活配置文件：[构建配置文件简介](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)。

您可以通过环境变量激活配置文件，但如果您有很多项目，并且希望在每个项目的基础上应用配置文件，那么在每个单独的项目构建执行之前更改环境变量是一个错误的解决方案。如果您正在使用 IDE，您可以配置启动配置来为每个项目设置属性，并且您必须在每个项目的持续集成中配置正确的 mvn run 命令。但是，这将导致无法构建由应由不同配置文件激活的不同项目组成的聚合构建。

一种可能的解决方法（这似乎并不优雅，但我很确定它会起作用）是根据文件存在激活配置文件，并为不同的项目管理此类“标记文件”以激活所需的文件。例如：

```
<profiles>
  <profile>
    <activation>
      <file>
        <exists>.profile-A</exists>
      </file>
    </activation>
    ...
  </profile>
</profiles> 
```

预期行为：如果项目的根文件夹中存在名为“.profile-A”的文件，则此配置文件将被激活。

然而，此时出现了一个更有趣的问题：在聚合构建的情况下会发生什么行为？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:10:09.643

您可以简单地将`activeByDefault`标签添加到您的 Maven 配置文件中：

```
<profiles>
    <profile>
    <id>your-profile</id>
        <activation>
        <activeByDefault>true</activeByDefault>
    </activation>
    </profile>
</profiles> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:12:29.610

我在我的项目中更喜欢这种方式：

```
<profile>
  <id>dev</id>
  <activation>
    <property>
      <name>env</name>
      <value>dev</value>
    </property>
  </activation>
  ...
</profile> 
```

然后你可以这样激活它：

```
mvn your_goal -Denv=dev 
```

问候，

博斯科普

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T11:55:47.500

听起来您需要使用存储库管理器（[Archiva](http://archiva.apache.org/)、[Artifactory](http://www.jfrog.com/products.php)、[Nexus](http://www.sonatype.org/nexus/)字母顺序）在 settings.xml 文件中进行单一配置。这将解决使您的构建文件环境依赖的问题。

# networking - SNMP 网络带宽与记录器监视器

> ID：10349503
> 
> 赞同：0
> 
> 时间：2012-04-27T11:06:47.793
> 
> 标签：networking, monitoring, snmp

我有一个使用 SNMP 协议的交换机。我想获取/记录或监视交换机和连接的设备/端口的带宽数据。必须定期将传入或传出的数据量简单地计算到日志文件中。

作为另一种选择，一个简单的程序用于监控 SNMP 网络的网络带宽、总数据流量等可能对我有用。但它必须是如此小巧轻便的软件。许多程序不是免费软件，而且它们的大小非常大。有没有解决方案来完成这个过程？谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:02:51.220

通过 SNMP 监控的接口在 ifInOctets 和 ifOutOctets 计数器中报告其数据使用情况。他们报告的数字不能直接使用；您需要每 X 分钟或秒对它们进行采样，其中 X 越小，接口越快。您只需从当前数字中减去前一个数字，即可得出在这 X 分钟内经过的流量。当它达到 32 位整数限制时请注意包装（它肯定不会发送负流量；-）数字 X 将受到以接口最大速度包装 32 位数字所需的时间的极大影响。

如果您有高速交换机，理想情况下，如果您的交换机支持，您应该实际使用 ifHCInOctets 和 ifHCOutOctets。这些是 64 位数字，不会频繁换行，因此 X 可以变得更大。但并非所有设备都支持它们。

# javascript - 这个函数参数如何未定义？

> ID：10349511
> 
> 赞同：0
> 
> 时间：2012-04-27T11:07:10.813
> 
> 标签：javascript, function, onclick, stoppropagation

我正在尝试复制此“onclickout 模拟器”脚本，如下所示：

[http://jsfiddle.net/C9CL3/](http://jsfiddle.net/C9CL3/)

如您所见，它工作正常（在我测试过的所有浏览器中 - 所以据我所知，这不是浏览器兼容性问题）。

*我的*解决方案中的代码如下：

```
document.getElementById('bigBtn').onclick = function(event) {
        alert('button clicked');
        if (event.cancelBubble) //THIS LINE GIVES 'EVENT IS UNDEFINED' ERROR
            event.cancelBubble = true;
        else
            event.stopPropagation();
    } 
```

这可以在 pageLoad() 中找到。

如您所见，由于事件未定义，我从 event.cancelBubble 行收到意外错误。我不能为我的生活找出原因。

注意：出于浏览器兼容性的原因，我以与小提琴演示不同的方式测试 cancelBubble。

非常感谢您的帮助，真的坚持这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:09:53.333

尝试使用 DOM2 事件模型。相反，使用以下方法注册处理程序：

```
document.getElementById('bigBtn').addEventListener("click", yourFunction, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:45:03.340

问题解决了。我没有以这种方式“模拟”onclickout 事件，而是将焦点（使用 window.hash）设置到将出现的菜单以代替“单击按钮”警报，然后处理 onblur 事件以将其关闭。

# javascript - Javascript 连续服务器轮询

> ID：10349513
> 
> 赞同：2
> 
> 时间：2012-04-27T11:07:22.033
> 
> 标签：javascript, jsp, servlets, comet

我正在开发一个基于 Java servlet 技术的 Web 应用程序，其中客户端页面每 2 秒通过 javascript 轮询服务器一次 AJAX 请求以获取新数据。我面临的问题是由于定期轮询多个并行客户端，服务器变得越来越慢。

那么只有在任何其他请求被触发到更新服务器上的数据的服务器之后，是否有任何其他替代方法可以自动实现此功能。

我正在尝试使用 javascript comet 但没有获得正确的实现代码。

任何帮助都是不言而喻的。

问候， Ars

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:18:52.950

是的，Servlet 3.0 将是满足您需求的良好解决方案。

它将在您的请求执行时释放您的线程您可以在此处阅读更多信息。在下面的文章中：

[http://www.javaworld.com/javaworld/jw-02-2009/jw-02-servlet3.html](http://www.javaworld.com/javaworld/jw-02-2009/jw-02-servlet3.html)

另外我建议你看看[Atmosphere Framework](http://atmosphere.java.net/)和[Netty framework](http://netty.io/)

如果追求快速的 Comet 实现，这些框架可以为您提供标准 Servlet 容器的不错选择。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:20:06.993

显然你应该使用彗星方法。您可以尝试使用[socket.io](http://socket.io)。这个协议有几个 Java 实现，比如[socketio-java](http://code.google.com/p/socketio-java/)和[netty-socketio](https://github.com/mrniko/netty-socketio)。与使用 WebSockets 相比，您将能够覆盖更多的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:16:29.360

使用[websockets](http://dev.w3.org/html5/websockets)将您的服务器与客户端连接起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T11:17:36.273

看起来是您启动 websockets 的绝佳机会。这是为了这样的目的而制作的。 [WebSocket - 维基百科](http://en.wikipedia.org/wiki/WebSocket)

[WebSocket 教程](http://www.tutorialspoint.com/html5/html5_websocket.htm)

[WebSocket API 指南](http://dev.w3.org/html5/websockets/)

如果您还想用不同的语言编写服务器应用程序，您可以轻松地搜索该语言的 google websocket 教程来帮助您。

# objective-c - 从 java 脚本函数调用中设置 UIButton 图像

> ID：10349515
> 
> 赞同：2
> 
> 时间：2012-04-27T11:07:45.137
> 
> 标签：objective-c, cordova

我正在研究PhoneGap。javaScript 函数调用时，我需要在 UIButton 上设置图像。

调用目标 c 'Myfunction' 我使用了这个代码——

```
PhoneGap.exec("MyClass.Myfunction", types); 
```

并且能够调用objective c方法并使用帮助按钮设置图像--

```
MainViewController * _mainViewController=[[MainViewController alloc]initWithNibName:@"MainViewController" bundle:nil];
[_mainViewController.help setBackgroundImage:[UIImage imageNamed:@"back.png"]forState:UIControlStateNormal]; 
```

但得到空对象。

谁能帮我..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:57:50.337

`MainViewController * _mainViewController=[[MainViewController alloc]initWithNibName:@"MainViewController" bundle:nil];`

使用它您正在创建新对象，因此它无法在按钮上设置图像。

您可以通过调用来设置按钮上的图像`PhoneGap.exec`。

# cucumber - 在黄瓜 hooks.rb 中运行 rake 任务

> ID：10349516
> 
> 赞同：3
> 
> 时间：2012-04-27T11:07:51.700
> 
> 标签：cucumber, rake

我有一种情况，我需要在 Cucumber hooks.rb 文件的 AfterConfiguration 中调用 rake 任务。在我尝试调用 Rake 任务的那一刻，我收到以下错误

'不知道如何构建任务 rake db:test_seed'

我正在使用导轨 3.2.2

非常感谢任何帮助。

# iphone - 无法使用 touchXML 解析 xml，nodesForXPath 什么也不返回

> ID：10349521
> 
> 赞同：1
> 
> 时间：2012-04-27T11:08:21.170
> 
> 标签：iphone, xml, xcode, xml-parsing, touchxml

我正在尝试使用 touchXML 库解析 xml 但没有得到结果，代码如下

```
NSError *error = nil;    
CXMLDocument *xmlParser = [[CXMLDocument alloc] initWithXMLString:dataString options:0 error:&error];

NSArray *resultNodes = NULL;
resultNodes = [xmlParser nodesForXPath:@"//entry" error:&error];

for (CXMLElement *resultElement in resultNodes) {
    NSMutableDictionary *blogItem = [[NSMutableDictionary alloc] init];

    int counter;

    for(counter = 0; counter < [resultElement childCount]; counter++) {
        [blogItem setObject:[[resultElement childAtIndex:counter] stringValue] forKey:[[resultElement childAtIndex:counter] name]];
    }        
} 
```

方法 nodesForXPath: 不返回任何结果节点数组与 0 个对象。我在 dataString 中得到了正确的 xml，并且 CXMLDocument 也得到了正确的准备。我尝试调试它，但我看不到任何东西接受 resultNodes 中的 0 个对象，NSError 也没有包含任何内容（即没有发生错误）。我试图解析的 xml 文件如下所示。

```
<feed xmlns:s="http://syndication.nhschoices.nhs.uk/services" xmlns="http://www.w3.org/2005/Atom">
<title type="text">...</title>
<id>...</id>
<rights type="text">© Crown Copyright 2009</rights>
<updated>2012-04-27T11:33:02+01:00</updated>
<category term="Search"/>
<logo>...</logo>
<author>...</author>
<s:SearchCoords>174900,517900</s:SearchCoords>
<entry>
    <id>
        http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/32248
    </id>
    <title type="text">Sayer A</title>
    <updated>2012-04-27T10:33:02Z</updated>
    <link rel="self" title="Sayer A" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/32248?apikey=YAHUGHET"/>
    <link rel="alternate" title="Sayer A" href="http://www.nhs.uk/ServiceDirectories/Pages/GP.aspx?pid=15F37AEF-EC5B-4A90-9E72-269ADEB39629"/>
    <content type="application/xml">
        <s:organisationSummary>
            <s:name>Sayer A</s:name>
            <s:address>
                <s:addressLine>The Richmond Green Medical Cen</s:addressLine>
                <s:addressLine>19 The Green</s:addressLine>
                <s:addressLine>Richmond</s:addressLine>
                <s:addressLine>Surrey</s:addressLine>
                <s:postcode>TW91PX</s:postcode>
            </s:address>
            <s:contact type="General">
                <s:telephone>020 83327515</s:telephone>
            </s:contact>
            <s:geographicCoordinates>
                <s:northing>174900</s:northing>
                <s:easting>517800</s:easting>
                <s:longitude>-0.305512266736965</s:longitude>
                <s:latitude>51.4608026642546</s:latitude>
            </s:geographicCoordinates>
            <s:Distance>0.1</s:Distance>
        </s:organisationSummary>
    </content>
</entry>
<entry>
    <id>
        http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/33420
    </id>
    <title type="text">Griffiths W</title>
    <updated>2012-04-27T10:33:02Z</updated>
    <link rel="self" title="Griffiths W" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/33420?apikey=YAHUGHET"/>
    <link rel="alternate" title="Griffiths W" href="http://www.nhs.uk/ServiceDirectories/Pages/GP.aspx?pid=EEC98A8A-B888-4F44-A0B6-DC6ABCBF19CE"/>
    <content type="application/xml">
        <s:organisationSummary>
            <s:name>Griffiths W</s:name>
            <s:address>
                <s:addressLine>Paradise Road Surgery</s:addressLine>
                <s:addressLine>37 Paradise Road</s:addressLine>
                <s:addressLine>Richmond</s:addressLine>
                <s:addressLine>Surrey</s:addressLine>
                <s:postcode>TW91SA</s:postcode>
            </s:address>
            <s:contact type="General">
                <s:telephone>020 89402423</s:telephone>
            </s:contact>
            <s:geographicCoordinates>
                <s:northing>174800</s:northing>
                <s:easting>518100</s:easting>
                <s:longitude>-0.301388352909701</s:longitude>
                <s:latitude>51.4601120315006</s:latitude>
            </s:geographicCoordinates>
            <s:Distance>0.223606797749979</s:Distance>
        </s:organisationSummary>
    </content>
</entry>
<entry>
    <id>
        http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/33035
    </id>
    <title type="text">Dr Da Costa</title>
    <updated>2012-04-27T10:33:02Z</updated>
    <link rel="self" title="Dr Da Costa" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/33035?apikey=YAHUGHET"/>
    <link rel="alternate" title="Dr Da Costa" href="http://www.nhs.uk/ServiceDirectories/Pages/GP.aspx?pid=EDCE215D-6412-4AAB-AFC4-9F37888D413C"/>
    <content type="application/xml">
        <s:organisationSummary>
            <s:name>Dr Da Costa</s:name>
            <s:address>
                <s:addressLine>The Vineyard Surgery</s:addressLine>
                <s:addressLine>35 The Vineyard</s:addressLine>
                <s:addressLine>Richmond</s:addressLine>
                <s:addressLine>Surrey</s:addressLine>
                <s:postcode>TW106PP</s:postcode>
            </s:address>
            <s:contact type="General">
                <s:telephone>020 89480404</s:telephone>
            </s:contact>
            <s:geographicCoordinates>
                <s:northing>174600</s:northing>
                <s:easting>518100</s:easting>
                <s:longitude>-0.301044685875553</s:longitude>
                <s:latitude>51.4581333717098</s:latitude>
            </s:geographicCoordinates>
            <s:Distance>0.360555127546399</s:Distance>
        </s:organisationSummary>
    </content>
</entry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:52:56.233

只要看看这个，我就能解析类似的响应：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.rqst=[[WebRqst alloc] init];
    [self.rqst startLoading:[NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"PASS UR URL"]]
                       vCtr:self];
}

**// a method to grab the attributes.**
- (void)parseAttributesForElement:(CXMLElement*)element andDictionary:(NSMutableDictionary*)dictionary {
    NSString *strName,*strValue;    
    NSArray *arAttributes = [(CXMLElement*)element attributes];
    for (int i=0; i<arAttributes.count; i++) {
        strName = [[arAttributes objectAtIndex:i] name];
        strValue = [[arAttributes objectAtIndex:i] stringValue];
        if(strName && strValue && [strName length]>0 && [strValue length]>0) {
            [dictionary setValue:strValue forKey:strName];
        }
    }
}

**// a method to parse the node & store in dictionary**
- (void)parseThisNode:(CXMLNode*)node storeInDictionary:(NSMutableDictionary*)dOfNode {
    NSString *strName = [node name];
    NSString *strValue = [node stringValue];
    if(strName && [strName length]>0 && ![strName isEqualToString:@"text"]) {

        NSMutableDictionary *dOfAttributes = [NSMutableDictionary dictionary];

        // if node has value
        if(strValue && [strValue length]>0) {
            [dOfAttributes setValue:strValue forKey:@"value"];
        }

        // if node has attributes
        if([node isKindOfClass:[CXMLElement class]] && [(CXMLElement*)node attributes].count>0) {
            [self parseAttributesForElement:(CXMLElement*)node andDictionary:dOfAttributes];
        }

        // if node has childs
        NSArray *arChildern = [node children];
        if(arChildern.count>0) {
            NSMutableDictionary *dOfTAG=[NSMutableDictionary dictionary];
            for (CXMLNode *nodeChildChild in arChildern) {
                // recursive call of a function
                [self parseThisNode:nodeChildChild storeInDictionary:dOfTAG];
            }
            if([[dOfTAG allKeys] count]>0) [dOfAttributes setValue:dOfTAG forKey:@"child"];
        }

        id valueFK = [dOfNode valueForKey:strName];
        // verify if same node is repeated, add it to array (e.g. link tag is repeated )
        if([valueFK isKindOfClass:[NSMutableArray class]]) {
            NSMutableArray *ar=(NSMutableArray*)valueFK;
            [ar addObject:dOfAttributes];
            [dOfNode setValue:ar forKey:strName];
        } else if([valueFK isKindOfClass:[NSMutableDictionary class]]) {
            NSMutableArray *ar=[NSMutableArray arrayWithObjects:valueFK,dOfAttributes, nil];
            [dOfNode setValue:ar forKey:strName];
        } else {
            [dOfNode setValue:dOfAttributes forKey:strName];
        }
    }
}

**// pass the data to this method & it will return a dictionary**
- (NSDictionary *)startParsingUsingData:(NSData *) data {
    // create a mutable-empty dictionary wich will hold the data
    NSMutableDictionary *dictionaryParsed = [NSMutableDictionary dictionary];

    // verify - do we have proper data for parsing or not
    if(data && [data length]>0) {
        // load a data into XML Document
        CXMLDocument *doc = [[CXMLDocument alloc] initWithData:data options:0 error:nil];

        // grab all the tags of XML
        NSArray *nodes = [doc nodesForXPath:@"*" error:nil];

        // start a loop to goThrough each tag of xml
        for (CXMLNode *nodeFeed in nodes) {

            // verify that you reached to desired tag or not
            if([[nodeFeed name] isEqualToString:@"feed"]) {
                // just write this code to get data parsed & stored in our dictionary
                [self parseThisNode:nodeFeed storeInDictionary:dictionaryParsed];

                // grab the childrens of tag ( as per requirement )
                dictionaryParsed=[[dictionaryParsed valueForKey:@"feed"] valueForKey:@"child"];
            }
        }
    }

    // return the dictionary.
    if([[dictionaryParsed allKeys]count]>0) {
        return [NSDictionary dictionaryWithDictionary:dictionaryParsed];
    } else {
        return nil;
    }
}

// It's my delegate method where I am getting my NSData
    - (void)webRequestReceivedData:(NSData *)data {
        if(data && [data length]>0) {
            NSLog(@"Details are as follows\n%@",
                  [self startParsingUsingData:data]); //This is the method required which will parse the data
        } 
    } 
```

希望，现在您将能够解析数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:31:39.980

我从未使用过 touchXML，但可能需要设置命名空间，如下所示：[Getting the value of an Element in Cocoa using TouchXML](https://stackoverflow.com/questions/526887/getting-the-value-of-an-element-in-cocoa-using-touchxml)

# string - 在 Matlab 中查找但不删除重复项

> ID：10349527
> 
> 赞同：0
> 
> 时间：2012-04-27T11:08:39.293
> 
> 标签：string, matlab, duplicates, cell

我在 Matlab 中有一个大数组，如下所示：

一个=

```
{1x5  cell}
{1x7  cell}
{1x27 cell}
{1x11 cell}
  ... 
```

细胞看起来像这样：

> > C{1}

ans = '苹果' '香蕉' '猕猴桃' '橙子'

我想在 A 中找到包含双重信息的单元格，例如：

> > C{27}

ans = '乌龟' '猕猴桃' '狐狸' '獾'

即在这里我想看看C(1) 和C(27) 是否有重复的单词'kiwi'。所以我可以手动查看它们并决定我应该在哪里删除我认为合适的重复项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:03:12.170

抱歉，我不会提供编码解决方案，更多的是我将使用的过程，以便您可以开始编码，如果您有任何具体问题，请随时发布问题

我会用它`nchoosek`来生成单元格数组的所有排列的数组`C`，所以

```
nCells = length(C);
nPerms = nchoosek(1:nCells,2); 
```

然后，您可以使用 intersect 遍历所有排列以查看是否有公共字符串。

```
result(i) = intersect(C{nPerms(i,1)},C{nPerms(i,2)}); 
```

这将为您提供一个列出所有常见字符串的数组，并且使用 nPerms 数组，您将拥有两行带有常见字符串的行。但是，如果您尝试运行它，它将失败，因为`intersect`喜欢在每个单元格数组中拥有相同数量的元素。

所以我会创建一个用空白单元格填充的临时单元格数组，以便在循环之前 C 中的每个元素都是相同的长度。

这将通过计算每个单元格中的元素数 (@numel) 来计算数组 C 中最长的单元格，然后计算最大值。

```
cSize = cellfun(@numel,C);
maxSize = max(cSize); 
```

然后我们可以定义一个函数来填充空白单元格

```
fcn = @(x) [x cell(1,maxSize - numel(x))];
paddedC = cellfun(fcn,C,'UniformOutput',false); 
```

这应该为您提供一个单元格数组，每个单元格中的元素数量相同。然后，您可以在循环中使用此元胞数组来测试每个排列。

毫无疑问，有人会提出单线 cellfun 解决方案，但我希望这足以让您入门。

# git - 通过 gitolite 配置用户的公钥会引发错误

> ID：10349529
> 
> 赞同：1
> 
> 时间：2012-04-27T11:08:40.533
> 
> 标签：git, gitolite

我添加了用户的公钥并推送到服务器。
但是在运行时，`gl-setup`我使用了 like`/tmp/id_rsa.pub`而不是`/tmp/rekha.pub`.

现在我更改了文件名，然后再次尝试运行`gl-setup`.

它最后像这样显示消息

```
rekha.pub maps to user id_rsa, not rekha.
You will not be able to access gitolite with this key.
Look for the 'ssh troubleshooting' link in http://sitaramc.github.com/gitolite/. 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:35:39.613

首先`gl-setup`是[gitolite V2 或“g2”命令](https://github.com/sitaramc/gitolite/blob/g2/src/gl-setup)。
当前的安装[文档](http://sitaramc.github.com/gitolite/qi.html)适用于[GitoliteV3（或“g3”）](http://sitaramc.github.com/gitolite/g3why.html)：升级是明智的（为了便于支持）

查看[gitolite 的来源](https://github.com/search?utf8=%E2%9C%93&q=repo%3Asitaramc%2Fgitolite+%22maps+to%22&repo=&langOverride=&start_value=1&type=Code&language=)，我发现[`sshkeys-lint`](https://github.com/sitaramc/gitolite/blob/g2/src/sshkeys-lint)它将检查 gitolite 管理员用户：

```
if ($admin) {
    my $fp = fprint("$admin.pub");
    my $fpu = ( $seen_fprints{$fp}{user} || 'no access' );
    # dbg("fpu = $fpu, admin=$admin");
    die "\t\t*** FATAL ***\n" .
        "$admin.pub maps to $fpu, not $admin.\n" .
        "You will not be able to access gitolite with this key.\n" .
        "Look for the 'ssh troubleshooting' link in http://sitaramc.github.com/gitolite/.\n"
    if $fpu ne "user $admin";
} 
```

您可能需要再试一次`gl-setup rekha.pub`，如[g2 的 ssh 故障排除](https://github.com/sitaramc/gitolite/blob/d59bc351f8a037b0adf16cc52fe34170665e4f81/doc/ssh-troubleshooting.mkd#typical-causes)所述。
如果失败，请检查您的 ~gitolite-user-account/.ssh/authorized-keys 并确保`id_rsa`替换为`rekha`.

* * *

[OP thillaiselvan](https://stackoverflow.com/users/284113/thillaiselvan)在评论中再次报告说有一个工作的 Gitolite：

> 我通过以下方式实现了它：
> 
> *   替换删除`id_rsa`授权密钥文件中的内容。
> *   为用户创建了一个新的 pub 密钥`rekha`。
> *   然后新推它，这是一项巨大的工作。
> 
> 现在它工作正常:)

# gtk - GObject 是否在 GNOME 之外大量使用？

> ID：10349533
> 
> 赞同：5
> 
> 时间：2012-04-27T11:08:59.620
> 
> 标签：gtk, gobject

我了解 GObject 最初是 gtk+ 的一部分，后来与 GUI 相关元素分离。我想知道的是：它在 gtk+ 之外使用？其他桌面环境和其他操作系统（如 Windows 或 Mac OS）呢？有没有这类案例的突出例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T13:13:45.200

到处都有一些东西在没有 GTK+ 的情况下使用 GObject，但是 AFAIK 它们很少而且相差甚远。

我猜现在最突出的是基于[Clutter](http://www.clutter-project.org/)的项目（它是一个面向图形的 UI 库）。还有少量基于[libgnt （基于文本的 UI 库）的项目，可能还有各种用](http://developer.pidgin.im/doxygen/dev3.0.0/html/group__gnt.html)[Vala](http://live.gnome.org/Vala)（一种基于 GObject 的类 C# 编程语言）编写的非 GTK+ 程序。

编辑：还有[GStreamer](http://gstreamer.freedesktop.org/)（感谢 liberforce！），这是一个流行的多媒体库。绝大多数 GStreamer 项目也使用 GTK+，但我敢肯定也有一些非 GTK+ 项目。

# apache-flex - 列表中的数据绑定

> ID：10349535
> 
> 赞同：0
> 
> 时间：2012-04-27T11:09:17.843
> 
> 标签：apache-flex, flash-builder

我正在尝试将 ArrayList 中的数据绑定到列表，但这里只有最后一个元素显示在 list(99) 上，而不是 arraylist 的全部内容。

```
private function completeHandler(event:Event):void
        {
            var xmlData:XML = XML(event.target.data);
            trace(xmlData);
             var i:int = 0;
            for (i;i<100;i++)
            {
                var arr:ArrayList = new ArrayList();
                arr.addItem(i);
                trace(arr);
            } 
            list.dataProvider = arr;
        } 
```

我不知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:30:13.750

检查此代码，这将对您有所帮助，

您可以根据列表的行数浏览所有数据....

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"  minWidth="955" minHeight="600">
    <mx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            [Bindable]private var _index:int = 0;
            private var _coll:ArrayCollection = new ArrayCollection([{name:'ashish',age:'28'},{name:'abhi',age:'29'},{name:'kunal',age:'27'},
                {name:'ashish1',age:'28'},{name:'abhi1',age:'29'},{name:'kunal1',age:'27'},
                {name:'ashish2',age:'28'},{name:'abhi2',age:'29'},{name:'kunal2',age:'27'},
                {name:'ashish3',age:'28'},{name:'abhi3',age:'29'},{name:'kunal3',age:'27'}]);

            protected function button1_clickHandler(event:MouseEvent):void
            {
                // TODO Auto-generated method stub
                if((_index-li.rowCount>=0))
                    _index =  _index - li.rowCount;
            }

            protected function button2_clickHandler(event:MouseEvent):void
            {
                // TODO Auto-generated method stub
                if((_index+li.rowCount<_coll.length))
                    _index =  _index + li.rowCount;
            }

        ]]>
    </mx:Script>

    <mx:List id="li" dataProvider="{_coll.source.slice(_index,(_index+li.rowCount))}" labelField="name" rowCount="3" width="100"/> 

    <mx:HBox>
        <mx:Button label="&lt;-" click="button1_clickHandler(event)"/>
        <mx:Button label="->" click="button2_clickHandler(event)"/>
    </mx:HBox>
</mx:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:19:49.270

您正在创建一个包含一项 100 次的 ArrayList。用这个替换，你应该没问题：

```
var arr:ArrayList = new ArrayList();
for (var i:int = 0; i<100; i++) {
    arr.addItem(i);
} 
```

或者更好的是，只需将您的 XML 包装在 XMLListCollection 中，而不是一一复制节点（假设它是您想要的 XML 数据的实际内容而不是索引）：

```
private function completeHandler(event:Event):void
{
    var xmlData:XML = XML(event.target.data);
    list.dataProvider = new XMLListCollection(xmlData.children());
} 
```

（请注意，这不是 DataBinding：它只是设置`dataProvider`属性）

# c# - 每天有一个日志

> ID：10349536
> 
> 赞同：41
> 
> 时间：2012-04-27T11:09:24.190
> 
> 标签：c#, logging, error-handling, log4net

目前我的应用程序正在使用 log4net 来记录错误，为此的 web.config 如下：

```
<log4net> 
    <appender name="FileAppender" type="log4net.Appender.FileAppender">
        <file value="c:/paypal/logs/gateway.log" />
        <appendToFile value="true" />
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] – %message%newline" />
        </layout>
    </appender>
    <root>
        <level value="DEBUG" />
        <appender-ref ref="FileAppender" />
    </root>
</log4net> 
```

然而，这样做的问题是每天的日志总是去`gateway.log`

有人知道每天使用 log4net 拥有不同日志文件的方法吗？

理想情况下，我不想`web.config`使用计划任务手动编辑每晚。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-04-27T11:15:05.400

您应该将[RollingFileAppender](http://logging.apache.org/log4net/release/sdk/log4net.Appender.RollingFileAppender.html)与 rollingStyle`Date`和 datePattern 一起使用`yyyyMMdd`（这将每天滚动）。

配置示例：

```
<appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
    <file value="c:/paypal/logs/gateway.log" />
    <appendToFile value="true" />
    <rollingStyle value="Date" />
    <datePattern value="yyyyMMdd" />
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] – %message%newline" />
    </layout>
</appender> 
```

更新：我认为更好的方法是将日期包含在文件名中。并且仅使用 datePattern 值来显示何时应该创建新的日志文件。

```
<appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
  <file type="log4net.Util.PatternString" value="c:/paypal/logs/gateway_%date{yyyyMMdd}.log" />
  <appendToFile value="true" />
  <rollingStyle value="Date" />
  <datePattern value="yyyyMMdd" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] – %message%newline" />
  </layout>
</appender> 
```

在这种情况下，您的所有文件都将具有类似`gateway_20120427.log`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-27T11:11:54.767

就像使用[RollingFileAppender](http://logging.apache.org/log4net/release/config-examples.html)

```
<appender name="RollingLogFileAppenderOutput" type="log4net.Appender.RollingFileAppender">
    <file type="log4net.Util.PatternString" value="c:\my.log" />
    <appendToFile value="true" />
    <rollingStyle value="Date" />
    <datePattern value="yyyyMMdd'.log'" />
    <layout type="log4net.Layout.PatternLayout">
     <conversionPattern value="%date [%thread] %-5level - %message%newline" />
    </layout>
</appender> 
```

**编辑**

这是每天滚动的整个 log4net 配置部分，与 @lazyberezovsky 回答的相同，只是添加了 log4net 和 root 以进行澄清

**edit2** `<file value="c:/paypal/logs/gateway_" />`这将创建一个名为“gateway_”的文件，并在一天结束时（2012-04-27）将其重命名为 gateway_20120427.log，第二天（2012-04-28）它将再次创建文件 gateway_最后它会创建 gateway_20120428.log。

```
<log4net> 
    <appender name="RollingLogFileAppenderOutput" type="log4net.Appender.RollingFileAppender">
        <file value="c:/paypal/logs/gateway_" />
        <appendToFile value="true" />
        <rollingStyle value="Date" />
        <datePattern value="yyyyMMdd'.log'" />
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date [%thread] %-5level - %message%newline" />
        </layout>
    </appender>

    <root>
        <level value="DEBUG" />
        <appender-ref ref="RollingLogFileAppenderOutput" />
    </root>
</log4net> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-22T17:43:04.643

[保留日志文件名](http://logging.apache.org/log4net/log4net-1.2.12/release/sdk/log4net.Appender.RollingFileAppender.PreserveLogFileNameExtension.html)

此设置在您滚动日志后保持文件的扩展名相同。

```
<log4net> 
    <appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
        <file value="c:/paypal/logs/gateway.log" />
        <appendToFile value="true" />
        <rollingStyle value="Date" />
        <datePattern value="_yyyyMMdd" />
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] – %message%newline" />
        </layout>
        <preserveLogFileNameExtension value="true" />
    </appender>
    <root>
        <level value="DEBUG" />
        <appender-ref ref="FileAppender" />
    </root>
</log4net> 
```

# javascript - 使用 #! 使哈希可抓取！并在变化中幸存下来

> ID：10349538
> 
> 赞同：0
> 
> 时间：2012-04-27T11:09:35.137
> 
> 标签：javascript, jquery, anchor, hashbang

我正在尝试通过将 # 更改为 #! 来使我的网站可抓取。单击链接时该页面工作正常，但我无法修复直接从 URL 调用哈希的脚本。

这就是我所拥有的

头

```
$(function() {
    $("#tabs a").click(function() {

        var page = this.hash.substr(2);

        $.get(page+".php", function(gotHtml) {
            $("#content").html(gotHtml)
        });
    });

    (location.hash) ? $("a[href="+location.hash+"]").click() : $("#tabs a:first").click()

}); 
```

身体

```
< ul id="tabs">

< li>< a href="#!foo" >foo</a>< /li>

< li>< a href="#!foo2" >foo2</a>< /li>

< li>< a href="#!foo3" >foo3</a>< /li>

< /ul> 
```

当我点击 foo 时，内容加载正常，但如果我用 www.foo.com/#!foo 调用我的网站，它不会加载内容。

谁能指导我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:12:08.933

如果您查看错误控制台，您会看到它引发了以下异常：

> 未捕获的错误：语法错误，无法识别的表达式：[href=#!foo2]

为了解决这个问题，你可以稍微改变你的 JavaScript。

```
$(function() {
    $("#tabs a").click(function() {

        var page = this.hash.substr(2);

        $.get(page+".php", function(gotHtml) {
            $("#content").html(gotHtml)
        });
    });

    (location.hash) ? $("a[href='"+location.hash+"']").click() : $("#tabs a:first").click()

}); 
```

请注意，我只是在选择器的 href 部分周围加上了单引号。

在相关的说明中，我建议如果您要进行 hash-bangs（它们令人头疼），则将`href`属性设置为您要访问的实际 URL 值。在 JavaScript 中切换到 hash-bang。原因是禁用 JavaScript 的用户将无法使用您的网站。您的点击功能会发生细微的变化，以设置散列、加载页面并禁用默认点击行为。

*问题更新：*在相关说明中，我的意思是如果将`href="#!foo"`href 更改为`href="foo.php"`. 如果用户没有启用 JavaScript，他们可以转到 foo.php 并查看该页面。如果用户确实有 JavaScript，则将 hashbang 放在 URL 中并执行您之前所做的操作。您可以手动执行此操作；然而，像[jQuery BBQ](http://benalman.com/projects/jquery-bbq-plugin/)这样的库真的可以让这变得微不足道。

# rest - RESTful 资源的合并和拆分

> ID：10349546
> 
> 赞同：7
> 
> 时间：2012-04-27T11:10:08.863
> 
> 标签：rest, merge, split

我有一个提供发票功能的 REST 服务，例如，我可以通过 REST 服务创建、更新和删除发票。

但是，我现在需要将一张发票拆分为几张新发票的功能，即该方法需要基于一张发票创建 x 个发票，然后在一次交易中删除原始发票。

我还需要一种相反的合并方法，即将多张发票合并为一张。

如何以 RESTful 方式创建这样的架构师？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T11:42:06.593

我们有一个类似的问题，我们想合并 2 个资源。经过长时间的辩论，我们决定消费者将发布一个合并请求资源，其中包含要合并的 2 个资源。然后在查看它之后，我们决定不需要完整的源资源和目标资源，而是仅包含唯一标识符的 POST 就足够了。我们没有在正文中仅使用 2 个 ID 来发出合并请求。在 URL 中表示更容易，所以这就是我们所做的。合并请求的 POST 响应是合并的资源。

我想我不是 REST 专家，不足以告诉你这是否是一个好策略，但对我们来说这是一个简单的解决方案，所以我们采用了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T12:42:10.430

当您说要在“单笔交易”中实现此功能时，我假设您已经确定应该将新发票的生成和旧发票的删除合并到一个 API 调用中；这是正确的方法。对于 Web 服务，您确实希望减少喋喋不休，并且可能有一些关于此功能将如何生成新发票并删除旧发票的业务逻辑。所以我假设当您询问如何以 RESTful 方式构建它时，您想知道为这个新的 API 方法使用哪个 HTTP 动词（即 GET、POST、PUT 或 DELETE）。通常这些动词以下列方式映射到 CRUD 类型的操作：

*   创建 -> 发布
*   阅读 -> 获取
*   更新 -> 放置
*   删除 -> 删除

所以当你的函数创建和删除记录时使用哪个动词。REST API 的一般规则是，如果没有明确的 CRUD 映射，则如果服务器状态发生更改，则使用 POST；如果您只是返回不更改服务器状态的信息，则使用 GET。所以在这种情况下，我会选择 POST。

如果您正在寻找有关架构的更多指导，请更具体地说明您正在寻找什么，我会尽力提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:13:22.760

我会做类似的事情，

```
POST /InvoiceSplitter?sourceInvoiceId=99 
```

和

```
POST /InvoiceMerger?sourceInvoiceIds=101,87,23,45 
```

# java - 在将页面提交到服务器之前检查字段值的验证

> ID：10349553
> 
> 赞同：0
> 
> 时间：2012-04-27T11:10:23.263
> 
> 标签：java, jsf, richfaces

我已经开发了一个基于 JSF 和 Richfaces 的应用程序，在这里我想知道一个很好的方法，如果描述的字段 (Rich:inplaceInput) 为空，则向用户发出警告

我创建了rich:extendedDataTable，其中一列是这个......

```
<rich:column width="120" id="col15" label="yardNo">
    <f:facet name="header">
        <h:outputText value="Yard Number"></h:outputText>
        </f:facet>
        <rich:inplaceInput value="#{r.runSlNo}" defaultLabel="Assign Manual Number" 
                           inputWidth="90" showControls="true"/>
</rich:column> 
```

我创建了一个rich:contextMenu 来显示这样的菜单......![在此处输入图像描述](../Images/e052842899691059ed8992c13ca3c71b.png)

一个命令按钮也用于提交页面。
关于rich:inplaceInput，我有两个问题。
首先，如果rich:InplaceInput 值字段为空，我只是不想允许用户提交页面，而是抛出警告来填充它。
我知道如何在提交页面之前抛出错误或警告。
其次，我怎样才能避免显示 contextMenu over rich:InplaceInput 值，但让它显示在其他 4 列....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:30:24.470

您可以将 required="true" 添加到`inplaceInput`您不会提交表单的方式中......然后`h:messages`在表格下方添加以显示必填字段的错误或尝试添加`h:message`for="id_of_the_rich:inplaceInput" 并找到`h:message`下面的`<rich:inplaceInput`

# javascript - 使用 jquery 验证字段和单选按钮的最佳方法？

> ID：10349556
> 
> 赞同：0
> 
> 时间：2012-04-27T11:10:33.713
> 
> 标签：javascript, jquery, validation

我的页面中有几个文本输入字段，以及几个单选按钮。现在我需要在客户端验证它们，然后再将它们发送到服务器端（也有服务器端验证）。

我正在使用 jquery 和 javascript 验证文本输入，但现在我想知道这真的是验证它们的最佳方法吗？

这将如何与单选按钮一起使用？

```
$('form').submit(function() {
    validateForm($(this))
    return false;
});

function validateForm(form) {
    var FirstName=form.find('[name=FirstName]').val();
    if (!FirstName) {
        alert('Etunimi puuttuu');
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:44:39.230

如果您只是验证以确保字段不为空，那么我会像这样向所有文本字段添加一个类

```
<input type="text" id="Firstname" class="validate" /> 
```

然后使用 Jquery 遍历所有具有类的字段`.validate`并检查它们是否为空白。然后，您可以选择如何提醒用户。

```
$('.validate').each(function(){

   if($(this).val().length === 0)
   {
      alert($(this).attr('id')+ " is blank");
   }
}); 
```

对于单选按钮，您可以像这样检查

```
if($('#myRadio').not(':checked'))
{
   alert('Radio not checked');
} 
```

通过测试`:checked`伪选择器

或者类似地通过分配一个类将多组复选框组合在一起，然后循环它们以测试是否至少有一个已被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:02:24.917

正如其他人已经提到的那样，轮子已经被发明用于一个很好的验证工具。[您可以从jQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)中下载、试验和学习文档。

您在标记中设置规则，然后当您调用`validate()`它时，它将执行您想要验证的所有事情并适当地提醒用户。如果它不适合您的特定情况，您甚至可以添加自定义验证。

有关使用带有单选按钮的 jQuery Validate 插件是多么容易的示例，[请参阅这篇文章。](https://stackoverflow.com/a/3347969/469643)

要验证是否在没有 jquery validate 的情况下检查单选按钮，以下应该有效：

```
//submit initiated
if ($("[name=paymentMethod]:checked").size() ==0) {
    alert("Select an option");
} 
```

并看到[这里](http://jsfiddle.net/QwAYy/3/)。

# css - 使用 bootstrap-sass 更改 RoR 3.2.3 中的链接样式

> ID：10349562
> 
> 赞同：0
> 
> 时间：2012-04-27T11:11:06.397
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap

如何使用 Bootstrap-Sass 更改 RoR 3.2.3 中的链接颜色。我试图在我的 custom.css.scss 中添加一条规则，但它不起作用。进行了搜索并阅读了有关 /vendors/assets/stylesheets/variables.css.scss 的内容，但该文件未出现在 /vendors/../stylesheets 目录中。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T12:53:57.083

在您创建的文件`custom.css.scss`中，您需要先设置*引导*[变量](http://twitter.github.com/bootstrap/less.html#variables) （重要的是要注意 twitter 文档中的变量使用 LESS 样式语法而不是 Sass/SCSS）。例如，如果您想要在悬停时变为黑色的亮红色链接，您可以将其放在您的*`@import "bootstrap"``custom.css.scss`*

 *```
$linkColor:      #FF0000;
$linkColorHover: #000;

@import "bootstrap"; 
```

变量必须在导入之前定义，否则使用默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:17:15.373

还有一点需要注意。如果您发现即使在 @import "bootstrap" 之前添加了变量更改后颜色也没有更新；陈述。检查以确保样式表目录中没有其他文件覆盖引导文件。我遇到了这个问题，然后当我删除另一个文件时，我终于可以看到我的引导颜色发生了变化。*

# html - X/HTML 是否有任何竞争性标记语言？

> ID：10349564
> 
> 赞同：1
> 
> 时间：2012-04-27T11:11:08.850
> 
> 标签：html, xhtml, markup

这是一个我想知道一段时间的问题，但在谷歌上找不到我要找的东西。

我想知道的是，X/HTML 是否有任何竞争性标记语言，它本质上应该与 HTML 做同样的工作，但是：

*   直接渲染（实际上没有被编译成 x/html）
*   不仅仅是使用类似 HTML 的借用语法（是的，我知道 SGML，它被广泛称为现代 HTML 的先驱）

另一件事是，我明白为什么 HTML 很受欢迎：它的语法很容易学习，没有（过于糟糕）隐藏的黑魔法，它是一种直接的标记语言，它完全按照它在罐子上所说的做。

当人们想到标记语言时，他们通常会想到 HTML。Markdown 被编译成 HTML，每个 wiki 语法都是半语言。但是必须有人（或某家公司）有类似的想法，因此试图创建一种能够满足类似（如果不是相同）要求的标记语言。

我觉得很难相信从来没有任何有竞争力的标记语言。还是真的从来没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:20:23.493

1) 特克斯

2) [http://en.wikipedia.org/wiki/List_of_document_markup_languages](http://en.wikipedia.org/wiki/List_of_document_markup_languages)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T11:22:53.763

好吧，有[**富文本格式**](http://en.wikipedia.org/wiki/Rich_Text_Format)，尽管据我所知从未开发为手写，但它是人类可读的：

```
{\rtf1\ansi{\fonttbl\f0\fswiss Helvetica;}\f0\pard
This is some {\b bold} text.\par
} 
```

另一方面，[**PostScript**](http://en.wikipedia.org/wiki/PostScript)也是一种图灵完备的编程语言，用于标记文档。

```
%!PS
/Courier             % name the desired font
20 selectfont        % choose the size in points and establish 
                     % the font as the current one
72 500 moveto        % position the current point at 
                     % coordinates 72, 500 (the origin is at the 
                     % lower-left corner of the page)
(Hello world!) show  % stroke the text in parentheses
showpage             % print all on the page 
```

我敢肯定，还有更多相同的语言。例如，在 Wikipedia 上寻找相关文章时，[InterPress](http://en.wikipedia.org/wiki/InterPress)就会出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:26:34.220

您可能会发现[http://www.w3.org/MarkUp/historical](http://www.w3.org/MarkUp/historical)很有趣。

还有很多其他文档格式和标记语言，但它们并没有真正与 HTML 直接竞争。任何潜在的竞争对手都必须克服这样一个事实，即 HTML (+CSS+JS) 已成为一种“万能的通用语言”（即它可以在任何地方、任何地方运行）。

# jsf - JSF t:messages - 如何避免使用表格？

> ID：10349580
> 
> 赞同：0
> 
> 时间：2012-04-27T11:11:56.293
> 
> 标签：jsf, messages, tomahawk

我收到了 JSF Tomahawk 消息，这些消息被呈现为一个 HTML 表。我该如何避免这样的桌子？我希望所有消息都有一个 div，每条消息包含一个段落。提前致谢。

我的 JSF 文件片段：

```
<t:messages layout="table" replaceIdWithLabel="true" showDetail="true" showSummary="false" styleClass="mycustomclasswhichgrabsthisshit" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:31:23.007

检查[Tomahawk 标记文档](http://myfaces.apache.org/tomahawk-project/tomahawk20/tagdoc.html)。[`<t:messages>`标签文档](http://myfaces.apache.org/tomahawk-project/tomahawk20/tagdoc/t_messages.html)说明如下：

```
 Name   | Type   | Supports EL? | Description
 -------+--------+--------------+---------------------------------------------
 layout | String | Yes          | The layout: "table" or "list". Default: list 
```

所以，相应地修复它：

```
<t:messages layout="list" ... /> 
```

或者干脆完全删除它。已经是默认了。

如有必要，您可以使用 CSS 删除列表项目符号：

```
.mycustomclasswhichgrabsthisshit {
    list-style-type: none;
} 
```

*（免责声明：乱七八糟的类名是从你的例子中复制而来的，这不是我的）*

# .htaccess - 将子文件夹重写为 index.php 文件

> ID：10349581
> 
> 赞同：1
> 
> 时间：2012-04-27T11:12:02.557
> 
> 标签：.htaccess, mod-rewrite

我想将 url 重写`http://www.host.com/de/rss`为文件`http://www.host.com/index.php?type=9000001&L=1`

我的重写规则如下所示：

`RewriteRule ^de/rss(.*) index.php?type=9000001&L=1`

但这不起作用。如果我删除`de/`它可以使用相应的 url。

我试图在stackoverflow上寻找类似的问题，但这没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:14:03.990

也许你应该试试这个：

```
RewriteRule ^/de/rss.*$    /index.php?type=9000001&L=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:12:29.690

使用此代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^de/rss/?$ index.php?type=9000001&L=1 [L,QSA,NC] 
```

如果不起作用，请在您的问题中发布您的完整 .htaccess。

# jquery - jquery + css 添加函数调用。

> ID：10349584
> 
> 赞同：0
> 
> 时间：2012-04-27T11:12:36.603
> 
> 标签：jquery, asp.net, css

当单击图像按钮时，我有一个固定的 div 从右侧滑入。然后 div 加载一个单独的 html 文件。如果我再次单击该按钮，它会切换回来。

我想在滑动 div 中添加一个新的“切换”按钮，它只会将 div 滑回隐藏状态，但是当我尝试在 div 中添加一些内容时，它不会显示。

我怎样才能做到这一点？

```
<Style>
#help_div
{
    position:fixed;
    top: 50px;
    right: 0px;
    height: 500px;
    width:  500px;
    padding: 20px;
    overflow-y: scroll;
    background-color:white;
    border: 1px solid gray;
    display: none;
}
</style>

<script type="text/javascript">
    var inp;
    var posX;
    var posY;

        $(document).ready(function () {

        });

        //Helping DIV
        function DisplayHelp(input) {
            if ($("#input").attr("title") == input) { //|| $("div#help_div").css("display") == "none") {

            }

            if ($("div#help_div").css("display") == "none") {
                $("div#help_div").empty();
                $("div#help_div").animate({ width: 'toggle' }, 1000);
                $("div#help_div").load("helpfiles/" + input + ".html");
                inp = input;
            }
            else if(inp == input){
                $("div#help_div").animate({ width: 'toggle' }, 500);
                $("div#help_div").empty();
                inp = null;
            }
            else if (inp != input) {
                $("div#help_div").empty();
                $("div#help_div").load("helpfiles/" + input + ".html");
                inp = input;
            }
        }    
</script>

<div id="help_div" class="roundedCorners"></div>  
    <img src="/images/help_qa.png" onclick="DisplayHelp('help1')" alt="Helping text" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:26:37.593

您可以使用以下代码在加载 HTML 页面后添加新元素。：

```
$("div#help_div").append("<div> Hello </div>"); 
```

您说您尝试添加新元素，您究竟在哪里尝试在加载后向 div 添加新元素？

# c++ - 使用 lambdas 作为异步回调

> ID：10349587
> 
> 赞同：4
> 
> 时间：2012-04-27T11:12:50.227
> 
> 标签：c++, c++11, lambda

我有一个程序，我不能使用标准`std::async`和线程机制。相反，我必须像这样编写程序：

```
void processor( int argument, std::function<void(int)> callback ) {
  int blub = 0;

  std::shared_ptr<object> objptr = getObject();

  // Function is called later.
  // All the internal references are bound here!
  auto func = [=, &blub]() {
    // !This will fail since blub is accessed by reference!
    blub *= 2;

    // Since objptr is copied by value it works.
    // objptr holds the value of getObject().
    objptr->addSomething(blub);

    // Finally we need to call another callback to return a value
    callback(blub);
  };

  objptr = getAnotherObject();

  // Puts func onto a queue and returns immediately.
  // func is executed later.
  startProcessing(func);
} 
```

我现在想知道我是否做得对，或者使用 lambdas 作为异步回调的最佳方式是什么。

编辑：在代码注释中添加了预期的行为。有关问题的可能解决方案，请参阅答案/评论`blub`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T21:18:29.713

函数对象将包含对局部变量的引用`blub`。*与语言中的所有其他情况一样*，这不会使局部变量在函数结束后生效。

所有其他捕获对象的副本将存储在函数对象中，因为它们是按值捕获的。这意味着他们没有问题。

如果您希望它在函数结束后继续存在，则不能将其生命周期与函数绑定：您需要*动态存储持续时间*。A`std::unique_ptr`可用于处理此类对象的清理，但它有点烦人，因为您不能“通过移动捕获”到 lambda ：S

```
auto blub = make_unique<int>(0); // [1]

std::shared_ptr<object> objptr = getObject();

// use std::bind to store the unique_ptr with the lambda
auto func = std::bind([=](std::unique_ptr<int>& blub) {
  *blub *= 2;

  objptr->addSomething(*blub);

  callback(*blub);
}, std::move(blub)); // move the unique_ptr into the function object

objptr = getAnotherObject();

// func is not copiable because it holds a unique_ptr
startProcessing(std::move(func)); // move it 
```

作为补充说明，旧的已弃用`std::auto_ptr`实际上在这里可以正常工作，因为如果 lambda 通过值捕获它，它就会被复制，并且它奇怪的复制语义正是我们所需要的。

* * *

[1\. 见[GOTW #](http://herbsutter.com/gotw/_102/)`make_unique` 102 。]

# objective-c - 二阶 IIR 滤波器，巴特沃斯带通 (EQ) 的系数？

> ID：10349597
> 
> 赞同：4
> 
> 时间：2012-04-27T11:13:32.250
> 
> 标签：objective-c, audio, signal-processing, core-audio, accelerate-framework

**重要更新：**我已经找到答案并将它们放在这个简单的开源库中：[http](http://bartolsthoorn.github.com/NVDSP/) ://bartolsthoorn.github.com/NVDSP/看看，如果你遇到问题，它可能会为你节省相当多的时间IOS中的音频过滤器！

^

我创建了一个（实时）音频缓冲区（`float *data`），其中包含几个`sin(theta)`不同频率的波。

下面的代码显示了我是如何创建缓冲区的，我尝试做一个带通滤波器，但它只是将信号变成噪声/光点：

```
 // Multiple signal generator
__block float *phases = nil;
[audioManager setOutputBlock:^(float *data, UInt32 numFrames, UInt32 numChannels)
{
    float samplingRate = audioManager.samplingRate;
    NSUInteger activeSignalCount = [tones count];

    // Initialize phases
    if (phases == nil) {
        phases = new float[10];
        for(int z = 0; z <= 10; z++) {
            phases[z] = 0.0;
        }
    }

    // Multiple signals
    NSEnumerator * enumerator = [tones objectEnumerator];
    id frequency;
    UInt32 c = 0;
    while(frequency = [enumerator nextObject])
    {
        for (int i=0; i < numFrames; ++i)
        {
            for (int iChannel = 0; iChannel < numChannels; ++iChannel) 
            {
                float theta = phases[c] * M_PI * 2;
                if (c == 0) {
                    data[i*numChannels + iChannel] = sin(theta);
                } else {
                    data[i*numChannels + iChannel] = data[i*numChannels + iChannel] + sin(theta);
                }
            }
            phases[c] += 1.0 / (samplingRate / [frequency floatValue]);
            if (phases[c] > 1.0) phases[c] = -1;
        }
        c++;
    }

    // Normalize data with active signal count
    float signalMulti = 1.0 / (float(activeSignalCount) * (sqrt(2.0)));
    vDSP_vsmul(data, 1, &signalMulti, data, 1, numFrames*numChannels);

    // Apply master volume
    float volume = masterVolumeSlider.value;
    vDSP_vsmul(data, 1, &volume, data, 1, numFrames*numChannels);

    if (fxSwitch.isOn) {
        // H(s) = (s/Q) / (s^2 + s/Q + 1)
        // http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt
        // BW 2.0  Q 0.667
        // http://www.rane.com/note170.html
        //The order of the coefficients are, B1, B2, A1, A2, B0.
        float Fs = samplingRate;

        float omega = 2*M_PI*Fs; // w0 = 2*pi*f0/Fs

        float Q = 0.50f;
        float alpha = sin(omega)/(2*Q); // sin(w0)/(2*Q)

        // Through H
        for (int i=0; i < numFrames; ++i)
        {
            for (int iChannel = 0; iChannel < numChannels; ++iChannel) 
            {
                data[i*numChannels + iChannel] = (data[i*numChannels + iChannel]/Q) / (pow(data[i*numChannels + iChannel],2) + data[i*numChannels + iChannel]/Q + 1);
            }
        }

        float b0 = alpha;
        float b1 = 0;
        float b2 = -alpha;
        float a0 = 1 + alpha;
        float a1 = -2*cos(omega);
        float a2 = 1 - alpha;

        float *coefficients = (float *) calloc(5, sizeof(float));

        coefficients[0] = b1;
        coefficients[1] = b2;
        coefficients[2] = a1;
        coefficients[3] = a2;
        coefficients[3] = b0;

        vDSP_deq22(data, 2, coefficients, data, 2, numFrames);

        free(coefficients);
    }

    // Measure dB
    [self measureDB:data:numFrames:numChannels];
 }]; 
```

我的目标是为这个缓冲区制作一个 10 波段均衡器，使用`vDSP_deq22`，该方法的语法是： `vDSP_deq22(<float *vDSP_A>, <vDSP_Stride vDSP_I>, <float *vDSP_B>, <float *vDSP_C>, <vDSP_Stride vDSP_K>, <vDSP_Length __vDSP_N>)` 参见：http: [//developer.apple.com/library/mac/#documentation/Accelerate/Reference/vDSPRef/Reference/ reference.html#//apple_ref/doc/c_ref/vDSP_deq22](http://developer.apple.com/library/mac/#documentation/Accelerate/Reference/vDSPRef/Reference/reference.html#//apple_ref/doc/c_ref/vDSP_deq22)

论据：

```
float *vDSP_A is the input data
float *vDSP_B are 5 filter coefficients
float *vDSP_C is the output data 
```

我必须制作 10 个过滤器（10 次`vDSP_deq22`）。然后我为每个频段设置增益并将它们组合在一起。但是我为每个滤波器提供什么系数？我知道这`vDSP_deq22`是一个二阶（巴特沃斯）IIR 滤波器，但我如何将它变成带通滤波器？

现在我有三个问题：

a) 我必须对音频缓冲区进行去交错和交错吗？我知道将 stride 设置为 2 只是在通道上过滤，但我如何过滤另一个，stride 1 会将两个通道作为一个处理。

b）我是否必须在缓冲区进入`vDSP_deq22`方法之前对其进行转换/处理？如果是这样，我是否也必须将其恢复正常？

c) 我应该为 10 秒设置什么系数值`vDSP_deq22`？

我已经尝试了几天，但我一直无法弄清楚这一点，请帮助我！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T11:29:39.883

您的`omega`值需要标准化，即表示为 Fs 的一小部分 - 看起来您`f0`在计算时遗漏了`omega`，这也会`alpha`出错：

```
 float omega = 2*M_PI*Fs; // w0 = 2*pi*f0/Fs 
```

应该是：

```
 float omega = 2*M_PI*f0/Fs; // w0 = 2*pi*f0/Fs 
```

其中 f0 是以 Hz 为单位的中心频率。

对于您的 10 频段均衡器，您需要选择 10 个 f0 值，以对数方式间隔，例如 25 Hz、50 Hz、100 Hz、200 Hz、400 Hz、800 Hz、1.6 kHz、3.2 kHz、6.4 kHz、12.8 kHz。

# python - Python - Google 课程 - 调用函数的样板

> ID：10349599
> 
> 赞同：3
> 
> 时间：2012-04-27T11:13:41.777
> 
> 标签：python, function, boilerplate

我在 YouTube 上观看了 Google 的一些视频，在基本课程中，他们展示了如何创建和调用函数：

```
def main():
    print 'Hello'

if __name__ == '__main__':   # this is the boilerplate portion
    main() 
```

如果我们可以让代码看起来像这样，为什么我们需要采取额外的步骤来创建该样板：

```
def main():
    print 'Hello'

main() 
```

如果没有额外的代码，输出将完全相同。

-BK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:20:28.040

这是为了测试目的。然后您编写模块，您可以在 name/main 部分下对其进行测试，并确保您的代码正常工作。但是，当您从另一个模块调用它时，您在本节下测试将不会调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:20:16.640

这样当文件由其他文件导入时，该部分不会运行。只有当文件实际上是第一个“调用”时，代码才会运行。

# java - 迭代时将元素添加到 Java LinkedList 的末尾

> ID：10349603
> 
> 赞同：4
> 
> 时间：2012-04-27T11:14:00.720
> 
> 标签：java, iterator, linked-list

我正在迭代一个 java.util.LinkedList，在某些情况下我会向它添加一个元素。

```
LinkedList<Schedule> queue = new LinkedList<Schedule>(schedules);
ListIterator<Schedule> iterator = queue.listIterator();
while (iterator.hasNext()) {
    Schedule schedule = iterator.next();
    if(condition)
        iterator.add(new Schedule());
} 
```

问题是，例如，如果我从一个项目开始，则在下一次 iterator.next() 调用之前添加新项目并且迭代退出。

如何在迭代时将项目附加到 LinkedList 的末尾？请不要告诉我使用另一个列表并在第一个列表之后对其进行迭代，因为它不能正确解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:44:58.390

假设您没有使用迭代器的硬性要求，那么您可以将其搁置并按索引“迭代”列表：

```
LinkedList<Schedule> list;

for (int i = 0; i < list.size(); i++) {
   final Schedule schedule = list.get(i);
   if(condition)
       list.add(new Schedule());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:19:47.423

如果您不能使用另一个列表，您可以通过计算您通过迭代器处理的元素数量并将其与列表的原始大小进行比较来解决您的问题：所有新元素都将位于列表的末尾，所以当您达到原始大小时，您可以结束循环。

```
LinkedList<Schedule> queue = new LinkedList<Schedule>(schedules);
int origSize = queue.size();
int currCount = 0;
ListIterator<Schedule> iterator = queue.listIterator();
while (iterator.hasNext()) {
  ++currCount;
  if (currCount >= origSize) {
    break; // reached the end of the original collection
  }
  Schedule schedule = iterator.next();
  if(condition)
    iterator.add(new Schedule());
} 
```

您还可以使用额外的列表来跟踪新元素，并在处理结束后将其添加到原始列表中：

```
LinkedList<Schedule> queue = new LinkedList<Schedule>(schedules);
LinkedList<Schedule> addQueue = new LinkedList<Schedule>();
ListIterator<Schedule> iterator = queue.listIterator();
while (iterator.hasNext()) {
  Schedule schedule = iterator.next();
  if(condition)
    addQueue.add(new Schedule());
} 
queue.addAll(addQueue); 
```

另外，请注意[`iterator.add()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ListIterator.html#add%28E%29)

> 将指定元素插入列表（可选操作）。该元素被插入到 next 将返回的下一个元素（如果有）之前，并且插入到 next 将返回的下一个元素（如果有）之后。（如果列表不包含任何元素，则新元素将成为列表中的唯一元素。）新元素插入到隐式光标之前：对 next 的后续调用将不受影响，对 previous 的后续调用将返回新元素. （此调用将调用 nextIndex 或 previousIndex 返回的值加一。）

因此，如果列表中有多个元素，它不会将新元素添加到末尾，而是在当前元素和返回的元素之间添加`next()`。如果您确实想将新元素放在列表的末尾，请使用`queue.add(...)`

一般来说，不建议在通过迭代器遍历集合的同时修改集合，所以我建议你使用第二种方法（将额外的元素收集在一个单独的列表中，并在最后将它们添加到原始列表中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-10T20:57:01.627

正如其他人所建议的那样，在当前的 Collections 框架中，在迭代期间没有有效的、现成的对末端插入的支持。一项建议涉及重写迭代器。但我说，为什么不更进一步呢？

1.  使用反射来修改`Node`类的可访问性，它为您提供了对双链接的引用，因此您不需要重新开始迭代`get(index)`，不应该在高性能代码中使用。

2.  `LinkedList`明智地继承/派生和覆盖。

3.  这很简单，但本着与上述 2 相同的精神，由于 JDK 是开源的，因此请根据需要借用源代码并编写自己的实现。

无论哪种情况，我都觉得这个功能应该由 Java LinkedList API 提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T11:40:25.237

> 如何在迭代时将项目附加到 LinkedList 的末尾？

```
public void addWork(Scheduler scheduler)
{
 synchronized(scheduler)
 {
  queue.addLast(scheduler);
 }
} 
```

您可以使用`queue.removeFirst()`从上到下处理队列中的项目。

```
public synchronized Scheduler getWork()
{
  return queue.removeFirst();
} 
```

已编辑。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-08-07T06:08:22.223

只有在不使用迭代器进行迭代时才能满足在迭代时添加并在迭代中包含添加项的要求，因为每次添加元素时都无法重新计算迭代器的状态。如果您接受效率较低的`get`方法来进行迭代，那么问题就很简单了。例如

```
LinkedList<Schedule> queue = new LinkedList<Schedule>(){{add(new Schedule());add(new Schedule());add(new Schedule());}};
int i = 0;
// queue.size() is evaluated every iteration
while (i < queue.size()) {
    Schedule schedule = queue.get(i);
    if(i++ % 2 == 0)
        queue.add(new Schedule());
}
System.out.println(queue.size()); 
```

按预期打印 6。

# python - Python中对象的相等性

> ID：10349605
> 
> 赞同：6
> 
> 时间：2012-04-27T11:14:11.163
> 
> 标签：python, equality

我有一个类`MyClass`，其中包含两个成员变量`foo`和`bar`：

```
class MyClass:
    def __init__(self, foo, bar):
        self.foo = foo
        self.bar = bar 
```

我有这个类的两个实例，每个实例都有相同的值`foo`和`bar`：

```
x = MyClass('foo', 'bar')
y = MyClass('foo', 'bar') 
```

但是，当我比较它们是否相等时，Python 会返回`False`：

```
>>> x == y
False 
```

我怎样才能让python认为这两个对象相等？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T11:16:09.217

你必须告诉 python 你希望如何定义相等。通过定义这样的特殊方法来做到`__eq__`这一点：

```
def __eq__(self, other):
    return self.attrfoo == other.attrfoo # change that to your needs 
```

这`__cmp__(self, other)`是比较类实例的“旧”样式，仅在没有`rich comparison`找到特殊方法时使用。在这里阅读它们：http: [//docs.python.org/release/2.7/reference/datamodel.html#specialnames](http://docs.python.org/release/2.7/reference/datamodel.html#specialnames)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T11:16:01.287

标准协议是定义[`__cmp__()`](http://docs.python.org/reference/datamodel.html#object.__cmp__)or[`__eq__()`和`__ne__()`](http://docs.python.org/reference/datamodel.html#object.__lt__)。

如果不这样做，Python 使用对象标识（“地址”）来比较对象。

# ruby-on-rails-3 - 在哪里覆盖设计 gem 的 current_user 辅助方法

> ID：10349606
> 
> 赞同：30
> 
> 时间：2012-04-27T11:14:16.633
> 
> 标签：ruby-on-rails-3, authentication, ruby-on-rails-3.1, rubygems, devise

我如何覆盖**设计 gem的****current_user**。 实际上我需要为移动应用程序添加网络服务。

 **目前的设计是管理网络应用程序的会话和“当前用户”。

现在移动应用程序将发送 user_id 到服务器。我需要像这样覆盖当前用户

```
def current_user
  if params[:user_id].blank?
    current_user
  else
    User.find(params[:user_id])
  end   
end 
```

我是否需要将设计 gem 修改为插件？或者是其他东西 ？
请详细解释，因为我是 Rails 新手。

亲切的问候，

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-04-27T11:36:27.677

根据模块[Devise::Controllers::Helpers](https://github.com/plataformatec/devise/blob/master/lib/devise/controllers/helpers.rb)，`current_user`（连同所有其他设计助手）被添加到 ApplicationController，这意味着您可以通过这种方式覆盖它：

```
# in application_controller.rb

def devise_current_user
  @devise_current_user ||= warden.authenticate(scope: :user)
end

def current_user
  if params[:user_id].blank?
    devise_current_user
  else
    User.find(params[:user_id])
  end   
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-02T22:52:04.857

建议对方法进行别名的另一个答案实际上不是最佳解决方案。道格英语的评论是最好的解决方案：

```
# In ApplicationHelper
def devise_current_user
   @devise_current_user ||= warden.authenticate(:scope => :user)
end 
```

原因如下：

假设您将 ApplicationHelper 包含在控制器中。如果您的 ApplicationHelper 中需要一个依赖于 devise_current_user 的方法，鉴于控制器内部的别名解决方案，那么您就不走运了。

但是使用上面的显式方法定义，您可以将定义移动到帮助程序并从其他方法调用它，您仍然可以将其包含在控制器中。

这很有用，例如，当您开发用户模拟解决方案并且需要在视图中显示两个不同的用户时，一个用于真正的管理员 (devise_current_user)，另一个用于模拟用户 (current_user)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-19T19:07:42.187

Limbo-Peng 的回答很棒，但可以稍微改进一下，以确保只有管理员才能做到这一点：

您还需要在 User 类上定义`is_admin?`方法或`is_admin`属性。

您可能还想使用与 不同的键`user_id`，因此它永远不会与您的常规参数冲突。

```
# to impersonate another user, e.g. for customer support
# only admins can do this..
#
alias_method :devise_current_user, :current_user
def current_user
  if ! params[:user_id].blank? \
     && devise_current_user && devise_current_user.is_admin? 
    User.find(params[:user_id])
  else
    devise_current_user
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-28T08:52:13.073

假设我们可以信任我们的会话数据（这取决于您是否在没有适当授权的情况下将用户输入放在那里），这可能会引起关注：

```
module Concerns
  module ControllerWithImpersonation
    extend ActiveSupport::Concern

    included do
      helper_method :devise_current_user
    end

    def current_user
      if session[:impersonated_user_id].blank?
        devise_current_user
      else
        User.find(session[:impersonated_user_id])
      end
    end

    def devise_current_user
      @devise_current_user ||= warden.authenticate(:scope => :user)
    end

  end
end 
```

我现在在一个项目中使用它。

一个小问题（在答案中，对不起）......我应该知道设计或监狱长的任何变化使`devise_current_user`上述过时吗？**

# ruby-on-rails - CKEditor：无法设置完整的工具栏

> ID：10349611
> 
> 赞同：1
> 
> 时间：2012-04-27T11:14:37.053
> 
> 标签：ruby-on-rails, ckeditor

我使用：rails 3.2、ckeditor_rails、typus。

正如我在 chrome 控制台中看到的，一切正常：

```
CKEDITOR.config.toolbar = "Full" 
```

但工具栏中只有少数元素。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:03:35.650

Typus 修复：[https ://github.com/solutus/typus/commit/e193bd2c5dd53b8872555d20813dff1f2af66358](https://github.com/solutus/typus/commit/e193bd2c5dd53b8872555d20813dff1f2af66358)

# mysql - 如何根据 MySQL 中的两个不同条件从同一列中检索两个值？

> ID：10349612
> 
> 赞同：0
> 
> 时间：2012-04-27T11:14:52.313
> 
> 标签：mysql

表名：路线

```
Route_ID (int)
Route_From (int)
Route_To (int) 
```

表名：站

```
Station_ID (int),
Name (char) 
```

`Route_From`、`Route_To`和的值`Station_ID`相同。

我想知道如何从stations.name 中检索两个不同条件的两个值。例如，像

```
 select s.name, s.name from stations s, route r, 
 where route_from=1 and
 route_to=3; 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:22:36.487

也许你可以这样做：

```
SELECT
    Route.Route_ID,
    fromStation.Name,
    toStation.Name
FROM
    Route
    LEFT JOIN Stations AS fromStation
        ON Route.Route_From =fromStation.Station_ID
    LEFT JOIN Stations AS toStation
        ON Route.Route_To  =toStation.Station_ID
WHERE 
    Route.Route_ID = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T10:59:30.287

```
SELECT
Route.Route_ID,
fromStation.Name,
toStation.Name
FROM
Route
LEFT JOIN Stations AS fromStation
    ON Route.Route_From =fromStation.Station_ID
LEFT JOIN Stations AS toStation
    ON Route.Route_To  =toStation.Station_ID
WHERE 
Route.Route_ID = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:25:03.987

我想你想要更像这样的东西：

```
select s1.name as route_from, s2.name as route_to from route r
left join stations s1 on r.route_from = s1.Station_ID
left join stations s2 on r.route_to = s2.Station_ID
where Route_ID = 1; 
```

# android - 在Android中上传图像时如何在图像视图中显示进度条？

> ID：10349615
> 
> 赞同：-1
> 
> 时间：2012-04-27T11:15:09.723
> 
> 标签：android, progress-bar

目前，当我在 Android 中上传图像时，整个屏幕变为空白，并且图像会在一段时间后加载。我想更改它并确保 ImageView 内只有一个进度条，显示已完成多少图像上传（类似于 Whats'app），然后在上传完成后显示图像。我怎么做？

编辑：

我确实知道如何使用进度条，但我在这里面临的问题是我的 ImageActivity 是一个单独的活动，我从另一个活动中调用它来上传图像。我从中调用的活动是应该显示进度条的活动。因此，无法做到这一点。无法从其他活动中获取进度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:17:23.123

试试下面的链接上传文件以显示进度条！

[在android中上传进度条？](https://stackoverflow.com/questions/5103377/upload-progress-bar-in-android)

谢谢...！

# javascript - 移动浏览器上的固定比例元素

> ID：10349616
> 
> 赞同：2
> 
> 时间：2012-04-27T11:15:20.443
> 
> 标签：javascript, html, css, notifications

我目前正在编写一个需要显示手风琴通知的Javascript插件（从屏幕顶部向下滑动的那种）。

只需在模态框和手风琴上使用这个 css，它就可以在桌面浏览器上完美运行。

```
position: fixed;
top: 0;
left: 0;
width: 100%; 
```

不幸的是，这在 Android 和 iOS 等移动浏览器上效果不佳。我的带有 Android 4 ICS 的 Galaxy S2 上的默认行为是固定位置元素位于正确的位置，并且大小为 100% 屏幕宽度。不幸的是，一旦您捏缩放并更改页面的比例，浏览器似乎不会重新计算 100% 的宽度，并且元素会离开屏幕。平移内容不会平移固定元素。

我找到了[iScroll](http://cubiq.org/iscroll-4)，一个 Javascript 插件，它看起来完全符合我的要求 - 除了它需要更改页面主要内容的来源才能工作。我的插件必须在**任何网站**上工作，所以很遗憾这不是一个选项。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:26:11.473

尝试添加

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

到您的头上，这应该会阻止移动浏览器调整内容的大小。

# filter - 猪中的过滤器匹配过多

> ID：10349618
> 
> 赞同：1
> 
> 时间：2012-04-27T11:15:23.700
> 
> 标签：filter, hadoop, apache-pig

我有一个过滤关键字列表（大约 1000 个），我需要使用这个列表过滤 pig 中的一个关系字段。

最初，我已经声明了这些关键字，例如： %declare p1 '。*关键词 1。*'; …………

% 声明 p1000 '。*关键字 1000。*';

然后我正在做过滤，如：

Filtered= FITLER SRC BY (not $0 匹配 '$p1') and (not $0 匹配 '$p2') and ...... (not $0 匹配 '$p1000');

DUMP 过滤；

假设我的源关系在 SRC 中，我需要对第一个字段应用过滤，即 $0。

如果我将过滤器的数量减少到 100-200，它工作正常。但是随着过滤器的数量增加到 1000。它不起作用。

有人可以建议一种解决方法来获得正确的结果吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:56:03.283

您可以编写一个简单的过滤器 UDF，在其中执行所有检查，例如：

```
 package myudfs;
 import java.io.IOException;
 import org.apache.pig.FilterFunc;
 import org.apache.pig.data.Tuple;

 public class MYFILTER extends FilterFunc
 {
    static List<String> filterList;
    static MYFILTER(){
        //load all filters
    }
    public Boolean exec(Tuple input) throws IOException {
        if (input == null || input.size() == 0)
            return null;
        try{
            String str = (String)input.get(0);
           return !filterList.contains(str);
        }catch(Exception e){
            throw new IOException("Caught exception processing input row ", e);
        }
    }

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:58:53.970

一种浅层的方法是将过滤分成多个阶段。在第一阶段过滤关键字 1 到 100，然后过滤另外 100 个，依此类推，总共 (count(keywords)/100) 个阶段。但是，鉴于您的数据的更多详细信息，可能有更好的解决方案。

对于上述浅层解决方案，您可以将 pig 脚本包装在一个 shell 脚本中，该脚本对输入进行打包并在当前被过滤的关键字子集上开始运行。

# jpeg - 从 jpeg 文件中提取缩略图

> ID：10349622
> 
> 赞同：24
> 
> 时间：2012-04-27T11:15:49.897
> 
> 标签：jpeg, extract, exif

我想从 jpegs 中提取缩略图，没有任何外部库。我的意思是这并不太难，因为我需要知道缩略图从哪里开始，在文件中结束，然后简单地剪切它。我研究了许多文档（即：[http](http://www.media.mit.edu/pia/Research/deepview/exif.html) ://www.media.mit.edu/pia/Research/deepview/exif.html ），并尝试分析 jpeg，但并非一切都清楚。我试图一步一步地跟踪字节，但在深处我感到困惑。是否有任何好的文档或可读的源代码来提取 jpeg 文件中有关缩略图开始和结束位置的信息？

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-08-24T14:05:12.803

[Exiftool](http://owl.phy.queensu.ca/~phil/exiftool/examples.html)非常有能力快速轻松地做到这一点：

```
exiftool -b -ThumbnailImage my_image.jpg > my_thumbnail.jpg 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-27T23:50:35.537

对于由手机或数码相机创建的大多数 JPEG 图像，缩略图（如果存在）存储在 APP1 标记 (FFE1) 中。此标记段内部是一个 TIFF 文件，其中包含主图像的 EXIF 信息和存储为 JPEG 压缩图像的可选缩略图图像。TIFF 文件通常包含两个“页面”，其中第一页是 EXIF 信息，第二页是以“旧”TIFF 类型 6 格式存储的缩略图。类型 6 格式是指 JPEG 文件按原样存储在 TIFF 包装器内。如果您想要最简单的代码将缩略图提取为 JFIF，则需要执行以下步骤：

1.  熟悉 JFIF 和 TIFF 标记/标签。JFIF 标记由两个字节组成：0xFF 后跟标记类型（APP1 为 0xE1）。这两个字节后跟以大端顺序存储的两字节长度。对于 TIFF 文件，请参阅 Adob​​e TIFF 6.0 参考。
2.  在 JPEG 文件中搜索 APP1 (FFE1) EXIF 标记。可能有多个 APP1 标记，并且在 APP1 之前可能有多个标记。
3.  您要查找的 APP1 标记包含紧跟在长度字段之后的字母“EXIF”。

4.  查找“II”或“MM”（距长度 6 个字节）以指示 TIFF 文件中使用的字节序。II = 英特尔 = 小端，MM = 摩托罗拉 = 大端。
5.  跳过第一页的标签以查找存储图像的第二个 IFD。在第二个“页面”中，查找指向 JPEG 数据的两个 TIFF 标签。标记 0x201 具有 JPEG 数据的偏移量（相对于 II/MM），标记 0x202 具有以字节为单位的长度。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-21T10:12:13.447

这个问题有一个更简单的解决方案，但我不知道它有多可靠：从第三个字节开始读取 JPEG 文件并搜索 FFD8（JPEG 图像标记的开始），然后搜索 FFD9（JPEG 图像的结尾标记）。提取它，瞧，这就是你的缩略图。

一个简单的 JavaScript 实现：

```
function getThumbnail(file, callback) {
    if (file.type == "image/jpeg") {
        var reader = new FileReader();
        reader.onload = function (e) {
            var array = new Uint8Array(e.target.result),
                start, end;
            for (var i = 2; i < array.length; i++) {
                if (array[i] == 0xFF) {
                    if (!start) {
                        if (array[i + 1] == 0xD8) {
                            start = i;
                        }
                    } else {
                        if (array[i + 1] == 0xD9) {
                            end = i;
                            break;
                        }
                    }
                }
            }
            if (start && end) {
                callback(new Blob([array.subarray(start, end)], {type:"image/jpeg"}));
            } else {
                // TODO scale with canvas
            }
        }
        reader.readAsArrayBuffer(file.slice(0, 50000));
    } else if (file.type.indexOf("image/") === 0) {
        // TODO scale with canvas
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-27T12:08:54.960

JFIF 上的维基百科页面[http://en.wikipedia.org/wiki/JPEG_File_Interchange_Format](http://en.wikipedia.org/wiki/JPEG_File_Interchange_Format)很好地描述了 JPEG 标头（标头包含作为未压缩光栅图像的缩略图）。这应该让您了解布局以及提取信息所需的代码。

图像标题的十六进制转储（小端显示）：

```
sdk@AndroidDev:~$ head -c 48 stfu.jpg |hexdump
0000000 d8ff e0ff 1000 464a 4649 0100 0101 4800
0000010 4800 0000 e1ff 1600 7845 6669 0000 4d4d
0000020 2a00 0000 0800 0000 0000 0000 feff 1700 
```

Image Magic (bytes 1,0), App0 Segment header Magic(bytes 3,2), Header Length (5,4) Header Type signature ("JFIF\0"||"JFXX\0")(bytes 6-10) , Version (bytes 11,12) Density units (byte 13), X Density (bytes 15,14), Y Density (bytes 17,16), Thumbnail width (byte 19), Thumbnail height (byte 18), 最后是rest最多“标题长度”是缩略图数据。

从上面的例子中可以看出，header 长度为 16 字节（字节 6,5），版本为 01.01（字节 12,13）。此外，由于缩略图宽度和缩略图高度均为 0x00，因此图像不包含缩略图。

# android - 如何将一个类透明变量值获取到android中的另一个类

> ID：10349631
> 
> 赞同：0
> 
> 时间：2012-04-27T11:16:31.480
> 
> 标签：android, android-emulator

嗨，我在这里做一个应用程序。用户单击按钮一次意味着在另一个活动中我需要执行一个操作，用户再次返回同一页面，再次单击同一按钮意味着我需要执行不同的操作。我在活动 1 中有 2 个活动我有 1 个按钮，我在活动 1 按钮中使用一个计数变量单击那个时间我增加计数变量，使用 putextra 我根据计数将计数值转换为活动 2 我执行操作，但计数一次是在增加时，如果我回到相同的 activty1，然后我单击按钮，计数也仅为 '1'，它不会增加到 2.so 如何解决这个问题任何有想法的人建议我。

```
 Activity1 .class:
 public class Activity1 extends Activity implements OnClickListener{
Button b1,b2;
  int countk4=0;

   SharedPreferences share;
   String bol3;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.home1);
     b1=(Button)findViewById(R.id.button1);
    b1.setOnClickListener(this);
   }

public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v==b1)
    {
        countk4++;
         share=getSharedPreferences("shared", MODE_WORLD_WRITEABLE);
         SharedPreferences.Editor editor=share.edit();

         editor.putInt("roll", countk4);

         editor.commit();

         show();
        Intent i=new Intent(Activity1 .this,Activity2.class);
        i.putExtra("k", 1);
        i.putExtra("k1", 13);
        i.putExtra("ks", val1);
        startActivity(i);
    }
}
Integer val1,val2;
private void show() {
    // TODO Auto-generated method stub
    share=getSharedPreferences("shared", MODE_WORLD_READABLE);

     val1=share.getInt("roll",0);

    }
       }

  Activity2 .class:
   public class Activity2 extends Activity implements OnClickListener{
Button back;
      int countkv;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.home2);
     back=(Button)findViewById(R.id.button1);
    back.setOnClickListener(this);
          countkv = getIntent().getIntExtra("ks", 0); 

  if(countkv =1)
    {
   Toast.makeText(getApplicationContext(), "hai.......i am first", Toast.LENGTH_LONG).show(); 
   }

if(countkv =2)
{
   Toast.makeText(getApplicationContext(), "hai.......1 am second", Toast.LENGTH_LONG).show(); 
   }

  public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v==back)
    {
        Intent i=new Intent(Activity2.this,Activity1.class);

        startActivity(i);
    }

}
}
}
 but above every time first toast message displayed becz countkv is every time 1 only.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:25:32.327

在接收方做一个对象`Bundle`。

```
 Bundle myBundle = new Bundle(); // Declare above
    String temp;

    myBundle = getIntent().getIntExtra();
    temp = myBundle.getString("ks"); // temp will have the val1. 
```

希望你现在能得到它。

# c# - Spotify/iTunes 全窗口应用

> ID：10349636
> 
> 赞同：3
> 
> 时间：2012-04-27T11:17:03.493
> 
> 标签：c#, wpf, visual-studio, visual-studio-2010, user-interface

我目前正在使用 Visual Studio 2010 开发一个应用程序。并试图创建一个类似于 iTunes 和 Spotify 的界面，它是一个带有自定义窗口控件的全窗口应用程序。谁能指出我如何做到这一点的方向？
[https://www.dropbox.com/s/pszm4txuxt400tt/spotify.PNG](https://www.dropbox.com/s/pszm4txuxt400tt/spotify.PNG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:16:59.420

尝试将 WPF 用于一组简单而有吸引力的控件，您可以根据需要对其进行编辑。您可以将 On Load 事件的主窗口模式设置为全屏或最大化。如果您想了解有关使用可用控件的更多信息，请参阅 Google WPF 教程。

# java - 在 Wicket 中提交表单后的 AjaxFormComponentUpdatingBehaviour 问题

> ID：10349638
> 
> 赞同：2
> 
> 时间：2012-04-27T11:17:29.763
> 
> 标签：java, ajax, submit, wicket, behavior

我有这样的问题`Wickets AjaxFormComponentUpdatingBehaviour`。当您将其设置为表单上的某些组件并为其添加验证时，在您按下“提交表单”按钮后，假设您收到错误，您的组件未通过验证，之后`ajax`表现不同，不更新模型。

这是代码示例：

```
TextField someText = new TextField("someTextId");
someText.setRequired(true); //added validation on requireness
CheckBox checkBx = new CheckBox("checkBxId");
TextField changeableTxt = new TextField("changeableTxtId");
changeableTxt.setEnabled(false);

checkBx.add(new AjaxFormComponentUpdatingBehaviour("onclick"){
protected void onUpdate(AjaxRequestTarget target) {
    if(compoundModel.isCheckBx()){
         changeableTxt.setEnabled(true);
         target.addComponent(changeableTxt);
    }else{
         compoundModel.setChangeableTxt(null);
         changeableTxt.setEnabled(false);
         target.addComponent(changeableTxt);
    }
  }
});
Form form = new Form("form", compoundModel);
form.add(someText, checkBx, changeableTxt);
add(form); 
```

因此，如果选中`checkBx`，输入一些值`changeableTxt`，`someText`留空并按提交按钮，将出现错误，该字段 someText 是必需的。之后，如果我们点击`checkBx`，它会使`changeableTxt`字段禁用，但它会在输入值之前离开，而不是 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:46:46.967

好吧，让我们从解释为什么您可能认为您的代码可以工作开始：AjaxFormComponentUpdatingBehavior 将更新您的 CheckBox 的模型，但仅更新此模型。这意味着`changeableTxt`如果您删除代码行，它甚至会保持空白`compoundModel.setChangeableTxt(null);`

因此，如果 Checkbox 应该更改`changeableTxt`TextField 的值，它应该在单击它的同时提交它所具有的值。您可以通过包装一个表单`checkBx`并`changeableTxt`在单击 CheckBox 时使用 AjaxFormSubmitBehavior 提交此表单来实现此目的。

```
public class TestingPanel extends Panel {
    public TestingPanel(String id) {
    super(id);

    final CompoundModel compoundModel = new CompoundModel();

    final Form<CompoundModel> form = new Form<CompoundModel>("form",
            new CompoundPropertyModel<CompoundModel>(compoundModel)) {
        @Override
        protected void onValidate() {
            System.out.println("validate: "
                    + compoundModel.getChangeableTxt());
            System.out.println("validate: "
                    + getModel().getObject().getChangeableTxt());

            super.onValidate();
        }
    };
    form.setOutputMarkupId(true);
    add(form);

    TextField someText = new TextField("someText");
    someText.setRequired(true); // added validation on requireness
    final CheckBox checkBx = new CheckBox("checkBx");
    final TextField changeableTxt = new TextField("changeableTxt");
    changeableTxt.setOutputMarkupId(true);
    changeableTxt.setEnabled(false);

    Form checkBoxForm = new Form("checkBoxForm");
    form.add(checkBoxForm);

    AjaxFormSubmitBehavior submitBehavior = new AjaxFormSubmitBehavior(
            checkBoxForm, "onclick") {

        @Override
        protected void onSubmit(AjaxRequestTarget target) {
            if (checkBx.getModelObject() == true) {
                changeableTxt.setEnabled(true);
                target.add(changeableTxt);
            } else {
                compoundModel.setChangeableTxt(null);
                changeableTxt.setEnabled(false);
                target.add(changeableTxt);
            }

        }

        @Override
        protected void onError(AjaxRequestTarget target) {

        }
    };
    checkBx.add(submitBehavior);
    checkBoxForm.add(checkBx, changeableTxt);

    AjaxFormComponentUpdatingBehavior updateBehavior = new AjaxFormComponentUpdatingBehavior(
            "onclick") {
        protected void onUpdate(AjaxRequestTarget target) {
            if (compoundModel.isCheckBx()) {
                changeableTxt.setEnabled(true);
                target.addComponent(changeableTxt);
            } else {
                // compoundModel.setChangeableTxt("");
                changeableTxt.setEnabled(false);
                target.add(changeableTxt);
            }
        }
    };

    form.add(someText);

    FeedbackPanel feedbackPanel = new FeedbackPanel("feedbackPanel");
    form.add(feedbackPanel);

    AjaxSubmitLink submit = new AjaxSubmitLink("submit", form) {

        @Override
        protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
            target.add(form);
        }

        @Override
        protected void onError(AjaxRequestTarget target, Form<?> form) {
            target.add(form);

        }
    };
    add(submit);

}

class CompoundModel implements Serializable {

    private boolean checkBx = false;

    private String someText = null;

    private String changeableTxt = null;

    public boolean isCheckBx() {
        return checkBx;
    }

    public void setCheckBx(boolean checkBx) {
        this.checkBx = checkBx;
    }

    public String getSomeText() {
        return someText;
    }

    public void setSomeText(String someText) {
        this.someText = someText;
    }

    public String getChangeableTxt() {
        return changeableTxt;
    }

    public void setChangeableTxt(String changeableTxt) {
        this.changeableTxt = changeableTxt;
    }

}
} 
```

使用以下html：

```
<!DOCTYPE html>
<html xmlns:wicket="http://wicket.apache.org">
<wicket:panel>
    <form wicket:id="form">
        <div wicket:id="feedbackPanel" />
        <input type="text" wicket:id="someText"  /><br />
        <form wicket:id="checkBoxForm">
            <input type="checkbox" wicket:id="checkBx" /><br />
            <input type="text" wicket:id="changeableTxt" /><br />
        </form>
    </form>
    <a wicket:id="submit">submit</a>
</wicket:panel> 
```

# actionscript-3 - ActionsScript 3 碰撞

> ID：10349639
> 
> 赞同：0
> 
> 时间：2012-04-27T11:17:31.733
> 
> 标签：actionscript-3, flash, actionscript, collision-detection, collision

[青蛙](http://epickris.co.uk/portfolio/frog)

我正在开发一个名为 Frog 的 Flash 游戏，目前我的青蛙和苍蝇之间的碰撞代码无法按预期工作。我想要它，所以它的工作原理类似于下面链接的方法（最后一个示例）。

[碰撞检测方法，hitTest 和 hitTestObject 替代方案](http://sierakowski.eu/list-of-tips/39-collision-detection-methods-hittest-and-hittestobject-alternatives.html)

任何帮助，将不胜感激。

```
function hitTargetFunction():void {
    for (i = 0; i < insectsMC.length; i++) {
        for (j = 0; j < insectsMC[i].length; j++) {
            if (frogMC.hitTestObject(insectsMC[i][j])) {
                trace('Target: ' + insectsMC[i][j].name);
                score +=  1;
                trace('Score: '+score);
                insectsMC[i][j].x = 0 - insectsMC[i][j].width * 2;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:18:58.327

我可以建议尝试一下奇妙的[碰撞检测套件](http://code.google.com/p/collisiondetectionkit/)吗？

我相信它会做你需要的一切，甚至更多。它也是您编写代码示例的 AS3，所以我希望您觉得它有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:22:41.933

在这种情况下，在青蛙电影剪辑中创建一个电影剪辑/精灵可能是最好的选择。PixelPerfectCollision 非常棒且有用（但在大型游戏中，价格昂贵），但碰撞会发生在青蛙的任何一块上。你当然可以拆开你的青蛙电影剪辑，只在舌头上做 PixelPerfectCollision。但如果这是为了课程作业，我会坚持在青蛙内部的某种显示对象上执行 hitTest()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:43:01.757

如果不允许您在课程作业中使用第三方库，您应该看看这个关于[使用 ActionScript 3.0 进行像素级碰撞检测的](http://active.tutsplus.com/tutorials/games/pixel-level-collision-detection/)优秀教程。

一般的想法是您创建矢量图形的 BitmapData 副本，并使用该类的 hitTest 方法来检查像素级的碰撞。

# python - 在 Gtk 3 中向工具按钮添加图标

> ID：10349642
> 
> 赞同：2
> 
> 时间：2012-04-27T11:17:44.667
> 
> 标签：python, toolbar, gtk3, pygobject

有没有办法将图标添加到 Gtk.ToolButton（Gtk3 using PyGi for Python）以添加到 GTK+3 工具栏？

下面是我的代码：

```
self.addfile = Gtk.ToolButton()
self.addfile.set_label("Add File")
self.addfileimg = Gtk.Image()
self.addfileimg.show()
self.addfileimg.set_from_file(self.get_resource("img/file.png"))
self.addfile.set_icon_widget(self.addfileimg)
self.addfile.connect("clicked", self.on_open_file) 
```

注意：该`get_resource()`方法挖掘资源路径的本地工作文件夹，并且假定此方法在此上下文中工作。

我使用 PyGi 尝试了上面编写的代码。图像文件有效，一切正常，但图像没有出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:39:46.067

GtkToolButton 类有一个名为 的方法`set_icon_widget`，将 GtkWidget 实例作为其操作数。GtkImage 是一个包含图像的容器。因此：

```
myToolButton.set_icon_widget(myImageWidget) 
```

# android - Android 字母部分列表视图，如联系人应用程序列表视图

> ID：10349652
> 
> 赞同：10
> 
> 时间：2012-04-27T11:19:12.220
> 
> 标签：android

现在任何人都可以帮助我如何看待我的观点。请帮助我，我太困惑了。

![在此处输入图像描述](../Images/f6a015058ce75fcf9aa51bd4482c9812.png)

这是我的代码：--------

电话簿列表视图.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/searchTxtBox"
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:layout_marginTop="65dp"
        android:hint="@string/searchHintTxt"
        android:singleLine="true"
        android:drawableLeft="@android:drawable/ic_search_category_default"
        android:drawablePadding="0dp"
        android:text="" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fadingEdge="vertical"
        android:fastScrollEnabled="true"
        android:padding="2dp"
        android:layout_below="@+id/searchTxtBox" >
    </ListView>

    <TextView
        android:id="@+id/phoneBookEmptyView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:layout_gravity="center_horizontal"
        android:text="@string/phoneBookEmptyMsg"
        android:textColor="@color/white"
        android:layout_below="@+id/searchTxtBox"
        android:layout_marginTop="5dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

并在 PhoneBookList.java 文件中

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.phonebooklistview);

    listView = getListView();
    adapter = new ItemsAdapter(this);
    adapter.notifyDataSetChanged();
    listView.setAdapter(adapter);
    listView.setTextFilterEnabled(true);
    //listView.setFastScrollEnabled(true);
    listView.setOnItemLongClickListener(this);
    listView.setItemsCanFocus(false);
    listView.setEmptyView(findViewById(R.id.phoneBookEmptyView));
    registerForContextMenu(listView);

}

private class ItemsAdapter extends BaseAdapter implements SectionIndexer
{
    HashMap<String, Integer> alphaIndexer;
    String[] sections;
      private LayoutInflater inflater;
      String[][] items;

      public ItemsAdapter(Context context)
      {
          inflater = LayoutInflater.from(context);
          this.items = phoneBookDataArr;

            alphaIndexer = new HashMap<String, Integer>();
            int size = items.length;

            for (int x = 0; x < size; x++)
            {
                String name=items[x][2];
                String ch =  name.substring(0, 1);
                ch = ch.toUpperCase();
                alphaIndexer.put(ch, x);

                Log.e(TAG,"alphaIndexer="+ch);
            }

            Set<String> sectionLetters = alphaIndexer.keySet();
            ArrayList<String> sectionList = new ArrayList<String>(sectionLetters); 
            Collections.sort(sectionList);
            sections = new String[sectionList.size()];
            sectionList.toArray(sections);
      }

      //@Override
      public View getView(final int position, View convertView, ViewGroup parent)
      {
    // here my custom listviewcontentview goes.
      }

      public int getCount()
      {
          return items.length;
      }

      public Object getItem(int position)
      {
          return position;
      }

      public long getItemId(int position)
      {
          return 0;
      }

      public int getPositionForSection(int section)
      {
          Log.e(TAG,"getPositionForSection="+section);
          return alphaIndexer.get(sections[section]);
      }

      public int getSectionForPosition(int position)
      {
          Log.e(TAG,"getSectionForPosition="+position);
          return 1;
      }

      public Object[] getSections()
      {
          Log.e(TAG,"getSections="+sections.length);
          for (String str : sections)
          {
            Log.e(TAG,str);
          }
          return sections;
      }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T17:21:00.337

## 添加搜索栏

1：搜索栏使用EditText
2：注册到addTextChangedListener
3：实现onTextChanged(...)方法来跟踪用户输入的字符序列4：使用getText()方法获取currentSearchName。遍历联系人列表以查找匹配的搜索。将匹配的结果存储在一个列表中，并使用 Content Adapter 显示该列表。

详细实现见以下链接
[http://www.androidpeople.com/android-listview-searchbox-sort-items](http://www.androidpeople.com/android-listview-searchbox-sort-items)

## 添加标签和侧边栏：

1：在 ContentAdapter 类中添加侧边栏实现 SectionIndexer
2：遍历联系人列表以获取所有姓名的首字母
3：实现 setSection(..) 方法来设置标签
4：实现 getPositionForSection(..) 到当用户单击侧边栏时，转到与缩写相对应的标签。

SideBar 的实现可以在以下链接中找到。 [http://codelikes.blogspot.com/2012/04/android-alphabet-listview-like-contacts.html](http://codelikes.blogspot.com/2012/04/android-alphabet-listview-like-contacts.html)？

# javascript - Internet Explorer 中的 Ajax 可靠下拉列表问题

> ID：10349653
> 
> 赞同：1
> 
> 时间：2012-04-27T11:19:24.603
> 
> 标签：javascript, ajax, internet-explorer, drop-down-menu

我的网页中有两个下拉列表，一个依赖于另一个。我正在使用的 Ajax 代码在 Chrome、Mozilla 中运行良好，但在 IE 中运行良好（我使用的是 IE9）。有人可以帮我纠正这个问题。

这是 Ajax 代码-

```
 <script language="javascript" type="text/javascript">  
  var xmlHttp  
  var xmlHttp

  function showSubCategory(str){
      if (typeof XMLHttpRequest != "undefined"){
      xmlHttp= new XMLHttpRequest();
      }
      else if (window.ActiveXObject){
      xmlHttp= new ActiveXObject("Microsoft.XMLHTTP");
      }
      if (xmlHttp==null){
      alert("Browser does not support XMLHTTP Request")
      return;
      } 
      var url="jsp/subcategory.jsp";
      url +="?count=" +str;
      xmlHttp.onreadystatechange = stateChange1;
      xmlHttp.open("GET", url, true);
      xmlHttp.send(null);
      }

      function stateChange1(){   
      if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete"){   
      document.getElementById("subcat").innerHTML=xmlHttp.responseText   
      }   
      } 
```

这是下拉列表所在的主要 jsp 页面。--

```
 <table>
     <tr>
<td align="right" width="10%">Category </td>
<td>
   <select id='category' name="adv.categoryNo" onchange="showSubCategory(this.value)">  
       <option >Select the Category</option>  
     <%
Class.forName("com.mysql.jdbc.Driver").newInstance();  
Connection con1 = DriverManager.getConnection("jdbc:mysql://localhost:3306/db","user","pwd");  
Statement stmt1 = con1.createStatement();  
ResultSet rs1 = stmt1.executeQuery("Select * from categories");
while(rs1.next()){
    %>
    <option value="<%=rs1.getString(2)%>"><%=rs1.getString(2)%></option>  
    <%
}
    %>
    </select>                                  
     </td>
    </tr>

   Second drop down list 

    <tr>
      <td align="right" width="10%">Subcategory <span class="mandatory">*</span>: </td>
       <td>
         <div id='subcategory'>  
         <select id='subcat'  name='subcategory'>  
         <option >Select the Subcategory</option>  
         </select>  
         </div>
    </td>
    </tr> 
```

这是 Ajax 调用的**子类别**jsp 文件。

```
<%@page import="java.sql.*"%>
 <%
  String category=request.getParameter("count");  
   String buffer="<select name='adv.subCategoryNo'><option >Select the Subcategory</option>";  
 try{
  Class.forName("com.mysql.jdbc.Driver").newInstance();  
  Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/db","user","pwd");  
  Statement stmt = con.createStatement();  
  ResultSet rs = stmt.executeQuery("Select * from subcategories where     categoryName='"+category+"' ");  
   while(rs.next()){
   buffer=buffer+"<option value='"+rs.getString(3)+"'>"+rs.getString(3)+"</option>";  
   }  
    buffer=buffer+"</select>";  
    response.getWriter().println(buffer); 
    }
   catch(Exception e){
    System.out.println(e);
    }
   %> 
```

奇怪的是，如果我将 Ajax 代码的以下函数中的**getElementById**参数从“ **subcat** ”更改为“ **subcategory** ”，即覆盖第二个下拉列表的 div id，它在 IE 和其他浏览器中运行良好。

```
function stateChange1(){   
      if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete"){   
      document.getElementById("subcat").innerHTML=xmlHttp.responseText   
      } 
```

如果我遵循上述方法，我将无法使用以下 JS 代码对该子类别选择框进行任何 javascript 表单验证。

```
 function madeSelectionCity(){
  var subcat = document.getElementById('subcat');
if(subcat.value == "Select the City name"){
    alert("Please select a subcategory first");
    subcat.focus();
    return false;
}else{
    return true;
}
 } 
```

希望我的问题很清楚。如果需要更多解释，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:39:58.413

更改以下代码行（在**ajax**代码调用的**subcategory.jsp**中）

 **```
 String buffer="<select name='adv.subCategoryNo'><option >Select the Subcategory</option>"; 
```

到

```
 String buffer="<select id='subcat' name='adv.subCategoryNo'><option >Select the Subcategory</option>"; 
```

并添加这行代码（在**ajax**代码调用的**subcategory.jsp**中）

 **```
response.setContentType("text/html"); 
```

在网页（主页）上，html 应该是

```
 <div id='subcategory'>
 </div> 
```

和ajax（主页）代码应该是

```
function stateChange1(){   
      if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete"){   
      document.getElementById("subcategory").innerHTML=xmlHttp.responseText   
      } 
```****

# database - 优化 ORACLE 上的查询。尝试索引

> ID：10349656
> 
> 赞同：1
> 
> 时间：2012-04-27T11:19:41.567
> 
> 标签：database, oracle, indexing, query-performance

我有这个查询，我想通过添加适当的索引来提高它的性能。

```
DELETE FROM MYTAB1 WHERE MYID1 IN (SELECT MYID2 FROM MYTAB2); 
```

我不熟悉索引的语法和它们所需的设置类型。请提供相同的。这里的主要问题是 MYTAB1 有数百万条记录，因此查询需要很多时间。但是，MYTAB2 只有 1000 条记录。MYID1 是 MYTAB1 的主键

我试过创建索引：

```
CREATE INDEX IDX_TAB1_ID1 ON MYTAB1(MYID1); 
```

它对查询的性能没有太大影响。

我运行了解释计划并得到了这个：

```
PLAN_TABLE_OUTPUT
------------------------------------------------------------------------------------   
| Id  | Operation             | Name          | Rows  | Bytes |TempSpc| Cost (%CPU)|
------------------------------------------------------------------------------------
|   0 | DELETE STATEMENT      |               | 63977 |    11M|       | 62216   (2)|
|   1 |  DELETE               | MYTAB1        |       |       |       |            |
|   2 |   HASH JOIN RIGHT SEMI|               | 63977 |    11M|  7688K| 62216   (2)|
|   3 |    TABLE ACCESS FULL  | MYTAB2        |   437K|  2561K|       |  1189   (2)|
|   4 |    TABLE ACCESS FULL  | MYTAB1        |  3761K|   678M|       | 24718   (4)|   
------------------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:43:38.667

> “问题是MYTAB2只有1000条记录！”

是的，但相关的数据点是 MYTAB1 中有多少记录与那一千条记录匹配？该数字代表整个表格的百分之几？MYTAB1 中这些记录的分布是什么？

如果您希望删除 MYTAB1 中 20% 的行，则索引只会使性能更差（如果优化器愚蠢到无法使用它）。如果您只删除 MYTAB1 中 0.1% 的记录，但这些记录分布在表中的每个块中，那么全表扫描再次是更有效的选择。

调优没有简单的解决方案。它总是取决于许多不同因素的相互作用。您希望多久执行一次此删除操作？您是否拥有企业版许可证和大量备用 CPU 容量？等等。

* * *

如果 MYID1 是 MYTAB1 的主键，那么该列上应该已经有一个 UNIQUE 索引。所以你不需要创建一个新的索引。

除非您是那些不会在您的表上应用完整性约束的地方之一。那是不好的做法。除了强制完整性的明显好处外，约束还为优化器提供了有用的信息，从而导致更好的执行计划。

无论如何，您现在发布的解释计划中很清楚您问题的根源。您说 MYTAB2 只有一千行，但优化器似乎认为它有四十三万七千行。因此，显然您需要在该表上收集新的统计数据：

```
 exec dbms_state.gather_table_stats(ownname=>user, tabname=>'MYTAB2',estimate_percent=>100) 
```

我想 MYTAB1 的统计数据是正确的，它确实有大约 370 万行？如果是这样，索引查找将是性能最高的选项。您需要检查该主键列上是否有唯一索引：

```
 select i.index_name, i.uniqueness
 from user_indexes i
     join user_ind_columns c
         on ( i.index_name =  c.index_name)
 where i.table_name = 'MYTAB1'
 and c.column_name = 'MYID1' 
```

如果您没有索引，则需要创建一个：

```
 create unique index mytab1_uidx on mytab1(myid1)
 / 
```

如果您有一个索引但它不是唯一的，那么您可能应该删除它并建立一个唯一索引。

请注意，如果您弄错了并且该列不是主键 - 即它有重复项 - 那么 CREATE INDEX 语句将失败。万一你有一个更大的问题，你需要思考。

* * *

> “但是 [MYTAB2] 包含的行数非常不稳定......基本上一些行被添加到表中，然后一些行被删除并且过程继续”

在这种情况下，拥有任何固定统计数据都是有帮助的。一个更好的主意是强制优化器在运行时动态生成统计信息。

```
exec dbms_state.delete_table_stats(ownname=>user, tabname=>'MYTAB2')
exec dbms_state.lock_table_stats(ownname=>user, tabname=>'MYTAB2') 
```

如果您启用了动态采样，则删除表的统计信息然后将其锁定将强制数据库在每次将表包含在查询中时为其生成统计信息。每当您运行该删除语句时，这应该会生成一个更好的执行计划，而不管 MYTAB2 在那一刻碰巧持有多少行。

[了解更多。](https://blogs.oracle.com/optimizer/entry/dynamic_sampling_and_its_impact_on_the_optimizer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T11:32:00.757

这是一个经典的问题。有时最好用要保存的行创建一个新表，然后将 new_table 重命名为 original_table。

总纲：

```
create table new_table as 
select * from original_table 
where myid1 not in (select myid2 from mytab2)
;

drop table original_table;

rename new_table to original_table; 
```

* * *

更多活动详情：

```
Bulk Delete using CTAS Method
a.  Create table new_table with nologging
CREATE TABLE new_table NOLOGGING (….);
b.  Insert  /*+ APPEND */ into new_table select the records you want to keep from current_table.
c.  Create the indexes on the new_table with NOLOGGING  (*)
d.  Create constraints, grants etc.
e.  Drop current_table.
f.  Rename new_table to current.
g.  Backup the data.
(*) If the data left is so small or there are a lot of dependencies on the table (views, procedures, functions, etc) the following steps can be used instead of c-g above:
c.  Disable constraints on current_table.
d.  Truncate current_table;
e.  Make indexes unusable 
f.  Alter current_table NOLOGGING 
g.  Insert  /*+ APPEND */ into current_table 
select * from new_table; 
h.  commit;
i.  enable constraints
j.  Alter current_Table and indexes to LOGGING
k.  Backup the data
l.  drop table new_table; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T15:10:50.907

优化器认为`MYTAB2`大约有 437,000 行，因此您尝试删除表中大约 11.6% 的行。如果`MYTAB2`实际上只有 1,000 行，则意味着统计信息`MYTAB2`已过时。如果您在表上收集统计信息

```
BEGIN
  DBMS_STATS.GATHER_TABLE_STATS( <<owner of the table>>,
                                 'MYTAB2' );
END; 
```

然后重新运行查询计划，计划是否改变？查询是否运行得更快？

下一个问题是为什么优化器认为`MYTAB2`有这么多行。这是一个未声明为全局临时表的临时表吗？过去的表格是否大得多，但后来您永久删除了 437,000 行中的 436,000 行？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T11:26:08.510

Oracle 10.2 中的索引创建文档在[这里](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_5010.htm#i2062403)。

你需要类似的东西：

```
create index index_name on table_name(column_name); 
```

# forms - 以编程方式登录 jsf 应用程序

> ID：10349659
> 
> 赞同：1
> 
> 时间：2012-04-27T11:19:57.907
> 
> 标签：forms, jsf, login

我找到了基于 jsf 的应用程序的编程登录示例，例如来自 Balusc [。](https://stackoverflow.com/a/6598326/1331274)也许这是个愚蠢的问题，但是，当我使用基于表单的身份验证时，我只能使用一个简单的 html 表单

```
<input id="username" type="text" name="j_username" />
<input id="password" type="password" name="j_password"/> 
```

`<form method="post" action="j_security_check">`形式上。

我不能使用示例中的 jsf 表单，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:33:31.137

因为处理登录的不是 JSF，而是容器本身。JSF`<h:form>`不允许您指定特定的操作 URL。所以你必须使用`<form>`.

但是您的问题标题令人困惑。使用`j_security_check`表单**不是**“程序登录”。它是“容器管理登录”。*真正的*程序化登录方式是调用`HttpServletRequest#login()` *自己*。您可以在由 JSF 调用的 JSF 托管 bean 操作方法中执行此操作`<h:form>`。

# java - 卡在将 Java Web 服务上传到服务器

> ID：10349661
> 
> 赞同：0
> 
> 时间：2012-04-27T11:20:07.117
> 
> 标签：java, android, web-services, xmlpullparser

我在 NetBeans 中创建了一个 WebService，并在 Android 中使用它。

在本地主机上它工作正常，但是在测试部署到服务器时它给出了一个异常：

`"org.xmlpull.v1.xmlpullparserexception:expected START_TAG"`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:28:50.247

那么异常似乎表明缺少开始标记 - 您是否将 Web 服务标记包裹在您的内容周围？

有时，在本地测试而不是远程测试时，权限可能会有所不同。它也可以根据您的测试方式而有所不同 - 例如，如果您在 Web 浏览器中进行测试，缺少的标签通常可以由浏览器自动修复，以便可以显示页面 - 这不是一些更严格的 XML 解析库的情况。

如果您可以发布一些代码，我们或许可以帮助您解决实际问题，而不是猜测问题所在。

# database - 访问数据库更新查询的visual basic 2010错误

> ID：10349665
> 
> 赞同：1
> 
> 时间：2012-04-27T11:20:18.513
> 
> 标签：database, visual-studio-2010, ms-access

我有这段代码应该更新我的访问数据库，但我一直收到一条错误消息：

> 由于表“MembrosCompasso”具有相关记录，因此无法更改或删除注册表。

这是我的代码：

```
Dim query1 As String = "UPDATE MembrosCompasso SET MembrosCompasso.BI=@compass_bi WHERE MembrosCompasso.BI=Membros.BI" ' Membros.Pai=@pai, Membros.Mae=mae WHERE BI=@BI"
Dim query As String = "UPDATE Membros  SET Membros.BI=@num_bi, Membros.Nome=@nome, Membros.Hablitacoes=@hablitacoes, Membros.Contribuinte=@contribuinte, Membros.Telemov=@telemov, Membros.DataNasc=@natnasc, Membros.LocalNasc=@localnasc, Membros.DataBaptismo=@databapt, Membros.LocalBapt=@localbapt, Membros.Sexo=@sexo, Membros.Naturalidade=@natu, Membros.Profissao=@prof, Membros.Estadocivil=@estadciv, Membros.DataCasamento=@datacas, Membros.LocalCasamento=@localcas, Membros.Notas=@notas, Membros.Email=@email WHERE Membros.BI=@BI" 

con.Close()
con.Open()
Dim command As New OleDbCommand(query, con)
Dim command1 As New OleDbCommand(query1, con)
' Indicação dos parâmetros que serão actualizados

command1.Parameters.Add("@compass_bi", OleDbType.VarChar).Value = BI.Text
command.Parameters.Add("@num_bi", OleDbType.VarChar).Value = BI.Text
command.Parameters.Add("@nome", OleDbType.VarChar).Value = Nome.Text
command.Parameters.Add("@hablitacoes", OleDbType.VarChar).Value = hablitacoes.Text
command.Parameters.Add("@contribuinte", OleDbType.VarChar).Value = ncront.Text
command.Parameters.Add("@telemov", OleDbType.VarChar).Value = telmov.Text
command.Parameters.Add("@natnasc", OleDbType.VarChar).Value = datnasc.Text
command.Parameters.Add("@localnasc", OleDbType.VarChar).Value = NascLocal.Text
command.Parameters.Add("@databapt", OleDbType.VarChar).Value = DataBapt.Text
command.Parameters.Add("@localbapt", OleDbType.VarChar).Value = LocalBapt.Text
command.Parameters.Add("@sexo", OleDbType.VarChar).Value = sexo.Text
command.Parameters.Add("@natu", OleDbType.VarChar).Value = natu.Text
command.Parameters.Add("@prof", OleDbType.VarChar).Value = profi.Text
command.Parameters.Add("@estadciv", OleDbType.VarChar).Value = estciv.Text
command.Parameters.Add("@datacas", OleDbType.VarChar).Value = datcas.Text
command.Parameters.Add("@localcas", OleDbType.VarChar).Value = localcas.Text
command.Parameters.Add("@notas", OleDbType.VarChar).Value = notas.Text
command.Parameters.Add("@email", OleDbType.VarChar).Value = email.Text
command.Parameters.Add("@BI", OleDbType.VarChar).Value = numero_BI 
```

[这里](http://img443.imageshack.us/img443/1697/30034667c.png)有我的访问数据库架构的屏幕截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:53:59.590

看起来您正在尝试在表中`MembrosCompasso`进行更改之前更新表`Membros`。
因为您设置`MembrosCompasso.BI`为与 相关`Membros.BI`，所以它必须首先存在于该表中。

如果您在 Access 中将您的关系设置为自动更新，则您不必对 执行任何手动更新`MembrosCompasso`，它们将在您更新源字段时自动更新。

例如，假设我有一张`PO`有很多`POItem`.
我可以将它们之间的一对多关系设置如下：

![在此处输入图像描述](../Images/c66271ac1efafaacca06a90015201525.png)

在这种情况下，如果我更新`PO.ID`，所有`POItem.POID`字段都将被更新。
同样，如果我删除给定`PO`记录，所有相关`POItem`记录也将被删除。

查看[有关表关系的 MS Access 文档](http://office.microsoft.com/client/helppreview14.aspx?AssetId=HA010341733&lcid=1033&NS=MSACCESS&Version=14&tl=2&queryid=&respos=1&HelpID=178799)。

# iphone - 尝试在雪豹上使用 dnsmasq 进行 iphone 开发

> ID：10349667
> 
> 赞同：2
> 
> 时间：2012-04-27T11:20:19.070
> 
> 标签：iphone, macos, osx-snow-leopard, dnsmasq

我正在运行 snow-leopard 的 iMac 上进行一些移动开发，我希望能够在我的 LAN 上的移动设备上访问 iMac 上配置的虚拟主机。所以我通过 Macports 安装了 Dnsmasq。我想我已经正确设置了它并且我相信它正在运行，但是如果我尝试从我的 iPhone 访问其中一个虚拟主机，我只会收到“找不到服务器”错误。

因此，我的 iMac 的 IP 为 192.168.0.111，这是 Apache 所在的位置，并且主机`example.dev`正确解析到 iMac 上的开发网站。如果我在 iMac 上运行 iOS 模拟器，这也可以。`example.dev`iMac 通过以太网连接到 LAN，iphone 通过 Wifi，尽管我将 iMac 放入 iPhone 的 WiFi 的 DNS 设置，但它看不到。

dnsmasq 似乎正在运行：

```
ps aux | grep dnsmasq
dm        913   0.0  0.0  2435120    556 s000  R+   12:17pm   0:00.00 grep dnsmasq   
nobody     895   0.0  0.0  2435060    600   ??  Ss   12:09pm   0:00.01 /opt/local/sbin/dnsmasq -k 
```

我的 /opt/local/etc/dnsmasq.conf 如下：

```
#interface=en0
resolv-file=/etc/resolv.dnsmasq.conf
address=/.dev/127.0.0.1 
```

我已经尝试过使用和不使用`interface`线路都没有效果，我已经重新启动了 dnsmasq 使用`sudo port unload dnsmasq`然后`sudo port load dnsmasq`没有区别。

我尝试从 iMac ping 任意主机，有些是错误的，有些是正确的（例如 pwoefojpo.dev / foo.dev / example.dev ），我希望所有这些都能 ping 127.0.0.1 但只有有效的主机（如`/etc/hosts`) 实际上允许我 ping 127.0.0.1。

LAN 是一个简单的 Virgin Media Superhub，其中包含许多通过 Wifi 和 Cat5 的设备。

如果有人能提供任何启示，我将不胜感激。

# jsf - 如何在 Primefaces 3.2 中使用 SelectOneMenu 从数据库中提取数据

> ID：10349673
> 
> 赞同：0
> 
> 时间：2012-04-27T11:20:28.337
> 
> 标签：jsf, jsf-2, primefaces, selectonemenu

我是 primefaces 3.2 的新手。我需要从 SelectOneMenu 中的数据库中获取部门的所有名称，但我没有！

```
<h:outputText value="Département : " />  
<h:selectOneMenu value="#{departementBean.departement}" converter="#{departementConverter}">
    <f:selectItem itemLabel="Select One" itemValue="" noSelectionOption="true"/>
    <f:selectItems var="dep" value="#{departementBean.list}" itemLabel="libelleDepartement" itemValue="#{departementBean.departement}" />
</h:selectOneMenu> 
```

这是来自这个 Tuto 的 DepartementConverter[如何从数据库中填充 h:selectOneMenu 的选项？](https://stackoverflow.com/questions/6848970/how-to-prepopulate-a-hselectonemenu-from-a-db)

```
@ManagedBean(name = "departementConverter")
@RequestScoped
public class DepartementConverter implements Converter {

    @ManagedProperty(value = "#{departementService}")
    private DepartementService departementService;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {

        Long id = Long.valueOf(value);

        try {
            return departementService.find(String.valueOf(id));
        } catch (Exception e) {
            throw new ConverterException(new FacesMessage(String.format("Cannot convert %s to Departement", value)), e);
        }
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        Departement departement = (Departement) value;
        return String.valueOf(departement.getIdDepartement());
    }

    public DepartementService getDepartementService() {
        return departementService;
    }

    public void setDepartementService(DepartementService departementService) {
        this.departementService = departementService;
    }
} 
```

DAOImpl的**查找**方法如下：

```
public Object find(String id) {
    return this.getHibernateTemplate().find(id);
} 
```

但是当我运行项目时，我有这个错误：

```
 INFO: Exception when handling error trying to reset the response.
java.lang.ClassCastException: java.lang.String
    at com.majustic.majemploi.converter.DepartementConverter.getAsString(DepartementConverter.java:43)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getFormattedValue(HtmlBasicRenderer.java:519)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.renderOption(MenuRenderer.java:534)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.renderOptions(MenuRenderer.java:792)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.renderSelect(MenuRenderer.java:844)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.encodeEnd(MenuRenderer.java:298)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:57)
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:45)
    at org.primefaces.component.panel.PanelRenderer.encodeContent(PanelRenderer.java:185)
    at org.primefaces.component.panel.PanelRenderer.encodeMarkup(PanelRenderer.java:108)
    at org.primefaces.component.panel.PanelRenderer.encodeEnd(PanelRenderer.java:55)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at org.primefaces.component.accordionpanel.AccordionPanelRenderer.encodeTab(AccordionPanelRenderer.java:218)
    at org.primefaces.component.accordionpanel.AccordionPanelRenderer.encodeTabs(AccordionPanelRenderer.java:147)
    at org.primefaces.component.accordionpanel.AccordionPanelRenderer.encodeMarkup(AccordionPanelRenderer.java:91)
    at org.primefaces.component.accordionpanel.AccordionPanelRenderer.encodeEnd(AccordionPanelRenderer.java:71)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:128)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:55)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:36)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:178)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:189)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:106)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:170)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:238)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:168)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:170)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:473)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:120)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:909)
    at java.lang.Thread.run(Thread.java:662) 
```

错误在这个 ligne ：

> 部门部门=（部门）值；

拜托，我无法解决这个错误。请任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:34:36.497

我认为问题在于 noSelectionOption。

您应该从此选项中删除您的 itemValue 属性：

```
<f:selectItem itemLabel="Select one" 
        noSelectionOption="true"/> 
```

或者`itemValue=""`在您的转换器中处理外壳。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T11:45:27.500

这是您可以使用的通用 GetAsString，如果您的所有实体都使用 getId() 方法实现接口（坦率地说，如果您的所有实体都有一个 Id 作为主键，这是一个好主意）

```
@Override
public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
    if (object == null) {
        return null;
    }
    if (object instanceof AbstractEntity) {
        AbstractEntity e = (AbstractEntity) object;
        return "" + e.getId();
    }
    else
        throw new IllegalArgumentException("object " + object + " is of type " + object.getClass().getName() + "; expected AbstractEntity";
} 
```

# android - 查看从列表视图中选择的项目到下一个选项卡android

> ID：10349675
> 
> 赞同：0
> 
> 时间：2012-04-27T11:20:34.413
> 
> 标签：android, listview, tabs, selecteditem

我正在开发销售应用程序。我有一个包含 10-15 个项目的列表视图，这些项目是通过检查按钮选择的。我希望所选项目应显示在下一个选项卡上。有什么建议/帮助吗？我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:23:45.180

只需将所选项目保存到某个全局存储并使用`mTaHost.setCurrentTab(your_next_tab);`，然后在该选项卡中获取您存储的所选项目并显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:27:03.240

您可以在下一个选项卡的类中有一个静态公共字段，该字段在到达该选项卡时加载该特定项目/项目，并在使用后清除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:31:55.613

你考虑过使用`Loaders`吗？我自己从不使用这个类，但它似乎是你正在寻找的。这是[链接](http://developer.android.com/guide/topics/fundamentals/loaders.html)

> 在 Android 3.0 中引入的加载器可以轻松地异步加载 Activity 或 Fragment 中的数据。装载机具有以下特点：
> 
> *   它们适用于每个 Activity 和 Fragment。
> *   它们提供数据的异步加载。
> *   他们监控数据的来源，并在内容发生变化时提供新的结果。
> *   在配置更改后重新创建时，它们会自动重新连接到最后一个加载器的光标。因此，他们不需要重新查询他们的数据。

您还可以在选择项目时写入文件，并在显示选定项目选项卡时读取文件。

# c# - 我应该在我的表示层中使用实体框架实体吗？

> ID：10349676
> 
> 赞同：3
> 
> 时间：2012-04-27T11:20:36.803
> 
> 标签：c#, entity-framework, design-patterns

我想创建一个多层（3 层）应用程序。EF 是首选的 ORM。

我应该使用 EF 直接在我的表示层中创建的实体，还是应该创建新的自定义实体并映射实体？如果是这样，我应该在自定义实体之上创建接口吗？

我应该将 EF 生成的 .edmx 文件放在数据层中吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:22:05.430

我个人会为我的表示层创建 ViewModel。您希望尽可能地抽象出您的 EF 模型。

您的 ViewModel 不需要任何接口，它们只是简单的[POCO](http://en.wikipedia.org/wiki/Plain_Old_CLR_Object) / [DTO](http://en.wikipedia.org/wiki/Data_transfer_object)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T12:04:00.647

数据库的需求和数据消费者的需求经常不一致，因此通常需要不同的模型。

例如，考虑添加新客户的用户故事。故事通常包括对办公室电话号码和传真号码的“需求”。

马上，数据库设计人员会以“重复数据”的方式，我需要一个一对多的关系，这样我们不仅可以容纳两个电话号码，而且可以容纳几乎无限数量的电话，按类型。（让我们甚至不要陷入电话号码是多对多或一对多的痛苦）

同时回到报告，屏幕，移动设备，你有什么 UI 体验——那个设计师说“我不在乎你能存储多少电话号码，我只处理两个：办公室号码和传真号码”您可以说用户的核心是非规范化的 :)

1.  使您的数据库模型保持某种合理的规范化水平。
2.  让你的用户界面的数据模型和你的用户一样去规范化
3.  在中间开发一层，将一个模型映射到另一个模型。

# java - 从 IntelliJ 将 maven war 文件部署到 tomcat

> ID：10349678
> 
> 赞同：4
> 
> 时间：2012-04-27T11:20:43.383
> 
> 标签：java, maven-2, intellij-idea

我有一个 Maven 战争项目。如何在 IntelliJ IDEA 中执行以下操作：

*   创建 .war 文件
*   将其部署到本地 Tomcat
*   以调试模式启动 Tomcat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:43:03.093

你需要配置`maven-war-plugin`来构建你的战争。 `tomcat<x>-maven-plugin`将允许您将其部署到 tomcat 实例，实际上也可以进行战争生成 - 我在当前办公室使用 JBoss，因此对 maven tomcat 集成没有任何经验。

有关这两个插件的更多详细信息，请参阅[http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/](http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/)和[http://maven.apache.org/plugins/maven-war-plugin/ 。](http://maven.apache.org/plugins/maven-war-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:37:37.840

您也可以使用 cargo[插件](http://tshikatshikaaa.blogspot.nl/2012/07/how-to-deploy-war-to-tomcat-7-during.html)。它对我来说效果很好。

# android - 无法禁用特定 Android 设备上的主页按钮

> ID：10349685
> 
> 赞同：4
> 
> 时间：2012-04-27T11:21:38.360
> 
> 标签：android, android-homebutton

我知道这个问题已经被问过很多次，答案总是“不，我们不能禁用主页按钮”。

我有一点不同的问题要问。

我编写了简单的代码，其中我的活动覆盖 onKeyDown() 并为所有按键返回 true。

从理论上讲，这意味着打开应用程序的任何人都被卡在那里并且无法选择退出应用程序。

当我在不同的设备上测试这个应用程序时，我做了以下观察：

1.  在操作系统为 2.2.2 的摩托罗拉设备上，主页按钮被禁用。
2.  在操作系统为 2.3.5 的 HTC 设备上，主页按钮被禁用。
3.  在 OS 为 2.3.7 的 Sony 上，主页按钮被禁用。
4.  在 OS 为 2.2.1 和 2.3.3 的三星上，主页按钮被禁用。
5.  在 OS 为 2.3.6 和 4.0.4 的三星上，主页按钮保持启用状态。

这些观察似乎非常矛盾。

有谁知道，为什么不同的设备表现不同以及处理这种情况的最佳方法是什么。

据我了解，到目前为止，还没有供应商定制过 Android 操作系统。每个人都在上面放置 UI 层，但没有人触及内部。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T11:57:56.117

> 我知道这个问题已经被问过很多次，答案总是“不，我们不能禁用主页按钮”。

如果要处理 HOME 按钮，请实现主屏幕。

> 有谁知道为什么不同的设备表现不同

因为它们是不同的设备，并且供应商进行了更改。此外，在 4.0.4 的情况下，可能已经添加了额外的保护，以帮助防止恶意软件作者劫持 HOME 按钮而不是主屏幕。

> 处理这种情况的最佳方法是什么

如果要处理 HOME 按钮，请实现主屏幕。

> 每个人都在上面放置 UI 层，但没有人触及内部。

这是不正确的。几乎*每个*设备供应商都在不同程度上“触及了内部”。只要它们满足Play 商店[的兼容性要求](http://source.android.com/compatibility/index.html)，Google 就会认为它们的更改是可以接受的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-04T22:19:33.173

您可能想尝试一下：

```
@Override
public void onBackPressed() {

}

@Override
protected void onUserLeaveHint() {
    super.onUserLeaveHint();
    ((ActivityManager) getApplicationContext().getSystemService(Context.ACTIVITY_SERVICE)).moveTaskToFront(getTaskId(), 0);
}

@Override
protected void onPause() {
    super.onPause();
    ((ActivityManager) getApplicationContext().getSystemService(Context.ACTIVITY_SERVICE)).moveTaskToFront(getTaskId(), 0);

} 
```

需要的权限——将以下内容添加到清单中

```
<uses-permission android:name="android.permission.REORDER_TASKS" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:18:54.040

正如我在问题本身中提到的，对于 2.3.6 操作系统覆盖`keypress()`功能以下的设备运行良好。

问题从 2.3.6 开始。我不知道这些设备供应商做了什么，但`keypress()`功能在所有设备上的功能并不相同。

同样从 ICS 开始，谷歌已经完全停止使用`keypress()`功能。

那么我们该怎么做呢。

我看到它的方式，如果我们试图覆盖主页按钮，那么它是不可能的，但我们绝对可以听它。

在我们的 android 清单中，我们使用`<category android:name="android.intent.category.HOME" />`过滤器，这使得我们的活动成为家庭替换屏幕。现在，当您按下主页按钮时，内容解析器弹出窗口将始终出现并询问哪个应用程序，即默认启动器或您的应用程序应该响应主页按钮单击。您总是可以在那里选择您的应用程序。

但这不会覆盖或禁用主页按钮。每当您按下主页按钮时，相同的事情将一次又一次地重复，直到您将应用程序设为默认，通过单击内容解析器弹出窗口中给出的用作默认复选框。

现在，一旦您选择您的应用程序作为默认主页，新闻将始终启动您的应用程序。

完成……不。出现的问题是，如果您移出应用程序，主页按钮仍会启动您的应用程序。工作完成后如何摆脱它。

我们要做的是在关闭或调用我们的活动的完成（）时，在此之前我们应该使用以下方法将包设置设置为默认值：

`paramPackageManager1.setComponentEnabledSetting(localComponentName2, PackageManager.COMPONENT_ENABLED_STATE_DEFAULT, 1);`

这会将主页按钮与您的活动取消关联。

# json - 在 Spring MVC 3.1 中的模型绑定期间验证 Json

> ID：10349689
> 
> 赞同：1
> 
> 时间：2012-04-27T11:21:51.100
> 
> 标签：json, spring-mvc, bean-validation

我正在尝试使用@RequestBody 将json 绑定到模型。

我们正在使用 JSR303 验证我们的模型。

这是方法签名

```
@RequestMapping(value = "/editCampaign.do", method = { RequestMethod.POST })
    public ModelAndView editCampaign(@RequestBody @Valid Campaign campaign, 
            HttpServletRequest request) 
```

如果缺少一条必需的信息，则会抛出 MethodArgumentNotValidException （正如我在文档中阅读的那样）。我真的希望能够将此信息返回到视图，以便向用户显示他们没有填写必填字段。一旦抛出异常，似乎为时已晚。显然，我没有要检查的绑定结果。

我是否错误地使用了框架？如何正确设置此方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:35:49.353

首先，我建议您返回 String 而不是 ModelAndView，尤其是在 Spring 3.1 中。

如果您想从`@ResponseBody`带注释的方法中捕获异常，我建议您使用以下内容：

`@ExceptionHandler`1）用注释捕捉异常：

```
 @ExceptionHandler(MethodArgumentNotValidException.class)
      public String handleMyException(MethodArgumentNotValidException  exception) {
         return "redirect:errorMessage?error="+exception.getMessage());

              } 
```

然后重定向以查看带有`@ResponseBody`参数注释的视图

```
 @RequestMapping(value="/errorMessage", method=RequestMethod.GET)
  @Responsebody
  public String handleMyExceptionOnRedirect(@RequestParamter("error") String error) {
     return error;
          } 
```

# wpf - 如何在数据网格中动态添加行

> ID：10349691
> 
> 赞同：0
> 
> 时间：2012-04-27T11:22:08.117
> 
> 标签：wpf, wpfdatagrid, wpftoolkit

我正在使用这种形式的 WPF 应用程序有一个 gridview 和一个按钮

我正在使用 ObservableCollection 有这样的通用代码和一个类代码

```
public partial class MainWindow : Window
{
        public ObservableCollection<gm> data1 = new ObservableCollection<gm>();
        public MainWindow()
        {
            InitializeComponent();
        }
      //  public ObservableCollection<gm> data { get { return data1; } }

        private void button1_Click_1(object sender, RoutedEventArgs e)
        {

           data1.Add(new gm() { no = 2, name = "vipul" });
           dataGrid1.ItemsSource = data1.ToArray();
        }
    }
    public class gm
    {
        public int no { get; set; }
        public string name { get; set; }
    }
} 
```

当我执行上面的代码时，它会在 datagrid 中添加空白行，请给我这个问题的解决方案我想知道如何在 datagrid 运行时添加行。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:31:07.180

XAML 是这样的：

```
<DataGrid ItemsSource="{Binding}" /> 
```

后面的代码是这样的：

```
public MainWindow()
{
    InitializeComponent();
    DataContext = data1;
} 
```

并删除这一行：

```
dataGrid1.ItemsSource = data1.ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:32:29.230

```
 data1.Add(new gm { no = 2, name = "vipul" }); // Remore ellipsis around gm. 
```

在 XAML 中只需检查以下内容

1.  你有你的数据网格的数据源`{Binding Path="data1"}`
2.  没有绑定到的DataColumn`{Binding Path="no"}`
3.  名称的 DataColumn 具有到的绑定路径`{Binding Path="name"}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:26:39.543

将 autogeneratecolumns 设置为 true 并将 data1 设置为 itemssource

xml

```
 <DataGrid x:Name="dataGrid1" AutoGenerateColumns="True" /> 
```

编辑：要获得 WPF 的强大功能，请查看 DataBinding/MVVM

# windows-7 - 在运行批处理脚本期间/之后，基本命令（例如超时和 ping）不可用

> ID：10349692
> 
> 赞同：1
> 
> 时间：2012-04-27T11:22:12.063
> 
> 标签：windows-7, batch-file, cmd

我正在创建一个 bactch 文件，该文件又需要在第二个窗口中创建和执行另一个 bactch 文件。我正在使用“开始”命令，但在新窗口中，超时和 ping 等基本命令因无法识别而失败。请注意，如果我从命令行运行 start 而不是在批处理文件中运行，则没有任何问题，这只发生在批处理文件中使用 start 时。请问有什么想法吗？:)

Btw o/s 是 windows 7 Pro SP1 64 位。

-- 原始窗口 --

```
C:\mydir>start tmp.bat 
```

- 新窗户 -

```
C:\mydir>c:

C:\mydir>cd \mydir

C:\mydir>echo Please wait for 60 seconds...
Please wait for 60 seconds...

C:\mydir>timeout 60
'timeout' is not recognized as an internal or external command,
operable program or batch file.

C:\mydir>ping 127.0.0.1
'ping' is not recognized as an internal or external command,
operable program or batch file. 
```

-- 完整的批处理文件 --

```
set drive=c:
set path=\mydir
set tmpbatch=tmp.cmd

%drive%
cd %path%
echo %drive% > %tmpbatch%
echo cd %path% >> %tmpbatch%
echo echo Please wait for 60 seconds... >> %tmpbatch%
echo timeout 60 >> %tmpbatch%
echo copy config\topology.default.txt config\topology.txt >> %tmpbatch%
echo copy config\fasrc.default config\fasrc >> %tmpbatch%
echo echo demolive2^|localhost^|3^|demo^|Live Query Instance 2 for demo setup ^>^> config\topology.txt >> %tmpbatch%
echo bin\setup-cluster >> %tmpbatch%
echo findstr ERROR data\log\agent.log data\instances\deployment\log\kitchen.log >> %tmpbatch%
echo bin\capture-import demo demo\config\demo-config-capture.zip >> %tmpbatch%
echo bin\run-etl-job run.kjb "-DINSTANCE=demo" "-DTRIGGER=load-data" >> %tmpbatch%
echo bin\reindex demo >> %tmpbatch%
echo start "~\iexplore.exe" "http://localhost:8180/preview" >> %tmpbatch%
echo echo Please publish the configuration to the servers using File ^^^> File in the Business Manager >> %tmpbatch%
echo echo Press a key to continue once you have done that... >> %tmpbatch%
echo pause >> %tmpbatch%
echo bin\reindex demo >> %tmpbatch%
echo bin\fresh-index-to-live demo >> %tmpbatch%
echo echo All done!  Check back for errors... >> %tmpbatch%
echo pause >> %tmpbatch%
echo del %tmpbatch% >> %tmpbatch%
start %tmpbatch%
bin\deployment-agent 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:46:39.177

这是因为在您的完整批处理文件中，您正在重置`PATH`作为系统环境变量的变量。我建议将名称更改为`MYPATH`.

# php - 想要PHP中的当前月份所有日期

> ID：10349700
> 
> 赞同：-1
> 
> 时间：2012-04-27T11:22:45.177
> 
> 标签：php, mysql

我有一个像这样的日期数组

```
$dateArray =   array('2012-04-11','2012-04-29','2012-04-26','2012-04-23','2012-03-21','2012-07-23','2012-12-19','2012-04-27','2012-05-12','2012-05-27','2012-05-28'); 
```

我使用代码过滤这个数组是

但它不工作

```
$start_date= date('Y-m-d',strtotime('first day of this month')) ;
$end_date =date('Y-m-d',strtotime('first day of next month')) ;

$month = array();

foreach ($dateArray as $dates)
{
 $dateTimes = strtotime($dates);

 if (($start_date >= $dateTimes) && ($end_date <= $dateTimes))
 {
   $month[]= $dates;
 } 
}
var_dump($month); 
```

但它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:28:00.863

您需要比较 unix 时间戳才能正确进行比较：

```
$dateArray  = array('2012-04-11','2012-04-29','2012-04-26','2012-04-23','2012-03-21','2012-07-23','2012-12-19','2012-04-27','2012-05-12','2012-05-27','2012-05-28');
$start_date = strtotime('first day of this month') ;
$end_date   = strtotime('first day of next month') ;

$month = array();

foreach ($dateArray as $dates)
{
    $dateTimes = strtotime($dates);

    if (($start_date >= $dateTimes) && ($end_date <= $dateTimes))
    {
        $month[]= $dates;
    } 
}
var_dump($month); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:37:07.417

嗨，如果您只想显示具有当前月份的数组中的日期，那么

```
 foreach($dateArray AS $dateArr){

        if(date('M') == date('M' , strtotime($dateArr))){
            echo $mnthDate[] = $dateArr;echo "<br/>";
        }
    } 
```

否则，如果还想检查年份和月份是否与当前年份和月份相同。

```
 foreach($dateArray AS $dateArr){
        if((date('M') == date('M' , strtotime($dateArr))) && (date('Y') == date('Y' , strtotime($dateArr)))){
            $yrDate[] = $dateArr;echo "<br/>";
        }
    } 
```

# perl - Perl - BEGIN 非 BEGIN 块的差异

> ID：10349702
> 
> 赞同：3
> 
> 时间：2012-04-27T11:22:47.927
> 
> 标签：perl

我对 perl 中的 const 声明有疑问，但无法弄清楚其中的区别，请指出有什么区别。

下面是代码：

```
BEGIN {
  *SIZE = sub() { 2 };
}  
*ITEM = sub() { 10 };

print 'size=', SIZE, "\n";
print 'item=', &ITEM, "\n"; 
```

现在的问题是，为什么

```
 print 'item=', &ITEM, "\n"; 
```

行必须在 ITEM 前面有一个 '&'，但是

```
 print 'size=', SIZE, "\n"; 
```

行不需要在 SIZE 前面有一个 '&'。

而且我知道 BEGIN 块是在编译时运行的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T11:29:20.060

因为 BEGIN 块是在编译时运行的，所以编译器知道对 的赋值`*SIZE`，而对 的赋值`*ITEM`还没有发生。

因为编译器不知道`*ITEM`，所以调用`ITEM`是不明确的，因此您必须在它前面加上一个`&`. 否则，编译器认为它可能是一个“裸词”——一个未加引号的字符串。

如果你[`use strict`](http://perldoc.perl.org/strict.html#strict-subs)，编译将假定裸词是函数。

[`use constant`](http://perldoc.perl.org/constant.html)也可能是声明常量的更好方法，而不是手动进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:36:06.357

编码

```
BEGIN {
  *SIZE = sub() { 2 };
}  
*ITEM = sub() { 10 };

print 'size=', SIZE, "\n";
print 'item=', ITEM, "\n"; 
```

如果没有错误，将按如下方式处理：

*   编译文件。
    *   编译`BEGIN`块。
        *   `*SIZE = sub() { 2 };`
    *   执行`BEGIN`块。
        *   `*SIZE = sub() { 2 };`
    *   编译`*ITEM = sub() { 10 };`
    *   编译`print 'size=', SIZE, "\n";`
    *   **编译`print 'item=', ITEM, "\n";`**
*   执行文件。
    *   **执行`*ITEM = sub() { 10 };`**
    *   执行`print 'size=', SIZE, "\n";`
    *   执行`print 'item=', ITEM, "\n";`

注意`print 'item=', ITEM, "\n";`sub 存在之前是如何编译的。如果`ITEM`作为潜艇存在，那将是允许的。但`ITEM`不作为子存在。在没有任何其他含义的情况下，标识符是裸词，并且裸词被编译成具有相同值的字符串。

```
>perl -E"my $x = ITEM; say $x;"
ITEM

>perl -E"my $x = 'ITEM'; say $x;"
ITEM 
```

也就是说，除非您特别要求 Perl 不这样做：

```
>perl -E"use strict; my $x = ITEM; say $x;"
Bareword "ITEM" not allowed while "strict subs" in use at -e line 1.
Execution of -e aborted due to compilation errors. 
```

这意味着您需要`ITEM`看起来像一个子调用。

```
print 'item=', ITEM(), "\n"; 
```

`&ITEM`也可以，因为`&`是告诉 Perl 忽略原型的指令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:30:01.083

& 前缀明确表示“这是下一个用户定义的子例程调用”。当您在函数名称后使用括号并且函数名称与内置函数不冲突时，或者如果您在使用函数之前已声明/定义函数并且名称与内置函数不冲突，则可以省略它内置。

[继续阅读这里](http://www.perlmonks.org/?node_id=428024)

并检查@Sean McMillan 的回复。

# java - Android 项目转换为 isLibrary

> ID：10349706
> 
> 赞同：0
> 
> 时间：2012-04-27T11:23:14.927
> 
> 标签：java, android

您好，我想将[ebookdroid](http://code.google.com/p/ebookdroid/)转换为图书馆。当我将它标记为库时，我可以在我的项目中使用它的类。但是在 ebookdroid 中，当加载应用程序时，会调用扩展 Aplication 的 Ebookdroid 类。此类初始化应用程序设置。那么如果 ebookdroid 是 Library ，是否可以从我的项目中调用这个 init 类？

当我尝试这样做时：

```
EBookDroidApp app = (EBookDroidApp)getApplication();
app.init(); 
```

我得到：

```
java.lang.ClassCastException: android.app.Application 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:36:19.460

您需要在 AndroidManifest.xml 中指定 Application 类。这样，当应用程序启动时，Android 就会知道使用什么类。默认情况下，Android 将始终使用`Application`，不能强制转换为`EBookDroidApp`.

[有关示例，请参见此答案。](https://stackoverflow.com/a/3338739/210526)

# php - preg_match 显示一个额外的空匹配

> ID：10349708
> 
> 赞同：0
> 
> 时间：2012-04-27T11:23:20.730
> 
> 标签：php, preg-match, preg-match-all

我想从 html 标记中提取作者姓名。标签如下所示：

```
<a href="http://somewhere.com">    Manfred    </a> 
```

但如果名称太长，它看起来像这样：

```
<a title="floormanager004" href="http://somewhere.com">    floormanage...    </a> 
```

我有以下正则表达式来涵盖这两种情况：

```
~<a.*(title="(.{2,50})".*|>(.*))</a>~Usi 
```

这在第二种情况下工作正常，返回一个二维数组，如下所示：

```
array(2) {
  [0]=>
  string "title="floormanager004" href="http://somewhere.com">    floormanage...    "
  [1]=>
  string "floormanager004"
} 
```

但对于第一种情况，数组包含一个额外的空字段：

```
array(2) {
  [0]=>
  string ">    Manfred    "
  [1]=>
  string ""
  [2]=>
  string "    Manfred    "
} 
```

为什么会出现这个字段以及如何摆脱它？

*免责声明：* 我知道当使用正则表达式来解析 html 时，你会有一段 baaaaad 时间，你永远不应该这样做，但在我的情况下，它被证明比 XPATH 等更快。请不要对此发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:45:49.487

每次在整个正则表达式上成功匹配时，每组括号都将在返回的数组中具有一个关联的值，即使括号中的位匹配什么都没有。当某些捕获可能为空时，您的代码需要检测并处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:45:30.353

好的 ol' Manfred 缺少 title 属性。

这适用于这些情况：

```
~<a.*>(.*)</a>~Usi 
```

* * *

我对此不太了解：请参阅 Stackoverflow 上投票第二多的问题。我建议你阅读全文：

[RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

# c# - 集合正则表达式过滤问题

> ID：10349709
> 
> 赞同：2
> 
> 时间：2012-04-27T11:23:28.710
> 
> 标签：c#, .net, regex

我有这样的表达；

```
collection = collection.Where(x => Regex.IsMatch(x, "[a-zA-Z0-9+#-\\.\\s]+", RegexOptions.IgnoreCase)).ToList(); 
```

在过滤之前，集合有这样的元素：

```
a+1, a#1, a-1, a.1, a 1, ab, a'1, a@1, a*1, a&1, a:1, a!1 
```

之后，我只想保留以下元素：

```
a+1, a#1, a-1, a.1, a 1, ab 
```

但没有元素被丢弃。

我只需要保留包含以下内容的元素：字母、数字、加号、哈希、减号、点、空格。

如何纠正这个正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:26:00.690

您的正则表达式检查元素是否*包含*与文本匹配的子字符串。由于您的所有元素都包含`a`（与正则表达式匹配），因此所有元素都被保留。

如果您希望子字符串*完全匹配*，请将您的正则表达式包含在`^...$`（标记文本的开头和结尾）中：

```
... Regex.IsMatch(x, "^[a-zA-Z0-9+#-\\.\\s]+$", ... 
```

**编辑**：此外，您需要将破折号移动`-`到组的末尾：

```
... Regex.IsMatch(x, "^[a-zA-Z0-9+#\\.\\s-]+$", ... 
```

否则，`#-\\.`匹配从`#`到 的所有字符`.`。

# jasperserver - Jasperserver 条件语句

> ID：10349712
> 
> 赞同：0
> 
> 时间：2012-04-27T11:23:32.060
> 
> 标签：jasperserver

我想更改 jasperserver 中的一些 jsp 页面，我只需要知道：

登录的用户，有没有 ROLE_ADMINISTRATOR ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:04:23.307

**`authz:authorize`**您可以在 jsp 文件中使用标签。

这个例子：

```
<authz:authorize ifAllGranted="ROLE_ADMINISTRATOR"> 
```

或者您可以在配置文件 (xml) 中使用条件，如下例所示：

```
<condition test="checkAuthenticationRoles" testArgs="ROLE_ADMINISTRATOR"> 
```

来自*decoratorCommonComponents.jsp*文件的片段：

```
<authz:authorize ifAnyGranted="ROLE_ADMINISTRATOR">
    <li id="main_logOut" class="last"><a id="main_logOut_link" href="#" onclick="javascript:return false;"><spring:message code="menu.logout"/></a></li>
</authz:authorize> 
```

# eclipse-rcp - Eclipse RCP 插件 GUI 刷新问题

> ID：10349716
> 
> 赞同：0
> 
> 时间：2012-04-27T11:23:50.817
> 
> 标签：eclipse-rcp

我正在尝试将 AWT 中的代码改编为 Eclipse SWT 插件。我面临刷新问题。我有一个带有表（AWT）的视图和另一个带有图表（AWT）的视图。单独他们很好，但是当我添加两者时，我只在图表视图上面临刷新问题，有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:09:34.600

这是我在 SWT 视图中嵌入 JPanel 所必须做的。

```
 Composite videoComposite = new Composite(panel, 
                SWT.EMBEDDED | SWT.BORDER | SWT.NO_BACKGROUND);
        videoComposite.setLayout(new FillLayout());
        videoComposite.setLayoutData(new GridData(
                SWT.CENTER, SWT.CENTER, true, true, 1, 1));

        CLabel videoImage = new CLabel(videoComposite, SWT.SHADOW_IN);
        videoImage.setImage(dummyVideo);

        frame = SWT_AWT.new_Frame(videoComposite);

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                setLookAndFeel();
                applet = new JApplet();
                applet.setFocusCycleRoot(false);
                mediaPanel = rabidVideo.getVideoPanel(false);
                applet.add(mediaPanel);
                frame.add(applet);
            }
        }); 
```

其中`frame`是 a `Frame`，`applet`是 a `JApplet`，并且`mediaPanel`是 的延伸`JPanel`。

这是`setLookAndFeel`：

```
protected void setLookAndFeel() {
    try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (ClassNotFoundException e) {
        EclipseLogging.logError(RabidPlugin.getDefault(),
                    RabidPlugin.PLUGIN_ID, e);
    } catch (InstantiationException e) {
        EclipseLogging.logError(RabidPlugin.getDefault(),
                    RabidPlugin.PLUGIN_ID, e);
    } catch (IllegalAccessException e) {
        EclipseLogging.logError(RabidPlugin.getDefault(),
                    RabidPlugin.PLUGIN_ID, e);
    } catch (UnsupportedLookAndFeelException e) {
        EclipseLogging.logError(RabidPlugin.getDefault(),
                    RabidPlugin.PLUGIN_ID, e);
    }
} 
```

# algorithm - 编写算术表达式解析器所需的技术

> ID：10349719
> 
> 赞同：10
> 
> 时间：2012-04-27T11:24:00.247
> 
> 标签：algorithm, parsing, compilation

对于某些人来说，如何只了解树数据结构？在没有编译技术帮助的情况下编写算术表达式解析器对他来说是显而易见的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:49:01.310

如果没有编译技术的知识，那将是丑陋的。但是对于这样的介绍性示例，无需学习大量编译。

查看类似[http://www.codeproject.com/Articles/345888/How-to-write-a-simple-interpreter-in-JavaScript](http://www.codeproject.com/Articles/345888/How-to-write-a-simple-interpreter-in-JavaScript)的内容，看看它是否对您有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:03:48.833

请参阅我[关于如何编写自上而下递归下降解析器的 SO 答案](https://stackoverflow.com/a/2336769/120163)。这种方法很容易表达。

# javascript - 如果填充了 div 标签字段，则更改与 div 标签具有相同 id 的特定标签的颜色

> ID：10349720
> 
> 赞同：0
> 
> 时间：2012-04-27T11:24:05.310
> 
> 标签：javascript, jquery, html, asp.net-mvc, html5-video

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:33:34.470

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:29:05.267

尝试：

`$(".box[data-id='" + ID-that-needs-changing + "']").css({ "background-color": "green" });`

这基本上会查找与您在发布后获得的 ID 相等的`box`类。`data-id`

# php - PHP XML 问题

> ID：10349721
> 
> 赞同：0
> 
> 时间：2012-04-27T04:30:38.810
> 
> 标签：php, xml

我的PHP：

```
$url = '../build.xml';
$xml = simplexml_load_file($url);

foreach($xml->css as $css) {
    echo (string) $css->element['id']."{";
    foreach($xml->css->element->csstag as $tag) {
        $temp = $tag->title.": ".$tag->value.";";
        echo $temp;
    }
    echo "}";
} 
```

我的 XML：

```
<root>
    <css>
    <element id="body">
        <csstag><title>background-color</title><value>#FFF</value></csstag>
        <csstag><title>color</title><value>#333</value></csstag>
        <csstag><title>font-family</title><value>Verdana, Geneva, sans-serif</value></csstag>
    </element>
    <element id="#header">
        <csstag><title>background-color</title><value>#444</value></csstag>
        <csstag><title>color</title><value>#FFF</value></csstag>
        <csstag><title>border-bottom</title><value>#333 5px solid</value></csstag>
    </element>
    <element id="#footer">
        <csstag><title>background-color</title><value>#444</value></csstag>
        <csstag><title>color</title><value>#FFF</value></csstag>
        <csstag><title>border-top</title><value>#333 5px solid</value></csstag>
    </element>
    </css>
</root> 
```

我找不到问题所在！

第一个问题是第一个 foreach 只显示第一个`<element>`节点，我知道那是因为我已经告诉它 foreach 每个`<css>`标签，但我想不出任何其他方式来回显`<element>`节点的属性。

第二件事是第二个 foreach 没有回应！

任何人都可以在代码中看到问题吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:23:44.213

你缺少一个 foreach 循环，你需要另一个级别

```
foreach($xml->css as $css) {
    foreach($xml->css->element as $elem){ // foreach element
        echo (string) $elem['id']."{";    // id for each element
        foreach($elem->csstag as $tag) {
            $temp = $tag->title.": ".$tag->value.";";
            echo $temp;
    }
    echo "}\n"; //\n to make the css look neater
    }
} 
```

# c - 我怎样才能组装这个程序

> ID：10349725
> 
> 赞同：1
> 
> 时间：2012-04-27T11:24:28.650
> 
> 标签：c, linux, gcc, assembly, x86-64

我有以下从[本](http://download.intel.com/design/intarch/papers/323405.pdf)文档中复制的汇编程序（参见 A.4）。我真的不知道 Linux 中的哪个汇编程序能够编译它。我知道它在英特尔语法中，我尝试使用`-masm=intel`带有 gcc 的标志来编译它，但它根本没有编译它。它给出了每一行的错误，从第 1 行开始！知道如何编译此代码吗？

```
%define CONCAT(a,b,c)   a %+ b %+ c
;;; unsigned int crc_pcl(unsigned char * buffer, int len, unsigned int crc_init);
;;;
;;;        *buf = rcx
;;;         len = rdx
;;;    crc_init = r8
global  crc_pcl
crc_pcl:
        push    rbx
push    rdi
push    rsi
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; 1) ALIGN: ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;    
        mov     rdi, rcx        ;; rdi = *buf 
neg     rcx
and     rcx, 7          ;; calculate the unalignment amount of
                                ;; the address
        je      proc_block      ;; Skip if aligned
;;;; Calculate CRC of unaligned bytes of the buffer (if any) ;;;
mov     rbx, [rdi]      ;; load a Qword from the buffer
        add     rdi, rcx        ;; align buffer pointer for Qword
                                ;; processing
        sub     rdx, rcx        ;; update buffer length    
align_loop:
        crc32   r8d, bl         ;; compute crc32 of 1-byte
        shr     rbx, 8          ;; get next byte
dec     rcx
jne     align_loop              Fast CRC Computation for iSCSI Polynomial

proc_block:
        ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; 2) PROCESS  BLOCKS: ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; compute num of bytes to be processed
mov     rbx, rdx        ;; save num bytes in rbx
        cmp     rdx, 128*24
jae     full_block
continue_block:
        ;; rdx < 128*24
mov     rax, 2731       ;; 2731 = ceil(2^16 / 24)
mul     edx
shr     rax, 16
;; eax contains floor(bytes / 24) = num 24-byte chunks to do        
;; process rax 24-byte chunks (128 >= rax >= 0)
;; compute end address of each block
;; rdi -> block 0 (base addr + RAX * 8)
;; rsi -> block 1 (base addr + RAX * 16)
;; r11 -> block 2 (base addr + RAX * 24)
lea     rdi, [rdi + rax * 8]
lea     rsi, [rdi + rax * 8]
lea     r11, [rsi + rax * 8]
xor     r9,r9
xor     r10,r10
;; branch into array
lea     rcx, [jump_table wrt rip]
        movzx   rdx, word [rcx + rax * 2] ;; rdx is offset from crc_array
        lea     rcx, [rcx + rdx + crc_array - jump_table]
        jmp     rcx
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; 2a) PROCESS FULL BLOCKS: ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
full_block:
        mov     rax, 128
lea     rsi, [rdi + 128*8*2]
lea     r11, [rdi + 128*8*3]
add     rdi, 128*8*1
xor     r9,r9
xor     r10,r10
;; branch into array
jmp     CONCAT(crc_,128,)
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; 3) CRC Array: ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
crc_array:
%assign i 128
%rep 128-3
CONCAT(crc_,i,:)
        crc32   r8,  [rdi - i*8]
        crc32   r9,  [rsi - i*8]
        crc32   r10, [r11 - i*8]
%assign i (i-1)
%endrep
%rep 2
        crc32   r8,  [rdi - i*8]
        crc32   r9,  [rsi - i*8]
        crc32   r10, [r11 - i*8]
%assign i (i-1)
%endrep
        crc32   r8,  [rdi - i*8]
        crc32   r9,  [rsi - i*8]
; SKIP  ;crc32  r10, [r11 - i*8] ; Don't do this one yet
        mov     rdi, r11
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; 4) Combine three results: ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
lea     rcx, [K_table - 16 wrt rip]    ; first entry is for idx 1
        shl     rax, 3                         ; rax *= 8
sub     rbx, rax                       ; rbx -= rax*8
        shl     rax, 1
sub     rbx, rax        ; rbx -= rax*16 (total rbx -= rax*24)
        add     rcx, rax
        movdqa  xmm0, [rcx]                    ; 2 consts: K1:K2
movq    xmm1, r8                       ; CRC for block 1
pclmulqdq       xmm1, xmm0, 0x00       ; Multiply by K2
movq    xmm2, r9                       ; CRC for block 2
        pclmulqdq       xmm2, xmm0, 0x10       ; Multiply by K1
pxor    xmm1, xmm2
movq    rax, xmm1
xor     rax, [r11 - i*8]
        mov     r8, r10
crc32   r8, rax
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; 5) Check for end: ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
CONCAT(crc_,0,:)
        mov     rdx, rbx
cmp     rbx, 128*24
jae     full_block
cmp     rbx, 24
jae     continue_block
fewer_than_24:
        ;; now fewer than 24 bytes remain
cmp     rbx, 16
jae     do_16
        cmp     rbx, 8
        jae     do_8
;; 0 <= rbx <= 7
shl     ebx, 29        ; size now in bits 31:29
jz      do_return
check_4:
        mov     rcx, [rdi]Fast CRC Computation for iSCSI Polynomial
        shl     ebx, 1         ; shift out into carry MSB (orig size & 4)
        jnc     check_2
crc32   r8d, ecx
jz      do_return
shr     rcx, 32        ; shift data down by 4 bytes
check_2:
        shl     ebx, 1         ; shift out into carry MSB (orig size & 2)
jnc     check_1
crc32   r8d, cx
jz      do_return
shr     rcx, 16        ; shift data down by 2 bytes
check_1:
        crc32   r8d, cl
do_return:
        mov     rax, r8
pop     rsi
pop     rdi
pop     rbx
ret
do_8:
        crc32   r8, [rdi]
add     rdi, 8
shl     ebx, 29        ; size (0...7) in bits 31:29
jnz     check_4
mov     rax, r8
pop     rsi
pop     rdi
pop     rbx
ret
do_16:
        crc32   r8, [rdi]
        crc32   r8, [rdi+8]
        add     rdi, 16
shl     ebx, 29        ; size (0...7) in bits 31:29
jnz     check_4
mov     rax, r8
pop     rsi
pop     rdi
pop     rbx
ret
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; 6) For small blocks, do it by 1: ;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; This handles cases: 1, 2, or 3
%assign i 3
%rep 3
CONCAT(crc_,i,:)
        crc32   r8, [r11 - i*24]
        crc32   r8, [r11 - i*24 + 8]
        crc32   r8, [r11 - i*24 + 16]
%assign i (i-1)
%endrep
        mov     rdi, r11
        shl     rax, 3          ;; rax *= 8
        sub     rbx, rax        ;; rbx -= rax*8
        shl     rax, 1
        sub     rbx, rax        ;; rbx -= rax*16 (total rbx -= rax*24)
        jmp     fewer_than_24Fast 
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; jump table        ;; Table is 129 entries x 2 bytes each
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
align 4
jump_table:
%assign i 0
%rep 129
dw      CONCAT(crc_,i,) - crc_array
%assign i (i+1)
%endrep
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; PCLMULQDQ tables
;; Table is 128 entries x 2 quad words each
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
section .data
align 64
K_table:
dq 0x14cd00bd6, 0x105ec76f0
dq 0x0ba4fc28e, 0x14cd00bd6
dq 0x1d82c63da, 0x0f20c0dfe
dq 0x09e4addf8, 0x0ba4fc28e
dq 0x039d3b296, 0x1384aa63a
dq 0x102f9b8a2, 0x1d82c63da
dq 0x14237f5e6, 0x01c291d04
dq 0x00d3b6092, 0x09e4addf8
dq 0x0c96cfdc0, 0x0740eef02
dq 0x18266e456, 0x039d3b296
dq 0x0daece73e, 0x0083a6eec
dq 0x0ab7aff2a, 0x102f9b8a2
dq 0x1248ea574, 0x1c1733996
dq 0x083348832, 0x14237f5e6
dq 0x12c743124, 0x02ad91c30
dq 0x0b9e02b86, 0x00d3b6092
dq 0x018b33a4e, 0x06992cea2
dq 0x1b331e26a, 0x0c96cfdc0
dq 0x17d35ba46, 0x07e908048
dq 0x1bf2e8b8a, 0x18266e456
dq 0x1a3e0968a, 0x11ed1f9d8
dq 0x0ce7f39f4, 0x0daece73e
dq 0x061d82e56, 0x0f1d0f55e
dq 0x0d270f1a2, 0x0ab7aff2a
dq 0x1c3f5f66c, 0x0a87ab8a8
dq 0x12ed0daac, 0x1248ea574
dq 0x065863b64, 0x08462d800
dq 0x11eef4f8e, 0x083348832
dq 0x1ee54f54c, 0x071d111a8
dq 0x0b3e32c28, 0x12c743124
dq 0x0064f7f26, 0x0ffd852c6
dq 0x0dd7e3b0c, 0x0b9e02b86
dq 0x0f285651c, 0x0dcb17aa4
dq 0x010746f3c, 0x018b33a4e
dq 0x1c24afea4, 0x0f37c5aee
dq 0x0271d9844, 0x1b331e26a
dq 0x08e766a0c, 0x06051d5a2
dq 0x093a5f730, 0x17d35ba46
dq 0x06cb08e5c, 0x11d5ca20e
dq 0x06b749fb2, 0x1bf2e8b8a
dq 0x1167f94f2, 0x021f3d99c
dq 0x0cec3662e, 0x1a3e0968a
dq 0x19329634a, 0x08f158014
dq 0x0e6fc4e6a, 0x0ce7f39f4
dq 0x08227bb8a, 0x1a5e82106
dq 0x0b0cd4768, 0x061d82e56
dq 0x13c2b89c4, 0x188815ab2
dq 0x0d7a4825c, 0x0d270f1a2
dq 0x10f5ff2ba, 0x105405f3e
dq 0x00167d312, 0x1c3f5f66c
dq 0x0f6076544, 0x0e9adf796
dq 0x026f6a60a, 0x12ed0daac
dq 0x1a2adb74e, 0x096638b34
dq 0x19d34af3a, 0x065863b64
dq 0x049c3cc9c, 0x1e50585a0
dq 0x068bce87a, 0x11eef4f8e
dq 0x1524fa6c6, 0x19f1c69dc
dq 0x16cba8aca, 0x1ee54f54c
dq 0x042d98888, 0x12913343e
dq 0x1329d9f7e, 0x0b3e32c28
dq 0x1b1c69528, 0x088f25a3a
dq 0x02178513a, 0x0064f7f26
dq 0x0e0ac139e, 0x04e36f0b0
dq 0x0170076fa, 0x0dd7e3b0c
dq 0x141a1a2e2, 0x0bd6f81f8
dq 0x16ad828b4, 0x0f285651c
dq 0x041d17b64, 0x19425cbba
dq 0x1fae1cc66, 0x010746f3c
dq 0x1a75b4b00, 0x18db37e8a
dq 0x0f872e54c, 0x1c24afea4
dq 0x01e41e9fc, 0x04c144932
dq 0x086d8e4d2, 0x0271d9844
dq 0x160f7af7a, 0x052148f02
dq 0x05bb8f1bc, 0x08e766a0c
dq 0x0a90fd27a, 0x0a3c6f37a
dq 0x0b3af077a, 0x093a5f730
dq 0x04984d782, 0x1d22c238e
dq 0x0ca6ef3ac, 0x06cb08e5c
dq 0x0234e0b26, 0x063ded06a
dq 0x1d88abd4a, 0x06b749fb2
dq 0x04597456a, 0x04d56973c
dq 0x0e9e28eb4, 0x1167f94f2
dq 0x07b3ff57a, 0x19385bf2e
dq 0x0c9c8b782, 0x0cec3662e
dq 0x13a9cba9e, 0x0e417f38a
dq 0x093e106a4, 0x19329634a
dq 0x167001a9c, 0x14e727980
dq 0x1ddffc5d4, 0x0e6fc4e6a
dq 0x00df04680, 0x0d104b8fc
dq 0x02342001e, 0x08227bb8a
dq 0x00a2a8d7e, 0x05b397730
dq 0x168763fa6, 0x0b0cd4768
dq 0x1ed5a407a, 0x0e78eb416
dq 0x0d2c3ed1a, 0x13c2b89c4
dq 0x0995a5724, 0x1641378f0
dq 0x19b1afbc4, 0x0d7a4825c
dq 0x109ffedc0, 0x08d96551c
dq 0x0f2271e60, 0x10f5ff2ba
dq 0x00b0bf8ca, 0x00bf80dd2
dq 0x123888b7a, 0x00167d312
dq 0x1e888f7dc, 0x18dcddd1c
dq 0x002ee03b2, 0x0f6076544
dq 0x183e8d8fe, 0x06a45d2b2
dq 0x133d7a042, 0x026f6a60a
dq 0x116b0f50c, 0x1dd3e10e8
dq 0x05fabe670, 0x1a2adb74e
dq 0x130004488, 0x0de87806c
dq 0x000bcf5f6, 0x19d34af3a
dq 0x18f0c7078, 0x014338754 
dq 0x017f27698, 0x049c3cc9c
dq 0x058ca5f00, 0x15e3e77ee
dq 0x1af900c24, 0x068bce87a
dq 0x0b5cfca28, 0x0dd07448e
dq 0x0ded288f8, 0x1524fa6c6
dq 0x059f229bc, 0x1d8048348
dq 0x06d390dec, 0x16cba8aca
dq 0x037170390, 0x0a3e3e02c
dq 0x06353c1cc, 0x042d98888
dq 0x0c4584f5c, 0x0d73c7bea
dq 0x1f16a3418, 0x1329d9f7e
dq 0x0531377e2, 0x185137662
dq 0x1d8d9ca7c, 0x1b1c69528
dq 0x0b25b29f2, 0x18a08b5bc
dq 0x19fb2a8b0, 0x02178513a
dq 0x1a08fe6ac, 0x1da758ae0
dq 0x045cddf4e, 0x0e0ac139e
dq 0x1a91647f2, 0x169cf9eb0
dq 0x1a0f717c4, 0x0170076fa 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T12:05:27.613

从该文件的附录 1：

> 我们提供 64 位代码，为 YASM 汇编程序和 Microsoft * Windows* 64 位 ABI 编写，用于本文中描述的各种优化功能。

这里至关重要的是 MS 64 位 ABI，它与`x86_64`unix ABI 不同。所以这段代码根本无法在 Linux 平台上正确运行，尽管它会汇编。

您可以从他们对函数参数的评论中识别 ABI：

```
;;;        *buf = rcx       // unix would be rdi
;;;         len = rdx       //               rsi
;;;    crc_init = r8        //               rdx 
```

这不是唯一的 ABI 差异。只是最容易注意到的一个。

*   [微软 64 位 ABI](http://msdn.microsoft.com/en-us/library/7kcdt6fy.aspx)
*   [Unix 64 位 ABI](http://www.x86-64.org/documentation/abi.pdf)

# bluetooth - 与 WP7.1 上的蓝牙连接设备通话是否需要蓝牙 API

> ID：10349726
> 
> 赞同：0
> 
> 时间：2012-04-27T11:24:36.237
> 
> 标签：bluetooth, windows-phone-7.1

这可能是一个愚蠢的问题，因为我对蓝牙和 WP7 开发还很陌生。

我知道 Mango (WP7.1) 没有蓝牙 API，但如果我让操作系统安装和管理所有蓝牙连接问题等，我是否仍然需要蓝牙特定 API 才能与该设备通信。

设备不会简单地为我提供串行或套接字连接吗？

我认为问题在于找到我需要与之交谈的特定蓝牙设备。IE 我需要蓝牙 API 来枚举可用设备吗？

谢谢

# perl - Mojo::DOM：某些字符需要特殊转义吗？

> ID：10349727
> 
> 赞同：2
> 
> 时间：2012-04-27T11:24:40.413
> 
> 标签：perl, dom, mojolicious

为什么`media:group`它发生在dom中不起作用？

```
#!/usr/bin/env perl
use warnings;
use 5.12.0;
use Mojo::UserAgent;

my $ua = Mojo::UserAgent->new();

my $id = 'E7511681ABEA8635';
my $url = 'http://gdata.youtube.com/feeds/api/playlists/' . $id . '?v=2';
my $tx = $ua->get( $url );

say $tx->res->dom->at( 'category' )->type;
say $tx->res->dom->at( 'media:group' )->type;

# category
# Can't call method "type" on an undefined value at ./perl.pl line 13 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T11:42:52.730

因为 media: 是命名空间吗？如果您将最后一行更改为 at('group') 它会返回 'media:group'

# machine-learning - 具有异构数据的分类器

> ID：10349729
> 
> 赞同：1
> 
> 时间：2012-04-27T11:24:47.297
> 
> 标签：machine-learning, neural-network, artificial-intelligence, classification

我有一个包含 1000 个样本的 l2 维数据集，由 5 个温度值、5 个价格值、一个代表人类专家判断的整数值（未决定=0、好=1、坏=2、危险=4）和我想学习预测的二元决策变量。

我怎样才能找到一个分类器来处理这种异构数据？

我正在考虑为每个可能的人类判断（0、1、2、4）构建一个分类器，所以是 4 个分类器。因此，对于每个人类判断值，我会： - 居中并降低温度和价格值 - 可能使用 PCA 删除一些不相关的特征 - 使用机器学习方法进行分类（如多层神经网络或 SVM）

我的方法正确吗？（如果有 1000 个可能的人类判断而不是 4 个呢？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:44:59.997

SVM 或 ANN 编码类别的典型方法是 1-of-C 编码：

*   [神经网络常见问题解答](ftp://ftp.sas.com/pub/neural/FAQ.html)-[主题：类别应该如何编码？](ftp://ftp.sas.com/pub/neural/FAQ2.html#A_cat)
*   [支持向量分类实用指南](http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf)- 2.1 分类特征

一般来说，几乎每个分类器都可以处理异构数据。但是您必须对输入进行预处理（缩放、归一化……）。我给你的链接中应该有很多提示。

# php - 如何检查变量是否包含某些特定文本

> ID：10349731
> 
> 赞同：2
> 
> 时间：2012-04-27T11:25:02.157
> 
> 标签：php

如何检查php中的变量是否包含文本？

例如：

> if ($cn 包含 'excel') { ... }

我目前有以下工作但很笨拙，因为如果课程名称更改，那么它将不再工作。

```
if (strpos($cn,'MS Excel 2003/07 (Intro)') !== false) {
...........
}
if (strpos($cn,'MS Excel 2003/07 (Intermediate)') !== false) {
...........
}
if (strpos($cn,'MS Excel 2003/07 (Special)') !== false) {
...........
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:32:41.757

每门课程可以有一个`ID`以及一个`Name`. 然后您的所有代码都可以通过 ID 引用课程，但您可以`Name`通过 UI 向用户显示。

这样，您可以允许`Name`更改课程，而无需每次都更新您的代码/添加到更改列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:26:16.240

您应该将课程名称存储在数据库中以便于维护。

所以像这样的东西会更好......

```
// $sources should be an array of course names from the DB

foreach($sources as $name) {
    if( strstr($cn, $name) ) {...}
} 
```

# java - 字段上的 Java 注释数量是否有限制？

> ID：10349735
> 
> 赞同：1
> 
> 时间：2012-04-27T11:25:06.293
> 
> 标签：java, annotations

字段上的 Java 注释数量是否有限制？我找不到关于这一点的任何信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T11:31:49.343

不，规范中没有任何限制。

见这里：[http ://docs.oracle.com/javase/specs/jls/se7/jls7.pdf](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)

通常，您遇到的 java 文件的唯一限制是操作系统范围的限制，例如 max。某些文件系统上的文件大小或 - 在核心情况下 - 磁盘大小。某些系统可能在编译或运行 100gb .java/.class 文件时出现问题...

随你所愿。只是它可能是糟糕的设计。我会说，将其保持在 10 以下是一个很好的经验法则。

编辑：毕竟，似乎有一个限制。至少在方法的**运行时**注释上。

> 请注意，最多 65535 个运行时可见的 Java 编程语言注释可以直接附加到程序元素。

不确定这是否也适用于字段。

所以，我想答案取决于您要添加的注释类型。

不过，语言规范中对此一无所知。我猜他们真的不认为有人会尝试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T11:47:06.940

好吧，这是[类文件格式规范](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html)的限制。

> 4.7.18。RuntimeVisibleParameterAnnotations 属性
> 
> RuntimeVisibleParameterAnnotations 属性是 method_info (§4.6) 结构的属性表中的可变长度属性。RuntimeVisibleParameterAnnotations 属性记录了在相应方法的参数上运行时可见的 Java 编程语言注解。
> 
> 请注意，最多**65535**个运行时可见的 Java 编程语言注释可以直接附加到程序元素。

编辑

上面的链接还提到了类、方法和元素的 RuntimeVisibleAnnotations 和 RuntimeInvisibleAnnotations - 每个限制都是 65535。65535 也是结构可以包含的最大值（无符号 16 位整数），您可能会遇到其他限制在你达到那个数字之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:29:38.457

我怀疑该限制高于您拥有的注释数量（您只能添加一次）或可能想要添加。

如果您每个人都想添加更多数据，您可以将注释数组的值作为注释的值，但在字符串中包含丰富的信息是添加更多信息的常用方法，例如以 JSON 格式。

# android - 我什么时候应该使用数据库？

> ID：10349736
> 
> 赞同：0
> 
> 时间：2012-04-27T11:25:06.310
> 
> 标签：android, database

我正在构建一个类似 Trivial 的应用程序。这只是问题和图片的集合。

我正在设计它，以便它将所有问题、答案和图像保存在数据库中。

这是可取的吗？

我什么时候应该使用数据库，什么时候只使用资源文件夹？

你将如何实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:42:38.647

如果您有 500 个问题，并且您计划为每个问题提供图像，我会考虑使用外部服务器为您提供数据。这样，您将拥有一个轻量级的应用程序，并且只会下载您需要的问题。您可以将下载的存储在本地数据库中。此外，您可以通过这种方式轻松地使您的应用程序保持最新状态。

话虽如此，如果您想在资源和 SQLite 之间进行选择，请选择 SQLite。它要快得多。您不应该将图像放入数据库中（我认为在 SQLite 中什至不可能），但在此处保留对它们的引用（文件名）并将实际图像保存在 SD 卡上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T11:45:21.947

资源文件夹也是一个数据库。为了缩小一点问题的范围，重点是将数据保存在结构化或非结构化数据存储中。从经验来看，结构化数据存储提供了一些索引、搜索数据分析等好处。现在您认为您只是收集数据，但后来您发现自己想要为其添加一些属性，增强数据模型等。从编程的角度来看，我没有看到作为文件夹的数据存储和数据存储之间有很多区别作为数据库。但是在可用性和后处理方面存在巨大差异。归根结底，它只是 API 调用。所以我的建议是使用数据库，我认为Android API带有sqlite，将问题存储在数据库中，文件可能在数据库或资源文件夹中，并在数据库中带有指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:30:44.007

在我看来，如果应用程序应该是可扩展的（新问题/新功能/...稍后添加），数据库是最好的解决方案...

如果它只是一个小型/快速应用程序，您只会更新一次，那么您可以保持简单并使用简单的文本文件或其他东西......

**编辑：因为我读到你想要大约 500 个问题，所以你真的应该去一个数据库，你以后总是可以添加属性和东西，对东西进行排序（比如难度），用数据库很容易......去数据库我会说！**

# ios - iPad 从已注册应用程序中的页数/数字中打开 Office 文档类型

> ID：10349737
> 
> 赞同：0
> 
> 时间：2012-04-27T11:25:07.597
> 
> 标签：ios, ipad, ms-office

我已注册我的 iPad 应用程序以接受多种传入文档类型，包括 .xls、.xlsx、.doc 和 .docx。我可以通过在 iPad 上打开包含这些文件类型的电子邮件附件并将我的应用程序视为“打开方式”下的选项之一来验证这是否有效。我的问题是，如果我在 iPad 上的 Pages 或 Numbers 中打开这些文档之一，那么我在“共享和打印”下看不到这个选项。我是不是找错地方了，还是可以选择与 Pages 或 Numbers 未提供的其他注册应用程序共享文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:29:51.203

Pages 和 Numbers 无法在其他应用程序中打开文档。

最简单的方法是导出它们并向自己发送电子邮件。

# c# - 多提供者模式下 Oracle 的 EntitySpaces 动态查询无法识别字段

> ID：10349751
> 
> 赞同：1
> 
> 时间：2012-04-27T11:26:09.710
> 
> 标签：c#, sql-server, oracle, entityspaces

以前，我在我的应用程序中使用 Oracle，所有动态查询都运行良好。现在我已经切换到 Multiprovider 模式并使用 SQL Server。

我将实体生成为`Template -> EntitySpaces -> 2009 -> C# -> Generated - Classes Master (C#) -> Execute`. 我为两者生成了元数据类`Template -> EntitySpaces -> 2009 -> C# -> MultiProvider -> MetadataMap(C#) -> Execute`。

生成时，忽略架构和目录选项未选中，目标多个数据提供者已选中。

SQL Server 的动态查询运行良好，但 Oracle 却不行。在 Oracle 上，我收到以下错误

```
ORA-00904: "Field_Name": invalid identifier 
```

甚至`LoadByPrimaryKey`给出了同样的错误。该`LastQuery`属性显示所有字段都写为`"FIELD_NAME"`。看起来`"`是造成问题的原因。如果`"`删除，查询工作正常。

如何`"`从动态查询中删除？是否有任何配置参数来指导 EntitySpaces 不添加`"`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:43:13.130

当字段名称用双引号括起来时，Oracle 10g v 10.2 及更高版本区分大小写，SQL Server 和其他数据库也支持区分大小写的排序规则

[甲骨文](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements008.htm)

[SQL 服务器](http://msdn.microsoft.com/en-us/library/ms143726#Terms)

[其他](https://stackoverflow.com/questions/153944/is-sql-syntax-case-sensitive)

# iphone - __IPHONE_OS_VERSION_MIN_REQUIRED 不返回部署目标？

> ID：10349752
> 
> 赞同：3
> 
> 时间：2012-04-27T11:26:10.047
> 
> 标签：iphone, ios, xcode, backwards-compatibility

为什么 __IPHONE_OS_VERSION_MIN_REQUIRED 返回基本 SDK 而不是部署目标？

我想使用一个只能在 iOS 4.3 及更高版本上运行但仍支持 4.0 及更高版本的类。为了实现这一点，我断言如果我尝试在 iOS 版本低于 4.3 的设备上使用这个类。为了避免断言，我通过检查 4.3 方法的可用性来避免代码中的类。部署目标当前设置为 4.0。

但是，因为断言只会在我在旧设备上运行应用程序时发生，所以如果部署目标小于 4.3，我还想添加一个警告。我正在尝试使用`__IPHONE_OS_VERSION_MIN_REQUIRED`. 但是，这以某种方式不断返回`50000`（基本 SDK）而不是下面的东西`43000`，我不知道为什么。

***代码：***

```
NSLog(@"Deployment target: %i", __IPHONE_OS_VERSION_MIN_REQUIRED); // Returns 50000 instead of 40000.
#if __IPHONE_OS_VERSION_MIN_REQUIRED < 43000
// Never gets here
NSLog(@"%@", @"WARNING! NWMethodWrapper does not work on iOS versions below 4.3\. If you insist on supporting older iOS versions, make sure you do not call NWMethodWrapper methods unless dlsym(RTLD_DEFAULT,\"imp_implementationWithBlock\") evaluates to true.");
#endif
NSAssert(dlsym(RTLD_DEFAULT,"imp_implementationWithBlock"), @"NWMethodWrapper uses methods that are only available from iOS 4.3 and later."); // Asserts, as appropriate (running on iOS 4.2.1). 
```

**编辑：**我的部署目标已经设置为 4.0，这就是我问这个问题的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:33:31.627

如果您没有定义`__IPHONE_OS_VERSION_MIN_REQUIRED`自己，`__IPHONE_OS_VERSION_MIN_REQUIRED`最终由编译器设置（通过“AvailabilityInternal.h”中的宏）以匹配您设置的最低 iphone OS 版本，因此您需要确保您的部署目标设置为早于 iOS 5.0 的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T13:01:58.643

您必须确保具有这样行为的类实际上是相关项目的一部分，而不是通过工作区访问的另一个项目的一部分。这些项目可以设置为它们自己的部署目标，这些目标不必与您在主项目中所期望的相同。

在我的例子中，该类的部署目标设置为 5.0（与我的主项目设置为 4.0 不同），这意味着`__IPHONE_OS_VERSION_MIN_REQUIRED`可以按预期工作。

# c# - 将 ASCII 字符串转换为普通字符串 C#

> ID：10349753
> 
> 赞同：2
> 
> 时间：2012-04-27T11:26:11.397
> 
> 标签：c#, ascii

> **可能重复：**
> [.NET 将十六进制值字符串转换为 Unicode 字符（支持不同的代码页）](https://stackoverflow.com/questions/8608489/net-convert-from-string-of-hex-values-into-unicode-characters-support-differen)

想要将包含 ASCII 字符串的字符串转换为文本，我似乎只能找到从 Byte[] 转换的 System.Text.ASCIIEncoding.ASCII.GetString 但在这种情况下，我希望能够做到从一个字符串。

`its a string containing ASCII hex: For example : ASCI = 47726168616D would equal Graham`

是否有任何内置功能？帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T11:50:12.363

```
private static string GetStringFromAsciiHex(String input)
{
    if (input.Length % 2 != 0)
        throw new ArgumentException("input");

    byte[] bytes = new byte[input.Length / 2];

    for (int i = 0; i < input.Length; i += 2)
    {
        // Split the string into two-bytes strings which represent a hexadecimal value, and convert each value to a byte
        String hex = input.Substring(i, 2);
        bytes[i/2] = Convert.ToByte(hex, 16);                
    }

    return System.Text.ASCIIEncoding.ASCII.GetString(bytes);
} 
```

# html - 在 HTML5 windows phone 应用程序上解析 Xml

> ID：10349756
> 
> 赞同：0
> 
> 时间：2012-04-27T11:26:14.880
> 
> 标签：html, windows-phone-7, xml-parsing

我正在寻找一个示例来使用 HTML5 视图解析 windows phone 应用程序中的 xml 提要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:35:09.697

通过这个

[http://blog.jayway.com/2011/11/07/wp7-getting-started-5-using-databound-controls-to-display-an-rss-feed/](http://blog.jayway.com/2011/11/07/wp7-getting-started-5-using-databound-controls-to-display-an-rss-feed/)

# jquery - 选中的复选框向上滑动？

> ID：10349766
> 
> 赞同：0
> 
> 时间：2012-04-27T11:26:35.950
> 
> 标签：jquery

可能吗？

```
var isChecked = $(".imdbArtistId").is(":checked").hide(); 
```

这不行吗？

我可以通过获取复选框来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:29:46.860

该`is`方法返回 true/false 值，而不是 jQuery 对象。

如果您只想隐藏带有您指定的类的复选框（如果它们被选中），您可以执行以下操作：

```
$(".imdbArtistId:checked").hide() 
```

[工作示例](http://jsfiddle.net/KCLtD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:30:04.313

尝试

```
$(document).ready(function(){
if($(".imdbArtistId").is(":checked"))
{
$(this).hide()
}
}) 
```

如果选中，这将隐藏该复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:30:07.653

您需要`hide`在元素上使用该函数，而不是在布尔结果上`.is`

尝试这个：

```
var element = $(this);
var isChecked = element.is(":checked");
if(isChecked){
   element.hide();
} 
```

[这是一个工作示例](http://jsfiddle.net/musefan/7XHrn/)

* * *

如果您还需要隐藏一些关联的文本，您将需要能够识别匹配的文本，最好使用父容器来包装复选框和元素，如下所示：

```
<div>
    <input type="checkbox"/> here is some text
</div> 
```

您可以使用以下代码：

```
$("input").change(function(e) {
    var element = $(this);
    var isChecked = element.is(":checked");
    if (isChecked) {
        element.parent().hide();
    }
});​ 
```

[这是一个在行动](http://jsfiddle.net/musefan/7XHrn/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T11:30:16.377

尝试具有以下结构：

```
<div class='placeholder'><input type='checkbox' /></div> 
```

接着：

```
$(".imdbArtistId:checked").parent().hide(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T11:30:51.113

is(":checked") 将返回 true 或 false，而不是返回所有选中的框。

为此，请使用：

```
$(".imdbArtistId:checked").hide(); 
```

假设“imbdbArtistId”是您正在考虑的所有复选框的通用类。

# internet-explorer - tinymce textarea 值在 IE 中 POST 后为空

> ID：10349773
> 
> 赞同：4
> 
> 时间：2012-04-27T11:26:53.903
> 
> 标签：internet-explorer, tinymce

我对这个很生气。我将最新版本的 TinyMCE 与 Jquery 一起使用（也尝试过 TinyMCE），当我提交带有 textarea 的表单时，它会在 IE 中导致问题 - 值为空白。我尝试了一切，结果是一样的......在IE9中。其他所有浏览器都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T18:37:22.013

我建议使用 ckeditor [http://ckeditor.com/](http://ckeditor.com/)，当我的一位队友建议使用它时，我遇到了同样的问题。ckeditor 最好的一点是它已被.Net 社区使用，如果他们正在使用它，则意味着不会与 IE 有任何冲突。:)

干杯.. :)

# mysql - ORDER BY FIELD 用通配符？

> ID：10349779
> 
> 赞同：3
> 
> 时间：2012-04-27T11:27:08.313
> 
> 标签：mysql, sql

基本上我有一个可以包含一些前缀字符串的字段：

```
word1
bla2
ttt3
word4 
[...] 
```

我需要先订购 SQL，`ttt3`然后再订购所有其他字符串。
我试过这个没有运气

```
ORDER BY FIELD (myField,'ttt3',*) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T11:30:37.730

使用`ORDER BY CASE`构造。它强制为您要提取的值使用 0，对其他所有值强制使用 1，因此 0 首先排序。它就像任何列一样适合`ORDER BY`列表，以逗号分隔，因此您可以在之后添加其他排序列。

```
ORDER BY
  CASE WHEN myField = 'ttt3' THEN 0 ELSE 1 END,
  myField,
  other_order_col,
  other_order_col2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T11:30:27.690

```
ORDER BY myField = 'ttt3' DESC 
```

或更通用且独立于供应商：

```
ORDER BY CASE WHEN myField = 'ttt3' THEN 0 ELSE 1 END 
```

# backbone.js - 如何在模型更改后停止渲染视图？

> ID：10349780
> 
> 赞同：0
> 
> 时间：2012-04-27T11:27:11.513
> 
> 标签：backbone.js

我有 2 个模型，一个称为 profile 和一组称为 profilelist 的配置文件。

一个视图显示配置文件列表，称为 profileListView，当您单击配置文件时，它会加载一个新视图 profileDetailsView，您可以在其中编辑其详细信息。

现在，当我更改此配置文件的 profileDetailsView 中的属性并执行 model.Change 时，profileListView 会重新呈现，因为它显然会监听其模型。问题是视图重新呈现，但 URL 保持不变，指向我更改的配置文件的详细信息视图，这弄乱了网站的导航。

所以我想停止 profileListView 的自动重新渲染，然后手动“重定向”到列表视图。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:11:03.770

您可能*确实*希望重新渲染视图，对吧？您只希望 url 也改变。因此，一种选择是让您的路由器在模型上绑定一个处理程序，然后让它更新 URL - 类似于：

```
model.on('change', function(model) {
    var url = getTheCorrectUrl(model);
    router.navigate(url);
}); 
```

# python - 如何打开（读写）或创建允许截断的文件？

> ID：10349781
> 
> 赞同：39
> 
> 时间：2012-04-27T11:27:13.313
> 
> 标签：python, ruby, truncate

我想要：

*   如果文件存在，则以读写模式打开文件；
*   如果它不存在，则创建它；
*   能够随时随地截断它。

**编辑**：截断我的意思是写到一个位置并丢弃文件的剩余部分（如果存在）

所有这些都是原子的（使用单个`open()`调用或模拟单个`open()`调用）

似乎没有单一的开放模式适用：

*   r ：显然不起作用；
*   r+ : 如果文件不存在则失败；
*   w：如果存在则重新创建文件；
*   w+：如果文件存在则重新创建；
*   a: 无法阅读；
*   a+：不能截断。

我尝试过的一些组合（rw、rw+、r+w 等）似乎也不起作用。是否可以？

来自 Ruby 的一些[文档](http://www.tutorialspoint.com/ruby/ruby_input_output.htm)（也适用于 python）：

```
r
Read-only mode. The file pointer is placed at the beginning of the file.
This is the default mode.

r+
Read-write mode. The file pointer will be at the beginning of the file.

w
Write-only mode. Overwrites the file if the file exists. If the file
does not exist, creates a new file for writing.

w+
Read-write mode. Overwrites the existing file if the file exists. If the
file does not exist, creates a new file for reading and writing.

a
Write-only mode. The file pointer is at the end of the file if the file
exists. That is, the file is in the append mode. If the file does not exist,
it creates a new file for writing.

a+
Read and write mode. The file pointer is at the end of the file if the file
exists. The file opens in the append mode. If the file does not exist, it
creates a new file for reading and writing. 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-27T14:10:44.983

根据[OpenGroup](http://pubs.opengroup.org/onlinepubs/7908799/xsh/open.html)：

> O_TRUNC
> 
> 如果文件存在且为普通文件，且文件成功打开O_RDWR或O_WRONLY，则其长度被截断为0，模式和所有者不变。它不会影响 FIFO 特殊文件或终端设备文件。它对其他文件类型的影响取决于实现。将 O_TRUNC 与 O_RDONLY 一起使用的结果未定义。

因此，当打开带有“w”或“w+”的文件时，可能会传递 O_TRUNC。这赋予了“截断”不同的含义，而不是我想要的。

使用 python，该解决方案似乎在低级 I/O 上打开文件并使用`os.open()`函数。

以下python函数：

```
def touchopen(filename, *args, **kwargs):
    # Open the file in R/W and create if it doesn't exist. *Don't* pass O_TRUNC
    fd = os.open(filename, os.O_RDWR | os.O_CREAT)

    # Encapsulate the low-level file descriptor in a python file object
    return os.fdopen(fd, *args, **kwargs) 
```

有我想要的行为。您可以像这样使用它（实际上是我的用例）：

```
# Open an existing file or create if it doesn't exist
with touchopen("./tool.run", "r+") as doing_fd:

    # Acquire a non-blocking exclusive lock
    fcntl.lockf(doing_fd, fcntl.LOCK_EX)

    # Read a previous value if present
    previous_value = doing_fd.read()
    print previous_value 

    # Write the new value and truncate
    doing_fd.seek(0)
    doing_fd.write("new value")
    doing_fd.truncate() 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-27T12:39:41.190

嗯，只有这些模式，而且都有你列出的“缺陷”。

您唯一的选择是包装`open()`. 为什么不这样呢？（Python）

```
def touchopen(filename, *args, **kwargs):
    open(filename, "a").close() # "touch" file
    return open(filename, *args, **kwargs) 
```

它的行为就像 open，如果你真的愿意，你甚至可以将它重新绑定到 open()。

保留所有 open 的功能，您甚至可以执行以下操作：

```
with touchopen("testfile", "r+") as testfile:
    do_stuff() 
```

您当然可以创建一个上下文管理器，它以 a+ 模式打开文件，将其读入内存并拦截写入，因此您可以通过在 w 模式下神奇地创建一个临时文件来处理截断，并在您关闭它时将该临时文件重命名为原始文件，但我想那将是矫枉过正。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T14:33:27.613

您可以使用“a+”（Ruby）读取、写入和截断：

```
File.open("test.txt", "a+") do |f|
  f.print "abc\ndefgh" 
  f.rewind
  p f.read 
  f.truncate(5) 
end
puts File.size("test.txt") #=> 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T12:39:11.633

我不知道在 Ruby 中有什么优雅的方法可以做到这一点。我的解决方案可能是创建一个临时文件，向其中写入内容，然后将其重命名为我真正想要的文件名。如果存在，这将覆盖先前的文件，如果不存在，则创建该文件。像这样的东西：

```
orig_filename = './whatever_file.log'
temp_filename = './.tempfile'
temp_file = File.new(temp_filename, 'w')

// Write contents to file

temp_file.close
File.rename(temp_filename, orig_filename) 
```

`SystemCallError`如果由于某种原因失败，重命名将引发。

# asp.net-mvc - 所有控制器都可以访问的一种方法 - 放在哪里？

> ID：10349783
> 
> 赞同：4
> 
> 时间：2012-04-27T11:27:33.193
> 
> 标签：asp.net-mvc

例如，在 MVC 中，我有 5 个不同的控制器文件。在所有这些中，我都有一种保存图像的方法。有没有办法把这个方法放在一个地方，每个控制器方法都可以访问它，而不是把它写在每个控制器中？我试过了

```
 MyController.MyMethod(); 
```

但是在我写下点之后，智能并没有显示出来。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T11:32:54.767

将其放在实用程序类中并使其成为静态。从您的控制器中，您需要做的就是：

```
Utility.SaveImage(...); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-27T11:32:16.043

使用基本控制器

```
public abstract class BaseController : Controller
{
    protected virtual void MyMethod()
    {
        // Do stuff
    }
} 
```

然后你的控制器继承你的基本控制器

```
public class HomeController : BaseController
{
    public ActionResult Index()
    {
        this.MyMethod();
        return View();
    }
} 
```

或者，您可以创建一个静态帮助程序类

```
public static class Helper
{
    public static void MyMethod()
    {
        // Do stuff
    }
}

public class HomeController
{
    public ActionResult Index()
    {
        Helper.MyMethod()
        return View();
    }
} 
```

# android - 如何包装首选项标题？

> ID：10349784
> 
> 赞同：8
> 
> 时间：2012-04-27T11:27:39.807
> 
> 标签：android, android-layout, android-preferences

在这张图片中，my 的标题`Preference`没有环绕它的父级。

如何使标题换行到新行？

谢谢。

![在此处输入图像描述](../Images/33d55893ba1c416833b55bd55c636a4d.png)

xml:

```
<CheckBoxPreference
        android:key="keypref"
        android:summary="Summary text does wrap around the borders"
        android:title="The title of this preference is" >
</CheckBoxPreference> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T13:53:18.297

您需要制作类似于默认（android 内部）CheckBoxPreference 的自定义布局。在该 xml 文本视图中，应将 ellipsize 设置为 Marque，将无限重复限制和可滚动设置为水平。比你可以设置 CheckBoxPreference 的布局：

```
<CheckBoxPreference
    android:key="key_checkbox_pref"
    android:summary="Summary text does wrap around the borders"
    android:title="The title of this preference."
    android:layout="@layout/custom_checkbox_preferences_layout"> 
```

希望这会奏效；）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T21:28:30.067

只是对此的更新。这是一个`String`所以你可以`\n`用来创建一个换行符。

```
<CheckBoxPreference
        android:key="keypref"
        android:summary="Summary text does wrap around the borders"
        android:title="The title of this preference\nis this." >
</CheckBoxPreference> 
```

# python - 在 Python 2.7 中优化过滤列表

> ID：10349787
> 
> 赞同：9
> 
> 时间：2012-04-27T11:27:58.790
> 
> 标签：python, generator, python-2.7

我需要多次过滤大型列表，但我关心代码的简单性和执行效率。举个例子：

```
all_things # huge collection of all things

# inefficient but clean code
def get_clothes():
    return filter(lambda t: t.garment, allThings)

def get_hats():
    return filter(lambda t: t.headgear, get_clothes()) 
```

我担心我正在迭代衣服清单，而实际上它已经被迭代了。我还想将两个过滤器操作分开，因为它们属于两个不同的类，并且我不想复制 hats 类中的第一个 lambda 函数。

```
# efficient but duplication of code
def get_clothes():
    return filter(lambda t: t.garment, allThings)

def get_hats():
    return filter(lambda t: t.headgear and t.garment, allThings) 
```

我一直在研究生成器功能，因为它们似乎是要走的路，但我还没有弄清楚如何。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-27T11:37:40.157

首先使用`filter`/`lambda`组合将被弃用。当前的函数式编程风格在[Python 函数式编程 HOWTO](http://docs.python.org/howto/functional.html)中有描述。

其次，如果你关心效率，而不是构造列表，你应该返回[generators](http://docs.python.org/tutorial/classes.html#generators)。在这种情况下，它们很简单，可以使用[生成器表达式](http://www.python.org/dev/peps/pep-0289/)。

```
def get_clothes():
    return (t for t in allThings if t.garment)

def get_hats():
    return (t for t in get_clothes() if t.headgear) 
```

或者，如果您愿意，可以使用真正的生成器（据称更 Pythonic）：

```
def get_clothes():
    for t in allThings:
       if t.garment:
           yield t

def get_hats():
    for t in get_clothes():
        if t.headgear:
            yield t 
```

如果由于某种原因，有时您需要`list`而不是`iterator`，您可以通过简单的强制转换来构造列表：

```
hats_list = list(get_hats()) 
```

注意，上面**不会**构造衣服列表，因此效率接近你的重复代码版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T03:20:48.083

我一直在寻找类似的列表过滤，但希望与此处呈现的格式略有不同。

上面的`get_hats()`调用很好，但重用性有限。我一直在寻找类似的东西`get_hats(get_clothes(all_things))`，您可以在其中指定源`(all_things)`，然后根据需要指定尽可能少或尽可能多的过滤器`get_hats()`级别`get_clothes()`。

我找到了一种使用生成器的方法：

```
def get_clothes(in_list):
    for item in in_list:
        if item.garment:
            yield item

def get_hats(in_list):
    for item in in_list:
        if item.headgear:
            yield item 
```

然后可以通过以下方式调用：

```
get_hats(get_clothes(all_things)) 
```

我测试了原始解决方案、vartec 的解决方案和这个额外的解决方案来查看效率，并且对结果有些惊讶。代码如下：

设置：

```
class Thing:
    def __init__(self):
        self.garment = False
        self.headgear = False

all_things = [Thing() for i in range(1000000)]

for i, thing in enumerate(all_things):
    if i % 2 == 0:
        thing.garment = True
    if i % 4 == 0:
        thing.headgear = True 
```

原始解决方案：

```
def get_clothes():
    return filter(lambda t: t.garment, all_things)

def get_hats():
    return filter(lambda t: t.headgear, get_clothes())

def get_clothes2():
    return filter(lambda t: t.garment, all_things)

def get_hats2():
    return filter(lambda t: t.headgear and t.garment, all_things) 
```

我的解决方案：

```
def get_clothes3(in_list):
    for item in in_list:
        if item.garment:
            yield item

def get_hats3(in_list):
    for item in in_list:
        if item.headgear:
            yield item 
```

vartec的解决方案：

```
def get_clothes4():
    for t in all_things:
       if t.garment:
           yield t

def get_hats4():
    for t in get_clothes4():
        if t.headgear:
            yield t 
```

计时码：

```
import timeit

print 'get_hats()'
print timeit.timeit('get_hats()', 'from __main__ import get_hats', number=1000)

print 'get_hats2()'
print timeit.timeit('get_hats2()', 'from __main__ import get_hats2', number=1000)

print '[x for x in get_hats3(get_clothes3(all_things))]'
print timeit.timeit('[x for x in get_hats3(get_clothes3(all_things))]',
                    'from __main__ import get_hats3, get_clothes3, all_things',
                    number=1000)

print '[x for x in get_hats4()]'
print timeit.timeit('[x for x in get_hats4()]',
                    'from __main__ import get_hats4', number=1000) 
```

结果：

```
get_hats()
379.334653854
get_hats2()
232.768362999
[x for x in get_hats3(get_clothes3(all_things))]
214.376812935
[x for x in get_hats4()]
218.250688076 
```

生成器表达式似乎稍微快一些，我和 vartec 的解决方案之间的时间差异可能只是噪音。但我更喜欢能够以任何顺序应用所需的任何过滤器的灵活性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T11:37:31.107

仅一次完成（伪代码）：

```
clothes = list()
hats = list()
for thing in things:
    if thing is a garment:
        clothes.append(thing)
        if thing is a hat:
            hats.append(thing) 
```

一次大通和一小通（列表推导）：

```
clothes = [ x for x in things if x is garment ]
hats = [ x for x in clothes if x is hat ] 
```

如果您想创建*整个列表*，则使用生成器表达式进行延迟评估是没有意义的，因为您不会变得懒惰。

如果您一次只想处理几件事情，或者如果您的内存受限，请使用@vartec 的生成器解决方案。

# ipad - 当内存超过 40MB 时，基于 Unity 的应用程序在 iPad 1 上崩溃

> ID：10349788
> 
> 赞同：2
> 
> 时间：2012-04-27T11:28:00.157
> 
> 标签：ipad, memory, crash, unity3d

我知道这可能是 Unity 特有的，但我在这里问它的原因是因为这更多是关于 iPad 和内存使用的一般问题......

我们有一个 Unity3D 游戏项目（不是我创建的，但我试图帮助找出它崩溃的原因）。它包含任何一次加载的大约 8 个纹理，大小均为 512x512。游戏中屏幕上的多边形可能不超过 10,000 个。

当我们在 iPad 2 上通过 Instruments 运行它时，它的峰值约为 60 MB，这似乎完全在该机器的内存容量范围内。然而，当我们尝试在 iPad 1 上运行它时，即使在重新启动以清除内存后，Instruments 显示它在崩溃之前达到了大约 40 MB 的加载量。

iPad 1 不能处理超过 40 MB 的内存有什么原因吗？我知道 iPad 1 只有 256 MB 与 iPad 2 的 512 MB 相比，但这肯定仍然在设备的能力范围内吗？

编辑：iPad 1 运行 iOS 4.2.1，iPad 2 运行 iOS 5.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:25:59.413

我们不知道 iPad 1 上安装的 iOS 版本，它可以改变操作系统使用的基本内存。

根据我的经验，在调用内存警告之前，40MB 的限制与我过去在只有 256MB RAM 的 Apple 设备上看到的 30-50MB 范围一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T17:56:25.933

您无需放弃 iPad1 支持即可让您的应用正常运行。避免此问题的方法是解压缩纹理，然后将每个纹理写入文件。然后，内存映射每个文件并使用内存映射地址而不是正常的内存地址。iOS 设备可以通过这种方式从一个文件中映射大约 700 兆的数据，您可以通过普通的 opengl 方式将内存发送到显卡。

# c - 在少于 O(log(n)) 的运行时间内从排序数组中搜索

> ID：10349796
> 
> 赞同：0
> 
> 时间：2012-04-27T11:28:44.483
> 
> 标签：c, algorithm, search, binary-search

我正在使用二进制搜索在 O(log(n)) 时间内从排序的数字数组中搜索一个数字。我的搜索 C 函数如下：

```
search(int array[],int size,int search)
 {
 int first=0;
 int last=size-1;
 int middle = (first+last)/2;
   while( first <= last )
   {
      if ( array[middle] < search )
         first = middle + 1;    
      else if ( array[middle] == search ) 
      {
         printf("%d found at location %d.\n", search, middle+1);
         break;
      }
      else
         last = middle - 1;

      middle = (first + last)/2;
   }
   if ( first > last )
      printf("Not found! %d is not present in the list.\n", search);
} 
```

这`size`是数组的大小，`search`是要搜索的数字。有没有办法以比上述程序更复杂的方式执行搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:33:07.603

是的，使用哈希表。在一般情况下它应该更快。

# android - Android 如何在 LocationManager 中获取高度。我总是得到零

> ID：10349800
> 
> 赞同：5
> 
> 时间：2012-04-27T11:28:57.637
> 
> 标签：android, altitude

我正在尝试从 location.getAltitude() 方法获取当前高度。但它总是返回零。我应该怎么做才能获得当前的高度值。但正确获取经度和纬度。请给我建议。我在谷歌搜索并制定了一些样本，但所有样本都只返回零。

我使用过的代码：

在创建时我调用了 =getMyCurrentLocation(); 这种方法。

```
void getMyCurrentLocation() {
        LocationManager locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationListener locListener = new MyLocationListener();
try{gps_enabled=locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);}catch(Exception ex){}
           try{network_enabled=locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);}catch(Exception ex){}  
if(gps_enabled){

                locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);

            }

            if(network_enabled){
                locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);

            }

        if(gps_enabled){
                location=locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

            }

            if(network_enabled && location==null)   {
                location=locManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);  

            }

        if (location != null) {

            MyLat = location.getLatitude();
            MyLong = location.getLongitude();
    Toast.makeText(this,"My Lat : " + MyLat + "\n" + "My Long : " + MyLong, Toast.LENGTH_SHORT).show();

        } else {

        }

        System.out.println(" LATTITUDE " + MyLat);
        System.out.println("Longitude " + MyLong);

    }

public class MyLocationListener implements LocationListener

        {

        @Override

        public void onLocationChanged(Location loc)

        {

        MyLat =loc.getLatitude();
        MyLong=   loc.getLongitude();
       gooalt=getElevationFromGoogleMaps(MyLat,MyLong) ;
      double alt=loc.getAltitude(); **==>>> This one returns ZERO**

        String Text = "Longitud = " + (loc.getLongitude()) +"Latitud = " + loc.getLatitude()+"Altitude "+gooalt+"feet";

        Toast.makeText( getApplicationContext(),Text,Toast.LENGTH_SHORT).show();

        }

        @Override

        public void onProviderDisabled(String provider)

        {

        Toast.makeText( getApplicationContext(),"Gps  Disabled",Toast.LENGTH_SHORT ).show();

        }

        @Override

        public void onProviderEnabled(String provider)

        {

        Toast.makeText( getApplicationContext(),"Gps   Enabled",Toast.LENGTH_SHORT).show();

        }

        @Override

        public void onStatusChanged(String provider, int status, Bundle extras)

        {

        }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:49:05.107

你用什么方法来获取位置的？也许你可以尝试[http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation(java.lang.String](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation(java.lang.String) ) 代替，这对我有用。

如果没有，也许尝试另一种方法，有几种方法：http: [//developer.android.com/guide/topics/location/index.html](http://developer.android.com/guide/topics/location/index.html)

顺便说一句：你能给我们一些代码吗？你在什么设备上测试？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:31:28.073

网络位置没有高度。GPS 可以，但如果你总是得到 0，那么你的 GPS 硬件可能坏了。关闭手机上的网络位置设置并尝试使用地图应用程序，看看您是否从 GPS 获得任何修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T07:10:52.997

我想知道为什么它没有获得高度值，您的代码是正确的。尝试删除网络提供商并仅在 gps 中测试代码，看看它是否获得任何值，如果您遇到任何问题，请在代码中告诉我您在哪里显示高度你能突出显示吗？如果你使用的是 String Text = "Longitud = " + (loc.getLongitude()) +"Latitud = " + loc.getLatitude()+"Altitude "+gooalt+"feet"; 对于高度错误，尝试使用 loc.getAltitude() 代替**gooalt** ..。

# windows - 如何通过控制台应用程序延迟 Windows 中的系统关闭？

> ID：10349808
> 
> 赞同：2
> 
> 时间：2012-04-27T11:29:31.367
> 
> 标签：windows, visual-c++, console-application

我有一个正在运行的应用程序，并且用户已给出关闭系统的命令，但我想将关闭推迟到我的应用程序运行时。应用程序工作完成后，系统应关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:37:41.630

这取决于您正在谈论的 Windows 版本。在 Windows XP 中，您可以响应 WM_QUERYENDSESSION 之类的消息来阻止关机。（由于您是控制台应用程序，因此您可能需要在控制台应用程序仍在运行时生成一个小窗口应用程序来执行此操作。）

但是 Vista 让应用程序很难阻止关机。（微软声称根本做不到，但我确实看到 Visual Studio 2010 设法做到了。）您可以将关机延迟大约五秒钟（但请记住，可能有许多其他应用程序试图做一堆在相同的五秒钟内的东西）。此时，用户将获得一个 UI，显示所有未正确关闭的应用程序。使用 Vista+，您可以打电话[`ShutdownBlockReasonCreate`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376877%28v=vs.85%29.aspx)让用户知道为什么中断您的应用程序是个坏主意，但这实际上并不能阻止用户这样做。

这是了解如何处理[shutdown](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376882%28v=vs.85%29.aspx)的 MSDN 入口点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:32:05.890

当 Windows 关闭时发送 WM_QUERYENDSESSION 和应用程序回传 TRUE 或 FALSE 取决于当前状态。关于这条消息，我找到了它：http: [//msdn.microsoft.com/en-us/library/ms700677 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms700677(v=vs.85).aspx)

也许它可以帮助你

# javascript - 如何使用 chrome 中的 javascript 在 SVG 元素上操作翻译转换？

> ID：10349811
> 
> 赞同：38
> 
> 时间：2012-04-27T11:29:46.210
> 
> 标签：javascript, google-chrome, svg, transform

我想`transform="translate(x,y)"`使用 JavaScript 操作 SVG 元素的属性。

所以我得到了这个 HTML 代码：

```
<body>

<svg id="test" preserveAspectRatio="xMidYMid meet" viewBox="0 0 100% 100%" xmlns="http://www.w3.org/2000/svg" version="1.1">
    <rect transform="translate(100,100)" width="300" height="100" style="fill:rgb(0,0,255);stroke-width:1;stroke:rgb(0,0,0)" />
    <rect transform="translate(400,400)" width="300" height="400" style="fill:red; stroke-width:1; stroke: yellow" />
</svg>

</body> 
```

这个 JavaScript 代码：

```
var positioner = (function(domUtils){

   var svg = document.getElementById("test");
   var elementOffset = 100;

   function getAbsoluteX(leftElement) {
    return domUtils.getWidth(leftElement) + elementOffset; 
   }

   function getAbsoluteY(topElement) {
    return domUtils.getHeight(topElement) + elementOffset;
   }   

   var rectangles = document.querySelectorAll("rect");
   for(var i = 0; i < rectangles.length; ++i) {
    var spaceLeft = 0;
    if(i > 0) {
      spaceLeft = getAbsoluteX(rectangles[i-1]);
    }
    var rect = rectangles[i];
    var attrValue = "translate(" + spaceLeft + ", 100)";
    rect.setAttribute('transform', attrValue);
   };
 })(domUtils); 
```

哪里`getAbsoluteX()`是自定义函数。

它在 Firefox 中运行良好，但在 chrome 中却不行。任何人都知道解决方法或如何解决这个问题？

谢谢。问候。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-04-27T21:44:53.327

在 Chrome、Firefox、IE 或任何标准的 SVG 用户代理中，有两种方法可以获取/设置 SVG 元素的转换值：

## 通过属性处理转换

```
// Getting
var xforms = myElement.getAttribute('transform');
var parts  = /translate\(\s*([^\s,)]+)[ ,]([^\s,)]+)/.exec(xforms);
var firstX = parts[1],
    firstY = parts[2];

// Setting
myElement.setAttribute('transform','translate(30,100)'); 
```

***优点**：易于设置和理解（与标记相同）。*
***缺点**：必须解析字符串值才能找到你想要的；对于动画值，动画激活时不能要求基值；感觉很脏。*

## 通过 SVG DOM 绑定处理转换

```
// Getting
var xforms = myElement.transform.baseVal; // An SVGTransformList
var firstXForm = xforms.getItem(0);       // An SVGTransform
if (firstXForm.type == SVGTransform.SVG_TRANSFORM_TRANSLATE){
  var firstX = firstXForm.matrix.e,
      firstY = firstXForm.matrix.f;
}

// Setting
myElement.transform.baseVal.getItem(0).setTranslate(30,100); 
```

***优点**：无需尝试自己解析字符串；保留现有的转换列表（您可以查询或调整列表中的单个转换）；你得到真正的价值，而不是字符串。*
***缺点**：起初可能会让人难以理解；更详细地设置简单值；没有从 中提取旋转、缩放或倾斜值的便捷方法`SVGTransform.matrix`，缺乏[浏览器支持](https://developer.mozilla.org/en-US/docs/Web/API/SVGTransform#Browser_compatibility)。*

您可能会发现我编写的用于探索 DOM 的工具对此很有帮助。

1.  转到[http://objjob.phrogz.net/svg/object/131](http://objjob.phrogz.net/svg/object/131)
2.  单击“显示继承的属性/方法？” 复选框
3.  看到 SVGRectElement 有一个`transform`属性是`SVGAnimatedTransformList`.
4.  点击`SVGAnimatedTransformList`查看[对象支持的属性和方法](http://objjob.phrogz.net/svg/object/24)。
5.  探索！

* * *

## 回答 #2

> 赞同：-9
> 
> 时间：2013-11-07T17:40:45.613

这是一个相当古老的问题，但如果您想知道，答案是 Chrome 不喜欢`translate(30, 100)`- 它需要单位。它也更喜欢`-webkit-transform`SVG。

# jquery - 是否可以在纯 html 5 中创建它

> ID：10349812
> 
> 赞同：5
> 
> 时间：2012-04-27T11:29:46.823
> 
> 标签：jquery, html, css, effects

我需要在 HTML "Colhemos ideias, semeamos futuro..."中创建[这种效果](http://dl.dropbox.com/u/8698905/Untitled.jpg)

这可能吗？

![在此处输入图像描述](../Images/432925a6aa8ff29ea3ef3f8aa8a8cd40.png)

基本上，它是一个不透明度为 0.7 的白框，后面有一个背景图像。文本必须在白框中，但字母需要充当掩码以允许背景图像通过它们显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T11:36:12.960

这（理论上）可以通过图像掩码实现，目前这还不是官方标准的一部分。目前，掩码仅在 webkit 引擎中可用。

支持：[http ://caniuse.com/#search=mask](http://caniuse.com/#search=mask)

例如：[http ://trentwalton.com/2011/05/19/mask-image-text/](http://trentwalton.com/2011/05/19/mask-image-text/)

除此之外，在我的脑海中，我认为纯 CSS+HTML5 是不可能的。

关于你的例子......我认为这只是一个透明的`.png`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T13:04:17.780

我会使用一个透明的 PNG，它的宽度与其白盒容器的宽度完全相同。

[http://jsfiddle.net/lollero/mAQe4/](http://jsfiddle.net/lollero/mAQe4/)

我还选择使用重复的透明 PNG 图像作为白框的背景，以避免文本图像与其容器之间的透明度出现任何差异。

或者，您可以使用`opacity: o.8`in`#content`和`#footer`

HTML：

```
<div id="content-wrap">
    <div id="content">
      Lorem ipsum dolor sit amet.
    </div>

    <img id="the-image" src="http://img220.imageshack.us/img220/4051/62739191.png" alt="" />

    <div id="footer">
      Lorem ipsum dolor sit amet.
    </div>
</div>​ 
```

CSS：

```
html {
    background: url('http://placekitten.com/850/850') repeat top left;
}

#content-wrap {
    width: 200px;
    margin: 0px auto;
}

#content,
#footer {
    background: url('http://img267.imageshack.us/img267/2733/21138012.png')repeat top left;
}

#the-image { width: 100%; display: block; } 
```

与其他方法相比，这种方法的一个巨大优势是它确保了广泛的浏览器兼容性。当今最新版本的 Firefox、Safari、Chrome 和 IE 在使用透明 PNG 时都应该以相同的方式处理这个问题。此外，如果 IE 兼容性是一个优先事项，那么有一些方法可以让这个工作早在 IE6 中运行：

*   [http://www.jacklmoore.com/notes/ie-transparency-problems](http://www.jacklmoore.com/notes/ie-transparency-problems)
*   [http://allinthehead.com/retro/338/supersleight-jquery-plugin](http://allinthehead.com/retro/338/supersleight-jquery-plugin)

# iphone - 制作水平距离线IOS

> ID：10349818
> 
> 赞同：0
> 
> 时间：2012-04-27T11:30:09.283
> 
> 标签：iphone, ios, ipad, location, computer-vision

我想在相机视图上显示一个叠加层，为此我必须显示水平线来显示与当前位置的距离。我已经简化了这一点，这些线条将只显示一些 x 米单位的距离。这样每条下一条弧线/线都显示下一个 x 米外的点。

它必须是这样的：
![在此处输入图像描述](../Images/ed06ffaae6893b56299fd45678a6737a.png)

所以我知道这可以通过在水平底部使用线条并在其上应用一些包含旋转和位移的仿射变换来实现。关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:50:25.227

只需用适当的半径绘制弧线！

# ruby-on-rails-3.1 - bootstrap-sass 图像未显示，或如何覆盖 Gem 路径

> ID：10349822
> 
> 赞同：2
> 
> 时间：2012-04-27T11:30:22.177
> 
> 标签：ruby-on-rails-3.1, twitter-bootstrap

过去3天一直在为此苦苦挣扎，但无济于事。

在我的 Gemfile 中，我有：

```
gem 'sass-rails', '3.1.5' # there is a problem with 3.1.6 and we need to downgrade until they update it.
gem "bootstrap-sass" 
```

Bootstrap CSS 工作正常，但它不会在开发或生产模式下显示图像。

development.log 有关于 GET 错误的说明：

```
GET http://localhost:3000/railsAdminApi/assets/glyphicons-halflings.png 404 (Not Found) 
```

如您所见，它不应该使用项目名称作为路径的一部分。

在我的`bootstrap_and_overrides.css.scss`文件中，我有这个：

```
$iconSpritePath: asset-url("glyphicons-halflings.png", image) !default;
$iconWhiteSpritePath: asset-url('glyphicons-halflings-white.png', image); 
```

请注意，我使用`asset-url`而不是`image-path`按照这个[github 讨论](https://github.com/thomas-mcdonald/bootstrap-sass/issues/105)。

无论如何，我在这个变量中输入了什么（或者即使我将其改回`image-path`）都没有关系，路线将始终保持不变，无论我尝试什么，我都无法更改它。

如果我直接编辑 gem 文件的 vendor/assets/stylesheets/bootstrap/_sprites.css.scss 文件（这当然是一件可怕的事情）并放入`'assets/'`而不是 Sass 变量，浏览器将停止抱怨找不到图标但仍然不会显示图像。

它变得更加棘手：

将 Sass 变量放回 _sprites.css.scss 并预编译会在我的本地机器上显示生产模式下的图像（但不是开发模式）。但是，在远程服务器上，任何组合都不会在生产模式下显示图像。

因此，寻找任何帮助或卸载与引导程序相关的所有内容的方法（清理东西可能是一种选择，因为我确实使用了随后在本地计算机上卸载的其他引导程序 gem）。

谢谢。

**编辑**

长话短说，我必须删除 RVM 并安装 rbenv 才能让我的 gem 再次工作。这次我选择了`twitter-bootstrap-rails`更好的，更少的javascript错误，但我仍然对图像有同样的问题，无论是字形还是fontawesome字体。

似乎无论我将什么放入变量中（这次是尊重它们），它总是将项目路径预先`railsAdminApi`添加到路径中。

绝望中，我想我可以在我的`routes.rb`文件中添加一个路径，以便可以访问它正在寻找的路径，例如：

```
get 'railsAdminApi' => 'public/' 
```

当然，Rails 抱怨没有公共控制器，但我不知道如何在没有控制器的情况下创建静态路由。我什至尝试创建一个软链接，但这并没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:07:24.337

在您的控制器操作之一中记录资产前缀：

```
Rails.logger.info [:asset_prefix, YourAppName::Application.instance.config.assets.prefix].inspect 
```

然后访问操作。

如果您看到路径是“/assets”以外的任何内容，则一定是某些东西改变了该路径。我认为引导程序不会那样做。这可能是别的东西。

作为快速修复，将其添加到您的 config/application.rb：

```
config.assets.prefix = '/assets' 
```

为清楚起见，应在 附近添加`config.assets.enabled`。

[这在http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)第 5.4 节（更改资产路径）中有所提及。

是否可以找到应用程序/资产中的其他文件？`/railsAdminApi`如果仅在引导图标之前添加，我会感到惊讶。查看日志以查看正在使用哪些 url 来检索它们（或使用 firebug Net 面板）。

# c++ - C++ Boost 属性树 - 按文件更新树

> ID：10349827
> 
> 赞同：0
> 
> 时间：2012-04-27T11:30:32.893
> 
> 标签：c++, boost, boost-propertytree

我`Boost Property Tree`用来加载ini配置文件。
使用这个库，我可以将每个配置文件加载到一个`boost::property_tree::ptree`对象中。现在我想在一个`ptree`对象中加载多个配置文件。
我怎么能做这份工作？或者我怎样才能将`ptree`s 合并到一个对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:15:19.490

您的意思是将所有单独的ini文件视为一个大ini文件吗？如果是这样，您可以将每个单独的文件读入一个字符串，然后将所有字符串附加在一起。最后，将该字符串加载到`boost::property_tree::ptree`.

# php - 自定义 PHP 扩展不适用于 5.3

> ID：10349833
> 
> 赞同：2
> 
> 时间：2012-04-27T11:30:51.373
> 
> 标签：php, c++, c, php-5.3, php-extension

我有一个自定义 PHP 扩展，它比较二进制数据字符串中的每个字节。如果文件中同一位置的两个字节都打开（或大于 1），则同一位置的输出将打开。否则它关闭。扩展如下...

```
PHP_FUNCTION(compare_memory)
{
    char *memory1, *memory2;
    int memory1_length, memory2_length, return_length;
    int length;
    char *output;
    int x;

    zval *param;

    // MAKE SURE WE HAVE
    // string, (string_len,), string2, (string2_len) and length
    if(ZEND_NUM_ARGS() != 2) WRONG_PARAM_COUNT;

    // GET ARGUMENTS FROM PHP 
    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "ss", &memory1, &memory1_length, &memory2, &memory2_length) == FAILURE)
    {
        return;
    }

    if (memory1_length < memory2_length)
    {
        length = memory1_length;
        return_length = memory2_length;
    } else
    {
        length = memory2_length;
        return_length = memory1_length;
    }

    if ((output = emalloc(return_length * sizeof(int))) == NULL)
    {
        printf("Error on malloc\n");
        return;
    }

    // START COMPARING
    for(x=1;x<length;x++)
    {
        if (memory1[x] > 0 && memory2[x] == 1)
        {
            output[x] = memory1[x];
        }
    }

    RETVAL_STRINGL(output, return_length, 1);
    efree(output);
} 
```

我也有一个PHP实现如下......

```
function compare_memory($data1, $data2)
{
    $pack_one = pack("c", 1);
    $pack_zero = pack("c", 0);
    $strlen_data1 = strlen($data1);
    $strlen_data2 = strlen($data2);
    if ($strlen_data1 > $strlen_data2)
    {
        $strlen = $strlen_data1;
    } else
    {
        $strlen = $strlen_data2;
    }
    $output = "";

    for($x=0;$x<$strlen;$x++)
    {
        if ($strlen_data1 > $x)
        {
            $arr = unpack("cc", $data1[$x]);
            $d1 = $arr["c"];
        } else
        {
            $d1 = 0;
        }

        if ($strlen_data2 > $x)
        {
            $arr = unpack("cc", $data2[$x]);
            $d2 = $arr["c"];
        } else
        {
            $d2 = 0;
        }

        if ($d1 > 0 && $d2 == 1)
        {
            $output .= pack("c", $d1);
        } else
        {
            $output .= $pack_zero;
        }
    }

    return $output;
} 
```

这个扩展在 PHP 5.0 上运行良好（我知道它已经很老了）。我们最近升级到 5.3，这不再有效。但是 PHP 实现确实如此。

我想不同版本之间的 PHP 内部 API 有很多变化，包括“参数解析 API 统一将导致某些函数在类型杂耍方面表现得或多或少严格”。

您能在 PHP 扩展中看到任何明显的可能导致它在较新版本的 PHP 中无法工作的内容吗？我对 C（和 PHP API）的了解很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:16:05.810

我不确定您是否可以保证`emalloc`会返回用零初始化的内存。您可以尝试使用[ecalloc](http://php.net/manual/en/internals2.memory.management.php)代替。或者自己做：

```
if ((output = emalloc(return_length * sizeof(int))) == NULL)
{
    printf("Error on malloc\n");
    return;
}
memset(output, 0, return_length * sizeof(int) ); 
```

另外，我认为`emalloc` *永远不会*回来`NULL`

（我也不确定你为什么`for(x=1;x<length;x++)`从 1 而不是 0 开始，但也许是有原因的）

# iphone - 在应用程序中添加linkedIn和Twitter

> ID：10349834
> 
> 赞同：4
> 
> 时间：2012-04-27T11:31:00.087
> 
> 标签：iphone

我需要在我的应用程序中添加 Twitter 和 LinkedIn。推特和领英都使用 oAuth 文件，所以我无法添加，然后只能添加其中一个。当我尝试对两者使用相同的文件时，只有linkedIn工作并为twitter收到错误“令牌已过期”。

任何人都可以知道如何在同一个应用程序中添加两者。

# vb.net - 使用 VB.NET 杀死窗口中正在运行的进程

> ID：10349837
> 
> 赞同：2
> 
> 时间：2012-04-27T11:31:05.810
> 
> 标签：vb.net

我们如何使用 VB.NET 2.0 框架杀死窗口中的其他正在运行的进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:40:28.207

杀死所有记事本实例：

```
Process.GetProcessesByname("Notepad").ForEach(Sub(x) x.Kill()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T11:55:22.607

您只需通过 kill() 方法终止该进程。

```
 Dim processList() As Process
    processList = Process.GetProcessesByName(ListBox1.Items(ListBox1.SelectedIndex).ToString)

    For Each proc As Process In processList
        If MsgBox("Terminate " & proc.ProcessName & "?", MsgBoxStyle.YesNo, "Terminate?") = MsgBoxResult.Yes Then
            Try
                proc.Kill()
            Catch ex As Exception
                MessageBox.Show(ex.Message)
            End Try
        End If
    Next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T11:37:35.783

您可以使用[System.Diagnostics.Process.Kill](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)来完成此操作。您也可以在[如何使用 Vb.NET 或 C# 终止进程？](https://stackoverflow.com/questions/116090/how-do-i-kill-a-process-using-vb-net-or-c)（都是 C# 作为 VB.NET 的答案）。

查看[MSDN 页面：Process.Kill()](http://msdn.microsoft.com/en-US/library/system.diagnostics.process.kill.aspx)了解更多详细信息。

这是一个如何使用它的代码示例（取自 MSDN 的一部分）：

```
' First find the process(es) you want to kill, for example searching for the name
Dim notepadProcesses As Process() = Process.GetProcessesByName("notepad")

' Loop over the array to kill all the processes (using the Kill method)
Array.ForEach(notepadProcesses, Sub(p As Process) p.Kill()) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T11:38:16.850

您可以使用**获取进程****名称**`Process.GetProcessesByName Method`并使用.**`Process.Kill Method`**

 ****例子：**

```
Process[] processes = Process.GetProcessesByName("mspaint");

foreach (Process process in processes){
 process.Kill();
} 
```

***MSDN 条目：***

**[MSDN - Process.Kill 方法](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx#Y0)**

**[MSDN - Process.GetProcessesByName 方法](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.getprocessesbyname.aspx)**

***类似的问题：***

**[如何使用 Vb.NET 或 C# 终止进程？](https://stackoverflow.com/questions/116090/how-do-i-kill-a-process-using-vb-net-or-c)**

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-25T05:44:21.993

首先创建一个 a.bat 文件并将其存储到 bin 或您的项目文件夹中
在批处理文件中写入以下行

```
tskill (your process name) 
```

将其保存为 .bat

在编码中写下一行

```
System.Diagnostics.Process.Start("Your bat file path") 
```**

# c# - 使用 LIKE 表达式时 SQLite 中的土耳其字符

> ID：10349839
> 
> 赞同：7
> 
> 时间：2012-04-27T11:31:10.690
> 
> 标签：c#, java, android, sqlite

```
select *from urunler where musteri like %ir%; 
```

测试数据：

```
+---musteri---+---ID--+
+-------------+-------+ 
+---İrem------+---1---+ 
+---Kadir-----+---2---+ 
+---Demir-----+---3---+ 
```

返回结果：

```
Kadir
Demir 
```

如果使用`%İr%`，那么 İrem 正在返回，但 Kadir 和 Demir 没有返回。其他土耳其字符也有同样的问题，但没有任何确切的解决方案。我正在编写单声道安卓。

* * *

```
 [SQLiteFunction(Name = "TOUPPER", Arguments = 1, FuncType = FunctionType.Scalar)]
    public class TOUPPER: SQLiteFunction
    {
        public override object Invoke(object[] args)
        {
            return args[0].ToString().ToUpper();
        }
    }       

    [SQLiteFunction(Name = "COLLATION_CASE_INSENSITIVE", FuncType = FunctionType.Collation)]
    class CollationCaseInsensitive : SQLiteFunction {
        public override int Compare(string param1, string param2) {
            return String.Compare(param1, param2, true);
        }
    }       

TOUPPER.RegisterFunction(typeof(TOUPPER)); 
```

这样解决了，还要mono c#'使用库，这里我需要怎么做Android.Database.Sqlite.SQLiteDatabase

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T11:36:43.503

根据[SQLite 理解的 SQL](http://www.sqlite.org/lang_expr.html)，“LIKE 和 GLOB 运算符”部分：

> 默认情况下，LIKE 运算符对超出 ASCII 范围的 unicode 字符区分大小写。

这意味着“İ”不同于“i”和“I”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T12:21:50.443

此类问题的一种解决方案是将文本的规范化版本保存到另一列中。在文本之前`INSERT`，您将所有特殊字符替换为一些常见字符并将两个版本都放入数据库中。

你的桌子看起来像那样

```
ID   musteri     musteri_normalized
---  ----------  ------------------
1    İrem        Irem              
2    Kadir       Kadir             
3    yapılcağ    yapilcag 
```

现在您可以`LIKE`在规范化列上使用比较，并且仍然从数据库中返回真实文本。

```
SELECT musteri FROM table WHERE musteri_normalized LIKE '%ir%';
-> İrem, Kadir 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T08:29:36.713

```
public class Sqlite_DB
{   
    private SqliteConnection CON;
    public  SqliteCommand COM;

    string dbName = System.IO.Path.Combine(@"sdcard", @"testDB.db3");

    public Sqlite_DB()
    {
        TOUPPER.RegisterFunction(typeof(TOUPPER));
        CollationCaseInsensitive.RegisterFunction(typeof(CollationCaseInsensitive));
        CON=new SqliteConnection(String.Format("Data Source={0};Pooling={1}", dbName, false));
        COM=new SqliteCommand(CON);

    }
    public void close()
    {
        COM.Clone();
        CON.Clone();
    }
    public void open()
    {
        CON.Open();
    }

}

#region TOUPPER
[Mono.Data.Sqlite.SqliteFunction(Name = "TOUPPER", Arguments = 1, FuncType = FunctionType.Scalar)]
public class TOUPPER: Mono.Data.Sqlite.SqliteFunction
{
    public override object Invoke(object[] args)//characters for the growth of
    {
        return args[0].ToString().ToUpper();
    }
}       

[Mono.Data.Sqlite.SqliteFunction(Name = "COLLATION_CASE_INSENSITIVE", FuncType = FunctionType.Collation)]
class CollationCaseInsensitive : Mono.Data.Sqlite.SqliteFunction
{
    public override int Compare(string param1, string param2) //According to Turkish character sorting to patch
    {
        return String.Compare(param1, param2, true);
    }
} 
#endregion

public class TEST_X
{
    string strValue="ir";//test
    public void MUSTERI()
    {
        string srg="select * from "+Cari_._
                +"where TOUPPER(musteri) like '%"+strValue.toUpper()+"%';";

        try {
            Sqlite_DB d=new Sqlite_DB();
            d.open();

            d.COM.CommandText=srg;

            SqliteDataReader dr=d.COM.ExecuteReader();

            while (dr.Read()) 
            {

                Android.Util.Log.Error(">>>>",dr[0].ToString()+"<<<");

            }
            d.close();

        } catch (Exception ex) {
            Android.Util.Log.Error(">>>>",ex+"<<<");
        }

    }
}

ID   musteri    
---  ---------- 
1    İrem                   
2    Kadir                   
3    Demir

returning result:

-İrem

-Kadir

-Demir 
```

它适用于单声道...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-27T13:20:13.033

这不是最好的解决方案。但是我已经创建了一个解决方法来解决这个问题。

你可以在这里找到它：[http ://codelama.com/sqlite-turkce-harf-siralamasi-sqlite-turkish-collat​​ion/](http://codelama.com/sqlite-turkce-harf-siralamasi-sqlite-turkish-collation/)

因为这个解决方案需要 UTF8CI 命名排序规则，所以我也做了一点 SQLite Admin。也可以[在 github 上找到](https://github.com/coolwolf/SQLiteAdminUTF8CI)

我尝试使用 icu，从源代码编译等。这对我来说是最简单的解决方案。我希望它有所帮助。

使其工作的步骤： 1\. 在命名空间中的任何位置添加此代码： `[SQLiteFunction(FuncType = FunctionType.Collation, Name = "UTF8CI")] public class SQLiteCaseInsensitiveCollation : SQLiteFunction { private static readonly System.Globalization.CultureInfo _cultureInfo = System.Globalization.CultureInfo.CreateSpecificCulture("tr-TR"); public override int Compare(string x, string y) { return string.Compare(x, y, _cultureInfo, System.Globalization.CompareOptions.IgnoreCase); } }`

2.  在您的 program.cs 中，在打开第一个表单之前插入以下代码： `System.Data.SQLite.SQLiteFunction.RegisterFunction(typeof(SQLiteCaseInsensitiveCollation));`

现在，您将拥有土耳其语排序规则。要使其正常工作，您必须在文本列定义之后添加“COLLATE UTF8CI”。像这样： `CREATE TABLE `maytable` ( `id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, `mytextfield1` TEXT NULL COLLATE UTF8CI, `mytextfield2` TEXT)`

如果您收到“No such collat​​ion: UTF8CI”，请在查询末尾添加“COLLATE BINARY”。像这样： `select * from mytable order by mytextfield **COLLATE BINARY**`

# c++ - 编辑 rc 文件，然后在 VC 对话框向导中打开它时，由于 TBS_NOTIFYBEFOREMOVE 出现错误 RC2104

> ID：10349841
> 
> 赞同：1
> 
> 时间：2012-04-27T11:31:18.353
> 
> 标签：c++, visual-studio-2010, windows-7, mfc, slider

我有一个基于 VC++/MFC 对话框的项目。在这些对话框中，我使用了一些“移动前通知”为 true 的滑块。有时，我更喜欢在文本编辑器中手动编辑相关的 .rc 文件，而不是使用 VS 对话框向导来编辑它们。

问题是，在编辑 .rc 文件后，当我尝试再次在 VS 向导中打开对话框时，出现此错误：“错误 RC2104：未定义的关键字或键名：TBS_NOTIFYBEFOREMOVE”我仍然可以成功编译项目，但我不能再用 VS 向导打开项目资源了。解决方法是手动删除关键字，然后我可以使用向导重新打开资源，但我必须再次将每个滑块“移动前通知”设置设置为 true...

尽管项目仍然可以正常编译，但我不明白为什么会出现此错误。如果可能的话，我想避免错误并且每次都必须通过这个解决方法。有谁知道如何避免这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:21:33.217

这是因为您选择的 _WIN32_WINNT 宏的值。TBS_NOTIFYBEFOREMOVE 样式标志仅在更高版本的 Windows 中可用。您必须至少选择 0x501。或者换句话说，您的程序将无法在 Windows 2000（版本 0x500）或更早版本上运行。这些天这不是什么大问题，所以提高价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-13T09:12:11.873

我加

```
#include <windows.h> 
```

在 Resource.h 中，并解决了它！

# c - C如何知道我的字符串的结尾？

> ID：10349842
> 
> 赞同：7
> 
> 时间：2012-04-27T11:31:32.393
> 
> 标签：c, string

我有一个程序，我想从字符串中删除空格。[我想找到一种优雅的方式来做到这一点，所以我在一个论坛中](http://www.daniweb.com/software-development/c/threads/21071/what-function-can-delete-a-space-in-a-string)找到了以下代码（我对其进行了一些更改，以便更好地阅读）：

```
char* line_remove_spaces (char* line)
{
    char *non_spaced = line;
    int i;
    int j = 0;
    for (i = 0; i <= strlen(line); i++)
    {
        if ( line[i] != ' ' )
        {
            non_spaced[j] = line[i];
            j++;
        }
    }
    return non_spaced;
} 
```

如您所见，该函数接受一个字符串，并使用相同的分配内存空间，仅选择非空格字符。有用！

无论如何，根据维基百科，C 中的字符串是“[空终止字符串](http://en.wikipedia.org/wiki/Null-terminated_string)”。我一直这么想，一切都很好。但问题是：我们没有在字符串末尾放置“空字符” `non_spaced`。不知何故，编译器知道它以“non_spaced”字符串更改的最后一个字符结束。它是怎么知道的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T11:39:34.290

这不是魔术发生的。您的代码中有：

```
for (i = 0; i <= strlen(line); i++)
              ^^ 
```

循环索引`i`一直运行到`strlen(line)`该索引处，字符数组中有一个 nul 字符，并且它也会被复制。结果，您的最终结果在所需索引处具有 nul 字符。

如果你有

```
for (i = 0; i < strlen(line); i++)
              ^^ 
```

那么您必须手动将 nul 字符设置为：

```
for (i = 0; i < strlen(line); i++)
{
    if ( line[i] != ' ' )
    {
        non_spaced[j] = line[i];
        j++;
    }
}
// put nul character
line[j] = 0; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T12:02:11.787

其他人已经回答了你的问题，但这里是相同代码的更快，也许更清晰的版本：

```
void line_remove_spaces (char* line)
{
  char* non_spaced = line;

  while(*line != '\0')
  {
    if(*line != ' ')
    {
      *non_spaced = *line;
      non_spaced++;
    }

    line++;
  }

  *non_spaced = '\0';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T11:38:36.440

循环使用`<= strlen`，因此您也将复制空终止符（位于`i == strlen(line)`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T11:35:47.207

你可以试试。在处理只包含一个空格的字符串时对其进行调试：`" "`. 仔细观察索引会发生什么`i`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T11:37:00.643

你怎么知道它“知道”？最可能的情况是您只是对未定义的行为感到幸运，并且在 end`'\0'`的有效字节之后有一个 -character `line`。

您也很有可能在最后没有看到空格，这些空格可能会在碰到流浪“幸运`'\0'`”之前打印出来。

其他几点：

*   无需使用索引编写此内容。
*   `strlen()`调用每个循环迭代并不是很有效。
*   您可能想使用`isspace()`删除更多的空白字符。

这是我将如何编写它，使用`isspace()`和指针：

```
char * remove_spaces(char *str)
{
  char *ret = str, *put = str;

  for(; *str != '\0'; str++)
  {
    if(!isspace((unsigned char) *str)
      *put++ = *str;
  }
  *put = '\0';

  return ret;
} 
```

请注意，这*确实*终止了字符串的无空格版本，因此返回的指针保证指向一个有效的字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T11:42:46.803

你的函数的字符串参数是空终止的，对吧？并且在循环中，原始字符串的空字符也被复制到不带空格的返回字符串中。所以非空格字符串实际上也是空终止的！

对于您的编译器，空字符只是另一个没有得到任何特殊处理的二进制数据，但它被字符串 API 用作方便的字符来轻松检测字符串的结尾。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T13:38:10.200

如果您使用，则包含`<= strlen(line)`的长度使您的程序可以工作。您可以使用调试和运行分析。`strlen(line)``'\0'`

# redmine - 如何将用户添加到 redmine 中的项目？

> ID：10349849
> 
> 赞同：3
> 
> 时间：2012-04-27T11:31:58.153
> 
> 标签：redmine

我有用户。我有项目。我去项目->设置->成员

我收到这条消息

```
No data to display 
```

那么...如何将用户添加到项目中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-24T10:23:51.273

如果你想添加一个新用户到Redmine，你必须去“**管理**”（在页面顶部）->“**用户**”。

如果要将现有用户分配给项目，则必须先选择项目，然后转到“**设置**”->“**成员**”。在那里，您可以分配用户及其在项目中的角色。

# magento - 符合欧盟标准的 Magento 1.7“Cookie 限制模式”

> ID：10349850
> 
> 赞同：4
> 
> 时间：2012-04-27T11:31:57.883
> 
> 标签：magento, cookies

`Magento 1.7`添加了一个`Cookie Restriction Mode`，激活时会在标题上方添加一个块，请求同意设置 cookie。

但是，无论是否`Allow`选择，它似乎都设置了通常的 cookie。如果您单击`Allow`它，只需为此设置一个新的 cookie，并且不再显示警告。

有没有人考虑过修改它以便它不会设置初始cookie，或者添加第二个`Deny`选项来删除它们？

另一种选择似乎是更改文本，以便假设继续使用该网站作为默认接受 cookie？

你将如何/将如何解决这个问题？

> *更新：*嗯，他们在第 11 小时更改了新规则，强烈倾向于默认接受，这简化了整个过程，并且似乎使 Magento 模块足够。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:17:43.417

好吧，他们在第 11 个小时更改了新规则，强烈倾向于默认接受，这简化了整个过程，并且似乎使 Magento 模块足够。

事实上，很多网站甚至都不在乎弹出窗口，而是选择了一个链接，或者至多是一个短暂可见的手风琴。

# php - 使用 jQuery/PHP/AJAX/JSON 的 Lucene/Solr 即时开发

> ID：10349852
> 
> 赞同：1
> 
> 时间：2012-04-27T11:32:04.597
> 
> 标签：php, javascript, jquery, ajax, json

我是 JQuery、AJAX、PHP 等 UI 技术的新手。

我正在构建类似 Google Instant 的功能。我在后端的搜索引擎基础设施非常快，即使是 Tera Bytes 的数据也能以超快的速度返回结果。

我在一个类中有一个 PHP 函数，它返回一个数组：

```
solrsearch.php

    class SolrSearch{
        ...
        ...
        public function find( $q ){
           ...
           ...
           return $found;
        }
    }

$found is a key value pair something like documentID=>Data 
```

当我用测试字符串在控制台（而不是浏览器）上干运行它并且不使用 $q 输入变量时，一切似乎都很好，我打印 $found 并打印值。

现在我的嵌入 javascript 的 html 文件看起来像这样，所以基本上在这里我捕获文本框上的每个按键并执行获取请求

```
testjson.html

    <html>
    ...
    <body>

    <div align="center"><p><font size = 7 face="Verdana"> Search: <input type="text" id="term" size = 60 style="font-size:22pt"/>
    <table id="results">
    </table>
    <script>
    $(document).ready( function() {
    $('#term').keyup( function() {
      $.get('search_json.php?q='+escape($('#term').val()), function(data) {
        html = '<table id="results">';
        $.each( data, function( index, val ) {
            html += '<tr><td class="document"><b>'+index.key+'</b>&nbsp;';
            html += 'Dated '+val.value+'</td></tr>';
        } );
        html += '</html>';
        $('#results').replaceWith( html );
      } );
    } );
    } );
    </script>
    ...
    ...
    </html> 
```

最后这是我的

```
search_json.php

$s = new SolrSearch();
print json_encode( $s->find( $_REQUEST['q'] ) ); 
```

即使是 json 编码的字符串也可以正常工作，并且可以在控制台上打印 json（而不是在浏览器上）

这是我面临的问题：在浏览器上，当我运行 testjson.html 时，它只有一个文本框，我输入了一些字符串，所以我没有在浏览器上显示任何结果。当我使用 Fiddler（HTTP 调试代理）调试它时，我可以在其中看到 AJAX 获取请求。

任何帮助，将不胜感激。如果还有什么我可以添加到需要的问题中，我将非常乐意这样做。

**编辑：**

我在 solrsearch.php 的 find 函数中进一步调试并打印了 $q ，它没有打印值，这意味着该值没有从 search_json.php 传递，但是我可以在 Fiddler 上看到 GET 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:37:23.740

我猜这一行：

*   `html += '</html>';`

应该

*   `html += '</table>';`

顺便说一句，而不是使用`$('#results').replaceWith( html );`try with`$('#results').html( html );`

编辑：而不是 $.get()，尝试使用 $.ajax()：

```
$.ajax({
   url: 'search_json.php',
   type: 'POST',
   data: { q: escape($('#term').val() },
}).done(function(resp) {
   //Your html code with response options
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T14:28:23.797

如果你的前端使用 HTML，你一定要看看 AJAX-SOLR

AJAX Solr 是一个 JavaScript 库，用于为 Apache Solr 创建用户界面

*   使用[演示站点](http://evolvingweb.github.com/ajax-solr/examples/reuters/index.html)

*   按照[教程](http://wiki.github.com/evolvingweb/ajax-solr/reuters-tutorial)

*   浏览[维基](http://wiki.github.com/evolvingweb/ajax-solr)

*   阅读[文档](http://evolvingweb.github.com/ajax-solr/docs/index.html)

*   探索[代码](http://github.com/evolvingweb/ajax-solr)

# c++ - 如何处理错误的数据类型输入

> ID：10349857
> 
> 赞同：29
> 
> 时间：2012-04-27T11:32:19.187
> 
> 标签：c++, input, types, error-handling

在 C++ 中，如何处理错误的输入？就像，如果程序要求输入一个整数，当你输入一个字符时，它应该能够做一些事情，然后循环重复输入，但是当你输入一个整数时，循环进入无限期，反之亦然。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-27T11:34:29.053

程序进入无限循环的原因`std::cin`是由于输入失败而设置了错误的输入标志。要做的是清除该标志并丢弃输入缓冲区中的错误输入。

```
//executes loop if the input fails (e.g., no characters were read)
while (std::cout << "Enter a number" && !(std::cin >> num)) {
    std::cin.clear(); //clear bad input flag
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); //discard input
    std::cout << "Invalid input; please re-enter.\n";
} 
```

请参阅[C++ FAQ](https://isocpp.org/wiki/faq/input-output#istream-and-ignore)和其他示例，包括在条件中添加最小值和/或最大值。

另一种方法是将输入作为字符串获取，然后使用`std::stoi`允许检查转换的其他方法将其转换为整数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-25T09:24:24.290

票数最高的答案很好地涵盖了解决方案。

除了那个答案之外，这可能有助于更好地可视化正在发生的事情：

```
int main()

    int input = 1;//set to 1 for illustrative purposes
    bool cinState = false;
    string test = "\0";
    while(input != -1){//enter -1 to exit
        cout << "Please input (a) character(s): ";//input a character here as a test
        cin >> input; //attempting to input a character to an int variable will cause cin to fail
        cout << "input: " << input << endl;//input has changed from 1 to 0
        cinState = cin;//cin is in bad state, returns false
        cout << "cinState: " << cinState << endl;
        cin.clear();//bad state flag cleared
        cinState = cin;//cin now returns true and will input to a variable
        cout << "cinState: " << cinState << endl;
        cout << "Please enter character(s): ";
        cin >> test;//remaining text in buffer is dumped here. cin will not pause if there is any text left in the buffer.
        cout << "test: " << test << endl;
    }
    return 0;    
} 
```

将缓冲区中的文本转储到变量中并不是特别有用，但它有助于可视化为什么`cin.ignore()`是必要的。

我还注意到输入变量的更改，因为如果您在`while`循环条件或 switch 语句中使用输入变量，它可能会陷入死锁，或者它可能会满足您不期望的条件，这可以调试起来更加混乱。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-04-27T11:36:43.317

测试输入以查看它是否是您的程序所期望的。如果不是，请提醒用户他们提供的输入是不可接受的。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-04-27T11:40:54.887

如果 ascii 值在 65 到 90 或 97 到 122 之间，您可以通过 ASCII 值检查它是否是字符。

# css - 如何斜切元素的角？

> ID：10349867
> 
> 赞同：3
> 
> 时间：2012-04-27T06:58:34.947
> 
> 标签：css

我希望元素的角基本上被切断。该元素具有纯色背景，而其父元素具有图像作为背景。该元素的高度未知。CSS 的border-radius 属性对我没有帮助，因为它会舍入它。我找到[了一个有帮助的 jQuery 插件](http://jquery.malsup.com/corner/)，但它不考虑背景图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T14:25:08.393

你想要的是这个： http: [//lea.verou.me/2011/03/beveled-corners-negative-border-radius-with-css3-gradients/](http://lea.verou.me/2011/03/beveled-corners-negative-border-radius-with-css3-gradients/)

全部在 CSS 中。

```
div {
    background: #c00; /* fallback */
    background:
        -moz-linear-gradient(45deg,  transparent 10px, #c00 10px),
        -moz-linear-gradient(135deg, transparent 10px, #c00 10px),
        -moz-linear-gradient(225deg, transparent 10px, #c00 10px),
        -moz-linear-gradient(315deg, transparent 10px, #c00 10px);
    background:
        -o-linear-gradient(45deg,  transparent 10px, #c00 10px),
        -o-linear-gradient(135deg, transparent 10px, #c00 10px),
        -o-linear-gradient(225deg, transparent 10px, #c00 10px),
        -o-linear-gradient(315deg, transparent 10px, #c00 10px);
    background:
        -webkit-linear-gradient(45deg,  transparent 10px, #c00 10px),
        -webkit-linear-gradient(135deg, transparent 10px, #c00 10px),
        -webkit-linear-gradient(225deg, transparent 10px, #c00 10px),
        -webkit-linear-gradient(315deg, transparent 10px, #c00 10px);
}

div.round {
    background:
        -moz-radial-gradient(0 100%, circle, rgba(204,0,0,0) 14px, #c00 15px),
        -moz-radial-gradient(100% 100%, circle, rgba(204,0,0,0) 14px, #c00 15px),
        -moz-radial-gradient(100% 0, circle, rgba(204,0,0,0) 14px, #c00 15px),
        -moz-radial-gradient(0 0, circle, rgba(204,0,0,0) 14px, #c00 15px);
    background:
         -o-radial-gradient(0 100%, circle, rgba(204,0,0,0) 14px, #c00 15px),
         -o-radial-gradient(100% 100%, circle, rgba(204,0,0,0) 14px, #c00 15px),
         -o-radial-gradient(100% 0, circle, rgba(204,0,0,0) 14px, #c00 15px),
         -o-radial-gradient(0 0, circle, rgba(204,0,0,0) 14px, #c00 15px);
    background:
         -webkit-radial-gradient(0 100%, circle, rgba(204,0,0,0) 14px, #c00 15px),
         -webkit-radial-gradient(100% 100%, circle, rgba(204,0,0,0) 14px, #c00 15px),
         -webkit-radial-gradient(100% 0, circle, rgba(204,0,0,0) 14px, #c00 15px),
         -webkit-radial-gradient(0 0, circle, rgba(204,0,0,0) 14px, #c00 15px);
}

div, div.round {
    background-position: bottom left, bottom right, top right, top left;
    -moz-background-size: 50% 50%;
    -webkit-background-size: 50% 50%;
    background-size: 50% 50%;
    background-repeat: no-repeat;
}

/* Ignore the CSS from this point, it's just to make the demo more presentable */
body {
    background: #444 url('http://leaverou.me/ft2010/img/darker_wood.jpg') bottom;
    font-family: sans-serif;
}

div {
    width: 500px;
    margin:15px auto;
    padding:13px 15px;
    color: white;
    line-height:1.5;
}

p:first-of-type { margin-top: 0 }
p:last-of-type { margin-bottom: 0} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-18T19:51:19.260

# -= 2017 年 =-

这是适用于所有常青浏览器的更新和升级版本。

[https://codepen.io/aternus/pen/mqqXdK](https://codepen.io/aternus/pen/mqqXdK)

它甚至允许您轻松指定自定义背景颜色/图像。只需添加另一个背景层（作为最后一个）。

```
/* Demo Styling */
body {
  background: #333333;
  padding: 2rem;
}
/* CSS */
.container {
  padding: 1rem 2rem;
  color: #ffffff;
  background-color: transparent;
  background-image: linear-gradient(180deg, #ffdc00, #ffdc00)
    ,linear-gradient(225deg, #ffdc00, #ffdc00)
    ,linear-gradient(0deg, #ffdc00, #ffdc00)
    ,linear-gradient(90deg, #ffdc00, #ffdc00)
    ,linear-gradient(135deg, transparent 9px, #ffdc00 10px, #ffdc00 12px, transparent 12px)
    ;
  background-position: top right
    ,top right
    ,bottom left
    ,bottom left
    ,top left
    ;
  background-size: calc(100% - 15px) 2px
    ,2px 100%
    ,100% 2px
    ,2px calc(100% - 15px)
    ,15px 15px
    ;
  background-repeat: no-repeat;
}
```

```
<div class="container">
  Lorem that ipsum, dolor that amet
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T07:20:36.617

不完全确定这个问题，但也许你指的是`border-style`？

`border-style: outset`产生斜边。

更多信息： [http ://www.w3schools.com/css/css_border.asp](http://www.w3schools.com/css/css_border.asp)

# actionscript-3 - as2 中的 getURL()

> ID：10349870
> 
> 赞同：0
> 
> 时间：2012-04-27T11:33:07.663
> 
> 标签：actionscript-3, flash-cs3

你好朋友我的代码太大你可以在这里下载zip文件[http://www.filefactory.com/file/6bvfmmx3zpet/n/New_folder_4_rar](http://www.filefactory.com/file/6bvfmmx3zpet/n/New_folder_4_rar)

我已经从互联网上下载了这段代码..这工作正常问题是当这段代码结束时网页跳转到`URL`我试图放置的

```
getURL("http://www.adobe.com","_self"); 
```

但它不工作可能是我不知道把这段代码放在哪里....请帮助我

**编辑**

你可以在这里阅读我的代码.. [jsfiddle.net/uM9zr](http://jsfiddle.net/uM9zr)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:42:21.010

我无法从您的问题中判断您是使用 AS2 还是 AS3，但 AS3 不支持 getURL：

[ActionScript 3 - GetURL 发生了什么？](http://www.schoolofflash.com/2008/04/actionscript-3-tutorial-what-happened-to-geturl/ "ActionScript 3 - GetURL 发生了什么？")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:57:49.203

尝试用“_blank”替换“_self”。这将在新选项卡中打开链接，但应该可以解决 URL 无法打开的问题。

米奇也应该阅读标题。AS2 是您问题中非常明显的一部分。

# html - HTML/CSS：内容增长大于 960 网格

> ID：10349872
> 
> 赞同：0
> 
> 时间：2012-04-27T11:33:11.223
> 
> 标签：html, css, 960.gs

我正在使用[960 网格系统](http://960.gs)和`container_16`格式。出于某种原因，我的一个容器比其他容器稍大。这是在扼杀我的风水。

我在这里突出显示了错误：

![错误](../Images/fdaf25dce0ea8cc6c72d22e3f442fc58.png)

可以在[http://rcnhca.org.uk/sites/first_steps/](http://rcnhca.org.uk/sites/first_steps/)看到实时预览，注意顶部的面包屑是如何比任何其他元素向右移动几个像素的？

有罪元素具有以下标记：

```
<div class="container_16">
                <div class="grid_16" id="breadcrumbs">

                    <a href="http://rcnhca.org.uk/sites/first_steps" id="home"></a>
                    <ul id="parent" class="grid_15 omega">
                    <li><a href="http://rcnhca.org.uk/sites/first_steps/">Select a topic</a><ul class="child"><li><a href="http://rcnhca.org.uk/sites/first_steps/getting-started/">Getting started</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/communication/">Communication</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/health-safety-and-security/">Health, Safety and Security</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/personal-and-people-development/">Personal and people development </a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/quality/">Quality</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/equality-diversity-and-rights/">Equality, diversity and rights </a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/clinical-skills/">Clinical skills</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/additional-material/">Additional material</a></li></ul></li>                      </ul>
                </div>

                <div id="supplements" class="grid_16">
                    <div class="left">
                        <a href="#" class="button alpha"><img src="http://rcnhca.org.uk/sites/first_steps/wp-content/themes/megaamazing/library/images/book-icon.png" alt="book icon">View competencies checklist</a>
                    </div>
                    <div class="right">
                        <a href="#" class="button alpha bold"><img src="http://rcnhca.org.uk/sites/first_steps/wp-content/themes/megaamazing/library/images/rcn-icon.png" alt="rcn icon">Join the RCN</a>
                        <a href="#" class="button omega">Reasons to joins</a>

                    </div>
                </div>
            </div> 
```

它是CSS：

```
#breadcrumbs {
    display: block;
    position: relative;
    z-index: 4;
    height: 39px;
    padding-bottom: 3px;
    background: #ffffff;
    border: 0px solid;
    border-left: #3a90a7 2px solid;
    border-right: #3a90a7 2px solid;
    border-bottom: #3a90a7 2px solid;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
}

#breadcrumbs ul {
    list-style: none; 
    list-style-image: none; 
    margin: 0;
}

#breadcrumbs #home{
    display: block;
    height: 39px;
    width: 60px;
    float: left;
    background-image: url(library/images/home_icon.png);
    background-repeat: no-repeat;
    background-position: 19px center;   
    text-indent: -999em;
}

#breadcrumbs ul#parent {
    display: block;
    height: 39px;
    float: right;
    right: 3px;
    position: relative;
    background: #f38630;
    -webkit-box-shadow: inset 0px -2px 0px 0px #cf7229;
    -moz-box-shadow: inset 0px -2px 0px 0px #cf7229;
    box-shadow: inset 0px -2px 0px 0px #cf7229;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
}

#breadcrumbs ul#parent li {
    position: relative;
    height: 39px;
    float: left;
    min-width: 1px; /* required to fix Opera bug */
    padding: 0 47px 0 15px;
    background-image: url(library/images/breadcrumb_seperator.png);
    background-repeat: no-repeat;
    background-position: right;
    line-height: 39px;
    zoom: 1;
}

#breadcrumbs ul#parent li a {
    display: block;
    height: 42px;
    position: relative;
    font-size: 15px;
    font-weight:900;
    color: #ffffff;
    text-decoration: none;
    text-shadow: 0px 2px 0px #cf7229;
}

#breadcrumbs ul li a:visited {
    color: #ffffff;
}
#breadcrumbs ul#parent li:first-child ul {
    left: -5px;
}
#breadcrumbs ul#parent li ul {
    position: absolute;
    z-index: 9998;
    left: -28px;
    top: 42px;
    background: #ffffff;
    border-left: #3a90a7 2px solid;
    border-right: #3a90a7 2px solid;
    border-bottom: #3a90a7 2px solid;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    padding: 0 3px 0 3px;
    list-style-position: outside;
    min-width: 200px;
    width: auto;
    -webkit-box-shadow: 0px 6px 6px -6px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 0px 6px 6px -6px rgba(0, 0, 0, 0.5);
    box-shadow: 0px 6px 6px -6px rgba(0, 0, 0, 0.5);
}

.js #breadcrumbs ul#parent li ul {
    display:none;
}

.no-js #breadcrumbs ul#parent li ul {
    left: -999em;
}

#breadcrumbs ul#parent li ul li {
    float: none;
    display: block;
    position: relative;
    height: 26px;
    margin-bottom: 3px;
    padding: 0 15px;
    background-image: url(library/images/arrow-icon.png);
    background-position: -25px 50%;
    background-repeat: no-repeat;
    background-color: #738793;
    border-radius: 5px; 
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px;
    line-height: 26px;
    white-space: nowrap;
    zoom: 1;
}

#breadcrumbs ul#parent li ul li a{
    display: block;
    width: auto;
    color: #ffffff;
    text-decoration: none;
    text-shadow: none;
    font-weight: 100;
}

#breadcrumbs ul#parent li ul li.active, #breadcrumbs ul#parent li ul li:hover{
    background-color: #3393b5;
}

#breadcrumbs ul#parent li ul li.active, .no-js #breadcrumbs ul#parent li ul li:hover{
    background-position: 0px 50%;
    text-indent: 10px;
}

.no-js #breadcrumbs ul#parent li:hover ul, .no-js #breadcrumbs ul#parent li:focus ul {
    left: -5px;
} 
```

谁能帮我把它打成形状？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:40:41.747

这是因为您为边框提供`#breadcrumbs`了额外的宽度。`4px`

```
border-left: #3a90a7 2px solid;
border-right: #3a90a7 2px solid;`. 
```

`grid_16`实际上是而`944px`不是预期的`940px`，因此存在差异。

不过，您需要重新调整标记。

```
<div class="grid_16">
<div id="breadcrumbs">
<!-- etc -->
</div>
</div> 
```

您还必须调整`home`按钮的大小。给它一个类`grid_1 alpha`并`width:54px`从你的 CSS 中删除。应该不错

# class - Smarty foreach：为每次迭代添加类

> ID：10349873
> 
> 赞同：0
> 
> 时间：2012-04-27T11:33:12.900
> 
> 标签：class, foreach, smarty, add

我在这样的 tpl 文件中有一个 foreach 循环代码：

```
[{foreach from=$oView->getArticleList() item=actionproduct name=test_articleList}]
[{include file="inc/product_alt.tpl"  product=$actionproduct testid="action_"|cat:$actionproduct->oxarticles__oxid->value test_Cntr=$smarty.foreach.test_articleList.iteration}]
[{/foreach}] 
```

foreach 循环中包含的文件`product_alt.tpl`包含一个简单的 div 容器，并为每个产品显示。现在我正在寻找一种解决方案，为每个第二个 div 容器添加一个额外的类。

我用谷歌搜索了一下，发现（我认为是这样）我必须使用偶数和奇数。但是我坚持如何将它准确地应用于 foreach 循环，目标是每个 secod div 容器都获得一个额外的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:54:18.970

您正在寻找`cycle`. 例如，您可以做的是`$class`在您的 include 语句中分配一个额外的变量，该变量会被分配更改，如下所示：

```
 {cycle values='yourClass1,youClass2' assign='class'} 
```

这可能是您奇怪/偶数想法的来源：手册说

```
 {cycle values='odd,even' assign='class'} 
```

但这些只是价值观。Anyeay，您的变量“类”现在具有交替的“yourClass1”和“yourClass2”（或奇数/偶数）作为内容。如果您将其分配给您的包含，然后添加类似

```
<div class="{$class}"> 
```

你得到交替的类。其中之一就是你想要的。另一个可以是空的..

查看循环手册：[http ://www.smarty.net/docsv2/en/language.function.cycle](http://www.smarty.net/docsv2/en/language.function.cycle)

# css - 我可以给一个背景添加背景吗 在博客上？

> ID：10349883
> 
> 赞同：3
> 
> 时间：2012-04-27T11:34:21.553
> 
> 标签：css, blogger

我想要做的是将 CSS 背景添加到`<pre>`.

这样做可以吗？

```
pre{
    background-color: EBECE4; 
} 
```

还是我需要多做一点？我尝试这样，但我没有工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T11:37:01.617

是的，你可以，但把颜色用“#”

```
pre{
    background-color: #EBECE4; 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T11:36:40.883

差不多好了：

```
pre{
    background-color: #EBECE4; 
} 
```

# c# - 如何解决将 Moq 与 IDataReader 一起使用的问题

> ID：10349884
> 
> 赞同：4
> 
> 时间：2012-04-27T11:34:25.590
> 
> 标签：c#, moq, automapper

我遇到了关于 IDataReader 的 Moq 和 Automapper 问题。我在stackoverflow上找到了一个例子并修改了代码。

```
 public static IDataReader MockIDataReader<T>(List<T> ojectsToEmulate) where T : class
    {
        var moq = new Mock<IDataReader>();

        // This var stores current position in 'ojectsToEmulate' list
        var count = 0;

        moq.Setup(x => x.Read())
            // Return 'True' while list still has an item
            .Returns(() => count < ojectsToEmulate.Count)
            // Go to next position
            .Callback(() => count++);

        var properties = typeof (T).GetProperties();
        foreach (PropertyInfo t in properties)
        {
            var propName = t.Name;
            moq.Setup(x => x[propName]).Returns(() => ojectsToEmulate[count].GetType().GetProperty(propName).GetValue(ojectsToEmulate[count],null));
        }
        return moq.Object;
    }
} 
```

我的映射：

```
Mapper.Configuration.CreateMap(typeof(IDataReader), typeof(IEnumerable<T>));
var result = Mapper.Map<IDataReader, IEnumerable<T>>(reader); 
```

我在这里遇到的问题是我的结果有 1 个结果是 cityModel 但它的所有属性都是空的。如果我从像 reader["name"] 这样的模拟读者那里检查值，我得到了“Alingsås”值，所以模拟是正确的，但 Automapper 接缝有问题。我使用传递给我的方法的对象列表来模拟它。

```
var cityModel = new CityModel();
cityModel.Name = "Alingsås";
cityModel.Id = "SE";
cityModel.CountryId = "SE";

var cityModels = new List<CityModel>();
cityModels.Add(cityModel);

 _fakeReader = MockTester.MockIDataReader(cityModels); 
```

代码工作正常，没有抛出异常，但映射器给了我一个没有值的对象。我可以在调试器中看到我的反射代码有效，但看起来我的 x["Name"] 不是从 IDataReader 调用的 Automapper 方法？或者是吗？

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:33:32.737

Automapper 在内部使用[int 索引器](http://msdn.microsoft.com/en-us/library/9y45x0s9.aspx)，`IDataReader`因此您需要调用`Setup`它而不是`Item[String]`.

检查 Automapper 的源代码，您需要设置一些额外的方法以使其工作：

```
//...
var index = 0;
foreach (PropertyInfo t in properties)
{
    var propName = t.Name;
    int index1 = index; // avoid access to modified closure
    moq.Setup(x => x.GetFieldType(index1)).Returns(t.PropertyType);
    moq.Setup(x => x.GetName(index1)).Returns(propName);
    moq.Setup(x => x[index1])
        .Returns(ojectsToEmulate[count]
                 .GetType()
                 .GetProperty(propName).GetValue(ojectsToEmulate[count], null));
    index++;
}

moq.Setup(x => x.FieldCount).Returns(properties.Length);
//... 
```

# sql - 在 Postgres 触发器过程中执行的查询是否在同一个事务中运行？

> ID：10349886
> 
> 赞同：3
> 
> 时间：2012-04-27T11:34:33.503
> 
> 标签：sql, postgresql, stored-procedures, triggers, postgresql-9.1

我有一个`BEFORE DELETE`触发器，它使用`SPI_exec`.

做这些`INSERT`查询是否与执行原始删除的事务在同一事务中运行？因此，删除和所有插入会一起回滚或提交吗？

如果没有，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T12:27:16.823

是的，触发器中的所有内容都与触发事件在同一个事务中。

与问题没有直接关系，但通常您希望将副作用放在`AFTER`触发器中，而不是`BEFORE`触发器中。

# python - (python) 将输出格式化为变量并优化编写不佳的脚本

> ID：10349889
> 
> 赞同：1
> 
> 时间：2012-04-27T11:34:40.170
> 
> 标签：python, formatting, nltk

我根据自己的需要修改了以下脚本（原文在[完全可解析字典/词库](https://stackoverflow.com/questions/6103907/fully-parsable-dictionary-thesaurus)中找到，由 samplebias [在 samplebias，非常有用，谢谢 :)]）：

```
import textwrap
from nltk.corpus import wordnet as wn

POS = {
    'v': 'verb', 'a': 'adjective', 's': 'satellite adjective', 
    'n': 'noun', 'r': 'adverb'}

def info(word, pos=None):
    for i, syn in enumerate(wn.synsets(word, pos)):
        syns = [n.replace('_', ' ') for n in syn.lemma_names]
        ants = [a for m in syn.lemmas for a in m.antonyms()]
        ind = ' '*12
        defn= textwrap.wrap(syn.definition, 64)
        print 'sense %d (%s)' % (i + 1, POS[syn.pos])
        n1=str('definition: ' + ('\n' + ind).join(defn))
        n2=str('  synonyms:', ', '.join(syns))
        if ants:
            n3=str('  antonyms:', ', '.join(a.name for a in ants))
        if syn.examples:
            n4=str('  examples: ' + ('\n' + ind).join(syn.examples))
        try:
            resp = ("From dictionary:\n%s\n%s\n%s\n%s") %(n1, n2, n3, n4)
        except:
            try:
                resp = ("From dictionary:\n%s\n%s\n%s") %(n1, n2, n3)
            except:
                try:
                    resp = ("From dictionary:\n%s\n%s") %(n1, n2)
                except:
                    resp = ("Data not available...")
        print
        return resp 
```

但是，我可以说我没有很好地修改它，因为它只是包装在 try/except 块中。但是我一生都想不出更好的方法来做到这一点（仍然以抽象的方式学习python）。我需要将它格式化为一个变量，其中包含 \n 作为每一行的分隔符，因为它被写入文件。有什么想法可以让我做得更好，并且没有似乎正在发生的列表事件吗？

> --定义日出
> 
> 来自字典：
> 
> 定义：第一缕曙光
> 
> （'同义词：'，'黎明，黎明，早晨，极光，第一道曙光，破晓，破晓，破晓，黎明，日出，日出，鸡鸣'）
> 
> （'反义词：'，'日落'）
> 
> 示例：我们在黎明前起床，他们一直聊到早上
> 
> * * *

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:44:50.250

无需为每一行创建一个字符串，只需从一开始就将您的文本附加到输出变量。

```
resp = 'From dictionary:\ndefinition: ' + ('\n' + ind).join(defn) +'\n'
resp += '  synonyms:' + ', '.join(syns) +'\n'
if ants:
    resp += '  antonyms:' + ', '.join(a.name for a in ants)) +'\n'
if syn.examples:
    resp += '  examples: ' + ('\n' + ind).join(syn.examples)) +'\n' 
```

# paypal-sandbox - 贝宝沙盒：测试支付

> ID：10349899
> 
> 赞同：1
> 
> 时间：2012-04-27T11:35:21.167
> 
> 标签：paypal-sandbox

我正在通过贝宝测试结帐

Paypal 总是添加这样的内容：

```
395&county=6 
```

到我的返回网址，它打破了我的 seo 网址。

例如，我的返回页面是

```
 http://mysite.com/pay/success
(<input type="hidden" id="return"  name="return" value="http://mysite.com/pay/success" />) 
```

付款后，当我点击“返回我的站点测试商店”时，我去

```
http://mysite.com/pay/success395&county=6 
```

所以，我得到了 404 页面而不是我的感谢页面

解决了。我这边的具体问题。用贝宝一切都好。

# c# - 从启用节点的字符串 XML 读取数据 false

> ID：10349903
> 
> 赞同：1
> 
> 时间：2012-04-27T11:35:31.970
> 
> 标签：c#, asp.net, xml, linq, linq-to-xml

我有一个 xml 字符串，我想从中读取数据。

```
<?xml version="1.0" encoding="utf-16"?>
<Tree AllowNodeEditing="True" ShowLineImages="False" CheckBoxes="True"
      EnableAjaxSkinRendering="False" AutoPostBackOnCheck="True" AutoPostBack="True">
  <Node Enabled="False" Text="Geen afbeeldingen aanwezig" 
        Checked="True" Selected="True" thumb="" tekst="" />
  <Node Text="IMG_2807 (Small).JPG" 
        Value="../../CMS/Images/Fotogalerie/552/IMG_2807 (Small).JPG" tekst="Afbeelding IMG_2807 (Small).JPG" 
        thumb="../../CMS/Images/Thumbs/552/IMG_2807 (Small).JPG" /> 
```

请注意，在第三行 Node `enabled=False`。

我正在使用代码

```
 XDocument doc = XDocument.Parse(strFile);
                    var values = (from f in doc.Elements().Descendants()
                                  select f.Attribute("Value").Value).ToArray(); 
```

这会引发错误..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:37:36.297

您需要对值进行空值检查，因为如果不`select f.Attribute("Value").Value`进行空值检查，则如果元素没有该`Value`属性，它将引发异常。

查看您的示例 XML 并非都`Nodes`具有该属性`Value`。

试试这个：

```
var values = (from f in doc.Descendants("Node")
              where f.Attribute("Value") != null
              select f.Attribute("Value").Value).ToArray(); 
```

# ruby-on-rails - 如何在这两个 Rails 模型之间建立关系

> ID：10349904
> 
> 赞同：2
> 
> 时间：2012-04-27T11:35:38.083
> 
> 标签：ruby-on-rails, ruby, associations, models, database-relations

我有 2 个模型：`User`并且`PrivateMessage`必须关联（因为用户有许多私人消息作为接收者和发送者，私人消息属于用户）

这是我的`private_messages`表结构：

```
private_messages:
  sender_id:integer
  reciever_id:integer
  title:string
  message:text 
```

我很难理解如何为发件人用户和收件人用户连接相同的消息，现在我的模型代码如下所示：

```
class User < ActiveRecord:Base
  has_many :private_messages
end 
```

和

```
class PrivateMessage < ActiveRecord::Base
  belongs_to :user, :through => :sender_id
  belongs_to :user, :through => :reciever_id
end 
```

那是对的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T11:42:44.587

你必须重命名你的关联来区分它们：

```
class PrivateMessage < ActiveRecord::Base
  belongs_to :sender, :class_name => 'User', :foreign_key => 'sender_id'
  belongs_to :receiver, :class_name => 'User', :foreign_key => 'receiver_id'
end

class User < ActiveRecord::Base
  has_many :sent_messages, :class_name => 'PrivateMessage', :foreign_key => 'sender_id', :dependent => :destroy
  has_many :received_messages, :class_name => 'PrivateMessage', :foreign_key => 'receiver_id', :dependent => :destroy
end 
```

# sencha-touch - 处理sencha中的叶节点

> ID：10349906
> 
> 赞同：0
> 
> 时间：2012-04-27T11:35:41.380
> 
> 标签：sencha-touch, extjs, sencha-touch-2, nested-lists

我正在使用 sencha 创建一个嵌套列表。现在点击我得到一个列表，它一直持续到我到达叶节点。

现在我想要的是，在单击叶节点时，我想生成一个事件，使我能够打开文件。

不知道该怎么做。

我的嵌套列表代码是

```
Ext.define("InfoImage.view.nestedList", {
    extend:'Ext.NestedList',
    xtype:'nestedList',
    id:'nestedList',

    config:{
        fullscreen:'true',
        title:'Nested List',
        xtype:'nestedList',
        displayField : 'text',
        html:'Nested List on its way!!!',
        store:'nestedListStore'
        //itemTpl:'{text}'
    }
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:17:22.890

我使用嵌套列表提供的事件找到了解决方案：“onleafitemtap”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:50:02.783

我认为，您需要 PhoneGap 在这里。

Sencha Touch 不支持文件系统访问。因此，您需要使用 phonegap 的 File API 来访问和读取存储在系统上的文件。

查看[**文件 API 文档**](http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#File)，

```
FILE API : An API to read, write and navigate file system hierarchies. 
```

例如来自 Phonegap 的示例，

```
 ...
 ...
// PhoneGap is ready
function onDeviceReady() {
   window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem) {
    fileSystem.root.getFile("readme.txt", {create: true}, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {
    fileEntry.file(gotFile, fail);
}

function gotFile(file){
    readDataUrl(file);
    readAsText(file);
}

function readDataUrl(file) {
    var reader = new FileReader();
    reader.onloadend = function(evt) {
        console.log("Read as data URL");
        console.log(evt.target.result);
    };
    reader.readAsDataURL(file);
}

function readAsText(file) {
    var reader = new FileReader();
    reader.onloadend = function(evt) {
        console.log("Read as text");
        console.log(evt.target.result);
    };
    reader.readAsText(file);
}

...
... 
```

希望对你有帮助！

# facebook - Og：图像更改：如何让 Facebook 刷新墙上的链接？

> ID：10349907
> 
> 赞同：2
> 
> 时间：2012-04-27T11:35:46.727
> 
> 标签：facebook, url, facebook-wall

我在我的 facebook 页面上发布了几个我的网站链接，但是每个页面的图像 url (og:image) 都发生了变化，所以我墙上的链接帖子仍然试图显示来自旧 url 的图像（这不会'不存在了）。

如何让 facebook 重新抓取这些链接，以便显示正确的图像？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T11:56:00.857

理论上，如果您在调试器（https://developers.facebook.com/tools/debug）中输入您的网址，它将重新抓取您的网页。它实际上向您显示了当前的爬行结果，但我不得不等待几天甚至几周才能在我的墙上看到结果。

# java - 如何确保 Window 媒体播放器处于播放模式？

> ID：10349911
> 
> 赞同：0
> 
> 时间：2012-04-27T11:35:53.037
> 
> 标签：java, selenium, automation, windows-media-player

嗨，在我的测试案例中，我必须单击“链接”，之后应用程序将下载“.wav 声音文件”。下载后它会在 Windows 媒体播放器中自动播放。我确保 WMP 处于打开状态，但我的问题是我必须检查 Windows 媒体播放器是否处于播放模式的天气？

我正在用java编写脚本..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:43:52.553

您可以使用一些参数启动 WMP，例如`/Task NowPlaying`可能是您正在寻找的 - [WMP 命令行参数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562624%28v=vs.85%29.aspx)

您可以尝试[盲目单击](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)按钮/选项卡（可能存在也可能不存在）。

但是，您可以通过[JNI](http://en.wikipedia.org/wiki/Java_Native_Interface)或[JNA](http://en.wikipedia.org/wiki/Java_Native_Access)使用 WMP API 。如果前者太过时，请参阅[此](http://www.codeproject.com/Articles/6042/Interoperating-with-Windows-Media-Player-using-P-I)或[此。](https://www.google.cz/search?q=wmp%20api)

或者查看[Windows Media Player 是否有文档化的 JavaScript API？](https://stackoverflow.com/questions/299582/is-there-a-documented-javascript-api-for-windows-media-player)

# javascript - ajax 加载的脚本不起作用

> ID：10349915
> 
> 赞同：0
> 
> 时间：2012-04-27T11:36:23.567
> 
> 标签：javascript, jquery, ajax

下面的代码是通过 ajax 加载的：

```
<div class="main">
    //some content
</div>    
<div class="advanced">
    //some content
</div>
<div class="other">
    //some content
</div>
<div class="pass">
    //some content
</div>
<script>$('.advanced,.other,.pass').hide();</script> 
```

它们在正常加载时隐藏得很好，但是当通过 ajax 加载时它不再起作用了。为什么会这样？我不确定`$.on()`这里是否真的有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:39:02.173

如果上面的例子是通过 jQuery ajax 加载的，为什么不直接调用

> $('.advanced,.other,.pass').hide();

ajax请求完成后？

例如：

```
$.ajax({
    url: "Your AJAX URL",
    dataType: 'html',
    type: "POST",
    success: function (json) {
        // Add you elements to the DOM
    },
    complete: function () {
        $('.advanced,.other,.pass').hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:43:47.723

根据[jQuery](http://api.jquery.com/jQuery.ajax/)

> 检索到的数据中的任何嵌入 JavaScript*都会在 HTML 作为字符串返回之前执行。*

这可能意味着您的脚本在您设法对其进行任何操作之前先执行。

# iphone - 推送数据时返回上一个视图

> ID：10349924
> 
> 赞同：0
> 
> 时间：2012-04-27T11:36:54.280
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uinavigationcontroller

我有一个带有链接到过滤器页面的右侧导航栏项目的地点列表。我想在过滤器页面上设置参数并按下按钮将其推回位置列表，同时随身携带数据并刷新前一个视图。按下按钮时，我目前正在执行此操作：

```
-(IBAction)save:(id)sender
{
    PlaceList *placelist = [[PlaceList alloc] initWithNibName:@"PlaceList" bundle:nil];
    placelist.searchTxt = self.searchTxt.text;
    placelist.type = self.type;
    [self.navigationController pushViewController:placelist animated:YES];
    [placelist release]; 
} 
```

但是，这会在导航控制器中创建一个新表，并为过滤器留下一个后退按钮，例如。Home -> Placelist->Filter->PlaceList->Filter 它是一个永无止境的循环，当我想要的只是 Home -> Placelist -> Filter 但数据可以向后推送。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:42:21.490

而不是推送视图控制器，您需要选择弹出选项，一旦您执行弹出，PlaceList 的 viewWillAppear 将被调用，您正在使用 tableview，您可以在那里获取和重新加载数据。在没有弹出的情况下一次又一次地推动是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:58:56.743

您需要弹出您的视图，但我假设您希望将过滤后的值放入第一个视图中，因此您可以选择

KVO

代表们

我强烈建议使用委托，如果您需要一个起点，请查看此[urldismissModalViewController 并将数据传回](https://stackoverflow.com/questions/6203799/dismissmodalviewcontroller-and-pass-data-back)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:01:52.340

在 Home -> Placelist->Filter 之后，在 Filter 而不是推送视图中，只需使用以下内容

```
 [self.navigationController popViewControllerAnimated:YES]; 
```

这将从堆栈中删除过滤器视图，并且您的 Placelist 将可见.....

# c++ - 三角矩阵转换和自动并行化

> ID：10349940
> 
> 赞同：2
> 
> 时间：2012-04-27T11:38:04.227
> 
> 标签：c++, optimization, compiler-optimization, icc

我在ICC（11.1；旧的，但对此无能为力）中玩了一点自动并行化，我想知道为什么编译器不能并行化内部循环以进行简单的高斯消除：

```
void makeTriangular(float **matrix, float *vector, int n) {
    for (int pivot = 0; pivot < n - 1; pivot++) {
        // swap row so that the row with the largest value is
        // at pivot position for numerical stability
        int swapPos = findPivot(matrix, pivot, n);
        std::swap(matrix[pivot], matrix[swapPos]);
        std::swap(vector[pivot], vector[swapPos]);
        float pivotVal = matrix[pivot][pivot];
        for (int row = pivot + 1; row < n; row++) { // line 72; should be parallelized
            float tmp = matrix[row][pivot] / pivotVal;  
            for (int col = pivot + 1; col < n; col++) { // line 74
                matrix[row][col] -= matrix[pivot][col] * tmp;
            }
            vector[row] -= vector[pivot] * tmp;
        }
    }
} 
```

我们只写入依赖于私有行（和 col）变量的数组，并且行保证大于枢轴，所以编译器应该很明显我们没有覆盖任何东西。

我正在编译`-O3 -fno-alias -parallel -par-report3`并获得很多依赖项 ala:`assumed FLOW dependence between matrix line 75 and matrix line 73.`或者`assumed ANTI dependence between matrix line 73 and matrix line 75.`仅第 75 行也是如此。编译器有什么问题？显然我可以准确地告诉它如何处理一些编译指示，但我想了解编译器可以单独获得什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:27:57.037

icc 12.1 上存在相同的自动并行化问题。所以我用这个较新的版本进行实验。

将输出矩阵添加到函数的参数列表并将第三个循环的主体更改为此

```
out[row][col] = matrix[row][col] - matrix[pivot][col] * tmp; 
```

修复了“FLOW 依赖”问题。这意味着，“-fno-alias”只影响函数参数，而单个参数的内容仍然被怀疑是别名。我不知道为什么这个选项不会影响一切。由于矩阵的不同部分并没有真正相互别名，因此您可以将此附加参数留给函数并通过此参数传递相同的矩阵。

有趣的是，在抱怨“矩阵”时，编译器对“向量”只字未提，它确实存在别名问题：这一行`vector[row] -= vector[pivot] * tmp;`可能会导致错误的别名（在一个线程中写入`vector[row]`可能会触及缓存线，存储`vector[pivot]`，每个线程都使用）。

“FLOW 依赖”不是此代码中的唯一问题。修复后，编译器仍然拒绝并行化第二个和第三个循环，因为“计算工作不足”。所以我试着给它一些额外的工作：

```
float tmp = matrix[row][pivot] * pivotVal;
...
out[row][col] = matrix[row][col] - matrix[pivot][col] *tmp /pivotVal /pivotVal; 
```

毕竟，第二个循环终于并行化了，尽管我不确定它是否获得了任何速度提升。

* * *

**更新：**我找到了一个更好的选择来给计算机“一些额外的工作”。选项`-par-threshold50`可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T19:53:31.630

基本上编译器无法确定没有依赖关系，因为名称`matrix`和名称`vector`都被读取和写入（即使使用不同的区域）。您可能可以通过以下方式解决此问题（虽然有点脏）：

```
void makeTriangular(float **matrix, float *vector, int n)
{     
    for (int pivot = 0; pivot < n - 1; pivot++) 
    {         
         // swap row so that the row with the largest value is    
         // at pivot position for numerical stability       
         int swapPos = findPivot(matrix, pivot, n);    
         std::swap(matrix[pivot], matrix[swapPos]);   
         std::swap(vector[pivot], vector[swapPos]);     
         float pivotVal = matrix[pivot][pivot];     
         float **matrixForWriting = matrix;  // COPY THE POINTER
         float *vectorForWriting = vector;   // COPY THE POINTER
         // (then parallelize this next for loop as you were)
         for (int row = pivot + 1; row < n; row++)  { 
              float tmp = matrix[row][pivot] / pivotVal;               
              for (int col = pivot + 1; col < n; col++) {
                  // WRITE TO THE matrixForWriting VERSION
                  matrixForWriting[row][col] = matrix[row][col] - matrix[pivot][col] * tmp; 
              } 
              // WRITE TO THE vectorForWriting VERSION
              vectorForWriting[row] = vector[row] - vector[pivot] * tmp; 
         } 
    }
} 
```

底线只是给你正在写的那些暂时不同的名字来欺骗编译器。我知道它有点脏*，我一般不会推荐这种编程*。但是如果你确定你没有数据依赖，那就完全没问题了。

事实上，我会在它周围放一些评论，让未来看到此代码的人非常清楚这是一种解决方法，以及您这样做的原因。

编辑：我认为@FPK 基本上触及了答案，@Evgeny Kluev 发布了答案。但是，在@Evgeny Kluev 的回答中，他建议将其设为输入参数，这可能会并行化，但不会给出正确的值，因为其中的条目`matrix`不会被更新。我认为我上面发布的代码也会给出正确的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T09:09:14.020

我无法访问 icc 来测试我的想法，但我怀疑编译器担心别名：矩阵定义为浮点**：指向浮点数组的指针数组。所有这些指针都可以指向同一个浮点数组，因此并行化这将是非常危险的。这没有任何意义，但编译器无法知道。

# iphone - 如何以编程方式选择 UITextField 的文本

> ID：10349943
> 
> 赞同：6
> 
> 时间：2012-04-27T11:38:20.690
> 
> 标签：iphone, objective-c, uitextfield

我想从开始编辑时选择的 UITextField 中选择所有文本。我尝试了下面的代码，但这不起作用。

```
[txt selectAll:self]; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-27T11:56:12.810

请检查您放置它的位置...尝试将上面的代码放入

```
 -(void)textFieldDidBeginEditing:(UITextField *)textField
        {
           [textField selectAll:self];

         } 
```

而且 txt 必须是 UITextField。也不要忘记将 txt 的委托设置为

```
 txt.delegate = self; 
```

您已在其中声明它并在 .h 中添加 UITextFieldDelegate 作为

```
 @interface ViewController : UIViewController <UITextFieldDelegate> 
```

这肯定会起作用..它对我有用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:01:28.167

xyz 回答正确，但不一定需要使用委托。您可以将界面生成器中的操作连接到“编辑已开始”并在那里编写相同的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:17:32.993

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
          NSString * str = [textField.text stringByReplacingCharactersInRange:range withString:string];
          return YES;} 
```

当您开始编辑时，使用此代码存储您的字符串

# algorithm - 我在哪里可以找到图形测试套件？

> ID：10349954
> 
> 赞同：4
> 
> 时间：2012-04-27T11:39:42.553
> 
> 标签：algorithm, testing, data-structures, graph-theory, graph-algorithm

最近，我开始尝试图表，主要是为了娱乐价值。维基百科充满了关于图的信息，我尝试在实现我在那里找到的一些算法（最短路径、DFS 等）的同时学习理论。我还尝试制定例程来对图（树、循环、平面等）进行分类，检测某些属性（clicques、叶子等）等等。很好玩，虽然很书呆子。

随着我的库的增长，我发现自己花费了太多时间来构建图表来测试我的代码。如果我想测试我的`TGraph.IsTree`方法，我需要构建一些*是*树的图，以及一些*不是*树的图。我可以随机生成图表，但是我不知道我的方法*应该*返回什么。

所以我的问题是：有人知道图形编程的测试套件吗？我正在寻找的是一些定义明确的格式的图形集合，其中还有一些关于图形的信息（分类、最大集团、一些顶点之间的最短路径等）

我知道这存在于国际象棋程序等，但我无法找到类似的图表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:09:05.273

Knuth 的[斯坦福图形库](http://www-cs-faculty.stanford.edu/~uno/sgb.html)。这是一个很好的算法和数据集集合，用于测试图的许多不同属性。您可以下载所有内容、所有文档和具有文学编程风格的源代码。真正要检查的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:06:09.103

[SNAP](http://snap.stanford.edu/)有一个很大的列表，对于欧几里得图，您可以使用[CloudMade](http://downloads.cloudmade.com/)。还有一些其他库（我知道的其他库不适合您的目的），但我认为这些对于您的测试用例来说已经足够了。

# reporting-services - “无法确定指定数据集字段中的空间数据类型...”使用地图图层向导

> ID：10349955
> 
> 赞同：3
> 
> 时间：2012-04-27T11:39:45.813
> 
> 标签：reporting-services, layer, spatial, spatial-query

我是第一次在 SSRS 中使用地图图层向导，因此我们可以将空间数据添加到地图中。

我们从向导中得到这个错误：

```
Unable to determine the spatial data type in the specified dataset field... 
```

空间数据的数据类型是地理。

在查询设计器中执行时，空间数据如下所示：

```
POINT (2.41866741166689 48.9082239283949)
POINT (1.92902094274567 47.9294603618455)
POINT (2.25244361602031 48.9619440062058)
POINT (1.91174331024445 47.9109595746068)
POINT (1.32766100377444 43.6203441938353) 
```

如果从 SSMS 运行相同的查询，它看起来像这样：

```
0xE6100000010C4BF382AE407448400415C84C6E590340
0xE6100000010C0287A08EF8F647409244661045DDFE3F
0xE6100000010C5A9E2FFB207B48403421972801050240
0xE6100000010C0775C6529AF44740108C3D278096FE3F
0xE6100000010C9F64447067CF45400B2CF676193EF53F 
```

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T21:24:18.057

您是否在数据集的 where 子句中使用了参数？

您收到此错误是因为映射引擎正在尝试对您的数据集进行采样/测试，并且正在跳过参数。尝试在没有参数的情况下映射您的数据集；如果可行，则您的问题出在参数中，而不是数据类型中。

重新编写查询以提取您可能需要的所有行，并在数据集上使用过滤器

# cordova - 如何在 PhoneGap 中设置声音通知

> ID：10349957
> 
> 赞同：0
> 
> 时间：2012-04-27T11:39:48.653
> 
> 标签：cordova

我将很快在 PhoneGap 中开发一个 android 应用程序，该应用程序将具有提醒机制，将在用户设置的特定日期和时间间隔显示弹出/推送通知。通知将是可听的。我只是想知道，在PhoneGap中是否可以，如果可以，我该如何完成。我认为 Appcelerator 通过其日历库支持它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:25:40.697

Android 上的通知插件可以在给定时间播放声音：

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification)

# javascript - 添加小时到 javascript 日期对象错误？

> ID：10349961
> 
> 赞同：0
> 
> 时间：2012-04-27T11:40:00.977
> 
> 标签：javascript, date, actionscript

大家好，所以我有一个奇怪的错误，我无法弄清楚。我从日期选择器和一组带有小时/分钟的组合创建一个日期对象。

现在的问题是，当它是 2013 年 3 月 30 日和下午 1 点时，由于某种原因，增加 12 小时只会增加 11 小时。对于其他任何一天，例如 2013 年 3 月 31 日下午 1 点，这都很好。请参阅下面的示例

```
var d = new Date(1364601600000)
d.setHours(13)
d.setMinutes(13)

console.log(d)

d.setHours(d.getHours() + 12)

console.log(d)

console.log('--')

var d2 = new Date(1364688000000)
d2.setHours(13)
d2.setMinutes(13)

console.log(d2)

d2.setHours(d2.getHours() + 12)

console.log(d2) 
```

看一个例子：http: [//jsfiddle.net/k8L2W/2/](http://jsfiddle.net/k8L2W/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:03:18.317

2013 年的日光计划如下：

```
Sunday, 31 March 2013, 01:00:00 clocks are turned forward 1 hour to
Sunday, 31 March 2013, 02:00:00 local daylight time instead 
```

供参考，请[在此处查看](http://www.timeanddate.com/worldclock/clockchange.html?n=136&year=2013)

# javascript - JavaScript 有未捕获的 Typeerror

> ID：10349963
> 
> 赞同：-1
> 
> 时间：2012-04-27T11:40:15.193
> 
> 标签：javascript, dom-events, execution

我可以在 test.php 中仅对这段代码执行 JavaScript

```
 <script type="text/javascript" src="http://loveslgirls.com/Flash Mp3 Player/project/deploy/js/swfobject.js"></script> 
    <script type="text/javascript">

        // JAVASCRIPT VARS
        // the path to the SWF file
        var swfPath = "http://loveslgirls.com/Flash Mp3 Player/project/deploy/preview.swf";
        //swfPath += "?t=" + Date.parse(new Date()); // uncomment this line to activate cache buster        

        // stage dimensions
        var stageW = 560;//560//"100%"; // minimum is 450
        var stageH = 300;//400;//"100%"; // minimum is 260

        // ATTRIBUTES
        var attributes = {};
        attributes.id = 'FlashComponent';
        attributes.name = attributes.id;

        // PARAMS
        var params = {};
        params.bgcolor = "#333333";
        params.allowfullscreen = "true";
        params.allowScriptAccess = "always";            
        //params.wmode = "transparent";

        /* FLASH VARS */
        var flashvars = {};

        /// if commented / delete these lines, the component will take the stage dimensions defined 
        /// above in "JAVASCRIPT SECTIONS" section or those defined in the settings xml         
        flashvars.componentWidth = stageW;
        flashvars.componentHeight = stageH;                         

        /// path to the content folder(where the xml files, images or video are nested)
        /// if you want to use absolute paths(like "http://example.com/images/....") then leave it empty("")
        // Also, if you want the embed code to work correctly you'll need to set the an absolute path for pathToFiles, like this: http://www.yourwebsite.dom/.../mp3gallery/
        flashvars.pathToFiles = "http://loveslgirls.com/Flash Mp3 Player/";
        flashvars.xmlPath = "project/deploy/mp3gallery/xml/settings.xml";
        flashvars.contentXMLPath = "project/deploy/mp3gallery/xml/mp3gallery.xml";

        /** EMBED THE SWF**/
        swfobject.embedSWF(swfPath, attributes.id, stageW, stageH, "9.0.124", "http://loveslgirls.com/Flash Mp3 Player/project/deploy/js/expressInstall.swf", flashvars, params, attributes);

</script>

    <table width="100%" height="100%" cellpadding="0" cellspacing="0">
        <td align="center">

            <!-- this div will be overwritten by SWF object -->     
            <div id="FlashComponent">
                <p>In order to view this object you need Flash Player 9+ support!</p>
                <a href="http://www.adobe.com/go/getflashplayer">
                    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player"/>
                </a>
            </div>

        </td>
    </table> 
```

但是当我将它添加到一个更复杂的 php 文件中时，它不会执行。它说：

> Uncaught ReferenceError: ST is not defined Uncaught TypeError: Object [object DOMWindow] has no method 'addEvent'

如何将此播放器添加到我的复杂页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:25:41.427

看起来您是在元素出现在页面上之前调用脚本。您调用的方法是否处理 onload？如果不是，您应该在您引用的元素之后添加脚本，在 document.ready 上调用它，或者添加脚本 onload。

# ios - 将事件的 RecurrenceRule 保存到 CoreData

> ID：10349965
> 
> 赞同：1
> 
> 时间：2012-04-27T11:40:19.263
> 
> 标签：ios, core-data, ios5, icalendar

我正在尝试在我的应用程序中保存事件的 RecurrenceRule。我无法构建表格的架构。请建议什么可以是表的结构。
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:53:19.490

```
 calendarIdentifier  String
  daysOfTheMonth  relationship
  daysOfTheWeek  relationship
  daysOfTheYear  relationship
  firstDayOfTheWeek  Integer16
  frequency  Integer16
  interval  Integer16
  monthsOfTheYear  relationship
  recurrenceEnd  Date
  setPositions  relationship
  weeksOfTheYear  relationship 
```

您应该为 EKRecurrenceRule 类参考创建一个结构。数组将是与相应实体的关系。例如：daysOfTheWeek 将与实体 WeekDays 相关，您将在其中将属性日中的天数存储为 Integer16。

# javascript - 如何通过 addEventListener 添加 onclick="return func()"？

> ID：10349967
> 
> 赞同：1
> 
> 时间：2012-04-27T11:40:27.983
> 
> 标签：javascript, dom-events, addeventlistener

我有一个链接：`<a href="/somelink" id="link_test" onclick="return func(event);">Link</a>`。

我想删除这个`onclick`属性并添加一个`click`事件监听器`addEventListener`。

我试过：

```
ge("link_test").addEventListener('click',function(){
  return func(window.event);
},false); 
```

还：

```
ge("link_test").addEventListener('click',"return func(window.event);",false); 
```

没有结果。`addEventListener`是否有可能（以及如何）做到这一点？

`addEventListener`PS：实际上我有一个func的跨浏览器变体，但在这种情况下并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:51:19.370

尝试：

```
 var anch = document.getElementById("link_test");
anch.addEventListener ("click", function (event) {
    event.preventDefault();
    func(event) 
}, false); 
```

你的意思是这样的吗

# html - 如何制作个人资料表？

> ID：10349970
> 
> 赞同：0
> 
> 时间：2012-04-27T11:40:46.460
> 
> 标签：html, css

我正在尝试在我的网站上获取此表，以便在左侧显示图像，在左侧显示有关工作人员的信息。它在 WordPress 页面中，但无论天气如何，它都在页面上或独立的 HTML 文档中，它似乎并没有按照我想要的方式呈现。

[它应该遵循与http://grab.by/djQk](http://grab.by/djQk)相同的总体思路。

我试图复制他们的源代码但无法将其渲染，因此我从我的站点中提取了他们的源代码并从头开始，但仍然无法使其正常工作。

[http://radio.powercastmedia.net/staff/](http://radio.powercastmedia.net/staff/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:45:52.167

如果您使用的是桌子......

```
<table>
    <tr>
        <td style="width: 25%;">
            <img src="blah"/>
        </td>
        <td>
            <table>
                <tr>
                    <td>Blah</td>
                    <td>Blah</td>
                </tr>
                <tr>
                    <td>Blah</td>
                    <td>Blah</td>
                </tr>
            </table>
        <td>
    </tr>
</table> 
```

注意：您的 pastebin 示例的问题在于您在不正确`<tr>`的内部使用 -只能进入表格内部，因此您需要额外的表格标签。`<td>``<tr>`

也可以在单个单元格上使用`colspan`和处理单个表格`rowspan`，但我个人更喜欢通过使图像向左浮动来做到这一点，例如：

```
<div>
    <img src="blah" style="float: left;"/>
    <p>Name: John</p>
    <p>Something else</p>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T12:31:18.900

我已经使用 CSS 而不是表格实现了你需要的东西。

看到这个[JSFiddle](http://jsfiddle.net/74Kar/)

干杯，山姆

# java - 是否有用于 WebSphere Platform Messaging (WPM) 的 API？

> ID：10349974
> 
> 赞同：1
> 
> 时间：2012-04-27T11:40:56.853
> 
> 标签：java, websphere, messaging, platform, wpm

我正在寻找 WebSphere Platform Messaging (WPM) 的 API，特别是 Java。

[IBM 关于 WPM 的文章](http://viperrin.free.fr/WASV6/wf3816v16.pdf)读到 WPM 和 MQ 是独立的产品，并且 WPM 可通过 MQ 链接获得。然而，这样的做法对我来说是不可接受的。

我既没有找到 WPM 的文档，也没有找到任何语言的 API。请推荐一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:01:03.647

WebSphere 平台消息传递（也称为 SIBus）通常通过 JMS API 使用。

# php - 如何在标题 magento 中显示愿望清单块

> ID：10349975
> 
> 赞同：4
> 
> 时间：2012-04-27T11:41:00.620
> 
> 标签：php, magento, magento-1.6

我希望能够在我的 magento-1.6 站点的标题块上加载我的“愿望清单”。我正在使用 magento1.6.2.0。现在我的愿望清单显示在左侧块上。我只是将wishlist.xml的引用从左侧更改为标题

```
 <reference name="header">
        <block type="wishlist/customer_sidebar" name="wishlist_sidebar" as="wishlist"  template="wishlist/sidebar.phtml"/>
    </reference> 
```

但它没有来我怎么能做到这一点..？我要编辑哪个 xml 文件..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T12:28:47.283

所有布局 XML 文件都是一个 - 也就是说，它们作为典型渲染的一部分被合并。

您需要编辑 page/html/header.phtml 文件并添加以下代码：

```
<?php echo $this->getChildHtml('wishlist') ?> 
```

在您执行任何此操作之前，您应该通读[Magento 官方知识库](http://www.magentocommerce.com/knowledge-base)中的文章，特别注意主题层次结构和开发人员文章。正确进行主题自定义的时间是在项目开始时。

# c# - 解析大型文本文件，即时修改

> ID：10349977
> 
> 赞同：6
> 
> 时间：2012-04-27T11:41:09.753
> 
> 标签：c#, csv, stream, real-time, large-files

我需要实时解析一个大型 CSV 文件，同时它正在被不同的进程**修改**（附加）。大我的意思是此时约 20 GB，并且正在缓慢增长。应用程序只需要检测和报告数据流中的某些异常情况，它只需要存储少量的状态信息（`O(1)`空间）。

我正在考虑每隔几秒钟轮询一次文件的属性（大小），打开一个只读流，寻找上一个位置，然后继续解析我第一次停止的位置。但由于这是一个文本 (CSV) 文件，我显然需要在以某种方式继续时跟踪换行符，以确保我总是解析一整行。

如果我没记错的话，这不应该是一个实现的问题，但我想知道是否有一种通用的方法/库已经解决了其中一些问题？

注意：**我不需要 CSV 解析器。**我需要有关一个库的信息，该库可以简化从动态修改的文件中读取行的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:52:53.320

我没有测试它，但我认为您可以使用 FileSystemWatcher 来检测不同进程何时修改了您的文件。在 Changed 事件中，您将能够寻找到您之前保存的位置，并阅读附加内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:53:21.283

这里有一个小问题：

*   读取和解析 CSV 需要 TextReader
*   定位不适用于 TextReaders。

第一个想法：保持开放。如果生产者和分析器都以非独占模式运行，则应该可以 ReadLine-until-null、pause、ReadLine-until-null 等。

* * *

> 它应该是 7 位 ASCII，只是一些 Guid 和数字

这使得跟踪文件位置 (pos += line.Length+2) 成为可能。请确保使用`Encoding.ASCII`. 然后，您可以将其作为普通二进制流重新打开，查找到最后一个位置，然后才将 StreamReader 附加到该流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:01:20.077

为什么不每次开始解析时都分离一个单独的进程/线程 - 这样，你将并发（即时）部分从数据源移到数据接收器 - 所以现在你有弄清楚如何从所有线程中收集结果......

这*将*意味着为您启动的每个线程重新读取整个文件，但是......

您可以在两个版本上运行差异程序并从那里获取，具体取决于 csv 数据源的格式：它是否修改已写入的记录？还是只是追加新记录？如果是这样，您可以将新内容（last-position 到 current-eof）拆分到一个新文件中，然后在后台线程中处理闲暇时的内容：

*   轮询线程记住最后的文件大小
*   当文件变大时：从最后一个位置搜索到最后，保存到临时文件
*   后台线程按照创建/修改的顺序处理仍然存在的任何临时文件

# php - 将 MySQL 登录脚本转换为 PDO

> ID：10349980
> 
> 赞同：0
> 
> 时间：2012-04-27T11:41:14.897
> 
> 标签：php, mysql, authentication, pdo

我使用 MySQL 编写了一个功能登录脚本。但是，我现在被告知需要使用 PDO 完成，并且我有一个功能性 PDO 连接：

```
function getConnection()
{
    $userName = '*****';
    $password = '*****';
    $dbname = '******';
    $db = new PDO("mysql:host=localhost;dbname=$dbname", $userName, $password);
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    return $db; 
```

但是我不知道如何将登录查询转换为 PDO。

```
if (isset($_REQUEST['attempt']))
{
    $user = $_POST['user'];
    $password = $_POST['password'];

    $qry = mysql_query
        ("SELECT *
          FROM subscriber
          WHERE email = '$user'
          AND password = '$password'")
        or die(mysql_error());

    $total = mysql_num_rows($qry);

    if ($total > 0)
    {
        session_start();
        $_SESSION['user'] = 'yes';
        header('location: account.php');
        exit;
    }
    else
    {
        // Do nothing.
    }
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T11:44:40.350

为了让你开始：

```
$db = getConnection();
$stmt = $db->prepare("
    SELECT * FROM subscriber WHERE email = :email AND password = :password
");
$stmt->bindParam(":email"   , $user    );
$stmt->bindParam(":password", $password);
$stmt->execute();
$total = $stmt->rowCount(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T08:33:34.280

非臃肿版：

```
$stm = $pdo->prepare("SELECT * FROM subscriber WHERE email = ? AND password = ?");
$stm-> execute($_POST['user'], $_POST['password']);
if ($id = $stm->fetchColumn()) {
    session_start();
    $_SESSION['user'] = $id;
    header('location: account.php');
    exit;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T08:16:43.903

如果您不想使用 bindParam，也可以使用此示例。但我从@eggyal 的回答中提取了它。非常感谢eggyal。

```
<?php session_start();
    include_once('pdo.inc.php');

    $username = (isset($_POST['username']))? trim($_POST['username']): '';
    $password = (isset($_POST['password']))? $_POST['password'] : '';
    $pas = md5($password);
    $redirect = (isset($_REQUEST['redirect']))? $_REQUEST['redirect'] :
        'view.php';
    $query = ("SELECT username FROM site_user WHERE username=:username
              AND password =:password");
    $query_login = $con->prepare($query);
    $query_login->execute(array(
        ':username'=>$username,
        ':password'=>$pas));
    $result = $query_login->rowCount();

    if($result>0)
    {
        $_SESSION['username'] = $username;
        $_SESSION['logged'] = 1;
        echo "success";
    }
    else {
        // Set these explicitly just to make sure
        echo 'User name invalid';
    }
?> 
```

# javascript - 如何使用 WAI-ARIA 通知屏幕阅读器 div 现在可见

> ID：10349987
> 
> 赞同：20
> 
> 时间：2012-04-27T11:42:05.083
> 
> 标签：javascript, html, accessibility, screen-readers, wai-aria

如何使用 WAI-ARIA 通知屏幕阅读器 div 现在可见？

如果我们得到了 html

```
<div id="foo">Present main content</div>
<div id="bar" style="display: none;">Hidden content</div> 
```

然后我们

```
$('#foo').hide();
$('#bar').show(); 
```

我们如何通知屏幕阅读器他们应该通知用户现在可见的 div（或者可能自动关注现在可见的 div）？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-27T13:38:55.793

您通常不需要告诉屏幕阅读器内容现在可见。使用`aria-hidden`在实践中没有区别，所以我建议不要使用它。如果您希望屏幕阅读器宣布隐藏 div 的文本内容，您可以使用`role=alert`或`aria-live=polite`（例如）。您可以将其用于您希望屏幕阅读器听到的更新内容，而无需移动到内容位置来发现它。例如，弹出消息不接收焦点，但包含在按下按钮等操作后与用户相关的文本信息。

**更新：**我与一位开发 ARIA 1.0 的人讨论过，他建议使用[HTML5`hidden`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/hidden)而不是`aria-hidden`作为隐藏内容的语义指示。`display:none`将它与旧版浏览器的 CSS 结合使用。支持 HTML5 的浏览器使用用户代理样式表`hidden`实现它。`display:none`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-04T19:02:55.013

使用 role="alert" 标记内容将导致它触发警报事件，屏幕阅读器将在它变得可见时做出响应：

```
<div id="content" role="alert">
...
</div>

$("#content").show(); 
```

这会在#content 变得可见时提醒用户。

当您想从屏幕阅读器中隐藏某些内容但将其显示给有视力的用户时，应该使用 aria-hidden。不过要小心使用。请参阅此处了解更多信息： [http ://www.456bereastreet.com/archive/201205/hiding_visible_content_from_screen_readers_with_aria-hidden/](http://www.456bereastreet.com/archive/201205/hiding_visible_content_from_screen_readers_with_aria-hidden/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-27T11:47:17.223

使用[aria-hidden](http://www.w3.org/TR/wai-aria/states_and_properties#aria-hidden)

> 表示该元素及其所有后代对于作者实现的任何用户都是不可见或不可感知的。请参阅相关的 aria-disabled。
> 
> **如果一个元素仅在某些用户操作后可见，作者必须将 aria-hidden 属性设置为 true。当元素出现时，作者必须将 aria-hidden 属性设置为 false 或删除该属性，表明该元素是可见的**。一些辅助技术直接通过 DOM 访问 WAI-ARIA 信息，而不是通过浏览器支持的平台可访问性。**作者必须在不显示的内容上设置 aria-hidden="true"，无论用于隐藏它的机制如何。这允许辅助技术或用户代理正确地跳过文档中的隐藏元素。**

所以你的代码可以变成

```
$('#foo').hide().attr('aria-hidden', 'true');
$('#bar').show().attr('aria-hidden', 'false'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-08T01:14:36.930

我创建了一个示例，展示了如何使用 role="alert" 在屏幕阅读器用户接近 textarea 元素的字符限制时通知他们，如果您试图了解如何使用 alert 角色，它可能会有所帮助：

还有更多，但这里是产生警报的代码的一小部分：

```
if (characterCount > myAlertTheshold) {
       var newAlert = document.createElement("div"); /* using the native js because it's faster */
       newAlert.setAttribute("role", "alert");
       newAlert.setAttribute("id", "alert");
       newAlert.setAttribute("class","sr-only");
       var msg = document.createTextNode('You have ' + charactersRemaining +' characters of ' + myMaxLength + ' left');
       newAlert.appendChild(msg);
       document.body.appendChild(newAlert);
     } 
```

[http://codepen.io/chris-hore/pen/emXovR](http://codepen.io/chris-hore/pen/emXovR)

# c++ - 寻找一种快速初始化和快速查找的数据结构 (O(1))

> ID：10349990
> 
> 赞同：2
> 
> 时间：2012-04-27T11:42:10.220
> 
> 标签：c++, performance, data-structures

我需要一个数据结构，我想在其中存储有关我在操作期间已经处理了哪些实例的信息。由于限制，我无法将其存储在实例本身中（例如，因为我可以并行执行操作。

具体而言，我要为其存储信息的实例具有唯一编号，因此我可以使用该唯一编号来存储信息，而不是指向该实例的指针。

我的第一个解决方案是使用`std::set<Instance *>`. 每次我处理一个实例时，我都会将它添加到集合中，这样我就知道我已经处理了那个实例。

*   优点：初始化速度非常快
*   缺点：查找不是O(1)，而是O(logN)

我的第二个解决方案是使用一个`std::vector<bool>`（实际上是`std::vector<byte>`因为 bool 向量具有特定的专业化，这使得它比非 bool 向量慢）。实例的唯一编号可以用作向量中的索引，并且在向量中仅包含真或假来指示我们是否已经处理过该实例（幸运的是，我的唯一编号从 1 开始计数）。

*   优点：查找是 O(1)
*   缺点：初始化相对较慢，因为 std::vector 需要显式初始化每个元素（并且可能也独立）

我也可以使用 C 风格的数组（我可以在上面使用 memset），但由于事先不知道实例的数量（或唯一数字的数量），我需要编写自己的代码来扩展数组 memset数组的其余部分，......（这不是很难，但这是我想避免的）。

是否有任何其他类型的数据结构可以非常快速地初始化并且具有 O(1) 查找时间？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T11:45:20.060

你可以试试`boost::unordered_set`新的 C++11 [`std::unordered_set`](http://en.cppreference.com/w/cpp/container/unordered_set)。它们是基于散列的容器，而不是像 std::set 这样的树。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T11:46:11.693

嗯，用这么简单的识别方法……我会用哈希表。

不能用`boost::unordered_map`or`std::unordered_map`吗？

当然，如果您想要保证 O(1) 插入而不是摊销 O(1) 插入，您可能更喜欢更复杂的实现，但它应该可以帮助您入门。

# c# - C# 的支持向量机库

> ID：10349998
> 
> 赞同：12
> 
> 时间：2012-04-27T11:42:27.213
> 
> 标签：c#, .net, machine-learning, svm

是否有任何已经实现的支持向量机库可以在我的 C# 项目中使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T11:51:15.653

我做了一些谷歌搜索，发现了一些有趣的链接：

[libsvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)

[支持向量机](http://www.matthewajohnson.org/software/svm.html)

[Support_Vector_Machine](http://www.emgu.com/wiki/index.php/SVM_%28Support_Vector_Machine%29_in_CSharp)

[libsvm 实现](http://www.cs.sunysb.edu/~algorith/implement/libsvm/implement.shtml)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-25T15:27:57.083

在尝试在 C# 中找到支持向量机实现的良好起点示例时，我偶然发现了您的问题。如果有人想编写自己的 SVM，并且不想使用工具包或由于某种原因不能使用工具包……这对我自己来说是一个很好的参考。

[内核支持向量机示例-C#](http://crsouza.blogspot.com/2010/04/kernel-support-vector-machines-for.html)

# android - ViewPager 使用 scrollto(x,y) 后未加载项目

> ID：10349999
> 
> 赞同：1
> 
> 时间：2012-04-27T11:42:30.057
> 
> 标签：android, scroll, android-viewpager

我正在使用视图寻呼机，在上一个问题中我询问了有关同步两个 ViewPager 的问题，我已经使用 onPageChangeListener()

```
public void onPageScrolled(int arg0, float arg1, int arg2) {
    mainscreenViewPager.scrollTo(arg0*screenWidth + arg2, 0);
} 
```

现在我有 2 个 ViewPagers 同步，但是当我通过 scrollTo 移动一个时，它不会加载任何视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:00:19.033

你试过用`mainscreenViewPager.setCurrentItem(arg2);`吗？