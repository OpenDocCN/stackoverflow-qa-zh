# StackOverflow 问答 10373000-10373999

# api - How to get Moving Average for each day from Yahoo/Google Finance API?

> ID：10373002
> 
> 赞同：1
> 
> 时间：2012-04-29T14:39:27.157
> 
> 标签：api, yql, yahoo-api, yahoo-finance, google-finance

I need the value of Simple Moving Average for each day for Historical data? Is there a way?

Or just for last day?

SMA 20-day, SMA 5-day, SMA 50-day

All this stuff via API or .csv output

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T01:04:25.347

做一个快速的谷歌搜索，我可以找到一个回答这个[问题](http://www.gummy-stuff.org/Yahoo-data.htm)的页面，它解释了要传递哪些特殊参数来查询 API。检查一下，看看它是否满足您的需求。

您可以使用 YQL 从链接中指定的 API 查询此数据。可以在[此处访问到 YQL 控制台的链接以进行测试](http://developer.yahoo.com/yql/console/#h=select%20%2a%20from%20csv%20where%20url%3D%27http%3A//download.finance.yahoo.com/d/quotes.csv%3Fs%3DYHOO%2CGOOG%2CAAPL%26f%3Dsl1d1t1c1ohgvm3i%26e%3D.csv%27%20and%20columns%3D%27symbol%2Cprice%2Cdate%2Ctime%2Cchange%2Ccol1%2Chigh%2Clow%2Ccol2%2Ccol3%2Ccol4%27)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-09T06:51:02.387

基于谷歌金融，这个链接应该可以工作[链接](https://infoinspired.com/google-docs/spreadsheet/simple-moving-average-in-google-sheets/) 只要记住用分号替换“，逗号”;”

# php - Update rows in mysql via id

> ID：10373005
> 
> 赞同：0
> 
> 时间：2012-04-29T14:39:35.683
> 
> 标签：php

Ok i have this code.

```
<? //process.php, this will be use in updating, adding, deleting items and content
$a = $_POST['hid'];
$b = $_POST['doctitle'];
$c = $_POST['doccontent'];

if (isset($_POST['hid']) && ($_POST['doctitle']) && ($_POST['doccontent']))
{

$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("juliver", $con);

mysql_query("UPDATE doc SET title='$b', content='$c' WHERE id='$a'");

echo "<h2>Successfully updated.</h2>";

mysql_close($con);

}
else
{
echo "not been set, failed to process. please try again.";
}
?> 
```

I want to update the specified row on the table doc, it should update the title in this $b and the content in this $C via id $a. but nothing happen, is there wrong in my code?, nxt is I want to know if the record has been update. thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T14:53:30.400

1.  If`id`是一个整数列，您不应该`'`在它的值周围使用：

    `WHERE id=$a`

2.  您可以使用以下函数检查受影响的行[`mysql_affected_rows()`](http://php.net/manual/pl/function.mysql-affected-rows.php)数：

    `$rowsAffected = mysql_affected_rows($con);`

3.  您还应该检查查询字符串并尝试在 MySQL 上手动执行它（在 PhpMyAdmin 或类似的东西上），以检查它是否正常工作。

4.  您的代码没有反 SqlInjection 部分。您应该使用[PDO](http://php.net/manual/en/book.pdo.php)或任何类型的转义函数以使其更安全。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T15:03:56.453

您确定 if 语句正在触发（即 $_POST['hid'] 和其他帖子变量集）吗？另外，为什么你在'hid'而不是其他 2 个变量上运行 isset()？

哦，如上所述，您应该始终清理您的变量以防止 MySQL 注入。你总是可以使用[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)

# log4net - Error thrown when I'm trying to load log4net assembly

> ID：10373009
> 
> 赞同：10
> 
> 时间：2012-04-29T14:40:02.807
> 
> 标签：log4net

I'm try to build project that use LinqToExcel library. Additionally, I'm use log4net to write logs.

My problem started when I'm tryomg to run this lines of code:

```
var excel = new ExcelQueryFactory(ExcelPath);
return (from r in excel.Worksheet<RowDetails>(company.Name)
        select r).Count(); 
```

This line thrown exception:

> ERROR MyProj.Program Main:System.IO.FileLoadException: Could not load file or assembly 'log4net, Version=1.2.11.0, Culture=neutral, PublicKeyToken=669e0ddf0bb1aa2a' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) File name: 'log4net, Version=1.2.11.0, Culture=neutral, PublicKeyToken=669e0ddf0bb1aa2a'

It's important to note that I'm successful to use log4net before this line.

I would appreciate any help.

Thanks a lots!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T12:48:58.227

正如 marc_s 所指出的，当尝试加载同一程序集的不同版本时，通常会出现此问题。确保您的项目使用与 LinqToExcel 库相同的程序集版本，该库也依赖于 log4net。任何其他库也应该使用相同的程序集版本。要解决此问题，您还可以尝试在 app.config 中使用程序集重定向，如下所示：

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="log4net" publicKeyToken="669e0ddf0bb1aa2a" culture="neutral" />
        <bindingRedirect oldVersion="1.2.10.0" newVersion="1.2.11.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-14T19:00:25.330

尝试使用 nuget 安装它

```
Install-Package log4net -Version 2.0.0 
```

2.0.0 版适用于 log4net 1.2.11

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-11T14:23:32.643

我有类似的问题。我认为问题出在 LinqtoExcel 引用 Log4Net 版本 1.2.11，并且您已经单独引用了 Log4Net 并且您获得了最新的 1.2.13 版本。在构建输出中，您最终会得到 1.2.13，当 LintoExcel 调用 Log4Net 时，它预计会出现 1.2.11 和错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T08:39:27.147

我在通过 NuGet 升级 log4net 后遇到了这个问题，却发现新版本是用不同的密钥签名的。

[您可以从apache log4net 站点](http://logging.apache.org/log4net/download_log4net.cgi)获取“oldkey”版本，然后它对我有用。

# c# - Convert PivotItem into Usercontrol to improve loading performance in WP7

> ID：10373012
> 
> 赞同：2
> 
> 时间：2012-04-29T14:40:09.760
> 
> 标签：c#, windows-phone-7

My MainPage.xaml is a pivot page with 3 PivotItems. Currently it is loading all of the necessary stuff for each of the PivotItems on the MainPage constructor. This is bad because it loads a lot of stuff that are not necessary.

Reading [here](http://tozon.info/blog/post/2011/08/12/Windows-Phone-Pivot-and-loading-content.aspx) and [here](http://msdn.microsoft.com/en-us/library/ff941101%28v=vs.92%29.aspx) suggests that I only load the first PivotItem and after it loads, load the rest of the items. Specifically :

> Improve the performance of the pivot application by loading Pivot control content on-demand as opposed to loading everything at startup. One solution is to take the content from each PivotItem control and convert into UserControls. You can then subscribe to the LoadingPivotItem event on the root pivot control. Next, in the event handler, instantiate the proper UserControl and set it as the PivotItem content.

If I follow the suggestion:

```
private void OnLoadingPivotItem(object sender, PivotItemEventArgs e)
{
if (e.Item.Content != null)
{
    // Content loaded already
    return;
}

Pivot pivot = (Pivot)sender;

if (e.Item == pivot.Items[0])
{
    e.Item.Content = new Page1Control();
}
else if (e.Item == pivot.Items[1])
{
    e.Item.Content = new Page2Control();
}
else if (e.Item == pivot.Items[2])
{
    e.Item.Content = new Page3Control();
}
} 
```

I should use create class PageXControl ? Should it inherit somehow from main-page class ?

How do i take the content from each PivotItem control and convert into UserControls ?

Thanks

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T10:33:00.743

将 PivotItems 的内容提取到 UserControls 中实际上非常简单。首先，为每个 PivotItems 创建一个新的 UserControl。然后将 PivotItems 的内容从 PivotItem 移动到 UserControls 中。`OnLoadingPivotItem`然后按照您指定的方法在方法中创建控件。我在 GitHub 上创建了一个小项目，向您展示如何做到这一点。见：[https ://github.com/ErikSchierboom/pivotcontentdemo](https://github.com/ErikSchierboom/pivotcontentdemo)

如您所见，我从基类派生了 UserControl，因为它们在语义上是相同的。但是，这绝不是必要的，只需从 UserControl 继承即可。

与将 PivotItems 本身提取到自定义控件中的方法相比，我更喜欢这种方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-29T14:55:41.273

您可以创建自己的 Pivot 项，该项将从 PivotItem 继承。我已经根据 VS 中的默认 Pivot 项目整理了一个示例，它将两个 Pivot 项目拆分为它们自己的类：-

[http://www.smartmobiledevice.co.uk/projects/PivotItemUserControlSample.zip](http://www.smartmobiledevice.co.uk/projects/PivotItemUserControlSample.zip)

# iphone - Command /Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1

> ID：10373016
> 
> 赞同：77
> 
> 时间：2012-04-29T14:40:29.583
> 
> 标签：iphone, objective-c, ios, ipad

I'm trying to do an application reading pdf using pdf kit in Xcode 4.3 but it gives me the following error

```
ld: duplicate symbol _OBJC_METACLASS_$_OverlayManager in /Users/dt4it/Library/Developer/Xcode/DerivedData/MyPdf4-bmkjglhhvneluqcbwpceiqjvdcmq/Build/Intermediates/MyPdf4.build/Debug-iphonesimulator/MyPdf4.build/Objects-normal/i386/OverlayManager-D0866CFD31A05E68.o and /Users/dt4it/Library/Developer/Xcode/DerivedData/MyPdf4-bmkjglhhvneluqcbwpceiqjvdcmq/Build/Intermediates/MyPdf4.build/Debug-iphonesimulator/MyPdf4.build/Objects-normal/i386/OverlayManager-B31AE7412100AF6D.o for architecture i386
Command /Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

any help please ??

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-09-20T12:16:48.297

项目设置>在“目标”下，选择您的项目>构建阶段>打开“编译源”和“复制捆绑资源”。检查是否有任何文件以红色列出。如果是这样，只需将其删除。然后清理并运行。

为我工作。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-05-17T01:19:01.763

做一个清洁。 `product > clean`. 终端清除和重新启动对我不起作用，清洁工作。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-29T21:20:14.223

我遇到了同样的错误，似乎没有人在 StackOverflow 上有一个实际有效的答案。我的问题是当我尝试复制团队存储库中的项目时。结果是，在忽略文件中，所有扩展名为 的文件`*.pch`都被存储库提交忽略了。这意味着当我从 repo 中提取项目时，`.pch`文件丢失了，因此抛出了这个错误。

幸运的是，我仍然拥有该项目的副本，并且能够将`.pch`文件复制过来，然后我就可以正常编译了。

希望这可以帮助？

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-27T18:23:25.787

转到目标首选项，摘要选项卡，找到“部署目标”并增加它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-11T04:15:33.917

删除`~/Library/Developer/Xcode/DerivedData`帮助了我。

参考：[链接](https://stackoverflow.com/questions/34209145/how-to-debug-dsymutil-error-clang-modules-are-expected-to-have-exactly-1-compi)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-19T15:43:08.237

我也面临这个问题。而且我在 SO 中寻求帮助，而不是使用常识并检查错误消息。

错误消息的最后一部分与您相同。

```
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 11 
```

但我发现上面几行：

```
In file included from /Users/Ricardo/Documents/XCode/RealEstate-Finder-v1.2/RealEstateFinder/RealEstateFinder/RealEstateFinder-Prefix.pch:26:
/Users/Ricardo/Documents/XCode/RealEstate-Finder-v1.2/RealEstateFinder/RealEstateFinder/Config/Config.h:174:1: warning: type specifier missing, defaults to 'int' [-Wimplicit-int]
http://www.myserver.com/apps/mobile/rest.php?id=12 
```

它指向我的 Config.h 文件。

快乐编码！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-29T16:14:32.210

您不小心在实际的 OverlayManager 类本身中包含了 .m 文件 OverlayManager 而不是 .h 文件！基本上，他的编译器已经知道要编译 .m 文件，但是当你 #import 它时，编译器会尝试将它包含在同一个源文件中，从而生成重复的符号。但是您的情况是独一无二的，因为您正在 #importing 实际类的 .m 文件的 .m ！它递归地编译你的 OverlayManager 类。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-20T11:03:19.630

对我来说，从存储库克隆项目后会出现此错误。有人从项目名称中删除了一个空格（重命名：“The Project”为“TheProject”），这导致一些`Build Settings`错误路径无效。

有时阅读整个错误日志并不是一个坏主意......

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-21T20:20:12.387

同样的事情发生在我身上，我发现我忘了把“放在末尾

```
#import "CPDConstants.h 
```

所以与其

```
#import "CPDConstants.h" 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-25T08:34:15.557

试试这个 - 在 Xcode 左侧的文件/文件夹列表中单击您的项目名称（在列表的最顶部）。查看右侧窗口左侧的“目标”部分。很可能，列出了两个，第二个是“测试”项目。右键单击该项目并选择“删除”。然后尝试再次运行该项目。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-08-09T11:05:53.533

当安装了两个以上的 XCode 版本，其中为 Ex 合并了不同的 Swift 版本时，通常会出现此问题。安装了运行 Swift 1.2 和 Swift 2.0 的 XCode 6.4 和 XCode 7.3。错误地，您尝试使用不正确版本的 Ex 编译代码。你的项目在 Swift 1.2 中，你尝试用 xcode 7.3 编译它。在这种情况下，驱动器数据存储 swift 版本的信息，但是当您尝试使用正确的 XCode 编译代码时，它会出错。解决这个问题

1.  删除驱动器
    数据 在 Xcode 中选择首选项

[![在此处输入图像描述](../Images/8845fd3bc2bcf99f2b6384e294b8b786.png)](https://i.stack.imgur.com/SZorb.png)

2.  打开首选项后，单击位置选项卡，然后单击“驱动数据”路径前面的箭头。它将打开驱动数据文件夹

[![在此处输入图像描述](../Images/e57522eedf4b380cff81566663bb4d57.png)](https://i.stack.imgur.com/Jrotp.png)

3.  退出 Xcode
4.  删除所有驱动器数据。
5.  以正确的 XCode 错误重新打开项目 !!!!!!

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-06-12T06:15:45.587

我也有这个错误。但就我而言，我确信我会在这里成为一个人，当我在 iPhone 模拟器上应用程序崩溃后按下删除键时，我不小心删除了 main.m。

崩溃后，Xcode 显示 main.m 文件，当我点击删除时，我不小心从我的项目中删除了 main.m 文件，因为当突出显示文件名而不是详细代码时很容易做到看法。

Main.m 通常位于项目文件管理器中名为支持文件的组或文件夹中。我没有注意到这种情况发生，直到它下一次构建和运行失败，然后我不得不更仔细地重新阅读错误消息并看到它说 main.m 丢失。

谢谢大家的意见，但以防万一有人在我的位置检查是否有任何红色的文件名显示丢失的文件，如果有的话，请从备份中恢复它们。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-12-25T12:31:00.113

可能对某人有帮助：从项目中删除多个文件后，我遇到了同样的错误。在 git 存储库中提交删除后，此错误消失了...

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-04-28T17:27:41.237

这里要考虑的是 *.pch 文件。如果您从外部库执行包含，那么您必须确保在#ifdef **OBJC**之后和#endif 之前执行包含。如果您尝试在此条件之外进行包含，这可能是编译器错误的原因。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-02-10T23:51:01.530

这是否发生在使用 git 的团队中。其中一名团队成员从外部源添加了一个类，但没有将其复制到 repo 目录中。本地版本编译正常，但持续集成失败并出现此错误。

重新导入文件并将它们添加到版本控制下的目录中修复了它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-09-01T06:59:38.700

将丢失的文件（Xcode->target->Build Phases->compiled sources 中的红色文件）添加到目标文件夹为我解决了这个问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-09-10T14:37:04.873

我的问题是，在 Build Phases -> Compile Sources 下，我为文件添加了编译器标志，但我拼错了。它应该是：

```
-fno-obj-arc 
```

表明该文件不使用 ARC。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-01-03T11:23:25.297

我的情况，我通过以下方式解决：

转到**Build Phases**并检查**Compile Sources**文件，检查它是否有**重复**文件，只保留一个。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-06-21T22:31:15.397

`Swift Flag`在我的情况下，它是我的 Target 的 Build Settings > Other Swift Flags中的重复条目。我有两个`-Xfrontend`条目。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-01-20T06:25:46.777

就我而言，

**构建阶段**->**检查编译源文件**->删除xcode说“找不到”xxx.swift”的xxx.swift文件

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-10-18T17:14:24.717

**Xcode 8**

@Spoek 的[回答](https://stackoverflow.com/a/18916600/3411787)是对的，

但是如果你找不到**红色**的文件，那就找一个不透明度低的文件，

看到这张图，

[![在此处输入图像描述](../Images/6911c7a4e47c53c11d4e19c43a58c1f6.png)](https://i.stack.imgur.com/Zc2LC.png)

第一个在那里，但第二个在那里有注释，所以删除它。

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2013-07-29T00:32:07.957

这发生在我身上，我花了一个小时才找到它。就我而言，我输入得太快并且做了：

```
[seld method]; 
```

代替：

```
[self method]; 
```

严重地！我不知道为什么它没有以更容易识别的方式捕捉到这一点。但它当然是在寻找一个名为“seld”的类。

# c++ - Simple if condition with strings

> ID：10373017
> 
> 赞同：0
> 
> 时间：2012-04-29T14:40:29.700
> 
> 标签：c++, strcmp

> **Possible Duplicate:**
> [How do I properly compare strings in C?](https://stackoverflow.com/questions/8004237/how-do-i-properly-compare-strings-in-c)

```
#include <iostream>
using namespace std;

int main(){

    char name[100];
    cout<<"Enter: ";
    cin>>name;
    if(name == "hello"){
        cout<<"Yes it works!";
    }

    return 0;
} 
```

Why when I entered hello in the prompt i didnt got "Yes it works!" message?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T14:41:57.717

您需要用于`strcmp`测试是否相等。

`name`是一个数组，而不是 a `std::string`，并且`hello`是一个字符串文字，即 a `const char*`。您正在比较指针，而不是字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T14:44:48.493

尝试这个：

```
#include <string.h>
#include <iostream>
using namespace std;

int main(){

    char name[100];
    cout<<"Enter: ";
    cin>>name;

    if(strcmp(name, "hello") == 0) {
        cout << "Yes it works!"; 
    }

    return 0; 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T14:50:05.663

如果您使用`std::string`而不是 char 数组，它将起作用：

```
#include <iostream>
#include <string>
using namespace std;

int main(){

    string name;
    cout<<"Enter: ";
    cin>>name;
    if(name == "hello"){
        cout<<"Yes it works!";
    }

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T14:49:07.573

有些低级字符串（“C 字符串”）不具备您可能期望从其他语言获得的高级行为。当您输入字符串文字（在“引号”中）时，您正在创建这些类型的字符串之一：

[http://en.wikipedia.org/wiki/C_string_handling](http://en.wikipedia.org/wiki/C_string_handling)

在 C++ 中，人们做的第一件事就是将该低级字符串传递给 的构造函数，`std::string`以创建一个类的实例，该实例在接口中具有您将习惯使用的更多便利。

[http://www.cplusplus.com/reference/string/string/](http://www.cplusplus.com/reference/string/string/)

因为 C++ 是在一个非常类似于 C 的基础上分层的，所以了解 C 风格的字符串是如何工作的很有价值。同时，专业/惯用的 C++ 程序不应使用`strcmp`. 要对 C 风格编程和 C++ 风格编程之间的差异进行有趣的研究，请查看以下内容：

[学习标准 C++ 作为一种新语言 (PDF)](http://www2.research.att.com/~bs/new_learning.pdf) by Bjarne

# php - 如何按字符分割字符串，注意特殊字符

> ID：10373022
> 
> 赞同：3
> 
> 时间：2012-04-29T14:40:53.990
> 
> 标签：php, string, split

我正在尝试逐个字符地分解字符串，但我遇到了特殊字符的麻烦。我目前正在使用以下功能：

```
<?php
$input = "Comment ça va?";
$array_input = str_split($input, 1);
print_r($array_input);
?> 
```

这是输出：

```
Array (
[0] => C [1] => o [2] => m [3] => m [4] => e
[5] => n [6] => t [7] => [8] => � [9] => �
[10] => a [11] => [12] => v [13] => a [14] => ? ) 
```

我对换行符有同样的问题：

输入：
“Hé！
Oui？”

输出：

```
Array ( [0] => H [1] => � [2] => � [3] => ! [4] => 
[5] => [6] => O [7] => u [8] => i [9] => ? ) 
```

有人有这个问题的解决方案吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T14:46:20.503

`str_split`Unicode 字符串有问题。

您可以改用`u`修饰符`preg_split`

例如：

```
$input = "Comment ça va?";
$letters1 = str_split($input);
$letters2 = preg_split('//u', $input, -1, PREG_SPLIT_NO_EMPTY);

print_r($letters1);
print_r($letters2); 
```

将输出

```
Array ( [0] => C [1] => o [2] => m [3] => m [4] => e 
        [5] => n [6] => t [7] => [8] => � [9] => � 
        [10] => a [11] => [12] => v [13] => a [14] => ? ) 

Array ( [0] => C [1] => o [2] => m [3] => m [4] => e 
        [5] => n [6] => t [7] => [8] => ç [9] => a 
        [10] => [11] => v [12] => a [13] => ? ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T14:48:09.490

这是因为 PHP 的`str_split`函数不是多字节安全的，即它不能正确处理 Unicode。您可以改用这个函数，它是一个多字节安全的实现`str_split`

```
function mb_str_split( $string ) { 
    # Split at all position not after the start: ^ 
    # and not before the end: $ 
    return preg_split('/(?<!^)(?!$)/u', $string ); 
} 
```

（来源：[PHP 文档](http://www.php.net/manual/en/function.mb-split.php#99851 "PHP 文档")中的用户评论）

# mysql - 如何根据另一个表中的值更新数据库记录？

> ID：10373023
> 
> 赞同：2
> 
> 时间：2012-04-29T14:40:58.667
> 
> 标签：mysql, sql

我有`USERS`包含以下字段的表`_id` `name` `number_of_posts`

我有`POSTS`包含以下字段的表`_id` `user_id` `post_text`

没有和之间的关系，`users`即`posts`一个`one- to -many`用户有很多帖子

问题是如何更新`number_of_posts`in`users`表，使其保持表中的帖子`posts`数

**更新**

我有这些表填充了大约数百条记录，无法使用触发器来更新 number_of_posts 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T14:58:33.057

`users`下面给出的示例脚本显示了如何通过同时加入和`posts`表使用来获取与用户关联的帖子数，`LEFT OUTER JOIN`然后在*用户*`GROUP BY`表中的 *_id* 字段上使用以获取帖子数。

 *[**单击此处查看 SQL Fiddle 中的示例。**](http://sqlfiddle.com/#!2/0032a/2)

询问：

```
CREATE TABLE users 
(
    _id     INT NOT NULL
  , name    VARCHAR(30) NOT NULL
);

CREATE TABLE posts 
(
    _id     INT NOT NULL
  , _userid INT NOT NULL
  , name    VARCHAR(30) NOT NULL
);

INSERT INTO users (_id, name) VALUES
  (1, 'user 1'),
  (2, 'user 2'),
  (3, 'user 3');

INSERT INTO posts (_id, _userid, name) VALUES
  (1, 1, 'post 1'),
  (2, 1, 'post 2'),
  (3, 2, 'post 3');

SELECT          u._id
            ,   u.name
            ,   COUNT(p._id) number_of_posts
FROM            users u
LEFT OUTER JOIN posts p
ON              u._id = p._userid
GROUP BY        u._id; 
```

*输出*：

```
_ID NAME    NUMBER_OF_POSTS
--- ------  ---------------
1   user 1         2
2   user 2         1
3   user 3         0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T14:55:58.580

作为一次性更新，试试这个，但触发解决方案是保持最新状态的正确方法：

```
UPDATE users AS u SET u.number_of posts = (SELECT COUNT(*) FROM posts AS p WHERE p.user_id=u.user_id) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T14:43:25.437

您可以使用帖子表上的触发器来执行此操作。每次插入帖子时，更新 users 表上的 number_of_posts。

见[http://dev.mysql.com/doc/refman/5.6/en/triggers.html](http://dev.mysql.com/doc/refman/5.6/en/triggers.html)

**更新：**完整的工作解决方案

```
drop table if exists users;
create table users (  
   _id bigint unsigned auto_increment primary key,   
   name varchar(50) not null, 
   number_of_posts integer not null default 0
);

drop table if exists posts;
create table posts (  
   _id bigint unsigned auto_increment primary key,   
   user_id bigint unsigned not null, 
   post_text text
);

-- Populate with dummy data
insert into users (name) values ('Bob'), ('Sally');
insert into posts (user_id, post_text) 
    values (1, 'First!!'), (1, 'Second...'), 
           (2, 'Post 1'), (2, 'another post'), (2, 'more posts');

-- One-time update of users table
update users u
set u.number_of_posts = (      
  select count(0) from posts p
  where u._id = p.user_id      
);

-- trigger to keep post count up to date when future posts are made
drop trigger if exists trg_post_count;
delimiter $$

create trigger trg_post_count
after insert on posts
for each row 
begin
    select count(0) into @post_count 
    from posts
    where user_id = NEW.user_id;

    update users
    set number_of_posts = @post_count
    where _id = NEW.user_id;
end;
$$

delimiter ;

-- test trigger
insert into posts (user_id) values (2);
select * from users; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T14:57:07.940

正如 dwurf 建议的那样，我绝对建议将其放入触发器中以保持该字段的最新状态。但是，我完全不同意他的观点，即它应该只是一个您在每次更新时增加的数字。这很脆弱，容易出错。您应该使用以下查询来确定每个用户有多少帖子：

```
update
  users
set 
  number_of_posts = ( 
    select
      count(0)
    from
      posts p
    where
      p.user_id = users.id
    )   
; 
```*

# c - 这个字符指针声明是什么意思？

> ID：10373034
> 
> 赞同：2
> 
> 时间：2012-04-29T14:42:20.680
> 
> 标签：c, pointers, char

> **可能重复：**
> [指向数组/指针数组的 C 指针消歧](https://stackoverflow.com/questions/859634/c-pointer-to-array-array-of-pointers-disambiguation)

有什么`char (*p)[4];`不同`char *p[4];`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T14:44:14.093

[http://cdecl.org/](http://cdecl.org/)

1.  `char (*p)[4];`-- 将 p 声明为指向 char 数组 4 的指针。
2.  `char *p[4];` -- 将 p 声明为指向 char 的指针的数组 4。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T14:53:04.387

`char (*p)[4];`:`p`是一个指向`char`长度为 4 的数组的指针。

```
 char [4]
    points to              |
     char [4]              v

   +------+             +------+------+------+------+
   |  p   |------------>|      |      |      |      |
   +------+             +------+------+------+------+
                         char    char   char   char  

   p will point to a char [4] array. Array is not created. 
   p is intended to be assigned at address of a char [4] 
```

`char *p[4];`:`p`是一个长度为 4 的数组，数组的每个位置都是一个指向`char`

```
 +------+------+------+------+
   p          |      |      |      |      |
an array      +------+------+------+------+
 itself          |      |      |      |
                 v      v      v      v  
               char*  char*  char*  char*

  p is an array and will be allocated in stack (if automatic) 
```

# sql - 在一条记录中以两种不同的方式聚合数据

> ID：10373043
> 
> 赞同：0
> 
> 时间：2012-04-29T14:43:01.630
> 
> 标签：sql, ms-access

> **可能重复：**
> [我的 SQL 查询需要帮助](https://stackoverflow.com/questions/10352750/need-help-for-my-sql-query)

好吧，我之前可能也发布了这个，但是我的要求发生了一些变化，所以请帮助我完成这个。

我的数据库结构：

**ATT**（`Activity`表）

*   Act_ID(PK)
*   Assigned_To_ID (FK, 参考`Emp_ID`)
*   Project_ID (FK, 参考`Project_ID`)
*   Product_ID (FK, 参考`Product_ID`)
*   状态（可以`New, OnHold, Cancel, Closed`）

**产品_桌子**

*   Product_ID (PK)
*   产品名称

**项目表**

*   Project_ID (PK)
*   项目名称

**Employee_Table**

*   Emp_ID (PK)
*   F_名称。

**Emp_Product_Project_Mapping**

（此表基本上映射了将哪个员工分配到哪个产品和哪个项目。在所有 3 列中都允许重复输入，以映射可以将 1 个员工分配到多个项目或产品）

*   Emp_IDFK(FK 指 Emp_ID PK)
*   Product_IDFK(FK 指 Product_ID PK)
*   Project_IDFK(FK 指 Project_ID PK)

**约束**

*   In 1 Project --> 多个员工可以工作
*   1 位员工 --> 可以分配多个活动 ( `Act_ID`)
*   在任何给定时间点都`Status`可以是那些给定值中的任何一个。
*   在任何给定点，一项活动都可以分配给 1 个产品和 1 个项目。

现在在我的 SQL 查询中，我想做的是负载检查::

活动（由 表示`Act_ID`）分配给员工，由 表示`Assigned_To_ID`，对于项目（`Project_ID`in `ATT_Table`），对于产品（`Product_ID`in `ATT_table`）和特定状态。我需要从我的 SQL 查询中输出 5 个值：

1.  雇员的名字
2.  产品名称
3.  为该产品（在 2 中）分配的总活动数，其中状态为 New 或 InProcess。（在这里，我正在计算与产品（在 2 中）相关的所有活动。无论它被分配给谁。它与员工无关（在 1 中。我想要在我的第 4 部分）。
4.  现在，我想要员工（1）分配到的活动计数（在我从（3）获得的总计数中）。希望我让自己清楚。第三个是分配给产品的总活动（在 2 中）。在第 4 次，我的第 3 次结果中的活动被分配给第 1 次的员工。
5.  加载。那将是 = (Result in 3)/(result in 4) * 100 ((Result in 3) 是比 (result in 4) 更大的值，这很明显。)

现在可能有一个条件，一个员工假设 E1 正在开发产品 P1，P2。所以我的表输出将如下所示：

```
1    2     3    4     5
E1   P1    
E1   P2 
```

因此，这里 3、4、5 将具有与该产品（P1 或 P2）的活动相对应的值

请帮我解决这个问题。使用 MSaccess 数据库。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:16:46.060

由于您想以两种独立的方式“分组”您的数据，因此您不能使用单个`GROUP BY`子句来完成。相反，您必须使用子查询计算每个产品的活动总数；在这里，我还使用子查询来计算每个员工在这些产品上的活动，因为我认为这比在父`GROUP BY`查询中混合一个子查询更容易理解：`GROUP BY`

```
SELECT
  Employee_Table.F_Name,
  Product_Table.Product_Name,
  AllActivities.Count,
  EmployeeActivities.Count,
  EmployeeActivities.Count / AllActivities.Count AS Load
FROM
  Employee_Table, Product_Table
  INNER JOIN (
    SELECT Product_ID, COUNT(*) AS Count
    FROM ATT
    GROUP BY Product_ID
  ) AS AllActivities ON
    AllActivities.Product_ID = Product_Table.Product_ID
  INNER JOIN (
    SELECT Assigned_To_ID, Product_ID, COUNT(*) AS Count
    FROM ATT
    GROUP BY Assigned_To_ID, Product_ID
  ) AS EmployeeActivities ON
        EmployeeActivities.Assigned_To_ID = Employee_Table.Emp_ID
    AND EmployeeActivities.Product_ID     = Product_Table.Product_ID 
```

# python - 异常处理程序位于单独模块中的异常

> ID：10373048
> 
> 赞同：3
> 
> 时间：2012-04-29T14:43:54.423
> 
> 标签：python, exception, module

考虑以下两个模块 prog.py 和 err.py。这两个都是一个更大的程序的例子，它表现出这个问题。我需要将功能分离成更小的源文件，每个文件都有一个测试台。

Err.py 包括一个测试台。当它创建一个 prog 对象时，取决于异常被调用的方式，异常是否被捕获。

似乎即使 prog.py 在“from err import *”语句中导入 err 对象，模块名称仍然被推断（错误？），但似乎它所指的 err 与模块本身不同

这是 Python 2.7 中的错误还是预期行为？

只需获取两个文件并运行 err.py 即可了解我的意思..

第一个文件：

```
#prog.py

from err import *

class prog(object):
    def func1(self):
        raise MySubError

    def func2(self):
        doError() 
```

第二个文件：

```
#err.py
import prog
import inspect
import sys

class myError(Exception):
    pass

class MySubError(myError):
    pass

def doError():
    raise MySubError

if __name__=="__main__":

    p=prog.prog()

    try:
        doError()
    except MySubError as er:
        print type(er)
        print "Captured 1"
    except Exception as er:
        print type(er)
        print "Not Captured 1"        

    try:
        p.func1()
    except MySubError as er:
        print type(er)
        print "Captured 2"
    except Exception as er:
        print type(er)
        print "Not captured 2"

    try:
        p.func2()
    except MySubError as er:
        print type(er)
        print "Captured 3"
    except Exception as er:
        print type(er)
        print "Not captured 3" 
```

在我看来，好像 err 应该知道它是什么模块，并且异常应该是 err.MySubError，而不仅仅是 MySubError。我可以获取模块，但不能获取实例.....

输出：

```
<class '__main__.MySubError'>
Captured 1
<class 'test.MySubError'>
Not captured 2
<class 'test.MySubError'>
Not captured 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T15:04:22.773

这里的问题是它`err`实际上充当了两个不同的模块，本质上。

在 Python 中运行的主模块称为`__main__`. 执行的所有内容都放入它的命名空间。这里发生的事情是您将模块导入到您的其他脚本中并且它被称为`err`，因此它们不被认为是相同的。

这有点奇怪，但有必要保持 Python 导入系统的工作方式一致。这里最好的答案是将您的异常移到您的脚本之外，称为`__main__`. 无论如何，这是一个很好的设计，因为您实际上是在此处创建循环导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T15:25:57.567

问题是 python 不知道`err.py`与您的主脚本相同。通常一个模块只导入一次，但是当主脚本将自己作为一个模块导入时，python 会感到困惑，你实际上是在加载`err.py`两次。（我不知道有什么好的理由；也许@Latty 可以更具体）。

您可以通过这个简单的脚本看到问题：

```
# File: recur.py
import recur
print "This is the module"

if __name__ == '__main__':
    print "This is main" 
```

如果你运行它，你*不会*得到无限递归，因为模块只被导入一次。但是您会看到两次“这是模块”。

只要您的主脚本不导入自身（直接或间接），将异常从一个模块导入另一个模块就没有问题。有两个相互依赖的模块 A 和 B 也没有问题，每个模块都导入另一个：尝试一下`import A`，您会发现它们中的每一个都只加载一次。

**编辑：**虽然我真的认为您应该避免将主脚本作为模块导入，但我只是为您的示例想到了一个修复：

```
# err.py
...
if __name__=="__main__":
    from prog.err import *     # add this line 
```

这将用它们的模块版本替换所有重复的脚本类，并且一切都将按预期工作。

# c# - 隐藏 DataGridViewRow 顶部和底部边框线

> ID：10373050
> 
> 赞同：1
> 
> 时间：2012-04-29T14:44:05.217
> 
> 标签：c#, c#-4.0, datagridview

我有一个名为 MyDataGrid1 的 DataGridView。根据字段值，我需要隐藏某些行的底线。

```
DataTable MyDtb = new DataTable();
MyDtb.Columns.Add("Colm_1", Type.GetType("System.String"));
MyDtb.Columns.Add("Colm_2", Type.GetType("System.Int32"));
MyDtb.Columns.Add("Colm_3", Type.GetType("System.String"));

MyDataGrid1.DataSource = MyDtb; 
```

我有两个要求...

1.  一旦用户在 Colm_2 中输入“5”，那么我想删除 CurrentRow 下方 4 行顶部和底部的 CellBorder Lines 这可能吗？

2.  同样在 Form_load 事件中，我想格式化 MyDataGrid1，根据 Colm_2 的值，如要求 01。假设 Colm_2=2，则必须隐藏 MyDataGrid1 的当前行和以下行的顶部和底部 CellBorder 行。这也可能吗？

谢谢

# javascript - 在jQuery中追加回调后锚点不起作用

> ID：10373052
> 
> 赞同：1
> 
> 时间：2012-04-29T14:44:10.167
> 
> 标签：javascript, jquery, ajax

t 我已经尝试解决这个问题两天了，我快疯了，请大家帮忙。我正在尝试在锚点内附加一个新的 div（插入 html 代码），看起来还可以，但链接不起作用。我正在尝试使用 class='delete' 来调用另一个 jquery 函数来删除新的 div 元素。这个想法是一个购物车，我添加了一个产品，添加后我想删除，但它不起作用。这是我的代码：

```
$("#dialog-form").dialog({
    autoOpen: false,
    height: 320,
    width: 320,
    modal: true,
    show: 'slide',
    buttons: {
        "Agregar Tour": function () {
            var bValid = true;
            allFields.removeClass("ui-state-error");

            bValid = bValid && checkLength(adl, "Adultos", 1, 5);
            bValid = bValid && checkLength(chls, "Niños", 0, 5);
            bValid = bValid && checkLength(fecha, "Fecha", 1, 16);

            var id = $(this).val("id");
            var string = 'tourid=' + tourid;
            //var tourid = '<?php echo $moneda ?>';
            //alert(tourid);
            if (bValid) {
                $.ajax({
                    url: "add_item.php",
                    data: "tourid=" + tourid + "&adl=" + adl.val() + "&chl=" + chls.val() + "&fecha=" + fecha + "",
                    dataType: 'json',
                    type: "GET",
                    cache: false,
                    success: function (data) {
                        var regis = data[0];
                        var titulo = data[6];
                        var desc = data[7];
                        var total = data[12];
                        var foto = data[15];
                        var items = data[21];
                        var ruta = "images/hoteles/" + foto + "";

                        $("#containerx").append("<div id='containerx' class='koko' ><b><font color='#3399CC'>" + titulo + "</font></b><br>" + desc + "<br>" + "<b><font color='#ff0099'>Sub-total </font></b><image src='images/arrow.gif'> $" + total + " MXP " + "<a href='#' id=" + regis + " class='delele'>" + "<image src='images/delete.gif'></a></div><div style='clear:both;'></div>");
                        $("#containerx.koko").fadeTo(1000, 0.7);

                        $("#dialog-message").dialog({
                            modal: true,
                            show: 'slide',
                            buttons: {
                                Ok: function () {
                                    $(this).dialog("close");
                                }
                            }
                        });

                        $("#items").html("<div id='items'>[" + items + "]</div>");

                        $('#load').fadeOut();

                    }
                });
                $(this).dialog("close");
            }
        },
        Cancel: function () {
            $(this).dialog("close");
        }
    },
    close: function () {
        allFields.val("").removeClass("ui-state-error");
    }
});

$(".add-item").button().click(function () {
    tourid = $(this).attr("id");
    $("#dialog-form").dialog("open");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T14:56:17.593

在此“删除”事件等上，您需要使用“实时”jquery live [http://api.jquery.com/live/](http://api.jquery.com/live/)或在添加内容后再次附加事件。

只需在呈现内容后附加所有事件，如果您要动态添加新内容，则如果它们不是“实时”事件，则需要再次附加事件。

jquery“Live”事件也将尝试附加到动态添加的内容:)。阅读我添加的文档，您将了解一切。

# gwt - GWT：可以多次编辑同一个代理吗？

> ID：10373056
> 
> 赞同：2
> 
> 时间：2012-04-29T14:44:50.333
> 
> 标签：gwt, gwt2, requestfactory

我将 GWT 2.4 与 RequestFactory 一起使用，但对我来说并非一切都清楚。

在[这篇](http://fascynacja.wordpress.com/2011/04/17/exciting-life-of-entity-proxies-in-contexts-of-requestfactory/)文章中，作者写了当我们将实体代理与一个实例`RequestContext`一起使用并希望`edit()`将此实体代理与其他实例重用（）时的情况`RequestContext`：

> 它不能被编辑，因为它已经分配了一个 requestContext。如果要更改它，您必须再次从服务器检索此实体的实例

但是当我执行这段代码时，我没有遇到任何异常：

```
RequestContext newRequest1 = factory.myRequest();
newRequest1.edit(proxy);
RequestContext newRequest2 = factory.myRequest();
newRequest2.edit(proxy); 
```

当我运行这个版本时，出现了 autor 描述的问题（异常）：

```
RequestContext newRequest1 = factory.myRequest();
MyProxy edited = newRequest1.edit(proxy);
RequestContext newRequest2 = factory.myRequest();
newRequest2.edit(edited); 
```

因此，似乎只有返回的可编辑副本`edit()`与 RequestContext 实例直接相关。

在这种情况下，在我的编辑视图中保留一个（不可编辑/冻结）代理实例并且每次用户单击“编辑”按钮时，我`edit()`使用新的新 RequestContext 的方法是否有问题？或者我也应该每次都获得新的代理实例？

获取新的代理实例对我来说似乎有点尴尬，但我想重用一个代理实例可能会导致一些与向服务器发送更改增量相关的问题？

所以换个说法：用多个 ? 重用单个代理实例是一个好习惯`RequestContexts`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:37:10.890

编辑同一个代理两次（或更多）没有问题，只要一次只有一个可编辑的实例（你的第一个代码片段应该抛出；如果不是那么它是一个错误；如果你不保留它可能会工作`RequestContext`和编辑的代理上的引用）。

请注意，RequestFactory 仅将修改后的属性发送到服务器，但它通过与传递给的不可编辑实例进行比较来实现`edit()`；所以你应该尽量使用最新的实例来保持你的服务器端/持久数据尽可能接近你的客户端数据（看起来很明显，但在实践中可能会导致一些*意外*：如果你看到*foo* on客户端但在服务器上有*bar*，您将在服务器端保留*bar*，直到您将客户端上的属性修改为*foo*以外的其他内容）

# jquery - Colorbox Iframe 手动调用？

> ID：10373060
> 
> 赞同：1
> 
> 时间：2012-04-29T14:45:24.967
> 
> 标签：jquery, colorbox

是否可以通过单击这样的 div 来打开颜色框 iframe？

```
<div class="somediv" onclick="$.colorbox({href:'preview.html'});"> 
```

这会打开一个 Ajax 模式，但是我想打开一个 iframe，而不必将 url 存储在这个 div 之外。

那可能吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T23:09:25.777

```
<div class="somediv" onclick="$.colorbox({href:'preview.html', iframe:true, width:'90%', height:'90%'});"> 
```

# c# - 多行文本框到数组 C#

> ID：10373061
> 
> 赞同：4
> 
> 时间：2012-04-29T14:45:37.900
> 
> 标签：c#, arrays, multidimensional-array

我正在尝试将多行文本框的每一行的值传输到字符串数组或多维数组中。我还有 3 个多行文本框需要放入同一个数组中。以下是我一直在尝试的方法之一：

```
ParkingTimes[0] = tbxtimeLimitS1.Text;

for (int i = 1; i <= 10; i++)
   ParkingTimes[i] = tbxparkingTimesS1.Lines;

ParkingTimes[11] = tbxtimeLimitS2.Lines;

for (int x = 0; x <= 10; x++)
   for (int i = 12; i <= 21; i++)
       ParkingTimes[i] = tbxparkingTimesS2.Lines;

ParkingTimes[11] = tbxtimeLimitS2.Lines[0];

for (int x = 0; x <= 10; x++)
    for (int i = 23; i <= 32; i++)
        ParkingTimes[i] = tbxparkingTimesS3.Lines; 
```

我究竟做错了什么？有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-29T14:54:22.820

你可以简单地做

```
string[] allLines = textbox.Text.Split('\n'); 
```

这将分割每一行并将结果存储在数组中的适当索引中。然后你可以像这样迭代它们：

```
foreach (string text in allLines)
{
    //do whatever with text
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T15:01:55.910

您可以使用 List 而不是字符串数组然后 AddRange 方法可以简化您的方法消除 foreach 循环

```
List<string> ParkingTimes = new List<string>()
ParkingTimes.Add(tbxtimeLimitS1.Text);   
ParkingTimes.AddRange(tbxparkingTimesS1.Lines);
ParkingTimes.AddRange(tbxtimeLimitS2.Lines);   
ParkingTimes.AddRange(tbxparkingTimesS2.Lines);   
ParkingTimes.AddRange(tbxtimeLimitS2.Lines);   
ParkingTimes.AddRange(tbxparkingTimesS3.Lines); 
```

如果您的代码仍然需要一个字符串数组，则可以使用

```
string[] myLines = ParkingTimes.ToArray(); 
```

此功能的示例`List<string>`可以在[MSDN上找到](http://msdn.microsoft.com/en-US/library/z883w3dc%28v=VS.80%29.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T15:17:35.637

你可以这样做：

```
var totalLines = new List<String>();
totalLines.AddRange( tbxparkingTimesS1.Lines );
totalLines.AddRange( tbxparkingTimesS2.Lines );
totalLines.AddRange( tbxparkingTimesS3.Lines ); 
```

如果你需要它在一个数组而不是一个列表中，然后调用：

```
var array = totalLines.ToArray(); 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-17T15:51:30.023

这对我有用：

```
string[] textArray = textBox1.Text.Split(new string[] { System.Environment.NewLine }, StringSplitOptions.None); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-25T14:10:15.340

```
string[] split = textBox1.Text.Split('\n'); 
```

> 或者您也可以使用：

```
int srlno=10;
string[] split = new string[srlno];
foreach(string x in textBox1.Lines)
{
     split = (split ?? Enumerable.Empty<string>()).Concat(new[] { x }).ToArray();
} 
```

# matlab - 如何求两条曲线的相似度以及相似度的得分？

> ID：10373062
> 
> 赞同：8
> 
> 时间：2012-04-29T14:45:56.543
> 
> 标签：matlab, time-series, similarity, curves

我有两个数据集（t，y1）和（t，y2）。这些数据集在视觉上看起来相同，但它们有一些时间延迟或幅度偏移。我想找到两条曲线之间的相似性（为近似相似的曲线给出相似性分数 1，为不相似的曲线给出 0）。由于数据的波动，一些曲线似乎有所不同。所以，我正在寻找找到曲线之间相似性的方法。我已经在 Matlab 中尝试过梯度命令来找到每个时间步的曲线斜率并进行比较。但这并没有给我令人满意的结果。请任何人建议我找到曲线之间相似性的方法。

提前致谢

![在此处输入图像描述](../Images/221c757ef1bed91b3df8b3d9c151552d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T02:29:29.153

对于时间序列数据相似度测量，一种传统的解决方案是 DTW（Dynamic Time Warpping）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T21:13:38.697

这个答案假设您的 y1 和 y2 是*信号*而不是*曲线*。后者我会尝试使用 POLYFIT 进行参数化。

如果它们看起来确实相同，但在时间上发生了变化（而不是缠绕），那么您可以：

```
y1n=y1/norm(y1);
y2n=y2/norm(y2);
normratio=norm(y1)/norm(y2);
c=conv2(y1n,y2n,'same');
[val ind]=max(c); 
```

*ind*将指示时移和*normratio*的大小差异。两者都可以用作相似性度量的特征。但是，我假设您的信号实际上的变化不仅仅是时移或幅度，在这种情况下，某种信号参数化可能是更好的选择，然后在这些参数上建立一个指标。

在对您的数据一无所知的情况下，我会首先尝试使用 AR（假设像 FFT 或 PRINCOMP 这样典型的东西不起作用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-15T09:55:13.343

以下论文中的 dv 和 dc 距离可能会解决您的问题。 [http://bioinformatics.oxfordjournals.org/content/27/22/3135.full](http://bioinformatics.oxfordjournals.org/content/27/22/3135.full)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-17T15:35:43.543

1.  Kolmongrov Smirnov 检验（`kstest2`Matlab 中的函数）
2.  卡方检验
3.  衡量相似度有一个衡量标准，叫做MIC：最大信息系数。它量化了 2 个数据或曲线之间共享的信息。

# c# - 同步自定义控件和richtextbox C#

> ID：10373064
> 
> 赞同：1
> 
> 时间：2012-04-29T14:46:12.657
> 
> 标签：c#, custom-controls, sync

所以我的主窗体上有 2 个控件，一个自定义 hexbox 控件和一个richtextbox，如下图所示（它不会让我发布图像，所以必须点击链接）。我想做的是根据用户在 hexbox 控件中单击的位置，右侧的富文本框将滚动到关联的行。

[http://i.stack.imgur.com/8PfRt.jpg](http://i.stack.imgur.com/8PfRt.jpg)

我当前遇到的问题是处理 hexbox 点击的代码包含在一个单独的类（hexbox.cs）中，因此我无法获取点击的位置并滚动到包含在 mainform 类中的richtextbox。我试图创建一个新的主窗体实例来访问richtextbox，但显然这个结果是创建一个没有原始内容的新richtexbox。

这是 hexbox 类中处理鼠标单击的代码（如果有帮助的话）：

```
void SetCaretPosition(Point p)
    {
        System.Diagnostics.Debug.WriteLine("SetCaretPosition()", "HexBox");

        if (_byteProvider == null || _keyInterpreter == null)
            return;

        long pos = _bytePos;
        int cp = _byteCharacterPos;

        if(_recHex.Contains(p))
        {
            BytePositionInfo bpi = GetHexBytePositionInfo(p);
            pos = bpi.Index;
            cp = bpi.CharacterPosition;

            SetPosition(pos, cp);

            ActivateKeyInterpreter();
            UpdateCaret();
            Invalidate();
        }
        else if(_recStringView.Contains(p))
        {
            BytePositionInfo bpi = GetStringBytePositionInfo(p);
            pos = bpi.Index;
            cp = bpi.CharacterPosition;

            SetPosition(pos, cp);

            ActivateStringKeyInterpreter();
            UpdateCaret();
            Invalidate();
        }         
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T14:55:49.153

如果我理解正确，这应该会有所帮助。

如果您有权访问 hexbox 类，则可以公开事件（MouseClick - 或类似事件） - 甚至使用 args prividig 选定行创建自己的事件 - 在您的表单中订阅此事件。

然后，当用户单击您的表单类时，会收到通知。

```
class HexBox : UserControl{

   // .. 
}

public class MyForm :Form{
  public MyForm(){
    HexBox hexBox = new HexBox();
    Controls.Add(hexBox);
    hexBox.MouseDown += (sender, args) =>{
       // call your scroll to function 
    };

    InitializeComponent();

  }
} 
```

# c++ - g++ 忽略被覆盖的虚函数

> ID：10373073
> 
> 赞同：1
> 
> 时间：2012-04-29T14:47:27.867
> 
> 标签：c++, virtual

我有两个这样的类（简化和重命名）：

```
class Base
{
 public:
  virtual void operator()( ) { cout << "Base\n";}
};

class Derived : public Base
{
 public:
  void operator()( ) { cout << "Derived\n"; }
};

void doSomething( Base obj )
{
  obj( );
}

int main( )
{
  list<Base> bList;
  Derived d1, d2, d3;
  bList.push_back( d1 );
  bList.push_back( d2 );
  bList.push_back( d3 );

  for( list<Base>::iterator it = bList.begin(); it != bList.end(); it++ )
    {
      doSomething( *it );
    }
  return 0;
} 
```

当我运行它时，我得到：

```
Base
Base
Base 
```

即 Base::operator() 被调用。显然这不是我想要发生的。我尝试将 doSomething 更改为

```
void doSomething( Base& obj ) 
```

但这仅在直接使用 Derived 对象而不是列表中的对象调用时才有效。并且引用不能存储在列表中。
有什么办法可以让 doSomething “看到”它必须调用派生类的函数（不必求助于指针）？

编辑：指出了问题，对于可能遇到此问题的其他人来说，这里有一个链接： [什么是对象切片？](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T14:51:19.313

以下：

```
list<Base> bList;
Derived d1, d2, d3;
bList.push_back( d1 );
bList.push_back( d2 );
bList.push_back( d3 ); 
```

**切片**你的对象。它们不再是类型`Derived`，而是`Base`。您需要在容器中使用指针或智能指针来实现预期的行为。

阅读对象切片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T14:59:52.290

问题不在于编译器没有“看到”它需要调用派生类中的函数，问题在于您只是将基类存储在您的容器中`list<Base>`。这导致了通常所说的对象切片。当编译器将您的`Derived`对象复制到只能容纳`Base`对象的容器中时，它只能复制对象的基本部分并“切片”使其成为`Derived`对象的部分。

为了在遵循值语义的容器中使用多态性（即，假设您将实际对象存储在其中，而不是对对象的引用形式），您需要存储指向所述对象的指针。我建议不要将原始指针存储在标准库容器中，因为它会引入额外的生命周期管理问题——您必须从容器外部控制指向对象的生命周期，这往往是一个非常糟糕的主意，通常要么导致内存泄漏或悬空指针，如果不是两者兼而有之。

我的建议是，如果您可以使用 boost，请使用`ptr_container`为此目的明确设计的模板类之一。如果不能，并且您使用的是足够现代的编译器，则可以使用 a`std::list<std::shared_ptr<Base> > >`并依靠`shared_ptr`来管理对象的生命周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T06:36:08.870

上面的答案引导我找到最终的解决方案。简短的回答是，“不。您必须使用指针列表。” 这就是我想出的...

```
#include <iostream>
#include <memory>
#include <list>

class Base
{
    public:
        virtual void foo()
        {
            std::cout << "Base::foo" << std::endl;
        }
};

class Derived : public Base
{
    public:
        void foo()
        {
            std::cout << "Derived::foo" << std::endl;
            Base::foo();
        }
};

int main()
{
    std::list<std::shared_ptr<Base>> bases;
    auto p = std::make_shared<Derived>();
    bases.push_back(p);

    for (std::list<std::shared_ptr<Base>>::iterator i = bases.begin(); i != bases.end(); i++)
    {
        (*i)->foo();
    }

    return 0;
} 
```

# java - 使用签名的小程序

> ID：10373074
> 
> 赞同：0
> 
> 时间：2012-04-29T14:47:31.173
> 
> 标签：java, applet, signed-applet

我想从我编写的小程序中创建和工作一个签名的小程序。小程序本身使用一个库 ( [owlapi](http://owlapi.sourceforge.net/) )，该库必须具有正确的写入权限才能保存对 owl 存储库所做的更改。

为此，我应该使用 .policy 文件或签名的小程序。为了制作签名的小程序，我遵循[了本](http://www.informit.com/articles/article.aspx?p=433382&seqNum=2)手册。我按照这封信上的手册进行操作，但它不起作用。我到了我有一个签名的小程序并将其包含在 html 中的地步，如下所示：

```
<applet  code="owlapi.LoadOntology.class" archive="owlapi/SignedLoadOntology.jar" height=100 width=1000 MAYSCRIPT>
<param NAME="archive" VALUE='owlapi/Signedowlapi-src.jar, owlapi/Signedowlapi-bin.jar'>
</applet> 
```

当我使用 appletviewer（该手册中推荐）测试该小程序时，我收到错误消息

我想我可以通过使用该库手动编译代码然后用所有这些 .class 文件创建一个 jar 来解决这个问题，但这并没有帮助：

```
javac -cp owlapi-src.jar:owlapic-bin.jar LoadOntology.java
jar cvf LoadOntology *.class 
```

有人知道如何创建这样一个使用其他 jar 文件的签名小程序吗？

*更新：*阅读[此](https://stackoverflow.com/questions/1965537/trying-to-get-a-signed-applet-to-work-in-a-browser-but-fails-miserably)线程后，我发现 owlapi-src 和 owlapi-bin jar 必须包含在 html 中的小程序中，并且也应该签名。我将代码更改为我当前的测试代码，但这仍然不起作用，因为我现在又拥有了

```
 java.lang.SecurityException: Unable to create temporary file 
```

这意味着未找到使用的 owlapi 库中的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T16:26:43.763

您可能不需要包含 -src jar，因为我希望它包含 java 源代码。我确实认为您需要在一个相同的小程序参数中提供您自己的签名 jar 和签名库 jar，如下所示：

```
<applet  code="owlapi.LoadOntology.class" height=100 width=1000 MAYSCRIPT>
    <param NAME="archive" 
        VALUE='owlapi/SignedLoadOntology.jar, owlapi/Signedowlapi-bin.jar'>
</applet> 
```

# java - Tomcat 7“严重：子容器在启动期间失败”

> ID：10373077
> 
> 赞同：50
> 
> 时间：2012-04-29T14:47:36.073
> 
> 标签：java, tomcat, tomcat7

基本上，我已经编写了一个`springMVC`应用程序（相对于 Spring，我使用了一种相对的猎枪方法）。该项目在 Tomcat 6 上运行良好。我的 Tomcat 服务器未启动并引发以下异常：

```
Apr 29, 2012 3:41:00 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/bin/jdk1.7.0_03/jre/lib/amd64/server:/usr/bin/jdk1.7.0_03/jre/lib/amd64:/usr/bin/jdk1.7.0_03/jre/../lib/amd64:/usr/lib/jvm/java-6-openjdk/jre/lib/amd64/server:/usr/lib/jvm/java-6-openjdk/jre/lib/amd64:/usr/lib/jvm/java-6-openjdk/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
Apr 29, 2012 3:41:00 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.j2ee.server:spring-security-integration' did not find a matching property.
Apr 29, 2012 3:41:00 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Spring3Hibernate' did not find a matching property.
Apr 29, 2012 3:41:00 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:assessment' did not find a matching property.
Apr 29, 2012 3:41:00 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Apr 29, 2012 3:41:00 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Apr 29, 2012 3:41:00 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 654 ms
Apr 29, 2012 3:41:00 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Apr 29, 2012 3:41:00 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.26
Apr 29, 2012 3:41:01 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Sun Apr 29 15:41:01 BST 2012]; root of context hierarchy
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/root-context.xml]
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3dd5df15: defining beans []; root of factory hierarchy
INFO : org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 226 ms
Apr 29, 2012 3:41:01 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'appServlet'
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'appServlet': initialization started
INFO : org.springframework.web.context.support.XmlWebApplicationContext - Refreshing WebApplicationContext for namespace 'appServlet-servlet': startup date [Sun Apr 29 15:41:01 BST 2012]; parent: Root WebApplicationContext
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]
INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
INFO : org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@cf10596: defining beans [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#0,org.springframework.web.servlet.view.InternalResourceViewResolver#0,dataSource,sessionFactory,homeController,userManagementController,userService,userDao,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.web.servlet.view.ContentNegotiatingViewResolver#0,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@3dd5df15
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String org.assessme.com.controller.HomeController.home(java.util.Locale,org.springframework.ui.Model)
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/userManagement/],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.Object org.assessme.com.controller.UserManagementController.home(java.util.Locale,org.springframework.ui.Model)
INFO : org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/userManagement/getUser],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public org.assessme.com.entity.User org.assessme.com.controller.UserManagementController.data(java.util.Locale,org.springframework.ui.Model)
INFO : org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - Mapped URL path [/resources/**] onto handler 'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0'
INFO : org.springframework.web.servlet.DispatcherServlet - FrameworkServlet 'appServlet': initialization completed in 1846 ms
Apr 29, 2012 3:41:03 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/Spring3Hibernate]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/Spring3Hibernate]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: org.apache.tomcat.util.bcel.classfile.ClassFormatException: Invalid byte tag in constant pool: 60
    at org.apache.tomcat.util.bcel.classfile.Constant.readConstant(Constant.java:131)
    at org.apache.tomcat.util.bcel.classfile.ConstantPool.<init>(ConstantPool.java:60)
    at org.apache.tomcat.util.bcel.classfile.ClassParser.readConstantPool(ClassParser.java:209)
    at org.apache.tomcat.util.bcel.classfile.ClassParser.parse(ClassParser.java:119)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2032)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1923)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1891)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1877)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1270)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:855)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more 
```

我真的不确定这是指什么，我很乐意展示任何代码等，但我真的不知道它指的是什么。下面是我的 pom.xml，以防万一。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.assessme</groupId>
    <artifactId>com</artifactId>
    <name>assessme</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.9</org.aspectj-version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
    </properties>
    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>

                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Persistence -->

        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.5.6-Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.5.6-Final</version>
        </dependency>
        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.11.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.18</version>
        </dependency>

        <!-- Jackson JSON Mapper -->
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.5</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-29T14:53:00.523

当 servlet 3.0 应用程序启动时，容器必须扫描所有类的注释（除非 metadata-complete=true）。Tomcat 使用 Apache Commons BCEL 的一个分支（没有添加，只是删除了未使用的代码）来执行此扫描。Web 应用程序无法启动，因为 BCEL 遇到了它不理解的问题。

如果应用程序在 Tomcat 6 上运行良好，则在 web.xml 中添加 metadata-complete="true" 或在 web.xml 中将应用程序声明为 2.5 应用程序将停止注释扫描。

目前，这看起来像是正在扫描的课程中的一个问题。但是，直到我们知道是哪个类导致了问题并仔细研究之前，我们不会知道。我需要修改 Tomcat 以记录更有用的错误消息，该错误消息会命名相关类。您可以在以下位置关注这一点的进展： [https ://issues.apache.org/bugzilla/show_bug.cgi?id=53161](https://issues.apache.org/bugzilla/show_bug.cgi?id=53161)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-09-16T11:21:27.980

您可以使用以下方法修复它：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>${servlet-api-version}</version>
    <scope>provided</scope>
</dependency> 
```

* * *

**提供**解决了这个问题

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-09-14T16:37:47.707

我最近把我所有的 Eclipse 项目都搬到了一台新的电脑上。我遇到了这个问题。我所做的是：

1.  从tomcat中删除了项目
2.  干净的雄猫
3.  在tomcat中运行项目

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-06-07T11:39:21.883

如果您认为以前它运行正常，现在它开始显示特定问题。那么它只是一个打击和尝试的方法来解决。因此，为了获得更好的解决方案，您可以按照以下步骤操作

1.  如果可能的话，删除你现有的 tomcat
2.  删除您的项目并使用新版本添加您的项目
3.  添加你的Tomcat服务器
4.  清理项目并刷新项目
5.  进入运行或调试模式

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-26T08:37:20.763

这通常是 web.xml 描述符文件的问题。可能是您混淆了注释和 web.xml servlet 描述定义。请检查控制台以获取更多信息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-05-12T15:38:08.003

这是我长期以来一直面临的。

上次发生这种情况并发现一种情况可能是糟糕的战争部署，这是在我更新 pom 上的库/maven 依赖项并重新安装它之后发生的。

解决方案：

```
right click on the server >  remove the war and 
right click on the server again > clean
make sure the maven dependencies are added to deployment assembly
right click on the project > Run As > maven clean
right click on the project again > Run As > maven install 
and finally deploy the project on to the server. This helped me to solve the issue 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-14T08:21:27.573

“tomcat没有问题”。

我已经经历了 4-5 天来解决这个问题（上面提到的同样的问题）。这里我使用的是tomcat 8.5。最后，问题得到解决，问题在于“损坏的 jar 文件”。您必须删除所有 .m2 存储库（对我来说是 C:\Users\Bandham.m2\repository）。den 从您的项目文件夹中运行“mvn clean install”命令。

快乐编码。

如果它解决了您的问题，请放弃一个。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-03T14:23:46.777

不要恐慌。您是否复制了 servlet 代码？行，

```
@WebServlet("/HelloWord")
public class HelloWorld extends HttpServlet {
private static final long serialVersionUID = 1L; 
```

您为具有不同名称的两个 servlet 提供了相同的路径`@WebServlet("/HelloWord")`。

如果创建`web.xml`文件，请检查`classpath`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-06T05:17:05.440

这似乎您使用的 servlet api 版本比您在 web.xml 中使用的 xsd 旧，例如 3.0

使用这个 ****http://java.sun.com/xml/ns/javaee/" id="WebApp_ID" version="2.5"> ****

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-22T01:18:07.720

几个月前我也有同样的问题。这解决了我使用 Maven 而不是下载的 Spring 版本和 web.xml 中的一些更改的问题。

pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>SpringWEB1</groupId>
  <artifactId>SpringWEB1</artifactId>
  <version>1</version>
  <packaging>war</packaging>
  <build>
    <sourceDirectory>src</sourceDirectory>
    <plugins>
      <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.4</version>
        <configuration>
          <warSourceDirectory>WebContent</warSourceDirectory>
          <failOnMissingWebXml>false</failOnMissingWebXml>
        </configuration>
      </plugin>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.1</version>
        <configuration>
          <source>1.7</source>
          <target>1.7</target>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>4.1.7.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.2</version>
    </dependency>
  </dependencies>
</project> 
```

控制器.java

```
package com.jmtm.controller;

import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@org.springframework.stereotype.Controller
public class Controller {

    @RequestMapping("/hi")
    public ModelAndView hi(){
        return new ModelAndView("Hello", "msg", "Hello user.");
    }

} 
```

spring-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:c="http://www.springframework.org/schema/c"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.1.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.1.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.1.xsd">

    <context:component-scan base-package="com.jmtm.controller"></context:component-scan>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

</beans> 
```

解决方案中最重要的部分，在 web.xml 中包含 servlet 调度程序（AKA spring-servlet.xml）的路径

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>SpringWEB1</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring-servlet.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

当我试图解决这个问题时，发生了一些奇怪的事情。[从maven.springframework.org/release/org/springframework/spring](http://maven.springframework.org/release/org/springframework/spring)下载的任何 Spring 版本都会给我带来很多问题（Tomcat 找不到 servlet，Spring 停止 Tomcat，Eclipse 无法启动服务器 {weird}）许多问题找到许多部分解决方案。我希望这对你有用。

作为额外的帮助，在 Eclipse 中，从 Eclipse Marketplace 下载 Spring STS Tool for Eclipse，这将帮助您创建配置文件 (servlet.xml) 并在 web.xml 文件中为 servlet 编写代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-27T22:43:01.690

Tomcat 服务器无法启动并引发异常，因为在该部分`Deployment Descriptor:MyProyect / Servlet Mappings`中存在不存在的映射。删除或更正这些元素；然后启动服务器没有问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-06-01T12:01:31.510

我有同样的问题，但在我的情况下，我错误地在**server.xml ($Tomcat_Install_Dir/conf/)**中添加了一个上下文，并且没有在**webapps($Tomcat_Install_Dir/webapps)**中部署相应的战争。当我删除该上下文并重新启动 tomcat 时，它工作正常。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-03-13T07:56:42.993

对我来说，一种情况是我错过了导致同样问题的 Maven 更新项目

maven 更新项目，如果您在 POM.xml 中看到任何错误，请尝试

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-08-23T09:13:25.673

我和堆栈跟踪也发生了同样的问题

```
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].StandardContext[/XXXXSearch]]
    at java.util.concurrent.FutureTask.report(FutureTask.java:122)
    at java.util.concurrent.FutureTask.get(FutureTask.java:192)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask.run(FutureTask.java:266)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at java.lang.Thread.run(Thread.java:745)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].StandardContext[/XXXXSearch]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 6 more
Caused by: java.lang.IllegalStateException: Unable to complete the scan for annotations for web application [/XXXXSearch]. Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2109)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1981)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1947)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1932)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1326)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 6 more
Caused by: java.lang.StackOverflowError
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269)
    at org.apache.catalina.startup.ContextConfig.populateSCIsForCacheEntry(ContextConfig.java:2269) 
```

在我的分析中我发现，这个问题是在Tomcat启动注释处理导致非法循环继承依赖时发生的。

但是我的项目有很多依赖 JAR，并且找不到哪个对此负责。

在尝试了这么多不愉快的方法之后，我所做的是，我更新了我的 tomcat 插件以跟随并运行相同的场景，

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat8-maven-plugin</artifactId>
    <version>3.0-r1756463</version>
<\plugin> 
```

然后我能够找到导致此问题的 JAR，

```
Aug 23, 2017 2:32:12 PM org.apache.catalina.startup.ContextConfig processAnnotationsJar
SEVERE: Unable to process Jar entry [cryptix/test/TestLOKI91.class] from Jar [jar:file:/C:/Users/Tharinda/.m2/repository/cryptix/cryptix/1.2.2/cryptix-1.2.2.jar!/] for annotations
java.io.EOFException
    at org.apache.tomcat.util.bcel.classfile.FastDataInputStream.readUnsignedShort(FastDataInputStream.java:120)
    at org.apache.tomcat.util.bcel.classfile.ClassParser.readAttributes(ClassParser.java:110)
    at org.apache.tomcat.util.bcel.classfile.ClassParser.parse(ClassParser.java:94)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1994)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1944)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1919)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1880)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1149)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:771)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:305)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5120)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1408)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1398)
    at java.util.concurrent.FutureTask.run(FutureTask.java:266)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at java.lang.Thread.run(Thread.java:745) 
```

然后用**cryptix-1.2.2.jar**解决这个问题就解决了这个问题。

我强烈建议移动目前看起来稳定且错误较少的**tomcat8-maven-plugin 。**

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-08-11T11:24:19.990

作为通用解决方案，我建议您删除所有辅助依赖项并运行应用程序，如果它有效，请还原一些，并在应用程序启动时继续执行相同操作，最后您将能够识别出哪个依赖性导致了这个问题。

使用相同的方法，例如，我发现 groupId 为：org.apache.axis2 的依赖项导致了问题。

```
 <dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2-transport-local</artifactId>
        <version>1.6.1</version>
 </dependency>
 <dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2-transport-http</artifactId>
        <version>1.6.1</version>
 </dependency> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-06-05T13:03:15.257

我遇到了类似的问题，但它像编码问题一样解决了错误。更改IDE编码后，它工作正常。 [![Eclipse IDE](../Images/aa1f1d66c92f4b0aedec27238433bb0e.png)](https://i.stack.imgur.com/5V01Y.jpg)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-08-14T15:44:05.793

我在tomcat启动时看到了这个异常，几乎花了好几个小时才弄清楚原因。最后我发现除了 Maven 依赖项中的 Spring jar 之外，lib 文件夹中还有一些较低版本的 Spring JAR。当我添加一个新的 Spring Rest 控制器时，Eclipse 会自动添加 lib 中的 JAR。我从 lib 文件夹中删除了这些，然后让 Maven 处理 JAR/依赖项，这很好。底线是如果由 Maven 管理的 JARS 和 WEB-INF/lib 中的 jars 导致类路径问题，您可能会遇到此错误。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-10-13T14:50:31.313

我通过将声明更新为 Servlet 4.0 规范解决了类似的问题，`web.xml`如下所示（我使用 Tomcat 9）：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
                          http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
      version="4.0"
      metadata-complete="true">
      <!-- ... (your content here) ... -->
</web-app> 
```

[您可以参考 Tomcat 的哪个版本页面](http://tomcat.apache.org/whichversion.html)上的图表来查看 Tomcat 支持的 servlet 版本。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-03-03T09:11:25.963

如果你新添加了tomcat。可能是某些旧版本的依赖项可能无法被 tomcat 扫描。只需获取最新版本并在您的项目中使用它。对我来说，我添加了新版本的**javax.annotation**并且它可以工作

# android - 透明 Activity 在主屏幕上浮动/可拖动

> ID：10373078
> 
> 赞同：1
> 
> 时间：2012-04-29T14:47:37.040
> 
> 标签：android

我知道如何创建一个简单的透明活动，但我如何同时拥有透明活动和可在屏幕上拖动。我能想到的最好的例子是[Google Play 上的 Overskreen 应用程序。](https://play.google.com/store/apps/details?id=com.myboyfriendisageek.airbrowser&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5teWJveWZyaWVuZGlzYWdlZWsuYWlyYnJvd3NlciJd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-02T12:01:24.613

尝试这个

显现：

> ```
> <activity
>        android:name=".popup.PopupActivity"
>        android:excludeFromRecents="true"
>        android:label="@string/app_name"
>        android:launchMode="singleTop"
>        android:screenOrientation="portrait"
>        android:theme="@style/Theme.Transparent" /> 
> ```

代码：

```
View mRootView;
WindowManager.LayoutParams params;
WindowManager windowManager;

@Override
protected void onCreate(Bundle savedInstanceState){
    windowManager = (WindowManager) getSystemService(WINDOW_SERVICE);

    mRootView = getLayoutInflater().inflate(R.layout.popup_alert_dialog, null);

    params = new WindowManager.LayoutParams(
            WindowManager.LayoutParams.WRAP_CONTENT,
            WindowManager.LayoutParams.WRAP_CONTENT,
            WindowManager.LayoutParams.TYPE_TOAST,
            WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
            PixelFormat.TRANSLUCENT);

    params.gravity = Gravity.TOP | Gravity.START;
    params.x = 0; // initial position
    params.y = 0; // initial position

    //this code is for dragging the chat head
    mRootView.setOnTouchListener(new View.OnTouchListener() {
        private int initialX;
        private int initialY;
        private float initialTouchX;
        private float initialTouchY;

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    initialX = params.x;
                    initialY = params.y;
                    initialTouchX = event.getRawX();
                    initialTouchY = event.getRawY();
                    return true;
                case MotionEvent.ACTION_UP:
                    return true;
                case MotionEvent.ACTION_MOVE:
                    int newX = initialX
                            + (int) (event.getRawX() - initialTouchX); // new position
                    int newY = initialY
                            + (int) (event.getRawY() - initialTouchY); // new position
                    params.x = newX;
                    params.y = newY;
                    windowManager.updateViewLayout(mRootView, params);
                    return true;
            }
            return false;
        }
    });

    windowManager.addView(mRootView, params);

    // update content view here
    TextView tv = (TextView) mRootView.findViewById(R.id.textView);
    tv.setText("Hello World!!");

    // no need to call setContentView() any more
} 
```

# php - preg_replace 括号'('

> ID：10373086
> 
> 赞同：-2
> 
> 时间：2012-04-29T14:48:43.653
> 
> 标签：php, regex, preg-replace

我想`(05 May, 2012`使用`05 May, 2012`preg_replace （基本上删除括号），但由于我对正则表达式没用，我不知道该怎么做

**代码尝试**

```
preg_match('/[0-9]+(?:\.[0-9]*)?/', '(05 May, 2012', $matches);
if($matches){
   $match= $matches[0];
}else{
   $match= '';
}

$match = preg_replace('/[0-9]+(?:[0-9]*,)?/','$1','(05 May, 2012'); 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T14:50:49.800

如果您对正则表达式“无用”，请使用更简单的函数

```
$date = trim($date,"()"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T15:00:03.717

```
$date = preg_replace('/\(([0-9]+ [A-Za-z]+\, [0-9]{4})/','$1',$date); 
```

# tfs - 为了代码审查的目的，我如何授予对 TFS 中源代码的访问权限，而不授予下载代码的权限？

> ID：10373089
> 
> 赞同：1
> 
> 时间：2012-04-29T14:49:15.327
> 
> 标签：tfs, tfs-web-access, tfs-code-review

我是 Microsoft Team Foundation Server 的新手，我曾请求让第 3 方在短时间内访问项目的源代码以供审核。这个想法是只允许访问几天。

有没有像 Fisheye 提供的那样在 TFS 中轻松做到这一点的方法？

为了澄清，我意识到通过在浏览器中查看代码，他们正在下载代码。没关系，我只是想降低他们下载整个项目的能力......这有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:08:17.983

您可以为他们提供一个锁定和/或受监督的物理工作站以供审查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:57:38.590

不，基本上没有办法做到这一点。查看代码与下载代码完全相同。

我想 TFS 可以从代码中创建一个图像（.bmp、.jpg 或 .png），然后将其显示给审阅者，但这是一个相当罕见的请求。

您可以提供对代码的读取访问权限，但不能访问项目和解决方案文件，或从代码成功生产产品所需的其他组件。

# php - url友好的.html中的php自动注销会话

> ID：10373090
> 
> 赞同：0
> 
> 时间：2012-04-29T14:49:22.890
> 
> 标签：php, mod-rewrite, login, url-rewriting

我将`.php`页面更改`.html`为 url 友好或`page.php?id=10`使用`page/id/title`mod_rewrite 和 php。现在我有大问题，当我登录我的面板时，如果登录页面操作 = login.php 登录成功并且我看到用户面板但如果登录页面操作 = login.html 我自动注销。我检查索引页。我的问题是什么？！谢谢

示例 1 工作：此登录并工作

```
http://mydomain.com/subfolder/index.php  
http://mydomain.com/subfolder/page.php?id=10
http://mydomain.com/subfolder/login.php
http://mydomain.com/subfolder/profile.php 
```

示例 1 NotWorked ：这不是登录，也不起作用

```
http://mydomain.com/subfolder/
http://mydomain.com/subfolder/page/10/title
http://mydomain.com/subfolder/login.html
http://mydomain.com/subfolder/profile.html 
```

.htaccess：

```
RewriteRule ^login\.html$ login.php
RewriteRule ^profile\.html$ profile.php
RewriteRule ^page/([0-9]+)/([^/\.]+)/?$ page.php?id=$1&title=$2 
```

***注意***：这在我的 xampp 本地主机中有效，但在真正的网络主机中无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:22:35.120

如果您想使用 PHP 解析 .html（或任何其他扩展名的文件），最简单的方法就是告诉 Apache 先生！请告诉你的朋友 PHP 先生看看我的 .html 文件！！！
如果您将 php 作为 apache 模块加载，您可以在 httpd.conf 上稍作更改：

```
LoadModule php5_module "D:/PHP5.3.0/php5apache2_2.dll"
AddType application/x-httpd-php .php .htm .html .any-extention 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:16:25.143

为了能够编写 PHP 并使其正确显示或运行，您必须具有文件扩展名 .php 或任何其他受支持的 PHP 扩展名。
拥有 .html 或 .htm 将不起作用。文件中的 PHP 最终被视为无效语法而被忽略，因此在 HTML 文件中编写 PHP 毫无意义。

# php - 如何按小时拆分 PHP 数组

> ID：10373091
> 
> 赞同：1
> 
> 时间：2012-04-29T14:49:37.903
> 
> 标签：php, mysql

我正在使用从 MySQL 数据库中选择当天午夜和现在之间的所有时间戳`time()`。如何按小时对所有时间戳进行分组，然后返回一个包含所有 24 个数组的计数的数组？例如，最后它应该返回如下内容：

```
Array(0 => 60, 1 => 104, 2 => 280, ..., 23 => 50) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T14:58:04.507

```
SELECT *, CEIL(tstamp/3600)*3600 AS byhour 
 FROM table 
 WHERE <your where goes here>
 ORDER BY byhour 
```

# r - fetch(key) 中的错误：R_decompress1 中的内部错误 -3

> ID：10373098
> 
> 赞同：17
> 
> 时间：2012-04-29T14:50:32.007
> 
> 标签：r

我有以下问题：

1.  我在 R 会话中加载了我的包的一些开发版本

2.  我编辑了源文件。

3.  我将其分离并执行以下操作：

    ```
    system("R CMD check realizedvolatility")
    system("R CMD build realizedvolatility")
    system("R CMD install realizedvolatility_0.1.tar.gz")
    library(realizedvolatility) 
    ```

4.  到现在为止，一切正常。现在，如果我尝试调出帮助文件，例如`?realizedvolatility`，错误

    ```
    Error in fetch(key) : internal error -3 in R_decompress1 
    ```

发生。

补救措施是完全重新启动 R 会话，然后一切正常。有没有办法让它在一个会话中工作？我尝试从命名空间中分离，使用各种选项进行安装，但没有任何效果。

我正在使用 Mac OS X Lion 和 R 2.14.1

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-29T17:56:20.183

我在 R-help 中问了同样的问题，一个 R 核心回答“这是设计使然”，这意味着除了重新启动 R 之外，您无能为力：[https ://stat.ethz.ch/pipermail/r-help/2011- July/283916.html](https://stat.ethz.ch/pipermail/r-help/2011-July/283916.html)（虽然我还是不明白为什么这个设计不能刷新缓存数据库...）

# linux - 在文件中运行时，BLKID 未在 linux 中提供输出

> ID：10373100
> 
> 赞同：2
> 
> 时间：2012-04-29T14:50:39.057
> 
> 标签：linux, bash, outputstream

我在 linux 中编写了以下脚本以获取 USB 详细信息：此脚本在连接 USB 时从 udev 执行。

```
 fgrep -A 15 'New USB device found' /var/log/messages | tail -n 16 > usb_detail
    SERIAL=$(sed -n '5s/A.*: //p' usb_detail)
    SIZE=$(sed -n '10s/A.*: //p' usb_detail)
    MOUNT=$(sed -n '14s/A.*: //p' usb_detail)
    blkid > Label
    LABEL=$(grep $MOUNT Label | awk '{print $2}') 
```

现在的问题是我得到了所有的值（序列号、大小、安装），但是当它从 BLKID 检查 USB 的标签时，我什么也得不到。这个命令没有给我任何输出：

```
blkid > Label 
```

此命令在命令提示符下正常工作。但是当我在这个脚本中运行它时（在连接 USB 时从 UDEV 调用），它不会给出任何输出。

那么我怎样才能弄清楚主要问题是什么以及为什么我在 LABEL 文件中没有得到任何东西？

这是我的 /var/log/messages：

```
Apr 28 08:25:58 box2 kernel: usb 1-3: New USB device found, idVendor=0411, idProduct=0105
Apr 28 08:25:58 box2 kernel: usb 1-3: New USB device strings: Mfr=1, Product=2, SerialNumber=5
Apr 28 08:25:58 box2 kernel: usb 1-3: Product: USB-SATA Bridge
Apr 28 08:25:58 box2 kernel: usb 1-3: Manufacturer: BUFFALO
Apr 28 08:25:58 box2 kernel: usb 1-3: SerialNumber: 00001412AA38
Apr 28 08:25:58 box2 kernel: usb 1-3: configuration #1 chosen from 1 choice
Apr 28 08:25:58 box2 kernel: scsi25 : SCSI emulation for USB Mass Storage devices
Apr 28 08:26:05 box2 kernel: scsi 25:0:0:0: Direct-Access     BUFFALO  External HDD          PQ: 0 ANSI: 2 CCS
Apr 28 08:26:05 box2 kernel: sd 25:0:0:0: Attached scsi generic sg0 type 0
Apr 28 08:26:05 box2 kernel: sd 25:0:0:0: [sda] 976773168 512-byte logical blocks: (500 GB/465 GiB)
Apr 28 08:26:05 box2 kernel: sd 25:0:0:0: [sda] Write Protect is off
Apr 28 08:26:05 box2 kernel: sd 25:0:0:0: [sda] Assuming drive cache: write through
Apr 28 08:26:05 box2 kernel: sd 25:0:0:0: [sda] Assuming drive cache: write through
Apr 28 08:26:05 box2 kernel: sda: sda1
Apr 28 08:26:05 box2 kernel: sd 25:0:0:0: [sda] Assuming drive cache: write through
Apr 28 08:26:05 box2 kernel: sd 25:0:0:0: [sda] Attached SCSI disk 
```

这是命令提示符下的 blkid 输出：

```
[root@box2 usbmon]# blkid
/dev/sdf1: UUID="2d1bd58e-86ea-4ab2-99e3-ec2d1fb24021" TYPE="ext4" 
/dev/sdf2: UUID="Je95wE-NW7f-Mqlv-UBgi-qNOL-8i35-8cUUTj" TYPE="LVM2_member" 
/dev/mapper/vg_box2-lv_root: UUID="27cf24f7-4e7d-42bd-97be-09ddc6eb614b" TYPE="ext4" 
/dev/mapper/vg_box2-lv_swap: UUID="36c54ea3-f9f3-455a-9c84-58e7317d1e60" TYPE="swap" 
/dev/mapper/vg_box2-lv_home: UUID="5cac0192-2757-4cf6-b70f-d9ff8fbe6f36" TYPE="ext4" 
/dev/sda1: LABEL="BU5" UUID="242DB177461FD69A" TYPE="ntfs" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-21T12:53:40.883

运行 sudo 会给你正确的输出。

```
sudo blkid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:28:26.427

我通过更改语法解决了这个问题

```
blkid > Label 
```

到

```
/sbin/blkid > Label 
```

不知道为什么，但有时它有效。

# php - PHP/MySQL 中的数据库连接问题

> ID：10373102
> 
> 赞同：2
> 
> 时间：2012-04-29T14:50:39.820
> 
> 标签：php, mysql, connection

当我使用添加的行运行下面的脚本时，

```
$count = 1; 
```

我在屏幕上得到 1 的值，但是当我取出那条线时，我什么也得不到。尝试将其移到 $count=mysql_num_rows($result); 上方 我仍然没有得到价值。

```
$sql="SELECT EMAIL FROM CUSTOMER WHERE email='$myemail' and password='$mypassword'";
$result=mysql_query($sql);
$count=mysql_num_rows($result);

$count = 1;
echo $count; 
```

我在这里做错了什么？直到现在我从未使用过 PHP。错误是：

```
Can't connect to local MySQL server through socket
'/var/run/mysqld/mysqld.sock' (2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:00:31.820

这意味着您的 MySQL 服务器套接字 (/var/run/mysqld/mysqld.sock) 丢失或损坏。

这也可能意味着 MySQL 服务无法正常工作，请尝试使用以下命令在 SSH 中重新启动：

```
$ service mysqld restart 
```

如果它说服务丢失，那么说：

```
$ service mysql restart 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:55:43.303

我猜你的 SQL 查询会出错（`var_dump($count);`在这种情况下会返回 false）。

要检查这一点，我会做两件事：

*   查询完成后`if(!$result) echo mysql_error( );`- 这将向您显示与数据库交谈时发生的任何错误
*   要检查您的 SQL 是否正确形成，请在变量中创建它（例如`$sql = "SELECT email ...";`）并回显它。

编辑：啊刚刚看到更新 - 这是一个连接问题。检查您`mysql_connect( )`的主机、用户名和密码是否正确。否则可能是您的系统有问题（例如防火墙或类似设备）

编辑 2：正如已经正确指出的那样，mysql_connect 详细信息会导致与您看到的不同的连接错误。我有一个快速的谷歌，这突然出现了[http://lists.mysql.com/mysql/204035](http://lists.mysql.com/mysql/204035)。不确定它是否有用，因为我没有通读它，但它确实描述了在其他人的系统上解决此问题的一些步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T15:10:06.623

当您无法成功连接到数据库时，`mysql_query`函数 ($result) 的返回值将不是有效值。因此，当您将其赋予`mysql_num_rows`功能时，它会失败并返回 FALSE 值，这对输出屏幕没有视觉效果！

# android - TextView 中的 HTML 格式

> ID：10373110
> 
> 赞同：1
> 
> 时间：2012-04-29T14:51:52.293
> 
> 标签：android, html, textview

全部，

我的字符串资源 xml 文件中有以下内容。

> ```
> <?xml version="1.0" encoding="utf-8"?> <resources>
> 
> <string name="hello">Hello World, ProDroid_Android!</string>
> <string name="app_name">ProDroid_Android-CH3-Resources</string>
> 
> <plurals name ="eggs_in_A_basket">
>     <item quantity ="one"> There is 1 egg</item>
>     <item quantity = "other"> There are %d eggs</item>
> 
> </plurals>
> <string name="simple_string">simple string</string>
> <string name="quoted_string">"Quoted String 'xyz' string"</string>
> <string name="double_quoted_string">\"Double Quoted String\""\";</string>
> <string name="java_format_string">Hello %2$s Java format String. %1$s again.</string>
> 
> <string name="tagged_string">Hello <b><i> Slanted Android.</i></b>, You are bold</string> 
> ```

当我将 tagged_string 放入具有 HTML 格式的 TextView 时，它不会以它的格式显示。但是，如果我剪切并粘贴**Hello ***Slanted Android。***，你是粗体**并手动将它放入 .setText 它可以工作，或者如果我在我的布局 xml 文件中静态设置它。但是，使用下面的 Java 代码不起作用（您看到的只是未格式化的文本）：

```
//HTML
        TextView t6 = (TextView) findViewById(R.id.textView6);

        t6.setText(Html.fromHtml(ProDroid_Android.this.getString(R.string.tagged_string))); 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:01:14.677

如果您以 XML 格式设置文本，则无需使用`Html.formatHtml(...)`

尝试这个：

```
t6.setText(getString(R.string.tagged_string); 
```

**编辑**：嗯......这种方式对我来说很好，我**完全**尝试了你的字符串。也许您的项目需要清理（项目>清理...）

如果这没有帮助：我发现了另一个[问题](https://stackoverflow.com/questions/3235131/set-textview-text-from-html-formatted-string-resource-in-xml)。也许那里的答案可以解决您的问题

# emacs - 类 Vim */# - Emacs 中的（下一个/上一个单词）？

> ID：10373118
> 
> 赞同：5
> 
> 时间：2012-04-29T14:53:08.457
> 
> 标签：emacs

我从 Vim 切换到 Emacs，现在我对 Emacs 非常着迷。
但是在 Vim 中有一个非常非常有用的技巧，我不能在 Emacs 中方便地使用，那就是找到下一个/上一个单词。在 Vim 中使用 */# 非常方便。
最简单的方法是移动到点的单词的开头，然后是 Cs 和 Cw，使用 Cs/Cr 查找下一个/上一个单词。 [然后我从Mastering Emacs](http://www.masteringemacs.org/)
中 找到了另一个技巧，但仍然是一些小错误。 今天我找到了一个插件——vimpulse，它在 Emacs 中模拟 vim。我可以像 Vim 一样使用 */# ！！但似乎 vimpulse 会自动启用 Viper。

那么，还有其他方法可以实现这个要求吗？或者，如果我使用 vimpulse，我可以自动禁用 Viper 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T15:11:24.243

## 一、答案

好吧，通常情况下，我们可以在 Emacs 中做得更好。我为此使用的包是[highlight-symbols](https://github.com/nschum/highlight-symbol.el)

具体来说，我将它的一系列命令与`F3`键的变体绑定：

```
;;;;;;;;;;;;;;;;;;;;;;
;; highlight-symbol ;;
;;;;;;;;;;;;;;;;;;;;;;

(require 'highlight-symbol)

(global-set-key [f3] 'highlight-symbol-next)
(global-set-key [(shift f3)] 'highlight-symbol-prev)
(global-set-key [(control f3)] 'highlight-symbol-at-point)
(global-set-key [(control meta f3)] 'highlight-symbol-query-replace) 
```

下一个/上一个符号很好。但我发现在阅读算法以突出显示一些关键变量时最有帮助。

## 关于符号与文字

单词和符号之间的区别对于编程来说非常好。我不确定其他编辑是否提供这种区别。

## 替代

我发现另一个对编程非常有用的相关工具是[iedit](https://github.com/victorhge/iedit)。

这是我加载它的方式：

```
(autoload 'iedit-mode "iedit")
(global-set-key [(control \;)] 'iedit-mode)
(define-key isearch-mode-map  [(control \;)] 'iedit-mode) 
```

要执行您想要的操作，请转到一个符号并按下，`C-;`现在 它将在匹配的符号之间移动。`tab``shift tab`

`C-'`（单引号）将向您显示`occur`缓冲区的临时视图。

对于额外的重构工具，标记要重命名符号（变量）的区域（可能是类），然后`C-;`再次按下，只有该区域内的匹配项将被编辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T15:15:03.833

尝试邪恶：[https ://gitorious.org/evil/pages/Home](https://gitorious.org/evil/pages/Home)

*/# 很好用。

# iphone - 在真机 iPhone 4 上测试时，UILabel 的新文本与之前的文本相结合

> ID：10373119
> 
> 赞同：2
> 
> 时间：2012-04-29T14:53:14.767
> 
> 标签：iphone, objective-c, ios, uikit, uilabel

我的应用程序中有一些`UILabel`对象，按下按钮时我会更改它们的值。它在模拟器和旧 iPhone 上运行良好，但如果我在 iPhone 4 上尝试，标签的先前文本不会消失，它会显示在新文本后面（嗯，有时它会消失，只有正确的文本出现，但大多数时候它不能正常工作）。

这是代码（它是一个只这样做的方法，`lehenPantalla`是 a `UIViewController`，用于设置文本的变量是作为参数传递的整数）：

```
self.lehenPantalla.firstPlayerSet.text = [NSString stringWithFormat:@"%d",localFirstPlayerSet];
self.lehenPantalla.secondPlayerSet.text = [NSString stringWithFormat:@"%d",localSecondPlayerSet];
self.lehenPantalla.firstPlayerGames.text = [NSString stringWithFormat:@"%d",localFirstPlayerGames];
self.lehenPantalla.secondPlayerGames.text = [NSString stringWithFormat:@"%d",localSecondPlayerGames]; 
```

这是一个常见的错误吗？我不知道发生这种情况是因为手机是 iPhone 4 还是因为它使用的是 iOS 5.1（另一部手机运行的是 iOS 4）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:55:40.057

Given this sounds like it is appearing in ios5 and not before, perhaps it is related to [view controller containment](https://stackoverflow.com/questions/8379759/how-does-view-controller-containment-work-in-ios-5) which changed in ios5\. Events such as `viewDidLoad`/`willAppear` etc aren't necessarily called properly without proper containment.

Have you called `addChildViewcontroller` to add `lehanPantella`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:58:10.283

我在 iPhone4/ios5 上遇到了同样的问题。最后只是使标签不透明（取消选中界面设计器中的不透明复选框）解决了这个问题。我希望这个标签在背景上绘制（没有透明度）我只需要在它下面放另一个标签（相同的宽度，没有内容）。希望这可能会有所帮助。

# javascript - HTML - 对象数组？

> ID：10373121
> 
> 赞同：1
> 
> 时间：2012-04-29T14:53:30.673
> 
> 标签：javascript, html, arrays

不确定这是否是正确的标题，所以如果不是，我很抱歉。但是，我正在尝试做的是这个。有一个存储产品名称、价格和数量的数组。对于使用 HTML 中的下拉框输入的多个产品。目前我有这个。

```
var cart = new Object();

function main(uValue)
{
    //Get the value from the drop down
    var value = uValue.value;
    //Add on to the page the new value
    printOnPage(value);
    //Add 
    cart = addItem(value);
    printOnPage(cart);

}

function addItem(input)
{
    //cart.push(input);
    //return cart;

    //look up id in assoc. array
    //cart.numInCart++;
    cart.Amount = input;
    return cart;
}
function removeItem()
{
    cart.splice(1,1);
    return cart;
}

function printOnPage(input)
{
    var para = document.createElement("p");
    var paymentDiv = document.getElementById("payment");
    paymentDiv.appendChild(para);
    var txt = document.createTextNode(input);
    para.appendChild(txt);
} 
```

然后是与此相关的 HTML。

```
<div class="item">
                <p>Faster than light car</p>
                <img src="i/toycar.jpg" width="85%" height="85%" alt="ToyCar" title="#WickCar">
                <p>Cost: £10 per item</p>

                <form name="form1" method="POST">
                    <select name="values" onchange="main(this)" >
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                    </select>
                </form>
            </div> 
```

好的，有几个问题。1）我是否以正确的方式解决这个问题？2) 为什么当我想查看数组的内容时会得到 [object Object] ![在此处输入图像描述](../Images/f29280667952f081d04406b154429a5f.png)

有一个更好的方法吗？

谢谢，希望有人能启发我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T15:03:10.613

更改`printOnPage(cart);`为`printOnPage(cart.Amount);`

看起来您正在尝试输出`cart`一个对象，而不是购物车中某个键的值之一。

# java - 从 Java 程序访问 OBIEE 中的报告

> ID：10373122
> 
> 赞同：2
> 
> 时间：2012-04-29T14:53:42.753
> 
> 标签：java, business-intelligence, oracle-adf, obiee, bi-publisher

我正在使用 Netbeans 开发一个 Java 应用程序，它将从 OBIEE 10G 上的 BI 服务器获取报告并使用 Java 应用程序将其显示给客户端。谁能建议我执行此操作的适当步骤以及如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:32:00.287

你的问题不清楚；您是否尝试从 OBIEE 调用 Java 方法？

如果是：您可以通过创建链接到操作的代理来执行此操作。Action 可以调用 java 方法（在 EJB 中）。通过将代理连接到操作，您可以将其安排为作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:51:13.983

首先，您将从 Presentation Services 而不是从 BI 服务器获取报告。BI 服务器是一个只有 SELECT 语句的数据库，而 Presentation Service 使用此 SELECT 来创建和格式化报告。

要将来自 BI Presentation 服务的报告集成到其他应用程序中，您可以使用：

*   网络服务：[http ://docs.oracle.com/cd/E23943_01/bi.1111/e16364/methods.htm#i1008939](http://docs.oracle.com/cd/E23943_01/bi.1111/e16364/methods.htm#i1008939)

*   或 GO 网址：[http ://docs.oracle.com/cd/E23943_01/bi.1111/e16364/apiwebintegrate.htm#CACCHBHC](http://docs.oracle.com/cd/E23943_01/bi.1111/e16364/apiwebintegrate.htm#CACCHBHC)

这些链接指向相同的文档（集成商指南）。这是为 11g 编写的，但它也适用于 10g。

干杯尼科

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:20:49.650

虽然可以使用 web 服务和 GO url 来创建您的 web 应用程序，但这样做是一种非常困难的方法。如果您有选择，请使用最新的 JDeveloper 11g，然后使用[这些步骤](http://docs.oracle.com/cd/E14571_01/bi.1111/e10545/embedding_adf.htm#BGBGCFJG)将您的 Answers Reports 或 Dashboards 拖放到 .jspx 页面。这很简单，只要您熟悉 JDeveloper，就可以在几分钟而不是几天内完成。

编辑：如果您仍想使用 Netbeans，这里有一段代码可以帮助您入门。在将其投入生产之前，请记住阅读并理解[OBIEE 集成文档中的 HtmlViewService SOAP API 。](http://docs.oracle.com/cd/E23943_01/bi.1111/e16364/methods.htm#CIHDFEIE)

```
import oracle.bi.services.soap.*

SAWSessionParameters sessionParams = new SAWSessionParameters();
sessionParams.setUserAgent("Mozilla/...."); //Copy the exact agent from your Firefox menu Help > About

javax.xml.rpc.ServiceFactory factory = ServiceFactory.newInstance();
SAWSessionServiceSoap sessionService = ((SAWSessionService) factory.loadService(SAWSessionService.class)).getSAWSessionServiceSoap();

HtmlViewServiceSoap htmlService = ((HtmlViewService) factory.loadService(HtmlViewService.class)).getHtmlViewService();

AuthResult authResult = sessionService.logonex("replace_with_your_username", "replace_with_your_password", sessionParams); //You should reuse the session for multiple HTTP Requests from the same user
String sessionID = authResult.getSessionID();

StartPageParams pageParams = new StartPageParams();
pageParams.setIdsPrefix("replace_with_your_prefix");
String pageID = htmlService.startPage(pageParams, sessionID);

ReportRef report = new ReportRef();
report.setReportPath("replace_with_full_path_to_your_report");
htmlService.addReportToPage(pageID, "replace_with_your_report_name", report, null, null, null, sessionID);

String reportHTML = htmlService.getHtmlForReport(pageID, "replace_with_your_report_name", sessionID);
System.out.println(reportHTML); //Here's the report that you are looking for

htmlService.endPage(pageID, sessionID); 
```

# mysql - MYSQL 函数，基于 db 列中的数据进行计算

> ID：10373123
> 
> 赞同：0
> 
> 时间：2012-04-29T14:53:51.130
> 
> 标签：mysql

我有一个表格，可以根据 Place (P) 和 Number of Racers(R) 以及 points_id 指示的得分格式查找得分点。表中显示了两种情况。有时这些点直接由 P 和 N 的值确定，如 points_id =3 中的其他时间，它们最容易通过 pts_calc 列中显示的简单计算确定。

```
|points_id| P | N |points|pts_calc|    
|    1    | 0 | 0 | NULL | pin    |
|    1    |DNS| 0 | NULL | nin+1  |
|    3    | 1 | 0 |102.00| NULL   |
|    3    | 2 | 0 | 98.00| NULL   |
|    3    | 3 | 0 | 96.00| NULL   |
|    3    | 4 | 0 | 93.00| NULL   |
|    3    | 5 | 0 | 91.00| NULL   |
|    3    | 6 | 0 | 89.00| NULL   |
|    3    |DNF| 0 | 85.00| NULL   | 
```

我希望创建一个从三个输入变量返回点的函数。points_id，P，N。下面是我尝试过的。

```
CREATE FUNCTION POINTS(pid INT,pin VARCHAR(3),nin INT)
RETURNS DEC(6,2)
DETERMINISTIC

BEGIN
DECLARE pts DECIMAL(6,2);
DECLARE pcalc VARCHAR(20);

SELECT points,pts_calc INTO pts,pcalc FROM scoring_points WHERE points_id=pid AND (P=pin OR P='0') AND (N=nin or N=0); 

IF(pts IS NULL) THEN
SET @s= CONCAT('SET pts = ',pcalc);
PREPARE stmt FROM @s;
EXECUTE stmt;

END IF;

RETURN pts;

END 
```

但我得到了这个错误。

# 1336 - 存储函数或触发器中不允许使用动态 SQL

进一步的研究表明 Prepare 语句不仅在函数中被允许，而且在过程中被允许。我希望做类似的事情；

```
SELECT SUM(Points(pid,place,numb)) FROM t1 GROUP BY racer.id 
```

但除非有人有好主意，否则请进入 B 计划（待定）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T15:56:20.563

我认为使用三个数字列而不是列可能会更好`pts_calc`：

1.  `cPIN``pin`-项系数
2.  `cNIN``nin`-项系数
3.  `cnst`- 常数项

然后您的函数可以执行：

```
SELECT IFNULL(points, cPIN*pin + cNIN*nin + cnst) INTO pts
FROM scoring_points
WHERE ... 
```

根据您的需要，您甚至可以通过使用并使其他两个等于 0来摆脱该`points`列。`cnst`

# regex - 正则表达式中的多个字符或

> ID：10373125
> 
> 赞同：1
> 
> 时间：2012-04-29T14:54:11.547
> 
> 标签：regex

是否可以仅捕获“或”中的多个字符？

我希望这个`[(abc)(cde)]` 捕捉`abc or cde`但是它捕捉`( or a or b or c or ) ...`

我看到了这个：[regular-expression-capture-groups-which-is-in-a-group](https://stackoverflow.com/questions/4537191/regular-expression-capture-groups-which-is-in-a-group)

在正则表达式中我要问的是不可能的吗？这听起来太明显了，太需要了，我不存在于其中......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T14:55:53.727

你要这个：

```
(abc|cde) 
```

这匹配`abc`或`cde`并在反向引用中捕获结果。如果您不需要反向引用，请使用

```
(?:abc|cde) 
```

另一个提示：如果您想确保只匹配整个单词，而不是像`abc`within这样的较长单词中的子字符串`tabcontrol`，请使用单词边界：

```
\b(abc|cde)\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:00:08.507

`(abc|cde)`应该为你工作。

# android - Android：使用带有 Fragment 错误的 savedInstanceState

> ID：10373131
> 
> 赞同：2
> 
> 时间：2012-04-29T14:54:43.507
> 
> 标签：android

我的代码：

主要活动

```
protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

..
mAdapter = new MyAdapter(getFragmentManager());
            mPager = (ViewPager) findViewById(R.id.pager);
            mPager.setAdapter(mAdapter);
            mPager.setOnPageChangeListener(new MyPageChangeListener());

private class MyPageChangeListener extends
            ViewPager.SimpleOnPageChangeListener {
        @Override
        public void onPageSelected(int position) {
            focusedPage = position;
        }
    }

public class MyAdapter extends FragmentStatePagerAdapter {
    public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return qNumberSum;
    }

    @Override
    public Fragment getItem(int position) {
        ArrayListFragment alf = new ArrayListFragment();
        return alf.newInstance(position);
    }

    @Override
    public void setPrimaryItem(ViewGroup container, int position,
            Object object) {
        ArrayListFragment alf = (ArrayListFragment) object;
        mCurrentView = alf.getView();

    }

}

public class ArrayListFragment extends Fragment {
    int mNum;

    /**
     * Create a new instance of CountingFragment, providing "num" as an
     * argument.
     */
    ArrayListFragment newInstance(int num) {
        ArrayListFragment f = new ArrayListFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();
        args.putInt("num", num);
        f.setArguments(args);

        return f;
    }

    /**
     * When creating, retrieve this instance's number from its arguments.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mNum = getArguments() != null ? getArguments().getInt("num") : 1;
    } 
```

当 savedInstanceState 为 null 时（例如当用户重新开始时）一切正常。但是当不为空时，我得到了这个异常：

04-29 14:10:00.398: E/AndroidRuntime(29348): 由: android.app.Fragment$InstantiationException: 无法实例化片段 com.Android.Prj.DispKl$ArrayListFragment: 确保类名存在，是公开的，并且有一个公开的空构造函数

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:00:59.763

如果`ArrayListFragment`是 的内部类`com.Android.Prj.DispKl`，则必须是`static`。或者，将其移动到自己独立的公共 Java 类中。

顺便说一句，请不要将代码放入`com.Android`包中。请使用您自己的域名。

# ios - 当键盘出现在 iPad App 中时，在工具栏中滚动 UISearchBar？

> ID：10373132
> 
> 赞同：1
> 
> 时间：2012-04-29T14:54:43.987
> 
> 标签：ios, ipad, uiscrollview, keyboard, uisearchbar

我阅读了很多主题，但找不到解决方案:-(也许您可以提供帮助！

在我的故事板（适用于 iPad 应用程序）中，我有以下内容： - 作为我的初始场景的导航控制器 - 打开包含以下层次结构的视图控制器的 Segue： - 滚动视图 -> 工具栏 -> BAR 按钮项 -> 搜索带提示的栏 -> 地图视图 - 导航项 -> 栏按钮项

我的搜索栏位于底部工具栏中，因此当我单击它时，会显示键盘并隐藏我的搜索栏。我想向上滚动所有内容以显示我的搜索栏（导航、地图、工具栏...）。

我已经注册了键盘通知并按照 IOS 文档中的描述实现了代码

```
- (void)keyboardWasShown:(NSNotification*)aNotification 
```

{ NSDictionary* info = [aNotification userInfo]; CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

```
UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
scrollView.contentInset = contentInsets;
scrollView.scrollIndicatorInsets = contentInsets;

// If active text field is hidden by keyboard, scroll it so it's visible
// Your application might not need or want this behavior.
CGRect aRect = self.view.frame;
aRect.size.height -= kbSize.height;
if (!CGRectContainsPoint(aRect, activeField.frame.origin) ) {
    CGPoint scrollPoint = CGPointMake(0.0, activeField.frame.origin.y-kbSize.height);
    [scrollView setContentOffset:scrollPoint animated:YES];
} 
```

}

执行此代码时，似乎发生了一些事情（我的地图视图显示白色视图而不是地图）并且显示了键盘，但我的搜索栏仍然不可见。

我的视图层次结构中有问题吗？因为它嵌入在导航控制器中？我对这个问题有点迷茫。只是一点，在我的层次结构中有一个滚动视图之前，我有一个简单的视图，由于搜索栏的问题，只是用滚动视图替换了简单视图。您的帮助将不胜感激！谢谢，

塞巴斯蒂安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:58:25.537

我发现我的错误，这是因为我的应用程序处于横向模式并且 uiSearchBar 位置是相对于工具栏的。下面是修复

```
- (void)keyboardWasShown:(NSNotification *)aNotification {

// Get the Keyboard size
NSDictionary* info = [aNotification userInfo];
CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

// Add to the scroll view a bottom inset equal to height of the keyboard
UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
self.scrollView.contentInset = contentInsets;
self.scrollView.scrollIndicatorInsets = contentInsets;

// If active text field is hidden by keyboard, scroll it so it's visible
// Your application might not need or want this behavior.
CGRect aRect = self.view.frame;
aRect.size.height -= kbSize.width; // in landscape mode need to get width and not height!

// Compute the position of the uiSearchBar in the screen (whole scrollview)
CGPoint realPoint = [_LocateCell convertPoint:_LocateCell.frame.origin toView:self.scrollView];

if (!CGRectContainsPoint(aRect, realPoint) ) {
    CGPoint scrollPoint = CGPointMake(0.0, kbSize.width);
    [self.scrollView setContentOffset:scrollPoint animated:YES];
} 
```

}

# java - 如果我们超过了java中ByteBuffer.allocate(48) NIO包类中分配缓冲区的容量怎么办

> ID：10373135
> 
> 赞同：0
> 
> 时间：2012-04-29T14:55:17.987
> 
> 标签：java, io, stream, nio, bytebuffer

```
 file = new RandomAccessFile("xanadu.txt", "rw");
        FileChannel channel = file.getChannel();
        ByteBuffer buffer = ByteBuffer.allocate(48);
        int byteReads = channel.read(buffer); 
```

所以我在缓冲区中分配了 48 个容量。现在考虑我正在阅读的 txt 文件大小约为 10MB ，因此从逻辑上讲它跨越了缓冲区分配大小。但是当我们尝试读取时，我们将能够读取文件的所有内容，而不管文件大小。所以这件事怎么可能。

*我是这个流媒体领域的新手，所以我的问题似乎很基本。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T14:58:06.510

该`read`调用根本不会读取超过 48 个字节。

什么都不会溢出，您只需要`read`反复调用，直到您读取了您期望的所有数据。

这在[`ReadableByteChannel`](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/ReadableByteChannel.html)接口文档中有所说明：

> 从此通道中读取一个字节序列到给定的缓冲区中。
> 
> 尝试从通道读取最多 r 个字节，其中 r 是在调用此方法时缓冲区中剩余的字节数，即 dst.remaining()。

[`clear()`](http://docs.oracle.com/javase/6/docs/api/java/nio/Buffer.html#clear())在将其内容传递回之前，您需要处理缓冲区内容`read`。

# iphone - 跨类声明错误？

> ID：10373141
> 
> 赞同：0
> 
> 时间：2012-04-29T14:55:52.980
> 
> 标签：iphone, objective-c, ios

我正在尝试使用 Restkit 进行映射并创建了 2 个类，如下所示。我收到以下错误：

*   ****Campaign.h**中的**未知类型名称“卡”****
*****   ****Card.h**中的**未知类型名称“Campaign”*********   **具有“保留（或强）”属性的属性必须是对象类型***   ...更多但类似的错误********

 ****我的问题是有没有办法通过重用类来实现下面的类声明。

**运动.h**

```
#import "Card.h"

@interface Campaign : NSObject

@property (nonatomic, strong) NSNumber* campaignId;
@property (nonatomic, strong) NSString* title;
@property (nonatomic, strong) Card* card;

@end 
```

**卡片.h**

```
#import "Campaign.h"

@interface Card : NSObject

@property (nonatomic, strong) NSNumber* cardId;
@property (nonatomic, strong) NSString* name;
@property (nonatomic, strong) Campaign* campaign;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T14:59:50.587

通常，在标头中，您使用前向类声明，以避免导入冲突。所以在`Campaign.h`, 在你的界面之前, 你会有`@class Card`, 在`Card.h`, 你会有`@class Campaign`. 这只是告诉编译器这些类存在并且在其他地方定义；这通常是您在标题中需要知道的全部内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:29:48.313

以防万一将来有人需要它。这是我的解决方案：

**运动.h**

```
@class Card;

@interface Campaign : NSManagedObject

@property (nonatomic, strong) NSNumber* campaignId;
@property (nonatomic, strong) NSString* title;
@property (nonatomic, strong) Card* card;

@end 
```

**运动.m**

```
#import "Card.h"

@implementation Campaign

...

@end 
```

**卡片.h**

```
@class Campaign;

@interface Card : NSManagedObject

@property (nonatomic, strong) NSNumber* cardId;
@property (nonatomic, strong) NSString* name;
@property (nonatomic, strong) Campaign* campaign;

@end 
```

**卡.m**

```
#import "Campaign.h"

@implementation Card

...

@end 
```****

# jquery - 是否有用于特定输入类型列表（type='text' 等）的简洁 jQuery 选择器？

> ID：10373146
> 
> 赞同：1
> 
> 时间：2012-04-29T14:56:02.470
> 
> 标签：jquery, jquery-selectors, textinput

有没有更简洁的方法来做到这一点？

```
// exclude all HTML 4 except text and password, but include HTML 5 except search
var inputSelector = "textarea,input[type='text'],input[type='password'],input[type='color']," +
    "input[type='date'],input[type='datetime'],input[type='datetime-local']," +
    "input[type='email'],input[type='month'],input[type='number'],input[type='range']," +
    "input[type='tel'],input[type='time'],input[type='url'],input[type='week']"; 
```

**注意：**我不能使用 .Not() 函数，因为这个选择器将在 .delegate() 函数中使用。此外，最好让选择器默认包含未来的输入类型（HTML 6 >）。

**回答：**

这就是我现在所拥有的。比以前好多了。如果可以进一步完善，请告诉我。

```
// exclude all HTML 4 except text and password, but include HTML 5 except search
var inputSelector = "textarea,input:not([type='checkbox'],[type='radio'],[type='button']," +
    "[type='image'],[type='submit'],[type='reset'],[type='file'],[type='search'])"; 
```

请注意，它还包括输入和文本区域，这也意味着默认情况下将包括对 HTML 规范的未来添加（对于那些认为不可能的人）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:23:40.690

It seems like the **delegate()** method does not work well when the selector is not a string. 要解决这个问题，只需将您的逻辑放在您的委托处理程序中

```
//Input types I do not want to select
var typeArray = ["text", "date"];

$("form").delegate("input", "click", function() {
    if($.inArray(this.type, typeArray) === -1) {
        //Put your logic here
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:38:00.880

如果要过滤掉多种类型，可以执行以下操作：

```
$('input[type!="radio"][type!="text"]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T15:34:09.630

MДΓΓ БДLL 和 xFortyFourx 都给了我这个解决方案，结果证明这是我正在寻找的最佳答案，但不知道为什么它在评论而不是答案中得到了回答。

```
$("input:not([type='radio'], [type='text'])") 
```

# android - android线程间com没有共享

> ID：10373149
> 
> 赞同：-2
> 
> 时间：2012-04-29T14:56:40.687
> 
> 标签：android, multithreading

我需要做一些线程间通信。如果我正确理解了一些我读过的示例，那么两个线程都共享一个全局变量（如 Handler）。我需要在不共享任何对象的情况下完成我的线程。

可能吗？

10xs，那鸿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:18:04.327

您可以使用 Handler 进行线程间通信。我希望您不要将线程间通信与进程间通信（IPC）混淆。

# javascript - 这个类似射线的动画背后的数学原理是什么？

> ID：10373151
> 
> 赞同：18
> 
> 时间：2012-04-29T14:57:07.790
> 
> 标签：javascript, math

我已[将此动画未混淆并简化为](http://www.p01.org/releases/128b_raytraced_checkboard/128b.htm?utm_source=javascriptweekly&utm_medium=email)[此处](http://jsfiddle.net/fEMfm/)提供的 jsfiddle 。尽管如此，我仍然不太了解它背后的数学原理。

有人对动画有任何见解吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T14:35:19.007

由于缺少间隔速度，您的小提琴链接对我不起作用，也应该使用`getElementById`（**只是因为它在 Internet Explorer 中工作并不能使其跨浏览器**）。

在这里，我分叉了它，改用这个：

[http://jsfiddle.net/spechackers/hJhCz/](http://jsfiddle.net/spechackers/hJhCz/)

我还清理了您的第一个链接中的代码：

```
<pre id="p">
<script type="text/javascript">
var charMap=['p','.'];
var n=0;
function myInterval()
{

    n+=7;//this is the amount of screen to "scroll" per interval
    var outString="";

    //this loop will execute exactly 4096 times. Once for each character we will be working with.
    //Our display screen will consist of 32 lines or rows and 128 characters on each line
    for(var i=64; i>0; i-=1/64)
    {

        //Note mod operations can result in numbers like 1.984375 if working with non-integer numbers like we currently are
        var mod2=i%2;

        if(mod2==0)
        {
            outString+="\n";
        }else{
            var tmp=(mod2*(64/i))-(64/i);//a number between 0.9846153846153847 and -4032
            tmp=tmp+(n/64);//still working with floating points.
            tmp=tmp^(64/i);//this is a bitwise XOR operation. The result will always be an integer
            tmp=tmp&1;//this is a bitwise AND operation. Basically we just want to know if the first bit is a 1 or 0.
            outString+=charMap[tmp];

        }
    }//for
    document.getElementById("p").innerHTML=outString;
}

myInterval();
setInterval(myInterval,64);
</script>
</pre> 
```

您提供的两个链接中的代码结果彼此非常不同。但是代码中的逻辑非常相似。两者都使用 for 循环遍历所有字符，对非整数进行 mod 操作和`bitwise`xor 操作。

这一切是如何运作的，基本上都是`I can tell you is to pay attention to the variables changing as the input and output change`。

所有逻辑似乎都是某种`bitwise`神秘的方式来决定将 2 个字符中的哪一个或换行符添加到页面中。

从某种角度来看，我自己并不完全遵循它`calculus or trigonometry`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T22:31:12.257

考虑每条线，当它扫过矩形区域时，实际上是（4？）线围绕固定原点的旋转。

根据视觉错觉，背景似乎在“移动”。实际发生的是，扫描线之间的区域在两个字符之间切换，因为这些线在它们之间旋转。

这是二维的旋转方程：

首先，在旋转（运动）之前和之后，可视化其中一条线中的 (x,y) 坐标对：

![二维中的旋转描述和旋转方程](../Images/5ca74190120e7983ba3fa21de0122c4e.png)

因此，您可以为每条线制作一组点，然后将它们旋转任意大小的角度，具体取决于您想要动画的“平滑度”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T09:49:02.620

我上面的答案着眼于用给定公式转换的整个平面。

我试图在这里简化它 - 上面的公式是旋转的三角方程，它更简单地用矩阵求解。

x1 是旋转变换（或算子）动作之前的 x 坐标。

y1 相同。说 x1 = 0 和 y1 = 1。这些是 xy 平面中矢量末端的 x,y 坐标 - 当前是您的屏幕。如果插入任何角度，您将获得新的坐标，矢量的“尾部”固定在同一位置。

如果你做很多次（次数取决于你选择的角度）你会回到 0 x = 0 和 y =1。

至于按位运算-我不知道为什么要使用它。

每次迭代，按位运算决定是否绘制平面的点。注意 k 的幂如何改变结果。

延伸阅读——

[http://en.wikipedia.org/wiki/Linear_algebra#Linear_transformations](http://en.wikipedia.org/wiki/Linear_algebra#Linear_transformations)

[http://www.youtube.com/user/khanacademy/videos?query=linear+algebra](http://www.youtube.com/user/khanacademy/videos?query=linear+algebra)

# apache-flex - OpenLaszlo 杀死加载的 Flex 应用程序的一些鼠标事件

> ID：10373154
> 
> 赞同：2
> 
> 时间：2012-04-29T14:57:37.773
> 
> 标签：apache-flex, openlaszlo

这是关于 OpenLaszlo（或者更确切地说是 Flex？）内部的问题：

我能够将完整的 Flex 应用程序 swf 加载到 OpenLaszlo 中（主干版本，旧版本失败）。它可以在 Flash 10 和 11 中工作。但 OpenLaszlo 似乎可以捕获或阻止某些鼠标事件。当我将 SWF 添加到

```
YFilesSWF.content.sprite (YFilesSWF is extending the window class) 
```

然后大多数鼠标操作都可以工作（例如 Flex 按钮），但有些则不行（一些可点击的项目在画布上）。我进一步观察到，当我将 SWF 添加到

```
YFilesSWF.sprite (YFilesSWF is extending the view) 
```

，则 SWF 不再对任何鼠标事件作出反应。这意味着窗口稍微好一些，但还不够好。我正在使用

```
flash.display.Loader 
```

用于以正常方式加载 SWF 的类。这是我用于加载 swf 的 AS3 Loader 类实现，它包含**在 OpenLaszlo 应用程序中**：

```
 public class LoadSwf extends Sprite
 {
      public var externalSwfLoader:Loader = new Loader();
      public var swfDisplayObject:DisplayObject;
      public var swfComObject:Object;

     public function LoadSwf(url:String,p:Sprite):void
     {
//                externalSwfLoader.mouseChildren = false;
//                this.mouseChildren = false;
//                p.mouseChildren = false;   

//                externalSwfLoader.mouseEnabled = false;
//                this.mouseEnabled = false;
//                p.mouseEnabled = false;   

            p.addChild(this);
          externalSwfLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, createSwfObjects);
          externalSwfLoader.load(new URLRequest(url));
     }

     public function createSwfObjects(evt:Event):void
     {
          var loaderInfo:LoaderInfo = evt.target as LoaderInfo;

          swfDisplayObject = evt.target.content;
          swfComObject = loaderInfo.content;

          addChild(swfDisplayObject);
     }
} 
```

这是如何使用该类的 OpenLaszlo 代码：

```
<class name="YFilesSWF" extends="window">

            <passthrough>
                    import LoadSwf;
            </passthrough>

            <attribute name="loadSwf" />

            <handler name="oninit"><![CDATA[
                    this.loadSwf = new LoadSwf("SimpleGraphEditor.swf", this.content.sprite);
            ]]></handler>
 </class> 
```

有谁知道 OpenLaszlo 在哪里破坏了一些 Flex 鼠标事件以及如何防止它？有没有比 window 更好的组件来保存 Flex 鼠标事件？在 OL 组件源代码中需要修改什么？

谢谢！

# php - 如何从 POST 请求中获取参数名称？

> ID：10373163
> 
> 赞同：2
> 
> 时间：2012-04-29T14:58:35.113
> 
> 标签：php, web, http-post

有一个搜索服务 (PHP) 通过 POST 发送搜索查询。我想在我的应用程序中使用该搜索引擎。PHP 服务没有公共 API。

有没有办法输入搜索查询并获取 POST 请求以查看参数名称？稍后我将使用它从我的应用程序发送 POST 请求并捕获 POST 响应。

这是一个官方搜索引擎，政府官员不回复我告诉我参数名称的请求。这不是违法的，应用程序是免费的，只是我不能再等待他们，因为他们会回复我。

PS。我可以访问 Ubuntu shell 及其管理工具。

**编辑**

这就是搜索表单在网页源中的样子（通过浏览器查看）

```
<form action="search.php" method="POST">
   <input type="text" name="search" size=20><br>
   SZ<input type="checkbox" checked name="sz">
   NZ<input type="checkbox" checked name="nz">
   <input type="submit" name="search_term" value="search" >
</form> 
```

**编辑 2**

不要编辑帖子，因为有人向我建议了通过 linux 命令 curl 执行此操作的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:10:32.350

您是否尝试过在搜索表单上查看源代码以获取 POST 参数？即输入框的名称

**编辑** 以 tizag 网站上的 php 表单为例

```
<html><body>
<h4>Tizag Art Supply Order Form</h4>
<form action="process.php" method="post"> 
<select name="item"> 
<option>Paint</option>
<option>Brushes</option>
<option>Erasers</option>
</select>
Quantity: <input name="quantity" type="text" /> 
<input type="submit" />
</form>
</body></html> 
```

参数是输入名称，即质量和项目

**Java 代码**（用于 appengine）

```
HttpURLConnection connection = null;
String line = null;
BufferedReader rd = null;
String urlParameters = "search=search&submit=Submit";
serverAddress = new URL("http://www.search.com/search.php");
// set up out communications stuff
connection = null;
connection = (HttpURLConnection) serverAddress.openConnection();
// connection.setRequestMethod("GET");
connection.setRequestMethod("POST");
connection.setRequestProperty("Referer", "");
connection.setRequestProperty("User-Agent", ""); 
connection.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length));
connection.setRequestProperty("Content-Language", "en-US");
connection.setUseCaches(false);
connection.setDoInput(true);
connection.setDoOutput(true);
DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
wr.writeBytes(urlParameters);
wr.flush();
wr.close();
connection.connect();
if (connection.getResponseCode() == 404) {
    throw new ErrorException();
}
ArrayList<String> ud = new ArrayList<String>();
rd = new BufferedReader(new InputStreamReader(connection.getInputStream()));
while ((line = rd.readLine()) != null) {
    ud.add(line); // add response to arraylist
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:05:07.420

虽然这当然可以[在 PHP 中使用 curl 完成](http://php.net/manual/en/book.curl.php)，但您应该考虑抓取政府网站以收集和重用其数据的可能后果。

当然，我不知道您将如何使用数据、数据的重要性、请求的频率，或者您是否会使用代理。所以可能没什么好担心的。

您想知道第三方搜索引擎返回的参数。因此，您将使用 curl 发布到有问题的 SE。然后解析返回的页面并提取您想要的信息。

**编辑：**好的，所以你是一个 Java 人。如果您更愿意使用 shell，请阅读一些 PHP 的“ [exec](http://uk3.php.net/exec) ”命令示例。您可能还想查看类似的“[系统](http://uk3.php.net/manual/en/function.system.php)”和“[通路”。](http://uk3.php.net/manual/en/function.passthru.php)

# xml - 网站的音乐播放列表

> ID：10373164
> 
> 赞同：1
> 
> 时间：2012-04-29T14:58:37.517
> 
> 标签：xml, database, mpmusicplayercontroller, audio-player

我有一个非常简单的问题。我正在争论是否应该使用 XML 或数据库来存储音乐播放列表......我正在做的大致细节如下所述：

1.  音乐播放列表取决于注册用户，这意味着每个用户都有自己的播放列表
2.  如果存储在数据库中，则可以通过每个用户的用户 ID 引用它
3.  如果存储在 XML 中，每个用户将拥有自己的 XML 文件来存储他的个人播放列表
4.  **播放列表应该是安全的，这样人们就无法获取音频文件的 url 以供下载**

我认为这是非常基本的，但请提供您的意见和选择的理由，这样我可以评估我的选择并选择最好的。谢谢您的帮助！！

**编辑** 增加了一个细节

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:06:50.913

很酷的想法，但是当使用 Xml::your 项目时，搜索起来会更安全和更快
。使用 Mysql 时，您需要创建大量使用 hirrectial 关系的表。好好观察 Youtube...

# mysql - 如何只计算第一次出现的值？

> ID：10373166
> 
> 赞同：2
> 
> 时间：2012-04-29T14:59:33.537
> 
> 标签：mysql, sql

我有一张这样的桌子；

```
+----+---------+-------------+
| id | user_id | screenWidth |
+----+---------+-------------+
|  1 |       1 |        1366 |
|  2 |       1 |        1366 |
|  3 |       1 |        1366 |
|  4 |       1 |        1366 |
|  5 |       2 |        1920 |
|  6 |       2 |        1920 |
|  7 |       3 |        1920 |
|  8 |       4 |        1280 |
|  9 |       5 |        1280 |
| 10 |       6 |        1280 |
+----+---------+-------------+ 
```

连同大量其他数据。如果需要，这可以标准化，最初我认为我不需要，但也许我应该。反正，

我想要一个查询，每个用户只计算一次 screenWidth 值，所以输出看起来像：

```
+-------------+-------+
| screenWidth | count |
+-------------+-------+
|        1366 |     1 |
|        1920 |     2 |
|        1280 |     3 |
+-------------+-------+ 
```

而不是将 1366 计为 4 - 这将避免重度用户扭曲数据。

有没有办法写一个查询来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T15:02:59.000

简短而简单：使用[`COUNT DISTINCT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count-distinct)：

```
SELECT
  screenWidth,
  COUNT(DISTINCT user_id)
FROM
  mytable
GROUP BY
  screenWidth; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T15:06:35.050

您必须获取每个屏幕宽度的用户的 DISTINCT 计数，这是将获取结果的示例查询。

[**单击此处查看 SQL Fiddle 中的演示**](http://sqlfiddle.com/#!6/0c23c/3)

*脚本*：

```
CREATE TABLE screenwidth 
(
    id INT NOT NULL
  , user_id INT NOT NULL
  , screenwidth INT NOT NULL
);

INSERT INTO screenwidth (id, user_id, screenwidth) VALUES
  (1, 1, 1366),
  (2, 1, 1366),
  (3, 1, 1366),
  (4, 1, 1366),
  (5, 2, 1920),
  (6, 2, 1920),
  (7, 3, 1920),
  (8, 4, 1280),
  (9, 5, 1280),
  (10, 6, 1280);

SELECT      screenwidth
        ,   COUNT(DISTINCT user_id) AS screenwidthcount
FROM        screenwidth
GROUP BY    screenwidth
ORDER BY    screenwidthcount; 
```

*输出*：

```
SCREENWIDTH SCREENWIDTHCOUNT
----------- ----------------
1366               1
1920               2
1280               3 
```

# c# - Swapchain.Present() 耗时太长，导致滞后

> ID：10373169
> 
> 赞同：2
> 
> 时间：2012-04-29T14:59:40.597
> 
> 标签：c#, performance, lag, slimdx, dxgi

自从我将我的所有 c# SlimDX DX11 渲染代码从我的表单（是的，我是一个懒惰的开发人员）移动到定制类后，我最近有点滞后。我将我的程序打进了 EQATEC Profiler 并把它作为我滞后的主要贡献者：

![EQATEC Profiler 结果显示函数 postRender() 有问题](../Images/ca4a464e74c0420e7c53f6c1da4307b2.png)

现在很清楚， postRender() 中的任何内容都真正占用了宝贵的毫秒数。事实上，无论我在其中有什么疯狂、复杂的代码，它本身都会有效地将我的帧速率降低到 ~15 FPS。

那么 postRender() 中有什么？只需一行代码：

```
swapChain.Present(0, PresentFlags.None); 
```

我只是不知道是什么导致它这么慢，我根本没有对交换链代码进行任何更改。我所更改的只是屏幕分辨率（1680x1050），但这绝对没问题（作为参考，这台机器可以在该分辨率下以最大设置运行 crysis2 而不会出汗）。

有没有人知道什么可能导致交换链需要这么长时间才能呈现或者我应该在哪里寻找问题？

编辑：

查看我的代码结构，我的 RenderFrame() 函数如下：

```
preRender();
DeferredRender(preShader);
//Composite scene to output image
CompositeScene(compositeShader);
//Post Process
PostProcess(postProcShader);
//Depth of Field
DoF(dofShader);
//Present the swapchain
postRender(); 
```

其中一些函数的结果基于之前的函数（例如，DeferredRender 使用四个渲染目标以逐像素的方式捕获漫反射光照、法线、位置和颜色。然后 CompositeScene 将它们放在一起。这将需要GPU 在继续之前已经计算了上一步。整个过程继续进行，DoF 需要 PostProcess 的结果等。因此，唯一可能保持 Swapchain.Present() 的着色器必须是运行在功能DoF，因为所有其他着色器都会导致CPU锁定直到它们完成。对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:34:50.247

有几个原因可能会导致 Present() 在框架中占用这么多时间。Present调用是CPU和GPU之间同步的主要方法；如果 CPU 生成帧的速度比 GPU 处理它们的速度快得多，它们就会排队。一旦缓冲区满了，Present() 就会变成一个美化的 Sleep() 调用，等待它清空。

当然，您在这里提供的信息很少，几乎不可能说出来。仅仅因为一台机器运行《孤岛危机》并不意味着你可以随意向卡片扔任何你想要的东西。仔细检查您是否期望渲染大量几何图形，并且您的着色器没有异常长和复杂。

还可以使用其中一种可用的 GPU 分析器查看您的应用程序；PIX 是一个很好的基点，而 NVIDIA 和 AMD 各自为自己的产品提供了更具体的产品。最后，确保您的驱动程序已更新。如果驱动程序中存在错误，那么您对问题进行推理的任何机会都会消失。

# linux - 在 bash 脚本中转义空间

> ID：10373182
> 
> 赞同：4
> 
> 时间：2012-04-29T15:01:27.967
> 
> 标签：linux, bash

我正在尝试制作一个脚本来附加所有以 .hash 结尾的文件以由 md5deep 验证。名称中带有空格的文件似乎破坏了这个脚本。

```
#!/bin/bash
XVAR=""
for f in *.hash
do
    XVAR="$XVAR -x $f "
done
md5deep -e $XVAR -r * 
```

每当我使用名为“O S.hash”的文件运行脚本时，我都会得到

```
O: No such file or directory 
```

如果我更改`XVAR="$XVAR -x $f "`为`XVAR="$XVAR -x \'$f\' "`或 `XVAR="$XVAR -x \"$f\" "`

md5deep 将输入作为“O”相互渗透

```
"O: No such file or directory 
```

脚本中变量的回显将 XVAR 显示为`-x 'O S.hash'`或`-x "O S.hash"`

在 shell 中手动输入命令，例如`md5deep -e -x "O S.hash" -r *`有效，但如果它在脚本中，则命令似乎中断

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T15:20:02.910

这不是最好的解决方案，但似乎它会起作用：

```
find . -name '*.hash' -printf "-x\0%p\0" | xargs -0 md5deep -r * -e 
```

这实际上与 OP 想要的并不完全相同，所以这是 Tim Pote 和 Jonathan Leffler 建议的修改：

```
find . -maxdepth 1 -name '*.hash' -printf "-x\0%p\0" | xargs -0 md5deep -r * -e 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T15:35:33.700

现在您知道为什么 Unix 系统上的人们传统上会避免使用包含空格的文件名（以及目录名）——不得不对 shell 进行编程来处理这些名称是一件令人讨厌的事情（礼貌地说）。shell 是为在没有此类名称的系统中使用而设计的。换行符也会引起很多悲伤。

使用`bash`，到目前为止，您最好的解决方案是使用数组来保存元素，然后`"${array[@]}"`列出它们；这几乎是微不足道的：

```
declare -a XVAR

for file in *.hash
do
    XVAR+=("-x" "$file")
done

md5deep -e "${XVAR[@]}" -r * 
```

（*利用[Gordon Davisson](https://stackoverflow.com/users/89817/gordon-davisson)提到的数组扩展符号。* 有关`bash`大量数组信息，请参阅参考手册（针对 Bash 4.1）的第 6.7 节“数组”；有关`+=`运算符，请参阅第 3.4 节“外壳参数”。）

如果由于某种原因你不能使用数组，那么你需要一个程序来转义它的参数，这样 shell 就不会扭曲东西。我有这样一个程序，叫做`escape`：

```
XVAR=
for file in *.hash
do
    name=$(escape "$file")
    XVAR="$XVAR -x $file"
done
eval md5deep -e $XVAR -r * 
```

使用eval，使用起来很棘手；它有效，但使用数组。

# c++ - C++ 中的带通巴特沃斯滤波器实现

> ID：10373184
> 
> 赞同：10
> 
> 时间：2012-04-29T15:01:47.283
> 
> 标签：c++, matlab, image-processing, filter

我正在使用 openCV 和 c++ 实现图像分析算法，但我发现 openCV 没有任何正式的巴特沃斯带通滤波器功能。在我的项目中，我必须将像素时间序列传递给 Butterworth 5 阶滤波器，该函数将返回过滤后的时间序列像素。Butterworth（像素系列，顺序，频率），如果您有任何想法可以帮助我了解如何开始，请告诉我。谢谢

**编辑：** 得到帮助后，最后我想出了以下代码。它可以计算分子系数和分母系数，但问题是某些数字与matlab结果不一样。这是我的代码：

```
#include <iostream>
#include <stdio.h>
#include <vector>
#include <math.h>

using namespace std;

#define N 10 //The number of images which construct a time series for each pixel
#define PI 3.14159

double *ComputeLP( int FilterOrder )
{
    double *NumCoeffs;
    int m;
    int i;

    NumCoeffs = (double *)calloc( FilterOrder+1, sizeof(double) );
    if( NumCoeffs == NULL ) return( NULL );

    NumCoeffs[0] = 1;
    NumCoeffs[1] = FilterOrder;
    m = FilterOrder/2;
    for( i=2; i <= m; ++i)
    {
        NumCoeffs[i] =(double) (FilterOrder-i+1)*NumCoeffs[i-1]/i;
        NumCoeffs[FilterOrder-i]= NumCoeffs[i];
    }
    NumCoeffs[FilterOrder-1] = FilterOrder;
    NumCoeffs[FilterOrder] = 1;

    return NumCoeffs;
}

double *ComputeHP( int FilterOrder )
{
    double *NumCoeffs;
    int i;

    NumCoeffs = ComputeLP(FilterOrder);
    if(NumCoeffs == NULL ) return( NULL );

    for( i = 0; i <= FilterOrder; ++i)
        if( i % 2 ) NumCoeffs[i] = -NumCoeffs[i];

    return NumCoeffs;
}

double *TrinomialMultiply( int FilterOrder, double *b, double *c )
{
    int i, j;
    double *RetVal;

    RetVal = (double *)calloc( 4 * FilterOrder, sizeof(double) );
    if( RetVal == NULL ) return( NULL );

    RetVal[2] = c[0];
    RetVal[3] = c[1];
    RetVal[0] = b[0];
    RetVal[1] = b[1];

    for( i = 1; i < FilterOrder; ++i )
    {
        RetVal[2*(2*i+1)]   += c[2*i] * RetVal[2*(2*i-1)]   - c[2*i+1] * RetVal[2*(2*i-1)+1];
        RetVal[2*(2*i+1)+1] += c[2*i] * RetVal[2*(2*i-1)+1] + c[2*i+1] * RetVal[2*(2*i-1)];

        for( j = 2*i; j > 1; --j )
        {
            RetVal[2*j]   += b[2*i] * RetVal[2*(j-1)]   - b[2*i+1] * RetVal[2*(j-1)+1] +
                c[2*i] * RetVal[2*(j-2)]   - c[2*i+1] * RetVal[2*(j-2)+1];
            RetVal[2*j+1] += b[2*i] * RetVal[2*(j-1)+1] + b[2*i+1] * RetVal[2*(j-1)] +
                c[2*i] * RetVal[2*(j-2)+1] + c[2*i+1] * RetVal[2*(j-2)];
        }

        RetVal[2] += b[2*i] * RetVal[0] - b[2*i+1] * RetVal[1] + c[2*i];
        RetVal[3] += b[2*i] * RetVal[1] + b[2*i+1] * RetVal[0] + c[2*i+1];
        RetVal[0] += b[2*i];
        RetVal[1] += b[2*i+1];
    }

    return RetVal;
}

double *ComputeNumCoeffs(int FilterOrder)
{
    double *TCoeffs;
    double *NumCoeffs;
    int i;

    NumCoeffs = (double *)calloc( 2*FilterOrder+1, sizeof(double) );
    if( NumCoeffs == NULL ) return( NULL );

    TCoeffs = ComputeHP(FilterOrder);
    if( TCoeffs == NULL ) return( NULL );

    for( i = 0; i < FilterOrder; ++i)
    {
        NumCoeffs[2*i] = TCoeffs[i];
        NumCoeffs[2*i+1] = 0.0;
    }
    NumCoeffs[2*FilterOrder] = TCoeffs[FilterOrder];

    free(TCoeffs);

    return NumCoeffs;
}

double *ComputeDenCoeffs( int FilterOrder, double Lcutoff, double Ucutoff )
{
    int k;            // loop variables
    double theta;     // PI * (Ucutoff - Lcutoff) / 2.0
    double cp;        // cosine of phi
    double st;        // sine of theta
    double ct;        // cosine of theta
    double s2t;       // sine of 2*theta
    double c2t;       // cosine 0f 2*theta
    double *RCoeffs;     // z^-2 coefficients
    double *TCoeffs;     // z^-1 coefficients
    double *DenomCoeffs;     // dk coefficients
    double PoleAngle;      // pole angle
    double SinPoleAngle;     // sine of pole angle
    double CosPoleAngle;     // cosine of pole angle
    double a;         // workspace variables

    cp = cos(PI * (Ucutoff + Lcutoff) / 2.0);
    theta = PI * (Ucutoff - Lcutoff) / 2.0;
    st = sin(theta);
    ct = cos(theta);
    s2t = 2.0*st*ct;        // sine of 2*theta
    c2t = 2.0*ct*ct - 1.0;  // cosine of 2*theta

    RCoeffs = (double *)calloc( 2 * FilterOrder, sizeof(double) );
    TCoeffs = (double *)calloc( 2 * FilterOrder, sizeof(double) );

    for( k = 0; k < FilterOrder; ++k )
    {
        PoleAngle = PI * (double)(2*k+1)/(double)(2*FilterOrder);
        SinPoleAngle = sin(PoleAngle);
        CosPoleAngle = cos(PoleAngle);
        a = 1.0 + s2t*SinPoleAngle;
        RCoeffs[2*k] = c2t/a;
        RCoeffs[2*k+1] = s2t*CosPoleAngle/a;
        TCoeffs[2*k] = -2.0*cp*(ct+st*SinPoleAngle)/a;
        TCoeffs[2*k+1] = -2.0*cp*st*CosPoleAngle/a;
    }

    DenomCoeffs = TrinomialMultiply(FilterOrder, TCoeffs, RCoeffs );
    free(TCoeffs);
    free(RCoeffs);

    DenomCoeffs[1] = DenomCoeffs[0];
    DenomCoeffs[0] = 1.0;
    for( k = 3; k <= 2*FilterOrder; ++k )
        DenomCoeffs[k] = DenomCoeffs[2*k-2];

    return DenomCoeffs;
}

void filter(int ord, double *a, double *b, int np, double *x, double *y)
{
    int i,j;
    y[0]=b[0] * x[0];
    for (i=1;i<ord+1;i++)
    {
        y[i]=0.0;
        for (j=0;j<i+1;j++)
            y[i]=y[i]+b[j]*x[i-j];
        for (j=0;j<i;j++)
            y[i]=y[i]-a[j+1]*y[i-j-1];
    }
    for (i=ord+1;i<np+1;i++)
    {
        y[i]=0.0;
        for (j=0;j<ord+1;j++)
            y[i]=y[i]+b[j]*x[i-j];
        for (j=0;j<ord;j++)
            y[i]=y[i]-a[j+1]*y[i-j-1];
    }
}

int main(int argc, char *argv[])
{
    //Frequency bands is a vector of values - Lower Frequency Band and Higher Frequency Band

    //First value is lower cutoff and second value is higher cutoff
    double FrequencyBands[2] = {0.25,0.375};//these values are as a ratio of f/fs, where fs is sampling rate, and f is cutoff frequency
    //and therefore should lie in the range [0 1]
    //Filter Order

    int FiltOrd = 5;

    //Pixel Time Series
    /*int PixelTimeSeries[N];
    int outputSeries[N];
    */
    //Create the variables for the numerator and denominator coefficients
    double *DenC = 0;
    double *NumC = 0;
    //Pass Numerator Coefficients and Denominator Coefficients arrays into function, will return the same

    NumC = ComputeNumCoeffs(FiltOrd);
    for(int k = 0; k<11; k++)
    {
        printf("NumC is: %lf\n", NumC[k]);
    }
    //is A in matlab function and the numbers are correct
    DenC = ComputeDenCoeffs(FiltOrd, FrequencyBands[0], FrequencyBands[1]);
    for(int k = 0; k<11; k++)
    {
        printf("DenC is: %lf\n", DenC[k]);
    }
    double y[5];
    double x[5]={1,2,3,4,5};
    filter(5, DenC, NumC, 5, x, y);    
    return 1;
} 
```

我的代码得到了这个结果：

> B= 1,0,-5,0,10,0,-10,0,5,0,-1 A= 1.000000000000000, -4.945988709743181, 13.556489496973796, -24.700711850327743, 32.994881546824828, -33.180726698160655, 25.546126213403539, -14.802008410165968, 6.285430089797051, -1.772929809750849, 0.277753012228403

但是如果我想在 MATLAB 中测试相同频段的系数，我会得到以下结果：

> ```
> >> [B, A]=butter(5, [0.25,0.375]) 
> ```
> 
> B = 0.0002, 0, -0.0008, 0, 0.0016, 0, -0.0016, 0, 0.0008, 0, -0.0002
> 
> A = 1.0000、-4.9460、13.5565、-24.7007、32.9948、-33.1806、25.5461、-14.8020、6.2854、-1.7729、0.2778

我已经测试了这个网站：http://www.exstrom.com/journal/sigproc/ 代码，但结果和我的一样，不是matlab。有人知道为什么吗？或者我怎样才能得到与 matlab 工具箱相同的结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-17T04:50:21.197

我知道这是一个旧线程上的帖子，我通常会将此作为评论，但我显然无法做到这一点。

无论如何，对于搜索类似代码的人，我想我会发布该代码的来源链接（它还有其他类型的巴特沃斯滤波器系数的 C 代码和一些其他很酷的信号处理代码）。

代码位于： [http ://www.exstrom.com/journal/sigproc/](http://www.exstrom.com/journal/sigproc/)

此外，我认为已经有一段代码可以为您计算所述比例因子。

```
/**********************************************************************
sf_bwbp - calculates the scaling factor for a butterworth bandpass filter.
The scaling factor is what the c coefficients must be multiplied by so
that the filter response has a maximum value of 1.
*/

double sf_bwbp( int n, double f1f, double f2f )
{
    int k;            // loop variables
    double ctt;       // cotangent of theta
    double sfr, sfi;  // real and imaginary parts of the scaling factor
    double parg;      // pole angle
    double sparg;     // sine of pole angle
    double cparg;     // cosine of pole angle
    double a, b, c;   // workspace variables

    ctt = 1.0 / tan(M_PI * (f2f - f1f) / 2.0);
    sfr = 1.0;
    sfi = 0.0;

    for( k = 0; k < n; ++k )
    {
        parg = M_PI * (double)(2*k+1)/(double)(2*n);
        sparg = ctt + sin(parg);
        cparg = cos(parg);
        a = (sfr + sfi)*(sparg - cparg);
        b = sfr * sparg;
        c = -sfi * cparg;
        sfr = b - c;
        sfi = a - b - c;
    }

    return( 1.0 / sfr );
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T12:24:20.730

我终于找到了。我只需要将以下代码从 matlab 源代码实现到 c++ 。“the_mandrill”是对的，我需要将归一化常数添加到系数中：

```
kern = exp(-j*w*(0:length(b)-1));
b = real(b*(kern*den(:))/(kern*b(:))); 
```

**编辑：** 这是最终版本，整个代码将返回与 MATLAB 完全相同的数字：

```
double *ComputeNumCoeffs(int FilterOrder,double Lcutoff, double Ucutoff, double *DenC)
{
    double *TCoeffs;
    double *NumCoeffs;
    std::complex<double> *NormalizedKernel;
    double Numbers[11]={0,1,2,3,4,5,6,7,8,9,10};
    int i;

    NumCoeffs = (double *)calloc( 2*FilterOrder+1, sizeof(double) );
    if( NumCoeffs == NULL ) return( NULL );

    NormalizedKernel = (std::complex<double> *)calloc( 2*FilterOrder+1, sizeof(std::complex<double>) );
    if( NormalizedKernel == NULL ) return( NULL );

    TCoeffs = ComputeHP(FilterOrder);
    if( TCoeffs == NULL ) return( NULL );

    for( i = 0; i < FilterOrder; ++i)
    {
        NumCoeffs[2*i] = TCoeffs[i];
        NumCoeffs[2*i+1] = 0.0;
    }
    NumCoeffs[2*FilterOrder] = TCoeffs[FilterOrder];
    double cp[2];
    double Bw, Wn;
    cp[0] = 2*2.0*tan(PI * Lcutoff/ 2.0);
    cp[1] = 2*2.0*tan(PI * Ucutoff / 2.0);

    Bw = cp[1] - cp[0];
    //center frequency
    Wn = sqrt(cp[0]*cp[1]);
    Wn = 2*atan2(Wn,4);
    double kern;
    const std::complex<double> result = std::complex<double>(-1,0);

    for(int k = 0; k<11; k++)
    {
        NormalizedKernel[k] = std::exp(-sqrt(result)*Wn*Numbers[k]);
    }
    double b=0;
    double den=0;
    for(int d = 0; d<11; d++)
    {
        b+=real(NormalizedKernel[d]*NumCoeffs[d]);
        den+=real(NormalizedKernel[d]*DenC[d]);
    }
    for(int c = 0; c<11; c++)
    {
        NumCoeffs[c]=(NumCoeffs[c]*den)/b;
    }

    free(TCoeffs);
    return NumCoeffs;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-09T16:14:38.123

有一些代码可以在网上找到实现巴特沃斯过滤器的代码。如果你用源码去尝试得到匹配MATLAB结果的结果，也会出现同样的问题。基本上你从代码得到的结果没有被归一化，而且源码中bwhp.c中有[一个](https://github.com/charles-typ/Butterworth_filter_coefficients-MATLAB-in-C/blob/2fd06ecf24ae452298c3c4cc519313860f53b9d2/bwhp.c#L48)变量**sff** . 如果将其设置为 1，则问题将很容易解决。我推荐你使用这个源代码，源代码和用法可以在[这里找到](https://github.com/charles-typ/Butterworth_filter_coefficients-MATLAB-in-C)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-15T13:24:57.270

我在程序中添加了函数 ComputeNumCoeffs 的最终版本并修复了“FilterOrder”（k<11 到 k<2*FiltOrd+1）。也许它会节省某人的时间。f1=0.5Gz, f2=10Gz, fs=127Gz/2

在 MatLab 中

```
a={1.000000000000000,-3.329746259105707, 4.180522138699884,-2.365540522960743,0.514875789136976};
b={0.041065495448784, 0.000000000000000,-0.082130990897568, 0.000000000000000,0.041065495448784}; 
```

程序：

```
#include <iostream>
#include <stdio.h>
#include <vector>
#include <math.h>

#include <complex>

using namespace std;

#define N 10 //The number of images which construct a time series for each pixel
#define PI 3.1415926535897932384626433832795

double *ComputeLP(int FilterOrder)
{
    double *NumCoeffs;
    int m;
    int i;

    NumCoeffs = (double *)calloc(FilterOrder+1, sizeof(double));
    if(NumCoeffs == NULL) return(NULL);

    NumCoeffs[0] = 1;
    NumCoeffs[1] = FilterOrder;
    m = FilterOrder/2;
    for(i=2; i <= m; ++i)
    {
     NumCoeffs[i] =(double) (FilterOrder-i+1)*NumCoeffs[i-1]/i;
     NumCoeffs[FilterOrder-i]= NumCoeffs[i];
    }
    NumCoeffs[FilterOrder-1] = FilterOrder;
    NumCoeffs[FilterOrder] = 1;

    return NumCoeffs;
}

double *ComputeHP(int FilterOrder)
{
    double *NumCoeffs;
    int i;

    NumCoeffs = ComputeLP(FilterOrder);
    if(NumCoeffs == NULL) return(NULL);

    for(i = 0; i <= FilterOrder; ++i)
     if(i % 2) NumCoeffs[i] = -NumCoeffs[i];

    return NumCoeffs;
}

double *TrinomialMultiply(int FilterOrder, double *b, double *c)
{
    int i, j;
    double *RetVal;

    RetVal = (double *)calloc(4 * FilterOrder, sizeof(double));
    if(RetVal == NULL) return(NULL);

    RetVal[2] = c[0];
    RetVal[3] = c[1];
    RetVal[0] = b[0];
    RetVal[1] = b[1];

    for(i = 1; i < FilterOrder; ++i)
    {
     RetVal[2*(2*i+1)] += c[2*i] * RetVal[2*(2*i-1)] - c[2*i+1] * RetVal[2*(2*i-1)+1];
     RetVal[2*(2*i+1)+1] += c[2*i] * RetVal[2*(2*i-1)+1] + c[2*i+1] * RetVal[2*(2*i-1)];

     for(j = 2*i; j > 1; --j)
     {
      RetVal[2*j] += b[2*i] * RetVal[2*(j-1)] - b[2*i+1] * RetVal[2*(j-1)+1] +
       c[2*i] * RetVal[2*(j-2)] - c[2*i+1] * RetVal[2*(j-2)+1];
      RetVal[2*j+1] += b[2*i] * RetVal[2*(j-1)+1] + b[2*i+1] * RetVal[2*(j-1)] +
       c[2*i] * RetVal[2*(j-2)+1] + c[2*i+1] * RetVal[2*(j-2)];
     }

     RetVal[2] += b[2*i] * RetVal[0] - b[2*i+1] * RetVal[1] + c[2*i];
     RetVal[3] += b[2*i] * RetVal[1] + b[2*i+1] * RetVal[0] + c[2*i+1];
     RetVal[0] += b[2*i];
     RetVal[1] += b[2*i+1];
    }
    return RetVal;
}

double *ComputeNumCoeffs(int FilterOrder,double Lcutoff, double Ucutoff, double *DenC)
{
    double *TCoeffs;
    double *NumCoeffs;
    std::complex<double> *NormalizedKernel;
    double Numbers[11]={0,1,2,3,4,5,6,7,8,9,10};
    int i;

    NumCoeffs = (double *)calloc(2*FilterOrder+1, sizeof(double));
    if(NumCoeffs == NULL) return(NULL);

    NormalizedKernel = (std::complex<double> *)calloc(2*FilterOrder+1, sizeof(std::complex<double>));
    if(NormalizedKernel == NULL) return(NULL);

    TCoeffs = ComputeHP(FilterOrder);
    if(TCoeffs == NULL) return(NULL);

    for(i = 0; i < FilterOrder; ++i)
    {
     NumCoeffs[2*i] = TCoeffs[i];
     NumCoeffs[2*i+1] = 0.0;
    }
    NumCoeffs[2*FilterOrder] = TCoeffs[FilterOrder];
    double cp[2];
    //double Bw;
    double Wn;
    cp[0] = 2*2.0*tan(PI * Lcutoff/ 2.0);
    cp[1] = 2*2.0*tan(PI * Ucutoff/2.0);

    //Bw = cp[1] - cp[0];
    //center frequency
    Wn = sqrt(cp[0]*cp[1]);
    Wn = 2*atan2(Wn,4);
    //double kern;
    const std::complex<double> result = std::complex<double>(-1,0);

    for(int k = 0; k<2*FilterOrder+1; k++)
    {
     NormalizedKernel[k] = std::exp(-sqrt(result)*Wn*Numbers[k]);
    }
    double b=0;
    double den=0;
    for(int d = 0; d<2*FilterOrder+1; d++)
    {
     b+=real(NormalizedKernel[d]*NumCoeffs[d]);
     den+=real(NormalizedKernel[d]*DenC[d]);
    }
    for(int c = 0; c<2*FilterOrder+1; c++)
    {
     NumCoeffs[c]=(NumCoeffs[c]*den)/b;
    }

    free(TCoeffs);
    return NumCoeffs;
}

double *ComputeDenCoeffs(int FilterOrder, double Lcutoff, double Ucutoff)
{
    int k;   // loop variables
    double theta;  // PI * (Ucutoff - Lcutoff)/2.0
    double cp;  // cosine of phi
    double st;  // sine of theta
    double ct;  // cosine of theta
    double s2t;  // sine of 2*theta
    double c2t;  // cosine 0f 2*theta
    double *RCoeffs;  // z^-2 coefficients
    double *TCoeffs;  // z^-1 coefficients
    double *DenomCoeffs;  // dk coefficients
    double PoleAngle;  // pole angle
    double SinPoleAngle;  // sine of pole angle
    double CosPoleAngle;  // cosine of pole angle
    double a;   // workspace variables

    cp = cos(PI * (Ucutoff + Lcutoff)/2.0);
    theta = PI * (Ucutoff - Lcutoff)/2.0;
    st = sin(theta);
    ct = cos(theta);
    s2t = 2.0*st*ct;  // sine of 2*theta
    c2t = 2.0*ct*ct - 1.0; // cosine of 2*theta

    RCoeffs = (double *)calloc(2 * FilterOrder, sizeof(double));
    TCoeffs = (double *)calloc(2 * FilterOrder, sizeof(double));

    for(k = 0; k < FilterOrder; ++k)
    {
     PoleAngle = PI * (double)(2*k+1)/(double)(2*FilterOrder);
     SinPoleAngle = sin(PoleAngle);
     CosPoleAngle = cos(PoleAngle);
     a = 1.0 + s2t*SinPoleAngle;
     RCoeffs[2*k] = c2t/a;
     RCoeffs[2*k+1] = s2t*CosPoleAngle/a;
     TCoeffs[2*k] = -2.0*cp*(ct+st*SinPoleAngle)/a;
     TCoeffs[2*k+1] = -2.0*cp*st*CosPoleAngle/a;
    }

    DenomCoeffs = TrinomialMultiply(FilterOrder, TCoeffs, RCoeffs);
    free(TCoeffs);
    free(RCoeffs);

    DenomCoeffs[1] = DenomCoeffs[0];
    DenomCoeffs[0] = 1.0;
    for(k = 3; k <= 2*FilterOrder; ++k)
     DenomCoeffs[k] = DenomCoeffs[2*k-2];

    return DenomCoeffs;
}

void filter(int ord, double *a, double *b, int np, double *x, double *y)
{
    int i,j;
    y[0]=b[0] * x[0];
    for (i=1;i<ord+1;i++)
    {
     y[i]=0.0;
     for (j=0;j<i+1;j++)
      y[i]=y[i]+b[j]*x[i-j];
     for (j=0;j<i;j++)
      y[i]=y[i]-a[j+1]*y[i-j-1];
    }
    for (i=ord+1;i<np+1;i++)
    {
     y[i]=0.0;
     for (j=0;j<ord+1;j++)
      y[i]=y[i]+b[j]*x[i-j];
     for (j=0;j<ord;j++)
      y[i]=y[i]-a[j+1]*y[i-j-1];
    }
}

int main(int argc, char *argv[])
{
    (void)argc;
    (void)argv;
    //Frequency bands is a vector of values - Lower Frequency Band and Higher Frequency Band

    //First value is lower cutoff and second value is higher cutoff
    //f1 = 0.5Gz f2=10Gz
    //fs=127Gz
    //Kotelnikov/2=Nyquist (127/2)
    double FrequencyBands[2] = {0.5/(127.0/2.0),10.0/(127.0/2.0)};//these values are as a ratio of f/fs, where fs is sampling rate, and f is cutoff frequency
    //and therefore should lie in the range [0 1]
    //Filter Order
    int FiltOrd = 2;//5;

    //Pixel Time Series
    /*int PixelTimeSeries[N];
    int outputSeries[N];
    */
    //Create the variables for the numerator and denominator coefficients
    double *DenC = 0;
    double *NumC = 0;
    //Pass Numerator Coefficients and Denominator Coefficients arrays into function, will return the same

    printf("\n");

    //is A in matlab function and the numbers are correct
    DenC = ComputeDenCoeffs(FiltOrd, FrequencyBands[0], FrequencyBands[1]);
    for(int k = 0; k<2*FiltOrd+1; k++)
    {
     printf("DenC is: %lf\n", DenC[k]);
    }

    printf("\n");

    NumC = ComputeNumCoeffs(FiltOrd,FrequencyBands[0],FrequencyBands[1],DenC);
    for(int k = 0; k<2*FiltOrd+1; k++)
    {
     printf("NumC is: %lf\n", NumC[k]);
    }

    double y[5];
    double x[5]={1,2,3,4,5};
    filter(5, DenC, NumC, 5, x, y);
    return 1;
} 
```

# android - Android：如何创建一个接收器来监听状态栏下拉菜单的任何点击？

> ID：10373187
> 
> 赞同：0
> 
> 时间：2012-04-29T15:02:23.100
> 
> 标签：android, statusbar

我想知道如何创建一个在用户向下拖动状态栏时监听的接收器。

有办法做到这一点吗？

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:11:30.887

> 我想知道如何创建一个在用户向下拖动状态栏时监听的接收器。

没有办法做到这一点。您只能收听广播的内容，并且向下拖动状态栏不是需要广播的重要事件。

# java - 使用文件 api 读取目录：如何处理包含 20000-30000 个文件的目录？

> ID：10373196
> 
> 赞同：3
> 
> 时间：2012-04-29T15:03:49.340
> 
> 标签：java, file-io, directory, iteration

我正在编写一个简单的 java 程序，它读取目录的内容并打印出文件名和最后修改时间。

我预见的问题是，我正在阅读的 Vault 非常庞大，并且在某些情况下，单个目录中的文件可能会超过 20000。使用文件 api

```
 `file.listFiles()` 
```

反过来会创建 20000 个文件对象，我担心这可能会减慢进程，也可能会使内存膨胀。

有没有办法批处理，即告诉java一次扫描50个文件的目录，或者至少一次迭代一个文件，而不是一次将所有对象加载到内存中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T15:16:09.727

您应该通过 java.nio.file.Files.walkFileTree(...) 使用 java.nio.file.FileVisitor。它已在 Java 7 中专门针对此用例引入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T15:06:24.227

我不会担心内存，我会担心这些文件的磁盘访问时间。

文件的访问时间可以是 8 毫秒，即使对于 SSD，也可以是 100 微秒。创建 File 对象所需的时间可能不到一微秒。

您说得对，20,000 个 File 对象并非微不足道，但如果这是您的主要问题，那么您做得很好。

您可以`list()`改用它，它会稍微提高内存效率并仅在需要时创建文件。

# tomcat - 无法让 Tomcat JDBCRealm 使用 SHA2

> ID：10373204
> 
> 赞同：4
> 
> 时间：2012-04-29T15:04:57.673
> 
> 标签：tomcat, tomcat7, jdbcrealm, sha2

我在明文（开发/受控环境）中使用 Tomcat 7 / JDBCRealm 身份验证。现在我想将网络应用程序上传到我的托管环境，所以我需要消化密码。

我在 server.xml 中的领域部分添加了“digest="MD5"'，并通过用 MySQL 的 MD5() 函数消化的密码替换现有的明文密码来测试一些帐户。

这一切顺利。

当我尝试 SHA2（server.xml 中的'digest="SHA2"' 和 MySQL 的 SHA2() 函数来消化表中的密码）时，我不断地登录失败。我尝试了 MySQL 的 SHA2(pwd,224), SHA2(pwd,256), ...384, ...515，但都没有奏效。

我对 tomcat JDBCRealm /digest 属性的网络搜索不是很丰富。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:06:29.710

在 Tomcat 日志中查找告诉您 SHA-2 不是有效算法的消息。如果没有这样的消息，请提出一个 Tomcat 错误。

您需要使用以下方法之一：

*   SHA-256
*   SHA-384
*   SHA-512

显然，您需要在 MySQL 中使用相应的摘要。

# java - 一个jlist填充了一个arrayList。当一个项目被点击时，信息应该显示在一个jTextArea中。但是它做了两次

> ID：10373205
> 
> 赞同：2
> 
> 时间：2012-04-29T15:05:07.360
> 
> 标签：java, swing, user-interface

这是框架的构造函数

```
 public LibraryFrame() {
    mod1 = new javax.swing.DefaultListModel();
    books = new ArrayList<>();
    Book b1 = new Book("book1","aAuthor","aPublisher","aIsbn",5,0);
    books.add(b1);
    mod1.addElement(b1.title);
    initComponents();
} 
```

这是听众

```
 private void viewStockListValueChanged(javax.swing.event.ListSelectionEvent evt) {
           int selected = viewStockList.getSelectedIndex();
    String info = books.get(selected).title;
    viewStockArea.insert(info,0);
} 
```

当我为列表选择一个项目时，标题被插入到文本区域两次（最终是 book1book1 ）

我已经尽可能多地研究了听众，但我找不到解决方案。感谢任何帮助

编辑：感谢kentcdodds，找到了解决方案。基本上，监听器创建了两个事件。查看他的答案以获得进一步的解释。这是正常工作的完成代码

```
 private void viewStockListValueChanged(javax.swing.event.ListSelectionEvent evt) {
          if (!evt.getValueIsAdjusting()){
                    int selected = viewStockList.getSelectedIndex();
    String info = books.get(selected).title;
    viewStockArea.insert(info,0);  
          }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T15:25:30.343

这就是 JList 选择更改事件的工作方式。它激活了两个事件。请参阅此对类似问题的[答案。](https://stackoverflow.com/a/646302/971592)

# objective-c - 在 cellforrowatindexpath 中将 drawrect 放在哪里？

> ID：10373207
> 
> 赞同：1
> 
> 时间：2012-04-29T15:05:36.290
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, drawrect

这样做似乎工作得更快：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    JHomeViewCell *cell = (JHomeViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[JHomeViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                      reuseIdentifier:CellIdentifier];

        cell.cellContent.thumbnailCache = self.thumbnailCache;
    }

    Entry *entry = [self.resultsController objectAtIndexPath:indexPath];
    if (cell.cellContent.entry != entry) {
        [cell.cellContent setNeedsDisplay];
    }
} 
```

问题是当一个条目被编辑时，单元格不会改变。我可以检查单元格的所有元素，看看它们是否不同，但有更好的方法吗？每次出现单元格时调用 drawrect 都会减慢应用程序的速度，并且似乎没有必要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:08:00.050

如果你想为你的 tableview 单元做自定义绘图，你必须子类化`UITableViewCell`（因为它看起来你已经完成了`JHomeViewCell`）。

将 drawRect 放在 JHomeViewCell 的实现中

```
@implementation JHomeviewCell

- (void)drawRect:(CGRect)rect
{
    [super drawRect];
    // Insert drawing code here
}

@end 
```

此外，您不应该直接调用 drawRect 。您应该`setNeedsDisplay`改为调用，并且可能需要将 cellContent.entry 值设置为您从结果控制器中获得的条目。

```
Entry *entry = [self.resultsController objectAtIndexPath:indexPath];
if (cell.cellContent.entry != entry) {
    cell.cellContent.entry = entry;
    [cell setNeedsDisplay];
} 
```

# playframework - SQL in Play! 框架

> ID：10373215
> 
> 赞同：0
> 
> 时间：2012-04-29T15:06:40.860
> 
> 标签：playframework, hql

我有以下在 SQL 软件 (HeidiSQL) 中完美运行的 SQL

```
SELECT gl2.documentNumber, gl2.debitAmount, gl2.creditAmount, 
 gl2.account, gl2.description FROM GeneralLedger AS gl1 
LEFT JOIN GeneralLedger AS gl2 
ON gl1.documentNumber = gl2.documentNumber 
WHERE gl1.account='911' AND gl2.account <> '911'; 
```

何时将其放入 Play！控制器，我用这个：

```
 String queryPL = "SELECT gl2.documentNumber, gl2.debitAmount, gl2.creditAmount, "
            + "gl2.account, gl2.description FROM GeneralLedger AS gl1 "
            + "LEFT JOIN GeneralLedger AS gl2 "
            + "ON gl1.documentNumber = gl2.documentNumber "
            + "WHERE gl1.account='911' AND gl2.account <> '911'";
    Query query = JPA.em().createQuery(queryPL);
    List<Object[]> profitAndLoss = query.getResultList(); 
```

并收到错误：

> IllegalArgumentException 发生：org.hibernate.hql.ast.QuerySyntaxException：意外令牌：在第 1 行，第 156 列附近打开 [SELECT gl2.documentNumber，gl2.debitAmount，gl2.creditAmount，gl2.account，gl2.description FROM models.GeneralLedger AS gl1 LEFT JOIN GeneralLedger AS gl2 ON gl1.documentNumber = gl2.documentNumber WHERE gl1.account='911' AND gl2.account <> '911']

我将 HQL 修改为

```
String queryPL = "SELECT gl2.documentNumber, gl2.debitAmount, gl2.creditAmount, "
                + "gl2.account, gl2.description FROM models.GeneralLedger AS gl1 "
                + "LEFT OUTER JOIN models.GeneralLedger AS gl2 "
                + "WITH gl1.documentNumber = gl2.documentNumber "
                + "WHERE gl1.account='911' AND gl2.account <> '911'";
        Query query = JPA.em().createQuery(queryPL);
        List<Object[]> profitAndLoss = query.getResultList(); 
```

仍然收到错误：

> 发生 IllegalStateException：没有左侧的 DOT 节点！

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:37:32.527

为了能够在 HQL 中的两个实体之间进行连接，您需要在这两个实体之间建立关联。您不能像在 SQL 中那样在任何条件下连接两个不相关的实体。[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)中详细描述了 HQL 及其连接功能。

如果您确实需要这种类型的连接，请使用本机查询。

# php - CodeIgniter - 严重性：通知消息：尝试获取非对象的属性

> ID：10373218
> 
> 赞同：1
> 
> 时间：2012-04-29T15:07:24.253
> 
> 标签：php, database, codeigniter-2

我刚刚开始使用 codeigniter、PHP 并在尝试通过从 DB 获取数据来动态构建 UI 时遇到问题：

**要求：** 我需要通过从数据库中读取信息来动态创建父子列表。我有两个表 admin_menu 和 admin_menu_item。管理菜单包含父菜单选项，admin_menu_item 包含每个父菜单的详细选项。admin_menu_item 有 AD_MENU_ID 列存储父母的 id 给我层次结构。

**我的控制器：**

家庭类扩展 CI_Controller {

```
public function index()
{
    $this->load->helper('url');
    $this->load->helper('array');
$this->load->model('Menu');
$header_data['base_url'] = base_url(); 
    $data['menu'] = $this->Menu->get_admin_menu_data();

    $data['menu_item'] = array();
foreach($data['menu'] as $row){
 array_push($data['menu_item'], 
     $this->Menu->get_admin_menu_item_data($row->ad_menu_id));
}
            $this->load->view('homepage/header');
    $this->load->view('homepage/admin_menu',$data);
} 
```

}

这是代码的结构

**我的模型：**

```
class Menu extends CI_Model{

function __construct()
{
    // Call the Model constructor
    parent::__construct();
}

function get_admin_menu_data()
{
    $this->db->select('ad_menu_id,ad_menu_name');
    $query = $this->db->get('admin_menu');
    return $query->result();
}

function get_admin_menu_item_data($menu_id)
{
    $query = $this->db->query("SELECT ad_menu_item_name FROM ADMIN_MENU_ITEM WHERE AD_MENU_ID = " . $menu_id);

    if( $query->num_rows() > 0 ){
        return $query->result();
      }
} 
```

}

当我在视图中使用 $data 变量时，我得到一个空白的父行，导致一个额外的项目，其中父项没有值并且我得到以下错误

遇到 PHP 错误 严重性：通知消息：尝试获取非对象文件名的属性：homepage/admin_menu.php 行号：9

这基本上是我访问父元素的视图行

**我的观点：**

```
 echo "<ul class=\"accordion\" id=\"accordion-1\">";
        foreach ($menu as $key => $value) {
        print "<li class=\"dcjq-current-parent\">"; //add li tag
        print "<a href=\"#\">" . $value->ad_menu_name . "</a>\n";

        print "<ul>";                
        foreach($menu_item as $key_item => $value_item){
              print "<li><a href=\"#\">";
              print  $value_item->ad_menu_item_name . "</a></li>\n";
              $action_type = '';
        }//end of menu item for each
       print "</ul></li>\n";
      }//end of menu for each
        print "</ul>"; 
```

抱歉，这篇文章很长，但我真的被困在这里，无法弄清楚这有什么问题？

**更新：**

我终于能够让它工作，改变模型和视图中的代码。问题是对象内的对象导致层次结构变得过于复杂。最终的解决方案是只进行一次数据库调用并在视图中处理数据。感谢 Yan 与我合作并指导解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-24T07:27:01.733

我有同样的问题如何修复错误消息：如果我从 URL 注入“-”，则尝试获取非对象的属性。

修复编辑您的 artikel_model.php

```
function get_by_id($id){
    $query = $this->db->get_where('tbl_artikel', array('id' => $id));
    if ($query->num_rows() > 0){
    return $query->row();
    }else{
    print_r('No Found Artikel');
    error_reporting(0);
    }
} 
```

print_r('没有找到Artikel'); <-- 如果未找到 URL，则显示此消息

错误报告（0）；<-- 隐藏错误报告

./eoc

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T16:32:04.930

看来您在不推荐的视图中的 $menu 变量中有两个不同的对象。我的建议是将其中一个作为第二个参数发送到视图。

`'$data['menu']['menu_item']'`请注意您是如何在 foreach 循环的每次迭代中覆盖数据的。

在控制器中：

```
$data['menu_item'] = array();
foreach($data['menu'] as $row){
     array_push($data['menu_item'], 
         $this->Menu->get_admin_menu_item_data($row->ad_menu_id));
} 
```

在视图中：

```
foreach ($menu_item as $key => $value) {
        print "<li class=\"dcjq-current-parent\">"; //add li tag
        print "<a href=\"#\">" . $value->ad_menu_name . "</a>\n";
} 
```

编辑：解决方案是合并 SQL 查询：

```
SELECT ADMIN_MENU_ITEM 
.ad_menu_item_name FROM ADMIN_MENU_ITEM JOIN admin_menu ON ADMIN_MENU_ITEM.AD_MENU_ID = admin_menu.ad_menu_id 
```

# ejb-3.0 - 从无状态 bean 创建有状态会话 bean

> ID：10373220
> 
> 赞同：1
> 
> 时间：2012-04-29T15:07:48.823
> 
> 标签：ejb-3.0, session-bean

上下文如下：

客户端应用程序使用无状态会话 bean 来登录 EJB 服务器应用程序。如果登录成功，客户端应该获得一个有状态的会话 bean，以便对他的个人数据执行一些事务。但是，我希望登录方法返回这个有状态会话 bean 的一个新实例，这样客户端不应该能够手动调用这个会话 bean 并在没有经过身份验证的情况下执行事务。可能吗 ？

在我的无状态 bean 中，我有以下代码：

```
@Resource 
private SessionContext context;
...

public StatefulBeanRemote login(username, password) {
  if (ok) {
    StatefulBeanRemote bean = (StatefulBeanRemote) context.lookup("StatefulBeanRemote");
    return bean; 
  } 
```

查找总是失败。我不知道我做错了什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:09:24.880

您正在执行的查找与以下内容相同：

```
new InitialContext().lookup("java:comp/env/StatefulBeanRemote"); 
```

您是否定义了对 StatefulBeanRemote 的 EJB 引用？也许这就是你所需要的：

```
@EJB(name="StatefulBeanRemote", beanInterface=StatefulBeanRemote.class)
public class MyClass {
    @Resource
    private SessionContext context;
    ...
} 
```

# java - Spring“元素“tx：annotation-driven”的前缀“tx”未绑定。”

> ID：10373222
> 
> 赞同：26
> 
> 时间：2012-04-29T15:08:00.913
> 
> 标签：java, xml, spring

我在“tx:annotation-driven”行上收到了上面的错误，但是我已经在 beans 文件的顶部声明了命名空间，为什么下面的 XML 会导致这个错误？

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing 
        infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <tx:annotation-driven transaction-manager="hibernateTransactionManager"/>

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving 
        up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources 
        in the /WEB-INF/views directory -->
    <beans:bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <beans:bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <beans:property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <beans:property name="url" value="jdbc:mysql://localhost/assessme" />
        <beans:property name="username" value="assessme" />
        <beans:property name="password" value="assessme" />
    </beans:bean>

     <beans:bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <beans:property name="annotatedClasses">
        <beans:list>
            <beans:value>org.assessme.com.entity.User</beans:value>
        </beans:list>
    </beans:property>
        <beans:property name="dataSource" ref="dataSource" />
        <beans:property name="packagesToScan" value="org.assessme.com.controller.entity" />
        <beans:property name="hibernateProperties">
            <beans:props>
                <beans:prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</beans:prop>
                <beans:prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</beans:prop>
                <beans:prop key="hibernate.show_sql">true</beans:prop>
                <beans:prop key="hibernate.hbm2ddl.auto">update</beans:prop>
            </beans:props>
        </beans:property>
    </beans:bean>

    <context:component-scan base-package="org.assessme.com." />

    <beans:bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <beans:property name="mediaTypes">
            <beans:map>
                <beans:entry key="html" value="text/html" />
                <beans:entry key="json" value="application/json" />
            </beans:map>
        </beans:property>
        <beans:property name="defaultViews">
            <beans:list>
                <beans:bean
                    class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">
                    <beans:property name="prefixJson" value="true" />
                </beans:bean>
            </beans:list>
        </beans:property>
    </beans:bean>
<beans:bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <beans:property name="sessionFactory" ref="sessionFactory" />
    </beans:bean>

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-29T15:11:05.410

就像您的其他 xmlns: 定义一样，您需要一个用于 xmlns:tx

```
xmlns:tx="http://www.springframework.org/schema/tx" 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-29T15:17:44.983

您可以[在这里](http://static.springsource.org/spring/docs/2.0.x/reference/xsd-config.html)查看更多信息：

> tx 标签处理在 Spring 对事务的全面支持中配置所有这些 bean。这些标签包含在标题为第 9 章，事务管理的章节中。
> 
> ...
> 
> 为了完整起见，要使用 tx 模式中的标签，您需要在 Spring XML 配置文件的顶部有以下序言；以下片段中的加粗文本引用了正确的模式，以便您可以使用 tx 命名空间中的标签。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

   <!-- <bean> definitions goes here -->

</beans> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T13:59:11.790

您必须将注释引入`tx`您的项目，必须安装它们，不要使用`xmlns`，它不能正常工作，我看到您使用注释进行开发，它的良好实践并使用它，

[http://www.springframework.org/schema/tx](http://www.springframework.org/schema/tx)

[http://www.springframework.org/schema/tx/spring-tx.xsd](http://www.springframework.org/schema/tx/spring-tx.xsd)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-14T16:32:08.413

对于前一个解决方案无济于事，尝试将其放在顶部确保您不会忘记任何**xsi:schemaLocation**。

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc.xsd
    http://www.springframework.org/schema/tx 
    http://www.springframework.org/schema/tx/spring-tx.xsd"></beans> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-02T14:58:58.787

你可以使用这些：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:context="http://www.springframework.org/schema/context"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc.xsd
    http://www.springframework.org/schema/tx 
    http://www.springframework.org/schema/tx/spring-tx.xsd"> 
```

# java - google距离矩阵api奇怪

> ID：10373227
> 
> 赞同：2
> 
> 时间：2012-04-29T15:08:49.517
> 
> 标签：java, google-maps, google-maps-api-3, distance

我在这里遇到了一个奇怪的问题，

当我从 Web 浏览器或 java 命令行在 url 下面运行时

[http://maps.googleapis.com/maps/api/distancematrix/json?origins=416%2063,Sweden&destinations=424%2069,Stor%C3%A5s%20Industrigatan%2020,Angered,G%C3%B6teborg&sensor=false](http://maps.googleapis.com/maps/api/distancematrix/json?origins=416%2063,Sweden&destinations=424%2069,Stor%C3%A5s%20Industrigatan%2020,Angered,G%C3%B6teborg&sensor=false)

我得到以下结果。

```
{
  "destination_addresses" : [ "Storås Industrigata 20, 424 69
Angered, Sweden" ],
  "origin_addresses" : [ "Gothenburg, Sweden" ],
  "rows" : [
     {
        "elements" : [
           {
              "distance" : {
                 "text" : "10.4 km",
                 "value" : 10388
              },
              "duration" : {
                 "text" : "15 mins",
                 "value" : 924
              },
              "status" : "OK"
           }
       ]
     }
  ],
  "status" : "OK"
} 
```

但是当我从 glassfish 服务器运行相同的 url 时，我的意思是从表单提交发送一个 http 请求，我得到以下奇怪的响应

```
{ "destination_addresses" : [ "" ],
  "origin_addresses" : [ "Gothenburg, Sweden" ],
  "rows" : [
     {
        "elements" : [
           {
              "status" : "NOT_FOUND"
           }
        ]
     }
  ],
  "status" : "OK"
} 
```

请不要在这种情况下destination_addresses 为空，状态为NOT_FOUND。

我用来获得响应的 Java 代码是

```
private String getResponse(String URL) throws Exception {
        InputStream stream = new URL(URL).openStream();
        byte[] array = new byte[stream.available()];
        stream.read(array);
        return new String(array);
} 
```

请指导我解决这个问题，

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-06T05:10:21.810

除非 google 不允许您的软件连接，否则请使用 https 。

并获得一个 api 密钥。

阅读： [https ://developers.google.com/maps/documentation/distance-matrix/start](https://developers.google.com/maps/documentation/distance-matrix/start)

```
https://maps.googleapis.com/maps/api/distancematrix/json?origins=416%2063,Sweden&destinations=424%2069,Stor%C3%A5s%20Industrigatan%2020,Angered,G%C3%B6teborg&sensor=false&key=YOUR_API_KEY 
```

请务必将 YOUR_API_KEY 替换为您的实际 API 密钥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-09T11:45:46.823

在 Java 中使用距离矩阵 API 时，我遇到了类似的问题。在我的请求中设置语言似乎可以使它工作：

```
 DistanceMatrixElement distanceMatrixElement;
    DistanceMatrix matrix;

    try
    {
        matrix = distanceMatrixApiRequest
                .origins(...)
                .destinations(...)
                .language("en")
                .await();
    } 
```

# c++ - 以编程方式在excel中制作图表

> ID：10373228
> 
> 赞同：3
> 
> 时间：2012-04-29T15:08:53.947
> 
> 标签：c++, excel, xll

我在 Excel 的 C API 的 XLW 包装器的帮助下制作了一个 XLL。我希望能够使用存储在 XLL 中某些对象中的数据以编程方式在 Excel 中制作图表。这可能吗？如果可以，最好的方法是什么？我相信一种方法是通过 COM，但如果可能的话，我想避免它。目前在 Windows 7 和 VS2010 上使用 Excel 2007。

编辑：一般来说，Excel 公开了哪些支持程序化图表的 API？谁能指点我一些文件？

Edit2：由于我没有得到任何点击，我将尝试提供更多关于我正在尝试做的事情的细节。我想从 Excel 中调用一个公式，例如 =PlotCurve("CurvreHandle") 并且我想获取一个存储在内存中并由 XLL（非托管代码）拥有的曲线对象，从中获取一些数据并将其显示在某处的图表中在制作 PlotCurve 的工作表上。到目前为止，我已经能够看到，XLW 包装的 C API 不支持问题的第二部分，所以我需要去任何一个 COM（我不知道如何与已经运行的 C 混合） api）或一些我也不知道该怎么做的.net互操作。如果有人做过这样的事情或知道安全稳定的方法来做到这一点，我很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:05:37.867

You can use [http://xll.codeplex.com](http://xll.codeplex.com) and Excel4/Excel12\. The function ExcelX can be used to handle the memory management. The command to use is xlcChartWizard.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:39:41.847

要以编程方式在 Excel 中创建、修改和保存图表，您可以使用[`Microsoft.Office.Interop.Excel`](http://msdn.microsoft.com/en-us/library/ms262200%28v=office.11%29.aspx)命名空间中的 C++ 类。

# mysql - 按 MONTH、YEAR 嵌套 MYSQL 组

> ID：10373234
> 
> 赞同：0
> 
> 时间：2012-04-29T15:10:26.017
> 
> 标签：mysql, nested

嵌套查询的菜鸟问题。这个 SQL 查询有一点问题。请帮忙。尝试对同一个表中的 2 个字段进行计数，并按月、年分组。查询在新字段和续订字段中返回相同的结果。

```
SELECT MONTH(p.created_at) as Month, YEAR(p.created_at) as Year,
  (SELECT COUNT(p.id) FROM payments p 
INNER JOIN carts c ON c.payment_id = p.id
INNER JOIN cart_items ci on ci.cart_id = c.id 
WHERE ci.item_id = 8) as 'New',
  (SELECT COUNT(p.id) FROM payments p 
INNER JOIN carts c ON c.payment_id = p.id
INNER JOIN cart_items ci on ci.cart_id = c.id 
WHERE ci.item_id = 13) as 'Renewal',     
FROM payments p   
GROUP BY month, year 
```

谢谢您的帮助！

查询示例

```
Month Year   New    Renewal
1     2010   1169   556
1     2011   1169   556
1     2012   1169   556
2     2010   1169   556
2     2011   1169   556 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:37:23.037

通过查看您的查询，我猜您有一个物品表，其中包含各种可能的可购买物品。其中 item_id = 8 对应于“新”产品，item_id = 13 对应于“续订”。

项目与名为 cart_items 的关系表中的预期销售事件相关联。

但并非所有的购物车都已售出，但我们只想查看实际售出的购物车，因此我们从付款表开始。

通过填充 payment_id 在购物车表中记录是否为预期销售付款。

付款代表已售出的购物车，我们从付款中获取payments.id，我们将payment_id 带到carts 表并获取cart_id，我们将其带到cart_items 表并获取已售出的实际商品，我们想要如果 item_id 为 8 ('New') / 13 ('Renewal')，则单独计算

我们尝试运行的查询是：

```
SELECT MONTH(p.created_at) as Month,
       YEAR(p.create_at) as Year,
       sum(if(ci.item_id = 8, 1, 0)) as New,
       sum(if(ci.item_id = 13, 1, 0)) as Renewal
  FROM payments p,
       INNER JOIN carts c on c.payment_id = p.id
       INNER JOIN cart_items ci on ci.cart_id = c.id
 WHERE ci.item_id in (8,13)
 GROUP BY month, year; 
```

我们得到了整个数据集，我们根据我们想要分组的字段进行分组，我们通过计算我们看到 item_id = 8 / item_id = 13 的次数来总计它。

我可能误解了问题域，所以如果您需要澄清或者我有什么问题，请告诉我。

# grails - 使用 grails 抓取 3 个网站

> ID：10373236
> 
> 赞同：-1
> 
> 时间：2012-04-29T15:10:36.223
> 
> 标签：grails

嗨，我正在尝试使用 grails 构建一个简单的应用程序，其中我需要爬取 3 个网站以从书本上获取价格数据。在获得这些详细信息后，当我选择购买时，它必须重定向到所选站点。示例参考链接[http://www.mydiscountbay.com/](http://www.mydiscountbay.com/)我被困住了，我不知道如何在 grails 中实现一个简单的爬虫。请指导我提供有关硬件的示例代码或教程来实现它

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:46:11.333

使用诸如 URL#getText() 之类的东西不会让您对具有重定向、cookie 等的网络走得太远。

对于任何涉及的内容，请使用 commons HttpClient 或 groovy HttpBuilder。

[http://hc.apache.org/httpcomponents-client-ga/index.html](http://hc.apache.org/httpcomponents-client-ga/index.html)

[http://groovy.codehaus.org/HTTP+Builder](http://groovy.codehaus.org/HTTP+Builder)

要解析响应并提取内容，请使用 XmlSlurper，例如：[Using XmlSlurper: How to select sub-elements while iterate over a GPathResult](https://stackoverflow.com/questions/1675542/using-xmlslurper-how-to-select-sub-elements-while-iterating-over-a-gpathresult)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:56:04.237

实现爬虫与 grails 无关，有一些开源的 java 爬虫，您可以根据需要使用或自定义。前端部分就像一个普通的 grails web 应用程序。

# windows - 如何强制事件跟踪会话更频繁地刷新数据？

> ID：10373238
> 
> 赞同：3
> 
> 时间：2012-04-29T15:11:07.153
> 
> 标签：windows, wmi, etw

我有一个使用 WPP 写入大量跟踪日志的驱动程序。

我已配置[AutoLogger](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363687%28v=vs.85%29.aspx)注册表项以将事件写入 .etl 文件。

日志记录会话成功启动并创建了文件，但似乎数据每隔一段时间就会刷新到磁盘一次。是否可以使其更频繁甚至实时刷新数据？

我尝试使用“Flush Timer”，但基于 MSDN 中所写的内容以及它所产生的效果，这不是我想要的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-07T18:30:05.620

您可以使用控制代码强制使用[ControlTrace刷新缓冲区。](https://msdn.microsoft.com/en-us/library/windows/desktop/aa363696(v=vs.85).aspx)`EVENT_TRACE_CONTROL_FLUSH`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:18:36.303

这似乎是文档中的错误，在您配置 FlushTimer 的所有其他地方，您将得到您想要的：缓冲区中的事件刷新到您的会话（无论是实时的还是文件的）。我认为您在尝试时以某种方式错过了测试中的某些内容。

# c++ - 计时器、线程和编译器不当行为

> ID：10373239
> 
> 赞同：2
> 
> 时间：2012-04-29T15:11:08.267
> 
> 标签：c++, windows, multithreading, timer, performancecounter

我遇到了问题，找不到任何答案，因为我什至不知道要搜索什么。我已经使用 QueryPerformanceCounter 完成了一个计时器类，从我的应用程序中，我启动了第二个线程对象，它有自己的实例化计时器，我只有一个无限循环，从计时器获取增量时间并使用它来输出每个循环迭代的次数第二。

我注意到它给了我奇怪的值，所以我开始打印 delta time 并发现它有时会变为 0，所以我进入了返回 delta time 的方法并进行了一些测试。这是我的 deltaTime() 方法：

```
 double MyTimer2::deltaTime()
    {
        LARGE_INTEGER timenow;
        QueryPerformanceCounter(&timenow);
        //std::cout << "timenow=" << (double)timenow.QuadPart << "   currentticks=" << (double)m_currentTicks.QuadPart << std::endl;

        double m_deltaTime = (double)(timenow.QuadPart - m_currentTicks.QuadPart) /* 1000.0*/ / (double)m_frequency.QuadPart;

        m_currentTicks = timenow;

        if(m_deltaTime < 0.000001)
            return 0.0;

        return m_deltaTime;
    } 
```

所以，我在“return 0.0;”上放了一个断点；发生的情况是它大部分时间都到达那里，这是不正确的。但是，如果我取消注释打印代码并运行，我将永远不会在断点处停止。所以理论上，我的打印代码使它正常工作，而如果我删除它，事情就会停止正常工作！这怎么可能，为什么会发生，我该如何解决？我试过 _ReadWriteBarrier() 失败。

提前致谢！

编辑：我需要一个用于物理模拟的高分辨率计时器！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:36:42.283

几代处理器前，`QueryPerformanceCounter()`会读取 CPU 的周期计数器（例如`rdtsc`）。使用这种方法，连续读取的滴答数*永远不会*为零。分辨率等于 CPU 时钟频率，例如 3 GHz。

现代处理器有两个特性使得周期计数器无法用于计时。首先，您有多个内核，每个内核都有自己的周期计数器。线程可以在内核之间迁移，如果您从两个不同的内核读取循环计数器，则差异与经过的时间无关。它甚至可能是负面的。其次，您有基于负载的动态时钟（降低频率以节省电力和超频以提高性能）。英特尔将这些分别称为“SpeedStep”和“Turbo Boost”。当循环率不固定时，就无法从滴答声转换为时间。

因此，`QueryPerformanceCounter`现在使用一种称为高性能事件计数器 (HPET) 的专用硬件，其分辨率为几兆赫兹。重要的是，无论您拥有多少核心，都只有一个，而且它不会动态改变速度。但是，由于分辨率较低，现在可以在滴答之间读取两次，在这种情况下，您将得到报告为零的经过时间。

在实践中，这不是问题。如果您需要比 HPET 提供的更精确的计时，那么通用计算机不适合您。纳秒范围内的时序会受到中断的严重影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T15:57:32.360

首先，您的计时器是错误的：它会大量消耗您的 CPU。在单核机器上，它会减慢所有系统的速度。如果您想创建一个计时器并以 Windows 为目标，您可以使用[计时器函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632592%28v=vs.85%29.aspx)。

然后，您的*函数**返回的每个非负值`deltaTime()`*都是有效的。虽然您不是在实时操作系统中托管，但每个操作都可能花费任意时间。一次迭代可能需要数十个处理器周期或数十年。没有人保证。

第三，关于实验结果。似乎如果上下文将在两个连续的时间测量之间切换一次，你会得到大约 的值`0.016s`，如果不是，你会得到`0.000001s`低于 的值`0s`。

如前所述，打印到控制台是相对繁重的操作，当您启用它时，您实际上总是会切换上下文。

**编辑**

虽然`QueryPerformanceCounter`似乎提供了很好的分辨率，但它会让你陷入困境。*除非您在实时*操作系统中工作，否则您永远不会获得*真正*的高分辨率计时器。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T16:02:02.720

这个区块的目的可能是什么？

```
if(m_deltaTime < 0.000001)
    return 0.0; 
```

它没有任何价值，它只是与结果挂钩，告诉你时间为零，而实际上并非如此。*

# c++ - C++：按位与

> ID：10373240
> 
> 赞同：1
> 
> 时间：2012-04-29T15:11:16.247
> 
> 标签：c++, byte, bit-manipulation, bit

我试图了解如何使用按位与来提取单个字节的值。

我拥有的是一个 4 字节数组，并将最后 2 个字节转换为一个 2 字节值。然后我试图从那个 2 字节值中提取原始的单字节值。请参阅附件以获取我的代码和值的屏幕截图。

我遇到的问题是我无法获得 2 字节值中最后一个字节的值。

我将如何使用 Bitwise AND 执行此操作？

![按位与](../Images/721248b5afd9eed2280a80a69acfe6d3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T15:21:14.700

> 我遇到的问题是我无法获得 2 字节值中最后一个字节的值。

您的 2byte 整数由值 3 和 4 组成（因为您的指针指向`a[1]`）。正如您在测试中已经看到的那样，您可以`3`通过应用 mask来获得`0xFF`。现在，要获得`4`您需要删除低位*并*移动值。在您的示例中，通过使用掩码`0xFF00`，您可以有效地`3`从 16 位数字中删除 ，但是您将`4`2 字节数字的高字节保留为值`1024 == 2^10`- 第 11 位设置，这是第二个字节中的第三位（从最小的代表开始计算）

您可以将该结果向右移动 8 位以获得您的`4`，否则您可以完全忽略掩码，因为只需向右移动最低位就会*消失*：

```
4 == ( x>>8 ) 
```

更有趣的按位测试结果可以通过使用单个数字来获得：

```
int x = 7;              // or char, for what matters:
(x & 0x1) == 1;
(x & (0x1<<1) ) == 2;   // (x & 0x2)
(x & ~(0x2)) == 5; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T15:19:34.917

您需要添加一些位移来将掩码值从高字节转换为低字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T15:19:42.297

> 我遇到的问题是我无法获得 2 字节值中最后一个字节的值。

不确定该“监视”表来自何处或是否涉及更多代码，但在我看来结果是正确的。请记住，其中一个是高字节，因此值移动 << 8 位。在小端机器上，高字节将是第二个。

# php - 将网站移动到另一个本地主机尝试 - 没有错误，但没有显示数据

> ID：10373241
> 
> 赞同：2
> 
> 时间：2012-04-29T15:11:22.050
> 
> 标签：php, mysql, xampp

这是我第一次将本地开发站点转移到另一个本地站点进行测试，并且无法访问新站点中的数据库。两台计算机都在 Mac 上运行 XAMPP。测试站点已成功安装XAMPP，并将数据库文件放在Applications/XAMPP/xamppfiles/var/mysql下。测试用户能够启动 Apache 和 MySQL，并在 PHPMyAdmin 中查看数据库文件。测试用户还能够访问本地网站而没有错误消息。

编辑：通过在我端复制/压缩文件并在测试端解压缩/删除复制的文件来复制数据库文件。

但是，本地网站似乎没有看到该数据库。应该返回数据的页面仅显示默认的“对不起，我们已售罄”消息或显示“找不到图像”图形，管理员无法登录。

索引页面调用

```
include_once "common/base.php"; 
```

其中包括

```
<?php
// Set the error reporting level
error_reporting(E_ALL);
ini_set("display_errors", 1);

// Start a PHP session   
session_start();
$_SESSION['docroot'] = $_SERVER['DOCUMENT_ROOT'] . '/mysite/';

// Include site constants
include_once $_SERVER['DOCUMENT_ROOT'] . "/inc/constants.inc.php";

    if ( !isset($_SESSION['token']) )
{
    $_SESSION['token'] = md5(uniqid(rand(), TRUE));
    $_SESSION['token_time'] = time();
}

// Create a database object
try {
    $dsn = "mysql:host=".DB_HOST.";dbname=".DB_NAME;
    $_db = new PDO($dsn, DB_USER, DB_PASS);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
    exit;
}
?> 
```

如果存在连接问题，我希望看到返回的错误消息，我可以通过将 inc/constants.inc.php 中的常量更改为虚假值来验证。所以我不相信有连接问题。

如果你在我的位置，你会检查什么？

编辑：我刚刚发现了 PHPMyAdmin 中的导出功能。我将尝试删除复制过来的 db 文件，从 PHPMyAdmin 导出文件，然后将它们导入测试机器。

编辑：我只是让测试机做了一个简单的

```
$sql = "SELECT FirstName From users";

    $stmt = $_db->prepare($sql);
    $stmt->execute();
    $aaData = array();

    while($row = $stmt->fetch(PDO::FETCH_NUM)){
    $aaData[] = $row;
    }

    $stmt->closeCursor();

print_r($aaData); 
```

在索引页面上，它显示了正确的用户列表。所以连接很好，其他地方有问题。你们会说我仍然需要删除复制的数据库并使用“正确”的方式（导出/导入），还是浪费时间？

最后编辑：我确实使用 Export/Import 重做了这个动作，现在一切正常。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:18:49.907

首先，在 mysql 数据目录中压缩文件并移动它们并不是最好的方法。如果您在移动它们之前已经完全刷新/关闭了 mysql 服务器，它可以工作。您最好使用 mysqldump 或类似工具一次移动整个数据库。

在我看来，您移动了应用程序的数据库文件，但您可能忘记将用户/密码凭据添加到新的 MySQL 设置中。您提到您使用 phpMyAdmin，因此当您在另一台机器上登录时，单击“权限”选项卡并确保它与您的开发机器上的“权限”选项卡匹配。

如果不是这样，则完全有可能通过压缩和复制文件，部分/所有表已损坏。尝试使用 phpMyAdmin 的导出和导入功能来移动数据库。如果数据非常大，请告诉我，我可以给你一些命令行条目来运行。

希望这可以帮助。

# c++ - QT Creator - QStackedWidget 页面程序

> ID：10373245
> 
> 赞同：1
> 
> 时间：2012-04-29T15:11:52.760
> 
> 标签：c++, qt, widget

我在 Qt Creator 中启动了新项目（Qt Widget Project > Qt Gui Application），但无法使堆叠的小部件正常工作。

我不知道如何更改我使用添加的堆叠小部件中的页面`ui`。程序对象结构如下所示：

```
MainWindow(QMainWindow)
 > centralWidget(QCentralWidget)
  > mainStackedWidget(QStackedWidget) 
```

并且`mainStackedWidget`有page1，page2，page3。

我尝试了几件事，但我失败了。

基本上我所有的尝试都是以某种方式使用`mainStackedWidget`in ，`main.cpp`但我没有设法弄清楚如何使用对象，created in `ui`， in `main.cpp`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T15:48:39.653

你想要的功能是`QStackedWidget::setCurrentIndex()`or `QStackedWidget::setCurrentWidget()`。

如果您没有使用 Qt Designer，只需使用：

```
mainStackedWidget->setCurrentIndex(index); 
```

如果您确实使用了 Qt Designer，您可能会使用：

```
ui->mainStackedWidget->setCurrentIndex(index); 
```

# python - 如何将 Python 字典写入 csv 文件？

> ID：10373247
> 
> 赞同：150
> 
> 时间：2012-04-29T15:12:21.257
> 
> 标签：python, dictionary

我有我认为应该是一个我似乎无法解决的非常简单的任务。

如何将 Python 字典写入 csv 文件？我想要的只是将字典键写入文件的第一行，将键值写入第二行。

我最接近的是以下（我从别人的帖子中得到的）：

```
f = open('mycsvfile.csv','wb')
w = csv.DictWriter(f,my_dict.keys())
w.writerows(my_dict)
f.close() 
```

问题是，上面的代码似乎只是将键写入第一行，仅此而已。我没有将值写入第二行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2012-04-29T15:15:48.150

您正在使用`DictWriter.writerows()`which 需要字典列表，而不是字典。你`DictWriter.writerow()`想写一行。

`DictWriter.writeheader()`如果您想要 csv 文件的标题，您也将需要使用。

您可能还想查看打开[文件](http://docs.python.org/whatsnew/2.5.html#pep-343-the-with-statement)[的`with`声明](http://docs.python.org/reference/compound_stmts.html#the-with-statement)。它不仅更具pythonic和可读性，而且可以为您处理关闭，即使发生异常也是如此。

进行这些更改的示例：

```
import csv

my_dict = {"test": 1, "testing": 2}

with open('mycsvfile.csv', 'w') as f:  # You will need 'wb' mode in Python 2.x
    w = csv.DictWriter(f, my_dict.keys())
    w.writeheader()
    w.writerow(my_dict) 
```

产生：

```
test,testing
1,2 
```

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2012-04-29T15:48:58.337

您的代码*非常*接近工作。

尝试使用常规*csv.writer*而不是*DictWriter*。后者主要用于编写字典列表。

这是一些将每个键/值对写入单独行的代码：

```
import csv

somedict = dict(raymond='red', rachel='blue', matthew='green')
with open('mycsvfile.csv','wb') as f:
    w = csv.writer(f)
    w.writerows(somedict.items()) 
```

相反，如果您想要一行中的所有键和下一行中的所有值，那也很容易：

```
with open('mycsvfile.csv','wb') as f:
    w = csv.writer(f)
    w.writerow(somedict.keys())
    w.writerow(somedict.values()) 
```

**专业提示**：在开发这样的代码时，将编写器设置为，`w = csv.writer(sys.stderr)`以便您可以更轻松地查看正在生成的内容。当逻辑完善后，切换回`w = csv.writer(f)`.

# c# - 带参数的照片上传到 PHP 页面

> ID：10373250
> 
> 赞同：5
> 
> 时间：2012-04-29T15:13:05.343
> 
> 标签：c#, .net, windows-phone-7, file-upload

我需要通过 .php 文件将文件上传到服务器，并且我得到了以下信息：

> 使用以下参数调用：/uploadFiles.php：
> 
> *   $_POST['user_id']
> *   $_FILES['图像']

所以，我的问题是“使用参数 $_GET['user_id'] 和 $_FILES['image'] 调用 php”是什么意思，以及如何成功调用 php。

为了其他需要，我已经通过“POST”方法成功调用了服务器，如下所示：

```
var client = WebClient();
client.UploadStringCompleted += new UploadStringCompletedEventHandler(client_UploadStringCompleted);
client.Headers["Content-Type"] = "application/x-www-form-urlencoded";
client.Encoding = Encoding.UTF8;

string toSend = "http://example.com/submit.php?userid=10";
client.UploadStringAsync(new Uri(toSend), "POST", ""); 
```

当然，我在发布之前做了很多研究，从这里的主题尝试了很多解决方案： [https ://stackoverflow.com/search?q=wp7+photo+upload](https://stackoverflow.com/search?q=wp7+photo+upload)

预先感谢您的帮助。

**更新：**

我发现我需要的只是模拟这个简单的 HTML UPLOAD 表单：

```
<form method='POST' enctype='multipart/form-data' action='http:/myserver.com/upload.php'>
File to upload <input type=file name=image><br>
user_id <input type=text name=user_id><br>
<br>
<input type=submit value=Press> to upload the file!
</form> 
```

当我在网络浏览器中运行它时，我从upload.php 得到了很好的响应，所以我只需要在WP7 中模拟它的方法，我尝试了一切，我很绝望。

我像这样使用[myToolkit ，但与使用 webclient、restsharp、hammock 时的响应相同：](http://mytoolkit.codeplex.com/wikipage?title=Http)

```
var request = new HttpPostRequest("http://myserver.com/upload.php");
request.Data.Add("user_id", "389096"); // POST data
request.Files.Add(new HttpPostFile("image", "", e.ChosenPhoto, true)); // POST file
Http.Post(request, RequestFinished); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:40:14.910

我想到了。我发送了不正确的 FlyType 参数。我发送的是 image/jpg、image/jpeg、image/png，但是在模拟 HTML 上传表单时，我们必须发送“image/pjpeg”。

我在这里详细解释了它（我使用了 RestSharp）： [http ://nediml.wordpress.com/2012/05/10/uploading-files-to-remote-server-with-multiple-parameters/#more-234](http://nediml.wordpress.com/2012/05/10/uploading-files-to-remote-server-with-multiple-parameters/#more-234)

# jquery-mobile - 如何通过使用 knockoutjs 绑定的 ajax 调用从 JQM 中加载的复选框列表中读取选定的值？

> ID：10373251
> 
> 赞同：2
> 
> 时间：2012-04-29T15:13:29.867
> 
> 标签：jquery-mobile, knockout.js

我正在使用 JQuery Mobile 和 KnockoutJS 开发一个移动应用程序。能够从 AJAX 调用成功加载复选框列表。复选框列表已使用淘汰赛 js foreach 绑定进行绑定。但是我想不出一种方法来从 lsit 中获取选定的复选框值。任何想法都将是非常可观的。

这是我的 HTML

```
 <p>
    Select Items(s):
    <div id="itemList">
    <ul id="itemList" data-role="listview"  data-inset="true" >
        <fieldset id="myList" data-role="controlgroup" data-bind="foreach : Items">
            <li id="chkRoles" data-role="fieldcontain" data-filter="true">
               <input data-theme="c" type="checkbox" data-role="controlgroup" data-bind="attr: { 'data-id': Id, name: 'checkbox-' + Id, id: 'checkbox-' + Id  }" />
                <label data-theme="c" data-bind="text: ItemName, attr: { for: 'checkbox-' + Id }"></label>
            </li>
     </fieldset>
     </ul>
    </div>
</p> 
```

我的视图模型 JS

```
 ItemViewModel = function(){
var self = this;
self.Items = ko.observableArray([])
}

var viewModel = new ItemViewModel();

//doing an AJAX call to load ObservableArray
viewModel.Items(data);
$("#itemList").listview("refresh").find('input').checkboxradio();

ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:15:50.120

You can have another observableArray to hold the checked values only. Then, if you give your checkboxes a 'value' attribute, and use the 'checked' binding on them, specifying the observableArray, the array should automatically be updated only with the values of the checked inputs. (This is all [explained here](http://knockoutjs.com/documentation/checked-binding.html))

I put your code into a jsfiddle and made those changes here: [http://jsfiddle.net/antishok/ektUp/](http://jsfiddle.net/antishok/ektUp/)

# android - Android ListView 显示带有推文的个人资料头像时速度慢

> ID：10373252
> 
> 赞同：3
> 
> 时间：2012-04-29T15:13:31.753
> 
> 标签：android, listview, android-listview

目前，我正在使用 Handler 将 15 条推文拉入 ArrayList，然后将完成的 ArrayList 传递给 updateUI 方法。到目前为止它工作得很好，但是当我的 ListView 被填充时，滚动体验非常不稳定。当我从 TwitterAdapter 中删除图像引用时，ListView 具有快速/流畅的用户体验。我怀疑我的适配器在滚动时试图重新下载每个图形，但无法让调试器搭上该方法来证明这一点。

以下是 Activity 中的关键代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setTheme(R.style.Theme_BambooZen);
        this.setContentView(R.layout.twitter_layout);

        myListView = (ListView) findViewById(R.id.TwitterListView);         

        /*
         * Remove any existing callbacks to the handler before adding the new handler, 
         * to make absolutely sure we don't get more callback events than we want.
         */
        mHandler.removeCallbacks(mUpdateAdapterTask);
        mHandler.postDelayed(mUpdateAdapterTask, 1000);  //Fire the Handler once, the handler will manage self-calls        

    }   

    private Runnable mUpdateAdapterTask = new Runnable() {
           public void run() {

               try{ 

                 //Get Twitter Tweets on separate thread (Requires Network)                 
                 ArrayList<Tweet> tweets = getTweets("Formula1", 1);                
                 updateUI(tweets);

                 //Refresh every 45 seconds = 45000
                 mHandler.postDelayed(this, 45000); 

               }
               catch (Exception e)
               {
                   e.toString();
               }
           }
    };

    /*
     *  Rebuilds the Tweets on UIThread
     */
    public void updateUI(ArrayList<Tweet> tweets){
        adapter = new TwitterAdapter(this, R.layout.twitter_listitem, tweets);
        myListView.setAdapter(adapter);
    } 
```

物品适配器：

```
public class TwitterItemAdapter extends ArrayAdapter<Tweet> {

    public TwitterItemAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
        // TODO Auto-generated constructor stub
    }

    public static Bitmap getBitmap(String bitmapUrl) {
        try {
            URL url = new URL(bitmapUrl);
            return BitmapFactory.decodeStream(url.openConnection() .getInputStream()); 
        }
        catch(Exception ex) {return null;}
    }
} 
```

Twitter 适配器：

```
public class TwitterAdapter extends ArrayAdapter<Tweet>{

    private ArrayList<Tweet> tweets;

    public TwitterAdapter(Context context, int textViewResourceId, ArrayList<Tweet> tweets) {
        super(context, textViewResourceId, tweets);
        this.tweets = tweets;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.twitter_listitem, null);
        }

        Tweet tweet = tweets.get(position);
        if (tweet != null) {
            TextView username = (TextView) v.findViewById(R.id.username);
            TextView message = (TextView) v.findViewById(R.id.message);
            ImageView image = (ImageView) v.findViewById(R.id.avatar);

            if (username != null) {
                username.setText(tweet.username);
            }

            if(message != null) {
                message.setText(tweet.message);
            }

            if(image != null) {
                image.setImageBitmap(TwitterItemAdapter.getBitmap(tweet.image_url));                
            }
        }
        return v;
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:19:06.960

> 我怀疑我的适配器在滚动时试图重新下载每个图形

是的。

`getView()`of`TwitterAdapter`在主应用程序线程上调用。在那里，您正在调用`getBitmap()`（在一个完全没有意义的`TwitterItemAdapter`课程上），它正在从 Internet 下载图像。

可能有两打可用的背景图像加载器实现，具有不同程度的复杂性，从[SDK 示例](http://developer.android.com/resources/samples/XmlAdapters/src/com/example/android/xmladapters/ImageDownloader.html)到[博客文章](http://blog.georgenguyen.info/index.php/2012/use-asynctask-to-apply-lazy-loading-images-for-your-android-application/)再到[整个应用程序框架](http://code.google.com/p/android-query/)。

# java - Java Tile Game - 碰撞检测

> ID：10373254
> 
> 赞同：5
> 
> 时间：2012-04-29T15:13:41.490
> 
> 标签：java, collision-detection, tile

我正在使用图块制作 Java 游戏。我遇到了碰撞元素的问题。我正在为地图上的每个图块定义矩形，并为玩家定义另一个矩形。我遇到的麻烦是知道玩家在击中矩形时来自哪一侧，然后将玩家推向玩家来自的方向。我已经制作了一个方法来检查字符在矩形内有多少，因此它可以知道将其推出多少，但我不知道如何判断字符来自哪一侧。

这是我当前的碰撞方法 - 注意 rect1 是角色， rect2 是瓷砖

```
public void collision(Rectangle rect1, Rectangle rect2) {
    float xAdd;
    float xAdd2;
    float yAdd;
    float yAdd2;

    boolean hitRight = false;
    boolean hitLeft = false;
    boolean hitTop = false;
    boolean hitBot = false;

    Vector2f rect1Origin = new Vector2f(rect1.x, rect1.y);
    Vector2f rect2Origin = new Vector2f(rect2.x, rect2.y);
    Vector2f rect1Mid = new Vector2f((rect1.x + rect1.width) / 2,(rect1.y + rect1.height) / 2);
    Vector2f rect2Mid = new Vector2f((rect2.x + rect2.width) / 2,(rect2.y + rect2.height) / 2);

    Vector2f rect1A = new Vector2f(rect1Origin.x + rect1.width, rect1.y);
    Vector2f rect1B = new Vector2f(rect1Origin.x, rect1Origin.y+ rect1.height);
    Vector2f rect1C = new Vector2f(rect1Origin.x + rect1.width,rect1Origin.y + rect1.height);

    Vector2f rect2A = new Vector2f(rect2Origin.x + rect2.width, rect2.y);
    Vector2f rect2B = new Vector2f(rect2Origin.x, rect2Origin.y
            + rect2.height);
    Vector2f rect2C = new Vector2f(rect2Origin.x + rect2.width,
            rect2Origin.y + rect2.height);

    xAdd = rect2C.x - rect1B.x;
    xAdd2 = rect1C.x - rect2B.x;

    yAdd = rect2A.y - rect1B.y;
    yAdd2 = rect2C.y - rect1A.y;

    if (rect1Mid.y < rect2Mid.y) {
        if (rect1.intersects(rect2)) {
            y_pos += yAdd;
        }
    }
    if (rect1Mid.y > rect2Mid.y) {
        if (rect1.intersects(rect2)) {
            System.out.println(yAdd2);
            y_pos += yAdd2;
        }

    }
    if(rect1Mid.x > rect2Mid.x){
        if(rect1.intersects(rect2)){
            hitRight = true; x_pos += xAdd;
        }
    } 
    if(rect1Mid.x< rect2Mid.x){ 
          if(rect1.intersects(rect2)) {
              x_pos += -xAdd2;
          } 
    }
} 
```

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T15:27:21.403

为你的角色保留两个位置——它在哪里（最后一帧、移动等），以及你想要移动它的位置。然后仅在未检测到碰撞时才移动它 - 如果您不允许损坏状态，则不必修复它。

**编辑：**方法`collision`应该是`boolean`- 它应该在实际移动角色之前完成，**比如**

```
if (!collision(character, tile))
{
    doMove(character);
}
else
{
    //custom handling if required
} 
```

**Edit2:**前面的只适用于一小步，如果你需要部分移动，你真的需要知道角色的原始位置，比如`move(originalPosition, desiredPosition, tile)`，你可以从`originalPosition`和推断出方向`tile`。

要点是，在您获得有效位置之前，您实际上并没有移动角色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T16:20:08.030

首先，任何*Sprite*（这里的角色和图块）都应该有四个成员：xPos、yPos、xVec、yVec。考虑到这一点，您就知道角色在哪里以及下一帧将在哪里。

```
sprite.xPos += sprite.xVec;
sprite.yPos += sprite.yVec; 
```

还要看看你的代码，你应该改进命题（例如，你检查四个*if*语句中的*if(rect1.intersects(rect2)) ）。*相反，只检查一次*intersects()*，并在内部检查每种可能的情况（左、右、上、下命中）。

 **最后，collision 方法应该接收 2 个 sprite 对象（例如*sprite1*和*sprite2*），然后检查*intersects()*方法，同时考虑 sprite 及其向量的原始位置。如果精灵在新位置相交，则相应地反转对象的矢量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:42:55.783

假设您可以检测到与代码的冲突。这是一种确定角色相对于矩形对象的位置的方法。

1.  找到矩形的中点。(Rx,Ry)。

2.  找到角色精灵的中点。(Sx,Sy)。

3.  现在您可以比较 Rx,Ry , Sx , Sy 以确定 Rx 和 Ry 的 Sx 和 Sy 在哪一侧

4.  例如：

    ```
    if Sx < Rx then
      Sx = left side of Rx 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-12T13:08:26.230

我自己也在为此苦苦挣扎，但经过一番思考，可以通过将所有实体都放在一个列表中来完成这项检查，在我的代码中，我不得不阻止玩家通过块移动。所有块都在一个列表中。现在，在检查玩家位置时，我创建一个新的 Rectangle 并将玩家位置向前一帧放在下一帧将发生更新的方向上，如果矩形与该方向的更新不会发生相交。这是我的代码：

```
 if (isKeyPressed(KeyEvent.VK_LEFT)) {
        if(!collisionWithBlocks(1)){
            pl.x = pl.x - updatePlayerPosition;
        }
    }
    if (isKeyPressed(KeyEvent.VK_RIGHT)) {
        if(!collisionWithBlocks(0)){
            pl.x = pl.x + updatePlayerPosition;
        }
    }
    if (isKeyPressed(KeyEvent.VK_UP)) {
        if(!collisionWithBlocks(3)){
            pl.y = pl.y - updatePlayerPosition;
        }
    }
    if (isKeyPressed(KeyEvent.VK_DOWN)) {
        if(!collisionWithBlocks(2)){
            pl.y = pl.y + updatePlayerPosition;
        }
    } 
```

碰撞块（）：

```
public boolean collisionWithBlocks(int side){
    for(Block b : main.blocks){
        Rectangle block = b.getBounds();
        Rectangle player = null;
        if(side == 0){
            player = new Rectangle(pl.x + updatePlayerPosition, pl.y, pl.getWidth(), pl.getHeight());
        } else if(side == 1){
            player = new Rectangle(pl.x - updatePlayerPosition, pl.y, pl.getWidth(), pl.getHeight());
        } else if(side == 2){
            player = new Rectangle(pl.x, pl.y + updatePlayerPosition, pl.getWidth(), pl.getHeight());
        } else if(side == 3){
            player = new Rectangle(pl.x, pl.y - updatePlayerPosition, pl.getWidth(), pl.getHeight());
        }

        if(player.intersects(block)){
            return true;
        }
    }

    return false;
} 
```

updatePlayerPosition 是 2，并且我的代码发生了变化，但这已经足够了。在您的情况下，我建议将实体放在列表中，然后像我一样检查。**

# layout - 尝试将视图放在正确的位置时遇到一些问题

> ID：10373257
> 
> 赞同：1
> 
> 时间：2012-04-29T15:14:01.217
> 
> 标签：layout, tablelayout, gravity

我正在这个 XML 中生成动态表格行

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:scrollbars="none" >

    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/layoutPrincipal1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:stretchColumns="1">

    </TableLayout>

</ScrollView> 
```

问题是：我想使用重力在特定位置有一些视图，但是当定义例如 button1.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT,TableRow.LayoutParams.WRAP_CONTENT,Gravity.CENTER_VERTICAL) ); 它不起作用，但如果我直接在 xml 中执行此操作（使用 layout_gravity），有人知道该怎么做吗？

# linux - 检查文件是否包含多字节字符

> ID：10373258
> 
> 赞同：5
> 
> 时间：2012-04-29T15:14:07.890
> 
> 标签：linux, multibyte

我有一些 UTF-8 的字幕文件。有时这些文件中有一些零星的多字节字符，这会导致某些应用程序出现问题。

如果某个文件包含任何多字节字符，我如何检查 linux（并可能找到这些）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T15:18:09.340

您可以使用文件命令

```
chalet16$ echo test > a.txt
chalet16$ echo testก >  b.txt #One of Thai characters
chalet16$ file *.txt
a.txt: ASCII text
b.txt: UTF-8 Unicode text 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T15:16:13.630

您可以使用`file`或`chardet`命令。

# c# - Windows 8：如何使用 C# 代码添加用户控件

> ID：10373259
> 
> 赞同：1
> 
> 时间：2012-04-29T15:14:22.743
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我为我的 Windows 8 Metro 风格应用程序创建了一个用户控件，我知道如何使用 XAML 将其添加到页面，但如何使用 C# 代码动态添加它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T16:00:47.923

我没有检查它，但它应该与WPF相同：

```
MyUserControl myControl = new MyUserControl();
myPanel.Children.Add(myControl); 
```

# android - 生命周期乱序，与“检测到后退键但活动未结束”有关

> ID：10373262
> 
> 赞同：1
> 
> 时间：2012-04-29T15:14:49.180
> 
> 标签：android

这与以下问题有关：

[检测到返回键但活动未结束](https://stackoverflow.com/questions/10365349/back-key-detected-but-activity-not-ending)

基本上，我必须按两次 BACK 才能退出我的 Activity（我称之为 C） 有一个名为 sessionActive() 的状态方法。

如果 sessionActive() 是 FLASE 并且按下 BACK 活动 C 应该结束。

我在 onKeyDown()/onBackPressed() 中包含了对 finish() 的调用

我已经通过 onCreate()、onResume() 等方法进行了跟踪，但不理解我看到的顺序。以下来自 logcat 的片段显示了看似无序发生的生命周期方法：

```
C.onCreate() 
C.onStart() 
C.onResume() 
C.onKeyDown() sessionActive()==false, keyCode = BACK              
                      This is the 1st BACK press that should get us out but doesn't

C.finish() sessionActive is FALSE                                
                      Shouldn't this execute onStop()?

C.onPause() sessionActive is FALSE      <- Why are these running?
C.onRestart() sessionActive is FALSE       
C.onStart() sessionActive is FALSE      
C.onResume() sessionActive is FALSE

C.onStop() sessionActive is FALSE       <- These makes sense.
C.onDestroy() sessionActive is FALSE

C.onPause() sessionActive is FALSE      <- Why didn't the previous onDestroy() stop us?

C.onResume() sessionActive is FALSE     <- Confusing!!!

C.onKeyDown() sessionActive is FALSE, keyCode = BACK
                    This is 2nd BACK press that causes Activity C to exit.

C.finish() sessionActive is FALSE
C.onPause() sessionActive is FALSE      <- Why is there is no onRestart here?

C.onStop() sessionActive is FALSE       <- This is the sequence I expect.
C.onDestroy() sessionActive is FALSE 
```

这是正常的吗？如果是，我不明白为什么生命周期的执行方式不同。

是否与Activity C的启动方式有关：

```
 Intent startActivity = new Intent();
    startActivity.setClass(this,C.class);
    startActivity.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    startActivity(startActivity); 
```

它是否与被定义为 android:launchMode="singleTask" 的应用程序有关？

关于如何定义/启动 Activity 启动 C 是否有任何要求？Activity 启动 Activity 启动 C 怎么样？

# php - 如何计算涉及多个表的多个列的平均值和计数？

> ID：10373266
> 
> 赞同：4
> 
> 时间：2012-04-29T15:15:18.337
> 
> 标签：php, mysql, sql

这是我的不同表：

```
computers (id,name)
monitors (id,name)
computer_monitor (id, computer_id,monitor_id)
useractivity (id,userid,timestamp,computer_monitor_id,ip)
useropinion (id,userid,computer_monitor_id,timestamp,rating)
user (id,name,email) 
```

我想搜索计算机或显示器的名称并得到这样的一行作为回报：

```
computer name and/or monitor name
computer_monitor_id
avg(rate)
count(useractivity) 
```

avg(rate) 位于与名称匹配的特定位置`computer_monitor_id`，计数也是如此。

没有连接到监视器的计算机在 computer_monitor 表中的监视器字段上的值为 0，反之亦然`monitor->computer`。

useractivity 和 useropinion 仅包含来自 computer_monitor 表的 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:02:46.747

据我了解，查询应该围绕`computer_monitor`表格构建。所有其他表都连接到它，包括您要从中获取统计信息的表。

```
SELECT
  c.name AS ComputerName,
  m.name AS MonitorName,
  uo.AverageRating,
  ua.ActivityCount
FROM computer_monitor cm
  LEFT JOIN computer c ON c.id = cm.computer
  LEFT JOIN monitor  m ON m.id = cm.monitor

  INNER JOIN (
    SELECT computer_monitor_id, AVG(rating) AS AverageRating
    FROM useropinion
    GROUP BY computer_monitor_id
  ) uo ON cm.id = uo.computer_monitor_id

  INNER JOIN (
    SELECT computer_monitor_id, COUNT(*) AS ActivityCount
    FROM useractivity
    GROUP BY computer_monitor_id
  ) ua ON cm.id = ua.computer_monitor_id 
```

实际上，正如您所看到的，`useropinion`并且`useractivity`首先聚合，*然后*加入。这是为了避免在 a 与 in和 in匹配多行时出现[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product "笛卡尔积（维基百科）")效应。`computer_monitor.id``useropinion``useractivity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:29:55.600

```
<?php
$res_comp = mysql_query("select * from computers where name = '$name'");
$res_monitor = mysql_query("select * from monitor where name = '$name'");
if(mysql_num_rows($res_comp) > 0)
{
$row_comp = mysql_fetch_array($res_comp);
$comp_id = $row_comp['id'];
$res_result = mysql_query("select computers.name, computer_monitor.id, count(computer_monitor_id) from computers, computer_monitor, useractivity where computers.id = '$comp_id' AND computer_monitor_id = '$comp_id' AND useractivity.computer_monitor_id = '$comp_id'");

}
// repeat the same for monitor also. then use mysql_fetch_array to show your data.
?> 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T15:41:06.813

这*可能会*奏效......（一个带有计算机/监视器关系的表，另一个带有外部参照表的表扔给我，并根据您的数据检查连接类型）

```
SELECT computers.name AS ComputerName
    , monitors.name AS MonitorName
    , AVG(useropinion.rating) AS AvgRating
    , COUNT(useractivity.id) AS ActivityCount
FROM computers
INNER JOIN computer_monitor ON (computers.id = computer_monitor.computer_id)
INNER JOIN useractivity ON (computers.id = useractivity.computer_id)
INNER JOIN monitors ON (computer_monitor.monitor_id = monitors.id)
INNER JOIN useropinion ON (computer_monitor.id = useropinion.computer_monitor_id) AND (monitors.id = useractivity.monitor_id)
INNER JOIN USER ON (useropinion.user_id = user.id) AND (useractivity.user_id = user.id) 
```

# windows-phone-7 - WP7 - 进行异步请求/响应时丢失对象的引用

> ID：10373267
> 
> 赞同：1
> 
> 时间：2012-04-29T15:15:41.040
> 
> 标签：windows-phone-7, asynchronous, httpwebrequest, httpwebresponse

我正在向服务发出请求并得到响应。服务工作正常，我正在反序列化一个没有问题的对象。

下面是我的代码示例。问题是结果对象最后为空。我不知道为什么我会失去参考。什么是正确的解决方案？

```
 HttpWebRequest hwrq = (HttpWebRequest)WebRequest.Create("http://service.svc/Login");
        hwrq.ContentType = "application/x-www-form-urlencoded; encoding='utf-8'";
        hwrq.Accept = "text/xml";
        hwrq.Method = "POST";

        Users result = null; // object initializaiton

        hwrq.BeginGetRequestStream(ar =>
        {
            var requestStream = hwrq.EndGetRequestStream(ar);
            using (var sw = new StreamWriter(requestStream, System.Text.Encoding.UTF8))
            {
                sw.Write("Username Password");
                sw.Close();
            }

            hwrq.BeginGetResponse(a =>
            {
                var response = hwrq.EndGetResponse(a);
                var responseStream = response.GetResponseStream();
                using (var sr = new StreamReader(responseStream))
                {
                    returnedXML = sr.ReadToEnd();

                    XmlSerializer xds = new XmlSerializer(typeof(Users));

                    byte[] byteArray = Encoding.UTF8.GetBytes(returnedXML);
                    MemoryStream stream = new MemoryStream(byteArray);

                    result = (Users)xds.Deserialize(stream); // object is correct
                }
                responseStream.Close();
                response.Close();
            }, null);
        }, null);

        return result; // object is null! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:44:55.693

就像 MarcinJuraszek 建议的那样，正确的方法是进行回调并在那里处理结果。

# jquery - 如何限制marginleft jquery

> ID：10373269
> 
> 赞同：2
> 
> 时间：2012-04-29T15:15:54.660
> 
> 标签：jquery

我将如何限制此滑块。

我想将 leftarrow 限制为 margin-left:0; 向右箭头到边距：-left:-500px；

这很难做到吗？

任何帮助表示赞赏。

jsfiddle：http: [//jsfiddle.net/utKqe/2/](http://jsfiddle.net/utKqe/2/)

```
//other category page, navigate through cats
    $(document).ready(function() {

        $('#otherleftarrow').click(function() {
            $('#othermenu ul').animate({marginLeft: '-=100px'}, 200);
            return false; // prevent default click action from happening!
        });

        $('#otherrighttarrow').click(function() {
            $('#othermenu ul').animate({marginLeft: '+=100px'}, 200);
            return false;
        });

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T15:25:18.333

尝试这样的事情：

```
$(document).ready(function() {

    $('#otherleftarrow').click(function() {
        if ( parseInt($('#othermenu ul').css('margin-left')) > -500 )
            $('#othermenu ul').animate({'margin-left': '-=100'}, 200);
        return false; // prevent default click action from happening!
    });

    $('#otherrighttarrow').click(function() {
        if ( parseInt($('#othermenu ul').css('margin-left')) < 0 )
            $('#othermenu ul').animate({'margin-left': '+=100'}, 200);
        return false;
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:18:43.843

```
$(document).ready(function() {

    $('#otherleftarrow').click(function() {
        $('#othermenu ul').animate({'margin-left': '-=100'}, 200);
        return false; // prevent default click action from happening!
    });

    $('#otherrighttarrow').click(function() {
        $('#othermenu ul').animate({'margin-left' : '+=100'}, 200);
        return false;
    });

}); 
```

更改： animate( {margin-left: '-=100' }) ，而不是 animate( {marginLeft: '-=100px' })

编辑：对不起，我错过了左侧边距的引号，感谢您指出@YMMD

# adobe - 需要 LCCS SDK - 无法再从 adobe 网站获取

> ID：10373271
> 
> 赞同：2
> 
> 时间：2012-04-29T15:16:07.557
> 
> 标签：adobe, livecycle, lccs

Adobe LiveCycle 协作现已停止，但我需要 LCCS SDK 在我的计算机上进行测试。我不能再从 adobe 网站下载它。有人可以给我这个他们已经下载的SDK。

我无法登录此页面，因为它说我没有非 SDK 帐户，并且不再有创建帐户的选项。 [https://cocomo.acrobat.com/](https://cocomo.acrobat.com/)

# jquery-mobile - PhoneGap 滑块支持无法正常工作

> ID：10373280
> 
> 赞同：1
> 
> 时间：2012-04-29T15:17:21.580
> 
> 标签：jquery-mobile, cordova

使用 PhoneGap 尝试向 iOS iPad 应用程序添加标签和滑块时，标签和滑块都不会出现在页面上。以下是用于生成显示的代码：

```
<div data-role="fieldcontain">
    <label for="quantity">Number of Cones:</label>
    <input type="range" name="quantity" id="quantity" value="5" min="1" max="10" />
</div> 
```

上面的代码片段正确地产生：

```
Number of Cones:
<------|-------> 
```

但无法显示数量初始化为 5 的标签框。

这个问题的原因是什么？

# perl - Perl 在不同情况下查找有效的行对

> ID：10373283
> 
> 赞同：4
> 
> 时间：2012-04-29T15:17:53.787
> 
> 标签：perl, http, multiline, file-manipulation

我有 HTTP 标头请求和以制表符分隔的形式回复数据，每个 GET/POST 并在不同的行中回复。该数据使得一个 TCP 流有多个 GET、POST 和 REPLY。我只需要从这些案例中选择第一个有效的 GET - REPLY 对。一个例子（简化）是：

```
ID       Source    Dest    Bytes   Type   Content-Length  host               lines.... 
1         A         B       10     GET        NA          yahoo.com            2
1         A         B       10     REPLY      10          NA                   2 
2         C         D       40     GET        NA          google.com           4
2         C         D       40     REPLY      20          NA                   4
2         C         D       40     GET        NA          google.com           4
2         C         D       40     REPLY      30          NA                   4
3         A         B       250    POST       NA          mail.yahoo.com       5
3         A         B       250    REPLY      NA          NA                   5
3         A         B       250    REPLY      15          NA                   5
3         A         B       250    GET        NA          yimg.com             5
3         A         B       250    REPLY      35          NA                   5
4         G         H       415    REPLY      10          NA                   6
4         G         H       415    POST       NA          facebook.com         6
4         G         H       415    REPLY      NA          NA                   6
4         G         H       415    REPLY      NA          NA                   6
4         G         H       415    GET        NA          photos.facebook.com  6
4         G         H       415    REPLY      50          NA                   6

.... 
```

所以，基本上我需要为每个 ID 获取一个请求-回复对并将它们写入一个新文件。

对于“1”，它只是一对，所以很容易。*但也有两行都是 GET、POST 或 REPLY 的错误案例。因此，此类情况被忽略。*

对于“2”，我会选择第一个 GET - REPLY 对。

对于“3”，我会选择第一个 GET 但第二个 REPLY，因为第一个中不存在 Content-Length（使 subsequest REPLY 成为更好的候选者）。

*对于“4”，我会选择第一个 POST（或 GET），因为第一个标头不能是 REPLY。即使 POST 之后的内容长度缺失，我也不会在第二次 GET 之后选择 REPLY，因为 REPLY 在那之后。所以我会选择第一个回复。*

因此，在选择了最佳请求和回复对之后，我需要将它们配对在一行中。例如，输出将是：

```
 ID       Source    Dest    Bytes   Type   Content-Length  host         .... 
   1         A         B       10     GET      10          yahoo.com
   2         C         D       40     GET      20          google.com
   3         A         B       250    POST     15          mail.yahoo.com
   4         G         H       415    POST     NA          facebook.com 
```

实际数据中还有很多其他标题，但这个示例几乎显示了我需要的内容。在 Perl 中如何做到这一点？我几乎一开始就被困住了，所以我一次只能读取一行文件。

```
open F, "<", "file.txt" || die "Cannot open $f: $!";

  while (<F>) {
    chomp;
    my @line = split /\t/;

      # get the valid pairs for cases with multiple request - replies

      # get the paired up data together

  }
  close (F); 
```

**编辑：我添加了一个额外的列，给出了每个 ID 的 HTTP 标题行数。这可能有助于了解要检查多少后续行。另外，我修改了 ID '4'，以便第一个标题行是回复。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:33:25.303

下面的程序做我认为你需要的。

它被评论了，我认为它是相当清晰的。请询问是否有任何不清楚的地方。

```
use strict;
use warnings;

use List::Util 'max';

my $file = $ARGV[0] // 'file.txt';
open my $fh, '<', $file or die qq(Unable to open "$file" for reading: $!);

# Read the field names from the first line to index the hashes
# Remember where the data in the file starts so we can get back here
#
my @fields = split ' ', <$fh>;
my $start = tell $fh;

# Build a format to print the accumulated data
# Create a hash that relates column headers to their widths
#
my @headers = qw/ ID Source Dest Bytes Type Content-Length host /;
my %len = map { $_ => length } @headers;

# Read through the file to find the maximum data width for each column
#
while (<$fh>) {
  my %data;
  @data{@fields} = split;
  next unless $data{ID} =~ /^\d/;
  $len{$_} = max($len{$_}, length $data{$_}) for @headers;
}

# Build a format string using the values calculated
#
my $format = join '   ', map sprintf('%%%ds', $_), @len{@headers};
$format .= "\n";

# Go back to the start of the data
# Print the column headers
#
seek $fh, $start, 0;
printf $format, @headers;

# Build transaction data hashes into $record and print them
# Ignore any events before the first request
# Ignore the second request and anything after it
# Update the stored Content-Length field if a value other than NA appears
#
my $record;
my $nreq = 0;

while (<$fh>) {

  my %data;
  @data{@fields} = split;
  my ($id, $type) = @data{ qw/ ID Type / };
  next unless $id =~ /^\d/;

  if ($record and $id ne $record->{ID}) {
    printf $format, @{$record}{@headers};
    undef $record;
    $nreq = 0;
  }

  if ($type eq 'GET' or $type eq 'POST') {
    $record = \%data if $nreq == 0;
    $nreq++;
  }
  elsif ($nreq == 1) {
    if ($record->{'Content-Length'} eq 'NA' and $data{'Content-Length'} ne 'NA') {
      $record->{'Content-Length'} = $data{'Content-Length'};
    }
  }
}

printf $format, @{$record}{@headers} if $record; 
```

**输出**

使用问题中给出的数据，该程序产生

```
ID   Source   Dest   Bytes    Type   Content-Length                  host
 1        A      B      10     GET               10             yahoo.com
 2        C      D      40     GET               20            google.com
 3        A      B     250    POST               15        mail.yahoo.com
 4        G      H     415    POST               NA          facebook.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T16:58:48.027

这似乎适用于给定的数据：

```
#!/usr/bin/env perl
use strict;
use warnings;

# Shape of input records
use constant ID       => 0;
use constant Source   => 1;
use constant Dest     => 2;
use constant Bytes    => 3;
use constant Type     => 4;
use constant Length   => 5;
use constant Host     => 6;

use constant fmt_head => "%-6s  %-6s  %-6s  %-6s  %-6s  %-6s  %s\n";
use constant fmt_data => "%-6d  %-6s  %-6s  % 6d  %-6s  % 6s  %s\n";

printf fmt_head, "ID", "Source", "Dest", "Bytes", "Type", "Length", "Host";

my @post_get;
my @reply;
my $lastid = -1;
my $pg_count = 0;

sub print_data
{
    # Final validity checking
    if ($lastid != -1)
    {
        printf fmt_data, $post_get[ID], $post_get[Source],
               $post_get[Dest], $post_get[Bytes], $post_get[Type], $reply[Length], $post_get[Host];
        # Reset arrays;
        @post_get = ();
        @reply = ();
        $pg_count = 0;
    }
}

while (<>)
{
    chomp;
    my @record = split;
    # Validate record here (number of fields, etc)
    # Detect change in ID
    print_data if ($record[ID] != $lastid);
    $lastid = $record[ID];

    if ($record[Type] eq "REPLY")
    {
        # Discard REPLY if there wasn't already a POST/GET
        next unless defined $post_get[ID];
        # Discard REPLY if there was a second POST/GET
        next if $pg_count > 1;
        @reply = @record if !defined $reply[ID];
        $reply[Length] = $record[Length]
                         if $reply[Length] eq "NA" && $record[Length] ne "NA";
    }
    else
    {
        $pg_count++;
        @post_get = @record if !defined $post_get[ID];
        $post_get[Length] = $record[Length]
                            if $post_get[Length] eq "NA" && $record[Length] ne "NA";
    }
}
print_data; 
```

它产生：

```
ID   Source   Dest   Bytes   Type   Content-Length             host
 1        A      B      10    GET               10        yahoo.com
 2        C      D      40    GET               20       google.com
 3        A      B     250   POST               15   mail.yahoo.com
 4        G      H     415   POST               NA     facebook.com 
```

与问题的主要偏差是用“长度”代替“内容长度”；如果需要的话，修复很容易——将`fmt_data`and中的第 6 个长度更改`fmt_head`为长度 14，然后更改`"Length"`为`"Content-Length"`.

# java - 如何在 Android 中更新 UnZip 文件的 ProgressBar

> ID：10373286
> 
> 赞同：2
> 
> 时间：2012-04-29T15:18:14.327
> 
> 标签：java, android, progress-bar, unzip

如何在 Android 应用程序的解压缩过程中使用确定的进度条？

我知道我需要的文件已经被处理以更新进度条，但不知道如何得出这些信息。

谢谢！

**PS**我用来解压缩这篇文章中的代码：[https ://stackoverflow.com/a/7697493/1364296](https://stackoverflow.com/a/7697493/1364296)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T15:35:29.257

> 如何在 Android 应用程序的解压缩过程中使用确定的进度条？

用于[`ZipFile`](http://developer.android.com/reference/java/util/zip/ZipFile.html)查找条目数。使用它`setMax()`来`ProgressBar`设置进度上限。然后，在处理每个文件时，将进度增加 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T00:39:51.223

对于邮政编码，请使用 this 。

```
public static void zip(String[] files, String zipFile) throws IOException {
    BufferedInputStream origin = null;
    ZipOutputStream out = new ZipOutputStream(new BufferedOutputStream(new FileOutputStream(zipFile)));
    try { 
        byte data[] = new byte[BUFFER_SIZE];

        for (int i = 0; i < files.length; i++) {
            FileInputStream fi = new FileInputStream(files[i]);    
            origin = new BufferedInputStream(fi, BUFFER_SIZE);
            try {
                ZipEntry entry = new ZipEntry(files[i].substring(files[i].lastIndexOf("/") + 1));
                out.putNextEntry(entry);
                int count;
                while ((count = origin.read(data, 0, BUFFER_SIZE)) != -1) {
                    out.write(data, 0, count);
                }
            }
            finally {
                origin.close();
            }
        }
    }
    finally {
        out.close();
    }
} 
```

在解压缩时尝试使用缓冲区，因为它会快得多

# asp.net-mvc-3 - 应用程序无法连接到 AppHarbor 上的数据库

> ID：10373287
> 
> 赞同：-1
> 
> 时间：2012-04-29T15:18:16.603
> 
> 标签：asp.net-mvc-3, github, ef-code-first, appharbor

我有这个应用程序，我正在开发用于学习目的。我在[AppHarbor](https://appharbor.com/)上托管了该应用程序。它是 ASP.NET MVC 和 EF Code First。我添加了用于数据库目的的 SQL Server 免费插件，但是数据库连接可能会失败。

代码托管在 Github 上：- [https://github.com/BilalHasanKhan/BusinessFlow](https://github.com/BilalHasanKhan/BusinessFlow)

请指教或指出我错的地方。

通过关闭自定义错误，我发现了错误：

> 无法检查模型兼容性，因为数据库不包含模型元数据。确保已将 IncludeMetadataConvention 添加到 DbModelBuilder 约定中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:19:32.343

您可能想查看我们最近发布的关于[使用 EF Code First 进行迁移](http://blog.appharbor.com/2012/04/24/automatic-migrations-with-entity-framework-4-3)的博文。帖子中还有[示例代码](https://github.com/friism/CodeFirstMigrations)。

# django - 尝试在表中生成行

> ID：10373289
> 
> 赞同：2
> 
> 时间：2012-04-29T15:18:19.897
> 
> 标签：django, django-templates

这是我的模型的样子：

[http://i.imgur.com/fFBqq.png](http://i.imgur.com/fFBqq.png)

我正在尝试填写一张满是磁盘的表格，每个磁盘都有一个序列号和型号。我将假设我会为“某事”中的磁盘执行 {%} 之类的操作，但我不太确定那会是什么。

这就是我所希望的：

```
<table>
  <thead>
    <tr>
    <th>Serial Number</th>
    <th>Model Number</th>
    </tr>
  </thead>
<tbody>

{% for disks in "something" %}
    <tr>
    <td>{{ disk.serial }}</td>  
    <td>{{ disk.model }}</td>
    </tr>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T15:29:54.070

模板只是您问题的一部分。这实际上是不太复杂的方面，因为您所做的只是将一个上下文（字典）传递给它以供它访问。模板之前的步骤是组织数据的视图。让我们从那个开始......

**看法**

收集数据的函数（视图）需要构建一个包含“磁盘”对象的上下文，这可能是数据库模型查询的结果。为简单起见，假设您这样做了：

```
disks = Disk.objects.all() 
```

使用您的磁盘查询集，您现在可以在上下文中将其交付给您的模板。

```
context = {"disks": disks}
return render_to_response('my_template.html', context) 
```

上下文现在将传递给您的模板。

**模板**

只需在您的上下文中引用对象：

```
{% for disk in disks %}
    <tr>
    <td>{{ disk.serial }}</td>  
    <td>{{ disk.model }}</td>
    </tr>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:27:13.600

@jdi 是对的，但由于这是 Web 开发中非常常见的事情 - 有一个[通用视图](https://docs.djangoproject.com/en/dev/topics/class-based-views/#generic-views-of-objects)。

在你的`urls.py`：

```
from django.conf.urls import patterns, url, include
from django.views.generic import ListView
from myapp.models import Disk

urlpatterns = patterns('',
    (r'^disk_list/$', ListView.as_view(
        model=Disk,
        template_name='disk_list.html'
    )),
) 
```

创建一个名为 的文件`disk_list.html`，即 中列出的任何目录`TEMPLATE_DIRS`，并在其中添加：

```
<table>
  <thead>
    <tr>
    <th>Serial Number</th>
    <th>Model Number</th>
    </tr>
  </thead>
<tbody>

{% for disk in object_list %}
    <tr>
    <td>{{ disk.serial }}</td>  
    <td>{{ disk.model }}</td>
    </tr>
{% endfor %} 
```

最后，导航到`http://localhost:8000/disk_list/`

# php - php会话丢失

> ID：10373290
> 
> 赞同：2
> 
> 时间：2012-04-29T15:18:21.990
> 
> 标签：php, session, variables, cookies

我执行以下操作来设置我的会话，这是因为出现了回声。但是当我转到下一页或其他页面时，会话不存在吗？我究竟做错了什么？

```
$session_start();

if ($username==$dbusername&&$password==$dbpassword)
    {
        echo"<b>Login Successful</b><br><a href='systemadmin.html'><br>Click here to access the <strong>System Admin Page</strong></a>";
        $_session['username']=$dbusername;
        if($username == "admin")
        {
            $_session['admin'] = true;
        } 
```

我正在尝试使以下内容与这些会话一起使用：

```
<?php
session_start();
if($_session['admin'] == true)
{
// do nothing
}else{
    header( 'Location: home.html' ) ;
}

?> 
```

更新：

大写会话有效，但现在当我使用 logout.php 时会话不会破坏

```
<?php

session_start();

session_destroy();

header("location: home.html");

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T15:22:44.950

`$_session`应该是 => `$_SESSION`。

[http://php.net/manual/en/reserved.variables.session.php](http://php.net/manual/en/reserved.variables.session.php)

第一个有效，因为您正在设置一个“正常”变量（可用于请求）。

**更新**

要销毁会话：

```
<?php
// Initialize the session.
// If you are using session_name("something"), don't forget it now!
session_start();

// Unset all of the session variables.
$_SESSION = array();

// If it's desired to kill the session, also delete the session cookie.
// Note: This will destroy the session, and not just the session data!
if (ini_get("session.use_cookies")) {
    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
}

// Finally, destroy the session.
session_destroy();
?> 
```

[http://php.net/manual/en/function.session-destroy.php#example-4368](http://php.net/manual/en/function.session-destroy.php#example-4368)

另外，您应该始终`exit();`在执行重定向后使用，以防止进一步执行脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T15:39:11.233

你必须使用 exit(); 在标头（）之后；因为脚本并不总是在用户重定向到新页面后立即结束。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T15:25:27.630

PHP 服务器/会话/全局变量区分大小写。对 PHP`$_SESSION`来说，与 . 的变量不同`$_session`，即使对你来说，它们似乎是。您必须使用`$_SESSION`, 而不是`$_session`按预期访问 PHP Session 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T15:22:10.283

超全局的名称是`$_SESSION`大写字母。尝试改变它，看看它是否有帮助。

# php - 查询不同的数据库

> ID：10373292
> 
> 赞同：7
> 
> 时间：2012-04-29T15:18:24.080
> 
> 标签：php, mysqli

也许这样做是完全错误的，但是......

我需要做这样的查询：

> SELECT * FROM DATABASE1, DATABASE2 WHERE DATABASE1.users.name = DATABASE2.users.name

如果我使用 phpmyadmin 它可以工作，但在 php 上页面会阻塞。

我连接到我正在使用的mysql的方式，

> $result = new mysqli(服务器、用户、通行证、数据库)

我可以看到为什么它不起作用，我只连接到一个数据库，但是 phpmyadmin 是如何做到的呢？我该怎么做？

我看过其他帖子，但我想交叉两个数据库上的信息，但我还没有找到类似的东西。

[编辑] 我的代码的一个实际示例是：

```
if($type == "past"){// Hago una query u otro dependiendo de si quiero pasados o futuros
             $query = "SELECT DISTINCT E.* FROM quehaceshoy_testing.Events E, quehaceshoy_testing.Tickets TK, quehaceshoy_testing.TypeTickets TT, quehaceshoy_testing.Tickets_Reservados2 TR, AirTicket.TICKET T WHERE ((T.Email='$this->email' AND T.idCompra = TR.idCompra AND TR.idTypeTicket_TypeTickets = TT.idTypeTicket AND E.IDEvent = TT.idEvent_Events)OR (E.email = '$this->email')) AND  E.dateFinish < '".$fecha."' ORDER BY E.dateFinish DESC";
        }
        else{
             $query = "SELECT DISTINCT E.* FROM quehaceshoy_testing.Events E, quehaceshoy_testing.Tickets TK, quehaceshoy_testing.TypeTickets TT, quehaceshoy_testing.Tickets_Reservados2 TR, AirTicket.TICKET T WHERE ((T.Email='$this->email' AND T.idCompra = TR.idCompra AND TR.idTypeTicket_TypeTickets = TT.idTypeTicket AND E.IDEvent = TT.idEvent_Events)OR (E.email = '$this->email')) AND  E.dateFinish >= '".$fecha."' ORDER BY E.dateFinish DESC";
        }
        //echo $query;
        //$result = $this->makeQuery($query, 'RESULT');
        if($conn = db_connect()){

                    $result = $conn->query($query);
                    if(!$result){
                      //echo '<p>Unable to get list from database.</p>';
                      //echo $conn->error;
                      return false;
                    }

        } 
```

db_connect 只是：

```
function db_connect()
{
   $result = new mysqli('localhost', $user, $pass, 'quehaceshoy_testing'); 
   $result->set_charset("utf8");

   if (!$result)
      return false;
   return $result;
} 
```

此查询使页面无限地“加载”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:17:28.790

我在下面测试编写了一个脚本，它似乎工作正常而没有失败......

```
 <?php 
          $con = mysql_connect("localhost","root","");
           mysql_select_db("test");

          $con1 = mysql_connect("localhost","root","");
          mysql_select_db("test1");

           $query = "SELECT * FROM test1.`manager` INNER JOIN test.employee   
                    ON test1.`manager`.id= test.employee.mgr";
          $result = mysql_query($query);
          while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
           printf("ID: %s  Name: %s", $row[0], $row[1]);  
          }
      ?> 
```

可能您需要在此处发布您的代码。是不是你的数据集很大？请发布您的代码，以便我们检查和指导。

# objective-c - 从 Plist 存储和检索

> ID：10373297
> 
> 赞同：4
> 
> 时间：2012-04-29T15:19:10.393
> 
> 标签：objective-c, ios, cocoa-touch, nsarray, plist

> **可能重复：**
> [iOS：将两个 NSMutableArray 存储在 .plist 文件中](https://stackoverflow.com/questions/6070568/ios-store-two-nsmutablearray-in-a-plist-file)

我一直避免使用 plist，因为我不确定如何使用它。

谁能给出一个使用 plist的*简单代码示例？*我有兴趣将`NSArray`or保存`NSDictionary`到 plist 中，然后稍后再次检索它。

`NSArray`存储 an或 an有什么优点/缺点`NSDictionary`吗？此外，关于您可以或不能存储在 plist 中的内容是否有任何规则？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T15:51:23.567

您可以将以下数据类型作为值存储在 .plist 文件中：

*   NSArray
*   NSMutableArray
*   NS词典
*   NSMutableDictionary
*   NSData
*   NSMutableData
*   NSString
*   NSMutableString
*   NSNumber
*   NSD日期

使用 NSDictionary，您可以在 plist 中存储由某个键值对组成的关联数组。如果您只想保存数据系列，请使用 NSArray。

要将上述对象之一保存在 plist 文件中，只需编写：

```
- (NSString *)dataFilePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(
    NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return [documentsDirectory stringByAppendingPathComponent:@"yourFileNameHere"];
}

 //Write to the plist

 [myArray writeToFile:[self dataFilePath] atomically:YES];

 //Read from the plist

 if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
     NSArray *array = [[NSArray alloc] initWithContentsOfFile:filePath];
 } 
```

# sql - SQL Server 存储过程并在 VB.NET 中执行

> ID：10373301
> 
> 赞同：6
> 
> 时间：2012-04-29T15:19:34.327
> 
> 标签：sql, sql-server, vb.net, sql-server-2008, stored-procedures

这是要讨论的有点旧的内容，但我需要有人可以解释我如何在 SQL Server 中创建存储过程以从过程中返回值，例如：

```
SELECT NAME, ADDRESS 
FROM CUSTOMER 
WHERE IDCUSTOMER = 'DS212'; 
```

然后我需要它的客户名称和地址。

我需要将它作为一个存储过程，并告诉我如何在 VB.NET 上执行它。或许我们假设名称会提示为LABEL1.TEXT，地址会提示为LABEL2.TEXT。

我已经使用 return 改进了这个 SQL-Server 存储过程，但是在执行它之后我没有任何东西可以返回

```
CREATE PROCEDURE inserting_customer
            @custId varchar(10),
            @usr_id int
AS
BEGIN 
SET @usr_id = (SELECT MAX(SUBSTRING(CUSTOMER.idCustomer,3, LEN(CUSTOMER.IDCUSTOMER))) FROM CUSTOMER
WHERE 
SUBSTRING(CUSTOMER.idCustomer,1,2) = @custId)
END
RETURN @usr_id
GO 
```

这是我的 VB.NET

```
 conn.Open()

        Dim cmd As New SqlCommand("inserting_customer", conn)

        Try
            cmd.CommandType = CommandType.StoredProcedure
            cmd.Parameters.Add("@custId", SqlDbType.VarChar)
            cmd.Parameters("@custId").Value = "YW"
            cmd.Parameters.Add("@usr_id", SqlDbType.Int)
            cmd.Parameters("@usr_id").Value = 0
            cmd.ExecuteNonQuery()
        Finally
            If cmd IsNot Nothing Then cmd.Dispose()
            If conn IsNot Nothing AndAlso conn.State <> ConnectionState.Closed Then conn.Close()
        End Try 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-29T15:32:01.860

假设你在 sqlserver 中有这个 sproc

```
CREATE PROCEDURE GetNameAddress(@custID nvarchar(10))
as
BEGIN
SELECT NAME,ADDRESS FROM CUSTOMER WHERE IDCUSTOMER = @custID;
END 
```

您调用它并以标准方式获得结果

```
' GetConnection is a method that creates and return the '
' SqlConnection used here according to your connection string'
Using cn = GetConnection()
   cn.Open()

   ' Create the command with the sproc name and add the parameter required'
   Dim cmd As SqlCommand = new SqlCommand("GetNameAddress", cn)
   cmd.CommandType = CommandType.StoredProcedure
   cmd.Parameters.AddWithValue("@custID", "DS212")

   ' Ask the command to create an SqlDataReader on the result of the sproc'
   Using r = cmd.ExecuteReader()

       ' If the SqlDataReader.Read returns true then there is a customer with that ID'
       if r.Read() then

           ' Get the first and second field frm the reader'
           lblName.Text = r.GetString(0)
           lblAddress.Text = r.GetString(1)
       end if
   End Using
End using 
```

请注意，当您期望存储过程返回零或一条记录时，这是标准方法。如果您有多个记录，则在 SqlDataReader.Read 方法上使用 while 循环，并且您应该提供存储返回记录的控件。

# cocoa - 最小的基于文档的应用程序的教程/示例

> ID：10373304
> 
> 赞同：8
> 
> 时间：2012-04-29T15:19:45.407
> 
> 标签：cocoa, document-based

我试图了解 Cocoa 中的东西是如何工作的，但我正在为一件事而苦苦挣扎。我看到[http://cocoawithlove.com/2010/09/minimalist-cocoa-programming.html](http://cocoawithlove.com/2010/09/minimalist-cocoa-programming.html)和[http://casperbhansen.wordpress.com/2010/08/15/dev-tip-nibless-development/](http://casperbhansen.wordpress.com/2010/08/15/dev-tip-nibless-development/)我想我有点明白。

现在，除了“基于文档的应用程序”之外，我也想做同样的事情。请问，有没有人知道类似于上面的教程或示例？或者，我需要做什么才能使其工作？我想我需要创建`NSDocumentController`- 但它与 NSApplication 有什么关系？我`NSDocument`从那里创造？坦白说，我有点失落……

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T22:03:07.037

那是六个月前的我！我也没有找到一个像样的教程，而是从一个使用默认 Xcode 项目模板的新项目开始：

![在此处输入图像描述](../Images/39bf3bd88bb5a4327822d7f05b3bbe21.png)

当您开始一个新项目时，我开始使用 Xcode 为您生成的设置，并随着我的进行逐步实现。在 Stackoverflow 上有一些关于使用各种控制器类的好读物，但这就是我所做的：

*   由 Xcode 生成的文档类是我的顶级控制器。我不使用 NSDocumentController。
*   我的应用程序的每个用例都有许多 NSViewControllers 来管理用例的各种视图。这些控制器是动态换入和换出的。顶级控制器由 NSDocument 类管理（在我的例子中是 NSPersistentDocument，因为我使用的是 Core Data）。

我绝不是专家，所以我坚持纠正更好的方法，但到目前为止，这个设置很容易使用、易于维护和易于扩展。

注意：使用 Core Data 是可选的，但随着时间的推移，我开始喜欢它，并认为它非常强大并且可以节省大量时间。当您决定不使用 Core Data 时，上述设置仍然有效，但您必须管理自己的数据。

编辑：这篇[文章](https://stackoverflow.com/questions/8335485/how-does-nsdocumentcontroller-slot-into-my-document-based-app)解释了 NSDocumentController 的相关性。

EDIT2： Apple 的[这本书](http://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/Introduction/Introduction.html)也很有趣。

EDIT3：您确实需要 NIB（或现在称为 XIB），因为它们包含您的应用程序的 UI。您通过视图控制器（子类`NSViewController`）将它们拉入：

```
NSString *aControllerName = [anIdentifier stringByAppendingString: @"ViewController"];
NSString *aNibName = [anIdentifier stringByAppendingString: @"View"];
Class aControllerClass = NSClassFromString(aControllerName);
[self setCurrentController: [[aControllerClass alloc] initWithNibName: aNibName bundle: [NSBundle mainBundle]]]; 
```

在上面`anIdentifier`可能是`Department`，这将实例化`DepartmentViewController`并加载 XIB 名称`DeparmentView`。

您可以使用 plist 来存储数据，但这不是必需的。有很多方法可以存储您的应用程序数据。您必须阅读有关 Apple 现有的各种架构并做出自己的选择。

# cygwin - Cygwin 反向 shell xdebug Windows 7 Komodo 会话不起作用？

> ID：10373307
> 
> 赞同：1
> 
> 时间：2012-04-29T15:20:23.420
> 
> 标签：cygwin, vmware, xdebug, komodo

我有一个带有 xdebug 2.0.3 的网络服务器和带有 Windows 7 64 位的 Komodo 6 但我无法连接到 xdebug？我用 cygwin 尝试了一个反向 shell，我可以连接到我的服务器，但是当我在 Komodo 中尝试调试器选项时，它给了我一个错误。在 Komodo 中，我打开了一个远程 ftp 会话以从主机加载我的文件。通常在 Linux 上，它与反向 shell 一起工作。

编辑：这有点在我头上，所以我正在尝试调试我的本地虚拟机，但 Komodo 给我这个错误无法绑定到本地端口 9000 并且我没有防火墙。当我使用我的 Opera 扩展在浏览器窗口中启用调试时，我会在我的 xdebug 日志中找到成功消息客户端，当我加载我的 html 页面但加载后连接关闭并且它也没有在我的断点处中断。这是消息日志的输出：

```
 Log opened at 2012-04-30 08:48:40
  I: Checking remote connect back address.
  I: Remote address found, connecting to 127.0.0.1:9000.
  I: Connected to client. :-)
  -> <init xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/
  xdebug" fileuri="file:///htdocs/typo3_src-4.7.0/index.php" language="PHP"       
  protocol_version="1.0" appid="5101" idekey="komodo-xdebug"><engine     
  version="2.2.0rc2"><![CDATA[Xdebug]]></engine><author><![CDATA[Derick Rethans]]></
  author><url><![CDATA[http://xdebug.org]]></url><copyright><![CDATA[Copyright (c) 
  2002-2012 by Derick Rethans]]></copyright></init>
  -> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/ 
  xdebug" status="stopping" reason="ok"></response>

 Log closed at 2012-04-30 08:48:41 
```

我的网络服务器是一个带有 FastCGI 的 lighttpd 但这不应该是问题，因为我已经让它与远程主机和反向 shell 一起工作，但不是在 Windows 7 和 Vmware 或 Vmware 中？我目前正在阅读这篇文章[http://forums.netbeans.org/topic1513-30.html](http://forums.netbeans.org/topic1513-30.html)，希望对您有所帮助。

我也看不到服务器正在侦听端口 9000。这是 Vmware 问题吗？

编辑：我让它在我的虚拟机上运行，​​但我仍然有兴趣解决这个问题：

1.  xdebug 从主机连接到虚拟机
2.  xdebug 从主机连接到远程机器（它适用于我，但只能使用反向 shell）
3.  从虚拟机到远程机器的 xdebug 连接（尚未测试）

有趣的是在 Windows 7 中的开发：

1.  xdebug 从 Windows 7 连接到远程机器
2.  从 Windows 7 到虚拟机的 xdebug 连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:39:37.013

使用[调试器连接首选项](http://docs.activestate.com/komodo/6.0/prefs.html#DebuggerConnection)将虚拟机的 IP 地址设置为[调试器代理](http://docs.activestate.com/komodo/6.0/debugger.html#dbgp_proxy)。将 Komodo 侦听的端口从默认值 9000 更改[为系统提供的空闲端口](http://community.activestate.com/node/7848)8080 或您的虚拟主机或本地主机正在运行的任何端口。

# php - linux中的php串行通信

> ID：10373308
> 
> 赞同：8
> 
> 时间：2012-04-29T15:20:37.367
> 
> 标签：php, linux, serial-communication

我已经在 Fedora 13 中安装了 xampp。我正在尝试使用 php 串行类通过串行端口与微控制器通信。我的代码是example.php

```
include("php_serial.class.php");
$serial = new phpSerial();
$serial->deviceSet("0");

$serial->confBaudRate(9600); //Baud rate: 9600 
$serial->confParity("none"); //Parity (this is the "N" in "8-N-1") 
$serial->confCharacterLength(8); //Character length (this is the "8" in "8-N-1") 
$serial->confStopBits(1); //Stop bits (this is the "1" in "8-N-1") 
$serial->confFlowControl("none"); //Device does not support flow control of any kind, so set it to none.

//Now we "open" the serial port so we can write to it
$serial->deviceOpen();

$serial->sendMessage("*1" ); //sleep(1); // echo "hi"; $serial->deviceClose();

?> 
```

php 脚本被执行但给出以下警告。

警告：在第 147 行的 /opt/lampp/htdocs/xampp/php_serial.class.php 中指定的串行端口无效警告：无法设置波特率：设备未在 /opt/lampp/htdocs 中设置或打开第 241 行的 /xampp/php_serial.class.php 警告：无法设置奇偶校验：设备未设置或在第 295 行的 /opt/lampp/htdocs/xampp/php_serial.class.php 中打开

...我使用了命令：chmod 0777 /dev/ttyUSB0 来授予权限。我还尝试使用命令将 apache 用户“prudhvi”添加到拨出组：$ usermod -a -G dialout prudhvi

但它不起作用。当我使用以下命令直接从终端发送命令时：echo 1 > /dev/ttyUSB0 它可以工作，并且“1”被传输到串行端口。但是使用 php 我得到了上述警告。

我已使用“$whoami”检查用户名并将该用户“prudhvi”添加到拨出组。它仍然不起作用。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:06:42.537

我用 Debian 做过一次，用 PHP 脚本控制 Arduino 板，最初遇到了同样的问题。

在 Debian 中，您需要将 Apache 用户添加到 dialout 组，以允许它发出串行连接请求。我认为 Fedora 也是如此。

在 Debian 中，命令是：

```
useradd -G dialout www-data 
```

但是我相信 Fedora 将 Apache 用户命名为 apache。我没有要测试的 Fedora 机器，但我假设您需要运行的命令是：

```
useradd -G dialout apache 
```

然后，您将需要重新启动您的 xampp 服务器。

请参阅以下内容以供参考：

[http://www.cyberciti.biz/faq/howto-linux-add-user-to-group/](http://www.cyberciti.biz/faq/howto-linux-add-user-to-group/) [http://fedoraproject.org/wiki/Administration_Guide_Draft/Apache#Apache_File_Security](http://fedoraproject.org/wiki/Administration_Guide_Draft/Apache#Apache_File_Security)

尼尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T16:18:37.900

您能否在“/opt/lampp/htdocs/xampp/php_serial.class.php on line 147”附近/相关的行发布？

我怀疑您试图错误地设置设备（如 Marc 所示）。您同时进行的其他测试或该端口已在使用中。我不确定您正在运行的脚本是否提供特定于您尝试附加到已在使用的端口的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T21:00:04.627

归功于 Marc B 的评论让我查看了这个，他死在：[http ://www.phpclasses.org/browse/file/17926.html](http://www.phpclasses.org/browse/file/17926.html)

```
function deviceSet ($device)
{
    if ($this->_dState !== SERIAL_DEVICE_OPENED)
    {
        if ($this->_os === "linux")
        {
            if (preg_match("@^COM(\d+):?$@i", $device, $matches))
            {
                $device = "/dev/ttyS" . ($matches[1] - 1);
            }

            if ($this->_exec("stty -F " . $device) === 0)
            {
                $this->_device = $device;
                $this->_dState = SERIAL_DEVICE_SET;
                return true;
            }
        }
        elseif ($this->_os === "windows")
        {
            if (preg_match("@^COM(\d+):?$@i", $device, $matches) and $this->_exec(exec("mode " . $device)) === 0)
            {
                $this->_windevice = "COM" . $matches[1];
                $this->_device = "\\.\com" . $matches[1];
                $this->_dState = SERIAL_DEVICE_SET;
                return true;
            }
        }

        trigger_error("Specified serial port is not valid", E_USER_WARNING);
        return false;
    }
    else
    {
        trigger_error("You must close your device before to set an other one", E_USER_WARNING);
        return false;
    }
} 
```

我相信调用`$serial->deviceSet("/dev/ttyUSB0");`会解决它，但您可能必须修改源代码`php_serial.class.php`才能处理，`/dev/ttyUSB`而不是`/dev/ttyS`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T21:37:35.947

首先测试一个 hello world 类型的 php 脚本来测试你的基本安装。

然后验证 Web 服务器 / php 引擎是否以用户身份运行，该用户在允许访问与串行端口对应的适用 /dev/ttyWHATEVER 设备文件的组中。如果默认情况下这是真的，那将是令人惊讶的 - 您可能必须将其添加到“拨出”或类似组中。

向您的代码添加一些故障检查/报告。

# python - 为什么这段代码得到这个'str'对象没有属性'get_match_routes'错误？

> ID：10373309
> 
> 赞同：5
> 
> 时间：2012-04-29T15:20:42.063
> 
> 标签：python, html, google-app-engine

我正在尝试使用 Google App Engine 构建一个（新手）应用程序，但是当我运行它时，我发现这个（日志）错误我不明白：

```
 File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1479, in __init__
    self.router = self.router_class(routes)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1129, in __init__
    self.add(route)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1142, in add
    for r in route.get_match_routes():
AttributeError: 'str' object has no attribute 'get_match_routes'
INFO     2012-04-29 14:42:34,056 dev_appserver.py:2891] "GET / HTTP/1.1" 500 - 
```

整个代码如下。有人可以找出这个错误的原因以及我该如何解决它？提前感谢您的帮助！

```
import webapp2

form = """

<html>
 <head>
<title>Sign Up</title>
<style type="text/css">
  .label {text-align: right}
  .error {color: red}
</style>

  </head>

  <body>
    <h2>Signup</h2>
<form method="post">
  <table>
    <tr>
      <td class="label">
        Username
      </td>
      <td>
        <input type="text" name="username" value="">
      </td>
      <td class="error">

      </td>
    </tr>

    <tr>
      <td class="label">
        Password
      </td>
      <td>
        <input type="password" name="password" value="">
      </td>
      <td class="error">

      </td>
    </tr>

    <tr>
      <td class="label">
        Verify Password
      </td>
      <td>
        <input type="password" name="verify" value="">
      </td>
      <td class="error">

      </td>
    </tr>

    <tr>
      <td class="label">
        Email (optional)
      </td>
      <td>
        <input type="text" name="email" value="">
      </td>
      <td class="error">

      </td>
    </tr>
  </table>

  <input type="submit">
</form>
 </body>

</html>
"""

welcome = """
<html>
  <head>
    <title>Unit 2 Signup</title>
  </head>

  <body>
    <h2>Welcome, %(username)s!</h2>
  </body>
</html>
"""
import re

USER_RE = re.compile(r"^[a-zA-Z0-9_-]{3,20}$")
def valid_username(username):
    return USER_RE.match(username)

PASS_RE = re.compile(r"^.{3,20}$")
def valid_password(password):
    return PASS_RE.match(password)

EMAIL_RE = re.compile(r"^[\S]+@[\S]+\.[\S]+$")
def valid_email(email):
    return EMAIL_RE.match(email)

class MainHandler(webapp2.RequestHandler):
    def get(self):
       self.response.out.write(form)

    def write_form(self, text_write):
       self.response.out.write(form) 

    def post(self):
        user_name = self.request.get("username")
        user_pass = self.request.get('password')
        user_verify = self.request.get('verify')

        err_username = ""
        if not valid_username(user_name):
            err_username = "Oh no!!! Username isn't valid!"
        err_pass = ""
        if not valid_pass(user_pass):
            err_pass = "Oh no!!! password isn't valid!"
        err_verify = ""
        if user_pass != user_verify:
            err_verify = "Oh no!!! password verification didn't check!"

class WelcomeHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write(welcome)

app = webapp2.WSGIApplication([('/', MainHandler), '/welcome', WelcomeHandler],
                          debug=True) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T15:25:25.133

使用以下方法修复您的路线定义：

```
app = webapp2.WSGIApplication([(r'/', MainHandler),
                               (r'/welcome', WelcomeHandler)],
                               debug=True) 
```

还检查[webapp2 路由扩展](http://webapp-improved.appspot.com/guide/routing.html)以获得更高级的东西。

# c++ - boost::threads 示例和堆损坏消息

> ID：10373310
> 
> 赞同：7
> 
> 时间：2012-04-29T15:21:10.020
> 
> 标签：c++, multithreading, boost-thread, heap-corruption, threadgroup

我对 boost::threads 很陌生，我阅读了文档，但在实践中应用它时遇到了一些麻烦，也许你可以帮忙？首先，我花时间编写了一个自包含的代码清单，演示了我尚无法理解的 2 种类型的行为......

该程序允许用户发出 3 个不同的命令，

*   任务名称]
*   信息
*   退出

目的是该*任务*将在新线程上启动一些工作，然后在执行工作时返回到命令提示符。用户可以通过*info*命令找出哪些任务已完成，哪些尚未完成。

我使用的是双核 Win7 机器和 Visual Studio 2008 Express。

问题1>

发出命令*task p1 p2 p3*开始运行 3 个任务。这可以通过发出*info*来检查。几秒钟后工作完成，但由于某种原因，完成标志并不总是在 1 或 2 个任务上设置为真。

问题2>

退出程序然后会产生以下消息：

> Windows 在 example.exe 中触发了一个断点。这可能是由于堆损坏，这表明 example.exe 或其已加载的任何 DLL 中存在错误。这也可能是由于在 example.exe 具有焦点时用户按 F12。输出窗口可能有更多诊断信息。

希望您可以重现此行为并提供帮助。

提前致谢。亚历克斯。

```
 //WARNING: THIS CODE DOES NOT BEHAVE EXACTLY AS INTENDED
#include <iostream>  
#include <string>
#include <sstream>
#include <boost/thread.hpp>  

using namespace std;

class task {
public:
    string mname;
    bool completed;
    void start()
    {
        int a = 0;
        for (int i=0 ; i<10000; i++)
        {
            for (int j=0 ; j<100000; j++)
            {
                a= i*2;
            }
        }
        this->completed = true;
    }
    task(string name)
    {
        mname = name;
        completed = false; 
    }
};

class taskManager{
    public:
        boost::thread_group threads;
        void startTask( string name )
        {
            //add new task to vector list           
            mtasks.push_back( task(name) );
            // execute start() on a new thread
            threads.create_thread( boost::bind( &task::start, &mtasks.back()) );
        }
        int tasksTotal()
        {
            return mtasks.size();
        }
        string taskInfo(int i)
        {
            string compstr("Not Completed");
            if ( mtasks[i].completed == true )
            {
                compstr = "Completed";
            }
            return mtasks[i].mname + " " + compstr; 
        }
    private:
        vector<task> mtasks; 
};

int main(int argc, char* argv[])  
{
    string cmd, temp;
    stringstream os;
    bool quit = false;
    taskManager mm;

    cout << "PROMPT>";

    while (quit == false)
    {
        //Wait for a valid command from user
        getline(cin,cmd);

        // Reset stringstream and assign new cmd string
        os.clear(); 
        os << "";
        os << cmd;
        //parse input string
        while (os >> temp) 
        {               
            if ( temp.compare("task") == 0 )
            {
                while (os >> temp) { mm.startTask( temp ); }                     
            }
            if ( temp.compare("info") == 0 )
            { 
                // Returns a list of all completed and not completed tasks
                for (int i = 0; i<mm.tasksTotal(); i++)
                {
                    cout << mm.taskInfo(i).c_str() << endl;
                }                           
            }
            if ( temp.compare("quit") == 0 ){ quit = true; }
        }

        cout << "PROMPT>";
    }

    mm.threads.join_all();      

    return 0;  
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T15:41:44.783

方法中的代码有问题`taskManager::startTask`：

```
mtasks.push_back( task(name) );
// execute start() on a new thread
threads.create_thread( boost::bind( &task::start, &mtasks.back()) 
```

这里的问题是，在推回一项新任务时，您的向量可能必须重新分配一些空间，从而使对旧向量元素的引用无效，例如以下调用`taskinfo`将引用错误的元素。当您删除旧元素时，您的堆会以某种方式损坏。

一个简单的解决方法是在类的构造函数中为向量保留一些空间`taskManager`，但是您可能应该更改任务/任务管理器模型的设计。另一种方法是使用 a `std::deque`，因为它不会重新分配内存。

# facebook-javascript-sdk - 使用 Fb.ui 提要方法根本不显示消息或 user_prompt_message 使用默认消息

> ID：10373315
> 
> 赞同：0
> 
> 时间：2012-04-29T15:22:40.907
> 
> 标签：facebook-javascript-sdk, message

嗨，我是 facebook 开发的新手，想使用下面的代码发布提要，但消息和 user_message_prompt 都没有出现在文本框中。我是否需要在我的应用程序中设置某些内容以允许这样做。我得到的只是默认消息。

我尝试了以下两种方法，它们都没有显示消息，也没有显示 user_message_prompt 消息。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
    <title></title>
</head>
<body>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>

        FB.init({ appId: "174009502722096", status: true, cookie: true, xfbml: true });

        function postToFeed() {

        var publish = {
        method: 'feed',
        message: 'Martin Okello presents share',
        caption: 'Visit MartinLayooinc',
        description: (
        'Martin Okello, aka the medallion presents his application'
        ),
        link: 'http://www.martinlayooinc.co.uk',
        picture: 'http://www.martinlayooinc.co.uk/topImages/bigMedallion.jpg',
        user_message_prompt: 'Share MartinLayooinc Software with friends!'
       };

       FB.ui(publish, 
       function(response)
       {
       alert('MartinLayooInc has been posted!!')
       });

       function callback(response) {
       document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
       }

       FB.ui(obj, callback);

       }

</script>
    <!--from here-->
    <div id="fb-root">
        <p>
            <a onclick='postToFeed(); return false;'><img src="topImages/facebook_button.png" style="height:20px; width:80px;" />
            </a>
        </p>
        <p id='msg'>
        </p>
    </div>
</body>
</html>
<script type="text/javascript">
    window.fbAsyncInit = function () {
        FB.init({ appId: '174009502722096', status: true, cookie: true, xfbml: true });

        /* All the events registered */
        FB.Event.subscribe('auth.login', function (response) {
            // do something with response
            login();
        });
        FB.Event.subscribe('auth.logout', function (response) {
            // do something with response
            logout();
        });

        FB.getLoginStatus(function (response) {
            if (response.session) {
                // logged in and connected user, someone you know
                login();
            }
        });
    };
    (function () {
        var e = document.createElement('script');
        e.type = 'text/javascript';
        e.src = document.location.protocol +
            '//connect.facebook.net/en_US/all.js';
        e.async = true;
        document.getElementById('fb-root').appendChild(e);
    } ());
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:53:38.350

我相信它们都已被弃用。message 参数现在被忽略了，我没有在文档中看到其他参数。显然，Facebook 希望用户将自己的信息放入文本字​​段，而不是被迫或提示。在此处查看主要信息页面：

[https://developers.facebook.com/docs/reference/javascript/FB.ui/](https://developers.facebook.com/docs/reference/javascript/FB.ui/)

和这里的详细页面：

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

滚动到底部，您将看到支持的参数。希望它不会改变你的游戏规则。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-08T14:33:45.203

你应该做这样的事情

```
window.fbAsyncInit = function() {FB.init({
appId: '{YOUR APP ID}',
xfbml: true,
version: 'v2.1'
});
};
(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) {
return;
}
js = d.createElement(s);
js.id = id;
js.src = "//connect.facebook.net/en_US/sdk.js";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

function share_prompt() {
FB.ui({
method: 'feed',
name: 'Your App Name',
link: 'https://example.com',
picture: 'http://example.com/img/fbicon.jpg',
caption: 'Your Caption here',
description: 'some sort of your own description',
message: 'Your Message goes here mate'
 });
 } 
```

然后调用如下函数；

```
<div><a href="#" onclick="share_prompt()">Click to open your dialog</a>      </div> 
```

# python - scikit learn：创建自定义 CountVectorizer 和 ChiSquare 的问题

> ID：10373317
> 
> 赞同：3
> 
> 时间：2012-04-29T15:22:51.610
> 
> 标签：python, machine-learning, scikits, scikit-learn

我有以下代码（基于[此处](http://scikit-learn.org/dev/modules/feature_extraction.html)的示例），但它不起作用：

```
[...]
def my_analyzer(s):
    return s.split()
my_vectorizer = CountVectorizer(analyzer=my_analyzer)
X_train = my_vectorizer.fit_transform(traindata)

ch2 = SelectKBest(chi2,k=1)
X_train = ch2.fit_transform(X_train,Y_train)
[...] 
```

调用时出现以下错误`fit_transform`：

```
AttributeError: 'function' object has no attribute 'analyze' 
```

根据文档， CountVectorizer 应该像这样创建：`vectorizer = CountVectorizer(tokenizer=my_tokenizer)`. 但是，如果我这样做，我会收到以下错误：`"got an unexpected keyword argument 'tokenizer'"`.

我实际的 scikit-learn 版本是 0.10。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:14:55.343

您正在查看 0.11（即将发布）的文档，其中矢量化器已经过大修。检查[0.10 的文档](http://scikit-learn.org/0.10/modules/feature_extraction.html)，其中没有`tokenizer`参数并且`analyzer`应该是实现`analyze`方法的对象：

```
class MyAnalyzer(object):
    @staticmethod
    def analyze(s):
        return s.split()

v = CountVectorizer(analyzer=MyAnalyzer()) 
```

[http://scikit-learn.org/dev](http://scikit-learn.org/dev) is the documentation for the upcoming release (which may change at any time), while [http://scikit-learn/stable](http://scikit-learn/stable) has the documentation for the current stable version.

# scala - 动态混合特征

> ID：10373318
> 
> 赞同：38
> 
> 时间：2012-04-29T15:23:03.627
> 
> 标签：scala, mixins, case-class, traits

有一个特质

```
trait Persisted {
  def id: Long
} 
```

如何实现一个方法，该方法接受任何案例类的实例并返回其副本并混合特征？

该方法的签名如下所示：

```
def toPersisted[T](instance: T, id: Long): T with Persisted 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-30T16:34:45.170

这可以通过宏来完成（自 2.10.0-M3 以来，它正式成为 Scala 的一部分）。[这是您要查找的内容的要点示例](https://gist.github.com/2559714)。

1）我的宏生成一个本地类，它继承自提供的案例类和持久化，就像`new T with Persisted`会做的那样。然后它缓存其参数（以防止多次评估）并创建已创建类的实例。

2）我怎么知道要生成什么树？我有一个简单的应用程序 parse.exe，它打印解析输入代码产生的 AST。所以我只是调用`parse class Person$Persisted1(first: String, last: String) extends Person(first, last) with Persisted`，记下输出并在我的宏中复制它。parse.exe 是`scalac -Xprint:parser -Yshow-trees -Ystop-after:parser`. 有多种探索 AST 的方法，请阅读[“Scala 2.10 中的元编程”](http://scalamacros.org/talks/2012-04-28-MetaprogrammingInScala210.pdf)了解更多信息。

`-Ymacro-debug-lite`3) 如果您将宏扩展作为参数提供给 scalac，则可以对宏扩展进行完整性检查。在这种情况下，所有扩展都将被打印出来，您将能够更快地检测代码生成错误。

编辑。更新了 2.10.0-M7 的示例

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-29T16:23:55.200

使用 vanilla scala 无法实现您想要的。问题是混合如下：

```
scala> class Foo
defined class Foo

scala> trait Bar
defined trait Bar

scala> val fooWithBar = new Foo with Bar
fooWithBar: Foo with Bar = $anon$1@10ef717 
```

创建一个`Foo with Bar`混合，但它不是在运行时完成的。编译器只是生成一个新的匿名类：

```
scala> fooWithBar.getClass
res3: java.lang.Class[_ <: Foo] = class $anon$1 
```

请参阅[Scala 中的动态混合 - 有可能吗？](https://stackoverflow.com/questions/3254232/dynamic-mixin-in-scala-is-it-possible)了解更多信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-29T17:05:29.550

您尝试执行的操作称为记录连接，这是 Scala 的类型系统不支持的。（Fwiw，存在提供此功能的类型系统，例如[this](http://igitur-archive.library.uu.nl/math/2006-1220-202305/leijen_04_first_class_labels.pdf)和[this 。）](http://www.impredicative.com/ur/)

我认为类型类可能适合您的用例，但我无法确定，因为该问题没有提供有关您要解决的问题的足够信息。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-01T12:24:52.893

# 更新

您可以找到一个最新的工作解决方案，它利用 Scala 2.10.0-RC1 的 Toolboxes API 作为[SORM](https://github.com/sorm/sorm/blob/d976aabfd4220aae976609e912128d3690f6f730/src/main/scala/sorm/persisted/PersistedClass.scala)项目的一部分。

* * *

以下解决方案基于 Scala 2.10.0-M3 反射 API 和 Scala Interpreter。它动态创建和缓存从原始案例类继承的类，并混合了特征。由于最大程度地缓存，该解决方案应该为每个原始案例类动态创建一个类，并在以后重用它。

*由于新的反射 API 没有太多公开，也不是很稳定，也没有关于它的教程，但是这个解决方案可能涉及一些愚蠢的重复动作和怪癖。*

以下代码使用 Scala 2.10.0-M3 进行了测试。

## 1\. 持久化.scala

要混入的特征。*请注意，由于程序的更新，我对其进行了一些更改*

```
trait Persisted {
  def key: String
} 
```

## 2\. PersistedEnabler.scala

实际的工作对象

```
import tools.nsc.interpreter.IMain
import tools.nsc._
import reflect.mirror._

object PersistedEnabler {

  def toPersisted[T <: AnyRef](instance: T, key: String)
                              (implicit instanceTag: TypeTag[T]): T with Persisted = {
    val args = {
      val valuesMap = propertyValuesMap(instance)
      key ::
        methodParams(constructors(instanceTag.tpe).head.typeSignature)
          .map(_.name.decoded.trim)
          .map(valuesMap(_))
    }

    persistedClass(instanceTag)
      .getConstructors.head
      .newInstance(args.asInstanceOf[List[Object]]: _*)
      .asInstanceOf[T with Persisted]
  }

  private val persistedClassCache =
    collection.mutable.Map[TypeTag[_], Class[_]]()

  private def persistedClass[T](tag: TypeTag[T]): Class[T with Persisted] = {
    if (persistedClassCache.contains(tag))
      persistedClassCache(tag).asInstanceOf[Class[T with Persisted]]
    else {
      val name = generateName()

      val code = {
        val sourceParams =
          methodParams(constructors(tag.tpe).head.typeSignature)

        val newParamsList = {
          def paramDeclaration(s: Symbol): String =
            s.name.decoded + ": " + s.typeSignature.toString
          "val key: String" :: sourceParams.map(paramDeclaration) mkString ", "
        }
        val sourceParamsList =
          sourceParams.map(_.name.decoded).mkString(", ")

        val copyMethodParamsList =
          sourceParams.map(s => s.name.decoded + ": " + s.typeSignature.toString + " = " + s.name.decoded).mkString(", ")

        val copyInstantiationParamsList =
          "key" :: sourceParams.map(_.name.decoded) mkString ", "

        """
        class """ + name + """(""" + newParamsList + """)
          extends """ + tag.sym.fullName + """(""" + sourceParamsList + """)
          with """ + typeTag[Persisted].sym.fullName + """ {
            override def copy(""" + copyMethodParamsList + """) =
              new """ + name + """(""" + copyInstantiationParamsList + """)
          }
        """
      }

      interpreter.compileString(code)
      val c =
        interpreter.classLoader.findClass(name)
          .asInstanceOf[Class[T with Persisted]]

      interpreter.reset()

      persistedClassCache(tag) = c

      c
    }
  }

  private lazy val interpreter = {
    val settings = new Settings()
    settings.usejavacp.value = true
    new IMain(settings, new NewLinePrintWriter(new ConsoleWriter, true))
  }

  private var generateNameCounter = 0l

  private def generateName() = synchronized {
    generateNameCounter += 1
    "PersistedAnonymous" + generateNameCounter.toString
  }

  // REFLECTION HELPERS

  private def propertyNames(t: Type) =
    t.members.filter(m => !m.isMethod && m.isTerm).map(_.name.decoded.trim)

  private def propertyValuesMap[T <: AnyRef](instance: T) = {
    val t = typeOfInstance(instance)

    propertyNames(t)
      .map(n => n -> invoke(instance, t.member(newTermName(n)))())
      .toMap
  }

  private type MethodType = {def params: List[Symbol]; def resultType: Type}

  private def methodParams(t: Type): List[Symbol] =
    t.asInstanceOf[MethodType].params

  private def methodResultType(t: Type): Type =
    t.asInstanceOf[MethodType].resultType

  private def constructors(t: Type): Iterable[Symbol] =
    t.members.filter(_.kind == "constructor")

  private def fullyQualifiedName(s: Symbol): String = {
    def symbolsTree(s: Symbol): List[Symbol] =
      if (s.enclosingTopLevelClass != s)
        s :: symbolsTree(s.enclosingTopLevelClass)
      else if (s.enclosingPackageClass != s)
        s :: symbolsTree(s.enclosingPackageClass)
      else
        Nil

    symbolsTree(s)
      .reverseMap(_.name.decoded)
      .drop(1)
      .mkString(".")
  }

} 
```

## 3.沙盒.scala

测试应用

```
import PersistedEnabler._

object Sandbox extends App {
  case class Artist(name: String, genres: Set[Genre])
  case class Genre(name: String)

  val artist = Artist("Nirvana", Set(Genre("rock"), Genre("grunge")))

  val persisted = toPersisted(artist, "some-key")

  assert(persisted.isInstanceOf[Persisted])
  assert(persisted.isInstanceOf[Artist])
  assert(persisted.key == "some-key")
  assert(persisted.name == "Nirvana")
  assert(persisted == artist)  //  an interesting and useful effect

  val copy = persisted.copy(name = "Puddle of Mudd")

  assert(copy.isInstanceOf[Persisted])
  assert(copy.isInstanceOf[Artist])
  //  the only problem: compiler thinks that `copy` does not implement `Persisted`, so to access `key` we have to specify it manually:
  assert(copy.asInstanceOf[Artist with Persisted].key == "some-key")
  assert(copy.name == "Puddle of Mudd")
  assert(copy != persisted)

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-29T16:40:12.040

虽然不可能在创建对象后组合它，但您可以使用类型别名和定义结构进行非常广泛的测试来确定对象是否具有特定组合：

```
 type Persisted = { def id: Long }

  class Person {
    def id: Long = 5
    def name = "dude"
  }

  def persist(obj: Persisted) = {
    obj.id
  }

  persist(new Person) 
```

任何带有 a 的对象`def id:Long`都符合 Persisted 的条件。

通过隐式转换可以实现我认为您正在尝试做的事情：

```
 object Persistable {
    type Compatible = { def id: Long }
    implicit def obj2persistable(obj: Compatible) = new Persistable(obj)
  }
  class Persistable(val obj: Persistable.Compatible) {
    def persist() = println("Persisting: " + obj.id)
  }

  import Persistable.obj2persistable
  new Person().persist() 
```

# jquery - 让 3 张图像贴在父 div 底部的中心，彼此相邻

> ID：10373319
> 
> 赞同：1
> 
> 时间：2012-04-29T15:23:06.073
> 
> 标签：jquery, html, css, positioning

以上基本上是我的问题。我已经浏览了关于 SO 的其他一些问题，但最接近的一个是大约*1 个*元素，它不必位于中心。

我基本上在一个不可见的包装 div 中有三个彼此相邻的图像，在这里可以找到：http: [//korilu.nl/maurits/search.html](http://korilu.nl/maurits/search.html)

我想要的是防止两个小的图像在单击时上下移动。
我试着按照上面提到的建议放在`position:relative;`包装纸和`position:absolute; bottom:0;`图像上，但是它们不再在中间，而是在左上角彼此重叠。我该怎么做呢？

**编辑：**或顶部或中心，我不在乎，只要他们停止移动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T15:43:29.363

You just need to alter your jQuery script:

```
$("a").click(function(){
                $(current).animate({
                    opacity: .5,
                    height: '100px', 'margin-top': '100px'
                });
                $("img", this).animate({height: '200px','margin-top': '0px', opacity: 1});
                current = "#" + $(this).find("img").attr("id");
            }); 
```

Note the two new occurences of margin-top. Tried it on your site and works as you want it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T15:39:03.673

```
#icons
{
  text-align:center;
  height:20%;
  display: block;
  width: 405px;
  margin: 0 auto;
}
#icons a
{
  float: left;
} 
```

摆脱您现在在其中一个链接上的边距/填充。我将宽度设置为 405px，因为您可能有一些样式会将其中一个推到下一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T15:40:46.223

尝试使包装器 div 也相对，然后绝对属性将从包装器而不是整个文档中计数。

然后你可以通过设置 left:0; 来定位。底部：0；和权利：0；底部：0；用于左右图标。

# symfony - 教义：通过数组中的属性获取实体

> ID：10373324
> 
> 赞同：1
> 
> 时间：2012-04-29T15:23:57.100
> 
> 标签：symfony, doctrine-orm, many-to-many, fetch

我有一个具有“类别”属性的实体图像。Categories 是 Doctrine 的 ArrayCollection 的一个实例，拥有不同的 Category 对象。

我现在想获取包含 Category 对象“main”的所有 Image 对象。

使用普通属性，这看起来像这样：

```
$repository->findBy(array('category' => 'main')); 
```

这是否也可以通过 Array 属性实现，还是我必须在 Category 端获取图像？

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:32:24.787

该`->findBy()`方法仅适用于关系的拥有方。

您还可以在存储库中创建自定义方法：

```
public function findByCategoryName($categoryName)
{
    return $this
        ->createQueryBuilder('image')
        ->innerJoin('image.categories', 'category')
        ->where('category.name = :categoryName')
        ->setParameter('categoryName', $categoryName)
        ->getQuery()
        ->getResult()
    ;
} 
```

# html - 如何在css文件中左右切换？

> ID：10373325
> 
> 赞同：11
> 
> 时间：2012-04-29T15:24:02.000
> 
> 标签：html, css, localization

我有一个既是 RTL 又是 LTR 的 HTML django 模板页面（取决于用户的语言环境）。

此页面的 CSS 存储在另一个文件中，并且该文件当前是静态的。

根据语言环境左右切换属性的最佳方法是什么？CSS 中是否有针对此问题的内置属性？（不想用JS，感觉太乱了）

我有：

```
.elem{
    left: 10px; 
    bottom: 10px;
    position: absolute;
} 
```

我想要这样的东西：

```
.elem{
    right-or-left-according-to-html-dir: 10px; 
    bottom: 10px;
    position: absolute;
} 
```

目前我能想到的唯一选择是将文件也转换为模板：

```
.elem{
    {{dir}}: 10px; 
    bottom: 10px;
    position: absolute;
} 
```

有没有更好的方法可以让我的 CSS 文件保持静态？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T16:21:01.063

您说您正在根据语言环境制作文档 rtl 或 ltr。在这种情况下，您可以使用`:lang()`选择器根据区域设置使文档的某些部分具有样式。

*   [http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/:lang](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/:lang)
*   [http://www.w3.org/TR/css3-selectors/#lang-pseudo](http://www.w3.org/TR/css3-selectors/#lang-pseudo)

如果您想要更多支持（IE7+），您可以使用属性选择器`selector[lang='en']`，尽管这只会测试指定选择器上的属性。

*   [http://www.w3.org/TR/css3-selectors/#attribute-selectors](http://www.w3.org/TR/css3-selectors/#attribute-selectors)

如果您在 html 元素中指定语言（`lang="en"`例如，您应该使用该语言），您可以将 html 选择器放在您要在某些语言环境中应用的类的前面：

```
.elem {
    margin: 0 10px 0 0;
    color: blue;
}

html[lang='en'] .elem {
    margin: 0 0 0 10px;
} 
```

更好的是，如果您指定了`dir`属性，您可以直接在 css 中使用它，如下所示：

```
.elem[dir='rtl'] {
    margin: 0 10px 0 0;
} 
```

请注意，对于 body 元素上的类，您将始终依赖于该类始终存在。但是`dir`and`lang`属性可以在更具体的范围内指定，例如单个 div，并且仍然可以在 css 中与“其他”阅读方向的样式一起使用。

**编辑**

最后，展望未来，CSS 选择器“4 级”将包含一个伪标签，该标签将能够过滤文本方向性。当然，这些规范正在开发中，浏览器可能需要数年时间才能可靠地使用它：

[http://dev.w3.org/csswg/selectors4/#dir-pseudo](http://dev.w3.org/csswg/selectors4/#dir-pseudo)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T15:30:49.873

如何通过一个特殊的类将方向添加到你的 body 元素，然后你可以编写相应的选择器：

```
<body class="rtl"> 
```

在 CSS 中：

```
.rtl .myclass {
   text-align: right;
} 
```

# vb.net - 拆分字符串？VB.net

> ID：10373327
> 
> 赞同：2
> 
> 时间：2012-04-29T15:24:33.403
> 
> 标签：vb.net

有人可以指出我正确的方向。我有一个简单的 vb.net 应用程序，可以将 PDF 转换为 txt 并逐行读取以创建 csv 文件。原始 Pdf 已更改，我需要修改我的代码。例如，从下面的行中，我如何提取或拆分每个类别？例如，仅`xxxxxxxx`用于技术 ID`DOE JOHN`和`xxxxxxxx`来自帐号？

```
line =  "Tech ID: xxxxxxxxxx Name: DOE, JOHN Account #: xxxxxxxx" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T15:29:24.967

您可以使用以下`Split`方法：

```
Dim line As String = "Tech ID: xxxxxxxxxx Name: DOE, JOHN Account #: xxxxxxxx"
Dim separators() As String = {"Tech ID:", "Name:", "Account #:"}
Dim result() As String
result = line.Split(separators, StringSplitOptions.RemoveEmptyEntries) 
```

# ios - NSOperation 与 Grand Central Dispatch

> ID：10373331
> 
> 赞同：484
> 
> 时间：2012-04-29T15:24:46.693
> 
> 标签：ios, concurrency, grand-central-dispatch, nsoperation, nsoperationqueue

我正在学习 iOS 的并发编程。到目前为止，我已经阅读了[`NSOperation`/`NSOperationQueue`](http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/)和[`GCD`](https://en.wikipedia.org/wiki/Grand_Central_Dispatch). **使用over****和反之****的原因是什么？`NSOperationQueue``GCD`**

听起来两者都一样，`GCD`并且从用户那里`NSOperationQueue`抽象出显式创建。`NSThreads`然而，这两种方法之间的关系对我来说并不清楚，所以任何反馈都值得赞赏！

* * *

## 回答 #1

> 赞同：538
> 
> 时间：2012-04-29T20:16:49.503

`GCD`是一个基于 C 的低级 API，可以非常简单地使用基于任务的并发模型。`NSOperation`并且`NSOperationQueue`是做类似事情的 Objective-C 类。`NSOperation`最先引入，但从[10.5](https://developer.apple.com/documentation/foundation/nsoperation)和[iOS 2](https://developer.apple.com/documentation/foundation/nsoperation)开始，`NSOperationQueue`朋友内部使用`GCD`.

通常，您应该使用适合您需要的最高抽象级别。这意味着您通常应该使用`NSOperationQueue`而不是`GCD`，除非您需要做一些`NSOperationQueue`不支持的事情。

请注意，这`NSOperationQueue`不是 GCD 的“简化”版本。事实上，有很多事情你可以`NSOperationQueue`用 pure 做很多工作`GCD`。（例如：带宽受限的队列，一次只运行 N 个操作；建立操作之间的依赖关系。两者都非常简单`NSOperation`，`GCD`使用`NSOperation`. 除非您有理由不这样做，否则请利用他们的工作。

**警告**：另一方面，如果您真的只需要发送一个块，并且不需要`NSOperationQueue`提供的任何附加功能，那么使用 GCD 没有任何问题。只要确保它是适合这项工作的工具。

* * *

## 回答 #2

> 赞同：379
> 
> 时间：2012-04-30T02:04:20.353

根据[我对相关问题的回答](https://stackoverflow.com/a/7654476/19679)，我不同意 BJ 并建议您首先查看 GCD 而不是 NSOperation / NSOperationQueue，除非后者提供了 GCD 不需要的东西。

在 GCD 之前，我在我的应用程序中使用了很多 NSOperations / NSOperationQueues 来管理并发。然而，自从我开始定期使用 GCD 以来，我几乎完全用块和调度队列替换了 NSOperations 和 NSOperationQueues。这来自我在实践中使用这两种技术的方式，以及我对它们执行的分析。

首先，在使用 NSOperations 和 NSOperationQueues 时存在大量开销。这些是 Cocoa 对象，它们需要被分配和释放。在我编写的一个以 60 FPS 渲染 3-D 场景的 iOS 应用程序中，我使用 NSOperations 来封装每个渲染帧。当我对此进行分析时，这些 NSOperations 的创建和拆除占运行应用程序中 CPU 周期的很大一部分，并且正在减慢速度。我用简单的块和 GCD 串行队列替换了这些，这种开销消失了，从而显着提高了渲染性能。这不是我注意到使用 NSOperations 开销的唯一地方，而且我在 Mac 和 iOS 上都看到了这一点。

其次，在使用 NSOperations 时很难匹配基于块的调度代码的优雅。将几行代码包装在一个块中并分派它以在串行或并发队列上执行非常方便，而创建自定义 NSOperation 或 NSInvocationOperation 来执行此操作需要更多的支持代码。我知道你可以使用 NSBlockOperation，但你也可以向 GCD 发送一些东西。在我看来，将这些代码封装在与应用程序中的相关处理内联的块中，可以比使用单独的方法或封装这些任务的自定义 NSOperations 更好地组织代码。

NSOperations 和 NSOperationQueues 仍然有很好的用途。GCD 没有真正的依赖概念，其中 NSOperationQueues 可以设置非常复杂的依赖图。在少数情况下，我为此使用 NSOperationQueues。

总的来说，虽然我通常主张使用完成任务的最高抽象级别，但这是我主张使用 GCD 的较低级别 API 的一个案例。在我与之交谈过的 iOS 和 Mac 开发人员中，绝大多数人选择使用 GCD 而不是 NSOperations，除非他们的目标是不支持它的操作系统版本（iOS 4.0 和 Snow Leopard 之前的那些）。

* * *

## 回答 #3

> 赞同：121
> 
> 时间：2016-10-15T21:36:14.740

`GCD`是一个基于 C 的低级 API。
`NSOperation`并且`NSOperationQueue`是 Objective-C 类。
`NSOperationQueue`是客观的 C 包装器`GCD`。如果您使用的是 NSOperation，那么您就是在隐式使用*Grand Central Dispatch。*

**GCD 相对于 NSOperation 的优势：**
*i。实现*
对于`GCD`实现非常轻量级
`NSOperationQueue`是复杂和重量级的

**NSOperation 相对于 GCD 的优势：**

*一世。控制操作*
，您可以暂停、取消、恢复`NSOperation`

*ii.*
您可以在两个操作之间设置依赖关系的依赖关系*不会*`NSOperations`
启动，直到其所有依赖关系都返回 true 以表示完成。

*iii. State of Operation*
可以监控一个操作或操作队列的状态。准备、执行或完成

*iv. Max Number of Operation*
您可以指定可以同时运行的最大排队操作数

**什么时候去`GCD`或者`NSOperation`**
什么时候你想要更多地控制队列（上面提到的）使用`NSOperation` ，以及你想要更少开销的简单情况（你只想做一些工作“进入后台”而几乎没有额外的工作）使用`GCD`

**参考：**
[https://cocoacasts.com/choosing-between-nsoperation-and-grand-central-dispatch/](https://cocoacasts.com/choosing-between-nsoperation-and-grand-central-dispatch/) [http://iosinfopot.blogspot.in/2015/08/nsthread-vs-gcd-vs-nsoperationqueue.html](http://iosinfopot.blogspot.in/2015/08/nsthread-vs-gcd-vs-nsoperationqueue.html) [http ://nshipster.com/nsoperation/](http://nshipster.com/nsoperation/)

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2014-01-02T08:08:16.847

NSOperation 优于 GCD 的另一个原因是 NSOperation 的取消机制。例如，一个像 500px 的 App 展示了几十张照片，使用 NSOperation 我们可以在滚动表格视图或集合视图时取消对不可见图像单元格的请求，这可以大大提高 App 性能并减少内存占用。GCD 不能轻易支持这一点。

同样使用 NSOperation，KVO 也成为可能。

[这](http://eschatologist.net/blog/?p=232)是 Eschaton 的一篇文章，值得一读。

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2012-04-30T00:50:41.983

GCD 确实比 NSOperationQueue 低级，它的主要优点是它的实现非常轻量级，并且专注于无锁算法和性能。

NSOperationQueue 确实提供了 GCD 中不可用的功能，但它们的成本不菲，NSOperationQueue 的实现复杂且重量级，涉及大量锁定，并且仅以非常最小的方式在内部使用 GCD。

如果您需要 NSOperationQueue 提供的设施，请使用它，但如果 GCD 足以满足您的需求，我建议您直接使用它以获得更好的性能，显着降低 CPU 和电源成本以及更大的灵活性。

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2014-08-14T20:45:01.603

NSQueueOperations 和 GCD 都允许通过释放 UI 应用程序主线程在后台在单独的线程上执行繁重的计算任务。

好吧，根据之前的帖子，我们看到 NSOperations 具有 addDependency 以便您可以按顺序将您的操作一个接一个地排队。

但我还阅读了有关 GCD 串行队列的信息，您可以使用 dispatch_queue_create 在队列中创建运行您的操作。这将允许以顺序方式一个接一个地运行一组操作。

NSQueueOperation 相对于 GCD 的优势：

1.  它允许添加依赖项并允许您删除依赖项，因此对于一个事务，您可以使用依赖项顺序运行，而对于其他事务同时运行，而 GCD 不允许以这种方式运行。

2.  如果操作在队列中，则很容易取消操作，如果它正在运行，则可以将其停止。

3.  您可以定义最大并发操作数。

4.  您可以暂停他们在队列中的操作

5.  您可以找到队列中有多少待处理的操作。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-08-06T00:41:19.287

GCD 很容易使用——如果你想在后台做一些事情，你需要做的就是编写代码并将它分派到后台队列中。用 NSOperation 做同样的事情需要做很多额外的工作。

NSOperation 的优点是（a）您有一个可以向其发送消息的真实对象，以及（b）您可以取消 NSOperation。这不是微不足道的。您需要继承 NSOperation，您必须正确编写代码，以便取消和正确完成任务都能正常工作。所以对于简单的事情你使用 GCD，对于更复杂的事情你创建一个 NSOperation 的子类。（有 NSInvocationOperation 和 NSBlockOperation 的子类，但它们所做的一切都使用 GCD 更容易完成，因此没有充分的理由使用它们）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-08-13T11:40:15.220

嗯，NSOperations 只是一个建立在 Grand Central Dispatch 之上的 API。因此，当您使用 NSOperations 时，您实际上仍在使用 Grand Central Dispatch。只是 NSOperations 为您提供了一些您可能喜欢的花哨功能。您可以使某些操作依赖于其他操作，在汇总项目后重新排序队列，以及其他类似的事情。事实上，ImageGrabber 已经在使用 NSOperations 和操作队列了！ASIHTTPRequest 在后台使用它们，如果您愿意，您可以配置它用于不同行为的操作队列。那么你应该使用哪个？无论哪个对您的应用有意义。对于这个应用程序，它非常简单，所以我们直接使用 Grand Central Dispatch，不需要 NSOperation 的花哨功能。但是，如果您的应用程序需要它们，请随意使用它！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-03T13:30:50.200

我同意@Sangram 和其他答案，但想补充几点。如果我错了，请纠正我。

我认为现在@Sangram 答案的前两点无效**(i. Control On Operation ii. Dependencies)**。我们也可以通过使用 GCD 来实现这两个。试图通过代码来解释（不要关注代码质量，仅供参考）

```
func methodsOfGCD() {

    let concurrentQueue = DispatchQueue.init(label: "MyQueue", qos: .background, attributes: .concurrent)

    //We can suspend and resume Like this
    concurrentQueue.suspend()
    concurrentQueue.resume()

    //We can cancel using DispatchWorkItem
    let workItem = DispatchWorkItem {
        print("Do something")
    }
    concurrentQueue.async(execute: workItem)
    workItem.cancel()

    //Cam add dependency like this.
    //Operation 1
    concurrentQueue.async(flags: .barrier) {
        print("Operation1")
    }

    //Operation 2
    concurrentQueue.async(flags: .barrier) {
        print("Operation2")
    }

    //Operation 3.
    //Operation 3 have dependency on Operation1 and Operation2\. Once 1 and 2 will finish will execute Operation 3\. Here operation queue work as a serial queue.
    concurrentQueue.async(flags: .barrier) {
        print("Operation3")

    }

} 
```

# android - 安卓：键盘

> ID：10373332
> 
> 赞同：0
> 
> 时间：2012-04-29T15:24:52.373
> 
> 标签：android, android-layout, android-intent, android-emulator

我想在选择 EditText 时显示一个键盘，即当我们想向 EditText 提供一些输入时从屏幕底部出现的键盘。

我需要为此从头开始编写代码还是有内置的东西？我不知道如何达到同样的效果。

请建议

问候，

# jquery - 如何防止 div 包含在循环插件的循环中

> ID：10373342
> 
> 赞同：0
> 
> 时间：2012-04-29T15:26:24.180
> 
> 标签：jquery

我正在使用循环插件

```
 <div id="rol">
    <img />
    <img />
     . 
     .
    </div>

       $("#rol").cycle(); 
```

我也在制作相同的 div (id = rol) 可调整大小。使用 jquery ui

```
 $("#rol").resizable(); 
```

现在在使其可调整大小后，jquery ui 将动态添加一些`<div>`作为 div (id = rol) 的子项，因此它看起来像

```
 <div id="rol">
    <img />
    <img />
     . 
     .
     <div></div>
     <div></div>
     .
     .
   </div> 
```

现在我的问题是循环插件也在其循环中使用那些动态添加的 div。如何防止这些 div 包含在循环中？本身有什么选择，`cycle plugin`所以它只会循环`img tags`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T15:35:25.380

```
$('#rol').cycle({ slideExpr: 'img' }); 
```

# plsqldeveloper - Oracle SQL Developer - 区分大小写

> ID：10373343
> 
> 赞同：1
> 
> 时间：2012-04-29T15:26:31.297
> 
> 标签：plsqldeveloper

我正在创建过程，但 SQL Developer 抛出了一个奇怪的错误。我做一个截图。

![在此处输入图像描述](../Images/fe582b72c882fed6108f03cbfc963e85.png)

表列的名称带有小写字母。我写了小字！但是 SQL Developer 说，我写了大写字母，大写字母当然与真实的列名不匹配......

对不起我的英语，希望你能理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:16:49.750

如果您*绝对*确定您确实使用“ID_pr”样式创建了列名，那么在查询时，您需要使用引号查询它们。

```
SELECT  "PRACOVNIK"."ID_pr" .. 
```

像这样。

演示此的 SQLFiddle 示例：[http ://sqlfiddle.com/#!4/93b49/5](http://sqlfiddle.com/#!4/93b49/5)

# qt - 将 QPixmap 与在其上绘制的数据连接起来

> ID：10373347
> 
> 赞同：0
> 
> 时间：2012-04-29T15:26:51.763
> 
> 标签：qt, qpixmap

我正在寻找一种方法来连接 QPixmap 和正在写入的数据，以便最终我可以准确记录屏幕上当前的内容。

```
void QPainter::drawRects(const QRectF *rects, int rectCount) 
```

这是来自 qpainter.cpp 的示例函数（在 Qt SDK 中的 ./src/gui/painting 中找到）我想要得到的是矩形正在写入的像素图（在 device()-> 的情况下） devType() 是一个像素图）。所以我有这个检查：

```
if(this->device()->devType() == QInternal::Pixmap) {
    const QPixmap *Pixmap = dynamic_cast<const QPixmap *>(this->device());
    qDebug() << "rect2pixmap - address: "<<Pixmap<<" - key: "<<Pixmap.cacheKey();
} 
```

我尝试找到 Qpixmap 的内存地址，并根据正在写入屏幕的 QPixmap 的内存地址检查它。

```
void QPainter::drawPixmap(const QPointF &p, const QPixmap &pm)
{
    const QWidget *widget = dynamic_cast<const QWidget *>(this->device());
    qDebug() << "pixmap - address: "<<&pm << " - key: "<<pm.cacheKey();
    [...] 
```

但是地址都不同。我也尝试过使用缓存键，但我遇到了同样的问题。

这是一个示例控制台输出：

```
rect2pixmap - address:  0x7fffac1dc9c0  - key: 72057594037927937
rect2pixmap - address:  0x7fffac1d9f80  - key: 72057598332895233 
rect2pixmap - address:  0x7fffac1dcd60  - key: 72057602627862529
rect2pixmap - address:  0x7fffac1dcd60  - key: 72057606922829825
rect2pixmap - address:  0x7fffac1dd100  - key: 72057611217797121
rect2pixmap - address:  0x7fffac1df2e0  - key: 72057615512764417 
pixmap - address:  0x7fffac1dffa0  - key:  197568495616 
pixmap - address:  0x7fffac1e0170  - key:  214748364800 
pixmap - address:  0x7fffac1e0340  - key:  231928233984 
pixmap - address:  0x7fffac1e0510  - key:  249108103168 
pixmap - address:  0x7fffac1e06e0  - key:  261993005056
rect2pixmap - address:  0x7fffac1dadb0   - key: 72057619807731713 
```

那么我要问的是，在写入矩形的像素图和稍后打印到屏幕上的像素图之间是否存在链接？如果没有调用 Pixmap，我可以安全地假设屏幕上没有显示矩形吗？

如果有什么不清楚的问题，请告诉我，我会尽力澄清。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:11:43.643

[@Stephen Chu](https://stackoverflow.com/users/307339/stephen-chu)提到的更简单的方法是使用[`QGraphicsScene`](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html).

这是一个在您单击矩形时使用 qdebug 打印的示例。

**clickrect.hpp**

```
#ifndef _HANDLER_HPP_
#define _HANDLER_HPP_

#include <QtGui>

class ClickRect : public QGraphicsRectItem
{
    public:
        ClickRect(
            const QRect& rect,
            const QColor& color,
            const QString& name,
            QGraphicsItem* parent = 0);

    protected:
        virtual void mousePressEvent(QGraphicsSceneMouseEvent* event);

    private:
        QString mName;
};

#endif 
```

**点击rect.cpp**

```
#include "clickrect.hpp"

ClickRect::ClickRect(
    const QRect& rect,
    const QColor& color,
    const QString& name,
    QGraphicsItem* par
) :
    QGraphicsRectItem(rect, par),
    mName(name)
{
    setBrush(QBrush(color));
}

void ClickRect::mousePressEvent(QGraphicsSceneMouseEvent* ev)
{
    qDebug() << mName;
} 
```

**测试.cpp**

```
#include <QtGui>
#include "clickrect.hpp"

int main(int argc, char** argv)
{
    QApplication app(argc, argv);

    QGraphicsScene scene;
    QGraphicsView view(&scene);
    view.show();

    ClickRect rect_a(QRect(0, 0, 30, 30), QColor("#FDD"), "A");
    ClickRect rect_b(QRect(40, 0, 30, 30), QColor("#DFD"), "B");

    scene.addItem(&rect_a);
    scene.addItem(&rect_b);

    return app.exec();
} 
```

**CMakeLists.txt**

```
cmake_minimum_required(VERSION 2.8)

find_package(Qt4 4.8 REQUIRED QtCore QtGui)
include(${QT_USE_FILE})

add_executable(test
    test.cpp
    clickrect.hpp
    clickrect.cpp
    ${MOC_FILES})
target_link_libraries(test ${QT_LIBRARIES}) 
```

# javascript - 背景图片的高度和宽度适应每个屏幕尺寸

> ID：10373349
> 
> 赞同：0
> 
> 时间：2012-04-29T15:27:14.307
> 
> 标签：javascript, jquery, resolution, onload, screen-resolution

我已经在我的第一个网站上工作了一段时间。我有 CSS 工作，但我仍然需要修复一些简单但没有那么简单的问题。在 index.html 文件中，我在 html 中附加了一张背景图片。因此，我通过 CSS 将全屏背景图片附加到 html 标记。这是CSS代码：

```
html{   background: no-repeat center center fixed; 
-webkit-background-size: cover;     -moz-background-size: cover;
-o-background-size: cover;  -ms-background-size: cover;
background-size: cover; } 
```

但我正在通过 Javascript 加载图片。我的目标是拥有一组图片，每次用户加载网站或触发它时，都会显示一张随机图片。所以我在 Javascript 中有这段代码，它正在工作：

```
$(document).ready(function()  {
  var randomImages = ['img1','img2','img3','img4','img5'];
   var rndNum = Math.floor(Math.random() * randomImages.length);
   $("html").css({
      background: "url(_img/bg/index_rnd/" + randomImages[rndNum] + ".jpg)
      no-repeat"
    });
}); 
```

所有这些代码都在工作。图片是从数组中选择的，加载后随机显示。但是我有一个很大的问题，我找不到明确的答案，我被困住了。我希望调整**宽度和高度**，以便将整个图片显示在屏幕上。当然每个屏幕都是不同的……我读了一些关于 innerhieght 和 innerwidth 属性的东西，但我不知道如何继续。我应该怎么做才能将图片调整为每个不同的屏幕？

此时图片的分辨率为 1024x683。我有一台屏幕为 15""、分辨率为 1440x900 的电脑。我的图片总是有点像素化，而且显示的高度很长，所以图片的一部分被剪掉了。

问题：

我应该怎么做才能将图片调整为每个不同的屏幕分辨率？

推荐的图片分辨率，以便正确显示图片？

有没有办法将图片显示为屏幕的确切尺寸？即使它的原始格式有所修改？

收到答复后回复 ---------------------------------------------------------- --------------- 新问题 --------------------------------- ------------------------------------------

您好，我终于有时间使用代码了……它确实可以正常工作。我只需要将 url 添加到我的图像文件夹和魔术！所以我的代码实际上是这样的：

```
$(window).load(function() {
    var randomImages = ['img1','img2','img3','img4','img5'];
    var rndNum = Math.floor(Math.random() * randomImages.length);

     var $win = $(this);
     var $img = $('#background').attr('src', '_img/bg/index_rnd/' + randomImages[rndNum] + '.jpg').css({'position':'fixed','top':0,'left':0});
        function resize() {
            if (($win.width() / $win.height()) < ($img.width() / $img.height())) {
              $img.css({'height':'100%','width':'auto'});
            } else {
              $img.css({'width':'100%','height':'auto'});
            }
        }
        $win.resize(function() { resize(); }).trigger('resize');
    }); 
```

关于我的 html，我现在有一个带有 id 背景的图像。我想按照说明将图像居中。所以我的问题是我是否应该把这张图片放在一个div中。如果是这样，我怎样才能使这个图像在屏幕中心居中？？？

另一个问题，在我将图像附加到 html 之前，现在附加到图像上。因此，图像正在影响我身体中的其他元素。我怎样才能让这个图像显示在我身体的所有其他元素后面？！？！例如，当我的 img id="background" 加载时，我的 logo 和 header_bg 会被转换。

你能帮我吗？？？

这是我的任何疑问的html...

```
<body>
        <img id="background" src="" alt="" />
        <div id="header_img">
            <nav>
                <div id="header-bg-left">
                    <div id="nav-content">
                        <div id="logo">
                                <a href="index.html"><img alt="./_img/nav/logo.rosa.png" src="">logo</a>
                        </div>
                        <div id="categories">       
                                <ul>
                                    <li id="nav-quien"><a href="#">quien es</a>
                                        <ul>
                                            <li id="nav-biografia" class="drop1"><a href="biografia.html">biografia</a></li>
                                            <li id="nav-curriculum" class="drop2"><a href="curriculum.html">curriculum</a></li>
                                        </ul>
                                    </li>
                                    <li id="nav-galeria" class="marginli"><a href="gallery.html">galeria</a>
                                        <ul>
                                            <li id="nav-gal-nat" class="drop3"><a href="gallery.html">paisaje natural</a></li>
                                            <li id="nav-gal-urb" class="drop4"><a href="gallery.html">paisaje urbano</a></li>
                                        </ul>
                                    </li>
                                    <li id="nav-prensa" class="marginli"><a href="prensa.html">prensa</a></li>
                                    <li id="nav-links" class="marginli"><a href="links.html">links</a></li>
                                    <li id="nav-contacto" class="marginli"><a href="contacto.html">contacto</a></li>
                                </ul>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
        <footer>    
            <div id="footer-bg-left">
                <div id="foot-content">
                    <p>Diseñado por <a href="mailto:daniramirezescudero@gmail.com">Daniel. R-Escudero</a> <span>|</span> Todos los derechos reservados <span>|</span> <a href="mailto:info@scalesplanet.com">info@rosasusaeta.com</a> <span>|</span><a href="http://www.linkedin.com/"><img src="./_img/footer/logo.linked.png"></a> <a href="http://www.facebook.com/"><img src="./_img/footer/logo.facebook.png"></a></p>
                </div>
            </div>  
        </footer>
    </body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T15:35:48.483

*2012 年 11 月 29 日更新*

> *   **演示：** [http ://so.devilmaycode.it/height-and-width-of-background-picture-adapt-to-each-screen-size/](http://so.devilmaycode.it/height-and-width-of-background-picture-adapt-to-each-screen-size/)

```
 $(window).resize(function() {
            resize();
        });
        $(function() {
            $('#background').attr('src', 'http://cdn.com/bg.png').css({
                'position' : 'fixed',
                'top' : 0,
                'left' : 0
            });
            resize();             
        });
        function resize() {
            var $img = $('#background');
            if (($(window).width() / $(window).height()) < ($img.width() / $img.height())) {
                $img.css({
                    'height' : '100%',
                    'width' : 'auto'
                });
            } else {
                $img.css({
                    'width' : 'auto',
                    'height' : $(window).height() + 'px'
                });
            }
        }

<body>
  <img id="background" src="" alt=""/>
</body> 
```

# mysql - 有没有办法重写这个查询以作为 SQL 视图工作

> ID：10373352
> 
> 赞同：2
> 
> 时间：2012-04-29T15:27:25.650
> 
> 标签：mysql, sql, phpmyadmin

我设法编写了以下查询，效果很好。我的问题是我多次使用它，我认为它有自己的观点，但是当我让 phpmyadmin 为我创建视图时，过去需要 0.0060 秒的查询现在需要 6.2094 秒。

我的查询：

```
SELECT tr.uuid, tr.creator,
(
    SELECT
    GROUP_CONCAT(name)
    FROM tags as t1
    WHERE t1.uuid = tr.uuid and t1.type = "name"
    GROUP BY t1.uuid
) as names,
(
    SELECT GROUP_CONCAT(name)
    FROM tags as t2
    WHERE t2.uuid = tr.uuid and t2.type = "tag"
    GROUP BY t2.uuid
) as tags

FROM `tags` as tr 
```

phpMyAdmin 的转换：

```
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` 
SQL SECURITY DEFINER 
VIEW `textagname` AS 
select 
`tr`.`uuid` AS `uuid`,
`tr`.`creator` AS `creator`,
(
    select group_concat(`t1`.`name` separator ',') AS `GROUP_CONCAT(name)` 
    from `tags` `t1` 
    where ((`t1`.`uuid` = `tr`.`uuid`) and (`t1`.`type` = 'name')) 
    group by `t1`.`uuid`
) AS `names`,
(
    select group_concat(`t2`.`name` separator ',') AS `GROUP_CONCAT(name)`
    from `tags` `t2` 
    where ((`t2`.`uuid` = `tr`.`uuid`) and (`t2`.`type` = 'tag')) 
    group by `t2`.`uuid`
) AS `tags` 
from `tags` `tr` 
```

关于如何让我的视图更省时的任何想法？

ps：`tags`表结构如下：

```
Column   Type         Null  Default  Comments
-------  -----------  ----  -------  ------------------
uuid     varchar(36)  No             key of texture
name     varchar(64)  No             tag name
creator  varchar(36)  Yes   NULL     creator of the tag
type     varchar(36)  No             name, or tag 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:38:53.620

无法真正解释为什么您的查询在通过 phpMyAdmin 转换为视图时变慢，但我会尝试以下查询：

```
SELECT
  uuid,
  creator,
  GROUP_CONCAT(CASE type WHEN 'name' THEN name END) AS names,
  GROUP_CONCAT(CASE type WHEN 'tag'  THEN name END) AS tags
FROM tags
WHERE type IN ('name', 'tag')
GROUP BY
  uuid,
  creator 
```

# java - 当前线程调用多个方法

> ID：10373356
> 
> 赞同：1
> 
> 时间：2012-04-29T15:27:41.920
> 
> 标签：java, multithreading

假设我们有这些课程并阅读评论

```
class Work {
void doWork(){  }
void commit(){}       
}
class MyRunable implements Runnable {
run(){
   Work  work=new Work();
   work.doWork();
//i can't write work.commit() here, because sometimes i want Thread runs both methods       
 //and sometimes runs only doWork()
 }
}
class Tasks{
main(){
MyRunable myRunable=new MyRunable();
Thread t=new Thread(myRunable);
t.start();
//suppose now i need to call commit() method by the same thread (t)
//how can i do that 
}
} 
```

我也不想使用构造函数来确定我是否要调用这两种方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:37:15.300

您可以尝试使用具有单个线程的线程池并根据需要保持排队方法：

```
class Tasks {
    public static void main(String[] args) {            

        ExecutorService exec = Executors.newSingleThreadExecutor();
        final Work work = new Work();
        exec.submit(new Runnable() {
                public void run() {
                    work.doWork();
                }
            });
        // later
        exec.submit(new Runnable() {
                public void run() {
                    work.commit();
                }
            });

    }
} 
```

这样，两个方法将由同一个线程按顺序执行，但分别执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:38:21.077

将参数添加到您的类`MyRunnable`。将此参数称为“runingMode”。它可能是一个枚举：

```
enum RunningMode {
    DO_WORK {
        public void work(Work work) {
             work.doWork();
        }
    },
    COMMIT {
        public void work(Work work) {
             work.commit();
        }
    };
    public abstract void work();
} 
```

现在你的班级`MyRunnable`应该有模式列表：

```
class MyRunable implements Runnable {
    private Collection<RunningMode> modes;
    MyRunable(Collection<RunningMode> modes) {
         this.modes = modes;
    }
} 
```

实现`run()`方法如下：

```
 Work  work=new Work();
  for (RunningMode mode : modes) {
        mode.work(work);
  }
  work.doWork(); 
```

创建您的类的实例，将您当前需要的模式传递给它：

```
MyRunable myRunable=new MyRunable(Arrays.asList(RunningMode.DO_WORK, RunningMode.COMMIT)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T15:42:03.767

您可以使用匿名类。

```
final boolean condition = ...
Thread t = new Thread(new Runnable() {
  public void run() {
    Work work=new Work();
    work.doWork();
    if(condition)
       work.commit();
}});
t.start(); 
```

# windows-7 - 在 Win 7 Prof 64 位中将 Office Word 7 连接到 ODBC 源

> ID：10373361
> 
> 赞同：1
> 
> 时间：2012-04-29T15:28:08.377
> 
> 标签：windows-7, ms-word, odbc, ms-office

> Microsoft 数据链接错误 - 由于初始化提供程序错误，测试连接失败。未指定的错误。

我使用安装了 64 位 MySQL ODBC 5.1 驱动程序的 Win 7 ODBC 数据源管理器创建了一个用户 DSN ODBC 源，当我在 MySql 连接器/ODBC 数据源配置面板中进行测试时，我得到了“连接成功”响应。

在 Word 中，我导航到数据连接向导并选择 ODBC DSN 并单击下一步，然后选择上面创建的 ODBC 源，然后打开数据链接属性窗口，其中“连接”选项卡处于活动状态。

在选择正确的数据源名称、输入用户名、输入密码并单击“测试连接”后，我收到上述错误消息。

类似的程序在 win XP Prof 32 位笔记本电脑上运行良好。

2 月 26 日，Bob 遇到了类似的问题，并建议将 PROVIDER 留空即可解决问题。如果在“数据链接属性”窗口中，我激活了 PROVIDER 选项卡并尝试选择底部的空白，我会被告知必须选择一个 PROVIDER。

如果我错了，或者还有什么需要做的，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T09:49:44.993

有完全相同的问题。Win7 x64 专业版。Excel 2007 和 MySQL ODBC 驱动程序 5.2.2 x64。

我在控制面板 -> 管理工具 -> 数据源中创建了一个 ODBC 数据源。测试连接正常，一切正常。

然后我尝试了与 MS Excel 的连接。我导航到数据连接向导并选择 ODBC DSN 并单击下一步，然后选择上面创建的 ODBC 源，然后打开数据链接属性窗口，其中“连接”选项卡处于活动状态。连接测试失败，无法让它工作。

我通过安装 32 位版本的 ODBC 驱动程序解决了这个问题！32位安装后Excel ODBC DSN正常工作，并给我工作表上的表格数据OK！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T06:01:43.670

只是有同样的问题。我的机器是Win7 x64。在 ODBC 中，测试连接成功。但在 Excel 中没有。

发现修复的方法是安装 Connector 32 Bits 版本。这可能是因为 Ms.Office 仍在 x86 中，无法连接到 x64 驱动程序。

# jquery - jQuery Popup 中的窗口调整大小问题

> ID：10373363
> 
> 赞同：0
> 
> 时间：2012-04-29T15:28:15.197
> 
> 标签：jquery, popup

我开始自己编写一个非常简单的 jQuery Popup。

这是代码

```
<script type="text/javascript">
 $(document).ready(function(){
    $("#pop").click(function(){
         openPopup();
    });
    $("#close").click(function(){
        closePopup();
    });
  });

function openPopup(){
$("#overlay_form").css({
    left: ($(window).width() - $('#overlay_form').width()) / 2,
    top: ($(window).width() - $('#overlay_form').width()) / 7,
    position:'absolute'
});

$("#overlay_form").fadeIn(1000);

   }
 function closePopup(){
$("#overlay_form").fadeOut(500);
}

$(window).bind('resize',openPopup);

</script> 
```

一切正常。但问题出在这段代码中

```
 $(window).bind('resize',openPopup); 
```

此代码用于将弹出窗口保持在浏览器的中心。但是，即使在我关闭弹出窗口之后，如果我调整浏览器的大小，此代码也会再次打开弹出窗口。

我需要在代码的某处使用 if 条件！在哪里使用以及如何使用？请给我一个解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:39:25.513

从函数中删除`.fadeIn()`并将其放在点击处理程序中。

```
$("#pop").click(function(){
  $("#overlay_form").fadeIn(1000);
  resizePop();
});

function resizePop(){
  if(!$("#overlay_form").is(':visible')){
    return;
  } 
  $("#overlay_form").css({
      left: ($(window).width() - $('#overlay_form').width()) / 2,
      top: ($(window).width() - $('#overlay_form').width()) / 7,
      position:'absolute'
  });
}

$(window).bind('resize',resizePop); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T04:36:34.817

您正在寻找的解决方案非常简单——当您找到它时。. .

在您的文档就绪函数中添加一个在浏览器调整大小事件期间触发的函数；在该功能中重新定位您的对话框：

```
$(document).ready(function () {

    $(window).resize(function() {
        $('#overlay_form').dialog('option', 'position', 'center');
    });

}); 
```

顺便说一句，当您打开对话框时，无需指定顶部或左侧，因为默认位置是中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T15:33:01.650

首先`bind`不推荐使用，`.on()`从 jQuery 1.7 开始使用，接下来，当弹出框淡出时，您的事件处理**失败，因此将 resize then 事件处理程序限制为一个函数会导致脚本中断。**

```
$(window).on('resize',function() {
   openPopup();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T15:36:45.307

```
if( $("#overlay_form").is(':visible') ) {
    // it's showing, so recenter it
}
else {
    // it's hidden, so you don't care
} 
```

我建议您将重新居中代码与打开代码分开，以便您可以根据情况更具体地调用它们。

# python - 值 <= 最大值

> ID：10373367
> 
> 赞同：1
> 
> 时间：2012-04-29T15:28:36.167
> 
> 标签：python, bit, operations

我想知道，是否可以使用位操作来实现类似的效果：

```
if a > maximum: a = maximum 
```

哪里“最大”可以是一个随机数？

在我当前的代码中有许多类似的行。当然可以使用：

```
def foo(a, max=512): return a if a<max else max 
```

只是好奇是否有更优雅和有效的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T15:39:35.953

无需为此定义自己的函数，`min`并且`max`已经内置：

```
a = min(maximum, a) 
```

根据[雷蒙德的回答](https://stackoverflow.com/a/10373703/573626)，也可以使用位操作：

```
a = maximum ^ ((a ^ maximum) & -(a < maximum)) 
```

但在绝大多数情况下，性能优势并不值得让代码非常难以理解。此外，这仅适用于整数，而该`min`函数可用于所有可比较的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T16:16:53.893

使用*max*和*min*将使代码更清晰。

话虽如此，可以使用位旋转：http: [//graphics.stanford.edu/~seander/bithacks.html#IntegerMinOrMax](http://graphics.stanford.edu/~seander/bithacks.html#IntegerMinOrMax)

# emacs - org-babel 中的 noweb 样式编织

> ID：10373368
> 
> 赞同：6
> 
> 时间：2012-04-29T15:28:52.417
> 
> 标签：emacs, org-mode, literate-programming, org-babel

我将 Emacs 23 与 Org 7.8.04 一起使用。我的代码结构如下：

```
#+TITLE: hello, world!

#+BEGIN_SRC python :tangle yes :noweb yes
<<go_function>>
if __name__ == "__main__":
    go()
#+END_SRC

Define =go_function= as follows.

#+name:go_function
#+BEGIN_SRC python
def go:
    print "hello, world!"
#+END_SRC 
```

当我尝试*编织*文档时，`<<go_function>>`第一个代码块中的 html 也被导出为 html，因此我有两个 .html 的 html 导出`<<go_function>>`。我希望 `<<go_function>>`导出为指向文档末尾实际定义的链接。我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T17:34:02.123

尝试更改`:noweb yes`为`:noweb tangle`. 该手册在这种情况下非常有用（请参阅[http://orgmode.org/manual/noweb.html](http://orgmode.org/manual/noweb.html)）。

# sql-server-2005 - 如何在 FOR XML PATH 语句中添加额外的属性

> ID：10373369
> 
> 赞同：1
> 
> 时间：2012-04-29T15:29:10.107
> 
> 标签：sql-server-2005, attributes, for-xml-path

有没有办法添加如下附加属性？

前...

```
 <Event id="CE1127552523644210147">
    <Title>General Surgery Orange Rotation </Title>
    <Duration>671</Duration>
    <InstructionalMethod>Clinical Rotation</InstructionMethod>
  </Event> 
```

后：

```
 <Event id="CE1127552523644210147">
    <Title>General Surgery Orange Rotation </Title>
    <Duration>671</Duration>
    <InstructionalMethod Primary='True'>Clinical Rotation</InstructionMethod>
  </Event> 
```

原始查询：

```
select 
    id as '@id',
    Title,
    Duration,
    InstructionalMethod
from MyTable
for XML PATH ('Event'), ROOT('Events') 
```

基于对 Stack 的搜索，我确实尝试了这个，但没有为元素返回数据。

```
select 
    id as '@id',
    Title,
    Duration,
    'True' AS 'InstructionalMethod/@Primary'
from mytable
for XML PATH ('Event'), ROOT('Events'), TYPE 
```

结果：

```
 <Event id="CE1127552523644210147">
    <Title>General Surgery Orange Rotation </Title>
    <Duration>671</Duration>
    <InstructionalMethod Primary="True" />
  </Event> 
```

谢谢你的帮助。

布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:01:07.147

你很接近了——但如果你想要这个元素，你也必须在那里有那条线！

尝试这个：

```
SELECT
    id as '@id',
    Title,
    Duration,
    'True' AS 'InstructionalMethod/@Primary',
    InstructionalMethod   -- add this line to get the actual value as element
FROM 
    dbo.mytable
FOR XML PATH ('Event'), ROOT('Events'), TYPE 
```

# objective-c - 获取 Apple Event 的可用描述

> ID：10373378
> 
> 赞同：0
> 
> 时间：2012-04-29T15:30:58.470
> 
> 标签：objective-c, string, cocoa, parsing, nsstring

所以我有我的代码来获取当前正在播放的歌曲，方法是创建一个 AppleScript 对象并使用 AppleScript 的返回值作为发送给用户的信息。可悲的是，它抛出了一堆我需要摆脱的其他垃圾。

这是我的代码：

```
-(NSString *)getCurrentTrack {
    NSString *currentTrack = @"";
    NSAppleScript *getTrack = [[NSAppleScript alloc] initWithSource:@"tell application \"iTunes\" to get the name of the current track"];

    currentTrack = [getTrack executeAndReturnError:nil];

    return currentTrack;

    //tell application "iTunes" to get the name of the current track
} 
```

currentTrack 的返回值为：

```
<NSAppleEventDescriptor: 'utxt'("track name here")> 
```

所以我需要摆脱`<NSAppleEventDescriptor: 'utxt'(" and the ")> at the end`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:16:44.983

[getTrack executeAndReturnError:nil] return a NSAppleEventDescriptor

To get a NSString from a NSAppleEventDescriptor :

```
NSAppleEventDescriptor *resultDescriptor = [getTrack executeAndReturnError:nil];
return [resultDescriptor stringValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:43:58.247

我希望这有效：

```
-(NSString *)getCurrentTrack {
    NSString *currentTrack = @"";
    NSAppleScript *getTrack = [[NSAppleScript alloc] initWithSource:@"tell application \"iTunes\" to get the name of the current track"];

    currentTrack = [getTrack executeAndReturnError:nil];

    currentTrack = [currentTrack stringByReplacingOccurrencesOfString:@"\"" withString:@"'"];
    NSArray *left = [currentTrack componentsSeparatedByString:@"('"];
    NSString *text2 = [left objectAtIndex:1];
    NSArray *right = [text2 componentsSeparatedByString:@"')"];

    return [right objectAtIndex:0];

    //tell application "iTunes" to get the name of the current track
} 
```

它应该`track name here`使用`<NSAppleEventDescriptor: 'utxt'("track name here")>`您给我的示例返回，但是我手动转义了`"`，因为我创建了一个像这样的假响应：`currentTrack = @"<NSAppleEventDescriptor: 'utxt'(\"track name here\")>";`

请告诉我它是否有效，-Joseph Rautenbach（你认识我，哈哈）

# javascript - 从 chrome 扩展中注入函数/变量到页面

> ID：10373379
> 
> 赞同：4
> 
> 时间：2012-04-29T15:31:12.480
> 
> 标签：javascript, google-chrome, google-chrome-extension, content-script

我正在编写一个 Chrome 扩展程序，为用户访问的某些页面添加功能。
为此，我需要注入一些页面需要能够调用的变量和函数。
这些变量/函数在内容脚本中生成。

但是，由于内容脚本在一个隐蔽的环境中运行，所以主机页面无法访问它。

根据这篇文章： [http](http://code.google.com/chrome/extensions/content_scripts.html#host-page-communication) ://code.google.com/chrome/extensions/content_scripts.html#host-page-communication 内容脚本和主机页面可以通过添加事件通过 DOM 进行通信。
但这是一种可怕的做事方式，我真的很想看到一些轻松注入方法/变量的方法。

有这种可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:46:33.623

如果它仍然对任何人感兴趣，我已经找到了一种通过消息在内容脚本和页面本身之间进行通信的解决方案。

在发送脚本上是这样的：

```
window.postMessage({ type: "messageType", params: { param: "value", anotherParam: "value" } }, "*"/*required!*/); 
```

然后在接收脚本上做这样的事情：

```
window.addEventListener("message", function(event) {
        // We only accept messages from ourselves
        if (event.source != window)
            return;

        switch (event.data.type) {
        case "blabla":
            // do blabla
            // you can use event.data.params to access the parameters sent from page.
            break;
        case "another blabla":
            // do another blabla 
            break;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:37:52.557

这是我在我的扩展程序上编码的方式，[http ://pagexray.com/extension/](http://pagexray.com/extension/)

在你的 manifest.json

```
 "content_scripts": [
    {
        "matches": ["http://*/*"],
        "js": ["script.js"]
    }
], 
```

在你的 script.js 上

```
(function(){
  var script = document.createElement('script');
  script.src = "http://example.com/external.js";
  script.addEventListener('load', function() { });
  document.head.appendChild(script);
})(); 
```

# json - 从控制台使用 json 和 curl 的工具

> ID：10373381
> 
> 赞同：7
> 
> 时间：2012-04-29T15:31:29.343
> 
> 标签：json, curl, elasticsearch

我正在使用 ElasticSearch 迈出第一步，并从命令行测试我目前正在使用 curl 的东西。但是这有点烦人，因为我必须在文本编辑器上输入所有内容并粘贴到控制台中（控制台中没有制表符格式），并且您获得的 json 输出未格式化。

所以我想知道是否有许多 sql 控制台的等价物来处理 json 数据，以便更容易测试和使用 json 休息 Web 服务。

你用什么工具来完成这类任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T19:18:47.450

首先，如果您获得的 json 输出未格式化，请附加`?pretty=1`到任何 url。结果会好很多。`python -m json.tool`如果您有 Python 2.6+ ，另一种选择是将输出通过管道传输到。我喜欢后一个选项，因为我将它保存到一个 shell 函数中，并且可以`| j`在任何输出 json 的命令之后简单地键入。更短更通用。

对于发出 curl 命令，有几个选项。最通用的解决方案是使用整个命令创建一个 shell 脚本。例如：

```
curl -s localhost:9200/foo/_search -d'
  {"query":
     {"query_string":
        {"query":"foo*"}}}' | python -m json.tool 
```

与其在 shell 提示符下粘贴，不如将其保存在文件中。然后只需调整源并根据需要经常运行它。

```
% sh query 
```

对此的一种变体是使用 Emacs。我用它`curl`在缓冲区区域上运行，操纵结果等，`shell-command-on-region`或者`M-|`在那里是一个不错的选择。所以对于上面的脚本，我可以发出`M-| sh RET`而不是切换到 shell。Vim 允许你做类似的事情。

我还没有检查过这个，但很多人似乎喜欢 elasticsearch-head。它是一个 UI，将发出查询并为您提供结构化结果。 [http://mobz.github.com/elasticsearch-head/](http://mobz.github.com/elasticsearch-head/)

**更新**：我最近注意到 Perl 的 JSON 模块附带一个方便的命令行实用程序，称为`json_pp`该函数，类似于 Python 的`json.tool`. 如果您安装`JSON::XS`还有一个（更快的）`json_xs`垃圾箱。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T18:44:54.853

我发现了另一个看起来很方便的工具

[http://stedolan.github.com/jq/tutorial/](http://stedolan.github.com/jq/tutorial/)

```
curl ideasba.org/api/ideas/1 | jq .

  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   525  100   525    0     0    990      0 --:--:-- --:--:-- --:--:--  2488
{
  "created": "2012-09-22T05:20:00Z",
  "author": {
    "nickname": "opensas",
    "created": "2012-09-22T01:40:00Z",
    "id": 2,
... 
```

它有几个使用 json 的选项，比如过滤

```
curl ideasba.org/api/ideas/1 | jq .votes
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   525  100   525    0     0    809      0 --:--:-- --:--:-- --:--:--  2441
{
  "neg": 1,
  "pos": 8
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T01:28:17.343

[https://github.com/micha/jsawk](https://github.com/micha/jsawk)是最好的解决方案。

JSAWK 和 Resty 规则 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T13:59:12.063

我强烈推荐[Chrome 的 Sense 插件](https://chrome.google.com/webstore/detail/sense/doinijnbnggojdlcjifpdckfokbbfpbo)。它为您提供智能自动完成、JSON 语法检查和整理，以及漂亮的语法高亮输出。它正在积极开发中，当我想在会谈中展示请求时，它是我选择的工具。

# cocoa - 在 Cocoa 应用程序中使用 Cairo

> ID：10373386
> 
> 赞同：3
> 
> 时间：2012-04-29T15:32:28.237
> 
> 标签：cocoa, quartz-graphics, cairo

我知道[Cairo](http://cairographics.org)支持 Quartz 输出，但是如何在 Cocoa 应用程序中实现这样的事情呢？我还没有在文档中找到任何很好的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T01:09:20.087

您可以通过调用`CGContextRef`从 an获取 a 。然后，您可以从.`NSView``[[[myView window] graphicsContext] graphicsPort]``CGContextRef`

# web-services - 入门 - Web 服务

> ID：10373387
> 
> 赞同：0
> 
> 时间：2012-04-29T15:32:31.807
> 
> 标签：web-services, soap, wsdl, web

我开始使用网络服务。所以任何人都可以向我推荐任何教程、任何书籍、示例或任何可以让我在这个领域领先的东西。我对此完全陌生，我正在寻找一个很好的参考指南来帮助我理解这一点。非常感谢任何帮助。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:36:54.923

你可以试试[Udacity](http://www.udacity.com/)的课程，相对不错，从头开始。[谷歌代码大学](http://code.google.com/edu/)也有很多很棒的教程！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:36:38.903

总是从阅读开始。紧接着，练习。

[维基文章](http://en.wikipedia.org/wiki/Web_service)

[W3教程](http://www.w3schools.com/webservices/default.asp)

[肥皂](http://www.w3schools.com/soap/soap_intro.asp)

[xml 啧啧](http://www.w3schools.com/xml/default.asp)

# android - android 上的 sqlite 需要帮助，来自 thenewboston 的教程

> ID：10373391
> 
> 赞同：3
> 
> 时间：2012-04-29T15:33:03.320
> 
> 标签：android, database, sqlite

我是android开发的初学者，我按照*newboston*网站的教程进行学习。但是我不明白为什么代码在那里不起作用，当我检查我的数据库的创建时，我没有看到任何奇怪的东西。你能帮我吗？我会很高兴理解这些错误并继续我在 android 开发方面的学习。

当我启动我的 avd 并单击更新时，我有“finnaly”“good”，但也记录了一个错误。当我单击视图查看我的数据时，会弹出一个对话框，显示消息“不幸的是，SQLiteExample 已停止”

对不起，很长的帖子，但就像我是一个初学者一样，我给你我能给你的所有代码。

SQLiteExample.java

```
package exercice.thenewboston;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class SQLiteExample extends Activity implements OnClickListener
{
    Button  sqlUpdate, sqlView;
    EditText    sqlName, sqlHotness;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        sqlUpdate = (Button) findViewById(R.id.bSQLUpdate);
        sqlName = (EditText) findViewById(R.id.etSQLName);
        sqlHotness = (EditText) findViewById(R.id.etSQLHotness);

        sqlView = (Button) findViewById(R.id.bSQLopenView);
        sqlView.setOnClickListener(this);
        sqlUpdate.setOnClickListener(this);
    }

    public void onClick(View arg0){
        switch (arg0.getId())
        {
            case R.id.bSQLUpdate:

            boolean didItWork = true;
            try
            {
                String name = sqlName.getText().toString();
                String hotness = sqlHotness.getText().toString();

                HotOrNot entry = new HotOrNot(SQLiteExample.this);
                entry.open();
                entry.createEntry(name, hotness);
                entry.close();
            }
            catch(Exception e )
            {
                didItWork = false;
                String error = e.toString();
                Dialog d = new Dialog(this);
                d.setTitle("CATCH");
                TextView tv = new TextView(this);
                tv.setText(error);
                d.setContentView(tv);
                d.show();
            }

            finally
            {
                if (didItWork)
                {
                    Dialog d = new Dialog(this);
                    d.setTitle("FINALLY");
                    TextView tv = new TextView(this);
                    tv.setText("GOOD");
                    d.setContentView(tv);
                    d.show();
                }
            }
            break;
            case R.id.bSQLopenView:
                Intent i = new Intent("exercice.thenewboston.SQLVIEW");
                startActivity(i);
            break;
        }
    }
    } 
```

HotOrNot.java

```
package exercice.thenewboston;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class HotOrNot
{
    public static final String  KEY_ROWID           = "_id";
    public static final String  KEY_NAME            = "persons_name";
    public static final String  KEY_HOTNESS         = "persons_hotness";

    private static final String DATABASE_NAME       = "HotOrNotdb";
    private static final String DATABASE_TABLE      = "peopleTable";
    private static final int    DATABASE_VERSION    = 1;

    private DbHelper            ourHelper;
    private final Context       ourContext;
    private SQLiteDatabase      ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper
    {

        public DbHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_NAME + " TEXT NOT NULL, " + KEY_HOTNESS + " TEXT NOT NULL);");
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            db.execSQL("DROP TABLE IF EXITS " + DATABASE_TABLE);
            onCreate(db);
        }
    }

    public HotOrNot(Context c)
    {
        ourContext = c;
    }

    public HotOrNot open() throws SQLException
    {
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close()
    {
        ourHelper.close();
    }

    public long createEntry(String name, String hotness)
    {
        ContentValues cv = new ContentValues();
        cv.put(KEY_NAME, name);
        cv.put(KEY_HOTNESS, hotness);
        return ourDatabase.insert(DATABASE_TABLE, null, cv);
    }

    public String getData()
    {
        String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_HOTNESS};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iHotness = c.getColumnIndex(KEY_HOTNESS);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
        {
            result = result + c.getString(iRow) + " " + c.getString(iName) + " " + c.getString(iHotness) + "\n";
        }

        return result;

    }
} 
```

SQLView.java

```
package exercice.thenewboston;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class SQLView extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sqlview);
        TextView tv  = (TextView) findViewById(R.id.tvSQLinfo);
        HotOrNot info = new HotOrNot(this);
        info.open();
        String data = info.getData();
        info.close();
        tv.setText(data);
    }
} 
```

res -> 布局 -> main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/TextView1"
        android:text="Name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

    </TextView>

    <EditText
        android:id="@+id/etSQLName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

    </EditText>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hotness scale 1 to 10">
    </TextView>

    <EditText
        android:id="@+id/etSQLHotness"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

    </EditText>

    <Button
        android:id="@+id/bSQLUpdate"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Update SQLite Database" />

    <Button
        android:id="@+id/bSQLopenView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="View">

    </Button>

</LinearLayout> 
```

res --> 布局 --> sqlview.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id= "@+id/tableLayout1">

        <TableRow>
           <TextView android:text="Names"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1">
           </TextView>

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="Hotness"
                android:layout_weight="1">
            </TextView>

        </TableRow>

    </TableLayout>

    <TextView
        android:id="@+id/tvSQLinfo"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="get info from db">
    </TextView>

</LinearLayout> 
```

启动时记录日志，然后将数据放在字段上，单击更新，然后单击查看

```
04-29 16:01:58.217: I/dalvikvm(530): threadid=3: reacting to signal 3
04-29 16:01:58.277: I/dalvikvm(530): Wrote stack traces to '/data/anr/traces.txt'
04-29 16:01:58.627: D/gralloc_goldfish(530): Emulator without GPU emulation detected.
04-29 16:01:58.737: I/dalvikvm(530): threadid=3: reacting to signal 3
04-29 16:01:58.757: I/dalvikvm(530): Wrote stack traces to '/data/anr/traces.txt'
04-29 16:02:20.867: I/SqliteDatabaseCpp(530): sqlite returned: error code = 1, msg = table peopleTable has no column named persons_hotness, db=/data/data/exercice.thenewboston/databases/HotOrNotdb
04-29 16:02:20.945: E/SQLiteDatabase(530): Error inserting persons_hotness=4 persons_name=rt
04-29 16:02:20.945: E/SQLiteDatabase(530): android.database.sqlite.SQLiteException: table peopleTable has no column named persons_hotness: , while compiling: INSERT INTO peopleTable(persons_hotness,persons_name) VALUES (?,?)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:260)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:112)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1718)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1591)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at exercice.thenewboston.HotOrNot.createEntry(HotOrNot.java:69)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at exercice.thenewboston.SQLiteExample.onClick(SQLiteExample.java:46)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.view.View.performClick(View.java:3511)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.view.View$PerformClick.run(View.java:14105)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.os.Handler.handleCallback(Handler.java:605)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.os.Looper.loop(Looper.java:137)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at java.lang.reflect.Method.invokeNative(Native Method)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at java.lang.reflect.Method.invoke(Method.java:511)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-29 16:02:20.945: E/SQLiteDatabase(530):  at dalvik.system.NativeStart.main(Native Method)
04-29 16:02:26.688: I/SqliteDatabaseCpp(530): sqlite returned: error code = 1, msg = no such column: persons_hotness, db=/data/data/exercice.thenewboston/databases/HotOrNotdb
04-29 16:02:26.698: D/AndroidRuntime(530): Shutting down VM
04-29 16:02:26.698: W/dalvikvm(530): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-29 16:02:26.848: E/AndroidRuntime(530): FATAL EXCEPTION: main
04-29 16:02:26.848: E/AndroidRuntime(530): java.lang.RuntimeException: Unable to start activity ComponentInfo{exercice.thenewboston/exercice.thenewboston.SQLView}: android.database.sqlite.SQLiteException: no such column: persons_hotness: , while compiling: SELECT _id, persons_name, persons_hotness FROM peopleTable
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.os.Looper.loop(Looper.java:137)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-29 16:02:26.848: E/AndroidRuntime(530):  at java.lang.reflect.Method.invokeNative(Native Method)
04-29 16:02:26.848: E/AndroidRuntime(530):  at java.lang.reflect.Method.invoke(Method.java:511)
04-29 16:02:26.848: E/AndroidRuntime(530):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-29 16:02:26.848: E/AndroidRuntime(530):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-29 16:02:26.848: E/AndroidRuntime(530):  at dalvik.system.NativeStart.main(Native Method)
04-29 16:02:26.848: E/AndroidRuntime(530): Caused by: android.database.sqlite.SQLiteException: no such column: persons_hotness: , while compiling: SELECT _id, persons_name, persons_hotness FROM peopleTable
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1449)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1485)
04-29 16:02:26.848: E/AndroidRuntime(530):  at exercice.thenewboston.HotOrNot.getData(HotOrNot.java:75)
04-29 16:02:26.848: E/AndroidRuntime(530):  at exercice.thenewboston.SQLView.onCreate(SQLView.java:17)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.app.Activity.performCreate(Activity.java:4465)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-29 16:02:26.848: E/AndroidRuntime(530):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-29 16:02:26.848: E/AndroidRuntime(530):  ... 11 more
04-29 16:02:27.018: I/dalvikvm(530): threadid=3: reacting to signal 3
04-29 16:02:27.238: I/dalvikvm(530): Wrote stack traces to '/data/anr/traces.txt'
04-29 16:02:27.338: D/dalvikvm(530): GC_CONCURRENT freed 238K, 6% free 6678K/7047K, paused 19ms+5ms
04-29 16:02:27.388: E/SQLiteDatabase(530): close() was never explicitly called on database '/data/data/exercice.thenewboston/databases/HotOrNotdb' 
04-29 16:02:27.388: E/SQLiteDatabase(530): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1943)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1007)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1051)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:770)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at exercice.thenewboston.HotOrNot.open(HotOrNot.java:55)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at exercice.thenewboston.SQLView.onCreate(SQLView.java:16)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.app.Activity.performCreate(Activity.java:4465)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.os.Looper.loop(Looper.java:137)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at java.lang.reflect.Method.invokeNative(Native Method)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at java.lang.reflect.Method.invoke(Method.java:511)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-29 16:02:27.388: E/SQLiteDatabase(530):  at dalvik.system.NativeStart.main(Native Method)
04-29 16:02:27.527: I/dalvikvm(530): threadid=3: reacting to signal 3
04-29 16:02:27.537: I/dalvikvm(530): Wrote stack traces to '/data/anr/traces.txt'
04-29 16:02:27.837: I/dalvikvm(530): threadid=3: reacting to signal 3
04-29 16:02:27.857: I/dalvikvm(530): Wrote stack traces to '/data/anr/traces.txt'
04-29 16:02:29.787: I/Process(530): Sending signal. PID: 530 SIG: 9 
```

我希望你的帮助， 问候。

更多详情： 回复 SAM 感谢您的回复 Sam。所以我把 DATABASE_VERSION = 2; 和 20

```
@Override
public void onCreate(SQLiteDatabase db)
{
 db.execSQL("DROP TABLE IF EXITS " + DATABASE_TABLE);  // same error if i remove this line

db.execSQL("CREATE TABLE peopleTable ( _id INTEGER PRIMARY KEY AUTOINCREMENT, persons_name TEXT NOT NULL, persons_hotness TEXT NOT NULL);");
} 
```

当我点击更新“Catch.android.database.sqlite.SQLiteException:Near "EXITS":syntax error:while compile: DROP Table if EXITS peopleTable”时，android 上出现消息错误

```
04-29 19:11:50.361: W/dalvikvm(536): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-29 19:11:50.441: E/AndroidRuntime(536): FATAL EXCEPTION: main
04-29 19:11:50.441: E/AndroidRuntime(536): java.lang.RuntimeException: Unable to start activity ComponentInfo{exercice.thenewboston/exercice.thenewboston.SQLView}: android.database.sqlite.SQLiteException: near "EXITS": syntax error: , while compiling: DROP TABLE IF EXITS peopleTable
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.os.Looper.loop(Looper.java:137)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-29 19:11:50.441: E/AndroidRuntime(536):  at java.lang.reflect.Method.invokeNative(Native Method)
04-29 19:11:50.441: E/AndroidRuntime(536):  at java.lang.reflect.Method.invoke(Method.java:511)
04-29 19:11:50.441: E/AndroidRuntime(536):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-29 19:11:50.441: E/AndroidRuntime(536):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-29 19:11:50.441: E/AndroidRuntime(536):  at dalvik.system.NativeStart.main(Native Method)
04-29 19:11:50.441: E/AndroidRuntime(536): Caused by: android.database.sqlite.SQLiteException: near "EXITS": syntax error: , while compiling: DROP TABLE IF EXITS peopleTable
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:134)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:260)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:84)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1899)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1839)
04-29 19:11:50.441: E/AndroidRuntime(536):  at exercice.thenewboston.HotOrNot$DbHelper.onUpgrade(HotOrNot.java:44)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:170)
04-29 19:11:50.441: E/AndroidRuntime(536):  at exercice.thenewboston.HotOrNot.open(HotOrNot.java:57)
04-29 19:11:50.441: E/AndroidRuntime(536):  at exercice.thenewboston.SQLView.onCreate(SQLView.java:16)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.app.Activity.performCreate(Activity.java:4465)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-29 19:11:50.441: E/AndroidRuntime(536):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-29 19:11:50.441: E/AndroidRuntime(536):  ... 11 more
04-29 19:11:50.691: I/dalvikvm(536): threadid=3: reacting to signal 3
04-29 19:11:50.711: I/dalvikvm(536): Wrote stack traces to '/data/anr/traces.txt'
04-29 19:11:51.071: I/dalvikvm(536): threadid=3: reacting to signal 3
04-29 19:11:51.111: I/dalvikvm(536): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:26:06.373

您的 create 语句看起来不错，所以我猜您是否在某个时候更改了表的设计。尝试删除旧表并创建新模式。最简单的方法是将您的升级`DATABASE_VERSION`到 2。

# java - Netbeans不支持Jsf？

> ID：10373392
> 
> 赞同：-1
> 
> 时间：2012-04-29T15:33:38.707
> 
> 标签：java, jsf, netbeans, netbeans-7

我正在 Netbeans 7.1.1 中开发应用程序，但我无法运行该应用程序，因为 netbeans 无法识别 JSF 库？ ![在此处输入图像描述](../Images/de5df0fa21942957a39875af5e07841e.png)

![在此处输入图像描述](../Images/b8040c31104904ec966b286ce98a0a20.png)

为什么 netbeans 不知道 jsf 库在哪里，即使它们在属性文件中？

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:44:41.530

检查库节点并确保 JSF 库在此处列出。如果不是，您应该通过右键单击库节点并选择添加库来添加它。

# android - 带有两个“Where”子句的 Android SQL 查询

> ID：10373394
> 
> 赞同：3
> 
> 时间：2012-04-29T15:33:44.147
> 
> 标签：android, sqlite

您好，我有一个 SQL 查询，我希望它有两个 WHERE 子句。我希望它在我的数据库中同时查询 Bid 和 Cid 并将其返回到游标有我的代码

```
 public Cursor getSubCategoriesQuerybyCidandBid(String Cid, int Bid) {
        this.openDataBase();
        Cursor c;
         String[] asColumnsToReturn = new String[] {SECOND_COLUMN_ID, SECOND_COLUMN_IDENTITY, SECOND_COLUMN_SUBCATEGORIES};
         c =dbSqlite.query(false, TABLE_NAME, asColumnsToReturn, COLUMN_BID + "=" + Bid + COLUMN_CID + "=" + Cid , null, null, null, null, null);
         return c;
    } 
```

这就是我想要的样子，但这对解决这个问题没有任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T15:39:40.150

试试`COLUMN_BID + "=" + Bid + " AND " + COLUMN_CID + "=" + Cid`。

# eclipse - Eclipse EGit 提交失败 - 原因：java.io.EOFException

> ID：10373401
> 
> 赞同：4
> 
> 时间：2012-04-29T15:34:21.307
> 
> 标签：eclipse, exception, commit, egit

错误的详细信息如下。我刚刚安装在一台新的 Windows 7 机器上，并且在 EGit 中完成的任何提交都会出现此错误。我可以使用 Git Bash shell 成功提交。我检查了 EGit 的更新，但没有找到。其他 EGit 功能（如 pull 和 push）确实有效，但我必须在 Git shell 中进行提交。

发生内部错误 执行提交命令期间捕获的异常

**堆栈跟踪**：

```
org.eclipse.jgit.api.errors.JGitInternalException: Exception caught during execution of commit command
    at org.eclipse.jgit.api.CommitCommand.call(CommitCommand.java:277)
    at org.eclipse.egit.core.op.CommitOperation.commit(CommitOperation.java:255)
    at org.eclipse.egit.core.op.CommitOperation.access$7(CommitOperation.java:233)
    at org.eclipse.egit.core.op.CommitOperation$1.run(CommitOperation.java:197)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2326)
    at org.eclipse.egit.core.op.CommitOperation.execute(CommitOperation.java:207)
    at org.eclipse.egit.ui.internal.commit.CommitUI$2.run(CommitUI.java:220)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: java.io.EOFException: Input did not match supplied length. 239 bytes are missing.
    at org.eclipse.jgit.storage.file.ObjectDirectoryInserter.shortInput(ObjectDirectoryInserter.java:237)
    at org.eclipse.jgit.storage.file.ObjectDirectoryInserter.toTemp(ObjectDirectoryInserter.java:168)
    at org.eclipse.jgit.storage.file.ObjectDirectoryInserter.insert(ObjectDirectoryInserter.java:105)
    at org.eclipse.jgit.api.CommitCommand.createTemporaryIndex(CommitCommand.java:363)
    at org.eclipse.jgit.api.CommitCommand.call(CommitCommand.java:195)
    ... 8 more 
```

**会话数据：**

```
eclipse.buildId=M20120208-0800
java.version=1.6.0_32
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.rcp.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.rcp.product 
```

啊哈，在 Eclipse Egit 社区论坛上发现了这个，描述了一个几乎相同的问题：[http ://www.eclipse.org/forums/index.php/m/820938/?srch=eofexception#msg_820938](https://www.eclipse.org/forums/index.php/m/820938/?srch=eofexception#msg_820938)

解决方案是从这里为 EGit 和 JGit 安装最新的夜间版本：http: [//download.eclipse.org/egit/updates-nightly/](https://download.eclipse.org/egit/updates-nightly/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T22:25:01.410

我已经解决了从项目的 .git 文件夹中删除 index.lock 文件的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T04:00:47.760

是的，通过从项目的 .git 文件夹中删除 index.lock 文件，它可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T05:15:58.110

在我的 ubuntu 14.04 中，我安装了 jgit [ sudo apt-get install jgit-cli ]，问题就解决了。安装后我重新启动了netbeans。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-12T08:34:08.127

我已经通过将用户组更改为 Ubuntu 16.04 上的当前用户来解决它。希望有帮助。

cd 项目目录 sudo chown -R 1000:1000 。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-09-08T23:58:49.087

我当时提交了一个文件，直到找到“损坏”的文件。就我而言，它是一个word文件。我没有答应

# mysql - 如何只计算前 5 个项目，然后将剩余的项目分组到“其他”bin 下？

> ID：10373403
> 
> 赞同：3
> 
> 时间：2012-04-29T15:34:34.407
> 
> 标签：mysql, sql

我有一张这样的桌子；

```
+----+---------+-------------+
| id | user_id | screenWidth |
+----+---------+-------------+
|  1 |       1 |        1366 |
|  2 |       1 |        1366 |
|  3 |       1 |        1366 |
|  4 |       1 |        1366 |
|  5 |       2 |        1920 |
|  6 |       2 |        1920 |
|  7 |       3 |        1920 |
|  8 |       4 |        1280 |
|  9 |       5 |        1280 |
| 10 |       6 |        1280 |
| 11 |       7 |        1890 |
| ...|   ...   |     ...     |
| ...|   ...   |     ...     |
| ...|   ...   |     ...     |
| 100|       6 |        1910 |
+----+---------+-------------+ 
```

有很多屏幕宽度，但其中 90% 等于 5 个值之一。

使用如下查询：

```
SELECT      screenwidth
        ,   COUNT(DISTINCT user_id) AS screenwidthcount
FROM        screenwidth
GROUP BY    screenwidth
ORDER BY    screenwidthcount; 
```

（感谢[我如何只计算第一次出现的值？](https://stackoverflow.com/questions/10373166/count-but-only-with-the-first-occurrence-of-a-value/10373213#10373213)）

我对 screenWidth 发生的次数有一个很好的计数，每个用户只计算一次。

有没有办法计算最流行的屏幕宽度，然后将所有其他屏幕宽度收集在一个名为“其他”的类别中 - 也就是说，上面的查询不是返回大量行，而是返回 6，前 5 是前 5它当前返回，第 6 个被称为 other 其余值的总和？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:11:42.910

这是一种方法。以下脚本是根据这个问题的答案[在 MySQL 中创建 Rank 函数](https://stackoverflow.com/questions/3333665/mysql-rank-function)

该查询为不同计数为计算机的所有行分配一个排名。我在表达式中分配了一个值**2 。**`CASE`这表示脚本将显示前 2 个屏幕宽度，其余的将被合并到“其他”中。您需要根据您的要求更改该值。我已硬编码该值**`99999`**以对所有其他行进行分组。

可能有更好的方法来做到这一点，但这是我可以让它发挥作用的方法之一。

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!2/6a1a3/13)

*脚本*：

```
CREATE TABLE screenwidth 
(
    id INT NOT NULL
  , user_id INT NOT NULL
  , screenwidth INT NOT NULL
);

INSERT INTO screenwidth (id, user_id, screenwidth) VALUES
  (1, 1, 1366),
  (2, 2, 1366),
  (3, 2, 1366),
  (4, 2, 1366),
  (5, 3, 1366),
  (6, 1, 1920),
  (7, 2, 1920),
  (8, 1, 1440),
  (9, 2, 1440),
  (10, 3, 1440),
  (11, 4, 1440),
  (12, 1, 1280),
  (13, 1, 1024),
  (14, 2, 1024),
  (15, 3, 1024),
  (16, 3, 1024),
  (17, 3, 1024),
  (18, 1, 1366);

SELECT screenwidth
    , SUM(screenwidthcount) AS screenwidth_count
FROM
(
    SELECT      CASE    
                    WHEN @curRank < 2 THEN screenwidth 
                    ELSE 'Other' 
                END AS screenwidth
            ,   screenwidthcount
            ,   @curRank := 
                (   CASE 
                        WHEN @curRank < 2 THEN @curRank + 1 
                        ELSE 99999
                    END
                ) AS rank
    FROM
    (
        SELECT      screenwidth
                ,   COUNT(DISTINCT user_id) AS screenwidthcount
        FROM        screenwidth
        GROUP BY    screenwidth
        ORDER BY    screenwidthcount DESC
    ) T1
                ,   (SELECT @curRank := 0) r
) T2
GROUP BY    screenwidth
ORDER BY    rank; 
```

*输出*：

```
SCREENWIDTH SCREENWIDTH_COUNT
----------- -----------------
1440               4
1024               3
Other              6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T01:51:08.237

试试这个：

```
select

  case when rank <= 5 then rank else 'Other' end as screenwidth, 

  sum(screenwidthcount) as screenwidthcount,

  least(rank,6) as LimitRank

from
(
  SELECT
  *, (@r := @r + 1) as rank
  FROM
  (
    SELECT      screenwidth
            ,   COUNT(DISTINCT user_id) AS screenwidthcount

    FROM        tbl

    GROUP BY    screenwidth
    ORDER BY    screenwidthcount desc, screenwidth desc
  ) AS X
  cross join (select @r := 0 as init ) rx
) as y

group by LimitRank 
```

数据样本：

```
CREATE TABLE tbl
    (id int, user_id int, screenWidth int);

INSERT INTO tbl
    (id, user_id, screenWidth)
VALUES
    (1, 1, 1366),
    (2, 1, 1366),
    (3, 1, 1366),
    (4, 1, 1366),
    (5, 2, 1920),
    (6, 2, 1920),
    (7, 3, 1920),
    (8, 4, 1280),
    (9, 5, 1280),
    (10, 6, 1280),
    (11, 7, 1890),
    (12, 9, 1890),
    (13, 9, 1890),
    (13, 9, 1024),
    (13, 9, 800),
    (100, 6, 1910); 
```

输出：

```
SCREENWIDTH SCREENWIDTHCOUNT    LIMITRANK
1280        3                   1
1920        2                   2
1890        2                   3
1910        1                   4
1366        1                   5
Other       2                   6 
```

现场测试：[http ://www.sqlfiddle.com/#!2/c0e94/33](http://www.sqlfiddle.com/#!2/c0e94/33)

* * *

这是不封顶的结果：[http ://www.sqlfiddle.com/#!2/c0e94/31](http://www.sqlfiddle.com/#!2/c0e94/31)

```
SCREENWIDTH SCREENWIDTHCOUNT
1280        3
1920        2
1890        2
1910        1
1366        1
1024        1
800         1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T15:44:54.330

是的，使用无处不在的案例声明：我没有 MySQL，但是这个或类似的东西应该可以工作......

A. Inner Select 生成屏幕宽度的结果集，以及具有该屏幕宽度的不同用户的计数......（这实际上只计算每个用户的屏幕宽度一次）。结果集仅限于五个或更多用户使用的屏幕宽度。

B. 然后外部查询将完整的表连接到该结果集，对表达式进行分组并对表示使用每个屏幕宽度的用户数的“Cnt”求和。

```
 Select case When Z.Cnt < 5 Then screnwidth, else 0 end
       Sum(Z.Cnt) screenwidthcount, 
   From screenwidth A
      Left Join (Select screenwidth, Count(Distinct User_ID) Cnt
                 From screenwidth
                 Group By screenwidth
                 Having count(*) > 4) Z
        On Z.screeenwidth = A.screeenwidth         
   Group By case When Z.Cnt < 5 Then screnwidth, else 0 end 
```

C. 如果 MySql 有类似 SQL Servers 的`Str()`函数，你可以用它把 case 表达式转换成字符串，然后代替 else 后面的 0，你可以使用 'other'

```
 Select case When Z.Cnt < 5 Then Str(screnwidth, 6,0) else 'other' end
       Sum(Z.Cnt) screenwidthcount, 
   From screenwidth A
      Left Join (Select screenwidth, Count(Distinct User_ID) Cnt
                 From screenwidth
                 Group By screenwidth
                 Having count(*) > 4) Z
        On Z.screeenwidth = A.screeenwidth         
   Group By case When Z.Cnt < 5 Then Str(screnwidth, 6,0) else 'other'  end 
```

# c# - Metro Style App 中的自定义类属性

> ID：10373408
> 
> 赞同：10
> 
> 时间：2012-04-29T15:35:21.510
> 
> 标签：c#, windows-runtime, custom-attributes, system.reflection, portable-class-library

我正在尝试在 Metro Style App 可移植库中定义和检索类的自定义属性。

就像是

```
[AttributeUsage(AttributeTargets.Class)]
public class FooAttribute : Attribute
{
}

[Foo]
public class Bar
{
}

class Program
{
    static void Main(string[] args)
    {
        var attrs = CustomAttributeExtensions.GetCustomAttribute<FooAttribute>(typeof(Bar));
    }
} 
```

这适用于普通 4.5，但在针对 Metro 风格应用程序的便携式库中，它告诉我

```
Cannot convert type 'System.Type' to 'System.Reflection.MemberInfo' 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-19T15:01:43.487

或者，也像它们的意思一样利用扩展：

```
var attr = typeof(Bar).GetTypeInfo().GetCustomAttribute<FooAttribute>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T15:36:41.777

根据OP：

> 你需要做 var attrs = CustomAttributeExtensions.GetCustomAttribute(typeof(Bar).GetTypeIn‌​fo());

这似乎与[文档一致](http://msdn.microsoft.com/en-us/library/hh194292%28v=vs.110%29)

# android - 在RelativeLayout中动态添加TextView

> ID：10373411
> 
> 赞同：0
> 
> 时间：2012-04-29T15:35:26.813
> 
> 标签：android, eclipse

我正在使用以下代码。代码应该连续显示值的值，例如如果`values[]`包含`{A,B,C,D,E,F}`它应该显示`A B C D E F`In `relative layout`。如果我不使用`LayoutParams pramas`，那么所有这些`textViews`都将相互叠加。我怎样才能让它们添加到彼此的左侧

```
for (int i = 0 ; i < values.length ; i++)
      {
        TextView textView = new TextView(this);
        textView.setText(values[i].toString());
        textView.setTextColor(Color.BLACK);
        textView.setClickable(true);
        textView.setId(i);
        textView.setBackgroundDrawable(d);
        textView.setTextSize(24);
        LayoutParams param = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        LayoutParams params  = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        params.setMargins(5, 50, 0, 0); 
        if (i>0)
        params.addRule(RelativeLayout.RIGHT_OF, i);
        textView.setLayoutParams(param);
        wordsLayout.addView(textView,params);
      }
    } 
```

问题是，当我使用时 `wordsLayout.addView(textView,params);`没有显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:40:52.037

你的工作代码...

```
LinearLayout wordsLayout = new LinearLayout(this);
        for (int i = 0 ; i < 5 ; i++)
        {
            TextView textView = new TextView(this);
            textView.setText(String.valueOf(i));
            textView.setTextColor(Color.RED);
            textView.setClickable(true);
            textView.setId(i);
            textView.setBackgroundDrawable(d);
            textView.setTextSize(24);
            LayoutParams param = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            LayoutParams params  = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
            params.setMargins(5, 50, 0, 0); 
            if (i>0)
                params.addRule(RelativeLayout.RIGHT_OF, i);
            textView.setLayoutParams(param);
            wordsLayout.addView(textView,params);
        }

        setContentView(wordsLayout); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:31:09.013

我建议将每个 Textview 放在它自己的 Viewgroup 中，该 Viewgroup 包含 Textviews 内容大小。让所有视图组按照您希望所有可见文本视图的方式彼此相邻排列。并使内部文本视图元素可见和消失，但是您需要显示它们。在我看来，这是最不混乱的方式，它可以确保你的文本视图的顺序。

# haskell - 组合列表和单个项目时出现保护条件错误

> ID：10373412
> 
> 赞同：3
> 
> 时间：2012-04-29T15:35:27.750
> 
> 标签：haskell, guard

我正在尝试将列表头 ( `r`) 添加到列表中`sack`，但是我不断收到此错误消息。

```
ERROR "Knapsack.hs":35 - Type error in guarded expression
*** Term           : findItems rt (r : sack) (getTotalWeight sack r)
*** Type           : [Item]
*** Does not match : [[Item]] 
```

代码如下所示。

```
findItems :: [Item] -> [Item] -> Float -> [Item]
findItems (r:rt) sack total 
            | total > 20 = [sack]
            | canContinue = findItems rt (r : sack ) (getTotalWeight sack r) 
            | otherwise = [sack] 
            where canContinue = (getTotalWeight sack r) < 20 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T15:41:38.697

你不能返回`[sack]`from `findItems`，因为`sack`已经是 type `[Item]`，所以`[sack]`也是 type `[[Item]]`。拆下括号。

消息抱怨*第二种*情况（它确实返回`[Item]`）的原因可能是（我在这里猜测）Haskell 期望所有情况都是相同的类型，所以它检查它们是否都是相同的类型作为第一个，它恰好是`[[Item]]`. 这种检查似乎发生在它甚至尝试将`|`表达式的类型与`findItems`. Haskell 大师可能会在这里更详细地纠正我:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T15:50:59.897

您遇到的似乎是“拥抱主义”，其中拥抱似乎以与 GHC 不同的方式进行类型检查。如果您将相同的代码插入 GHCi，您将收到指向实际包含它的行的错误：

```
| total > 20 = [sack] 
```

在这种情况下，GHCi 似乎正在生成更好的错误消息（尽管，恕我直言，通常它们可能比需要的更神秘！）。

# android - Android onActivityResult。成员变量有时为空

> ID：10373417
> 
> 赞同：11
> 
> 时间：2012-04-29T15:35:34.513
> 
> 标签：android, exception, pointers, null

我已经编写了一个应用程序，现在，发布后，我的一些用户似乎遇到了一个讨厌的错误。我根本无法复制的一个。

涉及这三个活动。

活动一：超级活动

```
public abstract class SuperActivity extends Activity 
```

活动二：MainActivity

```
public class MainActivity extends SuperActivity {

  private MyObject myMemberVariable;    

  @Override
  public void onCreate(Bundle savedInstanceState) {

    //Get the intent that started this activity. I am always providing Extras, so this is never null.
    Bundle bundle = getIntent().getExtras();

    //Set stuff in myMemberVariable from these extras. This never fails either.
    myMemberVariable = BundleLoader.loadFromBundle(bundle);

  }

  @Override
  public void onListDialogClick(int requestCode, String[] options, int position, String extra) {
    //THIS is the place where, according to my stacktrace from the DeveloperConsole, the null pointer arises.
    myMemberVariable.setXY(position);
  } 
```

活动三：ListDialogActivity

```
public class ListDialogActivity extends SuperActivity 
```

我在这里所做的是从 MainActivity 启动 ListDialogActivity 以向用户提供一些选择。一旦他做出选择，ListDialogActivity 将设置一个结果然后完成。在 SuperActivity 我有：

```
onActivityResult(int requestCode, int resultCode, Intent data) {
  //if activityRequestCode was ListDialogRequestCode and the Result was RESULT_OK, then call onListDialogClick(..) with the appropriate values.
} 
```

所以这就是我的 MainActivity 中的 onListDialogClick() 被调用的方式（所以你可以把它想象成一个普通的 onActivityResult()）。在那里，少数用户遇到空指针异常，因为 myMemberVariable 为空。

我无法弄清楚这里发生了什么。此外，我正在保存我的实例状态来处理手机旋转，但即使我没有，因为 onCreate 会被调用，它仍然不会为空，它只会丢失它的状态并从初始 Intent 重新创建。

谁能向我解释这是怎么可能的以及这里发生了什么？我是否误解了Android的某些内容？为什么只发生在少数人身上？这可能是什么原因？即使是最微小的建议，我也会非常感激。

非常感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-12T15:34:49.037

zapl 是正确的，因为您必须将值保存在 onSaveInstanceState 中，在我的情况下，我正在恢复 onCreate()，它在 onActivityResult 之前运行，因此不再有 NullPointerExceptions！

您现在可能已经对此进行了排序，但是我在同一个问题上遇到了很多麻烦。我的应用程序启动相机拍照，然后将捕获的文件复制到应用程序中的 currentDirectory 中。有时，在拍摄照片时，我会在 onActivityResult 中收到 NullPointerExceptions。

我花了一段时间才意识到这个活动一定是被安卓的内存管理杀死了，然后重新创建了，从而丢失了我所有的成员变量。这并不明显（向 Android 致敬，以实现如此无缝的杀戮/恢复！）。这发生在 HTC Desire HD 上，而且非常随机，很难追踪。

# c - 从单个项目和代码库编辑、调试和构建 c dll 和 exe

> ID：10373419
> 
> 赞同：1
> 
> 时间：2012-04-29T15:35:51.753
> 
> 标签：c, visual-studio, dll, code-reuse

我在 VS2010 中有一个 C 控制台程序，我想将其作为单个项目进行编辑/调试/构建。也就是说，我想编写和调试它，就好像它是一个香草控制台 exe，但让它产生一个 dll 作为副产品。我在 SO 上找到了以下信息（[制作 C# 项目 DLL 和 EXE](https://stackoverflow.com/questions/5054656/making-a-c-sharp-project-dll-and-exe)）

> DLL 项目应该包含所有可重用的代码。正常项目应该是您正在构建的应用程序，它将引用您的可重用 DLL。这样，您可以在 DLL 项目中构建一个框架，该框架可用于您未来的任何项目。

在其他地方，我发现了这个：[https ://stackoverflow.com/questions/7054481/how-to-produce-a-mix-of-dll-and-exe-in-one-c-sharp-project](https://stackoverflow.com/questions/7054481/how-to-produce-a-mix-of-dll-and-exe-in-one-c-sharp-project-in-visual-studio-or-o)

> 您可以像引用 dll 一样引用 .Net 可执行文件，但您可以考虑将 exe 文件复制到具有相同名称的 dll 文件中...您可以使用 Visual Studio 构建后事件为您的项目自动执行此过程. 这将在每次成功构建时处理创建 dll 副本： copy "$(TargetPath)" "$(TargetDir)$(TargetName).dll"

似乎第一个选项意味着维护 2 个不同的项目。有没有理由这样做，而不是按照第二篇文章的建议，只复制我的 exe 并将扩展名从 exe 更改为 dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:33:50.720

Hans Passant 回答了这个问题，但我无法将其标记为已回答，因为它是评论。所以这是他的回答：

“这在托管语言中是可能的，但在 C 语言中是不可能的。本机 DLL 具有不同的 CRT 启动代码。本机 EXE 不可重定位并且不支持导出的函数。更大的问题是，如果可能的话，你会做什么” d 写在你的 main() 函数中。你不能写在你的 EXE 项目的 main() 函数中。只写单元测试来测试导出的函数，因为这是使用你的 DLL 的任何代码唯一可用的东西。还考虑一个第三个创建静态库的项目，一个你可以在你的 DLL 和 EXE 项目中链接的项目”

# c++ - 访问冲突写入位置 0xXXXXXXXXX

> ID：10373427
> 
> 赞同：1
> 
> 时间：2012-04-29T15:37:18.353
> 
> 标签：c++, memory-management

我正在编写一个迭代地实现合并排序的 c++ 程序。主要代码如下所示，我无法理解为什么会出现“访问冲突写入位置 0xXXXXXXXX”错误，即使我在另一个程序中以相同的方式分配了更多内存（1 gb）。

```
void main()
{
    //int a[size];
    int* a =  new int(size); //initialising an int array dynamically contains 16777216 el
    srand(time(NULL));
    for(int i = 0 ; i < size; i++)
    {
        a[i]= 1 + rand() % 10;
    }

    for(int i = 0;  (size / 2) / pow((double)2, i)>= 1; i++)
    {
        int n = pow((double)2, i);
        int offset = 0;
        for(int j = 0; j < (size / 2) / pow((double)2, i); j++)
        {
            int* tmp = new int(n);
            merge(a + offset, n, a + offset + n, n, tmp);
            memcpy(a + offset, tmp, n*2 * sizeof(int));
            offset += pow((double)2, i+1);
        }
    }

    for(int i = 0; i < size; i++)
    {
        cout<<a[i]<<" ";
        //printf("%d ", a[i]);
    }
    cout<<endl;
    system("PAUSE");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T15:42:16.743

您只为 1 个整数分配足够的内存：`new int(size)`并将其分配为`size`. 所以你没有 a 指向的 1GB 内存。访问超过 1 个整数是未定义的行为，这可能会给您带来访问冲突。

更改`new int(size)`为方括号：`new int[size]`.

更好的是，使用`std::vector<int>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T15:41:32.953

分配代码中的一个小错误。这条线

```
int* a =  new int(size); 
```

创建一个`int`值为*的*`size`单曲。

试试这个

```
int* a =  new int[size]; 
```

# c++ - 从 HDC 句柄创建 QPaintDevice

> ID：10373429
> 
> 赞同：2
> 
> 时间：2012-04-29T15:37:52.263
> 
> 标签：c++, qt, gdi

我有一个来自外部库的 Windows HDC 句柄，我想使用 QPainter 功能来绘制它。Qt 中有什么方法可以从 HDC 句柄创建 QPaintDevice 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:38:47.427

这样做的一种方法：

使用 Windows API，从 HDC 获取 HWND。

```
HWND handle = WindowFromDC(hdc);
assert(handle != NULL); 
```

然后子类化 QWidget 以访问受保护的成员转换。使用它，使用此成员创建 QWidget，如本解决方案中所述：[如何创建一个以 hwnd 作为父级的 qwidget](https://stackoverflow.com/questions/293774/how-to-create-a-qwidget-with-a-hwnd-as-parent "如何创建一个以 hwnd 作为父级的 qwidget")。在这个例子中，我调用了 QWidgetWrapper 的子类。

```
QWidgetWrapper *w = new QWidgetWrapper();
w->create((Wld)main_window); 
```

请注意，Wld 是 Qt 中“平台相关窗口标识符”的 typedef。

# assembly - NASM 汇编代码中的分段错误

> ID：10373433
> 
> 赞同：4
> 
> 时间：2012-04-29T15:38:32.877
> 
> 标签：assembly, x86-64, nasm, yasm

我的汇编程序是 YASM，我在 64 位 Linux 上编码。

`yasm -f elf -m amd64 -g dwarf2 filename.asm`我使用 ld组装和链接

我正在尝试实现选择排序。`rdi`并`rsi`指向`strbuf2 resb 10`数组的各个部分。这种分段错误的原因可能是什么？第 105 行和第 106 行执行完全相同类型的操作，那么为什么它在第 106 行而不是第 105 行崩溃呢？

我已经包含了代码的相关部分，以及崩溃时的 gdbtui 屏幕截图。

更新：计数器已修复

```
; ====== Sorting begins here ======
; Register uses:
; bpl holds the current minimum value
; r8 holds the memory address of the current minimum value
; rdi points to the boundary of the "outer loop"
; rsi points to the boundary of the "inner loop"
sorting:
    mov rdi, strbuf2  ; outer loop pointer
    mov rsi, strbuf2+1  ; inner loop pointer
    mov rax, 1  ; inner loop counter
    mov rbx, 0  ; outer loop counter

innerloop:
    mov bpl, [rdi] ; assume beginning element of unsorted array is minimum

    ; store the value of first element of unsorted array
    mov dl, [rdi]

    ; compare the current small value with the value in rsi
    mov cl, [rsi]   
    cmp bpl, cl 
    jg  new_small

    inc rsi
    inc rax
    cmp rax, 9
    jle innerloop
    jg  innerloop_done

new_small:
    inc rax
    mov bpl, cl; save the new small value
    mov r8, rsi  ; save its index 
    inc rsi 
    cmp rax, 9
    jle     innerloop

innerloop_done:
    ; When the inner loop is completed...
    ; First, do the swap
    ; to swap r8 (target memory address)  with [rdi] (outer array boundary)
    mov dl, 0 ; initialise
    mov dl, [rdi]
    mov [rdi], bpl
    mov [r8], dl 

    inc rdi  ; move the outer loop pointer forward
    inc rsi  ; move the inner loop pointer forward
    inc rbx  ; increment the outer loop counter (the unsorted array becomes smaller)

    ; set the inner loop counter to the appropriate position
    mov rax, 1 
    add rax, rbx  ; now rax (inner loop counter)
                  ; will always be rbx+1 (outer loop counter + 1) 
    cmp rbx, 9  
    jle innerloop
; ====== Sorting ends here ====== 
```

![](../Images/2e952f4e70d61eddef807eced695a349.png)分段错误 gdb 输出

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T15:45:45.767

```
; store the value of first element in [small]
mov rdx, [rsi]
mov r9, rdx

; compare the current small value with the value in rsi
mov rcx, [rsi]  
cmp r9, rcx 
```

你在比较`[rsi]`，`[rsi]`他们将是平等的......

此外，`r8`仅在`new_small`块内初始化 - 如果您从未进入块，那么写入`[r8]`不是一个好主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T07:58:06.803

我认为您迷失在实现的细节中，忘记了代码应该做什么。我建议您首先用 C 实现代码，然后逐渐将其更改为类似于 ASM，直到您可以完全用 ASM 编写它为止。

请注意从 C 中小巧、干净且易于理解`sortC1()`的实现到`sortAsm()`. 使用您最喜欢的文件比较工具来查看实现之间的哪些变化。

编码：

```
#include <stdio.h>
#include <string.h>

char strOriginal[11] = "8163045297";
char str[11];

void sortC1(void)
{
  int outIdx, inIdx, minIdx;
  char min, tmp;

  for (outIdx = 0; outIdx < 10; outIdx++)
  {
    minIdx = outIdx;
    min = str[minIdx];

    for (inIdx = outIdx; inIdx < 10; inIdx++)
    {
      if (min > str[inIdx])
      {
        minIdx = inIdx;
        min = str[minIdx];
      }
    }

    tmp = str[outIdx];
    str[outIdx] = min;
    str[minIdx] = tmp;
  }
}

void sortC2(void)
{
  char *outPtr, *inPtr, *minPtr;
  int outCnt, inCnt;
  char min, tmp;

  for (outPtr = str, outCnt = 0;
       outCnt < 10;
       outPtr++, outCnt++)
  {
    minPtr = outPtr;
    min = *minPtr;

    for (inPtr = outPtr, inCnt = 10 - outCnt;
         inCnt > 0;
         inPtr++, inCnt--)
    {
      if (min > *inPtr)
      {
        minPtr = inPtr;
        min = *minPtr;
      }
    }

    tmp = *outPtr;
    *outPtr = min;
    *minPtr = tmp;
  }
}

void sortC3(void)
{
  char *outPtr, *inPtr, *minPtr;
  int outCnt, inCnt;
  char min, tmp;

  outPtr = str;
  outCnt = 0;

  while (outCnt < 10)
  {
    minPtr = outPtr;
    min = *minPtr;

    inPtr = outPtr;
    inCnt = 10 - outCnt;

    while (inCnt > 0)
    {
      if (min > *inPtr)
      {
        minPtr = inPtr;
        min = *minPtr;
      }

      inPtr++;
      inCnt--;
    }

    tmp = *outPtr;
    *outPtr = min;
    *minPtr = tmp;

    outPtr++;
    outCnt++;
  }
}

void sortC4(void)
{
  char *outPtr, *inPtr, *minPtr;
  int outCnt, inCnt;
  char min, tmp;

  outPtr = str;
  outCnt = 0;

outerloop:

  minPtr = outPtr;
  min = *minPtr;

  inPtr = outPtr;
  inCnt = 10 - outCnt;

innerloop:

  if (min > *inPtr)
  {
    minPtr = inPtr;
    min = *minPtr;
  }

  inPtr++;
  inCnt--;

  if (inCnt > 0)
    goto innerloop;

  tmp = *outPtr;
  *outPtr = min;
  *minPtr = tmp;

  outPtr++;
  outCnt++;
  if (outCnt < 10)
    goto outerloop;
}

void sortAsm(void)
{
  char* rdi; // points to the boundary of the "outer loop"
  char* rsi; // points to the boundary of the "inner loop"
  char* r8; // holds the current minimum value
  char r9b; // holds the current minimum value
  char r10b; // temporary storage for character exchange
  long long rbx; // outer loop counter
  long long rax; // inner loop counter

  rdi = str; // initialize outer loop pointer
  rbx = 0; // initialize outer loop counter

outerloop:

  r8 = rdi; // assume current element of partially sorted array is minimum,
  r9b = *r8; // save its index and value

  rsi = rdi; // initialize inner loop pointer
  rax = 10; // initialize inner loop counter
  rax -= rbx;

innerloop:

  // compare the current small value with the value in [rsi]
  if (r9b > *rsi)
  {
    r8 = rsi; // save the new small value's index
    r9b = *r8; // save the new small value
  }

  rsi++; // move the inner loop pointer forward
  rax--; // decrement the inner loop counter
  if (rax > 0)
    goto innerloop;

  // When the inner loop is completed...
  // First, do the swap
  // to swap [r8] (target memory address) with [rdi] (outer array boundary)
  r10b = *rdi;
  *rdi = r9b;
  *r8 = r10b;

  rdi++; // move the outer loop pointer forward
  rbx++; // increment the outer loop counter
  if (rbx < 10)
    goto outerloop;
}

int main(void)
{
  strcpy(str, strOriginal);
  printf("before sorting: %s\n", str);
  sortC1();
  printf("after sorting : %s\n\n", str);

  strcpy(str, strOriginal);
  printf("before sorting: %s\n", str);
  sortC2();
  printf("after sorting : %s\n\n", str);

  strcpy(str, strOriginal);
  printf("before sorting: %s\n", str);
  sortC3();
  printf("after sorting : %s\n\n", str);

  strcpy(str, strOriginal);
  printf("before sorting: %s\n", str);
  sortC4();
  printf("after sorting : %s\n\n", str);

  strcpy(str, strOriginal);
  printf("before sorting: %s\n", str);
  sortAsm();
  printf("after sorting : %s\n\n", str);

  return 0;
} 
```

输出：

```
before sorting: 8163045297
after sorting : 0123456789

before sorting: 8163045297
after sorting : 0123456789

before sorting: 8163045297
after sorting : 0123456789

before sorting: 8163045297
after sorting : 0123456789

before sorting: 8163045297
after sorting : 0123456789 
```

# list - 在 prolog 中生成一组布尔值列表

> ID：10373446
> 
> 赞同：1
> 
> 时间：2012-04-29T15:39:54.050
> 
> 标签：list, prolog

我需要在 prolog 中生成一个布尔值列表。

```
?- gener_booleans(Xs,3).
Xs = [true, true, true] ;
Xs = [true, true, false] ;
...
Xs = [false, false, false] ; 
```

这是另一个解决方案的链接，但我不知道如何将其应用于布尔值。 [获取序言中的所有列表集](https://stackoverflow.com/questions/4653784/get-all-sets-of-list-in-prolog) 有人可以帮忙吗？PS列表的数量是2 ^ N。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:07:00.467

如果您的 Prolog 有`maplist`谓词（如 SWI 和 YAP）：

```
booleans(Xs, N) :-
    length(Xs, N),
    maplist(boolean, Xs).
boolean(true).
boolean(false). 
```

（我重命名了谓词`booleans`，因为它也可以检查布尔值；在 Prolog 中编程时更喜欢声明性名称。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T15:44:08.403

```
gener_booleans([],0).
gener_booleans([true|Xs],N) :- N>0, N1 is N-1, gener_booleans(Xs,N1).
gener_booleans([false|Xs],N) :- N>0, N1 is N-1, gener_booleans(Xs,N1). 
```

# linux - Linux 模块挂钩进程函数

> ID：10373447
> 
> 赞同：2
> 
> 时间：2012-04-29T15:40:18.290
> 
> 标签：linux, hook

我有一个问题，也许你有一些关于这个的信息。我想在运行过程中挂钩套接字接收函数（recv）并修改传入数据。我怎么知道，我可以使用内核模块来做到这一点，但我找不到关于如何做这样的钩子的信息。

我尝试过其他方法，例如 Netfilter、iptables，但这些方法速度较慢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T15:51:39.247

请注意，可以使用几种不同的系统调用 - 不仅仅是 recv()。

假设有问题的应用程序通过 C 库进行内核交互（而不是手工制作系统调用），并且您可以重新启动它来设置测试，一个相当简单的想法可能是使用 LD_PRELOAD 环境变量首先加载自定义库，它将感兴趣的系统调用包装器替换为拦截器。

或者您可以像 strace 那样设置系统调用拦截，并与感兴趣的人一起玩。

另一种选择是不让应用程序直接连接到远程系统，而是创建一个代理，让它连接到代理，然后让代理连接到远程系统。这样做的一个主要优点是它非常便携，几乎不需要平台特定的细节。

# java - JAXB Schemagen 和解组错误

> ID：10373449
> 
> 赞同：4
> 
> 时间：2012-04-29T15:40:42.677
> 
> 标签：java, xml, jaxb

我正在使用 JAXB 从我的 Java 类生成 XML 模式，因此其他开发人员可以在没有 Java 知识的情况下轻松创建类的实例。

这是代码的相关部分：

# 包信息.java

```
@XmlSchema(xmlns = @XmlNs(prefix = "p", namespaceURI = "http://mygame.com"),
           namespace = "http://mygame.com")

package com.mygame.entity.properties;

import javax.xml.bind.annotation.XmlNs;
import javax.xml.bind.annotation.XmlSchema; 
```

# 模型类

```
package com.mygame.entity.properties;

@XmlType(name = "model", namespace = "http://mygame.com")
@XmlRootElement(name = "model", namespace = "http://mygame.com")
public class Model {

    @XmlAttribute(required = true)
    public String path;

    public Model() {
    }
} 
```

# 单元类

```
@XmlType(name="unit", namespace="http://mygame.com")
@XmlRootElement(name="unit", namespace="http://mygame.com")
public class Unit extends GameObject {
} 
```

# 游戏对象类

```
@XmlType(name = "gameobject", namespace = "http://mygame.com")
public abstract class GameObject extends Thing {

    // Attributes
    public Armor armor;
    public Short maxHp;
    public Boolean walkable = false;
    public AbstractModel model;
} 
```

# 事物类

```
@XmlType(name="thing", namespace="http://mygame.com")
public abstract class Thing {
    // Constants
    // Attributes

    @XmlElement(required=false)
    public String icon;
} 
```

# 生成的 XML 模式

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" targetNamespace="http://mygame.com" xmlns:e="http://mygame.com" xmlns:s="http://mygame.com" xmlns:tns="http://mygame.com" xmlns:p="http://mygame.com" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="model" type="tns:model"/>

  <xs:element name="unit" type="tns:unit"/>

  <xs:complexType name="thing" abstract="true">
    <xs:sequence>
      <xs:element name="icon" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="unit">
    <xs:complexContent>
      <xs:extension base="tns:gameobject">
        <xs:sequence/>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="gameobject" abstract="true">
    <xs:complexContent>
      <xs:extension base="tns:thing">
        <xs:sequence>
          <xs:element ref="tns:armor" minOccurs="0"/>
          <xs:element name="maxHp" type="xs:short" minOccurs="0"/>
          <xs:element name="walkable" type="xs:boolean" minOccurs="0"/>
          <xs:element ref="tns:model" minOccurs="0"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="model">
    <xs:sequence/>
    <xs:attribute name="path" type="xs:string" use="required"/>
  </xs:complexType>

</xs:schema> 
```

到目前为止，一切都很好。它正确地生成了所需的 XML（尽管带有那些烦人的 TNS 前缀，但这很好）。

问题是当我尝试解组 UNIT 时，我在其中一种情况下遇到错误

# 案例 1 - 工作

鉴于此 XML 输入，一切正常，并且我正确获得了我的类的实例。

```
<?xml version="1.0" encoding="UTF-8"?><tns:unit xmlns:tns="http://mygame.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="/home/shirkit/jMonkeyProjects/Fortress Wars/Core/schema/full.xsd">
<maxHp>100</maxHp>
<walkable>false</walkable>
<model path="Models/Oto/Oto.mesh.xml"/></tns:unit> 
```

# 案例 2 - 不工作

鉴于此，我收到如下所述的错误

```
<?xml version="1.0" encoding="UTF-8"?><tns:unit xmlns:tns="http://mygame.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="/home/shirkit/jMonkeyProjects/Fortress Wars/Core/schema/full.xsd">
<maxHp>100</maxHp>
<walkable>false</walkable>
<tns:model path="Models/Oto/Oto.mesh.xml"/></tns:unit>

unexpected element (uri:"http://mygame.com", local:"model"). Expected elements are <{}icon>,<{}model>,<{}walkable>,<{}armor>,<{}maxHp> 
```

两个 XML 输入之间的唯一区别是一个具有元素模型，另一个具有元素 tns:model。我不知道为什么我在案例 2 中遇到此错误，有人可以给我一个解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:50:20.230

您要么需要从模型元素中删除 tns 前缀，要么在您的架构中指定 QUALIFIED 的“elementFormDefault”值（个人而言，我更喜欢这种解决方案）。

# variables - 如何在 Coldfusion8 cffunction 标签内引用数据库变量？

> ID：10373453
> 
> 赞同：0
> 
> 时间：2012-04-29T15:41:19.193
> 
> 标签：variables, coldfusion, cffunction

我正在 Coldfusion8 中迈出第一步。我设法使用我正在调用的 cffunction 设置组件/服务。

在函数内部，我需要构建一个包含错误和相应错误消息的 2x2 表。错误消息是多语言的并存储在 MySQL 表中。

**问题：**

我找不到从*CFFunction*标记内引用我的变量的方法。这不起作用：

```
// select from database
<cfparam name="Session.Sprache" default="DE">
    <cfquery datasource="iln" name="texte">
        SELECT *
        FROM languages
        WHERE sprache = "#Session.lang#"
     </cfquery>

<cffunction name="createErrMsgsLog" returntype="object">
    // create and populate 
    <cfset allErrMsgs=ArrayNew(2)>
    <cfset allErrMsgs[1][1]="firma">
    // not defined
    <cfset allErrMsgs[1][2]="#tx_validate_firma#">
    ....
 </cffunction> 
```

**问题：如何在***CFfunction*
中 正确引用我的变量，也就是 #tx_validate_firma# 。它们总是未定义的。

 ***编辑**：
好的。这似乎有效：

在**application.cfc**里面我打电话：

```
<cfinvoke component="services.errorMsg"
     method="createErrMsgsLog"          
     returnvariable="errMsgs">
</cfinvoke> 
```

在**errorMsg.cfc**里面我正在做：

```
<cfcomponent displayname="errorMsg">    
    <cffunction name="createErrMsgsLog">
        <cfquery datasource="mine" name="texte">
            SELECT *
            FROM sprachen
            WHERE sprache = "#Session.Sprache#"
        </cfquery>
        <cfoutput query="texte">
            // column name = value
            <cfset "#trim(bezeichner)#" = "#trim(textinhalt)#">
        </cfoutput>
        // build array
        <cfset allErrMsgs=ArrayNew(2)>
        <cfset allErrMsgs[1][1] = "firma">
        <cfset allErrMsgs[1][2] = #tx_validate_firma#>
        ...

        <cfset errMsgs = serializeJSON(allErrMsgs)>
        <cfreturn errMsgs>
    </cffunction>
</cfcomponent> 
```

这似乎是一个非常多的代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:36:45.933

这里只是一个最佳实践答案。引用变量时，只需引用名称即可，无需使用##。

例如 `<cfset "#trim(bezeichner)#" = "#trim(textinhalt)#">`

可`<cfset "#trim(bezeichner)#" = trim(textinhalt)>`

这并不能解决您未定义的问题，但是您应该继续前进（不要费心清理旧代码），但这使它更具可读性 imo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:19:42.903

要在函数中使用值，您需要将该值作为参数值传递给函数，例如：

```
<cffunction name="createErrMsgsLog" returntype="object">
    <cfargument name="someName" [etc]> 
```

然后在函数中将其作为 arguments.someName 引用。

虽然您*可以*突破函数的内部范围并从主线访问变量，但这样做并不是特别好的做法。

另一个考虑可能是将您的函数抽象为 CFC 文件中的组件定义，而不仅仅是在“主线”代码中定义它们。这使得代码更整洁、更连贯，并使其更具可重用性。也就是说，通常也有理由将一次性函数内联定义。但也许值得研究：

[http://livedocs.adobe.com/coldfusion/8/htmldocs/buildingComponents_01.html#1266855](http://livedocs.adobe.com/coldfusion/8/htmldocs/buildingComponents_01.html#1266855)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T19:23:16.677

这里有几件事要考虑。与其说是答案，不如说是一些观察：

为了你自己的理智，那些必须维护你的代码的人，以及那些想要提供帮助的人，请不要在查询中使用“select *”。从我在这里看到的评论中， tx_validate_firma 在名为 texte 的查询中返回。如果代码明确表示：

```
<cfquery datasource="iln" name="texte">
    SELECT tx_validate_firma, etc
    FROM languages
    WHERE sprache = "#Session.lang#"
 </cfquery> 
```

我们都知道价值从何而来。哦，请查看在 where 子句中使用 cfqueryparam。

我假设这是可行的，尽管它看起来很奇怪：

```
<cfset allErrMsgs[1][2] = #tx_validate_firma#> 
```

因为 tx_validate_firma 的范围没有明确说明，所以我们这些局外人只能摸不着头脑，因为以后有人可能会试图维护它。

```
<cfset allErrMsgs[1][2] = texte.tx_validate_firma> 
```

请注意，您不需要在这样的分配中使用#。通常在 ColdFusion 标记中您不需要它们，除非您在引号内。像这样的东西：

```
<cfset fullName = "#firstName# #middleInitial# #lastName#"> 
```*

# css - 在逗号、点、连字符或其他特殊字符上打破长无空格线

> ID：10373459
> 
> 赞同：7
> 
> 时间：2012-04-29T15:41:47.827
> 
> 标签：css

我正在尝试在小屏幕（电话）上显示各种文本
文本是合理的，但碰巧有一行长字/公式/字符串，不适合

有可能***的断词：break-all;*** ，但它断线太随意，我需要一个中间解决方案，如下所示：

[http://jsfiddle.net/Jsa5t/](http://jsfiddle.net/Jsa5t/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T15:59:33.900

插入`<wbr>`标签以指定允许的直接换行机会。

理论上更正确的方法是插入零宽度空格字符，U+200B ( `&#x200b;`)，但在一些旧浏览器上会严重失败。

关于防止和允许 HTML 换行的论文： [http ://www.cs.tut.fi/~jkorpela/html/nobr.html](http://www.cs.tut.fi/~jkorpela/html/nobr.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T15:57:26.960

不知道你在问什么，但你可以使用

`word-wrap:break-word`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-06T15:17:53.820

如果您可以在有 dot(.) 文本时换行，请在您的 css 文件中尝试以下代码：

```
.your_class{
white-space: pre-line !important;
} 
```

# asp.net-mvc - 扩展 SignalR Server Hub 类以创建基础 Hub 类

> ID：10373461
> 
> 赞同：4
> 
> 时间：2012-04-29T15:42:05.407
> 
> 标签：asp.net-mvc, asp.net-mvc-4, signalr

我正在尝试扩展 SignalR Hub 类以创建一个基类，该基类是 SignalR Hub 的核心，但带有一些额外的 pzazz。

我的基类：

```
public class MyBaseHub : Hub 
{
    protected ISession NhSession { get; set; }

    public MyBaseHub(ISession nhSession)
    {
        NhSession = nhSession;
    }
} 
```

我的派生类：

```
public class MyDerivedHub : MyBaseHub 
{                
    public MyDerivedHub(ISession nhSession) : base(nhSession) { }
} 
```

以上构建良好，但 SignalR 生成的 javascript 引发错误，我无法在客户端上创建连接。我的基类中有更多代码，但我全力以赴尝试缩小问题范围，发现问题出在客户端。

定义 MyBaseHub 集线器客户端时，生成的 Javascript 会引发异常“Uncaught SyntaxError: Unexpected Number”：

```
myBaseHub`1: { generated properties go in here } 
```

所以我猜 SignalR 集线器只能被继承一次？有谁知道我正在尝试做的事情是否可行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T17:56:31.807

您的问题说基本集线器是通用的，但代码示例没有显示它。如果您将类抽象化，代理生成器将不会选择它。此外，您可以使用该`[HubName]`属性重命名集线器。

```
[HubName("MyHub")]
public class MyHub2 : Hub 
{
} 
```

# c# - MonoTouch：应用程序因内存不足而被杀，为什么？实时字节分配 5 MB 顶部

> ID：10373464
> 
> 赞同：3
> 
> 时间：2012-04-29T15:42:14.303
> 
> 标签：c#, memory-management, memory-leaks, xamarin.ios, memory-warning

我的 iPad 应用程序是在 MonoTouch 中开发的，因为我想避免所有的内存管理地狱，但似乎并非如此。在模拟器上一切正常，但是当我在设备上测试我的应用程序时，我惊恐地发现它在一些内存警告后很快被操作系统杀死。我的应用程序是一个简单的图像浏览器，它加载一些 PNG 图像并使用 UIScrollView 中的一些 UIView 显示它们，在触摸时加载下一个或上一个。在模拟器上它工作正常。但是在设备上加载和卸载大约 6-11 个图像后，它开始收到内存警告，然后突然进程被终止。我检查了所有实例化周期，并且在加载新图像之前正确删除了所有引用。

所以我启动了 Instruments 并开始分析我的应用在 iPad 上的内存分配。在那里我发现 Live 字节只有大约 5-9 MB，这正是我的预期，但由于某种奇怪的原因，几乎没有收集到死内存分配，因为在分配了大约 50 MB（小于 5-9 MB它是 Live Bytes）它被杀死了！这是我的应用程序的仪器分析会话的屏幕截图：

![记录monotouch下内存分配问题的仪器截图](../Images/840b05df50ba7208d9a0340e1a0185ba.png)

这是heapshots序列：

![我的应用程序在仪器中的快照](../Images/e559eb19ea51914a8907872c5cae31cc.png)

也有一些小的泄漏，但我认为它们还不足以成为罪魁祸首。它们都是来自 strdup 的 48 字节泄漏，这是在 iOS 5.1 中发布 UIScrollView 时的一个已知问题：

![在此处输入图像描述](../Images/f997c45c9839925f4085f0fea2fb9a7c.png)

即使看起来一切正常，分配的 Live Bytes 仍为 5 MB，但我的应用程序的实际内存呈指数增长，然后在 iPad 上达到 50MB，在 iPhone4S 上达到 314 MB，如 Memory Monitor 报告的那样：

![我的应用程序在 iPhone4S 上的内存增长](../Images/8e67a5c862d1f0f83c7b740472e9dc90.png)

有人可以告诉我是否有方法或实用程序来发现问题所在和位置？这是monotouch垃圾收集器的错误吗？还是有一些我没有正确处理的物品？以及如何使用探查器找到那些？我已经检查了我的代码两天，但一切似乎都是正确的。

这是我的加载/实例化/处置周期代码：

```
 void StartImageLoadingThread()
{
    tokenSource = new CancellationTokenSource ();
    token = tokenSource.Token;
    Task task1 = new Task( () => PerformLoadImageTask(token),token);
    task1.Start();
}

void PerformLoadImageTask(CancellationToken token)
{
        if (token.IsCancellationRequested)
                {
                     Console.WriteLine("Task {0}: Cancelling", Task.CurrentId);
                return;
                }

            current_uiimage_A = UIImage.FromFileUncached(file_name);
            page_A_image_view.Image = current_uiimage_A;

} 

void UnloadImageAFromMemory()
{
      page_A_image_view.Image = null;
      current_uiimage_A.Dispose();
      current_uiimage_A = null;
} 
```

是否有一种方法可以捕获未正确处理的对象？Instruments 报告活动字节很低，泄漏几乎为零，那么为什么不处理死对象呢？即使我的应用程序几分钟内什么都没发生，GC 似乎也没有完成他的工作，即使我在我的代码中明确地称之为它。我什至尝试了新的实验性垃圾收集器，但让我的应用程序被杀死的情况更糟、更快。

我在 Xamarin 网站上找不到任何用于解决内存警告或跟踪错误分配的指南或分步指南。

非常感谢任何帮助或建议，谢谢！

更新：我降低了一些图像和 uiview 的大小和分辨率，Live Bytes 现在从 9 MB 降至 5 MB，但无论如何，在一些内存警告之后，该应用程序仍然被终止。

更新 2：正如 Javier 所建议的，我已经删除了后台任务并直接进行了调用，并且内存泄漏消失了！似乎 MonoTouch 垃圾收集器有一个错误，当 UIImages 分配和处理在不同的线程中时，它无法收集内存。但是现在当我滚动时，我的应用程序非常没有响应，所以我需要找到一个解决方案来在不同的线程中执行它！但是怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:02:32.670

您需要在图像创建代码周围使用 NSAutoreleasePools，如下所示：

```
void PerformLoadImageTask(CancellationToken token)
{
    if (token.IsCancellationRequested)
    {
         Console.WriteLine("Task {0}: Cancelling", Task.CurrentId);
         return;
    }

    using (var pool = new NSAutoreleasePool ()) {
        current_uiimage_A = UIImage.FromFileUncached(file_name);
        page_A_image_view.Image = current_uiimage_A;
    }
} 
```

对于某些创建对象的 API，对象将被添加到自动释放池中，并且在池耗尽之前不会释放。MonoTouch 自动为所有用户线程（包括线程池、TPL 和普通 System.Threading 线程）创建自动释放池，但这些池在线程退出之前不会耗尽（在线程池和 TPL 线程的情况下您无法控制）。所以解决方案是在关键代码周围使用 NSAutoreleasePool （释放时池会自动排空）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T09:01:00.140

我遇到了问题`UIImage.FromFile`。我的应用程序正在使用任务加载大量 png 图像，并将其显示在主线程中。

我`GC.Collect`在后台任务中添加了一个，但它并没有解决问题。我必须删除后台任务，在主线程中执行所有操作并调用`GC.Collect`. 似乎 Image.Dispose 没有释放图像内存:(

但是当你有其他任务时它不起作用，所以我不得不删除它:(

是的，它不工作....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T18:29:59.520

这对我来说很有趣，我刚开始研究内存管理，我什至不确定 null 和 object 和调用 dispose 是否必不可少，因为范围规则应该为您完成这项工作？但是，它将帮助垃圾收集器尽快完成。

明确要求垃圾收集器运行是一个请求，而不是保证。

我*猜想*在 ui 线程上创建的对象正在被 ui 线程外部的一个引用，并且会在那里查看，但我不确定。

我期待看到这方面的更新，因为我确信我会遇到类似的问题！

祝你好运，罗伯

# c# - 如何在 WPF 中模仿 OneNote 样式表？

> ID：10373468
> 
> 赞同：0
> 
> 时间：2012-04-29T15:42:44.890
> 
> 标签：c#, wpf, templates, styles

我看到 MS OneNote 有一种特殊的风格，比如一张纸。我想实现这个背景作为我的背景窗口，你能帮我创建这个模式吗？

提前致谢。

![在此处输入图像描述](../Images/ff1d81497e4259b7547408285d4a9390.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:28:34.030

为记事本的一行创建一个图像，将其设置为背景并使用[VisualBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.visualbrush.aspx)或[ImageBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.imagebrush.aspx)平铺它。

**更新：**

如果您垂直平铺这样的图像，则会为您绘制红线。

![笔记本背景样本](../Images/719e85940600d0f30985338b341ef96e.png)

XAML：

```
<Grid>
    <Grid.Background>
        <ImageBrush TileMode="Tile" Stretch="UniformToFill" Viewport="0,0,1,.2" AlignmentX="Left" AlignmentY="Top" ImageSource="ruled.jpg" />
    </Grid.Background>
</Grid> 
```

# java - 使用 Appengine 进行多线程

> ID：10373469
> 
> 赞同：4
> 
> 时间：2012-04-29T15:43:11.087
> 
> 标签：java, google-app-engine

既然 Appengine 不允许 java 多线程，那么我们如何将现有的多线程代码迁移到平台上呢？

例如我有以下代码：

```
 Thread t = new Thread() {
        public boolean alive = true;
        public void run() {
            while (alive) {
                try {
                    Thread.sleep(5000);    
                    getNewNotifications();
                } catch (InterruptedException e) {
                    //  Do nothing
                } catch (IOException e) {
                } 
            }
        }
    };
    t.start() 
```

函数 getNewNotification() 执行了一些 Rest/HTTP 调用，其中可能包括一些可能无限期返回的其他进程。我已经阅读了`Task Queue`解决方案，但是我们如何将这个简单的代码转换为 App 引擎友好的代码？

上面的代码是如何使用任务队列实现的？例如`getNewNotifications()`每五秒调用一次。

该函数将从服务器获取一些结果，解析结果，然后根据结果执行它需要执行的活动/工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T17:59:44.063

您可以在 java appengine 中创建线程。

ThreadManager.createThreadForCurrentRequest(new Runnable(){...});

请参阅[https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/ThreadManager](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/ThreadManager)

当请求完成时，前端线程将被中断并杀死，但生成的后端线程可以运行任意长的时间。另外，当你捕捉到 InterruptedException 时，尽量不做任何事情；吞下这个异常可能会导致实例保持在线，并且会花费你更多的钱。

如果您想让您的代码与 Runnable 和任务队列一起工作，只需同时实现 Runnable 和 DeferredTask；两个接口具有相同的方法签名。要调度延迟任务，只需执行 QueueFactory.getQueue("queueName").add(TaskOptions.Builder.withPayload(YourDeferredTask));

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T16:16:00.903

您可能还对[后端](https://developers.google.com/appengine/docs/java/backends/overview)感兴趣。后端可以作为后台线程（实验性功能）运行，因此它们可以像您以前那样用于轮询。但是，如果可能的话，使用任务可能更有效。如果通知来自应用程序的其他部分，您可以直接创建任务而不是创建通知。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T17:46:44.663

由于您需要定期执行代码，我建议您[cron](https://developers.google.com/appengine/docs/java/config/cron)。

只需将您的代码放入 servlet 的`get(..)`方法中，将其映射到 Url（通过`web.xml`）并设置 cron 以定期调用此 Url。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T17:48:48.380

根据您的预算（检查后端计费），您也可以通过使用[Scheduled Tasks](https://developers.google.com/appengine/docs/java/config/cron)来实现这一点。

您将在`cron.xml`文件中指定任务：

```
<?xml version="1.0" encoding="UTF-8"?>
<cronentries>
  <cron>
    <url>/getNewNotifications</url>
    <description>Get new notifications every 5 minutes</description>
    <schedule>every 5 minutes</schedule>
  </cron>
</cronentries> 
```

当然，您需要有一个映射到 URL 的 servlet（或您正在使用的任何框架）`/getNewNotifications`。

您还应该确保该[URL 是安全](https://developers.google.com/appengine/docs/java/config/cron#Securing_URLs_for_Cron)的（通常您不希望您的用户调用该 URL）。

# jquery - Using jQuery for vertical and horizontal centering

> ID：10373470
> 
> 赞同：-1
> 
> 时间：2012-04-29T15:43:16.280
> 
> 标签：jquery, center

I'm using jQuery to horizontally center a div element that doesn't have a default width. I'm using the following code, but it's not working. if anyone could help me to understand why, it'd be very helpful. PS, I the height has a default height of 20, so that's where the -10px comes from.

```
var w = ($(".notec").width() + 51) / 2;
$(".buttons").css("margin", "-10px 0 0 -" + w + "px"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T15:48:28.960

Centering with respect to `.notec`. Width is not needed if the element is displaying as block element.

```
var h = ($(".notec").height() - $(".buttons").height()) / 2;
$(".buttons").css("margin", h+"px auto 0 auto'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T15:52:01.663

看看：UI/API/1.8/Position [http://bit.ly/IvUhLF](http://bit.ly/IvUhLF)

```
$(".overlay").hide();
$(".photo_hold").hover(
  function () {
      $(".overlay", $(this)).show();
      $(".buttons", $(this)).position({
          my: "center",
          at: "center",
          of: $(this)
      });
   },
  function () {
      $(".overlay", $(this)).hide();
  }
); 
```

玩弄变量，让它做你需要的

# matlab - 如何在Matlab中计算垂直距离

> ID：10373472
> 
> 赞同：2
> 
> 时间：2012-04-29T15:43:37.217
> 
> 标签：matlab, geometry, distance, computational-geometry

我有一个矩阵`A`（Mx2）和矩阵`B`（Nx2），M>=N。我必须计算垂直欧式距离来测试 A 和 B 之间的相似性。参考图像，单个欧式距离是每个 pi 和 p'i 之间的段，一旦计算了每个垂直距离，我就可以计算平均值或sum 得到一个参数。您知道执行此操作的 matlab 例程或此类脚本吗？ ![在此处输入图像描述](../Images/0b70df4394b8492f090d1ab9f6b1721f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:28:46.293

如果您知道 p1 .. p4 位于 p0 和 p5 之间，那么您可以使用三角形的面积轻松计算垂直距离：

```
d(p0p5, p1) = 2 * area(p0p1p5) / norm(p5-p0) 
```

三角形的面积由下式求出

```
area(p0p1p5) = sqrt(s * (s-norm(p0-p1)) * (s-norm(p1-p5)) * (s-norm(p5-p0))) 
```

在哪里

```
s = (norm(p0-p1) + norm(p1-p5) + norm(p5-p0)) / 2 
```

我认为您可以使用投影的点积和勾股定理来提高性能：

```
d(p0p5, p1) = sqrt(norm(p1-p0)^2 - dot(p1-p0,p5-p0)^2/norm(p5-p0)^2) 
```

在任何一种情况下，如果您的成本函数涉及均方误差，您可以`sqrt`通过仅评估平方误差来消除调用。范数平方的计算也比调用`norm`然后平方（使用点积代替）更便宜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:29:43.193

您可以`dist`从神经网络工具箱中使用。

`A`并且`B`是 nx 2 矩阵，这是计算距离总和的一种可能方法（伪代码）： sum(sqrt((A_1x - B_1x)^2 + (A_1y - B_1y)^2), ..., sqrt( (A_nx - B_nx)^2 + (A_ny - B_ny)^2)，或：sum(p1-p'1, ..., pn-p'n)。

这些矩阵 (`A`和`B`) 中的每一个都保存 2D 空间中 n 个点的 x 和 y 坐标（在本例中 n = 3）。

```
% Some example matrices, size 3 x 2.

A = [ 10 22; 35 48; 16 42 ];
B = [ 5 7; 8 11; 33 22 ];

DistanceMatrix = dist([A' B']);
DistanceMatrix(1:size(A,1),:) = [];
SumOfDistances = sum(diag(DistanceMatrix));

SumOfDistances =
87.8641 
```

# eclipse - Use Ant for post-processing code optimization

> ID：10373474
> 
> 赞同：0
> 
> 时间：2012-04-29T15:43:42.950
> 
> 标签：eclipse, optimization, ant, post-processing

Is it possible in Eclipse to use Ant for post-processing in order to optimize Php/Html/Css/Javascript code?

All sorts of user code can be optimized (comment removal, minification, optimization, image minification etc)

My plan is to make an environment where programmers sort-of compile(optimize) the code before sending it to web server (apache lets say).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:33:15.710

是的，这是可能的。右键单击您的项目，选择“Properties...”，然后转到*Builders*配置面板，添加一个新的 Ant 构建器，并选择在哪个时刻必须运行哪些目标。

# facebook - Can't publish "news.reads" action (paradox included!)

> ID：10373475
> 
> 赞同：2
> 
> 时间：2012-04-29T15:43:53.793
> 
> 标签：facebook, oauth, facebook-opengraph

I recently [asked about some issues I encountered while try to get the Open Graph working](http://facebook.stackoverflow.com/questions/10366509/open-graph-calls-generating-oauth-exception/10366823#10366823). To solve the issue there, I had to create a second action called `read`. However, since Facebook prefers that their default actions be used, I am afraid that when I submit that action, facebook will reject it as it is too similar to their own `news.reads`.

I'd like to *use* `news.reads`, but when I try to make calls to it, I receive an OAuthException error stating that `news.reads` is not submitted, and can only be used by an admin, developer, or tester. Ironically, I am the sole admin, so this should be a non-issue.

If I try to submit `news.reads`, one of the requirements is to make at least one `publish_action` call to that action.

.. except I can't bloody well make that call if the Graph won't let me, can I? ;)

Is this a Graph API bug?

* * *

**Edit**: [According to this question](http://facebook.stackoverflow.com/questions/8412612/is-the-news-reads-action-on-the-open-graph-available-yet), the `news.reads` call was made public Jan 18th.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:18:08.767

在阅读[https://developers.facebook.com/docs/reference/plugins/recommendationsbar/时](https://developers.facebook.com/docs/reference/plugins/recommendationsbar/)

...为了使用 Open Graph 发布，应用程序必须启用“增强的身份验证对话框”迁移。这可以从“编辑应用程序”页面的“高级”设置中完成。你启用了吗？

# actionscript-3 - How can I keep framerate high when animating lots of pencil-tool-drawn graphics?

> ID：10373476
> 
> 赞同：4
> 
> 时间：2012-04-29T15:43:55.813
> 
> 标签：actionscript-3, flash

I'm working on a game and I have a bunch of animating movie clips moving at the same time. Normally my games just have simple shapes, but this time I'm upping the production value by going inside each movieclip and using the pencil tool to draw a nice image with shading, etc. It's a lot of lines.

The problem is that when I go to animate these, then the framerate drops to about 2 fps. I have about 10-20 objects animating at the same time.

Things I've tried: - Using Flash's Optimize feature (No change) - Exporting the line drawings as a png and then reimporting (Helped some, but quality went down, and it still was only about 10fps)

What can I do to have great looking flash art and animations but still keep framerate high? I know there must be a standard workflow here that I'm missing.

Thanks so much!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T22:00:32.440

注意：我是 Scarygirl 的两个开发者之一。

当您在 PC 上时，我们的位图缓存动画效果非常好，尤其是在内存很大的情况下。我们缓存了我们所有的角色动画，除了 Scarygirl 自己，因为她的动画太多了，而且她可以改变大小。

在移动设备上，以这种方式使用动画缓存并不是最佳选择，因为切换位图很慢，写入位图很慢，而且它们的内存比大多数 PC 少。Starling 在这里很好，因为它被编写为以优化的方式使用硬件。

Starling（和类似产品）的问题在于工具和细节。您要么必须在事先导出每个帧的地方进行 spritemap blitting（大小膨胀，工具链较大等），要么只进行补间动画，而没有这么好的工具。

我们还有一个新的测试也集成了 SpriteSheets。至少对于 PC 来说这似乎更慢，尤其是在不使用 Canvas3D 时！

[http://blog.touchmypixel.com/2008/11/caching-animation-frames-vs-spritesheets/](http://blog.touchmypixel.com/2008/11/caching-animation-frames-vs-spritesheets/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:10:57.490

我建议使用 tilesheets 的 blitting 作为非硬件加速的方式来提高动画对象的帧速率。我很确定 cacheAsBitmap 必须在每个关键帧上重绘。

因此，对于您的动画，您需要创建一个 tilesheet，其中包含布局在矩形位图上的动画的每一帧（如果需要，您可以在运行时计算它）。

然后在渲染时，您从 tilesheet 中查找所需帧的像素位置，然后通过 copyPixel 函数将此区域绘制到渲染位图上。然后，渲染位图就是您用来显示图形的东西。

我相信屡获殊荣的 Flash 游戏[ScaryGirl](http://www.scarygirl.com/)使用了这种技术进行渲染。您可以在开发者博客上找到更多信息

[http://blog.touchmypixel.com/2008/04/as3-bitmap-cached-animations/](http://blog.touchmypixel.com/2008/04/as3-bitmap-cached-animations/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T21:57:22.007

借助 Flash 11 的新 Stage3D api，可以使用 2D 硬件加速。如果您想让事物尽可能接近普通类*（Sprite、DisplayObject 等）*，而不必担心所需的低级 AGAL 和着色器等，那么我推荐 Starling。这是一个很棒的框架，可以让您使用硬件加速的惊人速度优势，而无需学习任何您不知道的东西。

有关更多信息，请查看[http://gamua.com/starling/](http://gamua.com/starling/)。这是您想要实现的最快的选择，我建议您尝试他们的演示，看看它的实际性能如何。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T04:49:11.740

事实证明，线条和曲线的数量对帧率有很大的影响。如果您将铅笔工具用作一种素描工具，那么您最终会得到数千条曲线。使用钢笔工具要好得多，并且行数少可以保持高帧率。

对我来说很好的学习课。感谢大家的帮助！

# mysql - Grouping SQL recordset by/into alphabetical order with a letter range

> ID：10373477
> 
> 赞同：0
> 
> 时间：2012-04-29T15:44:05.033
> 
> 标签：mysql, grouping, alphabetical

Normally I'd do my homework properly first, but I'm up against a deadline now and thought I'd throw this out there for some help, mainly because I know from previous experience anything I think is complex is actually a breeze for SQL.

I'm looking to group my results by a letter range, not just an individual letter. So, ultimately I'd like my output to be something like

```
ABCD:
-- Alpha
-- Bravo
-- Charlie
-- Delta

EFGH:
-- Echo
-- Foxtrot
-- Gulf
-- Hotel 
```

Until now I've been using `ORDER BY LOWER(name) ASC` and then just copying records into an array structure to get the single letter grouping (A, B, C, etc.), but that would need expanding to group by a letter range, and I'm wondering it there's a faster/more efficient way of doing it.

Pure SQL solution? Or post-processing in PHP?

Tips, tricks, full answers appreciated as always.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:21:06.887

这有点难看，但尝试像这样使用 UNION：

```
SELECT * FROM (
    SELECT 'ABCD' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('A','B','C','D')
    UNION
    SELECT 'EFGH' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('E','F','G','H')
    UNION
    SELECT 'IJKL' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('I','J','K','L')
    UNION
    SELECT 'MNOP' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('M','N','O','P')
    UNION
    SELECT 'QRST' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('Q','R','S','T')
    UNION
    SELECT 'UVWX' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('U','V','W','X')
    UNION
    SELECT 'YZ' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('Y','Z')
) AS myResults ORDER BY mygroup,name 
```

在 GROUP BY 中添加一点会得到像 COUNT 这样的聚合结果：

```
SELECT myGroup, COUNT(name) as myGroupCount FROM (
    SELECT 'ABCD' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('A','B','C','D')
    UNION
    SELECT 'EFGH' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('E','F','G','H')
    UNION
    SELECT 'IJKL' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('I','J','K','L')
    UNION
    SELECT 'MNOP' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('M','N','O','P')
    UNION
    SELECT 'QRST' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('Q','R','S','T')
    UNION
    SELECT 'UVWX' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('U','V','W','X')
    UNION
    SELECT 'YZ' AS myGroup, name FROM users WHERE LEFT(name,1) IN ('Y','Z')
) AS myResults GROUP BY mygroup ORDER BY mygroup,name 
```

# android - weird activity behaviour

> ID：10373483
> 
> 赞同：0
> 
> 时间：2012-04-29T15:45:01.623
> 
> 标签：android, android-activity, android-lifecycle

I'm new to android and I'd like to develop simple game.

I have read about the Activity lifecycle on [the official android site](http://developer.android.com/guide/topics/fundamentals/activities.html) and also here on stackoverflow, but I need a little help with pausing/resuming the game :-/

I had expected some scenerio similar to the lifecycle diagram, but when I lock the screen, method `Activity.onDestroy()` is also called, but then `onCreate()` is called again. I am confused as `onRestart()` is not being called!

I know about the problem with screen orientation, and have added `android:screenOrientation="landscape"` which was supposed to help.

I'm happy with the other game mechanics such as animating, colisions etc, which are well described on the internet, but I can't manage pausing/resuming.

Could someone recommend a comprehensive tutorial or give a code example? Anything covering how to build the skeleton of simple game, which can be paused, saved, etc would be much appreciated.

thanks a lot

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:01:39.677

尝试从调用游戏、surfaceView 或其他东西的活动中管理游戏线程......在线程中使用一些公共方法，暂停和恢复它们。在活动 onResume() 和 onPause() 中使用这些方法。也可以在暂停游戏时尝试停止线程，并在恢复时 - 创建一个新线程并启动它们。

# javascript - Javascript在关键字后剪切文本

> ID：10373486
> 
> 赞同：0
> 
> 时间：2012-04-29T15:45:29.970
> 
> 标签：javascript, replace

我有带有转换后的 html 和换行符和制表符的文本以及任何其他符号，例如：

```
…
          &lt;/div&gt;
        &lt;/div&gt;
      {/block:Faver}
          &lt;/body&gt;
&lt;/html&gt;
some so bad text
what i need to cut 
```

我需要用javascript（或jquery，如果需要）剪切关键字后的所有文本：

```
&lt;/html&gt; 
```

有什么想法或例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T15:47:01.823

```
myStringThatContainsStuffToCut.split("&lt;/html&gt;")[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T15:53:32.827

您可以使用正则表达式来完成。通常，你需要'm'修饰符，用于多行，'s'修饰符，用于dotall。参考这里：

[http://www.regular-expressions.info/modifiers.html](http://www.regular-expressions.info/modifiers.html)

但是，javascript 中不存在 dotall 修饰符，所以我通常会选择一个字符类“[\x00-\xff]”。这个正则表达式替换应该可以解决问题：

```
resultString = yourInputString.replace(/(&lt;\/html&gT;)[\x00-\xff]*/m, "$1"); 
```

# php - Change password for a user in CakePHP 2.1

> ID：10373492
> 
> 赞同：4
> 
> 时间：2012-04-29T15:46:44.407
> 
> 标签：php, cakephp

I'm building a page where a user can change their password. They must fill two fields and both must match before it will be changed and then they will be redirected to their profile page on success.

So far I have built the following method:

```
public function changePassword()
{

    $user = $this->User->find('first', array( 
                'conditions' => array(
                    'User.id' => $this->Auth->user('id')) 
            ));

    if ($this->request->is('post') || $this->request->is('put'))
    {
        if ($this->User->save($this->request->data))
        {
            $this->User->saveField('password', AuthComponent::password($this->request->data['User']['password2']));

            $this->Session->setFlash(__('Your password has been changed!'));
            $this->redirect(array('controller'=>'profiles','action'=>'view','userName'=>$user['User']['username']));
        }
        else
        {
            $this->Session->setFlash(__('Whoops! Something went wrong... try again?'));
        }
    }

} 
```

and this is the form:

```
<?php echo $this->Form->create(); ?>

    <?php echo $this->Form->input('id',array('type'=>'hidden')); ?>

    <?php echo $this->Form->input('password1',array('type'=>'text','label'=>array('text'=>'Enter your new password'))); ?>

    <?php echo $this->Form->input('password2',array('type'=>'text','label'=>array('text'=>'Confirm your new password'))); ?>

    <button type="submit">Save</button>

<?php echo $this->Form->end(); ?> 
```

So as you can see the plan is to take what it says in password2 and save it in the database password field using the security hashing. But what happens is it creates a new user instead but with blank data... What am I doing wrong here? And how do I compare the two password fields...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:57:38.693

最可能的问题是您以某种方式将表单中的 id 丢失回控制器操作。如果数据数组 cake 中不存在 id，则假定它必须创建一个条目。

因此调试您发布的数据并确保它没有丢失或更好地在保存之前手动分配 id。

```
$this->request->data['User']['id'] = $this->Session->read('Auth.User.id'); 
```

PS：从您的方法来看，您隐藏的“id”字段始终为空，因为 $user 数据没有从控制器传递下来！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T05:54:01.317

公共功能恢复（）{

```
 if ($this->request->is('post') )
    {
        $this->loadModel('AclManagement.User');
        $passwords = AuthComponent::password($this->data['User']['password']);

        $this->User->query("UPDATE users SET password = '".$passwords."' WHERE password_change = '".$this->request->data['User']['id']."' ");
        $this->Session->setFlash(__('Password Saved Sucessfully'), 'success');
        $this->redirect(array('action' => 'login'));    
    }
    else
    {
        $this->set('resettoken', $_REQUEST['id']);  
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:14:19.683

```
$this->request->data['User']['password2'] = AuthComponent::password($this->request->data['User']['password2']);

$this->User->save($this->request->data); 
```

As your form submit with auth user `id` so, if you execute `save()` with request data, cake will simply update your record, instead of create due to `id` field(if any record exists against this `id`in the table). Above code just update the `password2` with the Hash password within the request data.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T18:59:55.490

您不应该在表单中指定操作编辑吗？

```
 echo $this->Form->create('User', array('action' => 'edit')); 
```

# javascript - How can I use the Linkedin Javascript API as a login for my own website?

> ID：10373497
> 
> 赞同：5
> 
> 时间：2012-04-29T15:47:05.973
> 
> 标签：javascript, authentication, linkedin

I would like to use the linkedin javascript API as a way to login to my website as it seems far more end user friendly than using OAuth (ie: nicer to use with just a small popup to log into linked in).

How can i use the information returned by linked in to securely log a user into my own website so that it can't be forged? Or do I need to provide an extra password that a user must enter?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-01-15T12:31:34.473

该代码由两个`<script>`标签组成。第一个包含对 LinkedIn 库的引用和 API 密钥的声明。

```
<script type="text/javascript" src="//platform.linkedin.com/in.js">
    api_key: <LinkedIn API Key>
</script> 
```

第二个标签具有所需的功能。liLogin() 函数将在用户单击 Login with LinkedIn 按钮时调用。您可以在此处定义应用程序所需的数据范围。

getProfileData() 函数在身份验证后调用，并进行第二次调用以获取请求的数据。如您所见，您在响应中声明了所需的数据。

```
<script>
    var liLogin = function() { // Setup an event listener to make an API call once auth is complete
        IN.UI.Authorize().params({"scope":["r_basicprofile", "r_emailaddress"]}).place();
        IN.Event.on(IN, 'auth', getProfileData);
    }

    var getProfileData = function() { // Use the API call wrapper to request the member's basic profile data
        IN.API.Profile("me").fields("id,firstName,lastName,email-address,picture-urls::(original),public-profile-url,location:(name)").result(function (me) {
            var profile = me.values[0];
            var id = profile.id;
            var firstName = profile.firstName;
            var lastName = profile.lastName;
            var emailAddress = profile.emailAddress;
            var pictureUrl = profile.pictureUrls.values[0];
            var profileUrl = profile.publicProfileUrl;
            var country = profile.location.name;
        });
    }
</script> 
```

要获取 LinkedIn API 密钥，请访问[LinkedIn Developers](https://developer.linkedin.com/)。转到我的应用程序，然后单击创建应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:35:13.737

来自马口： [https](https://developer.linkedin.com/documents/sign-linkedin) ://developer.linkedin.com/documents/sign-linkedin 概述： [http ://thinlight.org/2011/08/07/using-facebook-and-other-sites-as-用户身份验证系统/](http://thinlight.org/2011/08/07/using-facebook-and-other-sites-as-user-authentication-system/)

我不是很肯定，但我认为您对 Oauth 是什么感到困惑。有很多用于各种 CMS/语言的 Oauth 插件可以无缝集成（只需一点点努力）——所以最终用户体验是“点击登录”

# hadoop - How to schedule Hadoop Map tasks in multi-core 8 node cluster?

> ID：10373498
> 
> 赞同：5
> 
> 时间：2012-04-29T15:47:21.100
> 
> 标签：hadoop, mapreduce, cloudera

I have a "map only" (no reduce phase) program. The size of input file is large enough to create 7 map tasks and I have verified that by looking the output produced (part-000 to part006) . Now, my cluster has 8 nodes each with 8 cores and 8 GB of memory and shared filesystem hosted at head node.

My question is can I choose between running all the 7 map tasks in 1 node only or running the 7 map tasks in 7 different slave nodes (1 task per node). If I can do so, then what change in my code and configuration file is needed.

I tried setting the parameter "mapred.tasktracker.map.tasks.maximum" to 1 and 7 in my code only but I didnot find any appreciable time difference. In my configuration file it is set as 1.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T16:10:38.263

`"mapred.tasktracker.map.tasks.maximum"`处理应该在每个节点上启动的地图任务的数量，而不是每个地图任务要使用的节点数量。在 Hadoop 架构中，每个节点（从属节点）有 1 个任务跟踪器，主节点（主节点）上有 1 个作业跟踪器。所以如果你设置了这个属性`mapred.tasktracker.map.tasks.maximum`，它只会改变每个节点要执行的地图任务的数量。的范围`"mapred.tasktracker.map.tasks.maximum"`是从`1/2*cores/node`到`2*cores/node`

应该使用设置您想要的总体地图任务数`setNumMapTasks(int)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:10:01.927

如果可能，您绝对应该在 7 个不同的节点上运行 7 个地图任务。MapReduce 的全部优势在于能够并行化您的计算，以便每个任务尽可能高效地运行。如果您在一个节点上运行 7 个地图任务，则每个任务将在该节点上竞争相同的资源（RAM、CPU、IO）。

标准设置`mapred.tasktracker.map.tasks.maximum`是每个核心一个，因此您可以将设置更改为 8。

此外，如果您有一个仅 Map 的工作，您将需要一个很好的理由将映射器的数量设置为特定数量。设置地图任务的数量只是对作业跟踪器运行多少地图的“提示”，但这最终由作业跟踪器根据 DFS 存储输入数据的方式来决定。[这个维基有更多细节。](http://wiki.apache.org/hadoop/HowManyMapsAndReduces)

但是，在某些情况下，您确实希望控制减少任务的数量。例如，如果我想要一个排序的数字列表，我会想要确保我的所有数据都通过一个 reducer。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T18:51:43.227

> 现在，我的集群有 8 个节点，每个节点有 8 个内核和 8 GB 内存以及托管在头节点上的共享文件系统。

当您说共享文件系统托管头节点时，您的意思是数据托管在 HDFS 上，还是安装在每个节点上的某些 NFS 之类的文件系统上？我猜你的意思是 HDFS，但如果你使用 NFS 或类似的东西，那么你应该期望看到 HDFS 更高的吞吐量（你想将处理代码移动到数据，而不是将数据移动到处理机器)

你的输入文件有多大，它的分割大小、文件格式（文本、序列等）、复制因子和压缩方法是多少？

根据上述问题的答案，使用 8x8 设置，如果减少地图拆分大小并提高复制因子，您可能可以获得更好的吞吐量。

# python - 使用pylab同时显示两个png图像

> ID：10373500
> 
> 赞同：14
> 
> 时间：2012-04-29T15:47:31.300
> 
> 标签：python, png, matplotlib, grayscale

我想打开两个 png 图像文件并将它们并排显示以进行视觉比较。我有这段代码用于打开一个 png 文件（我从 stackoverflow.com 上的 unutbu 获得）：

```
import numpy as np
import pylab
import matplotlib.cm as cm
import Image

fname='file.png'
image=Image.open(fname).convert("L")
arr=np.asarray(image)
pylab.imshow(arr,cmap=cm.Greys_r)
pylab.title('title')
pylab.show() 
```

有没有办法修改此代码以打开并并排显示 2 个 png 文件及其自己的标题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-29T16:15:30.647

以下对我有用（您可以注释/取消注释代码中的行以更改“复合”图像的布局）：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import numpy as np
import pylab
import matplotlib.cm as cm
import Image

f = pylab.figure()
for n, fname in enumerate(('1.png', '2.png')):
    image=Image.open(fname).convert("L")
    arr=np.asarray(image)
    f.add_subplot(2, 1, n)  # this line outputs images on top of each other
    # f.add_subplot(1, 2, n)  # this line outputs images side-by-side
    pylab.imshow(arr,cmap=cm.Greys_r)
pylab.title('Double image')
pylab.show() 
```

**编辑**：截图：

![在此处输入图像描述](../Images/fbf483d4113c71eeb680154b8c3c6e06.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:10:40.797

这是一个在一个图中包含两个子图的示例。

```
import pylab

coordinates = range(5)
x = [1,4,5,6,2]
y = [4,6,8,9,2]

fig = pylab.figure()

fig_1 = fig.add_subplot(2,1,1)

fig_1.bar(coordinates,x)

fig_2 = fig.add_subplot(2,1,2)

fig_2.bar(coordinates,y)

pylab.show() 
```

我认为你只需要将它与你已有的结合起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-02T23:17:35.477

将上面的答案结合到我现在使用的一些代码中：

`

```
import pylab as P
import numpy as N
import Image

fnames = ['1.png', '2.png', '3.png']

fig = P.figure()
for i,fname in enumerate(fnames):
    fig.add_subplot(number_images, 1, i+1)
    P.imshow(N.asarray(Image.open(fname).convert("L")))
P.show() 
```

`

# php - How to append and replace text in URL with jQuery without reloading?

> ID：10373504
> 
> 赞同：0
> 
> 时间：2012-04-29T15:48:11.383
> 
> 标签：php, jquery, ajax, wordpress

I have done pagination in wordpress with Jquery/Ajax/wp_pagenavi() which instead of reloading page refreshes only a div to load new content, it works fine but I would like to update part of URL as well - without reloading the page.With jQuery pagination url for Page 1, Page 2, Page 3 doesn't change and is always same : myhost.com/category/

I want it look as it would look with standard pagination :

add '/page/$paginated_page_number/' to base URL which is myhost.com/download/category/

```
myhost.com/download/category/page/2/
myhost.com/download/category/page/3/
myhost.com/download/category/page/4/  ... ... 
```

I also plan to use jQuery div refresh for tags and I need to change part of URL without reloading page, when tag is choosen I will refresh div with new content and update URL :

replace : '/download/category/' to '/tag/$choosen_tag/'

How to replace part of URL without reloading the page ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:57:08.910

您所描述的内容听起来像 HTML5 [pushState](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate)。这个新的 API 允许开发人员通过 JavaScript 更改浏览器中显示的 URL，而无需重新加载页面。

我必须警告您，IE 尚不支持此功能。IE 团队计划在版本 10 中支持它。

更多关于[浏览器历史操作](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)的信息。

希望能帮助到你。

# android - 如何显示不同颜色的边缘以及不同颜色的面（android）

> ID：10373505
> 
> 赞同：0
> 
> 时间：2012-04-29T15:48:18.373
> 
> 标签：android, opengl-es

我画了一个带三角条的立方体并给它上色。这个立方体是 16 个顶点的 triangle_strip。但现在我必须用白色显示它的边缘。谁能告诉我如何实现它。以下代码片段显示我绘制了一个立方体。

```
 vertices.put(x).put(y).put(z); //1
    vertices.put(x).put(y).put(z);//2
    ........

    vertices.put(x).put(y).put(zz);//16
     gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertices);

    gl.glColorPointer(4, GL10.GL_UNSIGNED_BYTE, 0, colors);

    gl.glRotatef(angle, 0.1f, 1.0f, -0.1f); // Rotate 

    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertexCount); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:22:14.023

您需要做的是绘制立方体，然后在`GL_LINES`模式下再次绘制立方体的边缘。

为避免深度缓冲区出现问题，您可以使用[glPolygonOffset](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPolygonOffset.xml)使线条略有偏差，以便它们显示在立方体的前面。

# iphone - 邮件编辑器在 iPhone 上崩溃

> ID：10373507
> 
> 赞同：0
> 
> 时间：2012-04-29T15:48:30.200
> 
> 标签：iphone, ios, autorotate, mfmailcomposer

我有一个应用程序，在我的 Info-plist 中设置为横向左侧、横向右侧和纵向。但是，我的所有视图控制器通常都在横向模式下运行，并且我已经设置

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{return interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight;} 
```

除了视图控制器，我有一个按钮，我想允许用户发送电子邮件。

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{return YES;} 
```

当我尝试发送电子邮件时，我的应用程序崩溃了。它在我的 iPad 上运行良好。这是我发送电子邮件的代码。

```
- (IBAction)sendEmail:(id)sender
{
    if ([MFMailComposeViewController canSendMail])
    {
        MFMailComposeViewController *mailComposer = [[MFMailComposeViewController alloc] init];
        mailComposer.mailComposeDelegate = self;

       [mailComposer setSubject:@"HI!"];

        UIImage *myImage = [UIImage imageNamed:@"myPicture.png"];
        NSData *imageData = UIImagePNGRepresentation(myImage);
        [mailComposer addAttachmentData:imageData mimeType:@"image/png" fileName:@"FullTitle.png"];

       NSString *emailBody = @"Hi there!!";
        [mailComposer setMessageBody:emailBody isHTML:NO]; 

        [self presentModalViewController:mailComposer animated:YES];
    }

    else 
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure" 
                                                        message:@"Your device does not support email function"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                             otherButtonTitles:nil];
        [alert show];
    }
}

- (void) mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
    switch (result)
    {
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued.");
            break;
        case MFMailComposeResultSaved:
            NSLog(@"Mail saved: you saved the email message in the drafts folder.");
            break;
        case MFMailComposeResultSent:
            NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send.");
            break;
        case MFMailComposeResultFailed:
            NSLog(@"Mail failed: the email message was not saved or queued, possibly due to an error.");
            break;
        default:
           NSLog(@"Mail not sent.");
             break;
    }

    [self dismissModalViewControllerAnimated:YES];
} 
```

我不确定，但我可能以某种方式将自己锁定在横向模式，所以当我想发送电子邮件时，iPhone 想要旋转到纵向，但似乎不允许这样做。我在控制台中没有看到任何错误消息。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T11:33:37.210

我在 iOs 6.0 中发现的一个问题是，如果您在设备上没有任何已配置的邮件，应用程序将会崩溃。只需检查一下

```
if([MFMailComposeViewController canSendMail])
{
       [self presentViewController:yourMailComposer animated:YES completion:nil];

} 
```

通过上述检查，我们可以避免崩溃。请注意，我正在使用 iOs 6.1。希望会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:39:14.653

您的应用程序可能内存不足，这是由调用 UIImagePNGRepresentation() 引起的。此函数在创建 NSData 时将整个图像复制到内存中。图像越大，使用的内存就越多。这个问题的一个可能的解决方案是使用 UIImageJPEGRepresentation() 而不是 UIImagePNGRepresentation() 并将类似 0.6 的值传递给 compressionQuality 参数。更多信息可以在 Apple 的文档中找到：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImageJPEGRepresentation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImageJPEGRepresentation)

# c# - 返回一个 Json 对象不起作用，只返回一个字符串会

> ID：10373510
> 
> 赞同：0
> 
> 时间：2012-04-29T15:48:42.143
> 
> 标签：c#, jquery, asp.net-mvc, json

我正在尝试将 json 对象列表返回到视图，但是它不喜欢它是一个对象，如果我返回一个字符串或字符串列表，它将起作用。但实际上我不需要视图中的整个对象，我真的只需要名称和 ID。我如何更改它以将名称列表和匹配的 Id 返回到视图，然后将所有名称插入/更新到列表框中？任何帮助表示赞赏。:)

```
 [AcceptVerbs(HttpVerbs.Get)]
    public JsonResult GetUserStories(int id)
    {
        var userstorylist = userRepository.Select().Where(x => x.EpicId.Equals(id)).ToList();
        var userstorynames = userstorylist.Select(x => x.Name);

        return Json(userstorynames, JsonRequestBehavior.AllowGet);
    } 
```

看法：

```
 $.getJSON("/Estimate/GetUserStories", $.param({ id: selectedid }, true), function (result) {
            $(".UserStoryListBoxClass").html("");
            for (var item in result) {
                $(".UserStoryListBoxClass").append($("<option>" + result[item] + "</option>"));
            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T15:55:17.687

如果你的`json`结果是这样的

```
[{"Id": "1","Name": "Skeet"},{"Id": "2","Name": "Darin"}] 
```

下面的代码将工作，

```
 $.getJSON("/Estimate/GetUserStories", $.param({ id: selectedid }, true), function (result) {
    var items="";
    $.each(result, function(index) {
       items+="<option value="+result[index].Id+">" + result[index].Name+ "</option>";
    });
    $(".UserStoryListBoxClass").html(items);    
 }); 
```

工作示例[http://jsfiddle.net/CFdeW/14/](http://jsfiddle.net/CFdeW/14/)

**永远不要`append`在循环中执行将元素添加到下拉列表中的方法**。始终将其存储到一个变量中，并且**只调用一次**html 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T16:15:47.140

要返回带有 id 和 name 的元组，您可以执行以下操作：

```
var userstorynames = userstorylist.Select(x => new { id = x.Id, name = x.Name }).ToList(); 
```

# iphone - 不在主视图控制器上时不调用 fbDidLogin

> ID：10373511
> 
> 赞同：4
> 
> 时间：2012-04-29T15:48:51.567
> 
> 标签：iphone, ios, xcode, facebook, uiviewcontroller

我是 iOS 开发的新手。我遇到了一个问题，在我的应用程序中集成 facebook API 时没有调用 fbDidLogin。当我从主视图控制器（即应用程序委托调用的那个）调用 API 时，一切正常，但在我的情况下，它在设置视图控制器下。我从字面上将代码从主视图控制器（它工作的地方）复制到设置视图控制器，它在那里不起作用。

我确实将此方法添加到应用程序委托中，我理解这是大多数人的问题，但就我而言，我认为问题出在其他地方......任何帮助都会很棒。

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
return [[settingsvc facebook] handleOpenURL:url];

} 
```

在应用程序委托标头中的位置：

```
@property (strong, nonatomic) Settings *settingsvc; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T18:16:47.327

几件事。

-您只需要在整个应用程序中的一个位置实现 fbDidLogin。您不会在每个使用 facebook 的视图控制器上实现它。

- 假设您遵循 Facebook 的 iOS 文档中的入门步骤，您的 Facebook 对象作为您的应用程序委托的属性存在。而且您的 fbDidLogin 方法*仅*在您的应用程序委托中。这也应该是您的代码中声明 Facebook 变量的唯一位置。这意味着每当您从代码中的其他任何地方访问 facebook 时，您都会执行以下操作：

```
ProjectNameAppDelegate *appDelegate = (ProjectNameAppDelegate *)[UIApplication sharedApplication].delegate;
[appDelegate.facebook someMethod]; 
```

- 您的应用程序委托中的 handleOpenURL 和 openURL 方法应该与 Facebook 的示例文档中的完全一样，而不是您发布的代码。

- 就我个人而言，我更喜欢将 Facebook 对象从应用程序委托中移出到单例助手类中，但如果您是初学者，那么这可能比您需要的更高级。

更新信息回答评论：

-someMethod 是您要调用的任何 Facebook 方法（在墙上发布、验证等）

- 您应该将所有 FBSessionDelegate 方法放在您的应用程序委托中

- 您需要在您发布到 Facebook 的视图控制器上实现 FBDialogDelegate

- 然后在您的视图控制器中，当您想发布到用户的墙上时，请执行以下操作：

```
- (void)postToWall {
    ProjectNameAppDelegate *appDelegate = (ProjectNameAppDelegate *)[UIApplication sharedApplication].delegate;
    if (appDelegate.facebook.isSessionValid) {
       //we're logged in so call the post dialog
       [self doPost:nil];
    } else {
        //we're not logged in so call the login and then do the post when it's done
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doPost:) name:@"FBLoginComplete" object:nil]; 
        NSArray *permissions = [[NSArray alloc] initWithObjects: 
                                 @"offline_access",
                                 @"publish_stream",
                                 nil];
        [appDelegate.facebook authorize:permissions];
        [permissions release];

    }
}

-(void)doPost:(NSNotification *) notification {
    ProjectNameAppDelegate *appDelegate = (ProjectNameAppDelegate *)[UIApplication sharedApplication].delegate;
    if (appDelegate.facebook.isSessionValid) {
        NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       something, @"app_id",
                                       something, @"link",
                                       something, @"picture",
                                       something, @"name",
                                       something, @"caption",
                                       something, @"description",
                                       nil];
        [appDelegate.facebook dialog:@"feed" andParams:params andDelegate:self];
        [params release];
    } 
    [[NSNotificationCenter defaultCenter] removeObserver:self];       
} 
```

- 要使上述工作正常进行，您需要在登录完成（成功或失败）时发布 NSNotificationCenter 消息“FBLoginComplete”。

-注意：我在没有编译或测试的情况下编写了上面的代码，因此它可能并不完美（但通常是:)

- 请注意：您不能在没有弹出对话框的情况下直接发布到用户的墙上。用户始终可以在帖子撞墙之前对其进行编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T16:09:27.327

您是否已经实现`FBRequestDelegate`了`yourViewController.h`不是 MainViewController 的委托？

`FBRequestDelegate`包含许多有用的 facebook 请求处理程序，例如。

```
//Called just before the request is sent to the server.
- (void)requestLoading:(FBRequest *)request;

//Called when the server responds and begins to send back data
- (void)request:(FBRequest *)request didReceiveResponse:(NSURLResponse *)response;

//Called when an error prevents the request from completing successfully.
- (void)request:(FBRequest *)request didFailWithError:(NSError *)error;

/** 
  *Called when a request returns and its response has been parsed into
  *an object.
  *The resulting object may be a dictionary, an array, a string, or a number,
  *depending on thee format of the API response.
  */
- (void)request:(FBRequest *)request didLoad:(id)result;

/** 
  *Called when a request returns a response.
  *The result object is the raw response from the server of type NSData
  */
- (void)request:(FBRequest *)request didLoadRawResponse:(NSData *)data; 
```

希望它可以帮助你！

# javascript - 将布尔值传递给 jQuery 插件的最简单方法是什么？

> ID：10373515
> 
> 赞同：3
> 
> 时间：2012-04-29T15:49:19.833
> 
> 标签：javascript, jquery-plugins, boolean

在构建一个应该传递布尔值的 jQuery 插件时，以用户友好的方式将输入转换为布尔值的最*简单的方法是什么？*

更准确地说：我担心人们可能会传递一个 String of `'false'`（而不是 plain `false`），因此对`!!option`or的简单转换`Boolean(option)`将返回“错误”值（`!!'false'`is `true`）。

目前我正在检查我`var option`的这样的：

```
if (typeof(option) != 'boolean'){
    if (option === 'false'){
        option = false; //fake false
    } else {
        option = !!option; //everything else is converted as truthy / falsy in a standard manner  
    }
} 
```

但我想知道是否有更优雅和简洁的方式来做到这一点，或者这只是 JavaScript 处理这个的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T15:52:49.723

我会这样做。

```
var result = ( userInput === true ); 
```

此结果返回 true 的唯一方法是类型为布尔值且值为 true。否则其他一切都是假的。不要浪费时间去纠正别人的错误。

但是....如果您手头有很多时间，那么试试这个。

```
var getBooleanValue = function( userInput ){
    if( !userInput ){
        return false;
    }
    var boolNames = {
        'true':1, 'yes':1,
        'false':0,'no':0,
        'yourMoM':1
    };
    return (userInput in boolNames && !!boolNames[ userInput ])|| ( userInput === true );
};
var tests = [
    [ true, true ],
    [ 'true', true ],
    [ 'yes', true ],

    [ false, false ],
    [ 'false', false ],
    [ 'no', false ]
];
var runTest = function( tests ){
    var i = tests.length;
    while( i-- ){
        if( getBooleanValue(tests[i][0]) !== tests[i][1] ){
            throw new Error( "Test error: getBooleanValues( " + tests[i][0] + ") should return " + tests[i][1] );
        }
    }
};
runTest( tests ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T15:56:33.683

最简单的方法，如果你害怕这样的输入，就是这样做

```
if (typeof(option) != 'boolean')
    console.error('Function X expects a Boolean.'); 
```

看看你现在的解决方案，你没有考虑到`0`or `1`。`no`或者或者怎么样`yes`？

字符串和整数不应该用作布尔值。所以，没有必要解析它们。

* * *

看看高质量/使用 JS 框架，**他们不这样做。** *你为什么要？*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T16:02:48.297

我会做这样的事情：

```
var falsey = ["0", "", "false", "null", "undefined", "NaN"];
var isFalse = false;

for(var i = 0, len = falsey.length; i < len; i++){
    if(options + "" == falsey[i]){
        isFalse = true;
        break;
    }
} 
```

我所做的是对 the`options`和 false 值进行字符串化`0, "", false, null, undefined, NaN`

无论它们是什么，这都会检测到它们（技术类似于搜索词和比较词的大写）

因为列表很短，您也可以使用 switch case 或 ifs

# c++ - substr() 不会采用参数化值

> ID：10373519
> 
> 赞同：2
> 
> 时间：2012-04-29T15:50:36.073
> 
> 标签：c++, binary, split, substring

我的 substr() 命令有问题，我试图从示例内存管理模拟器中的一个地址拆分两个不同的地址。在下面的示例中： LoadParameters 函数获取一组 VirtualMemSize 和 PageFrameLength 值，用于计算应从何处拆分位字符串。

在示例中，LoadParameters() 存储 VirtualMemSize 和 PageFrameLength 的值（分别为 20 和 8。），它们是全局值。问题是代码只有在我输入数字代替参数时才有效。我尝试将变量转换为 size_t 类型，但没有运气：

```
int main(void) {
    unsigned int VirtPageAddress;                                       
    unsigned int PhysPageAddress;                                       
    unsigned int OffsetAddress;                                         

    LoadParameters();                                           
    int VirtualAddress = 0xCAFEF00D;
    string pagestring;

    // Convert the hex address into a binary string and then
    // split it into page index and offset.

    string bitstring = bitset<sizeof(VirtualAddress) * 8>
                        (VirtualAddress).to_string();       

    cout << dec << VirtualMemSize << endl;
    cout << dec << PageFrameLength << endl;
    cout << bitstring << endl;

    // (Reports: 20, 8 and "11001010111111101111000000001101"

    // Extract relevant bits for the Page Index.

    pagestring = bitstring.substr((32-VirtualMemSize),PageFrameLength);

    // Convert the split string back into a number so that it
    // can be manipulated.

    VirtPageAddress = bitset<sizeof(pagestring)>
                        (pagestring).to_ulong();                          
    cout << "0x" << hex << VirtPageAddress << endl;
    return 0;
} 
```

预期值：“0xef”

输出值：“0x0”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:09:11.730

使用 g++ 编译时，代码按预期工作（在添加了一些您遗漏的包含和定义之后）。你用的是什么编译器？

请记住 sizeof(pagestring) 返回类的大小，而不是它包含的字符串；我怀疑这是您的意图，并且肯定会根据您的编译器/STL 实现而改变。你在那个模板实例化中真正的意思是什么？

# java - JTextField dispatchEvent 不起作用，但适用于 TextField

> ID：10373520
> 
> 赞同：0
> 
> 时间：2012-04-29T15:50:43.577
> 
> 标签：java, swing, textfield, jtextfield, dispatchevent

在我的程序中，当焦点丢失时，我想`ActionEvent`在`TextField`named上调用一个。`descField`我使用`dispatchEvent`成功。当我将其更改`TextField`为 a`JTextField`时，它不起作用。我将不胜感激（我是 Java 的业余爱好者）。这是调度程序，它是`focusLost`my 的方法`JTextField`：

```
 public void focusLost(FocusEvent f) {
        ActionEvent action = new ActionEvent(descField, ActionEvent.ACTION_PERFORMED, "focus_lost");
        descField.dispatchEvent(action); // Causes actionPerformed to be invoked
        // Does not work with JTextArea
    } //focusLost 
```

如何使用`JTextField`, 而不是使其工作`TextField`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:32:47.440

我将 ActionEvent 中的代码放在此侦听器类中的一个单独方法中，然后从 actionPerformed 和 focusLost 方法中调用它。现在可以正常使用 JTextField。我想大多数人无论如何都会这样做。actionPerformed 代码相当冗长。

# php - 使用 Curl 和 PHP 从 FTP 下载文件

> ID：10373522
> 
> 赞同：1
> 
> 时间：2012-04-29T15:51:15.720
> 
> 标签：php, curl, ftp, libcurl

我正在尝试使用 Curl 从 FTP 服务器下载文件。我可以将 URL 粘贴到我的浏览器中，它可以正常下载。问题是使用 Curl 和 PHP，我相信 FTP 服务器正在执行重定向，而 Curl 不会跟随。我收到错误消息“服务器拒绝您更改到给定目录”。

编辑：我在代码中有 %2f 并将其删除。那是来自之前的测试。

我的代码是：

```
$curl = curl_init();
$file = fopen("temp.zip", 'w');
curl_setopt($curl, CURLOPT_URL, "ftp://idx.living.net/idx_fl_ftp_down/idx_naples_dn/naples_data.zip");
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_FILE, $file);
curl_setopt($curl, CURLOPT_FTPSSLAUTH, CURLFTPAUTH_SSL);
curl_setopt($curl, CURLOPT_USERPWD, "myusername:mypassword");
curl_exec($curl);
echo curl_error($curl); 
```

有什么方法可以强制 Curl 在下载文件时按照浏览器的方式行事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-04T11:58:50.750

我知道这不会以应有的方式回答您的问题（使用 curl ）。但这是一个非 curl 代码，用于使用 php 在 ftp 服务器上下载文件。

```
$local_file = 'output.rar';
$server_file = '/somedir/1/bar/foo/somearchive.rar';
$ftp_user_name='some_login';
$ftp_user_pass='Password';
$ftp_server='HOST';
// set up basic connection
$conn_id = ftp_ssl_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

/* uncomment if you need to change directories
if (ftp_chdir($conn_id, "<directory>")) {
    echo "Current directory is now: " . ftp_pwd($conn_id) . "\n";
} else { 
    echo "Couldn't change directory\n";
}
*/

// try to download $server_file and save to $local_file
if (ftp_get($conn_id, $local_file, $server_file, FTP_BINARY)) {
    echo "Successfully written to $local_file\n";
} else {
    echo "There was a problem\n";
}

// close the connection
ftp_close($conn_id); 
```

笔记：

1.  ftp_ssl_connect() 不适用于 sFTP。要将 sFTP 与 PHP 一起使用，请参阅 ssh2_sftp()。
2.  FTP 服务器地址参数不应有任何尾部斜杠，也不应以 ftp:// 为前缀。

# java - Java + Rails：从 Rails 应用程序中调用一些 Java 代码

> ID：10373524
> 
> 赞同：3
> 
> 时间：2012-04-29T15:51:22.757
> 
> 标签：java, ruby-on-rails, ruby

我有一个轨道应用程序。我还在 Java 中编写了一个构造 4 维树结构的方法。它用于查询我的数据库。代码相对复杂，我不想再用 Ruby 重写它。有什么方法可以使用我在 Rails 应用程序中编写的 Java 方法。

这适用于 Heroku 托管的应用程序。

如果是这样，我应该如何去学习如何做到这一点？我应该谷歌什么关键字？谁能指出我已知的好资源...

欣赏它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T17:22:20.220

您可以通过网络向 Ruby 客户端公开 Java 方法。有很多很棒的抽象层可以通过服务器公开 Java 代码。

一个这样的抽象层是[`Thrift`](http://thrift.apache.org/). 您可以使用 Thrift 的代码生成引擎为 Ruby 端创建一个客户端库，并为您的 Java 服务器创建一个接口。您可以在任何地方运行 Java RPC 服务器，并在 Heroku 上的 Rails 应用程序中从 Ruby 客户端调用它。

或者，如果这对你正在做的事情来说太重了，你也可以只使用你的 Java 程序，让它将方法调用的结果发送到 STDOUT。在 Ruby 中，您可以使用反引号（即``java MyProgram``）来表示。

# ios - 如何在 glkview 中使用 dispatch_async？

> ID：10373526
> 
> 赞同：0
> 
> 时间：2012-04-29T15:51:31.273
> 
> 标签：ios, multithreading, opengl-es

我正在学习如何在我的 iOS Opengl-es 应用程序中使用线程。我尝试修改opengl游戏模板代码：

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    glClearColor(0.65f, 0.65f, 0.65f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glBindVertexArrayOES(_vertexArray);

    // Render the object with GLKit
    [self.effect prepareToDraw];

    glDrawArrays(GL_TRIANGLES, 0, 36);

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        sleep(1);
        dispatch_async(dispatch_get_main_queue(), ^{
            // Render the object again with ES2
            glUseProgram(_program);

            glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _modelViewProjectionMatrix.m);
            glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, _normalMatrix.m);

            glDrawArrays(GL_TRIANGLES, 0, 36);
        });
    });
} 
```

如果运行良好，它会以 60fps 的速度绘制一个框，另一个以 1fps 的速度绘制，但是当我运行上面的代码时，它只绘制一个框。

我在网上搜索并找不到导致问题的原因。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:58:19.770

调度块中的代码不起作用。当它被执行时，该帧的所有 OpenGL 状态早就被销毁了。如果您要在该块中调用 glGetError()，我相信它会告诉您同样的情况。您需要确保所有绘图代码都在该 glkView 方法中完成，以使 OpenGL 状态有效。当您执行该调度时，您实际上是将该绘图代码的执行分流到该方法的范围之外。

# linux - Ash MATCH 运算符 (=~)

> ID：10373529
> 
> 赞同：0
> 
> 时间：2012-04-29T15:51:59.473
> 
> 标签：linux, bash, ash

我正在尝试将 linux 脚本安装到我的 WD 世界版驱动器上。

该脚本是为 Bash（debian）编写的，但我的 WD 只运行busybox（使用 ash）。尽管如此，我还是通过使用 Google 获得了其中的大部分功能。只有一个运算符我没有找到对应的 =~ 运算符

如何将 =~ 运算符的功能从旧脚本移植到 ash？

脚本：

```
#! /bin/bash
# posttorrent.sh by Killemov
{
  # Log file, file where we tell what events have been processed.
  LOG_FILE=/var/log/posttorrent.log
  # Username for transmission remote.
  TR_USERNAME="username"
  # Password for transmission remote.
  TR_PASSWORD="password"
  # Get current time.
  NOW=$(date +%Y-%m-%d\ %H:%M:%S)
  # Source directory, should not be changed.
  SRC_DIR="${TR_TORRENT_DIR}/${TR_TORRENT_NAME}"
  # Directory to store the un-compressed files in..
  DEST_DIR="${TR_TORRENT_DIR}/${TR_TORRENT_NAME}/"
  # This parameter string could be passed from Transmission in the future.
  TR_TORRENT_PARAMETER="EXTRACT SLEEP1h"

echo "text"
  if [ -e "$SRC_DIR/keep" ]; then
    TR_TORRENT_PARAMETER="$TR_TORRENT_PARAMETER KEEP"
  fi

  if [ -e "$SRC_DIR/exit" ]; then
    TR_TORRENT_PARAMETER="EXIT"
  fi

  # Actual processing starts here.
  if [[ "$TR_TORRENT_PARAMETER" =~ "EXIT" ]]; then
    echo $NOW "Exiting $TR_TORRENT_NAME" >> $LOG_FILE
    exit 0
  fi
echo "text2"
  if [[ "$TR_TORRENT_PARAMETER" =~ "EXTRACT" ]]; then
    cd $TR_TORRENT_DIR
    if [ -d "$SRC_DIR" ]; then
      IFS=$'\n'
      unset RAR_FILES i
      for RAR_FILE in $( find "$SRC_DIR" -iname "*.rar" ); do
        if [[ $RAR_FILE =~ .*part.*.rar ]]; then
          if [[ $RAR_FILE =~ .*part0*1.rar ]]; then
            RAR_FILES[i++]=$RAR_FILE
          fi
        else
          RAR_FILES[i++]=$RAR_FILE
        fi
      done
      unset IFS

      if [ ${#RAR_FILES} -gt 0 ]; then
        for RAR_FILE in "$(eval \$$RAR_FILES[@])"; do
          unrar x -inul "$RAR_FILE" "$DEST_DIR"
          if [ $? -gt 0 ]; then
            echo $NOW "Error unrarring $TR_TORRENT_NAME" >> $LOG_FILE
            transmission-remote -n $TR_USERNAME:$TR_PASSWORD -t$TR_TORRENT_ID --verify --start
            exit 0
          fi
        done
        if [[ ! "$TR_TORRENT_PARAMETER" =~ "KEEP" ]]; then
          SLEEP=$(expr match "$TR_TORRENT_PARAMETER" '.*SLEEP\([0-9a-zA-Z]*\)')
          if [ ${#SLEEP} -gt 0 ]; then
            sleep $SLEEP
          fi
          transmission-remote -n $TR_USERNAME:$TR_PASSWORD -t$TR_TORRENT_ID --remove-and-delete
        fi
        echo $NOW "Unrarred $TR_TORRENT_NAME" >> $LOG_FILE
      fi
    fi
  fi
} & 
```

（我在间接引用方面遇到了一些麻烦，我希望我能正确地解决这个问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:21:44.593

那么对于`$VARIABLE =~ PATERN`你应该能够使用：

```
echo "$VARIABLE" | grep -E PATTERN 
```

但是我认为你在算术表达式上也会遇到一些麻烦`i++`——如果实现了，那么你仍然需要使用`i=$(($i + 1))`语法，如果没有实现，那么`i=$(expr $i + 1)`语法。

我认为您 IFS=$'\n' 的原因是在换行符上拆分查找，但您最好将查找发布到临时文件中，然后执行`while read line; do ... done <$tmpfile`,

此外，我不确定是否所有版本的 busybox ash 都支持数组，所以你也可能有问题。

# wpf - 更改 DataGrid 中的整个行背景

> ID：10373537
> 
> 赞同：0
> 
> 时间：2012-04-29T15:53:20.440
> 
> 标签：wpf, xaml, datagrid, background, styles

我想将**整个行的背景**与 XAML 中每条记录的布尔属性绑定。

更改数据网格样式的方法太多，但我想更改负责整行的特定样式...

例如，记录类是数据网格后面的绑定数据，它有一个布尔属性“正确”（真/假），我希望数据网格在红色背景中显示错误正确的行，为真时显示绿色。

我尝试使用 CellStyle 但它只更改行中每个单元格的背景，而不是整行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:23:00.057

如前所述，使用 DataGrid.RowStyle，例如：

```
<Style x:Key="DataGridRowCorrectStyle" TargetType="{x:Type Toolkit:DataGridRow}">
    <Setter Property="Background" Value="Green"/>
    <Style.Triggers>
        <DataTrigger Binding="{Binding Correct}" Value="False">
            <Setter Property="Background" Value="Red"/>
        </DataTrigger>
    </Style.Triggers>
</Style>

<Toolkit:DataGrid RowStyle={StaticResource DataGridRowCorrectStyle} ... /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:07:41.093

要更改行的背景颜色，您需要更改行中每个单元格的背景颜色。创建一个设置背景颜色的样式，然后将其分配给 CellStyle 成员。如果要使用 RowStyle 设置颜色，请将单元格的背景颜色设置为透明，然后使用 RowStyle 样式设置颜色。

# java - 一个只有“私有最终静态”变量的java类。这是个好主意吗？

> ID：10373541
> 
> 赞同：3
> 
> 时间：2012-04-29T15:54:19.300
> 
> 标签：java, variables, static, private

我只是想知道，因为我的 3 个类中有很多私有 final 静态变量，如果将它们放在这样的一个类中是个好主意：

```
public class Definicoes 
{
    /*
    * Definições da Janela de Jogo
    */

    public final static String nomeJanela;
    public final static short janLargura;
    public final static short janAltura;
    public final static byte tabLinhas;
    public final static byte tabColunas;
    static
    {
    nomeJanela = "JFindPairs - 0.3";
    janLargura = 480;
    janAltura = 480;
    tabLinhas = 4;
    tabColunas = 4;
    }

    /*
    * Definições do Tabuleiro e respectivas Cartas
    */

    public final static byte numeroCartoes;
    static
    {
        numeroCartoes = 16;
    }
} 
```

在此先感谢您的帮助。路易斯·达科斯塔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T15:57:00.323

如果它们都必须相同，我会将它们放在一个地方。否则，我会将常量保留在使用它们的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T15:56:37.343

我就是这样做的，将它们全部放在一个地方是有意义的，以防您需要在某个时间点返回并更改它们，不想搜索大量的类以查找 1 个变量:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T15:56:46.587

当它们以私有形式开始时，即它们仅在单个类中使用时，它们应该留在那里。

如果它们需要被不同的类访问，则可能隐藏了一些概念。这个概念可能表现为一个只有公共静态最终变量的类，但更有可能它会分成多个类（至少这是我的经验）。不幸的是，现在有一种方法可以在不了解您的程序的情况下进行判断。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T16:00:16.210

这样做是完全有效的，但是它会打破 OOP 设计的概念，以解耦属于特定类的变量/常量。

# android - GridView 项目：设置相对大小

> ID：10373544
> 
> 赞同：2
> 
> 时间：2012-04-29T15:55:38.557
> 
> 标签：android, android-layout, gridview

我正在尝试在`GridView`. 我希望每个项目都填充屏幕的相对部分（`image B`），而我所拥有的只是`GridView`占据屏幕顶部所需的空间（`image A`）。图片：

![在此处输入图像描述](../Images/af515c40f74977f671d062c0d7eeacd8.png)

（我希望每个项目的大小超过主布局的 15-20% 高度）

**编辑：**我发现这个问题[Percentage width in a RelativeLayout](https://stackoverflow.com/questions/4961355/percentage-width-in-a-relativelayout)。'LadaRaider' 给出了一个很好的答案，但我不知道如何在我的`GridView`细胞中使用该解决方案。这是我的`layout.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:background="@drawable/background">

 <TextView
   android:id="@+id/label_name"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:textAppearance="?android:attr/textAppearanceLarge"
   android:gravity="center_horizontal"/>

 <LinearLayout
     android:id="@+id/ll_ok"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical" >

     <TextView
         android:id="@+id/textView1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="@string/lbl_choose"
         android:textAppearance="?android:attr/textAppearanceMedium" />

      <GridView
     android:id="@+id/grid"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:numColumns="2"
     android:columnWidth="100dp"
     android:stretchMode="columnWidth"/>
 </LinearLayout>

 <LinearLayout
     android:id="@+id/ll_wait"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:gravity="center"
     android:orientation="vertical" >

     <TextView
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="@string/lbl_wait"
         android:gravity="center"
         android:textAppearance="?android:attr/textAppearanceMedium" />
 </LinearLayout>
 </LinearLayout> 
```

我还创建了一个自定义布局以在`GridView`项目中使用。它只有一个`TextView`和一个背景。

# asp.net - 在 ASPxTreeList 中创建按钮列

> ID：10373547
> 
> 赞同：0
> 
> 时间：2012-04-29T15:55:56.140
> 
> 标签：asp.net, devexpress

如何将按钮列添加到 ASPxTreeList，（如“新建”或“编辑”列），有人可以帮我启动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:05:54.660

引入具有所需命令按钮的[TreeListCommandColumn](http://help.devexpress.com/#AspNet/CustomDocument4697)以完成此任务。

# mysql - 获取某个项目的最新条目？mysql

> ID：10373550
> 
> 赞同：0
> 
> 时间：2012-04-29T15:56:05.837
> 
> 标签：mysql, search

假设我有一个包含 2 列的表，1 包含汽车，1 包含随机数。如何在表中搜索最新的“法拉利”条目并知道该法拉利的随机数是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:00:36.353

我假设您的 Cars 表有列`id`, `name`,`rnid`

您可以使用以下sql；

```
SELECT MAX(c.id) AS latestferrari FROM Cars c INNER JOIN randomnumbers rn ON c.rnid=rn.id WHERE c.name="ferrari" 
```

# google-maps-api-3 - jQuery UI 地图 - panTo 用户位置

> ID：10373556
> 
> 赞同：1
> 
> 时间：2012-04-29T15:56:25.947
> 
> 标签：google-maps-api-3, jquery-ui-map

长期读者/第一次在这里发帖，我怀疑这个问题很容易回答，但无休止地帮助我。

我只是想 i) 检索用户的位置，ii) 在此位置显示一个图标，以及 iii) 有一个标有“查找我”的按钮，将地图平移到该位置。

我有 i) 和 ii) 工作，但是虽然我有其他按钮可以平移到特定位置，但这个按钮似乎不起作用：

```
 var viewportHeight = $(window).height();
        var mapHeight = viewportHeight - 93;
        var map;
        var union = new google.maps.LatLng(53.806828, -1.555999);
        var userLocation;
        var userIcon = 'userIcon.png';
        var parkinson = new google.maps.LatLng(53.808, -1.553);
        var unionDescription = '<div id="content">' + '<div id="siteNotice">' + '</div>' + '<h2 id="firstHeading" class="firstHeading">Your Union</h2>' + '<div id="bodyContent">' + '<p>Heres a bit about us</p>' + '</div>' + '</div>';

        //Try and get the user's location

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function (position) {
                var userLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                $('#map_canvas').gmap('addMarker', {
                    'position': userLocation,
                    'bounds': false,
                    'icon': userIcon
                });
            });
        };

        //initialise the map
        $(function () {

            $('#map_canvas').gmap({
                'center': union,
                'zoom': 16,
                'mapTypeId': google.maps.MapTypeId.ROADMAP,
                'styles': campusStyles,
                'minZoom': 15,
                'maxZoom': 17
            }).bind('init', function (ev, map) {

                $('#map_canvas').gmap('addMarker', {
                    'position': parkinson,
                    'bounds': false
                }).click(function () {
                    $('#map_canvas').gmap('openInfoWindow', {
                        'content': 'Hello World!'
                    }, this);
                });

                $('#map_canvas').gmap('addMarker', {
                    'position': union,
                    'bounds': true
                }).click(function () {
                    $('#map_canvas').gmap('openInfoWindow', {
                        'content': unionDescription
                    }, this);
                });

                $('#map_canvas').height(mapHeight);
                google.maps.event.trigger(map, 'resize');
                $('#unionButton').click(function () {
                    map.panTo(union);
                });
                $('#findMe').click(function () {
                    map.panTo(userLocation);
                });

                $('#map_canvas').height(mapHeight);
            });

        }); 
```

我实际上在这里工作的事情：http: [//jdp.org.uk/tests/mapstest4.html](http://jdp.org.uk/tests/mapstest4.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:36:04.367

我不知道为什么，但我的导航器地理位置不起作用，所以我只是绕过了这个要求并硬编码了一个用户 LatLng。对我有用的是将整个块剪切并粘贴`if(navigator.geolocaton)`到带有线的块的正下方`$('#unionButton').click(function(){map.panTo(union);});`。似乎`map`尚未定义您拥有地理位置代码的位置。

根据我的测试，仅当当前位置接近目标时才会发生平滑平移。[http://jsfiddle.net/EejRt/](http://jsfiddle.net/EejRt/)

我有：

```
 $('#map_canvas').height(mapHeight);
    google.maps.event.trigger(map, 'resize');
    $('#unionButton').click(function(){map.panTo(union);}); 
    $('#map_canvas').height(mapHeight);

//if (navigator.geolocation) { 
//  navigator.geolocation.getCurrentPosition(function(position) {  
//    var userLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
    var userLocation = new google.maps.LatLng(53.8018,-1.553);
    $('#map_canvas').gmap('addMarker', {'position': userLocation, 'bounds': false,  'icon' : userIcon });
    $('#findMe').click(function(){map.panTo(userLocation)});
//  });
//  }; 
```

# c# - 在 C# 中将数字转换为字母以在 Microsoft Excel 中使用

> ID：10373561
> 
> 赞同：14
> 
> 时间：2012-04-29T15:57:04.077
> 
> 标签：c#, algorithm, excel

> **可能重复：**
> [如何将列号（例如 127）转换为 excel 列（例如 AA）](https://stackoverflow.com/questions/181596/how-to-convert-a-column-number-eg-127-into-an-excel-column-eg-aa)

好的，所以我正在编写一个接受二维数组作为参数的方法。我想把这个二维数组放到 Excel 工作表上，但我需要计算出最终的单元格位置。我可以像这样轻松地获得高度：

```
var height = data.GetLength(1); //`data` is the name of my 2d array 
```

这给了我我的`Y`轴，但得到我的轴并不容易`X`。显然我可以得到这样的数字：

```
var width = data.GetLength(0); 
```

这给了我一个数字，我想把它转换成一个字母。因此，例如，0 是 A，1 是 B，依此类推，直到我们到达 26，它又回到 A。我确信有一个简单的方法可以做到这一点，但我有一个完全的心理障碍。

你会怎么做？

谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-29T16:33:16.217

这是一个也处理两个字母列的版本（在 Z 列之后）：

```
static string GetColumnName(int index)
{
    const string letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

    var value = "";

    if (index >= letters.Length)
        value += letters[index / letters.Length - 1];

    value += letters[index % letters.Length];

    return value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:12:26.687

只需将其转换为字符并执行“ToString()”即可。

```
using System;
using System.Collections.Generic;

public class MyClass
{
    public static void RunSnippet()
    {
        int myNumber = 65;
        string myLetter = ((char) myNumber).ToString();
        WL(myLetter);
    }

    #region Helper methods

    public static void Main()
    {
        try
        {
            RunSnippet();
        }
        catch (Exception e)
        {
            string error = string.Format("---\nThe following error occurred while executing the snippet:\n{0}\n---", e.ToString());
            Console.WriteLine(error);
        }
        finally
        {
            Console.Write("Press any key to continue...");
            Console.ReadKey();
        }
    }

    private static void WL(object text, params object[] args)
    {
        Console.WriteLine(text.ToString(), args);   
    }

    private static void RL()
    {
        Console.ReadLine(); 
    }

    private static void Break() 
    {
        System.Diagnostics.Debugger.Break();
    }

    #endregion
} 
```

# javascript - 引用和数据类型检查，它们是一样的吗？

> ID：10373562
> 
> 赞同：3
> 
> 时间：2012-04-29T15:57:07.723
> 
> 标签：javascript

我的库中有一个简单的函数来检查对象引用的有效性（这里的对象意思是对创建的 HTML 元素的引用，主要是 DIV）。它看起来像这样：

```
function varIsValidRef(aRef) {
    return ( !(aRef == null || aRef == undefined) && typeof(aRef) == "object");
} 
```

在进行实验时，我发现这具有相同的效果：

```
function varIsValidRef(aRef) {
    return (aRef) && typeof(aRef) == "object";
} 
```

我了解关于速记 () 测试存在一些争议？在针对各种数据类型（null、undefined、integer、float、string、array）进行测试时，我发现最终结果没有区别。该功能似乎按预期工作。

可以肯定地说这两个版本的功能完全相同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:11:06.443

不，在我看来，这些功能的工作方式不同：

**第一个选项**
If `aRef`is not `undefined`or`null`并且 var 的类型 is`object`它返回 true。

**第二个选项**
首先我们转换`aRef`为布尔值。价值观喜欢`null`，`undefined`并`0`成为`false`，其他一切都成为`true`。如果是`true`（所以不是这些值之一），它会检查类型是否为对象。

所以第二个选项 return false if `aRef`is `0`，你不想要的东西。而且它不是检查它的优雅方法，因为您检查对象或字符串或其他东西是否等于布尔值。

至少他们不会返回同样的东西。`(aRef)`第一个选项返回一个布尔值，但如果第二个选项为 false ，则返回您在函数中输入的值：

```
varIsValidRef(0);
>>> 0

varIsValidRef('');
>>> ""

varIsValidRef(undefined);
>>> undefined

varIsValidref(null);
>>> null 
```

因为 JavaScript 将这些值用作虚假值，所以如果您使用 if 语句或类似的东西，您看不到这些返回值之间的差异。

所以我建议你使用第一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T16:28:07.083

它们有很大的不同：

```
!(aRef == null || aRef == undefined) 
```

这部分被评估为*假*与任何这些`"null", null, "undefined", undefined`

```
(aRef) 
```

而这个其他与任何这些`0, "", false, null, undefined, NaN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T16:10:09.777

他们不会做同样的事情，尽管他们最终会得到相同的结果。

第一个函数更加严格，它将一起算作假，或者如果不是，如果它是一个对象。

第二个函数将检查是否`aRef`存在`!false`任何虚假值（即`[]`, `null`, `undefined`）并检查类型是否为对象（如果不是）。

我更喜欢第一个函数，因为它接受的内容更严格，但如果它都相同，则应该使用执行最佳的函数。

至于争议，确实你必须小心如何/何时在方程式中使用虚假值，但如果它做了你想要它做的事情（为此你需要知道什么是虚假值）并且你正确实施应该没问题。但这两者很难放在一起。因此，如果这可以满足您的要求，并且或多或少，请务必使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T16:11:44.380

有趣的案例，但尽管***完全不同***，但两者的行为方式相同似乎是合乎逻辑的。让我们看看第一种说法。

```
return ( !(aRef == null || aRef == undefined) && typeof(aRef) == "object"); 
```

这里，

`null`并且`undefined`两者都表示`false`与 infront 结合的状态`!`，使其等于在两者都不是*null*或 not *undefined*`aRef`的情况下将返回的表达式。`true`

# python - 如何在视图和模板之外使用 Pyramid i18n？

> ID：10373563
> 
> 赞同：5
> 
> 时间：2012-04-29T15:57:07.963
> 
> 标签：python, pyramid, python-babel

[Pyramid 文档向我们展示了如何在视图（以及](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/narr/i18n.html#performing-a-translation)[模板](http://blog.abourget.net/2011/1/13/pyramid-and-mako%3a-how-to-do-i18n-the-pylons-way/)）中使用 i18n 。但是如何在我们无法访问当前的视图和模板之外使用它`request`（例如， in`forms`和`models`）？

@Michael 说要传递`request`给模型和表单。但这样做对吗？我的意思是如果表单字段在`__init__()`方法调用之前定义，与模型相同。他们从视图中看不到任何参数...

在 Pylons 中，我们可以简单地在父控制器中使用`get_lang()`和`set_lang()`定义首选语言，然后在我们想要的任何地方使用`ugettext()`和，而无需每次都直接调用它（在视图中）。`ungettext()``request`

如何在金字塔中做到这一点？请注意，必须从用户的设置（会话、cookie、数据库等）中设置语言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T15:21:21.297

我的解决方案是在需要使用 localizer 作为参数时创建表单类。例如

表格.py

```
class FormFactory(object):

    def __init__(self, localizer):
        self.localizer = localizer
        _ = self.localizer
        self.required_msg = _(u'This field is required.')
        self.invalid_email_msg = _(u'Invalid email address.')
        self.password_not_match_msg = _(u'Password must match')

    def make_contact_form(self):
        _ = self.localizer
        class ContactForm(Form):
            email = TextField(_(u'Email address'), [
                validators.Required(self.required_msg),
                validators.Email(self.invalid_email_msg)
            ])
            content = TextAreaField(_(u'Content'), [
                validators.Required(self.required_msg)
            ])
        return ContactForm 
```

当您需要使用表格时

```
@view_config(route_name='front_pages.contact_us',
             renderer='myweb:templates/front_pages/contact_us.genshi')
def contact_us(request):
    """Display contact us form or send mail

    """
    _ = get_localizer(request)

    factory = FormFactory(_)
    ContactForm = factory.make_contact_form()
    form = ContactForm(request.params)
    return dict(form=form) 
```

如您所见，我们在视图中获取本地化程序，并将其传递给 FormFactory，然后使用该工厂创建一个表单。通过这样做，表单中的所有消息都被替换为当前的语言环境。

同样，您可以对模型执行相同的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T17:41:27.937

你找到`pyramid.18n.get_localizer`了吗？

[http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/i18n.html#using-a-localizer](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/i18n.html#using-a-localizer)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:43:06.103

其实我也有同样的问题。我最终做的是查看默认的语言环境协商器是如何工作的——它在给定的请求对象上查找一个*LOCALE*属性。所以只需使用一个假人来创建定位器。如果你愿意，你也可以缓存这个值

```
def my_get_localizer(locale=None):
    request = Request({})
    request._LOCALE_ = locale

    return get_localizer(request) 
```

或者，加入 irc 频道 #pyramid @ freenode 并纠缠这些人，将 get_localizer 的功能拆分为 2 个单独的文档功能（get_localizer 和 get_localizer_for_locale_name）供我们享用；）

另外，请注意 Pyramid TranslationStrings 是惰性的，因此您可以根据需要翻译它们，例如

```
class MyModel(Base):
    description = TranslationString("My model number ${number}")

...

def view(request):
    m = MyModel()
    localizer = get_localizer(request)
    description = localizer.translate(m.description, mapping={'number': 1}) 
```

旁注：pylons 的 i18n 是我多年来打开的最糟糕的蠕虫罐头。set_lang, get_lang hack 真的很糟糕，而且很痛苦，因为我们需要用他们的母语向用户发送电子邮件，然后尝试恢复语言……此外，翻译请求之外的任何内容都是不可能的当时不存在作为翻译器或注册表的 pylons 程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-13T15:13:49.890

您可以制作本地化程序，然后相应地翻译模板。

在制作本地化器时，您可以传递您想要的语言（无论您是从 db 还是其他）。希望它可以提供帮助。

为了清楚起见，我将在下面将其设置为“fr”

```
from pyramid.i18n import make_localizer, TranslationStringFactory
from mako.template import Template
from mako.lookup import TemplateLookup
import os

absolute_path = os.path.dirname(os.path.realpath(__file__))
tsf = TranslationStringFactory('your_domain')
mako_lookup = TemplateLookup(directories=['/'])
template = Template(filename=template_path, lookup=mako_lookup)

localizer = make_localizer("fr", [absolute_path + '/../locale/'])

def auto_translate(*args, **kwargs):
    return localizer.translate(tsf(*args, **kwargs))

# Pass _ pointer (translate function) to the context
_ = auto_translate

context.update({
    "_": _
})

html = template.render(**context) 
```

***编辑*** 您也可以将此逻辑放入一个小函数中

```
def get_translator(lang):
    """
    Useful when need to translate outside of queries (no pointer to request)
    :param lang:
    :return:
    """
    localizer = make_localizer(lang, [absolute_path + '/../locale/'])

    def auto_translate(*args, **kwargs):
        return localizer.translate(tsf(*args, **kwargs))

    _ = auto_translate

    return _ 
```

# spring - Spring 安全请求块相互矛盾

> ID：10373565
> 
> 赞同：1
> 
> 时间：2012-04-29T15:57:24.540
> 
> 标签：spring, security

```
 <security:intercept-url pattern="/person/**" 
        access="isAuthenticated()" />   

    <security:intercept-url pattern="/person?reg"
        access="isAnonymous()" /> 
```

我希望过滤器拦截所有 /person/blabla 等请求。但是应该有一个可供匿名用户自行注册的请求。

每当我介绍第一条规则时，所有子请求都受到保护，包括不需要的底部请求。

如果我不先介绍，那么底部请求是允许的，但所有后续请求，例如 /person/myProfile 都可以被匿名用户访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:04:26.863

来自[Spring Security 文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html)：

> 您可以使用多个元素为不同的 URL 集定义不同的访问要求，但它们将按列出的顺序进行评估，并且将使用第一个匹配项。因此，您必须将最具体的匹配项放在顶部。

此外，spring 默认使用 ant 样式的模式匹配，在尝试进行匹配时不包含参数。您还希望匹配参数是否存在。为此，您需要通过on 属性设置[正则表达式匹配](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/core-web-filters.html)。`request-matcher`[`http`](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/appendix-namespace.html)

```
<http request-matcher="regex">
  <security:intercept-url pattern="\A/person\?reg.*\Z" access="isAnonymous()" />

  <security:intercept-url pattern="\A/person/.*\Z" access="isAuthenticated()" />
</http> 
```

# intellij-idea - 如何将 Logcat 窗口返回到 Debug 窗口？

> ID：10373569
> 
> 赞同：2
> 
> 时间：2012-04-29T15:57:53.887
> 
> 标签：intellij-idea

我已经从 IDEA 11 的调试窗口中删除了一个 LogCat 窗口，但我找不到将它返回到那里的方法。这就是我的调试窗口现在的样子。

![](../Images/fdf158e16c54ae04a268fdfac0d4d5af.png)

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T16:24:55.640

尝试恢复布局按钮。 ![在此处输入图像描述](../Images/5a54a84fbc168fb03aa97505a5094450.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T09:59:42.217

不要像在 Eclipse 中那样使用窗口标题，而是拖动选项卡本身

![在哪里拖动](../Images/0296de4dede78fe14390ba0c1189f631.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T16:37:52.250

*我不确定您将 Logcat 窗口返回到 Debug 窗口*是什么意思，也就是说，如果 logcat 的输出实际上可以出现在 Debug 工具窗口中。

如果您想返回 Android 工具窗口，只需单击其按钮，它是您粘贴的图像下排的第一个按钮。

# java - 无论如何，我的 if 语句总是返回 true

> ID：10373572
> 
> 赞同：2
> 
> 时间：2012-04-29T15:58:38.757
> 
> 标签：java, if-statement

这对我来说根本没有意义。

这是我的代码：

```
boolean that = false;
        if (that == true);
        {
            System.out.println("That is " + that);
        } 
```

然而即使我的输出是

```
That is false 
```

我在java中这样做并且我正在使用Eclipse galileo，所以每次我编译/运行我的程序时它都会保存它，所以编译器应该得到我程序的更新版本。这是怎么回事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T16:01:20.840

一个常见的错误。删除语句`;`末尾的。`if`

顺便说一句，如果我使用括号并使用 IDE 的代码格式化程序，我总是写以下内容。

```
 if (that == true) {
        System.out.println("That is " + that);
    } 
```

这意味着如果您放错了位置`;`，或者`{`可能更明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T16:01:30.327

这是因为你在这里有分号：

```
 if (that == true); 
```

去掉那个分号！它会导致代码在检查条件后什么都不做`(that == true)`——从技术上讲，它是一个“空语句”——即我们可以有一个像这样的循环：

```
 for (int i = 0; ; i++){
      System.out.println("Thanks" );
    } 
```

它会永远消失！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T16:02:01.470

去除那个 ;

```
boolean that = false;
     if (that == true)
     {
         System.out.println("That is " + that);
     } 
```

否则总是执行打印。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-29T16:00:59.737

试试这样：

```
 boolean that = false;
    if (that)
    {
        System.out.println("That is " + that);
    } 
```

注意到代码中的额外分号了`if`吗？这就是为什么。

逻辑测试以分号结束，然后总是执行下一个块。

如果您删除分号，它将符合您的直觉。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-29T16:02:57.910

```
if (that == true);
              // ^ The extra colon you dont need 
```

# php - 使用 php 在 localhost 上的 SQLite 不起作用（Linux）

> ID：10373573
> 
> 赞同：0
> 
> 时间：2012-04-29T15:58:40.673
> 
> 标签：php, apache, sqlite

我正在尝试让我的第一个 sqlite 程序使用 php 在 localhost 上工作，但我无法让它工作。在我的机器上，我已经安装了 Sqlite3，并且在 C/C++ 上一切正常。

如果我将创建的数据库移动到本地主机，则为 db 文件授予读/写权限并尝试通过 php 访问它们，我会收到以下错误消息：

> 文件已加密或不是数据库

这是我使用的示例代码：

```
<?php
$dbhandle = sqlite_open("m_test1.db", 0666, $error);
if (!$dbhandle) die ($error);

$stm = "CREATE TABLE Friends(Id integer PRIMARY KEY," . 
   "Name text UNIQUE NOT NULL, Sex text CHECK(Sex IN ('M', 'F')))";
$ok = sqlite_exec($dbhandle, $stm, $error);

if (!$ok)
   die("Cannot execute query. $error");

echo "Database Friends created successfully";
sqlite_close($dbhandle);
?> 
```

如果我在数据库不存在时通过浏览器运行此代码，那么我得到：

> 无法打开数据库：/var/www/m_test1.db

信息：

> sqlite_libversion：2.8.17
> phpversion：5.3.2-1ubuntu4.14
> linux Ubuntu 10.04

通过查看 phpinfo，似乎启用了 SQLite、SQLite3 和 PDO_Sqlite。

任何帮助来完成这项工作将不胜感激。

编辑：解决方案是：'chmod ugo+rwx /var/www' :)
之后 sqlite_open 和 PDO 都可以创建数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:31:18.043

PHP5 与`sqlite_open()`. 您需要改用 PDO，如下所示：[https ://stackoverflow.com/a/4751965/369032](https://stackoverflow.com/a/4751965/369032)

（从上面的答案复制的代码）

```
try 
{
    /*** connect to SQLite database ***/

    $dbh = new PDO("sqlite:VPN0.sqlite");
    echo "Handle has been created ...... <br><br>";

}
catch(PDOException $e)
{
    echo $e->getMessage();
    echo "<br><br>Database -- NOT -- loaded successfully .. ";
    die( "<br><br>Query Closed !!! $error");
}

echo "Database loaded successfully ...."; 
```

# android - Javah 找不到 khronos.opengles.GL10

> ID：10373575
> 
> 赞同：2
> 
> 时间：2012-04-29T15:58:59.147
> 
> 标签：android, classpath, native-code, javah

这里解决了类似的问题，例如[这个](https://stackoverflow.com/questions/9985336/javah-cant-find-class-android-ndk)问题，但是我已经检查了他们的答案，并且在实施之后`javah`仍然无法找到`javax.microedition.khronos.opengles.*;`配置。

我编辑了我的类路径（在 Eclipse 中）以包含 Android SDK API 10 .jar 文件，所以这应该可以工作。我需要编辑外部环境变量吗？我已经尝试过回显 $CLASSPATH，它似乎是空白的，所以我不知道这里有什么问题，并且在将它导出到我的`android.jar`文件位置后，它仍然无法正常工作。

因此，我不知道该怎么做。

可以做些什么来解决这个问题？看来唯一的问题真的是这个库，没有别的了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:46:15.600

对于 android-ndk-r8b 和 windows 7（64 位），您必须编写 -bootclasspath 并准确指向 android.jar 文件和可选的 -classpath。例如：

```
javah -classpath bin/classes -bootclasspath "C:\android-sdk\platforms\android-8\android.jar" com.example.SanAngeles.DemoRenderer 
```

# java - Maven 目标“war:inplace”为非战争项目生成 webapp 文件夹

> ID：10373580
> 
> 赞同：1
> 
> 时间：2012-04-29T15:59:49.940
> 
> 标签：java, maven

我建立了一个maven多模块项目，一个带有包装“war”，另外两个带有包装“jar”。

当我在父项目上执行“mvn war:inplace”时，Maven 会为每个子项目生成一个文件夹 src/main/webapp。据我了解，它只对 WAR 项目有意义。我如何告诉 Maven 不要在 JAR 项目上运行该目标？

感谢您的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:38:56.523

您必须调用 mvn war:inplace 而不是从多模块构建的根目录。简单的解决方案是 cd 进入 war 模块并在那里执行。或者您可以使用/尝试以下方法。进入根文件夹并尝试：

```
mvn -pl YourWarModuleName war:inplace 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-12T16:42:11.307

您可以将 pom.xml 战争插件中的 executions 元素用于多模块项目中的 web 应用程序。

```
<executions>
    <execution>
        <id>war-inplace</id>
        <phase>package</phase>
        <goals>
            <goal>inplace</goal>
        </goals>
    </execution>
</executions> 
```

# jquery - 在 jQuery 中，我怎样才能添加一些东西作为兄弟姐妹？

> ID：10373581
> 
> 赞同：10
> 
> 时间：2012-04-29T15:59:51.027
> 
> 标签：jquery

例如假设我有

```
<div class="sibling1"></div>
<div class="sibling3"></div> 
```

我该如何插入

```
<div class="sibling2"></div> 
```

以上之间？我已经尝试过，但这会使孩子不是兄弟姐妹

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-29T16:42:37.593

在 jQuery 中，有许多不同的选项可用于在特定位置插入内容。[在jQuery 文档页面中对 DOM 插入对象外的内容进行了](http://api.jquery.com/category/manipulation/dom-insertion-outside/)很好的描述。

要在现有元素（例如，不是子元素）之外插入内容，但相对于该对象定位，您可以在此[jQuery 文档](http://api.jquery.com/category/manipulation/dom-insertion-outside/)屏幕截图中显示四个选项：

![在此处输入图像描述](../Images/3d3be2095b92461eed33d718d3afa58f.png)

前两个和后两个之间的区别仅在于哪些参数是哪个。对于前两个，插入位置在 jQuery 对象中，内容在函数参数中。对于最后两个，要插入的内容在 jQuery 对象中，而目标在函数参数中。由于多个函数调用的链接，有时一个或另一个更方便。

如您所见，这使您可以在现有对象之前或之后插入内容（这将使其成为该对象的兄弟）。

如果您希望它成为该对象的子对象，那么您可以使用可以设置/更改内部内容的[六种 jQuery 方法](http://api.jquery.com/category/manipulation/dom-insertion-inside/)中的任何一种，包括`.append()`、、、等...`.appendTo()``.html()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T16:02:13.963

使用[after](http://api.jquery.com/after/)，如下所示：

```
$('.sibling1').after('<div class="sibling2"></div>'); 
```

您还可以使用 ID 代替类，这对我来说感觉更正确，如下所示：

```
<div id="sibling1" class="sibling"></div>
<div id="sibling3" class="sibling"></div> 
```

然后使用：

```
$('#sibling1').after('<div id="sibling2" class="sibling"></div>'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-29T16:01:32.700

[http://api.jquery.com/insertBefore/](http://api.jquery.com/insertBefore/)：

```
$('<div class="sibling2"></div>').insertBefore($('.sibling3')); 
```

# c++ - 如何以编程方式在 root 用户拥有的文件夹中创建文件

> ID：10373583
> 
> 赞同：2
> 
> 时间：2012-04-29T15:59:58.237
> 
> 标签：c++, linux, qt, file-permissions, qfile

我正在用 Qt 开发一个应用程序。我需要在 /usr/share/applications 位置创建一个文件。以下是我的代码

```
 QDir::setCurrent("/usr/share/applications");
  QFile launcherFile;
  launcherFile.setFileName("aptana.desktop");
  int status = launcherFile.open(QIODevice::WriteOnly | QIODevice::Text);
  QTextStream stream(&launcherFile);
  stream<<"Create file";
  launcherFile.close(); 
```

调试时我没有收到任何错误，但也没有创建文件。我认为这是一个权限问题，因为我登录的用户没有访问此文件夹的权限。我已经看到其他应用程序（例如 Synaptic Manager）在继续访问应用程序之前提示输入管理密码。同样，无论如何我可以弹出对话框询问密码并获取凭据以以root用户身份创建文件？还有什么其他方法可以解决这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:50:05.700

我刚刚找到了一种解决一般问题的方法，即请求 root 权限并做某事。[Dio3 调用 system() 并将密码传递给 cmd 级别。](http://ubuntuforums.org/showpost.php?s=0199fa191c227c02f1a623e54c4f84b7&p=6481499&postcount=4). 我不知道“通过系统读取文件并使 QT-API 快乐”的方法，但是您可以通过这种方式更改文件权限......但是每个人都对严重的文件执行此操作应该有安全噩梦 :)

# javascript - RoR，实时更新元素，partials，iFrames还是纯javascript？

> ID：10373584
> 
> 赞同：1
> 
> 时间：2012-04-29T16:00:03.790
> 
> 标签：javascript, ruby-on-rails, live, pusher

我有一个 RoR 应用程序。它向人们提出问题，我想更新这个问题，就像每一分钟一样。我需要将问题和答案实时推送给每个登录的用户，为此我正在使用 Pusher + Heroku。

现在，我正在使用 pusher 向每个人的视图发送一个 ID，然后它每分钟都会删除并显示一个带有新问题的新 iFrame。UI 看起来不太好，更新 iFrame 有点慢，我担心这可能是一种不好的做法。不知道有什么更好的选择？它在想我可以显示一个新的部分，使用 escape_javascript，但这对我来说也很奇怪，这意味着它必须已经存储在控制器中？

或者我可以发出一个新的 javascript 请求，但这会使大量数据存储在哈希中，然后以 HTML 显示。

我不知道是否有人理解我的问题，但如果您有建议或想法，请随时分享。

# jsf-2 - p:commandButton 导致 IllegalStateException

> ID：10373591
> 
> 赞同：0
> 
> 时间：2012-04-29T16:01:05.677
> 
> 标签：jsf-2, primefaces

当我点击页面中的 ap:commandButton 时出现此错误

> java.lang.IllegalStateException：PWC3999：提交响应后无法创建会话

该按钮采用 h:form 格式，如下所示：

```
<p:commandButton value="Save" action="#{discussionManager.save}" ajax="false"/> 
```

但是 h:commandButton 可以正常工作：

```
<h:commandButton value="Save" action="#{discussionManager.save}"/>  (this works) 
```

这是其中包含方法的 bean

```
@Named
@RequestScoped
public class DiscussionManager {

    private static final Logger logger = Logger.getLogger("DiscussionManager");

    @Inject
    private DiscussionDao discussionDao;

    private Discussion discussion = new Discussion();

    @Produces
    @Named
    @RequestScoped
    public Discussion getDiscussion() {
        return discussion;
    }

    public String save() {
        logger.info("Hello");
        discussionDao.create(discussion);
        return "list";
    }
} 
```

我已经等了一整天才发布这个问题，因为我觉得我应该知道如何让它工作。但是我已经阅读并重新阅读了我的书以及许多其他帖子。我只是不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:31:54.487

我怀疑这是因为 bean 超出了范围。当您关闭 ajax 时，它会提交表单，而您实际上正在处理一个新请求。尝试将您的范围扩展到视图范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T21:05:59.767

不太确定我改变了什么来让它工作，因为现在整个事情工作正常。但为了完整起见，这是我页面的相关部分

```
 <h3>Write your message below</h3>
                <p:editor id="editor" 
                        value="#{discussion.message}" 
                        widgetVar="editor" 
                        width="600"
                        required="true"/>  

                <h:message for="editor"/>                                                

                <h:panelGrid columns="2" style="margin-top:10px">
                    <p:commandButton id="submitButton" value="Save" action="#{discussionManager.save}" ajax="false" icon="ui-icon-disk"/> 
                    <p:commandButton id="clearButton" type="button" value="Clear" onclick="editor.clear()" icon="ui-icon-close" />
                </h:panelGrid> 
```

这是我的豆子。希望有人觉得这很有用...

```
@Named
@RequestScoped
public class DiscussionManager implements Serializable {

    private static final Logger logger = Logger.getLogger("DiscussionManager");

    @Inject
    private DiscussionDao discussionDao;

    private Discussion discussion = new Discussion();

    @Produces
    @Named
    @RequestScoped
    public Discussion getDiscussion() {
        return discussion;
    }

    public String save() {
        logger.info("Hello");
        discussionDao.create(discussion);
        return "list";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T13:11:29.813

我无法评论您的最终答案，因此我必须添加另一个答案。我相信您为使示例正常工作所做的就是将 widgetVar 添加到您的编辑器组件中。我也有这个问题。在我添加 widgetVar 行之前，PrimeFaces Demo 上的示例无法正常工作。您需要在 onclick 调用中引用 widgetVar 名称而不是 id。为了清楚起见，我在 id 和 widgetVar 之间使用了不同的名称，因此我将您的编辑器代码更改为：

```
<h3>Write your message below</h3>
 <p:editor id="editorID" 
        value="#{discussion.message}" 
        widgetVar="editorWidget" 
        width="600"
         required="true"/>  

  <h:message for="editor"/>                                                

<h:panelGrid columns="2" style="margin-top:10px">
    <p:commandButton id="submitButton" value="Save" action="#{discussionManager.save}" ajax="false" icon="ui-icon-disk"/> 
    <p:commandButton id="clearButton" type="button" value="Clear" onclick="editorWidget.clear()" icon="ui-icon-close" />
</h:panelGrid> 
```

我希望这有助于澄清。

# php - Javascript确认框+里面的表格

> ID：10373598
> 
> 赞同：0
> 
> 时间：2012-04-29T16:01:40.763
> 
> 标签：php, javascript, forms

我有一个 PHP/MySQL 礼物清单，人们可以单击“保留”按钮来保留一件礼物。问题是，在那个列表中，有一个被许愿了 10 次的礼物。因此，要保留所有 10 件某件礼物，必须单击保留按钮 10 次，并且 javascript 始终确认是否愿意保留该礼物的一件。

我现在所追求的是javascript确认到确认+表单的更改，它将数据发送到action.php。

在 HTML 中，它看起来像这样：

```
<p>How many piece of gift are you willing to reserve?</p>
<form action="action.php" method="post">
    <input type="text" name="giftammount" />
</form> 
```

当确认返回 true 时，它​​将提交答案，而 action.php 将为 MySQL 表发挥作用。

那么，这在技术上是否可行？不是我尝试过，我花了几个小时想知道这一点，但无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:22:15.823

如果您使用的是 jQuery UI，那么对话框小部件可能正是您所需要的：

> 使用模式对话框要求用户在多步骤过程中输入数据。在内容区域嵌入表单标记，将 modal 选项设置为 true，并使用按钮选项指定主要和次要用户操作。

查看[jQuery UI 页面](http://jqueryui.com/demos/dialog/#modal-form)以获取示例和基本代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:17:33.377

Javascript 确认框和表单是两个**完​​全**不同的东西。

解决此问题的一种方法是创建模态框并模拟确认框+确认对话框效果。

很少有其他函数像`alert()`,`confirm()`只`prompt()`接受文本***而不接受 HTML***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T16:23:22.237

以下可能会有所帮助

如果函数 confirmAction 返回 true，则表单将被提交，否则表单不会。如果确认过程需要 ajax ，您可以使用 jquery ajax 函数与`asnc:true`

```
function confirmAction(){
  //return true or false
}

<form action="action.php" onsubmit="return confirmAction()" method="post">
    <input type="text" name="giftammount" />
</form> 
```

# php - PHPMailer "$mail->MsgHTML($msg)" 问题与 "$msg"

> ID：10373603
> 
> 赞同：0
> 
> 时间：2012-04-29T16:02:03.633
> 
> 标签：php, ajax, forms, phpmailer, mailer

我在这里问是因为我没有得到 OVH（我的主机）的答复。问题是：如果我将 $mail->MsgHTML($msg) 替换为 $mail->MsgHTML($_POST['message'])，我会立即收到带有标题、名称、电子邮件、主题和消息的邮件。但是当我输入 $msg 时，我没有收到任何邮件。

```
$msg='Name:'.$_POST['name'].'<br />
Email:'.$_POST['email'].'<br />
Subject: '.$_POST['subject'].'<br />
IP:'.$_SERVER['REMOTE_ADDR'].'<br /><br />

Message:<br /><br />

'.nl2br($_POST['message']).'

'; 
```

整个 PHP（来自 FancyAJAXForm）：

```
<?php
/* config start */

$emailAddress = 'my mail address';

/* config end */

require "class.phpmailer.php";

foreach($_POST as $k=>$v)
{
if(ini_get('magic_quotes_gpc'))
$_POST[$k]=stripslashes($_POST[$k]);

$_POST[$k]=htmlspecialchars(strip_tags($_POST[$k]));
}

$msg='Name:'.$_POST['name'].'<br />
Email:'.$_POST['email'].'<br />
Subject: '.$_POST['subject'].'<br />
IP:'.$_SERVER['REMOTE_ADDR'].'<br /><br />

Message:<br /><br />

'.nl2br($_POST['message']).'

';

$mail = new PHPMailer();
$mail->IsMail();

$mail->AddReplyTo($_POST['email'], $_POST['name']);
$mail->AddAddress($emailAddress);
$mail->SetFrom($_POST['email'], $_POST['name']);
$mail->Subject = "Contact Form: ".mb_strtolower($_POST['subject'])." from    ".$_POST['name']."";

$mail->MsgHTML($msg);

$mail->Send();

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T19:06:28.750

好的，我解决了问题。

我已经用 body 函数替换了 $mail->msgHTML($msg) ：

```
$mail->IsHTML(true);
$mail->Body='Name:  '.$_POST['name'].'<br />
Email:  '.$_POST['email'].'<br />
Sujet:  '.$_POST['subject'].'
<br /><br />

'.nl2br($_POST['message']).'

<br /><br /> 
Browser:  '.$_SERVER['HTTP_USER_AGENT'].'<br />
IP:  '.$_SERVER['REMOTE_ADDR'].'<br />
';

$mail->Send(); 
```

它完美地工作！感谢所有参与者！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T07:20:13.517

我知道这不是很及时，但我找到了一个替代解决方案：

我有一个类似的问题，但我有一些有效的页面和一些无效的页面。我尝试了您的解决方案，但它给了我相同的结果。

然后我查看了来自工作页面的电子邮件的 html 源代码，并注意到我已经包含了开始和结束 html 和 body 标签，并且我没有将它们包含在非工作页面中。这就是全部，$mail->msgHTML($msg) 为我工作。

希望这可以帮助。

# objective-c - 无法让 sqlite 显示输出

> ID：10373607
> 
> 赞同：0
> 
> 时间：2012-04-29T16:02:41.047
> 
> 标签：objective-c, ios, xcode

我对 sqlite 很陌生，我一直试图让 sqlite 输出到 UIcomponents 无济于事。我对它的语法有一种轻推的感觉。任何指针？提前谢谢。sql结构：|ROW|QUESTIONS|ANSWER|CHOICE1|CHOICE2|CHOICE3|CHOICE4|

。H：

```
@property (nonatomic) NSInteger *q_num;
@property (nonatomic, copy) NSString *q;
@property (nonatomic, copy) NSString *c1;
@property (nonatomic, copy) NSString *c2;
@property (nonatomic, copy) NSString *c3;
@property (nonatomic, copy) NSString *c4; 
```

米：

```
//Reopening path to DB for data acq
[self filePath];
int row = 1;
NSString *queryRow1 = [NSString stringWithFormat: @"SELECT * FROM QUESTIONBANK WHERE ROW = 1", row];
sqlite3_stmt *statement;
if (sqlite3_prepare_v2(db, [queryRow1 UTF8String], -1, &statement, nil) == SQLITE_OK) {
    q_num = (NSInteger *)sqlite3_column_int(statement, 0);
    q = (NSString *)sqlite3_column_text(statement, 1);
    //omit (statement, 2) since it is the answer
    c1 = (NSString *)sqlite3_column_text(statement, 3);
    c2 = (NSString *)sqlite3_column_text(statement, 4);
    c3 = (NSString *)sqlite3_column_text(statement, 5);
    c4 = (NSString *)sqlite3_column_text(statement, 6);
}

//Question no.1
//Label for no.1
scrollViewFrame = CGRectMake(10, 50, 20, 20);
UILabel *no1 = [[UILabel alloc]initWithFrame:scrollViewFrame];
no1.backgroundColor = [UIColor clearColor];
no1.font = [UIFont fontWithName:@"Helvetica" size:21];
NSString *questionNumber = [NSString stringWithFormat:@"%d", q_num];
no1.text = questionNumber;
[scrollView addSubview:no1];
[no1 release];

scrollViewFrame = CGRectMake(10, 50, 290, 20);
UILabel *question = [[UILabel alloc]initWithFrame:scrollViewFrame];
question.backgroundColor = [UIColor clearColor];
question.font = [UIFont fontWithName:@"Helvetica" size:21];
question.text = q;
[scrollView addSubview:question];
[question release];

scrollViewFrame = CGRectMake(10, 50, 290, 20);
UILabel *choice1 = [[UILabel alloc]initWithFrame:scrollViewFrame];
choice1.backgroundColor = [UIColor clearColor];
choice1.font = [UIFont fontWithName:@"Helvetica" size:21];
choice1.text = c1;
[scrollView addSubview:choice1];
[choice1 release];

scrollViewFrame = CGRectMake(10, 50, 290, 20);
UILabel *choice2 = [[UILabel alloc]initWithFrame:scrollViewFrame];
choice2.backgroundColor = [UIColor clearColor];
choice2.font = [UIFont fontWithName:@"Helvetica" size:21];
choice2.text = c2;
[scrollView addSubview:choice2];
[choice2 release];

scrollViewFrame = CGRectMake(10, 50, 290, 20);
UILabel *choice3 = [[UILabel alloc]initWithFrame:scrollViewFrame];
choice3.backgroundColor = [UIColor clearColor];
choice3.font = [UIFont fontWithName:@"Helvetica" size:21];
choice3.text = c3;
[scrollView addSubview:choice3];
[choice3 release];

scrollViewFrame = CGRectMake(10, 50, 290, 20);
UILabel *choice4 = [[UILabel alloc]initWithFrame:scrollViewFrame];
choice4.backgroundColor = [UIColor clearColor];
choice4.font = [UIFont fontWithName:@"Helvetica" size:21];
choice4.text = c4;
[scrollView addSubview:choice4];
[choice4 release]; 
```

如您所见，我没有正确对齐 UIComponents。只是想在我将它们安排在适当的位置之前看看它是否有效。如果对我处理编码部分的方式提出任何批评，我也将不胜感激。我再次感谢您的时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:30:16.827

我认为您应该按照我在 (.m) 文件中的代码来修复您的代码

```
q_num = sqlite3_column_int(statement,0);
q = [NSString stringWithUTF8String:(char *)sqlite3_column_text (statement,1)]; 
```

使用带有 UTF8 的 NSString 格式。

# java - 如何使用swing创建包含文件夹中所有文件的列表？

> ID：10373611
> 
> 赞同：3
> 
> 时间：2012-04-29T16:02:48.673
> 
> 标签：java, swing, jlist

我想从一个文件夹中创建一个包含文件名的列表，并显示该文件夹中存在的具有特定扩展名的所有文件。我希望列表是可选择的，以便我可以从列表中选择和删除文件或对其进行编辑。我知道如何从文件夹中选择所有文件，但不知道如何在[GUI](http://www.java-tips.org/java-se-tips/java.io/list-the-names-of-all-files-in-a-particular-dire.html)中显示它。

```
File folder = new File("c:/");
File[] listOfFiles = folder.listFiles(); 
```

![在此处输入图像描述](../Images/81dbfd5fa02442b37d97e66a7f071a47.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T17:49:18.263

此[示例](https://stackoverflow.com/a/4039359/230513)说明如何枚举目录中的文件并将它们显示在 a[`JToolBar`](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html)和 a[`JMenu`](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)中。您可以使用`Action`，例如`RecentFile`来封装行为以在您的[`ListModel`](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)和中使用[`ListSelectionListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T16:10:57.063

您从带有扩展名的文件夹中获取所有文件名，并从中构造一个字符串数组。然后使用 JList 在 swing 中填充。例如，如下所示

```
String options = { "apple.exe", "ball.exe" "cat.exe"};
JList optionList = new JList(options); 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T17:28:30.480

请参阅 JFileChooser（JFileChooser 帮助页面的无耻副本）：

```
JFileChooser chooser = new JFileChooser();
FileNameExtensionFilter filter = new FileNameExtensionFilter(
    "JPG & GIF Images", "jpg", "gif");
chooser.setFileFilter(filter);
int returnVal = chooser.showOpenDialog(parent);
if(returnVal == JFileChooser.APPROVE_OPTION) {
   System.out.println("You chose to open this file: " +
        chooser.getSelectedFile().getName());
} 
```

看到文件名过滤器了吗？

setMultiSelectionEnabled（真）；是另一个提示。

位置：java/docs/api/javax/swing/JFileChooser.html

# decision-tree - 了解 SAS Enterprise Miner 中的决策树模型

> ID：10373613
> 
> 赞同：1
> 
> 时间：2012-04-29T16:02:57.003
> 
> 标签：decision-tree

我正在寻找更多关于使用 SAS Enterprise Miner 自动生成决策树的信息。

我正在寻找做出哪些类型的决策以及示例决策树及其每个组件的基本含义。![决策树](../Images/7cf4a80972f33d2d9a819ead9d038710.png)

如果有人对此有一些有用的信息，很高兴听到它。

# android - 提交对开源项目的更改的习惯？

> ID：10373616
> 
> 赞同：4
> 
> 时间：2012-04-29T16:03:21.950
> 
> 标签：android, git, open-source

我最近一直在使用 Android 框架和修订控制系统 (Git) 进行练习，并且对我经常使用的应用程序的 UI 进行了一些修改。这是一个小型开源项目，我很好奇向此类项目提交更改的最佳实践是什么？我确定这主要取决于开发人员本身，但是在提交更改时是否有任何禁忌或区域（代码或其他）要避免？我应该先联系开发人员还是只提交修改等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T16:18:35.810

这取决于项目。

您在问题中提到了 Git。如果项目已经在使用 Git，您可以在 GitHub 或 BitBucket 之类的地方发布自己的分叉 Git 存储库。更好的是，如果初始项目也在 GitHub 或 BitBucket 上，请从那里分叉并打开拉取请求。

对于其他版本控制系统，您可能必须直接通过他们的问题跟踪系统提交补丁。

话虽这么说，但不要忽视这一点的人性方面。大多数 OSS 维护者都会欢迎补丁，但您必须记住，他们需要了解您的修改做了什么以及为什么要进行修改，无论是错误修复还是附加功能。单独的拉取请求适用于直接修改（例如，仅更改几行具有明确目的的代码），但如果需要进一步讨论，则不一定很好。

检查是否有开发者。该项目的邮件列表（或回退到用户列表，或者更糟的是维护者的电子邮件地址）并发送一封电子邮件来描述您的建议。您贡献的领域可能不是当前开发团队的专业领域。与往常一样，在这些情况下，清晰和礼貌是必要的。一般来说，不管你的想法有多好，在没有与开发人员讨论过的情况下，避免转储一个会在不同地方修改大量文件的补丁。

此外，值得检查许可协议。一些项目会期望您同意为该项目做出贡献，以便以后可以在需要时重新获得许可。

# java - 如何注入具有不同范围的同一类的对象？

> ID：10373617
> 
> 赞同：1
> 
> 时间：2012-04-29T16:03:26.433
> 
> 标签：java, java-ee-6, cdi, jboss-weld, jsr299

**就简单性和正确性而言，注入具有不同作用域的同一类的对象的最佳方法是什么？**

在一个 servlet 中，我想注入具有不同范围的同一类的对象。还不知道要不要用jsf。

*   简单：`Qualifier`为每个作用域制作一个和一个生产者方法太多了；做一个接口，两个类，在里面添加替换`beans.xml`也太多了；有`Address#isCurrent()`方法没有意义。
*   正确性：JSR299, 3.11 说：*不推荐使用 @Named 作为注入点限定符。* 还是不知道为什么。
    虽然`@Named`在注入点使用适用于`@ApplicationScoped`and `@RequestScoped`但不适用于`@SessionScoped`. 请参阅下面的*命名片段*。

在春天很容易：
**春天片段**

```
<bean id="currentAddress" class="xxx.Address" scope="session" />
<bean id="newAddress" class="xxx.Address" scope="request" />
<bean id="servlet" class="xxx.MyServlet">
 <property name="currentAddress" ref="currentAddress" />
 <property name="newAddress" ref="newAddress" />
</bean> 
```

**命名片段**

```
/* Address class */
@Produces @RequestScoped @Named(value="request")
 public Address getNewAddress(){
 return new Address();
}

@Produces @SessionScoped @Named(value="application")
 public Address getCurrentAddress(){
 return new Address();
}
/* Servlet */
@Inject @RequestScoped @Named("request")  private Address newAddress;
@Inject @ApplicationScoped @Named("application") private Address currentAddress; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T17:37:24.823

包含此建议的原因与人们更喜欢枚举而不是任意字符串作为常量的原因相同，因为它不是类型安全的。您可以很容易地输入错误的类名，它会编译得很好并且在运行时会失败。包含该建议是因为在大多数情况下，当您能够在编译时强制执行这些约束时，@named 会使您的应用程序变得不必要地脆弱。

这是一篇[很好的文章](http://www.oracle.com/technetwork/articles/java/cdi-javaee-bien-225152.html)，概述了原因：

处理这种情况的首选方法是使用带有枚举值的@Qualifiers。查看标题为“String Qualifiers are Legacy”和“The Right Way”的部分，了解处理此问题的步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T18:14:49.233

感谢@nsfyn55 指出[这篇好文章](http://www.oracle.com/technetwork/articles/java/cdi-javaee-bien-225152.html)，在阅读了“正确的方法”部分后，我想出了我认为在简单性和正确性方面实现它的最佳方法。

所以我只使用一个接口作为限定符注释。

```
/* Qualifier annotation */
@Qualifier
@Retention(RUNTIME)
@Target({FIELD,METHOD})
public @interface Scope {

 Type value();

 enum Type { REQUEST, SESSION, APPLICATION };
}

/* Address class */
@Produces @Scope(REQUEST) @RequestScoped
 public Address request() {
 return new Address();
}

@Produces @Scope(SESSION) @SessionScoped
 public Address session() {
 return new Address();
}

/* Servlet */
@Inject @Scope(REQUEST)
private Address newAddress;

@Inject @Scope(SESSION)
private Address currentAddress; 
```

# listview - jQuery 移动错误“无法在初始化之前调用 listview 上的方法”

> ID：10373618
> 
> 赞同：21
> 
> 时间：2012-04-29T16:03:30.983
> 
> 标签：listview, jquery-mobile

我正在动态填充列表所在位置的`<ul data-role="listview">`then 调用，最后是.`location.href="#Results"``listview('refresh')`

所有这些都是在来自同一页面的 Ajax 请求的成功回调中完成的。它或多或少地工作，但我收到以下错误：

```
Uncaught cannot call methods on listview prior to initialization; attempted to call method 'refresh' 
```

我猜 jQuery mobile 还没有构建列表视图。我能做什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-10-01T08:45:03.100

只需先调用不带任何参数的 listview 方法：

```
$('#myListview').listview().listview('refresh'); 
```

解决方案取自[http://www.gajotres.net/uncaught-error-cannot-call-methods-on-prior-to-initialization-attempted-to-call-method-refresh/](http://www.gajotres.net/uncaught-error-cannot-call-methods-on-prior-to-initialization-attempted-to-call-method-refresh/)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-28T10:41:25.570

您应该检查它是否已经初始化，刷新列表以防它被初始化，否则按照以下方式触发创建：

```
if ( $('#myListview').hasClass('ui-listview')) {
    $('#myListview').listview('refresh');
     } 
else {
    $('#myListview').trigger('create');
     } 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-20T11:56:33.103

我有同样的错误。我通过在我的查询中添加“：可见”来解决它，所以它只会在列表可见时运行。

所以你的代码看起来像这样：

```
$('#myListview:visible').listview('refresh'); 
```

对我来说工作得很好！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-29T18:16:10.653

[http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html) 你必须挂钩 pageinit 事件。在此之前，您不能调用任何 JQM 方法。IE：

```
$('#Results').bind('pageinit', function() {
  $('#myListview').listview('refresh');
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-16T12:10:08.463

使用 `$.mobile.changePage("#Results");`而不是 `location.href`
实际 `location.href` 重新加载页面，以便列表视图被破坏

然后 listview.refresh

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-07T05:25:39.307

只需添加 listview.refresh 对我来说效果很好，而且我也在使用 ajax 将内容加载到 div 中。

```
document.getElementById("myListview").innerHTML = xmlhttp.responseText;
//works fine on my work
$('#myListview').listview('refresh'); 
```

如果我的帖子在这里。

[jquery mobile ajax 将内容加载到 div 元素中将失去它的 css 样式](https://stackoverflow.com/questions/25706726/jquery-mobile-ajax-load-content-into-a-div-element-will-lose-its-css-style)

我花了将近 3 个小时来解决我的 postprobem.finaly 在这里找到答案。谢谢。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-25T10:32:06.710

This is what worked for me:

```
 $(document).delegate('#Results', 'pageshow', function (){
   $('#mylistview').listview('refresh').trigger('create'); 
   }); 
```

# parsing - ANTR3 设置令牌接受的字符数

> ID：10373620
> 
> 赞同：1
> 
> 时间：2012-04-29T16:04:00.563
> 
> 标签：parsing, antlr, antlr3

我必须创建一个 Lexer，它仅在最多 8 位数字时才接受例如整数。这里有替代方法而不是像这样写吗？

```
INTEGER : (DIG | DIG DIG | DIG DIG DIG | ...) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:03:03.947

这可以使用像这样的*门控语义谓词*来完成：

```
INTEGER
@init{int n = 1;}
  :  ({n <= 8}?=> DIGIT {n++;})+
  ;

fragment DIGIT : '0'..'9'; 
```

有关这种谓词的详细信息，请参阅：[什么是 ANTLR 中的“语义谓词”？](https://stackoverflow.com/questions/3056441/what-is-a-semantic-predicate-in-antlr)

# hadoop - Hadoop conf目录下的xml配置文件修改后是否需要重启hadoop？

> ID：10373621
> 
> 赞同：1
> 
> 时间：2012-04-29T16:04:03.400
> 
> 标签：hadoop, mapreduce, cloudera

假设我通过 hadoop 中的 conf 文件更改了 tasktrackers 的端口号或更改了最大映射任务的数量，我是否需要停止并重新启动服务器/守护程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:41:12.043

这取决于您更改了哪些选项，但是对于您提供的两个示例，我会说是，重新启动 mapred 服务（您不需要为这些选项重新启动 DFS 服务）。

我认为修改特定选项时需要重新启动的任何地方都没有详尽的清单。

# c - 将简单的 Windows ui 添加到控制台应用程序

> ID：10373623
> 
> 赞同：2
> 
> 时间：2012-04-29T16:04:21.497
> 
> 标签：c, winforms, user-interface, console-application

我有一个使用 VS2010 的 C 控制台应用程序，我想在其中添加一个简单的 Window 界面。（程序所做的只是一个简单的循环：从用户那里获取一些输入，运行程序，产生一个结果，然后继续）。用户的输入基本上只涉及修改 C 结构的值：

```
struct input {
  int howMany;
  char name[100];
  int style;
  char child[100];
  char parent[100];
  bool useShoes;
  double weight;
} 
```

理想情况下，我想传入一个结构，让用户进行任何更改，然后将其取回。对于不想花几天时间学习新的脚本或编程语言的人来说，最简单的方法是什么？（我只知道C……怎么说呢，我是英语专业的……）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:20:07.137

你要么必须学习一门新语言，要么学习一个你不熟悉的新框架。如果你想在 Windows 上直接使用 C，你可以使用[Win32 API 创建一个 window](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632680%28v=vs.85%29.aspx)。然而，Win32 是老旧的、硬壳的，并且不像其他框架那样易于使用。如果您打算成为一名 Windows 开发人员，最好选择 C#。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T16:10:05.773

[GTK](http://qt.nokia.com/products/)可能是*最简单*的方法（但一点也不简单）。[如果您可以迁移到 C++， Qt](http://qt.nokia.com/products/)会好得多。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-29T16:15:21.990

要创建一个窗口，您需要C# 中的[**Form**](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)类，

在 VS2010 中创建 Windows 窗体项目。而且您可以在那里嵌入您的代码，但您必须编写额外的代码行或将代码转换为 C# 以将用户输入以及控制台输出映射到 Windows 表单，这非常简单。

以下是入门的简单学习 MSDN 链接。

[http://msdn.microsoft.com/en-us/library/ms229601.aspx](http://msdn.microsoft.com/en-us/library/ms229601.aspx)

希望能帮助到你。

# objective-c - 如何在 iPad 中全屏显示视图控制器

> ID：10373626
> 
> 赞同：0
> 
> 时间：2012-04-29T16:04:41.760
> 
> 标签：objective-c, ipad, uiviewcontroller, fullscreen

我有一个视图控制器，我想全屏显示它，这些视图有标签栏项目，下面是我用来全屏显示视图的两个语句：

```
 EditMomViewController *momctr=[[EditMomViewController alloc]init];
    momctr.modalPresentationStyle=UIModalPresentationCurrentContext;
    [self presentModalViewController:momctr animated:YES]; 
```

但它不起作用，任何关于这样做的想法都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:12:04.790

您可以将其呈现为不显示选项卡的模态视图控制器。我不确定这是否符合您的意图，但这是全屏显示的明确方式。在要显示模式的根 VC 内部执行此操作：

```
[self presentModalViewController:theOtherViewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:08:22.093

的`tabBar`内容视图不会填满全屏，因此您`ViewController`的视图也不能与整个屏幕重叠。我不建议使用视图的框架或父级，因为它不是稳定的解决方案。取而代之的是，创建一个包含所有内容的中间视图。当您需要全屏模式时，将此中间视图放在根窗口的右侧，`ViewController`在其他情况下将其放回您的视图。

```
-(void) setFullScreen:(BOOL)fullScreen {
    if(fullScreen) {
        [self.view.window addSubview:intermediateView];
        intermediateView.frame = self.view.window.bounds;
    } else {
        [self.view addSubview:intermediateView];
        intermediateView.frame = self.view.bounds;
    }
} 
```

# c# - 使用 OLEDB 获取包含特定序列的蛋白质

> ID：10373627
> 
> 赞同：0
> 
> 时间：2012-04-29T16:04:43.650
> 
> 标签：c#, sql, oledb

这是我的程序的背景：每种蛋白质都由一系列氨基酸（或 AA）组成

我有一些表格：tblProInfo（包含有关蛋白质的一般信息），tblOrderAA（包含特定蛋白质的序列（AA 序列）（对于每种蛋白质，我之前设置了一个序列号））

现在，我正在尝试恢复包含用户在 textbox1 中输入的部分序列的蛋白质的科学名称。很可能不止一种蛋白质包含用户键入的序列。

这是我的代码。我得到“语法错误”，我确定我还有更多错误。请帮助我！

```
 public void OpenDB()
    {
        dataConnection = new OleDbConnection();
        try
        {
            dataConnection.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Projects_2012\\Project_Noam\\Access\\myProject.accdb";
            dataConnection.Open();
        }
        catch (Exception e)
        {
            MessageBox.Show("Error accessing the database: " +
                             e.Message,
                             "Errors",
                             MessageBoxButtons.OK,
                             MessageBoxIcon.Error);
        }
    }

private string FromCodonsToProtein(string codons)
    {
        OpenDB();
        int sizePro=0, i,counter=0,serialPro;
        string st="",tempst="";

        OleDbCommand datacommand = new OleDbCommand();
        datacommand.Connection = dataConnection;
        datacommand.CommandText = "SELECT tblProInfo.proInfoAAnum, tblProInfo.proInfoSerialNum,tblProInfo.proInfoScienceName FROM tblProInfo";
        OleDbDataReader dataReader = datacommand.ExecuteReader();
        while(dataReader.Read())
        {
            sizePro = dataReader.GetInt32(counter);
            serialPro= dataReader.GetInt32(counter+1);
            counter++;
              OleDbCommand cmd= new OleDbCommand();
              cmd.Connection = dataConnection;
              cmd.CommandText = "SELECT tblOrderAA.orderAACodon1 FROM tblOrderAA"
                               +"WHERE (((tblOrderAA.orderAASerialPro)='"+serialPro+"'))";

              OleDbDataReader rdr = cmd.ExecuteReader();
            tempst="";
            for (i = 0; i > sizePro; i++)
            {
                tempst = tempst + rdr.GetString(i);
            }
            if (tempst.Contains(codons))
            {
                st = st + " \n" + dataReader.GetString(counter);
            }
        }
            return st;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:09:34.383

这里少了一个空格

```
 cmd.CommandText = "SELECT tblOrderAA.orderAACodon1 FROM tblOrderAA" 
                       +"WHERE (((tblOrderAA.orderAASerialPro)='"+serialPro+"'))"; 
```

以这种方式重写

```
 cmd.CommandText = "SELECT tblOrderAA.orderAACodon1 FROM tblOrderAA"  
                       +" WHERE (((tblOrderAA.orderAASerialPro)='"+serialPro+"'))"; 
                      // ^ here 
```

但是，您应该使用参数化查询（也使用 msaccess）来避免可能的错误和注入攻击。
另一个问题是全局数据连接。不要那样做，这样你一无所获。
返回连接并使用 using 语句对其进行封装。

例如：

```
public OleDbConnection OpenDB()   
{   
    dataConnection = new OleDbConnection();   
    dataConnection.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Projects_2012\\Project_Noam\\Access\\myProject.accdb";   
    dataConnection.Open();   
    return dataConnection;
} 
```

然后在调用代码中使用此语法

```
using(OleDbConnection cnn = OpenDB())
{
    // in the rest of your code, replace dataConnection with cnn
    // The using statement will ensure that in the case of exceptions
    // your connection will be allways closed and properly disposed

    ........

} 
```

编辑：不能给你一个完整的工作解决方案，我不知道你的问题的太多方面，但是一个很大的简化将以这种方式改变你的查询

```
SELECT DISTINCT 
       tblProInfo.proInfoAAnum, 
       tblProInfo.proInfoSerialNum,
       tblProInfo.proInfoScienceName 
FROM   tblProInfo LEFT JOIN tblOrderAA 
  ON   tblOrderAA.orderAASerialPro = tblProInfo.proInfoSerialNum

WHERE  tblOrderAA.orderAACodon1 = @codons 
```

使用其查询编辑器直接在访问中尝试它，如果它按预期工作，然后更改您的代码。您不需要两个查询和交叉循环来获得结果。

# c# - 如何让 View Model 知道成功验证的表单

> ID：10373630
> 
> 赞同：0
> 
> 时间：2012-04-29T16:05:15.947
> 
> 标签：c#, .net, mvvm, prism

我有一个包含几个字段的注册表单。这是一个`PRISM MVVM`应用程序。

其中一个字段的 XAML 如下所示（RegisterView.xaml）：

```
<TextBlock>Surname</TextBlock>
<TextBox Validation.ErrorTemplate="{StaticResource validationTemplate}"      HorizontalAlignment="Left" Margin="0" Name="Surname" VerticalAlignment="Top" >
    <TextBox.Text>
        <Binding Path="Surname" UpdateSourceTrigger="LostFocus" >
            <Binding.ValidationRules>
                 <val:Required />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

从上面的代码可以看出，我使用了Required 类来验证字段。类Required 的函数Validate() 然后返回`ValidationResult`对象。我还为输入的样式定义了一些触发器，因此我能够在视图中向用户显示验证结果。

我不知道的是如何检测 ViewModel 中所有输入的验证状态。在 ViewModel 中，我具有`SaveUserCanExecute`应该在所有输入的验证状态上启用/禁用注册表单提交按钮的功能。

那么有什么简单的方法可以实现这一点吗？

我可以为此做一些解决方法，但我认为这不是正确的方法。

现在，我在提交按钮的 Click 事件触发的 View 代码中创建了一个 Submit_Click 函数。

在 RegisterView.xaml 中

```
<Button Content="Register" HorizontalAlignment="Left" Margin="0" Name="Submit" VerticalAlignment="Top" Command="{x:Static inf:Commands.SaveUser}" Click="Submit_Click" /> 
```

我还在后面的代码中创建了新的公共布尔变量“formIsValid”。当按下提交按钮时，我检查所有输入是否没有验证错误（带`Validation.GetHasError(InputName)`函数）。如果是这样，我将`formIsValid`变量设置为 true，否则，我将其设置为 false。

在 RegisterView.xaml.cs 中

```
private void Submit_Click(object sender, RoutedEventArgs e)
{
    if (Validation.GetHasError(Firstname) == false && Validation.GetHasError(Surname) == false)
    {
        registerFormValid = true;
    }
    else
    {
        registerFormValid = false;
    }
} 
```

然后在 ViewModel`SaveUserCanExecute`函数看起来像这样：

```
private bool SaveUserCanExecute(string parameter)
{
    if (View.registerFormValid == true)
    {
        return true;
    }
    return false;
} 
```

但正如我之前提到的，我认为这不是正确的方法，我正在寻找更清晰的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:28:38.103

在您的 ViewModel 中实现 IDataErrorInfo，然后您就可以在 VM 中获得所需的所有信息。您的 XAML 只需要 ValidatesOnDataErrors=true

```
<TextBlock>Surname</TextBlock>
<TextBox Validation.ErrorTemplate="{StaticResource validationTemplate}"      HorizontalAlignment="Left" Margin="0" Name="Surname" VerticalAlignment="Top" >
        <TextBox.Text>
            <Binding Path="Surname" UpdateSourceTrigger="LostFocus" ValidatesOnDataErrors="True">
            </Binding>
        </TextBox.Text>
 </TextBox> 
```

编辑：检查 DelegeCommand 的使用，然后你的命令 CanExecute 可以简单地检查 string.IsNullOrEmpty(this.Error)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:17:17.400

将命令 (ICommand) 绑定到您的提交按钮并在其 CanExecute 方法中实现此逻辑。这是一个经典的[ICommand](http://snipplr.com/view/13642/)实现。

# java - jar 中的 System.out.println

> ID：10373632
> 
> 赞同：4
> 
> 时间：2012-04-29T16:05:28.690
> 
> 标签：java, class, command-line, jar

我有这个 java 程序，我想打包在一个 jar 中。它编译得很好，它编译成一个 jar 没有错误。但是当我双击它时，它不会启动。我知道大多数 jar 应用程序都使用 JFrame 并且效果很好。但是是否可以使其基于命令提示符/shell？（比如显示 System.out.println）

示例是否可以通过双击 jar 来执行此代码：

```
public class Hello
{

  public static void main( String[] args )
  {
    System.out.println( "Hello, World!" );
  }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T16:11:43.777

这样做没有问题。但是您希望在哪里看到输出？

如果您从控制台执行，`java -jar my jar.jar`您将看到您的“Hello, World”。

如果要双击，则需要创建一个 JFrame。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T16:17:33.647

您可以更改 jar 文件的文件关联以让它们打开控制台。（这适用于 Windows）

*   打开命令处理器
*   类型`ftype jarfile`
*   你会得到类似的东西：

> `jarfile="C:\Path\To\Java\bin\javaw.exe" -jar "%1 %*"`

*   输入`ftype jarfile "C:\Path\To\Java\bin\java.exe" -jar "%1" %*`（您可能需要管理员权限才能执行此操作）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T17:24:22.690

我没有看到任何人提到明显的解决方案：制作一个 .cmd（或 .bat）文件，其中包含每个人都在谈论的命令 -- `java -jar YourJar.jar`。您可以双击 .cmd 文件，将打开一个控制台窗口。它也会在您的程序退出时立即关闭，因此程序应该在退出之前等待按键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T16:11:33.120

您可以通过包含一个清单文件来使 jar 成为可执行文件，该文件包含具有您的主要方法的类的名称（在您的示例中为 Hello）。[这](http://www.skylit.com/javamethods/faqs/createjar.html)是一个详细说明您需要做什么的链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T16:12:10.577

当然。首先尝试运行您的程序，如下所示：

`java -cp yourjar.jar Main`

其中 Main 是主类的完全限定类名。

当这工作正常并且如果您创建了*可执行的*jar 尝试运行您的程序，如下所示：

`java -jar yourjar.jar`

当这个工作正常时，双击也应该工作，除非您将扩展映射`jar`到程序，而不是`javaw`在安装 JRE 时默认完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-29T16:12:14.160

如果要显示“Hello, world!” 您必须从命令行执行代码的字符串：

```
 jar -jar your_jar_name.jar 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-17T11:05:00.320

输出被转发到控制台，但没有 Eclipse，就没有！解决此问题的唯一方法是在命令提示符下启动程序，然后您将获得程序的输出。

# android - Android登录页面抛出NullPointerException

> ID：10373634
> 
> 赞同：0
> 
> 时间：2012-04-29T16:06:19.983
> 
> 标签：android

我正在尝试创建一个登录页面。我的研究为我提供了以下代码，但我在第 29 行不断收到 java.lang.NullPointerException。我试图自己研究答案，但结果非常困惑。有人可以帮我理解我所缺少的吗？

LOGINTERACTIVITY 类

```
package com.b00512756.Logintester;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class LogintesterActivity extends Activity {

EditText txtUserName;
EditText txtPassword;
Button btnLogin;
Button btnCancel;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        txtUserName=(EditText)this.findViewById(R.id.txtUname);
        txtPassword=(EditText)this.findViewById(R.id.txtPwd);
        btnLogin=(Button)this.findViewById(R.id.btnLogin);
        btnLogin.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
// TODO Auto-generated method stub

if((txtUserName.getText().toString()).equals(txtPassword.getText().toString())){
        Toast.makeText(LogintesterActivity.this, "Login Successful",Toast.LENGTH_LONG).show();
       } else{
        Toast.makeText(LogintesterActivity.this, "Invalid Login",Toast.LENGTH_LONG).show();
       }

}
});       
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="UTF-8"?>
    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="1">

<TableRow>
<TextView 
android:text="User Name: " 
android:id="@+id/TextView01" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content">
</TextView>

<EditText 
android:text="" 
android:id="@+id/txtUname" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content">
</EditText>
</TableRow>

<TableRow>
<TextView 
android:text="Password: " 
android:id="@+id/TextView02" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content">
</TextView>

<EditText 
android:text="" 
android:id="@+id/txtPwd" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content"
android:password="true">
</EditText>
</TableRow>

<TableRow>
<Button
android:text="Cancel" 
android:id="@+id/btnCancel" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content">
</Button>

<Button
android:text="Login" 
android:id="@+id/btnLogin" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content">
</Button>

</TableRow>

</TableLayout> 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.b00512756.Logintester"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".LogintesterActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

错误日志：

```
04-29 15:36:41.570: WARN/dalvikvm(690): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-29 15:36:41.590: ERROR/AndroidRuntime(690): FATAL EXCEPTION: main
04-29 15:36:41.590: ERROR/AndroidRuntime(690): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.b00512756.Logintester/com.b00512756.Logintester.LogintesterActivity}: java.lang.NullPointerException
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at android.os.Looper.loop(Looper.java:123)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at java.lang.reflect.Method.invokeNative(Native Method)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at java.lang.reflect.Method.invoke(Method.java:521)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at dalvik.system.NativeStart.main(Native Method)
04-29 15:36:41.590: ERROR/AndroidRuntime(690): Caused by: java.lang.NullPointerException
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at com.b00512756.Logintester.LogintesterActivity.onCreate(LogintesterActivity.java:29)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-29 15:36:41.590: ERROR/AndroidRuntime(690):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

非常感谢，里奇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:37:29.323

在调试器中运行它。在第 29 行设置断点，并在该点检查变量的值。找出不应该为 null 的那个，然后回顾它的设置位置，并尝试找出它可能被设置为 null 的原因。

另外，尝试注释掉第 29 行，看看会发生什么。

我怀疑你的布局由于某种原因没有正确加载，但我不确定那个原因是什么。可能对您了解它的外观有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:43:16.350

可能那`btnLogin`是NULL。

也许您可以`assertNotNull(bthLogin);`在代码中的这一行之后添加类似的内容：`btnLogin = (Button)this.findViewById(R.id.btnLogin);`

不过，如果您在代码中发布第 29 行的内容会更有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T16:54:58.197

您是否尝试将 2 个`btnLogin`名称中的一个更改为另一个名称？

您有 2 个具有相同名称的不同对象：`btnLogin`

# delphi - 为什么我在 Delphi XE2 中收到错误缺少接口方法的实现？

> ID：10373636
> 
> 赞同：1
> 
> 时间：2012-04-29T16:06:38.827
> 
> 标签：delphi, delphi-xe2

考虑以下代码：

```
uses
  {... }
  ComObj,
  ShlObj;

type
  TContextMenu = class(TComObject, IShellExtInit, IContextMenu)
  private
  {(*}
  const
    GUID: TGUID = '{99D8B139-0855-4C5D-95E7-BC8EC6254B3D}';
  {*)}
  private
    FCmdCount: LongWord;
    FDm: Tdm_ContextMenu;
  protected
    function IShellExtInit.Initialize = IShellExtInit_Initialize;
    function IShellExtInit_Initialize(_pidlFolder: PItemIDList; _lpdobj: IDataObject;
      _HKeyProgID: HKEY): HResult; stdcall;
    function QueryContextMenu(_Menu: HMENU; _indexMenu, _idCmdFirst, _idCmdLast,
      _UFlags: UINT): HResult; stdcall;
    function InvokeCommand(var _ici: TCMInvokeCommandInfo): HResult; stdcall;
    function GetCommandString(_idCmd, _uType: UINT; _pwReserved: PUINT;
      _PszName: LPSTR; _cchMax: UINT): HResult; stdcall;
  public
    procedure Initialize; override;
    destructor Destroy; override;
  end; 
```

这在 Delphi 2007 和 XE 中编译得很好，但 Delphi XE2 给了我错误：“[DCC Error] u_ContextMenuHandler.pas(16): E2291 Missing implementation of interface method IContextMenu.GetCommandString”

这让我很困惑。我检查了接口声明，我的 GetCommandString 函数与接口的声明完全相同。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:10:35.453

的正确声明`GetCommandString`是：

```
function GetCommandString(idCmd: UINT_PTR; uFlags: UINT; pwReserved: PUINT;
  pszName: LPSTR; cchMax: UINT): HResult; stdcall; 
```

确保在写信之前检查`GCS_UNICODE`in的存在。该测试确定您是否应该返回 Unicode 或 ANSI 字符串。[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776094%28v=vs.85%29.aspx)中描述了这种细微差别。`uFlags``pszName`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T16:16:26.140

在 XE2中声明了“_idCmd” `UINT_PTR`（针对 64 位时为 8 个字节）。

# ruby-on-rails - Rails - 演示者中的 Helper Singleton 和 Rails Route Helpers

> ID：10373639
> 
> 赞同：2
> 
> 时间：2012-04-29T16:07:27.610
> 
> 标签：ruby-on-rails, ruby-on-rails-3, singleton, presenter

在我的 Presenter 类中尝试使用路由助手时，我似乎无法弄清楚为什么会出现 500 错误

在 /apps/presenters/base_presenter.rb /apps/presenters/object_presenter.rb 下有一个 Presenter 类

```
class BasePresenter

  def self.as_collection(collection)
    collection.collect{|object| self.new(object)}
  end

  def help
    Helper.instance
  end

  class Helper
    include Singleton
    include Rails.application.routes.url_helpers
    include ActionView::Helpers::TextHelper
    include ActionView::Helpers::TagHelper
    include ActionView::Helpers::UrlHelper
    include ApplicationHelper
    include UrlHelper
  end

end 
```

所以在我的对象演示器中，我为 as_json 执行以下操作。在我添加此网址之前，一切都有效。不知道为什么它不会访问 Rails 路线。

```
class ObjectPresenter < BasePresenter

  def initialize( object )
    @object = object
  end

  def as_json(*args)
    { 
        :url => blah_blah_url(@object, :subdomain => "www")
    }
  end

end 
```

任何帮助将不胜感激，因为我很难过:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T15:34:42.557

好的，我想通了。

```
class Presenter
  include Rails.application.routes.url_helpers

  def self.as_collection(collection)
    collection.collect{|object| self.new(object)}
  end

  def help
    Helper.instance
  end

  class Helper
    include Singleton
    include ActionView::Helpers::TextHelper
    include ActionView::Helpers::TagHelper
    include ActionView::Helpers::UrlHelper
    include ApplicationHelper
    include UrlHelper
  end

end 
```

然后在我的环境/development.rb

```
 Rails.application.routes.default_url_options = { :host => "lvh.me:3000" } # Fixes issue with Presenters not allowing Routes and Url Helper
  config.action_mailer.default_url_options = { :host => "lvh.me:3000" } 
```

和我的 UrlHelper

```
module UrlHelper

  def with_subdomain(subdomain)
    subdomain = (subdomain || "")
    subdomain += "." unless subdomain.empty?
    host = Rails.application.routes.default_url_options[:host]
    [subdomain, host].join
  end

  def url_for(options = nil)
    if options.kind_of?(Hash) && options.has_key?(:subdomain)
      options[:host] = with_subdomain(options.delete(:subdomain))
    end
    super
  end

end 
```

# jquery - 所有异步 Jquery/asp.net ajax 调用都被一个阻止

> ID：10373641
> 
> 赞同：0
> 
> 时间：2012-04-29T16:07:33.413
> 
> 标签：jquery, asp.net, ajax, web-services

我有一个 JQuery 应用程序，它对 4 个 asp.net Web 服务进行 4 次异步调用，每个服务都在一个单独的计时器上。

当我将 Thread.Sleep(10000) 命令添加到其中一个 Web 服务时，所有 Web 服务都需要 10 秒才能返回。

有没有办法避免这种情况？它与应用程序池的线程模型有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:23:45.527

您可能会遇到此处描述的问题：[http ://www.openajax.org/runtime/wiki/The_Two_HTTP_Connection_Limit_Issue](http://www.openajax.org/runtime/wiki/The_Two_HTTP_Connection_Limit_Issue)

如果是这种情况，您可能希望确保您只有一个长期连接。

# linux - apache RewriteRule 配置

> ID：10373644
> 
> 赞同：0
> 
> 时间：2012-04-29T16:08:16.613
> 
> 标签：linux, apache, mod-rewrite

我有一个域 mail.domain.com/webaccess

我可以使用以下命令强制执行 https

```
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule (.*) https://mail.domain.com/webaccess/ [R] 
```

如何删除别名 /webaccess ，这样用户就不必输入长网址，如果用户输入了 www ，我该如何删除。

注意：/webaccess 别名实际上指向我的文件系统中的 /opt/mailserver。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:59:16.350

对于 www 部分，您可以添加类似于以下内容的内容：

```
RewriteCond %{HTTP_HOST} ^www.domain.com$ [NC]
RewriteRule ^(.*)$ http://domain.com/$1 [R=301,L] 
```

对于第一个选项，如果用户键入 mail.domain.com，您希望他们直接转到[https://mail.domain.com/webaccess](https://mail.domain.com/webaccess)吗？

如果是这样，您可以按照以下规则做所有事情L

```
RedirectPermanent / https://mail.domain.com/webaccess 
```

# c# - 无论主机匹配密钥如何，ReCaptcha 都返回有效

> ID：10373648
> 
> 赞同：1
> 
> 时间：2012-04-29T16:08:52.227
> 
> 标签：c#, asp.net, asp.net-mvc-2, recaptcha

我希望有人能治愈我的无知。我之前遇到过以下问题，我似乎无法理解为什么会这样。

我正在开发一个项目，该项目有两个在不同地址下运行的 Web 前端，它们本质上指向同一个 ASP.Net MVC2 项目下的不同目录，它们具有不同的母版页。

现在我创建了 3 组密钥对，一组用于*localhost*，一组用于*site1*，一组用于*site2*，认为 ReCaptcha 只会告诉我挑战是好的，如果它来自具有匹配密钥的适当主机（如果我正确回答ofc。）。

现实情况是，无论我设置了哪些键，无论是 localhost 还是其他，响应总是积极的。

请注意，我只是在我的小型家用 PC 上尝试过这个作为测试项目，所以我不知道一旦部署到生产环境，情况是否会有所不同。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:05:30.660

我认为您不需要为每个网站使用单独的密钥。我在 localhost 和我的实时站点上使用相同的密钥，并且没有遇到任何问题。

我建议只使用一组密钥，然后尝试在一个网站上启动并运行它。它*确实*有效，我已经使用它大约2年了。

未能向我们展示您的代码:)

# python - 将 Pandas GroupBy 输出从 Series 转换为 DataFrame

> ID：10373660
> 
> 赞同：610
> 
> 时间：2012-04-29T16:10:35.413
> 
> 标签：python, pandas, dataframe, pandas-groupby, multi-index

我从这样的输入数据开始

```
df1 = pandas.DataFrame( { 
    "Name" : ["Alice", "Bob", "Mallory", "Mallory", "Bob" , "Mallory"] , 
    "City" : ["Seattle", "Seattle", "Portland", "Seattle", "Seattle", "Portland"] } ) 
```

打印时显示如下：

```
 City     Name
0   Seattle    Alice
1   Seattle      Bob
2  Portland  Mallory
3   Seattle  Mallory
4   Seattle      Bob
5  Portland  Mallory 
```

分组很简单：

```
g1 = df1.groupby( [ "Name", "City"] ).count() 
```

和打印产生一个`GroupBy`对象：

```
 City  Name
Name    City
Alice   Seattle      1     1
Bob     Seattle      2     2
Mallory Portland     2     2
        Seattle      1     1 
```

但我最终想要的是另一个包含 GroupBy 对象中所有行的 DataFrame 对象。换句话说，我想得到以下结果：

```
 City  Name
Name    City
Alice   Seattle      1     1
Bob     Seattle      2     2
Mallory Portland     2     2
Mallory Seattle      1     1 
```

我不太明白如何在 pandas 文档中完成此操作。欢迎任何提示。

* * *

## 回答 #1

> 赞同：637
> 
> 时间：2012-04-29T17:50:33.950

`g1`这*是*一个数据框。不过，它有一个分层索引：

```
In [19]: type(g1)
Out[19]: pandas.core.frame.DataFrame

In [20]: g1.index
Out[20]: 
MultiIndex([('Alice', 'Seattle'), ('Bob', 'Seattle'), ('Mallory', 'Portland'),
       ('Mallory', 'Seattle')], dtype=object) 
```

也许你想要这样的东西？

```
In [21]: g1.add_suffix('_Count').reset_index()
Out[21]: 
      Name      City  City_Count  Name_Count
0    Alice   Seattle           1           1
1      Bob   Seattle           2           2
2  Mallory  Portland           2           2
3  Mallory   Seattle           1           1 
```

或类似的东西：

```
In [36]: DataFrame({'count' : df1.groupby( [ "Name", "City"] ).size()}).reset_index()
Out[36]: 
      Name      City  count
0    Alice   Seattle      1
1      Bob   Seattle      2
2  Mallory  Portland      2
3  Mallory   Seattle      1 
```

* * *

## 回答 #2

> 赞同：164
> 
> 时间：2015-08-31T08:48:05.397

我想稍微改变一下 Wes 给出的答案，因为 0.16.2 版本需要`as_index=False`. 如果你不设置它，你会得到一个空的数据框。

[来源](http://pandas.pydata.org/pandas-docs/stable/groupby.html#aggregation)：

> 如果聚合函数被命名为列，聚合函数将不会返回您正在聚合的组，when`as_index=True`是默认值。分组列将是返回对象的索引。
> 
> 如果它们是命名列，则传递`as_index=False`将返回您正在聚合的组。
> 
> 聚合函数是减少返回对象维度的函数，例如：`mean`, `sum`, `size`, `count`, `std`, `var`, `sem`, `describe`, `first`, `last`, `nth`, `min`, `max`. 例如，当您执行此操作`DataFrame.sum()`并返回一个`Series`.
> 
> nth 可以充当减速器或过滤器，请参见[此处](http://pandas.pydata.org/pandas-docs/stable/groupby.html#groupby-nth)。

```
import pandas as pd

df1 = pd.DataFrame({"Name":["Alice", "Bob", "Mallory", "Mallory", "Bob" , "Mallory"],
                    "City":["Seattle","Seattle","Portland","Seattle","Seattle","Portland"]})
print df1
#
#       City     Name
#0   Seattle    Alice
#1   Seattle      Bob
#2  Portland  Mallory
#3   Seattle  Mallory
#4   Seattle      Bob
#5  Portland  Mallory
#
g1 = df1.groupby(["Name", "City"], as_index=False).count()
print g1
#
#                  City  Name
#Name    City
#Alice   Seattle      1     1
#Bob     Seattle      2     2
#Mallory Portland     2     2
#        Seattle      1     1
# 
```

编辑：

在版本`0.17.1`和更高版本中，您可以使用`subset`in[`count`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.GroupBy.count.html)和[`reset_index`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.reset_index.html)with 参数`name`in [`size`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.GroupBy.size.html)：

```
print df1.groupby(["Name", "City"], as_index=False ).count()
#IndexError: list index out of range

print df1.groupby(["Name", "City"]).count()
#Empty DataFrame
#Columns: []
#Index: [(Alice, Seattle), (Bob, Seattle), (Mallory, Portland), (Mallory, Seattle)]

print df1.groupby(["Name", "City"])[['Name','City']].count()
#                  Name  City
#Name    City                
#Alice   Seattle      1     1
#Bob     Seattle      2     2
#Mallory Portland     2     2
#        Seattle      1     1

print df1.groupby(["Name", "City"]).size().reset_index(name='count')
#      Name      City  count
#0    Alice   Seattle      1
#1      Bob   Seattle      2
#2  Mallory  Portland      2
#3  Mallory   Seattle      1 
```

`count`和之间的区别在于`size`计算`size`NaN 值，`count`而不计算。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2019-03-27T18:36:18.397

关键是使用[reset_index()](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.reset_index.html)方法。

采用：

```
import pandas

df1 = pandas.DataFrame( { 
    "Name" : ["Alice", "Bob", "Mallory", "Mallory", "Bob" , "Mallory"] , 
    "City" : ["Seattle", "Seattle", "Portland", "Seattle", "Seattle", "Portland"] } )

g1 = df1.groupby( [ "Name", "City"] ).count().reset_index() 
```

现在您在*g1*中有新的数据框：

[![结果数据框](../Images/b9ece97023525b5d610b5c22b3529c81.png)](https://i.stack.imgur.com/RoYBM.png)

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2016-04-30T09:16:35.110

简单地说，这应该完成任务：

```
import pandas as pd

grouped_df = df1.groupby( [ "Name", "City"] )

pd.DataFrame(grouped_df.size().reset_index(name = "Group_Count")) 
```

在这里，`grouped_df.size()`提取唯一的 groupby 计数，`reset_index()`方法重置您想要的列的名称。最后，`Dataframe()`调用 pandas 函数来创建一个 DataFrame 对象。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-03-31T19:45:37.097

也许我误解了这个问题，但如果你想将 groupby 转换回数据框，你可以使用 .to_frame()。我想在执行此操作时重置索引，所以我也包含了该部分。

与问题无关的示例代码

```
df = df['TIME'].groupby(df['Name']).min()
df = df.to_frame()
df = df.reset_index(level=['Name',"TIME"]) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-04-28T22:56:42.587

我发现这对我有用。

```
import numpy as np
import pandas as pd

df1 = pd.DataFrame({ 
    "Name" : ["Alice", "Bob", "Mallory", "Mallory", "Bob" , "Mallory"] , 
    "City" : ["Seattle", "Seattle", "Portland", "Seattle", "Seattle", "Portland"]})

df1['City_count'] = 1
df1['Name_count'] = 1

df1.groupby(['Name', 'City'], as_index=False).count() 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-08-28T07:28:17.750

以下解决方案可能更简单：

```
df1.reset_index().groupby( [ "Name", "City"],as_index=False ).count() 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-12-18T10:02:53.437

我已经汇总了数量明智的数据并存储到数据框

```
almo_grp_data = pd.DataFrame({'Qty_cnt' :
almo_slt_models_data.groupby( ['orderDate','Item','State Abv']
          )['Qty'].sum()}).reset_index() 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-07-13T16:56:41.617

这些解决方案仅对我部分有效，因为我正在进行多次聚合。这是我想要转换为数据框的分组示例输出：

[![分组输出](../Images/34208b60ac87a45790841cef0294f4ce.png)](https://i.stack.imgur.com/AFVpr.png)

因为我想要的不仅仅是 reset_index() 提供的计数，所以我编写了一个手动方法来将上面的图像转换为数据帧。我知道这不是最 Pythonic/pandas 的方式，因为它非常冗长和明确，但这就是我所需要的。基本上，使用上面解释的 reset_index() 方法启动一个“脚手架”数据帧，然后循环分组数据帧中的组配对，检索索引，对未分组的数据帧执行计算，并在新的聚合数据帧中设置值.

```
df_grouped = df[['Salary Basis', 'Job Title', 'Hourly Rate', 'Male Count', 'Female Count']]
df_grouped = df_grouped.groupby(['Salary Basis', 'Job Title'], as_index=False)

# Grouped gives us the indices we want for each grouping
# We cannot convert a groupedby object back to a dataframe, so we need to do it manually
# Create a new dataframe to work against
df_aggregated = df_grouped.size().to_frame('Total Count').reset_index()
df_aggregated['Male Count'] = 0
df_aggregated['Female Count'] = 0
df_aggregated['Job Rate'] = 0

def manualAggregations(indices_array):
    temp_df = df.iloc[indices_array]
    return {
        'Male Count': temp_df['Male Count'].sum(),
        'Female Count': temp_df['Female Count'].sum(),
        'Job Rate': temp_df['Hourly Rate'].max()
    }

for name, group in df_grouped:
    ix = df_grouped.indices[name]
    calcDict = manualAggregations(ix)

    for key in calcDict:
        #Salary Basis, Job Title
        columns = list(name)
        df_aggregated.loc[(df_aggregated['Salary Basis'] == columns[0]) & 
                          (df_aggregated['Job Title'] == columns[1]), key] = calcDict[key] 
```

如果字典不是您的东西，则可以在 for 循环中内联应用计算：

```
 df_aggregated['Male Count'].loc[(df_aggregated['Salary Basis'] == columns[0]) & 
                                (df_aggregated['Job Title'] == columns[1])] = df['Male Count'].iloc[ix].sum() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-02T20:53:11.360

```
 grouped=df.groupby(['Team','Year'])['W'].count().reset_index()

 team_wins_df=pd.DataFrame(grouped)
 team_wins_df=team_wins_df.rename({'W':'Wins'},axis=1)
 team_wins_df['Wins']=team_wins_df['Wins'].astype(np.int32)
 team_wins_df.reset_index()
 print(team_wins_df) 
```

# android - OpenGL ES 1.0 渐变纹理的奇怪行为

> ID：10373668
> 
> 赞同：0
> 
> 时间：2012-04-29T16:11:22.913
> 
> 标签：android, opengl-es, textures, gradient

我目前在 OpgenGL ES 1.0 游戏的菜单中遇到了一些奇怪的行为。

最初加载应用程序时，菜单看起来很好，如图 1 所示。当我开始游戏并稍后返回菜单时，它看起来如图 2 所示。然后使用主页按钮最小化应用程序并重新进入应用程序菜单再次如图 1 所示。请注意，唯一的区别是在图 2 中。渐变以某种方式呈阶梯状，而在图 1 中。它们是平滑的。什么可能导致这个问题？

很难注意到，但请仔细查看按钮！

**图 1**平滑渐变 ![图1](../Images/64e504ec7f0c0644c6b6e3fc159e84f3.png)

**图 2**阶梯式渐变 ![图 2](../Images/c2eb21a865ac048138ff5e49fa6dcd06.png)

# excel - 将输出存储在临时工作表中以进行排序

> ID：10373682
> 
> 赞同：2
> 
> 时间：2012-04-29T16:14:08.267
> 
> 标签：excel, vba

继这个问题之后，[Defining a range from values in another range](https://stackoverflow.com/questions/10322726/defining-a-range-from-values-in-another-range)，（感谢 Siddharth！）我想编辑代码以按天数最多到最短的顺序列出任务。与 Siddharth 进行了简短的评论聊天，他建议最好的方法是创建一个包含数据的临时表，按到达的数据对其进行排序并创建消息框，然后再删除临时表。任何想法从哪里开始？我可以将 msg 字符串导出到新工作表还是需要是其他变量才能存储在工作表中

```
Option Explicit

Sub Notify()
    Dim WS1 As Worksheet
    Dim Chk As Range, FltrdRange As Range, aCell As Range
    Dim ChkLRow As Long
    Dim msg As String
On Error GoTo WhatWentWrong

Application.ScreenUpdating = False

Set WS1 = Sheets("Ongoing")

With WS1
    ChkLRow = .Range("C" & Rows.Count).End(xlUp).Row

    '~~> Set your relevant range here
    Set Chk = .Range("A1:K" & ChkLRow)

    '~~> Remove any filters
    ActiveSheet.AutoFilterMode = False

    With Chk
        '~~> Filter,
        .AutoFilter Field:=3, Criteria1:="NO"
        '~~> Offset(to exclude headers)
        Set FltrdRange = .Offset(1, 0).SpecialCells(xlCellTypeVisible)
        '~~> Remove any filters
        ActiveSheet.AutoFilterMode = False

        For Each aCell In FltrdRange
            If aCell.Column = 8 And _
            Len(Trim(.Range("B" & aCell.Row).Value)) <> 0 And _
            Len(Trim(aCell.Value)) <> 0 Then
                msg = msg & vbNewLine & _
                      "Request for contractor code " & .Range("B" & aCell.Row).Value & _
                      " dispensing month " & .Range("A" & aCell.Row).Value & _
                      " has been in the cupboard for " & _
                      DateDiff("d", aCell.Value, Date) & " days."
            End If
        Next
    End With
End With

'~~> Show message
MsgBox msg
Reenter:
Application.ScreenUpdating = True
Exit Sub
WhatWentWrong:
MsgBox Err.Description
Resume Reenter
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T18:51:04.363

这是你正在尝试的吗？

```
Option Explicit

Sub Notify()
    Dim WS1 As Worksheet, TmpSht As Worksheet
    Dim Chk As Range, FltrdRange As Range, aCell As Range
    Dim ChkLRow As Long, TSLastRow As Long, i As Long
    Dim msg As String

    On Error Resume Next
    Application.DisplayAlerts = False
    Sheets("Alistair_Weir").Delete
    Application.DisplayAlerts = True
    On Error GoTo 0

    On Error GoTo WhatWentWrong

    Application.ScreenUpdating = False

    Set WS1 = Sheets("Ongoing")

    With WS1
        ChkLRow = .Range("C" & Rows.Count).End(xlUp).Row

        '~~> Set your relevant range here
        Set Chk = .Range("A1:K" & ChkLRow)

        '~~> Remove any filters
        ActiveSheet.AutoFilterMode = False

        With Chk
            '~~> Filter,
            .AutoFilter Field:=3, Criteria1:="NO"
            '~~> Offset(to exclude headers)
            Set FltrdRange = .Offset(1, 0).SpecialCells(xlCellTypeVisible)
            '~~> Remove any filters
            ActiveSheet.AutoFilterMode = False

            '~~> Add Temp Sheet
            Set TmpSht = Sheets.Add
            ActiveSheet.Name = "Alistair_Weir"

            '~~> Copy required rows to temp sheet
            TSLastRow = 1
            For Each aCell In FltrdRange
                If aCell.Column = 8 And _
                Len(Trim(.Range("B" & aCell.Row).Value)) <> 0 And _
                Len(Trim(aCell.Value)) <> 0 Then
                    WS1.Rows(aCell.Row).Copy TmpSht.Rows(TSLastRow)
                    TSLastRow = TSLastRow + 1
                End If
            Next
        End With
    End With

    With TmpSht
        '~~> Sort Data
        .Columns("A:H").Sort Key1:=.Range("H1"), Order1:=xlAscending, Header:=xlGuess, _
        OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
        DataOption1:=xlSortNormal

        '~~> Create the message
        For i = 1 To TSLastRow - 1

            msg = msg & vbNewLine & _
                  "Request for contractor code " & .Range("B" & i).Value & _
                  " dispensing month " & .Range("A" & i).Value & _
                  " has been in the cupboard for " & _
                  DateDiff("d", .Range("H" & i).Value, Date) & " days."
        Next

        '~~> Delete the temp sheet
        Application.DisplayAlerts = False
        .Delete
        Application.DisplayAlerts = True
    End With

    '~~> Show message
    MsgBox msg
Reenter:
    Application.ScreenUpdating = True
    Exit Sub
WhatWentWrong:
    MsgBox Err.Description
    Resume Reenter
End Sub 
```

# javascript - 在javascript中调用clearInterval后如何恢复setInterval？

> ID：10373683
> 
> 赞同：0
> 
> 时间：2012-04-29T16:14:26.890
> 
> 标签：javascript, setinterval, anonymous-methods

我有这段代码可以正常工作，但如果用户在说 5 次迭代后不活动（没有鼠标移动）而不是处于连续循环中，我想停止轮询和 clearInterval。

```
var i, active = new Date, iter = 1;

$(window).on('mousemove', function(e){
active = new Date;          
});

i = setInterval(function(){
    if(new Date().getTime() - active.getTime() < 1000){
     console.log("sending active event to server.....");
             iter = 1;  
    else{
      iter++;
        if(iter >= 5){
           clearInterval(i);
        }
     }          
}, 2000); 
```

现在它在这个例子中每两秒检查一次。我想检查活动日期说 5 次，如果它连续 5 次迭代过期，请调用 clearInterval(i)... 所以 mousemove 回调中的某些内容应该仅在当前未运行时重新初始化 setInterval。我怎样才能做到这一点？感谢您提供任何提示和示例。如果可能的话，我想继续使用匿名函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:31:45.507

分离区间函数

```
function intFunc(){
    if(new Date().getTime() - active.getTime() < 1000){
     console.log("sending active event to server.....");
             iter = 1;  
    else{
      iter++;
        if(iter >= 5){
           clearInterval(i);
        }
     }          
}; 
```

现在，在你需要的两个地方打电话给他们

```
var i;
$(window).on('mousemove', function(e){
  active = new Date;          
  i = setInterval(intFunc, 2000);

});
i = setInterval(intFunc, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:03:01.703

一种简单的方法是删除 clearInterval 调用，而仅在`iter < 5`.

但这仍然有点浪费，因为当它无事可做时仍会调用处理程序，这在您希望笔记本电脑/手机保持省电模式时很糟糕。所以我要做的基本上就是你所拥有的，但是在调用 clearInterval 之后，设置一个一次性的 mousemove 处理程序来重新启动轮询。

我没有看到不命名函数的方法（我假设你不想进入 Y 组合器等），但你可以隐藏它的名字 - 以及其他 - 从外部世界通过在整个事情周围使用匿名函数：

```
(function () {
    var i, active = new Date, iter = 1;

    $(window).on('mousemove', function(e) {
        active = new Date;
    });

    function startPolling() {
        i = setInterval(function() {
            if (new Date().getTime() - active.getTime() < 1000) {
                console.log("sending active event to server.....");
                iter = 1;
            }
            else{
                iter++;
                if (iter >= 5) {
                    clearInterval(i);
                    $(window).one('mousemove', function () {
                        startPolling();
                    });
                }
            }
        }, 2000);
    }

    startPolling();
})(); 
```

# c++ - 检查传递给可变参数模板的类型

> ID：10373692
> 
> 赞同：1
> 
> 时间：2012-04-29T16:15:38.277
> 
> 标签：c++, c++11, variadic-templates

我想实现这样的目标：

```
template<class... Args>
class MyClass{
  public:
    MyClass(){
      for(auto arg : {sizeof(Args)...})
        std::cout<<arg<<std::endl;
    }
}; 
```

但有一个简单的例外。char* 类型应返回 0（或其他所有内容，与 int 不同）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:49:12.043

下面的呢？

```
/* heavily borrowed from IBM's variadic template page */
#include <iostream>
using namespace std;

/*
template<typename T> struct type_size{
    operator int(){return sizeof( T );}
};

template<> struct type_size <char *>{
    operator int(){return 0;}
};
*/
/* as per Mattieu M.'s suggestion */
template<typename T> constexpr size_t type_size(T dummy) {
return sizeof dummy;
}

constexpr size_t type_size(char *){
    return 0;
} 
template <typename...I> struct container{
    container(){
    int array[sizeof...(I)]={type_size<I>()...};
    printf("container<");
    for(int count = 0; count<sizeof...(I); count++){
        if(count>0){
            printf(",");
        }
        printf("%d", array[count]);
    }
    printf(">\n");
    }
};

int main(void){
   container<int, short, char *> g;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:44:34.677

```
template<typename T>
std::size_t size()
{
    return sizeof(T);
}

template<>
std::size_t size<char*>()
{
    return 0;
}

template<class... Args>
class MyClass{
public:
    MyClass()
    {
        std::initializer_list<char> { (std::cout << size<Args>(), void(), char {})... };
    }
}; 
```

虽然实际上我有一个`EXPAND`隐藏`std::initializer_list`丑陋的宏（更不用说`void()`+ 逗号运算符技巧），所以它看起来像`EXPAND( std::cout << size<Args>() )`.

# javascript - 在画布中绘制线条，但最后的线条已褪色

> ID：10373695
> 
> 赞同：4
> 
> 时间：2012-04-29T16:16:00.197
> 
> 标签：javascript, html, canvas

我正在尝试在黑色背景上绘制白线网格。

在我重新绘制它们之前，底部的 3 条水平线似乎已经褪色，我无法弄清楚为什么会发生这种情况。有没有人见过这个和/或知道我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T07:29:00.623

这是因为线是在它们所覆盖的所有像素上绘制的（在画布上定位是浮动的）。当你想在画布上用 JavaScript 绘制精确的垂直或水平线时，你最好将它们放在半个整数中。

见插图：第一条水平线是用y位置1绘制的。这条线模糊而宽。第二条水平线以 4.5 的 y 位置绘制。它薄而精确。

![在此处输入图像描述](../Images/deb803122da991107393adc6e746ed33.png)

例如，在您的代码中，通过将您的水平线循环更改为：

```
 // Horizontal lines
                for (var i = 1; i < objCanvas.height / intGridWidth; i++)
                {
                    objContext.strokeStyle = "white";
                    var y = Math.floor(i*intGridWidth)+0.5
                    objContext.moveTo(0, y);
                    objContext.lineTo(objCanvas.width, y);
                    objContext.stroke();
                } 
```

这是一个用非常细而干净的线条展示它的小提琴：

[http://jsfiddle.net/dystroy/7NJ6w/](http://jsfiddle.net/dystroy/7NJ6w/)

一条线在所有像素上绘制的事实意味着绘制一条宽度正好为一个像素的水平线的唯一方法是瞄准中间。我通常在基于画布的应用程序中使用这种实用程序功能：

```
function drawThinHorizontalLine(c, x1, x2, y) {
    c.lineWidth = 1;
    var adaptedY = Math.floor(y)+0.5;
    c.beginPath();
    c.moveTo(x1, adaptedY);
    c.lineTo(x2, adaptedY);
    c.stroke();
} 
```

当然你最好也为垂直线做一个好看的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:23:15.167

对我来说它看起来并没有褪色。也许这与您的操作系统或 PC 有关，无法正确渲染绘图。我在 Win 7 上使用 Chrome 20。测试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T16:37:34.180

你必须这样定义`objContext.lineWidth`：

```
objContext.lineWidth = 2; 
```

我不确定为什么最后一行会褪色。见[http://jsfiddle.net/jSCCY/](http://jsfiddle.net/jSCCY/)

# drupal - 如何在 privatemsg 模块中自定义自动完成 TO 字段 - drupal 6

> ID：10373697
> 
> 赞同：0
> 
> 时间：2012-04-29T16:16:04.157
> 
> 标签：drupal, drupal-6

使用 privatemessage 模块，用户可以像在 facebook 中一样互相发送消息。该页面显示一个带有 TO 字段、主题和消息的表单。默认情况下，TO 字段是一个自动完成字段。在搜索用户名时，它会显示一个仅包含名称的下拉列表。我如何自定义它以在下拉列表中显示用户的个人资料图片？？？我不知道去哪里进行代码更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T18:35:38.323

在 Drupal StackExchange 上，您可能会有更好的运气，Privatemsg 的共同维护者非常活跃。（我想他已经一年没有在这里发帖了。）

# python - 语法错误：来自 Python + Scrapy 的 SQL INSERT？

> ID：10373698
> 
> 赞同：3
> 
> 时间：2012-04-29T16:16:07.853
> 
> 标签：python, mysql, insert, sql-update, scrapy

在 Python 2.6.4 + Scrapy 工具包中创建 web-scraper。需要做数据分析，也是我的第一个Python学习项目。在我的 pipeline.py 中创建 SQL INSERT 语句时遇到问题。真正的查询有大约 30 个要插入的属性。

首先，有没有更好的方法来编写这个 UPDATE 或 INSERT 算法？对改进持开放态度。

其次，这里有两种不同的语法变体以及它们产生的不同错误。我已经根据示例尝试了很多变体，但找不到使用“INSERT SET”跨越多行的示例。什么是正确的语法？

DB 是空的，所以我们现在总是分支到“INSERT”块。

```
def _conditional_insert(self, tx, item):
 # create record if doesn't exist.
 tx.execute("SELECT username  FROM profiles_flat WHERE username = %s", (item['username'][0], ))
 result = tx.fetchone()

 if result:
    # do row UPDATE
     tx.execute( \
        """UPDATE profiles_flat SET
        username=`%s`, 
        headline=`%s`,
        age=`%s`
        WHERE username=`%s`""", (  \
        item['username'],
        item['headline'],
        item['age'],)
        item['username'],)
     )         
 else: 
   # do row INSERT
   tx.execute( \
   """INSERT INTO profiles_flat SET
        username=`%s`, 
        headline=`%s`,
        age=`%s` """, ( \
        item['username'],
        item['headline'],
        item['age'], )   # line 222
   ) 
```

错误：

```
[Failure instance: Traceback: <class '_mysql_exceptions.OperationalError'>: (1054, "Unknown column ''missLovely92 '' in 'field list'")
  /usr/lib/python2.6/threading.py:497:__bootstrap
  /usr/lib/python2.6/threading.py:525:__bootstrap_inner
  /usr/lib/python2.6/threading.py:477:run
  --- <exception caught here> ---
  /usr/lib/python2.6/vendor-packages/twisted/python/threadpool.py:210:_worker
  /usr/lib/python2.6/vendor-packages/twisted/python/context.py:59:callWithContext
  /usr/lib/python2.6/vendor-packages/twisted/python/context.py:37:callWithContext
  /usr/lib/python2.6/vendor-packages/twisted/enterprise/adbapi.py:429:_runInteraction
  /export/home/raven/scrapy/project/project/pipelines.py:222:_conditional_insert
  /usr/lib/python2.6/vendor-packages/MySQLdb/cursors.py:166:execute
  /usr/lib/python2.6/vendor-packages/MySQLdb/connections.py:35:defaulterrorhandler
  ] 
```

替代语法：

```
 query = """INSERT INTO profiles_flat SET
        username=`%s`, 
        headline=`%s`,
        age=`%s` """ % \
   item['username'], # line 196
   item['headline'],
   item['age']

   tx.execute(query) 
```

错误：

```
 [Failure instance: Traceback: <type 'exceptions.TypeError'>: not enough arguments for format string
  /usr/lib/python2.6/threading.py:497:__bootstrap
  /usr/lib/python2.6/threading.py:525:__bootstrap_inner
  /usr/lib/python2.6/threading.py:477:run
  --- <exception caught here> ---
  /usr/lib/python2.6/vendor-packages/twisted/python/threadpool.py:210:_worker
  /usr/lib/python2.6/vendor-packages/twisted/python/context.py:59:callWithContext
  /usr/lib/python2.6/vendor-packages/twisted/python/context.py:37:callWithContext
  /usr/lib/python2.6/vendor-packages/twisted/enterprise/adbapi.py:429:_runInteraction
  /export/home/raven/scrapy/project/project/pipelines.py:196:_conditional_insert
  ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:21:32.693

你不应该用反引号包围值。反引号用于引用列名。

```
INSERT INTO profiles_flat (username, headline, age)
VALUES (%s, %s, %s) 
```

# java - 为什么构图要遵循开闭原则？

> ID：10373699
> 
> 赞同：2
> 
> 时间：2012-04-29T16:16:16.060
> 
> 标签：java

为什么构图要遵循“开放扩展，接近修改”的原则？

我理解：如果您想在类中添加功能，您只需编写新代码并使用组合来获取该代码。
但是你只是修改你有组合的代码吗？因为您将组合添加到该代码中，所以您修改了该代码。

例子：

之前，是这样的：

```
public class Example{
public void Walk(){
    //walking
}
} 
```

之后：

```
public class Example{

    RunClass r = new RunClass(); // I add this

public void Walk(){
    //walking
}

public void Run(){ // I also add this
    r.run();        
}
} 
```

所以这意味着我修改了这个类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T18:20:19.493

> 您需要先查看定义。
> 组合只是一个“有”的关系，而继承是一个“是”的关系。开放封闭原则是关于在不改变类的源代码的情况下改变行为。他们自己并不能确保OCP。
> 设计模式通过组合或/和继承遵循这一原则。例如，策略设计模式使用组合在运行时改变行为，而模板方法模式使用继承在编译时改变行为。因此，组合允许在运行时进行扩展，因此继承允许在编译时进行扩展。如果您希望您的类被密封（不能被子类化），唯一可用的选项是组合。
> 除非您的设计是松散耦合的，否则 OCP 并不能通过组合来确保。请记住，组合只是一种“具有”关系，它只是说您的类有一个对象的实例，但是如果您必须修改代码以更改该实例，则不遵循 OCP。但是，如果您使用控制反转 (IoC)，则该组合会变得松散耦合，因此您不必更改类中的代码。这是一个例子：

不遵循 OCP 的作文

```
 public class Bike {
    Wheel wheel = new LargeWheel();

    public void go(){
      wheel.go();
  } 
```

遵循 OCP 的组合（通过 IoC）

```
 public class Bike {
    Wheel wheel;

    public setWheel(Wheel wheel){
      this.wheel = wheel;
    }

    public void go(){
      wheel.go();
  } 
```

在第一种情况下，如果您想要不同类型的轮子，则需要修改代码，但在第二种情况下，您“注入”所需的轮子实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T16:19:48.430

您没有以 OCP 方式使用合成。

这将遵循 OCP：

```
public class Example2{

    Example e = new Example(); 
    RunClass r = new RunClass();

    public void Walk(){
        e.Walk()
    }

    public void Run(){ 
        r.run();        
    }
} 
```

另一种方法是`Example2`继承`Example`：

```
public class Example2 extends Example{

    RunClass r = new RunClass();

    public void Run(){ 
        r.run();        
    }
} 
```

`Example`不会改变，但会组合成`Example2`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T17:18:46.043

当你将它应用到一个你没有源代码的类时，open-close 的要点很清楚，它只是作为依赖项出现在 JAR 中。该类已完全**关闭**以进行修改-您只能按原样使用它。*开放*部分意味着该类的设计方式应使您作为其使用者能够扩展其行为以满足您的需求。组合是使用该类并添加您自己的行为的一种方式。

# jquery - jQuery：插入 ajax 东西的钩子？听众？

> ID：10373700
> 
> 赞同：1
> 
> 时间：2012-04-29T16:16:16.417
> 
> 标签：jquery, ajax, hook

我正在开发一个 Web 应用程序的前端，该应用程序执行大量 ajax 内容（例如加载评论等）……所有 ajax 内容都是通过 jQuery 函数完成的。

我想知道是否有任何方法可以监听那些插入事件？每当我网站上的一些 ajax 请求被触发（并完成）时，我都想调用一个函数。有什么钩子或我可以用来实现这一目标的东西吗？而是将相同的函数调用应用于我的代码中所有已经存在的 ajax 函数？

感谢您的帮助/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:25:31.190

您可以将 AJAX 请求配置为使用您设置的默认值，如下所示：

```
$.ajaxSetup({
  complete: function(){} // Do something
}); 
```

这是在`success`我想你用来插入元素的函数之后调用的，并且适用于之后发出的每个 AJAX 请求。

# python - django - 删除图像文件

> ID：10373711
> 
> 赞同：0
> 
> 时间：2012-04-29T16:17:37.717
> 
> 标签：python, django, django-models

我正在使用 django 和 jquery 进行图像上传。首先我们使用上传器上传一张图片，图片存储在图片`tmpbg`字段中。然后，如果我们单击保存按钮，`tmpbg`则会将其移动到背景图像字段。这里我需要的是我想删除背景图像字段路径中的孤立图像文件。

这是代码

模型.py：

```
class BackgroundModel(models.Model):
    user = models.OneToOneField(User)
    background = models.ImageField(upload_to='backgrounds', null=True, blank=True)
    tmpbg = models.ImageField(upload_to='backgrounds', null=True, blank=True)

class BackgroundModelForm(ModelForm):
    class Meta:
        model = BackgroundModel
        exclude = ('user', 'background') 
```

Views.py（删除路径中图片文件的代码）：

```
try:
    bg = BackgroundModel.objects.get(user=request.user)
except BackgroundModel.DoesNotExist:
    pass
else:
    if bg.background != '':
        image_path = os.path.join(settings.MEDIA_ROOT, str(bg.background))
        try:
            os.unlink(image_path)
            bg.BackgroundModel.delete()
        except:
            pass

    bg.background = bg.tmpbg
return HttpResponse("") 
```

但孤立的图像文件不会被删除。我犯了什么错误？

更新：

这条线有问题

```
bg.background=bg.tmpbg 
```

当我在 shell 模式下检查时。它没有显示。

```
>>> g.background
<ImageFieldFile: None> 
```

但是tmpbg中有一个图片文件

```
>>> g.background
<ImageFieldFile: backgrounds/ijkl.jpg> 
```

那么，如何从一个图像域复制到另一个域？

image_path 之间的代码是正确的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:42:03.990

我会覆盖模型的删除方法并在那里添加文件删除。我会做类似的事情：

```
class BackgroundModel(models.Model):
    ...

    def delete(self, using=None):
        os.unlink(self.tmpbg.path)
        super(BackgroundModel,self).delete() 
```

我没有检查代码，但是这样的东西应该可以工作。告诉我是否不是。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:18:08.450

尝试一下`os.normpath`，这应该可以解决问题：

```
 image_path = os.path.normpath(
     os.path.join(settings.MEDIA_ROOT, str(bg.background))
 ) 
```

更新 ：

```
try:
    bg = BackgroundModel.objects.get(user=request.user)
except BackgroundModel.DoesNotExist:
    pass
else:
    if bg.background != '':
        image_path = os.path.join(settings.MEDIA_ROOT, str(bg.background))
        try:
            os.unlink(image_path)
        except:
            pass

    bg.background = bg.tmpbg
    bg.save()
 return HttpResponse("") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T19:53:58.797

试试这个：

```
try:
    bg = BackgroundModel.objects.get(user=request.user)
except BackgroundModel.DoesNotExist:
    pass
else:
    if bg.background:
        file_to_delete = bg.background.path
        bg.background = bg.tmpbg
        bg.save()
        try:
            os.unlink(file_to_delete)
        except:
            pass
return HttpResponse() 
```

另外，分配`ImageFileField`只`ImageFileField`复制文件路径，因此如果你这样做

```
g.background = g.tmpbg
g.save() 
```

`g.background`并将`g.tmpbg`指向同一个文件。一旦文件被删除`g.background`，`g.tmpbg`也将无法访问。如果你不想要这种行为，告诉 Django 保存到一个新文件：

```
from django.core.files.base import File
g.background = File(g.tmpbg)
g.save() 
```

# c# - 剪贴板监听器事件被调用两次

> ID：10373713
> 
> 赞同：5
> 
> 时间：2012-04-29T16:17:49.523
> 
> 标签：c#, clipboard

我想将更改保存在剪贴板中。所以我注册了我的应用程序以获取剪贴板发生的所有更改。

使用

```
 [DllImport("User32.dll")]
    protected static extern bool AddClipboardFormatListener(int hwnd); 
```

进而

```
protected override void WndProc(ref Message m)
    {
switch (m.Msg)
        {
            case WM_CLIPBOARDUPDATE:
                OnClipboardChanged();
                break;
             ...
        }
     }

private void OnClipboardChanged()
{
    if (Clipboard.ContainsText())
        {
         MessageBox.Show(Clipboard.GetText().ToString());
        }
} 
```

问题是：从 Visual Studio 或 firefox 等应用程序复制文本时，有时会调用 OnClipboardChanged() 函数两次或 3 次。

我认为那些应用程序会将数据以不同的格式写入剪贴板，这就是该函数被多次调用的原因。但是我将如何防止保存相同的数据，因为 OnClipboardChanged() 被多次调用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T21:40:26.173

因为他们多次打开/关闭剪贴板。我以前见过这样的疯狂。Excel 用于在复制图表时执行 24 种单独的操作。
而不是这个（伪代码）：

```
openClipboard
for each format {
  place data on clipboard(format)
}
closeClipboard 
```

他们可能正在这样做：

```
for each format {
  openClipboard
  place data on clipboard(format)
  closeClipboard
} 
```

更新：通常的缓解策略是避免对每次更新做出反应，并在合理的“稳定时间”过去后对最后一次更新做出反应，并且没有进一步的剪贴板通知。500 毫秒通常绰绰有余。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-13T00:49:27.777

**防止多次调用剪贴板**

```
private int _i = 0;
private int i
{
    get
    {
        async void setI()
        {
            await Task.Run(() =>
            {
                Thread.Sleep(20);
                i = 0;
            }
            );
        }
        setI();
        return _i;
    }
    set
    {
        _i = value;
    }
}
private IntPtr HwndHandler(IntPtr hwnd, int msg, IntPtr wparam, IntPtr lparam, ref bool handled)
{
    if (msg == WM_CLIPBOARDUPDATE)
    {
        if(i<1)
        {
            this.ClipboardUpdate?.Invoke(this, new EventArgs());
            i++;
        }
    }
    handled = false;
    return IntPtr.Zero;
} 
```

# class - Scala：忽略equals/hascode的案例类字段？

> ID：10373715
> 
> 赞同：40
> 
> 时间：2012-04-29T16:18:13.150
> 
> 标签：class, scala, pattern-matching

是否可以在案例类的equals/haschode方法中忽略案例类的字段？

我的用例是我有一个字段，它本质上是类中其余数据的元数据。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-04-29T16:48:21.947

只有第一个参数部分中的参数被考虑用于相等和散列。

```
scala> case class Foo(a: Int)(b: Int)
defined class Foo

scala> Foo(0)(0) == Foo(0)(1)
res0: Boolean = true

scala> Seq(0, 1).map(Foo(0)(_).hashCode)
res1: Seq[Int] = List(-1669410282, -1669410282) 
```

**更新**

公开`b`为一个字段：

```
scala> case class Foo(a: Int)(val b: Int)
defined class Foo

scala> Foo(0)(1).b
res3: Int = 1 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T16:45:06.907

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

case class Foo private(x: Int, y: Int) {
  def fieldToIgnore: Int = 0
}

object Foo {
  def apply(x: Int, y: Int, f: Int): Foo = new Foo(x, y) {
    override lazy val fieldToIgnore: Int = f
  }
}

// Exiting paste mode, now interpreting.

defined class Foo
defined module Foo

scala> val f1 = Foo(2, 3, 11)
f1: Foo = Foo(2,3)

scala> val f2 = Foo(2, 3, 5)
f2: Foo = Foo(2,3)

scala> f1 == f2
res45: Boolean = true

scala> f1.## == f2.##
res46: Boolean = true 
```

`.toString`如有必要，您可以覆盖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T17:00:06.367

您可以覆盖案例类中的 equals 和 hasCode 方法

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

case class Person( val name:String, val addr:String) {
  override def equals( arg:Any) = arg match {
    case Person(s, _) => s == name
    case _ => false
  }
  override def hashCode() = name.hashCode
}

// Exiting paste mode, now interpreting.

scala> Person("Andy", "") == Person("Andy", "XXX")
res2: Boolean = true

scala> Person("Andy", "") == Person("Bob", "XXX")
res3: Boolean = false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:45:54.023

如果您`toString`在基类中覆盖，则派生案例类不会覆盖它。这是一个例子：

```
sealed abstract class C {
  val x: Int
  override def equals(other: Any) = true
}

case class X(override val x: Int) extends C

case class Y(override val x: Int, y: Int) extends C 
```

比我们你测试的：

```
scala> X(3) == X(4)
res2: Boolean = true

scala> X(3) == X(3)
res3: Boolean = true

scala> X(3) == Y(2,5)
res4: Boolean = true 
```

# twitter-bootstrap - 同一页面上的两个 Bootstrap 手风琴

> ID：10373723
> 
> 赞同：16
> 
> 时间：2012-04-29T16:19:35.827
> 
> 标签：twitter-bootstrap, accordion

我正在使用 Boostrap 框架，但是手风琴有问题。当我尝试在同一页面上添加 2 个引导手风琴[http://twitter.github.com/bootstrap/javascript.html#collapse时，只有一个可以正常工作。](http://twitter.github.com/bootstrap/javascript.html#collapse)有人如何在同一页面上添加 2 个这些手风琴？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-29T21:46:50.863

您的第二个手风琴不起作用，因为您在`data-parent`和手风琴对象 ID（例如`id="collapseTwo"`）上引用了第一个手风琴，一旦您区分了两个手风琴并在第二个手风琴上设置了适当的`data-parent`属性，一切正常。

**修复了具有唯一 ID 和正确数据父引用的标记**

```
<h1>First Accordion</h1>
<div class="accordion" id="accordion2">
    <div class="accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
          Collapsible Group Item #1
        </a>
      </div>
      <div id="collapseOne" class="accordion-body in collapse" style="height: auto; ">
        <div class="accordion-inner">
          Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
        </div>
      </div>
    </div>
    <div class="accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
          Collapsible Group Item #2
        </a>
      </div>
      <div id="collapseTwo" class="accordion-body collapse" style="height: 0px; ">
        <div class="accordion-inner">
          Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
        </div>
      </div>
    </div>
    <div class="accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
          Collapsible Group Item #3
        </a>
      </div>
      <div id="collapseThree" class="accordion-body collapse" style="height: 0px; ">
        <div class="accordion-inner">
          Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
        </div>
      </div>
    </div>
</div>

<hr>

<h1>Second Accordion</h1>
<div class="accordion2" id="accordion3">
    <div class="accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapse4">
          Collapsible Group Item #1
        </a>
      </div>
      <div id="collapse4" class="accordion-body in collapse" style="height: auto; ">
        <div class="accordion-inner">
          Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
        </div>
      </div>
    </div>
    <div class="accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapse5">
          Collapsible Group Item #2
        </a>
      </div>
      <div id="collapse5" class="accordion-body collapse" style="height: 0px; ">
        <div class="accordion-inner">
          Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
        </div>
      </div>
    </div>
    <div class="accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion3" href="#collapse6">
          Collapsible Group Item #3
        </a>
      </div>
      <div id="collapse6" class="accordion-body collapse" style="height: 0px; ">
        <div class="accordion-inner">
          Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
        </div>
      </div>
    </div>
</div> 
```

演示：http: [//jsfiddle.net/STqCF/](http://jsfiddle.net/STqCF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-12T07:50:26.800

首先，你们所有人都必须记住，在 javascript 和 jquery 中，每个 id 都必须是唯一的，并且在一个页面中只使用一次。问题的唯一原因是您的 id 在页面中冲突。所以你必须纠正两件事，锚的数据父级和锚的href

给你的演示

```
<div class="accordion_one">
<!--starting accourdion one-->
<h2 class="adelfox_heading">Accourdion Style 1</h2>
    <div class="panel-group" id="accordion1">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion1" href="#1_collapseOne">
                <i class="fa fa-plus"></i><i class="fa fa-minus"></i>
              Our Solution
            </a>
          </h4>
        </div>
        <div id="1_collapseOne" class="panel-collapse collapse in">
          <div class="panel-body">
            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion1" href="#1_collapseTwo">
                <i class="fa fa-plus"></i><i class="fa fa-minus"></i>
                Our Technology
            </a>
          </h4>
        </div>
        <div id="1_collapseTwo" class="panel-collapse collapse">
          <div class="panel-body">
            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion1" href="#1_collapseThree">
                <i class="fa fa-plus"></i><i class="fa fa-minus"></i>
                Our Mission
            </a>
          </h4>
        </div>
        <div id="1_collapseThree" class="panel-collapse collapse">
          <div class="panel-body">
            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
          </div>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion1" href="#1_collapseFour">
                <i class="fa fa-plus"></i><i class="fa fa-minus"></i>
                Our Vision
            </a>
          </h4>
        </div>
        <div id="1_collapseFour" class="panel-collapse collapse">
          <div class="panel-body">
            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
          </div>
        </div>
      </div>

    </div>
<!--end of starting accourdion one-->
</div>

<div class="accordion_two">
<!--starting accourdion two-->
<h2 class="adelfox_heading">Accourdion Style 2</h2>
    <div class="panel-group" id="accordion2">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion2" href="#2_collapseOne">
                <i class="fa fa-plus"></i><i class="fa fa-minus"></i>
              Our Solution
            </a>
          </h4>
        </div>
        <div id="2_collapseOne" class="panel-collapse collapse in">
          <div class="panel-body">
            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion2" href="#2_collapseTwo">
                <i class="fa fa-plus"></i><i class="fa fa-minus"></i>
                Our Technology
            </a>
          </h4>
        </div>
        <div id="2_collapseTwo" class="panel-collapse collapse">
          <div class="panel-body">
            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion2" href="#2_collapseThree">
                <i class="fa fa-plus"></i><i class="fa fa-minus"></i>
                Our Mission
            </a>
          </h4>
        </div>
        <div id="2_collapseThree" class="panel-collapse collapse">
          <div class="panel-body">
            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
          </div>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion2" href="#2_collapseFour">
                <i class="fa fa-plus"></i><i class="fa fa-minus"></i>
                Our Vision
            </a>
          </h4>
        </div>
        <div id="2_collapseFour" class="panel-collapse collapse">
          <div class="panel-body">
            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
          </div>
        </div>
      </div>

    </div>
<!--end of starting accourdion two-->
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-13T17:55:39.113

更新**views-bootstrap-accordion-plugin-style.tpl.php**以获得唯一的 id：

```
<div id="views-bootstrap-accordion-<?php print $id ?>" class="<?php print $classes ?>">
  <?php foreach ($rows as $key => $row): ?>
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a class="accordion-toggle"
             data-toggle="collapse"
             data-parent="#views-bootstrap-accordion-<?php print $id ?>"
             href="#collapse<?php print $id . "-" . $key ?>">
            <?php print $titles[$key] ?>
          </a>
        </h4>
      </div>

      <div id="collapse<?php print $id . "-" . $key ?>" class="panel-collapse collapse">
        <div class="panel-body">
          <?php print $row ?>
        </div>
      </div>
    </div>
  <?php endforeach ?>
</div> 
```

# asp.net - 如何在 ASP.net MVC3 中使用 ADO.net (SqlConnection)

> ID：10373730
> 
> 赞同：0
> 
> 时间：2012-04-29T16:20:37.720
> 
> 标签：asp.net, asp.net-mvc-3

我是 MVC3 的新手，找不到`SqlConnection`与 MVC3 一起使用以连接到现有数据库的示例。我发现的所有示例，例如 MusicStore 和其他示例都使用 EF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:32:49.160

从您的轮廓调用到您的存储库模式对象，例如 ICustomerRepository。

您的存储库调用您的数据访问层，它返回一些数据传输对象（或一些选择域对象，即客户）然后您的视图模型从该对象填充。

有些人选择切掉传输对象并将域对象发送到视图而不是视图模型，但推荐的方法是视图模型。

您的 sqlconnection 代码进入您的数据访问层。不要将此代码填充到您的控制器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:28:36.950

通读本[教程](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)；它准确地向您展示了所有 ORM 的工作原理，因此您可以快速上手。

# android - 平移时如何防止谷歌地图移动？

> ID：10373736
> 
> 赞同：0
> 
> 时间：2012-04-29T16:21:29.617
> 
> 标签：android, google-maps

我正在尝试在 Android 上使用 Google Maps 实现 dram move 事件。在 onTouchEvent 内部，我想在 MotionEvent.ACTION_DOWN 被触发时冻结地图，以便用户可以开始从保存在 MotionEvent.ACTION_DOWN 的中心拖动手柄并使用 MotionEvent.ACTION_MOVE 来捕获移动点。最后，当 MotionEvent.ACTION_UP 被触发时，保存新位置并允许地图再次移动。

我正在尝试不同的选择，但还没有找到方法。任何打击都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:45:50.940

我最终在 MotionEvent.ACTION_MOVE 为当前正在拖动的叠加层设置了中心。

```
mapController.setCenter(selectedPoint.getPoint());//drag the handle here 
```

# linq - linq 从不同的列创建平均值

> ID：10373738
> 
> 赞同：0
> 
> 时间：2012-04-29T16:21:33.297
> 
> 标签：linq, entity-framework, entity-framework-4

我有一个有 5 列的简单表格

```
id
id_user
col1
col2
col3 
```

如何让 Linq 查询选择一个 id_user 并对所有 col1、col2、col3 整数求和以求出这 3 列的平均值？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:53:49.567

假设你已经有了你的桌子，应该这样做：

```
from row in table
let avgTotal = (new [] {row.col1, row.col2, row.col3}).Average()
select new {row.user_id, avgTotal} 
```

# android - 如何录制应用内声音并将其保存为 MP3

> ID：10373739
> 
> 赞同：0
> 
> 时间：2012-04-29T16:21:37.650
> 
> 标签：android, audio, mediarecorder

我正在制作一个可以发出不同声音的应用程序（取决于用户输入的内容），我需要它来录制这种声音并将其保存为 MP3。但我不知道如何，我知道如何使用手机麦克风录制声音：

```
recorder.setAudioSource(MediaRecorder.AudioSource.MIC); 
```

但我需要它来记录应用程序正在播放的声音，而不是其他任何东西。任何人都知道如何做到这一点？

# java - 在按钮单击/actionEvent 上创建类的新对象

> ID：10373747
> 
> 赞同：0
> 
> 时间：2012-04-29T16:22:57.710
> 
> 标签：java, swing, awt, jbutton

找到解决方案

决定简单地在 actionListener 之外创建一个名为 chairPrice 的方法更容易，该方法可以通过一个名为 getItemPrice() 的方法递增。这已用于计算物品的总价格和 100% 的作品

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:27:18.460

您需要使用该`Object.equals()`方法。

```
@Override
public void actionPerformed(ActionEvent buttonClick)
{
   if(buttonClick.getSource().equals(guiButtons[0])) //if user clicks on 'add chair'
   {
     Chair chair = new Chair();
   }
} 
```

***根据OP的评论进行编辑***

我不确定你想要什么。`myChair`不是你椅子的名字。它是变量的名称。它完全没有影响`Chair`。如果您想创建一个新`Chair`对象并将其用于整个班级，您将需要添加一个新的字段变量或创建一个`Chair`.

```
public class GuiClass extends JPanel implements ActionListener
{
  List<Chair> chairs = new ArrayList<Chair>(Arrays.asList(new Chair()));
  Desk myDesk = new Desk();
  Table myTable = new Table();

  @Override
  public void actionPerformed(ActionEvent buttonClick)
  {
     if(buttonClick.getSource().equals(guiButtons[0])) //if user clicks on 'add chair'
     {
       chairs.add(new Chair());
     }
  }
} 
```

# haskell - Haskell / Miranda：查找函数的类型

> ID：10373754
> 
> 赞同：8
> 
> 时间：2012-04-29T16:23:51.113
> 
> 标签：haskell, types, functional-programming, type-inference, miranda

**简介：** 这是来自 Miranda 考试的过去试题，但语法与 Haskell 非常相似。

**问题：** 以下表达式的类型是什么，它的作用是什么？（函数长度和交换的定义如下）。

```
(foldr (+) 0) . (foldr ((:) . length . (swap (:) [] )) [])

length [] = 0

length (x:xs) = 1 + length xs

swap f x y = f y x 
```

*笔记：*

请随时用 haskell 语法回复 - 很抱歉将星星用作多型，但我不想将其错误地翻译成 haskell。基本上，如果一个变量具有 * 类型，而另一个具有 * 则意味着它们可以是任何类型，但它们必须都是相同的类型。如果一个有**，则意味着它可以但不需要与*具有相同的类型。我认为它对应于haskell 用法中的a、b、c 等。

**我的工作至今**

从长度的定义你可以看到它找到了任何东西列表的长度，所以这给出了

```
length :: [*] -> num. 
```

从定义来看，我认为 swap 接受一个函数和两个参数，并产生交换了两个参数的函数，所以这给出了

```
swap :: (* -> ** -> ***) -> ** -> [*] -> *** 
```

foldr 接受一个二进制函数（如加号）一个起始值和列表，并使用该函数从右到左折叠列表。这给

```
foldr :: (* -> ** -> **) -> ** -> [*] -> **) 
```

我知道在函数组合中它是右关联的，因此例如第一个点 (.) 右侧的所有内容都需要生成一个列表，因为它将作为第一个 foldr 的参数给出。

foldr 函数输出单个值（折叠列表的结果），所以我知道返回类型将是某种多型而不是多型列表。

**我的问题**

我真的不确定从这里去哪里。我可以看到 swap 需要接受另一个参数，那么这个部分应用是否暗示整个事物是一个函数？我很困惑！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T17:57:43.087

你已经有了答案，我就一步步写下推导，方便一下子看出来：

```
xxf xs = foldr (+) 0 . foldr ((:) . length . flip (:) []) [] $ xs
       = sum         $ foldr ((:) . length . (: []))      []   xs
       = sum         $ foldr (\x -> (:) (length [x]))     []   xs
       = sum         $ foldr (\x r ->    length [x]:r)    []   xs
       = sum         $ map   (\x   ->    length [x]  )         xs
       = sum                            [length [x]  |    x <- xs]  
       = sum                            [ 1          |    x <- xs]
--     = length xs
xxf :: (Num n) => [a] -> n 
```

所以，在米兰达，`xxf xs = #xs`. 我猜它的类型是`:: [*] -> num`米兰达语法。

Haskell's `length`is `:: [a] -> Int`，但正如这里定义的那样，这是`:: (Num n) => [a] -> n`因为它使用`Num`'s`(+)`和两个文字，`0`and `1`。

如果您在可视化时遇到问题`foldr`，那很简单

```
foldr (+) 0 (a:(b:(c:(d:(e:(...:(z:[])...))))))
      =      a+(b+(c+(d+(e+(...+(z+ 0)...)))))
      = sum [a, b, c, d, e, ..., z] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-29T17:06:41.137

让我们一步一步来。

该`length`函数显然具有您描述的类型；在 Haskell 中是`Num n => [a] -> n`. 等效的 Haskell 函数是[`length`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:length)（它使用`Int`而不是 any `Num n`）。

该`swap`函数接受一个函数来调用并反转它的前两个参数。你没有得到完全正确的签名；它是`(a -> b -> c) -> b -> a -> c`。等效的 Haskell 函数是[`flip`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:flip).

该`foldr`函数具有您描述的类型；即`(a -> b -> b) -> b -> [a] -> b`. 等效的 Haskell 函数是[`foldr`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:foldr).

现在，让我们看看主表达式中的每个子表达式的含义。

表达式`swap (:) []`接受`(:)`函数并交换其参数。该`(:)`函数具有类型`a -> [a] -> [a]`，因此`swap`ping 它会产生`[a] -> a -> [a]`；整个表达式因此具有类型`a -> [a]`，因为交换函数应用于`[]`. 结果函数的作用是它构造一个给定项目的列表。

为简单起见，让我们将该部分提取到一个函数中：

```
singleton :: a -> [a]
singleton = swap (:) [] 
```

现在，下一个表达式是`(:) . length . singleton`。该`(:)`函数仍然有类型`a -> [a] -> [a]`；函数的`(.)`作用是它组合函数，所以如果你有一个 function`foo :: a -> ...`和一个 function `bar :: b -> a`，`foo . bar`就会有 type `b -> ...`。因此，表达式`(:) . length`具有类型`Num n => [a] -> [n] -> [n]`（请记住`length`返回 a `Num`），并且表达式`(:) . length . singleton`具有类型`Num => a -> [n] -> [n]`。结果表达式的作用有点奇怪：给定任何类型的值`a`和一些列表，它将忽略`a`并将数字`1`添加到该列表中。

为简单起见，让我们从中创建一个函数：

```
constPrependOne :: Num n => a -> [n] -> [n]
constPrependOne = (:) . length . singleton 
```

您应该已经熟悉`foldr`. 它使用函数对列表执行右折叠。在这种情况下，它会调用`constPrependOne`每个元素，因此表达式`foldr constPrependOne []`只是构造一个与输入列表长度相等的元素列表。所以让我们用它来做一个函数：

```
listOfOnesWithSameLength :: Num n => [a] -> [n]
listOfOnesWithSameLength = foldr constPrependOne [] 
```

如果你有一个清单`[2, 4, 7, 2, 5]`，你会`[1, 1, 1, 1, 1]`在申请时得到`listOfOnesWithSameLength`。

然后，该`foldr (+) 0`函数是另一个右折叠。相当于[`sum`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:sum)Haskell中的函数；它对列表的元素求和。

所以，让我们做一个函数：

```
sum :: Num n => [n] -> n
sum = foldr (+) 0 
```

如果您现在编写函数：

```
func = sum . listOfOnesWithSameLength 
```

...你得到结果表达式。给定一些列表，它会创建一个仅由 1 组成的等长列表，然后对该列表的元素求和。换句话说，它的行为与 完全一样`length`，只是使用了慢得多的算法。所以，最终的功能是：

```
inefficientLength :: Num n => [a] -> n
inefficientLength = sum . listOfOnesWithSameLength 
```

# vb.net - 更改 VB.net 表单中的像素颜色？

> ID：10373757
> 
> 赞同：3
> 
> 时间：2012-04-29T16:24:01.283
> 
> 标签：vb.net, colors, pixel

如何更改 VB.NET 表单中单个像素的颜色？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:16:44.027

Winforms 的一个硬性要求是您应该能够在 Windows 要求时重新绘制表单。当您最小化和恢复窗口时会发生这种情况。或者在旧版本的 Windows 上，当您在您的窗口上移动另一个窗口时。

所以仅仅在窗口上设置像素是不够的，当窗口重绘时你会失去它们。而是使用位图。另一个负担是您必须保持用户界面响应，因此您需要在工作线程上进行计算。BackgroundWorker 可以很方便地做到这一点。

一种方法是使用两个位图，一个用于填充工作器，另一个用于显示。例如，每一行像素都会复制工作中的位图并将其传递给 ReportProgress()。然后，您的 ProgressChanged 事件会处理旧位图并存储新传递的位图并调用 Invalidate 以强制重新绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:50:54.203

您可能会从这些资源中受益：[设置表单的背景颜色](https://stackoverflow.com/questions/3248612/vb-net-setting-background-color-of-a-form)

[DeveloperFusion论坛](http://www.developerfusion.com/thread/23944/how-do-i-find-the-color-of-a-pixel-in-vbnet/)，[提取像素颜色](http://vbcity.com/forums/t/47691.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T03:35:50.263

这是一些演示代码。由于汉斯提到的原因，重新粉刷很慢。一种加快速度的简单方法是仅在延迟后重新计算位图。

```
Public Class Form1

  Private Sub Form1_Paint(sender As Object, e As System.Windows.Forms.PaintEventArgs) Handles Me.Paint
    'create new bitmap

    If Me.ClientRectangle.Width <= 0 Then Exit Sub
    If Me.ClientRectangle.Height <= 0 Then Exit Sub

    Using bmpNew As New Bitmap(Me.ClientRectangle.Width, Me.ClientRectangle.Height, System.Drawing.Imaging.PixelFormat.Format32bppArgb)
      'draw some coloured pixels
      Using g As Graphics = Graphics.FromImage(bmpNew)
        For x As Integer = 0 To bmpNew.Width - 1
          For y As Integer = 0 To bmpNew.Height - 1
            Dim intR As Integer = CInt(255 * (x / (bmpNew.Width - 1)))
            Dim intG As Integer = CInt(255 * (y / (bmpNew.Height - 1)))
            Dim intB As Integer = CInt(255 * ((x + y) / (bmpNew.Width + bmpNew.Height - 2)))
            Using penNew As New Pen(Color.FromArgb(255, intR, intG, intB))
              'NOTE: when the form resizes, only the new section is painted, according to e.ClipRectangle.
              g.DrawRectangle(penNew, New Rectangle(New Point(x, y), New Size(1, 1)))
            End Using
          Next y
        Next x
      End Using
      e.Graphics.DrawImage(bmpNew, New Point(0, 0))
    End Using

  End Sub

  Private Sub Form1_ResizeEnd(sender As Object, e As System.EventArgs) Handles Me.ResizeEnd
    Me.Invalidate() 'NOTE: when form resizes, only the new section is painted, according to e.ClipRectangle in Form1_Paint(). We invalidate the whole form here to form an  entire form repaint, since we are calculating the colour of the pixel from the size of the form. Try commenting out this line to see the difference.
  End Sub

End Class 
```

# php - 验证错误消息淡出后标签消失

> ID：10373761
> 
> 赞同：1
> 
> 时间：2012-04-29T16:24:31.313
> 
> 标签：php, jquery, validation, fadeout

这里有个小问题。我有一个留言簿表格，每个输入都经过验证，因此它是空的，会出现一条错误消息。我已经调整了 jquery 部分，使错误消息延迟 2 秒，然后淡出，如下所示：

```
$(document).ready(function(){

var working = false;

$('#addCommentForm').submit(function(e){

    e.preventDefault();
    if(working) return false;

    working = true;
    $('#submit').val('Working..');
    $('.error').remove();

    $.post('submit.php',$(this).serialize(),function(msg){

        working = false;
        $('#submit').val('Submit');

        if(msg.status){

            $(msg.html).hide().insertAfter('#new').slideDown();
            $('#body').val('');
        }

        else {
            /* This is the section im stuck with */
            $.each(msg.errors,function(k,v){
                $('[for='+k+']').append('<div class="error">'+v+'</div>').delay(2000).fadeOut();
            });

        }

    },'json');

}); 
```

});

但是，在错误消息淡出后，标签也消失了。我感觉它与这部分代码有关：

```
'[for='+k+']' 
```

有什么办法可以解决这个问题，以便只有错误消息消失而不是标签？

如果您需要我提供更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:38:01.127

你是对的 ：

```
$('[for='+k+']').append('<div class="error">'+v+'</div>').delay(2000).fadeOut(); 
```

意味着您附加一个元素，等待并淡出任何选择了 [for=...] 的元素。

一个解决方案可能正在使用[`appendTo()`](http://api.jquery.com/appendTo/)

```
$('<div class="error">'+v+'</div>').appendTo('[for='+k+']').delay(2000).fadeOut(); 
```

# php - Zend 路由和 SEO

> ID：10373762
> 
> 赞同：1
> 
> 时间：2012-04-29T16:24:32.490
> 
> 标签：php, zend-framework, seo

我想知道我将如何去实现我的网站的 URL，比如`http://mysite.com/ArticleTitleHere`使用 zend 框架。

我看到它的方式是实现一个正则表达式路由，但是这样 zf 将无法从常规`module/controller/action`或`controller/action`路由中分辨出文章 URL。我将如何实施这样的事情？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:48:30.117

您可以在路线中使用占位符：

```
routes.test.route = "/:article"
routes.test.defaults.module = default
routes.test.defaults.controller = test
routes.test.defaults.action = test
routes.test.defaults.article = "" 
```

您可以使用 检索`article`控制器中的参数`$this->_getParam("article")`。其余的（通过文章名称匹配数据库条目）是您的部分。

但是您应该添加诸如 url-prefix 和/或文章 id 之类的内容，否则可能找不到其他路由。所以使用这样的东西要好得多：

```
routes.test.route = "/article/:id/:title"

routes.test.defaults.module = default
routes.test.defaults.controller = test
routes.test.defaults.action = test
routes.test.defaults.article = ""
routes.test.defaults.id = "" 
```

您可以通过这种方式使用 url-Viewhelper 来创建链接：

```
<a href="<?php echo $this->url(array("id" => $article->id, "title" => $article->title), "test"); ?>"><?php echo $this->escape($article->title); ?></a> 
```

并在您的控制器中进行重定向：

```
$this->_helper->redirector->gotoRoute(array("id" => $article->id, "title" => $article->title), "test"); 
```

请记住转义或过滤`$article->title`无效字符（或非 ascii 字符）。

# c++ - 迭代器值与转换后的反向迭代器值不同

> ID：10373764
> 
> 赞同：2
> 
> 时间：2012-04-29T16:24:45.420
> 
> 标签：c++, stl, iterator

我有以下代码：

```
int main()
{
    vector<int> v;

    for(int i = 0; i < 10; ++i)
        v.push_back(i);

    auto it = v.begin() + 3;

    cout << "Iterator: " << *it << endl;

    vector<int>::reverse_iterator revIt(it);

    cout << "Reverse iterator: " << *revIt << endl;

} 
```

运行此代码后，我得到以下输出：

```
Iterator: 3
Reverse iterator: 2 
```

有人可以解释为什么这两个值不同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T16:44:31.743

反向迭代器“对应”到具有`base`一个元素偏移量的迭代器，因为如何`rbegin()`并且`rend()`必须使用有效的基本迭代器（`end()`和`begin()`分别）来表示。例如，`rend()`不能用“指向”容器迭代器之前的`begin()`迭代器来表示，尽管它在逻辑上是这样表示的。所以`rend()`'基础迭代器'是`begin()`. 因此，`rbegin()`的基迭代器变为`end()`。反向迭代器在取消引用时会自动调整该偏移量（使用`*`or`->`运算符）。

[Scott Meyers](http://www.drdobbs.com/cpp/184401406)的一篇旧文章详细解释了这种关系以及一张漂亮的图片：

> **准则 3：了解如何使用 reverse_iterator 的基本迭代器**
> 
> 在 reverse_iterator 上调用基成员函数会产生“对应的”迭代器，但不清楚这意味着什么。例如，看一下这段代码，它将数字 1-5 放入向量中，将 reverse_iterator 设置为指向 3，并将迭代器设置为 reverse_iterator 的基数：
> 
> ```
> vector<int> v;
> 
> // put 1-5 in the vector
> for (int i = 1; i <= 5; ++i) {
>   v.push_back(i);
> }
> 
> // make ri point to the 3
> vector<int>::reverse_iterator ri =
>   find(v.rbegin(), v.rend(), 3);
> 
> // make i the same as ri's base
> vector<int>::iterator i(ri.base()); 
> ```
> 
> 执行此代码后，可以认为是这样的：
> 
> ![替代文字](../Images/ffadd7da053e5e41b3102bad2e5fb20f.png)
> 
> 这张图很好，显示了 reverse_iterator 的特征偏移量及其相应的基本迭代器，它模仿了 rbegin() 和 rend() 相对于 begin() 和 end() 的偏移量，但它并没有告诉你你需要的一切要知道。特别是，它没有解释如何使用 i 来执行您想在 ri 上执行的操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T16:28:17.350

看起来[文档](http://www.cplusplus.com/reference/std/iterator/reverse_iterator/)说他们这样做是为了处理过去的元素，即如果你反转一个过去的迭代器，新的反向迭代器指向最后一个元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T16:43:45.317

24.5.1 反向迭代器的第一段说：

> 类模板 reverse_iterator 是一个迭代器适配器，它从其底层迭代器定义的序列的末尾迭代到该序列的开头。反向迭代器与其对应的迭代器 i 之间的基本关系由恒等式建立：
> `&*(reverse_iterator(i)) == &*(i - 1)`。

返回的值`rend()`不能指向 before `begin()`，因为那是无效的。所以决定`rend()`应该包含的值`begin()`和所有其他反向迭代器进一步移动一个位置。对此`operator*`进行补偿并无论如何访问正确的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T16:52:07.000

反向迭代器看起来总是“前一个”然后是前向，因为它的范围移动了一个：

前向迭代器从 begin() （第一个元素）到 end() （过去最后一个：[begin-end) 在末尾打开）

反向迭代器根据定义从`rbegin() { return reverse_iterator(end()); }`to 开始`rend() { return reverse_iterator(begin()); }`，但也必须遍历开放范围 [rbegin-rend)，其中 rbegin 是最后一个（不是“过去最后一个”），并且是“在第一个之前”（不是“第一个” ) 因此要容纳 1 个差异。

# c# - 从 T4 类访问 Host 对象

> ID：10373766
> 
> 赞同：5
> 
> 时间：2012-04-29T16:24:56.760
> 
> 标签：c#, visual-studio-2010, t4, host-object

当我尝试从 <#+#> 括号中声明的非静态方法访问 Host 对象时，一切正常。但我需要从类方法访问它，如下所示：

```
<#+
public class ProjectTraverser
{
    public void Traverse()
    {
        var a = Host;
    }
}
#> 
```

执行此模板时出现以下错误：*“编译转换：无法通过嵌套类型“Microsoft.VisualStudio.TextTemplating7D03DF372FEAC3D3A28C011A41F02403.GeneratedTextTransformation.ProjectTraverser”访问外部类型“Microsoft.VisualStudio.TextTemplating7D03DF372FEAC3D3A28C011A41F02403.GeneratedTextTransformation”的非静态成员项目\测试解决方案\GettingStarted\TelerikMvc3RazorApplication\TextTemplate2.tt"*

请分享任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T00:28:01.107

正如 FuleSnabel 评论的那样，您所做的声明是针对嵌套类型的，它无法访问表示模板的封闭类型中的实例变量。

您要做的是将 ITextTemplatingEngineHost 类型的 Host 属性添加到 ProjectTraverser 类（可能是静态的），然后从主模板中设置它。

回想起来，我希望我将主 Host 属性设为静态，因为在同一个 AppDomain 中为同一个模板的不同实例想象多个主机是不明智的，但你可以生活和学习。

这是一个粗略的例子：

```
<#@ template hostspecific="true' #>
<#
    ProjectTraverser.Host = Host;
#>
<#+ 
public class ProjectTraverser 
{
    public static ITextTemplatingEngineHost Host { get; set; }

    public void Traverse() 
    { 
        var a = Host; 
    } 
} 
#> 
```

# firefox - 你使用 Opera 的 Tab Stacking 还是 Firefox 的 Tab Panarama

> ID：10373769
> 
> 赞同：0
> 
> 时间：2012-04-29T16:25:12.983
> 
> 标签：firefox, tabs, opera

最近我安装了 Firefox 13 Beta（http://www.mozilla.org/en-US/firefox/all-beta.html）。它具有新功能，新标签页，如谷歌浏览器。这是我想要的，我在等待。它显示了我最近访问的页面。

在启动 Firefox 4 时，我对 Tab Panorama 感到惊讶。我曾经对此感到兴奋。但现在，我不使用它。Opera Tab Stacking 也是一个非常有趣的功能。但是我现在也不用了。

我想知道它们的用法。它们是否具有其他功能无法提供的独特价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:19:09.937

我不使用 Opera，但 Firefox 中的 Tab Panorama 主要用于将标签组织成组。用户可以有不同的标签组用于工作、学习、娱乐……这样标签栏就不会充满许多对当前任务来说不是必需的标签。

有时您不想关闭所有选项卡，只想将它们保存一会儿。所以标签组也可以用作临时的“书签文件夹”。

另一个好处是 Firefox 仅在启动时预加载当前选定组中的选项卡，因此启动时间也更好。但是，Firefox 13 具有“按需选项卡”，因此这可能不再那么重要了。

如果您没有打开几十个标签，基本上就不需要它。这只是人们组织标签的另一种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T23:04:12.060

当我使用上网本并且打开了几十个标签时，Opera 中的标签堆叠对我很有用。否则，小屏幕会使我的标签变小。

# php - preg_replace 返回错误的换行符？

> ID：10373770
> 
> 赞同：2
> 
> 时间：2012-04-29T16:25:15.090
> 
> 标签：php, preg-replace, line-breaks

文本区域中的 preg_replace 出现问题。"$" 或 "m" 修饰符在这里不能正常工作：

```
<?php

$text = '1 - 2 - 3
a - b - c
foo - bar - baz';

$text_replaced = preg_replace('/^(.*) - (.*) - (.*)$/m', '$1 - $2 "$3"', $text); 

echo '
​&lt;textarea rows=20 cols=20>
'.$text_replaced.'
</textarea>​​​​​​​​
'; 
```

应该返回

```
1 - 2 "3"
a - b "c"
foo - bar "baz" 
```

但它返回

```
1 - 2 "3
"
a - b "c
"
foo - bar "baz" 
```

如何解决？

自己试试：[http ://codepad.viper-7.com/LqgDHg](http://codepad.viper-7.com/LqgDHg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:34:06.787

默认情况下`.`匹配除`\n`(LF) 之外的所有内容。但是，您使用 Windows 样式`\r\n`(CRLF) 换行符。因此`\r`被包含在匹配中。

你可能想要的是这样的：

```
preg_replace('/(*ANYCRLF)^(.*) - (.*) - (.*)$/m', '$1 - $2 "$3"', $text); 
```

`(*ANYCRLF)`修饰符将含义更改为接受`.`除`\r`和之外的所有字符`\n`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:33:51.030

```
$text_replaced = preg_replace('/^(.*) - (.*) - (.*)[' . PHP_EOL . ']$/m', '$1 - $2 "$3"', $text); 
```

# jquery - 无法为 .replaceWith 方法获取正确的选择器

> ID：10373771
> 
> 赞同：0
> 
> 时间：2012-04-29T16:25:22.610
> 
> 标签：jquery, radio-button, replacewith

这段代码有一些问题，我想替换一段 html 代码，该代码在从单选按钮选项中选择一个选项时定义背景是什么。我似乎无法正确选择选择器。

```
<html>
<head>
    <title>Javascript</title>
    <link rel="stylesheet" type="text/css" href="stylesheet.css" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
    <script type="text/javascript">

        $(document).ready(function(){
            $('#getValue').click(function(){
                var input = $('input[name=choice]:checked').val();
                });
            if(input = 1)
            {
                $('#background').replaceWith('<img src="image source 1" alt="Background should be displayed here">');
            }
            if(input = 2)
            {
                $('#background').replaceWith('<img src="image source 2" alt="Background should be displayed here">');
            }
            if(input = 3)
            {
                $('#background').replaceWith('<img src="image source 3" alt="Background should be displayed here">');
            }
        });
    </script>
</head>

<body id="body">

<div id="background">
        <img src="image source 1" alt="Background should be displayed here">
</div>

<div id="footer">
        <input type="radio" name="choice" value="1" />Scheme A
        <input type="radio" name="choice" value="2" />Scheme B
        <input type="radio" name="choice" value="3" />Scheme C
        <input type="button" id="getValue" value="SELECT SCHEME"/>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:26:32.300

选择图片：

```
$('#background img').replaceWith(' ... '); 
```

无需替换元素，只需更新其属性：

```
$('#background img').attr({
    'src': 'image source X',
    'alt': 'Background should be displayed here'
}); 
```

# c# - 使用 LINQ 和 EF 获取相关对象

> ID：10373777
> 
> 赞同：0
> 
> 时间：2012-04-29T16:25:48.717
> 
> 标签：c#, linq, entity-framework

我有两个通过外键关系链接的对象，我使用 DataModel 来映射对象：

事件：1--------*：资产

我写了一个查询来获取给定 [eventPublicId] 的所有资产

```
List<Asset> assetList =
    ReliableExecution.RetryWithExpression<Event, List<Asset>>
    (u => u.FirstOrDefault(x => x.PublicId == eventPublicId).Assets.ToList()).ToList(); 
```

我的问题是我不得不调用 ToList() 两次，这看起来很尴尬。我还必须使用 FirstOrDefault，但是当我尝试使用 [Where] 或其他任何东西时，它没有编译。

还有其他更好的方法可以重写此代码吗？

这是 RetryWithExpression 签名供参考：

```
public static TValue RetryWithExpression<T, TValue>(Func<ObjectSet<T>, TValue> func, Int32 retryInfiniteLoopGuard = 0)
         where T : class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:45:00.477

您指定`func`参数应返回 a `List<Asset>`，因此导航属性`event.Assets`不符合要求：它是 an `EntityCollection<Asset>`，*不能隐式转换为委托返回类型*。*显式*转换`ToList()`创建指定的类型。

从技术上讲，要摆脱 ToList，您应该使用

```
ReliableExecution.RetryWithExpression<Event, EntityCollection<Asset>> ... 
```

但我不知道这是否符合您的功能要求。

# html - 如果元素没有定义，它们会依赖任何默认值吗？(HTML/CSS)

> ID：10373778
> 
> 赞同：0
> 
> 时间：2012-04-29T16:25:51.050
> 
> 标签：html, css

例如，

如果我指定

```
margin-top: 8px;
margin-left:3em;
margin-right: 10em; 
```

有什么价值`margin-bottom`？

我以为它是 0 ，但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:28:10.720

它回退到适用于文档的所有样式表，包括由浏览器供应商提供的内置样式表（[用户代理样式表](http://www.w3.org/TR/CSS21/cascade.html#cascade)）（其值会因元素和浏览器而异）。

该规范包括[一个默认 HTML 4 样式表的示例](http://www.w3.org/TR/CSS21/sample.html)。开源浏览器通常会在某处公开其默认样式表。例如，请参阅[WebKit html 样式表](http://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T16:30:00.987

绝对取决于元素、浏览器以及用户是否定义了用户代理样式表。这就是为什么一个像样的[重置样式表](http://yuilibrary.com/yui/docs/cssreset/)是 Web 开发的必要条件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-29T16:29:38.990

这是每个元素特定于浏览器的，这就是为什么大多数开发人员使用[css 重置](https://stackoverflow.com/questions/116754/best-css-reset)样式表在所有浏览器上设置一个通用值。

# java - 将 Java 1.5 重写为 1.4

> ID：10373782
> 
> 赞同：1
> 
> 时间：2012-04-29T16:26:27.603
> 
> 标签：java, types, parameterized

我需要将Java 1.5项目重写为Java 1.4（有些工具不能吞下1.5，所以需要重写）。

我应该如何更改这些片段，以在 1.4 下编译它们？有没有工具呢？

```
private FooList<Bar> list = new FooList<Bar>(...);

public List<Bar> function(Baz baz) {...}

public Iterator<Bar> iterator() {...} 
```

编辑：我需要重写源代码，.jar 与我的项目无关。我提到编译是为了表示重写必须是正确的并且编译器可以接受。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:28:26.403

我会使用一个工具将 Java 5.0 类转换为 Java 1.4 [http://retroweaver.sourceforge.net/](http://retroweaver.sourceforge.net/)

但是要回答您的问题，您可以尝试

[https://stackoverflow.com/questions/603828/java-5-to-java-1-4-source-code-backporting-tool](https://stackoverflow.com/questions/603828/java-5-to-java-1-4-source-code-backporting-tool)

[https://stackoverflow.com/questions/547872/converting-java-1-5-source-into-1-1-source](https://stackoverflow.com/questions/547872/converting-java-1-5-source-into-1-1-source)

另一种选择是升级您的系统。Java 6 即将 EOL，而 Java 1.4 已经有十年历史了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T16:34:32.720

使用工具到转换器工具，如[Declawer](https://sites.google.com/site/glazedlists/Home/declawer)，但基本上它所做的是通过 Java 1.5 源代码的目录运行并输出 Java 1.4 等效源代码。它不支持所有 1.5 功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T16:30:35.453

Java 1.4 不支持泛型，所以它会像这样结束

```
public List function(Baz baz) {...} 
```

当然，当你从列表中获取一个对象时，你会得到一个对象，所以

```
Bar bar = function(null).get(0) 
```

将不起作用（您需要显式转换才能将 Object 分配给 Bar）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T16:31:11.537

去掉声明中的类型。对于返回这些类型的对象的任何方法，将强制转换添加到您剥离的类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T16:32:57.387

如果您“只是”需要 1.4 二进制文件，您可以使用 RetroWeaver - [http://retroweaver.sourceforge.net/](http://retroweaver.sourceforge.net/) - 来转换 jar。我在一些针对 Java 1.4 的项目中使用过它，并且发现它运行良好。

# sql - oracle 表创建

> ID：10373785
> 
> 赞同：-5
> 
> 时间：2012-04-29T16:27:33.957
> 
> 标签：sql, oracle, oracle10g, oracle11g

以下代码给了我`ERROR at line 3: ORA-00907: missing right parenthesis`：

```
CREATE TABLE ORGANISATION(
    ORG_REF VARCHAR(5),
    POSTCODE VARCHAR(10) FOREIGN KEY,
    TELEPHONE NUMBER FOREIGN KEY, 
    DESCRIPTION VARCHAR(30),
 AGENCY_ID VARCHAR(5)); 
```

第 3 行代码非常烦人，因为查看该行没有拼写错误，而且一切都在正确的位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T16:33:20.787

这不是你定义外键的方式。外键必须知道如何找到它的伙伴。

在这里阅读：[http ://www.techonthenet.com/oracle/foreign_keys/foreign_keys.php](http://www.techonthenet.com/oracle/foreign_keys/foreign_keys.php)

外键定义是这样的：

```
CREATE TABLE ORGANISATION(
  ORG_REF VARCHAR(5),
  POSTCODE VARCHAR(10), --THIS WILL BE FOREIGN KEY
  TELEPHONE NUMBER,     --2nd FOREIGN KEY
  DESCRIPTION VARCHAR(30),
  AGENCY_ID VARCHAR(5),
     FOREIGN KEY FK_POSTCODE
     REFERENCES other_table (post_code),
     FOREIGN KEY FK_TELEPHONE
     REFERENCES other_table2 (phone)
); 
```

**更新：**

*   附加推荐阅读： http: [//mattgemmell.com/2008/12/08/what-have-you-tried/](http://mattgemmell.com/2008/12/08/what-have-you-tried/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T16:53:56.697

从哪儿开始？

1.  你应该使用`varchar2`not `varchar`。虽然它们目前是相同的，[但不能保证](https://dba.stackexchange.com/questions/1301/what-is-the-difference-between-oracle-varchar-and-oracle-varchar2)[未来的行为`varchar`](https://dba.stackexchange.com/questions/1301/what-is-the-difference-between-oracle-varchar-and-oracle-varchar2)
2.  电话号码作为数字字段？很多电话号码都以 0 开头。你正在失去这个。如果你想很好地显示它，你必须在退出时做一些时髦的字符串操作。
3.  如果您的 ID 是数字，那么您应该将它们存储为数字。
4.  很少有表不应该[有主键](https://stackoverflow.com/questions/840162/should-each-and-every-table-have-a-primary-key)的情况。

外键旨在强制数据库中的[参照完整性](http://docs.oracle.com/cd/E11882_01/server.112/e25789/datainte.htm#CHDIIGBG)。因此，此模式中至少应该有一个或两个以上的表。

一个典型的情况可能是这样的，它假设相同的`postcode,phone`组合存在于`agency`.

```
CREATE TABLE ORGANISATION(
    ORG_REF VARCHAR2(5),
    POSTCODE VARCHAR2(10) ,
    TELEPHONE VARCHAR2(50), 
    DESCRIPTION VARCHAR(30),
    AGENCY_ID VARCHAR(5),
    CONSTRAINT PK_ORGANISATION PRIMARY KEY ( org_ref ),
    CONSTRAINT FX_ORGANISATION FOREIGN KEY
       REFERENCES SOME_OTHER_TABLE(POSTCODE,PHONE)
   ); 
```

如果它只是一列而不是 2，则可以内联引用它，如下所示：

```
create table organisation (
     org_ref number(16) not null
   , phone varchar2(5) not null constraint fk_organisation
        references agency ( phone )
   , constraint pk_organisation primary key ( org_ref )
   ); 
```

但是，我非常怀疑这是否可行。外键*必须*引用唯一约束。因此，根据您的评论判断，您必须有一个`agency`具有唯一约束或主键的表`phone, postcode`。

我怀疑您的数据模型有缺陷；听起来好像组织继承自`agency`.

如果您当前正在查看表格，我将删除and`phone`并进行连接以获取该信息：`postcode``agency``agency`

```
select a.*, o.postcode, o.phone
  from agency a
  join organisation o
    on a.agency_id = o.agency_id
 where a.id = 12345 
```

### 进一步阅读：

*   [例子](http://www.techonthenet.com/oracle/foreign_keys/foreign_keys.php)
*   [文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25518/adfns_constraints.htm#ADFNS00611)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:01:13.373

```
CREATE TABLE ORGANISATION(
    ORG_REF VARCHAR(5),
    POSTCODE VARCHAR(10),
    TELEPHONE NUMBER, 
    DESCRIPTION VARCHAR(30),
    AGENCY_ID VARCHAR(5),
    constraint pcodefk foreign key(POSTCODE) references postalcodetable(POSTALCODE),
    constraint telefk  foreign key(TELEPHONE) references telephonenumbers(TELEPHONE)); 
```

# c++ - 如何解决“未解决的包含： " 在 Eclipse CDT 的 C++ 文件中？

> ID：10373788
> 
> 赞同：74
> 
> 时间：2012-04-29T16:28:04.683
> 
> 标签：c++, eclipse, iostream

我下载[了 c++ 的 eclipse](http://www.eclipse.org/cdt/downloads.php) (cdt-master-8.0.2.zip)。

当我写：

```
#include <iostream> 
```

它标志着：

```
Unresolved inclusion: <iostream> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2014-01-30T23:46:52.827

1.  单击**项目 → 属性**。
2.  展开**C/C++ 常规**。
3.  单击**预处理器包括路径、宏等。**
4.  单击**提供程序**选项卡。
5.  检查**CDT GCC 内置编译器设置**。
6.  选中**使用项目之间共享的全局提供程序**。 [![预处理器属性](../Images/2183b77ed4c71086d9d997ccd35e2c66.png)](https://i.stack.imgur.com/PmfYg.png)
7.  单击**应用并关闭**。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-14T19:21:52.707

我使用 Eclipse 进行交叉编译，我必须为一些标准 C++ 库添加显式目录。右键单击您的项目并选择属性。您将看到图像中显示的对话框。按照图像并使用 + 图标显式添加 C++ 库的路径。![在此处输入图像描述](../Images/454d92175cd3945822beb96a07381691.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-15T16:30:08.880

确保您的文件扩展名为 .cpp 而不是 .c，我刚刚遇到了这个问题

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-12-03T13:32:11.790

我尝试了所有前面提到的答案，但在我的情况下，我必须手动指定 iostream 文件的包含路径。当我使用 MinGW 时，路径是：

C:\MinGW\lib\gcc\mingw32\4.8.1\include\c++

您可以在 Eclipse 中添加路径：Project > C/C++ General > Paths and Symbols > Includes > Add。我希望这会有所帮助

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-29T16:35:15.640

安装 gcc。

如果您使用的是 linux，请使用包管理器。

如果您在 Windows 上，请使用[MinGW](http://www.mingw.org/)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-08-03T13:33:14.263

就我而言，它不是*CDT GCC Built-in Compiler Settings*。只有在我包含*CDT GCC 内置编译器设置 Cygwin*之后，解析器才识别出我的`#include <iostream>`.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-05T15:09:33.460

听起来你以前没有使用过这个 IDE。阅读 Eclipse 的“Before You Begin”页面并按照 T 的说明进行操作。这将确保 Eclipse，它只是一个 IDE，实际上链接到一个编译器。

[http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.cdt.doc.user/concepts/cdt_c_before_you_begin.htm](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.cdt.doc.user/concepts/cdt_c_before_you_begin.htm)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-05T15:56:43.217

对于那些使用全新安装的 Ubuntu 或其他 Linux 发行版的用户，请确保在尝试编译 Eclipse CDT 项目之前至少拥有“build-essential”包。

在终端输入：

```
sudo apt-get install build-essential 
```

它应该足以编译和运行您的应用程序。

当然，您也可以执行完整的 g++ 安装，使用：

```
sudo apt-get install g++ 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-12-02T06:35:51.037

我将 Eclipse 与 Cygwin 一起使用，这对我有用：

转到 Project > Properties > C/C++ General > Preprocessor Includes... > Providers 并选择“CDT GCC Built-in Compiler Settings Cygwin [Shared]”。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-09-02T09:34:37.830

我在 Windows 中使用 cygwin 运行 eclipse。

Project > Properties > C/C++ General > Preprocessor Includes... > Providers 并在提供程序列表中选择“CDT GCC Built-in Compiler settings Cygwin”为我解决了问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-06-29T10:19:42.787

**在 Linux 上也设置`${COMMAND}`为`g++`**

在下面：

*   项目
*   特性
*   C/C++ 通用
*   预处理器包括路径、宏等。
*   提供者
*   CDT GCC 内置编译器设置
*   获取编译器规格的命令

代替：

```
${COMMAND} ${FLAGS} -E -P -v -dD "${INPUTS}" 
```

和：

```
g++ -std=c++11 -E -P -v -dD "${INPUTS}" 
```

如果您不这样做，Eclipse 标准输出将显示：

```
Unable to find full path for "-E" 
```

和显示下的日志`${HOME}/eclipse-workspace/.metadata/.log`：

```
!ENTRY org.eclipse.cdt.core 4 0 2020-04-23 20:17:07.288
!MESSAGE Error: Cannot run program "-E": Unknown reason 
```

因为`${COMMAND} ${FLAGS}`是空的，所以 Eclipse 尝试执行`-E`下一个。

我想知道我们是否可以在设置中正确定义`COMMAND`and`FLAGS`变量，但我尝试将它们添加为构建变量，但它不起作用。

问题的 C 版本：[Eclipse CDT 用于 C 标准库标头的“未解决的包含”错误](https://stackoverflow.com/questions/9337757/unresolved-inclusion-error-with-eclipse-cdt-for-c-standard-library-headers)

在 Eclipse 2020-03 (4.15.0)、Ubuntu 19.10 和这个[具有现有源代码的最小 Makefile 项目上进行了](https://github.com/cirosantilli/hello-cpp/tree/0fbc72291034456435dff1c3523cf0a69dba5a70)测试。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-02-26T12:20:44.467

在 Windows 上，使用 Eclipse CDT Oxygen，这里描述的解决方案都不适合我。我在另一个问题中描述了对我有用的方法：[Eclipse CDT：未解决的 stl header 包含](https://stackoverflow.com/a/48988315/1180868)。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-19T18:14:10.413

我在 Eclipse 2019-12 中遇到了这个问题，其中包含的内容以前已解决，但后来没有解决。这是使用 Meson 构建的 C/C++ 项目。我不确定到底发生了什么，但关闭项目并重新打开它为我解决了这个问题。

# tomcat - 如何让 Apache Tomcat 从“www.myapp.com”而不是“www.myapp.com/myapp”为我的网页提供服务？

> ID：10373799
> 
> 赞同：2
> 
> 时间：2012-04-29T16:29:04.743
> 
> 标签：tomcat, servlets, iis-7, tomcat7

抱歉，如果不解释整个情况，我想不出一个更具描述性的标题。

我将 IIS7 与 Tomcat7 一起使用。我使用 GWT 创建了一个 Web 应用程序，将其打包成一个 war 文件并将其部署在 Tomcat 上。
输入我的网站 url，比如“www.myapp.com”，我会看到 Tomcat 默认页面。我怀疑这是因为 %TOMCAT_HOME%/webapps/ROOT 目录中的内容。我可以通过“www.myapp.com/myapp”访问我的网络应用程序，并且我期望的所有功能都在那里。

如何配置 Tomcat 以便可以通过“www.myapp.com”而不是“www.myapp.com/myapp”访问我的 webapp？

我尝试通过为我的 webapp 添加一个新的“主机”标签来在 %TOMCAT_HOME%/conf 中配置 server.xml：

```
 <Host name="myapp.com" debug="0" appBase="webapps/myapp" unpackWARs="true">
              <Alias>www.myapp.com</Alias>
              <Context path="" docBase="." debug="0" reloadable="true"/> 
        </Host> 
```

从上面添加主机标签，输入“www.myapp.com”现在直接将我带到我的 Web 应用程序。问题是，当我在应用程序中调用 servlet（我正在使用 GWT RPC）时，我得到了错误：

> com.google.gwt.user.client.rpc.StatusCodeException：404
> 
> 服务器错误 404 - 找不到文件或目录。
> 
> 您要查找的资源可能已被删除、名称已更改或暂时不可用。

我不知道为什么我会收到这个错误，之前在没有添加“主机”标签的情况下输入“www.myapp.com/myapp”时效果很好。

我是 Tomcat 的新手，不知道如何解决这个问题。任何帮助将不胜感激。谢谢

编辑：

a) server.xml 中的主机部分（我的默认主机为 www.myapp.com）：

```
<Host name="localhost"  appBase="C:/Tomcat 7.0/webapps" unpackWARs="true" autoDeploy="true"></Host>

<Host name="www.myapp.com" appBase="C:/Tomcat 7.0/myapp" unpackWARs="true" autoDeploy="true">       </Host> 
```

b）workers.properties（我尝试将此处的主机更改为 www.myapp.com 无济于事）：

```
worker.list=worker1
worker.worker1.port=8009
worker.worker1.host=localhost
worker.worker1.type=ajp13 
```

c) uriworkermap.properties：

```
/*=worker1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:13:27.647

你有两个选择。

1.  将您的 WAR 重命名为 ROOT.war。

2.  将您的 WAR 移到 Tomcat 的 appBase 之外，然后添加一个新文件 $CATALINA_BASE/Catalina/localhost/ROOT.xml，其中包含以下内容：

    <Context docBase="path/to/WAR" />

这假定您使用引擎和主机的默认名称。如果没有，请相应地调整路径。它是 $CATALINA_BASE/<engine_name>/<host_name>/ROOT.war

现在您正在使用带有选项 1 的多个主机，您需要执行以下操作，因为 appBase != docBase。如果尝试为它们使用相同的值，则会发生各种不好的事情。

有几种方法可以从现有的解决方案中找到可行的解决方案。我建议如下： 1\. 创建一个名为 C:/Tomcat 7/webapps-myapp/ROOT 的目录 2\. 将 C:/Tomcat 7/myapp 的内容复制到这个新目录 3\. 删除 C:/Tomcat 7/myapp 4 . 将 MyApp 主机的 appBase 更改为“webapps-myapp”（或完整路径）

这会将 C:/Tomcat 7/myapp 中的应用程序部署为 myapp 虚拟主机中的 ROOT（默认）应用程序。这假设您已将 myapp 应用程序部署到 C:/Tomcat 7/myapp

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T16:36:39.520

来自 Tomcat 7*文档*：

[http://tomcat.apache.org/tomcat-7.0-doc/config/host.html](http://tomcat.apache.org/tomcat-7.0-doc/config/host.html)

> 如果您使用的是标准 Host 实现，则在首次启动 Catalina 时，如果 deployOnStartup 属性设置为 true（这是默认值），则会自动执行以下操作：
> 
> ```
> Any XML file in the Host's xmlBase directory (by default $CATALINA_BASE/conf/[engine_name]/[host_name]) is assumed to be a 
> ```
> 
> 上下文 XML 描述符，包含单个 Web 应用程序的上下文元素（及其关联的子元素）。将首先部署与这些上下文 XML 描述符文件中的每一个关联的 Web 应用程序。
> 
> ```
> The docBase attribute of this <Context> element must only be set if the docBase is outside the Host's appBase. For web applications 
> ```
> 
> 位于主机的 appBase 中，docBase 将是 XML 文件的名称，其中“.xml”替换为“.war”（用于 Web 应用程序存档）或 XML 文件的名称（删除“.xml”）用于目录。
> 
> ```
> The path attribute must not be set. The context path used will be a slash character ("/") followed by the name of the XML file (less the 
> ```
> 
> .xml 扩展名）。可以使用# 定义多级上下文路径，例如foo#bar.xml 用于/foo/bar 的上下文路径。可以使用名为 ROOT.xml 的文件来定义具有 / 上下文路径的默认 Web 应用程序。
> 
> ```
> Any web application archive file within the Host's appBase directory that has not already been deployed as a result of a context 
> ```
> 
> XML 描述符，没有对应的同名目录（没有“.war”扩展名），并且没有被 deployIgnore 排除，接下来会部署。使用的上下文路径将是一个斜杠字符（“/”），后跟 Web 应用程序存档名称减去“.war”扩展名。此规则的一个例外是名为“ROOT.war”的 Web 应用程序存档将使用 / 的上下文路径进行部署。可以使用# 定义多级上下文，例如，使用名为foo#bar.war 的WAR 作为/foo/bar 的上下文路径。
> 
> ```
> If the unpackWARs attribute is true, the web application archive file will be expanded to a directory of the same name (without the 
> ```
> 
> “.war”扩展名”。
> 
> ```
> Note: If you re-deploy an updated WAR file while Tomcat is stopped, be sure to delete the associated expanded directory before 
> ```
> 
> 重启Tomcat，这样当Tomcat重启时更新的WAR文件会重新展开。
> 
> ```
> If copyXML is true (it is false by default), any web application archive file within the Hosts's appBase directory that does not have a 
> ```
> 
> 将扫描主机的 xmlBase 中相应的上下文 XML 描述符（具有“.xml”扩展名而不是“.war”扩展名）以查看它是否包含上下文 XML 描述符（位于 /META-INF/context.xml）和如果找到一个，描述符将被复制到 xmlBase 目录并重命名。
> 
> ```
> Finally, any sub-directory within the Host's appBase that has not already been deployed as a result of a context XML descriptor and is 
> ```
> 
> 不被 deployIgnore 排除的将被部署。使用的上下文路径将是一个斜杠字符（“/”），后跟目录名称，除非目录名称是 ROOT，在这种情况下，上下文路径将为 /。可以使用# 定义多级上下文，例如使用名为foo#bar 的目录作为/foo/bar 的上下文路径。
> 
> ```
> If copyXML is true (it is false by default), any directory within the Hosts's appBase directory that does not have a corresponding 
> ```
> 
> 将扫描主机的 xmlBase 中的上下文 XML 描述符，以查看它是否包含上下文 XML 描述符（位于 /META-INF/context.xml），如果找到，该描述符将被复制到 xmlBase 目录并重命名。

这一切的要点：

```
a web application archive named "ROOT.war" will be deployed with a context path of /. 
```

# ios - 当应用程序变为活动状态时，iOS 始终在起始页上

> ID：10373802
> 
> 赞同：1
> 
> 时间：2012-04-29T16:29:35.137
> 
> 标签：ios, view, relaunch

我正在为 iPad 编写测验，当用户在测验中按下主页按钮并重新启动应用程序时，我希望测验已经被取消并返回到应用程序的起始页。现在它只是回到它的最后一个视图。

我还希望它在应用程序重新启动时再次显示启动画面。

当按下主页按钮时，应用程序的完全重置会很棒。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:31:56.653

那么，您想禁用多任务处理吗？

在您的 info.plist 中设置`UIApplicationExitsOnSuspend`= 。`YES`

除非您只是希望它们通过屏幕恢复，在这种情况下，您需要查看 AppDelegate 的生命周期回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T16:33:20.780

在项目的 plist 中选择“应用程序不在后台运行”选项。如果该选项不存在，请按侧面的“+”以添加该属性。

![在此处输入图像描述](../Images/fe4c33408c3ce6f0a927656b23678b41.png)

这将确保应用程序每次打开时都会重新启动。

# c++ - 具有大内存分配大小的堆损坏 C++

> ID：10373807
> 
> 赞同：-4
> 
> 时间：2012-04-29T16:30:29.507
> 
> 标签：c++

此代码导致与 Visual Studio 2010 对应的堆损坏。是什么导致堆损坏？这段代码的哪一部分导致了它？

```
#define size 65536
int main()
{
    int* a =  new int[size];//size is equal to
    srand(time(NULL));
    for(int i = 0 ; i < size; i++)
    {
        a[i]= 1 + rand() % 10;
    }

    for(int i = 0;  (size / 2) / pow((double)2, i)>= 1; i++)
    {
        int n = pow((double)2, i);
        int offset = 0;
        for(int j = 0; j < (size / 2) / pow((double)2, i); j++)
        {
            int* tmp = new int[n];
            merge(a + offset, n, a + offset + n, n, tmp);
            memcpy(a + offset, tmp, n*2 * sizeof(int));
            offset += pow((double)2, i+1);
        }
    }

    for(int i = 0; i < size; i++)
    {
        cout<<a[i]<<" ";
    }
    cout<<endl;
    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T16:36:33.690

怀疑 memcpy 是问题所在。您正在从 tmp 复制 (n * 2 * sizeof(int)) 字节，而您只为其分配了 n * sizeof(int) 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T16:37:40.903

堆损坏仅仅意味着您分配了一块内存，然后在该块之外写入数据。通常这意味着您已经写过了数组的末尾。

少量覆盖将命中放置在您的内存分配之后的“警戒词”，因此运行时将在您的程序继续正常运行时检测并报告堆损坏。但是，如果您进一步编写，您可能会损坏其他一些关键数据（当您的程序尝试使用数据时导致未定义的结果）或运行超出内存映射的末尾并给出致命的访问冲突错误。

检查数组中的索引是否始终在 0..Length-1 范围内

如果您无法计算所使用的最大索引是多少，则输入一行代码以检查索引是否在此范围内，如果不在则进入调试器。即检查您传递给merge/memcpy 的值是否始终在范围内。（可能是他们写了一个元素太多 - 一个快速的问题是分配比你“需要”更多的内存，但这显然不是正确的解决方案 - 你需要确保你只写你想要的数据至）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T16:38:05.693

您没有为以下内容分配足够的空间`tmp`：

```
int* tmp = new int[2*n]; 
```

合并代码中的递增`for (..; ...; c_i++`）看起来也很可疑。

您可能有几个错误，使用调试器或编写跟踪消息并检查发生了什么 - 确认您没有写出越界。

# mysql - 从数据库返回 json 值

> ID：10373820
> 
> 赞同：0
> 
> 时间：2012-04-29T16:32:24.687
> 
> 标签：mysql, json

谁能告诉我 JSON 不返回什么样的字符？

因为我有 varchar 这让我为空：

> 马克·扎克伯格于 2003 年 10 月 28 日写了 Facebook 的前身 Facemash，当时他还在哈佛读大二。据 The Harvard Crimson 称，该网站可与 Hot or Not 相媲美，并且“使用了从九所房子的在线 Facebook 收集的照片，一次将两个并排放置，并要求用户选择‘更热’的人”。为了做到这一点，扎克伯格黑进了哈佛计算机网络的保护区，并复制了这些房子的私人宿舍身份证图像。哈佛当时没有学生“脸书”（一个包含照片和基本信息的目录），尽管自 1980 年代中期以来，各个学院一直在发行自己的纸质脸书。Facemash 在上线前四个小时就吸引了 450 名访客和 22,000 次照片浏览。该网站很快被转发到几个校园群组列表服务器，但几天后被哈佛政府关闭。扎克伯格被政府指控违反安全、侵犯版权和侵犯个人隐私，并面临开除。最终，指控被撤销。扎克伯格在那个学期扩展了这个初始项目，在艺术史期末考试之前创建了一个社会研究工具，将 500 张奥古斯都图片上传到网站，每页一张图片以及评论部分。他向同学们开放了网站，人们开始分享他们的笔记。并面临开除。最终，指控被撤销。扎克伯格在那个学期扩展了这个初始项目，在艺术史期末考试之前创建了一个社会研究工具，将 500 张奥古斯都图片上传到网站，每页一张图片以及评论部分。他向同学们开放了网站，人们开始分享他们的笔记。并面临开除。最终，指控被撤销。扎克伯格在那个学期扩展了这个初始项目，在艺术史期末考试之前创建了一个社会研究工具，将 500 张奥古斯都图片上传到网站，每页一张图片以及评论部分。他向同学们开放了网站，人们开始分享他们的笔记。

和varchar：

> jjjjjjjjjjjjjjjskkkkkkkkkkkkkkkkkkkkkk jjjjjjjjjjjjjjjskkkkkkkkkkkkkkkkkkkkkkjjjjjjjjjjjjjjjskkkkkkkkkkkkkkkkkkkkkkjjjjjjjjjjjjjjjskkkkkkkkkkkkkkkkkkkkkk jjjjjjjjjjjjjjjskkkkkkkkkkkkkkkkkkkkkk jjjjjjjjjjjjjjjskkkkkkkkkkkkkkkkkkkkkk jjjjjjjjjjjjjjjskkkkkkkkkkkkkkkkkkkkkk

效果很好。所以我想知道为什么JSON给我null？还是MySQL的问题？

现在使用此代码：

```
$title = 'Twitter history';
$q=mysql_query("SELECT mdl_resource.alltext FROM mdl_resource WHERE mdl_resource.name = '$title'");
while($e=mysql_fetch_assoc($q))
    $output[]=$e;
print(json_encode($output)); 
```

# php - 大型数据集的 MySQL 数据库建模

> ID：10373822
> 
> 赞同：2
> 
> 时间：2012-04-29T16:32:26.153
> 
> 标签：php, mysql, database

客户想要从一堆不同的来源为他的客户编译一堆数据。我正在构建 PHP/MySQL 服务器架构。我所有的经验都是前端开发和设计，所以我遇到了性能问题，现在有很多数据集。

性能问题是重复数据删除。主 db 表存储域并具有四列：“id”、“domain_name”和两个布尔值，用于确定域是否是客户的可能目标。'domain_name' 列上有一个索引。

我不希望同一个域有多行。这些域以 30,000 个为一组，现在我正在使用：

```
if(!(Domain::find_by_domain($d->n))) {
    // insert into db
} 
```

我也试过：

```
$already_in_db = Domain::list_domains();
if(!in_array($already_in_db)) {
    // insert into db
} 
```

目前表中只有大约 170,000 个域，这两种方法都需要很长时间。

1）在域列上设置唯一索引会导致欺骗被丢弃吗？

2）有没有其他方法可以加快这个过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:35:47.877

在域名列上创建索引，如果域已经存在[`UNIQUE`](http://dev.mysql.com/doc/refman/5.5/en/constraint-primary-key.html)，那么您的`INSERT`语句将失败（您可以使用[`REPLACE`](http://dev.mysql.com/doc/refman/5.5/en/replace.html)或者[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)如果您想在发生此类冲突时更改数据）：

```
ALTER TABLE tbl_name
  DROP INDEX name_of_existing_index,
  ADD  UNIQUE INDEX name_of_existing_index (domain_name); 
```

# java - 加快jvm预热时间

> ID：10373824
> 
> 赞同：2
> 
> 时间：2012-04-29T16:32:31.967
> 
> 标签：java, jvm

> **可能的重复：**
> [最小化Java“热身”时间的技术或实用程序？](https://stackoverflow.com/questions/1481853/technique-or-utility-to-minimize-java-warm-up-time)

我知道 JVM 需要一段时间来“热身”，具体取决于代码大小。我的问题是：程序员有没有办法通过以某种方式指定代码的可能部分来帮助它加速“热身”过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:37:37.763

您可以通过多次调用代码来间接地进行。默认`-xx:CompileThreshold=`值为 10000。因此您可以多次调用关键代码，例如 12,000 次。

您可以降低编译阈值，但您仍然有同样的问题，只是循环可以说是 1000 而不是 10000。

您想要预热代码的一个原因是对其进行优化，但如果您缩短迭代次数，则可能无法执行某些优化并且您可以获得次优调用（但并非总是如此）

再一次，如果您预热代码是一种不具有代表性的方式，它可以以次优方式对其进行优化，并且 JVM 可能会决定稍后重新优化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:08:35.493

developerWorks 上有一篇关于 Java 中的微观性能测量的非常好的[文章。](http://www.ibm.com/developerworks/java/library/j-benchmark1/index.html)它还涵盖了“热身”和其他相关内容的主题。作者在 Java 中实现了一个相当不错的微基准测试框架。该框架还处理 JVM 的预热阶段，并尝试在实际测试开始之前加速并完成它。该框架的源代码也是可用的，因此您可以看看它是如何实现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T16:45:36.097

您可能需要考虑提前编译器，例如 gcj，它允许您在构建应用程序时将一组类编译为本机代码，并且只在虚拟机中运行运行时加载的类。编译完成后的性能不太好（特别是如果您在运行时加载的代码上花费大量时间），但对于运行时间较短的程序，预编译的好处不仅仅是抵消了这一点。

# html - Safari + 表格 + 宽度问题

> ID：10373831
> 
> 赞同：0
> 
> 时间：2012-04-29T16:33:48.253
> 
> 标签：html, css, safari, html-table, width

我有一个表格，目前包含我在 ( [http://www.enl-esports.com](http://www.enl-esports.com) ) 上找到的网站的主要布局。

id 为“menu”的表格列的指定宽度为 150px，但它在 safari 中随机决定变为 160px。我没有填充，也没有边距，当我删除它的内部 HTML 时问题仍然存在（这可能会迫使它变得更大..）。它在 Chrome 中运行良好。

我尝试使用固定的表格布局（如在此处找到：[http](http://www.w3.org/TR/REC-CSS2/tables.html#width-layout) ://www.w3.org/TR/REC-CSS2/tables.html#width-layout ），但没有解决问题。

您最能看到的页面可以在这里找到：[http ://www.enl-esports.com/seasons/](http://www.enl-esports.com/seasons/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:01:57.750

我在想这可能与 safari 中的列表错误有关，其中未设置为 0 的边距/填充可以缩进项目，但事实并非如此。

我所做的 discrev 是您的 html 严重无效。例如，无序列表中唯一允许作为子项的元素是列表项 ( `li`)，但在该菜单中，您有一个锚点作为无序列表的直接子项。

无效的 html 总是会导致跨不同平台/浏览器的时髦行为，我怀疑这就是其中之一。

然后是使用上个世纪的表格布局的问题，您可能应该为它感到羞耻（无论如何，您没有充分的理由应该在此布局中使用表格布局）。

无论如何，要开始解决您的问题，请查看此处并查看解决问题的列表：

[http://validator.w3.org/check?uri=www.enl-esports.com](http://validator.w3.org/check?uri=www.enl-esports.com)

# xml - 在同名元素的文本之间插入空格

> ID：10373836
> 
> 赞同：1
> 
> 时间：2012-04-29T16:34:27.690
> 
> 标签：xml, xslt, transformation

对于精通 XSLT 的作者来说，这个问题可能很容易回答。

我有以下示例 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<students>
    <student num="12345678">
        <name>Dona Diller</name>
        <dob>1970-07-21</dob>
        <education>BSc</education>
        <education>MSc</education>
        <status>Married</status>
    </student>

<!-- more student elements to follow... -->

</students> 
```

以及以下 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="html"/>

    <xsl:template match="/">
        <html>
            <title>Test</title>
            <body>
                <h1>Personal details</h1>
                <xsl:apply-templates select="students/student"/>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="student">
        <p>
            Student number:
            <xsl:value-of select="@num"/>
        </p>
        <p>Full name:
            <xsl:value-of select="name"/>
        </p>
        <p>Date of birth
            <xsl:value-of select="dob"/>
        </p>
        <!-- TODO: text of 'education' elements must be separated by a space -->
        <p>Degrees:
            <xsl:apply-templates select="education"/>
        </p>
        <p>Status:
            <xsl:value-of select="status"/>
        </p>
    </xsl:template>

</xsl:stylesheet> 
```

当应用于本文开头包含的 XML 文档时，它会产生以下 XHTML 输出：

```
<html>
   <title>Test</title>
   <body>
      <h1>Personal details</h1>
      <p>
         Student number:
         12345678
      </p>
      <p>Full name:
         Dona Diller
      </p>
      <p>Date of birth
         1970-07-21
      </p>
      <p>Degrees:
         BScMSc
      </p>
      <p>Status:
         Married
      </p>
   </body>
</html> 
```

我的问题是学位名称合并为一个字符串（教育元素的文本）。因此，我不想在输出中获得“BScMSc”，而是想在前面的示例中显示“BSc MSc”。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T20:36:44.773

The solutions by Novatchev and Honnen will both work (of course) but something about them feels a little unsatisfactory to me. I think if you're going to delegate formatting of an education element to a template rule, then that template rule ought only to be concerned with the formatting of one education element, and not with the formatting of a set of adjacent elements. To me, the interstitial spacing is properly the job of the parent template. So I think I would be inclined to write:

```
<xsl:for-each select="education">
  <xsl:if test="position() ne 1"><xsl:text> </xsl:text></xsl:if>
  <xsl:apply-templates select="."/>
</xsl:for-each> 
```

But it's a matter of opinion.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T16:38:08.830

添加模板

```
<xsl:template match="education">
  <xsl:if test="position() > 1">
    <xsl:text> </xsl:text>
  </xsl:if>
  <xsl:value-of select="."/>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T16:59:34.480

**更短/更简单/更易读**

**添加此模板**：

```
<xsl:template match="education[position() > 1]">
  <xsl:value-of select="concat(' ', .)"/>
</xsl:template> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T03:55:53.693

只需在每个学位的末尾添加一个空格：

```
<xsl:template match="education">
    <xsl:value-of select="concat(.,' ')"/>
</xsl:template> 
```

是的，这会在度数列表的末尾产生一个多余的空间，但在这种情况下这不是问题。

如果你有 XSLT 2.0，你可以试试

```
<p>Degrees:
    <xsl:value-of select="string-join(education,' ')"/>
</p> 
```

# kml - 生成具有较高海拔地球曲率的 KML lineString 坐标

> ID：10373838
> 
> 赞同：2
> 
> 时间：2012-04-29T16:34:39.173
> 
> 标签：kml, google-earth

我需要在具有地球曲率的较高海拔的两点之间创建一个 lineString 。按照类似于航空公司飞行路径的方式来思考视觉创意。

从上面看，在任何两个起点和终点之间都会有一条直线，但从侧面看，它会与地球的曲率相匹配。

假设这条线必须出现在地球上方 260,000 的高度。如果我只是指定起点和终点，那么这条线会长距离穿过地球。

（为了减少混乱，我将省略其余的 KML 代码，只粘贴 LineString 代码）

**示例 1：**

```
<Placemark>
  <name>LineString Test</name>
      <visibility>1</visibility>
  <description>Test</description>
  <styleUrl>#RedLine</styleUrl>
  <LineString>
    <altitudeMode>relativeToGround</altitudeMode>
    <coordinates>

          -86.1296598,38.8760649,260000

          -97.7430608,30.267153,260000
</coordinates>
  </LineString>
</Placemark> 
```

如果我这样做，这条线会有一条与地球曲率相匹配的漂亮曲线。

示例 2

```
 <Placemark>
  <name>LineString Test</name>
      <visibility>1</visibility>
  <description>Test</description>
  <styleUrl>#RedLine</styleUrl>
  <LineString>
    <altitudeMode>relativeToGround</altitudeMode>
    <coordinates>

          -86.1296598,38.8760649,260000
          -87.1854235,38.0934366,260000
          -88.2411872,37.3108083,260000
          -89.2969509,36.52818,260000
          -90.3527146,35.7455517,260000
          -91.4084783,34.9629234,260000
          -92.464242,34.1802951,260000
          -93.5200057,33.3976668,260000
          -94.5757694,32.6150385,260000
          -95.6315331,31.8324102,260000
          -96.6872968,31.0497819,260000
          -97.7430608,30.267153,260000
</coordinates>
  </LineString>
</Placemark> 
```

示例二是期望的结果，但是有没有更简单的方法来实现这一点，或者我是否需要某种算法来计算沿路线起点和终点之间的点以实现地球曲率？

# asp.net-mvc - html.actionlink 以 C# 变量为参数

> ID：10373844
> 
> 赞同：1
> 
> 时间：2012-04-29T16:35:16.043
> 
> 标签：asp.net-mvc

```
 <% foreach (var item in Model) { %>

        <table width="100%" class="topicContainer">
           <tr>
             <td>  <%: Html.DisplayFor(modelItem => item.headerclob) %></td>
            </tr>
            <tr>
             <td><%: Html.ActionLink("ViewTopic", "ViewTopic","Forum" ,
               new { id=item.topicId },null) %></td>
            </tr>
        </table>

       <% } %> 
```

我想要的链接 ViewTopic`item.headerclob`应该在不使用 Razor 的情况下显示在超链接中。

我也想对它应用css。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:49:09.587

我认为下面的代码应该可以工作

```
<%: Html.ActionLink("item.headerclob, "ViewTopic","Forum" ,
               new { id=item.topicId },null) %> 
```

它使用以下格式

```
public static string ActionLink(this HtmlHelper htmlHelper, 
                                string linkText,
                                string actionName,
                                string controllerName,
                                object values, 
                                object htmlAttributes) 
```

如果您使用的是 MVC 3，那么您可以只使用“item.topicId”而不是“id = item.topicId”

**编辑** 是的，它可以工作，但是从 item.headerClob 中删除分号后

```
 <%: Html.ActionLink(item.headerclob, "ViewTopic","Forum" ,
               new { id=item.topicId },null) %> 
```

**编辑** 添加一个类到操作链接，然后使用您的 css 文件设置必要的属性

```
<%: Html.ActionLink(item.headerclob, "ViewTopic","Forum" ,
                   new { id=item.topicId , @class = "YourClass"},null) %> 
```

现在您可以将 css 属性应用到您将 css 属性设置给其他人的操作链接

**编辑** 如果您不想使用剃须刀，我可以建议您自己构建锚点，如下所示

```
<a href="<%=Url.Action("ViewTopic", "Forum",new { id=item.topicId})%>" class="YourClass"> item.headerclob </a> 
```

# webcam - 如何在统一 3d 中流式传输实时网络摄像头？

> ID：10373846
> 
> 赞同：0
> 
> 时间：2012-04-29T16:35:22.270
> 
> 标签：webcam, unity3d

目前，我可以使用这个简单的教程 [http://www.ikriz.nl/2011/12/23/unity-video-remake](http://www.ikriz.nl/2011/12/23/unity-video-remake)在 unity3d 中看到我自己的网络摄像头作为纹理 现在我想知道如何我在统一 3d 中看到别人的网络摄像头？任何机构都可以给我一些指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:04:27.073

你在“别人的网络摄像头”下是什么意思？实际上，您可以在两台计算机之间打开套接字连接，通过套接字流式传输“别人的”网络摄像头并在您的应用程序中显示图片。可以用任何语言/框架编写“别人的”应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:36:29.260

为了帮助将来发现这有帮助的任何人，我使用了一个 Flash 客户端来完成此操作，该客户端获取实时流并将其发送到用 .Net 编写的本地服务器。然后那个.net服务器将流发送到我们在unity3D中运行的脚本。并且该脚本被放置在您模型中的任何平面上，因此向您显示接收到的流。这有点滞后，但它正在工作:)

# android - 使用 libgdx 和 OpenGL ES 制作橡皮擦效果

> ID：10373847
> 
> 赞同：11
> 
> 时间：2012-04-29T16:35:23.087
> 
> 标签：android, opengl-es, libgdx, pixmap

请考虑以下图片作为说明： ![在此处输入图像描述](../Images/e2a14d423d958f5bdefb3e7f8408da70.png)

最初，我用单个图像填充整个屏幕/舞台，直到屏幕变成粉红色。每一个粉红色的斑点都是我添加到舞台上的一个单独的 Image actor。

现在我想以这样一种方式实现 touchDown 方法，即每次用户触摸屏幕时，它都会擦除发生触摸事件的图像的一部分。但是，该触摸事件不应影响粉红色 blob 演员后面或之上的其他图像/演员/纹理区域。我应该如何使用 OpenGL ES 在 libgdx 中实现这一点？请在这方面帮助我。

我找到了这个链接，它解释了如何修改 TextureRegion，但我不知道如何使用这个博客中解释的技术来解决我的问题。[链接在这里](http://blog.gemserk.com/2012/01/04/modifying-textures-using-libgdx-pixmap-in-runtime-explained/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T04:13:34.467

您可以使用 FBO 和模板缓冲区吗？

为您的“粉红色”图层设置一个 FBO 并为其设置一个模板缓冲区。触地时，将您的触感绘制为粉红色 FBO 模板缓冲区的遮罩。现在，当您绘制粉红色的 FBO 时，您触摸的区域不会被渲染，因此您将能够看到它背后的背景 FBO。

此链接[http://www.opengl.org/archives/resources/faq/technical/rasterization.htm](http://www.opengl.org/archives/resources/faq/technical/rasterization.htm)，第 14.050 节告诉您如何设置模板缓冲区：

> 您可以按如下方式设置 OpenGL 状态：
> 
> ```
> glEnable(GL_STENCIL_TEST);
> glStencilFunc(GL_ALWAYS, 0x1, 0x1);
> glStencilOp(GL_REPLACE, GL_REPLACE, GL_REPLACE); 
> ```
> 
> 后续渲染将为渲染的每个像素在模板缓冲区中设置一个 1 位。

你可能不得不摆弄一些东西，这样你的掩蔽就会以正确的方式出现（你接触过的面具，而不是你没有接触过的地方。）

# javascript - 初学者 JavaScript

> ID：10373849
> 
> 赞同：1
> 
> 时间：2012-04-29T16:35:30.197
> 
> 标签：javascript

我是 JavaScript 新手。我已经通过学习 JavaScript (o'reilly) 完成了我的工作，但我只是想制作我的第一个 JavaScript。

我认为最好做一些我感兴趣的事情，结果证明是相当复杂的。

我基本上是在尝试（最终）模拟 Space Hulk（棋盘游戏）中的一种情况，即基因窃取者与星际战士之间有 12 步。在第一步中，任何一个骰子的 6 都可以杀死基因窃取者，然后是 5 或 6 来杀死。如果骰子上的数字相同，枪就会卡住。

我只是想模仿这里的第一步。我认为问题出在**jamCheck 上**。

基本上这个输出总是正确的，即使我把它改成 != 它总是显示枪卡住了。

我想知道是否需要将变量传递给另一个局部变量，但它适用于 killCheck 而不必这样做。（我试过了，虽然我可能做错了）

完全有可能这里有一些非常简单的错误。

我希望你能提供帮助，或者指出我正确的方向。

非常感谢！

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
        <head>
        <title>SH</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <script type="text/javascript">
      //<![CDATA[

    function diceRoll1() {
       iValue = Math.random(); // random number between 0 and 1
       iValue *= 6; // multiply by 6 to move the decimal
       iValue = Math.floor(iValue)+1; // round to nearest integer. +1 to 1-6.
       var roll1 = iValue;
       document.getElementById('result1').innerHTML = 'Dice roll 1 : ' + roll1;
       killCheck (roll1);
       jamCheck (roll1);
       return;
    }

    function diceRoll2() {
       iValue = Math.random(); // random number between 0 and 1
       iValue *= 6; // multiply by 6 to move the decimal
       iValue = Math.floor(iValue)+1; // round to nearest integer. +1 to 1-6.
       var roll2 = iValue;
       document.getElementById('result2').innerHTML = 'Dice roll 2 : ' + roll2;
       killCheck (roll2);
       jamCheck (roll2);
       return;  
    }

    function killCheck(roll1,roll2){
        if (roll1==6 || roll2==6)
        {
        document.getElementById('kill').innerHTML = 'GS KILLED';
        }
        return;
    }

    function jamCheck(roll1,roll2){
        if (roll1 == roll2)
        {
        document.getElementById('jam').innerHTML = 'GUN JAMMED';
        }
        return;
    }   

    //]]>
    </script>
    </head>
    <body onload="diceRoll1();diceRoll2();killCheck();jamCheck();">
      <p id="result1">Dice roll 1</p>
      <p id="result2">Dice roll 2</p>
      <p id="kill">GS ALIVE</p>
      <p id="jam">GUN FINE</p>

    </body>
    </html> 
```

**编辑：**我最终在朋友的帮助下到达了那里；这是当前代码：

```
...
function getDiceValue() {
var diceValue = Math.random(); 
diceValue *= 6;
diceValue = Math.floor(diceValue) + 1; 
return diceValue;
}

function killCheck(roll1, roll2) {
if (roll1 === 6 || roll2 === 6) {
document.getElementById('kill').innerHTML = 'GS KILLED';
}
return;
}

function jamCheck(roll1, roll2){
if (roll1 === roll2) {
document.getElementById('jam').innerHTML = 'GUN JAMMED';
}
return;
}

function rollDice() {
var roll1 = getDiceValue(),
roll2 = getDiceValue();
document.getElementById('result1').innerHTML = 'Dice roll 1 : ' + roll1;
document.getElementById('result2').innerHTML = 'Dice roll 2 : ' + roll2;
killCheck (roll1, roll2);
jamCheck (roll1, roll2);
}
//]]>
...
<body onload="rollDice();"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T16:39:35.740

如果你真的想四舍五入到你需要使用 Math.round() 的“最近”整数，Math.floor() 会向下取整（想想名字...... ceil 向上取整）。

在您的情况下，如果您乘以 6 并向下取整，您将永远不会得到高于 5 的数字。

我怀疑这是你的问题，虽然我只看了你的代码，所以，如果这只是一个错误而不是你的问题的原因，请原谅我。

[编辑] 经进一步思考，无视上述内容。问题是您的方法需要 2 个参数，但您只传入一个。

我认为您误解了参数传递的工作方式。

`jamCheck(p1, p2){}` 你给这些起什么名字是不相关的。这些标签只存在于您的方法内部。我怀疑让您感到困惑的是您对传入的变量以及方法中的变量使用相同的标签。因此，当您调用 jamCheck(roll1) 方法时，它无法执行所需的操作，因为它被设计为在 2 个变量上工作。除此之外，您得到的任何结果都只是浏览器试图弥补语法被破坏的代码。在像 C 或 Java 这样的语言中，你甚至无法编译这样的代码；编译器会指出这些行没有任何意义。

所以，解决方案是（类似于）......

```
var roll1,roll2;

roll1 = diceRoll1();
roll2 = diceRoll2();
jamCheck(roll1,roll2);
killCheck(roll1,roll2); 
```

但是在您的 diceRoll 方法中，您需要做的最后一件事是`return roll1;`（或分别为 roll2）

并查看 kirean 的答案，了解如何将这一切包装在一个 init 方法中，这样您就不会从主体的 onload 回调中调用 4 个（或更多）方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T16:48:45.957

您在这里做错了几件事，首先是将函数作用域变量与全局作用域变量混淆。

这个函数

```
function jamCheck(roll1,roll2){
    if (roll1 == roll2)
    {
    document.getElementById('jam').innerHTML = 'GUN JAMMED';
    }
    return;
} 
```

需要两个参数，但你在这里*没有传入*`body onload="...jamcheck()"`

结果，未定义等于未定义，因此当然是正确的。

您需要一个类似于此的包装函数

```
function executeGame(){
   var dice1 = rollDice1();
   var dice2 = rollDice2();

   jamCheck(dice1, dice2)
} 
```

然后在 body onload 上调用这个函数。

# sql - 如何按日期计算来自 2 个不同表的数据

> ID：10373850
> 
> 赞同：0
> 
> 时间：2012-04-29T16:35:33.977
> 
> 标签：sql, sql-server-2005

我有 2 个没有关系的表，两个表的列数不同，但是有几列相同但包含不同的数据。我能够只创建我想要的数据的函数或视图，但是当我尝试通过过滤日期来计算数据时，我总是得到错误的计数作为回报。让我通过展示 2 个功能和我尝试做的事情来解释：

功能一

```
ID - number from 1 to 8
data sent - YES or NO 
Date - date value 
```

功能二

```
ID - number from 1 to 8
data sent - yes or no
date - date value 
```

分别运行两者后，我从表中获取了所有行，一切看起来都很好。

然后我尝试将以下内容添加到每个函数中：

```
select 
     count([data sent]), ID 
from function1 
Where (date between @date1 and @date2) 
group by ID 
```

上面的语句效果很好，并为我提供了每个函数的正确结果。

现在我想如果我想将这 2 个函数加到一个中并从 1 页上的两个函数中获取计数怎么办。

所以我创建了以下函数：

功能 3

```
select 
    count(Function1.[data sent]) as Expr1, 
    Function1.id, 
    count(Function2.[data sent]) as Expr2, 
    Function1.date
from 
    Function1 
LEFT OUTER JOIN 
    Function2 on Function1.id = Function2.id
Where 
    (Function1.date between @date1 and @date2)
group by 
    Function1.id 
```

运行上述内容后，我得到下表：

```
ID  Expr1  Expr2 
```

在 Expr1 和 Expr2 上，我都得到了我不确定它们来自哪里的结果。我猜有些东西要乘以 100000，因为一个表包含近 15000 行，另一个表包含大约 5000 行。

我首先想知道的是，是否有可能同时按日期过滤并计算两个表中的记录。如果有人需要更多信息，请告诉我，我很乐意分享和解释更多。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:30:28.120

为什么不能为每个函数创建一个临时表然后将它们连接在一起？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:22:19.837

也许子查询可以帮助你实现你想要的：

```
SELECT
  ID   = COALESCE(f1.ID,   f2.ID),
  Date = COALESCE(f1.Date, f2.Date),
  f1.Expr1,
  f2.Expr2
FROM (
  SELECT
    ID,
    Date,
    Expr1 = COUNT([data sent])
  FROM Function1
  WHERE Date BETWEEN @date1 AND @date2
  GROUP BY
    ID,
    Date
) f1
FULL JOIN (
  SELECT
    ID,
    Date,
    Expr2 = COUNT([data sent])
  FROM Function2
  WHERE Date BETWEEN @date1 AND @date2
  GROUP BY
    ID,
    Date
) f2
ON f1.ID = f2.ID AND f1.Date = f2.Date 
```

此查询还使用完全（外部）连接而不是左连接，以防连接的右侧包含左侧不匹配的行（并且您想要这些行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T17:47:45.987

这`LEFT OUTER JOIN`是获取左表的每一行，找到右表中具有相同`id`字段的所有行，并在结果表中创建那么多行。由于`id`不是我们通常认为的身份字段（它看起来更像是“deviceId”或其他东西），因此每个字段都会有很多匹配项。重复 15000 次，你就会得到组合爆炸。

提示：要调试这样的事情，您可以使用一小部分真实数据创建示例表，例如每个表 10 行，然后对它们运行查询。你会立即看到问题。

可以按日期过滤。如果不更好地理解您的短语“我想将这 2 个功能添加到一个中并从 1 页上的两个功能中获取计数”，就很难推荐一个实际的解决方案。

# php - FOSUserBundle 安装错误

> ID：10373853
> 
> 赞同：0
> 
> 时间：2012-04-29T16:36:01.543
> 
> 标签：php, symfony1, fosuserbundle

> 编辑：[已解决！！]
> 
> 哎呀...课堂上的错字。我的错。解决了！
> 
> 版本结束

我是 Symfony 的新手。我已经安装了 Symfony 2.0.12。

我试图安装 FOSUserBundle 只是为了看看它是如何工作的。

我想我已经遵循了安装文档中详述的所有步骤。

我有一个 Acme/StoreBundle/Entity/User.php，它扩展了 FOSUserBundle“FOS/UserBundle/Entity/User”中的 UserBase 类。我完全按照文档中的说明进行操作。

当我运行演示时，我收到以下错误：

> 致命错误：无法在第 12 行的 /Users/pgbonino/Sites/Symfony/src/Acme/StoreBundle/Entity/User.php 中重新声明类用户

无论我如何命名我的 User 类，我总是会得到相应的错误。第一个想法是将类的名称更改为“myUser”（因此它将是“class myUser extends BaseUser”。但随后错误变为：

> 无法重新声明类 myUser

这么奇怪。

有人知道吗？

听起来好像我在其他地方声明了 User 类。事实上，它是在 FOSUserBundle 和我的 AcmeStoreBundle 中声明的。但是，除非我失去了一些东西，否则这就是文档所说的。

# jquery - Jquery - 同时更改更多背景

> ID：10373857
> 
> 赞同：0
> 
> 时间：2012-04-29T16:36:41.533
> 
> 标签：jquery

我正在使用四个 DIV，如下所示：

```
<div class"first">1</div>
<div class"second">2</div>
<div class"third">3</div>
<div class"fourth">4</div> 
```

如果光标位于“第二个”DIV 上，则该 DIV 的背景应该与前一个 div（“第一个”）的背景一样发生变化。此外，如果光标悬停在“第三个”DIV 上，前一个（“第一个”和“第二个”）都应该改变背景颜色。如果光标在 div “fourth” 上，前三个 DIV（“first”、“second”和“third”）应该改变背景。

我怎样才能使用 Jquery 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T16:38:10.680

我建议如下：

```
$('div').hover(
function(){
    $(this).prevAll().css('background-color','#f00');
},
function(){
    $(this).prevAll().css('background-color','#fff');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/e9f4g/1/)。

请注意，您的 HTML 需要`=`介于 the`class`和`"first"`(etc) 之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:40:39.230

===已编辑===

jsfiddle：http: [//jsfiddle.net/sw9YV/10/](http://jsfiddle.net/sw9YV/10/)

试试这个html：

```
 <div id="group1">
    <div class="first hoverMe">1</div>
    <div class="second hoverMe">2</div>
    <div class="third hoverMe">3</div>
    <div class="fourth hoverMe">4</div>
</div>
<br /><br /><br />
<div id="group2">
    <div class="first hoverMe">1</div>
    <div class="second hoverMe">2</div>
    <div class="third hoverMe">3</div>
    <div class="fourth hoverMe">4</div>
</div>​ 
```

这个js：

```
 $(".hoverMe").mouseover(function(){
    $(this).css("background-color","#d3d3d3"); 
    $(this).prevAll(".hoverMe").css("background-color","#d3d3d3");
});

$(".hoverMe").mouseout(function(){
   $(this).css("background-color",""); 
   $(this).prevAll(".hoverMe").css("background-color","");
});
​ 
```

# rfc - RFC 6570 URL 模板：/ 与其他前缀的作用

> ID：10373859
> 
> 赞同：1
> 
> 时间：2012-04-29T16:36:58.237
> 
> 标签：rfc, url-template

我最近阅读了一些：[https ://www.rfc-editor.org/rfc/rfc6570#section-1](https://www.rfc-editor.org/rfc/rfc6570#section-1)

我发现了以下 URL 模板示例：

```
GIVEN : 
  var="value"; 
  x=1024; 
  path=/foo/bar;

{/var,x}/here         /value/1024/here  
{#path,x}/here        #/foo/bar,1024/here 
```

这些似乎是矛盾的。

在第一个中，似乎**/**替换了 ，在第二个中，似乎保留了**, 。**

因此，我想知道这个特定的 RFC 中是否存在不一致之处。我是这些 RFC 的新手，所以也许我不完全了解这些 RFC 背后的文化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T04:00:20.007

这两个例子没有矛盾。它们说明了扩展首字符为 的表达式的`/`规则与扩展首字符为 的表达式的规则不同`#`。这些替代扩展规则几乎就是拥有各种不同的魔术前导字符的全部意义——在 RFC中称为*运算符。*

带有前导的表达式`/`根据“表达式中的每个变量都被其值替换，前面有一个`/`字符”的规则进行扩展。（我在解释真正的规则，该规则在该 RFC 的第 3.2.6 节中进行了描述。）带有前导的表达式`#`根据“表达式中的每个变量都被它的值替换，第一个以 a开头的`#`变量和以 . 开头的后续变量`,`（再次解释，请参阅第 3.2.4 节了解真实规则。）

# php - 使用 php 和/或 jquery 过滤 mysql 搜索结果

> ID：10373863
> 
> 赞同：2
> 
> 时间：2012-04-29T16:37:12.900
> 
> 标签：php, jquery, mysql, filter, search-engine

我为我的网站构建了一个简单的搜索引擎，它的工作方式是当用户输入关键字时，它会查询数据库并显示结果。

我的数据库表如下所示：

```
game_id title   developer   publisher   genre   release_date    platform          
rating  image_location  description 
```

我想让用户在进行搜索后过滤结果，最好不要刷新页面（只编码了一个月，但对 jquery 和 ajax 有一个大致的了解）。

这是我的代码，我使用包含，因此搜索栏、搜索结果和查询页面是分开的。

第 1 页搜索栏

```
<div id=\"top_search\">
            <form name=\"input\" action=\"search.php\" method=\"get\" id=\"search_form\">
            <input type=\"text\" id=\"keywords\" name=\"keywords\" size=\"128\" class=\"searchbox\" value=\"$defaultText\"> &nbsp;
            <select id=\category\" name=\"category\" class=\"searchbox\"> 
";
createCategoryList();
echo '
            </select> &nbsp;
            <input type="submit" value="Search" class="button" /> &nbsp;
            </form>
        </div>
        </header>
'; 
```

第 2 页显示结果

```
<?php
session_start();
include ("includes/search_func.php");

if (isset($_GET['keywords'])){
$keywords = mysql_real_escape_string(htmlentities(trim($_GET['keywords']))); 

$errors = array();

if(empty($keywords)){
    $errors[] = 'Please enter a search term';
}else if(strlen($keywords)<3){
    $errors[] = 'Your search term must be at least 3 characters long';
}else if(search_results($keywords) == false){
            $errors[] = 'Your search for'.$keywords.' returned no results';
}
if(empty($errors)){
function diplay_results($keywords){
    $results = search_results($keywords);
    $results_num = count($results);

    foreach($results as $result ){
        echo '
            <div id="game_result">
                <a href= game_page.php?game_id='.$result['game_id'].'><img src= '.$result['image_location'].' id="image" /></a>
                <div id="main_title">
                    <a href= game_page.php?game_id='.$result['game_id'].'><h2 id="game_title">'.$result['title'].'&nbsp; &nbsp;</h2></a>
                    <h3 id="platform">for  &nbsp;'.$result['platform'].'</h3>
                </div>
                <p id=game_description>'.$result['description'].'</p>
                <div id="right_side">
                <h4 id="rating">'.$result['rating'].'</h4>
                </div>
                <hr id="hr"/>
            </div>  
        ';
}
}
}else{
    foreach($errors as $error){
        echo $error, '<br />';
    }
}

}
?>

<!DOCTYPE html>

<html lang="en">
<head>
    <title>Search</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/search.css">
</head>
<body>

    <div id="wrapper">
        <div id="main_aside">
                 //filter navigation will go here
        </div>
        <div id="main_section" class="header">
            <?php diplay_results($keywords)?>
        </div>
    </div>

</body>
</html> 
```

第三页查询数据库

```
<?php 
include 'includes/connect.php';

function search_results($keywords){
$returned_results = array();
$where = "";

$keywords = preg_split('/[\s]+/', $keywords);
$total_keywords = count($keywords);

foreach($keywords as $key=>$keyword){
    $where .= "title LIKE '%$keyword%'";
    if($key != ($total_keywords - 1)){
        $where .= " AND ";
    }   
}
$results ="SELECT * FROM games WHERE $where ";
echo $results;
$results_num = ($results = mysql_query($results)) ? mysql_num_rows($results) : 0;

if($results_num === 0){
    return false;
}else{
    while($row = mysql_fetch_assoc($results)){
        $returned_results[] = array(
            'game_id' => $row['game_id'],
            'title' => $row['title'],
            'platform' => $row['platform'],
            'rating' => $row['rating'],
            'image_location' => $row['image_location'],
            'description' => $row['description'],
        );
    }
    return $returned_results;
}   
}

?> 
```

因此，如果不清楚我想让用户搜索一个关键术语，那么它将从数据库中显示标题中带有关键字的任何游戏（我已经有这部分工作）。现在想不通的是如何让用户过滤他们的结果，让我们说只有动作游戏，以及让我们说某个平台等等。

就像我说的那样，我只做了一个月，所以如果我做错了什么，请不要犹豫，称我为白痴，但请帮忙。任何帮助将不胜感激，甚至链接到教程或书籍推荐。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:16:41.523

你的方法是正确的。根据出版商名称或开发商、流派、发布日期过滤搜索结果，

1）您可以拥有另一个“高级搜索”页面，您可以在其中插入这些属性的 HTML，并且只需调整查询的 WHERE 子句。因此将有两个搜索页面 - 一个简单的搜索允许用户根据标题名称进行过滤并说出类别，一个高级搜索页面根据其他属性进行过滤。
2) 您甚至可以选择在基本搜索页面本身提供选项，以便根据附加参数进行过滤。

如何选择接口将取决于您的需求规范。请注意，在所有情况下，只有您的 WHERE 子句会发生变化。

# c++ - 赋值运算符，使用动态数组

> ID：10373866
> 
> 赞同：0
> 
> 时间：2012-04-29T16:37:35.020
> 
> 标签：c++, operator-overloading, operator-keyword, dynamic-arrays

我有一个指向对象的指针列表。我想要做的是读取列表并将每个对象存储在该对象类型的动态数组中。所以我这样做：

```
int size = List.size();  // find how many objects in the list
ClassA* object = new ClassA[size];   // create a dynamic array
int counter = 0;
p = List.begin();   // iterator = begining of the list
while( p != List.end() )
{
    object[counter] = (*p)->operator=(*(*p));
                // called like this as this function is in a separate class
    p++;
    counter++;
} 
```

这似乎是我想要的，这意味着我需要赋值运算符，但我对放入其中的内容有点困惑，并且出现堆栈溢出错误，这是我认为我需要做的：

```
 ClassA ClassA::operator =(const ClassA& source)
 {
     ClassA* newObject;
     newObject = new ClassA;
     newObject = source;
     return newObject;

 } 
```

这是一堆废话，我不知道，但在我的脑海里，这就是我想要它做的，但我不完全理解我是如何实现它的。

如果有人可以提供帮助或建议更好的方法来实现我所需要的，将不胜感激。

这样做的原因是存储在此列表中的对象通常会遍历每一帧并复制到临时对象中。但是在程序运行过程中列表并没有改变，这意味着我不需要复制每一帧，只需在开始时复制一次。而且我需要一个动态数组，因为我不知道列表中将存储多少对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:51:49.240

这可能是一个`operator=`实现：

```
ClassA &ClassA::operator =(const ClassA& source) {
    // check for self-assignment
    if(this != &source) {
        // copy instance variables.
        a = source.a; // for example...
    }
    // assignment always returns the lvalue
    return *this;
} 
```

我不知道你`ClassA`的实例变量，所以你应该实现内部复制。

另一方面，在迭代列表时，您可以通过以下方式复制对象：

```
object[counter] = (**p); 
```

`(**p)`返回，首先存储在迭代器中的指针，然后取消引用它。

# java - java可序列化的NotSerializableException

> ID：10373868
> 
> 赞同：-4
> 
> 时间：2012-04-29T16:37:39.630
> 
> 标签：java, serializable

我有一个`NotSerializableException`，jvm 告诉我它来自一个与序列化到`ObjectOutputStream`!

到底会发生什么？它作为问题提到的类是不可序列化的，并且操作了来自其他类的一些数据，这些数据绝对是可序列化的，为什么这会导致`NotSerializableException`？

编辑：请不要投反对票，这是一个严肃的问题！好的，所以我只是想知道以下是否可能是一个问题：如果我有一个匿名数组列表，被插入到一个映射中（这绝对是可序列化的），在一个不可序列化的类中，这可能是问题吗？？？

像这样： map.put(new ArrayList(){{add(ect....}});

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T16:44:00.387

字段也必须是可序列化的。一个问题是嵌套类引用了它们的外部类。

```
 class NotSerializable {
     class Inner implements Serializable {
         // contains a reference to this$0, the outer instance
     }

 } 
```

即你有一个你可能不知道的领域。

简单的解决方案是使内部类`static`

# android - 适用于 android 的 Facebook SDK 不生成 R 类

> ID：10373870
> 
> 赞同：0
> 
> 时间：2012-04-29T16:37:50.727
> 
> 标签：android, facebook, resources, code-generation, android-resources

我已经下载了适用于 android 的 Facebook SDK，并将文件下载到我的工作区，并将 sdk 文件夹内的“facebook”文件夹作为现有的 android 项目导入。但不知何故，R 类拒绝生成，而且这个库根本没有 xml 资源！只是图片！我正在使用最新的 ADT 和 SDK 工具，我试图让它工作大约一个小时，这让我发疯。我试图清理该项目以及我在互联网上找到的所有其他解决方案。

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:38:38.080

我想我找到了答案。我离开了 facebook 并开始开发我的应用程序，当我尝试添加字符串资源时，R 类没有重新生成，所以我降级到 SDK Tools rev。18 并且它神奇地再次开始工作，包括 facebook SDK。

谷歌必须对她的 ADT 和 SDK 做点什么，它有很多让你发疯的错误，当你认为他们发布了一个新的 SDK/ADT 可以解决所有错误时，你会失望地发现它增加了更多的错误。这个错误几乎浪费了我一天的工作，这并不酷。

谢谢

# php - PHP - 关联数组 - 添加空白行

> ID：10373874
> 
> 赞同：0
> 
> 时间：2012-04-29T16:38:05.160
> 
> 标签：php, codeigniter-2, associative-array, foreach-loop-container

我正在尝试通过使用 CodeIgniter 从 DB 获取数据来构建动态 UI，但在构建数组时遇到问题。

**要求：**

获取数组中的父菜单项。然后获取每个父项对应的子项。

**获取父元素数据的代码::**

```
$data['menu'] = $this->Menu->get_admin_menu_data(); 
```

这给了我 3 条记录

```
echo  "before loop menu" . count($data['menu']) . "</br>"; //prints 3 
```

现在我为每个父项运行一个 foreach 循环来检索它的子项

```
foreach($data['menu'] as $menu){
   $data['menu']['menu_item'] =  $this->Menu->get_admin_menu_item_data($menu->ad_menu_id);
echo  "inside loop menu " . count($data['menu']) . "</br>"; //prints 4
} 
```

一旦我这样做，菜单的数量就会增加到 4，从而导致 UI 出现错误。我是 PHP 新手，所以现在确定创建结构来保存此类数据的最佳方法是什么。

请帮忙！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:08:38.253

如果`$data['menu']`包含**3 个键/值对**，但未`$data['menu']['menu_item']`设置，则您的语句

```
 $data['menu']['menu_item'] 
     =  $this->Menu->get_admin_menu_item_data($menu->ad_menu_id); 
```

设置这个。

因此`count( $data['menu'] )`之后返回 4 个元素 - 包括新添加的`'menu_item'`键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:07:32.753

我不知道 CodeIgniter，但是覆盖了一个静态变量

```
$data['menu']['menu_item'] = "someting" 
```

永远没有意义。你*真的*想把结果存储在哪里

```
$this->Menu->get_admin_menu_item_data($menu->ad_menu_id); 
```

? 您可以并且应该使用[var_dump](http://php.net/var_dump)检查变量的内容。

# cocoa-touch - UIImageViewController ...如何添加子视图？

> ID：10373879
> 
> 赞同：0
> 
> 时间：2012-04-29T16:38:52.447
> 
> 标签：cocoa-touch, uiview, uiimagepickercontroller, uiactivityindicatorview

我有一个实现委托方法的 UIImageViewController 对象：

```
- (void)imagePickerController:(UIImagePickerController *)picker 
        didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

在该委托方法中，我试图呈现一个 UIActivityIndi​​catorView 以提醒用户图像正在写入目录。我尝试了多种方法来访问视图并添加 UIActivityIndi​​cator 对象无济于事。

```
 activity = [[UIActivityIndicatorView alloc]
    initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    CGPoint ctr = CGPointMake(160, 240);
    activity.center = ctr;

    [picker.navigationController.visibleViewController.view addSubview:activity]; 
    [activity startAnimating]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:47:19.200

为什么不起作用`[picker.view addSubview:activity];`？如果你尝试这个会发生什么，因为你说你已经尝试过了。（无论多种方式意味着什么）

# windows-phone-7 - 允许从 Windows Phone 应用程序发布到 Twitter/Facebook/Skydrive 和其他人

> ID：10373880
> 
> 赞同：0
> 
> 时间：2012-04-29T16:39:05.947
> 
> 标签：windows-phone-7

有哪些框架可让您的 Windows Phone 应用程序：

*   直接发布到您的 Twitter 个人资料中
*   直接发布到您的 Facebook 状态
*   访问您的 SkyDrive 帐户

请说明框架的名称和源代码的链接，例如 Codeplex

对于 facebook，有这个[C# Facebook SDK](http://facebooksdk.codeplex.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:06:52.220

要在 Twitter 和/或 Facebook 上发帖，您可以简单地使用[ShareStatusTask](http://msdn.microsoft.com/en-us/library/hh394027%28v=vs.92%29.aspx)类（这将使用手机上已有的帐户）。要访问 SkyDrive 帐户，您可以使用[LiveSDK](http://msdn.microsoft.com/en-us/library/hh243641.aspx)。

# java - Java，Swing，获取和更改所有输入字段

> ID：10373881
> 
> 赞同：4
> 
> 时间：2012-04-29T16:39:08.770
> 
> 标签：java, swing, input, components, edit

我正在编写一个选项面板，为了在开发应用程序时能够更快地添加更多选项，我决定将所有输入的组件放在一个框架中，我需要从配置中加载它们的值并设置相应的text 但似乎无法从字段中获取组件的文本。我得到一个：
线程“AWT-EventQueue-0”中的异常 java.lang.RuntimeException：无法编译的源代码 - 错误的符号类型：java.awt.Component.setText
名称：服务器类：类 javax.swing.JTextField

```
private void loadConfigs() {
    List<Component>  compList = getAllComponents(this);
    System.out.println("Tamaño "+compList.size());
    for(int i=0; i<compList.size();i++) {
       if(compList.get(i).getName() != null) {
           System.out.println("Nombre: "+compList.get(i).getName() +" Clase:"+ compList.get(i).getClass().toString());
           if(compList.get(i).getClass().toString().matches("class javax.swing.JTextField")) {
               System.out.println("Machea load " +compList.get(i).getName() + compList.get(i).toString());
               compList.get(i).setText(rootFrame.config.get(compList.get(i).getName()));
           }
           else if(compList.get(i).getClass().toString().matches("class javax.swing.JCheckBox")) {
                if (rootFrame.config.get(compList.get(i).getName()) == null) {
                    compList.get(i).setSelected(false);
                }
                else {
                    compList.get(i).setSelected(true);
                }
           }
       }
    }
}
public static List<Component> getAllComponents(final Container c) {
    Component[] comps = c.getComponents();
    List<Component> compList = new ArrayList<Component>();
    for (Component comp : comps) {
        compList.add(comp);
        if (comp instanceof Container) {
            compList.addAll(getAllComponents((Container) comp));
        }
    }
    return compList;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-29T16:42:40.743

这里：

```
compList.get(i).setText(....) 
```

编译器仅将`compList.get(i)`其视为组件。要使用 JTextField 方法，您必须首先将其转换为 JTextField。

```
((JTextField)compList.get(i)).setText(....) 
```

不过，在我看来，您的计划似乎很笨拙且非常不符合 OOP。

也许您想创建一个`Map<String, JTextField>`并为该类提供一个公共方法，以获取与代表 JTextField 所代表内容的字符串关联的文本字段所持有的字符串。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T16:44:26.427

你应该使用这样的东西：

```
if(compList.get(i) instanceof JTextField) {
    JTextField field = (JTextField) compList.get(i);
    field.getText(); // etc
} 
```

而不是`getClass().toString`你一直在做的检查。

# c++-cli - 在标头中声明 unique_Ptr 变量，然后在构造函数中分配它的语法是什么？

> ID：10373883
> 
> 赞同：8
> 
> 时间：2012-04-29T16:40:09.813
> 
> 标签：c++-cli, unique-ptr

我编写了以下代码，对 c++ 很陌生，感觉很笨拙。我试图给'spriteBatch'（一个unique_Ptr）类范围。这是头文件：

```
 ref class CubeRenderer : public Direct3DBase
{
public:
    CubeRenderer();
    ~CubeRenderer();

private:

    std::unique_ptr<SpriteBatch> spriteBatch;

}; 
```

然后在 cpp 文件构造函数中，这个：

```
std::unique_ptr<SpriteBatch> sb(new SpriteBatch(m_d3dContext.Get()));
spriteBatch = std::move(sb); 
```

我必须创建'sb'并将其移动到'spriteBatch'的方式似乎很笨拙。尝试直接分配给“spriteBatch”失败（也许我根本不知道正确的语法）。有没有办法避免需要使用 'sb' & std::move？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T16:42:44.287

以下应该可以正常工作：

```
spriteBatch = std::unique_ptr<SpriteBatch>(new SpriteBatch(m_d3dContext.Get())); 
```

或者，您可以避免使用某些[`make_unique`功能](http://herbsutter.com/gotw/_102/)重复类型名称。

```
spriteBatch = make_unique<SpriteBatch>(m_d3dContext.Get()); 
```

还有[`reset`会员](http://en.cppreference.com/w/cpp/memory/unique_ptr/reset)：

```
spriteBatch.reset(new SpriteBatch(m_d3dContext.Get())); 
```

但是，既然你提到了构造函数，为什么不直接使用成员初始化列表呢？

```
CubeRenderer::CubeRenderer()
: spriteBatch(new SpriteBatch(m_d3dContext.Get())) {} 
```

# azure - Azure 表存储方法？

> ID：10373885
> 
> 赞同：1
> 
> 时间：2012-04-29T16:40:23.340
> 
> 标签：azure, asp.net-mvc-3-areas, azure-table-storage

我想将联系人存储到 Azure 表（名称和性别作为属性）。所以我基本上两班。一个从 TableSerivceContext 派生，另一个从 TableServiceEntity 派生。现在我无法连接碎片。我将在控制器上真正做什么（我使用 MVC3）

tnx 有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:43:23.157

这是我最近为创建一个非常简单的 MVC3 + Windows Azure Table 示例应用程序所做的：

1.  创建了一个继承自 TableServiceEntity 的模型类 DataEntity，其中包括与 PartitionKey 和 RowKey 一起存储所需的所有表属性
2.  创建了另一个模型类 DataContext 从 TableServiceConext 继承，其中包括 IQueryable 设置表
3.  创建了一个控制器类，该类创建 HTTPGet 和 HTTPPost 方法类型 ViewResult 返回视图。控制器也有代码首先使用 Model DataContext 类型创建表，然后添加代码以调用 AddObject 作为 DataEntity 类型，如下所示：

DataContext context = new DataContext(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials); context.AddObject("DataEntryTable", dataEntity); context.SaveChanges();

最后，您可以从控制器创建视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:37:31.570

我假设您从视图中通过帖子接收属性（姓名和性别）。
所以你的控制器可能是这样的

```
public ActionResult DoSomething(User model)
{

} 
```

所以你需要做的是......那个。为从 TableServiceEntity 派生的类创建一个新对象。并分配属性。像这样

```
var tableUser = new TableUser(){Name = model.Name, Gender=model.Gender} 
```

然后从派生自 TableServiceContext 的类中创建一个对象。并使用`AddObject()`方法将用户添加到表中
[http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.addobject.aspx](http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.addobject.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:42:57.963

下载[Windows Azure 平台培训工具包](http://www.microsoft.com/en-us/download/details.aspx?id=8396)并在 Windows Azure 存储上进行实验。在 15 分钟内，您将拥有一个工作原型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T19:28:01.230

您需要从 TableServiceEntity 继承“Contact”并从 TableServiceContext 继承上下文类，以提供管理“Contact”实体的所有方法。然后，您可以从任何地方（包括控制器）调用“上下文”类的方法。

我编写了一个备用 Azure 表存储客户端 Lucifure Stash，它无需从任何基本调用继承，并支持对 azure 表存储的额外抽象。Lucifure Stash 支持 > 64K 的大型数据列、数组和列表、枚举、复合键、开箱即用的序列化、用户定义的变形、公共和私有属性和字段等。它可在[http://www.lucifure.com](http://www.lucifure.com) 或通过 NuGet.com 免费供个人使用。

# javascript - 使用 OpenGraph 删除之前发布的文章，或检查该文章是否已被阅读

> ID：10373897
> 
> 赞同：2
> 
> 时间：2012-04-29T16:42:49.423
> 
> 标签：javascript, facebook-graph-api, facebook-opengraph

我创建了一个用于阅读文章的简单应用程序，它使用以下代码创建帖子：

```
 FB.api('/me/[NAMESPACE]:read&article=http://example.com/article.html','post', function(response) {

                 if (!response) { 
                      alert('Error Occurred I got no response with ' + $pageURL);
                 }
                 else if (response.error) {
                      alert('Error Occurred' + response.responseText + " " + response.error.responseText);
                 } else {
                     alert('Post was successful! Action ID: ' + response.id);
                     var idToDeleteLater = response.id;
                 }
         }); 
```

而且我希望能够检查该页面是否曾被访问过，因此我将能够禁止为同一篇文章进一步创建帖子。

但为了做到这一点，我需要获取文章 ID，而我无法使用 response.id 命令获取它，因为该命令只给了我单个帖子的 ID。

我不想使用给定的方法：

```
 function postUnreadSpecific()
  {
  var postId = idToDeleteLater;

  FB.api(postId, 'delete', function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('Post was deleted');
  }
}); 
```

因为阅读是通过按钮完成的（与烹饪教程中的相同），所以每当我按下按钮时，都会创建具有不同 ID 的新帖子，我显然不想手动输入它们。

因此，底线是，如何获取页面 ID（而不是带有 response.id 的帖子 ID），并进行检查，如果之前访问过该页面，则禁用新帖子的创建......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:13:23.067

Facebook Open Graph 操作可以选择是唯一的。此设置位于隐藏在“高级设置”链接下的“配置故事附件”下的动作创建页面上。在那里，您会找到一个名为“唯一操作”的切换开关，可以将其设置为“仅允许一次”。这确保了每个用户只有一个“动作-对象”对。

请注意，您需要在设置操作时执行此操作，因为操作在获得批准后无法编辑。

[![示例操作](../Images/d803e3f670343a4f4f9636476eda9c64.png)](https://i.stack.imgur.com/eJmXh.png)

# ruby-on-rails - Apache主页重定向

> ID：10373898
> 
> 赞同：1
> 
> 时间：2012-04-29T16:42:58.967
> 
> 标签：ruby-on-rails, apache

[大家好，我最近从这里https://github.com/barmstrong/ribbot](https://github.com/barmstrong/ribbot)下载了一个名为 ribbot 的开源代码。我已经让它运行 lcoally 并试图在 apache linux 基础服务器上发布它。

我在 stories.rayku.com 上安装了它，但每次我访问 URL 时，它都会将我重定向到 rayku.com/forums（应该是 stories.rayku.com）。你知道我该如何解决这个问题吗？这是我的 apache 配置文件中的内容：

```
<VirtualHost 69.167.183.165:80>
  ServerName stories.rayku.com
  ProxyPass / http://localhost:8080/
</VirtualHost> 
```

当我访问 IP 地址[http://69.167.183.165:8080](http://69.167.183.165:8080)时它工作正常，并在我访问 stories.rayku.com 时重定向到 rayku.com/forums

谢谢！

# jquery - Jquery Cookie/计时器问题

> ID：10373901
> 
> 赞同：0
> 
> 时间：2012-04-29T16:43:33.600
> 
> 标签：jquery, asp.net, cookies, timer

我正在构建一个考试模拟器，它从 10 分钟开始倒计时，当它到达 00:00 时，考试问题被隐藏，并且显示一个 div，上面写着“你的时间”，但是如果我在浏览器上单击刷新，它会回到 10:00但我想要它做的是再次显示 out of time div ！我在下面玩了我的jquery，但我看不出我哪里出错了，计时器存储在cookie中，所以如果用户在考试中的任何给定时间按下f5，cookie就会从用户按下f5开始倒计时！所以我的问题是，如果时间是 00:00，有人可以帮我修改下面的 JQuery 以显示超时的 div，即使用户刷新了浏览器，它也仍然显示。

 `````
 $(function () {
                $('.clock').each(function () {
                    var clock = $(this),
                    theTime = $.cookie('time'),
                    seconds = "00", minutes = 10;
                    if (theTime && theTime != "0:00") {
                        theTime = theTime.split(":")
                        minutes = theTime[0]
                        seconds = theTime[1]
                    }
                    $('.min', clock).text(minutes)
                    $('.sec', clock).text(seconds)
                    var timer = setInterval(function () {
                        var m = $('.min', clock), minutes = +m.text(),
                            s = $('.sec', clock), seconds = -1 + +s.text()
                        if (seconds < 0) {
                            seconds = 59
                            minutes--
                        } else if (minutes <= 0 && seconds <= 0) {
                            clock.html('Timer Complete.');
                            clearInterval(timer);
                            $.cookie('time', '', { expires: -1 })
                            $('#feedbackform').hide();
                            $('#MainContent_DivOutOfTime').toggle();
                            return;
                        }
                        seconds = seconds < 10 ? '0' + seconds : seconds
                        m.text(minutes)
                        s.text(seconds)
                        $.cookie('time', minutes + ":" + seconds, { expires: -1 })
                    },
                1000);
                });
            }); 
````  `Iv 尝试从代码中删除以下内容

 `````
 if (seconds < 0) {
   seconds = 59
   minutes--
 } else 
````  `这样它会检查时间，然后显示 div 但无济于事！我还删除了 clearInterval ...任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:49:23.347

这条线不会清除 cookie 吗？尝试删除它。

```
$.cookie('time', '', { expires: -1 }) 
```````

# php - PHP/MySQL - 无法插入数据库

> ID：10373907
> 
> 赞同：0
> 
> 时间：2012-04-29T16:44:12.787
> 
> 标签：php, mysql, syntax

几天前我发布了，我无法在我设置的 MySQL 数据库中插入额外的记录。我更正了语法，但数据库不会再次更新。基本上，我有几个 HTML 表单，它们将会话传递到下一页，直到 PHP 在最后一页上处理以插入数据库。它工作了两次（我现在在数据库中有 2 条记录），但它不会插入任何额外的记录。几天前它工作得很好。我对任何内容所做的唯一更改是我添加了一个搜索功能，该功能可以使用相同的用户访问相同的数据库，但连接也会在该脚本的末尾关闭。这是我用来插入数据库的代码（我知道这不是最好的编码工作，我还在学习）。

```
<?php

$con = mysql_connect("localhost","my_username","mypassword");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("dgibbo1_imaging", $con);

// Here too, please mysql_real_escape_string() all parameters 
mysql_query("INSERT INTO imaging (os,MAC,Model,AntiVirus,Browser,Email,Connectivity,Sound,Ports) VALUES ('".$_SESSION['imaging2']."','".$_SESSION['imaging3']."','".$_SESSION['imaging4']."','".$_SESSION['antivirus']."','".$_SESSION['browser']."','".$_SESSION['email']."','".$_SESSION['connectivity']."','".$_SESSION['sound']."','".$_SESSION['ports']."')");
    OR die("Could not update: ".mysql_error());

mysql_close($con);
?> 
```

数据库的名称是imaging。这些列设置为： id（这是主键字段） os MAC Model AntiVirus Browser Email Connectivity Sound Ports

我只是觉得奇怪，它插入记录没有任何问题，直到我今天再次尝试。是否可能与我的搜索代码有关？

搜索是另一个页面上的简单表单并处理此表单：

```
<?php

$con = mysql_connect("localhost","my_user","mypassword");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("dgibbo1_imaging", $con);

// Always escape parameters injected into SQL queries
$result = mysql_query( "SELECT * FROM imaging WHERE MAC LIKE '%" 
                     . mysql_real_escape_string ( $search, $con ) 
                     . "%'"
                     );

echo "<table border='1'>
<tr>
<th>MAC</th>
<th>Model</th>
<th>AntiVirus</th>
<th>Email</th>
<th>Browser</th>
<th>Connectivity</th>
<th>Sound</th>
<th>Ports</th>
</tr>";

while($row = mysql_fetch_array($result)) {

  echo "<tr>";
  echo "<td>" . $row['MAC'] . "</td>";
  echo "<td>" . $row['Model'] . "</td>";
  echo "<td>" . $row['AntiVirus'] . "</td>";
  echo "<td>" . $row['Email'] . "</td>";
  echo "<td>" . $row['Browser'] . "</td>";
  echo "<td>" . $row['Connectivity'] . "</td>";
  echo "<td>" . $row['Sound'] . "</td>";
  echo "<td>" . $row['Ports'] . "</td>";
  echo "</tr>";

  }

echo "</table>";

mysql_close($con);
?> 
```

同时，搜索每次都会成功提取2条现有记录，但我无法添加新记录，我想知道它是否与此有关。

感谢您的任何建议。我知道我的语法可能不是最好的，所以总是感谢这个网站的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:01:07.257

我看到了你的帖子，一切看起来都“正确”。我的建议是添加一些日志记录而不是 DIE 并查看 MySQL 对这些插入语句的看法：

```
$sql = "INSERT INTO imaging ....";
mysql_query($sql);
if(mysql_errno()) {
    $message  = mysql_error() . "\n" . $sql . "\n";
    $fp = fopen('c:\mylogifle.txt', 'a');
    fwrite($fp, $message);
    fclose($fp);
} 
```

并且...正如每个人都提到的，对这些字符串进行编码 - 假设 SQL 正在实际执行，并且您“知道”它有效，那么其中一个值中的某些标点符号很可能会干扰 SQL，例如一个意外的逗号让 MySQL 感到困惑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:48:49.840

尝试创建一个单独的 php 文件并将值硬编码到其中。运行它，看看会发生什么。您的搜索表单不应干扰其他表单。

**使用表单时**编辑任何错误？**插入另一个表时有什么错误吗？**

# performance - 将代码放在单独的函数中怎么可能提高性能？

> ID：10373908
> 
> 赞同：4
> 
> 时间：2012-04-29T16:44:24.193
> 
> 标签：performance, actionscript-3, flash-builder

我正在优化一个稍微大一点的函数（大约 80 行没有注释的代码）。

作为尝试让分析器为我完成工作的一部分，我取了 2 块代码并将它们放在单独的函数中（这应该只是暂时的，直到我可以将它们放回原处）。

有趣的是：我的测试用例花了 29.8 秒
将第一个块放入单独的函数后，我看到由于函数调用开销导致的小的性能损失。（30.2 秒）当我将第二段代码放入一个单独的函数中时，我获得了相当大的性能提升，降至 24.2 秒

第二段代码是插入一个相当大的链表，我打算用二叉树或其他东西替换它，但是这 20% 的改进仍然让我很困惑。

**tl;dr：尝试优化代码并注意到将代码块放入单独的函数中使我的性能提高了 20%。这怎么可能？**

编辑：确认也在发布版本中运行

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T16:56:30.063

通过提取此代码块，您使函数更简单。也许这有助于编译器有效地编译函数。它可能减轻了注册压力，因为局部变量较少。

有时，这只是巧合。**随机晃动代码很可能会改变性能（两种方式）。**也许你只是碰巧取得了进步而不是恶化。

**为什么“摇晃”会改变性能？**它可能会改变地址对齐、分支预测、编译器对什么是热什么是冷的看法、CPU 指令缓存的使用。

从语义的角度来看，所有这些都是实现细节。然而，它们会影响性能。它们是非常不可预测的，因为它们在非常低的级别上工作并且非常复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:28:12.107

没有代码示例，很难给出一个体面的解释，但 usr 的答案在大多数编程语言的情况下是非常正确的。

但是，对于 Flash 编译器，我确实有所保留。根据经验，自内联（与您所做的相反）通常是优化闪存中函数的最佳方法之一，因为函数调用开销非常高。

话虽如此，我同意 usr 的观点，即具有较少的局部变量很可能是您会看到性能提升的原因。Flash 没有块级作用域，这意味着函数中声明的所有变量在调用函数时都会分配内存。如果您的第二个代码块声明了仅在该特定代码块中有用的变量，并且该代码仅有时运行（如果它在 if 语句中），则可以解释性能提升。

您可以看到性能提升的示例：

```
public function foo() : void
{
    var bar : MyObj;
    //do stuff with bar

    if(someValuesAreTrue)
    {
        var jad  : oObj;
        var jad2 : oObj;
        //etc
        //do something with jad
    }
}

//changed to 
public function foo() : void
{
    var bar : MyObj;
    //do stuff with bar

    if(someValuesAreTrue)
    {
        subFunc();
    }
}
private function subFunc() : void
{
    var jad  : oObj;
    var jad2 : oObj;
    //etc
    //do something with jad
} 
```

如果这不是您所处的情况，我会非常好奇地看到一些代码，因为它可以更好地了解自内联的其他性能提升替代方案。

# objective-c - 如何在iOS中计算两个日期之间的分钟时差

> ID：10373911
> 
> 赞同：11
> 
> 时间：2012-04-29T16:44:31.150
> 
> 标签：objective-c, ios, nsdate

> **可能重复：**
> [如何计算 iOS 中两个日期之间的时间（以小时为单位）](https://stackoverflow.com/questions/4084341/how-to-calculate-time-in-hours-between-two-dates-in-ios)

我是 Objective-C 的初学者，所以我需要你在语法制作方面的帮助。

我的问题是这样的：

我有 2 个字符串，我想将其转换为`NSDate`然后计算日期之间的时间差（以分钟为单位）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-29T16:58:08.677

1.  用于`NSDateFormatter`将日期字符串转换为`NSDate`对象。
2.  调用`-[NSDate timeIntervalSinceDate:]`以秒为单位获取两个日期之间的差异。
3.  除以 60 得到以分钟为单位的差异。

或者，您可以使用`NSCalendar`和`NSDateComponents`方法计算不同日历的分钟差`components:fromDate:toDate:options:`。

# javascript - jQuery keyup - 不可见的第二个输入

> ID：10373916
> 
> 赞同：0
> 
> 时间：2012-04-29T16:44:49.153
> 
> 标签：javascript, jquery, html, numbers, keyup

HTML：

```
<div id="block">
<input type="text" value="1" id="number" />
<div id="price"></div>
</div>
<div id="block">
<input type="text" value="1" id="number" />
<div id="price"></div>
</div> 
```

jQuery：

```
<script type="text/javascript">
    $(function() {
        $("#number").keyup(function () {
          var value = $(this).val()*5;
          $("#price").text(value);
        }).keyup();
    });
</script> 
```

最初只显示价格。为什么？

如何正确制作？块可以是无穷无尽的。

更新：

制作：

```
var id = 1;
$('.number').each(function() { 
    $(this).attr('id', 'id_' + id++); 
}); 
```

它是如何关联的？块可以是无穷无尽的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:59:10.687

我建议使用以下内容：

```
$('input:text.number').keyup(
    function() {
        var v = parseFloat($(this).val()),
            s = v*5;
        $(this).next('.price').text(s);
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/rsXGF/)。

jQuery`onkeyup`获取 的当前用户输入的值，`input`对其进行解析以确保它是一个数字，然后`.price`使用计算出的数字更新与文本输入的提供的选择器 ( ) 匹配的下一个兄弟元素。

以上使用更正且现在有效的 HTML：

```
<div class="block">
    <input type="text" value="1" class="number" />
    <div class="price"></div>
</div>
<div class="block">
    <input type="text" value="1" class="number" />
    <div class="price"></div>
</div>​ 
```

参考：

*   [`next()`](http://api.jquery.com/next/).
*   [`parseFloat()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat).
*   [`text()`](http://api.jquery.com/text/).
*   [`:text`选择器](http://api.jquery.com/text-selector/)。
*   [`val()`](http://api.jquery.com/val/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T16:50:02.290

您的代码正在搜索`id = price`您的 html 将价格作为类的位置。

基本上代替

```
$("#price").text(value); 
```

你应该使用

```
$(".price").text(value); 
```

`#`用于id选择器，`.`用于类选择器

更新：

根据编辑的代码：

在您的 html 中有两个具有相同 id 的 div，而每个元素都应该有一个唯一的 id。请将元素的 id 更改为唯一的可能是 price1, price2 然后使用

`jQuery('#price1').text(value)`或`jQuery('#price2').text(value)`根据您的情况

# c++ - 将中值剪切颜色减少算法的输出调色板应用于源图像

> ID：10373917
> 
> 赞同：4
> 
> 时间：2012-04-29T16:44:51.170
> 
> 标签：c++, image, qt, color-palette, quantization

所以我开始研究应用于图像的“简单”颜色减少。我花了最后一天研究它是如何工作的，并设法在这里找到似乎是一个不错的算法来试验：[中值切割算法](http://en.literateprograms.org/Median_cut_algorithm_%28C_Plus_Plus%29)

这里的输出是 n 种颜色的调色板。我还没有确保这个算法确实有效，但我假设它确实有效。我想做的是获取该输出并将其应用于生成调色板的图像。

我不能说我精通颜色压缩格式和图像方面的所有深入知识，但我想知道如何应用调色板而不必从带有索引调色板的图像格式开始（即 GIF）。

我在想，对于每个像素，我计算当前像素的颜色与调色板中每种颜色之间的差异，并将该像素替换为差异最小的调色板颜色。这是一种可行的方法吗？

注意 - 我查看了各种库（ImageMagick），但这些似乎有点过分；我对图像处理所做的最多的事情就是减少调色板——没有比这更复杂的了。这就是为什么我认为实现这个算法将是满足我需求的最简单方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-07T03:37:40.500

最快的方法是使用八叉树进行颜色查找。

想法是将所有调色板颜色索引添加到八进制树，然后向根节点询问最接近的颜色。当询问最接近的颜色时，如果每个节点（可以访问调色板）处于最深级别，则返回其自己的颜色索引，或者向相应的子节点（请求的颜色）询问其最接近的颜色索引。如果没有对应的孩子，它会向所有孩子询问最近的颜色索引，并返回颜色距离最小的那个。

基本上，八叉树将大大减少需要进行的距离比较的次数。这可以通过预先计算所有距离来加速。

这是我的实现... [http://www.codeproject.com/Tips/1046574/OctTree-Based-Nearest-Color-Search](http://www.codeproject.com/Tips/1046574/OctTree-Based-Nearest-Color-Search)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:26:16.637

我认为这是一种可行的方式。您计算的差异应该是[此处](http://en.wikipedia.org/wiki/Color_quantization)显示的欧几里得差异 但是您可以进行一些优化。您不需要每次都计算新的差异。例如，如果您已经计算过了，您可以填充查找表以便直接使用正确的颜色

# android - 获取从 android/iphone 到服务器的准确时间

> ID：10373918
> 
> 赞同：3
> 
> 时间：2012-04-29T16:44:51.493
> 
> 标签：android, iphone, gps, timestamp

我们有一个正在开发的 android（或 iphone）客户端。客户端允许 android 用户将条目发送到我们也开发的服务器。如果客户端在用户将条目发送到服务器的那一刻没有数据服务（GPRS），客户端还支持将条目保存到离线数据库并稍后将其发送到服务器。

整个过程的一个重要方面是用户将条目发送到服务器的时间戳的准确性（无论条目是实时生成的还是由客户端从离线数据库发送的）

当客户端可用时，我们获得 GPS 位置，并能够使用 GPS 时间戳将其发送到服务器（或将 GPS 时间戳保存在离线数据库中，稍后再发送到服务器）。但是，如果用户关闭了 GPS（和所有其他定位服务），则设备将没有 GPS 定位，因此服务器无法准确确定何时进行了输入。我们不能使用本地设备时钟，因为用户可能会更改时钟以在与实际发生时间不同的时间进行条目（这些条目是用户工资的一部分，因此他可能有兴趣“修复”它们）。

所以基本上我正在寻找一种方法来尽可能地确定当我不能信任手机的内部时钟时进行某些输入的时间。该算法应该支持实时发送的条目或从离线数据库发送的条目。该算法还应支持用户更改手机时间、打开/关闭手机、在手机上运行应用程序时打开/关闭 GPS 等情况。

我想到的几个想法：

1.  虽然我不能相信手机的时间，但它仍然可以充当秒表：有一个循环直到应用程序存在的类，循环将休眠 1 秒并将内部时钟变量增加 1 秒。在我的代码获取的每个 GPS 位置上，我们都会更新内部时钟变量。这样我就有了一个来自设备外部（来自 GPS）的绝对时钟，当客户端向服务器发送条目时，我们可以使用内部时钟作为绝对时间。

优点：用户不能修改这个时钟，因为它只有在我们从 GPS 获得位置时才会更新

缺点：应用程序需要至少一个 GPS 定位，然后用户才能进行任何可靠的输入

1.  我可以利用服务器有一个准确的时钟这一事实。如果客户端将向服务器发送条目的年龄为 10 分钟的信息，则服务器可以使用其内部时间并知道条目的确切时间。

最大的问题是如何知道入职年龄？我考虑将条目保存到年龄为 0 的离线数据库中，然后每 1 秒增加数据库中条目的年龄。问题是，如果应用程序关闭和/或设备关闭，现在会发生这种情况

这是我目前卡住的地方。任何关于如何解决这个问题的想法都非常受欢迎

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:35:28.653

我想我会将 Jules 和 Joel 的答案结合到一个解决方案中，这将为我的需求提供最佳解决方案：由于用户可能会在手机没有 GPRS 时更改时钟，因此仅检测时间更改事件对我们没有帮助我们当时无法验证新时间是否正确。

正如 Joel 建议的那样，当我的应用程序启动时，我将从我的服务器中提取时间（此时我仍然必须与服务器进行通信，否则我的应用程序将无法启动）。从服务器提取的时间以及当前设备的 upTime 将被保存。

当用户想要输入时，我将使用 (Server Base Time + Current UpTime - Base UpTime) 计算当前时间。这样，无论设备的当前时钟如何，我都将拥有独立的时间源

这肯定适用于android

在 iPhone 上，我们将尝试使用[http://www.cocoadev.com/index.pl?FindingUptime](http://www.cocoadev.com/index.pl?FindingUptime)中的内容来获取 upTime

朱尔斯和乔尔，谢谢你的回答！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T18:03:05.343

这是我为 iPhone 处理此问题的方法。当应用程序启动时，我打电话给我的服务器并询问当前的 GMT 时间（如果你愿意，你也可以调用公共 NTP 服务器）。然后我将它与系统时间进行比较。如果它的差异超过 X，那么我会弹出一条消息，说对不起，您的系统时间错误，因此您在修复此问题之前无法使用该应用程序。然后我监视用户在应用程序运行时更改系统时间，如果他们这样做，然后我再次进行比较（如果时间超过 X，则弹出错误消息）。这可以确保他们的系统时间始终正确（在一些合理的允许范围内）并且您可以信任 [NSDate date]。但是，此解决方案确实需要有效的网络连接。如果此解决方案适合您，我可以发布示例代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T16:47:36.300

查看 android.os.SystemClock。具体来说，elapsedRealtime() 返回手机开机后的时间，如果用户更改时钟，则不会影响该时间。

您可以通过在手机打开时运行代码并检查实时时钟来关联手机关闭时的时间。由于手机关闭时无法更改时钟，我怀疑您可以使用它来构建一个系统，该系统将捕获任何简单的作弊尝试。（如果用户扎根手机，所有的赌注都没有了——他们可以从你下面修改 API 的行为）。

每秒运行代码会缩短手机的电池寿命。如果你这样做，大多数手机都不太可能持续一天。

# timestamp - Mahout：时间戳如何影响推荐

> ID：10373919
> 
> 赞同：1
> 
> 时间：2012-04-29T16:44:56.063
> 
> 标签：timestamp, mahout, mahout-recommender

在使用 Apache Mahout 构建建议时，我注意到可以将时间戳添加到[DataModel](https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/cf/taste/model/DataModel.html)（例如[FileDataModel](https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/cf/taste/impl/model/file/FileDataModel.html)或[PostgreSQLJDBCDataModel](https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/cf/taste/impl/model/jdbc/PostgreSQLJDBCDataModel.html#PostgreSQLJDBCDataModel%28javax.sql.DataSource,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)）。

这个值是否在内部用于改进建议（可能是体重偏好）？还是只是手动获取时间戳并进行一些自己的计算？如果它仅供自己使用，它如何影响大规模的性能/内存使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T18:11:05.310

提供的实现都没有使用它，但您可以编写一个使用它。

# c# - 在 .NET 套接字中启用加密

> ID：10373920
> 
> 赞同：2
> 
> 时间：2012-04-29T16:44:57.063
> 
> 标签：c#, sockets, encryption

我是 C# 开发的新手。

在 PHP 中，我们使用

```
stream_socket_enable_crypto($fp, true, STREAM_CRYPTO_METHOD_TLS_CLIENT); 
```

它在 C# 中的等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T20:25:05.973

[SSLStream](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)似乎做你想做的事

```
var tcp = new TcpClient(machineName,443);
var ssl = new SslStream(tcp.GetStream); 
```

您可以指定一个回调来进行认证验证。否则，它似乎默认为系统的策略（我相信这也是 IE 默认使用的）

# html - HTML & CSS 表单样式

> ID：10373923
> 
> 赞同：0
> 
> 时间：2012-04-29T16:45:10.870
> 
> 标签：html, css, forms, label

> **可能重复：**
> [是否可以在 CSS 中选择具有特定内容或属性的元素？](https://stackoverflow.com/questions/3107648/is-it-possible-to-select-element-with-specific-content-or-attribute-in-css)

基本上，我可以访问我需要设置样式的第三方表单的 css，并且元素没有 ID，所以我不确定如何使用 css 设置样式，因为我不能使用它的类这里是表单代码：

```
 <label class="form_label" for="example" style="">email</label> 
```

怎么可能设置这个样式，所以它只适用于那些 for 属性等于 example 的？

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T16:46:55.987

您可以像这样选择每个标签，并根据需要设置样式：

```
label[for="example"] {
    color: #5c5c5c;
} 
```

# python - 谷歌应用中的文件夹

> ID：10373924
> 
> 赞同：0
> 
> 时间：2012-04-29T16:45:14.160
> 
> 标签：python, google-app-engine

我是 python 新手，这个问题是关于访问根目录内的文件夹。

使用此 url `http://localhost:8080/`，我可以访问应用程序的根文件夹。但是，如果我在其中创建一个子文件夹，`engineapp`我如何通过 url 访问它？

就我而言，我正在尝试`http://localhost/folder:8080`，但显然这不起作用。这样做的正确方法是什么？

我应该将`app.yaml`and`index.yaml`从复制`engineapp`到新的子文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:52:05.817

您需要将[路径映射到句柄](https://developers.google.com/appengine/docs/python/tools/webapp/running)r 或[静态处理程序](https://developers.google.com/appengine/docs/python/gettingstarted/staticfiles)。
处理程序用于使用代码生成内容，而静态处理程序用于静态内容（如脚本、图像、css 等）。

# symfony1 - sfWidgetFormDoctrineChoiceGrouped 渲染

> ID：10373925
> 
> 赞同：0
> 
> 时间：2012-04-29T16:45:25.687
> 
> 标签：symfony1, symfony-1.4, symfony-plugins

对于我的类别表：

```
Categorie:
  actAs:  
    Timestampable: ~ 
    Sluggable:
      fields: [nom]
    NestedSet: ~
  columns:
    parent_id: { type: integer(8), notnull: false}
    nom:        { type: string(255), notnull: true, unique: true }
  relations:
    CategorieParent:    { onDelete: SET NULL, local: parent_id, class: Categorie, foreign: id, foreignAlias: CategorieEnfants} 
```

我已经用这个配置向我的表单添加了一个 sfWidgetFormDoctrineChoiceGrouped：

```
'categorie'     => new sfWidgetFormDoctrineChoiceGrouped(
                        array(
                            'group_by' => 'parent',
                            'order_by' => array('parent_id',''),
                            'model' => 'Categorie', 
                            'multiple' => true,
                            'method' => 'getNom',
                            )), 
```

在我想要的渲染中

```
Categoire with no parent 1
  - child categroie
  - child categorie..

Categoire with no parent 2
  - child categroie
  - child categorie.. 
```

但就我而言，我有一个渲染：

```
Categoire with no parent 1
Categoire with no parent 2
Categoire with no parent 3
Categoire with no parent 1
  - child categroie
  - child categorie.. 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:12:23.477

您的选择有一些错误：

```
'group_by' => 'CategorieParent',
'order_by' => array('parent_id','ASC'), 
```

`group_by`必须是*用于分组的关系的名称*。我认为您也可以使用`parent_id`该`group_by`选项。

# testing - VHDL textio读取文件调试

> ID：10373926
> 
> 赞同：0
> 
> 时间：2012-04-29T16:45:31.167
> 
> 标签：testing, text, vhdl

我在调试这个程序时遇到了一些麻烦。我被分配从文本文件中读取测试向量来测试程序。程序和测试台代码写在下面。我无法弄清楚为什么我的模拟会出现空白。没有错误，模拟窗口出现，但它是空白的。知道问题可能是什么吗？

模块：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

entity PAR is
Port ( data : in  STD_LOGIC_VECTOR (3 downto 0);
       parity : out  STD_LOGIC);
end PAR;

architecture Behavioral of PAR is
begin
proc: process
variable count: bit;
begin
for i in data'range loop
    if data(i)='1' then
        count:=not count;
    end if;
end loop;
if count='0' then
    parity<='0';
else 
    parity<='1';
end if;
wait;
end process;

end Behavioral; 
```

试验台：

```
LIBRARY ieee;
USE ieee.std_logic_1164.ALL;
USE std.textio.all;
use ieee.std_logic_textio.all;

ENTITY PAR_test IS
END PAR_test;

ARCHITECTURE behavior OF PAR_test IS 

    -- Component Declaration for the Unit Under Test (UUT)

    COMPONENT PAR
    PORT(
         data : IN  std_logic_vector(3 downto 0);
         parity : OUT  std_logic
        );
    END COMPONENT;

   --Inputs
   signal data : std_logic_vector(3 downto 0) := (others => '0');

    --Outputs
   signal parity : std_logic;
   -- No clocks detected in port list. Replace <clock> below with 
   -- appropriate port name 

BEGIN

    -- Instantiate the Unit Under Test (UUT)
   uut: PAR PORT MAP (
          data => data,
          parity => parity
        );

   TB: process
        file vec_file: text;
        variable buf_in: line;
        variable testv: std_logic_vector(0 to 4);
        begin
            file_open(vec_file,"PAR_file.txt,", read_mode);
        while not endfile (vec_file) loop
            readline (vec_file, buf_in);
            read(buf_in,testv);
            data(3) <= testv(0);
            data(2) <= testv(1);
            data(1) <= testv(2);
            data(0) <= testv(3);
            wait for 10 ns;
            assert (parity=testv(4))
                report "Test Failed" severity error;
        end loop;
    wait;
    END process;
    end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:05:28.983

在您的“file_open..”行中，您有一个不需要的“，”

错误是：

```
file_open(vec_file,"PAR_file.txt,", read_mode); 
```

正确的是：

```
file_open(vec_file,"PAR_file.txt", read_mode); 
```

# jquery - JSON：我如何将数组制作成多个数组？

> ID：10373927
> 
> 赞同：0
> 
> 时间：2012-04-29T16:45:35.347
> 
> 标签：jquery, json, each

我从具有 200 个 ID 的 PHP 文件返回一个 JSON 数组。（身份证号）。我只想有 18 个这些 ID，这样我只将 18 个 ID 发送到一个新的 PHP 文件，然后在 2 秒后，我想将 JSON 的下一个 18 个 ID 也发送到新的 PHP 文件，直到那里JSON 数组中不再有要发送的 ID。

```
 $.get('get.php?randomize=1', function(data) {

        var json = data;

        $("#wallpaper").load('get_random.php?json_18=' + encodeURI(data), hideLoader());    

    }); 
```

如您所见，我已将 JSON 存储在一个名为 json 的变量中。但我不知道如何为每个 18 个 ID 拆分它。我已经阅读了 jQuery 中的 .each 函数，但我不太了解。我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T16:53:39.590

[http://jsfiddle.net/2bZHP/4/](http://jsfiddle.net/2bZHP/4/)：

```
var data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
var spliceAt= 5;
var trigger = setTimeout(function() {
  var toSend;
  if(data.length>spliceAt)
  {
        var left= data.slice(0,spliceAt);
        var right = data.slice(spliceAt);
        data = right;
        toSend = left;
        setTimeout(arguments.callee, 2000);
  }
  else
  {
      toSend = data;
  }
  //$("#wallpaper").load('get_random.php?json_18=' + encodeURI(toSend), hideLoader());
  alert(toSend);
}, 2000);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:03:17.350

```
$.get('get.php?randomize=1', function(data) {

   var json = data;
   for(i=0;i<n;i++)
   {
      setTimeout("$('#wallpaper').load('get_random.php?json_18=' + encodeURI(json.slice(i*18,(i*18)+18)), hideLoader());", i*20);
   }    

}); 
```

& 检查一下，可能 setTimeout 的语法有一些错误，没有检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T17:03:26.633

来自[jQuery 文档](http://api.jquery.com/jQuery.each/)：

```
$.each([52, 97], function(index, value) { 
  alert(index + ': ' + value); 
}); 
```

将会呈现：

```
0: 52
1: 97 
```

因此，该函数遍历每个元素，并对每个元素应用一个函数，传递数组中的项目索引和项目本身。

您可以通过这种方式使用 slice() 函数：

```
var taken = 0, step = 18;
var subset18;
while (taken < json.length) {
    subset18 = json.slice(taken, taken + step);
    taken += step;
    // do something with subset18
} 
```

[http://www.w3schools.com/jsref/jsref_slice_array.asp](http://www.w3schools.com/jsref/jsref_slice_array.asp)

# x11 - 如何从窗口管理器中检索特定窗口的信息？

> ID：10373929
> 
> 赞同：0
> 
> 时间：2012-04-29T16:45:38.170
> 
> 标签：x11

使用 X11，我如何确定特定进程打开的窗口的位置和大小，最好是通过一些 C 或 C++ 库？正在使用的特定窗口管理器是`KWin`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:27:05.217

`xdotool`是一个 x11 自动化实用程序和库。

xdotool 搜索 --pid

如果窗口管理器在窗口管理器提示中提供此信息，则应该让您获得与特定进程相关联的窗口标识符列表。WMs 之类的`Kwin`或`metacity`做的。

`xdotool`提供可通过编程方式使用的 API。

# extjs - 设置extJs htmleditor的属性

> ID：10373933
> 
> 赞同：0
> 
> 时间：2012-04-29T16:46:17.143
> 
> 标签：extjs, html-editor

我有一个文本框，上面写着一些文字。现在，当有人在文本框内单击时，我打开一个 html 编辑器（[http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.HtmlEditor](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.HtmlEditor)），现在我想将写在文本框中的文本放入 html 编辑器中，以便用户可以轻松编辑并保存它。同样，当我打开 html 编辑器时，我想更新颜色框内的值以及 html 编辑器中的字体大小和字体值。假设我可以从文本框中获取这些值。我尝试用谷歌搜索它，但找不到如何做到这一点。

```
 Ext.QuickTips.init();  // enable tooltips
    new Ext.Panel({
    renderTo: 'text-editor',
    id: 'html-editor',
    width: 440,
    height: 100,
    frame: true,
    layout: 'fit',
    items: [
        {
            xtype: 'htmleditor',
            enableColors: true,
            enableAlignments: true
        }
    ]
});

    $('#selected-text-box').click(function() {
    showEditor(this.id);
    //TODO: Write code here to set the properties of editor with the properties set in textbox
}); 
```

现在，我只想问。如何访问 html 编辑器的字段并设置它们的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:53:36.500

试试这个，我会工作，但关于字体大小我不知道

```
var Content = $('#' + textBoxId).html();
editor.setValue(Content); 
```

我试过这个。有用 ：）

# jquery - LavaLamp--在为多个页面使用模板时设置“当前”

> ID：10373934
> 
> 赞同：0
> 
> 时间：2012-04-29T16:46:28.783
> 
> 标签：jquery, lavalamp

我在我们网站（主页、博客、论坛、画廊、教程和常见问题解答）中的几个页面或我们的页面上使用 vBulletin，目前正在使用 lavalamp (http://www.gmarwaha.com/blog/2007/08/23/lavalamp -for-jquery-情人/）。

几周以来，我一直在尝试弄清楚如何根据您所在的页面动态设置“当前”类，但没有成功。下面是我失败的尝试的几个例子——我已经验证了代码的工作原理，在那里，我能够得到正确的 li.. 但是 addClass 或 removeClass 不起作用。我尝试使用菜单的 ID 作为选择器，将脚本放置在几个不同的位置，使其成为一个函数并使用 lavalamp 初始化代码调用该函数......任何帮助将不胜感激！

**第一次尝试：**

```
<!--BEGIN LAVA MENU-->
    <ul class="lavaLamp" id="lavaMM">
        <li><a href="/">Home</a></li>
        <li><a href="/market/">Market</a></li>
        <li><a href="/content.php/475-the-daily-buzz">Blog</a></li>
        <li><a href="/forum/forum.php">Forum</a></li>
        <li><a href="/gallery/">Gallery</a></li>
        <li><a href="/forum/forumdisplay.php/439-Scrap-Orchard-University">Tutorials</a></li>
        <li><a href="/staff/">Staff</a></li>
        <li><a href="/forum/faq.php">FAQ</a></li>
        <li><a href="/market/support/">Support</a></li>
    </ul>
<!--END LAVA MENU-->

<script language="javascript" type="text/javascript">
$(document).ready(function(){
    $('#lavaMM').lavaLamp({
        fx: 'backout', 
        speed: 700,
        click: function(event, menuItem) {
            return true;
        }
    });
    var fullURL = document.URL;
    var splitURL = fullURL.split('/', 4);
    if (splitURL[3] == 'content.php') {
        $('ul.lavaLamp li:eq(2)').addClass('current');
    }
    else if (splitURL[3] == 'forum') {
            $('ul.lavaLamp li:eq(3)').addClass('current');
    } 
    else if (splitURL[3] == 'gallery') {
            $('ul.lavaLamp li:eq(4)').addClass('current');
    } 
});
</script> 
```

**第二次尝试：**

```
<!--BEGIN LAVA MENU-->
    <ul class="lavaLamp" id="lavaMM">
        <li><a href="/">Home</a></li>
        <li><a href="/market/">Market</a></li>
        <li class="current"><a href="/content.php/475-the-daily-buzz">Blog</a></li>
        <li class="current"><a href="/forum/forum.php">Forum</a></li>
        <li class="current"><a href="/gallery/">Gallery</a></li>
        <li><a href="/forum/forumdisplay.php/439-Scrap-Orchard-University">Tutorials</a></li>
        <li><a href="/staff/">Staff</a></li>
        <li><a href="/forum/faq.php">FAQ</a></li>
        <li><a href="/market/support/">Support</a></li>
    </ul>
<!--END LAVA MENU-->

<script language="javascript" type="text/javascript">
$(document).ready(function(){
    $('#lavaMM').lavaLamp({
        fx: 'backout', 
        speed: 700,
        click: function(event, menuItem) {
            return true;
        }
    });
    var fullURL = document.URL;
    var splitURL = fullURL.split('/', 4);
    if (splitURL[3] == 'content.php') {
        $('ul.lavaLamp li:eq(3)').removeClass('current');
        $('ul.lavaLamp li:eq(4)').removeClass('current');
    }
    else if (splitURL[3] == 'forum') {
            $('ul.lavaLamp li:eq(2)').removeClass('current');
        $('ul.lavaLamp li:eq(4)').removeClass('current');
    } 
    else if (splitURL[3] == 'gallery') {
        $('ul.lavaLamp li:eq(2)').removeClass('current');
            $('ul.lavaLamp li:eq(3)').removeClass('current');
    } 
});
</script> 
```

**第三次尝试：**

```
<!--BEGIN LAVA MENU-->
    <ul class="lavaLamp" id="lavaMM">
        <li><a href="/">Home</a></li>
        <li><a href="/market/">Market</a></li>
        <li><a href="/content.php/475-the-daily-buzz">Blog</a></li>
        <li><a href="/forum/forum.php">Forum</a></li>
        <li><a href="/gallery/">Gallery</a></li>
        <li><a href="/forum/forumdisplay.php/439-Scrap-Orchard-University">Tutorials</a></li>
        <li><a href="/staff/">Staff</a></li>
        <li><a href="/forum/faq.php">FAQ</a></li>
        <li><a href="/market/support/">Support</a></li>
    </ul>
<!--END LAVA MENU-->

<script language="javascript" type="text/javascript">
$(document).ready(function(){
    var fullURL = document.URL;
    var splitURL = fullURL.split('/', 4);
    if (splitURL[3] == 'content.php') {
        $('ul.lavaLamp li:eq(2)').each(function() {
                    $(this).addClass('current');
        });
    }
    else if (splitURL[3] == 'forum') {
            $('ul.lavaLamp li:eq(3)').each(function() {
                    $(this).addClass('current');
            });
    } 
    else if (splitURL[3] == 'gallery') {
            $('ul.lavaLamp li:eq(4)').each(function() {
                    $(this).addClass('current');
            });
    } 
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:06:07.770

在文件中`lavalamp.js` 替换为`o`：

```
o = $.extend({ fx: "linear", speed: 500, classes: 'current', click: function(){} }, o || {});
$current = o.classes; 
```

**调用函数：**

```
 $(function() { $("#menu_main").lavaLamp({ fx: "backout", speed: 700 ,classes : 'current_page_item'})}); 
```

# c - 帕斯卡到 C 转换器

> ID：10373935
> 
> 赞同：4
> 
> 时间：2012-04-29T16:46:53.287
> 
> 标签：c, pascal, flex-lexer, code-translation

我正在编写将 Pascal 转换为 C 的程序，需要一些帮助。我从扫描仪生成器 Flex 开始。我定义了一些规则并创建了或多或少工作正常的扫描仪。它将 Pascal 语法分解为标记，现在它只打印它找到的内容。但我不知道下一步该怎么做。有没有关于这个主题的文章或书籍？你下一步怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T16:56:01.020

为什么要做这样的 Pascal 到 C 转换器？

如果您只想运行一些 Pascal 程序，使用（或改进）现有编译器（如[gpc](http://www.gnu-pascal.de/gpc/h-index.html)或 Pascal 到 C 翻译器）会更简单，例如[p2c](http://www.ccrnp.ncifcrf.gov/~toms/p2c/daves.index.html)

如果您想将手写的 Pascal 代码转换为人类可读（且可改进）的 C 代码，则任务要困难得多；特别是，您可能希望转换缩进，注释，尽可能保持相同的名称 - 但避免与系统名称冲突 - 等等！

你总是想解析一些抽象的语法树，但是这些树的确切性质是不同的。也许`flex`+`bison`甚至[ANTLR](http://www.antlr.org/)可能或不够（你总是可以编写一个手写的解析器）。此外，错误恢复可能对您来说很重要，也可能不重要（在第一个语法错误时中止非常容易；试图理解一个写得不好、语法不正确的 Pascal 源代码非常困难）。

如果您想构建一个玩具 Pascal 编译器，请考虑使用[LLVM](http://llvm.org/)（或者甚至可能是[GCC](http://gcc.gnu.org/)中端和后端）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T16:54:40.973

您可能想查看[“使用规范表示和属性语法反转在编程语言之间进行翻译”](http://academiccommons.columbia.edu/download/fedora_content/download/ac:141213/CONTENT/CUCS-247-86.pdf) 和其中的参考资料。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T16:55:53.977

最常见的方法是在前端构建一个解析树，然后遍历该树，在后端输出等效的 C。这使您可以灵活地执行任何所需的声明重新排序（IIRC Pascal 支持在声明之前使用，但 C 不支持）。如果您使用 flex 作为扫描仪，传统上会要求使用 bison 作为解析器，尽管还有其他选择。如果你看的话，你可能会发现一个免费的 Pascal 语法，它采用了 bison 所期望的格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T16:58:56.617

您必须了解 Pascal 语法、C 语法并构建（设计）一个“某种东西”（即语法或自动机......），它可以翻译相应 C 规则中的每个 Pascal 规则。

比，一旦你有了标记化的流，使用像 LR 这样的方法，你可以找到对应于应用的 Pascal 规则序列的语义树，并转换相应的 C 规则中的每个规则（这可以用 Bison 轻松完成）。

注意 Pascal 和 C 没有上下文无关文法，因此需要更多的控制。

# javascript - 将脚本添加到 asp.net 内容页面

> ID：10373938
> 
> 赞同：6
> 
> 时间：2012-04-29T16:47:17.550
> 
> 标签：javascript, asp.net, google-maps

我有一个可以工作的谷歌地图脚本，但我不知道如何将它添加到我的 asp.net 内容页面。将脚本添加到页面的正确方法是什么？

见代码：

```
 <%@ Page Title="Our Location" Language="VB"     MasterPageFile="~/MasterPages/Frontend.master" AutoEventWireup="false" CodeFile="Location.aspx.vb" Inherits="About_Location" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 

<script type="text/javascript"   
  src="http://maps.google.com/maps/api/js?sensor=false"> 
</script> 

<style type="text/css">  
html { height: 100% }   
body { height: 100%; margin: 0px; padding: 0px }  
##map{ height: 100% } 
</style> 

</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="cpMainContent" Runat="Server"    OnLoad="codeAddress()">

<script type= "text/javascript">

var geocoder;
var map;
var marker;

function codeAddress() {
    alert("hello")

    //initializes the map

    //create geocoder
    geocoder = new google.maps.Geocoder();
    //set options for the map being created
    var myOptions = {
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    //create map instance and pass it the myOptions object literal
    map = new google.maps.Map(document.getElementById("map"), myOptions);

    //geocode to get the lat and lng points of the given address
    geocoder.geocode({ 'address': 'New York, New York'}, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            //if geocoder finds location
            //center the map on the latlng points of the given address
            map.setCenter(results[0].geometry.location);
            map.setOptions({ zoom: 18 });
            //create marker and place it on the address
            marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                title: 'New York, New York'
            });
        }
        else {
            //if geocoder cannot find location, alert user
            alert("Could not find location");
        }
    });

}

</script>

<div id="map" style="width:700px; height:400px;"></div> 

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T16:56:48.990

将您的脚本放在单独的 js 文件中，像使用 Google 地图脚本一样声明它。然后你必须调用它，也许将这个“#map” div id 作为参数发送到该脚本，而不是在 javascript 中硬编码。

在这种情况下，您希望使用脚本管理器在页面加载时执行此操作：

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "ShowGoogleMap", "codeAddress('map');", true); 
```

顺便提一句。对于谷歌地图，您可以使用谷歌地图服务器控件，使用从服务器端管理地图要容易得多：

[http://googlemap.codeplex.com/](http://googlemap.codeplex.com/)

# android-ndk - Eclipse 看不到要包含的标题：/

> ID：10373941
> 
> 赞同：2
> 
> 时间：2012-04-29T16:47:32.540
> 
> 标签：android-ndk, eclipse-cdt

如果 eclipse 看不到我包含的标题，我的项目属性可能有什么问题？我有很好的包含路径，我可以在包含层次结构的窗口中看到它们。

![](../Images/5dc401df38f4f47ca875a8f9466d53a6.png)![](../Images/b9155cb05997ea90874e8bea19dbd131.png)

但是在源代码编辑器中有问题：/

![](../Images/b21ba6a72b6c30e5bad9828c747ebeec.png) ![](../Images/29b9c4d74774963690a6118f93fd3a9d.png)

在属性中我有很好的路径：

![](../Images/9ff8ed223f0df1a477719d0bcbba68fd.png)

这个问题突然出现：/昨天我可以毫无问题地构建我的项目，但现在有一些问题：/项目不受版本控制，所以我无法恢复到昨天的来源：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:58:05.553

有时 Eclipse 使用您期望的不同工作目录，因此您必须稍微使用相对路径。尝试在目录前面放一个 ../ ，也许这会将它放在范围内，但我认为除了猜测之外还有其他方法可以找到构建目录。项目 -> 属性 -> C++ 构建并环顾四周。此外，如果您不托管我们可以下载它的地方，我们也帮不了您...如果您这样做，我向您保证我会修复它并发布解决方案！

# php - php谷歌日历集成虚拟异常

> ID：10373945
> 
> 赞同：0
> 
> 时间：2012-04-29T16:48:11.240
> 
> 标签：php, zend-framework

我对 php 完全陌生，我必须在几天内完成小项目。目前我的问题是我无法将我的 php 脚本与谷歌日历集成。我正在使用 Zend 框架，我正在做这个（http://www.ibm.com/developerworks/library/x-googleclndr/）教程中的所有事情。我得到了奇怪的例外：

```
Uncaught exception 'Zend_Gdata_App_HttpException' with message 'Unable to Connect to ssl://www.google.com:443\. Error #156366088: Unable to find the socket transport "ssl" - did you forget to enable it when you configured PHP?' 
```

那会是什么？如果这是一个nooby问题，我很抱歉。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:40:09.670

正如错误所说，您不需要启用 ssl - 这很简单，只需从`extension=php_openssl.dll`您的`php.ini`

如果您使用的是 WAMP：[安装后配置 wampserver 以启用 ssl](https://stackoverflow.com/questions/4774182/configuring-wampserver-after-installation-to-enable-ssl)

# jquery - 嵌套表单的 Railscast 88（修订版）：动态生成嵌套 ID

> ID：10373949
> 
> 赞同：1
> 
> 时间：2012-04-29T16:48:32.197
> 
> 标签：jquery, ruby-on-rails

[Railscast 88 修订版](http://railscasts.com/episodes/88-dynamic-select-menus-revised)

此 railscast 中的咖啡脚本指定了 html 选择选项列表的 ID：

```
 states = $('#person_state_id').html() 
```

但是，我使用的是嵌套表单，它会动态生成新的表单字段及其 ID。例如：

```
book_extents_attributes_new_extents_extent_value_input 
```

或者

```
book_measurements_attributes_2_measure_type_input 
```

如何即时生成这些 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:39:51.440

一位好心人帮了我：这是一个解决方案。

#view partial 嵌套表单字段，根据 railscast。

```
= javascript_include_tag 'simple_tooltip'
.nested-fields
  = f.inputs :class => :data_table_format do
    = f.input :client_id,   :as => :hidden, :value => current_user.client_id
    = f.input :extent_value, :label => "Extent", :input_html => {:class => 'nested_narrow_input'}
    %li.select
      = f.collection_select :extent_type_id, ExtentUnit.order(:value), :id, :value, {include_blank: true}, {:class => 'nested_drop_down_one_of_two'}
    %li.select
      = f.grouped_collection_select :extent_unit_id, ExtentUnit.order(:value), :extent_types, :value, :id, :value, {include_blank: true}, {:class => 'nested_drop_down_two_of_two'}
    .links
      = link_to_remove_association image_tag("#{static_root}/cross.png", {:class => :cross}), f 
```

#application.js 或资产管道中的某处

```
 $(document).ready(function(){

        $(".nested_drop_down_two_of_two").each(function(i,v){
            $(this).attr("data-content",$(this).html());
        });
        $(".nested_drop_down_one_of_two").live("change", function() {

            selected_type = $(this).find("option:selected").text();
            var content = $($(this).parent("li.select").next().find(".nested_drop_down_two_of_two").attr("data-content")).filter("[label='"+selected_type+"']").html()
            $(this).parent("li").next().find(".nested_drop_down_two_of_two").html(content);
            return true;
        });

    }); 
```

# perl - Perl Image::Magick：将一个图像放在另一个图像的顶部

> ID：10373956
> 
> 赞同：2
> 
> 时间：2012-04-29T16:49:17.887
> 
> 标签：perl, imagemagick, perlmagick

我有两张图片（第一张大，第二张小而透明）。我需要在第一个图像的中心添加第二个图像并将结果保存为一个新文件。

如何用 Perl [Image::Magick](https://metacpan.org/module/Image%3a%3aMagick)做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T01:21:37.207

```
use strict;
use warnings;
use Image::Magick;

my $big = Image::Magick->new;
$big->Read(filename => 'big.png');

my $little = Image::Magick->new;
$little->Read(filename => 'little.png');

$big->Composite(image => $little, qw(compose SrcAtop  gravity Center));

$big->Write(filename => 'out.png'); 
```

# matlab - matlab滤波器仿真错误

> ID：10373959
> 
> 赞同：1
> 
> 时间：2012-04-29T16:49:29.167
> 
> 标签：matlab

我在matlab中做了一个维纳滤波器模拟，但似乎我在代码中犯了一个错误，因为结果不正确。如果有人查看代码并指出错误，我将不胜感激。

这是代码：

```
k = 1:100;
sigma = 0.1;
s1 = randn(1,100);
n1 = randn(1,100) * sigma;
Pnum = [1 0.1];
Pdenum = [1 0.9];
Gnum = [1 0.9];
Gdenum = [1 0.1];
n = filter(Pnum, Pdenum, n1);
s = filter(Gnum, Gdenum, s1);
x = n + s;
rxx = xcorr(x);
rxs = xcorr(x,s);
toeplitz_rxx = toeplitz(rxx);
wopt = inv(toeplitz_rxx) * rxs;

wopt = inv(toeplitz_rxx) * transpose(rxs); 
s_hat = filter(wopt,1,x);
error = x - s_hat; %this is where the wrong result is being calculated
plot(k,error, 'r',k,s_hat, 'b', k, x, 'g'); 
```

问题是计算出的误差正好是 s_hat 的镜像。这肯定是不对的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-13T21:18:30.697

没问题。

我完全*不*知道您要做什么。但是，如果你想要做的是获得一些信噪比，并试图通过一些线性一阶系统来模拟这些效果，你应该纠正你的`P`和`G`多项式，如果是这样的话，这是完全错误的。键入`help filter`并查看`A`和`B`定义。

这是正确的代码：

```
k = 1:100;
sigma = 0.1;
s1 = randn(1,100);
n1 = randn(1,100) * sigma;
Pnum = [0 0.1];
Pdenum = [1 -0.9];
Gnum = [0 0.9];
Gdenum = [1 -0.1];
n = filter(Pnum, Pdenum, n1);
s = filter(Gnum, Gdenum, s1);
x = n + s;
rxx = xcorr(x);
rxs = xcorr(x,s);
toeplitz_rxx = toeplitz(rxx);

wopt = inv(toeplitz_rxx) * transpose(rxs); 
s_hat = filter(wopt,1,x);
error = x - s_hat; %this is where the wrong result is being calculated
plot(k,error, 'r',k,s_hat, 'b', k, x, 'g'); 
```

toeplitz 仍然存在病态。我就这样吧，因为你仍然可以玩得开心。这也很容易解决。

伙计们是真的。StackOverflow 不是为了解决你的作业，而是为了帮助你找到光明。

# ios - CGContextDrawImage 只包含两个图像的交集

> ID：10373960
> 
> 赞同：0
> 
> 时间：2012-04-29T16:49:31.287
> 
> 标签：ios, xcode, ios5, bitmap

由于 CGContextDrawImage 可能非常昂贵，因此我试图在检查像素数据时尽量减少提供给它的数据量。如果我有两个图像和它们的交集的 CGRect，我可以让 CGContextDrawImage 仅独立绘制每个图像的交集（导致两个 CGContextRefs 包含其中一个图像的交集）吗？

这是一些不起作用的代码，但应该接近我需要一张图片的代码......

```
 CGImageRef imageRef = [image CGImage];
    NSUInteger width = rectIntersect.size.width;
    NSUInteger height = rectIntersect.size.height;

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                                 bitsPerComponent, bytesPerRow, colorSpace,
                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);

    // rectIntersect down here contains the intersection of the two images...
    CGContextDrawImage(context, rectIntersect, imageRef); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:09:00.593

好吧，除非你真的想和他们在一起，否则你不需要画`CGBitmapContext`它们。用于`CGImageCreateWithImageInRect()`创建子图像。这不一定要求框架复制任何图像数据。它可能只是引用原始图像数据。因此，它可能非常有效。

如果您确实需要将图像绘制到上下文中，您当然可以只绘制子图像。

# ruby - Ruby 'First and Rest' 逻辑

> ID：10373963
> 
> 赞同：1
> 
> 时间：2012-04-29T16:50:20.507
> 
> 标签：ruby, performance, refactoring

我的应用程序已经到了必须开始优化性能的地步。我已经发布了一些我认为可以改进的代码。

在视图中，我以某种方式处理索引中的第一项，而以另一种方式处理其余项。每次迭代一个新项目时，都会对其进行检查（Ruby 会问自己......这个项目的索引是否为 0？）

我觉得如果我可以通过特殊处理第一个项目`index.first?`并以另一种方式处理其他项目（甚至不检查它们的索引是否为零）来阻止这种行为，那么性能可以得到提高。

```
 <% @links.each_with_index do |link, index| %>
    <% if link.points == 0 then @points = "?" else @points = link.points %>
    <% end %>
    <% if index == 0 then %>
      <h1> First Item </h1>
    <% else %>
      <h1> Everything else </h1>
    <% end %>
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:25:53.690

您可以像这样非破坏性地执行此操作：

```
first, *rest = *my_array
# Do something with 'first'
rest.each{ |item| … } 
```

…where`first`将是第一个元素（或者`nil`如果 my_array 为空）并且`rest`将始终是一个数组（可能为空）。

如果可以修改数组，则可以更轻松地获得相同的结果：

```
# remove the first item from the array and return it
first = my_array.shift
# do something with 'first'
my_array.each{ |item| … } 
```

但是，这只会清理您的代码；它不会产生可衡量的性能差异。

# java - 停止警报 [android 应用程序]

> ID：10373964
> 
> 赞同：0
> 
> 时间：2012-04-29T16:50:34.670
> 
> 标签：java, android, alarm

谁能告诉我为什么在 android.developer 文档中他们说：`just sleep for 30 seconds.`

然后放 15 * 1000，这不是 30 秒，它只有 15 ！

```
 Runnable mTask = new Runnable() {
                public void run() {
                    // Normally we would do some work here...  for our sample, we will
                    // just sleep for 30 seconds.
                    long endTime = System.currentTimeMillis() + 15*1000;
                    while (System.currentTimeMillis() < endTime) {
                        synchronized (mBinder) {
                            try {
                                mBinder.wait(endTime - System.currentTimeMillis());
                            } catch (Exception e) {
                            }
                        }
                    }

                    // Done with our work...  stop the service!
                    MyAlarmService.this.stopSelf();
                }
            }; 
```

[这里](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/AlarmService_Service.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:54:10.027

它可能被设置为 30 秒，并且在某个地方有人厌倦了在测试和调试周期中等待那么长时间，所以他们缩短了它但从未更改过评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:15:21.567

在记录使用描述性变量名称会更好的代码时，您会看到其中一个陷阱。我的猜测是他们在将值更改为 15 秒时忘记更新他们的评论。

就个人而言，我通常会引入一个常量变量，例如

```
private final static int 15_SECONDS = 15 * 1000; 
```

或者使用

```
private final static int SECONDS = 1000; 
```

并在代码中使用

```
long endTime = System.currentTimeMillis() + 15_SECONDS; 
```

或分别

```
long endTime = System.currentTimeMillis() + (15 * SECONDS); 
```

这样，代码的作用就很清楚了，如果我决定更改值也很清楚，因为很容易记住更改变量名。

# ruby-on-rails - 设置 Capistrano 电流路径

> ID：10373974
> 
> 赞同：3
> 
> 时间：2012-04-29T16:52:42.660
> 
> 标签：ruby-on-rails, deployment, capistrano

我需要覆盖默认 Capistrano 当前路径。我想部署到`/var/www/apps/myapp` 然后将当前符号链接设置`/var/www/mysite.com`为默认值而不是默认值`/var/www/apps/myapp/current`。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T18:50:03.837

在 deploy.rb 中定义以下内容：

```
set :current_path, '/var/www/mysite.com' 
```

这可能会导致插件、脚本或 capistrano 的其他部分采用默认布局。

一个更安全的解决方案是简单地符号链接`/var/www/mysite.com`到`/var/www/apps/myapp/current`

# matlab - 在 MATLAB 中以参数方式求解指数方程

> ID：10373975
> 
> 赞同：0
> 
> 时间：2012-04-29T16:53:29.523
> 
> 标签：matlab, symbolic-math

我想解这个方程...

```
 | 1     1     1 | |b0| |exp(t)  |
 | 0     1     2 | |b1|=|exp(t)  |
 | 1     1     1 | |b2| |exp(2*t)| 
```

我喜欢这样的答案：

例如：

b0=2*exp(t)+exp(2*t) b1=exp(t)+1 b2=exp(

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:58:38.510

该矩阵是奇异的，因此没有唯一解（取决于`t`，可能有零个或无限多个解）。我将用一个可逆矩阵替换它来演示该方法：

```
>> A = [1,1,1;0,1,2;1,1,0]

A =

     1     1     1
     0     1     2
     1     1     0 
```

之后，求解是对符号能力的直接使用：

```
>> t = sym('t');
>> rhs = [exp(t);exp(t);exp(2*t)]

rhs =

   exp(t)
   exp(t)
 exp(2*t)
>> b = A\rhs

b =

   exp(t) - exp(2*t)
 2*exp(2*t) - exp(t)
   exp(t) - exp(2*t) 
````

# node.js - NodeJS Express 通配符路由多次执行

> ID：10373978
> 
> 赞同：0
> 
> 时间：2012-04-29T16:53:40.847
> 
> 标签：node.js, express

考虑以下代码片段：

```
var count = 0;

function a(req, res, next){
   count++;
   console.log(count);
   next();
};

app.get('*', a);
app.get("/", routes.index);
app.get("/foo", routes.foo); 
```

函数 a() 将为每个定义的路由执行，在本例中为 2，每个 http 请求。count 变量只是为了说明。因此，如果我定义了 100 条路由，则 a() 将对站点的每个请求执行 100 次。这是预期的行为，还是我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:41:42.130

您应该检查网络流量或在您的`a`函数中记录请求。您看到的第二个请求很可能是针对 favicon.ico 的。每个匹配请求仅调用一次路由。

# jquery - 验证引擎一一错误显示

> ID：10373981
> 
> 赞同：5
> 
> 时间：2012-04-29T16:53:51.853
> 
> 标签：jquery, jquery-validation-engine

我更喜欢 Jquery ValidationEngine 而不是 Bassistance 验证。我的问题是

我们每行不使用一个输入，其中一些在同一行中，例如 First Name: [] Last Name: []

当错误弹出时，错误消息重叠并且看起来很丑陋。

我可以对验证引擎做些什么，它只显示最重要的错误，当错误被修复并且用户尝试提交表单时，另一个最重要的错误（如果存在）将在那里显示。

现实生活中的例子：- 例如名字和姓氏都是必需的，两个字段都是空的他在姓氏字段上看到第二个错误，他输入了姓氏“Ashraf”，然后表格就可以使用了。

我们能做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T11:46:29.637

尝试改变

> showOneMessage *真*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-08T05:13:12.783

**如果我们必须在每个字段字段一次显示一个错误，那么我们将使用**

```
maxErrorsPerField:1 
```

它会像

```
$("#form_id").validationEngine('attach', { maxErrorsPerField:1}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T11:57:46.393

试试这个：

```
<input value="" class="validate[required]" type="text" name="FirstName" id="fname">
<input class="validate[condRequired[fname]]" type="text" name="LastName" id="lname"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T21:12:23.870

我相信您正在寻找的选项是：

// 当您的表单字段太近并且错误消息位于其他令人不安的查看消息之上时使用 doNotShowAllErrosOnSubmit: false

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-05T05:39:43.423

试试这个：

```
showErrors: function(errorMap, errorList) {
    this.defaultShowErrors();
    $("#changepass label.error:visible").each(function(index,value){
        if(index)
            $(this).hide();
    });
},
onkeyup: false,
onclick: false,
onfocusout: false 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-01T16:07:21.593

## 将 maxErrorsPerField 属性设置为 true

```
 $("#formid").vaidationEngine({ maxErrorsPerField:true}); 
```

# ios - 在 pdf 上添加注释

> ID：10373982
> 
> 赞同：3
> 
> 时间：2012-04-29T16:53:53.767
> 
> 标签：ios, objective-c, ipad, core-graphics, quartz-graphics

我必须开发一个 iPad 应用程序，它可以查看 PDF 文件并在其上动态绘制一些预定义的注释。就像[http://plangrid.com/](http://plangrid.com/)一样。

我浏览了 WWDC 视频、stackoverflow 和其他一些博客。

但找不到在 PDF 上添加控制器栏的方法。并从中拖动注释并放在 PDF 上。

我有一个关于查看 PDF 的想法。我遵循[ZoomingPDFViewer 示例](http://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010281)。

请给我提意见。

我正在使用 XCode 4 和 iOS 4.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:36:39.773

我不确定您是否找到以下 stackoverflow 帖子： [Annotate PDF in iPhone SDK](https://stackoverflow.com/questions/2313008/annotate-pdf-within-iphone-sdk)

第一个答案显示了如何在给定位置向 pdf 页面添加文本。这应该对您的目的有所帮助。

# c++ - C ++ deque：当迭代器无效时

> ID：10373985
> 
> 赞同：27
> 
> 时间：2012-04-29T16:54:16.667
> 
> 标签：c++, stl, iterator, deque

如果我错了，请纠正我。谢谢！

`insert`并且`erase`会重新定位元素，但是在插入/擦除发生的位置之前的元素不会重新定位，因此它们的迭代器仍然有效。

`push_back`并且`pop_back`不要使任何迭代器无效。

`push_front`并使`pop_front`所有迭代器无效。

`swap`不会重新定位元素，但不知何故我认为它应该使迭代器无效。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-29T17:09:31.200

`push_back()`并且`push_front()`是根据 定义的`insert()`。同样，`pop_back()`和`pop_front()`是根据 定义的`erase()`。

以下是 C++03 标准关于`insert()`(23.2.1.3/1) 的迭代器失效的说明：

> 双端队列中间的插入使所有迭代器和对双端队列元素的引用无效。在双端队列的任何一端插入都会使双端队列的所有迭代器无效，但不会影响对双端队列元素的引用的有效性。

因此`push_front()`，and`push_back()` *将使*迭代器无效，但对元素本身的引用仍然有效。

对于`erase()`任一端 (23.2.1.3/4)：

> 双端队列中间的擦除使所有迭代器和对双端队列元素的引用无效。在双端队列的任一端进行擦除只会使迭代器和对被擦除元素的引用无效。

因此`pop_front()`，并且`pop_back()`仅使迭代器/对相关元素的引用无效。

据说`swap()`对于任何标准容器（23.1/10“容器要求”）都是如此：

> 没有 swap() 函数会使引用被交换容器元素的任何引用、指针或迭代器无效。

C++11 添加了以下关于 a 上的`end()`迭代器对`deque`这些操作的行为方式的说明。基本上，在 a或擦除 中的最后一个元素之后，应该将迭代器`end()`视为无效：`swap()``deque`

> 擦除双端队列的最后一个元素的擦除操作只会**使过去的迭代器**和所有迭代器以及对被擦除元素的引用无效。

> 每个在交换之前引用一个容器中的元素的迭代器都应该在交换之后引用另一个容器中的相同元素。未指定在交换之前具有值 a.end() 的迭代器在交换之后是否具有值 b.end()。

我认为即使您尚未使用 C++11 编译器，也可以按照这些规则适用的方式进行编码。

# java - java - 访问私有变量

> ID：10373986
> 
> 赞同：4
> 
> 时间：2012-04-29T16:54:20.393
> 
> 标签：java, class, scope, private

> **可能重复：**
> [Java 私有字段访问](https://stackoverflow.com/questions/7916246/java-private-field-access)

我刚刚在 java 中观察到一些奇怪的（恕我直言）的事情：

```
class foo{
    private int secret;
    public int getSecret(){
        return secret;
    }
    public void confuseCoder(foo o){
        System.out.println(o.secret);
    }
} 
```

有同样的问题（有[引用时可以访问 Java 私有字段？](https://stackoverflow.com/questions/7916246/java-private-field-access)）但我不确定我是否能忍受那种感觉，有一天，我会在某个地方访问错误的变量，它会破坏世界或其他东西。

有没有办法在类级别限制对私有变量的访问？

谢谢， Vojtěch

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T16:58:34.853

如果您担心改变数据，您可以随时使用`final`. 它甚至可以是公开的：

```
class Foo{
    public final int secret;
    public int getSecret(){
        return secret;
    }
    public Foo(int s){
       secret=s;
    }

   public static void main (String args[])
  { 
    foo Foo=new Foo(1);
    foo.secret=2;//Illegal 
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:02:13.590

`private`[关键字意味着除了它所属的类（ http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)）之外，不能从任何地方访问该变量。这意味着您可以通过不提供 mutator 方法轻松地限制对它的访问。您还可以将其声明为`final`限制任何突变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T17:20:18.930

> 总有一天，我会在某个地方访问错误的变量，它会破坏世界或其他东西

这被称为人类，因为java无法避免这个错误，编译器不会为你捕捉到它。避免破坏世界的错误的正确方法是编写测试并使用其他形式的质量管理。

虽然我认为有经验的 Java 程序员可以编写一个注释处理器/编译器插件来将变量标记为实例私有，但目前我还没有知道的实现。

# javascript - 使用 jQuery 通过 JSON 获取数据

> ID：10373988
> 
> 赞同：0
> 
> 时间：2012-04-29T16:54:35.763
> 
> 标签：javascript, jquery

我有一个网站，一旦单击按钮，它将触发一些 javascript 操作。我想通过我编写的 php 脚本获取一些数据。我正在使用这种方法：

```
$.get("get_uni_info.php?addressToSearch=" + address, address, function(myData)
{
    $.each(myData, function(key, value) 
    {
        console.info(value);
    })
}, "json"); 
```

在 php 代码中，我试图获取值“地址”，以便能够搜索我的数据库并发送回一些数据，但我什么都没有返回。我已经对 php 代码进行了测试，如果采取了人为措施，它将返回数据，所以我可以告诉它不是我的 PHP 代码。

我的 jQuery 出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:01:39.037

可能问题出在`$.get`方法的使用上。

你应该写

```
$.get("get_uni_info.php?addressToSearch=" + address, function(myData) {
    ...
}, "json"); 
```

或者

```
$.get("get_uni_info.php", { addressToSearch : address }, function(myData) {
    ...
}, "json"); 
```

PHP 代码应处理`address`为：

```
$address = $_GET['addressToSearch']; 
```

**编辑：**如果这没有帮助，我们需要查看您的 PHP 代码（准确的响应部分）以了解确切的问题在哪里。

# c# - 从浮点数字符串中解析整数

> ID：10373992
> 
> 赞同：0
> 
> 时间：2012-04-29T16:55:20.557
> 
> 标签：c#, .net, windows, arrays, string

我设法通过 RS232 从温度传感器获取值。预期值将被添加到数据库中以供进一步操作。这是代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using MySql.Data.MySqlClient;
using System.IO.Ports;

namespace SimpleSerial
{

    public partial class Form1 : Form
    {
        // Add this variable 
        MySqlConnection conn = null;
        float tempvalue;
        string RxString;

        public Form1()
        {
            InitializeComponent();
        }
        public void dbconnect()
        {
            string cs = @"server=xxx.x.x.xx;userid=uuuuuu;password=xxxxx;database=project";
            try
            {
                conn = new MySqlConnection(cs);
                conn.Open();
                MySqlCommand cmd = new MySqlCommand();
                cmd.Connection = conn;
                cmd.CommandText = "INSERT INTO temp(value) VALUES(@value) ";
                cmd.Prepare();
                cmd.Parameters.AddWithValue("@value", tempvalue);
                cmd.ExecuteNonQuery();
                //Console.WriteLine("MySQL version : {0}", conn.ServerVersion);

                //MessageBox.Show("DB Connected");
            }
            catch (MySqlException ex)
            {
                Console.WriteLine("Error: {0}", ex.ToString());
                MessageBox.Show("Error: {0}", ex.ToString());
            }
            finally
            {
                if (conn != null)
                {
                    conn.Close();
                }
            }

        }

        private void buttonStart_Click(object sender, EventArgs e)
        {
            serialPort1.PortName = "COM2";
            serialPort1.BaudRate = 9600;
            serialPort1.Open();
            if (serialPort1.IsOpen)
            {
                buttonStart.Enabled = false;
                buttonStop.Enabled = true;
                textBox1.ReadOnly = false;
            }

        }

        private void buttonStop_Click(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen)
            {
                serialPort1.Close();
                buttonStart.Enabled = true;
                buttonStop.Enabled = false;
                textBox1.ReadOnly = true;
            }

        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (serialPort1.IsOpen) serialPort1.Close();
        }

        private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
        {
            // If the port is closed, don't try to send a character.
            if (!serialPort1.IsOpen) return;

            // If the port is Open, declare a char[] array with one element.
            char[] buff = new char[1];

            // Load element 0 with the key character.
            buff[0] = e.KeyChar;

            // Send the one character buffer.
            serialPort1.Write(buff, 0, 1);

            // Set the KeyPress event as handled so the character won't
            // display locally. If you want it to display, omit the next line.
            e.Handled = true;
        }

        private void DisplayText(object sender, EventArgs e)
        {
            tempvalue = float.Parse(RxString);    
            dbconnect();
            textBox1.AppendText(RxString);
        }

        private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {
            RxString = serialPort1.ReadExisting();
            this.Invoke(new EventHandler(DisplayText));

        }
    }
} 
```

请注意：

```
 tempvalue = float.Parse(RxString);    
    dbconnect();
    textBox1.AppendText(RxString); 
```

是我想要操纵的值。当前输出类似于**56.1234557.4323253.34221**。感兴趣的值是每个“。”之后左侧的两位数。我想得到这个值有 56 57 53 等。我已经尝试过它似乎不是这里的最佳选择。由于它来自串行端口，读取值的方式让我失去了一些位。有没有办法可以将 XX.DDDDD 中的 Xs 和 Ds 分开并使用 XX 填充数据库？我试过了`RxString.Split('.')`。也许我没有做对。有人好心帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:03:11.390

```
string[] values = RxString.Split(new Char[] {','}); 
foreach(String value in values)
{
   string[] parts = value.Split(new char[] {'.'});
   if (parts.Length == 2)
   {
      int v;
      if (int.TryParse(parts[0], out v))
      {
          // do something with v
      }
   }
} 
```

如果我得到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:43:29.940

您可以使用 Regex 提取字符串的有趣部分

```
MatchCollection matches =
    Regex.Matches("56.1234557.4323253.34221", @"\d\d(?=\.)");
foreach (Match match in matches) {
    Console.WriteLine(match.Value);
} 
```

`find(?=suffix)`我使用了匹配后缀前面位置的正则表达式模式。`\d\d`匹配两位数并`\.`匹配小数点。

# iphone - UITable 视图导致应用程序崩溃

> ID：10373993
> 
> 赞同：-1
> 
> 时间：2012-04-29T16:55:43.803
> 
> 标签：iphone, ios, xcode, uitableview

我是一个新的 iPhone 程序员。我正在制作一个基于导航的应用程序。其中一个视图包含一个表格视图。我成功地制作了一个单视图应用程序，该应用程序在视图内使用带有开关的表视图，但是当我在基于导航的应用程序中尝试代码时，它崩溃了：线程 1：程序收到信号：“SIGABRT”。

这是我的代码：FourthViewController.h

```
#import <UIKit/UIKit.h>
@interface FourthViewController : UIViewController {
NSArray *contentArray;
}

@property (strong, nonatomic) IBOutlet UITableView *table;
- (void) switchChanged;
@end 
```

第四视图控制器.m

```
@implementation FourthViewController
@synthesize table;

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Release any cached data, images, etc that aren't in use.
}

- (void)viewDidLoad
{
contentArray = [NSArray arrayWithObjects:
                @"One",
                @"Two",
                @"Three", nil];
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
[self setTable:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
[super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
[super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} else {
    return YES;
}
}
//Table View
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section     {
//return 0;
return [contentArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
    UISwitch *switchview = [[UISwitch alloc] initWithFrame:CGRectZero];

    [switchview setOn:YES animated:NO];
    NSInteger row;
    row = [indexPath row];
    switchview.tag = row;
    [switchview addTarget:self action:@selector(switchChanged:) forControlEvents:UIControlEventValueChanged];
    cell.accessoryView = switchview;
}
cell.textLabel.text = [contentArray objectAtIndex:indexPath.row];
return cell;
}
- (void) switchChanged:(id)sender{
UISwitch *switchview = sender;
if (switchview.tag == 0) {
    NSLog(@"First");
}

}
@end 
```

FourthViewController.xib 包含： TableView 连接到表属性数据源和委托设置为文件的所有者。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:07:05.540

我认为您需要在文件所有者中连接您的 IBOutlet 表。

或者

请更改如下。

```
#import <UIKit/UIKit.h>
@interface FourthViewController : UITableViewController <UITableViewDataSource,UITableViewDelegate>
{
NSArray *contentArray;
}

@property (strong, nonatomic) IBOutlet UITableView *table;
- (void) switchChanged;
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:06:03.340

该错误与表格视图无关

# graphviz - 如何使用带有样条的neato并避免相互边缘重叠？

> ID：10373994
> 
> 赞同：2
> 
> 时间：2012-04-29T16:55:49.457
> 
> 标签：graphviz, overlap, directed-graph, neato

我有一个有大约 20 个节点的有向图，我需要固定它们的位置。所以，我使用neato 来生成我的svg 文件。问题是如果我使用直线，我的边缘会与一些节点重叠。如果一组 -Gsplines=true -Gsep=1 边缘很好地避开了节点，但它们的相互节点（即来自 a -> b 和 b -> a 的节点）彼此重叠显示......下面是它的一部分，例如，边缘 9 -> 12 和 12 -> 完全重叠。有谁知道解决这个问题的方法？我可以使用穿过节点的直线，但如果我能设法避免它们并分别显示相互边缘，那将是理想的。不幸的是，使用纯点不是一个选项，因为节点的固定位置是必须的，因为我的最终目标是将它放在地图顶部（我' 我用inkscape“手工”做）。其他语言的解决方案（如果可能，请提供示例）也值得赞赏。

```
digraph {
7 [width=0.388723, shape=circle, style=filled,pos="-5.3642582,-2.953523!", color="#CCFFFF"];
9 [width=1.02852, shape=circle, style=filled,pos="-9.84668,4.0044438!", color="#CCFF00"];
12 [width=0.337023, shape=circle, style=filled,pos="-9.2490238,1.6804541!", color="#CC9933"];
13 [width=0.315507, shape=circle, style=filled,pos="-7.456055,0.035156!", color="#99FFCC"];
17 [width=0.164396, shape=circle, style=filled,pos="-7.2275394,1.8979026!", color="#33FF99"];

9 -> 7 [penwidth=0.644654, color="#CCFF00"];
9 -> 12 [penwidth=2.04003, color="#CCFF00"];
9 -> 13 [penwidth=1.10067, color="#CCFF00"];
9 -> 17 [penwidth=1.79226, color="#CCFF00"];
12 -> 9 [penwidth=0.5, color="#CC9933"];
12 -> 13 [penwidth=0.75431, color="#CC9933"];
12 -> 17 [penwidth=0.828487, color="#CC9933"];
13 -> 7 [penwidth=0.695661, color="#99FFCC"];
17 -> 13 [penwidth=1.78682, color="#33FF99"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:08:41.113

这可能是特定版本的 graphviz 的问题 - 这是我使用 2.28 得到的输出，它没有显示您提到的问题。

我只是`splines=true; sep=1;`在图中添加了。

![图形输出](../Images/1cb107d62413bfca6c301bafe7e35a94.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:48:24.220

对于这个数据样本，我已经安装了 2.28 版并得到了与您相同的结果。不幸的是，对于完整的集合，它崩溃了。没有 splines=true 它工作正常（直线重叠节点，像往常一样）。但是当我设置 splines=true, sep=1 时，它不会正确生成 svg。在没有 -Tsvg 的情况下运行它，我得到一个与内存相关的错误，开始如下：

```
 *** glibc detected *** neato: free(): invalid next size (normal): 0x0000000001e96c00  ***
 ======= Backtrace: =========
 /lib/x86_64-linux-gnu/libc.so.6(+0x7a6e6)[0x7f256f1856e6]
 /lib/x86_64-linux-gnu/libc.so.6(cfree+0x6c)[0x7f256f1899cc]
 /usr/local/lib/graphviz/libgvplugin_neato_layout.so.6(freeRouter+0x3e)[0x7f256aa0095e]
 /usr/local/lib/graphviz/libgvplugin_neato_layout.so.6(+0x19e59)[0x7f256a9eee59]
 /usr/local/lib/graphviz/libgvplugin_neato_layout.so.6(splineEdges+0x24d)[0x7f256a9ef3fd]
 /usr/local/lib/graphviz/libgvplugin_neato_layout.so.6(neato_layout+0x532)[0x7f256a9ea6e2]
 /usr/local/lib/libgvc.so.6(gvLayoutJobs+0x91)[0x7f256f6dae61]
 neato[0x400f3c]
 /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7f256f12c30d]
 neato[0x400fad]
 ======= Memory map: ======== 
```

完整的图表是这个：

```
digraph {
 graph [size="16.68,8.55",resolution="72",bgcolor=transparent];
 1 [width=      0.10000000 shape=circle, style=filled,pos="     13.39800000,     -2.34524000!" color="#FFFFFF"];
 2 [width=      0.59517100 shape=circle, style=filled,pos="      1.70387000,      2.39732000!" color="#FFFFCC"];
 3 [width=      1.02015000 shape=circle, style=filled,pos="      0.71950000,      4.79922000!" color="#FF6600"];
 4 [width=      0.42447300 shape=circle, style=filled,pos="      4.54980430,      2.96880530!" color="#FFFF66"];
 5 [width=      0.86597700 shape=circle, style=filled,pos="      3.76904280,      5.57271100!" color="#FFCCCC"];
 6 [width=      1.51677000 shape=circle, style=filled,pos="     11.65283190,      3.98422860!" color="#FFCC33"];
 7 [width=      0.38872300 shape=circle, style=filled,pos="     -5.36425820,     -2.95352300!" color="#CCFFFF"];
 8 [width=      0.18210900 shape=circle, style=filled,pos="      7.01074180,      4.85747900!" color="#CCFF99"];
 9 [width=      1.02852000 shape=circle, style=filled,pos="     -9.84668000,      4.00444380!" color="#CCFF00"];
10 [width=      0.78439800 shape=circle, style=filled,pos="      0.15527310,      0.75367640!" color="#CCFFFF"];
11 [width=      0.58314700 shape=circle, style=filled,pos="      3.67089810,     -0.14061090!" color="#CC99FF"];
12 [width=      0.33702300 shape=circle, style=filled,pos="     -9.24902380,      1.68045410!" color="#CC9933"];
13 [width=      0.31550700 shape=circle, style=filled,pos="     -7.45605500,      0.03515600!" color="#99FFCC"];
14 [width=      2.10000000 shape=circle, style=filled,pos="      7.83691370,      2.19430460!" color="#99FF66"];
15 [width=      1.35638000 shape=circle, style=filled,pos="     11.44042930,      0.19332270!" color="#CC3399"];
16 [width=      0.37155900 shape=circle, style=filled,pos="      2.31738250,     -2.19430460!" color="#33FFFF"];
17 [width=      0.16439600 shape=circle, style=filled,pos="     -7.22753940,      1.89790260!" color="#33FF99"];
 1 ->   6[arrowshape=vee,penwidth=      0.76772236, color="#FFFFFF"];
 1 ->   7[arrowshape=vee,penwidth=      0.50000000, color="#FFFFFF"];
 1 ->  15[arrowshape=vee,penwidth=      0.57695912, color="#FFFFFF"];
 2 ->   3[arrowshape=vee,penwidth=      0.71351528, color="#FFFFCC"];
 2 ->   7[arrowshape=vee,penwidth=      0.98261125, color="#FFFFCC"];
 2 ->  10[arrowshape=vee,penwidth=      2.98429611, color="#FFFFCC"];
 3 ->   2[arrowshape=vee,penwidth=      3.10970125, color="#FF6600"];
 3 ->   4[arrowshape=vee,penwidth=      2.19246934, color="#FF6600"];
 3 ->   5[arrowshape=vee,penwidth=      3.48380699, color="#FF6600"];
 3 ->   8[arrowshape=vee,penwidth=      2.56421761, color="#FF6600"];
 3 ->   9[arrowshape=vee,penwidth=      0.86576911, color="#FF6600"];
 3 ->  10[arrowshape=vee,penwidth=      3.08433716, color="#FF6600"];
 3 ->  16[arrowshape=vee,penwidth=      1.50759938, color="#FF6600"];
 3 ->  17[arrowshape=vee,penwidth=      2.42768450, color="#FF6600"];
 4 ->   2[arrowshape=vee,penwidth=      3.52409026, color="#FFFF66"];
 4 ->   3[arrowshape=vee,penwidth=      1.16680621, color="#FFFF66"];
 4 ->   8[arrowshape=vee,penwidth=      2.83247875, color="#FFFF66"];
 4 ->  11[arrowshape=vee,penwidth=      3.18186134, color="#FFFF66"];
 4 ->  14[arrowshape=vee,penwidth=      3.71014548, color="#FFFF66"];
 4 ->  15[arrowshape=vee,penwidth=      1.33899072, color="#FFFF66"];
 5 ->   3[arrowshape=vee,penwidth=      0.83007122, color="#FFCCCC"];
 5 ->   8[arrowshape=vee,penwidth=      5.11512052, color="#FFCCCC"];
 6 ->   1[arrowshape=vee,penwidth=      1.05435052, color="#FFCC33"];
 6 ->   8[arrowshape=vee,penwidth=      2.17017566, color="#FFCC33"];
 6 ->  15[arrowshape=vee,penwidth=      1.78042048, color="#FFCC33"];
 7 ->  13[arrowshape=vee,penwidth=      1.70638297, color="#CCFFFF"];
 8 ->   5[arrowshape=vee,penwidth=      3.21975483, color="#CCFF99"];
 9 ->  12[arrowshape=vee,penwidth=      2.47722286, color="#CCFF00"];
 9 ->  13[arrowshape=vee,penwidth=      1.41201772, color="#CCFF00"];
 9 ->  17[arrowshape=vee,penwidth=      2.31502497, color="#CCFF00"];
10 ->   2[arrowshape=vee,penwidth=      1.44435627, color="#CCFFFF"];
10 ->   7[arrowshape=vee,penwidth=      1.03121586, color="#CCFFFF"];
10 ->  16[arrowshape=vee,penwidth=      1.50003087, color="#CCFFFF"];
11 ->  10[arrowshape=vee,penwidth=      1.72840183, color="#CC99FF"];
11 ->  16[arrowshape=vee,penwidth=      2.13382591, color="#CC99FF"];
12 ->   9[arrowshape=vee,penwidth=      0.73349271, color="#CC9933"];
12 ->  13[arrowshape=vee,penwidth=      1.50699757, color="#CC9933"];
13 ->   7[arrowshape=vee,penwidth=      1.39745583, color="#99FFCC"];
13 ->  17[arrowshape=vee,penwidth=      1.13347078, color="#99FFCC"];
14 ->   4[arrowshape=vee,penwidth=      1.30211157, color="#99FF66"];
14 ->   5[arrowshape=vee,penwidth=      1.00132679, color="#99FF66"];
15 ->   1[arrowshape=vee,penwidth=      1.32443039, color="#CC3399"];
15 ->   4[arrowshape=vee,penwidth=      1.63346112, color="#CC3399"];
15 ->   6[arrowshape=vee,penwidth=      2.27386028, color="#CC3399"];
15 ->  14[arrowshape=vee,penwidth=      2.67493819, color="#CC3399"];
16 ->  10[arrowshape=vee,penwidth=      3.33223069, color="#33FFFF"];
16 ->  11[arrowshape=vee,penwidth=      3.32587861, color="#33FFFF"];
17 ->   3[arrowshape=vee,penwidth=      0.88032271, color="#33FF99"];
17 ->   9[arrowshape=vee,penwidth=      0.56000418, color="#33FF99"];
17 ->  13[arrowshape=vee,penwidth=      2.95412645, color="#33FF99"];
} 
```

# c++ - 0x771515ee 处未处理的异常 Microsoft C++ 异常：内存位置 0x0049f904 处的 std::bad_alloc

> ID：10373997
> 
> 赞同：1
> 
> 时间：2012-04-29T16:56:16.440
> 
> 标签：c++

我需要分配一个非常大的数组有没有办法分配一个没有此类错误的数组？请注意，我有 8 GB 的内存而不使用矢量，这正是错误

```
Unhandled exception at 0x771515ee in __ Microsoft C++ exception:
 std::bad_alloc at memory location 0x0049f904.. 
```

这是我的一大段代码

```
#include<cstdlib>
int main()
{
  size_t arraySize =1024*1024*1024;
  int *a= new int[arraySize];
  for (int i = 0; i < arraySize; i++)
  {
    a[i] = 3;
  } 
  return 0; 
} 
```

/* 谢谢大家，我的问题的解决方案是创建一个具有 x64 位操作的新解决方案平台*/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:03:08.687

您正在尝试在 32 位进程中分配 4GB 块。那是不可能的。您被限制在 2GB 和 4GB 之间的可寻址空间，但实际上在单个连续块中可用的空间要少得多。

如果您真的需要在单个阵列中使用如此大的块，那么您将需要切换到 64 位进程。重新考虑你的算法可能是最好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:03:12.123

32 位地址空间可能没有 1GB 的连续可用内存（绝对不是 4GB）。您必须针对 x64 进行编译。