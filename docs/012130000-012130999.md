# StackOverflow 问答 12130000-12130999

# c++ - 标准输出和标准输入关系

> ID：12130000
> 
> 赞同：8
> 
> 时间：2012-08-26T12:09:38.800
> 
> 标签：c++, c

> **可能重复：**
> [从标准输入读取是否会刷新标准输出？](https://stackoverflow.com/questions/2123528/does-reading-from-stdin-flush-stdout)

C++ 标准保证在下次调用 std::cin 之前将打印缓冲区中包含的所有数据。像这样：

```
#include <iostream>

void bar()
{
    int x;
    std::cout << "Enter an integer: "; /* 1 */
    std::cin >> x; /* 2 */
} 
```

因为这：

**ISO/IEC 14882:2011**

> 27.4.2 窄流对象 [narrow.stream.objects]
> 
> 2 初始化对象cin后，cin.tie()返回&cout。其状态与 basic_ios::init (27.5.5.2) 所需的其他状态相同。
> 
> 27.4.3 宽流对象 [wide.stream.objects]
> 
> 2 初始化对象 wcin 后，wcin.tie() 返回 &wcout。其状态与 basic_ios::init (27.5.5.2) 所需的其他状态相同。

但是在 C 中，真的不能保证 stdout 缓冲区中包含的所有内容都会在任何尝试 stdin 之前被打印？

```
#include <stdio.h>

void bar()
{
    int x;
    printf("Enter an integer: "); /* 1 */
    scanf("%d", &x); /* 2 */
} 
```

我知道标准输出是行缓冲的，但我不想在这种情况下放置 '\n' 字符。使用 fflush / fclose / etc 是在 C 中输入请求之前获得输出的唯一正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T14:30:51.870

不，没有这样的保证。是的，您可以使用 fflush() 来确保刷新标准输出。

这个问题密切相关：[从标准输入中读取是否刷新标准输出？](https://stackoverflow.com/questions/2123528/does-reading-from-stdin-flush-stdout)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T12:35:25.353

我不知道 C++ 中的 cin / cout 关系，谢谢。在 C 中，我不知道刷新标准输出缓冲区的其他方法。当我需要确保输出已在给定时间打印时，我总是使用**fflush 。**

# pydev - 在项目级别设置环境变量

> ID：12130001
> 
> 赞同：2
> 
> 时间：2012-08-26T12:09:41.837
> 
> 标签：pydev

将 PyDev 与 Eclipse Juno 一起使用，我需要设置一些环境变量来调试我项目中的许多脚本中的每一个。我已经找到了如何为给定的脚本设置它们，但是为所有脚本都这样做是完全不切实际的。我发现的唯一解决方案是将这些变量添加到首选项中的 Python 解释器配置中。但随后它将被所有项目使用，这是我不想要的。

我想创建一个脚本来设置这些环境变量，然后启动 Python，然后将其添加为新的 Python 解释器，但 PyDev 不接受具有相同实际 exe 的两个解释器（我猜它检查 sys.executable）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:25:14.337

推荐的方法实际上是在 Python 解释器级别设置它。

您可以使用 virtualenv ( [http://pypi.python.org/pypi/virtualenv](http://pypi.python.org/pypi/virtualenv) ) 在不同的路径中创建解释器的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-08T17:34:36.170

只是为了详细说明@FabioZadrozny 的答案满足了 OP 的需要......

如果您没有想到，请执行以下操作：

*   从菜单“窗口->首选项”
*   导航到“PyDev->解释器->Python解释器”
*   使用“新建...”按钮创建一个新的解释器实例
*   将其命名为“python-MyProj”，但使用您已经在使用的相同可执行文件
*   现在在该解释器的“环境”选项卡中，设置所需的环境变量

现在，查看 PyDev 项目以使用该解释器：

*   右键单击项目以获取“属性...”
*   导航到“PyDev-解释器/语法”
*   按名称选择新创建的解释器实例

现在运行项目中的任何 python 文件，它应该“看到”配置的环境变量。

通过这种机制，您*确实*有一个“项目特定设置”......同样，由于@FabioZadrozny 指出的原因，*需要*在解释器级别进行设置。

# scala - 宏采用类体，消除显式新运算符？

> ID：12130002
> 
> 赞同：3
> 
> 时间：2012-08-26T12:09:55.650
> 
> 标签：scala, macros, new-operator, scala-2.10

我从不喜欢`new`Scala 中的运算符，尤其是 DSL。*没有* 构建对象的解决方法`new`通常非常难看。例如，如果你 import `scala.actors.Actor._`，你有`actor { ... }`，但在 body 内部你不能访问`this: Actor`，所以在那个对象中也有各种各样的伪实例方法，比如`receive`、`react`、`self`等等。

使用 Scala 2.10 宏，我想知道是否有机会获得以下工作？

```
object Button {
  def apply(body: ? ): Button = macro applyImpl(body)
  def applyImpl(c: Context)(body: c.Expr[ ? ]): c.Expr[Button] = ?
}
trait Button {
  def text: String
  def text_=(s: String): Unit
  def doSomething(): Unit
}

Button {
  text = "test"
  doSomething()
} 
```

作为一个额外的挑战，如果`doSomething`是会发生什么`protected`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:39:25.483

我认为这行不通，因为

```
{
   text = "test"
   doSomething()
} 
```

不会编译，因为在特征之外没有`text`也没有方法。宏目前只能作用于已经过类型检查的表达式。`doSomething()``Button`

# java - 如何在tomcat 6上启用NIO /大气

> ID：12130005
> 
> 赞同：0
> 
> 时间：2012-08-26T12:10:22.740
> 
> 标签：java, tomcat, atmosphere

我在 tomcat 6 上尝试气氛，但只有长轮询有效，websockets 无效。我在控制台输出中收到的消息是

```
 Tomcat failed to detect this is a Comet application because context.xml is missing or the Http11NioProtocol Connector is not enabled. 
```

任何有关这方面的信息将不胜感激，谢谢

**更新**：修改 web.xml 和 server.xml 后，错误消息消失，但聊天应用程序总是回退到长轮询 - 我尝试了几种不同的 websocket 演示的 .war 部署，它们的行为都相同。

我也试过 Tomcat 7，但它仍然使用长轮询。

一些启动日志信息

```
10:42:30.423 [main] INFO  o.atmosphere.cpr.AtmosphereFramework - Installed Default AtmosphereInterceptor [Android Interceptor Support, SSE Interceptor Support, JSONP Interceptor Support]. Set org.atmosphere.cpr.AtmosphereInterceptor.disableDefaults in your xml to disable them.
10:42:30.423 [main] WARN  o.atmosphere.cpr.AtmosphereFramework - No BroadcasterCache configured. Broadcasted message between client reconnection will be LOST. It is recommended to configure the HeaderBroadcasterCache.
10:42:30.423 [main] INFO  o.atmosphere.cpr.AtmosphereFramework - HttpSession supported: false
10:42:30.423 [main] INFO  o.atmosphere.cpr.AtmosphereFramework - Using BroadcasterFactory: org.atmosphere.cpr.DefaultBroadcasterFactory
10:42:30.423 [main] INFO  o.atmosphere.cpr.AtmosphereFramework - Using WebSocketProcessor: org.atmosphere.websocket.DefaultWebSocketProcessor
10:42:30.423 [main] INFO  o.atmosphere.cpr.AtmosphereFramework - Using Broadcaster: org.atmosphere.jersey.JerseyBroadcaster
10:42:30.428 [main] INFO  o.atmosphere.cpr.AtmosphereFramework - Atmosphere Framework 1.0.0.beta5 started.

27/08/2012 10:42:30 AM org.apache.coyote.http11.Http11NioProtocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
27/08/2012 10:42:30 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 11568 ms 
```

当聊天客户端连接时

```
27/08/2012 10:47:57 AM org.apache.tomcat.util.net.NioSelectorPool getSharedSelector 
```

信息：使用共享选择器进行 servlet 写入/读取

发送消息时

```
10:48:09.256 [http-8080-exec-2] DEBUG o.a.cpr.AsynchronousProcessor - Cancelling the connection for request AtmosphereRequest{ contextPath=/atmosphere-rest-chat servletPath=/chat pathInfo=null requestURI=/atmosphere-rest-chat/chat requestURL=http://mogwai:8080/atmosphere-rest-chat/chat destroyable=true} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:25:28.967

在 context.xml 中：

```
<?xml 版本="1.0" 编码="UTF-8"?>
<上下文>
    <加载程序委托="true"/>
</上下文>

```

在 server.xml 中：

```
<Connector connectionTimeout="20000" port="8080" 
           protocol="org.apache.coyote.http11.Http11NioProtocol" 
           redirectPort="8443"/> 
```

确保在类路径中只定义了一个 CometProcessor 实现。如果捆绑了 catalina.jar，您可能希望从您的 webpass 中删除它。有关更多信息，请参阅此线程：

[http://mail-archives.apache.org/mod_mbox/tomcat-users/200707.mbox/%3C11785700.post@talk.nabble.com%3E](http://mail-archives.apache.org/mod_mbox/tomcat-users/200707.mbox/%3C11785700.post@talk.nabble.com%3E)

# spring - 如何在 Spring Roo 自定义控制器的表单中显示字段错误

> ID：12130007
> 
> 赞同：1
> 
> 时间：2012-08-26T12:10:47.667
> 
> 标签：spring, validation, message, spring-roo

我遇到以下问题：错误消息未显示在用户表单中，但存在于 BindingResult 中。需要你的帮助。我正在使用 Spring Roo 生成的控制器 SignUpController

```
@RequestMapping("/signup/**")
@Controller
public class SignUpController {

List<ObjectError> signUpErrors;

@Autowired
private SignUpValidator validator;

@ModelAttribute("UserRegistrationForm")
public UserRegistrationForm formBackingObject() {
    return new UserRegistrationForm();
}

@RequestMapping(params = "form", produces = "text/html")//, method = RequestMethod.GET)
public String createForm(Model uiModel) {
    populateSignUpForm(uiModel, new UserRegistrationForm());
    //uiModel.addAttribute("signUpErrors", signUpErrors);
    return "signup/index";
}

@RequestMapping(method = RequestMethod.POST, produces = "text/html")
public String create(@Valid UserRegistrationForm userRegistration,
        BindingResult bindingResult, Model uiModel, HttpServletRequest request) {
    validator.validate(userRegistration, bindingResult);
    if (bindingResult.hasErrors()) {
        populateSignUpForm(uiModel, userRegistration);
        //uiModel.addAttribute("signUpErrors", bindingResult.getAllErrors());
        return "signup/index";
    }
... 
```

对于自定义表单支持对象 UserRegistrationForm

```
public class UserRegistrationForm {
    @NotNull(message="Must be filled.")
    @Size(min=6, max = 45)
    private String login;
    @Email
    private String email;
    @NotNull
    @Size(min=6, max = 45) 
```

，尝试使用自定义验证器对其进行验证。我可以向用户显示错误消息，直接将 BindingResults 传递给 jspx，并使用如下代码：

```
 <c:if test="${signUpErrors.size()>0}">
        <util:panel id="title" title="${title}">
            <h2>
                <spring:message code="signup_index_error" />
            </h2>
            <p></p>

            <c:forEach var="err" items="${signUpErrors}">
                <br />
                <tr>
                    <td>${err.objectName} </td>
                    <td>${err.codes} </td>
                    <td>${err.arguments} </td>
                    <td>${err.defaultMessage} </td>
                </tr>
            </c:forEach>
        </util:panel>
        <p></p>
    </c:if 
```

但是标准的 Roo 和 Spring 标签不起作用：

```
 <field:input field="login"
        id="fc_.._UserRegistrationForm_login" required="true"
        z="" />
    <sf:errors path="login" cssStyle="error"></sf:errors>
    <field:input field="email"
        id="fc_.._UserRegistrationForm_email" required="true"
        z="" />
        <sf:errors path="*" cssStyle="error"></sf:errors> 
```

# ruby-on-rails - Rails Meta_Search：在关联模型的显示页面中搜索

> ID：12130008
> 
> 赞同：1
> 
> 时间：2012-08-26T12:11:00.337
> 
> 标签：ruby-on-rails, model-associations, meta-search

我有一个模型trip.rb

```
 class Trip < ActiveRecord::Base
    has_and_belongs_to_many :categories
 end 
```

我正在使用 meta_search 在它的索引页面上搜索旅行。

```
 <%= form_for @search do |f| %>             

     <%= f.collection_select :location_id_equals, Location.order('country ASC').all, :id, :name, :include_blank => true, :prompt => "All locations" %> 

     <%= f.collection_select :categories_id_equals, Category.all, :id, :name, :include_blank => true, :prompt => "All categories"  %> 

     <%= f.collection_select :budget_id_in, Budget.all, :id, :name, :include_blank => true, :prompt => "All budgets" %> 

     <%= submit_tag "Find", :class => "btn btn-primary btn-large" %> </li>

  <% end %> 
```

trips_controller.rb

```
 def index   
    @search = Trip.search(params[:search])  
  end 
```

类别.rb

```
class Category < ActiveRecord::Base
  has_and_belongs_to_many :trips
end 
```

现在的事情是我想在**类别显示页面**上添加搜索并在那里搜索**相关的旅行。**

问题是我不是专家，也不确定如何正确执行此操作。

有人可以指出正确的方向吗？谢谢。

# iphone - 我应该如何迁移我的核心数据？

> ID：12130013
> 
> 赞同：0
> 
> 时间：2012-08-26T12:12:04.097
> 
> 标签：iphone, objective-c, ios, core-data, core-data-migration

我的应用程序以前版本中的核心数据存储与当前版本的不同之处在于以下方面：

*   缺少属性
*   新属性
*   需要改变的属性
*   新实体
*   新关系
*   需要在实体之间移动的属性

我应该如何迁移我的数据？在研究这个问题之前，我的想法是我可以编写代码，从以前的模型中获取数据并将其放入新模型中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:23:07.783

我认为[核心数据模型版本控制和数据迁移编程指南](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)将详细介绍这些问题。

# variables - 在同一个脚本中测试两个变量

> ID：12130014
> 
> 赞同：0
> 
> 时间：2012-08-26T12:12:05.730
> 
> 标签：variables, awk

问题 ：

我在这下面折断我的牙齿：

```
awk -v full=wc -v empty=wp '{
     ...blablabla...
     if ($4==full) stop=yes
     if (stop==yes && $4==empty) exit
     ...blablabla...
     }' 
```

如果我没有在开头声明这两个变量`full`，代码运行良好（我的意思是，我得到一个输出） `empty`，而是在脚本中使用这些值。如果我只使用脚本中的第一个变量，我会得到相同的输出。但是如果我只使用第二个变量，我根本就没有输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:45:39.453

考虑当变量被扩展时会发生什么。awk 主体的一部分来自：

```
' ... if ($4=='$full') ...' 
```

至

```
' ... if ($4==wc) ...' 
```

由于`wc`是一个“裸词”，awk 认为它是一个变量并替换它的值（空字符串），所以你得到这个：

```
' ... if ($4=="") ...' 
```

在构建 awk 脚本时，需要注意在 awk 中引用字符串。你需要：

```
' ... if ($4=="'$full'") ...' 
```

`-v`但是，像您所做的那样使用 awk 的选项传递值要优雅得多。

# c++ - 自动转换错误

> ID：12130017
> 
> 赞同：4
> 
> 时间：2012-08-26T12:12:25.917
> 
> 标签：c++, implicit-conversion

```
class Sample
{
public:
  Sample();
  Sample(int i);
  Sample(Sample& s);
  ~Sample();
};

Sample::Sample()
{
  cout<<"Default constructor called\n";
}

Sample::Sample(int i)
{
  cout<<"1-argument constructor called\n";
}

Sample::Sample(Sample& s)
{
  cout<<"Copy constructor called\n";
}

Sample::~Sample()
{
  cout<<"Destructor called\n";
}

void Fun(Sample s)
{

}

int main()
{
  Sample s1;
  Fun(5);

  return 0;
} 
```

我期望隐式转换为 5。但是，当我编译上面的代码时，我收到以下错误：

```
main.cpp:7:8: error: no matching function for call to ‘Sample::Sample(Sample)’
main.cpp:7:8: note: candidates are:
Sample.h:10:3: note: Sample::Sample(Sample&)
Sample.h:10:3: note:   no known conversion for argument 1 from ‘Sample’ to ‘Sample&’
Sample.h:9:3: note: Sample::Sample(int)
Sample.h:9:3: note:   no known conversion for argument 1 from ‘Sample’ to ‘int’
Sample.h:8:3: note: Sample::Sample()
Sample.h:8:3: note:   candidate expects 0 arguments, 1 provided
Helper.h:6:13: error:   initializing argument 1 of ‘void Fun(Sample)’ 
```

问题是什么？当我删除复制构造函数时，上面的代码编译成功。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T12:14:26.980

临时对象不能绑定到非常量引用。您的复制构造函数应该是：

```
Sample::Sample(const Sample&) 
```

删除它会告诉编译器生成一个普通的，它将具有上述签名。

# php - REST 和 PHP 会话混淆

> ID：12130020
> 
> 赞同：0
> 
> 时间：2012-08-26T12:13:07.157
> 
> 标签：php, session, rest

> **可能重复：**
> [会话真的违反了 RESTfulness 吗？](https://stackoverflow.com/questions/6068113/do-sessions-really-violate-restfulness)

愚蠢的问题，但在 PHP 中使用会话不是与 RESTful 应用程序的整个哲学相反吗？

换句话说，您是否“允许”在 REST 架构中进行会话？因为我认为它的一个要点是无国籍。

# cocos2d-iphone - cocos2d-2中的中间屏幕？

> ID：12130023
> 
> 赞同：1
> 
> 时间：2012-08-26T12:13:56.837
> 
> 标签：cocos2d-iphone

他们在这个 cocos2d 版本 2 中改变了定位方法吗？

我这样做：

```
mainBack=[CCSprite spriteWithFile:@"plus.png"];
            mainBack.position=ccp(winSize.width/2,winSize.height/2);
            NSLog(@"THE PLACE IS IN:%@",NSStringFromCGPoint(mainBack.position) );
            [self addChild:mainBack z:0]; 
```

它不在中间，而是在它旁边。它确实打印了 160、240。当图像大两倍时，我处于视网膜显示器中。

为什么它不在屏幕中间？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:28:07.543

我认为你在第一个场景的初始化方法中这样做。在 onEnter 方法中尝试相同的操作。一切正常。

```
-(void)onEnter
{
  [super onEnter];

   CGSize winSize = [CCDirector sharedDirector].winSize;

   mainBack=[CCSprite spriteWithFile:@"plus.png"];  
   mainBack.anchorPoint = ccp(0.5f,0.5f);
   mainBack.position=ccp(winSize.width/2,winSize.height/2);
   NSLog(@"THE PLACE IS IN:%@",NSStringFromCGPoint(mainBack.position) );
   [self addChild:mainBack z:0];
} 
```

# javascript - 从 JavaScript 读取动态内容

> ID：12130024
> 
> 赞同：1
> 
> 时间：2012-08-26T12:13:59.880
> 
> 标签：javascript

我们有一个结合 HTML 和 JavaScript 编写的查看器，可以显示我们自己的个人内容。需要在我们的查看器中显示来自另一个域的网页。有没有办法结合 JavaScript 和 HTML 来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T12:20:04.823

显示很容易，只需使用类似的[框架](http://www.w3.org/TR/html4/present/frames.html)

```
<iframe src="http://other-domain.example.com/some/page" /> 
```

（静态或动态创建）。[由于same-origin-policy](http://en.wikipedia.org/wiki/Same_origin_policy) ，只允许读取框架的跨域内容，您需要在自己的域上使用代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:19:22.183

框架？ [http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

但是javascript无法访问内容但是您可以在服务器端代码（例如php）中获取页面，获取您需要的数据，然后使用html/javascript显示它

# linq - 我有一些我想转向 linq 的代码

> ID：12130031
> 
> 赞同：0
> 
> 时间：2012-08-26T12:14:46.247
> 
> 标签：linq, foreach

我有这段代码，其中 highAmtCtrList 是必须更新的未完成合同列表，comCtrList 是我更新 highAmtCtrList 的稀释合同列表。

因此，对于 highAmtCtrList 中的每个合同，如果我在 comCtrList 中找到匹配的合同，我会使用从 comCtrList 返回的金额对其进行更新。

该代码有效，只是我想将其更改为linq。

有任何想法吗。提前谢谢。瑞马丁斯

```
foreach (Outstanding outCtr in highAmtCtrList)
{
    Dilution dilCtr = 
        comCtrList.FirstOrDefault(dil => dil.Contract == outCtr.Contract);
    if (dilCtr != null) outCtr.Amount += dilCtr.Amount;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:23:23.790

这个怎么样？

```
foreach (Outstanding o in highAmtCtrList)
{
    o.Amount += comCtrList.Where(d => d.Contract == o.Contract)
                          .Select(d => d.Amount)
                          .FirstOrDefault();
} 
```

这是另一种选择：

```
foreach (Outstanding o in highAmtCtrList)
{
    o.Amount += comCtrList.Where(d => d.Contract == o.Contract)
                          .Take(1)
                          .Sum(d => d.Amount);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:30:56.560

你的代码看起来不错。您可以在一行中编写所有这些，但 IMO 这是一个不太可维护的代码：

```
outCtr.Join(comCtrList, 
    o => o.Contract, 
    i => i.Contract, 
    (o, i) => o.Amount += i.Amount); 
```

编辑：仅总结第一个匹配项：

```
outCtr.ForEach(o => o.Amount += comCtrList
   .Where(i => i.Contract == o.Contract)
   .Select(i => i.Amount)
   .FirstOrDefault()); 
```

# php - CodeIgniter ActiveRecord FULLTEXT 多词搜索

> ID：12130033
> 
> 赞同：2
> 
> 时间：2012-08-26T12:15:16.010
> 
> 标签：php, mysql, codeigniter

我正在尝试搜索多个单词。我已经尝试将 FULLTEXT 添加到我的数据库架构中。

这是我现在的代码，只有一个字返回结果。

```
$term = $this->input->post('term');

$this->db->like('firstname', $term);
$this->db->or_like('lastname', $term);
$this->db->or_like('middlename', $term);

$query = $this->db->get('people');
$data['people'] = $query->result();
$this->load->view('people', $data); 
```

搜索像“John”、“Doe”或“Smith”这样的词是可行的。

但是当我尝试搜索“John Doe”或“John Doe Smith”时，它不会返回任何结果。

如何使用 CodeIgniter 的 Active Record 或“$this->get->query”实现多词搜索。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T12:32:36.470

试试这个：

```
$terms = explode(' ', $term);

foreach($terms as $term){
  $this->db->or_like('firstname', $term);
  $this->db->or_like('lastname', $term);
  $this->db->or_like('middlename', $term);
}

$query = $this->db->get('people'); 
```

**编辑：（**在您发表评论后）

```
 $parts = substr_count(trim($term), ' ');

  switch($parts){
      case 0:
          $this->db->or_like('firstname', $term);
          $this->db->or_like('lastname', $term);
          $this->db->or_like('middlename', $term);
          break;
      case 1;
          $this->db->or_like('CONCAT(firstname, " ", middlename)', $term);
          $this->db->or_like('CONCAT(firstname, " ", lastname)', $term);
          $this->db->or_like('CONCAT(middlename, " ", lastname)', $term);
          break;
      case 2:
      default:
          $this->db->or_like('CONCAT(firstname, " ", middlename, " ", lastname)', $term);
          break;

  }

  $query = $this->db->get('people'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:44:47.490

你得到这个结果是因为你在单个分隔的字段上运行了类似的句子。取而代之的是，您可以尝试先连接字段，然后对结果运行查询，就像这样：

```
$sql = "SELECT * FROM people WHERE CONCAT(firstname,' ', middlename,' ', lastname) LIKE '%$term%'";

$this->db->query($sql); 
```

# php - Yii 表单字段呈现两次

> ID：12130039
> 
> 赞同：1
> 
> 时间：2012-08-26T12:15:50.100
> 
> 标签：php, yii

注册页面中我的 yii 表单的字段被渲染了两次！！有人可以帮我找出是什么原因造成的吗？

这是来自控制器的代码：

```
public function actionRegister()
{
    $form=new Users;

            // collect user input data
            if(isset($_POST['Users']))
            {
                    $form->attributes=$_POST['Users']; // set all attributes with post
                    // NOTE Changes to any $form->value have to be performed BEFORE $form-validate()
                    // or else it won't save to the database. 

                    // validate user input and redirect to previous page if valid
                    if($form->validate())
                    {
                            // save user registration
                            $form->save();
                            $this->redirect(Yii::app()->createUrl('site/login'));
                    }
            }
            // display the registration form
            $this->render('register',array('form'=>$form));  
} 
```

这是视图中的代码：

```
<?php $pagetitle = "Hubylon | Register"; ?>
<?php $this->breadcrumbs=array('Register'); ?>

<div class="yiiForm">
<?php echo CHtml::beginForm(); ?>

<?php echo CHtml::errorSummary($form); ?>

<div class="row">
    <table>
        <tr>
            <td>*<?php echo CHtml::activeLabel($form,'username'); ?>:</td>
            <td><?php echo CHtml::activeTextField($form,'username'); ?></td>
            <td><?php echo CHtml::error($form,'username',array('style' => 'color:red;font-size:11px;')); ?></td>
        </tr>
    </table>
</div>

<div class="row">
    <table>
        <tr>
            <td>*<?php echo CHtml::activeLabel($form,'password'); ?>:</td>
            <td><?php echo CHtml::activePasswordField($form,'password'); ?></td>
            <td><?php echo CHtml::error($form,'password',array('style' => 'color:red;font-size:11px;')); ?></td>
        </tr>
    </table>
</div>

<div class="row">
    <table>
        <tr>
            <td>*<?php echo CHtml::activeLabel($form,'confirmPassword'); ?>:</td>
            <td><?php echo CHtml::activePasswordField($form,'confirmPassword'); ?></td>
            <td><?php echo CHtml::error($form,'confirmPassword',array('style' => 'color:red;font-size:11px;')); ?></td>
        </tr>
    </table>
</div>

<div class="row">
    <table>
        <tr>
            <td><?php echo CHtml::activeLabel($form,'first_name'); ?>:</td>
            <td><?php echo CHtml::activeTextField($form,'first_name'); ?></td>
            <td><?php echo CHtml::error($form,'first_name',array('style' => 'color:red;font-size:11px;')); ?></td>
        </tr>
    </table>
</div>
<div class="row">
    <table>
        <tr>
            <td><?php echo CHtml::activeLabel($form,'birthdate'); ?>:</td>
            <td><?php 
                $this->widget('zii.widgets.jui.CJuiDatePicker', array(
                    'attribute'=>'birthdate',
                    'model' => $form,
                    //'language'=>Yii::app()->language=='en' ? 'en' : null,
                    'options'=>array(
                        'dateFormat'=>'yy-mm-dd',
                        'defaultDate'=>$form->birthdate,
                        'buttonImage'=>Yii::app()->baseUrl.'/images/icons.date.png',
                        'buttomImageOnly'=>true,
                        'showAnim'=>'fold',
                        'showOn'=>'button',
                        'yearRange'=>'1900',),
                    'htmlOptions'=>array(
                        'style'=>'width:80px;vertical-align:top'
                    ),
                ));
           ?></td>
        </tr>
    </table>
</div>

<div class="action">
<?php echo CHtml::submitButton('Register'); ?>
</div>

<?php echo CHtml::endForm(); ?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:38:02.513

您给出的代码似乎没有问题，
但也许您可以检查`init()`当前控制器的布局和方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:32:08.537

我设法通过在渲染之前添加以下行来解决它：

```
$this->layout = '//layouts/login'; 
```

谢谢！

# actionscript-3 - Flex 绑定 List selectedItem

> ID：12130045
> 
> 赞同：0
> 
> 时间：2012-08-26T12:16:46.333
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

我是 flex 的新手，并尝试为 2 个列表选择组合数据，（参见下面的代码）：

```
<s:Label x="538" y="130" text="Industry of Interest:"/>
        <s:List id="reIndustry" x="538" y="150" width="165" height="122" dataProvider="{recruitIndustries}" labelField="industry"></s:List>
        <s:Label x="723" y="130" text="Qualifications:"/>
        <s:List id="reQualifications" x="723" y="150" width="165" height="122" selectedItem="reIndustry.selectedItem.qualification" labelField="qualification"></s:List> 
```

我想要完成的是，当您从“reIndustry”中选择数据时，所选项目的更多数据将显示在“reQualifications”列表中。

这是我的数据：

```
 <s:ArrayList id="recruitIndustries">
        <fx:Object industry="Admin/PA/Secretary" qualification="Other"/>
        <fx:Object industry="Automotive" qualification="Painter"/>
        <fx:Object industry="Building/Construct/Mine"/>
        <fx:Object industry="Engineering"/>
        <fx:Object industry="Finance/Accounting"/>
        <fx:Object industry="FMCG"/>
        <fx:Object industry="General Employment"/>
        <fx:Object industry="Health and Skincare"/>
        <fx:Object industry="Insurance"/>
        <fx:Object industry="International"/>
        <fx:Object industry="IT/Computer"/>
        <fx:Object industry="Legal"/>
        <fx:Object industry="Logistics"/>
        <fx:Object industry="Management"/>
        <fx:Object industry="Manufacturing"/>
        <fx:Object industry="Medical"/>
        <fx:Object industry="Part Time/ Temps"/>
        <fx:Object industry="Professions"/>
        <fx:Object industry="Retail"/>
        <fx:Object industry="Sales and Marketing"/>
        <fx:Object industry="Tourism/Hospitality"/>
    </s:ArrayList> 
```

如果可能，如何添加更多值以显示在第二个列表“reQualifications”中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:32:24.257

@RIAstar 问题是正确的。

你可以通过下面的代码来做到这一点： -

```
<fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;

            import spark.events.IndexChangeEvent;

            [Bindable]
            private var moreDataProvider:ArrayCollection = new ArrayCollection();
            private function itemClickHandler(event:IndexChangeEvent):void
            {
                moreDataProvider.removeAll();
                if(Object(reIndustry.selectedItem).hasOwnProperty('qualification'))
                    moreDataProvider.addItem(reIndustry.selectedItem);
            }
        ]]>
    </fx:Script>
    <s:layout>
        <s:VerticalLayout/>
    </s:layout>

    <s:Label x="538" y="130" text="Industry of Interest:"/>
    <s:List id="reIndustry" dataProvider="{recruitIndustries}" x="538" y="150" width="165" height="122" 
            labelField="industry" change="itemClickHandler(event)"/>
    <s:Label x="723" y="130" text="Qualifications:"/>
    <s:List id="reQualifications" dataProvider="{moreDataProvider}" x="723" y="150" width="165" height="122" 
            labelField="qualification"/> 
```

# c# - 树视图节点：“对象引用未设置为对象的实例”

> ID：12130047
> 
> 赞同：0
> 
> 时间：2012-08-26T12:16:58.163
> 
> 标签：c#, .net, exception-handling, treeview

我的`TreeView`控件正在显示某些选定硬盘驱动器的结构。在我的`addToParentNode`中，我在树视图展开后拨打电话。但是，当我将节点从一种方法传递到另一种方法时，会引发*“对象引用未设置为对象的实例”*异常。

```
void addToParentNode(TreeNode childNodes)
{
    DirectoryInfo getDir = new DirectoryInfo(childNodes.Tag.ToString());
    DirectoryInfo[] dirList = getDir.GetDirectories();
    foreach (DirectoryInfo dir in dirList)
    {
        TreeNode parentNode = new TreeNode();
        parentNode.Text = dir.Name;
        parentNode.Tag = dir.FullName;
        childNodes.Nodes.Add(parentNode);
    }
}

private void tv_fileExplore_AfterExpand(object sender, TreeViewEventArgs e)
{
    foreach (TreeNode item in e.Node.Nodes)
    {
        addToParentNode(item);
    }
} 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:18:59.877

根据您对问题的评论，`Tag`树节点的属性是`null`.

您正在为方法`null`中的每个树节点分配一个非值`addToParentNode`，但是在某个地方，必须有一个开始，并且您必须创建一个根节点。因此，**该根节点显然`Tag`仍将其属性设置为`null`**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:24:15.270

没有足够的上下文，但您可以添加一些保护措施，并处理异常（只有在您想处理它们时才捕获它们。例如，您可以向 TreeNode 添加一个工具提示以通知用户该节点有什么问题，

```
 void addToParentNode(TreeNode childNodes) 
    { 
        if ((childNodes != null) && (childNodes.Tag != null))
        {
            DirectoryInfo getDir = null;
            try {
               getDir = new DirectoryInfo(childNodes.Tag.ToString()); 
            }
            catch(SecurityException) {
                 childNodes.ToolTipText = "no access";
            }
            catch(PathTooLongException) {
                childNodes.ToolTipText = "path more then 254 chars";
            }
            catch(ArgumentException)
            {
               childNodes.ToolTipText = "huh?";
            }
            if (getDir!=null) && (!getDir.Exists) return;
            DirectoryInfo[] dirList = null;
            try {
               dirList = getDir.GetDirectories(); 
            }
            catch(UnauthorizedException) {
                childNodes.ToolTipText = "no access";
            }
            catch(SecurityException)
            {
                 childNodes.ToolTipText = "no access";
            } 
            if (dirList == null) return;
            foreach (DirectoryInfo dir in dirList) 
            { 
                TreeNode parentNode = new TreeNode(); 
                parentNode.Text = dir.Name; 
                parentNode.Tag = dir.FullName; 
                childNodes.Nodes.Add(parentNode); 
            } 
       }
    } 
```

# nsis - 如何为 OpenERP 6.1 版创建服务器 exe？

> ID：12130053
> 
> 赞同：0
> 
> 时间：2012-08-26T12:17:26.480
> 
> 标签：nsis, openerp

我想为 Windows 的 OpenERP 6.1 版创建服务器 exe。我已经创建了它，但问题是它没有 OpenERP 版本 6.0 exe 服务器之类的功能。例如启动服务、停止服务、查看日志、卸载。如何添加所有这些功能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T21:50:20.323

我自己没有做过，但是这个过程记录在[OpenERP 开发者手册](http://doc.openerp.com/v6.1/developer/13_build_and_deploy.html#binary-distribution)中。看起来您感兴趣的步骤是这样的：

```
makensis setup.nsi 
```

如果您查看[`setup.nsi`文件](http://bazaar.launchpad.net/~openerp/openobject-server/6.1/view/4262/setup.nsi#L162)，您可以看到它正在对服务执行某些操作。

```
Section -StopService
    nsExec::Exec "net stop openerp-server-6.1"
    sleep 2
SectionEnd 
```

# .htaccess - Htaccess 别名重定向假多语言 url

> ID：12130054
> 
> 赞同：1
> 
> 时间：2012-08-26T12:17:27.447
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有一个带有这种 url 的域 www.domain.com

**www.domain.com/my-italian-page.html**（已经被其他htaccess规则重写）

我想创建一个假的多语言网址，例如

**www.domain.com/my-english-page.html**

用户将在地址栏中看到重写器 url **www.domain.com/my-english-page.html**但我想显示的内容是原始的**www.domain.com/my-italian-page.html** .

我在共享服务器上，所以我不能使用 apache vhost 规则，所以我必须通过 htaccess 找到解决方案。

有人可以帮我找到正确的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:52:57.713

所以你想要指向意大利内容的英文 URL？希望您生成这些重写规则的 php 脚本进行翻译。但是你会为你的每一页都这样做：

```
RewriteRule ^/?english-page.html$ /italian-page.html [L] 
```

对于您的每一页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:53:21.963

通常，您希望在 Web 服务器中执行的代码尽可能小，因此为每个页面设置重写规则通常不是一个好主意。我建议在启用 SEO URL 时采用大多数 CMS 的工作方式：

*   将任何 url（`mydomain/anytext.html`[实际上你也不应该使用 .html 扩展名]）重写为脚本（例如`mydomain.tld/translate.php`）

*   使用`$_SERVER['PATH_INFO']`（应该包含`anytext.html`）的内容来显示正确的页面

*   如果页面不存在，请设置正确的 HTTP 响应代码：（[`http_response_code(...)`](http://php.net/http_response_code)有关 php5 5.4 以下的函数，请参阅此答案的结尾：[PHP：如何发送 HTTP 响应代码？](https://stackoverflow.com/questions/3258634/php-how-to-send-http-response-code/12018482#12018482)）

.htaccess 示例（实际上最初是“被盗”并从typo3 设置中严重修改）

```
RewriteEngine On

# Uncomment and modify line below if your script is not in web-root
#RewriteBase / 
RewriteCond %{REQUEST_FILENAME} !-s
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule (.*) translate.php$1 [L] 
```

非常基本的类伪代码（未测试，可能存在语法错误）示例：

```
<?php
// using a database? you have to escape the string
$db = setup_db();
$page = db->escape_string(basename($_SERVER['PATH_INFO']));
$page = my_translate_query($page);

// no database? do something like this.
$trans = array( 'english' => 'italian', 'italian' => 'italian' );
$page = 'default-name-or-empty-string';
if(isset($_SERVER['PATH_INFO'])) {
   if(isset($trans[basename($_SERVER['PATH_INFO'])])) {
      $page = $trans[$trans[basename($_SERVER['PATH_INFO'])]];
   }
   else {
      http_response_code(404);
      exit();
   }
}

// need to redirect to another script? use this (causes reload in browser)
header("Location: otherscript.php/$page");
// you could also include it (no reload), try something like this
$_SERVER['PATH_INFO'] = '/'.$page;
// you *may* have to modify other variables like $_SERVER['PHP_SELF']
// to point to the other script
include('otherscript.php');
?> 
```

我在您的回答中看到您有另一个脚本 -`dispatcher.php`您似乎不愿意修改。我相应地修改了我的回复，但请记住，到目前为止，最简单的方法是修改现有脚本以处理任何英文路径本身。

# c# - 如何关闭 Entity Framework 5 的复数表创建？

> ID：12130059
> 
> 赞同：29
> 
> 时间：2012-08-26T12:18:23.387
> 
> 标签：c#, entity-framework-5, pluralize

我正在尝试使用 Entity Framework 5。第一个问题是 EF 自动创建表。我试图通过包含来修复它 `dbModelBuilder.Conventions.Remove<PluralizingTableNameConvention>()`。第二个问题是这样的错误

> 自数据库创建以来，支持“CountryContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库。

我尝试修复它，`dbModelBuilder.Conventions.Remove<IncludeMetadataConvention>();`但没有任何意义。接下来是数据访问层：

```
Table(Name = "tblCountries")]
public class Country
{
     [Column(Name = "id", IsDbGenerated = true, IsPrimaryKey = true)]
    public int Id {get;set;}

    [Column(Name = "name")]
    public string Name {get;set;}
}

public class CountryContext:DbContext
{
    public CountryContext(string connStr):base(connStr)
    {
    }

    public DbSet<Country> TblCountries { get; set; }

    protected override void OnModelCreating(DbModelBuilder dbModelBuilder)
    {
        dbModelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        dbModelBuilder.Conventions.Remove<IncludeMetadataConvention>();
    }
}

    public class CountryDal:BaseDal
{
   public int CheckIsExist(Country country)
    {
        int id = 0;
        using (var context = new CountryContext(ConnectionString))
        {
            var first = context.TblCountries.FirstOrDefault(el => el.Name == country.Name);
            if (first != null)
            {
                id = first.Id;
            }
        }
        return id;
    }
    } 
```

附加信息：VS 2012，框架 4.5，实体框架 5.0.0.0 而对于 EF 4，它可以完美运行（没有 OnModelCreating 方法）。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-06-17T18:43:23.743

您可以在 OnModelCreating 方法中编写此代码：

```
modelBuilder.Conventions.Remove<PluralizingTableNameConvention>(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T20:23:32.163

如果您不希望 EF 创建表并管理模型和数据库之间的一致性，只需在应用程序启动时使用它：

```
Database.SetInitializer<CountryContext>(null); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-28T13:18:42.187

在 EF 6.0 中使用 LINQ：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    base.OnModelCreating(modelBuilder);
    var conventions = new List<PluralizingTableNameConvention>().ToArray();
    modelBuilder.Conventions.Remove(conventions);
} 
```

# javascript - /如何使用 java 脚本在 safari 浏览器中获取活动的 Tab url

> ID：12130070
> 
> 赞同：2
> 
> 时间：2012-08-26T12:21:00.670
> 
> 标签：javascript, url, safari-extension

如何在 safari 浏览器中使用 java 脚本获取浏览器窗口或活动选项卡 URL？

我尝试使用 ->

文档.url

window.location.href

但是这两种解决方案都给了我这么多的网址。我不知道为什么？

我还搜索了 safari.application.browserWindow.activeTab 给出了当前活动窗口的 obj 。但是我不知道activeTab类提供了哪些方法

如果有人知道，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T20:52:21.800

如果您只想要当前选项卡中“顶部”文档的 URL，您可以使用

```
safari.application.activeBrowserWindow.activeTab.url 
```

从您的扩展程序的全局页面中。

SafariBrowserTab 类的属性和方法在这里给出：[https ://developer.apple.com/library/safari/#documentation/UserExperience/Reference/SBrowserTabClassReference/SafariBrowserTab.html#//apple_ref/doc/uid/TP40009793](https://developer.apple.com/library/safari/#documentation/UserExperience/Reference/SBrowserTabClassReference/SafariBrowserTab.html#//apple_ref/doc/uid/TP40009793)

我从您的问题推断出您的扩展程序正在使用注入脚本，该脚本将运行它的页面的 URL 报告给全局页面。您的全局页面正在接收多个 URL，因为注入的脚本不仅在选项卡的“顶部”文档中运行，而且还在其中的每个 iframed 文档中运行。

如果要防止注入的脚本在 iframe 中运行，请将代码包装在如下语句中：

```
if (window == window.top) {
    // do stuff
} 
```

# .net - 和运算符具有 1 2 4 8 16-like enumeration

> ID：12130074
> 
> 赞同：3
> 
> 时间：2012-08-26T12:21:15.943
> 
> 标签：.net, vb.net, comparison, enumeration

我已经用了很长时间了。现在我想知道它是如何工作的。我有一个例子：

```
If e.State And DrawItemState.Selected Then
    'if e.state includes DrawItemState.Selected do something
End If 
```

E.state 有 1 2 4 8 16 32 64 128 等选项... e.State 还可以包含多个选项。例如 4 + 32 即 36 包括两个状态。我可以用“and”运算符检查它们。我完全了解用法，但我不知道它是如何工作的。另外我想知道用“Select Case”块检查每个条件是否更有效。

编辑：我现在明白了逻辑。效率怎么样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T12:29:28.000

这是一个[按位运算](https://en.wikipedia.org/wiki/Bitwise_operation)。查看二进制中的数字（1、2、4、8...）：`1`、`10`、`100`等`1000`。如果将它们相加，则会得到例如`1010`，并且“与”它们会带来例如

```
 1010
& 1000
  ====
  1000 
```

由于 False = 0 和 True = 所有不为 0 的 if 语句有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T00:59:54.257

您的代码实际上将逻辑和按位 AND 运算符混为一谈：存在隐式转换，如果您打开 Option Strict On，则会引发编译器错误。只使用按位运算符更“正确”，如下所示：

```
If (e.State And DrawItemState.Selected) = DrawItemState.Selected Then 
```

你的问题是一个非常好的问题。Visual Basic 的 AND 运算符在这方面有点混乱，相信很多程序员都会有同样的困惑。我当然做到了，早在那天:-)

至于与 SELECT CASE 相比的效率，这取决于您是要自己处理每个标志，还是要处理标志的模式。

如果您将 e.State 视为一个灯开关面板，每个开关都可以打开或关闭，这会有所帮助。SELECT CASE 可用于处理开关模式，但不能用于处理单个开关。

例如

```
CASE DrawItemState.Selected 
```

仅当 e.State 为 ONLY .Selected 时才会触发。如果 e.State 是 .Selected 加上 .Focus，像这样：

```
e.State = DrawItemState.Selected Or DrawItemState.Focus 
```

那么该 CASE 语句将不会触发。

# c - How to provide parameters to commands called by `system()`?

> ID：12130076
> 
> 赞同：0
> 
> 时间：2012-08-26T12:21:56.957
> 
> 标签：c, spawn

I want to execute the following commands from a C program:

```
amixer --quiet set Master 5+
amixer --quiet set Master 6- 
```

Here, 5 and 6 are not fixed values. They are Input Arguments of the code which can have different values.

Can anybody please guide me on how to achieve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:27:01.993

Did you try:

```
system("amixer --quiet set Master 5+");
system("amixer --quiet set Master 6-"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:27:51.303

The following code can achieve this:

```
#include <stdio.h>
#include <stdlib.h>     /* For system() */

#define SIZE 28

int main()
{
    char action;
    unsigned int level;

    char CommandString[SIZE];

    printf ("\nTo Increase\\Decrease volume press 'i'/'d': ");
    scanf  ("%c", &action);

    if (action!='i'&& action !='d')
    {
        printf ("\nInvalid Choice, please try again\n");
        main();
    }

    printf ("\nEnter Voice Change Level: ");
    scanf  ("%u", &level);

    if (action=='i')
    {
        printf ("\nIncreasing Voice level by: %u\n", level);
        sprintf (CommandString, "amixer --quiet set Master %d+", level);
    }
    else
    {
        printf ("\nDecreasing Voice level by: %u\n", level);
        sprintf (CommandString, "amixer --quiet set Master %d-", level);
    }

    system (CommandString);

    return 0;
} 
```

# javascript - JavaScript 使验证码文本不可复制

> ID：12130078
> 
> 赞同：-3
> 
> 时间：2012-08-26T12:22:12.807
> 
> 标签：javascript, jquery, jquery-events, captcha

我正在使用客户端验证码进行基本的垃圾邮件保护，并且我创建的脚本会生成随机数。我将背景（“嘈杂”）图像提供给显示我生成的数字并使用过的输入：

```
$('#nrx_txtCaptcha').bind("contextmenu",function(e){
          return false;
   }); 
```

禁用右键单击，但是当突出显示验证码 textfiedd 的数字时，您可以通过`ctrl`+复制它`c`。那么如何使它不可复制呢？还是有一种方法可以使它不“引人注目”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:28:14.040

这是我发现我需要解决这个问题的解决方案。

```
 // Disable paste to input field
  jQuery('#nrx_txtInput').bind("paste",function(e) {
      e.preventDefault();
  }); 
       //  Disable copy from captcha field
 jQuery('#nrx_txtCaptcha').bind("copy",function(e) {
    e.preventDefault();
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:38:50.923

您可以将 onmouseup 附加到验证码所在的元素，然后检查是否选择了某些内容`document.selection()`。但我非常同意（我不在乎这是否是好英语——你明白我的意思）Bergi。

# javascript - 如何将节点移动到所需位置？

> ID：12130086
> 
> 赞同：3
> 
> 时间：2012-08-26T12:23:12.650
> 
> 标签：javascript, graph-visualization, arbor.js

我想将特定节点（比如我有节点引用）移动到所需位置（比如画布的左上角）。我尝试在示例项目中做类似的事情，他们在用鼠标拖动时移动节点。但这似乎不起作用。我没有看到节点按预期移动。这是我的代码。

```
$("#someElement").click(function() {
  sys.eachNode(function(node, pt) {
    if (node.name === "specificNode") {
      // moveToOrigin
      var s = arbor.Point(1, 1);
      var p = sys.fromScreen(s);
      node.fixed = true;
      node.p = p;
      node.fixed = false;
      node.tempMass = 1000;
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T02:41:38.133

To move a node to a desired position get the desired position relative to the canvas and set it via particle system's `fromScreen(...)` function:

```
var point = point;
var pos = canvas.offset();
var s = arbor.Point(point.x-pos.left, point.x-pos.top);
node.p = particleSystem.fromScreen(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T11:07:32.357

您需要先设置节点的位置，然后再次为节点迭代每个循环。

```
redraw: function () {
    gfx.clear()

    particleSystem.eachNode(function (node, pt) {
        //var node = particleSystem.getNode("Carrol Wahi")
        if (node.data.color == "yellow") {
            var pos = $(canvas).offset();
            var point = particleSystem.fromScreen(arbor.Point(pos.left + 150, pos.top));
            node._fixed = true;
            node._p = point;
            //console.log("x=" + point.x + ", y=" + point.y);
            node.tempMass = .1
        }
    });

    particleSystem.eachEdge(function (edge, pt1, pt2) {
        //   your code goes here
      }
    particleSystem.eachNode(function (node, pt) {
       //your code goes here
    }) 
```

}

# c++ - 是否可以强制说“gcc”为 C 和 C++ 中相同的源代码生成相同的二进制文件？

> ID：12130089
> 
> 赞同：0
> 
> 时间：2012-08-26T12:23:44.913
> 
> 标签：c++, c, gcc, flags

假设有一个 C 程序，如下所示：

```
int main(int argc, char** argv)
{
    return 0;
} 
```

我有两个带有上述源代码的文件，一个带有“c”扩展名，另一个带有“cpp”。我分别将它们编译为 C 和 C++ 程序。**二进制文件是不同的**。我认为 C++ 是一种“零开销”的语言？:-) 我试图找到的是两个不同设置的编译器标志，其中生成的二进制文件是相同的。最好是某种语言标准，而不是任何类型的 GCC 扩展。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T12:40:39.387

> **二进制文件是不同的。**

*它们有何不同*？**

 *GCC 会将有关原始源文件名和使用的选项的信息嵌入到文件中，因此即使内容相同，不同文件名也会始终存在*一些差异。*

如果我将您的程序编译为 C 和 C++，我看到的唯一区别是 C++ 版本链接到`libstdc++`，这在使用链接时会自动发生`g++`。如果我改为使用 `gcc`链接，那么二进制文件几乎是相同的。

注意，您可以使用它`gcc`来编译 C++ 程序，`gcc`和`g++`二进制文件只是查看文件名并调用正确的编译器二进制文件（`cc1`对于 C，`cc1plus`对于 C++）进行实际编译的驱动程序。有关详细信息，请参阅[http://gcc.gnu.org/onlinedocs/gcc/Invoking-G_002b_002b.html 。](http://gcc.gnu.org/onlinedocs/gcc/Invoking-G_002b_002b.html)

这表明对于相同的源代码，汇编器输出的唯一区别是给出原始文件名的字符串，并且目标文件的大小相同：

```
$ cat f.c
cat: f.c: No such file or directory
$ rm f.c
$ cat > f.c
int main(int argc, char** argv)
{
    return 0;
}
$ ln -s f.c f.cc
$ gcc f.c -S -o f.c.s
$ g++ f.cc -S -o f.cxx.s
$ diff f.c*.s
--- f.c.s       2012-08-26 13:45:58.109711329 +0100
+++ f.cxx.s     2012-08-26 13:46:00.482634256 +0100
@@ -1,4 +1,4 @@
-       .file   "f.c"
+       .file   "f.cc"
        .text
        .globl  main
        .type   main, @function
$ gcc f.c -c -o f.c.o
$ g++ f.cc -c -o f.cxx.o
$ ls -l f.c*.o
-rw-rw-r--. 1 jwakely users 1240 Aug 26 13:46 f.c.o
-rw-rw-r--. 1 jwakely users 1240 Aug 26 13:46 f.cxx.o 
```

在最终的可执行文件中，不同之处在于它的链接方式，C++ 标准库是否链接到：

```
$ gcc f.c.o -o a.c.out
$ gcc f.cxx.o -o a.cxx.out
$ g++ f.cxx.o -o a.cxx.libstdcxx.out
$ ls -l a.c*.out
-rwxrwxr-x. 1 jwakely users 6323 Aug 26 13:48 a.c.out
-rwxrwxr-x. 1 jwakely users 6468 Aug 26 13:48 a.cxx.libstdcxx.out
-rwxrwxr-x. 1 jwakely users 6324 Aug 26 13:48 a.cxx.out 
```

如果您不需要 C++ 标准库，请不要链接到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T12:40:20.763

这只是“我的空主线有多短”错误问题的另一个版本。

有一部分“基础设施”承载启动和结束代码以及标准库全局对象，无论程序实际是什么，在任何情况下都必须链接。

测量一个空的主程序，实际上是测量启动/结束代码的大小。这在 C 和 C++ 中肯定是不同的，因为 C++ 准备调用 main 比 C 实际需要做的事情要多得多。

我不知道您所说的“零开销语言”是什么意思。C 和 C++ 都不是。它们都将各自域中的开销降至最低。根据定义，唯一的零开销语言是本机机器代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T13:11:25.077

当然它们是不同的，即使是像函数名这样简单的东西，c 和 c++ 的处理方式也不同。 `void foo()`在 c 中只是`foo`在 c++ 中，该名称会被破坏，因为 c 版本不包含足够的信息来处理具有不同参数列表的多个 foo 函数，例如`void foo(int)`.

然后是默认链接的不同标准库，因为它们被大多数 c/c++ 程序使用（对于您的零开销声明，可以禁用）。

最重要的是关于定义明确的行为的不同规则，c++ 不是 c 的超集，虽然有大量重叠，但在许多情况下它们是不同的。参见`sizeof('a')`c 和 c++ 中的示例。

结论：c 和 c++ 编译器从相同的源代码生成相同的二进制文件是极不可能发生的。*

# php - 为什么我通过 file_get_contents 下载文件会损坏文件？

> ID：12130090
> 
> 赞同：2
> 
> 时间：2012-08-26T12:23:45.880
> 
> 标签：php, url, file-get-contents

```
 $source_path = 'https://bip.wzp.pl/attachments/' . $filename;  

    $opts = array(
      'http'=>array(
        'method'=>"GET",
        'header'=>"Content-type: application/pdf",
      )
    );

   $context = stream_context_create($opts);    

    $data = file_get_contents($source_path, false, $context);

    if(($handle = fopen($dest_path, "w"))) {
        fwrite($handle, $data);
        fclose($handle);
        return $filename_converted;
    } 
```

`$source_path`例如：

> [https://bip.wzp.pl/attachments/28172_Statut](https://bip.wzp.pl/attachments/28172_Statut) Województwa Zachodniopomorskiego.pdf

当我尝试浏览器时，会正确显示 pdf 文档。

但是通过 PHP 下载的文件，它总是损坏。

**编辑**

我检查了`$data`内容。它有首页 html :/ 奇怪`$source_path`地放入浏览器返回 pdf

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:26:30.227

好像您尝试下载 PDF，尝试使用以下命令将其保存为二进制文件：

```
fopen($dest_path, "wb") 
```

# php - 我正在为 twitch 和 own3d tv 使用 json api，我的页面非常慢

> ID：12130091
> 
> 赞同：0
> 
> 时间：2012-08-26T12:24:00.507
> 
> 标签：php, json, api, performance

正如我在标题中所说，我通过 php 使用用于 twitch tv 和 own3d tv 的 json api 来获取我想要的流的信息。

这个问题是页面加载不快，事实上，有时 php 服务器会因为 30 秒或更长时间的功能而停止。错误：致命错误：超过 30 秒的最大执行时间

我正在使用在线指标：

```
 function status($stream_id, $type){
if($type == 't'){

    $chan = "http://api.justin.tv/api/stream/list.json?channel=" . $stream_id;
    $json = file_get_contents($chan);
    $exist = strpos($json, $stream_id);
    if($exist) {
        return true;
    }else{
        return false;   
    }

}else if($type == 'o'){

    $url = 'http://api.own3d.tv/liveCheck.php?live_id=' . $stream_id;
    $xml = simplexml_load_file($url);

    $isLive=$xml->liveEvent->isLive;

    if ($isLive == "true") {
        return true;
    }else{
        return false;   
    }

}
} 
```

我正在使用一个从流中获取一些信息的函数：

```
function api_stream_data($stream_id, $type){
$stream_id = sanitize($stream_id);
$type = sanitize($type);

if($type == 't'){

    $streamData = json_decode(file_get_contents("http://api.justin.tv/api/stream/list.json?channel=$stream_id"),true);

    $data = array(
        'image'=>$streamData[0]['channel']['image_url_medium'],
        'title'=>$streamData[0]['title'],
        'limage'=>$streamData[0]['channel']['screen_cap_url_huge'],
        'game'=>$streamData[0]['meta_game']
    );
}else if($type == 'o'){
    $streamData = json_decode(file_get_contents("http://api.own3d.tv/rest/live/list.json?liveid=$stream_id"),true);
    $data = array(
        'image'=>$streamData[0]['thumbnail_small'],
        'title'=>$streamData[0]['live_name'],
        'limage'=>$streamData[0]['thumbnail_large'],
        'game'=>$streamData[0]['game_name']
    );
}

return $data;

} 
```

所有功能都运行良好，但问题是它们执行的时间......

有没有可能更快的方法？我已经看到其他一些加载速度非常快的站点示例，例如[www.solomid.net](http://www.solomid.net)和[www.clgaming.net](http://www.clgaming.net)。

提前感谢您的帮助！

**编辑：** *已*解决**感谢你们每一个人的帮助！我使用了一个将数据存储到数据库中的 cronjob，然后我只是进行了一个查询来请求它们，它每 5 分钟更新一次，但是，哦，好吧，总比没有好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T17:33:26.117

您的代码很慢，因为您正在为每个用户执行一个 http 请求。一个 http 请求通常需要大约 200ms-400ms。PHP 不是异步的，这意味着它将停止执行您的代码，直到它从 own3d 或 twitch 获得响应。

我不熟悉 own3d api，但在 Twitch 中，您可以发送您想要的所有用户 ID，它会在一个 http 请求中为您获取所有详细信息。

这就是我在我的网站上获取 twitchtv 直播流的方式。

例子：

$response = $client->get('', '', 'http://api.justin.tv/api/stream/list.json?channel='.implode(',', $users));

这将生成以下网址： [http ://api.justin.tv/api/stream/list.json?channel=IPLLoL,tsm_theoddone,KungenTV](http://api.justin.tv/api/stream/list.json?channel=IPLLoL,tsm_theoddone,KungenTV)

这样，您可以在一个 http 请求中获取所有用户的流。

我建议，由于您已经确定流属于哪个流提供者，而不是执行 http 请求，而是创建一个数组，为每个流提供者创建一个数组，并将流添加到相应的提供者。

最后发出一个 http 请求，一个用于 own3d 数组中的所有流，一个用于 twitchtv 数组中的所有流。现在您将拥有所有用户的流，只有两个 http 请求。

哦，还有一件事。当你渲染你的网站时不要做这个流获取东西，我有所有这些流在 ajax 中获取东西，这样，我的页面将首先加载，然后它会在我的网站被渲染后开始执行 http 请求。

缓存 twitch 和 own3d 发送给您的响应也是一个好主意。这样，您就不会为访问您网站的每个用户获取 own3d 和 twitch 的数据。如果您有一些稳定的流量，这特别好。

那应该真的可以提高速度。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:44:35.567

他们可能正在服务器上缓存 API 结果。这就是我对[Honstreams.com 所做](http://honstreams.com)的。服务器每分钟轮询 API 以获取新信息并将其存储，因此流显示的速度与网站的其余部分一样快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-30T07:20:12.857

我使用 jQuery 的 ajax 使请求异步：

```
<script>
$(document).ready(function() {
    $.ajax({
        url: 'your_php_which_do_the_request.php?stream=STREAMNAME',
        success: function(data) {
            if(data=="output of php") {
                // Stream is online
            } else {
                // Stream is offline
            }
        }
    });
});
</script> 
```

# c - 优化计算组合，避免溢出

> ID：12130094
> 
> 赞同：1
> 
> 时间：2012-08-26T12:24:30.823
> 
> 标签：c, overflow

我正在解决一个编程问题，该问题被困在`nCr`有效计算并同时避免溢出。我做了以下简单的简化，但我只是好奇是否有任何更复杂的简化可用。

`(n)!/(n-k)!*k! = n*(n-1)*.....*(max(n-k+1, k))/(min(n-k, k-1))`

考虑到 k 的不同情况是偶数还是奇数，是否还有更多的简化可能，只是提出一种方法。

任何评论表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T12:52:50.883

我在这里找到了一个有趣的解决方案：http: [//blog.plover.com/math/choose.html](http://blog.plover.com/math/choose.html)

```
 unsigned choose(unsigned n, unsigned k) {
      unsigned r = 1;
      unsigned d;
      if (k > n) return 0;
      for (d=1; d <= k; d++) {
        r *= n--;
        r /= d;
      }
      return r;
    } 
```

这通过交替执行乘法和除法来避免溢出（或至少限制问题）。

例如对于`n = 8`, `k = 4`:

```
result = 1;
result *= 8;
result /= 1;
result *= 7;
result /= 2;
result *= 6;
result /= 3;
result *= 5;
result /= 4;
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-21T18:51:01.150

我也必须解决这个问题。我所做的是利用乘法与除法相同数量的事实，并将它们捆绑在一起，一次进行一次乘法和一次除法。它最后以整数形式出现，但我使用 double 作为中间项，然后在最后四舍五入到最接近的整数。

```
// Return the number of combinations of 'n choose k'
unsigned int binomial(unsigned int n, unsigned int k) {
unsigned int higher_idx;
unsigned int lower_idx;
if(k > n-k) {
    higher_idx = k;
    lower_idx = n - k;
} else {
    higher_idx = n - k;
    lower_idx = k;
}
double product = 1.0;
double factor;
unsigned int idx;
for(idx=n; idx>higher_idx; idx--) {
    factor = (double)idx / double(lower_idx - (n - idx));
    product *= factor;
}
return (unsigned int)(product + 0.5);
} 
```

# facebook - 如何通过签名请求从标签 iframe 标签页获取访问者状态信息？

> ID：12130100
> 
> 赞同：1
> 
> 时间：2012-08-26T12:25:33.710
> 
> 标签：facebook, facebook-iframe, iframe-app

有没有办法获取访问我的 facebook 标签页的用户的状态信息？目前通过签署的请求，我可以获得国家信息。有没有办法获取状态信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:40:01.887

答案是否定的，请在此处查看文档[https://developers.facebook.com/docs/authentication/signed_request/](https://developers.facebook.com/docs/authentication/signed_request/)

你得到这样的数据

```
Array ( 
  [algorithm] => HMAC-SHA256 
  [issued_at] => 1328803958 
  [page] => Array ( 
    [id] => 114951721840 
    [liked] => 1 
    [admin] => 1 ) 
    [user] => Array ( 
      [country] => us 
      [locale] => en_US 
      [age] => Array ( [min] => 21 ) 
    ) 
) 
```

# c# - 用于跨平台 GUI 开发的最佳技术是什么？

> ID：12130105
> 
> 赞同：3
> 
> 时间：2012-08-26T12:26:07.590
> 
> 标签：c#, mono, cross-platform, freepascal, lazarus

我想开始一个新的（开源）项目，我希望它在 Windows 和 Mac OS X 上是跨平台的（Linux 也很好！）

我愿意为每个平台开发单独的前端，但核心逻辑应该共享。

我需要以下内容：

*   最好是原生 GUI 小部件集
*   FTP 连接（独立于平台的包装器）
*   TreeListView（同样，最好是独立于平台的包装器）

我已经研究了很长时间，我发现这些解决方案非常有吸引力：

*   Mono，在 Windows 上使用 WinForms，在 OS X 上使用 MonoMac
*   Lazarus (FreePascal) 与 LCL

**单声道优点：**

*   使用 C#，这是一种非常好的语言
*   具有适用于 OS X 和 Windows 的小部件集

**单声道缺点：**

*   Mono 框架是我的应用程序的依赖项

**Lazarus 与 FPC 专业人士：**

*   Pascal 也是一门很棒的语言，而且我知道如何使用 Indy 的 FTP 控件。
*   有**VirtualTreeview**，这是我见过的最好的 treelistview 控件！
*   可以交叉编译
*   还具有适用于 Windows 和 OS X 的小部件集
*   **没有框架依赖！**

**Lazarus 与 FPC 缺点：**

*   似乎支持正在消亡，但也许这只是我。
*   VirtualTreeview 似乎只有 Windows 端口。
*   可执行文件可能会变得非常大，但这可以修复。

我还用 FireMonkey 研究了 Delphi XE2，但它不使用原生控件，而且由于抗锯齿，它看起来并不原生。:(

现在，我最担心的是，我似乎找不到适用于 Windows 和 OS X 的 TreeListView！我真的需要一个带列的树视图。

重点在于具有跨平台 TreeListView 的技术，该技术**有效且仍受支持。**

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:46:46.690

我强烈建议反对帕斯卡。
这是一种垂死的语言，正如您所注意到的，支持会随着时间的推移而减少。
使用更现代的语言提出问题并获得答案的机会要大得多。

.NET/Mono 是一个不错的选择。
.NET 在 WPF 中有 TreeView，但它没有在 Mono 中实现，据我所知，它永远不会实现。

我建议检查的另一个选项是 Java（或者更好 - 其他基于 JVM 的语言，例如 Scala）。
非常跨平台（可能是最跨平台的语言），支持不错，语言还在不断发展（虽然卡了几年），语法+代码风格和C#很相似（不支持LINQ等），这使得从一个移动到另一个非常简单。
JVM 是一个先决条件，但这并不是什么大问题，因为它已经安装在大多数机器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:46:25.740

多年前，我将 Qt 和 wxWindows/wxWidgets 用于 Windows 和各种 *NIX 变体的单一代码库 UI。

坦率地说，我已经很多年没有和他们一起工作了，我也不知道他们对 Mac OS X 的支持有多好，但如果你愿意使用 C++（它们都是 C++ 库），它们可能值得一看。

# java - jVisualVM中采样和分析的区别

> ID：12130107
> 
> 赞同：160
> 
> 时间：2012-08-26T12:26:32.320
> 
> 标签：java, jvm, heap-memory, jvisualvm

VisualVM 有两个单独的选项卡用于采样和分析。VisualVM 中的采样和分析有​​什么区别？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-08-26T12:31:33.877

`Sampling`意味着进行大量线程转储并分析堆栈跟踪。这通常更快，不需要在您的字节码中进行运行时更改（这可能会破坏它），但也不太准确。

`Profiling`意味着[检测](https://docs.oracle.com/en/java/javase/16/docs/api/java.instrument/java/lang/instrument/Instrumentation.html)您的类和方法，以便它们在运行时“报告”。这更准确，因为它计算每次检测方法的调用，而不仅仅是在转储完成时捕获的那些。然而检测意味着你的类的字节码被改变了，这可能会破坏你的程序。实际上，出于这个原因，在大型应用程序服务器（如 JBoss 或 WebLogic）上使用分析通常会导致一切死机或挂起。

# ios - Problems presenting modal view controller over UISplitViewController

> ID：12130109
> 
> 赞同：1
> 
> 时间：2012-08-26T12:26:49.573
> 
> 标签：ios, uisplitviewcontroller, presentmodalviewcontroller

I have a requirement to present a modal ViewController over a UISplitViewController (i.e. obscuring both the master and detail views, when in landscape).

My code is based on Apple's sample code for [Multiple Detail Views](http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html), and I've added the presentModalViewcontroller to didFinishLaunching.

To present the modal view, I've used this,

```
[self.window.rootViewController presentModalViewController:entryView animated:NO]; 
```

and this,

```
[[self.splitViewController.viewControllers objectAtIndex:0] presentModalViewController:entryView animated:NO]; 
```

...and both behave in the same way (explained below).

The modal view is presented as I intend, i.e. the view pops up and covers the UISplitView as required. All good so far.

However, as a consequence of presenting the modal view, iOS calls willHideViewController for the obscured UISplitViewController master view. I guess that's reasonable, as the master view *is* being hidden.

The real problem occurs when the modal view is dismissed, because willShowViewController is *NOT* called to undo the changes made in willHideViewController (i.e. remove the popover button added to the detail view when the master view was hidden).

This unwanted popover button then sits there, on my Detail view navbar, generally causing a nuisance.

Any thoughts on how to get willShowViewController to be called when the modal view is dismissed, or to otherwise fix this issue would be appreciated.

# c - 如何找出一个字符串是否是另一个字符串的旋转

> ID：12130111
> 
> 赞同：-4
> 
> 时间：2012-08-26T12:26:57.437
> 
> 标签：c, string

我有两个字符串`a`和`b`. 我想知道是否`a`是旋转`b`或反之亦然而不创建第三个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T12:37:08.863

字符串 a 是 b 的旋转当且仅当存在 L 使得 L == len(a) == len(b)，并且存在偏移量 0 <= j < len(a) 使得 a[ (i+j) % L] == b[i] 对于所有 0 <= i < L。

在 c 代码中（假设 L 是字符串的公共长度。如果 a 是 b 的旋转，则返回 1，否则返回 0）：

```
int i, j, is_rot;
for (i = 0; i< L; i++){
    is_rot = 1;
    for (j = 0; j<L; j++){
        if (a[ (j + i) %L] != b[j] ){
            is_rot = 0;
            break;
        }
    }
    if (is_rot) return 1;
}
return 0; 
```

# javascript - setTimeout working fast

> ID：12130115
> 
> 赞同：1
> 
> 时间：2012-08-26T12:27:18.920
> 
> 标签：javascript

```
 var k=0;var n=0;
  function shiftrigh(){
  n=n+1;
  if(n<=193)
   window.setTimeout(shiftright(),100);
  else
      n=0;}

function shiftright(){
   k-=1;
   document.getElementById("abcmngcontainer").style.left=k+"px";
   window.setTimeout(shiftrigh(),100);
}

function shiftlef(){
  n=n+1;
  if(n<=193)
   window.setTimeout(shiftleft(),100);
  else
      n=0;}

function shiftleft(){
   k+=1;
   document.getElementById("abcmngcontainer").style.left=k+"px";
   window.setTimeout(shiftlef(),100);
} 
```

Hi, I have the above code. The function `shiftrigh` when called invokes `shiftright` and then a cycle is created then goes on until `n` is `193`. Same is the case for the `shiflef` pair. The code is working but it is working pretty quick. Whether I decrease the time value in settimeout or increase it, it remains the same. The updates are pretty quick, not smooth enough to see.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T12:28:48.933

Change:

```
window.setTimeout(shiftright(),100); 
```

to:

```
window.setTimeout(shiftright,100); 
```

Note the missing parens. The same with `shiftleft()` -> `shiftleft`.

This is a common misunderstanding in JavaScript. `setTimeout()` requires a reference to a function (`shiftright`). What you are doing is calling that function immediately and passing whatever was returned from it to `setTimeout()`. Clearly not what was intended.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:29:17.887

You are using `window.setTimeout` wrong!

```
window.setTimeout(shiftlef(),100); 
```

You have to pass a function reference, not the return code of the function. So the right version looks like this:

```
window.setTimeout(shiftlef,100); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T12:29:22.473

`setTimeout` will need a function-NAME or a function-"variable"/"pointer" as first argument...

in your code, you pass the RETURN value of your function-call as first parameter to "setTimeout"....

just remove the braces ->

`window.setTimeout(shiftleft, 100)`

# java - A reordering which may never happen

> ID：12130121
> 
> 赞同：0
> 
> 时间：2012-08-26T12:27:44.530
> 
> 标签：java, memory-model

In discussion at [*Does a correctly synchronized program still allow data race?(Part I)*](https://stackoverflow.com/questions/12006730/does-a-correctly-synchronized-program-still-allow-data-racepart-i), we got two very good examples.

I just want to discuss the second one. For convenience, I just put second example at here:

```
public int hashCode() {
    if (hash == 0 && count > 0) { //(1)
        int h = hash;
        int off = offset;
        char val[] = value;
        int len = count;

        for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
        }
        hash = h; //(2)
    }
    return hash; //(3)
} 
```

According to fist item in definition of happens-before relationship: If x and y are actions of the same thread and x comes before y in program order, then hb(x, y), we may get following conclusion:

> there are hb((1),(2)) and hb((2),(3)), hence hb((1),(3)).

Because:

> hash is a shared variable;
> 
> (1),(2),(3) are all actions of the same thread;
> 
> (1) comes before (2), (2) comes before (3) in program order.

Now back to my question: if there is a happens-before relationship between (1) and (3), then (1) and (3) should never be reordered.

Is there any misunderstanding in my explanation? How about your opinion?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:30:53.313

There is no ordering imposed on actions springing from (1), (2) and (3) commited by different threads; the only *happens-before* ordering will be within the triplets of (1), (2), (3) commited by the same thread, as per [JLS 17.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5):

> If x and y are actions of the same thread and x comes before y in program order, then hb(x, y).

The reordering of machine instructions may happen for any execution, as long as the thread doing them doesn't observe ordering inconsistent with program order. As for any other threads, they can observe the actions in any order (or even not observe them at all) as there is no *happens-before* going from these actions to any actions of other threads. However, your example contains only a single write and there would have to be at least two writes to give meaning to the concept of "out of order". Only write actions have effects observable from other threads.

# python - 无法在 PyDev 中使用 Coverage，“文件没有统计信息”

> ID：12130124
> 
> 赞同：2
> 
> 时间：2012-08-26T12:28:34.473
> 
> 标签：python, code-coverage, pydev, coverage.py, python-coverage

我无法让 Coverage 与 PyDev 一起工作。我运行的每个文件都显示：“文件没有统计信息。”

我按照说明检查了“为新启动启用代码覆盖率”，然后将文件夹拖到“代码覆盖率”窗口进行分析。

我已经成功安装了覆盖。之后，我刷新了我的 Python 解释器设置，其中自动显示了覆盖文件夹。

我还尝试将覆盖文件夹添加到我项目的外部库中。也没用。。。

在此先感谢您提供任何可能引导我朝着正确方向前进的提示。

*   覆盖版本 3.5.2（也尝试了推荐的 3.4 无济于事）
*   PyDev 版本：2.6.0
*   Eclipse 版本：3.7.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:45:56.183

这可能是由于您的文件路径包含空格。请参阅此处的[错误报告](http://sourceforge.net/tracker/?func=detail&aid=3535032&group_id=85796&atid=577329)。

# iphone - 在 xcode 4.4 中使用类扩展

> ID：12130125
> 
> 赞同：1
> 
> 时间：2012-08-26T12:28:38.043
> 
> 标签：iphone, ios, xcode4.4

从 xcode 4.4 开始，您不再需要`@synthesize`属性（[请参阅此处](https://stackoverflow.com/questions/11666008/automatic-synthesized-properties-in-xcode-4-4)），编译器会为您完成。那么，为什么编译器会抱怨

> 使用未声明的标识符 _aVar

在我的`viewDidLoad`方法中`ViewControllerSubclass`：

```
@interface ViewController : UIViewController
@property (assign, nonatomic) int aVar;
@end

@implementation ViewController
- (void)viewDidLoad {
    [super viewDidLoad];
    self.aVar = 5;
    NSLog(@"Super value: %d", _aVar);
}
@end

@interface ViewControllerSubclass : ViewController
@end

@interface ViewControllerSubclass ()
@property (assign, nonatomic) int aVar;
@end

@implementation ViewControllerSubclass
- (void)viewDidLoad {
    [super viewDidLoad];
    NSLog(@"Subclass value: %d", _aVar);
}
@end 
```

如果我将所有内容都移动到一个文件而不是 4 个单独的文件用于各自的接口和实现，编译器反而会抱怨这`_aVar`是私有的。但是 _aVar 应该已经在我的`ViewControllerSubclass`.

如果我将初始属性声明移至类扩展名，则仍将所有内容保存在 1 个文件中：

```
@interface ViewController ()
@property (assign, nonatomic) int aVar;
@end 
```

构建仍然失败，说这`_aVar`是私有的。

如果我回到 4 个文件设置，为相应的接口和实现 xcode 构建甚至没有警告。

如果我然后运行代码：

```
[[[ViewControllerSubclass alloc] init] view]; 
```

上述示例中的日志语句打印出以下内容：

> 超值：0
> 
> 子类值：5

`NSLog(@"Super value: %d", _aVar);`产生结果是有道理的，`0`因为这个变量应该是超类私有的。但是，为什么会`NSLog(@"Subclass value: %d", _aVar);`产生结果`5`？？

这一切都很奇怪。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T14:26:36.907

您混淆了几个不同的问题，当您谈论在文件之间跳转并且您没有指定错误发生的位置时，我有些困惑。

无论如何，存在实例变量可见性的问题。如果您在接口范围内声明您的 iVar，则默认情况下它们是受保护的。

```
@interface Foo : NSObject {
    int protectedInt;
@private
    int privateInt;
@public
    int publicInt;
}
@end 
```

当您合成 iVar 时，实例变量本身是私有的，除非您明确指定它们。

方法将始终触发最派生的实现。

现在，当你调用这个...

```
[[[ViewControllerSubclass alloc] init] view]; 
```

您将分配一个子类、初始化并加载视图。此代码将执行...

```
@implementation ViewControllerSubclass
- (void)viewDidLoad {
    [super viewDidLoad];
    NSLog(@"Subclass value: %d", _aVar);
}
@end 
```

它做的第一件事是调用基类实现......

```
@implementation ViewController
- (void)viewDidLoad {
    [super viewDidLoad];
    self.aVar = 5;
    NSLog(@"Super value: %d", _aVar);
}
@end 
```

当然，它调用 super，但这部分在这里并不重要。下一行将 5 分配给 self.iVar。但是，哪个 iVar？它调用此对象的属性设置器**方法**。这个实例是什么类型的？这是一个`ViewControllerSubclass`。由于您已为基类及其子类指定了相同的名称（并将该属性声明为类扩展的一部分），因此它们每个都有自己的私有范围实例变量。

但是，在最派生的实现上调用了一个方法。因此，self.iVar 将设置子类的实例变量。基类的实例变量保持不变。

当您`NSLog`设置该值时，您正在访问未更改的基类的私有实例变量。

现在，在基类`viewDidLoad`完成后，我们开始为子类运行代码。它记录其私有实例变量的值，该变量因基类调用属性设置器而被更改。所以，它现在将打印它的值，即 5。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T14:25:12.900

当您公开超类声明时，编译器不会尝试重新合成该属性；它假设已经在超类中得到了照顾。因此，`_aVar`不在子类的任何范围内。无论如何它都是私有的，所以即使你把它们都放在同一个文件中，这就是你看到这些错误的原因。

但是，当您在类扩展中进行超类属性声明时，编译器将自动合成超类和子类的属性。这最终导致两个类都具有私有实例变量 _aVar（具有两个不同的地址）。但是，当超类`viewDidLoad`方法设置属性时，该方法调用子类的访问器，它设置子类的私有 _aVar 变量的值，而不是超类的值。这就解释了为什么你看到超类值没有改变。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T12:43:33.273

我刚刚测试了您的设置，并且可以复制您的错误。我得出以下结论：

您需要`@property`在`.h`文件中声明您的。如果您想要一个私有变量，请`.m`在类别中声明它`@interface`（带括号的那个）。

# visual-studio - 为什么 ClassInitialize 方法必须是静态的？

> ID：12130127
> 
> 赞同：39
> 
> 时间：2012-08-26T12:28:55.000
> 
> 标签：visual-studio, unit-testing, mstest

我很好奇为什么夹具设置必须是静态的？对我来说，每个固定装置的实例变量共享固定装置的生命周期似乎更直观。

是的，这些可以在构造函数中初始化，但是我假设它们超出了测试运行器的控制范围。

什么设计要求或理念决定了设置方法应该是静态的？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-26T18:36:20.270

具有该`ClassInitialize`属性的方法对类中的所有测试运行一次。每次运行测试时都会创建一个类的实例，因此它必须是静态的才能只运行一次。

如果要为每个测试进行初始化，则可以使用该`TestInitialize`属性，该属性将在创建类的新实例时运行（在运行测试之前）。

如果您需要更多信息，可以查看：

[讨厌的 MSTest 执行顺序](https://blogs.msdn.microsoft.com/nnaderi/2007/02/16/that-pesky-mstest-execution-ordering/)

# javascript - jQuery UI draggabe 未定义

> ID：12130128
> 
> 赞同：1
> 
> 时间：2012-08-26T12:28:57.390
> 
> 标签：javascript, jquery, jquery-ui, meteor

我正在尝试使用 jquery UI 功能创建一个流星应用程序。但是我无法让它工作。流星应用程序框架工作正常，但是一旦我开始使用 jQuery UI，就会出现如下错误：

```
$("#draggable1").draggable is not a function 
```

在 Firebug 控制台中。

我尝试以多种方式包含 jquery 和 jquery UI 包：

1.  添加了 jquery 包
2.  从我的流星应用程序文件夹中的文件夹 \client\js\libs 在本地引用 jquery 和 jquery UI
3.  只是在 client\js\libs 中有文件，而没有在我的 html 文件中引用它们。
4.  在我的 html 文件中引用了 jQuery 和 jQuery UI 的 CDN 版本

根据萤火虫的说法，在每种情况下，javascript文件似乎都可以正常加载。但是像下面这样的代码根本不起作用（在我的 3views.js 文件中——3views 是我的流星应用程序的名称）：

```
if (Meteor.is_client) {

    $( "#draggable1" ).draggable({ revert: "invalid", snap: ".ui-widget-header", snapMode: "inner", snapTolerance: 100 });

... 
```

在我的 3views.html 中：

```
...
<div id="draggable1" class="ui-widgetc-content draggable_box">
<img id="imgpair1" src="objects/obj_pair1a.png" class="objectpair">
</div>
... 
```

使用 jQuery UI 小部件的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T12:31:25.847

可能您的库版本没有可拖动的小部件。转到[下载生成器](http://jqueryui.com/download/)并包含它。

另外，检查您是否首先包含了 jquery，然后是 jqueryui 的脚本。

像..

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.8.23/jquery-ui.min.js" type="text/javascript"></script> 
```

# javascript - 给甜甜圈图添加图例 - jqPlot

> ID：12130130
> 
> 赞同：1
> 
> 时间：2012-08-26T12:29:00.387
> 
> 标签：javascript, jquery, charts, jqplot, donut-chart

好的，这应该比较简单：

![在此处输入图像描述](../Images/adc249db3dd99c011d69c539c65b2771.png)

*   我正在添加一个甜甜圈图，它确实有效
*   但是，“图例”（`Head (+)`与相应的颜色一样）不会出现。

代码 ：

```
$(document).ready(function(){
  var s1 = [['Head (+)',<?php echo $headScore; ?>], ['Head (-)',<?php echo 6-$headScore; ?>]];
  var s2 = [['Body (+)',<?php echo $totalScore-$headScore; ?>], ['Body (-)',<?php echo 7-$totalScore+$headScore; ?>]];

  var plot3 = $.jqplot('linkchart', [s1,s2], {
      title:"Score Profile",
    seriesDefaults: {
      // make this a donut chart.
      renderer:$.jqplot.DonutRenderer,
      rendererOptions:{
        // Donut's can be cut into slices like pies.
        sliceMargin: 3,
        // Pies and donuts can start at any arbitrary angle.
        startAngle: -90,
        showDataLabels: false
      },
      legend: { show:true, location: 'e' }
    }
  });
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T05:48:23.877

卡梅隆，

看起来你犯了一个愚蠢的错误。:)

首先结束 seriesDefaults 属性，然后定义图例。

您已将图例放在 seriesDefaults 中。

```
var plot3 = $.jqplot('linkchart', [s1,s2], {
    title:"Score Profile",
        seriesDefaults: {
            // make this a donut chart.
            renderer:$.jqplot.DonutRenderer,
            rendererOptions:{
                // Donut's can be cut into slices like pies.
                sliceMargin: 3,
                // Pies and donuts can start at any arbitrary angle.
                startAngle: -90,
                showDataLabels: false
            } // Not here...
        },
        //Place the legend here....
        legend: { show:true, location: 'e' }
    });
}); 
```

我还没有测试过。但我认为它应该工作。

谢谢你。

# r - 为随机采样构建 R 循环

> ID：12130131
> 
> 赞同：2
> 
> 时间：2012-08-26T12:29:06.377
> 
> 标签：r, loops, text, sample

我从一个包含许多值列表的文件中采样，例如：

```
312313.34
243444
12334.92
321312
353532 
```

并使用 R 从此列表中随机抽样：

```
list = read.table("data")
out <-sample(list,50,replace=TRUE)
out.mean<-mean(out)
out.mean 
```

有人可以告诉我如何将其放入循环中，以便我可以执行此过程 1000 次并取 1000 的平均值，这意味着这将产生吗？

非常感谢您！

鲁巴尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T12:55:41.123

另一种解决方案可能是（请记住@Tyler Rinker 刚才所说的`replicate`）

```
Data <- read.table(text='
312313.34
243444
12334.92
321312
353532', header=FALSE)

Data <- as.numeric(as.matrix((Data))) 

set.seed(007)
Means <- replicate(1000, mean(sample(Data,50,replace=TRUE))) 
```

对于每个大小为 50 的子样本，均值由 1000 个均值组成。如果您想要均值的均值，请执行以下操作：

```
mean(Means) 
```

您尝试做的事情听起来像是自举或类似于减少偏差的重采样技术（我猜）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T12:40:59.610

我会从采样中创建一个函数，然后一遍又一遍地重复`lapply`（尽管`replicate`可能也可以工作，但我有过这要慢得多的经验）

我建议不要写入名为的对象`list`，因为这是一个重要功能。

所以它看起来像这样：

```
#make a data set that may look like yours
LIST <- rnorm(1000)

#take your code and make a function   
mean.find <- function(dat) {
    out <-sample(dat, 50,replace=TRUE)
    mean(out)
}

#a single use yo check it out 
mean.find(LIST)

#repeat it 1000 times with lapply
reps <- unlist(lapply(seq_len(1000), mean.find))

#take the mean of that
mean(reps) 
```

# java - 访问另一个项目中的文件和类

> ID：12130141
> 
> 赞同：0
> 
> 时间：2012-08-26T12:30:36.913
> 
> 标签：java, eclipse

我在这个层次结构中有 2 个项目

```
*Project1
  **src
      ***Class1

*Project2
    **src
      ***Main 
```

我可以在 Project2中的***主***类中访问Project1 中的***Class1类吗***

 *这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:32:38.010

是的，您需要链接项目。右键单击

```
Project2 > Properties > Java Build Path > Projects > Add 
```

然后选择您的项目。

如果您的项目位于与使用不同的工作区中

```
Project2 > Properties > Java Build Path > Folder > Link Source 
```

选择您的文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:33:08.733

是的你可以..

**1.**您可以做的是创建一个您从中获取类的项目的jar，`Export->Java->JAR file`并将该文件放入您的项目中。这将让您访问您需要的课程，同时仍然保持您的项目自包含。

**2.**使用`import`, 瞧……你现在可以访问了……

**//////////////////已编辑///////////////////**

使用它在您当前的项目中导入项目...

**在eclipse中这样做......**

`Build Path ---> Configure Path ----> Click Project Tab ---> Add the project.`

但是仍然使用`Jar`很多`more easier while importing and exporting`..你可以给`version numbers`罐子，并可以**提及其中的变化......***

# xml - 将多值字段添加到 SOLR 3 服务器的 XML 语法如何

> ID：12130146
> 
> 赞同：1
> 
> 时间：2012-08-26T12:31:19.217
> 
> 标签：xml, api, rest, solr

我想这是一个简单的问题，但我似乎无法在文档或 Solr wiki 中找到它。

所以，我只需要知道添加多值字段（arr）的语法是怎样的。

我知道您可以添加任何其他字段，例如

```
<add>
 <doc>
  <field name="fieldname">fieldvalue</field>
 </doc>
</add> 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T00:46:24.070

如果您查看 Solr 附带的一些示例文档，您可以在 xml.xml 中定义具有多个值的相同字段。

所以你可以做以下

```
 <add>
  <doc>
   <field name="fieldname">fieldvalue</field>
   <field name="category">value1</field>
   <field name="category">value2</field>
  </doc>
 </add> 
```

请参阅此处的示例 - [http://svn.apache.org/viewvc/lucene/dev/branches/lucene_solr_3_6/solr/example/exampledocs/](http://svn.apache.org/viewvc/lucene/dev/branches/lucene_solr_3_6/solr/example/exampledocs/)

# java - How to disable menu items in desktop application?

> ID：12130156
> 
> 赞同：1
> 
> 时间：2012-08-26T12:32:59.183
> 
> 标签：java, swing, jmenu, disabled-control

I created a menu in the menu bar in which I'd like to create a `JCheckBoxMenuItem` to set a condition for highlighting remaining menu items.

Something like the following pseudo-code:

```
if login(true)
    then highlight remaining menuitems
else
    un-highlight the menuitems 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T12:48:24.450

我认为突出显示您的意思是启用/禁用 JMenuItem。这是可能的。

使用 setEnabled：

```
JMenuItem item;
item.setEnabled(false); //to disable 
```

就像 kleopatra 建议的那样，最好的方法是为每个 JMenuItem 实现您自己的操作，并让您的操作根据状态启用/禁用按钮：

例如：

```
public class AMenuAction extends AbstractAction {

      @override
      public void actionPerformed(ActionEvent e) {
           //implement your action behavior here
      }

} 
```

然后用这样的动作构造你的 JMenuItem：

```
AMenuAction afterLoginAction = new AMenuAction();
JMenuItem item = new JMenuItem(afterLoginAction ); 
```

当用户登录/注销时，对所需操作调用 setEnabled 方法。

```
void Login()
{
    afterLoginAction.setEnabled(true); 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T12:47:40.737

启用和禁用菜单项的方式与`JComponent`使用该[`setEnabled( boolean )`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JMenuItem.html#setEnabled%28boolean%29)方法的任何其他方式相同

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T13:05:36.460

创建一个`JCheckBoxMenuItem`作为用户登录的菜单项

```
JCheckBoxMenuItem jCheckBoxMenuItem = new JCheckBoxMenuItem(); 
```

然后

为其添加动作监听器

```
 //unhighlite other menu items before login
  jMenuFileOpen.setEnabled(false);
  //...
  jCheckBoxMenuItem.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e) {
      if (login(true)){
        jCheckBoxMenuItem.setSelected(true);
        //highlite other menu items
        jMenuFileOpen.setEnabled(true);
        //...
      } else {
        jCheckBoxMenuItem.setSelected(false);
        //unhighlite other menu items
        jMenuFileOpen.setEnabled(false);
        //...
      }
    }
  }); 
```

一旦`login(true)`成功，则选中菜单上的复选框并启用其他菜单项。

# ruby-on-rails - Rails 多态嵌套属性

> ID：12130161
> 
> 赞同：0
> 
> 时间：2012-08-26T12:34:14.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3, polymorphic-associations

我有一个多态模型，并希望有一个嵌套表单使用这个模型。我没有收到任何错误，但表单未显示嵌套字段。这是我的模型和精简形式：

# 多态模型

```
class SeoMapping < ActiveRecord::Base
  belongs_to :mappingtable, :polymorphic => true
  attr_accessible :seo_url
  validates :seo_url, :presence => true, :uniqueness => true   
end 
```

# 使用多态模型的页面模型

```
class Page < ActiveRecord::Base
  has_one :seo_mappings, :as => :mappingtable, :dependent => :destroy
  accepts_nested_attributes_for :seo_mappings 
  attr_accessible :content, :h1, :meta_description, :title, :seo_mappings_attributes
  .........
end 
```

# 现在剥离形式

```
<%= form_for(@page) do |f| %>
  <% if @page.errors.any? %>
    .......
  <% end %>

  <div class="field">
    <%= f.fields_for :seo_mappings do |builder| %>
      <%= builder.label :seo_url %><br />
      <%= builder.text_field :seo_url %>
    <% end %>
  </div>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  .........
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我不明白为什么它不显示 fields_for 元素。如果我注释掉accepts_nested_attributes_for 该字段，然后显示。你能看出我哪里出错了吗？

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:58:03.467

可能是一个愚蠢的问题，但这是您正在谈论的创建或编辑操作吗？如果它是创建的，你有没有在控制器中调用@page.build_seo_mapping 或其他东西？

另外（可能不相关）如果您使用 has_one，通常您想使用单数名词，所以 has_one :seo_mapping 而不是映射。

# ruby-on-rails - 黄瓜因 json Encoding::InvalidByteSequenceError 而失败

> ID：12130162
> 
> 赞同：9
> 
> 时间：2012-08-26T12:34:23.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, cucumber, rvm

我正在使用 rvm 1.15.6 和 ruby​​-1.9.3-p194。

我使用以下 gem 创建了一个新的 Rails 应用程序：

```
source 'https://rubygems.org'
gem 'rails', '3.2.8'
gem 'sqlite3'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails'
gem "rspec-rails", ">= 2.10.1", :group => [:development, :test]
gem "factory_girl_rails", ">= 3.3.0", :group => [:development, :test]
gem "cucumber-rails", ">= 1.3.0", :group => :test, :require => false
gem "capybara", ">= 1.1.2", :group => :test
gem "database_cleaner", ">= 0.7.2", :group => :test 
```

当我运行时：

```
bundle exec cucumber 
```

我收到一个错误：

```
json-1.7.5/lib/json/common.rb:155:in `encode': "\xD8" on US-ASCII (Encoding::InvalidByteSequenceError) 
```

这是完整的跟踪：

```
/Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/json-1.7.5/lib/json/common.rb:155:in `encode': "\xD8" on US-ASCII (Encoding::InvalidByteSequenceError)
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/json-1.7.5/lib/json/common.rb:155:in `initialize'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/json-1.7.5/lib/json/common.rb:155:in `new'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/json-1.7.5/lib/json/common.rb:155:in `parse'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/gherkin-2.11.2/lib/gherkin/i18n.rb:14:in `<class:I18n>'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/gherkin-2.11.2/lib/gherkin/i18n.rb:6:in `<module:Gherkin>'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/gherkin-2.11.2/lib/gherkin/i18n.rb:5:in `<top (required)>'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/gherkin-2.11.2/lib/gherkin/lexer/i18n_lexer.rb:1:in `require'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/gherkin-2.11.2/lib/gherkin/lexer/i18n_lexer.rb:1:in `<top (required)>'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/gherkin-2.11.2/lib/gherkin.rb:1:in `require'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/gherkin-2.11.2/lib/gherkin.rb:1:in `<top (required)>'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:2:in `require'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:2:in `<top (required)>'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/cucumber-1.2.1/bin/cucumber:11:in `require'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/gems/cucumber-1.2.1/bin/cucumber:11:in `<top (required)>'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/bin/cucumber:19:in `load'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/bin/cucumber:19:in `<main>'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/bin/ruby_noexec_wrapper:14:in `eval'
    from /Users/danielkehoe/.rvm/gems/ruby-1.9.3-p194@rails328/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我很迷惑。有什么解决方案或故障排除建议吗？

编辑：这没有创建任何 Cucumber 功能文件。如果我创建功能文件，我会得到同样的结果。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-26T19:30:54.043

我遇到了同样的问题，看起来是因为你的shell的编码

看看这个页面[https://github.com/cucumber/gherkin](https://github.com/cucumber/gherkin)

## Linux

```
export LANG=en_US.UTF-8 
```

## 操作系统

```
export LC_CTYPE=en_US.UTF-8 
```

# python - 如何获取生成的子进程命令字符串

> ID：12130163
> 
> 赞同：9
> 
> 时间：2012-08-26T12:34:23.077
> 
> 标签：python, subprocess

我有 Python 子进程调用，它们被格式化为一系列参数（比如`subprocess.Popen(['ls','-l'])`而不是单个字符串（即`subprocess.Popen('ls -l')`）。

当像我一样使用序列参数时，有没有办法获取发送到 shell 的结果字符串（用于调试目的）？

一种简单的方法是我自己将所有论点结合在一起。但我怀疑这在所有情况下都与子进程所做的相同，因为使用序列的主要原因是['allow[s] the module to take care of any required escaping and quoting of arguments'](http://docs.python.org/library/subprocess.html#frequently-used-arguments)。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-26T12:49:37.120

如评论中所述，`subprocess`附带（未在文档页面中记录）`list2cmdline`将参数列表转换为单个字符串。根据源文档，`list2cmdline`主要在 Windows 上使用：

> 在 Windows 上：Popen 类使用 CreateProcess() 来执行子程序，该程序对字符串进行操作。如果 args 是一个序列，它将使用 list2cmdline 方法转换为字符串。请注意，并非所有 MS Windows 应用程序都以相同的方式解释命令行：list2cmdline 是为使用与 MS C 运行时相同规则的应用程序设计的。

不过，它在其他操作系统上非常有用。

**编辑**

如果您需要反向操作（*即*，将命令行拆分为正确标记化参数的列表），您将需要使用该`shlex.split`函数，[如`subprocess`](http://docs.python.org/library/subprocess.html#frequently-used-arguments).

```
>>> help(subprocess.list2cmdline)
Help on function list2cmdline in module subprocess:

list2cmdline(seq)
    Translate a sequence of arguments into a command line
    string, using the same rules as the MS C runtime:

    1) Arguments are delimited by white space, which is either a
       space or a tab.

    2) A string surrounded by double quotation marks is
       interpreted as a single argument, regardless of white space
       contained within.  A quoted string can be embedded in an
       argument.

    3) A double quotation mark preceded by a backslash is
       interpreted as a literal double quotation mark.

    4) Backslashes are interpreted literally, unless they
       immediately precede a double quotation mark.

    5) If backslashes immediately precede a double quotation mark,
       every pair of backslashes is interpreted as a literal
       backslash.  If the number of backslashes is odd, the last
       backslash escapes the next double quotation mark as
       described in rule 3. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-10-07T17:24:10.263

从 Python 3.8 开始，有一个[`shlex.join()`](https://docs.python.org/3/library/shlex.html)函数：

```
>>> shlex.join(['ls', '-l'])
'ls -l' 
```

# mysql - 尽管我创建了外键，但没有创建外键。它在执行查询时没有显示错误。但现在我的架构没有显示外键

> ID：12130164
> 
> 赞同：0
> 
> 时间：2012-08-26T12:34:33.350
> 
> 标签：mysql, foreign-keys

我执行了与创建我的数据库相关的脚本..它执行成功。但没有创建外键。我正在使用 cent os 。mysql 5.0.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T12:37:12.537

如果数据库引擎不支持 FK，它不会显示错误，但不会创建错误。例如，MyIsam。

选择 InnoDB 作为表类型，以便能够在其上创建 FK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:37:27.287

是 MyISAM 中的表而不是 InnoDB 中的表吗？

MyISAM 不支持外键。

# android - Android: GCM Development

> ID：12130165
> 
> 赞同：1
> 
> 时间：2012-08-26T12:34:36.697
> 
> 标签：android, google-cloud-messaging

I am new to android and would like to seek for advice regarding to GCM as questions below:

1.  For the third party server, is it free to use any programming language as long as follow exactly the request format to GCM server? Is there any example to refer for using asp.net?

2.  For the non collapsed message, GCM discard all msg if exceed 100\. The maximum number 100 is for total message of the only one device OR total of pending message in the third party server?

3.  For collapsed message so called send-to-sync, If exceed this number GCM will only keep 4 collapse keys, with no guarantees about which ones they will be. I don't really got it, can anyone further explain to me with some examples?

4.  For the time to live, it takes advantage of concept "now" or "never", the "never" is it alerting to trigger another attempt to send the same message again?

5.  Currently I am testing the GCM with the demo sample from [here](http://developer.android.com/guide/google/gcm/demo.html), I experienced unstable of message receiving on emulator with 2.3.3v. In other words, the message could be never reached, or delay up to 15 minutes/more, or received immediately sometimes as well. Even I tried out on jumpnote and chrome to phone apps, that is same case. Can anyone share the experiences or solutions?

6.  Is there anyway third party to get know the results when the message arrived targeted device?

7.  To complete the registration, the Android application sends the registration ID to the application server. This process is via GCM or our personal components like web service or POST?

8.  For the canonical ID, how does third party server get the ID of the last registration requested by application.

Much appreciate for any reply. Thanks.

# php - Path to folder from localhost

> ID：12130166
> 
> 赞同：2
> 
> 时间：2012-08-26T12:34:42.603
> 
> 标签：php, path, localhost

In my project, I am using EasyPHP and the directory I wanted to access is `-> www/myP/profile_icon`:

I am trying to access profile_icon folder by using the code:

```
 $dir = "myP/profile_icon";
   $handle = opendir($dir."/"); 
```

However, I am getting a warning:

> Warning: opendir(myP/profile_icon/,myP/profile_icon/): The system cannot find the path specified. (code: 3) in C:\Program Files\EasyPHP-12.1\www\myP\functions.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:43:56.360

你的代码在

> C:\Program Files\EasyPHP-12.1\www\myP\functions.php

```
$dir = __DIR__. "/profile_icon";
$handle = opendir($dir."/"); 
```

这将继续工作，并且不依赖于任何系统特定的文件夹。它仅依赖于内部项目结构。

请注意，这需要 PHP 5.3。对于较低版本，请使用

```
$dir = dirname(__FILE__). "/profile_icon"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:36:35.830

您可以尝试使用文件的完整路径：

```
$dir = "C:/Program Files/EasyPHP-12.1/www/myP/profile_icon"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T12:40:01.107

我想这就是你要找的：

```
$base_dir  = 'C:\Program Files\EasyPHP-12.1\www\myP';
$icon_dir  = '\profile_icon';
$handle = opendir($base_dir.$icon_dir.'\'); 
```

当您在 Windows 机器上使用 PHP 时，您不必注意斜线的使用。Linux 让我们只使用正斜杠`/`，但在 Windows 上，正斜杠`/`和反斜杠`\`都用作路径分隔符。

# c++ - fprintf 和 ofstream 使用而不打开文件

> ID：12130173
> 
> 赞同：-2
> 
> 时间：2012-08-26T12:35:40.773
> 
> 标签：c++, c

我可以安全地使用类似的代码吗

```
fprintf(nullptr, "str"); 
```

或之类的

```
std::ofstream() << "str"; 
```

和

```
std::ofstream f;
f << "str"; 
```

C/C++ 标准中是否有此类情况的描述？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:50:43.567

`std::ios_base::failbit`当使用 C++ 流时，输出操作在被发送到流或`std::ios_base::badbit`设置时无效。如果流不表示成功是可以接受的，您可以只创建一个`std::ostream`带有空流缓冲区：

```
std::ostream nullstream(0); 
```

If you want the stream to also indicate success, you can just use it with a stream buffer indicating success from `overflow()` and `sync()` but not doing anything.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:45:54.363

这并没有回答您提出的问题，而是您应该提出的问题 - 您可以将属性分配给`unused`GCC 中的变量，这将抑制警告。

[http://gcc.gnu.org/onlinedocs/gcc-3.4.6/gcc/Variable-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc-3.4.6/gcc/Variable-Attributes.html)

# matlab - 如何在matlab中使用行遍历而不是列的线性索引

> ID：12130176
> 
> 赞同：1
> 
> 时间：2012-08-26T12:36:19.480
> 
> 标签：matlab, matrix

我有一个二维矩阵，我想遍历这个矩阵中的所有元素，如下所示：

```
a = 
0  1  2
5  4  3
6  7  8

for i = 1 : 81
    a(i) = ....
.... 
```

现在，例如当我使用时`a(2)`，我收到“5”，但我想`a(2)`给我“1”。换句话说，我想使用行遍历而不是列的线性索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T12:41:51.537

要向下遍历数组，请尝试这样的操作。这里`a`有`col_count`列和`row_count`行

```
for j = 1:col_count
   for i=1:row_count
       a(i,j)       %# display element at row i, column j
   end
end 
```

这将从第一列开始依次打印出您的元素，按行顺序打印该列中每一行的元素。这对每一列重复。

**编辑**：如果您必须使用单个索引，则只需使用当前的单个索引表示法，但对矩阵的转置进行操作：

```
 b = a.'
 for i = 1:size
     b(i)     
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:52:13.790

Matlab 是列专业的，所以线性索引总是会先按列遍历。但是，您可以通过转置矩阵来轻松获得所需的效果，以便颠倒列和行。

# android - 在 Android 中替换/清除XML 文件中的未知字符

> ID：12130178
> 
> 赞同：0
> 
> 时间：2012-08-26T12:36:45.567
> 
> 标签：android, xml, character-encoding, xml-parsing

我正在解析由程序生成的 XML。这个程序似乎对西班牙特殊字符有一些问题，如ñ或á、é、í、ó、ú等。因此XML用�替换了这些字符。

当我在 Android 中解析 XML 并得到任何包含 � 的字符串时，它会显示错误“格式不正确（无效令牌）”。

怎么能忽略这些——这样我的 Android 应用程序就不会出现错误？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:19:54.153

您需要确保 XML 解析得到正确的字符。符号“�”表示字符级数据错误，最常见的原因是读取 ISO-8859-1 或 Windows-1252 编码文件，就好像它是 UTF-8 编码一样，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T09:08:09.650

要解决 ñ 或 á, é, í, ó, ú 字符问题，请使用此编码

```
output = new String(long_desc.getBytes("8859_1"), "utf-8"); 
```

它将以正确的格式显示字符。而对于它的 html 错误。删除它使用`Html.fromHtml(your_variable which hold above data);`

# google-chrome-extension - 如何控制 chrome 桌面通知

> ID：12130181
> 
> 赞同：1
> 
> 时间：2012-08-26T12:37:19.213
> 
> 标签：google-chrome-extension

我创建了一个 chrome 扩展程序，它会根据我提供的设置每天或每周一次向用户发送桌面通知。因此，为了显示通知，我以毫秒为单位保存了时间并调用了 setInterval。

```
window.setInterval(readFromDB, parseInt(localStorage['Timer'])); 
```

readFromDB 函数从本地数据库读取并向用户显示一个桌面通知。由于我存储的 Timer 值为 86400000，因此我希望一天后再次调用该函数并显示通知。

但是这里的问题是，如果浏览器完全关闭或机器没有关闭怎么办。如果用户在超过一天后打开他的机器，可能扩展不再工作并且没有任何通知触发。

有人可以帮助我哪里做错了，或者我可以依靠更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:08:41.323

这段代码在哪里？在里面`background`文件中？如果是这样，用户将不得不对其进行自定义。

> 单击浏览器工具栏中的扳手图标。选择设置。显示高级设置。在“后台应用程序”部分中，选中 `"Continue running background apps when Google Chrome is closed"` 复选框。

# php - 如何以非阻塞方式在 PHP 中休眠？

> ID：12130183
> 
> 赞同：4
> 
> 时间：2012-08-26T12:37:35.517
> 
> 标签：php, sleep

> **可能重复：**
> [如何停止影响整个 PHP 代码的 PHP sleep()？](https://stackoverflow.com/questions/1617412/how-can-i-stop-php-sleep-affecting-my-whole-php-code)
> [PHP：在睡眠（）之前和之后输出数据？](https://stackoverflow.com/questions/3685760/php-output-data-before-and-after-sleep)

我在 localhost 中有一个 php 代码，它回显的数据并在两者之间休眠。在客户端，我能够及时看到接收到的数据，并且我也进行了渲染。

```
$condition = true;
while($condition) {
  $data = get_some_data(); // may not fetch new data to be sent, each iteration. 
  echo $data;
  ob_flush();

  $i++;
  sleep(1);

  $condition = run_some_logic(); //could become false depending on DB value
} 
```

但是，当我打开另一个浏览器并尝试打开另一个页面（再次本地主机）时，它甚至没有打开。当我关闭第一个窗口并在一段时间后尝试打开第二个 URL 时，它正在工作。

我认为这显然与睡眠有关。有没有办法在不阻塞所有其他请求的情况下调用 sleep() 或间隔输出数据？

我在这里要做的是，在满足条件之前不要让循环完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T12:47:22.087

看起来它只是等待 PHP 脚本结束（满足基于数据库更改的某些条件）我不会这样做，而是使用 XHR 请求（或酷孩子喜欢称之为 AJAX）来自客户时不时。

这可以防止用户等待状态更改（解除阻塞）并防止 PHP 被阻塞。

只需让 AJAX 每 5 秒运行一次，以检查后端的状态，看看它是否已更改。

# apache - mod_rewrite 使用动态数字标识符更改单词

> ID：12130184
> 
> 赞同：0
> 
> 时间：2012-08-26T12:38:00.153
> 
> 标签：apache, mod-rewrite, friendly-url, seo

我正在尝试做的是从旧项目模块中重写我的 URL 中的一些单词，以便它们看起来适用于当前项目。

我开始的网址是：

[http://WEBSITE.com/stories/topic/view/pet_id/6/topic_id/41](http://WEBSITE.com/stories/topic/view/pet_id/6/topic_id/41)

我在 .htaccess 中拥有的是：

```
# Change Pet and Topic to Story and Chapter
  RewriteCond stories/topic/view/pet_id/([A-Za-z0-9-]+)/topic_id/    
  RewriteRule stories/topic/view/pet_id/6/topic_id/.*$  stories/chapter/view/story_id/6/chapter_id/$1 
```

没有在条件末尾添加数字部分，因为我真的只需要改变到那时的单词。也不确定这是否可以。

不确定我没有错，希望那里的 mod_rewrite 大师之一可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:22:11.573

尝试：

```
RewriteRule ^(.*)/pet_id/(.*) /$1/story_id/$2 [L]  
RewriteRule ^(.*)/topic_id/(.*) /$1/chapter_id/$2 [L] 
```

删除你以前的规则，不确定他们试图做什么，但他们不会工作。除了`RewriteCond`破坏 apache 之外什么都不做。

# c# - C# 和 C++ 中列表复制的不同基准

> ID：12130185
> 
> 赞同：-4
> 
> 时间：2012-08-26T12:38:03.137
> 
> 标签：c#, c++, list, copy

我有一个这样的列表： C++ 中的列表

```
list<int> p[15];
list<int> copy_of_p[15]; 
```

C# 中的列表

```
list<int>[15] p;
list<int>[15] copy_of_p; 
```

我尝试使用此代码在 C# 中从中复制 10000 个副本

```
for (int counter = 0; counter < 15; counter++)
{
    copy_of_p[counter] = p[counter].toList();
} 
```

大约需要 10 毫秒

然后我用这段代码在 c++ 中做了同样的事情

```
for (int counter = 0; counter < 15; counter++)
{
    copy_of_p[counter] = p[counter];
} 
```

大约花费了 1200 MiliSecs

这意味着在 C++ 中应该有一种方法可以至少与 C# 一样快地复制列表。你能指导我扔这个吗？

PS：我试过了

```
copy(p.begin(), p.end(), copy_of_p[counter]); 
```

但它产生了构建错误

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T12:50:32.800

请记住，stl-list<> 与 C# List<> 不同。stl-list 是一个双向链表，而 C# List<> 将数据存储在一个连续的内存块中。因此 stl-list<> 复制操作要快得多。

C# List<> 等价于 stl-vector<>

stl-list 相当于 C# LinkedList<>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:56:49.013

AC# List 实际上并不是一个链表。`std::list`是一个链表。因此，您正在比较两个非常不同的操作。其次，C++ 代码将调用析构函数并再次为用户提供内存，而玩具 C# 程序不会执行任何内存管理或释放任何资源。例如，如果您有`list<file>`，则 C++ 程序将关闭所有文件，而 C# 程序则不会。

# javascript - 使用主子详细信息切换 html 表的可见性

> ID：12130186
> 
> 赞同：3
> 
> 时间：2012-08-26T12:38:16.437
> 
> 标签：javascript, jquery, html

我有一个显示主子详细信息的 html 表。
在主记录上单击加号 (+) 时，将显示相应的子详细信息。我在这里有测试设置[http://jsfiddle.net/BEEU3/3/](http://jsfiddle.net/BEEU3/3/)。（这并不完美）
我知道如何遍历 dom 来获取子元素，但请提出一个产生**最佳性能**的解决方案。

HTML：

```
<table class="table table-bordered">
<tr>
 <th></th>
 <th>Name</th>
 <th>Details</th>
</tr>
    <tr>
        <td><i class="icon-plus-sign"></i></td>
        <td>name1</td>
        <td>detail1</td>
    </tr>
    <tr class="tr-child">
        <td colspan="3">
            <table class="table table-bordered">
                <tr>
                    <th>SubDetails</th>
                    <th>SubDetails</th>
                </tr>
                <tr>
                    <td>SD1</td>
                    <td>Test1</td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

jQuery：

```
$(".icon-plus-sign").click(function () {
      $('.tr-child').toggle("slow");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T12:41:59.893

你可以使用`closest()`和`next()`方法。首先`closest()`找到被点击元素的最近的 tr 父元素，然后`next()`选择 tr 元素的下一个兄弟元素，它是一个类为 的元素`.tr-child`。

```
$(".icon-plus-sign").click(function () {
     $(this).closest('tr').next().toggle("slow");
}); 
```

**[小提琴](http://jsfiddle.net/BEEU3/6/)**

*   **[最接近（）](http://api.jquery.com/closest/)**
*   **[下一个（）](http://api.jquery.com/next/)**

# timer - 在 8051 (C8051F120) 上读取定时器计数器值 TMRnL 和 TMRnH

> ID：12130187
> 
> 赞同：1
> 
> 时间：2012-08-26T12:38:40.517
> 
> 标签：timer, microcontroller, 16-bit, 8051

在读取 16 位值 PCA0L 和 PCA0H 时，我的微控制器 C8051F120 的数据表很清楚：

*“读取 PCA0L 会自动将 PCA0H 的值锁存到“快照”寄存器中；接下来的 PCA0H 读取访问此“快照”寄存器。首先读取 PCA0L 寄存器可确保准确读取整个 16 位 PCA0 计数器。”*

但是，我没有找到关于 TMRnL 和 TMRnH 寄存器的类似声明。我记得在 Atmega128CAN90 上，我使用过以下

```
unsigned char chL,chH;
#asm("cli")
chL=TCNT3L;
chH=TCNT3H;
#asm("sei") 
```

有人知道上述报价是否也适用于 C8051F120 的 TMRnL 和 TMRnH 寄存器吗？或者，什么是获得一致读数的安全方法？是否需要禁用中断？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:58:31.990

[数据表](http://www.atmel.com/Images/doc7679.pdf)第 116 页说：

> TCNTn、OCRnx 和 ICRn 是 16 位寄存器，可由 AVR CPU 通过 8 位数据总线访问。必须使用两次读取或写入操作对 16 位寄存器进行字节访问。每个 16 位定时器都有一个 8 位寄存器，用于临时存储 16 位访问的高字节。每个 16 位定时器内的所有 16 位寄存器都共享同一个临时寄存器。访问低字节会触发 16 位读取或写入操作。当 CPU 写入 16 位寄存器的低字节时，存储在临时寄存器中的高字节和写入的低字节都在同一个时钟周期内复制到 16 位寄存器中。当 CPU 读取 16 位寄存器的低字节时，16 位寄存器的高字节在与读取低字节相同的时钟周期内被复制到临时寄存器中。

所以看起来类似的事情正在发生。

# jquery - 如何打开一个fancybox干净的窗口？

> ID：12130191
> 
> 赞同：0
> 
> 时间：2012-08-26T12:39:35.330
> 
> 标签：jquery, fancybox

我正在尝试为 fancybox 使用一个干净的窗口，这意味着没有他们的自定义背景和关闭按钮。

有人可以指导我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:44:21.153

如果您不这样做，那么您将不会使用fancybox，您应该开发自己的模式弹出窗口。

就像点击一个元素一样。

```
$("body").empty().append('<div class="yourpopupwindow">Content Will be here</div>'); 
```

# objective-c - 在 NSMutableArray 中使用 plist 时出错

> ID：12130192
> 
> 赞同：0
> 
> 时间：2012-08-26T12:39:45.490
> 
> 标签：objective-c, ios, uitableview, nsmutablearray, plist

所以我使用一个 plist 文件来存储一个 NSMutableArray 并且当添加一个对象时也将它保存到那个 plist 文件中。但我收到此错误：

```
Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]' 
```

代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:1];
_prsPath = [documentsDirectory stringByAppendingPathComponent:@"records.plist"];

prs = [[NSMutableArray alloc] initWithContentsOfFile:_prsPath];

if (prs == nil) {
    prs = [NSMutableArray array];
} 
```

在“addObject”之后：

```
[prs writeToFile:_prsPath atomically:YES]; 
```

用这个代码挣扎了几个小时。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T12:41:47.303

不应该这样`NSString *documentsDirectory = [paths objectAtIndex:0];`吗？

您收到的错误是越界错误。这意味着您正在向数组询问位于其最高索引之上的索引处的对象。在这种情况下，即使最高索引为 0（数组中只有一个对象），您也要求索引为 1 的对象（第二个对象）。

# php - PHP MySQL JOIN 查询问题

> ID：12130197
> 
> 赞同：1
> 
> 时间：2012-08-26T12:40:21.207
> 
> 标签：php, mysql, join

这让我很困惑，在阅读了许多论坛和“如何”网站之后，我想我更困惑为什么这不起作用。

我有 2 个要加入的表。

表 1（产品）包含我所有的产品详细信息。

表 2（评级）包含每个产品的所有评级，每个产品都有来自 3 个不同评级实体的 3 个评级。

我正在研究一组 AJAX 搜索过滤器，并且需要以包含所有过滤器的方式编写查询。

过滤器包括价格、评论数量、平均评论星级、评分 1、评分 2、评分 3。

价格、评论数量和平均星级来自表 1（产品）。

等级 1、2 和 3 来自表 2（等级）。

我的查询需要这样的东西，但是当我知道（已在数据库中验证）我有符合我正在查询的标准的记录时，这将返回零结果。

```
SELECT p.id, p.name 
FROM products p 
JOIN ratings r ON p.id = r.id 
WHERE p.num_reviews BETWEEN '0' AND '1000' 
AND p.price BETWEEN '0' AND '500' 
AND p.avg_rvw_stars BETWEEN '0' AND '5' 
AND (r.ratingSource='1' AND (r.rating BETWEEN '1' AND '4')) 
AND (r.ratingSource='2' AND (r.rating BETWEEN '0' AND '100')) 
AND (r.ratingSource='3' AND (r.rating BETWEEN '0' AND '100')) 
ORDER BY p.name ASC 
```

问题似乎存在于最后三个 WHERE 语句中。如果我删除 3 个中的任何 2 个，我会得到结果。但是当我包括所有 3 个时，当有符合条件的记录时，我什么也得不到。

如果我将最后两个 AND 更改为 OR，我也会得到结果，但这不是预期或需要的结果集。

我写得不正确吗？

非常感谢任何帮助/指导！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T12:45:01.353

您的问题是您混淆了`AND`and的含义`OR`。

例如，您正在寻找具有

```
r.ratingSource='1' 
```

稍后他们也应该有

```
r.ratingSource='2' 
```

没有什么是有效的，因为它是一个单一的东西，不能两者兼而有之。所以你需要考虑做什么`AND`。

如果你有一些每个结果必须有的东西，你应该使用 AND。如果你有他们可能有的东西组，你可以做`(thing AND otherthing) OR (thing2 and otherthing2)`

这都是基本逻辑：）

我想你可能是这个意思：

```
SELECT p.id, p.name 
FROM products p 
JOIN ratings r ON p.id = r.id 
WHERE p.num_reviews BETWEEN '0' AND '1000' 
AND p.price BETWEEN '0' AND '500' 
AND p.avg_rvw_stars BETWEEN '0' AND '5' 
AND (
        (r.ratingSource='1' AND (r.rating BETWEEN '1' AND '4')) 
     OR (r.ratingSource='2' AND (r.rating BETWEEN '0' AND '100')) 
     OR (r.ratingSource='3' AND (r.rating BETWEEN '0' AND '100'))
) 
ORDER BY p.name ASC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T12:56:27.357

如果您有 3 个不同的评级行，则不能使用该逻辑。每行都会检查`WHERE`一次条件，因此不能有一个同时具有`1`和评级的行`2`。

最简单的方法是三次加入：

```
SELECT p.id, p.name 
FROM products p 
  JOIN ratings r1 ON  p.id = r1.id 
                  AND r1.ratingSource = 1
                  AND r1.rating BETWEEN 1 AND 4
  JOIN ratings r2 ON  p.id = r2.id 
                  AND r2.ratingSource = 2
                  AND r2.rating BETWEEN 0 AND 100
  JOIN ratings r3 ON  p.id = r3.id
                  AND r3.ratingSource = 3
                  AND r3.rating BETWEEN 0 AND 100
WHERE p.num_reviews BETWEEN 0 AND 1000 
  AND p.price BETWEEN 0 AND 500 
  AND p.avg_rvw_stars BETWEEN 0 AND 5 
ORDER BY p.name ASC ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T12:45:29.977

我想你需要

```
AND 
(
     (r.ratingSource='1' AND (r.rating BETWEEN '1' AND '4')) 
      OR (r.ratingSource='2' AND (r.rating BETWEEN '0' AND '100')) 
      OR (r.ratingSource='3' AND (r.rating BETWEEN '0' AND '100')) 
    ) 
```

# php - Plesk 上的 PHP 和 mod_rewrite 问题

> ID：12130198
> 
> 赞同：0
> 
> 时间：2012-08-26T12:40:23.093
> 
> 标签：php, apache, mod-rewrite, plesk

我束手无策...我正在尝试做一些简单的事情，但我不明白出了什么问题...

我只是试图将所有请求带到域，并将它们路由到 index.php

为清楚起见进行编辑： index.php 作为请求的调度程序，作为框架的一部分。

我已经在我的本地机器上正常工作了，但是在服务器上（带有 Plesk 的 VPS Linux）我遇到了各种各样的问题......

为清楚起见进行编辑：这些规则在虚拟主机的 vhost.conf 配置文件中定义。

这是 mod_rewrite：

```
<IfModule rewrite_module>
    RewriteEngine On
    RewriteRule ^/.* /index.php
</IfModule> 
```

这是我尝试访问“www.mydomain.com/home/index”时的 apache 错误日志（例如）：

```
[debug] core.c(3072): [client xxx.xxx.xxx.xxx] r->uri = /phppath/cgi_wrapper/phppath/cgi_wrapper/phppath/cgi_wrapper/home/index
[debug] core.c(3078): [client xxx.xxx.xxx.xxx] redirected from r->uri = /phppath/cgi_wrapper/phppath/cgi_wrapper/home/index
[debug] core.c(3078): [client xxx.xxx.xxx.xxx] redirected from r->uri = /phppath/cgi_wrapper/home/index
[debug] core.c(3078): [client xxx.xxx.xxx.xxx] redirected from r->uri = /home/index 
```

正如您从跟踪中看到的那样，它似乎将 /home/index 重定向到 /phppath/cgi_wrapper/，然后似乎又被传递到 /phppath/cgi_wrapper/phppath/cgi_wrapper/home/index，依此类推，直到达到最大内部重定向。

一个 HTTP 500 被发送到浏览器。

进一步编辑 - 额外信息。从我从 Plesk 分散文件的方式中可以看出，这是对虚拟主机有影响的仅有的两行。我认为这可能是那个 Action 声明......我可以在 vhost.conf 中以某种方式覆盖它吗？

```
in php-cgi.conf:
ScriptAlias /phppath/ "/var/www/cgi-bin/cgi_wrapper/"
Action php-script /phppath/cgi_wrapper

in php.conf:
AddHandler php5-script .php 
```

进一步编辑：在动态生成的 conf 文件（在虚拟主机级别）中找到了这个。

```
<Files ~ (\.php)>
    SetHandler None
    AddHandler php-script .php
    Options +ExecCGI
    allow from all
</Files> 
```

有没有人对正在发生的事情有任何想法？我已经拉头发两天了......提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-02T11:59:57.553

检查您的服务器是否支持`mod_rewrite`in`.htaccess`或者您可能必须`web.config`使用以下代码编写文件

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <directoryBrowse enabled="false"/>
        <rewrite>
            <rules>
            <rule name="APPLICATION: https://<your-host-url>/" patternSyntax="Wildcard">
                <match url="*"/>
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true"/>
                    </conditions>
                <action type="Rewrite" url="index.php"/>
            </rule></rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:07:04.740

经过大量的头发撕裂，咬牙切齿，以及三个键盘之后......我设法找到了一些有用的东西。它不漂亮，但它确实有效......如果有人可以对此提供任何改进，请做 - 我全神贯注。或者眼睛。原来如此。

因此，我首先注意到`/phppath/cgi_wrapper/home/index`Apache 日志中反复出现的问题，这让我想到：“也许我不应该传递`/home/index`给 PHP CGI，但我应该传递`index.php`”。因此，我将 Rewrite 修改如下：

```
<IfModule rewrite_module>
    RewriteEngine On
    RewriteLog /blah/blah/blah/rewrite_log
    RewriteLogLevel 5

    RewriteRule ^.*$ /index.php [PT]
</IfModule> 
```

我只是添加了 PassThrough (PT) 标志，根据文档，它将重写结果传递给处理程序。

这让我得到了以下 apache **error_log**：

```
[debug] core.c(3078): [client xxx.xxx.xxx.xxx] redirected from r->uri = /index.php
[debug] core.c(3078): [client xxx.xxx.xxx.xxx] redirected from r->uri = /index.php
[debug] core.c(3078): [client xxx.xxx.xxx.xxx] redirected from r->uri = /index.php 
```

我认为这是一种改进，但它仍然无法正常工作。

所以然后我去了我闪闪发光的新**rewrite_log**看看这是否能照亮我。我看见：

```
xxx.xxx.xxx.xxx - - [28/Aug/2012:15:38:05 +0400] [www.mydomain.com/sid#7f3c39001360][rid#7f3c390bbc88/initial] (2) rewrite '/' -> '/index.php'
xxx.xxx.xxx.xxx - - [28/Aug/2012:15:38:05 +0400] [www.mydomain.com/sid#7f3c39001360][rid#7f3c390bbc88/initial] (2) forcing '/index.php' to get passed through to next API URI-to-filename handler
xxx.xxx.xxx.xxx - - [28/Aug/2012:15:38:05 +0400] [www.mydomain.com/sid#7f3c39001360][rid#7f3c390c2710/initial/redir#1] (2) init rewrite engine with requested uri /phppath/cgi_wrapper/index.php
xxx.xxx.xxx.xxx - - [28/Aug/2012:15:38:05 +0400] [www.mydomain.com/sid#7f3c39001360][rid#7f3c390c2710/initial/redir#1] (3) applying pattern '^/(.*)$' to uri '/phppath/cgi_wrapper/index.php' 
```

因此，由此我推断出我遇到了同样的问题：`/phppath/cgi_wrapper/index.php`现在再次被传递到重写引擎进行重写，而这又出来了，`/index.php`又被传回了，等等。

所以我加了一个条件。（这对我来说似乎很难看；我相信有更好的方法）：

```
<IfModule rewrite_module>
    RewriteEngine On
    RewriteLog /blah/blah/blah/rewrite_log
    RewriteLogLevel 5

    RewriteCond ${REQUEST_URI} !^/phppath
    RewriteRule ^.*$ /index.php [PT]
</IfModule> 
```

RewriteCond 基本上是在说：如果请求不以 . 开头，则应用以下规则`/phppath`。

就是这样。现在它正在工作；根据需要，所有请求都由 index.php 处理。

# unity3d - OnTriggerEnter 已调用，但从未设置变量

> ID：12130199
> 
> 赞同：2
> 
> 时间：2012-08-26T12:40:34.410
> 
> 标签：unity3d

我已经开始慢慢地使用 C# 学习 Unity，到目前为止它一直很受欢迎！

我遇到了一个小问题（我希望这是一个小问题）并被卡住了，从那以后我一直在质疑我的理智。

在我首先运行的主脚本中，我有代码动态生成一个原始（球体）并将脚本附加到它，脚本检查球体是否已被触发。

**主脚本**

```
bool createNav (Vector3 _start) {

        GameObject nav = GameObject.CreatePrimitive(PrimitiveType.Sphere);
        nav.AddComponent<NavTrigger>();

        nav.collider.isTrigger = true;

        nav.transform.localScale = new Vector3(1f,1f,1f);
        nav.transform.position = _start;

        return nav.GetComponent<NavTrigger>().Triggered;
    } 
```

**我的另一个剧本**

```
private bool triggered = false;

    void OnTriggerEnter() {

        this.triggered = true;
    }

    public bool Triggered {

        get { return this.triggered; }
    } 
```

可悲的是，无论它运行 OnTriggerEnter 代码，它仍然返回 false。

请，如果有人有任何想法或建议，请告诉我，我会尝试做任何事情来完成这项工作。

非常感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:38:51.540

[OnTriggerEnter](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnTriggerEnter.html)需要一个参数（其他碰撞器），否则它将与 Unity 期望的签名不匹配。

```
private bool triggered = false;

    void OnTriggerEnter(Collider other) {
        Debug.Log("Triggered");
        this.triggered = true;
    }

    public bool Triggered {

        get { return this.triggered; }
    }
} 
```

此外，正如文档所述：

> 请注意，仅当其中一个对撞机还附加了刚体时才会发送触发事件。

# java - Javamail 和 TLS？（不是 STARTTLS）

> ID：12130200
> 
> 赞同：3
> 
> 时间：2012-08-26T12:40:35.283
> 
> 标签：java, jakarta-mail, ssl

我需要使用 Javamail 和 TLS 发送电子邮件（不是 STARTTLS，而是专门用于 SSL/TLS 的 smtp 端口！）。我只设法找到了 gmail 的示例，但是使用了 STARTTLS。有人可以发布一个普通 SSL/TLS 的示例吗？非常感谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T15:00:23.373

带有 Gmail 的 JavaMail的[官方示例](http://www.oracle.com/technetwork/java/faq-135477.html#gmail)使用 SMTPS（即专用端口上的 SSL/TLS 上的 SMTP）而不是 STARTTLS。本质上，使用 JavaMail 的属性应该是`mail.smtps.*`而不是`mail.smtp.*`.

`SSLSocketFactory`如果您想强制使用特定版本的 SSL/TLS，例如TLSv1.0 ，您需要创建`SSLSocketFactory`自己`sslSocket.setEnabledProtocols(new String[] { "TLSv1" })`的插座。

您需要`SSLSocketFactory`通过配置属性将其作为实例传递，或者`mail.smtps.ssl.socketFactory`作为完全限定的类名通过`mail.smtps.ssl.socketFactory.class`（在这种情况下，您的类必须实现一个名为 的静态方法`getDefault`）。

为了防止 MITM 攻击，您还需要让客户端验证服务器主机名：您需要设置`mail.smtps.ssl.checkserveridentity`为`true`，因为它似乎是`false`默认的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T19:02:24.300

作为记录，根据布鲁诺斯的回答：

```
private static void sendMailSSL(String host, int port, String user, String pass, String to, String from, String subj, String message) throws UnsupportedEncodingException, MessagingException
{
    Properties props = System.getProperties();
    props.put("mail.smtps.ssl.checkserveridentity", true);       

    Session session = Session.getDefaultInstance(props, null);       
    MimeMessage msg = new MimeMessage(session);

    msg.setFrom(new InternetAddress(from, from));
    msg.addRecipients(RecipientType.TO, to);
    msg.setSubject(subj);
    msg.setText(message);

    Transport t = session.getTransport("smtps");
    try {
        t.connect(host, port, user, pass);  
        t.sendMessage(msg, msg.getAllRecipients());
    } finally {
        t.close();
    }
} 
```

请注意，我没有测试是否真的考虑了 checkserveridentity。至少它真的使用 SSL :-)

# batch-file - 静默删除谷歌浏览器缓存

> ID：12130205
> 
> 赞同：0
> 
> 时间：2012-08-26T12:40:59.600
> 
> 标签：batch-file

我有这个：

```
del "c:\Users\FluffyBunny\AppData\Local\Google\Chrome\Application\18.0.1025.162\CACHE_DIR\Cache\*.*" /S /Q /F 
```

（删除临时文件）

但是`18.0.1025.162`每次我更新 Chrome 时目录似乎都会改变:(

我可以以某种方式匹配其中包含的任何目录`CACHE_DIR\Cache\`并删除这些文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-25T23:20:43.040

这似乎在某个阶段发生了变化，只是允许

```
del /f/s/q "%LOCALAPPDATA%\Google\Chrome\User Data\Default\Cache\*.*" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:11:09.163

该`18.0.1025.162`数字是谷歌浏览器的版本号。
例如：谷歌浏览器 v18.0.1025.162。

您可以使用两个文件来获取当前版本号：

1.  ```
    %LOCALAPPDATA%\Google\Chrome\User Data\Default\Preferences
    ```

    在`proile.created_by_version` *设置中*。
    例如：`"created_by_version": "18.0.1025.162"`。

2.  ```
    %LOCALAPPDATA%\Google\Chrome\用户数据\本地状态
    ```

    在`user_experience_metrics.stability.stats_version` *设置中*。
    例如：`"stats_version": "18.0.1025.162"`。

`created_by_version`和`stats_version` *设置*在每个文件中似乎都是唯一的。这意味着每个文件中似乎没有与该*设置*名称重复的内容。所以你可以使用`FOR`命令来检索数字。

# html - 边距不应用于页脚

> ID：12130208
> 
> 赞同：1
> 
> 时间：2012-08-26T12:41:25.163
> 
> 标签：html, css, margin

这是我的网站，因此您可以看到问题：[网页](http://freshbeer.lv/final/index.php)

问题是我的`.footer` Has a `margin: 50px 0 50px 0;`，但由于某种原因，它似乎没有距离顶部 50px 的边距。我不明白是什么导致了问题。

这是页脚部分的完整css（`.dashed-footer`基本上是带有虚线边框的页脚内部部分。）

**CSS**

```
.footer {
    margin: 50px 0 50px 0;
    background-color: #1d130e;
    width: 100%;
    min-width: 1000px;
    height: 50px;
    border-top: 1px solid #0d0907;
    border-bottom: 1px soid #0d0907;
    clear: both;

    -webkit-box-shadow: 0px 0px 15px -1px #181513;
    box-shadow: 0px 0px 15px -1px #181513;
}

.dashed-footer {
    height: 37px;
    margin-top: 5px;
    text-align: center;
    line-height: 38px;
    border-top: 1px dashed #613e27 !important;
    border-bottom: 1px dashed #613e27 !important;
    color: #e6d7bb;
    text-shadow: 1px 1px 0 #000;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T12:50:41.303

```
overflow: hidden; 
```

就是`section.content`答案。这是因为其中的元素是浮动的，这使它们脱离了文档的正常流程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T12:56:36.577

我认为这是因为应用了边距，从 50px 向下`<section id="content">`，但由于某种原因，三重奏被放置在该部分之外，并将页脚向下推！如果您选择“检查元素”并将鼠标悬停`<section id="content">`在幻灯片的下方，您会看到它停在幻灯片的下方，而三重奏则在下方。我认为解决方案是`margin: [height of trio plus margins, borders, etc] + 50px 0 50px 0;`

# android - GridView 内容在滚动期间消失

> ID：12130210
> 
> 赞同：6
> 
> 时间：2012-08-26T12:41:34.467
> 
> 标签：android, android-gridview

我的应用程序中有一个`GridView`我想在其中显示文本和复选框，就像电子邮件收件箱页面一样。我为此使用了一个适配器，但是当我显示超过 15 个元素时，顶行的文本和复选框消失了，所以当我再次向上滚动时，它们不可见。这是我的代码

```
public class EmployeeAdaptor extends BaseAdapter {  
Context context;
String [] table;
int pos;
int formatOfTable;
public EmployeeAdaptor(Context c,String []tab,int numberOfItems,int format, boolean[] sel) {
    context = c;
    table = tab;
    items = numberOfItems;
    formatOfTable = format;
    //ifformat is 0 then show text view in first column
    //if it is 1 then show radio button in first column
    //if it is 2 then show check box in first column.
    pos = 0;
}
public int getCount() {
    // 
    return items;
}

public Object getItem(int position) {
    // 
    return position;
}

public long getItemId(int position) {
    // 
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {

    View v;
    TextView text = new TextView(context);
    RadioButton radio = new RadioButton(context);
    CheckBox check = new CheckBox(context);

    if(convertView == null){
        v = new View(context);
    }
    else{
        v = convertView;
    }

    if(formatOfTable==2 && position%5==0 && position/5!=0){
        check.setId(position/5);
        v = check;

    }
    else if(formatOfTable==0 && position%5==0 && position/5!=0){
        text.setText("");
        v = text;
        //To set blank text at first position when no need of check
    }
    else{
        if(position%5!=0){
            try{
                v = text;
                text.setText(table[pos]);
                text.setTextColor(Color.BLACK);
                text.setTextSize(20);
                pos++;
            }
            catch(Exception e){

            }
        }
    }
    if(position/5==0){
        text.setTypeface(Typeface.DEFAULT_BOLD);
    }
    return v;
}
  } 
```

对适配器类的调用如下：

```
table.setAdapter(new EmployeeAdaptor(this, empTable, numberofboxes, 0, selected));
//OR
table.setAdapter(new EmployeeAdaptor(this, empTable, numberofboxes, 1, selected)); 
```

布局 XML 文件是

```
<GridView
    android:id="@+id/gridView1"
    android:layout_width="wrap_content"
    android:layout_height="360dp"
    android:layout_marginTop="40dp"
    android:numColumns="5" android:verticalSpacing="35dp">
</GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:34:52.753

问题似乎是您没有正确回收视图。以下最小示例基于您的代码的简化（我已经删除了一些成员和一些条件块）。只有两种细胞，`TextView`和`CheckBox`被考虑。

```
public class EmployeeAdaptor extends BaseAdapter {  
    private Context context;
    public String [] table;
    private int items;

    public EmployeeAdaptor(Context c,String []tab,int numberOfItems) {
        context = c;
        items = numberOfItems;
    }

    @Override
    public int getCount() {return items;}

    @Override
    public Object getItem(int position) {return position;}

    @Override
    public long getItemId(int position) {return position;}

    @Override
    public int getItemViewType(int position) {
        int viewType;
        if (position%5 == 0 && position/5 != 0) {
            // Positions 5, 10, 15...
            // Return a CheckBox
            viewType = 0;
        } else {
            // Return a TextView
            viewType = 1;
        }
        return viewType;
    }

    @Override
    public int getViewTypeCount() {
        return 2;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v;
        if (convertView == null) {
            if (position%5 == 0 && position/5 != 0) {
                // Positions 5, 10, 15...
                // Return a CheckBox
                v = new CheckBox(context);
            } else {
                // Return a TextView
                v = new TextView(context);
            }
        } else {
            v = convertView;
        }
        if (position < 5) {
            ((TextView)v).setTypeface(Typeface.DEFAULT_BOLD);
            ((TextView)v).setText(table[position]);
        } else if (position%5 == 0 && position/5 != 0) {
            // Positions 5, 10, 15...
            ((CheckBox)v).setId(position/5);
        } else {
            ((TextView)v).setTypeface(Typeface.DEFAULT);
            ((TextView)v).setText(table[position]);
        }
        return v;
    }
} 
```

注意 和 的`getViewTypeCount`使用`getItemViewType`。当您`getView`处理不同类型的视图时，它们会为您提供帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-26T12:56:35.860

我认为当您添加新项目时，GridView 已满并自动向下滚动（因此第一个项目“离开”在顶部）。是否有超过 15 件物品的空间？特别是因为您将 GridView 的高度固定为 360dp？您可以为 GridView 设置背景颜色以进行调试，以查看 GridView 获得了多少空间以及前 15 个项目占用了多少空间。

# android - Android - 设计模式 - 等待网络

> ID：12130219
> 
> 赞同：2
> 
> 时间：2012-08-26T12:43:34.540
> 
> 标签：android, multithreading, android-ui

我有一些活动实现了一个接口（称为 NetworkListener）。当从远程服务器请求信息时，它们会产生一个类的实例（称为 NetworkRequest）。NetworkRequest 是一个线程类，它向服务器发送请求，等待响应并将其发送回请求的 NetworkListener 对象。最多可能需要 10 秒才能将数据返回到 NetworkListener 实例。在那段时间里，很有可能那个Activity或者Fragment已经不存在了，很多基于服务端调用的action已经失效，会抛出NPE，比如：

```
((TextView) findViewById(R.id.server_status)).setText("Server response: " + response.getMsg()); 
```

确保请求类仍然存在并能够更新 UI 的最佳方法是什么？

目前在我拥有的从服务器接收回调的每个方法的顶部：

```
if (getWindow() == null) {  // or getView()/getActivity() if Fragment
            finish();
            return;
        } 
```

这似乎效率低下且多余。有没有更好的方法来完成我想要完成的事情？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:07:27.420

您可以将活动/片段的逻辑检查状态移动到 NetworkRequest。将 isActive() 方法添加到 NetworkListener 接口。仅当 NetworkListener 处于活动状态时，NetwrokRequest 才会向 NetworkListener 发送响应。

您可以在 onCreate() -> active 和 onDestroy() -> inactive 中设置活动/片段活动性。

请注意旋转屏幕时的活动状态变化。然后，你得到一个没有得到服务器响应的新活动，这可能不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:08:43.057

您可以使用 AsyncTask 来执行您的网络请求。当不再需要请求时，可以取消 AsyncTask。

# xml - XML 元素可以同时包含文本和子元素吗？

> ID：12130228
> 
> 赞同：40
> 
> 时间：2012-08-26T12:45:06.347
> 
> 标签：xml, xml-parsing

我正在查看一些 xml 文件，但没有找到问题的答案：XML 元素可以同时包含文本和子元素吗？

例如：

```
<tree>
    <node1> 
      textTextText 
      <subnode1> text1 </subnode1>
      <subnode2> text2 </subnode2>
    </node1>
</tree> 
```

我总是看到这些类型：

```
 <node2>
       <sub1> text </sub1>
    </node2> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-26T12:55:29.000

是的。一个父节点包含零个或多个子节点。文本节点和元素节点是两种类型的节点，一个元素节点可以有任意数量的文本和/或元素子节点以任何顺序。不过，模式可能会限制这一点。事实上，元素节点之间的空白实际上形成了文本节点兄弟姐妹。但是，通常会忽略此空格。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-26T18:00:22.870

是的。它被称为“混合内容”。

# google-apps-script - 检测 Google Apps Spreadhset 是否存在脚本

> ID：12130235
> 
> 赞同：-1
> 
> 时间：2012-08-26T12:46:26.213
> 
> 标签：google-apps-script, google-apps

**没有上下文的问题：**

是否有用于查看电子表格文件并检测该文件是否包含脚本的 Google Apps 电子表格脚本属性？

**有上下文的问题：**

我想以编程方式在 Google Apps 中复制电子表格。电子表格在一个脚本文件中具有多个脚本功能。我尝试将其设置为模板，但这只是导致错误（实际上这部分不是我，所以我在这里不是 100% 清楚。错误是谷歌的结果。错误消息会出现在打开时电子表格文件的顶部，并且不会链接任何脚本。）

我要解决的问题是，每当我将文件作为常规电子表格而不是模板复制时，它会打开一个新选项卡，上面写着“正在加载...”，要么完成并关闭该选项卡，要么只是挂起并且永远不会关闭选项卡。如果它实际完成，则生成的复制文件与源文件相同。但是，如果“加载”选项卡永远不会关闭，那么文件似乎会被复制，但不会复制任何脚本。

我想做的是制作一个复制我的文件的脚本。如果生成的电子表格中包含脚本，则停止，但如果不存在脚本，则删除该文件并重试。

我找不到一种查看电子表格文件内容并发现是否有与之关联的脚本的方法。这个属性肯定是存在的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T21:01:48.083

没有这样的方法可以检查脚本是否附加到电子表格。

我对您在复制时遇到的麻烦感到有点惊讶……我从来没有遇到过这样的问题……

如果您想以编程方式确定您的副本，我想最好的解决方案是将您的复制命令放在 try/catch 结构中：如果复制过程中没有发生错误，那么您可以确定副本是原始文件的完美克隆。使用该`Docslist`服务，`file.makeCopy`（[文档在这里](https://developers.google.com/apps-script/class_file#makeCopy)）

# iphone - resignFirstResponder Dosent 为标记的 TextField 工作

> ID：12130239
> 
> 赞同：0
> 
> 时间：2012-08-26T12:46:47.140
> 
> 标签：iphone, xcode, textfield

我是 iOS 和 Xcode 的新手。我正在使用一个简单的计算器。我有一个表格视图，我在其中通过代码添加了 30 个文本字段。我给他们分配标签。

然后我为 NumPad 类型的 textField 制作了键盘。为此，我需要使用工具栏关闭键盘。

但是，当我运行程序时，带有最后一个标签的 textField 会关闭键盘，而其他标签则不会。我想当我在代码中提到 textField 时，它会分配最后一个标签的 textField。

我的代码已给出。

```
for (int i = 0; i < 30; i++) {    
    mainTextField = [[UITextField alloc] initWithFrame:CGRectMake(20, (80 + (i * 60)), 280, 30)];        
    mainTextField.borderStyle = UITextBorderStyleRoundedRect;
    mainTextField.textColor = [UIColor blackColor]; 
    mainTextField.font = [UIFont systemFontOfSize:17.0]; 
    mainTextField.backgroundColor = [UIColor whiteColor]; 
    mainTextField.autocorrectionType = UITextAutocorrectionTypeNo;   
    mainTextField.backgroundColor = [UIColor clearColor];
    mainTextField.keyboardType = UIKeyboardTypeNumberPad;
    mainTextField.keyboardType=UIKeyboardTypeDecimalPad;
    mainTextField.returnKeyType = UIReturnKeyDone;  
    mainTextField.tag= i+1;
    mainTextField.delegate=self;

       [self->mainTableView  addSubview:mainTextField];

       self. numberToolbar = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 320, 50)];
       self. numberToolbar.barStyle = UIBarStyleBlackOpaque;
       self. numberToolbar.items = [NSArray arrayWithObjects:
                               [[UIBarButtonItem alloc]initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelNumberPad)],
                               [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil],
                               [[UIBarButtonItem alloc]initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(doneWithNumberPad)],
                               nil];
       [self.numberToolbar setTag:i+1];
        [self.numberToolbar sizeToFit];

        mainTextField.inputAccessoryView = numberToolbar;

        mainTextField.clearButtonMode = UITextFieldViewModeWhileEditing;

    mainLabel = [[UILabel alloc] initWithFrame:CGRectMake(20, 55+(i*60), 280, 18)];
    mainLabel.backgroundColor = [UIColor clearColor];
    mainLabel.textAlignment = UITextAlignmentLeft;
    mainLabel.tag= i+1;

    {
        switch ([mainLabel tag]) {
            case 1:
                mainLabel.text=[ passedValue objectAtIndex:0];
                break;
            case 2:
                mainLabel.text=[ passedValue objectAtIndex:1];
                break;
            case 3:
                mainLabel.text=[ passedValue objectAtIndex:2];
                break;
            case 4:
                mainLabel.text=[ passedValue objectAtIndex:3]; 
                break;
            case 5:
                 mainLabel.text=[ passedValue objectAtIndex:4];  
                break;
            case 6:
                mainLabel.text=[ passedValue objectAtIndex:5]; 
                break;
            case 7:
                mainLabel.text=[ passedValue objectAtIndex:6]; 
                break;
            case 8:
                mainLabel.text=[ passedValue objectAtIndex:7]; 
                break;
            case 9:
                 mainLabel.text=[ passedValue objectAtIndex:8]; 
                break;
            case 10:
                 mainLabel.text=[ passedValue objectAtIndex:10]; 
                break;
            case 11:
                 mainLabel.text=[ passedValue objectAtIndex:11]; 
                break;
            case 12:
                mainLabel.text=[ passedValue objectAtIndex:12]; 
                break;
            case 13:
                 mainLabel.text=[ passedValue objectAtIndex:13]; 
                break;
            case 14:
                mainLabel.text=[ passedValue objectAtIndex:14]; 
                break;
            case 15:
                 mainLabel.text=[ passedValue objectAtIndex:15]; 
                break;
            case 16:
                 mainLabel.text=[ passedValue objectAtIndex:16]; 
                break;
            case 17:
                 mainLabel.text=[ passedValue objectAtIndex:17]; 
                break;
            case 18:
                 mainLabel.text=[ passedValue objectAtIndex:18];    
                break;
            case 19:
                 mainLabel.text=[ passedValue objectAtIndex:19]; 
                break;
            case 20:
                 mainLabel.text=[ passedValue objectAtIndex:20]; 
                break;
            case 21:
                 mainLabel.text=[ passedValue objectAtIndex:21]; 
                break;
            case 22:
                mainLabel.text=[ passedValue objectAtIndex:22]; 
                break;
            case 23:
               mainLabel.text=[ passedValue objectAtIndex:23]; 
                break;
            case 24:
               mainLabel.text=[ passedValue objectAtIndex:24]; 
                break;
            case 25:
                 mainLabel.text=[ passedValue objectAtIndex:25]; 
                break;
            case 26:
                mainLabel.text=[ passedValue objectAtIndex:26]; 
                break;
            case 27:
                mainLabel.text=[ passedValue objectAtIndex:27]; 
                break;
            case 28:
                 mainLabel.text=[ passedValue objectAtIndex:28]; 
                break;
            case 29:
                 mainLabel.text=[ passedValue objectAtIndex:29]; 
                break;

            default:
                break;
        }

    [self->mainTableView addSubview:mainLabel];
    [self configureView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:58:49.690

这段代码有几个问题。

首先，这*不是*您创建包含 30 个文本字段的表格的方式。相反，您使用 a [`UITableView`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html)，将其设置为您的视图控制器`delegate`并`dataSource`实现所需的方法。其中`tableView:numberOfRowsInSection:`您将返回 30。然后在`tableView:cellForRowAtIndexPath:`您创建一个单元格中，将*一个*文本字段放入其中并返回该单元格。互联网上有大量关于如何设置这样的表格视图的教程，您还可以阅读 Apple 的文档。您几乎*从不*向 tableView 本身添加任何其他视图。

`self->tableView`是错的。当`->`您想要取消引用指向结构的指针并访问或设置其中一个变量时，在 C 中使用（以及其他）表示法。您不能将它与 Objective-C 对象一起使用。简单地写`self.tableView`。如果您正确声明了您的财产，这应该可以工作。

该开关块是不必要的。你为什么不这样做：

```
mainLabel.text = [passedValue objectAtIndex[mainLabel tag]-1]; 
```

# c - Valgrind 不显示行号

> ID：12130246
> 
> 赞同：10
> 
> 时间：2012-08-26T12:47:57.913
> 
> 标签：c, linux, ubuntu, valgrind

我试图找出我在哪里使用 Valgrind 对一段内存进行了无效写入。它告诉存在这样的问题，也在什么功能中，但不是在哪一行。虽然函数很小，但我希望在 Valgrind 中显示行号。我在 Valgrind 的一些输出中看到了这一点，但目前它们没有显示出来，我想知道为什么。

输出如下：

```
niklas@emerald:~/Arbeitsfläche/spyr/bin/Debug$ valgrind --tool=memcheck --leak-check=full --show-reachable=yes ./spyr
[...]
==4404== Invalid write of size 4
==4404==    at 0x8048849: sp_ParticleBuffer_init (in /home/niklas/Arbeitsfläche/spyr/bin/Debug/spyr)
==4404==    by 0x8048BFC: sp_ParticleSystem_createParticle (in /home/niklas/Arbeitsfläche/spyr/bin/Debug/spyr)
==4404==    by 0x8048691: main (in /home/niklas/Arbeitsfläche/spyr/bin/Debug/spyr)
==4404==  Address 0x422a0a0 is 4 bytes after a block of size 4 alloc'd
==4404==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==4404==    by 0x8048BC1: sp_ParticleSystem_createParticle (in /home/niklas/Arbeitsfläche/spyr/bin/Debug/spyr)
==4404==    by 0x8048691: main (in /home/niklas/Arbeitsfläche/spyr/bin/Debug/spyr)
==4404== 
==4404== Invalid write of size 4
==4404==    at 0x8048865: sp_ParticleBuffer_init (in /home/niklas/Arbeitsfläche/spyr/bin/Debug/spyr)
==4404==    by 0x8048BFC: sp_ParticleSystem_createParticle (in /home/niklas/Arbeitsfläche/spyr/bin/Debug/spyr)
==4404==    by 0x8048691: main (in /home/niklas/Arbeitsfläche/spyr/bin/Debug/spyr)
==4404==  Address 0x422a09c is 0 bytes after a block of size 4 alloc'd
==4404==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==4404==    by 0x8048BC1: sp_ParticleSystem_createParticle (in /home/niklas/Arbeitsfläche/spyr/bin/Debug/spyr)
==4404==    by 0x8048691: main (in /home/niklas/Arbeitsfläche/spyr/bin/Debug/spyr)
[...] 
```

我看到在文件名后面的双冒号后面显示行号的输出。即`/home/niklas/Arbeitsfläche/spyr/bin/Debug/spyr:23`或类似的。

我该如何启用它？

仅供参考，这就是`sp_ParticleBuffer_init`功能。

```
int sp_ParticleBuffer_init(sp_ParticleBuffer* buffer, sp_Uint32 buffer_size, int init_zero) {
    size_t size   = sizeof(sp_Particle) * buffer_size;
    buffer->next  = null;
    buffer->array = (sp_Particle*) malloc(size);
    buffer->alive_count = 0;

    if (!buffer->array) return SPYR_ALLOCFAILED;
    if (init_zero) memset((void*) buffer->array, 0, size);
    return SPYR_NOERR;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-26T12:49:16.130

您需要在二进制文件中包含调试信息。`-g`如果您正在使用，请传递标志`gcc`。

# javascript - Backbone：引用事件到父对象

> ID：12130248
> 
> 赞同：2
> 
> 时间：2012-08-26T12:48:21.280
> 
> 标签：javascript, events, backbone.js, underscore.js, backbone-events

我想用`Backbone.Events`我的父对象之一替换某个子对象中的系统。例子：

```
// initialize function of the repository object
initialize: function() {
        var users = new Backbone.Collection();

        // we save a reference of our event system in ourEvents object
        var ourEvents = {};
        ourEvents.on = this.on;
        ourEvents.off = this.off;
        ourEvents.trigger = this.trigger;
        ourEvents.bind = this.bind;
        ourEvents.unbind = this.unbind;

        // now we overwrite events in users.collection with our one
        _.extend(users, ourEvents);

        // now we listen on the test event over this
        this.on('test', function() { alert('yiha'); });

        // but triggering over users works too!
        users.trigger('test');
} 
```

正如你一样，我们现在得到了某种一对多的事件系统。一个侦听器和许多可以触发事件的对象。

这有助于我在使用不同的`Backbone.Collections`或`Backbone.Models`与前端具有相同视图系统的情况下工作。

如您所见，解决方案还不是最优的。

**是否有更短的方法来覆盖事件系统？**

**更新：** 所以我研究了主干源代码，发现它`Backbone.Events`保存了一个回调列表： `this._callback`. 这至少在理论上应该有效：

```
this.users._callbacks = this._callbacks = {}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T19:26:21.733

Clean Backbone 这样做的方法是将事件绑定到集合上，而不是出于某种原因尝试从对象中复制它们

```
// initialize function of the repository object
initialize: function() {
        var users = new Backbone.Collection();

        users.on('on', this.on, this);
        users.on('off', this.off, this); // third parameter to set context of method to the current view
        // ...and so on
        // you were listening here on the current view but triggering later on collection - this would never work
        users.trigger('on'); // would call the this.on method in the context of current view
        // if this method would have been triggered from inside of the users collection it would still trigger the desired method inside of this view
} 
```

提示 - 永远不要接触和利用前面带下划线的方法和变量 - 这些是私有 API 和属性，并且可能在下一个版本的任何时间点发生变化，因为只有公共方法/属性保证不会在发布。我相信您在这里尝试过分复杂化并查看您所犯的一些错误，您一直在尝试太努力并且以太多不同的方式:) 始终尝试使事情保持简单

# python - 来自“通用相关”模型的 Django 表单

> ID：12130254
> 
> 赞同：3
> 
> 时间：2012-08-26T12:48:44.673
> 
> 标签：python, django, django-forms

我有一些模型，与`GenericForeignKey`：

```
Class Main(models.Model)
    filed_1      = models.CharField(max_length=20)
    object_id    = models.PositiveIntegerField()
    content_type = models.ForeignKey(ContentType)
    object       = generic.GenericForeignKey('content_type', 'object_id')

Class Additional_1(models.Model):
    f_1 = models.CharField(max_length=20)
    f_2 = models.CharField(max_length=20)

Class Additional_2(models.Model):
    d_1 = models.CharField(max_length=20)
    d_2 = models.CharField(max_length=20) 
```

和这个模型的形式：

```
Class MainForm(forms.ModelForm):
      class Meta:
           model  = Main
           fields = ('filed_1', 'object_id', 'content_type')

           widgets = {
               'object_id': forms.HiddenInput,
               'content_type': forms.HiddenInput
           }

Class Additional_1Form(forms.ModelForm):
    class Meta:
        model  = Additional_1
        fields = ('f1', 'f2')

Class Additional_2Form(forms.ModelForm):
    class Meta:
        model  = Additional_2
        fields = ('d1', 'd2') 
```

如何使用一个提交按钮（ +和+ ）在一个 html 表单中制作由`MainForm`+字段组成的表单，并提供正确的创建和编辑。有办法使用标准的 Django 组件，比如 inline formset for ?`Additional_iForm``MainForm``Additional_1Form``Main``Additional_2Form``ForeignKey`

PS我认为这个问题的答案应该包含在文档的这一部分中，但是信息太少无法回答。[https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#generic-relations-in-forms-and-admin](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#generic-relations-in-forms-and-admin)

**第 1 版**

```
# This is always false, because of 'object_id' in main_form
if main_form.is_valid() and additional_1_form.is_valid():
    additional = additional_1_form.save()
    main_form.object_id = additional .id # I need something like this to set object_id 
    main_form.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:15:03.630

创建一个表单标签：

```
<form action="..." method="POST">
{{ main_form }}    
{{ additional_form_1 }}    
{{ additional_form_2 }}
<input type="submit" value="Submit!">
</form> 
```

其中`{{ mainform }}`和是 Django 为每个表单生成的 HTML `{{ additional_form_1 }}`。`{{ additional_form_2 }}`您可以使用 JavaScript 添加编辑反馈或附加功能（例如当用户为特定字段选择特定值时填写值）。

在后端，您可以检查每个表单是否有效：

```
if (main_form.is_valid() and
   additional_form_1.is_valid() and
   additional_form_2.is_valid()):
   pass 
```

如果没有，您可以再次在表单页面中显示错误。

# sql-server-2008 - 使用 Count() 和窗口函数的 sql 内部连接

> ID：12130259
> 
> 赞同：0
> 
> 时间：2012-08-26T12:49:21.977
> 
> 标签：sql-server-2008, count, inner-join, window-functions

```
;WITH n AS  
( 
  SELECT problemID, StationName, problemCode, ProblemCreateDate, probCount, 
    c = COUNT(*) OVER (PARTITION BY StationName, problemCode), 
    rn = ROW_NUMBER() OVER  
    ( 
      PARTITION BY StationName, problemCode ORDER BY ProblemCreateDate DESC, problemID DESC 
    ) 
  FROM dbo.tblProblems
) 
 SELECT problemID, StationName, problemCode, ProblemCreateDate, c 
 FROM n WHERE rn = 1; 
```

还有一个名为 的表`tblCustomers`，其中有一列`isAssistent`Type( `bit`)

我尝试进行内部联接，但这对我来说太复杂了，并且在尝试应用 with 的过滤器时出现`inner join`错误

```
tblCustomers where tblCustomers.isAssistent =1 
```

我将非常感激并很高兴知道如何编写正确的语法

# 重新编辑

```
inner join tblCustomers on tblProblems.CustID = tblCustomers.custID 
```

错误，我最后一次尝试

> 消息 4104，级别 16，状态 1，行 14 无法绑定多部分标识符“tblProblems.CustID”。消息 4104，级别 16，状态 1，行 12 无法绑定多部分标识符“tblproblems.problemID”。消息 4104，级别 16，状态 1，第 12 行无法绑定多部分标识符“tblproblems.custID”。消息 4104，级别 16，状态 1，第 12 行无法绑定多部分标识符“tblproblems.StationName”。消息 4104，级别 16，状态 1，第 12 行 无法绑定多部分标识符“tblproblems.problemCode”。消息 4104，级别 16，状态 1，第 12 行无法绑定多部分标识符“tblproblems.ProblemCreateDate”。

这是我的疯狂猜测：

```
;WITH n AS  
( 
  SELECT tblCustomers.*,tblproblems.problemID, tblproblems.StationName, tblproblems.problemCode, tblproblems.ProblemCreateDate, tblproblems.probCount, 
    c = COUNT(*) OVER (PARTITION BY tblproblems.StationName, tblproblems.problemCode), 
    rn = ROW_NUMBER() OVER  
    ( 
      PARTITION BY tblproblems.StationName, tblproblems.problemCode ORDER BY tblproblems.ProblemCreateDate DESC, tblproblems.problemID DESC 
    ) 
  FROM dbo.tblProblems
  inner join tblCustomers on tblProblems.CustID = tblCustomers.custID
) 
SELECT tblCustomers.*, tblproblems.problemID, tblproblems.custID, tblproblems.StationName, tblproblems.problemCode, tblproblems.ProblemCreateDate, c 
FROM n 
inner join tblCustomers on tblProblems.CustID = tblCustomers.custID
WHERE rn = 1; 
```

目的是仅在 tblCustomers.isAssistent=1 时选择 tblProblems 的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:18:05.847

您在外面的查询是错误的，应该是

```
SELECT tblCustomers.*, n.problemID, n.custID, 
           n.StationName, n.problemCode, n.ProblemCreateDate, c 
FROM n 
inner join tblCustomers on n.CustID = tblCustomers.custID
WHERE rn = 1; 
```

你为什么要再次加入 tblcustomers？

你可以这样做：

```
;WITH n AS  

( 
  SELECT tblCustomers.*,tblproblems.problemID, tblproblems.StationName, 
         tblproblems.problemCode, tblproblems.ProblemCreateDate,
         tblproblems.probCount, 
    c = COUNT(*) OVER 
        (PARTITION BY tblproblems.StationName, tblproblems.problemCode), 
    rn = ROW_NUMBER() OVER  
    ( 
      PARTITION BY tblproblems.StationName, tblproblems.problemCode
      ORDER BY tblproblems.ProblemCreateDate DESC, tblproblems.problemID DESC 
    ) 
  FROM dbo.tblProblems
  inner join tblCustomers on tblProblems.CustID = tblCustomers.custID
  WHERE tblCustomers.isAssistent =1

) 
SELECT n.* FROM n where rn = 1 
```

如果您只需要问题数据

```
;WITH n AS  

( 
  SELECT tblproblems.problemID, tblproblems.StationName, 
         tblproblems.problemCode, tblproblems.ProblemCreateDate,
         tblproblems.probCount, 
    c = COUNT(*) OVER 
        (PARTITION BY tblproblems.StationName, tblproblems.problemCode), 
    rn = ROW_NUMBER() OVER  
    ( 
      PARTITION BY tblproblems.StationName, tblproblems.problemCode
      ORDER BY tblproblems.ProblemCreateDate DESC, tblproblems.problemID DESC 
    ) 
  FROM dbo.tblProblems
  inner join tblCustomers on tblProblems.CustID = tblCustomers.custID
  WHERE tblCustomers.isAssistent =1

) 
SELECT n.* FROM n where rn = 1 
```

# javascript - 销毁 Bootstrap 弹出框时出现 Javascript 错误

> ID：12130265
> 
> 赞同：6
> 
> 时间：2012-08-26T12:50:33.810
> 
> 标签：javascript, jquery, twitter-bootstrap, popover

尝试随时更改引导弹出窗口的标题和内容，我遇到了一些麻烦。

我在销毁选择器中的弹出框内容时遇到了这个问题。

错误是这个

```
TypeError: 'undefined' is not a function (evaluating 'data[option]()') 
```

这段代码是这样的：

```
$("#test_name-" + json.test_id).popover('destroy'); 
```

我在该行中得到错误。我已经检查过它`$("#test_name-" + json.test_id)`确实包含一个 Popover。

编辑：感谢评论，我解决了。我没有使用最新版本的 Bootstrap。一旦升级到 2.1.0，一切似乎都很完美。

重要的！在这个新版本中，您需要将触发器设置为“悬停”，因为默认情况下为“单击”。

非常感谢

佩德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:43:05.593

由于评论，我解决了它。我没有使用最新版本的 Bootstrap。一旦升级到 2.1.0，一切似乎都很完美。

# android - 突出显示“ListFragment”中的选定项目？

> ID：12130266
> 
> 赞同：9
> 
> 时间：2012-08-26T12:50:37.303
> 
> 标签：android, listview, android-listview, android-fragments, android-listfragment

我已经发布了几次相同的问题，但尚未解决。我有一个`ListFragment`并且我想突出显示列表中的选定项目。有人建议我使用“选择器”。我不明白如何使用这个选择器。我的`ListFragment`课是：

```
// Create an adapter with list of stores and populate the list with
        // values
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, StoreList);
        setListAdapter(adapter);
        mDbHelper.close();
    }

    /*
     * (non-Javadoc)
     * 
     * Handles the event when an item is clicked on left pane, performs action
     * based on the selection in left pane
     *  
     * @see android.app.ListFragment#onListItemClick(android.widget.ListView,
     * android.view.View, int, long)
     */
    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        String selectedStore = (String) getListAdapter().getItem(position);
        DetailFragment fragment = (DetailFragment) getFragmentManager()
                .findFragmentById(R.id.detailFragment);
        if (fragment != null && fragment.isInLayout()) {
            v.setBackgroundColor(getResources().getColor(R.color.BLUE));
            // passes selectedStore to detail fragment  
            fragment.setText(selectedStore);

            // getItemList(selectedStore);

        } 
```

使用 setBackground 永久设置颜色，但我希望它在选择另一个项目时消失。我了解如何在 a 中使用选择器，`ListView`但在我的情况下，如果我没有为 定义任何 xml `Listview`，那么我将如何使用“选择器”？我使用`android.R.layout.simple_list_item_1`的是预定义的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-09T22:05:12.003

以下对我有用：

**res/color/menu_highlight.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item 
    android:state_pressed="true"
    android:drawable="@color/red"  />
  <item
    android:state_selected="true"
    android:drawable="@color/red" />
  <item 
    android:drawable="@color/white" />
</selector> 
```

**资源/值/colors.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<resources> 
<color name="white">#FFFFFF</color>
<color name="red">#FF0000</color>
</resources> 
```

**res/layout/menuitem.xml::**（列表中每个项目的 XML）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent">
    <TextView
        android:id="@+id/textmenu"
        android:layout_height="wrap_content"
        android:text="text"
        android:textColor="#FFFFFF" 
        android:background="@color/menu_highlight"
        android:visibility="visible"
        android:layout_width="fill_parent" />
</LinearLayout> 
```

最后，在 ListFragment 类中，添加 View previous 并将以下代码添加到 onlistitemclick 函数中。（在[ListFragment: highlight selected row](https://stackoverflow.com/questions/15115559/listfragment-highlight-selected-row)中提到）

```
public class MenuListFragment extends ListFragment{

View previous;

@Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id); 
       //Logic to highlight selected item
        previous.setSelected(false);
        v.setSelected(true);
        previous=v;
    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-26T12:58:15.143

从你的`ListView`，打电话`setChoiceMode(ListView.CHOICE_MODE_SINGLE)`。然后，每当您想突出显示选定的项目时，请调用`setItemChecked(index, true)`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-26T15:13:11.730

我尝试了同样的方法，但没有找到任何好的解决方案。我实际上做的是使用这段代码来设置监听器：

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
    public void onItemClick(AdapterView<?> parent, View view, int position, long id){
        list_adapter.setSelectedPosition(position);
        listView.invalidate();
    }
}); 
```

其中列表适配器定义了以下公共方法

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View rowView = GuiBuilder.createHeroListItemView(heroes.get(position),getContext(),parent,false);
    if(position == selected_pos){
        rowView.setBackgroundColor((rowView.getResources().getColor(R.color.list_item_selected_color)));
    }
    return rowView;
}

public void setSelectedPosition(int selected_pos){
    this.selected_pos = selected_pos;
}

public int getSelectedPosition(){
    return selected_pos;
} 
```

也就是说，我以编程方式更改列表项的背景。此外，为了避免单击列表元素时出现闪烁效果，我没有为按下状态定义任何选择器

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true"
        android:drawable="@drawable/list_item_focused_color" />
    <item android:drawable="@drawable/list_item_default_color" />
</selector> 
```

这对我来说是有效的。我没有找到更好的解决方案，因为 setSelected(true) 不适用于列表项！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-26T17:08:11.400

我没有得到我想要的东西，所以我继续挖掘并想出了一个“便宜”的解决方案，这可能不是最佳实践，但可以完成工作。我希望该项目在选择时突出显示，并且当从 listFragment 中选择其他项目时颜色应该消失。这对我有用-我定义了一个静态`View V;` 并初始化了它`V = new View(getActivity());` 然后在我的

onListItemClick(ListView l, **View v** , int position, long id)

```
 V.setBackgroundResource(0);
            v.setBackgroundResource(R.color.BLUE);
            V = v; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-24T18:31:48.807

这对我来说非常好用`ListFragment`，但我认为它只适用于 Android 4.0 及更高版本。我为列表项创建了一个简单的布局`android:background="?android:attr/activatedBackgroundIndicator`（如果 Android 低于 4.0，您需要在 drawables 中找到类似的布局）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:gravity="center_vertical"
android:background="?android:attr/activatedBackgroundIndicator"
android:orientation="horizontal" >

<TextView
    android:id="@+id/list_item_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="end"
    android:singleLine="true"
    android:textAppearance="?android:attr/textAppearanceListItemSmall"
    android:gravity="center_vertical"
    android:layout_margin="@dimen/double_view_margin" /> 
```

然后，只需`ArrayAdapter`使用此布局创建一个简单的并将选择模式设置为单一：

```
final ArrayAdapter<String> labelsAdapter = new ArrayAdapter<String>(getActivity(), R.layout.item_simple_list_item, R.id.list_item_text, labels);

setListAdapter(labelsAdapter);

getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

之后，您可以使用方法突出显示必要的项目`setItemChecked`：

```
@Override
public void onListItemClick(final ListView l, final View v, final int position, final long id) {
    getListView().setItemChecked(position, true);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-13T20:10:19.633

我编码

```
getListView().setItemChecked(0, true); 
```

后

```
setListAdapter(oAdapter); 
```

代码块

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-27T18:13:22.123

类似于 type-a1pha 但带有选择器的东西，一旦你有了视图，你就可以 view.setSelected(true) ，这将添加你在选择器上定义的样式。执行操作后，您需要删除该标志。

# git - 任何源代码控制系统都可以根据每个客户端处理分支代码库吗？

> ID：12130269
> 
> 赞同：2
> 
> 时间：2012-08-26T12:50:41.223
> 
> 标签：git, version-control, tfs, branching-and-merging

我们目前正在使用 TFS 2010 来管理我们的源代码控制（MS 商店，所以它是默认选择）。

对于我们的独立项目，我们没有任何问题。然而，我们有一个核心产品，我们根据每个客户定制。许多客户需要相当大的定制，而其他客户只需要一些小的调整。

我们发现这是一场噩梦。我们基本上有一个包含核心产品的团队项目。如果客户不需要更改，他们只需部署核心产品。如果他们要求更改，我们会分支核心产品团队项目并开始着手处理。

因此，需要更改的单个文件需要我们对整个产品进行分支。我们做错了吗？我有点想像我们会创建一个分支，其中包含每个客户需要的主要产品的差异。然后基本上客户将获得核心+他们需要的任何更改。然后，如果我们添加到核心或更改它，那么他们就会自动得到它。

我们一直在开发核心，因此我们似乎一生都在将更改合并到所有分支项目中。我们目前有 5 个客户，但明年将有 15-20 个客户。然而，考虑到我们在 5 上所做的工作，这似乎完全无法管理。我们作为程序员的生活似乎只是一次又一次地合并。现在这部分是因为产品很新，所以核心有很多流失。但是，我们将始终希望继续开发核心。问题是我们都没有做过这样的项目，所以我们只是不知道我们应该如何处理它。

有人有什么想法吗？非常感谢任何建议，因为整个核心/分支/无尽的合并让我们感到难过。有人向我的一位同事建议，git 可以帮助我们查看任何内容。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T13:16:38.073

如果您的基础产品和分支产品具有相同文件的不同版本，*那么无论您使用什么源代码控制产品，最终都会合并*。有些（例如 Git）使分支和合并相当容易，有些（例如 TFS）使它成为一个非常繁重的操作，但仍然必须完成合并。

一种使它更容易处理的策略是将代码分解成更易于管理的部分（[想到 SOLID](http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))）并将任何适应分解为客户特定的类。如果有用于客户调整的单独文件，并且可以仅使用配置更改来注入类，那么根本就没有那么多理由为客户特定的更改进行分支。对特定于客户的类所做的最糟糕的更改就是破坏*您正在为其开发的客户*。这将继续为版本控制分支（即开发/测试/发布分支​​），但您不会获得版本控制*和*客户特定的分支。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T10:32:40.647

根据您的代码结构，您可以利用 TFS 中的部分分支。假设您的主分支名为“Main”，它有四个子文件夹：“a”、“b”、“c”、“d”。如果您知道您只会更改“d”，那么您只会将“d”分支到您的新分支，该分支可以称为“Feature1”。

因此，在 TFS 中，您将拥有以下文件夹结构：

```
Main/
    a/
    b/
    c/
    d/

Feature1/
    d/ 
```

现在，正确使用此部分分支的技巧是在处理 Feature1 时设置正确的工作区映射。你想要的是让 a/ b/ 和 c/ 来自 Main 和 d/ 来自 Feature1。您可以使用以下映射：

```
(active) C:/dev/Feature1 -> $/TeamProject/Main
(cloaked) $/TeamProject/Main/d
(active) C:/dev/Feature1/d -> $/TeamProject/Feature1/d 
```

因此，现在，在您的工作区中，a、b 和 c 将随着主分支中的更改而更新，而 d 将只是功能分支中的更改。合并时，只需要合并和解析 d 中的更改。

虽然这将解决您的问题，但您确实需要了解它相当复杂。没有什么可以阻止您在处理 Feature1 时意外检查 a、b 或 c 的更改，这些更改将直接进入主分支。此外，通过不将自己与 Main 中的更改隔离开来，其他开发人员可以对 a、b 或 c 进行更改，这些更改不会导致 Main 中的构建中断，但会导致 d 中的构建中断（假设 d 依赖于 a、b 或 c）。

这是一个关于如何创建部分分支的好[链接。](http://blogs.msdn.com/b/chandrur/archive/2009/07/16/creating-partial-branches-in-tfs.aspx)

另外一点，您可以为任何级别的文件和文件夹创建部分分支。您不仅限于顶级文件夹。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T13:19:28.420

git 为 TFS 提供了两个可能对您有所帮助的优势。

首先，在 git 中，分支创建起来既简单又快速，并且不需要 TFS 似乎需要的那种计划和持续的概念负载。其次，也是最重要的，git 允许您通过变基而不是合并来跨分支移动更改；这确实有助于保持对账的清洁和简单，并非常清楚什么是分支开发和什么是主干。

此外，还有一个不错的工具 git-tfs，它可以让您在使用 git 的同时仍将存储库保留在 TFS 中。当您正在过渡到 git 时，或者如果您的公司要求您在 TFS 中保留一个“主”存储库，这可能会很棒。

一个警告：虽然我认为您会发现 git 非常适合您的情况，但它并不是大部分 git 文档所涵盖的用例。很多 git 写作都集中在分支和合并上，而我认为像你这样的案例的优势是分支和重新定位。在您真正“获得” git 并知道在偏离常规路径时该做正确的事情之前往往需要一段时间的使用（并且详细解释如何执行您的用例超出了 StackOverflow 的范围），因此可能需要在你的团队搞定它之前的一段时间。

# python - 在 Flask 中初始化 DB 的地方

> ID：12130271
> 
> 赞同：9
> 
> 时间：2012-08-26T12:50:54.343
> 
> 标签：python, database, flask

我正在 Flask 中开发应用程序，它需要 DB，所以我要做的是：

```
app = Flask(__name__)
@app.before_request
def init_db_connection:
  # here I connect to my DB

@app.teardown_request
def destroy_db(exception):
  # here I destroy database connection 
```

在开发服务器（app.run（））上，我猜这不是初始化数据库的最佳位置，因为即使请求来自静态文件，数据库也会被初始化。在生产中，我可以有一个单独的 Web 服务器来提供静态文件，所以这应该不是问题。

但我仍然在想，这是否是初始化 DB 的正确方法，或者更好的是例如在当时使用的 Blueprint 中初始化 DB？只想知道最佳实践以及你们如何做到这一点:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:20:17.713

这就是我过去所做的方式，也是烧瓶文档中提倡的方式。我会坚持下去。

[https://web.archive.org/web/20120825162413/http://flask.pocoo.org/docs/tutorial/dbcon/](https://web.archive.org/web/20120825162413/http://flask.pocoo.org/docs/tutorial/dbcon/)

# actionscript-3 - 更改按钮的状态

> ID：12130273
> 
> 赞同：0
> 
> 时间：2012-08-26T12:51:30.520
> 
> 标签：actionscript-3, apache-flex, flex4, flash-builder, flex4.5

如何将按钮的状态从向上状态更改为向下状态，反之亦然？例如，如果我单击按钮（处于向上状态），它将改变并保持其状态为向下状态。比如打开/关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:50:58.587

你可以用这个

```
Button btn = (Button) findViewById(R.id.btnID);btn.setSelected(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:51:52.557

如果没有您的代码示例，就很难确定您到底要做什么。

我从您的问题中了解到，您无法更改按钮的状态 - 就像您找不到设置按钮状态的功能一样。您可以在按钮中使用自定义皮肤，然后尝试此操作。

```
myButton.skin.setCurrentState("your_State",true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:47:08.810

您应该通过任何类型的显示对象为您的按钮提供一组图形，然后更改该按钮的 MouseEvent.CLICK 侦听器中的可见对象集。此外，您应该从该按钮中跟踪当前按钮状态。像这样：

```
public class ToggleButton extends Sprite {
    public var toggledOn:Boolean;
    ....
    private function onClick(e:MouseEvent):void {
        if (toggled) {
            toggled=false;
            DisplayGraphics(upState);
        } else {
            toggled=true;
            DisplayGraphics(downState);
        }
    }
} 
```

因此，在您的“DisplayGraphics”实现中，您将不得不切换作为您的 ToggleButton 的 Sprite 的当前内容。如果您将按钮实现为 MovieClip，您还可以使用 gotoAndStop() 更改其帧，使用 Sprite 您将需要 removeChild() 和 addChild() 或您喜欢的任何其他东西，它们作为图形在按钮的子项上操作.

# visual-studio-2010 - JustCode 打破了我的错误列表

> ID：12130274
> 
> 赞同：-1
> 
> 时间：2012-08-26T12:52:03.113
> 
> 标签：visual-studio-2010, justcode

最近我只从我的机器中删除了代码，因为我的错误列表被破坏了。此代码（在实时错误检测中）是合法的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            fifi.ff.ww;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T08:38:29.450

您可以从`Visual Studio Tools - Options - Text Editor - C# - Advanced - Underline errors in the editor/Show live semantic errors`

JustCode 有内置的错误报告，它会停止 Visual Studio 之一，因为编辑器对它们都非常混乱。

# c# - MVC - 默认控制器

> ID：12130277
> 
> 赞同：1
> 
> 时间：2012-08-26T12:52:18.433
> 
> 标签：c#, asp.net-mvc

我正在创建一个希望动态添加页面的网站。因此，我想要一个更简单的 URL。我的目标是如下所示的 URL：

```
http://www.mysite.com/my-page-url 
```

而不是像下面这样的 URL：

```
http://www.mysite.com/pageController/my-page-url 
```

MVC URL 往往像这样工作：`|url|/|controller|/|action|/|params|`

我想做的是：`|url|/|params|`

对于上面的 URL，如果参数的值不等于控制器的名称，那么我想将这些参数传递给 PageContoller.ProcessDynamicPage。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T13:15:46.340

根据您的默认参数，您可以创建[路由约束](http://stephenwalther.com/archive/2008/08/07/asp-net-mvc-tip-30-create-custom-route-constraints.aspx)

```
 routes.MapRoute(
        "Default",
        "{Param1}",
        new { controller = "ProcessDynamicPage", action = "YourAction" },
        new {Param1= @"\d+" }
    ); 
```

如果您的参数是整数，这将起作用。

如果您的默认参数是字符串或其他东西，并且您无法创建正则表达式，或者无法实现`IRouteConstraint`最佳选择的东西，那么当它通过默认值时，它会为您的每个控制器创建匹配操作已经试图进行匹配。

```
routes.MapRoute(
    "YourController",
    "YourController\{Param1}",
    new { controller = "YourController", action = "YourAction" }
   }
);

routes.MapRoute(
    "YourController2",
    "YourController2\{Param1}",
    new { controller = "YourController2", action = "YourAction" }
     }
);

routes.MapRoute(
    "Default",
    "{Param1}",
    new { controller = "ProcessDynamicPage", action = "YourAction" }          
); 
```

如果您有很多控制器，您可能应该真正研究如何为您所期望的创建约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T12:59:47.387

使用 MVC 的默认路由方案，`http://www.mysite.com/my-page-url`将转到`my-page-url`控制器中的 Index 操作。如果要设置默认控制器和操作，可以在 Global.asax.cs 文件中将其设置为：

```
routes.MapRoute(
    "Default",                                              // Route name
    "{action}/{pageName}",                           // URL with parameters
    new { controller = "PageContoller", action = "ProcessDynamicPage", pageName = "" }  // Parameter defaults
); 
```

**更新**

如果您需要支持其他路线，您可以使用 Mark Oreta 建议的方法来创建它们。查看[Scott Gu 的博客](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)和[本教程](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T13:06:25.267

在 IIS 7 中，您需要查看处理程序映射。您可以指定一个特定的扩展名，例如 *.action，由您的默认控制器处理。我现在有点生疏了，但我认为这在 IIS 6 中基本上是相同的想法。在我的 .Net 2.0 应用程序的 web.config 文件中，我在 system.webServer 标记中有以下部分：

```
 <system.webServer>
        <handlers>
            <add name="defaultAction" path="*.action"   
                verb="*" 
                type="SumikinIntercom.Web.Controller.Controller,SumikinIntercom.Web.Controller" 
                resourceType="Unspecified" requireAccess="None" allowPathInfo="true" />
        </handlers> 
```

因此，任何扩展名为 .action 的 URL 都由我的默认 Controller 类处理。注意笨拙的语法。我必须指定完全限定的类名（包括程序集名称），后跟一个逗号，然后是完全限定的程序集名称。

对于 .Net 的最新版本，可能会有令人讨厌的语法变化，因此请注意这些变化。

# java - 如何将方法添加到标准java类

> ID：12130278
> 
> 赞同：2
> 
> 时间：2012-08-26T12:52:18.780
> 
> 标签：java, class, methods, monkeypatching

有没有办法将方法添加到标准 Java 类，例如`Object`？

我知道你不能继承`String`最终的类，但`Object`不是。我知道我可以子类化 Object 并在子类中定义一个方法，并使我的所有类成为它的子类，但我宁愿不必这样做。

我怀疑这要么是不可能的，要么我忽略了一些东西。提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T12:58:22.037

你不能在 Java 中做到这一点。但其他 JVM 语言能够做到这一点：

*   在[groovy](/questions/tagged/groovy "显示标记为“groovy”的问题") [`ExpandoMetaClass`](http://groovy.codehaus.org/ExpandoMetaClass)中允许向任何类添加任意方法

*   在[scala](/questions/tagged/scala "显示标记为“scala”的问题")中，隐式转换可用于以静态类型的方式模拟此类行为，请参阅：[Inject methods into existing classes](https://stackoverflow.com/questions/4213239)

*   您也可以在 JVM 之上运行[ruby](/questions/tagged/ruby "显示标记为“红宝石”的问题")​​ ( [jruby](/questions/tagged/jruby "显示标记为“jruby”的问题") ) 和[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")

# mysql - 无法找到的 MySQL 错误

> ID：12130283
> 
> 赞同：0
> 
> 时间：2012-08-26T12:53:33.507
> 
> 标签：mysql

我正在编写一些 PHP 代码来将一个值插入到我的 MySQL 数据库中：

```
INSERT INTO users_validate (uid, key) VALUES ('11', '4866ce5568850eb5f8daad79a8822d26') 
```

谁能告诉我这有什么问题？

编辑：错误消息是

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'key) VALUES ('11', '4866ce5568850eb5f8daad79a8822d26')' at line 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T12:58:14.487

尝试转义您的列名`key`：

```
INSERT INTO users_validate (uid, `key`) VALUES ('11', '4866ce5568850eb5f8daad79a8822d26') 
```

`KEY`是 MySQL 中的保留字：http: [//dev.mysql.com/doc/refman/5.0/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

# c++ - 使用 createprocess() 时的类型转换问题

> ID：12130288
> 
> 赞同：1
> 
> 时间：2012-08-26T12:54:46.337
> 
> 标签：c++, casting

我正在使用一个命令行应用程序，它期望参数生成所需的输出。我正在尝试使用`createprocess()`in`CPP`来调用应用程序并传递参数。我在类型转换上有困难。. 它说不`const char*`兼容`LPTSTR`。

如果我说

```
char a[]="param 1 param2";
createprocess("C:\\exmpl.exe",a,......) 
```

我用过`L"C:\\exmpl.exe"`，但它不工作。.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:36:38.870

`CreateProcess`此参数需要一个可变（非`const`）字符串。您显然是在传递一个`const`字符串。

下次请粘贴您正在使用的实际代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T12:56:43.400

你确定不是`CreateProcess`吗？无论如何，尝试

```
_T("C:\\exmpl.exe") 
```

此宏会将您的字符串相应地扩展为宽字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T14:01:00.133

Sorry, new answer:

Watch the 2nd parameter, it must be a TCHAR* (char* in ANSI or wchar_t* in UNICODE). Don't use CONST CHAR*, or say, don't simply pass "param1 param2" to the 2nd parameter, do it like this:

```
TCHAR param[] = TEXT("param1 param2");
CreateProcess(TEXT("my exe"), param, ...); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T15:57:36.687

您还可以将您的 VC 项目设置为多字节字符集。只需转到项目属性，然后在常规选项卡中您就可以看到字符集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T13:28:10.807

尝试

```
TCHAR a[] = TEXT("param 1 param2");
CreateProcess(TEXT("C:\\exmp1.exe", a, ...); 
```

如果您的应用程序设置为使用 UNICODE，则 TEXT 宏用于将您的字符串更改为 UNICODE。

# c# - 如何读取具有 ANSI 编码和非英文字母的文本文件？

> ID：12130290
> 
> 赞同：45
> 
> 时间：2012-08-26T12:55:11.213
> 
> 标签：c#, .net, unicode, utf-8, character-encoding

我有一个包含非英语字符的文件，并使用非英语代码页以 ANSI 编码保存。如何在 C# 中读取此文件并正确查看文件内容？

不工作

```
StreamReader sr=new StreamReader(@"C:\APPLICATIONS.xml",Encoding.ASCII);
var ags = sr.ReadToEnd();
sr=new StreamReader(@"C:\APPLICATIONS.xml",Encoding.UTF8);
ags = sr.ReadToEnd();
sr=new StreamReader(@"C:\APPLICATIONS.xml",Encoding.Unicode);
ags = sr.ReadToEnd(); 
```

工作，但我需要提前知道代码页是什么，这是不可能的。

```
sr=new StreamReader(@"C:\APPLICATIONS.xml",Encoding.GetEncoding(1252));
ags = sr.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-26T13:03:53.440

```
 var text = File.ReadAllText(file, Encoding.GetEncoding(codePage)); 
```

代码页列表：[https ://docs.microsoft.com/en-us/windows/win32/intl/code-page-identifiers?redirectedfrom=MSDN](https://docs.microsoft.com/en-us/windows/win32/intl/code-page-identifiers?redirectedfrom=MSDN)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-05-10T17:17:44.103

当您的文本文件使用高 ANSI 编码时，您会得到问号菱形字符——这意味着它使用 127 到 255 之间的字符。这些字符设置了第八位（即最重要的位）。当 ASP.NET 读取文本文件时，它采用 UTF-8 编码，并且最高有效位具有特殊含义。

您必须强制 ASP.NET 将文本文件解释为高 ANSI 编码，告诉它代码页是 1252：

```
String textFilePhysicalPath = System.Web.HttpContext.Current.Server.MapPath("~/textfiles/MyInputFile.txt");
String contents = File.ReadAllText(textFilePhysicalPath, System.Text.Encoding.GetEncoding(1252));
lblContents.Text = contents.Replace("\n", "<br />");  // change linebreaks to HTML 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T13:01:52.160

如果我没记错的话，无论 XML 编码如何，XmlDocument.Load(string) 方法总是假定为 UTF-8。您必须创建一个具有正确编码的 StreamReader 并将其用作参数。

```
xmlDoc.Load(new StreamReader(
                     File.Open("file.xml"), 
                     Encoding.GetEncoding("iso-8859-15"))); 
```

我刚刚偶然发现了 Microsoft 的 KB308061。有一段很有意思：在 XML 文档的 XML 声明部分指定编码声明。例如，以下声明表明文档是 UTF-16 Unicode 编码格式：

```
<?xml version="1.0" encoding="UTF-16"?> 
```

请注意，此声明仅指定 XML 文档的编码格式，并不修改或控制数据的实际编码格式。

**链接来源：**

[XmlDocument.Load() 方法无法解码 €（欧元）](https://stackoverflow.com/questions/4399105/xmldocument-load-method-fails-to-decode-euro)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-28T18:59:03.020

在我的 c++/clr (WinForms) 案例中，这种方法取得了成功：

```
String^ str2 = File::ReadAllText("MyText_cyrillic.txt",System::Text::Encoding::GetEncoding(1251)); 
textBox1->Text = str2; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-03-16T10:32:43.053

```
using (StreamWriter writer = new StreamWriter(File.Open(@"E:\Sample.txt", FileMode.Append), Encoding.GetEncoding(1250)))  ////File.Create(path)
        {
            writer.Write("Sample Text");
        } 
```

# c++ - Functor - 他们对其他没有实现 operator ( ) 的类有什么权力

> ID：12130294
> 
> 赞同：1
> 
> 时间：2012-08-26T12:55:37.843
> 
> 标签：c++, class, function, pointers, functor

我试图理解函子的“力量”。

好的，所以它们是指向函数的指针，但是它们能做什么其他没有实现的类`operator()`不能做什么？

例如 ：

```
#include <iostream>
#include <assert.h>
#include <vector>
using namespace std;

class MultiplyBy
{
    private:
        int factor;

    public:
        MultiplyBy(int x) : factor(x) {}

        int operator () (int other) const
        {
            return factor * other;
        }
};

int main()
{

    MultiplyBy temp(5);
    int myResult = temp(5);  // now myResult holds 25
    cout << myResult << endl;
    return 0;
} 
```

我们带着他的另一个朋友

```
class MultiplyOther
{
    private:
        int factor;
    public:
        MultiplyOther(int x) : factor(x) {}
        int invokeMultiplyMe(int _other)
        {
            return _other * factor;
        }
}; 
```

并做同样的事情：

```
int main()
{
    // MultiplyOther

    MultiplyOther notFunctor(4);
    int myOther = notFunctor.invokeMultiplyMe(3);
    cout << myOther << endl;
    return 0;
} 
```

我们得到：

```
25
12 
```

那么，函子的真正威力是什么？两个类都保存状态，还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T13:00:36.150

一方面，它们有一个统一的签名，可以被算法使用，例如只需要知道它们必须调用的东西。

在您的示例中，任何代码都可以使用一个实例，`MultiplyBy`该代码期望调用接受`int`并返回一个（或可从 /convertible to 构造的类型`int`）的东西。使用您的第二个示例将需要代码了解该`invokeMultiplyByMe`方法。

请注意，函子根本不是指向函数的指针，如问题中所述。它们是可以使用函数调用语法调用其实例的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T13:01:10.100

函子对类没有任何特殊属性，但它们可以用作具有更高功能的函数。函数通常不能有状态，如果有状态（通过使用静态变量），则状态在所有函数调用之间共享。\

仿函数具有类的所有属性（尤其是状态），但可以用作函数。一个很好的例子是用于 STL 算法的函子：

```
class Add
{
  public:
    Add(){sum = 0;};
    void operator()(int i)
    {
        sum += i;
    }
    int getSum(){return sum;};

    private:
    int sum;
}

int main()
{

std::vector<int> vint;
vint.push_back(2);
vint.push_back(3);
vint.push_back(4);
}

Add adder;

adder = std::for_each( vint.begin(); vint.end(), adder);

cout << adder.getSum(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T13:29:21.110

“所以它们是指向函数的指针” - 函数指针和函子完全不同。前者只是一个指向原始函数的简单指针。它不持有任何状态。然而，仿函数或函数对象拥有一个状态。Functor 是定义 operator() 的任何类。因此，该类的任何对象都可以以函数的方式调用。

来自 C++ 入门的代码片段...

```
template<class T>
class TooBig
{
    private:
    T cutoff;
    public:
    TooBig(const T & t) : cutoff(t) {}
    bool operator()(const T & v) { return v > cutoff; }
}; 
```

使用这个类，我们可以创建多个具有不同截止值的对象。太大的截止1（10）；太大的cutOff2（20）；

使用仿函数的最佳位置之一是在模板中。例如，获取列表模板。它有一个 remove_if 函数，它删除列表中从参数返回 true 的任何值。

列出清单1；// 假设它有一些值 list list2; // 假设它有一些值

现在，调用 list1.remove_if(cutoff1); // 应用 list1 的所有元素，并删除那些大于 cutOff1 中存储的值的元素。list2 的类似情况。

谢谢！

# javascript - 在 try-catch 块内的 HTML 文件中导入 JavaScript 文件

> ID：12130306
> 
> 赞同：8
> 
> 时间：2012-08-26T12:58:06.630
> 
> 标签：javascript, html, try-catch

我有一个 HTML 页面，我想在其中导入一个 JS 文件，如下所示：

```
<script src="file.js" type="text/javascript" charset="utf-8"></script> 
```

但是如果这个文件无法运行它的脚本，整个页面显然会卡住。

我可以在 try-catch 块中导入该文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T13:19:32.113

您可以侦听错误（请参阅[**this**](http://pieisgood.org/test/script-link-events/)）

```
// make a script
var s = document.createElement('script');
// set it up
s.setAttribute('src',"file.js");
s.setAttribute('type',"text/javascript");
s.setAttribute('charset',"utf-8");
s.addEventListener('error', errorfunction, false);
// add to DOM
document.head.appendChild(s); 
```

然后在`errorfunction`，找出发生了什么并尝试修复它，就像你在`catch`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-26T13:01:40.207

您可以使用[AJAX](https://en.wikipedia.org/wiki/Ajax_%28programming%29)。这假设您有[jQuery](http://jquery.com)，但您可以轻松避免使用它（[在这里](http://www.tizag.com/ajaxTutorial/)您可以找到许多教程之一）。这是一个例子：

```
$.get("http://yoursite.com/file.js", function(data) {
    try {
       eval(data); //Run the JavaScript, which is equivalent to adding it
    }
    catch (err) {
       //handle errors
    }
}); 
```

希望以任何方式有所帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-11-17T15:44:07.560

您可以尝试类似的方法或创建 JS 元素并在此元素中设置 src

```
document.write("<script src=\"file.js\" type=\"text/javascript\" charset=\"utf-8\"></script>"); 
```

# c# - c# 处理语法

> ID：12130311
> 
> 赞同：2
> 
> 时间：2012-08-26T12:58:53.287
> 
> 标签：c#, .net, dispose

我最近不得不实现 Dispose() 功能，并且遇到了 1 行方法、2 行方法和更全面的方法。

1 行方法/函数会简单地调用类似“context.Dispose”的东西，但我选择的方法是这样的：

```
 bool _disposed = false;

    public void Dispose(bool disposing)
    {
        if (!_disposed && disposing)
        {
            _context.Dispose();
        }
        _disposed = true;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    } 
```

这种语法仅仅是为了阻止 Dispose() 被多次调用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T14:28:42.587

您发布的部分内容是[Dispose Pattern](http://msdn.microsoft.com/en-us/library/b1yfkh5e%28v=vs.100%29.aspx)。正如有人指出的那样，`Dispose(false)`终结器（“析构函数”）中应该有对应的。终结器应该用于处理非托管资源。如果您没有要处理的非托管资源（即当`disposing`is时`false`您无事可做），则不需要 a `Dispose(false)`，因此也不需要终结器。这意味着这`Dispose(true)`是唯一的路径，因此您不需要`Dispose (bool)`（因此不需要实现 Dispose 模式）并且可以将它的主体移动到`Dispose`（并删除对 的检查`disposing`）并且只需实现`Dispose`. 例如：

```
public void Dispose()
{
    _context.Dispose();
} 
```

没有实现自己的终结器（析构函数）的类不会放在终结器列表中，因此无需调用`GC.SuppressFinalize`.

一般来说，如果你正在创建一个类，这就足够了。但是，有时您可以从实现此模式的类派生。在这种情况下，您应该在您的类中实现对它的支持（覆盖`Dispose(bool)`并`disposing`检查`Dispose`任何托管资源）。由于基`IDisposable`类在`virtual Dispose(bool)`它`Dispose()`的. 例如：`Dispose()``Dispose(bool)``Dispose(bool)`

```
protected override void Dispose(bool disposing)
{
    if(disposing) _context.Dispose();
    base.Dispose(disposing);
} 
```

如果您正在调用基础并且它实现了 Dispose 模式，那么您也不需要调用`GC.SuppressFinalize()`，因为它已经在执行它。

如果你愿意，你可以做所有的`disposed`事情；我发现它虽然隐藏了多重处理错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T13:02:38.070

这只是模式的一部分。这里缺少的另一部分`Dispose(false)`将由终结器调用。

`_disposed`状态标志也可以用来检查和抛出你的`ObjectDisposedExceptions`方法。

完整的模式在[这里](http://msdn.microsoft.com/en-us/library/fs2xkftw%28v=vs.80%29.aspx)

Jon Skeet[在这里](https://stackoverflow.com/questions/1579199/purpose-of-dispose-calling-disposeisdisposing-pattern-in-c)提供了很好的信息，而且 IMO 这种模式在大多数情况下都是多余的，除非您还有非托管资源。如果没有，只需`GC.SuppressFinalize`在`Dispose()`接口实现中处理您的托管资源。`_disposed`仅当您打算投掷时才使用该标志`ObjectDisposedExceptions`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T13:11:08.873

我根据类需要使用以下两种形式的 dispose：

**方法 1（对于具有托管和非托管资源或具有派生类的类）：**

```
class ClassHavingManagedAndUnManagedCode : IDiposable
    {
        private volatile bool _disposed = false;

        protected virtual void Dispose(bool disposing)
        {
            if (!_disposed)
            {
                if (disposing)
                {
                    //Do managed disposing here.
                }

                //Do unmanaged disposing here.
            }
        }

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);

            _disposed = true;
        }

        ~ClassHavingManagedAndUnManagedCode()
        {
            Dispose(false);
        }
    } 
```

**方法2（对于只有托管资源的类/密封类/没有子类的类）：**

```
 class ClassHavingOnlyManagedCode  : IDiposable
    {
        private volatile bool _disposed = false;

        public void Dispose()
        {
            if (!_disposed)
            {
                //Dispose managed objects.
                _disposed = true;
            }
        }
    } 
```

ClassHavingManagedAndUnManagedCode 的任何子类都应该遵循受保护的 dispose 方法模式，并在 Dispose 方法的末尾调用 base.Dispose。

还要保护所有公共方法（至少使用已释放成员的方法），如果类实例已被释放，则使用抛出 ObjectDisposedException 的方法 /check。

即使您没有任何非托管资源，FxCop 也会始终要求您实现 Dispose 的 ClassHavingManagedAndUnManagedCode 形式。

# php - 用脸书注册和登录

> ID：12130314
> 
> 赞同：2
> 
> 时间：2012-08-26T12:59:03.520
> 
> 标签：php, facebook, wordpress

在注册页面中，我为用户提供了填写大部分字段的选项，方法是让他使用 facebook 登录我的网站，以便我可以访问他的数据，然后他应该填写其他一些字段，然后注册到我的网站。

在登录页面上，用户可以选择使用用户名和密码登录，或者使用他们之前注册的 Facebook 帐户登录。

在登录页面上，我有以下代码：

```
if ($user){
    try {
        $loggedin= true;
        $user_profile = $facebook->api('/me','GET');

        $login_url = $facebook->getLoginUrl(
                                  array(
                                    'scope' => 'publish_stream,read_friendlists,email'
                                  )
                            );

        if(email_exists($user_profile['email'])){
            $user = get_user_by('email', $user_profile['email']);
            wp_set_auth_cookie( $user->id );
            wp_redirect( site_url() ); exit;
        }else{
            wp_redirect( site_url('/register/') ); exit;
        }

    } catch (FacebookApiException $e) {
        $login_url = $facebook->getLoginUrl(
                                  array(
                                    'scope' => 'publish_stream,read_friendlists,email'
                                  )
                            ); 
        $loggedin= false;
        error_log($e->getType());
        error_log($e->getMessage());
    }
}else{
    $login_url = $facebook->getLoginUrl(
                                  array(
                                    'scope' => 'publish_stream,read_friendlists,email'
                                  )
                            );
    $loggedin= false;
} 
```

因此，如果用户使用 facebook 登录，代码会检查他是否是会员，如果是，则他已通过身份验证并重定向到主页，如果电子邮件不存在，则应将他重定向到注册页面。

The problem is that if a user logged in with facebook in the registration page, the login page code will recognize him as a logged in user and will give him access if he's a member or redirect him if he's not a member, but what if a user would like to login with another account?

What I need to do is to terminate the access token in the login page so that he should re-login with his facebook account. Is that possible?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T13:16:30.243

Read this page [http://developers.facebook.com/docs/authentication/](http://developers.facebook.com/docs/authentication/)

> **Logging the user out of Facebook**
> 
> You can programmatically log the user out of Facebook by redirecting the user to [https://www.facebook.com/logout.php?next=YOUR_REDIRECT_URL&access_token=USER_ACCESS_TOKEN](https://www.facebook.com/logout.php?next=YOUR_REDIRECT_URL&access_token=USER_ACCESS_TOKEN)
> 
> The URL supplied in the next parameter must be a URL with the same base domain as your application as defined in your app's settings.
> 
> You can also log the user out of Facebook on the client-side using the Javascript SDK by calling `FB.logout()`.

# mysql - Cakephp 2.0 mysql查询

> ID：12130317
> 
> 赞同：0
> 
> 时间：2012-08-26T12:59:45.703
> 
> 标签：mysql, cakephp-2.0

我是 Cakephp 2.0 的新手，但我想查看两个表。我有以下表格：

带有记录的 hpsas：ciname、位置、状态
带有记录的 ldaps：ciname、状态

在我的控制器中，我有以下语法：

```
$this->Hpsa->query("SELECT `hpsas`.`ciname`, `hpsas`.`status`, `ldaps`.`ciname`, `ldaps`.`status` FROM `cmdb`.`hpsas`, `cmdb`.`ldaps` WHERE `hpsas`.`ciname` = `ldaps`.`ciname`;"); 
```

我按预期得到了以下结果：

```
'hpsas' => array(  
    (int) 0 => array(                                  
                  'hpsas' => array(  
            'ciname' => 'lsrv8001',  
            'status' => 'live'  
        ),
        'ldaps' => array(  
            'ciname' => 'lsrv8001',  
            'status' => 'indeployment'' 
```

如何使用正确的 Cakephp 2.0 语法制作模型和控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:01:50.717

不确定你已经做了什么以及你的控制器/模型是如何命名的，所以我只是放了代码示例，这可能有助于理解基本思想。

在 Hpsas 模型中定义了“多对一”关系。

```
class Hpsas extends AppModel {
    public $belongsTo = array(
        'uniqueAlias1' => array(
            'className'  => 'Ldaps',
            'foreignKey' => 'ciname'
        )
    );
/... 
```

在 Ldaps 模型中定义了“一对多”关系。

```
class Ldaps extends AppModel {
    public $hasMany = array(
        'uniqueAlias2' => array(
            'className'  => 'Hpsas',
            'foreignKey' => 'ciname'
        ),
    );
/... 
```

现在，如果`$this->Hpsas->find('all')`在 Hpsass 控制器上执行代码，您可能会得到以下结果：

```
array(
    (int) 0 => array(
        'uniqueAlias1' => array(
            //hpsas table row with value
        ),
        'uniqueAlias2' => array(
            //ldaps table row where hpsas.ciname = ldaps.ciname 
        )
    ),
        //rest hpsas table rows
) 
```

不要对我在示例中使用的别名感到困惑，您可以随意命名。当需要处理同一模型的多重关联时，它们会派上用场。可以在[文档](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)中找到更详细的解释示例。

# javascript - 直到下一个服务器请求才提供新的会话 cookie

> ID：12130319
> 
> 赞同：1
> 
> 时间：2012-08-26T12:59:50.190
> 
> 标签：javascript, ajax, codeigniter, session, cookies

大家好，我正在 Codeignitor 中开发一个应用程序。内容根据三个选择标签进行更新。第一个填充该城市的位置选择标签并同时使类别选择标签可见的城市。已成功设置了一堆 ajax 调用。内容根据 ajax 调用进行更新。现在我单击内容链接以查看内容。成功...但是当我点击浏览器的后退按钮时，我搞砸了选择标签。所以后来我意识到我需要一个会话变量，这样当用户点击浏览器的后退按钮时，我可以让他处于相同的选择标签阶段。我能够成功地存储会话让我们暂时说城市。然后我用

```
$(document).ready(function () {
            $city="<?php echo $this->session->userdata('city'); ?>";
            alert($city);
        }); 
```

检查一切是否正常。现在的问题是洛杉矶（LA）：1 伦敦：2

场景1：我选择LA然后查看加载的内容点击查看内容然后点击浏览器的返回按钮然后得到**空白**警告框。但是如果我重新加载，那么我会收到**1**的警报

方案 1 之后的方案 2：我选择 LA，然后选择 London 查看内容，然后返回，我在警报框中看到**1**。我重新加载了在 alertbox 中看到的页面**2**所以我挖掘了这个[链接](http://codeigniter.com/user_guide/libraries/sessions.html)并找到了问题的原因......看起来刷新的会话只在下一个服务器请求上提供。正如您可以看到我的问题，我想要更新的信息，以便我可以让我的用户保持与他们离开时相同的状态。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:04:12.903

这就是cookies的工作原理。与来自客户端的请求一起发送。

`$_COOKIE`一种解决方法是手动设置变量：

```
setcookie('yourcookie', 'something', time()+3600, '/', 'http://example.com', false, true);
$_COOKIE['yourcookie'] = 'something';

// yay I can now access it right away
echo $_COOKIE['yourcookie']; 
```

**更新**

现在我想我误解了你的问题。看起来您在使用浏览器的后退按钮时遇到了问题？那是对的吗？如果是这样，您将始终获得页面的先前状态，并且确实不会设置 cookie（因为它将从浏览器缓存中检索它）。我看到这将永远有效的唯一方法是通过一些脚本（即JS）刷新页面，但这会很烦人。或者通过对服务器的 AJAX 调用（新请求）检索 cookie 值。

# css - Font Awesome 字体在 IE8 上显示为框

> ID：12130323
> 
> 赞同：22
> 
> 时间：2012-08-26T13:00:19.270
> 
> 标签：css, internet-explorer, webfonts, font-awesome

所以我在一个项目中使用[Font Awesome](http://fortawesome.github.com/Font-Awesome/)，在测试中我遇到了 IE8 的问题。

在 Windows IE9 上，Chrome 和 Firefox 正确显示字体（OS X 上的 Firefox、Chrome 和 Safari 也是如此），但 Windows 上的 IE8 有一个问题，我得到一个框来代替字体。

![在此处输入图像描述](../Images/7e908aa8f0ad0054e52396f87bc96cbf.png)

我的代码是：

```
<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->

<head>
    <meta charset="utf-8" />
    <title>Site title</title>

    <!--[if lt IE 9]>
        <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href=".../css/css.css" rel="stylesheet" type="text/css">
    <link href="../css/print.css" rel="stylesheet" type="text/css" media="print">

    <link href="../apple-touch-icon.png" rel="apple-touch-icon-precomposed">
    <link href="../css/jquery-ui-1.8.23.custom.css" rel="stylesheet" type="text/css">
    <link href="../css/jquery-ui-overrider.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato|Michroma&subset=latin&v2" rel="stylesheet" type="text/css">
    <link href="../css/prettify.css" rel="stylesheet" type="text/css">
    <link href="../css/font-awesome.css" rel="stylesheet" type="text/css">
    <!--[if IE 7]>
        <link href="../css/font-awesome-ie7.css" rel="stylesheet">
    <![endif]--> 
```

我有四个字体文件...

*   fontawesome-webfont.eot
*   fontawesome-webfont.svg
*   fontawesome-webfont.ttf
*   fontawesome-webfont.woff

...它们所属的地方，它们可以被世界读取（755 权限）。我错过了什么？我必须对 IE8 中的兼容性视图做些什么吗？

同一台计算机可以很好地查看 Font Awesome 网站上的字体，所以一定是我做错了。

根据要求，font-awesome.css 的副本在这里：[font-awesome.css](http://reljac.com/so_1/font-awesome.css)。除了字体文件的路径之外，它或多或少是我从他们那里下载的。

基于@Abody97，我将[https://html5shim.googlecode.com/svn/trunk/html5.js](https://html5shim.googlecode.com/svn/trunk/html5.js)添加到组合中（上面的代码已更新）。即使在刷新和删除缓存刷新之后仍然没有运气。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T14:53:45.037

我遇到了同样的问题并找到了解决方案，我会在这里发布以防有人仍然需要它。

问题是 IE 无法加载字体文件，它正在构建返回 404 错误的奇怪 GET 请求。

使用这里找到的技巧：[http](http://www.fontspring.com/blog/fixing-ie9-font-face-problems) ://www.fontspring.com/blog/fixing-ie9-font-face-problems我能够解决这个问题。

添加`?#iefix`到包含 font-face 的 CSS 中的 eot url（在这种情况下`font-awesome.css`）

```
@font-face {
font-family: 'MyWebFont';
src: url('webfont.eot'); /* IE9 Compat Modes */
src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
     url('webfont.woff') format('woff'), /* Modern Browsers */
     url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
     url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-08-08T21:29:50.683

这似乎是一个非常普遍的问题，根据这个[讨论](https://github.com/FortAwesome/Font-Awesome/issues/2324#issuecomment-42333148)，与使用 :before 附加的字符有关。实际上，我发现让它在 IE 8 中工作的最简单方法是不使用 fa- *name*类并手动插入字符。

例如，而不是：

```
<i class="fa fa-user fa-lg"></i> 
```

利用：

```
<i class="fa fa-lg">&#xf007;</i> 
```

字符代码可以在[Font Awesome Cheatsheet](http://fortawesome.github.io/Font-Awesome/cheatsheet/)上找到。无论什么 IE 版本，这似乎一直有效。

希望这可以帮助某人，

杰森

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-26T13:42:23.827

`head`尝试在包含 CSS 之前将其添加到您的：

```
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-20T10:50:55.180

just had the same problem and solved it by setting the IE8 "security level" to something below "High".

In general, I could reproduce the "boxes" by making the font files (eot, woff, ttf...) "not available" (e.g. resulting in a 404 response) - so I assume, on securiy level "High" they're just not loaded...

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-18T11:50:59.890

事实证明，`<html>`包含文件生成了一个额外的标签，这是我的问题的根源。所以，在我的最终文件中，我有两个`<html lang="en">`AND`<html>`额外的`<html>`标签将 IE 扔进怪癖模式，这导致了我遇到的字体真棒图标问题。

消除该流氓`<html>`并验证我的标题设置正确为我修复了所有问题。

我现在在所有页面上使用一组样板的标题标签：

```
<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>    
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta charset="utf-8" /> 
```

在我有一页上之前：

```
<!DOCTYPE html>
<html lang="en">
<html>  <!-- This tag was causing the problem, removing it solved things for me -->
<head>    
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta charset="utf-8" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-22T23:27:20.410

将响应标头中的缓存控件设置为字体文件的私有，在 IE8 中对我来说效果很好。可以在这里找到更多解释 - 他解释了他如何解决 PDF 文件（[Can't display PDF from HTTPS in IE 8 (on 64-bit Vista)](https://stackoverflow.com/questions/1038707/cant-display-pdf-from-https-in-ie-8-on-64-bit-vista)）。

希望这可以帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-30T08:04:59.453

IE 9 版本以下不支持[woff](http://wikipedia.org/wiki/Web_Open_Font_Format)文件格式。可能这就是为什么您无法在 IE8 上获取它们的答案

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-24T21:51:11.660

在 IIS（MVC 环境）下，我必须将以下规则添加到我的 Web.config：

```
 <system.web>
    <httpHandlers>
      <add verb="GET" path="*.eot" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.svg" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.ttf" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.woff" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.otf" type="System.Web.StaticFileHandler" />
    </httpHandlers>
  </system.web> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-05-15T15:00:36.687

唯一对我有用的是：

[https://github.com/FortAwesome/Font-Awesome/issues/2324](https://github.com/FortAwesome/Font-Awesome/issues/2324)

结合杰森的另一个答案：例如，而不是：

```
<i class="fa fa-user fa-lg"></i> 
```

利用：

```
<i class="fa fa-lg">&#xf007;</i> 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2014-12-05T00:09:18.737

不只是IE，所有浏览器都有同样的问题。

有趣的是，您需要将文件放在正确的位置。

这意味着您需要以下结构：

```
folder levels look like this:

    level 1                 level 2  level 3

----index.html 

----font-awesome-4.2.0  ----css ---- fontawesome.css

                        ----css ---- fontawesome.min.css 

                        ----fonts----... 

                                 ----... 

                        ----... 
```

然后将链接 sylte 放在 index.html 中

`<link rel="stylesheet" href="./font-awesome.min.css">`在头之间

一个非常重要的注意事项是：**不要尝试组合 fontawesome 文件夹和任何其他文件夹。将它们分开。**

现在测试它，一切都很好。

# magento - Magento 为产品添加运输自定义选项

> ID：12130324
> 
> 赞同：1
> 
> 时间：2012-08-26T13:00:26.823
> 
> 标签：magento, size

我使用自定义选项为 Magento 产品添加了 3 个尺寸

`4x5'4 , 5'4x7'8 ,7'8x 10`

我想要不同尺寸的不同运费？

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:00:30.127

谢谢格拉

我能够解决这个问题

我已添加此功能 \app\code\core\Mage\Shipping\Model\Carrier\Flatrate.php 以获得选项

```
 function getProductOptions(&$item){  $options = array();  if ($optionIds = $item->getOptionByCode('option_ids')) {      $options = array();      foreach (explode(',', $optionIds->getValue()) as $optionId) {          if ($option = $item->getProduct()->getOptionById($optionId)) {
          $quoteItemOption = $item->getOptionByCode('option_' . $option->getId());

          $group = $option->groupFactory($option->getType())
              ->setOption($option)
              ->setQuoteItemOption($quoteItemOption);

          $options[] = array(
              'label' => $option->getTitle(),
              'value' => $group->getFormattedOptionValue($quoteItemOption->getValue()),
              'print_value' => $group->getPrintableOptionValue($quoteItemOption->getValue()),
              'option_id' => $option->getId(),
              'option_type' => $option->getType(),
              'custom_view' => $group->isCustomizedView()
          );
      }
  }  } if ($addOptions = $item->getOptionByCode('additional_options')) {
  $options = array_merge($options, unserialize($addOptions->getValue()));  } return $options;} 
```

然后我为大小制作一个数组

```
foreach ($request->getAllItems() as $item) {
            $option =  $this->getProductOptions($item);
                foreach($option as $opt){
                    if($opt['value']=="5'4&quot; x 7'8&quot;"){
                        $shipExtra[] = '10.99';
                    }
                    else if($opt['value']=="7'8&quot; x 10'9&quot;"){
                        $shipExtra[] = '10.99';
                    }

                } 
```

最后我有

```
 $shipExtra = array_sum($shipExtra);
if($shipExtra!=""){
    $shippingPrice += $shipExtra;} 
```

这对我行得通 ：）

感谢您指导我正确的文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:32:48.687

您可以做一个扩展 Mage_Shipping_Model_Carrier_Abstract 的模型，并覆盖 colectRates() 方法，以检查这个产品是否返回这个，如果那个返回那个。在此处查看更多信息：http: [//www.magentocommerce.com/wiki/5__-_modules_and_development/shipping/create-shipping-method-module](http://www.magentocommerce.com/wiki/5_-_modules_and_development/shipping/create-shipping-method-module)。

或者只是更改 magento 核心 Mage 运输模型载体来做到这一点。提示如下：您应该使用 \app\code\core\Mage\Shipping\Model\Carrier\Flatrate.php，然后转到 collectRates 函数，在将 ShippingPrice 放入方法之前尝试类似的操作：

```
 foreach ($request->getAllItems() as $item) {

            if ($item->getProduct()->getData('size') == "4x5'4"){
                $shippingPrice += 1.00;  
            }elseif()....
        } 
```

# c++ - std::wostream_iterator

> ID：12130327
> 
> 赞同：5
> 
> 时间：2012-08-26T13:00:37.630
> 
> 标签：c++, iterator, wofstream

为什么 C++ 中没有 std::wostream_iterator？

这有什么好的理由吗？

```
#include <fstream>
#include <iterator>
#include <string>
#include <vector>

int main()
{
    std::vector<std::wstring> myvec = { L"first", L"second" };

    std::wofstream f("New.txt");
//  std::copy(myvec.begin(), myvec.end(), std::wostream_iterator<std::wstring>(f)); // Error
//  std::copy(myvec.begin(), myvec.end(), std::ostream_iterator<std::wstring>(f)); // Error
    std::copy(myvec.begin(), myvec.end(), std::ostream_iterator<std::wstring, wchar_t>(f)); // Ok
    std::copy(myvec.begin(), myvec.end(), std::ostream_iterator<std::wstring, wchar_t, std::char_traits<wchar_t>>(f)); // Ok
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T13:15:10.993

因为`std::ostream_iterator`is 不是`typedef`（并且`std::wstring`是 typedef on `std::basic_string`with `charT`= `wchar_t`）。

```
template <class T, class charT = char, class traits = char_traits<charT> >
class ostream_iterator:
public iterator<output_iterator_tag, void, void, void, void> 
```

第二次复制操作

```
std::copy(myvec.begin(), myvec.end(), std::ostream_iterator<std::wstring>(f)); 
```

是不正确的，因为

```
typedef basic_ostream<charT,traits> ostream_type; 
```

所以，在这种情况下`ostream_type`是`basic_ostream<char, std::char_traits<char> >`

```
ostream_iterator(ostream_type& s); 
```

构造函数只能接收这种类型，但是我们通过`basic_ofstream<wchar_t, std::char_traits<wchar_t> >`，是不正确的。

# c - MPI_Scatter() 错误

> ID：12130329
> 
> 赞同：1
> 
> 时间：2012-08-26T13:01:08.757
> 
> 标签：c, mpi, openmpi

我有这个串行代码，我正在尝试使用 MPI 将其转换为并行代码。但是，我似乎无法在`MPI_Scatter()`不崩溃的情况下使该功能正常工作。该函数循环调用一个数组`cells`并修改一些值。

以下是原始序列号：

```
int accelerate_flow(const t_param params, t_speed* cells, int* obstacles)
{
  register int ii,jj;     /* generic counters */
  register float w1,w2;  /* weighting factors */
  /* compute weighting factors */
  w1 = params.density * params.accel * oneover9;
  w2 = params.density * params.accel * oneover36;

  int i;

  /* modify the first column of the grid */
  jj=0;

  for(ii=0;ii<params.ny;ii++)
  {

      if( !obstacles[ii*params.nx] && (cells[ii*params.nx].speeds[3] > w1 &&
          cells[ii*params.nx].speeds[6] > w2 && cells[ii*params.nx].speeds[7] > w2))  
      {
          /* increase 'east-side' densities */
          cells[ii*params.nx].speeds[1] += w1;
          cells[ii*params.nx].speeds[5] += w2;
          cells[ii*params.nx].speeds[8] += w2;
         /* decrease 'west-side' densities */
         cells[ii*params.nx].speeds[3] -= w1;
         cells[ii*params.nx].speeds[6] -= w2;
         cells[ii*params.nx].speeds[7] -= w2;
      }
  }

return EXIT_SUCCESS;

} 
```

这是我使用 MPI 的尝试：

```
int accelerate_flow(const t_param params, t_speed* cells, int* obstacles, int myrank, int ntasks)
{
    register int ii,jj = 0;;     /* generic counters */
    register float w1,w2;  /* weighting factors */
    int recvSize;
    int cellsSendTag = 123, cellsRecvTag = 321;
    int size = params.ny / ntasks, i;
    MPI_Request* cellsSend, *cellsRecieve;
    MPI_Status *status;

    /* compute weighting factors */
    w1 = params.density * params.accel * oneover9;
    w2 = params.density * params.accel * oneover36;

    t_speed* recvCells = (t_speed*)malloc(size*sizeof(t_speed)*params.nx);

    MPI_Scatter(cells, sizeof(t_speed)*params.nx*params.ny, MPI_BYTE, recvCells, 
      size*sizeof(t_speed)*params.nx, MPI_BYTE, 0, MPI_COMM_WORLD);

    for(ii= 0;ii < size;ii++)
    {
        if( !obstacles[ii*params.nx] && (recvCells[ii*params.nx].speeds[3] > w1 &&
             recvCells[ii*params.nx].speeds[6] > w2 && recvCells[ii*params.nx].speeds[7] > w2))
        {

           /* increase 'east-side' densities */
           recvCells[ii*params.nx].speeds[1] += w1;
           recvCells[ii*params.nx].speeds[5] += w2;
           recvCells[ii*params.nx].speeds[8] += w2;
           /* decrease 'west-side' densities */
           recvCells[ii*params.nx].speeds[3] -= w1;
           recvCells[ii*params.nx].speeds[6] -= w2;
           recvCells[ii*params.nx].speeds[7] -= w2;
        }
   }

MPI_Gather(recvCells, size*sizeof(t_speed)*params.nx, MPI_BYTE, cells, params.ny*sizeof(t_speed)*params.nx, MPI_BYTE, 0, MPI_COMM_WORLD);

 return EXIT_SUCCESS;

} 
```

这是`t_speed`结构：

```
typedef struct {
float speeds[NSPEEDS];
} t_speed; 
```

`params.nx = 300`,`params.ny = 200`

非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T14:01:38.743

第一个 count 参数`MPI_Scatter`是要发送到*每个进程*的元素数，而不是总数。这里，发送计数和接收计数相同，为 nx*ny/ntasks；所以你会有类似的东西

```
int count=params.nx*params.ny/ntasks;

MPI_Scatter(cells,    sizeof(t_speed)*count, MPI_BYTE, 
            recvCells,sizeof(t_speed)*count, MPI_BYTE, 0, MPI_COMM_WORLD); 
```

请注意，这仅在 ntasks 均分 nx*ny 时才有效，否则您必须使用`Scatterv`.

# permissions - 图片上传网站的正确文件权限是什么？

> ID：12130331
> 
> 赞同：1
> 
> 时间：2012-08-26T13:01:11.053
> 
> 标签：permissions

对存储图像的文件夹授予 777 权限会很危险吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:08:51.390

我会将它们存储在 img 文件夹中，不给 777，而是给 664 权限。

[查看 wiki 以获取有关 chmod 的更多详细信息](http://en.wikipedia.org/wiki/Chmod)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:03:58.060

是的，您应该将图像存储在文档根目录 (htdocs) 之外。

# java - JButton、JCheckBox 和类似的交互器在视觉上不会改变

> ID：12130335
> 
> 赞同：3
> 
> 时间：2012-08-26T13:01:49.783
> 
> 标签：java, swing, jbutton, jcheckbox, jslider

这是一个简单的图形程序，它在屏幕上添加了一些星星。

```
import acm.graphics.*;
import acm.program.*;
import java.awt.event.*;
import javax.swing.*;

/**
 * This program creates a five-pointed star every time the
 * user clicks the mouse on the canvas.
 */

public class DrawStarMap1 extends GraphicsProgram {

    public void init() {
        /* Initializes the mouse listeners */
        addMouseListeners();

        /* The check box starts out in the "on" position */
        fillCheckBox = new JCheckBox("Filled");
        fillCheckBox.setSelected(true);
        add(fillCheckBox, SOUTH);

        /* Clears the screen with a button */
        add(new JButton("Clear"), SOUTH);
        addActionListeners();   
    }

    /* Called whenever the user clicks the mouse.*/
    public void mouseClicked(MouseEvent e) {
        GStar star = new GStar(STAR_SIZE);
        star.setFilled(fillCheckBox.isSelected());
        add (star, e.getX(), e.getY());
    }

    /* Removes all the graphical objects from the canvas */
    public void actionPerformed(ActionEvent e){
        if(e.getActionCommand().equals("Clear")) removeAll();
    }

    /* Private constants */
    private static final double STAR_SIZE = 20;

    private JCheckBox fillCheckBox;
} 
```

和 GStar 类：

```
import acm.graphics.*;

/** Defines a new GObject class t:hat appears as a five-pointed star.
*/
public class GStar extends GPolygon {

     /** Creates a new GStar centered at the origin with the specified
     * horizontal width.
     * @param width The width of the star
     */
 public GStar(double width) {
    double dx = width / 2;
    double dy = dx * GMath.tanDegrees(18);
    double edge = width / 2 - dy * GMath.tanDegrees(36);
    addVertex(-dx, -dy);
    int angle = 0;
    for (int i = 0; i < 5; i++) {
        addPolarEdge(edge, angle);
        addPolarEdge(edge, angle + 72);
        angle -= 72;
    }
}
} 
```

该程序运行良好，每当用户在画布上单击鼠标时，它都会使用 GStar 类构造函数来创建星形。但是，有一个问题：“JCheckBox 和 JButton 在视觉上永远不会改变！”。当我按下“清除”JButton 时，画布变为空，但按钮似乎没有切换。同样，该程序同时绘制填充和空星，但“填充”JCheckBox 始终保持选中状态，它不会改变。我在其他程序中使用的 JSlider 问题变得更大。滑块始终保持在初始位置，即使它在某种意义上起作用：它的值发生了变化。我使用 Eclipse，2011 版本和最新的 JRE 库（v.7u6 [http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1637588.html](http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1637588.html)）。我没有在互联网上找到足够的信息。问题是什么？感谢您的帮助！！acm 包可以从这里下载[http://jtf.acm.org/acm.jar](http://jtf.acm.org/acm.jar)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T14:16:06.257

[*ACM Java Task Force*](http://jtf.acm.org/index.html)框架旨在“向一年级计算机专业的学生教授 Java，而不会让这些学生被其复杂性所淹没”。为了实现这一点，它以一种~~排除~~干扰正常交互的方式拦截*所有鼠标和键盘事件。*请注意，其他示例表现出相同的行为。此[示例](https://stackoverflow.com/a/5854752/230513)是使用 Swing API 的替代方法。~~`JApplet`~~

 ~~附录：在 Java 1.5 下编译似乎恢复了预期的功能。

![在此处输入图像描述](../Images/538184ab3db95e5ecd1c519b1597d2a8.png)

```
import acm.graphics.GMath;
import acm.graphics.GPolygon;
import acm.program.*;
import java.awt.event.*;
import javax.swing.*;

/**
* This program creates a five-pointed star every time the user clicks the mouse
* on the canvas.
*/
public class DrawStarMap extends GraphicsProgram {

    public void init() {
        addMouseListeners();
        add(new JButton("ClearN"), NORTH);
        add(new JButton("ClearW"), WEST);
        add(new JButton("ClearE"), EAST);
        add(new JButton("ClearS"), SOUTH);
        addActionListeners();
    }

    /*
    * Called whenever the user clicks the mouse.
    */
    public void mouseClicked(MouseEvent e) {
        GStar star = new GStar(STAR_SIZE);
        star.setFilled(true);
        add(star, e.getX(), e.getY());
    }

    /*
    * Removes all the graphical objects from the canvas
    */
    public void actionPerformed(ActionEvent e) {
        System.out.println(e.getActionCommand());
        if (e.getActionCommand().startsWith("Clear")) {
            removeAll();
        }
    }

    /*
    * Private constants
    */
    private static final double STAR_SIZE = 20;

    private static class GStar extends GPolygon {
        ...  
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T16:16:52.757

我正在弄清楚....

```
add(fillCheckBox, NORTH); // SOUTH to NORTH
add(new JButton("Clear"), NORTH); // SOUTH to NORTH 
```

为什么将**位置**从切换`SOUTH`到`NORTH`效果很好..

**更新：**
以及`EAST`约束不能正常工作。
可能存在一些错误`SOUTH`和`EAST`限制。

**输出 ：**![](../Images/dbd0256c74b1f19e242463dc0a5c81a6.png)~~

# php - 从电子邮件到用户的具有相同值的 php mysql foarch

> ID：12130341
> 
> 赞同：0
> 
> 时间：2012-08-26T13:02:59.237
> 
> 标签：php, mysql, foreach

我的mysql数据库上有这个

```
email have 5 value
user have 15 value 
```

我怎么能用这样的东西循环电子邮件

```
email          user
ya1@yahoo.com  user1
ya2@yahoo.com  user2
ya3@yahoo.com  user3
ya4@yahoo.com  user4
ya5@yahoo.com  user5
ya1@yahoo.com  user6
ya2@yahoo.com  user7
ya3@yahoo.com  user8
--------------------
and so on.... 
```

使用 php foreach ......就像当用户循环时，电子邮件值也会循环，当它到达电子邮件值的末尾时，电子邮件将再次开始到第一个 ya1@yahoo.com

是否有可能在 foreach 上进行这项工作或暂时进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:12:06.767

```
$data = array();
$i=0;
foreach($users as $user){
if(isset($email[$i])){
$data[$email[$i]] = $user;
}
else{
$i=0;
$data[$email[$i]] = $user;

}
$i++;
}
print_r($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:12:24.167

像这样的东西：

```
$j=0;
for ($i=0;$i<count($users);$i++){
    if (count($email)<$j+1)
        $j=0;
    else
        $j++;
echo $users[$i].' has email: '.$email[$j];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T13:27:34.573

```
$e = array('email1', 'email2' /* , more email */);
$u = array('user1', 'user2', 'user3' /* , more users */);

$total_e = count($e);
$total_u = count($u);
$total   = $total_e * $total_u;

$counting_e  = 0;
$counting_u  = 0;

for ($i = 0; $i < $total; $i ++ )
{
    echo nl2br($e[$counting_e ++] . " => " . $u[$counting_u ++] . "\n");

    if ($counting_e == $total_e)
        $counting_e = 0;
    if ($counting_u == $total_u)
        $counting_u = 0;
} 
```

测试：[http ://codepad.org/R5PpAKQW](http://codepad.org/R5PpAKQW)

# java - 关于不透明度的计算

> ID：12130348
> 
> 赞同：0
> 
> 时间：2012-08-26T13:04:03.017
> 
> 标签：java

嗨，伙计们，我有一个数学问题

我有以下循环：

```
for(int i = 10; i < 150; i = i + 5)
{
    imageView.setBounds(
        ini.getMonsterX(monsterName) -i/2,
        ini.getMonsterY(monsterName) -i/2, 
        i, 
        i);
    imageView.repaint();
    imageView.setVisible(true);
    Log.e(TAG, "setSize = "+i );
    r.delay(10);
} 
```

如果 i = 10，则不透明度应为 1.0f，如果 i = 150，则不透明度应为 0.0f

我如何计算两者之间的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T13:06:48.857

这是基本的[线性插值](http://en.wikipedia.org/wiki/Linear_interpolation#Linear_interpolation_between_two_known_points)：

```
opacity = (150f - i) / (150f - 10f) 
```

# node.js - 如何使用全局安装的 grunt-html？

> ID：12130349
> 
> 赞同：9
> 
> 时间：2012-08-26T13:04:02.173
> 
> 标签：node.js, npm, gruntjs

我想使用`grunt-html`任务来检查我的 HTML 文件。

*我在本地*安装任务并按如下方式`npm install grunt-html`使用它：`grunt.js`

```
module.exports = 功能（咕噜声）{

    grunt.loadNpmTasks('grunt-html');

    grunt.initConfig({

        htmllint:{
            全部：['*.html']
        },

    });

};
```

现在我想*全局*`grunt-html`安装任务。

 *不幸的是，在删除本地`grunt-html`节点模块并*全局* `grunt`安装后，无法加载任务。跑步时`grunt htmllint`我得到：

```
>> 未找到本地 Npm 模块“grunt-html”。安装了吗？
```

如果我`grunt.loadNpmTasks('grunt-html');`从`grunt.js`文件中删除，我会得到：

```
找不到任务“htmllint”。使用 --force 继续。
```

所以我的问题是如何使用`grunt-html`已安装的*全局*？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T23:08:37.340

gruntjs doesn't currently support loading globally-installed grunt modules from `loadNpmTasks`, per the documentation of [`grunt.loadNpmTasks`](http://gruntjs.com/api/grunt.task#grunt.task.loadnpmtasks):

> This plugin must be installed locally via npm, and must be relative to the grunt.js gruntfile.

Of course, if you really insist on installing it globally, a hack would be to create a symlink (`ln -s`) from your local `node_modules` directory to your global `node_modules/grunt-html` directory.

If you're doing module development, another alternative would be to use the under-appreciated `npm link` command that lets you locally install a module that exists elsewhere on you system (see `npm help link` for usage information).

Both of these approaches, though, don't allow you to truly install the `grunt-html` package globally.*

# c# - 编写 C# 和 CIM 应用程序

> ID：12130350
> 
> 赞同：3
> 
> 时间：2012-08-26T13:04:06.333
> 
> 标签：c#, authorize.net-cim

我知道这不是直接的编程，并争论了几天。我对编写一个实用程序来与网络交换机通信并通过 CIM 收集统计数据很感兴趣。经过几天的搜索，我找不到任何像样的例子来帮助入门。我确实从 Microsoft 找到了一个项目，但它查询运行 Windows 的机器并需要 Windows 8。我有 Windows 7。此外，我见过的几个示例使用 WMI，我认为它是用于与其他 Windows 系统通信。

有人对示例或其他阅读有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T03:21:07.003

我找到了一个我认为可行的项目。如果其他人有兴趣，请查看 wbem-sharp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:33:46.667

我不确定 wbem-sharp 目前有多活跃……

作为替代方案，您可以使用[SFCC 客户端](http://sourceforge.net/apps/mediawiki/sblim/index.php?title=Sfcc)，并将其 C-Language 客户端 API 集成到 C# 中。SFCC 维护良好，支持当前的 CIM/WBEM 标准。

# apache - 使用 htaccess 保护底层目录

> ID：12130355
> 
> 赞同：1
> 
> 时间：2012-08-26T13:05:25.693
> 
> 标签：apache, .htaccess

我为别人创建了一个axtra ftp帐户，所以他可以上传文件。（比赛结果，大约20/30的htm文件和图像）我也很偏执，所以万一他上传“可能危险”的文件，我不会希望这些文件可以通过 http 请求访问。在 PHP 的帮助下，我想获取这些文件的内容。（我预计不会有麻烦）

问题：我的主机不允许额外的 ftp 帐户访问 public_html 之外。所以我认为 htacces 应该解决我的问题。只是通过拒绝所有规则。但是通过 ftp 访问，这个 htaccess 文件可以被删除或更改。

因此，我尝试在站点根目录的主 htacces 文件中添加以下代码：

```
<Directory "/home/xxxx.nl/public_html/xxxxxxxx.nl/onzetoernooien/swissmaster_ftp">
deny from all
</Directory> 
```

我的网站因内部服务器错误而挂起。我无权访问 httpd 文件。

我的想法是在这个目录上方使用一个 htacces 文件。如果绝对路径不正确，我可以使用某种通配符，例如 *swissmaster？

我在 Apache 网站上进行了搜索，但我迷失在大量信息中。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:45:04.293

不幸的是，您不能使用`<Directory>`.htaccess 中的部分，只能在服务器配置文件中使用。这会导致服务器错误（检查您的错误日志，您会看到错误消息）。我们不能使用`<Filesmatch "subdir/.*$">`either 来保护子目录，因为 FilesMatch 只检查所请求 URI 的文件名部分。

但是，您可以按照以下方式使用 mod_rewrite：

```
RewriteEngine on

RewriteRule ^subdir.*$ - [NC,F] 
```

If the requested URI matches the regex pattern `subdir.*` (so "subdir" followed by anything else; you may need to tweak the pattern, as it happily catches subdir_new/something.txt too -- I'm sure you get the idea), then mod_rewrite's [F flag](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_f) will return a 403 Forbidden status (the NC stands for No-Case, making the pattern case-insensitive).

# java - java mongo 数组列表保存

> ID：12130356
> 
> 赞同：2
> 
> 时间：2012-08-26T13:05:28.767
> 
> 标签：java, mongodb, arraylist, save

我们正在使用 Java 服务器和 Mongo DB [纯 Java-Mongo 而不是 Morphia 或用于 CRUD 的一些此类工具]。
我们有一个 Image Pojo 类及其相关的元数据，如下所示，

```
public class Img{
    private String name;
    private List<Metadata> imgMetaList = new ArrayList<Metadata>();

    //Getters, setters etc...
    public List<Metadata> getImgMetaList() {        
        return imgMetaList;
    }
} 
```

元数据类有一些数据，实现 Serializable 不起作用，所以
我扩展了 ReflectionDBObject，

```
public class Metadata extends ReflectionDBObject{
    private String tag;
    private String val;

    //Getters, setters etc...      
} 
```

我想将 Img 保存到 Mongo 中。我使用了以下代码并且它有效。

```
BasicDBObject updateQuery = new BasicDBObject();
updateQuery.put("name", img.getName());
BasicDBObject updMetadata = new BasicDBObject();
updMetadata.put("$push", new BasicDBObject("imgMetaList",img.getImgMetaList()) );
collection.update(updateQuery,updMetadata, true, false); 
```

这会在 Mongo 中插入一个文档，如下所示，

```
{
    "_id" : ObjectId("503a1991db2e9f431cf0d162"),
    "name" : "test.jpg",
    "imgMetaList" : [
        [
            {
                    "Tag" : "tag1",
                    "Val" : "val1",
                    "_id" : null
            }
        ]
    ]
} 
```

这里有 2 个问题，
1\. 代码插入两个方括号而不是一个来容纳数组
2\. 为什么没有为列表生成 _id。

请告诉我。
问候， 维什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:38:03.510

$push 将一个值附加到一个数组。如果该数组尚不存在，则创建一个新数组。您要推送的项目是一个数组，因此您最终会在数组中得到一个数组。

没有为集合生成 _id，因为这是 MongoDB 的正常行为。当您将子文档放入文档时，子文档不会获得_id。因此该数组没有_id。

相反，您可能会问为什么数组内的元数据文档有一个空 _id。这是 ReflectionDBObject 类的一种行为：它包含一个 _id 字段，但您可以设置它的值。您可以通过在 ReflectionDBObject 实例上调用 set_id() 将此 _id 设置为非空值。执行此操作的好地方可能是在您的 Metadata 类的构造函数中。要生成 _id，请使用 ObjectId.get() 静态方法 (org.bson.types.ObjectId)。

您在 MongoDB 中插入图像的代码比它需要的要复杂得多。以下将起作用（并将摆脱嵌套数组）：

```
BasicDBObject imageDoc = new BasicDBObject();
imageDoc("name", img.getName());
imageDoc("imgMetaList", img.getImgMetaList());
collection.insert(imageDoc); 
```

# android - Android：如何访问网页并向其发送参数

> ID：12130360
> 
> 赞同：0
> 
> 时间：2012-08-26T13:05:39.680
> 
> 标签：android, asp.net-webpages

我正在开发一个 android 应用程序，我需要访问在 asp.net 中作为网页完成的服务器端

以下是网页网址：

```
theWebPageURL?action=methodName&email=theEmail 
```

我不知道我应该使用什么方法来访问此 URL 并将电子邮件参数发送给它并获得响应。

我搜索了很多，没有一个工作

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:09:40.753

你需要使用http get请求 [HttpGet](http://developer.android.com/reference/org/apache/http/client/methods/HttpGet.html)

并将这一行添加到您的清单文件中

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

另外，请检查此[链接](http://www.youtube.com/watch?v=qLSjn6pzTr0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T13:18:36.900

我建议查看这两个类似的问题：

[使用 android 发出 HTTP 请求](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)

[如何在 Android 中向 HTTP GET 请求添加参数？](https://stackoverflow.com/questions/2959316/how-to-add-parameters-to-a-http-get-request-in-android)

* * *

**更新**

下面的代码是我根据上面两个链接中的答案汇总的工作示例；如果这对您有帮助，请务必感谢他们。

为了演示，这个示例中的 uri 被构建到[http://www.google.com/search?q=android](http://www.google.com/search?q=android)中。

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Construct the URI
        String uri = "http://www.google.com/search?";       
        List<NameValuePair> params = new LinkedList<NameValuePair>();       
        params.add(new BasicNameValuePair("q", "android"));             
        uri += URLEncodedUtils.format(params, "utf-8");

        // Run the HTTP request asynchronously
        new RequestTask().execute(uri);    
    }

    class RequestTask extends AsyncTask<String, String, String>{

        @Override
        protected String doInBackground(String... uri) {
            HttpClient httpclient = new DefaultHttpClient();
            HttpResponse response;
            String responseString = null;
            try {
                response = httpclient.execute(new HttpGet(uri[0]));
                StatusLine statusLine = response.getStatusLine();
                if(statusLine.getStatusCode() == HttpStatus.SC_OK){
                    ByteArrayOutputStream out = new ByteArrayOutputStream();
                    response.getEntity().writeTo(out);
                    out.close();
                    responseString = out.toString();
                } else{
                    //Closes the connection.
                    response.getEntity().getContent().close();
                    throw new IOException(statusLine.getReasonPhrase());
                }
            } catch (ClientProtocolException e) {
                //TODO Handle problems..
            } catch (IOException e) {
                //TODO Handle problems..
            }
            return responseString;
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);                
            // result contains the response string.    
        }
    }
} 
```

而且，当然，不要忘记将其添加到您的清单中：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# visual-studio-2010 - Visual Studio 设计视图为空白

> ID：12130363
> 
> 赞同：1
> 
> 时间：2012-08-26T13:06:30.073
> 
> 标签：visual-studio-2010

我已经使用 Visual Studio 5 年了。我从未使用过设计视图。我刚刚开始一个新的爱好网站，发现自己使用 default.htm 而不是 .aspx，因为只有 html。

我想，为了一笑，我会使用设计视图——因为它更直观地键入我们的文本，而不是在源视图中无休止地使用所有标签来破坏你的创意。

但是，当我单击设计视图时，屏幕是空白的。底部有标签 - html、body、topdiv、divcontainer 等 - 但我点击什么都没关系，屏幕是空的。

点击源，我所有精心制作的文字都在那里，点击设计，什么都没有。

所以，我很厚 - 是否有一些技巧可以让设计视图实际显示一些东西？

# android - Eclipse 导出签名 apk 在 mac osx 10.5.8 中失败

> ID：12130364
> 
> 赞同：1
> 
> 时间：2012-08-26T13:06:48.233
> 
> 标签：android, eclipse, macos, apk

我正在使用 MacOSX-10.5.8。我已经安装了最新版本的 android sdk.ADT 20.3 版。

在导出已签名的 apk 时，我遇到了以下错误。我正在使用 64 位日食。

```
Error while running zipalign: dyld:unknown required load command 0x80000022 
```

我已经浏览了一些链接并尝试了以下命令，但它失败了。

> Static-112:~ dsr$ gcc-4.2 -mmacosx-version-min=10.5 isysroot /Developer/SDKs/MacOSX10.5.sdk/ i686-apple-darwin9-gcc-4.2.1: isysroot: 没有这样的文件或目录

我尝试了很多方法，但无法解决这个问题。

请提出解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:31:09.320

我遇到了同样的问题。似乎 zipalign 工具在 10.5.8 上已损坏。幸运的是，我有一个旧版本的 sdk，我复制了它的 zipalign，它现在可以工作了。最新的 zipalign 在 10.6.8 上也可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:14:17.980

跟踪/BPT 陷阱...可能是系统尝试运行为 Snow Leopard 设计的构建。您可以尝试的解决方法是运行 Terminal.app 并使用 arch 命令，如下所示：

```
arch -i386 /Applications/eclipse.app/Contents/MacOS/eclipse-bin 
```

（将 /Application/eclipse.app 替换为应用程序的位置，并根据需要使用可执行文件的名称（以 -bin 结尾）而不是 eclipse-bin。）希望这对您有所帮助。

# c# - 如何处理所有 DBNull 而无需每次都检查它们（使用生成的 DataSet）？

> ID：12130369
> 
> 赞同：0
> 
> 时间：2012-08-26T13:08:18.140
> 
> 标签：c#, .net, dbnull

正如@nicholas 正确指出的那样，我最初的问题是有点误导，因为这个案例有点具体。

所以这是真正的问题：

我使用 DataGridView 控件和从生产数据库中的表生成的 DataSource 创建了 Windows 窗体应用程序。

我的程序的目标是查看表，选择性地编辑注释列并将表数据导出到 XML 文件，该模式是通过 XSD 和其他我无法更改的独立约束严格定义的。

如果某些值未定义，则不得将某些字段插入到 XML 输出文件中，这一点尤其重要。

明确表示我不能为这些字段插入空标签。这就是我需要空值的原因。仅在给定值的位置插入 XML 标记。这就是为什么我需要 DBNull 值，而不是任何其他默认值。

生成的 DataSet 包含在访问 DBNull 值时引发异常的 getter。我不能更改生成的代码，这是一条规则，你不能更改生成的代码，尤其是可以（并且将会）被覆盖的代码。

我通过用“try/catch”块包围每个可空字段的分配来解决这个问题。如果生成的 getter 引发异常，我的 XML 对象的可为空字段将保持它的默认空值，这是我的预期行为。

稍后 - 我的 XML 构造函数将在生成 XML 输出时跳过这些字段。

但还有一个问题：为什么一定要这么丑？如果我有一百个可空字段怎么办？我必须写一百个“try/catch”块吗？对我来说，这似乎是整个 Microsoft 机制中的一个错误。或者也许有一个简单而优雅的解决方案？

-- 这是原始内容，以了解第一个答案的来源：

> 拜托，我知道我可以检查 DBNull 的每个字段，但程序员必须有一种自动的方法。这将是整个 .NET/C# 中最愚蠢的事情 - 必须为我巨大的表的每一列编写“if”或“try/catch”语句！我尝试在我的表格行类型上使用“foreach”，但它没有用。异常在“foreach”主体的开头抛出，似乎如果我什至尝试触摸 DBNull，就会抛出异常。如果我将整个代码块放在“try/catch”中 - 它不会起作用，因为它会跳过第一个 DBNull 后面的所有字段。
> 
> 必须有一种方法可以做到这一点，而无需在我的代码中进行几十次笨拙的检查。那么，使用 DBNulls 的行的魔术是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:12:52.740

在从服务器检索它们之前删除 DbNull 值，方法是修改要调用的 SQL 选择查询`IsNull`（或在 Access 后端的情况下`Nz`）。[定义在这里](http://www.w3schools.com/sql/sql_isnull.asp)。

```
string sql = "select WidgetId, IsNull(WidgetName,""), " +
             "IsNull(WidgetValue,0), CreatedDt, ModifiedDt from dbo.widgets"; 
```

假设您有某种适当的默认值，或者稍后使用哨兵值来捕获空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:43:52.280

写一个扩展：

```
public static T GetValue<T>(this IDataRecord @this, string name, T defaultValue = default(T))
{
    int ordinal = @this.GetOrdinal(name));
    return @this.GetValue<T>(ordinal, defaultValue);
} 

public static T GetValue<T>(this IDataRecord @this, int ordinal, T defaultValue = default(T))
{
    return @this.IsDBNull(ordinal) ? defaultValue : (T)@this.GetValue(ordinal);
} 
```

像这样使用它：

```
connstr = @"Data Source=.\sqlexpress;Integrated Security=SSPI;Initial Catalog=Test;";

string sql = "select WidgetId, WidgetName, WidgetValue, CreatedDt, ModifiedDt from dbo.widgets";

using (connection = new SqlConnection(connstr))
{
    connection.Open();
    using (command = new SqlCommand(sql, connection))
    using (IDataReader reader = command.ExecuteReader())
    {
        while (reader.Read())
        {
            Console.Write(reader.GetValue<int>("WidgetId").ToString());
            Console.Write("\t");
            Console.Write(reader.GetValue<string>("WidgetName"));
            Console.Write("\t");
            Console.Write(reader.GetValue<int>("WidgetValue"));
            Console.Write("\t");
            Console.Write(reader.GetValue<DateTime>("CreatedDt"));
            Console.Write("\t");
            Console.Write(reader.GetValue<DateTime>("ModifiedDt"));
            Console.Write("\n");
        }
    }
} 
```

结果：

```
1       Widget 1        0       7/17/2012 6:13:26 AM    1/1/0001 12:00:00 AM
2       Widget 2        0       7/17/2012 6:13:26 AM    1/1/0001 12:00:00 AM
3       Widget 3        0       7/17/2012 6:13:26 AM    1/1/0001 12:00:00 AM 
```

# javascript - 根据组合框选择显示特定数据

> ID：12130375
> 
> 赞同：3
> 
> 时间：2012-08-26T13:08:52.377
> 
> 标签：javascript, jquery, html

我有 2 个组合框。我想根据组合框 1 的选择在组合框 2 中显示特定数据。

但我想让它成为一个准时选择......所以当我从组合框 1 中按下我想要的选项时，组合框 2 会填充与此选择匹配的数据。

我试图在组合框 1 选项上放置一个单击功能，但是当我单击它们时它不起作用......那么有什么方法可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T13:24:47.840

在第一个下拉列表中分配[`change`](http://api.jquery.com/change/)事件处理程序，然后根据选定的值，获取应该放在第二个下拉列表中的值。这是一个典型的*制造商 -> 模型*示例：

标记：

```
​&lt;select id="manufacturers">
    <option></option>
    <option value="Audi">Audi</option>
    <option value="Toyota">Toyota</option>
</select>

<select id="cars">
</select> 
```

JavaScript：

```
​​var cars = {
    Audi: [ 'A2', 'A3', 'A4' ],
    Toyota: [ 'Auris', 'Avalon', 'Yaris' ]
}​​​​;

$("#manufacturers").change(function () {
   var $this = $(this);
   var selectedValue = $this.val();
   if (selectedValue) {
     var $cars = $("#cars").empty();
     var newCars = cars[selectedValue];
     $.each(newCars, function () {
         console.log(this);
       $("<option>" + this + "</option>").appendTo($cars);
     });
   }
}); 
```

**[​演示](http://jsfiddle.net/NPg9z/)** 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T13:12:14.120

您应该在选择标签本身（而不是选项标签）上使用更改（而不是点击）事件。例子：

```
$('#combo1').change(function() {
     // Load new content for #combo2 here
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T13:12:17.530

```
$('select.option1').change(function() {
    // fill option2 with data from somewhere
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T13:14:15.420

> Chained 是用于链式选择的简单 jQuery 插件

[http://www.appelsiini.net/projects/chained](http://www.appelsiini.net/projects/chained)

我在一些项目中使用了这个插件，它工作稳定并且符合预期。随意尝试......</p>

# python - 指定与 app.yaml 相同目录级别的所有静态文件

> ID：12130376
> 
> 赞同：0
> 
> 时间：2012-08-26T13:09:13.470
> 
> 标签：python, google-app-engine

![在此处输入图像描述](../Images/96b7f417c3794a55ab452115e845c016.png)

我的所有静态文件都与我的目录相同`app.yaml`

现在，我必须在我**的**`app.yaml`

```
application: xxx
version: 1
runtime: python
api_version: 1

handlers:
- url: /
  static_files: index.html
  upload: index.html

- url: /style.css
  static_files: style.css
  upload: style.css

- url: /android.png
  static_files: android.png
  upload: android.png

- url: /logo.png
  static_files: logo.png
  upload: logo.png

- url: /helloworld.py
  script: helloworld.py 
```

有没有更简单的方法来指定我的所有静态文件？（只要它们与 相同的目录级别`app.yaml`）

我试试

```
- url: /
  static_files: index.html
  static_dir: \.
  upload: index.html 
```

它行不通。

```
Fatal error when loading application configuration:
Unexpected attribute "static_dir" for mapping type static_files.
  in "C:\Projects\xxx-website\app.yaml", line 12, column 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:43:24.360

正如其他人建议的那样，您可以将文件放在静态文件夹中，并拥有一个看起来像这样的 app.yaml（因此您不必手动输入每个文件）： [https ://gist.github.com/3031499](https://gist.github.com/3031499)

您还可以在顶部使用特定的处理程序，例如：

```
- url: /counter
  script: counter.app

- url: /(.*\.rar)
  script: download.app 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:12:03.733

有什么理由尝试这样做吗？将它们全部放在静态目录中。

# python - 读取 .dat fifo 文件并实时绘制数据

> ID：12130378
> 
> 赞同：0
> 
> 时间：2012-08-26T13:09:28.673
> 
> 标签：python, plot, pipe

我想知道如何使用 python 脚本打开管道以实时绘制管道中的数据。管道中的数据如下：

```
%time data_field1 data_field2

0 0.217413641411 0

0.001 0.202640969807 0

0.002 0.13284039654 0

0.003 0.111942324101 0

0.004 0.0806826346525 0 
```

此数据从 C++ 文件作为输出发送。

在 python 中，我想读取每一行并在图中实时更新它。有人可以帮助我，我该怎么做

感谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:33:15.487

查看这篇文章：[实时绘图](http://hardsoftlucid.wordpress.com/various-stuff/realtime-plotting/)，您可以在那里找到使用`pylab`库进行实时绘图的代码示例。在您的情况下，您需要比`SinwaveformGenerator`（在示例中仅生成随机数）更有用的值生成器。

# internet-explorer - Selenium 2 - 无法点击菜单

> ID：12130382
> 
> 赞同：0
> 
> 时间：2012-08-26T13:09:52.190
> 
> 标签：internet-explorer, selenium, webdriver

我使用 WebDriver，在 Firefox 中一切正常。

我的问题是 IE8 - 一切正常，但在某些情况下，它找不到元素。据我了解，这是因为 webdriver 出于某种原因，在每次操作之前都会最大化和最小化 IE 浏览器。所以它打开菜单，然后最大化浏览器，菜单关闭 - 所以它没有找到菜单中的元素。

如何取消 IE 浏览器的 max 和 min 选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:54:07.810

IE 驱动程序会更改浏览器窗口大小而您没有明确告诉它这样做的唯一原因是您正在截取页面的屏幕截图。您还没有提到这一点，但我将使用我的通灵调试能力来猜测您的框架必须在每次操作之前截取屏幕截图。不要在每次操作之前截屏，这种行为应该停止。

在您问之前，不，您无法在截屏时阻止 IE 驱动程序这样做。在 WebDriver 中截屏被定义为渲染整个 DOM，这需要在 IE 中调整窗口大小。这是 IE 的限制；司机对此无能为力。

# java - Spring 控制器是线程安全的吗？

> ID：12130387
> 
> 赞同：3
> 
> 时间：2012-08-26T13:10:10.987
> 
> 标签：java, multithreading, thread-safety, stringbuilder, stringbuffer

我正在 Spring Controller 中编写私有实用程序方法。

我需要使用`StringBuffer`或`StringBuilder`。前者是线程安全的，后者不是，但后者要快得多。

基本上，它看起来像这样：

```
private String buildTextToDisplay() {
    StringBuffer sb = new StringBuffer();
    sb.append( ... );
    return sb.toString();
} 
```

显然，我不希望两个会话同时调用它并返回垃圾。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-26T13:11:29.850

由于`sb`是一个局部变量，它不需要是线程安全的。（每个线程都有自己对唯一的引用`StringBuilder`，对吧？）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T13:11:55.217

a 的线程安全在`StringBuffer`用作类的成员变量时很有用。但是如果它是一个局部变量，那就`StringBuilder`更好了，因为局部变量没有线程安全的概念。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T13:17:11.350

您必须以非常具体的方式使用构建器来注意`StringBuilder`和之间的速度差异`StringBuffer`。在 99% 的用例中，没有可观察到的差异，而对于现代 JIT，它是 100% 的，因为**lock elision**。

但是，正如其他人所注意到的，您可以在自己的情况下自由使用`StringBuilder`。

# google-app-engine - 数据存储是否再次提供已删除的密钥

> ID：12130388
> 
> 赞同：1
> 
> 时间：2012-08-26T13:10:14.560
> 
> 标签：google-app-engine, google-cloud-datastore

当我删除一个实体时，数据存储区是否有可能再次提供密钥？在写入数据存储永远不会在同一父组中提供相同密钥的文档中。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T21:20:34.643

不会。自动生成的密钥永远不会被重复使用。

# jquery - 带有 3rd 方 jquery 插件集成的 Wordpress 插件

> ID：12130390
> 
> 赞同：0
> 
> 时间：2012-08-26T13:10:23.840
> 
> 标签：jquery, jquery-plugins, wordpress

我可以在我的 wordpress 插件中使用第三方 jquery 插件吗？找不到任何关于此的内容。结构会是什么样子？我会像在主题中工作一样将脚本排入队列吗？我对wordpress很陌生。

我的插件是否还需要一个 doctype 和一个 head 标签以及所有这些？我猜不是？

我正在尝试采用非 wordpress 脚本并将其转换为插件。这是我的代码，我正在使用这个第 3 方插件 - [http://filamentgroup.com/lab/update_to_jquery_visualize_accessible_charts_with_html5_from_designing_with/](http://filamentgroup.com/lab/update_to_jquery_visualize_accessible_charts_with_html5_from_designing_with/)

```
<?php 
```

/*

插件名称：Crashboard

描述：碰撞测试

版本：0.3

作者：模糊逻辑

许可证：GPL2

*/

```
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>CrashBoard</title>
<link href="css/basic.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://filamentgroup.github.com/EnhanceJS/enhance.js"></script> 
<script type="text/javascript" src='js/visualize.jQuery.js'></script>
<link href='css/visualize.css' type="text/css" rel="stylesheet" />     
<link href='css/visualize-light.css' type="text/css" rel="stylesheet" />    
<style>
#chart{
    display: none;
}

#chart7{
    display: none;
}

#gross{
    display: none;
}

#gross7{
    display: none;
}

#table_2 {
margin-left: 550px;
margin-top: -668px;
margin-bottom: 474px;
}

#sevenchart {
margin-left: 520px;
margin-top: -450px;
}

#sevengross{
margin-left: 260px;
margin-top: -30px;
}

#thirtychart {
margin-top: -38px;
margin-left: 22px;
}

#thirtygross {
margin-top: -38px;
margin-left: 22px;
margin-bottom: 15px;
}

#chart thead, td{
min-width: 60px;
}
</style>            
<script type="text/javascript">            
    $(document).ready(function(){

        $('#table').visualize({type: 'area', width: 950, height: 270}).appendTo('#thirtychart');

    });
</script>
</head>
<body>
<br/>
<table id="table">
<caption>30 Day Sales Overview</caption>
<thead>
    <tr>
        <td></td>
        <th scope="col">Units Sold</th>
        <th scope="col">Total Value Sold</th>
        <th scope="col">Total Clicks from Referrals</th>
        <th scope="col">Total Referrals to Sales</th>
        <th scope="col">Total commission Paid Out</th>
    </tr>
  </thead>
  <tbody>
    <tr>
        <?php

        global $wpdb;

        $y='';

        for($i=30; $i>=0; $i--){

            $the_time = time() - ($i * 24 * 60 * 60);

            $the_date = date('m-d', $the_time);

            echo "<th scope=\"row\">" . $the_date . "</th>";

            $day_quant = '';

            $day_gross = '';

            $day_clicks = '';

            $day_completes = '';

            $day_payments = '';

            $iminus1 = '';

            $iminus1 = $i-1;

            $ipn_list = $wpdb->get_results("Select * FROM paypal_ipn WHERE paypal_date >= DATE_SUB(NOW(), INTERVAL $i day) AND paypal_date <= DATE_SUB(NOW(), INTERVAL $iminus1 day)");

            if($ipn_list!=null){

                foreach( $ipn_list as $ipn_data ){

                    $order_quant = $ipn_data->quantity;

                    $day_quant += $order_quant; 

                    $order_gross = $ipn_data->payment_gross;

                    $day_gross += $order_gross; 

                }

                echo "<td>" . $day_quant . "</td>";
                echo "<td>" . $day_gross . "</td>";  

            }else{

                echo "<td>0</td>"; 
                echo "<td>0</td>";  

            }

            $affiliate_list = $wpdb->get_results("Select * FROM wp_affiliatedata WHERE paypal_date >= DATE_SUB(NOW(), INTERVAL $i day) AND paypal_date <= DATE_SUB(NOW(), INTERVAL $iminus1 day)");

            if($affiliate_list!=null){

                foreach( $affiliate_list as $affiliate_data ){

                    $refer_clicks = $affiliate_data->uniques;

                    $day_clicks += $refer_clicks;   

                    $refer_completes = $affiliate_data->completes;

                    $day_completes += $refer_completes; 

                    $refer_payments = $affiliate_data->payments;

                    $day_payments += $refer_payments;   

                }               

                echo "<td>" . $day_clicks . "</td>";
                echo "<td>" .  $day_completes . "</td>";
                echo "<td>" .  $day_payments . "</td>";   

            }else{

                echo "<td>0</td>";
                echo "<td>0</td>";
                echo "<td>0</td>"; 
                echo "</tr>";   

            }

            }
        ?>

</tbody>
</table> 
```

我想让它成为一个仪表板小部件，所以从我所见，我需要将主脚本放入 1 个函数并注册该函数..但是如果有的话，第三方 jquery 和 css 将如何适应呢？非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:48:34.897

惊人的文章，找到了我正在寻找的一切 - [http://www.jdmweb.com/resources/jquery_to_wordpress_plugin](http://www.jdmweb.com/resources/jquery_to_wordpress_plugin)

这是我需要使用 Fancybox 作为示例 3rd-party jquery 插件的代码：

```
//Group the code inside a function
function fancybox_wp_setup(){
  wp_enqueue_style(
  "jquery.fancybox", WP_PLUGIN_URL."/jQuery2Wp_fancybox/jquery.fancybox-1.3.1.css", 
  false, "1.3.1");

  wp_enqueue_script("jquery");

  wp_enqueue_script(
  "jquery.fancybox", WP_PLUGIN_URL."/jQuery2Wp_fancybox/jquery.fancybox.js", 
  array("jquery"), "1.3.1",1);  

  wp_enqueue_script(
  "jquery.fancyboxsetup", WP_PLUGIN_URL."/jQuery2Wp_fancybox/fancybox-setup.js", 
  array("jquery","jquery.fancybox"), "",1);
} 
```

# jquery - 如何在 mvc3 中开发水印表单验证？

> ID：12130392
> 
> 赞同：0
> 
> 时间：2012-08-26T13:10:58.867
> 
> 标签：jquery, asp.net-mvc-3, razor, watermark

我是 mvc3 的新手。我想使用 Jquery Watermark 效果开发表单验证。如果发生任何错误，文本框边框将以红色突出显示，并且仅在文本框中显示错误验证。

我的模型是这样的，

```
public class Registration
    {
        [Required]
        [Display(Name = "Name")]
        public string Name { get; set; }

        [Required]
        [Display(Name = "Email")]
        public string Email { get; set; }

        [Required]
        [Display(Name = "Phone No")]
        public string PhoneNo { get; set; }

        [Required]
        [Display(Name = "City")]
        public string City { get; set; }

        [Required]
        [Display(Name = "Country")]
        public string Country { get; set; }
    } 
```

我的查看页面代码是这样的

```
@model WaterMarkFormInput.Models.Registration
<script type="text/javascript">
    $(document).ready(function () {
        $('#name').Watermark("Your Name");
        $('#email').Watermark("Your Email");
        $('#phoneno').Watermark("Your PhoneNumber");
        $('#city').Watermark("Your City");
        $('#country').Watermark("Your Country");
    })

</script>

<script src="../../Scripts/jquery-1.5.1.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.watermarkinput.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Registration</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.Name, new { id="name"})
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Email)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.Email, new { id = "email" })
            @Html.ValidationMessageFor(model => model.Email)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.PhoneNo)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.PhoneNo, new { id = "phoneno" })
            @Html.ValidationMessageFor(model => model.PhoneNo)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.City)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.City, new { id = "city" })
            @Html.ValidationMessageFor(model => model.City)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Country)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.Country, new { id = "country" })
            @Html.ValidationMessageFor(model => model.Country)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

运行我的应用程序时，它会显示如下图所示的水印效果。

[http://i.imgur.com/CTMiS.png](http://i.imgur.com/CTMiS.png)

但是当我按下创建按钮表单验证停止工作。当我评论脚本以应用水印时，它将像这样显示我的表单验证

[http://i.imgur.com/HyvJs.png](http://i.imgur.com/HyvJs.png)

但我想要文本框中的验证文本，我该怎么做？等待回复:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:07:57.883

水印和验证不是一回事。（我确定我不是在对您说新东西，但请按照我的想法）但是，它们都以非常相似的方式定义，即通过数据注释。你这样做是为了验证。要定义水印，请执行以下操作：

```
[Display(Name = "Name", Description = "This is tooltip", Prompt = "This is watermark")]
public string Name { get; set; } 
```

在`<YourApp>/Views/Shared/`创建名为 的文件夹`EditorTemplates`中，并在`<YourApp>/Views/Shared/EditorTemplates`其中为您需要水印以下列方式出现的所有类型定义 String.cshtml、Text.cshtml、Multiline.cshtml 等：

**更新**

这是`String.cshtml`，`Text.cshtml`剃刀视图（其中 2 个）放入`<YourApp>/Views/Shared/EditorTemplates`文件夹（看起来完全一样，除了文件名）：

**结束更新**

```
// string, text 
@Html.TextBox(string.Empty, ViewData.TemplateInfo.FormattedModelValue, new
{
    @class = "text-box single-line",
    placeholder = ViewData.ModelMetadata.Watermark,
    title = ViewData.ModelMetadata.Description
}) 
```

**更新**

这是`<YourApp>/Views/Shared/EditorTemplates/MultilineText.cshtml`剃刀观点：

**结束更新**

```
// multiline
@Html.TextArea(string.Empty, ViewData.TemplateInfo.FormattedModelValue.ToString(), 0, 0, new
    {
        @class = "text-box multi-line",
        placeholder = ViewData.ModelMetadata.Watermark,
        title = ViewData.ModelMetadata.Description
    }) 
```

并在您调用的视图中`@EditorFor(m => m.Name)`。

这些是 HTML5 并且工作起来就像一个魅力（在 Chrome 和 IE9 中测试）

希望这可以帮助

**更新**

编辑器模板正如名称所暗示的那样 - 编辑器模板，因此当您在视图中调用`EditorFor`具有字符串或文本的编辑器模板时，正如我所展示的那样，您有效地更改了字符串或文本等的默认值 - 它的显示方式，以及在这种情况下，您将按默认方式显示它，添加几个 html5 参数，如占位符（水印）和标题（工具提示）。您可以在视图模型中定义它们的值，为水印添加提示 = 为工具提示添加描述 =。它基本上是 ASP MVC 定义和 HTML5 之间的映射：

*   `Description`成为工具提示（行业名称）并`title`在 html5 中调用
*   `Prompt`成为水印（行业名称）并`placeholder`在html5中调用

# minix - Minix3 只读问题

> ID：12130399
> 
> 赞同：0
> 
> 时间：2012-08-26T13:11:44.627
> 
> 标签：minix

我只想知道有没有一种方法可以覆盖MINIX 3`main.c`中内核文件夹（dir `/usr/src/kernel/main.c`）中的文件。我想更改文件中的一些代码（我知道所涉及的风险）但问题是我不能保存。我已经尝试以身份登录，`bin`但`root`仍然是同样的问题。

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T18:17:21.577

我认为您的问题在于您可能没有安装 MINIX 3 并且您正在从 ISO 或 CD-ROM 运行它。这就是您无法写入文件的原因，因为您无法写入 ISO 或 CD-ROM。

按照此链接在硬盘或虚拟驱动器上安装： [MINIX 3 安装指南](http://wiki.minix3.org/en/UsersGuide/DoingInstallation#RunningSetup)

# javascript - 图片库缩略图滑块

> ID：12130406
> 
> 赞同：0
> 
> 时间：2012-08-26T13:12:48.260
> 
> 标签：javascript, jquery, xml

在这里，我正在尝试创建一个图片库：http: [//jsfiddle.net/L7yKp/1/](http://jsfiddle.net/L7yKp/1/)

```
var xml = "<rss version='2.0'><channel> <image>http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png</image> <image>http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png</image> <image>http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png</image> <limage>http://images1.videolan.org/images/largeVLC.png</limage> <limage>http://images1.videolan.org/images/largeVLC.png</limage> <limage>http://images1.videolan.org/images/largeVLC.png</limage>   </channel></rss>",

xmlDoc = $.parseXML( xml ),
$xml = $( xmlDoc ),
$image= $xml.find( "image" );
$limage = $xml.find("limage");

$( "#thumbs" ).append( $image.map(function(){
        return $('<img>', {className: 'thumbnails', src:$(this).text()})[0];
    }));

        $( "#panel" ).append( $limage.map(function(){
        return $('<img>', {className: 'largeimages', src:$(this).text()})[0];
    })
); 
```

我必须在单击缩略图时显示更大的图像。因此，在单击每个缩略图时，将显示相应的较大图像。我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:19:20.057

见[http://jsfiddle.net/L7yKp/2/](http://jsfiddle.net/L7yKp/2/)

```
var xml = "<rss version='2.0'><channel>"+
"<image>http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png</image>"+
"<image>http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png</image>"+
"<image>http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png</image>"+
"<limage>http://images1.videolan.org/images/largeVLC.png</limage>"+
"<limage>http://images1.videolan.org/images/largeVLC.png</limage>"+
"<limage>http://images1.videolan.org/images/largeVLC.png</limage>"+
"</channel></rss>",
$xml = $( $.parseXML(xml) ),
$images=$([
    //[elements, place, className],
    [$xml.find("image") ,"#thumbs",'thumbnails'],
    [$xml.find("limage"),"#panel" ,'largeimages']
]);
$images.each(function(){
    var that=this;
    that[0].each(function(){
        $(that[1]).append($('<img>', {class: that[2], src:$(this).text()}));
    });
});
$("#thumbs>img").click(function(){
    $("#thumbs>img.clicked").removeClass('clicked');
    $("#panel>img").hide();
    $("#panel>img:nth-child("+Number($(this).index()+1)+")").fadeIn();
    $(this).addClass('clicked');
});
$("#thumbs>img:first").click();
$('#next').click(function(){
    $('#thumbs>img.clicked').next().click();
});
$('#prev').click(function(){
    $('#thumbs>img.clicked').prev().click();
}); 
```

注意：我为图像添加了边框，因为它们是相同的。

**编辑：**

你也可以加入

```
$('#next').click(function(){
    $('#thumbs>img.clicked').next().click();
});
$('#prev').click(function(){
    $('#thumbs>img.clicked').prev().click();
}); 
```

进入

```
$(['next','prev']).each(function(){
    var that=this;
    $('#'+that).click(function(){
        $('#thumbs>img.clicked')[that]().click();
    });
}); 
```

在这里看到它：http: [//jsfiddle.net/L7yKp/4/](http://jsfiddle.net/L7yKp/4/)

# database - VB6.0 和 IBM DB2：在数据库中搜索数据

> ID：12130409
> 
> 赞同：0
> 
> 时间：2012-08-26T13:13:23.177
> 
> 标签：database, search, vb6, db2

我正在使用 ibmDB2 和 VB6.0，试图从数据库中检索数据并将其显示在我的搜索功能的组合框中。表名称是供应商，我想在组合框中显示的列是 Supp_CompanyName。

但是在我完成编码之后，我在私有子表单部分下的 do 循环中遇到了“预期：语句结束”错误。关于如何解决此错误的任何想法？

## 谢谢 ：）

以下是我查看供应商信息表的代码：

```
Private Sub Combo1_Change()
Adodc1.RecordSource = "select * from Supplier where Supp_CompanyName='" & Combo1 & "'"
Adodc1.Refresh

End Sub

Private Sub Command1_Click()
Adodc1.RecordSource = "Select * from Supplier "
Adodc1.Refresh

End Sub

Private Sub Form_Load()
Adodc1.ConnectionString = "Provider=IBMDADB2.DB2COPY1;Data Source=ToyStore"
Combo1.Clear
Adodc1.RecordSource = "Select distinct Supp_CompanyName from Supplier"
Adodc1.Refresh

With Adodc1.Recordset 
Do Until .EOF 
    Combo1.AddItem ![Supp_CompanyName] 
    .MoveNext
Loop
End With

Adodc1.RecordSource = "Supplier"
Adodc1.Refresh

End Sub 
```

# php - Mysql调用存储过程报错

> ID：12130410
> 
> 赞同：1
> 
> 时间：2012-08-26T13:13:32.223
> 
> 标签：php, mysql

我创建了一个存储过程，调用它时出现错误。

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''results0.79123800+1345985910.html')' 附近使用正确的语法

这就是我从我的 php 代码中调用它的方式：

```
 mysql_query("CALL lastscan($task_id,'$file_name')") or die(mysql_error()); 
```

我的数据库中有 sp..

如果是引用的东西，如何在不修改存储过程的情况下转义我放在里面的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:18:32.553

您的语法不正确，请使用：

```
mysql_query("CALL lastscan('" .$task_id. "', '" .$file_name. "')") or die(mysql_error()); 
```

# api - 如何通过 Ruby on Rails API 导入大量数据

> ID：12130412
> 
> 赞同：0
> 
> 时间：2012-08-26T13:13:39.290
> 
> 标签：api, ruby-on-rails-3.2

假设我有一个电话簿应用程序，它通过 API 由其他服务提供联系人（姓名、电话号码等）。一次导入涵盖大约 10,000 个条目。

我现在正在努力开发这个导入过程。如果只有几个联系人要导入，我建议使用默认的 Ruby on Rails CRUD API（向*myphonebookapp.com/contacts*发送一些 POST 请求）。但我认为一次发送 10,000 个 post-request 并不是一个好主意。

也许最好创建一个像*myphonebookapp.com/contacts/import*这样的路由，它接受一个包含所有 10,000 个联系人的 JSON 对象。那将是一个“巨大的”3mb 请求，但我认为至少这比前一个想法要好。

这是要走的路还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:28:23.607

您是否没有考虑使用 10000 条目转储上传文本文件的功能，可以在服务器上使用 RoR 对其进行解析？

# ruby-on-rails-3 - Rails 3、大型多步形式：1个大型控制器还是按资源分开？

> ID：12130419
> 
> 赞同：4
> 
> 时间：2012-08-26T13:14:23.517
> 
> 标签：ruby-on-rails-3, forms, model-view-controller, controller, multi-step

我有一个多步骤表单，用户在几个不同的页面上填写信息。在传统的 Rails 中，您将每个资源单独保存在其自己的控制器中，并使用 REST 操作来操作数据。

在传统系统中，我将有 3-5 个不同的控制器（一些步骤是可选的）用于单个多步骤形式。如果我按照传统方式进行操作，那么控制器中就没有真正意义上的“秩序”。进入该项目的新开发人员必须了解哪些步骤映射到哪些步骤等等。

另一方面，我曾想过打破常规，使用一个控制器来组织整个多步骤表单。该控制器将充满以下方法：

```
def personal_info
  # code...
end

def person_info_update
  # code...
end

def residence_info
  # code...
end

def residence_info_update
  # code...
end

# many more coupled methods like the above... 
```

这个单一的控制器会变得相当长，但它本质上是一堆耦合的方法：一个用于显示步骤（表单），另一个用于更新和重定向到下一步。

这将打破 Rails 约定，我必须设置自己的路由。

但我很好奇其他人是如何解决这个问题的？我知道两者都可以工作，但我想知道从长远来看哪个更容易维护和编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:17:41.473

[我用https://github.com/pluginaweek/state_machine](https://github.com/pluginaweek/state_machine)做了这样的事情

这个想法是在表单的每一步都有一个状态，并根据实际资源的状态简单地呈现不同的表单部分。上面的 gem 让你为每个状态指定验证和回调。

像这样，您可以使用标准的 REST 控制器操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:52:06.170

资源不等于页面。我怀疑这两种方式都会打破对 REST 的限制。

您的所有兴趣都集中在浏览器中的 View 域上。如果你想在多个部分中显示一个表单，你应该使用 HTML、CSS 等。

否则，您只是在服务器上为表单进度创建临时存储。

# jquery - 如何使用jquery禁用输入时提交，保留附加的其他功能以完整输入

> ID：12130420
> 
> 赞同：0
> 
> 时间：2012-08-26T13:14:55.653
> 
> 标签：jquery, form-submit, enter

这个问题应该由[jquery disable form submit on enter](https://stackoverflow.com/questions/11235622/jquery-disable-form-submit-on-enter)回答，但该问题的答案似乎对我不起作用 - 当我在输入文本字段中按 enter 时，会发生三件事：

1.  该字段的更改事件被触发。
2.  表单已提交。
3.  最后，上述答案中描述的 keyup 事件处理程序被触发。

现在，我可以用 keydown 替换 keyup ，然后真的不会触发提交。但该领域的变化事件也没有。

互联网上有很多链接，但大多数都在谈论复杂的场景，比如禁用 if 和 when 等......

我想要的只是在输入时禁用提交，**但**仅此而已。

我正在使用 jquery 1.8.0

谢谢。

**编辑**

我想澄清一下。我确实希望在用户单击提交输入按钮时发生提交。我只是不希望它在进入时发生。

```
<form id="invoiceForm">
  ...
  <input type="submit"/>
</form> 
```

**编辑2**

[http://jsfiddle.net/mark69_fnd/akZG4/](http://jsfiddle.net/mark69_fnd/akZG4/) - 如果提交被触发，应该看到消息

```
{"error": "Please use POST request"} 
```

我不想在输入时看到此消息。仅当实际单击提交时。

**编辑3**

我将小提琴更改为实际提交空白页并在提交时发出警报。

**编辑4**

**我想阻止在文本输入字段中按回车键时提交表单的默认操作。但我确实想保留文本输入的自然行为 - 触发更改事件。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:33:30.387

在类似的情况下，我使用了这个：

HTML：

```
<input name="my_text" onkeypress="disableSubmit(this, event)" /> 
```

JS：

```
function disableSubmit(elem, event) {
    if (event.which == 13) { 
        event.preventDefault();
        $(elem).blur();
        return false;
    }
} 
```

所以基本上即使是触发模糊 - 所以当输入发生变化时 - 也会触发 change 事件。当然副作用是输入失去焦点。但从我们的使用场景来看，还可以。

# java - 在 Java 中使用正则表达式模式

> ID：12130423
> 
> 赞同：1
> 
> 时间：2012-08-26T13:15:40.723
> 
> 标签：java, regex

我创建了一个完美的正则表达式模式，但我无法让它在 Java 中工作：

```
(\\"|[^" ])+|"(\\"|[^"])*" 
```

应用于

```
robocopy "C:\test" "C:\test2" /R:0 /MIR /NP 
```

给（应该）

```
[0] => robocopy
[1] => "C:\test"
[2] => "C:\test2"
[3] => /R:0
[4] => /MIR
[5] => /NP 
```

根据[http://myregextester.com/index.php在第 0 组](http://myregextester.com/index.php)

现在，我如何在 Java 中获得这 6 个值？我试过

```
Pattern p = Pattern.compile("   (\\\"|[^\" ])+  |  \"(\\\"|[^\"])*\"   "); 
Matcher m = p.matcher(command);

System.out.println(m.matches()); // returns false 
```

但模式甚至根本不匹配任何东西？

更新原来的 perl 正则表达式是：

```
(\\"|[^" ])+|"(\\"|[^"])*" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:19:22.153

该`matches()`方法将整个字符串与正则表达式匹配 - 仅当整个字符串匹配时才返回 true

您正在寻找的是[`find()`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#find%28%29)方法，并使用该[`group()`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#group%28%29)方法获取子字符串。

它通常通过迭代来完成：

```
while (m.find()) { 
  .... = m.group();
  //post processing
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T13:20:44.690

由于正则表达式字符串在进入正则表达式处理器之前首先由编译器处理，因此您需要将表达式中的每个反斜杠加倍，并为每个双引号添加额外的斜杠。

```
 Pattern p = Pattern.compile("(\\\\\"|[^\" ])+|\"(\\\\\"|[^\"])*\""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T13:22:35.313

`matches()` 尝试匹配整个字符串上的模式。您应该`find()`为您的案例使用 Matcher 对象的方法。

所以解决方案是：

```
System.out.println(m.find()); 
```

# pointers - 使用指向值的指针作为切片

> ID：12130428
> 
> 赞同：0
> 
> 时间：2012-08-26T13:16:41.610
> 
> 标签：pointers, go, slice

是否可以将指向某个值的指针转换为切片？

例如，我想从变量中读取单个`io.Reader`字节`uint8`。`io.Reader.Read`接受一个切片作为它的参数，所以我不能像在 C 中那样简单地为它提供一个指向我的变量的指针。

我认为从指针创建长度为 1、容量为 1 的切片是安全操作。显然，它应该与从长度为 1 的数组创建切片相同，这是允许的操作。有没有一种简单的方法可以用普通变量来做到这一点？或者也许我不明白某些事情，并且有理由禁止这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:33:24.160

切片不仅仅是一个指针，就像 C 中的数组一样。它还包含数据的长度和容量，如下所示：

```
struct {
  ptr *uint8
  len int
  cap int
} 
```

所以，是的，你需要创建一个切片。创建切片的最简单方法`var a uint8`是`[]uint8{a}`

```
a := uint8(42)
fmt.Printf("%#v\n", []uint8{a}) 
```

（但是在重新阅读您的问题之后，这并不是一个解决方案）

但是如果你想从变量创建切片，指向相同的内存空间，你可以使用`unsafe`包。这是最有可能被劝阻的。

```
fmt.Printf("%#v\n", (*[1]uint8)(unsafe.Pointer(&a))[:] ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:50:39.910

与其（过度）复杂化这个琐碎的任务，为什么不使用简单的解决方案呢？即传递 .Read 一个长度为 1 的切片，然后将其第零个元素分配给您的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T07:11:03.550

当我想向`io.Reader`. Go 标准库很棒！

```
import (
    "io"
    "encoding/binary"
)

...

var x uint8
binary.Read(reader, LittleEndian, &x) 
```

作为副作用，这适用于任何基本类型，甚至适用于一些非基本类型。

# javascript - 在呈现 HTML 样式和脚本时加载启动页面？

> ID：12130434
> 
> 赞同：2
> 
> 时间：2012-08-26T13:17:11.890
> 
> 标签：javascript, css, html, javascript-events

我的所有 Javascript 文件都链接在我的页面底部。这样，可以在加载任何脚本之前渲染 HTML。唯一的问题是 HTML 在脚本完成“装饰” HTML 元素之前显示给用户。在脚本和样式启动之前，是否有一种优雅的方式向用户显示您的应用程序的启动页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T13:20:53.767

您可以创建一个`div`覆盖整个屏幕`position: fixed`的高和高作为正文中的第一个元素。`z-index`可以在里面显示加载动画或文本。

正文的最后一行是一个 JavaScript，它设置`display: none`为`div`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:19:53.527

在您的 HTML 中，您可以编写启动页面并在加载后使用 javascript 使用真实内容（默认情况下隐藏）覆盖它。

然而，这个解决方案有一个**巨大**的缺点：如果有人禁用了 JS 怎么办？

演示：http: [//jsfiddle.net/FDcNx/](http://jsfiddle.net/FDcNx/)

# java - Android中没有另一张图片的按钮点击效果

> ID：12130436
> 
> 赞同：0
> 
> 时间：2012-08-26T13:17:31.550
> 
> 标签：java, android, button

我的应用程序中的按钮作为常规按钮但具有自定义背景（请参阅此以了解我的意思[http://www.gersic.com/blog.php?id=56](http://www.gersic.com/blog.php?id=56)）。一切正常。但是，我想向用户表明他正在按下按钮，而按钮上没有另一个“按下”版本（我知道如何在按下时为按钮提供另一个图像）

我目前使用 onTouchListner 并在按下并清除释放时在按钮上应用颜色过滤器，但在触摸模式下检测到按下和释放 * 准确 * 对我来说不起作用

**编辑**

这就是我想要的方式。

未按下： [未按下](https://lh5.googleusercontent.com/-pPbirVV1zsg/UD3jK9e4gSI/AAAAAAAAAGI/yYVD2kf1bcs/s512/Screenshot_2012-08-29-12-36-38.png)

按下（相同的确切图像文件）： [按下](https://lh6.googleusercontent.com/-oqIDDJkfMdY/UD3iyYkP6jI/AAAAAAAAAGA/c7neX5P3IyU/s512/Screenshot_2012-08-29-12-36-44.png)

我使用 colorFilter 获得了高光效果
`getBtn.getBackground().setColorFilter(0xFF838B83, PorterDuff.Mode.MULTIPLY);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:46:51.520

you could just create a Selector for your Button, so you can set it as its background but still have a click-effect whenever you click it.

```
<?xml version="1.0" encoding="utf-8"?>
<selector
    xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" >
        <shape>
            <gradient
                android:startColor="insert color"
                android:endColor="insert color"
                />
            <stroke
                android:width="3dp"
                android:color="insert color" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>

    <item android:state_pressed="false" >        
        <shape>
            <gradient
                android:endColor="insert color"
                android:startColor="insert color"
               />
            <stroke
                android:width="3dp"
                android:color="insert color" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
</selector> 
```

set this xml file as your background for your button:

```
mybtn.setbackground(R.drawable.thexmlfileabove); 
```

# c# - TreeView 事件不断触发

> ID：12130444
> 
> 赞同：0
> 
> 时间：2012-08-26T13:18:53.160
> 
> 标签：c#, wpf, events, c#-4.0, treeview

我正在使用 TreeView (System.Windows.Controls.TreeView) 的 WPF 版本，需要分配几个事件。由于这些是 WPF，大多数事件要么不同，要么行为方式不同，因此我感到困惑，因为 AfterExpand 不可用

现在我需要 2 个事件：

处于 TreeView 级别的 SelectedItemChanged 处于 TreeViewItem 级别的 ExpandedEvent

到目前为止我有

```
 private void DisplayGetEventTypes(UXEvent.GetEventTypesResp resp, CustomAsyncStateContainer state)
    {

        navBarControl.Groups.Clear();

        if (resp.eventTypeItems != null)
        {
            UXEvent.EventType[] eventItems = resp.eventTypeItems;

            int nodeCount = eventItems.Length;
            for (int i = 0; i < nodeCount; i++)
            {
                UXEvent.TryEvent eventItem = new UXEvent.TryEvent();
                eventItem.eventName = eventItems[i].name;
                eventItem.eventId = eventItems[i].id;

                NavBarGroup group1 = new NavBarGroup();

                group1.Header = eventItems[i].name;
                group1.Tag = eventItem;

                group1.IsExpanded = false;

                //Add dummy treeview to fill later if expanded
                System.Windows.Controls.TreeView treeview = new System.Windows.Controls.TreeView();
                treeview.SelectedItemChanged += new RoutedPropertyChangedEventHandler<object>(myTreeView_SelectedItemChanged);
                AddHandler(TreeViewItem.ExpandedEvent, new RoutedEventHandler(myTreeView_ItemExpanded));
                group1.Content = treeview;
                group1.DisplaySource = DisplaySource.Content;

                navBarControl.Groups.Add(group1);

            }

        }
    } 
```

以及以下两个用于测试的草稿事件处理程序

```
 void myTreeView_SelectedItemChanged(object sender,
    RoutedPropertyChangedEventArgs<object> e)
    {
        // Set the data context of the text block to the selected value.
        var node = (ItemsControl)e.OriginalSource;
        System.Windows.Forms.MessageBox.Show("Selected!");

    }

    void myTreeView_ItemExpanded(object sender, RoutedEventArgs e)
    {
        // Set the data context of the text block to the selected value.
        var node = (TreeViewItem)e.OriginalSource;

        System.Windows.Forms.MessageBox.Show("Opening! - " + node.Header);

    } 
```

我遇到的问题是，`myTreeView_ItemExpanded`当任何 treeviewItem 展开时会触发多次。我认为由于事件冒泡它会触发多次。

首先，谁能指出我可以阅读这种行为的一些好的资源？

其次，我怎样才能修改我的代码`AddHandler(TreeViewItem.ExpandedEvent, new RoutedEventHandler(myTreeView_ItemExpanded));`只做一个事件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:16:54.393

我发现了问题。线

`AddHandler(TreeViewItem.ExpandedEvent, new RoutedEventHandler(myTreeView_ItemExpanded));`

应该读

`treeview.AddHandler(TreeViewItem.ExpandedEvent, new RoutedEventHandler(myTreeView_ItemExpanded));`

我假设第一行必须已将事件处理程序添加到所有可用控件，并且在事件触发时全部触发。

# c - 4个论据？3?

> ID：12130452
> 
> 赞同：0
> 
> 时间：2012-08-26T13:19:47.760
> 
> 标签：c, parameters, arguments

我正在研究一本 C 编程书籍中的一些问题，遇到了一个有趣的问题：

1.  对或错？

    该声明：

    ```
    scanf("%d:%f:%1f\n", &a, &b, &c); 
    ```

    包含四个参数`"%d:%f:%1f\n"`、`&a`和。`&b``&c`

    给出的答案是**真实的**。为什么会这样？我在这里看不到 4 个参数/参数。

2.  对或错？

    该声明：

    ```
    printf("%+2d",123); 
    ```

    展示`+12`

    答案是**错误**的。为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T13:26:37.897

第一的;

```
scanf("%d:%f:%1f\n", &a, &b, &c); 
```

包含 4 个参数；

```
1: "%d:%f:%1f\n"
2: &a
3: &b
4: &c 
```

第二;

```
printf("%+2d",123); 
```

2 表示*最小字段宽度*，但 123 比 2 个字符宽，将被完整打印。`+`强制一个符号，所以结果是`+123`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T13:25:02.997

**问题 #1**

参数是用逗号分隔的:)。

```
scanf("%d:%f:%1f\n", &a, &b, &c);
   // 1              2   3   4 
```

**问题2**

该行打印+123，试试看。

```
printf("%+2d",123); 
```

来自[http://www.cplusplus.com/reference/clibrary/cstdio/printf/](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)：

概要：`%[flags][width][.precision][length]specifier`

*   标志 ( `+`)：强制在结果前面加上一个加号或减号（+ 或 -），即使是正数也是如此。默认情况下，只有负数前面带有 - 号。
*   宽度 ( `2`)：要打印的最小字符数。如果要打印的值比这个数字短，结果用空格填充。即使结果较大，该值也不会被截断。
*   说明符 ( `d`)：有符号十进制整数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T13:26:46.377

在第一种情况下，参数是指传递给函数的参数，而不是格式语句参数。在第二个问题中，加号表示输出一个加号，而 2 表示使用至少两个位置作为输出。打印不会截断数字，因此它将打印出所有三位数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T13:25:45.167

第一个论点： `"%d:%f:%1f\n"`

第二个论点： `&a`

第三个论点： `&b`

第四个论点： `&c`

函数调用中有四个参数传递给函数。

# vim - Vim Latex Suite：显示内联数学分隔符（$$）

> ID：12130454
> 
> 赞同：2
> 
> 时间：2012-08-26T13:20:03.940
> 
> 标签：vim, latex

正如标题所示：VIM 的 Latex 套件（VIMLatex）有时在我输入该特定行时不显示内联数学分隔符（$$）。但是，我想向他们展示。我目前在输入时看到的内容：

```
BLABLA: \omega = 2\, \pi\, f 
```

我想拥有的：

```
BLABLA: $ \omega = 2\, \pi\, f $ 
```

我已经搜索了文档，但找不到设置……</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T13:36:14.833

它应该在输入当前行时显示它们。在您的 vimrc 中搜索调整`concealcursor`（短：）`cocu`选项的行，它不应该包含`i`，还要检查`verbose set cocu?`.

您可以通过添加完全禁用隐藏

```
set conceallevel=0 
```

到你的 vimrc。

# scala - PlayFramework 2 - Scala - 如何在控制器范围之外传递隐式 Lang

> ID：12130455
> 
> 赞同：0
> 
> 时间：2012-08-26T13:20:09.103
> 
> 标签：scala, internationalization, playframework-2.0

在 Play 2.0 应用程序中，我使用 Jerkson 进行自定义 JSON 序列化。

在 JsonSerializer 类的实现中，我需要根据浏览器的主要语言对消息进行国际化。不幸的是，在该上下文中隐含的对象 Lang 是 JVM 语言，而不是请求的接受语言。

在控制器上下文之外访问浏览器语言的最佳方式（如果有的话）是什么？

```
class LangStringSerializer extends JsonSerializer[LangString] {
  def serialize(string: LangString, json: JsonGenerator, provider: SerializerProvider) {     
    json.writeString(string.localized_value)
  }
//the method localized_value has an implicit parameter Lang and must produce 
//a localized string based on the browser main language.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:25:54.170

It must be passed to your class:

```
class LangStringSerializer(val lang: Lang) extends JsonSerializer[LangString] {
  def serialize(string: LangString, json: JsonGenerator, provider: SerializerProvider) {     
     json.writeString(string.localized_value(lang))
  }
} 
```

and you have to retrive it from your controller:

```
def myJsonAction = Action { implicit request =>
  Ok(new LangStringSerializer(lang).serialize(...))
} 
```

# android - onClick时获取资源的文件名

> ID：12130456
> 
> 赞同：2
> 
> 时间：2012-08-26T13:20:11.070
> 
> 标签：android, gridview, imageview

我正在浏览 android 教程和 android 开发网站。我在这里遇到了 Gridview 示例：http: [//developer.android.com/guide/topics/ui/layout/gridview.html#example](http://developer.android.com/guide/topics/ui/layout/gridview.html#example)

在示例中，单击网格中的图像视图时，图像在 GridView 中的位置显示在 Toast 消息中。而不是图像的位置，我想显示资源的文件名（比如文件名是 sample1.jpg）。我怎么做？

谢谢 ：）

# java - IP地址转换为十进制，反之亦然

> ID：12130464
> 
> 赞同：3
> 
> 时间：2012-08-26T13:21:20.837
> 
> 标签：java, php, networking, decimal, ip-address

假设我的十进制数是`9766322441`这样的，`70.30.65.9`但是当这个IP地址IC转换回来时，它给出了一些不同的十进制数`1176387849`......当我转换IP地址pf google.com时`64.233.187.99`，它给出了`1089059683`并且反向转换给出了正确的IP地址即`64.233.187.99`...

我的问题是上面提到的数字有什么问题？我也尝试`9579342332`了相同的结果。它给出了错误的反向转换？

背后的原因是什么？？

您可以使用[此计算器](http://www.ipaddresslocation.org/convertip.php)进行计算。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-26T13:29:33.090

您的值不正确 70.30.65.9 将与 1176387849 对应，但不会与 9766322441 对应。

## 32 位的限制 - [Java：如何将 dec 转换为 32 位 int？](https://stackoverflow.com/questions/4984130/java-how-to-convert-dec-to-32bit-int)

## 将IP转换为十进制的C++示例：

```
#include <iostream.h>

main()
{
    // Initialize the variables
    unsigned long a,b,c,d,base10IP;

    // Get the IP address from user
    cout << "\nEnter an IP address in dotted quad notation (x.x.x.x)";
    cout << "\nwith each section seperated by a space: ";
    cin >> a >> b >> c >> d;

    // Do calculations to convert IP to base 10
    a *= 16777216;
    b *= 65536;
    c *= 256;
    base10IP = a + b + c + d;

    // Output new IP address
    cout << "\nThe converted address is: " << base10IP << '\n';
   } 
```

这是将 IP 转换为十进制的 JAVA 类：-

```
/**
 * @author Charles Johnson
 * from http://www.technojeeves.com/joomla/index.php/free/58-convert-ip-address-to-number
*/
public class IpConverter {
  public static void main(String[] args) {
    System.out.println(longToIp(Long.valueOf(args[0], 16)));
  }

  public static String toHex(String ipAddress) {
    return Long.toHexString(IpConverter.ipToLong(ipAddress));
  }

  public static long ipToLong(String ipAddress) {
    long result = 0;
    String[] atoms = ipAddress.split("\\.");

    for (int i = 3; i >= 0; i--) {
        result |= (Long.parseLong(atoms[3 - i]) << (i * 8));
    }

    return result & 0xFFFFFFFF;
  }

  public static String longToIp(long ip) {
    StringBuilder sb = new StringBuilder(15);

    for (int i = 0; i < 4; i++) {
        sb.insert(0, Long.toString(ip & 0xff));

        if (i < 3) {
            sb.insert(0, '.');
        }

        ip >>= 8;
    }

    return sb.toString();
  }
} 
```

另一个将 IP 转换为十进制的 JAVA 示例： - String ip="70.30.65.9"; String[] addrArray = ip.split("\."); 长数 = 0; for (int i = 0; i PHP 函数将 IP 转换为十进制： - function myip2long($ip) { if (is_numeric($ip)) { return sprintf( "%u", floatval($ip) ); } else { return sprintf( "%u", floatval(ip2long($ip) )); } } 尝试应用它，例如： echo myip2long("192.168.1.1");
PHP 中将 IP 转换为十进制的另一个示例： - function myip2long2 ($ip){ $d = 0.0; $b = explode(".", $ip,4); for ($i = 0; $i PHP 示例将十进制转换为 IP: - function customLong2ip($ip){ $b=数组（0,0,0,0）；$c = 16777216.0；$ip += 0。 0; 对于 ($i = 0; $i

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T13:42:45.150

您超出了有效的 IPV4 范围，十进制值为 9766322441。如果转换为十六进制，它将为您提供占用 5 个八位字节而不是 4 个八位字节的值 0x2461E4109：

```
02, 46, 1e, 41, 09 
```

计算器只是截断值为 0x02 的八位位组，并使用 4 个最低有效八位位组转换该值。

0x461E4109 的计算为您提供计算器显示的“70.30.65.9”。

* * *

如何在 Java 中执行此操作：

我建议使用标准 Java 类来进行 InetAddress 操作。这应该适用于 IPV4 和 IPv6：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/net/InetAddress.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/InetAddress.html)

您可能正在寻找类似的东西（我在 10 多年前使用 Java，所以如果发现语法错误，请随时更正）

```
InetAddress Address = InetAddress.getByName("192.168.0.1");
InetAddress Address = InetAddress.getByName(raw2);
String s1 = Address.toString();
byte[] raw = Adress.getAddress();

byte[] rawIPv4 = {192, 168, 0, 1};
InetAddress Address1 = InetAddress.getByName(rawIPV4);

InetAddress Address2 = InetAddress.getByName("2607:f0d0:1002:51::4");
byte[] rawIPV6 = Adress.getAddress(); 
```

IPv6 示例还涵盖了地址中的“压缩零”（51 和 4 之间的“::”）的情况。

无论如何，您可能需要检查此以将字节数组转换为整数：
[Byte Array and Int conversion in Java](https://stackoverflow.com/questions/5399798/byte-array-and-int-conversion-in-java)

但是请注意，IPV6 格式确实对单个 IP 地址使用 16 个字节，因此我不确定您是否可以使用单个整数值来表示它，如计算器所示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T13:46:51.107

IPv4 地址是 32 位的。

该数字`9,766,322,441`不能以 32 位表示（最大值：`4,294,967,295`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-10T20:18:16.940

在阅读原始帖子以及随后响应人们回答的后续帖子时，我有一个明显的印象，即您原来的“10 位十进制”实际上是您想以某种方式变成 IP 地址的电话号码。

> “因为我想开发将移动设备转换为 ip 的算法，反之亦然”

它不是那样工作的。这就像询问如何获取 MAC 地址并将其转换为 IP 地址。电话号码和 IP 地址由两个完全不同的机构分配。没有将两者联系起来的算法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-13T15:41:40.087

实际上，IP 地址可以转换为 32 位 java 整数，只是该数字可能为负数。这真的很好，因为您可以在不丢失数据的情况下来回转换它。现在，如果您真的想使用额外的 32 位并将其存储在一个 long 中，这样它就不会对 java 产生负面影响，但它是浪费的。您可以编写一个函数将其转换为 long 并将其显示为 unsigned 但将其存储在 int 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-02T12:25:56.960

在 Excel 中也有一些方法可以做到这一点。一些计算很混乱，但最简单的计算是使用用户定义函数，如这篇文章[如何在 Excel 中对 IP 地址列表进行排序](http://topnettricks.com/sort-ip-addresses-convert-decimal-excel2/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-10-05T00:51:42.990

问题是为什么 9766322441 会转换为 70.30.65.9，但是当转换回来时，它会给出 1176387849 而不是 9766322441。答案是因为 4294967296 是由 IP 256.256.256.256 表示的最高十进制数。

高于 4294967296 它将在回程中转换为低于 256.256.256.256 的数字，就像在汽车上滚动里程表一样。9766322441 显然是 4294967296 值的两倍多，并最终滚动里程表两次，最后在里程表的第三次滚动中以 1176387849 结束。然后，这个新号码将正常地与 IP 地址相互转换，因为它在范围内。

# wicket - wicket 是否支持 ETag？

> ID：12130466
> 
> 赞同：1
> 
> 时间：2012-08-26T13:21:26.063
> 
> 标签：wicket, etag

我在 Wicket 中找不到任何 etags 支持的痕迹。有没有办法使用 etags 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T14:41:07.723

不，没有 ETag 支持。Wicket 并非用于提供静态内容。如果您必须提供许多静态资源，您可以使用除 Wicket 之外的其他框架，如 Spring MVC。

Wicket 通过强大的缓存机制支持缓存。资源挂载到包含文件时间戳（在开发模式下）或 MD5 哈希（在部署模式下）的 URL。这使得资源独一无二并且可以永久缓存，因为如果内容发生变化，URL 也会发生变化。标题`Expires`由 Wicket 自动设置为从当前日期起一年。这使得此类资源不需要使用像 ETag 这样的弱散列机制。

`IResourceCachingStrategy`您可以通过设置in来更改此行为`IResourceSettings`。

# objective-c - 单独识别 UIImages

> ID：12130467
> 
> 赞同：0
> 
> 时间：2012-08-26T13:21:37.560
> 
> 标签：objective-c, ios, xcode, tags, uiimage

我有一个应用程序，可以将多个 UIImages 添加到视图中。然后可以在屏幕上拖动这些图像。如何检查已拖动哪个图像，然后*将该*图像的坐标保存到文件中，并且在同一视图中没有其他 UIImage。如果可能的话，我需要一种标记每个 UIImage 的方法，以将它们分开并单独识别它们。希望这是有道理的！

这就是我将每个 UIImage 添加到视图的方式：

```
CGRect imageFrame = CGRectMake(activeView.center.x - 50, activeView.center.y - 50, 200, 200);
imageResizableView = [[SPUserResizableView alloc] initWithFrame:imageFrame];
UIImage *image = [UIImage imageNamed:@"galaxy.jpg"];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
imageResizableView.contentView = imageView;
imageResizableView.delegate = self;
[activeView addSubview:imageResizableView]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:29:24.030

您可以在 UIVIew 上使用**标签。** `property`

根据官方[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)中提到的：

> **tag**一个整数，可用于标识应用程序中的视图对象。
> 
> **@property(nonatomic) NSInteger 标签**讨论 默认值为 0。您可以设置此标签的值并使用该值来识别视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T13:29:44.567

`UIImageView`s 是 UIView 的子类，所以有一个`tag`属性。为每个图像设置它，然后当你想要那个图像`[self.subViews viewWithTag:number];`找到它时。

编辑：如果我理解这一点，有很多 UIImageViews，但多个 imageViews 可能会显示相同的图像。

假设，那么你将标签的 32 位划分为高 16 位作为唯一的 imageView 编号，低 16 位是图像编号。然后，您将需要遍历所有子视图以查找图像。您可以使用宏来简化此操作：

```
#define TAG_NUMBER(imageViewNum, imageNum) ((imageViewNum << 16) | imageNum)
#define IMAGE_FROM_TAG(tag) (tag & 0xFFFF)
etc 
```

当您想查找显示该图像的所有图像视图时：

```
for(UIVIew *view in self.subviews) {
if(![view isKindOf:[UIIMageView class]]) continue;

int imageNum = IMAGE_FROM(view.tag);
if(imageNum == theOneIwant) {
  save frame of "view"
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T13:42:44.067

如果整数标签足够好，则使用`tag`UIViews 已经存在的属性。

但是，如果您想要更多内容，可以使用`obj_setAssociatedObject`将 tagName 属性添加到 UIView。

```
@interface UIView (tagName)
@property (nonatomic, copy) NSString *tagName;
@end 
```

--

```
#import <objc/runtime.h>

@implementation UIView (tagName)
static char tagNameKey[1];

- (NSString*)tagName {
    return objc_getAssociatedObject(self, tagNameKey);
}

- (void)setTagName:(NSString *)tagName {
    objc_setAssociatedObject(self, tagNameKey, tagName, OBJC_ASSOCIATION_COPY_NONATOMIC);
}
@end 
```

然后可以像这样使用...

```
NSString *imageName = @"galaxy.jpg";
UIImage *image = [UIImage imageNamed:imageName];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
imageView.tagName = imageName; 
```

然后...

```
NSString *imageName = imageView.tagName; 
```

**编辑**

当然，你可以添加任何你想要的，例如模仿`viewWithTag`

```
- (UIView*)viewWithTagName:(NSString *)tagName {
    if ([self.tagName isEqualToString:tagName]) {
        return self;
    }

    UIView *result = nil;
    for (UIView *view in self.subviews) {
        if ((result = [view viewWithTagName:tagName]) != nil) {
            return result;
        }
    }

    return nil;
} 
```

# android - android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData

> ID：12130468
> 
> 赞同：4
> 
> 时间：2012-08-26T13:21:48.517
> 
> 标签：android, android-mapview, mapactivity

我有一个带有两个 MapActivity 的应用程序，每个都有其 MapView，具有相同的 API 密钥。

它在 Android 3.x 和 4.x 设备中工作正常，但在 2.3.x 中切换活动时出错。

有人可以帮忙吗？

这是错误：

```
08-26 21:00:03.160: W/System.err(1858): IOException processing: 26
08-26 21:00:03.160: W/System.err(1858): java.io.IOException: Server returned: 3
08-26 21:00:03.160: W/System.err(1858): at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
08-26 21:00:03.160: W/System.err(1858): at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
08-26 21:00:03.160: W/System.err(1858): at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
08-26 21:00:03.160: W/System.err(1858): at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
08-26 21:00:03.160: W/System.err(1858): at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:11:44.597

按照下面的链接这是谷歌地图签名密钥的问题 -

[http://android-expert.blogspot.in/2013/03/android-and-strange-error-with-maps.html](http://android-expert.blogspot.in/2013/03/android-and-strange-error-with-maps.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:30:42.920

回答 ：

当您使用固定尺寸的地图时，在嵌套的 Framelayout 中使用地图。

```
 <FrameLayout
            android:id="@+id/mapview_bg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@color/silver" 
            >

            <com.google.android.maps.MapView
                android:id="@+id/deal_mapview"
                android:layout_width="146dp"
                android:layout_height="106dp"
                android:apiKey="@string/google_map_api_key"
                android:clickable="true" />
       </FrameLayout> 
```

享受 ：）

# c# - 为什么是列表 .IndexOf(T) 在存在的对象上返回-1？

> ID：12130469
> 
> 赞同：2
> 
> 时间：2012-08-26T13:21:48.517
> 
> 标签：c#, .net, asp.net-mvc, collections

我有一个 foreach 循环遍历 ASP.NET MVC/Razor 项目中的对象列表。我正在尝试使用当前对象的索引来确定列表中是否还有另一个对象。

每次通过循环，我都会得到 -1 作为以下代码中 Model.TodaySoups.IndexOf(soup) 返回的值：

```
@foreach(MenuItem soup in Model.TodaysSoups)
{
    int i = Model.TodaysSoups.IndexOf(soup); 
    string comma = i < Model.TodaysSoups.Count ? "," : "";
    <li class="soup">@soup.Name@comma </li>
} 
```

TodaysSoups 被定义为：

```
public List<MenuItem> TodaysSoups 
```

我也尝试过隐式定义汤：

```
var soup in Model.TodaysSoups 
```

没有帮助。

据我所知，这应该有效。很明显，我弄错了。任何帮助，将不胜感激。

**更新：** 任何你可以忽略的问题，我已经盯着这个问题看了一段时间，只是尝试了我能想到的任何东西，但是，谢谢你试图帮助我解决这些问题。奇怪的是我每次都得到-1。

MenuItem 定义

```
 public class MenuItem
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public decimal Price { get; set; }
    public string Category { get; set; }
    public List<MenuOption> Options { get; set; }
    public bool IsAvailable { get; set; }
    public bool IsSpecial { get; set; }

    public MenuItem()
    {
        this.IsAvailable = true;
        this.IsSpecial = false;
        this.Options = new List<MenuOption>();
    }
} 
```

值得注意的是：我最初计划使用 EF，但我们在工作中使用的是 Enterprise Library 5.0 DAAB，所以我切换了，以便习惯使用它。然后，我在我的代码和配置文件中删除了我认为所有对 EF 的引用，并且很有可能我错过了一些东西，因为我真的不熟悉它。可能的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T13:25:09.003

快速修复：使用 for 循环。

```
@for(int i = 0; i < Model.TodaySoups.Count; i++)
{
    MenuItem soup = Model.TodaySoups[i];
    // now you have 'soup' and 'i'

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T13:35:08.937

您进行迭代，`Model.TodaysSoups`然后检查`Model.TodaySoups`. 看起来像两个不同的集合。

# c# - 使用 Microsoft.Synchronization 库在不同机器上同步文件夹

> ID：12130471
> 
> 赞同：3
> 
> 时间：2012-08-26T13:22:00.160
> 
> 标签：c#, .net, sync

我正在开发一个 Windows 应用程序，它应该将文件夹从服务器同步到不同的机器 [客户端]，因此使用 Microsoft.Synchronization 库在不同的网络上同步，这可行吗？应该如何提供目标文件夹以及用户名和密码？

如果这不可行，还有其他方法可以做到这一点吗？

谢谢

# c# - except() 为两个数组提供错误的输出？

> ID：12130474
> 
> 赞同：0
> 
> 时间：2012-08-26T13:22:37.190
> 
> 标签：c#, .net, linq, except

我有两个数组，我需要显示 array1 有哪些 array2 没有，反之亦然。

```
string[] a = { "hello", "momo" }
string[] b = { "hello"} 
```

输出：

```
momo 
```

我正在使用 .Except 并尝试在消息框中显示输出，但是当我执行我的代码时，输​​出是这样的：

```
System.Linq.Enumerable+<ExceptIterator>d_99'1[System.Char] 
```

我的代码：

```
//Array holding answers to test
string[] testAnswer = new string[20] { "B", "D", "A", "A", "C", "A", "B", "A", "C", "D", "B", "C", "D", "A", "D", "C", "C", "B", "D", "A" };
string a = Convert.ToString(testAnswer);

//Reads text file line by line. Stores in array, each line of the file is an element in the array
string[] inputAnswer = System.IO.File.ReadAllLines(@"C:\Users\Momo\Desktop\UNI\Software tech\test.txt");
string b = Convert.ToString(inputAnswer);

//Local variables
int index = 0;
Boolean arraysequal = true;

if (testAnswer.Length != inputAnswer.Length)
{
    arraysequal = false;
}

while (arraysequal && index < testAnswer.Length)
{
    if (testAnswer[index] != inputAnswer[index])
    {
        arraysequal = false;
    }
    index++;
}

MessageBox.Show("" + a.Except(b)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T13:24:30.103

您应该将其转换为字符串 - 否则，它是一个可枚举的，并且`ToString`不会产生预期的结果。

```
MessageBox.Show(string.Join(", ", a.Except(b))); 
```

**编辑**此行中存在相同的问题：

```
string a = Convert.ToString(testAnswer); 
```

你应该用

```
string a = String.Join(", ", testAnswer); // << You can use a different separator 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T13:47:13.650

`a.Except(b)`有一个`IEnumerable<string>`while`MessageBox.Show()`接受的类型`string`。

所以你需要转换前两秒，例如：

```
string output = String.Join(", ", input)` 
```

将用逗号分隔每个元素。

# html - 从 HTML5 视频中获取原始像素数据

> ID：12130475
> 
> 赞同：18
> 
> 时间：2012-08-26T13:22:57.540
> 
> 标签：html, video, canvas

我想从视频元素中获取原始数据（TypedArray 或其他东西）并使用 JavaScript 操作它们。

目前我创建了一个新的画布，将视频绘制到画布中，然后获取图像数据。

```
ctx.drawImage(myVideo);
var data = ctx.getImageData(0, 0, w, h).data; 
```

它工作正常，但它会消耗 CPU（将视频放到画布上并从画布复制回来）并且会产生大量垃圾（每秒大约 50 MB）。还有其他更简单的解决方案吗？如果我可以将自己的缓冲区传递给 getImageData(...)，那就太好了。

顺便提一句。使用 WebGL 绘制视频并从 GPU 加载回来并没有更快:( [http://jsperf.com/getting-raw-data-from-video](http://jsperf.com/getting-raw-data-from-video)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:59:01.490

请阅读

[https://www.scirra.com/blog/76/how-to-write-low-garbage-real-time-javascript](https://www.scirra.com/blog/76/how-to-write-low-garbage-real-time-javascript)

因为您实际上没有显示任何代码，提及浏览器或提供有关视频的信息（分辨率、FPS、编码），所以无法说明您的代码为何缓慢或为什么它会产生大量垃圾。在某些分辨率限制下，可以使用 Javasrcipt 实现实时视频效果。

这是 Mozilla 使用 .

[https://developer.mozilla.org/samples/video/chroma-key/index.xhtml](https://developer.mozilla.org/samples/video/chroma-key/index.xhtml) [https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Manipulating_video_using_canvas](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Manipulating_video_using_canvas)

如果不首先打开视频帧，您将无法获得对视频数据的任何原始访问`<canvas>`。但是，我相信这个操作应该是硬件加速的，因为它发生在 GPU 内存中。从 GPU 下载像素并在 Javascript 中对其进行操作，然后上传回显存可能是高分辨率的最慢步骤。

优化提示

*   考虑跳帧（以较低的 FPS 处理效果）

*   服务器端 HTML5 视频渲染[在服务器端渲染 HTML5 动画？](https://stackoverflow.com/questions/5805850/rendering-html5-animation-server-side)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-21T20:07:22.533

clearRect() 是我认为你正在寻找的。

据我所知，在画布上上传图像会占用空间，但 clearRect() 会删除画布上的所有内存。

我在 JS 代码上做了什么：

1.  在下面的代码中，我在视频标签上设置了一个流。有关更多网络摄像头信息，请参阅[https://www.kirupa.com/html5/accessing_your_webcam_in_html5.htm](https://www.kirupa.com/html5/accessing_your_webcam_in_html5.htm)。

2.  我设置了一秒的时间间隔（每秒调用一次函数）来清除画布，然后绘制该帧上的流。

3.  现在轮到你了。最小化视频或画布应该对做什么没有影响。现在您可以随时获取网络摄像头或视频上的像素颜色。

这是工作代码：

注意：我发现此示例不适用于内置的 Web 查看器。这个例子需要它自己的网页。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="stuff, to, help, search, engines, not" name="keywords">
<meta content="What this page is about." name="description">
<meta content="Display Webcam Stream" name="title">
<title>Display Webcam Stream</title>

<style>
#container {
    margin: 0px auto;
    width: 500px;
    height: 375px;
    border: 10px #333 solid;
}
#videoElement {
    width: 500px;
    height: 375px;
    background-color: #666;
}
#canvas {
  background-color: #666;
}
</style>
</head>

<body>
    <video autoplay="true" id="videoElement"></video>
    <canvas id="canvas" onclick= canvasOnclick()></canvas>

<script>
var video = document.querySelector("#videoElement");
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
if (navigator.mediaDevices.getUserMedia) {       
    navigator.mediaDevices.getUserMedia({video: true})
  .then(function(stream) {
    video.srcObject = stream;
  })
  .catch(function(err0r) {
    console.log("Something went wrong!");
  });
}

var myVar = setInterval(intervalTimer, 1000);

function intervalTimer() {
  ctx.clearRect(0,0,400,400);
  ctx.drawImage(video,0,0,400,400);

}

//var data = ctx.getImageData(0, 0, w, h).data;
</script>
</body>
</html>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-12T08:17:16.007

`canvas{display:none}`可能有助于减少一些开销。js 仍然可以访问 Canvas。

# apache-kafka - Kafka 准备好用于生产了吗？

> ID：12130481
> 
> 赞同：17
> 
> 时间：2012-08-26T13:24:06.157
> 
> 标签：apache-kafka

我有一个生产应用程序，每天必须处理几 GB 的消息。我非常喜欢 Kafka 的架构和性能；它完全符合我的需求。

我想在某个时候用[Kafka替换我的消息传递层。](https://kafka.apache.org/)0.7.1版本在稳定性和性能一致性方面是否足以满足生产使用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T23:09:07.500

它肯定已经在几家大数据公司中使用，包括创建它（后来开源）的 LinkedIn 和 Tumblr。只有 Tumblr 自己每天处理数 GB 的消息。我敢肯定LinkedIn也在那里。您可以在此处查看当前使用它的已知公司列表：

[https://cwiki.apache.org/confluence/display/KAFKA/Powered+By](https://cwiki.apache.org/confluence/display/KAFKA/Powered+By)

此外，请务必订阅他们的邮件列表，有很多人积极尝试并在生产环境中使用它。

我相信它可以处理你可以扔给它的任何音量。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-10T21:11:32.513

我认为 Kafka 在准备好投入生产之前缺少一个关键功能。

“如果生产者无法到达任何 Kafka 代理，则将消息刷新到磁盘”该问题很久以前就已在此处提交： [https ://issues.apache.org/jira/browse/KAFKA-156](https://issues.apache.org/jira/browse/KAFKA-156)

**当生产者必须始终**能够发送事件时，此功能将使完整的 Kafka 事件管道对于某些用例更加健壮。例如，当您跟踪页面浏览量或点赞按钮点击时，您不想错过任何事件，即使所有 Kafka 代理都无法访问。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-12T07:23:03.273

我必须同意 Dave，Kafka 是一个很好的工具，但是它缺少一些可以手动完成的基本功能，但是你需要考虑 Kafka 提供了什么。一些缺少的东西是：

*   （正如戴夫所说）当生产者无法发送消息时将消息刷新到磁盘
*   消费者能够跟踪哪些消息被处理（不仅仅是消费），哪些没有在重启的情况下。
*   监控 - 一种接收系统中实体当前状态的方法，例如生产者中队列的当前大小或代理处的写入/读取速度（这些可以完成，但不是工具的一部分）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T19:30:34.823

我使用卡夫卡已经有一段时间了。最好使用本机 java 和 python 客户端。

我不得不费力寻找合适的 node.js 客户端。从字面上看，使用不同的客户端多次重写我的整个代码，因为它们有很多错误。最后用[franz-kafka](https://github.com/dannycoates/franz-kafka)解决了 node.js。

除此之外，维护消费者偏移量有点困难。它缺少一些很好的功能，例如基于 AMQP 的 Apache Qpid 或 RabbitMQ 中存在的交换

由于它是分布式的，支持离线消息，性能确实令人印象深刻。我也更喜欢它:)

# javascript - jqGrid 添加绑定特定功能的链接列

> ID：12130483
> 
> 赞同：0
> 
> 时间：2012-08-26T13:24:26.657
> 
> 标签：javascript, jquery, asp.net, jqgrid

我有这个带有 jqGrid 的 ASP.Net 页面，我想要的只是在网格中添加一个链接列，当按下它时，它会执行 JavaScript 功能，比如在页面中打开一个 jQuery 对话框......

我能够使用列格式化程序将第一列更改为链接库，但我无法使链接执行 JavaScript 函数...

我的代码：

```
colModel = [
        { name: 'SR', index: 'SR', width: 90, fixed: true, align: 'center', formatter: 'link', formatoptions: { baseLinkUrl: '#'} },
        { name: 'NextCallBackDate', index: 'NextCallBack', width: 100, fixed: true, align: 'left' }] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:36:54.783

我已经在 PHP 中完成了这个，但它应该可以在任何地方工作。准备数据时，更改列如下：

而不是`field='value'`你可以做`field='<a onclick="foo(this)">value</a>'`

该函数应如下所示：

```
function foo (item){
alert ($(item).html());
} 
```

# asp.net-mvc - 使用 Autofac 注册简单的服务实现

> ID：12130485
> 
> 赞同：1
> 
> 时间：2012-08-26T13:24:32.677
> 
> 标签：asp.net-mvc, asp.net-mvc-3, autofac

这是我的控制器构造函数：

```
 public PostCategoryController(ICategorizationRepository<PostCategory> categorizationRepository,
                                                         IContentRepository<Post> repository, PostUtilityService postUtilityService)
    {
        _repository = repository;
        _categorizationRepository = categorizationRepository;
        _postUtilityService = postUtilityService;
    } 
```

如何`PostUtilityService`使用 Autofac 注册实现？该服务没有接口，它只是一个执行某些操作的类。

我想使用`Register`最简单或性能最好的方法或重载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:35:50.560

使用`AsSelf`扩展方法。

```
builder.RegisterType<PostUtilityService>().AsSelf(); 
```

# java - jni/java：线程安全发布/共享有效的不可变本机对象

> ID：12130487
> 
> 赞同：1
> 
> 时间：2012-08-26T13:24:46.697
> 
> 标签：java, thread-safety, java-native-interface, volatile, memory-fences

1）我有一个本地java函数，它传递几个参数，它的实现是一个本地C++构造函数来创建一个对象并返回一个从指针到对象的long。该对象的构造成员实际上是不可变的。然后，C++ 对象可以根据其构造状态进行工作。

2) 获取函数调用结果的 java 代码在某处安全地发布指针的加长版本（没有互斥体）并更改 volatile 变量以希望将本机 C++ 对象中的内存更改发布到其他线程

现在另一个线程读取 2) 的 volatile 变量，然后获取已发布的 long，并调用另一个本机函数，该函数访问 C++ 内存空间中的有效不可变对象以完成一些工作。

问题：由于 Java 内存模型对 volatile 和栅栏的保证，是否保证其他线程可以看到完全构造的本机对象？我敢打赌，在某些平台上答案是肯定的，但我看到不同的芯片使用栅栏以不同的方式工作，并且想知道所有可以使用 java 的平台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T23:31:16.023

JCIP 的合著者在 JSR 邮件列表中回答了并发问题。

他说：“JMM [不] 保证扩展到 Java 堆之外的任何东西——或者更具体地说，它只适用于 Java 字段”，但“实际上，今天使用的障碍/栅栏是粗粒度的，并且会平等地影响所有内存”，因此“在实践中，这个 [问题中描述的易失性发布尝试] 将正常工作（只要您使用正常的进程内存）”。

邮件列表上的另一位受访者说：“我们中的一些人肯定认为它的目标是确保 Java、C 和 C++ 同步按预期协同工作，Java 同步为 C 或 C++ 变量提供正确的可见性保证，反之亦然”但补充说“没有关于[行为]的书面保证”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T21:49:37.843

Java 甚至不知道您在 C 代码中创建的本机对象的存在，那么它的内存模型怎么可能提供任何关于它的保证呢？Java 所知道的并可以保证其行为的是 volatile long。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T13:31:51.887

您从 java 代码传递到本机代码的内容将被复制并传入本机代码的适当数据类型（例如`C++`，有`unsigned int`while`Java`没有、`null`终止的字符串等）。
之后，任何线程问题都与本机代码的实现有关。
本质上它是同一个 API。API 的合约是什么？它是否指定它可以被多个线程安全访问？

# opencv - Emgu OpenCV 的“cvextern.dll”的源代码在哪里？

> ID：12130491
> 
> 赞同：4
> 
> 时间：2012-08-26T13:25:04.893
> 
> 标签：opencv, computer-vision, emgucv

我在哪里可以找到 Emgu OpenCV 的“cvextern.dll”的源代码？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-20T04:39:48.727

如果你得到完整的源代码，它就在那里。
按照此处的说明进行操作：[http](http://www.emgu.com/wiki/index.php/GIT)
: //www.emgu.com/wiki/index.php/GIT 之后，cvtextern 源应位于名为*Emgu.CV.Extern的根文件夹中*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T11:31:28.943

我在 EmguCV 安装中的文件上运行了[Dependency Walker](http://www.dependencywalker.com/)`cvextern.dll`（对我来说它在目录中`C:\Emgu\emgucv-windows-universal-cuda 2.9.0.1922\bin\x64`），并且`cvextern.dll`似乎是所有 OpenCV DLL 和其他一些 DLL 的打包：

![cvextern.dll 上的 Dependency Walker 的屏幕截图](../Images/b1a1433c7c2b3d599abe97ffaeb5fdb0.png)

OpenCV 的源代码可在此处获得：[https ://github.com/Itseez/opencv](https://github.com/Itseez/opencv)

# python - 等权共享对角协方差的 GMM 聚类算法

> ID：12130497
> 
> 赞同：0
> 
> 时间：2012-08-26T13:25:49.870
> 
> 标签：python, matlab, machine-learning, computer-vision, mixture-model

我正在寻找一种高斯混合模型聚类算法，它允许我设置相等的分量权重和共享对角线协方差。我需要分析一组数据，我没有时间尝试自己编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:06:43.260

在 python 中，您可以使用 scikit 的 GMM。这很容易做到，请参阅文档：

[http://scikit-learn.sourceforge.net/dev/modules/generated/sklearn.mixture.GMM.html](http://scikit-learn.sourceforge.net/dev/modules/generated/sklearn.mixture.GMM.html)

重新满足您的特定需求：

```
thegmm = GMM(cvtype='tied', params='mc')
thegmm.fit(mydata) 
```

意义：

*   共享对角协方差：`covariance_type='tied'`在构造函数中使用
*   相等的组件权重：`params='mc'`在构造函数中使用（而不是`'wmc'`让权重更新的默认值）。

实际上，我不确定“绑定”是否意味着对角协方差。根据文档，您似乎可以选择“并列”或“对角线”，但不能同时选择两者。有人确认吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:37:25.203

看起来[标准的 Matlab GMM](http://www.mathworks.com/help/toolbox/stats/gmdistribution.fit.html)工具可以工作，将`'CovType'`选项设置为对角线并将`'SharedCov'`选项设置为 true

# git - Github README.md 和 readme.md - 如何删除一个？

> ID：12130498
> 
> 赞同：3
> 
> 时间：2012-08-26T13:25:50.727
> 
> 标签：git, github, github-for-mac

不知何故，我最终在 github 上有了 README.md 和 readme.md。现在这两者相互影响，所以我的 GitHub.app 完全混淆了。Github 网站没有任何文件删除功能。

如何删除这些文件之一？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T13:30:12.433

只需删除其中一个文件并提交删除。

```
$ git rm readme.md
$ git commit
$ git push 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-26T13:32:01.603

github 没有删除链接或按钮的原因是因为简单的“删除”违背了源代码控制版本系统的性质。删除文件的方法是在本地删除它，通常使用终端窗口和带有 的命令行`git rm`，提交更改 - 总是带有消息 - 然后将删除“推送”到存储库。如果该文件存在于本地但从未`git add`编辑到 git，您可以只`rm filename`使用该文件 - 但警告，通常在命令行中没有“确认” `rm`！
诚然，github 本可以将所有内容“打包”到一个删除页面链接中，鉴于原因，给出一个文本描述，可以做到这一点，但这将是太多的“黑魔法”，并误导用户学习 git 和如何使用github。

如果你想要一个 gui 选项，那里有很多 git gui 工具。就像你在 Mac 上一样， gitx 、 git-tower 和 source-tree 都是可以提供帮助的工具。[在http://mac.github.com/](http://mac.github.com/)还有基本的 mac-github 工具

ThiefMaster的答案中显示了命令[行路线](https://stackoverflow.com/questions/12130498/github-readme-md-and-readme-md-how-to-delete-one/12130533#12130533)

有关整个 git 过程以及各种命令和概念的更多信息，还可以在以下位置找到：[git branch、fork、fetch、merge、rebase 和 clone，有什么区别？](https://stackoverflow.com/questions/3329943/what-is-the-difference-between-branch-fork-fetch-merge-rebase-and-clone-in-g/9204499#9204499)

# android - Android 中的 WebView 和直接下载支持

> ID：12130499
> 
> 赞同：1
> 
> 时间：2012-08-26T13:25:58.473
> 
> 标签：android, webview, download

我遇到了许多关于`WebView`支持在 Android 中下载文件的未解决问题。

这是简单的代码（整体`MainActivity.java`）`WebView`：

```
package com.webview.downloader;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import com.pad.android.xappad.AdController;

public class MainActivity extends Activity {

    WebView mWeb;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        mWeb = new WebView(this);
        setContentView(mWeb);
        WebSettings settings = mWeb.getSettings();
        settings.setJavaScriptEnabled(true);

        mWeb.setWebViewClient(new WebViewClient() {
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    view.loadUrl(url);
                    return true;
            }
        });
        mWeb.loadUrl("http://www.site-with-direct-links.somehostingsite.com");
    }
} 
```

使用此代码，在打开 URL 并单击链接后，什么也没有发生。

我们需要添加以下代码（就在 之后`mWeb.loadUrl();`）：

```
 mWeb.setDownloadListener(new DownloadListener() {
      public void onDownloadStart(String url, String userAgent,
              String contentDisposition, String mimetype,
              long contentLength) {
        Intent i = new Intent(Intent.ACTION_VIEW);
        i.setData(Uri.parse(url));
        startActivity(i);
      }
  }); 
```

使用此代码，现在我们可以上网并下载文件，例如。点击类似：*[http://www.google.cz](http://www.google.cz)*，`WebView`将用户重定向到该站点，点击：*[http://www.google.cz/download-file.apk](http://www.google.cz/download-file.apk)*，默认浏览器或任何其他浏览器，如谷歌浏览器（选择后）将弹出一小段时间，然后开始下载。

所以我的问题如下：如何在不打开任何浏览器的情况下开始下载文件（ *.zip*、*.rar*、*.apk ）。*

当然，我查看了文档，也搜索了堆栈，但从来没有运气。真实的例子会很好，对我的代码的更改听起来更好！

# security - Facebook 安全画布 URL 绕过

> ID：12130500
> 
> 赞同：1
> 
> 时间：2012-08-26T13:26:09.893
> 
> 标签：security, ssl-certificate, facebook-canvas

我想让我的应用程序公开，但我没有验证 SSL 证书和托管它的唯一 IP。我读到省略 https:// 的更改将在 10 月发布。如何在 10 月更改之前将我的应用程序更改为通过 http 工作？

现在的一般问题是：当我通过 https 进入 facebook 并转到应用程序时，出现关于不信任证书的错误并且未加载应用程序。

如果没有办法避免“迁移”更改，any1 可以告诉我是否有机会在 Heroku 上运行 MySQL 数据库？

# php - 我应该阻止人们同时登录我的网站两次吗？

> ID：12130501
> 
> 赞同：0
> 
> 时间：2012-08-26T13:26:22.330
> 
> 标签：php, cookies, session-cookies

我注意到在社交网站上，您可以同时使用多个浏览器或计算机登录。对于我正在构建的网站，出于安全目的，我计划允许用户一次仅登录一次。这对于一个关于娱乐的网站来说是不是矫枉过正？您认为增加的安全性是否值得烦人在多台计算机之间来回切换的人（比如我）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T13:31:47.833

我希望能够从我想要的任何地方登录，所以如果我切换到另一台计算机，我不会发现我已经注销，因为我在其他地方登录。

如果您希望它是安全的，您可以显示一个警报，说明同一个帐户已从不同的位置登录（第二次登录），甚至可以选择禁用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T13:32:00.250

是的，这是矫枉过正。

很难发现。你会遇到各种各样的问题。由于您要检测用户而不是浏览器，因此 cookie 不可用。会话结束。

您现在可以考虑 IP 地址，但这也有问题。（认为​​多个用户是一个 NAT 框）

如果您决定检查用户是否只能登录一次，并且在注销或超时之前不允许登录；在连接失败的情况下锁定用户。

它也没有任何安全优势。只是很多恼怒的用户。如果用户想要对您的应用程序进行两次会话，就让他拥有它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T13:30:42.400

登录两次有什么额外的好处吗？即有两个入口点的比赛可能是有利的？如果没有，听起来有点矫枉过正，不值得。

现在，防止用户嗅探 cookie 和窃取会话（以及防止它）是一个不同的主题，但我不认为这就是你的意思。

# makumba - 替代 mak:addForm 中的 triggerEvent 属性

> ID：12130504
> 
> 赞同：1
> 
> 时间：2012-08-26T13:26:40.103
> 
> 标签：makumba

根据[文档](http://www.makumba.org/page/Web20HowTo#section-Web20HowTo-Introduction)，triggerEvent 属性可以在 mak:form、mak:newForm 或 mak:editForm 中使用。但是，我想在 mak:addForm 中使用相同的功能，但它似乎不起作用。

是否有其他方法可以在没有此属性的情况下在 mak:addForm 中获取部分重新加载功能？

# javascript - history.length 调整

> ID：12130505
> 
> 赞同：1
> 
> 时间：2012-08-26T13:26:46.107
> 
> 标签：javascript

是否可以调整该`history.length`值，例如将其减一？例如：

```
history.length = history.length - 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:29:43.527

不，`length`是只读的，如 MDN`window.history`页面所述：[https ://developer.mozilla.org/en-US/docs/DOM/window.history](https://developer.mozilla.org/en-US/docs/DOM/window.history)

# android - 如何将图像的填充删除到水平线性布局中？

> ID：12130512
> 
> 赞同：0
> 
> 时间：2012-08-26T13:27:46.757
> 
> 标签：android, android-linearlayout, padding

我正在使用 xml 代码进行水平线性布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="60dip"
    android:orientation="horizontal"
    android:paddingLeft="5dip"
    android:paddingRight="5dip"
    android:layout_alignParentBottom="true"
    android:background="@drawable/back1"
    >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="60dip"
        android:clickable="true"
        android:contentDescription="@string/app_name"
        android:src="@drawable/ca_18"
        android:adjustViewBounds="true"/>
</LinearLayout> 
```

并且 ImageView 有一个填充顶部和底部。如何删除填充？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:56:49.787

Avoid hardcoding the layout_height and layout_width attributes. This may look fine on your device. But may look ugly on another.

# node.js - Restify：传递用户数据

> ID：12130514
> 
> 赞同：2
> 
> 时间：2012-08-26T13:28:00.953
> 
> 标签：node.js, user-data

我正在使用 NodeJS + Restify 编写服务。我已将每个实际服务拆分为单独的文件（我假设每个人都在做什么）。他们都将使用 mysql 数据库，所以我想我可以打开一个数据库连接，每个服务都可以使用这个连接，而不是每次完成请求时都打开连接。

问题是我似乎没有找到传递用户数据的方法。*用户数据*是指服务器回调的每个服务都可以访问的任何自定义数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T19:10:56.560

我主要使用 NodeJS + Express，但是在查看了 Restify 的一些文档后，我相信您可以使用授权解析器（在他们网站上的 Bundled Plugins 下：[单击此处前往那里）](http://mcavage.github.com/node-restify/#Bundled-Plugins)

我认为这将是传递用户数据的最基本方式。我还没有测试过它，但我相信你只需添加它来使用它：

```
server.use(restify.authorizationParser()); 
```

然后，您可以通过以下方式访问用户数据：

```
//This is based on the structure of req.authorization in the documentation.
req.authorization.basic.user 
```

我相信你可以设置新的用户数据（当用户登录时），比如：

```
 req.authorization.id = 'id' 
```

# android - 应用程序如何使用 Android 4+ 的 Google 离线地图？

> ID：12130517
> 
> 赞同：4
> 
> 时间：2012-08-26T13:28:12.373
> 
> 标签：android, google-maps

Android 版本（4+？）引入了离线地图，我可以在手机上选择要缓存的区域，然后谷歌地图下载手机上的地图数据。

当我收到评论时：我想使用我设备上已经存在的数据（如果用户之前已经下载了离线地图使用）。并且不要打开与 Google 服务器的新数据连接（例如，因为会产生数据费用）。

我可以在我的应用程序中使用该地图数据吗？例如，通过向地图应用程序发送一个意图来显示一个区域（可能带有覆盖）？或者甚至在我的应用程序中使用地图小部件？

我不是在谈论从谷歌服务器下载一些图块到我的应用程序中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T14:30:35.980

> 我可以在我的应用程序中使用该地图数据吗？例如，通过向地图应用程序发送一个意图来显示一个区域（可能带有覆盖）？

`ACTION_VIEW`好吧，您可以使用和调用地图应用程序`geo:` `Intent`。这是否会查看某些缓存区域取决于用户使用的地图应用程序以及用户是否缓存了您指定的纬度和经度周围的区域。

> 或者甚至在我的应用程序中使用地图小部件？

虽然您可以将 a 集成`MapView`到您的应用程序中，但它不会使用此缓存数据。部分原因是`MapView`代码早于任何这些缓存内容。部分原因是缓存数据归另一个进程（地图应用程序）所有，因此您无法访问。

# orchardcms - orchard cms：模块包未安装

> ID：12130530
> 
> 赞同：3
> 
> 时间：2012-08-26T13:29:49.043
> 
> 标签：orchardcms

## 设置：

我创建了一个在创建它的解决方案（即果园源代码）中运行良好的模块。然后我使用**package create**将其打包。

编辑：我现在意识到问题在安装 Visual Studio 2012 后立即出现。

## 问题：

如果我现在使用包在不同的应用程序上安装模块并从文件安装，所有警报都显示模块已安装，它出现在功能列表中，它已启用......但没有菜单项，没有条目迁移表，什么都没有。

编辑：日志中没有任何内容。但是，这些文件已正确安装在站点的模块文件夹中。

## 问题：

鉴于模块在创建它的源代码解决方案中工作正常，可能会出现什么问题阻止使用包正确安装模块？

有什么建议么？

编辑：

安装 Visual Studio 2012 对 Orchard 有何影响？

我注意到安装 Visual Studio 2012 会导致同时安装各种位的 sql server 2012。这可能是相关的吗？例如，这就是迁移代码从不运行的原因吗？

## 根据 Bertrand Le Roy 的评论进行编辑（见下面这个问题）：

BertrandLeRoy 说，在 GAC 中安装 ASP.NET MVC 4 以及 Razor 2（两者都随 VS 2012 提供）是问题所在。

他建议升级到 Orchard 1.5.x。

然而：

我尝试使用新安装的 Orchard 1.5.1，但问题是一样的：

1.  使用 VS 2012 和 Orchard 1.5.1 的源代码创建一个新模块，从 VS 运行果园站点时该模块正确显示。

2.  创建一个包，然后将其安装到 Orchard 1.5.1 站点中，例如，使用 WebMatrix，运行然后安装该包具有以下效果：

2.1。仪表板中的警报告诉我该软件包已正确安装。

2.2\. 但是，启用该功能没有任何作用。

2.3\. 这并不奇怪，因为安装包甚至还没有运行迁移。

我能做的最后一个测试是查看包是否在没有安装 asp.net mvc4 的 Web 服务器上运行。完成后我会回帖。

然而，重点是使用 Orchard 1.5.1 会产生完全相同的结果。所以，如果问题真的是机器上有 MVC 4 和 Razor 2，那么 Orchard 1.5.1 并没有解决它。

即，当我在 Web 服务器上安装 mvc 4 时会发生什么，因为我不可避免地必须为其他非 Orchard 应用程序安装 mvc 4？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-19T06:51:24.293

我在 1.8.1 版本上遇到了同样的事情。也就是说，该模块似乎安装得很好，但实际上并没有执行迁移或正确加载。

最初，我在日志中没有看到任何表明存在问题的信息。但是，在调整*/Config/log4net.config*文件以记录`ALL`而不只是`ERROR`消息之后。我懂了：

```
... Orchard.Environment.Extensions.Loaders.PrecompiledExtensionLoader - 
- Extension "Transformalize" will not be loaded as pre-compiled extension 
because one or more referenced extension is dynamically compiled 
```

说我的模块“**不会作为预编译扩展加载，因为一个或多个引用的扩展是动态编译的**”部分似乎解释了为什么我的模块没有加载。因此，我在 Google 上搜索并找到了有关*Orchard 模块加载器和动态编译的*[文档](http://docs.orchardproject.net/Documentation/Orchard-module-loader-and-dynamic-compilation)。凌晨 2 点有点复杂，但我收集到的是我的模块对另一个模块的引用（在这种情况下）导致生产环境中的日志消息（上图）。我删除了我的模块对 的引用和依赖，然后它安装得很好。*`Orchard.Autoroute``Orchard.Autoroute`*

 *该[文档](http://docs.orchardproject.net/Documentation/Orchard-module-loader-and-dynamic-compilation)解释了如何动态编译模块以及*/Config/HostComponents.config*中的设置如何改变事情的工作方式。*

# c++ - 从向量 C++ 中删除特殊对象

> ID：12130531
> 
> 赞同：-3
> 
> 时间：2012-08-26T13:30:01.560
> 
> 标签：c++, vector, erase

我有一个 int 向量

```
vector<int> p; 
```

现在我想删除它等于 3 的项目之一。没有像 p.remove(3) 这样的删除

但有一个擦除，但起初我应该找到它。stackoverflow 中有两个关于此的问题。他们都说我们应该找到它

```
std::remove(p.begin(), p.end(), 3) 
```

但是这段代码没有被编译。它说函数不接受 3 个参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:32:51.290

使用[Erase Remove Idiom](http://en.wikipedia.org/wiki/Erase-remove_idiom)。

```
#include <iostream>
#include <iterator>
#include <algorithm>
#include <vector> 

int main()
{
    using namespace std;
    vector<int> v = {1, 2, 3, 3, 4};

    v.erase(find(begin(v), end(v), 3));  // remove first 3
    // v.erase(remove(begin(v), end(v), 3), end(v));  // remove all 3

    copy(begin(v), end(v), ostream_iterator<int>(cout, " "));
} 
```

Vectors`erase`方法需要一个或两个迭代器。第一个，擦除从指定位置到结束的所有内容。 `std::remove`from`<algorithm>`将所有匹配的元素移动到序列的末尾，并将迭代器返回到新末尾的位置。您可以将此迭代器用于`erase`. 如果要删除第一个匹配元素，请使用`std::find`检索第一个元素的迭代器并将其传递给`erase`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:39:46.483

`remove_if`在下面找到使用`algorithm`

给定一个开始和结束迭代器以及一个谓词，您可以删除任何导致谓词评估为真的元素。我将同时包含 C++03 和 C++11 示例。

C++03：

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <vector>

#include <cstdlib>
#include <ctime>

template <typename T>
struct
is_equal
{
  T val;
  is_equal (const T& v) : val (v) { }
  bool
  operator() (const T& test)
  {
    return (val == test);
  }
};

struct
is_odd
{
  bool
  operator() (int test)
  {
    return (test % 2 == 1);
  }
};

template <typename T>
std::ostream&
operator<< (std::ostream& os, const std::vector <T>& v)
{
  typedef typename std::vector <T>::const_iterator itr;
  for (itr i = v.begin (); i != v.end (); ++i)
    os << *i << " ";
  return os;
}

int
main (int argc, char* argv[])
{
  srand (time (NULL));
  std::vector <int> vec (10);  // vector has size of 10
  std::generate (vec.begin (), vec.end (), rand); // populate with random numbers
  std::cout << vec << std::endl;
  vec.erase (std::remove_if (vec.begin (), vec.end (), is_odd ()), // removes all odd elements
             vec.end ());
  std::cout << vec << std::endl;
  return 0;
} 
```

C++11：

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <numeric>
#include <vector>

#include <cstdlib>

template<typename T>
std::ostream&
operator<< (std::ostream& os, const std::vector <T>& v)
{
  for (auto i : v)
    os << i << " ";
  return os;
}

int
main(int argc, char* argv[])
{
  std::vector <int> vec(10);  // vector has size of 10
  std::iota (vec.begin(), vec.end(), 1); // populate with [1, 2, 3, ...]
  std::cout << vec << std::endl;
  vec.erase (std::remove_if (vec.begin(), vec.end(),
                             [](int i){ return (i == 3); }),
             vec.end ());
  std::cout << vec << std::endl;
  return 0;
} 
```

对于使用 STL 的任何问题，我个人咨询[http://en.cppreference.com/w/](http://en.cppreference.com/w/)和[http://www.cplusplus.com/reference/](http://www.cplusplus.com/reference/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T13:33:24.057

`std::vector::erase`结合使用`std::find`。

您可以在此处查看文档：

*   [http://www.cplusplus.com/reference/stl/vector/erase/](http://www.cplusplus.com/reference/stl/vector/erase/)
*   [http://www.cplusplus.com/reference/algorithm/find/](http://www.cplusplus.com/reference/algorithm/find/)

# c - 调整窗口大小时是否可以完全消除闪烁？

> ID：12130534
> 
> 赞同：10
> 
> 时间：2012-08-26T13:30:18.407
> 
> 标签：c, winapi, double-buffering

通常，即使使用双缓冲，在调整窗口大小时，似乎也不可避免地会发生闪烁。

第一步，原始窗口。

> ![第1步](../Images/b5daecc6b229d325ae29ee4c8c1d6ca0.png)

第 2 步，调整窗口大小，但未绘制额外区域。

> ![第2步](../Images/a7de0381b27d9cb6b309b6827ec26b56.png)

第 3 步，调整窗口大小，并绘制多余的区域。

> ![第 3 步](../Images/0847d6c7d6c20ae19e905231d185cb65.png)

是否有可能以某种方式隐藏 setp 2？我可以在绘画动作完成之前暂停调整大小的过程吗？

这是一个例子：

```
#include <Windows.h>
#include <windowsx.h>
#include <Uxtheme.h>

#pragma comment(lib, "Uxtheme.lib")

LRESULT CALLBACK WindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam);
BOOL MainWindow_OnCreate(HWND hWnd, LPCREATESTRUCT lpCreateStruct);
void MainWindow_OnDestroy(HWND hWnd);
void MainWindow_OnSize(HWND hWnd, UINT state, int cx, int cy);
void MainWindow_OnPaint(HWND hWnd);

int APIENTRY wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPWSTR lpCmdLine, int nCmdShow)
{
  WNDCLASSEX wcex = { 0 };
  HWND hWnd;
  MSG msg;
  BOOL ret;

  wcex.cbSize = sizeof(wcex);
  wcex.lpfnWndProc = WindowProc;
  wcex.hInstance = hInstance;
  wcex.hIcon = (HICON)LoadImage(NULL, IDI_APPLICATION, IMAGE_ICON, 0, 0, LR_SHARED);
  wcex.hCursor = (HCURSOR)LoadImage(NULL, IDC_ARROW, IMAGE_CURSOR, 0, 0, LR_SHARED);
  wcex.lpszClassName = TEXT("MainWindow");
  wcex.hIconSm = wcex.hIcon;

  if (!RegisterClassEx(&wcex))
  {
    return 1;
  }

  hWnd = CreateWindow(wcex.lpszClassName, TEXT("CWin32"), WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, HWND_DESKTOP, NULL, hInstance, NULL);
  if (!hWnd)
  {
    return 1;
  }

  ShowWindow(hWnd, nCmdShow);
  UpdateWindow(hWnd);

  while ((ret = GetMessage(&msg, NULL, 0, 0)) != 0)
  {
    if (ret == -1)
    {
      return 1;
    }
    TranslateMessage(&msg);
    DispatchMessage(&msg);
  }

  return msg.wParam;
}

LRESULT CALLBACK WindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
  switch (uMsg)
  {
    HANDLE_MSG(hWnd, WM_CREATE, MainWindow_OnCreate);
    HANDLE_MSG(hWnd, WM_DESTROY, MainWindow_OnDestroy);
    HANDLE_MSG(hWnd, WM_SIZE, MainWindow_OnSize);
    HANDLE_MSG(hWnd, WM_PAINT, MainWindow_OnPaint);
  default:
    return DefWindowProc(hWnd, uMsg, wParam, lParam);
  }
}

BOOL MainWindow_OnCreate(HWND hWnd, LPCREATESTRUCT lpCreateStruct)
{
  BufferedPaintInit();
  return TRUE;
}

void MainWindow_OnDestroy(HWND hWnd)
{
  BufferedPaintUnInit();
  PostQuitMessage(0);
}

void MainWindow_OnSize(HWND hWnd, UINT state, int cx, int cy)
{
  InvalidateRect(hWnd, NULL, FALSE);
}

void MainWindow_OnPaint(HWND hWnd)
{
  PAINTSTRUCT ps;
  HPAINTBUFFER hpb;
  HDC hdc;

  BeginPaint(hWnd, &ps);
  hpb = BeginBufferedPaint(ps.hdc, &ps.rcPaint, BPBF_COMPATIBLEBITMAP, NULL, &hdc);

  FillRect(hdc, &ps.rcPaint, GetStockBrush(DKGRAY_BRUSH));
  Sleep(320); // This simulates some slow drawing actions.

  EndBufferedPaint(hpb, TRUE);
  EndPaint(hWnd, &ps);
} 
```

是否可以消除闪烁？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T13:57:08.383

在拖动操作期间更新窗口时，操作系统必须在扩展窗口区域中显示*某些内容。*如果您无法提供任何内容，那么它将显示背景，直到您提供为止。由于您没有指定任何背景，因此您会变黑。当然，您应该指定背景画笔？只需将以下内容添加到您的代码中，就可以使行为更加可口：

```
wcex.hbrBackground = GetStockBrush(DKGRAY_BRUSH); 
```

但是，如果您需要 320 毫秒的时间来响应 a ，`WM_PAINT`那么您会破坏用户调整大小的 UI。它变得生涩和反应迟钝。该系统的设计假设是您可以足够快地绘制窗口以使拖动感觉平滑。解决问题的正确方法是`WM_PAINT`在合理的时间内运行。

如果你真的不能实现足够快的绘画来平滑拖动，那么我建议几个替代方案：

1.  在拖动过程中禁用窗口更新。我确信这可以为单个窗口完成，但我不记得如何从头顶上做到这一点。
2.  在调整大小/拖动处于活动状态时绘制假的东西，并将真实的绘画推迟到调整大小/拖动完成时。倾听`WM_ENTERSIZEMOVE`和`WM_EXITSIZEMOVE`是关键。此 Microsoft 示例程序说明了如何执行此操作：[https ://github.com/microsoft/Windows-classic-samples/blob/master/Samples/Win7Samples/winui/fulldrag/](https://github.com/microsoft/Windows-classic-samples/blob/master/Samples/Win7Samples/winui/fulldrag/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T13:35:09.323

使用`WM_SIZING`代替`WM_SIZE`并且不要忘记`WM_ERASEBKGND`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-30T22:54:48.430

如果您进入“**系统属性**”控制面板小程序，选择“**高级**”选项卡，然后单击“**性能”**组框中的**“设置...** ”，您将看到一个名为**“拖动时显示窗口内容”**的复选框设置。如果您取消选中该选项并尝试调整窗口大小，您将看到只有窗口框架移动，直到您完成拖动操作，然后窗口仅以新大小重新绘制一次。当我们拥有缓慢而笨拙的计算机时，这就是窗口大小的工作方式。

 ****现在我们真的不想全局更改设置（您可以通过使用 SPI_SETDRAGFULLWINDOWS 调用[SystemParametersInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx)来完成，但不要真的这样做，因为您的用户不会喜欢它）。

当用户抓住调整大小边框时，线程进入了由窗口管理器控制的模态循环。您的窗口将在该循环开始时获得[WM_ENTERSIZEMOVE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632622%28v=vs.85%29.aspx)，在操作完成时获得[WM_EXITSIZEMOVE 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632623%28v=vs.85%29.aspx)在某些时候，您还会得到一个 WM_GETMINMAXINFO，它可能与您需要做的事情无关。当用户拖动尺寸调整框时，您还将快速收到[WM_SIZING](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632647%28v=vs.85%29.aspx)、[WM_SIZE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632646%28v=vs.85%29.aspx)消息（并且快速的 WM_SIZE 通常会导致[WM_PAINT](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213%28v=vs.85%29.aspx)）。

全局**“拖动时显示窗口内容**”设置负责获取快速 WM_SIZE 消息。如果该设置关闭，则在一切结束时您只会收到一条 WM_SIZE 消息。

如果您的窗口很复杂，您可能在 WM_SIZE 处理程序中有布局代码计算内容（可能还有移动子窗口），在 WM_PAINT 处理程序中有很多绘画代码。如果所有代码都太慢（正如您的示例 320 毫秒延迟所暗示的那样），那么您将获得闪烁、生涩的体验。

我们真的不想更改全局设置，但它确实激发了您的问题的解决方案：

> 在调整大小操作期间进行更简单的绘图，然后在操作结束时只进行一次（较慢的）复杂绘图。

解决方案：

1.  当您看到 WM_ENTERSIZEMOVE 时设置一个标志。
2.  更改您的 WM_SIZE 处理程序以检查标志，如果已设置，则不执行任何操作。
3.  更改您的 WM_PAINT 处理程序以检查标志，并在已设置的情况下以纯色简单、快速地填充窗口。
4.  当您看到 WM_EXITSIZEMOVE 时清除该标志，然后触发您的布局代码并使您的窗口无效，以便根据最终大小更新所有内容。

如果您的慢速窗口是子窗口而不是应用程序的顶级窗口，则您必须在顶级窗口获取 WM_ENTERSIZEMOVE 和 WM_EXITSIZEMOVE 时向子窗口发出信号，以实现步骤 1 和 4。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-14T22:21:12.267

是的，您可以完全删除闪烁 :)

您可以在一个线程中处理所有窗口消息，并在另一个线程中绘制其上下文。您的窗口始终保持响应。效果很好，无法理解为什么这不是最佳实践。

例如，如果您绑定 Direct3D 上下文，它可以在调整大小时立即缩放，完全无需更新上下文！

我的代码如下所示：

```
int WINAPI wWinMain( HINSTANCE a_hInstance, HINSTANCE a_hPrevInstance, LPWSTR a_lpCmdLine, int a_nCmdShow )
{
    Win32WindowRunnable* runnableWindow=new Win32WindowRunnable(a_hInstance, a_nCmdShow);
    IThread* threadWindow=new Win32Thread(runnableWindow);
    threadWindow->start();

    Scene1* scene=new Scene1(runnableWindow->waitForWindowHandle());
    IThread* threadRender=new Win32Thread(scene);
    threadRender->start();

    threadWindow->join();
    threadRender->pause();
    threadRender->kill();

    delete runnableWindow;
    return 0;
} 
```

完整源代码示例： [https ://github.com/TheWhiteAmbit/TheWhiteAmbit/blob/master/Win32App/Win32Main.cpp](https://github.com/TheWhiteAmbit/TheWhiteAmbit/blob/master/Win32App/Win32Main.cpp)****

# jquery - 使用带有 angularjs 和 jquery mobile 的翻转切换开关

> ID：12130537
> 
> 赞同：0
> 
> 时间：2012-08-26T13:31:18.777
> 
> 标签：jquery, mobile, angularjs

如何在 AngularJS 和 jQuery Mobile 中使用翻转切换开关？

以下代码段包含一个不被 angular 选中的翻转切换开关和一个被 angular 检查的注释复选框：

```
<div data-role="content">
  <ul id="pumps" data-role="listview">
    <li ng-repeat="pump in fleetManager.pumps"
      ngm-click="fleetManager.toggleBuzzer(pump)"><span>{{pump.sn}}</span>
      <span>
        <!-- FIXME: does not select the marked option -->
        <select data-role="slider">
          <option value="silent">Silent</option>
          <option value="beeping" ng-selected="pump.status!=0">Beeping</option>
        </select>
        <!-- NOTE: this one works as expected -->
        <!--input type="checkbox" ng-checked="pump.status!=0"-->
    </span></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:04:58.363

向标签添加`ng-model`属性使其工作：`<select>`

```
<select data-role="slider" ng-model="somemodel">
    <option value="silent">Silent</option>
    <option value="beeping" ng-selected="true">Beeping</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:39:43.237

发现控件在列表视图中没有很好地集成。改变了设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T08:10:01.060

我开发了一个开源指令（引导程序）。您可以使用它来执行此操作，请参阅文档：[https](https://github.com/timactive/angularjs/tree/master/directive/ng-switch-toggle) ://github.com/timactive/angularjs/tree/master/directive/ng-switch-toggle 您可以查看示例： http: [//plnkr.co/Qo7QtmFbrEsCbEOauDvY](http://plnkr.co/Qo7QtmFbrEsCbEOauDvY)。

# symfony - 如何动态调用树枝过滤器

> ID：12130540
> 
> 赞同：1
> 
> 时间：2012-08-26T13:31:33.740
> 
> 标签：symfony, twig

我需要使用特定于每种数据类型的过滤器来呈现具有未知类型的数据：

渲染的结构看起来像：

```
array(
    "value"  => "value-to-render",
    "filter" => "filter-to-apply",
)

{% for item in items %}
    {{ item.value|item.filter|raw}}
{% endfor %} 
```

所以**我的问题是**：如何让 twig 使用 item.filter 作为值的过滤器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T13:41:10.943

您必须编写过滤器，它将通过将名称传递给过滤器来调用过滤器。

如何最初为您编写扩展程序，您可以[在此处](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)阅读。

假设您已经创建了您的扩展，您已经定义了您的自定义函数，（例如，`customFilter`）。

```
//YourTwigFilterExtension.php

public function getFunctions()
{
    return array(
        ...
        'custom_filter' => new \Twig_Function_Method($this, 'customFilter'),
    );
} 
```

然后，你必须定义这个函数

```
public function customFilter($context, $filterName)
{
    // handle parameters here, by calling the 
    // appropriate filter and pass $context there
} 
```

完成此操作后，您将能够调用 Twig：

```
{% for item in items %}
    {{ custom_filter(item.value, item.filter)|raw  }}
{% endfor %} 
```

或者，如果您将过滤器定义为过滤器（而不是函数）：

```
{% for item in items %}
    {{ item.value|custom_filter(item.filter)|raw  }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-17T19:19:18.380

这个 Twig 扩展对我有用：

```
<?php

namespace YourNamespace\YourBundle\Twig;

use \Twig_Extension;
use \Twig_SimpleFilter;
use \Twig_Environment;

class ApplyFilterExtension extends Twig_Extension
{
    /**
     * Returns the name of the extension.
     *
     * @return string The extension name
     */
    public function getName()
    {
        return 'apply_filter_twig_extension';
    }

    public function getFilters()
    {
        return array(
            new Twig_SimpleFilter('apply_filter', array($this, 'applyFilter'), [
                    'needs_environment' => true,
                ]
            ));
    }

    public function applyFilter(Twig_Environment $env, $value, $filterName)
    {
        $twigFilter = $env->getFilter($filterName);

        if (!$twigFilter) {
            return $value;
        }

        return call_user_func($twigFilter->getCallable(), $value);
    }
} 
```

然后在您的模板中：

```
{% for item in items %}
    {{ item.value|apply_filter(item.filter)|raw}}
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:21:50.723

这个问题与我的一个问题直接相关：

[在变量中显示变量](https://stackoverflow.com/questions/9314625/show-variable-inside-variable)

答案是您需要一种尚不存在（但很快）的“评估”方法。但是您也可以创建自己的函数，就像@thecatontheflat 提到的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-12T13:24:17.077

我刚刚为此创建了一个 Symfony Bundle：

看看这里：[https ://github.com/marcj/twig-apply_filter-bundle](https://github.com/marcj/twig-apply_filter-bundle)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-08T11:02:55.073

这是 dossorio 答案的扩展，它允许链接多个过滤器以及在需要时将额外的参数传递给过滤器：

```
class applyFiltersExtension extends Twig_Extension
{
    /**
     * Returns the name of the extension.
     *
     * @return string The extension name
     */
    public function getName()
    {
        return 'apply_filters_twig_extension';
    }

    public function getFilters()
    {
        return [
            new Twig_SimpleFilter('apply_filters', [$this, 'applyFilters'], [
                    'needs_environment' => true,
                ]
            )];
    }

    public function applyFilters(Twig_Environment $env, $value, array $filters = null)
    {
        if (empty($filters)) {
            return $value;
        }

        foreach ($filters as $filter) {
            if (is_array($filter)) {
                $filter_name = array_shift($filter);
                $params      = array_merge([$env, $value], $filter);
            } else {
                $filter_name = $filter;
                $params      = [$env, $value];
            }
            $twigFilter = $env->getFilter($filter_name);
            if (empty($twigFilter)) {
                continue;
            }

            $value = call_user_func_array($twigFilter->getCallable(), $params);
        }

        return $value;
    }
} 
```

.

# jquery - jQuery点击类事件触发多次点击

> ID：12130543
> 
> 赞同：1
> 
> 时间：2012-08-26T13:31:51.530
> 
> 标签：jquery

我有许多带有“更多信息”类的图像项，它们应该响应单击事件并将 ajax 内容加载到 div，但是这是第一次找到，但是当我第二次单击任何其他图像时，它第三次触发 2 次点击它触发 3 次点击，依此类推。

这是html：

```
<div id="test" style="display:none"></div>

<div class="image-item">
    <img class="more-info" src="/site/uploads/documents/_thumb01.jpg"  path="/site/auto/1" />
</div>
<div class="image-item">
    <img class="more-info" src="/site/uploads/documents/_thumb02.jpg" path="/site/auto/2" />
</div>
<div class="image-item">
    <img class="more-info" src="/site/uploads/documents/_thumb03.jpg" path="/site/auto/4" />
</div> 
```

和 ajax 处理程序：

```
 $(function () {  
    $('.more-info').click(function(event) { 
            event.preventDefault()

            url = $(this).attr('path');
                $('#test').load(url, function(){
                alert('loaded: '+ url)
            })
    })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:39:04.780

我认为您正在再次加载整个 html 页面，包括 javascript。因此，对于每次单击，您都会添加另一个事件处理程序。

因此，您只能加载页面的特定部分，而不是加载整个页面：

```
$('#test').load(url + ' #somediv', function(){ 
```

请参阅文档中的[jQuery 加载示例](http://api.jquery.com/load/#loading-page-fragments)。

或者你应该确保请求的结果只包含你需要的部分。

最后一种可能的解决方案是`.unbind()`加载内容之前的事件：

```
$(function () {  
    $('.more-info').click(function(event) { 
        event.preventDefault();

        // for caching the element, because it will be referenced twice
        var $elem = $(this);

        url = $elem.attr('path');

        $elem.unbind('click');
        $('#test').load(url, function() {
            // used console.log which is cleaner imho
            console.log('loaded: '+ url);
        });
    });
}); 
```

# ef-code-first - EF Code First，无 edmmetadata 表

> ID：12130546
> 
> 赞同：4
> 
> 时间：2012-08-26T13:32:47.377
> 
> 标签：ef-code-first

我正在阅读 Julie Lerman 的《EF Code First》一书。在本书中，创建了一个数据库，其中包含从域模型生成的表，以及一个名为 edmmetadatatable 的表。显然，需要此表来检查是否对其他表进行了任何更改。

但是，我没有。我不知道如何得到它。

我所做的与本书不同的一件事是我添加了自己的连接字符串，因为代码首先默认为 SQLEXPRESS，而我没有 SQLEXPRESS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T13:45:10.187

这本书涵盖了使用该`EdmMetadata`表的实体框架 4.2。在 EF 4.3 中引入迁移时，引入了一个`__MigrationHistory`表。

请参阅[此处](http://blog.oneunicorn.com/2012/01/13/ef-4-3-beta-1-what-happened-to-that-edmmetadata-table/)了解更多信息。

# java - 如何在 Java 中以编程方式将 cp1251 转换为 utf-8？

> ID：12130553
> 
> 赞同：-2
> 
> 时间：2012-08-26T13:34:14.350
> 
> 标签：java, cp1251

> **可能重复：**
> [java中的编码转换](https://stackoverflow.com/questions/229015/encoding-conversion-in-java)

实际上，我需要一个示例，方法可以将 Java 中的 cp1251 编码转换为 utf-8。例如，我在 PHP 中对这个问题并不头疼，因为：

```
iconv($str, "cp1251", "utf-8"); 
```

所以，可能有人有用Java制作这些东西的经验，请帮忙。提前谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T13:36:29.730

与 PHP 不同，Java 中的字符串没有固有的字节级编码。它们是原生 UTF-16 字符串。因此，如果您想要重新编码文件，只需使用一种编码读取它并使用另一种编码写入。签出`InputStreamReader`和`OutputStreamWriter`。

# jsf - 检索 SelectOneMenu 列表中所选项目的值

> ID：12130559
> 
> 赞同：0
> 
> 时间：2012-08-26T13:35:25.190
> 
> 标签：jsf, jsf-2, converter, selectonemenu

我只想在 SelectOneMenu 列表中检索所选用户的登录名，这是代码：

**我的 xhtml 页面：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"      
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>JSF 2.0 Test</title>
</h:head>
<h:body>
    <h3>JSF 2.0 Test</h3>
    <h:form>

    <br></br>
 <p:commandButton id="modalDialogButton" value="Modal" onclick="dlg2.show();"  
     type="button"/>  
<p:dialog id="modalDialog" header="Modal Dialog" widgetVar="dlg2" modal="true" 
     height="100">  
     <h:outputText value="This is a Modal Dialog." />  

      <p:selectOneMenu value="#{adminMB.selectedUser}" converter="userConverter" 
       effect="fade">  
            <f:selectItem itemLabel="Choose Administor" />  
            <f:selectItems value="#{adminMB.users}" var="user" itemValue="#{user}" 
            itemLabel="#{user.userLogin}" />  
       </p:selectOneMenu>  

      <p:commandButton id="Add"  value=" Add "  actionListener="#  
      {adminMB.createProject}"></p:commandButton>

        </p:dialog>  

    </h:form>
</h:body>
 </html> 
```

**adminMB.createProject 方法：**

```
 public void createProject(ActionEvent actionEvent){

  System.err.println("created project admin login :"+this.selectedUser.getUserLogin());
                                               } 
```

**用户转换器类：**

```
 package tn.talan.testFramework.converter;

 import java.util.ArrayList;
 import javax.faces.component.UIComponent;
 import javax.faces.context.FacesContext;
 import javax.faces.convert.Converter;
 import javax.faces.convert.FacesConverter;

 import org.objectweb.salome_tmf.data.User;
 import org.objectweb.salome_tmf.ihm.admin.AdministrationFinal;

 import tn.talan.testFramework.managedBean.AdminMB;

 @FacesConverter (value="userConverter")//(forClass= AdminMB.class)

 public class UserConverter implements Converter {

@Override public Object getAsObject(FacesContext context, UIComponent component, 
    String value) {

    User selectedUser = null;
    ArrayList<User>  usersList;
    String userLogin;
    AdministrationFinal  administration=new AdministrationFinal();
    administration.onInit();
    usersList = administration.getAllUsers();
    if (usersList!=null){
    for(int i=0 ;i<usersList.size();i++)
    {   selectedUser=usersList.get(i);
        userLogin=selectedUser.getLoginFromModel();

    System.err.println(userLogin);
    if  (userLogin==value)
        return userLogin;
    }
    }
    return null;
}

 @Override
 public String getAsString(FacesContext context, UIComponent component, Object  value)    
     {
     if (value == null) return ""; 
     return ((User) value).getUserLogin();

 }

   } 
```

因此，当我单击“添加”按钮时，将调用 AdminMB Bean 的 createProject 方法，并且出现此错误：

**错误输出：**

```
26 août 2012 13:58:52 javax.faces.event.MethodExpressionActionListener processAction
GRAVE: Réception de 'java.lang.NullPointerException' lors de l'invocation du listener d'action '#{adminMB.createProject}' du composant 'Add'
26 août 2012 13:58:52 javax.faces.event.MethodExpressionActionListener processAction
GRAVE: java.lang.NullPointerException
    at tn.talan.testFramework.managedBean.AdminMB.createProject(AdminMB.java:205)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:102)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:144)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:84)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:773)
    at javax.faces.component.UICommand.broadcast(UICommand.java:296)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:790)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1255)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:334)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

26 août 2012 13:58:52 com.sun.faces.context.AjaxExceptionHandlerImpl log
GRAVE: JSF1073 : javax.faces.event.AbortProcessingException intercepté durant le traitement de INVOKE_APPLICATION 5 : UIComponent-ClientId=j_idt8:Add, Message=/primeFacesDialog.xhtml @31,97 actionListener="#{adminMB.createProject}": java.lang.NullPointerException
26 août 2012 13:58:52 com.sun.faces.context.AjaxExceptionHandlerImpl log
GRAVE: /primeFacesDialog.xhtml @31,97 actionListener="#{adminMB.createProject}": java.lang.NullPointerException
javax.faces.event.AbortProcessingException: /primeFacesDialog.xhtml @31,97 actionListener="#{adminMB.createProject}": java.lang.NullPointerException
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:178)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:84)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:773)
    at javax.faces.component.UICommand.broadcast(UICommand.java:296)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:790)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1255)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:334)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:47:17.350

替换`public void createProject(ActionEvent actionEvent){`为

```
public void createProject(){
    System.out.println(selectedUser});
} 
```

并添加`process="modalDialog"`到您的按钮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:53:17.203

如果正如您在上面的对话中所暗示的那样，所选值已成功转换，则下一个可用的罪魁祸首是您的托管 bean。具体来说，托管 bean 的范围。如果您使用的是`@RequestScoped`bean，那么您肯定会遇到这样的问题。把你的 bean 改成 a`@ViewScoped`看看会发生什么

# ios - 带有子实体的 NSFetchRequest - 在子实体中搜索

> ID：12130561
> 
> 赞同：0
> 
> 时间：2012-08-26T13:35:53.040
> 
> 标签：ios, search, core-data, nspredicate, nsfetchrequest

我试图弄清楚是否可以使用相同的获取请求对我的数据模型进行两种搜索，但根据搜索输入是字母还是数字使用不同的谓词。

所以我有一个联系人实体和一个电话实体。联系人有一个电话号码列表（工作、手机等）。所以我想要做的是有一个获取请求，其中包括我认为会带回联系人及其电话号码列表的子实体？然后根据用户输入的是字母还是数字，搜索联系人姓名或电话号码。我不确定如何在谓词中执行后一部分，或者如果它甚至可能，因为它是一个数字列表而不仅仅是一个（否则我认为我可以做'contact.number'）。

如果不可能，我不确定还能尝试什么。我使用联系人姓名显示结果。因此，如果我对电话场景有完全不同的获取请求，我可以取回所有电话号码 - 但是我必须进行第二次获取以获取与这些电话号码相关联的所有联系人，以便能够显示结果的名称？这似乎真的很慢。我有 40k 联系人.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:18:38.300

以下关于“联系人”的谓词可用于获取电话号码以给定前缀开头的所有联系人：

```
[NSPredicate predicateWithFormat:@"ANY phoneNumbers.number BEGINSWITH %@", numberPrefix]; 
```

# android - Android：检测点击操作栏中的禁用项目？

> ID：12130563
> 
> 赞同：0
> 
> 时间：2012-08-26T13:36:14.190
> 
> 标签：android, android-actionbar

我根据是否允许操作禁用/启用操作栏上的操作项（用图标表示，不在溢出菜单中）。当用户点击禁用的操作项图标时，我想添加一个 Toast 以告知为什么禁用它。是否可以检测到对操作栏中禁用项目的点击？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:45:36.520

不，因为它被禁用了。您的替代方法是启用操作项，但更改图标而不是启用/禁用，以便您在所有情况下都可以控制。从可访问性的角度来看，这并不是最好的（那些看不到您的图标的人不一定会意识到它已“禁用”）。

# android - java.net.UnknownHostException：无法解析主机

> ID：12130571
> 
> 赞同：0
> 
> 时间：2012-08-26T13:37:09.543
> 
> 标签：android

我知道有很多关于这个异常的问题，但我仍然找不到这个异常的主要原因

它属于以下行：

```
HttpResponse httpResponse = httpClient.execute(httpPost); 
```

这是我试图从网络获取 XML 的时候。xml 来自银行，所以它是免费的，我之前使用过它（Java swing）。现在在 ANDROID 中它抛出了这个异常，我真的不知道为什么。

*   应用程序清单中有 Internet 权限。
*   我看到问题可能出在模拟器中 - 重新启动没有帮助，在我的设备中它是相同的行为。
*   完整的异常错误是：

    `java.net.UnknownHostException: Unable to resolve host "<url>: No address
    associated with hostname`

xml 位置位于[http://www.bankisrael.gov.il/currency.xml](http://www.bankisrael.gov.il/currency.xml)

如果有人建议我该怎么做以及是否有任何解决方法，我将不胜感激。

谢谢，乌迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-22T10:34:42.140

我遇到了同样的问题。，在模拟器 HttpResponse 工作。当我执行kindle fire device时。HttpResponse 无效。添加权限后，它的工作。

请确保您已添加清单文件的权限。

**`<uses-permission android:name="android.permission.INTERNET" />`**

# c++ - 寻找时间序列数据的 C++ 数据仓库

> ID：12130573
> 
> 赞同：0
> 
> 时间：2012-08-26T13:37:23.113
> 
> 标签：c++, database, time-series, data-warehouse

我需要一个可以按需存储和检索时间序列以流式传输到客户端前端的 C++ 库。我会将每个组件存储为数组格式的结构。我目前正在使用 MySQL 来确保正确性，但是数据库访问开始变得异常缓慢。我正在尝试摆脱这种情况。直觉上我可以构建这样一个库，但这不是我的业务目标，需要大量的实现才能开始工作。我正在寻找可以满足以下要求的现有解决方案：

*   O(1) 查找方案
*   出色的压缩性，每个组件都是分开的，所以应该有很多可以去除的冗余
*   可扩展至 TB
*   （可选：审计跟踪）

最重要的：交易支持。将会有大数据，我不可能有一个糟糕的运行损坏整个数据集，这将为备份和恢复期间的停机时间造成不必要的负担。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:36:32.670

看看 Benoit Sigoure 在 StumbleUpon 开发的 OpenTSDB：http: [//opentsdb.net/](http://opentsdb.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:49:03.980

还可以查看 TempoDB：[http](http://tempo-db.com) ://tempo-db.com 我是联合创始人，我们构建了服务来解决这个问题。我们还没有 C++ 客户端，但可以与您合作开发一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:32:37.287

[TeaFiles](http://www.discretelogics.com/TeaFiles)在平面文件中提供简单高效的时间序列存储，并丰富了项目元数据和描述。它们可能是您目标系统的构建块。[目前存在用于C++ (github.com/discretelogics/TeaFiles)、C#](http://github.com/discretelogics/TeaFiles)和 Python的免费开源库。

我是离散逻辑的创始人，我们创造了这种文件格式来克服 litations 平面文件时间序列存储，同时保持其无与伦比的速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T00:12:07.577

看看[HDF5](http://www.hdfgroup.org/HDF5/)。它具有快速查找方案，具有 C、C++、Python 接口。有压缩。可以变大。维护元数据。不做审计。您需要一个包装器来处理多用户功能。

# mongodb - 我对 NoSQL 的一些不理解（M:N 关系）

> ID：12130575
> 
> 赞同：4
> 
> 时间：2012-08-26T13:37:26.810
> 
> 标签：mongodb, many-to-many, nosql

我承认……谈到 NoSQL 世界，我缺乏很多理论概念。

我正在考虑将一些使用 Java+MySQL 的简单应用程序移植到 NodeJS+MongoDB（我发现 mongoose ORM 看起来真的很酷）。

我发现真正困难且记录较少的第一件事是映射多对多关系。

我首先阅读了 Mongo-DOCS：[http ://www.mongodb.org/display/DOCS/Schema+Design](http://www.mongodb.org/display/DOCS/Schema+Design)

...然后潜伏在一些真实世界的信息中，我发现了很多这样的问答：[在 Mongo 中对多对多连接建模数据？](https://stackoverflow.com/questions/9720464/modeling-data-on-a-many-to-many-join-in-mongo)

有办法实现 M:N，太酷了！但后来我读到一些让我感到害怕和失望的东西：“*老实说，如果你发现自己需要连接，我会选择关系数据库。* ”

好的！我明白了，但是....想象我有常见的 User + Roles + UserRoles 多对多模式，我使用**embedding**，我的意思是，我不使用另一个表模式作为角色，我只使用 User 和 all其中的角色数据

我需要：

*   查询数据库中的所有用户，也读取他们的角色数据；
*   查询数据库中刚刚可用的所有角色，例如，用于选择在用户创建中关联的角色；

第一点是微不足道的，但第二点呢？

您会告诉我，我需要另一个表模式“角色”并将角色数组存储在“用户”中，其中包含角色的 ID，但是您会告诉我这是一个关系世界！

你是在告诉我它不适合 NoSQL 数据库吗？那么会是**什么**呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:28:55.293

## 您可能需要对数据进行非规范化。

正确的方法是**查看您的用例并相应地设计您的数据库**。
这意味着您将不得不考虑使用场景。

## 用户/角色示例

让我们考虑一下用例。

*   快速判断用户属于什么角色
*   查询所有角色，以便在创建或编辑用户时为用户选择角色。

我会这样做：

*   像现在一样将角色存储在用户上
*   还将所有角色存储在单独的集合中

这将正确满足所有要求。
显然，由于非规范化，您在更新/重命名角色时需要特别小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:51:28.160

您的选择是：

*   非规范化您的数据
*   执行多个查询
*   使用 MongoDB 聚合框架（如果在此处适用）
*   不要使用 MongoDB

做出你的选择...

# ruby-on-rails - NoMethodError: 未定义的方法 `bytesize' 用于# 我正在尝试调用我的自定义 api，它使用回形针上传文件，它在本地使用https://github.com/jwagener/httmultiparty可以正常工作，但是当我尝试调用 api 并为 heroku 部署的应用程序上传 问问题 问问题 2012-08-26T13:37:30.807 2150 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在尝试调用我的自定义 api，它使用回形针上传文件，它在本地使用https://github.com/jwagener/httmultiparty可以正常工作，但是当我尝试调用 api 并为 heroku 部署的应用程序上传文件时，出现以下错误发生。 NoMethodError: undefined method `bytesize' for # <array:0x00000006e71980>from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:1735:in `send_request_with_body' from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:1724:in `exec' from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:1189:in `transport_request' from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:1177:in `request' from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/rest-client-1.6.7/lib/restclient/net_http_ext.rb:51:in `request' from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:1170:in `block in request' from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:627:in `start' from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:1168:in `request' from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/rest-client-1.6.7/lib/restclient/net_http_ext.rb:51:in `request' from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/httparty-0.8.3/lib/httparty/request.rb:76:in `perform' from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/httparty-0.8.3/lib/httparty/request.rb:208:in `handle_response' from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/httparty-0.8.3/lib/httparty/request.rb:90:in `perform' from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/httparty-0.8.3/lib/httparty.rb:400:in `perform_request' from /home/umair/Projects/core/lib/httmultiparty.rb:81:in `post' from (irb):5 from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/railties-3.0.7/lib/rails/commands/console.rb:44:in `start' from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/railties-3.0.7/lib/rails/commands/console.rb:8:in `start' from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/railties-3.0.7/lib/rails/commands.rb:23:in `<top (required)="">' 我在 ruby 控制台上运行它来测试文件上传 api。 HttpClient.post('/storage.xml',:basic_auth=> {:username=>'badde88248834bec759d94563f102d52e19702fa',:password=>'b890b48e2769192372bf531fc46827cd86bea23f'} ,:query => {:auth_token=> '1045aa26cda23f5f3aec737a45e7ba0017c1a7cf',:user_file => File.new( '/home/umair/Login.png')}) three.js：将坐标从相机空间转换到场景空间 我试图相对于相机放置一个立方体，而不是相对于场景。问题是，要将它放置在场景中（我必须让它显示），我必须知道对应于立方体相机空间坐标的场景坐标。我在 THREE.Camera 中找到了这个函数“projectionMatrixInverse”。它有一个很好的函数，叫做“multiplyVector3”，我希望它能让我将向量 (1,1,1) 转换回场景空间，如下所示： var camera, myvec, multvec; // (and others) camera = new THREE.OrthographicCamera( window.innerWidth / - 2, window.innerWidth / 2, window.innerHeight / 2, window.innerHeight / - 2, - 2000, 1000 ); camera.position.x = 200; camera.position.y = 100; camera.position.z = 200; myvec = new THREE.Vector3(1,1,1); console.log("myvec: ", myvec); multvec = camera.projectionMatrixInverse.multiplyVector3(THREE.Vector3(1,1,1)); console.log("multvec: ", multvec); 问题是，在控制台上我得到： myvec: Object { x=1, y=1, z=1} TypeError: v is undefined var vx = v.x, vy = v.y, vz = v.z; multiplyVector3 根本不接受 my myvec，或者说它是未定义的，即使控制台说它是一个对象。我不明白。 ruby-on-railsruby-on-rails-3file-uploadheroku 4 1 回答 1 This answer is useful 0 我遇到了同样的问题，找不到解决方案。现在我正在这样做，它只需要multipart-post宝石。 class Client require 'net/http/post/multipart' def self.perform inputurl, file url = URI.parse(inputurl) File.open(file) do |transfile| Net::HTTP.start(url.host, url.port) do |http| req = Net::HTTP::Post::Multipart.new( url.path, file1: UploadIO.new(transfile, "multipart/formdata", File.basename(file)), ) response = http.request(req) end end end end 于 2013-03-22T19:41:02.663 回答 Related 2 html - 具有灵活左右宽度的居中导航 - 百分比填充不起作用 4 html - 将 html 表格中的 8 列固定为 100% 宽度 2 callback - 如何在无限滚动中获取我的 Tumblr 帖子的索引号 2 vb.net - Visual Basic 如何从逗号分隔的文件而不是数据库中添加 Destinct 组合框？ 1 rally - 在 Rally 中为每次迭代的测试用例创建报告 1 javascript - AngularJS 模块配置 1 sql - Powershell - 用户映射 SQL Server 2012 4 jquery - 在悬停时更改图像但不更改图像位置 0 jquery - jQuery限制勾选复选框的数量 2 php - 使用 jQuery 的 AddToHomescreen AddClass Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</top></array:0x00000006e71980>

> ID：12130576
> 
> 赞同：3
> 
> 时间：
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file-upload, heroku

我正在尝试调用我的自定义 api，它使用回形针上传文件，它在本地使用[https://github.com/jwagener/httmultiparty](https://github.com/jwagener/httmultiparty)可以正常工作，但是当我尝试调用 api 并为 heroku 部署的应用程序上传文件时，出现以下错误发生。

```
NoMethodError: undefined method `bytesize' for #<Array:0x00000006e71980>
    from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:1735:in `send_request_with_body'
    from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:1724:in `exec'
    from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:1189:in `transport_request'
    from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:1177:in `request'
    from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/rest-client-1.6.7/lib/restclient/net_http_ext.rb:51:in `request'
    from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:1170:in `block in request'
    from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:627:in `start'
    from /home/umair/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:1168:in `request'
    from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/rest-client-1.6.7/lib/restclient/net_http_ext.rb:51:in `request'
    from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/httparty-0.8.3/lib/httparty/request.rb:76:in `perform'
    from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/httparty-0.8.3/lib/httparty/request.rb:208:in `handle_response'
    from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/httparty-0.8.3/lib/httparty/request.rb:90:in `perform'
    from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/httparty-0.8.3/lib/httparty.rb:400:in `perform_request'
    from /home/umair/Projects/core/lib/httmultiparty.rb:81:in `post'
    from (irb):5
    from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/railties-3.0.7/lib/rails/commands/console.rb:44:in `start'
    from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/railties-3.0.7/lib/rails/commands/console.rb:8:in `start'
    from /home/umair/.rvm/gems/ruby-1.9.2-p320@gm/gems/railties-3.0.7/lib/rails/commands.rb:23:in `<top (required)>' 
```

我在 ruby​​ 控制台上运行它来测试文件上传 api。

```
HttpClient.post('/storage.xml',:basic_auth=>   {:username=>'badde88248834bec759d94563f102d52e19702fa',:password=>'b890b48e2769192372bf531fc46827cd86bea23f'} ,:query => {:auth_token=> '1045aa26cda23f5f3aec737a45e7ba0017c1a7cf',:user_file => File.new( '/home/umair/Login.png')}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:41:02.663

我遇到了同样的问题，找不到解决方案。现在我正在这样做，它只需要`multipart-post`宝石。

```
class Client
  require 'net/http/post/multipart'

  def self.perform inputurl, file
    url = URI.parse(inputurl)
    File.open(file) do |transfile|
      Net::HTTP.start(url.host, url.port) do |http|
        req = Net::HTTP::Post::Multipart.new(
          url.path,
          file1: UploadIO.new(transfile, "multipart/formdata", File.basename(file)),
        )
        response = http.request(req)
      end
    end
  end
end 
```

# javascript - 我怎样才能做标签输入字段（正如 Stack Overflow 所做的那样）。Javascript没问题

> ID：12130577
> 
> 赞同：0
> 
> 时间：2012-08-26T13:37:52.503
> 
> 标签：javascript, html, css, tags

请任何人都可以向我展示一种对标签字段进行编程的正确方法，使其看起来像 stackoverflow 一样。如：

![在此处输入图像描述](../Images/3103e9e3161b0045e23e44a6e160b325.png)

我怀疑它是用 HTML/CSS 和 Javascript 完成的。非常感谢任何建议或想法。如果您能写一些插图代码或指导我学习某种教程，我也将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T13:55:57.433

如果您可以使用 jQuery，这里有一些不错的选择：

来自 jQuery 人自己： http:
[//archive.plugins.jquery.com/project/jQueryTagEditor](http://archive.plugins.jquery.com/project/jQueryTagEditor)

从网页链接中最容易看到这一点：http:
[//jcesar.artelogico.com/jquery-tagselector/](http://jcesar.artelogico.com/jquery-tagselector/)

其他：

[https://github.com/xoxco/jQuery-Tags-Input](https://github.com/xoxco/jQuery-Tags-Input)
[https://github.com/webworka/Tagedit](https://github.com/webworka/Tagedit)
[https://github.com/aehlke/tag-it](https://github.com/aehlke/tag-it)
[http://ioncache.github.com/Tag -处理程序/](http://ioncache.github.com/Tag-Handler/)

# javascript - three.js：将坐标从相机空间转换到场景空间

> ID：12130579
> 
> 赞同：1
> 
> 时间：2012-08-26T13:38:05.207
> 
> 标签：javascript, three.js, coordinate-transformation

我试图相对于相机放置一个立方体，而不是相对于场景。问题是，要将它放置在场景中（我必须让它显示），我必须知道对应于立方体相机空间坐标的场景坐标。我在 THREE.Camera 中找到了这个函数“projectionMatrixInverse”。它有一个很好的函数，叫做“multiplyVector3”，我希望它能让我将向量 (1,1,1) 转换回场景空间，如下所示：

```
var camera, myvec, multvec; // (and others)
camera = new THREE.OrthographicCamera( window.innerWidth / - 2, window.innerWidth / 2, window.innerHeight / 2, window.innerHeight / - 2, - 2000, 1000 );
camera.position.x = 200;
camera.position.y = 100;
camera.position.z = 200;

myvec = new THREE.Vector3(1,1,1);
console.log("myvec: ", myvec);
multvec = camera.projectionMatrixInverse.multiplyVector3(THREE.Vector3(1,1,1));
console.log("multvec: ", multvec); 
```

问题是，在控制台上我得到：

```
myvec: Object { x=1, y=1, z=1}
TypeError: v is undefined
var vx = v.x, vy = v.y, vz = v.z; 
```

multiplyVector3 根本不接受 my `myvec`，或者说它是未定义的，即使控制台说它是一个对象。我不明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T21:26:35.070

相机位于其坐标系的原点，并向下看它的负 Z 轴。相机正前方的点具有形式为 的相机坐标`( 0, 0, z )`，其中`z`为负数。

你转换一个点`p`

```
p = new THREE.Vector3(); // create once and reuse if you can

p.set( x, y, z ); 
```

从相机坐标到世界坐标，如下所示：

```
p.applyMatrix4( camera.matrixWorld ); 
```

`camera.matrixWorld`默认情况下每帧更新一次，但如果需要，您可以通过调用自行更新`camera.updateMatrixWorld();`

三.js r.95

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T07:59:48.320

这也可能是您所追求的：

```
scene.add( camera );

brick.position.set( 0, 0, -1 );
camera.add( brick ); 
```

# smartgwt - ListGrid：需要在可编辑字段中显示多对一关系的图标

> ID：12130581
> 
> 赞同：0
> 
> 时间：2012-08-26T13:38:24.300
> 
> 标签：smartgwt, smartclient

我的问题似乎很简单。但是到现在也没能解决。任何帮助，将不胜感激。

我有一个 listgrid 显示来自数据源的某些记录。其中一个字段是多对一的。当我尝试编辑任何记录时，我会得到一个下拉列表，其中包含该记录可以具有的所有可能值。到目前为止一切都很好。问题是所有下拉值都显示为简单文本。我希望它们显示[在这个链接](http://www.smartclient.com/smartgwt/showcase/#styled_combobox_category)中。

要求是在列表网格上有“带有图标的 SelectItem”。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T20:51:03.267

使用 ListGridField.setEditorType() 自定义为字段显示的编辑器。此 API 采用 FormItem，因此请传递与您链接到的示例类似配置的 SelectItem。

# cookies - 使用 net/http 设置 cookie

> ID：12130582
> 
> 赞同：78
> 
> 时间：2012-08-26T13:38:35.110
> 
> 标签：cookies, go

我正在尝试使用 Go 的 net/http 包设置 cookie。我有：

```
package main

import "io"
import "net/http"
import "time"

func indexHandler(w http.ResponseWriter, req *http.Request) {
    expire := time.Now().AddDate(0, 0, 1)
    cookie := http.Cookie{"test", "tcookie", "/", "www.domain.com", expire, expire.Format(time.UnixDate), 86400, true, true, "test=tcookie", []string{"test=tcookie"}}
    req.AddCookie(&cookie)
    io.WriteString(w, "Hello world!")
}

func main() {
    http.HandleFunc("/", indexHandler)
    http.ListenAndServe(":80", nil)
} 
```

我尝试用“cookies”搜索“Golang”，但没有得到任何好的结果。如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-08-26T13:44:05.027

我不是围棋专家，但我认为您正在根据请求设置 cookie，不是吗？您可能希望在响应中设置它。net/http中有一个`setCookie`函数。这可能会有所帮助： http: [//golang.org/pkg/net/http/#SetCookie](http://golang.org/pkg/net/http/#SetCookie)

```
func SetCookie(w ResponseWriter, cookie *Cookie) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-02-08T16:45:31.333

```
//ShowAllTasksFunc is used to handle the "/" URL which is the default ons
func ShowAllTasksFunc(w http.ResponseWriter, r *http.Request){
    if r.Method == "GET" {
        context := db.GetTasks("pending") //true when you want non deleted notes
        if message != "" {
            context.Message = message
        }
        context.CSRFToken = "abcd"
        message = ""
        expiration := time.Now().Add(365 * 24 * time.Hour)
        cookie    :=    http.Cookie{Name: "csrftoken",Value:"abcd",Expires:expiration}
        http.SetCookie(w, &cookie)
        homeTemplate.Execute(w, context)
    } else {
        message = "Method not allowed"
        http.Redirect(w, r, "/", http.StatusFound)
    }
} 
```

`Requests`和之间有一个基本区别`ResponseWriter`，请求是浏览器发送的内容

```
Host: 127.0.0.1:8081
User-Agent: ...
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Referer: http://127.0.0.1:8081/
Cookie: csrftoken=abcd
Connection: keep-alive 
```

响应是处理程序将发送的内容，例如：

```
Content-Type: text/html; charset=utf-8
Date: Tue, 12 Jan 2016 16:43:53 GMT
Set-Cookie: csrftoken=abcd; Expires=Wed, 11 Jan 2017 16:43:53 GMT
Transfer-Encoding: chunked
<html>...</html> 
```

当浏览器发出请求时，它将包含该域的 cookie，因为 cookie 是按域存储的，不能从跨域访问，如果您将 cookie 设置为仅 HTTP，那么它只能从通过 HTTP 而不是通过 JS 设置它的网站。

因此，当从 cookie 中获取信息时，您可以通过 r.Cookie 方法执行此操作，如下所示

```
cookie, _ := r.Cookie("csrftoken")
if formToken == cookie.Value { 
```

[https://github.com/thewhitetulip/Tasks/blob/master/views/addViews.go#L72-L75](https://github.com/thewhitetulip/Tasks/blob/master/views/addViews.go#L72-L75)

但是当你要设置一个cookie时，你必须在response writer方法中做，请求是一个我们响应的只读对象，把它想象成你从某人那里得到的短信，那是一个请求，你只能得到它，你输入的是一个响应，所以你可以在

更多详情：[https ://thewhitetulip.gitbooks.io/webapp-with-golang-anti-textbook/content/content/2.4workingwithform.html](https://thewhitetulip.gitbooks.io/webapp-with-golang-anti-textbook/content/content/2.4workingwithform.html)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-02-08T10:18:21.753

下面的代码可以帮助你

```
 cookie1 := &http.Cookie{Name: "sample", Value: "sample", HttpOnly: false}
    http.SetCookie(w, cookie1) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-10-12T04:35:28.843

下面展示了我们如何在产品中使用 cookie：

```
func handleFoo(w http.ResponseWriter, r *http.Request) {

    // cookie will get expired after 1 year 
    expires := time.Now().AddDate(1, 0, 0)

    ck := http.Cookie{
        Name: "JSESSION_ID",
        Domain: "foo.com",
        Path: "/",
        Expires: expires,
    }

    // value of cookie    
    ck.Value = "value of this awesome cookie"

    // write the cookie to response
    http.SetCookie(w, &ck)

    // ...
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-10-27T05:27:05.400

在我添加 Path 和 MaxAge 之前，它在 Safari 中对我不起作用。安全 cookie 和常规 cookie 都对我有用

分享以帮助像我一样被困超过 2 天的人:)

```
expire := time.Now().Add(20 * time.Minute) // Expires in 20 minutes
cookie := http.Cookie{Name: "username", Value: "nonsecureuser", Path: "/", Expires: expire, MaxAge: 86400}
http.SetCookie(w, &cookie)
cookie = http.Cookie{Name: "secureusername", Value: "secureuser", Path: "/", Expires: expire, MaxAge: 86400, HttpOnly: true, Secure: true}
http.SetCookie(w, &cookie) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-01-23T02:48:07.987

首先，您需要创建 Cookie，然后使用 http 包的 SetCookie() 函数设置 cookie。

```
expire := time.Now().Add(10 * time.Minute) 
cookie := http.Cookie{Name: "User", Value: "John", Path: "/", Expires: expire, MaxAge: 90000}
http.SetCookie(w, &cookie) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-09-26T18:46:03.973

您可以使用 gorilla 包来处理 cookie，或者我会说安全 cookie：[http ://www.gorillatoolkit.org/pkg/securecookie](http://www.gorillatoolkit.org/pkg/securecookie)

# php - 如何防止 wget 在长 php 脚本上停止

> ID：12130584
> 
> 赞同：1
> 
> 时间：2012-08-26T13:38:49.340
> 
> 标签：php, timeout, wget

以下代码在 PHP 中执行

```
shell_exec('wget -q -T 0 -b -O "'.dirname(__FILE__).'/logs/log.txt" "'.$_SERVER['SERVER_NAME'].'/my/script.php" > /dev/null 2>&1'); 
```

几个小时后，脚本会无缘无故停止。log.txt 中没有错误，apache 错误中也没有。这些行应防止此类行为：

```
session_write_close();
ini_set('max_execution_time',0);
set_time_limit(0); 
```

而且我`echo(' '); flush();`还不时添加，以确保 apache 不会因为没有输出而杀死脚本（它出现在 apache 错误日志中）。

有趣的提示是，当我`ignore_user_abort(1);`在开头添加时 - 脚本不会停止。

我知道还有其他方法可以完成脚本并收集输出，但我正在寻找的是 wget 放弃下载的原因，即使超时设置为 0。或者原因可能在其他地方？

# php - 根据大小动态定位图像

> ID：12130589
> 
> 赞同：1
> 
> 时间：2012-08-26T13:39:17.930
> 
> 标签：php, jquery, css

我的照片库中有各种图像。但是当我显示特定相册的照片时，很难将图像大小与其位置保持一致。如果我让图像大小（高度或宽度）保持动态，图像就会被定位在这里和那里（分散）。当我修复图像的大小时（比如高度：200 宽度：200）.. 缩略图看起来很沉闷。对此有什么解决方案？

我试图计算每个图像的高度和宽度，然后根据它定位它们。我遇到了问题，但我想我可以让它这样工作。有没有其他更好的选择。

我希望图像的位置与本网站[http://gses.snu.ac.kr/eng/](http://gses.snu.ac.kr/eng/)中的一样。

更新我的图像可以动态添加或删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:57:55.820

没有真正的方法可以使用 CSS 垂直和水平对齐随机图像。相信我，我已经尝试了一切。最终，您所能做的就是制作一个标准尺寸的“盒子”，以适合您期望拥有的最大图像并在其中显示图像。至少，这会给你一种秩序感。

这是我的意思的一个例子：

[http://www.marianoagency.com/payment](http://www.marianoagency.com/payment)

我希望能够将图像直接放在中心（使用表格很容易），但是由于动态图像的大小可变，我无法使用纯 CSS 来完成它。

# c# - signalR - 获取用户名

> ID：12130590
> 
> 赞同：33
> 
> 时间：2012-08-26T13:39:34.563
> 
> 标签：c#, asp.net-mvc-3, signalr, signalr-hub

我正在使用 signalr 和 asp.net MVC3 构建示例聊天应用程序。这是我的信号器集线器的样子

```
public class MyHub:Hub,IDisconnect
{
 public Task Join()
 {
  string username = HttpContext.Current.User.Identity.Name;
  //find group based on username
  string group = getGroup(username)
  return Groups.Add(Context.ConnectionId, group);
 }

 public void doStuff()
 {
  string group = getGroup();
  Clients[group].doStuffOnBrowser();
 }
} 
```

我的问题是页面加载时我的应用程序崩溃了。在使用调试器单步执行时，我发现 HttpContext.Current.User.Identity.Name 为空，即使用户已经过身份验证。如何在我的 Task Join() 方法中获取用户名？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-26T13:44:32.920

使用[SignalR 集线器](http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-server)时，您可以使用该`HubCallerContext.User`属性来：

> 获取作为初始 http 请求一部分的用户。

所以尝试一下：

```
public Task Join()
{
    string username = Context.User.Identity.Name;
    //find group based on username
    string group = getGroup(username)
    return Groups.Add(Context.ConnectionId, group);
} 
```

# sql-server-2008 - 支持 ASP.NET\C# 项目上的多个程序集

> ID：12130591
> 
> 赞同：5
> 
> 时间：2012-08-26T13:39:40.103
> 
> 标签：sql-server-2008, sql-server-2005, c#-4.0, dll, .net-assembly

我们正在开发一个 ASP.NET 应用程序并且在与 MS dll (Microsoft.AnalysisServices) 集成时遇到一些问题？

原始项目链接到 SQLServer2005（版本=9.0.242.0）附带的 dll。迁移到 SQLServer2008R2（版本=10.0.0.0）后，我们遇到了这个问题：

> 无法加载文件或程序集“Microsoft.AnalysisServices，Version=9.0.242.0，Culture=neutral，PublicKeyToken=89845dcd8080cc91”或其依赖项之一。该系统找不到指定的文件。

这是可以理解的，因为我们用一个版本编译项目，然后另一个版本位于服务器上。在开发机器上安装 SQLServer2008R2 后，问题得到解决。

然而，我们现在有另一个问题，我们需要同时支持 SQLServer2005 和 SQLServer2008R2 环境。我知道我们可以使用配置文件重定向 dll 的搜索路径（它将搜索编译时使用的不同版本），但我似乎找不到如何将其用于 Web 应用程序的说明（在 w3wp 上）。我们尝试使用“特定版本”=false，但由于这是一个“强名称”程序集，它不像人们想象的那样工作。

我找到的相关链接是：
[http ://social.msdn.microsoft.com/Forums/en-US/sqlanalysisservices/thread/47d0b992-3c10-4851-b2a5-9f72d2c0976e](http://social.msdn.microsoft.com/Forums/en-US/sqlanalysisservices/thread/47d0b992-3c10-4851-b2a5-9f72d2c0976e)

有人可以指导我找到解决此问题的链接吗？

更新：我想我没有正确测试它，因为它不适用于 SQLServer2008 R2 中的其他服务器。我猜你不能在 newVersion 元素中使用范围。所以这个问题仍然是为每个人打开的！. 底线是我知道我有 9.0.242.0 版本，但客户版本可能是 9.0.242.0 或 10.0.0.0。有没有一种方法可以让我在生产服务器上动态选​​择正确的程序集

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-17T10:24:18.373

您可以连接到 AppDomain.CurrentDomain.AssemblyResolve 并加载所需的程序集。如果您返回 null 它将正常查找它。

例如。

```
 AppDomain.CurrentDomain.AssemblyResolve += Resolve;

    private static Assembly Resolve(object source, ResolveEventArgs args)
    {
        if (args.Name.StartsWith("Microsoft.AnalysisServices,"))
            return Assembly.LoadFile("Microsoft.AnalysisServices.dll");
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T09:42:32.560

尝试将 bindingRedirect 添加到您的 web.config。

# java - Android ScrollView 不工作

> ID：12130595
> 
> 赞同：0
> 
> 时间：2012-08-26T13:39:48.917
> 
> 标签：java, android, scrollview

我有一个布局，当内容溢出屏幕时，我希望它可以滚动。我设置了以下布局 xml。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView android:id="@+id/ScrlView" 
     xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
     android:layout_height="fill_parent" >
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:isScrollContainer="false"
    android:id="@+id/home_root"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/backrepeat">
        <!-- Include Header  -->
        <include layout="@layout/main_header"/>

        <!--  Include dashboard -->
        <include layout="@layout/dashboard"/>   

</LinearLayout>
</ScrollView> 
```

仪表板是用作菜单的图标集合。示例：[单击我](http://2.bp.blogspot.com/_uJSd5DrlOrg/TPqpWWZV6vI/AAAAAAAABJA/EpirfqZZCnw/s1600/dashboard_header.png) 不幸的是，第二个包含（仪表板）现在显示“损坏”。查看屏幕： [点击这里](http://i48.tinypic.com/193401.png)

正如你所看到的，它看起来不像是应该的。当我删除滚动视图时，一切都很好。

我想要的是我的仪表板仍然看起来不错，但如果需要可以滚动。我尝试了几种设置，但都给出了相同的结果。我究竟做错了什么？

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:23:24.680

删除`android:isScrollContainer="false"`, 并添加`android:fillViewport="true"`到`scrollView`

# jsf - JSF1.2 到 JSF2.1 迁移：在首页使用 a4j:ajax / f:ajax 导致：“ReferenceError: RichFaces / jsf is not defined”

> ID：12130596
> 
> 赞同：2
> 
> 时间：2012-08-26T13:39:59.183
> 
> 标签：jsf, jsf-2, richfaces, ajax4jsf

我正在将 JSF1.2 应用程序迁移到 JSF 2.1。它有一个使用 facelets 模板的登录页面。并且模板页面有 h:head 标签。登录页面在 ui:composition/ui:define/h:form/a4j:outputPanel/h:panelGrid/h:panelGroup 标签内有一个标签 h:selectBooleanCheckbox。

```
<h:selectBooleanCheckbox value="#{bean.alogin}" >
  <a4j:ajax event="click" execute="@form" render="loginPanel" />    
</h:selectBooleanCheckbox> 
```

单击复选框时，我在浏览器错误控制台中收到“ReferenceError: RichFaces is not defined”。

即使使用 f:ajax 标签，问题也是一样的，并且有

```
<h:outputScript name="jsf.js" library="javax.faces" target="head"/> 
```

在模板页面/登录页面。

此问题（未找到/加载 js 库）仅出现在登录页面的首次加载中。这意味着如果我登录到我的应用程序并注销，然后使用上面的复选框，就没有问题。

请指导任何指示，这将非常有帮助。首先十分感谢。

以下是head标签中生成的html：

```
<script src="/myapp/javax.faces.resource/jsf.js.faces?ln=javax.faces" type="text/javascript">&lt;!--
//--&gt;</script> 
```

我在 web.xml 中有两个 *.faces 映射。一个是CustomFilter（实现javax.servlet.Filter），另一个是CustomServlet（扩展org.apache.myfaces.webapp.MyFacesServlet）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:04:30.970

> ReferenceError: RichFaces / jsf 未定义

这是一个 JavaScript 错误。这意味着 JavaScript 上下文中既`var RichFaces = ...;`没有也没有`var jsf = ...;`定义任何地方。这反过来意味着自动包含 JSF 和 RichFaces 提供的 JavaScript 文件`jsf.js`并且`richfaces.js`失败了。这可能是由于没有使用`<h:head>`组件来声明 HTML 头，这是 JSF 自动包含 JavaScript 文件的强制钩子。

显然你忘了更换

```
<head>
    ...
</head> 
```

在您的模板中

```
<h:head>
    ...
</h:head> 
```

相应地修复它。

使用`<h:outputScript name="jsf.js" library="javax.faces" target="head"/>`仅修复错误的 JSF 部分，而不是 RichFaces 部分，实际上是一种解决方法，而不是解决方案。

* * *

**更新**：根据您的问题更新，您确认您已经`Filter`在这些资源的确切 URL 模式上映射了某种登录（至少，过滤器名称“会话过滤器”结合到目前为止描述的问题症状表明您'正在阻止用户未登录的请求）。JSF 资源也由`*.faces`URL 模式提供`FacesServlet`，因此它们也由该过滤器检查（如果您仔细研究了生成的`<script src>`URL，您就会意识到这一点）。

您可能需要更改您`Filter`以跳过对这些资源的登录检查，以便这些资源也不会被重定向到登录页面。您可以通过检查请求 URI 是否与[`ResourceHandeler.RESOURCE_IDENTIFIER`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html#RESOURCE_IDENTIFIER)URL 无关来做到这一点。

```
@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    HttpServletRequest req = (HttpServletRequest) request;
    HttpServletResponse res = (HttpServletResponse) response;

    if (req.getRequestURI().startsWith(req.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) {
        chain.doFilter(request, response); // Skip JSF resources (CSS/JS/Images/etc)
        return;
    }

    // ... Continue your login check here.
} 
```

# html - 选择标签未正确显示项目

> ID：12130597
> 
> 赞同：2
> 
> 时间：2012-08-26T13:40:40.503
> 
> 标签：html, input, html-select

我正在使用许多选择标签来显示许多项目，但问题是它没有显示全文。文本似乎被剪切了，我没有在上面使用任何 CSS。这可能是什么问题。

选择一切都很好，但在选择文本显示一半之前。图片如下![在此处输入图像描述](../Images/013893587053b698860cb444fe8af05f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:39:29.387

[http://jsfiddle.net/mitchbregs/sk8cd/1/](http://jsfiddle.net/mitchbregs/sk8cd/1/)

您所要做的就是摆脱填充并更改高度。

# titanium - Titanium：Android Ti.UI.currentWindow 不适用于选项卡组

> ID：12130598
> 
> 赞同：1
> 
> 时间：2012-08-26T13:40:55.917
> 
> 标签：titanium, titanium-mobile

我正在使用选项卡组并使用 4 个选项卡，将 4 个不同的窗口添加到选项卡中。当我尝试通过 Ti.UI.currentWindow 在添加到窗口的任何视图中获取当前窗口时，我得到空白值，即它没有返回当前窗口值。

谁能纠正我？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T05:17:54.417

您在创建时在 Window 中设置“url”属性。像

在“app.js”中

```
var tabGroup        = Titanium.UI.createTabGroup();

var win_home        = Titanium.UI.createWindow({
    url     :'home.js',
        backgroundColor :'#000',
    backgroundImage :'image/bg_img1.png',
    barColor        : "#000000",//"#ff429c"

});

var tab_home = Titanium.UI.createTab({  
    index           : 0,
    window:win_home
});

tabGroup.addTab(tab_home);
tabGroup.open(); 
```

在“home.js”中

```
var cur = Ti.UI.currentWindow;

var view = Ti.UI.createView({
    height : 100,
    width  : 100,
backgroundColor : "#0f0",
});

cur.add(view); 
```

理解这段代码并尝试这样做。这真的有效......干杯......

# android - Android AlertDialog 不工作

> ID：12130600
> 
> 赞同：0
> 
> 时间：2012-08-26T13:41:09.527
> 
> 标签：android, android-alertdialog

如何定义“构造函数 AlertDialog.Builder(XMLParser) 未定义”。我的代码有错误。请教我如何使它工作。当我的应用程序中捕获到异常时，我试图显示一个警报对话框。

```
public class XMLParser {
private Context context;
// constructor

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e){
            AlertDialog.Builder builder = new AlertDialog.Builder(context);
            builder.setMessage( "Host not found" )
                    .setCancelable(false)
                    .setPositiveButton("Exit",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    System.exit(0);
                                }

                            });
            AlertDialog alert = builder.create();
            alert.show();

            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    } 
```

}

日志猫：

```
08-26 22:37:34.173: E/AndroidRuntime(2221): FATAL EXCEPTION: AsyncTask #1
08-26 22:37:34.173: E/AndroidRuntime(2221): java.lang.RuntimeException: An error occured while executing doInBackground()
08-26 22:37:34.173: E/AndroidRuntime(2221):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at java.lang.Thread.run(Thread.java:856)
08-26 22:37:34.173: E/AndroidRuntime(2221): Caused by: java.lang.NullPointerException
08-26 22:37:34.173: E/AndroidRuntime(2221):     at android.app.AlertDialog.resolveDialogTheme(AlertDialog.java:142)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at android.app.AlertDialog$Builder.<init>(AlertDialog.java:359)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at com.example.androidhive.XMLParser.getDomElement(XMLParser.java:80)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at com.example.androidhive.CategoryList$loadlistView.doInBackground(CategoryList.java:112)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at com.example.androidhive.CategoryList$loadlistView.doInBackground(CategoryList.java:1)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
08-26 22:37:34.173: E/AndroidRuntime(2221):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-26 22:37:34.173: E/AndroidRuntime(2221):     ... 4 more
08-26 22:37:40.399: E/WindowManager(2221): Activity com.example.androidhive.CategoryList has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41649130 that was originally added here
08-26 22:37:40.399: E/WindowManager(2221): android.view.WindowLeaked: Activity com.example.androidhive.CategoryList has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41649130 that was originally added here
08-26 22:37:40.399: E/WindowManager(2221):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:428)
08-26 22:37:40.399: E/WindowManager(2221):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
08-26 22:37:40.399: E/WindowManager(2221):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
08-26 22:37:40.399: E/WindowManager(2221):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
08-26 22:37:40.399: E/WindowManager(2221):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
08-26 22:37:40.399: E/WindowManager(2221):  at android.app.Dialog.show(Dialog.java:278)
08-26 22:37:40.399: E/WindowManager(2221):  at com.example.androidhive.CategoryList$loadlistView.onPreExecute(CategoryList.java:102)
08-26 22:37:40.399: E/WindowManager(2221):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
08-26 22:37:40.399: E/WindowManager(2221):  at android.os.AsyncTask.execute(AsyncTask.java:511)
08-26 22:37:40.399: E/WindowManager(2221):  at com.example.androidhive.CategoryList.checkInternetConnection(CategoryList.java:158)
08-26 22:37:40.399: E/WindowManager(2221):  at com.example.androidhive.CategoryList.onCreate(CategoryList.java:47)
08-26 22:37:40.399: E/WindowManager(2221):  at android.app.Activity.performCreate(Activity.java:4465)
08-26 22:37:40.399: E/WindowManager(2221):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
08-26 22:37:40.399: E/WindowManager(2221):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
08-26 22:37:40.399: E/WindowManager(2221):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
08-26 22:37:40.399: E/WindowManager(2221):  at android.app.ActivityThread.access$600(ActivityThread.java:127)
08-26 22:37:40.399: E/WindowManager(2221):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
08-26 22:37:40.399: E/WindowManager(2221):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-26 22:37:40.399: E/WindowManager(2221):  at android.os.Looper.loop(Looper.java:137)
08-26 22:37:40.399: E/WindowManager(2221):  at android.app.ActivityThread.main(ActivityThread.java:4512)
08-26 22:37:40.399: E/WindowManager(2221):  at java.lang.reflect.Method.invokeNative(Native Method)
08-26 22:37:40.399: E/WindowManager(2221):  at java.lang.reflect.Method.invoke(Method.java:511)
08-26 22:37:40.399: E/WindowManager(2221):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)
08-26 22:37:40.399: E/WindowManager(2221):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)
08-26 22:37:40.399: E/WindowManager(2221):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:43:10.070

实际上 AlertDialog.Builder 的构造函数是

```
AlertDialog.Builder(Context context) 
```

**使用此构建器及其创建的 AlertDialog 的上下文的构造器。**

并且在您的代码`this`中指的是您的**XMLParser 类**而不是任何上下文

```
AlertDialog.Builder builder = new AlertDialog.Builder(this); 
```

而不是传递调用活动或应用程序`.this`的**上下文。**

就像是，

```
AlertDialog.Builder builder = new AlertDialog.Builder(mContext); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:45:15.757

如果您有 AlertDialog.Builder 对象，只需调用 show 即可。最简单的例子：

```
new AlertDialog.Builder(someContext).setMessage("Some text").show(); 
```

你也可以这样做，在你设置按钮之后，等等......

# hibernate - jpa 实体 - getter 没有带来正确的结果

> ID：12130604
> 
> 赞同：0
> 
> 时间：2012-08-26T13:41:43.833
> 
> 标签：hibernate, jpa

我正在与 Jpa，Hibernate 一起工作。
我的项目中发生了一件非常奇怪的事情。
我有 2 个实体：学生和课程，多对多关系。
很长一段时间一切都很完美，突然间我遇到了这个问题：
当我找到一个特定的学生（em.find）然后使用getter（student.getCourses）返回它的课程列表时，我只收到列表的一部分！如果我使用查询（“select s.courses from Students s where id = ...”）来执行此操作 - 它会给出正确的结果。
我试图解决它很长时间 - 没有。
任何人都知道问题可能是什么？
任何帮助将不胜感激！
这是我的代码：

/**
* Entity 的实体实现类：Course
*
*/
@Entity(name = "Courses")

公共类课程扩展冲压{

```
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;
private String courseName;
@Version
@Column(name = "Version", nullable = false)
private Long version;

@ManyToMany(mappedBy = "courses",fetch = FetchType.LAZY)
private Set<Student> students = new HashSet<Student>();

@ManyToOne
@JoinColumn(name = "LecturerID")
private Lecturer lecturer;

public Course() {
    super();
    this.courseName = " ";

}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getCourseName() {
    return courseName;
}

public void setCourseName(String courseName) {
    this.courseName = courseName;
}

public Lecturer getLecturer() {
    return lecturer;
}

public void setLecturer(Lecturer lecturer) {
    this.lecturer = lecturer;
}

public Set<Student> getStudents() {
    return students;
}

public void setStudents(Set<Student> students) {
    this.students = students;
}

public Long getVersion() {
    return version;
}

public void setVersion(Long version) {
    this.version = version;
} 
```

}

/**
* Entity 的实体实现类：Student
*
*/
@Entity

公共类学生扩展人/*和人类扩展冲压*/{

```
private static final long serialVersionUID = 1L;

@Enumerated(EnumType.STRING)
@Column(length = 2)
private E_Year studentYear;
private Boolean inCondition;

@ManyToMany(cascade = PERSIST, fetch = FetchType.LAZY)
private Set<Course> courses = new HashSet<Course>();

public Student() {
    super();
    this.inCondition = true;
}

public E_Year getStudentYear() {
    return studentYear;
}

public void setStudentYear(E_Year studentYear) {
    this.studentYear = studentYear;
}

public Boolean getInCondition() {
    return inCondition;
}

public void setInCondition(Boolean inCondition) {
    this.inCondition = inCondition;
}

public Set<Course> getCourses() {
    return courses;
}

public void setCourses(Set<Course> courses) {
    this.courses = courses;
} 
```

}

/**
* Entity 的实体实现类：Stamping
*
*/
@MappedSuperclass

公共类冲压实现可序列化{

```
private static final long serialVersionUID = 1L;

@Temporal(TemporalType.TIMESTAMP)
@Column(name = "created", nullable = false)
private Date created;

@Temporal(TemporalType.TIMESTAMP)
@Column(name = "updated", nullable = false)
private Date updated;

private String lastUser;

public Date getCreated() {
    return created;
}

public Date getUpdated() {
    return updated;
}

public String getLastUser() {
    return lastUser;
}

@PrePersist
protected void onCreate() {
    updated = created = new Date();
    lastUser = System.getProperty("user.name"); 
}

@PreUpdate
protected void onUpdate() {
    updated = new Date();
    lastUser = System.getProperty("user.name"); 
}

public Stamping() {
    super();
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((created == null) ? 0 : created.hashCode());
    result = prime * result
            + ((lastUser == null) ? 0 : lastUser.hashCode());
    result = prime * result + ((updated == null) ? 0 : updated.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Stamping other = (Stamping) obj;
    if (created == null) {
        if (other.created != null)
            return false;
    } else if (!created.equals(other.created))
        return false;
    if (lastUser == null) {
        if (other.lastUser != null)
            return false;
    } else if (!lastUser.equals(other.lastUser))
        return false;
    if (updated == null) {
        if (other.updated != null)
            return false;
    } else if (!updated.equals(other.updated))
        return false;
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:25:31.317

问题解决了......
我发现这一切都发生了，因为我有一个学生和课程的基类，它有 Eclipse 生成的 HashCode 和 Equals 方法。
删除这些方法后，一切正常。
谁能解释它为什么会发生？
谢谢。

# c# - 禁用编辑自定义 DevComponents.DotNetBar 控件的子控件

> ID：12130605
> 
> 赞同：-1
> 
> 时间：2012-08-26T13:42:04.887
> 
> 标签：c#, winforms, custom-controls, design-time, dotnetbar

我创建了一个继承自控件的新`Bar control`自定义控件`DevComponents.DotNetBar`。接下来，我在其中创建了一个新的停靠选项卡，并向其中添加了我的其他控件。

在我编译我的自定义控件并将我创建的自定义控件添加到新的 Windows 窗体中之后，停靠选项卡控件在设计时是可编辑的。

我不希望任何人都可以在设计时编辑这些控件（Dock Tab Controls）。如何在设计时从表单禁用编辑控件（与编辑控件本身不同）？

```
public partial class barFloorsGrouping : Bar
{
    public barFloorsGrouping()
    {
        InitializeComponent();
    }

    [ReadOnly(true)]
    public new System.Windows.Forms.AccessibleRole AccessibleRole
    {
        get { return base.AccessibleRole; }
        private set { base.AccessibleRole = System.Windows.Forms.AccessibleRole.ToolBar; }
    }

    [Browsable(false), ReadOnly(true)]
    public new bool AlwaysDisplayDockTab
    {
        get { return base.AlwaysDisplayDockTab; }
        private set { base.AlwaysDisplayDockTab = true; }
    }

    [Browsable(false), ReadOnly(true)]
    public new bool AlwaysDisplayKeyAccelerators
    {
        get { return base.AlwaysDisplayKeyAccelerators; }
        private set { base.AlwaysDisplayKeyAccelerators = true; }
    }

    [ReadOnly(true)]
    public new bool AntiAlias
    {
        get { return base.AntiAlias; }
        private set { base.AntiAlias = true; }
    }

    [Browsable(false), ReadOnly(true)]
    public new bool AutoCreateCaptionMenu
    {
        get { return base.AutoCreateCaptionMenu; }
    }

    [ReadOnly(true)]
    public new bool AutoHide
    {
        get { return base.AutoHide; }
    }

    [Browsable(false), ReadOnly(true)]
    public new bool AutoHideTabTextAlwaysVisible
    {
        get { return base.AutoHideTabTextAlwaysVisible; }
    }

    [Browsable(false), ReadOnly(true)]
    public new bool AutoSyncBarCaption
    {
        get { return base.AutoSyncBarCaption; }
        private set { base.AutoSyncBarCaption = true; }
    }

    [Browsable(false), ReadOnly(true)]
    public new eBarType BarType
    {
        get { return base.BarType; }
        private set { base.BarType = eBarType.DockWindow; }
    }

    [ReadOnly(true)]
    public new bool CanAutoHide
    {
        get { return base.CanAutoHide; }
    }

    [ReadOnly(true)]
    public new bool CanDockTab
    {
        get { return base.CanDockTab; }
        private set { base.CanDockTab = false; }
    }

    [ReadOnly(true)]
    public new bool CanUndock
    {
        get { return base.CanUndock; }
        private set { base.CanUndock = false; }
    }

    [Browsable(false), ReadOnly(true)]
    public new bool CloseSingleTab
    {
        get { return base.CloseSingleTab; }
    }

    [Browsable(false), ReadOnly(true)]
    public new bool DisplayMoreItemsOnMenu
    {
        get { return base.DisplayMoreItemsOnMenu; }
        private set { base.DisplayMoreItemsOnMenu = true; }
    }

    [ReadOnly(true)]
    public new DockStyle Dock
    {
        get { return base.Dock; }
    }

    [Browsable(false), ReadOnly(true)]
    public new bool DockTabCloseButtonVisible
    {
        get { return base.DockTabCloseButtonVisible; }
    }

    [Browsable(false), ReadOnly(true)]
    public new bool FadeEffect
    {
        get { return base.FadeEffect; }
        private set { base.FadeEffect = true; }
    }

    [Browsable(false), ReadOnly(true)]
    public new eGrabHandleStyle GrabHandleStyle
    {
        get { return base.GrabHandleStyle; }
        private set { base.GrabHandleStyle = eGrabHandleStyle.Caption; }
    }

    [Browsable(false), ReadOnly(true)]
    public new eLayoutType LayoutType
    {
        get { return base.LayoutType; }
        private set { base.LayoutType = eLayoutType.DockContainer; }
    }

    [Browsable(false), ReadOnly(true)]
    public new bool MenuBar
    {
        get { return base.MenuBar; }
    }

    [Browsable(false), ReadOnly(true)]
    public new bool TabNavigation
    {
        get { return base.TabNavigation; }
        private set { base.TabNavigation = true; }
    }

    [Browsable(false), ReadOnly(true)]
    public new bool WrapItemsDock
    {
        get { return base.WrapItemsDock; }
        private set { base.WrapItemsDock = true; }
    }

    protected override void OnPaint(PaintEventArgs pe)
    {
        base.OnPaint(pe);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:47:20.993

您必须使用**ParentControlDesigner**类扩展设计模式行为。ParentControlDesigner 类为可包含子控件的控件设计器提供基类。

因此，为了实现您的目标，您必须通过**DesignerAttribute**为组件实现设计时服务，如下所示（只需在编写的类之前添加以下代码）：

```
[Designer("System.Windows.Forms.Design.ParentControlDesigner, System.Design", typeof(IDesigner))]
public partial class barFloorsGrouping : Bar
{
...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-26T13:46:43.307

编辑：和往常一样，我在 asp.net 和 webforms 中工作......这个答案适用于 WebForms

您需要覆盖 WebControl 的 GetDesignTimeHtml。

请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.ui.design.controldesigner.getdesigntimehtml.aspx)

在我看来，你没有做很多服务器控件创建，所以你很有趣......

# java - java中short和int的行为

> ID：12130606
> 
> 赞同：6
> 
> 时间：2012-08-26T13:42:15.527
> 
> 标签：java

我在 scjp 准备书中看到了这个问题。

```
public class Yikes {
    public static void go(Long n) {
        System.out.println("Long ");
    }
    public static void go(Short n) {
        System.out.println("Short ");
    }
    public static void go(int n) {
        System.out.println("int ");
    }
    public static void main(String [] args) {
        short y = 6;
        long z = 7;
        go(y);
        go(z);
    }
} 
```

输出是`int Long`。

我将`short`数据类型变量传递给重载方法 go。现在 go 也有一个`short`数据类型版本。那么怎么会`int`被调用呢？这种行为的原因是什么？

我在java中很新。所以请在这里帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T13:46:14.877

由于没有方法`go(short s)`可供选择，Java 只好另选一个。这可以通过两种方式完成：

1.  *扩大*,扩大`short`到一个`int`
2.  [*Autoboxing*](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)`short` ，用包围`Short`，对应的包装类。

由于*加宽*比*自动装箱*（在 Java 5 中引入）的时间更长，因此如果可用，JVM 会首先选择此替代方案。

因此，`go(int n)`调用该方法。

# database - 代码优先迁移——真的有必要吗？

> ID：12130609
> 
> 赞同：4
> 
> 时间：2012-08-26T13:42:42.917
> 
> 标签：database, entity-framework

我正在尝试在我的应用程序中找出合适的数据库开发过程。我已经尝试使用后/预部署脚本（非常好的功能）、实体框架数据库优先方法（在源代码控制下为每个数据库更改使用单独的脚本）的 Visual Studio 数据库项目，现在我正在处理实体框架代码优先方法。我不得不说，它提供的可能性给我留下了深刻的印象，但我正试图弄清楚如何在开发过程中管理模型中的变化。假设我的公司有以下环境：

LOCALHOST - 对于每个开发人员，TEST - 带有用于测试目的的 SQL Server 数据库的单台机器， PRODUCTION - 带有客户端使用的 SQL Server 数据库的单台机器

现在，每当我在处理应用程序并且代码发生更改时，我可以在每次测试应用程序时删除并重新创建数据库（对于 LOCALHOST 和 TEST 环境也是如此）。我创建了适当的数据库初始化程序，用测试数据为数据库播种，我对它们非常满意。

但是，随着模型更改时的每个新构建，我希望以不会丢失整个数据的方式处理 PRODUCTION 数据库更改。因此，在 Visual Studio 2012 中有“SQL Schema Compare”工具，我只是想知道它是否不足以管理数据库中的所有更改以进行 PRODUCTION 开发？我可以将我的 {local} 数据库架构与 PRODUCTION 架构进行比较，然后简单地应用所有更改吗？

现在，我想问一下 Code First 迁移的意义何在？为什么要通过它来管理数据库中的所有变化？我能找到的唯一原因是允许执行各种“插入”和“更新”命令。但是我认为，如果数据库设计正确，则不需要执行这些命令。（这是另一个讨论的主题，所以我不想详细说明）。无论如何，我想问 - Code First 迁移相对于 Code First + Schema Compare 模式的真正优势是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T14:03:41.023

它简化了部署。如果您没有在代码中管理迁移，那么您将不得不在生产环境中手动运行适当的增量脚本。通过 EF 迁移，您可以将应用程序配置为在启动时自动将数据库迁移到最新版本。

通常，在 EF 迁移之前，如果您想自动执行此操作，则必须在自定义安装例程期间运行适当的 delta 脚本，或者将一些基础架构写入您的应用程序，以在代码中运行 delta 脚本。这需要知道当前的数据库版本，以便它知道要运行哪个脚本，通常在 DbVersion 表或类似的东西中。通过 EF 迁移，此管道已为您准备就绪。

使用迁移意味着模型和数据库更改的对齐是自动化的，因此更易于管理。

# php - google.visualization.DataTable( )?

> ID：12130612
> 
> 赞同：0
> 
> 时间：2012-08-26T13:43:05.943
> 
> 标签：php, google-visualization

我正在尝试使用 Google 可视化和 php/mysql 生成图表。我的数据如下所示：

```
 ['RTI', 3],
      ['USAID', 1],
      ['Task Force', 1],
      ['DFID', 1],
      ['Other', 2] 
```

如果我打印 $jdata 我得到：

```
[{"Response":"Other","Count":"3"},{"Response":"RTI","Count":"3"},{"Response":"USAID","Count":"4"}] 
```

看起来很接近。有什么建议吗？

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

  // Load the Visualization API and the piechart package.
  google.load('visualization', '1.0', {'packages':['corechart']});

  // Set a callback to run when the Google Visualization API is loaded.
  google.setOnLoadCallback(drawChart);

  // Callback that creates and populates a data table,
  // instantiates the pie chart, passes in the data and
  // draws it.
  function drawChart() { 
```

```
 // Create the data table.
    var data = new google.visualization.DataTable(<?php $jdata ?>);

    // Set chart options
    var options = {'title':"Question1: I'm here to represent:",
                   'width':400,
                   'height':300};

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.PieChart(document.getElementById('chart_div1'));
    chart.draw(data, options);
  }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:46:18.137

`<?php $jdata ?>`什么都不做——你需要回应它—— `<?php echo $jdata ?>`！

# java - 创建一个 Eclipse 和 Netbeans 可以理解的 Java 桌面 UI

> ID：12130615
> 
> 赞同：1
> 
> 时间：2012-08-26T13:43:38.693
> 
> 标签：java, swing, jsr296

**Netbeans**最近从 7.1 版开始[放弃了对基于 Swing 的 Java 桌面应用程序的支持。](http://forums.netbeans.org/topic43775.html)在那之前，我一直认为 Java 应用程序用户界面的创建将是跨平台的。我认为在 Netbeans 设计器中创建的 Swing UI 可以在**Eclipse**中轻松理解和编辑，但显然现在我意识到事实并非如此。

有没有办法通过不依赖于特定于 IDE 的 Java UI 设计器来制作 Java 应用程序用户界面？这是一种 UI 描述形式，可以是 XML 或可以在人们想要使用的不同 IDE 上进行编辑的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T14:35:10.913

那个帖子开始了。。

> 我刚刚安装了 NB 7.1 Beta，并尝试打开我们众多基于 Swing 应用程序**框架**的应用程序之一，..

好的。你可以停止阅读那里，听起来像[JSR 296](http://java.sun.com/developer/technicalArticles/javase/swingappfr/)已经死了多年。纯摇摆应用程序。应该没事。

# html - 使内部 div 100% 的外部

> ID：12130616
> 
> 赞同：0
> 
> 时间：2012-08-26T13:43:45.050
> 
> 标签：html, css

这是一个非常简单的问题，但我似乎无法在任何地方找到答案。有没有办法通过使用百分比使嵌套 div 100% 成为外部 div？div 被动态插入到不同宽度的外部 div 中。现在我遇到的问题是它溢出了外部 div。当前的css是这样的：

```
 .bottomDiv
   {
       overflow: hidden;
       height: 30px;
       bottom: 0px;
       left: 0px;
       color: red;
       position: absolute;
   } 
```

div 位于外部 div 的底部。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:10:17.690

好的，这是一个非常糟糕的问题，我对那些试图回答这个问题的人感到非常抱歉。就我解决这个问题而言，似乎在 CSS 上设置 100% 并不能解决这个问题，因为 div 在另一个内部并不“完全”。将 div 设置为 absolute 将使 100% 相对于主体而不是包装 div。要解决这个问题，您需要一些 JavaScript 动态附加 div，然后将父宽度应用到子宽度。

如果您遇到此问题，请尝试以下操作（这是针对多个 div 的）：

```
 $(".outerDiv").each(function(){
        $(this).append("<div style='width:"+ $(this).width() +"px' class='slateExpand'></div>");
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:51:20.160

你可以做这样的事情：

```
<div id="outer">
    <div id="inner">

    </div>
</div> 
```

使用这个 CSS：

```
#outer {
    position: absolute ;
    width: 50% ;
    height: 50% ;
    }

#inner {
    position: absolute ;
    bottom: 0% ;
    width: 100% ;
    height: 10% ;
    } 
```

# android - Android NDK：如何在没有 java 的情况下覆盖 NativeActivity 中的 onBackPressed？

> ID：12130618
> 
> 赞同：8
> 
> 时间：2012-08-26T13:43:59.947
> 
> 标签：android, android-ndk, native-code

我的应用程序完全用 C/C++ 编写`NativeActivity`，它没有 Java 代码（基于“native-activity”NDK 示例）。按“后退”按钮将其关闭（破坏活动），但我需要此按钮的其他行为，因为我有自己的 UI 和通过 OpenGL 显示的菜单。

[在我阅读](https://stackoverflow.com/questions/8501732/does-android-application-development-guideline-allow-disabling-default-menu-and)时，为了改变“后退”按钮的行为，我需要重写`onBackPressed()`Java 活动类的方法。但是我不使用Java，我可以从C/C++ 中使用这个方法来覆盖它吗？

如果不是，是否有另一种方法可以使用 NDK 处理“后退”按钮，**而不需要 Java 代码？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T02:13:04.453

已解决：为了防止默认的“返回”按钮行为，在处理关键事件时返回 1 就足够了：

```
int32_t app_handle_event(struct android_app* app, AInputEvent* event) {
    if (AKeyEvent_getKeyCode(event) == AKEYCODE_BACK) {
        // actions on back key
        return 1; // <-- prevent default handler
    };
    // ...
    return 0;
} 
```

# asp.net - 在 asp.net 网站内创建一对一聊天

> ID：12130622
> 
> 赞同：0
> 
> 时间：2012-08-26T13:44:44.190
> 
> 标签：asp.net, chat

我想在 asp.net 网站内创建一个类似一对一聊天的 facebook，但我无法弄清楚机制或它是如何工作的。

到目前为止，我只有一个这样设计的数据库表：

```
 id | user1 | user2 | datetime | message 
```

我如何开始，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:55:21.953

看看这个： [ASP.NET 中的简单聊天应用程序](http://www.codeproject.com/Articles/8307/Simple-Chat-Application-in-ASP-NET)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:03:15.127

在 asp.net 中构建聊天的最有效方法是使用[IHttpAsyncHandler](http://msdn.microsoft.com/en-us/library/system.web.ihttpasynchandler.aspx)和 ajax 请求。

这是一个与 ajax 一起[实现这个的完全工作的项目。](http://www.codeproject.com/Articles/42734/Using-IHttpAsyncHandler-and-XMLHttpRequest-to-push)

异步请求允许您延迟请求的响应，直到发生外部事件。
用户调用此处理程序并等待有人向他发送消息。
一旦您将消息发送给用户，它们就会被传递。收到消息后，客户端发出另一个请求并等待下一条消息。
这比轮询站点以检查消息是否到达要有效得多。

使用异步处理程序还可以确保在用户等待消息到来时不会浪费 asp.net 线程等待。

这可以确保即使网站用户数量增加，您的聊天也可以很好地扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T14:20:07.627

我会考虑将 Signal R 用于此类功能 - 请参阅本指南，了解使用 signal r 实现聊天功能 - 应该可以消除开发过程中的很多痛苦[http://geekswithblogs.net/jeroenb/archive/2011/12 /14/signalr-starter-application.aspx](http://geekswithblogs.net/jeroenb/archive/2011/12/14/signalr-starter-application.aspx)

# ios - 使用 AFNetworking 上传 iOs Multiples 文件

> ID：12130623
> 
> 赞同：3
> 
> 时间：2012-08-26T13:44:51.737
> 
> 标签：ios, xcode, file-upload, afnetworking

我正在为我的 iPhone 项目使用 AFnetworking，我是 Objective C 的初学者。

我知道如何使用块上传多个文件，如此处所述： [如何使用 AFNetworking 上传多个文件](https://stackoverflow.com/questions/9559075/how-do-you-upload-multiple-files-with-afnetworking)

因此，在块中，我们可以添加任意数量的 formData 元素。

但就我而言，我不知道我将拥有多少张图片，因为用户可以自由选择很多张。图片的数据存储到一个数组中。

所以我在块中尝试了类似的东西，但只上传了最后一个元素：

```
for(NSDictionary *dict in imagesInfo) {

      UIImage *theFile = [dict objectForKey:UIImagePickerControllerOriginalImage];
      NSData *imageData = UIImageJPEGRepresentation(theFile, 0.5);
     [formData appendPartWithFileData:imageData name:@"name" fileName:@"name.jpg" mimeType:@"image/jpeg"];

} 
```

无论如何，当第一个请求完成时，我可以通过启动另一个请求来使其工作。但我想有一个最好的方法让它工作吗？

坦克很多，

鲁道夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:26:31.883

AFNetworking 有几个很好的实用程序来管理“一批”请求。您应该特别考虑 AFHTTPClient 类中的 3 种方法：

enqueueBatchOfHTTPRequestOperationsWithRequests //批处理 enqueueBatchOfHTTPRequestOperations //批处理 enqueueHTTPRequestOperation //单个请求

基本上，您将遍历您的照片数组并构建一个新的 NSMutableURLRequest (s) 数组（就像您现在可能正在做的那样）。对于每张照片，创建一个 NSMutuableURLRequest 或一个 HTTPRequestOperation 并将其弹出到数组中。使用上述方法之一将新的 HTTP URL 请求数组传递给 AFNetworking。

如果要将上传过程作为批处理进行管理，请使用其中一种批处理方法。如果您只想触发并忘记，请使用 enqueueHTTPRequestOperation，它仍然为您提供所有 AFNetworking 的快乐。

它看起来像这样：

```
AFHTTPClient *photoUploader = [[AFHTTPClient alloc] init];
[photoUploader enqueueBatchOfHTTPRequestOperationsWithRequests:self.photosWrappedInNSURLS   progressBlock:^(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations) {

    //block gets called after each succesful operation
    //useful for messages like 1 of 3 complete

} completionBlock:^(NSArray *operations) {

    //block gets called after all requests are complete
}]; 
```

如果您阅读文档，他们会建议您创建自己的 AFHTTPClient 子类并将其构建为单例。您不必以这种方式使用它，但如果您有多种类型的连接返回到同一主机或服务，它会非常方便。我发现它在我的上一个项目中非常有用，并且取得了很好的成功。

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:13:46.257

试试 ASIHTTPRequest 库。使用这个库，您可以同时或一个一个地下载/上传多个文件：http: [//allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:58:26.117

您应该为每个文件指定不同的名称。我怀疑这会解决它。

# javascript - 如何在 jquery ajax 成功 html 响应中找到输入隐藏元素？

> ID：12130624
> 
> 赞同：1
> 
> 时间：2012-08-26T13:45:02.747
> 
> 标签：javascript, jquery, ajax

我正在通过 ajax 调用函数并且我正在正确获取数据，但我无法访问返回的 html 中的隐藏元素。

### 代码：

```
success: function(data){
        var $response = $(data);
        var errorMessage = $response.filter('#errorMessage').val();
        alert(errorMessage);

} 
```

我越来越`"undefined"`警觉了。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:47:38.280

你可以试试这个`find`方法：

```
var errorMessage = $response.find('#errorMessage').val(); 
```

# android - 了解 Android 中的内部版本号

> ID：12130631
> 
> 赞同：0
> 
> 时间：2012-08-26T13:45:58.007
> 
> 标签：android, android-build

我最近从市场上买了一部新的安卓手机。我很难理解手机的构建代码。我的构建代码是

> TBW591331_8376_V3018

我搜索了网络，但我没有找到任何以 TBW 开头的版本号。谁能告诉我这是什么意思以及如何更改内部版本号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-28T07:10:03.897

我从其他论坛看到：

**第一个字母**= 发布系列，例如 F 是 Froyo
**第二个字母**= 允许 Google 识别构建的确切代码分支的分支代码，按照惯例，R 是主要的发布分支
**第三个字母和两个数字**= 日期代码。字母计算季度，A 为 2009 年第一季度。因此，F 为 2010 年第二季度。两位数计算季度内的天数，因此 F85 为 2010 年 6 月 24 日。
**最后一个字母**= 与同一日期代码相关的各个版本，从 A 开始顺序; A 实际上是隐含的，为简洁起见通常省略。

[链接源](http://forum.xda-developers.com/galaxy-nexus/general/help-understand-android-build-t1655863)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T13:50:35.180

您不应该更改内部版本号，它必须是唯一编号，但如果您的设备已植根并安装了具有自己内部版本号的自定义 rom，则可以。

# cocoa - 在由各种文件组成的 NSDocument 中使用 NSFileWrapper

> ID：12130632
> 
> 赞同：9
> 
> 时间：2012-08-26T13:46:02.490
> 
> 标签：cocoa, nsdocument, nsfilewrapper

我正在制作一个基于文档的 Cocoa 应用程序，其中文档是动态的文件集合（用户可以添加或删除文件）。特别是，**保存和打开操作应该尽可能快**。

如果我正确理解了文档，我应该使用[`NSFileWrapper`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSFileWrapper_Class/Reference/Reference.html)和实现[`fileWrapperOfType:error`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/fileWrapperOfType:error:)and [`readFromFileWrapper:ofType:error:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/readFromFileWrapper:ofType:error:). 但是，我找不到完整的代码示例。我应该如何实现以下方法？

```
#pragma mark - NSDocument

- (NSFileWrapper *)fileWrapperOfType:(NSString *)typeName error:(NSError **)outError {
    return nil;
}

- (BOOL)readFromFileWrapper:(NSFileWrapper *)fileWrapper ofType:(NSString *)typeName error:(NSError **)outError {
    return YES;
}

#pragma mark - My methods

- (void) addFileToDocumentFromURL:(NSURL*)fileURL {
    // Add a file to the document given the file URL
}

- (void) removeFileFromDocumentWithName:(NSString*)name {
    // Remove a file from the document given the file name
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T06:38:14.517

将文档中的[点点](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/DocumentPackages/DocumentPackages.html)[滴滴](https://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/AdvancedTopics/AdvancedTopics.html#//apple_ref/doc/uid/TP40011179-CH7-SW10)放在一起：

```
- (NSFileWrapper*) fileWrapperOfType:(NSString *)typeName error:(NSError *__autoreleasing *)outError {
    return self.documentFileWrapper;
}

- (BOOL) readFromFileWrapper:(NSFileWrapper *)fileWrapper ofType:(NSString *)typeName error:(NSError *__autoreleasing *)outError {
    self.documentFileWrapper = fileWrapper;
    return YES;
}

- (void) addFileToDocumentFromURL:(NSURL*)fileURL {
    NSData* fileData = [NSData dataWithContentsOfURL:fileURL];
    NSFileWrapper *fileWrapper = [[NSFileWrapper alloc] initRegularFileWithContents:fileData];
    fileWrapper.preferredFilename = [fileURL lastPathComponent];
    [self.documentFileWrapper addFileWrapper:fileWrapper];
    [self updateChangeCount:NSChangeDone];
}

- (void) removeFileFromDocumentWithName:(NSString*)name {
    NSFileWrapper *fileWrapper = [self.documentFileWrapper.fileWrappers objectForKey:name];
    if (fileWrapper) {
        [self.documentFileWrapper removeFileWrapper:fileWrapper];
        [self updateChangeCount:NSChangeDone];
    }
}

- (NSFileWrapper*) documentFileWrapper {
    if (!_documentFileWrapper) { // New document
        _documentFileWrapper = [[NSFileWrapper alloc] initDirectoryWithFileWrappers:nil];
    }
    return _documentFileWrapper;
} 
```

# c# - 提高网站数据库的搜索性能

> ID：12130638
> 
> 赞同：2
> 
> 时间：2012-08-26T13:46:44.807
> 
> 标签：c#, sql, asp.net-mvc, linq-to-sql

有什么办法可以改进这个查询，我对返回的结果很满意，但性能真的很差，在这种情况下联合会导致往返吗？通过使用存储过程来获得性能，这样的事情是否可能实现？是否可以在结果上做一些类似自我加入的事情，它会提高性能吗？

```
 List<string> words = Util.Search.SplitByWhiteSpace(q);

        using (WebsitesDataContext context = new WebsitesDataContext())
        {
            IQueryable<WebsitesRanked> query = Enumerable.Empty<WebsitesRanked>().AsQueryable();
            query = query.Union(context.Websites.Where(x => x.Title.Contains(q)).Select(x => new WebsitesRanked { Webiste = x, Rank = 100 }));
            query = query.Union(context.Websites.Where(x => x.Description.Contains(q)).Select(x => new WebsitesRanked { Webiste = x, Rank = 100 }));
            query = query.Union(context.Websites.Where(x => x.Keywords.Contains(q)).Select(x => new WebsitesRanked { Webiste = x, Rank = 100 }));
            query = query.Union(context.Websites.Where(x => x.Url.Contains(q)).Select(x => new WebsitesRanked { Webiste = x, Rank = 100 }));

            foreach (var word in words)
            {
                string keyword = word;
                query = query.Union(context.Websites.Where(x => x.Title.Contains(word)).Select(x => new WebsitesRanked { Webiste = x, Rank = 20 }));
                query = query.Union(context.Websites.Where(x => x.Description.Contains(word)).Select(x => new WebsitesRanked { Webiste = x, Rank = 20 }));
                query = query.Union(context.Websites.Where(x => x.Keywords.Contains(word)).Select(x => new WebsitesRanked { Webiste = x, Rank = 20 }));
                query = query.Union(context.Websites.Where(x => x.Url.Contains(word)).Select(x => new WebsitesRanked { Webiste = x, Rank = 20 }));
            }

           var results = query.GroupBy(x => x.Webiste).Select(x => new WebsitesRanked { Webiste = x.First().Webiste, Rank =  x.Sum(s => s.Rank) }).OrderByDescending(x => x.Rank).Select(x => x.Webiste);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:19:10.550

您可以创建字典表：一个表分区按字母（表分区以'a'开头的单词，另一个'b'......）这个表将有这些列：

```
column 1:Word (each word in your table will be setted here using a nightly schedule task or Background schedule task)
column 2:Website 
column 3:Rank (each time a word is found, increment this rank) 
```

只需查询一个表并使用分区来提高性能，您将获得良好的性能，因为工作将在计划任务中为您完成

# android - 从 Android 应用程序的 Django 后端检索页面，该页面需要使用 OpenID 登录

> ID：12130640
> 
> 赞同：0
> 
> 时间：2012-08-26T13:46:54.470
> 
> 标签：android, django, openid

我想开发一个 Android 应用程序，它将结果存储在数据库中。我使用 Django 创建的这个数据库，并且因为我想让用户保持简单，我启用了 OpenID。因此，用户可以使用其正常的 Google 帐户登录。

这个想法是，最终，用户还应该能够从网站将项目添加到数据库中。所以仅仅创建随机的用户名和密码是行不通的。

我现在创建了一个带有 webview 的 Activity，它允许用户使用 OpenID 登录网站。然后它捕获 sessionid，我的想法是使用这个 sessionid，然后获取需要用户登录的 url。但是，这似乎不起作用。我已经将@csrf_exempt 添加到所有这些视图中。但是现在，当我尝试获取该页面时，我得到了一些标题为“OpenID transaction in progress”的东西

我应该怎么做才能得到真实的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:08:09.447

好的，在 Chrome 中进行了更多检查后，我还注意到了 Cookie 标头。显然，您需要在 cookie 和标头中将 sessionid 作为 cookie 标头发送。

然后一切正常！

# jquery - 在鼠标悬停时显示隐藏内容 - JQuery

> ID：12130646
> 
> 赞同：0
> 
> 时间：2012-08-26T13:47:42.573
> 
> 标签：jquery, jquery-tabs

请帮忙。我对 JQuery 很陌生。

我为我正在处理的标签导航采用了 jquery 工具提示。

前提是当您悬停选项卡时，会显示一个浮动跨度（工具提示）。悬停成功。但是包含内容的 div 不显示并且一直卡在第一个内容 div 上。

提前感谢您的任何建议。

```
<script type="text/javascript">
    $(document).ready(function(){
    $('.tabcont div:not(:first)').hide();

    $('#ltabs ul li a').append('<span></span>');
    $('#ltabs ul li a').hover(
        function(){
            $(this).find('span').animate({opacity:'show', top: '-2'}, 'fast');
            var hoverTexts = $(this).attr('name');
            $(this).find('span').text(hoverTexts);
        },
        function(){
            $(this).find('span').animate({opacity:'hide', top: '-2'}, 'fast');
        });
        return false;
    });
</script>

<div id="ltabs">
                    <ul>
                        <li class="tab"><a href="#content1" name="Tab1" class="active"><h1>Tab1</h1></a></li>
                        <li class="tab"><a href="#content2" name="Tab2"><h1>Tab2</h1></a></li>
                        <li class="tab"><a href="#content3" name="Tab3"><h1>Tab3</h1></a></li>
                    </ul>
                    <div class="tabcont">
                    <div id="content1">
                    <!--LContent1-->
                        <h2>Title</h2>
                        <p>1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque vel quam augue, vel rhoncus arcu</p>  
                        <h2>Title</h2>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque vel quam augue, vel rhoncus arcu</p>
                    </div>
                    <div id="content2">
                    <!--LContent2-->
                        <h2>Title</h2>
                        <p>2 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque vel quam augue, vel rhoncus arcu</p>  
                        <h2>Title</h2>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque vel quam augue, vel rhoncus arcu</p>
                    </div>
                    <div id="content3">
                    <!--LContent3-->
                        <h2>Title</h2>
                        <p> 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque vel quam augue, vel rhoncus arcu</p> 
                        <h2>Title</h2>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque vel quam augue, vel rhoncus arcu</p>
                    </div>  
                    </div>      
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:58:40.680

It's not a jQuery, but a CSS issue. You have to position your tooltip relatively to its parent - [**DEMO**](http://jsfiddle.net/tZLZT/1/)

```
#ltabs ul li a {
    display: block;
    position: relative;
}

#ltabs ul li a span {
    position: absolute;
    left: 80px;
    top: 30px;
    z-index: 999;
} 
```

# java - 自定义注释作为方法记录的拦截器

> ID：12130653
> 
> 赞同：37
> 
> 时间：2012-08-26T13:49:18.280
> 
> 标签：java, logging, annotations, interceptor

爪哇大师，

我对这个很陌生`annotations`，也没有搜索过很多，所以请多多包涵...

我想实现一个`Custom Annotation`方法`intercept`调用；从一些非常基本的东西开始，它可以只打印方法名称和参数，这样我就可以避免该`logger`语句。

像这样的示例调用：

```
public MyAppObject findMyAppObjectById(Long id) throws MyCustomException {
    log.debug("in findMyAppObjectById(" + id + ")");
    //....
} 
```

可以转换为：

```
@LogMethodCall(Logger.DEBUG)
public MyAppObject findMyAppObjectById(Long id) throws MyCustomException {
    //....
} 
```

我能得到一些提示吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-26T14:24:51.630

根据您对我的评论的回答，您将无法仅使用注释来执行此操作。当然，您可以创建注释并创建一些反射代码，然后检测并执行一些代码，但这不会对您的代码进行太多更改，因为您需要在调用`parser`方法之前调用该方法，我认为不会对您有太大帮助，因为您需要在每次调用之前调用解析器方法。

如果您需要您提到的行为（自动调用），您需要将您的注释与一些 AOP 框架结合起来，例如 Spring（纯 Java）或 AspectJ（AspectJ 代码）。然后，您可以设置切入点，每次到达该点时，可能会执行一些代码。然后您可以配置为在方法执行之前和/或之后执行一些代码。

如果第一种情况足够，您可以执行以下操作：

**记录器：枚举**

```
public enum Logger {
    INFO,
    DEBUG;
} 
```

**LogMethodCall：注解**

```
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention( RetentionPolicy.RUNTIME ) // the annotation will be available during runtime
@Target( ElementType.METHOD )         // this can just used in methods
public @interface LogMethodCall {

    Logger logLevel() default Logger.INFO;

} 
```

**人员：带注释的类**

```
public class Person {

    // will use the default log level (INFO)
    @LogMethodCall
    public void foo( int a ) {
        System.out.println( "foo! " + a );
    }

    @LogMethodCall( logLevel = Logger.DEBUG )
    public void bar( int b ) {
        System.out.println( "bar! " + b );
    }

} 
```

**Utils：具有日志静态方法的类（这将执行“解析”）**

```
public class Utils {

    public static void log( Object o, String methodName ) {

        // gets the object class
        Class klass = o.getClass();

        // iterate over its methods
        for ( Method m : klass.getMethods() ) {

            // verify if the method is the wanted one
            if ( m.getName().equals( methodName ) ) {

                // yes, it is
                // so, iterate over its annotations
                for ( Annotation a : m.getAnnotations() ) {

                    // verify if it is a LogMethodCall annotation
                    if ( a instanceof LogMethodCall ) {

                        // yes, it is
                        // so, cast it
                        LogMethodCall lmc = ( LogMethodCall ) a;

                        // verify the log level
                        switch ( lmc.logLevel() ) {
                            case INFO:
                                System.out.println( "performing info log for \"" + m.getName() + "\" method" );
                                break;
                            case DEBUG:
                                System.out.println( "performing debug log for \"" + m.getName() + "\" method" );
                                break;
                        }

                    }
                }

                // method encountered, so the loop can be break
                break;

            }

        }

    }

} 
```

**AnnotationProcessing：带有代码的类，用于测试注释处理**

```
public class AnnotationProcessing {

    public static void main(String[] args) {

        Person p = new Person();
        Utils.log( p, "foo" );
        p.foo( 2 );
        Utils.log( p, "bar" );
        p.bar( 3 );

    }
} 
```

当然，您需要改进我的代码以满足您的需求。这只是一个起点。

有关注释的更多信息：

*   [http://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html)
*   [http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html](http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html)
*   [http://tutorials.jenkov.com/java-reflection/annotations.html](http://tutorials.jenkov.com/java-reflection/annotations.html)

更多关于 AOP：

*   [http://en.wikipedia.org/wiki/Aspect-oriented_programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)
*   [http://static.springsource.org/spring/docs/3.0.x/reference/aop.html](http://static.springsource.org/spring/docs/3.0.x/reference/aop.html)
*   [http://www.eclipse.org/aspectj/](http://www.eclipse.org/aspectj/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-04-04T12:10:51.280

将 Spring AOP 与 Java Annotation 一起使用。Spring AOP 否定了使用 Java Reflection 编写用于解析 Java 类的 util 类的要求。

例子 -

1.  自定义注释 -

    ```
     @Retention(RetentionPolicy.RUNTIME)
     @Target(ElementType.METHOD)
     public @interface A {            
          boolean startA() default false;

          boolean endA() default false;
     } 
    ```

2.  方面-

    ```
     @Aspect
      public class AAspect {
          @Pointcut(value = "execution(* *.*(..))")
          public void allMethods() {
                  LOGGER.debug("Inside all methods");
          }

         @Before("allMethods() && @annotation(A)")
         public void startAProcess(JoinPoint pjp, A a) throws Throwable {
              if (a.startA()) {
                    //Do something
         }
     } 
    ```

3.  启用 AspectJ -

    ```
     @Configuration
     @EnableAspectJAutoProxy
     public class AConfig {

     } 
    ```

4.  在代码中使用 -

    ```
     @A(startA = true, endA = true)
     public void setUp(){
           //Do something- logic
     } 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T08:16:12.047

如前所述，AOP 和注释是最好的选择。[我建议使用jcabi-aspects](http://www.jcabi.com/jcabi-aspects/)的现成机制（我是开发人员）：

```
@Loggable(Loggable.DEBUG)
public String load(URL url) {
  return url.openConnection().getContent();
} 
```

所有方法调用都将记录到 SLF4J。

# php - 从php中的数组内的对象获取成员值

> ID：12130654
> 
> 赞同：1
> 
> 时间：2012-08-26T13:49:37.107
> 
> 标签：php, arrays, object

似乎找不到这个问题的答案：如何从对象数组中获取特定值（成员值）？

我的代码很简单：

```
$people = array();

class Person {
    public $id;
    public $name;
    public $family_name;
    public $dob;
    public $image;

    public function __construct($id, $name, $family_name, $dob, $image){
        $this->$id = (string) $id;
        $this->$name = (string) $name;
        $this->$family_name = (string) $family_name;
        $this->$dob = (string) $dob;
        $this->$image = (string) $image;
    }

    public function get_id(){
        return $this->id;
    }
}

for ($i=0;$i<$no_clients;$i++)
{
    array_push($people, new Person($_SESSION['user_clients'][$i]['client_id'], $_SESSION['user_clients'][$i]['client_name'], $_SESSION['user_clients'][$i]['client_family_name'], $_SESSION['user_clients'][$i]['client_dob'], ROOT_URL.$_SESSION['user_clients'][$i]['client_img']));
} 
```

现在我想从 people 数组中获取其中一个人的 id

```
$error = $people[$i]->get_id(); //doesn't seem to work
//not getting a value back even though the session variable is correct 
```

正如您可能已经看到的，我是 PHP 新手，所以任何建议都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T13:55:30.267

您的构造函数错误（属性前没有 $ 符号）

```
 $people = array();

    class Person {
        public $id;
        public $name;
        public $family_name;
        public $dob;
        public $image;

        public function __construct($id, $name, $family_name, $dob, $image){
            $this->id = (string) $id;
            $this->name = (string) $name;
            $this->family_name = (string) $family_name;
            $this->dob = (string) $dob;
            $this->image = (string) $image;
        }

        public function get_id(){
            return $this->id;
        }
    }

    for ($i=0;$i<$no_clients;$i++)
    {
        $p=new Person($_SESSION['user_clients'][$i]['client_id'],       $_SESSION['user_clients'][$i]['client_name'], 
$_SESSION['user_clients'][$i]['client_family_name'], 
$_SESSION['user_clients'][$i]['client_dob'], 
ROOT_URL.$_SESSION['user_clients'][$i]['client_img']);
       //print_r($p); //--> check your object
        array_push($people, $p);
    } 
```

//print_r($people);

```
Array ( [0] => Person Object ( [id] => 1 [name] => M [family_name] => C [dob] => 2011-07-21 [image] => image/1_margaret.jpg ) ) 
```

编辑：

重置 $i 计数器，因为它的最后一个值可能是 1。甚至更好地使用`foreach`循环：

```
foreach ($people as $person){
    echo $person->get_id();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T13:57:28.987

Your constructor code is not correct, you're incorrectly referencing your properties. Remove the $ from the start of the property names.

Eg change

```
$this->$id = $id 
```

to

```
$this->id = $id 
```

# c# - linq 加入 guid 和字符串列

> ID：12130655
> 
> 赞同：6
> 
> 时间：2012-08-26T13:49:39.063
> 
> 标签：c#, linq, entity-framework-4, linq-to-entities

我是 linq 的新手。我需要运行一个连接两列（`AnonymousUser.AnonymousId`being`uniqueidentifier`和 comment.UserId being `nvarchar(100)`）的查询，如下所示：

```
 using (CommentEntities db = new CommentEntities())
        {
            // filteredComments is a query that is not run until the next .ToList()
            IQueryable<Comment> filteredComments = this.CommentGetList(...);
            var query = from comment in filteredComments
                         // following line is the syntax error, because columns' types don't match
                         join user in db.AnonymousUsers on comment.UserId equals user.AnonymousId into gj
                         from userNull in gj.DefaultIfEmpty()
                         select new CommentWithName
                         {
                             Comment = comment,
                             UserId = comment.UserId,
                             FirstName = (userNull == null ? "" : userNull.Name),
                             LastName = "",
                             Email = (userNull == null ? "" : userNull.Email)
                         };
            return query.ToList();
        } 
```

首先，我很高兴用`.ToString()`! 事实证明，实体框架不知道如何将其转换为 sql。对于`Guid.Parse(string)`. 也`new Guid(string)`不能在 linq 中用于实体（仅允许无参数构造函数）！

所以经过搜索，我发现在 EF 4.0 中不可能做这样的事情！我将我的代码迁移到了一个我对此并不满意的存储过程。

是否可以告诉实体框架`CAST`在 SQL 中使用 a？

这个问题有什么解决办法吗？有什么方法可以将逻辑带入代码中？

**注意**：我打算**一次性**完成。否则，一种可能的解决方案是从第一个表中获取实体，并将 Id 放入列表中并从第二个表中获取实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:15:57.710

如果您`list`是对象列表，您可以将其转换为以 Guid 作为标识符的类型，首先创建新的匿名类型，然后根据 过滤它`UserId`，确定`UserId`哪个是 type `int`，不会包含在 join 中：

```
 int output = 0;

     var secondList = list.Where(x=>!int.TryParse(x.UserID, out output))
                     .Select(x=>new {Comment = x, ID = new Guid(x.UserID))
                     .ToList(); 
```

现在您可以使用`secondList`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:47:44.597

在应用这些方法之前调用 toList()。喜欢：

```
var Product = db.Products.Where(p => p.ProductId == Guid.Parse("B4E913F9-166C-49BA-AADE-6DB889D1756F")).Single(); 
```

会抛出一个

> c# LINQ to Entities 不识别方法 "System.Guid Parse" (System.String)' 方法，并且该方法不能翻译成存储表达式

但这有效：

```
var Product = db.Products.ToList().Where(p => p.ProductId == Guid.Parse("B4E913F9-166C-49BA-AADE-6DB889D1756F")).Single() 
```

ps：我认为您将失去延迟加载，但您可以在调用 .ToList() 之前使用 .Include 进行急切加载。

# azure - 当我从 Azure 表存储中检索时，有什么方法可以跳过行吗？

> ID：12130657
> 
> 赞同：2
> 
> 时间：2012-08-26T13:49:43.207
> 
> 标签：azure, azure-table-storage

我相信过去这个问题的答案是否定的。但是，最近的版本有什么变化，或者有没有人知道我可以做到这一点的方法。我正在使用数据表，并且希望能够执行诸如跳过 50 次检索 50 行之类的操作。跳过 100 检索 50 行等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:07:21.643

仍然无法跳过行。唯一支持的导航结构是顶部。表服务 REST API 是访问 Wndows Azure 存储的权威方法，因此它的[文档](http://msdn.microsoft.com/en-us/library/windowsazure/dd894031)是了解可能或不可能的首选位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T17:37:51.583

你在这里问的可以使用**continuation tokens**。Scott Densmore 不久前在博客中解释了如何在显示表格时使用延续令牌进行分页（就像您在这里使用 DataTables 提出的问题）：[使用 Windows Azure 表存储进行分页](http://scottdensmore.typepad.com/blog/2010/04/paging-with-windows-azure-table-storage.html)。博客文章展示了如何在使用延续标记在页面之间前后移动时显示 3 个项目的页面：

![在此处输入图像描述](../Images/4d7a4bbf827cf43e0b06d1ed264418d6.png)

除此之外，Steve 的帖子也描述了相同的概念：[Paging Over Data in Windows Azure Tables](http://blog.smarx.com/posts/paging-over-data-in-windows-azure-tables)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T01:24:14.257

是（有点）和不。不，从某种意义上说，REST 头不直接支持 Skip 操作。您当然可以在内存中执行此操作，但这会破坏目的。

但是，如果您正确地构建数据，您当然可以实际执行此模式。我们自己做这样的事情。我们将分区键与日期时间对齐，并使用 RowKey 作为鉴别器。这意味着我们总是可以查明我们感兴趣的分区范围，然后 Take() 一些数据量。因此，例如，我们可以通过指定唯一查询（跳过我们不想要的数据）轻松 Take() 每小时的前 20 行。分区键每小时简单对齐，然后我们可以选择使用 RowKey 进一步区分 - 最后，我们只获取数据。当并行执行时，这很有效。

同样，技术上更正确的答案是否定的。但是，您可以使用 PK 和 RK 巧妙地近似它。

# java - 为什么不打印这个异常？为什么显示错误？

> ID：12130659
> 
> 赞同：4
> 
> 时间：2012-08-26T13:49:56.943
> 
> 标签：java, exception

如果我试图打印“a”的值，为什么会显示错误？为什么异常变成了错误？

```
class Ankit1
{
    public static void main(String args[])
    {
        float d,a;
        try
        {
            d=0;
            a=44/d;
            System.out.print("It's not gonna print: "+a); // if exception doesn't occur then it will print and it will go on to the catch block
        }
        catch (ArithmeticException e)
        {
            System.out.println("a:" + a); // why is this an error??
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T13:53:25.153

如果您看到错误

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    The local variable a may not have been initialized

    at your.package.Ankit1.main(Ankit1.java:18) 
```

其中明确指出`The local variable a may not have been initialized`

您收到此错误，因为您的变量`a`未初始化。

如果您想打印错误消息，请尝试打印...`e.getMessage()`或`p.printStackTrace()`完整的堆栈跟踪。

`a`用这样的一些值来修复这个简单的初始化......

```
float a = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T13:56:41.393

> "if i am trying to print value of "a" why its showing error?

Because dividing by zero throws an exception before a is initialized.

For printing the error you can print exception message or the whole stacktrace:

```
catch(ArithmeticException e)
{
   System.out.println(e.getMessage());
   e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T13:54:17.653

`a`没有任何价值。由于发生了异常`44/d`；声明，因为可能没有价值`a`。

```
Ankit1.java:14: variable a might not have been initialized
            System.out.println("Print hoga"+a);//why error come?? 
```

这是因为变量 a 未初始化。

此外，这个 44/d 语句也不会抛出任何 ArithmeticException，因为它具有浮点运算，因此**没有除零异常，而是**会产生无穷大。
更多请看[这里](https://stackoverflow.com/q/12130800/586836)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-26T13:52:18.503

`a`未初始化
初始化默认值`d`和`a`

```
float d = 0.0f;  
float a = 0.0f; 
```

或使用`Float`代替`float`

```
Float a = null; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-26T14:08:29.977

你定义`float d,a;`但你没有初始化它们。如果您以后也不这样做，那么在您使用它们之前，这是一个编译时错误。
在你的`try`你做：
`d=0;
a=44/d;`

但是由于您在 a 中初始化它们`try`并且您在编译器内部访问它们会`catch`抱怨`a`未初始化。如果你替换为`d`你也会得到同样的错误。
要解决这个问题：

`float d = 0,a = 0;`

**总是**初始化你的局部变量

# jsf - 如何获取rich:hashParam的参数值

> ID：12130660
> 
> 赞同：0
> 
> 时间：2012-08-26T13:50:02.583
> 
> 标签：jsf, richfaces

我正在尝试使用 rich:hashParam 标签将值传递给 rich:popupPanel，这是我的代码

```
<h:commandLink value="Edit">
<rich:componentControl target="editPanel" operation="show">
    <a4j:param noEscape="true" value="event" />
    <rich:hashParam>
        <a4j:param name="categoryId" value="#{ c.categoryId }" />
        <a4j:param name="categoryName" value="#{ c.name }" />
        <a4j:param name="categoryParent" value="#{ c.parent }" />
    </rich:hashParam>
</rich:componentControl> 
```

这是我的弹出面板，用户可以做某事

```
<rich:popupPanel id="editPanel" autosized="true">
    <!-- how to get value of the rich:hashParam? -->
</rich:popupPanel> 
```

我参考了有关rich:hashParam 的richfaces 文档和示例，以了解如何在rich:popupPanel 中获取值。但似乎该文档包含很少关于rich:hashParam 的示例，并且该示例是硬编码的，而不是由rich:hashParam 传递的。

文件：[这里](http://docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html/chap-Component_Reference-Functionality_extension.html#sect-Component_Reference-Functionality_extension-richhashParam)

示例：[这里](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=hashParam&skin=blueSky)

有人对此有想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:54:17.633

好吧，我自己解决了这个问题。我没有使用 传递参数，而是将参数`rich:hashParam`传递给弹出面板，`a4j:param`并将值分配给支持 bean 属性。然后重新渲染`a4j:outputPanel`显示参数值的一个。

```
<h:form id="editDataForm">
    <!-- server do something with the 'categoryId' parameter it gets -->
    <a4j:commandLink action="#{ testBackingBean.editData }" value="Edit" render="dataContent" oncomplete="#{rich:component('editPanel')}.show()">
        <a4j:param name="data" value="#{ c.categoryId }" assignTo="#{ testBackingBean.categoryId }"/>
    </a4j:commandLink>
</h:form>
<!--...-->
<rich:popupPanel id="editPanel">
    <a4j:outputPanel id="dataContent" layout="inline">
        <h:outputText value="ID:"/>
        <h:outputText value="#{ testBackingBean.dataToEdit.categoryId }"/>
    </a4j:outputPanel>
</rich:popupPanel> 
```

# android - 在我重新启动模拟器之前，已删除的图像仍显示在 android 库中

> ID：12130661
> 
> 赞同：5
> 
> 时间：2012-08-26T13:50:04.270
> 
> 标签：android, emulation

我正在删除一个文件

```
File fileToDelete =  new File("filepath");
Boolean fileDeleted =  fileToDelete.delete(); 
```

fileDeleted 为真，当我检查 DDMS 时，文件不存在，但如果我点击图库，它仍会显示刚刚删除的图像。我必须重新启动模拟器才能看到更改。

有什么方法可以查看更改而无需重新启动模拟器？我正在使用日食

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-26T14:01:20.103

图库正在使用 Android 的媒体数据库来显示媒体列表。在再次扫描文件系统之前，删除文件不会反映在数据库中。例如，这是在重新启动后完成的。

您可以直接通过数据库删除文件，也可以强制它扫描刚刚删除的文件或文件夹。

```
File fileToDelete =  new File("filepath");
boolean fileDeleted =  fileToDelete.delete();

// request scan    
Intent scanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
scanIntent.setData(Uri.fromFile(fileToDelete));
sendBroadcast(scanIntent); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T13:59:24.743

这与画廊如何显示图像文件有关。图像文件的缩略图缓存在 MediaStore 中，所有详细信息都存在于 Mediastore contentProvider 中。

删除文件不会更新此数据库。但是当你重新启动模拟器时，Mediascanning 是由 android 完成的。如果可以触发 MediaScanning，图库将停止显示文件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-05T22:50:25.627

我使用以下代码（这也很像我创建视频的代码，它还告诉媒体系统有关文件更改并正确更新图库）：

```
private void deleteVideo(String videoUrl)
{
    File videoFile = new File(videoUrl);
    if (!videoFile.delete())
    {
        Log.e(TAG, "Failed to delete " + videoUrl);
    }
    else
    {
        MediaScannerConnection.scanFile(mContext,new String[] { videoUrl }, null, new MediaScannerConnection.OnScanCompletedListener() 
        {
            public void onScanCompleted(String path, Uri uri) 
            {
                Log.i("ExternalStorage", "Scanned " + path + ":");
                Log.i("ExternalStorage", "-> uri=" + uri);
            }
        });
    }
} 
```

# javascript - fancybox2 - 如何在加载后自动调整 fancybox 的大小

> ID：12130662
> 
> 赞同：0
> 
> 时间：2012-08-26T13:50:23.570
> 
> 标签：javascript, fancybox

我正在将内容加载到 fancybox2 中，我需要它在加载内容后动态自动调整大小。我如何实现这一目标？谢谢， 阿隆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:20:07.493

更改内容后尝试执行`$.fancybox.update();`（确保您使用的是最新版本）。

# android - 在android中获取错误代码= 1，未创建列

> ID：12130663
> 
> 赞同：0
> 
> 时间：2012-08-26T13:50:25.120
> 
> 标签：android, sqlite

我正在尝试在数据库中插入一条记录，但出现错误。我没有得到什么问题。我通过删除 IMAGEPATH 列尝试了相同的代码，但它仍然为描述提供了相同的错误。

数据库助手：

```
public class GREDatabaseHelper extends SQLiteOpenHelper {

private static final String DATABASE_NAME = "gre_db.db";
private static final int DATABASE_VERSION = 1;

public static final String TABLE_NAME_ENGLISH = "english_table";
public static final String COLUMN_NAME_WORD = "word_column";
public static final String COLUMN_NAME_SYNONYM = "synonym_column";
public static final String COLUMN_NAME_DESCRIPTION = "descrption_column";
public static final String COLUMN_NAME_IMAGEPATH = "image_column";

GREDatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {

    String sqlQueryToCreateEnglishTable = "CREATE TABLE IF NOT EXISTS "
            + TABLE_NAME_ENGLISH + " (" + COLUMN_NAME_WORD
            + "TEXT PRIMARY KEY, " + COLUMN_NAME_SYNONYM + "TEXT, "
            + COLUMN_NAME_DESCRIPTION + "TEXT, " + COLUMN_NAME_IMAGEPATH
            + "TEXT " + ");";
    db.execSQL(sqlQueryToCreateEnglishTable);

    Log.d("Table_Created", "english_table");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

@Override
public void onOpen(SQLiteDatabase db) {
    super.onOpen(db);
}

void addWord(EngFieldsClass obj) {
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues cv = new ContentValues();
    cv.put(COLUMN_NAME_WORD, obj.getengWord());
    cv.put(COLUMN_NAME_SYNONYM, obj.getengSynonyms());
    cv.put(COLUMN_NAME_DESCRIPTION, obj.getengDescription());
    cv.put(COLUMN_NAME_IMAGEPATH, obj.getengImage());
    // INSERT ROWS
    db.insertOrThrow(TABLE_NAME_ENGLISH, null, cv);
    db.close();
} 
```

}

插入记录查询：

```
 String word=editTextWord.getText().toString();
        String synonym= editText Synonym.getText().toString();
        String description= editText Description.getText().toString();
        String imgpath=textViewImagePath.getText().toString();

        final GREDatabaseHelper db= new GREDatabaseHelper(this);
        db.addWord(new EngFieldsClass(word,synonym,description,imgpath)); 
```

错误：

```
08-26 19:03:36.230: D/Table_Created(1350): english_table
08-26 19:03:36.239: I/Database(1350): sqlite returned: error code = 1, msg = table english_table has no column named image_column
08-26 19:03:36.249: D/AndroidRuntime(1350): Shutting down VM
08-26 19:03:36.259: W/dalvikvm(1350): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-26 19:03:36.269: E/AndroidRuntime(1350): FATAL EXCEPTION: main
08-26 19:03:36.269: E/AndroidRuntime(1350): android.database.sqlite.SQLiteException: table english_table has no column named image_column: , while compiling: INSERT INTO english_table(image_column, descrption_column, synonym_column, word_column) VALUES(?, ?, ?, ?); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T13:57:35.587

```
String sqlQueryToCreateEnglishTable = "CREATE TABLE IF NOT EXISTS "
            + TABLE_NAME_ENGLISH + " (" + COLUMN_NAME_WORD
            + " TEXT PRIMARY KEY, " + COLUMN_NAME_SYNONYM + " TEXT, "
            + COLUMN_NAME_DESCRIPTION + " TEXT, " + COLUMN_NAME_IMAGEPATH
            + " TEXT " + ");"; 
```

Use this as your create table query. Note that you need to have space before TEXT like " TEXT". This will make it a column of type TEXT. Else the column will be image_columnTEXT

# android - SensorEvent.timestamp 日期转换问题

> ID：12130666
> 
> 赞同：1
> 
> 时间：2012-08-26T13:51:00.270
> 
> 标签：android, android-sensors

我正在尝试将事件时间戳转换为日期，我的代码：

```
Calendar c = Calendar.getInstance();
c.setTimeInMillis(event.timestamp/1000000);//time in ms (timestamp is in ns)
System.out.println((new SimpleDateFormat("yyyy-MM-dd HH:mm:ss")).format(c.getTime())); 
```

我怎么会得到 1970-01-02？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T16:12:00.877

我假设您正在使用[SensorEvent.timestamp](http://developer.android.com/reference/android/hardware/SensorEvent.html#timestamp)。文档没有提到这是自上次启动以来以纳秒为单位的唤醒时间（类似于[SystemClock.uptimeMillis()](http://developer.android.com/reference/android/os/SystemClock.html#uptimeMillis%28%29)），而不是自 Unix 纪元以来的时间。简而言之，您的设备似乎已经唤醒了不到两天。

此外，`Calendar.getTime()`返回一个 Date 对象，并且有一个 Date 构造函数，它需要毫秒，因此您可以缩短代码：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
System.out.println(sdf.format(new Date(event.timestamp / 1000000))); 
```

# google-sites - 如何防止 Google 协作平台通过其重定向页面发送我的所有超链接？

> ID：12130667
> 
> 赞同：3
> 
> 时间：2012-08-26T13:50:59.753
> 
> 标签：google-sites

我正在使用 Google 协作平台建立一个网站。

如果我向页面添加超链接并选择“网址”，然后`http://www.example.com`作为链接输入，实际页面最终会呈现为

```
http://www.google.com/url?q=http://www.example.com 
```

作为超链接地址。这会注入一个烦人的“将您重定向到 www.example.com”的 Google 页面，并在我的页面上添加超链接后延迟两秒。

有什么办法可以关闭这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:35:11.777

无论是什么导致了这种行为，它似乎在几天后就停止了。不知道为什么，但我将其称为修复 - 在我发布时该网站非常新，所以这可能与 Google 跟踪使用可疑链接填充页面的人有关？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-22T23:48:08.983

“如果您链接的网站不是公开的，它会在打开时自动通过*www.google.com/url*重定向，以保持网站的匿名性。”

来源：[support.google.com/sites/answer/90538](https://support.google.com/sites/answer/90538?hl=en)

# java - 用正斜杠解析 json

> ID：12130674
> 
> 赞同：1
> 
> 时间：2012-08-26T13:52:29.783
> 
> 标签：java, android, json

我应该如何解析这个json？

```
{"label":"KLM/AirFrance"} 
```

我试试

```
jsonObject.getString("label") 
```

但是有一个错误：

```
at org.json.JSON.typeMismatch 
```

有任何想法吗？谢谢。

代码：

```
ArrayList<Gate> gates = new ArrayList<Gate>();
JSONArray jGates = object.getJSONArray("gates_info");
int gatesLength = jGates.length();
for (int i=0; i<gatesLength; i++) {
    Gate gate = new Gate();
    JSONObject jGate = jGates.getJSONObject(i);
    gate.setId(jGate.getInt("id"));
    gate.setLabel(jGate.getString("label"));
    gate.setCurrency_code(jGate.getString("currency_code"));
    gates.add(gate);
} 
```

部分回复：

```
"gates_info":[{"id":48,"label":"KLM/AirFrance","payment_methods":
["card"],"currency_code":"usd","is_airline":true},
{"id":1,"label":"Nabortu","payment_methods":
["bank","yandex_money","web_money","terminal","card","svyaznoy","euroset"],
"currency_code":"rub","is_airline":false},    
{"id":3,"label":"anywayanyday.com","payment_methods": 
["card","euroset","svyaznoy"],"currency_code":"rub","is_airline":false},
{"id":7,"label":"Ozon.travel","payment_methods":
["cash","yandex_money","web_money","terminal","card","elexnet","contact","euroset"],
"currency_code":"rub","is_airline":false}, 
{"id":8,"label":"tickets.ru","payment_methods":
["card","web_money"],"currency_code":"rub","is_airline":false} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:00:11.727

Try to escape forward slash, i.e. write `\\/`. The back slash is written twice to escape itself, i.e. to make interpreter to treat it as a "real" back slash.

I have not tried this myself with JSON but typically such problems are solved using this kind of solutions.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:31:15.273

在这里我遇到了这个问题（虽然它与转义字符无关。您只需要知道如何使用 Json。您需要使用 addProperty 函数：这是一个示例，您应该能够复制并获取它。

```
JsonObject temp = new JsonObject();
temp.addProperty(tagName,stringData); 
```

# javascript - 在 jquery 中发布问题

> ID：12130679
> 
> 赞同：0
> 
> 时间：2012-08-26T13:54:21.347
> 
> 标签：javascript, jquery

我创建了一个简短的示例`POST`

```
var p = {Name: obj.Name,  Age: obj.Age},
    str = JSON.stringify(p);

$.post("test.php", str, function (data) {
    alert("Post finished");
}).success(function () {
    alert("second success");
}).error(function() { 
    alert("error");
}); 
```

`404 not found`当我运行上面的代码时，它会抛出from的错误消息`test.php`。

`test.php`我在我的项目中创建了这个文件。

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:03:52.067

The first parameter in `post` method is the `url` that you would want to send the `post data`.

`HTTP 404` means that url given is not found in the server.

Since there is no `test.php` that would receive your data, you will get this error.

You should create a `test.php` file that you accept your request.

Another thing is, you don't need to `stringify` JSON object while sending it to the server, `jquery` handles this automatically. Just send the `obj` as `post data`.

```
var p = { Name : "John",  Age : 23};
$.post("test.php", p).done(function(data){   
     alert("Post finished");    
}).success(function() {
    alert("second success");
}).error(function() {
    alert("error");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:56:19.003

该错误意味着找不到该页面。你确定它存在吗？它是否存在于文档根目录中，或者您的意思是当前文件夹：

```
$.post("/test.php", str , function(data){ 
        ^ 
```

您是否使用 FireBug for Firefox 或 Chrome 的开发者工具检查了请求？如果您尝试使用您的用户代理直接访问该 URL，会发生什么？

# java - 将 jcalendar 日期转换为 XMLGregorianCalendar 获取空值

> ID：12130680
> 
> 赞同：0
> 
> 时间：2012-08-26T13:54:32.597
> 
> 标签：java, date, datetime, null, gregorian-calendar

我有一些问题，我只是从 jCalendar 中的 jDateChooser 获取空值。

此方法是将 java.util.Date 转换为 XMlGregorianCalendar 的函数：

```
DatatypeFactory df;
public XMLGregorianCalendar function_ConvertAsXMLGregorianCalendar(Date date) {
    if (date == null) {
        System.out.println("Error on Function Convert Date into XML Gregorian Calendar");
        return null; 
    } else {
        GregorianCalendar gc = new GregorianCalendar();
        gc.setTimeInMillis(date.getTime());
        return df.newXMLGregorianCalendar(gc);
    }
} 
```

这是 getStart 和 getEnd Dates 的 2 个函数。

```
private XMLGregorianCalendar getStartDate(){
    Date dateStarting  = jDateChooserStart.getDate();
    System.out.println("Date Start : " + dateStarting.toString());
    XMLGregorianCalendar cal = function_ConvertAsXMLGregorianCalendar(dateStarting);
    System.out.println("Converted Date : " + cal.toXMLFormat());
    return cal;
}

private XMLGregorianCalendar getEndDate(){
    Date dateEnding = jDateChooserEnd.getDate();
    System.out.println("Date End : " + dateEnding);
    return function_ConvertAsXMLGregorianCalendar(dateEnding);
} 
```

然后我只是将方法放在一个名为 schedule 的对象中：

```
schedule.setStartDate(getStartDate());
schedule.setEndDate(getEndDate()); 
```

来自 Netbeans(v7.1) 的结果

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at Frames.CreateSchedule.function_ConvertAsXMLGregorianCalendar(CreateSchedule.java:181)
at Frames.CreateSchedule.getStartDate(CreateSchedule.java:188)
at Frames.CreateSchedule.SubmitButtonActionPerformed(CreateSchedule.java:204)
at Frames.CreateSchedule.access$000(CreateSchedule.java:16) 
```

怎么了？

之前谢谢。

**更新 ：：**

我只是将功能更改为：

```
public XMLGregorianCalendar function_ConvertAsXMLGregorianCalendar(Date date) {
    if (date == null) {
        System.out.println("Error on Function Convert Date into XML Gregorian Calendar");
        return null; 
    } else {
        GregorianCalendar gc = new GregorianCalendar();
        gc.setTimeInMillis(date.getTime());
        DatatypeFactory df = null;
        return df.newXMLGregorianCalendar(gc);
    }
} 
```

**更新 2#::**

初始化 newInstance() 方法后，我收到另一个错误：

```
java.lang.ClassCastException: java.util.Date cannot be cast to java.sql.Date 
```

我只是从

```
java.util.Date into java.SQL.Date 
```

然后铸造：

```
Date dateStarting  = (Date) jDateChooserStart.getDate();
Date dateEnding    = (Date) jDateChooserEnd.getDate(); 
```

如何解决这个问题？

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:58:43.743

Though not obvious without proper line numbers in your code, the most likely cause of the `NullPointerException` is the line:

```
 return df.newXMLGregorianCalendar(gc); 
```

with your `df` being null. Where do you initialize this field?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T13:59:39.770

It appears that `df` is declared but not instantiated:

```
DatatypeFactory df; 
```

from here:

```
df.newXMLGregorianCalendar(gc);
^ 
```

You can use [DatatypeFactory.newInstance()](http://docs.oracle.com/javase/7/docs/api/javax/xml/datatype/DatatypeFactory.html#newInstance%28%29) to instantiate first, like so:

```
DatatypeFactory df = DatatypeFactory.newInstance(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T18:42:18.280

我不完全理解您的问题，但在我看来，这是一个简单的解决方法，调用您的日历，这样应该可以工作（我认为）。

```
Calendar timeStamp = new GregorianCalendar(); 
```

# asp.net-mvc - 将 IQueryable 泛型转换为 JSON

> ID：12130681
> 
> 赞同：7
> 
> 时间：2012-08-26T13:54:39.150
> 
> 标签：asp.net-mvc, json, razor, json.net

我正在通过以下方式制作投影：

```
var query = from book in books
    select new
    {
        label = book.Title,
        value = book.ID
    }; 
```

在我的剃须刀页面中，我需要使用：

```
 var booksArray = [{
        @(json)
    }]; 
```

这样生成的数组看起来像：

```
label: 'c++',
value: 'c++'
}, {
label: 'java',
value: 'java'
}, {
label: 'php',
value: 'php'
}, {
label: 'coldfusion',
value: 'coldfusion'
} 
```

我已经从几种不同的方法中非常接近了——我可以得到一个在服务器端看起来正确的字符串，但是当呈现到页面本身时，所有`'`标记都变为`&#39;`.

但专注于通过 JSON.net 实现这一目标......

最可能的方法似乎应该是：

```
var json = JsonConvert.ToString(query); 
```

但这折腾：

```
Unsupported type: System.Linq.Enumerable+WhereSelectListIterator`2[Project.Entity.Book,<>f__AnonymousType3`2[System.String,System.Int32]]. Use the JsonSerializer class to get the object's JSON representation. 
```

什么是正确的 JSON.net 语法？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-26T14:01:08.403

您需要[.ToArray()](http://msdn.microsoft.com/en-us/library/bb298736.aspx)和[Html.Raw()的组合](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)

`ToArray()`评估查询并使`JsonConvert`快乐

```
var query = from book in books
    select new
    {
        label = book.Title,
        value = book.ID
    };

var json = JsonConvert.SerializeObject(query.ToArray()); 
```

注意：`JsonConvert.SerializeObject`如果要序列化复杂类型，则需要使用。`JsonConvert.ToString`用于转换简单类型，如 bool、guid、int、uri 等。

在您看来`Html.Raw`，不要对 JSON 进行 html 编码：

```
var booksArray = @(Html.Raw(json)) 
```

# linux - 通过 IOCTL 将结构传递给设备驱动程序

> ID：12130689
> 
> 赞同：2
> 
> 时间：2012-08-26T13:55:22.797
> 
> 标签：linux, linux-kernel, linux-device-driver, ioctl

我正在尝试将结构从用户空间传递到内核空间。我已经尝试了好几个小时，但它不起作用。这是我到目前为止所做的..

```
int device_ioctl(struct inode *inode, struct file *filep, unsigned int cmd, unsigned long arg){

int ret, SIZE;

switch(cmd){

    case PASS_STRUCT_ARRAY_SIZE:

        SIZE = (int *)arg;
        if(ret < 0){
            printk("Error in PASS_STRUCT_ARRAY_SIZE\n");
            return -1;  
        }
        printk("Struct Array Size : %d\n",SIZE);
        break;

    case PASS_STRUCT:

        struct mesg{
            int pIDs[SIZE];
            int niceVal;
        };

        struct mesg data;

        ret = copy_from_user(&data, arg, sizeof(*data));
        if(ret < 0){
            printk("PASS_STRUCT\n");
            return -1;  
        }

        printk("Message PASS_STRUCT : %d\n",data.niceVal);
        break;

    default :
        return -ENOTTY;
}

return 0;
  } 
```

我在定义结构时遇到了麻烦。定义它的正确方法是什么？我想要 int pIDs[SIZE]。int *pIDs 会这样做吗（在用户空间中它被定义为 pIDs[SIZE]）？

编辑：

通过上述更改，我收到此错误？错误：“结构”之前的预期表达有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:32:38.433

您的问题中有两种结构变体。

```
 struct mesg1{
  int *pIDs;
  int niceVal;
 };

 struct mesg2{
  int pIDs[SIZE];
  int niceVal;
 }; 
```

它们不一样; 如果`mesg1`你有指向 int 数组的指针（它在结构之外）。在其他情况下（`mesg2`），结构内有 int 数组。

如果您的 SIZE 是固定的（在模块的 API 中；在用户空间和内核空间中使用的值相同），您可以使用第二个变体 ( `mesg2`)。

要使用结构 ( `mesg1`) 的第一个变体，您可以将字段添加`size`到结构本身，例如：

```
 struct mesg1{
  int pIDs_size;
  int *pIDs;
  int niceVal;
 }; 
```

并用整数计数填充它，由`*pIDs`.

PS：请**不要**在结构中间使用带有可变大小数组的结构（又名 VLAIS）。这是 GCC 编译器对 C 语言的专有、奇怪、错误和[未记录的](https://stackoverflow.com/questions/12058760/undocumented-gcc-extension-vla-in-struct)扩展。根据国际 C 标准，只有结构的最后一个字段可以是[可变大小 (VLA) 的数组。](http://en.wikipedia.org/wiki/Variable-length_array)这里有一些例子：[1](http://msdn.microsoft.com/en-us/library/b6fae073(v=vs.71).aspx) [2](http://publib.boulder.ibm.com/infocenter/compbgpl/v9v111/topic/com.ibm.xlcpp9.bg.doc/language_ref/strct.htm#flexible)

PP:

您可以使用 VLA 声明您的结构（如果只有一个可变大小的数组）：

```
 struct mesg2{
  int niceVal;
  int pIDs[];
 }; 
```

但是在使用 VLA 为此类结构分配内存时应该小心

# android - 我尝试运行此代码，模拟器上没有输出，也没有任何错误。无法弹出菜单怎么办？

> ID：12130691
> 
> 赞同：0
> 
> 时间：2012-08-26T13:55:32.783
> 
> 标签：android, menu

```
package com.guess.phone;

import android.app.Activity;

public class Menu extends Activity {

    // Setting Up the MenuInflater

    public boolean onCreateOptionsMenu(Menu Menu) {
            super.onCreateOptionsMenu((android.view.Menu) Menu);

            MenuInflater awesome = getMenuInflater();    
            awesome.inflate(R.menu.main_menu,(android.view.Menu) Menu);
            return true; 
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId()) {
        case R.id.menuSweet:
            startActivity(new Intent("com.guess.phone.SWEET"));
            return true;
        case R.id.menuToast:
            return true;    
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:19:51.400

改用下面的 OnCreateOptionsMenu

```
public boolean OnCreateOptionsMenu(Menu menu){
   MenuInflater inflater = getMenuInflater();
   inflater.inflate(R.menu.main_menu, menu);
   return super.onCreateOptionsMenu(menu);
} 
```

# java - 只有最后一个条目被添加到 ArrayList

> ID：12130695
> 
> 赞同：0
> 
> 时间：2012-08-26T13:56:17.117
> 
> 标签：java, arraylist, iterator, listiterator

我正忙于我的最后一年项目的计划。下面的方法需要返回一个组合列表，一个组合就是一个LoadCases列表（variableLoad和permanentLoad是LoadCase的子类）：

```
public ArrayList<ArrayList<LoadCase>> strUfCombinations()
{
    ArrayList<ArrayList<LoadCase>> combinationslist = new ArrayList<ArrayList<LoadCase>>();
    int i = 0;

    for(int x = 0; x < allvariableLoads.size(); x++)
    {
        combinationslist.add(new ArrayList<LoadCase>());
    }

    ListIterator<ArrayList<LoadCase>> cListItr = combinationslist.listIterator();

    while(cListItr.hasNext())
    {           
        cListItr.next();
        ArrayList<LoadCase> combination = new ArrayList<LoadCase>();

        for(int j = 0; j < allvariableLoads.size(); j++)
        {
            allvariableLoads.get(j).setIsLeading(false);
        }
        allvariableLoads.get(i).setIsLeading(true);

        Iterator<VariableLoad> vLoadIterator = allvariableLoads.iterator();
        while(vLoadIterator.hasNext())
        {
            VariableLoad vload = vLoadIterator.next();
            if(vload.getIsLeading()==true)
            {
                vload.finalfactor = vload.partialFactor.strUf;
            }
            if(vload.getIsLeading()== false)
            {
                vload.finalfactor = vload.combinationFactor * vload.partialFactor.strUf;
            }
            combination.add(vload);
        }

        Iterator<PermanentLoad> pLoadIterator = permanentLoads.iterator();
        while(pLoadIterator.hasNext())
        {
            PermanentLoad pload = pLoadIterator.next();
            pload.finalfactor = pload.partialFactor.strUf;
            combination.add(pload);
        }

        Iterator<LoadCase> combItr = combination.iterator();
        while(combItr.hasNext())
        {
            LoadCase test = combItr.next();
            System.out.print(test.finalfactor+test.name+"  ");
        }
        System.out.println();
        cListItr.set(combination);
        i++;
    }
    System.out.println("\n");

    return combinationslist;
} 
```

我正在使用一个测试类来运行它：

```
public static void main(String[] args) 
{
    PermanentLoad testload = new PermanentLoad("DL1", "self");
    PermanentLoad testload2 = new PermanentLoad("DL2", "geofac");
    PermanentLoad testload3 = new PermanentLoad("DL3", "fluid");
    PermanentLoad testload4 = new PermanentLoad("DL4", "geounf");

    VariableLoad vload1 = new VariableLoad("VL1", "imposed", "A");
    VariableLoad vload2 = new VariableLoad("VL2", "wind", "normal");
    VariableLoad vload3 = new VariableLoad("VL3", "imposed", "E2");
    VariableLoad vload4 = new VariableLoad("VL4", "thermal", "normal");

    CasesManager manager = new CasesManager();
    manager.addCase("DL1", "self", "null");
    manager.addCase("DL2", "geofac", "null");
    manager.addCase("DL3", "fluid", "null");
    manager.addCase("DL4", "geounf", "null");
    manager.addCase("VL1", "imposed", "A");
    manager.addCase("VL2", "wind", "normal");
    manager.addCase("VL3", "imposed", "E2");
    manager.addCase("VL4", "thermal", "normal");
    manager.addCase("VL5", "cranes", "normal");

    System.out.println("\n");

    CombinationCalculator calc = new CombinationCalculator(manager);
    ArrayList<ArrayList<LoadCase>> combinations =  calc.strUfCombinations();

    Iterator<ArrayList<LoadCase>> cListItr = combinations.iterator();
    while(cListItr.hasNext())
    {
        Iterator<LoadCase> combItr = cListItr.next().iterator();
        while(combItr.hasNext())
        {
            LoadCase test = combItr.next();
            System.out.print(test.finalfactor+test.name+"  ");
        }
        System.out.println();
    } 
```

我运行测试类时的输出是：

```
1.6VL1  0.96VL3  0.48VL4  0.0VL2  1.6VL5  1.2DL1  0.0DL2  1.2DL3  1.2DL4  
0.48VL1  1.6VL3  0.48VL4  0.0VL2  1.6VL5  1.2DL1  0.0DL2  1.2DL3  1.2DL4  
0.48VL1  0.96VL3  1.6VL4  0.0VL2  1.6VL5  1.2DL1  0.0DL2  1.2DL3  1.2DL4  
0.48VL1  0.96VL3  0.48VL4  1.3VL2  1.6VL5  1.2DL1  0.0DL2  1.2DL3  1.2DL4  
0.48VL1  0.96VL3  0.48VL4  0.0VL2  1.6VL5  1.2DL1  0.0DL2  1.2DL3  1.2DL4  

0.48VL1  0.96VL3  0.48VL4  0.0VL2  1.6VL5  1.2DL1  0.0DL2  1.2DL3  1.2DL4  
0.48VL1  0.96VL3  0.48VL4  0.0VL2  1.6VL5  1.2DL1  0.0DL2  1.2DL3  1.2DL4  
0.48VL1  0.96VL3  0.48VL4  0.0VL2  1.6VL5  1.2DL1  0.0DL2  1.2DL3  1.2DL4  
0.48VL1  0.96VL3  0.48VL4  0.0VL2  1.6VL5  1.2DL1  0.0DL2  1.2DL3  1.2DL4  
0.48VL1  0.96VL3  0.48VL4  0.0VL2  1.6VL5  1.2DL1  0.0DL2  1.2DL3  1.2DL4 
```

该矩阵是从 strUfCombinations() 中打印的，第二个矩阵是通过迭代最终的组合列表从测试类打印的。第一个矩阵是正确的输出。在我看来， strUfCombinations() 方法正在使用添加的最后一个组合填充组合列表。

任何人都可以帮忙吗？也许我只是缺少一些简单的东西。

问候， 雅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:37:57.323

问题是`LoadCases`我使用的那个被回收了，即arraylist 中的每个元素都指向一个`LoadCase`，这就是为什么所有元素都具有最终数组的值的原因。

我通过`static clone()`在类*LoadCase*中编写一个创建*LoadCase*副本的方法解决了这个问题。然后创建一个克隆并将其放入组合中，而不是来自`allvariableloads`和的原始 LoadCase `permanentloads`。

# mongodb-.net-driver - 在 MongoDB 的插入/选择之间适应不同数据类型的最佳方法是什么？

> ID：12130697
> 
> 赞同：1
> 
> 时间：2012-08-26T13:56:20.850
> 
> 标签：mongodb-.net-driver

我想我在这里缺少一个简单的解决方案。当我运行返回 IQueryable 的选择（在 IQueryable 上使用 Linq 样式）时，我可能希望 MyClass 返回与我在插入中使用的格式不同的键/值。

以下面的 UploadFile 类和注释属性 id 和 Filetimestamp 为例。当我设置 Filetimestamp 时，我希望它存储为 DateTime，但是当我检索 IQueryable 时，我想：

1.  请参阅作为字符串返回的文件时间戳或
2.  请参阅作为反映 Filetimestamp.toString() 的字符串返回的单独属性。该属性在数据库中没有对应的键；它只是来自 BSON 的真实键/值的装饰。

考虑到 #1 不太可能，我通过添加返回 Filetimestamp.toString() 的 get-only 字段 Filetimestamp_str 来追求 #2。当我选择时，行为符合预期。当我插入时，我看到了失败。

我可以创建一个用于获取的装饰器类，所有这些都可以工作 - 但我在这里错过了一些更基本和简单的东西吗？

```
public class UploadFile : IUploadFile
{
    public Object _id { get; set; }
    public String Filepath { get; set; }
    public String Filename { get; set; }
    public String Filetype { get; set; }
    public String Fileauthor { get; set; }
    public DateTime Filetimestamp { get; set; }
    public Object FileID { get; set; }

    // these keys are not in DB 
    public String Filetimestamp_str { get { return Filetimestamp.ToString(); } } 
    public String _id_str { get { return _id.ToString();  } }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T20:29:32.653

您可以创建一个 BsonClassMap，指定哪些属性应该（不）被序列化。请参阅[序列化教程](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial)。但是，根据该教程，不应自动映射只读属性，因此我不应该期望插入错误。

# django - 模板中的多对多项目：检查是否有任何不为空或没有

> ID：12130699
> 
> 赞同：14
> 
> 时间：2012-08-26T13:56:28.223
> 
> 标签：django, django-models, django-templates, django-template-filters

Django初学者问题。我有以下模型：

```
class Leg(models.Model):
    startpoint = models.CharField(max_length=50, help_text="examples: 'Smith Elementary' or 'riders' houses'; less than 50 characters.")
    endpoint = models.CharField(max_length=50, help_text="examples: 'Smith Elementary' or 'riders' houses'; less than 50 characters.")
    riders = models.ManyToManyField(Rider, blank=True)
    drivers = models.ManyToManyField(Driver, blank=True) 
```

我在模板中创建了一个模型实例作为“腿”。在模板中，我想看看是否有任何相关的驱动程序。我试过 {% if leg.drivers %} 但这似乎总是评估为 True，无论这条腿是否有任何驱动程序。

我如何检查是否真的有驱动程序？很抱歉这个基本问题，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-26T14:04:10.250

`{% if leg.drivers %}`将永远是真的，因为这将是一个多对多的经理。尝试`{% if leg.drivers.all %}`获取所有相关的驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:56:46.490

[for ... 空](https://docs.djangoproject.com/en/3.2/ref/templates/builtins/#for-empty)模板标签就是为此而生的。简单地循环 leg.drivers.all 并且如果你想在没有驱动程序的情况下显示一些消息，那么你可以在空子句中这样做。

# javascript - YUI3 module change attribute after construction

> ID：12130709
> 
> 赞同：0
> 
> 时间：2012-08-26T13:57:36.757
> 
> 标签：javascript, module, yui3

I am building a YUI3 module for my workplace. I construct it like so:

```
var testMenu1 = new Y.ContextMenu({
    id: 'testmenu1',
    menuItems: {
        opsdb: {
            title: 'empty',
            type: 'opsdb',
            separator: false,
            action: function(e, host) {
                iframe_panel_opsdb(host);
            }
        }
    }
}); 
```

I'd like to come in later and change the title based on the hostname I right click on. How can I do that given that testMenu1 does now exist. I can do something like testMenu1.set('id', 'newId') but menuItems.opsdb.title, I cannot figure out how to change that one.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:25:02.170

您可以使用点表示法访问嵌套属性。

如果 menuitems 是一个属性，那么下面应该做你想做的事。（我不知道ContextMenu的细节）。

testMenu1.set('menuitems.opsdb.title', 'myNewTitle');

更多详细信息：http: [//yuilibrary.com/yui/docs/attribute/#subattrs](http://yuilibrary.com/yui/docs/attribute/#subattrs)

# iphone - 内存警告后的 EXC_BAD_ACCESS

> ID：12130710
> 
> 赞同：2
> 
> 时间：2012-08-26T13:57:38.040
> 
> 标签：iphone, ios, memory-management, uiimage, didreceivememorywarning

收到内存警告后，我的应用程序出现 EXC_BAD_ACCESS 问题。这就是我的测试方式：我编写了一个简单的应用程序，它只分配内存但不释放它。在我分配了大量内存后，只剩下大约 14 MB 的可用内存，我切换到我的主应用程序。我立即在 didReceiveMemoryWarning 中收到内存警告。片刻之后，我的应用程序在一个在 UIButton 中设置图像的函数中崩溃：

```
-(void)activateRecordButton
{
    UIImage *image = [UIImage imageNamed:@"audioRecordOn"];
    [recButton setImage:image forState:UIControlStateNormal];
} 
```

我得到的错误是调用 setImage 的行上的 EXC_BAD_ACCESS(code=1, address=some_address)。如果我评论这些行，我的应用程序会在另一个为 UIButton 设置图像的函数中崩溃。

这是我的 didReceiveMemoryWarning：

```
- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
} 
```

为什么会这样？这是因为没有更多的内存来加载图像还是因为当其他应用程序分配了大量内存时，recButton 以某种方式被释放了？

我在 Iphone 4 ios 5.1.1 上运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T14:39:29.973

默认情况下，UIViewController 将在`didReceiveMemoryWarning`（如果可能）中释放其视图。如果您没有手动保留按钮，您的按钮也会被释放。

`setImage`然后在不存在的对象上调用，这将触发`EXC_BAD_ACCESS`.

# qt - 在 Qt 中打开指定的文件夹

> ID：12130711
> 
> 赞同：0
> 
> 时间：2012-08-26T13:58:00.093
> 
> 标签：qt, qt4

您好，谁能告诉我如何在 Qt 中打开指定的文件夹？

假设在 lineEdit 我定义文件夹路径，如

```
D:/MyFolder 
```

那么如何使用按钮打开此文件夹？我应该为此使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:15:30.957

您可以使用：

```
QDesktopServices::openUrl(QUrl::fromLocalFile(yourFolderPath)); 
```

在连接到您按钮的插槽内。

# php - JSON data from server could not be parsed - data from MySQL

> ID：12130716
> 
> 赞同：0
> 
> 时间：2012-08-26T13:58:52.567
> 
> 标签：php, mysql, json

I just have done test to see if my aplication can handle special charcters.

In PHP form I add data to MySQL as folow:

`"test"` | `'test'` | `" £ $ % ^ & * ( )` | `'test' "test"`

data have been escaped and in MySQL looks like this:

`\\\"test\\\"` | `\\\'test\\\'` | `! \\\" £ $ % ^ & * ( )` | `\\\'test\\\' \\\"test\\\"`

that goes to JSON like that:

```
[
    "\\\\\\\"test\\\\\\\"",
    "\\\\\\\'test\\\\\\\'",
    "! \\\\\\\" £ $ % ^ & * ( )",
    "\\\\\\\'test\\\\\\\' \\\\\\\"test\\\\\\\"",
] 
```

that can't be parset in JSON so I checked above in JSONLint.com and I get that error:

```
Parse error on line 2:
..."test\\\\\\\"",    "\\\\\\\'test\\\\\\\
----------------------^
Expecting 'STRING', 'NUMBER', 'NULL', 'TRUE', 'FALSE', '{', '[' 
```

I know that can be fixed but not sure where?

1.  in PHP before I send to MySQL?
2.  in MySQL query before sent to MySQL database?
3.  in PHP before goes to JSON?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:10:04.690

> in PHP before I send to MySQL?

Answer is prepared statments. Use [PDO](http://php.net/manual/en/pdo.prepared-statements.php) or [mysqli](http://php.net/manual/en/mysqli.prepare.php)

> in MySQL query before sent to MySQL database?

Answer is prepared statments. Use [PDO](http://php.net/manual/en/pdo.prepared-statements.php) or [mysqli](http://php.net/manual/en/mysqli.prepare.php)

> in PHP before goes to JSON?

Answer is [json_encode](http://php.net/manual/en/function.json-encode.php). Don't escape same data twice.

# java - meta-inf 目录在哪里？

> ID：12130717
> 
> 赞同：0
> 
> 时间：2012-08-26T13:58:53.750
> 
> 标签：java, hibernate, jpa, netbeans, meta-inf

我正在使用 JPA 和 Hibernate。Netbeans 7.x 中的 meta-inf 目录在哪里？出于某种原因，它似乎不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:08:29.753

也许它只是失踪了？META-INF 不需要存在。所以你应该简单地创建它。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:17:24.903

如果生成 .jar 文件，该 zip 文件将包含一个 META-INF 目录，其中可能包含**manifest.mf**。一般来说，这可以自动生成。

在 NetBeans 中，构建过程要么使用**ant**，而且几年前还使用**maven**作为构建引擎。**在 Maven 中，人们会发现在pom.xml**中生成 manifest.mf（以及它的目录 META-INF）。尝试 f0r 实例设置应用程序 jar 的主类。

# php - window 8 64bit RTM & PhP Curl enabling

> ID：12130718
> 
> 赞同：2
> 
> 时间：2012-08-26T13:58:53.987
> 
> 标签：php, windows, curl, 64-bit, wamp

i have a Windows 8 RTM 64 bit installed on a machine. Also i installed wampserver2.2e-php5.3.13-httpd2.2.22-mysql5.5.24-x64 on it. But the php CURL extention just wont work on it...

I tried enabling in both php.ini files the extention, tried varios dlls from the net but still no luck with it... Q_Q

Did somone make it work? and if so which dll are you using?

# java - 单个表格单元格中的对象

> ID：12130723
> 
> 赞同：0
> 
> 时间：2012-08-26T14:00:10.863
> 
> 标签：java, sql, database, postgresql

我有一堂课：

```
 class Person{ 
   String name; 
   String surname; 
   String miasto; 
 } 
```

我想将此类的对象放入数据库表的单个单元格中。有没有办法做到这一点？如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T00:04:03.297

作为使用[`hstore`](http://www.postgresql.org/docs/current/static/hstore.html)as [mu 的替代方法的解释太简短了](https://stackoverflow.com/users/479863/mu-is-too-short)，您有`hstore`、 复合类型、 Java-serialized`bytea`和`xml`.

*   复合[类型](http://www.postgresql.org/docs/current/static/rowtypes.html)
*   使用[`xml`数据类型的 XML 文档](http://www.postgresql.org/docs/current/static/datatype-xml.html)
*   [使用Pg 9.2 beta](http://www.postgresql.org/docs/devel/static/datatype-json.html)中的数据类型的`JSON`值，它是[9.1-backported 版本](https://bitbucket.org/adunstan/json_91/)`json`
*   [`hstore`](http://www.postgresql.org/docs/current/static/hstore.html)

我认为 hstore 可能是一个更好的选择，但这是一个可行的替代方案，并且可以更好地用于某些用途。很难推荐其中一个，因为您没有解释您要做什么以及为什么。

上面列出的每个选项的解释如下。

## 复合型

复合类型是结构化的和强类型的，易于查询，表达能力强，速度快，并保留了类型系统的全部功能，因此您可以在其中包含各种复杂的值、数组等。但是，从应用程序代码中以文本形式查询和编写它们真的很痛苦，因此您经常会发送额外的查询来使用它们。

甚至不要考虑从 JPA 和其他 ORM（如 Hibernate）中使用它们——你会认为它们的`@Embedded`类支持复合类型，但你错了。

尝试添加或更改复合类型在使用后确实是一种痛苦的经历。记住这一点。

```
CREATE TYPE person AS ( name text, surname text, miasto text );

CREATE TABLE some_table (id integer primary key, blah text, this_person person);

INSERT INTO some_table(id,blah,this_person)
VALUES (1,'fred',ROW('a','b','c'));

SELECT (this_person).name FROM some_table; 
```

访问：

```
regress=# SELECT * FROM some_table ;
 id | blah | this_person 
----+------+-------------
  1 | fred | (a,b,c)
(1 row) 
```

或者，为了避免必须解析复合类型的行语法：

```
regress=# SELECT t.id, t.blah, (t.this_person).* FROM some_table t;
 id | blah | name | surname | miasto 
----+------+------+---------+--------
  1 | fred | a    | b       | c
(1 row) 
```

或作为单独的选择：

```
regress=# SELECT (t.this_person).* FROM some_table t;
 name | surname | miasto 
------+---------+--------
 a    | b       | c
(1 row) 
```

## XML

XML 数据类型实现 SQL/XML 标准。它丰富且便携。SQL/XML 提供`xpath`对查询 XML 值的支持，您可以对结构化 XML 数据编写一些相当复杂且功能强大的查询。XML 在大多数应用程序中都易于使用，并且在 Java 中可以使用[JAXB](http://www.oracle.com/technetwork/articles/javase/index-140168.html)和 JAXB 注释从本机 Java 对象轻松编组和解组。

您不需要对 Java 或 Pg 进行任何扩展即可使用 XML。

XML 值是结构化的，但类型不是，它接受任何格式良好的自由格式 XML 文档或片段。添加`IS DOCUMENT`约束以禁止片段。执行更严格的结构是一种痛苦。AFAIK Pg 目前无法针对 XML DSD 或数据库中的其他模式定义验证 XML，因此执行结构需要混乱且缓慢的`xpath`约束。

XML 值没有类型，值存储为字符串。

```
CREATE TABLE some_table (id integer primary key, blah text, this_person xml);

INSERT INTO some_table(id,blah,this_person)
VALUES (1,'fred', '<person><name>a</name><surname>b</surname><miasto>c</miasto></person>');

SELECT (xpath('/person/name/text()', this_person))[1] from some_table ; 
```

## JSON

JSON 是一种被许多语言和应用程序广泛理解的标准格式。使用起来相当容易。Pg 中的 JSON 支持非常新，目前还没有任何函数或运算符用于操作和查询 JSON，因此目前对数据库非常不透明；您不能编写诸如“查找'name'键以'a'开头的json对象”之类的查询。预计在 9.3 中会有所改善。

JSON 支持在核心 Java SDK 中不存在，但可从多个库中获得，其中许多库支持通过 JAXB 绑定扩展对 POJO 进行编组/解组。参见，例如 Jackson 的 JAXB 支持。

JSON 类型接受任何格式正确的 JSON 文档。它不提供任何方式来强制执行特定结构。JSON 值是类型化的，但仅接受 JSON 支持的有限类型集，其他所有内容都必须存储为字符串。

```
-- in Pg 9.2 and above; for 9.1 use the json91 backport
CREATE EXTENSION json;

CREATE TABLE some_table (id integer primary key, blah text, this_person json);

INSERT INTO some_table(id,blah,this_person)
VALUES (1,'fred', '{"name": "a", "surname":"b", "miasto":"c"}');

-- No easy way to subscript out json values in 9.1, but it's very convenient
-- with any app that has json support. 
```

## HSTORE

`hstore`功能强大，并在查询数据时为您提供了许多很好的谓词和运算符。但是，格式是非标准的，并且在应用程序代码中使用起来会很痛苦。如果使用 JDBC，`org/postgresql/util/HStoreConverter.java`PgJDBC hstore 支持会有所帮助。

该`hstore`类型接受任何`hstore`值。结构可以通过`CHECK`约束来强制执行。`hstore`值是文本；hstore 中没有数据类型。

```
-- In Pg 9.1 and above; for older versions hstore is available but is
-- added differently. See the documentation.
CREATE EXTENSION hstore;

CREATE TABLE some_table (id integer primary key, blah text, this_person hstore);

INSERT INTO some_table(id,blah,this_person)
VALUES (1,'fred', hstore(ARRAY['name','surname','miatso'], ARRAY['a','b','c']));

SELECT this_person -> 'name' from some_table ; 
```

## 在java中序列化为二进制

可能是最简单的选项，因为该值对数据库完全不透明，但您也可以[在 Java 中序列化该值](http://java.sun.com/developer/technicalArticles/Programming/serialization/)并将其存储`bytea`在数据库中。

每当类更改时，您必须编写自定义反序列化例程来处理仍在数据库中的旧版本的类。没有非 java 代码可以使用该值，并且您不能在数据库中查询它。

--

如果您能解释一下您要通过此实现的目标以及原因，那将非常有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T14:03:02.937

您可以将对象序列化为字符串，并将其存储。 [来自 Oracle SDN](http://java.sun.com/developer/technicalArticles/Programming/serialization/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T20:00:29.687

由于您使用的是 PostgreSQL，因此您可以使用[hstore](http://www.postgresql.org/docs/current/static/hstore.html)：

> **F.16。hstore**
> 
> 该模块实现了 hstore 数据类型，用于在单个 PostgreSQL 值中存储键/值对集。这在各种场景中都很有用，例如具有许多很少检查的属性的行或半结构化数据。键和值只是文本字符串。

您可能需要升级 PostgreSQL。

然而，对于这样一个简单的模式，一个三（或四）列的表，也许还有一个外键可能也能起到同样的作用。

# c++ - 具有多个 cpp 文件的 Visual Studio 2010 单个项目

> ID：12130725
> 
> 赞同：3
> 
> 时间：2012-08-26T14:00:58.873
> 
> 标签：c++, visual-studio-2010, main

我想检查很多有的小 cpp 文件`int main()`，并且一次只运行其中一个。像这样的东西 -

![在此处输入图像描述](../Images/eb6d7fcccb96e072b86b2b326a2176d7.png)

有没有办法在没有为每个 cpp 文件打开新项目的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T14:05:28.273

不可以。在一个项目中，您不能拥有多个`main()`功能。

您可以将它们重命名为`test1()`, `test2()`, `test3()`, 并从 中一一调用`main()`。这就是我通常所做的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T14:08:57.677

您可以选择不编译文件。转到属性，并从构建中排除该文件。

# c# - 如何确定给定范围内的最佳间隔计数？

> ID：12130730
> 
> 赞同：4
> 
> 时间：2012-08-26T14:01:21.597
> 
> 标签：c#, algorithm, intervals

我正在尝试确定这个棘手问题的最佳解决方案。我有一个长度（比如说11）。所以这是一个0-10的一维空间。现在我得到了**相同**长度的这些间隔（在这个例子中假设为 2）。现在它们是随机分布的（重叠或不重叠）。让我举个例子：

```
Situation:

|00|01|02|03|04|05|06|07|08|09|10| <- Space (length = 11)

|-----|       
         |-----|
            |-----|
               |-----|
                  |-----|
                           |-----| <- single interval of length = 2 
```

现在，解决方案需要找到一次可以不重叠的最大间隔数。

```
The solution is: 4 intervals 
```

4个区间有3个结果：

```
|00|01|02|03|04|05|06|07|08|09|10|

|-----|  |-----|-----|     |-----| <- result 1
|-----|  |-----|  |-----|  |-----| <- result 2
|-----|     |-----|-----|  |-----| <- result 3 
```

但是还有另外两个限制。

1.  如果有更多结果（最佳解决方案，在这种情况下 = 4），则间隙数最少的结果。

2.  如果有更多结果，仍然是所有空间中最小长度最长的结果。例如，空间（长度）为 2 和 3 的空间的最小长度 = 2，这比空间最小长度仅为 1 的 1 和 4 好。

所以结果 2 有 4 个“连续”块，另外两个只有 3 个，所以细化是：

```
|00|01|02|03|04|05|06|07|08|09|10|

|-----|  |-----------|     |-----| <- result 1
|-----|     |-----------|  |-----| <- result 3 
```

这两个在它们之间具有相同的空间分布，所以让我们取第一个。

输入集的结果是：

```
Interval count  : 4
Optimal solution: |-----|  |-----------|     |-----| 
```

该算法必须适用于所有空间长度（不仅是 11）、所有间隔长度（间隔长度始终 <= 空间长度）和任意数量的间隔。

**更新：**

有问题的场景：

```
|00|01|02|03|04|05|06|07|08|09|

|-----|  
         |-----| 
            |-----|     
                        |-----|
|-----| 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T15:07:12.507

这是一个简单的动态规划问题。

设总长度为`N`，任务长度为`L`。

设`F(T)`为子区间 可以选择的最大任务数`(T, N)`，则在每个单位时间 T，有 3 种可能性：

1.  没有从 T 开始的任务。
2.  有一个任务从 T 开始，但我们没有将它包含在结果集中。
3.  有一个从 T 开始的任务，我们确实将它包含在结果集中。

案例 1 很简单，我们只有`F(T) = F(T + 1)`.

在案例 2/3 中，请注意选择启动 a 的任务`T`意味着我们必须拒绝在此任务运行时启动的所有任务，即介于`T`和之间`T + L`。所以我们得到`F(T) = max(F(T + 1), F(T + L) + 1)`.

最后，`F(N) = 0`. `F(N)`因此，您只需从`F(0)`.

**编辑：**这将为您提供最大数量的间隔，但不是满足您的 2 个约束的集合。我不清楚您对约束的解释，所以我不确定如何帮助您。特别是，我无法说出约束 1 的含义，因为您的示例集的所有解决方案显然都是相等的。

**编辑2：**根据要求进行一些进一步的解释：

考虑您发布的示例，我们有`N = 11`和`L = 2`。有些任务从 开始`T = 0, 3, 4, 5, 6, 9`。从开始`F(11) = 0`和向后工作：

*   `F(11) = 0`
*   `F(10) = F(11) = 0`（因为没有任务从 开始`T = 10`）
*   `F(9) = max(F(10), F(11) + 1) = 1`
*   ...

最终我们得到`F(0) = 4`：

```
T   |00|01|02|03|04|05|06|07|08|09|10|
F(T)| 4| 3| 3| 3| 3| 2| 2| 1| 1| 1| 0| 
```

**编辑3：**好吧，我对此很好奇，所以我写了一个解决方案，所以不妨发布它。这将为您提供任务最多、间隔最少和最小间隔最小的集合。问题中示例的输出是：

*   `(0, 2) -> (4, 6) -> (6, 8) -> (9, 11)`
*   `(0, 2) -> (4, 6) -> (8, 10)`

显然，我不保证正确性！:)

私有类任务 { 公共 int 开始 { 获取；放; } 公共 int 长度 { 获取；放; } public int End { 获取 { 返回开始 + 长度；} }

```
 public override string ToString()
    {
        return string.Format("({0:d}, {1:d})", Start, End);
    }
}

private class CacheEntry : IComparable
{
    public int Tasks { get; set; }
    public int Gaps { get; set; }
    public int MinGap { get; set; }
    public Task Task { get; set; }
    public Task NextTask { get; set; }

    public int CompareTo(object obj)
    {
        var other = obj as CacheEntry;
        if (Tasks != other.Tasks)
            return Tasks - other.Tasks; // More tasks is better
        if (Gaps != other.Gaps)
            return other.Gaps = Gaps; // Less gaps is better
        return MinGap - other.MinGap; // Larger minimum gap is better
    }
}

private static IList<Task> F(IList<Task> tasks)
{
    var end = tasks.Max(x => x.End);
    var tasksByTime = tasks.ToLookup(x => x.Start);
    var cache = new List<CacheEntry>[end + 1];

    cache[end] = new List<CacheEntry> { new CacheEntry { Tasks = 0, Gaps = 0, MinGap = end + 1 } };

    for (int t = end - 1; t >= 0; t--)
    {
        if (!tasksByTime.Contains(t))
        {
            cache[t] = cache[t + 1];
            continue;
        }

        foreach (var task in tasksByTime[t])
        {
            var oldCEs = cache[t + task.Length];
            var firstOldCE = oldCEs.First();
            var lastOldCE = oldCEs.Last();

            var newCE = new CacheEntry
            {
                Tasks = firstOldCE.Tasks + 1,
                Task = task,
                Gaps = firstOldCE.Gaps,
                MinGap = firstOldCE.MinGap
            };

            // If there is a task that starts at time T + L, then that will always 
            // be the best option for us, as it will have one less Gap than the others
            if (firstOldCE.Task == null || firstOldCE.Task.Start == task.End)
            {
                newCE.NextTask = firstOldCE.Task;
            }
            // Otherwise we want the one that maximises MinGap.
            else
            {
                var ce = oldCEs.OrderBy(x => Math.Min(x.Task.Start - newCE.Task.End, x.MinGap)).Last();
                newCE.NextTask = ce.Task;
                newCE.Gaps++;
                newCE.MinGap = Math.Min(ce.MinGap, ce.Task.Start - task.End);
            }

            var toComp = cache[t] ?? cache[t + 1];
            if (newCE.CompareTo(toComp.First()) < 0)
            {
                cache[t] = toComp;
            }
            else
            {
                var ceList = new List<CacheEntry> { newCE };

                // We need to keep track of all subsolutions X that start on the interval [T, T+L] that
                // have an equal number of tasks and gaps, but a possibly a smaller MinGap. This is
                // because an earlier task may have an even smaller gap to this task.
                int idx = newCE.Task.Start + 1;
                while (idx < newCE.Task.End)
                {
                    toComp = cache[idx];
                    if
                    (
                        newCE.Tasks == toComp.First().Tasks &&
                        newCE.Gaps == toComp.First().Gaps &&
                        newCE.MinGap >= toComp.First().MinGap
                    )
                    {
                        ceList.AddRange(toComp);
                        idx += toComp.First().Task.End;
                    }
                    else
                        idx++;
                }

                cache[t] = ceList;
            }
        }
    }

    var rv = new List<Task>();
    var curr = cache[0].First();
    while (true)
    {
        rv.Add(curr.Task);
        if (curr.NextTask == null) break;
        curr = cache[curr.NextTask.Start].First();
    }

    return rv;
}

public static void Main()
{
    IList<Task> tasks, sol;

    tasks = new List<Task>
    {
        new Task { Start = 0, Length = 2 },
        new Task { Start = 3, Length = 2 },
        new Task { Start = 4, Length = 2 },
        new Task { Start = 5, Length = 2 },
        new Task { Start = 6, Length = 2 },
        new Task { Start = 9, Length = 2 },
    };

    sol = F(tasks);
    foreach (var task in sol)
        Console.Out.WriteLine(task);
    Console.Out.WriteLine();

    tasks = new List<Task>
    {
        new Task { Start = 0, Length = 2 },
        new Task { Start = 3, Length = 2 },
        new Task { Start = 4, Length = 2 },
        new Task { Start = 8, Length = 2 },
    };

    sol = F(tasks);
    foreach (var task in sol)
        Console.Out.WriteLine(task);
    Console.Out.WriteLine();

    tasks = new List<Task>
    {
        new Task { Start = 0, Length = 5 },
        new Task { Start = 6, Length = 5 },
        new Task { Start = 7, Length = 3 },
        new Task { Start = 8, Length = 9 },
        new Task { Start = 19, Length = 1 },
    };

    sol = F(tasks);
    foreach (var task in sol)
        Console.Out.WriteLine(task);
    Console.Out.WriteLine();

    Console.In.ReadLine();
} 
```

# haskell - 深可能与 yesod 叠加

> ID：12130732
> 
> 赞同：6
> 
> 时间：2012-08-26T14:01:53.043
> 
> 标签：haskell, yesod

我正在尝试设置一个授权方案，我在其中检查 1\. 用户已登录 2\. 用户有权访问某个对象。为此，我首先调用`maybeAuthId`，然后尝试获取当前对象，并“加入”到另一个列出权限的表。有两个级别的可能案例和一个级别的空列表案例。我曾想过使用 MaybeT，但要么我太累而无法让它工作，要么“不是真正的 monad 转换器”-handler-transformers 不能与 MaybeT 一起使用。有没有很好的方法来处理深度可能？

编辑：

我似乎有点不清楚。我的意思是我有这样的东西：

```
case foo of
   Nothing -> something
   Just foo' -> do
      bar <- somethingelse
      case bar of
         Nothing -> ...
         Just bar' -> ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T17:59:39.937

您完全可以使用`MaybeT`Yesod。这样做：

```
runMaybeT $ do
  uid <- MaybeT maybeAuthID
  car <- MaybeT . runDB . getBy $ UniqueCarOwner uid
  location <- MaybeT . liftIO . ciaLocateLicensePlate . licensePlate $ car
  country <- MaybeT . findCountry $ location
  return (car, country) 
```

正如您所说，大多数函数都没有针对 Yesod 中的通用错误处理进行优化。但是，如果你有某种形式的东西`Monad m => m (Maybe a)`，你可以简单地用`MaybeT`把它从里到外变成`Monad m => Maybe (m a)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T19:13:12.753

据我了解，您的图层如下所示：

```
Maybe [Maybe r] 
```

...并且您想`join`将两个`Maybe`s 放在一起，但列表妨碍了。这正是要`sequence`解决的问题：

```
sequence :: (Monad m) => [m r] -> m [r] 
```

请注意，如果我们专注`sequence`于`Maybe`我们得到的 monad：

```
sequence :: [Maybe r] -> Maybe [r] 
```

在这种特殊情况下，如果列表中至少有一个，`sequence`将返回 a ，但如果它们都是s，那么它将把它们全部连接成一个 s 。`Nothing``Nothing``Just``Just`

剩下的就是映射`sequence`到外部`Maybe`：

```
fmap sequence :: Maybe [Maybe r] -> Maybe (Maybe [r]) 
```

现在这正是我们需要加入的形式：

```
join . fmap sequence :: Maybe [Maybe r] -> Maybe [r] 
```

因此，直观地说，上述函数所做的是，如果所有内部`Maybe`s 都是`Just`s 而外部`Maybe`是 a `Just`，那么它将整个结果融合到一个`Just`包含列表的单个中。但是，如果任何`Maybe`（内部或外部）是 a `Nothing`，则最终结果是 a `Nothing`。

请注意，尽管做了一堆盲目的类型追逐，我们最终还是得到了一个直观地做正确事情的函数。这就是基于范畴论的抽象的力量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T15:11:30.257

目前尚不清楚“处理深度可能”是什么意思，但您可以使用 monadic `join`(from `Control.Monad`) 一次删除一层嵌套。

```
ghci> :m +Control.Monad
ghci> join (Just (Just 3))
Just 3
ghci> join (Just Nothing)
Nothing
ghci> join Nothing
Nothing 
```

不过，使用 MaybeT 可能更适合您的问题。如果你澄清你想要做什么，我们可以帮助你用 MaybeT 制定它。

# android - Android平台直接从URL播放mp4视频失败，有什么解决办法吗？

> ID：12130734
> 
> 赞同：0
> 
> 时间：2012-08-26T14:02:09.977
> 
> 标签：android, mp4, android-videoview

我正在尝试从 videoView 上的 URL 播放视频。视频扩展名是mp4，问题是出现这样的错误：

![在此处输入图像描述](../Images/b6386374db947bd82df915a313ebabf3.png)

logcat是这样的：

![在此处输入图像描述][2]

实际上，我在 stackoverflow.com 上发现了很多问题，但没有什么是方便的。问题在于 mp4 格式，我尝试了 3gp 并且效果很好。我不想下载视频然后播放，也不想将其转换为 3gp。

感谢你的帮助。

**编辑**:: 这是代码片段

```
 String LINK =  "https://********/cbcbcbcbcbcbcbcbcbcbcbcbcbcbcbcb.mp4";
    VideoView videoView = (VideoView) findViewById(R.id.videoView1);
    MediaController mc = new MediaController(this);  
    mc.setAnchorView(videoView);
    mc.setMediaPlayer(videoView);
    Uri video = Uri.parse(LINK);
    videoView.setMediaController(mc);
    videoView.setVideoURI(video);
    videoView.start(); 
```

**编辑**：

我不知道如何从 android 网站应用此建议：

```
 For 3GPP and MPEG-4 containers, the moov atom must precede any mdat atoms, but must succeed the ftyp atom.
  For 3GPP, MPEG-4, and WebM containers, audio and video samples corresponding to the same time offset may be no more than 500 KB apart. To minimize this audio/video drift, consider interleaving audio and video in smaller chunk sizes. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:39:17.320

就像@Giuseppe 所说`HTTPS`的那样，如果您使用的是 3.1 之前的 Android 版本，则可能是问题所在。如果在这里看到它：http: [//developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html) 它说：

> 注意：在 Android 3.1 之前不支持 HTTPS。

**编辑：** 确保您在清单文件中拥有以下权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

还要测试在真实设备上播放的视频，因为有时模拟器会出现一些问题。

# python - 使用正则表达式从Python中的字符串中提取数字

> ID：12130742
> 
> 赞同：4
> 
> 时间：2012-08-26T14:03:10.733
> 
> 标签：python, regex

我想从字符串中提取并打印一个变量号“-34.99”：

```
myString = "Test1 [cm]:     -35.00/-34.99/-34.00/0.09" 
```

字符串中的值将会改变。如何使用 Python 中的正则表达式来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-26T14:28:03.997

非正则表达式解决方案是：

```
myString = "Test1 [cm]:     -35.00/-34.99/-34.00/0.09"  
print myString.split("/")[1] 
```

[在此处](http://ideone.com/mjTmG)测试此代码。

* * *

正则表达式解决方案之一是：

```
import re 
myString = "Test1 [cm]:     -35.00/-34.99/-34.00/0.09" 
print re.search(r'(?<=\/)[+-]?\d+(?:\.\d+)?', myString).group() 
```

[在此处](http://ideone.com/ERe7H)测试此代码。

解释：

```
(?<=\/)[+-]?\d+(?:\.\d+)?
└──┬──┘└─┬─┘└┬┘└───┬────┘
   │     │   │     │
   │     │   │     └ optional period with one or more trailing digits
   │     │   │
   │     │   └ one or more digits
   │     │
   │     └ optional + or -
   │
   └ leading slash before match 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:37:58.987

对于这样的事情，re.findall 效果很好：

```
>>> import re
>>> myString = "Test1 [cm]:     -35.00/-34.99/-34.00/0.09"
>>> re.findall(r'([+-]?\d+\.\d+)',myString)
['-35.00', '-34.99', '-34.00', '0.09'] 
```

您可以使用列表理解直接获取浮点数：

```
>>> [float(f) for f in re.findall(r'([+-]?\d+\.\d+)',myString)]
[-35.0, -34.99, -34.0, 0.09] 
```

或者像这样的第二个：

```
>>> re.findall(r'([+-]?\d+\.\d+)',myString)[1]
'-34.99' 
```

问题是您将接受多大范围的文本浮点数？有些没有小数点？指数？

```
>>> myString = "Test1 [cm]:     -35.00/-34.99/-34.00/0.09/5/1.0e6/1e-6" 
```

哎哟! - 使用正则表达式变得越来越难。

实际上，使用 Python 的字符串操作可能会更好：

```
>>> ''.join([s for s in myString.split() if '/' in s]).split('/')
['-35.00', '-34.99', '-34.00', '0.09', '5', '1.0e6', '1e-6'] 
```

您可以通过相同的方式获得第 n 个：

```
>>> n=2
>>> ''.join([s for s in myString.split() if '/' in s]).split('/')[n]
'-34.00' 
```

然后所有奇怪的情况都可以在没有更难的正则表达式的情况下工作：

```
>>> map(float,''.join([s for s in myString.split() if '/' in s]).split('/'))
[-35.0, -34.99, -34.0, 0.09, 5.0, 1000000.0, 1e-06] 
```

# node.js - 带有 node.js 的服务器端 WebKit

> ID：12130747
> 
> 赞同：5
> 
> 时间：2012-08-26T14:03:42.950
> 
> 标签：node.js, webkit

在我的 node.js 应用程序中，我需要在服务器端呈现 HTML5 页面并使其成为屏幕截图。有没有图书馆可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T14:36:42.637

查看基于[PhantomJS的](http://phantomjs.org/)[CasperJS](http://casperjs.org/)。

# iphone - 来自 libsystem_c.dylib 的内存泄漏

> ID：12130749
> 
> 赞同：1
> 
> 时间：2012-08-26T14:03:51.897
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, memory-leaks

这些是我在大量使用后唯一的泄漏： ![在此处输入图像描述](../Images/6aa01f3a21af2c18039a345d403ac1e9.png)

这里唯一负责的是`UIScrollView`- 它可能来自我应用程序中的任何表。我只有一个习惯`UIScrollView`。这是我对滚动视图所做的唯一事情：

```
self.scrollView.contentSize = CGSizeMake(320.0, 40+height); 
```

我也有一个`UIWebView`，里面也有一个`UIScrollView`。我应该担心这些泄漏吗？如您所见，它们高达 4KB，并且随着使用时间的延长，它们可能会消耗更多！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T14:12:29.343

这是 5.1 和 5.1.1 中的一个已知错误，将在未来的版本中修复。

我不确定我是否可以引用 Apple 开发者论坛中的任何内容，但如果您有开发者帐户，可以[在此处](https://devforums.apple.com/message/661576#661576)找到更多信息。

# ios - 导航项未显示

> ID：12130752
> 
> 赞同：1
> 
> 时间：2012-08-26T14:04:08.263
> 
> 标签：ios, viewdidload, rightbarbuttonitem, navigationitem

我目前正在编写一个主要基于 UITableViewControllers 的 iOS-APP。层次结构如下：

> AppDelegate -> UINavigationController -> UITableViewController [A] -(didSelectRow: presentModalVC)-> UITabBarController -(包含多个)-> UINavigationController -> UITableViewController [B]

现在，当我尝试在 viewDidLoad 方法中的 UITableViewController [B] 中添加一个 navigationItem 时，如下所示：

```
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCompose target:self action:@selector(composeTweet:)]; 
```

导航项不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:14:30.423

尝试`self.navigationController.navigationItem.rightBarButtonItem`

另外，尝试 NSLogging UINavigationController 以查看它是否为 nil。

# javascript - 将服务器托管的 webapp 连接到本地 websocket

> ID：12130753
> 
> 赞同：3
> 
> 时间：2012-08-26T14:04:09.110
> 
> 标签：javascript, websocket, client-side

有人对以下场景有想法吗？

我有一个 RIA-Web 应用程序（在 ExtJs 中实现）。我想要实现的是使用本地资源的可能性，例如读卡器或指纹读取器或其他串行设备和文件系统访问。

我考虑过使用本地 websocket 服务来实现这一点，该服务必须由我们的客户在第一次使用我们的 RIA 之前安装。当 webapp 加载时，如果 websocket 服务可用，它应该扫描本地机器并连接到它。

之后，本地事件（如正在读取新卡或识别新手指）应通过 websocket 连接传递给浏览器。

任何想法如何开始使用这样的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:47:52.170

我做了类似的东西。除了从读卡器读取/写入/轮询数据等显而易见的事情之外，您还必须自己实现所有内容，或者使用一个库来获取您将用于 Web 服务器的技术。因此，如果您使用 LAMP 解决方案，我认为您可以使用一些用于 PHP 的 web-socket 库。但是，如果您自己做所有事情，那么您必须实现从握手到创建数据包的所有内容。我使用 .NET 从头开始​​做所有事情，它提供了许多有用的库，例如散列。Java 也是一个不错的选择，并且也有这类库。一般来说，如果您自己做所有事情，我会说最棘手的事情是将要在各种数据包之间传输的数据拆分。从头开始做事情并不难。RFC ([https://www.rfc-editor.org/rfc/rfc6455](https://www.rfc-editor.org/rfc/rfc6455)）对我帮助很大。希望这会有所帮助。

# design-patterns - 这种设计模式的名称？有点像策略和响应链

> ID：12130755
> 
> 赞同：4
> 
> 时间：2012-08-26T14:04:17.037
> 
> 标签：design-patterns

有谁知道这种模式是否有名字？我倾向于大量使用它。

基本上，它是一种行为模式，它允许您提供一种方法，该方法具有实现接口的可枚举类，并且它运行所有这些类。这是一个 C# 示例：

```
interface IInputValidator
{
    bool IsValid(int input);
}

class GreaterThanZeroValidator : IInputValidator
{
    public bool IsValid(int input)
    {
        return input > 0;
    }
}

class LessThanOneThousandValidator : IInputValidator
{
    public bool IsValid(int input)
    {
        return input < 1000;
    }
} 
```

然后是使用这些的方法：

```
public void ValidateInput(int input, IEnumerable<IInputValidator> validators)
{
    bool allValid = true;
    foreach(var validator in validators)
    {
        if(!validator.IsValid(input))
            allValid = false;
    }

    if(!allValid)
        throw new ArgumentException();
} 
```

所以对我来说，它看起来很像一个策略模式，但有多种策略都有机会处理输入，而普通的 Strat 模式只接受一种策略。

它也有点像责任链，只是在普通的 CoR 中，处理程序只迭代到足够深以找到可以处理输入的 1，并且每个责任都有对下一个责任的引用（就像链表)，而在我的示例中，我将它们一起传递。

我只是想给这件事起个名字。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:43:37.170

恕我直言，这是责任链。原因是 LINQ`All`扩展在到达导致谓词返回 false 的第一项时终止。

这是 LINQPad 代码来证明我的说法`All`：

```
void Main()
{
    try
    {
        Console.WriteLine("all items are 2?");
        Console.WriteLine(YieldOneThenThrow().All(i => i == 2));
        Console.WriteLine("all items are 1?");
        Console.WriteLine(YieldOneThenThrow().All(i => i == 1));
    }
    catch (NotSupportedException)
    {
        Console.WriteLine("exception! second item was visited.");
    }
}

IEnumerable<int> YieldOneThenThrow()
{
    yield return 1;
    throw new NotSupportedException();
} 
```

...和输出：

> 所有项目都是 2？
> 假
> 所有项目都是1？
> 例外！访问了第二项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:12:51.080

但是，是的，策略模式是设计好的，消费是责任链。

这取决于用户将获得什么 - 如果为用户提供了 ValidateInput，我会将其归类为 CoR。如果只为用户提供第一组类，那么我将其称为策略。

# c# - 在实体框架中对多对多进行排序

> ID：12130757
> 
> 赞同：2
> 
> 时间：2012-08-26T14:04:39.573
> 
> 标签：c#, .net, entity-framework

我有三个表：`Items`和`Category`junction 表`CategoryItems`。项目和类别具有多对多关系。

CategoryItems 具有三列`Category_Id`：`Item_Id`和`Position`。

如何使用`Position`Entity Framework 对我的项目进行排序？

我正在使用这个模型构建器：

```
modelBuilder
.Entity<Category>()
.HasMany(c => c.Items)
.WithMany(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T14:59:07.350

`CategoryItems`如果您的联结表 ( ) 在关系的每一端（在本例中为 ）的外键上有附加列，则EF 不支持映射多对多关系`Position`。您将需要创建另一种类型（例如`CategoryItem`）并将您的映射配置为与此类型的两个一对多关系。

在这种情况下，您的`Category`和`Item`类型都将具有（例如）`CategoryItem`集合，并且`CategoryItem`类型将具有`Category`and`Item`属性。

因此，要获取按位置排序的类别的项目列表，您可以执行以下操作：

```
var category = context.Categories.Find(categoryId);
var orderedItems = 
    category.CategoryItems.OrderBy(ci => ci.Position).Select(ci => ci.Item); 
```

您可能想要选择一个比 更好的名称`CategoryItem`，因为虽然这是一个描述联结表的好名称，纯粹是为了建模多对多关系，但在您的情况下，它实际上本身就是一个实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:52:46.950

我最终使用它来加载类别项目：

```
 public IEnumerable<Item> Items
    {
        get
        {
            using (var context = new CatalogueContext())
            {
                var ids = context.Database.SqlQuery<int>("SELECT Item_Id FROM CategoryItems WHERE Category_Id = " +
                                                         this.Id + " ORDER BY Position");
                foreach (int id in ids)
                    yield return context.Items.Find(id);

            }
        }
    } 
```

然后使用 SQL 查询来更改位置。

# git - 中断的 git pull

> ID：12130758
> 
> 赞同：0
> 
> 时间：2012-08-26T14:04:50.650
> 
> 标签：git

我有一个 git pull 被打断了，现在我不确定它是否弄乱了我的 .git 目录。我可以通过运行来保证我的 git repo 的完整性`git fsck --full`吗？是否有任何其他命令可以查看目录中是否添加了一半？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:40:01.103

将项目的物理副本（包括它的 .git 目录）复制到另一个地方，比如 ~/tmp 然后在那里运行 git pull 看看它告诉你什么。您只是在拉动，这是一个丢弃目录，因此您将无法更改任何内容（只要您在不确定的情况下不推动）。

所以，如果你的应用程序目录是：~/blogger

做

```
cd ~                 # "~" means your home directory
mkdir tmp            # Make a temporary directory.
cp -r blogger ~/tmp  # Copy the project there
cd /tmp/blogger      # Go there
git pull             # Try a pull to see what happens. 
```

如果拉取工作正常，您将对您的实际目录内容充满信心（所以`cd`现在回到它）。如果拉取有问题，请保存您当前的项目代码并尝试重新拉取，看看是否可以。

例如

```
cd ~
mv blogger old_blogger
# Go to github and click on the copy icon.
git clone [paste - ctrl-v or shift-ctrl-v]
# Now use your old_blogger directory as a source 
# for any changes you want to (manually) copy the code from. 
```

如果新的`git pull`有问题，请考虑转到您的项目目录并删除整个`.git`结构，然后`git init`创建一个新的 git 存储库，然后删除（或重命名为 old_blogger）现有的 github 存储库，然后重新创建它， `git clone`然后. 这显然是最极端的（“核”）选项。`git add .``git commit``git push`

# c++ - 装饰器模式 vs. 调用超级反模式

> ID：12130761
> 
> 赞同：1
> 
> 时间：2012-08-26T14:05:17.330
> 
> 标签：c++, design-patterns, decorator, anti-patterns

让我们有一个简单的装饰器示例：

```
struct IStuff {
  virtual void Info()=0;
  virtual ~IStuff() { }
};

class Ugly : public IStuff {
public:
  void Info() { cout  << "Ugly"; }
};

class Shiny : public IStuff {
  IStuff* stuff;
public:
  Shiny(IStuff* stuff) {
    this->stuff = stuff;
  }
  ~Shiny() {
    delete stuff;
  }
  void Info() {
    stuff->Info(); // <------------------------------- call super?
    cout << "->Shiny";
  }
};

int main() {
  IStuff* s = new Ugly();
  s = new Shiny(s); // decorate
  s = new Shiny(s); // decorate more
  s->Info(); // Ugly->Shiny->Shiny
  delete s;
  return 0;
} 
```

这也是[Call 超级](http://en.wikipedia.org/wiki/Call_super)反模式吗？

*Call super 是一种设计模式，其中特定类规定在派生的子类中，用户需要覆盖方法并在特定点回调被覆盖的函数本身。*

这里有[一点不同的实现](http://www.vincehuston.org/dp/decorator.html)设计有什么不同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T14:11:26.057

这不是呼叫超级。您调用`Info`另一个`IStuff`实例的方法，而不是覆盖的版本。

调用超级版本：

```
struct IStuff {
  // If you override this, you MUST call the base class version <-- call super
  virtual void Info()
  {
    // a default implementation.

    std::cout << "Super call ";  
  }
  virtual ~IStuff() { }
};

class Shiny : public IStuff {
public:
  void Info() {
    IStuff::Info();  // don't forget to call base implementation.
    std::cout << "->Shiny";
  }
}; 
```

Decorator 的一些实现正在对 Decorator 基类进行超级调用，该基类负责保存、调用和管理装饰引用：

```
struct IStuff 
{
  virtual void Info() = 0;
  virtual ~IStuff() { }
};

class Stuff : public IStuff
{
public:
    void Info() { std::cout << "Basic stuff"; }
};

class StuffDecorator : public IStuff
{
    IStuff* decorated_;
public:
    StuffDecorator(IStuff* decoratedStuff) :
        decorated_(decoratedStuff) {}
    ~StuffDecorator() { delete decorated_; }

    void Info()
    {
        decorated_->Info();
    }
};

class Shiny : public StuffDecorator 
{
public:
  Shiny(IStuff* stuff) : StuffDecorator(stuff) { }

  void Info() 
  {
    StuffDecorator::Info();
    std::cout << "->Shiny";
  }
}; 
```

为了避免超级调用，您可能需要将 Decorator 与[Template Method](http://sourcemaking.com/design_patterns/template_method)结合使用：

```
class StuffDecorator : public IStuff
{
    IStuff* decorated_;
public:
    StuffDecorator(IStuff* decoratedStuff) :
        decorated_(decoratedStuff) {}
    ~StuffDecorator() { delete decorated_; }

    void Info()
    {
        decorated_->Info();
        DoInfo();
    }
private:
    // Template method
    virtual void DoInfo() = 0;
};

class Shiny : public StuffDecorator 
{
public:
  Shiny(IStuff* stuff) : StuffDecorator(stuff) { }
private:
  void DoInfo() 
  {
    std::cout << "->Shiny";
  }
}; 
```

# servicestack - 在 servicesatck 添加 mimetypes

> ID：12130763
> 
> 赞同：1
> 
> 时间：2012-08-26T14:05:48.007
> 
> 标签：servicestack

如何将自定义 MIME 类型添加到 servicestack 应用程序？

我尝试搜索 servicestack.net 并查看源代码，但我似乎认为更改 MIME 类型并不是一个常见的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:27:55.557

您可以查看`http://www.servicestack.net/ServiceStack.Northwind/vcard-format.htm`有关如何使用自定义 MIME 类型（即自定义内容类型）的示例。

# cocos2d-iphone - Cocos2d + Tiled + Teleportation（平铺属性）？

> ID：12130764
> 
> 赞同：1
> 
> 时间：2012-08-26T14:05:51.760
> 
> 标签：cocos2d-iphone, sprite

因此，使用[Tiled](http://www.mapeditor.org/)，我可以在将其放置在地图上之前直接在图块上设置 Tile 属性，如下所示：

![设置平铺属性](../Images/6430d8b4a8e1b766f87bafedc79990b3.png)

这就是我完成碰撞检查的方式，将碰撞属性设置为“true”，然后在移动精灵时检查平铺属性。

但是，我想添加一个“传送”图块。当玩家在特定的瓷砖上行走时，它会将他们带到一个单独的位置。

我遇到的问题是，当您在磁贴上设置属性时，您只能设置一次，而不是在磁贴实例上设置。这意味着每个图块都将具有相同的传送位置。

我忽略了什么吗？一般来说，在 Cocos2d 中是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T20:11:37.347

您可以为此使用对象层。将“对象”（在 Tiled 中只是一个矩形或点）添加到传送器图块，并使用对象的属性将两个位置连接在一起。

加载地图时，您可以遍历所有对象以找到连接对象。然后，您知道可以存储在传送阵列中的传送器端点的两个图块位置。每次你的玩家移动到一个新的格子时，检查传送阵列以查看玩家是否在其中一个传送场上，如果他在，将他移动到另一个传送格。

当然，您也可以检查与对象（矩形）的交集，但由于您可能不小心创建了跨越多个图块的对象（矩形），因此在游戏开始之前检查这些对象似乎更可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:29:42.070

好吧，这可能是最好的方法，但这是我所做的。您可以创建一个元层并为每个传送垫设置单独的图块。因此，当您检查玩家是否在 teleportingpad1 上时，您将玩家位置设置为 receiverPad1（可能是另一个瓷砖、瓷砖中的对象，或者只是您在检查碰撞时设置的一个点）。您只需制作另一个，例如 teleportingpad2、teleportingpad3 等，以获得更多的垫子。

# java - Spring webflow 无法访问 mvc bean

> ID：12130766
> 
> 赞同：2
> 
> 时间：2012-08-26T14:06:06.903
> 
> 标签：java, spring, spring-mvc, spring-webflow-2

我正在尝试在以下 Web 流程中使用一些 @Service 注释类（是的，使用 mvc:annotation-driven）：

### *管理流.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/webflow
    http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd" start-state="start" >

<view-state id="start" view="Userview.jsp" >

<on-render>

    <set name="flowScope.users"
        value="UserService.getUsers()">
    </set>
</on-render>
</view-state>
<bean-import resource="Manage-Beans.xml"/>
</flow> 
```

### *管理 Beans.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xsi:schemaLocation="http://www.springframework.org/schema/beans         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
<bean class="com.dproductions.test.Service.SiteService" id="SiteService" />
<bean class="com.dproductions.test.Service.CustomerService" id="CustomerService" />
<bean class="com.dproductions.test.Service.UserService" id="UserService" />

 </beans> 
```

尝试到达流程时，我得到以下堆栈跟踪：http://pastebin.com/QmCXe45Y

这归结为 Webflow 无法访问指定的包。但它没有给出 'ClassNotFoundException' ，这让我有点困惑。

欢迎任何建议。

此外，我的 servlet-context 在这里找到：[Servlet-context](http://pastebin.com/2HHvDRUK)

我已经为此奋斗了一个多星期了。

*编辑*

我希望能够以在[This Example](http://www.javabeat.net/2010/10/introduction-to-spring-web-flow-swf/2/)中使用的方式使用我的 bean ，在操作状态下，bean 直接由 Spring MVC 拾取/管理。bean 是否必须在 applicationcontext 中声明（并且可序列化？）？使用 xml 符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:16:42.020

如果我改变

```
<set> 
```

朝着一个

```
<evaluate expression> 
```

并在文件 Manage-Beans.xml 中定义了 bean，它可以工作。

但是这样我必须定义同一个 bean 两次，因为它曾经被 pkg-search 注释拾取，然后在 web-flow 中再次出现。我想要已经做好的豆子。

Spring web flow 确实重新创建/实例化了 bean。您可以引用属性，将它们与 Web 流 bean 导入文件中的 bean 自动装配，但这就像一个新的上下文，不知道现有的 bean。（使用事件去流和正常上下文文件。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:11:00.377

> java.lang.IllegalStateException：渲染视图org.springframework.web.servlet.view.JstlView发生异常：未命名；URL [/WEB-INF/flows/manage/Userview.jsp] org.springframework.webflow.mvc.view.AbstractMvcView.render(AbstractMvcView.java:191) org.springframework.webflow.engine.ViewState.render(ViewState.java :296) org.springframework.webflow.engine.ViewState.refresh(ViewState.java:243) org.springframework.webflow.engine.ViewState.resume(ViewState.java:221) org.springframework.webflow.engine.Flow.resume (Flow.java:545) org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:258) org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169) org.springframework.webflow .mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183) 组织。

检查视图文件位置。

# c++ - 如果我仅在发布配置中遇到内部编译器错误，我可以查看什么来解决这个问题？

> ID：12130768
> 
> 赞同：2
> 
> 时间：2012-08-26T14:06:29.760
> 
> 标签：c++, visual-studio-2010, compiler-construction, compiler-errors, c1001

我使用的是 Visual Studio 2010。C1001 错误（内部编译器错误）仅发生在发布配置中。调试编译正常。在这种情况下，我应该注意什么以防止在配置差异方面发生这种情况？

我知道内部编译器错误是什么，问题是如果它只是发布问题，应该采取什么方法。到目前为止，围绕提到的行（在错误消息中）修改代码并没有帮助，这些行一直在变化，我也想知道这是否会成为一个红鲱鱼？我已经尝试更改已经阅读过类似问题的一些答案的优化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:11:12.333

尽管“解决方案”可能看起来不令人满意，但该问题已得到解决。内部编译器错误提到的文件和行不是我的代码，而是来自我正在使用的库，该库是在单独的解决方案和项目中编译的。我没有立即意识到这一点。在我评论说我的更改在上面没有任何效果后不久，我尝试在没有优化的情况下编译 lib 代码，然后尝试重新编译我的代码。那也没有用。最后，我只是将两行代码从第 x 行移动到第 x + 20 行（在同一个块内，所以它在哪里并不重要）然后再次构建库，然后重新构建我的工作并且它工作。

所以最后，要解决，有这样的事情。

```
{
blah1
blah2
blah3
blah4 //the line the compiler error mentioned
blah5
blah6
blah7
blah8 
} 
```

变成：

```
{
blah1
blah2
blah3
blah6
blah7
blah8
blah4
blah5 
} 
```

我想像这样的任何随机更改都会起作用，这种方式恰好在第一次尝试时起作用。

StackOverFlow 上已经有类似的解决方案，让我有一段时间感到困惑的是调试/发布的差异，以及我必须更改的代码来自不同的解决方案和项目，我不得不重新构建两个单独的解决方案。

# android - Android中的3D挥旗（使用布料模拟）

> ID：12130772
> 
> 赞同：-1
> 
> 时间：2012-08-26T14:07:40.927
> 
> 标签：android, opengl-es, simulation

我的目标是使用**OpenGL**在 Android中创建一个**挥动的旗帜，**但我不知道从哪里开始。

 **布料建模似乎产生了最简洁的效果，但我在网上找不到任何适用于 Android 的实现。

我希望有人会知道一些可以帮助我解决这个问题的教程、资源等。

如果您知道更简单/其他方法来创建一个体面的挥舞旗帜，请告诉我。我对一切都开放。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T20:55:43.400

谷歌 [http://code.google.com/p/waving-flag-android/上的第一个结果](http://code.google.com/p/waving-flag-android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:08:20.610

Jesper Mosegaard 提供了一个关于布料模拟的好教程[http://cg.alexandra.dk/2009/06/02/mosegaards-cloth-simulation-coding-tutorial/](http://cg.alexandra.dk/2009/06/02/mosegaards-cloth-simulation-coding-tutorial/)

布料模拟的先驱工作来自 Darwin 3D [http://www.darwin3d.com/gdm1999.htm#gdm0599](http://www.darwin3d.com/gdm1999.htm#gdm0599)

Google Code 中的一个开源项目提供了多种算法[http://code.google.com/p/opencloth/](http://code.google.com/p/opencloth/)

所有这些作品都基于 C/C++，这是 OpenGL 的自然编程语言。当你在做一个 Android 项目时，你必须用 Java 重写算法。弄清楚机制后，你应该没问题。祝你好运！**

# jsp - 在jsp网站中显示视频

> ID：12130773
> 
> 赞同：0
> 
> 时间：2012-08-26T14:07:50.453
> 
> 标签：jsp, video, youtube

嗨，我正在创建一个网站作为大学的**在线试镜**。客户可以在 youtube 上上传他们的表演视频。

```
So my question is how can i display those specific videos on my web page as admin should see it and be able to comment also? 
Is there anything like description or trend with help of which i can get those videos only which are uploded by my clients?
and i want to get the path of the videos so as i can just call them in  iframe? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:40:17.983

我写了一个JSP。请记住，这只是一个演示。你需要重写它。正如我发布的那样，重新启动网络服务器时数据将丢失。您应该将数据放入数据库或文件中。

```
<%@ page import="java.util.*" %>
<!DOCTYPE html>
<body>
<iframe id="videoFrame" width="420" height="345">
</iframe><br/><br/>
Watch a video:
<%
   HashMap<String,String> map = (HashMap)application.getAttribute("map");
   if(map == null){
        map = new HashMap<String,String>();
        application.setAttribute("map", map);
   } 
   String id = request.getParameter("vid");
   String title = request.getParameter("title");
   if(id != null && !"".equals(id.trim()) 
         && title != null && !"".equals(title.trim()))map.put(id.trim(),title.trim());
   Iterator<String> iter = map.keySet().iterator();
   while(iter.hasNext()){
       String i = iter.next();
       String t = map.get(i);
       out.print("<a href='?vid=" + i + "&title=" + t + "' >" + t + "</a> ");
   }
%>
  <form>
    Add your video:
    id<input name="vid" type="text" />  
    title<input name="title" type="text" />
    <input type="submit" />
  </form>
<script>
var url = "http://www.youtube.com/embed/${param.vid}";
document.getElementById("videoFrame").src = url;
</script>
</body>
</html> 
```

# octave - Octave中的符号集成？（需要安装扩展？如何安装？- 使用 Ubuntu 12.04）

> ID：12130775
> 
> 赞同：6
> 
> 时间：2012-08-26T14:08:00.993
> 
> 标签：octave, ubuntu-12.04, symbolic-math

我想在 GNU Octave 中计算以下符号表达式：

int(exp(ikx-|k|^n),k,-infinity,infinity) , (- 它当然是 'x' 的函数，其中 'x' 是一个数据数组。)

*   我不成功。

*   我在互联网上搜索了一下，了解到 Octave 最初并没有内置的“符号数学”套件。

这是真的？如何下载和安装它（使用 Ubuntu 12.04，从“终端”？）？

提前谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T14:45:41.607

是的。GNU octave 是核心程序和语言。您正在寻找的是属于[Octave-Forge的](http://octave.sourceforge.net/index.html)[符号包](http://octave.sourceforge.net/symbolic/index.html)中的函数。它们是两个不同但相关的项目。让我提醒您，符号数学工具箱也不是 Matlab 核心的一部分，它是一个不同的产品。

要在 Ubuntu 中安装它们，这取决于您安装 Octave 的方式：

1.  来自 Ubuntu 存储库？如果是这样，`sudo apt-get install octave-symbolic`.
2.  自己编译 Octave？启动 Octave 并在 Octave 提示符下`pkg install -forge symbolic`
3.  来自最新的 PPA 之一？检查他们是否也有 sybolic 包并安装那个

~~我可以提前告诉你，符号包已经很久没有维护了，并且不能很好地与最新的 Octave 版本一起使用（它是为非常旧的 Octave 版本编写的）。建议通常是切换到专为此设计的[Maxima](http://maxima.sourceforge.net/)。~~自 2015 年以来，符号包再次得到积极维护。但是，Octave 仍然是一种针对数值计算的编程语言。如果您的所有问题都需要符号计算，那么请考虑使用计算机代数系统。通常建议使用[千里马。](http://maxima.sourceforge.net/)

# java - java中的切片字符串

> ID：12130776
> 
> 赞同：20
> 
> 时间：2012-08-26T14:08:10.353
> 
> 标签：java, string, excel

如何在java中切片字符串？我从 csv 和 xls 中获取行，例如单元格中的数据就像

> 14.015_奥迪

我怎么能说 java 它必须在 _ 之前只看一部分？所以在操作之后我必须有 14.015。在rails中我会用gsub来做这个，但是在java中怎么做呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-26T14:10:47.800

您可以使用[`String#split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)：

```
String s = "14.015_AUDI";
String[] parts = s.split("_"); //returns an array with the 2 parts
String firstPart = parts[0]; //14.015 
```

您应该添加错误检查（例如，数组的大小符合预期）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-26T14:28:31.603

而不是创建一个新列表并具有两次副本的拆分，我会使用子字符串，它适用于原始字符串并且不会创建新字符串

```
String s = "14.015_AUDI";
String firstPart = s.substring(0, s.indexOf("_")); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-26T14:10:58.850

```
String str = "14.015_AUDI";
String [] parts = str.split("_");

String numberPart = parts[0];
String audi = parts[1]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-27T05:51:43.507

应该更短：

```
"14.015_AUDI".split("_")[0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-17T23:10:14.127

番石榴有[分离器](https://code.google.com/p/guava-libraries/wiki/StringsExplained#Splitter)

```
List<String> pieces = Splitter.on("_").splitToList("14.015_AUDI");
String numberPart = parts.get(0);
String audi = parts.get(1); 
```

# haskell - 从 Eq 派生实例时 Haskell“模式中的解析错误”

> ID：12130777
> 
> 赞同：0
> 
> 时间：2012-08-26T14:08:16.027
> 
> 标签：haskell, parse-error

我在“Learn You a Haskell for Great Good”的帮助下学习 Haskell！并且目前正在尝试了解类型类和实例。LYAH 提供了一个[示例](http://learnyouahaskell.com/making-our-own-types-and-typeclasses#typeclasses-102)，其中调用的类型`TrafficLight`定义如下：

```
data TrafficLight = Red | Yellow | Green 
```

现在`TrafficLight`应该是`Eq`显示以下行为的一个实例：

```
instance Eq TrafficLight where
    Red == Red = True
    Green == Green = True
    Yellow == Yellow = True
    _ == _ = False 
```

为了理解它是如何工作的，我编写了自己的文件`Shop.hs`，名为我尝试覆盖`Eq`我的`ItemSlot`.

```
module Shop where

type Number = Int

data Item =
          BellPepper
        | Cabbage
        | Carrot
        | Lettuce
        | Onion
        | Potato
        | Tomato
        deriving (Show, Read, Eq)

data ItemSlot = ItemSlot {
        item :: Item,
        number :: Number
        } deriving (Show)

instance Eq ItemSlot where
        ((item a) == (item a)) = True -- line that contains the error
        _ == _ = False 
```

但是，如果我在 GHCi 中加载文件，我会收到以下错误：

```
Prelude> :l Shop.hs 
[1 of 1] Compiling Shop             ( Shop.hs, interpreted )

Shop.hs:21:11: Parse error in pattern: item
Failed, modules loaded: none. 
```

（我必须承认，我对这里的正确语法感到很困惑——是它`item a`还是只是`item`？使用仅`item`失败并出现相同的错误，并且使用更多括号——就像在 SO 上的另一个类似问题的答案一样——没有似乎也有帮助。）

我的猜测是我无法使用 中使用`item`的记录语法提供的功能`ItemSlot`，但是我不知道如何解决该问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T14:12:53.120

模式通常以构造函数开始。该`ItemSlot`类型的构造函数是`ItemSlot`，因此您将使用它：

```
instance Eq ItemSlot where
    ItemSlot item a == ItemSlot item' a' = -- use item, item', a, and a' 
```

或者，因为您已定义`ItemSlot`为记录，所以存在所谓的模式记录语法。您可以按名称而不是位置绑定变量：

```
instance Eq ItemSlot where
    ItemSlot { item = foo, number = a } == ItemSlot { item = foo', number = a' }
        = -- use foo, foo', a, and a' 
```

如果您不介意混淆的机会，您当然可以隐藏名称：

```
instance Eq ItemSlot where
    ItemSlot { item = item, number = a } == ItemSlot { item = item', number = a' }
        = -- use item, item', a, and a' 
```

为方便起见，Haskell 中的模式可以嵌套；所以，如果你想匹配`ItemSlot`两个都有`BellPepper`s 的 s，例如，你可以写

```
instance Eq ItemSlot where
    ItemSlot BellPepper a == ItemSlot BellPepper a' = True
    -- or, equivalently
    ItemSlot { item = BellPepper } == ItemSlot { item = BellPepper } = True 
```

`Item`尽管通常您会将's的比较委托给s 的`Eq`实例`Item`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T15:10:42.067

模式匹配在`TrafficLight`示例中起作用，因为您只需要知道构造函数 ( `Red`,`Green`或`Yellow`) 是什么来判断它们是否相等，但是只有当字段中的数据相等时，您的*s*`ItemSlot`才相等，因此您需要使用右边的方程：*`item`*

 *```
instance Eq ItemSlot where
        ItemSlot {item=i} == ItemSlot {item=j} = i == j 
```

这相当于

```
instance Eq ItemSlot where
        ItemSlot i _ == ItemSlot j _  =  i == j 
```

但更具前瞻性，因为如果您添加另一个字段并且不想更改 的含义`==`，则可以不理会第一个版本。`==`（您可能会争辩说您应该在添加字段时重新访问，但根据`{item =`我的经验，使用语法会导致更清晰的错误消息。

最干净的是

```
instance Eq ItemSlot where 
        i == j  =  item i == item j 
```

正如 Antal SZ 提醒我的那样（谢谢）。

如果你用

```
eg1 = ItemSlot {item = Carrot, number = 3}
eg2 = ItemSlot {item = Onion, number = 3}
eg3 = ItemSlot {item = Onion, number = 42}
eg4 = ItemSlot {item = Carrot, number = undefined}
eg5 = ItemSlot {item = Carrot} 
```

你会发现这`eg5`会给你一个警告。您可以在使用记录时忽略字段，所以`Eq`上面的第一个版本很好，但是如果您正在定义记录，Haskell 希望您提供所有数据。

您可以检查，`eg4 == eg1`甚至`eg2 == eg4`没有`eg2 == eg5`问题 - 惰性求值意味着它在检查时不检查数字字段`==`，但如果您只输入`eg4`or `eg5`，它不会完成，因为它遇到未定义的值。*

# jquery - 花式框错误 - 对象# has no method 'undelegate' Been at this for over an hour now - lightbox plugin was working just fine (as expected) but for whatever reason I cannot get this fancybox plugin to work properly. The setup: 问问题 user725913 问问题 2012-08-26T14:09:00.930 2533 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Been at this for over an hour now - lightbox plugin was working just fine (as expected) but for whatever reason I cannot get this fancybox plugin to work properly. The setup: For testing purposes I am using the images from fancy box's website - absolute path reference -, the jQuery declaration from their site, and the css file they recommend I use. The error: Uncaught TypeError: Object # has no method 'undelegate' To see the error: Go to The Error Page and inspect element in chrome Feel free to view the source of my website, I'm almost positive I've referenced everything correctly I appreciate any help, thank you. set start time and end time php mysql So I am currently working for Online Election system for my school project and I am having a hard time how to set a start and end time for election. I have a date/time picker for start time and for end time and then I want the value of dtpicker to save in my database and I want to have a countdown based on the time on my database and if the election start it will display the voting page and if the election ends it will redirect to results. How can I do that. I've been a lot of threads but they did not solve my problem. Could you please help me? Do you have any idea or suggest a website related to my problem? I'm stuck on this problem for 3 days. Any help would be greatly appreciated. ---UPDATE--- so here is my code below: "; $closedate = date_format(date_create($row[2]), 'm/d/Y H:i:s'); echo "Voting will end: " . $closedate; ?>

Time Left:  so what i am trying to do is whenever the election ends it will redirect to result if not then it will display the voting page. should I use if else statement? I am so sorry, I am still a noob about this. Could you please help me out.? jqueryfancyboxundelete 4 1 回答 1 This answer is useful 3 嗨，您使用的是旧版本的 jQuery，即 1.4.1。 .undelegate() 方法是在 jQuery 版本 1.4.2 中添加的。将 jQuery 版本更改为 1.4.2 或最新版本，fancybox 可以正常工作 参考：Jquery .undelegate() 于 2012-08-26T14:14:31.703 回答 Related 1 javascript - 使用 scrollTop 的 jQuery 偏移固定标题 3 sql - 基于当前的下一个/上一个记录 2 jquery - jQuery .not() 方法是否需要 CSS 选择器 0 objective-c - 自定义标签栏大小 3 php - PHP：替换一个unicode符号 1 java - Android - Eclipse 使用 SDK 2.2 上的项目构建/运行速度很慢 3 android - 安卓切换按钮 1 printing - 在 IE9 打印/打印预览中禁用 Cufon 1 c# - WebSocket java插件无法连接 2 iphone - 为什么有两个地方指定App Icon File？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12130780
> 
> 赞同：2
> 
> 时间：
> 
> 标签：jquery, fancybox, undelete

Been at this for over an hour now - lightbox plugin was working just fine (as expected) but for whatever reason I cannot get this fancybox plugin to work properly.

**The setup:**

> For testing purposes I am using the images from fancy box's website - absolute path reference -, the jQuery declaration from their site, and the css file they recommend I use.

**The error:**

> Uncaught TypeError: Object # has no method 'undelegate'

To see the error:

1.  Go to [The Error Page](http://nanisolutions.us/?page_id=49) and inspect element in chrome
2.  Feel free to view the source of my website, I'm almost positive I've referenced everything correctly

I appreciate any help, thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T14:14:31.703

嗨，您使用的是旧版本的 jQuery，即 1.4.1。

.undelegate() 方法是在 jQuery 版本 1.4.2 中添加的。将 jQuery 版本更改为 1.4.2 或最新版本，fancybox 可以正常工作

参考：[Jquery .undelegate()](http://api.jquery.com/undelegate/)

# php - 设置开始时间和结束时间php mysql

> ID：12130781
> 
> 赞同：0
> 
> 时间：2012-08-26T14:09:16.843
> 
> 标签：php, jquery, mysql, ajax

所以我目前正在为我的学校项目使用在线选举系统，我很难设置选举的开始和结束时间。我有一个用于开始时间和结束时间的日期/时间选择器，然后我希望 dtpicker 的值保存在我的数据库中，我想根据我的数据库上的时间进行倒计时，如果选举开始，它将显示投票页面，如果选举结束，它将重定向到结果。我怎样才能做到这一点。我有很多线程，但它们并没有解决我的问题。请你帮助我好吗？您有任何想法或建议与我的问题相关的网站吗？我在这个问题上停留了 3 天。任何帮助将不胜感激。

- -更新 - -

所以这是我的代码如下：

```
 <?php
 $con = mysql_connect("localhost","root","vertrigo");
 if (!$con)
 {
 die('Could not connect: ' . mysql_error());
 }

 mysql_select_db("db_voting", $con);

 $result = mysql_query("SELECT * FROM time WHERE time_ID = 1");

 $numrow = mysql_num_rows($result);

 if ($numrow == 0)
 {
die('No election found.');
 }

 $row = mysql_fetch_row($result);
 $startdate = date_format(date_create($row[1]), 'm/d/Y H:i:s');
 echo "Voting will start: " . $startdate. "<br />";

 $closedate = date_format(date_create($row[2]), 'm/d/Y H:i:s');
 echo "Voting will end: " . $closedate;
 ?>
<p>Time Left:
<script language="JavaScript">
TargetDate = "<?php echo $closedate ?>";
BackColor = "palegreen";
ForeColor = "navy";
CountActive = true;
CountStepper = -1;
LeadingZero = true;
DisplayFormat = "%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds.";
FinishMessage = "Voting has Ended";
</script>
<script language="JavaScript" src="countdown.js"></script> 
```

so what i am trying to do is whenever the election ends it will redirect to result if not then it will display the voting page. 我应该使用 if else 语句吗？我很抱歉，我仍然是一个菜鸟。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:29:42.760

有很多方法可以做到这一点。

您面临的部分问题是 Mysql 和 PHP 可以处理不同的时间格式。如果您在 MYSQL 中以日期格式存储日期，它将采用 YYYY-MM-DD 格式，而 PHP 日期对象使用 UNIX 时间戳（自 1970 年 1 月 1 日午夜起经过的秒数）。您可以将数据库中的时间戳保存为整数，但我通常保存为 MYSQL 格式，然后使用 php strtotime 命令处理我的 php 代码中的日期。这会将 mysql 本机格式转换为时间戳。

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

一旦日期采用这种格式，您只需将当前日期转换为时间戳，然后从另一个中减去一个以进行倒计时。您可以划分以将其从几秒变为几天或其他任何时间。

在将时间戳转回日期方面，您可以使用此功能。

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

使用时间戳时的最后一个警告，javascript 和 PHP 以不同的方式处理它们。Javascript（如果您的项目中有的话）以毫秒为单位工作，而 php 以秒为单位。

只是一个想法，但可能有很多方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:18:44.727

根据我的经验，比较时间的可靠方法是使用 Unix 时间格式。设置您的 if 以比较 Unix 时间格式并查看它是否有效。记得设置默认时区！

而且，您尝试过的示例肯定会有所帮助。

# qt - 正确跟踪源模型行移动是否是 QSortFilterProxyModel 合同的一部分？

> ID：12130788
> 
> 赞同：4
> 
> 时间：2012-08-26T14:10:35.110
> 
> 标签：qt, model, qt4, model-view

假设我有一个源模型，其中行运动装饰有

```
beginMoveRows()
endMoveRows() 
```

（因此发出`layoutChanged()`）。

然后，设置了一个[QSortFilterProxyModel实例来过滤源模型的行。](http://doc.qt.nokia.com/4.7-snapshot/qsortfilterproxymodel.html)当我从源代码中得到它时，源模型布局的更改会导致代理模型的相应重新调整（因为它会监听`layoutChanged()`信号并正确调整自身）。

但文档只说：

> 注意：默认情况下，模型不会在原始模型更改时动态重新排序和重新过滤数据。可以通过设置 dynamicSortFilter 属性来更改此行为。
> 
> dynamicSortFilter : bool 此属性保存代理模型是否在源模型的内容发生变化时动态排序和过滤。

我的问题：

*   （1）“每当原始模型更改时”是否包括“在原始模型中移动行时”
*   (2) 如果是，代理模型中的项目顺序是否保证与源模型中的相同，以及
*   （3）有没有人在开发中依赖上述行为的经验？
*   (4) **[额外问题]**如果我尝试在 QSortFilterProxyModel 子类中跟踪源模型的行 (AboutToBe)Moved 信号并在那里调用 beginMoveRows/endMoveRows （使用适当映射的行索引），我是否正确，这会弄乱代理，因为在处理 onLayoutChanged 源模型的信号时，beginMoveRows/endMoveRows 调用将尝试调整已由 QSortFilterProxyModel 调整的持久索引？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:09:58.197

The problems you mentioned in your comment seem to appear only when you play with number or ordering of columns, so I think your model is unaffected.

The detailed specification as to what is intended to happen is not provided, so the only alternative is to lookup the sources and hope that it will no change in future versions. After a glance into the sources I think that answers to your questions are:

*   (1) Yes, qt is responding to `layoutChanged()` and `layoutAboutToBeChanged()` signals, updating it's indexes and emiting own `layoutChanged()` and `layoutAboutToBeChanged()`, so it's reacting to row moving.
*   (2) Yes if you don't use sorting, just filtering. Qt in such case erases entire internal mapping and re-builds it from scratch so the data will be just as they appear in source model. Sorting of course will scatter new data around. Note that if you are using sorting and moving rows within the same parent, sorted model should not show any change.
*   (3) No. I am just reading qt source and interpreting. You are free to disregard any information provided ;)
*   (4) Yes, `layoutChanged()` is updating persistent indexes already, so updating it again can only mess up things.

# android - 通过片段着色器将 YUV 转换为 RGB

> ID：12130790
> 
> 赞同：9
> 
> 时间：2012-08-26T14:10:44.637
> 
> 标签：android, opengl-es, camera, shader, fragment-shader

我在将 Android 中的相机预览从 YUV 格式转换为 RGB 时遇到问题。转换的目的是应用一些效果。我尝试通过片段着色器进行转换，因为本机代码的转换速度很慢（大约 14fps）。我使用的参考是[http://jyrom.tistory.com/m/post/view/id/187](http://jyrom.tistory.com/m/post/view/id/187)。我尝试将此代码移植到 Android 平台，但结果是黑绿色矩形。但是，我可以通过我得到的输出观看某种形式。你能不能帮我解决这个问题。我相信这是一个流行的问题：将效果应用于相机预览。我还提供了一个指向我的测试项目的链接：[https](https://dl.dropbox.com/u/12829395/application/FilterGL/FilterGL.zip) ://dl.dropbox.com/u/12829395/application/FilterGL/FilterGL.zip 。谢谢你。
更新：
这是我的**onPreviewFrame**方法：

```
public void onPreviewFrame(byte[] data, Camera camera) {
    yBuffer.put(data);
    yBuffer.position(0);

    System.arraycopy(data, U_INDEX, uData, 0, LENGTH_4 * 2);
    uBuffer.put(uData);
    uBuffer.position(0);

    System.arraycopy(data, V_INDEX, vData, 0, LENGTH_4);
    vBuffer.put(vData);
    vBuffer.position(0);
} 
```

这就是我在**onDrawFrame**方法中将字节数组绑定到 OpenGL 纹理的方式：

```
 GLES20.glUniform1i(yTexture, 1);
    GLES20.glTexImage2D(   GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE,
            320, 240, 0, GLES20.GL_LUMINANCE, GLES20.GL_UNSIGNED_BYTE, yBuffer);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);

    GLES20.glUniform1i(uTexture, 2);
    GLES20.glTexImage2D(   GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE,
            160, 120, 0, GLES20.GL_LUMINANCE, GLES20.GL_UNSIGNED_BYTE, uBuffer);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);

    GLES20.glUniform1i(vTexture, 3);
    GLES20.glTexImage2D(   GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE,
            160, 120, 0, GLES20.GL_LUMINANCE, GLES20.GL_UNSIGNED_BYTE, vBuffer);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR); 
```

这是我的片段着色器代码：

```
#ifdef GL_ES
precision highp float;
#endif

varying vec2 v_texCoord;
uniform sampler2D y_texture;
uniform sampler2D u_texture;
uniform sampler2D v_texture;

void main()
{   
    float nx,ny,r,g,b,y,u,v;
    nx=v_texCoord.x;
    ny=v_texCoord.y;
    y=texture2D(y_texture,v_texCoord).r;
    u=texture2D(u_texture,v_texCoord).r;
    v=texture2D(v_texture,v_texCoord).r;

    y=1.1643*(y-0.0625);
    u=u-0.5;
    v=v-0.5;

    r=y+1.5958*v;
    g=y-0.39173*u-0.81290*v;
    b=y+2.017*u;

    gl_FragColor = vec4(r,g,b,1.0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-12T13:10:52.777

不知道你的问题有没有解决。

我使用了你的代码，我在这种模式下解决了。

```
public class MyRenderer implements Renderer{
public static final int recWidth = Costanti.recWidth;
public static final int recHeight = Costanti.recHeight;

private static final int U_INDEX = recWidth*recHeight;
private static final int V_INDEX = recWidth*recHeight*5/4;
private static final int LENGTH = recWidth*recHeight;
private static final int LENGTH_4 = recWidth*recHeight/4;

private int previewFrameWidth = 256;
private int previewFrameHeight = 256;

private int[] yTextureNames;
private int[] uTextureNames;
private int[] vTextureNames;

private MainActivity activity;

private FloatBuffer mVertices;
private ShortBuffer mIndices;

private int mProgramObject;
private int mPositionLoc;
private int mTexCoordLoc;

private int yTexture;
private int uTexture;
private int vTexture;

private final float[] mVerticesData = { -1.f, 1.f, 0.0f, // Position 0
        0.0f, 0.0f, // TexCoord 0
        -1.f, -1.f, 0.0f, // Position 1
        0.0f, 1.0f, // TexCoord 1
        1.f, -1.f, 0.0f, // Position 2
        1.0f, 1.0f, // TexCoord 2
        1.f, 1.f, 0.0f, // Position 3
        1.0f, 0.0f // TexCoord 3
};
private final short[] mIndicesData = { 0, 1, 2, 0, 2, 3 };

private ByteBuffer yBuffer;
private ByteBuffer uBuffer;
private ByteBuffer vBuffer;

private IntBuffer frameBuffer;
private IntBuffer renderBuffer;
private IntBuffer parameterBufferWidth;
private IntBuffer parameterBufferHeigth;

byte[] ydata = new byte[LENGTH];
byte[] uData = new byte[LENGTH_4];
byte[] vData = new byte[LENGTH_4];

public MyRenderer(MainActivity activity) {
    this.activity = activity;

    mVertices = ByteBuffer.allocateDirect(mVerticesData.length * 4)
            .order(ByteOrder.nativeOrder()).asFloatBuffer();
    mVertices.put(mVerticesData).position(0);

    mIndices = ByteBuffer.allocateDirect(mIndicesData.length * 2)
            .order(ByteOrder.nativeOrder()).asShortBuffer();
    mIndices.put(mIndicesData).position(0);

    yBuffer = MyGraphUtils.makeByteBuffer(LENGTH);
    uBuffer = MyGraphUtils.makeByteBuffer(LENGTH_4/* * 2*/);
    vBuffer = MyGraphUtils.makeByteBuffer(LENGTH_4);
}

@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
    GLES20.glActiveTexture(GLES20.GL_ACTIVE_TEXTURE);
    GLES20.glViewport(0, 0, width, height);
}

@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    Log.d("debug", "on surface created");
    // Define a simple shader program for our point.
    final String vShaderStr = readTextFileFromRawResource(activity, R.raw.v_simple);
    final String fShaderStr = readTextFileFromRawResource(activity, R.raw.f_convert);
    frameBuffer = IntBuffer.allocate(1);
    renderBuffer= IntBuffer.allocate(1);

    GLES20.glEnable(GLES20.GL_TEXTURE_2D);

    GLES20.glGenFramebuffers(1, frameBuffer);
    GLES20.glGenRenderbuffers(1, renderBuffer);
    GLES20.glActiveTexture(GLES20.GL_ACTIVE_TEXTURE);
    GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, frameBuffer.get(0));
    GLES20.glClear(0);
    GLES20.glBindRenderbuffer(GLES20.GL_RENDERBUFFER, renderBuffer.get(0));     

    GLES20.glRenderbufferStorage(GLES20.GL_RENDERBUFFER, GLES20.GL_DEPTH_COMPONENT16,
                                 320, 240);

    parameterBufferHeigth = IntBuffer.allocate(1);
    parameterBufferWidth = IntBuffer.allocate(1);
    GLES20.glGetRenderbufferParameteriv(GLES20.GL_RENDERBUFFER, GLES20.GL_RENDERBUFFER_WIDTH, parameterBufferWidth);
    GLES20.glGetRenderbufferParameteriv(GLES20.GL_RENDERBUFFER, GLES20.GL_RENDERBUFFER_HEIGHT, parameterBufferHeigth);
    GLES20.glFramebufferRenderbuffer(GLES20.GL_FRAMEBUFFER, GLES20.GL_COLOR_ATTACHMENT0, GLES20.GL_RENDERBUFFER, renderBuffer.get(0));
    if (GLES20.glCheckFramebufferStatus(GLES20.GL_FRAMEBUFFER)!=GLES20.GL_FRAMEBUFFER_COMPLETE){
        Log.d("debug", "gl frame buffer status != frame buffer complete");
    }
    GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, 0);
    GLES20.glClear(0);

    mProgramObject = loadProgram(vShaderStr, fShaderStr);

    // Get the attribute locations
    mPositionLoc = GLES20.glGetAttribLocation(mProgramObject, "a_position");
    mTexCoordLoc = GLES20.glGetAttribLocation(mProgramObject, "a_texCoord");

    GLES20.glEnable(GLES20.GL_TEXTURE_2D);
    yTexture = GLES20.glGetUniformLocation(mProgramObject, "y_texture");
    yTextureNames = new int[1];
    GLES20.glGenTextures(1, yTextureNames, 0);
    int yTextureName = yTextureNames[0];

    GLES20.glEnable(GLES20.GL_TEXTURE_2D);
    uTexture = GLES20.glGetUniformLocation(mProgramObject, "u_texture");
    uTextureNames = new int[1];
    GLES20.glGenTextures(1, uTextureNames, 0);
    int uTextureName = uTextureNames[0];

    GLES20.glEnable(GLES20.GL_TEXTURE_2D);
    vTexture = GLES20.glGetUniformLocation(mProgramObject, "v_texture");
    vTextureNames = new int[1];
    GLES20.glGenTextures(1, vTextureNames, 0);
    int vTextureName = vTextureNames[0];

    GLES20.glClearColor(1.0f, 0.0f, 0.0f, 0.0f);
}

@Override
public final void onDrawFrame(GL10 gl) {
    Log.d("debug", "on Draw frame");
    // Clear the color buffer
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    // Use the program object
    GLES20.glUseProgram(mProgramObject);

    // Load the vertex position
    mVertices.position(0);
    GLES20.glVertexAttribPointer(mPositionLoc, 3, GLES20.GL_FLOAT, false, 5*4, mVertices);
    // Load the texture coordinate
    mVertices.position(3);
    GLES20.glVertexAttribPointer(mTexCoordLoc, 2, GLES20.GL_FLOAT, false, 5*4, mVertices);

    GLES20.glEnableVertexAttribArray(mPositionLoc);
    GLES20.glEnableVertexAttribArray(mTexCoordLoc);

    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, yTextureNames[0]);
    GLES20.glTexImage2D(   GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE,
            320, 240, 0, GLES20.GL_LUMINANCE, GLES20.GL_UNSIGNED_BYTE, yBuffer);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);
    GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, yTextureNames[0]);
    GLES20.glUniform1i(yTexture, 0);

    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, uTextureNames[0]);
    GLES20.glTexImage2D(   GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE,
            160, 120, 0, GLES20.GL_LUMINANCE, GLES20.GL_UNSIGNED_BYTE, uBuffer);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);
    GLES20.glActiveTexture(GLES20.GL_TEXTURE1+2);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, uTextureNames[0]);
    GLES20.glUniform1i(uTexture, 2);

    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, vTextureNames[0]);
    GLES20.glTexImage2D(   GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE,
            160, 120, 0, GLES20.GL_LUMINANCE, GLES20.GL_UNSIGNED_BYTE, vBuffer);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);
    GLES20.glActiveTexture(GLES20.GL_TEXTURE1+1);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, vTextureNames[0]);
    GLES20.glUniform1i(vTexture, 1);

    GLES20.glDrawElements(GLES20.GL_TRIANGLES, 6, GLES20.GL_UNSIGNED_SHORT, mIndices);
}

public void setPreviewFrameSize(int realWidth, int realHeight) {
    previewFrameHeight = realHeight;
    previewFrameWidth = realWidth;
}

public static String readTextFileFromRawResource(final Context context, final int resourceId) {
    final InputStream inputStream = context.getResources().openRawResource(resourceId);
    final InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
    final BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

    String nextLine;
    final StringBuilder body = new StringBuilder();

    try {
        while ((nextLine = bufferedReader.readLine()) != null) {
            body.append(nextLine);
            body.append('\n');
        }
    } catch (IOException e) {
        return null;
    }

    return body.toString();
}

public static int loadShader(int type, String shaderSrc) {
    int shader;
    int[] compiled = new int[1];

    // Create the shader object
    shader = GLES20.glCreateShader(type);
    if (shader == 0) {
        return 0;
    }
    // Load the shader source
    GLES20.glShaderSource(shader, shaderSrc);
    // Compile the shader
    GLES20.glCompileShader(shader);
    // Check the compile status
    GLES20.glGetShaderiv(shader, GLES20.GL_COMPILE_STATUS, compiled, 0);

    if (compiled[0] == 0) {
        Log.e("ESShader", GLES20.glGetShaderInfoLog(shader));
        GLES20.glDeleteShader(shader);
        return 0;
    }
    return shader;
}

public static int loadProgram(String vertShaderSrc, String fragShaderSrc) {
    int vertexShader;
    int fragmentShader;
    int programObject;
    int[] linked = new int[1];

    // Load the vertex/fragment shaders
    vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertShaderSrc);
    if (vertexShader == 0) {
        return 0;
    }

    fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragShaderSrc);
    if (fragmentShader == 0) {
        GLES20.glDeleteShader(vertexShader);
        return 0;
    }

    // Create the program object
    programObject = GLES20.glCreateProgram();

    if (programObject == 0) {
        return 0;
    }

    GLES20.glAttachShader(programObject, vertexShader);
    GLES20.glAttachShader(programObject, fragmentShader);

    // Link the program
    GLES20.glLinkProgram(programObject);

    // Check the link status
    GLES20.glGetProgramiv(programObject, GLES20.GL_LINK_STATUS, linked, 0);

    if (linked[0] == 0) {
        Log.e("ESShader", "Error linking program:");
        Log.e("ESShader", GLES20.glGetProgramInfoLog(programObject));
        GLES20.glDeleteProgram(programObject);
        return 0;
    }

    // Free up no longer needed shader resources
    GLES20.glDeleteShader(vertexShader);
    GLES20.glDeleteShader(fragmentShader);

    return programObject;
}

@Override
public void onPreviewFrame(byte[] data, Camera camera) {

    System.arraycopy(data, 0, ydata, 0, LENGTH);
    yBuffer.put(ydata);
    yBuffer.position(0);

    System.arraycopy(data, U_INDEX, uData, 0, LENGTH_4);
    uBuffer.put(uData);
    uBuffer.position(0);

    System.arraycopy(data, V_INDEX, vData, 0, LENGTH_4);
    vBuffer.put(vData);
    vBuffer.position(0);
} 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T16:41:24.050

不确定您是否已经解决了这个问题。我的回答

1.  默认情况下，相机输出为 NV12，但在片段着色器 YUV 到 RGB 中，您使用的是 YV12 -> RGB。您将不得不这样做 `setPreviewFormat(ImageFormat.YV12);`，或者可能会使用其他着色器
2.  有 3 种纹理，请确保您这样做

    `GLES20.glActiveTexture(GLES20.GL_TEXTURE2);` `GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, muTextureName)`

    在调用任何 glTexImage2D 之前。和 glTexSubImage2D

3.  您还可以对每一帧使用 glTexSubImage2D 和 glTexImage2D 一次。

4.  U 和 V 的大小相同，至少对于 YV12，

    `System.arraycopy(data, U_INDEX, uData, 0, LENGTH_4 * 2);`

    应该 `System.arraycopy(data, U_INDEX, uData, 0, LENGTH_4);` 在代码中相应地更改大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-19T13:06:28.327

对于最快和最优化的方式，只需使用常见的 GL 扩展

```
//Fragment Shader
#extension GL_OES_EGL_image_external : require
uniform samplerExternalOES u_Texture; 
```

比在 Java 中

```
surfaceTexture = new SurfaceTexture(textureIDs[0]);
try {
   someCamera.setPreviewTexture(surfaceTexture);
} catch (IOException t) {
   Log.e(TAG, "Cannot set preview texture target!");
}

someCamera.startPreview();

private static final int GL_TEXTURE_EXTERNAL_OES = 0x8D65; 
```

在 Java GL 线程中

```
GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
GLES20.glBindTexture(GL_TEXTURE_EXTERNAL_OES, textureIDs[0]);
GLES20.glUniform1i(uTextureHandle, 0); 
```

颜色转换已经为您完成。你可以在片段着色器中做任何你想做的事情。

希望这可以节省您的研究时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T19:05:28.447

最后让您的项目显示相机预览。我发现了 2 个问题： 1\. 在绑定和更改表面特征之前，您必须调用 GLES20.glActiveTexture(GLES20.surfacenumber); 2\. 更重要和隐藏的问题是 GLES20.glTexImage2D() 不适用于宽度和高度，它们不是 2 的幂。加载大小为 1024X1024 的纹理后，应调用 GLES20.glTexSubImage2D()

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-19T09:55:49.283

我应用了解决方案表格[How to render Android's YUV-NV21 camera image on the background on libgdx with OpenGLES 2.0 real-time?](https://stackoverflow.com/questions/22456884/how-to-render-androids-yuv-nv21-camera-image-on-the-background-in-libgdx-with-o) 到问题中共享的项目并获得了一个工作项目。如果您像我一样寻找通过片段着色器进行 YUV 到 RGB 转换的教程代码，您可以简单地执行以下步骤来获得一个工作示例。

1.  下载项目[https://dl.dropbox.com/u/12829395/application/FilterGL/FilterGL.zip](https://dl.dropbox.com/u/12829395/application/FilterGL/FilterGL.zip)并解压缩。
2.  用下面共享的代码完全替换文件**GLRenderer.java**和**res/raw/f_convert.glsl**。
3.  在 Eclipse 中打开项目，或[将项目导入 Android Studio](https://www.google.com.hk/search?sourceid=chrome-psyapi2&rlz=1C1ASUM_enHK688HK688&ion=1&espv=2&ie=UTF-8&q=import%20to%20android%20studio&oq=imp&aqs=chrome.1.69i57j69i59j69i65j0l3.2519j0j7)。

问题中代码的主要问题是：

1.  没有**GLES20.glActiveTexture(GLES20.GL_TEXTURE1);** , yBuffer 没有传递给 GL。
2.  YUV 数据采用 YUV-NV21 格式，并且 u_texture 和 v_texture 未在着色器中正确传递和处理。有关更多信息，请参阅[此帖子](https://stackoverflow.com/questions/22456884/how-to-render-androids-yuv-nv21-camera-image-on-the-background-in-libgdx-with-o)。

现在更正的代码：请将**GLRenderer.java**替换为

```
package com.filtergl.shader;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.nio.ShortBuffer;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;
import android.opengl.GLES20;
import android.opengl.GLSurfaceView.Renderer;
import android.util.Log;

public class GLRenderer
implements Renderer, PreviewCallback {
    private static final int LENGTH = 76800;
    private static final int LENGTH_2 = 38400;

    private ActivityFilterGL activity;

    private FloatBuffer mVertices;
    private ShortBuffer mIndices;

    private int previewFrameWidth = 256;
    private int previewFrameHeight = 256;
    private int mProgramObject;
    private int mPositionLoc;
    private int mTexCoordLoc;
//  private int mSamplerLoc;
    private int yTexture;
    private int uTexture;
    private int vTexture;

    private final float[] mVerticesData = { -1.f, 1.f, 0.0f, // Position 0
            0.0f, 0.0f, // TexCoord 0
            -1.f, -1.f, 0.0f, // Position 1
            0.0f, 1.0f, // TexCoord 1
            1.f, -1.f, 0.0f, // Position 2
            1.0f, 1.0f, // TexCoord 2
            1.f, 1.f, 0.0f, // Position 3
            1.0f, 0.0f // TexCoord 3
    };

    private final short[] mIndicesData = { 0, 1, 2, 0, 2, 3 };

    private ByteBuffer frameData = null;
    private ByteBuffer yBuffer;
    private ByteBuffer uBuffer;

    public GLRenderer(ActivityFilterGL activity) {
        this.activity = activity;

        mVertices = ByteBuffer.allocateDirect(mVerticesData.length * 4)
                .order(ByteOrder.nativeOrder()).asFloatBuffer();
        mVertices.put(mVerticesData).position(0);

        mIndices = ByteBuffer.allocateDirect(mIndicesData.length * 2)
                .order(ByteOrder.nativeOrder()).asShortBuffer();
        mIndices.put(mIndicesData).position(0);

        yBuffer = GraphicsUtil.makeByteBuffer(LENGTH);
        uBuffer = GraphicsUtil.makeByteBuffer(LENGTH_2);
    }

    @Override
    public final void onDrawFrame(GL10 gl) {
        // Clear the color buffer
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

        // Use the program object
        GLES20.glUseProgram(mProgramObject);

        // Load the vertex position
        mVertices.position(0);
        GLES20.glVertexAttribPointer(mPositionLoc, 3, GLES20.GL_FLOAT, false, 5 * 4, mVertices);
        // Load the texture coordinate
        mVertices.position(3);
        GLES20.glVertexAttribPointer(mTexCoordLoc, 2, GLES20.GL_FLOAT, false, 5 * 4, mVertices);

        GLES20.glEnableVertexAttribArray(mPositionLoc);
        GLES20.glEnableVertexAttribArray(mTexCoordLoc);

        GLES20.glActiveTexture(GLES20.GL_TEXTURE1);

        GLES20.glUniform1i(yTexture, 1);
        GLES20.glTexImage2D(   GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE,
                320, 240, 0, GLES20.GL_LUMINANCE, GLES20.GL_UNSIGNED_BYTE, yBuffer);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);
        GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
        GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);

        GLES20.glActiveTexture(GLES20.GL_TEXTURE2);

        GLES20.glUniform1i(uTexture, 2);
        GLES20.glTexImage2D(   GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE_ALPHA,
                160, 120, 0, GLES20.GL_LUMINANCE_ALPHA, GLES20.GL_UNSIGNED_BYTE, uBuffer);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);
        GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
        GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE);

        GLES20.glDrawElements(GLES20.GL_TRIANGLES, 6, GLES20.GL_UNSIGNED_SHORT, mIndices);
    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        GLES20.glViewport(0, 0, width, height);
    }

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig config) {

        // Define a simple shader program for our point.
        final String vShaderStr = readTextFileFromRawResource(activity, R.raw.v_simple);
        final String fShaderStr = readTextFileFromRawResource(activity, R.raw.f_convert);

        // Load the shaders and get a linked program object
        mProgramObject = loadProgram(vShaderStr, fShaderStr);

        // Get the attribute locations
        mPositionLoc = GLES20.glGetAttribLocation(mProgramObject, "a_position");
        mTexCoordLoc = GLES20.glGetAttribLocation(mProgramObject, "a_texCoord");

        GLES20.glEnable(GLES20.GL_TEXTURE_2D);
        yTexture = GLES20.glGetUniformLocation(mProgramObject, "y_texture");
        int[] yTextureNames = new int[1];
        GLES20.glGenTextures(1, yTextureNames, 0);
        int yTextureName = yTextureNames[0];
        GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, yTextureName);

        GLES20.glEnable(GLES20.GL_TEXTURE_2D);
        uTexture = GLES20.glGetUniformLocation(mProgramObject, "u_texture");
        int[] uTextureNames = new int[1];
        GLES20.glGenTextures(1, uTextureNames, 0);
        int uTextureName = uTextureNames[0];
        GLES20.glActiveTexture(GLES20.GL_TEXTURE2);
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, uTextureName);

        // Set the background clear color to black.
        GLES20.glClearColor(1.0f, 0.0f, 0.0f, 0.0f);
    }

    public void setPreviewFrameSize(int realWidth, int realHeight) {
        previewFrameHeight = realHeight;
        previewFrameWidth = realWidth;

//      frameData = GraphicsUtil.makeByteBuffer(previewFrameHeight * previewFrameWidth * 3);
    }

    public static String readTextFileFromRawResource(final Context context, final int resourceId) {
        final InputStream inputStream = context.getResources().openRawResource(resourceId);
        final InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
        final BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

        String nextLine;
        final StringBuilder body = new StringBuilder();

        try {
            while ((nextLine = bufferedReader.readLine()) != null) {
                body.append(nextLine);
                body.append('\n');
            }
        } catch (IOException e) {
            return null;
        }

        return body.toString();
    }

    public static int loadShader(int type, String shaderSrc) {
        int shader;
        int[] compiled = new int[1];

        // Create the shader object
        shader = GLES20.glCreateShader(type);
        if (shader == 0) {
            return 0;
        }
        // Load the shader source
        GLES20.glShaderSource(shader, shaderSrc);
        // Compile the shader
        GLES20.glCompileShader(shader);
        // Check the compile status
        GLES20.glGetShaderiv(shader, GLES20.GL_COMPILE_STATUS, compiled, 0);

        if (compiled[0] == 0) {
            Log.e("ESShader", GLES20.glGetShaderInfoLog(shader));
            GLES20.glDeleteShader(shader);
            return 0;
        }
        return shader;
    }

    public static int loadProgram(String vertShaderSrc, String fragShaderSrc) {
        int vertexShader;
        int fragmentShader;
        int programObject;
        int[] linked = new int[1];

        // Load the vertex/fragment shaders
        vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertShaderSrc);
        if (vertexShader == 0) {
            return 0;
        }

        fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragShaderSrc);
        if (fragmentShader == 0) {
            GLES20.glDeleteShader(vertexShader);
            return 0;
        }

        // Create the program object
        programObject = GLES20.glCreateProgram();

        if (programObject == 0) {
            return 0;
        }

        GLES20.glAttachShader(programObject, vertexShader);
        GLES20.glAttachShader(programObject, fragmentShader);

        // Link the program
        GLES20.glLinkProgram(programObject);

        // Check the link status
        GLES20.glGetProgramiv(programObject, GLES20.GL_LINK_STATUS, linked, 0);

        if (linked[0] == 0) {
            Log.e("ESShader", "Error linking program:");
            Log.e("ESShader", GLES20.glGetProgramInfoLog(programObject));
            GLES20.glDeleteProgram(programObject);
            return 0;
        }

        // Free up no longer needed shader resources
        GLES20.glDeleteShader(vertexShader);
        GLES20.glDeleteShader(fragmentShader);

        return programObject;
    }

    @Override
    public void onPreviewFrame(byte[] data, Camera camera) {
        yBuffer.put(data, 0, LENGTH);
        yBuffer.position(0);

        uBuffer.put(data, LENGTH, LENGTH/2);
        uBuffer.position(0);
    }

} 
```

并将**f_convert.glsl**替换为

```
#ifdef GL_ES
precision highp float;
#endif

varying vec2 v_texCoord;
uniform sampler2D y_texture;
uniform sampler2D u_texture;

 void main()
{   
    float r, g, b, y, u, v;

    //We had put the Y values of each pixel to the R,G,B components by
    //GL_LUMINANCE, that's why we're pulling it from the R component,
    //we could also use G or B
    y = texture2D(y_texture, v_texCoord).r;

    //We had put the U and V values of each pixel to the A and R,G,B
    //components of the texture respectively using GL_LUMINANCE_ALPHA.
    //Since U,V bytes are interspread in the texture, this is probably
    //the fastest way to use them in the shader
    u = texture2D(u_texture, v_texCoord).a - 0.5;
    v = texture2D(u_texture, v_texCoord).r - 0.5;

    //The numbers are just YUV to RGB conversion constants
    r = y + 1.13983*v;
    g = y - 0.39465*u - 0.58060*v;
    b = y + 2.03211*u;

    gl_FragColor = vec4(r,g,b,1.0);
} 
```

# ios - Adobe air iOS 应用程序签名验证

> ID：12130794
> 
> 赞同：0
> 
> 时间：2012-08-26T14:10:57.503
> 
> 标签：ios, air, adobe, application-loader

我遇到以下问题：

我在 Adob​​e Flash CS6 中编译我的应用程序并且上传没有问题，但是如果我使用 WINRAR 解压缩应用程序，添加本地化.string 文件，再次压缩并尝试上传，我收到错误：`application failed codesigning verification`.

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:18:51.117

文件 _CodeSignature/CodeResoureces 包含所有文件的某种散列。如果您更改某些文件，它的哈希值会变得不同，并且 ipa 文件会变得无效。您想进行一些黑客攻击，出于安全原因，这是不可能的。

# android - Android：垂直线性布局中的滚动视图

> ID：12130797
> 
> 赞同：6
> 
> 时间：2012-08-26T14:11:15.920
> 
> 标签：android, android-layout, android-linearlayout

我正在为 Android 设备制作一个应用程序，我试图在 LinearLayout 中有一个 ScrollView，但是当我尝试这样做时，ScrollView 会占用 LinearLayout 中 ScrollView 之后的所有空间和元素。

例如：
如果 ScrollView 不是“满”： 如果 ScrollView 是“满”：
[![http://kakko76.free.fr/scroll2.jpg](../Images/a22e9551d63576280c6c72a3aa55cbf9.png)](https://i.stack.imgur.com/AaXRf.jpg)

[![http://kakko76.free.fr/scroll1.png](../Images/55baeec11ec46aea35b6498143af18c5.png)](https://i.stack.imgur.com/lTvr3.png)

如您所见，按钮消失了...
这是此活动的代码：

```
<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_marginLeft="50dp"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:orientation="vertical"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:background="@drawable/linearlayoutbackground" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/nom_des_joueurs"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:layout_marginBottom="30dp" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <LinearLayout
            android:id="@+id/llPlayersName"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"
             >

        </LinearLayout>

    </ScrollView>

    <Button
        android:id="@+id/okPlayersName"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="@string/ok"
        android:background="@drawable/backgroundbutton"
        android:layout_marginTop="30dp" />
</LinearLayout> 
```

在我在 ScrollView 中的 LinearLayout 中添加元素之后。
有什么解决办法吗？
谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T14:16:12.323

尝试以下操作：

```
android:layout_height="0dp"
android:layout_weight="1" 
```

这告诉您的 ScrollView 占用其他元素未占用的所有剩余空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:30:27.530

你有`android:layout_height="wrap_content"`你的身高。这意味着高度与其中的内容一样高。如果你不想让它占据整个地方，你可以给它重量（如上面的答案），或者你可以用 dp 设置你的高度。例如：

```
<LinearLayout
android:id="@+id/linearLayout1"
android:layout_width="fill_parent"
android:layout_marginLeft="50dp"
android:layout_height="wrap_content"
android:layout_centerHorizontal="true"
android:layout_centerVertical="true"
android:orientation="vertical"
android:focusable="true"
android:focusableInTouchMode="true"
android:background="@drawable/linearlayoutbackground"
android:weightSum="1.5" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight = "0.2"
    android:text="@string/nom_des_joueurs"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:layout_marginBottom="30dp" />

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight = "1">

    <LinearLayout
        android:id="@+id/llPlayersName"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
         >

    </LinearLayout>

</ScrollView>

<Button
    android:id="@+id/okPlayersName"
    android:layout_width="match_parent"
    android:layout_height="0"
    android:layout_weight = "0.3">
    android:text="@string/ok"
    android:background="@drawable/backgroundbutton"
    android:layout_marginTop="30dp" /> 
```

正如你所看到的，我给线性布局一个“总和”，他所有的孩子都被赋予了重量。清楚吗？这是你需要的吗？

# c - 尽快将二进制标志变为-1或+1

> ID：12130798
> 
> 赞同：2
> 
> 时间：2012-08-26T14:11:17.833
> 
> 标签：c, optimization

在进行一些操作和删除分支时，不时会弹出以下问题：

假设我有一个整数二进制标志`f`，可以是`0`或`1`。我怎样才能将其分别`-1`和`1`（或相反的方式，由您自行决定 - 通常任何一个都可用）。一种常见的方式是这样的：

```
int i = 2*f - 1; 
```

但这使用了加法和乘法。它可以做得更快吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T14:48:48.477

Your original is actually pretty good - a reasonable optimiser will turn it into:

```
int i = f + f - 1; 
```

and for example on x86 this can be compiled down to a single instruction.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T14:31:01.977

好吧，对于初学者来说，你可以做

```
int i = (f << 1) - 1; 
```

另外，你可以试试

```
int i = f - (!f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T14:18:01.263

也许我错过了一些东西，但是有什么问题`if (i == 0) i = -1;`？

[编辑：没关系，我错过了一些东西。您希望结果为单独的有符号整数。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T16:05:13.737

`x`要基于 flag有条件地否定`f`，您可以这样做：

```
int mask = f - 1;  // negate if f == 0, don't negate if f == 1
x = (x ^ mask) - mask; 
```

或这个：

```
int mask = -f;  // negate if f == 1, don't negate if f == 0
x = (x ^ mask) - mask; 
```

要有条件地加或减一个数字，只需有条件地否定它，然后总是使用加法。

# java - 为什么这里没有被零除触发异常？

> ID：12130800
> 
> 赞同：15
> 
> 时间：2012-08-26T14:11:43.283
> 
> 标签：java, exception

（这是对*[Why is this exception is not printing？为什么显示错误](https://stackoverflow.com/questions/12130659/why-is-this-exception-is-not-printed-why-is-it-showing-an-error)**的后续问题*？ ）

在下面的代码中，为什么没有触发 ArithmeticException？

```
class Exp
{
    public static void main(String args[])
    {
        float d,a=1;
        try
        {
            d=0;
            a=44/d; //no exception triggered here.. why?
            System.out.print("It's not gonna print: a="+a); 
        }
        catch(ArithmeticException e)
        {
            System.out.println("Print exception: "+e);
        }
    }
} 
```

相反，输出是：

```
It's not gonna print: a=Infinity 
```

怎么了？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-26T14:13:13.573

除以零会引发整数值异常，但不会引发浮点值异常。这是在[JLS #15.17.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.2)中定义的：

> 浮点除法的结果由 IEEE 754 算术规则确定：
> [...]
> 
> *   非零有限值除以零导致有符号无穷大。符号由上述规则确定。

如果将`a`和的类型更改`d`为`int`，则会出现异常。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T14:14:45.990

因为`Divide by zero`适用于**整数而不是**根据[JLS浮动](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.2)

你会得到输出

```
Its not gonna printed a=Infinity 
```

因为这是计算为`Infinity`

如果您想**查看异常**，只需更改

```
a=44/d; 
```

对此

```
a=44/0; 
```

# google-places-api - 如何限制从 Google Places API 返回的数据？

> ID：12130803
> 
> 赞同：0
> 
> 时间：2012-08-26T14:12:16.260
> 
> 标签：google-places-api

我正在创建一个 iPhone 应用程序，所以我自然希望上传/下载的数据量尽可能少。

我对 Google Places API 相当陌生，但是在进行查询时，如果查询最多有 20 个结果，则似乎必须下载所有这些结果（一次最多 20 个）并且在每个结果中，谷歌认为必要的所有信息也必须下载。

是否可以限制返回结果的最大数量以及返回的信息。

例如，我希望我的应用程序查询前 10 个结果，而我只需要名称和几何图形（即纬度/经度）。

我似乎没有任何关于如何做到这一点的信息，所以我认为没有办法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:19:54.523

您真的无法更改 Google Place API 的格式。您只需要使用您需要的字段。

# c# - 如何在c dll中使用assert

> ID：12130804
> 
> 赞同：2
> 
> 时间：2012-08-26T14:12:19.217
> 
> 标签：c#, c, dll, assert

我正在使用一个遗留的 C Dll（我有源代码），它有许多分散在程序中的断言。C# windows 应用程序正在使用该 dll。

问题是当 DLL 中出现错误时，“断言失败”永远不会出现。Dll 是一个控制台应用程序（不确定这是否相关）。有几十个断言，AFAIK 没有简单的方法可以在不添加大量额外代码的情况下将错误消息（或标志）返回到 C# 应用程序。

有没有办法强制断言的输出到屏幕上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T14:30:54.177

检查`assert()`C 库中宏的定义。它通常具有“可插拔”输出机制。最坏的情况是你必须`assert()`自己重写。

这里的根本问题是控制台程序有**2 个**输出流：正常和错误。该类`System.Diagnostics.Process`具有`StandardError`可用于拦截写入`stderror`流的消息的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:21:15.423

请注意，定义 NDEBUG 会关闭断言机制。该标识符在 release-builds (/D-option) 中默认定义。检查断言是否在您的 dll 的调试版本中有效，如果是，请编辑您的发布项目设置以删除 /D 选项或任何 NDEBUG 定义。

# jquery - Fork jQuery to fork one of its built-in components as a plugin?

> ID：12130817
> 
> 赞同：2
> 
> 时间：2012-08-26T14:14:41.903
> 
> 标签：jquery, jquery-plugins, github, fork

I want to make my own enhanced spin-off of one of the jQuery "helper" functions as a plugin (`deferred.js`/`$.when()` as it happens.)

Well actually I've already made it, but completely detached from any source code repository.

What I want to ask is since jQuery uses GitHub, and GitHub seems to promote forking projects, what is the best way to go about making my plugin in a way that I can eventually share with others or offer back to jQuery etc?

**Should I fork the entire jQuery project and convert the one source file into a new plugin project?**

I really don't know anything much about the Git/GitHub ways of doing things but it seems I can't just fork the one source file but need to fork the entire jQuery. If I'm making a plugin I won't be needing all the rest anyway.

Or should I just copy and paste the one source file without leaving a "paper trail" between my derived project and the original project?

(If this question belongs on programmers.SE instead I'm perfectly fine with migrating it. If the question is totally wrong for SO let me know if there's any way I can fix it since I think this is a topic that would be useful for others.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:45:18.370

It sounds like this would be better suited as a standalone jQuery plugin, mostly because you can maintain your code separately from the main jQuery library. I would make it just another script to include after a user includes jQuery.js and set up my own github repo for it.

You're right, you can't just fork one file because forking is for branches, conceptually speaking.

Hope this helps

# jquery - jQuery 切换一个具有相同类的 div

> ID：12130819
> 
> 赞同：0
> 
> 时间：2012-08-26T14:14:50.240
> 
> 标签：jquery, class, html, toggle

这是我的悬停事件的[小提琴](http://jsfiddle.net/NhPg6/)。

目前在悬停时，同一类的所有 div 都会被切换。我只想切换一个 div（悬停在上面的那个）。我尝试了一些过滤器，但似乎无法解决。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T14:17:46.350

`.foo2`您需要在同一链接中搜索 a `.container`：

```
$(".container a").hover(function()
{
    $('.foo2', $(this).parent()).toggle();
});​ 
```

# directshow - 如何为我的 DirectShow 源过滤器的 OutPin 自动选择我想要的解码器过滤器

> ID：12130821
> 
> 赞同：0
> 
> 时间：2012-08-26T14:15:04.777
> 
> 标签：directshow

我写了一个 DirectShow 源过滤器，源过滤器的输出连接到**ffdshow Video Decoder Filter**。

*它在GraphEdit*中运行良好，因为我手动连接它们。

现在我正试图让它在*Windows Media Player*中工作。问题在于解码器过滤器。

如何在我的源过滤器中将解码器过滤器限制为“ **ffdshow Video Decoder** ”？从**检查媒体类型**？我希望“ **ffdshow Video Decoder** ”是唯一可以连接到OutPin的过滤器，它也可以在WMP中自动连接。如果未安装此解码器过滤器，则该图将不起作用。

感谢您的帮助，我会在 12 小时后回来检查答案：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:29:25.593

在您的输出引脚类覆盖`IPin::Connect`方法中。在那里，您将拥有`IPin`正在连接的引脚的接口。您希望这只是 ffdshow 视频解码器的输入引脚，因此您可以在`IPin::QueryPinInfo`那里获取引脚的过滤器。在那里，您可以`IBaseFilter::GetClassID`将获得`CLSID`的内容与您知道和期望的内容进行比较。您在不匹配时返回失败。

这是仅连接到您想要的过滤器的方法。另一件事是应用程序甚至可能不会尝试您需要的过滤器，在这种情况下，您可能希望实施[`IStreamBuilder`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd377140%28v=vs.85%29.aspx)可能建议过滤器连接到输出引脚。

# .net - 无法在 app.xaml 中找到 MergedDictionaries

> ID：12130823
> 
> 赞同：2
> 
> 时间：2012-08-26T14:15:36.383
> 
> 标签：.net, wpf, xaml, resourcedictionary, mergeddictionaries

我创建了一个 WPF 应用程序（名为“Ferhad.Wpf”）。然后我在解决方案中添加了两个名为“Ferhad.Wpf.Core”和“Ferhad.Wpf.SystemStyles”的类库。

“Ferhad.Wpf.Core”中只有“Resources.xaml”。

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <SolidColorBrush x:Key="Foreground" Color="#FFFFFF" />
    <SolidColorBrush x:Key="BackgroundNormal" Color="#3F3F46" />
    <SolidColorBrush x:Key="BorderBrushNormal" Color="#54545C" />
    <SolidColorBrush x:Key="BorderBrushHighlighted" Color="#6A6A75" />
</ResourceDictionary> 
```

但是“Ferhad.Wpf.SystemStyles”中也有“ButtonStyles.xaml”和“Styles.xaml”。这是“ButtonStyles.xaml”：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/Ferhad.Wpf.Core;component/Resources.xaml" />
    </ResourceDictionary.MergedDictionaries>
    <Style x:Key="StandartButton" TargetType="Button">
        <Setter Property="Visibility" Value="Visible" />
        <Setter Property="Foreground" Value="{StaticResource Foreground}" />
        <Setter Property="Background" Value="{StaticResource BackgroundNormal}" />
        <Setter Property="BorderBrush" Value="{StaticResource BorderBrushNormal}" />
    </Style>
</ResourceDictionary> 
```

和“Styles.xaml”：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="ButtonStyles.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style TargetType="Button" BasedOn="{StaticResource StandartButton}" />
</ResourceDictionary> 
```

这里是 app.xaml：

```
<Application x:Class="Ferhad.Wpf.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/Ferhad.Wpf.SystemStyles;component/Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

在 MainWindow.xaml 的设计时一切似乎都很好，但是在运行应用程序时会引发异常：`Set property 'System.Windows.ResourceDictionary.Source' threw an exception.`

我已经用谷歌搜索了它，但没有任何帮助。我曾尝试更改文件的 BuildAction，但这也无济于事。

**更新：**

例外是行号“8”和行位置“18”。

内部的例外是：`{"Could not load file or assembly 'Ferhad.Wpf.SystemStyles, Culture=neutral' or one of its dependencies. The system cannot find the file specified.":"Ferhad.Wpf.SystemStyles, Culture=neutral"}`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T15:16:43.610

您可能忘记添加来自`App`to的引用`Core`，因此如果构建过程只复制它没有它的程序集，则`SystemStyles`需要。`Core``SystemStyles``Core`

```
App
-> SystemStyles
-> Core

SystemStyles
-> Core //Not strictly necessary because the build process does not copy the 
        //reference to the App project anyway and the resources
        //are not resolved at compile-time

Core
- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:26:20.890

尝试改变这个

```
 <ResourceDictionary Source="ButtonStyles.xaml" /> 
```

至

```
 <ResourceDictionary Source="pack://application:,,,/Ferhad.Wpf.SystemStyles;component/ButtonStyles.xaml" /> 
```

# ios - 应用程序加载器 - 从文件创建新包（不同语言）

> ID：12130831
> 
> 赞同：2
> 
> 时间：2012-08-26T14:16:14.890
> 
> 标签：ios, application-loader

应用程序加载器支持通过导入模板创建 inApp-Purchase 项目。我想创建一堆具有本地化显示名称/描述的产品。“使用应用程序加载器”文档说

> 显示名称@@language@@ 用户可见的显示名称（2 到75 个字符），其中@@language@@ 是受支持的本地化语言。您可以为每个本地化语言显示名称添加一个新列。

我尝试使用 fr、de、zh-Hans 来添加其他列的语言，但应用程序加载器始终显示为英语的显示名称。有没有人让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T06:47:32.477

仅使用不带@@ 或 () 的完整语言，即“显示名称语言”，例如“显示名称法语”和“描述法语”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:36:03.493

您使用以下方法添加的语言可以根据使用[此](http://support.apple.com/kb/HT2371)设置的 iPad 语言对用户可见。如果不使用 Application Loader，您将无法编辑 .itmsp。参考[这个](http://www.openfilehelp.com/article/How-to-open-.ITMSP-file.html)

![屏幕1](../Images/9b82ede16a25955d07e169fc7aceb628.png)

![屏幕2](../Images/1e57f2d8b933ddd56ea5f439fc05896e.png)

![屏幕3](../Images/59bc0f0eaf01633f0bee0343691d171d.png)

![屏幕4](../Images/b8f53cfdac1d85959d3dde099dc1b2a7.png)

![屏幕5](../Images/f2d3c5650bcf29b19bc2b5559580cc53.png)

![屏幕6](../Images/0c7dad51feac2b9754a4c63c19a3e6a4.png)

![屏幕7](../Images/037a348222b1b03099f7221a8f0c3f34.png)

# java - 将 jpanel 从方法添加到 jframe

> ID：12130834
> 
> 赞同：0
> 
> 时间：2012-08-26T14:17:29.077
> 
> 标签：java, swing, jframe, return, jpanel

在我的项目中，我有一些课程。一个创建 gui 的类，JFrame 除外。我将在我的 Main 类中创建 JFrame，例如：

```
import javax.swing.*;
import java.awt.*;

public class KodeHusker {

public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable(){
        @Override
        public void run(){
            JFrame f = new JFrame();
            f.setLayout(new FlowLayout());
            f.add(new JLabel("test"));
            f.add(new GUI().viewProgram());//it works fine, when i remove this
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.pack();
            f.setLocationRelativeTo(null);
            f.setVisible(true);
        }
    });
}
} 
```

gui 类是我创建所有 gui 的地方，viewProgram 方法声明为：

```
public JPanel viewProgram(){} 
```

它返回一个JPanel。

正如代码中的注释所说，当我删除该行时，它一切正常，但是当我拥有它时，JFrame 永远不会显示，尽管没有任何异常。关闭程序的快捷方式也不起作用。

有人知道我做错了什么吗？谢谢指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:27:04.060

这是 jPanel 应该是什么样子，不确定（可以看到你的代码吗？）

```
import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JPanel;

public class JPanelExt extends JPanel  implements Runnable {
private int xCoor = 50;
private boolean moving = false;

 public JPanelExt() {       
      //Thread 
          thread = new Thread (this);       //
          thread.start();   }   

  public void paintComponent (Graphics g)
     {  
            super.paintComponent(g);
    g.drawString("DVC 10.0",xCoor,30);  
            g.drawRect(50, 50, 200,100);    
            g.drawOval(50,50,200,100);  
}   
    @Override
public void run() {
while (true)
        {   
    if (moving==true)
                   {    
          this.xCoor = this.xCoor+10;
        if (xCoor > this.getWidth())
                             {  
            xCoor = 0;      
                       }
            this.repaint(); 
               }        
        try {
            Thread.sleep(50);
        }
                catch (InterruptedException e) {    
        e.printStackTrace();            
                    }   
   }    
   public void setMoving(boolean moving) 
       {    
            this.moving = moving;   
        }
} 
```

# python - Google App Engine 中的 cgi.test()

> ID：12130838
> 
> 赞同：1
> 
> 时间：2012-08-26T14:18:03.370
> 
> 标签：python, google-app-engine, post, cgi

我目前正在学习使用[Google App Engine](http://www.appspot.com)，我将[这个示例](https://developers.google.com/appengine/docs/python/gettingstartedpython27/handlingforms)修改为如下所示：

```
import cgi
import webapp2

from google.appengine.api import users

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write("""
          <html>
            <body>
              <form action="/sign" method="post">
                <div><textarea name="content" rows="3" cols="60"></textarea></div>
                <div><input type="submit" value="Sign Guestbook"></div>
              </form>
            </body>
          </html>""")

class Guestbook(webapp2.RequestHandler):
    def post(self):
        cgi.test()

app = webapp2.WSGIApplication([('/', MainPage),
                              ('/sign', Guestbook)],
                              debug=True) 
```

因为我想看看有什么作用`cgi.test()`。它产生的输出与[Python 文档](http://docs.python.org/release/2.7.2/library/cgi.html#cgi.test)中的描述相匹配，但它错误地表示没有 POST 数据。此外，它还通知以下错误：

```
 File "C:\Python27\lib\cgi.py", line 918, in test
    print_environ(environ)
  File "C:\Python27\lib\cgi.py", line 944, in print_environ
    print "<DT>", escape(key), "<DD>", escape(environ[key])
  File "C:\Python27\lib\cgi.py", line 1035, in escape
    s = s.replace("&", "&amp;") # Must be done first!
AttributeError: 'LogsBuffer' object has no attribute 'replace' 
```

这是在本地主机开发环境中。为什么我得到不正确的结果？该示例指出，并非所有 Python 函数都被允许，尽管我怀疑这会是这种情况`cgi.test()`，对吗？

编辑：我是否必须以`app.yaml`某种方式进行更改以允许特殊处理`http://localhost:8080/sign`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:49:53.870

问题是 wsgi.errors(和 wsgi.input) 的值是实际的实例：例如它是这样的：

```
'wsgi.errors': <google.appengine.api.logservice.logservice.LogsBuffer object at 0x105219150> 
```

而不是它的字符串表示形式，并且只能在字符串上调用转义方法。

**（肮脏的黑客）** 找到文件`google/appengine/runtime/request_environment.py`（我不提供完整路径，因为我不知道您的安装位置），然后在第 111-112 行：

代替：

```
def __getitem__(self, key):
    return self._request.environ[key] 
```

和：

```
def __getitem__(self, key):
    if key in ['wsgi.errors', 'wsgi.input']:
        return str(self._request.environ[key])
    return self._request.environ[key] 
```

# jquery - 停止横幅和个人资料图片在 MouseOver 上获得更改

> ID：12130839
> 
> 赞同：-1
> 
> 时间：2012-08-26T14:18:07.970
> 
> 标签：jquery, asp.net-mvc

我有一个 MVC 项目，它在 _Layout.cshtml 中有一个横幅

```
<img src="../../SitePics/NewBanner.jpg") class="BannerSize" /> 
```

和一个 Img 标记，用于根据当前的 logges 用户获取 Profile Pic

```
<img src="../../@Model.TripPic" class="TripImage" align="left" /> 
```

我已经和杰森一起实施了评级

```
<script language="javascript" type="text/javascript" src="../../Scripts/jquery-1.4a2.js"></script>
<script language="javascript" type="text/javascript">

          $(function () {
        $("img").mouseover(function () {
            giveRating($(this), "FilledStar.png");
            $(this).css("cursor", "pointer");
        });

        $("img").mouseout(function () {
            giveRating($(this), "EmptyStar.png");
        });

        $("img").click(function () {
            $("img").unbind("mouseout mouseover click");

            // call ajax methods to update database
            var url = "/Rating/PostRating?rating=" + parseInt($(this).attr("id"));
            $.post(url, null, function (data) {
                $("#result").text(data);
            });
        });
    });

    function giveRating(img, image) {
        img.attr("src", "/Content/Images/" + image)
           .prevAll("img").attr("src", "/Content/Images/" + image);
    }
</script>        

 <p>
    <img src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="1" />
    <img src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="2" />
    <img src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="3" />
    <img src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="4" />
    <img src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="5" />
</p>
<div id="result"></div> 
```

我的问题是，当我运行程序时，我的横幅和个人资料图片在超出/超出鼠标指针时也会变为空或填充开始..

请帮助我阻止横幅和个人资料图片在 MouseOver 上发生变化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:44:42.903

太棒了......非常感谢Yasser......代码需要一些修复，但感谢你现在它的工作。贝娄我给出了工作代码..它几乎与你为我纠正的代码相同，但在必要的地方有大写字母。

```
<script>

$(function () {
    $("img.Rating").mouseover(function () {
        giveRating($(this), "FilledStar.png");
        $(this).css("cursor", "pointer");
    });

    $("img.Rating").mouseout(function () {
        giveRating($(this), "EmptyStar.png");
    });

    $("img.Rating").click(function () {
        $("img.Rating").unbind("mouseout mouseover click");

        // call ajax methods to update database
        var url = "/Rating/PostRating?rating=" + parseInt($(this).attr("id"));
        $.post(url, null, function (data) {
            $("#result").text(data);
        });
    });
});

function giveRating(img, image) {
    img.attr("src", "/Content/Images/" + image)
       .prevAll("img.Rating").attr("src", "/Content/Images/" + image);
}

</script>        

 <p>
    <img class="Rating" src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="1" />
    <img class="Rating" src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="2" />
    <img class="Rating" src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="3" />
    <img class="Rating" src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="4" />
    <img class="Rating" src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="5" />
</p>
<div id="result"></div> 
```

雅虎..非常感谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:16:47.367

**简短的回答：**

为图像添加一个类进行评级，说一个类“评级”，然后将 $("img") 替换为 `$("img.rating")`

**长答案：**

好的，您正在使用的 jquery 选择器就是这个`$("img")`，它表示`images`从页面中选择全部。因此问题。

现在你应该怎么做，

由于您只想让 jquery 为 5 个评级图像运行，您可以让所有图像都有一个公共类，如下所示。

```
<img class="Rating" src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="1" />
<img class="Rating" src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="2" />
<img class="Rating" src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="3" />
<img class="Rating" src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="4" />
<img class="Rating" src="../../Content/Images/EmptyStar.png" alt="Star Rating" align="middle" id="5" /> 
```

现在你可以像这样使用你的代码......

```
<script language="javascript" type="text/javascript">

          $(function () {
        $("img.rating").mouseover(function () {
            giveRating($(this), "FilledStar.png");
            $(this).css("cursor", "pointer");
        });

        $("img.rating").mouseout(function () {
            giveRating($(this), "EmptyStar.png");
        });

        $("img.rating").click(function () {
            $("img.rating").unbind("mouseout mouseover click");

            // call ajax methods to update database
            var url = "/Rating/PostRating?rating=" + parseInt($(this).attr("id"));
            $.post(url, null, function (data) {
                $("#result").text(data);
            });
        });
    });

    function giveRating(img, image) {
        img.attr("src", "/Content/Images/" + image)
           .prevAll("img").attr("src", "/Content/Images/" + image);
    }
</script> 
```

# php - 如何在 Wordpress 中使用 If、If Else 和 else

> ID：12130840
> 
> 赞同：7
> 
> 时间：2012-08-26T14:18:10.910
> 
> 标签：php, wordpress, if-statement

我想在 wordpress 主页上使用 If、If else 和 else，我使用以下条件

```
<?php if ( has_post_thumbnail() ) {
the_post_thumbnail();
}?>
<?php if else { 
<img src="<?php echo catch_that_image() ?>" width="64" height="64" alt="<?php the_title(); ?>" />
} else {
<img src="http://www.technoarea.in/wp-content/themes/TA/images/TA_Logo.png" width="64" height="64" alt="<?php the_title(); ?>" />}
?>
<?php  ?> 
```

我想首先在主页上显示缩略图，如果缩略图不可用，则必须使用帖子中的第一张图片作为缩略图，如果帖子中没有图片，则使用此图片

```
http://www.technoarea.in/wp-content/themes/TA/images/TA_Logo.png 
```

你能告诉我我错在哪里，因为上面的代码不起作用

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-07-12T21:21:00.660

另一种选择是：

```
<?php if ($condition) : ?>
   <p> Some html code </p> <!-- or -->
   <?php echo "some php code"; ?>
<?php else : ?>
    <p> Some html code </p> <!-- or -->
   <?php echo "some php code"; ?>
<?php endif;  ?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-26T14:33:50.503

php的语法如下：

```
<?php
if(statement that must be true)
{
    (code to be executed when the "if" statement is true);
}
else
{
    (code to be executed when the "if" statement is not true);
}
?> 
```

您只需要打开和关闭 php 标签 (<?php ... ?>) 一次；一个在您的 php 代码之前，另一个在您的 php 代码之后。您还需要使用“echo”或“print”语句。这些告诉您的程序输出将由您的浏览器读取的 html 代码。echo 的语法如下：

```
echo "<img src='some image' alt='alt' />"; 
```

它将输出以下html：

```
<img src='some image' alt='alt' /> 
```

你应该得到一本关于 php 的书。www.php.net 也是一个很好的资源。以下是有关 if、echo 和 print 语句的手册页的链接：
[http://us.php.net/manual/en/control-structures.if.php](http://us.php.net/manual/en/control-structures.if.php)
[http://us.php.net/manual/en /function.echo.php](http://us.php.net/manual/en/function.echo.php)
[http://us.php.net/manual/en/function.print.php](http://us.php.net/manual/en/function.print.php)

编辑：您还可以使用“elseif”给出下一段代码必须满足的新条件。例如：

```
&lt;?php
if(condition 1)
{
    (code to be executed if condition 1 is true);
}
elseif(condition 2)
{
    (code to be executed if condition 1 is false and condition 2 is true);
}
else
{
    (code to be executed if neither condition is true);
}
?&gt; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T14:21:07.217

请参阅[ElseIf/Else If](http://www.php.net/manual/en/control-structures.elseif.php)。

但是看起来a）您在错误地混合PHP和HTML时遇到了麻烦，并且b）您不确定测试帖子图像是否存在的逻辑（对此无能为力，抱歉）。尝试这个：

```
<?php 
if ( has_post_thumbnail() ) :
    the_post_thumbnail();
elseif ( /*Some logic here to test if your image exists*/ ): ?>
    <img src="<?php echo catch_that_image() ?>" width="64" height="64" alt="<?php the_title(); ?>" />
<?php else: ?>
    <img src="http://www.technoarea.in/wp-content/themes/TA/images/TA_Logo.png" width="64" height="64" alt="<?php the_title(); ?>" /> 
```

# php - Facebook - 如何从 ID 获取电子邮件？

> ID：12130843
> 
> 赞同：2
> 
> 时间：2012-08-26T14:18:28.130
> 
> 标签：php, facebook

> **可能重复：**
> [Facebook Graph API，如何获取用户电子邮件？](https://stackoverflow.com/questions/3611682/facebook-graph-api-how-to-get-users-email)

我正在使用 Facebook API 并尝试从中获取可用信息。

```
$facebook = new Facebook(array('appId'  => 'id', 'secret' => 'key'));  
print_r($facebook->api('/my_username_or_id')); 
```

打印出来：

```
Array ( [id] => my_id [name] => whole_name [first_name] => first_name [last_name] => last_name [link] => url_to_profile [username] => username [gender] => gener [locale] => es_LA ) 
```

但不是电子邮件。当我访问[Facebook 开发者测试站点](http://developers.facebook.com/tools/explorer/?method=GET&path=me)并设置我的用户名或 ID 时，我得到如下信息：

```
{
  "id": "id", 
  "name": "name", 
  "first_name": "first_name", 
  "last_name": "last_name", 
  "link": "link", 
  "username": "username", 
  "gender": "male", 
  "timezone": 2, 
  "locale": "en_US", 
  "verified": true, 
  "updated_time": "2012-07-16T13:00:04+0000"
} 
```

与第一种情况非常相似的信息。

但又一次 - 我无法获得电子邮件地址。我也试过

```
print_r($facebook->api('/my_username_or_id?fields=email')); 
```

在 FB 开发者网站上也是如此，但再次没有成功......

有没有办法从 ID/用户名获取电子邮件地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T14:23:07.273

要获取用户的电子邮件地址，您需要拥有用户访问令牌，或者在`email`授予权限的应用程序中对他们进行身份验证。

这只会为您提供该用户的电子邮件。您无法通过这种方式获取用户朋友的电子邮件地址。

这可以防止垃圾邮件发送者从 Facebook 收集电子邮件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T14:23:13.013

通过使用 facebook api，您只能在结果集中获取您自己的电子邮件 ID。我认为由于安全原因，facebook 不提供其他用户的电子邮件 ID。

# c - 初始化元素不是常量 - 如何解决错误？

> ID：12130846
> 
> 赞同：0
> 
> 时间：2012-08-26T14:18:44.880
> 
> 标签：c, linux-kernel

按照这个[链接](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/samples/kobject/kobject-example.c)

我做了：

```
static const struct attribute const *attrs1= {
        &foo_attribute.attr,
        NULL,
};
 static const struct attribute_group const attr_group = {
       .attrs = attrs1,
}; 
```

但得到这些错误：

```
error: initializer element is not constant
error: (near initialization for 'attr_group.attrs') 
```

找到[了这个](https://stackoverflow.com/questions/3025050/error-initializer-element-is-not-constant-when-trying-to-initialize-variable-w)解决方案，但不明白如何解决它......

**编辑：** 该行触发了错误：

```
.attrs = attrs1, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:26:18.210

是的，另一个`struct`对象或另一个变量的内容永远不会被视为可以在`static`对象的初始化程序中使用的常量表达式。

但是您的第一次初始化也是虚假的。可能你的意思是

```
static const struct attribute * const attrs1= &foo_attribute.attr; 
```

因此，您对第二个的初始化将类似于

```
static const struct attribute_group attr_group = {
       .attrs = &foo_attribute.attr,
}; 
```

# php - MySQLi：$mysqli->query 不会插入，不返回错误

> ID：12130855
> 
> 赞同：3
> 
> 时间：2012-08-26T14:19:55.267
> 
> 标签：php, mysql, mysqli

我正在尝试通过 MySQLi 将简单数据插入到我的 MySQL 表中，但是它拒绝插入，并且没有报告错误消息。

**我想强调的是，当直接输入 PhpMyAdmin 时，此查询功能正常（当然，替换了变量）**

```
<?php
session_start();
require_once('recaptchalib.php');
require_once('./inc/crypt.php');
require_once('./inc/mysql.php');

$privatekey = "-------------------------------- ";

$u = $mysqli->real_escape_string($_POST['username']);
$p = crypto($_POST['password']);
$e = $mysqli->real_escape_string($_POST['email']);

$resp = recaptcha_check_answer ($privatekey,
    $_SERVER["REMOTE_ADDR"],
    $_POST["recaptcha_challenge_field"],
    $_POST["recaptcha_response_field"]);

  if (!$resp->is_valid) {
      $_SESSION['loginError'] = "The captcha was entered incorrectly!";
      header("LOCATION: ./index.php?pg=1");
      die();
  }

$amt = 0;

if($data = $mysqli->prepare("SELECT * FROM users WHERE username=? OR email=?")){
    $data->bind_param("ss", $u, $e);
    $data->execute();
    $data->store_result();
    $amt = $data->num_rows();
    $data->close();
}
if($amt != 0){
    $_SESSION['loginError'] = "A user has already registered with either that email or username.";
    header("LOCATION: ./index.php?pg=1");
    die();
}

if(strlen($u) < 5){
    $_SESSION['loginError'] = "A username must be greater than 5 characters long.";
    header("LOCATION: ./index.php?pg=1");
    die();
}

if(strlen($e) <= 5){
    $_SESSION['loginError'] = "An email must be greater than 5 characters long.";
    header("LOCATION: ./index.php?pg=1");
    die();
}

if(!strstr($e, "@")){
    $_SESSION['loginError'] = "A valid email must be entered.";
    header("LOCATION: ./index.php?pg=1");
    die();
}

if(!ctype_alnum($u)){
    $_SESSION['loginError'] = "Your username contains an invalid character.";
    header("LOCATION: ./index.php?pg=1");
    die();
}
$ip = $_SERVER['REMOTE_ADDR']."r";

$mysqli->query("INSERT INTO users (`username`, `password`, `email`, `perms`, `ip`) VALUES ('".$u."', '".$p."', '".$e."', '0', '".$ip."')");

header("LOCATION: ./index.php?win=1");

?> 
```

我还应该注意，同时使用 $mysqli->query 和准备好的语句都不起作用。

这是 MySQLi 部分下的我的 phpinfo() ：

```
Client API library version  5.0.95
Client API header version   5.0.91
MYSQLI_SOCKET   /var/lib/mysql/mysql.sock

Directive   Local Value Master Value
mysqli.default_host no value    no value
mysqli.default_port 3306    3306
mysqli.default_pw   no value    no value
mysqli.default_socket   no value    no value
mysqli.default_user no value    no value
mysqli.max_links    Unlimited   Unlimited
mysqli.reconnect    Off Off 
```

**最后一件事：我在另一个有效的文件中使用了一个非常相似的插入语句。**

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:42:00.510

不要使用单引号，而是使用 ` 喜欢这样：

```
$mysqli->query("INSERT INTO `users` (`username`, `password`, `email`, `perms`, `ip`) VALUES ('".$u."', '".$p."', '".$e."', '0', '".$ip."')"); 
```

它不应该在字段名称周围有单引号。我在 phpMyAdmin 中进行了测试，如您的示例所示，它失败了，但在我上面的示例中它有效。

# objective-c - 更改 UITableViewCell 中 UITableViewCellDeleteConfirmationControl(Delete Button) 的颜色

> ID：12130856
> 
> 赞同：4
> 
> 时间：2012-08-26T14:19:57.380
> 
> 标签：objective-c, ios, uitableview, customization

目前我正在尝试自定义 UITableViewCell 中的 delte 按钮。现在我有类似的东西：

![在此处输入图像描述](../Images/a3adb48277fc1bdfcdd711a786299176.png)

现在，我只需要改变这个按钮的颜色，我不想改变行为，或者让它完全自定义。我确信这是可能的，无需创建自己的控件来删除 UITableView 中的行。

这是我的代码：

```
- (void)layoutSubviews
{
    [super layoutSubviews];

    for (UIView *subview in self.subviews) {
        if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl"]) {
            UIView *deleteButtonView = (UIView *)[subview.subviews objectAtIndex:0];
            deleteButtonView.backgroundColor = [UIColor greenColor];
        }
    }
} 
```

**我怎么能这样做？**

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T15:11:01.460

UITableViewCellDeleteConfirmationControl 不是一个公共类，你不能轻易改变它的外观。

为此，我相信您必须遍历单元格的子视图并更改其属性：

```
for (UIView *subview in self.subviews) {
    if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl") {
        // Set the background using an image.
    }
} 
```

当然，你应该警惕做这种事情，因为它相当脆弱。我建议您自己滚动。

我建议向 Apple[提交错误报告](http://bugreport.apple.com)，以请求能够更轻松地对其进行编辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-28T08:42:20.757

在 UITableViewCell 子类中：

```
- (UIView*)recursivelyFindConfirmationButtonInView:(UIView*)view
{
    for(UIView *subview in view.subviews) {
        if([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationButton"]) return subview;
        UIView *recursiveResult = [self recursivelyFindConfirmationButtonInView:subview];
        if(recursiveResult) return recursiveResult;
    }
    return nil;
}

-(void)overrideConfirmationButtonColor
{
    dispatch_async(dispatch_get_main_queue(), ^{
        UIView *confirmationButton = [self recursivelyFindConfirmationButtonInView:self];
        if(confirmationButton) confirmationButton.backgroundColor = [UIColor orangeColor];
    });
} 
```

然后在 UITableViewDelegate 中：

```
-(void)tableView:(UITableView *)tableView willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath
{
    <#Your cell class#> *cell = (<#Your cell class#>*)[self.tableView cellForRowAtIndexPath:indexPath];
    [cell overrideConfirmationButtonColor];
} 
```

这适用于 iOS 7.1.2

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-14T04:36:53.383

方法如下：

**在滑动时激活删除按钮**

// 确保在 uitableviewcontroller 中有以下方法

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"You hit the delete button.");
} 
```

**设置自定义文本标签而不是删除。**

```
-(NSString *)tableView:(UITableView *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return @"Your Label";
} 
```

**为按钮第 1 部分设置自定义颜色 - 警告，这在技术上涉及戳私有苹果 API。但是，您不会被阻止使用作为 UIKIT 一部分的公共方法搜索来修改子视图。**

创建一个 uitableviewcell 类（另见[https://stackoverflow.com/a/22350817/1758337](https://stackoverflow.com/a/22350817/1758337)）

```
- (void)layoutSubviews
{
    [super layoutSubviews];
    for (UIView *subview in self.subviews) {
        //iterate through subviews until you find the right one...
        for(UIView *subview2 in subview.subviews){
            if ([NSStringFromClass([subview2 class]) isEqualToString:@"UITableViewCellDeleteConfirmationView"]) {
                //your color
                ((UIView*)[subview2.subviews firstObject]).backgroundColor=[UIColor blueColor];
            }
        }
    }    
} 
```

另一个注意事项：不能保证这种方法在未来的更新中有效。另请注意，提及或使用私有`UITableViewCellDeleteConfirmationView`类可能会导致 AppStore 拒绝。

**为按钮第 2 部分设置自定义颜色**

回到你的 uitableviewcontroller

```
- (void)tableView:(UITableView *)tableView willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath
{
    [YourTableView reloadData];
} 
```

（直到下次在 tablecell 上调用 layoutSubviews 时才会调用备用颜色，因此我们通过重新加载所有内容来确保发生这种情况。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-18T10:02:59.047

silyevsk 的例子非常好……但是，六个月后，iOS 8 出现了，它不再正常工作了。

现在，您需要寻找一个名为“ `_UITableViewCellActionButton`”的子视图并设置它的背景颜色。

下面是我在我的应用程序中使用的 silyevsk 代码的修改版本。

在我的*某些*`UITableView`单元格上，我不希望用户能够滑动删除，但我*确实*希望在他们滑动时出现一些东西（挂锁图标）。

![在此处输入图像描述](../Images/306116f9e979f1dbbc542adb14fc30e2.png)

为此，我在`bReadOnly`UITableViewCell 类中添加了一个变量

```
@interface NoteTableViewCell : UITableViewCell

. . . 

@property (nonatomic) bool bReadOnly;

-(void)overrideConfirmationButtonColor;

@end 
```

我将 silyevsk 的代码添加到我的 .m 文件中：

```
- (UIView*)recursivelyFindConfirmationButtonInView:(UIView*)view
{
    for(UIView *subview in view.subviews) {

        if([NSStringFromClass([subview class]) rangeOfString:@"UITableViewCellActionButton"].location != NSNotFound)
            return subview;

        UIView *recursiveResult = [self recursivelyFindConfirmationButtonInView:subview];
        if(recursiveResult)
            return recursiveResult;
    }
    return nil;
}

-(void)overrideConfirmationButtonColor
{
    if (!bReadOnly)
        return;

    dispatch_async(dispatch_get_main_queue(), ^{
        UIView *confirmationButton = [self recursivelyFindConfirmationButtonInView:self];
        if(confirmationButton)
        {
            confirmationButton.backgroundColor = [UIColor lightGrayColor];

            UIImageView* imgPadLock = [[UIImageView alloc] initWithFrame:confirmationButton.frame];
            imgPadLock.image = [UIImage imageNamed:@"icnPadlockBlack.png"];
            imgPadLock.contentMode = UIViewContentModeCenter;     //  Don't stretch the UIImage in our UIImageView

            //  Add this new UIImageView in the UIView which contains our Delete button
            UIView* parent = [confirmationButton superview];
            [parent addSubview:imgPadLock];
        }
    });
} 
```

此外，我需要更改填充 的代码`UITableView`，否则“删除”标签和挂锁图标会出现：

```
-(NSString*)tableView:(UITableView *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath
{
    Note* note = [listOfNotes objectAtIndex:indexPath.row];
    if ( /* Is the user is allowed to delete this cell..? */ )
        return @"Delete";

    return @"      ";
} 
```

它仍然很丑陋，并且依赖于这样的假设，即当 iOS 9 出现时这一切都不会改变。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-26T15:34:03.893

这是解决方案：

```
- (void)layoutSubviews
{
    [super layoutSubviews];

    for (UIView *subview in self.subviews) {
        if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl"]) {
            UIView *deleteButtonView = (UIView *)[subview.subviews objectAtIndex:0];
            UIImageView *image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Background"]];
            [deleteButtonView addSubview:image];
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-12T11:58:41.270

IOS7 兼容答案（不是创建自定义类，而是扩展 UITableViewCell ：

```
@implementation UITableViewCell (customdelete)
- (void)layoutSubviews
{
    [super layoutSubviews];
    for (UIView *subview in self.subviews) {
        for(UIView *subview2 in subview.subviews){
            if ([NSStringFromClass([subview2 class]) isEqualToString:@"UITableViewCellDeleteConfirmationView"]) {
                ((UIView*)[subview2.subviews firstObject]).backgroundColor=COLOR_RED;
//YOU FOUND THE VIEW, DO WHATEVER YOU WANT, I JUST RECOLOURED IT
            }
        }
    }
}
@end 
```

# visual-studio-2010 - 在 Visual Studio 2010 之外运行时游戏崩溃

> ID：12130858
> 
> 赞同：0
> 
> 时间：2012-08-26T14:20:24.477
> 
> 标签：visual-studio-2010, crash, sfml

我已经使用 C++ 在 VS2010 中创建了一个游戏，它运行良好（如果在调试时非常滞后:( ），并且在发布模式下运行顺利。但是，当在它之外运行时（即使从项目目录运行 exe ) 它打开，绘制起始场景，然后冻结并只是说“已停止响应”。

什么可能导致这种情况？

编辑：在工作室中，我偶尔会收到一个停止程序的错误，并且在调用堆栈中它只显示 ntdll.dll

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:32:55.447

您使用的是什么版本的 SFML？我在使用 SFML 1.6 的 ATI 视频卡时遇到了问题。除了在我的电脑上，通常它会在绘制所有内容之前打开窗口并立即关闭它；所以我不确定这是否可能是你的问题。据说这个问题在 2.0 版中已修复，因此如果您有 ATI 卡和 1.6 版，请考虑移植到 2.0，看看这是否能解决您的问题。

# struts2 - 使用struts2注册后显示消息对话框？

> ID：12130860
> 
> 赞同：-1
> 
> 时间：2012-08-26T14:20:28.043
> 
> 标签：struts2

使用struts2注册后如何显示消息对话框？

就像在任何注册的情况下一样，注册后会显示一个消息对话框，其中包含“注册成功！！！”的消息。

谁能告诉我如何使用struts2 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:29:04.867

我个人之前没有使用过它，但是[Struts2-jQuery](http://code.google.com/p/struts2-jquery/)插件的[对话框标签](http://code.google.com/p/struts2-jquery/wiki/DialogTag)看起来像是一个现成的解决方案，可以满足您的需求。

该插件很受欢迎，维护得非常积极，并且有据可查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:58:42.603

我不确定您所说的对话框是什么意思，它可以是 Jquery 灯箱或其他东西，也可以是简单的消息，并且可以使用[S2 标签](http://struts.apache.org/2.3.4/docs/actionmessage.html)显示，例如

```
<s:actionmessage /> 
```

此标签将能够让您呈现在您的操作类中设置的消息。或者，您可以创建一个灯箱并在注册完成时通过从操作类发送一些变量来显示它，并基于该变量可以显示消息框。

为了获得更多输入，您需要清除以下内容

1.  你想显示什么样的消息框。
2.  是否要在同一页面上显示消息框（注册）

# android - 需要一些教程和例子，android

> ID：12130862
> 
> 赞同：0
> 
> 时间：2012-08-26T14:20:45.073
> 
> 标签：android

我正在开发一个 android 应用程序，我需要制作个性化的消息。例如，如果我使用我的用户名和密码登录应用程序，登录后我需要在主屏幕上看到“欢迎用户名”消息。

在我的情况下，我有我的联系人列表，我需要选择一个名字，所以这个名字将代替用户名。

我不知道如何寻找它，我希望我能很好地解释自己，让您了解我需要什么，有人可以指导我找到有示例的链接吗？

谢谢你，玛丽亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:37:22.250

这个问题在 SO 上被问了很多次。

最好的网站是[http://developer.android.com/index.html](http://developer.android.com/index.html)

1) 安卓教程[https://stackoverflow.com/questions/3579693/android-tutorials](https://stackoverflow.com/questions/4573438/what-are-good-android-books-for-beginners)

2）一些好书问题[https://stackoverflow.com/questions/4573438/what-are-good-android-books-for-beginners](https://stackoverflow.com/questions/4573438/what-are-good-android-books-for-beginners)

3) Android 初学者项目[Android 初学者项目](https://stackoverflow.com/questions/6497819/android-beginner-projects)

对于英语问题您可以随时使用
[http://itools.com/tool/google-translate-web-page-translator](http://itools.com/tool/google-translate-web-page-translator)

# graylog2 - 在 Graylog2 full_message 中搜索

> ID：12130870
> 
> 赞同：7
> 
> 时间：2012-08-26T14:21:58.010
> 
> 标签：graylog2

是否可以使用 Quickfilter 在 Graylog2 中搜索完整消息？

我可以成功搜索短消息，但似乎只能使用流过滤完整消息。

我需要过滤旧的完整消息，新流仅应用于新消息。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T16:25:16.303

找到了一种搜索 full_message 术语的方法：

在“分析”选项卡中有一个分析外壳，您可以在其中执行自定义命令。

例子：

```
all.find(full_message="term") 
```

Graylog Analytics Shell 说明中的注释：

> 字段 message 和 full_message 被分解为条款。这意味着对它们的搜索并不意味着等于[搜索词]，而是包含[搜索词]。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-02T15:58:31.413

从 Graylog V2.1.2 开始，`full_message`可以像搜索任何其他字段一样搜索该字段。

您可以直接搜索`full_message`：

```
full_message: "my full message string" 
```

或搜索所有字段：

```
"my full message string" 
```

# php - 使用 PDO 插入多行

> ID：12130871
> 
> 赞同：0
> 
> 时间：2012-08-26T14:22:07.007
> 
> 标签：php, mysql, pdo

这段代码有什么问题？我想插入具有相同电影 ID 和不同演员 ID 的多行。当我用 $actors = array(1,2,3,4); 运行它时 （或任何值）和 $movid = 1，所有四行都作为值 (1, 4) 插入。

```
$create_query = "INSERT INTO `tableName`(`movId`, `actId`) VALUES";
$comma = "";
foreach ($actors as $key=>$value) {
    $create_query .= $comma . "(:movie" . $key . ", :actor" . $key . ")";
    $comma = ", ";
}
$query = $db->prepare($create_query);
foreach ($actors as $key=>$value) {
    echo $movid . ', ' . $value //correct output (1, 1), (1, 2) ...
    $query->bindParam(":movie" . $key, $movid, PDO::PARAM_INT);
    $query->bindParam(":actor" . $key, $value, PDO::PARAM_INT);
}
print_r($query);
//output is
/*INSERT INTO `tableName`(`movId`, `actId`) VALUES(:movie0, :actor0), (:movie1, :actor1), (:movie2, :actor2), (:movie3, :actor3)*/
if ($query->execute()) {
    $return = $query->rowCount();
    $query->closeCursor();
} 
```

当我使用单独的查询进行插入时，它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:39:59.037

使用[`PDOStatement::bindValue()`](http://us3.php.net/manual/en/pdostatement.bindvalue.php)而不是`PDOStatement::bindParam()`. 后者将*通过引用*绑定，并且由于您使用的变量会随着每次循环迭代而改变，因此您最终会尝试将所有内容绑定到同一事物。

从[文档中`PDOStatement::bindParam()`](http://us3.php.net/manual/en/pdostatement.bindparam.php)：

> 与 PDOStatement::bindValue() 不同，该变量被绑定为引用，并且只会在调用 PDOStatement::execute() 时进行评估。

# c# - 如何为绘制的形状编写事件？

> ID：12130873
> 
> 赞同：1
> 
> 时间：2012-08-26T14:22:12.643
> 
> 标签：c#, system.drawing

我用这段代码画了一个圆圈：

```
private void Form1_Paint(object sender, PaintEventArgs e)
        {
            // Create pen.
            Pen blackPen = new Pen(Color.Black, 3);
            // Create rectangle for ellipse.
            Rectangle rect = new Rectangle(0, 0, 200, 100);
            // Draw ellipse to screen.
            e.Graphics.DrawEllipse(blackPen, rect);
        } 
```

我怎样才能为这个圈子写一个`mouse-over`或事件？`click`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:28:27.847

您可以在矩形上分配一个点击事件

```
public Form1()
        {
            InitializeComponent();
            Rectangle rect = new Rectangle(0, 0, 100, 200);
            Click += Form1_Click;
        }
//associate this method to Click event Form
     private void Form1_Click(object sender, EventArgs e)
        {
            Rectangle rect = new Rectangle(0, 0, 200, 100);
            Point cursorPos = this.PointToClient(Cursor.Position);
            //you are in rectangle so message display
            if (rect.Contains(cursorPos))
            {                
                MessageBox.Show("in");
            }

        } 
```

# image - Best image upload for drupal

> ID：12130875
> 
> 赞同：0
> 
> 时间：2012-08-26T14:22:36.450
> 
> 标签：image, upload, drupal-7, editor

I am building a very simple site in Drupal-7 there users should be able to edit a page and upload an image to the page (inside the text). I have played around a bit among editors and modules but I do not think I have found something simple enough. Would appreciate if I could get some suggestions.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:16:36.223

您可以在内容类型中使用 Image 字段。这样，您的用户将能够添加图像。您可以指定每个帖子可以包含多少张图片，并且可以是无限的。

图像将显示文本结束的位置。您可以使用视图将图像放在其他地方。

您可以通过 CSS 和子主题控制图像的位置。

您也可以使用 [http://drupal.org/project/wysiwyg_imageupload](http://drupal.org/project/wysiwyg_imageupload)

（谷歌搜索“drupal 图片上传”的第 6 个结果）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:21:30.897

我已经多次使用 WYSIWYG 和 IMCE 模块，发现设置和界面非常好。

您尝试过哪些模块并发现您不喜欢？

# c++ - Can I write a copy constructor for an Abstract base class using pointer instead of reference (&)?

> ID：12130878
> 
> 赞同：2
> 
> 时间：2012-08-26T14:23:04.833
> 
> 标签：c++, oop, constructor, copy-constructor

Was asked this question in IBM ISL interview. Can I write a copy constructor for an Abstract base class using pointer instead of reference (&)?

I think it can be used. Any comments/suggestions?

```
#include <string>

//abstract base class  
class ABC{
    int a;
    int b;
    char *p;
public:
    virtual void f() = 0;
    ABC(){};
    ABC(ABC* abc){
        a = abc->a;
        b = abc->b;
        p = new char[strlen(abc->p)+1];
        p = strcpy(p, abc->p);
    }
};

//derived class  
class ConcreteDerivedClass: private ABC
{
public:
    ConcreteDerivedClass(){}
    void f(){}
    ConcreteDerivedClass(ConcreteDerivedClass& obj):ABC(&obj){}
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T14:25:36.533

```
ABC(ABC* abc) 
```

This is not copy-constructor.

A copy-constructor must be one of the following forms:

```
ABC(ABC & abc);
ABC(ABC const & abc);  //most common form
ABC(ABC volatile & abc);
ABC(ABC const volatile & abc); 
```

The second one is most common. So define a copy-constructor of this form:

```
ABC(ABC const & abc); 
```

and then invoke it from the derived copy-constructor as:

```
ConcreteDerivedClass(ConcreteDerivedClass const & obj): ABC( obj)
                                        //^^^^^ make it const 
```

Here, `ABC(obj)` calls the base class copy-constructor, passing `obj` as reference.

Note that you're *privately* inhereting from `ABC`.

```
class ConcreteDerivedClass: private ABC 
```

*I think* what you need is called `public` inheritance:

```
class ConcreteDerivedClass: public ABC 
```

Search for `private` inheritance and `public` inheritance to know the difference between them. You will find numerous topics on this site. :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T14:33:35.937

你不能，因为编译器会为你生成一个默认的复制构造函数。然而，你的例子并没有错。您从派生类中调用的不是复制构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T14:26:52.410

据此，[它](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/cplr390.htm)必须是一个参考。

# python - Python中的R expand.grid() 函数

> ID：12130883
> 
> 赞同：70
> 
> 时间：2012-08-26T14:24:14.273
> 
> 标签：python, r

是否有类似于 R 中的 expand.grid() 函数的 Python 函数？提前致谢。

（编辑）下面是这个 R 函数的描述和一个例子。

```
Create a Data Frame from All Combinations of Factors

Description:

     Create a data frame from all combinations of the supplied vectors
     or factors.  

> x <- 1:3
> y <- 1:3
> expand.grid(x,y)
  Var1 Var2
1    1    1
2    2    1
3    3    1
4    1    2
5    2    2
6    3    2
7    1    3
8    2    3
9    3    3 
```

（EDIT2）以下是 rpy 包的示例。我想获得相同的输出对象但不使用 R ：

```
>>> from rpy import *
>>> a = [1,2,3]
>>> b = [5,7,9]
>>> r.assign("a",a)
[1, 2, 3]
>>> r.assign("b",b)
[5, 7, 9]
>>> r("expand.grid(a,b)")
{'Var1': [1, 2, 3, 1, 2, 3, 1, 2, 3], 'Var2': [5, 5, 5, 7, 7, 7, 9, 9, 9]} 
```

**编辑 02/09/2012：**我真的迷失了 Python。Lev Levitsky 在他的回答中给出的代码对我不起作用：

```
>>> a = [1,2,3]
>>> b = [5,7,9]
>>> expandgrid(a, b)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in expandgrid
NameError: global name 'itertools' is not defined 
```

但是似乎安装了 itertools 模块（键入`from itertools import *`不返回任何错误消息）

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-05-07T20:04:28.820

只需使用列表推导：

```
>>> [(x, y) for x in range(5) for y in range(5)]

[(0, 0), (0, 1), (0, 2), (0, 3), (0, 4), (1, 0), (1, 1), (1, 2), (1, 3), (1, 4), (2, 0), (2, 1), (2, 2), (2, 3), (2, 4), (3, 0), (3, 1), (3, 2), (3, 3), (3, 4), (4, 0), (4, 1), (4, 2), (4, 3), (4, 4)] 
```

如果需要，转换为 numpy 数组：

```
>>> import numpy as np
>>> x = np.array([(x, y) for x in range(5) for y in range(5)])
>>> x.shape
(25, 2) 
```

我已经测试了高达 10000 x 10000，python 的性能与 R 中的 expand.grid 相当。使用元组 (x, y) 比在理解中使用列表 [x, y] 快大约 40%。

或者...

使用 np.meshgrid 大约快 3 倍，并且内存占用少得多。

```
%timeit np.array(np.meshgrid(range(10000), range(10000))).reshape(2, 100000000).T
1 loops, best of 3: 736 ms per loop 
```

在 R 中：

```
> system.time(expand.grid(1:10000, 1:10000))
   user  system elapsed 
  1.991   0.416   2.424 
```

请记住，R 具有基于 1 的数组，而 Python 具有基于 0 的数组。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-09-13T12:49:31.943

`product`from`itertools`是您解决方案的关键。它产生输入的笛卡尔积。

```
from itertools import product

def expand_grid(dictionary):
   return pd.DataFrame([row for row in product(*dictionary.values())], 
                       columns=dictionary.keys())

dictionary = {'color': ['red', 'green', 'blue'], 
              'vehicle': ['car', 'van', 'truck'], 
              'cylinders': [6, 8]}

>>> expand_grid(dictionary)
    color  cylinders vehicle
0     red          6     car
1     red          6     van
2     red          6   truck
3     red          8     car
4     red          8     van
5     red          8   truck
6   green          6     car
7   green          6     van
8   green          6   truck
9   green          8     car
10  green          8     van
11  green          8   truck
12   blue          6     car
13   blue          6     van
14   blue          6   truck
15   blue          8     car
16   blue          8     van
17   blue          8   truck 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-08-26T15:32:30.977

这是一个示例，它提供类似于您需要的输出：

```
import itertools
def expandgrid(*itrs):
   product = list(itertools.product(*itrs))
   return {'Var{}'.format(i+1):[x[i] for x in product] for i in range(len(itrs))}

>>> a = [1,2,3]
>>> b = [5,7,9]
>>> expandgrid(a, b)
{'Var1': [1, 1, 1, 2, 2, 2, 3, 3, 3], 'Var2': [5, 7, 9, 5, 7, 9, 5, 7, 9]} 
```

不同之处在于`itertools.product` [最右边的元素在每次迭代中都会前进](http://docs.python.org/library/itertools.html#itertools.product)。`product`如果它很重要，您可以通过巧妙地对列表进行排序来调整该功能。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-09-17T20:43:53.767

[pandas 文档](http://pandas.pydata.org/pandas-docs/version/0.17.1/cookbook.html#creating-example-data)定义了一个函数`expand_grid`：

```
def expand_grid(data_dict):
    """Create a dataframe from every combination of given values."""
    rows = itertools.product(*data_dict.values())
    return pd.DataFrame.from_records(rows, columns=data_dict.keys()) 
```

要使此代码正常工作，您将需要以下两个导入：

```
import itertools
import pandas as pd 
```

输出是 a `pandas.DataFrame`，它是 Python 中与 R 最具可比性的对象`data.frame`。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-01-16T05:44:02.817

我想知道这个问题已经有一段时间了，到目前为止我对提出的解决方案并不满意，所以我想出了自己的解决方案，它相当简单（但可能更慢）。该函数使用 numpy.meshgrid 制作网格，然后将网格展平为一维数组并将它们放在一起：

```
def expand_grid(x, y):
    xG, yG = np.meshgrid(x, y) # create the actual grid
    xG = xG.flatten() # make the grid 1d
    yG = yG.flatten() # same
    return pd.DataFrame({'x':xG, 'y':yG}) # return a dataframe 
```

例如：

```
import numpy as np
import pandas as pd

p, q = np.linspace(1, 10, 10), np.linspace(1, 10, 10)

def expand_grid(x, y):
    xG, yG = np.meshgrid(x, y) # create the actual grid
    xG = xG.flatten() # make the grid 1d
    yG = yG.flatten() # same
    return pd.DataFrame({'x':xG, 'y':yG})

print expand_grid(p, q).head(n = 20) 
```

我知道这是一篇旧帖子，但我想我会分享我的简单版本！

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-02-24T07:54:39.797

从上述解决方案中，我做到了

```
import itertools
import pandas as pd

a = [1,2,3]
b = [4,5,6]
ab = list(itertools.product(a,b))
abdf = pd.DataFrame(ab,columns=("a","b")) 
```

以下是输出

```
 a   b
0   1   4
1   1   5
2   1   6
3   2   4
4   2   5
5   2   6
6   3   4
7   3   5
8   3   6 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-01-08T13:31:48.177

Scikit 中的 ParameterGrid 函数与 expand_grid（来自 R）的作用相同。例子：

```
from sklearn.model_selection import ParameterGrid
param_grid = {'a': [1,2,3], 'b': [5,7,9]}
expanded_grid = ParameterGrid(param_grid) 
```

您可以访问将其转换为列表的内容：

```
list(expanded_grid)) 
```

输出：

```
[{'a': 1, 'b': 5},
 {'a': 1, 'b': 7},
 {'a': 1, 'b': 9},
 {'a': 2, 'b': 5},
 {'a': 2, 'b': 7},
 {'a': 2, 'b': 9},
 {'a': 3, 'b': 5},
 {'a': 3, 'b': 7},
 {'a': 3, 'b': 9}] 
```

通过索引访问元素

```
list(expanded_grid)[1] 
```

你会得到这样的东西：

```
{'a': 1, 'b': 7} 
```

只需添加一些用法...您可以使用上面打印的字典列表传递给带有 **kwargs 的函数。例子：

```
def f(a,b): return((a+b, a-b))
list(map(lambda x: f(**x), list(expanded_grid))) 
```

输出：

```
[(6, -4),
 (8, -6),
 (10, -8),
 (7, -3),
 (9, -5),
 (11, -7),
 (8, -2),
 (10, -4),
 (12, -6)] 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-02-14T12:28:34.610

这是另一个返回 pandas.DataFrame 的版本：

```
import itertools as it
import pandas as pd

def expand_grid(*args, **kwargs):
    columns = []
    lst = []
    if args:
        columns += xrange(len(args))
        lst += args
    if kwargs:
        columns += kwargs.iterkeys()
        lst += kwargs.itervalues()
    return pd.DataFrame(list(it.product(*lst)), columns=columns)

print expand_grid([0,1], [1,2,3])
print expand_grid(a=[0,1], b=[1,2,3])
print expand_grid([0,1], b=[1,2,3]) 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-12-09T20:40:04.523

[pyjanitor](https://pypi.org/project/pyjanitor/)可以说[`expand_grid()`](https://pyjanitor.readthedocs.io/reference/janitor.functions/janitor.expand_grid.html)是最自然的解决方案，尤其是如果您来自 R 背景。

用法是将`others`参数设置为字典。字典中的项目可以有不同的长度和类型。返回值是一个 pandas DataFrame。

```
import janitor as jn

jn.expand_grid(others = {
    'x': range(0, 4),
    'y': ['a', 'b', 'c'],
    'z': [False, True]
}) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-07T18:14:03.997

你试过`product`吗`itertools`？在我看来，比其中一些方法更容易使用（`pandas`and除外`meshgrid`）。请记住，此设置实际上将迭代器中的所有项目拉入列表，然后将其转换为，`ndarray`因此请注意更高维度或删除`np.asarray(list(combs))`更高维度的网格，除非您想用完内存，然后您可以参考特定组合的迭代器。我强烈推荐`meshgrid`这个：

```
#Generate square grid from axis
from itertools import product
import numpy as np
a=np.array(list(range(3)))+1 # axis with offset for 0 base index to 1
points=product(a,repeat=2) #only allow repeats for (i,j), (j,i) pairs with i!=j
np.asarray(list(points))   #convert to ndarray 
```

我从中得到以下输出：

```
array([[1, 1],
   [1, 2],
   [1, 3],
   [2, 1],
   [2, 2],
   [2, 3],
   [3, 1],
   [3, 2],
   [3, 3]]) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-17T12:34:53.757

这是任意数量的异构列类型的解决方案。它基于`numpy.meshgrid`. Thomas Browne 的答案适用于同质列类型。Nate 的答案适用于两列。

```
import pandas as pd
import numpy as np

def expand_grid(*xi, columns=None):
    """Expand 1-D arrays xi into a pd.DataFrame
    where each row is a unique combination of the xi.

    Args:
        x1, ..., xn (array_like): 1D-arrays to expand.
        columns (list, optional): Column names for the output
            DataFrame.

    Returns:
        Given vectors `x1, ..., xn` with lengths `Ni = len(xi)`
        a pd.DataFrame of shape (prod(Ni), n) where rows are:
        x1[0], x2[0], ..., xn-1[0], xn[0]
        x1[1], x2[0], ..., xn-1[0], xn[0]
        ...
        x1[N1 -1], x2[0], ..., xn-1[0], xn[0]
        x1[0], x2[1], ..., xn-1[0], xn[0]
        x1[1], x2[1], ..., xn-1[0], xn[0]
        ...
        x1[N1 - 1], x2[N2 - 1], ..., xn-1[Nn-1 - 1], xn[Nn - 1]
    """
    if columns is None:
        columns = pd.RangeIndex(0, len(xi))
    elif columns is not None and len(columns) != len(xi):
        raise ValueError(
            " ".join(["Expecting", str(len(xi)), "columns but", 
                str(len(columns)), "provided instead."])
        )
    return pd.DataFrame({
        coln: arr.flatten() for coln, arr in zip(columns, np.meshgrid(*xi))
    }) 
```

# javascript - jQuery在变量中存储效果名称

> ID：12130889
> 
> 赞同：2
> 
> 时间：2012-08-26T14:25:18.507
> 
> 标签：javascript, jquery, jquery-effects

我正在寻找几个星期来用 jquery 做这个技巧，但一切都失败了，所以我把它贴在这里。

是否可以将效果名称存储在变量中，然后在 div 上执行该效果？
我的意思是这样的：

```
var effect = 'fadeOut';

$('#some_div').effect(); 
```

我希望你能明白我在寻找什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T14:27:03.927

```
var effect = 'fadeOut';

var $div = $('#some_div');
$div[effect](); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T14:27:04.423

使用括号进行属性访问。JavaScript 中的方法也是属性。

```
$('#some_div')[effect](); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T14:27:26.420

使用括号表示法：

```
$('#some_div')[effect](); 
```

这将运行名称等于 的值的函数`effect`。

# java - Hibernate Annotations：两个实体之间的两种关系类型？

> ID：12130892
> 
> 赞同：0
> 
> 时间：2012-08-26T14:25:38.413
> 
> 标签：java, mysql, hibernate, orm, annotations

我的场景是用户表和图片表。每个用户可以上传多张图片。每个用户都可以将他们自己的一张图片设置为他们最喜欢的图片，但这并不影响该图片在该用户的图片集合中。

将其映射到休眠已被证明是困难的。我的应用程序有一个屏幕，其中显示了所有用户图片的列表，并且还显示了他们最喜欢哪一张。但是，当应用程序加载图片时，不会加载最喜欢的单张图片。在 eclipse 中调试显示列表中特定对象的各种有趣的东西，也许它是一个代理对象。这是显示映射的实体代码：

```
@Entity
class Account {
    @Id
    public String username;

    /* Originally a Set<Picture>, but wanted ordering */
    @OneToMany(cascade=CascadeType.ALL, mappedBy="account")
    @OrderBy("uploadtime DESC")
    public List<Picture> pictures;

    @ManyToOne(fetch = FetchType.LAZY, optional=true)
    @LazyToOne(LazyToOneOption.PROXY)
    @JoinColumn(name="favourite_picture_id")
    public Picture favourite_picture;

    /* Sometimes it is useful to get just the id, if possible without loading the entire entity */
    @OneToOne(fetch = FetchType.LAZY, optional=true)
    @Column(insertable=false, updatable=false)
    public String favourite_picture_id;
}

@Entity
public class Picture {
    @Id
    @GeneratedValue(generator="uuid")
    @GenericGenerator(name="uuid", strategy="uuid2")
    public String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name="username")
    public Account account;

    /* This is never used, but I thought this might be required for the mapping? */
    @OneToOne(mappedBy="favourite_picture")
    public Account account_favourite_picture;

    public String mimetype;

    public Date uploadtime = new Date();

    @Column(length=1024 * 1024 * 4)
    public byte[] data;
} 
```

我不知道为什么喜欢的图片无法加载到图片列表中。任何建议将不胜感激：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:31:57.060

由于 a`Picture`有一个特定`Account`的拥有它，我很想在 Picture 类中包含一个布尔属性，称为`isFavourite`. 这将大大简化映射。

您可以`getFavourite`在 Account 类上提供一个方法，该方法通过查看图片列表并找到标记为收藏的图片来返回收藏的图片。

# php - Multiple MySQL row INSERT failing

> ID：12130893
> 
> 赞同：-2
> 
> 时间：2012-08-26T14:25:38.147
> 
> 标签：php, mysql, pdo

I was doing a simple `INSERT` during my development, but I'm going back and putting in SQL protection and prepared statements. The error I receive is:

> Warning: PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens

Here is the code that I'm using from help from others on SO.

```
// foreach to set up variables
foreach ($json as $text) {
    $uoid = mysql_real_escape_string($uoid);
    $filename = mysql_real_escape_string($uoid.".jpg");
    $filedate = mysql_real_escape_string($datetime);
    $imagedesc = mysql_real_escape_string($desc);

    // array of values
    $insert[] = array($uoid,$filename,$filedate,$imagedesc);
}

function placeholders($text, $count=0, $separator=","){
    $result = array();
    if($count > 0){
        for($x=0; $x<$count; $x++){
            $result[] = $text;
        }
    }
    return implode($separator, $result);
}

foreach($insert as $d){
    $question_marks[] = '('  . placeholders('?', sizeof($d)) . ')';
}        

$pdo = new PDO('mysql:dbname=photo_gallery;host=127.0.0.1', 'myuser', 'mypass');
$pdo->beginTransaction();
$sql = "INSERT INTO wp_gallery (" . implode(',', array_values($insert) ) . ") 
        VALUES " . implode(',', $question_marks);
// reading output
echo $sql;

$stmt = $pdo->prepare($sql);

try {
    $stmt->execute($insert[0]);
} catch (PDOException $e){
    echo $e->getMessage();
}

$pdo->commit(); 
```

When I look at the SQL output:

```
INSERT INTO wp_gallery (10219776,10219776.jpg,my image description,2012-08-01 15:36:29)
VALUES (?,?,?,?),(?,?,?,?),(?,?,?,?),(?,?,?,?) 
```

Everything matches just by the look of it, but I'm still baffled as to how to fix this. Can someone point out what I'm doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:45:33.950

You're passing values as column names, and you're not passing the correct parameter to execute;

Something like this would be more correct;

```
// Replace the $insert buildup. Array of values, you don't want an array of arrays here.
$insert = array_merge($insert, array($uoid,$filename,$filedate,$imagedesc));

...

$column_names = array("column1", "column2", "column3", "column4");

$sql = "INSERT INTO wp_gallery (" . implode(',', $column_names ) . ") 
    VALUES " . implode(',', $question_marks);

$stmt->execute($insert); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:32:45.300

INSERT 语句如下所示：

```
INSERT INTO name_of_the_table (name_of_column_1, name_of_column_2,...) VALUES
 (value_of_column_1, value_of_column_2), (value_of_column_1, value_of_column_2); 
```

如果按照定义的顺序设置所有列的值，则可以省略列的名称。

但是，您将值放在列名应该放在哪里，把问号放在应该放在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T14:34:24.143

[插入 tbl_name (col1,col2) 值(111,222),(333,444);](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

# jquery - 延迟加载 jQuery 插件不适用于通过 AJAX 加载的图像

> ID：12130896
> 
> 赞同：0
> 
> 时间：2012-08-26T14:26:16.673
> 
> 标签：jquery, ajax, dom, lazy-loading

我使用lazyload插件在我的网站上加载图像，它工作得很好，但是当通过AJAX加载图像时（当你点击缩略图加载帖子时）插件似乎不适用于这些图像。可能是因为图像最初不在 DOM 中吗？

知道我能做些什么来解决这个问题吗？

非常感谢。

插件：[https ://github.com/tuupola/jquery_lazyload](https://github.com/tuupola/jquery_lazyload)

```
$("body img").lazyload({ 
    effect : "fadeIn",
    failure_limit : 99999,
    threshold : 100
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T14:49:24.730

```
testFunc = function(str, callback) {
    // Send our params
    var data = 'some data to send';
    $.ajax({
        type: 'POST',
        url: 'http://www.myurl.com',
        data: data,
        success: function(data) {

    $("body img").lazyload({ 
        effect : "fadeIn",
        failure_limit : 99999,
        threshold : 100
    });

        }
    });
} 
```

Put the above function after success of ajax call..Since the image is not there event is not binding with those images.

# ios - 在 UINavigationController 的视图控制器堆栈中的某些视图控制器中未调用 didReceiveMemoryWarning

> ID：12130900
> 
> 赞同：1
> 
> 时间：2012-08-26T14:26:50.877
> 
> 标签：ios, didreceivememorywarning

我用视图控制器A作为根视图控制器制作了UINavigationViewController，然后推送视图控制器B。当我在模拟器中模拟内存警告时，只调用了A的didReceiveMemoryWarning。当然，我在 A 和 B 中都覆盖了 didReceiveMemoryWarning。最终我通过在 A 的 didReceiveMemoryWarning 中调用 B 的 didReceiveMemoryWarning 来解决这个问题。但是我不知道为什么会自动调用 B 的方法。A 的 viewDidUnload 和 B 的 viewDidUnload 都按预期调用，因为我在从 B 呈现模态视图控制器时触发了警告。

如果视图控制器 B 是导航控制器的根，则调用它的 didReceiveMemoryWarning 没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:32:34.830

我见过的最常见的原因是：

*   您正在调用`[[NSNotificationCenter defaultCenter] removeObserver:self]`您的视图控制器之一。您不应该这样做，因为会`UIViewController`注册此类事件的通知。

*   您对视图控制器层次结构做了一些奇怪的事情，例如在不使用 iOS 5 包含方法或普通视图控制器表示方法（presentViewController: 和朋友）的情况下添加另一个视图控制器的视图作为子视图。

# php - codeigniter不同的mysql查询

> ID：12130905
> 
> 赞同：3
> 
> 时间：2012-08-26T14:27:15.517
> 
> 标签：php, mysql, codeigniter

每当我在模型中使用 get_where 时，它​​都会给我所有数据库条目，包括重复项，而当我只使用 get 时，它只会给我第一个条目。但我想要所有不同的条目。谁能帮助我。非常感谢！

控制器 = site.php：

```
public function western_australia(){
    $this->load->model("continents_get");
    $data["results"] = $this->continents_get
                            ->getMaincategories("western_australia");
    $this->load->view("content_western_australia", $data);
} 
```

模型 = 大陆_get.php

```
function getMaincategories($western_australia){
    $this->db->distinct();
    $query = $this->db->get_where("p_maincategories", 
                    array("page" => $western_australia));
    return $query->result();
} 
```

视图 = content_western_australia.php

```
<?php
    foreach($results as $row){
        $page = $row->page;
        $main_en = $row->main_en;
        echo $main_en; 
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T14:45:33.930

Distinct will not always work. You should add -`>group_by("name_of_the_column_which_needs_to_be unique");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:33:52.717

来自[CI](http://codeigniter.com/user_guide/database/active_record.html)文档：

```
 $this->db->distinct();

Adds the "DISTINCT" keyword to a query

$this->db->distinct();
$this->db->get('table');

// Produces: SELECT DISTINCT * FROM table 
```

可能是为什么你只得到一条线。

为了让事情更简单，Active Record 允许您编写查询：

```
$query = $this->db->query('SELECT DISTINCT main_en FROM p_maincategories 
WHERE PAGE =  '.$this->db->escape($western_australia).'); 
```

# android - 与异步任务不同的类中的崩溃运行方法

> ID：12130906
> 
> 赞同：0
> 
> 时间：2012-08-26T14:27:15.593
> 
> 标签：android, class, android-asynctask, sharedpreferences

当我从异步任务运行方法时，我的应用程序崩溃。但我不知道为什么，错误日志也不是很详细，这使得找到问题变得更加困难。

它与上下文有关，任何人都可以找到我做错了什么吗？

```
public class UpdateHelpers extends Activity{

public String UPDATE_TIMESTAMP; 

    //opgeslagen timestamp verkrijgen
    public int getLastUpdateTimeStamp(){
        System.out.println(" getLastUpdateTimestamp Methode" );
          SharedPreferences savedTimeStamp = getSharedPreferences(UPDATE_TIMESTAMP,  MODE_PRIVATE);
          Integer startvalue = 1343192400; // timestamp last file from assets: (25-07-2012)
           Integer timestamp = savedTimeStamp.getInt("timestamp", startvalue); //standaard value: datum laatste json uit assets (25-07-2012)
           System.out.println("return value: "+timestamp);
           return timestamp;
        } 
```

类更大，更多帮助方法，但这已经不起作用）

在异步任务中（在后台执行）

```
//check for updates
                    Integer ts = uh.getLastUpdateTimeStamp();
                    System.out.println("value of timestamp= "+ts); 
```

其中 uh 是在带有异步任务的类的 onCreate 中声明的：

```
 public UpdateHelpers uh;
 uh = new UpdateHelpers(); 
```

我需要的是一个保存的时间戳，如果它不存在我下载文件时的时间戳（7 月 25 日）。然后我可以检查是否有其他方法的更新，但我的代码更早崩溃了。

我输入了一些 system.out.printlns，所以你可以看到哪里出错了这是我的崩溃日志：

```
08-26 16:14:54.932: I/System.out(12571):  getLastUpdateTimestamp Methode
08-26 16:14:54.932: W/dalvikvm(12571): threadid=8: thread exiting with uncaught exception (group=0x400259f8)
08-26 16:14:54.942: E/AndroidRuntime(12571): FATAL EXCEPTION: AsyncTask #1
08-26 16:14:54.942: E/AndroidRuntime(12571): java.lang.RuntimeException: An error occured while executing doInBackground()
08-26 16:14:54.942: E/AndroidRuntime(12571):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-26 16:14:54.942: E/AndroidRuntime(12571):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-26 16:14:54.942: E/AndroidRuntime(12571):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-26 16:14:54.942: E/AndroidRuntime(12571):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-26 16:14:54.942: E/AndroidRuntime(12571):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-26 16:14:54.942: E/AndroidRuntime(12571):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
08-26 16:14:54.942: E/AndroidRuntime(12571):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
08-26 16:14:54.942: E/AndroidRuntime(12571):    at java.lang.Thread.run(Thread.java:1102)
08-26 16:14:54.942: E/AndroidRuntime(12571): Caused by: java.lang.NullPointerException
08-26 16:14:54.942: E/AndroidRuntime(12571):    at android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:146)
08-26 16:14:54.942: E/AndroidRuntime(12571):    at com.hera.ontdekdelft.UpdateHelpers.getLastUpdateTimeStamp(UpdateHelpers.java:24)
08-26 16:14:54.942: E/AndroidRuntime(12571):    at com.hera.ontdekdelft.StartUp$LoadData.doInBackground(StartUp.java:611)
08-26 16:14:54.942: E/AndroidRuntime(12571):    at com.hera.ontdekdelft.StartUp$LoadData.doInBackground(StartUp.java:1)
08-26 16:14:54.942: E/AndroidRuntime(12571):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-26 16:14:54.942: E/AndroidRuntime(12571):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-26 16:14:54.942: E/AndroidRuntime(12571):    ... 4 more 
```

任何人的想法？我没有输入我的整个代码，因为它很多。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:31:34.613

您不能像下面这样初始化活动类。它需要由Android为您初始化

```
uh = new UpdateHelpers(); 
```

呃应该是你的活动。做这样的事情

```
uh = ActivityName.this 
```

# php - 将图像添加到网站上的 facebook 新闻提要

> ID：12130908
> 
> 赞同：-1
> 
> 时间：2012-08-26T14:27:27.797
> 
> 标签：php, facebook, facebook-graph-api

我在这个网站[http://johndoesdesign.com/blog/2011/php/adding-a-facebook-news-status-feed-to-a找到了一个很好的教程和代码，关于如何在网站中显示 Facebook 新闻提要-website/](http://johndoesdesign.com/blog/2011/php/adding-a-facebook-news-status-feed-to-a-website/)，唯一的缺点是它没有显示如何将图像作为新闻提要的一部分。此提要仅显示如何放置文本。问题是我的客户在他的网站上更新了图片，并且文本支持图片，所以如果不显示图片，文本就没有意义。我使用的代码列在上面的链接中。

我的工作测试站点有我正在使用的文件。它是[http://www.twmtest.com](http://www.twmtest.com)，如果您访问 about-us 页面，它会显示我要显示的内容。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:42:41.103

将此添加到行内的代码中，`echo '<li>';`并且`echo '</li>';`：

```
if (!empty($news->picture)) {
  printf ('<img src="%s" alt="Image from Facebook" />', $news->picture);
} 
```

一个 API 调用返回了大量数据。您可以`print_r($news);`查看所有内容，或访问[Graph API Explorer](https://developers.facebook.com/tools/explorer)以更好地了解它。

# java - 我遇到与本地主机相关的错误。我正在尝试实现多线程服务器客户端聊天服务器

> ID：12130909
> 
> 赞同：1
> 
> 时间：2012-08-26T14:27:34.720
> 
> 标签：java, localhost

这是我正在尝试工作的代码，但我收到了关于 localhost 不可用的 IOException。

```
public class MultiThreadChatClient implements Runnable{

    // Declaration section
    // clientClient: the client socket
    // os: the output stream
    // is: the input stream

    static Socket clientSocket = null;
    static PrintStream os = null;
    static DataInputStream is = null;
    static BufferedReader inputLine = null;
    static boolean closed = false;

    public static void main(String[] args) {

    // The default port 

    int port_number=5050;
        String host="localhost";

    // Initialization section:
    // Try to open a socket on a given host and port
    // Try to open input and output streams
    try {
            clientSocket = new Socket(host, port_number);
            inputLine = new BufferedReader(new InputStreamReader(System.in));
            os = new PrintStream(clientSocket.getOutputStream());
            is = new DataInputStream(clientSocket.getInputStream());
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host "+host);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to the host "+host);
        }

    // If everything has been initialized then we want to write some data
    // to the socket we have opened a connection to on port port_number 

        if (clientSocket != null && os != null && is != null) {
            try {

        // Create a thread to read from the server

                new Thread(new MultiThreadChatClient()).start();

        while (!closed) {
                    os.println(inputLine.readLine()); 
                }

        // Clean up:
        // close the output stream
        // close the input stream
        // close the socket

        os.close();
        is.close();
        clientSocket.close();   
            } catch (IOException e) {
                System.err.println("IOException:  " + e);
            }
        }
    }           

    public void run() {     
    String responseLine;

    // Keep on reading from the socket till we receive the "Bye" from the server,
    // once we received that then we want to break.
    try{ 
        while ((responseLine = is.readLine()) != null) {
        System.out.println(responseLine);
        if (responseLine.indexOf("*** Bye") != -1) break;
        }
            closed=true;
        } catch (IOException e) {
        System.err.println("IOException:  " + e);
    }
    }
} 
```

我得到的例外是：

> 无法获取与主机 localhost 的连接的 I/O

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:33:49.613

错误可能是由于没有服务器监听连接请求。**先启动服务端程序，再启动客户端**。

*否则也试试这个*：套接字构造函数需要第一个参数，`InetAddress`而不是`String`
你必须使用 getByName(String) 方法将主机初始化为套接字对象。修改您的套接字构造函数，如下所示：

```
clientSocket = new Socket(InetAddress.getByName(host), port_number); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:14:17.693

检查是否在端口 5050 上启用了 TCP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-30T12:49:43.343

而不是`localhost`，提供您的本地 IP 地址。要知道本地 IP 地址，请转到命令提示符并键入`ipconfig`.

**例子**

```
public static void main(String[] args) {

    // The default port.
    int portNumber = 6679;
    // The default host.
    String host = "192.150.46.2"; 
```

# http - 如何解释空的 HTTP Accept 标头？

> ID：12130910
> 
> 赞同：28
> 
> 时间：2012-08-26T14:27:41.670
> 
> 标签：http, http-headers, string

HTTP/1.1`Accept`请求标头在[RFC 2616 第 14.1 节](https://www.rfc-editor.org/rfc/rfc2616#section-14.1)中指定。

它的语法是这样的：

```
 Accept         = "Accept" ":"
                    #( media-range [ accept-params ] ) 
```

`#`根据[第 2.1 节](https://www.rfc-editor.org/rfc/rfc2616#section-2.1)，没有任何数字状态*为零或多个*。但是，第 14.1 节没有说明如何解释空标题。这与[第 14.2 节](https://www.rfc-editor.org/rfc/rfc2616#section-14.2)形成对比，该节讨论，其中不仅使用（*一个或多个*），而且还指定了空标题的情况，这有点奇怪。处理请求标头的其他一些部分也专门针对空值的特殊情况。`Accept``Accept-Encoding``1#`*`Accept-Encoding`*

 *是否应该将**空** `Accept`标题等同于**不存在的** `Accept`标题？我错过了这方面的任何官方资源吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-26T16:49:38.987

从[RFC2616 Sec4.2](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2)：

> 每个标头字段由一个名称后跟一个冒号（“：”）和字段值组成。

乍一看，这似乎会将指定空标头值的消息放入格式错误的不合规类别中。[但是， RFC2616 Sec2.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.1)中概述的增强 BNF 形式表明

> "#element" 允许任何数字，包括零

由于这是用于指定 Accept 标头值的声明，因此空值似乎是有效的。

由于规范中的以下方向，解析空标题和只有空格的标题可能会出现问题：

> 字段内容不包括任何前导或尾随 LWS：在字段值的第一个非空白字符之前或字段值的最后一个非空白字符之后出现的线性空白。可以在不更改字段值语义的情况下删除此类前导或尾随 LWS。在解释字段值或向下游转发消息之前，在字段内容之间发生的任何 LWS 都可以用单个 SP 替换。

恕我直言，发送一个空头是完全没有意义的。不应该这样做，并且解析器可能无法正确解析这些标头。传统上，在处理不合规组件时想要规避此类限制的人会指定“伪空”值，如下所示：

`X-MyCustomHeader: ""`

如果您只是想验证标头字段是否作为某种形式的布尔开关发送，请考虑发送像上面这样的占位符值而不是空值。

* * *

**更新**

我想我在直接回答这个问题时不是很清楚：在空的 Accept 标头的情况下，您确实有两个选择：

*   发送`406 Not Acceptable`响应以通知客户端您不为空的 Accept 值提供任何内容类型 (duh)。

这是合理的，但[RFC2616 Sec14.1 不需要](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1)：

> 如果存在 Accept 头字段，并且如果服务器无法发送根据组合 Accept 字段值可接受的响应，则服务器应该发送 406（不可接受）响应。

*   或者，因为这不是必需的，并且用户不太可能不接受**任何**内容类型（否则，他们为什么还要费心发送请求？）......我建议处理一个空`Accept:`值（如果消息拒绝不是' t 选项）与 相同`Accept: */*`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-04T13:14:38.773

根据[https://www.rfc-editor.org/rfc/rfc7231#section-5.3.2](https://www.rfc-editor.org/rfc/rfc7231#section-5.3.2)：

> 没有任何 Accept 头字段的请求意味着用户代理将接受任何媒体类型作为响应。

您应该将不存在的`Accept`标头视为`*/*`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-03T08:14:47.033

自上一个答案以来已经有几年了，所以这里是当前的[RFC 7231](https://www.rfc-editor.org/rfc/rfc7231.html#section-5.3.2)，它与以前的 RFC 保持相同的建议：

> 没有任何 Accept 头字段的请求意味着用户代理将接受任何媒体类型作为响应。*

# jquery - CKEditor：在运行时从 config.js 更改值？

> ID：12130913
> 
> 赞同：1
> 
> 时间：2012-08-26T14:28:15.590
> 
> 标签：jquery, ckeditor, config

我想为 CKEditor 的功能“ [forcePasteAsPlainText](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.forcePasteAsPlainText) ”设置一个开关，您可以在 config.js 中启用它：

```
CKEDITOR.editorConfig = function( config ) {
  config.forcePasteAsPlainText = true;
} 
```

从我网站的 js 文件中，我现在尝试使用 jquery 更改 forcePasteAsPlainText 的值：

```
 if(typeof(CKEDITOR) !== 'undefined') { 
    $('#filterTextButton').click(function () {
        CKEDITOR.config.forcePasteAsPlainText = !CKEDITOR.config.forcePasteAsPlainText;
        if(CKEDITOR.config.forcePasteAsPlainText) {
            $("#filterSwitch").html("OFF");
        }
        else {
            $("#filterSwitch").html("ON");
        }
    });
} 
```

问题是我无法访问**CKEDITOR.config.forcePasteAsPlainText**。我得到一个未定义的。

将对象*CKEDITOR.config*转换为字符串，我看到有一个名为*CKEDITOR.config.plugins*的对象持有一个名为“pastetext”的参数（属于 forcePasteAsPlainText）。但我不知道如何重新阅读或设置它。

[我读到更改配置值的一种可能性是通过在运行时替换它](https://stackoverflow.com/a/8078586/1066234)来重新初始化整个编辑器......但必须有另一种解决方案！？

PS：我[在这里读到](http://cksource.com/forums/viewtopic.php?f=11&t=16466&start=0)您可以使用以下内容，但这对我不起作用：

```
CKEDITOR.on('instanceReady', function(ev) {
   ev.editor._.commands.paste = ev.editor._.commands.pastetext;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:53:23.493

`forcePasteAsPlaintext`不幸的是，如果不重新初始化编辑器就无法修改。您可以在此处查看[http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/pastetext/plugin.js#L56](http://dev.ckeditor.com/browser/CKEditor/trunk/_source/plugins/pastetext/plugin.js#L56)该配置设置仅在启动时使用一次。

替代解决方案是手动关闭/打开强制粘贴为纯文本。比如像这样：

```
// Set to false to switch forcing off.
var force = true;

editor.on( 'beforeCommandExec', function ( evt )
{
     var mode = evt.data.commandData;
     if ( force && evt.data.name == 'paste' && mode != 'html' )
     {
         editor.execCommand( 'pastetext' );
         evt.cancel();
     }
}, null, null, 0 );

editor.on( 'beforePaste', function( evt )
{
    if ( force )
        evt.data.mode = 'text';
}); 
```

# javascript - Jquery UI 选项卡：选项卡 2 中的内容反映在选项卡 1 中，而不是选项卡 2

> ID：12130918
> 
> 赞同：1
> 
> 时间：2012-08-26T14:28:48.810
> 
> 标签：javascript, jquery-ui, jquery-ui-tabs

我使用 Jquery UI 选项卡创建了 2 个选项卡。当我在选项卡 2 上操作数据时，选项卡 2 应该检索更新的数据并在选项卡 2 上显示新数据。但是，现在，更新的数据显示在选项卡 1 上，并且从不反映在选项卡 2 上。有什么办法告诉更新的数据应该显示在哪个选项卡上？我一直在寻找一种方法，但到目前为止还没有运气。我对 javascript 和 jquery 很陌生。请帮忙。非常感谢。

编辑：我的代码是这样的。它就像在官方网站上显示的一样简单。

```
$(function() {
        $( "#tabs" ).tabs();
    });
    </script>

<div id="tabs">
    <ul>
        <li><a href="abc.php">test1</a></li>
        <li><a href="xyz.php">test2</a></li>
    </ul> 
```

编辑：我发现了错误。它不在选项卡中，而是在 iframe 中。

# html - HTML/CSS 在 <= IE7 中不起作用

> ID：12130920
> 
> 赞同：-1
> 
> 时间：2012-08-26T14:29:10.440
> 
> 标签：html, css, internet-explorer

我有以下布局，可以在最新的 Chrome 以及 IE8 和 IE9 中正常工作。出于某种原因，它在低于 IE8 的任何环境中都无法正常工作：

[http://oshirowanen.x10.mx/](http://oshirowanen.x10.mx/)

出于某种原因，在 IE8 以下的 IE 版本中，页脚更大。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:35:43.560

`clear: both;`从#footer 中删除并在之前`<div style="clear:both;"></div>`添加`<div id="footer">`

这只是 IE 魔法。

# java - 按钮的返回方法不起作用

> ID：12130923
> 
> 赞同：0
> 
> 时间：2012-08-26T14:29:40.007
> 
> 标签：java, netbeans

stackoverflow 上的某个人帮助我处理了这段代码，所以我可以在一个方法中使用它来返回我点击的按钮......现在 netbeans 没有显示任何冲突的代码，但是当我运行它时，它会给出错误

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public final class CharSearch extends Box{
int i =0;
int error = 0;
static JPanel panel;
String original = "Dinosaur";
JLabel label = new JLabel();
String secret = new String(new char[original.length()]).replace('\0', '-');

public CharSearch(){

super(BoxLayout.Y_AXIS);
    for(char i = 'A'; i <= 'Z'; i++){
        String buttonText = new Character(i).toString();
        JButton button = getButton(buttonText);
        add(button);
    }
}

public JButton getButton(final String text){
    final JButton button = new JButton(text);
    button.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e) {
            JOptionPane.showMessageDialog(null, "You have clicked: "+text);
            //If you want to do something with the button:
            button.setText("Clicked"); // (can access button because it's marked as final)
        }
    });
    return button;
}

public static void main(String[] args){
    EventQueue.invokeLater(new Runnable(){
        public void run(){
           JFrame frame=new JFrame();
            frame.add(panel);
            frame.pack();
            frame.setVisible(true);
        }
    });
}
} 
```

当我运行程序时出现此错误

![在此处输入图像描述](../Images/480f003abfbadf0075e5394f4cef380b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:35:17.413

很明显，您永远不会初始化静态属性面板：

```
static JPanel panel; 
```

所以在这部分代码中生成了NPE：

```
public static void main(String[] args){
    EventQueue.invokeLater(new Runnable(){
        public void run(){
           JFrame frame=new JFrame();
            frame.add(panel); // <--------------- NullPointer to panel
            frame.pack();
            frame.setVisible(true);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:35:22.240

您已`panel`声明但从未实例化：

```
static JPanel panel; 
```

所以当你去添加它时：

```
JFrame frame = new JFrame();
frame.add(panel); 
```

它抛出一个 NPE。

# c# - 紧凑框架 C#：listView 子项

> ID：12130924
> 
> 赞同：2
> 
> 时间：2012-08-26T14:29:40.570
> 
> 标签：c#, windows-mobile, compact-framework, windows-ce

我必须在 listview 中更改 Listview Subitem 的前景色。

我正在使用 WM6 C#，你能帮帮我吗？Hw 可以单独更改子项的颜色吗？

请帮我...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:57:29.720

唯一的方法是自定义绘制项目。 [Christian Helle 在这里有一个例子](http://christian-helle.blogspot.com/2009/10/listview-custom-drawing-in-netcf.html)（在这里发帖太长了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:34:39.893

我想在我的应用程序中使用类似的东西，但移动屏幕很小。设置整个[ListViewItem](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem%28v=vs.80%29.aspx)的[BackColor](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.backcolor%28v=vs.80%29.aspx)属性效果更好：

```
private void ChangeLviColor(ListViewItem lvi, Color color) {
  if (lvi.BackColor != color) {
    lvi.BackColor = color;
  }
} 
```

仅供参考：上面的两个链接都将带您到一些很棒的示例代码。

需要特别注意的是，请注意以下注释：*“如果您想对一个项目的所有子项目使用相同的背景颜色，请将[UseItemStyleForSubItems](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.useitemstyleforsubitems%28v=vs.80%29.aspx)属性设置为 true。这将导致为项目指定的颜色和字体用于所有项目子项文本。”*

# perl - Cron perl 脚本不会运行

> ID：12130926
> 
> 赞同：2
> 
> 时间：2012-08-26T14:29:48.007
> 
> 标签：perl, cron, ubuntu-12.04

我正在尝试使用 cron 在我的 Ubuntu 服务器上运行 perl 脚本。我有 3 个 perl 脚本：

*   **works.pl**（从终端工作。作为 cron 作业工作）
*   **failed.pl**（从终端工作。作为 cron 作业失败）
*   **functions.pl**（我所有的共享函数都存储在这里）

我能想到的'works.pl'和'fails.pl'之间的唯一区别是'fails.pl'使用引用'functions.pl'的**require（）语句。**“Fails.pl”不引用“functions.pl”。

**额外信息**

*   我所有的 perl 脚本都位于同一个文件夹中，该文件夹位于我的公用文件夹之外。
*   我所有的 perl 脚本都具有相同的权限 (740)。

有任何想法吗？我的用户级别是新手顺便说一句:-)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T14:34:32.843

`require`尝试在`@INC`数组中列出的目录之一中查找脚本。该数组通常包含当前目录`.`. 因此，如果您的当前目录是`functions.pl`位于其中的目录，那么运行`fails.pl`应该可以工作。

有两种方法可以实现：首先，在运行脚本之前更改目录，例如（cron条目示例）

```
5 12 * * * cd /home/user/path/to/script ; ./fails.pl 
```

其次，告诉 Perl 在编译时在哪里可以找到你的脚本，方法是把它放在顶部附近`fails.pl`：

```
BEGIN {
  unshift @INC, "/home/user/path/to/script";
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-22T04:34:24.563

莫里茨的回答是伟大而真实的，但我`@INC`的已经正确设置了；但是，我的情况不同。我的 perl 程序将在 CLI 上运行并且 cron 正在*运行*它，但它会默默地失败。

事实证明，我有：

```
my $width = `tput cols`; # breaks silently if run by CRON 
```

在我的脚本中某处仅适用于终端。我将其更改为：

```
my $width = 160; # cron likes this 
```

# asp.net - 显示 asp.net 文件夹帮助中的文件

> ID：12130931
> 
> 赞同：0
> 
> 时间：2012-08-26T14:30:20.833
> 
> 标签：asp.net, file-io

我有一个脚本，显示文件夹中的一些文件。

后面的代码

```
Sub fileinfo()
    Dim objDI As New System.IO.DirectoryInfo(Server.MapPath("upload/files/"))
    Dim allFile As New ArrayList()
    allFile.AddRange(objDI.GetFiles("*.png"))
    allFile.AddRange(objDI.GetFiles("*.jpg"))
    allFile.AddRange(objDI.GetFiles("*.bmp"))
    allFile.AddRange(objDI.GetFiles("*.gif"))
    allFile.AddRange(objDI.GetFiles("*.pdf"))
    allFile.AddRange(objDI.GetFiles("*.doc"))
    allFile.AddRange(objDI.GetFiles("*.docx"))

    Me.showfiles.DataSource = allFile
    Me.showfiles.DataBind()
End Sub 
```

主要代码

```
<ul class="thumbnails">
   <asp:DataList ID="showfiles" runat="server" RepeatColumns="6" CellPadding="10" RepeatLayout="flow">
         <ItemTemplate>
               <li class="span2"><a class="thumbnail" href="#"><asp:ImageButton ID="folderfiles" runat="server" ImageUrl='<%# string.Format("upload/files/{0}", DataBinder.Eval(Container.DataItem,"Name")) %>' ToolTip='<%# Bind("Name") %>' height="82" width="119" /></a></li>
         </ItemTemplate>
  </asp:DataList> 
```

适用于图像，但如果我添加像 pdf 文件这样的文档，我会得到这个。 [http://i.imgur.com/vPVvb.png](http://i.imgur.com/vPVvb.png)

然后它添加文本框，我如何添加 if statsment 或可以添加的内容：

pdficon.jpg 用于 .pdf 文件

.doc 文件的 docicon.jpg

zipicon.jpg 用于 .zip 文件

因此，如果文件是图像，那么它就像现在一样工作，而当文件是 pdf 或 doc 文件时，它会使用图标图像并显示它！？

.....编辑……编辑……编辑…………编辑…………编辑…………编辑

感谢它的作品 [http://i.imgur.com/6S4k7.png](http://i.imgur.com/6S4k7.png)

但是当我单击其中一个文件时，我得到了错误页面，没有错误号，而是带有文本。

.......... <%@ Page EnableEventValidation="true" %> ClientScriptManager.RegisterForEventValidation .....

我无法下载/查看图像/pdf 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:39:58.487

您可以像这样实现一个返回您的图像 url 的方法：

```
Private Function getImageUrl(filename As String) As String

    Select Case Path.GetExtension(filename)
        Case "pdf"
            Return "pdficon.jpg"
        Case "doc"
            Return "docicon.jpg"
        Case "zip"
            Return "zipicon.jpg"
    End Select

    Return String.Format("upload/files/{0}", filename)
End Function 
```

并在您的标记中使用它：

…… `ImageUrl='<%# getImageUrl(DataBinder.Eval(Container.DataItem,"Name")) %>'`_

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:41:47.783

在不同的集合中提取这些不同的文件类型并分别处理它们会更干净吗（即在带有特定缩略图的单独显示循环中）？

或者使用字典而不是列表，这样您就可以在决定显示哪个图像时存储文件类型和查询。

# android - 使用 Android 应用程序启动

> ID：12130933
> 
> 赞同：0
> 
> 时间：2012-08-26T14:30:33.520
> 
> 标签：android, boot

> **可能重复：**
> [手机启动时自动启动应用程序](https://stackoverflow.com/questions/3618114/autostart-application-while-phone-boots-up)

这似乎是一个相当简单的问题，但我一直无法找到答案。

我一直在为我的业务寻找平板电脑，但是，我希望它们直接启动到应用程序。

如果我说得不对，我的意思是，每次我打开设备时，我都希望它直接加载到“愤怒的小鸟”（或我开发的应用程序）。这可能吗？如果可以，是否广为人知？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T15:43:39.550

`HOME`通过将类别添加到您的活动中，使您的应用成为主屏幕`<intent-filter>`：

```
<intent-filter>
 <action android:name="android.intent.action.MAIN" />
 <category android:name="android.intent.category.HOME" />
 <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:33:12.833

使用 BOOT_COMPLETED Reciever 并在里面启动你的 Activity

编辑：使用如下代码

```
public class MyBroadcastreceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Intent startIntent = new Intent(context, MyActivity.class);
        context.startActivity(startIntent);
    }
} 
```

在你的宣言中

```
<receiver android:name="com.example.MyBroadcastReceiver">  
    <intent-filter>  
        <action android:name="android.intent.action.BOOT_COMPLETED" />  
    </intent-filter>  
</receiver> 
```

# .net - 数据集绑定到 WebGrid

> ID：12130937
> 
> 赞同：-1
> 
> 时间：2012-08-26T14:30:54.920
> 
> 标签：.net, asp.net-mvc-3, data-binding

在 ASP.NET MVC3 razor 中，我们不能像 ASP.NET 那样直接将数据集绑定到 WebGrid。我们总是需要使用模型吗？是否需要先将我的数据表转换为列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:58:48.610

在 ASP.NET MVC 中，数据通过使用从控制器传递到视图`Models`，这里有几个链接可以帮助您开始使用 webgrid。

[Webgrid 最佳初学者指南](http://www.mikesdotnetting.com/Article/154/Looking-At-The-WebMatrix-WebGrid)

[MSDN 示例](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)

[更多示例](http://yassershaikh.com/introduction-to-webgrid-in-mvc-3-razor-with-code-samples/)

这被认为是使用 MVC 时的最佳实践，但是您仍然可以在没有模型的情况下使用 webgrid，

这是 Mike 网站上的一个小例子，他没有使用模型。但强烈建议只使用模型！！！

```
@{
    Layout = "~/Shared/_Layout.cshtml";
    var db = Database.Open("Books");
    var sql = "Select BookId, Title, ISBN, Description, FirstName, LastName, Category, DatePublished  " +  
               "From Books Inner Join Authors on Books.AuthorId = Authors.AuthorId " + 
               "Inner Join Categories on Books.CategoryId = Categories.CategoryId";
    var books = db.Query(sql);
    var columns = new []{"BookId", "Title", "ISBN", "Category"};
    var grid = new WebGrid(books, columnNames : columns);
}
<p>The time is @DateTime.Now </p>
<div id="grid">
    @grid.GetHtml()
</div> 
```

# php - 我如何在 symfony 中包含一个永恒的库，例如 facebook sdk？

> ID：12130938
> 
> 赞同：0
> 
> 时间：2012-08-26T14:30:55.033
> 
> 标签：php, symfony1

我想在 symfony 中使用 facebook php sdk。我谷歌，发现我需要先通过 autoload.php ..

自动加载.php

```
$loader->add('facebook',__DIR__.'/../vendor/facebook/lib/facebook/facebooks.php');
$loader->register(); 
```

这里的 $loader 是 ClassLoader 类的一个实例

我将 facebook sdk 修改为具有 vendor/facebook/lib/facebook/facebooks.php 的文件夹结构

facebooks.php

```
require 'src/facebook.php';
class facebooks extends facebook{

} 
```

我希望能够在我的控制器中使用 facebook 实例。这是我尝试过的所有方法，但它仍然不起作用..

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-26T14:33:36.670

有[FOSFacebookBundle](https://github.com/FriendsOfSymfony/FOSFacebookBundle)供您使用，请查看**安装**部分。

# java - 泛型类类型中的参数化方法

> ID：12130940
> 
> 赞同：5
> 
> 时间：2012-08-26T14:31:02.007
> 
> 标签：java, generics, parameterized

我有一个相当简单的问题。我无法通过搜索找到答案。

这两个代码片段有区别吗？有什么区别？

片段1：

```
public class BinaryTree<T extends Comparable<? super T>> {
   ...
   public <E extends T> void add(E value) {
      ...
   }

   public <E extends T> void add(E value, Node node) {
      ...
   }
   ...
} 
```

片段2：

```
public class BinaryTree<T extends Comparable<? super T>> {
   ...
   public void add(T value) {
      ...
   }

   public void add(T value, Node node) {
      ...
   }
   ...
} 
```

Fragment1 明确指定参数*值*必须是*T类型或**T*类型的子类型。

Fragment2 指定参数*值*必须是*T*类型。但是根据我的知识和经验，我认为我也可以在这里提供*T*的子类型。与fragment1相同。

我查看了这两个片段的反汇编字节码。确实有区别：

```
<   public <E extends T> void add(E);
---
>   public void add(T); 
```

那只是反映了源代码...

我只是不明白意思。而且我也找不到显示差异的示例应用程序。

感谢您的评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T14:53:08.977

在这种情况下没有区别。让我们以 a 为例`BinaryTree<Number>`并尝试添加一个`Integer`：

```
BinaryTree<Number> numTree = new BinaryTree<>();
Integer i = 1;
numTree.add(i); 
```

对于片段 1，`E`可能评估为`Integer`，但在这种情况下这是多余的。`Integer` *是 a* `Number`，您也可以指定`Number`for `E`：

```
numTree.<Number>add(i); 
```

出于这个原因，第二个片段与第一个片段没有什么不同，并且不会因为不声明不必要的类型参数而造成混淆。

* * *

在某些情况下，附加类型参数会很有用。想象一下，出于某种原因，您想要返回传入的值：

```
public <E extends T> E add(E value) {
   ...
   return value;
}

public <E extends T> E add(E value, Node node) {
   ...
   return value;
} 
```

现在这对调用者很有用：

```
Integer i2 = numTree.add(i); 
```

使用第二个片段是不可能的，并且即使您传入了`numTree.add`a 也只能返回 a 。`Number``Integer`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:56:20.720

不，该方法的两种变体之间没有区别`add()`。Java 的方法参数已经在接受的类型上建立了一个*上限*`extends`，这与使用类型变量的形式完成的约束相同`<E extends T>`。

您的类型变量不会添加任何新信息，也不会添加任何额外的约束。`T` *传递类型或任何扩展`T`*类型的参数已经是合法的。您的类型变量`<E extends T>`确实提供了一种再次引用实际参数类型的方法 - 例如，如果您想确保第二个方法参数与第一个方法参数的类型相同 - 但在您的情况下，您没有使用的`E`。

# c++ - 将加法运算符重载为非成员函数会更好吗？

> ID：12130955
> 
> 赞同：2
> 
> 时间：2012-08-26T14:33:20.507
> 
> 标签：c++, oop, operator-overloading, addition

我有一个分数类如下。

```
class Fraction
{
  int num, den ;

  public:
   //member functions here
} ; 
```

我在某本书中读到，我认为“有效的 C++”最好将加法运算符重载为非成员函数。给出的原因是它允许交换加法。这是我的加法运算符重载函数的原型。

```
Fraction operator + (const Fraction &obj, const int add_int) ; 
```

在这里，当我调用它时，我必须这样做。

```
f1 + 2 ; 
```

但它不会以这种方式工作。

```
2 + f1 ; 
```

为此，我将不得不再次编写函数并更改其中的参数顺序。

我想知道是否有一种方法可以一次重载函数并执行交换加法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T14:38:08.790

你可以，但前提是你的类有一个来自你想要添加的类型的隐式构造函数，所以这会起作用：

```
class Fraction
{
    int num, den;

public:
    Fraction(int n) :num(n), den(1) {}

    // member functions here
};

Fraction operator+(Fraction lhs, Fraction rhs) { ... }

int main()
{
    Fraction f1(5);
    f1 = f1 + 5;
    f1 = 5 + f1;
} 
```

当然，这允许您实际上没有提到您想要的用法，即添加两个`Fraction`对象的能力。

```
Fraction f1(1), f2(2);
Fraction f3 = f1 + f2 
```

我无法想象你会想要禁止这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T14:38:58.383

做这些事情：

*   定义一个构造函数以启用从到的`Fraction(int)` 隐式转换。`int``Fraction`

*   定义`operator+=()`为成员函数。

*   然后定义`operator+()` *为* `operator+=()`：

    ```
    Fraction operator+(Fraction f1, Fraction const & f2)
    {
        f1 += f2;  //call `operator+=` member function
        return f1;
    } 
    ```

    请注意，这`f1`是按值传递的。所以你可以添加`f2`它，然后返回它。

有关详细答案，请参阅我对类似问题的回答：

*   [具有返回值的函数 (C++)](https://stackoverflow.com/questions/7376554/functions-with-return-values-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T14:40:10.967

不，没有语法结构，因为 + 运算符在 C++ 中的定义是不可交换的。这意味着您必须定义第二个版本，但是在实现中使用交换参数调用第一个版本是合理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T14:51:18.460

You need either an implicit conversion or else a second operator definition, but it's completely possible to make the second definition reusable, so your code would look like this:

```
class Fraction : public commutative<Fraction>
{
  int num, den ;

  friend Fraction operator+ (int add_int, Fraction obj);
public:
   //member functions here
};
Fraction operator+ (int add_int, Fraction obj); 
```

Let me know if you want sample code for the `commutative<T>` class template.

# php - 如何删除 使用 php 来自 HTML 的标记及其内容

> ID：12130966
> 
> 赞同：8
> 
> 时间：2012-08-26T14:34:34.043
> 
> 标签：php, html

以下是我需要从中删除`<p>`标签的文本

```
<p> Addiction, stress and subjective wellbeing</p> 
<p> The need and significance of traditional shop lot pavements in the context of town conservation in Malaysia</p> 
<p> The role of wage and benefit in engaging employee commitment</p> 
```

我试过这个

```
$title= preg_replace('#<p>(.*?)</p>#', '', $title['result']);** 
```

但仍然在获取`<p>`标签，有什么想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-26T14:36:50.970

您必须使用此正则表达式来捕获`<p>`标记及其所有内容：

```
'/<p\b[^>]*>(.*?)<\/p>/i' 
```

捕获和删除`<p>`标签及其所有内容的工作示例：

```
$title = "<div>Text to keep<p class='classExample'>Text to remove</p></div>";
$result = preg_replace('/<p\b[^>]*>(.*?)<\/p>/i', '', $title);
echo $result; 
```

### [请在键盘上查看现场演示](http://codepad.org/dEpWYXcX)

如果您想使用正则表达式来解析 HTML - 那么您将无法做到这一点。

在此处阅读有关您的问题的更多信息：您[如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php/3577662#3577662)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-26T14:40:13.873

只是为了删除 p 标签，你可以这样做

```
$text=str_ireplace('<p>','',$text);
$text=str_ireplace('</p>','',$text); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-19T08:43:36.830

尝试：

如果您只想删除`<p>`标签

```
$html = "
<p> Addiction, stress and subjective wellbeing</p> 
<p> The need and significance of traditional shop lot pavements town</p> 
<p> The role of wage and benefit in engaging employee commitment</p>
";

echo strip_tags($html); 
```

如果要删除`<p>`标签及其`content`

```
$html = preg_replace('#\<p>[{\w},\s\d"]+\</p>#', "", $html); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-12T18:36:36.020

```
echo "<div id=\"main_content\">" . strip_tags($row[main_content]) . "</div>"; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-26T14:39:31.440

如果您只需要剥离*所有*标记，请使用[strip_tags()](http://php.net/manual/en/function.strip-tags.php)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-10T13:43:26.420

```
$text = '<p>Test paragraph.</p> <a href="#fragment">Other text</a>';
echo strip_tags($text);
echo "\n";

// Allow p and a tag
echo strip_tags($text, '<p><a>'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-28T13:13:51.247

此代码删除一个 p-tag：

```
function parse($html) {
    $dom = new DOMDocument();
    @$dom->loadHTML($html);
    $ps = $dom->getElementsByTagName('p');
    //die('<pre>'.print_r($ps,1).'</pre>');
    if ($ps->length === 1){
        $p = $ps->item(0);
        return $p->nodeValue;
    } else {
        return '';
    }
} 
```

# sql - row_number() 分析函数的奇怪行为

> ID：12130971
> 
> 赞同：2
> 
> 时间：2012-08-26T14:35:23.857
> 
> 标签：sql, oracle, plsql

希望有人可以在这里为我指明正确的方向。

请参阅下面的查询。

```
SELECT day_id,month_id,time_id,
row_number() over (partition BY month_id order by day_id ) rn
FROM minute_bars_fact order by month_id, day_Id, time_id 
```

产生输出：

```
DAY_ID      MONTH_ID    Time_id rn
02-JAN-11   JAN-2011    1080    1
02-JAN-11   JAN-2011    1081    2
02-JAN-11   JAN-2011    1082    3
02-JAN-11   JAN-2011    1083    4
02-JAN-11   JAN-2011    1084    5
02-JAN-11   JAN-2011    1085    6
02-JAN-11   JAN-2011    1086    7
02-JAN-11   JAN-2011    1087    8 
```

我在这里的期望是 rn 只会在每个新的一天增加。显然情况并非如此。我在这里做错了吗？

编辑：

日子并不总是一样的。

```
02-JAN-11   JAN-2011    1436    357
02-JAN-11   JAN-2011    1437    358
02-JAN-11   JAN-2011    1438    359
02-JAN-11   JAN-2011    1439    360
03-JAN-11   JAN-2011    0   361
03-JAN-11   JAN-2011    1   362
03-JAN-11   JAN-2011    2   363
03-JAN-11   JAN-2011    3   364 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T15:00:43.060

> 我在这里的期望是 rn 只会在每个新的一天增加。

不，这是不正确的。您将需要使用`RANK`或`DENSE_RANK`实现此行为。不是`ROW_NUMBER`

# php - 为什么我的表单提交得太早了？

> ID：12130972
> 
> 赞同：0
> 
> 时间：2012-08-26T14:35:27.310
> 
> 标签：php, mysql

我在一个页面上有一个表单，该页面上的提交按钮将用户引导到表单的下一页。我正在尝试对其进行设置，以便在单击表单 2 上的提交按钮并填写所有表单时，将表单 1 中的信息与表单 2 的信息一起提交，但是，第一个表单的数据正在提交给我进行表格 2 时的数据库。任何想法为什么会这样？以及任何解决方案的想法？

另外，我从第一个表单中收到错误“未定义的索引 GET”，我很难理解为什么？

提前致谢！

**表格 1 (parent.php)**

```
<?php session_start(); 
$_SESSION['fName']=$GET['fName'];
$_SESSION['sName']=$GET['sName'];
$_SESSION['email']=$GET['email'];
$_SESSION['address']=$GET['address'];

?>

<!DOCTYPE html PUBLIC “-//W3C//DTD XHTML 1.0 Transitional//EN”     “http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd”&gt;
<html xmlns=”http://www.w3.org/1999/xhtml”&gt;
<head>
<meta http-equiv=”Content-Type” content=”text/html; charset=iso-8859-1″ />
<title>table2</title>
</head>
<h1>Is this in xamppfiles and htdocs?</h1>

<form action="child2.php" method="post" class="validate">
<div>
<input class="tb" type="text" name="fName" placeholder="first name" id="fName" value=" <?php $fName ?>" required/><br/>
 <br/>
  <input class="tb" type="text" name="sName" placeholder="surname" id="sName" value="<?php $sName ?>" required/><br/>
  <br/>
  <input class="tb" type="email" name="email" required placeholder="email address" id="email" value="<?php $email ?>" required/>
  <br/>
  <input class="tb" type="address" name="address" placeholder="address" value="<?php $address ?>" id="address" />
  <br/>

  <input id="submit" name="submit" type="submit" value="Next">
  </div>
  </form> 

</body>
</html> 
```

**表格 2 (child2.php)**

```
 <?php
  session_start();
  include("connect.php");
 ?>
<!DOCTYPE html PUBLIC “-//W3C//DTD XHTML 1.0 Transitional//EN”   “http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd”&gt;
<html xmlns=”http://www.w3.org/1999/xhtml”&gt;
<head>
<meta http-equiv=”Content-Type” content=”text/html; charset=iso-8859-1″ />

<title>table2</title>
</head>

<body>

 <?php
function renderForm($fName, $sName, $email, $address){ 
?>

<form action="" method="post" class="validate">

<label class="label">first name</label><input class="tb" type="text" id="fName"     name="fName" value="<?php if (isset($fName)) { echo $fName = $_SESSION['fName'];} else {    if(!isset($fName)) { echo ""; }}?>"/> 
</br>
<label class="label">surname</label><input class="tb" type="text" id="sName"  name="sName" value="<?php if (isset($sName)) { echo $sName = $_SESSION['sName'];} else {  if(!isset($sName)) { echo ""; }}?>"/>
</br>
<label class="label">email</label><input class="tb" type="email" id="email"  name="email" value="<?php if (isset($email)) { echo $email = $_SESSION['email'];} else { if(!isset($email)) { echo ""; }}?>""/>
</br>
<label class="label">address</label><input class="tb" type="text" id="address"  name="address" value="<?php if (isset($address)) { echo $address = $_SESSION['address'];}    else { if(!isset($address)) { echo ""; }}?>""/>
</br>

<input id="submit" type="submit" value="Submit"/>
</form>

<?php
}

// check if the form has been submitted. If it has, start to process the form and save it to the database
  if (isset($_POST['submit']))
 { 
 // get form data, making sure it is valid
 $fName = mysql_real_escape_string(htmlspecialchars($_POST['fName']));
 $sName = mysql_real_escape_string(htmlspecialchars($_POST['sName']));
 $email = mysql_real_escape_string(htmlspecialchars($_POST['email']));
 $address = mysql_real_escape_string(htmlspecialchars($_POST['address']));

 // check to make sure both fields are entered
 if ($fName == '' || $sName == '' || $email == '')
 {
 // generate error message
 $error = 'ERROR: Please fill in all required fields!';

 // if either field is blank, display the form again
 renderForm($fName, $sName, $email, $address, $error);
 }
 else
 {
 // save the data to the database
 mysql_query("INSERT formtest SET fName='$fName', sName='$sName',email='$email', address='$address'")
 or die(mysql_error()); 

 // once saved, redirect back to the view page
 header("Location: child2.php"); 
 }
 }
 else
 // if the form hasn't been submitted, display the form
 {
 renderForm('','','','','');
 }

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:50:56.460

您的 parent.php 的操作字段是 child2.php 。此外，您正在检查

```
if (isset($_POST['submit'])) 
```

这是由您的第一页设置的，因此，它进入循环并将数据插入到您的数据库中。这可以通过将其放在您的父文件中来解决

```
 <input id="submit" name="submitINIT" type="submit" value="Next"> 
```

一个可能的解决方案是，您提取第一个表单的值并将其存储在一些会话变量中，最后在最终提交时，您可以使用这些值进行插入。

在您的 child2.php 中，执行此操作

```
 if (isset($_POST['submitINIT'])){
   // store all the available values in some session variables
$_SESSION['value1']=$POST['fName'];
$_SESSION['value2']=$POST['sName'];
$_SESSION['value3']=$POST['email'];
$_SESSION['value4']=$POST['address'];
}

 if (isset($_POST['submit'])){
   // proceed after final submission
} 
```

此外，使用此将第二个文件的操作更改为自身

```
<form action="child2.php" method="post" class="validate"> 
```

另外，在您的 child2.php 中进行此修改

```
<input id="submit" name="submit" type="submit" value="Submit"/> 
```

# ios - 推送视图控制器不显示从情节提要添加的元素

> ID：12130981
> 
> 赞同：2
> 
> 时间：2012-08-26T14:37:02.233
> 
> 标签：ios, xcode, pushviewcontroller

好的，到目前为止，我的故事板中有两个视图控制器。一个带有“登录”元素，另一个是“用户的家”之类的东西。我打算做以下事情：当用户点击登录时，有一些处理，然后它应该显示在用户的主屏幕上..

当我通过情节提要执行此操作时，我的意思是 = 控制将“登录”按钮拖动到用户的主视图，它工作正常。但我不能使用它，因为我必须处理登录数据。同时它还显示了一些动画。所以，我必须以编程方式进行这种转变。我在登录按钮的 IBAction :: 中编写了以下代码

```
HomeViewController *homeView = [[HomeViewController alloc] init];

[self presentViewController:homeView animated:YES completion:NULL] ; 
```

现在，这会将用户带到预期的视图。但是，主视图中的元素（例如标签，导航栏没有显示。这就是我担心的问题。（理论上，我可以以编程方式构建整个视图，但我认为这不是正确的方法，是吗？ ? 我想充分利用情节提要功能，即在情节提要中设计最大的 UI 并从后端使用它们，您希望它们如何工作。）

我该怎么做 ？

干杯。

PS：我打算添加更多视图控制器，所以目前我没有想到导航控制器。不确定，如果我应该使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T14:41:09.950

使用您应该使用的情节提要：

```
UIViewController *homeView = [self.storyboard instantiateViewControllerWithIdentifier:@"someID"];
[self presentViewController:homeView animated:YES completion:NULL] ; 
```

然后将 ID 设置为情节提要中的视图控制器，如下所示：

![在此处输入图像描述](../Images/274db45b07d5613c513892598e10ff9d.png)

此外，如果您愿意，完全用代码设计 UI 绝对没有错。我个人更喜欢它。它为您提供比界面生成器更大的灵活性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T15:02:22.193

除了 NSPostWhenIdle 的建议之外`instantiateViewControllerWithIdentifier`，您还可以在两个视图控制器之间定义一个 segue（不是在按钮和第二个控制器之间，而是在两个视图控制器之间）：

![控制器之间的 Segue](../Images/8fbb962d4ed0230f017f010ca640b0c9.png)

然后给 segue 一个唯一标识符，然后让你的`IBAction`方法执行`performSegueWithIdentifier`. 这样，您的故事板将继续以视觉方式表示您的视图控制器之间的各种关系。

# sql - 如何扣除时间条件的金额

> ID：12130983
> 
> 赞同：1
> 
> 时间：2012-08-26T14:37:15.487
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

表格1

```
ID Salary (Monthly) perday (salary)

001 3000 100
002 1500 50
003 4500 150 
```

`Salary`,`perday`列是数据类型`float`

表2

```
ID Date Latetime (HH:mm)

001 01/02/2012 00:15 
001 02/02/2012 00:10
001 03/02/2012 00:45 
001 04/02/2012 00:29
001 05/02/2012 01:00

002 11/03/2012 00:02 
002 12/03/2012 00:20
002 13/03/2012 00:29
002 14/03/2012 01:00

002 10/03/2012 01:30 
002 10/03/2012 02:00 
```

我想根据迟到的计数扣除工资金额。

健康）状况

01 到 29 分钟延迟状态

*   如果用户第一次迟到不扣除
*   如果用户第二次迟到，每天扣除 10% 的工资
*   如果用户第三次迟到，则每天扣除 25% 的工资
*   如果用户第 4 次迟到或超过 50% 的每日工资扣除

迟到 30 分钟到 1 小时

*   如果用户第一次迟到不扣除
*   如果用户第二次迟到，将扣除 50% 的每日工资
*   如果用户第三次迟到 100% 扣除每日工资
*   如果用户第 4 次迟到及以上，则扣除 150% 的日薪

表 2 的预期输出

```
 4th onwards
ID Ist 2nd 3rd  days Amount Deducted 

001 0 10 50  2 250 310
002 0 10 10 1 100   120 
```

输出说明

用户 001 迟到 5 次作为表 2 中的 Count(latetime)

*   第一次迟到 00:15 分钟 - 不扣分
*   第二次迟到 00:10 分钟，所以迟到时间在 01 到 29 之间，所以每天扣除 10% 的工资 第一次（01 到 29）
*   第三次迟到 00:45 分钟，所以迟到时间在 30 到 01 小时之间，所以每天扣除 50% 的工资 第一次（30 到 01）
*   第 4 次迟到 00:29 分钟，所以迟到时间在 01 到 29 之间，所以每天扣除 50% 的工资 第 2 次（01 到 29）
*   第 5 次迟到 01:00 分钟，所以迟到在 30 到 01 小时之间，所以 150 % 的每日工资扣除第 1 次（30 到 01）

如何针对上述条件创建查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T20:23:13.803

```
--create and populate penalty rules
create table table4( latetype int null, nthtime int null, mulfactor float null)
insert into table4 values (1,1,0) insert into table4 values (1,2,0.1)
insert into table4 values (1,3,0.25) insert into table4 values (1,4,0.5)
insert into table4 values (2,1,0) insert into table4 values (2,2,0.5)
insert into table4 values (2,3,1.0) insert into table4 values (2,4,1.5)
--create third table to populate the nthtime and latetype for table2
select x.id, date,
      (select count(*) from table2 where id=x.id and date<=x.date) as nthtime, 
      case when x.latetime<'00:30' then 1 else 2 end as latetype
into table3
from table2 x join table1 on table1.id = x.id
--select the deduction amounth per id 
select table1.id, 
       sum(table1.perday* 
       isnull(mulfactor, case when latetype = 1 then .5 else 1.5 end) )as deduction
from table3 a 
left join table4 b on a.latetype=b.latetype and a.nthtime=b.nthtime 
join table1 on table3.id = table1.id
group by table1.id 
```

# css - 使用 capybara 检查 CSS 是否已更新

> ID：12130984
> 
> 赞同：1
> 
> 时间：2012-08-26T14:37:22.547
> 
> 标签：css, ruby, selenium, capybara

我目前正在编写一个基于用户输入更新其页面 CSS 的网络应用程序。我一切正常，但我无法让我的自动化测试确认 CSS 确实已更新。

基本上，我只是想验证文档中某个`<style>`标签的内容`<head>`是否已更新为某个值。我正在使用 capybara（带有 selenium 驱动程序）进行测试，代码如下：

```
styles = page.all('style')
styles.length.should == 1
styles[0].text.should == style 
```

这一切都按预期工作，直到最后一行，因为它似乎`styles[0].text`总是“”而失败。我也试过`.value`，但总是这样`nil`。我很确定 CSS 实际上正在更新，因为我可以在运行测试的 Firefox 窗口中看到更改。

那么，有没有办法`<style>`使用 capybara 获取标签的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:44:51.170

似乎 Capybara（至少使用 Selenium，我没有尝试任何其他驱动程序）不会向您展示这一点，我想是因为样式内容包含在 HTML 注释中，因此它会被忽略，例如：

```
<STYLE type="text/css">
    <!--
    .newfont { color:red; font-style:italic }
    -->
</STYLE> 
```

但是，您确实可以使用 访问页面的源代码`page.source`，因此您可以使用它来获取样式内容。源代码只是一个大字符串，因此挖掘它的一种方法是使用 Nokogiri 解析它（Capybara 需要它，所以你已经拥有它了）：

```
page = Nokogiri::HTML.parse(page.source)
page.css('style').first.text

# => "\n&lt;!--\n.newfont { color:red; font-style:italic }\n--&gt;\n" 
```

如果您反对可定制的样式，并且无论如何您都在使用 Selenium，那么另一种解决方案可能涉及使用 Javascript 来确定元素的计算样式，似乎[不乏](https://www.google.co.uk/search?q=javascript+calculated+style)有关这样做的信息。您可以使用 Capybara 的`page.evaluate_script`方法调用一段 Javascript，它会告诉您特定元素的实际外观，这可能比比较 CSS 文本（例如，如果它被应用程序缩小）更可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:58:32.950

```
page.should have_css ".selector", :text => "Some Text"
page.should have_css ".selector", :value => "Some Value"
page.should have_css ".selector", :count => 1 
```

或者

```
find('.selector').value
find('.selector:nth-child(1)').value 
```

有几种方法可以了解您正在尝试的内容。我会仔细查看[文档](http://rubydoc.info/github/jnicklas/capybara/#Finding)。

另外，需要注意的一件事是，如果您尝试在`javascript`事件发生后访问这些更改，则需要在 Selenium（或等效项）中运行它。或者你也可以尝试使用 Jasmine.js。

# javascript - 用于图形渲染的 Javascript 插件（树和节点）

> ID：12130985
> 
> 赞同：1
> 
> 时间：2012-08-26T14:37:51.300
> 
> 标签：javascript, graph, tree, rendering, d3.js

我正在寻找一个 Javascript API 来绘制这种图：[D3 graph](http://mbostock.github.com/d3/ex/force.html)

除了我不需要/想要“力”效应。静态的东西是可以的，它可以是生成的图像或一些 JS 渲染（我更喜欢这个）。

我浏览了很多谷歌结果都没有成功，而且我发现的每个基于 D3 的 JS 插件都是矫枉过正的。

数据将从 10 到 100 个节点，性能不是关键（尽管高度赞赏）。

谢谢 ！

编辑：一个完美的解决方案将接受 XML 作为数据输入，但我可以适应其他格式。另外，我需要尽可能“即插即用”的东西，我离掌握 JS/webdesign 还很远，这就是我不基于 D3.js 创建自己的渲染的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:46:53.247

用这个..

[http://thejit.org/static/v20/Jit/Examples/ForceDirected/example1.html](http://thejit.org/static/v20/Jit/Examples/ForceDirected/example1.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:48:44.000

您可以简单地删除您找到的示例的这一部分，它将变为静态：

```
 .call(force.drag); 
```

# android - 如何按字符串删除 sqlite 表行条目？

> ID：12130989
> 
> 赞同：3
> 
> 时间：2012-08-26T14:38:10.073
> 
> 标签：android, database, string, sqlite, exception

我是 Android 的菜鸟，我试图弄清楚如何使用字符串删除 sqlite 中的表行，而不是行号的 long 。我向表中添加数据没有问题，但是当我尝试删除相同的值时，我得到一个 SQL 异常，上面写着`SQLiteException: no such column 'my_entry': while compiling: DELETE FROM dbTABLE WHERE db_NAME = my_entry` 非常感谢任何洞察力。这是我的代码：

添加行条目的代码：

```
public long createEntry(String coin, String quantity, String value) {
    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, coin);
    cv.put(KEY_QUANTITY, quantity);
    cv.put(KEY_VALUE, value);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);
} 
```

删除行条目的代码：

```
public void deleteEntry(String coin) throws SQLException{
    ourDatabase.delete(DATABASE_TABLE, KEY_NAME + "=" + coin, null);
} 
```

整个数据库的代码：

```
public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "cointype_name";
public static final String KEY_QUANTITY = "cointype_quantity";
public static final String KEY_VALUE = "cointype_value";

private static final String DATABASE_NAME = "PortfolioDatabase";
private static final String DATABASE_TABLE = "cointypeTable";
private static final int DATABASE_VERSION = 1;

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper {

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAME + " TEXT NOT NULL, " +
                KEY_QUANTITY  + " TEXT NOT NULL, " +
                KEY_VALUE + " TEXT NOT NULL);"
        );  
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }       
}

public PortfolioDatabase(Context c){
    ourContext = c;
}

public PortfolioDatabase open() throws SQLException{
    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;
}

 public void close(){
     ourHelper.close();
 }

public long createEntry(String coin, String quantity, String value) {
    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, coin);
    cv.put(KEY_QUANTITY, quantity);
    cv.put(KEY_VALUE, value);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);
}

public String getData() {
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_VALUE };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iQuantity = c.getColumnIndex(KEY_QUANTITY);
    int iValue = c.getColumnIndex(KEY_VALUE);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + c.getString(iRow) + " " + c.getString(iName) + " " + c.getString(iQuantity) + " " + c.getString(iValue) + "\n";
    }

    return result;
}

public String getName(long l) throws SQLException{
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_VALUE};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + l, null, null, null, null);
    if (c != null){
        c.moveToFirst();
        String name = c.getString(1);
        return name;
    }
    return null;
}

public String getHotness(long l) throws SQLException{
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_VALUE };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + l, null, null, null, null);
    if (c != null){
        c.moveToFirst();
        String hotness = c.getString(2);
        return hotness;
    }
    return null;
}

public void updateEntry(String mCoin, String mQuantity, String mValue) throws SQLException {
    ContentValues cvUpdate = new ContentValues();
    cvUpdate.put(KEY_NAME, mCoin);
    cvUpdate.put(KEY_QUANTITY, mQuantity);
    cvUpdate.put(KEY_VALUE, mValue);
    ourDatabase.update(DATABASE_TABLE, cvUpdate, KEY_NAME + "=" + mCoin, null); 
}

public void deleteEntry(String coin) throws SQLException {
    ourDatabase.delete(DATABASE_TABLE, KEY_NAME + "=" + coin, null);
}
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T14:44:10.760

You should not use the string directly and if you do you need to wrap it in `'` since SQLite will consider it a column name otherwise.

The safest way to do it is

```
public void deleteEntry(String coin) throws SQLException{
    String[] whereArgs = new String[] { coin };
    ourDatabase.delete(DATABASE_TABLE, KEYNAME + "=?", whereArgs);
} 
```

The unsafe way is

```
ourDatabase.delete(DATABASE_TABLE, KEYNAME + "='" + coin + "'", null); 
```

and that will fail if `coin` contains a `'` so don't use it.

# objective-c - Core-Plot 无法在一页上绘制多个图形（iPad）

> ID：12130990
> 
> 赞同：0
> 
> 时间：2012-08-26T14:38:33.950
> 
> 标签：objective-c, ios, ipad, core-plot

我试图在一个屏幕上显示多个图表，但我无法让它工作。我试图达到一个点，在这个显示器上我有 3 x pieGraphs 和 1 x 散点图。

我尝试过：[无法同时显示两个 CorePlot 图表，](https://stackoverflow.com/questions/10544680/unable-to-have-two-coreplot-graphs-show-simultaneously)但无法解决此问题。我使用 Core-Plot 的示例应用程序作为代码设计的基础。当我尝试在我的代码中模拟该问题的解决方案时，我看不出有什么区别。

我能够显示第一个饼图：“matchPieChart”，但不能显示第二个饼图“questionsPieChart”。它看起来甚至不处理第二张图表。

在不考虑其他类似问题解决方案（上图）的情况下，结果是：

![没有建议的结果（当前）](../Images/736ca8192290517299065a4d43c63708.png)

右侧的图例是与左侧显示的饼图相关联的图例，我猜它与我尝试显示的第二个饼图相关联。它显示在应该显示第二个饼图的位置。

下面是代码执行，查看代码中的NSLog：

```
iPad_matchPieChartConfiguration
numberOfRecordsForPlot:
numberOfRecordsForPlot:
numberForPlot:
numberForPlot:
numberOfRecordsForPlot:
numberOfRecordsForPlot:
legendTitleForPieChart: matchPieChart
legendTitleForPieChart: matchPieChart
iPad_questionsPieChartConfiguration
legendTitleForPieChart: matchPieChart
legendTitleForPieChart: matchPieChart
legendTitleForPieChart: matchPieChart
legendTitleForPieChart: matchPieChart
dataLabelForPlot:
dataLabelForPlot: matchPieChart
dataLabelForPlot:
dataLabelForPlot: matchPieChart
legendTitleForPieChart: matchPieChart
legendTitleForPieChart: matchPieChart
legendTitleForPieChart: matchPieChart
legendTitleForPieChart: matchPieChart 
```

这是实际的代码：

```
-(void)iPad_matchPieChartConfiguration {
NSLog(@"iPad_matchPieChartConfiguration");

// Set titles
playerName_label.text                       = playerName;
myString                                    = [[NSString alloc]initWithFormat:@"Total number of Games played: %.0f", nrGamesPlayed]; 
title_Matches_label.text                    = myString;

//Create host view
matchChartView                              = [[CPTGraphHostingView alloc] initWithFrame:[[UIScreen mainScreen]bounds]];
[self.view addSubview:matchChartView];

matchPieGraph = [[CPTXYGraph alloc] initWithFrame:CGRectZero]; 
matchChartView.hostedGraph                  = matchPieGraph;
matchPieGraph.plotAreaFrame.masksToBorder   = NO;

matchPieGraph.paddingLeft                   = 10.0;
matchPieGraph.paddingTop                    = 120.0;
matchPieGraph.paddingRight                  = 350.0;
matchPieGraph.paddingBottom                 = 360.0;

matchPieGraph.axisSet                       = nil;

//====ADD MATCH PIE CHART====//
matchPiePlot                                = [[CPTPieChart alloc]init];
matchPiePlot.dataSource                     = self;
matchPiePlot.pieRadius                      = 100.0;
matchPiePlot.identifier                     = @"matchPieChart";
matchPiePlot.startAngle                     = M_PI_4;
matchPiePlot.sliceDirection                 = CPTPieDirectionCounterClockwise;
matchPiePlot.borderLineStyle                = [CPTLineStyle lineStyle];
matchPiePlot.labelOffset                    = 5.0;

matchPieGraph.titleTextStyle = whiteText;

[matchPieGraph addPlot:matchPiePlot];

// 1 - Get graph instance
CPTGraph *matchGraph                        = matchChartView.hostedGraph;
// 2 - Create legend
CPTLegend *theMatchLegend                   = [CPTLegend legendWithGraph:matchGraph];
// 3 - Configure legen
CPTMutableTextStyle *legendMatchTextStyle   = [CPTTextStyle textStyle];
legendMatchTextStyle.fontSize               = 12.0f;
legendMatchTextStyle.fontName               = @"Noteworthy-Bold";
legendMatchTextStyle.color                  = [CPTColor whiteColor];
theMatchLegend.numberOfColumns              = 2;
theMatchLegend.fill                         = nil; 
theMatchLegend.borderLineStyle              = nil;
theMatchLegend.cornerRadius                 = 5.0;
theMatchLegend.textStyle                    = legendMatchTextStyle;

// 4 - Add legend to graph
matchGraph.legend                           = theMatchLegend;     
matchGraph.legendAnchor                     = CPTRectAnchorRight;
matchGraph.legendDisplacement               = CGPointMake(-460.0, -10.0);

}

-(void)iPad_questionsPieChartConfiguration {
NSLog(@"iPad_questionsPieChartConfiguration");

// Set titles
playerName_label.text                           = playerName;
myString                                        = [[NSString alloc]initWithFormat:@"Total number of Questions answered: %.0f", nrQuestionsAnswered]; 
title_Questions_label.text                      = myString;

//Create host view
questionsChartView                              = [[CPTGraphHostingView alloc] initWithFrame:[[UIScreen mainScreen]bounds]];
[self.view addSubview:questionsChartView];

questionsPieGraph                               = [[CPTXYGraph alloc] initWithFrame:CGRectZero]; 
questionsChartView.hostedGraph                  = matchPieGraph;
questionsPieGraph.plotAreaFrame.masksToBorder   = NO;

questionsPieGraph.paddingLeft                   = 10.0;
questionsPieGraph.paddingTop                    = 120.0;
questionsPieGraph.paddingRight                  = 150.0;
questionsPieGraph.paddingBottom                 = 360.0;

questionsPieGraph.axisSet                       = nil;

//====ADD MATCH PIE CHART====//
questionsPiePlot                                = [[CPTPieChart alloc]init];
questionsPiePlot.dataSource                     = self;
questionsPiePlot.pieRadius                      = 100.0;
questionsPiePlot.identifier                     = @"questionsPieChart";
questionsPiePlot.startAngle                     = M_PI_4;
questionsPiePlot.sliceDirection                 = CPTPieDirectionCounterClockwise;
questionsPiePlot.borderLineStyle                = [CPTLineStyle lineStyle];
questionsPiePlot.labelOffset                    = 5.0;

questionsPieGraph.titleTextStyle                = whiteText;

[questionsPieGraph addPlot:questionsPiePlot];

// 1 - Get graph instance
CPTGraph *questionsGraph                        = questionsChartView.hostedGraph;
// 2 - Create legend
CPTLegend *theQuestionsLegend                   = [CPTLegend legendWithGraph:questionsGraph];
// 3 - Configure legen
CPTMutableTextStyle *legendQuestionsTextStyle   = [CPTTextStyle textStyle];
legendQuestionsTextStyle.fontSize               = 12.0f;
legendQuestionsTextStyle.fontName               = @"Noteworthy-Bold";
legendQuestionsTextStyle.color                  = [CPTColor whiteColor];
theQuestionsLegend.numberOfColumns              = 2;
theQuestionsLegend.fill                         = nil; 
theQuestionsLegend.borderLineStyle              = nil;
theQuestionsLegend.cornerRadius                 = 5.0;
theQuestionsLegend.textStyle                    = legendQuestionsTextStyle;

// 4 - Add legend to graph
questionsGraph.legend                           = theQuestionsLegend;     
questionsGraph.legendAnchor                     = CPTRectAnchorRight;
questionsGraph.legendDisplacement               = CGPointMake(-160.0, -10.0);

}

- (void)viewDidLoad {
[super viewDidLoad];

playerName_label.text                           = playerName;
AccessPlayerData *checkPlayerDiffFunction       = [AccessPlayerData new];
int diffLevel                                   = [checkPlayerDiffFunction checkPlayersDifficultyLevel:playerName];

switch (diffLevel) {
    case 1:
        playerDifficulty_label.text             = @"Difficuly Level: Children / Easy";
        break;
    case 2:
        playerDifficulty_label.text             = @"Difficuly Level : Teenager / Medium";
        break;
    case 3:
        playerDifficulty_label.text             = @"Difficuly Level: Adult / Hard";
        break;
    default:
        break;
}

nrGamesPlayed_label.text = [NSString stringWithFormat:@"Total number of games played: %.0f", nrGamesPlayed];

//====IF THIS IS IPAD PROCESS ALL GRAPHS====//

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

    double nrOfSingleGames                  = nrGamesPlayed -(nrGamesWon + nrGamesLost);
    double nrOfTotalGames                   = nrGamesPlayed;

    double percentageNrOfSingleGames        = (nrOfSingleGames / nrOfTotalGames) * 100;
    double percentageNrOfMatchGames         = ((nrOfTotalGames - nrOfSingleGames) / nrOfTotalGames) * 100;

    NSString *singleGames                   = [[NSString alloc]initWithFormat:@"%.0f (%.0f%%)", nrOfSingleGames, percentageNrOfSingleGames];
    NSString *matchesGames                  = [[NSString alloc]initWithFormat:@"%.0f (%.0f%%)", (nrOfTotalGames - nrOfSingleGames), percentageNrOfMatchGames];

    //=========ADD DATA FOR MATCHES PIE GRAPH==========//
    NSMutableArray *contentMatchArray       = [NSMutableArray arrayWithObjects:[NSNumber numberWithDouble:nrOfSingleGames], [NSNumber numberWithDouble:(nrOfTotalGames - nrOfSingleGames)], nil];
    labelMatchOrder                         = [[NSArray alloc]initWithObjects:singleGames, matchesGames, nil];
    legendMatchOrder                        = [[NSArray alloc] initWithObjects:@"Single Games", @"Matches", nil];

    self.dataForMatchChart                  = contentMatchArray;

    //=========ADD DATA FOR QUESTIONS PIE GRAPH==========//

    nrQuestionsWrongAnswers                 = nrQuestionsAnswered - nrQuestionsCorrectAnswered;
    double percentageCorrectAnswers         = (nrQuestionsCorrectAnswered / nrQuestionsAnswered) * 100;
    double percentageWrongAnswers           = (nrQuestionsWrongAnswers / nrQuestionsAnswered) * 100;

    NSString *answerCorrect                 = [[NSString alloc]initWithFormat:@"%.0f (%.0f%%)", nrQuestionsCorrectAnswered, percentageCorrectAnswers];
    NSString *answerWrong                   = [[NSString alloc]initWithFormat:@"%.0f (%.0f%%)", nrQuestionsWrongAnswers, percentageWrongAnswers];

    playerName_label.text                   = playerName;
    myString                                = [[NSString alloc]initWithFormat:@"Total number of questions answered: %.0f",nrQuestionsAnswered]; 
    title_Questions_label.text              = myString;

    NSMutableArray *contentQuestionsArray   = [NSMutableArray arrayWithObjects:[NSNumber numberWithDouble:nrQuestionsWrongAnswers], [NSNumber numberWithDouble:nrQuestionsCorrectAnswered], nil];
    labelQuestionsOrder                     = [[NSArray alloc]initWithObjects:answerWrong, answerCorrect, nil];
    legendQuestionsOrder                    = [[NSArray alloc] initWithObjects:@"Correct answers", @"Wrong answers", nil];

    self.dataForQuestionsChart              = contentQuestionsArray;

    NSLog(@"ContentQuestionsArray: %@", contentQuestionsArray);

    //====SET GLOBAL PARAMETERS FOR THE GRAPHs====//
    whiteText                               = [CPTMutableTextStyle textStyle];
    whiteText.color                         = [CPTColor whiteColor];
    whiteText.fontSize                      = 14;
    whiteText.fontName                      = @"Noteworthy-Bold";

    [self iPad_matchPieChartConfiguration];
    [self iPad_questionsPieChartConfiguration];

 }
}

#pragma mark -
#pragma mark Plot Data Source Methods

-(NSString *)legendTitleForPieChart:(CPTPieChart *)pieChart recordIndex:(NSUInteger)index {

if ( [matchPiePlot.identifier isEqual:[NSString stringWithFormat:@"matchPieChart"]] ) {
    NSLog(@"legendTitleForPieChart: matchPieChart");
    if (index < [legendMatchOrder count]) {
        return [legendMatchOrder objectAtIndex:index];
    }

} 
else if ( [matchPiePlot.identifier isEqual:[NSString stringWithFormat:@"questionsPieChart"]] ) {
    NSLog(@"legendTitleForPieChart: questionsPieChart");
}

return @"N/A";
}

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot {
NSLog(@"numberOfRecordsForPlot:");

if ([plot isKindOfClass:[CPTPieChart class]]) {
    return [dataForMatchChart count];
}
else {
    return 10; //>>>dummy
}
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index {
NSLog(@"numberForPlot:");

NSDecimalNumber *num                        = nil;

if ([plot isKindOfClass:[CPTPieChart class]]) {

    if (index >= [dataForMatchChart count]) {
        return nil;
    }

    if (fieldEnum == CPTPieChartFieldSliceWidth) {
        num                                 = [dataForMatchChart objectAtIndex:index];
    }
    else {
        num                                 = (NSDecimalNumber *) [NSDecimalNumber numberWithUnsignedInteger:index];
    }

}

return num;

}

-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index {
NSLog(@"dataLabelForPlot:");

CPTTextLayer *label                         = nil;

if ( [plot.identifier isEqual:[NSString stringWithFormat:@"matchPieChart"]] ) {

    NSLog(@"dataLabelForPlot: matchPieChart");

    label = [[CPTTextLayer alloc] initWithText:[labelMatchOrder objectAtIndex:index]];

    CPTMutableTextStyle *textStyle          = [label.textStyle mutableCopy];

    matchPiePlot.labelOffset                = -80;

    textStyle.fontName                      = @"Noteworthy-Bold";
    textStyle.color                         = [CPTColor whiteColor];
    textStyle.fontSize                      = 16;

    label.textStyle                         = textStyle;

    return label;
}
else if ( [plot.identifier isEqual:[NSString stringWithFormat:@"matchPieChart"]] ) {
    NSLog(@"dataLabelForPlot: MATCH");

}

return label;

}

//====SET COLOR FOR SLICES IN PIE GRAPH====//
-(CPTFill *)sliceFillForPieChart:(CPTPieChart *)pieChart recordIndex:(NSUInteger)index {

// For index = 0
double red1                                 = 222.0; 
double green1                               = 184.0; 
double blue1                                = 135.0; 
float alpha1                                = 0.5f;

double red2                                 = 155.0; 
double green2                               = 00.0; 
double blue2                                = 0.0; 
float alpha2                                = 0.3f;

if (index == 0) {
    CPTFill *fill                           = [CPTFill fillWithColor:[CPTColor colorWithComponentRed:red1 green:green1 blue:blue1 alpha:alpha1]];
    return fill;
}
if (index == 1) {
    CPTFill *fill                           = [CPTFill fillWithColor:[CPTColor colorWithComponentRed:red2 green:green2 blue:blue2 alpha:alpha2]];
    return fill;
}

return 0;
} 
```

我真的很挣扎，希望能得到帮助:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:24:36.647

更改此行

```
questionsChartView.hostedGraph = matchPieGraph; 
```

到

```
questionsChartView.hostedGraph = questionsPieGraph; 
```

`self.view`此外，检查两个托管视图在其父视图 ( )中的布局方式。确保两者都可见并正确定位。

# java - 将 HttpServletRequest 转发到不同的服务器

> ID：12130992
> 
> 赞同：38
> 
> 时间：2012-08-26T14:38:47.193
> 
> 标签：java, spring, http, spring-mvc, servlets

我在我的 Spring Servlet 中收到一个`HttpServletRequest`请求，我想将其按原样（即 GET 或 POST 内容）转发到不同的服务器。

使用 Spring Framework 最好的方法是什么？

我是否需要获取所有信息并构建一个新的`HTTPUrlConnection`? 还是有更简单的方法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-03-22T02:34:49.713

关于是否*应该*以这种方式进行转发的讨论，我是这样做的：

```
package com.example.servlets;

import java.net.HttpURLConnection;
import java.net.URL;
import java.util.Enumeration;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.example.servlets.GlobalConstants;

@SuppressWarnings("serial")
public class ForwardServlet extends HttpServlet {

    @Override
    public void doGet(HttpServletRequest req, HttpServletResponse resp) {
        forwardRequest("GET", req, resp);
    }

    @Override
    public void doPost(HttpServletRequest req, HttpServletResponse resp) {
        forwardRequest("POST", req, resp);
    }

    private void forwardRequest(String method, HttpServletRequest req, HttpServletResponse resp) {
        final boolean hasoutbody = (method.equals("POST"));

        try {
            final URL url = new URL(GlobalConstants.CLIENT_BACKEND_HTTPS  // no trailing slash
                    + req.getRequestURI()
                    + (req.getQueryString() != null ? "?" + req.getQueryString() : ""));
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setRequestMethod(method);

            final Enumeration<String> headers = req.getHeaderNames();
            while (headers.hasMoreElements()) {
                final String header = headers.nextElement();
                final Enumeration<String> values = req.getHeaders(header);
                while (values.hasMoreElements()) {
                    final String value = values.nextElement();
                    conn.addRequestProperty(header, value);
                }
            }

          //conn.setFollowRedirects(false);  // throws AccessDenied exception
            conn.setUseCaches(false);
            conn.setDoInput(true);
            conn.setDoOutput(hasoutbody);
            conn.connect();

            final byte[] buffer = new byte[16384];
            while (hasoutbody) {
                final int read = req.getInputStream().read(buffer);
                if (read <= 0) break;
                conn.getOutputStream().write(buffer, 0, read);
            }

            resp.setStatus(conn.getResponseCode());
            for (int i = 0; ; ++i) {
                final String header = conn.getHeaderFieldKey(i);
                if (header == null) break;
                final String value = conn.getHeaderField(i);
                resp.setHeader(header, value);
            }

            while (true) {
                final int read = conn.getInputStream().read(buffer);
                if (read <= 0) break;
                resp.getOutputStream().write(buffer, 0, read);
            }
        } catch (Exception e) {
            e.printStackTrace();
            // pass
        }
    }
} 
```

显然，这可能需要一些关于错误处理等的工作，但它是功能性的。但是，我停止使用它，因为在我的情况下，直接调用`CLIENT_BACKEND`比跨两个不同域处理 cookie、auth 等更容易。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-04-12T20:22:42.077

我也需要做同样的事情，在使用 Spring 控制器和 RestTemplate 进行一些非优化之后，我找到了一个更好的解决方案：[Smiley 的 HTTP Proxy Servlet](https://github.com/mitre/HTTP-Proxy-Servlet)。好处是，它确实像 Apache 一样进行 AS-IS 代理，`mod_proxy`并且它以流式方式进行，无需在内存中缓存完整的请求/响应。

简单地说，您将一个新的 servlet 注册到您要代理到另一台服务器的路径，并将此 servlet 指定为目标主机作为 init 参数。如果您使用带有 web.xml 的传统 Web 应用程序，您可以像下面这样配置它：

```
<servlet>
    <servlet-name>proxy</servlet-name>
    <servlet-class>org.mitre.dsmiley.httpproxy.ProxyServlet</servlet-class>
    <init-param>
      <param-name>targetUri</param-name>
      <param-value>http://target.uri/target.path</param-value>
    </init-param>
</servlet>
<servlet-mapping>
  <servlet-name>proxy</servlet-name>
  <url-pattern>/mapping-path/*</url-pattern>
</servlet-mapping> 
```

或者，当然，您可以使用[注释 config](https://blogs.oracle.com/swchan/entry/servlet_3_0_annotations)。

如果你使用的是 Spring Boot，那就更简单了：你只需要创建一个 type 的 bean `ServletRegistrationBean`，并使用所需的配置：

```
@Bean
public ServletRegistrationBean proxyServletRegistrationBean() {
    ServletRegistrationBean bean = new ServletRegistrationBean(
            new ProxyServlet(), "/mapping-path/*");
    bean.addInitParameter("targetUri", "http://target.uri/target.path");
    return bean;
} 
```

这样，您还可以使用环境中可用的 Spring 属性。

如果需要，您甚至可以扩展该类`ProxyServlet`并覆盖其方法以自定义请求/响应标头等。

**更新**：使用 Smiley 的代理 servlet 一段时间后，我们遇到了一些超时问题，它不能可靠地工作。从 Netflix切换到[**Zuul**](https://github.com/Netflix/zuul)，之后没有任何问题。可以在[此链接](https://spring.io/guides/gs/routing-and-filtering/)上找到有关使用 Spring Boot 配置它的教程。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-26T15:13:27.670

不幸的是，没有简单的方法可以做到这一点。基本上你必须重建请求，包括：

*   正确的 HTTP 方法
*   请求参数
*   请求标头（`HTTPUrlConnection`不允许设置任意用户代理，`Java/1.*`始终附加“”，您需要 HttpClient）
*   身体

这是很多工作，更不用说它不会扩展，因为每个这样的代理调用都会占用您机器上的一个线程。

我的建议：使用原始套接字或[netty](/questions/tagged/netty "显示标记为“netty”的问题")并在最低级别拦截 HTTP 协议，只是动态替换一些值（如`Host`标头）。你能提供更多的上下文，为什么你需要这个？

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-10-09T12:40:11.397

```
@RequestMapping(value = "/**")
public ResponseEntity route(HttpServletRequest request) throws IOException {
    String body = IOUtils.toString(request.getInputStream(), Charset.forName(request.getCharacterEncoding()));
    try {
        ResponseEntity<Object> exchange = restTemplate.exchange(firstUrl + request.getRequestURI(),
                HttpMethod.valueOf(request.getMethod()),
                new HttpEntity<>(body),
                Object.class,
                request.getParameterMap());
        return exchange;
    } catch (final HttpClientErrorException e) {
        return new ResponseEntity<>(e.getResponseBodyAsByteArray(), e.getResponseHeaders(), e.getStatusCode());
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-09T12:07:13.807

如果您被迫使用 spring，请检查[rest 模板方法交换](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html#exchange-java.lang.String-org.springframework.http.HttpMethod-org.springframework.http.HttpEntity-java.lang.Class-java.lang.Object...-)以将请求代理到第三方服务。

[在这里](https://stackoverflow.com/questions/41441586/the-easiest-way-to-proxy-httpservletrequest-in-spring-mvc-controller/45839595#45839595)您可以找到一个工作示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-16T20:23:04.030

使用[Spring Cloud 网关](https://cloud.spring.io/spring-cloud-gateway/multi/multi__building_a_simple_gateway_using_spring_mvc.html)

pom.xml

```
 <dependency>
        <groupId>org.springframework.cloud</groupId>
        <artifactId>spring-cloud-gateway-mvc</artifactId>
    </dependency>  

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-dependencies</artifactId>
            <version>2020.0.2</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement> 
```

控制器

```
import org.springframework.beans.factory.annotation.Value;
import org.springframework.cloud.gateway.mvc.ProxyExchange;
import org.springframework.http.ResponseEntity;
import org.springframework.util.MultiValueMap;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.util.UriComponents;
import org.springframework.web.util.UriComponentsBuilder;

@RestController
public class Proxy extends BaseController {

    private String prefix="/proxy";
    private String Base="localhost:8080/proxy";  //destination

    void setHeaders(ProxyExchange<?> proxy){
        proxy.header("header1", "val1"); //add additional headers
    }

    @GetMapping("/proxy/**")
    public ResponseEntity<?> proxyPath(@RequestParam MultiValueMap<String,String> allParams, ProxyExchange<?> proxy) throws Exception {
        String path = proxy.path(prefix); //extract sub path
        proxy.header("Cache-Control", "no-cache");
        setHeaders(proxy);

        UriComponents uriComponents =  UriComponentsBuilder.fromHttpUrl(Base + path).queryParams(allParams).build();
        return proxy.uri(uriComponents.toUri().toString()).get();
    }

    @PutMapping("/proxy/**")
    public ResponseEntity<?> proxyPathPut(ProxyExchange<?> proxy) throws Exception {
        String path = proxy.path(prefix);
        setHeaders(proxy);
        return proxy.uri(Base + path).put();
    } 
```

# objective-c - Objective-C 类别不被识别？

> ID：12130996
> 
> 赞同：1
> 
> 时间：2012-08-26T14:39:04.293
> 
> 标签：objective-c, cocoa, unrecognized-selector, objective-c-category

嗯，这是一个很奇怪的问题。（我只是希望这与我有一段时间没有玩那么多可可有关，否则......）

所以，这个问题很简单：

*   我正在使用**Xcode 4.3.3**（一个非常简单的测试项目 - **10.7 SDK** -**没有 ARC**）
*   我正在某个类上创建一个**类别***（例如`NSProgressIndicator`）*
*   我包括适当的头文件
*   当尝试使用我的任何类别的方法时（但是，它仍然显示在可用命令的下拉列表中），我收到一个错误：

> [NSProgressIndicator start]：无法识别的选择器发送到实例 0x7f9f4b91a0a0

### 编码

（例如 - 它发生在其他（100 次测试）类别中）：

```
#import <Foundation/Foundation.h>

@interface NSProgressIndicator (NSProgressIndicator_Functions)

- (void)start;
- (void)stop;

@end 
```

* * *

```
#import "NSProgressIndicator+Functions.h"

@implementation NSProgressIndicator (NSProgressIndicator_Functions)

- (void)start
{
    [self setHidden:NO];
    [self startAnimation:nil];
}

- (void)stop
{
    [self setHidden:YES];
    [self stopAnimation:nil];
}

@end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:48:01.123

要将我的评论扩展为真正的答案：

确保类别的实现 (.m) 文件包含在目标的编译源构建阶段。导入标头足以告诉编译器 NSProgressIndicator 上有一个添加`-start`方法的类别。除非类别的实现被实际编译并链接到完成的二进制文件中（或者在运行时添加方法实现等），否则 NSProgressIndicator 不会`start`在运行时实际响应消息。由于 Objective-C 的动态消息发送行为，编译器无法在编译时判断 NSProgressIndicator 是否*真的*会响应该消息，这就是您没有收到警告或错误的原因。

# java - “抛出 UncheckedException”是否有意义

> ID：12130997
> 
> 赞同：2
> 
> 时间：2012-08-26T14:39:05.027
> 
> 标签：java, exception, checked, unchecked, throws

我正在研究java中的这一章，想知道在方法签名之后`Exception`放一些是否有好处。`throws UncheckedException`我可以看到，对于已检查的异常，编译代码需要这种语句，并且使用*try、catch*和*最后*可以处理所有异常。`throws UncheckedException`但我的问题是，如果在方法签名之后添加一个有什么区别？例如，要使用`File`对象编译以下代码，您需要有一个已检查的异常：

```
void main(String args[])throws IOException{
    File f=new File("c:\\java\\xyz.txt");
} 
```

但是这样的语句在下面的代码中有什么影响：

```
public static int method1(String str)throws NumberFormatException{
    int i=Integer.parseInt(str);
    return i;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T14:43:01.580

添加`throws`带有 an 的子句`UncheckedException`仅用于文档目的，它没有功能效果。
但是，这在某些情况下绝对是有意义的。这样做的通常原因是，如果您希望其他人使用您的类，并且您想明确说明您的方法可能会抛出某个`Exception`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:41:37.843

编写`throws`意味着函数很好地不处理异常，但很好地给你荣誉。

# android - 如何制作比屏幕更大的动态布局？

> ID：12130999
> 
> 赞同：1
> 
> 时间：2012-08-26T14:39:14.150
> 
> 标签：android, android-layout

我想创建一个动态扩展的布局，它可能会反映用户的输入。首先，我创建了一个允许双向滚动的活动布局（这不是我的发明，我使用了在[对另一个问题的评论中](https://stackoverflow.com/a/2057869/1380150)解释的想法并进行了一些改进）：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clipChildren="false"
    android:clipToPadding="false"
    tools:ignore="UselessParent" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clipChildren="false"
        android:clipToPadding="false" >

        <RelativeLayout
            android:id="@+id/content"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:clipChildren="false"
            android:clipToPadding="false" >

        </RelativeLayout>
    </FrameLayout>
</FrameLayout> 
```

然后，我在下面创建了一个简单的 UI 布局、一个文本视图和一个垂直线性布局。这是我的 message_with_replies.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clipChildren="false"
    android:clipToPadding="false"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/header"
        android:layout_width="300dp"
        android:layout_height="wrap_content" >

<!-- some text views and buttons here, 
    I've removed them to keep things simple,
    see the screenshot below -->

    </LinearLayout>

    <LinearLayout
        android:id="@+id/replies"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:orientation="vertical" >
    </LinearLayout>

</LinearLayout> 
```

*请注意回复*布局中的 10dp 边距以及与剪辑相关的属性。

所以我现在可以用 message_with_replies 布局膨胀一个项目并将其添加到活动的*内容*布局中，然后膨胀另一个项目并将其添加到第一个项目的*回复*线性布局中，依此类推，从而创建一个树状层次结构. 整个树在水平和垂直方向上都显示和滚动。

但是，看起来布局仍然受到屏幕尺寸的限制。我有两个问题：

1) 右边缘以外的项目看起来不错，但没有收到用户输入。2）底部边缘以外的布局混乱。

这是屏幕截图。从左到右：1）一切看起来都很好，2）哎呀，按钮在边缘，3）哎呀，底部搞砸了。

![从左到右：1）一切看起来都很好，2）哎呀，按钮在边缘，3）哎呀，底部乱七八糟了。](../Images/f8859acd54f8e15726ef62587c0ecc7f.png)

看起来我错过了一些简单但隐藏的东西。如何使布局超出屏幕边缘？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T14:52:50.733

解决方案非常简单。

在活动布局中，RelativeLayout 节点（具有*内容*ID 的节点）应使用覆盖 onMeasure 方法的自定义布局类。

所以这里是活动布局的修复：

```
<com.sample.MyRelativeLayout
    android:id="@+id/content"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clipChildren="false"
    android:clipToPadding="false" >
</com.sample.MyRelativeLayout> 
```

这是类的实现：

```
public class MyRelativeLayout extends RelativeLayout {
    public MyRelativeLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(0, 0);
    }
} 
```

请注意，我不必计算任何东西，传递 (0, 0) 就可以了。

坦率地说，我还不了解此解决方案的所有优缺点，但它可以正常工作。到目前为止我注意到的唯一问题是我展开的项目越多，UI 响应越慢。

我将不胜感激任何意见或建议。