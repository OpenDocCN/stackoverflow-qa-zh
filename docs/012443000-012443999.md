# StackOverflow 问答 12443000-12443999

# c# - 扩展成员选择器控制

> ID：12443004
> 
> 赞同：1
> 
> 时间：2012-09-15T22:36:19.147
> 
> 标签：c#, asp.net, .net, umbraco

有没有办法让成员选择器下拉列表只显示给某个组或类型的成员？

目前，我们有显示数据库中所有成员的下拉列表（大约 10k 用户）。

我需要一种在不丢失任何数据的情况下做到这一点的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T08:19:39.120

听起来您需要创建一个自定义数据类型，以允许您拥有不同类型的成员选择器 -[这是在 Umbraco 中创建自定义数据类型](http://www.nibble.be/?p=24)以及如何在 Umbraco 中使用它来替换默认成员的一个很好的指南选择器。

关于获得一部分成员[，our.umbraco.org 上有以下很好的提示](http://our.umbraco.org/forum/developers/api-questions/16044-Getting-all-Members-in-a-Membergroup)：

```
var list = MemberGroup.GetByName("Member Group Name").GetMembersAsIds(); 
```

我想如果你想在你的自定义数据类型中有一个下拉菜单，你可以将一个选择框绑定到一个字典编码，如（未经测试，但改编自另一个代码片段）：

```
Dictionary<int, string> list = new Dictionary<int, string>();
var memberGroup = MemberGroup.GetByName("Member Group Name");
if (memberGroup != null)
{
        foreach (Member member in memberGroup.GetMembers())
        {
                list.Add(member.Id, member.Name);
        }
} 
```

在二级培训中，有一个使用自动完成字段允许通过输入部分姓名来选择成员的工作示例 - 因此，如果您创建自定义数据类型，您可能需要评估下拉菜单是否是满足您需求的正确 UI 元素。

# c# - 使用 ssl 没有登录页面的 asp.net 表单身份验证

> ID：12443007
> 
> 赞同：0
> 
> 时间：2012-09-15T22:36:44.053
> 
> 标签：c#, asp.net

我希望在 asp.net 网站中使用表单身份验证，但没有特定的登录页面。相反，我想让我的用户通过屏幕右上角的 DIV 部分登录。此外，我希望这个 DIV 部分将使用 SSL。

我对实现的建议是： 1\. 创建一个 login.aspx 页面，该页面仅包含带有 Form 标签的 div 元素。2\. 在站点的每一页上（甚至可能在一个母版页中），创建一个包含 login.aspx 页面的 IFrame。3\. 如果用户执行登录 - 在 login.aspx 页面中显示“Hi username”。否则，显示登录凭据文本框。

这个建议使用了一个特定的 login.aspx 页面，但是它被 IFrame 和 Master 页面伪装了。我认为这个建议很有创意，我想不出它不起作用的原因。在我尝试之前，这是要走的路吗？有人可以提出另一种解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T04:52:11.650

这是一个不存在的问题的复杂解决方案。

您需要做的就是使用登录服务器控件，并编辑模板以适合您想要的任何内容。将其放在母版页中，然后将其连接起来。为了增加好处，您可以编写一些代码来检测用户是否已登录，如果已登录，则隐藏登录控件并显示用户名。

或者，您可以将登录控件放在封装此功能的用户控件中。

另一种选择是编写您自己的登录控件来执行此操作（这并不难）。

# gmail - GmailApp.sendEmail() 来自 Plus 地址

> ID：12443014
> 
> 赞同：1
> 
> 时间：2012-09-15T22:37:32.640
> 
> 标签：gmail

问题：有没有办法覆盖帐户电子邮件地址并将其替换为同一帐户上的加号地址？

我在 Google Apps 中使用 GmailApp.sendEmail() 方法。

帐户电子邮件地址是一个非加号（显然）地址，但我使用多个加号地址将邮件过滤到类别中。

当我使用 sendEmail() 发送消息时，它使用主帐户地址，并且似乎没有办法为脚本更改此地址。

虽然我可以为帐户设置“名称”，但我想将发件人地址设置为帐户地址的加号版本。

（我记得在日历用户界面中遇到了同样的问题。）

所以，我也尝试使用高级参数设置一个replyTo 地址。（这不是我喜欢的方式。）

replyTo 参数显然接受地址，并且发送的消息包含reply-to 标头。我在下面的标题行中包含了替换帐户地址的“示例”。

```
Delivered-To: example+test@gmail.com

Reply-To: Richard Michael <example+pch@gmail.com>

From: Richard Michael <example@gmail.com>
To: example+test@gmail.com 
```

但是，当我在 Gmail 中使用回复按钮时，表单中加载的“收件人”地址是 example+test@gmail.com，这不是我所期望的。（它应该是回复地址，或者最坏的情况是发件人地址。）回复表单中的发件人地址是 example@gmail.com，这是预期的（也是我想从加号地址“发送”的原因）。

我已经重复了几次，结果相同。

当然，Gmail 还允许您在执行验证检查后在用户界面中从外国帐户“发送”。因此，您也不能从这些地址发送。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:36:02.563

[您必须在方法GmailApp.sendEmail](https://developers.google.com/apps-script/class_gmailapp#sendEmail)中使用参数 from :。

例子

```
GmailApp.sendEmail('example@exapmle.com', 'Testmail', 'Hello Richard',
                        {name: 'Richard Michel', from: 'example+pch@gmail.com',}); 
```

我正在使用[Mail Merge HD](http://www.labnol.org/internet/personalized-mail-merge-in-gmail/20981/)并稍微编辑了代码。

在函数 fnMailmerge() 我添加了行

```
 top_panel.add(myapp.createLabel("Please select your alias"));
  var lf = myapp.createListBox(false).setWidth(250).setName('from').addItem("Select aliases...").setVisibleItemCount(1);

  for (var i = 0; i < aliases.length; i++) {
   lf.addItem(aliases[i]);
  }

  top_panel.add(lf); 
```

，将最后一条语句添加到这一行（在同一函数中）

```
var handler = myapp.createServerClickHandler('startMailMerge').addCallbackElement(lb).addCallbackElement(name_box).addCallbackElement(bcc_box).addCallbackElement(lf); 
```

最后编辑功能 Gmail.sendEmail

```
 GmailApp.sendEmail(rowData.emailAddress, emailSubject, emailText,
                        {name: e.parameter.name, attachments: attachments, htmlBody: emailText, cc: cc, bcc: bcc, inlineImages: inlineImages, from: e.parameter.from,}); 
```

这会在邮件菜单中添加一个下拉列表，您可以在其中从注册的别名中进行选择。

# c++ - 为什么 eglMakeCurrent 因 EGL_BAD_ALLOC 而失败？

> ID：12443016
> 
> 赞同：5
> 
> 时间：2012-09-15T22:37:40.917
> 
> 标签：c++, multithreading, opengl-es, android-ndk

我正在使用 OpenGL ES 2.0 和 Android NDK r8b。我有一个用于工作线程的共享上下文。当我尝试使用 eglMakeCurrent 将共享上下文绑定到工作线程时，我收到错误 EGL_BAD_ALLOC。

现在让我感到困惑的是，这段代码之前运行良好。我不确定我做了什么来破坏它。EGL 文档说这个错误与资源不可用有关，但我运行的是同一个应用程序它曾经在这个完全相同的设备上完美地工作，并且所有纹理都可以从主线程很好地加载。

那么是什么导致了这个错误呢？

这是我的 egl 初始化：

```
bool Initialize(void *displaySurface)
{
    assert(displaySurface);
    ANativeWindow *window = (ANativeWindow*)displaySurface;

    EGLint dummy, format;

    display = eglGetDisplay(EGL_DEFAULT_DISPLAY);

    eglInitialize(display, 0, 0);

    const EGLint configAttribs[] =
    {
        EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
        EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,
        EGL_BLUE_SIZE, 8,
        EGL_GREEN_SIZE, 8,
        EGL_RED_SIZE, 8,
        EGL_ALPHA_SIZE, 8,
        EGL_BUFFER_SIZE, 32,
        EGL_DEPTH_SIZE, 24,
        EGL_NONE
    };

    const EGLint auxConfigAttribs[] =
    {
        EGL_SURFACE_TYPE, EGL_PBUFFER_BIT,
        EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,
        EGL_BLUE_SIZE, 8,
        EGL_GREEN_SIZE, 8,
        EGL_RED_SIZE, 8,
        EGL_ALPHA_SIZE, 8,
        EGL_BUFFER_SIZE, 32,
        EGL_DEPTH_SIZE, 24,
        EGL_NONE
    };

    EGLint contextAttribs[] =
    {
        EGL_CONTEXT_CLIENT_VERSION, 2, EGL_NONE
    };

    EGLint numConfigs;
    EGLConfig config;

//// create main context
    eglChooseConfig(display, configAttribs, &config, 1, &numConfigs);
    Trace("eglChooseConfig: " + GetEglError());

    eglGetConfigAttrib(display, config, EGL_NATIVE_VISUAL_ID, &format);
    Trace("eglGetConfigAttrib: " + GetEglError());

    ANativeWindow_setBuffersGeometry(window, 0, 0, format);
    Trace("ANativeWindow_setBuffersGeometry: " + GetEglError());

    surface = eglCreateWindowSurface(display, config, window, NULL);
    Trace("eglCreateWindowSurface: " + GetEglError());

    context = eglCreateContext(display, config, EGL_NO_CONTEXT, contextAttribs);
    Trace("eglCreateContext: " + GetEglError());

//// create auxiliary context
    eglChooseConfig(display, auxConfigAttribs, &config, 1, &numConfigs);
    Trace("AUX eglChooseConfig: " + GetEglError());

    auxSurface = eglCreatePbufferSurface(display, config, NULL);
    Trace("AUX eglCreatePbufferSurface: " + GetEglError());

    auxContext = eglCreateContext(display, config, context, contextAttribs);
    Trace("AUX eglCreateContext: " + GetEglError());

//// make main context current
    eglMakeCurrent(display, surface, surface, context);
    Trace("eglMakeCurrent: " + GetError());

    eglQuerySurface(display, surface, EGL_WIDTH, &width);
    eglQuerySurface(display, surface, EGL_HEIGHT, &height);

    SetViewport(width, height);

    EnableDepthBuffer(enableDepthTest);
    EnableBackfaceCulling(enableBackfaceCull);
    SetBackgroundColor(backgroundColor);

    glDisable(GL_DITHER);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    Trace("finished" + GetEglError());

    alive = true;

    return true;
} 
```

编辑：~~我可能是错的，但这个错误似乎是在更新 ndk 工具链的同时出现的......但我无法测试这个理论，因为我没有任何旧的 ndk 副本了......所以如果有人有我可以获得 NDK 7c 的链接，那也会很有帮助。~~

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T20:11:14.713

好吧，问题似乎在于 PBuffer 需要至少为 1x1 像素才能工作，而 EGL_WIDTH 和 EGL_HEIGHT 的默认值为 0。

获奖配置：

```
bool Initialize(void *displaySurface)
{
    assert(displaySurface);
    ANativeWindow *window = (ANativeWindow*)displaySurface;

    EGLint dummy, format;

    display = eglGetDisplay(EGL_DEFAULT_DISPLAY);

    eglInitialize(display, 0, 0);

    EGLint contextAttribs[] =
    {
        EGL_CONTEXT_CLIENT_VERSION, 2, EGL_NONE
    };

//// create main context
    const EGLint configAttribs[] =
    {
        EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
        EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,
        EGL_BLUE_SIZE, 8,
        EGL_GREEN_SIZE, 8,
        EGL_RED_SIZE, 8,
        EGL_ALPHA_SIZE, 8,
        EGL_BUFFER_SIZE, 32,
        EGL_DEPTH_SIZE, 24,
        EGL_NONE
    };

    EGLint numConfigs;
    EGLConfig config;

    eglChooseConfig(display, configAttribs, &config, 1, &numConfigs);
    Trace("eglChooseConfig: " + GetEglError());

    eglGetConfigAttrib(display, config, EGL_NATIVE_VISUAL_ID, &format);
    Trace("eglGetConfigAttrib: " + GetEglError());

    ANativeWindow_setBuffersGeometry(window, 0, 0, format);
    Trace("ANativeWindow_setBuffersGeometry: " + GetEglError());

    surface = eglCreateWindowSurface(display, config, window, NULL);
    Trace("eglCreateWindowSurface: " + GetEglError());

    context = eglCreateContext(display, config, EGL_NO_CONTEXT, contextAttribs);
    Trace("eglCreateContext: " + GetEglError());

//// create auxiliary context

    const EGLint auxConfigAttribs[] =
    {
        EGL_SURFACE_TYPE, EGL_PBUFFER_BIT,
        EGL_BLUE_SIZE, 8,
        EGL_GREEN_SIZE, 8,
        EGL_RED_SIZE, 8,
        EGL_ALPHA_SIZE, 0,
        EGL_DEPTH_SIZE, 0,
        EGL_STENCIL_SIZE, 0,
        EGL_NONE
    };

    EGLint pbufferAttribs[] =
    {
        EGL_WIDTH, 1,
        EGL_HEIGHT, 1,
        EGL_TEXTURE_TARGET, EGL_NO_TEXTURE,
        EGL_TEXTURE_FORMAT, EGL_NO_TEXTURE,
        EGL_NONE
    };

    EGLint auxNumConfigs;
    EGLConfig auxConfig;

    eglChooseConfig(display, auxConfigAttribs, &auxConfig, 1, &auxNumConfigs);
    Trace("AUX eglChooseConfig: " + GetEglError());

    auxSurface = eglCreatePbufferSurface(display, auxConfig, pbufferAttribs);
    Trace("AUX eglCreatePbufferSurface: " + GetEglError());

    auxContext = eglCreateContext(display, auxConfig, context, contextAttribs);
    Trace("AUX eglCreateContext: " + GetEglError());

//// make main context current
    eglMakeCurrent(display, surface, surface, context);
    Trace("eglMakeCurrent main: " + GetError());

    eglQuerySurface(display, surface, EGL_WIDTH, &width);
    eglQuerySurface(display, surface, EGL_HEIGHT, &height);

    SetViewport(width, height);

    EnableDepthBuffer(enableDepthTest);
    EnableBackfaceCulling(enableBackfaceCull);
    SetBackgroundColor(backgroundColor);

    glDisable(GL_DITHER);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    Trace("finished" + GetEglError());

    alive = true;

    return true;
} 
```

# php - CodeIgniter URL、文件、控制器组织。什么是最好的方法？

> ID：12443018
> 
> 赞同：1
> 
> 时间：2012-09-15T22:38:15.240
> 
> 标签：php, codeigniter

我是 CodeIgniter 框架的新手，也是 MVC，因此我对组织应该如何感到困惑。

我将编写一个大型应用程序。我需要组织良好的文件结构。

例如，我有产品、记录等类别，这些类别对一个类别来说是唯一的。我有一个管理面板。

这是我在管理面板中控制类别的 URL：

索引（类别列表）：mysite.com/index.php/admin/category/index 创建（创建新类别）：mysite.com/index.php/admin/category/create

首先，我需要一个显示其产品、记录等类别的仪表板。我希望新的网址如下：

```
mysite.com/index.php/admin/category/id/5
or
mysite.com/index.php/admin/category/name/category1
etc.. 
```

我希望产品网址如下：

```
mysite.com/index.php/admin/category/id/5/product
and records to be like:
mysite.com/index.php/admin/category/id/5/record 
```

当然，我需要将值解析为产品或记录，例如：

```
mysite.com/index.php/admin/category/id/5/product/id/5
or
mysite.com/index.php/admin/category/id/5/product/create - to add new product to a category 
```

正如我之前所说，我的应用程序很大，我认为文件组织是这样的：

```
controllers/admin.php - admin controller
controllers/admin/category.php - category controller
controllers/admin/category/product.php - product controller
controllers/admin/category/record.php - record controller 
```

我需要你的建议如何组织。如何显示某个类别独有的产品

我的产品控制器是否应该从类别控制器等扩展。你能帮助和建议我吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T16:16:20.907

试着回答我理解的你的问题。

首先是具有简单文件结构的 CodeIgnitor。

```
Basic : 
   application/
              Controller/ put all controller 
              model/ put all model 
              views/ put view file 

 // In your case:

         controllers/admin.php - admin controller
         controllers/category.php - category controller
         controllers/product.php - product controller
         controllers/record.php - record controller 
```

你几乎没有插错：

```
 mysite.com/index.php/admin/category/id/5/product/id/5

   GET method
   //serverpath(base_url)/controller/method(function)/para1/valu1/para2/valu2.... 
```

在您的情况下，类别和产品是控制器。

请参考 CI-codeIgnitor 文档： [http ://codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html)

希望你能理解。

# jquery - 如何获取 jQuery 验证引擎的 onFieldSuccess 函数

> ID：12443021
> 
> 赞同：1
> 
> 时间：2012-09-15T22:38:36.417
> 
> 标签：jquery, validation, jquery-plugins, jquery-validation-engine

我正在使用一个 jQuery 验证插件/引擎，称为：jQuery.validationEngine。

[绝对 | jquery-form-validator-因为-form-validation-is-a-mess](http://posabsolute.github.com/jQuery-Validation-Engine/)

有一个名为：onFieldSuccess 和 onFieldFailure 的函数，但我无法让它们工作。这也可能是因为我现在做jQuery有一段时间并且没有太多经验，所以我希望这里有人可以帮助我。

这个函数的唯一描述是：[描述函数onFieldSuccess/onFieldFailure](https://github.com/posabsolute/jQuery-Validation-Engine/pull/473)

正常的功能和功能就像一个魅力。我现在拥有的是：

```
function testing() {
    alert('Fail'); 
```

}

$(文档).ready(函数() {

```
 jQuery("#login-form").validationEngine('attach', {
        promptPosition: 'topLeft', scroll: true,
            bindMethod: "on",
            ajaxFormValidation: true,
            //onFieldSuccess: testing,
            onFieldFailure: testing,
            onBeforeAjaxFormValidation: before_Login_Call,
            onAjaxFormComplete: ajaxValidation_Login_Callback
    });
    $("#login-form").bind("jqv.field.result", function(event, field, errorFound, prompText){ console.log(field) }) 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:44:54.887

我发现了问题。

这真的很容易。

只需在核心`.js`文件中设置这样的选项，您就完成了：

```
onFieldSuccess: true,
onFieldFailure: true,

addSuccessCssClassToField: 'inputbox-success',
addFailureCssClassToField: 'inputbox-error', 
```

下面的两个 (`addSuccessCssClassToField`和`addFailureCssClassToField`) 是出现错误时将使用的两个 css 类。

您可以在核心`.js`文件中设置它，也可以在调用验证器时覆盖这些选项。

希望这也对其他人有所帮助。如果您对此有任何疑问，我很乐意为您提供帮助。

# ffmpeg - FFmpeg 和 Libav 有什么区别？

> ID：12443023
> 
> 赞同：3
> 
> 时间：2012-09-15T22:38:47.783
> 
> 标签：ffmpeg, video-processing, libavcodec, libav

根据[这个问题](https://stackoverflow.com/questions/12442901/what-is-the-official-website-for-libavcodec)的第一条评论，我引用

> > “FFmpeg 项目和 Libav 项目都提供了具有此名称的库，但它们相互不兼容”。所以我认为答案取决于你想使用哪个 libavcodec。
> 
> 通过用户[aland](https://stackoverflow.com/users/929437/aland)和[维基百科](http://en.wikipedia.org/wiki/Libavcodec)

这两个项目之间存在什么区别？

我对使用 Mp4/Mkv 容器将视频和音频编码为 H/X264、Mp3 和 AAC 感兴趣；但更重要的是，我想从一个可靠且最新的库开始，该库具有许可许可证并在尽可能多的平台上得到广泛支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T03:24:15.243

对于普通用户来说，ffmpeg 和 fork 之间最明显的区别是不同的二进制名称（`ffmpeg`、`ffplay`、`ffprobe`vs `avconv`、`avprobe`等`avplay`）。FFmpeg 合并了来自 libav 的大多数提交，但它不是互惠的，因此 libav 没有那么多功能。因此，ffmpeg 可以做大部分 libav 可以做的事情，但 libav 不能总是做 ffmpeg 可以做的所有事情。

# asp.net - 在帖子下方显示评论 ASP.net Webmatrix

> ID：12443029
> 
> 赞同：1
> 
> 时间：2012-09-15T22:39:22.873
> 
> 标签：asp.net, webmatrix

我正在建立一个网站，其中会有帖子及其各自的评论。

我显示帖子的方式是循环浏览记录并将它们放入一个 div 中。此外，我还有另一个查询从评论表中获取数据，它只给我点击帖子的相关评论。

问题是，当我使用 foreach 循环在单独的 div 中（就在同一级别的帖子 div 下方）显示评论时，评论将显示在所有其他帖子下。我尝试使用 $(this `enter code here`).sibling`$(this).children()`等，但它不起作用。

在 jquery 中，我在 document.ready 上隐藏了评论 div，并在点击帖子时显示。

这是代码片段：

```
@foreach(var row in selectposts)
{
  <div id ="posts">@row.posts</div>
  @foreach(var row in selectcomments)
  {
  <div id ="comment">@row.comments</div>
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:47:49.537

尝试这样的事情：

```
@{
    var db = Database.Open("MyDatabase");
    var postsQuery = "SELECT * FROM Posts";
    var commentsQuery = "SELECT * FROM Comments WHERE PostId = @0";
}

@foreach(var post in db.Query(postsQuery)){
    <div class="post@post.Id">@post.PostContent</div>
    @foreach(var comment in db.Query(commentsQuery, post.Id)){
        <div class="comment@comment.Id">@comment.CommentContent</div>
    }
} 
```

我刚刚直接在 SO 中输入了这个，但它应该在附近的某个地方。

jQuery 在您的 OP 中按预期工作，因为您始终使用相同的 div ID。在这个例子中，每个帖子 div 都有一个唯一的 ID（例如 post127），因此它们可以被 jQuery 单独引用。

# java - 在 SpringMVC 应用程序中初始化 MongoDB 存储库时出错

> ID：12443032
> 
> 赞同：0
> 
> 时间：2012-09-15T22:40:34.600
> 
> 标签：java, mongodb, spring-mvc, mongodb-java

我正在尝试使用 MongoDB 集成设置一个基本的 Spring MVC 应用程序。使用 Java 7 JDK

但是，当尝试使用 Maven 构建项目时，我看到如下编译错误：

```
[ERROR] \workspace\apache-analyser\src\main\java\com\apache\analyser\repository\RequestRepository.java:[7,7] 
error: name clash: <S>save(Iterable<S>) in CrudRepository and save(Iterable<? extends T#2>) in MongoRepository have the same erasure, yet neither overrides the other 
```

这是存储库界面：

```
package com.apache.analyser.repository;

import org.springframework.data.mongodb.repository.MongoRepository;

import com.apache.analyser.domain.Request;

public interface RequestRepository extends MongoRepository<Request, String> {

} 
```

以及用于初始化的 Spring 配置：

```
<mongo:repositories base-package="com.apache.analyser.repository" /> 
```

这似乎是一个基本设置，我正在尝试这样做，不知道为什么我会看到这个错误。有没有人看到或知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:50:26.803

我通过将 spring-data-commons-core 版本从 1.3.1 更改为 1.2.1 解决了我的问题。最后一个与 spring-data-mongodb 1.0.3 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:05:14.703

我通过恢复到 Java 6 JDK 解决了我的问题。我不确定为什么这不适用于 Java7，所以如果有人知道这将是很高兴听到！

# python - Python：递归创建对象

> ID：12443035
> 
> 赞同：2
> 
> 时间：2012-09-15T22:41:02.997
> 
> 标签：python, recursion

我想创建类型与声明它们的类相同的变量：

```
Class C:
    def __init__(self):
        self.v = C() 
```

它不起作用，是否有一些技巧可以使它起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T22:46:40.890

Python 不使用静态类型，因此不需要对类内对相同类型对象的引用做一些特殊的事情。

```
class Node:
    def __init__(self, left=None, right=None):
        self.left = left
        self.right = right

leaf1 = Node()
leaf2 = Node()
parent = Node(leaf1, leaf2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T22:49:54.057

另一种解决方案可能是使用 getter，它会在您需要时创建变量。

```
Class C:
    def __init__(self):
        self.v = None

    def get_v(self):
        if self.v == None:
            self.v = C()
        return self.v 
```

*更新：*这将根据需要使用新实例扩展 C 的实例链，从而懒惰地创建 C 的“无限”链。然而，由于原来的问题是针对红黑树，这个解决方案将不起作用，因为它会在访问时将 nil-trees（叶子）扩展到树节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T22:41:54.380

如果你这样做，你不能得到一个无限循环。

**编辑**：

```
class C:
    def __init__(self, member):
        self.v = member

if __name__ == "__main__":
    a = C(None)
    b = C(a) 
```

第一个实例需要一个虚假参数才能使此版本正常工作，但就像我在评论中所说的那样，我不明白您为什么要这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T22:49:44.187

您真正描述的是某种形式的链表。你可以这样做：

```
class C:
    def __init__(self):
        self.v = None

object_1 = C()
object_2 = C()
object_1.v = object_2 
```

您正在做的事情不起作用的原因是，您唯一`C`需要做的就是将一个公共数据成员设置为 C。因此，您会得到一个无限循环，因为这是 C 知道如何做的所有事情，如下图所示：

```
C's Procedure: When C is made, set a data member to a new C object 
```

（然后当它运行时你会得到这样的东西）

```
object = C()
# -> Object.v = C() <-c2
# --> c2.v = C() <-c3
# ---> c3.v = C() <- c4
# ....
# ....->cInfinity.v = c() 
```

因此，设置`v`为无，会发生以下情况。

```
object_1 = C()
# -> object_1.v = None
object_2 = C()
# -> object_2.v = None

object_1.v = object_2
# -> object_1.v = object_2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-05T03:31:04.670

另一种方法是使用默认字典，将其初始化为类名。

```
class Directory(defaultdict):
  def __init__(self):
    super().__init__(Directory) 
```

例如，这将为您提供一个包含一个子级字典的字典。您可以将它与您的 Node 对象一起使用。

# c - 如何区分没有相等运算符的两个整数？

> ID：12443041
> 
> 赞同：0
> 
> 时间：2012-09-15T22:42:21.247
> 
> 标签：c, integer, max, min

给定两个整数，如何在不使用 if 语句或选择（>=、> 和 =）的情况下区分这两个整数、最大值、最小值和相等性。我考虑过使用`fmin`and `fmax`，但我还需要知道如何知道这两个整数是否相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T22:56:01.183

假设 2 的补码算法：

```
int intcmp(int int1, int int2)
{
    int diff=int2-int1;
    unsigned int udiff;
    memcpy(&udiff, &diff, sizeof(diff));
    if(!udiff)
        return 0;  /* the two integers are equal */
    else if(udiff & 1<<(sizeof(udiff)*CHAR_BIT-1))  /* check the sign */
        return +1;  /* int1 < int2 */
    else
        return -1;  /* int2 < int1 */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T22:55:51.527

怎么样...

```
(num1-num2) ? ((num1-num2) & (MAX_INT+1) ? NEGATIVE : POSITIVE) : EQUAL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T22:51:11.233

你所说的“区分”是什么意思？如果没有某种分支操作，你不能让两个数字选择两个不同的执行路径，但理论上你可以用函数指针加载一个数组并操纵数字来选择不同的数组元素来调用（调用是一种形式分支）。

您可以更轻松地加载具有两个不同字符串指针的数组，并根据您获得的数字选择要打印的数组。

您可以通过与 1 进行与运算，根据它是奇数还是偶数将数字转换为 0 或 1，例如。您可以通过减去它们并查看是否为零来确定数字是否相等。等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T22:53:25.757

您可以使用以下内容生成蒙版

```
signed int x = ...;
signed int y = ...;
mask = (x - y) >> 31; 
```

如果 y>x 也是如此，`mask`否则（但要小心溢出）。然后，您可以使用、和使用此掩码构建您的结果。`-1``0``&``|``~`

# c# - 任何人都可以创建假证书吗？

> ID：12443047
> 
> 赞同：5
> 
> 时间：2012-09-15T22:43:10.167
> 
> 标签：c#, ssl, certificate

我已经创建了我的自签名认证并将其安装到我的客户端的受信任根目录并用于 .pfx [服务器端] 以确认认证和身份验证顺利进行，没有任何错误

但是有一个问题让我非常困惑，黑客有什么办法可以伪造我的客户的身份验证吗？用他的假证书和服务器？

例子 ：

我验证认证的代码是

```
 private static bool OnCertificateValidation(
        object sender,
        X509Certificate certificate,
        X509Chain chain,
        SslPolicyErrors sslPolicyErrors)
    {
        if (sslPolicyErrors == SslPolicyErrors.None)
        {
            if (CaVerify(chain) && ServerVerify(certificate)) return true;
        }
        return false;
    }

    public static bool CaVerify(X509Chain chain)
    {
        if (chain.ChainElements.Count > 0)
        {
            var certHash = chain.ChainElements[chain.ChainElements.Count - 1].Certificate.GetCertHash();
            if (certHash.Length == ApiCertHash.Length)
            {
                for (var idx = 0; idx < certHash.Length; idx++)
                {
                    if (certHash[idx] == ApiCertHash[idx])
                    {
                        return true;
                    }
                }
            }
        }
        return false;
    }

    public static bool ServerVerify(X509Certificate certificate)
    {
        var certHash = certificate.GetCertHash();

        if (certHash.Length == ApiCertHash.Length)
        {
            for (var idx = 0; idx < certHash.Length; idx++)
            {
                if (certHash[idx] == ApiCertHash[idx])
                {
                    return true;
                }
            }

        }
        return false;
    } 
```

那么有人可以创建一个伪造的certificate.pfx 并将其与他的伪造服务器相关联并将我的客户端连接到他的伪造服务器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T23:07:03.770

SSL 证书的通用名称 (CN) 字段应该是您尝试连接的主机的 DNS 名称。您“信任”“***受信任***的根证书颁发机构”，他们不会在未验证 CN 中列出的 DNS 名称的所有权的情况下颁发带有 CN 的证书。

您已通过手动将证书颁发机构 (CA) 添加到受信任列表来绕过此问题。因此，计算机信任您的个人 CA，它从服务器收到的证书被授权用于证书上列出的任何 CN。

攻击者无法制作“假”证书，因为颁发未经授权证书的 CA 不是“受信任的”，因此验证失败。

* * *

这就是合作代理通常的工作方式。IT 部门在工作站上安装 CA。当您发出 SSL 请求时，它会通过代理，当回复返回时，代理会拦截“`CN=*.google.com`由 VeriSign 签名”并发送到您的工作站“ `CN=*.google.com`，由 XYZ 公司代理签名”。因为 IT**预先安装**了受信任的根 CA，所以浏览器不会抱怨。

但是，如果您使用的浏览器不使用普通商店，或者没有安装 CA，您会收到证书错误，因为您的计算机会看到“由 XYZ Coperate 代理签名”证书，不知道该 CA 是谁，然后返回[`RemoteCertificateChainErrors`](http://msdn.microsoft.com/en-us/library/ms145055.aspx)关于`sslPolicyErrors`论点。

* * *

检查 CA 哈希的代码示例。

```
if (sslPolicyErrors == SslPolicyErrors.None)
{
    var apiCertHash = new byte[] { 0x79, 0x04, 0x15, 0xC5, 0xC4, 0xF1, 0x6A, 0xA7, 0xC9, 0x12, 0xBB, 0x23, 0xED, 0x5A, 0x60, 0xA7, 0x92, 0xA8, 0xD5, 0x94 };
    if(chain.ChainElements.Count > 0)
    {
        //Not 100% if the root is first or last in the array. Don't have the program running to check.
        var certHash = chain.ChainElements[chain.ChainElements.Count - 1].Certificate.GetCertHash();
        if (certHash.Length == apiCertHash.Length)
        {
            for (var idx = 0; idx < certHash.Length; idx++)
            {
                if (certHash[idx] == apiCertHash[idx])
                {
                    return true;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T02:53:37.267

如果您要使用自签名证书，则需要使用您提供的代码，否则只需使用即可

```
private static bool OnCertificateValidation(
    object sender,
    X509Certificate certificate,
    X509Chain chain,
    SslPolicyErrors sslPolicyErrors)
{
    if (sslPolicyErrors == SslPolicyErrors.None)
    {
        return true;

    }
    return false;
} 
```

# json - Android - 具有基本身份验证的 HttpClient JSON POST

> ID：12443050
> 
> 赞同：13
> 
> 时间：2012-09-15T22:43:52.137
> 
> 标签：json, httpclient

我正在尝试对 URL 实现一个简单`JSON`的帖子，该 URL`JSON`在正文中接受基本身份验证`ANDROID`。

我试过了，`HttpUrlConnection`但我得到`"unauthorized"`了，我的数据被发送到服务器。

我尝试的另一种方法是使用`HttpClient`，但现在我遇到了不同的问题。身份验证工作完美，但数据未发送到服务器......

可以肯定的是，我在一个简单的 Java 项目（不是 Android 环境）中设置了一个小测试。

这是我`POST`用于服务器的代码：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
ResponseHandler<String> resonseHandler = new BasicResponseHandler();
HttpPost postMethod = new HttpPost("http://localhost/api/v1/purchase/");    
postMethod.setEntity(new StringEntity("{\"amount_adult\" : 1, \"object_id\" : 13}"));
postMethod.setHeader( "Content-Type", "application/json");
String authorizationString = "Basic " + Base64.encodeToString(("travelbuddy" + ":" + "travelbuddy").getBytes(), Base64.DEFAULT); //this line is diffe
postMethod.setHeader("Authorization", authorizationString);
String response = httpClient.execute(postMethod,resonseHandler);
System.out.println("response :" + response); 
```

Java 项目中的代码运行良好。

当我在 Android 中尝试完全相同的代码时，我`internal server error`从服务器获取，这意味着尚未收到 JSON 数据。

我真的不明白为什么这在 JAVA 中有效，但在 Android 中无效。

我想要达到的效果，是以下命令：

```
curl --dump-header - -H "Content-Type: application/json" -X
POST --data '{"amount_adult":1, "object_id":13}' 
--user travelbuddy:travelbuddy http://localhost/api/v1/purchase/ 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-13T15:16:59.480

> ```
> String authorizationString = "Basic " + Base64.encodeToString(
>     ("travelbuddy" + ":" + "travelbuddy").getBytes(),
>     Base64.DEFAULT); 
> ```
> 
> ...

解决方案实际上有点简单：

```
 String authorizationString = "Basic " + Base64.encodeToString(
        ("travelbuddy" + ":" + "travelbuddy").getBytes(),
        Base64.NO_WRAP); // <=== Do not add '\n' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T00:08:41.757

最后，一切都整理好了。任何可能遇到此问题的人都是解决方案。

```
String authorizationString = "Basic " + Base64.encodeToString(("travelbuddy" + ":" + "travelbuddy").getBytes(), Base64.DEFAULT); //this line is diffe
postMethod.setHeader("Authorization", authorizationString); 
```

这个 Base64.encodeToString 在授权字符串的末尾附加了一个额外的“\n”。然后在服务器上的“\n”字符之后的下一行被视为请求的主体，当然是不正确的。

通过替换授权字符串中的所有新行将解决问题：

```
 String authorizationString = "Basic " + Base64.encodeToString(("travelbuddy" + ":" + "travelbuddy").getBytes(), Base64.DEFAULT); //this line is diffe
authorizationString.replace("\n", "");
    postMethod.setHeader("Authorization", authorizationString); 
```

容易修复但很难找到;-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-08T13:39:24.210

I think the simplest way is:

```
postMethod.addHeader(BasicScheme.authenticate(new UsernamePasswordCredentials(user, pass), "UTF-8", false)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T02:42:38.773

我认为你不应该在 url 中使用 localhost

# python - 有什么方法可以在 Python 2.5 上安装 PyOpenCV 或 OpenCV？

> ID：12443051
> 
> 赞同：0
> 
> 时间：2012-09-15T22:44:16.147
> 
> 标签：python, opencv, windows-xp, python-2.5

我真的想在我的计算机上获取 PyOpenCV 或 OpenCV，但所有下载都是针对 Python 2.6 或 Python 2.7。有没有办法在装有 Python 2.5 的 Windows XP 计算机上安装这些软件包之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:39:00.253

你应该从源代码安装，[安装页面](http://code.google.com/p/pyopencv/wiki/Installation)说这适用于 Python 2.5 以上。

# qt - 同一文件的 QFile 和 FileRef

> ID：12443058
> 
> 赞同：0
> 
> 时间：2012-09-15T22:45:26.363
> 
> 标签：qt, taglib

我的 Qt 程序有一点问题。
有一个函数可以下载一个 mp3 文件（使用 QFile）并在每次有新数据可供写入时调用。
写入这些数据后，我想构造一个 TagLib::FileRef 变量，以读取文件的比特率。问题是这个变量总是空的，因为文件已经打开了。
如何处理，而不必每次都关闭并重新打开文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:47:46.597

数据可能不会立即写入`QFile`磁盘，因此在同一文件上打开的另一个文件描述符将无法读取它。

尝试`QFile::flush()`在每次写入后调用。

# jquery - jquery切换，添加图像以关闭

> ID：12443062
> 
> 赞同：0
> 
> 时间：2012-09-15T22:46:06.283
> 
> 标签：jquery, toggle

我是 jQuery 新手，并创建了一个选项卡，单击时会滑出。我想添加一张图片让用户知道可以点击标签来隐藏它。

我目前在这里有这个 jsfiddle [http://jsfiddle.net/KcF4u/1/](http://jsfiddle.net/KcF4u/1/)

我目前的代码是

```
$('.box, aside h2').delay(2000);
$('.box').animate({ right:"-12"});
$('aside h2').animate({ right:"270"});
    $("aside h2").toggle(function(){
    $('.box').animate({ right:"-335"});
    $('aside h2').animate({ right:"-55"});
    },function(){
        $('.box').animate({ right:"-12"});
        $('aside h2').animate({ right:"270"});
    }); 
```

我已经包含了十字架的图像，但只希望在选项卡完全展开时才能看到图像。

任何想法如何做到这一点？

我也觉得我当前的代码有点臃肿，如果你能告诉我如何简化它，我将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T22:51:01.490

嗯，你为什么不在加载时用 .hide() 隐藏它，在展开时用 .show() 显示它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:17:22.023

好吧，这似乎有效。不是我的最大努力，但你知道。**编辑**：那好多了。

**CSS**

```
#news img {
    position: absolute;
    top: 6px;
    left: -65px;
    display: none;
} 
```

**Javascript**

```
var $aside = $('#news'),
    $box = $aside.find('.box'),
    $h2 = $aside.find('h2'),
    $img = $box.find('img');

$aside.on('click', 'h2, .box img', toggle);

$h2.data('toggleout', false);

setTimeout(toggle, 2000);

function toggle() {
    var pos = [-12, 270],
        active = true;

    if ($h2.data('toggleout')) {
        pos = [-355, -55];

        $img.hide();

        active = false;
    }

    $box.animate({right: pos[0]});
    $h2.animate({right: pos[1]}, show);

    $h2.data('toggleout', !$h2.data('toggleout'));

    function show() {
        !active || $img.show();
    }
} 
```

[http://jsfiddle.net/userdude/KcF4u/4/](http://jsfiddle.net/userdude/KcF4u/4/)

愚蠢的表演/隐藏被黑客攻击在一起。但它的工作...

# ios - 来自.....错误的“_cvload”参考

> ID：12443066
> 
> 赞同：0
> 
> 时间：2012-09-15T22:46:52.480
> 
> 标签：ios, opencv

我有一些关于错误消息的问题

cvload 参考来自......

和

```
implicit declaration of function 'cvload' is invalid in C99 
```

我该如何解决？（我认为这是同样的问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T23:06:36.257

第二条错误消息意味着您正在尝试调用该`cvload`函数，但尚未声明它。这可能是因为函数实际上是对象、类或命名空间的成员。要了解更多信息，我们必须查看完整的声明`cvload`以及试图调用它的函数。

# c++ - 用 VS2008 编译的 C/C++ 中的结构复制问题

> ID：12443067
> 
> 赞同：0
> 
> 时间：2012-09-15T22:46:56.113
> 
> 标签：c++, visual-studio, struct

我有以下使用 Visual Studio 2008 编译的 C/C++ 代码：

```
struct TEST_STRUCT{
    int nV;
    float v;

    TEST_STRUCT()
    {
        nV = 0;
        v = 0.0;
    }
};

TEST_STRUCT v1;
v1.nV = 100;
v1.v = 2.0;

const TEST_STRUCT v2;               //Making it 'const' to prevent any further changes
(TEST_STRUCT)v2 = v1;

int a = v2.nV;                      //'a' is 0, why??? 
```

为什么我会得到如此奇怪的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T22:50:51.747

你只是做了一些非常讨厌的事情：你丢弃了你的 const 限定符。

```
const TEST_STRUCT v2 = v1; 
```

或者

```
const TEST_STRUCT v2(v1); 
```

会给你你想要的......除非你决心违反非常非常糟糕的 const 限定符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T23:28:17.223

正如所指出的，您尝试分配的对象是临时对象，而原始对象保持不变。这是编译器没有抱怨的原因之一。如果你想投射实际的对象，你会使用这样的东西：

```
const_cast<TEST_STRUCT&>(v2) = v1; 
```

这仍然无法正常工作，因为这种强制转换在应用于开始其作为对象的生命周期的对象时会导致未定义的行为`const`：对象可能存在于只读内存中，或者编译器可能会通过其相应的成员替换对其成员的访问初始值。

设置对象成员的唯一方法`const`是在构造期间。您可以`struct`方便地使用两个构造函数：您声明的默认构造函数和编译器将为您创建的复制构造函数，除非它被声明或子对象之一（非静态成员或基类）没有复制构造函数。因此，您只需编写：

```
TEST_STRUCT const v2(v1); 
```

或者

```
TEST_STRUCT const v2 = v1; 
```

在这种情况下，两个调用在语义上是等效的，尽管后者调用理论上涉及两个副本。如果`v1`类型不同，则两个调用略有不同，后者调用首先转换然后复制。尽管副本通常被省略，但它仍然需要一个副本构造函数。

# delphi - Indy 9 是否与 Lazarus/Free Pascal 兼容

> ID：12443068
> 
> 赞同：3
> 
> 时间：2012-09-15T22:47:20.223
> 
> 标签：delphi, indy, freepascal, indy-9

我正在对将 delphi 7 应用程序移植到 Free Pascal 进行可行性分析。Indy 9 是否适用于 Free Pascal？您需要特殊版本还是只需要来自 Indy svn 存储库的最新 Indy 9？还是我必须升级到 Indy 10 才能让应用程序在 Free Pascal 中运行？很明显 Indy 10 会起作用，但 Indy 9 的答案似乎有点模糊，我找不到任何关于此事的最新消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T19:02:21.713

2005 年，我修补了 Indy 9 以与 FPC 一起工作。它**仅**适用于**Windows 32 位**，后来我迁移到 Indy 10，所以结果没有得到维护。

我搜索了一下，主要端口似乎是[http://www.stack.nl/~marcov/indy/indy9forfpc.zip](http://www.stack.nl/~marcov/indy/indy9forfpc.zip)

几个月后，我添加了这个存档 [http://www.stack.nl/~marcov/indy/indy9.zip](http://www.stack.nl/~marcov/indy/indy9.zip)，我怀疑这是我的一般 indy9 工作目录，并且可能包含以前存档中没有的一些演示。

我希望**自 2005 年以来没有维护**的足够说明。IOW，使用 Indy 10。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T03:06:55.060

Indy 9 并未正式支持 FPC。另一方面，我也不知道是否有人尝试过让它与 FPC 一起工作。您可以尝试创建一个 FPC 项目，将源文件添加到其中，然后看看会发生什么。

# javascript - 如何保留换行符

> ID：12443070
> 
> 赞同：8
> 
> 时间：2012-09-15T22:47:20.013
> 
> 标签：javascript, jquery, html

换行和回车……一定是编码中最复杂的部分。（为了我）

将此代码放在页面中（来自存储为的数据库`This from Ricardo\nAnd also a test\nRent 3000.00`）：

```
<td title="This from Ricard
And also a test
Rent 3000.00" style="width:198px;text-align:left">....</td> 
```

然后用它来获取带有'hidden'\n's的title属性

```
var v = $('#'+i).parent().attr('title');        // i = id of <span> child of <td> 
```

在此过程中，换行符会丢失并使用变量 v 进入文本输入框：

```
This from RicardAnd also a testRent 3000.00 
```

需要什么来保留并使其`\n's`看起来像下面这样？

![单击编辑后所需结果的屏幕截图（存在 \n）](../Images/925140d19fdb67f7099679f507e3f4dd.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-15T23:02:29.637

换行符仍然存在，只是浏览器尝试呈现它们。

如果您仍想查看“\n”，请尝试以下操作：

```
var v = $('td:first-of-type').attr('title').replace(/\n/g, "\\n"); 
```

否则，如果您不想看到“\n”而是看到换行符，您可以这样做：

```
var v = $('td:first-of-type').attr('title').replace(/\n/g, "<br/>"); 
```

检查这个[**JSBin**](http://jsbin.com/awucuw/6/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T23:03:17.080

您可以使用 javascript 全局方法`escape()`对字符串 v 进行编码，并使用 unescape() 对其进行解码以供使用。

这是你的 5 小提琴

[http://jsfiddle.net/jYNKG/](http://jsfiddle.net/jYNKG/)

在您的代码中，这一行可以是这样的

```
var v = escape($('#'+i).parent().attr('title')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T23:00:48.233

好吧，如果您将字符串放入**文本输入框中**，则不会有新行，因为文本输入框仅用于**单行文本。**

在`\n`那里 - 您可以尝试按它们拆分：

```
lines = str.split("\n") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T23:01:37.113

这个问题让我很好奇，所以我不得不检查来源：[http ://www.w3.org/TR/html401/struct/global.html#adef-title](http://www.w3.org/TR/html401/struct/global.html#adef-title)

W3C 对如何处理属性中各种形式的空白完全保持沉默，因此我不得不假设它遵循与 HTML 相同的规则。

在 HTML 下，除非在一个`<PRE>`元素或类似`CSS`规则下，所有的空白都被折叠成一个单独的空间来呈现。

因此：

```
<p>The    quick  brown
fox
jumped

over the
lazy dog</p> 
```

呈现与以下内容相同：

```
<p>The quick  brown fox jumped over the lazy dog</p> 
```

这种 HTML 行为，再加上用户代理（浏览器）可以`TITLE`按照他们希望的任何方式呈现属性，使得大多数（如果不是全部）这样的代理可能没有理由保留行尾标记（`carriage return`和`newline`或`\r\n`）。

编辑：

如果格式很重要，则`title`可以转义文本并将其放入`data-*`元素中。使用鼠标悬停，自定义弹出框可以显示格式化的 HTML。

编辑 2 - 取自您的原始问题：

```
<td data-title="This from Ricard<br><br>And also a test<br>Rent 3000.00"
style="width:198px;text-align:left">
 ....
</td> 
```

您可以在此处阅读有关`data-*`属性的更多信息：[http ://www.javascriptkit.com/dhtmltutors/customattributes.shtml](http://www.javascriptkit.com/dhtmltutors/customattributes.shtml)

简而言之，在某些`mouseover`代码中，您可以找到以下文本：

```
var mytitle = <element>.getAttribute("data-title"); 
```

然后使用弹出的 div 显示 mytitle

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T23:02:46.513

您需要直接从数据库中读取它。为站点生成 HTML 时，正在解释行尾，这就是您在代码中看到多行 td 元素的原因。

当你去引用那个 td 元素时，它会在一行中吐出值。一旦这些数据丢失，您将无法以任何方式重新创建它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-15T23:07:10.010

根据 HTML 规范，所有换行符都应该被“转义”，也就是由`&#xA;`

[http://www.w3.org/TR/2006/REC-xml11-20060816/#sec-line-ends](http://www.w3.org/TR/2006/REC-xml11-20060816/#sec-line-ends)

[http://www.w3.org/TR/2006/REC-xml11-20060816/#AVNormalize](http://www.w3.org/TR/2006/REC-xml11-20060816/#AVNormalize)

# r - 使用多表结构的最实用方法

> ID：12443074
> 
> 赞同：0
> 
> 时间：2012-09-15T22:48:37.557
> 
> 标签：r, structure, lapply

我根据目录中的一堆 csv 文件填充了一个数据结构，该目录显示了一系列县（行）的就业、家庭等增长的时间序列（每年）。虽然我可以遍历对象的长度`dat`并将每个表填充到数据帧中，然后依次处理它，但我对`lapply`函数系列很感兴趣，可能会避免循环并使代码更简单，更容易维护.

假设我想对恰好位于结构中所有表中的列执行操作（可能是`grep`将所有列重命名为嵌入名称中的年份部分，或者将`county_id.li8`变量转换为`factor`具有适当因子水平的 a。 ) 我无法正确索引结构以下降到第二和第三级，并且还`lapply`对这些相同的列应用调用。例如，我可以通过以下方式访问其中一个子表中的county_id.li8 列

```
> head(dat[1][[1]][1])
  county_id.i8
1            1
2            7
3           17
4           21
5           23
6           24 
```

但这只有通过插入特定的索引才有效。换句话说，我将如何进行以下工作（此处将字母分配为因子级别作为使用 lapply 处理结构中表中重复列的通用示例）。

`lapply(dat[][[]][1],factor, labels=letters[1:9]) #indices ommitted here; looking for general notation for access to the first column in all tables in structure`

关于如何正确索引*所有*级别的几个级别以及最终如何在嵌入结构中的不同表中的列上调用 lappy 函数的任何指针？（数据如下）。

```
> dat<-lapply(fileList,read.csv,header=T,sep = "\t")
> dput(dat)
list(structure(list(county_id.i8 = c(1L, 7L, 17L, 21L, 23L, 24L, 
28L, 35L, 38L, 39L, 41L, 43L, 44L, 48L, 49L, 50L, 57L), county_employment_pda_2010.f8 = c(313325, 
102645, 0, 19302, 0, 0, 9340, 0, 483207, 0, 110998, 444452, 0, 
22426, 74123, 0, 0), county_employment_pda_2011.f8 = c(313216, 
102576, 0, 19281, 0, 0, 9338, 0, 483043, 0, 110974, 445445, 0, 
22417, 74017, 0, 0), county_employment_pda_2012.f8 = c(313238, 
102504, 0, 19252, 0, 0, 9333, 0, 482906, 0, 110947, 446132, 0, 
22416, 73971, 0, 0), county_employment_pda_2013.f8 = c(313137, 
102418, 0, 19262, 0, 0, 9352, 0, 482697, 0, 110867, 447037, 0, 
22373, 73946, 0, 0), county_employment_pda_2014.f8 = c(313114, 
102399, 0, 19255, 0, 0, 9357, 0, 482469, 0, 110784, 447622, 0, 
22359, 73874, 0, 0), county_employment_pda_2015.f8 = c(312961, 
102281, 0, 19249, 0, 0, 9357, 0, 482181, 0, 110733, 448479, 0, 
22358, 73877, 0, 0), county_employment_pda_2016.f8 = c(312943, 
102273, 0, 19239, 0, 0, 9329, 0, 481983, 0, 110719, 449118, 0, 
22367, 73848, 0, 0), county_employment_pda_2017.f8 = c(312839, 
102216, 0, 19231, 0, 0, 9329, 0, 481889, 0, 110653, 450126, 0, 
22360, 73789, 0, 0), county_employment_pda_2018.f8 = c(312760, 
102188, 0, 19219, 0, 0, 9331, 0, 481795, 0, 110620, 451350, 0, 
22341, 73748, 0, 0), county_employment_pda_2019.f8 = c(312723, 
102139, 0, 19214, 0, 0, 9316, 0, 481816, 0, 110484, 452171, 0, 
22311, 73725, 0, 0), county_employment_pda_2020.f8 = c(312531, 
102094, 0, 19208, 0, 0, 9316, 0, 481812, 0, 110444, 453251, 0, 
22294, 73681, 0, 0)), .Names = c("county_id.i8", "county_employment_pda_2010.f8", 
"county_employment_pda_2011.f8", "county_employment_pda_2012.f8", 
"county_employment_pda_2013.f8", "county_employment_pda_2014.f8", 
"county_employment_pda_2015.f8", "county_employment_pda_2016.f8", 
"county_employment_pda_2017.f8", "county_employment_pda_2018.f8", 
"county_employment_pda_2019.f8", "county_employment_pda_2020.f8"
), class = "data.frame", row.names = c(NA, -17L)), structure(list(
    county_id.i8 = c(1L, 7L, 17L, 21L, 23L, 24L, 28L, 35L, 38L, 
    39L, 41L, 43L, 44L, 48L, 49L, 50L, 57L), county_employment_tpp_2010.f8 = c(450548, 
    164024, 0, 76243, 0, 0, 9280, 0, 578345, 0, 201026, 709110, 
    0, 39157, 79052, 0, 0), county_employment_tpp_2011.f8 = c(450309, 
    163934, 0, 76189, 0, 0, 9280, 0, 578065, 0, 200971, 710321, 
    0, 39154, 78941, 0, 0), county_employment_tpp_2012.f8 = c(450223, 
    163828, 0, 76125, 0, 0, 9278, 0, 577849, 0, 200922, 710952, 
    0, 39137, 78894, 0, 0), county_employment_tpp_2013.f8 = c(450078, 
    163780, 0, 76119, 0, 0, 9297, 0, 577584, 0, 200821, 712099, 
    0, 39123, 78858, 0, 0), county_employment_tpp_2014.f8 = c(449954, 
    163635, 0, 76071, 0, 0, 9297, 0, 577275, 0, 200757, 713066, 
    0, 39093, 78754, 0, 0), county_employment_tpp_2015.f8 = c(449743, 
    163455, 0, 76039, 0, 0, 9298, 0, 576946, 0, 200697, 713844, 
    0, 39095, 78671, 0, 0), county_employment_tpp_2016.f8 = c(449702, 
    163416, 0, 76012, 0, 0, 9270, 0, 576679, 0, 200621, 714573, 
    0, 39095, 78608, 0, 0), county_employment_tpp_2017.f8 = c(449493, 
    163366, 0, 75941, 0, 0, 9264, 0, 576523, 0, 200540, 715484, 
    0, 39093, 78554, 0, 0), county_employment_tpp_2018.f8 = c(449325, 
    163290, 0, 75815, 0, 0, 9266, 0, 576412, 0, 200353, 716977, 
    0, 39052, 78510, 0, 0), county_employment_tpp_2019.f8 = c(449077, 
    163186, 0, 75750, 0, 0, 9251, 0, 576354, 0, 200169, 717829, 
    0, 39018, 78487, 0, 0), county_employment_tpp_2020.f8 = c(448740, 
    163053, 0, 75704, 0, 0, 9250, 0, 576269, 0, 200122, 718708, 
    0, 39008, 78352, 0, 0)), .Names = c("county_id.i8", "county_employment_tpp_2010.f8", 
"county_employment_tpp_2011.f8", "county_employment_tpp_2012.f8", 
"county_employment_tpp_2013.f8", "county_employment_tpp_2014.f8", 
"county_employment_tpp_2015.f8", "county_employment_tpp_2016.f8", 
"county_employment_tpp_2017.f8", "county_employment_tpp_2018.f8", 
"county_employment_tpp_2019.f8", "county_employment_tpp_2020.f8"
), class = "data.frame", row.names = c(NA, -17L)), structure(list(
    county_id.i8 = c(1L, 7L, 17L, 21L, 23L, 24L, 28L, 35L, 38L, 
    39L, 41L, 43L, 44L, 48L, 49L, 50L, 57L), county_empres_pda_2010.f8 = c(201923, 
    43963, 0, 8772, 0, 0, 815, 0, 186251, 0, 78408, 160782, 0, 
    7238, 38390, 0, 0), county_empres_pda_2011.f8 = c(201783, 
    43849, 0, 8732, 0, 0, 795, 0, 213456, 0, 82832, 167626, 0, 
    7284, 37663, 0, 0), county_empres_pda_2012.f8 = c(202059, 
    44012, 0, 8742, 0, 0, 795, 0, 225552, 0, 87327, 167766, 0, 
    7498, 37518, 0, 0), county_empres_pda_2013.f8 = c(201918, 
    43878, 0, 8715, 0, 0, 789, 0, 232941, 0, 93303, 170896, 0, 
    7502, 38012, 0, 0), county_empres_pda_2014.f8 = c(209007, 
    43640, 0, 8648, 0, 0, 787, 0, 235599, 0, 96654, 174762, 0, 
    7530, 37910, 0, 0), county_empres_pda_2015.f8 = c(212050, 
    43789, 0, 8572, 0, 0, 776, 0, 234853, 0, 100111, 179057, 
    0, 7551, 37825, 0, 0), county_empres_pda_2016.f8 = c(214927, 
    43883, 0, 8531, 0, 0, 764, 0, 239730, 0, 102522, 182816, 
    0, 7518, 37677, 0, 0), county_empres_pda_2017.f8 = c(218551, 
    44331, 0, 8474, 0, 0, 764, 0, 240854, 0, 105426, 186818, 
    0, 7531, 37545, 0, 0), county_empres_pda_2018.f8 = c(220972, 
    45006, 0, 8432, 0, 0, 789, 0, 241628, 0, 107229, 190735, 
    0, 7546, 37596, 0, 0), county_empres_pda_2019.f8 = c(223044, 
    45761, 0, 8379, 0, 0, 818, 0, 244283, 0, 108506, 194185, 
    0, 7521, 37502, 0, 0), county_empres_pda_2020.f8 = c(224509, 
    46506, 0, 8394, 0, 0, 821, 0, 247482, 0, 109911, 197017, 
    0, 7504, 37591, 0, 0)), .Names = c("county_id.i8", "county_empres_pda_2010.f8", 
"county_empres_pda_2011.f8", "county_empres_pda_2012.f8", "county_empres_pda_2013.f8", 
"county_empres_pda_2014.f8", "county_empres_pda_2015.f8", "county_empres_pda_2016.f8", 
"county_empres_pda_2017.f8", "county_empres_pda_2018.f8", "county_empres_pda_2019.f8", 
"county_empres_pda_2020.f8"), class = "data.frame", row.names = c(NA, 
-17L)), structure(list(county_id.i8 = c(1L, 7L, 17L, 21L, 23L, 
24L, 28L, 35L, 38L, 39L, 41L, 43L, 44L, 48L, 49L, 50L, 57L), 
    county_empres_tpp_2010.f8 = c(443752, 155338, 0, 65907, 0, 
    0, 2828, 0, 456214, 0, 206571, 617212, 0, 37273, 48617, 0, 
    0), county_empres_tpp_2011.f8 = c(445080, 154940, 0, 65404, 
    0, 0, 2763, 0, 487189, 0, 212888, 630774, 0, 37297, 47577, 
    0, 0), county_empres_tpp_2012.f8 = c(445075, 155693, 0, 65455, 
    0, 0, 2774, 0, 499931, 0, 219766, 628413, 0, 37542, 47263, 
    0, 0), county_empres_tpp_2013.f8 = c(444322, 155348, 0, 65132, 
    0, 0, 2741, 0, 507989, 0, 228214, 632356, 0, 37431, 47767, 
    0, 0), county_empres_tpp_2014.f8 = c(451863, 154962, 0, 64733, 
    0, 0, 2723, 0, 509617, 0, 234769, 637378, 0, 37330, 47588, 
    0, 0), county_empres_tpp_2015.f8 = c(454943, 155713, 0, 64439, 
    0, 0, 2703, 0, 506948, 0, 241141, 643996, 0, 37412, 47541, 
    0, 0), county_empres_tpp_2016.f8 = c(458014, 156027, 0, 64177, 
    0, 0, 2673, 0, 512542, 0, 245412, 649009, 0, 37347, 47498, 
    0, 0), county_empres_tpp_2017.f8 = c(462516, 156941, 0, 63885, 
    0, 0, 2662, 0, 512233, 0, 249690, 654784, 0, 37323, 47328, 
    0, 0), county_empres_tpp_2018.f8 = c(465893, 158289, 0, 63755, 
    0, 0, 2713, 0, 511619, 0, 252055, 660675, 0, 37380, 47365, 
    0, 0), county_empres_tpp_2019.f8 = c(468709, 159607, 0, 63518, 
    0, 0, 2776, 0, 513150, 0, 253851, 666054, 0, 37360, 47326, 
    0, 0), county_empres_tpp_2020.f8 = c(471780, 160499, 0, 63788, 
    0, 0, 2781, 0, 515528, 0, 255491, 669768, 0, 37373, 47399, 
    0, 0)), .Names = c("county_id.i8", "county_empres_tpp_2010.f8", 
"county_empres_tpp_2011.f8", "county_empres_tpp_2012.f8", "county_empres_tpp_2013.f8", 
"county_empres_tpp_2014.f8", "county_empres_tpp_2015.f8", "county_empres_tpp_2016.f8", 
"county_empres_tpp_2017.f8", "county_empres_tpp_2018.f8", "county_empres_tpp_2019.f8", 
"county_empres_tpp_2020.f8"), class = "data.frame", row.names = c(NA, 
-17L)), structure(list(county_id.i8 = c(1L, 7L, 17L, 21L, 23L, 
24L, 28L, 35L, 38L, 39L, 41L, 43L, 44L, 48L, 49L, 50L, 57L), 
    county_households_pda_2010.f8 = c(170187, 37225, 0, 7006, 
    0, 0, 651, 0, 156702, 0, 53789, 111880, 0, 6479, 29142, 0, 
    0), county_households_pda_2011.f8 = c(169149, 37004, 0, 6943, 
    0, 0, 638, 0, 174237, 0, 56758, 115577, 0, 6497, 28608, 0, 
    0), county_households_pda_2012.f8 = c(169278, 37095, 0, 6955, 
    0, 0, 637, 0, 183566, 0, 60653, 115752, 0, 6634, 28529, 0, 
    0), county_households_pda_2013.f8 = c(169023, 36924, 0, 6933, 
    0, 0, 633, 0, 189987, 0, 65709, 117615, 0, 6626, 29128, 0, 
    0), county_households_pda_2014.f8 = c(174100, 36699, 0, 6889, 
    0, 0, 629, 0, 192437, 0, 68543, 120561, 0, 6643, 29129, 0, 
    0), county_households_pda_2015.f8 = c(176860, 36749, 0, 6839, 
    0, 0, 624, 0, 191746, 0, 71450, 123785, 0, 6646, 29103, 0, 
    0), county_households_pda_2016.f8 = c(179434, 36761, 0, 6812, 
    0, 0, 618, 0, 196075, 0, 73490, 126676, 0, 6616, 28999, 0, 
    0), county_households_pda_2017.f8 = c(182536, 37124, 0, 6772, 
    0, 0, 619, 0, 197431, 0, 75885, 129800, 0, 6618, 28961, 0, 
    0), county_households_pda_2018.f8 = c(184556, 37722, 0, 6736, 
    0, 0, 638, 0, 198440, 0, 77483, 132850, 0, 6620, 29037, 0, 
    0), county_households_pda_2019.f8 = c(186021, 38369, 0, 6698, 
    0, 0, 663, 0, 201268, 0, 78655, 135419, 0, 6591, 29009, 0, 
    0), county_households_pda_2020.f8 = c(187210, 38907, 0, 6717, 
    0, 0, 665, 0, 204334, 0, 79840, 137468, 0, 6569, 29120, 0, 
    0)), .Names = c("county_id.i8", "county_households_pda_2010.f8", 
"county_households_pda_2011.f8", "county_households_pda_2012.f8", 
"county_households_pda_2013.f8", "county_households_pda_2014.f8", 
"county_households_pda_2015.f8", "county_households_pda_2016.f8", 
"county_households_pda_2017.f8", "county_households_pda_2018.f8", 
"county_households_pda_2019.f8", "county_households_pda_2020.f8"
), class = "data.frame", row.names = c(NA, -17L)), structure(list(
    county_id.i8 = c(1L, 7L, 17L, 21L, 23L, 24L, 28L, 35L, 38L, 
    39L, 41L, 43L, 44L, 48L, 49L, 50L, 57L), county_households_tpp_2010.f8 = c(355208, 
    123536, 0, 50467, 0, 0, 2424, 0, 345393, 0, 138895, 406129, 
    0, 31138, 37070, 0, 0), county_households_tpp_2011.f8 = c(354126, 
    122641, 0, 49973, 0, 0, 2362, 0, 365214, 0, 143132, 413115, 
    0, 30966, 36340, 0, 0), county_households_tpp_2012.f8 = c(354044, 
    123118, 0, 50018, 0, 0, 2363, 0, 375399, 0, 149277, 411874, 
    0, 31089, 36140, 0, 0), county_households_tpp_2013.f8 = c(353169, 
    122709, 0, 49794, 0, 0, 2345, 0, 382912, 0, 156550, 414253, 
    0, 30988, 36782, 0, 0), county_households_tpp_2014.f8 = c(358483, 
    122366, 0, 49502, 0, 0, 2326, 0, 385046, 0, 162182, 418427, 
    0, 30902, 36727, 0, 0), county_households_tpp_2015.f8 = c(361320, 
    122856, 0, 49265, 0, 0, 2309, 0, 383106, 0, 167712, 423715, 
    0, 30946, 36751, 0, 0), county_households_tpp_2016.f8 = c(364010, 
    123010, 0, 49051, 0, 0, 2286, 0, 388265, 0, 171458, 427874, 
    0, 30863, 36738, 0, 0), county_households_tpp_2017.f8 = c(367824, 
    123698, 0, 48857, 0, 0, 2281, 0, 388946, 0, 175097, 432592, 
    0, 30811, 36694, 0, 0), county_households_tpp_2018.f8 = c(370694, 
    124838, 0, 48781, 0, 0, 2329, 0, 389217, 0, 177329, 437403, 
    0, 30821, 36766, 0, 0), county_households_tpp_2019.f8 = c(372758, 
    125835, 0, 48614, 0, 0, 2382, 0, 391713, 0, 179043, 441576, 
    0, 30800, 36802, 0, 0), county_households_tpp_2020.f8 = c(375254, 
    126557, 0, 48859, 0, 0, 2386, 0, 394477, 0, 180661, 444561, 
    0, 30801, 36884, 0, 0)), .Names = c("county_id.i8", "county_households_tpp_2010.f8", 
"county_households_tpp_2011.f8", "county_households_tpp_2012.f8", 
"county_households_tpp_2013.f8", "county_households_tpp_2014.f8", 
"county_households_tpp_2015.f8", "county_households_tpp_2016.f8", 
"county_households_tpp_2017.f8", "county_households_tpp_2018.f8", 
"county_households_tpp_2019.f8", "county_households_tpp_2020.f8"
), class = "data.frame", row.names = c(NA, -17L))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T23:16:50.200

```
# I read your data into my_list
library(plyr)
# There is no difference between lappy and llply, except that llply is nicer
# because it preserves names. See ?llply for more information.

new_list <- llply(my_list, function(foo) {
    # Notice that foo now holds the contents of each list item.
    # so class(foo) should give you data.frame
    # you can now access columns just by referencing foo$something
    # rather than using an index
    nicer_data <- melt(foo, id.vars = 1)
    names(nicer_data) <- c("country_id", "year", "value")
    # This returns only the year portion of the string
    nicer_data$year <- substring(nicer_data$year,first=23, last=26)
    return(nicer_data)
    }) 
```

# matlab - 计算字符串在序列中出现的次数

> ID：12443075
> 
> 赞同：0
> 
> 时间：2012-09-15T22:48:47.463
> 
> 标签：matlab, matrix, markov-chains

我有一个矩阵 X，它由我从马尔可夫链中获得的一些序列组成。我有 5 个州 1,2,3,4,5。因此，例如第 1 行是一个序列，第 2 行是一个单独的独立序列。

```
 4   4   4   4   4   5   3   0   0   0
    1   4   2   2   2   2   3   4   0   0
x=  4   4   1   2   1   3   1   0   0   0
    2   4   4   2   4   3   3   5   0   0
    4   4   5   4   2   1   2   4   3   5 
```

我想计算状态 1..5 之间的转换次数。IE。1to1,1to2, 1to3, 1to4, 1to5。2to1 等。1to1 发生 0 次。但是 4to4 发生了 6 次。等等我们可以忽略零，它们是导入 excel 文件的人工制品。

例如[这个](https://stats.stackexchange.com/questions/36099/estimating-markov-transition-probabilities-from-sequence-data#comment72678_36099)问题，但在那里，序列已经连接起来。如果您需要进一步说明，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T00:06:41.170

这是执行您想要的代码的代码：

```
N = max(max(X));                                   %# Number of states
[P, Q] = meshgrid(1:N, 1:N);
Y = [X, zeros(size(X, 1), 1)]';                    %# Pad for concatenation
count_func = @(p, q)numel(strfind(Y(:)', [p, q])); %# Counts p->q transitions
P = reshape(arrayfun(count_func, P, Q), N, N) 
```

简短说明： 的所有行都`X`放入一个长向量`Y`中（填充是必要的，以便相邻行中没有不希望的过渡）。`p`并`q`保存状态转换的所有可能组合，并`count_func`计算`Y`特定`p`and的转换次数`q`。`arrayfun`调用`count_func`和 的所有可能组合，`p`并相应地`q`生成矩阵`P`。

对于您的示例，此代码产生矩阵`P`：

```
P =
     0   2   1   1   0
     2   3   0   3   0
     1   1   1   2   1
     1   3   1   7   1
     0   0   2   2   0 
```

其中`P(m, n)`表示从第*m*个状态到第*n*个状态的转换次数。

* * *

**编辑：**如果您有兴趣在后续问题中找到两步转换矩阵（即*i* -th state → *j* -th state → *i*`count_func` -th state），您只需要稍微改变，比如所以：

```
count_func = @(p, q)numel(strfind(Y(:)', [p, q, p])); 
```

这应该产生：

```
P =

   0   1   0   0   0
   1   2   0   1   0
   1   0   0   0   0
   0   0   0   3   0
   0   0   0   1   0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:00:23.463

另一种解决方案：

```
%# Define the example data:
x = [
4 4 4 4 4 5 3 0 0 0
1 4 2 2 2 2 3 4 0 0
4 4 1 2 1 3 1 0 0 0
2 4 4 2 4 3 3 5 0 0
4 4 5 4 2 1 2 4 3 5
];

%# Number of different states.
N = max(max(x));

%# Original states.
OrigStateVector = repmat((1:N)', N, 1);

%# Destination states corresponding to OrigStateVector.
DestStateVector = reshape(repmat((1:N)', 1, N)', N^2, 1);

%# Pad rows of x with zeros and reshape it to a horizontal vector.
xVector = reshape([ x, zeros(size(x,1),1) ]', 1, numel(x)+size(x,1));

%# Compute the number of state transitions and store the result in ResultMatrix.
ResultMatrix = reshape(cellfun(@(z) numel(z), arrayfun(@(x,y) strfind(xVector, [x y]), OrigStateVector, DestStateVector, 'UniformOutput', false)), N, N)';

ResultMatrix =
 0     2     1     1     0
 2     3     0     3     0
 1     1     1     2     1
 1     3     1     7     1
 0     0     2     2     0 
```

# android - Android 模拟器在 ig4icd32.dll 上崩溃，异常代码为 c0000005（emulator-arm.exe 已停止工作）

> ID：12443076
> 
> 赞同：2
> 
> 时间：2012-09-15T22:48:48.377
> 
> 标签：android, android-emulator, crash, emulation

我已经在 Android 上开发应用程序有一段时间了。我的笔记本电脑上安装了开发环境，直到今天早上一切正常。我安装了 v15 和 v10 SDK 平台和模拟器。

只是为了尝试 Android Jelly Bean 模拟器，我尝试从 SDK Manager 下载 v16 SDK。这导致了 SDK 管理器和 ADT 插件的一系列更新。从那以后，每当我尝试启动模拟器时，我就一直面临这个问题。我进行了很多搜索并尝试了以下所有方法，但错误仍然存​​在。我有一台配备 Mobile Intel(R) 4 Series Express Chipset Family 显卡的 Intel Core 2 Duo 笔记本电脑。现在已安装最新的驱动程序版本 8.15.10.2555。

1) 卸载新安装的 Jelly Bean v16 SDK 组件。

2）卸载并重新安装Android SDK和ADT插件。

3) 更新了我的图形驱动程序。

4) 尝试了 AVD 设置组合的数量（相机关闭、GPS 关闭、加速度计关闭、分辨率、RAM 大小、SD 卡大小）

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T19:43:53.537

最后，我能够使用网络上发布的解决方法来完成这项工作......

只需转到 /tools/lib 并将文件 libOpenglRender.dll 重命名为其他名称，例如 rename libOpenglRender.dll.bak....

你应该很好。模拟器开始工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T07:42:45.553

没有那个文件，Genymotion 无法运行设备！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-21T01:28:52.507

我升级了我的 android sdk 和模拟器并遇到了同样的问题，所以卸载了模拟器和 sdk 工具 v26 在 android sdk 工具 <= 25.2.3 中使用模拟器（提取并复制到 sdk 文件夹）下载并更新英特尔 haxm for android 到 v6.1.2。它对我有用

# ember.js - Ember.js / Handlebars.js 错误解析车把模板中的属性名称

> ID：12443079
> 
> 赞同：1
> 
> 时间：2012-09-15T22:49:13.477
> 
> 标签：ember.js, handlebars.js

我刚刚开始查看 Ember.js 并且遇到了包含模板化属性的车把模板的问题：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" />
<script type="text/javascript" src="js/handlebars-1.0.0.beta.6.js" />
<script type="text/javascript" src="js/ember-1.0.pre.js" />
<script type="text/x-handlebars" data-template-name="say-hello">
    <p>First name: {{name.firstName}}</p>
    <p>Last name: {{name.lastName}}</p>
    <p>Last full: {{name.fullName}}</p>

    <a href="#" {{action "edit" on="click"}}>Edit</a>

</script>
</head>
<body>
<h2>Hello World!</h2>
</body>
</html> 
```

我在 Chrome 中收到错误消息：

```
This page contains the following errors:

error on line 14 at column 10: error parsing attribute name
Below is a rendering of the page up to the first error. 
```

我在 Firefox 中也遇到错误。

我猜这是试图验证文档的浏览器，有没有办法避免这种情况并仍然保留文档类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T00:08:28.560

我怀疑 XHTML 文档类型是问题所在。您是否尝试过使用 HTML 5 文档类型`<!DOCTYPE html>`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:13:31.580

看起来车把模板不是有效的 xhtml。

tomcat 与我的文件一起发送的内容类型是 (application/xhtml+xml)。当您在文档上使用扩展名 .xhtml 时会发生这种情况。

发生这种情况时，文档中的 doctype 是什么没有区别，文档中会发生 xhtml 验证，并且无法加载。

就我而言，我想我可以预编译把手模板以使其在 xhtml 中工作。

# java - 在Java中查找两个日期之间的差异

> ID：12443082
> 
> 赞同：1
> 
> 时间：2012-09-15T22:49:27.377
> 
> 标签：java

在 Java 中，有没有办法找到两个日期之间的天数，因为其中一个或两个日期可能在 1970 年之前（即不能使用 Date 对象）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T22:52:23.443

我强烈推荐[Joda Time](http://joda-time.sourceforge.net)图书馆。例子：

```
Days.daysBetween(startDate.toDateMidnight() , endDate.toDateMidnight() ).getDays() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T22:56:38.047

嗯？ [`Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)可用于表示早于 1970 年的日期。只需将负数传递给其构造函数即可。

```
System.out.println(new Date(-1000));
System.out.println(new Date("Jul 4 1776"));  // note: deprecated API.  Just an easy example 
```

印刷

```
Wed Dec 31 15:59:59 PST 1969
Thu Jul 04 00:00:00 PST 1776 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T23:09:29.290

你也可以试试 GregorianCalendar。请注意，月份是基于 0 的，而天是基于 1 的

```
import java.util.GregorianCalendar;

//january, 1st, 2012
GregorianCalendar c1 = new GregorianCalendar(2012, 0, 1);
//march, 3rd, 1912
GregorianCalendar c2 = new GregorianCalendar(1912, 2, 3);
long differenceInSeconds = (c1.getTimeInMillis() - c2.getTimeInMillis()) / 1000; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-29T10:12:00.250

小心根据这样的时间戳计算天数：

> (to.getTime() - from.getTime()) / (1000L * 60 * 60 * 24)

无论使用 Date 还是 GregorianCalender。

如果 3 月的最后一个星期日在此时间间隔内，这在欧洲不起作用。

In Europe time is switched two times a year for one hour. - Winter time ==> Summer time (last Sunday in March) - Summer time ==> Winter time (last Sunday in October)

**So the last Sunday in March has only 23 hours. In consequnce calculation returns one day less.**

# iphone - 使用自定义坐标放置蓝点 Xcode

> ID：12443086
> 
> 赞同：0
> 
> 时间：2012-09-15T22:49:54.487
> 
> 标签：iphone, objective-c, ios, xcode, google-maps

我有一张地图，我想在上面放一个蓝点并在上面画圈。但不是在我当前的位置，而是自定义的纬度和经度，就像我选择要放置蓝点和圆圈的位置一样。

所以要去做。提前致谢...

# database - 无法执行 JDBC 批量更新；SQL 的未分类 SQLException

> ID：12443090
> 
> 赞同：1
> 
> 时间：2012-09-15T22:50:37.313
> 
> 标签：database, spring, hibernate, jdbc

我需要一些帮助，让我告诉你我的上下文，我们有两个测试环境，其中一个 Web 应用程序被定向到 postgres 中的一个数据库，应用程序在这里运行得很好，在另一个环境中我们有两个数据库从属一台和主一台，在应用程序中显示与数据库相关的错误。

有一个名为讨论的表，另一个名为 network_discussion，当我立即保存讨论时，我保存到 network_discussion，但在第二个环境中不起作用，我认为这与 GRANT 访问有关，但显然不是，这是错误跟踪：

```
2012-09-15 15:10:27,162|TP-Processor12|ERROR|mp_sites|web|mpmvstage|/home/matchpoint-web/yfroot||Hibernate operation: Could not execute JDBC batch update; uncategorized SQLException for SQL [insert into users.network_discussion (network_id, user_discussion_id, title, last_updated_dt, id) values (?, ?, ?, ?, ?)]; SQL state [null]; error code [0]; Batch entry 0 insert into users.network_discussion (network_id, user_discussion_id, title, last_updated_dt, id) values (33214047252677632, 33495522229786655, company-corp.com_newdisa, 2012-09-15 15:10:27.153000 -07:00, 33495522229786656) was aborted.  Call getNextException to see the cause.; nested exception is java.sql.BatchUpdateException: Batch entry 0 insert into users.network_discussion (network_id, user_discussion_id, title, last_updated_dt, id) values (33214047252677632, 33495522229786655, company-corp.com_newdisa, 2012-09-15 15:10:27.153000 -07:00, 33495522229786656) was aborted.  Call getNextException to see the cause.
org.springframework.jdbc.UncategorizedSQLException: Hibernate operation: Could not execute JDBC batch update; uncategorized SQLException for SQL [insert into users.network_discussion (network_id, user_discussion_id, title, last_updated_dt, id) values (?, ?, ?, ?, ?)]; SQL state [null]; error code [0]; Batch entry 0 insert into users.network_discussion (network_id, user_discussion_id, title, last_updated_dt, id) values (33214047252677632, 33495522229786655, company-corp.com_newdisa, 2012-09-15 15:10:27.153000 -07:00, 33495522229786656) was aborted.  Call getNextException to see the cause.; nested exception is java.sql.BatchUpdateException: Batch entry 0 insert into users.network_discussion (network_id, user_discussion_id, title, last_updated_dt, id) values (33214047252677632, 33495522229786655, company-corp.com_newdisa, 2012-09-15 15:10:27.153000 -07:00, 33495522229786656) was aborted.  Call getNextException to see the cause.
java.sql.BatchUpdateException: Batch entry 0 insert into users.network_discussion (network_id, user_discussion_id, title, last_updated_dt, id) values (33214047252677632, 33495522229786655, company-corp.com_newdisa, 2012-09-15 15:10:27.153000 -07:00, 33495522229786656) was aborted.  Call getNextException to see the cause.
    at org.postgresql.jdbc2.AbstractJdbc2Statement$BatchResultHandler.handleError(AbstractJdbc2Statement.java:2512)
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1314)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:347)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeBatch(AbstractJdbc2Statement.java:2574)
    at org.apache.commons.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:246)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:139)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:584)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:500)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:473)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.doCommitTransactionAfterReturning(TransactionAspectSupport.java:267)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:170)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:623)
    at com.netblue.matchpoint.service.DiscussionService$$EnhancerByCGLIB$$b685dad0.addOrGetDiscussions(<generated>)
    at com.netblue.matchpoint.filter.DiscussionFilter.doFilter(DiscussionFilter.java:30)
    at com.netblue.matchpoint.sitecontroller.MpBaseSiteController.getFilteredParams(MpBaseSiteContr 
```

它继续，我的意思是错误跟踪继续更多，所以给我一个想法的任何帮助都会很棒，我已经在谷歌中跟踪了这个，但没有结果，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:34:08.857

当`BatchUpdateException.getNextException`没有帮助（或者它只是返回`null`）时，也可以在 hibernate 中[禁用批处理](http://inoio.de/blog/2012/11/16/how-to-get-rid-of-hibernate-genericjdbcexception/)：`hibernate.jdbc.factory_class=org.hibernate.jdbc.NonBatchingBatcherFactory`在 hibernate 会话配置中设置（当然，这应该只是为了解决问题而不应该永远设置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T04:29:58.787

我实际上解决了这个问题，这真的很痛苦，但感谢上帝，我能做到。正如我所说，它在某些带有数据库的环境中工作，但在另一个环境中不起作用，问题是我有多个保存和依赖寄存器，但第一个需要一些时间才能保存，所以当我保存时第二个寄存器（不同的表第二个取决于第一个）密钥的数据尚未保存，所以我不能像往常一样级联保存，因为它需要更改很多代码，因为这个不是“从零开始”的开发，所以我所做的是更多地挖掘代码并获取数据的确切保存位置，并将其他寄存器的保存放在那里。因此，基本上，如果您正在跟踪那个奇怪的错误，那么没有什么比试图将损坏的数据保存在 DB 中的特别之处了。

# javascript - 如何在kaminari的无限滚动中指定何时没有页面

> ID：12443091
> 
> 赞同：0
> 
> 时间：2012-09-15T22:50:38.990
> 
> 标签：javascript, jquery, ruby-on-rails-3.2, infinite-scroll

您好我遇到了无限滚动功能的问题，当所有内容都显示出来时，它仍然继续滚动（奇怪的行为）。我正在寻找一种在显示所有内容时停止无限滚动的方法......但首先我需要知道何时没有更多页面/内容

这是我的代码

```
 <script type="text/javascript">
   jQuery(document).ready(function ($) {
   (function () {
    var page = 1,
    loading = false,
    finish = false;

  function nearBottomOfPage() {
  return $(window).scrollTop() > $(document).height() - $(window).height() - 200;
  }

  function finish() {
  finish = true;

  }
 $(window).scroll(function () {
 if (loading) {
  return;
 }
 if (nearBottomOfPage() && !finish) {
  loading = true;
  $('#loader').show();
  page++;
  $.ajax({
    url: '/office?page=' + page,
    type: 'get',
    dataType: 'script',
    success: function () {
      $('#loader').hide();
      loading = false;
    }
   });
  }
 });
 }()); 
```

我试过这个

```
 <script type="text/javascript">
   jQuery(document).ready(function ($) {
   (function () {
    var page = 1,
    loading = false,
    finish = false;

  function nearBottomOfPage() {
  return $(window).scrollTop() > $(document).height() - $(window).height() - 200;
  }

  function finish() {
  finish = true;

  }
 $(window).scroll(function () {
 if (loading) {
  return;
 }
 if (nearBottomOfPage() && !finish) {
  loading = true;
  $('#loader').show();
  page++;
  $.ajax({
    url: '/office?page=' + page,
    type: 'get',
    dataType: 'script',
    success: function () {
      $('#loader').hide();
      loading = false;
    }
   });
      $.error(function(jqXHR, textStatus, errorThrown) {
    //Finish scrolling.
    finish();
});
  }
 });
 }()); 
```

我添加了 .error 功能，但它仍然没有工作:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T22:53:53.547

当您从`$.ajax`调用中获得结果时，检查您是否获得了少于预期的记录数（例如，您希望每页 20 条，例如，您有 17 条），然后您位于结果集的末尾，您应该取消设置您的`$(window).scroll`事件，或者您应该设置一个导致事件处理程序短路的标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:24:27.177

怎么样，

```
$.ajax({
     //calls  
    })
    .fail(function(jqXHR, textStatus, errorThrown) {
        //Finish scrolling.
        finish();
    }); 
```

# cloudbees - 如何在我的（cloudbees 托管的）应用程序响应中配置/启用 gzip 压缩？

> ID：12443096
> 
> 赞同：0
> 
> 时间：2012-09-15T22:51:06.077
> 
> 标签：cloudbees

我在 cloodbees（JavaEE Web 配置文件）中运行基于 JSF2 的应用程序，并且我意识到它的 http 响应不使用 gzip 压缩。如何配置 Run@cloud 以启用 gzip 压缩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:22:05.827

您可以向您的应用程序添加一个 gzip servlet 过滤器，请参阅[http://onjava.com/pub/a/onjava/2003/11/19/filters.html](http://onjava.com/pub/a/onjava/2003/11/19/filters.html)

[您也可以在https://cloudbees.zendesk.com/forums/180582-rfe-and-ideas-run-cloud](https://cloudbees.zendesk.com/forums/180582-rfe-and-ideas-run-cloud)上为此创建功能请求

# php - 用新行php替换多个空格

> ID：12443103
> 
> 赞同：0
> 
> 时间：2012-09-15T22:52:29.737
> 
> 标签：php, html, regex, mailer

我有一个像这样的变量：

```
<b>Hight: </b></span><span>1.78 &nbsp;&nbsp;&nbsp;&nbsp;</span><span><b>Bust: </b></span><span>86 &nbsp;&nbsp;&nbsp;&nbsp;</span><span><b>waist: </b></span><span>64 &nbsp;&nbsp;&nbsp;&nbsp;</span><span><b>Hips: </b></span><span>93 &nbsp;&nbsp;&nbsp;&nbsp;</span><span><b>Pants: </b></span><span>26 &nbsp;&nbsp;&nbsp;&nbsp;</span><span><b>Shoes: </b></span><span>40 &nbsp;&nbsp;&nbsp;&nbsp;</span><span><b>Hair: </b></span><span>brown &nbsp;&nbsp;&nbsp;&nbsp;</span><span><b>Eyes: </b></span><span>blue</span> 
```

输出这个：

**身高：** 1.78     **胸围：** 86     **腰围：** 64     **臀围：** 93     **裤子：** 26     **鞋子：** 40     **头发：**棕色     **眼睛：**蓝色

我的问题是，我如何让这个 5 ->`&nbsp;&nbsp;&nbsp;&nbsp;` 变成一个`<br>`标签。

我正在考虑这样的事情，但当然它不起作用：
`$customField = str_replace("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;","<br>",$customField);`

请记住，此代码是邮件程序的一部分。
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T22:55:45.603

那是因为您有 1 个空格和 4 个`&nbsp;`，请使用：

```
$customField = str_replace(" &nbsp;&nbsp;&nbsp;&nbsp;", "<br />", $customField); 
```

# java - 阵列适配器 构造函数未定义

> ID：12443104
> 
> 赞同：0
> 
> 时间：2012-09-15T22:52:35.157
> 
> 标签：java, constructor, android-arrayadapter

我的任务涉及片段内的 ListView。

我在填充该 ListView 时遇到问题。

这就是我正在尝试的。

```
public class UrlListFragment extends Fragment {

public View onCreateView(LayoutInflater inflator, ViewGroup container, Bundle state)
{               
    View returnView = inflator.inflate(R.layout.url_fragment, container, false);

    ListView mylist = (ListView) returnView.findViewById(R.id.mylist);
    String[] urlArray = new String[] { "http://mobile.cs.fsu.edu/android", "http://www.google.com", "http://my-favoriate-website.com" };
    ArrayAdapter<string> arrayAdapter = new ArrayAdapter<string>(getActivity(), android.R.layout.simple_list_item_1, urlArray);
    mylist.setAdapter(arrayAdapter);

    return returnView;
}} 
```

我得到错误

```
The constructor ArrayAdapter<R.string>(Activity, int, String[]) is undefined 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:23:12.450

`R.string`不一样`String`。Java 区分大小写。字符串！=字符串。

# bash - 在每行的开头插入文本，从 2 到结尾 - 5

> ID：12443105
> 
> 赞同：-1
> 
> 时间：2012-09-15T22:52:36.970
> 
> 标签：bash, sed, awk

我想在文件中的每一行的开头插入一个单词，后跟一个制表符（就地插入），但从第 2 行开始到除最后 5 行之外的所有行。

因此，如果一个文件有 10 行，我想从第 2 行插入到第 5 行——在这种情况下，我想保持第 1 行和第 6-10 行不变。

该文件可以有数百万行（目前最多 1000 万行）

```
sed -i "s/^/word\t/" filename 
```

以上工作，但我想插入第一行和最后 5 行。同样给定一个行范围，计算行数将是另一个操作。由于行号可能会有所不同，因此此额外操作可能会成为开销。寻找有效的解决方案。这是我到目前为止所尝试的：

```
COUNT=$((`wc -l test_csnap_delta.csv | cut -d ' ' -f 1` - 5))
sed -n -i '2,$COUNT s/^/word\t/' 
```

但是，以上内容正在删除整个文件数据。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T20:36:10.040

这无需预先计算文件中的行数即可工作：

```
sed -ni '1{p;b}; 2{N;N;N;N}; $p; $!{N;s/^/word /;P;D}' filename 
```

这缓冲了五行并在缓冲区中的第一行进行替换并打印并删除它。当读取文件中的最后一行时，将打印缓冲区而不进行任何替换。

*   `1{p;b}`- 读取第一行，原样打印并分支到最后
*   `2{N;N;N;N}`- 读取第 2 行时，再追加 4 行以创建一个 5 行缓冲区
*   `$p`- 当文件的最后一行被读取时，打印保留在缓冲区中的行不变
*   `$!`- 当当前行不是文件的最后一行时...
*   `N`- 将下一行附加到缓冲区（模式空间）
*   `s/^/word /`- 在缓冲区的第一行进行替换
*   `P`- 仅打印缓冲区中的第一行
*   `D`- 仅删除缓冲区中的第一行

请注意，这不适用于包含少于 6 行的文件。

这与使用 AWK 的想法相同：

```
awk 'FNR == 1 {print; next} FNR == 2 {for (ptr = 0; ptr <= 4; ptr++) {buffer[ptr] = $0; getline}; ptr = 0} {sub(/^/, "word ", buffer[ptr]); print buffer[ptr]; buffer[ptr] = $0; ptr = (ptr + 1) % 5} END {for (i = 0; i <= 4; i++) {print buffer[(ptr + i) % 5]}}' filename > outputfile
mv outputfile filename 
```

这里分为多行：

```
FNR == 1 {
    print
    next
}
FNR == 2 {
    for (ptr = 0; ptr <= 4; ptr++) {
        buffer[ptr] = $0
        getline
    }
    ptr = 0
}
{
    sub(/^/, "word ", buffer[ptr])
    print buffer[ptr]
    buffer[ptr] = $0
    ptr = (ptr + 1) % 5
}
END {
    for (i = 0; i <= 4; i++) {
        print buffer[(ptr + i) % 5]
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T23:39:07.753

这将做：

```
LINES=`wc -l filename | awk '{print $1}'`
awk -v lines=$LINES 'NR > 1 && NR < lines-5 {$0 = "word\t" $0} {print}' filename 
```

如果您想修改`filename`而不是将输出重定向到新文件，则需要一个临时文件和一些额外的代码来处理它：

```
mv filname tmpfile
LINES=`wc -l tmpfile | awk '{print $1}'`
awk -v lines=$LINES 'NR > 1 && NR < lines-5 {$0 = "word\t" $0} {print}' tmpfile \
  > filename
rm tmpfile 
```

基本上，就地编辑并不是最好的想法（进行就地编辑的程序通常也适用于临时文件）。如果你对丑陋的细节感兴趣，看看[这篇文章](http://backreference.org/2011/01/29/in-place-editing-of-files/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T22:15:37.077

这可能对你有用（GNU sed）；

```
sed -i '1b;:a;$q;N;2,6ba;s/^/word\t/;P;D' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T12:07:25.997

如果您有足够的可用 RAM，您也可以尝试使用`man 1 ed`（有关更多信息，`ed`请参阅：[使用脚本中的 ed 文本编辑器编辑文件](http://wiki.bash-hackers.org/howto/edit-ed)）。

```
# using Bash

str="$(printf '%s\n' {1..10})"
tab="$(printf '\t')"

# test
cat <<EOF | ed -s <(echo "$str")
H
2,\$-5s/^/word${tab}/
,p
q
EOF

# in-place file editing
cat <<EOF | ed -s file
H
2,\$-5s/^/word${tab}/
wq
EOF 
```

# android - 三星 Galaxy s 3 USB 驱动程序

> ID：12443109
> 
> 赞同：3
> 
> 时间：2012-09-15T22:53:53.953
> 
> 标签：android, usb, driver

您好，我正在尝试开发一个 android 应用程序。我有三星 Galaxy s 3，但我似乎找不到与 Windows 7 兼容的驱动程序。我安装了 android sdk 版本 1.0.29。我试图在我的 sdk 的 usb_driver 文件夹中手动安装我的设备驱动程序的驱动程序。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T23:14:36.120

您是否安装了三星的 Kies 软件？它与正确的 USB 驱动程序捆绑在一起。

[http://www.samsung.com/us/support/supportMain.do](http://www.samsung.com/us/support/supportMain.do)

驱动程序也可以单独下载。

[http://androidevolved.com/forums/galaxy-s-ii​​i-root-unroot-roms-kernels-drivers-recovery-etc/1793-samsung-galaxy-s-ii​​i-usb-driver-download.html](http://androidevolved.com/forums/galaxy-s-iii-root-unroot-roms-kernels-drivers-recovery-etc/1793-samsung-galaxy-s-iii-usb-driver-download.html)

如果这不起作用，Andres Gallos 解决方案可能会有所帮助；我只会将此效果归因于有缺陷的电缆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T22:57:42.180

在 Galaxy 上进行测试时，我遇到了必须使用三星电缆才能看到它与 eclipse 一起工作的问题。我更换了正在使用的电缆，它突然起作用了。这可能不是您面临的问题，但如果是的话，可以节省您的时间。我浪费了一个多小时来寻找驱动程序，但除了将电缆更换为三星电缆外，没有任何效果。

# algorithm - 文件的交集

> ID：12443110
> 
> 赞同：6
> 
> 时间：2012-09-15T22:54:13.463
> 
> 标签：algorithm, file, unix, intersection

我有两个大文件（27k 行和 450k 行）。它们看起来有点像：

```
File1:
1 2 A 5
3 2 B 7
6 3 C 8
...

File2:
4 2 C 5
7 2 B 7
6 8 B 8
7 7 F 9
... 
```

我想要两个文件中第三列在两个文件中的行（注意带有 A 和 F 的行被排除在外）：

```
OUTPUT:
3 2 B 7
6 3 C 8
4 2 C 5
7 2 B 7
6 8 B 8 
```

什么是最好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T23:56:20.700

首先我们对第三个字段的文件进行排序：

```
sort -k 3 file1 > file1.sorted
sort -k 3 file2 > file2.sorted 
```

然后我们使用 comm 在第三个字段上获得公共值：

```
comm -12 <(cut -d " " -f 3 file1.sorted | uniq) <(cut -d " " -f 3 file2.sorted | uniq) > common_values.field 
```

现在我们可以在公共值上加入每个排序的文件：

```
join -1 3 -o '1.1,1.2,1.3,1.4' file1.sorted common_values.field > file.joined
join -1 3 -o '1.1,1.2,1.3,1.4' file2.sorted common_values.field >> file.joined 
```

输出已格式化，因此我们得到与文件中使用的字段顺序相同的字段顺序。使用的标准 unix 工具：sort、comm、cut、uniq、join。适用于 bash，对于`<( )`其他 shell，您可以使用临时文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T00:35:36.207

这是一个使用 grep、sed 和 cut 的选项。

提取第 3 列：

```
cut -d' ' -f3 file1 > f1c
cut -d' ' -f3 file2 > f2c 
```

在 中查找匹配行`file1`：

```
grep -nFf f2c f1c | cut -d: -f1 | sed 's/$/p/' | sed -n -f - file1  > out 
```

在 中查找匹配行`file2`：

```
grep -nFf f1c f2c | cut -d: -f1 | sed 's/$/p/' | sed -n -f - file2 >> out 
```

输出：

```
3 2 B 7
6 3 C 8
4 2 C 5
7 2 B 7
6 8 B 8 
```

### 更新

如果您有非对称数据文件并且较小的数据文件适合内存，那么这种一次性 awk 解决方案将非常有效：

*解析.awk*

```
FNR == NR {
  a[$3] = $0
  p[$3] = 1
  next
}  

a[$3]

p[$3] {
  print a[$3]
  delete p[$3]
} 
```

像这样运行它：

```
awk -f parse.awk file1 file2 
```

`file1`两者中较小的在哪里。

*解释*

*   该`FNR == NR`块读`file1`入两个散列。
*   `a[$3]`如果是 中的键，则打印`file2`行。`$3``a`
*   `p[$3]`如果是一个键，则打印`file1`行并删除该键（仅打印一次）。`$3``p`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T23:17:44.100

```
awk '{print $3}' file1 | sort | uniq > file1col3
awk '{print $3}' file2 | sort | uniq > file2col3
grep -Fx -f file1col3 file2col3 | awk '{print "\\w+ \\w+ " $1 " \\w+"}' > col3regexp
egrep -xh -f col3regexp file1 file2 
```

抓取两个文件中所有唯一的第 3 列，将它们相交（使用`grep -F`），打印一堆将匹配您想要的列的正则表达式，然后使用`egrep`从两个文件中提取它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T23:28:04.520

首先从第三列获取公共值。然后过滤两个文件中具有匹配第三列的行。

如果列由单个字符分隔，您可以使用`cut`提取一列。对于可以由任意数量的空格分隔的列，请使用`awk`. 获取公共第 3 列值的一种方法是提取列，对它们进行排序并调用[`comm`](http://www.freebsd.org/cgi/man.cgi?query=comm&sektion=1). 使用 bash/ksh/zsh 进程替换：

```
comm -12 <(awk '{print $3}' file1 | sort -u) <(awk '{print $3}' file2 | sort -u) 
```

现在把这些变成`grep`模式，然后过滤。

```
comm -12 <(awk '{print $3}' file1 | sort -u) <(awk '{print $3}' file2 | sort -u) |
sed -e 's/[][.\|?*+^$]/\\&/g' \
    -e 's/.*/^[^[:space]]+[[:space]]+[^[:space]]+[[:space]]+\1[[:space]]/' |
grep -E -f - file1 file2 
```

上面的方法应该适用于大文件。但是在 500k 行时，您没有大文件。这些文件应该很适合内存，一个简单的 Perl 解决方案就可以了。加载两个文件，提取列值，打印匹配的列。

```
perl -n -e '
    @lines += 1;
    $c = (split)[2];
    $seen{$c}{$ARGV} = 1;
END {
    foreach (@lines) {
        $c = (split)[2];
        print if %{$seen{$c}} == 2;
    }
}' file1 file2 
```

# php - 如果您不期望重复的结果，欧洲央行是否安全？

> ID：12443111
> 
> 赞同：1
> 
> 时间：2012-09-15T22:54:37.550
> 
> 标签：php, security, mcrypt, ecb

我想使用 Rijndael-256 加密长段文本（在此之前文本已被压缩并转换为 base64）。

两者不太可能相同。但是如果它们碰巧是，在文本的开头或结尾添加一个随机密钥会保护它（不管它们是否相同），*以防万一*用户写相同的文本？

另外，人们如何获得这个加密文本？我的网站受到 SQL 注入的保护，并且转换是服务器端的——用户只看到他们写的东西 A. 写它，B. 稍后再读。是否有人必须侵入 cPanel 才能看到文本？但他们也会看到加密代码？或者他们可以通过更改散列密码和安全设置以用户身份登录并查看用户的私人文档......那么这种安全类型有什么意义吗？什么是值得的，什么是“徒劳的”？（如果你想阻止潜在的黑客，你可以给我发邮件。但我想他们已经知道了......）

谢谢阅读。我的问题是：如果你不会得到重复的结果，欧洲央行是否安全？

我找不到有关 CBC 和 HMAC 的足够信息，那么您将如何做呢？当您想复制 IV 时，您如何知道它？（将它放在数据库中不会破坏目的吗？）

对不起，如果我听起来毫无头绪。自 2009 年以来我一直在编程，但仍然不知道这样的事情......

# android - 崩溃后活动打开

> ID：12443114
> 
> 赞同：0
> 
> 时间：2012-09-15T22:55:11.223
> 
> 标签：android, android-activity

我正在制作 android 应用程序，但我遇到了问题。假设我有 3 个活动 A、B、C。问题是，当我单击活动 C 中的确定按钮时，它应该打开活动 A。它会打开它，但在打开之前我的应用程序崩溃了。因此，当我单击强制关闭时，它会打开我的活动 A。

以下是活动 C 中按钮 OK 的代码：

```
public void onClick(View v) {

    Intent i = new Intent(this, ShowFiles.class);  
    startActivityForResult(i, 0);
} 
```

一切看起来都很简单，但只适用于崩溃。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T23:34:32.503

据我所知，尝试更具体地表达意图。前任。MainActivity.this 或确保所有活动都发布在您的清单中。

# asp.net-mvc - 如何像会员一样通过网站使用自定义对象

> ID：12443121
> 
> 赞同：0
> 
> 时间：2012-09-15T22:56:42.967
> 
> 标签：asp.net-mvc, model-view-controller, membership, membership-provider

您能否向我解释一下如何存储和使用自定义对象，就像我们通过网站使用 asp.net MVC 成员资格一样？我经常使用我的数据库中的同一个表，并且我想停止要求我的服务器在每一页上检索相同的信息。我不能使用 cookie，因为我有一些重要信息，我不使用会话，因为我希望这个对象可以像成员资格一样访问。用户登录后，我想将此信息一劳永逸地设置到该对象中，直到它断开连接。

例子...

1.  非常正常的会员资格：

    MembershipUser UserAccount = Membership.GetUser(HttpContext.Current.User.Identity.Name);

2.  我想使用的自定义数据对象

    MyCustomData customData = Membership.GetCustomData(HttpContext.Current.User.Identity.Name);

非常感谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T23:13:16.387

您可以尝试覆盖此处的内容：[ASP.NET MVC 自定义成员资格提供程序 - 如何重载 CreateUser？](https://stackoverflow.com/questions/5838371/asp-net-mvc-custom-membership-provider-how-to-overload-createuser)或创建您的自定义会员提供者并添加额外的方法：[自定义会员提供者](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)（我更喜欢这个）

# linux - 使用 sed 在两个模式之间打印

> ID：12443122
> 
> 赞同：2
> 
> 时间：2012-09-15T22:57:20.033
> 
> 标签：linux, bash, sed, awk

所以我发现了很多关于[删除两个模式之间的文本](https://stackoverflow.com/questions/5071901/removing-lines-between-two-patterns-not-inclusive-with-sed)和[打印两个分隔符之间的文本，](https://stackoverflow.com/questions/6023615/using-sed-to-print-between-delimiters)但我没有找到任何关于使用 bash 函数打印两个模式之间的文本的内容。

如果我有：

```
"Alas poor Yorik, I knew him well" 
```

我想打印模式“差”和“好”（独家）之间的所有内容，我会得到：

```
" Yorik, I knew him " 
```

我怎样才能使用 sed 或 awk 之类的东西来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T23:01:15.417

```
dtpwmbp:~ pwadas$ echo "Alas poor Yorik, I knew him well" | sed -e 's/^.*poor //g;s/ well.*$//g'
Yorik, I knew him
dtpwmbp:~ pwadas$ echo "Alas poor Yorik, I knew him well" | awk '{sub(/.*poor /,"");sub(/ well.*/,"");print;}'
Yorik, I knew him 
```

文件输入的用法：

```
dtpwmbp:~ pwadas$ echo "Alas poor Yorik, I knew him well" > infile
dtpwmbp:~ pwadas$ cat infile 
Alas poor Yorik, I knew him well
dtpwmbp:~ pwadas$ cat infile | sed -e 's/^.*poor //g;s/ well.*$//g'
Yorik, I knew him
dtpwmbp:~ pwadas$ sed -e 's/^.*poor //g;s/ well.*$//g' < infile
Yorik, I knew him
dtpwmbp:~ pwadas$ cat infile | awk '{sub(/.*poor /,"");sub(/ well.*/,"");print;}'
Yorik, I knew him
dtpwmbp:~ pwadas$ awk '{sub(/.*poor /,"");sub(/ well.*/,"");print;}' < infile 
Yorik, I knew him 
```

# objective-c - iOS 中带有结构的 XML-RPC 请求

> ID：12443134
> 
> 赞同：0
> 
> 时间：2012-09-15T23:01:32.263
> 
> 标签：objective-c, ios, wordpress, struct, xml-rpc

我正在尝试将 xmlrpc 与 wordpress 一起使用来获取特定自定义类型（称为集合）的帖子。

Wordpress API 文档指出：

wp.​​getPosts

```
Parameters:
int blog_id
string username
string password
struct filter: Optional.
   string post_type
   string post_status
   int number
   int offset
   string orderby
   string order
array fields: Optional. 
```

我的问题是在 objc 中用字符串形成一个结构：

我想做这样的事情：

```
// in .h

typedef struct{
    string post_type;
    string post_status;
    int number;
    int offset;
    string orderby;
    string order;
} wp_filter;

// in .m

wp_filter filter = {@"collection", @"", ... , ... ,@"",@""};
NSArray *fieldsArray = [NSArray arrayWithObjects:@"post_title", nil];
NSArray *postParams = [NSArray arrayWithObjects:@"0", username, password, filter, fieldsArray, nil];
XMLRPCRequest *reqCollections =[[XMLRPCRequest alloc] initWithURL:[NSURL URLWithString:server]];

[reqCollections setMethod:@"wp.getPosts" withParameters:postParams];

XMLRPCResponse *customPostResponse = [XMLRPCConnection sendSynchronousXMLRPCRequest:reqCollections error:nil];

if ([[customPostResponse object] isKindOfClass:[NSArray class]]){
    NSArray *collections = [NSArray arrayWithArray:[customPostResponse object]];
    NSLog(@"number of collections %i",[collections count]);
    for (int i = 0; i < [collections count]; i++) {
        NSLog(@"%@", [[collections objectAtIndex:i] description] );
    }
}
else {
    NSLog(@"response description %@",[[customPostResponse object ] description]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T01:19:27.527

我不了解 XML-RPC WordPress API，但它`structs`是 C 构造而不是 Cocoa `NSObjects`，因此您不能将它们嵌入到`NSArray`.

所以该`[NSArray arrayWithObjects:..., filter, ..., nil]`行是无效的，因为`filter`是一个`wp_filter`结构。

我认为API文档中提到的“结构”更多是一些伪代码来解释数据结构/组织。显然，您需要将该概念“翻译”为 Cocoa 对象。

您可能会尝试将您的 C 结构转换为 an`NSArray`并以与 API 预期相同的顺序传递参数，或者更有可能将您的结构转换为 an `NSDictionary`，其键是结构字段的名称，值显然是您的结构的字段值。

此外，要将整数封装到 Cocoa 对象中，您应该使用`NSNumber`该类而不是将整数转换为`NSStrings`.

* * *

所以这会给出这样的结果：

```
NSDictionary* filter = [NSDictionary dictionaryWithObjectsAndKeys:
    @"collection", @"post_type",
    @"", @"post_status",
    [NSNumber numberWithInt:number], @"number",
    [NSNumber numberWithInt:offset], @"offset",
    @"", @"orderby",
    @"", @"order",
    nil];
NSArray *postParams = [NSArray arrayWithObjects:
    [NSNumber numberWithInt:0], // blog_id
    username,
    password,
    filter,
    [NSArray arrayWithObject:@"post_title"], // fieldsArray
    nil]; 
```

或者，如果您使用允许您使用 Modern Objective-C 的最新 LLVM 编译器，您可以使用更简洁的语法：

```
NSDictionary* filter = @{
    @"post_type": @"collection",
    @"post_status": @"",
    @"number": @(number)
    @"offset": @(offset)
    @"orderby": @"",
    @"order": @""};
NSArray *postParams = @[ @0, username, password, filter, @[@"post_title"]]; 
```

我什至敢打赌，对于您不想在调用中设置的参数，例如`"orderby"`and`"order"`参数，您可以跳过键并避免在字典中设置它们。

再一次，我从未使用过 Wordpress XML-RPC API，但据我了解文档，如果这不起作用，解决方案应该非常接近这样的东西（例如，我可能错了，你可能不得不`NSArray`使用文档中提到的`NSDictionary`“过滤器”伪结构的一个；您在问题中从文档中引用的内容并不足以说明在通过 Cocoa 使用它时必须使用哪个）。

# javascript - 将所有正文元素的颜色更改为目标值

> ID：12443137
> 
> 赞同：0
> 
> 时间：2012-09-15T23:02:17.663
> 
> 标签：javascript, jquery, css

如何在 javascript 中单击更改所有正文元素的颜色。喜欢;

```
a.url{
color:#000;
}
div.sample{
color:#000;
}
table td.sample{
color:#000;
} 
```

## 例如，我可以将元素的所有颜色属性更改为 #CCCCCC 吗？

我想我必须澄清我的问题。我不想将所有元素颜色更改为目标值，我想更改让我们说；所有蓝色到黑色。只是蓝色，不是全部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T23:06:46.417

您可以使用：

html:

```
<button id="changeColor">Change Color</button> 
```

和 javascript：

```
$('#changeColor').on('click', function(){
    $('*').css('color', '#CCCCCC');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:06:26.243

使用 jQuery：

```
$element.click(function() {
  $('body *').css('color', '#ccc !important');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T23:07:27.763

有关如何添加样式表规则的信息，请参阅此答案：[How do you add CSS with Javascript?](https://stackoverflow.com/questions/707565/how-do-you-add-css-with-javascript)

添加规则

```
* {
  color: #CCC !important;
} 
```

或者可能：

```
body * {
  color: #CCC !important;
} 
```

# css - .less 文件扩展名未编译

> ID：12443139
> 
> 赞同：5
> 
> 时间：2012-09-15T23:02:44.637
> 
> 标签：css, less, host

它工作得很好，但不幸的是我的网络主机不支持 .less 文件扩展名......当我输入 example.com/styles.less 时出现错误。

**错误：**

> 找不到页面 您要查找的页面可能已被删除、名称已更改或暂时不可用。

当我上传另一个主机时，一切都好...

**我的包括：**

```
<link rel="stylesheet/less" type="text/css" href="styles.less">
<script src="less.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T23:09:47.397

您应该能够将扩展名更改为`.css`（或您的虚拟主机允许的其他内容）并且它仍然应该工作。据我所知，less.js 只是在查看`rel="stylesheet/less"`.

这似乎与文档一致：http: [//lesscss.org/#-client-side-usage](http://lesscss.org/#-client-side-usage)

# import - sqoop导入中如何修改查询内容？

> ID：12443142
> 
> 赞同：1
> 
> 时间：2012-09-15T23:03:05.910
> 
> 标签：import, hbase, sqoop

对不起我的英语不好...

这是我的问题。我必须将数据从 MySQL 导入 HBase。为了提高性能，在 MySQL 中将一个大表划分为一些小表。例如，一个'message'表被分为'message_0'、'message_1'、...'message_100'。

我需要将这些消息表导入 HBase 中的单个表（例如“消息”）。每个表中的 PK 是 message_id，它是自增的。众所周知，HBase 有一个唯一的行键。我想在 message_id 列中添加一个前缀。

我无法在这些表中添加 hbase-row-key 列，因此我想修改 sqoop 查询参数中的列内容。我使用的导入命令如下所示：

```
sqoop import --connect jdbc:mysql://host:port/message 
--username message --password message \
--query "select 't0_'+ message_id as message_key, some_split_id, some_other_columns\
from message_0 where message_id >30000 and message_id <= 31000 and \$CONDITIONS" 
--split-by some_split_id --hbase-row-key message_key 
--hbase-table message --column-family cf1 
```

我可以成功地将列别名映射`message_key`为 HBase 行键。但行键是 30001.0，预计为 't0_30001'。

似乎查询没有返回 't0_' + message_id 的预期值，而是直接返回 message_id。

我还尝试修改 sqoop 生成的 java 源，将 't0_' 添加到 message_id，然后指定编译的类来执行输入操作，但它也不起作用。

看起来像这样

java源码：

```
public void set_message_key(String message_key) {
    this.message_key = "t0_" + message_key;
}
public MessageImporter with_message_key(String message_key) {
    this.message_key = "t0_" + message_key;
    return this; 
}
...
public void readFields(DataInput __dataIn) throws IOException {
    if (__dataIn.readBoolean()) { 
        this.message_key = null;
    } else {
        this.message_key = "t0_" + Text.readString(__dataIn);
    }
    ...
...
}
...
private void __loadFromFields(List<String> fields) {
    Iterator<String> __it = fields.listIterator();
    String __cur_str;
    __cur_str = __it.next();
    if (__cur_str.equals("null") || __cur_str.length() == 0) { this.message_key = null; } else {
    this.message_key = "t0_" + __cur_str;
    }
    ...
}
...
public void setField(String __fieldName, Object __fieldVal) {
    if ("message_key".equals(__fieldName)) {
        this.message_key = "t0_" + (String) __fieldVal;
    }
    ...
} 
```

命令行（在下面添加参数）：

```
--jar-file someJar.jar --class-name com.foo.SomeImportClass \ 
```

是否可以修改 --query 参数中的列内容？我是否必须自己编写映射作业才能将多个表中的数据导入 HBase 中的一个表中？

感谢您耐心阅读这个长长的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:44:12.753

我通过以下方式解决了类似的问题：

首先， concat() 可以帮助将两列合二为一，语法如下

```
 select concat('t0_',message_id) as message_key, ... 
```

然后，将以下选项添加到 sqoop 导入以指定 'message_key' 应视为字符串。

```
 --map-column-java message_key=String 
```

希望它可以提供帮助。谢谢。

# java - Playv2.0.3：在推送到 heroku 后使用 SecureSocial 模块路由（而不是主路由）

> ID：12443147
> 
> 赞同：0
> 
> 时间：2012-09-15T23:06:10.543
> 
> 标签：java, heroku, build, playframework-2.0, securesocial

我有一个相当简单的应用程序，在本地运行良好，使用正确的路由，即：/conf/routes 用于大多数应用程序路由，/module/securesocial/conf 用于适合该模块的路由。

但是一旦我发布到heroku，只使用securesocial路由，所以我收到一条错误消息“Action not Found For request GET /”<--或标准路由文件中定义的任何路由。

当我尝试操纵路线（例如创建一个综合路线文件）时，我在编译时遇到很多不同的错误......

这是我的标准路线：

```
# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET     /                           controllers.Application.index()
GET     /foo                        controllers.Application.index()

GET     /admin                      controllers.Application.admin()

POST    /quote                      controllers.Application.addQuote()

GET     /quotes                     controllers.Application.getQuotes()

# Login page
GET     /login                      securesocial.controllers.LoginPage.login
GET     /logout                     securesocial.controllers.LoginPage.logout

# User Registration
GET     /signup                     securesocial.controllers.Registration.signUp
POST    /signup                     securesocial.controllers.Registration.handleSignUp

# Providers entry points
GET     /authenticate/:provider     securesocial.controllers.LoginPage.authenticate(provider)
POST    /authenticate/:provider     securesocial.controllers.LoginPage.authenticateByPost(provider)

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

这是我的 /securesocial/conf/route 文件：

```
# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
# GET     /                           controllers.Application.index

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file)

# Login page
GET     /login                      securesocial.controllers.LoginPage.login
GET     /logout                     securesocial.controllers.LoginPage.logout

# User Registration
GET     /signup                     securesocial.controllers.Registration.signUp
POST    /signup                     securesocial.controllers.Registration.handleSignUp

GET     /authenticate/:provider     securesocial.controllers.LoginPage.authenticate(provider)
POST    /authenticate/:provider     securesocial.controllers.LoginPage.authenticateByPost(provider) 
```

我意识到有一些重复，但这是我用来让设置在本地工作的配置（它类似于 securesocial 发行版中提供的示例）......

如果你能发现我做错了什么，我肯定会从课程修正中受益。

谢谢，芯片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:11:46.117

有一个非常简单的解决方案：将 SecureSocial 中的路由合并到您应用的`conf/routes`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:59:12.087

我修改了 SecureSocial 的工作方式以解决 Play 2 中的错误，该错误使子模块中的路由覆盖主应用程序中的路由。

这个新版本不需要您将模块代码复制到您的应用程序中，而是将其作为可下载的依赖项获取。

尝试这个：

1.  从目录结构中删除模块代码。
2.  更改您的 Build.scala 文件以包含以下依赖项：“securesocial”%“securesocial_2.9.1”%“2.0.5”。
3.  添加一个新的解析器作为设置的一部分：resolver += Resolver.url("SecureSocial Repository", url("http://securesocial.ws/repository/releases/"))(Resolver.ivyStylePatterns)。

这是一个外观示例：

```
val appDependencies = Seq(
    //
    // your other dependencies
    // 
    "securesocial" % "securesocial_2.9.1" % "2.0.5"
)
val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
  resolvers += Resolver.url("SecureSocial Repository", url("http://securesocial.ws/repository/releases/"))(Resolver.ivyStylePatterns)
) 
```

希望能帮助到你。

# ember.js - 如何更改#each 触发数据加载的方式

> ID：12443154
> 
> 赞同：0
> 
> 时间：2012-09-15T23:06:54.817
> 
> 标签：ember.js

在 Rails 3.2 + ActiveModel::Serializers 之上使用 ember-data-latest.js，修订版 4，RESTAdapter。

相关的 Ember.js 片段：

```
App.List = DS.Model.extend({
    name:   DS.attr('string'),
    people: DS.hasMany('App.Person')
});

App.Person = DS.Model.extend({
    name: DS.attr('string'),
    list: DS.belongsTo('App.List')
});

App.router = Ember.Router.create({
    enableLogging: true,
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            redirectsTo: 'lists'
        }),
        lists: Ember.Route.extend({
            route: '/lists',
            connectOutlets: function (router) {
                router.get('applicationController').connectOutlet('lists', App.store.findAll(App.List));
            },
            showList: Ember.Route.transitionTo('list')
        }),
        list: Ember.Route.extend({
            route: '/lists/:id',
            serialize: function(router, context){
                return {id: context.get('id')};
            },
            deserialize: function(router, urlParams){
                return App.store.find(App.List, urlParams.id);
            },
            connectOutlets: function (router, context) {
                router.get('applicationController').connectOutlet('list', context);
            }
        }),
        showLists: Ember.Route.transitionTo('lists')
    })
}); 
```

当我加载应用程序时，它从列表索引页面开始，并在后端点击 /lists 以获取数据（其中我包含每个列表的子人员 ID）。当我点击一个列表时，它会进入列表显示页面。在该模板中，我有以下内容：

```
{{#each person in people}}
  <li>{{person.name}}</li>
{{/each}} 
```

那时它会像这样调用后端来获取人员数据：

```
/people?ids[]=4&ids[]=5&ids[]=6 
```

我的问题是：我怎样才能改变行为，以便它使用一种更明智的方法，可以更好地扩展，例如：

```
/people?list_id=1 
```

或者：

```
/list/1/people 
```

列表可能有成千上万的人，生成一个包含所有 id 列表的 URL 似乎是个坏主意......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T00:01:51.907

不要在列表的 api 响应中包含子人员 ID。我相信这应该会导致人员 API 调用按您的意愿工作。

# ios - 在 CCRenderTexture 中绘制抗锯齿圆

> ID：12443159
> 
> 赞同：2
> 
> 时间：2012-09-15T23:07:33.210
> 
> 标签：ios, cocos2d-iphone, opengl-es-2.0, antialiasing

我是 cocos2d / OpenGLES 的新手，我遇到了一个我找不到解决方案的问题。基本上，我想在 CCRenderTexture 中绘制一个抗锯齿圆，然后在多个精灵上使用该纹理。除了抗锯齿部分，一切都很简单，但我被卡住了，不知道下一步该去哪里。

我现在的代码是：

```
int textureSize = 64;
CCRenderTexture *rt = [CCRenderTexture renderTextureWithWidth:textureSize height:textureSize];
[rt beginWithClear:spriteColor.r g:spriteColor.g b:spriteColor.b a:0.0f];

ccDrawColor4F(spriteColor.r, spriteColor.g, spriteColor.b, spriteColor.a);
ccDrawCircle(CGPointMake(textureSize / 2.0f, textureSize / 2.0f), textureSize / 2.0f, 0.0f, 360, false);

[rt end]; 
```

然而，这导致了一个锯齿状的混乱，我不知道从这里去哪里。我在网上看到过使用点绘制平滑圆的示例，但这似乎在 OpenGLES 2.0 中不起作用。

性能并不是什么大问题，因为我绘制了一次纹理并一遍又一遍地重用纹理。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T22:19:50.747

在 Core Graphics 中创建圆形纹理并将其作为 CGImage 添加到纹理缓存中。Core Graphics 自动使用抗锯齿。圆圈将如下所示。

![圆圈](../Images/3a0ef302ce50a7bab693f0615dd7e8e3.png)

**示例代码：**

```
//Setup Core Graphics
CGSize circleSize = CGSizeMake(100, 100);
CGPoint circlePosition = ccp(50, 50);
UIGraphicsBeginImageContextWithOptions(size, NO, [[UIScreen mainScreen] scale]);
CGContextRef context = UIGraphicsGetCurrentContext();

//Add the circle to the context and draw it.
CGContextAddArc(context, circlePosition.x, circlePosition.y , circleSize.width/2, 0,2*M_PI,1);
CGContextDrawPath(context,kCGPathStroke);

//Get an image so we can store it in the Texture Cache
UIImage *finalImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//Add the image to the texture cache
[[CCTextureCache sharedTextureCache] addCGImage:[img CGImage] forKey:@"circleKey"]; 
```

然后，您可以使用

```
CCSprite *circle = [CCSprite spriteWithTexture:[[CCTextureCache sharedTextureCache] textureForKey:@"circleKey"]]; 
```

# ruby-on-rails - rails 3，尝试使用 aws-sdk gem，找不到任何方法文档？

> ID：12443165
> 
> 赞同：0
> 
> 时间：2012-09-15T23:08:30.613
> 
> 标签：ruby-on-rails, amazon-s3

尝试使用 Amazon aws-sdk gem 将文件上传到 S3。

我找不到任何有关可用于浏览/创建存储桶和文件的方法的文档。

他们在 github 存储库中提供的唯一示例包括创建 S3 存储桶和写入文件的示例，但不包含列出存储桶中的文件、设置存储桶中文件的权限或将文件放入现有存储桶，或如何将 url 引用的文件复制到存储桶中。

有谁知道示例代码和/或可用于将 aws-sdk gem 用于 ruby​​ 的方法列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T19:11:44.147

我找到的最佳文档位于：

[http://rubydoc.info/github/aws/aws-sdk-ruby/master/frames](http://rubydoc.info/github/aws/aws-sdk-ruby/master/frames)

从那里单击侧栏中的 S3 链接。

**更新**：澄清一下，类描述、方法等位于侧边栏中 S3 链接的下拉菜单中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T00:14:08.460

我必须自己深入挖掘才能找到任何有用的文档。试试这些链接：

[http://docs.amazonwebservices.com/AWSRubySDK/latest/frames.html](http://docs.amazonwebservices.com/AWSRubySDK/latest/frames.html)

[https://github.com/amazonwebservices/aws-sdk-for-ruby](https://github.com/amazonwebservices/aws-sdk-for-ruby)

[http://rubydoc.info/github/amazonwebservices/aws-sdk-for-ruby/master/AWS/S3](http://rubydoc.info/github/amazonwebservices/aws-sdk-for-ruby/master/AWS/S3)

第三个是最有用的imo

这是 aws-s3 gem 的（更好的）文档，我意识到它不一样，但它是一个很好的参考

[http://amazon.rubyforge.org/](http://amazon.rubyforge.org/)

# php - Zend Framework 2 默认模块

> ID：12443166
> 
> 赞同：3
> 
> 时间：2012-09-15T23:08:54.047
> 
> 标签：php, zend-framework2

在 ZF1 中，您不必在 URL 中包含模块；如果未提供，它将默认为...默认模块。这在 ZF2 中如何实现？我已经使用骨架应用程序来启动和运行，但似乎我总是需要包含模块名称，例如`/application/controller/action`.

我想我可以通过创建一个带有两个“占位符”的路线来解决这个问题；控制器和动作，然后将默认模块设置为“应用程序”。然后我会将其放入`/config/autoload/global.php`（或可能`/config/application.config.php`）中，以便该路线适用于我的所有应用程序。但是，我收到错误消息，即路由无法匹配 URL，即使我将路由硬编码为`/user/index`.

我尝试了下面的代码。

```
return array(
    'router' => array(
        'routes' => array(
            'nomodule' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route' => '/:controller/:action',
                    'constraints' => array(
                        'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*'
                    ),
                    'defaults' => array(
                        'module' => 'Application' // Not sure of the syntax here
                    )
                )
            ),
        )
    )
); 
```

正如我在评论中所写的那样，我不确定我的问题是否与默认语法有关，但我不会这么认为，因为如果我对路由进行硬编码并删除所有默认值，也会发生同样的情况。我还尝试根据骨架应用程序中的示例对其进行试验，但没有运气。我是不是走错了路？有更好的方法吗？还是我只是犯了一个错误？

提前致谢。

**编辑：**有关使其工作的代码，请参阅答案。有关其工作原理的说明*，*请阅读[本文](http://codingexplained.com/coding/php/zend-framework/removing-module-from-url-in-zend-framework-2)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T00:01:21.093

注意：强烈建议使用显式路由而不是通配符。

您在尝试中使用了 Zend\Mvc\Router\Http\Literal 路由类型，您可能猜到它是字面的，即完全匹配。要使其工作，您需要分段路线类型。

[检查`application`Zend Skeleton Application 配置](https://github.com/zendframework/ZendSkeletonApplication/blob/master/module/Application/config/module.config.php#L27)中的路由及其子路由`default`。它完全符合您的要求。

至于模块 - 从您的代码角度来看，没有“模块”之类的东西。模块在启动时注册资源，此后不再相关。在 zf2 中，您可以通过控制器注册到 controllerManager 的类或别名指定确切的控制器

```
// module\Application\config\module.config.php
return array(
    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route'    => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action'     => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type' => 'Segment',
                        'options' => array(
                            'route' => '[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action' => '[a-zA-Z][a-zA-Z0-9_-]*'
                            ),
                            'defaults' => array(
                                'action' => 'index',
                                '__NAMESPACE__' => 'Application\Controller'
                            )
                        )
                    )
                )
            )
        )
    ),
    'controllers' => array(
        'invokables' => array(
            'Application\Controller\Index' => 'Application\Controller\IndexController',
            'Application\Controller\User' => 'Application\Controller\UserController'
        ),
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:20:54.017

正如我在@Xerkus 答案下的评论中所说，它不适用于所有 URL：

```
/application/index/index
/application/index
/application
/index/index
/index
/ 
```

我还添加`testAction()`了`IndexController`与`TestController`相同的操作`IndexController`，因此我也可以在以下路线上测试我的解决方案：

```
/index/test
/test/index
/test/test
/test 
```

因此，经过一些研究（主要是[这里](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html)和[这里](http://framework.zend.com/issues/browse/ZF2-495)），我准备了适用于所有人的解决方案。我将粘贴我的整个`module.config.php`数组：

```
return array(
    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Literal',
                'options' => array(
                    'route'    => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action'     => 'index',
                    ),
                ),
            ),
            'noModule' => array(
                'type' => 'Segment',
                'options' => array(
                    'route'    => '/[:controller[/:action]]',
                    'constraints' => array(
                        'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                    ),
                    'defaults' => array(
                        '__NAMESPACE__' => 'Application\Controller',
                        'controller'    => 'Index',
                        'action'        => 'index',
                    ),
                ),
            ),
            // The following is a route to simplify getting started creating
            // new controllers and actions without needing to create a new
            // module. Simply drop new controllers in, and you can access them
            // using the path /application/:controller/:action
            'application' => array(
                'type'    => 'Literal',
                'options' => array(
                    'route'    => '/application',
                    'defaults' => array(
                        '__NAMESPACE__' => 'Application\Controller',
                        'controller'    => 'Index',
                        'action'        => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type'    => 'Segment',
                        'options' => array(
                            'route'    => '/[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                            ),
                            'defaults' => array(
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
        ),
    ),
    'translator' => array(
        'locale' => 'en_US',
        'translation_file_patterns' => array(
            array(
                'type'     => 'gettext',
                'base_dir' => __DIR__ . '/../language',
                'pattern'  => '%s.mo',
            ),
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'Application\Controller\Index' => 'Application\Controller\IndexController',
            'Application\Controller\Test' => 'Application\Controller\TestController'
        ),
    ),
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index' => __DIR__ . '/../view/application/index/index.phtml',
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),
); 
```

与 Zend 2 Skeleteon Application 配置相比，我添加了`noModule`路由和新的`controller invokable`- `test`。当然`noModule`路由包含`Application/Controller`命名空间，所以基于这个事实，你可以设置任何你需要的默认模块。现在它可以正常工作了。

当然请记住，您的`noModule`路线应该在第一个模块中定义，`application.config.php`以确保它始终优先。还要记住，默认模块解决方案应该小心完成，以避免控制器和模块名称之间的冲突，例如，如果您命名下一个模块`Index`，那么显然您将与模块中的命名`IndexController`冲突`Application`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T00:27:02.293

我一般是 ZF 的新手，我刚开始学习它，所以尝试了这个，它对我有用。可以肯定的是，当您转到您的域 URL 并且不输入控制器名称时，您想更改您的默认模块，对吗？

转到你的 module.config.php

```
 'router' => array(
    'routes' => array(
        'album WITH CONTROLLER IN URL' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/album[/:action]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Album',
                    'action'     => 'index',
                ),
            ),
        ),
        'album WITHOUT CONTROLLER IN URL' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/[:action]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Album',
                    'action'     => 'index',
                ),
            ),
        ),
        'SET IT AS YOUR HOMEPAGE' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/',
                'defaults' => array(
                    'controller' => 'Album\Controller\Album',
                    'action'     => 'index',
                ),
            ),
        ),
    ),
), 
```

# java - 在模拟器上工作，但不在真正的 Android 设备上工作

> ID：12443167
> 
> 赞同：1
> 
> 时间：2012-09-15T23:09:07.203
> 
> 标签：java, android, gps, android-mapview

我制作了一个 Android 应用程序，它在 Android 屏幕`Google Map`的上半部分`Android Screen`和下半部分显示一个 TextView。

在我的 上`Google Maps(on the Top half of the android screen)`，我正在我当前的位置上画一个`Circle`，我正在`current location (lat and long values)`从`DDMS perspective in the emulator`. 它在模拟器中运行良好。

当我在模拟器上启动应用程序时，首先它在 android 屏幕的上半部分显示谷歌地图，在下半部分显示一个 TextView。然后使用 DDMS Perspective，我传递了我当前的位置（纬度和经度值），通过之后，它在我在谷歌地图上的当前位置上绘制了一个圆圈。

在模拟器中一切正常。

**问题陈述：-**

但是当我在 real 上尝试同样的事情时`Android Phone`，只有我`Google Maps`的在 Android 屏幕的上半部分正确显示，而 TextView 在 Android 屏幕的下半部分正确显示。但它不是在绘制`Circle on my Current Location`.

我的 Android 手机已连接到 Wi-Fi。而且我不认为我需要在 Android 手机上传递纬度和经度值，对吧？它应该自动获取当前位置对吗？

或者我需要在我的 Android 手机上做些什么？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);    

    locationListener = new GPSLocationListener();

    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            0, 
            0, 
            locationListener);

    mapView = (MapView) findViewById(R.id.mapView);
    listView = (ListView) findViewById(R.id.mylist);
    mapView.setStreetView(true);
    mapView.setBuiltInZoomControls(true);

    mapController = mapView.getController();
    mapController.setZoom(15);
}

private class GPSLocationListener implements LocationListener {
    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            GeoPoint point = new GeoPoint(
                    (int) (location.getLatitude() * 1E6), 
                    (int) (location.getLongitude() * 1E6));

            findUsersInCurrentRadius(4,location.getLatitude(),location.getLongitude());

            mapController.animateTo(point);
            mapController.setZoom(15);

            // add marker
            MapOverlay mapOverlay = new MapOverlay(this,android.R.drawable.star_on,R.drawable.tenm,R.drawable.twentym,R.drawable.thirtym,R.drawable.fourtym);
            mapOverlay.setPointToDraw(point);
            List<Overlay> listOfOverlays = mapView.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);

            String address = ConvertPointToLocation(point);
            Toast.makeText(getBaseContext(), address, Toast.LENGTH_SHORT).show();

            mapView.invalidate();
        }
    }

class MapOverlay extends Overlay {
    private GeoPoint pointToDraw;
    int[] imageNames=new int[6];

    public MapOverlay(GPSLocationListener gpsLocationListener,
            int currentUser, int tenm, int twentym, int thirtym, int fourtym) {
        imageNames[0]=currentUser;
        imageNames[1]=tenm;
        imageNames[2]=twentym;
        imageNames[3]=thirtym;
        imageNames[4]=fourtym;
    }

    public void setPointToDraw(GeoPoint point) {
        pointToDraw = point;
    }

    public GeoPoint getPointToDraw() {
        return pointToDraw;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
        super.draw(canvas, mapView, shadow);
        //---translate the GeoPoint to screen pixels---
        Point screenPts = new Point();
        mapView.getProjection().toPixels(pointToDraw, screenPts);
        //--------------draw circle----------------------
        Point pt = mapView.getProjection().toPixels(pointToDraw,screenPts);
        Paint circlePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        circlePaint.setColor(0x30000000);
        circlePaint.setStyle(Style.FILL_AND_STROKE);

        int totalCircle=4;
        int radius=40;
        int centerimagesize=35;

        for (int i = 1; i <= totalCircle; i ++) { 
            canvas.drawCircle(screenPts.x,screenPts.y, i*radius, circlePaint); 
        } 
        canvas.drawBitmap(BitmapFactory.decodeResource(getResources(),imageNames[0]), (screenPts.x-(centerimagesize/2)),(screenPts.y-(centerimagesize/2)), null);
        super.draw(canvas,mapView,shadow);

        return true;
    }
} 
```

还有我的 AndroidManifest.xml 文件——

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.circlemapandroid"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="8" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:debuggable="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name=".ThesisProjectAndroid"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T23:26:22.497

我可以从您的代码中看到，仅在收到第一个修复后才绘制圆圈。您是否在手机设置（位置和安全）中启用了 GPS？如果没有，请启用它。

只有在您从 GPS 获得第一次修复后，您才会获得圆圈。你需要把 GPS 带到户外才能得到它。

您在 Location Listener 中有一个 Toast，所以如果您得到一个带有地址值的 Toast，以上都不能解决您的问题。

最后，为了提高效率，我会将代码移出位置侦听器来创建和添加覆盖，因为每次收到新修复时都创建和删除它有点繁重。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T01:09:26.843

您还缺少 GPS 的一项权限，请在您的 AndroidManifest.xml 中添加这项权限

```
<uses-permission android:name="android.permission.ACCESS_GPS"></uses-permission> 
```

# actionscript-3 - 当我编辑一个时，AS3 中的所有 Textarea 都更新了。为什么？

> ID：12443168
> 
> 赞同：0
> 
> 时间：2012-09-15T23:09:14.687
> 
> 标签：actionscript-3, flash

我在 CS5 的舞台上有 textArea，当我去改变一个颜色时，它们都会改变。这是为什么？它们都有单独的实例名称。有没有办法只编辑一个文本区域而不更新其余的文本区域？我必须在代码中执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:22:59.263

如果您创建一个 MovieClip 并在其中放置一个文本区域，那么当您编辑此文本区域时，舞台中的所有文本都将被编辑，即使它们被赋予了不同的实例名称。这是因为您编辑了该影片剪辑的默认值。

但是，如果您从代码中编辑，您将按实例名称进行编辑，然后就可以了，因为您覆盖了默认值。

# java - [Java]Bencoding：解码字符串

> ID：12443171
> 
> 赞同：0
> 
> 时间：2012-09-15T23:09:21.660
> 
> 标签：java, regex, encoding, bittorrent

我正在为我正在制作的洪流下载系统实施一个编码系统。

对字符串进行编码非常简单，您可以获取一个字符串，例如“hello”，然后通过编写字符串长度 + 一个 ':' 字符来对其进行编码，然后是字符串本身。编码后的“hello”将是“5:hello”

目前我有这个代码。

```
public BencodeString(String string) {
    this.string = string;
}

public static BencodeString parseBencodeString(String string) {
    byte[] bytes = string.getBytes();
    int position = 0;
    int size = 0;
    StringBuilder sb = new StringBuilder();
    while (bytes[position] >= '0' && bytes[position] <= '9') {
        sb.append((char) bytes[position]);
        position++;
    }
    if (bytes[position] != ':')
        return null;

    size = Integer.parseInt(sb.toString());
    System.out.println(size);
    if (size <= 0)
        return null;
    return new BencodeString(string.substring(position + 1, size + position
            + 1));
} 
```

它有效，但我觉得它可以做得更好。做这个的最好方式是什么？

注意：字符串可以是任意大小（因此字符串前多于一位）

已经解决了，感谢所有在这里回复的人:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:44:01.120

Java 字符串表示 Unicode 字符序列。您不应该将它们用于编码/解码，因为这样会遇到编码问题。

例如，字典键必须按其二进制表示排序，而不是按字符串排序。Bencoded 数据没有固有的字符集，因为值可以包含原始二进制（例如哈希）或 utf-8 编码字符串（utf 对哪些字节序列有效进行限制）。

您应该改用 ByteBuffers 或普通的 byte[] 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:16:43.490

使用[string.split(":")](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)以获取字符串的两侧...

然后根据您的意愿解析两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T23:18:41.680

`string.substring(string.indexOf(':'))`

这就是你需要做的。您已经知道数据的大小，因为您将所有数据都保存在`String`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T23:27:33.223

怎么样：

```
public static BencodeString parseBencodeString(String string)
{
    int colon = string.indexOf(":");
    if(colon >= 0)
    {
        return new BencodeString(string.substring(colon+1));
    }
    return null;
} 
```

# javascript - 选择下拉菜单后，使用 Javascript 和 AJAX 禁用特定文本字段

> ID：12443174
> 
> 赞同：0
> 
> 时间：2012-09-15T23:09:46.620
> 
> 标签：javascript, html, ajax

一旦使用 Javascript 和 AJAX 选择了特定的下拉项，我试图禁用某些文本字段。我的 HTML 代码如下：

```
<html>
    <li>
        <span class="label">Rate Type: </span>
        <label class="alignleft">
        <select class="customSelect"name="Rate" onChange="findSelected()" id="Rate2">                           
            <option>Fixed</option>
            <option>Fixed</option>
            <option value="variable">Variable</option>
        </select>
    </label>    
    </li>
    <li>
        <span class="label">Mortgage Interest Rate :</span>
        <label class="alignleft"><span class="percent">%</span><input type="text" class="textfield" value=5 name="Iint"/></label>
    </li>
    <li>
        <span class="label multiline">Amount Borrower want to repay: </span>
        <label class="alignleft"><input type="text" class="textfield" value=10000 name="Ipay"/></label>
    </li>
    <li>
        <span class="label multiline">Posted Interest Rate for Similar Mortgages</span>
        <label class="alignleft"><span class="percent">%</span><input type="text" class="textfield" value=3 name="Iintsim"/></label>
    </li>
    <li>
        <span class="label">Mortgage Interest Rate :</span>
        <label class="alignleft twofield"><strong class="percent">%</strong><input type="text" class="textfield" value=1.30 Name="Mint" /></label>
    </li>

</html> 
```

我的Javascript代码如下：

```
function findSelected(){ 
    var xhttpr = new XMLHttpRequest();
    // xhttpr.open("GET","index.html",true);

    // xmlhttp.send();
    var rate= document.getElementById('Rate2'); 
    var variable = document.getElementById('variable'); 
    if(rate.value == "variable"){
        alert("hi");
        Iint.disabled=false;
        Ipay.disabled=false;
        Iintsim.disabled=false;

    } else {
        Iint.disabled=true;
        Ipay.disabled=true;
        Iintsim.disabled=true;
    }
} 
```

我确定我正在做一些事情，如果不是很多，事情是错误的。请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T02:19:31.867

尝试这样的事情：

```
var $inputs = $('input'); // collection of inputs to disable
$('select').change(function(){
  $inputs.prop('disabled', $(this).val() === 'Variable');
}); 
```

**演示：http:** [//jsbin.com/udimos/1/edit](http://jsbin.com/udimos/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T23:25:01.940

您的问题是 Iint、Ipay 和 Intsim 没有引用您要更改的 DOM 元素。尝试将代码更改为：

```
function findSelected(){ 
var rate= document.getElementById('Rate2'); 
var variable = document.getElementById('variable'); 
if(rate.value == "variable"){
      alert("hi");
     document.getElementById('Iint').disabled=false;
     document.getElementById('Ipay').disabled=false;
     document.getElementById('Iintsim')disabled=false;

} else {

     document.getElementById('Iint').disabled=true;
     document.getElementById('Ipay').disabled=true;
     document.getElementById('Iintsim').disabled=true;
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T02:45:22.780

您不能将 onclick 事件放在 select 的选项上 - 您需要挂钩到 select 的 onchange 事件。

您还需要给每个选项一个值，例如

```
<option value="variable">Variable</option> 
```

基本上，您触发“onchange”，然后检查在下拉列表中选择了哪个项目并决定在您的函数中执行什么操作（请注意，您只是传递这个，而不是 this.form1.Rate）：

```
<select class="customSelect" name="Rate" onchange="javascript:OnChange(this);">

function OnChange(dropdown)
{
var myindex  = dropdown.selectedIndex
var SelValue = dropdown.options[myindex].value
//now you know which value is selected, you can test it and call your disableField
if(SelValue=='variable'){disableField();}  
} 
```

看看这个： http: [//www.codeproject.com/Articles/656/Using-JavaScript-to-handle-drop-down-list-selectio](http://www.codeproject.com/Articles/656/Using-JavaScript-to-handle-drop-down-list-selectio)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T13:08:45.007

完整的代码应如下所示：

```
<html>
  <body>
    <ul>
      <li>
        <span class="label">Rate Type: </span>
        <label class="alignleft">
          <select class="customSelect"name="Rate" onChange="findSelected()" id="Rate2">                           
            <option>Fixed</option>
            <option>Fixed</option>
            <option value="variable">Variable</option>
          </select>
        </label>    
      </li>
      <li>
        <span class="label">Mortgage Interest Rate :</span>
        <label class="alignleft"><span class="percent">%</span><input type="text" class="textfield" value=5 id="Iint"/></label>
      </li>
      <li>
        <span class="label multiline">Amount Borrower want to repay: </span>
        <label class="alignleft"><input type="text" class="textfield" value=10000 id="Ipay"/></label>
      </li>
      <li>
        <span class="label multiline">Posted Interest Rate for Similar Mortgages</span>
        <label class="alignleft"><span class="percent">%</span><input type="text" class="textfield" value=3 id="Iintsim"/></label>
      </li>
      <li>
        <span class="label">Mortgage Interest Rate :</span>
        <label class="alignleft twofield"><strong class="percent">%</strong><input type="text" class="textfield" value=1.30 Name="Mint" /></label>
      </li>
    </ul>
  </body>
</html> 
```

该函数应如下所示：

```
function findSelected(){ 
  var rate= document.getElementById('Rate2'); 
  var variable = document.getElementById('variable'); 
  if(rate.value == "variable"){
    alert("hi");
    document.getElementById('Iint').disabled=false;
    document.getElementById('Ipay').disabled=false;
    document.getElementById('Iintsim').disabled=false;    
  } else {
    document.getElementById('Iint').disabled=true;
    document.getElementById('Ipay').disabled=true;
    document.getElementById('Iintsim').disabled=true;
  }
} 
```

正如其他人所建议的那样，使用 JQuery 将使代码更简单、更易于维护，并为您提供实时绑定等选项，这在您的应用程序开发时可能很有用。

# c# - 引用类型如何在 CLR 堆栈上以实现方式“引用”？

> ID：12443175
> 
> 赞同：0
> 
> 时间：2012-09-15T23:09:58.967
> 
> 标签：c#, .net, reference

毕竟指针都是值类型。这就是他们所指向的 - 是引用类型。这是正确的还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T23:33:34.917

是的，这是正确的。所有局部变量都存储在堆栈中，无论它们是什么类型（值类型或引用类型）。当您创建一个引用类型的变量时，它会保存在堆栈中，当您实例化一个对象并将其分配给该变量时，将在堆上分配一些内存，这些内存将被存储在堆栈中的变量引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T23:52:10.553

> 参考文献呢？引用既不是值类型也不是引用类型的实例，但它们是值。它们必须存放在某个地方。它们是在堆栈上还是在堆上？为什么从来没有人谈论它们？没有理由仅仅因为它们在 C# 类型系统中没有类型而忽略它们。
> 
> 过去我通常推翻这个神话的方式是说真正的陈述应该是“在桌面 CLR 上的 Microsoft 实现中，当值是局部变量或值时，值类型存储在堆栈中或不是 lambda 或匿名方法的封闭局部变量的临时变量，并且方法主体不是迭代器块，并且抖动选择不注册该值。”

得到一个博客的答案。这是链接 - [Eric Lippert 的博客](http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T00:39:32.343

作为对 OP 评论的回应，这里有一个局部变量被转换为类级变量的示例。

如果我从这段代码开始：

```
void Main()
{
    var x = 42;
    Func<int> f = () => x;
    var y = f();
} 
```

编译器将其转换为以下代码：

```
void Main()
{
    var CS$<>8__locals2 = new <>c__DisplayClass1();
    CS$<>8__locals2.x = 42;
    Func<int> f = CS$<>8__locals2.<Main>b__0;
    var y = f();
} 
```

它创建了以下`<>c__DisplayClass1`类：

```
[CompilerGenerated]
private sealed class <>c__DisplayClass1
{
    public int x;

    public int <Main>b__0()
    {
        return this.x;
    }
} 
```

为了清楚起见，我对代码进行了一些清理。

# opengl-es - OpenGL ES 中的标识符、初始化和局部变量

> ID：12443177
> 
> 赞同：2
> 
> 时间：2012-09-15T23:10:49.027
> 
> 标签：opengl-es, shader, fragment-shader

我在使用 ES 着色器时遇到了一些晦涩难懂的问题，而且我现在几乎没有想法了。

这是一些代码：

```
.. precision mediump float;
.. #define STEP (1f/6f)

53 vec4 colorBasedOnProgress(float progress){
54     float transition = (progress/STEP);   
55     transition = floor(transition);
56     float position = (progress - (transition*STEP)) * 7f;
57    
58     position = clamp(position, 0f, 1f);
59    
60     vec4 result;
61        
62     if(transition == 0f){
63         result = mix(COLOR_VIOLET, COLOR_BLUE, position);
64     } else if (transition == 1f){
65         result = mix(COLOR_BLUE, COLOR_GREEN, position);
66     } else if (transition == 2f){
67         result = mix(COLOR_GREEN, COLOR_YELLOW, position);
68     } else if (transition == 3f){
69         result = mix(COLOR_YELLOW, COLOR_ORANGE, position);
70     } else if (transition == 4f){
71         result = mix(COLOR_ORANGE, COLOR_RED, position);
72     } else if (transition == 5f){
73         result = mix(COLOR_RED, COLOR_VIOLET, position);
74     }
75     
76     return result;
77 } 
```

我遇到的错误（仅在设备上，Galaxy S2）：

```
09-16 00:05:04.415: I/InitialLoadingScreen(29901): 0:54: L0001: Expected token ')', found 'identifier'
09-16 00:05:04.415: I/InitialLoadingScreen(29901): 0:55: L0002: Undeclared variable 'transition'
09-16 00:05:04.415: I/InitialLoadingScreen(29901): 0:56: L0002: Undeclared variable 'transition'
09-16 00:05:04.415: I/InitialLoadingScreen(29901): 0:58: L0002: Undeclared variable 'position'
09-16 00:05:04.415: I/InitialLoadingScreen(29901): 0:62: L0002: Undeclared variable 'transition'
09-16 00:05:04.415: I/InitialLoadingScreen(29901): 0:64: L0001: Expected literal or '(', got 'else'
09-16 00:05:04.415: I/InitialLoadingScreen(29901): 0:66: L0001: Expected literal or '(', got 'else'
09-16 00:05:04.415: I/InitialLoadingScreen(29901): 0:68: L0001: Expected literal or '(', got 'else'
09-16 00:05:04.415: I/InitialLoadingScreen(29901): 0:70: L0001: Expected literal or '(', got 'else'
09-16 00:05:04.415: I/InitialLoadingScreen(29901): 0:72: L0001: Expected literal or '(', got 'else' 
```

我对着色器语言没有太多经验，所以我不确定从哪里开始解决这个问题。任何帮助和指点将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T05:43:04.233

我试着编译你的代码。由于您使用了浮点数、1f、2f、3f 等，问题似乎即将到来

而是尝试 1.,2.,3。这就是我总是在我的着色器程序中定义浮点的方式。我用 Mali Shader 编译器成功编译了这个。所以它应该可以在 S2 上运行，因为 S2 中有一个 Mali GPU。

# ruby-on-rails - Cartographer 插件渲染奇怪的地图

> ID：12443178
> 
> 赞同：1
> 
> 时间：2012-09-15T23:11:52.697
> 
> 标签：ruby-on-rails

这是描述问题的图像：

![在此处输入图像描述](../Images/8adf1e6e88c6d72e66c71c9a30fe59f0.png)

所以我正在使用[https://github.com/parolkar/cartographer](https://github.com/parolkar/cartographer)（在这个阶段只能作为插件使用），并且得到了如上所示的不寻常的地图渲染。关于图标位置等，一切看起来都很好。但是当我点击它们时，我会得到时髦的信息框（带有正确的信息）。

这是我用来生成地图和信息框的代码：

```
@map = Cartographer::Gmap.new( 'map')
@map.zoom = :bound
@icon = Cartographer::Gicon.new()
@map.icons <<  @icon

@count = 0
@numrecords.times do 
    markername = "marker#{@count}"
    markername = Cartographer::Gmarker.new(:name=> "Business#{@count}", :marker_type => "Building",
                         :position => [@lat[@count], @long[@count]],
                         :info_window_url => "/bio/#{@branch_id[@count]}", :icon => @icon)

    @map.markers << markername
    @count += 1
    end 
```

也来自控制器：

```
def bio
    @branch = Branch.find(params[:id])
    render :layout => false 
end 
```

和生物视图文件

```
<%= link_to "#{@branch.name}", branch_path %><br />
<%= @branch.business.name %><br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:17:52.053

看起来这是一个引导程序问题，而不是制图师问题。

[https://github.com/twitter/bootstrap/issues/1552](https://github.com/twitter/bootstrap/issues/1552)

注意：以防万一有人读到这篇文章，我建议 gmaps4rails 而不是 cartographer，因为这是一个支持的较新的 gem。

# ios - 基于 facebook 的排行榜

> ID：12443195
> 
> 赞同：6
> 
> 时间：2012-09-15T23:17:21.940
> 
> 标签：ios, facebook, facebook-opengraph, leaderboard

我正在开发与 Facebook 集成的 iOS 平台上的游戏。

我搜索了谷歌，发现了很多不同的、令人困惑的和过时的教程。这就是为什么我决定在这里问。

我想显示玩家的实际排名和玩家成绩与朋友分数的比较。我需要分别记录整个游戏和每个级别的分数。

我熟悉分数连接和开放图形对象，但是我还没有尝试实现任何东西。在我开始之前，我想确定什么是最好的解决方案，以及如何做到这一点。我的应用程序仅适用于 iOS，我想避免创建 Web 应用程序。

*   我可以在 iOS 应用程序上使用分数连接来存储整个游戏结果吗？最近有可能还是一直有可能？
*   开放图形对象是存储每个级别的玩家最佳结果的好解决方案吗？
*   是否可以在 Open Graph 中设置、获取和更改自定义对象？
*   我可以在没有 Facebook 应用配置的服务器上的简单页面中定义图形对象吗？
*   我必须创建 Web 应用程序来实现我的目标吗？
*   从 facebook 获取朋友列表并在我自己的服务器上存储积分会更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T00:25:24.203

Scores API 可在移动设备和桌面设备上使用，就像 Graph API 的几乎每个部分一样。

您可以使用 Facebook Scores API 来管理您的应用的“整体应用得分”（但不能管理各个级别的得分 - 用户一次只能在您的应用中获得一个得分）。请参阅此文档：http: [//developers.facebook.com/docs/guides/games/getting-started/#step4](http://developers.facebook.com/docs/guides/games/getting-started/#step4)

您可能会使用 CUSTOM 打开图形操作来说明用户何时在每个级别中达到特定分数。

如果您要使用自定义打开图形操作或对象，您需要转到应用程序的 Facebook 开发人员设置并编辑打开图形设置以定义 ( [http://developers.facebook.com](http://developers.facebook.com) ) 对象、操作、和您将要使用的聚合。之后，您在自己的服务器上创建对象的许多实例（即，如果您的对象是级别，您将创建一组级别），其中的简单页面标记有符合您定义的“级别”结构的 Open Graph 元标记在Facebook上。如果您所做的只是使用 Facebook 的 Scores API 来跟踪每个用户的单个分数（即总体应用程序分数），则您无需执行任何此操作。

Scores API 可用于画布应用程序和移动设备。

将分数存储在您自己的服务器上很有用，原因有很多，包括：

*   不要求用户使用 FB 登录
*   优化，如果您可以更快地加载分数而无需每次调用​​ Facebook
*   安全性，如果您担心用户可以欺骗的客户端 API 调用
*   拥有许多排行榜/分数，例如每个级别的排行榜，或跟踪历史分数。

但是，对于您的整体应用得分的基本实现，您绝对可以通过让 Facebook 存储和跟踪信息以及您的应用在客户端进行所有调用来开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T00:37:01.327

这是我在尝试做与您相同的事情时找到的答案。

**我可以在 iOS 应用程序上使用分数连接来存储整个游戏结果吗？最近有可能还是一直有可能？**

不会。至少目前，Facebook 只接受您游戏的每位用户一个分值。您可能能够在 Facebook 旁边使用 Parse 获得多个分数。请参阅[https://parse.com/questions/i-want-to-know-if-parse-could-help-with-leaderboards-in-my-game](https://parse.com/questions/i-want-to-know-if-parse-could-help-with-leaderboards-in-my-game)

**是否可以在 Open Graph 中设置、获取和更改自定义对象？**

是的。但是，我认为您每次想要进行更改时都需要提交新的应用更新。

**我必须创建 Web 应用程序来实现我的目标吗？**

我不这么认为。您不需要 Web 服务器即可使用 Graph API for Scores。

# jquery - jQuery数组不断返回[object Object]

> ID：12443200
> 
> 赞同：3
> 
> 时间：2012-09-15T23:18:46.187
> 
> 标签：jquery, arrays

我正在创建一个 jQuery 数组，但我的代码不断返回 [object Object]，3 次。

这是我的代码：

```
var idArray = [];
$('.taskPHP').each(function() {
  var idStr = { 
    'taskPHPid': $(this).attr('id'), 
    'taskValue': $(this).val() 
  }
  idArray.push(idStr);
});

alert(idArray); 
```

编辑：只是叫我愚蠢......我知道我无法提醒数组。错误...对于许多啤酒和编程不混合。

我会尽快给你信用。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T23:23:26.920

看起来不错，试试看`console.log`它输出什么，或者`alert(JSON.stringify(idArray))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T23:28:53.973

an 的默认“to string”`Object`是“[object Object]”。

这就是`Array.toString`实现对它包含的所有元素的调用。（数组有一个标准的“漂亮”字符串表示，但只是以浅层的方式。）

首先将其字符串化为 JSON（即`JSON.stringify`）或使用不只是调用结果的*智能* （即像 Chrome 的） ..`console.log``[[ToString]]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T23:21:49.063

您无法在`alert()`窗口中查看对象。

如果要查看 Object 的内容，请使用：

```
console.log(idArray); // doesn't work in IE of course 
```

# r - 如何获得后续观察（国家年）之间的价值差异？

> ID：12443202
> 
> 赞同：3
> 
> 时间：2012-09-15T23:19:29.513
> 
> 标签：r, dataframe, data.table, dplyr, panel-data

假设，我在 10 年内有 5 个国家/地区的分数，例如：

```
mydata<-1:3
mydata<-expand.grid(
country=c('A', 'B', 'C', 'D', 'E'),
year=c('1980','1981','1982','1983','1984','1985','1986','1987','1988','1989'))
mydata$score=sapply(runif(50,0,2), function(x) {round(x,4)})

library(reshape)
mydata<-reshape(mydata, v.names="score", idvar="year", timevar="country", direction="wide")

> head(mydata)
   year score.A score.B score.C score.D score.E
1  1980  1.0538  1.6921  1.3165  1.7434  1.9687
6  1981  1.4773  1.6479  0.3135  0.6172  0.7704
11 1982  0.8748  1.3704  0.2788  1.6306  1.7237
16 1983  1.1224  1.1340  1.7684  1.3352  0.4317
21 1984  1.5496  1.8706  1.4641  0.5313  0.8590
26 1985  1.7715  1.8953  0.6230  0.3580  1.6313 
```

现在，我想创建一个新变量“期间”，如果下一年的得分与上一年的得分相差 +/- 0.5，则该变量为 1，如果不正确，则为 0。我想为所有 5 个国家这样做。如果能够识别 period = 1 的国家/地区年份并将此信息显示在表格中，那就太好了。

```
> head(mydata)
   year score.A score.B score.C score.D score.E  period.A  period.B ...
1  1980  1.0538  1.6921  1.3165  1.7434  1.9687   NA         NA
6  1981  1.4773  1.6479  0.3135  0.6172  0.7704   0          ....
11 1982  0.8748  1.3704  0.2788  1.6306  1.7237   1
16 1983  1.1224  1.1340  1.7684  1.3352  0.4317   0
21 1984  1.5496  1.8706  1.4641  0.5313  0.8590   0
26 1985  1.7715  1.8953  0.6230  0.3580  1.6313   0 
```

我非常希望这不是太多的要求。我在中尝试过，`dist`但`library(proxy)`我不知道如何将函数限制为成对观察而不是整行。太感谢了！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T00:31:41.680

这个使用`diff`and `lapply`：

```
score.cols  <- grep("score", colnames(mydata), value=TRUE)
period.cols <- gsub("score", "period", score.cols)
compute.period <- function(x)as.integer(c(NA, abs(diff(x)) > 0.5))
cbind(mydata, `names<-`(lapply(mydata[score.cols], compute.period), period.cols)) 
```

**编辑：**很明显（今天早上发布了您的另一个问题）可能您没有使用正确的数据结构。相反，我建议您处理原始（在重塑之前）数据：

```
period.fun <- function(x)as.integer(c(NA, abs(diff(x) > 0.5)))
mydata <- within(mydata, period <- ave(score, country, FUN = period.fun)) 
```

只有这样，您才能重塑`mydata`以使其成为最终形式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-11T00:31:02.310

首先，创建数据，`set.seed()`使其可重现：

```
set.seed(1014)
mydata <- expand.grid(
  country = c('A', 'B', 'C', 'D', 'E'),
  year = 1980:1989
)
mydata$score <- round(runif(50, 0, 2), 4)
head(mydata)

#>   country year  score
#> 1       A 1980 0.1615
#> 2       B 1980 1.6687
#> 3       C 1980 1.2015
#> 4       D 1980 0.3144
#> 5       E 1980 0.0148
#> 6       A 1981 0.9328 
```

接下来，使用 dplyr 划分国家并将每个值与前一个值进行比较：

```
library(dplyr)
out <- mydata %.% 
  group_by(country) %.%
  mutate(big_diff = abs(score - lag(score)) > 0.5)

out %.% 
  arrange(country, year) %.% 
  head(10)

#> Source: local data frame [10 x 4]
#> Groups: country
#> 
#>    country year  score big_diff
#> 1        A 1980 0.1615       NA
#> 2        A 1981 0.9328     TRUE
#> 3        A 1982 1.7492     TRUE
#> 4        A 1983 0.3913     TRUE
#> 5        A 1984 0.5798    FALSE
#> 6        A 1985 1.4830     TRUE
#> 7        A 1986 0.0625     TRUE
#> 8        A 1987 0.8643     TRUE
#> 9        A 1988 1.3603    FALSE
#> 10       A 1989 1.5312    FALSE 
```

在此之后，您可以强制`big_diff()`输入一个数字，并使用 reshape 移动`country`到列，但我可能不会，因为在以后的步骤中使用它会更难。有关详细信息，请参阅[整洁的数据](http://vita.had.co.nz/papers/tidy-data.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T23:42:56.447

```
library(stringr)
periods <- function(mydata) {
# pull out columns with score in the title
score_columns <- mydata[, str_detect(names(mydata), "score")]
# make a copy to store the periods
period_columns <- score_columns
# rename the columns in periods
names(period_columns) <- str_replace_all(names(period_columns), "score", "periods")

for ( i in 1:length(score_columns))
    { 
        offset <- c(NA,score_columns[2:length(score_columns[,i])-1,i])
            # if the diff is > 0.5, return 1 else return 0.
        period_columns[, i] <- ifelse(offset - score_columns[,i]>0.5, 1, 0)
    }

 return(cbind(data,period_columns))
}

# Then simply call the function on your data. It should work with variable number
# of score columns.

> periods(mydata)
   year score.A score.B score.C score.D score.E periods.A
1  1980  1.8251  1.3168  0.9264  1.4921  0.9870        NA
6  1981  0.7603  1.7270  0.0324  1.8332  0.7147         1
11 1982  1.5245  0.6904  1.1699  0.5918  0.3029         0
16 1983  0.5280  0.2333  1.4395  1.2145  0.7273         1
21 1984  1.8739  1.8420  0.9940  0.2886  1.5975         0
26 1985  1.8794  0.7352  1.1665  0.9859  1.1301         0
31 1986  1.8002  0.3546  0.3885  1.9985  1.7183         0
36 1987  1.7985  1.0536  1.8445  0.8573  1.9307         0
41 1988  1.8444  0.6644  1.4765  0.2586  0.5531         0
46 1989  0.7342  0.4921  0.5816  0.8954  0.9359         1
   periods.B periods.C periods.D periods.E
1         NA        NA        NA        NA
6          0         1         0         0
11         1         0         1         0
16         0         0         0         0
21         0         0         1         0
26         1         0         0         0
31         0         1         0         0
36         0         0         1         0
41         0         0         1         1
46         0         1         0         0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-05T14:10:24.180

你可以用一行来做到这一点`dplyr`：

```
library(dplyr)
df2<-mydata%.%group_by(country)%.%mutate(period = c(NA, as.numeric(abs(diff(score))>0.5))) 
```

然后你可以用`dcast`

```
library(reshape2)
dcast(df2,year~country) 
```

结果：

```
 year  A  B  C  D  E
1  1980 NA NA NA NA NA
2  1981  0  1  0  0  1
3  1982  1  0  1  1  0
4  1983  1  0  1  0  1
5  1984  1  1  0  1  1
6  1985  1  0  1  0  0
7  1986  1  1  1  0  1
8  1987  1  1  0  0  0
9  1988  0  0  1  1  1
10 1989  0  0  0  0  0 
```

# python - 在 Go (Golang) 中编写 Python 扩展

> ID：12443203
> 
> 赞同：50
> 
> 时间：2012-09-15T23:19:31.997
> 
> 标签：python, c, go, cython

我目前使用 Cython 来链接 C 和 Python，并在缓慢的 Python 代码中获得加速。但是，我想使用 goroutine 来实现一段非常慢（并且非常可并行化）的代码，但它必须可以从 python 调用。（我已经看过[这个问题了](https://stackoverflow.com/questions/1743526/differences-between-go-and-cython)）

如果有必要，我（有点）很乐意通过 C（或 Cython）设置数据结构等，但从错误修复/避免的角度来看，避免这个额外的层会很好。

无需重新发明任何轮子即可做到这一点的最简单方法是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-09-27T21:29:39.597

**2015 年更新**：可能从 Go 1.5 开始[https://blog.filippo.io/building-python-modules-with-go-1-5/](https://blog.filippo.io/building-python-modules-with-go-1-5/)

> 使用 Go 1.5，您可以构建 .so 对象并将它们作为 Python 模块导入，直接从 Python 运行 Go 代码（而不是 C）。

另见[https://github.com/go-python/gopy](https://github.com/go-python/gopy)

> gopy 从 go 包生成一个 CPython 扩展模块。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-16T01:39:45.873

不幸的是，目前这是不可能的。Go 可以运行 C 代码（然后该 C 代码可以回调到 Go），但[`main`函数必须在 Go 中](https://groups.google.com/d/msg/golang-nuts/nVw-Zgjt9Y8/PcegzOFp_pcJ)，因此 Go 运行时可以进行设置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-01T05:52:20.813

我已经为 setuptools 编写了一个扩展，它允许您编写与 go 接口的 cpython 扩展：[https ://github.com/asottile/setuptools-golang](https://github.com/asottile/setuptools-golang)

这里有几个示例扩展：

*   [https://github.com/asottile/setuptools-golang-examples](https://github.com/asottile/setuptools-golang-examples)
*   [https://github.com/asottile/dockerfile](https://github.com/asottile/dockerfile)

巧妙的是，它们可以像任何其他`pip`软件包一样安装，并且同时支持 cpython 和 pypy。

[也可以构建PEP 513](https://www.python.org/dev/peps/pep-0513/)`setuptools-golang-build-manylinux-wheels` manylinux1 轮子以通过该工具提供预先构建的轮子。

该方法与@ColonelPanic 的答案中的方法几乎相同，但使用了一些额外的技巧来启用 python2 + python3 兼容性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T03:28:14.087

有一个[go-python](https://github.com/sbinet/go-python)包正好可以帮助你在 Go 中编写 Python 扩展：

> 这个包提供了一个可执行的“go-python”，它只加载“python”，然后调用 python.Py_Main(os.Args)。合理的是，在这样的可执行文件下，基于 Go 的 C-Python 扩展将更容易实现（因为这通常意味着通过一些相当复杂的函数跳跃从 C 调用 go）

# tcl - TCL CSV 引用字符

> ID：12443204
> 
> 赞同：4
> 
> 时间：2012-09-15T23:19:35.633
> 
> 标签：tcl

我如何使用 csv 添加引用字符：

```
% package require csv
0.7.3

% set l [list "21" "Some test" "Some test"]
% ::csv::join $l {,} {"}
21,Some test,Some test 
```

我想要像 "21","Some test","Some test" 这样的输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T23:53:29.843

该`csv`软件包不提供此类引用，除非您诱骗它这样做。

可以肯定地说，它应该只是提供一个选项来做这件事，但试试这个：

```
package require struct::list

set l {1 "Some Text" "Some Test"}
set r [join [struct::list map $l {format {"%s"}}] ","]
puts $r 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T22:38:57.237

诀窍是：

*   让 Tcl 不去掉你的双引号；
*   Disable`csv`的转义（默认为`"`）

```
% set L [list {"21"} {"Some test"} {"Some test"}]
{"21"} {"Some test"} {"Some test"}
% csv::join $L , {}
"21","Some test","Some test" 
```

请注意，这并不能解决您的某个值`"`在中间某处有一个字符的问题——如果发生这种情况，您应该以某种方式以您的目标 CSV 处理器理解的方式转义这些字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:36:13.910

这个解决方案不是最好的，但有效。您可能需要注意一些极端情况。它不需要更改列表中的项目，也不需要 CSV 包。

```
set theList [list "21" "Some test" "Some test"]
set quotedCSV "\"[join $theList {","}]\""
puts $quotedCSV 
```

基本上，`quotedCSV = quote + ( theList, separated by quote+comma+quote ) + quote`. 我的建议是使用 CSV，除非你真的需要引号。

# ios - iOS UIPageControl 替换状态栏

> ID：12443205
> 
> 赞同：0
> 
> 时间：2012-09-15T23:19:39.157
> 
> 标签：ios, uipagecontrol

我想知道您将如何替换状态栏或至少将页面控件放在上面？每次有人页面时，这将是一个临时放置几秒钟，然后它就会消失。我以前在应用程序中看到过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T23:27:21.640

我不认为你不能超越状态栏，因为它不属于你的根窗口。

但是即使使用动画选项，也可以调用它来手动删除 UIStatusBar。

```
[[UIApplication sharedApplication] setStatusBarHidden:YES animated:NO]; 
```

您也可以在 InterfaceBuilder 的窗口中禁用它。或者，您可以`Status bar is initially hidden = YES`在`appname-Info.plist`文件中添加密钥。

然后你可以用空间做你想做的事。

也许您想删除它，然后让它再次出现，但请注意，由于您从隐藏状态栏获得的 20 像素，您的根窗口大小会发生变化。

# android - 条形图安卓

> ID：12443207
> 
> 赞同：0
> 
> 时间：2012-09-15T23:20:23.977
> 
> 标签：android, bar-chart

我需要在 android 中绘制简单的条形图（类似于那个[条形图](https://play.google.com/store/apps/details?id=com.expensemanager&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5leHBlbnNlbWFuYWdlciJd)）。我发现了很多库，但它们非常复杂并没有真正有用。也许有人已经使用了条形图并且知道一个好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-29T09:55:30.493

我有一个非常简单易用的解决方案，用于`Bar Chart`在 android 中使用`MpAndroidChart Library`.

`build.gradle`在文件中添加库：

```
compile 'com.github.PhilJay:MPAndroidChart:v2.2.4' 
```

MainActivity.java：

```
 BarChart barChart = (BarChart) findViewById(R.id.barchart);

    ArrayList<BarEntry> entries = new ArrayList<>();
    entries.add(new BarEntry(38f, 0));
    entries.add(new BarEntry(52f, 1));
    entries.add(new BarEntry(65f, 2));
    entries.add(new BarEntry(30f, 3));
    entries.add(new BarEntry(85f, 4));
    entries.add(new BarEntry(19f, 5));
    entries.add(new BarEntry(75f, 6));

    BarDataSet bardataset = new BarDataSet(entries, " ");

    ArrayList<String> labels = new ArrayList<String>();
    labels.add("Mon");
    labels.add("Tue");
    labels.add("Wed");
    labels.add("Thus");
    labels.add("Fri");
    labels.add("Sat");
    labels.add("Sun");

    BarData data = new BarData(labels, bardataset);
    barChart.setData(data); // set the data and list of lables into chart

    barChart.setDescription("Description");  // set the description

    bardataset.setColors(ColorTemplate.COLORFUL_COLORS);

    barChart.animateY(5000); 
```

活动主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.example.jatin.bargraph.MainActivity">
    <com.github.mikephil.charting.charts.BarChart
        android:id="@+id/barchart"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>
</android.support.constraint.ConstraintLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-21T14:47:46.110

我有一个非常简单的解决方案（你不需要什么特别的）：

```
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.widget.LinearLayout;

public class TestesActivity extends Activity {

    private List<Double> s;

    private LinearLayout linearChart;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        linearChart = (LinearLayout)findViewById(R.id.llGraph);
        s = new ArrayList<Double>();

        for (int i = 0; i < 12; i++) {
            Random r = new Random();
            s.add(r.nextDouble());
        }

        Thread t = new Thread() {
            public void run() {
                while (true) {
                    try {
                        Thread.sleep(5000);
                    } catch (Exception e) {

                    }

                    runOnUiThread(new Runnable() {
                        @Override
                        public void run() {
                            drawChart(s.size());
                        }
                    });
                }
            }           
        };
        t.start();
    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);

        drawChart(s.size());
    }

    public void drawChart(int count) {
        linearChart.removeAllViews();

        int h = linearChart.getMeasuredHeight();
        int w = linearChart.getMeasuredWidth();

        for (int k = 1; k <= count; k++) {
            Random r = new Random();
            int alt = r.nextInt(h);

            View view = new View(this);

            if (alt < h/4) {
                view.setBackgroundColor(Color.RED);
            } else if (alt < h /2) {
                view.setBackgroundColor(Color.YELLOW);
            } else {
                view.setBackgroundColor(Color.GREEN);
            }

            view.setLayoutParams(new LinearLayout.LayoutParams((w / count) -3, alt));
            LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) view.getLayoutParams();
            params.setMargins(3, h - alt, 0, 0); // substitute parameters for left,top, right, bottom
            view.setLayoutParams(params);
            linearChart.addView(view);
        }
    }   

} 
```

布局.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/llMain"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@drawable/radialback">

    <LinearLayout
        android:id="@+id/llGraph" >
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T23:54:52.897

这真的很简单：

```
class Bar extend View{
  int max; // Size of bar.
  int current; //Used
  Paint paint;

  [...] constructors.

  public void onDraw(Canvas c){
    paint.setColor(0xFF00FF00);
    c.drawRect(0, 0, getWidth(), getHeight()); //Draw whole View to green.
    paint.setColor(0xFFFF0000);
    c.drawRect(0, 0, getWidth()*current/max, getHeight()); //Draw used View to red.
  } 
```

}

进一步的美化取决于你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-20T15:02:37.387

我写了一个小部件来绘制波形或条形聊天。使用起来非常简单直接：[https ://github.com/maxyou/SimpleWaveform](https://github.com/maxyou/SimpleWaveform)

# javascript - 被另一个函数调用时函数不会触发

> ID：12443208
> 
> 赞同：0
> 
> 时间：2012-09-15T23:20:50.837
> 
> 标签：javascript, html

温柔点，我对 JavaScript 很陌生：

我正在创建一个二十一点游戏——CodeAcademy 上的一些教程涵盖了一些基础知识，所以我试图自己更进一步。作为打印每个玩家姓名的前奏，我创建了一个函数 ( `showNames()`) 来打印“Bang, Boom!” 进入我的“hud”部分。当我（临时）分配`showNames()`给`onclick`我的“点击”按钮的功能时，这有效。但是，当我尝试`showNames()`从我的`setupGame()`函数调用时，它不会触发。我哪里错了？下面的代码：

**索引.html：**

```
<!DOCTYPE html>
<html>
    <head>
        <title>Awesome Blackjack!</title>
        <link rel="stylesheet" type="text/css" href="common/css/default.css" />
        <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro|Galindo|Duru+Sans|Jolly+Lodger|McLaren' rel='stylesheet' type='text/css'>
        <script type="text/javascript" src="common/js/blackjack_controller.js"></script>
        <script type="text/javascript">
            function play() {
                if (setupGame()) {
                    showNames();
                    alert("Pow");
                } else {
                    alert("You must enter a number between 1 and 4.");
                }
            }
        </script>
    </head>
    <body>
        <div id="wrapper">
            <section id="hud">
                <div class="player" id="player1">
                    <div class="playerName">Drew</div>
                    <div class="playerScore">21</div>
                </div>
                <div class="player">
                    <div class="playerName">Dalton</div>
                    <div class="playerScore">12</div>
                </div>
                <div class="player">
                    <div class="playerName">Lindsey</div>
                    <div class="playerScore">23</div>
                </div>
                <div class="player">
                    <div class="playerName">Steven</div>
                    <div class="playerScore">9</div>
                </div>
            </section>
            <section id="table">
                <div id="controls">
                    <input type="button" name="start" id="start" value="Start" class="control start" onclick="play()"; />
                    <input type="button" name="hit" id="hit" value="Hit" class="control hit" onclick="showNames()"; />
                    <input type="button" name="stay" id="stay" value="Stay" class="control stay" />
                </div>
                <div id="dealer">
                    <div id="dealerName">Dealer</div>
                    <div id="dealerScore">19</div>
                    <div id="playArea">
                        <div class="card dealer club first">9</div>
                        <div class="card dealer club">9</div>
                        <div class="card dealer club">9</div>
                        <div class="card dealer heart king"></div>
                    </div>
                </div>
                <div id="playerWrapper">
                    <div class="playerArea a">
                        <div class="playerAreaName">Drew</div>
                        <div class="card club first">9</div>
                        <div class="card club">9</div>
                        <div class="card club">9</div>
                        <div class="card heart king"></div>
                    </div>
                    <div class="playerArea b">
                        <div class="playerAreaName">Drew</div>
                    </div>
                    <div class="playerArea c">
                        <div class="playerAreaName">Drew</div>
                    </div>
                    <div class="playerArea d">
                        <div class="playerAreaName">Drew</div>
                    </div>
                </div>
            </section>
        </div>
    </body>
</html> 
```

**blackjack_controller.js：**

```
var numberOfPlayer = 0;
var players = new Array();
var name;
var names;

// Methods
function showNames() {
    document.getElementById("hud").innerHTML = "Bang, Boom!";
};

function setupGame() {
    numberOfPlayers = prompt("Please enter the number of players (up to 4).");
    if (numberOfPlayers > 0 && numberOfPlayers <= 4) {
        for (var i = 1; i <= numberOfPlayers; i++) {
            players[i] = new Player(prompt("Enter a name for player " + i + "."));
        }

        for (var i = 1; i <= numberOfPlayers; i++) {
            names += players[i].printName();
        }

        return true;
    }

    return false;
}

// Classes
function Player(name) {
    this.name = name;
    this.cards = new Array();
    this.score = 0;

    function printName() {
        return this.name + " ";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T23:28:20.560

您定义错误的方法。它应该类似于以下内容：

```
this.printName = function() {
    return this.name + " ";
} 
```

[**演示**](http://jsfiddle.net/BFwHF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T23:28:47.543

Player.printName 只存在于函数 Player 中。您需要返回（引用）它才能从外部访问它。

此外..`Player`可以以不同的方式实现（更好）..看看“模块模式”（如果你想了解javascript，模块模式是必须阅读的）

[http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)

# sql - 为什么完全离开连接（为什么不在where子句中使用带有条件的外连接）

> ID：12443211
> 
> 赞同：2
> 
> 时间：2012-09-15T23:21:02.190
> 
> 标签：sql

如果可以像这样简单地编写完整的外连接，那么左连接（或者甚至可能是内连接）有什么用

```
playorm=# select * from trade as a full outer join Account as b on b.id=a.accoun
tid where a.id = a.id; 
```

这最终返回了 LEFT 内连接将返回的所有相同结果。

或者如果你想要一个内部连接，你可以这样做

```
playorm=# select * from trade as a full outer join Account as b on b.id=a.accoun
tid where a.id = a.id AND b.id = b.id; 
```

这最终返回了 INNER JOIN 将返回的所有相同结果。

我只是觉得这很有趣。我最初误以为左外连接会返回空值+条件匹配但发现条件必须匹配，这有点奇怪，因为在这个内连接中消除了匹配的记录（可能是因为连接是在表达式匹配之前完成的，所以.accountid 为 null 是 where 子句的无用部分......

```
select * from trade as a inner join Account as b on b.id=a.accountid
here (b.isActive=false OR a.accountid is null) and a.number < 15; 
```

后来，迪恩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T00:04:19.017

我不太确定你的问题的意图。你的意思是“为什么 SQL 支持 left-outer-join 的语法，因为它很容易使用带有额外*xxx is not null*条件的全外连接的语法？” 换句话说，左外连接似乎是不必要的语法糖吗？

答：你使用语法糖让阅读你代码的其他人更清楚你的意思。例如，假设一所学校有一张学生表和一张课程表。如果您想查看学生列表以及他们通过了哪些课程，包括没有通过任何课程的学生，那么左外连接可以清楚地表明该意图。如果我在您的代码中看到完整的外部连接，我可能会假设您也对没有人通过的课程感兴趣。要在过滤掉那些不匹配课程的条件中找到该子句，需要深入研究您的代码。

像我这样的程序员往往时间紧迫，因此他们不会尽可能深入地研究您的代码，因此请提供提示以帮助我们理解您的意图。使用联动糖来增加同事的职业生活。

顺便说一句，您说“内部联接消除了匹配的记录”。你不是说“内连接消除了另一张表中*不*匹配的记录”吗？实际上，您最好将内连接视为返回所有匹配的记录，将左/右/全外连接视为使用第一/第二/两个表中的不匹配记录补充内连接。

# eclipse - 在eclipse中的窗口之间拖动编辑器

> ID：12443213
> 
> 赞同：3
> 
> 时间：2012-09-15T23:21:46.877
> 
> 标签：eclipse

我最近将我的 eclipse 安装更新到 Juno，我发现了一个我想维护的重要更改：

在 Indigo 版本中，当我打开一个文件并将其拖到 eclipse 的窗口之间的选项卡时，它只会移动到新窗口。但是在 Juno 版本中，该尝试会导致一个浮动窗口，其中文件的编辑器就在目标窗口的上方。

我怎样才能在 Juno 中完成这项工作？是否有任何恢复此选项的选项，或者我应该安装 Indigo 版本？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:53:59.177

这是当前版本的 Eclipse (4.2 / Juno) 中的一个已知错误。根据跟踪器的说法，目的是为 4.3 里程碑修复它： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=384308](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384308)

同时，您可以选择恢复为 Indigo，或者只是通过文件树在新窗口中手动打开文件。

# windows-7 - 403 Forbidden on Apache (CentOS) Server as GUEST 在 Windows 7

> ID：12443215
> 
> 赞同：1
> 
> 时间：2012-09-15T23:21:58.533
> 
> 标签：windows-7, centos, virtualbox

这些是我的虚拟机设置：

```
HOST: windows 7 ultimate 32bit
GUEST: CentOs 6.3 i386
Virtualization soft: Oracle virtualBox 4.1.22
Networking: NAT -> (PORT FORWARD: HOST:8080 => GUEST:80)
Shared Folder: centos 
```

所有项目文件都进入共享文件夹，并且为每个项目文件创建一个虚拟主机 conf 文件，`/etc/httpd/conf.d/`如下所示`/etc/httpd/conf.d/$domain`

在我在centos中禁用windows防火墙和iptables之前，我在浏览器中看不到任何东西，如果我输入例如：`http://www.$domain:8080/`我看到的是：

```
Forbidden

You don't have permission to access / on this server.
Apache/2.2.15 (CentOS) Server at www.$domain.com Port 8080 
```

示例虚拟主机 conf 文件：

```
<VirtualHost *:80>
    #General
    DocumentRoot /media/sf_centos/path/to/public_html
    ServerAdmin webmaster@$domain
    ServerName www.$domain
    ServerAlias $domain *.$domain

    #Logging
    ErrorLog /var/log/httpd/$domain-error.log
    CustomLog /var/log/httpd/$domain-access.log combined

    #mod rewrite
    RewriteEngine On
    RewriteLog /var/log/httpd/$domain-rewrite.log
    RewriteLogLevel 0
</VirtualHost> 
```

`centos`共享文件夹可供来宾使用`/media/sf_centos` 这些是以下文件权限`sf_centos`：

```
drwxrwx--- root vboxsf 
```

`vboxsf`组包括：`apache`和`root`

所以这些是我的问题：

1-如何解决禁忌问题？

2-如何设置主机和访客防火墙？

3-如何改进这个开发环境以尽可能多地模拟生产环境，特别是安全改进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:08:18.873

对于 #1/2：这是由于 VirtualBox 使用的自动挂载方法导致的权限问题。您必须手动安装它，而不是自动安装。

suomynona 的帖子（第 3 次回复）有一些关于解决此问题的分步说明： [https ://forums.virtualbox.org/viewtopic.php?f=3&t=38891#p179152](https://forums.virtualbox.org/viewtopic.php?f=3&t=38891#p179152)

至于#3，标准做法是拥有一个尽可能模拟生产的登台服务器（相同的操作系统、相同的更新、版本等）。这将允许您在部署到生产之前从本地开发环境进行部署以进行集成测试。有时我们甚至会设置我们的开发虚拟机使用与生产相同的操作系统来处理版本/兼容性问题可能会导致头痛的更复杂的项目。

# java - 将 alpha 添加到颜色后，Java“路径定义中缺少初始移动”

> ID：12443217
> 
> 赞同：0
> 
> 时间：2012-09-15T23:22:02.510
> 
> 标签：java, path, definition

我在 Java 中遇到了一个非常奇怪的行为/问题。我所做的归结为在画布上绘制简单的形状。一切都很顺利，直到我决定添加另一个可以访问我的画布的线程。

所以有两个线程，每个都绘制相似的形状，并且每个都依赖相同的函数（在另一个非线程对象中）来进行绘制。这些函数已同步化，以防止底层绘制命令被乱序调用。

一切都很好，除非我将线程#2 的绘图函数调用的颜色设置为包含 alpha 通道。当我这样做时，我得到以下异常：

```
Exception in thread "Thread-3" java.awt.geom.IllegalPathStateException: missing initial moveto in path definition
    at java.awt.geom.Path2D$Float.needRoom(Unknown Source)
    at java.awt.geom.Path2D.closePath(Unknown Source)
    at sun.java2d.pipe.PixelToShapeConverter.makePoly(Unknown Source)
    at sun.java2d.pipe.PixelToShapeConverter.fillPolygon(Unknown Source)
    at sun.java2d.pipe.ValidatePipe.fillPolygon(Unknown Source)
    at sun.java2d.SunGraphics2D.fillPolygon(Unknown Source)
    at java.awt.Graphics.fillPolygon(Unknown Source)
    at com.deadbird.zndo.Tile.drawPolygon(Tile.java:177)
    at com.deadbird.zndo.TiledImage.drawPolygon(TiledImage.java:158)
    at com.deadbird.zndo.TileSet.drawPolygon(TileSet.java:46)
    at com.deadbird.zndo.Map.drawPolygonAtCoords(Map.java:90)
    at com.deadbird.zndo.CutterThread.drawArea(CutterThread.java:146)
    at com.deadbird.zndo.CutterThread.flushTmpAreaList(CutterThread.java:107)
    at com.deadbird.zndo.CutterThread.cut(CutterThread.java:68)
    at com.deadbird.zndo.CutterThread.run(CutterThread.java:50)
    at java.lang.Thread.run(Unknown Source) 
```

让我丧命的是，这个错误似乎表明我提供给它的几何图形有问题，我知道这不是真的，当我运行相同的代码、相同的几何图形、只是使用不包含的颜色对象时alpha 值程序运行得很好，轻松地处理大量数据，并且绘图函数根本没有显示两个线程有​​问题的迹象。

还值得注意的是，线程#1 在颜色对象中使用 alpha 值调用相同的绘制函数没有问题，这些结果绘制得很好。

所以我的问题是，什么可能导致这种差异？相同的功能，两个线程，一个可以很好地绘制 alpha 和非 alpha 颜色，另一个似乎只适用于非 alpha。

这是有问题的功能：

```
public synchronized void drawPolygon(double[] x, double[] y, Color color) {

    // Create polygon
    int[] intX = new int[x.length];
    int[] intY = new int[y.length];

    // Convert the double array to an int array
    for (int i=0; i < intX.length; i++) {
        intX[i] = (int) x[i]; 
        intY[i] = (int) y[i]; 
    }

    Polygon poly = new Polygon(intX, intY, intX.length);

    // Now draw that poly
    g.setColor(color);
    g.fillPolygon(poly);

} 
```

更具体地说明导致问题的原因，这有效：

```
drawPolygon(x, y, new Color(13, 191, 0) ); 
```

这不...

```
drawPolygon(x, y, new Color(13, 191, 0, 30) ); 
```

这很有趣，因为我没有给它一个形状对象，而是给它一组静态的 X 和 Y 值，然后让 Java 将它们组装成一个多边形对象。无论路径形成是什么，它都应该由多边形的对象正确处理（并且在我引入新线程之前它工作得很好，我不认为这是这里的问题）。

这真的看起来像是一个内部问题，有什么想法吗？

-科迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:05:14.867

好的，所以我想通了。

我试图通过在我的“剪切”线程（导致问题的线程）中使用行迭代器将其分解来绘制区域（java.awt.geom.Area）。绘制区域的正确方法是使用 Graphics2D 的填充方法而不是 fillPolygon。填充可以绘制任何形状对象，包括区域。

-科迪

# java - 使用 Spring 3.0 学习 Web 开发

> ID：12443218
> 
> 赞同：1
> 
> 时间：2012-09-15T23:22:08.873
> 
> 标签：java, spring

我正在寻找使用 Spring 3.x 学习 Web 开发，并希望将 hibernate 集成到其中。使用 Spring MVC 和 Hibernate 学习 Web 开发的最佳资源是什么？我是新手，所以想要一些可以让我从头开始的资源。还为此推荐最好的IDE。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T23:38:35.210

Spring in Action 是一本入门的好书：http: [//www.amazon.com/Spring-Action-Craig-Walls/dp/1935182358](https://rads.stackoverflow.com/amzn/click/com/1935182358)

它以简短的章节介绍 MVC 和 Hibernate，让您快速入门。对于 IDE，我会推荐安装了 Spring IDE 插件的 Eclipse。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T01:52:30.843

这有点取决于您所说的“我是新手”的意思。一般的 Web 开发新手？... Java 新手还是 Spring 和 Hibernate 新手？一般来说，Spring Roo 可能是一个很棒的工具，但在学习方面，你最好尽可能多地手动滚动。至少在开始时。那是因为它将带您到您将学习的地方。事情会破裂，产生奇怪的结果等等，总而言之，你会知道一切都是如何凝结的。冬眠本身就是一种冒险。所以对于初学者来说，我会放弃 Roo 的便利，让你的手真的很脏。

我会投票支持开始一个项目，当你遇到困难时会回来争取更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T01:39:06.627

使用 spring ROO 启动一个项目，它将为您设置所有最佳实践。

另外，使用 spring STS IDE，它已经安装了一些 eclipse 插件。

# jquery - jquery 1.8.0，包含 jquery ui 吗？

> ID：12443220
> 
> 赞同：0
> 
> 时间：2012-09-15T23:22:33.680
> 
> 标签：jquery

在 jsfiddle.net 上，当我选择 jQuery 1.7.2 时，会打开一个下拉菜单，让我有机会选择要包含的 jQuery UI。但是，当我选择 jQuery 1.8.0 时，它并没有这样做，所以我假设 jQuery UI 现在已内置到 jQuery 中。但是，这个小提琴不适用于选定的 jQuery 1.8.0，但它适用于 1.7.2 和包含的 jQuery UI

[http://jsfiddle.net/mjmitche/sTzCS/](http://jsfiddle.net/mjmitche/sTzCS/)

我基本上只是在尝试使用 JQuery UI 的 sortable() 函数，这可以让我在 jQuery 在拖动后重新对齐列表中的所有内容之后将列表元素拖动到不同的位置。这是一个使用 jQuery 1.7.2 和 jQuery UI 的工作小提琴，包括[http://jsfiddle.net/mjmitche/sTzCS/2/](http://jsfiddle.net/mjmitche/sTzCS/2/)

```
 <ul id="sortlist">
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
        <li>Item 4</li>
        <li>Item 5</li>
        <li>Item 6</li>
        <li>Item 7</li>
     </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T23:29:07.283

jQuery UI 没有内置在 jQuery 中。jsFiddle 没有更新他们的列表。请记住，jQuery 1.8+ 需要 jQuery UI 1.8.22+。

# android - pagerAdapter 引用了一个编程的布局android

> ID：12443221
> 
> 赞同：0
> 
> 时间：2012-09-15T23:22:41.160
> 
> 标签：android

我通常使用寻呼机适配器滚动浏览不同的布局，但这次我的布局是用 java 代码而不是 xml 创建的。通常在选择资源 id 时，我会参考 R.layout.file。使用 java 代码创建布局后，我不知道如何引用资源。有谁知道如何做到这一点？

我创建的要引用的布局的示例代码：

```
LinearLayout ParentLayout = new LinearLayout(getApplicationContext());
ParentLayout.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
ParentLayout.setOrientation(LinearLayout.VERTICAL); 
```

通常对于寻呼机适配器，我有这样的东西：

```
public class MyPagerAdapter extends PagerAdapter {

@Override
public int getCount() {
    return 3;
}

public Object instantiateItem(View collection, int position){
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

     int resId = 0;
     switch (position) {
     case 0:
         resId = R.layout.xmlfile1; //I want to reference the ParentLayout I created above
         break;
     case 1:
         resId = R.layout.xmlfile2;
         break;
     case 2:
         resId = R.layout.xmlfile2; 
         break;

}
     View view = inflater.inflate(resId, null);
     ((ViewPager) collection).addView(view, 0);
     return view;
}

...

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:59:22.430

你可以试试这个：

```
public Object instantiateItem(View collection, int position){
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

 int resId = 0;
 View view = null;
 switch (position) {
 case 0:
     view = createView(); // the layout you create above
     break;
 case 1:
     resId = R.layout.xmlfile2;
     view = inflater.inflate( resId, null );
     break;
 case 2:
     resId = R.layout.xmlfile2; 
     view = inflater.inflate( resId, null )
     break;

 }
 ((ViewPager) collection).addView(view, 0);
 return view;
}

View createView(){
     // create your layout right here.
} 
```

# java - HTMLUnitDriver 没有正确输入信息？

> ID：12443224
> 
> 赞同：0
> 
> 时间：2012-09-15T23:23:20.967
> 
> 标签：java, html, selenium, sendkeys

使用 JAVA 和 SELENIUM 库：

我有一个使用 FirefoxDriver 的 web automator，到目前为止它工作得非常完美。我的代码如下：

```
System.out.println("Creating new web driver");
WebDriver driver = new HtmlUnitDriver(BrowserVersion.FIREFOX_3_6);
System.out.println("Parsing CARD OFFICE PAGE\nAccessing webpage");
driver.get(myWebsite);

System.out.println("Setting login credentials");
WebElement id = driver.findElement(By.id("quickloginphrase"));
WebElement pw = driver.findElement(By.id("quickpassword"));

id.sendKeys(username);
pw.sendKeys(password);

System.out.println("Submitting credentials");
System.out.println(driver.getCurrentUrl());
pw.sendKeys(Keys.ENTER);
System.out.println("Credentials submitted"); 
```

在我开始使用 HTMLUnitDriver 之前，该程序设法登录到网页，但现在我被重定向到“登录失败”页面。我认为密码或用户名输入不正确。FirefoxDriver 和 HTMLUnitDriver 之间是否存在一些我不知道的细微差别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:26:25.980

好吧，您可能在这里遇到以下问题：1）

```
pw.sendKeys(Keys.ENTER); 
```

输入按钮处理程序未正确处理 2)

```
id.sendKeys(username);
pw.sendKeys(password); 
```

您正在发送不正确的登录密码可能的解决方案：尝试按下登录按钮而不是按下“输入”键使用

```
driver.findElement(By.xpath(//....blablabla)).click(); 
```

* * *

因此，我为您提供了一些用于正确登录和验证成功登录的代码：

```
public void doAdminLogin() throws IOException {
        String curTitle=driver.getTitle();
        locatorFindingHandling("login.logininput", "login.admin.login");

        locatorFindingHandling("login.passinput", "login.admin.pass");

        locatorFindingHandling("login.loginbutton");
        driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);

        String newTitle=driver.getTitle();
        Assert.assertFalse(curTitle.equals(newTitle));

    }

public void locatorFindingHandling(String key, String key1) throws IOException {

        driver.findElement(By.xpath(propertyKeysLoader(key))).sendKeys(propertyKeysLoader(key1));

    } 
```

因此，正如我上面提到的，尝试调查解决方法。希望这对你有用）

# html - 有两种形式，希望其中一个显示在另一个里面

> ID：12443226
> 
> 赞同：0
> 
> 时间：2012-09-15T23:23:24.910
> 
> 标签：html

标题可能令人困惑......问题如下：

我正在为一个网站制作一个注册页面，所以我有一些常用的东西，比如昵称、电子邮件、姓名、姓氏、出生日期、个人资料图片等。据我所知，不可能只制作一个表格同时处理文件（个人资料图像）和文本，所以我必须制作两个表格，其中一个有个人资料图像，另一个表格有其余部分（所有字段和一个完成注册的按钮）。问题是我希望在出生日期和完成按钮之间显示个人资料图像表格（它们都是另一种形式......）。

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T00:11:48.380

表单可以包含文件输入控件和其他输入控件的混合。当下面的表单将被提交时，文件内容和 textInput 值将被服务器接收。

```
<form action="UploadUrl" method="POST" enctype="multipart/form-data" >
  <input type="text" id="textInput" name="textInput" value="zzz"/>
  <input type="file" id="fileInput" name="fileInput"/>
  <input type="submit" value="submit"/>
</form> 
```

# java - 将密码和电子邮件数据发布到 Google 登录

> ID：12443228
> 
> 赞同：1
> 
> 时间：2012-09-15T23:23:50.193
> 
> 标签：java, android, jsoup

所有-我有代码：

```
doc = Jsoup.connect("https://play.google.com/apps/publish/Home?dev_acc=00758402038897917238")
                      .data("input#Email", "email@gmail.com")
                      .data("input#Passwd", "123abcABC123" )
                      .post(); 
```

我从这里得到了他的：[SO question](https://stackoverflow.com/questions/10012399/how-to-post-data-into-website-using-jsoup)，但无法弄清楚出了什么问题。我得到的是登录页面，而不是显示我所有已发布应用程序的页面。我相信问题可能出在`input#Email`and`input#Passwd`但我不确定。我不太明白那应该指的是什么。所以我的问题是：我**如何使用类似于上述代码的代码登录到我的开发者控制台，以及应该去哪里`input#Email`和`input#Passwd`在哪里？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-26T10:19:27.003

在帖子中，您必须使用名称，而不是 css 选择器：

```
doc = Jsoup.connect("https://play.google.com/apps/publish/Home?dev_acc=00758402038897917238")
                      .data("Email", "email@gmail.com")
                      .data("Passwd", "123abcABC123" )
                      .post(); 
```

# javascript - 使用 jQuery 获取点击的元素 html？

> ID：12443229
> 
> 赞同：4
> 
> 时间：2012-09-15T23:24:00.167
> 
> 标签：javascript, jquery

我正在听一些元素的点击。我想在用户单击一个时显示警报，警报的内容应该是单击元素的 innerHtml。

```
$(".tags-container > p").click(function (event) {
    alert('inner html');
    }); 
```

我可以通过将代码添加到 html 来做到这一点，但我更喜欢使用 jquery 侦听器。

如何在警报中显示元素的 innerHTML？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T23:31:58.780

[**使用 jQuery 的html()**](http://api.jquery.com/html/)`<p>`从标签中获取 HTML ：[](http://api.jquery.com/html/)

 **```
$(".tags-container > p").click(function(event) {
    alert($(this).html());
});​ 
```

`<p>`使用 JavaScript 的[**innerHTML**](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)从标签中获取 HTML ：

```
$(".tags-container > p").click(function(event) {
    alert(this.innerHTML);
});​ 
```

[**使用 jQuery 的text()**](http://api.jquery.com/text/)`<p>`仅从标签中获取文本，它将去除任何 HTML 并返回组合文本。[](http://api.jquery.com/text/)

 **```
$(".tags-container > p").click(function(event) {
    alert($(this).text());
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:30:01.130

```
$(".tags-container > p").click(function () {
    alert($(this).html());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T23:30:02.573

使用 jQuery 的`html()`函数

```
$(".tags-container > p").click(function (event) {
    alert($(this).html());
    }); 
```

一个工作示例：http: [//jsfiddle.net/ukxvp/](http://jsfiddle.net/ukxvp/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T23:35:00.860

正如他们所说，只需使用 $.html()。就个人而言，我只使用 innerHTML 因为 $.html() 过滤掉了 br elems 等；我只是把它们变成换行符。

```
$(".tags-container > p").click(function () {
   alert(this.innerHTML.replace(/<br>/, '\n'));
}); 
```****

# python - 附加字典，保存到文件并定期增加字典

> ID：12443233
> 
> 赞同：0
> 
> 时间：2012-09-15T23:25:33.687
> 
> 标签：python

我创建了一个字典并使用 json 将其保存到一个文件中。该代码需要输入并定期更新字典，但不幸的是我无法正确编写字典。以下是我编写的代码。看看这里：

```
import os, sys, pickle, re, json
from optparse import OptionParser

parser = OptionParser("Store Daily Intakes \n python [Options] <-h help>")
parser.add_option("-n", "--ndays", dest="ndays", action="store", type="int", help="Input the day")
parser.add_option("-m", "--morning", dest="morning", action="store", type="string", help="Input the morning intake format <Banana-1pc,Bread-1pc,CottageChees-2tbs>")
parser.add_option("-l", "--lunch", dest="lunch", action="store", type="string", help="Input the Lunch intake format <Rice-2tbs,Roti-1pc,ChickenCurry-2tbs,Dal-2tbs>")
parser.add_option("-a", "--afternoon", dest="afternoon", action="store", type="string", help="Input the afternoon intake format <Cornflakes-2tbs,Banana-1pc>")
parser.add_option("-d", "--dinner", dest="dinner", action="store", type="string", help="Input the dinner intake format <Pasta-20gms, Cheese-2slice>")

(options, args) = parser.parse_args()

if options.ndays is None or options.morning is None or options.lunch is None or options.afternoon is None or options.dinner is None :
   print parser.print_help()
   exit(-1)

if os.path.isfile("./DailyInTakeFile.json") is True :

    jout = file('./DailyInTakeFile.json','r') # read mode
    CurDct = json.load(jout)
    print CurDct

    DailyInTake = dict()
    DailyInTake["%d" % options.ndays] = {}
    din = DailyInTake["%s" % options.ndays]
    din['Morning'] = options.morning
    din['Lunch'] = options.lunch
    din['Afternoon'] = options.afternoon
    din['Dinner'] = options.dinner

    saved = sys.stdout
    ofile = file('DailyInTakeFile.json', 'a') # append mode

    for idx in CurDct.keys() :
        if int(idx) == options.ndays :
            print idx, options.ndays
            print "The Intake for day # %d exists" %options.ndays
            print "Are you sure you want to overwrite: Type [yes/no]"
            lett=sys.stdin.read()
            if "yes" in lett :
                CurDct[idx]['Morning'] = options.morning
                CurDct[idx]['Lunch'] = options.lunch
                CurDct[idx]['Afternoon'] = options.afternoon
                CurDct[idx]['Dinner'] = options.dinner
                ofile.close()
                sys.exit("Exiting after updating day # %d" % options.ndays)
            else :
                ofile.close()
                sys.exit("Exiting without update")

        else :
            sys.stdout = ofile
            print json.dumps(DailyInTake)
            print ","
            sys.stdout = saved
            ofile.close()

else :
    DailyInTake = dict()
    DailyInTake["%d" % options.ndays] = {}
    din = DailyInTake["%s" % options.ndays]
    din['Morning'] = options.morning
    din['Lunch'] = options.lunch
    din['Afternoon'] = options.afternoon
    din['Dinner'] = options.dinner

   #print DailyInTake

    saved = sys.stdout
    ofile = file('DailyInTakeFile.json', 'a') # append mode
    sys.stdout = ofile
    print json.dumps(DailyInTake)
    print ","
    sys.stdout = saved
    ofile.close()

from datetime import date, timedelta
from subprocess import call
call("cp DailyInTakeFile.json DailyInTakeFile.json.%s" % str(date.today()), shell=True) 
```

此代码的输出 json 文件例如如下：

```
{"1": {"Lunch": "l3", "Dinner": "d3", "Afternoon": "a3", "Morning": "m3"}}
{"2": {"Lunch": "l3", "Dinner": "d3", "Afternoon": "a3", "Morning": "m3"}} 
```

如您所见，它每次只是添加一个字典，而不是附加到创建的第一个字典。我只是想不出来了。任何帮助将不胜感激。

* * *

使用主要更改的代码进行更新

* * *

```
 saved = sys.stdout
    for idx in CurDct.keys() :
        if int(idx) == options.ndays :
            print idx, options.ndays
            print "The Intake for day # %d exists" %options.ndays
            print "Are you sure you want to overwrite: Type [yes/no]"
            lett=sys.stdin.read()
            if "yes" in lett :
                ofile = file('DailyInTakeFile.json', 'w') # write mode
                sys.stdout = ofile
                CurDct.update(DailyInTake)
                print json.dumps(CurDct)
                sys.stdout = saved
                ofile.close()
                sys.exit("Exiting after updating day # %d" % options.ndays)
            else :
                sys.exit("Exiting without update")

        else :
            ofile = file('DailyInTakeFile.json', 'w') # write mode
            sys.stdout = ofile
            CurDct.update(DailyInTake)
            print json.dumps(CurDct)
            sys.stdout = saved
            ofile.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T23:28:30.490

使用 JSON 序列化作为可变数据存储后端似乎是一个相当奇怪的解决方案。在不详细查看您的代码的情况下，我建议使用*旨在*以这种方式使用的解决方案之一。最适合这种情况的似乎是[`shelve`](http://docs.python.org/library/shelve.html)模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T23:34:06.377

根据代码，您每次都创建一个新字典。并且不要附加到文件中的旧文件。`DailyInTake = dict()`所以输出到文件，只是附加一个新的字典。

我的建议是。要将新字典索引添加到 CurDct as `CurDct[index] = DailyInTake[index]`，然后将整个字典转储回文件。除了追加之外，您可以打开文件进行写入。

# maven - 在安装时让 maven/leiningen 将资源提取到文件系统

> ID：12443236
> 
> 赞同：1
> 
> 时间：2012-09-15T23:26:17.020
> 
> 标签：maven, clojure, leiningen

我需要在 Clojure 库中重用一些 python 代码。我想将 python 脚本与我的 .jar 捆绑在一起，但据我所知，这意味着 python 将无法轻松访问这些脚本，因为它们将被打包在 jar 文件中。

有没有办法指定 .jar 的资源必须直接放在文件系统中，以便外人可以访问它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:03:46.313

JAR 标准中没有内置“auto-extract = true”功能。您必须推出自己的解决方案。

您有几种不同的选择：

1) JAR 文件基本上是 zip 档案。因此，外人可以通过将 JAR 作为 zip 读取来访问脚本。您可以在您的应用程序中附带一个 bash 脚本，用于`unzip`从文件中提取脚本。

2) 在 Maven 中，您可以使用[Dependency 插件的 dependency:unpack](http://maven.apache.org/plugins/maven-dependency-plugin/examples/unpacking-artifacts.html)目标从 jar 中提取脚本，以便将它们放置到您的分发程序集中更合适的位置。所以使用这样的东西（下面是未经测试的）：

```
 <plugin>
     <groupId>org.apache.maven.plugins</groupId>
     <artifactId>maven-dependency-plugin</artifactId>
     <version>2.5.1</version>
     <executions>
       <execution>
         <id>unpack</id>
         <phase>package</phase>
         <goals>
           <goal>unpack</goal>
         </goals>
         <configuration>
           <artifactItems>
             <artifactItem>
               <groupId>com.augustl</groupId>
               <artifactId>scripts</artifactId>
               <version>1.0.0</version>
               <type>jar</type>
               <overWrite>false</overWrite>
               <outputDirectory>${project.build.directory}/scripts</outputDirectory>
               <includes>**/*.py</includes>
             </artifactItem>
           </artifactItems>
         </configuration>
       </execution>
     </executions>
   </plugin> 
```

3) 在您的应用程序中，您可以将脚本读取为 an`InputStream`并将其写入临时文件以执行。只要您的脚本有一个相当独特的名称，这就是相当直接的使用`Class.getResourceAsStream(String name)`

也可以看看：

*   [clojure.java.io/resource](http://clojure.github.com/clojure/clojure.java.io-api.html#clojure.java.io/resource)
*   [将 Java InputStream 的内容写入 OutputStream 的简单方法](https://stackoverflow.com/questions/43157/easy-way-to-write-contents-of-a-java-inputstream-to-an-outputstream)

# actionscript-3 - 在 Actionscript 3 中添加事件监听器

> ID：12443237
> 
> 赞同：0
> 
> 时间：2012-09-15T23:27:17.013
> 
> 标签：actionscript-3, events, addeventlistener

我想减少我的代码，所以这里有一个问题：如果我有 10 个事件侦听器并且在不同的情况下我必须添加或删除它们，有没有办法将所有“addEventListener”放在一个函数中，将“removeEventListener”放在另一个函数中和键入“add/removeEventListenerFuction”而不是十次 10 个事件侦听器。任何答案都会有所帮助。现在谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:31:39.663

如果您知道事件类型并将事件处理函数存储在数组中，则应该可以在循环中调用 add/removeEventListener。

```
var events:Array = [{"type":MouseEvent.CLICK,"handler":func1},
    {"type":MouseEvent.MOUSE_DOWN,"handler":func2},
    {"type":MouseEvent.MOUSE_UP,"handler":func3},
    {"type":MouseEvent.MOUSE_OVER,"handler":func4}];

for(var i:int=0; i<events.length; i++) {

    stage.addEventListener(events[i].type,events[i].handler);
    // to remove
    // stage.removeEventListener(events[i].type,events[i].handler);
} 
```

我不明白为什么这会有用，也许如果您尝试解释您正在尝试做什么并显示一些代码，我可以提供更多帮助。

# profiling - 仪器分析：“顶级功能”重新排序功能

> ID：12443242
> 
> 赞同：3
> 
> 时间：2012-09-15T23:28:18.327
> 
> 标签：profiling, instruments

我通过更改 OpenGL 代码优化了函数 Render()。然后我运行了仪器/*时间配置文件*，时间限制为 180 秒（因此测量准确）。

1.  打开*反转调用树*：
    *   **非优化为**680 毫秒，****
    ***   **500 毫秒**进行优化。**
***   关闭*反转调用树*：
    *   **非优化为**277 毫秒，****
    ***   **优化时间为345 毫秒**。*****   打开*Top Functions*（仍然关闭*Invert Call Tree*）：
    *   **未优化的4591 毫秒**，
    *   **5277 毫秒**进行优化。*   打开*Invert Call Tree*（仍然打开*Top Functions*）：
    *   没有变化（4591），
    *   没有变化 (5277)。****

 ****如何解释这个？优化后的版本更快还是更慢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T02:12:03.750

Time Profiler 结果取决于您运行的 Xcode 版本。如果您运行的是 Xcode 4.4 或更高版本，则 Time Profiler 仪器在调用树中的每个符号都有两列：运行时间和自身。Self 列更重要，因为它告诉您函数位于调用堆栈顶部的时间量。所有的运行时间列都告诉你函数在调用堆栈上的时间，这并不意味着在堆栈顶部那么多。

要查看您的应用在 Render() 中花费了多少时间，请取消选中 Invert Call Tree 复选框并查看 Render() 的 Self 列。如果这是您正在分析的游戏，那么可以帮助您在调用树中双击您的游戏循环函数。双击游戏循环函数会打开源视图，它会告诉您游戏循环在 Render() 函数中花费的时间百分比。

Time Profiler 工具并不是分析 OpenGL 代码的最佳工具。如果您正在编写 Mac 应用程序，则 OpenGL Profiler 工具比 Instruments 更好地分析 OpenGL 代码。Instruments 还有一个用于测量 OpenGL 统计数据的 OpenGL Driver 工具。如果您正在分析 iOS 应用程序，请使用 OpenGL ES Analysis Instruments 模板和 OpenGL ES Performance Detective 工具。****

# ios - “应用程序必须在安装时请求基本读取权限”

> ID：12443246
> 
> 赞同：18
> 
> 时间：2012-09-15T23:28:50.093
> 
> 标签：ios, facebook-graph-api, permissions, authorization, facebook-oauth

我正在使用 iOS 内置框架进行连接。请求`"publish_stream"`权限后，FB返回错误：

```
Error Domain=com.apple.accounts Code=7 "The Facebook server could not fulfill this access request: The app must ask for a basic read permission at install time." UserInfo=0x145ad6a0 {NSLocalizedDescription=The Facebook server could not fulfill this access request: The app must ask for a basic read permission at install time.} 
```

这里发生了什么？显示两个用户权限弹出窗口是一种不太理想的用户体验。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T03:02:50.540

第一次，您必须请求读取权限。您最初无法使用任何类型的发布/写入权限对用户进行身份验证。在那之后你应该做的是，在你的应用程序中有意义的地方，请求 publish_stream 权限。绝对不要做初始权限，然后立即请求 publish_stream 权限。

[请参阅https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/)中的此说明，“分别请求读取和写入权限”部分。尽管这适用于 iOS 版 Facebook SDK，但它是内置框架中相同要求的扩展。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T23:23:24.827

我想补充一点，Facebook 文档中有一个额外的警告：

```
// if a user has *never* logged into your app, you MUST include one of
// "email", "user_location", or "user_birthday".  Other read 
// permissions can also be included here. 
```

不这样做会导致同样的错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-28T14:45:05.910

在最新的 SDK (v3.5) 中，您还需要在权限数组中传递 @"basic_info"。它曾经是隐含的，但现在不是了。如果不这样做，您将收到“应用程序必须在安装时要求基本读取权限”消息

```
 [FBSession openActiveSessionWithReadPermissions:@[@"email", @"basic_info"]
                                 allowLoginUI:YES
                            completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                              [self sessionStateChanged:session state:state error:error];
                            }]; 
```

从方法文档：

> readPermissions - 一个字符串数组，表示在身份验证流程中请求的读取权限。basic_info 权限必须在首次登录时显式请求，并且不再推断，（取决于主动迁移。）不允许将发布权限传递给此方法。

# php - 如何使用 Lithium 和 GridFS 将不同类型的文件存储在单独的集合中？

> ID：12443251
> 
> 赞同：0
> 
> 时间：2012-09-15T23:29:41.450
> 
> 标签：php, mongodb, gridfs, lithium

我有一个看起来像这样的模型：

```
class Pdf extends \lithium\data\Model
{

    protected $_meta = array('source' => 'fs.files');
    protected $_schema = array('_id'=>array('type'=>'id'));

    public $file;

    /**
    * @param $zipfile string The full name and path of a zip file
    * @param $filename string
    */
    public static function loadFromFile($zipfile, $filename){
        $name = 'zip://'.$zipfile.'#'.$filename;
        $pdf = Pdf::create(); 
        $pdf->file = file_get_contents($name);
        $pdf->filename = $filename;
        $pdf->metadata = ["filename" => $filename, "zipfile" => $zipfile];
        return $pdf;
    }
} 
```

静态函数获取 zip 存档的全名和存档中文件的名称，创建模型，从存档文件加载内容，设置一些元数据，然后返回模型。这在我正在编写的控制台命令中使用，它将遍历一个 zip 文件列表，每个文件都包含一堆 pdf，并将 pdf 添加到数据库中。

当我保存模型时，pdf 确实会添加到数据库中。我可以从 MongoDB 控制台查看所有 pdf，即使用`db.fs.files.find()`. 我还可以使用 mongofiles 命令从数据库中获取 pdf。

但是，如果*不是*将 pdf 存储在 fs.files 下，而是将它们存储在 fs.files.pdfs 下，那就太好了。这是因为我计划将 jpeg 和文本文档也存储在同一个数据库中。

如果我将类中的 $_meta 更改为`array('source' => 'fs.files.pdfs')`，我的控制台命令似乎会将 pdf 文档*输出*到终端而不是添加它（顺便说一下，我想知道 Lithium 这样做的原因！）

我已经检查了文档，但无法弄清楚我做错了什么。有什么方法可以让 Lithium 根据使用的模型将我的文件存储在单独的集合中？

（如果我的术语不准确，我深表歉意；这是我第一次尝试在基础教程之外使用 Lithium 和 MongoDB。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:11:03.867

> 但是，如果不是将 pdf 存储在 fs.files 下，而是将它们存储在 fs.files.pdfs 下，那就太好了。这是因为我计划将 jpeg 和文本文档也存储在同一个数据库中。

目前，您无法命名您的来源，`fs.files.pdfs`但是`pdfs.files`...`photos.files`

> 我已经检查了文档，但无法弄清楚我做错了什么。有什么方法可以让 Lithium 根据使用的模型将我的文件存储在单独的集合中？

看看这里突出显示的行：[https ://github.com/UnionOfRAD/lithium/blob/master/data/source/MongoDb.php#L387-390](https://github.com/UnionOfRAD/lithium/blob/master/data/source/MongoDb.php#L387-390)

这是锂如何处理的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:23:14.077

是的，我相信我们在 IRC 上讨论过这个问题。这是 MongoDB 的一个限制，我不相信您可以拥有多个 GridFS 前缀（如果我错了，请有人纠正我）。

如果您只是在寻找一种通过不同模型操作不同文件类型的方法，我建议您创建单独的模型，然后修改它们的[默认查询](http://lithify.me/docs/lithium/data/Model%3a%3a%24_query)以包含`'type' => 'pdf'`在条件中，或者类似的东西。

# opengl - 我正在寻找一种能够提供“逼真”油漆颜色的混合模式。（减法）

> ID：12443252
> 
> 赞同：0
> 
> 时间：2012-09-15T23:29:43.713
> 
> 标签：opengl, colors, shader, rgb, color-blending

我一直在寻找一种混合模式来（嗯......）混合两个 RGB 像素，以便以画家构建它们的 samw 方式构建颜色（即：减法）。

以下是我期望的结果类型的快速示例：

> 青色 + 品红色 = 蓝色
> 青色 + 黄色 = 绿色
> 品红色 + 黄色 = 红色
> 红色 + 黄色 = 橙色
> 红色 + 蓝色 = 紫色
> 黄色 + 蓝色 = 绿色

我正在寻找一个公式，例如：dest_red = first_red + second_red; dest_green = first_green + second_green；dest_blue = first_blue + second_blue；

我已经尝试过常用的“乘法”公式，但它不起作用；我已经尝试过使用定制的公式，但我仍然无法“破解”它应该如何工作。而且我已经知道很多颜色理论，所以请不要回答如下：

> 检查此链接：[http://the_difference_betweeen_additive_and_subtractive_lighting.html](http://example.com "网站提议的示例链接，可以解释加法和减法照明之间的区别")

注意：检查您的混合方法是否适用于 YELLOW + BLUE = GREEN 和 YELLOW + RED = ORANGE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:26:33.100

处理这种减色混合的 CMY 颜色空间基本上是反转的 RGB 空间。您可以在 CMY 空间中添加颜色并将它们转换回 RGB。

```
CYAN (100 CMY) + MAGENTA (010 CMY) = (110 CMY) = (001 RGB) = BLUE
CYAN (100 CMY) + YELLOW (001 CMY) = (101 CMY) = (010 RGB) = GREEN
...
RED (100 RGB) + YELLOW (001 CMY) = (011 CMY) + (001 CMY) = (012 CMY) => (0 0.5 1 CMY) = (1 0.5 0 RGB) = ORANGE
RED (011 CMY) + BLUE (110 CMY) = (121 CMY) => (0.5 1 0.5 CMY) = (0.5 0 0.5 RGB) = PURPLE 
```

如您所见，如果存在值大于 1 的分量，则必须对颜色进行标准化。

* * *

我刚刚意识到最后一个添加（黄色+蓝色）不适用于这个模型。不过，我把答案留在这里。也许它可以帮助你。这可能是因为您的示例可能包含不一致之处。如果 CYAN+YELLOW=GREEN，则不太可能用 BLUE+YELLOW 生成相同的 GREEN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:00:05.977

我怀疑这个问题有一个最佳答案。如果您只想要减色空间，[CMY(K)](http://en.wikipedia.org/wiki/CMYK)就足够了。但是，如果您想创建类似于 ArtRage 而不是纯 Photoshop 的东西，则必须实现自己的混合曲线才能获得逼真的效果。

# javascript - 更改文档时运行js？

> ID：12443253
> 
> 赞同：0
> 
> 时间：2012-09-15T23:29:56.870
> 
> 标签：javascript, jquery, ajax, settimeout

我试图寻找答案，这是我的第一篇文章，如果我以某种方式搞砸了，请多多包涵。

基本上我的问题是这样的：我正在为使用 jQuery 的 Chrome 编写扩展。我有另一个扩展，它每 10 秒发出一次定时 $.ajax() 请求。每次定时 ajax 请求及其回调函数完成时，我都需要找到一种方法来运行我的代码。可以为我自己的脚本设置一个计时器，尽管这有点半途而废并且效果不佳。

问题可以这样说明：

```
//extension 1
function timedFunc() {
   setTimeout(doStuff, 10000);
};
timedFunc();

//extension 2
//code to be run every time doStuff completes 
```

我觉得这个问题可能有一个非常基本的解决方案，但我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T23:50:10.520

有（曾经）一个名为 的事件`DOMSubtreeModified`。但它已被弃用，因此目前只有可用的解决方法。

[为什么在 DOM 级别 3 中不推荐使用 DOMSubtreeModified 事件？](https://stackoverflow.com/questions/6659662/why-is-the-domsubtreemodified-event-deprecated-in-dom-level-3#6659678)

我不能建议使用这个事件，因为它甚至没有在所有浏览器中实现。

但是你能做的（很容易）就是用你所有的ajax调用来触发你自己的事件！

例子：

当（任何）ajax 调用完成时触发你的事件：

```
$(document).ajaxComplete(function() {
   $(document).trigger('domChanged');
} 
```

听听：

```
$(document).on('domChanged',function() {
   alert("i changed the DOM tree!");
}); 
```

顺便提一句：

假设您只想对完成的 ajax 调用做出反应……只需使用 .ajaxComplete() 事件：

[http://api.jquery.com/ajaxComplete/](http://api.jquery.com/ajaxComplete/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:51:14.193

我真的不明白你想说什么，但我确实理解了你在标题中提出的问题，所以这是我谦虚的回答：

```
// a global variable for the documents content
var content=document.documentElement.innerHTML;

// return true if the document content has changed
function documentChanged(){
return content==document.documentElement.innerHTML;
} 
```

# ruby - 使用 ruby gem 访问 Shopify API 时出现 SSL_connect 错误

> ID：12443258
> 
> 赞同：5
> 
> 时间：2012-09-15T23:30:20.887
> 
> 标签：ruby, ssl, openssl, shopify

我无法使用 shopify_api gem 访问 Shopify API。

这是发生的事情：

```
>> require "shopify_api" #=> false
>> ShopifyAPI::Base.site = "https://username:secret@mysite.myshopify.com/admin"
=> "https://username:secret@mysite.myshopify.com/admin"
>> products = ShopifyAPI::Product.find(:all)
Errno::ECONNRESET: Connection reset by peer - SSL_connect
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `connect'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `block in connect'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `connect'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:744:in `start'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1284:in `request'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1026:in `get'
    from /Users/zubin/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/connection.rb:113:in `block in request'
    from /Users/zubin/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
    from /Users/zubin/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    from /Users/zubin/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
    from /Users/zubin/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/connection.rb:110:in `request'
    from /Users/zubin/.rvm/gems/ruby-1.9.3-p194/gems/shopify_api-3.0.1/lib/active_resource/connection_ext.rb:13:in `request_with_detailed_log_subscriber'
    from /Users/zubin/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/connection.rb:80:in `block in get'
    from /Users/zubin/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/connection.rb:218:in `with_auth'
    from /Users/zubin/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/connection.rb:80:in `get'
    from /Users/zubin/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:901:in `find_every'
    from /Users/zubin/.rvm/gems/ruby-1.9.3-p194/gems/activeresource-3.2.8/lib/active_resource/base.rb:813:in `find'
    from (irb):21
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

认为这是 ruby​​ 的 openssl 绑定问题，我用 RVM 安装了 openssl 并重新安装了 ruby​​：

```
rvm pkg install openssl
rvm reinstall 1.9.3-p194 --with-openssl-dir=~/.rvm/usr 
```

但这没有帮助。

所以我尝试用普通的 ol' 连接`NET::HTTPS`并能够连接到另一个站点，但不能连接到 shopify。

```
>> require "net/https" #=> false
>> require "uri" #=> false
>> uri = URI.parse("https://google.com/") #=> #<URI::HTTPS:0x007fa27bb243f8 URL:https://google.com/>
>> http = Net::HTTP.new(uri.host, uri.port) #=> #<Net::HTTP google.com:443 open=false>
>> http.use_ssl = true #=> true
>> http.verify_mode = OpenSSL::SSL::VERIFY_NONE #=> 0
>> http.start { |agent| p agent.get(uri.path).read_body }
"<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n<TITLE>301 Moved</TITLE></HEAD><BODY>\n<H1>301 Moved</H1>\nThe document has moved\n<A HREF=\"https://www.google.com/\">here</A>.\r\n</BODY></HTML>\r\n"
=> "<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n<TITLE>301 Moved</TITLE></HEAD><BODY>\n<H1>301 Moved</H1>\nThe document has moved\n<A HREF=\"https://www.google.com/\">here</A>.\r\n</BODY></HTML>\r\n"
>> uri = URI.parse("https://mysite.myshopify.com/admin/")
=> #<URI::HTTPS:0x007fa27d1f5e38 URL:https://mysite.myshopify.com/admin/>
>> http = Net::HTTP.new(uri.host, uri.port) #=> #<Net::HTTP mysite.myshopify.com:443 open=false>
>> http.use_ssl = true #=> true
>> http.verify_mode = OpenSSL::SSL::VERIFY_NONE #=> 0
>> http.start { |agent| p agent.get(uri.path).read_body }
Errno::ECONNRESET: Connection reset by peer - SSL_connect
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `connect'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `block in connect'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `connect'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:744:in `start'
    from (irb):18
    from /Users/zubin/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

所以这排除了我的 ruby​​/openssl 设置。任何想法是什么导致 SSL_connect 错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T06:00:24.840

最有可能的是，您的客户端正在尝试使用 中使用`TLS 1.2`的最新`SSL/TLS`协议之一进行连接`HTTPS`。我们的负载平衡硬件存在一个已知问题`TLS 1.2`，尽管直到我自己独立偶然发现了这个错误，我们才意识到这一点。

我已经让运营团队的其他成员意识到了这一点，我希望我们会尽快解决这个问题。在此之前，您可以使用

`http.ssl_version = :TLSv1`

强制`Ruby`改为使用`TLS 1.0`。

# ios - GKScore 上的 NSKeyedArchiver 抛出 EXEC_BAD_INSTUCTION

> ID：12443260
> 
> 赞同：1
> 
> 时间：2012-09-15T23:31:13.623
> 
> 标签：ios, gamekit, nskeyedarchiver

我正在研究实现 GameKit 并且无法让一件事正常工作，这似乎很奇怪。

如果我尝试使用 KeyedArchiver 保存我的 GKScore 对象以供以后提交，那么我会在尝试保存 GKScore 对象的类上调用 encodewithcoder。

我的代码很简单，

```
NSData *savedScoreData = [NSKeyedArchiver archivedDataWithRootObject:score]; 
```

我从网上的各种资源中看到这应该有效，但事实并非如此。查看 GKScore.h 它声明它是 NSCoding 兼容的，但是我的视图控制器类正在调用 encodewithcoder 而不是 GKScore 对象。

有没有人见过这种行为？我此刻最困惑。

# system-calls - 如何以交互方式调用 Unix 系统调用？

> ID：12443261
> 
> 赞同：0
> 
> 时间：2012-09-15T12:44:10.790
> 
> 标签：system-calls, ruby

我想玩 Unix 系统调用，最好是来自 Ruby。我该怎么做？

我听说过 Fiddle，但我不知道从哪里开始/我应该将它附加到哪个 C 库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T15:29:59.380

我假设“交互式”是指通过`irb`.

像 Ruby 这样的高级语言将为大多数内核系统调用提供不同厚度的包装器。

有时这些包装器会很薄，例如`sysread()`和`syswrite()`。这些分别或多或少等同于`read(2)`和`write(2)`。

其他系统调用将隐藏在较厚的层后面，例如[套接字 I/O 的东西](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/BasicSocket.html)。我不知道调用是否`UNIXSocket.recv()`准确地算作“调用系统调用”。在某种程度上，这正是发生的事情，但谁知道在你和实际系统调用之间有多少 Ruby 和 C 代码。

然后是那些根本不在标准 Ruby API 中的系统调用，很可能是因为它们没有多大意义，比如`mmap(2)`. 该系统调用全都与指向内存的原始指针有关，您首先选择使用 Ruby 之类的语言来避免这种情况。碰巧有[一个第三方 Ruby mmap 模块](http://rubyforge.org/projects/mmap/)，但它真的不会为您提供可以从 C 中挖掘的所有功能。

`syscall()`Mat 在上面的评论中指出的接口是一个类似的故事：理论上，它可以让你调用内核中的任何系统调用。但是，如果您不具备处理指针、在内存中为结构精确布置数据等的能力，那么您进行有用调用的能力将非常有限。

如果您想玩系统调用，请学习 C。没有捷径可走。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:37:08.177

Eric Wong 创建了一个使用 Ruby 进行系统级编程的邮件列表。它现在不是很活跃，但你可以在[http://librelist.com/browser/usp.ruby/](http://librelist.com/browser/usp.ruby/)上找到它。

# google-chrome-extension - 背景后的冒号（加载 background.js）

> ID：12443268
> 
> 赞同：2
> 
> 时间：2012-09-15T23:33:56.857
> 
> 标签：google-chrome-extension

我的 manifest.json 的 Google Chrome 扩展有问题。我想在后台加载一个脚本。当我想加载扩展时，我得到一个语法错误，由第 10 行中的冒号引起。我查看了 Google Chrome 开发人员文档，但没有找到任何有用的信息。你能帮我吗：D

```
 {
  "name": "Test",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Test",
  "browser_action": {
  },
  "permissions": [["webRequest","webRequestBlocking",
                  "*://*.Test.com/*/*" ],
  **"background": {** 
    "scripts": ["background.js"]
    },
  ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:21:35.463

您的 JSON 无效，您确实有语法错误。看起来您试图将背景作为权限数组的一部分，但它应该是这样的。

```
{
    "name": "Test",
    "version": "1.0",
    "manifest_version": 2,
    "description": "Test",
    "permissions": [
        "webRequest",
        "webRequestBlocking",
        "*://*.Test.com/*/*"
    ],
    "background": {
        "scripts": ["background.js"]
    }
} 
```

保持 JSON 格式正确通常有助于防止此类错误。祝你的扩展好运。

# php - 如何使用路由 CodeIgniter 调用子文件夹控制器

> ID：12443275
> 
> 赞同：1
> 
> 时间：2012-09-15T23:35:23.330
> 
> 标签：php, codeigniter, url-routing

我正在使用 CodeIgniter 框架。我的控制器文件夹中有这样的文件：

```
 - Controllers
 --- admin.php - Admin Controller
 --- /Admin - Admin Folder
 ----- category.php - Category Controller in Admin folder. 
```

Url：`mysite.com/index.php/admin/category`说找不到该页面，因为它试图调用控制器的`category`功能，`admin`但我希望它调用文件夹中控制器的`index`功能。`category``Admin`

此外，我正在使用`admin`控制器来创建、编辑`admin`控制器等功能，例如`mysite.com/index.php/admin/create`.

我想，我应该`$route`在配置文件中使用数组。我应该使用什么路由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:12:39.403

这是 CI 核心的默认行为。见`function _validate_request($segments)`中`system/core/Router.php`。此函数尝试确定控制器的路径。它一一经历不同的条件，并在满足给定条件后返回结果。除此之外，还涉及两个条件：

1.  是文件吗？（`system/core/Router.php`第 271 行，CI 2.1.2）

    ```
    // Does the requested controller exist in the root folder?
    if (file_exists(APPPATH.'controllers/'.$segments[0].'.php'))
    {
        return $segments;
    } 
    ```

2.  是文件夹吗？（`system/core/Router.php`第 277 行，CI 2.1.2）

    ```
    // Is the controller in a sub-folder?
    if (is_dir(APPPATH.'controllers/'.$segments[0]))
    {
        // ... 
    ```

在您的情况下，一旦满足两个条件中的第一个，即`admin.php`找到文件时，该函数将返回。

有两种解决方案：

1.  重命名文件或文件夹并分别重构应用程序。
2.  [通过扩展 core](http://codeigniter.com/user_guide/general/core_classes.html)来改变默认行为。基本上，这将在更改条件检查的顺序时结束。这可以通过创建`MY_Router`类来完成：

    ```
    class MY_Router extends CI_Router
    {
        // ...
    } 
    ```

    `_validate_request()`并用改变的条件序列重写原始函数。所以首先检查目录，然后检查功能。

如果不需要太多重构，我会建议第一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T00:05:01.677

在 application/config/routes.php 文件的底部，添加如下内容：

```
$route['admin/create'] = 'admin/category'; 
```

# java - 如何识别文件中的“\t”？

> ID：12443277
> 
> 赞同：0
> 
> 时间：2012-09-15T23:35:48.667
> 
> 标签：java

我正在使用此代码从文件中读取一行文本：

```
BufferedReader br = new BufferedReader(new FileReader("myFile.txt"));
String line = br.readLine(); 
```

如果该行包含制表符 : (\t) 则该字符未被正确读取。它只是显示为一个空白空间。如何确定当前正在读取的文本行中是否包含制表符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T23:40:48.033

如果您确定它是一个空格，通过打印出字符串，那么您将看到您正在使用的终端对制表符的解释。大多数终端驱动程序认为制表符（ASCII 9）表示“跳转到 8 的倍数的列”，以模拟旧打字机的行为。

考虑查看`charAt(...)`字符串中的每个字符并改为查找值 9。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T23:58:42.667

> 文本文件包含 \t 字符，但是当我输出读取字符串中的字符时，它显示为空，即未读取 \t。

我的第一反应是，这是显示输出的任何原因的错。尝试将输出重定向到文件并使用您知道将显示任何 TAB 字符（如果存在）的工具查看它。（例如，`od`如果您使用的是 UNIX / Linux，则使用该实用程序。）并检查输入文件。

> 如何确定当前正在读取的文本行中是否包含制表符？

```
 for (char ch : line.toCharArray()) {
        if (ch == '\t') {
            System.err.println("BINGO!!");
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T23:41:27.843

正如*充满鳗鱼的气垫船*刚才所说，您正在阅读整行内容，而不是逐个字符。

无论如何，您可以通过 if 之类的方式检查它是否是制表符空白字符`(String.charAt(pos) == '\t') { do stuff with it }`

# string - R在R中提取字符串的一部分

> ID：12443278
> 
> 赞同：1
> 
> 时间：2012-09-15T23:35:53.653
> 
> 标签：string, r, lapply

我有 500 万个序列（具体的探针），如下所示。我需要从每个字符串中提取名称。

这里的名称是 1007_s_at:123:381、10073_s_at:128:385 等等。

我正在使用 lapply 功能，但它花费了太多时间。我还有其他几个类似的文件。你会建议一种更快的方法来做到这一点。

```
 nm = c(
  "probe:HG-Focus:1007_s_at:123:381; Interrogation_Position=3570; Antisense;",
  "probe:HG-Focus:1007_s_at:128:385; Interrogation_Position=3615; Antisense;",
  "probe:HG-Focus:1007_s_at:133:441; Interrogation_Position=3786; Antisense;",
  "probe:HG-Focus:1007_s_at:142:13; Interrogation_Position=3878; Antisense;" ,
  "probe:HG-Focus:1007_s_at:156:191; Interrogation_Position=3443; Antisense;",
  "probe:HTABC:1007_s_at:244:391; Interrogation_Position=3793; Antisense;")

extractProbe <- function(x) sub("probe:", "", strsplit(x, ";", fixed=TRUE)[[1]][1], ignore.case=TRUE)
pr = lapply(nm, extractProbe) 
```

输出

```
1007_s_at:123:381
1007_s_at:128:385
1007_s_at:133:441
1007_s_at:142:13
1007_s_at:156:191
1007_s_at:244:391 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T23:57:17.427

使用正则表达式：

```
sub("probe:(.*?):(.*?);.*$", "\\2", nm, perl = TRUE) 
```

一点解释：

1.  `.`意思是“任何字符”。
2.  `.*`意思是“任意数量的字符”。
3.  `.*?`意思是“任意数量的字符，但不要贪婪。
4.  括号内的模式被捕获并分配给`\\1`,`\\2`等。
5.  `$`表示行尾（或字符串）。

所以在这里，模式匹配整行，并通过两个捕获两件事`(.*?)`：`HG-Focus`你不想要的（或其他）东西 as`\\1`和你的 id as `\\2`。通过将替换设置为`\\2`，我们有效地将整个字符串替换为您的 id。

我现在意识到没有必要捕捉第一件事，所以这也可以：

```
sub("probe:.*?:(.*?);.*$", "\\1", nm, perl = TRUE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:36:54.350

迂回技术：

```
sapply(strsplit(sapply(strsplit(nm, "e:"), "[[", 2), ";"), "[[", 1) 
```

# matlab - MATLAB：与种子区域的相关性

> ID：12443286
> 
> 赞同：1
> 
> 时间：2012-09-15T23:38:55.757
> 
> 标签：matlab, correlation, bsxfun

默认情况下，所有用于计算相关性或协方差的内置函数都返回一个矩阵。我正在尝试编写一个有效的函数来计算种子区域和其他各种区域之间的相关性，但我不需要其他区域之间的相关性。我假设计算完整的相关矩阵因此效率低下。

我可以改为计算每个区域和种子区域之间的相关矩阵，选择一个非对角点并存储它，但我觉得在这种情况下循环也效率低下。

更具体地说，我的 3 维空间中的每个点都有一个时间维度。我正在尝试计算给定点与给定半径内空间中所有点之间的平均相关性。我想对许多不同的半径长度重复这个过程数十万次，等等，所以我希望这个过程尽可能高效。

那么，在不计算我将忽略的相关性的情况下，计算单个向量与其他几个向量之间相关性的最佳方法是什么？

谢谢你，克里斯

编辑：这是我现在的代码......

```
function [corrMap] = TIME_meanCorrMap(A,radius)
% Even though the variable is "radius", we work with cubes for simplicity...
% So, the radius is the distance (in voxels) from the center of the cube an edge.
denom = ((radius*2)^3)-1;
dim = size(A);
corrMap = zeros(dim(1:3));
for x = radius+1:dim(1)-radius
    rx = [x-radius : x+radius];
    for y = radius+1:dim(2)-radius
        ry = [y-radius : y+radius];
        for z = radius+1:dim(3)-radius
            rz = [z-radius : z+radius];
            corrCoefs = zeros(1,denom);
            seed = A(x,y,z,:);
            i=0;
            for xx = rx
                for yy = ry
                    for zz = rz
                        if ~all([x y z] == [xx yy zz])
                            i = i + 1;
                            temp = corrcoef(seed,A(xx,yy,zz,:));
                            corrCoeffs(i) = temp(1,2);
                        end
                    end
                end
            end
            corrMap = mean(corrCoeffs);
        end
    end
end 
```

编辑：这里有更多时间来补充接受的答案。使用 bsxfun() 进行归一化，使用矩阵乘法计算相关性：

```
tic; for i=1:10000                                                                
    x=rand(100);
    xz = bsxfun(@rdivide,bsxfun(@minus,x,mean(x)),std(x));
    cc = xz(:,2:end)' * xz(:,1) ./ 99;
end; toc
Elapsed time is 6.928251 seconds. 
```

使用 zscore() 进行归一化，矩阵乘法计算相关性：

```
tic; for i=1:10000                                    
    x=rand(100);                                          
    xz = zscore(x);                                       
    cc = xz(:,2:end)' * xz(:,1) ./ 99;
end; toc
Elapsed time is 7.040677 seconds. 
```

使用 bsxfun() 进行归一化，使用 corr() 计算相关性。

```
tic; for i=1:10000                                    
    x=rand(100);
    xz = bsxfun(@rdivide,bsxfun(@minus,x,mean(x)),std(x));
    cc = corr(x(:,1),x(:,2:end));
end; toc
Elapsed time is 11.385707 seconds. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T04:09:16.483

当然可以改进`for`您当前使用的循环。如果您有足够的 RAM，则可以使用矩阵乘法并行化相关计算。但是，它需要您将 4 维数据矩阵 A 展开为不同的形状。很可能您正在处理 3 维体素 fMRI 数据，在这种情况下，您必须从 [xyz time] 矩阵重塑为 [index time] 矩阵。我会假设你可以处理这种重塑。一旦你准备好你的时间进程`seed`[Time by 1] 和你的`target`时间进程 [Time by NumTargets]，你就可以执行一些更有效的计算。

一种有效计算所需相关性的快速方法是使用`corr`MATLAB 中的函数。该函数将接受 2 个矩阵参数，并且它将非常有效地计算参数 1 的列和参数 2 的列之间的所有成对相关性，例如

```
T = 200; %time samples
N = 20;  %number of other voxels

seed = randn(T,1);     %data from seed voxel
targets = randn(T,N);  %data from target voxels

%here is the for loop method
tic
for n = 1:N
   tmp = corrcoef(seed, targets(:,n));
   tmpcc = tmp(1,2);
end
looptime = toc;

%here is the parallel method
tic
cc = corr(seed, targets);
matrixtime = toc; 
```

在我的机器上，并行操作`corr`比循环方法快一个与 T*N 成比例的因子。

如果您愿意自己执行底层矩阵运算，则可以比`corr`函数快一点，并且无论如何都值得知道它们是什么。两个向量之间的相关性基本上是归一化的点积，因此使用上面的约定，您可以通过以下方式计算相关性

```
zseed = zscore(seed);  %normalize the seed timecourse by z-scoring
ztargets= zscore(targets);  %normalize the target timecourses by z-scoring
ztargets = ztargets';      %flip columns and rows for convenience
cc2 = ztargets*zseed./(T-1);    %compute many dot products with one matrix multiplication 
```

上面的代码基本上就是`corr`函数要做的事情，这就是为什么它比循环快得多。请注意，大部分操作时间都在操作中，如果您使用命令有效地计算`zscore`，您可以提高函数的性能。现在，我希望这能为您提供一些指导，让您了解如何计算种子时间过程和许多目标时间过程之间的相关性，而无需循环遍历并分别计算每个时间过程。`corr``zscore``bsxfun`

# javascript - 调度点击事件并保留击键修饰符

> ID：12443288
> 
> 赞同：2
> 
> 时间：2012-09-15T23:39:08.533
> 
> 标签：javascript, javascript-events, onclick, modifier-key

我想听一个特定元素上的点击事件，然后将它分派给一个链接元素，同时记住元键是否被保留。

例如：假设我有一个元素表。当用户点击一行时，我想关注一个链接，但如果用户有他的，我希望在新选项卡中打开链接`⌘</kbd> /`ctrl` key pressed.`

看起来很简单，但我发现这很棘手......（因为我没有成功！）

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:22:15.677

假设您只需要*记住*合法用户操作的修饰键，DOM 事件 API 已经提供了您所需要的一切。

当[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)用于捕获事件时，只需将参数（一个`DOMEvent`实例）传递给您的处理函数，然后将其重新发送到您的目标元素[`dispatchEvent`](https://developer.mozilla.org/en-US/docs/DOM/element.dispatchEvent)  :)

事实上，一个`DOMEvent`实例封装了它的源环境。更具体地说，a[`MouseEvent`](https://developer.mozilla.org/en-US/docs/DOM/MouseEvent)知道触发时按下了哪些键。

* * *

演示：尝试在按住[此 JSfiddle的同时单击该链接](http://jsfiddle.net/JAmtP/4/)`⌘</kbd> (or `ctrl` if not on a Mac), for example.`

对于完整的参考，这里是使用的代码：

```
var button = document.getElementById('source'),
    target = document.getElementById('target');

function handler(evt) {
    target.dispatchEvent(evt); // that's all the magic it takes
}

button.addEventListener(
    'click', // listen to a click event
    handler,
    false // no capture, i.e. do not catch events before children
);​ 
```

* * *

您可能还会发现[这个关于 DOM 事件的完整参考](http://www.howtocreate.co.uk/tutorials/javascript/domevents)很有用：)

# php - 返回上一页没有给出正确的复选框值

> ID：12443289
> 
> 赞同：0
> 
> 时间：2012-09-15T23:40:43.580
> 
> 标签：php, jquery

将搜索查询提交到 php 文件后，我尝试返回上一页以测试是否一切正常，例如

```
> search.php [goto] > results.php [backto] > search.php 
```

我有这段 JQuery 代码，它检查是否在登陆 search.php 文件时选中了一个复选框

```
$(document).ready(function(){       
   if($("input[name=filterSite]").not(':checked')){
       alert("not checked");
   }
}); 
```

`not checked`即使 html 标记始终设置为以下内容，它也始终返回

```
<input name="filterSite" type="checkbox"   id="filterSite" checked="checked" /> 
```

什么可能导致这个问题？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T23:44:22.973

大多数 jQuery 方法返回对象，而不是布尔值（以便您可以链接方法以获得所需的结果）。.not() 的返回值将始终是一个对象（在上述条件下将评估为 true）。

你想要的是这两个之一：

```
$(document).ready(function(){       
   if($("input[name=filterSite]").not(':checked').size()){
       alert("not checked");
   }
}); 
```

或者：

```
$(document).ready(function(){       
   if($("input[name=filterSite]").is(':checked') == false){
       alert("not checked");
   }
}); 
```

.size() 将返回当前属于选择器的元素的数量

.is() 返回布尔值，评估选择器中的元素是否匹配给定条件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:48:28.183

你的jQuery应该是

```
 $(document).ready(function(){         
 if(!$("input[name=filterSite]:checked")){
       alert("not checked");
   }
});​ 
```

# ios - 你如何处理多个视图上的keyboardDidShow？

> ID：12443292
> 
> 赞同：1
> 
> 时间：2012-09-15T23:41:23.987
> 
> 标签：ios, xcode, nsnotificationcenter

我有一个应用程序，通过让用户点击一个在表格底部显示一个文本字段单元格的编辑按钮，我向表格视图添加一个新项目，类似于内置的通知应用程序。我需要在显示键盘时调整表格，以便在表格中有很多行时不会阻碍它。我通过订阅键盘显示时的通知来做到这一点：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector (keyboardDidShow:)
                                                 name: UIKeyboardDidShowNotification
                                               object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector (keyboardDidHide:)
                                                 name: UIKeyboardDidHideNotification
                                               object:nil];
}

...
...

-(void) keyboardDidShow: (NSNotification *)notif 
{
    // If keyboard is visible, return
    if (self.keyboardVisible) 
    {
        return;
    }

    // Get the size of the keyboard.
    NSDictionary* info = [notif userInfo];
    NSValue* aValue = [info objectForKey:UIKeyboardFrameBeginUserInfoKey];
    CGSize keyboardSize = [aValue CGRectValue].size;

    // Adjust the table view by the keyboards height.
    self.tableView.contentInset =  UIEdgeInsetsMake(0, 0, keyboardSize.height, 0);
    NSIndexPath *path = [NSIndexPath indexPathForRow:self.newsFeeds.count inSection:0];
    [self.tableView scrollToRowAtIndexPath:path atScrollPosition:UITableViewScrollPositionTop animated:YES];
    self.keyboardVisible = YES;
} 
```

但是，我让用户添加行的表也可以被点击，并且新视图被推送到应用程序。这个视图也有一个文本视图，当用户点击它并且键盘显示第一个视图控制器时仍然会收到通知，这会导致崩溃。

如何在推送新视图时忽略通知或使其不触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:26:55.783

您可以在 viewDidAppear 中将该类添加为观察者，并在 viewWillDisappear 中将其删除。

# asp.net-mvc - MVC3 下拉列表

> ID：12443294
> 
> 赞同：0
> 
> 时间：2012-09-15T23:41:27.433
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, drop-down-menu, selectlistitem

> **可能重复：**
> [MVC3 Razor（下拉列表）](https://stackoverflow.com/questions/12437922/mvc3-razor-drop-down-list)

我一直在收到“对象引用未设置为对象的实例。”。在过去的 12 小时内一直试图找出这个错误。希望有人可以提供帮助。

这导致了错误。

```
@Html.DropDownListFor(c => c.CategoryID, Model.CategoryTypeList) 
```

在 SearchController 中

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Demo.Models;

namespace Demo.Controllers
{
public class SearchController : Controller
{
    //
    // GET: /Search/

    public ActionResult DisplayCategory()
    {
        var model = new SearchModel();
        model.CategoryTypeList = GetCategory();

        return View(model);
    }

    private List<SelectListItem> GetCategory()
    {
        List<SelectListItem> items = new List<SelectListItem>();
        items.Add(new SelectListItem { Text = "1", Value = "1" });
        items.Add(new SelectListItem { Text = "2", Value = "2" });
        return items;
    }

}
} 
```

在 SearchModel

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;
using Demo.Controllers;

namespace Demo.Models
{
public class SearchModel
{
    public List<SelectListItem> CategoryTypeList { get; set; }

    [Display(Name = "Category")]
    public string CategoryID { get; set; }

}
} 
```

在 CSHTML 中

```
@model Demo.Models.SearchModel
@{
    ViewBag.Title = "Search";
}

<h2>Search</h2>
@using (Html.BeginForm())
{
<table>
<tr>
<td>@Html.LabelFor(c => c.CategoryID)</td>
<td>@Html.DropDownListFor(c => c.CategoryID, Model.CategoryTypeList)</td>
</tr>

</table>
} 
```

堆栈跟踪

```
[NullReferenceException: Object reference not set to an instance of an object.]
ASP._Page_Views_Home_Search_cshtml.Execute() in c:\Users\User_me\Documents\Visual Studio 2010\Projects\Demo\Demo\Views\Home\Search.cshtml:12
System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +272
System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +67
System.Web.WebPages.StartPage.RunPage() +58
System.Web.WebPages.StartPage.ExecutePageHierarchy() +94
System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +172
System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +574
System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +360
System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +409
System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +39
System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +60
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +391
System.Web.Mvc.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() +61
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +285
System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +830
System.Web.Mvc.Controller.ExecuteCore() +136
System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +232
System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +39
System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +68
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +44
System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +42
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +141
System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +54
System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +40
System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +61
System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +31
System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +56
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +110
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +38
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T00:34:10.673

根据您上面的评论，如果您想在另一个页面中将其作为一个单独的单元调用，那么您需要使用 Html.RenderPartial 传递模型，或者调用 Html.RenderAction 以执行整个操作并输出结果HTML。

**使用[Html.RenderPartial](http://msdn.microsoft.com/en-us/library/dd492962%28v=vs.108%29.aspx)**

```
@*
   Assuming that you have already initialized some variable
   called 'mySearchModel'
*@

@Html.RenderPartial("DisplayCategory", mySearchModel) 
```

这将确保视图上的 Model 属性被设置。

**使用[Html.RenderAction](http://msdn.microsoft.com/en-us/library/ee703541%28v=vs.108%29.aspx)**

```
//Slight change to your action method to ensure it returns
// a partial view, and will only ever be called as a child
// action of another action.
[ChildActionOnly]
public ActionResult DisplayCategory()
{
    var model = new SearchModel();
    model.CategoryTypeList = GetCategory();

    return PartialView(model);
}

@Html.RenderAction("DisplayCategory") 
```

进一步阅读：

[http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx) [http://devlicio.us/blogs/derik_whittaker/archive/2008/11/24/renderpartial-vs-renderaction.aspx](http://devlicio.us/blogs/derik_whittaker/archive/2008/11/24/renderpartial-vs-renderaction.aspx)

# mobile - Jquery mobile：返回 index.php 的链接不会再次触发 pageshow

> ID：12443295
> 
> 赞同：0
> 
> 时间：2012-09-15T23:41:33.573
> 
> 标签：mobile, jquery-mobile, event-handling, jquery

我有一个使用 jQuery mobile 的简单网站。它由 2 页`index.php`和`pageB.php`. In`pageB.php`是 jqm 页面的标题。我把链接放回`index.php`：

```
<a href="index.php">Retour</a> 
```

在`index.php`中，页面 id 是`welcome`

我的问题是，如果我

1.  从 domain.com/ 输入站点
2.  单击指向`pageB.php`（ajax 加载）的链接
3.  点击链接返回`index.php`

该事件`pageshow`不会**再次触发**，并且我之前动态加载的内容不存在。（似乎是#welcome 类型的新页面）

但是，如果我将链接替换为指向`pageB.php`的链接`index.php#welcome`，`welcome`即 中的页面 id `index.php`，那么如果我从 进入该站点`pageB.php`，则该**链接将处于非活动状态**。

更新：这是重现问题的简化代码：

`index.php`：

```
<!DOCTYPE HTML>
<html>
<head>
    <!-- Explicit charset definition -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8 "/>
    <!-- useful for mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Includes javascript & css files required for jquery mobile -->
    <script src="./jquery-mobile/jquery-1.8.1.min.js"></script>
    <script src="./jquery-mobile/jquery.mobile-1.2.0-beta.1.min.js"></script>
    <link rel="stylesheet" href="./jquery-mobile/jquery.mobile-1.2.0-beta.1.min.css" />
</head>
<body>
    <div data-role=page id=welcome>
        <div data-role=header>
        <h1>Index</h1>
        </div>
        <div data-role=content>
        <a href="pageB.php">link to pageB</link>
        <script>
            $('#welcome').bind('pageshow', function(){
                alert('pageshow triggered');
            });
        </script>
    </div>
</div>
</body>
</html> 
```

和`pageB.php`：

```
<!DOCTYPE HTML>
<html>
    <head>
    <!-- Explicit charset definition -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8 "/>
    <!-- useful for mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Includes javascript & css files required for jquery mobile -->
    <script src="./jquery-mobile/jquery-1.8.1.min.js"></script>
    <script src="./jquery-mobile/jquery.mobile-1.2.0-beta.1.min.js"></script>
    <link rel="stylesheet" href="./jquery-mobile/jquery.mobile-1.2.0-beta.1.min.css" />
</head>
<body>
    <div data-role=page id=pageB>
        <div data-role=header>
        <!--<a href="./index.php#welcome" data-icon="arrow-l">Retour</a>-->
        <a href="./index.php" data-icon="arrow-l">Retour</a>
        <h1>PageB</h1>
        </div>
        <div data-role=content>
            nothing
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T05:37:42.470

我建议以下解决方案：

首先，创建一个 javascript 文件并调用它`test.js`。在此文件中，包含以下代码：

```
function myfunc(){
    alert('pageshow triggered');
}

$(document).delegate('#welcome', 'pageshow', myfunc); 
```

然后，为您的文件`index.php`和以下代码包含以下代码`pageB.php`：

- `index.php`：

```
<!DOCTYPE HTML>
<html>
    <head>
        <!-- Explicit charset definition -->
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8 "/>

        <!-- useful for mobile devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Includes javascript & css files required for jquery mobile -->
        <script src="./jquery-mobile/jquery-1.8.1.min.js"></script>
        <script src="./jquery-mobile/jquery.mobile-1.2.0-beta.1.min.js"></script>
        <link rel="stylesheet" href="./jquery-mobile/jquery.mobile-1.2.0-beta.1.min.css" />

        <!-- INCLUDE YOUR FILE 'test.js' -->
        <script type="text/javascript" src="./test.js"></script>

    </head>

    <body>
        <div data-role="page" id="welcome">
            <div data-role="header">
                <h1>Index</h1>
            </div>

            <div data-role="content">
                <a href="pageB.php">link to pageB</a>
            </div>
        </div>
    </body>
</html> 
```

- `pageB.php`：

```
<!DOCTYPE HTML>
<html>
    <head>

        <!-- Explicit charset definition -->
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8 "/>

        <!-- useful for mobile devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Includes javascript & css files required for jquery mobile -->
        <script src="./jquery-mobile/jquery-1.8.1.min.js"></script>
        <script src="./jquery-mobile/jquery.mobile-1.2.0-beta.1.min.js"></script>
        <link rel="stylesheet" href="./jquery-mobile/jquery.mobile-1.2.0-beta.1.min.css" />

        <!-- INCLUDE YOUR FILE 'test.js' -->
        <script type="text/javascript" src="./test.js"></script>
    </head>

    <body>

        <div data-role="page" id="pageB">
            <div data-role="header">
                <a href="./index.php" data-icon="arrow-l">Retour</a>
                <h1>PageB</h1>
            </div>

            <div data-role="content">nothing</div>  
        </div>
    </body>
</html> 
```

* * *

另一种解决方案是将每个 jQuery Mobile 页面分组到一个 HTML 文件中：

```
<!DOCTYPE HTML>
<html>
    <head>

        <!-- Explicit charset definition -->
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8 "/>

        <!-- useful for mobile devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Includes javascript & css files required for jquery mobile -->
        <script src="./jquery-mobile/jquery-1.8.1.min.js"></script>
        <script src="./jquery-mobile/jquery.mobile-1.2.0-beta.1.min.js"></script>
        <link rel="stylesheet" href="./jquery-mobile/jquery.mobile-1.2.0-beta.1.min.css" />

        <!-- INCLUDE YOUR FILE 'test.js' -->
        <script type="text/javascript" src="./test.js"></script>
    </head>

    <body>

        <!-- PAGE ONE -->
        <div data-role="page" id="welcome">
            <div data-role="header">
                <h1>Index</h1>
            </div>

            <div data-role="content">
                <a href="#pageB">link to pageB</a>
            </div>
        </div>

        <!-- PAGE TWO -->
        <div data-role="page" id="pageB">
            <div data-role="header">
                <a href="#welcome" data-icon="arrow-l">Retour</a>
                <h1>PageB</h1>
            </div>

            <div data-role="content">nothing</div>  
        </div>
    </body>
</html> 
```

**PS：**您可以根据自己的方便更改文件“test.js”的路径/来源。

# java - Jsoup 从 li 获取超链接

> ID：12443298
> 
> 赞同：1
> 
> 时间：2012-09-15T23:42:39.637
> 
> 标签：java, jsoup

我有

```
<div id = top1>
   <div id topsub1>
   <ul class="student">
   <li>
    <a href="/thomas">Tom</a>
    </li>
    </div>
   <div id topsub2>
   <ul class="student">
   <li>
    <a href="/thomas1">Tom1</a>
    </li>
    </div>
 </div> 
```

我想获取 href 和 text 所以我做了 Elements xx= select (div div ul li)

当我为 y 做 foreach xx 时，如果我这样做了

string1= y.text(); //这是打印 Tom String2= y.attr("href") //这总是空的。我无法获得 /thomas？我也试过 y.attr("a[href]"))

还有什么是：doc.select(".studentnames > a");？这是否意味着 ID=studentnames 上的所有“a”都正确？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:20:34.793

如果你只是这样做了`Elements eles = doc.select("a[href]");`呢？另外我相信在使用该`attrib(...)`方法时，您不会传入标签，只需传入属性名称本身。

编辑：
你说：

> 做 doc.select("a[href].. 有很多属性和hrefs..我只想要学生姓名旁边的问题..这就是为什么我在做文本后立即做这样我可以得到- 学生姓名和他的网站

然后通过顺序调用多个选择或链接它们来优化您的选择返回的结果：

```
Elements eles = doc.select("ul.student").select("a[href]"); 
```

或者也许（我从来没有这样做过）：

```
Elements eles = doc.select("ul.student a[href]"); 
```

甚至：

```
Elements eles = doc.select("div > div > ul.student > li > a[href]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:41:51.993

这是你的错误：

**1.**您的第一个选择仅获取`div div ul li`，因此仅`Elements`包含`li`标签。因此，您可以执行以下任一方式：

**获取每个元素**

```
for (Element x: yy) {
  Element aTag = x.child(0);
  // or it can be aTag = x.select("a[href]").first();
  // Do your stuff here !
} 
```

**从选择查询中获取：**

```
Elements yy = doc.select("div div ul li a[href]"); 
```

我想提一下，请不要使用**`Element.text()`**is 来获取标签内的数据，所以在这种情况下，它是`li`. 调试时，您应该使用**`Element.html()`**or **`Elements.html()`**。

**2\. 关于您的担忧：**

> 还有什么是：`doc.select(".studentnames > a")`？这是否意味着 ID=studentnames 上的所有“a”都正确？？？

**`.`**是类，而是**`#`**id。再者，**`>`**是**直子**。

因此，您的查询意味着：*“返回所有 a 标签，它是具有**类等于 'studentnames'的标签的****直接**子标签”*

 **有关它的更具体的信息，您应该查看[Jsoup 的`Selector`文档](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)**

# relational-database - 函数依赖集闭包中的非平凡函数依赖

> ID：12443300
> 
> 赞同：0
> 
> 时间：2012-09-15T23:43:04.533
> 
> 标签：relational-database, functional-dependencies

`enter code here`我正在准备我的数据库考试。

我有一个关于使用给定的函数依赖集找到 R={A,B,C,D,E,F,G} 的非平凡函数依赖的问题：

```
A->B
A->D
C->EA
F->G 
```

在这种情况下，候选键是 CF，因为 CF+=ABCDEFG

非平凡的函数依赖可能是 C->B

这是真的吗？如果不是，如何计算非平凡函数依赖以及如何使用 Armstrong Axioms 证明它

感谢您的耐心和时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:45:46.930

暗示：

`C->EA`

相当于

`C->E`和`C->A`

# ruby-on-rails - 有人可以帮我建立这个协会吗？

> ID：12443304
> 
> 赞同：2
> 
> 时间：2012-09-15T23:44:53.740
> 
> 标签：ruby-on-rails, associations

我正在尝试设置一个类似于游戏的 Rails 应用程序。该应用程序有用户，每个用户都有他们可以创建的 Pawn。用户可以搜索其他用户和他们创建的 Pawn，如果愿意，可以使用自己的 Pawn 挑战另一个用户。然后，被挑战的用户可以接受/拒绝挑战。

现在我可以为用户添加/删除 Pawns，我的模型如下所示：

```
class User < ActiveRecord::Base
  has_many :pawns, dependent: :destroy 
```

和

```
class Pawn < ActiveRecord::Base
  belongs_to :user 
```

现在，如果 User1 想要挑战由 User2 创建的 Pawn，他查看 User2 的 Pawn 列表并单击他想要的 Pawn 的“挑战”按钮。然后，用户 1 必须选择他的一个 Pawns 用于挑战并单击保存。现在 User2 需要接受/拒绝挑战。

我很难弄清楚应该如何设置挑战。我的想法是每个 Pawn 都会有一个自我参照的多对多关系，就像建立友谊关系一样。但是，我不知道我是否应该考虑与用户或 Pawn 相关的挑战。

模拟这样的东西的最佳方法是什么？

**编辑：**

这是我要完成的工作的图表。我definitley认为我需要某种关联设置。结果将保存该挑战的该 Pawn 的统计信息（例如 time_spent、clicks_made 等）。挑战也会有一个获胜者或类似内容的列。

![在此处输入图像描述](../Images/2ddbccc4fbe263f0d1aa75befd45a6f9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T16:52:15.180

您的挑战可能为每种类型的棋子定义了关联。

```
class Challenge < ActiveRecord::Base
  # attributes :challengee_id, :challenger_id

  belongs_to :challengee, class_name: "Pawn"
  belongs_to :challenger, class_name: "Pawn"

  has_many :results
end 
```

Pawns 对每种类型的挑战都有关联。

```
class Pawn < ActiveRecord::Base
  # attributes :user_id

  belongs_to :user

  has_many :results
  has_many :initiated_challenges, class_name: "Challenge", foreign_key: :challenger_id
  has_many :received_challenges, class_name: "Challenge", foreign_key: :challengee_id
end 
```

对结果记录的challenge_id 进行非规范化可能是可以的。

```
class Result < ActiveRecord::Base
  # attributes: pawn_id, challenge_id, :result
  belongs_to :pawn
  belongs_to :challenge
end 
```

您的用户可以通过 pawn 与 pawn 和挑战建立关联。将两种挑战类型与用户关联的一种简单方法是将两种挑战关联（发起和接收）的结果组合到一个方法#challenge。

```
class User < ActiveRecord::Base
  has_many :pawns
  has_many :initiated_challenges, through: :pawns, source: :initiated_challenges
  has_many :received_challenges, through: :pawns, source: :received_challenges

  def challenges
    initiated_challenges + received_challenges
  end
end 
```

此方法的性能优化可能包括将挑战中的 user_id 非规范化为 :challengee_user_id 和 :challenger_user_id... 或缓存用户上的挑战 id 列表，以便您进行一次查询而不是两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T00:04:17.490

您可以设置另一个名为`Challenges`字段的表`challenger_id, challengee_id, status`。挑战者和挑战者 ID 当然代表棋子，而不是用户。状态将代表`challenge_pending, challenge_on_going`，显然还有其他方法可以做到这一点，但这是一种。

这还有一个额外的好处，即如果这是您想要的行为，您可以非常轻松地将典当挑战限制为一个。

在您的视图控制器中

```
@challenges = Challenge.where("challengee_id IN (?)", Pawn.find_all_by_owner_id(current_user.id).map{|u| u[:id]})
@challenged = Challenge.where("challenger_id IN (?)", Pawn.find_all_by_owner_id(current_user.id).map{|u| u[:id]}) 
```

在你看来

```
<%= @challenges.each do |challenge| %>
  whatever
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T22:22:35.333

```
class User < ActiveRecord::Base
    has_many :pawns
end

class Pawn < ActiveRecord::Base
    belongs_to :user

    has_many :challengers, class_name: 'Challenge'
    has_many :challengees, class_name: 'Challenge'

    belongs_to :result
end

class Challenge < ActiveRecord::Base
    belongs_to :challenger, class_name: 'Pawn'
    belongs_to :challengee, class_name: 'Pawn'

    belongs_to :result
end

class Result < ActiveRecord::Base
    has_one :challenge
    has_one :winner, class_name: 'Pawn'
end 
```

# ios - 使用 NSObject 加载方法正确保留对象

> ID：12443305
> 
> 赞同：0
> 
> 时间：2012-09-15T23:45:01.790
> 
> 标签：ios, nsobject

我不太确定这个实现哪里出了问题，以及我需要做哪些调整才能使加载的单例留在内存中。

```
@implementation ApplicationSettings

static ApplicationSettings *sharedSettings = nil;

+ (void)load
{
    @autoreleasepool {
        sharedSettings = [self sharedSettings];
        [self configureInitialSettings];
    }
}

+ (ApplicationSettings*) sharedSettings {
    if (sharedSettings)
        return sharedSettings;
    else {
        return [[[ApplicationSettings alloc] init] autorelease];
    }
}

- (void) dealloc {
    [super dealloc];
} 
```

这里显示了主要的加载方法，以及 dealloc（我没有使用 ARC）。

我最近开始使用这种模式。我将不得不检查每个实现以确保它是正确的。我发现了一种情况，它被释放并导致崩溃。显然@autoreleasepool 拥有它。我应该删除 return 语句中的自动释放，使其不进入自动释放池吗？如果我这样做，那么它会一直保留到程序被杀死，这对我来说很好。这有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:14:49.330

这不是声明单例类的正确方法。（因此，您的`+load`方法和对象保留不适合您在此处的使用以及崩溃的原因）

*   在方法中加载单例实例`+load`是没有用的，因为最好只在需要时分配实例，即在第一次请求时（延迟加载）
*   但更重要的是，在方法中返回一个自动释放的实例`sharedSettings`会使单例模式无效并无法达到其目的，因为您返回的实例将在自动释放池耗尽时立即释放（即在当前 RunLoop 迭代结束时） - 如果你有任何内部`@autoreleasepool`使用，如果不是更早）。这很可能是你崩溃的原因！
*   的实现`dealloc`是无用的，首先因为它只调用它的`super`实现（这样你可以避免整个方法定义），并且因为你的类是一个单例，当你的应用程序还活着时，实例永远不会从内存中释放。
*   最后但并非最不重要的一点是，您的实现根本不是线程安全的。

*当然，通常你需要平衡`alloc`和`init`调用`release`或`autorelease`调用。这是内存管理的主要规则。但是对于单例模式，根据定义，只要应用程序存在（这是主要角色），单例的共享实例就会存在，这是规则的例外，您不应释放包含单例对象的 sharedInstance，以确保它继续存在并且不会从内存中释放。*

* * *

没有 ARC 的单例的一种正确（传统）实现是重载`alloc`/ `retain`/ `release`/ `autorelease`/`retainCount`方法，如 Apple 关于单例的文档中所述。但事实上，这并不是我们现在真正这样做的方式，因为这个文档已经很老了（在 GCD 存在之前编写）并且已经过时，而且**GCD 现在提供了一种更好的替代方案，即保证线程安全**，并且也与**非ARC和ARC兼容***（而后者在ARC环境下无法实现）*。所以这里是：

```
@implementation ApplicationSettings
+(ApplicationSettings*)sharedInstance
{
    static ApplicationSettings* sharedInstance = nil;
    static dispatch_once_t once;
    dispatch_once(&once, ^{ sharedInstance = [[self alloc] init]; });
    return sharedInstance;
}
@end 
```

就这样。不需要方法之外的全局变量或其他任何东西。只需声明此方法并在每次需要访问单例时使用它即可。如果您需要填充单例的一些实例变量，就像您可能在您的`configureInitialSettings`方法中所做的那样，只需在`init`您的单例的方法中完成，就像您在标准类中做的那样。

* * *

附加说明：如果您想非常严格，有些人可能会争辩说它不会禁止使用 alloc/init 分配/创建该类的其他实例（您自己的实现也不会在您的问题中）所以这不是真正的单例：如果她/他真的想要，仍然可以分配它的多个实例。

但在实践中，即使这是真的，我也看不出有什么理由要真正添加这些约束（如果有一天你切换到 ARC，你无论如何都不能添加这些约束）。当您寻求单例模式时，您真正想要的更多是“在整个应用程序中共享的公共实例”，而不是“一种禁止创建多个实例的方法”，这就是我们在这里所拥有的。实际上，对于大多数声称是单例的类（`NSFileManager`例如）来说，情况就是如此。

# java - 使用 java 提取 *.b64 文件

> ID：12443306
> 
> 赞同：1
> 
> 时间：2012-09-15T23:45:04.513
> 
> 标签：java, base64

我正在使用 OpenSSL 创建数字签名。这会生成一个 *.b64 文件，其中包含文件 *.txt，而这又包含数字签名。

如何使用 java 提取 *.b64？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:03:55.227

您可以使用[DatatypeConverter.parseBase64Binary()](http://docs.oracle.com/javaee/5/api/javax/xml/bind/DatatypeConverter.html#parseBase64Binary%28java.lang.String%29)：解码 base64 编码的文件内容以获取数字签名：

```
String fileContentsStr = ...
byte[] decoded = DatatypeConverter.parseBase64Binary(fileContentsStr);
System.out.println(new String(decoded)); 
```

# signalr - 在 SignalR 中获取当前集线器

> ID：12443307
> 
> 赞同：13
> 
> 时间：2012-09-15T23:45:16.003
> 
> 标签：signalr

有没有从控制器调用 SignalR 集线器中方法的好方法？

现在我有这个：

```
public class StatsHub : Hub
{
    private static readonly Lazy<StatsHub> instance = new Lazy<StatsHub>(() => new StatsHub());
    public static StatsHub Instance { get { return instance.Value; } }

    public StatsHub()
    {
        if (this.Clients == null)
        {
            var hubContext = SignalR.GlobalHost.ConnectionManager.GetHubContext<StatsHub>();
            this.Clients = hubContext.Clients;
            this.Groups = hubContext.Groups;
        }
    }

    // methods here...
} 
```

所以在我的控制器动作中，我只能说，例如

```
StatsHub.Instance.SendMessage("blah"); 
```

它几乎很好，除了 hubContext 没有集线器的 Caller 或 Context 属性——这些属性很好。

希望有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-17T17:03:40.790

如果要从集线器外部通过集线器进行广播，则需要`GlobalHost.ConnectionManager.GetHubContext<MyHub>()`获取集线器上下文。然后，您可以使用此上下文通过`.Clients`属性进行广播。

如您的示例代码所示，您已经掌握了集线器上下文，但在我看来，在集线器内部这样做感觉不对。如果您只使用`SendMessage()`控制器操作中的逻辑，我会将代码直接移动到控制器操作中并使用`GetHubContext<T>()`从那里获得的集线器上下文。

请注意，`Caller`or`Context`属性将始终`null`在这种情况下，因为 SignalR 在向服务器发出请求时没有参与，因此无法提供属性。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-17T12:10:28.950

找到了一个 DefaultHubManager，我认为这是我需要的。

```
DefaultHubManager hd = new DefaultHubManager(GlobalHost.DependencyResolver);
var hub = hd.ResolveHub("AdminHub") as AdminHub;
hub.SendMessage("woohoo"); 
```

作品。如果有更好/首选的方式 - 请分享。

# svg - SVG 检测“填充：无”上的 Onclick 事件

> ID：12443309
> 
> 赞同：17
> 
> 时间：2012-09-15T23:45:33.753
> 
> 标签：svg

当我创建一个 svg rect 时`fill: black`，我的`onclick`事件处理程序被调用。

当我用 替换`fill: black`时`fill: none`，当我在矩形内单击时不会调用我的事件处理程序，而只会在我单击矩形的**边框**时调用。

我需要更改什么才能检测到单击事件以在矩形**内单击？**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-16T06:38:47.293

这由[指针事件](http://www.w3.org/TR/SVG/interact.html#PointerEventsProperty)属性控制。看起来您想将其设置为可见

`<rect pointer-events="visible" ...>`

# c++ - 多个流的相同字符串

> ID：12443310
> 
> 赞同：2
> 
> 时间：2012-09-15T23:46:15.357
> 
> 标签：c++, performance, stl, stream, c++11

我必须将相同的字符串（例如日志消息）发送到多个流。
以下哪种解决方案最有效？

1.  为每个流重建相同的字符串并将其发送到流本身。

    ```
    outstr1 << "abc" << 123 << 1.23 << "def" << endl;  
    outstr2 << "abc" << 123 << 1.23 << "def" << endl;  
    outstr3 << "abc" << 123 << 1.23 << "def" << endl; 
    ```

2.  使用字符串的运算符构建一次字符串，并将其发送到所有流。

    ```
    std::string str = "abc" + std::to_string(123) + std::to_string(1.23) + "def";  
    outstr1 << str;  
    outstr2 << str;  
    outstr3 << str; 
    ```

3.  使用流构建一次字符串，并将其发送到所有流：

    ```
    std::stringstream sstm;  
    sstm << "abc" << 123 << 1.23 << "def" << endl;  
    std::string str = sstm.str();  
    outstr1 << str;  
    outstr2 << str;  
    outstr3 << str; 
    ```

这些输出流中的一些或全部可能位于 RAM 磁盘上。

还有其他方法可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T23:59:59.023

我会使用 tee 输出流。做类似的事情（伪代码）：

```
allstreams = tee(outstr1, outstr2, outstr3);
allstreams << "abc" << 123 << 1.23 << "def" << endl; 
```

标准 c++ 库中似乎没有任何东西可以做到这一点，但[Boost 有一个](http://www.boost.org/doc/libs/1_39_0/libs/iostreams/doc/functions/tee.html).

另请参阅[如何组合输出流的答案，以便输出一次到达多个位置？](https://stackoverflow.com/questions/1760726/how-can-i-compose-output-streams-so-output-goes-multiple-places-at-once)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T23:55:28.190

^(尽管无论哪种方式1)都不太可能有太大差异，但选项 #3 听起来最合理：与第一个选项不同，它不会多次将`int`s 转换为s ；`string`与第二个选项不同，它不会`string`为其中间结果²分配和删除多个对象。从可读性的角度来看，它看起来也是最简洁的：没有重复的代码，输出看起来像一个输出，而不像一个串联。

* * *

¹在此处分析邪恶之前插入关于优化的强制性免责声明。

² [小字符串优化](https://stackoverflow.com/q/10315041/335858)可能对支持它的系统有所帮助（感谢[Pretorian](https://stackoverflow.com/users/241631/praetorian)），但中间对象的构造函数和析构函数调用不会消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T00:03:13.967

执行此类操作的“正确”方法是让流缓冲区写入多个目的地，并通过`std::ostream`. 这样，代码看起来好像只写了一次，但字符被发送了多次。搜索“teebuf Dietmar”会发现同一主题的一些变体。

还要评论您的问题：三种选择中的哪一种最快取决于您拥有的确切表达方式：

1.  需要对涉及的表达式求值并执行 3 次转换。根据您实际执行的操作，这可能仍然相当快。
2.  实际上创建和销毁多个流并为`std::string`. 我希望这是最慢的。
3.  仍然创建一个流（实际上应该是 a `std::ostringstream`）并分配一些内存。在您的选择中，我希望它是最快的。

使用 a`teebuf`可能是最快的，至少，当它进行一些缓冲但只使用固定的 suze 数组时，缓冲区和流缓冲区指针数组都是如此。请注意，您需要重写`sync()`以及时处理缓冲区。

要确定您需要测量的实际性能！

# css - 图片库中一张一张的连续过渡

> ID：12443311
> 
> 赞同：-1
> 
> 时间：2012-09-15T23:47:04.353
> 
> 标签：css

我有三个并排放置的图像。我希望它们连续不断地淡入淡出，一个接一个地达到其不透明度的 50%。在不透明度 = 100% 的情况下，只有一张图像可见，该过程需要在页面加载后自动进行。我已经尝试了几个小时但没有结果。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:47:43.747

你可以使用我的 jQuery 插件。它也是一样的。 [https://github.com/raynesax/Super-Slider](https://github.com/raynesax/Super-Slider)

# android - ListView 没有填充，或者 WebView 占据了整个屏幕？

> ID：12443312
> 
> 赞同：1
> 
> 时间：2012-09-15T23:47:08.807
> 
> 标签：android, listview, webview, adapter, fragment

我的代码应该在我的 UrlListFragment 中填充我的 ListView，但是当我运行它时，我看不到任何效果。我把问题放在一边，在我的 WebView 上工作，发现一旦我加载一个 URL，它就会使用整个屏幕。我不确定这是否意味着我的 ListView 没有被填充，所以它不占用空间，所以 WebView 占据了整个屏幕，或者无论 ListView 是否是 WebView 都占据了整个屏幕是否被填充。

我像这样填充我的 ListView：

```
 View returnView = inflator.inflate(R.layout.url_fragment, container, false);

    ListView listView1 = (ListView) returnView.findViewById(R.id.mylist);        
    String[] items = { "http://mobile.cs.fsu.edu/android", "http://www.google.com", "http://my-favoriate-website.com" };        
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, items);        
    listView1.setAdapter(adapter);

    return returnView; 
```

我的主要 XML 是这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<FrameLayout
    android:id="@+id/fragment_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</FrameLayout> 
```

我以编程方式将片段放置在主布局中，如下所示：

```
 FragmentManager manager = getFragmentManager();
    FragmentTransaction trans = manager.beginTransaction();
    UrlListFragment urlfragment = new UrlListFragment();
    MyWebFragment webfragment = new MyWebFragment();
    trans.add(R.id.fragment_container, urlfragment, "my_url_fragment");
    trans.add(R.id.fragment_container, webfragment, "my_web_fragment");
    trans.commit(); 
```

我的 ListView 只是没有出现而我的 WebView 占据了整个屏幕，这可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:28:18.503

你应该使用这种类型的构造函数

```
 ArrayAdapter(Context context, int resource, int textViewResourceId, T[] objects) 
```

一切都和你写的一样，但在 textViewResourceId 你使用 android.R.id.text1

# javascript - 使用 agility.js 进行页面布局和合成

> ID：12443313
> 
> 赞同：6
> 
> 时间：2012-09-15T23:47:18.430
> 
> 标签：javascript, model-view-controller, agility.js

我是 MVC 风格的 javascript 库的新手，如果这个问题太基本，请原谅我。我正在尝试完全用[jQuery](http://jquery.com/)和[agility.js编写](http://agilityjs.com/)[单页应用程序](http://en.wikipedia.org/wiki/Single-page_application)。agility.js[文档](http://agilityjs.com/docs)中给出的示例完全包括将 html 元素添加到文档根目录。问题：是否有“最佳实践”方法来按组件组装页面。

这是我的 html 应用程序的粗略轮廓：

```
<html>
    <head> ... </head>
    <body>
        <header> ... </header>
        <div id=PageHolder>
            <div id=AppPane_1></div>
            <div id=AppPand_2></div>
        </div>
        <footer> ... </footer>
    </body>
</html> 
```

'AppPane' div 中将包含应用程序的内容。

好吧，考虑到这一切，我不是在问我能做什么，而是在问我应该做什么。

我从文档和研究中看到我有 3 个选择：

1.  从原子敏捷对象创建我的页面组合，并将它们组装在一个`jQuery`文档就绪块中。 `$$.document.append(Foo)`适用于根元素，但我不知道如何将 Foo 的子元素添加到 foo.
2.  使用一个（非常大的）敏捷对象，该对象从上面布置基本的静态 html，并使用这些`controller`函数附加控件和诸如此类的东西（我也无法开始工作）
3.  使用一个根敏捷对象并使用视图将所有子对象附加到它上面（不知何故，我也无法让它工作。）

其中哪一个是最好的，所涉及的语法是什么？在此先感谢，任何将 html 组件组装成有说服力的敏捷应用程序的指导将不胜感激。

[http://jsbin.com/ojenon/1/](http://jsbin.com/ojenon/1/)

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T03:38:07.623

在我看来，组织页面模块的最佳方法是将单个客户端模板保存在头部的脚本标记中：

```
<html>
<head>
<script type="text/template" id="template1">
    <b>Some <abbr>HTML</abbr> template</b>
</script>
<script type="text/template" id="template2">
    <b>Some <abbr>HTML</abbr> template</b>
</script>
</head>
... 
```

您甚至可以选择使用模板语言，例如 jQuery.template 或 handlebars.js，以方便逻辑、变量插值等。

然后，在您的控制器中，您将从 DOM 加载这些模板的脚本标签的 html 内容，并将它们复制到您的目标 div (#PageHolder) 中。

这种技术的替代方法是将模板存储在头部的文字 JS 对象中：

```
<script type="text/javascript">
var Templates = {
    template1: "<b>Some <abbr>HTML</abbr> template</b>"
    ...
}
</script> 
```

这仅仅是开始。还有更多选项，例如预编译模板、细分模板以避免冗余模板编译等。从结构的角度来看，将模板维护在专用位置将有助于扩展单页应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T11:00:46.960

我猜这是课程的马，但我更喜欢将模板代码与敏捷代码一起使用，以便它们一起可见。我不是特别喜欢在视图对象中看到 html 和样式，但是您可以在其他变量中设置它们并在视图中引用它们，如下所示：

```
var frmMainTemplate = '<div>' + 
                        '<input type="text" data-bind="name" />' +
                        '<p>You typed <span data-bind="name" /></p>' + 
                      '</div>'; 
var frmMainStyle = '& span {background-color:#888; color:#fff;}';

var frmMain = $$({
  model: {name:''},
  view: {
    format: frmMainTemplate, 
    style: frmMainStyle
  },
  controller: {}   
});

$$.document.append(frmMain); 
```

# iphone - Xcode 4.5 更新容器视图？

> ID：12443314
> 
> 赞同：2
> 
> 时间：2012-09-15T23:47:48.807
> 
> 标签：iphone, objective-c, ipad, uitableview, container-view

使用 Xcode 4.5 故事板中适用于 iOS 的新“容器视图”，我如何重新加载/更新一个？

在我的应用程序中，我有一个包含 UITableViewController 的容器视图。从我的主视图控制器（具有容器视图的那个）我需要更新容器中的表视图。

# php - 为什么这个失败的 PDO 查询返回的不是 `false`？

> ID：12443316
> 
> 赞同：1
> 
> 时间：2012-09-15T23:48:02.410
> 
> 标签：php, mysql, pdo, prepared-statement

注意：我的问题**不是**查询失败的原因。

使用 WampServer 和 phpMyAdmin。

这是代码：

```
function createRecord(){
 $id=null;
 var_dump("ID: ",$id);
 $length=0;
 $dbh=$this->dbConnect();
 var_dump("DBH: ", $dbh);
 $dbh->beginTransaction();
 //try{
  var_dump("DBH: ", $dbh);
  //$dbh->beginTransaction();
  $insertInSets=$dbh->prepare("INSERT INTO 'sets' () VALUES ()"); // PDO Statement object.  ID is generated via autoincrement.
  var_dump("InsertInSets: ", $insertInSets);
  $id=$dbh->lastInsertId();
  var_dump("ID: ",$id);
  $insertInClosures=$dbh->prepare("INSERT INTO 'closures' (ancestor,descendant,length) VALUES (:ancestor,:descendant,:length)");
  var_dump("InsertInClosures: ", $insertInClosures);
  $insertInClosures->bindParam(":ancestor", $id); //<- This is line 22
  $insertInClosures->bindParam(":descendant", $id);
  $insertInClosures->bindParam(":length", $length);
  //$dbh->commit();
  exit; 
```

我尝试了有和没有`try`和交易。无论如何，我得到以下信息：

`Fatal error: Call to a member function bindParam() on a non-object in C:\wamp\www\Projetv0.2\Class_SetDAO.php on line 22`

原因是我需要将表名封装在反引号中。但是（对我来说）有趣的部分还在后面……

var_dumps 的输出如下：

```
string 'ID: ' (length=4)
null

string 'DBH: ' (length=5)
object(PDO)[8]

string 'DBH: ' (length=5)
object(PDO)[8]

string 'InsertInSets: ' (length=14)
boolean false

string 'ID: ' (length=4)
string '0' (length=1)

string 'InsertInClosures: ' (length=18)
boolean false 
```

我的问题：

鉴于我的查询没有通过，为什么我会得到一个`0`for的值`$id`，我已经设置了这个值，`null`并且通常应该`false`在查询失败时变为这个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T23:54:30.580

这是您设置 ID 的地方

```
$id=$dbh->lastInsertId(); 
```

仅仅因为您的其他查询失败，并不意味着这个查询失败。返回的值根据不同的驱动程序而有所不同，但如果没有最近添加的行，我假设您的数据库返回 0。

尝试在函数的开头调用它，甚至在你尝试插入某些东西之前，它也会返回一个 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:03:46.587

您忘记执行查询。

添加：

`$dbh->execute();`

然后你可以得到最后一个id：

`$id=$dbh->lastInsertId();`

# php - 检查多维数组中的键值对

> ID：12443317
> 
> 赞同：2
> 
> 时间：2012-09-15T23:48:12.893
> 
> 标签：php, arrays, multidimensional-array

我有以下数组：

```
Array
(
    [0] => Array
        (
            [type] => foo
        )

    [1] => Array
        (
            [type] => bar
        )

    [2] => Array
        (
            [type] => bar
        )
) 
```

并且需要知道是否存在一个或多个`type`哪个值是`bar`，而不这样做：

```
foreach ($arrayOfTypes as $type) {
    if ($type['type'] == 'bar')
    {
        // Stuff here
    }
} 
```

*（仅用于学习目的）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T00:17:27.863

我会去[`array_filter()`](http://php.net/manual/en/function.array-filter.php)；

```
$filteredArray = array_filter($stuff, function($item){

    return $item['type'] == 'bar';

});

if( count($filteredArray) > 0 ){

    echo 'There was a bar item in array.';

}else{

    echo 'No luck sorry!';

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:03:18.510

使用 in_array：[http ://se.php.net/manual/en/function.in-array.php](http://se.php.net/manual/en/function.in-array.php)

将它与 array_map 结合使用以展平你所拥有的。像这样：

```
$new_array = array_map( function( $arr ) {
    return $arr['type'];
}, $array );
in_array( 'bar', $new_array ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T00:26:31.190

老实说，`foreach`循环或moonwave99 的`array-filter`答案可能是您最好的选择，但如果您正在寻找的可能是最短的代码和让大多数程序员作呕的创造力，您可以尝试`serialize`使用数组并使用字符串搜索功能：

```
serialize(array(
        0=>array(
            'type'  => 'foo'
        ),
        1=>array(
            'type'  => 'bar'
        ),
        2=>array(
            'type'  => 'bar'
        )
    )) 
```

变成

```
a:3:{i:0;a:1:{s:4:"type";s:3:"foo";}i:1;a:1:{s:4:"type";s:3:"bar";}i:2;a:1:{s:4:"type";s:3:"bar";}} 
```

所以你现在可以运行一个`strpos()`or`preg_match()`函数来找到它们。所以**你的整个功能看起来像**：

```
$exists = strpos('{s:4:"type";s:3:"bar";}',serialize($arrayOfTypes)); //returns number or false 
```

它很短，很灵巧，可以完成简单的字符串密钥对的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-30T14:57:04.803

这与 moonwave99 的解决方案基本相同，但稍微有用一些，因为它位于一个可以提供键/值对的函数中，因此它可用于搜索任何键/值组合：

```
function isKVInArray($k, $v, $array) {
    $filtered = array_filter($array, function($item) use($k,$v) {
        return $item[$k] == $v;
    });
    if(count($filtered)>=1) return true;
    else return false;
}

$k = 'live';
$v = 'y';
$my_array = array(
    0=>array(
        'live'=>'n',
        'something_else'=>'a'
    ),
    1=>array(
        'live'=>'y',
        'something_else'=>'b'
    ),
    2=>array(
        'live'=>'n',
        'something_else'=>'c'
    )
);

if(isKVInArray($k, $v, $my_array)) echo "$k=>$v was found in the array.";
else echo 'No luck sorry!'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-25T13:52:10.450

当您需要计算所有不同的值时，还有另一种简单的方法很有用

```
foreach ($arrayOfTypes as $type) $cnt[$type['type']]++; 
```

获取“bar”的数量（或获取另一个值的计数）：

```
echo($cnt['bar']); 
```

# bash - bash 检查核心存在并且是最近的

> ID：12443320
> 
> 赞同：1
> 
> 时间：2012-09-15T23:48:56.480
> 
> 标签：bash, find

我正在寻找一种更简单的方法：

```
#!/usr/bin/bash

FILE=core
DAYS=1

cd /programdir

if [ -f ${FILE} ]; then
   agetest=$(find . -name "${FILE}" -type f -mtime +${DAYS} -print | wc -c)
   if [[ agetest -eq 0 ]] ; then
      echo "$FILE exists and is not older than ${DAYS} days."
   fi
fi 
```

如果脚本找到它并且核心文件是最近的（在 1 天内），我想处理一个核心文件（使用 dbx 命令）。所以我会在那个 echo 语句所在的地方运行一个 dbx 命令。似乎应该有一种方法可以使用 1 if 语句以更优雅的方式执行此操作，但我想不出该怎么做。有任何想法吗？

我知道用 tmpwatch 或 find/rm 清理旧的核心文件会更容易，但我不允许这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:17:45.113

```
#!/usr/bin/bash

FILE=core
DAYS=1

if [ `find /programdir -name "${FILE}" -type f -mtime +${DAYS}` ]; then
  echo "$FILE exists and is not older than ${DAYS} days."
fi 
```

# php - Laravel DB 插入错误：允许的内存大小已用尽

> ID：12443321
> 
> 赞同：6
> 
> 时间：2012-09-15T23:49:11.467
> 
> 标签：php, laravel, memory-limit

尝试将 ~20K 记录插入我的数据库时遇到问题。我注意到，即使我在我的 foreach 循环中回显，我也没有在命令行中输出任何内容。相反，在插入与...相关的 ~9440 条记录后出现错误

> `Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 91 bytes) in /Users/me/Sites/Laravel/database/connection.php on line 293`

这是我的代码（尝试使用 Eloquent 和 Fluent）：

```
<?php

class Process_Controller extends Base_Controller
{
    public function action_migrate()
    {
        $properties = DB::table('raw_properties')->get('id');
        $total = count($properties);

        foreach ($properties as $x => $p) {
            $r = RawProperty::find($p->id);
            $count = $x + 1;

            $prop_details = array(
                'column' => $r->field,
                // Total of 21 fields
            );

            DB::table('properties')->insert($prop_details);

            echo "Created #$count of $total\n";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-09-23T17:53:20.910

公认的答案是解决症状而不是问题。问题是当你执行如此大量的查询时，Laravel 查询日志（在内存中）正在吃掉你所有的 RAM。在此处查看答案：[https ://stackoverflow.com/a/18776710/221745](https://stackoverflow.com/a/18776710/221745)

或者，简而言之，通过以下方式关闭查询日志记录：

```
DB::disableQueryLog() 
```

在执行 20k 查询之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T00:59:10.640

此错误描述了由于为脚本分配的内存不足，您的 PHP 脚本已用尽内存限制。

您需要使用 ini_set 函数增加 memory_limit，例如 ini_set('memory_limit','128M');

# algorithm - k-way合并与分而治之？

> ID：12443322
> 
> 赞同：1
> 
> 时间：2012-09-15T23:49:41.253
> 
> 标签：algorithm, divide-and-conquer

> 这个想法是递归地合并第一个 k/2 个列表和第二个 k/2 个列表，然后将两个合并的列表合并为一个列表并返回。

我对递归合并第一个 k/2 和第二个 k/2 列表意味着什么感到困惑。任何人都可以澄清这一点，或者可以查看一些解释这种递归的伪代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T04:52:28.683

```
List recursiveMerge(List[] lists)
{
  // Easy to solve problem for up to length 2
  if (lists.length < 1)
  {
    return new List();
  }
  if (lists.length == 1)
  {
    return lists[0];
  }
  if (lists.length == 2)
  {
    return baseMerge(lists[0], lists[1]);
  }
  // For longer lengths split the array into two
  int half = lists.length / 2;
  List[] firstHalf = new List[half];
  List[] secondHalf = new List[lists.length - half];
  System.arraycopy(lists, 0, firstHalf, 0, firstHalf.length);
  System.arraycopy(lists, firstHalf.length, secondHalf,
    0, secondHalf.length);
  // Solve the problem separately in each sub-array
  List a = recursiveMerge(firstHalf);
  List b = recursiveMerge(secondHalf);
  // and produce a combined solution
  return baseMerge(a, b);
} 
```

如果您从 N 个列表 0,1,2,3... 开始，那么在递归树的底部，我们将 0 与 1 合并，将 2 与 3 合并，将 4 与 5 合并，等等。下一步将 0+1 与 2+3 合并，将 4+5 与 6+7 合并，以此类推。因此，如果有 N 个列表，则树中有 lg(N) 个级别，每个级别处理每个数据点一次。因此，如果有 N 个总长度为 L 的列表，则成本为 O(L log(N))。

# php - 如何获得饼干

> ID：12443328
> 
> 赞同：2
> 
> 时间：2012-09-15T23:51:19.587
> 
> 标签：php, cookies

我有这个代码

```
<?php
setcookie('page', 'settings', time(),'/');
header('Location: settings.php');
?> 
```

但是每次我用 $_COOKIE['page'] 检查 cookie 时都是空的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T23:52:04.460

您的 cookie 始终过期，请使用：

```
setcookie('page', 'settings', time()+3600,'/'); // + 1 hour 
```

如果您有以下标题，还可以为您的脚本添加一个出口：

```
<?php
    setcookie('page', 'settings', time()+3600, '/');
    header('Location: settings.php');
    exit();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T23:54:49.440

您发送的 cookie 在您发送时过期。

```
setcookie("TestCookie", $value, time()+3600);  /* expire in 1 hour */ 
```

# javascript - 如何在 JavaScript 中将字符串转换为函数引用？

> ID：12443330
> 
> 赞同：8
> 
> 时间：2012-09-15T23:51:37.820
> 
> 标签：javascript, string, function, reflection, reference

我想要的是将函数名作为字符串传递，就像我传递了对函数的引用一样。例如，我想做这个：

```
var test = function(fn){
  fn();
}
test(alert); 
```

等于：

```
var test = function(function_as_string){
    //...code that converts function_as_string to function reference fn
    fn();
}
test('alert'); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T23:57:43.757

您从窗口对象获取函数引用：

```
var fn = window[function_as_string]; 
```

演示：http: [//jsfiddle.net/Guffa/nA6gU/](http://jsfiddle.net/Guffa/nA6gU/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T00:03:07.433

使用 eval 获取对该函数的引用 -

```
var Namespace = {
    quack: function () {console.log('quack!')}
};

function test (fnName) {
    var fn = eval(fnName);
    fn();
}
test('Namespace.quack') 
```

如果您愿意，这可能允许您传递其他参数。

哦，你可能无法简单地使用 window[fnName] 的原因是它是否像 $.ajax - window['$.ajax'] 会给你 undefined .. 所以除非你想创建一个复杂的函数要查找它是否在另一个命名空间中， eval 是您最好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T23:58:06.847

看看这个`eval()`函数，它会让你提供一个被评估为 javascript 的字符串：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)

```
var test = function(fn){
  eval(fn + "()");
}
test(alert); 
```

来自 MDN 的 eval 注释：

> eval() 是一个危险的函数，它以调用者的权限执行它传递的代码。如果您使用可能受到恶意方影响的字符串运行 eval()，您最终可能会在具有网页/扩展程序权限的用户计算机上运行恶意代码。更重要的是，第三方代码可以看到 eval() 被调用的范围，这可能导致类似 Function 不易受到攻击的方式。
> 
> eval() 通常也比替代方法慢，因为它必须调用 JS 解释器，而许多其他构造由现代 JS 引擎优化。
> 
> 对于常见的用例，有 eval() 的安全（且快速！）替代方案。

看这里：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T00:02:50.740

函数是对象的属性。您可以像访问任何属性一样访问它们，然后使用 () 来执行它们。

```
​var o = {};
​​​​
o.b = function b() {
    alert("b");
}

o.b();

o["b"](); 
```

如果它是一个全局函数，那么它是窗口上的一个属性。

```
function a() {
    alert("a");
}

a();

window.a();

window["a"](); 
```

就您的嵌套问题而言，最好的方法是将其作为属性分配给您以后可以访问的对象。例如：

```
function assignInside() {
    o.inside = function() {
        alert("inside");
    }
}

assignInside();
o["inside"](); 
```

这一切都是[jsfiddle](http://jsfiddle.net/studgeek/eLfxh/)。

PS，在这种情况下没有理由使用 eval 并且有很多充分的理由来避免 eval 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T00:19:38.807

关于什么：

```
var fn = new Function(function_as_string) 
```

# python - 在 mysql 查询中使用 if

> ID：12443332
> 
> 赞同：3
> 
> 时间：2012-09-15T23:52:01.887
> 
> 标签：python, mysql, sql

我已经有这个查询：

```
cursor.execute("SELECT calldate, dst, billsec, accountcode, disposition, 
                       (billsec/60*%s) as total 
                FROM   cdr 
                WHERE  calldate >= '%s' and calldate < '%s' 
                   and disposition like '%s' and accountcode = '%s' 
                   and dst like '%s'" %(rate, start_date, end_date, status, accountcode, destino)
              ) 
```

Obs: dst 是一个电话号码。

但现在我需要做的是：如果 dst 的第 5 个字符 <= 5，则 billsec/60*0.11 总计，否则 billsec/60*0.16。

可能吗？

这样我在mysql语法中出现错误：

```
 cursor.execute("""SELECT calldate, dst, billsec, accountcode, disposition, 
                    case when cast(substring(dst,4,1), unsigned) <= 5 then
                            billsec/60*%s as total
                    else
                            billsec/60*%s as total
                    end case
                    FROM cdr where calldate >= '%s' and calldate < '%s' and disposition like '%s' and accountcode = '%s' and dst like '%s'""" %(rate_fixo, rate_movel, start_date, end_date, status, accountcode, destino)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T23:55:31.627

是的，这是可能的。Mysql 查询可以包含 if 语句，只是它们被称为 case 语句，正如其他 Piotr Wadas 所指出的那样。

见这里：[http ://dev.mysql.com/doc/refman/5.0/en/case.html](http://dev.mysql.com/doc/refman/5.0/en/case.html)

要从字符串中提取字符，请使用子字符串。 [http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substr](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substr)

所以完整的解决方案是这样的：

```
case when cast(substring(dst,4,1), unsigned) <= 5 then 
   billsec/60*0.11
else
   billsec/60*0.16
end case 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T23:58:24.430

使用 SELECT，您实际上指定了要返回的列集。这个集合可以是简单的列名，也可以是这些列的特定变换，调用SQL函数。“IF”实际上与过程 SQL 更相关，在您的示例中，您需要一些称为 CASE 表达式的东西。诀窍是通过 CASE 表达式在结果集中定义一列，如下所示

```
SELECT acol, bcol, ccol, dcol from t1 where ... 
```

与之比较

```
SELECT acol, CASE WHEN sqlfunc_like_substr(someparams,bcol) THEN bcol ELSE some_other_way_modified(bcol) END, ccol, dcol from t1 WHERE ... 
```

目前不记得 CASE 的确切语法，但这就是方式。此外，您可以命名结果列，例如。

```
SELECT acol as uuu, CASE WHEN ... END as mmm, ccol as nnn, dcol as qqq FROM t1 where... 
```

等等 :) 关键是要理解，SELECT 实际上并不选择要检索的列，而是定义特定的结果列集，其中一些列在表中，一些作为列值转换的子结果或字符串，或NULL，或其他。

# php - utf8 字符集和丑陋的大方块有什么用？

> ID：12443339
> 
> 赞同：1
> 
> 时间：2012-09-15T23:53:04.570
> 
> 标签：php, mysql, utf-8

mysql_set_charset('utf8', $kontaktmySQL);我一直试图弄清楚这一天，不，我无处可去..

我正在尝试使用 mysql 连接设置一个简单的 php 日历，但是当我从我的数据库中加载内容时，我会得到带有问号的黑色小方块。这与 charset 属性有关，但我已经尝试并尝试了不同的解决方案，但我无法正确读取它。

我已经将mysql数据库设置为使用utf8_unicode（数据库和表），我已经设置我的codeprogrammer以将我的文件保存在utf8中，我已经在我的header（）中设置了我的字符集，我什至尝试在之后设置我的mysql字符集连接到数据库，但在加载内容之前 (mysql_set_charset('utf8',$kontaktmySQLs);)。我试图在我的 apache 配置文件中找到默认字符集，但我没有运气。

我已经重新启动了 xampp，但没有任何改变。

我的系统在 mac osx 上运行，并且我安装了 xampp。我正在使用 Coda2 进行编程，并使用 firefox 作为浏览器。我来自挪威，我需要我的特殊字符..:)

有没有人清楚地知道如何解决这个问题？我要精神了。。

编辑：

我解决了，做了以下事情：

1.  我已经将我的标题设置为：`<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />`所以我不必在那里做任何事情。

2.  使用这一行：`mysql_set_charset('utf8', .......);`在我的数据库连接脚本中，在连接到 mySQL 之后，但在连接到数据库之前。

3.  全部删除并创建我的数据库，这次确保将排序规则设置为：`utf8_unicode_ci`数据库和表。

谢谢帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:22:09.477

您可以使用起始查询：

```
$query = "SET NAMES 'utf8'"; // this will set all results to UTF8 encoding. 
```

# mysql - MySQL 左连接（未知列）

> ID：12443343
> 
> 赞同：7
> 
> 时间：2012-09-15T23:54:18.627
> 
> 标签：mysql, sql, join, left-join

我的查询有问题。

MySQL 查询：

```
SELECT DISTINCT(`users`.`username`), `users`.`full_name`, `users`.`profile_picture_url`, 
`users`.`followed_by_count`, `users`.`follows_count`, `users`.`bio`, `users`.`id`
FROM `users`,`interests`
LEFT JOIN `blocked` 
ON `blocked`.`receiver_id` = `users`.`id`
AND `blocked`.`actor_id` = 100 
AND `blocked`.`blocked_reason` = 'Blocked'
WHERE `blocked`.`receiver_id` IS NULL 
AND `users`.`instagram_active` = 1 
AND `users`.`banned` = 0 
AND `interests`.`user_id` = `users`.`id` 
AND `interests`.`interest` = 'Food'
AND `interests`.`active` = 1 
AND `users`.`active` = 1
ORDER BY `users`.`last_login` DESC
LIMIT 0, 25 
```

我得到的错误是：

> # 1054 - “on 子句”中的未知列“users.id”

当我选择它时，它是一个未知的列吗？

我很迷茫...

用户：

```
CREATE TABLE `users` (    
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
 `instagram_id` int(11) NOT NULL,
 `username` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
 `bio` text COLLATE utf8_unicode_ci,
 `website` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
 `profile_picture_url` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
 `full_name` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
 `media_count` int(11) unsigned NOT NULL,
 `followed_by_count` int(11) unsigned NOT NULL,
 `follows_count` int(11) unsigned NOT NULL,
 `last_updated` datetime NOT NULL,
 `last_updated_instagram` datetime NOT NULL,
 `instagram_active` tinyint(1) DEFAULT NULL,
 `last_login` datetime NOT NULL,
 `inserted_on` datetime NOT NULL,
 `banned` tinyint(1) NOT NULL DEFAULT '0',
 `banned_reason` text COLLATE utf8_unicode_ci,
 `oauth_token` varchar(150) COLLATE utf8_unicode_ci NOT NULL,
 `user_level` tinyint(4) NOT NULL,
 `shown_to_others` tinyint(1) NOT NULL DEFAULT '1',
 `credits_offered` tinyint(1) unsigned NOT NULL DEFAULT '2',
 `active` tinyint(1) NOT NULL DEFAULT '1',
 `email` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
 `registered_ip` varchar(17) COLLATE utf8_unicode_ci DEFAULT NULL,
 `credits` int(11) NOT NULL,
 `email_notifications` tinyint(1) NOT NULL DEFAULT '1',
 `todays_followers` int(11) NOT NULL DEFAULT '0',
 `todays_followers_hour` int(11) NOT NULL,
 `total_followers` int(11) NOT NULL,
 `credits_yesterday` int(11) NOT NULL,
 `email_is_verified` tinyint(1) NOT NULL DEFAULT '0',
 `email_announcements` tinyint(1) NOT NULL DEFAULT '1',
 `email_credits` tinyint(1) NOT NULL DEFAULT '1',
 `verification_code` varchar(25) COLLATE utf8_unicode_ci DEFAULT NULL,
 `country_id` bigint(20) unsigned DEFAULT NULL,
 `browser_info_id` bigint(20) unsigned DEFAULT NULL,
 `featured_user` tinyint(1) NOT NULL DEFAULT '0',
 `emailed_credits` tinyint(1) NOT NULL DEFAULT '0',
 UNIQUE KEY `id` (`id`),
 UNIQUE KEY `instagram_id` (`instagram_id`),
 KEY `country_id` (`country_id`),
 KEY `browser_info_id` (`browser_info_id`),
 KEY `username` (`username`,`instagram_active`,`banned`),
 CONSTRAINT `users_ibfk_1` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
 CONSTRAINT `users_ibfk_2` FOREIGN KEY (`browser_info_id`) REFERENCES `browser_info` (`id`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=1279 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

兴趣：

```
CREATE TABLE `interests` (
 `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
 `user_id` bigint(20) unsigned NOT NULL,
 `interest` varchar(25) COLLATE utf8_unicode_ci NOT NULL,
 `inserted_dt` datetime NOT NULL,
 `active` tinyint(1) NOT NULL DEFAULT '1',
 UNIQUE KEY `id` (`id`),
 KEY `user_id` (`user_id`),
 KEY `interest` (`interest`),
 CONSTRAINT `interests_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4161 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

封锁：

```
CREATE TABLE `blocked` (
 `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
 `actor_id` bigint(20) unsigned NOT NULL,
 `receiver_id` bigint(20) unsigned DEFAULT NULL,
 `blocked_reason` enum('Skipped','Blocked') COLLATE utf8_unicode_ci NOT NULL,
 `inserted_dt` datetime NOT NULL,
 `active` tinyint(1) NOT NULL DEFAULT '1',
 `browser_info_id` bigint(20) unsigned DEFAULT NULL,
 UNIQUE KEY `id` (`id`),
 KEY `actor_id` (`actor_id`,`receiver_id`),
 KEY `receiver_id` (`receiver_id`),
 KEY `browser_info_id` (`browser_info_id`),
 CONSTRAINT `blocked_ibfk_1` FOREIGN KEY (`actor_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `blocked_ibfk_2` FOREIGN KEY (`receiver_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `blocked_ibfk_3` FOREIGN KEY (`browser_info_id`) REFERENCES `browser_info` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=5700 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-16T00:10:05.240

如[`JOIN`语法](http://dev.mysql.com/doc/en/join.html)中所述：

> ### 在 MySQL 5.0.12 中加入处理更改
> 
> `[ deletia ]`
> 
> *   以前，逗号运算符 ( `,`) 和`JOIN`两者具有相同的优先级，因此连接表达式`t1, t2 JOIN t3`被解释为`((t1, t2) JOIN t3)`。Now`JOIN`具有更高的优先级，因此表达式被解释为`(t1, (t2 JOIN t3))`. 此更改会影响使用`ON`子句的语句，因为该子句只能引用连接操作数中的列，并且优先级的更改会更改对这些操作数的解释。
>     
>     
>     
>     例子：
>     
>     
>     
>     ```
>     创建表 t1 (i1 INT, j1 INT);
>     创建表 t2 (i2 INT, j2 INT);
>     创建表 t3 (i3 INT, j3 INT);
>     插入 t1 值（1,1）；
>     插入 t2 值（1,1）；
>     插入 t3 值（1,1）；
>     SELECT * FROM t1, t2 加入 t3 ON (t1.i1 = t3.i3);
>     ```
>     
>     
>     
>     以前，[`SELECT`](http://dev.mysql.com/doc/en/select.html)由于 as 的隐式分组， 是合法`t1,t2`的`(t1,t2)`。现在`JOIN`优先，所以`ON`子句的操作数是`t2`and `t3`。因为`t1.i1`不是任何一个操作数中的列，所以结果是`Unknown column 't1.i1' in 'on clause'`错误的。要允许处理连接，请将前两个表用括号显式分组，以便`ON`子句的操作数是`(t1,t2)`and `t3`：
>     
>     
>     
>     ```
>     SELECT * FROM (t1, t2) 加入 t3 ON (t1.i1 = t3.i3);
>     ```
>     
>     
>     
>     或者，避免使用逗号运算符，`JOIN`而是使用：
>     
>     
>     
>     ```
>     SELECT * FROM t1 加入 t2 加入 t3 ON (t1.i1 = t3.i3);
>     ```
>     
>     
>     
>     此更改也适用于将逗号运算符与`INNER JOIN`, `CROSS JOIN`,`LEFT JOIN`和混合的语句`RIGHT JOIN`，所有这些语句现在都比逗号运算符具有更高的优先级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:08:58.467

您的 from 子句没有在表之间加入。如果要解析查询，请尝试以下操作：

```
from `users` cross join
     `interests` LEFT JOIN
     `blocked`
     on . . . 
```

或者，更好的是，正确表述连接：

```
from `users` join
     `interests` 
     on `interests`.`user_id` = `users`.`id` LEFT JOIN
     `blocked`
     on . . . 
```

我对你的建议是：不要在 FROM 语句中使用“，”。它的意思是CROSS JOIN，如果你错过了WHERE 子句中的条件，这是一个非常昂贵的操作。逗号很容易漏掉。您可以删除逗号，第二个表成为第一个表的别名——含义非常不同。另外，不要将连接条件放在 WHERE 子句中。这就是 ON 子句正在做的事情。

然而，我对 MySQL 在这种情况下生成错误感到惊讶，大概是因为您在表之间没有显式连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T00:19:04.597

MySQL 所说的确实如此，因为 ID 列在 LEFT JOIN 时是未知的（它在表 USERS 加入之前完成）。试试这个：

```
SELECT DISTINCT( `users`.`username` ),
               `users`.`full_name`,
               `users`.`profile_picture_url`,
               `users`.`followed_by_count`,
               `users`.`follows_count`,
               `users`.`bio`,
               `users`.`id`
FROM   `users`
       JOIN `interests`
         ON `interests`.`user_id` = `users`.`id`
       LEFT JOIN `blocked`
              ON `blocked`.`receiver_id` = `users`.`id`
                 AND `blocked`.`actor_id` = 100
                 AND `blocked`.`blocked_reason` = 'Blocked'
WHERE  `blocked`.`receiver_id` IS NULL
       AND `users`.`instagram_active` = 1
       AND `users`.`banned` = 0
       AND `interests`.`interest` = 'Food'
       AND `interests`.`active` = 1
       AND `users`.`active` = 1
ORDER  BY `users`.`last_login` DESC
LIMIT  0, 25 
```

# domain-driven-design - 贫血的对象或过度劳累的构造函数？

> ID：12443349
> 
> 赞同：0
> 
> 时间：2012-09-15T23:54:53.337
> 
> 标签：domain-driven-design, modeling, anti-patterns

我正在开发膳食计划应用程序。我有一个 MealSchedule，其中列出了我想在不同日子吃的东西。那个 MealSchedule 最终会变成一个 MealPlan，它是一个产品和食谱的杂货清单，这些清单将创建我每天想吃的东西。

由于 MealPlan 是从 MealSchedule 创建的，因此我想为 MealPlan 创建一个构造函数，该构造函数接受 MealSchedule。不幸的是，这个过程相当复杂，我觉得这会导致创建过于复杂的构造函数的反模式。

另一方面，如果我使用构建器来创建 MealPlan，那么 MealPlan 将成为一个相当贫乏的对象，并且不包含与 MealPlan 密切相关的逻辑。哪一个是两个邪恶中最小的一个，或者更有可能的是，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:43:09.960

是`MealPlan`可以修改并且必须跟踪其状态的完整实体，还是可以将其设为值对象？如果可以，那么您不必担心它会贫血，并且可以将其构造委托给某种`MealPlanBuilder`.

无论如何，我要做的就是尝试改进无处不在的语言并与领域专家交谈，看看像膳食计划生成器这样的东西在商业方面是否有意义。如果答案是肯定的，那么你就有了你的对象。我认为这也是非常实用的，因为您将能够以非常精确、清晰表达的方式与利益相关者讨论膳食计划生成过程，例如

> “我们需要更改膳食计划生成器，以允许用户在每周和每日膳食计划之间进行选择......”

如果生成膳食计划的概念本身并不是那么重要，那么您可以考虑将其逻辑留在`MealPlan`构造函数中。

作为旁注，我要补充一点，贫血不是一种反模式，您应该在*每个*域对象中系统地跟踪和消除。当然，当您的对象确实具有行为时会更好，并且您应该尽可能每次都尝试这样做，但对于某些对象来说这是不可能的。仅仅因为*完全贫血的域层*不好并不意味着您需要为*偶尔*的贫血对象鞭打自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:09:26.370

这只是在某些（不是所有，只是一些）类似情况下对我有用的方法的粗略“草图”。过去，当面对这些选择时，我会退后一步，因为我喜欢那个小小的 KISS——保持简单软件工程师。

从一个基本的（贫血的？）基类开始。开始将这些复杂选项建模为（多态）子类。很高兴拥有多层次的共性，它将获得长期回报（在更复杂的应用程序中，也许不是膳食调度程序）。一个例子; 如果你有一个数据字段，你可以有一个“字段”类：“数字”/“文本”/“布尔”/“URI”。退一步：URI：URL、Email、Wget；文本：TextField、TextArea、Literal、...

它必须对您的应用程序有意义。你可以看看：

*   用餐：坐着/点心
*   坐：午餐/早餐/晚餐
*   小吃：早茶/下午茶/晚餐/冰箱

这个想法是要求编译器和类关系逻辑强制您的代码非常愚蠢，因为静态选择可以在定义中“开发”。一旦你知道这是星期四的午餐...... EAT = new Lunch( Thursday ) ... 如果你让你的构造函数变得聪明；将一路向下。

我第一次“尝试”做这种事情是一团糟！我放弃了。下一次我只是想更多，尝试一些课程（铅笔和纸会有所帮助），直到你有足够好的东西开始。然后试用班级家庭-然后充满激情地进行重构。

祝你好运 ：-）

# java - Java 3D 渲染器 - 边缘消失

> ID：12443350
> 
> 赞同：3
> 
> 时间：2012-09-15T23:54:58.063
> 
> 标签：java, 3d, rendering

我正在使用 Java Graphics 开发一个简单的 3D 渲染器，它目前可以渲染一堆组成一个简单平面的多边形。问题是，边缘上的一些线条在渲染几秒钟后消失了。怎么了？

```
package com.zove.renderer;

import java.awt.Graphics;
import java.awt.Point;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JFrame;
import javax.swing.JPanel;

public final class Frame extends JPanel implements KeyListener{
volatile int x1 = 0;
volatile int x2 = 0;
volatile int y1 = 0;
volatile int y2 = 550;
volatile int x3 = 0;
volatile int y3 = 0;
volatile int x4 = 800;
volatile int y4 = 0;
volatile int angle = 0;
volatile int i;
public JFrame f;
    public Frame(){
        f = new JFrame();
        f.setVisible(true);
        f.add(this);
        f.setResizable(false);
        f.setSize(800,550);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.addKeyListener(this);

    }
    public void paint(Graphics g){
        super.paint(g);
        for(i=0; i<2000;){
            if(x1+i+angle<2600){
            //Vertical
            g.drawLine(x1+i+angle, y1,x2+i-angle*2,y2);
            }
            else{
                g.drawLine(x1+i+angle, y1-i/200,x2+i-angle,y2+angle);

            }

            //Horizontal
            g.drawLine(x3, y3+i-angle/2,x4,y4+i+angle/2);
            i +=10*angle/100;

        }
    }
    public static void main(String[] args){
        Thread s = new Thread(new repainter());
        s.start();
    }
    @Override
    public void keyPressed(KeyEvent arg0) {
    i -=20;
    angle -=20;

    }
    @Override
    public void keyReleased(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void keyTyped(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }

}
class repainter implements Runnable{

    public void run() {
        Frame f = new Frame();
    while(true){

         f.repaint();
         try {
            Thread.sleep(30);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();

        }
         System.out.println(f.x1+f.i+f.angle);
         f.angle +=10;

    }

    }

} 
```

# javascript - 姓名输入索引

> ID：12443359
> 
> 赞同：1
> 
> 时间：2012-09-15T23:57:33.953
> 
> 标签：javascript, jquery, html

```
<input type="text" name="test[ooo][]">
<input type="text" name="test[bbb][]">
<input type="text" name="test[ccc][]">
<input type="text" name="test[vvv][]">
​
$('input').each(function(){
  console.log($(this).attr('name').index('bbb'));
})​ 
```

为什么这不起作用？如何从输入中检查属性名称的索引？

[http://jsfiddle.net/UA2BN/](http://jsfiddle.net/UA2BN/)

我不必使用 index()。我可以使用其他功能，但我该如何检查呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:07:28.130

我想你正在寻找`indexOf`.

console.log($(this).attr('name').indexOf('bbb'));

> -1
> 
> 5
> 
> -1
> 
> -1

[http://jsfiddle.net/5uVd9/](http://jsfiddle.net/5uVd9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:08:28.100

这不起作用，因为 jQuery 选择所有输入元素，并遍历它们，将名称解释为名称字符串。在 jQuery 看来，这根本不是数组。

当然，您始终可以通过选择名称中的子字符串来选择特定输入：

```
console.log( $('input[name*="[bbb]"]') );​ 
```

这将选择一个`input`名称包含 substring 的名称`[bbb]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T00:08:33.873

试试这个代码：

```
inputs= document.getElementsByTagName("input");
for(i=0;i<inputs.length;i++)
   alert(i);​ 
```

# events - 将 OCaml 转换为 F#：Pervasives at_exit 的 F# 等效项

> ID：12443361
> 
> 赞同：2
> 
> 时间：2012-09-15T23:57:44.580
> 
> 标签：events, f#, ocaml

我正在将 OCaml[格式](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Format.html)模块转换为 F#，并将问题追溯到使用 OCaml [Pervasives](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html) at_exit。

```
val at_exit : (unit -> unit) -> unit 
```

**注册要在程序终止时调用的给定函数。**`at_exit`当程序正常或由于未捕获的异常执行退出或终止时，将调用注册的函数。这些函数以“后进先出”的顺序调用：最近添加的函数`at_exit`首先被调用。

在转换过程中，我注释掉了该行，因为编译器没有将其标记为需要，并且我不希望代码中出现事件。

我检查了`FSharp.PowerPack.Compatibility.PervasivesModule`使用`at_exit`VS 对象浏览器，但没有找到。

我确实找到[了如何运行代码“at_exit”？](http://cs.hubfs.net/topic/None/57968)以及[如何为 F# 应用程序编写退出处理程序？](https://stackoverflow.com/q/3368751/1243762)

OCaml 线是

```
at_exit print_flush 
```

带有 print_flush 签名： `val print_flush : (unit -> unit)`

同样在 OCaml 代码的调试会话期间查看它的使用情况时，它看起来像是`at_exit`在初始化结束时和每次使用对模块的调用结束时都被调用。

任何建议，有关如何执行此操作的提示。这将是我在 F# 中的第一个活动。

编辑

以下是我从 Format 模块中学到的一些内容，应该可以对这个问题有所了解。

Format 模块是一个函数库，用于简单 OCaml 值（例如 int、bool、string）的基本漂亮打印机命令。格式模块有类似的命令`print_string`，但也有一些命令说把下一行放在有界框中，想想新的左右边距集。所以可以写：

```
print_string "Hello" 
```

或者

```
open_box 0; print_string "<<";
open_box 0; print_string "p \/ q ==> r"; close_box();
print_string ">>"; close_box() 
```

诸如`open_box`和之`print_string`类的命令由一个循环处理，该循环解释这些命令，然后决定在当前行上打印还是前进到下一行。命令保存在一个队列中，并且有一个状态记录来保存可变值，例如左右边距。

队列和状态需要准备好，从针对工作 OCaml 代码的测试用例调试来看，这似乎是在模块初始化结束时但在第一次调用 Format 模块中的任何函数之前完成的。队列和状态被清理并通过使用机制为下一组命令再次准备好，该机制`at_exit`识别出对格式模块的初始调用的最后一个匹配帧已被删除，从而触发调用，该调用`at_exit`推出任何剩余的队列中的命令并重新初始化队列和状态。

因此，调用的顺序`print_flush`至关重要，而且似乎超出了 OCaml 文档所述的顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:32:14.453

这应该这样做：

```
module Pervasives =
    open System
    open System.Threading

    //
    let mutable private exitFunctions : (unit -> unit) list = List.empty

    //
    let mutable private exitFunctionsExecutedFlag = 0

    //
    let private tryExecuteExitFunctions _ =
        if Interlocked.CompareExchange (&exitFunctionsExecutedFlag, 1, 0) = 0 then
            // Run the exit functions in last-in-first-out order.
            exitFunctions
            |> List.iter (fun f -> f ())

    // Register handlers for events which fire when the process exits cleanly
    // or due to an exception being thrown.
    do
        AppDomain.CurrentDomain.ProcessExit.Add tryExecuteExitFunctions
        AppDomain.CurrentDomain.UnhandledException.Add tryExecuteExitFunctions

    //
    let at_exit f =
        // TODO : This function should be re-written using atomic operations
        // for thread-safety!
        exitFunctions <- f :: exitFunctions 
```

和一些代码来测试它：

```
open System

// Register a couple of handlers to test our code.
Pervasives.at_exit <| fun () ->
    Console.WriteLine "The first registered function has fired!"

Pervasives.at_exit <| fun () ->
    Console.WriteLine "The second registered function has fired!"
    TimeSpan.FromSeconds 1.0
    |> System.Threading.Thread.Sleep
    Console.WriteLine "Exiting the second registered function!"

Pervasives.at_exit <| fun () ->
    Console.WriteLine "The third registered function has fired!"

// Do some stuff in our program
printfn "blah"
printfn "foo"
printfn "bar"

(* The functions we registered with at_exit should be fired here. *)

// Uncomment this to see that our handlers work even when the
// program crashes due to an unhandled exception.
//failwith "Uh oh!" 
```

# c++ - 当变量是本地变量时是否需要删除？

> ID：12443364
> 
> 赞同：2
> 
> 时间：2012-09-15T23:58:17.480
> 
> 标签：c++

如果我要使用“new”为函数中的本地字符数组分配新内存，是否有必要在函数返回之前使用 delete？

反正函数返回后不会自动删除吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T23:59:35.383

是的，这是必要的：如果您使用`new`or在动态存储中分配某些东西`new[]`，编译器不知道您没有计划在函数返回后传递分配的对象，因此您有责任调用`delete`(or `delete[]`) 来释放您已分配的对象。

您可以使用[`unique_ptr<T>`](http://en.cppreference.com/w/cpp/memory/unique_ptr)来避免`delete`显式调用，但调用将由析构函数`unique_ptr<T>`代表您进行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T00:00:23.093

是的，分配的变量在函数返回时`new` *不会*自动释放，仍然需要删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T00:01:53.583

是的，是的，是的，是的，是的，是的。除非您使用诸如`auto_ptr`or之类的智能指针，否则`boost::shared_ptr`您必须使用它`delete`来释放内存。

因为`new`在堆上分配，不依赖于当前堆栈帧，所以当 C++ 销毁当前堆栈帧时，不会释放内存。如果你使用`new`，你总是必须使用`delete`。时期。

# objective-c - Cocoa Idiomatic First Responder 和键盘事件处理设计

> ID：12443367
> 
> 赞同：2
> 
> 时间：2012-09-15T23:58:45.873
> 
> 标签：objective-c, cocoa, nstextfield, cocoa-design-patterns

我一直在阅读[Cocoa 事件处理指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/Introduction/Introduction.html)以了解如何为我的应用程序处理键盘事件。但是，我不太确定我找到的解决方案是否是解决这个问题的惯用方法，甚至是最好的方法。

我有一个名为的视图和一个名为的`CustomView`控制器`CustomViewController`，其中包含一个`NSTextView`（在 a 内`NSScrollView`）和一个`NSTextField`. 基本上是一个聊天窗口。

我想要的是，即使`NSTextField`没有选择 ，并且用户开始输入，`NSTextField`也应该将其作为第一响应者，并且用户输入的文本应该附加到`NSTextField`.

我提出了一个解决方案（如下），在该解决方案中我`RootWindowController`捕获`keyDown`事件、成为`NSTextField`第一响应者、获取字段编辑器并附加文本。

这是 Cocoa 开发人员采用的惯用方法，还是我缺少的一种更简单的方法？代码如下。谢谢。

**根窗口控制器.m**

```
#import "RootWindowController.h"

@implementation RootWindowController

- (id)initWithWindow:(NSWindow *)window
{
    self = [super initWithWindow:window];
    if (self) {
        self.customViewController = [[CustomViewController alloc] init];

        NSView *contentView = self.window.contentView;
        CGFloat viewWidth = contentView.frame.size.width;
        CGFloat viewHeight = contentView.frame.size.height;

        self.customViewController.customView.textField.frame =
            NSMakeRect(0, 0, viewWidth, 50);
        self.customViewController.customView.scrollView.frame = 
            NSMakeRect(0, 51, viewWidth, viewHeight - 50);
        self.customViewController.customView.textView.frame = 
            NSMakeRect(0, 51, viewWidth, viewHeight - 50);

       self.window.contentView = self.customViewController.customView;
    }

    return self;
}

- (void)keyDown:(NSEvent *)theEvent
{    
    [self.window 
       makeFirstResponder:self.customViewController.customView.textField];

    NSString *characters = theEvent.characters;    
    NSText *fieldEditor = [self.window fieldEditor:YES
       forObject:self.customViewController.customView.textField];
    [fieldEditor setString:
       [NSString stringWithFormat:@"%@%@", fieldEditor.string, characters]];
    [fieldEditor setSelectedRange:NSMakeRange(fieldEditor.string.length, 0)];
    [fieldEditor setNeedsDisplay:YES];
}

@end 
```

**自定义视图控制器.m**

```
#import "CustomViewController.h"

@implementation CustomViewController

- (id)init
{
    self = [super init];
    if (self) {
        self.customView = [[CustomView alloc] initWithFrame:NSZeroRect];
        [self.customView setAutoresizesSubviews:YES];

        self.view = self.customView;
    }
    return self;
}

@end 
```

**自定义视图.m**

```
#import "CustomView.h"

@implementation CustomView

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.scrollView = [[NSScrollView alloc] initWithFrame:NSZeroRect];
        self.textView   = [[NSTextView alloc] initWithFrame:NSZeroRect];
        self.textField  = [[NSTextField alloc] initWithFrame:NSZeroRect];

        [self.textView setAutoresizesSubviews:YES];

        [self.scrollView setDocumentView:self.textView];
        [self.scrollView setHasVerticalScroller:YES];
        [self.scrollView setAutoresizesSubviews:YES];

        [self.textField setStringValue:@"Placeholder Text"];

        [self addSubview:self.scrollView];
        [self addSubview:self.textField];

        [self.textView setNeedsDisplay:YES];
    }
    return self;
}

- (BOOL)acceptsFirstResponder
{
    return YES;
}

@end 
```

# java - Java中没有依赖静态函数定义的强制编译事件

> ID：12443368
> 
> 赞同：2
> 
> 时间：2012-09-15T23:58:46.513
> 
> 标签：java

由于无论定义如何存在，静态函数调用都会被转换为静态调用字节码......即使目标函数和类还不存在，是否有某种方法可以强制静态函数的调用者成功编译？

我希望能够编译对尚不存在的函数的调用。我需要告诉编译器相信我，在运行时，我会在类路径中正确定义它们，所以现在继续编译它。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T00:08:57.353

反思是的，但不是通过常规电话。

该调用需要字符串池中包含方法名称*和参数类型*的条目，因此编译器需要能够决定该方法的签名。

> # [invokestatic <方法规范>](https://www.vmth.ucdavis.edu/incoming/Jasmin/ref--34.html)
> 
> <method-spec> 是一个方法规范。它是由三部分组成的单个标记：类名、方法名和描述符。例如
> 
> ```
>  java/lang/System/exit(I)V 
> ```
> 
> 是名为“java.lang.System”的类中名为“exit”的方法，它具有描述符“(I)V”（即它接受一个整数参数并且不返回结果）。

考虑

```
AClass.aStaticMethod(42) 
```

在不知道任何事情的情况下`AClass`，它可能是对任何一个的调用

1.  `AClass.aStaticMethod(int)`
2.  `AClass.aStaticMethod(int...)`
3.  `AClass.aStaticMethod(long)`
4.  `AClass.aStaticMethod(long...)`
5.  同上`float`_`double`
6.  `AClass.aStaticMethod(Integer)`
7.  `AClass.aStaticMethod(Number)`
8.  `AClass.aStaticMethod(Comparable<? extends Integer>)`
9.  `AClass.aStaticMethod(Object)`
10.  `AClass.aStaticMethod(Serializable)`

可能还有一些我错过的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T02:11:20.833

> ...是否有某种方法可以强制静态函数的调用者成功编译，即使目标函数和类还不存在？

不可以。编译方法调用时，编译器需要检查被调用方法的名称、参数类型、结果类型、异常等。由于您询问的是静态方法，因此此信息只能在一个地方定义......声明静态方法的类。如果您想要静态类型安全，则没有解决方法。

> 我需要告诉编译器在运行时相信我......

没那么简单：

*   您还没有告诉编译器方法签名*应该*是什么。需要告知编译器，因为无法从调用中准确推断出签名。

*   Java 平台被设计成健壮的，“相信我”可能会导致灾难性的运行时故障。

* * *

如果您愿意牺牲编译时类型安全并避开静态类型代码的便利性/简单性/可读性，那么反射是一种选择。但我想不出任何其他可行的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T00:04:16.507

不，但是您可以声明具有针对它们的方法和代码的接口，然后使用[抽象工厂](http://en.wikipedia.org/wiki/Abstract_factory)模式在运行时提供实现。

[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)使用这种方法。

# ruby-on-rails - Rails 控制器在生产中未正确调用

> ID：12443370
> 
> 赞同：1
> 
> 时间：2012-09-15T23:59:01.020
> 
> 标签：ruby-on-rails, controller, routes

当我处于开发模式并尝试 localhost:3000/documents/1 时，视图正确呈现并且控制台显示：

```
Started GET "/documents/1" for 127.0.0.1
Processing by DocumentsController#show as HTML
  Parameters: {"id"=>"1"}
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Document Load (0.3ms)  SELECT "documents".* FROM "documents" WHERE "documents"."id" = $1 LIMIT 1  [["id", "1"]]
  CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Comment Load (0.4ms)  SELECT "comments".* FROM "comments" WHERE "comments"."commentable_id" = 1 AND "comments"."commentable_type" = 'Document' ORDER BY created_at ASC, created_at DESC
  Tag Load (0.4ms)  SELECT "tags".* FROM "tags" INNER JOIN "document_tags" ON "tags"."id" = "document_tags"."tag_id" WHERE "document_tags"."document_id" = 1 AND "tags"."tag_family_id" = 1 LIMIT 1
  Tag Load (0.4ms)  SELECT "tags".* FROM "tags" INNER JOIN "document_tags" ON "tags"."id" = "document_tags"."tag_id" WHERE "document_tags"."document_id" = 1 AND "tags"."tag_family_id" = 2 LIMIT 1
  Tag Load (0.7ms)  SELECT "tags".* FROM "tags" INNER JOIN "document_tags" ON "tags"."id" = "document_tags"."tag_id" WHERE "document_tags"."document_id" = 1 AND "tags"."tag_family_id" = 3 LIMIT 1
  Tag Load (0.5ms)  SELECT "tags".* FROM "tags" INNER JOIN "document_tags" ON "tags"."id" = "document_tags"."tag_id" WHERE "document_tags"."document_id" = 1 AND "tags"."tag_family_id" = 4 LIMIT 1
  Tag Load (0.3ms)  SELECT name FROM "tags" INNER JOIN "document_tags" ON "tags"."id" = "document_tags"."tag_id" WHERE "document_tags"."document_id" = 1 AND "tags"."tag_family_id" = 5
  Tag Load (0.3ms)  SELECT name FROM "tags" INNER JOIN "document_tags" ON "tags"."id" = "document_tags"."tag_id" WHERE "document_tags"."document_id" = 1 AND "tags"."tag_family_id" = 6
  Rating Load (0.4ms)  SELECT "ratings".* FROM "ratings" WHERE "ratings"."user_id" = 1 AND "ratings"."document_id" = 1 LIMIT 1
  Rendered ratings/_show.html.erb (5.7ms)
  Rendered comments/show.html.erb (0.1ms)
  Rendered comments/_form.html.erb (1.6ms)
  Rendered documents/show.html.erb within layouts/application (113.6ms)
  Rendered layouts/_actions_header.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/sidebar/_reciente.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (2.6ms)
Completed 200 OK in 159ms (Views: 138.4ms | ActiveRecord: 4.3ms) 
```

但是当我改为生产时，我得到：

```
 Started GET "/documents/1" for 127.0.0.1
Processing by DocumentsController#show as HTML
  Parameters: {"id"=>"1"}
  User Load (5.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Document Load (1.1ms)  SELECT "documents".* FROM "documents" WHERE "documents"."id" = $1 LIMIT 1  [["id", "1"]]
  Comment Load (1.4ms)  SELECT "comments".* FROM "comments" WHERE "comments"."commentable_id" = 1 AND "comments"."commentable_type" = 'Document' ORDER BY created_at ASC, created_at DESC
  Rendered documents/show.html.erb within layouts/application (7.6ms)
Completed 500 Internal Server Error in 508ms

ActionView::Template::Error (undefined method `username' for nil:NilClass):
    13: <%if(!@tags.blank?) %>
    14:       <label>Palabras Clave:</label> <%=@tags.join(", ")%> <br />
    15: <%end%>
    16: <label>Un aporte de </label><%= link_to @uploader.username, user_path(@uploader)%>
    17: 
    18: <div id="ratings">
    19: <%= render :partial => 'ratings/show', :locals => {:model => @document} %>
  app/views/documents/show.html.erb:16:in `_app_views_documents_show_html_erb__1282539740_2502607180'
  app/controllers/roles_controller.rb:103:in `show' 
```

应用程序跟踪显示：

```
 app/views/documents/show.html.erb:16:in `_app_views_documents_show_html_erb__1282539740_2502607180'
app/controllers/roles_controller.rb:103:in `show' 
```

为什么最后一行显示 roles_controller.rb:103:in `show' ？不应该是documents_controller.rb吗？如果我通过将变量名称更改为不存在的名称来强制开发错误，则错误页面会显示在应用程序跟踪中：

```
 app/views/documents/show.html.erb:16:in `_app_views_documents_show_html_erb___1159141803_2474953060'
app/controllers/documents_controller.rb:29:in `show' 
```

可以看到最后一行显示了documents_controller.rb。

我真的不知道在哪里看。当我在 production.rb 中将 config.cache_classes = true 设置为 false 时，错误消失了。（我不知道这是什么意思）。也许我不知道如何配置路由。我应该发布我的 routes.rb 文件吗？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:39:43.293

好吧，我刚刚发现角色控制器有一个文档控制器的部分定义，当在生产中缓存时，它是第一个被调用的。我只是删除了角色控制器中文档控制器的部分定义，并将所有内容移至正确的控制器。

# ubuntu - EBS 全设备混淆

> ID：12443376
> 
> 赞同：0
> 
> 时间：2012-09-16T00:00:10.317
> 
> 标签：ubuntu, amazon-ec2, amazon-web-services

我有一个 500GB EBS 设备 (/dev/xvdf) 安装到 /vol 并且盒子上的所有数据似乎都正确写入 /vol （见下面的 du 输出）。出于某种原因，/dev/xvda1 已满。

知道这里发生了什么吗？

$ df -h

```
Filesystem      Size  Used Avail Use% Mounted on
/dev/xvda1       32G   30G  8.0K 100% /
udev             34G  8.0K   34G   1% /dev
tmpfs            14G  176K   14G   1% /run
none            5.0M     0  5.0M   0% /run/lock
none             34G     0   34G   0% /run/shm
/dev/xvdb       827G  201M  785G   1% /mnt
/dev/xvdf       500G  145G  356G  29% /vol 
```

$ 杜 -sh *

```
8.7M  bin
18M   boot
8.0K  dev
5.1M  etc
48K   home
0     initrd.img
80M   lib
4.0K  lib64
16K   lost+found
4.0K  media
20K   mnt
4.0K  opt
0     proc
40K   root
176K  run
7.1M  sbin
4.0K  selinux
4.0K  srv
0     sys
4.0K  tmp
414M  usr
356M  var
0     vmlinuz
145G  vol 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:50:51.853

好吧 xvda1 是根目录，如果它显示 30G 已满，那么它必须是 . 您应该尝试使用此命令来检查哪些文件占用了您的空间。

```
sudo du -x / | sort -n | tail -40 
```

# scala - 在scala中为递归类型指定泛型的正确方法

> ID：12443378
> 
> 赞同：1
> 
> 时间：2012-09-16T00:00:21.417
> 
> 标签：scala, generics, higher-kinded-types

当我需要从具有完全相同类型的类结果返回时（不允许变化），我在 scala 中使用递归类型。

在将此模式与其他结构集成时，我遇到了一些问题。

提供的例子：

```
object Test {
  trait Recursive[R <: Recursive[R]]
  case class RecInt(data : Int) extends Recursive[RecInt]
  case class RecFloat(data : Float) extends Recursive[RecFloat]

  final case class ListHolder( rec : List[Recursive[_]] ) {
    def get[R <: Recursive[R]](index : Int) : R = rec(index).asInstanceOf[R]
  }
  val lh = ListHolder(List( RecInt(1), RecFloat(1.5f) ))
  val l0 : RecInt = lh.get(0)

  final case class SingleHolder ( rec : Recursive[_] ) {
    def get[R <: Recursive[R]] : R = rec.asInstanceOf[R]
  }
} 
```

给出错误输出

```
/home/ayvango/Work/scala/test/RecursiveContainer.scala:12: error: type arguments [_$2] do not conform to trait Recursive's type parameter bounds [R <: Main.$anon.Test.Recursive[R]]
  final case class SingleHolder ( rec : Recursive[_] ) {
               ^
one error found 
```

错误描述绝对清楚。

我应该如何指定类型边界以适应要求？

* * *

更新：

我需要隐藏类型信息。我可以只使用长度为 1 的列表来隐藏它。但是应该有等价的

我试过这种形式：

```
final case class SingleHolder ( rec : Recursive[T] forSome {type T <: Recursive[T]} ) {
  def get[R <: Recursive[R]] : R = rec.asInstanceOf[R]
} 
```

但收到此错误：

```
error: scala.tools.nsc.symtab.Types$TypeError: type mismatch;
 found   : Test.Recursive[(some other)_1(in method equals)] where type (some other)_1(in method equals) <: Test.Recursive[_0]
 required: Test.Recursive[_ <: Test.Recursive[_0]]
        at scala.tools.nsc.typechecker.Contexts$Context.error(Contexts.scala:298)
        at scala.tools.nsc.typechecker.Infer$Inferencer.error(Infer.scala:207)
        at scala.tools.nsc.typechecker.Infer$Inferencer.typeError(Infer.scala:217)
        at scala.tools.nsc.typechecker.Infer$Inferencer.typeErrorTree(Infer.scala:232)
        at scala.tools.nsc.typechecker.Typers$Typer.adapt(Typers.scala:936)
        at scala.tools.nsc.typechecker.Typers$Typer.adapt(Typers.scala:719)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4282)
        at scala.tools.nsc.typechecker.Typers$Typer.typedArg(Typers.scala:2191)
        at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$typedArgs$3.apply(Typers.scala:2204)
        at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$typedArgs$3.apply(Typers.scala:2203)
        at scala.Tuple3$Zipped$$anonfun$map$1.apply(Tuple3.scala:66)
        at scala.Tuple3$Zipped$$anonfun$map$1.apply(Tuple3.scala:64)
        at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
        at scala.collection.immutable.List.foreach(List.scala:76)
        at scala.Tuple3$Zipped.map(Tuple3.scala:64)
        at scala.tools.nsc.typechecker.Typers$Typer.typedArgs(Typers.scala:2203)
        at scala.tools.nsc.typechecker.Typers$Typer.doTypedApply(Typers.scala:2423)
        at scala.tools.nsc.typechecker.Typers$Typer.typedApply$1(Typers.scala:3373)
        at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:4106)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4273)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4333)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer$$anonfun$5.apply(ExplicitOuter.scala:400)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer$$anonfun$5.apply(ExplicitOuter.scala:387)
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:233)
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:233)
        at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
        at scala.collection.immutable.List.foreach(List.scala:76)
        at scala.collection.TraversableLike$class.map(TraversableLike.scala:233)
        at scala.collection.immutable.List.map(List.scala:76)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.matchTranslation(ExplicitOuter.scala:387)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:511)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:873)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:873)
        at scala.collection.immutable.List.loop$1(List.scala:148)
        at scala.collection.immutable.List.mapConserve(List.scala:164)
        at scala.tools.nsc.ast.Trees$Transformer.transformTrees(Trees.scala:873)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:837)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:521)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$5.apply(Trees.scala:783)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$5.apply(Trees.scala:781)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:780)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:480)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:891)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:889)
        at scala.collection.immutable.List.loop$1(List.scala:148)
        at scala.collection.immutable.List.mapConserve(List.scala:164)
        at scala.tools.nsc.ast.Trees$Transformer.transformStats(Trees.scala:889)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:797)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:49)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:460)
        at scala.tools.nsc.ast.Trees$Transformer.transformTemplate(Trees.scala:875)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$2.apply(Trees.scala:767)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$2.apply(Trees.scala:766)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:765)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:521)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:891)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:889)
        at scala.collection.immutable.List.loop$1(List.scala:148)
        at scala.collection.immutable.List.mapConserve(List.scala:164)
        at scala.tools.nsc.ast.Trees$Transformer.transformStats(Trees.scala:889)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:797)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:49)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:460)
        at scala.tools.nsc.ast.Trees$Transformer.transformTemplate(Trees.scala:875)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$2.apply(Trees.scala:767)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$2.apply(Trees.scala:766)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:765)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:521)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:891)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:889)
        at scala.collection.immutable.List.loop$1(List.scala:148)
        at scala.collection.immutable.List.mapConserve(List.scala:164)
        at scala.tools.nsc.ast.Trees$Transformer.transformStats(Trees.scala:889)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$1.apply(Trees.scala:761)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$1.apply(Trees.scala:761)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:760)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$2.apply(TypingTransformers.scala:51)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$2.apply(TypingTransformers.scala:51)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:51)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:521)
        at scala.tools.nsc.ast.Trees$Transformer.transformUnit(Trees.scala:892)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.scala$tools$nsc$transform$ExplicitOuter$ExplicitOuterTransformer$$super$transformUnit(ExplicitOuter.scala:529)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer$$anonfun$transformUnit$1.apply(ExplicitOuter.scala:529)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer$$anonfun$transformUnit$1.apply(ExplicitOuter.scala:529)
        at scala.tools.nsc.symtab.SymbolTable.atPhase(SymbolTable.scala:95)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transformUnit(ExplicitOuter.scala:529)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transformUnit(ExplicitOuter.scala:318)
        at scala.tools.nsc.transform.Transform$Phase.apply(Transform.scala:30)
        at scala.tools.nsc.Global$GlobalPhase.applyPhase(Global.scala:329)
        at scala.tools.nsc.Global$GlobalPhase$$anonfun$run$1.apply(Global.scala:297)
        at scala.tools.nsc.Global$GlobalPhase$$anonfun$run$1.apply(Global.scala:297)
        at scala.collection.Iterator$class.foreach(Iterator.scala:772)
        at scala.collection.mutable.ListBuffer$$anon$1.foreach(ListBuffer.scala:318)
        at scala.tools.nsc.Global$GlobalPhase.run(Global.scala:297)
        at scala.tools.nsc.transform.ExplicitOuter$Phase.run(ExplicitOuter.scala:539)
        at scala.tools.nsc.Global$Run.compileSources(Global.scala:953)
        at scala.tools.nsc.Global$Run.compile(Global.scala:1041)
        at scala.tools.nsc.Main$.process(Main.scala:106)
        at scala.tools.nsc.Main$.main(Main.scala:123)
        at scala.tools.nsc.Main.main(Main.scala)

Exception in thread "main" scala.tools.nsc.symtab.Types$TypeError: type mismatch;
 found   : Test.Recursive[(some other)_1(in method equals)] where type (some other)_1(in method equals) <: Test.Recursive[_0]
 required: Test.Recursive[_ <: Test.Recursive[_0]]
        at scala.tools.nsc.typechecker.Contexts$Context.error(Contexts.scala:298)
        at scala.tools.nsc.typechecker.Infer$Inferencer.error(Infer.scala:207)
        at scala.tools.nsc.typechecker.Infer$Inferencer.typeError(Infer.scala:217)
        at scala.tools.nsc.typechecker.Infer$Inferencer.typeErrorTree(Infer.scala:232)
        at scala.tools.nsc.typechecker.Typers$Typer.adapt(Typers.scala:936)
        at scala.tools.nsc.typechecker.Typers$Typer.adapt(Typers.scala:719)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4282)
        at scala.tools.nsc.typechecker.Typers$Typer.typedArg(Typers.scala:2191)
        at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$typedArgs$3.apply(Typers.scala:2204)
        at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$typedArgs$3.apply(Typers.scala:2203)
        at scala.Tuple3$Zipped$$anonfun$map$1.apply(Tuple3.scala:66)
        at scala.Tuple3$Zipped$$anonfun$map$1.apply(Tuple3.scala:64)
        at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
        at scala.collection.immutable.List.foreach(List.scala:76)
        at scala.Tuple3$Zipped.map(Tuple3.scala:64)
        at scala.tools.nsc.typechecker.Typers$Typer.typedArgs(Typers.scala:2203)
        at scala.tools.nsc.typechecker.Typers$Typer.doTypedApply(Typers.scala:2423)
        at scala.tools.nsc.typechecker.Typers$Typer.typedApply$1(Typers.scala:3373)
        at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:4106)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4273)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4333)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer$$anonfun$5.apply(ExplicitOuter.scala:400)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer$$anonfun$5.apply(ExplicitOuter.scala:387)
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:233)
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:233)
        at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
        at scala.collection.immutable.List.foreach(List.scala:76)
        at scala.collection.TraversableLike$class.map(TraversableLike.scala:233)
        at scala.collection.immutable.List.map(List.scala:76)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.matchTranslation(ExplicitOuter.scala:387)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:511)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:873)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:873)
        at scala.collection.immutable.List.loop$1(List.scala:148)
        at scala.collection.immutable.List.mapConserve(List.scala:164)
        at scala.tools.nsc.ast.Trees$Transformer.transformTrees(Trees.scala:873)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:837)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:521)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$5.apply(Trees.scala:783)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$5.apply(Trees.scala:781)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:780)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:480)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:891)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:889)
        at scala.collection.immutable.List.loop$1(List.scala:148)
        at scala.collection.immutable.List.mapConserve(List.scala:164)
        at scala.tools.nsc.ast.Trees$Transformer.transformStats(Trees.scala:889)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:797)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:49)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:460)
        at scala.tools.nsc.ast.Trees$Transformer.transformTemplate(Trees.scala:875)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$2.apply(Trees.scala:767)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$2.apply(Trees.scala:766)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:765)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:521)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:891)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:889)
        at scala.collection.immutable.List.loop$1(List.scala:148)
        at scala.collection.immutable.List.mapConserve(List.scala:164)
        at scala.tools.nsc.ast.Trees$Transformer.transformStats(Trees.scala:889)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:797)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:49)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:460)
        at scala.tools.nsc.ast.Trees$Transformer.transformTemplate(Trees.scala:875)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$2.apply(Trees.scala:767)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$2.apply(Trees.scala:766)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:765)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:521)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:891)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:889)
        at scala.collection.immutable.List.loop$1(List.scala:148)
        at scala.collection.immutable.List.mapConserve(List.scala:164)
        at scala.tools.nsc.ast.Trees$Transformer.transformStats(Trees.scala:889)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$1.apply(Trees.scala:761)
        at scala.tools.nsc.ast.Trees$Transformer$$anonfun$transform$1.apply(Trees.scala:761)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.ast.Trees$Transformer.transform(Trees.scala:760)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$2.apply(TypingTransformers.scala:51)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$2.apply(TypingTransformers.scala:51)
        at scala.tools.nsc.ast.Trees$Transformer.atOwner(Trees.scala:899)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:51)
        at scala.tools.nsc.transform.ExplicitOuter$OuterPathTransformer.transform(ExplicitOuter.scala:257)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transform(ExplicitOuter.scala:521)
        at scala.tools.nsc.ast.Trees$Transformer.transformUnit(Trees.scala:892)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.scala$tools$nsc$transform$ExplicitOuter$ExplicitOuterTransformer$$super$transformUnit(ExplicitOuter.scala:529)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer$$anonfun$transformUnit$1.apply(ExplicitOuter.scala:529)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer$$anonfun$transformUnit$1.apply(ExplicitOuter.scala:529)
        at scala.tools.nsc.symtab.SymbolTable.atPhase(SymbolTable.scala:95)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transformUnit(ExplicitOuter.scala:529)
        at scala.tools.nsc.transform.ExplicitOuter$ExplicitOuterTransformer.transformUnit(ExplicitOuter.scala:318)
        at scala.tools.nsc.transform.Transform$Phase.apply(Transform.scala:30)
        at scala.tools.nsc.Global$GlobalPhase.applyPhase(Global.scala:329)
        at scala.tools.nsc.Global$GlobalPhase$$anonfun$run$1.apply(Global.scala:297)
        at scala.tools.nsc.Global$GlobalPhase$$anonfun$run$1.apply(Global.scala:297)
        at scala.collection.Iterator$class.foreach(Iterator.scala:772)
        at scala.collection.mutable.ListBuffer$$anon$1.foreach(ListBuffer.scala:318)
        at scala.tools.nsc.Global$GlobalPhase.run(Global.scala:297)
        at scala.tools.nsc.transform.ExplicitOuter$Phase.run(ExplicitOuter.scala:539)
        at scala.tools.nsc.Global$Run.compileSources(Global.scala:953)
        at scala.tools.nsc.Global$Run.compile(Global.scala:1041)
        at scala.tools.nsc.Main$.process(Main.scala:106)
        at scala.tools.nsc.Main$.main(Main.scala:123)
        at scala.tools.nsc.Main.main(Main.scala) 
```

我很好奇如何模拟与列表相同的行为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:48:03.577

主题的主体是有限的，我在这里发布下一次关于我的搜索的更新：

* * *

更新2：

现在我使用这个耻辱结构：

```
final case class TypeErasure[T](data : T)

final case class SingleHolder ( rec : TypeErasure[Recursive[_]] ) {
  def get[R <: Recursive[R]] : R = rec.data.asInstanceOf[R]
} 
```

# ruby-on-rails - RoR：提交一个表单就是创建两个对象

> ID：12443380
> 
> 赞同：1
> 
> 时间：2012-09-16T00:00:34.700
> 
> 标签：ruby-on-rails, ruby

我正在尝试创建包含所有现有设施的索引页面。一个链接，当您单击它时，会显示一个用于创建新机构的表单。

```
Controller:
  def index
    @stablishments = Stablishment.all
    @new_stablishment = Stablishment.new()
  end

  def create
    @stablishment = Stablishment.new
    @stablishment.update_attributes(params[:stablishment])
  end

Index:
Index

<div id="create_stablishment">
  <%= link_to "Crear Nuevo Establecimiento", '#' %>
</div>

<div id="stablishment_form_fields" style="display:none;">
  <%= form_for(@new_stablishment, :remote => true) do |f| %>
    <%= render :partial => 'stablishments/form_fields', :locals => {f: f} %>
  <% end %>
</div>

<div id="stablishments_list">
  <% @stablishments.each_with_index do |stablishment, i| %>
    <%= render stablishment, :count => i %>
  <% end %>
</div>

<div id="mensaje"></div>

form_fields:
<div class="form_fields">
  <%= f.label "Nombre" %>
  <%= f.text_field :name %>
</div>
<div class="form_fields">
  <%= f.label "Ciudad" %>
  <%= f.text_field :city %>
</div>
<div class="form_fields">
  <%= f.label "Estado" %>
  <%= f.text_field :state %>
</div>
<div class="form_fields">
  <%= f.label "Direccion" %>
  <%= f.text_field :address %>
</div>
<div class="form_fields">
  <%= f.label "Email" %>
  <%= f.text_field :mail %>
</div>
<div class="form_fields">
  <%= f.label "Sitio Web" %>
  <%= f.text_field :web_site %>
</div>
<div class="form_fields">
  <%= f.label "Tipo" %>
  <%= f.text_field :stablishment_type %>
</div>
<div class="form_fields">
  <%= f.submit %>
</div>
create.js:
$("#stablishment_form_fields").hide();
$("#mensaje").html("se ha creado"); 
```

当我单击创建设施时，它正在创建对象。日志：

```
Started POST "/stablishments" for 127.0.0.1 at 2012-09-15 20:47:05 -0300
Processing by StablishmentsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"VDf47PuVfNH7UPLEyVqtY4n+2DgmCKT3Jvx2wljMtZY=", "stablishment"=>{"name"=>"6", "city"=>"", "state"=>"", "address"=>"", "mail"=>"", "web_site"=>"", "stablishment_type"=>""}, "commit"=>"Create Stablishment"}
   (0.2ms)  BEGIN
  SQL (0.4ms)  INSERT INTO `stablishments` (`address`, `city`, `created_at`, `mail`, `name`, `phone`, `stablishment_type`, `state`, `updated_at`, `web_site`) VALUES ('', NULL, '2012-09-15 23:47:05', '', '6', NULL, NULL, NULL, '2012-09-15 23:47:05', '')
   (119.6ms)  COMMIT
  Rendered stablishments/create.js.erb (0.8ms)
Completed 200 OK in 176ms (Views: 7.4ms | ActiveRecord: 120.2ms)

Started POST "/stablishments" for 127.0.0.1 at 2012-09-15 20:47:05 -0300
Processing by StablishmentsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"VDf47PuVfNH7UPLEyVqtY4n+2DgmCKT3Jvx2wljMtZY=", "stablishment"=>{"name"=>"6", "city"=>"", "state"=>"", "address"=>"", "mail"=>"", "web_site"=>"", "stablishment_type"=>""}, "commit"=>"Create Stablishment"}
   (1.0ms)  BEGIN
  SQL (0.4ms)  INSERT INTO `stablishments` (`address`, `city`, `created_at`, `mail`, `name`, `phone`, `stablishment_type`, `state`, `updated_at`, `web_site`) VALUES ('', NULL, '2012-09-15 23:47:05', '', '6', NULL, NULL, NULL, '2012-09-15 23:47:05', '')
   (58.9ms)  COMMIT
  Rendered stablishments/create.js.erb (0.1ms)
Completed 200 OK in 76ms (Views: 10.3ms | ActiveRecord: 60.3ms) 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:45:38.020

而不是实例化`@stablishment`然后调用`update_attributes`它，只需使用：

```
def create
  @stablishment = Stablishment.new(params[:stablishment]).save
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:53:58.680

用户方法创建代替：

```
def create
  @stablishment = Stablishment.create(params[:stablishment])
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T03:56:30.007

似乎发送了两个请求。问题可能来自 Javascript，因为您使用的是远程表单。

```
form_for(@new_stablishment, :remote => true) 
```

AJAX 帖子将由 rails.js 或 jquery_ujs.js 自动设置和调用。所以我们不需要手动处理它。

因此，要解决此问题，您可以在浏览器中显示控制台日志（我想在 Firefox 中使用 Firebug）。如果有两个请求，则表示您的 javascript 代码有问题。

# objective-c - 无法在名称为“SecondViewController”的捆绑包中加载 NIB

> ID：12443385
> 
> 赞同：0
> 
> 时间：2012-09-16T00:02:09.897
> 
> 标签：objective-c, xcode, pushviewcontroller

我正在尝试将 Navigator Controller 推送到另一个视图控制器，但我不断收到错误消息，提示无法加载 nib 包名称。这是我正在使用的代码：

```
SecondViewController *vc1 = [[SecondViewController alloc]
      initWithNibName:NSStringFromClass([SecondViewController class]) bundle:Nil];
[self.navigationController pushViewController:vc1 animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:03:49.753

您必须传递 nib 文件的名称，而不是类名：

```
// Assuming there is a properly set up SecondViewController.xib in your project.
SecondViewController *vc1 = [[SecondViewController alloc] 
                            initWithNibName:@"SecondViewController" bundle:nil];
[self.navigationController pushViewController:vc1 animated:YES]; 
```

**编辑：**

如果你使用 Storyboards，你必须以不同的方式加载你的 GUI：

```
UIStoryboard *sboard = [UIStoryboard storyboardWithName:@"StoryboardFileName" 
                                                 bundle:nil];
SecondViewController *vc1 = [sboard instantiateInitialViewController]; 
```

# devise - 集成测试omniauth-linkedin并设计，得到Nil响应

> ID：12443387
> 
> 赞同：1
> 
> 时间：2012-09-16T00:02:41.203
> 
> 标签：devise, cucumber, omniauth

我正在尝试按照[这些说明](https://github.com/intridea/omniauth/wiki/Integration-Testing)为 devise + omniauth-linkedin 开发集成测试，但响应为零。该应用程序正在开发环境中运行，但测试未通过。

测试用例：

```
feature 'signup with linkedin' do

  before do 
    OmniAuth.config.test_mode = true
    OmniAuth.config.mock_auth[:linkedin] = OmniAuth::AuthHash.new({
      :provider => 'linkedin',
      :uid => '12345'
    })
  end

  scenario 'valid' do
    visit "/users/auth/linkedin"
    json = ActiveSupport::JSON.decode(response.body)

    json["uid"].should == '12345'
    json["provider"].should == 'linkedin'
  end

end 
```

错误信息：

```
Failure/Error: json = ActiveSupport::JSON.decode(response.body)
     NoMethodError:
       undefined method `body' for nil:NilClass 
```

有人可以帮忙吗？

如果你想看一下代码，该项目是开源的，你可以在这里找到它：[StartupDealbook](https://github.com/lucianot/dealbook/commit/a3345de19426542b606045bf76719cf0d54b5d80)

# android - 如何在内部视图上接受 onSingleTapUp() 而在外部视图上接受 onFling()？

> ID：12443390
> 
> 赞同：4
> 
> 时间：2012-09-16T00:03:06.833
> 
> 标签：android, gesture, ontouchlistener

我有一个覆盖整个屏幕的视图（比方说），以及只覆盖其中一部分的`ParentView`子内部视图。`ChildView`我要做出`ChildView`回应`onSingleTapUp()`，同时`ParentView`回应`onFling()`。我正在尝试通过将一个和一个附加`SimpleOnGestureListener`到.`ChildView``SimpleOnGestureListener``ParentView`

要接受`onSingleTapUp()`from `ChildView`，它的侦听`onDown()`器必须返回 true。但是一旦我这样做了，与之相关的听众就`ParentView`不会再听到任何运动事件了，因为它是由`ChildView`的听众采取的。即使`ChildView`'`onFling()`返回 false，事件也不会流向`ParentView`' 侦听器。

**如何让父视图的侦听器捕捉到轻击手势，而子视图的侦听器捕捉轻击手势？**

我认为不需要任何源代码来解释这种情况，但这里有一个片段可以设置我的`ChildView`监听器。

```
ChildView.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View view, MotionEvent motionEvent) {
        return singleTapGestureDetector.onTouchEvent(motionEvent);
    }
}); 
```

一种解决方法可能是同时处理`ParentView`and`ChildView`的侦听器，`onFling()`而只有`ChildView`'s listener handle `onSingleTapUp()`，但在这种情况下，投掷将无法跨越`ChildView`（例如从子外部开始，然后在子内部结束），我相信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T06:15:23.183

我不喜欢我的解决方案，但我找到了一种方法来做到这一点。希望其他人将来会发布更好的答案，或者至少我的解决方法对其他人有用。

正如我在问题中所描述的，问题在于手势监听器的工作方式。对于要捕获`onSingleTapUp()`事件的子视图，您在 上返回 true `onDown()`。但是一旦你这样做了，即使你的子视图`onTouch()`声明它不再对该事件感兴趣，后续的一系列事件也不会转到父视图。如果您在其手势检测器返回 false 时在子视图中强制调用`onTouch()`父`onTouch()`视图，是的，父视图的 onFling() 将被调用，但第一个`MouseEvent`参数将为 NULL，因为它已被子视图的`onTouch()`.

我一定遗漏了一些东西，因为这似乎是非常基本的手势检测场景。无论如何，我找不到以合理的方式做到这一点的方法。

所以，我的解决方法是将 TouchListenerService 设置为单例。

**子视图和父视图都有这一行**：

```
view.setOnTouchListener(TouchListenerService.Instance()); 
```

TouchListenerService 像这样开始：

```
public class TouchListenerService
    extends GestureDetector.SimpleOnGestureListener
    implements View.OnTouchListener {

    // some code to implement singleton

    public SingleTapUpHandler SingleTapUpHandler;
    public FlingHandler FlingHandler;

    private View _touchingView;

    GestureDetector gestureDetector;

    @Override
    public boolean onTouch(View view, MotionEvent motionEvent) {
        if (gestureDetector == null)
            gestureDetector =  new GestureDetector(_touchListenerService);

        _touchingView = view;
        boolean result = gestureDetector.onTouchEvent(motionEvent);
        _touchingView = null;
        return result;
    }
    // and some more code 
```

由于是同一个事件处理器，所以父视图`onFling()`可以成功捕获事件，而子视图可以设置`SingleTapUpHandler`为处理点击事件。

# php - 从链接 '($_SERVER['REQUEST_URI'])) 中删除符号。

> ID：12443405
> 
> 赞同：1
> 
> 时间：2012-09-16T00:04:52.593
> 
> 标签：php

当前使用此代码：

```
str_replace(".php","",basename($_SERVER['REQUEST_URI'])) 
```

它输出如下：

Rusko%20-%20Skanker.mp3&sort=1

我需要它来显示：Rusko - Skanker

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T00:07:18.553

你可以使用`urldecode()`：

```
urldecode($_SERVER['REQUEST_URI']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:08:57.803

假设您有以下网址：

script.php?file=Rusko%20-%20Sanker.mp3&sort=1

然后，要获得您正在寻找的结果，您需要：

```
echo htmlentities( urldecode( str_replace( '.mp3', '', $_GET['file'] ) ), ENT_QUOTES ); 
```

其他答案并不完整*，*因为它们将在输出中包含整个 URL。您似乎只在寻找一个查询字符串参数。

**注意：** htmlentities() 在这种情况下对于保护您的网站和用户非常重要。在页面上打印任何用户提交的数据而不首先对其进行适当的清理允许代码注入。

# ruby-on-rails - 在 Ruby on Rails 中创建具有多个值的简单数组

> ID：12443409
> 
> 赞同：0
> 
> 时间：2012-09-16T00:06:17.213
> 
> 标签：ruby-on-rails, arrays, loops, multidimensional-array

在我使用过的每种语言中，数组一直是我的失败，但我确实需要在 Rails 中创建多个项目的动态数组（注意 - 这些都与模型无关）。

简而言之，数组的每个元素都应该包含 3 个值 - 一个单词、它的语言和翻译成英文。例如，这是我想做的：

```
myArray = Array.new 
```

然后我想将一些值推送到数组中（注意 - 实际内容是从其他地方获取的 - 尽管不是模型 - 并且需要通过循环添加，而不是像这里那样硬编码）：

```
myArray[0] = [["bonjour"], ["French"], ["hello"]]

myArray[1] = [["goddag"], ["Danish"], ["good day"]]

myArray[2] = [["Stuhl"], ["German"], ["chair"]] 
```

我想创建一个循环来在一行中列出每个项目，如下所示：

```
<ul>
<li>bonjour is French for hello</li>
<li>goddag is Danish for good day</li>
<li>Stuhl is German for chair</li>
</ul> 
```

但是，我正在努力解决（a）如何将多个值推送到单个数组元素以及（b）我将如何循环并显示结果。

不幸的是，我并没有走得太远。我似乎无法弄清楚如何将多个值推送到单个数组元素（通常发生的是 [] 括号包含在输出中，我显然不想要 - 所以它可能是一个符号错误）。

我应该改用哈希吗？

目前，我有三个单独的数组，这是我一直在做的，但我不是特别喜欢 - 即一个数组保存原始单词，一个数组保存语言，最后一个数组保存拿着翻译。虽然它有效，但我确信这是一种更好的方法——如果我能解决的话！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:00:37.237

好的，假设您在 CSV 文件中有您想要的字词：

```
# words.csv
bonjour,French,hello
goddag,Danish,good day
stuhl,German,chair 
```

现在在我们的程序中，我们可以执行以下操作：

```
words = []
File.open('words.csv').each do |line|
  # chomp removes the newline at the end of the line
  # split(',') will split the line on commas and return an array of the values
  # We then push the array of values onto our words array
  words.push(line.chomp.split(','))
end 
```

执行此代码后，words 数组中有三个项目，每个项目都是一个基于我们文件的数组。

```
words[0]  # => ["bonjour", "French", "hello"]
words[1]  # => ["goddag", "Danish", "good day"]
words[2]  # => ["stuhl", "German", "chair"] 
```

现在我们要显示这些项目。

```
puts "<ul>"
words.each do |word|
  # word is an array, word[0], word[1] and word[2] are available
  puts "<li>#{word[0]} is #{word[1]} for #{word[2]}</li>"
end
puts "</ul>" 
```

这给出了以下输出：

```
<ul>
<li>bonjour is French for hello</li>
<li>goddag is Danish for good day</li>
<li>stuhl is German for chair</li>
</ul> 
```

此外，您没有询问它，但您可以使用以下命令访问给定数组的一部分：

```
words[0][1]  # => "French" 
```

这告诉 ruby​​ 你想查看 words 数组的第一个（Ruby 数组是从零开始的）元素。Ruby 找到那个元素 (["bonjour", "French", "hello"]) 并看到它也是一个数组。然后，您要求输入该数组的第二项 ([1])，Ruby 返回字符串“French”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:29:20.800

你的意思是这样的？

```
myArray.map{|s|"<li>#{[s[0],'is',s[1],'for',s[2]].join(" ")}</li>"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:51:28.693

谢谢你们的帮助！我设法根据您的建议找到解决方案

为了其他偶然发现此问题的人的利益，这是我省略的代码。注意：我使用了三个变量，称为文本、语言和翻译，但我想您可以将它们替换为具有三个独立元素的单个数组，正如 Jason 上面所建议的那样。

在控制器中（通过循环添加内容）：

```
#loop start

my_array.push(["#{text}", "#{language}", "#{translation}"]) 

#loop end 
```

在视图中：

```
<ul>

<% my_array.each do |item| %>

<li><%= item[0] # 0 is the original text %> is 
<%= item[1] # 1 is the language %> for 
<%= item[2] # 2 is the translation %></li>

<% end %>

</ul> 
```

再次感谢！

# html - 为什么我的页脚与页面底部的内容重叠？

> ID：12443413
> 
> 赞同：3
> 
> 时间：2012-09-16T00:07:01.940
> 
> 标签：html, css

有问题的网站：[christianselig.com](http://christianselig.com)

在页面底部，我有一条消息，上面写着“就像你看到的那样？我们应该谈谈。” 但由于某种原因，与其他任何页面不同，此页面与页脚重叠。

CSS：

```
.message {
    margin: 150px 0;
    text-align: center;
} 
```

HTML：

```
 <div class="message">
                <span class="first-part">Like what you see?</span>
                <span class="second-part"><a href="contact.html">We should talk.</a></span>
            </div>

            <div class="footer-wrapper">
                <div class="footer">
                    <p class="copyright">Copyright &copy; 2012 Christian Selig</p>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="#work" class="scroll">Work</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
            </div> 
```

正如你所看到的，我以为我给`.message`CSS 150px 的顶部和底部边距，但它似乎并没有在底部开始。我可以给它填充，但这似乎不是一个合适的解决方案，因为我不希望元素跨越那么大的空间，我只想让它向下推其他东西。

潜在的理解：边距使它远离内容，但那里必须有内容。因为它是页面上的最后一个元素，它没有什么可以推开的，所以填充是必要的吗？如果这是真的，有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:17:27.620

填充对我很有用：

```
.message {
    padding: 150px 0;
    text-align: center;
} 
```

[http://fiddle.jshell.net/3EYdq/2/show/](http://fiddle.jshell.net/3EYdq/2/show/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:31:07.350

一切都有些破损，因为您没有清除 .personal-info 上的浮动

你可以使用这个 clearfix

```
.cf:before,
.cf:after {
    content: " ";
    display: table;
}

.cf:after {
    clear: both;
}

.cf {
    *zoom: 1;
} 
```

然后将其应用于`<div class="personal-info cf">`

此外，最好使用[粘性页脚](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)而不是绝对位置。正如 yckart 所说，填充也是一种很好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T00:16:24.877

`position: absolute;`从您的中删除`div.footer-wrapper`，然后调整您的边距`div.message`

```
.footer-wrapper {
    background: -moz-linear-gradient(center top , #F7F7F7 0%, #D6D6D6 100%) repeat scroll 0 0 transparent;
    border-top: 1px solid #CCCCCC;
    bottom: 0;
    height: 16px;
    overflow: hidden;
    padding: 8px 0 5px;
    width: 100%;
} 
```

你不需要填充`.message`，这里的错误是绝对定位`.footer-wrapper`div 不需要（据我所见？）

编辑：正如另一个答案中提到的，清理有点混乱。添加

```
.wrapper {
    padding-bottom: 1px;
} 
```

如果您想要快速修复似乎会有所帮助，但适当的清理会更好。

此外，您可能希望在页面顶部添加一个文档类型，例如：

```
<!doctype html> 
```

当您的网站在 IE 中以怪异模式呈现时，会出现更多显示错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T00:30:35.977

这是因为您的页脚绝对位于底部，放置在发生在那里的任何东西上。

只需在底部添加一个 50px 的填充，`.message`如果会在其下方腾出一个额外的空间。

```
.message {
    margin: 150px 0;
    padding-bottom: 50px;
    text-align: center;
} 
```

# vector - 初始化 Direct3D 向量

> ID：12443415
> 
> 赞同：2
> 
> 时间：2012-09-16T00:07:25.433
> 
> 标签：vector, direct3d9, initializing

我正在使用它来初始化 Directx 向量。

```
LPD3DXVECTOR3 sat_map[] = 
{
    { -1.5f,  0.0f,  1.5f},
    {  1.5f, -1.5f,  1.5f},
}; 
```

即使我尝试不做数组，我总是得到同样的错误：

错误 C2440：“正在初始化”：无法从“浮点”转换为“LPD3DXVECTOR3”

我试着做双打，但我遇到了类似的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:11:58.170

`LPD3DXVECTOR3`是指向 a 的指针*，*`D3DXVECTOR3`您不能使用结构初始化指针（只能使用指向结构的指针）。因此，你只想

```
D3DXVECTOR3 sat_map[] = 
{
    { -1.5f,  0.0f,  1.5f},
    {  1.5f, -1.5f,  1.5f},
}; 
```

或者

```
D3DXVECTOR3 v1 = { -1.5f,  0.0f,  1.5f};
D3DXVECTOR3 v2 = {  1.5f, -1.5f,  1.5f};
LPD3DXVECTOR3 sat_map[] = { &v1, &v2 }; 
```

# php - 你把 beginTransaction(); 在 `try` 块之前或之内

> ID：12443426
> 
> 赞同：6
> 
> 时间：2012-09-16T00:09:13.677
> 
> 标签：php, transactions

我应该做

```
$dbh->beginTransaction();
try{ 
```

或者

```
try{
  $dbh->beginTransaction(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T00:14:22.277

没关系，它会运行代码而不管它的位置。但是你想把它放在`rollback()`中，如果你把它放在外面`catch`，它是不可读的。`begin`

我会在里面投票`try`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-12T09:06:13.953

这可能并不重要。但是，最好`beginTransaction` **将**`try`. 当`beginTransaction`失败时，它不应该执行`rollback`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T00:11:34.903

将其添加到`try`/`catch`块内，这样您就可以捕获任何内容`PDOException`：

```
try {
    $dbh->beginTransaction();    // start transaction
    $stmt = $dbh->query($query); // run your query
    $dbh->commit();              // commit
} catch(PDOException $ex) {      // if exception, catch it
    $dbh->rollBack();            // rollback query
    echo $ex->getMessage();      // echo exception message
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T00:15:49.250

在这种情况下，这无关紧要，因为 beginTransaction 将在失败时返回 false。如果它抛出异常，你会希望它在嵌套的 try 块内（否则你会在捕获异常后执行 rollBack()，因为没有事务启动而失败）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T00:12:37.183

如果您想捕获 beginTranscation 方法应该抛出的可能错误，请选择第二个。

# objective-c - Xcode 应用程序卡在横向模式

> ID：12443433
> 
> 赞同：3
> 
> 时间：2012-09-16T00:10:55.033
> 
> 标签：objective-c, ios, xcode, cocoa

我最近才开始学习使用 Xcode 和 Objective-C。像往常一样，我决定从学习如何创建 Hello, World 应用程序开始。出于某种原因，即使我正在为纵向模式设计一切，它仍然在模拟器和我的 iPad 2 上显示横向模式。 ![在 Xcode 中](../Images/6cb0e3ea8a88a1c3ad77648b2a58f6f0.png) 在 Xcode ![在 iPad 上的模拟器中](../Images/c70b010d599d266e28f49dc04512be9c.png) 中，在 iPad 上的模拟器中

这是视图控制器的代码，如果有帮助的话。

```
#import "LCViewController.h"

@interface LCViewController ()

@end

@implementation LCViewController
@synthesize helloButton;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setHelloButton:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

    - (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)showAlert:(id)sender {
    UIAlertView* alert = [[UIAlertView alloc] initWithTitle: @"Hello!"
                                                    message:@"Hello, world!"
                                                   delegate:nil
                                          cancelButtonTitle:@"Close"
                                          otherButtonTitles:nil];
    [alert show];

    [helloButton setTitle:@"I was clicked!" forState:UIControlStateNormal];
}
@end 
```

编辑：红色背景 ![在此处输入图像描述](../Images/b19c874a19db918bdef46780c23fe52d.png) ![在此处输入图像描述](../Images/8a846039bfee8a06a4b65290f05103ec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T01:16:33.000

支持的方向被意外设置为横向。在支持的方向部分或 plist 文件中的项目主屏幕上设置方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T00:34:23.100

在属性检查器中查看为“模式”选择了什么声音。

# java - 在客户端已经打开时处理给定 ServerSocketChannel 重新启动的连接

> ID：12443440
> 
> 赞同：0
> 
> 时间：2012-09-16T00:12:41.523
> 
> 标签：java, client, serversocket, socketchannel

当用户单击“连接”按钮时，我的 SwingWorker`doInBackground()`会创建（并注册`OP_ACCEPT`）一个新的。`ServerSocketChannel`

当一个客户`isAcceptable()`时，`SwingWorker`注册`SocketChannel`与`OP_READ`。

当用户单击“断开连接”按钮时，`SwingWorker`closes()`ServerSocketChannel`和`selector()`. 但是，客户端仍然是打开的。

问题：如果用户再次单击“连接”，在我看来，上述过程会重复，只是客户端仍处于`OP_READ`模式并且没有被`ServerSocketChannel`.

有没有办法克服这个问题？重新启动是否`ServerSocketChannel`需要客户端也重新启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T04:43:31.743

> ServerSocketChannel 重启是否需要客户端也重启？

不会。现有客户端保持连接。他们不会因为您关闭服务器套接字而经历另一个连接阶段。

与我上面的评论相反，断开连接按钮应该关闭服务器套接字，而不是客户端套接字。但是贴错了标签。按钮应该是“开始”和“停止”，或者“开始收听”和“停止收听”。进行连接的是客户端。

# makefile - MakeFile 错误参数太多

> ID：12443441
> 
> 赞同：1
> 
> 时间：2012-09-16T00:12:48.977
> 
> 标签：makefile

我正在做一个简单的制作文件，但我收到错误太多参数。我不知道它在说什么

这是我的代码

```
project1: *.cpp *.h
    g++ -o main *.cpp 
```

这是终端所说的

```
unixapps1:project1> project1: *.cpp *.h
project1:: Too many arguments. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:25:41.617

我认为问题有两个方面：

1.  您的目录中有大量的源文件 - 以至于名称的长度对于您的 shell 来说太长了。

2.  您错误地执行了`makefile`它，就好像它是一个 shell 脚本一样。`sh makefile`如果您运行并且该`project1:`行是其中的第一行（非空白，非注释），则错误消息是您会得到的。

您需要运行`make`or （如果 makefile 名为`project1.mk`）`make -f project1.mk`。

如果我猜错了（我希望我猜错了），那么您需要澄清问题中的提示和命令行。通常，您使用`$`shell 提示符（for`sh`和 relatives；`%`如果您使用 C shell 或其亲属之一，或者`#`如果您以 root 身份运行 - 如果您正在编程，则不应该这样做）。

# c - 接受 int 并转换为数组的函数向后插入值？

> ID：12443444
> 
> 赞同：4
> 
> 时间：2012-09-16T00:12:53.333
> 
> 标签：c

所以我有一个函数，它接受一个数字，让我们说 123 用于测试目的，并通过将每个数字插入数组中的一个位置将其转换为数组。我的问题是：它倒退了。因此，在这种情况下，123 将打印为 321。关于如何更改它的任何想法？

```
int i = 0;

while (number) {
    array[i] = number % 10;
    number /= 10;
    printf("%llu", array[i]);
    i++;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T00:22:51.850

那是因为您要取数字和 10 之间除法的余数，所以您要取最后一位数字插入数组的第一个位置，依此类推。

您可以创建一个递归函数以您想要的方式填充数组。尝试这样的事情：

```
void
fillArray (int array[], int *i, int number) {
    if (number < 10 ) {
       array[*i] = number;
       *i = *i +1;
    } else {
       fillArray (array, i, number/10);
       array[*i] = number%10;
       *i = *i +1;
    }
} 
```

最后，在 i 中，您将获得数组的大小。你应该这样调用函数：

```
int array[100];
int i = 0;
int n = 123;
fillArray (array,&i,n); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T00:34:09.200

您始终可以在适当的位置反转数组，因为您知道转换完成后它的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T00:26:54.777

我对如何改变它的想法：使用标准功能`itoa()`。如果这不是一个选项，您至少应该阅读`itoa()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T00:50:27.770

你也可以做一些其他的方式。取给定数字的 log10(n)。

`enter code here`整数nd，f，i = 0；nd=log10(n) f=pow(10,nd);

```
 while(n)
             {
                       array[i++]=n/f;
                       n=n%f;
             } 
```

# jquery - 可排序（'toArray'）或可排序（'序列化'）

> ID：12443448
> 
> 赞同：5
> 
> 时间：2012-09-16T00:14:17.800
> 
> 标签：jquery, jquery-ui

我在 Stackoverflow 上阅读了一些问题，这些问题建议使用 serialize() 和 toArray 和 sortable() 来准备要插入数据库的数据。但是，当我尝试将它们传递给 sortable('toArray') 或 sortable('serialize') 时，它会破坏代码，即列表不再可排序。这是一个小提琴

[http://jsfiddle.net/mjmitche/sTzCS/16/](http://jsfiddle.net/mjmitche/sTzCS/16/)

有谁知道我做错了什么？

```
<ul id="sortlist">
        <li id="Vancouver">Vancouver</li>
        <li id="Toronto">Toronto</li>
        <li id="Montreal">Montreal</li>
        <li id="Ottawa">Ottawa</li>
        <li id="Calgary">Calgary</li>
        <li id="Edmonton">Edmonton</li>
        <li id="Winnipeg">Winnipeg</li>
     </ul>​ 
```

JavaScript

```
// also tried $('#sortlist').sortable('serialize);

var result = $('#sortlist').sortable("toArray");

alert(result); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T00:17:13.850

这是怎么做的

```
$("#sortlist").sortable({stop: function(event, ui) {
    result = $("#sortlist").sortable("toArray");
     alert(result.length);

}}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-09T18:29:41.867

将 li 的 ID 从“Toronto”更改为“city_Toronto”等。

```
<ul id="sortlist">
        <li id="city_Vancouver">Vancouver</li>
        <li id="city_Toronto">Toronto</li>
        <li id="city_Montreal">Montreal</li>
        <li id="city_Ottawa">Ottawa</li>
        <li id="city_Calgary">Calgary</li>
        <li id="city_Edmonton">Edmonton</li>
        <li id="city_Winnipeg">Winnipeg</li>
     </ul> 
```

从[jqueryui 文档](http://api.jqueryui.com/sortable/#method-serialize)：

> 默认情况下，serialize 通过以“setname_number”格式查看每个项目的 id 来工作，它会输出一个像“setname[]=number&setname[]=number”这样的哈希值

在 jquery 代码中添加了一个额外的 .sortable() 以使 ul 可排序，如[https://stackoverflow.com/a/1959893中所述](https://stackoverflow.com/a/1959893)

```
var result = $('#sortlist').sortable().sortable("serialize"); 
```

（分叉到[http://jsfiddle.net/s8eJU/](http://jsfiddle.net/s8eJU/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-18T09:06:54.843

首先，你应该初始化可排序的，

```
$('#sortlist').sortable(); 
```

然后调用序列化。

```
var result = $('#sortlist').sortable("toArray");
alert(result); 
```

[提琴手](http://jsfiddle.net/sTzCS/74/)

# mysql - phpmyadmin 中不存在可见表

> ID：12443450
> 
> 赞同：2
> 
> 时间：2012-09-16T00:14:18.943
> 
> 标签：mysql, phpmyadmin, mysql-workbench

在 mysqlworkbench 中，我创建了一个视图，将其提交到数据库，但我不再需要它。因此，我删除了 mysql 工作台中的视图，然后更新了数据库。

我认为一切都很好，但是在 phpmyadmin 中，它说该表仍然存在。更重要的是，它一直在使用。

我试图在 phpmyadmin 中删除表格，但是当我尝试删除表格时，它提供了一条错误消息：

1051 - 未知表...向我表明该表不存在。

但它仍然显示在数据库中，并且在整理下，它表示该表正在“使用中”。

这里有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:52:57.387

问题解决了。

看起来好像您无法通过正常方式从数据库中删除视图。以下为我解决了这个问题。

```
DROP VIEW IF EXISTS viewName; 
```

# java - JUnit/Mockito 测试因奇怪的原因而失败

> ID：12443452
> 
> 赞同：0
> 
> 时间：2012-09-16T00:14:23.857
> 
> 标签：java, junit, mockito

我有一个非常简单的方法，我正在尝试进行单元测试：

```
public class MyAntTask extends org.apache.tools.ant.Task {
    public void execute() {
        fire();
    }

    public void fire() {
        // Do stuff
    }
} 
```

我只想写一个单元测试来确认调用`execute()`总是调用`fire()`，所以我写了这个：

```
@Test
public void executeCallsFire() {
    //GIVEN
    MyAntTask myTask = Mockito.mock(MyAntTask.class);

    // Configure the mock to throw an exception if the fire() method
    // is called.
    Mockito.doThrow(new RuntimeException("fired")).when(myTask).fire();

    // WHEN
    try {
        // Execute the execute() method.
        myTask.execute();

        // We should never get here; HOWEVER this is the fail() that's
        // being executed by JUnit and causing the test to fail.
        Assert.fail();
    }
    catch(Exception exc) {
        // THEN
        // The fire() method should have been called.
        if(!exc.getMessage().equals("fired"))
            Assert.fail();
    }
} 
```

我猜（而且我绝不是专家）Mockito 通常不能模拟返回的方法`void`，但这是一种解决方法。你基本上说“用一个包装我的对象，每当一个特定的方法即将被执行时`Mock`，它总是返回一个特定的”。`RuntimeException`因此，`fire()`Mockito 并没有实际执行，而是看到它即将执行并抛出异常。执行验证？查看。

它没有通过，而是在`Assert.fail()`调用`myTask.execute()`.

对于我的生活，我无法弄清楚为什么。这是 JUnit 给我的失败的巨大堆栈跟踪的前 10 行左右：

```
java.lang.AssertionError
    at org.junit.Assert.fail(Assert.java:92)
    at org.junit.Assert.fail(Assert.java:100)
    at net.myproj.ant.tasks.MyAntTaskUnitTest.executeCallsFire(MyAntTaskUnitTest.java:32)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616) 
```

**StackOverflow 的 Mockito 大师们，**这里有什么想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T02:10:17.387

因为 myTask 是一个模拟对象，所以根本不会调用真正的对象。要调用真实对象，请使用间谍。

您可以使用 verify 测试是否调用了方法，因此不需要异常。

```
public void executeCallsFire() {
    MyAntTask myTask = Mockito.spy(new MyAntTask());

    myTask.execute();

    Mockito.verify(myTask).fire();
} 
```

想要模拟您正在测试的对象似乎并不正确。通常最好设计测试，以便您验证对单独对象的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:31:49.343

我在这里看到更多设计问题：

1.  为什么你需要一个 line 方法并且它们都是 public 的？
2.  模拟用于模拟依赖关系，而不是用于测试中的类
3.  如果您将火灾（名称不清楚）设为私有。你不应该测试你班级的私人行为

# python - python输入错误检查

> ID：12443457
> 
> 赞同：0
> 
> 时间：2012-09-16T00:15:09.977
> 
> 标签：python, input, while-loop

您好，我试图让我的输入只允许整数，一旦超过 10，它就会显示错误，任何帮助将不胜感激。

```
square_ct = input("Enter an integer from 1-5 the number of squares to draw: ")
triangle_ct = input("Enter an integer from 1-5 the number of triangles to draw: ")

while square_count(input) > 10:
    print ("Error!")
    square_count=input() #the statement reappears

while triangle_count(input) > 10:
    print ("Error!")
    triangle_count=input() #the statement reappears 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T00:18:24.093

我首选的技术是使用`while True`带中断的循环：

```
while True:
    square_ct = input("Enter an integer from 1-5 the number of squares to draw: ")
    if square_ct <= 10: break
    print "Error"

# use square_ct as normal 
```

或者，在 Python 3 上：

```
while True:
    square_ct = int(input("Enter an integer from 1-5 the number of squares to draw: "))
    if square_ct <= 10: break
    print("Error")

# use square_ct as normal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-24T01:56:32.360

我选择了[nneonneo](http://user:1204143)提供的路径，并且非常接近我想要的。最终结果如下。

我感谢大家的意见。上一次我做任何有点像编程的事情是在 IBM 360 上的 Fortran 穿孔卡上。

我很抱歉提出这样的基本问题，但我真的很努力。

有效但实际上并没有准确指出发生了哪个错误的代码。我将尝试弄清楚如何将输入语句中的字符串转换为浮点数，看看是否有余数（可能是模数？），以便用户更好地提示出了什么问题。

```
import math
from datetime import datetime
import time

num = 0
start = 0
end = 0

try:
   num = int(input('Enter a positive whole number: '))
   if (num >= 0 and num <= 2147483647):
       start = datetime.now()
       print("The factorial of ", num, " is : ")
       print(math.factorial(int(num)))
       end = datetime.now()
   else:
      print('Number must be between 0 and 2147483647 are allowed.')
      print(f"Time taken in (hh:mm:ss.ms) is {end - start}")
except ValueError:
    print('Text or decimal numbers are not allowed. Please enter a whole number between 0 and 2147483647') 
```

我有很多东西要学，因为我很无聊...

诺曼

# javascript - jQuery没有删除绝对定位的div？

> ID：12443458
> 
> 赞同：0
> 
> 时间：2012-09-16T00:15:15.423
> 
> 标签：javascript, jquery

我有以下代码将隐藏`div`您单击的链接的父级。's 相对定位时`div`没有问题，但绝对定位时不会移除。

该脚本还将每个元素的状态保存到`localStorage`，并且该错误仅在您第一次尝试关闭其中一个 div 时发生。我的意思是，如果你显示三个 div，比如 div 1、2 和 3，然后尝试关闭最顶部的 div，它不会关闭。如果您重新加载页面，并尝试关闭重新加载页面之前位于顶部的 div 3，它将关闭。

要发布的代码有点多，[所以这里是 jsFiddle](http://jsfiddle.net/charlescarver/jgctY/1/)。但这是后代的代码：

```
function loadWidgets() {
    $(".base").each(function () {
        var id = $(this).attr("id");
        var counter = localStorage.getItem("counter-" + id) || 0;
        var active = localStorage.getItem(id + "-active") || "";
        $.each(active.split(" "), function (k, v) {
            var s = v.split(",");
            if (s.length != 2) {
                return;
            }
            var newElement = $("#" + s[0]).clone(true, true);
            newElement.attr("id", s[1]).attr("class", "drag " + id).data("id", id).appendTo("body");
        });
    });
}

function closeWidget() {
    var id = $(this).parent().attr("id").match(/[a-zA-Z]+/g);
    $(this).parent().remove();
    var active = [];
    $($("." + id).not(".base")).each(function () {
        active.push(id + "," + $(this).attr("id"));
    });
    active = active.join(" ");
    localStorage.setItem(id + "-active", active);
}

function cloneWidget() {
    var id = $(this).attr("href").match(/[a-zA-Z]+/g);
    var key = "counter-" + id;
    var counter = localStorage.getItem(key) || 0;
    counter++;
    var newElement = $("#" + id).clone(true, true);
    newElement.attr("id", id + counter).attr("class", "drag " + id).appendTo("body");
    var active = [];
    $($("." + id).not(".base")).each(function () {
        active.push(id + ',' + $(this).attr("id"));
    });
    active = active.join(" ");
    localStorage.setItem(id + "-active", active);
    localStorage.setItem(key, counter);
}
loadWidgets();
$(".nav a").click(cloneWidget);
$(".close").click(closeWidget);​ 
```

和 HTML：

```
<div class="base" id="one" style="background-color:blue">
    <a class="close" href="#">Close</a>
    <input class="input" id="test"/>
    <textarea class="textarea" id="test2"></textarea>

</div>
<div class="base" id="two" style="background-color:red">
    <a class="close" href="#">Close</a>
</div>
<div class="base" id="three" style="background-color:green">
    <a class="close" href="#">Close</a>
</div>
<div class="nav">
    <a href="#one">One</a>
    <a href="#two">Two</a>
    <a href="#three">three</a>
</div>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:38:42.827

默认情况下， jQuery[`clone`](http://api.jquery.com/clone/)不复制事件：

> `.clone( [withDataAndEvents] [, deepWithDataAndEvents] )`
> [...]
> 通常，绑定到原始元素的任何事件处理程序都不会复制到克隆。可选`withDataAndEvents`参数允许我们更改此行为，并改为制作所有事件处理程序的副本，绑定到元素的新副本。

而且由于您的事件绑定到您正在克隆的内容中，因此您也希望`deepWithDataAndEvents`是真实的：

```
var newElement = $("#" + s[0]).clone(true, true); 
```

更正小提琴：http: [//jsfiddle.net/ambiguous/Jdutt/](http://jsfiddle.net/ambiguous/Jdutt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:40:24.490

您创建了一个新的小部件，但没有将事件处理程序分配给*Close*链接。

取下一行并将其放在**cloneWidget**函数的**末尾：**

 **```
$("#" + id + counter + " a.close").click(closeWidget); 
```**

# cocoa - 在 10.6.8 上的可可应用程序停靠图块上查找拖放图像/文本的原点 (URL)

> ID：12443459
> 
> 赞同：2
> 
> 时间：2012-09-16T00:15:31.987
> 
> 标签：cocoa, google-chrome-extension, drag-and-drop, dock

我刚刚开始在 OSX 10.6.8 上用 cocoa 编写应用程序。这主要归功于我在这里找到的线程。对于我将要解释的微妙功能，我到处寻找，并且确实尽了最大努力，但没有成功。情况如下：

*   有一个浏览器（现在是chrome，但该解决方案至少应该适用于FF和Safari）

*   有我的 chrome 扩展

*   有我的桌面应用程序

*   可以将文本/图像拖到我的桌面应用程序上，然后按来源组织这些项目。

    对于来自 finder 的文件/文本（Web 浏览器除外），使用文件路径标记文件是所需的行为，对于文本我只是将剪贴板作为源。现在的问题是，从 Web 浏览器中拖出的文件/文本应该以从中拖出的网站作为源。文件有一个简单的修复方法：我有一个扩展，它使用最后一个活动 url 设置一个缓冲区，以便我需要检查何时拖动文件是它是否来自 chrome 缓存以用上述内容标记它缓冲。我的问题是文本。处理文本拖动的方式是[使用我在 .plist 中声明的服务，](http://lethain.com/cocoa-drag-and-drop-text-into-the-dock-icon/)在 SO 上有一个[类似的未回答问题](https://stackoverflow.com/questions/7554170/mac-osx-cocoa-setting-up-app-to-recieve-dragged-items-from-another-app-to-w)和一种[似乎可以工作的技术](https://stackoverflow.com/questions/10203402/drag-and-drop-is-it-possible-to-get-the-url)但它仅适用于 10.7。我还找到了一个链接，其中有人设法使用[http://www.mail-archive.com/cocoa-dev@lists.apple.com/msg17452.html获取拖到他的应用程序上的 iTunes 歌曲的 url](http://www.mail-archive.com/cocoa-dev@lists.apple.com/msg17452.html)

是否有解决方案可以查看仅使用可可处理的拖动图像/文本的 URL？我看到的唯一其他选择是使用扩展程序将 javascript 代码注入所有网页以处理“dragenter”事件，并通过自定义协议将被拖动的内容与源 URL 一起发送到桌面应用程序。我不太热衷于脚本注入，而且我也感觉到这条路有些复杂。

无论如何感谢您的帮助！

巧克力酱。

# php - 如何在我的 PHP 代码中添加参数

> ID：12443460
> 
> 赞同：0
> 
> 时间：2012-09-16T00:15:36.353
> 
> 标签：php, wordpress

我得到了这条简单的线：`get_comments( 'post_id='.$newpost->ID.'');`基于[http://codex.wordpress.org/Function_Reference/get_comments](http://codex.wordpress.org/Function_Reference/get_comments)

它工作正常，但我想以不同的顺序订购帖子。我已经尝试了很多编写它的方法，但它似乎从来没有工作过。

我将如何添加这些参数之一？：

> $orderby (string) (可选) 设置用于排序评论的字段。默认值：comment_date_gmt $order (string) (optional) 如何排序
> 
> $orderby。有效值：'ASC' - 升序（从最低到最高）。'DESC' - 降序（从最高到最低）。默认值：DESC

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:19:08.930

用你的变量创建一个数组：

```
get_comments( array('orderby' => 'ID', 'order' => 'ASC', 'post_id' => $newpost->ID) ); 
```

# php - PHP字符串按字母范围排序无法执行单个字符比较

> ID：12443461
> 
> 赞同：0
> 
> 时间：2012-09-16T00:15:39.910
> 
> 标签：php, if-statement, foreach, comparison, comparison-operators

我正在努力在 foreach 语句中输出公司列表。为了比较每个公司的第一个字母，我将替换每个公司的第一个字符。这些需要通过 if 比较器操作发送，以查看它是否是每个初始字符范围的第一次出现。var_dump 显示 srt_cmp 已找到预期的值。当我在多个组合的 if 比较中使用该值时，if 语句将不会执行。

```
 <?php
  $stringCompanyListing = '<!-- beginning of business listing -->'."\n";
  $countCompanies=0;
  $haveStrungAD = "";
  $haveStrungEI = "";
  $haveStrungJO = "";
  $haveStrungPU = "";
  $haveStrungVZ = "";

  foreach ($files as $file){
    $company = new SimpleXMLElement($file, 0, true); 
    $COMPANYKEY[$countCompanies] = basename($file, '.xml');
  if ($countCompanies >= 1){
    $currentCompany = substr($COMPANYKEY[$countCompanies],0, 1);
    $previousCompany = substr(($COMPANYKEY[($countCompanies-1)]),0, 1);
  $checkForNavigation = strcmp($previousCompany, $currentCompany);
// var_dump at this point show intended values such as "A" and "-1"

  if ($haveStrungAD == ""){
    if ($currentCompany == range("A", "D")){
      if ($checkForNavigation <= -1){
        $stringCompanyListing .= '    <div class="categoryHeading"><a name="atod"></a>A-D</div>'; 
        $haveStrungAD = "done";
      }
        }
          }
  if ($haveStrungEI == ""){
    if ($currentCompany == range("E", "I")){
      if ($checkForNavigation <= -1){
        $stringCompanyListing .= '    <div class="categoryHeading"><a name="etoi"></a>E-I</div>'; 
        $haveStrungEI = "done";
      }
    }
  }
// more if comparisons omitted
}
$countCompanies++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T00:53:15.567

由于您在数组 ($COMPANYKEY) 中拥有所有公司名称，您不能只使用 usort () 或 uasort() 对数组进行排序（取决于您是否需要将键保持附加到值）。然后循环遍历数组并将公司分配给适当的数组。例如，

```
uasort($COMPANYKEY, function ($a, $b) {
return $a < $b;
});
foreach ($COMPANYKEY AS $comp)
{
$char = substr($comp, 0, 1); //get first letter
if ($char <= 'd')
    $atod[] = $comp;
elseif ($char > 'd' && $char <= 'm')
    $etom[] = $comp;    
} 
```

您可以编写附加条件以将其加载到公司中的附加数组中，也可以在 $char 上使用 switch 语句并编写一堆案例。无论哪种方式，这都应该加载每个。

此外，如果您正在使用您的代码，则无需使用 == 运算符并使用 inarray() 函数。range 返回一个值数组，因此您需要检查您的值是否是该数组，而不是等于数组。

希望这可以帮助。

# ruby-on-rails - 如何销毁关系的所有子元素

> ID：12443465
> 
> 赞同：0
> 
> 时间：2012-09-16T00:16:31.683
> 
> 标签：ruby-on-rails, activerecord

我有

```
class List < ActiveRecord::Base
  has_many :list_items

class ListItem < ActiveRecord::Base
  belongs_to :list 
```

我想选择某种类型的所有列表，然后删除所有关联的 list_items。我试过地图和其他一些东西，但卡住了。

```
List.where('list_type_id=4').? 
```

我知道这应该是单行的，但是？

谢谢

** 编辑 #1**

```
SyntaxError: (irb):94: syntax error, unexpected tCONSTANT, expecting ')'
...ListItem.where('list_id = ?' List.where('list_type_id=4').id)....
...                               ^
(irb):94: syntax error, unexpected ')', expecting $end
...ist.where('list_type_id=4').id).destroy_all
...                               ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:25:05.967

如果您想删除列表以及所有关联项目

```
class List < ActiveRecord::Base
  has_many :list_items, :dependent => :destroy 
```

这会将关联设置为在删除列表时自动销毁所有 list_items。

```
List.where('list_type_id=4').destroy 
```

如果您只想删除与该列表关联的 ListItems

```
ListItem.where('list_id = ?', List.find_by_list_type_id(4).id).destroy_all 
```

或者

```
List.find_by_list_type_id(4).list_items.destroy_all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T00:31:26.240

试试这个：

```
class List < ActiveRecord::Base
  has_many :list_items, :dependent => :delete_all

List.where('list_type_id=4').list_items.clear 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T04:09:06.280

为了后代，

```
List.where('list_type_id=4').map(&:list_items).flatten.each {|li| li.delete } 
```

但是，是的，感觉应该有一种 Railsier 方法来做到这一点。

# c# - 设置继承以避免未来代码冗余的最佳方法是什么？

> ID：12443473
> 
> 赞同：2
> 
> 时间：2012-09-16T00:18:09.670
> 
> 标签：c#, inheritance

我有 7 节课：

```
public class Entity
{
   public int Id { get; set; }     
}

public class Product : ????
{
    // Contructor
    public Product()
    {
        Photos = new HashSet<PhotoSource>();
        ProductFeatures = new HashSet<ProductFeature>();
    }

    // Primitives
    public string ProductName { get; set; }
    public string InternalSKU { get; set; }
    public string ModelNumber { get; set; } 
    public string Description { get; set; }
    public int QtyPerUnit { get; set; }
    public double UnitPrice { get; set; }
    public int UnitsInStock { get; set; }
    public int UnitsOnOrder { get; set; }
    public int? ReOrderLevel { get; set; }
    public string Warranty { get; set; }

    // Foreign Keys
    public int SubCategoryID { get; set; }
    public int VendorId { get; set; }

    // Navigation Properties
    // Classes
    [ForeignKey("SubCategoryID")]
    public virtual SubCategory SubCategory { get; set; }
    [ForeignKey("VendorId")]
    public virtual Vendor Vendor { get; set; }

    // Collections
    public virtual ICollection<PhotoSource> Photos { get; set; }
    public virtual ICollection<ProductFeature> ProductFeatures { get; set; }
}

public class ProductSeasonal : ????
{
    // Primitives
    public int? OffSeasonDiscount { get; set; }
    public DateTime SeasonStartDate { get; set; }
    public DateTime SeasonEndDate { get; set; }
    public int? QtyLimitedTo { get; set; }
}

public class ProductDiscontinued : ????
{
    // Primitives
    public DateTime DiscontinuedDate { get; set; }
    public int DiscontinuedDisount { get; set; }
}

public class Supply : ????
{
    // Primitives
    public String UnitMeasurement { get; set; }
}

public class Part : ????
{
    // Primitives
    public String UnitMeasurement { get; set; }
}

 public class Vehicle : ????
{
    // Constructor
    public Vehicle()
    {
        ExteriorFeatures = new HashSet<ProductFeature>();
        InteriorFeatures = new HashSet<ProductFeature>();
        SafetyFeatures = new HashSet<ProductFeature>();
    }

    // Primitives
    public string VIN { get; set; }
    public int Year { get; set; }
    public int CylinderSize { get; set; }
    public double EngineSize { get; set; }
    public string StyleType { get; set; } //Truck, SUV, Sedan, Convertible, etc
    public string TransmissionType { get; set; }
    public string InteriorColor { get; set; } 
    public string ExteriorColor { get; set; }

    // Foreign Keys
    public virtual int MakeId { get; set; }

    // Navigation Properties
    // Classes
    [ForeignKey("MakeId")]
    public virtual VehicleMake Make { get; set; }

    // Collections
    public virtual ICollection<ProductFeature> InteriorFeatures { get; set; }
    public virtual ICollection<ProductFeature> ExteriorFeatures { get; set; }
    public virtual ICollection<ProductFeature> SafetyFeatures { get; set; }
} 
```

什么是设置继承的最佳方式，以便车辆、零件、用品和任何未来的销售项目类 [例如。服装] 可以毫不费力地添加多余的属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:42:11.650

最好的开始方法是写下当前感兴趣的每个项目的所有属性。

因此，任何产品都会有价格和一些唯一的 id（sku 编号），可能还有条形码和图像。

所以，这些可能是一些父类的开始。

当您浏览其他产品时，您可能会发现共性。

如果您需要开始销售牛仔裤，请查看可能需要哪些其他服装，因为您可能希望列出材料或款式。

但是，不要试图设计你的类，以便它们能够处理任何事情。

为您现在拥有的东西进行设计，但使其足够灵活，以便您可以在需要时添加新属性。例如，现在我不会添加 qrcode 图像，但以后可能会很常见，可以添加。

您的问题实际上是针对类设计还是最终针对数据库设计？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:45:01.207

我决定将季节性和停产合并到产品中，并让产品从实体继承。非常感谢评论/文字警察。我没有意识到我们在这个网站上的编辑比回答助手还多。所以，这就是我将如何进行：

```
 public Product()
    {
        OrderDetails = new HashSet<OrderDetail>();
        Photos = new HashSet<PhotoSource>();
        ProductFeatures = new HashSet<ProductFeature>();
    }

    // Primitives
    public string ProductName { get; set; }
    public string InternalSKU { get; set; }
    public string ModelNumber { get; set; } 
    public string Description { get; set; }
    public int QtyPerUnit { get; set; }
    public double UnitPrice { get; set; }
    public int UnitsInStock { get; set; }
    public int UnitsOnOrder { get; set; }
    public int? ReOrderLevel { get; set; }
    public string Warranty { get; set; }
    // Primitives for Disontinues
    public DateTime? DiscontinuedDate { get; set; }
    public int? DiscontinuedDisount { get; set; }
    // Primitives for Seasonal
    public int? OffSeasonDiscount { get; set; }
    public DateTime? SeasonStartDate { get; set; }
    public DateTime? SeasonEndDate { get; set; }
    public int? QtyLimitedTo { get; set; }

    // Foreign Keys
    public int SubCategoryID { get; set; }
    public int VendorId { get; set; }

    // Navigation Properties
    // Classes
    [ForeignKey("SubCategoryID")]
    public virtual SubCategory SubCategory { get; set; }
    [ForeignKey("VendorId")]
    public virtual Vendor Vendor { get; set; }

    // Collections
    public ICollection<OrderDetail> OrderDetails { get; set; }
    public virtual ICollection<PhotoSource> Photos { get; set; }
    public virtual ICollection<ProductFeature> ProductFeatures { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T07:40:30.230

Some times "has a relationship" (composition) are easier to maintain than "is a relationship"(inheritance) as the application grows. Looks like this is one of those scenarios. You can set it up so that each of the entities has a product class. And you can use inversion of control to inject product into these entities.

This link explains the rationale in this article.

[http://www.artima.com/designtechniques/compoinh4.html](http://www.artima.com/designtechniques/compoinh4.html)

# objective-c - 试图将整数转换为 NSNumber - 取而代之的是奇怪的数字

> ID：12443476
> 
> 赞同：1
> 
> 时间：2012-09-16T00:18:55.350
> 
> 标签：objective-c, ios, xcode

“rowNumber” 的记录如下：**79050688**。"rowNumberAsInt" 被记录为**16**以下的数字。如何正确转换我的 int？

```
-(int)randomNumberGenerator{

int rowNumberAsInt;
NSNumber *rowNumber;

randomNumberPool = [[NSMutableArray alloc]initWithCapacity:16];

while (![randomNumberPool containsObject:rowNumber]) {
    rowNumberAsInt = (arc4random() % 16);
    rowNumber = [NSNumber numberWithInt:rowNumberAsInt];
    [randomNumberPool addObject:rowNumber];     
}

NSLog(@"random rowNumber: %d ", rowNumber);
NSLog(@"random rowNumberAsInt: %d ", rowNumberAsInt);
return rowNumberAsInt; 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T00:27:59.103

你不能像 int 一样打印 NSNumber，因为它不是 int，而是包装 int 的对象。请改用 %@ 格式说明符：

```
NSLog(@"random rowNumber: %@ ", rowNumber); 
```

或者使用 intValue 方法：

```
NSLog(@"random rowNumber: %d ", [rowNumber intValue]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T00:24:32.437

`NSString`提供`%@`作为允许打印对象的格式。你应该改变这一行：

```
NSLog(@"random rowNumber: %d ", rowNumber); 
```

至

```
NSLog(@"random rowNumber: %@ ", rowNumber); 
```

第一行将打印`NSNumber`对象的内存地址。在实践中，这可能是一个随机数，但不是您想要的方式。;-)

# php - 有没有办法使用内部重定向和 apache_notes 从 Perl 与 PHP 进行通信？

> ID：12443479
> 
> 赞同：1
> 
> 时间：2012-09-16T00:19:11.863
> 
> 标签：php, perl, apache

我的主应用程序是使用 PHP 编写的，但我使用 Perl 脚本来处理请求，并且我想使用 apache_notes 将信息传递给 PHP 应用程序。我宁愿不使用查询参数。

这是我找到的关于 apache 笔记的文档

*   [用于 PHP](http://us3.php.net/manual/en/function.apache-note.php)
*   [对于 Perl](http://perl.apache.org/docs/2.0/api/Apache2/RequestRec.html#C_notes_)

在 PHP 文档中，有一个如何使用 PHP->Perl 中的 apache 注释的示例。有没有人有一个如何从 Perl-> PHP 去的例子，或者建议另一种从 Perl 到 PHP 安全通信而不必通过查询参数的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:42:58.633

您可以使用`$r->subprocess_env("foo", $value)`，它在 PHP 中将显示为`$_SERVER["REDIRECT_foo"]`.

# c# - 除了网站链接之外，是否有类似 folderBrowserDialog 的控件？

> ID：12443483
> 
> 赞同：3
> 
> 时间：2012-09-16T00:19:43.510
> 
> 标签：c#, .net, winforms, hyperlink

在这种情况下，我选择了一个目录，并在我的 label4 中看到了我选择的目录名称：

```
private void button2_Click(object sender, EventArgs e)
        {
            this.folderBrowserDialog1.Description = "Select the directory that you are want to use as default and please verify if the chosen directory is accessible";
            if (folderBrowserDialog1.ShowDialog() == DialogResult.OK)
            {
                string message = "Are you sure you want to select this directory ?";
                string caption = "Operation cancelled";
                MessageBoxButtons buttons = MessageBoxButtons.YesNo;
                DialogResult result;
                result = MessageBox.Show(message, caption, buttons);

                if (result == System.Windows.Forms.DialogResult.Yes)
                {
                    mainUrl = folderBrowserDialog1.SelectedPath;
                    label4.Text = mainUrl;
                }
            }
        } 
```

但我想要一些相同的想法，但要输入一个网站链接地址。例如，当用户单击按钮时，它将打开一些文本框或其他东西。然后，用户将输入一个网站地址或粘贴一个链接并单击它会要求确认，然后在 label4 中拍摄。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:08:07.490

如果我明白你在问什么，那么解决方案很简单。我假设当用户在文本框中输入 URL 时，您希望在程序上显示网页。我不太确定它与 fileBrowser 有什么关系，考虑到有数以百万计的网站，文件浏览器意义上的“网站浏览器”不能很好地工作。

无论如何，我相信您的要求可以通过将 webBrowser 控件的 Url 属性分配给标签或文本框的文本或您拥有 URL 的任何内容来实现。

```
webBrowser1.Url = label4.text 
```

如果这不是您要的，那我很茫然。

# windows - 通过腻子的 Emacs

> ID：12443484
> 
> 赞同：3
> 
> 时间：2012-09-16T00:20:12.500
> 
> 标签：windows, emacs, split, putty

所以我通过执行命令“emacs -nw FILENAME”通过putty打开了emacs，其中emacs打开了所需的文件。我在emacs中拆分屏幕以打开不同的文件，方法是在emacs中执行命令“Cx 2”以水平拆分窗口，以便我一次可以查看两个窗口。

我的问题是，现在我可以通过分屏查看相邻的两个文件，如何编辑另一个文件？（我不能用鼠标点击另一个文件（另一个拆分窗口）来编辑它，因为我在通过putty使用emacs时只能使用键盘命令）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T16:03:52.183

你可能想试试 Emacs 教程，它会解释这些事情。另外，我相信在 putty 下点击鼠标是可能的：尝试`M-x xterm-mouse-mode`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T00:25:06.010

使用 Cx o, `other-window`.

请参阅[http://www.gnu.org/software/emacs/manual/html_node/emacs/Other-Window.html](http://www.gnu.org/software/emacs/manual/html_node/emacs/Other-Window.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T22:59:07.923

将另一个窗口用作终端的另一个提示是运行：Mx term

# linux - 为 Linux 2.6.30 DMA API 映射设备内存

> ID：12443485
> 
> 赞同：3
> 
> 时间：2012-09-16T00:20:17.773
> 
> 标签：linux, arm, dma, memory-mapping

我一直在努力解决这个问题，非常感谢一些帮助。我想使用 At91sam9g45 的内部 SRAM（垫脚石 - 启动后不使用）来加快一些密集计算，但无法满足以下所有条件：

1.  内存可以从用户空间访问。这很容易使用 user space`mmap()`然后 kernel `remap_pfn_range()`。使用返回的指针，我的用户空间程序可以读取/写入 SRAM。

2.  使用内核 DMA API 调用`dma_async_memcpy_buf_to_buf()`使用 DMA 执行 memcpy。在我的基本驱动程序中，我想调用此操作将数据从 DDR（使用 kmalloc() 分配）复制到 SRAM 缓冲区中。

所以我的问题是我有用户空间和物理地址，但没有内核空间 DMA API 友好映射。

我尝试使用 ioremap 并使用提供给`iotable_init()`. 这些似乎都不会导致内核虚拟地址可以与类似的东西一起使用`virt_to_bus`（它适用于 kmalloc 地址，我认为在 DMA API 中使用）。

有办法，这只是使用物理地址手动触发 DMA，但我想尝试解决这个问题。我一直在阅读 LDD3 和谷歌搜索，但我看不到任何将非 kmalloc 内存用于 DMA API 的示例（PCI 总线除外）。

# r - 使用 R Reshape 在长数据框中使用变量列的两个子集进行计算

> ID：12443486
> 
> 赞同：2
> 
> 时间：2012-09-16T00:20:24.017
> 
> 标签：r, reshape

我有一个数据框，其中包含两组数据，我需要将它们相乘以进行计算。一个简单的版本是

```
sample = data.frame(apples=c(10,20,25,30,40,NA,NA,15))
sample$oranges = c(25,60,90,86,10,67,45,10)
sample$oats = c(65,75,85,95,105,115,125,135)
sample$eggs = c(23,22,21,20,19,18,17,16)
sample$consumer =c('john','mark','luke','paul','peter','thomas','matthew','brian')
sample$mealtime = c('breakfast','lunch','lunch','snack','lunch','breakfast','snack','dinner')

s1 = melt(sample,id.vars=c(5,6),measure.vars=c(1:4)) 
```

我想要做的是类似的事情

```
s2 = dcast(s1, mealtime ~ ., function(x) (x[variable == 'oranges'] * x[variable =='apples'])/sum(x[variable == 'apples']) 
```

在实践中，它的 data.frame 更长，计算更复杂，但原理应该是一样的。谢谢 - 第一次发帖所以对任何错误表示歉意。

输出将是一个数据框，其中用餐时间作为 Id var，橙色数据的苹果加权平均值作为每个用餐时间的值。

类似的东西

```
 Group.1         x
1 breakfast  1.785714
2    dinner  1.071429
3     lunch 27.500000
4     snack 18.428571 
```

这是使用计算的

```
sample$wa = sample$oranges*sample$apples/sum(sample$apples)
aggregate(sample$wa,by=list(sample$mealtime),sum,na.rm=T) 
```

这在数学上感觉不对，但它是一个快速的、笨拙的近似值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:37:38.680

这对 plyr 来说是一项比 reshape 更好的任务。

```
library(plyr)
s1<-ddply(sample,.(mealtime), function(x) {return(sum(x$apples,x$oranges))}) 
```

现在您已经澄清了输出：

```
ddply(sample,.(mealtime), summarize,
      wavg.oranges = sum(apples * oranges, na.rm=TRUE) / sum(apples, na.rm=TRUE))
#    mealtime wavg.oranges
# 1 breakfast     25.00000
# 2    dinner     10.00000
# 3     lunch     45.29412
# 4     snack     86.00000 
```

# java - 方法和最终修饰符

> ID：12443493
> 
> 赞同：1
> 
> 时间：2012-09-16T00:22:13.007
> 
> 标签：java, swing, methods, final

所以，我有一个 JTextArea。我在它的输入/动作映射中添加了键盘动作。

在输入按下时，应该创建 JDialog 及其内容。而且我需要将 keyListener 添加到它将包含的按钮，我不能，因为该按钮没有最终修饰符。如果我将其设置为 final，我将无法编辑它的属性。

这是代码片段：

```
class blabla extends JTextArea
{
getInputMap.put(KeyStroke.getKeyStroke("ENTER"), "pressedEnter");
getActionMap.put("pressedEnter", new AbstractAction()
        {
            private static final long serialVersionUID = 1L;

            public void actionPerformed(ActionEvent e) 
            {
                JDialog dialog;
                JButton confirm;;

                //JDialog
                dialog = new JDialog(Main.masterWindow, "newTitle", true);
                dialog.getContentPane().setLayout(new BoxLayout(dialog.getContentPane(), BoxLayout.Y_AXIS));
                dialog.addWindowListener(new WindowAdapter()
                {
                    public void windowActivated(WindowEvent e)
                    {
                        //this doen't work, it asks me to declare confirm as final
                        //and I have to request focuse here due to Java bug
                        confirm.requestFocus();
                    }
                });

                //JButton for confirming
                confirm = new JButton(lang.getString("ok"));
                confirm.setAlignmentX(Component.CENTER_ALIGNMENT);

                confirm.addKeyListener(new KeyAdapter()
                {
                    @Override
                    public void keyPressed(KeyEvent e)
                    {
                        if (e.getKeyCode() == KeyEvent.VK_ENTER)
                        {
                            //this doen't work, it asks me to declare confirm as final
                            confirm.doClick();
                        }
                    }       
                });

                dialog.add(confirm);

                dialog.pack();
                dialog.setLocationRelativeTo(Main.masterWindow);
                dialog.setVisible(true);
} 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T00:25:48.797

*   选项 1：确认类字段。
*   选项 2：您可以创建一个虚拟的最终 JButton 变量，`final JButton finalConfirm = confirm;`并传入确认引用，然后在内部类中处理此变量。
*   选项 3：不要为 Key Binding 的 AbstractAction 使用匿名内部类，而是使用带有 JButton 实例的构造函数的私有内部类。

# python - OSX：刚刚运行 sudo make install ... 编译好的 Phoenix2 应用程序去哪了？

> ID：12443494
> 
> 赞同：-1
> 
> 时间：2012-09-16T00:22:31.723
> 
> 标签：python, macos, makefile, osx-mountain-lion, bitcoin

我是一个 Windows 人，刚刚编译了我的第一个 python 应用程序，谁能告诉我编译后的输出会在哪里结束？

我只是跑来`SUDO make install`安装 pyopenCL 这是一个依赖项。

现在我正在尝试安装和运行[phoenix2](https://bitcointalk.org/index.php?topic=75786.0;all)，我运行了以下命令：

`sudo python ./setup.py install`

现在我不确定[在哪里查找和执行此处描述的文件](http://bitcoinpool.com/forum/viewtopic.php?f=7&t=129)。任何帮助将不胜感激（我在这里有点n00b，被所有文档压得喘不过气来）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:30:38.847

当您运行`make install`时，`make`应用程序会在项目`Makefile`中查找它应该放置可执行文件的位置，以及应用程序需要运行的任何其他文件。当然，这假设项目甚至具有可执行文件（例如，库可能没有）。

在项目基目录（您运行的目录`make install`）中查找名为`Makefile`. 它应该有一个名为`BIN_DIR`或类似的变量，告诉你它希望最终二进制文件去哪里。

# jquery - jQuery 按钮集在动态添加到 DOM 时无法工作

> ID：12443496
> 
> 赞同：1
> 
> 时间：2012-09-16T00:23:04.330
> 
> 标签：jquery, json, dom, append

我进行了 AJAX 调用，以 JSON 的形式取回一些数据并且访问数据没有问题。因为我得到了一组对象，所以我遍历它们并操作我的 DOM。以下代码显示了此迭代：

```
for (var key in data){
    reg_count++ ;
    attendee_markup += '<tr><td>' + data[key].student_num + '- ' + data[key].fname + ' ' + data[key].lname ;
    attendee_markup += '<td style="text-align: center;"><div class="ui-buttonset">' ;
    attendee_markup += '<input type="radio" id="ws' + data[key].reg_id + '-yes" name="' + data[key].reg_id + '" class="ui-helper-hidden-accessible" value="yes"><label for="ws' + data[key].reg_id + '-yes" class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-left" role="button"><span class="ui-button-text">Yes</span></label>' ;
    attendee_markup += '<input type="radio" id="ws' + data[key].reg_id + '-no" name="' + data[key].reg_id + '" class="ui-helper-hidden-accessible" value="no"><label for="ws' + data[key].reg_id + '-no" class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-right" role="button"><span class="ui-button-text">No</span></label>' ;
    attendee_markup += '</div></td></tr>' ;
} 
```

初始化我调用的按钮集`$('.ui-buttonset').buttonset();`

我正在使用“attendee_markup”和我稍后附加到 DOM 的字符串。一切都很好，除了按钮集。它们显示为按钮集，但单击它们时没有任何反应。我在 Chrome 控制台中也没有看到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:48:05.210

在您的第三行代码中，最后缺少一个`</td>`。这可能是搞乱你的逻辑的原因。你需要做的就是改变

```
attendee_markup += '<tr><td>' + data[key].student_num + '- ' + data[key].fname + ' ' + data[key].lname ; 
```

至

```
attendee_markup += '<tr><td>' + data[key].student_num + '- ' + data[key].fname + ' ' + data[key].lname + '</td>';
                                                                                                          ^^^^^ 
```

# java - 计算一个数组的平均值并插入另一个数组

> ID：12443497
> 
> 赞同：-1
> 
> 时间：2012-09-16T00:23:30.833
> 
> 标签：java, arrays, average

如何计算数组的平均值，并将其插入另一个数组并在控制台中打印。例如，我有一个大小为 100 的数组，我想计算数组中数字的平均值，然后插入大小为 5 的数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T00:38:56.173

这是一种方法：

```
public class Main
{
    public static void main(String[] args)
    {
        float averages[] = new float[5];
        int aLotOfNumbers[] = new int[100];

        // Initialize the numbers to 0, 1, 2, 3, 4, ..., 99
        for(int i=0; i<100; i++)
        {
            aLotOfNumbers[i] = i;
        }

        // Compute the averages by summing groups of 20 numbers and dividing the sum by 20
        for(int i=0; i<5; i++)
        {
            float runningSum = 0.0f;
            for(int j=0; j<20; j++)
            {
                runningSum += aLotOfNumbers[i*20 + j];              
            }
            averages[i] = runningSum / 20.0f;
        }

        // Print the 5 average values
        for(int i=0; i<5; i++)
        {
            System.out.println("Average[" + i + "] = " + averages[i]);
        }
    }
} 
```

# regex - Django admin urlpatterns 问题

> ID：12443499
> 
> 赞同：1
> 
> 时间：2012-09-16T00:23:57.100
> 
> 标签：regex, django, django-admin, django-views

我正在尝试完成一个 Django 教程（https://docs.djangoproject.com/en/dev/intro/tutorial03/）并且遇到了一个问题，我认为这是我对正则表达式和包含（ ） 功能。

我有问题的 urls.py：

```
from django.conf.urls import patterns, include, url
from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('',
     url(r'^admin/', include(admin.site.urls)),
     url(r'^polls/', include('polls.urls')),
) 
```

其中，引导我（浏览到`http://localhost:8000/admin/`）到 polls.urls 的详细视图 - 其代码是：

```
from django.conf.urls import patterns, url

urlpatterns = patterns('polls.views',
    url(r'^$', 'index'),
    url(r'^(?P<poll_id>\d+)/$', 'detail'),
    url(r'^(?P<poll_id>\d+)/results/$', 'results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'vote'),
) 
```

我明白为什么它与民意调查相匹配并被带到 polls.urls。有任何想法吗？

注意：当我注释掉该`url(r'^polls/, include('polls.urls')),`行时，我可以再次看到管理页面

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:33:05.823

好的 - 所以我设法解决了这个问题，但不完全确定如何解决。这是一个离开它并解决其他问题的情况，当我回来时它已经修复了！所以，我改变的事情：

1.) 包括在内`{% load url from future %}`以确保我的模板中的前向兼容性

2.) 将 detail.html 中的表单操作更改为`<form action="/polls/{{ poll.id }}/vote/" method="post">`(from`<form action="{% url 'polls.views.vote' poll.id %}" method="post">`

3.）最后，可能也是最重要的——整理了​​我的语法！在我的 views.py 文件中，我有`Return HttpResponseRedirect(reverse('polls_results', args=(p.id,)))`但没有`Return HttpResponseRedirect(reverse('poll_results', args=(p.id,)))`

我仍然不知道是哪个做到的，但是，如果有人和我处于相同的位置，那么这三个的组合会做到！

# php - MST 到 UTC php 问题

> ID：12443500
> 
> 赞同：0
> 
> 时间：2012-09-16T00:24:03.297
> 
> 标签：php, datetime, timezone

我将 MST 服务器时间转换为 UTC，如下所示：

```
$msttime="2012-09-15 17:00:01";
$getdatetimeUTC=gmdate('Y-m-d H:i:s',strtotime($msttime)); 
```

我明白了：

2012-09-15 23:00:01

这是错误的！

为什么会这样？我应该得到 2012-09-15 24:00:01。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:07:05.990

这是我使用 date_default_timezone_get() 并给了我 MDT 的 php 错误，尽管我的服务器是 MST。我必须配置 php 的设置才能使其工作！

# google-app-engine - 应用引擎开发服务器不与 --backends 一起使用

> ID：12443503
> 
> 赞同：1
> 
> 时间：2012-09-16T00:24:34.627
> 
> 标签：google-app-engine

我有一个长期运行的任务，可以从后端运行中受益。但是，当我使用 --backends 选项调用 dev_appserver.py 时，服务器不再正常工作。

我收到了一个以前在应用引擎上从未见过的错误页面。错误似乎是

 *堆栈跟踪真的很长，但我截取了错误页面的顶部： ![错误页面顶部](../Images/34408534cdbb4035146865b4d1196f4b.png) 以及底部： ![错误页面底部](../Images/6880aa01c1e4d7951eeb4297b91d34e1.png)

它似乎与日志模块有关，因为我第一次看到与 except 子句中的错误相关的内容是在日志模块中：

```
 C:\Python27\lib\logging__init__.py in emit(self=<logging.StreamHandler object>, record=<logging.LogRecord object>)
    872             raise
    873         except:
=>  874             self.handleError(record)
    875 
    876 class FileHandler(StreamHandler):
self = <logging.StreamHandler object>, self.handleError = <bound method StreamHandler.handleError of <logging.StreamHandler object>>, record = <logging.LogRecord object> 
```

操作系统是Win7 x64，我搜索了类似的东西，一无所获。任何线索都非常受欢迎。

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:48:51.487

错误非常令人困惑，但它确实说“非法论点”。您传递的`--backends`参数不是[python dev server 的可用命令行参数之一](https://developers.google.com/appengine/docs/python/tools/devserver#Command_Line_Arguments)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T12:43:11.803

看起来从 1.8.x 版本开始，该`--backends`参数不是必需的（也不支持），因为后端支持是自动可用的。单独运行`dev_appserver.py`应该足够了，但不要忘记提供`backends.yaml`文件。*

# mysql - 插入时 MySQL 错误 #1064

> ID：12443504
> 
> 赞同：2
> 
> 时间：2012-09-16T00:24:51.160
> 
> 标签：mysql

我已经看了很长时间了，但我不知道出了什么问题。我试图在我的表中插入一个新行，但在尝试这样做时我不断收到 #1064 错误。我是新手，所以对你们中的一些人来说可能很明显......

这是我的插入代码：

```
INSERT INTO registration (`fname`, `lname`, `address1`, `address2`, `city`, 
                          `state`, `zcode`, `dob_mon`, `dob_day`, `dob_year`, 
                          `email`, `number`, `gender`)
                  VALUES (`joe`, `bob`, `123 abc`, `apt 209`, `la`, 
                          `CA`, `99999`, `JUN`, `14`, `1999`, 
                          `a@gmail.com`, `1234567`, `F') 
```

这是我的 php 文件的一部分

```
$fields = "`". implode("`, `", array_keys($register_data)) ."`";
$data = "`". implode("`, `", $register_data) ."'";
echo "INSERT INTO `registration` ($fields) VALUES ($data)"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:27:34.543

不要使用带角度的引号作为值。试试这个：

```
INSERT INTO registration (`fname`, `lname`, `address1`, `address2`, `city`, `state`, `zcode`, `dob_mon`, `dob_day`, `dob_year`, `email`, `number`, `gender`) VALUES ('joe', 'bob', '123 abc', 'apt 209', 'la', 'CA', '99999', 'JUN', '14', '1999', 'a@gmail.com', '1234567', 'F') 
```

# bash - iostat 和窃取时间

> ID：12443505
> 
> 赞同：1
> 
> 时间：2012-09-16T00:25:01.987
> 
> 标签：bash, time, iostat

我正在尝试从 iostat 输出中捕获一些数据：

> ```
> # iostat  -m
> 
> avg-cpu:  %user   %nice %system %iowait  %steal   %idle
>            9.92    0.00   14.17    0.01    0.00   75.90
> 
> Device:            tps    MB_read/s    MB_wrtn/s    MB_read    MB_wrtn
> sda               6.08         0.00         0.04       2533     261072
> dm-0              1.12         0.00         0.00       1290      30622
> dm-1              0.00         0.00         0.00          1          0
> dm-2              1.22         0.00         0.00          0      33735
> dm-3              7.22         0.00         0.03       1213     196713 
> ```

如何匹配“0.00”值？数字不是由制表符或恒定数量的空格分隔的。该值也可以是 3 位 0.00 或 4 位 45.00 等。

知道如何使用 bash 匹配它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T01:12:19.180

试试这个，使用`awk`：

```
iostat | awk 'NR==3 { print $5 }' 
```

`NR==3`将在*第三*行运行，并`$5`打印*第 5*列。通过玩弄数字来验证是否选择了正确的列，即使用您的输出并且`print $4`应该产生*0.01*。

# fonts - 可以在 GPL 项目中使用 OFL 字体吗？

> ID：12443508
> 
> 赞同：1
> 
> 时间：2012-09-16T00:25:15.717
> 
> 标签：fonts, licensing, gpl

我正在开发一个根据 GPL 许可的游戏项目。我可以在游戏中使用 SIL OFL 1.1 许可的字体吗？

如果源代码中不包含字体并且我只将它用于图像文件中的文本，这有什么区别吗？

只是为了澄清。我不拥有该字体，我不会对其进行编辑或重新授权。我只想在游戏的菜单中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T00:46:29.637

该字体的许可证并不限制您在某些软件中使用它，因此我认为在菜单中使用它没有任何问题。

事实上，如果您打算重新分发字体文件，甚至有必要在它旁边有一个程序，因为许可证不允许您单独分发文件。

> 如果源代码中不包含字体并且我只将它用于图像文件中的文本，这有什么区别吗？

好吧，当有人可能会尝试重新创建图像时，字体本身就会丢失，例如翻译软件。

> 只是为了澄清。我不拥有该字体，我不会对其进行编辑或重新授权。我只想在游戏的菜单中使用它。

澄清一下，字体不会成为您软件的一部分，而是自己的作品。在您的软件中，您只需引用一个可以轻松替换的字体文件。所以字体不是游戏程序特有的，如果被替换它就不会再运行了。

此外，该字体在 FSF 接受的免费软件许可下（SIL，他们也将其用于自己的网站），所以我假设与您的 GPL 游戏一起，您会找到很多朋友。

# c# - 获取收到的推送通知数量？

> ID：12443509
> 
> 赞同：1
> 
> 时间：2012-09-16T00:25:25.640
> 
> 标签：c#, windows-phone-7

我一直在了解 Windows Phone 7 上的推送通知，并且我正在寻找一种方法来了解某个应用程序收到了多少 Toast 通知。

例如：在下午 5 点到 7 点之间，当用户打开应用时，我的应用会收到 7 个 Toast 通知。它会在某处显示它收到了这 7 个通知（如果可能，还会显示它们的时间和内容）。

这可能吗？如果可以，怎么做？

我已经搜索了一些关于此的教程，但我发现的只是发送和接收教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:32:48.353

如果 wp7 收到 toast 通知并且用户没有点击它，toast 通知就会消失。

所以对你的问题的回答是：不可能。

想法：您可以创建类似“确认请求”的内容。当用户点击通知时，您可以将信息发送到服务器。当用户不点击通知时，我建议使用 TILE 通知...您可以显示未确认通知的数量...当用户运行应用程序时，您可以下载所有未确认通知的数据。

# python - 我可以设置 IDLE 默认启动 Python 2.5 吗？

> ID：12443510
> 
> 赞同：2
> 
> 时间：2012-09-16T00:25:35.730
> 
> 标签：python, python-2.7, python-idle, python-2.5, coexistence

好的，所以我刚刚安装了 Python 2.7，但我都准备好了 Python 2.5。我意识到因为我最后安装了 Python 2.7，IDLE 会自动打开 Python 2.7 IDLE，这是我不想要的。当我在 python 源文件上使用右键单击选项时，有什么方法可以将 Python 2.5 IDLE 设置为自动打开？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T01:39:10.023

您可以轻松地创建或编辑文件的右键单击属性。

要编辑特定文件扩展名的右键菜单：

1.  `assoc .py`从命令行运行并记下关联的名称：

    > C:>assoc .py
    > .py=Python.File

2.  运行`regedit.exe`。

3.  浏览到`HKEY_CLASSES_ROOT\Python.File\shell`。
4.  `shell`在调用下创建一个键`Edit with IDLE`（或者您希望它显示在菜单中）。
5.  `Edit with Idle`在被调用下创建一个键`command`。
6.  编辑默认值以运行所需的命令。用于`"%1"`插入右键单击文件的名称。就像是：

    > c:\python25\pythonw.exe c:\python25\lib\idlelib\idle.pyw "%1"

或者，只需将以下内容另存为`idle.reg`并双击它以将此值插入注册表。

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\Python.File\shell\Edit with IDLE\command]
@="\"C:\\Python25\\pythonw.exe\" \"C:\\python25\\Lib\\idlelib\\idle.pyw\" \"%1\"" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T00:40:07.413

除非出于某种原因需要 Python 2.7，否则在 Windows 中实现此目的的最简单方法是卸载 Python 并重新安装 Python 2.5。

# c# - 如何让我的 DebuggerTypeProxy 目标类从基代理继承？

> ID：12443513
> 
> 赞同：7
> 
> 时间：2012-09-16T00:26:01.347
> 
> 标签：c#, .net

**问题：** 我正在寻找一种方法来简化继承类的调试器类型代理的构造。因此，当调试从另一个继承的类时，我应该同时看到两个属性：基类的基本属性，加上父类的新属性。

这是我到目前为止所尝试的：

1.  `NewA`的类型代理继承自`A`. 属性不会并排显示；基本属性在`Base`. ^(*****)
2.  包括一个将当前转换为的`A`属性，其中：Visual Studio 挂起 :( `NewA``NewA``A``[DebuggerBrowsable(RootHidden)]`

我知道我可以将基类的属性添加到`NewA`的代理中，但我试图避免这种情况。对于具有许多属性的类来说，工作量太大了。

* * *

**解释：**

我在我的`DebuggerTypeProxy`一些类上使用了该属性，因此我可以控制在调试期间浏览类时的外观。例如：

```
public class A {
    private String _someField;

    public String SomeField {
        get {return _someField;}
    }
} 
```

默认情况下，工具提示调试信息显示为：

![在此处输入图像描述](../Images/a50b81dc41b052c8216ab3b8fbfed9b9.png)

...所以我使用 DebuggerTypeProxy 来隐藏支持字段：

```
[DebuggerTypeProxy(typeof(AProxy))]
public class A {
    // ...

    internal class AProxy {
        A _a;
        AProxy (A a){
            _a = a;
        }

        public String SomeField {
             get {return _a.SomeField;}
        }
    }
} 
```

...世界一切都好：

![在此处输入图像描述](../Images/53959030097a4cfff9643670bef4bfcb.png)

* * *

现在，我创建了一个继承自 A 的类。

```
public class NewA : A {
    private String _anotherField;
    public String AnotherField {
        get {return _anotherField;}
    }
} 
```

不幸的是，在调试此类时，Visual Studio 使用基类型代理（来自`A`）。这意味着我们可以看到基本`SomeField`属性，但我们的新`AnotherField`属性是隐藏的（当然，除非你展开`Raw View`）：

![在此处输入图像描述](../Images/aa46047c284f79436aeff2516e64944a.png)

从 base 中删除类型代理`A`会导致`AnotherField`显示，但不会`SomeField`。

* * *

**^*尝试失败 #1**

```
/// <summary>
/// The base class
/// </summary>
[DebuggerTypeProxy(typeof(AProxy))]
public class A {
    private String _someField;

    public String SomeField {
        get { return _someField; }
    }

    protected class AProxy {
        A _a;
        protected AProxy(A a) {
            _a = a;
        }

        String SomeField {
            get { return _a.SomeField; }
        }
    }

}

/// <summary>
/// Parent class
/// </summary>
[DebuggerTypeProxy(typeof(NewAProxy))]
public class NewA : A {
    private String _anotherField;
    public String AnotherField {
        get { return _anotherField; }
    }

    // Inherit base type proxy, in an effort to display base properties
    // side-by-side with AnotherField: Doesn't work.
    protected class NewAProxy : A.AProxy {
        NewA _newA;
        protected NewAProxy(NewA newA)
            : base(newA) {
            _newA = newA;
        }

        public String AnotherField {
            get { return _newA.AnotherField; }
        }
    }
} 
```

结果：

![在此处输入图像描述](../Images/d953984ea54db3592e7343edc62ce8fd.png)

还是不行。基础属性不会与新属性并排放置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T02:56:31.503

[经过数小时的搜索和修改，我从 Jared Par 的博客](http://blogs.msdn.com/b/jaredpar/archive/2010/02/19/flattening-class-hierarchies-when-debugging-c.aspx)中找到了解决方案——而且是一个漂亮的解决方案。他创建了一个类型代理，它使用反射将所有成员压缩到一个列表中。一些额外`DebuggerDisplay`的魔法使你甚至不会注意到。

```
// http://blogs.msdn.com/b/jaredpar/archive/2010/02/19/flattening-class-hierarchies-when-debugging-c.aspx
// by Jared Par
internal sealed class FlattenHierarchyProxy {

    [DebuggerDisplay("{Value}", Name = "{Name,nq}", Type = "{Type.ToString(),nq}")]
    internal struct Member {
        internal string Name;
        internal object Value;
        internal Type Type;
        internal Member(string name, object value, Type type) {
            Name = name;
            Value = value;
            Type = type;
        }
    }

    [DebuggerBrowsable(DebuggerBrowsableState.Never)]
    private readonly object _target;
    [DebuggerBrowsable(DebuggerBrowsableState.Never)]
    private Member[] _memberList;

    [DebuggerBrowsable(DebuggerBrowsableState.RootHidden)]
    internal Member[] Items {
        get {
            if (_memberList == null) {
                _memberList = BuildMemberList().ToArray();
            }
            return _memberList;
        }
    }

    public FlattenHierarchyProxy(object target) {
        _target = target;
    }

    private List<Member> BuildMemberList() {
        var list = new List<Member>();
        if ( _target == null ) {
            return list;
        }

        var flags = BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance;
        var type = _target.GetType();
        foreach (var field in type.GetFields(flags)) {
            var value = field.GetValue(_target);
            list.Add(new Member(field.Name, value, field.FieldType));
        }

        foreach (var prop in type.GetProperties(flags)) {
            object value = null;
            try {
                value = prop.GetValue(_target, null);
            }
            catch (Exception ex) {
                value = ex;
            }
            list.Add(new Member(prop.Name, value, prop.PropertyType));
        }

        return list;
    }
} 
```

* * *

**修改**

我对该类进行了三处小修改，以使其对我更有用。

首先，我希望成员按名称排序。为此，请将最后一行更改为：

```
return list.OrderBy(m => m.Name).ToList(); 
```

其次，在`Member`结构中，我添加了一些属性，以便在展开引用类时只显示值：

```
[DebuggerBrowsable(DebuggerBrowsableState.Never)]
internal string Name;
[DebuggerBrowsable(DebuggerBrowsableState.RootHidden)]
internal object Value;
[DebuggerBrowsable(DebuggerBrowsableState.Never)]
internal Type Type; 
```

第三，默认标志`BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance`意味着即使标记的成员`[DebuggerBrowsable(DebuggerBrowsableState.Never)]`仍会显示。为了防止这种情况发生，在这一行之后：

```
foreach (var field in type.GetFields(flags)) { 
```

添加这个：

```
// Respect DebuggerBrowsableAttributes
var debuggerBrowsableAtts = field.GetCustomAttributes(typeof(DebuggerBrowsableAttribute), true);
if (debuggerBrowsableAtts.Count() == 1) {
    var att = debuggerBrowsableAtts[0] as DebuggerBrowsableAttribute;
    if (att.State == DebuggerBrowsableState.Never) {
        continue;
    }
} 
```

现在`DebuggerBrowsable(DebuggerBrowsableState.Never)`将受到尊重的领域。您还可以将该代码添加到处理属性的 foreach 循环中，以使其也适用于属性。

# mysql - PDO、MySQL - 使用单个 CASE 有效地更新/增加数组中的值

> ID：12443514
> 
> 赞同：0
> 
> 时间：2012-09-16T00:26:16.790
> 
> 标签：mysql, performance, pdo, case

允许作者将文章作为社区的一部分提交，并使用 PDO 查询将它们保存到 mysql 数据库中。让我们用 7 篇文章扩展这个例子：

```
article_id   author_id   article_title   article_clean   article_kind   good_read
    1            2       War and Peace   war-and-peace     free            y
    2            3       Art of War      art-of-war        free            y
    3            2       Peace and Love  peace-and-love    paid            n
    4            4       Peaceful Living peaceful-living   paid            n
    5            2       Peace Treaties  peace-treaties    free            n
    6            2       Peace is Love   peace-is-love     free            n
    7            4       Peace Countries peace-countries   free            n 
```

我已经有了文章 ID 的输出：

```
while($row = $articles->fetch(PDO::FETCH_ASSOC)){           
    $article_id_array[] = $row["article_id"];
    $author_id_array[] = $row["author_id"];
    $article_clean_array[] = $row["article_clean"];
    $article_kind_array[] = $row["article_kind"];
} 
```

我正在尝试运行单个 mysql 命令，可能使用 CASE，它只会影响这样的文章：
1\. article_id_array 中的所有（免费或付费）文章都将获得“y”
这是 CASE 的来源：
2 . 只有一个 author_id 的（免费）文章，会得到一个 article_title 'Good Read' 和一个 article_clean 'good-read'
3\. 只有一个（免费）文章，如果对于一个 author_id，一个 article_title 'Good Read' 和一个 article_clean 'good-read' 已经存在，无论是来自 mysql 查询，还是已经存在于该 author_id 的文章表中，那么值 1 将被附加为：
    article_title 'Good Read 1' 和 article_clean 'good-read- 1'

所以在上面的例子中，在查询之后，articles 表看起来像这样：

```
article_id   author_id   article_title   article_clean   article_kind   good_read
    1            2       Good Read       good-read         free            y
    2            3       Good Read       good-read         free            y
    3            2       Peace and Love  peace-and-love    paid            y
    4            4       Peaceful Living peaceful-living   paid            y
    5            2       Good Read 1     good-read-1       free            y
    6            2       Good Read 2     good-read-2       free            y
    7            4       Good Read       good-read         free            y 
```

知道完成此任务的单个 PDO 查询是什么吗？

**编辑：**
我正在寻找最有效的方法来做到这一点，因为这个表可能增长得非常快（数十万篇文章），所以我所追求的查询不能削弱数据库。作为参考，这不会针对数据库中的每篇文章，而只是提供给脚本以一次执行查询的 20-100 个文章 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:13:18.317

因为这是没有像 ROW_NUMBER 这样的分析函数的 MySQL，所以你必须使用 OUTER JOIN 来模拟它——顺便说一句。在性能方面不是一个好的选择。如果我正确理解了该任务，您可以通过运行该查询来实现：

```
 SELECT article_id,
       author_id,
       CASE
         WHEN article_kind = 'free' THEN
           CASE
             WHEN num = 1 THEN 'Good Read'
             ELSE Concat('Good Read ', Cast((num - 1) AS CHAR))
           end
         WHEN article_kind = 'paid' THEN article_title
       end AS article_title,
       CASE
         WHEN article_kind = 'free' THEN
           CASE
             WHEN num = 1 THEN 'good-read'
             ELSE Concat('good-read-', Cast((num - 1) AS CHAR))
           end
         WHEN article_kind = 'paid' THEN article_title
       end AS article_clean,
       article_kind,
       'y' AS good_read
FROM   (SELECT a.article_id,
               a.author_id,
               a.article_title,
               a.article_clean,
               a.article_kind,
               a.good_read,
               Count(*) AS num
        FROM   articles AS a
               LEFT OUTER JOIN articles AS b
                            ON a.author_id = b.author_id
                               AND a.article_id >= b.article_id
                               AND b.article_kind = 'free'
        GROUP  BY article_id,
                  author_id,
                  article_title,
                  article_clean,
                  article_kind,
                  good_read) AS tab; 
```

# google-maps - 增加 KML 谷歌地球中的坐标数

> ID：12443517
> 
> 赞同：0
> 
> 时间：2012-09-16T00:26:49.440
> 
> 标签：google-maps, kml, google-earth

目前，我有一条由 Google Earth 自动绘制的从 A 点到 B 点的路线。在 KML 文件中，LineString 坐标显示了相当多的点，但这对于我的项目来说还不够。有没有办法增加自动生成的坐标？或者有什么我可以使用的公式吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:32:59.813

如果您能解释*为什么*需要更多积分，那将会很有帮助。

一般来说，您可以通过在两个点之间添加另一个点来拆分每个段。

就像是：

```
splitLat = (lat1 + lat2)/2.0;
splitLng = (lng1 + lng2)/2.0; 
```

导致：

```
<coordinates>
...
lat1, lat2, 0
splitlat, splitLng, 0
lat2, lng2, 0
...
</coordinates> 
```

# jsp - 从 servlet 识别表单中按下了哪些按钮

> ID：12443518
> 
> 赞同：0
> 
> 时间：2012-09-16T00:26:49.503
> 
> 标签：jsp, servlets

在我的 JSP 中，我有一个带有 2 个提交按钮的表单（action="myServlet", **method='post', enctype='multipart/form-data' ）。**

我需要识别在 myServlet 中按下了哪些按钮。如果可能的话，我想避免使用会话......

关于如何做到这一点的任何想法？

**编辑： - - - - - - - - - - - - - - - - - - - - - - - - -------------------------**
下面的所有文字都是在编辑后添加的。**强**文本也与编辑一起添加。

现在我有 3 个按钮而不是 2 个，我必须为每个按钮添加一个 javascript 函数（onclick），这个函数在提交之前验证字段，所以我必须修改按钮并设置 type=button（它们不是提交按钮不再是因为提交他们总是会调用servlet，即使验证是假的）。

我用来识别单击了哪个提交按钮（在 servlet 中）的方法正在遍历随请求发送的所有 FileItem，以及它们中的任何一个的名称是否是 3 个按钮中的任何一个的名称我的表单，然后那个按钮就是用户点击的那个。当按钮具有 type=submit 时，这非常有效，但是现在它们是简单的按钮，显然它们没有随请求一起发送，所以当我在 servlet 中获取 FileItems 时，它们都不是任何按钮......所以诀窍我以前用的现在没用了。

我不知道如何在不做奇怪的事情的情况下做到这一点，例如：在表单中添加一个不可见的文本字段，其中填充了我单击的按钮的名称（使用 javascript）......有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:26:32.230

为您的按钮指定名称

```
    <form action="MyServlet.do">
        <input type="submit" value="提交 1" name="b1">
        <input type="submit" value="提交 2" name="b2">
    </form>

```

然后在 Servlet

```
    HashMap<String, String[]> map = (HashMap<String, String[]>) request.getParameterMap();
    out.println(map.containsKey("b1"));
    out.println(map.containsKey("b2"));

```

被点击的将被​​发送并返回 true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:22:36.347

我不确定我是否正确地回答了你的问题。这就是我所理解的，现在表单上的按钮不再是提交按钮。所以你想知道点击了哪个按钮。好的，我可以建议你一个解决方案。您可以维护一个隐藏的输入类型，当您单击任何按钮时，您可以将其绑定到一个名为 click 的 JavaScript 函数。这是您应该编写的 javascript 函数的伪代码。

```
function click(){
 // step-1 get a list of all input type using getElementbyId function
 // step-2 check to which ones are buttons
 // step-3 now see whether names are equal to button one or two or three
 // step-4 base on which button was clicked set the value of hidden variable like button1,button2,button3
 // step-5 Retrieve the value of the hidden field in yourservlet and check which one was clicked.
 // step-6 submit the form
} 
```

我希望这对您的查询有所帮助。BR，本

# jquery - 动态填充的菜单对搜索引擎的可见性

> ID：12443519
> 
> 赞同：2
> 
> 时间：2012-09-16T00:26:49.973
> 
> 标签：jquery, menu, search-engine

我想从 ajax 调用中填充一个 jQuery 菜单，该调用从数据库中检索菜单。由于`<li>`项目不会显示在查看源 html 中，而是在 jQuery 就绪函数中添加到 DOM 中，搜索引擎将什么视为 html？他们看到空的菜单结构（即浏览器源）还是看到填充的 li 项目？我的猜测（和希望）是后者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:34:53.727

搜索引擎在抓取页面时通常*不会*执行 JavaScript 代码。出于这个原因，我不相信您的菜单会出现在 DOM 中。

另一种选择可能是在页面加载时将菜单实际呈现为无序列表，但使用 a 设置列表的样式，`display:none`以便您的访问者看不到它，但搜索引擎会。

尝试使用其中一种工具查看您的网站，这将（有效）模拟搜索引擎抓取。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=158587](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=158587)

[http://www.delorie.com/web/lynxview.html](http://www.delorie.com/web/lynxview.html)

[http://www.webconfs.com/search-engine-spider-simulator.php](http://www.webconfs.com/search-engine-spider-simulator.php)

**[编辑]**

实际上，*如果*您遵循以下标准，Google 确实会为他们的机器人抓取 AJAX 内容提供一种解决方法：[https ://developers.google.com/webmasters/ajax-crawling/docs/getting-started](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)

Bing 和 Yahoo 似乎也采用了这些标准：[http ://searchengineland.com/bing-now-supports-googles-crawlable-ajax-standard-84149](http://searchengineland.com/bing-now-supports-googles-crawlable-ajax-standard-84149)

# codeigniter - Code Igniter 表单验证和文件上传？

> ID：12443522
> 
> 赞同：0
> 
> 时间：2012-09-16T00:27:08.677
> 
> 标签：codeigniter, file-upload, validation

我有一个文件上传作为我的表格的一部分，

我正在使用代码点火器表单验证库，

我也在使用代码点火器上传库，

我知道如何使用上传库上传图像等，但我想在表单验证期间包含文件的基本验证（例如，必需、最大大小、文件类型）。

我知道我需要做一个回调，但问题是验证库只检查`$_POST`它不检查`$_FILES`

我怎样才能做到这一点？

我在想也许将所需的输入复制到 post 数组

`$_POST['image'] = $_FILES['image']`

然后仅使用回调运行验证，该回调使用实际`$_FILES`项目上的上传库进行实际验证，但这似乎有点 hacky。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:41:36.460

只需让回调检查 $_FILES - 无需复制 $_POST

```
public function _check_file($file)
{
          $this->load->library('upload');
          if ( ! $this->ci->upload->do_upload())
          {
                $this->form_validation->set_message('_check_file', 'error');
                return FALSE;
          }
          else
          {
                    return TRUE;
          }
} 
```

**编辑：澄清**- 而验证库默认只检查 POST - 当您运行回调时，您可以访问 FILES - 所以只需检查回调中的 FILES 即可。这就是我所做的，而且效果很好。

# php - 使用 PHP 将文件保存到另一个 DocumentRoot

> ID：12443523
> 
> 赞同：0
> 
> 时间：2012-09-16T00:27:12.110
> 
> 标签：php, apache, open-basedir

我有一个生成一些图像文件的站点。我不想保存到站点的`DocumentRoot`like`\home\mysite\public_html\photos`中，而是想保存到另一个用户的目录中，例如`\home\anothersite\public_html\photos`. 这样做的原因是为了方便将所有照片移动到其自己的专用服务器，仅用于提供图像。

PHP有没有办法将文件保存到另一个用户的目录？我正在考虑使用`rename()`和禁用`open_basedir`. 还是我应该使用`ftp_fput()`？

* * *

## 更新

当我尝试这个（涉及`mkdir()`创建新目录）时，我收到错误：

```
mkdir() [function.mkdir]: Permission denied 
```

我错过了一些权限设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T04:14:36.090

您可以像现在 / 在当前目录中一样保存它。PHP 不关心 web-server 的文档根目录

杰伦的回答。

# redirect - Google 的搜索结果链接是如何工作的？

> ID：12443524
> 
> 赞同：3
> 
> 时间：2012-09-16T00:27:22.493
> 
> 标签：redirect

谷歌将搜索结果链接重定向到[http://www.google.com/url?blah](http://www.google.com/url?blah)但是当你将鼠标悬停在链接上时，正确的目的地会出现在浏览器的底部。这是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:31:49.470

起初，url 的 href 实际上是显示在浏览器底部的内容。一旦您单击它，他们就会使用 onmousedown 事件来更改它。它很难检查，因为即使右键单击它也会重写 url。尝试通过右键单击检查 DOM 检查器中的第一个链接，然后通过检查器滚动到 NEXT 搜索结果链接，您可以看到原始的 href。然后右键单击它并观察它的变化。这是提取的 javascript 示例。

```
 onmousedown="return rwt(this,'','','','2','AFQjCNExXX4MUzCuBu_Pvbj4O6N2xise-g','','0CCUQFjAB',null,event)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T00:35:01.587

这个问题很好地解释了这是如何实现的：

[鼠标悬停时如何隐藏 URL？](https://stackoverflow.com/questions/4251749/how-do-they-hide-url-when-mouseover)

# hadoop - 当输入文件小于映射节点时 hadoop 调度程序如何工作

> ID：12443525
> 
> 赞同：2
> 
> 时间：2012-09-16T00:27:29.770
> 
> 标签：hadoop, mapreduce, scheduling

在我的情况下，我需要知道我是否在 Jobcontrol 中有 2 个工作，然后我有 200 个映射节点，我的块大小是 64 MB，所以完整的处理数据应该是（64 * 200 = 12.8GB），但第一个工作大小是 10 GB 如何 hadoop如果地图节点有空槽怎么办？Hadoop将处理队列中的第二个作业或等待第一个作业映射减少完成并处理第二个作业或其他方式请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:06:45.130

如果您使用 Hadoop 的 FIFO 调度程序并以同一用户身份运行 2 个作业，那么只有在运行第一个作业时有足够的空闲 Map/Reduce 插槽可用时，第二个作业才会开始运行。即使有，调度程序也会优先考虑第一个作业而不是第二个作业。因此，Hadoop 将等待第一个作业完成，然后再安排第二个作业。

通常不建议文件小于输入拆分大小，因为与单个大文件相比，namenode 必须管理更多的文件 inode。

# javascript - jslint-vim 配置

> ID：12443532
> 
> 赞同：2
> 
> 时间：2012-09-16T00:28:39.230
> 
> 标签：javascript, vim, jslint

我使用以下插件为 vim 安装 jslint：[https](https://github.com/hallettj/jslint.vim) ://github.com/hallettj/jslint.vim 。

我对如何配置它有点困惑。

我在这里看到了一个选项列表[http://www.jslint.com/lint.html#options](http://www.jslint.com/lint.html#options)，但是

1.  在 jslint-vim 插件中，我在哪里指定这些选项？
2.  消除缩进错误的选项是什么
3.  删除“在定义之前使用了 x 变量”的选项是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T00:37:45.497

> 在 jslint-vim 插件中，我在哪里指定这些选项？

在您的主目录中创建一个*.jslintrc 。*选项列在`/**/`注释块中。**Usage**下的文档中有一个示例。*.jslintrc*中设置的选项通常适用于 jslint，而不仅仅是 vim 插件。

> 消除缩进错误的选项是什么

尝试设置`white`：*容忍凌乱的空白*。但这会导致其他问题过去。

把它放在你的*.jslintrc*中：

```
/*jslint white: true */ 
```

> 删除“在定义之前使用了 x 变量”的选项是什么？

该选项名为`undef`. 把它放在你的*.jslintrc*中：

```
/*jslint undef: true */ 
```

将这两个选项放在一起：

```
/*jslint white: true, undef: true */ 
```

# java - IntelliJ：从 Maven 模块引用另一个模块不起作用

> ID：12443533
> 
> 赞同：0
> 
> 时间：2012-09-16T00:28:49.457
> 
> 标签：java, maven, intellij-idea

当我创建一个标准 Java 模块并从中引用另一个模块（文件 - 项目结构 - 模块 - 添加 ..）时，我可以使用引用模块中的包。

但是，当我从**Maven 模块**中引用模块时，我无法访问被引用模块中的包。这是错误的行为还是我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:58:20.980

通过手动输入 Maven 模块的依赖项来引用 eq.

```
<dependencies>
    <dependency>
        <groupId>BusinessLogic</groupId>
        <artifactId>BusinessLogic</artifactId>
        <version>1.0</version>
        <scope>compile</scope>
    </dependency>
</dependencies> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:25:28.717

我用最新的 Intellij 12 EAP 试过这个，也有同样的问题。对我来说，这看起来像一个错误。它应该识别其他模块的所有依赖项，而不必添加每个依赖项。但是，如果你在类上使用“Alt + Enter”，它会给你一个选项来将模块库添加到你的模块的依赖项中。这比必须手动添加所需的每个依赖项要好。

# ruby-on-rails - Rails 如何知道上传文件的内容类型是什么？

> ID：12443535
> 
> 赞同：1
> 
> 时间：2012-09-16T00:29:21.763
> 
> 标签：ruby-on-rails, ruby, file-upload, content-type, rack

当一个文件通过 Rails 应用程序中的表单上传时，在控制器中我得到一个`ActionDispatch::Http::UploadedFile`已经`#content_type`神奇设置的实例。它是怎么做到的，Rails 怎么知道上传文件的内容类型是什么？

我注意到在测试文件上传时，您必须手动将内容类型传递给`#fixture_file_upload`. 但为什么？不能以同样的方式确定内容类型吗？

# css - 这两种风格规则有什么区别？

> ID：12443536
> 
> 赞同：1
> 
> 时间：2012-09-16T00:30:29.940
> 
> 标签：css, css-selectors

> **可能重复：**
> [CSS Child vs Descendant 选择器](https://stackoverflow.com/questions/1182189/css-child-vs-descendant-selectors)

那么，这里有什么不同呢？

```
div a {
  /* Styles here */
} 
```

和

```
div > a {
  /* Styles here */
} 
```

我真的不明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T00:37:00.540

`space`是[后代组合](http://www.w3.org/TR/selectors/#descendant-combinators)器，`>`而是[子组合](http://www.w3.org/TR/selectors/#child-combinators)器。*Child*表示直接后代，*descendant*表示父元素的子树中某处的节点，无论多深。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T01:15:07.027

用简单的话来说：

```
div a {/*properties*/} 
```

这将选择给定样式并将其应用于“div”中的所有“a”元素。

* * *

'>' 符号是 'Child Combinator'：

```
div > a {/*properties*/} 
```

这将*只选择 div 内的直接子*“a”标签。

例如：
CSS：

```
div > a {color: red} 
```

html:

```
<div>
    <a href="#">Link One</a>
    <span>
        <a href="#">Link Two</a>
        <a href="#">Link Three</a>
    </span>
    <a href="#">Link Four</a>
</div> 
```

此处，红色仅适用于“链接一”和“链接四”。“链接二”和“链接三”未被选中，因为它们嵌套在“跨度”元素中。

和他们一起玩：http: [//dabblet.com/gist/3730661](http://dabblet.com/gist/3730661)

您可以在此处阅读有关 CSS 选择器的更多信息：http: [//css-tricks.com/child-and-sibling-selectors/](http://css-tricks.com/child-and-sibling-selectors/)

# java - 如何解析没有正则表达式的字符串

> ID：12443540
> 
> 赞同：6
> 
> 时间：2012-09-16T00:30:56.327
> 
> 标签：java, regex, string, parsing, lexer

我目前正在尝试创建一个能够解释动态字符串的软件组件，例如：

```
%TO_LOWER%(%DELETE_WHITESPACES%("A SAMPLE TEXT")) 
```

这将导致这个字符串：

```
asampletext 
```

我希望能够使用语义参数等定义一组可用函数。我已经（或多或少）知道如何使用正则表达式来做到这一点。

我的问题是：

*   出于这样的目的，词法分析/解析方式是否比正则表达式更好，还是我应该使用正则表达式并忘记这一点？
*   Java 中是否已经存在这样的库？
*   你知道任何显示一些示例解析/词法分析算法的教程吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T02:55:04.057

> 出于这样的目的，词法分析/解析方式是否比正则表达式更好，还是我应该使用正则表达式并忘记这一点？

正则表达式不能表达递归语法，并且您的语法似乎需要递归语法。如果是这种情况，那么正则表达式根本无法解决问题。

> Java 中是否已经存在这样的库？

这不是图书馆可以解决的问题。您要么需要使用解析器生成器系统（例如 Antlr 或 Javacc）来生成词法分析器和解析器，要么从头开始虚拟编写它/它们。前一种方法可能更好......除非您已经学习了涵盖该领域的Uni-level科目，或者准备进行广泛阅读。

> 你知道任何显示一些示例解析/词法分析算法的教程吗？

Antlr 和 Javacc 都有大量的教程材料和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T16:14:43.313

当不绑定到仅限 Java 时，您可以使用另一种语言的 PEG 解析器或 Rebol（它具有与 PEG 等效的解析“方言”）——或者返回 WAY 以获取 Icon 或 Unicon 甚至现在在 code.google 上的 Object Icon .com/p/objecticon

当我意识到 MIT Curl 网络内容语言 (www.curl.com) 为用户选择了正则表达式时，这是一个遗憾的时刻，尽管 Curl 具有宏并提供对 AST 的访问。

一般主题：解析器表达式语法 (PEG) 和 Packrat 解析。

Perl 的使用给我们留下了 PCRE，所以我们能做些什么，但在不需要时避免它（有 antlr 和 bison ......毫无疑问，它们也有适合它们的地方）

注意：Rebol、Icon 和 Curl 是基于表达式的语言（Icon 具有有限的回溯）。

其他的方式选项包括 Oz 和 Mercury （后者可以输出 erlang ）

我没有使用 pyPEG，因为我仅限于 Python 2.6.6；不再支持 python 解析 Lepl - 但将为 2.6 安装

[Python 中的解析选项包括http://theory.stanford.edu/~amitp/yapps/](http://theory.stanford.edu/~amitp/yapps/)上的 YAPPS和其他各种；注意：pyparsing 无法在某些 python 环境中安装

对于 Scala/Java，有这个 PEG 项目：[https ://github.com/sirthias/parboiled/wiki](https://github.com/sirthias/parboiled/wiki)

[您可以根据http://piumarta.com/software/peg/](http://piumarta.com/software/peg/)找到一个 Java 等同于 peg and leg

CiteSeer 有关于 Packrat 解析和 Mercury 的 Ralph Becket 文章（谷歌 PEG 解析水星网站：psu.edu）

AdventuresInMercury 博客中还有一系列 3 篇博文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T16:53:04.577

您可以尝试在 JVM 上使用[Scala 。](http://www.scala-lang.org/)[它使创建 DSL 变得非常容易。](http://www.scala-lang.org/node/1403)

# c# - 使用 c# 异步发送和检索 MySQL 数据

> ID：12443547
> 
> 赞同：2
> 
> 时间：2012-09-16T00:32:02.723
> 
> 标签：c#, mysql, database, asynchronous

我正在尝试在 C# 中创建某种机器人来加入网络浏览器游戏并收集数据并踢被禁止的人。我将我的数据发送到 MySQL 数据库，以便人们可以在网站上查找他们的数据。

我试图尽可能地简化我的代码，以更好地解释发生了什么。

我有一个 eventHandler ，当一个人在游戏中发生某些事情时会调用它，所以我相信它可以在同一时间被调用。

```
//EventHandler
public static void OnMessage(object sender, InOutPlayerc.Message m)
{
    int id = m.getInt(0);

    switch (m.Type)
    {
        //If a player logged in (m = [id, name])
        case "login":
            Player p = loadPlayerSQL(m.getString(1));
            if(p.Status == "BANNED") {
                kickPlayer(p);
            }
            else {
                //Store the player local, this way 
                savePlayerLocal(id, p);
            }
            return;

        //If a player said something (m = [id, chatmessage])
        case "talk":
            addTimesTalked(loadPlayerLocal(id));
            return;

        //If a player logs out (m = [id])
        case "logout":
            savePlayerSQL(loadPlayerLocal(id));
            return;
    }
} 
```

因为 InOutPlayerc.Message m 只包含不同 InOutPlayerc.Message.Type 的 id，所以我必须将播放器存储在本地。所以我可以通过提供 id 来取回 Player 对象。

```
public static void savePlayerLocal(int id, Player p){...};
public static Player loadPlayerLocal(int id){...}; 
```

这是我的其余功能：

```
public static Player loadPlayerSQL(string username)
{
    try
    {
        int timessaid;
        string status;
        using (MySqlCommand cmd = DB.CreateCommand())
        {
            cmd.CommandText = "SELECT * FROM Players WHERE Username = @Username";
            cmd.Parameters.AddWithValue("@Username", username);
            using (MySqlDataReader reader = cmd.ExecuteReader())
            {
                reader.Read();
                timessaid = Convert.ToInt32(reader["Chat"]);
                status = reader["Status"].ToString();
            }
        }
        return new Player(username, status, timessaid);
    }
    catch (Exception e)
    {
        return new Player(username, "DEFAULT", 0);
    }
}

public static void addTimesTalked(Player p)
{
    try
    {
        using (MySqlCommand cmd = DB.CreateCommand())
        {
            p.Chat = p.Chat + 1;
            cmd.CommandText = "UPDATE Players SET Chat = @Chat WHERE Username = @Username";
            cmd.Parameters.AddWithValue("@Username", p.Username);
            cmd.Parameters.AddWithValue("@Chat", p.Chat);
            cmd.ExecuteNonQuery();
        }
    }
    catch (Exception e)
    {
    }
}

public static void savePlayerSQL(Player p)
{
    try
    {
        using (MySqlCommand cmd = DB.CreateCommand())
        {
            cmd.CommandText = "UPDATE Players SET Status = @Status, Chat = @Chat WHERE Username = @Username";
            cmd.Parameters.AddWithValue("@Username", p.Username);
            cmd.Parameters.AddWithValue("@Status", p.Status);
            cmd.Parameters.AddWithValue("@Chat", p.Chat);
            cmd.ExecuteNonQuery();
        }
    }
    catch (Exception e)
    {
    }
} 
```

现在这是我的问题： - 我在 'if(p.Status == "BANNED") {' 处收到 System.NullReferenceException。这段代码是不是在函数中没有等待之前用 MySQL 数据创建 Player 对象的情况下立即调用？- 可以同时调用函数，同时创建 MySQL 命令。- 我希望处理所有 MySQL 查询。没有一个应该被跳过。

所以我在想一些异步的东西，或者在处理新的 MySQL 查询之前等待的锁？

我刚刚开始学习 C#，我发现这部分有点难以解决。有人可以帮我解决这些问题吗？或者甚至暗示我应该寻找什么？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:48:07.893

如果 id 和 username 不一样，那就是你的问题。您在 loadPlayerSQL(string username) 中的 SQL 将找不到您的用户，因为您传递的是 id 而不是用户名。

# mips - MIPS 加载字混淆

> ID：12443548
> 
> 赞同：1
> 
> 时间：2012-09-16T00:32:31.967
> 
> 标签：mips

谁能告诉我以下是什么意思？0($4) 我知道这可以重写为 [0+$4]M

```
lw $6, 0($4) 
```

我不确定 100($2) 部分，我知道这可以重写为 [100+$2]M

```
104: lw $1, 100($2) 
```

我想知道这意味着什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T00:41:11.720

这称为**索引寻址**。

```
lw $1, 100($2) 
```

它的意思是**“将地址（$2+100）处的字加载到$1”**

内存地址存储在**$2**中。100 是该地址的偏移量。

# perl - IO::All：如何读取 ARGV 和 DATA？

> ID：12443549
> 
> 赞同：2
> 
> 时间：2012-09-16T00:33:00.527
> 
> 标签：perl

如何创建一个[IO::All](http://search.cpan.org/perldoc?IO%3A%3AAll)对象来读取文件句柄 ARGV 和 DATA？

```
use strict;
use warnings;
use 5.010_000;
use IO::All;

# none of these work...
my $io = io->handle(DATA);
my $io = io->handle(\*DATA);
my $f = \*DATA;
my $io = io->handle($f);
my $io = io->handle({$f});
my $io = io->handle({DATA});
my $io = io->handle({\*DATA});

say $io->slurp();

__DATA__
FOO
BAR
QUUX 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T03:38:53.700

看起来像一个错误。传递句柄似乎不起作用，即使文档说应该这样做。这是一个示例，它消除了`DATA`.

```
use strict;
use warnings;

use IO::All;

open my $fh, "<", "/etc/passwd" or die $!;

# Either of these should work according to the docs.
# my $io = IO::All->new($fh);
my $io = io->file->handle($fh);
print $io->all; 
```

[请提交一个错误](https://rt.cpan.org/Public/Dist/Display.html?Name=IO-All)。

# user-interface - 使用 Google 站点中的 GAS 在 Flex Table 中加载 GUI 表单组件的正确语法

> ID：12443557
> 
> 赞同：0
> 
> 时间：2012-09-16T00:35:25.503
> 
> 标签：user-interface, google-apps-script, google-sites

在回答[这个问题](https://stackoverflow.com/questions/12432380/getting-ui-form-to-render-inside-html-table-in-gas/)时，我被指出了使用弹性表格显示一个简短表格来收集表格中每一行的数据（通过 GUI 构建）的有用方向（显示在 Google 协作平台中）。

但是，语法似乎存在一些问题。具体来说，虽然我可以让表格的其余部分正确呈现，但我无法让 GUI 构建的表单与它一起成功呈现。

```
function doGet(){
    var app     = UiApp.createApplication();
    var tab     = app.createFlexTable();
    app.add(tab
               .insertRow(0).insertRow(0).insertRow(0)
               .insertCell(0, 0).setText  (0, 0, "data01")
               .insertCell(0, 1).setText  (0, 1, "data02")
               .insertCell(0, 2).setWidget(0, 2, app.loadComponent("myGui"))
               .insertCell(1, 0)
               .insertCell(1, 1)
               .insertCell(2, 0)
               .setBorderWidth(5).setCellPadding(10).setCellSpacing(10));
    return app;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:47:36.990

.insertCell() 将弹性表作为返回值。因此，连续的 .setText() 方法是不正确的。使用 FlexTable，您可以只使用几次 setWidget 方法。无需单独的 .insertRow 或 .insertCell 方法调用。FlexTable 能够让每一行包含不同数量的单元格，但是（使用您提供的代码段）我认为在这种情况下不需要。

具有 1 行和 5 列的示例表。

```
tab.setWidget(0, 0, <Widgets or plain text>);
tab.setWidget(0, 1, <Widgets or plain text>);
tab.setWidget(0, 2, <Widgets or plain text>);
tab.setWidget(0, 3, <Widgets or plain text>);
tab.setWidget(0, 4, <Widgets or plain text>); 
```

此链接显示 FlexTable 的所有可用方法和属性。 [https://developers.google.com/apps-script/class_flextable](https://developers.google.com/apps-script/class_flextable)

您是否基于谷歌示例代码的代码？试试 Google'ing: '"Google apps script" FlexTable' 并查看其他开发人员的示例。这听起来很奇怪，但有（很多）比谷歌的例子更好（在我看来），它会让你对实现目标的不同方式有所了解。

最后一个提示。代码的可读性非常重要，尤其是在编写大量代码时。如果您仍然想使用 .insertRow 和 .insertCell 方法调用，请尝试按顺序使用它们每个单独的行。

希望这可以帮助。

# uilabel - 如何判断文本是否不适合 UILabel

> ID：12443558
> 
> 赞同：1
> 
> 时间：2012-09-16T00:35:34.240
> 
> 标签：uilabel

我不想调整标签的大小，也不想缩小字体大小。我只需要知道当前文本是否适合标签的当前框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T00:43:35.180

Apple 已将其包含在 UIKit 框架中。*您可以使用sizeWithFont:*方法或其变体之一计算具有给定字体的字符串的大小。

这是一个例子：

```
NSString *testStr = @"This is a test string";
CGSize strSize = [testStr sizeWithFont:[UIFont boldSystemFontOfSize:16]];
CGFloat width = strSize.width; 
```

从该示例中获取*宽度*并将其与标签的宽度进行比较。

以下是文档：[https ://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:46:02.603

采用

[[UILabel text] sizeWithFont:defaultFont constrainedToSize:defaultSize lineBreakMode:UILineBreakModeWordWrap]

方法

# cocos2d-iphone - World->DestroyJoint(mouseJoint) on TouchesEnded : EXC_BAD_ACCESS

> ID：12443563
> 
> 赞同：2
> 
> 时间：2012-09-16T00:36:24.060
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我有多个带有物理实体的精灵。用户一次移动一个精灵。创建一个鼠标关节来支持移动。使用 Cocos2d V2.0

在 QueryAABB(&callback, aabb) 报告夹具后，鼠标关节在 ccTouchesBegan 中初始化。下面三个方法之间的逻辑重新 Mouse Joint

界面内

```
b2World* world;             
GLESDebugDraw *m_debugDraw; 

b2MouseJoint *mouseJoint;
b2Body* groundBody;              

float _boxHeight;
float _boxWidth;
int sectionW;

b2MouseJoint *m_mouseJoint; 
```

执行

我大部分时间都在 TOUCHES ENDED 中的上面一行得到一个 EXC_BAD_ACCESS，xcode 在线程 Thread 1 上显示以下内容

```
0 0x0000000
1 b2World::DestroyJoint(b2Joint*)
2 -[matchSprites ccTouchesEnded::withEvent
3 -[NSObject .... more lines reported 
```

在上面的 0 步骤，它显示在右侧窗口错误：地址不包含指向目标文件中的部分的部分

到目前为止，我一直遵循提供的建议但没有成功，此时看不到是什么产生了这种情况，在测试时我倾向于认为我破坏对象的方式会导致问题（即，如果我禁用了正在破坏对象）没有这样的错误。任何帮助将不胜感激。

完整代码如下

```
-(id) init
{
if( (self=[super init])) {

    self.isTouchEnabled = YES;

        // Load physics file
        [[GB2ShapeCache sharedShapeCache] addShapesWithFile:@"imagesphysics.plist"];

        // Add number images to cache
        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"images.plist"];

        // init physics
        [self initPhysics];

        // Tags for the options are based on 500
        int numberOfOptions = 2;
        CGSize s = [CCDirector sharedDirector].winSize;

        sectionW = s.width / numberOfOptions;

        for (int i = 0; i < 2; i++) { 

            // Add target matching Sprites
            CCSprite *targetSprite = [CCSprite spriteWithSpriteFrameName:[NSString stringWithFormat:@"%d.png",i+1]];
            targetSprite.position = CGPointMake(i * sectionW + (sectionW/2.0)  ,s.height * 0.75); 
            [targetSprite runAction:[CCTintBy actionWithDuration:0.2f red:50 green:50 blue:40]];
            targetSprite.scale = 0.6f;
            [self addChild:targetSprite z:30 tag:i+1];

            // Add source matching physics sprites
            [self addNewSpriteAtPosition:CGPointMake(i * sectionW + (sectionW/2.0)  ,s.height * 0.35) number:i bodyType:b2_dynamicBody];
        }

        [self scheduleUpdate];
    }
    return self;
}

// Add Sprites

-(void) addNewSpriteAtPosition:(CGPoint)p number:(int)number bodyType:(b2BodyType)bodyType
{
    CCLOG(@"Add sprite %0.2f x %02.f",p.x,p.y);

    CCSprite *sprite = [CCSprite spriteWithSpriteFrameName:[NSString stringWithFormat:@"%d.png",number+1]];
    sprite.scale = 0.6f;

    sprite.position = ccp(p.x,p.y);
    [self addChild:sprite z:35 tag:(number+1)+100];     

    // Define the dynamic body.
    b2BodyDef bodyDef;
    bodyDef.type = bodyType; 
    bodyDef.position.Set(p.x/PTM_RATIO, p.y/PTM_RATIO);

    bodyDef.userData = sprite;

    b2Body *body = world->CreateBody(&bodyDef);

    // Load the fixture using the vertices file generated by Physics Editor
    [[GB2ShapeCache sharedShapeCache] addFixturesToBody:body forShapeName:[NSString stringWithFormat:@"%d",number+1] forSprite:sprite];
    [sprite setAnchorPoint:
     [[GB2ShapeCache sharedShapeCache] anchorPointForShape:[NSString stringWithFormat:@"%d",number+1]]];

}

//Update the physics

    -(void) update: (ccTime) dt
    {

        int32 velocityIterations = 8;
        int32 positionIterations = 1;

        CGSize s = [CCDirector sharedDirector].winSize;

        world->Step(dt, velocityIterations, positionIterations);
        world->ClearForces();   

        // Store objects to be destroyed
        std::vector<b2Body *>toDestroy;

        CCSprite *currentSprite;
        CCSprite *targetSprite;
        int currentTag;

        for (b2Body *b = world->GetBodyList(); b; b=b->GetNext()) {

            if (b->GetUserData() != NULL) {

                CCSprite *obj = (CCSprite*)b->GetUserData();
                obj.position = CGPointMake( b->GetPosition().x * PTM_RATIO, b->GetPosition().y * PTM_RATIO);
                obj.rotation = -1 * CC_RADIANS_TO_DEGREES(b->GetAngle());

                // Calculate the bounding box for this sprite
                _boxHeight = obj.boundingBox.size.height;
                _boxWidth = obj.boundingBox.size.width;

                currentSprite = (CCSprite *)b->GetUserData();
                currentTag = currentSprite.tag;
                targetSprite = (CCSprite *)[self getChildByTag:currentTag - 100];

                // SPECIFIC - matching sprite is tag + 100 of current userdata sprite for b object
                float distX = b->GetPosition().x * PTM_RATIO - targetSprite.position.x;
                float distY = b->GetPosition().y * PTM_RATIO - targetSprite.position.y; 

                if (distX * distX + distY * distY < (_boxWidth * _boxHeight) && b->GetType() == b2_dynamicBody) {
                    // Destroy object later
                    toDestroy.push_back(b);
                }

            } // if b-getuserdata

        }

        // Destroy objects

        std::vector<b2Body *>::iterator pos2;
        for(pos2 = toDestroy.begin(); pos2 != toDestroy.end(); ++pos2) {
            b2Body *body = *pos2;
            if (body->GetUserData() != NULL) {

                // Remove target matching
                CCSprite *sprite = (CCSprite *) body->GetUserData();
                currentTag = currentSprite.tag;
                targetSprite = (CCSprite *)[self getChildByTag:currentTag - 100];
                [self removeChild:sprite cleanup:YES];

                // Remove physics body associated with the Sprite
                world->DestroyBody(body);

    // This line has been commented  then test and the error persist!!!!
                    [self addNewSpriteAtPosition:CGPointMake(targetSprite.position.x  ,s.height * 0.75) number:targetSprite.tag-1 bodyType:b2_staticBody];
                }

        }

    }

//Init physics

-(void) initPhysics
{

    CGSize s = [[CCDirector sharedDirector] winSize];

    b2Vec2 gravity;
    gravity.Set(0.0f, -4.81f);
    world = new b2World(gravity);

    // Do we want to let bodies sleep?
    world->SetAllowSleeping(true);

    world->SetContinuousPhysics(true);

    m_debugDraw = new GLESDebugDraw( PTM_RATIO );
    //world->SetDebugDraw(m_debugDraw);

    uint32 flags = 0;
    flags += b2Draw::e_shapeBit;
            flags += b2Draw::e_jointBit;
            flags += b2Draw::e_aabbBit;
            //flags += b2Draw::e_pairBit;
            //flags += b2Draw::e_centerOfMassBit;
    m_debugDraw->SetFlags(flags);

    // Define the ground body.
    b2BodyDef groundBodyDef;
    groundBodyDef.position.Set(0, 0); // bottom-left corner

    // Call the body factory which allocates memory for the ground body
    // from a pool and creates the ground box shape (also from a pool).
    // The body is also added to the world.

    groundBody = world->CreateBody(&groundBodyDef);

    // Define the ground box shape.
    b2EdgeShape groundBox;

    // bottom

    groundBox.Set(b2Vec2(0,0), b2Vec2(s.width/PTM_RATIO,0));
    groundBody->CreateFixture(&groundBox,0);

    // top
    groundBox.Set(b2Vec2(0,s.height/PTM_RATIO), b2Vec2(s.width/PTM_RATIO,s.height/PTM_RATIO));
    groundBody->CreateFixture(&groundBox,0);

    // left
    groundBox.Set(b2Vec2(0,s.height/PTM_RATIO), b2Vec2(0,0));
    groundBody->CreateFixture(&groundBox,0);

    // right
    groundBox.Set(b2Vec2(s.width/PTM_RATIO,s.height/PTM_RATIO), b2Vec2(s.width/PTM_RATIO,0));
    groundBody->CreateFixture(&groundBox,0);
}

//Touches handling

-(void)registerWithTouchDispatcher {

    [[[CCDirector sharedDirector] touchDispatcher] addStandardDelegate:self priority:0];
}

-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (mouseJoint != NULL) return;

    UITouch *myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView:[myTouch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];
    b2Vec2 p = b2Vec2(location.x / PTM_RATIO, location.y / PTM_RATIO);

    // Make a small box.
    b2AABB aabb;
    b2Vec2 d;
    d.Set(0.001f, 0.001f);
    aabb.lowerBound = p - d;
    aabb.upperBound = p + d;

    // Query the world for overlapping shapes.
    QueryCallback callback(p);
    world->QueryAABB(&callback, aabb);

    if (callback.m_fixture)
    {
        b2Body* body = callback.m_fixture->GetBody();
        b2MouseJointDef md;
        md.bodyA = groundBody;
        md.bodyB = body;
        md.target = p;
        md.maxForce = 1500.0f * body->GetMass();

        mouseJoint = nil;
        mouseJoint = (b2MouseJoint*)world->CreateJoint(&md);
        pointer = &mouseJoint;
        NSLog(@"Pointer: %p", *pointer);
        //mouseJoint = (b2MouseJoint*)world->CreateJoint(&md);
        body->SetAwake(true);
    }
    [self ccTouchesMoved:touches withEvent:event];
}

-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (mouseJoint == NULL) return;

    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView: [touch view]];
    location = [[CCDirector sharedDirector] convertToGL: location];
    b2Vec2 locationWorld = b2Vec2(location.x / PTM_RATIO, location.y / PTM_RATIO);

    mouseJoint->SetTarget(locationWorld);

}

-(void)ccTouchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (mouseJoint) {
        world->DestroyJoint(mouseJoint);  // TODO INVESTIGATE WHY THIS CAUSES A BAD ACCESS ERROR
        mouseJoint = nil;

    }
}

-(void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

    if (mouseJoint) {

        //CCLOG(@"WORLD is nil %d",world != nil);
        //CCLOG(@"MOUSEJOINT is nil %d",mouseJoint != nil);

        NSLog(@"Pointer: %p", *pointer);

        mouseJoint->SetTarget(b2Vec2_zero);
        world->DestroyJoint(mouseJoint);  // TODO INVESTIGATE WHY THIS CAUSES A BAD ACCESS ERROR
        mouseJoint = NULL;
        CCLOG(@"MOUSE JOINT WAS DESTROYED SUCCESSFULLY!!!!!");
    }
}

//Query Callback

    class QueryCallback : public b2QueryCallback
    {
    public:
        QueryCallback(const b2Vec2& point)
        {
            m_point = point;
            m_fixture = NULL;
        }

        bool ReportFixture(b2Fixture* fixture)
        {
            b2Body* body = fixture->GetBody();
            if (body->GetType() == b2_dynamicBody)
            {
                bool inside = fixture->TestPoint(m_point);
                if (inside)
                {
                    m_fixture = fixture;

                    // We are done, terminate the query.
                    return false;
                }
            }

            // Continue the query.
            return true;
        }

        b2Vec2 m_point;
        b2Fixture* m_fixture;
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:38:46.857

你确定这不仅仅是一个错字吗？我在某些地方看到了**mouseJoint ，在其他地方看到了****MouseJoint**。您测试**MouseJoint**，但您破坏**了 mouseJoint**。

我承认，我正在尝试用鼠标关节解决完全相同的错误，所以我希望在这里找到答案。所有迹象都指向在我调用 DestroyJoint 之前被其他操作删除的关节，以便处理空指针，因此如果**MouseJoint**不是 nil 但**mouseJoint** *是，*那么它可能会解释你的情况下的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T02:02:32.560

我正在从事的当前项目也有同样的问题。每次我试图破坏一个附有 mouseJoint 的身体时，我都会遇到程序崩溃（exC_BAD_ACCESS in touchesEnded:)。

我的 touchesEnded: 代码与上面类似：

```
- (void) touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event 
{
    if (mouseJoint != NULL)
    {
        world->DestroyJoint(mouseJoint);
        mouseJoint = NULL;
    }
} 
```

Box2d 确实会在它们被破坏时破坏附着在身体上的关节。但是，我猜 Box2d 在通过 DestroyJoint 销毁关节指针后不会使其无效？

无论如何，我防止程序崩溃的方法是在我的 body 销毁函数中，我首先销毁了 mouseJoint（并将其设置为 NULL），然后再销毁 body。我用于销毁主体的代码（如果附加到要删除的主体，则首先删除 mouseJoint）如下：

```
-(void)destroyActor:(ObjectView *)objectView
{
    b2Body* b = (b2Body*)objectView.tag;

    // Destroy mouseJoint if attached to body b

    b2JointEdge* jl = b->GetJointList();

    while (jl)
    {
        b2Joint* j = jl->joint;

        if (j == mouseJoint)
        {
            world->DestroyJoint(j);
            mouseJoint = NULL;
            break;
        }

        jl = jl->next;
    }

    world->DestroyBody(b);
    [objectView removeFromSuperview];
    [objectView release];
} 
```

在我的代码中，ObjectView* 只是我用来处理演员的 UIImageView 的一个子类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T16:28:48.590

我试图解决同样的问题。当附加的精灵/主体将被破坏时，我在代码中有其他地方会破坏鼠标关节等。结果你必须确保只在触摸事件中管理鼠标关节，其余的留给Box2D。

您的代码中是否还有其他地方可能会修改鼠标关节变量，例如在 tick: 方法中？

这些是我接触鼠标关节的唯一地方。它似乎也映射到您的用例。我正在使用 LevelHelper 事件代码，所以方法签名看起来有点不同。正确地做这件事大大简化了事情。

```
-(void)touchBegin:(LHTouchInfo*)info {
    CGPoint location = [[CCDirector sharedDirector] convertToGL: [info.touch locationInView: [info.touch view]]];
    _lastBrickTouched = info.sprite;
    _mouseJoint = [lh mouseJointForBody: _lastBrickTouched.body touchPoint: location];
}

-(void)touchMoved:(LHTouchInfo*)info{
    CGPoint touchZone = [info.touch locationInView:[info.touch view]];
    touchZone = [[CCDirector sharedDirector] convertToGL:touchZone];
    b2Vec2 p;
    p.Set(touchZone.x/PTM_RATIO, touchZone.y/PTM_RATIO);

    if (_mouseJoint != nil)
    {
        _mouseJoint->SetTarget(p);
    }
}

-(void)touchEnded:(LHTouchInfo*)info {
    if (_mouseJoint != nil) {
        world->DestroyJoint(_mouseJoint);
        _mouseJoint = nil;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-03T13:15:08.103

I'll add some suggestions to check. I'm using box2d in libGDX. Both body and joint must be destroyed by world.destroyBody() and world.destroyJoint() accordingly. The order to destroy is the following:

1.  All joints
2.  All related bodies, not before 1!
3.  When all 1 & 2 destroyed, you may dispose world itself

And another thing to think of is the fact, that in box2d (libGDX's) mouseJoint is like the other joints has 2 bodies attached: bodyA & bodyB. But one of them is fictional - it may be any static body. I use fictional offscreen body. When deleting joints you may accidently remove that body. And all other joints may work well! But you'll indeed get exception when creating new joint, because of using badptr or null body, which is inexceptable. So, you must allways carefully destroy that fictional body. For example, you may add some MouseJointHelper class like:

```
class MouseJointHelper
{
  Body fictionalBody;

  MouseJoint createJoint(...) //here we create joint, using fictional body
  void destroyJointAndBodies(MouseJoint joint) //destroy joint and bodyA, assuming that bodyB is the same for all (fictional body)
  void dispose() //in destructor method destroy fictional body
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T12:52:20.347

我有同样的崩溃错误：

```
Thread 1, Queue : com.apple.main-thread
error: address doesn't contain a section that points to a section in a object file 
```

我通过将**-Obj**C 标志添加到 **Other Linker Flags 来**修复它。

# php - 在字符串php中提取字符串

> ID：12443565
> 
> 赞同：1
> 
> 时间：2012-09-16T00:36:54.387
> 
> 标签：php, string, substring, extract

所以我有这个脚本可以在更大的字符串中提取给定的字符串：

```
function get_string($string, $start, $end){
 $string = " ".$string;
 $pos = strpos($string,$start);
 if ($pos == 0) return "";
 $pos += strlen($start);
 $len = strpos($string,$end,$pos) - $pos;
 return substr($string,$pos,$len);
} 
```

所以这是字符串：

```
$string= '<b>Sample Sample</b> <b>Sample2 Sample2</b>';

$output = get_string($string, '<b>','</b>');

echo $output; 
```

我真的需要一些帮助，因为我没有想法。现在，当我回声时，`$output`我得到

```
Sample Sample 
```

我想做一个同时显示两者的更改：

```
Sample Sample 

Sample2 Sample2 
```

你们中的任何人有任何想法如何修改函数并使其输出某种结果数组 `$output[0]`吗`$output[1]`？

提前谢谢你，祝你有个美好的一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:40:55.187

您可能会发现这更简单，也更容易理解：

```
function get_string($string, $start, $end) {
    $start = preg_quote($start, '|');
    $end = preg_quote($end, '|');
    $matches = preg_match_all('|'.$start.'([^<]*)'.$end.'|i', $string, $output);
    return $matches > 0
        ? $output[1]
        : array();
}        

$string= '<b>Sample Sample</b> <b>Sample2 Sample2</b>';
$output = get_string($string, '<b>', '</b>');    
print_r($output); 
```

输出：

```
Array
(
    [0] => Sample Sample
    [1] => Sample2 Sample2
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T00:41:23.410

修改您的函数，以便只要`while`, 该函数为您提供一个字符串，将其添加到数组中，然后在字符串末尾再次运行该函数。

编辑：

如果您碰巧想自己尝试，不想拼出正确的解决方案。这是一种方法，可以得到你想要的。我试图对您的原始帖子进行尽可能少的更改：

```
function get_string($string, $start, $end){
    $found = array();
    $pos = 0;
    while( true )
    {
        $pos = strpos($string, $start, $pos);
        if ($pos === false) { // Zero is not exactly equal to false...
            return $found;
        }
        $pos += strlen($start);
        $len = strpos($string, $end, $pos) - $pos;
        $found[] = substr($string, $pos, $len);
    }
}

$string = '<b>Sample Sample</b> <b>Sample2 Sample2</b>';

$output = get_string($string, '<b>','</b>');

var_dump( $output ); 
```

输出：

```
array(2) {
  [0]=>
  string(13) "Sample Sample"
  [1]=>
  string(15) "Sample2 Sample2"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T00:50:55.760

查看上面的示例，字符串包含 b 标签，它们是 HTML 标签。

PHP 库定义了一个名为 strip_tags 的函数，它将从字符串中去除 HTML 标记。

因此，您的输出字符串将生成纯文本字符串，并从字符串中删除所有 HTML 标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T00:54:18.607

我讨厌不得不使用正则表达式，所以这里有一个非膨胀软件版本：

```
function get_string($string, $start, $end){
 $results = array();
 $pos = 0;
 do {
   $pos = strpos($string,$start,$pos);
   if($pos === FALSE) break;
   $pos += strlen($start);
   $len = strpos($string,$end,$pos) - $pos;
   $results[] = substr($string,$pos,$len);
   $pos = $pos + $len;
 } while(1);
 return $results;
}

$string= '<b>Sample Sample</b> <b>Sample2 Sample2</b>';

$output = get_string($string, '<b>','</b>');

var_dump($output); 
```

输出：

```
array(2) { [0]=> string(13) "Sample Sample" [1]=> string(15) "Sample2 Sample2" } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-17T14:11:24.453

这可以帮助....

```
function get_string($string, $start, $end = null) {
     $str = "";
     if ($end == null) {
         $end = strlen($string);
     }
     if ($end < $start) {
         return $string;
     }
     while ($start < $end) {
          $str .=$string[$start];
          $start++;
     }
     return $str;
 } 
```

# java - Logback.xml 没有登录到 ConsoleAppender？

> ID：12443569
> 
> 赞同：7
> 
> 时间：2012-09-16T00:37:19.560
> 
> 标签：java, logback

我正在尝试在 slf4j 中设置一个带有 logback 的控制台记录器。我的logback配置如下：

```
<configuration>

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
  <!-- encoders are assigned the type
       ch.qos.logback.classic.encoder.PatternLayoutEncoder by default -->
    <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
      <pattern>%-4relative [%thread] %-5level %logger{35} - %msg %n</pattern>
    </encoder>
  </appender>

  <logger name="org.hibernate" level="INFO" />
  <logger name="com.myapp" level="TRACE" />

  <root level="DEBUG">
    <appender-ref ref="STDOUT" />
  </root>
</configuration> 
```

尽管 Logback 似乎设置没有问题，但我似乎无法将任何记录器的输出输入到我的控制台中。我已经测试了 LOGGER.isInfoEnabled() 在我的应用程序中返回 true。

Logback 的 StatusPrinter 的输出：

```
17:25:11,736 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
17:25:11,737 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/Users/ryanspicer/NetBeansProjects/Oncewhen/build/classes/logback.xml]
17:25:11,996 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
17:25:11,996 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
17:25:12,000 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
17:25:12,038 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@12:74 - no applicable action for [encoder], current pattern is [[configuration][appender][encoder]]
17:25:12,038 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@13:16 - no applicable action for [pattern], current pattern is [[configuration][appender][encoder][pattern]]
17:25:12,038 |-ERROR in ch.qos.logback.core.ConsoleAppender[STDOUT] - No layout set for the appender named "STDOUT".
17:25:12,038 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Popping appender named [STDOUT] from the object stack
17:25:12,038 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.hibernate] to INFO
17:25:12,038 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting additivity of logger [org.hibernate] to true
17:25:12,038 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [com.myapp] to TRACE
17:25:12,038 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting additivity of logger [com.myapp] to true
17:25:12,038 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to DEBUG
17:25:12,038 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[root] 
```

任何想法可能会发生在这里，以及如何修复它并获得工作日志输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T08:49:52.647

从状态输出来看，您使用的是 logback 0.9.18 或更早版本。您应该尝试使用最新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:41:40.090

对于那些由于第三方依赖而需要使用 logback 0.9.18 的人，请参阅此答案以获取有关如何配置附加程序的示例。

[使用 EJB3.1 进行登录](https://stackoverflow.com/questions/2418069/logback-with-ejb3-1)

# backbone.js - 骨干网：没有散列的直接页面访问

> ID：12443575
> 
> 赞同：0
> 
> 时间：2012-09-16T00:38:06.103
> 
> 标签：backbone.js, deep-linking, backbone-routing

针对我在 Backbone.js 中不断遇到的问题回答我自己的问题...

在我的 Backbone 应用程序中，我希望用户能够直接导航到内部“页面”，而无需在 URL 中键入井号 (#)。开箱即用，[Backbone Boilerplate](https://github.com/tbranyen/backbone-boilerplate)似乎不支持这一点，即使它确实支持[pushState](http://backbonejs.org/#History-start)。

显然，用户只要从主页开始就可以到达任何位置。或者他们可以直接跳到内部页面，但前提是域之后直接有一个井号 (#) 或紧跟在初始斜线之后。

我找到了一个似乎有效的解决方案。我在这里为其他有同样问题的人发布它，看看是否有人知道更好的方法，因为我在其他地方找不到这个确切的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:38:06.103

在尝试破解 Backbone Boilerplate 一段时间后，我突然想到 BBB 只需要哈希就可以了，如果它还没有的话。

所以我的解决方案是在我的`.htaccess`文件中附加一个重写规则，如果找不到请求的页面，请在域后使用哈希重试。

```
<IfModule mod_rewrite.c>
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.+)$ /#$1 [R,L,NE]
</IfModule> 
```

到目前为止，它似乎工作正常。这一直困扰着我一段时间，我认为其他人可能在同一条船上。

如果有人知道实现此目的的更好方法，或者我的解决方案可能导致的任何问题，请随时回复。

# wordpress - Wordpress 自定义帖子类型 - 评论不起作用

> ID：12443581
> 
> 赞同：1
> 
> 时间：2012-09-16T00:39:06.947
> 
> 标签：wordpress, comments, custom-post-type

我注意到 ID 高于 9 的自定义帖子类型上的评论无法正常工作。

有什么我们可以做的吗？

这是我的代码

在我的functions.php文件中

```
// register post type MySpecialPost
add_action( 'init', 'register_cpt_MySpecialPost' );
function register_cpt_MySpecialPost() {
$labels = array( 
'name' => _x( 'MySpecialPost', 'MySpecialPost' ),
'singular_name' => _x( 'MySpecialPost', 'MySpecialPost' ),
'add_new' => _x( 'Ajouter', 'MySpecialPost' ),
'add_new_item' => _x( 'Ajouter une MySpecialPost', 'MySpecialPost' ),
'edit_item' => _x( 'Modifier', 'MySpecialPost' ),
'new_item' => _x( 'Nouvelle MySpecialPost', 'MySpecialPost' ),
'view_item' => _x( 'Voir la MySpecialPost', 'MySpecialPost' ),
'search_items' => _x( 'Recherche', 'MySpecialPost' ),
'not_found' => _x( 'Aucune MySpecialPost trouvé', 'MySpecialPost' ),
'not_found_in_trash' => _x( 'Aucune MySpecialPost trouv&eacute;', 'MySpecialPost' ),
'parent_item_colon' => _x( 'Parent Service:', 'MySpecialPost' ),
'menu_name' => _x( 'MySpecialPost', 'MySpecialPost' ),
);

$args = array( 
'labels' => $labels,
'hierarchical' => false,

'supports' => array( 'title', 'editor', 'comments', 'excerpt', 'custom-fields', 'thumbnail', 'revisions', 'author', 'page-attributes' ),            

'public' => true,
'show_ui' => true,
'show_in_menu' => true,
'menu_position' => 21,

'show_in_nav_menus' => true,
'publicly_queryable' => true,
'exclude_from_search' => false,
'has_archive' => true,
'query_var' => true,
'can_export' => true,
'rewrite' => true,
'capability_type' => 'page'
);
register_post_type( 'MySpecialPost', $args );
} 
```

# android - 布局动画控制器只调用一次

> ID：12443591
> 
> 赞同：0
> 
> 时间：2012-09-16T00:42:48.447
> 
> 标签：android, listview, animation, controller, layout-animation

我的布局动画有问题。

布局是一个列表视图，当加载列表视图时，它的行从左侧（android.R.anim.slide_in_left）滑入屏幕，在每个孩子之后，使用 LayoutAnimationController 会有一些延迟。

一切都很好。

我还有一个删除所有行的方法。

我尝试使用相同的技术对此进行动画处理，只是动画将行滑出屏幕（android.R.anim.slide_out_right）。然而，这似乎不起作用，行没有动画，如果我滚动 listView 似乎只有一些随机滑出。有点奇怪。

可能是什么问题，或者如果这是预期的行为，有什么解决方法？

PS如果我们可以让它工作，有没有办法在使用布局动画控制器时设置类似动画监听器的东西？所以我实际上可以删除 onAnimationEnd() 方法中的行。平常的东西。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:59:38.460

这可能有帮助，也可能没有帮助，但值得一试：

我正在使用布局并在全球范围内听取任何变化。

```
fLayout.getViewTreeObserver().addOnGlobalLayoutListener(
                new OnGlobalLayoutListener() {
                    @Override
                    public void onGlobalLayout() {
                        Log.d(LOG_TAG, "fLayout global layout");
                        fLayout.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                        //code here
}); 
```

# c++ - 如何处理 Visual Studio C++ 中的 math.h 污染？

> ID：12443595
> 
> 赞同：1
> 
> 时间：2012-09-16T00:44:43.213
> 
> 标签：c++, visual-studio, namespaces, standards-compliance

在 Visual Studio 2012 中，我无法将某些名称声明为全局标识符，因为它们已在 math.h 中声明。遗留问题使我不方便重命名源代码中的标识符。除了重命名还有什么选择？

```
#include "stdafx.h"
// iostream includes math.h which declares the following
_CRT_NONSTDC_DEPRECATE(_y1) _CRTIMP double  __cdecl y1(_In_ double _X);

int y1; // error - y1 is already declared

void Main()
{
    return;
} 
```

额外问题：Visual Studio 2012 是否以一致的方式处理此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:47:09.423

因为这是 C++，你应该为你自己的东西使用一个**命名空间，特别是如果你有全局变量。**

```
#include "stdafx.h"

namespace MyApp
{
    int y1; // MyApp::y1
} 
```

这样，您可以依赖**using**关键字，您需要在`y1`没有命名空间名称的情况下使用变量：

```
using MyApp::y1; // Now also y1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:17:43.917

标识符`y1`可能出现在 的某些版本中`<math.h>`，但它不是由 C 或 C++ 标准定义的。您应该能够以一种避免声明的方式调用编译器`y1`，也许是通过禁用语言扩展。如果编译器不允许你这样做，那是实现中的一个错误。

`y1()`是“第二类贝塞尔函数”之一（我不太确定这是什么意思）。它[由 POSIX 指定](http://pubs.opengroup.org/onlinepubs/009695299/functions/y0.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T02:20:40.133

正如我在评论中所说，`iostream`不会包括`math.h`，而是`cmath`。细微的区别是`cmath`将所有内容都放在`std`名称空间中。问题是你正在做如下的事情......

```
using namespace std; 
```

……**不要**。如您所见，您自己在全局命名空间中引入了歧义。相反，请尝试明确指定您需要的内容，而不是使用包含的标头中声明的任何成员来`std`污染全局命名空间。`std`您还应该避免使用全局变量和全局命名空间本身。

作为旁注，尝试显示整个代码，因为这里`_tmain`调用的内容不清楚`Main`。

# timer - 单击jQuery后添加计时器

> ID：12443597
> 
> 赞同：0
> 
> 时间：2012-09-16T00:44:53.857
> 
> 标签：timer, accordion

我有一个带有 jquery 的简单手风琴：

```
$(document).ready(function() {
    $('div.question').click(function() {
        $('div.answer').slideUp(600);   
        $(this).next().slideDown(600);
    });
    $("div.answer").hide();
}); 
```

HTML：

```
<div class="question">Question</div>
<div class="answer">Answer</div> 
```

如何在显示答案 div 之前添加和显示计时器？

我的要求是，在单击问题 div 后，我需要显示一个 30 秒的带有加载图像的计时器，30 秒后我想显示答案 div。

谢谢 :">

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:50:32.903

用于在 30 秒内`setTimeout(f, 30000);`调用函数。`f`

# php - 使用php从网页下载图像

> ID：12443598
> 
> 赞同：1
> 
> 时间：2012-09-16T00:44:59.063
> 
> 标签：php

我正在尝试创建一个 PHP 函数，该函数从您作为参数输入的网页下载图像。然而，网页本身虽然是一种画廊，只有非常小的图像缩略图版本，每个都直接链接到我想下载到本地计算机的较大的完整 jpeg 图像。所以图像不会直接从我放入函数的网页本身下载，而是从网页上这些 jpeg 图像文件的各个链接下载。

例如：

```
www.somesite.com/galleryfullofimages/ 
```

是图片库的位置，

然后我想要的画廊中的每个 jpeg 图像文件都位于以下位置：

```
www.somesite.com/galleryfullofimages/images/01.jpg
www.somesite.com/galleryfullofimages/images/02.jpg
www.somesite.com/galleryfullofimages/images/03.jpg 
```

到目前为止，我一直在尝试使用该`file_get_contents`函数将网页的完整 html 作为字符串获取，然后尝试隔离`<a href="images/01.jpg">`引号内的所有元素并将它们放入数组中。然后使用这个数组来定位每个图像并通过循环下载它们。

这是我到目前为止所做的：

```
<?php

$link = "http://www.somesite.com/galleryfullofimages/";
$contents = file_get_contents($link);

$results = preg_split('/<a href="[^"]*"/', $contents);

?> 
```

但我被困在这一点上。我对正则表达式也完全陌生，正如你所看到的，我尝试使用它。如何隔离每个图像链接然后下载图像？还是有更好的方法来完全做到这一点？我还阅读了有关使用 cURL 的信息。但我似乎也无法实现这一点。

我希望这一切都有意义。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T02:55:11.487

这通常称为“抓取”网站。您已经在检索页面的标记，因此您有了一个良好的开端。

这是您接下来需要做的事情：

```
<?php
// Load the retrieved markup into a DOM object using PHP's
// DOMDocument::loadHTML method.
    $docObj = new DOMDocument();
    $docObj->loadHTML($contents);

// Create a XPath object.
    $xpathObj = new DOMXpath($docObj);

// Query for all a tags. You can get very creative here, depending on your
// understanding of XPath. For example, you could change the query to just
// return the href attribute directly. This code returns all anchor tags in
// the page, if the href attribute ends in ".jpg".
    $elements = $xpathObj->query('//a[ends-with(@href,".jpg")]');

// Process the discovered image URL's. You could use cURL for this,
// or file_get_contents again (since your host has allow_url_fopen enabled)
// to fetch the image directly and then store it locally.
    foreach ($elements as $domNode)
    {
        $url = $domNode->getAttribute('href');
    }
?> 
```

[DOMDocument::loadHTML](http://php.net/manual/en/domdocument.loadhtml.php)
[XPath](http://php.net/manual/en/class.domxpath.php)
[XPath::query](http://www.php.net/manual/en/domxpath.query.php)
[allow_url_fopen](http://php.net/manual/en/filesystem.configuration.php)

# routes - 在 Symfony 1.4 中使用 URL 中的破折号

> ID：12443600
> 
> 赞同：2
> 
> 时间：2012-09-16T00:45:04.933
> 
> 标签：routes, symfony1, symfony-1.4, separator

我目前正在尝试在 Symfony 1.4.18 的 URL 中使用破折号作为分段分隔符，但我在使其工作时遇到了一些麻烦。

这是我的路线：

```
franchise:
    url:          /number-:page-:slug
    param:        { module: store, action: franchise, page: 1 }
    options:      { suffix: .html, segment_separators: [ /,- ] }
    requirements:
        page: \d+ 
```

如您所见，该模式非常简单，我定义了一个常量“数字”，后跟一个破折号和一个变量 :page，它只是一个数字。后面是一个破折号和一个 slug（slug 也可以包含字母数字值和破折号）。

该 URL 是由 url_for 方法正确生成的，但是当我尝试访问它时，我遇到了通常的错误：

> 解析 URL 后的空模块和/或操作...

我试图用加号替换 :page 和 :slug 之间的破折号（并将其添加到 segment_separators 中），但它也不起作用。

我不知道该怎么办了？有没有人已经遇到过这种麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:03:22.850

问题是你`slug`有一些破折号，所以 Symfony 无法确定`page`and之间的分隔符在哪里`slug`。

如果您向 , 中添加一个要求`slug`，以明确告诉 Symfony slug 可以包含破折号，它将起作用。

```
franchise:
  url:          /number-:page-:slug
  param:        { module: store, action: franchise, page: 1 }
  options:      { suffix: .html, segment_separators: [ /,- ] }
  requirements:
    page: \d+
    slug: "[a-zA-Z0-9\-]+" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:00:43.987

我越来越多地测试这种情况你不能使用多个分隔符，除了`/`

例子

工作了 "/test-:test" -> 一个分隔符没有工作 "/test-:test-:test" 不止一个工作了 "/test/:test/:test" 不止一个但是 "/"

希望这些信息有用谢谢..

# javascript - 将函数的上下文应用于javascript变量？

> ID：12443601
> 
> 赞同：1
> 
> 时间：2012-09-16T00:45:05.303
> 
> 标签：javascript

如何将函数的上下文应用于任何 javascript 对象？所以我可以改变函数中“this”的含义。

例如：

```
var foo = {
    a: function() {
           alert(this.a);
      },
    b: function() {
           this.b +=1;
           alert (this.b);
      }

var moo = new Something(); // some object 
var moo.func.foo = foo; // right now this is moo.func
// how do I apply/change the context of the foo functions to moo?
// so this should equal moo
moo.a(); // this should work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T01:03:24.703

您可以将功能设置为`moo`：

```
var moo = new Something();
moo.a = foo.a;
moo.a(); 
```

...但是如果您希望它由 的所有实例继承，则`Something`需要将其设置为`Something.prototype`：

```
var moo;
Something.prototype = foo;
moo = new Something();
moo.a(); 
```

您的`foo.a`and定义中有一些问题`foo.b`，因为它们都是自引用`this.b +=1`，尤其会导致问题，因此您可能希望将函数更改为 and 之类的东西`this._b +=`，`alert(this._b)`或者使用不同命名的函数。

# php - 安全字符编码字符串 - Guns N' Roses – Sweet Child O' Mine

> ID：12443602
> 
> 赞同：0
> 
> 时间：2012-09-16T00:47:02.320
> 
> 标签：php, html, utf-8

在我的个人网站[http://www.matthewfedak.co.uk](http://www.matthewfedak.co.uk) - 拉入我听过的最后 6 首歌曲，这些歌曲是通过我的 last.fm 个人资料跟踪的。我将这些存储在数据库中，然后循环并在主页上显示结果。

我今天注意到，虽然大头针 Guns N' Roses – Sweet Child O' Mine 的编码不正确。前两个撇号很好，但第三个撇号引起了问题。我的网站在前端是 utf-8 字符编码的，与我的 last.fm 个人资料页面在这里[http://www.last.fm/user/matthewfedak](http://www.last.fm/user/matthewfedak)也是 utf-8 编码的所以我不明白为什么在我的问题正在发生的站点。

歌曲标题在我的数据库中很好，它只是在前端显示很奇怪。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T01:00:18.567

查看您网站的源代码，您似乎已经通过一个 HTML 实体编码器传递了编码的 UTF-8 字符串，该编码器在某些时候不理解 UTF-8：

```
<a href="http://www.last.fm/music/Guns+N%27+Roses/_/Sweet+Child+O%E2%80%99+Mine" title="Guns N' Roses- Sweet Child O&acirc;�� Mine" target="_blank" rel="external nofollow"> 
```

请注意，这`&acirc;`是 U+00E2 的 HTML 实体，UTF-8 序列 (E2 80 99) 的第一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T01:52:31.980

嘿，马修，你可能想这样做

```
htmlentities($str, ENT_QUOTES, "UTF-8"); 
```

这是给你整理的吗？

# javascript - 如何使用 jQuery 自动打开页面上的所有链接？

> ID：12443603
> 
> 赞同：1
> 
> 时间：2012-09-16T00:47:06.577
> 
> 标签：javascript, jquery, html

我有一个包含 10 个链接的页面，并且想要在单击按钮后打开所有链接。

我使用以下代码，这对我不起作用。

```
<a id="some-id" href="SOShousin3.jpg">Click Here</a><br />
<a id="some-id" href="SOShousin3.jpg">Click Here</a><br />
<a id="some-id" href="SOShousin3.jpg">Click Here</a><br />
<a id="some-id" href="SOShousin3.jpg">Click Here</a><br /><br />

<script type="text/javascript">
    $('a').click(function() {
        // assign an event to a.onclick
        window.open($(this).attr('href') );
    });

    $('ButtonOne').click(function() {
        // when we press <button>, trigger a.onclick
        $('a').click();
    });
</script>

<button type="button" onclick="ButtonOne">Open Links</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T00:56:33.683

```
$('#ButtonOne').click(function() {
    $('a').each(function() {
        window.open($(this).attr('href'));
    });
}); 
```

[演示](http://fiddle.jshell.net/ag2H5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:57:04.777

这听起来是一个非常糟糕的主意:) 但是你可以这样做：

```
$('#ButtonOne').click(function() {
  $('a').each(function(){
    window.open($(this).attr('href') );
  });
}); 
```

您还应该删除 onclick 属性并将其替换为`id="ButtonOne"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T00:58:01.237

您的选择器完全错误。它应该是..

```
<button type="button" id='buttonOne'>Open Links</button>​ 
```

```
$('#buttonOne').click(function() {
    // when we press <button>, trigger a.onclick
    $('a').click();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T00:59:44.290

你的按钮选择器是错误的，em，你应该传递一个正确的选择器，最好为按钮设置一个 id，试试这个

```
<a id="some-id" href="SOShousin3.jpg">Click Here</a><br />
<a id="some-id" href="SOShousin3.jpg">Click Here</a><br />
<a id="some-id" href="SOShousin3.jpg">Click Here</a><br />
<a id="some-id" href="SOShousin3.jpg">Click Here</a><br /><br />

<script type="text/javascript">
$('a').click(function() {
// assign an event to a.onclick
window.open($(this).attr('href') );
});

$('#ButtonOne').click(function() {
// when we press <button>, trigger a.onclick
$('a').click();
});

</script>
<button type="button" id="ButtonOne">Open Links</button> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T01:00:57.340

您的 $('ButtonOne') 中的选择器错误。这是试图选择所有元素。如果 ButtonOne 是一个 id，你可以使用 $("#ButtonOne")，如果它是一个类你可以使用 $("button.ButtonOne")。否则，其他两个响应是正确的。

# ruby-on-rails - 在 Rails 的视图中将参数从一个表单传递到另一个表单

> ID：12443606
> 
> 赞同：0
> 
> 时间：2012-09-16T00:47:51.757
> 
> 标签：ruby-on-rails

我在显示视图中有两个表单。我需要将一个变量传递给第二种形式，它是亚马逊支付 api 的一个帖子。

在控制器中我有：

```
 def show
     @post = Post.find(params[:id])
     respond_to do |format|
     format.html # show.html.erb
     format.json { render json: @post }
     end
   end 
```

在视图中，第一个表单显示了变量：

```
 <%= form_for(@post) do |f| %>
  <p>
  <b>referenceId:</b><br />
  <%= @post.referenceId %>
  </p>
  <% end %> 
```

在这种形式中，我需要使用上面的@post.referenceId 设置referenceId 的变量。任何帮助，将不胜感激！

```
 <form action="https://authorize.payments-sandbox.amazon.com/pba/paypipeline"       method="post">
  <input type="hidden" name="referenceId" value=@post.referenceId >
  <input type="image" src="http://g-ecx.images-amazon.com/images/G/01/asp/golden_medium_paynow_withmsg_whitebg.gif" border="0">
  </form> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:25:23.390

我不明白你想在你的情况下做什么，但为了将变量传递给另一种形式，你可以把它放在一个部分中，然后：

```
<%= render :partial => "second_form", :locals => { :my_var => my_value} %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:23:38.323

您可以在@post create 方法中使用JS 响应并修改隐藏的输入值。

首先修改表单助手以使用远程

```
<%= form_for @post, :html => {:remote => true, :'data-type' => 'script'} do |f| %> 
```

然后在控制器中添加

```
 respond_to do |format|
    format.html 
    format.js
  end 
```

然后为 create.js.erb 添加一个新视图

添加您的 javascript 以修改视图中隐藏的 referenceID。

希望这可以帮助。

# php - 使用 foreach 循环使用来自 MYSQL SELECT 的数据填充 PHP 数组

> ID：12443608
> 
> 赞同：-4
> 
> 时间：2012-09-16T00:48:07.627
> 
> 标签：php, arrays, foreach

我正在使用其中一个 jquery ui 自动完成功能，并且需要创建一个填充在包含 PDO SELECT 查询结果的 foreach 循环中的 php 数组。

结果数组应如下所示：

```
Array(
"result1"=>"result1",
"result2"=>"result2",   
"result3"=>"result3",
"result4"=>"result4"
"remaining results"=>"remaining results"
); 
```

我试过这个：

```
echo '$items = array(';
foreach($resulttags as $tag_rows)
{
$tags_display = $tag_rows['tag'];
echo '"' . $tags_display . '"=>"' . $tags_display . '",';
}
echo ");"; 
```

这与页面上的数组相呼应，但它不起作用。我也试过这个：

```
$items = array(); 
foreach($resulttags as $tag_rows)
{    
$results['"' . $tag_rows['tag'] . '"'] = '"' . $tag_rows['tag'] . '"'; 
} 
```

但这会导致数组键周围出现方括号，并且似乎不想使用自动完成功能。我假设反对票是 b'c 我没有展示我已经尝试过的内容，我在我的 iPhone 上发布了这个问题，现在又回到了我的笔记本电脑上。

我认为这不应该太难，但我尝试了许多没有奏效的方法。有什么建议么？这些阵列总是让我很适应，但我还没有完全理解它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T03:45:33.797

原来我只是愚蠢。我这样做了，效果很好：

```
$items = array();  
foreach($resulttags as $tag_rows)
{
$items[$tag_rows['tag']] = $tag_rows['tag'];
} 
```

出于某种愚蠢的原因，我试图从 print_r 获取输出以匹配我试图从自动完成演示中重新创建的 php 代码。而不是让 print_r 的两个输出匹配。非常愚蠢。也让我自己投了三票。

# c - 使用 extern(C) 的 swig D 绑定与现有的 extern(C) 函数发生冲突

> ID：12443610
> 
> 赞同：1
> 
> 时间：2012-09-16T00:49:20.797
> 
> 标签：c, d, swig, extern

目前 Swig D 绑定使用以下符号`libfun`：

```
mixin(bindCode("libfun", "D_libfun"));
extern(C) int function(void* jarg1) libfun; 
```

其中`D_libfun`符号在编译为库的 cxx 包装器中定义。因此，符号`libfun`导出为`extern(C)`并具有全局范围。我遇到了符号与现有`extern(C)`符号（例如读取）发生冲突的情况，导致我追溯到这个 swig 文件的模糊运行时崩溃。

有没有办法：

*   避免引入 extern(C) 中间声明
*   或者，为这些符号添加用户指定的前缀或后缀（例如：）`extern(C) mylib_libfun`，并在主包装器 d 文件和辅助包装器 d 文件中反映这一点。

现在我需要在这些文件上运行一个繁琐的后处理器，这很脆弱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:38:37.417

您建议的第二个解决方案是最简单的解决方案。您可以使用[SWIG 的高级重命名](http://www.swig.org/Doc2.0/SWIG.html#SWIG_advanced_renaming)一次性完成所有操作。

例如给定函数：

```
void read(); 
```

我们可以用自动插入的前缀来包装它`mylib_`：

```
%module test

%rename("mylib_%s") "";

void read(); 
```

# python - 使用 Visual Studio 2005 中的 Python 脚本编译 C++ 项目

> ID：12443612
> 
> 赞同：0
> 
> 时间：2012-09-16T00:49:55.030
> 
> 标签：python, visual-studio-2005, scons, visual-studio-extensions

我有一个带有 C 和 C++ 代码的大项目，我们正在使用 Scons 从命令行构建它。VS 2005 是否有任何插件可以运行 python 脚本以从 IDE 本身运行和调试。

# php - 在 PHP 中格式化日期

> ID：12443614
> 
> 赞同：0
> 
> 时间：2012-09-16T00:50:19.947
> 
> 标签：php

格式化下面的日期不起作用。echo date_published 之后的 date_published 格式如下： Sat, 15 Sep 2012 10:10:37 -0400

第二个回声，没有回声。

```
$date_published = $abc[$z]['pubDate'];
echo $date_published;
$date_published = date('Y-m-d H:i:s',$date_published);
echo $date_published; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:51:59.960

采用[`strtotime()`](http://us.php.net/manual/en/function.strtotime.php)

`$date_published = date('Y-m-d H:i:s',strtotime($date_published));`

[`date()`](http://us.php.net/manual/en/function.date.php)期望一个 unix 时间戳作为第二个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:52:22.077

使用`strtotime()`：

```
$date_published = $abc[$z]['pubDate'];
echo $date_published;
$date_published = date('Y-m-d H:i:s', strtotime($date_published));
echo $date_published; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T00:56:30.260

这个脚本：

```
$date_published = 'Sat, 15 Sep 2012 10:10:37 -0400';
printf("date_published=%s\n", $date_published);
$time = strtotime($date_published);
printf("time=%s\n", $time);

$date = date('Y-m-d H:i:s',$time);
printf("date=%s\n", $date);

# if you are using PHP 5.2 or greater:
$dt = new DateTime($date_published);
$date = $dt->format('Y-m-d H:i:s');
printf("date=%s\n", $date); 
```

产生这个输出：

```
date_published=Sat, 15 Sep 2012 10:10:37 -0400
time=1347718237
date=2012-09-15 07:10:37
date=2012-09-15 10:10:37 
```

请注意，`date()`它显示的是我当地时区的时间（PDT 或 -07:00），但`DateTime()`显示的是原始时区的时间（-04:00）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T01:13:24.540

要使用 php 格式化日期，您需要使用 date 函数，该函数接受日期格式和时间戳作为参数。

在上面的示例中，您需要使用 strtotime() 为 $date_published 生成时间戳，并将其作为日期函数的第二个参数传递。

例如 $date_published = date('Ymd H:i:s', strtotime($date_published));

# ios - 添加导航按钮标签栏控制器

> ID：12443616
> 
> 赞同：0
> 
> 时间：2012-09-16T00:50:40.397
> 
> 标签：ios, ios5

我正在尝试将导航按钮添加到 UITabController 的顶部栏，但该按钮未显示。

```
UIBarButtonItem * leftButtonItem = [[UIBarButtonItem alloc] initWithTitle: @"SETTING" style: UIBarButtonItemStyleBordered target: self action: @selector(permanentlyCloseWelcomeView)] ;
[[self navigationItem] setLeftBarButtonItem: leftButtonItem]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T01:05:31.620

视图控制器是否在 UINavigationController 中？如果是的话，你只会得到 self.navigationItem 。在调试器中检查它，我敢打赌它在你的第二行是零。

您需要将视图控制器嵌入到导航控制器中，或者如果您只想要栏而不是导航控制器，则将栏按钮项放在手动创建的导航栏上。

# r - 为什么 coord_equal 不能正常工作？

> ID：12443620
> 
> 赞同：7
> 
> 时间：2012-09-16T00:51:36.653
> 
> 标签：r, ggplot2

根据 ggplot2 上的此[参考页面](http://had.co.nz/ggplot2/coord_equal.html)，以下命令应给出 x 和 y 的相等纵横比 (1:1)。

```
qplot(mpg, wt, data = mtcars) + coord_equal(ratio = 1) 
```

但是，当我输入它时，我看到了这个。 ![在此处输入图像描述](../Images/b8b02ddd4de1324759aab494f8d3ee4a.png)

有谁知道是什么问题？

编辑：

但是，如果没有`+coord_equal()`，我可以获得 1:1 的纵横比。但是，只要我在右侧添加图例，1:1 的比例就会改变。提供的建议太繁琐而无法达到预期的效果。正如建议的那样，我已经向 github/ggplot2 提交了一张票。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T02:13:54.800

不妨把我的评论变成答案。

您`coord_equal(ratio = 1)`所做的是确保两个轴上的相同长度代表相同的单位变化。因此，两个轴的 1cm = 5 个单位（例如 - 转换率可能不正确，但想法是相同的）。由于 x 轴的可变性更大，它会像那样被挤压。`coord_equal`如果您希望 y 轴更加伸展，您可以添加一个 ylim 参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T18:46:02.127

提交 github/ggplot2 票证后。Winston 帮我找到了一个简洁的解决方案：

```
qplot(mpg,wt,data=mtcars, shape="carb") + theme(aspect.ratio=1) 
```

此外，ggplot2 0.8 到 0.9 之间似乎存在一些行为变化，原始文档可能已过时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T07:31:53.217

要获得类似于[参考页面](http://had.co.nz/ggplot2/coord_equal.html)上的图，必须手动更改 y 轴的限制：

```
library(ggplot2)

r_wt <- range(with(mtcars, wt))
r_mpg <- range(with(mtcars, mpg))
cent <- mean(r_wt)
ylimits <- cent + c(-1, +1) * diff(r_mpg)/2

qplot(mpg, wt, data = mtcars) + coord_cartesian(ylim = ylimits) 
```

![在此处输入图像描述](../Images/6a7b52aeb0bf957b92c091c69b86f8b6.png)

# c++ - 为什么 std::algorithms 也不能直接在容器上工作？

> ID：12443621
> 
> 赞同：6
> 
> 时间：2012-09-16T00:51:46.177
> 
> 标签：c++, algorithm

> **可能重复：**
> [STL 算法将整个容器而不是 .begin(), end() 作为 arg？](https://stackoverflow.com/questions/8164738/stl-algorithms-taking-the-whole-container-rather-than-begin-end-as-arg)

我一直在研究一些算法，我想知道为什么其中一些算法没有包含容器的变体。

例如，可以接收容器和值，并且算法可以通过调用容器的和来在容器`find`内部迭代。与传递容器和算法使用对我来说更有用的地方相同，而不是需要一个迭代器，在那里我将被迫将数组的大小调整为最大元素数。是另一个这样的例子。`begin``end``unique_copy``push_back``for_each`

我确定有我不知道的充分理由吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T01:14:58.883

我可以看到有两个主要原因：

1.  为容器添加重载将使函数数量增加一倍以上：对于每个算法只采用一个范围，重载将加倍。但是，对于像`std::copy()`你有两个范围的东西，它们中的每一个都独立地希望被指定为范围（正确的抽象不是容器，顺便说一句，而是游侠）或一对迭代器，使其已经有 4 个重载。
2.  一旦范围进入图片，需要返回什么并不完全清楚。您的示例使用`std::find()`which 在将迭代器作为参数时清楚地返回一个迭代器。当给定一个范围时，返回另一个范围实际上可能更合理。更糟糕的是，除非您最初只有一个通过范围（例如，从流中读取的内容），否则甚至可以选择两个不同的范围，即开始找到对象和找到对象到结束。另一个维度可能是选择获取所选范围的副本，而不是由迭代器分隔的范围。

最初提出 STL 时，一开始就被认为是 Crazy Talk！试图说服人们打开另一个主要的蠕虫罐以正确处理范围可能很容易扼杀整个想法。紧接着的问题就变成了：为什么没有改变？...这个问题也有两个答案：

1.  尽管当我将草稿版本提交给图书馆工作组时认为它是合理的，但我没有提议更改界面。然而，我概述的提议并没有得到极大的热情。此外，当时我不知道如何以可接受的努力实际实现我设想的接口（我知道如何使用 C++ 2011 特性）。我已经开始写一个[关于 STL 新接口的描述，](https://github.com/dietmarkuehl/kuhllib/wiki/STL-2.0)但即使这还不完整，我最近也没有花时间来处理这个问题。
2.  尽管在我看来这些算法是正确的方法，但很多人故意不使用它们。我发现人们已经替换了算法的使用，因为据称编写循环执行操作比调用算法“更具可读性”。不幸的是，这在某些情况下甚至是真的，因为所涉及的函数对象是可怕的。鉴于似乎很少有人使用这些算法，似乎没有动力去改变它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T01:57:24.480

如果要将结果放入容器而不预先分配元素，请使用*插入迭代器*。例如：

```
std::vector<int> elements;
// ...
std::vector<int> uniqueElements;
std::unique_copy(elements.begin(), elements.end(),
    std::back_inserter(uniqueElements)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T02:28:39.560

采用迭代器的算法是最通用的。没有什么可以阻止您创建自己的便利函数，这些函数使用适当的参数调用标准算法。

# vb.net - e.Handled 在 VB.net 2010 中不起作用

> ID：12443623
> 
> 赞同：4
> 
> 时间：2012-09-16T00:52:05.260
> 
> 标签：vb.net, visual-studio-2010, beep

我在 vb.net 中制作了一个快速的网络浏览器，我拥有它，这样当您按 Enter 键时，它会导航到 textbox1 中的网页。唯一的问题是，每次我按 Enter 键时它都会发出哔哔声。我尝试使用 e.Handled = True，但它没有做任何事情。这是我的按键代码

```
Private Sub TextBox1_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles TextBox1.KeyDown

    If e.KeyCode = Keys.Enter Then
        e.Handled = True
        WebBrowser1.Navigate(TextBox1.Text)
    End If

End Sub 
```

我以为 e.Handled 会让那恼人的哔哔声消失，但事实并非如此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T03:29:27.303

您想要的`KeyEventArgs`属性不是[Handled](http://msdn.microsoft.com/en-us/library/system.windows.forms.keyeventargs.handled%28v=vs.100%29.aspx)而是[SuppressKeyPress](http://msdn.microsoft.com/en-us/library/system.windows.forms.keyeventargs.suppresskeypress%28v=vs.100%29.aspx)。

IE

```
Private Sub TextBox1_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles TextBox1.KeyDown
    If e.KeyCode = Keys.Enter Then
        e.SuppressKeyPress = True
        WebBrowser1.Navigate(TextBox1.Text)
    End If

End Sub 
```

从第一个 MSDN 链接：

> Windows 窗体中的不同控件以不同方式实现处理。对于像 TextBox 这样的子类本机 Win32 控件的控件，它被解释为意味着不应将关键消息传递给底层本机控件。如果在 TextBox 上将 Handled 设置为 true，则该控件不会将按键事件传递给底层 Win32 文本框控件，但仍会显示用户键入的字符。
> 
> 如果要阻止当前控件接收按键，请使用 SuppressKeyPress 属性。

# symfony - 使用 FOSUserBundle 和 FOSFacebookUser 登录用户的问题

> ID：12443634
> 
> 赞同：-1
> 
> 时间：2012-09-16T00:54:36.027
> 
> 标签：symfony, fosuserbundle

我正在使用 FOSUserBundle 和 FOSUserFacebookBundle 对我的用户进行身份验证。问题是当我访问我的 /login 页面时。我有两个带有用户名和密码的文本字段。当我输入我的用户名和密码时，我收到以下错误：

```
The Facebook user could not be retrieved from the session. 
```

这是一个非常奇怪的错误，因为我通过表单而不是通过 facebook 登录用户，但就好像我通过 facebook 登录用户一样。所以我玩弄了我的源代码，这是我的 security.yml/firewall 设置：

```
 firewalls:
            main:
                pattern: ^/.*
                form_login:
                    login_path: /login
                    check_path: /login_check     
                    provider: fos_userbundle
                fos_facebook:
                    app_url: "http://apps.facebook.com/myapp/"
                    server_url: "http://localhost/Symfony/web/app_dev.php"
                    login_path: /login
                    check_path: /login_check
                    default_target_path: /
                    provider: my_fos_facebook_provider
                anonymous: true
                logout: 
                    path:   /logout
                    target: / 
                    handlers: ["fos_facebook.logout_handler"]
                #http_basic:
                #    realm: "Secured Demo Area"
            login:
                pattern:  ^/login$
                security: false 
```

我担心的是 /login_check 会一直检查 facebook 会话是否存在，我真的不想要。当我更改 fos_facebook 的 login_path 和 check_path 时，一切正常。知道可能导致此问题的原因以及如何解决此问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:38:42.527

对于 form_login 和 fos_facebook，您的 check_path 应该不同。例如：

```
 form_login:
                login_path: /login
                check_path: /login_check     
                provider: fos_userbundle
            fos_facebook:
                app_url: "http://apps.facebook.com/myapp/"
                server_url: "http://localhost/Symfony/web/app_dev.php"
                login_path: /login
                check_path: /login_check/facebook
                default_target_path: /
                provider: my_fos_facebook_provider 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T07:50:27.443

我遇到了同样的问题，卡洛斯是对的。

需要进行以下更改：

```
 form_login:
    login_path: /login
    check_path: /login_check     
    provider: fos_userbundle
 fos_facebook:
    app_url: "http://apps.facebook.com/myapp/"
    server_url: "http://localhost/Symfony/web/app_dev.php"
    login_path: /login
    check_path: /login_check/facebook
    default_target_path: /
    provider: my_fos_facebook_provider 
```

在你的 routing.yml

```
_security_check:
  path:  /login_check
  defaults:  { _controller: FOSUserBundle:Security:check }

_security_logout:
  pattern:  /logout

_security_check_fb:
  path: /login_check/facebook
  defaults:  { _controller: FOSUserBundle:Security:check } 
```

最后但并非最不重要的一点是，您必须为 Facebook 编辑 JS：

```
function goLogIn(){
  window.location.href = "{{ path('_security_check_fb') }}";
} 
```

所以现在您可以毫无问题地使用表单或 Facebook 登录。

# c# - 如何使用 SpecFlow 测试选择 html 控件对象？

> ID：12443635
> 
> 赞同：1
> 
> 时间：2012-09-16T00:55:10.080
> 
> 标签：c#, testing, specflow, acceptance-testing

我在页面上有 html 选择：

```
<select id="StateName" name="StateName">
<option value=""></option>
<option value="value1">value1</option>
<option value="value2">value2</option>
<option value="value3">value3</option>
<option value="value4">value4</option>
<option value="value5">value5</option>
</select> 
```

我已经尝试过这样的步骤定义

```
[When("I select value \"(.*)\" of select object with id \"(.*)\"")]
public void ThenSelectValueOfSelect(string value, string selectId)
{
   var select = TestsRunner.Browser.GetElementById(selectId);
   select.Click();
   var item = TestsRunner.Browser.GetElementsByTag(@"option").SingleOrDefault(o => o.GetAttribute("value").Equals(value, StringComparison.OrdinalIgnoreCase));
   item.Click();
} 
```

作为测试运行浏览器，我使用 firefox。问题是下拉选择项目，但未选择具体选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:09:30.973

我认为它可以做得更短/更容易。我从下拉框中选择值的方式：

```
SelectElement dropdown = new SelectElement(Driver.FindElement(By.Id(dropdownID)));
dropdown.SelectByValue(valueToBeSelected); 
```

它非常简单明了，而且很有效。

# php - 每分钟通过 CRON 发送电子邮件 - 我的方法可以改进吗？

> ID：12443645
> 
> 赞同：1
> 
> 时间：2012-09-16T00:59:35.510
> 
> 标签：php, mysql, performance, optimization, cron

我正在开发一个提醒类型的网站，您可以在其中设置要发送给自己的提醒，设置提醒的时间，当时间到时，您会收到一封电子邮件。

但是，提醒并不重要，大约 5-10 分钟的延迟是可以接受的。

我有两个选择：

1) 每分钟运行一个 cron 脚本。该脚本将检查数据库中是否有为 CURTIME() 安排的任何事件，（即，如果 cron 在 5:35:30 运行，它将检查在 5:35:00 设置的任何提醒）。如果没有找到，终止。如果找到，请发送电子邮件。

2) 或者，我可以每 10 分钟运行一次 Cron 脚本。此脚本将检查从现在到 10 分钟之前是否有任何提醒。例如，如果 cron 在 5:35:30 运行，它将检查 5:25:00 到 5:35:00 之间的任何提醒。如果找到，发送它们，如果没有，终止。

第二种方法的唯一问题是，如果这不会导致一些提醒无法发送出去，我不肯定。

例如，如果服务器负载较高，而计划在 5:35:00 运行的 Cron 而在 5:37:00 运行会怎样。然后可能会错过任何预定在 5:35:00 发送的电子邮件。

我应该使用哪种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T02:05:43.643

在 Windows 和 Unix 机器上，有`at`，用于在指定时间安排一次性作业。除非您发送如此多的电子邮件以至于每分钟检查/发送更有意义，否则简单地让“保存我的提醒”代码安排通过`at`作业发送可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T02:05:51.207

它们是相同的选项，只是周期不同。

您可能会认为这是一个间隔轮询或队列扫描，但“非实时”，因此您必须针对延迟进行设计。

一般来说，每次扫描都应该假设它可能已经延迟，并且系统应该有一些定义的策略来处理“太旧”的排队通知。（如果系统在扫描新入队的通知之前关闭了一个小时怎么办？）

为了稳健性，确保队列处理是原子的或同步的——无论是来自并发扫描还是后续扫描，都不会对项目进行双重处理。

# c++ - 这里真的需要 sleep() 吗？

> ID：12443646
> 
> 赞同：2
> 
> 时间：2012-09-16T00:59:38.253
> 
> 标签：c++, c, multithreading, operating-system, sleep

由于某些语言不提供互斥锁，因此需要自己构建它。我通常会写一些这样的代码：（伪C++，只是为了让你知道我的意思。我不确定我的写法是否正确，因为我已经很多年没有写过C++代码了）

```
oldval = 0;
newval = 1;
//suggest there was a Compare And Set operation that make only one thread return true,if no CAS operation , call any other language module that can offer a cas instead
while (!CAS(*somepointer,oldval,newval)) {
     //lock failed
     sleep(1000); //sleep one second or some value really depend on what you are doing.
}
//lock succeed, do something....
*somepointer = oldval; //release lock. 
```

显然`sleep`会降低处理速度，但我曾经担心，如果`sleep`被丢弃......线程切换太频繁会不会降低性能？现在想得更深了，具体是怎么`sleep`实现的呢？如果他们做这样的事情......

```
expired = getCurrentTime() + sleepTime;
while (getCurrentTime() < expired) { } 
```

...这只会让事情变得更糟。

现在我认为`sleep`只有在我真的需要暂停线程一段时间时才应该使用，所以也许我的情况是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T01:07:13.910

`sleep()`和相关函数对操作系统进行系统调用，请求操作系统在设定的时间内唤醒进程。在某些情况下（例如接收到信号/异常），操作系统可能会更快地唤醒进程，但在等待期间，进程将获得零 CPU 使用率。

如果操作系统发现所有进程都处于休眠状态（或因某种超时而被阻塞），它可以通过使用特定于硬件的指令使处理器休眠直到出现中断（例如时钟中断、DMA 中断等），从而自行进入休眠状态。收到。

操作系统提供的同步原语的工作方式类似。例如，要求锁定互斥锁会导致系统调用使线程进入休眠状态，直到互斥锁解锁；操作系统知道互斥锁已解锁，因为解锁还必须通过系统调用。

与简单的忙等待循环相比，使用`sleep`使用的 CPU 少得多。但是，您的操作系统可能至少提供了*一些*同步原语（如果嵌入式系统以任何方式支持线程，即使嵌入式系统也经常提供这些原语），例如信号量或锁。在尝试推出自己的功能之前，您应该尝试找出您的操作系统是否提供这些功能；如果您使用操作系统提供的同步原语，您的应用程序将具有更好的性能和响应能力。

*重要提示*：如果您在裸机嵌入式平台上进行开发，则库`sleep`实际上可能正在等待（例如在 Arduino 上），因为没有操作系统调度程序可以让线程进入睡眠状态。在这种情况下，如果最小化处理器使用率很重要（例如，降低功耗），那么如果您的库没有提供这种方法，您将需要找到一种特定于处理器的方法来挂起 CPU。

# apache - 如何使用 htaccess 加载子域 url 的特定页面

> ID：12443652
> 
> 赞同：2
> 
> 时间：2012-09-16T01:01:07.043
> 
> 标签：apache, .htaccess, url, mod-rewrite, subdomain

我怎样才能让我的服务器加载（*不可见！*）somepage.htm，当一个 url 在它前面有一个子域时，只使用 Apache 的 .htaccess ？

这样当用户键入`subdomain.website.org`然后服务器加载 `website.org/somepage.htm`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T02:25:19.670

只要**subdomain.website.org**和**website.org**都指向同一个服务器，具有相同的文档根，就可以将这些规则放在文档根的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^(www\.)?website.org$ [NC]
RewriteCond %{HTTP_HOST} ^([^.]+)\.website.org$ [NC]
RewriteRule ^$ /%1.htm [L] 
```

# java - Android 2.3 ProgressDialog 不会显示

> ID：12443655
> 
> 赞同：1
> 
> 时间：2012-09-16T01:01:19.580
> 
> 标签：java, android, android-dialog

我迫切需要帮助。我一直在这个上拉头发一段时间。有什么理由`ProgressDialog`不会出现在我的应用程序中吗？

```
b.setOnClickListener(new OnClickListener() {           
    @Override         
    public void onClick(View v) {                
        dialog = ProgressDialog.show(AndroidPHPConnection.this, "","Validating user...", true);
        new Thread(new Runnable() {  
            public void run() {                            
                login();                                                 
            }
        }).start();                           
    }        
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:04:23.280

我通常会创建这样的对话框，也许它对你有用。

```
ProgressDialog pd = new ProgressDialog(this);
pd.setMessage("Bla bla bla");
pd.show();
//pd.dismiss(); 
```

# android - LinearLayout 中的页眉和页脚

> ID：12443657
> 
> 赞同：0
> 
> 时间：2012-09-16T01:02:05.827
> 
> 标签：android, android-layout

我正在尝试实现一个垂直的LinearLayout，其中底部有固定宽度条，顶部有固定宽度条，中间区域占据其余空间。在幼稚的实现中

```
<LinearLayout android:layout_height="fill_parent"
    android:orientation="vertical" >

    <View android:layout_height="50sp"/>

    <View android:layout_height="fill_parent"/>

    <View android:layout_height="50sp"/>
</LinearLayout> 
```

顶部栏在那里，但底部栏是不可见的。我猜布局过程在中间视图上遇到了fill_parent，并将其余的垂直空间分配给它。

是否有某种重力/重量技巧可以使布局识别并显示底栏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T01:08:36.660

尝试使用重量设置中间部分的高度，如下所示。

```
<View android:layout_height="50dp"/>

<View android:layout_height="0dp"
      android:layout_weight="1"
 />

<View android:layout_height="50dp"/> 
```

这将首先绘制顶部和底部，然后用该视图填充所有（重量 =“1”）剩余高度

# c# - Visual Studio 构建目标

> ID：12443658
> 
> 赞同：1
> 
> 时间：2012-09-16T01:02:19.330
> 
> 标签：c#, visual-studio, msbuild, build-process

我有一个包含图形用户界面的 c# 项目。现在我们得到了第二个硬件后端。我们想要的是在编译项目之前决定后端使用哪个库并更改用于后端处理的类的可能性。我查看了 msbuild，但我不确定如何使用它来实现它。还有其他或更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:25:29.143

正如 Mike 所说，依赖注入是正确的答案，在部署时包含适当的 .dll 来解析接口，就像[TinyIoC](https://github.com/grumpydev/TinyIoC/wiki)一样简单。不正确的方法是使用条件引用调整 .csproj ，请参见[示例](https://stackoverflow.com/questions/10738246/buildinginsidevisualstudio-property-value-not-working-with-file-reference-and-pr)，但在您的情况下基于 $(Configuration) 值，以便您可以切换到 VS 或 CLI，它会起作用，但会带来痛苦的世界。

# php - 使用 php 或 javascript 从 facebook 相册 URL 中删除多余的位

> ID：12443662
> 
> 赞同：0
> 
> 时间：2012-09-16T01:04:03.983
> 
> 标签：php, javascript, regex, facebook

我只是使用 graph.facebook.com 代码来显示相册中的照片，但我希望用户能够从他们的相册中粘贴 URL，然后使用 php 正则表达式或 javascript 我想删除除相册 ID 之外的所有内容所以我可以显示照片。

如果用户将其粘贴到他们的用户 MYSQL 表中：

```
https://www.facebook.com/media/set/?set=a.10152107362775359.906732.14226545341&type=3 
```

仅检索 a 之后的数字的最佳方法是什么？和之前在哪里下。开始。

基本上我需要这个：10152107362775359

我知道我可以得到所有设置=

```
$notclean = 'a.10152107362775359.906732.14226545341'; 
```

但现在我该怎么做

```
$notclean = '10152107362775359'; 
```

在此先感谢 :) 强尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T01:06:14.753

[在期间拆分](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)它。

```
var parts = 'a.10152107362775359.906732.14226545341'.split('.'); 
```

这给了你一个数组

```
["a", "10152107362775359", "906732", "14226545341"] 
```

然后获取数组的第二个元素

```
$notclean = parts[1]; 
```

对于 PHP，使用[爆炸](http://php.net/manual/en/function.explode.php)而不是拆分。

```
$parts = explode('.', $notclean); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:08:00.170

使用[`explode()`](http://www.php.net/manual/en/function.explode.php)功能：

```
$str = 'a.10152107362775359.906732.14226545341';
$arr = explode(".",$str);
$notclean = $arr[1]; 
```

# javascript - 从桌面读取python文件时突出显示代码

> ID：12443666
> 
> 赞同：0
> 
> 时间：2012-09-16T01:04:45.133
> 
> 标签：javascript, html

我有 2 个文件 .js 和 html 文件。我可以读取文件，它显示代码，但不会改变代码的颜色。我已经对其进行了测试，并且当我对其进行硬编码时，highlight.pack.js 正在工作。我怀疑错误出在 $(#filecontents).html(contents) 处。我不确定如何解决这个问题。插件可以从[highlightcode下载](http://softwaremaniacs.org/soft/highlight/en/description/)

.js 文件

```
$(document).ready(function(){
  $('#fileform input:file').change(function(event){
    file = event.target.files[0];
    reader = new FileReader();
    reader.onload = function(event) {
      var contents = event.target.result;
      $('#filecontents').html(contents);
    }
    reader.readAsText(file)
  });
}); 
```

.html 文件

```
<link rel="stylesheet" href="styles/school_book.css">
<script src="highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<form id="fileform" action="" method="post"> <input type="file" name="file" /></form>
<pre><code class = "python"><p id="filecontents"></p></code></pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T01:39:27.010

添加了一行以在将脚本`event.target.result`放入之前将其应用到`#filecontents`

```
$(document).ready(function(){
  $('#fileform input:file').change(function(event){
    file = event.target.files[0];
    reader = new FileReader();
    reader.onload = function(event) {
      var contents = event.target.result;
      contents = hljs.highlightAuto(contents).value; // convert to highlighted
      $('#filecontents').html(contents);
    }
    reader.readAsText(file)
  });
});​ 
```

示例[**小提琴**](http://jsfiddle.net/fAEfT/)。

# ios - 如何防止视图在自定义 UIStoryboardSegue 结束时“闪烁”？

> ID：12443671
> 
> 赞同：2
> 
> 时间：2012-09-16T01:06:01.513
> 
> 标签：ios, objective-c, ios5, uistoryboardsegue

我编写了一个自定义`UIStoryboardSegue`，用于在各种`UIViewControllers`. 动画按预期工作，并且大部分时间`UIStoryboardSegue`显示在模拟器和设备上都符合我的预期。

但是，有时在 segue 完成后，我可以在完成后的几分之一秒内看到旧的`UIViewController` **flash**`UIStoryboardSegue`。结果破坏了我所期待的平稳过渡。不幸的是，我无法辨别这种行为的任何模式。

我已经包含了我用来管理下面的 segue 的方法的准系统版本。是否有更可靠的方法来确保平稳过渡？难道我做错了什么？同样，大部分时间segue看起来正是我想要的方式。

```
- (void)perform
{
    self.window = [[[UIApplication sharedApplication] delegate] window];
    UIViewController *source = (UIViewController *) self.sourceViewController;
    UIViewController *dest = (UIViewController *) self.destinationViewController;

    [self.window insertSubview:dest.view.window belowSubview:source.view];

    self.segueLayer = [CALayer layer];
    // Create and add a number of other CALayers for displaying the segue,
    // adding them to the base segueLayer

    // Create and add CAAnimations for animating the CALayers
    // (code omitted for the sake of space)

    [self.window addSubview:dest.view];
    [self.window.layer addSublayer:self.segueLayer];

    [source.view removeFromSuperview];
}

- (void)animationDidStop:(CAAnimation *)animation finished:(BOOL)isFinished
{
    UIViewController *source = (UIViewController *) self.sourceViewController;
    UIViewController *dest = (UIViewController *) self.destinationViewController;

    if (isFinished)
    {
        // Remove and deallocate the CALayers previously created 
        [self.segueLayer removeFromSuperlayer];
        self.segueLayer = nil;
        self.window.rootViewController = dest;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T22:50:28.987

因此 CAAnimations 不会更改实际图层的值，而是更改其关联的`presentationLayer`. 将 设置`fillMode`为`kCAFillModeForwards`可确保`presentationLayer`的值在动画完成后不会恢复。但是，如果动画的`removedOnCompletion`属性设置为`YES`（默认情况下），图层的外观也可以恢复到动画前的状态。

由于`animationDidStop:`回调可能会在任何潜在的恢复后被调用，并且因为时间不准确，这可以解释为什么你并不总是看到恢复。

# php - 将随机字符附加到用户上传照片的末尾

> ID：12443678
> 
> 赞同：2
> 
> 时间：2012-09-16T01:07:43.370
> 
> 标签：php, mysql, sql, apache, postgresql

我见过几个网站，其中用户提供的图像以一串看似随机的字符结尾。

**例子**

```
http://farm2.staticflickr.com/1116/5136519916_f9b8699cdc_o.jpg 
```

**问题：**如果图像文件名以照片的唯一 ID 开头，是否真的需要这样做。此 id 是从与此图像对应的数据库表中取出的行。按照上面的例子，我猜这`5136519916`是照片的唯一 ID，`f9b8699cdc`是随机字符串，`o`是图像的大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T01:19:31.263

从理论上讲，只要文件名是唯一的，就没有*技术*原因需要添加这样的随机字符串。但是，我怀疑这些字符串是出于隐私考虑。

想象一下，如果您的文件名只是照片的唯一 ID。机器人可以系统地扫描您的整个站点，只需将所有照片加一即可。如果您的用户正在上传照片，但他们不希望*每个人*都能看到它们（例如 Facebook 或 Flickr 中的私人照片），那么这是一个非常不安全的系统。添加此随机字符串有助于通过使链接更难猜测来隐藏用户的内容以防止未经授权的访问。“ImageShack 的安全性如何？”模糊地解决了这个问题。关于[ImageShack 的 FAQ 的问题](http://kb.imageshack.us/is/article?22=faq)。

组合`unique identifier + randomized element`意味着简单的唯一 ID 计算（将标识符增加 1）和轻松添加随机元素（生成字符串并将其附加到 ID）。比计算一个完全随机但仍然唯一的标识符要高效得多。

从技术上讲，完全随机的文件名会更安全，但即使只添加三个字母数字字符 ( `a-zA-Z0-9`)，例如 ImageShack，也意味着对于每个唯一的照片 ID，文件名可能是任何`52*52*52 = 238382`可能的文件名之一。突然之间，任何扫描您的网站以查找用户照片的人都不太走运。

# c++ - 寻找一本关于 windows C++ GUI 编程的书

> ID：12443681
> 
> 赞同：1
> 
> 时间：2012-09-16T01:08:36.303
> 
> 标签：c++, windows, user-interface

我知道这个问题被问了很多，但我想找一本关于使用 C++ 进行 Windows 编程的书，专门关注 GUI。我拿起一本关于 C++ 游戏编程的书，在乞求时它涵盖了一点 Windows GUI 编程。所以现在我希望能够更深入地了解这个主题。有什么建议么？

PS我说的是win32程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T01:16:38.307

[编程 Windows](https://rads.stackoverflow.com/amzn/click/com/157231995X)是经典的，可能是一个很好的起点。

# jquery - jquery点击功能块

> ID：12443685
> 
> 赞同：1
> 
> 时间：2012-09-16T01:09:26.777
> 
> 标签：jquery, function, click

你好我有一些问题，如果点击#health，如何阻止点击功能

运行单击功能时，我可以再次单击，但如何单击块 2。

```
$('#health').click(function() {
  var count = <?=$wait_time?>;
  countdown = setInterval(function(){
    $("p#health").html(count + " seconds remaining!");
    if (count == 0) {
      $.ajax({
       url: 'pages/map/hospital.php?heal=1',
       success: function(data) {
        $("p#health").hide();
       }
      });
    }
    count--;
  }, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T01:12:43.350

使用[`.one()`](http://api.jquery.com/one/)方法而不是`.click()`：

```
$('#health').one('click', function() {
    //etc
}); 
```

要清除间隔，只需使用以下[`clearInterval()`](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)方法：

```
clearInterval(countdown); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:13:27.387

```
var state = true;
$(document).click(function() {
    if (state === true) {
        var count = < ? = $wait_time ? > ;
        countdown = setInterval(function() {
            $("p#health").html(count + " seconds remaining!");
            if (count == 0) {
                $.ajax({
                    url: 'pages/map/hospital.php?heal=1',
                    success: function(data) {
                        $("p#health").hide();
                    }
                });
            }
            count--;
        }, 1000);

        state = false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T01:13:31.430

如果您想阻止后续点击执行任何操作，请尝试以下操作：

```
$('#health').click(function() {
  if(countdown)
    return false;

  var count = <?=$wait_time?>;
  countdown = setInterval(function(){
    $("p#health").html(count + " seconds remaining!");
    if (count == 0) {
      $.ajax({
       url: 'pages/map/hospital.php?heal=1',
       success: function(data) {
        $("p#health").hide();
       }
      });
    }
    count--;
  }, 1000);
}); 
```

# map - hadoop过滤映射输出

> ID：12443686
> 
> 赞同：1
> 
> 时间：2012-09-16T01:09:28.890
> 
> 标签：map, hadoop, mapreduce

我有一个用例，其中映射阶段生成的某些键需要在减少开始之前被过滤掉。这样的事情可行吗？请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T01:19:12.323

想到的几个选项：

*   修改您的映射器以不输出您要过滤的值
*   编写一个 reducer 过滤掉你不想要的值，然后将该 reducer 的输出提供给另一个 MapReduce 作业

对于此任务，使用组合器不是一个好的选择，因为正如@100gods 所提到的，不能保证组合器的执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:08:32.483

修改 Mapper 类来过滤输入会更准确，因为无法保证组合器的执行，Hadoop 可能会也可能不会执行组合器。此外，如果需要，它可以执行超过 1 次。因此，您的 MapReduce 作业不应依赖于组合器的执行。

# linux - 每半小时检查一次，看看 if 条件是否为真

> ID：12443687
> 
> 赞同：0
> 
> 时间：2012-09-16T01:09:39.267
> 
> 标签：linux, bash, shell, unix

有两个目录，其中包含一些文件。我正在使用 Hadoop，这两个目录都是 Hadoop 文件系统。

目录的第一个位置-

```
/sys/edw/ 
```

目录的第二个位置-

```
/apps/only/ 
```

我想看看`these two directories`有没有`files or not`。如果它们包含一些文件，则`continue and execute my other shell scripts`，但如果它们不包含任何文件，`wait for half an hour`则再次检查文件是否已到达这两个目录。

如果它已经到达，则执行其他 shell 脚本，但如果它没有到达，则再次等待半小时，并继续每半小时检查一次。

**算法-**

```
If [ hadoop fs -ls /sys/edw/   AND hadoop fs -ls /apps/only/ ]
then
continue executing my other shell scripts
but if condition is not true
wait for half an hour and then check again with the if loop and keep on looking every half an hour until the if condition is not true 
```

我只想在上面的 if 条件为真时执行下面的脚本。

```
query.sh 
```

基本上我有几个我只想运行的脚本， `if condition is true`否则继续检查`every half an hour`并查看`if condition is true or not`.

我在奔跑`SunOS 5.1`

**更新代码：-**

我正在尝试类似下面的内容，并且此目录中不存在文件（/apps/hdmi/20120916），因此它应该休眠半小时，但不是休眠，而是执行它应该执行的其他 shell 脚本不是在做——

```
while [ ! hadoop fs -ls /apps/hdmi/20120916 ]; do
    sleep 1800
done

echo "Hello new11"
pwd 
```

我做错了什么吗？

**再次更新：-**

```
while ! hadoop fs -ls /apps/hdmi/20120916 ; do
    sleep 1800
done

echo "Hello new11"
pwd 
```

我也试过上面的那个，但是这个目录不存在（/apps/hdmi/20120916），而不是睡半个小时，它会打印`Hello new11`不应该发生的。它应该等待半个小时。我还缺少什么吗？我在跑步`SunOS 5.1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:20:52.357

如果您不想使用`cron`，则可以使用无限循环：

```
while true; do
  if hadoop fs -ls /apps/hdmi/20120916; then
    query.sh # call other script
    break # exit loop
  else
    sleep 1800
  fi
done 
```

我希望我正确理解了您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:53:13.937

你不能使用`while ! COMMAND; do`. `!`在这种情况下不是否定运算符。您要做的是执行命令`hadoop fs -ls /DIR`并在命令未列出任何文件时休眠。

要执行命令，请将其放在反引号之间````。

```
`hadoop fs -ls /apps/hdmi` 
```

使用`test`或方括号`[ ]`来评估命令的输出。

```
[ `hadoop fs -ls /apps/hdmi` ] 
```

`true`如果命令产生一个非零字符串（即当目录中有文件时），表达式将评估。由于这与您想要的相反（在**没有**文件时继续），您需要否定表达式。

```
[ ! `hadoop fs -ls /apps/hdmi` ] 
```

因此，您的脚本应该看起来像这样：

```
while [ ! `hadoop fs -ls /apps/hdmi` ]; do
  sleep 1800
done

echo "Hello new11"

pwd 
```

这是假设`hadoop fs -ls`当目录中没有文件时不会产生任何输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T01:34:46.493

如果您希望脚本在条件变为真后退出，只需`sleep 1800`将脚本休眠 1800 秒（半小时），然后`while`循环：

```
while [ ! condition ]; do
    sleep 1800
done

# execute other scripts since condition is now true 
```

# python - 计算numpy数组的边界框

> ID：12443688
> 
> 赞同：5
> 
> 时间：2012-09-16T01:10:01.550
> 
> 标签：python, numpy

我正在为一个简单的问题而苦苦挣扎。我有一个形式的numpy数组：

```
[[[ 1152.07507324   430.84799194]
  [ 4107.82910156   413.95199585]
  [ 4127.64941406  2872.32006836]
  [ 1191.71643066  2906.11206055]]] 
```

我想计算边界框，意思是，我想要最左边、最上面、最右边和最下面的点。

这应该是一个正确的解决方案

```
[[[ 1152.07507324   413.95199585]
  [ 4127.64941406   413.95199585]
  [ 4127.64941406  2906.11206055]
  [ 1152.07507324  2906.11206055]]] 
```

我开发了一个讨厌的函数来解决这个问题，但我对它非常不满意，因为它不是真正的 pythonic/numpyic

```
def bounding_box(iterable):
    minimum_x = min(iterable[0], key=lambda x:x[0])[0]
    maximum_x = max(iterable[0], key=lambda x:x[0])[0]
    minimum_y = min(iterable[0], key=lambda x:x[1])[1]
    maximum_y = max(iterable[0], key=lambda x:x[1])[1]

    return numpy.array([[(minimum_x, minimum_y), (maximum_x, minimum_y), (maximum_x, maximum_y), (minimum_x, maximum_y)]], dtype=numpy.float32) 
```

您是否知道如何优化上述功能，也许使用 numpy 内置函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T01:22:09.670

使用`numpy.min`和`numpy.max`内置：

```
def bounding_box(iterable):
    min_x, min_y = numpy.min(iterable[0], axis=0)
    max_x, max_y = numpy.max(iterable[0], axis=0)
    return numpy.array([(min_x, min_y), (max_x, min_y), (max_x, max_y), (min_x, max_y)]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-31T15:43:16.720

返回与上一个答案相同但更短更清晰

返回 2*2 ndarray

```
def bbox(points):
    """
    [xmin xmax]
    [ymin ymax]
    """
    a = zeros((2,2))
    a[:,0] = np.min(points, axis=0)
    a[:,1] = np.max(points, axis=0)
    return a 
```

# linux - 非选项后的 -maxdepth 选项 AND 查找：路径必须在表达式之前

> ID：12443689
> 
> 赞同：14
> 
> 时间：2012-09-16T01:10:14.570
> 
> 标签：linux

希望有人可以帮助解决这个问题：

我正在尝试使用以下命令删除 /tmp 上的会话文件：

```
find /tmp -name 'sess_*' -user Username -maxdepth 1 $CMD {} \; 
```

但我得到了这些错误：

> 查找：警告：您在非选项参数 -name 之后指定了 -maxdepth 选项，但选项不是位置性的（-maxdepth 影响在它之前指定的测试以及在它之后指定的测试）。请在其他参数之前指定选项。
> 
> ```
> find: paths must precede expression Usage: find [-H] [-L] [-P] [path...] [expression] 
> ```

我在网上寻找解决方案，但找不到任何解决方案。我用其他命令删除了其他 tmp 文件，想知道这是否影响了某些卷或套接字。

先感谢您

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-16T01:31:49.560

`find`具有三种类型的选项：用于匹配文件的选项（例如`-name`, `-user`）、指定对匹配文件执行的操作的选项（`-print`、`-exec`）以及控制命令整体行为的选项（例如`-maxdepth`, `-xdev`）。第三种必须放在其他两种之前。所以应该是：

```
find /tmp -maxdepth 1 -name 'sess_*' -user Username -exec $CMD {} \; 
```

# c++ - C ++如何检查函数是否正在接收无符号整数？

> ID：12443690
> 
> 赞同：6
> 
> 时间：2012-09-16T01:12:06.897
> 
> 标签：c++, int, unsigned

我有一个声明为的函数：

```
void foo(unsigned int x) 
```

如何检查 foo() 没有收到负数？我希望如果我调用 foo(-1) 会引发异常，但当然由于 x 会自动转换为无符号，我无法检查它的积极性，例如：

```
if not(x>=0){ do_something();}; 
```

或类似的检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T01:20:19.400

没有什么好的方法可以做到这一点，但你可以通过一些技巧来做到这一点：

1）声明一个未定义的更好匹配：

```
void foo(unsigned int x) {
  //do something
}

void foo(int x); 
```

2) 使用 typeid 来确定类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T01:20:50.607

您定义了该函数，因此它需要一个`unsigned int`参数，因此它不可能接收到负值。

如果您使用`int`参数调用它，该值将被隐式转换`int`为`unsigned int`，并且该转换的结果是明确定义的。这是该语言的一个特性，除非您的编译器碰巧给您提供了这样做的方法，否则您无法将其关闭——而且我不知道有哪个编译器可以关闭它。

就您的功能而言，这两个调用：

```
foo(-1);       /* -1 is converted to unsigned int, to the value UINT_MAX */
foo(UINT_MAX); 
```

无法区分。这不是唯一的情况。*任何*负值`int`都将转换为有效值`unsigned`。

如果认为非常大的值对 无效`foo()`，那么您可以检查参数值是否在某个“合理”范围内——但定义什么是“合理”并不总是那么容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T02:36:44.267

`foo`正如 wich 的回答所暗示的，您可以添加一个带`int`参数的重载版本。既然你说你想`foo(-1)`抛出一个异常，你可以让重载的`foo()`人这样做：

```
#include <iostream>

class Wrong_Type {
public:
    Wrong_Type(){}
};

void foo(unsigned n) {
    std::cout << "In foo, unsigned n = " << n << "\n";
}

void foo(int n) {
    std::cout << "In foo, int n = " << n << "\n";
    throw Wrong_Type();
}

int main() {
    try {
        foo(-1);
    }
    catch (Wrong_Type) {
        std::cout << "Caught Wrong_Type exception\n";
    }
} 
```

当我运行它时，输出是：

```
In foo, int n = -1
Caught Wrong_Type exception 
```

但这不是一个理想的解决方案，因为它基于参数的*类型*而不是它的值引发异常。`1`和都是`-1`type `int`，所以调用`foo(1)`也会抛出异常。一些其他有效的调用，例如`foo(1.0)`，变得模棱两可。

如果您可以替换`foo(1)`为`foo(1U)`，其中`1U`是类型的常量`unsigned int`，那么这可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T01:20:57.283

我不是 C++ 专家，但是...

您只有固定数量的位（通常是 32 或 64）来表示一个整数。如果你知道你永远不会有一个小于零的整数，你可以使用所有这些位并存储一个更大的数字。如果您的数字可能小于零，则编译器必须为符号保留一点。

它比这更复杂一些 - 请参阅[Wikipedia 上关于 2 的补码的文章](http://en.wikipedia.org/wiki/Two%27s_complement)。

长话短说，在 foo 内部，如果您看到 x“非常非常大”，您可能已经传递了一个负数。

检查您的编译器文档以了解 int 与 uint 的大小。

您可能希望将您的参数更改为常规整数`void foo(int x)`，或者只是放松地知道您当前的设置 x 永远不会小于零。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-09T18:40:19.017

这是一个可能的解决方案：

```
void foo(unsigned int x)
{
  unsigned int last_bit_one = 1 << 31; 
  if ( (x & last_bit_one) != 0)           // check if the last bit of x is 1 
    std::cout << "NEGATIVE NUMBER" << std::endl;
  else
    std::cout << "do something" << std::endl;
} 
```

当然，我们需要假设您输入的无符号数小于 2147483648。

# maps - 欧洲国家/地区/城镇数据列表

> ID：12443700
> 
> 赞同：1
> 
> 时间：2012-09-16T01:14:24.603
> 
> 标签：maps, street-address, country-codes

我想要一些用于选择欧洲地区和城镇的组合框，我在哪里可以找到一些英文源数据列表（但如果可用，还可以使用本地名称）？

例如：法国/布列塔尼/阿尔松

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T22:36:46.157

如果您想列出一个国家的子区域，请查看[https://github.com/jim/carmen/ 。](https://github.com/jim/carmen/)

例如

`spain = Country.named('Spain')`

`andalucia = spain.subregions.first`

`=> <#Carmen::Region name="Andalucía" type="autonomous community">`

# c++ - glTexImage2D 复制数据还是只指定它？

> ID：12443702
> 
> 赞同：0
> 
> 时间：2012-09-16T01:14:32.330
> 
> 标签：c++, opengl, textures

```
 InitTexture (  ) {
int size = 600 * 600 * 4;
float text[ 600 * 600 * 4 ];
glGenTextures ( 1, &texture_ );

glBindTexture ( GL_TEXTURE_2D, texture_ );
for ( int i = 0 ; i < size ;  ) {
    text[ i ] = 0.5f;
    text[ i + 1 ] = 0.0f;
    text[ i + 2 ] = 0.0f;
    text[ i + 3 ] = 1.0f;
    i += 4;
}
glTexImage2D ( GL_TEXTURE_2D, 0, GL_RGBA, 600, 600, 0, GL_RGBA, GL_FLOAT, text
    );
glBindTexture ( GL_TEXTURE_2D, 0 );
Renderable::IsGLError ( "InitTexture: GL Error occured ..... " );
 } 
```

使用此纹理初始化的应用程序失败。

```
 int size = 600 * 600 * 4;     // global
 float text[ 600 * 600 * 4 ];  // global

 InitTexture (  ) {
glGenTextures ( 1, &texture_ );

glBindTexture ( GL_TEXTURE_2D, texture_ );
for ( int i = 0 ; i < size ;  ) {
    text[ i ] = 0.5f;
    text[ i + 1 ] = 0.0f;
    text[ i + 2 ] = 0.0f;
    text[ i + 3 ] = 1.0f;
    i += 4;
}
glTexImage2D ( GL_TEXTURE_2D, 0, GL_RGBA, 600, 600, 0, GL_RGBA, GL_FLOAT, text
    );
glBindTexture ( GL_TEXTURE_2D, 0 );
 Renderable::IsGLError ( "InitTexture: GL Error occured ..... " );
 } 
```

但是当文本数组是一个全局指针时，它就可以正常工作。这是什么意思？glTexImage2D 不会复制数据，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T08:10:52.293

glTexImage2D 总是制作数据的副本。如果有错误，那么除了源数据缓冲区的下落之外，还有另一个原因。

# css - 为什么我的 div 在一个地方有垂直空白，而另一个地方却没有相同的 CSS？

> ID：12443707
> 
> 赞同：0
> 
> 时间：2012-09-16T01:15:24.197
> 
> 标签：css, vertical-alignment, spacing

我使用以下代码水平堆叠 div：

```
.basic {
    width:100px;
    position:relative;
    display:inline-block;
    border: 1px solid red;
    text-align:center;
    margin:0;
    padding:0;
}

#container {
    white-space: nowrap;
    border: 1px solid black;
    width:300px;
    overflow:auto;
} 
```

“容器”`white-space:nowrap`用于水平堆叠它的孩子。然而，水平的孩子在他们的右边有空间。这是一个[显示演示的小提琴](http://jsfiddle.net/nupul/UaAZK/7/)。检查框布局似乎没有任何边距/填充。但只是一些神秘的“暗物质”将其推出：P

奇怪的是，在我的应用程序的不同地方使用了相同的代码，但是这个异常出现在一个地方，如下图所示：

![在此处输入图像描述](../Images/228dff7d1ae5a65c336d1b08eadc2ade.png)

不用担心顶部的乱码。我还没有将 div 逆时针旋转 90 度 :) 但是，请注意图像的底部。文本框 div 彼此粘在一起，而顶部的 div 则没有。它们使用与上面相同的 CSS，但结构不同。顶部 div 有两个浮点数，它们被 div 清除，箭头指向底部。所以没有“未清除”漂浮在那里。我没有发布整个 HTML/CSS，而是在小提琴中重新创建了问题。

我不明白的是，即使在有 0 边距/填充和`display:inline-block`子 div 之后，为什么还有一些空间？我敢肯定这已经在这里被问过很多次了，但为什么会发生一次而不是在另一个地方呢？此外，如何最好地“修复它”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T01:19:31.703

`display: inline-block`如果当前元素和下一个元素之间存在空格，则在右侧放置一个边距。该空间计算为 4px 和当前字体大小（以`em`s 为单位）的乘积。请注意此小提琴中第一行和第二行之间的区别：http: [//jsfiddle.net/MkasM/](http://jsfiddle.net/MkasM/)

在您的情况下，这可以通过设置简单地控制，`margin-right: -4px`因为您没有更改`font-size`.

更多信息：http: [//css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

此外，如果您还没有给您的元素提供“box-sizing:border-box”，这是一个很好的做法。它将包含块内的“填充”和边框宽度，因此不会干扰布局。
阅读： http: [//paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

# sql - 删除具有交换列值的行

> ID：12443709
> 
> 赞同：0
> 
> 时间：2012-09-16T01:15:37.600
> 
> 标签：sql, view, common-table-expression

我有一张像

```
+ ----------------------- +
| RowID | FromCol | toCol |
+ ----------------------- +
| 1     | a       | b     |
| 2     | b       | c     |
| 3     | c       | d     |
| 4     | c       | b     |
| 5     | b       | a     |
+ ----------------------- + 
```

我想删除 FromCol --> ToCol 与 ToCol --> FromCol 具有相同值的行，例如。RowID 1 是 a-->b 而 RowID 5 有 b-->a 所以 rowID 5 应该被删除。同样，应该删除 RowID 4，因为它具有像 RowID 2 这样的交换值。

我的预期结果表是：

```
+ ----------------------- +
| RowID | FromCol | toCol |
+ ----------------------- +
| 1     | a       | b     |
| 2     | b       | c     |
| 3     | c       | d     |
+ ----------------------- + 
```

我想把它作为一个视图，最好使用 CTE，而不是使用 SQL CURSOR。任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:57:53.467

这是在 MySQL 中执行此操作的一种方法，我不确定相同的语法是否适用于其他 SQL 方言。

```
DELETE t1
FROM mytable t1
INNER JOIN mytable t2
WHERE t1.fromCol = t2.toCol
AND t1.toCol = t1.fromCol
AND t1.rowID > t2.rowID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:04:40.507

与@Barmar 非常相似，但使用子查询而不是内联表。

这适用于 SQL Server

```
select t1.*
FROM dbo.MyTest t1
WHERE (SELECT COUNT(t2.rowid) 
         FROM dbo.MyTest t2 
        WHERE t2.toCol= t1.fromCol
          AND t2.fromCol= t1.toCol
          AND t1.rowid> t2.rowid) = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T10:35:54.713

请尝试

```
Delete from table where rowid in (select  f.id from table f INNER JOIN table fo on fo.tocol = f.fromcol and f.tocol = fo.fromcol and f.id > fo.id
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-23T15:18:28.213

你可以使用一个非常简单的 SQL，如下所示：

```
SELECT RowID, FromCol, toCol
from my_table 
where FromCol > toCol 
```

如果您的列有字符串，那么您可以使用简单的散列函数来针对它们获取整数，然后将比较应用于它们。

# java - 如何使用 Java 连接到我的文件系统上的数据库

> ID：12443710
> 
> 赞同：2
> 
> 时间：2012-09-16T01:15:46.137
> 
> 标签：java, database, sqlite

我需要连接到我的文件系统上的数据库，但我注意到 JDBC 指的是内存中的数据库，任何时候我想检查表需要编写代码来检索它们的数据，目前我有一个 SQLite 数据库。我使用了以下代码，但即使我输入了正确的地址，它也无法连接到我的数据库。

```
 String sDriver = "org.sqlite.JDBC";
    String Database = "users/documents/DB.sqlite";
    String sJdbc = "jdbc:sqlite"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T01:50:34.237

将数据库 (DB.sqlite) 移动到工作目录中。然后使用此 url 连接到它：

```
jdbc:sqlite:DB.sqlite 
```

使用 JDBC，它将是这样的：

```
String driver = "org.sqlite.JDBC";
Class.forName(driver);

String dbUrl = "jdbc:sqlite:DB.sqlite";
Connection connection = DriverManager.getConnection(dbUrl); 
```

# ios - uitableview ios：根据计算出的距离对数组进行排序，而不是数组的一部分

> ID：12443714
> 
> 赞同：0
> 
> 时间：2012-09-16T01:17:27.900
> 
> 标签：ios, sorting, nsarray

我在地图上有一组点。我正确地填充了数组，并在地图上为它们添加了注释。一切正常。我有另一个具有相同数组的表格视图，在单元格的“副标题”中，我计算到用户和当前的距离。一切正常。

现在，我想在表格视图中对列表进行排序，换句话说，我想按距离对同一数组进行排序，从最低到最高。

问题是距离不是阵列的一部分。那么如何将距离与数组交叉匹配，这样当我对距离进行排序时，它会使用它在数组中的所属对象并对数组进行排序？

我对 ios 还很陌生，但我现在已经成功发布了 3 个应用程序，而这是第四个应用程序，要复杂得多，我认为到目前为止，我在制作应用程序方面已经有了很好的基础。从地图视图，到带有搜索控制器的表格视图等等。我只是错过了排序。

我想我需要为数组中的每个对象添加一些标签或属性，并将其分配给距离数组中的每个距离。任何建议将不胜感激:) 提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T02:20:37.300

```
// Assuming you have your points on the map in an NSArray called
// pointsOnMapArray and your distances in distanceArray, create a
// new mutable array to hold both.  Note, the "distances" in this
// case are stored as NSStrings.  We'll want to convert them to
// doubles before sorting them.
NSMutableArray *newArray = [[NSMutableArray alloc] init];

// Iterate over all of the points, and add a new element to the mutable
// array which is a new array containing a point and its distance.  The
// distance is converted from an NSString to an NSNumber containing a
// doubleValue.
int i;   
for (i = 0; i < pointsOnMapArray.count; i++) {
    NSArray *newItem = [NSArray arrayWithObjects: [pointsOnMapArray objectAtIndex: i], [NSNumber numberWithDouble:[[distanceArray objectAtIndex: i] doubleValue]], nil];
    [newArray addObject: newItem];
}

// Now, sort the new array based upon the distance in the second element
// of each array (ie, the distance).
[newArray sortUsingComparator: ^(id obj1, id obj2) {
    NSNumber *dist1 = [obj1 objectAtIndex:1];
    NSNumber *dist2 = [obj2 objectAtIndex:1];

    return [dist1 compare:dist2];
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T01:59:43.570

尝试用数组的距离和元素制作字典。然后通过对距离进行排序，可以对数组元素进行相应的排序。

```
NSMutableDictionary *dict=[[NSMutableDictionary alloc]init];
[dict setObject:(array element) forKey:(correspondingDistance)]; 
```

现在通过对键进行排序，您可以相应地对数组的元素进行排序。

# html - 使用 CSS，如何设置 div 标签的样式以填充宽度，即使视口被缩放？

> ID：12443715
> 
> 赞同：3
> 
> 时间：2012-09-16T01:17:38.400
> 
> 标签：html, css

```
<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8" />
        <style>
        html {
            margin: 0;
            padding: 0;
            border: 0;
        }

        body, div, span, applet, object, embed, iframe, pre, h1, h2, h3, h4, h5, h6, p, blockquote, a, abbr, acronym, address, big, cite, code, del, dfn, b, strong, em, font, img, ins, kbd, q, s, samp, small, strike, sub, sup, tt, var, table, tbody, dl, dt, dd, ol, ul, li, fieldset, form, button, label, legend, caption, hr, noscript {
            margin: 0;
            padding: 0;
            border: 0;
            outline: none;
            list-style: none;
            font-weight: normal;
            font-style: normal;
            font-size: 100%;
            font-family: inherit;
            vertical-align: top;
            text-decoration: none;
            position: relative;
        }

        body, html {
            height: 100%;
            border: none;
            top: 0;
            font: 12px/1.3 Helvetica, Arial, sans-serif;
            color: #131318;
            background: #E7E7E7;
            text-align: left;
        }

        .full {
            width: 100%;
            float: left;
        }

        .top {
            padding: 20px 0;
            background: #FF0000;
        }

        .center {
            width: 900px;
            margin: 0 auto;
        }

        .shell {
            width: 860px;
            padding: 20px;
            float: left;
            background: #FFF;
        }
        </style>
    </head>
    <body>
        <div class="full top">logo</div>
        <div class="full">
            <div class="center">
                <div class="shell">
                    <p>Lorem</p>
                    <p>Lorem</p>
                    <p>Lorem</p>
                    <p>Lorem</p>
                    <p>Lorem</p>
                    <p>Lorem</p>
                    <p>Lorem</p>
                    <p>Lorem</p>
                    <p>Lorem</p>
                    <p>Lorem</p>
                </div><!--/.shell-->
            </div><!--/.center-->
        </div><!--/.full-->
    </body>
</html> 
```

您可以在[这里](http://cl.ly/image/421z26151n1O)看到（或通过访问[此处](http://jsbin.com/aqeqaj)并缩小浏览器直到出现水平滚动条，然后向右滚动）顶部的红色条始终是视口的大小，而不是填满整个宽度这页纸。我怎样才能解决这个问题？我怎样才能使这样的栏（我的带有菜单的标题等）真正填充页面的宽度，而不管视口大小调整（最好没有 JavaScript）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T01:25:06.220

这已经被问过很多次了。共识似乎是在 div 上设置最小宽度。

```
min-width: 960px; 
```

其他讨论：

*   [如果我的浏览器窗口小于 div 的内容，当我向右滚动时，100% 宽度的 div 会被切断](https://stackoverflow.com/questions/6554813/100-width-div-gets-cut-off-when-i-scroll-right-if-my-browser-window-is-smaller)
*   [滚动条切断 div 背景](https://stackoverflow.com/questions/9724791/scrollbar-cutting-off-div-background)
*   [调整窗口大小时，页脚的背景图案会被截断](https://stackoverflow.com/questions/10360936/footers-background-pattern-gets-cuttoff-when-window-is-resized)

# php - 上传系统问题到服务器

> ID：12443722
> 
> 赞同：1
> 
> 时间：2012-09-16T01:19:07.550
> 
> 标签：php, html, mysqli

我开始制作自己的个人资料系统，用户可以在其中存储用户名、密码、名字、姓氏、年龄和个人资料图片。

通过此过程上传图像存在问题。代码出现错误，我不明白为什么。为英语道歉，我来自丹麦（注：编辑免费翻译）

这是我的代码

```
<?php
    include ("inc/db/db.php");
    if (isset($_POST["godkendt_bruger"]))
    {
        $query = 'SELECT NULL FROM `bruger` WHERE `brugernavn` = ?';
        if ($stmt = $mysqli->prepare($query))
        {
            $stmt->bind_param('s', $brugernavn);
            $brugernavn = $_POST["brugernavn"];
            $stmt->execute();
            $stmt->store_result();
            $count = $stmt->num_rows;
            $stmt->close();

            if ($count > 0)
            {
               $user_found = 1;
            }
        }

        if (!isset($user_found))
        {
            if ($_POST["pass"] != $_POST["gentag"])
            {
                $errors = 1;
                echo "<li id=\"check_not\">Angive ens password på siden..</li>";
            }

            if (empty($_POST["pass"]) && empty($_POST["gentag"]))
            {
                $errors = 1;
                echo "<li id=\"check_not\">Angive et password på siden..</li>";
            }

            if (empty($_POST["navn"]))
            {
                $errors = 1;
                echo "<li id=\"check_not\">Angive et Fornavn</li>";
            }

            if (empty($_POST["efternavn"]))
            {
                $errors = 1;
                echo "<li id=\"check_not\">Angive et Efternavn</li>";
            }

            if (!isset($errors))
            {
                $pb = null;
                include "inc/img/class.upload.php";
                $handle = new Upload($_FILES["file"]);

                if ($handle->uploaded)
                {
                    //lidt mere store billeder
                    $handle->image_resize = true;
                    $handle->image_ratio_y = true;
                    $handle->image_x = 220;
                    $handle->Process("profil/store");

                    //til profil billede lign..
                    $handle->image_resize = true;
                    $handle->image_ratio_crop = true;
                    $handle->image_y = 115;
                    $handle->image_x = 100;
                    $handle->Process("profil");

                    //til profil billede lign..
                    $handle->image_resize = true;
                    $handle->image_ratio_crop = true;
                    $handle->image_y = 75;
                    $handle->image_x = 75;
                    $handle->Process("profil/lille");
                    $pb = $handle->file_dst_name;
                }
                else
                {
                    echo 'Der opstod en fejl i erklæringen: - upload ' . $mysqli->error;
                }
            }

            //Lukker $errors
            if (!isset($user_found))
            {
                $query = 'INSERT INTO `bruger` '
                       . '(`Brugernavn`, `password`, `profilbillede`, '
                       . '`navn`, `efternavn`, `alder`) '
                       . 'VALUES (?, ?, ?, ?, ?, ?)';
                if ($stmt = $mysqli->prepare($query))
                {

                $stmt->bind_param(
                    'sssssi', 
                    $brugernavn, 
                    $password, 
                    $profilbillede, 
                    $navn, 
                    $efternavn, 
                    $alder
                );

                $brugernavn    = $_POST["brugernavn"];
                $password      = $_POST["pass"];
                $profilbillede = $pb;
                $navn          = $_POST["navn"];
                $efternavn     = $_POST["efternavn"];
                $alder         = $_POST["alder"];

                $stmt->execute();
                $stmt->close();

            }
            else
            {
                /* Der er opstået en fejl */
                echo 'Der opstod en fejl i erklæringen til ligge i databasen: ' . $mysqli->error;
            }
        }
    }
    else
    {
        echo "<li id=\"check_not\">Dette brugernavn er optaget!!</li>";
    }
}
else
{
    echo "<li id=\"check_opret\">Indtast dine oplysninger herunder for at opret en bruger </a></li>";
}

?> 
```

似乎错误在此块中

```
if ($handle->uploaded)
{
    //lidt mere store billeder
    $handle->image_resize = true;
    $handle->image_ratio_y = true;
    $handle->image_x = 220;
    $handle->Process("profil/store");

    //til profil billede lign..
    $handle->image_resize = true;
    $handle->image_ratio_crop = true;
    $handle->image_y = 115;
    $handle->image_x = 100;
    $handle->Process("profil");

    //til profil billede lign..
    $handle->image_resize = true;
    $handle->image_ratio_crop = true;
    $handle->image_y = 75;
    $handle->image_x = 75;
    $handle->Process("profil/lille");
    $pb = $handle->file_dst_name;

}
else
{
    echo 'Der opstod en fejl i erklæringen: - upload ' . $mysqli->error;
} 
```

错误是：**Der opstod en fejl i erklæringen: - 上传**（**声明中有错误**），没有别的。数据不存储在数据库中。

这是我的 html 她；

```
<form name="opret_bruger" method="post" action="#" enctype="multipart/form-data">
<tr>
    <td><p>Brugernavn</p></td>
    <td><input type="text" name="brugernavn"></td>
</tr>
<tr>
    <td><p>Password</p></td>
    <td><input type="password" name="pass"></td>
</tr>
<tr>
    <td><p>Password gentag</p></td>
    <td><input type="password" name="gentag"></td>
</tr>
<tr>
    <td><p>Fornavn</p></td>
    <td><input type="text" name="navn"></td>
</tr>
<tr>
    <td><p>Efternavn</p></td>
    <td><input type="text" name="efternavn"></td>
</tr>
    <tr>
    <td><p>Alder</p></td>
    <td>
        <select name="alder_1">
    <?php
    if ($stmt = $mysqli->prepare('SELECT `alder` FROM `alder`')) { 
        $stmt->execute();

        /* Bind resultatet */
        $stmt->bind_result($alder);

        /* Hent rækker og udskriv data */
        while ($stmt->fetch()) {
        ?>
            <option><?php echo $alder;?></option>
        <?php
        }

            /* Luk statement */
            $stmt->close();

        } else {
            /* Der er opstået en fejl */
            echo 'Der opstod en fejl i erklæringen: ' . $mysqli->error;
        }
        ?>
        </select>
    </td>
</tr>
<tr>
    <td><p>Upload Profilbillede</p></td>
    <td><input type="file" name="profilbillede"></td>
</tr>
<tr>
    <td></td>
    <td><input type="submit" name="godkendt_bruger"></td>
</tr>
</form> 
```

如果您有任何建议，我会欢迎他们，甚至更好地处理代码，以便可以存储图像。

Jesper -*丹麦*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:00:23.353

您的文件上传字段实际上命名为`profilbillede`：

```
 <td><input type="file" name="profilbillede"></td>
                                                  ^^^^^^^^^^^^^ 
```

这意味着它将是`$_FILES['profilbillede']`，而不是`$_FILES['file']`您正在使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:28:55.623

几个建议：

检查文件的上传路径。我假设

```
$handle->Process("profil/store"); 
```

是存储文件的位置。只需检查那里的文件权限，以防文件未上传。

另外，下面的代码有效吗？我可能错了，但不应该在绑定之前设置参数吗？IE

```
 $query = 'INSERT INTO `bruger` '
                   . '(`Brugernavn`, `password`, `profilbillede`, '
                   . '`navn`, `efternavn`, `alder`) '
                   . 'VALUES (?, ?, ?, ?, ?, ?)';
            if ($stmt = $mysqli->prepare($query))
            {

            $brugernavn    = $_POST["brugernavn"];
            $password      = $_POST["pass"];
            $profilbillede = $pb;
            $navn          = $_POST["navn"];
            $efternavn     = $_POST["efternavn"];
            $alder         = $_POST["alder"];

            $stmt->bind_param(
                'sssssi', 
                $brugernavn, 
                $password, 
                $profilbillede, 
                $navn, 
                $efternavn, 
                $alder
            ); 
```

我希望这会有所帮助。

# algorithm - Dijkstra 的算法是线性时间吗？

> ID：12443728
> 
> 赞同：2
> 
> 时间：2012-09-16T01:19:39.460
> 
> 标签：algorithm, dijkstra, a-star

```
O(|E| + |V| log |V|) 
```

我知道愚蠢的问题，但是如果有日志，它是线性的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T01:21:55.740

不，O(VlogV) =/= O(V) 因为 VlogV 与 V 的比率发散到无穷大

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T01:24:18.203

“如果有日志是线性的”这个问题的答案是否定的。线性通常指 O(N)

这意味着它取决于图，并且可以通过同时考虑边和顶点来更精确地测量复杂性。更简单的界限是`O(V^2)`因为在最坏的情况下`|E|`=`O(V^2)`因此`O(|V^2| + |V| log |V|) = O(V^2)`。在最好的情况下`|E| = 0`，所以`O(|V| log |V|)`，所以运行时间从来不是真正的线性。

# c++ - 在 C 中伪造继承：对齐会折断我的脖子吗？

> ID：12443732
> 
> 赞同：4
> 
> 时间：2012-09-16T01:20:42.027
> 
> 标签：c++, c, inheritance, casting, alignment

我有一个用于各种**C 和 C++**代码（通过`extern "C"`）的 C 结构。

```
#ifdef __cplusplus
extern "C" {
#endif

  typedef struct A A;
  struct A {
    /*some members*/
  };

#ifdef __cplusplus
}
#endif 
```

分配、初始化和释放是由我控制下的单独成员函数完成的，但我不控制对成员的访问，因为它们在任何地方都可以访问。

问题是，我无法更改`struct`整个系统中大量使用的标头中的 ' 定义，但我仍然想扩展类型并添加一些成员。由于这必须同时编译为 C++ 和 C，因此我不能简单地创建派生类型`struct B : public A`。所以我的想法是将这种类型添加到 cpp 文件中：

```
#ifdef __cplusplus
extern "C" {
#endif

  typedef struct B B;
  struct B {
    A parent; // <---- public inheritance
    /*some members*/
  };

#ifdef __cplusplus
}
#endif 
```

现在，我可以修改 cpp 文件中的所有函数，但我仍然必须`A*`在编译单元之外分发和接受，因为没人知道是什么`B`。

所以，我想知道是否有一种理智且定义明确的方式来做到这一点。我可以简单地将我`B*`的 s`A*s`来回转换还是必须显式转换它们：

```
A* static_cast_A(B* b) {
  return &(b->parent);
}
B* static_cast_B(A* a) {
  B* const b = 0;
  unsigned const ptrdiff = (unsigned)((void*)(&(b->parent)));
  return (B*)(((void*)a)-ptrdiff);
} 
```

**这是否还有其他问题，或者我应该完全不同吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T01:35:08.417

只要您不引入虚拟表（通过添加虚拟方法或析构函数）`struct B`并且`parent`该结构的成员是第一个元素，那么 case `B`to是安全的`A`。

转换`A`到`B`也是安全的，但前提是原始指针实际上指向`B`而不是指向其他东西，例如只有`A`结构本身，显然。

例如，如果 when`parent`不是 struct 的第一个成员，`B`则必须使用`container_of`在 Linux 内核中看到的宏。它适用于成员指针偏移量（即可以在[此处](http://open-nandra.com/2009/08/container_of-macro-or-how-it-works/)找到一些很好的解释）。

此外，默认情况下，两个结构将具有相同的对齐方式。如果您调整其中一个结构对齐方式，我不确定编译器将如何放置`A`。`B`我想这取决于编译器，但应该很容易弄清楚。

如果`B`有一个虚拟表，您必须了解编译器内部结构才能正确转换指针。例如，`GCC`在 x86_64 上添加了 8 个字节的偏移量，因此您必须在转换时手动偏移它。但这在虚拟继承（虚拟基类）的情况下不起作用，要解决你必须求助于使用 RTTI 等的问题......但这超出了你的问题范围，我建议你不要走那条路。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T08:05:57.197

对齐要求不应该引起任何问题，这确实是在 C 中伪造继承的默认方式。

但是，您`static_cast_B()`的不可移植（特别是`void *`算术和转换`unsigned`，以防万一`sizeof (void *) > sizeof (unsigned)`- 后者仍然可以工作，但有点代码味道）。

我建议改用以下代码：

```
#include <stddef.h>

B* static_cast_B(A* a) {
  return (B*)((char*)a - offsetof(B, parent));
} 
```

# c++ - 将旧指针数组的元素复制到新的指针数组中？

> ID：12443737
> 
> 赞同：1
> 
> 时间：2012-09-16T01:22:22.323
> 
> 标签：c++, arrays, copy, element, delete-operator

我需要一些 C++ 项目的帮助。我要做的是从指针数组中删除给定的元素。教给我的技术是创建一个少一个元素的新数组，然后将旧数组中的所有内容复制到新数组中，指定元素除外。之后，我必须将旧阵列指向新阵列。

这是我已经拥有的一些代码：

顺便说一句，我正在使用自定义结构......

```
Data **values = null;    // values is initialized in my insert function so it is
                         //   populated
int count;               // this keeps track of values' length

bool remove(Data * x) {
    Data **newArray = new Data *[count - 1];

    for (int i = 0; i < count; i++) {
        while (x != values[i]) {
            newArray[i] = values[i];
        }
        count -= 1;
        return true;
    }
    values = newArray;

    return false;
} 
```

到目前为止，插入函数可以工作并输出填充的数组，但是当我运行 remove 时，它​​所做的只是使数组更小，但不会删除所需的元素。我每次都使用第 0 个元素作为控件。

这是我得到的输出：

```
count=3 values=[5,6,7]            // initial insertion of 5, 6, 7
five is a member of collection? 0
count=3 values=[5,6]              // removal of 0th element aka 5, but doesn't work
five is a member of collection? 0
count=4 values=[5,6,5]            // re-insertion of 0th element (which is stored in
five is a member of collection? 0 // my v0 variable) 
```

任何人都可以推动我朝着正确的方向完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T01:44:50.627

首先，您的代码正在泄漏内存，这不好！接下来，您只复制第一个元素，即使第一个元素恰好是您要删除的元素，也不会复制。此外，当你从你的函数返回时，你根本没有改变你的内部状态。你肯定想做一些类似的事情

```
Data** it = std::find(values, values + count, x);
if (it != values + count) {
     std::copy(it + 1, values + count, it);
     --count;
     return true;
}
return false; 
```

也就是说，如果有人教你`std::vector<T>`在每次操作中实施诸如重新分配之类的东西，那么是时候换学校了！内存分配相对昂贵，您想避免它们。也就是说，在实现类似 a 的东西时，`std::vector<T>`你确实想像 a 一样实现它`std::vector<T>`！那就是你保留一个可能比现有元素更多的内部缓冲区，并记住你正在使用多少个元素。插入新元素时，只有在当前数组中没有空间时才分配新数组（不这样做很容易导致二次复杂度，即使总是在末尾添加元素）。删除元素时，只需将所有尾随对象向上移动一个，并记住数组中少了一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:25:11.260

尝试这个：

```
bool remove(Data * x)
{
    bool found = false;

    // See if x is in the array.
    for (int i = 0; i < count; i++) {
        if (x != values[i]) {
            found = true;
            break;
        }
    }

    if (!found)
    {
        return false;
    }

    // Only need to create the array if the item to be removed is present
    Data **newArray = new Data *[count - 1];

    // Copy the content to the new array
    int newIndex = 0;
    for (int i = 0; i < count; i++)
    {
        if (x != values[i])
            newArray[newIndex++] = values[i];
    }

    // Now change the pointers.
    delete[] values;
    count--;
    values = newArray;
    return true;
} 
```

请注意，有一个基本假设，如果`x`数组中存在，那么它只存在一次！该代码不会多次出现，这留给你，看看这是一个学校练习。

# android - App刚被强制退出，可能是SQLite相关

> ID：12443742
> 
> 赞同：0
> 
> 时间：2012-09-16T01:23:17.570
> 
> 标签：android, android-sqlite

我尝试创建一个支持 SQLite 的应用程序。但是当我启动应用程序时，它只是冻结，不得不被迫退出。`Main.java`班级：

```
package se.maxallan.birdsound;

import android.os.Bundle;
import android.app.Activity;
import android.database.Cursor;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class Main extends Activity {
private SpeciesDbAdapter dbHelper;
private SimpleCursorAdapter dataAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    dbHelper = new SpeciesDbAdapter(this);
    dbHelper.open();

    dbHelper.insertSomeSpecies();
    displayListView();

}
private void displayListView() {
    Cursor cursor = dbHelper.fetchAllSpecies();

    String[] columns = new String[]{
        SpeciesDbAdapter.DB_SCF_NAME,
        SpeciesDbAdapter.DB_T_TRANS
    };
    int[] to = new int[]{
        R.id.scf,
        R.id.trans
    };
    dataAdapter = new SimpleCursorAdapter(this,R.layout.specierow,cursor,columns,to);
     ListView listView = (ListView) findViewById(R.id.specieList);
      // Assign adapter to ListView
     listView.setAdapter(dataAdapter);
}

} 
```

我认为错误位于此类中，名为`SpeciesDbAdapter.java`.

```
 package se.maxallan.birdsound;

    import android.content.ContentValues;
    import android.content.Context;
    import android.database.Cursor;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.util.Log;

    public class SpeciesDbAdapter extends SQLiteOpenHelper{
public static final String DB_SPECIE_ID = "_id";
public static final String DB_SCF_NAME = "scf_name";

public static final String DB_T_LANG = "lang";
public static final String DB_T_TRANS = "translated";

private static SpeciesDbAdapter mDbHelp;
private static SQLiteDatabase mDb;

private static final String DB_NAME = "database.db";
private static final String DB_TBL_SPECIES = "species";
private static final String DB_TBL_TRANSLATIONS = "translations";
//private static final String DB_TBL_SOUNDS = "sounds";
private static final int DB_VERSION = 1;

private final Context mCtx;

private static String DB_CREATE = 
"CREATE TABLE if not exists species ("+DB_SPECIE_ID +" integer PRIMARY KEY autoincrement, "+DB_SCF_NAME+" , UNIQUE ("+DB_SPECIE_ID +"));" +
"CREATE TABLE if not exists translations (tid integer PRIMARY KEY autoincrement, "+DB_SPECIE_ID +" integer, "+DB_T_TRANS+", "+DB_T_LANG+", UNIQUE ( tid ));";

public SpeciesDbAdapter(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
    this.mCtx = context;
}
@Override
public void onCreate(SQLiteDatabase db) {
    Log.w("DATABAS", DB_CREATE);
    db.execSQL(DB_CREATE);
}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
}

//Open the database
public SpeciesDbAdapter open() throws SQLException {
    mDbHelp = new SpeciesDbAdapter(mCtx);
    mDb = mDbHelp.getWritableDatabase();
    return this;
}
//Close the connection
public void close() {
    if (mDbHelp != null) {
        mDbHelp.close();
    }
}

public void addSpecie(String scf, String translation, String lang){
    ContentValues specieValues = new ContentValues();
    ContentValues translationsValues = new ContentValues();
    specieValues.put(DB_SCF_NAME, scf);
    int LastInsertedId = (int) mDb.insert(DB_TBL_SPECIES, null, specieValues);
    translationsValues.put(DB_T_LANG, lang);
    translationsValues.put(DB_T_TRANS, translation);
    translationsValues.put(DB_SPECIE_ID, LastInsertedId);
    mDb.insert(DB_TBL_TRANSLATIONS, null, translationsValues);
}
public Cursor fetchAllSpecies() {
    Cursor mCursor = mDb.query(DB_TBL_SPECIES, new String[] {DB_SPECIE_ID, DB_SCF_NAME},null, null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}
public void insertSomeSpecies() {
    addSpecie("Cygnus olor", "Knölsvan", "sv");
    addSpecie("Cygnus cygnus", "Sångsvan", "sv");
}

} 
```

我想我只是误会了什么。CatLog 根本没有提供任何日志......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:25:10.507

问题是您正在从一个变量执行两个 create sql 语句，试试这种方式，

```
String createSpecies = "CREATE TABLE if not exists species ("+DB_SPECIE_ID +" integer PRIMARY KEY autoincrement, "+DB_SCF_NAME+" , UNIQUE ("+DB_SPECIE_ID +"));" 
String createTranslations = "CREATE TABLE if not exists translations (tid integer PRIMARY KEY autoincrement, "+DB_SPECIE_ID +" integer, "+DB_T_TRANS+", "+DB_T_LANG+", UNIQUE ( tid ));";

@Override
public void onCreate(SQLiteDatabase db) 
{
    Log.w("DATABAS", DB_CREATE);
    db.execSQL(createSpecies);
    db.execSQL(createTranslations);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:38:58.423

```
 String[] columns = new String[]{
    SpeciesDbAdapter.DB_SCF_NAME,
    SpeciesDbAdapter.DB_T_TRANS } 
```

您查询两张表，但`columns`应该在一张表中。

# android - Android Import 错误地包含 min SDK JARs 而不是 target

> ID：12443749
> 
> 赞同：0
> 
> 时间：2012-09-16T01:24:21.457
> 
> 标签：android, eclipse, sdk, import, jar

希望我没有遗漏一些明显的东西。我做了很多工作来隔离这个问题。假设我创建了一个新的 Android 项目：

```
Target Platform: Google APIs Android 3.1 (API 12)
Min Platform: Android 2.2 Froyo (API 8) 
```

创建项目时，AndroidManifest.xml 显示 min=8, target=15（不确定为什么是 15 而不是 12，但这不是问题）。这看起来不错：

```
included JAR: Google APIs [Android 3.1]
project.properties shows target=Google Inc.:Google APIs:12 
```

到目前为止，一切都很好。

现在，甚至没有编辑新项目，我从工作区中删除了该项目，将其移动到某处，然后使用**Import->Android->Existing Android Code 导入到 Workspace**中。
现在：

```
Included JAR: Android 2.2
project.properties shows target=android-8 
```

由于 2.2 中不存在 Holo 样式等问题，该项目现在出现了错误。

我试过Project-> Clean，什么都没有。我试过**Android->Fix Project Properties**。没变。

唯一的解决方法是删除项目，删除 project.properties，更新`AndroidManifest.xml`为使用`min-sdk`12，然后重新导入。即使这样，我也没有得到 Google JAR：

```
Included JAR: Android 3.1
project.properties shows target=android-12 
```

在创建项目时，导入过程似乎错误地使用了最小 SDK 值而不是目标。或者这是某种预期的行为？我错过了什么？

（这个场景可能看起来有点做作，但我是一名试图导入学生作业的教师。所以这给我带来了困难！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T02:58:29.147

右键单击导入的项目并转到

属性 - Android - 项目构建目标

将构建目标指定为目标 sdk 版本。

现在它应该包含正确的 jar 文件。

希望这可以帮助

# linux - Bash ARGS 帮助 - 出现随机错误

> ID：12443752
> 
> 赞同：0
> 
> 时间：2012-09-16T01:25:26.730
> 
> 标签：linux, bash, args

如果某个变量到位，尝试设置规则，有人可以识别我在这里缺少的 wtf 吗？

测试.sh：

```
#!/bin/bash
args=($@)
if [ "$@" = "--cron" ]; then 
 echo "WORKS!";
    else echo "FAILS"
fi 
```

输出`./test.sh`：

```
./test.sh: line 3: [: =: unary operator expected
FAILS 
```

但是，当我运行时`./test.sh --cron`，它可以工作并`WORKS`输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T03:08:11.830

执行此操作的正确方法会有所不同，具体取决于您要执行的操作。如果要检查第一个参数是否为 --cron，请使用以下命令：

```
if [ "$1" = "--cron" ]; then 
```

如果要检查*唯一*的参数是否是 --cron，请使用以下命令：

```
if [ "$*" = "--cron" ]; then 
```

（请注意，这是做某事的正确方法的极少数情况之一`"$*"`——它扩展到所有由空格分隔的参数，但出于解析目的将其视为单个单词。）

如果要检查是否*有任何*参数是 --cron，请使用以下命令：

```
cronopt=false
for argument; do
    if [ "$argument" = "--cron" ]; then
        cronopt=true
        break    # note: if you are scanning the arguments for other things too, remove this
    fi
done
if $cronopt; then
    ... 
```

顺便说一句，我不确定您使用该`args=($@)`行的目的是什么，但是如果您想将参数存储在数组中，正确的方法是`args=("$@")`——引号阻止它之前进行分词、文件名扩展等将参数放入数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T01:33:55.947

这应该有效，但仅适用于第一个元素，如果您想要更多，您可能需要执行`for`or`while`循环来遍历参数。

```
#!/bin/bash
args=($1)
if [ $args ] && [ $args = "--cron" ]; then
  echo "WORKS!";
    else echo "FAILS"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T02:04:31.910

在这种情况下，我相信`"$@"`引用得太好了。

尝试与 比较`"$1"`，或使用：

```
#!/bin/bash
args=($@)
if [ "$*" = "--cron" ]; then 
    echo "WORKS!";
else
    echo "FAILS"
fi 
```

# model-view-controller - 工作 mvc 区域

> ID：12443756
> 
> 赞同：0
> 
> 时间：2012-09-16T01:25:41.430
> 
> 标签：model-view-controller, area

我在使用区域时遇到了一些问题。我正在使用 Ado.Net 实体框架，并在默认模型中为我的模型生成 POCO，现在我必须在我的区域（管理区域）工作，我无法访问 POCO。我想在我的管理模型区域中重新生成另一个 POCO，但不确定是否是正确的做法，因为它会重复并且我的数据库对象很多。请回复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T23:45:57.527

区域实际上只是微型 mvc 结构（即控制器、视图等）。如果这与路由有关，请确保在调用 MapRoute 时将正确的命名空间添加到 DataToken：

```
 .DataTokens.Add("namespaces", new string[] { "MyNamespace.MyControllers" }); 
```

或者确保您在操作调用中指定区域。

老实说，尽管我认为这更多的是您需要添加 using 指令。

请提供更多信息。

# java - 拖放图像

> ID：12443758
> 
> 赞同：2
> 
> 时间：2012-09-16T01:25:46.297
> 
> 标签：java, image, swing, jpanel, drag-and-drop

我正在制作一个用 Java 编辑图像的程序。我想知道是否可以将图像从用户桌面`JPanel`拖到`JPanel`. 这在Java中可能吗？如果是这样，我会怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T08:17:53.817

简短的回答是：是的，这是可能的。

有几种方法可以做到这一点，我将为您提供最简单的一种代码：将图像文件从某处拖到您的 Swing 应用程序中。但是，您也可以将图像从图像编辑器复制到剪贴板并将其粘贴到那里，但我认为您不需要这个。要实现这第二个用例，您将不得不使用我的示例向您展示的`DataFlavor.imageFlavor`而不是。`DataFlavor.javaFileListFlavor`因此，要测试下面的代码，只需将 的实例添加`MainPanel`到容器中，然后在应用程序运行时，将图像文件拖到面板中。

这是的实现`TransferHandler`：

```
import java.awt.Cursor;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.io.File;
import java.io.IOException;
import java.util.List;

import javax.swing.JComponent;
import javax.swing.TransferHandler;

public class ImageTransferHandler extends TransferHandler {
    private static final DataFlavor FILE_FLAVOR = DataFlavor.javaFileListFlavor;

    private MainPanel mainPanel;

    public ImageTransferHandler(MainPanel panel) {
        mainPanel = panel;
    }

    /**
     * The method to handle the transfer between the source of data and the
     * destination, which is in our case the main panel.
     */
    public boolean importData(JComponent c, Transferable t) {
        if (canImport(c, t.getTransferDataFlavors())) {
            if (transferFlavor(t.getTransferDataFlavors(), FILE_FLAVOR)) {
                try {
                    List<File> fileList = (List<File>) t.getTransferData(FILE_FLAVOR);
                    if (fileList != null && fileList.toArray() instanceof File[]) {
                        File[] files = (File[]) fileList.toArray();
                        mainPanel.addFiles(files);
                    }
                    return true;
                } catch (IOException e) {
                    e.printStackTrace();
                } catch (UnsupportedFlavorException ex) {
                    ex.printStackTrace();
                }
            }
        }
        return false;
    }

    /**
     * Returns the type of transfer actions to be supported.
     */
    public int getSourceActions(JComponent c) {
        return COPY_OR_MOVE;
    }

    /**
     * Specifies the actions to be performed after the data has been exported.
     */
    protected void exportDone(JComponent c, Transferable data, int action) {
        c.setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
    }

    /**
     * Returns true if the specified flavor is contained in the flavors array,
     * false otherwise.
     */
    private boolean transferFlavor(DataFlavor[] flavors, DataFlavor flavor) {
        boolean found = false;
        for (int i = 0; i < flavors.length && !found; i++) {
            found = flavors[i].equals(flavor);
        }
        return found;
    }

    /**
     * Returns true if the component can import the specified flavours, false
     * otherwise.
     */
    public boolean canImport(JComponent c, DataFlavor[] flavors) {
        for (int i = 0; i < flavors.length; i++) {
            if (FILE_FLAVOR.equals(flavors[i])) {
                return true;
            }
        }
        return false;
    }
} 
```

这是我将 TransferHandler 添加到的面板，它将图像绘制为背景：

```
public class MainPanel extends JPanel {
    private Image image;

    MainPanel() {
        setTransferHandler(new ImageTransferHandler(this));
    }

    void addFiles(File[] files) {
        for (File file : files) {
            try {
                image = ImageIO.read(file);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        if (image != null) {
            repaint();
        }
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.BLUE);
        int width = getWidth();
        int height = getHeight();
        drawImage((Graphics2D) g, width, height);
    }

    private void drawImage(Graphics2D g2, int width, int height) {
        if (image != null) {
            g2.drawImage(image, 0, 0, width, height, null);
        } else {
            g2.drawRect(10, 10, width - 20, height - 20);
        }
    }
} 
```

# c++ - 性能交换整数与双精度

> ID：12443760
> 
> 赞同：7
> 
> 时间：2012-09-16T01:26:25.683
> 
> 标签：c++, compiler-optimization

由于某种原因，我的代码能够比整数更快地对双精度数执行交换。我不知道为什么会这样。

在我的机器上，双交换循环的完成速度比整数交换循环快 11 倍。双精度/整数的什么属性使它们以这种方式执行？

**测试设置**

*   视觉工作室 2012 x64
*   处理器核心 i7 950
*   **构建为 Release 并直接运行 exe，VS Debug hooks 歪曲了事情**

**输出：**

`Process time for ints 1.438 secs`

`Process time for doubles 0.125 secs`

```
#include <iostream>
#include <ctime>
using namespace std;

#define N 2000000000

void swap_i(int *x, int *y) {
    int tmp = *x;
    *x = *y;
    *y = tmp;
}

void swap_d(double *x, double *y) {
    double tmp = *x;
    *x = *y;
    *y = tmp;
}

int main () {
    int a = 1, b = 2;
    double d = 1.0, e = 2.0, iTime, dTime;
    clock_t c0, c1;

    // Time int swaps
    c0 = clock();
    for (int i = 0; i < N; i++) {
        swap_i(&a, &b);
    }
    c1 = clock();
    iTime = (double)(c1-c0)/CLOCKS_PER_SEC;

    // Time double swaps
    c0 = clock();
    for (int i = 0; i < N; i++) {
        swap_d(&d, &e);
    }
    c1 = clock();
    dTime = (double)(c1-c0)/CLOCKS_PER_SEC;

    cout << "Process time for ints " << iTime << " secs" << endl;
    cout << "Process time for doubles  " << dTime << " secs" << endl;
} 
```

正如 Blastfurnace 解释的那样，VS 似乎只优化了其中一个循环。

当我禁用所有编译器优化并将交换代码内联在循环中时，我得到以下结果（我还将计时器切换到 std::chrono::high_resolution_clock）：

`Process time for ints 1449 ms`

`Process time for doubles 1248 ms`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T02:23:18.153

您可以通过查看生成的程序集找到答案。

使用 Visual C++ 2012（32 位发布版本）的主体`swap_i`是三个`mov`指令，但主体`swap_d`完全优化为空循环。编译器足够聪明，可以看到偶数的交换没有明显的效果。`int`我不知道为什么它对循环不做同样的事情。

只是改变`#define N 2000000000`和`#define N 2000000001`重建会使`swap_d`身体执行实际的工作。最后的时间在我的机器上很接近，`swap_d`慢了大约 3%。

# wordpress - 如何在加载时显示 Tipsy 工具提示并保持显示？

> ID：12443762
> 
> 赞同：3
> 
> 时间：2012-09-16T01:26:43.487
> 
> 标签：wordpress, tooltip, jquery-tooltip, tipsy

我刚刚在我的 wordpress 网站上安装了 Tipsy Tooltip (http://onehackoranother.com/projects/jquery/tipsy/) 脚本，我只是想知道如何在页面加载时显示工具提示并保持显示。

这是我到目前为止的代码；

```
<a id="logo" href="#" original-title="Happy <?php echo date("l"); ?>"></a>
<script type='text/javascript'>
  $("a#logo").tipsy('show');
</script> 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T01:45:49.937

好吧，首先您必须指定要使用的属性而不是*title*，在您的情况下*为 original-title*。那么触发器必须设置为`manual`。最后，我们要在完成后显示工具提示。

```
 $('#logo').tipsy({trigger: 'manual', title: 'original-title'});
 $('#logo').tipsy('show'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:32:54.690

使用[文档就绪方法](http://api.jquery.com/ready/)：

```
$(document).ready(function() {
  $("a#logo").tipsy('show');
}); 
```

# android - 无法打开声音设备：音频设备操作无效或不受支持

> ID：12443764
> 
> 赞同：4
> 
> 时间：2012-09-16T01:27:22.173
> 
> 标签：android, sip, pjsip

无法弄清楚为什么 CSipSimple 在我的 android 手机上正常工作，但是当我在 call_make_call(..) 上使用相同的 CSipSimple 库尝试我自己的代码时，我的应用程序以这种方式崩溃：无法弄清楚发生了什么。我正在处理所有回调，但只有 ON_REG_STATE 被触发。有人有同样的问题吗？

```
D/libpjsip(21325):  16:24:19.930 android_jni_de  Default params
D/libpjsip(21325):  16:24:19.931 android_jni_de  Get dev info
D/libpjsip(21325):  16:24:19.931  pjsua_media.c  Opening sound device PCM@16000/1/20ms
D/libpjsip(21325):  16:24:19.931 android_jni_de  Get dev info
D/libpjsip(21325):  16:24:19.931 android_jni_de  Creating stream
I/libpjsip(21325):  16:24:19.931 android_jni_de  Create stream : 16000 samples/sec, 320     samples/frame, 2 bytes/sample
D/libpjsip(21325):  16:24:19.931 android_jni_de  Default params
D/libpjsip(21325):  16:24:19.932 android_jni_de  Get dev info
D/libpjsip(21325):  16:24:19.932  pjsua_media.c  Opening sound device PCM@44100/1/20ms
D/libpjsip(21325):  16:24:19.932 android_jni_de  Get dev info
D/libpjsip(21325):  16:24:19.932 android_jni_de  Creating stream
I/libpjsip(21325):  16:24:19.932 android_jni_de  Create stream : 44100 samples/sec, 882     samples/frame, 2 bytes/sample
D/libpjsip(21325):  16:24:19.933 android_jni_de  Default params
D/libpjsip(21325):  16:24:19.933 android_jni_de  Get dev info
D/libpjsip(21325):  16:24:19.933  pjsua_media.c  Opening sound device PCM@48000/1/20ms
D/libpjsip(21325):  16:24:19.934 android_jni_de  Get dev info
D/libpjsip(21325):  16:24:19.934 android_jni_de  Creating stream
I/libpjsip(21325):  16:24:19.934 android_jni_de  Create stream : 48000 samples/sec, 960 samples/frame, 2 bytes/sample
D/libpjsip(21325):  16:24:19.934 android_jni_de  Default params
D/libpjsip(21325):  16:24:19.934 android_jni_de  Get dev info
D/libpjsip(21325):  16:24:19.934  pjsua_media.c  Opening sound device PCM@32000/1/20ms
D/libpjsip(21325):  16:24:19.934 android_jni_de  Get dev info
D/libpjsip(21325):  16:24:19.935 android_jni_de  Creating stream
I/libpjsip(21325):  16:24:19.935 android_jni_de  Create stream : 32000 samples/sec, 640 samples/frame, 2 bytes/sample
D/libpjsip(21325):  16:24:19.935 android_jni_de  Default params
D/libpjsip(21325):  16:24:19.935 android_jni_de  Get dev info
D/libpjsip(21325):  16:24:19.935  pjsua_media.c  Opening sound device PCM@16000/1/20ms
D/libpjsip(21325):  16:24:19.935 android_jni_de  Get dev info
D/libpjsip(21325):  16:24:19.936 android_jni_de  Creating stream
I/libpjsip(21325):  16:24:19.936 android_jni_de  Create stream : 16000 samples/sec, 320 samples/frame, 2 bytes/sample
D/libpjsip(21325):  16:24:19.936 android_jni_de  Default params
D/libpjsip(21325):  16:24:19.936 android_jni_de  Get dev info
D/libpjsip(21325):  16:24:19.936  pjsua_media.c  Opening sound device PCM@8000/1/20ms
D/libpjsip(21325):  16:24:19.936 android_jni_de  Get dev info
D/libpjsip(21325):  16:24:19.937 android_jni_de  Creating stream
I/libpjsip(21325):  16:24:19.937 android_jni_de  Create stream : 8000 samples/sec, 160 samples/frame, 2 bytes/sample
E/libpjsip(21325):  16:24:19.937  pjsua_media.c  Unable to open sound device: Invalid     or unsupported audio device operation (PJMEDIA_EAUD_INVOP) [status=420009] 
```

# cloudbees - SSH 公钥不适用于 CloudBees 存储库

> ID：12443766
> 
> 赞同：3
> 
> 时间：2012-09-16T01:28:04.660
> 
> 标签：cloudbees

我正在尝试使用 git 作为我的存储库，但我不断收到错误：权限被拒绝（公钥）。

我尝试在我的计算机上生成密钥并将生成的密钥放在我的 cloudbees 帐户以及我的 known_hosts 文件中。

我还尝试添加我在 known_hosts 中创建的 Jenkins 作业中列出的密钥，但我仍然无法连接。

我不确定如何获得正确的密钥或如何/在哪里将密钥放置在正确的位置。

任何帮助将非常感激。

谢谢，丹尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T02:32:15.077

在[http://wiki.cloudbees.com/bin/view/DEV/Git+-+Getting+Started#HTroubleshooting](http://wiki.cloudbees.com/bin/view/DEV/Git+-+Getting+Started#HTroubleshooting)

话虽如此，听起来您好像是 SSH 新手，上述常见问题解答中的命令可能无济于事。

一般来说，您将生成一个公钥和私钥对。公钥 (~/.ssh/id_rsa.pub / ~/.ssh/id_dsa.pub) 将被粘贴到 GrandCentral，如上面的链接所示。

# javascript - 使用自定义原型在 javascript 中创建函数

> ID：12443769
> 
> 赞同：5
> 
> 时间：2012-09-16T01:29:15.553
> 
> 标签：javascript, function, prototype

所以我创建了一个这样的函数，

```
var functionName = function(arg1) { //code logic here; } 
```

同时，我需要这个函数作为一个对象工作。它不会真正保存任何东西，但将从另一个对象访问数据。

```
var myObj = new Object();
myObj.x = 3;
myObj.y = 4; 
```

所以当我去的时候，`functionName.x`它应该返回`myObj.x`。该`myObj`对象正在其他地方维护，我无法控制它。

这就是我目前实现它的方式，

```
functionName.__proto__ = myObj; 
```

它工作正常。但是`__proto__`已经被弃用了，我想看看是否有其他安全的方法。我想过重写`Function.prototype`，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T11:45:11.353

我在这里遇到同样的问题。不幸的是，在 EcmaScript 5.1 下没有好的解决方案。

在语言规范[http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)中，它在 13.2“创建函数对象”中说新的 [[Prototype]] 内部属性创建的函数对象始终是标准的内置函数原型对象。

如同一规范的 13.3 中所述，使用 Function 构造函数也无济于事，因为由`new Function(…)`13.2 中详述的方法构造的函数也无济于事。（这反映在 的`prototype`属性`Function`既不可写也不可配置的事实上。

所以要实现你想要的，你需要一个方法来改变已经存在的对象的原型。幸运的是，即将发布的 Ecmascript 6 标准似乎`Object.prototype.__proto__`按照最近草案[http://wiki.ecmascript.org/lib/exe/fetch.php?id=harmony%3Aspecification_drafts&cache=cache&media=harmony:working_draft_ecma-中的附件 B.2.2 进行了标准化262_edition_6_05-14-13-nomarkup.pdf](http://wiki.ecmascript.org/lib/exe/fetch.php?id=harmony%3Aspecification_drafts&cache=cache&media=harmony:working_draft_ecma-262_edition_6_05-14-13-nomarkup.pdf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T02:29:44.657

你想为 myObj 实现一个委托：

```
 var functionName = function(arg1) { // code }

     functionName.myObj = new MyObj();
     for (prop in functionName.myObj) {
       if (functionName.myObj.hasOwnProperty(prop)) {
         functionName.__defineGetter__(prop, function() { return functionName.myObj[prop]; } );
       }
     } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-16T02:36:06.300

你可以设置`prototype`函数的。

```
function functionName(arg1) { 
    //code logic here;
}

var myObj = { x: 3, y: 4 };
functionName.prototype = myObj;

var obj = new functionName();
console.log(obj.x, obj.y); // will output 3, 4 
```

# ruby-on-rails-3 - 如何从 has_many 中的数组中获取单个属性：通过关联（用户/朋友模型）

> ID：12443772
> 
> 赞同：0
> 
> 时间：2012-09-16T01:29:57.500
> 
> 标签：ruby-on-rails-3, associations

在我的用户模型中，我有以下内容：

```
class User < ActiveRecord::Base
  has_many :friendships, dependent: :destroy
  has_many :friends, :class_name => "User", :foreign_key => "friend_id"

  has_many :pending_friends, 
   :through => :friendships, 
   :conditions => "status = 'pending'", 
   :foreign_key => "user_id", 
   :source => :friend

  has_many :requested_friends, 
   :through => :friendships,
   :source => :friend, 
   :conditions => "status = 'requested'"

  def friends
    direct_friends | inverse_friends
  end 
```

在我的友谊模型中，我有以下内容：

```
class Friendship < ActiveRecord::Base
 belongs_to :user
 belongs_to :friend, :class_name => "User", :foreign_key => "friend_id" 
```

在我看来，我创建了一个包含每个用户朋友的数组，如下所示。此代码工作并使用来自朋友的“用户”数据库模型属性的所有数据填充数组。

```
 User.first.friends 
```

但是，我希望能够调用用户朋友的名字。那么，例如，我不应该能够做这样的事情吗？

```
 User.first.friends.map(&:name) 
```

如何获取仅包含朋友姓名而不是所有朋友用户属性的数组？如果有人能告诉我为什么使用 .first ，我也将不胜感激（我从这里得到：[Rails calls User record from Friends model](https://stackoverflow.com/questions/7523037/rails-calling-user-record-from-friends-model)），因为它不只是获取用户朋友的第一个实例（它获取所有实例）。为什么只是这样做：

```
 User.friends 
```

返回一个空数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T01:40:05.760

尝试方法[pluck](http://apidock.com/rails/ActiveRecord/Calculations/pluck)：

```
User.first.friends.pluck(:name) 
```

您应该使用`first`方法从表中检索一个对象。User 是一个有很多用户的表。

# java - Java：当具有受保护的构造函数时，如何从 java.io 为 Reader 类创建新的类对象

> ID：12443775
> 
> 赞同：3
> 
> 时间：2012-09-16T01:30:23.877
> 
> 标签：java, class, constructor, protected

我想为 java 的 Reader 类创建一个新的类对象，但我无法访问构造函数，因为它受到保护。

[阅读器类说明](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Reader.html)

```
Reader myReader = new Reader(); 
```

不管用。

通常，我会创建一个新函数来访问该构造函数，但由于该函数是 java 默认库的一部分，我该如何访问它？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T01:32:02.250

Reader 是一个抽象类。您不能实例化它，仅用于创建子类实例。

你的意思是

```
Reader myReader = new InputStreamReader(in, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T01:32:36.383

[`Reader`](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html)是一个抽象类，因此您必须实例化它的实现，例如[`BufferedReader`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)or [`InputStreamReader`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-16T02:06:02.120

正如其他人所说，您可以创建 的子类的实例`Reader`，例如`BufferedReader`.

如果您不想使用 Reader 的子类，您可以创建`Reader`如下实例

```
Reader reader = new Reader() {

        @Override
        public int read(char[] cbuf, int off, int len) throws IOException {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public void close() throws IOException {
            // TODO Auto-generated method stub

        }}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T03:33:23.177

如果您查看[Reader Java Doc](http://docs.oracle.com/javase/6/docs/api/java/io/Reader.html)`Reader` ，您可以根据您的要求查看 intialyze 任何一个的具体子类。`Reader`你不能按原样即时`abstract`

BufferedReader
CharArrayReader
FilterReader
InputStreamReader
PipedReader
StringReader

# asp.net-mvc - 在导航属性中搜索

> ID：12443778
> 
> 赞同：0
> 
> 时间：2012-09-16T01:31:09.560
> 
> 标签：asp.net-mvc, linq, ef-code-first

我使用 ASP.NET MVC 4 中的代码优先方法创建了我的应用程序。

我有三个实体。即“公司”、“服务”和“服务功能”：

```
public class Company
{
    public int CompanyID { get; set; }

    [Required]
    public string Name { get; set; }

    [Required]
    public string Description { get; set; }

    public virtual Service SuppliedService { get; set; }

}

public class Service
{
    public int ServiceID { get; set; }

    [Required]
    public string Name { get; set; }

    public virtual ICollection<ServiceFeature> ServiceFeatures { get; set; }

}    

public class ServiceFeature
{
    public int ServiceFeatureID { get; set; }

    [Required]
    public string Name { get; set; }

} 
```

我有一个搜索表单，它包含所有 ServiceFeature 的复选框。用户将选择复选框并获取提供服务的公司的结果以及选定的 ServiceFeatures。

我的服务获得了公司列表，如下所示，但我被困在如何在 where 子句中包含选定的 ServiceFeatures（带有 for 循环的动态 LINQ？）

```
var searchResults = _companyService.GetCompanies(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:49:59.203

假设您有一个包含所选功能 ID 的集合，称为`requested`，并假设您希望公司提供包含所有所选功能的服务，例如，您可以这样做：

```
var q = from c in searchResults
        let sf = c.SuppliedService.ServiceFeatures
                                  .Select(f => f.ServiceFeatureID)
                                  .Intersect(requested)
        where sf.Count() == requested.Count()
        select c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:25:54.177

在类似的情况下，我更喜欢一种比使用`Intersect`. `Intersect`可以产生具有深度嵌套的可怕查询，因为具有要相交的 Id 值的列表是由列表中每个 Id 的命令`SELECT`构建的。`UNION`当 Id 的数量很少时这不是问题（我假设在你的情况下是真的），但是如果数量较大，它可能会引发 SQL 异常。

所以这是我更喜欢的：

```
var q = context.Companies.AsQueryable();

foreach(int i in featureIds)
{
    int j = i; // prevent modified closure.
    q = q.Where(c => c.SuppliedService.ServiceFeatures.Any(f => f.Id == j));
}

var result = q.ToList(); 
```

`WHERE EXISTS`它使用许多子句构建查询。这可能非常有效，因为每个都`EXISTS`将寻找（而不是扫描）`ServiceFeature`. 除此之外， an`INTERSECT`是一个隐含的`DISTINCT`。

好吧，只是想指出这一点。如前所述，在记录数量较少的情况下，您不会注意到任何差异。所以选择最适合你的。

# selenium - 如何在 selenium IDE 中关注新窗口（没有 windowName 的第三方）？

> ID：12443779
> 
> 赞同：0
> 
> 时间：2012-09-16T01:31:42.553
> 
> 标签：selenium

我正在通过表单向第三方 URL 提交搜索条件。我试图给 target="someName"。但是，当我尝试使用“sameName”关注新窗口并在那里验证一些文本时，selenium 无法找到该定位器或关注该窗口。重调假。请帮忙。这很紧急。我还尝试了 storeAllWindowNames 或 Ids selenium 命令，也无法使用其返回的主窗口 ID 而不是新的打开窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:28:51.117

想法如下。当您尝试在新窗口中验证某些文本时，我认为没有必要获取窗口名称，因为您可以使用 firepath（ffox 中的 firebug 插件）和使用命令获取要验证的文本的 xpath 或 cssselector

```
 String txt = driver.findElement(By.xpath(//...blablbalba)).getText().trim();
    //or
   String txt = driver.findElement(cssSelecot(html>..blalblabla...)).getText().trim();
    //validation 
   Assert.assertTrue(txt.equals("blablabla")); 
```

你实际上可以验证它。

或者如果您想验证某些东西而 selenium 无法处理它，那么我建议您使用 js（使用 js 的 getText）：

```
 String cssSelector=....

    JavascriptExecutor js = (JavascriptExecutor) driver;
            StringBuilder stringBuilder = new StringBuilder();

    stringBuilder.append("var x = $(\""+cssSelector+"\");");
            stringBuilder.append("return x.text().toString();")       ;

           String res= (String) js.executeScript(stringBuilder.toString());
           Assert.assertTrue(res.trim().contains("blablabla....")   ); 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:58:04.017

这是解决方案：

好吧，如果你别无选择，只能使用它。这是一种解决方案：如果您有一个自己的目标，例如`target="popup"`，那么您只需要在单击链接之前打开目标窗口。例子：

```
[b]store "javascript{selenium.browserbot.getCurrentWindow().open('', 'popup')}", "myWindow"[/b] 
```

如果您有`target="_blank"`，则需要在打开窗口之前更改目标。

```
store "javascript{this.page().findElement('link=My link who open the popup with target blank').target='popup'}", "myVar" 
store "javascript{selenium.browserbot.getCurrentWindow().open('', 'popup')}", "myWindow" 
```

然后，您单击链接和`selectWindow("popup")`。那是。

另一种解决方案是重写整个 A 标记并`href/target`通过 javascript更改，`window.open`但这需要做更多的工作。

# .net - 是否可以在 SAFEARRAY 中编组 ref 参数

> ID：12443784
> 
> 赞同：9
> 
> 时间：2012-09-16T01:32:35.440
> 
> 标签：.net, parameters, marshalling, safearray

这是我的 C# 服务器方法：

```
public void Exec(out int status, string output)
{
     status = 3;
     Console.WriteLine("Exec({0}, ...)", status);

     output = string.Format("Hello from .NET {0}", DateTime.Now);
     Console.WriteLine("Exec(..., {0})", output);         
} 
```

我的 C++ 客户端正在设置并调用此方法。这工作正常，但状态和输出变量似乎没有链接。就好像它们是按值而不是按引用传递的。

这是我的客户代码：

```
InitCLR();

LONG index = 0;

LONG i1 = 12; // just some number for testing
BSTR s1 = SysAllocString(L"Hello world");

SAFEARRAY* args = NULL;
CHECK_HRESULT( SafeArrayAllocDescriptor(1, &args) );

args->cbElements = sizeof(VARIANT);
args->rgsabound[0].lLbound = 0;
args->rgsabound[0].cElements = 2;

CHECK_HRESULT( SafeArrayAllocData(args) );   

// byref not working for in/out param   
VARIANT arg1;
VariantInit(&arg1);
V_I4REF(&arg1) = &i1;
V_VT(&arg1) = VT_I4 | VT_BYREF;   

// byref not working
VARIANT arg2;
VariantInit(&arg2);  
V_BSTR(&arg2) = SysAllocString(L"Hello world");
V_VT(&arg2) = VT_BSTR;   

index = 0;
CHECK_HRESULT( SafeArrayPutElement(args, &index, &arg1) );

index = 1;
CHECK_HRESULT( SafeArrayPutElement(args, &index, &arg2) );

int bindingFlags = mscorlib::BindingFlags_InvokeMethod |
  mscorlib::BindingFlags_Instance |
  mscorlib::BindingFlags_Public;

VARIANT retval;
VariantInit(&retval);

bstr_t methodName("Exec");
HRESULT hRes = Type->InvokeMember_3(
  methodName,
  static_cast<mscorlib::BindingFlags>(bindingFlags),
  NULL, // binder *
  Instance,
  args,
  &retval);

_tprintf(TEXT("Exec() == 0x%x\n"), hRes);

_tprintf(TEXT("i1=%d\n"), i1); 
```

有人可以在设置 SAFEARRAY 参数方面提供帮助，以便将“ref”参数复制回来吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T09:15:54.140

我可能不知道完整的答案，但我在您的代码中发现了两件事：

**字符串未通过引用正确传递**

C# 中的字符串是不可变的引用对象。这意味着对它们的引用是（按值）传递的，一旦创建了字符串，就不能修改它。如果您修改字符串值，您实际上会创建一个新字符串并更改对它的本地引用。

[这里](https://stackoverflow.com/a/10792823/3070052)有一个很好的解释

因此，您需要将 C# 函数的定义更改为如下所示：

```
public void Exec(out int status, out string output)
{
    ...
} 
```

**你应该使用 ref 而不是 out**

您似乎在 C# 函数调用**之前**初始化参数值而不是函数本身。

所以，你应该使用 ref 而不是 out 关键字；

```
public void Exec(ref int status, ref string output)
{
    ...
} 
```

# mathjax - 在 MathJax 数学表达式中放置“标记”

> ID：12443787
> 
> 赞同：1
> 
> 时间：2012-09-16T01:32:55.010
> 
> 标签：mathjax

假设我有一些方程式，比如说：

$$\underbrace{ \frac{a}{b} }_{c}$$

而且，我想在 MathJax 的 HTML/CSS/SVG 输出中获取 $c$ 的位置。

有没有办法做到这一点？即我想做类似的事情：

$$\underbrace{ \frac{a}{b} }_{c\invisiblemarkerXYZ}$$

然后能够进行查询以获取与 invisiblemarkerXYZ 对应的 DOM 元素

谢谢！

编辑这是我想要做的：

等式 1 = $$\underbrace{\frac{a}{b}}{A}$$

等式 2 = $$A = \sum_{i=1}^ni$$

现在，我想画两条 A 的线（通过 SVG）。因此，我需要一些方法来获取 MathJax 元素的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:47:53.743

您可以使用在用于 的元素上`\cssId{XYZ}{c}`设置，然后可以使用来获取该 DOM 元素。但是 MathJax 的 HTML-CSS 和 SVG 处理器的输出并不是为了事后操作而设计的。例如，通常您将无法从 HTML-CSS 输出中获取元素的尺寸，并且可能不是您期望的那样。（例如，高度经常设置为 0。）`id="XYZ"``c``document.getElementById("XYZ")``offsetHeight``offsetWidth`

你能多说一些关于你想要完成的事情吗？

# sql - 无法从 SSMS 2012 远程连接到 SQL Azure

> ID：12443789
> 
> 赞同：5
> 
> 时间：2012-09-16T01:33:44.403
> 
> 标签：sql, azure, ssms

我无法使用 SQL Management Studio 2012 远程连接到我的 SQL Azure 数据库实例。我的本地 IP 存在防火墙异常。我可以使用 Azure 帐户中基于浏览器的管理链接成功连接并管理数据库。

我似乎无法通过 SSMS 或 VS2012 之类的任何其他方式连接到数据库。

这是我在 SSMS 中的连接格式：

```
Server Name:     myservername.database.windows.net
Authentication:  SQL Server Authentication
Login:           myusername@myservername
Password:        my-password
Connect to:      (i've tried) "master", mydatabasename, <default>
Encryption:      TRUE 
```

再一次，我确实在我的 Azure 帐户的服务器实例上为我的本地 IP 地址启用了防火墙规则。

当我尝试连接时，我收到此错误：

> 与服务器成功建立连接，但在登录前握手期间发生错误。（提供者：SSL 提供者，错误：0 - 等待操作超时。）（Microsoft SQL Server，错误：258）

在搜索那个 258 错误时，我没有得到很多与 SQL Azure 相关的结果。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T23:04:24.987

如果可以在两个端点之间建立安全网络并且如果一台计算机启动安全通道，则会由于计算机中的某些配置而生成错误 258。这个问题可能是非常特定于机器的，而不是特定于 SQL 的，这就是为什么您在这方面没有找到任何资源的原因。

您是否可以尝试按照以下故障排除指南中的说明使用 SQLCMD，看看是否可以在同一台计算机上隔离 SSMS 特定问题：http: [//social.technet.microsoft.com/wiki/contents/articles/1719.windows-azure -sql-database-connectivity-疑难解答-guide.aspx](http://social.technet.microsoft.com/wiki/contents/articles/1719.windows-azure-sql-database-connectivity-troubleshooting-guide.aspx)

如果您捕获并分析网络数据包流量，您可能能够确定连接错误的根本原因。

# php - JavaScript vs PHP，通过 URL（post）操作 XML 值（元素的文本）

> ID：12443791
> 
> 赞同：2
> 
> 时间：2012-09-16T01:33:46.680
> 
> 标签：php, javascript, xml, actionscript-3

哪个更好更容易使用？我一直在尝试通过 php 或 js 以 XML 格式保存和替换（如果需要）一些数据，例如玩家在游戏中的得分（来自 AS3 应用程序）。

```
<?xml version="1.0" encoding="utf-8"?>
<scores>
  <game id="1">
    <slot top="1">
      <name>joe</name>
      <score>125688</score>
    </slot>
    <slot top="2">
      <name>john</name>
      <score>10943</score>
    </slot>
    <slot top="3">
      <name>yuri</name>
      <score>9235</score>
    </slot>
  </game>
</scores> 
```

你有什么建议来改变，例如，仅仅通过调用一个 url 并从 AS3 应用程序发布一些数据来改变 Yuri 的分数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:29:09.173

哎呀！JavaScript 无法保存 XML 文件。在这种情况下，我们应该使用 php， [manipulating-xml-with-php](https://stackoverflow.com/questions/3848589/manipulating-xml-with-php)

# python - 绑定套接字时权限被拒绝

> ID：12443792
> 
> 赞同：1
> 
> 时间：2012-09-16T01:33:49.810
> 
> 标签：python, linux, sockets

又是我，来自[Running Python server forever](https://stackoverflow.com/questions/12440269/running-python-server-forever/12441458)。我*确实*将文件上传到服务器，但我得到了这个：

```
Traceback (most recent call last):
  File "./application", line 42, in <module>
    s.bind((TCP_IP, TCP_PORT))
  File "<string>", line 1, in bind
socket.error: [Errno 13] Permission denied 
```

供您参考，代码在这里：

```
...

TCP_IP = ''
TCP_PORT = 9090
BUFFER_SIZE = 256

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((TCP_IP, TCP_PORT))
s.listen(1)
while True:
    conn, addr = s.accept()
    ClientThread(conn, addr).start() 
```

当套接字绑定到端口 9090（或任何其他端口）时，它只返回此异常。我不需要`root`，因为`port > 1024`。

我应该改变什么？是 TCP_IP 还是 TCP_PORT 的问题？

~机会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:42:24.227

尝试使用`'0.0.0.0`' 作为绑定地址。在 Linux 中，这意味着所有接口。

```
TCP_IP = '0.0.0.0' 
```

并确保 SELinux 已禁用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:29:38.143

将主机设置为“无”，以便它正确绑定到所有适配器接口。

```
host = None
s.bind((host, TCP_PORT)); 
```

参考：[http ://docs.python.org/library/socket.html](http://docs.python.org/library/socket.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T15:27:35.903

我建议进一步隔离问题，这意味着您想使用“应该也可以工作”但不是您的代码的东西来重现这个问题。

例如，尝试一个固定的（已知工作的）HTTP 脚本服务器，并观察如果它也失败了，那么问题与您发布的 Python 代码无关。这将使您走上正确的轨道……权限。

仅供参考 - 在 EC2 上，我不认为您以 root 身份登录 - 我的 EC2 不支持 root（它是 Ubuntu）。相反，您在以您身份登录时“sudo”运行命令。系统不会提示我输入 sudo 密码（尽管可能有人在我之前配置过，通过将 NOPASSWORD=ALL 添加到我的 /etc/sudoers 用户或组）。

我对 EC2 的了解是，您在操作系统本身和 Amazon EC2 控制面板中都有防火墙和权限，您很容易遇到权限问题并浪费时间寻找错误的地方。

无论如何，请确认它的权限不是您的 Python 代码，然后将此问题提交给 EC2 论坛以获得最佳结果。

# java - SWT Snippet2。表排序。循环中的项目数组更改。这是如何运作的？

> ID：12443795
> 
> 赞同：1
> 
> 时间：2012-09-16T01:34:42.170
> 
> 标签：java, sorting, swt, code-snippets

> [http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet2.java](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet2.java)

我正在尝试在 SWT 中向表格小部件添加排序。从 Snippet2`sortListener`处理程序复制代码不起作用。它正确地将两个项目交换为排序顺序。表中超过 2 项，结果难以预料。

在我看来（在从 Snippet2 提取的以下代码中`sortListener`）`items[i].dispose()`将更改`TableItems`我们在外部 for 循环中迭代的被调用项的数组，`for (int i = 1 ......` 此外，当一个项目是`disposed()`，并插入到新索引处的项目中时，整个数组被重新创建。那肯定会破坏迭代？

所以，我想我有两个问题：

1.  我对 Snippet2 的算法有什么不了解的地方？
2.  排序操作可能返回随机结果是否还有其他明显的原因（记住我是菜鸟，所以很可能犯了最愚蠢的错误）？

这是我的代码：

```
Listener sortListener = new Listener() {
    public void handleEvent(Event e) {
        TableItem[] items = table.getItems();
        Collator collator = Collator.getInstance(Locale.getDefault());
        TableColumn column = (TableColumn)e.widget;
        int index = column == column1 ? 0 : 1;
        for (int i = 1; i < items.length; i++) {                <--------- HERE
            String value1 = items[i].getText(index);
            for (int j = 0; j < i; j++){
                String value2 = items[j].getText(index);
                if (collator.compare(value1, value2) < 0) {
                    String[] values = {items[i].getText(0), items[i].getText(1)};
                    items[i].dispose();                         <--------- HERE
                    TableItem item = new TableItem(table, SWT.NONE, j);
                    item.setText(values);
                    items = table.getItems();                   <--------- HERE

                    break;
                }
            }
        }
        table.setSortColumn(column);
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T06:01:03.640

此代码片段适用于表中的任意数量的项目（我对其进行了测试）。
但它仅适用于 2 列。（这是您的问题吗？）
如果表中有更多列，代码将如下所示：

```
 Listener sortListener = new Listener() {
        public void handleEvent(Event e) {
            TableItem[] items = table.getItems();
            Collator collator = Collator.getInstance(Locale.getDefault());
            TableColumn column = (TableColumn)e.widget;
            int index = table.indexOf(column);
            for (int i = 1; i < items.length; i++) {             //   <--------- HERE
                String value1 = items[i].getText(index);
                for (int j = 0; j < i; j++){
                    String value2 = items[j].getText(index);
                    if (collator.compare(value1, value2) < 0) {
                        String[] values = new String[table.getColumnCount()];
                        for (int columnIdx = 0; columnIdx < table.getColumnCount(); 
                                columnIdx++){
                            values[columnIdx] = items[i].getText(columnIdx);
                        }
                        items[i].dispose();                      //   <--------- HERE
                        TableItem item = new TableItem(table, SWT.NONE, j);
                        item.setText(values);
                        items = table.getItems();                //   <--------- HERE

                        break;
                    }
                }
            }
            table.setSortColumn(column);
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T06:33:33.033

您可能希望对 SWT 表 ( [org.eclipse.jface.viewers.TableViewer](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fviewers%2FTableViewer.html) ) 使用 JFace 包装器，它为您的表提供更多内置功能。我建议[JFace TableViewer 使用本教程](http://www.vogella.com/articles/EclipseJFaceTable/article.html)。这是[排序 TableViewer 的教程](http://www.vogella.com/articles/EclipseJFaceTableAdvanced/article.html#sortcolumns)。

# r - R中的匿名函数

> ID：12443797
> 
> 赞同：2
> 
> 时间：2012-09-16T01:34:57.470
> 
> 标签：r, function

使用包含数字列*PY的数据集**w*，我可以这样做：

 *```
nrow(subset(w, PY==50)) 
```

并得到正确答案。但是，如果我尝试创建一个函数：

```
fxn <- function(dataset, fac, lev){nrow(subset(dataset, fac==lev))} 
```

并运行

```
fxn(w, PY, 50) 
```

我收到以下错误：

> eval 中的错误（expr、envir、enclos）：找不到对象“PY”

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T01:52:26.413

从以下文档`subset`：

> **警告** 这是一个旨在以交互方式使用的便利功能。对于编程，最好使用像 [ 之类的标准子集函数，特别是参数子集的非标准评估可能会产生意想不到的后果。

这个相当模糊的警告在这里得到了很好的解释：[为什么 `[` 比 `subset` 更好？](https://stackoverflow.com/questions/9860090/in-r-why-is-better-than-subset)

`subset`最后一句话是除了*交互式*之外你不能使用，特别是不能通过你正在尝试的包装器。您应该`[`改用：

```
fxn <- function(dataset, fac, lev) nrow(dataset[dataset[fac] == lev, , drop = FALSE]) 
```

或者更简单地说：

```
fxn <- function(dataset, fac, lev) sum(dataset[fac] == lev) 
```*

# regex - 带有“[]”的 Perl 正则表达式

> ID：12443798
> 
> 赞同：1
> 
> 时间：2012-09-16T01:35:03.217
> 
> 标签：regex, perl

我的数据看起来像：

```
NC_004415 NC_010199 ([T(trnH ,trnS1 trnL1 ,)])
NC_006131 NC_010199 ([T(trnH ,trnS1 trnL1 ,)])
NC_006355 NC_007231 ([T(trnM ,trnQ ,)]) 
```

我想捕获以下之间的所有内容`[]`：

```
while( my $line = <crex> )

 {  $t=$line=~m/(\[.*\])/;

    print $t;
 } 
```

的输出`$t`是`1`。为什么它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T01:50:08.070

由于您使用的是捕获组，因此您可以`$1`在匹配成功后使用：

```
if($line =~ m/(\[.*\])/) {
    print $1;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T01:54:54.687

`$line =~ m/(\[.*\])/`返回列表上下文中匹配项的列表，但您在标量上下文中使用它。在标量上下文中，匹配运算符返回一个布尔值，指示匹配是否成功。因此你得到`1`. 您可以使用

```
my ($t) = $line =~ m/(\[.*\])/; 
```

创建列表上下文，或者您可以使用`$1`而不是使用`$t`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T01:48:03.430

在 周围使用括号`$t`：

```
($t) = $line =~m/(\[.*\])/; 
```

请参阅[perldoc perlretut（提取匹配项）](http://perldoc.perl.org/perlretut.html#Extracting-matches)。

我相信您`m//`在标量上下文中使用匹配运算符 () 并将结果存储在`$t`. 由于匹配成功，`m//`返回 1。参考[perldoc perlop](http://perldoc.perl.org/perlop.html)。

# jquery - Jquery cookie 只运行一次动画

> ID：12443801
> 
> 赞同：0
> 
> 时间：2012-09-16T01:35:37.143
> 
> 标签：jquery

好的，所以我有一个从屏幕顶部向下切换的菜单栏。我只希望用户在他们第一次访问该网站时看到这个。我如何防止它在他们访问的每个后续页面上播放？

**我的 jQuery：**

```
$(function() {

    $(".bar-top").delay(700).animate({
        marginTop: '0px'
    }, 750, 'swing');

    if ( $(".banner-title").css('display') == 'block' ) {
        $(".banner-title").delay(1500).addClass("fade");
        $(".fade").fadeIn("slow");
        $(".fade").hide();
    }

}); 
```

我已经研究过设置一个cookie，但到目前为止还没有正常工作。主要是因为我不确定如何将其包装在 cookie if 语句中。这`banner-title`只是在导航旁边淡入的一些文本。

我在想有没有办法只在索引页面上运行代码，并防止它在其他任何地方运行？不过，这可能不是一个很好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T01:52:02.983

假设您的用户未通过您的站点进行身份验证，在页面请求之间保持状态的唯一方法是设置 cookie。

有一个很棒的用于 cookie 管理的 JavaScript API，你应该看看 - [https://github.com/js-cookie/js-cookie](https://github.com/js-cookie/js-cookie)

当用户访问您的网站时，您可以检查您的 cookie 以查看他们以前是否访问过该网站。如果他们还没有显示您的动画并设置 cookie。如果他们有然后不要运行动画。

从文档一目了然`js-cookie`，您可以将 cookie 设置为 7 天，如下所示：

```
Cookies.set('visited', 'value', { expires: 7 }); 
```

所以你的代码可能看起来像：

```
// Make sure DOM has fully loaded before running code
$(function(){
    if( ! Cookies.get('visited')){
        // Your code here
        Cookies.set('visited', 'yes', { expires: 7 });
    }
}); 
```

**编辑以回答您问题的其他部分（感谢 Max Allen 的提醒！）**

为了只在某些页面上运行代码，我建议在页面的 body 标记上使用 ID（和类，如果你喜欢的话）。例如

```
if ($('body#index').length){
    // Code to only run on index page
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:57:40.300

好吧，@Tim Fletcher 回答了你的一些问题。

> 我在想有没有办法只在索引页面上运行代码，并防止它在其他任何地方运行？不过，这可能不是一个很好的解决方案。

那么可能有一个解决方案：

```
if(window.location.pathname == '/index.html'){
//Your code
} 
```

但我不会说这是好是坏。但它可能会奏效。

# php - 在 ubuntu 服务器上使用 codeigniter 的 Cron 作业

> ID：12443805
> 
> 赞同：0
> 
> 时间：2012-09-16T01:36:52.667
> 
> 标签：php, sql, codeigniter

我在设置 cron 作业时遇到问题。

我在这样的网址上创建了一个 cron 作业：

myurl.com/cron

当该链接被访问时，它就会运行。

如何设置它以使其每 10 分钟自动运行一次？

我不知道如何创建一个 cron 作业。我知道那是我需要做的，但我不知道如何为 ubuntu 服务器做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:41:20.973

通过 SSH 登录并在 shell 中键入以下内容：

```
crontab -e 
```

然后，放置以下行：

```
*/10 * * * * /path/to/command 
```

保存文件，该命令将每 10 分钟调用一次。

# xml - 为什么我的 XSLT 样式表没有从我的 XML 文件中为表格提取值？

> ID：12443806
> 
> 赞同：3
> 
> 时间：2012-09-16T01:37:00.687
> 
> 标签：xml, xslt

老实说，这是我的第一个 XML 项目，但我终于厌倦了自己寻找答案。我正在尝试创建一个地址簿，将联系人数据保存在 XML 文件中，并从转换后的 XSLT 样式表中提取以生成一个简单的表。这是我的文件的副本，非常感谢您的帮助。谢谢。

XML:

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="contactdata.xsl"?>

<!DOCTYPE addressbook [
<!ELEMENT addressbook (contact)>
<!ELEMENT contact (fname,lname,mi,staddress,city,state,zip,phone,email,twitter)>
<!ELEMENT fname (#PCDATA)>
<!ELEMENT lname (#PCDATA)>
<!ELEMENT mi (#PCDATA)>
<!ELEMENT staddress (#PCDATA)>
<!ELEMENT city (#PCDATA)>
<!ELEMENT state (#PCDATA)>
<!ELEMENT zip (#PCDATA)>
<!ELEMENT phone (#PCDATA)>
<!ELEMENT email (#PCDATA)>
<!ELEMENT twitter (#PCDATA)>
]>

<addressbook>
<contact>
<fname>Peyton</fname>
<lname>Manning</lname>
<mi>Z</mi>
<staddress>123 Go Vols</staddress>
<city>Denver</city>
<state>CO</state>
<zip>12345</zip>
<phone>1-800-youwish</phone>
<email>pmanning@broncos.com</email>
<twitter>peyton_manning</twitter>
</contact>

<contact>
<fname>Eric</fname>
<lname>Berry</lname>
<mi>P</mi>
<staddress>123 Arrowhead Stadium</staddress>
<city>Kansas City</city>
<state>MO</state>
<zip>34567</zip>
<phone>816-213-4452</phone>
<email>eberry@chiefs.com</email>
<twitter>eric_berry</twitter>
</contact>
</addressbook> 
```

和我的 XSLT：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/css" href="sitetemplate.css"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
<html>
<body>
<table>
<tr>
<th>First Name</th>
<th>Last Name</th>
<th>Middle Initial</th>
<th>Street Address</th>
<th>City</th>
<th>State</th>
<th>Zip</th>
<th>Phone</th>
<th>Email</th>
<th>Twitter</th>
</tr>
<xsl:for-each select="addressbook/contact">
    <tr>
      <td><xsl:value-of select="fname"/></td>
      <td><xsl:value-of select="lname"/></td>
      <td><xsl:value-of select="mi"/></td>
      <td><xsl:value-of select="staddress"/></td>
      <td><xsl:value-of select="city"/></td>
      <td><xsl:value-of select="state"/></td>
      <td><xsl:value-of select="zip"/></td>
      <td><xsl:value-of select="phone"/></td>
      <td><xsl:value-of select="email"/></td>
      <td><xsl:value-of select="twitter"/></td>

      </tr>
      </xsl:for-each>
</table>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

另外我想提一下，既然我的第一行已经生成，那么代码是如何编写的，但是我的桌子之后就停止了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T04:07:57.997

> 我想提一下，既然我的第一行已经生成，那么代码是如何编写的，但是我的桌子之后就停止了

不，提供的转换工作正常，并`tr`为每个`contact`元素生成一个 - 如预期的那样

**然而，想要的转换可以用更短的方式表达**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
    <html>
        <body>
            <table>
                <tr>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Middle Initial</th>
                    <th>Street Address</th>
                    <th>City</th>
                    <th>State</th>
                    <th>Zip</th>
                    <th>Phone</th>
                    <th>Email</th>
                    <th>Twitter</th>
                </tr>
                <xsl:apply-templates/>
            </table>
        </body>
    </html>
 </xsl:template>

 <xsl:template match="contact">
  <tr><xsl:apply-templates/></tr>
 </xsl:template>

 <xsl:template match="contact/*">
  <td><xsl:value-of select="."/></td>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<addressbook>
    <contact>
        <fname>Peyton</fname>
        <lname>Manning</lname>
        <mi>Z</mi>
        <staddress>123 Go Vols</staddress>
        <city>Denver</city>
        <state>CO</state>
        <zip>12345</zip>
        <phone>1-800-youwish</phone>
        <email>pmanning@broncos.com</email>
        <twitter>peyton_manning</twitter>
    </contact>
    <contact>
        <fname>Eric</fname>
        <lname>Berry</lname>
        <mi>P</mi>
        <staddress>123 Arrowhead Stadium</staddress>
        <city>Kansas City</city>
        <state>MO</state>
        <zip>34567</zip>
        <phone>816-213-4452</phone>
        <email>eberry@chiefs.com</email>
        <twitter>eric_berry</twitter>
    </contact>
</addressbook> 
```

**产生了想要的正确结果**：

```
<html>
   <body>
      <table>
         <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Middle Initial</th>
            <th>Street Address</th>
            <th>City</th>
            <th>State</th>
            <th>Zip</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Twitter</th>
         </tr>
         <tr>
            <td>Peyton</td>
            <td>Manning</td>
            <td>Z</td>
            <td>123 Go Vols</td>
            <td>Denver</td>
            <td>CO</td>
            <td>12345</td>
            <td>1-800-youwish</td>
            <td>pmanning@broncos.com</td>
            <td>peyton_manning</td>
         </tr>
         <tr>
            <td>Eric</td>
            <td>Berry</td>
            <td>P</td>
            <td>123 Arrowhead Stadium</td>
            <td>Kansas City</td>
            <td>MO</td>
            <td>34567</td>
            <td>816-213-4452</td>
            <td>eberry@chiefs.com</td>
            <td>eric_berry</td>
         </tr>
      </table>
   </body>
</html> 
```

**说明**：

正确使用模板、模式匹配和 XSLT 处理模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:57:01.367

你的样式表对我来说很好。

在 xsl 中使用递归模板匹配是一种更标准的形式，而不是`<xsl:for-each>`您可以轻松地做到这一点。在这种情况下，它非常简单。

使用该样式，您的模板将更改为：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
<html>
  <body>
    <xsl:apply-templates/>
  </body>
</html>
</xsl:template>

<xsl:template match="addressbook">
  <table>
    <tr>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Middle Initial</th>
      <th>Street Address</th>
      <th>City</th>
      <th>State</th>
      <th>Zip</th>
      <th>Phone</th>
      <th>Email</th>
      <th>Twitter</th>
    </tr>
    <xsl:apply-templates/>
  </table>
</xsl:template>

<xsl:template match="contact">
    <tr>
      <td><xsl:value-of select="fname"/></td>
      <td><xsl:value-of select="lname"/></td>
      <td><xsl:value-of select="mi"/></td>
      <td><xsl:value-of select="staddress"/></td>
      <td><xsl:value-of select="city"/></td>
      <td><xsl:value-of select="state"/></td>
      <td><xsl:value-of select="zip"/></td>
      <td><xsl:value-of select="phone"/></td>
      <td><xsl:value-of select="email"/></td>
      <td><xsl:value-of select="twitter"/></td>
    </tr>
</xsl:template>

</xsl:stylesheet> 
```

对于一个简单的表当然可以。但值得学习这种风格，因为它可以更好地用于更复杂的结构。

# jquery-mobile - JqueryMobile 问题 DIV

> ID：12443809
> 
> 赞同：1
> 
> 时间：2012-09-16T01:37:26.380
> 
> 标签：jquery-mobile

我`.toggle`在一个页面上创建了一个简单的脚本来切换`DIV`. 但是当我将这个完全相同的脚本放在另一个页面上以切换另一个页面时`DIV`，第二页脚本失败了......我尝试了多个修复但没有任何效果

这是我在两个页面上使用的脚本 ID 不同但脚本相同

```
<script>

$(document).bind('pageinit', function()  {

    $('#slick-toggle').live('tap', function(event) {
        $("#menu_box").toggle(400);
    });
});

</script> 
```

任何帮助将不胜感激

紧缩船长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:06:35.423

您可以尝试以下方法：

```
<script>

$( document ).on( 'pageinit',function(event){

    $('#slick-toggle').on('tap', function(event) {
        $("#menu_box").toggle(400);
    });
});

</script> 
```

希望这会有所帮助，让我知道你的结果。

# jquery - 如何制作一个保持其位置的 Div？

> ID：12443810
> 
> 赞同：0
> 
> 时间：2012-09-16T01:37:33.307
> 
> 标签：jquery, css, html

我很难正确描述我在问什么，但这是来自[boingboing.net](http://www.boingboing.net/)的最佳示例。查看侧边栏，然后向下滚动到底部。注意当用户向下滚动时最后一个小部件（我不知道它是什么，抱歉。）或 Advertise 是如何停留在其位置的？它在到达底部时也会停止。我该怎么做？

我知道 css 属性，`position:fixed;`但我猜该方法与 boingboing.net 不同。在这件事上需要帮助。有什么帮助吗？非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T01:43:36.713

在 的滚动上绑定一个事件`window`，并根据 的 设置`position`目标 div`scrolltop`的`window`。

```
$(window).scroll(function () {
   if($(this).scrollTop() >= 500){
      $('targetdiv').css('position','fixed');
   }
   else {
      $('targetdiv').css('position','relative');  // or any other position
   }
}); 
```

或者更好的是，您可以`class`在`window`其中添加一个`position:fixed`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:44:52.100

你需要一个[词缀插件](http://twitter.github.com/bootstrap/javascript.html#affix)。您应该能够通过取消切换除该插件以外的所有内容从[Twitter Bootstrap](http://twitter.github.com/bootstrap/customize.html)下载该插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T02:01:18.913

**HTML**

```
<img src=//ph.artsinn.de alt>
<div>
    <p>A short line of text, for better interpretation.</p>
    <p>Followed by another line, filled with letter and words</p> 
</div>

<img src=//ph.artsinn.de/240x160/666?text=scroll%20down alt id=obj>

<img src=//ph.artsinn.de alt>
<img src=//ph.artsinn.de alt>
<img src=//ph.artsinn.de alt>
<img src=//ph.artsinn.de alt> 
```

**CSS**

```
/* not needed */
html,body{height:200%}
img {display:block} 
```

**JS**

```
$(function() { 
    $window = $(window),
    $sidebar = $("#obj"),
    sidebarTop = $sidebar.position().top,
    $sidebar.css('position', 'fixed');

    $window.scroll(function(e) {
        scrollTop = $window.scrollTop(),
        topPosition = Math.max(0, sidebarTop - scrollTop),
        $sidebar.css('top', topPosition);
    });
}); 
```

* * *

**[演示](http://jsfiddle.net/ARTsinn/SuEAg/)**

# javascript - 如何使用javascript按顺序将文件读 入数组

> ID：12443811
> 
> 赞同：1
> 
> 时间：2012-09-16T01:38:17.920
> 
> 标签：javascript, jquery

我在服务器端有一堆文本文件，文件名为 0.txt、1.txt、2.txt、3.txt 等等。我想读取所有文件的内容并将它们存储在数组 A 中，这样 A[0] 有 0.txt 的内容，A[1] 有 1.txt 的内容，...

我怎样才能在 Javascript / jquery 中做到这一点？

最初，我在 jQuery 中使用 $.ajax({}) 来加载这些文本文件。但它不起作用，因为 ajax 的异步特性。我尝试设置 $.ajax({...async=false...})，但速度很慢——我总共要读取大约 1000 个 10KB 的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T01:51:58.323

您正在寻找的是HTML5 中引入的*File API （*[工作草案](http://www.w3.org/TR/FileAPI/)）。

[本文](http://www.html5rocks.com/en/tutorials/file/dndfiles/)中的示例将为您指明正确的方向。请记住，最终用户必须启动操作并手动选择文件 - 否则在隐私和安全方面将是一个糟糕的想法。

**更新：**

我发现（又一次）[mozilla docos](https://developer.mozilla.org/en-US/docs/DOM/FileReader)更具可读性！快速 html 样机：

```
<input type="file" id="files" name="files[]" onchange="loadTextFile();" multiple/>
<button id="test"onclick="test();">What have we read?</button> 
```

...和 ​​JavaScript：

```
var testArray = []; //your array

function loadTextFile() {
  //this would be tidier with jQuery, but whatever
  var _filesContainer = document.getElementById("files");
  //check how many files have been selected and iterate over them
  var _filesCount = _filesContainer.files.length;
  for (var i = 0; i < _filesCount; i++) {
    //create new FileReader instance; I have to read more into it
    //but I was unable to just recycle one
    var oFReader = new FileReader();

    //when the file has been "read" by the FileReader locally
    //log its contents and push them into an array
    oFReader.onload = function(oFREvent) {
      console.log(oFREvent.target.result);
      testArray.push(oFREvent.target.result);
    };

    //actually initiate the read
    oFReader.readAsText(_filesContainer.files[i]);
  }
}

//sanity check
function test() {
  for (var i = 0; i < testArray.length; i++) {
    console.warn(testArray[i]);
  }
}​ 
```

[摆弄](http://jsfiddle.net/ovfiddle/84Ptt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T02:48:06.667

根据您的问题，您想将 txt 文件从服务器加载到本地：

```
var done = 0, resultArr = [], numberOfFiles = 1000;

function getHandler(idx) {
    return function(data) {
        resultArr[idx] = data;
        done++;
        if (done === numberOfFiles) {
            // tell your other part all files are loaded
        }
    }
}

for (var i = 0; i < numberOfFiles; i++) {
    $.ajax(i + ".txt").done(getHandler(i));
} 
```

jsFiddle：http: [//jsfiddle.net/LtQYF/1/](http://jsfiddle.net/LtQYF/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-16T02:09:56.677

您没有提供太多信息来给出具体答案。但是，我认为“由于 ajax 的异步性质，它不起作用”是不正确的。您应该能够分配正确大小的数组并为每个文件使用回调。您可以尝试其他选项，例如在服务器上捆绑文件并在客户端上取消捆绑等。能够很好地解决问题的设计取决于您未提供的细节。

# iphone - applicationWillEnterForeground 加载主视图控制器

> ID：12443818
> 
> 赞同：-1
> 
> 时间：2012-09-16T01:40:35.260
> 
> 标签：iphone, ios, xcode, viewcontroller

你们中的任何人都知道当从前台返回时如何显示主视图控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T01:57:01.130

你要问的是非常依赖于应用程序，胡安......我们不知道你的应用程序是什么样的（如果它有一个标签栏控制器，或者它是一个带有 segues 的情节提要或......）。

但听起来你很清楚自己需要做什么。

您已经知道应用程序何时通过您的[UIApplicationDelegate applicationWillEnterForeground 方法](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationWillEnterForeground%3a)返回前台。

然后，您接下来需要做的就是返回主视图控制器，或者弹出导航控制器以返回根（主）视图控制器，或者在标签栏控制器中选择原始标签。

# javascript - 将额外参数传递给 WebSQL 回调函数？

> ID：12443821
> 
> 赞同：5
> 
> 时间：2012-09-16T01:41:11.123
> 
> 标签：javascript, function, callback, web-sql

我正在使用以下代码调用函数 db.transaction：

```
 db.transaction(createSheetDB, function(){alert("Sheet creation error!")}, function(){alert("Sheet created!")}); 
```

函数 createSheetDB 是一个回调函数，由 db.transaction() 隐式调用，db.transaction() 还向其传递参数 tx。我已经实现了这样的函数 createSheetDB(tx)：

```
function createSheetDB(tx) {
var nextId = getNextId();
tx.executeSql("INSERT INTO SHEET(id, name, desc) VALUES("+nextId+",'"+sheetName+"','"+desc+"')", [], 
        function(){alert("Sheet row inserted!")}, 
        function(tx, err){alert("Sheet row insertion Error: "+err.message+" "+err.code)}
);} 
```

现在的问题是 sheetName 和 desc 的值仅在调用函数中可用。如何将它们传递给函数 createSheetDB(tx)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T01:53:41.867

您可以使用一种技术来创建一个新的回调，该回调将关闭您想要的变量。

```
function doStuff(callback) {
    var val = 43;
    callback(val);
}

function myCallback(val, anotherVal) {
    alert("val: " + val + "\nanotherVal: " + anotherVal);
}

(function() {

    var anotherVal = "Whoa!",
        anotherCallback = function(val) {
            return myCallback(val, anotherVal);
        };

    doStuff(anotherCallback);

}());​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T02:05:35.270

回调创建作为函数

```
function createSheetDB(sheetName, desc) {
    return function(tx){
        var nextId = 1;
        alert("INSERT INTO SHEET(id, name, desc) VALUES("+nextId+",'"+sheetName+"','"+desc+"')");
        /* delete above two lines and uncomment for your code
        var nextId = getNextId();
        tx.executeSql("INSERT INTO SHEET(id, name, desc) VALUES("+nextId+",'"+sheetName+"','"+desc+"')", [], 
            function(){alert("Sheet row inserted!")}, 
            function(tx, err){alert("Sheet row insertion Error: "+err.message+" "+err.code)}
        );
        */
    }
}

// dummy code to show as example
db = {transaction: function(fn,lose,win){return fn(),win();}};

function testIt(){
    var sheetName = 'hello',
        desc = 'world';
    db.transaction(createSheetDB(sheetName, desc), function(){alert("Sheet creation error!")}, function(){alert("Sheet created!")});
    // note how createSheetDB is now called with the vars you want
} 
```

# sql - 将 1000 列旋转/旋转为行

> ID：12443824
> 
> 赞同：2
> 
> 时间：2012-09-16T01:41:22.670
> 
> 标签：sql, sql-server, sql-server-2000, pivot, unpivot

我继承了一个数据库，我需要从中提取当前按行排列的列中的数据。检索数据的查询是：

```
select distinct 
    LIMSNo, p250.*, p500.*, p750.*, p1000.* 
from 
    results as r
    inner join Points250 as p250 
    on r.resultsid = p250.resultsid and p250.channel = 1
    inner join Points500 as p500 
    on r.resultsid = p500.resultsid and p500.channel = 1
    inner join Points750 as p750 
    on r.resultsid = p750.resultsid and p750.channel = 1
    inner join Points1000 as p1000 
    on r.resultsid = p1000.resultsid and p1000.channel = 1
where 
    r.limsno between '120053698' and '120053704' 
```

产生

```
LIMSNo           P0001              P0002              P0003   ...     P1000  
120053698        251.6667           302.0196           302.2353        305.9608
120053699        291.6667           342.6545           347.9635        353.6236
120053700        243.3333           298.3206           296.7235        299.5342
120053701        308.3333           365.8397           365.4071        368.3206
120053702        315                363.4153           366.6052        373.1695 
```

请注意，有 1000 列 (P0001...P1000)

我想旋转/旋转数据，以便获得以下输出：

```
 120053698        120053699        120053700        120053701        120053702 
P0001   251.6667         291.6667         243.3333         308.3333         315
P0002   302.0196         342.6545         298.3206         365.8397         363.4153
...
P1000   305.9608         353.6236         299.5342         368.3206         373.1695 
```

如何构建 SQL 查询？数据库是 SQL 2000。

我已经尝试了多种方法来解决这个问题。我最近的尝试是：

```
create table #tempCols
(
    ColName nchar(15)
)

insert into #tempCols
select 
    column_name 
from 
    information_schema.columns
where 
    table_name = 'Points250' 
and column_name like 'P%'

insert into #tempCols
select 
    column_name 
from 
    information_schema.columns
where 
    table_name = 'Points500' 
and column_name like 'P%'

insert into #tempCols
select 
    column_name 
from 
    information_schema.columns
where 
    table_name = 'Points750' 
and column_name like 'P%'

insert into #tempCols
select 
    column_name 
from 
    information_schema.columns
where 
    table_name = 'Points1000' 
and column_name like 'P%'

create table #LIMSList
(
    LIMSNumber nchar(9)
)
insert into #LIMSList
select LimsNo from results
where LimsNo between '100030460' and '100030500'

declare @colList varchar(max)
select @colList = COALESCE(@colList + ',' ,'') + ColName from #tempCols

declare @command varchar(max)
set @command = 
'
    select LimsNo, Point, Data
    from (
        select LimsNo, p250.*, p500.*, p750.*, p1000.* 
        from 
            results as r
            inner join Points250 as p250 
            on r.resultsid = p250.resultsid and p250.channel = 1
            inner join Points500 as p500 
            on r.resultsid = p500.resultsid and p500.channel = 1
            inner join Points750 as p750 
            on r.resultsid = p750.resultsid and p750.channel = 1
            inner join Points1000 as p1000 
            on r.resultsid = p1000.resultsid and p1000.channel = 1
        where 
            limsno in (select LimsNo from #LIMSList)) d
            unpivot (Data for Point in (' + @colList + ')) as unpvt
'

print @command

exec(@command)

drop table #tempCols
drop table #LIMSList 
```

但我得到的错误是：

```
Msg 8156, Level 16, State 1, Line 1
The column 'ResultsID' was specified multiple times for 'd'.
Msg 8156, Level 16, State 1, Line 1
The column 'ResultsID' was specified multiple times for 'unpvt'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:11:25.140

由于 SQL Server 2000 没有`UNPIVOT`or`PIVOT`运算符，因此您必须使用`UNION ALL`for `UNPIVOT`，然后`CASE`使用`PIVOT`. 这是一个应该有效的动态解决方案：

```
DECLARE @query  AS NVARCHAR(MAX),
  @rowCount as int = 1,
  @unpivotCount as int = 0,
  @pivotCount as int,
  @unRow as varchar(10) = '',
  @pivotRow as varchar(10) = ''

select c.Name col
into #colsUnpivot
from sys.columns as C
where C.object_id = object_id('yourtable') and
    C.name LIKE 'P%'

set @unpivotCount = (select count(*) from #colsUnpivot)

-- unpivot the data
while @rowCount <= @unpivotCount 
  begin
    set @unRow = (select Top 1 col from #colsUnpivot)

    set @query =' insert into unpivotData (LIMSNo, Val, Col)
                  select LIMSNo, ' + @unRow + ' as val, ''' 
                    + @unRow  + ''' as col
                  from yourtable'

     exec(@query)

     delete from #colsUnpivot where col = @unRow

     if @rowCount <= @unpivotCount 
        set @rowCount = @rowCount + 1
  end

--select * 
--from unpivotData

-- pivot the data 
select distinct LIMSNo
into #colsPivot
from yourtable

set @pivotCount= (select COUNT(*) from #colsPivot) 
-- reset rowcount
set @rowCount = 1
set @query = ''

---- create the CASE string
while @rowCount <= @pivotCount
    begin
        set @pivotRow = (select Top 1 LIMSNo from #colsPivot)

        set @query = @query + ', max(case when LIMSNo = ' + @pivotRow + ' then val end) as ''' + @pivotRow + ''''

        delete from #colsPivot where LIMSNo = @pivotRow

        if @rowCount <= @pivotCount
            begin
                set @rowCount = @rowCount + 1
                print @rowCount
            end
    end

-- add the rest of the SQL Statement
set @query = 'SELECT col ' + @query + ' from dbo.unpivotData group by col'

exec(@query)

delete from dbo.unpivotData

drop table #colsUnpivot
drop table #colspivot 
```

我创建了一个名为`UnpivotData`保存数据的表，以供在该`PIVOT`过程中使用。

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/31b7c/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T04:30:20.073

在 SQL Server 2000 中，pivot 和 unpivot 运算符不可用。因此，您必须使用其他技术对数据进行旋转和取消透视。

我列出了 unpivot 和 pivot 的静态方法，希望您可以根据需要将其转换为动态解决方案。

假设您已将查询的数据插入到表中，您可以使用 UNION ALL 取消透视数据并将其插入到临时表中。

```
SELECT 
*
INTO dbo.temp
FROM 
(
SELECT LIMSNo, P0001 AS [Point],'P0001' AS [ColName] FROM dbo.myTable
UNION ALL 
SELECT LIMSNo, P0002 AS [Point],'P0002' AS [ColName] FROM dbo.myTable
UNION ALL 
SELECT LIMSNo, P0003 AS [Point],'P0003' AS [ColName] FROM dbo.myTable
UNION ALL 
SELECT LIMSNo, P0004 AS [Point],'P0004' AS [ColName] FROM dbo.myTable
....
....
UNION ALL 
SELECT LIMSNo, P1000 AS [Point],'P1000' AS [ColName] FROM dbo.myTable
) AS t 
```

然后您可以再次旋转数据

```
SELECT 
ColName
,MAX(CASE LIMSNo WHEN '120053698' THEN [Point] ELSE NULL END ) AS [120053698]
,MAX(CASE LIMSNo WHEN '120053699' THEN [Point] ELSE NULL END ) AS [120053699]
,MAX(CASE LIMSNo WHEN '120053700' THEN [Point] ELSE NULL END ) AS [120053700]
....
....
,MAX(CASE LIMSNo WHEN '120053704' THEN [Point] ELSE NULL END ) AS [120053704]

FROM dbo.temp
GROUP BY ColName 
```

# java - 未知属性错误struts2

> ID：12443828
> 
> 赞同：0
> 
> 时间：2012-09-16T01:41:46.527
> 
> 标签：java, jsp, struts2

我正在开发一个struts2 应用程序。我的 jsp 文件中有一个属性，它需要引用列表中对象的属性，但是我遇到了未知属性错误，

**澄清一下：** 假设我的 jsp 属性称为 x 我的类称为 a，它有一个私有字符串 x 和一组 getter 和 setter a 在名为 b 的 ArrayList 中，b 在 jsp 文件所指的动作类中to（它指的是正确的类，因为它可以找到作为动作成员的属性，但不能找到属于 a 类的 x）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:07:33.287

如果我正确地解决了您的问题（其他人是对的，它确实读起来有点像数学问题），问题是 Struts 不知道要将 JSP 中的属性映射到列表的哪个元素。让我解释一下，假设你有这样定义的 A 类：

```
public class A {
    private String x;    
    //Getter and setter for x
} 
```

在你的动作课上你有类似的东西

```
public class MyAction extends ActionSupport {
    private A aProperty;
    //execute method and getter/setter for aProperty.
} 
```

在这种情况下，您使用 aProperty.x 从 JSP 中引用 aProperty 的 x 成员。但是，当您的动作类更改为

```
public class MyAction extends ActionSupport {
    private List<A> aList;
    //Execute method and getter/setter for aList.
} 
```

您不能再使用 aList.x，因为您需要告诉 Struts 要获取列表中的哪个项目，以便在该项目上获取/设置 x。您可以像这样指定要引用的列表项：aList[0].x

让我知道这是否不是您在问题中想要问的。

# c++ - 并行化这个的最佳方法是什么？

> ID：12443830
> 
> 赞同：3
> 
> 时间：2012-09-16T01:42:49.077
> 
> 标签：c++, c, parallel-processing, opencl

我有一个由大约 800 000 行组成的文件。每行由一个 id、一个代码和数据组成，每个字段由一个 TAB 分隔。

```
3445    aaaa    Some data here for instance
89002   aree    Some other data 
```

作为熟悉 OpenCL 的纯粹练习，我决定使用 OpenCL 解析这个文件。每个工作项都经过一行并对其进行处理。每行长度为 4000 个字符。

```
__kernel void parse_line(
            __global const char * lines,   // IN
            __global unsigned * id,        // OUT
            __global char * code,          // OUT
            __global char * data           // OUT
        )
{
   // parse the line to extract id, code and data
} 
```

鉴于这`CL_DEVICE_MAX_WORK_GROUP_SIZE`是 1024，我不能同时拥有超过 1024 个工作项。我不能将整个文件泵入 GPU 内存（`CL_DEVICE_MAX_MEM_ALLOC_SIZE`只有 268353536）。

第一个想法可能是解析第一批 1024 个句子，然后再解析第二个，依此类推，让内核负责处理一个句子。我还可以重写内核，而不是解析一个句子，而是解析 16 个句子，然后 1024 个工作项将处理一些 16384 个句子。

如前所述，我对 OpenCL 很陌生，所以我真的在寻找如何最好地做到这一点的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T01:48:02.430

OpenCL 不会是我进行文本处理的首选。不过，可能存在一些有意义的问题。你能把整个算法分解成几个步骤，看看瓶颈是什么（你会在解析文件后对数据做任何事情吗？）？将这些字符串移动到各种总线上以便以后减少可能不是最理想的。尽早减少它们。看起来您甚至没有减少它们，只是拆分流，而是将数据保留为字符串？

如果确实解析和转换值是瓶颈，那么我建议您继续将大文件分解成可以放入内存的块的实验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T02:04:28.857

瓶颈是文件的读取还是解析？如果是读数，那么除了将文件存储在更快的介质上之外，您无能为力。如果是解析，您可以将整个文件读入数组或`std::vector`然后使用线程，其中每个线程都在解析数组/向量的一部分。

# html - 容器不会超出窗口宽度

> ID：12443831
> 
> 赞同：0
> 
> 时间：2012-09-16T01:43:02.470
> 
> 标签：html, css

我遇到了另一个 StackOverflow 用户在这里问的同样的问题：[link](https://stackoverflow.com/questions/7493425/background-image-doesnt-repeat-when-browser-window-is-smaller-than-content)。解决方案是在容器 (div) 上使用以下 CSS：

```
display:table;
width:100%; 
```

但是，我的 div 底部有一个边框，现在 div 的内容和边框之间存在间隙。

有谁知道如何消除这个差距？

***编辑：***

容器的 CSS：

```
background-image:url('images/header.jpg');
background-repeat:repeat-x;
border-bottom-color:black;
border-bottom-style:solid;
border-bottom-width:5px;
font-size:small;
font-weight:bold; 
```

值得我补充的是，在这个容器内是另一个具有以下 CSS 的 div：

```
#header
{
clear:both;
height:50px;
margin-left:auto;
margin-right:auto;
width:900px;
}

#header > *
{
float:left;
} 
```

还有一些 HTML：

```
<div id="header-container">
    <div id="header">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:45:42.183

尝试添加这个：

```
border-collapse: collapse;
border-spacing: 0; 
```

# sql - 在 PHPMYADMIN 数据库中搜索类似条目

> ID：12443835
> 
> 赞同：0
> 
> 时间：2012-09-16T01:44:59.400
> 
> 标签：sql, database, search, phpmyadmin

所以我有一个名为 users 的表的数据库.. 在该表中有一个名为 IP 的列，我想找到具有相同 IP 的用户并禁止他们.. 那么如何搜索 IP 的数据库是相同的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T02:03:24.373

您应该通过查询来利用组。我写的一个旧博客是[Understanding group bys](http://www.endyourif.com/understanding-group-bys/)

但基本上这应该有效：

```
select distinct ip, count(id) from users group by IP having count(id) > 1 
```

这将返回计数大于 1 的所有 IP 地址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:54:51.330

运行 SQL 语句并替换您要搜索的 IP 地址：

```
SELECT * FROM users WHERE IP = '172.0.0.1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T02:01:49.173

您可以通过以下方式开始：

```
SELECT count(id) FROM tablename
GROUP BY IP 
```

然后，您只需将这些结果加入表中即可获取有关重复项的信息

所以修改第一条语句：SELECT count(id) as number, IP FROM tablename

然后

```
 SELECT a.id, a.name FROM tablename a
   JOIN (
        SELECT count(id) as number, IP FROM tablename
    ) b ON a.IP = b.IP
    WHERE number > 1 
```

这应该会为您提供数据库中所有重复的 IP 地址。您可能必须想出一种方法来决定保留哪个帐户以及删除哪个帐户，但这应该会给您一个开始。

# javascript - chrome.storage 对于某些用户来说是未定义的，但不是大多数（而不是我）

> ID：12443842
> 
> 赞同：2
> 
> 时间：2012-09-16T01:46:27.317
> 
> 标签：javascript, google-chrome, storage, sync

我有一个扩展名（标签管理员 - [https://chrome.google.com/webstore/detail/egnjhciaieeiiohknchakcodbpgjnchh](https://chrome.google.com/webstore/detail/egnjhciaieeiiohknchakcodbpgjnchh)）。

我在上一个版本中实现了 chrome.storage.sync。它在我的机器上运行良好，但一些用户报告说他们“找不到未定义的属性‘同步’”。换句话说， chrome.storage 是未定义的。

这是 github 问题：[https ://github.com/jacobSingh/tabwrangler/issues/25](https://github.com/jacobSingh/tabwrangler/issues/25)

这是两位记者的浏览器信息：

*   [https://aboutmybrowser.com/3518315577](https://aboutmybrowser.com/3518315577)
*   [https://aboutmybrowser.com/lQJKMjsO](https://aboutmybrowser.com/lQJKMjsO)

任何意见，将不胜感激。这些是新版本和库存，所以对我来说似乎是一个 chrome 错误。

# multithreading - SDL-Mixer 音频在启动 Reactive-Banana 输入循环时停止

> ID：12443843
> 
> 赞同：3
> 
> 时间：2012-09-16T01:47:10.467
> 
> 标签：multithreading, haskell, sdl, reactive-banana, sdl-mixer

我一直在开发一款使用多个音轨的游戏，其音量会根据鼠标移动实时调整。我将 SDl-Mixer 用于音频，将 Reactive-Banana 用于游戏。问题是在开始时已经开始播放的曲目在输入循环开始时停止播放。原因可能是其他原因，但我想知道 SDL 和 Reactive-Banana 之间是否存在一些我不理解的奇怪交互。我一直试图解决这个问题一段时间，但这可能只是我忽略的一些简单的事情。提前致谢。下面是一个简单测试的代码：

```
import Reactive.Banana
import Graphics.UI.SDL
import Graphics.UI.SDL.Mixer
import Control.Monad

musicdir = "/home/silas/code/haskell/river/audio/"

testNet :: AddHandler (Int,Int,[MouseButton]) -> NetworkDescription t ()
testNet mouseHdlr = do
  eMouse <- fromAddHandler mouseHdlr
  reactimate $ (putStrLn . show) <$> eMouse

main = withInit [InitEverything] $ do
         setVideoMode 100 100 32 [SWSurface]
         openAudio defaultFrequency AudioS16Sys 1 1024
         allocateChannels 1
         chunk <- loadWAV $ musicdir ++ "guitar1" ++ ".ogg"
         playChannel 0 chunk (-1)
         (mouseHdlr, mouseAction) <- newAddHandler
         net <- compile $ testNet mouseHdlr
         actuate net
         forever $ getMouseState >>= mouseAction 
```

编辑：问题似乎不一定在于 Reactive Banana。任何形式的“永远”循环都会导致音频停止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:47:24.933

这可能不是您的问题，但是当我遇到类似问题时，垃圾收集器无法判断我仍在使用 SDL 音频块（因为只有 SDL 正在使用它）并从 SDL 下释放了 RAM . 要解决这个问题，您不仅必须确保该项目在 SDL 使用它的整个时间内都在范围内，而且您的 Haskell 代码实际上以某种方式使用它（这样优化器就不会在你）。像这样的调用`touchForeignPtr`对此非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T03:59:20.353

这可能与 SDL 或反应香蕉无关。此类问题通常可以通过使用`-threaded`编译器标志进行编译来解决。如果这是一个阴谋集团项目，请添加

```
GHC-Options: -W -threaded 
```

到你的`Executable`部分。

# c# - 适用于 Windows 8 RTM 的 Microsoft Advertising SDK 导致访问被拒绝错误

> ID：12443845
> 
> 赞同：11
> 
> 时间：2012-09-16T01:47:39.543
> 
> 标签：c#, xaml, windows-8, microsoft-metro

**注意这些事情：**

*   我有 Windows 8 RTM。
*   我有 Visual Studio 2012 RTM。
*   我有微软广告 SDK RTM。

*我所做的就是：添加对它的引用。*

**错误：**

```
System.UnauthorizedAccessException
Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOutSynchronous(Action action, Int32 targetApartmentId, WaitHandle aborted, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOut(Action action, Int32 targetApartmentId, WaitHandle aborted, CallSynchronizationMode syncMode, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TValue](RemoteHandle`1 targetObject, Action action, CallSynchronizationMode syncMode)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TResult,TValue](RemoteHandle`1 targetObject, Func`2 func, CallSynchronizationMode syncMode)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.CreateDesignerImpl(IHostSourceItem item, IHostTextEditor editor, RemoteCancellationToken remoteCancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.<>c__DisplayClass12.<Microsoft.Expression.DesignHost.IDesignerService.CreateDesigner>b__11(RemoteCancellationToken remoteToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.CallWithCancellation[TResult](CancellationToken cancelToken, Func`2 func)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.Microsoft.Expression.DesignHost.IDesignerService.CreateDesigner(IHostSourceItem item, IHostTextEditor editor, CancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.IsolatedDesignerService.IsolatedDesignerView.CreateDesignerViewInfo(CancellationToken cancelToken)

System.UnauthorizedAccessException
Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))

Server stack trace: 
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalIn(Action action, Int32 targetApartmentId)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn(IRemoteObject targetObject, Action action)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn[TResult](IRemoteObject targetObject, Func`1 func)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner(IRemoteHostSourceItem remoteItem, IRemoteHostTextEditor remoteEditor, IRemoteCancellationToken remoteToken)
   at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner(IRemoteHostSourceItem remoteItem, IRemoteHostTextEditor remoteEditor, IRemoteCancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.<>c__DisplayClass8.<CreateDesignerImpl>b__6(IRemoteDesignerService d)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c__DisplayClass4`2.<MarshalOut>b__3()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker()

System.UnauthorizedAccessException
Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))
   at System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode, IntPtr errorInfo)
   at System.Runtime.InteropServices.Marshal.ThrowExceptionForHR(Int32 errorCode)
   at System.Reflection.Adds.NativeMethods.SafeOpenFile(String fileName)
   at System.Reflection.Adds.FileMapping..ctor(String fileName)
   at System.Reflection.Adds.MetadataDispenser.OpenFileAsFileMapping(String fileName)
   at Microsoft.MetadataReader.Loader.LoadAssemblyFromFile(String file)
   at Microsoft.Expression.Utility.WindowsRuntimeContext.LoadRuntimeAssemblyUsingReferenceType(String path)
   at Microsoft.Expression.Utility.WindowsRuntimeContext.LoadRuntimeAssemblyFrom(String path)
   at Microsoft.Expression.Utility.WindowsRuntimeContext.LoadFrom(String path)
   at Microsoft.Expression.Utility.AssemblyHelper.LoadFrom(String path)
   at Microsoft.Expression.DesignSurface.Assemblies.AssemblyService.ResolveInstalledAssembly(String path)
   at Microsoft.Expression.DesignSurface.Assemblies.AssemblyService.ResolveAssembly(String assemblyPath, String assemblyFullName, String projectPath, IHostShadowCopyTask hostShadowCopyTask)
   at Microsoft.Expression.DesignSurface.Assemblies.ProjectAssemblyResolver.GetAssemblyInformation(String path, String assemblyFullName)
   at Microsoft.Expression.DesignSurface.Assemblies.ProjectAssemblyResolver.GetAssemblyInformation(IHostReferenceItem reference)
   at Microsoft.Expression.DesignSurface.Assemblies.ProjectAssemblyResolver.UpdateAssemblyReferences(IEnumerable`1 referencesToUpdate)
   at Microsoft.Expression.DesignSurface.Assemblies.ProjectAssemblyResolver..ctor(IHostProject project, DesignerContext designerContext)
   at Microsoft.Expression.DesignSurface.Assemblies.ProjectAssemblyService.<.ctor>b__0(IHostProject project)
   at Microsoft.Expression.Utility.Collections.SuspendableKeyedCollection`2.CreateItems(TKey key)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Expression.Utility.Collections.SuspendableKeyedCollection`2.GetItem(TKey key)
   at Microsoft.Expression.DesignSurface.Assemblies.ProjectAssemblyService.GetProjectAssemblyResolver(IHostProject project)
   at Microsoft.Expression.DesignSurface.Project.ProjectContextBase.Initialize()
   at Microsoft.Expression.DesignSurface.Project.XamlProjectContext.Initialize()
   at Microsoft.Expression.DesignSurface.Project.ProjectContextManager.GetProjectContext(IHostProject project, IPlatform platform, Boolean create)
   at Microsoft.Expression.DesignSurface.Project.ProjectContextManager.GetSourceItemContext(IHostSourceItem sourceItem)
   at Microsoft.Expression.DesignSurface.DesignerService.CreateDesigner(IHostSourceItem item, IHostTextEditor editor, CancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.<>c__DisplayClass10.<>c__DisplayClass12.<Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner>b__f(CancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.CallWithCancellation[TResult](IRemoteCancellationToken remoteToken, Func`2 func)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.<>c__DisplayClass10.<Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner>b__e()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c__DisplayClass16`1.<MarshalIn>b__15()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T05:14:23.230

这可能与计划在未来更新中修复的已知问题有关。同时，您可以尝试以下方法，看看是否可以解决问题：

1.  关闭 Visual Studio 的所有实例
2.  确保机器上没有实例`xDescProc.exe`或`MSBuild.exe`正在运行
3.  从管理员命令提示符运行：

> "C:\Windows\system32\icacls.exe" "C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0\ExtensionSDKs" /grant "*S-1-15-2-1":(OI )(CI)(IO)(GR,GE) /grant "*S-1-15-2-1":(RX)

这假设 Microsoft Advertising SDK 安装在

> C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0\ExtensionSDKs

然后重新启动 Visual Studio 并打开 XAML 设计器。

# javascript - 本地滚动切换

> ID：12443849
> 
> 赞同：1
> 
> 时间：2012-09-16T01:48:21.783
> 
> 标签：javascript, jquery, toggle

对于许多站点（包括我的站点）来说，如果我们可以使用 jQuery localscroll 将某人发送到站点的末尾，然后当他们到达末尾时，反转方向，这样下一次单击将带您回到站点，这将非常有用网站顶部。

有没有人做过这样的事情？关于如何完成它的任何想法（我是 js 新手）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:12:38.587

那么这段代码可以做你想要的吗？[演示](http://jsfiddle.net/vngh4/1/)

```
var bottom = false;
$('body').delegate('span', 'click', function() {
if (bottom === true) {
    $("html, body").animate({
        scrollTop: '0px'
    }, "slow");
    bottom = false;
} else {
    $("html, body").animate({
        scrollTop: $(document).height()
    }, "slow");
    bottom = true;
}
}); 
```

# jquery - 如何使用从 json 上传的 jquery 文件自定义服务器响应

> ID：12443854
> 
> 赞同：2
> 
> 时间：2012-09-16T01:50:14.390
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3, file-upload

[我使用这个jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)在 Ruby on Rails 上开发文件上传功能，我使用这个[示例](https://github.com/tors/jquery-fileupload-rails-paperclip-example)来完成任务。这里的问题是，如示例中所示，创建操作中的响应带有 json 对象，因此可以列出上传的内容

```
render json: [@upload.to_jq_upload].to_json, status: :created, location: @upload 
```

但是我想在上传图片后使用不同的操作来响应 format.js 或 .html，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T00:19:57.683

渲染 JSON 的 JS 应该从`$.getJSON`改为`$.getScript`

然后，在您的控制器中，放下`render :json`您拥有的并放置以下内容：

```
respond_to do |format|
  format.html {}
  format.js   {}
end 
```

您应该有一个与相应格式（my_view.js.erb 或 my_view.html.erb）匹配的视图。然后把你想要的代码放在那里。

# html - 如何在引导缩略图上进行叠加？

> ID：12443857
> 
> 赞同：7
> 
> 时间：2012-09-16T01:50:42.570
> 
> 标签：html, css, twitter-bootstrap

我正在使用带有响应式布局的[twitter bootstrap 2.1.1](http://twitter.github.com/bootstrap/)，我想在图像的右下角浮动一个标签。我遇到的问题之一是因为当缩略图更宽时它会响应，然后图像浮动太远。另一个问题是我似乎无法让它向右浮动。我还应该补充一点，虽然我希望它在右下角，但我确实希望它偏移几个像素，因为它不在图像的边缘。此外，文本可能总是缺少照片，即显示默认图像时。

到目前为止，这是我的 html

```
<li class="span4">
  <div class="photo-group thumbnail">
    <a href="/recipes/50500235aa113eb1870001d8" class="photo-wrapper"> 
      <img alt="300x200&amp;text=photo" src="http://www.placehold.it/300x200&amp;text=Photo">
      <span class="label label-inverse photo-label">Photo Missing</span>
    </a>
    <div class="caption">
      <div class="pull-right">
        by <a href="/users/50494983aa113ebd5c000001">
     hadees
        </a>
      </div>
      <a href="/recipes/50500235aa113eb1870001d8">Chocolate Crackle Cookies</a>
    </div>
  </div>
</li> 
```

这是我的CSS

```
.content-header {
    padding-bottom: 10px;
}

.thumbnail > a > img {
    display: block;
    margin-left: auto;
    margin-right: auto;
    max-width: 100%;
}

.photo-group .photo-wrapper {
  position: relative;
}

.photo-group .photo-wrapper .photo-label {
  position: absolute;      
  bottom: 0;
}

.photo-group .photo-wrapper .photo-label {
  float: right;
}​ 
```

我还有一个[jsfiddle](http://jsfiddle.net/BuAWk/embedded/result/)作为更好的例子。

也许处理这个问题的正确方法是让照片组的最大宽度为 300，但我认为这种在桌面全屏上看起来很有趣。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T10:30:50.913

这是我的小提琴版本：http: [//jsfiddle.net/AdVCT/9/](http://jsfiddle.net/AdVCT/9/)

本质上，您需要在图像和标签周围放置一个包装器，以便您可以在此包装器中绝对定位标签：

```
 <div class="photo">
            <img alt="..." src="..." />

            <span class="label label-inverse photo-label">Photo Missing</span>
        </div> 
```

然后使用一些 CSS，您可以将 .photo 更改为居中，但也只能与其中的图像一样大（标题是绝对定位的，因此它有效地从页面流中取出，并且不会影响父母的宽度ETC。）：

```
.photo-group .photo-wrapper .photo {
    position: relative;
    margin: 0 auto;
    display: table;
} 
```

并从 .thumbnail > a > img 规则中删除 margin-left: auto/margin-right: auto 。最后，要从图像的侧面稍微偏移标签，请使用：

```
.photo-group .photo-wrapper .photo-label {
  position: absolute;      
  bottom: 5px;
  right: 5px;
} 
```

并将 5px 设置为您想要的偏移量。

# c# - 访问已在使用的文件

> ID：12443860
> 
> 赞同：0
> 
> 时间：2012-09-16T01:51:25.783
> 
> 标签：c#, windows, file, io, file-locking

> **可能重复：**
> [读取正在使用的文件？](https://stackoverflow.com/questions/3709104/read-file-which-is-in-use)

我正在尝试访问已在 Windows 7 中使用的文件。我已尝试在此站点和其他站点上找到的所有建议，但尚未成功。

我试过的：

```
FileStream fs = new FileStream(iFile, FileMode.Open, FileAccess.Read, FileShare.Read);
FileStream fs = new FileStream(iFile, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
FileStream fs = new FileStream(iFile, FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite);
FileStream fs = new FileStream(iFile, FileMode.Open, FileAccess.ReadWrite, FileShare.Read); 
```

总是同样的错误

该进程无法访问文件“fileinuse”，因为它正被另一个进程使用。

我愿意解决这个问题。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T02:00:08.837

如果另一个进程以“独占模式”打开文件，则您无法访问该文件。

# android - com.google.android.maps 包不存在

> ID：12443861
> 
> 赞同：2
> 
> 时间：2012-09-16T01:51:34.770
> 
> 标签：android, xamarin.android

我正在尝试在 IOS 上将 Google 地图与 Mono for Android 一起使用。我已经执行了这些步骤：

1.  我在 /Users/JosephAnderson/Android-SDKs 安装了 Android SDK 和 Google Maps API

2.  我为 Google Maps 创建了一个模拟器，它针对 Google Maps API 的 API 8

3.  我从 Xamarin 添加了对 Android.GoogleMaps 程序集的引用。

部署到模拟器时收到此错误：

com.google.android.maps 包不存在

将 SDK 添加到 Developer/SDKs/android-sdk-mac_x86 并将其添加到我的 assembly.cs 文件后：

[程序集：Android.App.UsesLibrary（名称=“com.google.android.maps”）]

我将 map.jar 添加到我的 android 项目的根目录，并将其构建类型设置为 AndroidJavaLibrary。

我的项目将构建，但我的设备上出现此错误：

```
Java.Lang.NoClassDefFoundError: menufinderan.MyMapActivity
  at Android.Runtime.JNIEnv.FindClass (System.String classname) [0x00087] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.5-branch/6cbc40e0/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.cs:275
  at Android.Runtime.JNIEnv.FindClass (System.Type type) [0x00009] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.5-branch/6cbc40e0/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.cs:233
  --- End of managed exception stack trace ---
  java.lang.NoClassDefFoundError: menufinderan.MyMapActivity
    at mono.android.view.View_OnClickListenerImplementor.n_onClick(Native Method)
    at mono.android.view.View_OnClickListenerImplementor.onClick(View_OnClickListenerImplementor.java:29)
    at android.view.View.performClick(View.java:2485)
    at android.view.View$PerformClick.run(View.java:9089)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3806)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    at dalvik.system.NativeStart.main(Native Method)
  Caused by: java.lang.IllegalAccessError: Class ref in pre-verified class resolved to unexpected implementation
    at dalvik.system.DexFile.defineClass(Native Method)
    at dalvik.system.DexFile.loadClassBinaryName(DexFile.java:207)
    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:200)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
    ... 13 more 
```

此错误仅在从 MapActivity 继承时发生。

我是不是忘记了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:27:29.527

Xamarin IDE 提供了一种更简单的方法

1.  从工具菜单中，选择打开 AVD 管理器
2.  从 Android Virtual Device Manager 应用程序的工具菜单中，选择管理 SDK..
3.  对于您所针对的每个 Android SDK，请选中“Google API”复选框并安装软件包。

您现在应该已经安装了 Google Maps SDK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:50:47.077

我做了这些步骤来解决这个问题：

在终端中，键入以下命令：

默认写入 com.apple.Finder AppleShowAllFiles TRUE

killall 查找器

导航到此文件夹：

/Users/josephanderson/Library/Developer/Xamarin/android-sdk-mac_x86

在此处安装 Google Maps API（转到 tools 文件夹并单击 Android。按照他们的其余步骤操作。）完成后，Google Maps API 将存在于 add-ons 文件夹中。

将此文件复制到 Users/josephanderson 从

/Users/[USERNAME]/.local/share/Xamarin/Mono for Android/debug.keystore

将此代码复制粘贴到终端：

keytool -list -alias androiddebugkey -keystore debug.keystore -storepass android -keypass android

# php - php jquery 直接网址

> ID：12443874
> 
> 赞同：0
> 
> 时间：2012-09-16T01:55:18.350
> 
> 标签：php, jquery, ajax, url

你好，我有一些关于如何保护这个脚本免受直接 URL 的问题？

会员可以去'pages/map/hospital.php?status=healed'，瞧，他们不需要任何等待时间。我该如何解决？！

```
<?php
$status = $_GET['status'];

if(isset($status)){
 session_start();
 include('../../includes/core/member.php');
 include('../../includes/core/config.php');
 $member_id = $_SESSION['member_id'];
  if($status == 'healed'){
   mysql_query("UPDATE `members` SET `now_health` = '".$m_max_health."' WHERE `member_id` = '".$member_id."'");
  }

}else{
 include('includes/core/member.php');
}

$health = $m_max_health - $m_now_health;
$wait_time = $health * 5;
?>

<p id='health'>Healing (<?=$wait_time?>)</p>

<script>
$('#health').one('click', function() {
  var count = <?=$wait_time?>;
  countdown = setInterval(function(){
    $("p#health").html(count + " seconds remaining!");
    if (count == 0) {
      $.ajax({
       url: 'pages/map/hospital.php?status=healed',
       success: function(data) {
        clearInterval(countdown);
        $("p#health").html('you have healed');
       }
      });
    }
    count--;
  }, 1000);
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:00:21.627

需要服务器端验证。

我看到您已经在变量中有初始 $wait_time 。因此，您可能希望利用这一点并使用 datetime 函数执行一些基本数学运算，以确保计数 <= 0。

# .net - 带有 .NET 文档/示例的 Google BigQuery

> ID：12443878
> 
> 赞同：10
> 
> 时间：2012-09-16T01:56:16.563
> 
> 标签：.net, google-bigquery

我需要使用[Google BigQuery API](https://developers.google.com/bigquery/docs/libraries)查询数据。但是我很难找到 .NET 示例，并且二进制文件*(Google.Apis.Bigquery.dll)*中没有包含文档。任何人都可以为我提供 .NET 的示例用法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T01:59:46.730

这是一个工作示例，部分基于迈克尔的回应：

```
using DotNetOpenAuth.OAuth2;
using Google.Apis.Authentication.OAuth2;
using Google.Apis.Authentication.OAuth2.DotNetOpenAuth;

using Google.Apis.Bigquery.v2;
using Google.Apis.Bigquery.v2.Data;

using Google.Apis.Util;
using System;
using System.Diagnostics;
using System.Collections.Generic;

namespace BigQueryConsole
{
    public class BigQueryConsole
    {
        // Put your client ID and secret here (from https://developers.google.com/console)
        // Use the installed app flow here.
        // Client ID looks like "9999999.apps.googleusercontent.com"
        static string clientId = "YOURCLIENTID";  
        static string clientSecret = "YOURSECRET";

        // Project ID is in the URL of your project on the APIs Console
        // Project ID looks like "999999";
        static string projectId = "YOURPROJECTID";

        // Query in SQL-like form
        static string query = "SELECT state, count(*) from [publicdata:samples.natality] GROUP BY state ORDER BY state ASC";

        public static void Main(string[] args)
        {
            // Register an authenticator.
            var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description);

            provider.ClientIdentifier = clientId;
            provider.ClientSecret = clientSecret;

            // Initiate an OAuth 2.0 flow to get an access token

            var auth = new OAuth2Authenticator<NativeApplicationClient>(provider, GetAuthorization);

            // Create the service.
            var service = new BigqueryService(auth);
            JobsResource j = service.Jobs;
            QueryRequest qr = new QueryRequest();
            qr.Query = query;

            QueryResponse response = j.Query(qr, projectId).Fetch();
            foreach (TableRow row in response.Rows)
            {
                List<string> list = new List<string>();
                foreach (TableRow.FData field in row.F)
                {
                    list.Add(field.V);
                }
                Console.WriteLine(String.Join("\t", list));
            }
            Console.WriteLine("\nPress enter to exit");
            Console.ReadLine();
        }

        private static IAuthorizationState GetAuthorization(NativeApplicationClient arg)
        {
            // Get the auth URL:
            IAuthorizationState state = new AuthorizationState(new[] {  BigqueryService.Scopes.Bigquery.GetStringValue() });
            state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
            Uri authUri = arg.RequestUserAuthorization(state);

            // Request authorization from the user (by opening a browser window):
            Process.Start(authUri.ToString());
            Console.Write("  Authorization Code: ");
            string authCode = Console.ReadLine();
            Console.WriteLine();

            // Retrieve the access token by using the authorization code:
            return arg.ProcessUserAuthorization(authCode, state);
        }
    }
} 
```

这使用同步查询。对于异步查询，代码会略有不同。

您需要同时引用 BigQuery 服务 dll（在二进制下载的“服务”目录下）以及“Lib”目录中的其他 dll。二进制版本在这里：[http ://code.google.com/p/google-api-dotnet-client/wiki/Downloads#Latest_Stable_Release](http://code.google.com/p/google-api-dotnet-client/wiki/Downloads#Latest_Stable_Release)

.NET 代码将与 Java 库代码非常相似（它们是根据相同的 API 描述生成的）： [https ://developers.google.com/bigquery/docs/developers_guide#batchqueries](https://developers.google.com/bigquery/docs/developers_guide#batchqueries)

我们很快就会得到更多的样本，但希望这在此期间有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T05:17:20.383

我们还没有任何 BigQuery C# 示例，但 Google .NET 库附带了用于其他 Google API 的各种示例，并且代码类似。[有关示例，请参见此页面](http://code.google.com/p/google-api-dotnet-client/wiki/GettingStarted)。

代码将如下所示（*注意：我还没有机会实际测试它，所以欢迎编辑......*）。顺便说一句，我们正在为 BigQuery 进行大量文档更新，我们希望尽快发布一些 C# 示例（但最有可能在下个月）。

```
using DotNetOpenAuth.OAuth2;
using Google.Apis.Authentication.OAuth2;
using Google.Apis.Authentication.OAuth2.DotNetOpenAuth;

using Google.Apis.Bigquery.v2;
using Google.Apis.Util;

{
    public class Program
    {
        public static void Main(string[] args)
        {
            // Register an authenticator.
            var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description);

            // Put your client id and secret here (from https://developers.google.com/console)
            // Use the installed app flow here.
            provider.ClientIdentifier = "<client id>";
            provider.ClientSecret = "<client secret>";

            // Initiate an OAuth 2.0 flow to get an access token
            var auth = new OAuth2Authenticator<NativeApplicationClient>(provider, GetAuthorization);

            // Create the service.
            var service = new BigqueryService(auth);

            // Do something with the BigQuery service here
            // Such as... service.[some BigQuery method].Fetch();
        }

        private static IAuthorizationState GetAuthorization(NativeApplicationClient arg)
        {
            // Get the auth URL:
            IAuthorizationState state = new AuthorizationState(new[] { BigqueryService.Scopes.Bigquery.GetStringValue() });
            state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
            Uri authUri = arg.RequestUserAuthorization(state);

            // Request authorization from the user (by opening a browser window):
            Process.Start(authUri.ToString());
            Console.Write("  Authorization Code: ");
            string authCode = Console.ReadLine();
            Console.WriteLine();

            // Retrieve the access token by using the authorization code:
            return arg.ProcessUserAuthorization(authCode, state);
        }
    }
} 
```

# macos - 我的带有图标的 NSButton 没有图标

> ID：12443881
> 
> 赞同：1
> 
> 时间：2012-09-16T01:56:51.590
> 
> 标签：macos, cocoa, nsimage, appkit, nsbutton

我在笔尖中有一个 NSButton 设置为一个图标，并且只有一个图标：

![选中按钮的 Xcode 屏幕截图，显示其图像名称设置为 NSQuickLookTemplate](../Images/3149c5ea2059cc939f28c5e4b75c782b.png)

当我运行该应用程序时，该图标尽管是[AppKit 提供的图像之一](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSImage_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSImageNameQuickLookTemplate)，但仍然丢失：

![运行时我的应用程序中按钮的屏幕截图，不显示图像](../Images/981d5e2f89d9a1658b2318877beab62f.png)

这里发生了什么？为什么我的按钮图标不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T02:08:42.810

好的。在我刚刚创建的小示例应用程序中，我能够让图标出现（不过需要做一些事情）。总结一下，您需要将按钮类型更改为“斜角”并在必要时增加高度。

显然，“Push”风格的 NSButton 类型太窄，无法舒适地显示图标。

# c# - 用组合框信息填充 texbox

> ID：12443882
> 
> 赞同：1
> 
> 时间：2012-09-16T01:56:52.117
> 
> 标签：c#, winforms

每次组合框选定项更改时，我都试图用对象属性填充 2 个不同的文本框。我有以下代码：

```
namespace WindowsFormsApplication5
{
    public partial class Form1 : Form
    {            
        Domicilio[] domicilios = new Domicilio[]{
            new Domicilio{Calle="balbin",Numero=469},
            new Domicilio{Calle="palacios",Numero=589},
            new Domicilio{Calle="rep arg",Numero=748},
            new Domicilio{Calle="escalada",Numero=562}
        };

        public Form1()
        {
            InitializeComponent();
            foreach (var d in domicilios)
            {
                cbbDatoDomicilio.Items.Add(d);
                cbbDatoDomicilio.DisplayMember = "Calle";   
            }    
        }    
        protected override void OnLoad(EventArgs e)
        {
            base.OnLoad(e);                        
        }    
        private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            // missing code here!
            txtCalle.Text = d.Calle;
            txtNumero.Text = d.Numero.ToString();                
        }
    }
} 
```

问题是我找不到填充它们的方法。代码的问题是变量`d`超出范围，这就是它不起作用的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:49:28.130

您必须在方法中*定义变量 d*并**分配****comboBox1**的selectedItem

 **```
 private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
 {
      Domicilio d = comboBox1.SelectedItem as Domicilio;
      if (d!=null)
      {
        txtCalle.Text = d.Calle;
        txtNumero.Text = d.Numero.ToString();
      }
 } 
```

另一方面，您可以考虑使用**bindingSource**并访问它的 BindingSource.Current 成员！（查看[**如何：绑定列表**](https://stackoverflow.com/questions/600869/how-to-bind-a-list-to-a-combobox-winforms)或[数据绑定示例](http://www.akadia.com/services/dotnet_databinding.html)或 MSDN[如何：绑定 Windows 窗体组合框](http://msdn.microsoft.com/en-us/library/w67sdsex.aspx)**

# clojure - 如何将表达式转换为谓词？(Clojure)

> ID：12443886
> 
> 赞同：5
> 
> 时间：2012-09-16T01:57:37.337
> 
> 标签：clojure, expression, predicate

鉴于我有一个形式的表达

```
'(map? %) 
```

我如何将它转换成类似的东西

```
'#(map? %) 
```

这样我最终可以将其扩展为类似

```
'(apply #(map? %) value) 
```

我想我应该以某种方式使用宏，但不确定如何。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T08:01:29.540

调用读取器`#`宏和读取器宏扩展发生在正常宏扩展发生之前。因此，要执行您提到的操作，您需要在宏中使用阅读器，`read-string`如下所示。

```
(defmacro pred [p v] 
     (let [s# (str \# (last p))] 
         `(apply ~(read-string s#) ~v)))

user=> (pred '(map? %) [{}])
true
user=> (pred '(map? %) [[]])
false 
```

如果数据即谓词表达式在运行时可用，那么您需要使用一个函数（它比宏更灵活）。

```
(defn pred [p v] 
   (let [s (read-string (str \# p))] 
      (eval `(apply ~s ~v))))

user=> (map #(pred % [12]) ['(map? %)'(even? %)])
(false true) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T07:05:14.417

`#(...)`是一个阅读器宏。我认为您不能使用阅读器宏生成表达式。例如`'#(map? %)`会自动展开成`(fn* [p1__352#] (map? p1__352#))`或类似的东西。

这是关于其他阅读器宏的一些[相关讨论。](https://stackoverflow.com/questions/7754429/clojure-defmacro-loses-metadata)

是否可以更改谓词的格式？如果它看起来像：

```
'([arg1] (map? arg1)) 
```

然后将其制成一个函数将是微不足道的：

```
(cons 'fn '([arg1] (map? arg1)))

(def pred (eval (cons 'fn '([p](map? p)))))
#'predicate.core/pred

(pred {})
true

(pred 10)
false 
```

* * *

现在请不要因为我接下来要发布的内容而讨厌我。我写了一个过于简化的函数阅读器宏：

```
(defn get-args [p]
  (filter #(.matches (str %) "%\\d*")
          (flatten p)))

(defn gen-args [p]
  (into [] 
        (into (sorted-set) 
              (get-args p))))

(defmacro simulate-reader [p]
  (let [arglist (gen-args p)
        p (if (= (str (first p)) "quote")
            (second p)
            p)]
    (list 'fn (gen-args p) p))) 
```

使用它非常简单：

```
((simulate-reader '(map? %)) {}) ; -> true
; or without quote
((simulate-reader (map? %)) {})

; This also works:
((simulate-reader '(+ %1 %2)) 10 5) ; -> 15 
```

与@Ankur 给出的其他解决方案的区别是：

1.  我不喜欢我的。我只是觉得这是一件有趣的事情。
2.  不需要转换为字符串，然后对其应用阅读器宏。

# javascript - 在浏览器中禁用 javascript 时如何让所有用户继续

> ID：12443890
> 
> 赞同：0
> 
> 时间：2012-09-16T01:59:19.833
> 
> 标签：javascript, noscript

我有一个登录页面，如果禁用 Javascript，我希望用户不要走得更远。我尝试使用 noscript 标记，但页面 UserId、密码字段和登录按钮确实与 noscript 消息一起出现...如何通过警报完全模糊背景并仅在用户启用 Javascript 后继续...

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T02:03:14.783

使用 CSS ( ) 隐藏元素`display: none`。用 JS 展示它们。您可以将其设为一个类，并将该类赋予您想要隐藏的所有元素。

使用 JS 从这些元素中删除该类以显示它们。请参阅[此答案](https://stackoverflow.com/a/196038/219118)以了解如何。

现在，除非您有 JS，否则您将看不到登录表单。您将无法显示 JS 样式警报（这需要 JS，不是吗...），但您可以隐藏所有内容并在页面上显示消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T02:06:01.363

您可以显示一个页面大小的 div，它位于块中具有不透明（或半透明）背景的所有其他内容之上`<noscript>`，以便登录表单显示在 div 下方。

# javascript - ExtJS 4.1.1 | 为什么`view`和`this`在继承类的事件处理函数中不同

> ID：12443899
> 
> 赞同：1
> 
> 时间：2012-09-16T02:01:01.603
> 
> 标签：javascript, html, extjs, extjs4.1, extjs-mvc

我编写了自己的`My.grid`继承自事件`Ext.grid.Panel`并设置了监听`itemdblclick`器。

此事件的处理函数`view`作为第一个参数获取，并`this`作为范围。

我不明白为什么我在`view`and中得到不同的值`this`？

*   `this`是一个实例`My.grid`

*   `view`是`Ext.grid.Panel`（但我期望`My.grid`）的一个实例

可能是我做错了什么？还是 ExtJS 的错误/功能？

如何在此处编写继承的小部件`view`以引用继承的对象？

这是一个简单的例子：

```
<!DOCTYPE html>
<html>
<head>
    <title>ExtJS Test page</title>
    <link rel="stylesheet" href="http://cdn.sencha.io/ext-4.1.1-gpl/resources/css/ext-all-gray.css">
    <script type="text/javascript" charset="utf-8" src="http://cdn.sencha.io/ext-4.1.1-gpl/ext-all.js"></script>
    <script type="text/javascript">
        Ext.create('Ext.data.Store', {
            storeId: 'simpsonsStore',
            fields: ['name', 'email', 'change'],
            data: {
                'items': [
                    { 'name': 'Lisa', 'email': 'lisa@simpsons.com', 'change': 100 },
                    { 'name': 'Bart', 'email': 'bart@simpsons.com', 'change': -20 },
                    { 'name': 'Homer', 'email': 'home@simpsons.com', 'change': 23 },
                    { 'name': 'Marge', 'email': 'marge@simpsons.com', 'change': -11 }
                ]
            },
            proxy: { type: 'memory', reader: { type: 'json', root: 'items' } }
        });

        Ext.define('MY.grid', {
            extend: 'Ext.grid.Panel',
            alias: 'widget.simpsonsgrid',
            title: 'Simpsons',
            store: Ext.data.StoreManager.lookup('simpsonsStore'),
            columns: [
                { header: 'Name', dataIndex: 'name' },
                { header: 'Email', dataIndex: 'email' },
                { header: 'Change', dataIndex: 'change' }
            ],
            initComponent: function () {
                this.callParent(arguments);
                this.on('itemdblclick', this.test, this);
            },
            test: function (view, record) {
                console.log(this); // instance of My.grid
                console.log(view); // instance of Ext.grid.Panel
            }
        });

        Ext.onReady(function () {
            Ext.widget('simpsonsgrid', {
                renderTo: Ext.getBody()
            });
        });
    </script>
</head> <body></body> </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:17:33.397

查看 API ( [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel) )。您可以在那里看到此特定事件具有以下签名：

```
itemdblclick(
    Ext.view.View this,
    Ext.data.Model record,
    HTMLElement item,
    Number index,
    Ext.EventObject e,
    Object eOpts
) 
```

So actually you should get an istance of `Ext.grid.View` in `view` argument. You can get instance of `MY.grid` by accessing `view.ownerCt`.

Example: [http://jsfiddle.net/TLEFH/](http://jsfiddle.net/TLEFH/)

# php - PHP SQL 更新错误

> ID：12443902
> 
> 赞同：0
> 
> 时间：2012-09-16T02:01:36.300
> 
> 标签：php, sql, database

尝试更新我的 mysql 服务器中的表时，我遇到了一个奇怪的问题。

编码：

```
 $name = trim(FilterText($_POST['name']));
$description = trim(FilterText($_POST['description']));
$type = $_POST['type'];

if($groupdata['type'] == "3" && $_POST['type'] != "3"){ echo "You may not change the group type if it is set to 3."; exit; } // you can't change the group type once you set it to 4, fool
if($type < 0 || $type > 3){ echo "Invalid group type."; exit; } // this naughty user doesn't even deserve an settings update

if(strlen(HoloText($name)) > 25){
    echo "Name too long\n\n<p>\n<a href=\"".WWW."/groups/".$groupid."/id\" class=\"new-button\"><b>Done</b><i></i></a>\n</p>\n\n<div class=\"clear\"></div>";
} elseif(strlen(HoloText($description)) > 200){
    echo "Description too long\n\n<p>\n<a href=\"".WWW."/groups/".$groupid."/id\" class=\"new-button\"><b>Done</b><i></i></a>\n</p>\n\n<div class=\"clear\"></div>";
} elseif(strlen(HoloText($name)) < 1){
    echo "Please give a name\n\n<p>\n<a href=\"".WWW."/groups/".$groupid."/id\" class=\"new-button\"><b>Done</b><i></i></a>\n</p>\n\n<div class=\"clear\"></div>";  
} else {
    mysql_query("UPDATE groups SET name = '".$name."', type = $type, desc='".$description."' WHERE id = $groupid AND ownerid = '".USER_ID."' LIMIT 1") or die(mysql_error());
    echo "Editing group settings successful\n\n<p>\n<a href=\"".WWW."/groups/".$groupid."/id\" class=\"new-button\"><b>Done</b><i></i></a>\n</p>\n\n<div class=\"clear\"></div>";
} 
```

在更新组的 mysql_query 中，我不断收到一条错误消息，指出插入 desc=blahblahbla 时我的 SQL 语法有错误。

当我从查询中取出“desc”部分，并且只插入名称和类型时，查询工作正常，但是当我将 desc 添加回查询时，它再次引发错误。desc 部分没有 '' - 这可能会将其填满，即使有，我也会在代码开头过滤它们。

任何帮助将不胜感激。

如果您想知道，我正在使用 CMS

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T02:03:45.470

`desc`是 MySQL 中的保留字，用于`order by`子句。你必须用反引号来逃避它：

```
UPDATE .... `desc`=etc...
            ^--  ^-- 
```

当然，你也会被几十个爱管闲事的人吓到，他们会声称使用 mysql_*() 函数会导致宇宙在 5...4...3...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:52:51.347

尝试这个

```
mysql_query("UPDATE `groups` SET `name` = '".$name."', `type` = $type, `desc` = '".$description."' WHERE `id` = '$groupid' AND `ownerid` = '".USER_ID."' LIMIT 1") or die(mysql_error()); 
```

# sql - 如果条件在两个表的行中匹配，则创建返回 id 的查询

> ID：12443904
> 
> 赞同：6
> 
> 时间：2012-09-16T02:01:55.517
> 
> 标签：sql, postgresql

我正在学习 SQL/dbms 并使用 Postgres。我想返回在某个列中都具有某个值的行。例如在表`Carpets`和`Curtains`中，我想获取`id`颜色所在的行`'light yellow'`。我想我需要为此加入，但不确定是什么类型。

这是我所拥有的：

```
SELECT id
  FROM Carpets
  WHERE colour = 'light yellow'
        INNER JOIN Curtains ON Carpets.colour = Curtains.colour; 
```

两个表都有`id`属性。

关于学习`JOIN`，我应该先学习哪一个？如果我尝试一次学习所有这些（因为不同的资源包括不同的“变体”），我会自责。

**重要**我正在寻找一个答案，`id`只有当窗帘和地毯都是“浅黄色”时才会退回。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T08:22:58.467

已阅读[您](https://meta.stackexchange.com/questions/147347/what-to-do-when-all-answers-to-a-question-are-wrong-because-of-a-missinterpratat)在 Meta 上关于此特定问题的问题，让我解释一下为什么所有三个答案确实是正确的——就像您解决问题的方式一样。

我已经包含了所有三个答案的示例以及他们正在处理的架构：

```
Database changed
mysql> create table carpet(id int(3), material varchar(10), color varchar(15));
Query OK, 0 rows affected (0.02 sec)

mysql> create table curtain(id int(3), material varchar(10), color varchar(15));
Query OK, 0 rows affected (0.00 sec) 
```

（一堆插入语句）

```
mysql> select * from carpet;
+------+-----------+--------------+
| id   | material  | color        |
+------+-----------+--------------+
|    1 | wool      | Light Yellow |
|    2 | wool      | Beige        |
|    3 | polyester | Light Yellow |
|    4 | polyester | Light Red    |
+------+-----------+--------------+
4 rows in set (0.00 sec)

mysql> select * from curtain;
+------+----------+--------------+
| id   | material | color        |
+------+----------+--------------+
|    1 | Velvet   | Purple       |
|    2 | cotton   | White        |
|    3 | cotton   | Light Yellow |
|    4 | cotton   | Light Blue   |
+------+----------+--------------+
4 rows in set (0.00 sec) 
```

intersect 使用两个 select 语句并返回匹配结果。在这种情况下，您正在查找具有匹配颜色“浅黄色”的所有行。

我不能在 MySQL 中给你一个例子，因为它不支持它（如下所示，不需要给出相同的结果）。

两个 select 语句的联合查询，每个语句都有一个 where 子句，只允许“浅黄色”的颜色将返回相同的数据。虽然联合可用于返回不匹配的数据，但每个 select 语句中的 where 子句意味着它只会返回您想要的行。

```
mysql> select id, material, color from carpet
    -> union 
    -> select id, material, color from curtain;
+------+-----------+--------------+
| id   | material  | color        |
+------+-----------+--------------+
|    1 | wool      | Light Yellow |
|    2 | wool      | Beige        |
|    3 | polyester | Light Yellow |
|    4 | polyester | Light Red    |
|    1 | Velvet    | Purple       |
|    2 | cotton    | White        |
|    3 | cotton    | Light Yellow |
|    4 | cotton    | Light Blue   |
+------+-----------+--------------+
8 rows in set (0.00 sec) 
```

哇，这很糟糕吧？当然，我们没有指定 where 子句：

```
mysql> select id, material, color from carpet where color='Light Yellow'
    -> union
    -> select id, material, color from curtain where color='Light Yellow';
+------+-----------+--------------+
| id   | material  | color        |
+------+-----------+--------------+
|    1 | wool      | Light Yellow |
|    3 | polyester | Light Yellow |
|    3 | cotton    | Light Yellow |
+------+-----------+--------------+
3 rows in set (0.00 sec) 
```

颜色上两个表之间的连接将允许您在单行数据中返回两个表中的行。您可以为项目颜色指定两个表的连接，并使用 where 子句仅返回您正在查找的行。

```
mysql> select a.id, a.material, a.color, b.id, b.material 
    -> from curtain a join carpet b on a.color=b.color;
+------+----------+--------------+------+-----------+
| id   | material | color        | id   | material  |
+------+----------+--------------+------+-----------+
|    3 | cotton   | Light Yellow |    1 | wool      |
|    3 | cotton   | Light Yellow |    3 | polyester |
+------+----------+--------------+------+-----------+
2 rows in set (0.00 sec) 
```

如您所见，这仅返回具有匹配颜色的行，并允许您在结果集中的单行中包含两个表中的列。

现在，我显然没有很好地计划这个，因为除了两个表中的“浅黄色”之外，我没有其他匹配结果，所以如果我在其中添加更多条目，我们会得到：

```
mysql> select * from curtain;
+------+----------+--------------+
| id   | material | color        |
+------+----------+--------------+
|    1 | Velvet   | Purple       |
|    2 | cotton   | White        |
|    3 | cotton   | Light Yellow |
|    4 | cotton   | Light Blue   |
|    5 | Wool     | White        |
|    6 | Fluff    | Beige        |
+------+----------+--------------+
6 rows in set (0.00 sec)

mysql> select * from carpet;
+------+-----------+--------------+
| id   | material  | color        |
+------+-----------+--------------+
|    1 | wool      | Light Yellow |
|    2 | wool      | Beige        |
|    3 | polyester | Light Yellow |
|    4 | polyester | Light Red    |
|    5 | Fluff     | Light Blue   |
+------+-----------+--------------+
5 rows in set (0.00 sec) 
```

现在我们可以再次运行它，这次得到：

```
mysql> select a.id, a.material, a.color, b.id, b.material 
    -> from curtain a join carpet b on a.color=b.color;
+------+----------+--------------+------+-----------+
| id   | material | color        | id   | material  |
+------+----------+--------------+------+-----------+
|    3 | cotton   | Light Yellow |    1 | wool      |
|    3 | cotton   | Light Yellow |    3 | polyester |
|    4 | cotton   | Light Blue   |    5 | Fluff     |
|    6 | Fluff    | Beige        |    2 | wool      |
+------+----------+--------------+------+-----------+
4 rows in set (0.00 sec) 
```

哦不！

这就是我们一起使用 join 和 where 子句的地方：

```
mysql> select a.id, a.material, a.color, b.id, b.material 
    -> from curtain a join carpet b on a.color=b.color 
    -> where a.color='Light Yellow';
+------+----------+--------------+------+-----------+
| id   | material | color        | id   | material  |
+------+----------+--------------+------+-----------+
|    3 | cotton   | Light Yellow |    1 | wool      |
|    3 | cotton   | Light Yellow |    3 | polyester |
+------+----------+--------------+------+-----------+
2 rows in set (0.00 sec) 
```

您会看到，在 SQL 中，通过不同方式获得相同结果的方法通常比表中相同数据的变体要多。

编辑：好的，所以如果您只想要*所有*数据匹配的行，只需将其包含在连接语法中：

```
mysql> select a.id, a.material, a.color, b.id, b.material 
    -> from curtain a 
    -> join carpet b on a.color=b.color
    -> and a.id=b.id
    -> where a.color='Light Yellow';
+------+----------+--------------+------+-----------+
| id   | material | color        | id   | material  |
+------+----------+--------------+------+-----------+
|    3 | cotton   | Light Yellow |    3 | polyester |
+------+----------+--------------+------+-----------+
1 row in set (0.00 sec) 
```

如您所见，现在我们告诉联接，两个表之间的`id`和`color`字段都必须匹配 - 结果不言自明。现在，在这种情况下，我在技术上*仍然*没有匹配所有列，因为材料不同。如果您想进一步匹配，查询将不会返回任何结果，因为我没有匹配的记录，其中 id、material 和 color 匹配，但语法如下：

```
mysql> select a.id, a.material, a.color, b.id, b.material 
    -> from curtain a 
    -> join carpet b on a.color=b.color
    -> and a.id=b.id
    -> and a.material=b.material
    -> where a.color='Light Yellow';
Empty set (0.00 sec) 
```

尽管如此，在大多数情况下，您并不希望*所有*列都匹配。很多时候，表都有一个仅用于该表的 ID，并且是一个自动递增的值。您想使用它来标识该表中的唯一行*，*而不是使用它来匹配不相关的表。如果有的话，我会建议您在材料和颜色上进行匹配 - 但不要将 ID 放在其中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T02:14:27.767

由于结果是针对两个不相交的表，因此您实际上需要一个联合：

```
select id, 'curtains' as source from curtains where color = 'lightyellow'
  union 
select id, 'carpets' as source from carpets where color = 'lightyellow' 
```

关于连接，一起学习。它们只是彼此的轻微变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T02:52:48.540

如果您想在两个表中匹配结果，请尝试以下操作：

```
select id
  from curtains
      ,carpets
  where curtain.color = carpets.color; 
```

这将返回 id where`curtain.color = carpets.color`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-16T09:59:36.853

这两个查询都会给你你想要的结果......

```
SELECT Carperts.id
  FROM Carpets INNER JOIN Curtains ON Carpets.colour = Curtains.colour
  and colour = 'light yellow';

SELECT Carperts.id
  FROM Carpets INNER JOIN Curtains ON Carpets.colour = Curtains.colour
  WHERE colour = 'light yellow'; 
```

# xcode - XCode 使用 SVN 协议

> ID：12443907
> 
> 赞同：-1
> 
> 时间：2012-09-16T02:02:46.683
> 
> 标签：xcode, macos, svn

我有一个在 Windows 服务器上运行的崇高服务器。Sublime 只支持 svn 协议。

我目前正在使用 XCode 4.2，有谁知道我如何让 XCode 使用 svn 协议或更改 SVN sublime 以接受 HTTP？

我已经尝试过 http://:3690/Repository/ 但这没有用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T03:27:35.833

我发现了这个问题。我不得不重新启动 XCode。好像有什么东西被缓存了。我现在可以连接了。

谢谢您的帮助。

# jquery - jquery：我如何访问这个输入值

> ID：12443908
> 
> 赞同：0
> 
> 时间：2012-09-16T02:02:48.303
> 
> 标签：jquery

演示：http: [//jsfiddle.net/mjmitche/sTzCS/39/](http://jsfiddle.net/mjmitche/sTzCS/39/)

我有这个表格，里面有一个无序列表。我已将 jquery 的 sortable() 函数附加到列表中，因此用户可以向上或向下移动表单元素以指示团队将按哪个顺序完成，下面的 jquery 确定用户将它们放入的顺序。但是，我也为每个列表元素创建一个输入字段，以便用户可以输入每个团队将获得的点数。

例如，用户可能会将 Winnipeg 移到列表顶部，并在输入字段中输入值 95。因此，温尼伯将以 95 分排名第一，最终获得 95 分（根据用户对球队排名的预测）。

我的问题是，如何以与团队相关联的方式访问每个表单元素的输入值。例如，如果首先放置温尼伯，根据下面的代码，它将可以在`result[0]`数组的 at 处访问。但是，我不认为输入值是数组的一部分，所以我不知道如何访问它们。

我能够使用 访问第一个团队 ，但即使输入值看起来像一个子元素`attribute.first`，也无法获得积分。`attribute.first.child`

我最终希望能够将每个团队的位置编号（由排序位置确定）和积分（由用户手动输入确定）保存到数据库中

```
html

<form<form id="new_entry">
<ul id="sortlist">

        <li id="Vancouver">Canucks<input type="text" name="name" id="vanpoints"></li>
        <li id="Toronto">Toronto<input type="text" name="name" id="torontopoints"></li>
        <li id="Montreal">Montreal<input type="text" name="name" id="montrealpoints"></li>
        <li id="Ottawa">Ottawa<input type="text" name="name" id="ottawapoints"></li>
        <li id="Calgary">Calgary<input type="text" name="name" id="calgarypoints"></li>
        <li id="Edmonton">Edmonton<input type="text" name="name" id="edmontonpoints"></li>
        <li id="Winnipeg">Winnipeg<input type="text" name="name" id="winnipegpoints"></li>
</ul>
<input type="submit" value="Add">
</form>​ 
```

代码

```
$("#sortlist").sortable({
    stop: function(event, ui) {
        result = $("#sortlist").sortable("toArray");
        var attributes;
        attributes = {
            first: result[0],
            second: result[1],
            third: result[2],
            fourth: result[3],
            fifth: result[4],
            six: result[5],
            seventh: result[6]

        };

        alert(attributes.first.child);

    }
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:10:21.797

尝试将值保存为哈希：

```
...
   first: { team: result[0].id, value: result[0].children()[0].val() }
... 
```

然后以 attributes.first.team 和 attributes.first.value 访问团队和值。

# vim - 在 nmap 中组合字符串和文件名修饰符

> ID：12443916
> 
> 赞同：0
> 
> 时间：2012-09-16T02:04:42.030
> 
> 标签：vim

是否可以在 vim`nmap`命令中组合字符串和文件名修饰符？

我有以下内容`.vimrc`

```
nnoremap <D-F4> :TlistAddFiles %:p:h *.*<CR> 
```

我希望有一个仅限于当前文件类型的模拟。

例如，如果当前文件是`/Users/me/Py/project1/myFile.py`，则该命令会将目录`.py`中的所有文件添加`/Users/me/Py/Project1/`到`Taglist`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:04:42.030

是的，您可以将它们全部粘在一起 -`vim`可以分辨出要扩展的位以及哪个是字符串。对于有问题的任务，请使用以下命令：

```
nnoremap <D-F4> :TlistAddFiles %:p:h/*.%:e 
```

如果当前文件是`.py`文件，则仅对`.py`文件进行索引。

有关`:help %:e`文件名修饰符的更多信息，请参阅。

# javascript - 使用 javascript 动态构建 html 标题标签

> ID：12443923
> 
> 赞同：4
> 
> 时间：2012-09-16T02:05:48.913
> 
> 标签：javascript, html, dynamic, title

我正在开发的网站上有很多页面，其中每个页面都有自己的标题标签。在许多情况下，标题都有固定文本，例如：

主页 | 第 1 节 | 第 1 页
主页 | 第 1 节 | 第 2
页 第 1 节 | 第 3 页等...

插入这些标题会在以后进行更困难的更改，更不用说记住添加它们的麻烦了。我正在寻找一种基于页面在站点文件夹结构中的位置，使用 javascript 动态生成每个页面标题的方法。

我目前正在使用对面包屑执行类似操作的脚本，但不确定如何引用相同的脚本或为页面标题构建类似的脚本。面包屑脚本在这里：[http ://trcreative.us/dev/jmsracing/js/breadcrumbs.js](http://trcreative.us/dev/jmsracing/js/breadcrumbs.js)

并且在大多数情况下完全按照我对标题的需要，减去每个面包屑项目的链接。（显然，我不希望它为标题这样做）。

请参阅此处应用的面包屑：http: [//trcreative.us/dev/jmsracing/races/pigman-long-and-olympic/](http://trcreative.us/dev/jmsracing/races/pigman-long-and-olympic/)

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T04:38:56.267

该`document`对象有一个`title`可以像这样显式设置的属性：

```
document.title = "some_title_here"; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-16T05:21:17.817

假设您的 url 如下`home/section/page.html`所示，您可以在任何页面的顶部使用此功能，如果这就是您的意思，它将根据 url 设置标题。

```
function setTitle(extra) {
  document.title = location.pathname.split('/').map(function(v) {
    return v.replace(/\.(html|php)/, '')
      .replace(/^\w/, function(a) { return a.toUpperCase(); });
  }).join(' | ') + (extra && ' | '+ extra);
} 
```

使用此函数将生成如下标题：`Home | Section | Page`. 如果您想为特定页面添加特定内容，则将字符串作为`extra`参数传递，它将被添加到标题中，即。

```
// url: http://mypage.com/home/about/frogs    
setTitle('Frogs are awesome');
console.log(document.title); //=> Home | About | Frogs | Frogs are awesome 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T06:08:38.283

您可以使用类似的东西（如果使用 javascript）

```
var getTitleOfPage = function(){
    // logic here to work out the title of the page.
};

var title = getTitleOfPage();
document.title = title; 
```

或者，您也可以使用您使用的任何服务器端语言来设置标题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T02:10:20.743

在 JQuery 中尝试此代码

```
<script type="text/javascript">
  $(document).ready(function() {
    document.title = 'your page title goes here';
  });
</script> 
```

# string - 预期，得到字符串 HABTM

> ID：12443925
> 
> 赞同：1
> 
> 时间：2012-09-16T02:05:54.653
> 
> 标签：string, forms, checkbox, object-expected

这种形式：

```
<%= form_tag({:controller => "smart_lists", :action => "create"}, class: 'form-inline', :method => "POST") do %>
<%= label_tag :name %>
<%= text_field_tag :name %><br><br>
  <% @people.each do |person| %>
    <%= check_box_tag 'people_id[]', id: person.id %><%= label_tag person.name %><br>
  <% end %>
<%= submit_tag "Create", class: 'btn' %> 
```

在此处将其复选框列表发送到控制器：

```
def create
  @smart_list = SmartList.new(params[:smart_list])
  @smart_list.name = params[:name]
  @smart_list.people = params[:people_id]
 etc.... 
```

我最终在我的日志中得到了这个：

```
"name"=>"This is not working : (", "people_id"=>["{:id=>64}", "{:id=>8}", "{:id=>1}"] 
```

在我看来，这是：

```
Person(#70133507313700) expected, got String(#70133469090180) 
```

所以，我想我的问题是 - 有没有办法把那些东西从这些字符串中解脱出来？或者我可以以更好的方式通过表格发送它们吗？或者在控制器中以更好的方式捕获它们？

感谢您的帮助 - 乔伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:02:03.490

我最终将表单中的 check_box_tag 更改为：

```
<td><%= check_box_tag 'people[]', person.id %></td> 
```

这在我的参数中给了我这样的东西：

```
"people"=>["67", "11", "10", "23", "3", "1"], 
```

然后在控制器中，我循环了 :people 参数并取出了 id：

```
if params[:people]
  params[:people].each do |p|
    @smart_list.people << Person.where(id: p)
  end
end 
```

我觉得这很丑陋 - 但它有效。如果有人有更好的方法来形成视图或控制器，我仍然想知道一种更好的方法来做到这一点。- 谢谢

# symfony - 表单上的 Symfony single_text 日期。格式不遵循语言环境

> ID：12443928
> 
> 赞同：1
> 
> 时间：2012-09-16T02:06:25.327
> 
> 标签：symfony, symfony-2.1

我正在努力处理与表格中的日期和时间有关的几件事。

我在表格上有一个日期，我正在使用 single_text 小部件。

我在 parameters.yml 中的语言环境设置为 en_US。

config.yml 具有以下框架：

default_locale: %locale%

我希望它接受 mm/dd/yyyy 但这会产生“此值无效”。当我尝试在表单上输入 1/1/2012 并提交时。我可以让它工作的唯一方法是在添加小部件时在选项数组中的代码中设置格式 => 'MM/dd/yyyy'。

我想我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:24:18.093

日期表单类型的默认格式是 IntlDateFormatter::MEDIUM，这是一种取决于您的语言环境的日期格式，但可能与您的预期不同。对于 en_US，此格式为 MMM d, y，因此它需要类似 2012 年 1 月 1 日的内容。如果您想使用 MM/dd/yyyy 格式，只需像您一样在选项数组中设置格式。

# c - 在 C 中停止 Unix 堆栈随机化

> ID：12443931
> 
> 赞同：3
> 
> 时间：2012-09-16T02:07:13.137
> 
> 标签：c, unix, operating-system

> **可能重复：**
> [如何在 Linux 上禁用二进制文件的地址空间随机化？](https://stackoverflow.com/questions/1455904/how-to-disable-address-space-randomization-for-a-binary-on-linux)

C 中是否有系统调用/库可以稳定程序的堆栈，并阻止操作系统随机化堆栈的位置？

# javascript - 没有任何私有变量或返回值的立即调用函数表达式？

> ID：12443932
> 
> 赞同：1
> 
> 时间：2012-09-16T02:07:31.023
> 
> 标签：javascript

我正在阅读 javascript 设计模式书，并在阅读“命令模式”时遇到了下面的代码。我一直在试图理解为什么这段代码被包裹在一个立即被调用的匿名函数上，特别是因为没有其他私有变量可以被关闭。这与仅将 CarManager 声明为对象文字有何不同？

```
(function(){

  var CarManager = {

    // request information
    requestInfo: function( model, id ){
      return 'The information for ' + model + ' with ID ' + id + ' is foobar';
    },

    // purchase the car
    buyVehicle: function( model, id ){
      return 'You have successfully purchased Item ' + id + ', a ' + model;
    },

    // arrange a viewing
    arrangeViewing: function( model, id ){
      return 'You have successfully booked a viewing of ' + model + ' ( ' + id + ' ) ';
    }

  };

})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T02:37:08.550

这个例子有点半生不熟。

目标是能够提供公共接口。在该 IIFE 内部，您将界面所需的所有部分放在一起。

您不必通过 return 语句将其传回。

例如，jQuery 就是以同样的方式构建的。而不是返回语句：

```
var jQuery = (function () { return magic; }()); 
```

他们在函数中手动设置`window`'s `jQuery`(and ) 属性，如下所示：`$`

```
(function () { window["jQuery"] = magic; }()); 
```

此外，实际发生的事情仍然有点不同。他们将`window`对象传递给 IIFE 的`window`参数。那就不必了`window`。理论上，它可以是您正在扩展的任何先前定义的对象。

```
var myApp = {};
(function (window, document) { window["jQuery"] = public_interface; }(myApp, document));
myApp.jQuery("..."); 
```

在构建类似于 jQuery 的库时，您可以这样做。如果您通常为任何大型库/应用程序命名（一个好主意），您可以在内部缩短名称，以使生活更轻松。

代替：

var NAMESPACED_AWESOME_APP_OF_DOOM = {}; NAMESPACED_AWESOME_APP_OF_DOOM.module1 = {};

您可以执行以下操作：

```
(function (namespace) {

    var ns = {};
    window[namespace] = ns;

    ns.module1 = {};
    ns.module2 = {};
    ns.service1 = function () {};

}("NAMESPACED_AWESOME_APP_OF_DOOM")); 
```

然后您可以在内部进行所有内部设置，一旦设置完成，您可以在全局范围内按名称引用应用程序。

在其他情况下，您可以为代码创建沙箱，以这种方式使用闭包，使用中介在组件之间来回发送消息。Nicholas Zakas 对此进行了几次很好的讨论。

最后，有时您只想完成一些工作，这与您的程序的其余部分 100% 无关，但仍然需要完成，都是一样的（例如进行兼容性检查并将结果绑定到 DOM 元素， a la Modernizr ... ...或设置只需要存在的cookie，或触发对分析软件的调用... ...等等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:13:28.203

在这个特定实例中，匿名函数仅用于防止 CarManager 被其他地方访问，即进入全局范围。

也特定于这个代码实例，它完全没有意义。CarManager 不能被任何其他代码使用。

查看您在评论中提供的链接，[http://addyosmani.com/resources/essentialjsdesignpatterns/book/#commandpatternjavascript](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#commandpatternjavascript)

据我所知，除了 CarManager.execute 位之外，记录的整个代码部分都将完全无法工作。尝试在匿名函数之外定义 CarManager.execute = ... 将失败，因为 CarManager 不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T02:56:07.760

我是OP。基于上面的讨论，在尝试解释作者想要表达的内容之后，我得出的结论是，以下代码可能是作者想要表达的内容。至少对我来说，这似乎是有道理的。

```
(function(){
    var CarManager = {
        requestInfo: function(model, id){
            /* blah blah */
        },
        buyVehicle: function(model, id){
            /* blah blah */
        },
        arrangeViewing: function( model, id ){
            /* blah blah */
        }
    };

    CarManager.execute = function(name){
        return CarManager[name] && CarManager[name].apply(CarManager, Array.prototype.slice(arguments, 1));
    }

    return CarManager;
}()); 
```

基本上，我添加了匿名函数执行返回 CarManager 对象文字的部分。另外，我在返回之前放置了 execute 方法（虽然我不太明白为什么它应该在原始 CarManager 对象之外，除了潜在的代码可读性）你怎么看？

（顺便说一下，这本书的网页版在这里：[http](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#commandpatternjavascript) ://addyosmani.com/resources/essentialjsdesignpatterns/book/#commandpatternjavascript ）

# ios - iPad - 横向在 iPad 上不起作用，但在模拟器中工作

> ID：12443936
> 
> 赞同：0
> 
> 时间：2012-09-16T02:10:05.843
> 
> 标签：ios, ipad

我们使用以下代码在横向模式下对齐屏幕之一

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:     
    (UIInterfaceOrientation)interfaceOrientation
    {
     return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
    } 
```

它在 5.1 模拟器（横向）中按预期显示，但
在 iPad 中以纵向模式显示。请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:44:59.127

这可能就是菲利普所指的问题。

然而，我注意到真实硬件的另一个问题——即使没有涉及 iOS 6——是排序略有不同。

*如果您在视图控制器完全处理自己的旋转之前*尝试从视图控制器访问模态视图控制器，则模态视图控制器将以纵向模式出现。在为它处理事件之前，第一个视图控制器还没有完全处理它自己的旋转。

换句话说，如果您尝试从视图控制器中的早期事件（例如`viewWillAppear`）中呈现模态视图控制器，它将始终以纵向模式显示。

要解决这个问题，不要立即显示视图控制器，只需使用块将其调度到主循环。

更改调用视图控制器的行，它可能看起来像这样：

```
[self performSegueWithIdentifier: @"firstRun" sender: self]; 
```

至：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self performSegueWithIdentifier: @"firstRun" sender: self];
}); 
```

如果您使用另一种方法来呈现新的视图控制器，请尝试使用相同的方法：将其包装`dispatch_async`到主队列中，以便稍后完成。

# asp.net - 动态扩展列表框行以适应数据源？

> ID：12443942
> 
> 赞同：0
> 
> 时间：2012-09-16T02:12:01.000
> 
> 标签：asp.net, listbox

我有一个列表框，我从我的 SQL DB 中的表中动态填充，我想动态地将列表框的行设置为表中的记录数量，因此不需要滚动。除了将该表信息添加到本地数据表中并计算其中的行数之外，还有一种简单的方法可以做到这一点吗？这是我绑定列表框的代码：

```
 List<ParameterList> Parameters = new List<ParameterList>();
    Parameters.Add(new ParameterList() { Name = "CategoryName", Value = CategoryName });

    lbCategory.DataSource = SQLHelper.GetDataByQuery("SELECT SectionID, SectionTitle FROM dbo.vwNavigationMenuItems WHERE CategoryName = @CategoryName ORDER BY MenuPosition ASC", Parameters);
    lbCategory.DataTextField = "SectionTitle";
    lbCategory.DataValueField = "SectionID";
    lbCategory.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:45:41.970

试试这个

```
System.Data.DataTable dt = SQLHelper.GetDataByQuery("SELECT SectionID, SectionTitle FROM dbo.vwNavigationMenuItems WHERE CategoryName = @CategoryName ORDER BY MenuPosition ASC", Parameters);
lbCategory.DataSource = dt;
...
...

lbCategory.Rows = dt.Rows.Count; 
```

或者绑定数据后可以试试

```
lbCategory.Rows = lbCategory.Items.Count; 
```

我不知道还有其他更简单的方法

# php - strtotime 混乱..？

> ID：12443945
> 
> 赞同：3
> 
> 时间：2012-09-16T02:12:35.700
> 
> 标签：php, date

怎么会

```
$a = "Thursday, 10 January, 2013"; 
```

当我这样做时给我**2012-01-12**

```
$b = date('Y-m-d', strtotime($a)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T02:19:49.730

[`strtotime()`](http://php.net/manual/en/function.strtotime.php)期望字符串是英文格式的日期。由于上述显然不是这样，它不会返回预期的结果。例如，以下内容将正确呈现：

```
$a = "January 10, 2013";
$b = date('Y-m-d', strtotime($a));
echo $b; 
```

# javascript - 运行 Python 脚本后如何在上一页添加照片

> ID：12443947
> 
> 赞同：0
> 
> 时间：2012-09-16T02:13:20.547
> 
> 标签：javascript, python, html

我一直在尝试在网页上工作，一些简单的事情，只是为了了解我的方向，因为当涉及到与网络相关的所有事情时，我是一个真正的新手。

我有一个带有表单的 HTML 主页，允许用户上传文件，一个执行上传的 Python 脚本，最后是一个 Javascript 文件，它从表单中获取数据并将其发送到 Python 脚本。

Javascript代码如下：

```
document.forms[0].onsubmit = function(ev){
    ev = ev || event;
    ev.cancelBubble = true;
    ev.returnValue = false;
}

if (window.XMLHttpRequest)
{
    // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else
{
    // code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

var formdata = new FormData();
formdata.append("fileobj", fileElem.filename); 
formdata.append("appearname", appearname);
formdata.append("appear", appear);

var xhr = new XMLHttpRequest();
xhr.open("POST", "upload.py");  
xhr.send(formdata);
xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        xmlDoc=xmlhttp.responseXML;
        var aux = JSON.parse( xmlhttp.responseXML );
        if ( {"estado" == "inserido"} )
        {
            img.src = aux.name;
            var img = new Image();
            img.src = fileElem.filename
            img.height = '100px' // por exemplo
            document.body.appendChild( img );
        }
    }
} 
```

不幸的是，这并没有按我的预期工作，因为它不会在表单下插入图像，而是只显示 Python 输出。

任何帮助将非常感激！

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:50:56.683

首先，您的表单中应该有一个名称，如下所示（这不是强制性的）：

```
<form name='test'>
    <input type='file' name='fileObj' />
    <button>submit</button>
</form> 
```

然后您可以使用 javascript 来“抓取”表单并将其“发送”到服务器（python 脚本），如下所示：

```
document.forms[ 'test' ].onsubmit = function( ev ) {
    ev = ev || event;
    ev.cancelBubble = true;
    ev.returnValue = false;

    var data = new FormData( );
    data.append( 'fileobj' , this[ 'fileobj' ].files[ 0 ] );

    if ( window.XMLHttpRequest ) xmlhttp = new XMLHttpRequest( );
    else xmlhttp = new ActiveXObject( "Microsoft.XMLHTTP" );

    xmlhttp.open( "POST" , "upload.py" , true );

    xmlhttp.onreadystatechange = function( ) {
        if ( xmlhttp.readyState == 4 && xmlhttp.status == 200 ) {
            var aux = JSON.parse( xmlhttp.responseText );
            if ( aux.estado == 'inserido' ) {
                var img = new Image();
                img.src = aux.fname;
                img.style.height = '100px';
                document.body.appendChild( img );
            }
        }
    }

    xmlhttp.send( data );
} 
```

您必须注意，javascript 代码中的内容相同。'this' 是表单，然后，当你这样做时['fileobj']，你“在”输入中，输入元素有一个包含用户要上传的文件的对象，然后你可以选择第一个：这个['fileobj'].files。更多，你想得很好，但是执行不好 :) 所有这些代码，都必须在函数 onsubmit 中。当用户单击表单中的按钮时，您希望将文件发送到服务器。在 onreadystatechange 中，考虑到 python 脚本发送带有以下信息的 JSON：{ 'estado' : 'inserido' , 'fname' : 'path/to/file/name.file' }，您可以验证响应（辅助)，对于键 'estado' 有一个值 'inserido'，

快速查看 python 脚本，你可以得到这个：

```
import cgi
import json
import os

try:
    import msvcrt
    msvcrt.setmode (0, os.O_BINARY)
    msvcrt.setmode (1, os.O_BINARY)
except ImportError:
    pass

form = cgi.FieldStorage()
fileElem = form['fileobj']

open( fileElem.filename , 'wb' ).write( fileElem.file.read() ) 

print "Content-type: application/json"
print
print json.dumps( { 'estado' : 'inserido' , 'fname' : fileElem.filename } ) 
```

在此，我没有对输入进行任何类型的验证，也没有写入文件......但是，重要的是，如果你不知道脚本将在哪里运行，你必须尝试这样做（你需要Windows 中的 msvcrt）。使用 cgi.FieldStorage() 您可以从 javascript 获取输入，form['fileobj'] 获取文件元素（注意，fileobj 是我在 javascript 中设置 formdata 的名称，而不是输入的名称表单），然后使用文件元素，您可以访问文件名（fileElem.filename）和文件本身（fileElem.file）。

我希望我有所帮助。

# python - python正则表达式通过列表的每个成员

> ID：12443960
> 
> 赞同：0
> 
> 时间：2012-09-16T02:16:46.140
> 
> 标签：python, regex, expression

从这两个列表中：

```
list_A = ["eyes", "clothes", "body" "etc"]
list_B = ["xxxx_eyes", "xxx_zzz", "xxxxx_bbbb_zzzz_clothes" ] 
```

我想用第二个列表中的那些对象填充第三个列表，前提是他的某些名称与第一个列表中的一个名称匹配。

在前面的示例中，第三个列表必须是：

```
["xxxx_eyes", "xxxxx_bbbb_zzzz_clothes"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T02:23:25.890

如果您想使用列表推导，这将起作用：

```
list_C = [word for word in list_B if any(test in word for test in list_A)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T02:31:49.587

如果您想为此使用正则表达式：

```
search = re.compile("|".join(map(re.escape, list_A))).search
result = filter(search, list_B) 
```

尽管在大多数情况下 Blender 的回答可能就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T02:35:20.640

```
In [1]: list_A = ["eyes", "clothes", "body" "etc"]

In [2]: list_B = ["xxxx_eyes", "xxx_zzz", "xxxxx_bbbb_zzzz_clothes" ]

In [7]: [x for x in list_B if any(y in list_A for y in x.split('_'))]
Out[7]: ['xxxx_eyes', 'xxxxx_bbbb_zzzz_clothes'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T14:49:32.563

最慢但最简单的是：

```
list_A = ["eyes", "clothes", "body" "etc"]
list_B = ["xxxx_eyes", "xxx_zzz", "xxxxx_bbbb_zzzz_clothes" ]

list_C=[]
for _ in list_A:
    for __ in list_B:
        if _ in __:
            list_C.append(__) 
```

# apache - .htaccess 在 IE 中无法正常工作

> ID：12443961
> 
> 赞同：0
> 
> 时间：2012-09-16T02:17:36.330
> 
> 标签：apache, .htaccess

我的 .htaccess 文件在 IE 中无法正常工作，它在 FireFox 和 Chrome 中运行良好，但在 IE 中无法加载图像，并且链接无法正常工作。CSS 工作正常，所有 PHP 接缝也能正常工作。

我很确定这与我需要从 url 中提取 2 个 GET 变量有关，因为当我只需要提取一个变量时它工作正常。无论如何，这是我的代码

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([^/]+)/([^/]+)/?$ /website/index.php?id=$1&c=$2 
```

请帮忙，我一直在寻找几个小时的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:59:52.393

> 除图像和链接外，一切正常，例如，假设基本 url 是 localhost/website/148/category，我单击一个链接应该带我到 localhost/website/149/category 它带我到 localhost/website/ 148/类别/149/类别。所以它只是添加到它接缝的 url 上。

这是一个相对/绝对的 URI 问题，与您的重写规则无关。使用`<base>`标签应该可以解决这个问题，但是[IE8 版本中存在错误](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/c51bb8b9-40ab-437b-a125-88b660f3e1ca/)，导致它在前面没有 FQDN 的情况下被忽略，例如：

```
<base href="http://localhost/website/"> 
```

（甚至不确定这是否能解决问题）。

是的，它需要在所有其他引用之前和`<head> </head>`标签内。解决此问题的唯一其他方法是将所有链接更改为绝对 URI 而不是相对链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:21:43.243

我看不出任何重写条件将如何依赖于浏览器..您的问题一定出在其他地方。

也许尝试从您的规则中删除前导 / ：

```
RewriteRule ^([^/]+)/([^/]+)/?$ /website/index.php?id=$1&c=$2 
```

# python - Python PyQt4 关闭应用程序

> ID：12443968
> 
> 赞同：-2
> 
> 时间：2012-09-16T02:19:51.607
> 
> 标签：python, dialog, qt4, python-2.7, pyqt4

我想知道，关闭对话框的最佳或首选方式是什么。假设我打开了主窗口、设置和帮助窗口。用户决定退出主窗口，那么如何拦截信号以及关闭打开的窗口的最佳方法是什么？

使用是否`dialogMain.close()`足够好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T02:29:36.093

您可以覆盖该`closeEvent`方法：

```
class YourApplication(QMainWindow):
  # ...

  def closeEvent(self, event):
    if condition:
      if QMessageBox.question(self, 'Your Application', 'Are you sure you want to exit?', QMessageBox.Yes, QMessageBox.No) == QMessageBox.Yes:
        # Do anything before the application closes

        event.accept()
      else:
        event.ignore() 
```

# jquery - 在约束值处停止 jQuery Mobile 滑块

> ID：12443969
> 
> 赞同：1
> 
> 时间：2012-09-16T02:20:22.350
> 
> 标签：jquery, jquery-mobile, slider, uislider

我有一个 jQuery Mobile 滑块，最小值为 0，最大值为 100，约束值为 35。如果滑块从 0 开始并且用户开始滑动滑块，我如何让滑块在 35 处停止?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T04:50:18.733

以下脚本在值为 35 处停止滑块：

```
$(document).on('change', '#slider-fill', function(e){
    if($("#slider-fill").val() > 35){
       $("#slider-fill").val(35);
       $("#slider-fill").next(".ui-slider").find("div").css("width","35%");
       $("#slider-fill").next(".ui-slider").find("a.ui-slider-handle").css("left","35%");
    }
}); 
```

您可以在下面找到一个工作示例：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Slider Stop</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
        <script>
            $(document).on('change', '#slider-fill', function(e){
                if($("#slider-fill").val() > 35){
                   $("#slider-fill").val(35);
                   $("#slider-fill").next(".ui-slider").find("div").css("width","35%");
                   $("#slider-fill").next(".ui-slider").find("a.ui-slider-handle").css("left","35%");
                }
            });
        </script>
    </head> 

    <body>
        <!-- /page -->
        <div data-role="page">
            <!-- /header -->
            <div data-role="header" data-theme="b">
                <h1>Slider stop</h1>
            </div>
            <!-- /content -->
            <div data-role="content">
                <label for="slider-fill">Input slider:</label>
                <input type="range" name="slider-fill" id="slider-fill" value="0" min="0" max="100" data-highlight="true" />
            </div>
        </div>
    </body>
</html> 
```

我希望这有帮助。

# python - 无法在 OSX 上导入 PyOpenCL（异常失败）

> ID：12443976
> 
> 赞同：0
> 
> 时间：2012-09-16T02:22:48.780
> 
> 标签：python, macos, osx-mountain-lion, pyopencl

如何让 OpenCL 在 Mac OSX 上的 Python 中加载？

输出

```
Chriss-MacBook-Pro:phoenix2-phoenix-2c83ee6 chris$ python opencl.py
[22:17:15] Python OpenCL Info v0.1
[22:17:15] Python Version: 2.7.2 64bit
[22:17:15] PyOpenCL Path: /Library/Python/2.7/site-packages/pyopencl-2012.1-py2.7-macosx-10.8-intel.egg/pyopencl
[22:17:15] Boost Python Version: Not Found
[22:17:15] Unable to load PyOpenCL! OpenCL not supported? 
```

测试脚本的源代码。（标记失败的行）

```
#!/usr/bin/python
import sys
import os
import time
from platform import architecture
from imp import find_module

timeformat = '%H:%M:%S'
def getTimestamp():
    return '[%s] ' % time.strftime(timeformat, time.localtime(time.time()))

def log(message):
    print getTimestamp() + str(message)

def getPythonVersion():
    info = sys.version_info
    return str(info[0]) + '.' + str(info[1]) + '.' + str(info[2])

def getPyOpenCLPath():
    try:
        file, pathname, descr = find_module('pyopencl')
    except:
        pathname = 'Not found'
    return str(pathname)

def getBoostVersion(input):
    try:
        contents = os.listdir(input)
    except:
        return 'Not Found'
    for i in range(len(contents)):
        if 'boost_python' in contents[i].lower():
            return contents[i]
    return 'Not Found'

path = getPyOpenCLPath()

#Display global information
log('Python OpenCL Info v0.1')
log('Python Version: ' + getPythonVersion() + ' ' + architecture()[0])
log('PyOpenCL Path: ' + path)
log('Boost Python Version: ' + getBoostVersion(path))

#Check for PyOpenCL not found
if path == 'Not Found':
    log('Exiting')
    sys.exit()

#Now we try to import PyOpenCL
# THIS IS WHERE THE FAILURE OCCURS !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
try:
    import pyopencl
    import pyopencl.version
except:
    log('Unable to load PyOpenCL! OpenCL not supported?')
    sys.exit()

#Continue printing 
log('PyOpenCL Version: ' + pyopencl.VERSION_TEXT)

#get platfroms
try:
    platforms = pyopencl.get_platforms()
except:
    log('Stupid bug')

# If no platforms exist then no OpenCL supporting devices are present
if len(platforms) == 0:
    log('No OpenCL platforms found!')
    sys.exit()

log('Listing platforms and devices:')
count = 0

# Iterate through platforms
for i,p in enumerate(platforms):

    # Display platform
    log('')
    log('[cl:' + str(i) + '] ' + p.name.replace('\x00','').strip())

    # Get devices
    devices = platforms[i].get_devices()

    # Make sure we don't callback for a platform if no devices found
    if len(devices) > 0:
        # Iterate through devices
        for j,d in enumerate(devices):
            count += 1
            log('       [cl:' + str(i) + ':' + str(j) + '] ' + d.name.replace('\x00','').strip())

log('')
log('This program will exit in 300 seconds...')
time.sleep(300) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T02:31:40.787

您的硬件是否支持 OpenCL？在某些情况下，我发现通过尝试运行构建和运行示例 C 程序来调试类似问题更容易。

# c# - CommandBarButton 图标变黑背景

> ID：12443977
> 
> 赞同：2
> 
> 时间：2012-09-16T02:23:10.493
> 
> 标签：c#, .net, outlook-addin, outlook-2007

我正在尝试制作 Outlook 2007 插件。为 CommandBarButton 设置图标时，图标的背景变为黑色。

![黑色背景命令BarButton](../Images/d97f1797c9085555030e8d25dc56db9f.png)

我正在使用的代码是：

```
private CommandBar _menuBar;

private void AddScheduleMeetingButton()
{
    var scheduleButton = (CommandBarButton)_menuBar
                .Controls.Add(MsoControlType.msoControlButton, missing, missing, 1, true);

    scheduleButton.BeginGroup = true;
    scheduleButton.Caption = ScheduleButtonCaption;
    scheduleButton.Picture = GetImage(Resources.schedule_meeting16);
    scheduleButton.Style = MsoButtonStyle.msoButtonIconAndCaption;
    scheduleButton.Click += UnirowScheduleButtonClick;
    scheduleButton.Visible = true;
} 
```

使用 Microsoft 提供的 AxHost 方法的 GetImage() 函数：

```
private IPictureDisp GetImage(Icon newIcon)
{
    IPictureDisp tempImage = null;
    try
    {
        var newImageList = new ImageList();
        newImageList.Images.Add(newIcon);

        tempImage = MyHost.GetIPictureDispFromPicture(newImageList.Images[0]);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
    return tempImage;
} 
```

我在做什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-10T14:57:45.987

I was able to do this much easier. First create a class

```
public class IconConverter : System.Windows.Forms.AxHost
    {
        private IconConverter()
            : base(string.Empty)
        {
        }

        public static stdole.IPictureDisp GetIPictureDispFromImage(System.Drawing.Image image)
        {

            return (stdole.IPictureDisp)GetIPictureDispFromPicture(image);
        }
    } 
```

Secondly, we need to create a mask image

```
private stdole.IPictureDisp GetPictureMask(Bitmap img) {

            if (img.IsNotNull()) {

                int rgb;
                Color c;

                for (int y = 0; y < img.Height; y++)
                    for (int x = 0; x < img.Width; x++) {
                        c = img.GetPixel(x, y);
                        Color m = Color.Empty;

                        if (c.B == 0 && c.R == 0 && c.G == 0) {
                            m = Color.White;                            
                        }
                        else {
                            m = Color.Black;
                        }

                        img.SetPixel(x, y, Color.FromArgb(c.A, m.R, m.G, m.B));
                    }

                return IconConverter.GetIPictureDispFromImage(img);
            }

            return null;
        } 
```

at the end of the assign icons to a button

```
commandBarButton.Picture = IconConverter.GetIPictureDispFromImage(orginalImage);
commandBarButton.Mask = GetPictureMask(orginalImage); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:05:34.797

有一个特殊的解决方法来支持`CommandBarButton`Office 中的自定义图标透明度。**有关如何**利用 Win32 API为 Office 命令栏按钮创建透明图片的信息，请参阅[MS KB288771 。](http://support.microsoft.com/kb/288771)

 **### 复制透明的 Office 工具栏图片

1.  使用 Microsoft Paint（*或第三方图像编辑器*）创建具有您选择的设计的 256 色位图。图像不应大于 16 像素宽和 16 像素高。
2.  用洋红色 (RGB(255, 0, 255)) 填充您想要透明的位图的所有区域，然后将位图另存为`C:\MyTestPic.bmp`.
3.  启动 Visual Basic 并创建一个新的标准项目。默认情况下创建 Form1。
4.  将一个按钮添加到 Form1，然后将以下代码添加到按钮的`Click`事件中：

```
Private Sub Command1_Click()
   Dim oPic As StdPicture
   Dim oWord As Object
   Dim oCommandBar As Object
   Dim oButton As Object

 ' Load the picture (.bmp file) to use for the button image.
   Set oPic = LoadPicture("C:\MyTestPic.bmp")

 ' Start Microsoft Word for Automation and create a new
 ' toolbar and button to test the PasteFace method.
   Set oWord = CreateObject("Word.Application")
   oWord.Visible = True

   Set oCommandBar = oWord.CommandBars.Add("Test Bar")
   oCommandBar.Visible = True

   Set oButton = oCommandBar.Controls.Add(1)
   With oButton
      .Caption = "Test Button"
      .Style = 1

    ' Here we create a mask based on the image and put both
    ' the image and the mask on the clipboard. Any color areas with
    ' magenta will be transparent.
      CopyBitmapAsButtonFace oPic, &HFF00FF

    ' PasteFace will now add the image with transparency.
      .PasteFace

      .Visible = True
   End With

   MsgBox "You have a new button with a transparent picture.", _
         vbMsgBoxSetForeground

   Set oButton = Nothing

   If MsgBox("Do you want to delete the toolbar?", _
        vbYesNo Or vbQuestion) = vbYes Then
      oCommandBar.Delete
   End If

   Set oCommandBar = Nothing
   Set oWord = Nothing
End Sub 
```

(5)。在项目菜单上，单击添加模块，然后将以下代码粘贴到新模块的代码窗口中：

```
Option Explicit

Public Type BITMAPINFOHEADER '40 bytes
   biSize As Long
   biWidth As Long
   biHeight As Long
   biPlanes As Integer
   biBitCount As Integer
   biCompression As Long
   biSizeImage As Long
   biXPelsPerMeter As Long
   biYPelsPerMeter As Long
   biClrUsed As Long
   biClrImportant As Long
End Type

Public Type BITMAP
   bmType As Long
   bmWidth As Long
   bmHeight As Long
   bmWidthBytes As Long
   bmPlanes As Integer
   bmBitsPixel As Integer
   bmBits As Long
End Type

' ===================================================================
'   GDI/Drawing Functions (to build the mask)
' ===================================================================
Private Declare Function GetDC Lib "user32" (ByVal hwnd As Long) As Long
Private Declare Function ReleaseDC Lib "user32" _
  (ByVal hwnd As Long, ByVal hdc As Long) As Long
Private Declare Function DeleteDC Lib "gdi32" (ByVal hdc As Long) As Long
Private Declare Function CreateCompatibleDC Lib "gdi32" _
  (ByVal hdc As Long) As Long
Private Declare Function CreateCompatibleBitmap Lib "gdi32" _
  (ByVal hdc As Long, ByVal nWidth As Long, ByVal nHeight As Long) As Long
Private Declare Function CreateBitmap Lib "gdi32" _
  (ByVal nWidth As Long, ByVal nHeight As Long, ByVal nPlanes As Long, _
   ByVal nBitCount As Long, lpBits As Any) As Long
Private Declare Function SelectObject Lib "gdi32" _
  (ByVal hdc As Long, ByVal hObject As Long) As Long
Private Declare Function DeleteObject Lib "gdi32" _
  (ByVal hObject As Long) As Long
Private Declare Function GetBkColor Lib "gdi32" _
  (ByVal hdc As Long) As Long
Private Declare Function SetBkColor Lib "gdi32" _
  (ByVal hdc As Long, ByVal crColor As Long) As Long
Private Declare Function GetTextColor Lib "gdi32" _
  (ByVal hdc As Long) As Long
Private Declare Function SetTextColor Lib "gdi32" _
  (ByVal hdc As Long, ByVal crColor As Long) As Long
Private Declare Function BitBlt Lib "gdi32" _
  (ByVal hDestDC As Long, ByVal x As Long, ByVal y As Long, _
   ByVal nWidth As Long, ByVal nHeight As Long, ByVal hSrcDC As Long, _
   ByVal xSrc As Long, ByVal ySrc As Long, ByVal dwRop As Long) As Long
Private Declare Function CreateHalftonePalette Lib "gdi32" _
  (ByVal hdc As Long) As Long
Private Declare Function SelectPalette Lib "gdi32" _
  (ByVal hdc As Long, ByVal hPalette As Long, _
   ByVal bForceBackground As Long) As Long
Private Declare Function RealizePalette Lib "gdi32" _
  (ByVal hdc As Long) As Long
Private Declare Function OleTranslateColor Lib "oleaut32.dll" _
  (ByVal lOleColor As Long, ByVal lHPalette As Long, _
   lColorRef As Long) As Long
Private Declare Function GetDIBits Lib "gdi32" _
  (ByVal aHDC As Long, ByVal hBitmap As Long, ByVal nStartScan As Long, _
   ByVal nNumScans As Long, lpBits As Any, lpBI As Any, _
   ByVal wUsage As Long) As Long
Private Declare Function GetObjectAPI Lib "gdi32" Alias "GetObjectA" _
  (ByVal hObject As Long, ByVal nCount As Long, lpObject As Any) As Long

' ===================================================================
'   Clipboard APIs
' ===================================================================
Private Declare Function OpenClipboard Lib "user32" _
  (ByVal hwnd As Long) As Long
Private Declare Function CloseClipboard Lib "user32" () As Long
Private Declare Function RegisterClipboardFormat Lib "user32" _
  Alias "RegisterClipboardFormatA" (ByVal lpString As String) As Long
Private Declare Function GetClipboardData Lib "user32" _
  (ByVal wFormat As Long) As Long
Private Declare Function SetClipboardData Lib "user32" _
  (ByVal wFormat As Long, ByVal hMem As Long) As Long
Private Declare Function EmptyClipboard Lib "user32" () As Long
Private Const CF_DIB = 8

' ===================================================================
'   Memory APIs (for clipboard transfers)
' ===================================================================
Private Declare Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" _
  (pDest As Any, pSource As Any, ByVal cbLength As Long)
Private Declare Function GlobalAlloc Lib "kernel32" _
  (ByVal wFlags As Long, ByVal dwBytes As Long) As Long
Private Declare Function GlobalFree Lib "kernel32" _
  (ByVal hMem As Long) As Long
Private Declare Function GlobalLock Lib "kernel32" _
  (ByVal hMem As Long) As Long
Private Declare Function GlobalSize Lib "kernel32" _
  (ByVal hMem As Long) As Long
Private Declare Function GlobalUnlock Lib "kernel32" _
  (ByVal hMem As Long) As Long
Private Const GMEM_DDESHARE = &H2000
Private Const GMEM_MOVEABLE = &H2

' ===================================================================
'  CopyBitmapAsButtonFace
'
'  This is the public function to call to create a mask based on the
'  bitmap provided and copy both to the clipboard. The first parameter
'  is a standard VB Picture object. The second should be the color in
'  the image you want to be made transparent.
'
'  Note: This code sample does limited error handling and is designed
'  for VB only (not VBA). You will need to make changes as appropriate
'  to modify the code to suit your needs.
'
' ===================================================================
Public Sub CopyBitmapAsButtonFace(ByVal picSource As StdPicture, _
  ByVal clrMaskColor As OLE_COLOR)
   Dim hPal As Long
   Dim hdcScreen As Long
   Dim hbmButtonFace As Long
   Dim hbmButtonMask As Long
   Dim bDeletePal As Boolean
   Dim lMaskClr As Long

 ' Check to make sure we have a valid picture.
   If picSource Is Nothing Then GoTo err_invalidarg
   If picSource.Type <> vbPicTypeBitmap Then GoTo err_invalidarg
   If picSource.Handle = 0 Then GoTo err_invalidarg

 ' Get the DC for the display device we are on.
   hdcScreen = GetDC(0)
   hPal = picSource.hPal
   If hPal = 0 Then
      hPal = CreateHalftonePalette(hdcScreen)
      bDeletePal = True
   End If

 ' Translate the OLE_COLOR value to a GDI COLORREF value based on the palette.
   OleTranslateColor clrMaskColor, hPal, lMaskClr

 ' Create a mask based on the image handed in (hbmButtonMask is the result).
   CreateButtonMask picSource.Handle, lMaskClr, hdcScreen, _
          hPal, hbmButtonMask

 ' Let VB copy the bitmap to the clipboard (for the CF_DIB).
   Clipboard.SetData picSource, vbCFDIB

 ' Now copy the Button Mask.
   CopyButtonMaskToClipboard hbmButtonMask, hdcScreen

 ' Delete the mask and clean up (a copy is on the clipboard).
   DeleteObject hbmButtonMask
   If bDeletePal Then DeleteObject hPal
   ReleaseDC 0, hdcScreen

Exit Sub
err_invalidarg:
   Err.Raise 481 'VB Invalid Picture Error
End Sub

' ===================================================================
'  CreateButtonMask -- Internal helper function
' ===================================================================
Private Sub CreateButtonMask(ByVal hbmSource As Long, _
  ByVal nMaskColor As Long, ByVal hdcTarget As Long, ByVal hPal As Long, _
  ByRef hbmMask As Long)

   Dim hdcSource As Long
   Dim hdcMask As Long
   Dim hbmSourceOld As Long
   Dim hbmMaskOld As Long
   Dim hpalSourceOld As Long
   Dim uBM As BITMAP

 ' Get some information about the bitmap handed to us.
   GetObjectAPI hbmSource, 24, uBM

 ' Check the size of the bitmap given.
   If uBM.bmWidth < 1 Or uBM.bmWidth > 30000 Then Exit Sub
   If uBM.bmHeight < 1 Or uBM.bmHeight > 30000 Then Exit Sub

 ' Create a compatible DC, load the palette and the bitmap.
   hdcSource = CreateCompatibleDC(hdcTarget)
   hpalSourceOld = SelectPalette(hdcSource, hPal, True)
   RealizePalette hdcSource
   hbmSourceOld = SelectObject(hdcSource, hbmSource)

 ' Create a black and white mask the same size as the image.
   hbmMask = CreateBitmap(uBM.bmWidth, uBM.bmHeight, 1, 1, ByVal 0)

 ' Create a compatble DC for it and load it.
   hdcMask = CreateCompatibleDC(hdcTarget)
   hbmMaskOld = SelectObject(hdcMask, hbmMask)

 ' All you need to do is set the mask color as the background color
 ' on the source picture, and set the forground color to white, and
 ' then a simple BitBlt will make the mask for you.
   SetBkColor hdcSource, nMaskColor
   SetTextColor hdcSource, vbWhite
   BitBlt hdcMask, 0, 0, uBM.bmWidth, uBM.bmHeight, hdcSource, _
       0, 0, vbSrcCopy

 ' Clean up the memory DCs.
   SelectObject hdcMask, hbmMaskOld
   DeleteDC hdcMask

   SelectObject hdcSource, hbmSourceOld
   SelectObject hdcSource, hpalSourceOld
   DeleteDC hdcSource

End Sub

' ===================================================================
'  CopyButtonMaskToClipboard -- Internal helper function
' ===================================================================
Private Sub CopyButtonMaskToClipboard(ByVal hbmMask As Long, _
  ByVal hdcTarget As Long)
   Dim cfBtnFace As Long
   Dim cfBtnMask As Long
   Dim hGMemFace As Long
   Dim hGMemMask As Long
   Dim lpData As Long
   Dim lpData2 As Long
   Dim hMemTmp As Long
   Dim cbSize As Long
   Dim arrBIHBuffer(50) As Byte
   Dim arrBMDataBuffer() As Byte
   Dim uBIH As BITMAPINFOHEADER
   uBIH.biSize = 40

 ' Get the BITMAPHEADERINFO for the mask.
   GetDIBits hdcTarget, hbmMask, 0, 0, ByVal 0&, uBIH, 0
   CopyMemory arrBIHBuffer(0), uBIH, 40

 ' Make sure it is a mask image.
   If uBIH.biBitCount <> 1 Then Exit Sub
   If uBIH.biSizeImage < 1 Then Exit Sub

 ' Create a temp buffer to hold the bitmap bits.
   ReDim Preserve arrBMDataBuffer(uBIH.biSizeImage + 4) As Byte

 ' Open the clipboard.
   If Not CBool(OpenClipboard(0)) Then Exit Sub

 ' Get the cf for button face and mask.
   cfBtnFace = RegisterClipboardFormat("Toolbar Button Face")
   cfBtnMask = RegisterClipboardFormat("Toolbar Button Mask")

 ' Open DIB on the clipboard and make a copy of it for the button face.
   hMemTmp = GetClipboardData(CF_DIB)
   If hMemTmp <> 0 Then
      cbSize = GlobalSize(hMemTmp)
      hGMemFace = GlobalAlloc(&H2002, cbSize)
      If hGMemFace <> 0 Then
         lpData = GlobalLock(hMemTmp)
         lpData2 = GlobalLock(hGMemFace)
         CopyMemory ByVal lpData2, ByVal lpData, cbSize
         GlobalUnlock hGMemFace
         GlobalUnlock hMemTmp

         If SetClipboardData(cfBtnFace, hGMemFace) = 0 Then
            GlobalFree hGMemFace
         End If

      End If
   End If

 ' Now get the mask bits and the rest of the header.
   GetDIBits hdcTarget, hbmMask, 0, uBIH.biSizeImage, _
        arrBMDataBuffer(0), arrBIHBuffer(0), 0

 ' Copy them to global memory and set it on the clipboard.
   hGMemMask = GlobalAlloc(&H2002, uBIH.biSizeImage + 50)
   If hGMemMask <> 0 Then
         lpData = GlobalLock(hGMemMask)
         CopyMemory ByVal lpData, arrBIHBuffer(0), 48
         CopyMemory ByVal (lpData + 48), _
                       arrBMDataBuffer(0), uBIH.biSizeImage
         GlobalUnlock hGMemMask

         If SetClipboardData(cfBtnMask, hGMemMask) = 0 Then
            GlobalFree hGMemMask
         End If

   End If

 ' We're done.
   CloseClipboard

End Sub 
```

(6)。按 F5 运行 Visual Basic 应用程序。单击命令按钮使 Word 自动化，添加新的工具栏和按钮，并粘贴具有透明度的位图图像。**

# css - 让一个 Div 占用所有可用的垂直空间？

> ID：12443983
> 
> 赞同：7
> 
> 时间：2012-09-16T02:25:01.897
> 
> 标签：css

我正在尝试做一个看起来像这样的布局： ![在此处输入图像描述](../Images/94819087b6f80e6b089ad10a9927ec47.png)

顶部和底部都有一个定义的高度，但是我希望中间的两个左/右部分占据所有可用的垂直空间。这是我到目前为止所得到的。

[http://jsfiddle.net/xTh5f/2/](http://jsfiddle.net/xTh5f/2/)

我将中间部分设置为精确的 500 像素作为展示，但正如你所看到的，我还弄乱了中间的右部分和右下部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T02:47:24.810

你在谈论这样的事情：

[全屏](http://jsfiddle.net/xTh5f/4/embedded/result/)（源链接如下）

```
html, body {
    height: 100%;
    width: 100%;
    padding: 0;
    margin: 0;;
    color: white;
}
#wrapper {
    display: table;
    width: 100%;
    height: 100%;
}
#wrapper > div {
    display: table-row;
}
#wrapper > div > div {
    display: table-cell;
}
#top,
#bottom {
    height: 50px;
}
#wrapper > div > #topleft,
#wrapper > div > #middleleft,
#wrapper > div > #bottomleft {
    width: 300px;
}
#wrapper > div > #middleleft {
    background: #23A9E0;
}
#wrapper > div > #middleright {
    background: #39E023;
}
#wrapper > div > #topright,
#wrapper > div > #bottomright {
    background: #208D11;
}
#wrapper > div > #topleft,
#wrapper > div > #bottomleft {
    background: #092A7C;
} 
```

[http://jsfiddle.net/xTh5f/4/](http://jsfiddle.net/xTh5f/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T02:44:30.940

给你：http: [//jsfiddle.net/xTh5f/3/](http://jsfiddle.net/xTh5f/3/)

我的变化：

html, body, #wrapper, #middle, #middleleft, #middleright 被赋予'高度：100%'

接下来，#middleleft 被赋予 'float: left' 和 #middleright 'overflow; 隐';

请参阅： http: [//www.stubbornella.org/content/2009/07/23/overflow-a-secret-benefit/](http://www.stubbornella.org/content/2009/07/23/overflow-a-secret-benefit/)

# iphone - 指定图像到 4 英寸 iOS 设备

> ID：12443987
> 
> 赞同：3
> 
> 时间：2012-09-16T02:26:11.803
> 
> 标签：iphone, xcode, ios6

我在更新我的应用程序以兼容 3.5' 和 4.0' 显示器（iPhone 5）时遇到了一些麻烦。当我将图形（png 图像）添加到我的视图时，如果设备是 3.5' 显示器，一切都会正确显示，但是当我启动时4.0' 设备中的视图图像保持与 3.5' 英寸相同（例如：myimage@2x.png - 640x960px）。那么当设备显示为 4.0' 时如何更改图像以便显示 640x1136px 图像？

更清楚：

1.  显示 = 320x480px => 我的 image.png
2.  显示 = 640x960px => myimage@2x.png
3.  显示 = **640x1136px** => myimage {**如何识别此分辨率**} .png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T03:24:03.123

只需在应用程序摘要的启动屏幕框中拖动要使用的图像即可。也许在 IB 中将窗口大小更改为 4.0。休息应该是魔法。

还要检查这个[iOS 6 应用程序 - 如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T09:21:22.723

这是一个通过调整 UIImage 提供解决方案的博客文章： [http](http://angelolloqui.com/blog/20-iPhone5-image-loading)`imageNamed` : //angelolloqui.com/blog/20-iPhone5-image-loading

这不是我的，我只是在这里发布它，以防有人在找到该帖子之前发现这个问题（比如我）。

当然，您的应用程序可能会因为在框架类上使用方法调配而被拒绝。

# python - 让 pylint 容忍请求

> ID：12443988
> 
> 赞同：3
> 
> 时间：2012-09-16T02:26:21.770
> 
> 标签：python, pylint, python-requests

当我测试一个使用[Requests](http://docs.python-requests.org/en/latest/index.html)的模块时，pylint 很合适，并声称我使用[的 Request 对象的各种成员](http://docs.python-requests.org/en/latest/api/#main-interface)不存在。我怎样才能解决这个问题？我已经使用 --generated-members=objects 选项运行 pylint。

例如，这段代码运行良好：

```
import requests

response = requests.get('https://github.com/timeline.json')

print response.content 
```

但是 pylint 声称该字段不存在：

> ID:E1103 “请求”实例没有“内容”成员（但无法推断某些类型）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T14:20:11.643

`pylint`可以配置警告和错误消息。

首先，您可以编写 a`${HOME}/.pylintrc`来禁用所有 pylint 检查的某些消息。`--generate-rc-file`您可以使用该选项生成此文件的默认版本。（有关更多信息，请参阅[此问题）。](https://stackoverflow.com/questions/4341746/how-do-i-disable-a-pylint-warning)

您还可以在分析的源中进行配置。例如在文件的开头放置一些注释。这将禁用整个文件的消息。注释的格式为：`#pylint: disable=warning-code`，“警告代码”是[此处](http://pylint-messages.wikidot.com/all-codes)找到的列表之一。

您还可以在本地禁用消息，将注释放在语句/表达式之前或旁边。

例如，这会禁用函数内部代码的“C0322”警告：

```
def my_func():
    #C0322 -> no space between operand and operator
    #pylint: disable=C0322
    return a+b 
```

将注释放在右侧会为单行代码禁用它：

```
def my_func():
   return a+b  #pylint: disable=C0322 
```

我认为在您的情况下，您可以在使用 的函数的开头添加评论`request`，或者，如果您不多次访问它，您可以在语句的右侧添加评论。

# symfony - Symfony 2.1。如何以 12 小时 am/pm 格式显示 single_text 时间字段？

> ID：12443989
> 
> 赞同：2
> 
> 时间：2012-09-16T02:26:22.680
> 
> 标签：symfony, symfony-2.1

我的表单上有一个时间字段，小部件设置为“single_text”。

我的美国用户需要 12 小时上午/下午格式。

[http://symfony.com/doc/current/reference/forms/types/time.html#widget](http://symfony.com/doc/current/reference/forms/types/time.html#widget)

虽然这不是很明显，但它接受下午 2:15 的输入，但如果表单由于另一个字段上的验证错误或稍后打开以编辑现有记录而返回，那么它显示 14:15 这当然是正确的，但可能是令人反感。

如何让它显示下午 2:15？我没有看到这样做的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T07:50:34.303

好吧，事实证明这比应该的要难。问题是 Time 表单类型不允许您像 Date 表单类型那样指定格式，并且它使用的格式是 H:i。是的，24 小时制:-(

因此，唯一的解决方案是构建您自己的使用 h:i 格式的表单类型。您可以在此处找到有关如何构建自己的表单类型的说明：

[http://symfony.com/doc/2.1/cookbook/form/create_custom_field_type.html](http://symfony.com/doc/2.1/cookbook/form/create_custom_field_type.html)

然后，您可以使用 Time 表单类型作为表单类型的基础，只需更改它使用的格式。时间表单类型可以在这里找到：

```
/Symfony/Component/Form/Extension/Core/Type/TimeType.php 
```

# ios - UITableView 更改时的通知

> ID：12443990
> 
> 赞同：0
> 
> 时间：2012-09-16T02:26:36.687
> 
> 标签：ios, cocoa-touch, uitableview

我经常有一个`UITableViewController`带有编辑按钮的按钮，我喜欢在表格中没有行时禁用它。为了保持同步，每次发生可能会更新它的事情时，我都会启用/禁用该按钮`dataSource`- 添加第一行，删除最后一行，in`viewDidLoad`等。每当我添加一些可能影响表格内容的新功能时，我必须记住合并这个逻辑。

是否有一些`UITableView`我可以用来简化这一点的代表？一种知道表（或它的`dataSource`）何时被修改的方法，我可以在其中检查表中的项目数`dataSource`并相应地启用/禁用。

或者，任何其他方法都将受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T02:34:33.063

你*是*数据源。因此，如果您想知道，您确实知道数据源何时发生变化。换句话说，您遇到此问题的原因是您将模型（在模型-视图-控制器架构中）视为外星人。相反，将模型视为您自己的东西。负责你的模型。例如，模型是数组吗？然后将其包装在您自己的类中，必须向该类提供更改数组的所有命令。这样，它可以在被告知更改数组时发出通知。

在某些情况下，也可以使用 Key-Value Observing 在某些情况发生变化时得到通知，您可以查看它，但是对于像数组和字典这样的原语，这可能会比它的价值更麻烦。同样，您可能更乐意将模型存储包装在自己的类中，您可以通过 KVO 管理其可观察性。

# microsoft-metro - Metro/Windows 应用商店应用程序：不能在 ControlTemplate 中使用前台作为 TemplateBinding 源？

> ID：12443998
> 
> 赞同：1
> 
> 时间：2012-09-16T02:30:15.540
> 
> 标签：microsoft-metro, controltemplate, foreground, templatebinding, coloranimation

我想使用我的控件的 Foreground 值作为 ControlTemplate 中 VisualState ColorAnimation 的源。

我的模板定义看起来主要像 ToggleButton 的标准模板，带有一些 mods（标记为 <<<.....>>>）：

```
<Style TargetType="ToggleButton>
  <Setter .../>
  ...
  <<< <Setter Property="Foreground" Value="#FF000000"/> >>>
  ...
  <Setter .../>
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="ToggleButton">
        <Grid>
          <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="CommonStates">
              <VisualState .../>
              <VisualState x:Name="PointerOver">
                <Storyboard>
                  <ColorAnimation Duration="0" Storyboard.Target="BackgroundGradient" Storybord.TargetProperty="(Rectangel.Fill).(GradientBrush.GradientStop)[1].(GradientStopColor)" <<< To="{Binding Foreground, RelativeSource={RelativeSource TemplatedParent}}" >>> />
                </Storyboard>
              </VisualState>
      ...
    ...
  ...
</Style>
...
...
<ToggleButton <<< Foreground="#FFFF0000" >>> ...../> 
```

所以我希望看到动画使用设置的前景色（#FFFF0000）作为鼠标悬停动画的一部分，但它什么也没做。当我在动画定义中写 To="#FFFF0000" 时，我得到了预期的结果，但我想保持动画颜色动态并且对于我的应用程序中的每个 ToggleButton 都不同。

知道如何解决这个问题吗？

请！

编辑：在尝试通过向 ContentPresenter 添加一个带有 LinearGradientBrush 的新矩形来实现与上述类似的效果之后，其中一个 GradientStop 应该绑定到 {TemplateBinding Foreground}，我现在收到一个错误，可能会启发我的问题“对象类型“Windows.UI.xaml.DependencyProperty”无法转换为类型“System.Windows.DependencyProperty”。” 看起来 {TemplateBinding ...} 会产生错误类型的 DependencyProperty 或 GradientStop 预计 Windows 应用商店应用程序中的类型错误。然而！有没有办法通过 XAML 中的显式类型转换或任何其他解决方法来克服这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:14:00.077

所以，我终于自己解决了。

收到错误消息后（请参阅原始帖子的“编辑”），我尝试制作一个合适的转换器，现在我可以踢自己了，因为没有看到明显的！

它与 WinRT 或 TemplateBinding 或 Windows.UI.Xaml <-> 和 System-Windows 对象之间的不兼容性无关。

我只是没有意识到 Foreground 是 Brush 类型（在我的例子中是 SolidColorBrush），而 GradientStopColor 需要颜色！

一旦我创建了 BrushToColorConverter 并将其与 RelativeSource 绑定结合使用（因为 TemplateBinding 不允许转换器），它就起作用了。

```
 XAML:
<Page.Resources>
  <local:BrushToColorConverter x:Key="Brush2Color" DefaultOpacity="1.0"/>
</Page.Resources>
...
<ColorAnimation Duration="0" 
                Storyboard.TargetName="BackgroundGradient"
                Storyboard.TargetProperty="(Rectangle.Fill).(GradientBrush.GradientStops)[1].(GradientStop.Color)" 
                To="{Binding RelativeSource={RelativeSource Mode=TemplatedParent},
                     Path=Foreground, 
                     Converter={StaticResource Brush2Color}, 
                     ConverterParameter=0.5}"
/>

CodeBehind:
public class BrushToColorConverter : IValueConverter
{
  private double defaultOpacity = 1;
  public double DefaultOpacity
  {
    set { defaultOpacity = value; }
  }

  public object Convert(object value, Type targetType, object parameter, string culture)
  {
    SolidColorBrush brush = value as SolidColorBrush;
    double opacity;

    if (!Double.TryParse((string)parameter, out opacity))
      opacity = defaultOpacity;

    if (brush == null)
      return Colors.Transparent;
    else
      return Color.FromArgb((byte)(255.0 * brush.Opacity * opacity), 
                            brush.Color.R, 
                            brush.Color.G, 
                            brush.Color.B
                           );
  }

  public object ConvertBack(object value, Type targetType, object parameter, string culture)
  {
    return null;
  }
} 
```