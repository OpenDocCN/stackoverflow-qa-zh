# StackOverflow 问答 10835000-10835999

# cocoa - initWithNibName 调用了两次或加载了错误的 xib

> ID：10835000
> 
> 赞同：0
> 
> 时间：2012-05-31T13:51:08.377
> 
> 标签：cocoa, xib, init, nsviewcontroller

我正在编写一个 Cocoa 应用程序，并希望该应用程序作为一种向导工作。因此，在主窗口中，我有一个自定义视图，它与用户交互，并在用户逐步完成向导的各个阶段时从登录屏幕更改为设备激活屏幕。我目前已经覆盖了 WizardViewController 的 awakeFromNib 方法：

```
- (void)awakeFromNib{
   //If no redirect request save, add first view: ID Login
   NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
   NSString *tokenRequest = [defaults objectForKey:@"redirectRequestToken"];
   if (!tokenRequest){
       SignInWithIDViewController *signInViewController = [[SignInWithIDViewController alloc] initWithNibName:@"SignInWithIDViewController" bundle:nil];
       [wizardView addSubview:[signInViewController view]];
   } else {
    NSLog(@"Have already logged in.");
   }
} 
```

照原样，SignInIDViewController 中的 initWithNibName 被调用了两次，一次是由我显式调用，另一次是在加载视图时（可能是通过 loadView）。但是，如果我只是调用 init，那么 initWithNib 名称只会调用一次，但会加载错误的 xib 文件（属于 DeviceActivationViewController 类）。我似乎无法弄清楚我做错了什么，因为 signInViewController 不应该被初始化两次，但我需要在 IB 中显示正确的 xib 文件。

我目前在此类中唯一不是用户界面 IBAction 的方法是生成的 initWithNibName 方法加上添加的 NSLog 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:12:35.343

我认为在 IB（蓝色立方体）中创建对象并在代码中实例化它们是问题所在。如果您在 IB 中为它们创建了对象，那么它们将在 awakeFromNib 中实例化，您也不应该在代码中对它们调用 alloc init ——这将创建一个新实例。

我在 OSX 中使用视图控制器方面没有很多经验，但您似乎无法将 IBActions 连接到视图控制器（作为文件的所有者）。我使它工作的方式是子类化自定义视图（当您添加视图控制器时为您创建），将该视图的类更改为您的新子类，并将操作方法​​放入该类中。看起来这应该由视图控制器处理，但我认为它不起作用与视图控制器不在 OSX 的响应者链中有关（而我认为它在 iOS 中）。

编辑后：在绕道内存管理问题之后，我想我找到了最好的方法。您可以并且可能应该（以符合 Apple 的 MVC 范例）将按钮方法放在视图控制器类中，而不是像我上面所说的那样放在视图中。您实际上可以将 IBActions 连接到视图控制器（作为文件的所有者），您只需要确保在代码中实例化它时保留视图控制器。为此，您需要在要在其中实例化 SignInViewController 类的任何类中将 signInViewController 设为属性，并在属性声明中使用“retain”。那么您不需要（也不应该）在 IB 中创建任何蓝色立方体。

# python - OpenSSH 公钥不适用于 Cygwin

> ID：10835002
> 
> 赞同：2
> 
> 时间：2012-05-31T13:51:11.457
> 
> 标签：python, windows, permissions, ssh, chmod

我在使用 OpenSSH for Windows 使用公钥身份验证时遇到问题。我已经生成了密钥对并将密钥正确传输到了远程服务器，但是当我在 Windows 上使用 ssh 时，它一直提示输入密码。我将相同的私钥转移到我的 mac 并出现了一个错误，即权限太开放 (644)，除非将其设置为 600，否则将被忽略。“chmod 600 id_rsa”和繁荣，它工作。但是，我似乎无法找到一种通过脚本在 Windows 上更改此设置的方法，并且我无法使用 gui 进行更改。

必须有一个简单的方法来做到这一点吗？是否有内置的 Windows 命令？我目前正在使用 XP，但需要它才能在 vista 和 7 上工作。

**Edit3：**我放弃了 FAT32 支持并下载了完整的 cygwin 安装，只是为了帮助诊断问题，并使用 chmod 600 设置权限（幸运的是，它设置了 Windows 等效项）。还是失败了。所以我想问题不是权限，而是导致密钥失败的其他原因。

**EDIT2：** 我设法找到了一个可以满足我需要的 cacls 命令，但它显然只能在 NTFS 文件系统上工作，我需要支持 FAT32。

**Edit1**：当我在 3x 详细模式下运行 openSSH 时，我得到的是：

```
OpenSSH_3.8.1p1, OpenSSL 0.9.7d 17 Mar 2004
debug2: ssh_connect: needpriv 0
debug1: Connecting to SERVER.NAME.HERE.CA [134.153.48.1] port 22.
debug1: Connection established.
debug1: identity file /home/jtg733/.ssh/identity type -1
debug3: Not a RSA1 key file /home/jtg733/.ssh/id_rsa.
debug2: key_type_from_name: unknown key type '-----BEGIN'
debug3: key_read: missing keytype
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug2: key_type_from_name: unknown key type '-----END'
debug3: key_read: missing keytype
debug1: identity file /home/jtg733/.ssh/id_rsa type 1
debug1: identity file /home/jtg733/.ssh/id_dsa type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.9p1-hpn13v11lpk
debug1: match: OpenSSH_5.9p1-hpn13v11lpk pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_3.8.1p1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug2: kex_parse_kexinit: diffie-hellman-group-exchange-sha1,diffie-hellman-  group1-sha1
debug2: kex_parse_kexinit: ssh-rsa,ssh-dss
debug2: kex_parse_kexinit: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,aes192-cbc,aes256-cbc,rijndael-cbc@lysator.liu.se,aes128-ctr,aes192-ctr,aes256-ctr
debug2: kex_parse_kexinit: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,aes192-cbc,aes256-cbc,rijndael-cbc@lysator.liu.se,aes128-ctr,aes192-ctr,aes256-ctr
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib
debug2: kex_parse_kexinit: none,zlib
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: first_kex_follows 0 
debug2: kex_parse_kexinit: reserved 0 
debug2: kex_parse_kexinit: ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
debug2: kex_parse_kexinit: ssh-rsa
debug2: kex_parse_kexinit: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour128,arcfour,aes192-cbc,aes256-cbc,aes128-ctr
debug2: kex_parse_kexinit: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour128,arcfour,aes192-cbc,aes256-cbc,aes128-ctr
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-256-96,hmac-sha2-512,hmac-sha2-512-96,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-sha2-256,hmac-sha2-256-96,hmac-sha2-512,hmac-sha2-512-96,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit: none,zlib@openssh.com
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: 
debug2: kex_parse_kexinit: first_kex_follows 0 
debug2: kex_parse_kexinit: reserved 0 
debug2: mac_init: found hmac-md5
debug1: kex: server->client aes128-cbc hmac-md5 none
debug2: mac_init: found hmac-md5
debug1: kex: client->server aes128-cbc hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug2: dh_gen_key: priv key bits set: 127/256
debug2: bits set: 534/1024
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug3: check_host_in_hostfile: filename /home/jtg733/.ssh/known_hosts
debug3: check_host_in_hostfile: match line 2
debug3: check_host_in_hostfile: filename /home/jtg733/.ssh/known_hosts
debug3: check_host_in_hostfile: match line 3
debug1: Host 'SERVER.NAME.HERE.CA' is known and matches the RSA host key.
debug1: Found key in /home/jtg733/.ssh/known_hosts:2
debug2: bits set: 522/1024
debug1: ssh_rsa_verify: signature correct
debug2: kex_derive_keys
debug2: set_newkeys: mode 1
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug2: set_newkeys: mode 0
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug2: service_accept: ssh-userauth
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug2: key: /home/jtg733/.ssh/identity (0x0)
debug2: key: /home/jtg733/.ssh/id_rsa (0x100e9cb8)
debug2: key: /home/jtg733/.ssh/id_dsa (0x0)
debug1: Authentications that can continue: publickey,password,hostbased
debug3: start over, passed a different list publickey,password,hostbased
debug3: preferred publickey,keyboard-interactive,password
debug3: authmethod_lookup publickey
debug3: remaining preferred: keyboard-interactive,password
debug3: authmethod_is_enabled publickey
debug1: Next authentication method: publickey
debug1: Trying private key: /home/jtg733/.ssh/identity
debug3: no such identity: /home/jtg733/.ssh/identity
debug1: Offering public key: /home/jtg733/.ssh/id_rsa
debug3: send_pubkey_test
debug2: we sent a publickey packet, wait for reply
debug1: Authentications that can continue: publickey,password,hostbased
debug1: Trying private key: /home/jtg733/.ssh/id_dsa
debug3: no such identity: /home/jtg733/.ssh/id_dsa
debug2: we did not send a packet, disable method
debug3: authmethod_lookup password
debug3: remaining preferred: ,password
debug3: authmethod_is_enabled password
debug1: Next authentication method: password 
```

因此，它似乎获得了密钥，发送了测试数据包，然后直接进入下一轮身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:32:04.010

出于某种原因，在服务器端生成密钥，然后使用 scp 将服务器生成的*私钥*从服务器复制到 windows 框，然后使用 cygwin chmod 600 就像一个魅力。

我仍然不知道为什么服务器不接受 windows 公钥但 windows 会接受服务器的私钥。对我来说，这就像计算机 Voodoo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:08:09.413

您应该可以使用 win32security API 以编程方式执行此操作，但我对 ACL 和 Windows 的了解还不够，无法为您提供更完整的答案。

您还应该能够右键单击该文件，转到安全性并将其设置在那里。

但是您可能在 Windows 上遇到了其他问题——我对 OpenSSH 的使用还不够了解。

# php - 适用于 PHP 的 AWS S3 开发工具包，上传到存储桶内的文件夹

> ID：10835005
> 
> 赞同：6
> 
> 时间：2012-05-31T13:51:16.127
> 
> 标签：php, amazon-s3, amazon-web-services

我刚刚开始使用适用于 PHP 的 AWS S3 开发工具包，我已经设法使用 PHP 将项目文件夹从我的 PC 上传到 s3 存储桶，有没有办法指定该存储桶内的文件夹，例如，将 image.jpg 上传到 imagebucket 的过程中，它会上传到“imagebucket”中名为 images 的文件夹。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-20T08:12:45.317

aws s3 中没有文件夹的概念。它仅用于亚马逊 AWS UI 使用的显示目的。

实际上它将文件名存储为键和数据作为值。

如果您将 5 个文件存储在不同的文件夹中，则它们不会创建 5 个文件夹。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-23T14:42:21.423

从文档：

```
public function uploadDirectory($directory, $bucket, $keyPrefix = null, array $options = array()) 
```

通过指定 $keyPrefix，您可以将上传的对象放置在 Amazon S3 存储桶中的虚拟文件夹下。例如，如果 $bucket 名称是 my-bucket 并且 $keyPrefix 是 'testing/'，那么您的文件将被上传到 testing/ 虚拟文件夹下的 my-bucket：[https://my-bucket.s3.amazonaws .com/testing/filename.txt](https://my-bucket.s3.amazonaws.com/testing/filename.txt)

请参阅：[http ://docs.aws.amazon.com/aws-sdk-php/guide/latest/service-s3.html#uploading-a-directory-to-a-bucket](http://docs.aws.amazon.com/aws-sdk-php/guide/latest/service-s3.html#uploading-a-directory-to-a-bucket)

# asp.net - Verify existence of two columns in different tables in a single SQL transaction

> ID：10835009
> 
> 赞同：0
> 
> 时间：2012-05-31T13:51:44.087
> 
> 标签：asp.net, vb.net, tsql, stored-procedures, multiple-tables

I'm trying to verify if data exists in two different tables in a single transaction. The reason for the single transaction is the database gets hit about 1-3 million times a day so adding anymore than 1 extra transaction would increase that number up to 9 million, and my poor little server needs a break :)

So I need to check if an ID exists in table X and table Y and return the results to my VB.net script so I can handle the outcome Ideally something like this would work

```
if exists (select id from X where id = @id)
print 'True,' else print 'False,'
if exists (select id from Y where id = @id)
print 'True' else print 'False' 
```

Which gives me "True, True" if exists in both or "True, False" etc etc... But that only displays in SQL print and not actually returning it as an object/string or array values that I can use.

I'm open to any sort of solution of this nature that can give me two results from a single transaction and how to handle that response in vb. Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:00:39.847

```
SELECT
    Case When EXISTS(SELECT 1 FROM X WHERE id = @id) Then 1 Else 0 End AS IsInX,
    Case When EXISTS(SELECT 1 FROM Y WHERE id = @id) Then 1 Else 0 End AS IsInY 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:56:37.657

```
select (select COUNT(*) from X where id = @id) AS x_exists,
       (select COUNT(*) from Y where id = @id) AS y_exists 
```

This returns one data row with two fields, each containing either `0` or `1` (or more, if `id` is not unique).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:07:27.750

```
CREATE PROCEDURE CheckIDOnTables(@ID int)
AS
BEGIN
DECLARE @X AS NVARCHAR(10)
DECLARE @Y AS NVARCHAR(10)
Set @X = 'False'
Set @Y = 'False'
if exists (select id from TableX where id = @ID) 
    Set @X = 'True'
if exists (select id from TableY where id = @ID) 
    Set @Y = 'True'
SELECT @X AS XExists, @Y AS YEsists
END 
```

It will give you your desired results.

# cordova - Jquery mobile 与phonegap 集成以访问相机

> ID：10835014
> 
> 赞同：0
> 
> 时间：2012-05-31T13:51:52.180
> 
> 标签：cordova, jquery-mobile

我正在尝试将 HTML5 Jquery 移动应用程序与 Phonegap 集成以访问相机以扫描条形码，但我没有找到任何使用 phonegap 访问相机的示例。

我在“http://docs.phonegap.com/en/1.0.0/phonegap_camera_camera.md.html”上尝试了一个示例，但它给出了 navigator.camera 未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:21:09.043

在您的 HTML 文件中输入以下内容：

```
<a href="#" onClick="captureImage();" data-role="button">Take a picture</a> 
```

在你的 JS 中放这个：

```
function captureImage(){
    //SET LIMIT TO THE NUMBER OF PICTURES YOU WANT TO CAPTURE AT ONCE
    navigator.device.capture.captureImage(captureImageSuccess, captureError, {limit: 1});    
}

//ON CAPTURE SUCCESS
function captureImageSuccess(mediaFiles) {  
    var i, len;
    var formatSuccess = function (mediaFile) {
        //DO SOMETHING ON SUCCESS
    };

    //IF YOU ARE CAPTURING MULTIPLE FILES
    for (i = 0, len = mediaFiles.length; i < len; i += 1) {
        mediaFiles[i].getFormatData(formatSuccess, formatError);
        console.log("path: " + mediaFiles[i].fullPath);
        console.log("path: " + mediaFiles[i].name);

        //DO SOMETHING WITH THE CAPTURED FILES

    } 
    console.log("captureImageSuccess");
}

//error functions
function captureError(error) {
    var msg = 'An error occurred during capture: ' + error.code;
    navigator.notification.alert(msg, null, '');
}
function formatError(error) {
    alert("Error getting file format data: " + error.code); 
} 
```

# android - android：在 ICS 上通过 WIFI 获取 IP

> ID：10835017
> 
> 赞同：0
> 
> 时间：2012-05-31T13:52:02.867
> 
> 标签：android

我想获取WIFI连接（不是3G）使用的IP。有人知道怎么做吗？我用了：

```
public String getLocalIpAddress() {
try {
    for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
        NetworkInterface intf = en.nextElement();
        for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
            InetAddress inetAddress = enumIpAddr.nextElement();
            if (!inetAddress.isLoopbackAddress()) {
                return inetAddress.getHostAddress().toString();
            }
        }
    }
} catch (SocketException ex) {
    Log.e(LOG_TAG, ex.toString());
}
return null; 
```

}

但它返回 ICS 上的 3G ip。

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:59:13.213

```
WifiInfo winfo = ((WifiManager)this.getSystemService(Context.WIFI_SERVICE)).getConnectionInfo();
winfo.getIpAddress(); 
```

在执行上述操作之前，您可能需要检查您是否已连接到 Wifi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:14:33.460

您无法根据 IP 地址检测连接类型，因为您的移动网络和家庭 WiFi 网络都可以分配私有 IP 地址。

您需要做的是首先检测您是否有移动网络或 WiFi 连接，然后根据该信息获取该连接的 IP 地址。

在 SO 中查看此[线程](https://stackoverflow.com/questions/10683495/android-how-to-know-an-ip-address-is-a-wifi-ip-address)，这与您在 ICS 上的问题相同

# c# - 由于不同的 dll，克隆/序列化会产生错误的类

> ID：10835026
> 
> 赞同：2
> 
> 时间：2012-05-31T13:52:45.390
> 
> 标签：c#, generics, xml-serialization

我有一个 dll 库 TaskLibrary.dll ，其中一个类`Execution`执行一些`Operation`（s）和一个类，该类`ParallelizeExecution`需要一个`Execution`，克隆它并执行`Run`多个`Execution`实例的方法。

该类的`Clone`方法`Execution`通过转换`Execution`in xml 并将其恢复为正常作为新实例来工作

```
public Execution{
    List<AOperation> operations;

    public Run(){
        foreach(var op in operations){
            //...do stuff...
        }
    }

    public Execution Clone(){
        MyXmlSerializer.DeserializeObject<Execution>(
                MyXmlSerializer.SerializeObject(this));
    }
}

public ParallelizeExecution{
    List<Execution> toRun;
    public RunParallel(Execution e,int numExecutions){
        toRun=new List<Execution>();

        for(var i=0;i<numExecutions;i++){
            toRun.Add(e.Clone());
        }
    }
} 
```

该类`Execution`是可序列化的，每个实现`Operation`. 这是通过使用`AOperation`所有`IOperation`实现都扩展的抽象类 () 获得的，使用`XmlInclude`注解`MyXmlSerializer`为每个`IOperation`.

```
[XmlInclude(typeof(Operation1))]
[XmlInclude(typeof(Operation2))]
public abstract class AOperation:IOperation{
    ...
} 
```

Now I have a new project referencing the TaskLibrary.dll. I need to add a new kind of Operation to a `Execution`:

```
public class Operation3: Operation2 {
} 
```

Everything works fine with a single execution, but when I use `ParallelizeExecution` `Operation3` is correctly serialized as `Operation2` thus executing an unwanted `Run` method. How can I add a new type of `AOperation` to the `Execution` class and expect it to be correctly serialized and run in the `Execution`?

**OR**

How can I avoid the problem without altering the way the `Execution` class is serialized?

**Caveat**: I know that it is possible to use Reflection to xmlserialize any tipe extending a given one, but i'd rather learn how to do this using standard OOP (if possible).

**EDIT:** I could modify TaskLibrary.dll but I'd rather avoid this approach, it would void my efforts in learning new things and aiding the community, moreover it would be quite painful to redistribute the library to those already using it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:18:37.990

You can use the extraTypes argument to the [XmlSerializer constructor](http://msdn.microsoft.com/en-us/library/e5aakyae.aspx). Use reflection to find all of the relevant types, and create the XmlSerializer with the complete list. The overall process is laid out [here](http://www.codeproject.com/Tips/51437/Get-rid-of-XmlInclude-when-using-XmlSerializer), but for posterity's sake:

```
// use reflection to get all derived types
List<type> knownTypes = new List<type>();

// Iterate over whichever assembly has your types.
foreach(Type t in Assembly.GetExecutingAssembly().GetTypes())
    if (typeof(Car).IsAssignableFrom(t) || 
        typeof(Wheel).IsAssignableFrom(t) ||
        typeof(Door).IsAssignableFrom(t))
       knownTypes.Add(t);

// prepare to serialize a car object
XmlSerializer serializer = new XmlSerializer(typeof(Car), knownTypes.ToArray()); 
```

# jakarta-ee - 为什么 JPA 2.0 生成的元模型会使字段 VOLATILE？

> ID：10835027
> 
> 赞同：1
> 
> 时间：2012-05-31T13:52:47.607
> 
> 标签：jakarta-ee, jpa-2.0, volatile, metamodel

类型安全查询的新特性会为类生成一个元模型，但为什么这些字段不是 final 而不是 volatile ？

```
public static volatile SingularAttribute<Presentation, String> topic; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:52:08.700

元模型类中的字段不能是最终的，因为应该分配静态最终字段：

1.  连同声明或
2.  在静态初始化器中。

这是无法做到的，因为创建元模型类的人不知道应该分配的值。值由提供者在创建 EntityManagerFactory 时分配。

结果是属性必须是可变的，以保证其他线程可以看到提供者分配的值。

# jsp - 非字符串属性上的 Struts2 java.lang.NoSuchMethodException

> ID：10835030
> 
> 赞同：0
> 
> 时间：2012-05-31T13:52:57.720
> 
> 标签：jsp, struts2

我的操作中有一个属性，它与 getter 和 setter 是 int 的。

当表单提交给操作并且文本字段为空时，我收到此错误

```
java.lang.NoSuchMethodException: setAge([Ljava.lang.String;) 
```

它仅在文本字段为空或非整数时发生。我认为我们不需要带有字符串参数的设置器。当允许文本字段为空时，是否有任何方法可以防止此错误。

堆栈跟踪：

```
 ognl.MethodFailedException: Method "setAge" failed for object dating.user.SearchAction@9ef286 [java.lang.NoSuchMethodException: dating.user.SearchAction.setAge([Ljava.lang.String;)]
    at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:1292)
    at ognl.OgnlRuntime.setMethodValue(OgnlRuntime.java:1481)
    at ognl.ObjectPropertyAccessor.setPossibleProperty(ObjectPropertyAccessor.java:85)
    at ognl.ObjectPropertyAccessor.setProperty(ObjectPropertyAccessor.java:162)
    at com.opensymphony.xwork2.ognl.accessor.ObjectAccessor.setProperty(ObjectAccessor.java:27)
    at ognl.OgnlRuntime.setProperty(OgnlRuntime.java:2318)
    at com.opensymphony.xwork2.ognl.accessor.CompoundRootAccessor.setProperty(CompoundRootAccessor.java:77)
    at ognl.OgnlRuntime.setProperty(OgnlRuntime.java:2318)
    at ognl.ASTProperty.setValueBody(ASTProperty.java:127)
    at ognl.SimpleNode.evaluateSetValueBody(SimpleNode.java:220)
    at ognl.SimpleNode.setValue(SimpleNode.java:301)
    at ognl.Ognl.setValue(Ognl.java:737)
    at com.opensymphony.xwork2.ognl.OgnlUtil.setValue(OgnlUtil.java:217)
    at com.opensymphony.xwork2.ognl.OgnlValueStack.trySetValue(OgnlValueStack.java:186)
    at com.opensymphony.xwork2.ognl.OgnlValueStack.setValue(OgnlValueStack.java:173)
    at com.opensymphony.xwork2.ognl.OgnlValueStack.setParameter(OgnlValueStack.java:151)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.setParameters(ParametersInterceptor.java:292)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:203)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:44:48.973

当您将属性定义为 int 时，您实际上是在说它不能为空。如果您想让它为空，则属性应该是 Integer，以支持空值。

# gradle - Gradle：找不到 sourceSets.test.classes

> ID：10835034
> 
> 赞同：5
> 
> 时间：2012-05-31T13:53:13.963
> 
> 标签：gradle

我试图让我的一个项目（ProjectA）生成一个包含所有测试类的 jar 文件，以便它可以在 ProjectB 中使用。

我做了一些研究，发现这是可能的解决方案：[Create test jar artifact in gradle](http://mrhaki.blogspot.com/2010/11/gradle-goodness-create-jar-artifact.html "使用 Gradle 创建测试 jar 工件")。这就是说下面的代码片段应该可以解决问题。

```
apply plugin: 'java'

task testJar(type: Jar) {
   classifier = 'tests'
   from sourceSets.test.classes
} 
```

但是，当我将上述内容添加到 my`build.gradle`时，我收到以下错误消息：

> *   什么地方出了错：
> 
> 评估根项目“gradle_project”时出现问题。
> 
> 在任务“：testJar”上找不到属性“sourceSets”。

我已经在 Google 和 Gradle 文档中搜索了更多信息，但要么它已被删除，但没有在任何我能找到的地方记录它，要么我使用错误。我怀疑后者，只是不知道我做错了什么。

我在我的`subprojects{}`部分中尝试了相同的代码片段，但随后收到以下错误消息：

> *   什么地方出了错：
> 
> 评估根项目“gradle_project”时出现问题。
> 
> 无法在源集测试上获取只写属性“类”的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T14:12:00.243

通过以下步骤解决了它：

第 1 步：将代码段移动到该`subprojects{}`部分内

第2步：`sourceSets.test.classes`已删除。`sourceSets.test.output`似乎可以解决问题。发现这个：[创建一个测试二进制文件的 Jar - Gradle](https://stackoverflow.com/questions/10034084/creating-a-jar-of-test-binaries-gradle)

# javascript - 限制可以通过人口密度选择的谷歌地图区域

> ID：10835039
> 
> 赞同：1
> 
> 时间：2012-05-31T13:53:46.500
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试确定是否可以根据该地区的人口密度限制用户可以在谷歌地图上选择的区域。

因此，例如，用户将能够在人口稠密的地区选择地图的一小块区域，而在人口稀少的地区选择地图的大面积区域。

一个人可以选择的最大区域（无论人口密度如何）会很小（一边约 50 公里），所以我会使用一个区域的平均人口密度。

有谁知道使用 Googles Map API 是否可以做到这一点，或者我是否必须导入和查询另一个数据集或服务？

# c++ - fopen_s(&fp,"文件名.txt",w+); 当我给出文件的相对路径时不起作用，只有在给出绝对路径时才起作用

> ID：10835040
> 
> 赞同：-1
> 
> 时间：2012-05-31T13:53:46.693
> 
> 标签：c++, visual-c++, file-io

我发现API，

> _tfsopen()

当我只给出相对文件路径（JUST FILE NAME）时不起作用

```
fopen_s(&fp,"FileName.txt",w+); 
```

但是，如果我给出 txt 文件的绝对路径，那么它工作正常。所以问题在于获取当前工作目录（CWD）。我如何获得 CWD 并使这个 API 工作？

此 API 定义存在于：

```
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\crt\src\fopen.c 
```

这就是 fopen.c 所拥有的：

```
errno_t __cdecl _tfopen_s (
        FILE ** pfile,
        const _TSCHAR *file,
        const _TSCHAR *mode
        )
{
    _VALIDATE_RETURN_ERRCODE((pfile != NULL), EINVAL);
    *pfile = _tfsopen(file, mode, _SH_SECURE);  // ERROR IS OCCURING AT THIS LINE. IT's NOT ABLE TO OPEN THE FILE.

    if(*pfile != NULL)
        return 0;

    return errno;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:20:22.747

此代码可让您获取当前工作目录：

```
#include <direct.h>

char cwd[MAX_PATH_SIZE];
_getcwd(cwd, MAX_PATH_SIZE); 
```

# ruby-on-rails - 在 Rails 中诊断 404 错误

> ID：10835042
> 
> 赞同：1
> 
> 时间：2012-05-31T13:53:54.117
> 
> 标签：ruby-on-rails, routes, http-status-code-404

我正在尝试向以下位置发出 POST 请求`/api/kpi?data=some+stuff`：

```
curl -i http://127.0.0.1:9010/api/create_kpi -F data="some stuff" 
```

但我得到一个404。

我的路线是：

```
# config/routes.rb

namespace :api do
  resource :kpi,  :except => [:edit, :destroy]
end 
```

哪个应该击中我的控制器

```
# app/controllers/api/kpi_controller.rb

class Api::KpiController < ApplicationController
  def create
    temp = Kpi.new(params[:data])
  end
end 
```

所以我猜路径不正确。对？我很难理解我的路线、控制器或呼叫是否不正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T15:32:53.617

当您收到 404 时，请检查您的路线。这通常意味着没有到达控制器的路由。路由是 URL 和控制器之间的链接。如果你的控制器被击中，它要么工作要么给你一个运行时错误。

1.  通过运行[检查您的路线](http://guides.rubyonrails.org/routing.html#inspecting-and-testing-routes)`rake routes`。这是一个非常有用的工具。它应该给你这样的东西：

    ```
     users GET    /users(.:format)          users#index
              POST   /users(.:format)          users#create
     new_user GET    /users/new(.:format)      users#new
    edit_user GET    /users/:id/edit(.:format) users#edit 
    ```

    您可以看到它为您提供了哪个`[method, URL]`请求将命中哪个的映射`[controller, action]`。比如这里，`POST /users`会触发的动作`create`。`UsersController`

2.  给定一个控制器/资源名称，[按照惯例](http://en.wikipedia.org/wiki/Convention_over_configuration)，Rails 会查找该名称的复数形式。例如，给定`resources :user`，Rails 将`UsersController`在文件中查找`app/controllers/users_controller.rb`。（路径/文件名必须与名称匹配！）

    @yfedblum更详细地[讨论](https://stackoverflow.com/a/2615194/720164)了 Rails 中单数和复数的使用。

# asp.net-mvc-3 - 循环中控件的 MVC3 验证

> ID：10835045
> 
> 赞同：2
> 
> 时间：2012-05-31T13:54:04.847
> 
> 标签：asp.net-mvc-3, validation

在我的视图中，我正在使整个 html 表可编辑。表中的每个字段都有验证。这是一些示例代码...

```
<tbody>
    foreach (Item item in Model.Items)
    {
        <tr>
            <td>
                @Html.TextBoxFor(x => em.Value)
                @Html.ValidationMessageFor(x => em.Value)
            </td>
        </tr>
    }
</tbody> 
```

这在浏览器上产生了两个问题。

1）由于所有控件的name属性相同，当一个字段无效时，所有同名字段都会显示错误信息。

2）可能也和名字有关，在验证表单时，如果第一行的控件无效，则表单无效。但是所有其他行中的控件不会使表单无效（即使显示了错误消息）。

```
if (!$(form).valid()) {
    return false;
} 
```

任何想法都会有所帮助。

**更新：解决方案**

根据 bobek 的建议，我为 TextBoxInLoopF​​or 和 ValidationMessageInLoop 创建了自定义扩展。以下是解决方案：

```
public static MvcHtmlString TextBoxInLoopFor<TModel, IItem, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, IItem item, object htmlAttributes)
{
    var model = item as IInLoopForModel; 
    if (model == null)
        return MvcHtmlString.Empty; 

    var metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
    var fieldName = ExpressionHelper.GetExpressionText(expression);
    var name = model.Name + fieldName;

    var tag = new TagBuilder("input");
    tag.MergeAttributes(new RouteValueDictionary(htmlAttributes));
    tag.Attributes.Add("id", name);
    tag.Attributes.Add("for", name);
    tag.Attributes.Add("name", name); 
    tag.Attributes.Add("value", metadata.Model.ToString());

    // Add the validation attributes
    ModelState modelState;
    if (html.ViewData.ModelState.TryGetValue(name, out modelState))
    {
        if (modelState.Errors.Count > 0)
            tag.AddCssClass(HtmlHelper.ValidationInputCssClassName);
    }
    tag.MergeAttributes(html.GetUnobtrusiveValidationAttributes(name, metadata));

    return MvcHtmlString.Create(tag.ToString(TagRenderMode.Normal));
}

public static MvcHtmlString ValidationMessageInLoopFor<TModel, IItem, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, IItem item)
{
        var model = item as IInLoopForModel;
    if (model == null)
        return MvcHtmlString.Empty;

    var fieldName = ExpressionHelper.GetExpressionText(expression);
    var name = model.Name + fieldName;

    var tag = new TagBuilder("span");
    tag.Attributes.Add("class", "field-validation-valid");
    tag.Attributes.Add("data-valmsg-replace", "true");
    tag.Attributes.Add("data-valmsg-for", name);
    return MvcHtmlString.Create(tag.ToString(TagRenderMode.Normal));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:59:14.737

这根本无效。用于输入的 MVC3 助手正在为每个添加一个 ID，因此在这里您将拥有多个具有相同 ID 的文本框 - 它在 HTML 中无效。

您应该手动为模型上的每个属性创建一个 TextBoxFor 和 ValidationFor ，或者如果可能尝试：

```
foreach (Item item in Model.Items)
    {
        <tr>
            <td>
                @Html.TextBoxFor(x => item.Value)
                @Html.ValidationMessageFor(x => item.Value)
            </td>
        </tr>
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:04:59.220

我建议在您的 domain.model 中使用元数据。这是一个小例子，让您了解该过程：

```
namespace yourDomain.Domain.Model
{
    [MetadataType(typeof(fooEntityMeta))]
    public partial class fooEntity
    {
} 
```

并从您的实体中选择值字段；使其成为必需

```
public class fooEntityMeta
    {
        [Required(ErrorMessage = "Value is required")]
        public string Value;  
       ...
    } 
```

这是一个可以帮助您完成整个过程的链接：http: [//msdn.microsoft.com/en-us/magazine/ee336030.aspx](http://msdn.microsoft.com/en-us/magazine/ee336030.aspx)

# c - 用 fscanf 读取 2 int 和 \n - 想法？

> ID：10835048
> 
> 赞同：0
> 
> 时间：2012-05-31T13:54:29.513
> 
> 标签：c, scanf

在我当前的 C 语言项目中，我必须从文件 2 int 中读取并确保在这些文件之后有一个换行符。我正在尝试使用 fscanf 函数 (fscanf(f,"%d %d",&a,&b))，但是这样我不知道它们是否在同一行或者后面是否有换行符。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:56:09.550

用于`[fgets()](http://linux.die.net/man/3/fgets)`将一整行读入缓冲区，然后检查您读取的行，也许通过`[sscanf()](http://linux.die.net/man/3/sscanf)`解析出两个整数。

# asp.net-mvc-3 - 如何从 ASP.Net 中的 Web 服务器通知 Web 浏览器？

> ID：10835049
> 
> 赞同：0
> 
> 时间：2012-05-31T13:54:32.260
> 
> 标签：asp.net-mvc-3

我有一个 ASP.Net MVC 3 Web 应用程序，管理员可以在其中将任务分配给各个用户。个人用户通过查看内置在同一应用程序中的仪表板页面来监控一些统计数据。我的要求是，每当将新任务分配给用户时，我都想通知单个用户。是否可以在基于 .net 技术的 Web 应用程序中实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:59:30.587

您可以使用 jquery 自动刷新。

自动刷新从数据库加载的页面部分

[jquery自动刷新教程](http://www.9lessons.info/2009/07/auto-load-refresh-every-10-seconds-with.html)

# extjs - Extjs 在单击按钮时设置只读选项

> ID：10835050
> 
> 赞同：0
> 
> 时间：2012-05-31T13:54:34.690
> 
> 标签：extjs, combobox, formfield

再会！我正在尝试编写方法，当单击按钮时，该方法在表单上的元素上设置（true 或 false）只读选项：

```
Ext.override(Ext.form.Panel,{

  setReadOnly: function(bReadOnly) {

    this.items.each(function(f){

     if (f instanceof Ext.form.FieldSet) {
       f.items.each(function (f) {

       if (f.isFormField) {
          if (bReadOnly === true) {
            f.inputEl.dom.setAttribute('readonly', true);
          } else {
            f.inputEl.dom.removeAttribute('readonly');
          }              

          if (f instanceof Ext.form.TriggerField)
          {                
            f.setDisabled(bReadOnly);                

            if (f instanceof Ext.form.ComboBox)
            {
              f.setEditable(bReadOnly);
            }
          }
        }
    });
    }
  });
}); 
```

在文本字段上，此代码完美运行。但是在 TriggerField 上，当将 readOnly 选项设置为 false 时，我无法显示触发器。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:04:40.120

您可能需要 TriggerField setReadonly 方法

请参阅此处的 API 参考：http: //docs.sencha.com/ext-js/3-4/#! [/api/Ext.form.TriggerField-method-setReadOnly](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.TriggerField-method-setReadOnly)

您不需要手动更改 DOM，有可用的 ExtJs 方法来执行您需要的操作。

此外，您可以使用 Panel findByType 方法获取面板内的所有表单字段。

[http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.FormPanel-method-findByType](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.FormPanel-method-findByType)

# regex - 小于 82 的正则表达式数字

> ID：10835053
> 
> 赞同：4
> 
> 时间：2012-05-31T13:54:51.577
> 
> 标签：regex

我正在尝试编写一个简单的正则表达式，但我不知道为什么它不起作用。

用户输入 2 位数字，如`01`, `09`, `23`, `55`, 直到`82`。之后`82`系统会拒绝。

这是我的正则表达式，2 位数字必须小于 82。

```
0[1-9]|[1-8][0-9]|8[0-2] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T13:57:28.730

您应该有`[1-7]`10-79 的范围，而不是`[1-8]`. 不要忘记`^`and`$`来指定字符串的开始和结束：

```
^(0[1-9]|[1-7]\d|8[0-2])$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T13:57:34.270

为什么不转换为整数然后只测试`x < 82`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:57:33.320

你的第二部分是错误的。它将从 10 匹配到 89，而您希望它从 10 匹配到 79，并让第三部分处理 80 到 82。

```
0[1-9]|[1-7][0-9]|8[0-2] 
```

# android - AdMob+Android：不允许使用字符串类型（在 'configChanges' 处，值为 'keyboard|key

> ID：10835058
> 
> 赞同：2
> 
> 时间：2012-05-31T13:55:17.913
> 
> 标签：android, titanium, admob

> **可能重复：**
> [Eclipse 中的 Admob 错误，用于 android:configChanges](https://stackoverflow.com/questions/7899767/admob-error-in-eclipse-for-androidconfigchanges)

我正在尝试让 AdMob 在我的 Android 应用中运行。我提出了一个新问题，因为我已经遵循了以前线程的建议。

我正在使用 Appcelerator Titanium。

*   Android API 在 Titanium 内的运行配置中设置为 4.0.3。
*   工具 API 级别：`<tool-api-level>16</tool-api-level>`
*   活动：`<activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>`
*   我已经对我的项目进行了清理

收到此错误：

```
[ERROR] /Users/Path/build/android/AndroidManifest.xml:13: error: Error: String types not allowed (at 'configChanges' with value 'keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize'). 
```

我做错了什么/是什么原因造成的？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T14:03:08.480

在 AndroidManifest 的标签中，使用这个：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17"/> 
```

当然，将 minSdkVersion 更改为您现在使用的任何内容。

此外，在 project.properties 上将目标设置为 17，然后保存、修复项目属性并清理。

编辑：将 project.properties 上的 targetSdkVersion 和目标从 15 更改为 17。只需尝试以可用的最新版本为目标。

# django - 这是将 Django 项目从 1.25 更新到 1.4 的最佳方式

> ID：10835059
> 
> 赞同：0
> 
> 时间：2012-05-31T13:55:19.367
> 
> 标签：django

我不知道我在想什么，我也没有对这个项目进行任何测试。我想将它升级到 1.4，以便能够添加各种不同的测试并拥有更严格的项目。你们能给我什么建议或建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:15:46.190

我建议您通读每个版本的发行说明，以尝试找出任何可能破坏现有代码的更改区域。在这里找到它们[https://docs.djangoproject.com/en/dev/releases/](https://docs.djangoproject.com/en/dev/releases/)

由于您的项目没有任何测试，您只需要卷起袖子并在运行应用程序的地方运行完整的站点测试，并尝试测试尽可能多的功能，看看它是否像预期的那样工作。

我刚刚完成了 1.1.1 到 1.4 的升级（但我有一些测试可以帮助我），而且还不错。

升级有2个方面。一种是让您的应用程序在新版本上运行，另一种是更改/更新您的代码以利用 1.4 版本中的新功能。我建议您首先让它正常工作，发布它，然后在您使用任何新功能时重构您的代码。

# osx-lion - 从 localhost 到 localhost 的 tcp 端口环回

> ID：10835060
> 
> 赞同：2
> 
> 时间：2012-05-31T13:55:20.017
> 
> 标签：osx-lion, netstat, loopback, rootkit

我已经看到`netstat`打开了两个奇怪的 tcp 连接：

```
tcp4       0      0  localhost.49153    localhost.1023 ESTABLISHED
tcp4       0      0  localhost.1023     localhost.49153 ESTABLISHED 
```

我想知道这是否正常。有人能帮我吗？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:04:39.360

是的，这只是 OS X 使用的正常环回。查看 Apple 端口使用情况[出版物](http://support.apple.com/kb/ts1629)

```
端口服务说明
-------------+------------+------------------
 600-1023 | ipc 服务器 | Mac OS X 基于 RPC 的服务
 49152-65535 | Xsans | Xsan 文件系统访问
 49152-65535 | 杂项 | 回到我的 Mac

```

# memory - 检查内存碎片的工具

> ID：10835061
> 
> 赞同：6
> 
> 时间：2012-05-31T13:55:22.860
> 
> 标签：memory, memory-management, profiling

我最近阅读了有关内存碎片的主题： [如何解决内存碎片](https://stackoverflow.com/questions/60871/how-to-solve-memory-fragmentation)和[什么是内存碎片？](https://stackoverflow.com/questions/3770457/what-is-memory-fragmentation)

[我想在这些文章http://pavlovdotnet.wordpress.com/2007/11/10/memory-fragmentation/](http://pavlovdotnet.wordpress.com/2007/11/10/memory-fragmentation/)中查看一些内存分配图，例如作者

您能否推荐一些工具来获得这样的内存分配图，这样我就可以查看内存是否碎片以及可用的最大可用空间是多少。

我在 Windows 上，所以我更喜欢在这个系统上工作的工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T18:05:49.420

[这](http://blogs.msdn.com/b/tess/archive/2009/04/23/show-me-the-memory-tool-for-visualizing-virtual-memory-usage-and-gc-heap-usage.aspx)是一个可视化 GC 内存和堆使用情况的工具，还提供了源代码。那里的评论中也链接了另一个类似的应用程序。

如果您需要能够分析 .NET 解决方案的内存使用情况，您可以查看[ANTS Memory Profiler](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)，它可以与 Visual Studio 中的项目一起运行，并密切关注进程和对象如何使用内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:56:13.617

有间接解决问题的办法。我已经开发服务器应用程序几年了。最初我们是按需分配的，结果在运行几周后，服务器的性能下降了。作为一种解决方法，我们遵循了这种方法 -

假设您有用户定义的类 X,Y,Z, .. 您需要在运行时从堆中分配它们。在启动时分配 n 个对象 X。将所有这些对象放入空闲池列表中。根据需要，获取 x 的每个对象并将其提供给您的应用程序。使用时，将其放入忙池列表中。当应用程序要释放它时，将其放回空闲池列表。遵循 Y.Z 等的这个策略。

由于您在启动时分配所有需要的对象，并且在程序退出之前永远不会释放回操作系统内存管理器，因此您不会面临由内存碎片引起的性能下降。

# javascript - CSS 3D 变换 - 打开一张卡片

> ID：10835064
> 
> 赞同：1
> 
> 时间：2012-05-31T13:55:32.753
> 
> 标签：javascript, css, css-transforms

我正在制作电子贺卡。当用户单击卡片时，它将打开并显示其内容。我如何在 CSS 和 javascript 中制作这个？[正如您在此处](http://jsfiddle.net/pYJm6/1/)看到的，我正在使用透视和旋转。如果您知道一个看起来像我正在尝试做的示例，请发布链接。

![示例：每种颜色代表不同的内容。](../Images/32f8d618c1382d6f811a1ffdd851b709.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T14:06:41.340

这是我玩过的解决方案：

1.  创建一个执行旋转动画的样式。
2.  为动画的最终结果创建样式（基本上与您`to`在动画样式中的部分相同。
3.  创建一个按钮或触发器以将旋转样式添加到您的`<div>`
4.  在 JavaScript 中设置与动画相同的超时时间。
5.  一旦超时触发，删除动画样式并添加最终结果样式

[这是您的 jsFiddle 的修改](http://jsfiddle.net/RustyTheBoyRobot/pYJm6/81/)。让背面工作有一些怪癖。背面的位置必须使其右边缘与正面的左边缘对齐。然后，您必须将背面旋转 -180 度，使其从首页后面开始。此外，一旦动画到达中点，我必须切换 z-index。

所有这些在这里都很难解释，所以我专门写[了一篇博](http://newtroniccity.wordpress.com/2012/06/02/css3-rotations/)文。我创建了一堆视觉效果来帮助使其清晰。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T13:29:27.463

还有一个更简单的解决方案可以使用；无需使用计时器切换 z-index，您只需指定元素没有背面 ( `-webkit-backface-visibility: hidden`)，并将黄牌翻转 180 度，使其背面接触红色背面。

这样，您只需要翻转包含黄牌和红牌的容器，这可以通过添加一个类（例如`class="card opened"`）来完成。

这是您进行这些更改的示例代码：http: [//jsfiddle.net/pYJm6/90/](http://jsfiddle.net/pYJm6/90/)

# java - Java 异常处理变量未初始化

> ID：10835068
> 
> 赞同：2
> 
> 时间：2012-05-31T13:55:52.173
> 
> 标签：java, variables, exception, exception-handling

我试图捕获插入文本并且程序必须解析的异常。编译时表示变量 num 可能尚未初始化。（第 31 行）我无法弄清楚它为什么会这样做。

代码如下。提前致谢。

```
// Java packages
import javax.swing.JOptionPane; 
// program uses JOptionPane

class Help2Gui {
    public static void main(String args[]) {

        // variable declaration
        String choice;
        int num;

        // read in first number from user as a string
        choice =
            JOptionPane
                .showInputDialog("Help on: \n \t 1\. class \n \t 2\. object \n \t 3\. method \n \t 4\. variable \n \t 5\. constructor \n \t 6\. Quit \n Enter a number from the list above.");

        if (choice == null) {
            System.exit(0);
        }

        do { // begin a loop to display initial choice, repeating until 6 is
             // entered

            // convert numbers from type String to type int
            try {
                num = Integer.parseInt(choice);
            }

            catch (NumberFormatException nfe) {

            }

            switch (num) { // display result for each item entered by user
            case 1:
                JOptionPane.showMessageDialog(null,
                    "\n A class is a definition of an object.",
                    "Java Help System", JOptionPane.PLAIN_MESSAGE);
                break;

            case 2:
                JOptionPane
                    .showMessageDialog(
                        null,
                        "The switch: \n \n switch (expression) { \n case constant: \n statement sequence \n break \n // ... \n } ; ",
                        "Java Help System", JOptionPane.QUESTION_MESSAGE);
                break;

            case 3:
                JOptionPane
                    .showMessageDialog(
                        null,
                        "The for: \n \n for(init; condition; iteration) \n statement;",
                        "Java Help System", JOptionPane.INFORMATION_MESSAGE);
                break;

            case 4:
                JOptionPane.showMessageDialog(null,
                    "The while: \n \n while(condition) statement;",
                    "Java Help System", JOptionPane.WARNING_MESSAGE);
                break;

            case 5:
                JOptionPane
                    .showMessageDialog(
                        null,
                        "The do-while: \n \n do { \n statement; \n } while (condition);",
                        "Java Help System", JOptionPane.ERROR_MESSAGE);
                break;

            case 6:
                System.exit(0);
                break;

            default:
                JOptionPane.showMessageDialog(null,
                    "Enter a number from 1 to 5 or 6 to Quit",
                    "Java Help System", JOptionPane.ERROR_MESSAGE);
            }

            // read in first number from user as a string
            choice =
                JOptionPane
                    .showInputDialog("Help on: \n \t 1\. if \n \t 2\. switch \n \t 3\. for \n \t 4\. while \n \t 5\. do-while \n \t 6\. Quit \n Enter a number from the list above.");
            try {
                // attempt to convert the String to an int
                num = Integer.parseInt(choice);

            }
            catch (NumberFormatException nfe) {
                JOptionPane.showMessageDialog(null,
                    "Enter a number from 1 to 5 or 6 to Quit",
                    "Java Help System", JOptionPane.ERROR_MESSAGE);
            }
            // convert numbers from type String to type int

        }
        while (num != 6); // end of do-while loop.

        System.exit(0); // terminate application with window

    } // end method main

} // end class Help2Gui 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:58:56.293

如果抛出并捕获异常，则变量`num`不会被初始化

```
num = Integer.parseInt( choice ); 
```

然后会有一个问题：

```
switch (num) { //what is num in here? 
```

为了解决这个问题 - 您可以为这些情况提供默认值（在异常处理程序中，或在 try 块之前，因此赋值`num`将覆盖默认值），或者在抛出异常时终止方法。
最简单的解决方案恕我直言（尽管它并不总是适合）将是`num`在声明它时进行初始化，例如：

```
int num = MY_DEFAULT_VALUE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:59:21.397

如果`parseInt`抛出异常，则不会初始化 num。将其初始化为 catch 块之前的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:00:17.810

问题是你正在这样做：`int num;`. 您没有为它分配任何价值。在您的`do while`循环中，您正在填充该值，但这可能会引发异常，这将导致您的变量在到达`switch`语句时仍然未初始化。我建议您`num`使用一些初始后备值填充变量，然后在循环中更新该值。

作为另一个建议，我建议您不要吞下异常，并在 catch 部分中为`num`变量提供一些值，以防异常被捕获。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:00:27.233

将 a`num=0;`作为隐式默认值放入 catch

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T14:00:48.333

`num`在 try 块之前初始化。如果从类型转换中抛出任何异常，则`num`不会初始化。如果可能的话，为了一个好的编程习惯，在使用它之前初始化所有变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T14:01:14.253

这是因为如果抛出异常，您的变量 num 不会用任何值初始化。在这种情况下，所有操作都会失败，因为 num 没有值。如果 num 是方法范围之外的变量，那么它将获得默认值。但是在方法中声明的变量不会收到任何默认值。您可以在抛出异常时为 num 分配一个单独的值，例如 -1，或者在声明它时对其进行初始化。基本上你有很多关于如何处理这个问题的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-31T14:01:51.670

替换为

```
 int num = 0; 
```

这应该可以解决问题

# ios - 在哪里指定我的应用程序支持的 iOS 版本

> ID：10835072
> 
> 赞同：2
> 
> 时间：2012-05-31T13:56:12.593
> 
> 标签：ios, deployment, device, target

我即将将我的应用程序提交到 appstore，我想知道我的应用程序可以在哪里指定最低版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:00:30.673

在您的目标摘要中，有一个用于选择“部署目标”的下拉菜单，将其设置为您希望支持的最低 iOS 版本。

要获得目标摘要，请在项目导航器窗格中，单击您的项目图标（在最顶部）。然后在左窗格中单击应用程序目标，然后在顶部确保选择“摘要”选项卡

![在此处输入图像描述](../Images/0ba2451dd1800753dece6e90e716027d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:02:25.820

您`Deployment Target`应该是您想要支持的最低 iOS 版本。

![在此处输入图像描述](../Images/e30c3dc5f0ea33a1bbfb4cc0ab309e5d.png)

这是您指定要支持的操作系统版本的方式。如此处所见，我支持`4.0+`

# spring - 如何在 Spring MVC 中更改模型的显示名称

> ID：10835073
> 
> 赞同：0
> 
> 时间：2012-05-31T13:56:18.550
> 
> 标签：spring, spring-mvc, spring-roo

我正在使用 Spring MVC 项目，但不知道如何更改视图中模型的字符串表示形式。

我有一个与 WorkOrder 模型具有 ONE_TO_MANY 关系的 Customer 模型。在 workorders/show.jspx 上，客户显示为一个字符串，该字符串由名字和姓氏、电子邮件地址和电话号码连接而成。

我该如何改变？我以为我可以更改 Customer 上的 toString 方法，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:26:03.720

一种解决方案是将 show() 更改/推入 WorkOrderController 以将渲染视图标记映射到您希望看到的内容。

```
@RequestMapping(value = "/{id}", produces = "text/html")
public String show(
    @PathVariable("id") Long id, 
    Model uiModel)
{
    final WorkOrder workOrder = WorkOrder.findWorkOrder(id);
    uiModel.addAttribute("workOrder", workOrder);
    uiModel.addAttribute("itemId", id);
    // Everything but this next line is just ripped out from the aspectJ/roo stuff.
    // Write a method that returns a formatted string for the customer name, 
    // and a customer accessor for WorkOrder.
    uiModel.addAttribute("customerDisplay", workOrder.getCustomer().getDisplayName());
    return "workorders/show";
} 
```

在您的 i18n/application.properties 文件中为 customerDisplay 放置/定义一个标签。

然后在您的 show.jspx 中，您可以使用类似...的方式访问映射（该技巧与其他视图类似。）

```
<field:display field="customerDisplay" id="s_your_package_path_model_WorkOrder_customerDisplay" object="${workorder}" z="user-managed" /> 
```

我是 Roo 的新手，所以我很想看到一个更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:10:35.957

我们找到了一个很好的解决方案。ApplicationConversionServiceFactoryBean_Roo_ConversionService.aj 中的所有模型都有 toString() 方法

您可以将所需模型的方法推送到 ApplicationConversionServiceFactoryBean.java 并对其进行修改。就我而言，我添加了这个：

```
public Converter<Customer, String> getCustomerToStringConverter() {
    return new org.springframework.core.convert.converter.Converter<com.eg.egmedia.bizapp.model.Customer, java.lang.String>() {
        public String convert(Customer customer) {
            return new StringBuilder().append(customer.getId()).append(' ').append(customer.getFirstName()).append(' ').append(customer.getLastName()).toString();
        }
    };
} 
```

Spring 将它用于所有视图页面，因此这将在整个应用程序中更改模型的字符串表示！

# javascript - javascript错误：未定义jQuery和无效的正则表达式：缺少/

> ID：10835074
> 
> 赞同：0
> 
> 时间：2012-05-31T13:56:21.143
> 
> 标签：javascript, css, wordpress

我在我的 wordpress 网站上实现了一些 javascript，但我在页面上收到以下错误消息

jQuery 未定义

和

无效的正则表达式：缺少 /

这是我的 header.php 文件中的代码。我不确定是否必须编辑 .js 文件，或者我在本节中遗漏了一些重要的内容

```
<?php
/**
 * The Header for our theme.
 *
 * Displays all of the <head> section and everything up till <div id="main">
 *
 * @package WordPress
 * @subpackage Twenty_Eleven
 * @since Twenty Eleven 1.0
 */
?><!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" <?php language_attributes(); ?>>
<![endif]-->
<!--[if IE 7]>
<html id="ie7" <?php language_attributes(); ?>>
<![endif]-->
<!--[if IE 8]>
<html id="ie8" <?php language_attributes(); ?>>
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html <?php language_attributes(); ?>>
<!--<![endif]-->
<head>
<meta charset="<?php bloginfo( 'charset' ); ?>" />
<meta name="viewport" content="width=device-width" />
<title><?php
    /*
     * Print the <title> tag based on what is being viewed.
     */
    global $page, $paged;

    wp_title( '|', true, 'right' );

    // Add the blog name.
    bloginfo( 'name' );

    // Add the blog description for the home/front page.
    $site_description = get_bloginfo( 'description', 'display' );
    if ( $site_description && ( is_home() || is_front_page() ) )
        echo " | $site_description";

    // Add a page number if necessary:
    if ( $paged >= 2 || $page >= 2 )
        echo ' | ' . sprintf( __( 'Page %s', 'twentyeleven' ), max( $paged, $page ) );

    ?></title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 'stylesheet_url' ); ?>" />
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />
<!--[if lt IE 9]>
<script src="<?php echo get_template_directory_uri(); ?>/js/html5.js" type="text/javascript"></script>
<![endif]-->
<?php
    /* We add some JavaScript to pages with the comment form
     * to support sites with threaded comments (when in use).
     */
    if ( is_singular() && get_option( 'thread_comments' ) )
        wp_enqueue_script( 'comment-reply' );

    /* Always have wp_head() just before the closing </head>
     * tag of your theme, or you will break many plugins, which
     * generally use this hook to add elements to <head> such
     * as styles, scripts, and meta tags.
     */
    wp_head();
?>

<script type="text/javascript" src="/dw/wp-content/themes/child/scripts/galleria.js"></script>
<script type="text/javascript" src="/dw/wp-content/themes/child/scripts/Java_Box.js"></script>
<script type="text/javascript" src="/dw/wp-content/themes/child/scripts/resize-pdf.js"></script>
</head>

<body <?php body_class(); ?>>
<div id="page" class="hfeed">
    <header id="branding" role="banner">
            <div class="logo" onclick="location.href='http://www.dwmu.co.uk';" style="cursor:pointer;"></div>
                    <div class="info">Make Up Artist</div>

            <?php
                // Check to see if the header image has been removed
                $header_image = get_header_image();
                if ( ! empty( $header_image ) ) :
            ?>
            <a href="<?php echo esc_url( home_url( '/' ) ); ?>">
                <?php
                    // The header image
                    // Check if this is a post or page, if it has a thumbnail, and if it's a big one
                    if ( is_singular() &&
                            has_post_thumbnail( $post->ID ) &&
                            ( /* $src, $width, $height */ $image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), array( HEADER_IMAGE_WIDTH, HEADER_IMAGE_WIDTH ) ) ) &&
                            $image[1] >= HEADER_IMAGE_WIDTH ) :
                        // Houston, we have a new header image!
                        echo get_the_post_thumbnail( $post->ID, 'post-thumbnail' );
                    else : ?>
                    <img src="<?php header_image(); ?>" width="<?php echo HEADER_IMAGE_WIDTH; ?>" height="<?php echo HEADER_IMAGE_HEIGHT; ?>" alt="" />
                <?php endif; // end check for featured image or standard header ?>
            </a>
            <?php endif; // end check for removed header image ?>

            <?php
                // Has the text been hidden?
                if ( 'blank' == get_header_textcolor() ) :
            ?>
                <div class="only-search<?php if ( ! empty( $header_image ) ) : ?> with-image<?php endif; ?>">
                <?php get_search_form(); ?>
                </div>
            <?php
                else :
            ?>
                <?php get_search_form(); ?>
            <?php endif; ?>

            <nav id="access" role="navigation">
                <h3 class="assistive-text"><?php _e( 'Main menu', 'twentyeleven' ); ?></h3>
                <?php /*  Allow screen readers / text browsers to skip the navigation menu and get right to the good stuff. */ ?>
                <div class="skip-link"><a class="assistive-text" href="#content" title="<?php esc_attr_e( 'Skip to primary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to primary content', 'twentyeleven' ); ?></a></div>
                <div class="skip-link"><a class="assistive-text" href="#secondary" title="<?php esc_attr_e( 'Skip to secondary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to secondary content', 'twentyeleven' ); ?></a></div>
                <?php /* Our navigation menu.  If one isn't filled out, wp_nav_menu falls back to wp_page_menu. The menu assiged to the primary position is the one used. If none is assigned, the menu with the lowest ID is used. */ ?>
                <?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?>
            </nav><!-- #access -->
    </header><!-- #branding -->

    <div id="main"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:01:21.017

添加以下脚本标签。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

以上

```
<script type="text/javascript" src="/dw/wp-content/themes/child/scripts/galleria.js">   </script>
<script type="text/javascript" src="/dw/wp-content/themes/child/scripts/Java_Box.js">   </script>
<script type="text/javascript" src="/dw/wp-content/themes/child/scripts/resize-pdf.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:03:06.950

在 WordPress 中，包含 jQuery 的首选方法是对其进行排队：

```
wp_enqueue_script('jquery'); 
```

确保在调用*之前*调用它`wp_head()`。

# iphone - 如何从 plist 文件中获取字典计数

> ID：10835076
> 
> 赞同：0
> 
> 时间：2012-05-31T13:56:33.377
> 
> 标签：iphone

我是 iphone 新手。我在从 plist 文件中检索数据时遇到了一些问题。实际上我的 plist 文件看起来像这样

key Type value Genesis Dictionary (0 items) Exodus Dictionary (0 items) Leviticus Dictionary (0 items)

在这里，我如何检索 plist 文件中的字典计数，我希望输出为 3。

如果有人知道这个请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:13:33.053

简单的答案，如果你真的接受你的问题的答案，将不胜感激。

```
NSDictionary *dictionary = ....
int count = [[dictionary allKeys] count]; // Will return 3\. allKeys will contain (Genesis,Exodus,Leviticus) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:24:55.780

这个怎么样：

```
NSArray *myPlistPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask, YES); 
NSString *documentsDirectory = [myPlistPath objectAtIndex:0]; 
NSString *myPath = [documentsDirectory
                         stringByAppendingPathComponent:@"MYPLIST.plist"]; 
NSDictionary *plistDictionary = [[NSDictionary alloc] initWithContentsOfFile:myPath]; 

NSArray *array = [[plistDictionary objectForKey:0]
                      sortedArrayUsingSelector:@selector(compare:)]; 

return [NSString stringWithFormat:@"%d MyPlist", [plistDictionary count]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:12:03.863

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"yourResource" ofType:@"plist"];

NSFileManager *fileManager = [NSFileManager defaultManager];

if ([fileManager fileExistsAtPath:path]) 
{
    NSLog(@"The file exists");
} 
else 
{
    NSLog(@"The file does not exist");
}

NSMutableDictionary *myDic = [[NSMutableDictionary alloc] initWithContentsOfFile:path];
int count = [myDic count];
NSLog(@"%d",count); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:05:32.140

您的 plist 返回字典或数组，然后为了知道您的 plist 包含多少字典，您可以在字典对象上使用 count 消息。

# sql - 条件分组 - SQL Server 报表生成器

> ID：10835079
> 
> 赞同：1
> 
> 时间：2012-05-31T13:56:46.937
> 
> 标签：sql, reporting-services, conditional, grouping

在 SQL Server Report Builder 2.0 中，是否可以使用可用的标准函数来创建条件分组？

在我的数据集中，我有一些为特定字段返回 NULL 的行，我不希望它们包含在分组中。

样本数据集

```
ID    Description    Inventory    Purchase
 1    an inventory   inv1         null
 2    an inventory2  inv2         null
 3    a purchase     null         pur1 
```

我希望分组在 ID 和 Inventory 上，但排除为空的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:11:56.347

从外观上看，您只需要在`WHERE`查询的子句中添加一个条件，如下所示：

```
SELECT …
FROM   …
WHERE  …
  AND  Inventory IS NOT NULL
GROUP BY
  ID,
  Inventory 
```

当然，除非我错过了什么。

# c# - 比较 C# 上的两个 List<>

> ID：10835083
> 
> 赞同：0
> 
> 时间：2012-05-31T13:57:09.347
> 
> 标签：c#, object, arraylist, .net-2.0

我的问题是这样的： [c# list compare](https://stackoverflow.com/questions/5106788/c-sharp-list-compare)

但唯一需要注意的是：

我正在使用 .NET Framework 2.0

那么如何比较 C# 框架 2 上的两个列表并在项目不同时返回布尔值？

```
instance == anotherone fails
instance.Equals(anotherone) fails. 
```

***编辑：***

**他们都是列表**

***编辑 2***

我正在尝试比较列表值是否准确。我可以对它们进行排序，为此。问题是项目的计数或值是否发生变化。例如：

```
List1->Item1 = "A"
List1->Item2 = "B"

List2->Item1 = "B"
List2->Item2 = "A"

//must return true

List1->Item1 = "A"
List1->Item2 = "B"

List2->Item1 = "B"
List2->Item2 = "C"

//must return false

List1->Item1 = "A"
List1->Item2 = "B"

List2->Item1 = "B"
List2->Item2 = "A"
List2->Item3 = "A"

//must return false, etc. 
```

谢谢和亲切的问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T14:01:58.957

对于您在计算交集时链接到的问题，您需要实现自己的`Intersect`. 这应该让你开始：

```
List<T> Intersect<T>(List<T> first, List<T> second) {
    Dictionary<T, T> potential = new Dictionary<T, T>();
    foreach (var item in first) {
        potential.Add(item, item);
    }
    List<T> intersection = new List<T>();
    foreach (var item in second) {
        if (potential.Remove(item)) {
            intersection.Add(item);
        }
    }
    return intersection;
} 
```

要处理它们是否具有相同频率的相同项目：

```
bool AreSameAsMultiSets(List<T> first, List<T> second) {
    Dictionary<T, int> counts = new Dictionary<T, int>();     
    foreach (var item in first) {
        if (!counts.ContainsKey(item)) {
            counts.Add(item, 0);
        }
        counts[item] = counts[item] + 1;
    }
    foreach (var item in second) {
        if (!counts.ContainsKey(item)) {
            return false;
        }
        counts[item] = counts[item] - 1;
    }
    foreach (var entry in counts) {
        if (entry.Value != 0) {
            return false;
        }
    }
    return true;
} 
```

您可能应该在上面添加一些错误处理（第一个不为空，第二个不为空）。请注意，您无法使用`HashSet<T>`，因为您使用的是 .NET 2.0。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T14:03:09.057

如果要检查列表是否包含相同的项目（即相同顺序的相同项目）：

```
public static bool ListsEqual<T>(List<T> list1, List<T> list2) {
  if (list1.Count != list2.Count) return false;
  for (int i = 0; i < list1.Count; i++) {
    if (list1[i] != list2[i]) return false;
  }
  return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-27T19:32:57.437

莱安德罗，

您还可以使用我的开源比较 .NET 对象库。您可以将 Config.IgnoreCollectionOrder 设置为 true。

[https://comparenetobjects.codeplex.com/](https://comparenetobjects.codeplex.com/)

```
[Test]
public void ComparerIgnoreOrderSimpleArraysTest()
{
    var a = new String[] { "A", "E", "F" };
    var b = new String[] { "A", "c", "d", "F" };

    var comparer = new CompareLogic();
    comparer.Config.IgnoreCollectionOrder = true;
    comparer.Config.MaxDifferences = int.MaxValue;

    ComparisonResult result = comparer.Compare(a, b);
    Console.WriteLine(result.DifferencesString);
    Assert.IsTrue(result.Differences.Where(d => d.Object1Value == "E").Count() == 1);
    Assert.IsTrue(result.Differences.Where(d => d.Object2Value == "c").Count() == 1);
    Assert.IsTrue(result.Differences.Where(d => d.Object2Value == "d").Count() == 1);

} 
```

# jdbc - 将存储库添加到 Apache Servicemix 4.4.1

> ID：10835087
> 
> 赞同：1
> 
> 时间：2012-05-31T13:57:22.367
> 
> 标签：jdbc, osgi, driver, apache-servicemix

如何将存储库添加到 Apache Servicemix 4.4.1？

我必须安装 Spring JDBC Template 和 PostgreSQL 驱动程序！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:35:34.423

我问了我的同事，她找到了解决方案！

首先，Spring jdbc 库已经在服务组合中，我之前没有注意到 Spring-jdbc 库。

对于 PostgreSQL，有一些步骤：

1.  像这样创建一个新的 xml 文件：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <features>
        <feature name="jdbc-driver">
            <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-dbcp/1.4_2</bundle>
            <bundle>mvn:org.postgresql/com.springsource.org.postgresql.jdbc4/8.3.604</bundle>
        </feature>
    </features> 
    ```

2.  打开 servicemix 命令控制台并输入：

    ```
    features:addUrl file:[file's path] 
    ```

3.  最后

    ```
    features:install jdbc-driver 
    ```

# php - Ruby gsub 到 PHP。更改降价的行为

> ID：10835096
> 
> 赞同：0
> 
> 时间：2012-05-31T13:57:41.373
> 
> 标签：php, ruby, regex, markdown

我正在尝试更改[Markdown](http://daringfireball.net/projects/markdown/)的默认行为，其中单个换行符*未*转换为`<br />`.

我发现[github 风格的 markdown](http://github.github.com/github-flavored-markdown/)可以做到这一点，但是我很难将 rube gsub 函数转换为 PHP 中的类似函数。

Ruby 代码如下所示：

```
text.gsub!(/(\A|^$\n)(^\w[^\n]*\n)(^\w[^\n]*$)+/m) do |x|
   x.gsub(/^(.+)$/, "\\1  ")
end 
```

但即使我在 PHP 中尝试这种简单的方法，我也看不出有什么区别

```
$text = preg_replace("/^(.+)$/", "\\1", $text);
$text = Markdown($text); 
```

任何从 Ruby 到 PHP 转换的帮助将不胜感激。

PS。此处无需讨论一般行为，请参阅元问题[如果降价渲染器将单个换行符视为 br](https://meta.stackexchange.com/questions/26011/should-the-markdown-renderer-treat-a-single-line-break-as-br)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:29:59.123

您在尝试翻译 Ruby 代码时遗漏了两件事：

1.  内部的正则表达式在一个 Ruby 块内 -[`gsub!`为其正则表达式参数的每次匹配调用一次，](http://ruby-doc.org/core-1.8.7/String.html#method-i-gsub-21)匹配传递为`x`。请注意，外部正则表达式是多行的（由 final 表示`m`）。
2.  内部正则表达式在匹配的换行符之前插入两个空格 - [Markdown 处理器然后将它们转换为`<br />`tags](http://daringfireball.net/projects/markdown/syntax#p)。您的正则表达式只是将其匹配替换为 ... 本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T05:10:45.263

经过进一步研究，我发现这个 preg_replace 是最有效的 PHP 等效于 ruby​​ 代码：

```
preg_replace( "/^(\w[^\r\n]*)(?=\r?\n\w.*$)/m", "\\1  ", $text ); 
```

# php - PHP SQL 表单验证

> ID：10835098
> 
> 赞同：1
> 
> 时间：2012-05-31T13:57:59.720
> 
> 标签：php, sql, forms

我想制作一个简单的表单，如果未输入字段，则显示错误。我不知道该怎么做。这是我的代码：php代码：

```
<?php

    //include the connection file

    require_once('connection.php');

    //save the data on the DB and send the email

    if(isset($_POST['action']) && $_POST['action'] == 'submitform')
    {
        //recieve the variables

        $name = $_POST['name'];
        $email = $_POST['email'];
        $message = $_POST['message'];
        $ip = gethostbyname($_SERVER['REMOTE_ADDR']);

        //save the data on the DB

        mysql_select_db($database_connection, $connection);

        $insert_query = sprintf("INSERT INTO feedback (name, email, message, date, ip) VALUES (%s, %s, %s, NOW(), %s)",
                                sanitize($name, "text"),
                                sanitize($email, "text"),
                                sanitize($message, "text"),
                                sanitize($ip, "text"));

        $result = mysql_query($insert_query, $connection) or die(mysql_error());

        if($result)
        {
            //send the email

            $to = "abc@xyz.com";
            $subject = "New message from the website";

            //headers and subject
            $headers  = "MIME-Version: 1.0\r\n";
            $headers .= "Content-type: text/html; charset=iso-8859-1\r\n";
            $headers .= "From: ".$name." <".$email.">\r\n";

            $body = "New contact<br />";
            $body .= "Name: ".$name."<br />";
            $body .= "Email: ".$email."<br />";
            $body .= "Message: ".$message."<br />";
            $body .= "IP: ".$ip."<br />";

            mail($to, $subject, $body, $headers);

            //ok message

            echo "Your message has been sent";
        }
    }

    function sanitize($value, $type) 
    {
      $value = (!get_magic_quotes_gpc()) ? addslashes($value) : $value;

      switch ($type) {
        case "text":
          $value = ($value != "") ? "'" . $value . "'" : "NULL";
          break;    
        case "long":
        case "int":
          $value = ($value != "") ? intval($value) : "NULL";
          break;
        case "double":
          $value = ($value != "") ? "'" . doubleval($value) . "'" : "NULL";
          break;
        case "date":
          $value = ($value != "") ? "'" . $value . "'" : "NULL";
          break;
      }

      return $value;
    }
    ?>

<form id="ContactForm" method="post" action="mail.php">
                            <div class="wrapper"><input class="input" name="name" id="name" type="text" value="Name:" onBlur="if(this.value=='') this.value='Name:'" onFocus="if(this.value =='Name:' ) this.value=''" ></div>
                            <div class="wrapper"><input class="input" name="email" id="email" type="text" value="E-mail:" onBlur="if(this.value=='') this.value='E-mail:'" onFocus="if(this.value =='E-mail:' ) this.value=''" ></div>
                            <div class="textarea_box"><textarea cols="1" rows="1" onBlur="if(this.value=='') this.value='Message:'" onFocus="if(this.value =='Message:' ) this.value=''" >Message:</textarea></div>
                            <input type="hidden" id="action" name="action" value="submitform" />
                            <input type="submit" class="button" id="submit" name="submit" value="Submit" /> <input type="reset" class="button" id="reset" name="reset" value="Reset" />
                        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:00:22.903

在将信息保存到数据库之前，请检查每个提交的值是否包含有效数据。如果没有，请将字段名称放入数组中。验证完成后，检查数组是否为空。如果它为空，请将信息保存到您的数据库中。如果它被填充，则重新显示表单，填充提交的数据，以及他们犯了什么错误的易于阅读的通知，以便他们知道要修复什么。

需要研究的一些 PHP 函数是：[`filter_var()`](http://us3.php.net/manual/en/function.filter-var.php)、、[`ctype_*`](http://us3.php.net/manual/en/book.ctype.php)和[`empty()`](http://us3.php.net/manual/en/function.empty.php)

仅供参考，您应该考虑从 mysql_* 函数迁移，因为[它们很快就会消失。](https://chat.stackoverflow.com/transcript/message/3656047#3656047)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:07:13.713

为此，您应该创建一个执行空检查的代码块（因为这是您要检查的唯一内容）。下面给出一个简单的代码片段：

```
function checkFormErrors($name,$email,$message){
    //now we define a function to check for errors
    $errors = array();
    //define an error container
    if(empty($name)){
        //check the name field
        $errors[] = "You need to enter a name";
    }
    if(empty($email)){
        //check the email field
        $errors[] = "You need to enter an email address";
    }
    .... //do more checks for all fields here
    return $errors;
}
if(isset($_POST['action']) && $_POST['action'] == 'submitform'){
    //recieve the variables
    $name = $_POST['name'];
    $email = $_POST['email'];
    $message = $_POST['message'];
    $ip = gethostbyname($_SERVER['REMOTE_ADDR']);

    $errors = checkFormErrors($name,$email,$message);
    //check for errors
    if(empty($errors)){
        //continue with the processing you did above
        .....
    }
}

In you HTML file/page, you then need to put this above the form (feel free to style it
with css)
<?php
    if(isset($errors)){
        //the variable exists
        echo implode("<br />", $errors);
    }
?> 
```

[我在这里](http://okeke-emmanuel.blogspot.com/2012/05/php-and-web-form-validation.html)发表了一篇博文，还有一些有助于表单验证的脚本

希望这可以帮助！

# c# - 使用 C# 桌面应用程序的 OAuth 用户代理流程

> ID：10835100
> 
> 赞同：6
> 
> 时间：2012-05-31T13:58:02.427
> 
> 标签：c#, authentication, oauth, oauth-2.0

我目前正在尝试将 OAuth 2.0 用户代理流程与客户端 C# 应用程序一起使用，并且遇到了与重定向 URI 相关的一些困惑。

因为我正在使用客户端应用程序，所以我无法向 Web 服务器提供标准重定向 URL。但是，根据我尝试进行身份验证的人员（在本例中为 Salesforce），用户代理流程是用于客户端应用程序的正确流程。

我的问题是，在这种情况下我能做些什么来捕获访问令牌？显然我可以创建一个“客户端可访问的本地资源”，但我不熟悉这背后的机制，而且我找不到关于该主题的任何资源（部分原因是我不知道该寻找什么）。

任何关于我应该从哪里开始寻找的指针将不胜感激。

* * *

编辑：更多挖掘揭示了以下stackoverflow问题：

[如何在本地针对 OAuth 进行开发？](https://stackoverflow.com/questions/670398/how-do-i-develop-against-oauth-locally)

我正在对他们的建议进行更多调查，但任何其他建议也很好。

* * *

编辑：更多搜索揭示了这篇文章：

[http://sarangasl.blogspot.com/2010/09/create-simple-web-service-in-visual.html](http://sarangasl.blogspot.com/2010/09/create-simple-web-service-in-visual.html)

仍然觉得我在黑暗中四处闲逛，没有了解大局，但我相信我需要使用 localhost 设置本地 Web 服务并将我的重定向 URI 指向那里。然后，我将使用我的 Web 服务来解开来自 OAuth 服务器的响应，并让我的应用程序做出适当的响应。更多更新即将到来。

* * *

哎呀。因此，根据我收集到的信息，我需要设置一个本地 Web 服务作为 OAuth 的回调。我需要自己收听所说的网络服务并捕获回调以将其传递给我的应用程序。但是，VS2010 提供的默认 ASP.NET Web 服务不支持 URL 参数，只支持 API 调用，所以我显然需要使用 WCF Rest starter kit 来代替。

我对这一切完全陌生，所以在这一点上任何提示都是天赐之物。一般来说，我想我设置了一个本地 WCF Rest 服务，将该本地 URI 作为回调提供给 OAuth，然后使用 Rest 服务捕获回调 URL。然后我解析 URL 并提取访问令牌。此时，我的应用程序是否请求访问令牌，或者我的 Web 服务是否可以将令牌“提供”给我的应用程序？即，控制点应该在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T19:40:49.457

想出了一个聪明的方法来解决这个问题。我没有设置服务来侦听 OAuth 的重定向 URL，而是在我的 Windows 窗体中嵌入了一个 WebBrowser 控件。

我将此嵌入式 WebBrowser 指向身份验证 URL，让用户登录并使用 Salesforce 进行身份验证，并授予我的应用程序权限。然后，我让 Salesforce 将我的嵌入式浏览器重定向到我提供的虚拟重定向 URL。此重定向实际上从未到达任何地方，它只是显示为 404。

但是，通过监视 WebBrowser.Url，我可以获取我的嵌入式 WebBrowser 控件指向的整个 URL，包括 Salesforce 附加的访问令牌。基本上，在用户验证并授予权限后，嵌入式浏览器被重定向到“http://www.dummyurl.com”。Salesforce 附加访问令牌，因此 WebBrowser.Url 最终看起来像这样：

[http://www.dummyurl.com#access_token=ABCDEF&instance_url=ABCDEF](http://www.dummyurl.com#access_token=ABCDEF&instance_url=ABCDEF)

从这里，我可以解析 URL 并继续我的方式。无需第三方网络服务器或本地网络服务。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:38:26.547

调用您需要的授权类型 Authonomous Client [http://wiki.developerforce.com/page/Digging_Deeper_into_OAuth_2.0_on_Force.com#Obtaining_a_Token_in_an_Autonomous_Client_.28Username-Password_Flow.29](http://wiki.developerforce.com/page/Digging_Deeper_into_OAuth_2.0_on_Force.com#Obtaining_a_Token_in_an_Autonomous_Client_.28Username-Password_Flow.29)。阅读您必须发送到那里的 URL。

```
grant_type=password&client_id=<your_client_id>&client_secret=<your_client_secret>&username=<your_username>&password=<your_password> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T07:00:13.067

您可以使用 DotNetOpenAuth 库。有一个使用 WPF 的示例，它使用由 DotNetOpenAuth 库提供的名为 ClientAuthorizationView 的 winforms 控件。

It is a control that hosts a browser allowing the user to authorize the client without leaving the application.

Hope this help.

Regards

# php - 从逗号分隔的列表生成数组 - PHP

> ID：10835101
> 
> 赞同：14
> 
> 时间：2012-05-31T13:58:10.767
> 
> 标签：php, arrays, string

我有一个像这样定义的变量：**$var = "1, 2, 3";** & 我有一个数组：**$thePostIdArray = array(1, 2, 3);**

上面的数组在循环时效果很好，但是当我尝试使用**$var**代替逗号分隔的列表时，就会出现问题。

所以（完美的世界）它可能是**$thePostIdArray = array($var);** 这与**$thePostIdArray = array(1, 2, 3);相同** .

*到目前为止的每一次尝试都没有奏效:'(*

**这甚至可能吗，还是有更简单的解决方法？**

感谢您的任何指点。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-31T13:59:23.350

签出[`explode`](http://php.net/explode)：`$thePostIdArray = explode(', ', $var);`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T14:05:30.373

使用爆炸功能。这将解决您的问题。爆炸的结构是这样的

```
array explode ( string $delimiter , string $string [, int $limit ] ) 
```

now`$delimiter` 是边界字符串，`string $string`是输入字符串。对于限制：

如果 limit 设置为正，则返回的数组将包含最大限制元素，最后一个元素包含字符串的其余部分。

如果 limit 参数为负数，则返回除最后一个 -limit 之外的所有组件。

如果限制参数为零，则将其视为 1。

访问以下链接。你可以从 [php.net 的链接中学到最好的东西](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-22T07:17:25.887

对于`and`最终想要结果的开发人员可以使用以下代码：

```
$titleString = array('apple', 'banana', 'pear', 'grape');
$totalTitles = count($titleString);
if($totalTitles>1)
{
    $titleString = implode(', ' , array_slice($titleString,0,$totalTitles-1)) . ' and ' . end($titleString);
}
else
{
    $titleString = implode(', ' , $titleString);
}

echo $titleString; // apple, banana, pear and grape 
```

# c# - 如何重构此 C# 代码以使其更易于阅读？

> ID：10835102
> 
> 赞同：3
> 
> 时间：2012-05-31T13:58:11.107
> 
> 标签：c#, asp.net-mvc-3, refactoring

这是我的控制器中的一个动作 - 在我的整个项目中，我的控制器中有类似的大型方法。

我正在尝试学习将这些东西放在哪里以及如何清理它们。我是这样做的新手，如果我看到一个关于如何更改我自己的代码的好例子，它可能会教我如何对大量代码执行此操作。

这是我的行动：

```
public ActionResult Index(string sortOrder, string currentFilter, string searchString, int? page)
{
    ViewBag.CurrentSort = sortOrder;
    ViewBag.TitleSortParm = String.IsNullOrEmpty(sortOrder) ? "Title desc" : "";
    ViewBag.CreditsSortParm = sortOrder == "Credits" ? "Credits desc" : "Credits";
    ViewBag.ElectiveSortParm = sortOrder == "Elective" ? "Elective desc" : "Elective";
    ViewBag.InstructorSortParm = sortOrder == "Instructor" ? "Instructor desc" : "Instructor";
    ViewBag.YearSortParm = sortOrder == "Year" ? "Year desc" : "Year";
    ViewBag.AttendingDaysSortParm = sortOrder == "AttendingDays" ? "AttendingDays desc" : "AttendingDays";
    ViewBag.AttendanceCapSortParm = sortOrder == "AttendanceCap" ? "AttendanceCap desc" : "AttendanceCap";
    ViewBag.StartDateSortParm = sortOrder == "StartDate" ? "StartDate desc" : "StartDate";
    ViewBag.LocationSortParm = sortOrder == "Location" ? "Location desc" : "Location";
    ViewBag.ParishSortParm = sortOrder == "Parish" ? "Parish desc" : "Parish";
    ViewBag.DescriptionSortParm = sortOrder == "Description" ? "Description desc" : "Description";
    ViewBag.ApprovedSortPArm = sortOrder == "Approved" ? "Approved desc" : "Approved";
    ViewBag.CompletedSortPArm = sortOrder == "Completed" ? "Completed desc" : "Completed";
    ViewBag.ArchivedSortPArm = sortOrder == "Archived" ? "Archived desc" : "Archived";

    if (Request.HttpMethod == "GET")
    {
        searchString = currentFilter;
    }
    else
    {
        page = 1;
    }
    ViewBag.CurrentFilter = searchString;

    var courses = from s in db.Courses
                    select s;
    if (!String.IsNullOrEmpty(searchString))
    {
        courses = courses.Where(s => s.Title.ToUpper().Contains(searchString.ToUpper()));
    }
    switch (sortOrder)
    {
        case "Title desc":
            courses = courses.OrderByDescending(s => s.Title);
            break;
        case "Credits":
            courses = courses.OrderBy(s => s.Credits);
            break;
        case "Credits desc":
            courses = courses.OrderByDescending(s => s.Credits);
            break;
        case "Elective":
            courses = courses.OrderBy(s => s.Credits);
            break;
        case "Elective desc":
            courses = courses.OrderByDescending(s => s.Credits);
            break;
        case "Instructor":
            courses = courses.OrderBy(s => s.Instructor.LastName);
            break;
        case "Instructor desc":
            courses = courses.OrderByDescending(s => s.Instructor.LastName);
            break;
        case "Year":
            courses = courses.OrderBy(s => s.Year);
            break;
        case "Year desc":
            courses = courses.OrderByDescending(s => s.Year);
            break;
        case "AttendingDays":
            courses = courses.OrderBy(s => s.AttendingDays);
            break;
        case "AttendingDays desc":
            courses = courses.OrderByDescending(s => s.AttendingDays);
            break;
        case "AttendanceCap":
            courses = courses.OrderBy(s => s.AttendanceCap);
            break;
        case "AttendanceCap desc":
            courses = courses.OrderByDescending(s => s.AttendanceCap);
            break;
        case "StartDate":
            courses = courses.OrderBy(s => s.StartDate);
            break;
        case "StartDate desc":
            courses = courses.OrderByDescending(s => s.StartDate);
            break;
        case "Location":
            courses = courses.OrderBy(s => s.Location);
            break;
        case "Location desc":
            courses = courses.OrderByDescending(s => s.Location);
            break;
        case "Parish":
            courses = courses.OrderBy(s => s.Parish);
            break;
        case "Parish desc":
            courses = courses.OrderByDescending(s => s.Parish);
            break;
        case "Description":
            courses = courses.OrderBy(s => s.Description);
            break;
        case "Description desc":
            courses = courses.OrderByDescending(s => s.Description);
            break;
        case "Approved":
            courses = courses.OrderBy(s => s.Approved);
            break;
        case "Approved desc":
            courses = courses.OrderByDescending(s => s.Approved);
            break;
        case "Completed":
            courses = courses.OrderBy(s => s.Completed);
            break;
        case "Completed desc":
            courses = courses.OrderByDescending(s => s.Completed);
            break;
        case "Archived":
            courses = courses.OrderBy(s => s.Archived);
            break;
        case "Archived desc":
            courses = courses.OrderByDescending(s => s.Archived);
            break;
        default:
            courses = courses.OrderBy(s => s.Title);
            break;
    }
    int pageSize = 4;
    int pageNumber = (page ?? 1);
    return View(courses.ToPagedList(pageNumber, pageSize));
} 
```

我应该对上面的代码做些什么以使其更具可读性？我是否只是将它的一部分作为单独的方法移出并将它们移到控制器的底部？我是否将这些方法放在另一个文件中的某个地方并在此处引用它？

请记住我正在学习并且很享受清晰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:07:44.647

您如何更改代码纯粹是主观的，这是一个创造性的过程，您需要感受并努力成为更好的开发人员。

但作为一个伪代码示例，目标是使您的方法变小。不，真的，甚至更小！

使函数名称非常有意义，并确保它们告诉程序员该方法的真正意图是什么。这只是一个结构示例：

```
public class Something {

   public ActionResult Index() {
       MakeCallToFunction();
       var something = GetSomething();
       var somethingElse = GetSomethingElse(something);
       var model = new SomeViewModel(somethingElse);
       return View(model);
   }

   private void MakeCallToFunction () {
       ...
   }

   private string GetSomething() {
       ...
       return someVal;
   }

   private SomeObject GetSomethingElse(string something) {
       ...
       return someBigObject;
   }
} 
```

或者这可能意味着你使用所有这些小功能并创建一个类

```
public class Something {

   public ActionResult Index(int id) {
       var model = new SomeRelatedStuff.Load(id);
       return View(model);
   }
}

private class SomeRelatedStuff {

   public SomeRelatedStuff()

   public static SomeRelatedStuff Load(int id) {
       var something = GetSomething();
       var somethingElse = GetSomethingElse(something);
       var model = new SomeViewModel(somethingElse);
       MakeObject();
       return this;
   }

   private string GetSomething() {
       ...
       return someVal;
   }

   private SomeObject GetSomethingElse(string something) {
       ...
       return someBigObject;
   }

   private void MakeObject () {
       ...
   }

} 
```

作为旁注，请阅读 Robert Martin（鲍勃叔叔）的 Clean Code，本周末至少阅读前 4 章。然后再读一遍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:54:09.133

首先，摆脱你的魔线。将排序顺序设为枚举，如下所示：

```
public enum ActionSortOrder {
    Credits,
    Elective,
    ...
}

ActionSortOrder order = ActionSortOrder.Credits; 
```

这比使用未定义的字符串更易于管理，如果它的功能需要一些解释，您可以记录枚举成员。

其次，方法顶部的行有些混乱：

```
 ViewBag.CreditsSortParm = sortOrder == "Credits" ? "Credits desc" : "Credits"; 
```

因此，如果您将“Credits”作为排序顺序传递，它默认为降序吗？如果你不这样做，它默认为升序？为什么？为什么不提供升序/降序选项（再次使用枚举而不是魔术字符串）？为什么每次调用此方法时都会保存所有这些排序顺序？这些设置变量在哪里使用？您只使用此方法中传入的订单。

另外，不要担心开关看起来很大。switch 语句通常只用于避免一堆 if-else 语句。所以大多数交换机在实践中都有相当多的案例。

更多地了解您的代码将有助于评估它。

# perl - 如何规范化 Perl 函数参数以进行记忆化？

> ID：10835106
> 
> 赞同：10
> 
> 时间：2012-05-31T13:58:19.230
> 
> 标签：perl

如何将函数参数列表规范化为字符串，以便两个参数列表转换为相同的字符串，如果它们实际上是等效的？该算法应

1.  深入比较嵌入式哈希和列表，而不是通过引用
2.  忽略哈希键顺序
3.  忽略 3 和“3”之间的区别
4.  生成一个相对易读的字符串（不是必需的，但很好用于调试）
5.  表现良好（XS 优于 Perl）

这对于[memoization](http://en.wikipedia.org/wiki/Memoization)是必要的，即根据函数的参数缓存函数的结果。

作为一个稻草人的例子，[Memoize](http://search.cpan.org/perldoc?Memoize)使用它作为默认的规范化器，它失败了 #1 和 #3：

```
$argstr = join chr(28),@_; 
```

有一段时间我的首选标准化器是

```
JSON::XS->new->utf8->canonical 
```

但是，根据标量最近的使用方式，它对数字 3 和字符串“3”的处理[方式不同。](http://search.cpan.org/perldoc?JSON::XS#PERL_-%3E_JSON)这可以为本质上等效的参数列表生成不同的字符串，并降低记忆的好处。（绝大多数函数不会知道或关心它们是否得到 3 或“3”。）

为了好玩，我查看了一堆序列化程序，看看哪些区分 3 和“3”：

```
Data::Dump   : equal - [3] vs [3]
Data::Dumper : not equal - [3] vs ['3']
FreezeThaw   : equal - FrT;@1|@1|$1|3 vs FrT;@1|@1|$1|3
JSON::PP     : not equal - [3] vs ["3"]
JSON::XS     : not equal - [3] vs ["3"]
Storable     : not equal - <unprintable>
YAML         : equal - ---\n- 3\n vs ---\n- 3\n
YAML::Syck   : equal - --- \n- 3\n vs --- \n- 3\n
YAML::XS     : not equal - ---\n- 3\n vs ---\n- '3'\n 
```

在报告“相等”的那些中，不确定如何让他们忽略哈希键顺序。

我可以事先遍历参数列表并对所有数字进行字符串化，但这需要进行深层复制并且会违反＃5。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:12:28.150

几乎任何序列化程序都会以不同的方式处理 3 和“3”，因为它不知道数字和字符串化数字对您来说是相同的，并且这种假设对于一般数据是错误的。您必须自己规范化输入或输出。

对于输入，深度扫描将任何字符串化数字替换为其值+0 即可。如果您知道确切的数字可能在哪里输入，则可以大大缩短此扫描时间。

对于输出，一些简单的状态机甚至正则表达式（是的，我知道输出不规则）很可能足以将纯数字字符串值剥离为数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T15:23:34.363

`YAML`默认情况下，它的后代排序哈希键。设置`$YAML::SortKeys = 2`为对深度哈希进行排序。

设置`$YAML::Stringify`为真值和设置`$YAML::XS::QuoteNumericStrings`为假值将帮助您标准化数值。后一种设置将“取消引用”一个看起来像数字的字符串值。

* * *

此外，您可以使用`$Data::Dumper::Sortkeys = 1`规范化输出顺序`Data::Dumper`。设置`$Data::Dumper::Useqq = 1`将取消引用看起来像数字的字符串。

# tfs - 通过 msbuild.exe 发布 Web 项目会导致文件夹很长

> ID：10835108
> 
> 赞同：2
> 
> 时间：2012-05-31T13:58:41.717
> 
> 标签：tfs, build, msbuild, directory

我正在构建和发布一个 Web 项目，这是一个大型解决方案。我从一个由 TeamBuild 进程调用的 cmd 文件启动 msbuild.exe：

```
c:\Windows\Microsoft.NET\Framework64\v4.0.30319    MSBuild.exe /p:Configuration=Release /p:DeployOnBuild=True /p:CreatePackageOnPublish=true /T:Package "%~dp0%xxx.Project1.csproj" 
```

在Web部署包设置下project1.csproj的项目设置中：

将创建包的位置：$(SourcesDirectoryOfProject)\..\..\..\..\bin\xxx.Project1

这很好用，但问题是，“..\..\..\..\bin\xxx.Project1”中名为“Archive”的文件夹变得很长。我必须点击 16 个子文件夹，直到我进入真正的 Web 文件，如 Web.config 等。在存档文件夹下是子文件夹，它们似乎代表了临时放置文件夹的孔文件夹结构，其中首先创建了用于发布的文件：

```
...\Archive\Content\D_C\Builds\9\TeamProjectName\BigProject\Sources\BigProject\Main\Source\SolutionName\ProjectName\obj\Release\Package\PackageTmp\bin 
```

最后在 PackageTemp 下，我找到了我的 Web 文件。真正的问题是，某些文件的文件夹名称变得很长 - 所以我无法正确删除它们并且 TeamBuild 崩溃，因为它无法在编译和执行计算机操作之前清空 Builds-Folder。

最好有一个选项，我可以告诉 msbuild.exe（或者可能在项目设置中）它应该在哪里转储 WebProject 文件（我的意思是文件夹：App_Code、bin、配置；文件： global.asax、一些 xamlx 和 Web.config）

那么 - 如何将 WebProject 数据拖放到另一个指定路径？

此致

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:43:40.200

问题是错误的 MSBuild.exe 命令。我现在使用这个，它只将 Web 服务部署到特定的本地文件夹，而不需要任何 IIS：

```
MSBuild.exe /target:Build;PipelinePreDeployCopyAllFilesToOneFolder /p:Configuration=Release;_PackageTempDir=%binfolder% "projectfile.csproj" 
```

它也不做这个长文件夹名称的东西。

# c# - 该进程无法访问该文件，因为它正在被另一个进程在删除时使用

> ID：10835110
> 
> 赞同：1
> 
> 时间：2012-05-31T13:58:43.013
> 
> 标签：c#, file-in-use

我以为我通过关闭和处置我的阅读器解决了这个问题，但在某些情况下，该文件仍在使用中。接下来我调用了垃圾收集器，因此文件将被释放。这解决了 99% 的所有会导致此错误的问题。使用的代码：

```
 public override void Finish()
        {
            // Kill the reader!
            if (_reader != null)
            {
                _reader.Close();
                _reader.Dispose();

                // Make sure the server doesn't hold the file
                GC.Collect();
            }
            DeleteFile();
        } 
```

在处理文件内容的大进程之后调用完成。

当我处理只有 1 行（或很少）行的文件时，**有时**会出现此错误。看来windows太快了，而且`DeleteFile();`失败了。我很难重现这个错误，但有时它会连续发生两次。
当我处理需要超过 2 秒的文件时，这种情况永远不会发生。
我不能使用 using ，因为文件可以是 GB 的，而且当它的内存太满时，Windows 不喜欢它。此外，这种方式的过程执行得更好。

**问题：**
我还能做些什么来防止这个错误吗？

PS：请随时询问更多信息。

编辑：
删除文件的代码

```
 protected void DeleteFile()
        {
            // Delete the file
            if (FileName != null && File.Exists(FileName))
                File.Delete(FileName);
        } 
```

创建文件的代码

```
 protected void WriteFile()
        {
            // Prepare variables
            string path = Path.GetTempPath();

            path += "\\MyTempFile";

            // Modifiy path to avoid overwriting an existing file.

            path += ".csv";

            // Write the file to the temp folder
            using (FileStream fs = new FileStream(path, FileMode.Create))
            {
                fs.Write(MyFile, 0, MyFile.Length);
            }

            // Was the writing successfully completed?
            _FileName = File.Exists(path) ? path : null;
        } 
```

创建阅读器的代码

```
 protected override void ReadFile()
        {
            if (FileName == null)
                WriteFile();

            // Read the lines
            _reader = new StreamReader(FileName, Encoding.Default, true);
            while (_reader.Peek() != -1)
            {
                TotalRows++;
                _reader.ReadLine();
            }

            // Read the lines
            _reader = new StreamReader(FileName, Encoding.Default, true);
        } 
```

我使用一个抽象类来确定应该如何读取输入。使用以下语句，我将遍历文件的内容。

```
 while (FileReader.NextRow(out currentRow, out currentRowNumber))
        {
               // Process current Row...
        } 
```

NextRow() 方法看起来像这样

```
 public override bool NextRow(out List<object> nextRow, out int rowNumber)
        {
            if (RowNumber > TotalRows)
            {
                nextRow = null;
                rowNumber = 0;

                return false;
            }

            // Set the row number to return
            rowNumber = RowNumber;

            // Prepare the row
            nextRow = _reader.ReadLine().ExtensionThatProcessesTheRow();
            RowNumber++;

            return true;
        } 
```

在 while 循环关闭后，我调用完成过程。`FileReader.Finish();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:03:43.810

正如您所说的那样，它有时只会发生，可能只是锁被锁定了，如果您进行检查，那么希望如果在您开始对其进行另一次检查时它失败了，那么它应该有时间摆脱缓存的锁。如果您使用这样的方法来检查文件是否仍在使用中：

```
public bool CheckIfFileIsBeingUsed(string fileName){

     try{    
         File.Open(fileName, FileMode.Open, FileAccess.Read, FileShare.None);
          }

      catch (Exception exp){
               return true;
        }

      return false; 
```

}

如果它返回 false 然后继续删除文件，否则等待然后再次运行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:27:17.317

注意：这可能应该是一个评论，但我需要额外的空间。

这段代码没有意义：

```
// Prepare variables
string path = Path.GetTempPath();

// Write the file to the temp folder
using (FileStream fs = new FileStream(path, FileMode.Create)) 
```

Path 是临时文件的*目录*。您应该无法创建具有该名称的文件。

此外，这里使用了一个名为 FileName 的变量：

```
protected void DeleteFile()
{
    // Delete the file
    if (FileName != null && File.Exists(FileName))
        File.Delete(FileName);
} 
```

但在 WriteFile 中，您使用的是一个名为 _FileName 的变量：

```
// Was the writing successfully completed?
_FileName = File.Exists(path) ? path : null; 
```

基于以上所述，我的猜测是，您并没有写出您认为正在写的内容，或者没有删除您认为正在删除的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:56:12.220

我想我发现了问题...
在将其重置为`ReadFile()`.

```
 _reader = new StreamReader(FileName, Encoding.Default, true);
        while (_reader.Peek() != -1)
        {
            TotalRows++;
            _reader.ReadLine();
        } 
```

我把它改成了。

```
 using (var reader = new StreamReader(FileName, Encoding.Default, detectEncodingFromByteOrderMarks: true))
            {
                while (reader.Peek() != -1)
                {
                    TotalRows++;
                    reader.ReadLine();
                }
            } 
```

# r - 多线程与 R？

> ID：10835122
> 
> 赞同：63
> 
> 时间：2012-05-31T13:59:25.597
> 
> 标签：r

阅读[R-project](http://www.r-project.org/)网站，有一些（不清楚）对 R 多线程的引用，但不清楚基础产品和[CRAN](http://cran.cnr.berkeley.edu/)库是如何编译的。

[Revolution Analytics](http://www.revolutionanalytics.com/products/revolution-r.php)为 Windows 和 Redhat 提供多线程基础（？）下载。

其他一些 Linux 发行版是否也包括多线程 R（和包）？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-05-31T14:05:32.997

你很困惑。

R（以及之前的 S）内部是单线程的，并且几乎肯定会保持单线程。据我了解，Duncan Temple Lang 博士的工作就是要克服这个问题，如果他做不到......

也就是说，有一些多线程的口袋：

*   首先，无论何时进行外部调用，并且通过适当的锁定，您都可以使用多线程。这就是 BLAS 库 MKL、Goto/Open BLAS、Atlas（如果构建多线程）……都提供的。Revo R“仅”附带（英特尔的）MKL，因为英特尔恰好是 Revo 的关键投资者

*   如果你对你所做的事情很小心，你可以使用 OpenMP（多线程的编译器扩展）。这始于 Luke Tierney 在 pnmath 和 pnmath0 （曾经是实验性/外部包）上的工作，此后一直缓慢但肯定地进入 R 本身。

*   接下来，在多核世界中，在正确的操作系统上，您始终可以`fork()`. 这就是多核封装的先驱以及现在并行封装的方式。

*   最后但同样重要的是，Rmpi、snow、parallel 等软件包使用了 MPI 的网络/RPC 路由，并在 HPC 介绍中有所介绍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-02T17:56:55.123

`Renjin`是解释器的基于 JVM 的实现。他们声称：

> 与 GNU R 不同，Renjin 是多线程的，可以在平台即服务环境中愉快地运行，例如 Google Appengine、AWS Elastic Beanstalk、Heroku 或 Microsoft Azure。

`#resource` [http://www.bedatadriven.com/products/renjin.html](http://www.bedatadriven.com/products/renjin.html)

尽管如此，我们将从 R 调用的实际 R 包可能不是线程安全的。

请参阅从`Jep`调用的角度解释此问题的文档。`CPython``Java/Scala`

[https://github.com/ninia/jep/wiki/How-Jep-Works#threading-complications](https://github.com/ninia/jep/wiki/How-Jep-Works#threading-complications)

> 由于 JNI 的复杂性和局限性，创建 Jep 实例的线程必须重复用于对该 Jep 实例的所有方法调用。Jep 将强制执行此操作并抛出提及无效线程访问的异常。（将来我们希望简化或提供用于线程管理的实用程序）。
> 
> 不应在同一线程上同时运行多个 Jep 实例。虽然这在技术上是允许的，但它可能会扰乱线程状态并导致 Python 解释器死锁。如果将来遇到，这可能会更改为抛出异常。

因此，似乎有希望，`Renjin`但实际使用的二进制（C/C++ 等）包需要验证线程安全。

还有其他 R 实现

[https://dynamicecology.wordpress.com/2014/01/14/r-isnt-just-r-anymore/](https://dynamicecology.wordpress.com/2014/01/14/r-isnt-just-r-anymore/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-13T01:50:30.173

[这个](http://biowulf.nih.gov/apps/R.html)呢？由于该页面的修改日期是 2014 年 5 月，我认为提到的软件包相对较新，或者在编写第一个答案时可能还不稳定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-17T15:19:37.107

您可以通过使用 KNIME 或任何其他利用 rserve.exe 可执行文件的程序来有效地多线程 R。在 KNIME 中，您可以将 R Snippet 放在 Parallel Chunk 节点系列中，以便按行执行操作。对于按列操作，您可以将数据集拆分为列子集并在每个集上执行 R Snippets，然后将它们重新合并在一起。

我希望这能让你的 CPU 风扇转得更快！

# php - 可以在 FORM 之外单击的图像按钮

> ID：10835128
> 
> 赞同：0
> 
> 时间：2012-05-31T13:59:49.690
> 
> 标签：php, html

我想在我的 PHP 中简单地放置一个图像按钮，而不使用任何形式。

我只是这样做：

```
<input type="image" src="/images/buttons/button.gif"/> 
```

那么有什么办法可以添加任何功能吗？我只想通过单击图像按钮将页面重定向到另一个页面。

如果还有其他方法，请告诉我。

（我是 PHP 新手，大约一个月前开始学习）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:02:18.237

如果您只想重定向到另一个页面，请使用图像作为链接：

```
<a href="another_page.php"><img src="/images/buttons/button.gif"/></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:04:29.273

您可以将其包装在超链接中：

```
<a href="pageToGoTo.php"><img src="/images/buttons/button.gif" /></a> 
```

# javascript - 调用 FB Credits API 期间出现错误 1151

> ID：10835134
> 
> 赞同：0
> 
> 时间：2012-05-31T14:00:07.017
> 
> 标签：javascript, facebook-credits

我尝试在外部站点上使用 Credits API 并在弹出窗口中收到以下错误：

*API 错误代码：1151

API 错误说明：抱歉，此应用可能不符合接受 Facebook Credits 的条件。如果此应用之前接受过积分，请重试。

错误消息：无效的应用程序*

如此处所述：

[脸书积分。错误 1151](http://facebook.stackoverflow.com/questions/7429519/facebook-credits-error-1151)

只有 FB 画布应用程序有资格使用此功能。

但！

如果我采用弹出 URL 并将显示参数从*popup*更改为*page*，它工作正常。

所以，我想知道，我可以在外部网站上使用它吗？

为什么它作为*页面*工作而不作为*弹出窗口*工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:22:20.000

> 为什么它作为页面工作而不作为弹出窗口工作？

因为它是明确设计的，因为文档清楚地提到：

> 此对话框仅支持桌面显示模式：page. （[https://developers.facebook.com/docs/reference/dialogs/pay/](https://developers.facebook.com/docs/reference/dialogs/pay/)）

并且[https://developers.facebook.com/docs/credits/](https://developers.facebook.com/docs/credits/)也非常清楚地指出，

> Facebook 提供了一个支付平台，使开发人员能够利用我们的支付服务向他们的用户*在 Facebook 上的应用程序*以及他们的*移动网络应用*程序上收费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:15:23.420

我们得到了这个错误代码，但是*在*画布上。只是把它放在这里，以防其他人在谷歌上搜索并像我们一样难过。

我们发现无法从框架集中调用支付对话框。因此，避免使用框架集的另一个原因。

# ios - 将 NSDictionary 写入 plist

> ID：10835135
> 
> 赞同：0
> 
> 时间：2012-05-31T14:00:14.290
> 
> 标签：ios, plist, nsdictionary, writetofile

嗨，我正在尝试将 NSDictionary 写入文档文件夹中的 plist，但无法写入，我正在使用 writeToFile:atomically: 方法，该方法返回 False。完整的代码是

```
-(void)writeData:(NSDictionary *)dicResponseData
{
    // get paths from root directory

    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Contractors.plist"];   

    [dicResponseData writeToFile:plistPath atomically: TRUE];  
} 
```

该词典包含 25 个子词典。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:39:55.860

字典中的所有对象都必须是属性列表对象。

> 此方法在写出文件之前递归地验证所有包含的对象是属性列表对象（NSData、NSDate、NSNumber、NSString、NSArray 或 NSDictionary 的实例），如果所有对象都不是属性列表对象，则返回 NO，因为结果文件不是有效的属性列表。

# svn - 使用复制和粘贴避免 SVN 签出和更新？

> ID：10835139
> 
> 赞同：0
> 
> 时间：2012-05-31T14:00:19.643
> 
> 标签：svn, tortoisesvn

我在 Assembla 上的 SVN 上有大约 20GB 的文件，我想将它们复制到我在本地拥有的另一台笔记本电脑上。我已经有 SVN 上文件的本地副本。

我想做的是将我想要的文件从我现有的计算机驱动器复制并粘贴到外部驱动器和新机器上。这可能吗？这会弄乱 SVN 连接吗？

我试图避免 20GB 的“结帐”（SVN 更新）。

这行得通吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:11:03.080

在工作副本上使用“svn export”命令。也就是说，类似于'svn export c:/workingcopies/myproject c:/notworkingcopies/myproject'。这会将工作副本的头版本导出到新目录中。

我相信（但不确定）TortoiseSVN 的导出命令会以同样的方式工作。

较新版本的 subversion 将文件的原始“原始”副本存储在 .svn 目录中，使用 sqlite 数据库存储内容，并且通常不支持像旧版本那样简单地复制文件。

我不确定格式更改是什么时候发生的，抱歉。

# php - 如何使用 PHP 在 MySQL 中保存二进制数据？

> ID：10835146
> 
> 赞同：0
> 
> 时间：2012-05-31T14:00:34.493
> 
> 标签：php

我想从一台服务器下载图像，并将二进制数据保存到 mysql blob 字段中。但它不工作。

1.  如果我正在显示 $picture1，那么它会显示不可读的字符。字节 $picture2 未显示。

2.  如果我尝试将其保存在表格中，则它不会保存在表格中。

我怎样才能将它保存到我的 blob 字段中。

```
$picture1 = GetImageFromUrl($url);
$picture2 = addslashes(fread(fopen($picture, "r"), filesize($picture)));

print_r($picture1)
print_r($picture2)

function GetImageFromUrl($link)
{

$ch = curl_init(); 
curl_setopt($ch, CURLOPT_POST, 0); 
curl_setopt($ch,CURLOPT_URL,$link); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
$result=curl_exec($ch); 
curl_close($ch); 
return $result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:07:51.377

在保存到数据库字段之前尝试使用 base64 对其进行编码：

```
echo base64_encode($picture1); 
```

要从数据库中读出，您需要对其进行解码：

```
echo base64_decode($picture); 
```

但一定要发送正确的标题，例如：

```
header('Content-Type: image/png'); 
```

但请先阅读以下内容：[**在 DB 中存储图像 - 是还是不是？**](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)并考虑您是否真的想将其保存在数据库中。

我严格反对它，但它在你的权力范围内

# silverlight - Light Switch 中的整个银色光幕

> ID：10835147
> 
> 赞同：0
> 
> 时间：2012-05-31T14:00:37.093
> 
> 标签：silverlight, visual-studio-lightswitch

是否可以在银光中创建整个屏幕并在我的电灯开关应用程序中使用它。我发现根据客户要求在电灯开关中创建自定义页面设计非常困难。任何人都可以建议我一些想法或指向我一些有用的链接..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:56:52.320

是的，请参阅：帮助台：高级 Visual Studio LightSwitch 应用程序 [http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/86/Help-Desk-An-Advanced-Visual-Studio-LightSwitch-Application.aspx](http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/86/Help-Desk-An-Advanced-Visual-Studio-LightSwitch-Application.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T18:56:22.040

这是有关如何使用带灯开关的 Silverlight 控件的分步指南。[http://darmusings.wordpress.com/tag/custom-control/](http://dearmusings.wordpress.com/tag/custom-control/)我在演示中使用了调度程序控件，但它几乎可以是 Silverlight 的其他任何东西。

# c# - 如何从java调用DLL？

> ID：10835149
> 
> 赞同：0
> 
> 时间：2012-05-31T14:00:41.420
> 
> 标签：c#, java

如何从java调用DLL？我想将 Java 应用程序集成到 Windows。我以 Outlook 为例，我有 Outlook dll，那怎么调用呢？我们有类似的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:03:04.313

使用 Java Native Access (JNA)：http: [//jna.java.net/](http://jna.java.net/)

[http://twall.github.com/jna/3.4.0/javadoc/overview-summary.html#overview_description](http://twall.github.com/jna/3.4.0/javadoc/overview-summary.html#overview_description)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:02:27.130

[System.LoadLibrary](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#loadLibrary%28java.lang.String%29)可用于加载库。检查[this previous thread](https://stackoverflow.com/questions/2535700/loading-dll-in-java-eclipse-jni)以获取示例用法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:03:58.860

您所需要的只是 Java 原生接口[http://docs.oracle.com/javase/1.5.0/docs/guide/jni/index.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:23:33.057

请参阅 JNI，它的目标是 java 与其他语言交互......已经发布了许多链接

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T14:48:44.070

您需要使用**JNI**来调用本机函数。在您的情况下，您需要首先使用 Runtime.getRuntime().loadLibrary( **PATH_OF_DLL_FILE** )在内存中加载库

您也可以使用以下链接[http://www.equestionanswers.com/dll/java-call-dll-functions.php](http://www.equestionanswers.com/dll/java-call-dll-functions.php)

# sql - 使用 T-SQL 附加多个数据库

> ID：10835153
> 
> 赞同：3
> 
> 时间：2012-05-31T14:00:50.203
> 
> 标签：sql, sql-server-2008

我们正在将我们的一台服务器从 SQL Server 2005 迁移到 SQL Server 2008。这台服务器上有大约 50 个小型数据库。

我们正在采取的迁移路径如下：

1.  使用 SQL 2008 创建新服务器
2.  关闭旧服务器上的 SQL 服务并将数据库复制到新服务器
3.  关闭旧服务器并将新服务器重命名为与旧服务器相同的名称。
4.  附上50个数据库

有没有使用 t-sql 将 50 个数据库附加到新服务器的快速方法？

所有数据文件都将位于 E:\DATA 并且事务日志将位于 E:\TLOG

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T14:07:32.393

使用 SQLCMD 模式，您可以轻松编写以下脚本：

```
:setvar dbname YourDatabaseName
:setvar dbfile N'E:\DATA\YourDatabase.mdf'
:setvar logfile N'E:\TLOG\YourDatabase_log.ldf'
USE [master]
GO

CREATE DATABASE $(dbname) ON 
( FILENAME = $(dbfile) ),
( FILENAME = $(logfile) )
FOR ATTACH
GO 
```

这可以`sqlcmd.exe`从命令行工作（你甚至可以从命令行提供变量的值`dbname, dbfile, logfile`），或者如果你启用了它在 SQL Server Management Studio 中工作`Tools > Options > Query Execution > by default, open new queries in SQLCMD mode`。

在 MSDN 上阅读有关[SQLCMD 实用程序及其所有参数的更多信息。](http://msdn.microsoft.com/en-us/library/ms162773%28v=sql.100%29)

PS：当然，这种启用了 SQLCMD 的脚本的方法也适用于 BACKUP/RESTORE 周期:-)（如 Aaron 推荐的那样）

PPS：如果您有良好的命名约定，并且数据文件始终是`$(dbname).mdf`并且日志文件始终是`$(dbname)_log.ldf`，您也可以使用这个缩短的 SQLCMD 脚本：

```
:setvar dbname YourDatabaseName
USE [master]
GO

CREATE DATABASE $(dbname) ON 
( FILENAME = N'E:\DATA\$(dbfile).mdf' ),
( FILENAME = N'E:\TLOG\$(logfile)_log.ldf' )
FOR ATTACH
GO 
```

然后从命令行调用它：

```
C:\>  sqlcmd.exe -S yourserver -E -i attach.sql -v dbname=YourDb1 
```

依此类推，对于需要重新附加的每个数据库一次。

PPPS：如果你想恢复备份，它只是稍微复杂一点：

```
:setvar dbname YourDatabaseName
USE [master]
GO

RESTORE DATABASE $(dbname)
FROM DISK = N'E:\Backup\$(dbname).bak' 
WITH FILE = 1,  
MOVE N'$(dbname)' TO N'E:\DATA\$(dbname).mdf',  
MOVE N'$(dbname)_Log' TO N'E:\TLOG\$(dbname)_Log.ldf',  
NOUNLOAD, REPLACE
GO 
```

只要您将`.bak`文件命名为与数据库名称相同的名称，并且将它们放在固定位置（我`E:\Backup`在这里假设-根据需要进行调整），就可以使用此方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:46:33.120

为了重申我的评论，我建议使用备份/恢复方法，而不是分离/附加方法（我的原因在[此处](https://dba.stackexchange.com/a/18598/1186)和[此处](https://www.sentryone.com/blog/aaronbertrand/bad-habits-file-backups)概述）。

虽然我喜欢@marc_s 的 SQLCMD 方法，但我更喜欢直接从元数据中提取这些内容。这样我可以检查所有输出，复制和粘贴我想要批量执行的部分，而不是一次全部执行，等等。比如：

```
SET NOCOUNT ON;
DECLARE @folder nvarchar(512) = N'\\fileshare\folder\'; -- 'backup location

SELECT N'BACKUP DATABASE ' + QUOTENAME(name) 
  + N' TO DISK = N''' + @folder + name + N'.BAK'' WITH INIT;
  ALTER DATABASE ' + QUOTENAME(name) + N' SET OFFLINE;'
FROM sys.databases 
WHERE database_id > 4 -- AND other filter criteria

SELECT N'RESTORE DATABASE ' + QUOTENAME(d.name) 
  + N' FROM DISK = N''' + @folder + d.name + N'.BAK'' WITH ' 
  + STUFF(
    (SELECT N', 
      MOVE N''' + f.name + N''' TO ''E:\DATA\' + f.name + '.mdf''' 
      FROM master.sys.master_files AS f 
      WHERE f.database_id = d.database_id 
      AND type_desc = N'ROWS'
      FOR XML PATH(''), 
      TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 1, N'') 
  + N', ' + STUFF(
    (SELECT N',
      MOVE N''' + f.name + N''' TO N''E:\TLOG\' + f.name + N'.mdf'''
      FROM master.sys.master_files AS f 
      WHERE f.database_id = d.database_id 
      AND type_desc = 'LOG'
      FOR XML PATH(''), 
      TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 1, N'') + N';
  ALTER DATABASE ' + QUOTENAME(d.name) 
  + N' SET COMPATIBILITY_LEVEL = 100;'
FROM sys.databases AS d 
WHERE database_id > 4; -- AND other filter criteria 
```

（这假设您只有数据/日志文件，没有文件流等，并且您可以从两个实例都可访问的公共位置备份到/恢复。）

澄清一下，您将在 2005 服务器上生成两组命令，复制并在那里运行备​​份命令（然后可能立即将它们设置为脱机），然后在 2008 服务器上复制并运行恢复命令。

您还需要更新关键表的统计信息，否则当新服务器上的计划缓存准备就绪时，当您的性能下降时，您可能会遇到一些严重的问题......

# vim - 复杂的 ftdetect 插件

> ID：10835156
> 
> 赞同：3
> 
> 时间：2012-05-31T14:01:05.037
> 
> 标签：vim, syntax, syntax-highlighting

我想为自定义编程语言创建 vim 语法高亮文件。即动态导航系统内部的 C/AL。

问题是无法通过文件扩展名检测到。过去 C/AL 使用 *.TXT 文件。突出显示所有 *.TXT 文件也不好，因为其中一些可能包含 C/AL 代码。

我知道 VIM 不仅可以通过扩展名检测语言，还可以通过文件内容检测语言。我在[官方手册](http://vimdoc.sourceforge.net/htmldoc/filetype.html)中找到了一些例子。但是它声明我可以使用第一种方法或第二种方法。

是否可以一次将它们结合起来？我在哪里可以找到这种行为的例子？

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T16:21:37.353

您可以使用 getline 根据文件内容优化您的检测。例如，这会检测 .tmp 文件中的 XML：

```
autocmd! BufNewFile,BufRead *.tmp
    \ if getline(1) =~ '<?\s*xml.*?>' |
    \     setfiletype xml |
    \ endif 
```

另一种方法是为每个 C/AL 文件[添加一个模式行。](http://vimdoc.sourceforge.net/htmldoc/options.html#modeline)

# c++ - 没有测试用例的 Boost 单元测试框架

> ID：10835157
> 
> 赞同：2
> 
> 时间：2012-05-31T14:01:12.640
> 
> 标签：c++, boost

我有一个测试程序，我想在其中使用升压测试工具。然而，这个程序不是一系列单元测试，我需要访问传递给`main`函数的参数。以前我使用过该`minimal.hpp`文件，但这有一个很大的限制，它总是定义`main`，因此不能包含在多个文件中。它还具有一组有限的测试工具。

如何在不使用单元测试用例的情况下使用 boost 测试宏？我已经知道如何使用我自己的 main 函数可以调用单元测试库（使用`unit_test_main`），但我不记得文档在哪里以及我可以传递给它的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T06:05:36.983

我建议您继续使用测试用例。至少一个；o)

您可以通过 framework::master_test_suite().argc、framework::master_test_suite().argv 访问命令行参数。[您可以在此处](http://www.boost.org/doc/libs/1_49_0/libs/test/doc/html/utf/user-guide/test-organization/master-test-suite.html)阅读更多详细信息。

# ruby-on-rails - jruby 1.6.5 是否与 rails 2.3.10 兼容？

> ID：10835162
> 
> 赞同：0
> 
> 时间：2012-05-31T14:01:27.707
> 
> 标签：ruby-on-rails, jruby

有没有人尝试使用 jruby 1.6.5 来使用 rails 2.3.10 或 2.3.x 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:28:06.233

确实如此，我建议您使用最新的 1.6，即**1.6.8**

jruby-1.6.x 与 ruby​​ 1.8.7 兼容，这对于 rails 2.3.x 来说是“理想的”

尝试运行`jruby -v`你会得到类似的东西：

`jruby 1.6.7 (ruby-1.8.7-p357) (2012-02-22 3e82bc8) (Java HotSpot(TM) Server VM 1.6.0_32) [linux-i386-java]`

报告**ruby​​-1.8.7-p357**兼容性（在 --1.8 模式下）...

如果您打算使用 Java 网络服务器，例如 Trinidad（或 Warbler），它使用 JRuby-Rack 作为 Rack/Rails 和 Servlet 之间的兼容层，请务必使用 (~> 1.1.13) **1.1.13.3**它是（向后）兼容所有 JRuby 1.6.x 并运行 Rails 2.3x（以及）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:07:10.413

好吧，我只是试一试。JRuby 1.6.5 试图兼容 Ruby 1.9.x，所以真正的问题可能是以下之一：

*   [Ruby 1.9 与 rails 2.3 兼容吗？](https://stackoverflow.com/questions/2148848/is-ruby-1-9-compatible-with-rails-2-3)
*   [为 Rails 使用 Ruby 1.9 是否可行？](https://stackoverflow.com/questions/1033484/is-it-feasible-to-use-ruby-1-9-for-rails-yet)

我不记得使用 Rails 2.3.x 必须做什么，但如果执行以下步骤应该类似容易（如果您曾经`rvm`安装过 JRuby 1.6.5）：

*   `rvm use jruby1.6.5`
*   启动您的红宝石应用程序。
*   通过执行以下操作添加缺少的宝石：`gem install <missing-gem> -r`

真正的答案是：不，我没有尝试使用 JRuby 1.6.5，因为早在 JRuby 1.6.5 出现之前，我就将所有 Rails 应用程序都切换到了 3.x。

# javascript - 使用javascript`document.getElementsByTagName`解析xml（xforms）文档在phonegap android中不起作用

> ID：10835165
> 
> 赞同：0
> 
> 时间：2012-05-31T14:01:38.707
> 
> 标签：javascript, android, jquery, xml, cordova

我在用 javascript 解析 xform xml 时遇到了一些问题。

xml根目录的结构是：

```
<?xml version="1.0"?>
<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:ex="http://www.w3.org/2001/xml-events" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa">
  <h:head>
    <h:title>Phonegap Survey</h:title>        
  </h:head>
  <h:body>A ton more tags here</h:body>
</h:html> 
```

我正在使用 firefox (v.12) 开发并尝试部署到 android 上的 phonegap/cordova。我正在使用 jquery ajax 从 odk 服务器获取数据。我正在指定`dataType: 'xml'`，它正在按预期响应文档对象。在 Firefox 中，我编写了一个应用程序，将来自该 xml 的数据呈现给用户。我正在使用内置的 javascript DOM 函数，例如：

```
var title = surveyXML.getElementsByTagName('h:title')[0].firstChild.data
var body = surveyXML.getElementsByTagName('h:body')[0];
var text = surveyXML.getElementsByTagName('text') 
```

我已经使用这些方法编写了完整的应用程序（并且运行良好）。但是现在我已经将我的文件复制到了 eclipse 上的 phonegap（在 android 模拟器 2.3 上运行 cordovo 1.7.0），没有一个 DOM 调用返回元素！我得到类似的东西：

```
05-31 13:21:28.686: D/CordovaLog(841): file:///android_asset/www/formcontroller.js:
line 159 : TypeError: Result of expression 'body' [undefined] is not an object. 
```

对于所有的电话。我已验证设备具有正确的 xml（它不是空的或任何东西）

因此，为了完成这项工作，我尝试使用 jQuery 来导航文档对象，希望它知道我不知道的东西。使用如下调用：

```
$(surveyXML).find('title');
$(surveyXML).find('h:title') 
```

根本不工作。但是没有前缀的标签`h:`可以正常工作，如果我要搜索`$(surveyXML).find('text')`它会按预期返回所有`text`元素。

看到根元素是`<html>` 我尝试指定的`dataType: html`（即使文档明确标记为，也只是尝试一下`<?xml version="1.0"?>`）并且 jquery 无法解析它，正如预期的那样。

所以我想知道：**如何解析这个 XML 跨平台，以便它可以在浏览器和 phonegap 中工作。而且，假设它不能同时使用相同的 DOM 操作函数，我怎样才能至少让它在 phonegap 中工作？**

一如既往地感谢任何帮助。谢谢你。

**编辑：现在我只是手动引用元素的确切位置，比如我要去的身体`xml.firstChild.children[1]`。因为我是最后期限。我觉得应该还是有办法使用 getElementsByTagName 。泰。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:48:29.410

这已经有 2 周没有答复了，所以我只是发布我所做的。

就目前而言，我只是手动引用元素的确切位置，例如我将使用 xml.firstChild.children[1]。

所以我所做的不是搜索带有命名空间的标签，而是直接引用它们。

# ruby - 带有嵌入变量的 Ruby 字符串

> ID：10835166
> 
> 赞同：9
> 
> 时间：2012-05-31T14:01:43.993
> 
> 标签：ruby, yaml

如何在 yaml 中存储带有嵌入变量的 ruby​​ 字符串，但仅在从 yaml 获取字符串时才插入变量值？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-31T14:16:40.367

```
str = "Hi %{name}, %{msg}. Bye %{name}." #yaml it, de-yaml it back to string
h = {:name=> "John", :msg=> "this message is for you"}
puts str % h
#=>Hi John, This message is for you. Bye John. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:25:14.760

像 rails 一样将 erb 嵌入到 yaml 文件中：

```
# config/initializers/load_config.rb
APP_CONFIG = YAML.load_file("#{Rails.root}/config/app_config.yml")[Rails.env]

# config/app_config.yml
development:
  key1: <%= # ruby code ... %>
test:
  key1: <%= # ruby code ... %>
production:
  key1: <%= # ruby code ... %> 
```

# red5 - 红 5 录像机。Installer.swf 不工作

> ID：10835171
> 
> 赞同：0
> 
> 时间：2012-05-31T14:02:05.760
> 
> 标签：red5, fla

我在我的 windows xp 上安装了 Red (setup-Red5-1.0.0-RC2-java6)。Red5 服务器运行正常。但installer.swf 无法连接。安装演示时也出现 404 错误。demos 目录也不在该位置。

任何想法可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T01:38:05.500

尝试使用 0.9.1 版本。此外，您的防火墙应该允许侦听端口 5080（red5 的默认值）。作为替代方法，请尝试从源中继手动安装演示并重新启动服务器。

# jquery - jQuery 平滑 div 滚动滚动速度左边比右边快很多

> ID：10835172
> 
> 赞同：2
> 
> 时间：2012-05-31T14:02:06.833
> 
> 标签：jquery, smooth-scrolling

我目前正在尝试使用 Smooth Div Scroll (http://www.smoothdivscroll.com/) 在网站上制作“全屏”产品组合。我有一个问题，左滚动比右滚动快得多。我在演示中注意到它们的速度相同，我无法弄清楚为什么它对我的生活不起作用。我在下面粘贴了 CSS 和 JS。我还提供了该网站的链接。如果有人对我如何解决这个问题有任何想法，我将不胜感激！

**CSS：**

```
div#full-screen-portfolio {
    width: 100%;
    height: 100%;
    overflow-y: hidden;
}

div.scrollWrapper
{
    position: relative;
    overflow: hidden;
    width: 100%;
    height: 100%;
}

div.scrollableArea
{
    position: relative;
    width: auto;
    height: 100%;
}

div.scrollingHotSpotLeftVisible
{
    width: 130px;
    height: 200px;
    top: 50%;
    margin-top: -100px;
    left: 20px;
    position: absolute;
    z-index: 1000;
    background: url(images/full-screen-arrow-left.png) transparent no-repeat center center;
    zoom: 1; /* Trigger "hasLayout" in Internet Explorer 6 or older versions */
}

div.scrollingHotSpotRightVisible
{
    width: 130px;
    height: 200px;
    top: 50%;
    margin-top: -100px;
    right: 20px;
    position: absolute;
    z-index: 1000;
    background: url(images/full-screen-arrow-right.png) transparent no-repeat center center;
    zoom: 1;
}

body.full-screen-portfolio div#back-button {
    position: absolute;
    z-index: 1000;
    top: 30px;
    left: 30px;
}
body.full-screen-portfolio div#contact-us-area {
    position: absolute;
    bottom: 50px;
    left: 0;
    z-index: 1000;
}
body.full-screen-portfolio div#contact-us-area ul {
    list-style: none;
    margin: 0;
    padding: 0;
}
body.full-screen-portfolio div#contact-us-area ul li {
    float: left;
    height: 91px;
} 
```

**JS：**

```
$("#full-screen-portfolio").smoothDivScroll({
    visibleHotSpotBackgrounds: "always",
    hotSpotScrollingStep: 100
}); 
```

**网站：**

[http://lightboxwebsitedesign.co.uk/newsite/full-screen-portfolio/](http://lightboxwebsitedesign.co.uk/newsite/full-screen-portfolio/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:49:30.507

如果升级到[SmoothDivScroll 1.3](http://www.smoothdivscroll.com) ，您是否仍然遇到此问题？无论如何，您都应该考虑进行此升级，因为 Smooth Div Scroll 现在支持触摸滚动，这对于访问您网站的 iPad 用户来说非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:41:41.737

我在 IE7 (SDS 1.3) 中注意到了同样的效果。似乎左侧热点以恒定速度滚动 - 最高 - 并且没有考虑鼠标在自身内部的位置。

测试页 - [http://ateliermoscow.com/ru/collections/osenzima12-13lookbook/](http://ateliermoscow.com/ru/collections/osenzima12-13lookbook/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:46:25.753

尝试将此添加到您的 CSS 文件中：

```
div.scrollingHotSpotLeft
{
    width: 10%;
} 
```

# c++ - 如何使用 C++ 和 QT 显示带有动态数据的网页

> ID：10835177
> 
> 赞同：3
> 
> 时间：2012-05-31T14:02:23.380
> 
> 标签：c++, qt

我正在尝试使用带有动态数据的 C++/QT 显示网页。

1.  如果用户单击，则应显示网页
2.  网页应包含表格格式的数据。数据将使用 C++ 从表中读取，并且是动态的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:58:02.363

`setHtml()`您可以使用函数设置 QWebView 的 HTML 内容。看看[文档](http://doc.qt.io/qt-5/qwebview.html#setHtml)。当用户单击按钮加载 HTML 时调用它。要获取加载的 HTML 代码的内容，您可以在 QWebView 中使用[QWebFrame](http://doc.qt.io/qt-5/qwebframe.html)提供的两种方法：
`webview->page()->mainFrame()->toPlainText()`
`webview->page()->mainFrame()->toHTML()`
您必须解析 HTML 以从 QWebView 中显示的表中读取数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T15:01:41.680

**回答第一个问题**

您可以使用**[QWebView](http://qt-project.org/doc/qt-4.8/qwebview.html)**`QWebView::setHtml()`使用or 函数显示您的启动 html `QWebView::load()`。

**回答第二个问题**

关于这个问题，您可以通过多种方式在页面中设置动态数据。

一种方法是您可以使用**javascript**函数来更新您的 html 表。您将在 html in`<script>`标记中插入它。现在您可以使用以下函数传递数据（通过 c++ 读取）..

```
webView->page()->mainFrame()->evaluateJavaScript(yourJavascript); 
```

那么你将不得不`yourJavascript`从通过 c++ 读取的数据生成 javascript 函数调用字符串。

但是，如果您可以从数据库中以**JSON**格式检索数据，那对您来说将非常容易。例如，您可以使用**[QJson](http://qjson.sourceforge.net/)**第三方库来*解析*和*序列化* **JSON**数据，如下所示。

```
QByteArray data;   // Say data arrived from the database is stored in this object.

QJson::Parser parser;
QVariantMap map = parser.parse(data).toMap();

// Now serialize it and pass it to javascript function as an argument..

QJson::Serializer serializer;
QString javaScript = "updateHtmlView(" + serializer.serialize(map) + ");";

webView->page()->mainFrame()->evaluateJavaScript(javaScript); 
```

因此，现在您可以通过在 javascript 中读取该**JSON对象来更新您的 html 表。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:20:31.770

看看 QWebView， [http ://doc.qt.io/qt-5/qwebview.html](http://doc.qt.io/qt-5/qwebview.html)

来自上述网站的示例

```
QWebView *view = new QWebView(parent);
    view->load(QUrl("http://qt.nokia.com/"));
    view->show(); 
```

在用户单击的事件处理程序中创建此视图，并且一切正常。

# java - Spring：如何调用简单的控制器？

> ID：10835178
> 
> 赞同：7
> 
> 时间：2012-05-31T14:02:23.910
> 
> 标签：java, spring

我是 Spring 新手，从简单的教程开始。我定义了简单的 jsp 和控制器，然后将其映射到 xml 文档并运行它，但只有我看到的是我的 wev 页面，没有我在控制器中传递的值：

```
@Controller
public class HomeController {

@Autowired
private ExampleService exampleService;

@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Model model) {
    model.addAttribute("serverTime", exampleService.getSystemTime());
    model.addAttribute("appVersion", exampleService.getAppVersion());
    return "home";
}
}

@Component
public class ExampleService {

@Value("#{appProperties.appVersion}")
private String appVersion;

/**
 * Returns formatted system time.
 * 
 * @return
 */
public String getSystemTime() {
DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG);
return dateFormat.format(new Date());
}

public String getAppVersion() {
return appVersion;
}
}

<?xml version="1.0" encoding="UTF-8"?>
<web-app 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
<display-name>Spring</display-name>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring-config.xml</param-value>
<!--        <param-value>/WEB-INF/jdbc-config.xml</param-value> -->
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:util="http://www.springframework.org/schema/util"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<annotation-driven />

<resources mapping="/resources/**" location="/resources/" />

<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.home.spring" /> 
```

![在此处输入图像描述](../Images/06e5f3032fb45dd0d543de4fecbed2e4.png)

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    http://www.springframework.org/schema/util 
    http://www.springframework.org/schema/util/spring-util-3.0.xsd">

<!-- Root Context: defines shared resources visible to all other web components -->

<util:properties id="appProperties" location="properties.properties"/> 
```

我已经学习了一些教程并阅读了与我的工作相关的官方文档的 Web 部分，但我还不明白我的代码中的问题在哪里。

我坚持下去。如果您有任何想法，请与我分享。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:47:38.427

Its working fine for me. The same code. Could you please post the jsp too.

I have the below jsp: Please let us know if your jsp looks similar.

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
${serverTime}
</body>
</html> 
```

**EDIT: remove every thing from web.xml and put the below:**

```
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/appServlet-servlet.xml</param-value>
</context-param>
<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
<servlet-name>appServlet</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>appServlet</servlet-name>
<url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

# javascript - 我的javascript中的匿名类

> ID：10835184
> 
> 赞同：0
> 
> 时间：2012-05-31T14:02:36.507
> 
> 标签：javascript, jquery

我有以下代码：

```
var modal = $.modal({
                        title: title,
                        closeButton: true,
                        content: content,
                        width: 1000,
                        maxHeight: 850,
                        resizeOnLoad: true,
                        buttons: {
                            'Submit': function (win) {
                                submitHandler($link, $('#main-form'));
                            },
                            'Submit & Close': function (win) {
                                var rc = submitHandler($link, $('#main-form'));
                                if (rc == true) { win.closeModal(); }
                            },
                            'Close': function (win) {
                                win.closeModal();
                            }
                        }
                    }); 
```

我想要做的是根据正在创建的模式窗口的类型有一组不同的按钮。我尝试使用以下代码执行此操作，但出现错误：

```
 if (title.substr(0, 4) == "Crea") {
                        title += $('#RowKey').val();
                        var btns = btns1;
                    }
                    if (title.substr(0, 4) == "Edit") {
                        var btns = btns1;
                    }
                    if (title.substr(0, 4) == "Dele") {
                        var btns = btns2;
                    }
                    var btns1 = new {
                        'Submit': function (win) {
                            submitHandler($link, $('#main-form'));
                        },
                        'Submit & Close': function (win) {
                            var rc = submitHandler($link, $('#main-form'));
                            if (rc == true) { win.closeModal(); }
                        },
                        'Close': function (win) {
                            win.closeModal();
                        }
                    }
                    var btns2 = new {
                        'Submit & Close': function (win) {
                            var rc = submitHandler($link, $('#main-form'));
                            if (rc == true) { win.closeModal(); }
                        },
                        'Close': function (win) {
                            win.closeModal();
                        }
                    }
                    var modal = $.modal({
                        title: title,
                        closeButton: true,
                        content: content,
                        width: 1000,
                        maxHeight: 850,
                        resizeOnLoad: true,
                        buttons: btns
                    }); 
```

我得到的错误在线：

```
var btns1 = new { 
```

错误信息是：

```
Object doesn't support this action 
```

我想我做作业的方式有问题，但我不知道该怎么做。我希望有人可以帮助我。

有人可以告诉我我做错了什么来帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T14:04:03.720

省略`new`for 对象。

```
var btns1 = new { .. }; 
```

应该

```
var btns1 = {someProperty: someValue, ... }; 
```

新的替代方式：

```
var bts1 = new Object();
btns1.someProperty = someValue; ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:03:56.860

不需要`new`运算符：您可以通过 Object 字面量实例化您的新 Object：

```
var btns1 = { ... }; 
```

# php - PHP 使用 try-catch 进行多个数据库查询

> ID：10835185
> 
> 赞同：2
> 
> 时间：2012-05-31T14:02:46.827
> 
> 标签：php, codeigniter

我正在尝试实现处理数据库错误的最佳方法。我正在使用 mvc 框架（codeigniter）。当我去创建我的对象时，我最终对不同的表进行了多次查询。

我遇到的问题是，如果第一个查询成功，第二个查询失败，我会收到错误消息。但是，第一个查询仍然成功，并且数据已经在该表中。

我想要做的是将所有查询包装在一个 try 块中，这样，如果其中任何一个查询失败，都不会完成任何查询。

通过回滚更改，是否有更好的方法来处理这种情况（可能是 codeigniter 特定的）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:20:47.623

try 块不会直接执行此操作....

您需要支持事务的表，即 InnoDB 表

首先，您需要将数据库表的数据库引擎更改为 InnoDB（如果它们是 MyISAM 的话）。

在数据库操作之前，您需要启动一个事务（在线查看适合您的方法）。我使用 PDO，所以我通常会这样做：

```
$pdoObject->startTransaction(); 
```

因此，从查询的返回值来看，如果成功，则继续进行下一个查询，否则将执行`rollback()`并结束执行。此时您的 try...catch 可能很有用，因为您可以决定在查询执行失败的情况下抛出异常。你抓住它并做一个`rollback()`

如果全部成功，您需要执行`commit()`else 更改将不会被反映

**注意：只有 InnoDB 表支持 MySQL 中的事务**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:16:22.813

您要查找的内容称为[transactions](http://dev.mysql.com/doc/refman/5.5/en/commit.html)。

不过，您必须确保所有表都使用 InnoDB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:00:35.577

```
if ($this->db->trans_status() !== false) {
    // do stuff
} 
```

是我用来验证交易的。请注意，您还可以为测试模式发送布尔值：

```
$this->db->trans_start(true); 
```

# build - AnthillPro - CCTray 集成

> ID：10835186
> 
> 赞同：1
> 
> 时间：2012-05-31T14:02:49.690
> 
> 标签：build, automation, status, cctray, anthill

有谁知道您是否可以将 CCTray（或同等产品）与 AnthillPro 一起使用？我没有找到很多文档，并且对使用 AHP 很陌生。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:12:35.510

您应该能够将 CCTray 类型的工具与 AnthillPro 一起使用。不过，您需要创建一个自定义报告来生成 XML。

给我发一封电子邮件到 eric@urbancode.com 我也许可以在本周晚些时候写这个。

否则，您可以尝试编写报告。

你可以在这里找到 cc xml 格式：http: [//confluence.public.thoughtworks.org/display/CI/Multiple+Project+Summary+Reporting+Standard](http://confluence.public.thoughtworks.org/display/CI/Multiple+Project+Summary+Reporting+Standard)

迭代每个构建工作流并吐出有关最新构建的数据的示例 AP 报告代码在这里：[https ://bugs.urbancode.com/browse/AHPSCRIPTS-13](https://bugs.urbancode.com/browse/AHPSCRIPTS-13)

我认为产品附带的“Recent Build Life Activity (RSS)”报告会给您一个 XML 示例。

# android - Android - 将 2 个应用程序打包在一起

> ID：10835193
> 
> 赞同：3
> 
> 时间：2012-05-31T14:03:15.437
> 
> 标签：android, packaging, google-play

还记得 Facebook 不久前如何发布更新，其中包括“相机”应用程序以及常规 Facebook 应用程序吗？如何在市场上将 2 个 apk 打包在一起，这样当您下载主应用程序时，您实际上会获得 2 个相互关联的独立应用程序？

我宁愿让我的用户同时获得这两个应用程序，然后尝试单独寻找它们。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:14:25.327

> 还记得 Facebook 不久前如何发布更新，其中包括“相机”应用程序以及常规 Facebook 应用程序吗？

不。

> 如何在市场上将 2 个 apk 打包在一起，这样当您下载主应用程序时，您实际上会获得 2 个相互关联的独立应用程序？

你不能。

最接近的方法是将 App B 的 APK 打包到 App A 的资产中，然后在运行 App A 时，将 App B 复制到外部存储并启动安装。这将花费两倍的存储空间，因为您无法从 App A 的 APK 中删除 App B 的副本。而且，用户必须通过并批准 App B 的安装。

我的猜测是，您认为两个独立的应用程序实际上是两个独立的启动器图标，可以通过两个带有for和`<activity>`的元素在单个 APK 中处理，而不仅仅是一个。`<intent-filter>``MAIN``LAUNCHER`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:18:55.953

一个非常有趣的问题。我自己也问过这个问题。但没有得到答案。我唯一能想到的就是使用 tge（统一）Google Play 商店 API，然后在用户启动应用程序后，您可以通过 API 下载第二个应用程序。但我认为那不是很优雅

# delphi - Delphi 2009 所需的 DataMatrix ECC 200 (ISO/IEC 16022) 条码组件

> ID：10835194
> 
> 赞同：2
> 
> 时间：2012-05-31T14:03:16.047
> 
> 标签：delphi, barcode, reportbuilder

我正在寻找支持**DataMatrix ECC 200**符号系统 (ISO/IEC 16022) 的 Delphi 2009 二维条码组件。我确实需要组件的源代码可用（免费或商业），并且它必须与 ReportBuilder 一起使用。

有没有人有合适的解决方案？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:01:32.620

我为以前版本的[dmtx](http://www.libdmtx.org/ "dmtx")创建了一个用于读取和写入条形码的包装器。包装器已从 dmtx wiki 中删除。我现在已经在[https://github.com/JanOosting/delphidmtx上提供了它](https://github.com/JanOosting/delphidmtx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:58:06.360

看看[韩软](http://www.han-soft.com/barcode2d.php)。

[TBarcode2D_DataMatrixECC200](http://www.han-soft.com/releases/barcode2d/documents/b_datamatrixecc200.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:02:21.643

经过广泛的研究，我选择了 Barcode Studio，它带有完整的源代码并支持 ReportBuilder：

[http://www.barcode-software.eu/studio](http://www.barcode-software.eu/studio)

感谢所有回答的人：）

# android - HTTP 文件下载 500 内部服务器错误

> ID：10835195
> 
> 赞同：1
> 
> 时间：2012-05-31T14:03:21.373
> 
> 标签：android, eclipse

我正在编写一个与我们公司的 iPad 应用程序完全相同的 Android 应用程序。但是我在 android 上开发时遇到了 1 个问题。该应用程序从网络服务器下载文件。它将调用如下 URL：

[https://www.somedomain.com/API/Download.aspx?param1=test¶m2=test2](https://www.somedomain.com/API/Download.aspx?param1=test&param2=test2)等...

在 iPad 上这是完美的（我为此使用了 ASIHTTPRequest 类）。但在 Android 上，它给我的只是问题。

一旦我想用 android 下载文件，它就会下载一个带有 500 内部服务器错误 HTML 文档的文件，而不是 PDF 文件。

我检查了 URL，它们看起来与 iPad 上的完全一样。

我唯一能想象的是，用户下载的文件是“即时”创建的。因此需要一些时间（10 或 20 秒）来生成文件，然后下载文件。

在安卓上我这样做：

我有一个扩展类：

```
extends AsyncTask<String, Integer, JSONObject> 
```

在一种方法中，我这样做：

```
HttpClient httpclient = new DefaultHttpClient();
HttpGet httpget = new HttpGet(url);
HttpResponse response = httpclient.execute(httpget);

InputStream data = response.getEntity().getContent();       
File file = new File(context.getDir("docs", Context.MODE_PRIVATE), FileName);

OutputStream output = new FileOutputStream(file);
ByteStreams.copy(data, output);
Closeables.closeQuietly(output); 
```

但这给了我一个 500 内部服务器错误文档，而不是所需的 PDF 文件。我在这里想念什么？（抱歉，我刚开始为 Android 开发，所以我不是这种情况下的专家 ;-)）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:07:58.070

您来自服务器的响应状态代码是问题的事实意味着这应该与 Android 的东西无关，而只与您发送的请求有关。我注意到，尽管这可能是由于故意遗漏，您正在执行 POST 请求而没有添加任何 POST 参数。这应该是 GET 吗？我注意到端点是一个 ASPX 路径，查询字符串中有 GET 参数。也许您的服务器设置为仅响应 GET 而不是 POST。这是如何在 iOS 代码中完成的？GET 和 POST 之间没有区别，还是通过您使用的库从您那里抽象出来的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:04:11.133

好的，现在可以工作了...愚蠢的事情...我不断创建一个新的 HttpClient ，因此会话不会存储在连接之间。这就是服务器返回 500 内部服务器错误的原因，因为服务器不知道用户......

不过感谢大家的帮助！

# ruby - 从列表框中选择 webdriver 测试套件

> ID：10835196
> 
> 赞同：0
> 
> 时间：2012-05-31T14:03:26.593
> 
> 标签：ruby, selenium, webdriver

我的 ruby​​ 代码中有 javescript，它会生成一个列表框。我正在尝试生成自动测试服以单击列表中的项目。

我尝试了这些，但没有一个在工作：

```
@driver.find_element(:id, "ui-menu-item").send_keys "User 1" 

@driver.find_element(:class, "ui-menu-item").send_keys "User 1" 

@driver.find_element(:class, "ui-corner-all").send_keys "User 1" 
```

他们都没有工作

这是代码---------------------------------------------- --------------------------

```
< ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" role="listbox" aria-activedescendant="ui-active-menuitem" style="position: relative; z-index: 1; width: 373px; top: -940px; left: 232px; display: none; ">

< li class="ui-menu-item" role="menuitem">< a class="ui-corner-all" tabindex="-1">User 1< /a>< /li>

< li class="ui-menu-item" role="menuitem">< a class="ui-corner-all" tabindex="-1">User 2< /a>< /li>

< li class="ui-menu-item" role="menuitem">< a class="ui-corner-all" tabindex="-1">User 3< /a>

< /li>< /li>< /ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:20:11.983

我得到了我自己问题的答案！！！！

@driver.find_element(:link, "User 1").click

# php - 安全性 - 会话（默认使用 - Cookie）与本地存储

> ID：10835197
> 
> 赞同：1
> 
> 时间：2012-05-31T14:03:43.123
> 
> 标签：php, javascript

我不关心浏览器的兼容性。

我想知道如果我将状态从 PHP 控制（服务器端）会话移动到 JavaScript 控制（客户端）HTML 5 本地存储，我会获得还是失去安全性。

我认为我会获得安全性，因为现在用户标识符不再存在于 cookie 中，cookie 通常是一个文件或易于访问的 sql 数据库......它不在某种内部浏览器存储中。+ bc 这是一项较新的技术，我希望在其中设计更多的安全性。

通过从 PHP 会话转移到 JavaScript 本地存储，我是获得还是失去了安全性。（这适用于用户 id、page_id 等，重新加载后保持的当前状态，如果需要，可以保持更长的时间）。

我有一个 JavaScript 解决方案，我想用它来替换我的 PHP 会话。这就是我问的原因。我不在乎浏览器的兼容性。

这是有关本地存储的[信息站点。](http://diveintohtml5.info/storage.html)但是没有提到安全性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:59:54.523

两种类型的本地存储（localStorage 和 Cookie）都使用某种标识符，该标识符显然存储在客户端上。

两者都使用哈希机制来保护它不被更改给另一个用户。

本地存储比 cookie 更安全（请参见[此处](http://www.w3schools.com/html5/html5_webstorage.asp)）。

显然，如果您想将用户标识符从 cookie 移动到 localStorage，则必须编写会话协议。

两者都可以被盗以假装成为另一个用户。尽管使用 localStorage 的可能性较小。

为了使健壮，您需要一种有助于解决上述问题的指纹技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:19:07.400

> 我有一个 JavaScript 解决方案，我想用它来替换我的 PHP 会话。

不，不要这样做。会话存储在服务器端。发送到浏览器的 cookie 通常是该记录的标识符。会话存储用户特定的数据。几乎所有存储在客户端的内容都可以由用户轻松修改。因此，如果用户修改会话以指向另一个用户，则安全性将不再有效。

LocalStorage**不**用于存储会话。坚持使用 PHP 会话或在服务器端实现的任何其他会话机制。

**更新**

> 但是存在相同的安全漏洞...用户可以以一个人的身份登录...摆弄 Session 的 session_id 并成为其他人...摆弄 session_id...等同于摆弄您的样子到服务器？...这与在 local_storage 中摆弄加密的 user_id 相同。

不。假设我找出了您正在加密的算法。我知道另一个用户说UserB。我使用该算法加密了他的用户名。如果我以某种方式用该加密字符串覆盖我的 localStorage，我现在就是他。这实际上不太可能。可以把它想象成有 100 个用户，并且 128 字节字符串是标识符。您确定您可以摆弄它并将其修改为会话表中存在的另一条记录吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T21:42:36.127

您不会获得或失去安全性，因为在大多数浏览器中，站点设置的所有数据都存储在同一个文件夹中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:47:43.903

Local storage is best suited for data that you want to cache on the client in a (more permanent) way then with the regular browser cache. The only way it's "more secure" is if you want to allow the user to work with data that's *never sent to the server*.

If you're worried about session hijacking, the preferred solution would be to use https/ssl and encrypt *all traffic* between you and the client. There's a [general overview](http://en.wikipedia.org/wiki/Session_hijacking) of the problem and solutions on [wikipedia](http://en.wikipedia.org/wiki/Main_Page) (we'd need more information to give you anything much more specific than that, though).

# c++ - char 数组和指针

> ID：10835201
> 
> 赞同：0
> 
> 时间：2012-05-31T14:03:51.457
> 
> 标签：c++, arrays, pointers

```
#include <iostream>
using namespace std;
int syn(char *pc[], char, int);
int main ()
{
    char *pc[20];
    char ch;
    cout<<"Type the text" << endl;
    cin>>*pc;
    cout<<"Type The character:" << endl;
    cin>>ch;
    int apotelesma = syn(&pc[0], ch, 20);
    cout<< "There are " << apotelesma << " " << ch << endl;

system("pause");
return 0;
}
int syn(char *pc[],char ch, int n){
    int i;
    int metroitis=0;
    for (i=0; i<n; i++){
        if (*pc[i]==ch){
           metroitis++;
        }
    }
    return metroitis;
} 
```

谁能告诉我这有什么问题？当它进入 if 子句时，它没有响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:37:18.353

您的“pc”变量是一个包含 20 个字符指针的数组（本质上是一个包含 20 个字符串的数组）。

如果必须使用指针，请尝试：

```
#include <iostream>
using namespace std;
int syn(char *pc, char, int);
int main ()
{
    char *pc = new char[20];
    char ch;
    cout<<"Type the text" << endl;
    cin>>pc;
    cout<<"Type The character:" << endl;
    cin>>ch;
    int apotelesma = syn(pc, ch, strlen(pc));
    cout<< "There are " << apotelesma << " " << ch << endl;

system("pause");
return 0;
}
int syn(char *pc,char ch, int n){
    int i;
    int metroitis=0;
    for (i=0; i<n; i++){
        if (pc[i]==ch){
           metroitis++;
        }
    }
    return metroitis;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:18:28.443

`char *pc[20];`这意味着`pc`是大小为 20 的数组，它可以容纳 20 个指向`char`. 在您的程序中，您只需要在该变量中存储一个字符串或文本（无论如何）`pc`，所以为什么要声明它包含 20 个字符串（`20 pointer to char`）。

现在`pc`程序中的数组也没有`NULL`设置。`pc`指向大约 20 个垃圾值也是如此。它完全错误。`cin`将尝试将日期从写入数组`stdin`的第一个索引中的某个垃圾指针。`pc`

所以`cin>>*pc;`在你的程序中会导致崩溃或其他一些内存损坏。

以任何一种方式更改您的程序

第一种方式

```
 char *pc[20] = {0};
 for (i = 0; i < 20; i++)
 {
      pc[i] = new char[MAX_TEXT_SIZE];
 }
 cout<<"Type the text" << endl;
 cin>>pc[0]; 
```

第二种方式

```
 char *pc = new char[MAX_TEXT_SIZE];
 cout<<"Type the text" << endl;
 cin>>pc; 
```

第三种方式

```
 char pc[MAX_TEXT_SIZE];
 cout<<"Type the text" << endl;
 cin>>pc; 
```

注意：注意`NULL`检查 malloc 的返回

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:09:35.403

修改一些代码。试试看

```
#include <iostream>
using namespace std;
int syn(char pc[], char, int);
int main ()
{
    char pc[20];
    char ch;
    cout<<"Type the text" << endl;
    cin>>pc;
    cout<<"Type The character:" << endl;
    cin>>ch;
    int apotelesma = syn(pc, ch, 20);
    cout<< "There are " << apotelesma << " " << ch << endl;

system("pause");
return 0;
}
int syn(char pc[],char ch, int n){
    int i;
    int metroitis=0;
    for (i=0; i<n; i++){
        if (pc[i]==ch){
           metroitis++;
        }
    }
    return metroitis;
} 
```

# php - 重复记录被插入到表中

> ID：10835202
> 
> 赞同：0
> 
> 时间：2012-05-31T14:03:53.450
> 
> 标签：php, mysql

我正在尝试在我的项目中实现购物车。我找到了一个教程，一切正常，但是当我点击*“放置订单”*时，它会在下表中插入一条重复的记录：客户、订单、订单详细信息。

```
<?php
    include("includes/db.php");
    include("includes/functions.php");

    if($_REQUEST['command']=='update'){
        $name=$_REQUEST['name'];
        $email=$_REQUEST['email'];
        $address=$_REQUEST['address'];
        $phone=$_REQUEST['phone'];

        $result=mysql_query("insert into customers values('','$name','$email','$address','$phone')");
        $customerid=mysql_insert_id();
        $date=date('Y-m-d');
        $result=mysql_query("insert into orders values('','$date','$customerid')");
        $orderid=mysql_insert_id();

        $max=count($_SESSION['cart']);
        for($i=0;$i<$max;$i++){
            $pid=$_SESSION['cart'][$i]['productid'];
            $q=$_SESSION['cart'][$i]['qty'];
            $price=get_price($pid);
            mysql_query("insert into order_detail values ($orderid,$pid,$q,$price)");
        }
        die('Thank You! your order has been placed!');
    }
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Billing Info</title>
<script language="javascript">
    function validate(){
        var f=document.form1;
        if(f.name.value==''){
            alert('Your name is required');
            f.name.focus();
            return false;
        }
        f.command.value='update';
        f.submit();
    }
</script>
</head>

<body>
<form name="form1" onsubmit="return validate()">
    <input type="hidden" name="command" />
    <div align="center">
        <h1 align="center">Billing Info</h1>
        <table border="0" cellpadding="2px">
            <tr><td>Order Total:</td><td><?php echo get_order_total()?></td></tr>
            <tr><td>Your Name:</td><td><input type="text" name="name" /></td></tr>
            <tr><td>Address:</td><td><input type="text" name="address" /></td></tr>
            <tr><td>Email:</td><td><input type="text" name="email" /></td></tr>
            <tr><td>Phone:</td><td><input type="text" name="phone" /></td></tr>
            <tr><td>&nbsp;</td><td><input type="submit" value="Place Order" /></td></tr>
        </table>
    </div>
</form>
</body>
</html> 
```

希望有人可以建议。我浏览了代码，但找不到导致这种行为的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:07:20.123

即开即用，您的验证功能和表单一样提交。在您的验证中，更改 f.submit(); 返回真；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:24:21.060

当您提交 if($_REQUEST['command']=='update') 为真并且尝试插入数据时，可以查看您的代码以供用户将交易保存为验证 cos 的两倍。另一个原因可能是用户刷新页面或多次单击上传按钮。因此你可能想在插入完成时取消设置 $_REQUEST['command'] 。让我们知道这是否有效。（如果正确，标记为答案）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T12:28:07.867

在你的情况下，我认为你会想要使用另一种验证技术。就像我之前说的，您的代码的编写方式是，当用户单击“下订单”按钮时，会触发验证 (javascript)，该验证 (javascript) 会生成警报语句并仍然发送消息。我已经修改了您的验证码的更好解决方案（如果有效，则标记为正确答案）

```
<script language="javascript"> 
    function validate(){ 
        var f=document.form1; 
        if(f.name.value==''){ 
            alert('Your name is required'); 
            f.name.focus(); 
            return false; 
        } 
else
{
        f.command.value='update'; 
        f.submit();
} 
    } 
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T10:53:07.850

感谢大家的宝贵回复和帮助，我通过从代码中删除以下行来解决它并且它有效。

```
f.submit(); 
```

# java - 来自 java 代码的 Jing RelaxNG 验证器和自定义数据类型库

> ID：10835208
> 
> 赞同：3
> 
> 时间：2012-05-31T14:04:14.047
> 
> 标签：java, xml, types, schema, relaxng

读完[这篇](http://www.ibm.com/developerworks/xml/library/x-custyp/)文章后，我一直在尝试实现一个自定义数据类型，供 RelaxNG XML 验证器 (Jing) 使用。我已经成功地通过命令行运行了由 Jing （他们称之为`datatype-sample`）提供的示例实现，但我一直无法从 java 代码中做到这一点。

从命令行（Windows）：

```
> set CLASSPATH=path\to\jing-20091111\bin\jing.jar;path\to\jing-20091111\sample\datatype\datatype-sample.jar
> cd path\to\jing-20091111\sample\datatype
> java com.thaiopensource.relaxng.util.Driver datatype-sample.rng valid.xml 
```

验证执行没有任何问题。但现在我正在尝试使用以下 java 代码中的相同数据类型库：

```
package rngdatatype;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import javax.xml.XMLConstants;
import javax.xml.transform.stream.StreamSource;
import javax.xml.validation.Schema;
import javax.xml.validation.SchemaFactory;
import javax.xml.validation.Validator;
import org.xml.sax.SAXException;

public class Main {

    public static void main(String[] args) throws UnsupportedEncodingException, FileNotFoundException, SAXException, IOException {
        // make sure our jars are on classpath
        System.out.println("Classpath: " + System.getProperty("java.class.path"));

        // args
        String rng = args[0];
        String xml = args[1];
        File rngFile = new File(rng);
        File xmlFile = new File(xml);

        // setup rng validator through JAXP
        System.setProperty(SchemaFactory.class.getName() + ":" + XMLConstants.RELAXNG_NS_URI, "com.thaiopensource.relaxng.jaxp.XMLSyntaxSchemaFactory");
        SchemaFactory rngSchemaFactory = SchemaFactory.newInstance(XMLConstants.RELAXNG_NS_URI);

        // obtain a schema object
        InputStreamReader rngReader = new InputStreamReader(new FileInputStream(rngFile), "UTF-8");
        Schema schema = rngSchemaFactory.newSchema(new StreamSource(rngReader));

        // validate using schema based validator
        Validator validator = schema.newValidator();
        InputStreamReader xmlReader = new InputStreamReader(new FileInputStream(xmlFile), "UTF-8");
        validator.validate(new StreamSource(xmlReader));
    }
} 
```

第一个参数是具有以下内容的文件的路径：

```
<element name="balancedString"
   xmlns="http://relaxng.org/ns/structure/1.0"
   datatypeLibrary="http://www.thaiopensource.com/relaxng/datatypes/sample">
  <data type="balancedString"/>
</element> 
```

第二个参数是具有以下内容的文件的路径：

```
<balancedString>foo(bar(baz))</balancedString> 
```

这给了我以下输出：

```
Classpath: path\to\RNGDataType\lib\datatype-sample.jar;path\to\RNGDataType\lib\jing.jar;path\to\RNGDataType\build\classes;path\to\RNGDataType\src
Exception in thread "main" org.xml.sax.SAXParseException: datatype library "http://www.thaiopensource.com/relaxng/datatypes/sample" not recognized
... 
```

这清楚地表明无法解析数据类型。据我所知，这个工作的唯一要求（在`jing.jar`类路径上都有）已经得到满足。`datatype-sample.jar`那么我做错了什么？

PS：要使上述代码正常工作，您必须将`jing.jar`and`datatype-sample.jar`放在类路径上并为其提供参数，其中第一个是路径，`datatype-sample.rng`第二个是路径`valid.xml`或`invalid.xml`。所有这些都与[靖](http://code.google.com/p/jing-trang/downloads/detail?name=jing-20091111.zip)一起分发。

**Edit1：**`java -jar`当作为具有适当`MANIFEST.MF`文件的 JAR ( ) 运行时，上述程序在我的 IDE 之外也不起作用。手动设置类路径 ( ) 时也不起作用`java -classpath`。所以我怀疑实际代码有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:22:56.247

似乎通过 JAXP API 通过 Jing 使用自定义数据类型库在某种程度上被破坏了。即使它应该起作用，它也不起作用。也许需要在某处设置一些额外的属性，而我只是不知道这一点。

所以我想我通过模仿 Jing 找到了一种解决方法`com.thaiopensource.relaxng.util.Driver`，因此使用 Jing 自己的 API 来执行验证。请注意，这样做会限制您的代码，因此它仅适用于 Jing。

```
package rngdatatype;

import com.thaiopensource.validate.SchemaReader;
import com.thaiopensource.validate.ValidationDriver;
import com.thaiopensource.validate.auto.AutoSchemaReader;
import java.io.File;
import java.io.IOException;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

public class JingApi {

    public static void main(String[] args) throws SAXException, IOException {
        String rng = args[0];
        String xml = args[1];
        File rngFile = new File(rng);
        File xmlFile = new File(xml);

        SchemaReader sr = new AutoSchemaReader();
        ValidationDriver driver = new ValidationDriver(sr);
        InputSource inRng = ValidationDriver.fileInputSource(rngFile);
        inRng.setEncoding("UTF-8");
        driver.loadSchema(inRng);
        InputSource inXml = ValidationDriver.fileInputSource(xmlFile);
        inXml.setEncoding("UTF-8");
        driver.validate(inXml);
    }
} 
```

这使您能够根据使用自定义数据类型库的 RNG 模式从 java 代码验证 XML 文件。请注意，`Diver`我前面提到的类不能直接使用。

上面的程序使用与我自己的问题中的示例相同的类路径和参数。

**编辑1 ---------------------------------------------**

在多摆弄之后，我发现了需要设置的属性，以便在使用自定义数据类型库时让我的 JAXP 示例与 Jing 一起使用。在获得 的实例后只需添加以下行`SchemaFactory`：

```
rngSchemaFactory.setProperty("http://relaxng.org/properties/datatype-library-factory", new org.relaxng.datatype.helpers.DatatypeLibraryLoader()); 
```

这是一个使用 Jing 原生 API 的更优雅的解决方案。

**/Edit1 --------------------------------------------**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:17:57.660

您的 JAR 文件必须以文件 META-INF/services/org.relaxng.datatype.DatatypeLibraryFactory 的形式包含其他元数据，其中必须包含实现接口 org.relaxng.datatype.DatatypeLibraryFactory 的类的名称

# python - 有没有为 python 编写的化学数据库？

> ID：10835211
> 
> 赞同：2
> 
> 时间：2012-05-31T14:04:21.850
> 
> 标签：python, chemistry

我编写需要知道锡原子质量的脚本。是否有包含此类信息的 python 数据库？

**编辑**：

`periodictable`很好，但有些库的数据更丰富。例如`gperiodic`程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T14:07:11.733

你可以在问之前简单地用谷歌搜索。但无论如何，您可能会发现这很有用：http: [//pypi.python.org/pypi/periodictable](http://pypi.python.org/pypi/periodictable)。下面是一个直接从页面出来的例子。

```
>>> from periodic import element
>>> hydrogen = element('hydrogen')
>>> hydrogen.mass
1.0079 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T06:09:07.083

不是特定于 python 的，但在 Sourceforge 托管的[Blue Obelisk 数据存储库](https://sourceforge.net/projects/bodr/)是 XML 格式的化学数据的综合存储库，以防对您（或其他任何人发现它）有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-07T16:09:48.500

元素周期表和真正的化学数据库完全不同，我建议您更改问题的标题！[CAS](http://www.cas.org/content/at-a-glance)数据库中有超过 9000 万种有机和无机物质！完全用 Python 编写的化学数据库根本不是处理这么多记录的最佳选择，而且速度非常慢！

最好使用 python 包装器来允许使用 Python 访问外部化学数据库，我喜欢[chemspipy](http://chemspipy.readthedocs.org/en/latest/index.html) ChemSpider 的 Python 包装器。使用 Pip 安装很容易，但您需要注册（但它是免费的）到 RSC。

这里有一个小例子：

```
In [1]: from chemspipy import ChemSpider

In [2]: cs=ChemSpider('Here goes your personal code')

In [3]: tin=cs.simple_search('tin') #I use simple_search because search doesn't work for me

In [4]: print tin
[Compound(4509318)]                        

In [5]: tin[0].molecular_formula
Out[5]: u'Sn'

In [6]: tin[0].molecular_weight
Out[6]: 118.71 
```

# c# - 如何动态投射对象？

> ID：10835215
> 
> 赞同：5
> 
> 时间：2012-05-31T14:04:34.013
> 
> 标签：c#, casting

我很确定以前有人问过这个问题，但不幸的是，我发现的唯一一件事就是[这](https://stackoverflow.com/questions/2903450/c-sharp-how-to-dynamically-cast-an-object)对我来说不是解决方案。在我目前的项目中，我做了类似的事情：

```
private object obj;

private void Initialize()
{
    obj.Initialize();
}

private void CreateInstanceA()
{
    obj = Activator.CreateInstance(typeof(MyClassA));
}

private void CreateInstanceB()
{
    obj = Activator.CreateInstance(typeof(MyClassB));
} 
```

这段代码当然不起作用，因为我没有强制`obj`转换，因为它的类型是动态变化的。

如何动态投射它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T14:06:42.540

三个选项：

*   如果您控制这两个类，并且可以使它们实现一个包含您需要的所有内容的通用接口，那么就这样做 - 并转换为接口
*   如果您使用 C# 4 和 .NET 4，则可以使用动态类型 - 只需将变量声明为`private dynamic obj;`，它将编译并在执行时找到正确的方法
*   否则，使用反射来查找并调用该方法。

基本上基于执行时间类型的*转换*是没有意义的，因为转换的一部分是为*编译器*提供更多信息......在这种情况下你根本没有。

如果您可以实现，第一个选项是迄今为止最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:08:22.423

我假设 CreatInstanceB() 实际上应该使用 MyClassB，对吗？

在这种情况下，您可以使用：

```
((MyClassA)obj).Initialize(); 
```

...

```
((MyClassB)obj).Initialize(); 
```

或者您可以创建一个具有 Initialize 方法的接口并将 obj 定义为该接口。

# c# - 将数据从控制器传递到视图

> ID：10835216
> 
> 赞同：1
> 
> 时间：2012-05-31T14:04:37.663
> 
> 标签：c#, asp.net-mvc, linq

我花了一天半的时间试图找到这个答案，有时似乎我很接近但到目前为止还没有运气。我有一个控制器，我在其中定义了一个 LINQ 查询，并试图弄清楚如何将结果传递到列表视图中。以下是控制器代码：

```
namespace CMS.Controllers
{
    public class SurveyController : Controller
    {

        private SupportEntities supdb = new SupportEntities();
        private BuisnessEntities bsdb = new BuisnessEntities();

        //
        // GET: /Survey/BizSurveyC

        public ViewResult BizSurveyC(string nipaKey, string bOrg)
        {
            // use the next two lines for testing and then either delete or comment them out.
            nipaKey = "22";
            bOrg = "MPC";

            var Cquery = from Mstr in bsdb.BizOrgInsts
                                     join Dat in bsdb.BizSurveyQ on Mstr.ID equals Dat.MASTERID
                                     where Mstr.NIPAKEY == nipaKey & Mstr.FULCIRCORG == bOrg
                                     orderby Mstr.STREETSUFX, Dat.ADDRESS, Mstr.NUMBER
                                     select new { MasterId = Mstr.ID, Name = Mstr.OLDNAME, Mstr.ADDRESS, Mstr.NIPAKEY, Dat.SURVEYDATE, SurveyId = Dat.ID, Dat.RESURVEYOF, Dat.STAMP };

            //ViewBag.BizQuery = Cquery;
            ViewData["BizQuery"] = new SelectList(Cquery);

            return View();
        }

    }
} 
```

正如你所看到的那样，我已经尝试过 ViewData 和 Viewbag 但到目前为止没有运气

* * *

以下是事情现在出现的方式：

**视图模型类**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace CMS.Models
{
    public class BizSurveyCVM
    {
        public long? MasterId { get; set; }
        public string Name { get; set; }
        public string Address { get; set; }
        public string NipaKey { get; set; }
        public string Date { get; set; }
        public long? SurveyId { get; set; }
        public long? Resurvey { get; set; }
        public string DateStamp { get; set; }
    }
} 
```

**修改后的动作**

```
 var Cquery = (from Mstr in bsdb.BizOrgInsts
                                    join Dat in bsdb.BizSurveyQ on Mstr.ID equals Dat.MASTERID
                                    where Mstr.NIPAKEY == nipaKey & Mstr.FULCIRCORG == bOrg
                                    orderby Mstr.STREETSUFX, Dat.ADDRESS, Mstr.NUMBER
                                    select new BizSurveyCVM
                                    {
                                        MasterId = Mstr.ID,
                                        Name = Mstr.OLDNAME,
                                        Address = Mstr.ADDRESS,
                                        NipaKey = Mstr.NIPAKEY,
                                        Date = Dat.SURVEYDATE,
                                        SurveyId = Dat.ID,
                                        Resurvey = Dat.RESURVEYOF,
                                        DateStamp = Dat.STAMP
                                    }).ToList();

        return View(Cquery);
    } 
```

**BizSurveyC 视图**

```
@model List<CMS.Models.BizSurveyCVM>

<table>
    <tr>
        <th>
            MasterId
        </th>
        <th>
            Name
        </th>
        <th>
            Address
        </th>
        <th>
            NipaKey
        </th>
        <th>
            Date
        </th>
        <th>
            SurveyId
        </th>
        <th>
            Resurvey
        </th>
        <th>
            DateStamp
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.MasterId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Address)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.NipaKey)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Date)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SurveyId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Resurvey)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateStamp)
        </td>
</table> 
```

这是结果视图：

抱歉，尚未允许保存图像，但在视图中我有标题但没有数据。

我显然在视图或查询中需要做一些工作，但事情看起来好多了，谢谢大家的帮助。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:42:27.753

您可以创建一个 ViewModel 类来保存您的查询结果，然后为新的 ViewModel 类强烈键入您的视图：

**视图模型类**：

```
public class BizSurveyCVM 
{
    public long MasterId { get; set; }
    public string Name { get; set; }
    ...
} 
```

**修改后的动作**：

```
var Cquery = (from Mstr in bsdb.BizOrgInsts
              join Dat in bsdb.BizSurveyQ on Mstr.ID equals Dat.MASTERID
              where Mstr.NIPAKEY == nipaKey & Mstr.FULCIRCORG == bOrg
              orderby Mstr.STREETSUFX, Dat.ADDRESS, Mstr.NUMBER
              select new BizSurveyCVM  { MasterId = Mstr.ID, Name = Mstr.OLDNAME, ...}
             ).ToList();

return View(Cquery); 
```

**BizSurveyC 视图**

```
@model List<{namespace}.BizSurveyCVM>

@foreach(var item in Model) {
     {HTML Mark-up}
} 
```

**编辑**：这是基于更新问题的视图更新示例：

```
@model List<{namespace}.BizSurveyCVM>

@foreach(var item in Model) {
    <tr>
        <td>
            @item.MasterId
        </td>
        <td>
            @item.Name
        </td>
        <td>
            @item.Address
        </td>
        ...
    </tr>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:42:05.653

你确定你想做吗？

视图中的集合更有用，因此您可以构建所需的任何内容，例如选择列表。

不要忘记在选择列表中定义谁是您的数据值和显示值，例如..

```
ViewData["BizQuery"] = new SelectList(Cquery, null, "MasterId", "Name"); 
```

好的，你的代码对我有用，所以检查你的视图，你必须在 viewdata 中正确转换你的对象

你需要有这样的东西

```
@foreach (SelectListItem item in (SelectList)ViewData["BizQuery"])
{

    <p>@item.Text</p>

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:09:15.653

```
return View(Cquery); 
```

或者

```
return View("ViewName",Cquery); 
```

然后在您看来，模型类型应该与 Cquery 的类型匹配。但我发现更容易（假设您使用的是 VS）只需右键单击某处的方法主体并单击“添加视图”，然后从模型类型列表中选择模型。

# c++ - 如何在 boost::regex 中找到子匹配字符串中的位置

> ID：10835217
> 
> 赞同：1
> 
> 时间：2012-05-31T14:04:40.220
> 
> 标签：c++, boost-regex

在`boost::regex_search(start, end, what, pattern)`我可以通过调用在搜索字符串中找到完全匹配的开始位置之后`what.position()`。

我怎样才能找到子匹配的那些位置？

我需要这样的代码：

```
if(boost::regex_search(start, end, what, pat))
{
    int len = what["namedGroup"].length();
    int pos = what["namedGroup"].position();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:32:25.643

我找到了解决方案。

boost::match_results 的每个元素，在我的例子中，std::string::const_iterator 的 boost::match_results 都有属性 first 和 second，它们对应地指向搜索字符串中该子匹配的开始和结束迭代器。因此，您可以使用迭代器或通过 std::distance() 将它们转换为索引

```
std::string::const_iterator start, end;
boost::match_results<std::string::const_iterator> what;
start = searchString.begin();
end  = searchString.end ();

if(boost::regex_search(start, end, what, pattern))
    {
        std::string::const_iterator beg = what["namedGroup"].first;
        std::string::const_iterator end = what["namedGroup"].second;
        int beginIndex = std::distance(start, beg);
    } 
```

# jquery - 隐藏计时器并使其在达到某个值时出现

> ID：10835219
> 
> 赞同：0
> 
> 时间：2012-05-31T14:04:55.273
> 
> 标签：jquery

我正在为 Drupal CMS 使用计时器插件。计时器倒计时并向用户显示他们在自动注销之前还有多长时间。

计时器位于一个 div 类中`logoutstatus`。计时器其自身被包装在`strong`标签中。

计时器很烦人，所以我只希望它在倒计时到 00:09:55 时出现。我该怎么做呢？

我尝试了以下代码：

```
(function ($) {

$(document).ready(function() {

  $('.logoutstatus').hide();

if ($('logoutstatus:contains("00:09:57")').length > 0) {
   $('.logoutstatus').show();
}

});

}(jQuery)); 
```

但是，因为倒计时是一个动态元素，所以代码似乎对它没有反应。我会很感激任何指示。谢谢！

我知道我可能应该将 jQuery 计时器构建到我的代码中。但是，我必须使用 Drupal，所以这不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:07:45.497

我不知道您的测试是否真的有效，因为您没有发布相关位，但是，假设代码有效，您只需将它包装在`setInterval`每 1000 毫秒运行一次的周围。这应该可以，但是，它会添加另一个无用的计时器。

作为旁注，您`.`在第一个选择器中缺少 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:07:35.650

您必须在增加/减少计时器的函数中检查当前计时器值。
使用

```
if ($('logoutstatus:contains("00:09:57")').length > 0) {
   $('.logoutstatus').show();
} 
```

您在加载文档时检查一次。计时器当时恰好处于该值的可能性很小。

我确定您正在使用一个函数来更改`logoutstatus`. 更改时，检查内容，是否已到停止时间。

# sql-server-ce - SQL Server CE 4.0 实体框架最大行大小异常？

> ID：10835222
> 
> 赞同：0
> 
> 时间：2012-05-31T14:05:00.960
> 
> 标签：sql-server-ce

我有一个包含 1 个表和 8 个列的简单数据库。该表大约有二十行。请参阅下面的确切架构。但是，当尝试插入某些记录时，我收到以下错误：

> 表定义或行大小超过最大行大小 8060 字节。

为什么我会得到这个。桌子还没有那么大。你怎么看？

![在此处输入图像描述](../Images/4bfb8c39fa96d3e46e44de198ae96b6c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:07:13.517

nvarchar 是 Unicode，内部每个字符需要 2 个字节，因此您的 nvarchar(4000) 实际上是 4000*2 字节=8000。添加其余的....

# python - 试图用python获取图像

> ID：10835232
> 
> 赞同：0
> 
> 时间：2012-05-31T14:05:31.370
> 
> 标签：python, python-3.x

我正在尝试从网站获取图像，但我不知道我做错了什么。这是我的代码：

```
import httplib2

h = httplib2.Http('.cache')

response, content = h.request('http://1.bp.blogspot.com/-KSBzFF0bIyU/TtFyj-KgC0I/AAAAAAAABEo/o43IoY_9Bec/s1600/praia-de-ponta-verde-maceio.jpg')

print(response.status)

with open('maceio.jpg', 'wb') as f:
    print(content, file = f)

--------------------------------------------------------------------------------

 200
Traceback (most recent call last):
  File "/home/matheus/workspace/Get Link/new_method_v2.py", line 12, in <module>
    print(content, file = f)
TypeError: 'str' does not support the buffer interface 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:25:11.603

该错误是由以下行引起的：

```
print(content, file = f) 
```

`print`隐含地将`bytes`命名的对象转换`content`为字符串（`str`对象），该字符串不能以二进制模式写入文件，因为 Python 不知道要使用哪种字符编码。

你为什么要`print`绕道而行？只需使用以下方法将内容写入文件`file.write()`：

```
with open('maceio.jpg', 'wb') as f:
    f.write(content) 
```

# excel - 如何根据到期日期有条件地格式化 Excel 2010 以触发新列中的标志图标

> ID：10835240
> 
> 赞同：5
> 
> 时间：2012-05-31T14:05:53.120
> 
> 标签：excel, excel-2010

我有一排截止日期，如果截止日期已过，我希望用图标标记。有没有办法使用条件格式来触发图标？if then 语句应该是：

如果 Today() > "Deadline" 然后用红色标志图标标记第 2 列中的单元格。

第 1 栏截止日期

第 2 列（如果过期则为红旗）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T15:03:12.320

我是这样做的：

第一个：在标志列中添加了一个公式：`=IF(A2>TODAY(),1,0)` 第二个：条件格式的标志，如图所示。

![在此处输入图像描述](../Images/3756b086573ca43b6a159865c62e9ec0.png)

第三：单元格中的自定义格式以隐藏 1 和 0。格式为`;;;`.

![在此处输入图像描述](../Images/0476b568bde9504cedf2d91011ee4c0e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:02:43.897

红旗似乎仅在您尝试格式化的单元格中可用，而不是在相邻的单元格中。

你可以试试。

选择您的截止日期行。

添加条件格式

根据单元格的值格式化所有单元格 在格式样式中选择图标集 在图标样式中选择 3 个标志 勾选反转图标顺序 在红色标志上选择 > 在值中输入 =today() 并在类型中输入公式 在橙色标志上选择 > 输入 =today值中的 () 和类型中的公式

如果日期 > 今天，您将在截止日期单元格中看到一个红旗。但不幸的是，如果日期 <= 今天，则为绿旗。

# php - CURLOPT_FOLLOWLOCATION 在启用安全模式或设置 open_basedir 时无法激活

> ID：10835255
> 
> 赞同：3
> 
> 时间：2012-05-31T14:07:05.713
> 
> 标签：php

当我运行此脚本时（http://bizonbytes.com/miscellaneous/sharrre.php?url=https://bizonbytes.com&type=googlePlus）：

```
<?php
  //Sharrre by Julien Hany
  $json = array('url'=>'','count'=>0);
  $json['url'] = $_GET['url'];
  $url = urlencode($_GET['url']);
  $type = urlencode($_GET['type']);

  if(filter_var($_GET['url'], FILTER_VALIDATE_URL)){
    if($type == 'googlePlus'){  //source http://www.helmutgranda.com/2011/11/01/get-a-url-google-count-via-php/
      $content = parse("https://plusone.google.com/u/0/_/+1/fastbutton?url=".$url."&count=true");

      $dom = new DOMDocument;
      $dom->preserveWhiteSpace = false;
      @$dom->loadHTML($content);
      $domxpath = new DOMXPath($dom);
      $newDom = new DOMDocument;
      $newDom->formatOutput = true;

      $filtered = $domxpath->query("//div[@id='aggregateCount']");
      $json['count'] = str_replace('>', '', $filtered->item(0)->nodeValue);
    }
    else if($type == 'stumbleupon'){
      $content = parse("http://www.stumbleupon.com/services/1.01/badge.getinfo?url=$url");

      $result = json_decode($content);
      $json['count'] = $result->result->views;
      if( !isset($json['count']) ) $json['count'] = 0;
    }
    else if($type == 'pinterest'){
      $content = parse("http://api.pinterest.com/v1/urls/count.json?callback=&url=$url");

      $result = json_decode(str_replace(array('(', ')'), array('', ''), $content));
      $json['count'] = $result->count;
      if( !isset($json['count']) ) $json['count'] = 0;
    }
  }
  echo str_replace('\\/','/',json_encode($json));

  function parse($encUrl){
    $options = array(
      CURLOPT_RETURNTRANSFER => true, // return web page
      CURLOPT_HEADER => false, // don't return headers
      CURLOPT_FOLLOWLOCATION => true, // follow redirects
      CURLOPT_ENCODING => "", // handle all encodings
      CURLOPT_USERAGENT => 'sharrre', // who am i
      CURLOPT_AUTOREFERER => true, // set referer on redirect
      CURLOPT_CONNECTTIMEOUT => 5, // timeout on connect
      CURLOPT_TIMEOUT => 10, // timeout on response
      CURLOPT_MAXREDIRS => 3, // stop after 10 redirects
      CURLOPT_SSL_VERIFYHOST => 0,
      CURLOPT_SSL_VERIFYPEER => false,
    );
    $ch = curl_init();

    $options[CURLOPT_URL] = $encUrl;  
    curl_setopt_array($ch, $options);

    $content = curl_exec($ch);
    $err = curl_errno($ch);
    $errmsg = curl_error($ch);

    curl_close($ch);

    if ($errmsg != '' || $err != '') {
      /*print_r($errmsg);
      print_r($errmsg);*/
    }
    return $content;
  }
?> 
```

**我收到以下错误：**

```
Warning: curl_setopt_array() [function.curl-setopt-array]: CURLOPT_FOLLOWLOCATION cannot be activated when safe_mode is enabled or an open_basedir is set in C:\Inetpub\vhosts\bizonbytes.com\httpdocs\miscellaneous\sharrre.php on line 56
{"url":"https://bizonbytes.com","count":""} 
```

**重要笔记**

*   我没有 PHP 经验我只需要运行这个脚本 (sharrre.php)
*   我看过其他类似的案例，但可以找出问题所在。
*   我已经打开 windows/php.ini 并确保 safe_mode = Off
*   我注意到 open_basedir 是这样设置的；open_basedir =
*   我需要在 open_basedir 中添加一些东西吗？
*   这是有关已安装 php 版本的详细信息的链接。见[http://bizonbytes.com/miscellaneous/test.php](http://bizonbytes.com/miscellaneous/test.php)

感谢大家在这件事上的帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T14:42:27.790

请注意，这是一个安全警告。使用 cURL，网站可以将脚本重定向到类似的东西`file:///etc/passwd`并弄乱周围的东西。为了防止这种情况发生，只要设置了 open_basedir，cURL 就不会跟随位置。您必须手动关注它们，并手动检查所有关注的位置是否也安全。

[php.net 上的这条评论](http://us2.php.net/manual/en/function.curl-setopt.php#102121)实现了一个示例实现：

```
function curl_exec_follow(/*resource*/ $ch, /*int*/ &$maxredirect = null) {
    $mr = $maxredirect === null ? 5 : intval($maxredirect);
    if (ini_get('open_basedir') == '' && ini_get('safe_mode' == 'Off')) {
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, $mr > 0);
        curl_setopt($ch, CURLOPT_MAXREDIRS, $mr);
    } else {
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);
        if ($mr > 0) {
            $newurl = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);

            $rch = curl_copy_handle($ch);
            curl_setopt($rch, CURLOPT_HEADER, true);
            curl_setopt($rch, CURLOPT_NOBODY, true);
            curl_setopt($rch, CURLOPT_FORBID_REUSE, false);
            curl_setopt($rch, CURLOPT_RETURNTRANSFER, true);
            do {
                curl_setopt($rch, CURLOPT_URL, $newurl);
                $header = curl_exec($rch);
                if (curl_errno($rch)) {
                    $code = 0;
                } else {
                    $code = curl_getinfo($rch, CURLINFO_HTTP_CODE);
                    if ($code == 301 || $code == 302) {
                        preg_match('/Location:(.*?)\n/', $header, $matches);
                        $newurl = trim(array_pop($matches));
                    } else {
                        $code = 0;
                    }
                }
            } while ($code && --$mr);
            curl_close($rch);
            if (!$mr) {
                if ($maxredirect === null) {
                    trigger_error('Too many redirects. When following redirects, libcurl hit the maximum amount.', E_USER_WARNING);
                } else {
                    $maxredirect = 0;
                }
                return false;
            }
            curl_setopt($ch, CURLOPT_URL, $newurl);
        }
    }
    return curl_exec($ch);
} 
```

# python - 如何测试python中是否存在多个键？

> ID：10835266
> 
> 赞同：2
> 
> 时间：2012-05-31T14:07:21.097
> 
> 标签：python, django

我从我的服务器收到一个 JSON 响应，其中可能存在也可能不存在几个键。在将每个键传递给 Django object.create 方法之前，我主要使用一堆三元运算符来测试它们。这是我正在处理的事情

```
incoming = {"name":"hackNightly", "age":25, "field":"web development"}

# here's where it gets nasty
name = incoming["name"] if "name" in incoming else None
age = incoming["age"] if "age" in incoming else None

user = User.objects.create(
   name = name, 
   age = age
) 
```

等等。当然，这很好用，只是感觉我做错了什么。有没有更蟒蛇的方式来完成这个？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T14:11:18.200

```
name = incoming.get('name')
age = incoming.get('age') 
```

字典有一个`.get()`方法，可以使用 1 个参数（您正在查找的内容）或 2 个参数（您正在查找的内容，如果未找到则为默认值）调用。默认情况下，使用 1 个参数，如果没有找到任何内容，get 将只返回 None，因此您可以保持原样。

# php - 编译 PHP 扩展的最低要求

> ID：10835267
> 
> 赞同：-1
> 
> 时间：2012-05-31T14:07:21.567
> 
> 标签：php, compilation, php-extension

我有 PHP 扩展的源代码和 PHP 5.3 的编译版本。但我有 PHP 5.4，该项目似乎已被放弃。

因此，鉴于源代码，我必须为 PHP 5.4 编译它的最低要求是什么？

**编辑注意**：我在 Windows 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:18:10.707

这取决于扩展本身。如果扩展需要一些其他库，比如[mysql](/questions/tagged/mysql "显示标记为“mysql”的问题")扩展，那么您还需要 mysql 客户端库 - C API。为什么？因为您明确声明您想要最小的依赖要求。如果扩展不需要任何其他库，您可以很好地打开那些您已经拥有的 C 文件，并使用任何可用的 C 编译器对其进行编译。当然，您还需要 PHP 开发工具包。:)

# javascript - 在单元测试中触发 keyup 事件

> ID：10835271
> 
> 赞同：0
> 
> 时间：2012-05-31T14:07:29.577
> 
> 标签：javascript, unit-testing

什么是在单元测试中触发 keyup 事件的最佳方法。我正在使用 busterjs 并希望在输入元素上测试一些关键事件。要更清楚。我知道 createEvent/dispatch 事件。我正在登录更简单的解决方案。也许我应该在我的测试中只使用 jquery 来触发事件。YUI 中也有类似的[东西。](http://developer.yahoo.com/yui/docs/YAHOO.util.UserAction.html)所以毕竟我正在寻找一个只触发事件的小型库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:11:57.993

尝试看看[https://developer.mozilla.org/en/DOM/element.dispatchEvent](https://developer.mozilla.org/en/DOM/element.dispatchEvent)

# php - php iCalCreator - 未定义的方法 DateTime::setTimestamp()

> ID：10835272
> 
> 赞同：0
> 
> 时间：2012-05-31T14:07:30.117
> 
> 标签：php, icalendar

我正在尝试将实用的[iCalCreator](http://kigkonsult.se/iCalcreator)类版本 2.12（它允许为调度应用程序创建 iCal 数据）与 php 5.2.17

这个简单的代码

```
require_once('iCalcreator.class.php');

$config = array('unique_id' => 'xxxxxxx.net');
$v = new vcalendar($config);
$tz = "Europe/Paris";
$v->setProperty('method', 'PUBLISH');
$v->setProperty("x-wr-calname", "Calendar Sample");
$v->setProperty("X-WR-CALDESC", "Calendar Description");
$v->setProperty("X-WR-TIMEZONE", $tz);
$xprops = array("X-LIC-LOCATION" => $tz);
iCalUtilityFunctions::createTimezone($v, $tz, $xprops);
$vevent = & $v->newComponent('vevent'); 
```

给出此错误（发生在最后一行）：

> PHP 致命错误：在第 7257 行的 /home/httpd/html/default/v8/mod_report/include/iCalcreator.class.php 中调用未定义的方法 DateTime::setTimestamp()

医生[说](http://kigkonsult.se/iCalcreator/docs/using.html)

> 开发环境是 PHP 版本 5.x，但编码是为了满足 4.x 向后兼容性并且可以工作。有些函数需要 PHP >= 5.2.0。

[`DateTime::setTimestamp()`](http://php.net/manual/en/datetime.settimestamp.php)似乎从 php 5.3.0 开始实施

难道我做错了什么 ？

# google-maps - Google Maps KML 层数限制

> ID：10835276
> 
> 赞同：2
> 
> 时间：2012-05-31T14:07:40.613
> 
> 标签：google-maps, google-maps-api-3

我们曾经能够在谷歌地图上显示 7 个 KML 图层。但现在只能显示 5 层。它记录在案：

> 您可以使用 Maps API 最多向地图添加五个 Fusion Tables 图层，其中一个可以使用最多五个样式规则设置样式。

但我没有看到 KML 图层的类似限制。这是一个无证的新变化吗？

更多细节：图层使用复选框切换，当所有 7 个复选框都被选中时，仅显示前 5 个图层。如果我隐藏第一层，第六层将立即显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:05:38.747

我认为错误可能仍然存在，或者可能以不同的形式返回。我正在尝试加载 27 个 kml 文件（总大小 77.6 kb - 远低于限制），它似乎只能加载 25 个 - 如果我使用下拉菜单关闭两层，则地图加载正常。见[http://www.trammaps.com/Map.html](http://www.trammaps.com/Map.html)，

问候，

莉亚。

# r - R，有条件地删除重复行

> ID：10835284
> 
> 赞同：9
> 
> 时间：2012-05-31T14:08:03.110
> 
> 标签：r, conditional, duplicates

我在 R 中有一个数据框，其中包含 ID.A、ID.B 和 DISTANCE 列，其中距离表示 ID.A 和 ID.B 之间的距离。对于 ID.A 的每个值 (1->n)，可能有多个 ID.B 和 DISTANCE 值（即 ID.A 中可能有多个重复行，例如所有值 4，每个都有不同的 ID.B和那一行的距离）。

我希望能够删除重复 ID.A 的行，但以距离值为条件，以便我为每个 ID.A 记录留下最小的距离值。

希望这是有道理的？

提前谢谢了

编辑

希望一个例子比我的文字更有用。在这里，我想删除 ID.A = 3 的第二行和第三行：

```
myDF <- read.table(text="ID.A ID.B DISTANCE
  1 3 1
  2 6 8
  3 2 0.4
  3 3 1
  3 8 5
  4 8  7
  5 2 11", header = TRUE) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T03:15:15.463

一种可能：

```
myDF <- myDF[order(myDF$ID.A, myDF$DISTANCE), ] 

newdata <- myDF[which(!duplicated(myDF$ID.A)),] 
```

这使 ：

```
 ID.A ID.B DISTANCE
1    1    3      1.0
2    2    6      8.0
5    3    2      0.4
6    4    8      7.0
7    5    2     11.0 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T14:26:25.250

您也可以在基础 R 中轻松完成。如果`dat`是您的数据框，

```
do.call(rbind, 
        by(dat, INDICES=list(dat$ID.A), 
           FUN=function(x) head(x[order(x$DISTANCE), ], 1))) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-31T14:21:14.477

您可以`plyr`为此使用该软件包。例如，如果您的数据如下所示：

```
d <- data.frame(id.a=c(1,1,1,2,2,3,3,3,3),
                id.b=c(1,2,3,1,2,1,2,3,4),
                dist=c(12,10,15,20,18,16,17,25,9))

  id.a id.b dist
1    1    1   12
2    1    2   10
3    1    3   15
4    2    1   20
5    2    2   18
6    3    1   16
7    3    2   17
8    3    3   25
9    3    4    9 
```

您可以`ddply`像这样使用该功能：

```
library(plyr)
ddply(d, "id.a", function(df) return(df[df$dist==min(df$dist),])) 
```

这使 ：

```
 id.a id.b dist
1    1    2   10
2    2    2   18
3    3    4    9 
```

# excel - 在 Excel VBA 中按行中的单元格信息创建链接

> ID：10835289
> 
> 赞同：0
> 
> 时间：2012-05-31T14:08:17.613
> 
> 标签：excel, vba

我有我正在使用的这段代码，在此处的帮助下使它成为 Mac/PC 投诉，但至少现在在我的 PC 上运行完成后，我创建了一个带有公司名称和部件号文件夹的文件夹供以后使用。

```
Sub MakeFolder()

Dim strComp As String, strPart As String, strPath As String

strComp = Range("A1") ' assumes company name in A1
strPart = CleanName(Range("C1")) ' assumes part in C1
strPath = "C:\Images\"

If Not FolderExists(strPath & strComp) Then 
'company doesn't exist, so create full path
    FolderCreate strPath & strComp & "\" & strPart
Else
'company does exist, but does part folder
    If Not FolderExists(strPath & strComp & "\" & strPart) Then
        FolderCreate strPath & strComp & "\" & strPart
    End If
End If

End Sub

Function FolderCreate(ByVal path As String) As Boolean

FolderCreate = True
Dim fso As New FileSystemObject

If Functions.FolderExists(path) Then
    Exit Function
Else
    On Error GoTo DeadInTheWater
    fso.CreateFolder path 
    Exit Function
End If

DeadInTheWater:
    MsgBox "A folder could not be created for the following path: " & path & ". Check the path name and try again."
    FolderCreate = False
    Exit Function

End Function

Function FolderExists(ByVal path As String) As Boolean

FolderExists = False
Dim fso As New FileSystemObject

If fso.FolderExists(path) Then FolderExists = True

End Function

Function CleanName(strName as String) as String
'will clean part # name so it can be made into valid folder name
'may need to add more lines to get rid of other characters

    CleanName = Replace(strName, "/","")
    CleanName = Replace(CleanName, "-","")
    etc...

End Function 
```

现在我试图做的是，如果说客户存在，并且 SO# 文件夹存在，则在同一行的 P. 中创建指向它的链接。

现在如下图所示路径是 C:\Images\Company Name\SO#\

我想在代表行中说的链接是“SO#”的图片，SO# 将替换为行本身的 SO#。然后，当您单击它时，该链接会将您带到资源管理器中的文件夹。

理论上我可以使代码看起来像这样，但我不确定完全......

```
Option Explicit

Sub Create_a_Link()

    Dim wsJAR As Worksheet 'JL Archive
    Dim lastrow As Long, fstcell As Long
    Set wsJAR = Sheets("JL Archive")

    With Application
        .ScreenUpdating = False
        .DisplayAlerts = False
        .EnableEvents = False
    End With

     With JAR
        lastrow = wsJAR.Cells(Rows.Count, "P").End(xlUp).Row
        Range("P3:P" & lastrow).Value = Hyperlink("C:\$C3:C" & lastrow \" & "B3:B" & lastrow, "Cellname")
    End With

    With Application
        .ScreenUpdating = True
        .DisplayAlerts = True
        .EnableEvents = True
    End With 
```

但我在这里不断收到错误：

```
 Range("P3:P" & lastrow).Value = Hyperlink("C:\$C3:C" & lastrow \" & "B3:B" & lastrow, "Cellname") 
```

说编译错误：预期的列表分隔符或）

如果有人可以帮助它，将不胜感激......附件是excel表。

[https://dl.dropbox.com/u/3327208/Excel/picture.xlsx](https://dl.dropbox.com/u/3327208/Excel/picture.xlsx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:21:02.580

这里的问题是您没有正确的语法来创建超链接。我使用宏记录器查看将超链接添加到工作表的代码。我还搜索了“Excel VBA 将超链接添加到范围”。生成的语法如下：

```
ActiveSheet.Hyperlinks.Add Anchor:=myRange, Address:= myPath, TextToDisplay:= myText

myRange = the place you want the hyperlink to go
myPath = the path of the hyperlink
myText = the text you want to display 
```

在这里，我给了你你的答案，而且，如何最好地在未来找到你自己的答案。学习如何搜索答案是学习如何在 VBA 中编码的一半！

** 编辑 **

此外，您不能一次设置整个范围。您必须遍历行并分别添加每个超链接。否则，您可以在创建作业时添加超链接（取自过去的 convos。）

# java - Hibernate ConstraintViolationException：无法删除 Child 的 SortedSet 集合

> ID：10835293
> 
> 赞同：2
> 
> 时间：2012-05-31T14:08:24.170
> 
> 标签：java, hibernate, treeset

我有以下两个类：（`Claim`父）和`ClaimInsurance`（子）。它们如下：

```
public class Claim {    
  private SortedSet<ClaimInsurance> claimInsurances = new TreeSet<ClaimInsurance>();

  @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY, mappedBy="claim", orphanRemoval=true)
  @Sort(type=SortType.NATURAL)
  public SortedSet<ClaimInsurance> getClaimInsurances() {
    return this.claimInsurances;
  }

  public void setClaimInsurances(SortedSet<ClaimInsurance> claimInsurances) {
    this.claimInsurances = claimInsurances;
  }
} 
```

和：

```
public class ClaimInsurance implements java.io.Serializable, Comparable<ClaimInsurance> {
  private Claim claim;

  @ManyToOne(fetch=FetchType.LAZY)
  @JoinColumn(name="ClaimId", nullable=false)
  public Claim getClaim() {
    return this.claim;
  }

  public void setClaim(Claim claim) {
    this.claim = claim;
  }
} 
```

当我尝试删除`Claim`它时，它会给出以下异常

```
org.hibernate.exception.ConstraintViolationException: could not delete: [com.omnimd.pms.beans.Claim#201]
...
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The DELETE statement conflicted with the REFERENCE constraint "FK_RCMSClaimInsuranceTable_RCMSClaimTable". The conflict occurred in database "Omnimdv12", table "dbo.RCMSClaimInsuranceTable", column 'ClaimId'. 
```

当我如下更改类中的`claimInsurances`映射时`Claim`，一切正常：

```
private Set<ClaimInsurance> claimInsurances = new HashSet<ClaimInsurance>();

@OneToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY, mappedBy="claim", orphanRemoval=true)
public Set<ClaimInsurance> getClaimInsurances() {
  return this.claimInsurances;
}

public void setClaimInsurances(Set<ClaimInsurance> claimInsurances) {
  this.claimInsurances = claimInsurances;
} 
```

似乎问题是当我在映射中使用`Set`( `HashSet`) 时它可以工作，但如果我改为使用`SortedSet`( `TreeSet`) 则会出错。

实际问题可能是什么？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:18:40.497

好的。现在问题已经解决了。在@JB Nizet 的帮助下

同样`Claim`，我有几个给出相同`ClaimInsurance`的`compareTo()`结果。

我改变了`compareTo()`in`ClaimInsurance`这样它会为相同的返回不同的值`Claim`..就是这样，它现在可以工作了。

# fusioncharts - 有没有办法让融合图的漏斗显示零值？

> ID：10835295
> 
> 赞同：0
> 
> 时间：2012-05-31T14:08:30.150
> 
> 标签：fusioncharts

我正在使用融合图表的漏斗模式来显示一些可能为 0 也可能不是 0 的总和，这些总和分为不同的类别。我还显示了每个总和的条款数（例如：1000 美元，3 个帐户）。我希望漏斗显示一个切片，即使它的值为 0 并让它显示为 $0, x 个帐户，以向用户提供有关每个类别中有多少个帐户的信息，即使最终总和为 0。

fusioncharts 对象的 XML：

```
$strXML = "
    <chart showhovercap='1' showNames='1' showValues='1' numberSuffix=' lei' decimalPrecision='0' decimalSeparator=',' thousandSeparator='.' formatNumber='1' isSliced='1' slicingDistance='5' bgColor='f5f5f5'>                
      <set link='".$url1."' name='Negociere' value='".$negociere."' color='FD0006' hoverText='".$nr_negociere.$text_negociere."' />    
      <set link='".$url2."' name='Ofertare' value='".$oferta."' color='FF4100' hoverText='".$nr_oferta.$text_oferta."' />
      <set link='".$url3."' name='Analiza' value='".$analiza."' color='FF8900' hoverText='".$nr_analiza.$text_analiza."' />
      <set link='".$url4."' name='Abordare' value='".$abordare."' color='086FA1' hoverText='".$nr_abordare.$text_abordare."' />
      <set link='".$url5."' name='Prospectare' value='".$prospectare."' color='00B25C' hoverText='".$nr_prospectare.$text_prospectare."' />
    </chart>
    "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:48:18.210

您能否尝试在 XML 数据的元素中将“streamlinedData”属性设置为“0”？

参考。代码：

```
<chart showhovercap='1' showNames='1' showValues='1' numberSuffix='$' decimalPrecision='0' decimalSeparator=',' thousandSeparator='.' formatNumber='1' isSliced='1' slicingDistance='5' bgColor='f5f5f5' streamlinedData='0'>                
<set label="Negociere,3 accounts" value="0"/>
<set label="Ofertare, 5 accounts" value="0"/>
<set label="Analiza, 2 accounts" value="1"/>
<set label="Abordare, 1 accounts" value="0"/>
<set label="Prospectare, 2 accounts" value="0"/>
</chart> 
```

# c# - 如何绑定列表 在 MVC 中？

> ID：10835306
> 
> 赞同：2
> 
> 时间：2012-05-31T14:09:19.723
> 
> 标签：c#, asp.net-mvc-3, model-binding

我正在寻找一种将 a 绑定`List<string>`到 MVC3 中的表单的好方法。现在我有两个选择：

*   使用带有文本框的 ListBox，在 jquery 中添加/删除按钮，并在发布我的表单之前选择所有项目
*   在 jquery 中使用`<li>`将包含`<input type="hidden" />`带有值的 a 以及添加/删除按钮

我确信有更简单的方法可以做到这一点，但我在这里没有找到任何东西，所以我正在寻求帮助。我关心的是在编辑公司其他属性（名称、地址..）时向公司添加不同的业务单位（字符串）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:13:21.423

使用 ListBox 似乎是实现这一目标的好方法。然后你可以有一个文本框和一个添加按钮，它会将一个新元素附加到列表框和一个删除按钮，它将使用客户端 jquery 从列表框中删除选定的项目。提交表单时，由于您使用了 ListBox ( `<select>`with `multiple="multiple"`)，它将自动绑定到您的视图模型类型的属性，`List<string>`您将能够获取选定的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:47:08.963

这是我的第一个选项的代码，如果有人找到更好的解决方案，请告诉我！

html/剃须刀：

```
<div class="row">
        <div class="span12">
            <div class="control-group">
                <label for="AddBusinessUnit" class="control-label">@Strings.BusinessUnit</label>
                <div class="controls">
                    <div class="input-append">
                        <input type="text" class="span2" size="16" id="AddBusinessUnit" />
                        <button class="btn" type="button" id="add-business-unit">@Strings.Add</button>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <div class="controls">
                    @Html.ListBoxFor(model => model.BusinessUnits, SelectLists.BusinessUnits(Model.BusinessUnits, false), new { Multiple = "multiple" })<br/>
                    <a href="#" id="delete-business-unit">@Strings.DeleteSelectedElement</a>
                </div>
            </div>
        </div>
    </div>

    <div class="form-actions">
        <input type="submit" class="btn btn-primary" value="@Strings.Save" />
        <a href="@Url.Action(MVC.Company.Index())" class="btn">@Strings.Cancel</a>
    </div> 
```

JS：

```
<script type="text/javascript">
$(document).ready(function () {

    $('#add-business-unit').click(function (e) {
        var bu = $('#AddBusinessUnit').val();
        if (bu != '') {
            $('#BusinessUnits').append($('<option></option>').val(bu).html(bu));
            $('#AddBusinessUnit').val('');
        }
        e.preventDefault();
    });

    $('#delete-business-unit').click(function (e) {
        $('#BusinessUnits :selected').remove();
        e.preventDefault();
    });

    $('input[type="submit"]').click(function () {
        $('#BusinessUnits option').attr('selected', 'selected');
    });

}); 
```

选择列表：

```
public static class SelectLists
    {
        public static IList<SelectListItem> BusinessUnits(IList<string> bussinessUnits, bool addEmpty, string selected = "")
        {
            var list = new List<SelectListItem>();
            if(addEmpty) list.Add(new SelectListItem());
            list.AddRange(bussinessUnits.Select(businessUnit => new SelectListItem {Selected = selected == businessUnit, Text = businessUnit, Value = businessUnit}));

            return list;
        }
    } 
```

它将绑定到`public virtual IList<string> BusinessUnits { get; set; }`我模型中的属性。

希望它能有所帮助！

# javascript - 客户端表单提交日期时间，MVC 应用程序

> ID：10835308
> 
> 赞同：5
> 
> 时间：2012-05-31T14:09:26.307
> 
> 标签：javascript, asp.net-mvc, razor

我有一个包含多种表单的 MVC 应用程序。提交表单时，它会将用户的 gps 坐标传递给服务器。我还想传递客户当前的日期时间。

有没有人对最好的方法有任何想法？

这些表单是标准的 html 表单并使用基本提交。

我的表格如下所示。那么我如何最好地将 javascript 日期时间值附加到提交调用？

```
 @using (Ajax.BeginForm("CheckIn", "Home", "Nothing", new AjaxOptions { }))
            {
                <fieldset>
                    <p>Move your Tile here to let those around you see it...</p>
                    <input type="hidden" name="lat" id="hckLat" value="" />
                    <input type="hidden" name="lon" id="hckLon" value="" />
                    <input type="hidden" name="date" id="hckDate" value="" />
                    <input type="submit" value="Check In!" />
                </fieldset>
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T14:12:09.083

您可以使用在客户端机器上呈现`JavaScript`的功能。`Date`

```
var d = new Date(); 
```

然后，您可以在提交坐标时将变量 d 传递给服务器。

从您的编辑：

在您的`Checkin`方法中`Home controller`，您可以指定：

```
public ActionResult Checkin(string hckLat, string hckLong, string hckDate) 
{
    var theDate = hckDate;
} 
```

要设置 的值`hckDate`，您可以执行以下操作：

在提交按钮上单击：

```
<input type="button" name="theSubmitButton" id="theSubmitButton" value="Button"   onClick="setDate();">

function setDate() {
   var e = document.getElementById('hckDate');

   e.value = new Date();
} 
```

然后将其发送到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:11:23.770

使用javascript函数：

```
var currentDateTime = new Date() 
```

然后也许看看[moment.js](http://momentjs.com/)为 mvc 控制器格式化它

# javascript - W3C 设置新属性

> ID：10835309
> 
> 赞同：0
> 
> 时间：2012-05-31T14:09:35.183
> 
> 标签：javascript, html

我正在使用一个 jQuery 滑块，它需要我向 img 标签添加新属性，以便它可以显示描述和链接。但是，这不符合 W3C。

有没有办法让它通过？

```
<img src="..." alt="..." data-text-id="#sliderText" data-title="..." data-desc="..." /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:11:20.673

这符合 W3C，但仅限于 HTML5。确保您的 DOCTYPE 是`<!DOCTYPE html>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T14:11:27.493

将您的文档类型设置为 HTML 5。在页面顶部使用此代码：

```
<!DOCTYPE html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T14:12:45.793

将文档类型更改为 -`<!doctype html>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:14:33.143

虽然它不是 w3c 验证器，但您可以使用[http://html5.validator.nu/](http://html5.validator.nu/)来验证它。我看过之前提到的

# android - 如何在 phonegap android 应用程序上维护会话

> ID：10835315
> 
> 赞同：4
> 
> 时间：2012-05-31T14:10:08.413
> 
> 标签：android, session, cordova

我是 phonegap 开发的新手，目前正在开发一个可以在 android、i-phone 和 windows phone 上运行的应用程序。但是在处理来自phonegap应用程序的会话时遇到问题 - 我在这里很少发布关于堆栈溢出的帖子，但这仅适用于使用 appDelegate.m 定义 cookie 存储的 iphone，而且我也很少有关于在 java 中编码的 HttpClient 对象中仅 android 存储会话的帖子 - 但是phonegap 端有什么东西可以处理会话吗？因为这样我们就可以对所有 3 台设备（iphone、android、windows）使用相同的代码。

可能我听起来有些奇怪，但我真的不确定，因为找不到任何线索如何维护会话以及如何在连续调用服务器端脚本时使用相同的会话来获取不同的会话特定信息。

有没有什么常见的方法可以实现这一点，我可能会错过。非常感谢任何帮助。提前致谢。

带着敬意，

苏普里约

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:07:32.353

除非我误解了你，否则 HTML5 的 localStorage 是要走的路。

它在 Phonegap 中实现，如下所述：http: [//docs.phonegap.com/en/1.7.0/cordova_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/1.7.0/cordova_storage_storage.md.html#localStorage)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2015-03-13T13:27:21.153

这个对我有用。

```
var CheckboxValue=$("#rememberme").is("checked");
if (CheckboxValue== true)
{
    var username = $("#user").val();
    var password = $("#pass").val();
    window.localStorage.setItem("username", username);
    window.localStorage.setItem("password", password);
} 
```

# android - iText 尝试创建 PDF 文件的问题

> ID：10835316
> 
> 赞同：2
> 
> 时间：2012-05-31T14:10:18.773
> 
> 标签：android, pdf-generation, itext

当我按下一个按钮时，我正在尝试创建一个 PDF 文件。我正在使用 iText 库。

我的活动：

```
package com.pdf;

import java.io.FileOutputStream;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;

import com.itextpdf.text.Document;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.pdf.PdfWriter;

public class PDFActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    } 

    public void GenerarPDF(View view)throws Exception{
            Document document=new Document();
            PdfWriter.getInstance(document,new FileOutputStream("generando.pdf"));
            document.open();
            document.add(new Paragraph("Testing testing and testing"));
            document.close();
    }

} 
```

我的xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:background="#555">

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="34dp"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/Submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/editText1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="23dp"
        android:onClick="GenerarPDF"
        android:text="Button" />

</RelativeLayout> 
```

我的清单：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pdf"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS"/>
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
    <uses-permission android:name="android.permission.READ_FRAME_BUFFER"/>
    <uses-permission android:name="android.permission.BIND_INPUT_METHOD"/>
    <uses-permission android:name="android.permission.INSTALL_LOCATION_PROVIDER"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".PDFActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

还有日志猫：

```
05-31 12:08:58.778: E/AndroidRuntime(662): FATAL EXCEPTION: main
05-31 12:08:58.778: E/AndroidRuntime(662): java.lang.IllegalStateException: Could not execute method of the activity
05-31 12:08:58.778: E/AndroidRuntime(662):  at android.view.View$1.onClick(View.java:3044)
05-31 12:08:58.778: E/AndroidRuntime(662):  at android.view.View.performClick(View.java:3511)
05-31 12:08:58.778: E/AndroidRuntime(662):  at android.view.View$PerformClick.run(View.java:14105)
05-31 12:08:58.778: E/AndroidRuntime(662):  at android.os.Handler.handleCallback(Handler.java:605)
05-31 12:08:58.778: E/AndroidRuntime(662):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-31 12:08:58.778: E/AndroidRuntime(662):  at android.os.Looper.loop(Looper.java:137)
05-31 12:08:58.778: E/AndroidRuntime(662):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-31 12:08:58.778: E/AndroidRuntime(662):  at java.lang.reflect.Method.invokeNative(Native Method)
05-31 12:08:58.778: E/AndroidRuntime(662):  at java.lang.reflect.Method.invoke(Method.java:511)
05-31 12:08:58.778: E/AndroidRuntime(662):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-31 12:08:58.778: E/AndroidRuntime(662):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-31 12:08:58.778: E/AndroidRuntime(662):  at dalvik.system.NativeStart.main(Native Method)
05-31 12:08:58.778: E/AndroidRuntime(662): Caused by: java.lang.reflect.InvocationTargetException
05-31 12:08:58.778: E/AndroidRuntime(662):  at java.lang.reflect.Method.invokeNative(Native Method)
05-31 12:08:58.778: E/AndroidRuntime(662):  at java.lang.reflect.Method.invoke(Method.java:511)
05-31 12:08:58.778: E/AndroidRuntime(662):  at android.view.View$1.onClick(View.java:3039)
05-31 12:08:58.778: E/AndroidRuntime(662):  ... 11 more
05-31 12:08:58.778: E/AndroidRuntime(662): Caused by: java.lang.NoClassDefFoundError: com.itextpdf.text.Document
05-31 12:08:58.778: E/AndroidRuntime(662):  at com.pdf.PDFActivity.GenerarPDF(PDFActivity.java:22)
05-31 12:08:58.778: E/AndroidRuntime(662):  ... 14 more 
```

添加了 logcat 错误：

```
05-31 15:26:00.411: E/dalvikvm(792): Could not find class 'com.itextpdf.text.Document', referenced from method com.pdf.PDFActivity.GenerarPDF 
```

我认为这是真正的问题，但不知道解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T15:03:09.983

您到底在哪里尝试创建 pdf 文件？我使用了 itextpdf-5.2.1.jar 并且能够成功地在 sd 卡中创建 pdf。我在您的程序中添加了以下代码行：

```
public void GenerarPDF(View view)throws Exception{
        Document document=new Document();
        File root = new File(Environment.getExternalStorageDirectory(), "Notes");
        if (!root.exists()) {
            root.mkdirs();
        }
        File gpxfile = new File(root, "generando.pdf");
        PdfWriter.getInstance(document,new FileOutputStream(gpxfile));
        document.open();
        document.add(new Paragraph("Testing testing and testing"));
        document.close();
} 
```

希望这个答案有帮助。

**编辑**：您在评论中提到的错误 (06-01 23:32:37.178: E/AndroidRuntime(535): Caused by: java.io.FileNotFoundException: /generando.pdf: open failed: EROFS (Read-only file system ) ) 正是我在运行您提供的代码时得到的。原因是您没有指定可以创建/存储新文件的位置。使用此处粘贴的通用PDF（查看视图），程序将创建新的pdf。

此错误的另一个原因可能是您的设备中没有 SD 卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T14:22:10.987

将文件根目录更改为这一行

```
File root = new File(android.os.Environment.getExternalStorageDirectory(), "Notes"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T11:19:24.713

看起来您忘记从 onCreate() 调用 generatePDF()...希望对您有所帮助！

# xpages - XPage 有时会刷新并丢失内容

> ID：10835317
> 
> 赞同：2
> 
> 时间：2012-05-31T14:10:22.160
> 
> 标签：xpages, xpages-ssjs

我希望有人可以帮助我解决我们目前面临的一个非常严重的问题，即当用户在其中工作时，关键业务应用程序会丢失数据。

这是随机发生的——我从未复制过，但系统中的用户比我多得多。

创建了一个文档，上面有很多字段，并且有 2 个富文本字段。我们使用的是 Domino 8.5.3 - 没有使用扩展库控件。该文档内置了工作流，所有验证都由从数据查询保存事件调用的 SSJS 函数完成。sessionscope.log 有大量的日志记录，并且（现在）在笔记文档中为每个用户捕获了这些记录，因此我可以查看他们在做什么。

有时，用户进入工作流程步骤，他们必须填写富文本字段并在下拉字段中做出选择，然后他们使用工作流程按钮提交文档。当按下工作流按钮（进行完整更新）时，一些客户端 JS 首先运行

```
// Process any autogenerated submit listeners
if( XSP._processListeners ){ // Not sure if this is valid in all versions of XPages
    XSP._processListeners( XSP.querySubmitListeners, document.forms[0].id );
} 
```

（我添加这个是为了防止 RTF 字段在阅读博客后丢失它们的值，但到目前为止它不起作用）

然后服务器端事件运行并调用 view.save() 以触发 QS 代码（用于验证）和 PS 代码以在服务器上运行工作流代理。

95％的时间，这工作正常。

但是，有 5% 的时间，页面会刷新对 RFT 字段 (CKEditor) 和下拉字段所做的所有更改，都像以前一样重新加载，没有内容。就像保存没有发生一样，完全更新按钮决定像页面刷新而不是提交一样工作。

在正常情况下，日志显示当按下工作流按钮时，QuerySave 代码启动并返回 True。然后记录按下的工作流按钮的 ID（这样我可以在查看问题时看到正在使用哪些按钮），然后 PostSave 代码开始并最终返回 true。

出现问题时，QuerySave 事件运行，如果验证通过则返回 true，如果验证失败则返回 false，然后停止。工作流按钮的 ID 也会被记录下来。但是如果 QuerySave 返回 true，代码应该继续调用 PostSave 函数——它甚至不会记录它正在启动 PostSave 函数。

更糟糕的是，在调用 PostSave 代码失败后，记录的下一件事是运行的 beforePageLoad 事件，这显然会重新加载页面，该页面没有最近的编辑，因此用户失去了所有他们输入的信息！

这一定是我在使用 XPages 时遇到过的最烦人的问题，因为我找不到成功的 QuerySave（甚至因为未填写必填字段而导致失败）会导致页面像这样刷新并丢失内容。请有人可以帮我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:54:27.270

听起来好像在 5% 的用例中，文档打开超过 30 分钟并且 XSP 会话超时 - 提交导致重新创建组件树，并且现在空页面返回给用户。尝试增加应用程序的超时时间以查看问题是否消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T14:02:03.897

My experience is that this problem is due to keeping page in memory. Sometimes for some reason the page gets wiped out of memory. I'm seeing this when there is a lot of partial refreshes with rather complex backend Java processing. This processing somehow seems to take the space from memory that is used by the XPage.

The problem might have been fixed in later releases but I'm seeing it at least in 8.5.2.

In your case I would figure out some other workaround for the CKEditor bug and use "Keep pages on disk" option. Or if you can upgrade to 9.0.1 it might fix both problems.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:54:57.093

我会设计流程略有不同。在 JSF/XPages 中，验证属于验证器，而不属于 QuerySave 事件。另外我宁愿对按钮使用提交，因此您不需要在代码中触发 view.save() 。这不会干扰 JSF 的一系列事情 - 但这种风格不一定是你问题的根源......关于这个的想法：

正如 Jeremy 一样，我首先会怀疑超时，然后下一站是 QuerySave 事件中的一个致命问题，它会破坏运行时（无论出于何种原因）。你可以尝试这样的事情：

```
var qsResult = false;
// your code goes here, no return statements
// please and if you are happy
qsResult = true;
return qsResult; 
```

悲观的方法最终会告诉你是否有问题。另外：如果发生中止并且您的 querySave 刚刚返回，那么您可能会在这个陷阱中运行

```
function noReturn() {return; }  //nothing comes back!

noReturn() == true;    --> false
noReturn() == false;   --> false
noReturn() != false;   --> true!!!! 
```

您需要检查的内容：您的性能设置是什么：序列化到磁盘、保存在内存中还是保存在内存中？可能是您违反了 JavaScript 库的工作方式。

SSJS 库在需要时加载。里面的变量被初始化。当内存条件需要时，库会被卸载，并且所有相关的变量都会被丢弃。因此，如果您在调用之间依赖位于 SSJS 库中的 JS 函数中的任何变量，您可能会或可能不会取回该值，这可能会描述您的错误情况。你想保留的东西应该进入一个范围（viewScope 似乎就在这里）。

让它更棘手一点：当您使用闭包和第一类函数时，这些函数可以访问父函数的变量，除非库已被卸载。此外，函数（您也可以将它们停放在作用域中）不会序列化（开放缺陷），因此在将它们放入作用域时需要小心。

如果你的东西真的很复杂，你可能会更好地使用 backing bean。那有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T16:29:14.860

要创建托管 bean（或更多），请查看[Per 的文章](http://per.lausten.dk/blog/2012/02/creating-your-first-managed-bean-for-xpages.html)。您的验证器将位于应用程序 bean 中：

```
<faces-config>
    <managed-bean>
       <managed-bean-name>workflowvalidator</managed-bean-name>
       <managed-bean-class>com.company.WfValidator</managed-bean-class>
       <managed-bean-scope>application</managed-bean-scope>
    </managed-bean>
</faces-config> 
```

在内部，您将使用地图来显示错误消息

```
public Map<String,String> getErrorMessages() {
     if (this.errorStrings == null) { // errorStrings implements the MAP interface
        this.loadErrorDefinitions(); //Private method, loads from Domino
     }
     return this.errorStrings;
} 
```

那么您可以在验证器的错误消息字符串中使用 EL：

```
 workflowvalidator.errorMessage("some-id"); 
```

这允许 XPages 直接在 EL 中选择正确的，这比 SSJS 更快。然后，您可以去实现您自己的与该 bean 对话的[自定义 Java 验证器](http://xpagesblog.com/XPagesHome.nsf/Entry.xsp?documentId=982B853206340272852578CB0066C499)（这将允许您在此处绕过 SSJS）。除了示例之外，我不会将注释代码放入其中，而是与您的 WfValidator 类交谈。为此，您需要在 Java 中处理它：

```
private WfValidator getValidatorBean() {
    FacesContext fc = FacesContext.getCurrentInstance();
    return (WfValidator) fc.getApplication()
                           .getVariableResolver()
                           .resolveVariable(fc, "workflowvalidator");
} 
```

使用解析器，您可以访问加载的 bean。希望有帮助！

# c++ - 移动 ICU 字符串的构造函数

> ID：10835321
> 
> 赞同：4
> 
> 时间：2012-05-31T14:10:33.343
> 
> 标签：c++, icu

我为 ICU 字符串编写了一个包装类，并且我有一个移动感知编译器，但 ICU 不提供移动构造函数。我也找不到可以用来执行这项工作的 swap() 函数。如何为 ICU 字符串实现移动语义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:41:23.937

如果您每次访问字符串时都可以接受指针取消引用的开销（我不会），那么您始终可以将 icu 字符串存储在 a 中`std::unique_ptr`，那么移动就像移动指针一样简单。

```
MyWrapper(MyWrapper && that)
    :str_ptr(std::move(that.str_ptr))
{} 
```

就个人而言，我对实际修改 ICU 源感觉更好。

# java - 在 do-while 循环中更新计时器上的 JButton

> ID：10835322
> 
> 赞同：3
> 
> 时间：2012-05-31T14:10:41.350
> 
> 标签：java, timer, imageicon

我在让 JButton 在 do-while 循环中重复更新（与计时器一起使用）时遇到了一些麻烦。我正在开发一个简单的游戏，在一个 10 * 10 的平铺对象网格上玩，这些平铺对象对应于具有 100 个按钮的 JButton arrayList。

程序的这一部分处理简单的寻路（即，如果我单击角色，然后单击一个空图块，角色将在前往目的地的途中穿过每个图块）。每个步骤之间都有一个延迟，因此用户可以看到角色的进度。

在当前状态下，移动是正确的，但 JButton 仅在角色到达目的地时更新，而不是在中间步骤上。

```
public void move(int terrainTile)
{
    int currentPosition = actorList.get(selectedActor).getPosition();
    int movementValue = 0;
    int destination = terrainTile;
    int destinationX = destination / 10;
    int destinationY = destination % 10;

    do
    {
        currentPosition = actorList.get(selectedActor).getPosition();  // Gets PC's current position (before move)
        System.out.println("Old position is " + currentPosition);
        int currentX = currentPosition / 10;
        int currentY = currentPosition % 10;

        if(actorList.get(selectedActor).getCurrentAP() > 0)
        {
            movementValue = 0;

            if(destinationX > currentX)
            {
                movementValue += 10;
            }

            if(destinationX < currentX)
            {
                movementValue -= 10;
            }

            if(destinationY > currentY)
            {
                movementValue += 1;
            }

            if(destinationY < currentY)
            {
                movementValue -= 1;
            }

            int nextStep = currentPosition + movementValue;

            myGame.setActorIdInTile(currentPosition, -1);  //Changes ActorId in PC current tile back to -1
            scrubTiles(currentPosition);

            actorList.get(selectedActor).setPosition(nextStep);  //  Sets new position in actor object
            System.out.println("Actor " + selectedActor + " " + actorList.get(selectedActor).getName() + " position has been updated to " + nextStep);

            myGame.setActorIdInTile(nextStep, selectedActor); // Sets ActorId in moved to Tile
            System.out.println("Tile " + nextStep + " actorId has been updated to " + selectedActor);

            buttons.get(nextStep).setIcon(new ImageIcon(actorList.get(selectedActor).getImageName()));

            // If orthagonal move AP-4
            if(movementValue == 10 || movementValue == -10 || movementValue == 1 || movementValue == -1)
            {
                actorList.get(selectedActor).reduceAP(4);
            }
            // If diagonal move AP-6
            else
            {
                actorList.get(selectedActor).reduceAP(6);
            }

            System.out.println(actorList.get(selectedActor).getName() + " has " + actorList.get(selectedActor).getCurrentAP() + " AP remaining");

            try
            {
                Thread.sleep(500);    // one second
            }
            catch (Exception e){} 

            buttons.get(nextStep).repaint();

        }

        else
        {
            System.out.println(actorList.get(selectedActor).getName() + " has insufficient AP to move");
            break;
        }

    }while(destination != (currentPosition + movementValue)); 
```

我试过的：

1.  button.get(nextStep).repaint(); （尝试在设置 imageIcon 后发出重新绘制按钮的命令。没有变化。

2.  button.get(nextStep).revalidate(); （不能 100% 确定这是做什么的——它是一个潜在的解决方案，但不起作用。

3.  步骤 1 和 2 合并

4.  Looked into the swing timer class - movement doesn't occur everytime an actionEvent is fired, (only if character is selected and target tile is empty) so not sure how I could get this to work

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:17:22.700

这是因为您在 UI 线程中执行您的 do { }。要解决这个问题，您应该使用 SwingWorker 或 javax.swing.Timer

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:41:01.360

我真的不知道您想在评论中确切知道什么，尽管对上面的答案 +1，在我看来这才是真正的原因。看看这个示例程序，只需将您的调用添加到 中的`move(...)`方法`timerAction`，似乎对您有用。在这里试试这个代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class GridExample
{
    private static final int SIZE = 36;
    private JButton[] buttons;
    private int presentPos;
    private int desiredPos;
    private Timer timer;
    private Icon infoIcon = 
                UIManager.getIcon("OptionPane.informationIcon");

    private ActionListener timerAction = new ActionListener()
    {
        public void actionPerformed(ActionEvent ae)
        {
            buttons[presentPos].setIcon(null);
            if (desiredPos < presentPos)
            {
                presentPos--;
                buttons[presentPos].setIcon(infoIcon);
            }
            else if (desiredPos > presentPos)
            {
                presentPos++;
                buttons[presentPos].setIcon(infoIcon);
            }
            else if (desiredPos == presentPos)
            {
                timer.stop();
                buttons[presentPos].setIcon(infoIcon);
            }
        }
    };

    public GridExample()
    {
        buttons = new JButton[SIZE];
        presentPos = 0;
        desiredPos = 0;
    }

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("Grid Game");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new GridLayout(6, 6, 5, 5));
        for (int i = 0; i < SIZE; i++)
        {
            final int counter = i;
            buttons[i] = new JButton();
            buttons[i].setActionCommand("" + i);
            buttons[i].addActionListener(new ActionListener()
            {
                public void actionPerformed(ActionEvent ae)
                {
                    desiredPos = Integer.parseInt(
                                    (String) buttons[counter].getActionCommand());
                    timer.start();              
                }
            });
            contentPane.add(buttons[i]);
        }
        buttons[presentPos].setIcon(infoIcon);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
        timer = new Timer(1000, timerAction);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new GridExample().createAndDisplayGUI();
            }
        });
    }
} 
```

# node.js - Node.js 与 CouchDB 和 Backbone.js 一起使用，如何提供 json？

> ID：10835323
> 
> 赞同：1
> 
> 时间：2012-05-31T14:10:46.197
> 
> 标签：node.js, backbone.js, couchdb, express, cradle

我正在尝试构建一个用于学习 Node.js 的测试应用程序。我来自 wordpress 背景，Apache 为我设置了大部分后端逻辑。但现在，我必须建立自己的。我有一个关于如何从服务器端向客户端提供 JSON 文件的问题。工作流程是什么——Backbone.js 处理所有客户端数据操作，从 couchDB 发送/保存/获取/获取，从 NODE.js 后端提供 JSON 对象？

我正在使用[Express Microframework](http://expressjs.com/)构建 HTTP 服务器，安装了 Cradle 中间件以访问 CouchDB NoSQL 数据库。我成功地将数据从客户端 HTML（Jade 模板引擎）发布到 CouchDB 数据库/文档，并且能够通过 Cradle 中间件从服务器检索这些数据。事情进展顺利。但这一切都是由后端完成的。

我想将 Backbone.js 用于我的客户端 Javascript。Backbone.js 正在寻找从 HTTP 服务器发回的 JSON 对象。Cradle Middleware 能够创建 JSON 对象，但只能将它们直接发送到 Jade 模板，我可以使用 Jade 语法 for loop 来迭代数据对象，但它仍然不符合我想要的 Backbone.js 处理所有数据输入。我意识到我需要通过 ajax 获取 JSON obj（或者由 HTTP 生成的文件然后发送回客户端或将直接对象发送到客户端）。摇篮中间件无法做到这一点。

我对这个问题做了更多的研究。我尝试[了 CouchApp](http://couchapp.org/page/index)，它可以满足我的需要。使用 Backbone.js 处理所有数据，从 CouchDB 数据库发送/保存/获取数据。但它是在 CouchApp 中运行，而不是 Express Node.js 工作流。（也许我错了，或者只是不知道它是如何工作的）

我试过[骨干-couchdb.js](http://janmonschke.com/projects/backbone-couchdb.html)。我通读了详细信息，但仍然不知道它会帮助我得到我想要的东西。（可能需要更多教程或代码示例）。我仍然认为我需要一个 Backbone CouchDB 驱动程序来连接这两者，并以某种方式通过 NODE.js 后端为它们提供服务。

有没有人可以告诉我 Node.js 如何提供 JSON 文件，backbone.js 如何与来自 CouchDB 的数据保存/获取/获取交互？最佳实践/工作流程是什么？其他好的资源、代码示例、有用的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:04:51.927

> Cradle 中间件能够创建 JSON 对象，但只能将它们直接发送到 Jade 模板

这是不正确的。您可以在不渲染模板的情况下将 json 发回。

```
function(req, res, next){
  db.view('user/byUsername', { key: 'luke' }, function (err, doc) {
    res.send(doc); // or res.json(doc);
  });
} 
```

# debugging - Haskell 将跟踪重定向到文件

> ID：10835335
> 
> 赞同：2
> 
> 时间：2012-05-31T14:11:36.223
> 
> 标签：debugging, haskell, functional-programming

所以在这里我试图弄清楚如何将我可能在我的代码中得到的任何异常记录到日志文件中。首先我注意到跟踪功能，但后来我看到它只输出到 stdin 。

然后我看到了记录器模块，但是它在 IO monad 内部运行，所以它有点麻烦，因为它会损害纯度和所有东西。然后我想，如果我创建了一个函数 a->b->b，并且在我的情况下，a 参数的类型为 IO () 一切都会好的。

事实上，编译器并没有发现任何问题，但遗憾的是，append 从未真正被调用过，所以我仍然回到了基础。我真正想知道的是：a）是否有任何函数在执行 IO 的同时仍然具有纯签名（如 unsafePerformIO）可以帮助我进行日志记录 b）有没有办法强制编译器评估第一个参数即使我从未真正使用过我构建的功能？

提前谢谢你们

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T14:14:38.777

> 然后我想，如果我创建了一个函数 a->b->b，并且在我的情况下，a 参数的类型为 IO () 一切都会好的。

不对，错了。即使您“评估”第一个参数，这也无济于事。*没有*. _ _ `trace`_`unsafePerformIO`

`IO`价值观只是价值观，仅此而已。只有当它们发生在执行`main`（或由于`unsafePerformIO`）的过程中时，它们才真正被执行。

不过还不清楚——`trace`输出到stderr。有没有理由你不能做

```
./MyHaskellExecutable 2>dumpStdErrToThisFile 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T14:44:27.517

记录是有副作用的，所以必须在一些单子中才能产生这种效果。否则会冒着编译器优化你语义上不必要的日志调用的风险。

如果您正在构建一个计划支持日志记录的应用程序，则需要让它在某种日志记录环境中运行。`IO`是矫枉过正，但也许更简单的`Log`monad 会更合适（一种魔法`Writer`，具有类似`ST`局部封装的属性）。

# php - 通过 WSDL/SoapServer 解析 SOAP 响应

> ID：10835336
> 
> 赞同：2
> 
> 时间：2012-05-31T14:11:38.100
> 
> 标签：php, web-services, soap, wsdl, soapserver

我需要接受包含一些数据的不可修改的 SOAP 消息。它被发布到我的 WSDL 文件，然后是 PHP SoapServer。如何通过我的 wsdl 或 php 提取消息中的特定数据（包装在 xml 密钥中）？

数据流（动作是箭头，第二个箭头来自 SoapServer.php 气泡并接收响应）： ![数据流（动作是箭头，第二个箭头来自 SoapServer.php 气泡并接收响应）](../Images/a32e6a08eeb9528a03cad4cd82e5991b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:52:43.660

事实证明，做我正在寻找的最好方法是简单的`file_get_contents("php://input")`。

这是通过侦听 POST 来触发脚本的简单方法。我只是将服务的 webhook url 指向脚本，将其`file_get_contents("php://input")`转换为`array`，然后`simplexml_load_string()`解析它并使用其中一个键的数据作为我的脚本的参数。

# jquery - JQuery 倍数？

> ID：10835338
> 
> 赞同：0
> 
> 时间：2012-05-31T14:11:41.210
> 
> 标签：jquery

现在有没有人能够选择多个 html 元素。对于这个例子，我感兴趣的是选择每第 4 个元素到第 7 个元素，第 8 个元素到第 11 个元素，依此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:15:52.153

您可以尝试组合`nth-child`和`not`如下：

```
:nth-child(-n+7):not(:nth-child(-n+3)) 
```

这可能看起来很奇怪，但第一个`nth-child`选择元素 1 到 7，第二个删除元素 1 到 3，按照您的要求留下第 4、5、6 和 7 个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:16:02.360

看起来您想要选择元素的“范围”。“倍数”这个词让我大吃一惊。它不干净，但你可以像这样使用 nth-child ：

```
$(":nth-child(4), :nth-child(5), :nth-child(6),:nth-child(7)") 
```

API 文档： [http ://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:17:05.513

JQuery 对象包含它通过选择器找到的所有元素的列表。您可以使用此列表中的索引来获取项目。

例如：

```
$("div")[1] <- second div in the document
$("div")[3] <- fourth div in the document. 
```

您可以使用 javascript 循环浏览它们。

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:19:32.267

对于一次性，您可以串联使用`:gt`and选择器，例如：`:lt`

```
var divs = $("div:gt(2):lt(4)"); // Fourth through seventh inclusive 
```

如果你想在组中循环遍历它们，第一个数字（`:gt(x)`）会改变，第二个不会（因为它适用于前者的结果）：[Live example](http://jsbin.com/ileqeq) | [资源](http://jsbin.com/ileqeq/edit)

虽然我想如果我在循环，我会抓住它们然后使用[`slice`](http://api.jquery.com/slice/). 你的起点（第四个）有点奇怪，因为“第四到第七”和“第八到第十一”都是四人一组，但“第一到第三”是三人一组。

`slice`三人一组使用：

```
jQuery(function($) {

  var divs = $("div");
  var index;
  var group;

  // By threes rather than fours
  group = 0;
  for (index = 0; index < divs.length; index += 3) {
    ++group;
    divs.slice(index, index + 3).append(
      "<span>Group " + group + "</span>"
    );
  }

  function display(msg) {
    $("<p>").html(msg).appendTo(document.body);
  }
}); 
```

[实例](http://jsbin.com/ovabuv)| [资源](http://jsbin.com/ovabuv/edit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T14:15:24.360

jquery 选择器返回一个数组，所以你可以实际去

```
 var four_to_seven = [] 

 var $results = $('.myselector');

 for(var i in $results){
     if(i>=3 && i<=6){
          four_to_seven.push($results[i]);
     }
 } 
```

# apache - cakephp 在 Ubuntu 上无法进行 url 重写

> ID：10835344
> 
> 赞同：11
> 
> 时间：2012-05-31T14:12:02.243
> 
> 标签：apache, cakephp, mod-rewrite, cakephp-2.1

全部。这次我尝试使用 cakephp，但出现“您的服务器上未正确配置 URL 重写。1）帮我配置它 2）我不/不能使用 URL 重写”。我可以知道这是 apache 和 .htaccess 问题，例如 /etc/apache2/sites-avaliable/default 和每个目录 .htaccess。

我的开发环境...

*   vmware fusion4上的Ubuntu12.04
*   apache2.2.22
*   mysql5.5
*   php5.3.10
*   cakephp2.1

遵循我的流程...

1)/etc/apache2/httpd.conf

```
<Directory />
Options FollowSymLinks
AllowOverride All
</Directory> 
```

2) 启用 mod_rewrite

```
sudo a2enmod rewrite
sudo service apache2 reload 
```

3) 编辑 /etc/apache2/sites-avaliable/default (AllOverride None to AllOverride All)

```
<Directory />
Options FollowSymLinks
AllowOverride All
</Directory>
<Directory /var/www>
Options Indexes FollowSymLinks MultiViews
AllowOverride All
Order Allow,Deny
Allow from all
</Directory>

prompt: sudo service apache2 reload 
```

4)编辑或检查每个.htaccess文件->cake根目录

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
   </IfModule> 
```

->应用程序根目录

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$    webroot/    [L]
   RewriteRule    (.*) webroot/$1    [L]
   </IfModule> 
```

->webroot 目录

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php/$1 [QSA,L]
</IfModule> 
```

这个问题已经解决了，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T21:13:29.767

我也有这个问题。原来**.htaccess**文件没有与 cakePHP 源一起复制。这是使用 cp 命令或在文件浏览器中看不到隐藏文件时的常见问题，除非您复制顶级目录。

将文件直接复制到我的项目文件夹中为我修复了它，而不必弄乱我的 apache 设置。

```
cp ~/git/cakePHP/.htaccess ~/project/folder/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T17:47:02.380

可能的错误配置：

检查文件`http://your_domain_name/css/cake.generic.css`是否可以从您的浏览器访问。如果没有，您将在默认主页中收到警告

如果您**`{HOME}/css`**在根级别有一个目录，则 UrlRewriting 将不会重定向`http://your_domain_name/css/cake.generic.css`到`{HOME}/app/webroot/css/cake.generic.css`.

因此将找不到 css-File，导致未正确配置 URL 重写的消息。（查看文件 app/View/Pages/home.cpt）

**解决方案：**完全删除`{HOME}/css`根级别的目录。将您的 css 文件放在`{HOME}/app/webroot/css`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T11:54:04.537

这可能是文件权限问题。尝试将 webroot 和 tmp 目录的权限递归设置为 777。tmp 目录可能需要 sudo。

```
sudo chmod -R 777 /path/to/app/webroot/
sudo chmod -R 777 /path/to/app/tmp/ 
```

# android - 破坏尸体时崩溃

> ID：10835349
> 
> 赞同：2
> 
> 时间：2012-05-31T14:12:13.170
> 
> 标签：android, box2d, andengine, native-code, physics-engine

当我破坏一个由多个通过关节连接的物体组成的物体时，我的应用程序崩溃而没有错误。当然，我做了一些研究，发现当物理引擎计算步数时破坏物体时会发生这种情况。所以我只是将实体添加到列表中并在 onUpdate() 中销毁它们，但这并没有帮助。有趣的是，即使在 onUpdate() 之外，破坏简单的实体也很有效，而且从未导致崩溃。

没有错误输出，就在我设法捕捉到一个说问题是 World.java 中的 NullPointerException 的第 507 行时。令人惊讶的是，我发现了以下内容：

```
public boolean isLocked()
    {
        return jniIsLocked( addr );
    } 
```

有人能告诉我会发生什么吗？我什至一次摧毁尸体：

```
if (!destroyList.isEmpty()){
    Body b = destroyList.get(0);
    destroyList.remove(0);
    mPhysicsWorld.destroyBody(b);
} 
```

但问题仍然存在。

注释：我要破坏的对象是由几个通过 WeldJoints 连接到一个中心体的物体组成的。身体重叠，所以我使用负 groupIndex 来防止它们相互碰撞。在移除之前移除与特定身体相关的所有关节并没有帮助。错误输出：

```
05-31 15:32:02.486: W/dalvikvm(927): JNI WARNING: JNI method called with exception raised
05-31 15:32:02.497: W/dalvikvm(927):              in Lcom/badlogic/gdx/physics/box2d/World;.jniStep (JFII)V (CallBooleanMethodV)
05-31 15:32:02.497: W/dalvikvm(927): Pending exception is:
05-31 15:32:02.506: I/dalvikvm(927): Ljava/lang/NullPointerException;:
05-31 15:32:02.526: I/dalvikvm(927):    at com.badlogic.gdx.physics.box2d.World.contactFilter(World.java:507)
05-31 15:32:02.526: I/dalvikvm(927):    at com.badlogic.gdx.physics.box2d.World.jniStep(Native Method)
05-31 15:32:02.536: I/dalvikvm(927):    at com.badlogic.gdx.physics.box2d.World.step(World.java:298)
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T07:17:51.857

我认为您还必须首先删除物理连接器，并且您必须在更新方法中执行所有这些操作。所以，移除顺序是 1\. 从身体上移除关节 2\. 移除物理连接器 3\. 从世界上摧毁身体和其他你必须手动管理的必要事情，我没有提到。

编辑：我为你找到了另一件事。你必须实现可运行的处理程序来破坏身体和关节。以下代码对我有用，我看到了如何删除正文。

```
dRunnableHandler.postRunnable(new Runnable() {
        @Override
        public void run() {

            // destroy the bullet body
            PhysicsConnector physicsConnector = gameObject
                    .getPhysicsWorld().getPhysicsConnectorManager()
                    .findPhysicsConnectorByShape(Bullet.this);
            gameObject.getPhysicsWorld().unregisterPhysicsConnector(
                    physicsConnector);

            gameObject.getPhysicsWorld().destroyBody(bulletBody);
            particleSystem.setParticlesSpawnEnabled(false);

            gameObject.getEngine().getScene().detachChild(Bullet.this);

            gameObject.removeBulletCounter++;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:25:27.073

这只是一个想法，但也许你应该在破坏身体之前破坏关节。

# linux - 如何获取 Infiniband RX/Tx 信息

> ID：10835351
> 
> 赞同：3
> 
> 时间：2012-05-31T14:12:21.983
> 
> 标签：linux, infiniband

是否有任何工具可以收集和显示 infiniband RX/TX 信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T17:43:01.540

您可以查询 Infiniband 性能计数器以获取此类信息。使用 Openfabric 的 infiniband-diags 包，perfquery 工具应该足以满足您的需求。这是一个简单的例子：

```
> /usr/sbin/perfquery
# Port counters: Lid 22 port 1 (CapMask: 0x200)
PortSelect:......................1
CounterSelect:...................0x0000
SymbolErrorCounter:..............0
LinkErrorRecoveryCounter:........0
LinkDownedCounter:...............0
PortRcvErrors:...................0
PortRcvRemotePhysicalErrors:.....0
PortRcvSwitchRelayErrors:........0
PortXmitDiscards:................0
PortXmitConstraintErrors:........0
PortRcvConstraintErrors:.........0
CounterSelect2:..................0x00
LocalLinkIntegrityErrors:........0
ExcessiveBufferOverrunErrors:....0
VL15Dropped:.....................0
PortXmitData:....................237939
PortRcvData:.....................128199
PortXmitPkts:....................4165
PortRcvPkts:.....................4164 
```

我认为最后 4 个字段是您感兴趣的数据。有关各种其他选项的详细信息，请参见手册页。

# visual-studio - 有什么方法可以减慢 Visual Studio 9.X 中的网络服务器

> ID：10835353
> 
> 赞同：1
> 
> 时间：2012-05-31T14:12:29.137
> 
> 标签：visual-studio

我们正在本地开发，有时在质量检查或生产时遇到的稍慢的条件下进行测试会很好。在 Visual Studio 9.x 下，有没有办法稍微限制 webserver.exe？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:16:55.553

我不知道是否有这样的功能。但是当我需要类似的东西时，我正在做的是创建具有更少内存和只有 1 个 cpu 的虚拟 pc。

你可以试一试。它是免费的 [http://www.microsoft.com/windows/virtual-pc/default.aspx](http://www.microsoft.com/windows/virtual-pc/default.aspx)

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:20:38.973

在快速思考之后，我可能会向您展示我想到的以下想法：

1.  使用 CPU 减速实用程序，我在很久以前就使用过这些，不知道它们是否仍然可以在现代操作系统上工作
2.  使用 TaskManager 为 webserver 进程设置低优先级
3.  编写一个使用大量 IO 和 CPU 来减慢其他进程的小程序

如果 nr 2 工作，它可能是最好的解决方案，因为 nr 1 和 3 会减慢你的整个机器。否则 nWorx 建议的 VM 方法也是一个好主意。

# flash - 如何生成带有 128Code 字体的 UCC/EAN 128 条码？

> ID：10835354
> 
> 赞同：1
> 
> 时间：2012-05-31T14:12:37.327
> 
> 标签：flash, actionscript, fonts

我需要能够使用我们基于 ActionScript 的应用程序生成 UCC/EAN 128 条码。A 已经集成了 Code 128 字体，但需要创建 UCC/EAN 128 条码。从谷歌浏览资料，发现UCC/EAN 128其实是Code 128的颠覆，所以没有自己的字体。那么如何生成 UCC/EAN 条形码呢？我浏览谷歌几个小时都没有找到任何答案:-(

我只知道 UCC/EAN 128 有一些特殊的前缀，但是如何在代码中正确地实现它们呢？

我需要使用字体。

提前感谢一些提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:21:07.353

我使用 AS3 创建了代码 39 和代码 128 条码生成器。随意将代码用于您的项目。

[http://bit.ly/OI9iHC](http://bit.ly/OI9iHC)

# delphi - 在 TListView 中就地编辑子项

> ID：10835355
> 
> 赞同：8
> 
> 时间：2012-05-31T14:12:43.310
> 
> 标签：delphi, listview, edit, edit-in-place, subitem

我有一个包含 3 列的 ListView，并且想编辑第三列，即 Subitem[1]。如果我将 ListView.ReadOnly 设置为 True，它允许我编辑所选项目的标题。有没有一种简单的方法可以为子项目做同样的事情？我想远离在顶部添加一个无边框控件来进行编辑。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-31T14:58:23.040

您可以使用 TEdit、自定义消息和处理`OnClick`ListView 的事件来编辑列表视图的子项（在报告模式下）。

试试这个样本

```
Const
  USER_EDITLISTVIEW = WM_USER + 666;

type
  TForm1 = class(TForm)
    ListView1: TListView;
    procedure FormCreate(Sender: TObject);
    procedure ListView1Click(Sender: TObject);
  private
    ListViewEditor: TEdit;
    LItem: TListitem;
    procedure UserEditListView( Var Message: TMessage ); message USER_EDITLISTVIEW;
    procedure ListViewEditorExit(Sender: TObject);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

uses
  CommCtrl;
const
  EDIT_COLUMN = 2; //Index of the column to Edit

procedure TForm1.FormCreate(Sender: TObject);
Var
  I : Integer;
  Item : TListItem;
begin
  for I := 0 to 9 do
  begin
   Item:=ListView1.Items.Add;
   Item.Caption:=Format('%d.%d',[i,1]);
   Item.SubItems.Add(Format('%d.%d',[i,2]));
   Item.SubItems.Add(Format('%d.%d',[i,3]));
  end;

  //create the TEdit and assign the OnExit event
  ListViewEditor:=TEdit.Create(Self);
  ListViewEditor.Parent:=ListView1;
  ListViewEditor.OnExit:=ListViewEditorExit;
  ListViewEditor.Visible:=False;
end;

procedure TForm1.ListView1Click(Sender: TObject);
var
  LPoint: TPoint;
  LVHitTestInfo: TLVHitTestInfo;
begin
  LPoint:= listview1.ScreenToClient(Mouse.CursorPos);
  ZeroMemory( @LVHitTestInfo, SizeOf(LVHitTestInfo));
  LVHitTestInfo.pt := LPoint;
  //Check if the click was made in the column to edit
  If (ListView1.perform( LVM_SUBITEMHITTEST, 0, LPARAM(@LVHitTestInfo))<>-1) and ( LVHitTestInfo.iSubItem = EDIT_COLUMN ) Then
    PostMessage( self.Handle, USER_EDITLISTVIEW, LVHitTestInfo.iItem, 0 )
  else
    ListViewEditor.Visible:=False; //hide the TEdit 
end;

procedure TForm1.ListViewEditorExit(Sender: TObject);
begin
  If Assigned(LItem) Then
  Begin
    //assign the vslue of the TEdit to the Subitem
    LItem.SubItems[ EDIT_COLUMN-1 ] := ListViewEditor.Text;
    LItem := nil;
  End;
end;

procedure TForm1.UserEditListView(var Message: TMessage);
var
  LRect: TRect;
begin
  LRect.Top := EDIT_COLUMN;
  LRect.Left:= LVIR_BOUNDS;
  listview1.Perform( LVM_GETSUBITEMRECT, Message.wparam,  LPARAM(@LRect) );
  MapWindowPoints( listview1.Handle, ListViewEditor.Parent.Handle, LRect, 2 );
  //get the current Item to edit
  LItem := listview1.Items[ Message.wparam ];
  //set the text of the Edit 
  ListViewEditor.Text := LItem.Subitems[ EDIT_COLUMN-1];
  //set the bounds of the TEdit
  ListViewEditor.BoundsRect := LRect; 
  //Show the TEdit
  ListViewEditor.Visible:=True;
end; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-31T14:45:21.403

我在 CodeCentral 上编写了示例代码，展示了如何执行此操作。

[如何使用 TListView 的内置编辑器编辑子项](http://codecentral.embarcadero.com/Item/23873)

**更新：**

这是现在应该编译的更新版本：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics,
  Controls, Forms, Dialogs, ComCtrls;

type
  TForm1 = class(TForm)
    ListView1: TListView;
    procedure ListView1Editing(Sender: TObject; Item: TListItem; var AllowEdit: Boolean);
    procedure ListView1Edited(Sender: TObject; Item: TListItem; var S: string);
    procedure ListView1MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
    procedure ListView1DrawItem(Sender: TCustomListView; Item: TListItem; Rect: TRect; State: TOwnerDrawState);
  private
    { Private declarations }
    ColumnToEdit: Integer;
    OldListViewEditProc: Pointer;
    hListViewEditWnd: HWND;
    ListViewEditWndProcPtr: Pointer;
    procedure ListViewEditWndProc(var Message: TMessage);
  public
    { Public declarations }
    constructor Create(Owner: TComponent); override;
    destructor Destroy; override;
  end;

var
  Form1: TForm1;

implementation

uses
  Commctrl;

{$R *.dfm}

type
  TListViewCoord = record
    Item: Integer;
    Column: Integer;
  end;

  TLVGetColumnAt = function(Item: TListItem; const Pt: TPoint): Integer;
  TLVGetColumnRect = function(Item: TListItem; ColumnIndex: Integer; var Rect: TRect): Boolean;
  TLVGetIndexesAt = function(ListView: TCustomListView; const Pt: TPoint; var Coord: TListViewCoord): Boolean;

  // TCustomListViewAccess provides access to the protected members of TCustomListView
  TCustomListViewAccess = class(TCustomListView);

var
  // these will be assigned according to the version of COMCTL32.DLL being used
  GetColumnAt: TLVGetColumnAt = nil;
  GetColumnRect: TLVGetColumnRect = nil;
  GetIndexesAt: TLVGetIndexesAt = nil;

//---------------------------------------------------------------------------
//  GetComCtl32Version
//
//  Purpose: Helper function to determine the version of CommCtrl32.dll that is loaded.
//---------------------------------------------------------------------------

var
  ComCtl32Version: DWORD = 0;

function GetComCtl32Version: DWORD;
type
  DLLVERSIONINFO = packed record
    cbSize: DWORD;
    dwMajorVersion: DWORD;
    dwMinorVersion: DWORD;
    dwBuildNumber: DWORD;
    dwPlatformID: DWORD;
  end;
  DLLGETVERSIONPROC = function(var dvi: DLLVERSIONINFO): Integer; stdcall;
var
  hComCtrl32: HMODULE;
  lpDllGetVersion: DLLGETVERSIONPROC;
  dvi: DLLVERSIONINFO;
  FileName: array[0..MAX_PATH] of Char;
  dwHandle: DWORD;
  dwSize: DWORD;
  pData: Pointer;
  pVersion: Pointer;
  uiLen: UINT;
begin
  if ComCtl32Version = 0 then
  begin
    hComCtrl32 := GetModuleHandle('comctl32.dll');
    if hComCtrl32 <> 0 then
    begin
      @lpDllGetVersion := GetProcAddress(hComCtrl32, 'DllGetVersion');
      if @lpDllGetVersion <> nil then
      begin
        ZeroMemory(@dvi, SizeOf(dvi));
        dvi.cbSize := SizeOf(dvi);
        if lpDllGetVersion(dvi) >= 0 then
          ComCtl32Version := MAKELONG(Word(dvi.dwMinorVersion), Word(dvi.dwMajorVersion));
      end;
      if ComCtl32Version = 0 then
      begin
        ZeroMemory(@FileName[0], SizeOf(FileName));
        if GetModuleFileName(hComCtrl32, FileName, MAX_PATH) <> 0 then
        begin
          dwHandle := 0;
          dwSize := GetFileVersionInfoSize(FileName, dwHandle);
          if dwSize <> 0 then
          begin
            GetMem(pData, dwSize);
            try
              if GetFileVersionInfo(FileName, dwHandle, dwSize, pData) then
              begin
                pVersion := nil;
                uiLen := 0;
                if VerQueryValue(pData, '\', pVersion, uiLen) then
                begin
                  with PVSFixedFileInfo(pVersion)^ do
                    ComCtl32Version := MAKELONG(LOWORD(dwFileVersionMS), HIWORD(dwFileVersionMS));
                end;
              end;
            finally
              FreeMem(pData);
            end;
          end;
        end;
      end;
    end;
  end;
  Result := ComCtl32Version;
end;

//---------------------------------------------------------------------------
//  Manual_GetColumnAt
//
//  Purpose: Returns the column index at the specified coordinates,
//    relative to the specified item
//---------------------------------------------------------------------------

function Manual_GetColumnAt(Item: TListItem; const Pt: TPoint): Integer;
var
  LV: TCustomListViewAccess;
  R: TRect;
  I: Integer;
begin
  LV := TCustomListViewAccess(Item.ListView);

  // determine the dimensions of the current column value, and
  // see if the coordinates are inside of the column value

  // get the dimensions of the entire item
  R := Item.DisplayRect(drBounds);

  // loop through all of the columns looking for the value that was clicked on
  for I := 0 to LV.Columns.Count-1 do
  begin
    R.Right := (R.Left + LV.Column[I].Width);
    if PtInRect(R, Pt) then
    begin
      Result := I;
      Exit;
    end;
    R.Left := R.Right;
  end;

  Result := -1;
end;

//---------------------------------------------------------------------------
//  Manual_GetColumnRect
//
//  Purpose: Calculate the dimensions of the specified column,
//    relative to the specified item
//---------------------------------------------------------------------------

function Manual_GetColumnRect(Item: TListItem; ColumnIndex: Integer; var Rect: TRect): Boolean;
var
  LV: TCustomListViewAccess;
  I: Integer;
begin
  Result := False;

  LV := TCustomListViewAccess(Item.ListView);

  // make sure the index is in the valid range
  if (ColumnIndex >= 0) and (ColumnIndex < LV.Columns.Count) then
  begin
    // get the dimensions of the entire item
    Rect := Item.DisplayRect(drBounds);

    // loop through the columns calculating the desired offsets
    for I := 0 to ColumnIndex-1 do
      Rect.Left := (Rect.Left + LV.Column[i].Width);
    Rect.Right := (Rect.Left + LV.Column[ColumnIndex].Width);

    Result := True;
  end;
end;

//---------------------------------------------------------------------------
//  Manual_GetIndexesAt
//
//  Purpose: Returns the Item and Column indexes at the specified coordinates
//---------------------------------------------------------------------------

function Manual_GetIndexesAt(ListView: TCustomListView; const Pt: TPoint; var Coord: TListViewCoord): Boolean;
var
  Item: TListItem;
begin
  Result := False;

  Item := ListView.GetItemAt(Pt.x, Pt.y);
  if Item <> nil then
  begin
    Coord.Item := Item.Index;
    Coord.Column := Manual_GetColumnAt(Item, Pt);
    Result := True;
  end;
end;

//---------------------------------------------------------------------------
//  ComCtl_GetColumnAt
//
//  Purpose: Returns the column index at the specified coordinates, relative to the specified item
//---------------------------------------------------------------------------

function ComCtl_GetColumnAt(Item: TListItem; const Pt: TPoint): Integer;
var
  HitTest: LV_HITTESTINFO;
begin
  Result := -1;

  ZeroMemory(@HitTest, SizeOf(HitTest));
  HitTest.pt := Pt;

  if ListView_SubItemHitTest(Item.ListView.Handle, @HitTest) > -1 then
  begin
    if HitTest.iItem = Item.Index then
      Result := HitTest.iSubItem;
  end;
end;

//---------------------------------------------------------------------------
//  ComCtl_GetColumnRect
//
//  Purpose: Calculate the dimensions of the specified column, relative to the specified item
//---------------------------------------------------------------------------

function ComCtl_GetColumnRect(Item: TListItem; ColumnIndex: Integer; var Rect: TRect): Boolean;
begin
  Result := ListView_GetSubItemRect(Item.ListView.Handle, Item.Index, ColumnIndex, LVIR_BOUNDS, @Rect);
end;

//---------------------------------------------------------------------------
//  ComCtl_GetIndexesAt
//
//  Purpose: Returns the Item and Column indexes at the specified coordinates
//---------------------------------------------------------------------------

function ComCtl_GetIndexesAt(ListView: TCustomListView; const Pt: TPoint; var Coord: TListViewCoord): Boolean;
var
  HitTest: LV_HITTESTINFO;
begin
  Result := False;

  ZeroMemory(@HitTest, SizeOf(HitTest));
  HitTest.pt := Pt;

  if ListView_SubItemHitTest(ListView.Handle, @HitTest) > -1 then
  begin
    Coord.Item := HitTest.iItem;
    Coord.Column := HitTest.iSubItem;
    Result := True;
  end;
end;

//---------------------------------------------------------------------------
//  TForm1    Constructor
//
//  Purpose:  Form constructor
//---------------------------------------------------------------------------

constructor TForm1.Create(Owner: TComponent);
begin
  inherited Create(Owner);

  // no editing yet
  ColumnToEdit := -1;
  OldListViewEditProc := nil;
  hListViewEditWnd := 0;

  ListViewEditWndProcPtr := MakeObjectInstance(ListViewEditWndProc);
  if ListViewEditWndProcPtr = nil then
    raise Exception.Create('Could not allocate memory for ListViewEditWndProc proxy');

  if GetComCtl32Version >= DWORD(MAKELONG(70, 4)) then
  begin
    @GetColumnAt := @ComCtl_GetColumnAt;
    @GetColumnRect := @ComCtl_GetColumnRect;
    @GetIndexesAt := @ComCtl_GetIndexesAt;
  end else
  begin
    @GetColumnAt := @Manual_GetColumnAt;
    @GetColumnRect := @Manual_GetColumnRect;
    @GetIndexesAt := @Manual_GetIndexesAt;
  end;
end;

//---------------------------------------------------------------------------
//  TForm1    Destructor
//
//  Purpose:  Form destructor
//---------------------------------------------------------------------------

destructor TForm1.Destroy;
begin
  if ListViewEditWndProcPtr <> nil then
    FreeObjectInstance(ListViewEditWndProcPtr);
  inherited Destroy;
end;

//---------------------------------------------------------------------------
//  ListViewEditWndProc
//
//  Purpose:  Custom Window Procedure for TListView's editor window
//---------------------------------------------------------------------------

procedure TForm1.ListViewEditWndProc(var Message: TMessage);
begin
  if Message.Msg = WM_WINDOWPOSCHANGING then
  begin
    // this inline editor has a bad habit of re-positioning itself
    // back on top of the Caption after every key typed in,
    // so let's stop it from moving
    with TWMWindowPosMsg(Message).WindowPos^ do flags := flags or SWP_NOMOVE;
    Message.Result := 0;
  end else
  begin
    // everything else
    Message.Result := CallWindowProc(OldListViewEditProc, hListViewEditWnd,
      Message.Msg, Message.WParam, Message.LParam);
  end;
end;

//---------------------------------------------------------------------------
//  ListView1DrawItem
//
//  Purpose:  Handler for the TListView::OnDrawItem event
//---------------------------------------------------------------------------

procedure TForm1.ListView1DrawItem(Sender: TCustomListView; Item: TListItem; Rect: TRect; State: TOwnerDrawState);
var
  LV: TCustomListViewAccess;
  R: TRect;
  P: TPoint;
  I: Integer;
  S: String;
begin
  LV := TCustomListViewAccess(Sender);

  // erase the entire item to start fresh
  R := Item.DisplayRect(drBounds);
  LV.Canvas.Brush.Color := LV.Color;
  LV.Canvas.FillRect(R);

  // see if the mouse is currently held down, and if so update the marker as needed
  if (GetKeyState(VK_LBUTTON) and $8000) <> 0 then
  begin
    // find the mouse cursor onscreen, convert the coordinates to client
    // coordinates on the list view
    GetCursorPos(P);
    ColumnToEdit := GetColumnAt(Item, LV.ScreenToClient(P));
  end;

  // loop through all of the columns drawing each column
  for I := 0 to LV.Columns.Count-1 do
  begin
    // determine the dimensions of the current column value
    if not GetColumnRect(Item, I, R) then
      Continue;

    // mimic the default behavior by only drawing a value as highlighted if
    // the entire item is selected, the particular column matches the marker,
    // and the ListView is not already editing
    if Item.Selected and (I = ColumnToEdit) and (not LV.IsEditing) then
    begin
      LV.Canvas.Brush.Color := clHighlight;
      LV.Canvas.Font.Color := clHighlightText;
    end else
    begin
      LV.Canvas.Brush.Color := LV.Color;
      LV.Canvas.Font.Color := LV.Font.Color;
    end;

    LV.Canvas.FillRect(R);

    // draw the column's text
    if I = 0 then
      S := Item.Caption
    else
      S := Item.SubItems[I-1];

    LV.Canvas.TextRect(R, R.Left + 2, R.Top, S);
  end;
end;

//---------------------------------------------------------------------------
//  ListView1Edited
//
//  Purpose:  Handler for the TListView::OnEdited event
//---------------------------------------------------------------------------

procedure TForm1.ListView1Edited(Sender: TObject; Item: TListItem; var S: string);
begin
  // ignore the Caption, let it do its default handling
  if ColumnToEdit <= 0 then Exit;

  // restore the previous window procedure for the inline editor
  if hListViewEditWnd <> 0 then
  begin
    SetWindowLongPtr(hListViewEditWnd, GWL_WNDPROC, LONG_PTR(OldListViewEditProc));
    hListViewEditWnd := 0;
  end;

  // assign the new text to the subitem being edited
  Item.SubItems[ColumnToEdit-1] := S;

  // prevent the default behavior from updating the Caption as well
  S := Item.Caption;
end;

//---------------------------------------------------------------------------
//  ListView1Editing
//
//  Purpose:  Handler for the TListView::OnEditing event
//---------------------------------------------------------------------------

procedure TForm1.ListView1Editing(Sender: TObject; Item: TListItem; var AllowEdit: Boolean);
var
  Wnd: HWND;
  R: TRect;
begin
  // ignore the Caption, let it do its default handling
  if ColumnToEdit <= 0 then Exit;

  // get the inline editor's handle
  Wnd := ListView_GetEditControl(ListView1.Handle);
  if Wnd = 0 then Exit;

  // determine the dimensions of the subitem being edited
  if not GetColumnRect(Item, ColumnToEdit, R) then Exit;

  // move the inline editor over the subitem
  MoveWindow(Wnd, R.Left, R.Top - 2, R.Right-R.Left, (R.Bottom-R.Top) + 4, TRUE);

  // update the inline editor's text with the subitem's text rather than the Caption
  SetWindowText(Wnd, PChar(Item.SubItems[ColumnToEdit-1]));

  // subclass the inline editor so we can catch its movements
  hListViewEditWnd := Wnd;
  OldListViewEditProc := Pointer(GetWindowLongPtr(Wnd, GWL_WNDPROC));
  SetWindowLongPtr(Wnd, GWL_WNDPROC, LONG_PTR(ListViewEditWndProcPtr));
end;

//---------------------------------------------------------------------------
//  ListView1MouseDown
//
//  Purpose:  Handler for the TListView::OnMouseDown event
//---------------------------------------------------------------------------

procedure TForm1.ListView1MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
var
  Coord: TListViewCoord;
begin
  if GetIndexesAt(ListView1, Point(X, Y), Coord) then
  begin
    if Coord.Column <> ColumnToEdit then
    begin
      // update the marker
      ColumnToEdit := Coord.Column;

      // cancel the editing so that the listview won't go into
      // its edit mode immediately upon clicking the new item
      ListView1.Items[Coord.Item].CancelEdit;

      // update the display with a new highlight selection
      ListView1.Invalidate;
    end;
  end else
    ColumnToEdit := -1;
end;

end. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-27T13:45:38.030

我采用了 RRUZ 的代码，并决定将其制作为一个独立的单元，并带有一个支持多个可编辑列的派生 TListView 对象。它还允许您使用箭头、回车和制表符在可编辑项目之间移动。

```
unit EditableListView;

interface

uses
  Messages,
  Classes, StdCtrls, ComCtrls, System.Types,
  Generics.Collections;

Const
  ELV_EDIT = WM_USER + 16;

type
  TEditableListView = class(TListView)
  private
    FEditable: TList<integer>;

    FEditor: TEdit;
    FItem: TListItem;
    FEditColumn: integer;

    procedure EditListView(var AMessage: TMessage); message ELV_EDIT;

    procedure EditExit(Sender: TObject);
    procedure EditKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);

    procedure DoEdit;

    procedure CleanupEditable;
    function GetEditable(const I: integer): boolean;
    procedure SetEditable(const I: integer; const Value: boolean);
  protected
    procedure Click; override;
    function DoMouseWheel(Shift: TShiftState; WheelDelta: Integer; MousePos: TPoint): Boolean; override;
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;

    property Editable[const I: integer]: boolean read GetEditable write SetEditable;
  end;

implementation

uses
  Windows, SysUtils, CommCtrl, Controls;

{ TEditableListView }

constructor TEditableListView.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);

  FEditable := TList<integer>.Create;

  FEditor := TEdit.Create(self);
  FEditor.Parent := self;
  FEditor.OnExit := EditExit;
  FEditor.OnKeyDown := EditKeyDown;
  FEditor.Visible := false;

  ViewStyle := vsReport;   // Default to vsReport instead of vsIcon
end;

destructor TEditableListView.Destroy;
begin
  FEditable.Free;

  inherited Destroy;
end;

procedure TEditableListView.DoEdit;
begin
  if Assigned(FItem) Then
  begin
    // assign the value of the TEdit to the Subitem
    if FEditColumn = 0 then
      FItem.Caption := FEditor.Text
    else if FEditColumn > 0 then
      FItem.SubItems[FEditColumn - 1] := FEditor.Text;
  end;
end;

function TEditableListView.DoMouseWheel(Shift: TShiftState; WheelDelta: Integer; MousePos: TPoint): Boolean;
begin
  DoEdit;
  FEditor.Visible := false;
  SetFocus;

  Result := inherited DoMouseWheel(Shift, WheelDelta, MousePos);
end;

procedure TEditableListView.CleanupEditable;
var
  I: integer;
begin
  for I := FEditable.Count - 1 downto 0 do
  begin
    if not Assigned(Columns.FindItemID(FEditable[I])) then
      FEditable.Delete(I);
  end;
end;

procedure TEditableListView.Click;
var
  LPoint: TPoint;
  LVHitTestInfo: TLVHitTestInfo;
begin
  LPoint := ScreenToClient(Mouse.CursorPos);
  FillChar(LVHitTestInfo, SizeOf(LVHitTestInfo), 0);
  LVHitTestInfo.pt := LPoint;
  // Check if the click was made in the column to edit
  if (perform(LVM_SUBITEMHITTEST, 0, LPARAM(@LVHitTestInfo)) <> -1) Then
    PostMessage(self.Handle, ELV_EDIT, LVHitTestInfo.iItem, LVHitTestInfo.iSubItem)
  else
    FEditor.Visible := false; //hide the TEdit

  inherited Click;
end;

procedure TEditableListView.EditExit(Sender: TObject);
begin
  DoEdit;
end;

procedure TEditableListView.EditKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
var
  lNextRow, lNextCol: integer;
begin
  if Key in [VK_RETURN, VK_TAB, VK_LEFT, VK_RIGHT, VK_UP, VK_DOWN] then
  begin
    DoEdit;

    lNextRow := FItem.Index;
    lNextCol := FEditColumn;
    case Key of
      VK_RETURN,
      VK_DOWN:
        lNextRow := lNextRow + 1;
      VK_UP:
        lNextRow := lNextRow - 1;
      VK_TAB,
      VK_RIGHT:
        lNextCol := lNextCol + 1;
      VK_LEFT:
        lNextCol := lNextCol - 1;
    end;

    if not ( (Key = VK_RIGHT) and (FEditor.SelStart+FEditor.SelLength < Length(FEditor.Text)) )
   and not ( (Key = VK_LEFT) and (FEditor.SelStart+FEditor.SelLength > 0) ) then
    begin
      Key := 0;

      if (lNextRow >= 0) and (lNextRow < Items.Count)
     and (lNextCol >= 0) and (lNextCol < Columns.Count) then
        PostMessage(self.Handle, ELV_EDIT, lNextRow, lNextCol);
    end;
  end;
end;

procedure TEditableListView.EditListView(var AMessage: TMessage);
var
  LRect: TRect;
begin
  if Editable[AMessage.LParam] then
  begin
    LRect.Top := AMessage.LParam;
    LRect.Left:= LVIR_BOUNDS;
    Perform(LVM_GETSUBITEMRECT, AMessage.wparam, LPARAM(@LRect));
    //get the current Item to edit
    FItem := Items[AMessage.wparam];
    FEditColumn := AMessage.LParam;
    //set the text of the Edit
    if FEditColumn = 0 then
      FEditor.Text := FItem.Caption
    else if FEditColumn > 0 then
      FEditor.Text := FItem.Subitems[FEditColumn-1]
    else
      FEditor.Text := '';
    //set the bounds of the TEdit
    FEditor.BoundsRect := LRect;
    //Show the TEdit
    FEditor.Visible := true;
    FEditor.SetFocus;
    FEditor.SelectAll;
  end
  else
    FEditor.Visible := false;
end;

function TEditableListView.GetEditable(const I: integer): boolean;
begin
  if (I > 0) and (I < Columns.Count) then
    Result := FEditable.IndexOf(Columns[I].ID) >= 0
  else
    Result := false;
  CleanupEditable;
end;

procedure TEditableListView.SetEditable(const I: integer; const Value: boolean);
var
  Lix: integer;
begin
  if (I > 0) and (I < Columns.Count) then
  begin
    Lix := FEditable.IndexOf(Columns[I].ID);
    if Value and (Lix < 0)then
      FEditable.Add(Columns[I].ID)
    else if not Value and (Lix >= 0) then
      FEditable.Delete(Lix);
  end;
  CleanupEditable;
end;

end. 
```

EDIT1：添加了对鼠标滚轮滚动的检测以退出编辑。
EDIT2：允许使用箭头键在编辑框中移动光标

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-30T09:51:20.027

从[审查队列](https://stackoverflow.com/review/first-posts/16571510)：

> 对于那些感兴趣的人，我根据 RRUZ 的回答创建了一个 TListView 扩展
> 
> [https://github.com/BakasuraRCE/TEditableListView](https://github.com/BakasuraRCE/TEditableListView)

代码如下：

```
unit UnitEditableListView;

interface

uses
  Winapi.Windows,
  Winapi.Messages,
  Winapi.CommCtrl,
  System.Classes,
  Vcl.ComCtrls,
  Vcl.StdCtrls;

type
  ///
  /// Based on: https://stackoverflow.com/a/10836109
  ///
  TListView = class(Vcl.ComCtrls.TListView)
  strict private
    FListViewEditor: TEdit;
    FEditorItemIndex, FEditorSubItemIndex: Integer;
    FCursorPos: TPoint;

    // Create native item
    function CreateItem(Index: Integer; ListItem: TListItem): TLVItem;
    // Free TEdit
    procedure FreeEditorItemInstance;
    // Invalidate cursor position
    procedure ResetCursorPos;

    {
      TEdit Events
    }
    procedure ListViewEditorExit(Sender: TObject);
    procedure ListViewEditorKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
    procedure ListViewEditorKeyPress(Sender: TObject; var Key: Char);
    {
      Override Events
    }
    procedure Click; override;
    procedure KeyDown(var Key: Word; Shift: TShiftState); override;

    {
      Windows Events
    }
    { TODO -cenhancement : Scroll edit control with listview }
    procedure WMMouseWheel(var Message: TWMMouseWheel); message WM_MOUSEWHEEL;
    procedure WMHScroll(var Message: TWMHScroll); message WM_HSCROLL;
    procedure WMVScroll(var Message: TWMVScroll); message WM_VSCROLL;
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
    ///
    /// Start edition on local position
    ///
    procedure EditCaptionAt(Point: TPoint);
  end;

implementation

uses
  Vcl.Controls;

{ TListView }

procedure TListView.Click;
begin
  inherited;
  // Get current point
  FCursorPos := ScreenToClient(Mouse.CursorPos);
  FreeEditorItemInstance;
end;

constructor TListView.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  // Create the TEdit and assign the OnExit event
  FListViewEditor := TEdit.Create(AOwner);
  with FListViewEditor do
  begin
    Parent := Self;
    OnKeyDown := ListViewEditorKeyDown;
    OnKeyPress := ListViewEditorKeyPress;
    OnExit := ListViewEditorExit;
    Visible := False;
  end;

end;

destructor TListView.Destroy;
begin
  // Free TEdit
  FListViewEditor.Free;
  inherited;
end;

procedure TListView.EditCaptionAt(Point: TPoint);
var
  Rect: TRect;
  CursorPos: TPoint;
  HitTestInfo: TLVHitTestInfo;
  CurrentItem: TListItem;
begin
  // Set position to handle
  HitTestInfo.pt := Point;

  // Get item select
  if ListView_SubItemHitTest(Handle, @HitTestInfo) = -1 then
    Exit;

  with HitTestInfo do
  begin
    FEditorItemIndex := iItem;
    FEditorSubItemIndex := iSubItem;
  end;

  // Nothing?
  if (FEditorItemIndex < 0) or (FEditorItemIndex >= Items.Count) then
    Exit;

  if FEditorSubItemIndex < 0 then
    Exit;

  CurrentItem := Items[ItemIndex];

  if not CanEdit(CurrentItem) then
    Exit;

  // Get bounds
  ListView_GetSubItemRect(Handle, FEditorItemIndex, FEditorSubItemIndex, LVIR_LABEL, @Rect);

  // set the text of the Edit
  if FEditorSubItemIndex = 0 then
    FListViewEditor.Text := CurrentItem.Caption
  else
  begin
    FListViewEditor.Text := CurrentItem.SubItems[FEditorSubItemIndex - 1];
  end;
  // Set the bounds of the TEdit
  FListViewEditor.BoundsRect := Rect;
  // Show the TEdit
  FListViewEditor.Visible := True;
  // Set focus
  FListViewEditor.SetFocus;
end;

procedure TListView.ResetCursorPos;
begin
  // Free cursos pos
  FCursorPos := Point(-1, -1);
end;

procedure TListView.FreeEditorItemInstance;
begin
  FEditorItemIndex := -1;
  FEditorSubItemIndex := -1;
  FListViewEditor.Visible := False; // Hide the TEdit
end;

procedure TListView.KeyDown(var Key: Word; Shift: TShiftState);
begin
  inherited KeyDown(Key, Shift);

  // F2 key start edit
  if (Key = VK_F2) then
    EditCaptionAt(FCursorPos);
end;

///
/// Create a LVItem
///
function TListView.CreateItem(Index: Integer; ListItem: TListItem): TLVItem;
begin
  with Result do
  begin
    mask := LVIF_PARAM or LVIF_IMAGE or LVIF_GROUPID;
    iItem := index;
    iSubItem := 0;
    iImage := I_IMAGECALLBACK;
    iGroupId := -1;
    pszText := PChar(ListItem.Caption);
{$IFDEF CLR}
    lParam := ListItem.GetHashCode;
{$ELSE}
    lParam := Winapi.Windows.lParam(ListItem);
{$ENDIF}
  end;
end;

procedure TListView.ListViewEditorExit(Sender: TObject);
begin
  // I have an instance?
  if FEditorItemIndex = -1 then
    Exit;

  // Assign the value of the TEdit to the Subitem
  if FEditorSubItemIndex = 0 then
    Items[FEditorItemIndex].Caption := FListViewEditor.Text
  else
    Items[FEditorItemIndex].SubItems[FEditorSubItemIndex - 1] := FListViewEditor.Text;

  // Raise OnEdited event
  Edit(CreateItem(FEditorItemIndex, Items[FEditorItemIndex]));

  // Free instanse
  FreeEditorItemInstance;
end;

procedure TListView.ListViewEditorKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
begin
  // ESCAPE key exit of editor
  if Key = VK_ESCAPE then
    FreeEditorItemInstance;
end;

procedure TListView.ListViewEditorKeyPress(Sender: TObject; var Key: Char);
begin
  // Update item on press ENTER
  if (Key = #$0A) or (Key = #$0D) then
    FListViewEditor.OnExit(Sender);
end;

procedure TListView.WMHScroll(var Message: TWMHScroll);
begin
  inherited;
  // Reset cursos pos
  ResetCursorPos;
  // Free instanse
  FreeEditorItemInstance;
end;

procedure TListView.WMMouseWheel(var Message: TWMMouseWheel);
begin
  inherited;
  // Reset cursos pos
  ResetCursorPos;
  // Free instanse
  FreeEditorItemInstance;
end;

procedure TListView.WMVScroll(var Message: TWMVScroll);
begin
  inherited;
  // Reset cursos pos
  ResetCursorPos;
  // Free instanse
  FreeEditorItemInstance;
end;

end. 
```

原发帖者[Bakasura](https://stackoverflow.com/users/8235752/bakasura)的回答已被删除：

[![原答案截图](../Images/5077f60622a2638b2a361a628e1849be.png)](https://i.stack.imgur.com/z5l80.png)

# sql - 具有 2 个多对多关系的 3 个表的 Sql 查询

> ID：10835358
> 
> 赞同：0
> 
> 时间：2012-05-31T14:12:57.213
> 
> 标签：sql, database

我有5张桌子。主要表是：`RisCtx`、`RisObj`和`Ris`。

`RisCtx`*------------* `RisObj`
`RisObj`*------------*`Ris`

(*---* = 多对多)

所以我又得到了 2 个表：`RisCtxRisObj`和`RisObjRis`（对于多对多）。

我想要的是创建一个`view`收集与trough`RisCtx`有连接的所有记录。`Ris``RisObj`

我有点不知道:(..我读过一些关于 INNER JOIN 的东西，但我看不到一点间隙......

架构 ![数据库架构](../Images/c85b663b95e742b21edc945efc100339.png)

```
CREATE VIEW `mydb`.`CtxView_CtxFromObj_ObjFromRisk` AS
select RisCtx.*  
from RisCtx  
inner join RisCtxRisObj on RisCtx.id=RisObjRisCtx.RisCtx_id
inner join RisObj  on RisObjRisCtx.RisObj_id=RisObj.id 
inner join RisObjRis on RisObj.id=RisObjRis.Objective_id 
inner join Ris on RisObjRis.Risk_id=Ris.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:15:32.187

由于您没有提供模式，我无法向您展示您的`ON`子句应该是什么样子，但基本查询结构是：

```
select RisCtx.*
from RisCtx 
inner join RisCtxRisObj on ...
inner join RisObj  on ...
inner join RisObjRis on ...
inner join Ris on ... 
```

# mysql - 炼油厂 cms 页面长度超过 65534 字节

> ID：10835362
> 
> 赞同：2
> 
> 时间：2012-05-31T14:13:07.197
> 
> 标签：mysql, ruby-on-rails, ruby, refinerycms

我有一个网站，一页很长。当我试图在炼油厂 cms 页面编辑器中保存这个页面时，它在我的 mysql2 数据库表 page_part 中只保存了 65534 个字节。我已经将 page_parts 中的字段正文转换为中等文本，它可以帮助我将页面保存在数据库中，但炼油厂仍然只占用 65534 字节。我可以增加这个吗？

Rails 3.2.2
精炼厂cms 2.0.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:36:47.213

我认为这是mysql的限制。Mysql 有几种可以存储更多文本的数据类型，您需要创建一个迁移以将refinery_page_parts.body 列修改为“mediumtext”（1600 万个字符）或“longtext”（超过 4 万亿个字符）。像这样：

```
change_column :refinery_page_parts, :body, 'mediumtext' 
```

或者

```
change_column :refinery_page_parts, :body, 'longtext' 
```

# java - 使用 OAuth2 以编程方式向 Google 进行身份验证

> ID：10835365
> 
> 赞同：30
> 
> 时间：2012-05-31T14:13:22.910
> 
> 标签：java, google-oauth, google-signin

如何以编程方式向 Google 进行身份验证？现在 ClientLogin ( [https://developers.google.com/accounts/docs/AuthForInstalledApps](https://developers.google.com/accounts/docs/AuthForInstalledApps) ) 已被弃用，我们如何使用 OAuth2 对 Google 执行编程身份验证？

使用 ClientLogin，我们可以 使用电子邮件和密码参数向[https://www.google.com/accounts/ClientLogin发送帖子并获取身份验证令牌。](https://www.google.com/accounts/ClientLogin)

使用 OAuth2 我找不到解决方案！

#

我的应用程序是一个 java 后台进程。我看到，按照这个链接：developers.google.com/accounts/docs/OAuth2InstalledApp#refresh，如何使用刷新的令牌获取新的访问令牌。

问题是当我有一个新的有效访问令牌时，我找不到关于如何实例化 Analytics 对象（例如）以执行查询的 java 示例

这是我的代码，它在调用“execute()”时返回 401 Invalid credentials：

```
public class Test {

static final String client_id = "MY_CLIENT_ID";
static final String client_secret = "MY_SECRET";
static final String appName = "MY_APP";

private static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();
private static final JsonFactory JSON_FACTORY = new JacksonFactory();

static String access_token = "xxxx";
static String refreshToken = "yyyyy";

public static void main (String args[]){

    try {

        GoogleCredential credential = 
            new GoogleCredential.Builder()
                .setTransport(HTTP_TRANSPORT)
                .setJsonFactory(JSON_FACTORY)
                .setClientSecrets(client_id, client_secret).build();
        credential.setAccessToken(access_token);
        credential.setRefreshToken(refreshToken);
        //GoogleCredential
        Analytics analytics = Analytics.builder(HTTP_TRANSPORT, JSON_FACTORY)
            .setApplicationName(appName)
            .setHttpRequestInitializer(credential)
            .build();

        Accounts accounts = analytics.management().accounts().list().execute();
    } catch (Exception e) {
        e.printStackTrace();
    } 
} 
```

问题是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-31T16:28:38.343

检查已安装应用程序的 OAuth 2 流程：

[https://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)

它仍然需要用户第一次使用浏览器进行身份验证，但是您可以存储刷新令牌并将其用于后续请求。

对于替代解决方案，请检查设备流或服务帐户，它们在同一文档集中进行了说明。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-10-26T16:36:51.777

我发现 Google Java 客户端过于复杂且文档记录不完善。这是使用 Google Oauth2的简单明了的 Servlet[示例。](http://highaltitudedev.blogspot.com/2013/10/google-oauth2-with-jettyservlets.html)对于后台进程，您需要请求 access_type=offline。正如其他人所提到的，您需要用户进行一次性授权。之后，您可以请求刷新令牌，因为谷歌令牌在一小时后到期。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-01-01T23:56:12.823

虽然我很欣赏 OP 最初针对的是[OAuth2InstalledApp](https://developers.google.com/identity/protocols/OAuth2InstalledApp)方法，但我想指出一个使用[OAuth2WebServer](https://developers.google.com/identity/protocols/OAuth2WebServer)方法的可行解决方案。它们没有显着差异，这对我有用。我发现 google OAuth 库非常好，因为它可以为您处理大部分 OAuth 舞蹈，并且可以轻松刷新访问令牌。下面的解决方案取决于使用预先获得的刷新令牌。

正如接受的答案所述，要使 OAuth 身份验证正常工作（即使对于 Java 后台进程），其中请求依赖于对用户数据的访问

> *要求用户第一次使用浏览器进行身份验证，但随后您可以存储刷新令牌并将其用于后续请求。*

从 OP 之前的评论中，我看到以下内容

> 因此，我遵循了用于 Web 服务器应用程序的 OAuth2（此处记录了离线访问），但我仍然遇到问题。
> 1）我通过浏览器执行第一个请求，并获得用于离线访问
> 的认证代码 2）我执行认证代码的 java 发布并获得访问令牌和刷新令牌

我使用的方法更像

> 1）我通过浏览器执行第一个请求并获取刷新令牌以进行离线访问
> 2）在 java 中，我向库提供刷新令牌，库将获取访问令牌等

具体来说，使用[google-api-java-client 库](https://developers.google.com/api-client-library/java/google-api-java-client/oauth2)，代码非常简单，请注意我没有像 OP 那样设置访问令牌，就像我在`credential.refreshToken();`其他地方调用的那样。（我检查我是否已经有一个有效的访问令牌，如果没有在 API 调用之前调用 refresh）

```
 private Credential generateCredentialWithUserApprovedToken() throws IOException,
      GeneralSecurityException {
    JsonFactory jsonFactory = JacksonFactory.getDefaultInstance();
    HttpTransport httpTransport = GoogleNetHttpTransport.newTrustedTransport();
    InputStreamReader inputStreamReader =
        new InputStreamReader(jsonFileResourceForClient.getInputStream());
    GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(jsonFactory, inputStreamReader);
    return new GoogleCredential.Builder().setTransport(httpTransport).setJsonFactory(jsonFactory)
        .setClientSecrets(clientSecrets).build().setRefreshToken(REFRESH_TOKEN);
  } 
```

请注意，这涵盖了我的方法的步骤 2，`REFRESH_TOKEN`步骤 1 中提到的内容可以如下所述获得。

首先，预先设置了一个[Web 应用程序，在](https://developers.google.com/identity/protocols/OAuth2WebServer)[Google 控制台上为凭据](https://console.developers.google.com/apis/credentials/)创建 OAuth 2.0 客户端 ID ，您最终会得到一个下载的 json 文件，该文件将被读入`GoogleClientSecrets`对象。

IE

[![在此处输入图像描述](../Images/d012375d705e606d11fb45e02fc8f29e.png)](https://i.stack.imgur.com/6MHRR.png)

确保将 Google Playground 回调 URI 添加到授权重定向 URI

[![在此处输入图像描述](../Images/44f2848f18dfe1f17c2822fa8381c147.png)](https://i.stack.imgur.com/EU5Cj.png)

然后，您为 Playground 准备好您的客户端 ID 和客户端密码，您还可以下载可以拉入 Java 代码的 json。

[![在此处输入图像描述](../Images/37843c4b4143dd255e5235fbfc2ab3b3.png)](https://i.stack.imgur.com/ExCAp.png)

这`REFRESH_TOKEN`是通过使用以下配置向[google oauth playground发送请求来获得的。](https://developers.google.com/oauthplayground/)请注意，在第 1 步之前并选择您的范围之前，您应该转到设置以检查您是否提供了自己的凭据，并在其下方添加您的客户端 ID 和密码

[![在此处输入图像描述](../Images/9e2d840a2655290f87e7eeb581e348d5.png)](https://i.stack.imgur.com/GJ03G.png)

注意Access类型是Offline，对应[这个](https://developers.google.com/identity/protocols/OAuth2WebServer#offline)。

这里还有一个关于获取刷新令牌的很好的解释[https://www.youtube.com/watch?v=hfWe1gPCnzc](https://www.youtube.com/watch?v=hfWe1gPCnzc)

这足以开始，并且是一次性设置！

关于刷新令牌，您应该了解它们的生命周期，如此处的文档中[所述](https://developers.google.com/identity/protocols/OAuth2?hl=en#expiration)

在 oauthplayground 你会看到这个

[![在此处输入图像描述](../Images/c399c879242999de91584acc2ef8412c.png)](https://i.stack.imgur.com/XuEpj.png)

[但是在此处](https://developers.google.com/identity/protocols/OAuth2?hl=en#basicsteps)文档的第 4 点上，它说

[![在此处输入图像描述](../Images/ea8ff1d39d52195da3eb814a6d279f1c.png)](https://i.stack.imgur.com/9d0FE.png)

嗯。

另请参阅[如何在没有用户干预的情况下授权应用程序（Web 或已安装）？（规范？）](https://stackoverflow.com/questions/19766912/how-do-i-authorise-an-app-web-or-installed-without-user-intervention-canonic)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:04:47.987

对于代表自己进行身份验证的应用程序（即，对另一个应用程序，传统上通过使用共享密码登录角色帐户），Google 提供的 ClientLogin 的 OAuth2 替代方案是服务帐户：

[https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

# python - 如何使用 suds (Python) 对 HTTP 代理进行身份验证？

> ID：10835370
> 
> 赞同：2
> 
> 时间：2012-05-31T14:14:06.637
> 
> 标签：python, soap, proxy, wsdl, suds

我正在尝试通过需要基本身份验证的 suds 通过也需要基本身份验证的代理来访问 Web 服务，但我不断得到：

```
suds.transport.TransportError: HTTP Error 401: Authorization Required 
```

有没有人有如何做到这一点的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T15:06:35.357

看起来我需要做的就是将 proxy={'https':'http://user:pass@proxy:port'} 传递给 Client 构造函数。

# eclipse - DAO 类看不到 persistence.xml

> ID：10835371
> 
> 赞同：0
> 
> 时间：2012-05-31T14:14:07.637
> 
> 标签：eclipse, jpa-2.0, eclipselink

我正在使用 eclipse + eclipselink + maven2 + mysql + jpa 2.0 + java SE。

我可以使用 Eclipse 从实体类创建 MySQL 表。persistence.xml 位于 src/main/resources/META-INF/...

我还在 eclipse 中指定了用于生产和测试的数据库连接。该项目选择了任何一个，并且似乎可以正常工作。

根据项目使用的数据源，将表创建到选定的数据库。作为数据库连接详细信息的 persistence.xml 中的内容被忽略（不确定会发生什么）。此外，如果我右键单击 persistence.xml 并选择“JPA 工具”>“同步类列表”。该文件使用实体类进行更新。

persistence.xml 也是必需的，否则将不会在任何一个数据库中创建表。（通过重命名文件测试）

早些时候，我还能够通过放入和加载东西来执行一些 DAO 方法进行测试。Eclipse 包资源管理器中还有一个名为“JPA”的菜单项，列出了项目中不再存在的 JPA 实体。

我没有对项目进行任何更改（仅在晚上关闭计算机）。下次打开项目时，我不再能够执行任何 DAO 方法，并且出现以下错误：

```
No Persistence provider for EntityManager named xxx 
```

具有 DAO 方法的主类、Eclipse 运行的 JUnit 测试和 Maven 执行的相同测试也会出现同样的错误。

注意：我仍然能够从实体创建表。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T00:04:30.030

通常，这是由于您的资源目录未部署到您的应用程序容器。在 Eclipse 中，右键单击项目并在 Project Explorer 中选择 Properties。然后，选择 Deployment Assembly 属性并确保正在部署您的“/src/main/resources”：

![部署组装](../Images/fdd9a04c671c632be8dddcea688679b0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:12:38.163

问题出在 pom.xml 中。

由于需要 eclipselink，我对休眠有依赖。

错误：这就是我所拥有的

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-entitymanager</artifactId>
  <version>4.1.3.Final</version>
</dependency> 
```

右：应该是

```
<dependency>
  <groupId>org.eclipse.persistence</groupId>
  <artifactId>eclipselink</artifactId>
  <version>2.0.0</version>
  <scope>compile</scope>
</dependency> 
```

我通过纯粹测试一切可能的方法得到了解决方案。甚至不确定我是如何尝试替换的，因为我之前能够使用相同的 pom 和项目进行测试。

没有任何错误或它的运作方式并不表明它可能有些错误。

甚至不确定这是否完全正确，但至少它可以再次工作。

# apache - ViewVC 迁移后使用 mod_rewrite 更新 url

> ID：10835373
> 
> 赞同：1
> 
> 时间：2012-05-31T14:14:21.943
> 
> 标签：apache, mod-rewrite, apache2.2

在工作中，我们有一个 ViewVC 系统，它已从一台机器迁移到另一台机器。版本也升级了。旧系统用作`/cgi-bin/viewvc.cgi`其所有 url 的基础，新系统使用`/viewvc`. 主机名保持不变。

我们有很多包含 ViewVC 链接的文档，我希望它们仍然像以前一样工作。我白天是一名软件开发人员，所以不是 apache 专家，但我认为那`mod_rewrite`是正确的途径。不幸的是，我似乎无法让它做我想做的事。

没有任何更改，当我转到 url 时，`/cgi-bin/viewvc.cgi`我得到一个 404。这是我在 apache 日志中看到的内容：

```
==> /var/log/httpd/error_log <==
[Thu May 31 03:13:10 2012] [error] [client 172.16.3.52] script not found or unable to stat: /var/www/cgi-bin/viewvc.cgi

==> /var/log/httpd/access_log <==
172.16.3.52 - - [31/May/2012:03:13:10 +0100] "GET /cgi-bin/viewvc.cgi HTTP/1.1" 404 289 "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.17 Safari/536.11" 
```

当我将`RewriteEngine`/`RewriteRule`条目添加到`/etc/httpd/httpd.conf`如下...

```
<Directory "/var/www/cgi-bin">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all

    RewriteEngine on
    RewriteRule ^/cgi-bin/viewvc.cgi(.*) /viewvc$1
</Directory> 
```

我得到一个 403。这是日志中的内容：

```
==> /var/log/httpd/error_log <==
[Thu May 31 03:15:35 2012] [error] [client 172.16.3.52] Options FollowSymLinks or SymLinksIfOwnerMatch is off which implies that RewriteRule directive is forbidden: /var/www/cgi-bin/viewvc.cgi

==> /var/log/httpd/access_log <==
172.16.3.52 - - [31/May/2012:03:15:35 +0100] "GET /cgi-bin/viewvc.cgi HTTP/1.1" 403 293 "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.17 Safari/536.11" 
```

如果我编辑上面的选项行以包含`FollowSymLinks`并且`SymLinksIfOwnerMatch`我回到 404。

```
==> /var/log/httpd/error_log <==
[Thu May 31 03:17:20 2012] [error] [client 172.16.3.52] script not found or unable to stat: /var/www/cgi-bin/viewvc.cgi

==> /var/log/httpd/access_log <==
172.16.3.52 - - [31/May/2012:03:17:20 +0100] "GET /cgi-bin/viewvc.cgi HTTP/1.1" 404 289 "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.17 Safari/536.11" 
```

我究竟做错了什么？我的规则是错的还是放错了地方？`mod_rewrite`甚至他是正确的做法吗？

**版本**：如果它很重要，我在 Fedora 17 机器上使用以下软件包：

*   httpd-2.2.22-4.fc17.x86_64
*   viewvc-1.1.13-2.fc17.noarch
*   viewvc-httpd-wsgi-1.1.13-2.fc17.noarch

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:47:34.527

为了回答我自己的问题，问题是 1）模式匹配中的句点需要转义，以及 2）我把规则放在了错误的位置。我应该把它放在顶层而不是 cgi-bin 下。

* * *

为了完成，这是我的工作方式：

我打开了重写日志，所以我可以确切地看到重写引擎在做什么：

```
RewriteLog /tmp/rewrite.log
RewriteLogLevel 9 
```

使用原始的重写规则，我得到了这个被记录：

```
127.0.0.1 - - [02/Jun/2012:23:43:49 +0100] [localhost/sid#b76f4018][rid#b6d4a058/initial] (2) init rewrite engine with requested uri /cgi-bin/viewcvs.cgi
127.0.0.1 - - [02/Jun/2012:23:43:49 +0100] [localhost/sid#b76f4018][rid#b6d4a058/initial] (3) applying pattern '^/cgi-bin/viewvc.cgi(.*)' to uri '/cgi-bin/viewcvs.cgi'
127.0.0.1 - - [02/Jun/2012:23:43:49 +0100] [localhost/sid#b76f4018][rid#b6d4a058/initial] (1) pass through /cgi-bin/viewcvs.cgi 
```

当我更改规则以逃避期间：

```
RewriteRule ^/cgi-bin/viewvc\.cgi(.*) /viewvc$1 
```

我得到了这个记录。

```
192.168.1.64 - - [03/Jun/2012:00:08:53 +0100] [192.168.1.128/sid#b76ed018][rid#b6d39058/initial] (2) init rewrite engine with requested uri /cgi-bin/viewvc.cgi/
192.168.1.64 - - [03/Jun/2012:00:08:53 +0100] [192.168.1.128/sid#b76ed018][rid#b6d39058/initial] (3) applying pattern '^/cgi-bin/viewvc\.cgi(.*)' to uri '/cgi-bin/viewvc.cgi/'
192.168.1.64 - - [03/Jun/2012:00:08:53 +0100] [192.168.1.128/sid#b76ed018][rid#b6d39058/initial] (2) rewrite '/cgi-bin/viewvc.cgi/' -> '/viewvc/' 
```

所以它是光秃秃的“。” 这使它不匹配。但根据[文档](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriterule)，这是“任何单个字符”，所以我不清楚为什么它不起作用。

[重写指南](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)到处逃避它们，但没有表明它是必需的或为什么，这是一种耻辱。

# xml - 在 MarkLogic 中使用 Information Studio 拆分 XML 文件

> ID：10835374
> 
> 赞同：1
> 
> 时间：2012-05-31T14:14:23.233
> 
> 标签：xml, marklogic

我需要拆分如下所示的 XML 文件

```
<root>
   <Credit>
       <TradeId>123</TradeId>
       <name>abcd</name>
   </Credit>
   <Credit>
       <TradeId>456</TradeId>
       <name>efgh</name>
   </Credit>
   <Credit>
       <TradeId>789</TradeId>
       <name>ijkl</name>
   </Credit>
</root> 
```

由节点 Credit 分成 3 个单独的文件，每个文件如下所示：

```
<root>
   <Credit>
       <TradeId>123</TradeId>
       <name>abcd</name>
   </Credit>
</root> 
```

我在 MarkLogic 的 Information Studio 中的 XSLT（样式表版本 2.0）转换选项中使用以下代码，但它不起作用。它正在加载原始文件，而不是将其拆分为较小的文件并加载它们。

```
<xsl:template match="/">
   <xsl:for-each select="collection(iri-to-uri('./?select=*.xml;recurse=yes'))">
     <xsl:for-each select="//Credit">
      <xsl:variable name="TradeId" select="TradeId" />          
          <xsl:variable name="filename" select="concat('./_Out/', $TradeId, .xml')" />
      <xsl:value-of select="$filename" />
      <xsl:result-document href="{$filename}">
          <root>
        <xsl:copy-of select="node()"/>
          </root>
      </xsl:result-document>
    </xsl:for-each>
   </xsl:for-each>
</xsl:template> 
```

我在这里错过了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:36:56.250

问题是由于摄取的文档被加载到名为“ `Fab`”的临时数据库中。转换在`XSLT`那里应用。成功时将结果移动到目标数据库。文档的这种移动依赖于信息工作室的特定属性，这些属性会自动分配给主`XSLT`输出的结果，而不是来自`xsl:result-document`调用的任何辅助输出。

可以将`XSLT`步骤替换为将`XQuery`这些属性显式复制到所有结果的步骤，但这取决于特定版本的信息工作室。复制收集器并对其进行自定义以进行拆分更安全。

Github 上有一些非常好的例子：[https ://github.com/marklogic/infostudio-plugins](https://github.com/marklogic/infostudio-plugins)

# jquery - 按需模态渲染？

> ID：10835376
> 
> 赞同：1
> 
> 时间：2012-05-31T14:14:31.667
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

据我目前了解，jquery modals 在页面加载期间呈现，并由用户通过 hidden=true 到 hidden=false 值触发。

这一切都很好而且很花哨，并且当模式保持在每页的最低限度时效果很好。但是，这是我的问题，如果您有一个完整的模态列表，当您单击它时会弹出一个要编辑的信息模态列表。例如，一个文档网格，您希望单击一个文档并弹出一个模式来编辑小文档。在页面加载期间不会呈现所有这些文档会降低用户体验。没有办法“按需”加载和渲染该模式。

这种行为的标准做法是什么。

我知道 Rails 的方法是为每个文档加载一个新页面，但我很想知道如何才能完成这项工作。

我也标记了 jQuery 人群，因为这个库是我最熟悉的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:19:51.560

我在我的应用程序中经常这样做。这是我的一个应用程序中的反馈按钮的代码。

它创建对话框，并在按下按钮时动态加载对话框的内容。

```
$(function () {
    var button= $("#FeedbackButton");
    if (button.length == 0)
        button= $("<div id='FeedbackButton'>Feedback</div>").hide().appendTo("body");

    var dialog = $("#FeedbackDialog");
    if (dialog.length == 0)
        dialog = $("<div id='FeedbackDialog'>Feedback</div>").hide().appendTo("body");

    button.click(function () {
        button.hide();
        dialog.load("_FeedbackDialog.htm");
        $(dialog).dialog({
            title: "Feedback",
            modal: true,
            width: 800,
            height: 300,
            close: function () {
                $(button).show();
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:23:52.350

通过按需呈现模式，我假设您的意思是响应 AJAX 查询。在这种情况下，是的，有一种方法可以按需构建模式。您需要做的是设置一个事件侦听器，该侦听器对您的控制器进行 AJAX 调用。

```
# my_view.html
/* inside JS event trigger */
$.get("/get_modal.js") 
```

然后在您的控制器中，响应该 AJAX 调用。

```
# my_controller.rb
def get_modal
  respond_to do |format|
    format.js # this will execute get_modal.js (or get_modal.js.erb)
  end
end 
```

但是，您的“视图”不会是 HTML，而是 JS，它让您可以自由地做任何想做的事情。

```
# get_modal.js
/* JS modal code */ 
```

# java - Java 1.7 中的 webstart 是否损坏？

> ID：10835379
> 
> 赞同：2
> 
> 时间：2012-05-31T14:14:38.400
> 
> 标签：java, java-7, java-web-start

> **可能重复：**
> [Java Web Start 自 JDK 1.7 起损坏](https://stackoverflow.com/questions/9623837/java-web-start-broken-since-jdk-1-7)

我的公司有一个应用程序，它通过我们主页的 webstart 启动。该应用程序多年来一直运行良好，现在当我们的用户从 Java 1.6 升级到 1.7 时突然无法加载。似乎 1.7 有一个错误，阻止它下载 .jar 文件，因此它最终超时并失败。有没有其他人看过这个？

# c - C - Visual Studio 界面中的 printf

> ID：10835381
> 
> 赞同：0
> 
> 时间：2012-05-31T14:14:44.130
> 
> 标签：c, windows, visual-studio, printf

有没有使用 printf( 或类似的东西) 打印到 textarea 或其他东西？我需要打印不同颜色的字符，包括空格。如果可以“绘制”单元格，则表格可以成为解决方案。使用标签会很棒，但它是随机的 IxJ（columnsxrows），并且不可能选择每一个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:41:09.723

既然你提到`printf`了，我假设你想输出到控制台。您可以使用[SetConsoleTextAttribute](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686047%28v=vs.85%29.aspx)设置要使用的前景色和背景色。

# javascript - jqGrid：在本地数据已经在表中之后加载JSON数据

> ID：10835385
> 
> 赞同：4
> 
> 时间：2012-05-31T14:15:14.353
> 
> 标签：javascript, jquery, ajax, jqgrid

我有一个非常具体的问题：我有一个带有四个选项的小表格。您可以填写或不填写，当您单击“确定”时，我会根据这些选项加载带有数据的 jqGrid。但是由于我不知道我的列是什么样的，所以我让我的 servlet 生成列模型和列名；因此我必须发出 AJAX 请求来加载数据，然后将其作为“本地”数据填充到 jqGrid 中。不过我想使用分页。

因此我的问题是：在 jqGrid 已经通过本地数据建立之后，如何将更多数据加载到它中？

这是代码：

```
$.ajax({
    type : 'GET',
    url : 'data.jsp',
    data : reqData,
    dataType : 'json',
    error: function() {
        $("#dialog-message").dialog("open");
        $("#ajax-loader").css("display", "none");
    },
    success : function(result) {
        jQuery("#results").jqGrid({
            data : result.rows,
            datatype : "local",
            colNames : result.columnNames,
            colModel : result.columnModel,
            pager : $('#pager'),
            rowNum : 1000,
            scroll : true,
            viewrecords : true,
            sortname : 'TITEL',
            width : window.innerWidth - 30,
            height : window.innerHeight - 190,
            altRows : true,
            loadError: function() {
                $("#dialog-message").dialog("open");
                $("#ajax-loader").css("display", "none");
            },
            loadComplete: function() {
                $("#ajax-loader").css("display", "none");
            }
        }).jqGrid("navGrid", "#pager", {
            edit: false,
            add: false,
            del: false,
            search: true,
            refresh: false
        }).jqGrid("gridResize");

    }
}); 
```

/edit：我尝试过以下操作，但这仍然不能解决网格不知道实际总共有多少页的问题（实际上，那时我什至不知道），而且，加载后，它认为它只获取本地数据。可能有 onScroll 事件或其他什么？我还没有找到一个。

```
datatype : !json ? "local" : function(postdata) {
                $.ajax({
                    type: 'GET',
                    url: 'data.jsp',
                    data: $.merge(postdata, reqData),
                    dataType: 'json',
                    success: function(data, status, jqXHR) {
                        var mygrid = jQuery("#results")[0];
                        var myjsongrid = eval("("+jqXHR.responseText+")");
                        mygrid.addJSONData(myjsongrid); 
                    }
                });
            }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:35:16.020

你能不能做这样的事情......获取网格，清除数据，定义获取数据的 url（它可能会根据用户选择的选项而改变），然后将数据格式更改为 json 而不是本地。

```
var grid = $('#TargetGridID');
    grid.clearGridData();
    grid.setGridParam({ url: '../controller/action?datatype=Option1' });
    grid.setGridParam({ datatype: 'json' });
    grid.trigger('reloadGrid'); 
```

我们使用这种方法并且效果很好......将其与能够分页的存储过程一起使用，并且网格速度非常快！我知道一个 20,000 行的网格大约需要 700 毫秒，页数为 500 行。

如果您使用 SQL 处理数据，我可以上传一个关于如何在 SQL 存储过程中支持分页的示例，这是非常有用的东西。

# eclipse-plugin - Vagrant 和 Eclipse IDE 的插件

> ID：10835387
> 
> 赞同：2
> 
> 时间：2012-05-31T14:15:23.237
> 
> 标签：eclipse-plugin, vagrant

我想知道是否存在任何允许启动/停止任何 vagrant 机器的 eclipse 插件。

它存在吗？你能给我发个链接吗？

在此先感谢，雅罗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:20:57.873

自从您发布您的问题以来，Stephan Hochdoerfer 在我写这篇文章的日期已经启动了这样的插件，它是 0.0.1/beta 但也许您可以尝试一下。

[http://marketplace.eclipse.org/node/519961#.UMk63KXhAw8](http://marketplace.eclipse.org/node/519961#.UMk63KXhAw8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:16:45.837

您可以尝试在 Eclipse 中配置一个外部工具。 [链接的](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.user/tasks/tasks-exttools-running.htm)

# .net - WCF 客户端在 Win7 上收到 407 身份验证错误

> ID：10835391
> 
> 赞同：0
> 
> 时间：2012-05-31T14:15:33.653
> 
> 标签：.net, wcf

我有一个包含使用 .NET 3.5 的 WCF 客户端的 WinForms 应用程序。我有两台机器，一台WinXp，另一台Win7。在代理设置方面，两者在 IE 中具有相同的设置。在我的 app.config 文件中，我设置了：

```
 <system.net>
     <defaultProxy useDefaultCredentials="true">
         <proxy proxyaddress = "http://proxyserver:80" bypassonlocal = "true"/>
     </defaultProxy>
 </system.net> 
```

这在 WinXp 机器上工作正常，但在 Win7 机器上我仍然得到`407 Authentication Required`错误。我觉得我在 system.net 级别尝试了代理设置的所有组合，并且在 WCF 客户端绑定部分没有运气。什么可能导致这种差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:15:04.190

在绑定元素上，您可以指定使用默认代理。将其设置为 false 以查看是否有帮助？可能您可以从 system.net 部分中删除 defaultProxy 。

```
<bindings>
     <basicHttpBinding>
         <binding useDefaultWebProxy="false">
     </basicHttpBinding>
</bindings/> 
```

[微软文档](http://msdn.microsoft.com/en-us/library/ms731361.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T15:43:11.147

我有完全相同的问题。

为 targetframework 4.0（而不是 3.0）构建应用程序解决了这个问题。

该应用程序现在可以在 xp（安装了 dot.net 4.0）以及 win 7 上运行。

真遗憾！我希望为 inverior 目标版本构建的应用程序将始终在具有更高版本的系统上运行。

# salesforce - 关于 sql 查询的调控器限制的说明

> ID：10835392
> 
> 赞同：2
> 
> 时间：2012-05-31T14:15:34.470
> 
> 标签：salesforce, apex-code, soql

**设置：**

假设我有五个我创建和顶点的 Contact sObject。当您一次插入一个联系人时，您会通过触发器和它使用的东西进行 x 次 soql 查询。

**问题：**

1.  因此，如果您在代码中一次插入每个联系人，您将获得 5 次 soql 查询（对吗？）。

2.  现在假设您将这 5 个人放入一个数组中，并使用一个插入来插入该数组。有多少个 sql 查询？

3.  关于 2，如果它是 5x，我们为什么要打扰？那么我们可以将 DML 的数量减少 4 个吗？

谢谢，

半新人

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T15:28:41.487

给定的代码块和所有由于它而执行的同步顶点代码在单个执行上下文中进行评估，这意味着它具有一组调控器限制。在您给出的示例中，假设您的 Contact 触发器进行 3 个 SOQL 查询和一个 DML 语句。如果您分别插入每个联系人，那么您将使用 5 个 DML 语句（每个联系人插入一个）+ 每个触发器 1 个 DML 语句，每个触发器使用 3 * 5 个 SOQL 语句，总共 15 个 SOQL 语句和 10 个 DML您的代码的语句。但是，如果您将它们作为列表插入，那么所有 5 条记录将作为列表发送到您的触发器（1 个 DML 语句），然后触发器将执行其 3 个 SOQL 查询和 1 个 DML 语句一次，总共 3 个 SOQL 查询和2 个 DML 语句。

这里的关键是设计您的触发器（以及您的大多数其他代码），以便查询和语句的数量不依赖于您正在处理的记录数量。Salesforce 在此处提供了简要指南：http: [//www.salesforce.com/us/developer/docs/apexcode/Content/apex_triggers_bulk_idioms.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_triggers_bulk_idioms.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:56:12.577

如果您打算一次插入一个联系人，那么是的，您很可能会得到五倍的 SOQL 查询。但不建议以这种方式插入这些。当您提到您希望通过一次`insert`调用插入一组记录时，您就走在了正确的轨道上。

如果您的触发器编写正确，那么无论您插入单条记录还是 20 条记录，都应该得到相同数量的 SOQL 查询。如果查询的数量随着您插入的记录数量的增加而增加，那么触发器很可能在某种循环内有一个查询……这是一个很好的方法来首先进入调控器限制。开发触发器时请牢记[Apex 代码最佳实践](http://wiki.developerforce.com/page/Apex_Code_Best_Practices)（参见代码示例的链接）：

*   尽可能将 SOQL 查询置于循环之外
*   确保从触发器调用的辅助方法能够有效地操作集合
*   自由使用 Apex 集合，以更有效地使用您无法避免的查询

# php - PHP preg_match_all - 正则表达式和断线

> ID：10835393
> 
> 赞同：1
> 
> 时间：2012-05-31T14:15:35.840
> 
> 标签：php, regex, curl

这是我使用正则表达式的函数：

```
preg_match_all('|<span class=\"Menu1\">(.*?)</td>|U',$contents,$wynik2); 
```

它适用于：

```
 <tr>
        <td width="30%" ><span class="Menu"> Nazwa zawdsdu: </td>
        <td width="70%"> <span class="Menu1">PRACOWNIK BARU  </td>
        </tr> 
```

但它不适用于：

```
<td width="70%"> <span class="Menu1">PRACA W MC DONALDS PRACE PORZĄDKOWE, PRZYJĘCIE DOSTAWY
WYMAGANA KSIĄŻECZKA SANEPIDOWSKA, CHĘCI DO PRACY
KONTAKT TEL. 794295401 </td> 
```

我有空数组。我认为它是由“新线”引起的。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:23:23.283

抱歉，但我觉得有必要举一个 DOMDocument 示例：

```
$d = new DOMDocument;
$d->loadHTML($html);

$xpath = new DOMXPath($d);

foreach ($xpath->query('//span[@class="Menu1"]') as $node) {
    echo $node->nodeValue, PHP_EOL;
} 
```

应用于您的刮刀（编辑了 url 和 post 字段）

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://redacted');
curl_setopt($ch, CURLOPT_POSTFIELDS, 'redacted');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$d = new DOMDocument;
libxml_use_internal_errors(true);

$d->loadHTML(curl_exec($ch));
libxml_clear_errors();

$xpath = new DOMXPath($d);

foreach ($xpath->query('//span[@class="Menu1"]') as $node) {
    echo $node->nodeValue, PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:16:40.080

将`s`修饰符添加到正则表达式的末尾。

# c# - C#面板对接问题

> ID：10835394
> 
> 赞同：5
> 
> 时间：2012-05-31T14:15:36.790
> 
> 标签：c#, winforms, panel, docking

Windows 窗体项目，仅在设计器中工作（即在编译之前使用鼠标）。我有一个表格和 2 个面板。panel1 停靠在 form1 中（选项 - 填充）。panel2 也停靠（填充）在 form1 中。此外，panel2 位于 panel1 的前面（后者隐藏在前者的后面）。我的问题是 - 当我取消停靠 panel2 并再次停靠时 - 它停靠在 panel1 中（panel1 成为它的父级）而不是 form1。如何更改 panel2 的父级？

到目前为止，我想出的唯一解决方案是剪切 (ctrl+x) panel2，选择 form1，然后粘贴 (ctrl+v) panel2，但是由于某种原因，这会删除 panel2 控件和代码之间的所有连接（例如单击panel2 上的按钮不再起作用，尽管处理事件的功能仍然存在）。

有更好的想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T15:09:17.777

将控件剪切到剪贴板将切断事件处理程序，因此最好远离设计器中的剪切和粘贴。

由于您使用的是设计器，因此请从Visual Studio`Document Outline`的菜单中打开面板。`View - Other Windows`使用箭头按钮正确设置控件的父级或停靠顺序。

文档大纲窗口如下所示：

![在此处输入图像描述](../Images/c0e89d470b0edf1c0fe36400f27a14b6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:56:38.037

似乎人们喜欢我评论过的答案，所以我把它放在这里作为答案

您可以取消停靠 panel1，然后将面板 2 从 panel1 移到 Form1 背景上。我也为此苦苦挣扎。这一直是我的工作，我也发现剪切和粘贴它会导致很多头痛。它也可以在代码中修复，使用设计器文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:29:59.497

更改为停靠时面板无法更改父级！！！或者我真的不理解你的问题。

但是......如果你想改变父母。只需删除面板控件列表的面板并将其添加到表单的控件列表中即可。

```
yourPanel.Controls.Remove(yourOtherPanel);
yourForm.Controls.Add(yourOtherPanel);
yourOtherPanel.Dock = .....; 
```

# lua - lua函数作为C中的参数

> ID：10835395
> 
> 赞同：2
> 
> 时间：2012-05-31T14:15:40.867
> 
> 标签：lua

我要将一个函数传递给另一个应该与传递的函数一起运行的函数。例如：

```
 handler(fun1("foo",2))
     handler(fun2(1e-10)) 
```

处理程序类似于多次调用传递的函数。我要将处理程序、fun1、fun2 绑定到 C 函数。fun1 和 fun2 将返回一些带有指向某个 cpp 类的指针的用户数据，以便我可以进一步恢复它是哪个函数。

现在的问题是 fun1 和 fun2 在传递给处理程序之前将被调用。但是我不需要这个，我需要的是函数的种类和它的参数。但是，我应该能够在没有处理程序的情况下单独调用 fun1 和 fun2：

```
 fun1("bar",3)
     fun2(1e-5) 
```

是否可以获取调用函数的上下文？

在输入问题时，我意识到我可以做以下事情

```
 handler(fun1, "foo",2);
    handler(fun2, 1e-10); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:20:17.223

可能最好的方法是传递函数，并在表中调用您想要调用的参数。

```
function handler(func, args)
    -- do housekeeping here?
    ...
    -- call the function
    local ret = func(table.unpack(args))
    -- do something with the return value?
end

handler(fun1, {"foo", 2})
handler(fun2, {1e-10}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:36:07.037

您可以将调用绑定到另一个函数中的参数并将其传递给您的处理程序函数：

```
function handler(func)
        -- call func, or store it for later, or whatever
end

handler(function() fun1("foo", 2) end)
handler(function() fun2(1e-10) end) 
```

现在`handler`不必担心存储和解包参数表，它只需调用一个函数。

# javascript - 使用 javascript 从动态表单元素中获取值

> ID：10835401
> 
> 赞同：4
> 
> 时间：2012-05-31T14:15:51.483
> 
> 标签：javascript, html, cordova

我正在使用 javascript 创建一个动态表单，其中包含一个下拉列表和一个输入文本，如下所示：

```
$(document).ready(function() {  
    document.write("<FORM>");

    document.write("<SELECT NAME='SelectMenu'>");
    for (var i = 1; i <= 3; i++)
    document.write("<OPTION>" +"one"+"</OPTION>");
    document.write("<OPTION>" +"two"+"</OPTION>");
    document.write("<OPTION>" +"three"+"</OPTION>");

    document.write('</SELECT>');
    document.write("<br>Entry  <input type='text' name='myInputs[]'>");
    document.write("<button onClick="ChoixDeQuestion()">Show</button>");

    document.write('</FORM>');
}); 
```

这里的问题是我无法访问这些字段，因为它们甚至不存在于页面的源代码中。我想获取输入的文本值和列表的选定项。所以请有任何想法！！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:22:06.427

您应该使用动态元素并创建新的 HTML 元素，而不是使用基本语法“document.write(...)”。

Document.write 仅实际显示文本而不真正插入它。如果您想稍后编辑 HTML，则需要创建元素并将其添加到文档中。

例如，使用“CreateElement”语法。 [这是一个很好的教程，可让您开始](http://www.trans4mind.com/personal_development/JavaScript2/createSelectDynamically.htm)了解如何动态创建表单。之后，您可以将元素附加到它，并以这种方式创建更多元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:49:33.097

`document.write`应避免使用。这不是一个好习惯。

您正在使用 jQuery，并且在 jQuery 中动态创建元素非常容易。

你可以做这样的事情，

```
$(document).ready(function() {  
    var options = '';
    for (var i = 1; i <= 3; i++)
    options +='<option>one</option>';
    options +='<option>two</option><option>three</option>';
    var html = '<select>' + options + '</select><br>Entry <input type="text" name="myInputs[]" />';
    var button = $('<button>Show</button>').click(function(e){
        // Code to be executed when button is clicked

        e.preventDefault();  // since by default button submits the form
        alert('button is clicked');
    });
    $("<form></form>").append(html).append(button).appendTo('body');
}); 
```

[jsFiddle](http://jsfiddle.net/hxfsB/)

如果你知道一个基本的 jQuery，一切都是自我解释的，但如果有什么困扰你，请告诉我 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T14:49:42.130

如果您已经在使用 jQuery，请更多地使用它：

```
$(document).ready(function() {
    var form = $('<form />'),
    dropdown = $('<select />', {
        name: 'SelectMenu'
    }),
    textbox = $('<input />', {
        type: 'text',
        name: 'myInputs[]'
    }),
    button = $('<button />', {
        text: 'Show'
    }).on('click', ChoixDeQuestion);

    for (var i = 1; i <= 3; i++) {
        $('<option />', {
            text: i
        }).appendTo(dropdown);
    }

    form
        .append(dropdown)
        .append('<br />Entry')
        .append(textbox)
        .append(button)
        .appendTo('body');
}); 
```

这是创建所有节点并以一种很好的方式将它们插入到 DOM 中；你也可以`contents`用你的 html 创建一个大字符串，然后这样做：

```
$(contents).appendTo('body'); 
```

# windows-phone-7.1 - 从 windows phone 7 扫描二维码

> ID：10835403
> 
> 赞同：1
> 
> 时间：2012-05-31T14:15:53.143
> 
> 标签：windows-phone-7.1, qr-code

如果您使用搜索按钮，Windows phone 7.5 可以扫描二维码。

我想在我自己的应用程序中扫描二维码，有没有办法调用 windows phone 扫描功能？或者，如果没有，我该如何自己实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T11:54:23.683

**更新**：见这个项目[https://github.com/Redth/ZxingSharp.Mobile/](https://github.com/Redth/ZxingSharp.Mobile/)

* * *

想一想如何做到这一点，请尝试：

[http://jonas.follesoe.no/2011/07/22/qr-code-scanning-on-windows-phone-75-using-zxlib/](http://jonas.follesoe.no/2011/07/22/qr-code-scanning-on-windows-phone-75-using-zxlib/)

源代码发布于：

[https://github.com/follesoe/WinPhoneSamples/tree/master/ScannerDemo](https://github.com/follesoe/WinPhoneSamples/tree/master/ScannerDemo)

# php - 关于单个表单上的多个提交按钮的 PHP 代码

> ID：10835404
> 
> 赞同：1
> 
> 时间：2012-05-31T14:15:59.860
> 
> 标签：php

我的索引页面上有两个提交按钮，即国际和国内。当我单击按钮时，我希望这两个不同的按钮指向不同的页面，即 int.php 和 dom.php。你能帮我吗。感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:25:22.690

虽然只允许`action = ""`为表单元素定义单个。但如果我必须这样做，我会这样做。

```
<form action ="somepage.php" method="post">
    <!--all your input elements-->
    <input type="submit" name ="international" value="international"/>
    <input type="submit" name ="domestic" value="domestic"/>
</form> 
```

确定单击了哪个按钮并采取相应措施。

```
if(isset($_POST['domestic']) {
    //include dom.php

}

else if(isset($_POST['international']) {
    //include  int.php
} 
```

然后您可以包含必要的文件。

`AJAX/jQuery`或者另一种方式是顺其自然

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:23:25.100

你可以在 php 中使用 switch 来区分或使用 javascript

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:45:43.740

这是不可能的，因为您的表单的 action 属性一次只能指向一个位置，并且两个按钮都在同一个表单中（但如果您使用 AJAX 则可能）。

如果您想使用纯 PHP（即不涉及 Javascript），则必须为不同的按钮单击编写两个不同的处理程序，如下所示：

```
if(isset($_POST["name_of_international_button"])){
    //actions to perform for this -- 
}
if(isset($_POST["name_of_domestic_button"])){
    //action to perform for this
} 
```

在每个处理程序的操作部分，您可以执行重定向，URL 包含要在`int.php`或`dom.php`脚本中处理的数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:40:49.017

您的表单操作必须包含某种条件语句，以根据单击的提交按钮重定向用户

```
<form action="<?php if(isset($_POST['international'])){echo 'international.php';}else{echo 'domestic.php';}?>" method="post">
  <input type="text" name="field1" />
  <input type="text" name="field2"/>
  <input type="submit" value="international "name="international"/>
  <input type="submit" value="domestic "name="domestic"/>
</form> 
```

或者您可以在表单操作指定的页面上设置条件，并根据单击的按钮重定向它们，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T14:26:15.407

用jquery来做！首先，不要创建提交按钮，只需创建

```
<input type="button" /> 
```

比给他们一个像这样的ID：

```
<input type="button" id="InternationalBTN" />
<input type="button" id="DomesticBTN" /> 
```

并使用 jquery 绑定动作

```
$(document).ready(function(){
    $("#InternationalBTN").bind('click',function(){
        $('#idOfYourForm').attr('action','setTheDestinationPageHere');
        document.forms['nameOfYourForm'].submit();
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T14:30:37.047

你可以这样做：

在表单标签中请留空操作`action=""`

2个按钮发送：

```
<input class="btnSend" type="submit" name="International" value="International" id="International"/>
<input class="btnSend" type="submit" name="Domestic" value="Domestic" id="Domestic"/> 
```

并使用 ajax：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script>
  $(document).ready(function(){
    $('#International ').click(function() {
      // send to file 1 using ajax
    });
    $('#Domestic').click(function() {
      // send to file 2 using ajax
    });
  });
</script> 
```

以下是如何使用 ajax 发送数据：http:
[//net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-31T14:17:35.923

只需放置一个表单标签，并将操作设置为页面。然后提交按钮将导航到动作标签指向的那个页面......

就这么简单：D

# php - 从 mysql 查询创建列表

> ID：10835405
> 
> 赞同：1
> 
> 时间：2012-05-31T14:16:00.610
> 
> 标签：php, mysql, sql, database

我有一种感觉，这真的很简单。这是交易：我有一个三列的表。我想获取其中一列中的所有值并将其转换为列表。我想这样做，这样我就可以遍历列表。列表中的每个值对应一个用户名。我想使用该用户名来访问有关用户的信息。使用此信息，我可以检查用户所在的学院并进行相应的排序。这就是我想出的：

```
 function get_users_by_faculty($faculty) { 
    global $connection;
    $query = "SELECT * FROM owner";
    $user_set = mysql_query($query); // ERROR could not establish link to server
    confirm_query($user_set);  
    foreach($user_set as $user) { //ERROR invalid argument
        $userFaculty = get_info_by_id($user["ownerId"], "ou"); 
        if($faculty == $userFaculty){
            return $user["name"];
        } else {
            return NULL; 
        }
    } 
```

我已经坚持了几个小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:30:31.140

我不知道您的字段名称，但我认为您可以使用 sql 查询来做到这一点。

类似的东西：

```
SELECT user.id,user.name, faculty.name 
FROM user inner join faculty on faculty.id = user.faculty_id
WHERE faculty.id=? 
```

你应该更换？用你的教职员工证。

如果你想要一个用户名列表，你可以使用 group concat ：

```
SELECT GROUP_CONCAT(user.name SEPARATOR ';') 
FROM user inner join faculty on faculty.id = user.faculty_id
WHERE faculty.id=?
GROUP BY faculty.id 
```

# xml - 在 cocos2d-x 中使用 xml

> ID：10835428
> 
> 赞同：4
> 
> 时间：2012-05-31T14:17:17.790
> 
> 标签：xml, svg, xml-parsing, cocos2d-x

我有一个 SVG 文件，位于 assets 文件夹中。我怎样才能获得访问权并对其进行解析，以便我可以检索有关路径的数据，并在将来编写新路径？有使用 xml 的内部工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T15:15:37.497

看看[cocos2d-2.0-rc0a-x-2 中的测试项目。](http://cocos2d-x.googlecode.com/files/cocos2d-2.0-rc0a-x-2.0.zip)0/tests 运行 Android.mk 并使用 eclipse 启动 apk（在 linux 中）。有一个管理xml的例子。测试是：UserDefaultTest。什么都不需要知道。如果 XML 不存在，则值返回 -1。如果需要更多帮助，只需发布​​一个具体问题。

# javascript - JavaScript 根据哪个 div 占据大部分屏幕来触发事件？

> ID：10835431
> 
> 赞同：0
> 
> 时间：2012-05-31T14:17:22.723
> 
> 标签：javascript, html, focus, dom-events, visibility

基本上我有一个这样的div列表：

`<div id="1">`第一个 div`</div>`

`<div id="2">`第二格`</div>`

我希望最明显的 div 影响不同常量 div 中显示的内容，如下所示：

`<div id="link">`第一个 div 的链接`</div>`（如果第一个 div 占据了大部分页面）

接着

`<div id="link">`第二个 div 的链接`</div>`（如果第二个 div 滚动到）

我如何让 Javascript 确定正在查看哪个 div（计算哪个在屏幕上占用了最大 % 的像素空间），然后基于此触发“链接”div 的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:40:29.750

编辑我以前的答案。

您必须找出每个 div 距文档顶部的距离（它是一个固定数字，无论窗口向下滚动多远）：

`divTop = $('#1').offset().top`

然后，找出窗口滚动了多远：

`scrollTop = $(document).scrollTop()`

您还需要窗口的高度（即文档可见部分的高度）：

`windowHeight = $(window).height()`

而且，您需要每个 div 的高度：

`divHeight = $('#1').height()`.

然后计算每个 div**相对于窗口顶部的**起始位置，这可能是一个负数——如果窗口向下滚动超过 div 的顶部——在这种情况下，使用 Math.max 将其设为零：

`divTopInWindow = Math.max(0, divTop - scrollTop)`

同样，您计算 div 的底部，相对于窗口的顶部。如果 div 超出窗口的底部，则将其设为窗口的高度：

`divBottomInWindow = Math.min(windowHeight, divTop + divHeight - scrollTop)`

最后，您可以像这样计算每个 div 的可见百分比（实际上是分数，而不是百分比，但无论如何）：

`percentVisible = (divBottomInWindow - divTopInWindow) / windowHeight`

我没有尝试过，所以那里可能有错误，但这绝对是正确的方法。

-------------------------- 下面的旧答案仅供参考 ------------------我认为您没有正确使用“触发事件”这一表达方式。听起来您只想根据某些条件（即 div 1 是否高于 div 2）设置 div 的内容。

假设您在页面上加载了 jQuery 或 Zepto：

```
if( $('#1').height() > $('#2').height() ) {
    $('#link').html('First div link');
}
else {
    $('#link').html('Second div link');
} 
```

# c# - 带有数据绑定和常量字符串的 WPF 窗口标题

> ID：10835435
> 
> 赞同：4
> 
> 时间：2012-05-31T14:17:53.397
> 
> 标签：c#, wpf, events, binding, properties

我有一个描述文本框，我想将它添加到窗口标题中的一些常量文本中。像“描述：” + 描述。我可以在 xaml 中轻松做到这一点吗？

我的第一种方法是创建一个新属性，该属性使用常量字符串返回描述值。问题是我没有收到 PropertyChanged 事件，所以窗口的标题不会刷新。我正在考虑在 Description 的设置器上创建一个事件，但我认为它太丑陋了。

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T14:22:10.647

使用 Binding 时检查[StringFormat 。](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)

```
Title="{Binding Path=Description, StringFormat=Description: {0}}" 
```

如果你有文本框并且你想使用它的文本，它的工作方式是一样的。为文本框命名并使用 ElementName

```
Title="{Binding ElementName=myText, Path=Text, StringFormat=Description: {0}}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:26:17.063

您可以使用 DataBinding 轻松实现此目的

在 ViewModel/DataContext 中创建字段 Description，并使用[StringFormat](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)

```
Title = "{Binding Path=Description,Mode=OneWay, StringFormat = Description: {0}}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:22:38.267

在描述的设置器上创建事件是标准做法。使用接口的`PropertyChanged`事件`INotifyPropertyChanged`。

# perl - 我的浏览器显示我的 perl.cgi 脚本的内容而不是执行？

> ID：10835436
> 
> 赞同：2
> 
> 时间：2012-05-31T14:17:55.233
> 
> 标签：perl, apache, firefox, slackware

我最近使用 slackpkg 更新了我的 Slackware13.37，现在 firefox 显示我的 perl.cgi 脚本的内容而不是执行。我在用：

```
bash-4.2# httpd -v 
Server version: Apache/2.4.2 (Unix) Server built: May 24 2012 14:55:44
bash-4.2# firefox -v 
Mozilla Firefox 12.0
bash-4.2# perl -v 
This is perl 5, version 16, subversion 0 (v5.16.0) built for i486-linux-thread-multi 
```

该脚本在更新前工作

```
#!/usr/bin/perl -w

use strict;
use warnings;
use CGI;
use DBI;
use PDF::API2::Simple;
use PDF::Table;
use Data::Types qw(:all);

my @param=();
###############################
###          main          ####
###############################
my $q = new CGI;
if(!defined $q->param('login')){
    if(!defined $q->param('query')){main::login_relogin('Welcome');
    }else{
    my ($fname,$lname,$sec,$w,$h) = main::read_cookie();
    if(defined $sec){
        main::home($fname,$lname,$sec,$w,$h,$q->param('query'),$q->param('param1'),$q->param('param2'));
    }else{main::login_relogin('Your session expired !!!');}
    }
etc... etc... 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:06:20.950

我在使用 Apache 2.4.2 时遇到了同样的问题。

问题已解决：我的系统（openSUSE 12.1）默认不构建 mod_cgi.so。当我构建 Apache 2.2 时，CGI 是核心的一部分，而不是 2.4 中的动态模块。所以在运行configure的时候，需要加上--enable-cgi。此外，在 httpd.conf 中取消注释“LoadModule dir_module modules/mod_cgi.so”

或者，使用在我的系统上构建的 mod_cgid.so。根据[http://httpd.apache.org/docs/current/mod/mod_cgi.html](http://httpd.apache.org/docs/current/mod/mod_cgi.html)

“在 unix 下使用多线程 MPM 时，应使用模块 mod_cgid 代替此模块。在用户级别，这两个模块本质上是相同的”

因此，在 httpd.conf 中取消注释“LoadModule dir_module modules/mod_cgid.so”。还取消注释 httpd.conf 中的“Scriptsock logs/cgisock”（在指令中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:26:18.250

基本上，您需要告诉 Apache 该文件是一个需要运行的脚本。

我需要这样做已经很长时间了，但除非事情发生了巨大变化，否则您只需要更新您的`httpd.conf`文件，可能通过将您的文件夹标记`cgi-bin`为`cgi-bin`文件夹。看起来升级并没有自动执行此操作。

# java - 当单击按钮进行另一个活动时，Android 应用程序强制关闭

> ID：10835438
> 
> 赞同：-5
> 
> 时间：2012-05-31T14:18:01.923
> 
> 标签：java, android, android-intent, android-activity, forceclose

我正在使用 android 2.2 和 eclipse 制作一个 android 应用程序。它是一个简单的应用程序，应该将活动从“CoverPageApp.java”更改为“LoginActivity.java”，然后再更改为另一个活动。但是当我单击 CoverPageApp.java 中的“开始按钮”时，应用程序强制关闭。

**登录活动.java**

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class LoginActivity extends Activity {

    Button btnLinkToRegistrScrn;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
     setContentView(R.layout.login);
     addListenerOnButton();
     btnLinkToRegistrScrn = (Button) findViewById(R.id.LinkToRegisterScreen); 

   }

    public void addListenerOnButton() {

        final Context context2 = this;

        Button loginbtn1 = (Button) findViewById(R.id.btnLogin);

            loginbtn1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent(context2, DashboardActivity.class);
                         context2.startActivity(intent);   
            }

        });
    }

    { 
        // Link to Register Screen 
        btnLinkToRegistrScrn.setOnClickListener(new View.OnClickListener() { 
           @Override
            public void onClick(View view) { 
                Intent i = new Intent(getApplicationContext(), CAActivity.class); 
                startActivity(i); 
                } 
       }); 

    }   

   } 
```

**日志猫**

```
05-31 12:37:08.620: D/AndroidRuntime(629): Shutting down VM
05-31 12:37:08.620: W/dalvikvm(629): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-31 12:37:08.630: E/AndroidRuntime(629): FATAL EXCEPTION: main
05-31 12:37:08.630: E/AndroidRuntime(629):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1404)
05-31 12:37:08.630: E/AndroidRuntime(629):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
05-31 12:37:08.630: E/AndroidRuntime(629):  at android.app.Activity.startActivityForResult(Activity.java:2817)
05-31 12:37:08.630: E/AndroidRuntime(629):  at android.app.Activity.startActivity(Activity.java:2923)
05-31 12:37:08.630: E/AndroidRuntime(629):  at android.view.View.performClick(View.java:2408)
05-31 12:37:08.630: E/AndroidRuntime(629):  at android.view.View$PerformClick.run(View.java:8816)
05-31 12:37:08.630: E/AndroidRuntime(629):  at android.os.Handler.handleCallback(Handler.java:587)
05-31 12:37:08.630: E/AndroidRuntime(629):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-31 12:37:08.630: E/AndroidRuntime(629):  at android.os.Looper.loop(Looper.java:123)
05-31 12:37:08.630: E/AndroidRuntime(629):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-31 12:37:08.630: E/AndroidRuntime(629):  at java.lang.reflect.Method.invokeNative(Native Method)
05-31 12:37:08.630: E/AndroidRuntime(629):  at java.lang.reflect.Method.invoke(Method.java:521)
05-31 12:37:08.630: E/AndroidRuntime(629):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-31 12:37:08.630: E/AndroidRuntime(629):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-31 12:37:08.630: E/AndroidRuntime(629):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:29:14.800

请检查以下内容：

打开你的清单文件：

![在此处输入图像描述](../Images/0f04241cf10df781e9674bd5b698e06b.png)

现在添加活动：

![在此处输入图像描述](../Images/f39e6acfe8e7112a087b382d47954669.png)

![在此处输入图像描述](../Images/58f6b1a88f064dde0e40b5c0ed3d3a77.png)

![在此处输入图像描述](../Images/2f1f6e2e633f0e4d111ab901a45332bf.png)

保存清单文件并再次运行您的项目。

现在您的 manifest.xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test_new"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="3" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".Test_newActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".LoginActivity"></activity>
    </application>

</manifest> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:19:56.730

我想你还没有添加活动

```
LoginActivity.java 
```

在 Android 清单文件中只需将以下代码添加到您的 AndroidManifest.xml 文件中

```
<application>
        <activity
            android:name=".LoginActivity"
            android:label="@string/login_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.HOME" />
            </intent-filter>
        </activity>
    </application> 
```

# c# - EF可以自动删除未删除父项的孤立数据吗？

> ID：10835439
> 
> 赞同：21
> 
> 时间：2012-05-31T14:18:08.723
> 
> 标签：c#, entity-framework, entity-framework-5

对于使用 Code First EF 5 beta 的应用程序，我有：

```
public class ParentObject
{
    public int Id {get; set;}
    public virtual List<ChildObject> ChildObjects {get; set;}
    //Other members
} 
```

和

```
public class ChildObject
{
    public int Id {get; set;}
    public int ParentObjectId {get; set;}
    //Other members
} 
```

必要时，相关的 CRUD 操作由存储库执行。

在

```
OnModelCreating(DbModelBuilder modelBuilder) 
```

我已经设置了它们：

```
modelBuilder.Entity<ParentObject>().HasMany(p => p.ChildObjects)
            .WithOptional()
            .HasForeignKey(c => c.ParentObjectId)
            .WillCascadeOnDelete(); 
```

所以如果 a`ParentObject`被删除，它的 ChildObjects 也会被删除。

但是，如果我运行：

```
parentObject.ChildObjects.Clear();
_parentObjectRepository.SaveChanges(); //this repository uses the context 
```

我得到了例外：

> 操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

这是有道理的，因为实体的定义包括被破坏的外键约束。

我可以将实体配置为在它成为孤立实体时“自行清理”，还是必须手动`ChildObject`从上下文中删除这些 s（在本例中使用 ChildObjectRepository）。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-31T17:18:00.607

它实际上受支持，但仅在您使用[识别关系](https://stackoverflow.com/questions/4922228/entity-framework-4-delete-object-from-entity-collection/4925040#4925040)时才支持。它也适用于代码。您只需要为`ChildObject`包含`Id`and定义复杂的键`ParentObjectId`：

```
modelBuilder.Entity<ChildObject>()
            .HasKey(c => new {c.Id, c.ParentObjectId}); 
```

因为定义这样的键将删除自动递增 Id 的默认约定，您必须手动重新定义它：

```
modelBuilder.Entity<ChildObject>()
            .Property(c => c.Id)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity); 
```

现在调用 parentObject.ChildObjects.Clear() 删除依赖对象。

顺便提一句。您的关系映射应该用于`WithRequired`跟随您的真实类，因为如果 FK 不可为空，则它不是可选的：

```
modelBuilder.Entity<ParentObject>().HasMany(p => p.ChildObjects)
            .WithRequired()
            .HasForeignKey(c => c.ParentObjectId)
            .WillCascadeOnDelete(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-05T04:19:14.553

**更新：**

我找到了一种不需要将导航属性从子实体添加到父实体或设置复杂键的方法。

它基于这篇[文章](http://thinkexception.blogspot.com.br/2017/01/handling-child-collectins-in-entity.html)，它使用`ObjectStateManager`来查找已删除的实体。

手头有一个列表`ObjectStateEntry`，我们可以`EntityKey`从每个中找到一对，代表被删除的关系。

在这一点上，我找不到任何迹象表明必须删除哪个。与文章的示例相反，在子级具有返回父级的导航属性的情况下，简单地选择第二个会删除父级。因此，为了解决这个问题，我跟踪应该使用 class 处理哪些类型`OrphansToHandle`。

该模型：

```
public class ParentObject
{
    public int Id { get; set; }
    public virtual ICollection<ChildObject> ChildObjects { get; set; }

    public ParentObject()
    {
        ChildObjects = new List<ChildObject>();
    }
}

public class ChildObject
{
    public int Id { get; set; }
} 
```

其他类：

```
public class MyContext : DbContext
{
    private readonly OrphansToHandle OrphansToHandle;

    public DbSet<ParentObject> ParentObject { get; set; }

    public MyContext()
    {
        OrphansToHandle = new OrphansToHandle();
        OrphansToHandle.Add<ChildObject, ParentObject>();
    }

    public override int SaveChanges()
    {
        HandleOrphans();
        return base.SaveChanges();
    }

    private void HandleOrphans()
    {
        var objectContext = ((IObjectContextAdapter)this).ObjectContext;

        objectContext.DetectChanges();

        var deletedThings = objectContext.ObjectStateManager.GetObjectStateEntries(EntityState.Deleted).ToList();

        foreach (var deletedThing in deletedThings)
        {
            if (deletedThing.IsRelationship)
            {
                var entityToDelete = IdentifyEntityToDelete(objectContext, deletedThing);

                if (entityToDelete != null)
                {
                    objectContext.DeleteObject(entityToDelete);
                }
            }
        }
    }

    private object IdentifyEntityToDelete(ObjectContext objectContext, ObjectStateEntry deletedThing)
    {
        // The order is not guaranteed, we have to find which one has to be deleted
        var entityKeyOne = objectContext.GetObjectByKey((EntityKey)deletedThing.OriginalValues[0]);
        var entityKeyTwo = objectContext.GetObjectByKey((EntityKey)deletedThing.OriginalValues[1]);

        foreach (var item in OrphansToHandle.List)
        {
            if (IsInstanceOf(entityKeyOne, item.ChildToDelete) && IsInstanceOf(entityKeyTwo, item.Parent))
            {
                return entityKeyOne;
            }
            if (IsInstanceOf(entityKeyOne, item.Parent) && IsInstanceOf(entityKeyTwo, item.ChildToDelete))
            {
                return entityKeyTwo;
            }
        }

        return null;
    }

    private bool IsInstanceOf(object obj, Type type)
    {
        // Sometimes it's a plain class, sometimes it's a DynamicProxy, we check for both.
        return
            type == obj.GetType() ||
            (
                obj.GetType().Namespace == "System.Data.Entity.DynamicProxies" &&
                type == obj.GetType().BaseType
            );
    }
}

public class OrphansToHandle
{
    public IList<EntityPairDto> List { get; private set; }

    public OrphansToHandle()
    {
        List = new List<EntityPairDto>();
    }

    public void Add<TChildObjectToDelete, TParentObject>()
    {
        List.Add(new EntityPairDto() { ChildToDelete = typeof(TChildObjectToDelete), Parent = typeof(TParentObject) });
    }
}

public class EntityPairDto
{
    public Type ChildToDelete { get; set; }
    public Type Parent { get; set; }
} 
```

* * *

**原始答案**

要在不设置复杂键的情况下解决此问题，您可以覆盖`SaveChanges`您的`DbContext`, 但随后使用`ChangeTracker`以避免访问数据库以查找孤立对象。

首先添加一个导航属性（如果需要，`ChildObject`您可以保留属性，它可以使用任何一种方式）：`int ParentObjectId`

```
public class ParentObject
{
    public int Id { get; set; }
    public virtual List<ChildObject> ChildObjects { get; set; }
}

public class ChildObject
{
    public int Id { get; set; }
    public virtual ParentObject ParentObject { get; set; }
} 
```

然后使用以下方法查找孤立对象`ChangeTracker`：

```
public class MyContext : DbContext
{
    //...
    public override int SaveChanges()
    {
        HandleOrphans();
        return base.SaveChanges();
    }

    private void HandleOrphans()
    {
        var orphanedEntities =
            ChangeTracker.Entries()
            .Where(x => x.Entity.GetType().BaseType == typeof(ChildObject))
            .Select(x => ((ChildObject)x.Entity))
            .Where(x => x.ParentObject == null)
            .ToList();

        Set<ChildObject>().RemoveRange(orphanedEntities);
    }
} 
```

您的配置变为：

```
modelBuilder.Entity<ParentObject>().HasMany(p => p.ChildObjects)
            .WithRequired(c => c.ParentObject)
            .WillCascadeOnDelete(); 
```

我做了一个简单的速度测试，迭代了 10.000 次。启用它需要 1: 01.443`HandleOrphans()`分钟才能完成，禁用它是 0:59.326 分钟（两者都是平均 3 次运行）。测试代码如下。

```
using (var context = new MyContext())
{
    var parentObject = context.ParentObject.Find(1);
    parentObject.ChildObjects.Add(new ChildObject());
    context.SaveChanges();
}

using (var context = new MyContext())
{
    var parentObject = context.ParentObject.Find(1);
    parentObject.ChildObjects.Clear();
    context.SaveChanges();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-01T11:35:49.740

想分享另一个对我有用的 .net ef 核心解决方案，可能有人会觉得它有用。

我有一个带有两个外键（或）的子表，所以接受的解决方案对我不起作用。根据 Marcos Dimitrio 的回答，我得出以下结论：

在我的自定义 DbContext 中：

```
public override async Task<int> SaveChangesAsync(CancellationToken cancellationToken = new CancellationToken())
  {
    var modifiedEntities = this.ChangeTracker.Entries().Where(c => c.State == EntityState.Modified);
    foreach (var entityEntry in modifiedEntities)
    {
      if (entityEntry.Entity is ChildObject)
      {
         var fkProperty = entityEntry.Property(nameof(ChildObject.ParentObjectId));
         if (fkProperty.IsModified && fkProperty.CurrentValue == null && fkProperty.OriginalValue != null)
         {
           // Checked if FK was set to NULL
           entityEntry.State = EntityState.Deleted;
         }
      }
    }

    return await base.SaveChangesAsync(cancellationToken);
  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-03T18:35:48.473

在 EF Core 中，可以通过[Delete Orphans](https://docs.microsoft.com/en-us/ef/core/saving/cascade-delete#delete-orphans-examples)来完成。

像这样：

```
dbContext.Children.Clear(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-19T14:35:05.763

是的。以下适用于 EF Core：

确保将级联行为设置为`Cascade`：

```
entity.HasOne(d => d.Parent)
                    .WithMany(p => p.Children)
                    .HasForeignKey(d => d.ParentId)
                    .OnDelete(DeleteBehavior.Cascade); 
```

然后`Parent`在要删除的所有子实体中将属性设置为 null，如下所示：

```
var childrenToBeRemoved = parent.Children.Where(filter);
foreach(var child in childrenToBeRemoved)
{
    child.Parent = null;
} 
```

现在，`context.SaveAsync()`应该删除所有孤立的子实体。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-30T02:16:52.237

这是我对实体框架 6.4.4 的通用解决方案，无需了解特定架构。

请注意，我从修改后的实体条目开始搜索孤立实体，因为在我的情况下，我找不到任何搜索已删除关系条目的东西，就像其他答案所建议的那样。

该方法背后的逻辑是，从所需关系的集合中删除的实体将由实体框架将其外键更新为 null。因此，我们搜索所有修改后的实体，这些实体至少有一个关系，以多重性“一”结尾，但外键设置为空。

将此方法添加到您的`DbContext`子类。您可以覆盖`SaveChanges`/`SaveChangesAsync`方法以自动调用此方法。

```
public void DeleteOrphanEntries()
{
  this.ChangeTracker.DetectChanges();

  var objectContext = ((IObjectContextAdapter)this).ObjectContext;

  var orphanEntityEntries =
    from entry in objectContext.ObjectStateManager.GetObjectStateEntries(EntityState.Modified)
    where !entry.IsRelationship
    let relationshipManager = entry.RelationshipManager
    let orphanRelatedEnds = from relatedEnd in relationshipManager.GetAllRelatedEnds().OfType<EntityReference>()
                            where relatedEnd.EntityKey == null // No foreign key...
                            let associationSet = (AssociationSet)relatedEnd.RelationshipSet
                            let associationEndMembers = from associationSetEnd in associationSet.AssociationSetEnds
                                                        where associationSetEnd.EntitySet != entry.EntitySet // ... not the end pointing to the entry
                                                        select associationSetEnd.CorrespondingAssociationEndMember
                            where associationEndMembers.Any(e => e.RelationshipMultiplicity == RelationshipMultiplicity.One) // ..but foreign key required.
                            select relatedEnd
    where orphanRelatedEnds.Any()
    select entry;

  foreach (var orphanEntityEntry in orphanEntityEntries)
  {
    orphanEntityEntry.Delete();
  }
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-05-31T15:26:53.363

这不是 EF 现在自动支持的东西。您可以通过在上下文中覆盖 SaveChanges 并手动删除不再具有父对象的子对象来完成此操作。代码将是这样的：

```
public override int SaveChanges()
{
    foreach (var bar in Bars.Local.ToList())
    {
        if (bar.Foo == null)
        {
            Bars.Remove(bar);
        }
    }

    return base.SaveChanges();
} 
```

# c# - 通过代码从 SQL Server 导入/导出数据

> ID：10835445
> 
> 赞同：0
> 
> 时间：2012-05-31T14:18:30.993
> 
> 标签：c#, .net, sql-server

有没有办法以编程方式调用 SQL Server 的导入/导出实用程序。在我的网络应用程序中，我想将数据从一些数据库表导入/导出到 CSV，反之亦然，只需使用 SQL Server 工具。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:25:29.297

好吧，既然您已经在使用 .net，您可以只创建一个连接字符串，解析您的 csv 文件，然后在您的表中插入行，或者使用其他 c# 类。如果您真的想使用 c# 调用外部 *.exe，您可以执行以下操作：

```
Process pLight = new Process();
            // Redirect the output stream of the child process.
            pLight.StartInfo.UseShellExecute = false;
            pLight.StartInfo.CreateNoWindow = false;
            pLight.StartInfo.RedirectStandardOutput = true;

            pLight.StartInfo.FileName = "c:\path\to\light.exe";

            pLight.StartInfo.Arguments = "-i -d -ext ";
            pLight.Start();
            // Do not wait for the child process to exit before
            // reading to the end of its redirected stream.
            // p.WaitForExit();
            // Read the output stream first and then wait.
            string lightoutput = pLight.StandardOutput.ReadToEnd();

            pLight.WaitForExit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:50:24.750

您可以从 Web 应用程序运行 BCP 命令，该命令可用于将数据从 sql server 表导入 csv 文件，然后将数据从 csv 导出到表。

将数据从 sql 表导出到文本文件

```
 BCP Database.TableName out "Location of the text file " -c -S ServerName -T 
```

将数据从平面文件加载到表中

```
 BCP Database.TableName in "Location of the text file " -c -S ServerName -T 
```

# mysql - 向现有表添加新字段

> ID：10835450
> 
> 赞同：0
> 
> 时间：2012-05-31T14:19:06.713
> 
> 标签：mysql, sql

我确定在stackoverflow上有这样的问题，但我找不到它:(

我有 2 个具有相同数据的数据库（“开发人员”数据库和“生产”数据库）。“生产”数据库是“实时”数据库 - 现场访问者会看到此数据 “开发人员”数据库是我在本地服务器上创建新功能的数据库。

当我向“开发人员”数据库添加一些新表和旧表中的一些新字段时，我遇到了这种情况。

现在我必须将这个新创建的字段和表复制到“生产”数据库（但只有结构、数据不应该被复制，并且“生产”数据库中的任何数据都不能更改）。

UPD：也许有解决方案，我可以从开发数据库中转储数据库结构，当我将其导入生产数据库时，它会自动添加所有表中的所有新字段

我应该使用哪些功能？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:20:35.430

你想要`alter table`：[http ://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:21:18.260

要[更改现有表](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)：

```
alter table tablename add column newcolumn tinyint(1) default 1 AFTER othercolumn 
```

要[创建一个新表](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)：

```
CREATE TABLE  `newtablename` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `newcolumn` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:26:22.547

*   仅复制您可以使用的结构，例如：

    `jcho360> create table t3 like t2`;

    `Query OK, 0 rows affected (0.05 sec)`.

如果要在创建结构后复制内容，可以使用：

```
INSERT INTO t3 SELECT * FROM t2; 
```

*   如果您想复制可以使用的数据（没有结构，我的意思是 PK、FK 等）

    `mysql> create table t4 as select * from t1`;

当然你也可以使用备份来恢复表

*   如果要添加新列，可以使用

    `alter table tablename add column newcolumn vartype`;

如果您想使用另一个数据库中的表，您可以使用查询首先调用数据库，然后调用名称，例如

```
select * from database.tablename; 
```

记住用户也需要其他数据库的权限。

# string - 在 Pascal 中将字符串打印为变量

> ID：10835452
> 
> 赞同：0
> 
> 时间：2012-05-31T14:19:21.023
> 
> 标签：string, variables, printing, pascal

这是我拥有的字符串变量：

```
question1 := 'Please enter 1, 2 or 3.'; 
```

我还有一个函数应该打印出 question1 变量，但它会在打印之前生成问题编号。这是该函数的一个片段，它将问题编号 ( `question : integer`) 转换为字符串变量 ( `test : string`)，然后将字符串“问题”与该字符串变量 ( `test : string`) 连接起来。

```
str(question,test);
test := concat('question',test);
writeln(test); 
```

这个 writeln 的结果是 'question1'（不带引号）。我希望它将 question1 变量输出为文本字符串，而不仅仅是这个变量的名称，以便`Please enter 1, 2 or 3.`我尝试过的 writeln 打印`writeln(question1)`并且它可以工作，但是，我上面的函数（或它的片段）似乎是这样做的：`writeln('question1')`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:40:27.757

Pascal 不支持动态名称解析，如您所愿。您可以考虑改用[数组](http://pascal-programming.info/lesson10.php)：

```
…
var
  Questions: array[1..3] of string;

…

procedure InitQuestions;
begin
  Questions[1] := 'Please enter 1, 2 or 3.';
  Questions[2] := '…';
  Questions[3] := '…';
end;

procedure YourFunction(question: Integer);
begin
  …
  WriteLn(Questions[question]);
  …
end;

…

begin
  …
  InitQuestions;
  …
  YourFunction(1);
  …
end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:33:51.220

据我从您的问题中可以看出，您需要以下内容

```
writeln (question1, 'question ', question); 
```

您不需要连接字符串值，也不需要将问题编号转换为字符串 - writeln 具有接受任意数量变量并根据其默认格式（字符串、整数、实数和布尔值）打印它们的神奇能力）。

实际上，您实际上并不需要创建 'question1' 变量 - 您可以简单地编写

```
writeln ('Please enter 1, 2 or 3\. Question', question); 
```

# java - 获取异常：“AWT-EventQueue-0”java.lang.NullPointerException

> ID：10835453
> 
> 赞同：0
> 
> 时间：2012-05-31T14:19:23.730
> 
> 标签：java, arrays, string

我收到以下异常

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at Java.CompileFile.doCompilation(CompileFile.java:48)
at GUI.CompilerForm.compileBtnActionPerformed(CompilerForm.java:225)
at GUI.CompilerForm.access$400(CompilerForm.java:23)
............ 
```

我没有错误在 CompileFile.java 的第 48 行，它说数组为 NULL，我不知道为什么，因为那是我在其中添加字符串的地方！

```
String[] compile;
int numberOfErrors = 0;
.
.
.
 for (Diagnostic diagnostic : diagnostics.getDiagnostics()) {                
            String errors = diagnostic.getKind().toString()+" on line  "+ diagnostic.getLineNumber() +"\nIn file:  \n"+ diagnostic.toString();
            compile[numberOfErrors] = errors;
            numberOfErrors++;
        } 
```

我设置后直接尝试过`System.out.println(errors);`，它工作正常，所以我真的不知道发生了什么！

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:21:29.657

您已经声明了一个名为 的变量`compile`，但是您没有在任何地方显示它被赋予了一个值。假设它是一个实例变量，它的值将默认为`null`. 您需要使用以下方法对其进行初始化：

```
compile = new String[someSize]; 
```

`someSize`“足够大”在哪里。

或者，最好，您可以使用一个列表：

```
// TODO: Rename variable to something more sensible
private final List<String> compile = new ArrayList<String>(); 
```

然后...

```
compile.add(errors); 
```

然后你可能也可以摆脱`numberOfErrors`，因为那只是`compile.size()`大概。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:22:10.930

我猜你还没有初始化数组（正确）

```
String[] compiled = new String[size]; 
```

或者您没有设置适当的数组大小

如果您无法预测 数组中有**多少项。**改用**列表**（例如 ArrayList）

```
 List<String> compiled = new ArrayList<String>(); 
```

数组列表**没有大小限制。**

添加项目

```
 compiled.add(item); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T14:21:34.680

从您显示的代码快照中，您似乎没有初始化`compile`，因此它被初始化`null`为默认值。

您应该显式创建 a`String[]`并将其分配给`compile`：

```
compile = new String[MY_SIZE]; 
```

如果您尝试附加错误，您可能需要考虑使用[动态数组](http://en.wikipedia.org/wiki/Dynamic_array)- 这是[`ArrayList<String>`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)java 中的一个，并附加元素，使用[`ArrayList.add(element)`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28E%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:23:46.980

看起来你还没有初始化你的数组。

尝试这样的事情：

```
compile = new String[numberOfErrors]; 
```

然后将错误存储在数组中。

# wcf - 我应该如何验证传递给我的 WCF 服务的参数？

> ID：10835455
> 
> 赞同：1
> 
> 时间：2012-05-31T14:19:33.450
> 
> 标签：wcf, validation

通常，您使用`if-then-throw` 模式或代码契约检查公共方法中的传入参数。
我的问题是，我应该如何验证 WCF 服务中传递的参数？例如，我有以下合同：

```
[OperationContract]
Stock GetStock(string symbol); 
```

我想确保`symbol`参数不是`null`空字符串。我应该`if-then-throw`在服务端使用相同的模式或代码合同前提条件吗？我应该向方法添加`FaultContract`属性并向`GetStock`客户端返回错误吗？WCF 服务的最佳参数验证技术是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:08:53.640

Enterprise Library [Validation Application Block有一个](http://msdn.microsoft.com/en-us/library/ff664356%28v=pandp.50%29.aspx)[与 WCF 集成](http://msdn.microsoft.com/en-us/library/ff664526%28v=pandp.50%29)的适配器，正是为此而设计的。

这个[CodeProject Introduction 有点旧](http://www.codeproject.com/Articles/18667/Introduction-to-Validation-Application-Block-integ)，但比 MSDN 链接提供了更多的背景知识。

# c# - 在第一次加载时将数据从 javascript 发送到后面的代码

> ID：10835465
> 
> 赞同：0
> 
> 时间：2012-05-31T14:19:59.897
> 
> 标签：c#, javascript, asp.net

我实际上正在构建一个 Web 应用程序，我需要获取查看应用程序的机器的本地环境的数据。为此，我使用了一个小的 javascript 脚本，例如：

```
<script language="javascript">
function GetUserName()
{
    //Permits to get username of client machine
    var wshell = new ActiveXObject("WScript.Shell");
    var arpege = wshell.ExpandEnvironmentStrings("%USERNAME%");
    document.getElementById("arpege").value=arpege;
}
</script>
<input type=hidden id="arpege" runat=server /> 
```

我的问题是这个脚本是在页面加载后执行的，所以我不能在页面加载时使用它......

我的页面加载代码是：

```
protected void Page_Load(object sender, EventArgs e)
{
    myConnection.ConnectionString = ActionSource.ConnectionString;
    myConnection.Open();
    String account = arpege.value;
    ...
} 
```

但我只是在帐户中得到“”...

谢谢你的帮助，

昆汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:23:35.787

Page_Load 在任何数据发送到客户端*之前*发生在服务器端。

加载页面后，如果不启动新的回发，您将无法做到这一点。

解决方案来了...

编辑：

因此，它（可能）可以使用一些[jQuery来实现](http://jquery.com)

```
$(document).ready(function() {
     var wshell = new ActiveXObject("WScript.Shell");
     var arpege = wshell.ExpandEnvironmentStrings("%USERNAME%");
     __doPostBack('__Page', arpege);
}); 
```

并在服务器端捕获它：

```
public void Page_Load(object sender, EventArgs e)
{
  string arpege= Request["__EVENTARGUMENT"]; 
} 
```

值得一试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:44:29.117

我所知道的将数据从客户端发送到服务器的最佳（最简单）方法是

**1.**将其存储在asp隐藏字段中

**2.**通过javascript点击一个ASP按钮

**3.**处理OnClick事件中的数据

例如：

**ASPX 页面**

```
<asp:HiddenField ID="myHf" class="myHf" runat="server" />

<asp:Button ID="myButton" class="myButton" runat="server" OnClick="myButton_Click" style="display: none;" /> 
```

**Javascript**

```
function SendMyData(data) {
     document.getElementByClassName('myHf').value = data;
     document.getElementByClassName('myButton').click();
     //I use classes since those won't change - IDs become really long and messed up 
     //in the actual page, and may change depending on where the element is placed.
} 
```

**代码隐藏**

```
protected void myButton_Click(object sender, EventArgs e)
{
    //Do whatever you want with myHf.Value

    MyServerMethod(myHf.Value);
} 
```

我认为这样做比使用 Page_Load 并提交表单要好，只是因为如果你做了足够多的这些，Page_Load 方法会变得很大。但那只是我的个人意见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:53:35.973

Shai 提出的建议的一个变体可能如下：在隐藏按钮上生成异步回发。

像这样，逻辑可以从 Page_Load 中分离出来，而是放在附加到生成 asyncpostback 的输入的处理程序中。

我不喜欢在 page_load 事件中加入太多逻辑，我觉得这很混乱。实现会稍微复杂一些

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:56:56.753

在 Page_Load 中获取用户名服务器端，而不是使用 ActiveX 控件。

```
protected void Page_Load(object sender, EventArgs e)
{
    myConnection.ConnectionString = ActionSource.ConnectionString;
    myConnection.Open();

    String account = User.Identity.Name;
    // ...

} 
```

此外，ActiveX 仅适用于 Internet Explorer -`User.Identity.Name`适用于服务器以及所有浏览器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T15:29:02.837

ASPX 代码：

```
<body>
<form id="form1" runat="server">
<input type="hidden" id="hdnUser" runat="server" />
<input type="hidden" id="hdnRun" runat="server" value="true" />
<asp:Label ID="lblSayHello" runat="server" Text="I dont know you"></asp:Label>
</form>
<script type="text/javascript">
    $(function () {
        var run = $('#hdnRun').val();

        if (run == 'true') {
            var wshell = new ActiveXObject("WScript.Shell");
            $('#hdnUser').val(wshell.ExpandEnvironmentStrings("%USERNAME%"));
            $('#form1').submit();
        }
    });
    </script>
</body> 
```

背后的代码

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!String.IsNullOrEmpty(hdnUser.Value))
        {
            hdnRun.Value = "false";

            lblSayHello.Text = String.Format(@"Hello, {0}", hdnUser.Value);
        }
    } 
```

# android - 使 ListView 中的 TextView 使用默认的 ListView 行样式

> ID：10835468
> 
> 赞同：3
> 
> 时间：2012-05-31T14:20:03.097
> 
> 标签：android, android-layout, android-listview, textview

我的应用程序生成 2 个不同的列表，其中一个使用默认`ListView`样式，因为`ListView`行中不包含任何`TextView`内容。另一个列表使用自定义`CursorAdapter`，并且`TextView`每行内部都有一个。我要做的就是使两个列表的边距和文本大小完全相同。

我的第一个列表是使用每行内`ListView`没有的标准，如下所示：`TextView`

![在此处输入图像描述](../Images/eba9bb6e91aee681969a405120624d40.png)

这是生成它的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.records);

    DatabaseHandler db = new DatabaseHandler(this);
    ArrayList<String> records = db.getRecords(this);

    this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, records));
} 
```

这是它的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

我的第二个列表是在每一行中使用 a `ListView`，`TextView`它是通过自定义的 CursorAdapter 生成的，如下所示：

![在此处输入图像描述](../Images/95f77eda81ab6b1519ddffb79f4a660b.png)

这是生成它的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.achievements);

    DatabaseHandler db = new DatabaseHandler(this);
    Cursor cursor = db.getAchievements(this);
    AchievementAdapter cursorAdapter = new AchievementAdapter(this, cursor);

    this.setListAdapter(cursorAdapter);
} 

private class AchievementAdapter extends CursorAdapter {
    public AchievementAdapter(Context context, Cursor c) {
        super(context, c);
    }

    @Override
    public void bindView(View v, Context context, Cursor cursor) {
        TextView tv = (TextView) v.findViewById(R.id.achView1);

        if(cursor.getString(cursor.getColumnIndex("completed")).equals("yes")) {
            tv.setText(cursor.getString(cursor.getColumnIndex("name"))+" (completed)");
            tv.setTextColor(Color.GREEN);
        }
        else {
            tv.setText(cursor.getString(cursor.getColumnIndex("name")));
        }
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        LayoutInflater inflater = LayoutInflater.from(context);
        View v = inflater.inflate(R.layout.achievements_item, parent, false);
        return v;
    }
} 
```

这是它的成就 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/android:empty"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text=""/>

</LinearLayout> 
```

这是它的成就项目 xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/achView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:text="" />

</LinearLayout> 
```

基本上我只是希望这两个列表看起来完全一样。有没有办法让`TextView`继承默认`ListView`行样式？还是我将不得不自己玩边缘和一切？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T14:26:26.767

`TextView`只需从默认`ListView`布局中复制属性`android.R.layout.simple_list_item_1`并在您自己的行布局中使用它们：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/achView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:gravity="center_vertical"
        android:paddingLeft="6dip"
        android:minHeight="?android:attr/listPreferredItemHeight" />

</LinearLayout> 
```

此外，如果您想要的自定义`ListView`行布局只是 a `TextView`，则可以删除父级`LinearLayout`，这样布局中就没有多余`View`的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:26:59.357

在results_item.xml 中为TextView 的顶部和底部添加一些填充

```
 <TextView
        android:id="@+id/achView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:paddingTop="10dp"
        android:paddingBottom="10dp"
        android:text="" /> 
```

# java - Smack 客户端 - 尽管连接中止，但用户仍然“在线”

> ID：10835470
> 
> 赞同：11
> 
> 时间：2012-05-31T14:20:09.267
> 
> 标签：java, connection, xmpp, smack, reconnect

我使用 smack 构建一个小型 XMPP 客户端/机器人时遇到了一个非常奇怪的行为。我设置了连接以及 ConnectionListener 和 ChatManagerListener。这工作得很好，然后我可以与在便携式设备上运行的应用程序聊天。

为了测试失去连接的行为，我拔掉了便携式设备的以太网电缆。我预计 XMPP 客户端会丢失连接，并且用户将在用户好友名单中设置为“离线”。发生的情况是，该用户仍显示为“在线”，并且我的客户端的 ConnectionListener 没有触发任何内容，无论是 connectionClosed 还是 reconnectionFailed 或其他。

然后当我重新插入以太网电缆时，有时就像连接一直处于活动状态一样。处理了离线消息，我可以像以前一样再次聊天。其他时候，我的客户完全无法访问并且出现故障，似乎所有的听众都走了……但没有抛出任何异常。

这是一种非常奇怪且无法控制的行为，它会使整个客户端对我无法使用，因为我无法确定在连接被中止后客户端是否会再次出现。

有没有其他人遇到过这样的问题或有任何暗示（没有）发生了什么？

如果需要，我可以提供我的代码，但实际上只是从 Smack 文档中复制和粘贴。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T20:11:28.333

您实际上在这里描述*了两种*不同的效果。让我们从您的问题标题中提到的那个开始：即使连接是突然的，因此不干净，中止，**服务器也会假定用户在线。**原因很简单，服务器还没有注意到客户端的断开连接，因为 XMPP 节流没有完全终止。大多数 XMPP 服务器每 X 分钟检查一次客户端。如果客户端没有响应，则假定已断开连接并显示为脱机（如果它是该 JID 的最后连接资源）。这种情况在这里没有发生，也很常见。因为有时您希望有较长的超时时间（半小时或更长时间）。

这同样适用于另一边。`PingManager`如果使用或`PingManagerWithAlarmManager`（对于 Android），Smack 还会每 X 分钟发送一次 XMPP ping 。如果使用的套接字有任何问题，则会引发异常。

我希望我能指出你正确的方向。您必须自己调试为什么在您的情况下连接不会因异常而终止。

最后一件事：即使以太网电缆被拔出然后重新插入，TCP 连接也可以很容易地经受住一些超时。涉及的 OSI 模型的各个层有许多超时：NAT、TCP、XMPP 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T07:02:16.250

您过于明确地使用该`disconnect()`方法终止您的连接，否则服务器将不得不定期 ping 您并意识到您已离线

# php - 中断视频流

> ID：10835473
> 
> 赞同：0
> 
> 时间：2012-05-31T14:20:20.147
> 
> 标签：php, javascript, ajax, streaming, flowplayer

**问题：** 我正在`stream_get_contents();`使用 Flowplayer从 php 文件中流式传输我的视频，如此[处所示](https://stackoverflow.com/questions/9860868/flowplayer-secure-streaming-with-apache)。它工作正常，但是如果我尝试使用 AJAX 加载新视频，AJAX 会“等待”文件在加载新信息之前完成缓冲。IE9 将等待缓冲完成，然后再跟随单击的链接。

**问题：** 有没有办法（可能使用 JS、Jquery）来中断或停止视频缓冲，这样程序就可以继续运行，而不必等待整个文件被下载？

**可能** 的解决方案：看起来 JS 会一直工作，直到它发送一个`xmlhttprequest`带有 AJAX 的消息，然后它会等待。我在想也许`xmlhttprequest.abort();`可能是一个解决方案，但也许不是，因为我从未`xmlhttprequest`为流媒体视频创建过。

感谢您的所有回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:31:12.357

没有得到太多回应，但如果有人想知道，您所要做的就是使用 JS 清除元素。例子：

如果这是我的代码：

```
<div id="videoPlayerBox">
    <object>
        <!-- Video Player is Here -->
    </object>
</div> 
```

然后在 JS 中：

```
document.getElementById("videoPlayerBox").innerHTML = ''; 
```

或 JQuery：

```
$('#videoPlayerBox').html(''); 
```

非常明显和简单的答案！这将清除播放器并“中断”流媒体。然后通过 AJAX 加载新播放器，或者使用新视频加载。希望有一天这对某人有所帮助！

# typo3 - TYPO3：将 menuitem 的协议更改为 https

> ID：10835475
> 
> 赞同：2
> 
> 时间：2012-05-31T14:20:26.523
> 
> 标签：typo3

我有一个 HMENU 和一个登录区域。在 HMENU 内，菜单级别 3 上有一个登录区域。此级别 3 以下的所有页面都应使用协议 https 调用。

如何更改菜单中链接的协议？我可以用打字条件来做到这一点：

```
[PidInRootline = XXX]
lib.menu.3.NO {
   # ... what comes here?
}
[global] 
```

我在网上搜索了一个 Typo3 票务系统上有这个补丁，它引入了`forceAbsoluteUrl`and `forceAbsoluteUrl.scheme`，但是我如何把它放到 HMENU 中呢？

* * *

## 编辑

我知道我不能选择带有这样的打字条件的菜单。因为这个菜单只会显示，如果 PIDInRootline 是真的，没关系。

我还担心指向不受保护页面之外的页面的链接。我尝试的每一种组合都失败了`config.baseUrl`，无论我是在公共区域还是保护区，都`config.absRefPrefix`应该通过协议链接到保护区和通过`https`协议链接到公共区域。`http`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:09:25.040

这不会像你展示的那样工作（抱歉坏消息，但至少你会节省你的时间）

`[PidInRootline = XXX]`不检查目标的 UID，而是检查您当前所在页面的 UID。

我认为，您需要编写小扩展来为 https 项目创建自定义菜单分支，并将其与标准 HMENU 结合使用`COA`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T05:45:34.293

您可以在页面属性中强制每个页面使用特定协议。在“*行为*”选项卡中，您可以找到具有以下选项的字段**协议：**

*   默认值：这意味着使用当前协议
*   https：强制此页面为https
*   http：强制此页面为 http

使用 https 切换您想要拥有的所有页面，您就完成了。

但是，在当今，您应该将所有页面切换到 https，这在`.htaccess`.

# c++ - FMOD 不播放声音 C++

> ID：10835476
> 
> 赞同：2
> 
> 时间：2012-05-31T14:20:28.633
> 
> 标签：c++, fmod

我实际上尝试用 FMOD 播放声音，但没有奏效。

```
#ifndef __SOUND_HH__
#define __SOUND_HH__

#include <string>
#include <fmodex/fmod.h>

class Sound
{
  FMOD_SYSTEM *sys;

  FMOD_SOUND *explosion;
  FMOD_RESULT resExplosion;
  FMOD_CHANNEL *channel1;

public:
  Sound();
  ~Sound();

  void play(const std::string &);
};

#endif 
```

和

```
#include <string>
#include <iostream>
#include "Sound.hh"

Sound::Sound()
{
  FMOD_System_Create(&this->sys);
  FMOD_System_Init(this->sys, 1, FMOD_INIT_NORMAL, NULL);
}

Sound::~Sound()
{
  FMOD_System_Release(sys);
} 
```

但是当我播放时（“mysound.wav”）；在我的代码上没有附加任何内容，我验证返回值并没有问题。所以有什么想法吗？谢谢

```
void Sound::play(const std::string &filename)
{
  FMOD_System_CreateStream(this->sys, filename.c_str(), FMOD_HARDWARE | FMOD_LOOP_OFF | FMOD_2D, 0, &this->explosion);
  FMOD_System_PlaySound(sys, FMOD_CHANNEL_FREE, explosion, 0 , &channel1);
        std::cout << "playayayyayayayayya" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:05:34.737

您不是动态分配`Sound`变量。

你需要的是：

`Sound sound = new Sound();`

`sound->play("./sound/explosion.wav");`

或者在`Bombe::update`做：

`Sound sound;`

`sound.play("./sound/explosion.wav");`

还要确保它`explosion.wav`在文件夹中`sound/`。

# asp.net-mvc-3 - asp.net mvc 3 上“User.Identity.Name”的值

> ID：10835479
> 
> 赞同：0
> 
> 时间：2012-05-31T14:20:32.427
> 
> 标签：asp.net-mvc-3, httpcontext

我使用 asp.net mvc 3 在 web 应用程序上工作，问题在于变量“User.Identity.Name”返回名称而不是 UserId。你已经有这个问题了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:26:50.917

> 你已经有这个问题了吗？

这不是问题。这是设计使然。在表单身份验证 cookie 中，仅存储用户名。您可以在用户名列上的数据库中建立索引，并在给定此唯一用户名的情况下有效地检索用户详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:31:08.630

`User.Identity.Name`属性包含在身份验证期间传递给的字符串`FormsAuthentication.SetAuthCookie(thisString)`。

如果您希望此属性包含 userId，请将身份验证代码更改为

```
FormsAuthentication.SetAuthCookie(userId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:28:39.463

正如达林所说，这是设计使然。

在您的表单身份验证 cookie 创建方法中，只需将您的 UserID 保存在 Name 属性中

# php - ASP/PHP 共享加密

> ID：10835482
> 
> 赞同：1
> 
> 时间：2012-05-31T14:20:38.910
> 
> 标签：php, asp.net, encryption, login

这里需要一点建议！我目前正在开展一个项目，在该项目中，代理商和客户都可以登录到“仪表板”。然而，所有的客户端仪表板都是用 PHP 创建的，而代理的东西是在 ASP.Net 中创建的（甚至不要问！）。但是，我需要代理机构执行以下操作的功能：

*   代理登录。
*   机构点击查看客户链接
*   代理会自动登录到客户端 UI 并查看客户端页面。

显然这很难在 ASP.NET 和 PHP 之间进行身份验证！但是我想出了以下解决方案-这可行吗？

*   代理商点击查看客户。
*   ASP.NET 使用密钥加密一些重要信息以及时间戳。
*   ASP 将此请求发布到 PHP 页面
*   PHP 使用密钥解密，检查用户是否存在于数据库中，并检查该机构是否有权查看请求的客户端页面。还检查时间戳是否在 10 秒内。
*   如果以上都OK，那么代理会登录到PHP并看到客户端页面。

你觉得呢？你有没有什么想法？

什么是 ASP/PHP 的最佳加密方法？

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:34:31.647

您要做的是构建一个单点登录 ( [SSO](http://en.wikipedia.org/wiki/Single_sign-on) ) 平台。创建您自己的身份提供程序，然后迁移两个应用程序以对其进行身份验证。

[这是一个 Zend 网络研讨会，其中包含一些帮助您入门的信息。](http://www.slideshare.net/ijansch/building-an-sso-platform-in-php-zend-webinar-edition)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:24:23.707

我会通过[TLS](http://en.wikipedia.org/wiki/Transport_Layer_Security)进行所有这些通信，因为自己很难正确编写。如果您通过 TLS 发送所有数据，则不必担心自己进行任何加密。您可以只使用您描述的基本方案，但对加密数据通道使用 TLS。

# javascript - 存储默认回调

> ID：10835486
> 
> 赞同：0
> 
> 时间：2012-05-31T14:20:48.603
> 
> 标签：javascript, extjs, extjs4

在我所有的 ajax 请求上，比如网格数据加载、Ext.Ajax.request ...我测试用户是否仍然连接。如果不是，则 json 响应与我的预期不同。如果用户未连接，则返回一个带有`auth => false`. 所以每次我得到这个，我都想要同样的程序：返回登录页面。

如何做到这一点，扩展或重构加载/ajax 请求回调？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:41:41.620

理想情况下，您应该更改您的服务器以返回 401 错误（未授权）。`requestexecption`然后在全局 Ajax事件处理程序中捕获此类错误。

# symfony1 - 如何使用 Symfony 1.4 手动设置要以 Doctrine 形式存储在数据库中的值？

> ID：10835494
> 
> 赞同：0
> 
> 时间：2012-05-31T14:21:19.073
> 
> 标签：symfony1, doctrine, symfony-1.4

我在一个项目中使用 Symfony 1.4 和 Doctrine，用户可以将图像作为头像上传。我不想将文件名存储在 db 中，而是一个布尔值。那是我相关的 schema.yml 部分：

```
nyUserProfile:
...
has_avatar:
  type:    boolean
  notnull: true
  default: false 
```

我覆盖了 sfValidatedFile 保存方法只是为了保存一些缩略图而不调用 parent::save 函数，因为我不关心原始文件：

```
 // Creamos los thumbnails
    $config = sfConfig::get('app_images_avatars');
    $original = new sfImage($this->getTempName());

    foreach($config['sizes'] as $thumbnail_name => $thumbnail_info){
        $thumb = $original->copy();
        $thumb->setQuality($thumbnail_info['quality']);
        $thumb->thumbnail($thumbnail_info['width'],$thumbnail_info['height'],$thumbnail_info['method'],'#000000');
        $thumb->saveAs($this->getPath() . DIRECTORY_SEPARATOR . $file . '_' .  $thumbnail_name . $thumbnail_info['extension'],$thumbnail_info['mime']);
    } 
```

这可以很好地保存拇指，但布尔值 false 存储在字段 has_avatar 的 db 中，我想这是因为根本没有调用 parent::save 方法，但你知道，我不想存储原始文件，只是从中制作缩略图。

是否有一种方法可以手动设置存储在 db 中的值，以防图像成功通过验证器测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:23:32.777

如果您的表单是 Doctrine 表单，您可以使用`updateObject`表单本身的功能设置 has_avatar 属性：

```
public function updateObject ($values = null)
{
    $object = parent::updateObject($values);
    $object->setHasAvatar(true);
            return $object;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T15:12:47.743

验证表单后，您可以在操作中执行此操作，只需更新数据库中的字段。

```
// Deal with the request
if ($request->isMethod('post'))
{
  $this->form->bind(/* user submitted data */);
  if ($this->form->isValid())
  {
    $object = $this->form->save();

    // your form is valid so your image is valid too
    $object->setHasAvatar(true);
    $object->save();
  }
} 
```

# javascript - map.fitBounds 之后有回调吗？

> ID：10835496
> 
> 赞同：18
> 
> 时间：2012-05-31T14:21:23.503
> 
> 标签：javascript, google-maps, google-maps-api-3

我的代码：

```
if(!bounds.isEmpty()) {
    map.fitBounds(bounds);
    if (map.getZoom() > 11) {
        map.setZoom(11);
    }   
} 
```

但我看到`map.setZoom(11);`可以在`.fitBounds`结束之前调用它。所以结果不是我想要的。

有没有办法在`.fitBound`完成时管理回调？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-31T15:56:13.597

试试这个：

```
 if(!bounds.isEmpty()) {
    map.fitBounds(bounds);
    google.maps.event.addListenerOnce(map, 'idle', function() {
        if (map.getZoom() > 11) {
            map.setZoom(11);
        }  
    });
} 
```

# wpf - 模型视图 ViewModel + WPF - 需要进一步了解

> ID：10835497
> 
> 赞同：1
> 
> 时间：2012-05-31T14:21:24.137
> 
> 标签：wpf, c#-4.0, mvvm

我对 MVVM 和 WPF 都是全新的，而且我一直在阅读，但我认为如果不花大量时间我会找到足够具体的答案，所以我来到了这里。

我有一个包，其中包含大量 XAML 文件，这些文件显然用于 GUI。当我展开这些 XAML 文件时，有一个 .xaml.cs 文件。此外，在同一个包中，我有*_* __ViewModel.cs 文件。我的问题是，这是系统的核心所在吗？

我的误解是——.XAML 文件是视图，.xaml.cs 是模型，*_* _ViewModel.cs 文件是视图模型吗？我不完全确定 .xaml.cs，因为其他两个非常明显。如果 .xaml.cs 文件不是模型，我如何确定是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:45:26.347

*.XAML.cs*文件也是视图的一部分。它们就是所谓的背后代码。如果您使用的是 MVVM，那么一般来说，您很少需要访问这些文件，因为您将使用 Commanding 将命令绑定到您的视图模型，而不是在后面的代码中添加事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T18:36:06.070

`*.xaml.cs`文件只是视图的代码隐藏，因此是该层的一部分（如其他答案所述）。

如您所料，这些`*ViewModel.cs`文件构成了各种视图模型。该命名约定非常标准。

定义**模型**有点棘手，因为它会根据应用程序而变化。一般来说，它是您应用程序的“核心”，是其他一切的*实际*基础。

它可以是数据库、Web 服务、TCP 套接字连接以及许多其他东西。重要的是它*与视图没有任何关系*。你不会在文件的命名方案中看到它，但如果你看一下程序的设计，它就很明显了。

# html - 如何更改 HTML/CSS 中的文本透明度？

> ID：10835500
> 
> 赞同：133
> 
> 时间：2012-05-31T14:21:30.240
> 
> 标签：html, css, opacity

我对 HTML/CSS 很陌生，我正在尝试将一些文本显示为 50% 透明。到目前为止，我有 HTML 来显示完全不透明的文本

```
<html><font color=\"black\" face=\"arial\" size=\"4\">THIS IS MY TEXT</font></html> 
```

但是，我不确定如何改变它的不透明度。我试过在网上查找，但我不确定如何处理我找到的代码。

* * *

## 回答 #1

> 赞同：301
> 
> 时间：2012-05-31T14:43:56.103

`opacity`适用于整个元素，因此如果您对该元素有背景、边框或其他效果，这些效果也会变得透明。如果您*只*希望文本是透明的，请使用`rgba`.

```
#foo {
    color: #000; /* Fallback for older browsers */
    color: rgba(0, 0, 0, 0.5);

    font-size: 16pt;
    font-family: Arial, sans-serif;
} 
```

另外，远离，远离`<font>`。我们现在有 CSS。

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2012-05-31T14:25:08.323

检查[Opacity](http://www.w3schools.com/cssref/css3_pr_opacity.asp)，您可以将此 css 属性设置为 div，`<p>`或者使用`<span>`您想要使其透明

[顺便说一句，不推荐](http://www.w3schools.com/tags/tag_font.asp)使用字体标签，使用 css 设置文本样式

```
div {
    opacity: 0.5;
} 
```

编辑：这段代码将使整个元素透明，如果你想让**只是文本**透明检查@Mattias Buelens答案

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-12-02T16:30:26.437

只需使用`rgba`标签作为文本颜色。您可以使用`opacity`，但这会影响整个元素，而不仅仅是文本。假设你有一个边框，它也会使它变得透明。

```
.text
    {
        font-family: Garamond, serif;
        font-size: 12px;
        color: rgba(0, 0, 0, 0.5);
    } 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-05-31T14:29:02.273

您最好的解决方案是查看元素的“不透明度”标签。

例如：

```
.image
{
    opacity:0.4;
    filter:alpha(opacity=40); /* For IE8 and earlier */
} 
```

所以在你的情况下，它应该看起来像：

```
<html><span style="opacity: 0.5;"><font color=\"black\" face=\"arial\" size=\"4\">THIS IS MY TEXT</font></html> 
```

但是不要忘记 HTML5 不支持该标签。

你也应该使用 CSS :)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-31T14:22:41.840

css`opacity`属性呢？`0`到`1`价值观。

但是你可能需要使用比“字体”更明确的 dom 元素。例如：

```
<html><body><span style=\"opacity: 0.5;\"><font color=\"black\" face=\"arial\" size=\"4\">THIS IS MY TEXT</font></span></body></html> 
```

作为附加信息，我当然建议您在 html 元素之外使用 CSS 声明，但也尝试使用字体 css 样式而不是字体 html 标记。

对于跨浏览器 css3 样式生成器，请查看[http://css3please.com/](http://css3please.com/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-12-04T19:14:25.800

简单的！在你之后：

```
 <font color=\"black\" face=\"arial\" size=\"4\"> 
```

添加这个：

```
 <font style="opacity:.6"> 
```

您只需将“.6”更改为 1 到 0 之间的十进制数

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-02-19T10:29:25.377

没有像 background-opacity 这样的[CSS](http://www.themexpro.com/)属性，您只能使用它来更改元素背景的不透明度或透明度而不影响子元素，另一方面，如果您尝试使用 CSS opacity 属性，它不仅会更改背景的不透明度，但也会改变所有子元素的不透明度。在这种情况下，您可以使用 CSS3 中引入的 RGBA 颜色，其中包括 alpha 透明度作为颜色值的一部分。使用 RGBA 颜色，您可以设置背景颜色及其透明度。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-09-10T20:07:13.793

试着玩`mix-blend-mode: multiply;`

```
color: white;
background: black;
mix-blend-mode: multiply; 
```

[MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode)

[教程](https://www.youtube.com/watch?v=vs34f9FiHps&t=74s)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-12-06T15:22:03.623

如果你使用`opacity`一个元素，整个元素的效果（背景+其他东西），你可以使用`mix-blend-mode`特定元素的CSS属性，

参考这些网站：

[https://css-tricks.com/almanac/properties/m/mix-blend-mode/](https://css-tricks.com/almanac/properties/m/mix-blend-mode/)

[https://css-tricks.com/basics-css-blend-modes/](https://css-tricks.com/basics-css-blend-modes/)

# qt - 使用 DLL 时如何减少 QT 程序的启动时间

> ID：10835501
> 
> 赞同：1
> 
> 时间：2012-05-31T14:21:33.923
> 
> 标签：qt, dll, load-time

我的程序在启动过程中依赖于几个 DLL，包括 QT 本身的 QtCore4.dll 和 QtGui4.dll 以及 National Instruments 的 ni488.dll。当我尝试使用 cbw32.dll（在[http://www.mccdaq.com/software.aspx](http://www.mccdaq.com/software.aspx)的 UniversalLibrary 中找到的 5 MB 文件）中的任何函数时，我的程序突然需要 5 秒以上才能启动，而之前它立即这样做了。有什么办法可以减少启动时间吗？就此而言，那段时间发生了什么，操作系统是主动链接函数，还是仅仅试图找到 DLL？有什么方法可以减小 DLL 的大小以便只包含与我的项目相关的内容？或者将该信息包含在可执行文件本身中（换句话说，静态链接）？

编辑：并行加载 DLL 确实是一个不错的建议（以及我将在未来使用的技术），但并没有解决我认为的核心问题。加载一个 5 MB 的 DLL 需要 5 秒时间似乎过多，对我来说这表明存在更深层次的问题。我的期望在这里吗？这些加载时间是正常的吗？还是真的有什么问题（如果是，我应该调查什么）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:33:47.437

那么为什么不在启动时在并行线程中动态加载这个dll呢？

```
HINSTANCE hGetProcIDDLL = LoadLibrary(L"library.dll"); 
```

[这](http://www.goffconcepts.com/techarticles/development/cpp/calldll.html)是一个很好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:47:46.203

我自己也遇到了这个确切的问题。我已经忍受了 5 秒以上的启动延迟很长一段时间了，但是根据某人的建议，在那段暂停期间闯入了调试器。似乎`cbw32`正在进行一些冗长的初始化，可能在`DllMain`. 我猜想在那段时间发生了一些硬件轮询/重置/任何事情。

有人建议使用`/DELAYLOAD`for `cbw32.dll`，它消除了滞后，但我还没有在具有适用板的系统上测试功能......

# asp.net - 转到数据集中的下一条可用记录

> ID：10835503
> 
> 赞同：-1
> 
> 时间：2012-05-31T14:21:40.880
> 
> 标签：asp.net, .net, vb.net

我有以下代码可以转到下一个要处理的可用记录。

```
 Dim ds As New DataSet
        Dim strListType As String = Request.QueryString("ListType")
        Dim strStatusFilter As String = ""
        Select Case strListType
            Case "newmember"
                strStatusFilter = "Status_Ind in (1,4,6,8) and IsMember_Ind=1"
            Case "nonmember"
                strStatusFilter = "Status_Ind in (1,4,6,8) and IsMember_Ind=1"
            End Select

        ds = objClass.List(0, 10, "Due_Dt, Joined_Date ASC", "", strStatusFilter)

       'go to the next record
        If ds.Tables(0).Rows.Count > 0 Then
            Server.Transfer("Request.aspx?Request_ID=" & ds.Tables(0).Rows(0).Item("Request_ID") & "&ListType=" & strListType)
        Else
            Server.Transfer("List.aspx?Status=NewMember")
        End If 
```

ObjClass.List 是一种用于运行视图和过滤数据的方法。我在两列due_dt 和joined_dt 上订购数据。

我的问题是，如果我没有更新我的截止日期，它每次都会进入相同的记录。如果不更新，我只想转到下一条记录。我可以有我想要的行为吗？我可以做出哪些改变？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:52:05.273

以下语句返回表中的第一行：

```
ds.Tables(0).Rows(0).Item("Request_ID") 
```

要获得第二行，您可以使用以下语句：

```
ds.Tables(0).Rows(1).Item("Request_ID") 
```

要遍历所有行，您可以执行以下操作：

```
For Each row As DataRow in ds.Tables(0).Rows
    Dim requestId As Object = row.Item("Request_ID")
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T05:20:14.817

使用此代码....这应该可以工作....首先您必须声明一个名为 data_row 的静态变量以及一个数据集。

> public void Button1_Click(object sender, EventArgs e) { if (RowNo < sqlDst.Tables["news"].Rows.Count - 1) { RowNo += 1; DataRow drow = sqlDst.Tables["news"].Rows[RowNo];
> 
> ```
>  Label2.Text = drow.ItemArray.GetValue(0).ToString();
>             TextBox2.Text = drow.ItemArray.GetValue(1).ToString();
>             Label1.Text = "";
> 
>         }
> 
>         else
>         {
>             Label1.Text = "No more records";
>         }
> 
>     } 
> ```

为此，需要在页面顶部声明变量。

> 私有数据集 sqlDst = new DataSet(); 私有静态 int RowNo = 0; 业务检查 obj1 = 新业务检查（）；

# android - 在 (Sherlock)DialogFragment 中调用 startActivity(intentServiceIntent) 导致 ActivityNotFoundException

> ID：10835506
> 
> 赞同：2
> 
> 时间：2012-05-31T14:21:55.513
> 
> 标签：android, android-intent, actionbarsherlock, android-dialogfragment, android-compatibility

**设想：**

显示 SherlockFragment 的 SherlockFragmentActivity。SherlockFragment 显示 SherlockDialogFragment。

**版本：**

*   构建 API：谷歌 API 15
*   兼容性/支持包：v4
*   ActionBarSherclock：4.1.0
*   安卓模拟器：API-8

**代码：**

SherlockFragment活动：

```
public class TrailerDetailSherlockFragmentActivity extends SherlockFragmentActivity {
    ...
    /*
     * set up the fragment which will display the sensor details,
     * and allow changes of the alarm settings
     */                     
    detailFragment = new TempsensorDetailSherlockFragment();

    transaction = getSupportFragmentManager().beginTransaction();
    transaction.replace(R.id.framelayout_td_sensordetail, detailFragment);
    transaction.commit();   
    ...
    } 
```

夏洛克片段：

```
public class TempsensorDetailSherlockFragment extends SherlockFragment {
    ...
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        ...
        // set the onClick method for the alarm values
        View alarmValueLayout = tempsensorDetailView.findViewById(R.id.ll_sd_minmax);
        alarmValueLayout.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                FragmentManager fm = activity.getSupportFragmentManager();

                // Create and show the dialog.
                SetAlarmTemperatureSherlockDialogFragment setAlarmTempsDialogFragment = new SetAlarmTemperatureSherlockDialogFragment(deviceString, alarm);
                setAlarmTempsDialogFragment.show(fm, "dialog");
            }
        });
        ...
    } 
```

SherlockDialogFragment：

```
public class SetAlarmTemperatureSherlockDialogFragment extends SherlockDialogFragment {
    ...
    @Override
    public void onAttach(Activity activity) {
        ...
        this.activity = (SherlockFragmentActivity) activity;
        notificationServiceUtil = new NotificationServiceUtil(activity);
        ...
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,  Bundle savedInstanceState) {
    ...
    saveButton = (ImageButton) view.findViewById(R.id.btn_setalarmtemp_save);
            saveButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    ...
                    notificationServiceUtil.alarmSubscribe(deviceString, bundle, new AlarmSubscribeHandler());
                }
            });
    ...
    } 
```

对于后台作业和数据管理，我使用的是 IntentService。因此，我创建了一个名为 NotificationServiceUtil 的辅助类：

```
public class NotificationServiceUtil {
    ...
    public NotificationServiceUtil(Activity activity) {
        this.activity = activity;
    }

    private void _initRestApiServiceIntent (String action) {
        restApiServiceIntent = new Intent(activity, NotificationService.class);
        restApiServiceIntent.setAction(action);
    }

    public void alarmSubscribe(String deviceString, Bundle bundle, Handler handler) {
        _initRestApiServiceIntent(NotificationService.ACTION_ALARM_SET);
        restApiServiceIntent.putExtras(bundle);
        restApiServiceIntent.putExtra(NotificationService.EXTRAKEY_DEVICE_STRING, deviceString);
        restApiServiceIntent.putExtra(NotificationService.EXTRAKEY_MESSENGER, new Messenger(handler));

        activity.startActivity(restApiServiceIntent);
    }
    ...
} 
```

清单的一部分：

```
 <activity 
        android:name=".activitys.MainSherlockFragmentActivity" 
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
   </activity>

   <activity
       android:name=".activitys.TrailerDetailSherlockFragmentActivity"
       android:label="@string/app_name"/>

   <service android:name=".services.NotificationService" /> 
```

**例外：**

这是我得到的例外，当单击 SetAlarmTemperatureSherlockDialogFragment 中的保存按钮时：

```
05-31 15:29:34.084: E/AndroidRuntime(4041): FATAL EXCEPTION: main
05-31 15:29:34.084: E/AndroidRuntime(4041): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.tsystems.res.itm.android/com.tsystems.res.itm.android.services.NotificationService}; have you declared this activity in your AndroidManifest.xml?
05-31 15:29:34.084: E/AndroidRuntime(4041):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1404)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at android.app.Activity.startActivityForResult(Activity.java:2817)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:674)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at android.app.Activity.startActivity(Activity.java:2923)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at com.tsystems.res.itm.android.util.NotificationServiceUtil.alarmSubscribe(NotificationServiceUtil.java:121)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at com.tsystems.res.itm.android.dialogs.SetAlarmTemperatureSherlockDialogFragment$1.onClick(SetAlarmTemperatureSherlockDialogFragment.java:113)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at android.view.View.performClick(View.java:2408)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at android.view.View$PerformClick.run(View.java:8816)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at android.os.Handler.handleCallback(Handler.java:587)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at android.os.Looper.loop(Looper.java:123)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at java.lang.reflect.Method.invokeNative(Native Method)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at java.lang.reflect.Method.invoke(Method.java:521)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-31 15:29:34.084: E/AndroidRuntime(4041):     at dalvik.system.NativeStart.main(Native Method) 
```

**想法：**

您可以在异常中看到，调用的是 startActivityForResult()，而不是 startActivity()。我认为这可能是 support.v4 包中的一个错误，但我完全不确定。

但我能说的是，NotificationServiceUtil 类在 Activity 和 SherlockFragmentActivity 中运行良好。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:25:23.687

您正在启动一项服务，而不是一项活动。将 activity.startActivity() 更改为 activity.startService()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:30:58.980

只需检查更改，我已对您的代码进行了更改，不要忘记导入

```
import android.app.NotificationManager;    //    in ur activity

public class NotificationServiceUtil {
    ...
    public NotificationServiceUtil(Activity activity) {
        this.activity = activity;
    }

    private void _initRestApiServiceIntent (String action) {
        NotificationManager nm = (NotificationManager) getSystemService(activity.NOTIFICATION_SERVICE);  <------ CHANGE
        restApiServiceIntent = new Intent(activity, nm.getClass());  <--- CHANGE
        restApiServiceIntent.setAction(action);
    }
    public void alarmSubscribe(String deviceString, Bundle bundle, Handler handler) {
        _initRestApiServiceIntent(NotificationService.ACTION_ALARM_SET);
        restApiServiceIntent.putExtras(bundle);
        restApiServiceIntent.putExtra(NotificationService.EXTRAKEY_DEVICE_STRING,     deviceString);
        restApiServiceIntent.putExtra(NotificationService.EXTRAKEY_MESSENGER, new Messenger(handler));

    activity.startActivity(restApiServiceIntent);
}
...
} 
```

# wcf - 在隔离环境中通过 MSMQ 使用另一个 WCF 服务调用 WCF 服务

> ID：10835507
> 
> 赞同：1
> 
> 时间：2012-05-31T14:21:55.787
> 
> 标签：wcf, msmq

我有一台带有事件服务的服务器，它位于我们的总部**H/O 服务器**

然后，我有一个托管在外部服务提供商处的服务器。**分机服务器**

两台机器之间的连接是通过 VPN 进行的，并且两台服务器都在不同的域上。

我需要**Ext Server**上的应用程序来调用**H/O Server**上的事件服务。事件服务是 WCF 服务。

我正在考虑使用 WCF over MSMQ 来保证**Ext Server**应用程序引发的任何事件都被传递到 WCF 事件服务。

我的问题是我该怎么做：-我的 WCF 服务托管在**H/O服务器上的 IIS 内，然后我是否在****Ext 服务器**上设置 MSMQ并让我在**Ext 服务器**上的应用程序正常引用 WCF 服务，只是将绑定更改为指向本地队列？

如果是这种情况，我会遇到哪些安全问题以及如何解决这些问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:35:15.003

如果要跨域向队列发送消息，则需要将远程队列的发送权限授予名为 ANONYMOUS LOGON 的本地用户。这是为了在远程机器上使用 Windows 2008。

**更新**

任何参与消息交换的机器都需要安装 MSMQ。在您的服务绑定中，您确定服务地址的本地队列。您创建一个单向操作合同来充当您的消息处理程序。当消息发送到此本地队列时，将调用此方法。

从您的发送机器创建一个客户端绑定，该绑定引用相同的队列（这次使用远程地址）。然后您可以在客户端代码中调用该操作，这将导致 MSMQ 将消息传输到远程队列。

您将遇到的问题是您正在跨域，因此当您的呼叫到达远程队列时，发件人身份在该域上将没有任何意义，因此您必须允许任何人将消息发送到队列中。您可以通过授予*Everyone*本地帐户对队列的发送权限来执行此操作（您可能还需要*Get Properties*和*Get Permissions*）。

# actionscript-3 - 远眼变换工具的约束拖动

> ID：10835508
> 
> 赞同：0
> 
> 时间：2012-05-31T14:21:59.673
> 
> 标签：actionscript-3

有人可以帮助我吗？，我使用 senocular 变换工具库，但我需要限制容器中的移动。

例如我有一个box1（300x200），在这个里面，我还有其他box2（20x20）......我只能在box1内移动（拖动）box2。

Senocular 变换工具是一个库，可通过“旋转”、“调整大小”和“移动”为对象提供动力。 [http://www.senocular.com/flash/tutorials/transformtool/](http://www.senocular.com/flash/tutorials/transformtool/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:50:39.913

您可以启用侦听器来跟踪 mouseX 和 mouseY。

```
someObject.startDrag();
stage.addEventListener(MouseEvent.MOUSE_MOVE, handleMouseMove, false, 0, true);

private function handleMouseMove(event:MouseEvent = null):void {

//define an area
if (stage.mouseX < 20 || stage.mouseX > stage.stageWidth - 20 || stage.mouseY < 20 || stage.mouseY > stage.stageHeight - 20) {

//call stopDrag on your object or move it back somewhere.
stage.removeEventListener(MouseEvent.MOUSE_MOVE, handleMouseMove);
someObject.stopDrag();

}

} 
```

# php - 用php删除子数组

> ID：10835511
> 
> 赞同：-4
> 
> 时间：2012-05-31T14:22:03.900
> 
> 标签：php, arrays, unset

我有以下功能，它的目的是在数组树中过滤那些不符合搜索索引的元素并消除主题。我可以得到这个函数来带来想要的结果。

```
public function negativeKeywordsFilter($products, $negative_keywords){
  $nk=explode(',',$negative_keywords);
  foreach ($products['productItems'] as $product){
    foreach ($product as $item){
        foreach ($nk as $word){
        if (stripos($item['name'],$word) !== false){
        unset($item);                       
    }

  }
}

}
 return $products;
} 
```

我的数组如下所示：

```
array(
    'page' => '1',
    'items' => '234',
    'items' => array(
        'item' => array(
            0 => array(
                'name' => 'second', 
                'description' => 'some description'
            )
        )
    )
)
) 
```

如果名称与描述匹配，则应取消设置该值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:31:40.387

问题是您只取消设置具有值*副本*的变量，您需要取消设置数组中的相应元素。

```
public function negativeKeywordsFilter($products, $negative_keywords){
  $nk=explode(',',$negative_keywords);
  foreach ($products['productItems'] as $key1 => $product){
    foreach ($product as $key2 => $item){
        foreach ($nk as $word){
        if (stripos($item['name'],$word) !== false){
        unset($products['productItems'][$key1][$key2]);                       
    }

  }
}

}
 return $products;
} 
```

# .net - 安装期间的 FlexGrid dll 注册？也许？

> ID：10835512
> 
> 赞同：0
> 
> 时间：2012-05-31T14:22:04.250
> 
> 标签：.net, winforms, com, setup-deployment, msflexgrid

正如标题所示，我很茫然，我希望能在这里得到一些人的帮助......

我正在尝试使用 VS2010 设置和部署为使用 flexgrid 的同事的 winforms 应用程序创建安装程序包。该项目成功构建并安装，没有任何错误，但是，当应用程序尝试调用 flexgrid 来显示数据时，会收到下图中显示的错误。

![在此处输入图像描述](../Images/eb7b4e192cd5cf08b3b7be7b626163a3.png)

我已经用谷歌搜索，直到我不能再用谷歌搜索并且找不到解决方案！dll 被安装到应用程序根目录中，我尝试构建应用程序以同时针对 32 位和 64 位 cpu，我尝试了 corflags 实用程序，以及我在互联网上可以找到的所有其他东西，但没有任何效果。

我从来没有在项目中使用过 flexgrid，我尽量避免在我的应用程序中引用 com 对象，所以这对我来说绝对是第一次。如果这对任何人有任何启发，项目的依赖关系如下所示......任何帮助将不胜感激！

![在此处输入图像描述](../Images/91d75956052deaa0a3a516df8f38bbfe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:48:45.583

[您应该在每次调用regsvr32](http://en.wikipedia.org/wiki/Regsvr32)的设置期间注册 flexgrid 。如果没有在注册表中注册，即使一切都在正确的位置，也无法找到和调用它。在安装过程中调用 regsvr32 可防止延迟请求提升的用户权限。

# sql - select if exists else select 0 是否查询两次？

> ID：10835515
> 
> 赞同：2
> 
> 时间：2012-05-31T14:22:08.197
> 
> 标签：sql

我正在做这样的密码验证查询。

```
if exists(select UserID from users where UserName=@UserName and Password=@Password) 
    select UserID from users where UserName=@UserName and Password=@Password
else 
    select 0 
```

但在我看来，我为一个结果查询了两次我可以这样做吗

```
Select UserID Where Username = @UserName and Password = @Password 
```

当我得到我的结果时，只需检查阅读器的结果数量？

```
if (!myReader.HasRows)
    MessageBox.Show("UserName not found or Password invalid");
else
    //do login stuff 
```

猜猜我要问的是，哪个更好，或者它们是一样的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:23:33.747

用这个：

```
SELECT  ISNULL
        (
        (
        SELECT  userId
        FROM    users
        WHERE   userName = @userName
                AND password = @password
        ),
        0
        ) 
```

您检查记录数量的解决方案当然也可以。

请注意，它将始终只返回一条记录，如果`userName`不是唯一的并且有重复的`@userName`.

正如@Andriy M 所指出的，`COALESCE`这里将无济于事，因为它在内部被重写为`CASE`容易出现相同问题的地方。

回答您的问题：是的，原始批次将访问`users`两次。

# c# - 通过属性值获取属性名称

> ID：10835519
> 
> 赞同：2
> 
> 时间：2012-05-31T14:22:17.713
> 
> 标签：c#, attributes

美好的一天，如果我有该属性的自定义属性值，如何获取类的属性名称？当然还有自定义属性名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:24:50.617

**通过自定义属性获取属性名称：**

```
 public static string[] GetPropertyNameByCustomAttribute
      <ClassToAnalyse, AttributeTypeToFind>
      (
       Func<AttributeTypeToFind, bool> attributePredicate
      )
      where AttributeTypeToFind : Attribute
    {  
      if (attributePredicate == null)
      {
        throw new ArgumentNullException("attributePredicate");
      }
      else
      {
        List<string> propertyNames = new List<string>();

        foreach 
        (
          PropertyInfo propertyInfo in typeof(ClassToAnalyse).GetProperties()
        )
        {
          if
          (
            propertyInfo.GetCustomAttributes
            (
              typeof(AttributeTypeToFind), true
            ).Any
            (
              currentAttribute =>                  
              attributePredicate((AttributeTypeToFind)currentAttribute)
            )
          )
          {
            propertyNames.Add(propertyInfo.Name);
          }
        }  

        return propertyNames.ToArray();
      }
    } 
```

**测试夹具：**

```
public class FooAttribute : Attribute
{
  public String Description { get; set; }
}

class FooClass
{
  private int fooProperty = 42;

  [Foo(Description="Foo attribute description")]
  public int FooProperty
  {
    get
    {
      return this.fooProperty;
    }
  }

} 
```

**测试用例：**

```
// It will return "FooProperty"
GetPropertyNameByCustomAttribute<FooClass, FooAttribute>
( 
  attribute => attribute.Description == "Foo attribute description"
);

// It will return an empty array
GetPropertyNameByCustomAttribute<FooClass, FooAttribute>
( 
  attribute => attribute.Description == "Bar attribute description"
); 
```

# wpf - WPF：与 ListView 的数据绑定获取错误：“使用 ItemsSource 之前项目集合必须为空”

> ID：10835523
> 
> 赞同：0
> 
> 时间：2012-05-31T14:22:33.470
> 
> 标签：wpf, data-binding

我正在尝试将我的 ListView 数据绑定设置为 ObservableCollection。我添加了上下文菜单，并检查列表视图中每个项目的权限。所以我收到一个错误：“在使用 ItemsSource 之前，项目集合必须为空”。但是如果我删除 ListView 中的 ItemsSource，我就不能使用数据绑定。你能帮助我吗？[您可以在http://www.mediafire.com/?r21lm8ud9q92o5k](http://www.mediafire.com/?r21lm8ud9q92o5k)下载示例

```
 <ListView ItemsSource="{Binding}"
        Height="259" HorizontalAlignment="Left" Margin="12,26,0,0" Name="listView1" VerticalAlignment="Top" Width="479">
        <ListView.Items>                
            <ListViewItem>                    
                <ListViewItem.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Kiểm tra">
                            <MenuItem.Icon>
                                <Image Source="Images/CompareFiles.png" Style="{StaticResource ImageContextMenu}"/>
                            </MenuItem.Icon>
                        </MenuItem>

                        <MenuItem Header="Download" Visibility="{Binding Path=Name, Converter={StaticResource MenuContext}, ConverterParameter= {x:Static ObservableCollectionProblem:EnumUserAction.Download}}">
                            <MenuItem.Icon>
                                <Image Source="Images/SyncCurrentObject.png" Style="{StaticResource ImageContextMenu}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Header="Upload" Visibility="{Binding Path=Actions, Converter={StaticResource MenuContext}, ConverterParameter = {x:Static ObservableCollectionProblem:EnumUserAction.Upload}}">
                            <MenuItem.Icon>
                                <Image Source="Images/upload.png" Style="{StaticResource ImageContextMenu}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </ListViewItem.ContextMenu>
                <GridView>
                    <GridViewColumn Width="250" DisplayMemberBinding="{Binding Path=Name}" Header="Name"></GridViewColumn>
                    <GridViewColumn Width="250" DisplayMemberBinding="{Binding Path=Actions, Converter={StaticResource ActionToStringConverter}}" Header="Action"></GridViewColumn>
                </GridView>
            </ListViewItem>
        </ListView.Items>
        <ListView.ContextMenu>
            <ContextMenu>
                <MenuItem Header="Kiểm tra">
                    <MenuItem.Icon>
                        <Image Source="Images/CompareFiles.png" Style="{StaticResource ImageContextMenu}"/>
                    </MenuItem.Icon>
                </MenuItem>

                <MenuItem Header="Download" Visibility="{Binding Path=Name, Converter={StaticResource MenuContext}, ConverterParameter= {x:Static ObservableCollectionProblem:EnumUserAction.Download}}">
                    <MenuItem.Icon>
                        <Image Source="Images/SyncCurrentObject.png" Style="{StaticResource ImageContextMenu}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Upload" Visibility="{Binding Path=Actions, Converter={StaticResource MenuContext}, ConverterParameter = {x:Static ObservableCollectionProblem:EnumUserAction.Upload}}">
                    <MenuItem.Icon>
                        <Image Source="Images/upload.png" Style="{StaticResource ImageContextMenu}"/>
                    </MenuItem.Icon>
                </MenuItem>                    
            </ContextMenu>
        </ListView.ContextMenu>
        <ListView.View>
            <GridView>                    
                <GridViewColumn Width="250" DisplayMemberBinding="{Binding Path=Name}" Header="Name"></GridViewColumn>
                <GridViewColumn Width="250" DisplayMemberBinding="{Binding Path=Actions, Converter={StaticResource ActionToStringConverter}}" Header="Action"></GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T02:19:16.527

我在 ItemContainerStyle 中添加上下文菜单及其成功

```
<ListView Height="259" HorizontalAlignment="Left" Margin="12,26,0,0" Name="listView1" VerticalAlignment="Top" Width="479">                         
        <ListView.Resources>
            <ContextMenu x:Key="ItemContextMenu">                    
                <MenuItem Header="Kiểm tra">
                    <MenuItem.Icon>
                        <Image Source="Images/CompareFiles.png" Style="{StaticResource ImageContextMenu}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Download" Visibility="{Binding Path=Actions, Converter={StaticResource MenuContext}, ConverterParameter= {x:Static ObservableCollectionProblem:EnumUserAction.Download}}">
                    <MenuItem.Icon>
                        <Image Source="Images/SyncCurrentObject.png" Style="{StaticResource ImageContextMenu}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Upload" Visibility="{Binding Path=Actions, Converter={StaticResource MenuContext}, ConverterParameter = {x:Static ObservableCollectionProblem:EnumUserAction.Upload}}">
                    <MenuItem.Icon>
                        <Image Source="Images/upload.png" Style="{StaticResource ImageContextMenu}"/>
                    </MenuItem.Icon>
                </MenuItem>
            </ContextMenu>
        </ListView.Resources>
        <ListView.ItemContainerStyle>
            <Style TargetType="{x:Type ListViewItem}">
                <EventSetter Event="PreviewMouseLeftButtonDown" Handler="OnListViewItem_PreviewMouseLeftButtonDown" />
                <Setter Property="ContextMenu" Value="{StaticResource ItemContextMenu}"/>
            </Style>
        </ListView.ItemContainerStyle>
        <ListView.View>                
            <GridView>                    
                <GridViewColumn Width="250" DisplayMemberBinding="{Binding Path=Name}" Header="Name"></GridViewColumn>
                <GridViewColumn Width="250" DisplayMemberBinding="{Binding Path=Actions, Converter={StaticResource ActionToStringConverter}}" Header="Action"></GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:30:01.493

您只能为 a 中的项目提供一次来源`ListView`，在这种情况下，您似乎`ListView.Items`在 XAML 中显式设置集合。这将导致您在尝试使用 ItemsSource 绑定时看到的错误。

也许尝试`ListView.Items`从 XAML 中删除节点并仅使用`ItemsSource`绑定来填充列表。

看起来您还想使用`ListView.ItemTemplate`来格式化您想要的项目并获得正确的上下文菜单。

# android - 滚动视图而不会丢失数据

> ID：10835524
> 
> 赞同：0
> 
> 时间：2012-05-31T14:22:36.753
> 
> 标签：android

我的应用程序中有一个 Scrollview 需要加载大量数据，它们都是加载对象属性的 TextView，但是当我滚动视图时，它有时会加载要显示的对象内容，有时不会。那么我能做些什么来实现这一点呢？

这是 ViewHolder 类（有点难看）：我忘了提，这个类扩展了 BaseAdapter，所以，没有活动

```
private class ViewHolder {
    TextView txtName;
    TextView txtFaults;
    TextView txtA;
    TextView txtB;
    TextView txtC;
    TextView txtD;
    TextView txtE;
    TextView txtF;
    TextView txtG;
    TextView txtH;
    TextView txtI;
    TextView txtPFinal;
    TextView txtPart;
    TextView txtMF;
    TextView txtMP;
    TextView txtForm;
    TextView txtMN;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    LayoutInflater inflater = activity.getLayoutInflater();

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.row, null);
        holder = new ViewHolder();
        holder.txtName = (TextView) convertView
                .findViewById(R.id.txtMateria);
        holder.txtFaults = (TextView) convertView
                .findViewById(R.id.txtFaults);
        holder.txtA = (TextView) convertView.findViewById(R.id.txtA);
        holder.txtB = (TextView) convertView.findViewById(R.id.txtB);
        holder.txtC = (TextView) convertView.findViewById(R.id.txtC);
        holder.txtD = (TextView) convertView.findViewById(R.id.txtD);
        holder.txtE = (TextView) convertView.findViewById(R.id.txtE);
        holder.txtF = (TextView) convertView.findViewById(R.id.txtF);
        holder.txtG = (TextView) convertView.findViewById(R.id.txtG);
        holder.txtH = (TextView) convertView.findViewById(R.id.txtH);
        holder.txtI = (TextView) convertView.findViewById(R.id.txtI);
        holder.txtPFinal = (TextView) convertView.findViewById(R.id.txtPFinal);
        holder.txtPart = (TextView) convertView
                .findViewById(R.id.txtPart);
        holder.txtMF = (TextView) convertView.findViewById(R.id.txtMF);
        holder.txtMP = (TextView) convertView.findViewById(R.id.txtMP);
        holder.txtForm = (TextView) convertView
                .findViewById(R.id.txtForm);
        holder.txtMN = (TextView) convertView
                .findViewById(R.id.txtMN);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    Materia materia = list.get(position);
    holder.txtName.setText(materia.getMateria());
    holder.txtName.setTypeface(null, Typeface.BOLD);
    holder.txtFaults.setText("Faults:"
            + Double.toString(materia.getFaltas()) + "%");

    holder.txtA.setText("A:" + Double.toString(materia.getA()));
    if (materia.getA() == 98.9)
        holder.txtA.setVisibility(View.GONE);

    holder.txtB.setText("B:" + Double.toString(materia.getB()));
    if (materia.getB() == 98.9)
        holder.txtB.setVisibility(View.GONE);

    holder.txtC.setText("C:" + Double.toString(materia.getC()));
    if (materia.getC() == 98.9)
        holder.txtC.setVisibility(View.GONE);

    holder.txtD.setText("D:" + Double.toString(materia.getD()));
    if (materia.getD() == 98.9)
        holder.txtD.setVisibility(View.GONE);

    holder.txtE.setText("E:" + Double.toString(materia.getE()));
    if (materia.getE() == 98.9)
        holder.txtE.setVisibility(View.GONE);

    holder.txtF.setText("F:" + Double.toString(materia.getF()));
    if (materia.getF() == 98.9)
        holder.txtF.setVisibility(View.GONE);

    holder.txtG.setText("G:" + Double.toString(materia.getG()));
    if (materia.getG() == 98.9)
        holder.txtG.setVisibility(View.GONE);

    holder.txtH.setText("H:" + Double.toString(materia.getH()));
    if (materia.getH() == 98.9)
        holder.txtH.setVisibility(View.GONE);

    holder.txtI.setText("I:" + Double.toString(materia.getI()));
    if (materia.getI() == 98.9)
        holder.txtI.setVisibility(View.GONE);

    holder.txtPFinal.setText("PF:" + Double.toString(materia.getPf()));
    if (materia.getPfinal() == 98.9)
        holder.txtPFinal.setVisibility(View.GONE);

    holder.txtPart.setText("Partic:"
            + Double.toString(materia.getPartic()));
    if (materia.getPart() == 98.9)
        holder.txtPart.setVisibility(View.GONE);

    holder.txtMF.setText("MF:" + Double.toString(materia.getMf()));
    if (materia.getMf() == 98.9)
        holder.txtMF.setVisibility(View.GONE);

    holder.txtMP.setVisibility(View.GONE);
    if (!materia.getForm().toLowerCase().contains("inform")) {
        holder.txtMP.setText("MP:"
                + String.format("%.2f", materia.getMP()));
        holder.txtMP.setVisibility(View.VISIBLE);
    }
    holder.txtMN.setText("MN:LongClick to simulate");
    holder.txtMN.setTextColor(Color.GRAY);
    if (materia.getFormula().toLowerCase().contains("inform"))
        holder.txtMN
                .setText("Form not avaiable");

    holder.txtForm.setText("Form not informed");
    if (!materia.getFormula().toLowerCase().contains("inform"))
        holder.txtForm.setText("Form:" + materia.getForm());

    return convertView;
} 
```

Tks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:46:55.547

只是意识到逻辑上缺少 else 造成了麻烦，感谢所有试图帮助的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:28:52.480

实施

```
 onSavedInstanceState(Bundle bundle); 
```

方法应该可以解决这个问题。您可以在此处找到有关它的信息 [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# c# - 直接 DB 连接显示所有记录，C#/ASP 删除单个记录

> ID：10835525
> 
> 赞同：0
> 
> 时间：2012-05-31T14:22:38.160
> 
> 标签：c#, asp.net, oracle

当我从 SQLDeveloper 运行查询时，它运行良好并检索所有记录。下面的代码在部门询问时检索除一条记录之外的所有记录。是否缓存了新创建的条目不会显示的各种查询？我使用的是 Oracle DataAccess 客户端，而不是已弃用的客户端。

代码：

```
using Oracle.DataAccess.Client;
using Oracle.DataAccess.Types;
string currentDatabase = universalDll.getDB();
        List<string> majors = new List<string>();

        try
        {
            OracleConnection conn = new OracleConnection();

            conn.ConnectionString = ConfigurationManager.ConnectionStrings[currentDatabase].ConnectionString;

            conn.Open();

            string sql =
                "SELECT DISTINCT description,code " +
                "FROM tablea a " +
                "JOIN tableb b " +
                "ON a.code = b.code ";

            sql += "ORDER BY b.description";

            OracleCommand executeQuery = new OracleCommand(sql, conn);
            executeQuery.CommandType = CommandType.Text;

            OracleDataReader dr = executeQuery.ExecuteReader();

            while (dr.Read())
            {
                ddlChooser.Items.Add(new ListItem(dr.GetString(0) + "(" + dr.GetString(1) + ")", dr.GetString(1)));
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:32:07.477

这就是问题所在：Oracle SQL Developer 有时要求您先提交更改，其他用户才能在数据库中看到它们。虽然我可以看到我的更改已登录，但 IIS 服务器却不能。一旦我提交了更改，它就可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:45:22.250

我在细则中看到 OracleDataReader 在第一条记录之前启动，因此 Read() 前进到新打开的数据集上的第一条记录。

我将修改我的声明，因为您的最终 Read() 返回 false 并且未添加到您的选择器中。

# python - 如何在指定时间段之间进行迭代

> ID：10835528
> 
> 赞同：-2
> 
> 时间：2012-05-31T14:22:47.683
> 
> 标签：python, datetime

我创建了一个带有字典的数据集，该字典具有值时间戳（在 Unix 纪元时间中）。我正在尝试创建一个通用代码，在午夜到 9:30 之间的任何一天，它都会执行一些操作。然后每隔一小时（所以 10:30,11:30 等......）它会输出一些东西直到 4:00。在午夜之前的 4:00 到 1 分钟，它会执行一些类似于午夜到 9:30 操作的操作。

这段代码在历史上运行了很多天、几个月和几年。幸运的是，每个文件都是一个单独的文件，所以我只关心这个时间戳值中的小时和分钟。我一直在尝试使用 datetime.hour 和 datetime.minutes 但这不起作用。而且我没有运气创建timedelta。

所以这就是数据的样子：

{'时间戳'：1336993535623，'值'：5}

{'时间戳'：1336981068031，'值'：6}

我正在做的基本上是这样的：

time1=obs.get('时间戳',0)

dt=datetime.datetime.fromtimestamp(int(time1)/1000)
obstimestamp=dt.strftime("%A, %d. %B %Y %I:%M%p")

然后我尝试使用这样的东西：

如果 obstimestamp.hour < 9 & obstimestamp.minute<30 做某事但这不起作用，因为 8:40 小于 9:30。

所以问题是双重的：第一个是如何在这些设定的时间间隔内循环遍历这个“时间戳”值。
第二个是我如何使用 Unix 时间戳来做同样的事情？（我认为这样做会更有效，更快）。

任何帮助表示赞赏。预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:26:57.817

为什么不使用这个服务 cron。可以配置为在你想要的分钟运行

# c# - 将 TextDecorations.Strikethrough 设置为 RichTextbox Windows Phone

> ID：10835533
> 
> 赞同：0
> 
> 时间：2012-05-31T14:23:22.360
> 
> 标签：c#, silverlight, windows-phone-7

在我的 Windows Phone 应用程序中，我想将 TextDecorations.Strikethrough 属性设置为 RichTextbox 元素，但我只能使用 - `run.TextDecorations = TextDecorations.Underline;`

但我非常需要删除线。我怎样才能拥有它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:01:26.143

不支持删除线。如果你需要这个，你必须自己在文本顶部画一条线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T11:19:23.290

不支持删除线，您必须自己滚动。这是一些示例代码，但它远非正确的实现。（它不支持包装等）

```
 <Grid>
                        <TextBlock  Name="txtTask" TextAlignment="Center"  VerticalAlignment="Center" Text="[Task]" Margin="0,0,2,1" Height="13.2" />
                        <Border x:Name="brdStrikeOut" BorderThickness="0,1,0,0" BorderBrush="{Binding ElementName=txtTask, Path=Foreground}"  VerticalAlignment="Center"/>
                    </Grid> 
```

干杯雅克

# database - 创建数据库文件期间出现 DBCA“ORA-27102：内存不足”错误

> ID：10835536
> 
> 赞同：2
> 
> 时间：2012-05-31T14:23:29.280
> 
> 标签：database, oracle, oracle11gr2

我在我们的 oracle 服务器上创建数据库时遇到问题。Oracle 安装成功。当我尝试通过数据库配置助手创建数据库时。进度条在 %2 处停止，内存使用量正在增加。

## 服务器

```
Intel Xeon CPU E7-4860 @2.27GHZ 2.26Ghz
64 GB Ram
Windows Server 2008 R2 (Service Pack 1) 64-Bit Operation System 
```

## 甲骨文

```
11g Release 2 (11.2) for Microsoft Windows x64 (64-Bit) 
```

{Oracle Home}\cfgtoollogs\dbca\trace.log_OraDb11g_home1 文件的内容

[http://pastebin.com/52Pcp5aL](http://pastebin.com/52Pcp5aL)

{Oracle Home}\cfgtoollogs\dbca\orcl\trace.log 文件的内容

[http://pastebin.com/ZT64jBfs](http://pastebin.com/ZT64jBfs)

这是“内存不足”警报之前的最后一个屏幕。 ![内存不足错误之前的最后一个屏幕](../Images/ddc601aca39f25fb9e05197a32f23ed9.png)

*   其他信息：
    *   Oracle 安装成功
    *   正在创建实例，数据库服务正在成功启动。
    *   {ORACLE_HOME}\oradata{UNIQUE_DATABASE_NAME}\ 为空！助手无法创建数据库二进制文件。
    *   我使用管理员帐户登录并禁用 UAC。
    *   以“以管理员身份运行”启动所有可执行文件
    *   每个人都可以编辑 oradata{UNIQUE_DATABASE_NAME} 文件夹。
    *   我已经多次重装操作系统和oracle服务器了:)

* * *

```
11g Release 2 (11.2) for Microsoft Windows x64 (64-Bit) still giving error.
11g Release 2 (11.1) for Microsoft Windows x64 (64-Bit) installed successfully. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-08T21:05:35.717

## 此说明来自 Oracle 文档“问题描述

当您的服务器具有非常大的未使用内存时，您正尝试使用 Oracle Database Configuration Assistant 创建一个新数据库。您选择了一种典型的数据库创建类型并收到以下错误：

ORA-27102: 内存不足

数据库创建失败。

## 解决方案说明

如果您愿意，请选择自定义安装并继续选择默认值，或者根据您的要求更改它们，直到您到达必须设置新创建数据库的初始化参数的页面。将 shared_pool_size 和 block_buffers 的数量降低到可以满足您的需求和硬件能力的合理和适当的数量，然后继续创建。数据库将被成功创建。这是一个简单的公式，可帮助您根据您将在 init.ora 中为初始化参数分配的值来计算 SGA 的大小：

( ( db_block_size * db_block_buffers ) + log_buffer + shared_pool_size + large_pool_size + java_pool_size ) / .9

## 解释

出现此问题的原因是，当您在服务器上安装了大内存并且该内存的大部分未使用时，Oracle 数据库配置助手将选择您未使用内存和交换空间的百分比（大约 30%）并计算SGA 使用这 30% 的未使用空间。这个计算出的百分比可能会超出您的服务器硬件能力，甚至可能超出您对新创建的数据库的要求。”

# jquery - 改进 JQuery 数据

> ID：10835541
> 
> 赞同：1
> 
> 时间：2012-05-31T14:23:44.077
> 
> 标签：jquery, optimization

您将如何改进这一点，这样我就不必继续重复了？我将需要创建 50 个选项。

```
var timer = 300;

function showLabels() {
    $('#machine ul#labels li span').animate({'top': '0px'},'slow');
}
function option1() {
    setTimeout(function() { $('#prize-details #prize-text h1').html("Header"); }, timer);
    setTimeout(function() { $('#prize-details #prize-text p').html("Text here"); }, timer);
    $('#machine ul#labels li#what').html('<span>1</span>');
    $('#machine ul#labels li#where').html('<span>2</span>');
    $('#machine ul#labels li#with').html('<span>3</span>');
    $('#machine ul#labels li#in').html('<span>4</span>');
    showLabels();
}
function option2() {
        setTimeout(function() { $('#prize-details #prize-text h1').html("Different header here."); }, timer);
        setTimeout(function() { $('#prize-details #prize-text p').html("Different text here"); }, timer);
        $('#machine ul#labels li#what').html('<span>5</span>');
        $('#machine ul#labels li#where').html('<span>6</span>');
        $('#machine ul#labels li#with').html('<span>7</span>');
        $('#machine ul#labels li#in').html('<span>8</span>');
        showLabels();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:28:47.513

由于您的两个功能相似，因此您可以尝试使用一个功能，例如

```
var timer = 300;

function showLabels() {
    $('#machine ul#labels li span').animate({'top': '0px'},'slow');
}

function option(header, para, span1, span2, span3, span4) {
    setTimeout(function() { 
         $('#prize-details #prize-text h1').html(header); 
         $('#prize-details #prize-text p').html(para); 
    }, timer);

    $('#what').html('<span>'+ span1 +'</span>');
    $('#where').html('<span>'+ span2 +'</span>');
    $('#with').html('<span>'+ span3 +'</span>');
    $('#in').html('<span>'+ span4 +'</span>');

    showLabels();
} 
```

**根据编辑**

如果每次迭代都有不同的文本，则使用不同的参数调用上述函数，例如：

```
option('Header', 'Text here', 1, 2, 3, 4);
option('Different Header', 'Different Text here', 5, 6, 7, 8); 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:27:06.187

是功能`option1`和`option2`一样的东西吗？我分不清2之间的区别。

你可以让它的可读性降低一点，但更短：

```
var timer = 300;

function showLabels() {
    $('#machine ul#labels li span').animate({'top': '0px'},'slow');
}
function option1() {
    setTimeout(function() { 
        $('#prize-details #prize-text h1').html("Header"); 
        $('#prize-details #prize-text p').html("Text here");
    }, timer);
    $('#machine ul#labels')
        .find('li#what').html('<span>1</span>').end()
        .find('li#where').html('<span>2</span>').end()
        .find('li#with').html('<span>3</span>').end()
        .find('li#in').html('<span>4</span>');
    showLabels();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:31:57.593

当只有文本不同时，比使用

```
function option(text){
....
setTimeout(function() { $('#prize-details #prize-text p').html(text); }
} 
```

不多，但我认为这将优化您的代码：

```
var temp="#machine ul#labels li"
$(temp+"#what")...
$(temp+"#whre") 
```

等等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:37:57.823

发挥它的作用。您可以使用对象来携带您的数据。

```
function option(data) {
    var prizeText = $("#prize-details #prize-text");
    var machineLabels = $("#machine ul#labels");
    setTimeout(function() { $('h1',prizeText ).html("Header"); }, timer);
    setTimeout(function() { $('p',prizeText ).html("Text here"); }, timer);
    for(var n in data)
    {
        $(n).html('<span>' + data[n] + '</span>');
    }
    showLabels();
}

option({
    '#what' : '1'
    '#where' : '2'
    '#in' : '3'
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T14:45:09.117

```
for(var i=0;i<50;i++){
    new Function(){
        "function option" + i + "() {
        setTimeout(function() { 
           $('#prize-details #prize-text h1').html('"+ myHeaders[i] +"'); 
        }, timer);
        setTimeout(function() { 
           $('#prize-details #prize-text p').html('"+myText[i]+"'); 
        }, timer);
        $('#machine ul#labels li#what').html('<span>1</span>');
        $('#machine ul#labels li#where').html('<span>2</span>');
        $('#machine ul#labels li#with').html('<span>3</span>');
        $('#machine ul#labels li#in').html('<span>4</span>');
        showLabels();
        };option"+i+"();";
    }
} 
```

也许。它很脏但仍然是一个解决方案:)

# javascript - Android/IOS 上的实时 Javascript 合成器。HTML5 音频标签不会接受注入的数据

> ID：10835543
> 
> 赞同：1
> 
> 时间：2012-05-31T14:23:48.333
> 
> 标签：javascript, android, html, audio, synthesizer

我有一个 Javascript 应用程序，它可以创建一些音频并播放它们。音调生成为 WAV 文件，然后像这样注入......

```
<audio id="player" controls autobuffer="autobuffer" />
<script type="text/javascript" charset="utf-8">
  document.getElementById("player").src = wavData;
  document.getElementById("player").play();
</script> 
```

这适用于 PC 上最新版本的 Chrome 或 Firefox，但不适用于我尝试过的任何移动设备，包括 Android 4.0.3、Android 2.3 和 iPhone。

另一个适用于桌面但不适用于 Android 设备的 Javascript 合成器示例是这个“Morning Star”合成器。 [http://bitterspring.net/ms/morningstar/](http://bitterspring.net/ms/morningstar/)

*在 Android上*运行的 HTML5 音频示例是这个测试页面。[http://textopia.org/androidsoundformats.html](http://textopia.org/androidsoundformats.html)。

有解决方法吗？我想要一个完全基于 HTML/Javascript 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:33:46.520

MorningStar 作者在这里：我的合成器*不*使用任何`<audio>`标签，它使用 Web Audio API。

我还没有在 Android 设备上测试过它（还），但是如果现有的 Android 浏览器不支持 Web Audio API，那么合成器就无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:37:40.443

Android 2.3 对标签没有很好的支持。一种解决方案是在 android 上使用 flash。

这可能会有所帮助。 [http://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/)

# c# - Linq To Sql：检索未附加子项的父实体

> ID：10835544
> 
> 赞同：1
> 
> 时间：2012-05-31T14:24:20.243
> 
> 标签：c#, .net, linq-to-sql

我有一个与大量子实体相关联的父实体。

linq to sql 有没有办法只获取父实体而不附加其他子实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:29:43.737

> linq to sql 有没有办法只获取父实体而不附加其他子实体？

LINQ to SQL 默认使用延迟加载。除非您遍历它们，否则它不会加载子集合。

要关闭延迟加载，请设置`DataContext.DeferredLoadingEnabled`为 false。

# javascript - 一个变量声明中多个运算符的重要性

> ID：10835548
> 
> 赞同：1
> 
> 时间：2012-05-31T14:24:29.343
> 
> 标签：javascript

在这个测试页面是否被缓存的[答案中，我看到了这个变量声明。](https://stackoverflow.com/a/4433812/1252748)

```
var isCached = currentCookie !== null; 
```

`=`和`!==`运算符放在一个语句中的意义是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:25:39.390

该表达的意思是：

*`isCached`时为真`currentCookie !== null`，否则为假*

你应该像这样读

```
var isCached = (currentCookie !== null) 
```

或更详细地等于

```
var isCached;
if (currentCookie !== null) {
   isCached = true;
}
else {
   isCached = false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:26:00.433

该片段等效于：

```
var isCached = (currentCookie !== null); 
```

换句话说，`isCached`设置为`true`当且仅当`currentCookie`严格不等于空引用。

# sqlite - Sqlite3 - 将参数传递给准备好的语句

> ID：10835553
> 
> 赞同：3
> 
> 时间：2012-05-31T14:24:53.877
> 
> 标签：sqlite

我已经准备好声明，我想从命令行工具进行测试，而无需“手动”传递参数。

示例 sql：

```
 SELECT * FROM TABLE WHERE X = ? AND Y = ? 
```

有没有一种传递参数的方法，以便可以使用给定的值执行 SQL，例如： SQL bind(a,b,c) ？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T04:37:16.763

编辑：不知道你在哪里运行这个，但对于那些感兴趣的人来说，这是一个 Android 解决方案：

如果我正确理解您的问题，您希望将命令行中的值传递到 SQL 语句中以测试结果。这有点工作，但可行：

adb 中有将 Intent 发送到特定 Activity 的功能，其中可能包括 Extras。如果您总是有固定数量的参数，您可能会编程一个 Activity 以使用包含 Extras 的 Intent 启动并从命令行传递它。输入命令（提示音乐）：`adb shell am start`。有关此命令的更多信息，请参阅[文档](http://developer.android.com/tools/help/adb.html#am)或[本教程](http://www.anddev.org/using_the_am-tool_start_activities-intens_from_a_shell-t368.html)

这是一些示例代码：

```
public class MainActivity extends Activity {

    private final String EXTRA1 = "com.example.sample.EXTRA1";
    private final String EXTRA2 = "com.example.sample.EXTRA2";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ...

        String qparam1 = null;
        String qparam2 = null;
        Intent calledBy = getIntent();

        if (calledBy.hasExtra(EXTRA1)) qparam1 = calledBy.getStringExtra(EXTRA1);
        if (calledBy.hasExtra(EXTRA2)) qparam2 = calledBy.getStringExtra(EXTRA2);
        ... 
```

此时你现在有几个选项，因为你有你的参数，你可以运行一个 normal `getContentResolver().query()`，创建选择并将参数作为选择参数传递：

```
String selection = "WHERE x=? AND Y=?";
String[] args = new String[]{qparam1, qparam2};
getContentResolver().query(uri, projection, selection, args, null); 
```

`int`（如果您有或`long`args，请注意这样做。请参阅[这篇文章](https://stackoverflow.com/questions/18746149/android-sqlite-selection-args-with-int-values)。）

您还可以选择创建预编译语句。一些预编译语句只会给你一个 1x1 的结果，所以它可能会受到限制，这取决于你期望的输出。

```
SQLiteDatabase db; // assume already initialized
SQLiteStatement statement = db.compileStatement("SELECT * FROM table WHERE x=? AND y=?");

statement.bindAllArgsAsStrings(new String[]{qparam1, qparam2});
// now run some kind of execute command, as per SQLiteStatement documentation 
```

[SQLiteStatement 文档](http://developer.android.com/reference/android/database/sqlite/SQLiteStatement.html)

呸。好的，最后，`adb shell am start`用于发送数据。根据文档，您可以执行以下操作

```
> adb shell am start -n com.example.sample/.MainActivity -e com.example.sample.EXTRA1 first -e com.example.sample.EXTRA2 second 
```

如果一切按计划进行，它应该启动您的活动，将附加内容传递到您的查询中，然后运行它。然后，根据您的输出，剩下的就是确定将输出放在哪里，可能是您以后可以检索的文件。

祝你好运！

# firefox - Firefox 扩展如何检查网页的特定部分是否在视图中？

> ID：10835556
> 
> 赞同：0
> 
> 时间：2012-05-31T14:25:10.013
> 
> 标签：firefox, gwt, firefox-addon

假设我有一个不位于网页顶部的 div 元素，即需要向下滚动才能查看它（当然，这也取决于用户的页面分辨率）。

我需要知道的是用户是否***看到***了那个 div 元素。

因此，基本上我的问题可以这样提出，

是否可以使用扩展程序动态了解正在查看的网页*部分。*如果是这样，怎么做？

PS：我正在使用 GWT 构建应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:09:57.993

与使用简单的 javascript 所做的相同：[LINK](https://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport)

唯一的区别是，该对象`window`意味着不同的东西（在扩展上它的字面意思是一个窗口）。[您可以使用document.defaultView](https://developer.mozilla.org/en/DOM/document.defaultView)获取窗口对象。

# php - Twig 默认过滤器覆盖定义的模板变量？

> ID：10835557
> 
> 赞同：2
> 
> 时间：2012-05-31T14:25:10.373
> 
> 标签：php, xml, symfony, twig

我在树枝模板中有以下构造来创建 XML：

```
{# insuranceNode.xml.twig #}
<insurance>
    <description></description>
    ...

    {% if dOptions|default(true) %}
    <options>
        {% for option in insurance.options %}
        {% include 'optionNode.xml.twig' with {
            'option': option,
            'dInsurances': false
        }%}
        {% endfor %}
    </options>
    {% endif %}

</insurance>

{# optionNode.xml.twig #}
<option>
    <description></description>
    ...

    {% if dInsurances|default(true) %}
    <insurances>
        {% for insurance in option.insurances %}
        {% include 'insuranceNode.xml.twig' with {
            'insurance': insurance,
            'dOptions': false
        }%}
        {% endfor %}
    </insurances>
    {% endif %}

</options> 
```

如您所见，两个模板部分默认包含彼此（`{% if dOptions|default(true) %}`和`{% if dInsurances|default(true) %}`）。如果没有正确停止，它将导致无限循环，并且应用程序会因最大嵌套级别的致命错误而中断。

当部分 optionNode 包含在 insuranceNode 中时，模板 var`dInsurances`设置为 false，这应该将`dInsurances`optionNode 中的 var 设置为 false。然而，由于某种原因，optionNode 仍然更喜欢 default(true)，`dInsurances`而不是由 insuranceNode 设置的模板变量。

如果从`dInsurances`optionNode 中删除 default() 过滤器，它会按预期工作。此外，当`dInsurances`设置为 true 时，它​​会按预期崩溃。

我是否误解了 default() 过滤器的机制？还是应该在模板中继承通过 include 指令传递的变量？

任何帮助深表感谢。提前致谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T18:11:05.067

从树枝文档：

> 如果值未定义或为空，则默认过滤器返回传递的默认值，否则返回变量的值

因此，如果您传递 false，twig 将采用默认值。

有2个修复：

1.  使用带有负值的“not”

    ```
    {% if not skipOptions %}
    ...
    'skipInsurances': true 
    ```

2.  使用“定义”测试：[http ://twig.sensiolabs.org/doc/tests/defined.html](http://twig.sensiolabs.org/doc/tests/defined.html)

    ```
    {% if dOptions is not defined or dOptions %} 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T07:48:40.780

第三个修复是使用空合并运算符：

```
{% if dOptions ?? true %} 
```

[在1.24.0](https://github.com/twigphp/Twig/blob/1.x/CHANGELOG)版本中引入。

# regex - 需要重写 HTTP_HOST 和路径

> ID：10835559
> 
> 赞同：0
> 
> 时间：2012-05-31T14:25:12.867
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我需要能够同时重写 HTTP_HOST 和路径：

```
 http://playground.emptycabinmedia.com/<category name>/<post name> to http://emptycabinmedia.com/<post name> 
```

我读[了这篇文章](https://stackoverflow.com/questions/1366736/rewrite-both-domain-and-path)，但似乎对我不起作用。到目前为止，这是我的 .htaccess 文件中的内容：

```
RewriteEngine on
RewriteRule ^playground.emptycabinmedia.com/(.*)/(.*)$ emptycabinmedia.com/$2 [R=301] 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:27:32.607

您需要一个类似于`http://`重写 url 的协议，以表明您没有重写到相对 url：

```
RewriteEngine on
RewriteCond %{SERVER_NAME} ^playground.emptycabinmedia.com$
RewriteRule ^/(.*)/(.*)$ http://emptycabinmedia.com/$2 [R=301] 
```

# oracle - 一种在枚举数据之前减少结果集的方法

> ID：10835566
> 
> 赞同：3
> 
> 时间：2012-05-31T14:25:38.403
> 
> 标签：oracle, oracle11g, resultset, database-performance

我有一个包含几百万行数据的 ORACLE 表。属性之一是 DATE 类型。我需要在函数中使用该 DATE 属性对该表进行选择。该函数告诉我哪些行符合我的条件。问题是当我运行这个查询时，它必须通过函数（显然）传递表中的每一行以确定哪些行匹配。这一点表现都不好。我正在尝试找到一个好的解决方案来使这个过程执行得更快。

以下是我要尝试的几个想法：

1.  创建一个包含数据子集的视图，然后将这些行传递给函数。
2.  将数据的子集转储到新的单独表中，然后将这些行传递给函数。
3.  使用数据子集创建一个物化视图，然后将这些行传递给函数。

我还应该提到，我可以在 WHERE 子句中添加的内容不多，可以减少结果，只有这个 DATE 和函数的使用。

对这些或其他人成功使用的东西的任何意见都会很棒。如果可能，SQL 解决方案将是我的首选。

**编辑** 功能：

```
FUNCTION add_business_days (in_date IN DATE, in_number_of_days IN NUMBER,in_skip_fridays IN number DEFAULT 0,in_skip_bank_holidays IN NUMBER DEFAULT 0)
  RETURN DATE
  IS
    v_return_date DATE := in_date;
  BEGIN
    FOR i IN 1..in_number_of_days
    LOOP
      v_return_date := next_business_day(v_return_date,in_skip_fridays,in_skip_bank_holidays);
    END LOOP;
    RETURN v_return_date;
  END; 
```

该函数是这样调用的：

```
SELECT * 
  FROM tableA 
 WHERE tableA.begin_dt < TRUNC(SYSDATE)
   AND CUBS_DATE_PKG.add_business_days(file_dt,15) = TRUNC(SYSDATE) 
```

函数 next_business_day

```
FUNCTION NEXT_BUSINESS_DAY (in_date DATE) 
RETURN DATE IS
    v_next_day DATE;
    --set up the holidays
    c_new_years_day  CONSTANT DATE := holiday_observed(TRUNC(in_date,'YYYY'));
    c_next_new_year  CONSTANT DATE := holiday_observed(TRUNC(ADD_MONTHS(in_date,12),'YYYY'));
    c_mlk_day        CONSTANT DATE := first_weekday(TRUNC(in_date,'YYYY'),'MONDAY') + 14;
    c_presidents_day CONSTANT DATE := first_weekday(ADD_MONTHS(TRUNC(in_date,'YYYY'),1),'MONDAY')+14;
    c_memorial_day   CONSTANT DATE := first_weekday(ADD_MONTHS(TRUNC(in_date,'YYYY'),5),'MONDAY')-7;
    c_july_4         CONSTANT DATE := holiday_observed(TO_DATE('04-JUL-'||TO_CHAR(in_date,'YYYY'),'DD-MON-YYYY'));
    c_pioneer_day    CONSTANT DATE := holiday_observed(TO_DATE('24-JUL-'||TO_CHAR(in_date,'YYYY'),'DD-MON-YYYY'));
    c_labor_day      CONSTANT DATE := first_weekday(ADD_MONTHS(TRUNC(in_date,'YYYY'),8),'Monday');
    c_veterans_day   CONSTANT DATE := holiday_observed(TO_DATE('11-NOV-'||TO_CHAR(in_date,'YYYY'),'DD-MON-YYYY'));
    c_thanksgiving   CONSTANT DATE := first_weekday(ADD_MONTHS(TRUNC(in_date,'YYYY'),10),'THURSDAY')+21;
    c_christmas      CONSTANT DATE := holiday_observed(TO_DATE('25-DEC-'||TO_CHAR(in_date,'YYYY'),'DD-MON-YYYY'));

  BEGIN
    IF LTRIM(RTRIM(TO_CHAR(in_date,'DAY'))) IN ('FRIDAY','SATURDAY','SUNDAY')
    THEN
      v_next_day := NEXT_DAY(in_date,'MONDAY');
    ELSE
      v_next_day := in_date + 1;
    END IF;

    v_next_day := TRUNC(v_next_day);
    --now, we have to check to see if v_next_day falls on a holiday
    IF v_next_day IN (c_new_years_day, c_next_new_year, c_mlk_day, c_presidents_day,
                      c_memorial_day,c_july_4, c_pioneer_day, c_labor_day,
                      c_veterans_day,c_thanksgiving, c_christmas)
    THEN
      v_next_day := next_business_day(v_next_day);
    END IF;
    RETURN TRUNC(v_next_day);
  END next_business_day; 
```

**解决方案：**

我在这里输入解决方案是因为其他人没有给出确切的解决方案，但是，@JustinCave 给出了正确的概念。它归结为使函数具有确定性。所以我只是将现有函数包装在一个新的、确定性的函数中。然后我在必要的表上为这个函数创建了一个索引。它现在运行不到一秒钟，从 22 分钟开始。此外，我确实使用@Sebas 公式来减少结果集。

```
CREATE OR REPLACE FUNCTION deter_add_business_days (p_date DATE,p_days NUMBER)
   RETURN DATE
   DETERMINISTIC
IS
BEGIN
   RETURN cubs_owner.cubs_date_pkg.add_business_days (p_date, p_days);
END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:29:37.460

函数是确定性的吗？如果是这样，它是否被标记为确定性？它可以是表上基于函数的索引的一部分吗？

如果您可以识别可以使用的数据子集，而不是查询整个表，这意味着您可以在查询中应用一些额外的谓词。无论您应用什么条件来生成视图/物化视图/单独的表，似乎都适合作为谓词添加到您的查询中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:04:26.330

功能 next_business_day：

*   IF LTRIM(RTRIM(TO_CHAR(in_date,'DAY'))) IN ('FRIDAY','SATURDAY','SUNDAY') => 跳过 LTRIM/RTRIM？由于您正在通过 oracle 处理预先格式化的天数，因此您可能不需要删除空格

*   返回TRUNC（v_next_day）；=> TRUNC 不是必需的，你只是在上面做了几行

好吧，这是一个很小的事情，但每百万倍增......

对于查询，我建议想出这个小技巧：由于您只有 11 个假期，您可以确定返回的行必须`file_dt`低于或等于 TRUNC(SYSDATE) + 7*(15+11)/5 天. pl/sql 块可能如下所示：

```
DECLARE
    TYPE T_IDS IS TABLE OF tableA.id%TYPE;
    arrDays T_IDS;
    iDays NUMBER := 15;
BEGIN
    --reduce the amount of rows the gross way:
    SELECT tableA.id BULK COLLECT INTO arrDays 
      FROM tableA 
     WHERE tableA.begin_dt < TRUNC(SYSDATE)
       AND tableA.file_dt <= (TRUNC(SYSDATE) + FLOOR(7*(iDays+11)/5)));

    --use the reduced recordset against the businessdays validation to retrieve
    --correct rows:
    --here you ahve to store/process the results the way you want
    SELECT t2.* 
      FROM TABLE (CAST(arrDays) AS T_IDS) t1
        INNER JOIN tableA t2 ON t1.column_value = t2.id
     WHERE CUBS_DATE_PKG.add_business_days(t2.file_dt, iDays) = TRUNC(SYSDATE);
END; 
```

我根本没有测试它，对可能的错误表示歉意。干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T19:39:23.050

拥有一张公共假期表和一张根据一年中的每一天给出下一个工作日的表格，这将花费很少的钱。然后，您的查询可能会包含对该表的廉价连接，而不再包含其他功能。

# c# - 检测 DataGridViewComboBoxCell 中相同项目的选择

> ID：10835569
> 
> 赞同：2
> 
> 时间：2012-05-31T14:25:51.277
> 
> 标签：c#, winforms, datagridview, datagridviewcomboboxcell

我在 C# winform 应用程序中有一个带有 datagridviewcomboboxcell 的 datagridview。由于 CellValueChanged 事件触发，我很容易捕捉到何时选择了新项目。但是，我希望能够检测到组合框何时打开，但用户选择了已选择的相同值。我怎样才能捕捉到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:14:20.253

`EditingControlShowing`事件和一些组合框事件的组合起作用¹。

`EditingControlShowing`允许我们访问嵌入式组合框控件：

```
dataGridView1.EditingControlShowing += new 
    DataGridViewEditingControlShowingEventHandler(dataGridView1_EditingControlShowing);

void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    ComboBox control = e.Control as ComboBox;

    if (control != null)
    {            
        control.DropDown += new EventHandler(control_DropDown);
        control.DropDownClosed += new EventHandler(control_DropDownClosed);
    }
} 
```

我在表单中添加了一个私有类级别变量来存储组合框选定的索引。

```
void control_DropDown(object sender, EventArgs e)
{
    ComboBox c = sender as ComboBox;

    _currentValue = c.SelectedIndex;
}

void control_DropDownClosed(object sender, EventArgs e)
{
    ComboBox c = sender as ComboBox;
    if (c.SelectedIndex == _currentValue)
    {
        MessageBox.Show("no change");
    }
} 
```

^(1.)每次打开和关闭组合框时都会触发此解决方案 - 如果您想要其他内容（例如当组合框提交更改到网格时），请更新您描述确切行为的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:33:41.553

尝试查看事件： - DropDown - DropDownClosed

# magento - 将 Magento 更改为新服务器，现有产品的图像不会显示在前端

> ID：10835574
> 
> 赞同：1
> 
> 时间：2012-05-31T14:26:16.090
> 
> 标签：magento

我已将 Magento 网站移至新服务器以优化速度。所有图像似乎都被图像占位符替换。我尝试将媒体权限设置为 777，当我删除缓存媒体文件夹并刷新时，会自动创建一个新的缓存文件夹，但里面只有占位符图像。我刷新了图像缓存，在 magento 后端重新索引，但仍然没有希望。我现在该怎么办？

有些东西可能会有所帮助：

. 用图像创建新产品很好。刷新缓存，仅创建占位符图像。尝试使用magento-cleanup.php，没有希望。试图删除媒体文件夹中的 .htaccess。产品的图像在媒体文件夹中，而不是在缓存文件夹中。Magento 只查看图像的缓存文件夹:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:47:24.807

我认为您的服务器上的“gd library”尚未安装，所以请联系您的服务器......因为这个库用于图像......在“gd library”重新索引并清除所有缓存并授予媒体文件夹的完全权限和缓存位于产品文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T13:48:40.933

按照下面的说明

1.  转到“缓存存储管理”并单击“刷新 Magento 缓存”、“刷新缓存存储”、“刷新目录图像缓存”和“刷新 JavaScript/CSS 缓存”
2.  转到“索引管理”，单击“全选”，然后从下拉列表中选择“重新索引数据”并提交。

执行此过程 3-4 次，然后使用 CTRL+F5 查看前端。现在图像将出现。确保 htaccess 处于工作模式。

这个答案也发布在[Magento 图像不显示在前端](https://stackoverflow.com/questions/2422481/magento-images-not-showing-on-front-end/17427279#17427279)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T01:43:55.020

我以前遇到过这个问题，这是因为我没有移过`/media/catalog/product/cache/`.

确保该文件夹在您的服务器上，并且媒体文件夹具有适当的权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T15:30:13.357

您将需要重建所有索引以及在管理区域中刷新缓存。此外，安装一个新的浏览器，如歌剧，并重新访问您的网站。在使用当前活动站点的副本在开发服务器上工作时，我遇到了类似的问题。并且在过去一年中完成的三个移动/重新部署期间也是如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-02T11:16:28.523

我过去也遇到过这个问题，当我将本地的 magento 站点移动到新服务器时，前端和后端的图像也会突然消失。经过非常调试后，我得到了以下解决方案。

就我而言，我去了 /public_html/media/catalog/product 并将所有大写字母重命名为小写。

如果您的所有目录都有小写字母，则将其重命名为大写字母。

在此之后，我的所有产品都按原样显示。

我希望它会帮助你。

答案来自：[http ://chandreshrana.blogspot.in/2015/10/product-images-not-display-after-move.html](http://chandreshrana.blogspot.in/2015/10/product-images-not-display-after-move.html)

# ios - self.navigationController.navigationBar.hidden = TRUE 不适用于一个 UIViewController

> ID：10835577
> 
> 赞同：3
> 
> 时间：2012-05-31T14:26:18.570
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, hidden

在我的应用程序中，我至少有十几个`UIViewController`，其中一些显示导航栏，其中一些不显示。除一个控制器外，一切都正常。

我从另一个没有显示导航栏的屏幕导航到此屏幕。在这一点上，我需要显示导航栏，所以在我的代码中`viewWillAppear`有以下代码：

```
[self.navigationController setNavigationBarHidden:NO animated:YES]; 
```

当我使用调试器单步执行代码时，我会通过这一行，但是它只是被忽略了，并且导航栏没有显示。这似乎是模拟器和实际设备（带有 iOS 5.1.1 的 iPhone 4S）上的问题。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:36:54.557

我想，我又遇到了另一件苹果“该死的”的事情。

除了在`viewWillAppear`方法中包含该行之外，我还将其添加到`viewDidLoad`：

```
self.navigationController.navigationBarHidden = NO; 
```

现在它可以按我的意愿工作。有趣的是，如果我删除这两行中的任何一行，它都不起作用；它仅适用于两条线。

无论如何，它现在有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-19T00:22:15.200

我有一个类似的问题。事实证明，我要离开的视图控制器 `[self.navigationController setNavigationBarHidden:NO animated:YES];`在它的`viewWillDisappear`方法中具有，这导致它在过渡时动画化，而不管其中的内容如何`viewWillAppear`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T08:50:49.590

也许你有这样的方法：

```
-(void)viewWillAppear:(BOOL)animated
{
  [self.navigationController setNavigationBarHidden:NO animated:YES];
  [super viewWillAppear:animated];
} 
```

所以移动 [super ...] 线，把它改成这个（在你的 RootViewController 和目标视图控制器中）：

```
-(void)viewWillAppear:(BOOL)animated
{
   [super viewWillAppear:animated];
   [self.navigationController setNavigationBarHidden:NO animated:YES];
} 
```

这对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T14:29:22.490

该行将更改*工具栏*的可见性，而不是*导航栏*。

# c - 相同的指针在不同的编译器中显示不同的大小

> ID：10835579
> 
> 赞同：-1
> 
> 时间：2012-05-31T14:26:23.560
> 
> 标签：c, pointers, sizeof

我在 Turbo C 编译器和 GNU 编译器上运行了以下代码：

```
int main()
{
   char *cptr;
   printf("%d\n",sizeof(cptr));
   return 0;
} 
```

我在 Turbo C 运行时输出了“ **2** ”，在 GNU 编译器运行时输出了“ **4 ”。**我在 64 位机器上。谁能向我解释这种差异背后的事实？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:28:33.450

老式的 Turbo C 可能是为 16 位 DOS 机器构建的，默认情况下它具有小指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T18:50:58.153

如果我们考虑基于 DOS 的 Turbo-C 编译器，地址被限制在 0x0000 到 0xFFFF (0-65535) 的范围内，因此指针的大小为 2 个字节。另一方面，如果我们考虑 32 位 GNU 编译器，那里会创建数百万个地址，因此大小为 4 个字节。

指针的大小仅取决于您使用的 C 编译器，而不取决于操作系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T14:28:40.853

Turbo C 是 16 位的，所以`sizeof(cptr)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T14:30:45.213

仅仅因为您的机器本身是 64 位的，并不意味着您可以在其上运行的每一位软件都会利用它。64 位机器（和支持软件）被设计为向上兼容 32 位。因此，为 32 位机器编写的软件能够运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T14:52:01.570

对于任何给定的指针类型，不同的平台可能具有不同的大小。这一切都取决于底层内存架构和任何给定进程可用的地址空间。永远不要假设指针类型总是有一个特定的大小。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T14:35:30.820

基本上，指针的大小是指针使用的整数类型的大小。准确地说，32 位平台上的 32 位 int，64 位平台上的 64 位 int（long long）。但要小心，它还取决于您使用的编译器。这意味着，即使在 64 位平台上，如果您使用 32 位编译器（甚至 16 位），指针类型仍将使用 32 位 int。从你的结果看，你的 Turbo C 编译器肯定不是 64 位的（应该是 16 位的，如果我没记错的话）。虽然您的 gcc 编译器是真正的 64 位。

# ios - 如果连接保持打开状态（即 Comet）并且电话/短信到达 CDMA 网络，NSURLConnection 将如何响应？

> ID：10835583
> 
> 赞同：1
> 
> 时间：2012-05-31T14:26:38.857
> 
> 标签：ios, nsurlconnection, comet, cdma

如果我的应用程序使用 NSURLConnection 在 CDMA 网络上保持连接打开（以实现服务器推送），那么如果用户拨打电话或接收 SMS 等会发生什么（即同时数据和语音连接是不可能的） . 大概 didFailWithError 会被调用，但我特别想知道是否有可能确定失败的具体原因是这些情况。

# php - 为 XML 导出创建多维对象

> ID：10835584
> 
> 赞同：-1
> 
> 时间：2012-05-31T14:26:45.520
> 
> 标签：php, javascript, jquery, json

我正在导入一个包含大量发票数据的 csv 文件。这些数据需要根据供应商 ID 组合在一起，以显示每个供应商的标题以及该供应商 ID 的所有发票的总和；然后在其下方显示每张单独的发票。该项目的目标是导入 CSV，向用户显示数据，允许通过选择框更改某些值，然后单击按钮导出到 XML。XML 的结构与 HTML 类似，其中每组发票首先显示某些公共数据，然后是汇款数据。为了实现这一点，我试图以某种方式构造对象，以帮助我使用此[http://goessner.net/download/prj/jsonxml/](http://goessner.net/download/prj/jsonxml/)将其正确转换为 XML 。

问题：后两个付款需要组合在一起，我希望为每行详细数据创建一个数组，然后将其添加到主对象的 PmtDetail 属性中。目前，此代码仅广告第一行而忽略其余部分。

CSV 片段（我不包括此处代码中使用的所有行）

```
 ID         CardCode   payment_sum    amount     
 1610165    BENV5271    100            100 
 1609026    BENV5635    509.85         287.33
 1609025    BENV5635    509.85         222.52 
```

JSON

```
 [{"DocNum":"1610165","CardCode":"BENV5271","InvPayAmnt":"100.00","PmntDate":"2012-03-29","payment_sum":"100.00"},
 {"DocNum":"1609026","CardCode":"BENV5635","InvPayAmnt":"287.33","PmntDate":"2012-03-29","payment_sum":"509.85"},  
 {"DocNum":"1609025","CardCode":"BENV5635","InvPayAmnt":"222.52","PmntDate":"2012-03-29","payment_sum":"509.85"}] 
```

jQuery

```
 $(document).ready(function() {
    $.getJSON('CSV.php', function(data) {

    var prevCardCode = '';
    var newDiv; var NewDiv2;
var PaymentFormat;

    $.each(data, function(index, element) { //looping once to display header info such as sum
        XMLObject = []; // Creating a new object for each row     

        if (element['CardCode'] != prevCardCode) {

            XMLObject.Vendor_Sum = element['payment_sum'];
            XMLObject.Name1 = element['CardName'];
            XMLObject.Addr1 = element['Address'];

            console.log(XMLObject);

            newDiv = $('<div/>').addClass('row').appendTo('#showdata');
            $('<div class="sum_field">' + 'Total: ' + element['payment_sum'] + '</div>').appendTo(newDiv);

                $('<div class="options">Payment Format: <select name="Payment_Format" id="Payment_Format"><option value="CTX" selected="selected">Company to Company</option><option value="PPD">Company to Person</option></select> </div><div id="Selected_Format"></div>').appendTo(newDiv);

                XMLObject.paymentFormat = $('select#Payment_Format').val();;

                $('select#Payment_Format').change(function(){
                    PaymentFormat = $(this).val();
                    XMLObject.paymentFormat = PaymentFormat;
                });

        }

        newDiv2 = $('<div/>').addClass('sub_row').appendTo(newDiv);

        prevCardCode = element['CardCode'];

        $.each(element, function(key, value) { looping 2nd time to display the detail info
            XMLObjectDetail = {};   // Creating an array for each row of detail info

            XMLObjectDetail['TotalCurAmount'] = element['InvPayAmnt']; 
            XMLObjectDetail['NetCurAmount'] = element['InvPayAmnt'];

                   $('<div class="field">' + value + '</div>').appendTo(newDiv2);
                   XMLObject.PmtDetail =  XMLObjectDetail;
             });      
         });
     });
  }); 
```

PHP

```
 <?php 
  if (($handle = fopen('upload/BEN-new.csv', "r")) === FALSE) {
    die('Error opening file'); 
 }

 $headers = fgetcsv($handle, 1024, ',');
 $complete = array();

while ($row = fgetcsv($handle, 1024, ",")) {
       $complete[] = array_combine($headers, $row);
}
    fclose($handle);

    echo json_encode($complete); 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:36:54.873

一些想法：

*   `$.each(data, ... //looping once to display header info such as sum`您不会在任何地方创建总和。此外，这是唯一一个遍历所有`data`行的循环。
*   `XMLObject = []; // Creating a new object for each row`- 不，您正在创建一个数组。您确实应该创建一个 Object ( `{}`)，因为您将它用作对象。
*   `XMLObject =...`. 您在`var`这里缺少关键字。每次迭代都创建一个新对象，但将它们中的每一个都分配给同一个全局变量。这就是`#Payment_Format`更改处理程序只会更改最后创建的对象的格式的原因 - 当前由“ `XMLObject`”引用的对象。
*   `$('...<select name="Payment_Format" id="Payment_Format">...')`您正在创建一个每次迭代都有一个*id的选择。*你认为 id 将如何是唯一的？这也是为什么`('select#Payment_Format')`不会选择当前迭代中创建的元素的原因。
*   `$.each(element... looping 2nd time to display the detail info`不，这不是第二个循环，而是一个将迭代当前属性的`element`循环 - 该循环将应用于每个迭代的`data`行。
*   `XMLObjectDetail = {}; // Creating an array for each row of detail info`- 不，你正在创建一个对象。同样，您缺少`var`关键字。
*   （编辑）`XMLObject.PmtDetail = XMLObjectDetail;`- 你在这里覆盖每次迭代元素的“PmtDetail”属性。那不应该是您附加到的数组吗？
*   在循环代码的末尾，您有一个`XMLObject`, 包含有关当前行的数据。你不想用它做点什么，例如将它推到一个行对象数组上吗？

好的，我想现在我得到了你想要达到的目标。一个合适的结构可能是：

```
[ {
    "CardCode":"BENV5271"
    "details": [ {
        "DocNum": "1610165",
        "InvPayAmnt": "100.00",
        "PmntDate": "2012-03-29"
      } ],
     "payment_sum": "100.00"
   }, {
     "CardCode": "BENV5635",
     "details": [ {
         "DocNum": "1609026"  
         "InvPayAmnt": "287.33",
         "PmntDate": "2012-03-29"
       }, {
         "DocNum": "1609025",
         "InvPayAmnt": "222.52",
         "PmntDate": "2012-03-29"
       } ],
     "payment_sum": "509.85"
    } ] 
```

或相同，就像一个对象（键值映射）通过 id ：

```
{
    "BENV5271" : {
        "details": {
            "1610165": {
                 "InvPayAmnt": "100.00",
                 "PmntDate": "2012-03-29"
             }
         }
         "payment_sum": "100.00"
     },
     "BENV5635": {
         "details": {
             "1609026": {
                 "InvPayAmnt": "287.33",
                 "PmntDate": "2012-03-29"
             },
             "1609025": {
                 "InvPayAmnt": "222.52",
                 "PmntDate": "2012-03-29"
             }
        },
        "payment_sum": "509.85"
    }
} 
```

您也可以将 JSON 的数字类型用于数字值，而不是字符串 :-) 您应该立即从数据库中创建该结构。如您所见，CSV 不是它的最佳表示，并且由于 JSON 和 XML 能够表示它，您不应该使用 SQL->CSV->JSON(table)->JSON(structured)->XML，而是使用 SQL- >JSON（结构化）->XML 或者更好的 SQL->XML。您可以使用 Ajax 轻松读取 XML 并在 JavaScript 中更改其 DOM。

如果你真的需要在 JS 中将畸形对象重组为一个好的结构，这将是代码：

```
var cards = {}; // an object indexed by the CardCodes;
for (var i=0; i<data.length; i++) { // loop through the received JSON
    // data[i] equals the "element" variable from your code
    var code = data[i].CardCode;
    if (! code in cards) { // there is no card with that code
        cards[code] = {
            vendorSum: data[i].payment_sum,
            name: data[i].CardName,
            addr: data[i].Address,
            ...
            pmtDetail: [] // create array for the details
        };
    } // else: element already created
    cards[code].pmtDetail.push({
        docNum: data[i].DocNum, 
        amount: data[i].InvPayAmnt
        ...
    }); // adds a new detail object to the array
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:31:40.650

我使用 php 用对象/数组构建了 CVS：

```
 while ($row = fgetcsv($handle, 1024, ",")) {
               $cardCodes[] = array_combine($headers, $row);
        }

            foreach ($cardCodes as $key => $value) {

                $payments[$value['ggg']]['aaa']['xxx'] = 'element['gggg']';
            }
            echo json_encode($payments); 
```

然后用JS读取这个数据。

# java - Java - 关键捕捉器

> ID：10835590
> 
> 赞同：3
> 
> 时间：2012-05-31T14:27:05.883
> 
> 标签：java, keyboard, key, keylogger

我正在尝试用 Java 制作一种键盘记录器。我有一个应用程序允许人们在他们的桌面上获取他们的 RSS 提要，我想快速访问。顺便说一句，我需要一些可以做到这一点的东西：

*   我启动我的 java jar 文件，它在系统托盘中最小化。
*   用户做他想做的事（冲浪、看电影等）。
*   他按下了一个组合键 (CTRL + I)，然后 java 窗口打开并显示一个 GUI，他可以在其中检查新闻和修改应用程序配置。
*   现在他可以最小化窗口（系统托盘图标）并继续正常使用他的电脑。

我的应用程序必须完全跨平台。除此功能外，所有事情都已完成。我已经尝试过使用`KeyStroke`，甚至`System.in`但是当用户将窗口设为活动时，它们只会捕获组合键。

那么，有没有一种方法可以在不使用 JNI 或 JNA 的情况下从应用程序外部捕获组合键（如透明覆盖）（这就是我的搜索给我的）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:32:34.830

这是无法做到的。当今世界，没有任何操作系统可以让您只记录所有击键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:29:56.453

不，您必须使用一些系统相关库，即使用某种形式的 JNI。

不同的内置粒度级别是：

> `WHEN_ANCESTOR_OF_FOCUSED_COMPONENT`
> 
> 用于 registerKeyboardAction 的常量，这意味着当接收组件是焦点组件的祖先或本身就是焦点组件时，应该调用该命令。
> 
> `WHEN_FOCUSED`
> 
> 用于 registerKeyboardAction 的常量，这意味着当组件获得焦点时应该调用该命令。
> 
> `WHEN_IN_FOCUSED_WINDOW`
> 
> 用于 registerKeyboardAction 的常量，这意味着当接收组件位于具有焦点的窗口中或本身是焦点组件时，应调用该命令

# php - 如何保护客户端会话 ID？

> ID：10835592
> 
> 赞同：0
> 
> 时间：2012-05-31T14:27:09.103
> 
> 标签：php, session

是什么阻止了某人登录到网站 Z。进入保存网站 Z 的 Session_Id 的 cookie，并摆弄它以成为服务器识别的其他人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:33:09.010

> 是什么阻止了某人登录到网站 Z。进入保存网站 Z 的 Session_Id 的 cookie，并摆弄它以成为服务器识别的其他人？

您实际上必须*知道*另一个会话 ID 才能执行此操作。会话 ID 非常长且故意随机，因此您无法猜测其他用户的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:31:28.887

如果我们谈论 php session，答案是“没有人保护他们”！

您必须做一些事情以使其“更安全”。

*   使用 SSL 进行身份验证
*   使会话 ID 随时间过期
*   检查 IP 和 USER AGENT（好的，可以绕过）

等等 ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T14:35:36.003

只有会话 ID 的长度和基数。如果它很长，则需要数万亿（或更多）次尝试才能发现碰撞。较长的 id 将可能的 id 的数量乘以散列的基数，因此如果您的散列包含数字和小写字母，则每个额外的字符都会将可能性乘以 36。

一个 20 个字符的散列会给你 36^20 种不同的可能性。如果将 id 的长度加倍，您将获得 36^40 种不同的可能性。让任何人都更难强行进入另一个帐户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:36:22.957

在某些情况下（CodeIgniter 框架），您可以加密您的 cookie，这使得这种攻击更加困难。

最终，作为开发人员的您要对安全性负责，没有什么是开箱即用的，只需遵循适当的安全准则来开发安全的应用程序。

# jsp - 如何在 Facelets 页面中包含/导入 JSP 页面？

> ID：10835594
> 
> 赞同：0
> 
> 时间：2012-05-31T14:27:21.533
> 
> 标签：jsp, jsf, include, facelets

有人知道是否可以在 Facelets 页面中包含/导入 JSP 页面？

经过几次不成功的尝试`<c:import>`，以及在互联网上的一些研究后`<jsp:include>`，`<ui:include>`我认为是时候在 stackoverflow 中询问它了。

`someJSFpage.xhtml`：

```
<?xml version="1.0" encoding="ISO-8859-15" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

    <f:view contentType="text/html">

        <h:head>
            <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-15" />
            <title>Home</title>
        </h:head>

        <h:body>

            <xxxxx:import page="someJSPpage.jsp" />

        </h:body>

    </f:view>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:11:09.907

OmniFaces项目[为此](http://omnifaces.org)提供了一个组件`<o:resourceInclude>`。

> 该组件可用于捕获来自 JSP 或 Servlet 资源的输出，并将其作为输出呈现给 JSF 编写器。实际上，这允许您在例如 Facelets 中包含 Servlet 和 JSP 页面。

您可以按如下方式使用它：

```
<o:resourceInclude path="/someJSPpage.jsp" /> 
```

[在此处](http://showcase.omnifaces.org/components/resourceInclude)查看带有示例的展示柜。

# bean-validation - Hibernate Validator - 在嵌套列表项上调用 validateProperty(object,"list[0].field1",groups) 会引发 IllegalArgumentException

> ID：10835595
> 
> 赞同：0
> 
> 时间：2012-05-31T14:27:28.240
> 
> 标签：bean-validation, hibernate-validator

使用版本 Hibernate Validator 4.3.0.Final。

当我拨打以下电话时：

```
Set<ConstraintViolation<T>> violations = validator.validateProperty(objectForValidation, "list[0].field1", groups); 
```

在一个 ClassForValidation 实例上填充了一个带有 field1 = "" 的 ChildClassForValidation 实例

```
 public class ClassForValidation {

        @NotEmpty
        private String fielda;

        @Valid
        private List<ChildClassForValidation> list = new ArrayList<ChildClassForValidation>();

        public ClassForValidation(List<> list, String fielda) {
                this.list = list;
                this.fielda = fielda;
        }
    }

    public class ChildClassForValidation {
        @NotEmpty
        private String field1;

        public ChildClassForValidation(String field1) {
                this.field1 = field1;
        }
    } 
```

我得到以下异常：

```
java.lang.IllegalArgumentException: HV000039: Invalid property path. There is no property field1 in entity java.util.ArrayList.
at org.hibernate.validator.internal.engine.ValidatorImpl.collectMetaConstraintsForPath(ValidatorImpl.java:1141)
at org.hibernate.validator.internal.engine.ValidatorImpl.collectMetaConstraintsForPath(ValidatorImpl.java:1179)
at org.hibernate.validator.internal.engine.ValidatorImpl.validatePropertyInContext(ValidatorImpl.java:616)
at org.hibernate.validator.internal.engine.ValidatorImpl.validateProperty(ValidatorImpl.java:151)
... 
```

在查看了 Hibernate Validator 源代码后，我得出的结论是这是一个错误。因为在源代码中似乎有代码试图同时处理列表和地图。我相信错误在于**org.hibernate.validator.internal.engine.ValidatorImpl中的以下代码**

```
 private <T, U, V> ValueContext<U, V> collectMetaConstraintsForPath(Class<T> clazz, Object value, Iterator<Path.Node> propertyIter, PathImpl propertyPath, List<MetaConstraint<?>> metaConstraintsList) {
            Path.Node elem = propertyIter.next();
            Object newValue = value;

            BeanMetaData<?> metaData = beanMetaDataManager.getBeanMetaData( clazz );
            //use precomputed method list as ReflectionHelper#containsMember is slow
            if ( !metaData.isPropertyPresent( elem.getName() ) ) {
                throw log.getInvalidPropertyPathException( elem.getName(), metaData.getBeanClass().getName() );
            }
            ...
    } 
```

在这段代码中，它验证 clazz 具有正在验证的属性，问题是在处理 field1 时，clazz 是 ArrayList 而不是 item(0) 的类（即 ChildClassForValidation）。

在向 Hibernate Validator 项目提交错误之前，我想确认我的发现。谁知道我的属性路径可能只是语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:56:45.500

从 Bean Validation 1.0 开始，`Validator#validateProperty()`仅支持单个属性的验证，但不支持完整的属性路径。正如BV 邮件列表中所[讨论](http://lists.jboss.org/pipermail/beanvalidation-dev/2012-June/000397.html)的那样，未来的规范修订版可能会支持这样的功能。

# webgl - r.interactor 中的键盘事件

> ID：10835598
> 
> 赞同：0
> 
> 时间：2012-05-31T14:27:34.397
> 
> 标签：webgl, xtk

我想我已经熟悉这个库了。

**1)我想像第**[10 课](http://lessons.goxtk.com/10/) 那样进行体积渲染

我想检查用户是否按下“v”并运行一个函数

这是我尝试过的：

```
window.onload = function() {

    var r = new X.renderer3D();
    r.init();

    var volume = new X.volume();
    volume.file = 'http://lessons.goXTK.com/data/avf.nrrd';
    var vr = false;

    function vRender() {
        if (vr) {
            volume.volumeRendering = true;
            volume.opacity = 0.15;
            r.render();
        }
    }

    r.interactor.onKey = function(event) {
        if (event.keyCode == 86) {
            vr = true;
            vRender();
        }
    }

    r.add(volume);
    r.camera.position = [120, 80, 160];
    r.render();

}; 
```

**2）**我怎样才能抓住一个切片层或禁用三个轴中的两个？它的工作方式与我尝试过的类似吗？

```
var volume = new X.volume();
volume.file = 'http://lessons.goXTK.com/data/avf.nrrd';

volume.sliceX.visible = false;
volume.sliceZ.visible = false; 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:50:16.120

1）我刚刚尝试了您的代码，它几乎可以完美运行。（不幸的是 onKey 事件在 JSFiddle 中不起作用，所以我不能发布小提琴）。

我刚刚添加了`volume.modified()`行来触发 a`X.event.ModifiedEvent`并确保切片和体积渲染之间的切换正确发生。

```
 function vRender() {

    if (vr) {

      volume.volumeRendering = true;
      volume.opacity = 0.15;
      **volume.modified();**
      r.render();
    }
  }

  r.interactor.onKey = function(event) {

    if (event.keyCode == 86) {
      vr = true;
      vRender();
    }
  }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:39:29.027

2)

是的，以类似的方式是可能的。查看 JSFiddle

[http://jsfiddle.net/haehn/qxMtk/](http://jsfiddle.net/haehn/qxMtk/)

不同之处在于`volume._sliceX`它不可用（在编译期间不导出），因此您必须通过孩子。每个`X.volume`都有 3 个孩子 0,1,2，它们是 X,Y,Z 切片。

此外，必须先创建卷（在由 发起的解析期间发生`r.render()`），然后才能访问子项，因此我们必须在其中`onShowtime`或之后进行操作。

# sql - 将表及其值从本地 sql server 实例复制到远程 sql server 的最短方法是什么？

> ID：10835600
> 
> 赞同：0
> 
> 时间：2012-05-31T14:27:44.850
> 
> 标签：sql, sql-server, database

我有几个要移动的表，我最终会更改连接字符串，但我希望表名和所有字段都相同，并且我还想复制这些值。在 mysql 中，我曾经通过导出为 sql 并执行命令来执行此操作，现在因为数据库具有像 dbo 这样的前缀，这使得复制粘贴更加困难，并且它让我替换所有前缀并决定使用什么前缀。我想某处可能有一个巫师。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:06:50.103

假设您需要在网络之间移动数据库，这是我发现的最快的方法：

1.  编写创建表语句的脚本。
2.  在远程服务器上重新创建表。
3.  bcp 将表写入文本文件。
4.  用一个好的压缩工具压缩文本文件（我使用 7zip，它是免费的）。
5.  把文件复制过来。
6.  解压它。
7.  加载它。

我承认这是最暴力的方法，当你有大桌子和小管道时使用。例如，我使用它每天将一个 46 GB 的数据库从纽约移动到伦敦。我发现 7zip 的压缩比比 Winzip 好得多，甚至比 Lightspeed 还要好。

如果您的表在同一个网络上并且可以平等地访问快速驱动器，那么您可以省去压缩/解压缩步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:41:11.507

首先，您需要创建用于创建表的脚本。

其次，有几种方法可以从 2 个相似的表中导入或导出数据。

1.  使用 SQL Server 导入和导出向导将数据填充到表中（数据库存在于相同或不同的服务器中）

2.  使用 BCP 命令将数据导出到新创建的表中。

# .net - WCF Web 服务——影响哪些类型被放置在哪些嵌套的 XSD 中

> ID：10835604
> 
> 赞同：1
> 
> 时间：2012-05-31T14:28:03.350
> 
> 标签：.net, xml, wcf, interop, code-first

我有两个代码优先的 WCF Web 服务，它们公开了一些相同的常见类型。WCF 已选择将这些类型放在每个 Web 服务的不同 XSD 中。

比如在Web Service 1中，我常用的类型在xsd3中。在 Web 服务 2 中，它们位于 xsd4 中。

这完全是由 WCF 选择的，还是有办法影响它放在哪里？我查看了服务属性、操作和数据合同属性，但没有发现任何似乎可以做到这一点的东西。

这会导致我们基于 Java 的 Web 服务客户端之一出现问题，因为不同的 XSD 会导致类型重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:42:07.450

You cannot control the WSDL generation as far as how types are imported (*i.e. XSD names*) - this is entirely automatic and up to .NET internals. If this is an issue for you - you may consider merging **Service 1** and **Service 2** so that the type aren't duplicated **OR** you may need to isolate your service references using namespaces / separate projects libraries in Java to avoid type collisions.

# ios - ios如何在EAGLContext中绘制UIImage？

> ID：10835611
> 
> 赞同：0
> 
> 时间：2012-05-31T14:28:35.117
> 
> 标签：ios, uiimage, draw, eaglcontext

我正在做一个“手指绘图应用程序”。我正在使用 Apple 的示例 [此处][1]。

但我想添加一个撤消选项。为了做到这一点，每次应用程序处理触摸事件的结束时，我都会将 EAGLContext 内容保存到图像中。

当我想绘制以以下方法保存的最后一张图像时，问题就来了：

```
-(void)undoButtonClicked {
if([savedImagesArray count]>0){
            UIImage *image = [savedImages lastObject];
            [savedImagesArray removeLastObject];
            [image drawInRect:self.frame];
} 
```

}

但是没有绘制图像，并且有一个控制台输出显示：

```
 <Error>: CGContextRestoreGState: invalid context 0x0 
```

我相信上下文有问题，但我似乎无法弄清楚。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:47:04.840

在您调用它时，没有当前上下文。在调用之前会生成一个新的上下文`drawRect:`，并在绘图周期结束时处理掉。`drawInRect:`没有上下文时不能调用。

视图不应跟踪旧图像。那是一个控制器功能。单击撤消时，控制器应将正确的图像传递给视图，然后视图应在下次`drawRect:`调用时重新绘制自身。

# ruby-on-rails - Ruby on Rails - rake 路由给出模型错误

> ID：10835612
> 
> 赞同：0
> 
> 时间：2012-05-31T14:28:38.497
> 
> 标签：ruby-on-rails, ruby, mongoid

我有这个模型：

```
class Kpi
  include Mongoid::Timestamps
  #include Mongoid::Document

  field :number_of_users,      :type => Integer, :default => 0
end 
```

当我运行 rake 路线时，我收到了这个错误：

```
rake aborted!
undefined method `field' for Kpi:Class 
```

知道为什么会这样吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:34:53.830

`rake routes`加载您的环境-> 加载您的代码。因此，如果您的代码中有错误，它将不会显示您的路线。在您的情况下，您应该取消注释`include Mongoid::Document`

编辑

所以即使使用它也不起作用？嗯，也许包括`Document`之前`Timestamps`？这里有点长镜头

# json - 加载下一页网格 Ext JS 4

> ID：10835616
> 
> 赞同：0
> 
> 时间：2012-05-31T14:28:46.017
> 
> 标签：json, extjs, grid, extjs4

我正在尝试为网格中的每个页面加载 15 条记录：`pageSize : 15,`服务器正在向我发送正好 15 页，问题是网格中的下一页按钮被禁用。

**店铺 ：**

```
Ext.define('UserStore', {    
extend: 'Ext.data.Store',
model: 'UserModel',
autoLoad : true,
pageSize : 15,
remoteSort: true,
proxy: {
    type: 'ajax',
    url: 'url/to/servlet',
    reader: {
        type: 'json',
        root: 'data',
        totalProperty: 'total'
    },
    writer: {
        type : 'json',
        root: 'data'    
    },
    actionMethods: {
        read   : 'POST',
        create : 'POST',
        update : 'POST',
        destroy: 'POST'
    },
    extraParams : {
        data : 'Blank',
    }

},
sortOnLoad: true,
sorters: { property: 'dateTime', direction : 'DESC' },

}); 
```

**网格 ：**

```
xtype : 'gridpanel',
store : mystore,
height : 350,
columns : [ {
          dataIndex : 'firstName',
          text      : 'First Name',
          flex      : 1
        },{
          dataIndex : 'lastName',
          text      : 'Last Name',
          flex      : 1
        },{
          dataIndex : 'email',
          text      : 'Email',
          flex      : 1  
 }],
 dockedItems : [ {
    xtype : 'pagingtoolbar',
    hight : 28,
    displayInfo : true,
    dock : 'bottom'
} ] 
```

**加载网格：**我测试了 3 种方法：

*   `grid.getStore().loadPage(1);`
*   `grid.getStore().load({ params:{start : 0, limit : 15}});`
*   `grid.getStore().load();`

**编辑** ![在此处输入图像描述](../Images/1b3178db971c2c59e0dc738e39d6ffd0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:34:09.913

主要是因为您从服务器收到的数据中缺少 totalCount 属性。这样，网格将计算分页工具栏。

# vb.net - VB.NET 中带有附件的 SOAP

> ID：10835619
> 
> 赞同：6
> 
> 时间：2012-05-31T14:29:00.323
> 
> 标签：vb.net, soap

我需要使用提供给我的 Web 服务，它使用带有附件的 SOAP 作为通信方式。它还使用 WS-Security 1.0 作为一种身份验证形式（用户并以纯文本形式传递）。

我将在 VB.NET 上工作，我在 Web 服务方面的经验非常少，甚至可以创建 WCF Web 服务，在另一个项目中添加服务引用，从而创建一个代理类并使用这些方法。

我在网上搜索过，发现VB.NET中没有对SwA的原生支持，这是正确的吗？一个关于我如何进行沟通的例子以及我在哪里可以更了解这些概念的一些指示将是极好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:03:31.560

为什么不将附件数据放入字节数组并发送呢？

```
Public Class SoapPackage
    Public Property AttachmentName() As String
        Get
            Return m_AttachmentName
        End Get
        Set
            m_AttachmentName = Value
        End Set
    End Property
    Private m_AttachmentName As String

    ' put your file data in here 
    Public Property AttachmentData() As Byte()
        Get
            Return m_AttachmentData
        End Get
        Set
            m_AttachmentData = Value
        End Set
    End Property
    Private m_AttachmentData As Byte()
End Class 
```

使用以下内容将文件流式传输到字节数组中（打开附件的流，将其传递给此函数）：

```
Public Shared Function StreamToByteArray(input As Stream) As Byte()
    Dim buffer As Byte() = New Byte(16 * 1024 - 1) {}
    Using ms As New MemoryStream()
        Dim read As Integer
        While (InlineAssignHelper(read, input.Read(buffer, 0, buffer.Length))) > 0
            ms.Write(buffer, 0, read)
        End While
        Return ms.ToArray()
    End Using
End Function 
```

编辑：

刚刚了解到我的`StreamToByteArray`功能可以简单地替换为：

```
Dim filePath as String = "Path\to\file"
Dim fileBytes as Byte() = System.IO.File.ReadAllBytes(filePath) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:20:24.180

在我最近的一个项目中，我不得不在 C# 中与一个肥皂 WebService 进行通信。为了解决这个问题，我在一个字符串中制作了完整的肥皂信封，并使用 HttpWebRequest 将其发送到 Web 服务。使用 WebRespons，您可以读出 Web 服务的响应并将其放回字符串中。您可以将此字符串转换为 XmlDocument 以读出您想要的对象。

您可以使用循环轻松制作肥皂信封（如有必要），并将身份验证放在肥皂信封的标题中（这样做）

为了让您的 Web 服务获得正确的 soapenvelope 语法，我建议您使用 SOAPUI，这是一个非常棒的小型应用程序，对我帮助很大！这样你会注意到在哪里放置身份验证，..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:29:09.317

据我从这里可以看出：http: [//www.w3.org/TR/SOAP-attachments](http://www.w3.org/TR/SOAP-attachments)附件需要嵌入到消息正文中，这意味着您需要将 Kevin 和 Tom 的答案结合起来建立你的信息。

我确实注意到带有附件的 SOAP 似乎只是提交而不是标准，而且它已经过时了。

假设您必须“按原样”使用 Web 服务，如果可以的话，我会尝试从服务创建者/供应商那里获取一些额外的数据或示例。

# modelica - 参数可以进行条件类型分配吗？

> ID：10835622
> 
> 赞同：5
> 
> 时间：2012-05-31T14:29:08.247
> 
> 标签：modelica

我试图根据要满足的条件让参数成为特定类型。但我不太确定如何做到这一点，或者这在 Modelica 中是否真的可行/合法。原则上我想要的是这样的（非工作代码示例）：

```
package test
type TypeA=enumeration(A,C,E);
type TypeB=enumeration(B,D,F);

model foo
    parameter Boolean Condition;
    parameter if Condition then TypeA else TypeB MyParameter; 
end foo;
end test; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:51:51.197

我希望通过可替换的模型或可替换的类型来实现这一点，但我没有到达那里。

但是，下面的代码允许您在 foo 的瞬间更改 MyParameter 的类型。也许这会有所帮助，或者它会激发某人完成这项工作。

```
package test
type TypeA = enumeration(A,C, E);
type TypeB = enumeration(B, D, F);

model foo
  parameter Boolean Condition;
  replaceable type MyType = TypeA;
  parameter MyType MyParameter;
end foo;

model UseFoo
  foo myfoo(Condition=true, redeclare TypeB MyType,
  MyParameter = TypeB.B);
end UseFoo;

end test; 
```

# php - 如何使用php将字符串作为文件发送到浏览器？

> ID：10835628
> 
> 赞同：1
> 
> 时间：2012-05-31T14:29:23.260
> 
> 标签：php, http-headers

我想在内存中创建一个文件，并在单击按钮时将其发送到浏览器。我期待以下代码可以解决问题：

```
<?php

$content = 'This is supposed to be working... dammit';
$length = strlen($content);

header('Content-Description: File Transfer');
header('Content-Type: application/pdf');
header('Content-Disposition: attachment; filename=testfile.txt');
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . $length);
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Expires: 0');
header('Pragma: public');

echo $content;
exit;

?> 
```

相反，我得到了字符串的回显。我愚蠢的新手错误是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:37:20.297

你需要改变你的内容类型，这对我有用，在 FF 和 Chrome 上测试过

```
<?php 
$content = 'This is supposed to be working... dammit';
$length = strlen($content);

header('Content-Description: File Transfer');
header('Content-Type: text/plain');//<<<<
header('Content-Disposition: attachment; filename=testfile.txt');
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . $length);
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Expires: 0');
header('Pragma: public');

echo $content;
exit;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T10:15:32.027

“请记住，必须在发送任何实际输出之前调用 header()”（[c](http://php.net/manual/en/function.header.php)）

# android - SyncAdapter 不会自动同步

> ID：10835637
> 
> 赞同：4
> 
> 时间：2012-05-31T14:30:02.350
> 
> 标签：android, android-contentprovider, android-syncadapter

我了解自动同步会在内容修改后 30 秒发生。观察 logcat 的时间更长，这证明自动同步没有发生。至少，不适用于我的自定义 SyncAdapter。

**用户提供者：**

```
<provider android:name="nl.providers.UserProvider" 
    android:authorities="nl.providers.UserProvider" 
    android:enabled="true" android:label="Users" /> 
```

**用户同步适配器：**

```
<sync-adapter xmlns:android="http://schemas.android.com/apk/res/android" 
    android:contentAuthority="nl.providers.UserProvider"
    android:accountType="nl.account" 
    android:supportsUploading="false" 
    android:userVisible="true" /> 
```

**启动器：**

```
ContentResolver.setIsSyncable(account, "nl.providers.UserProvider", 1);
ContentResolver.setSyncAutomatically(account, "nl.providers.UserProvider", true); 
```

我错过了什么吗？或者谁能​​给我更多关于这个主题的信息来帮助我的搜索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:10:05.847

同步发生时没有设置时间延迟。它可能迟早取决于设备上的其他活动。

修改内容是不够的。你在打电话 notifyChange() 吗？例如在您插入、更新或删除后的 ContentProvider 中：

```
getContext().getContentResolver().notifyChange(rowUri, null, true); 
```

还要确保在您正在测试的设备或模拟器上的“帐户和同步”设置中实际启用了同步。

希望对某人有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-28T04:19:05.253

原因可能是因为您正在设置`android:supportsUploading="false"`并且您需要将其设置为`true`like`android:supportsUploading="true"`然后适配器才能与网络同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T23:02:36.680

检查系统帐户设置是否有任何同步错误。如果您的同步将异常添加到同步结果统计信息中，则可能会发生这些情况，这可能会导致它等待更长时间才能再次同步。您还可以使用菜单中的“立即同步”进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T16:35:58.957

我能想到的原因：

1）您没有为该 SyncAdapter 添加帐户（在 Account&Sync 中进行）

2）您的设备上没有互联网连接

# javascript - 按下箭头键时JS Div不改变颜色

> ID：10835638
> 
> 赞同：0
> 
> 时间：2012-05-31T14:30:04.533
> 
> 标签：javascript, jquery, html

是的，这很奇怪，我不知道为什么会这样，但我正在做的是我有一个搜索字段，用户在其中输入一个名称，我希望它显示建议，现在这是有效的，但是当用户使用对象应突出显示的箭头键（向上或向下），基本上就像具有不同设计的标准自动完成。

问题是高亮位，当我按下向下箭头时，只要我按住箭头键，对象就会高亮，但它不会保持高亮。我不知道为什么，我已经在下面发布了相关代码，希望有人可以帮助：

**主文件（文本字段）：**

```
<div style="position: relative; top: 0px; left: -51px; width: 200px;">
    <form method="GET" action="" style="padding: 0px; padding-right: 10px; margin: 0px;">
         <input type="text" id="search_field" onkeyup="javascript: suggestions(this.value);" autocomplete="off" style="border: 0px solid #ffffff; width: 250px; padding-left: 20px; color: #ffffff; height: 30px; border-bottom: 1px solid #333333; background: #222222;" name="q" placeholder="Search MVDb">
    </form>
    <div style="position: absolute; left: 2px; top: 8px;">
    <img height="15" src="img/search.png">
    </div>
</div>

<div id="result" style="z-index: 100; position: absolute; cursor: pointer; top: 86px; right: 5px; width: 251px; background: #eeeeee;">

</div> 
```

带有 id 结果的 div 是加载建议的地方。

**主文件（jquery/js）：**

```
function suggestions(value){
     $.ajax({
         url: 'get_suggestion.php?q='+value,
         success: function(data) {
            $('#result').html(data);    
         }
     });
}

$(document).ready(function() {
    $("#search_field").keydown(function(e) {
        if (e.keyCode == 40) { 
           //DOWN
           document.getElementById('search_result_0').style.background = "#333333";
           e.preventDefault();
           return false;
       }
    else if (e.keyCode == 38) { 
        //UP
        e.preventDefault();
        return false;
   }
   });      
}); 
```

**get_suggestion.php：**

```
<?php 
include 'js/db/db.php';
$value = $_GET["q"];
if($value==""){

}
else{
    $value = trim($value);
    $query="select * from movies where title like \"%$value%\" LIMIT 6";  
    $rt=mysql_query($query);
    echo mysql_error();  
    $counter = -1;
    while($nt=mysql_fetch_array($rt)){
        $counter = $counter+1;
?>
<div id="search_result_<?php echo $counter ?>" cellspacing="0" cellpadding="0" onClick="window.location = 'movie.php?movie=<?php echo $nt['title']?>'" width="100%" style="color: #333333; cursor: pointer;">
    <table cellspacing="0" cellpadding="0">
        <tr valign="top">
            <td style="padding: 5px; width: 30px;">
                <img height="60" src="http://210.177.0.75/mvdb/img/covers/<?php echo $nt['title'] ?>.jpg">
            </td>
            <td align="left" style="padding: 5px;">
                <?php
                    $title = substr($nt[title], 0, 17);
                    if($title == $nt[title]){

                    }
                    else{
                        $title = $title."...";
                    }   
                ?>
                <font style="font-family: Arial; font-size: 15px; font-weight: bold;"><?php echo $title ?></font> &nbsp; <img src="img/age/BBFC <?php echo $nt['bbfc_age'] ?>_small.png"><br>
                <font style="font-family: Arial; font-size: 12px; color: #aaaaaa;">Tom Cruise, Michelle Monaga</font>
                <font style="font-family: Arial; font-size: 12px; color: #aaaaaa;">Released: 4 May 2006</font>
            </td>
        </tr>
    </table>
</div>
<?php
}  
  }
  ?> 
```

我试图尽可能地格式化代码。我认为可能是当用户按下箭头键时触发了 ajax 请求，但这没有任何意义，因为我正在使用 e.preventDefault() 来阻止它，有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:50:00.633

您对执行 ajax 请求的箭头键是正确的。您已`e.preventDefault`在 keydown 功能中使用过，但未在 keyup 功能中使用过。`onkeyup`我建议您将其放在 keydown 函数的正下方，而不是属性：

```
$("#search_field").keyup(function(e) {
    if (e.keyCode < 41 && e.keyCode > 36) {
        suggestions(this.val());
    }
}); 
```

那应该出来了。

# java - 找不到 ImportLinkedInProfile 的 jar

> ID：10835643
> 
> 赞同：1
> 
> 时间：2012-05-31T14:30:38.707
> 
> 标签：java, linkedin

我正在尝试在一个简单的基于 JSP-Servlet 的应用程序中使用 LinkedIn。在我的示例代码中有一个名为 ImportLinkedInProfile 的类。我发现很难得到这个罐子。任何想法哪个罐子有这个？我试过 findjar.com 但它没有列出这个类。

```
com.cs.liveebiz.server.common.ui.ImportLinkedInProfile; 
```

使用它的代码片段 -

```
ImportLinkedInProfile importProfile = new ImportLinkedInProfile();
importProfile.processImportedResult(profile); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:56:31.520

我能找到这个类的唯一参考是通过一个相当无用的[博客帖子](http://javacompleteexamples.blogspot.co.uk/2010_03_01_archive.html)。

鉴于他的示例包含与您尝试导入的示例相同的包声明（包 com.cs.liveebiz.server.linkedinapi），我建议这是他开发的自定义包装器。

无论如何，代码的实际内容来自[linkedin-j](http://code.google.com/p/linkedin-j/)项目。我没有使用过该库，但它似乎支持从 LinkedIn获取[人员。](http://code.google.com/p/linkedin-j/wiki/GettingStarted#Profile_API_Example)我想你想从 JAR 中使用的类是一个简单的包装器，它从linkedin-j Person 对象映射到其他适合在网页上展示的 bean。

事实上，在进一步检查该博客帖子中的代码后，似乎根本没有使用这个类（没有源代码很难分辨，而且名称相当迟钝）。

# java - 关于 k-means 聚类输入的建议（欢迎更多建议）

> ID：10835644
> 
> 赞同：-2
> 
> 时间：2012-05-31T14:30:39.687
> 
> 标签：java, k-means

我想对 k-means 聚类的输入提出一些建议。我对这个 k-means 聚类（或看在上帝的份上的聚类）相对较新，并找到了这个源代码： [Shyam Sivaraman 的 k-means](http://www.sourcecodesworld.com/source/show.asp?ScriptID=807) 我可能想使用这个 JAVA，因为我的主管希望我只是改变和应用算法和不要自己从头开始创建它。所以，根据代码：

```
Vector dataPoints = new Vector();
dataPoints.add(new DataPoint(22,21,"data1"));
dataPoints.add(new DataPoint(19,20,"data2"));
dataPoints.add(new DataPoint(18,22,"data3"));
... 
```

到目前为止我所知道的是它接受两个可变数据点（x 和 y）和数据名称，基于以下代码：

```
public DataPoint(double x, double y, String name) {
    this.mX = x;
    this.mY = y;
    this.mObjName = name; 
```

现在我想要的是在进行文档聚类时更改输入以接受文档向量。关于如何更改代码的任何建议？换句话说，如果可能的话（代码最后一个选项）。或者，如果你们在同一主题上找到任何链接，不妨在这里分享。

期待任何建议的家伙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:50:41.517

在最简单的方法中，您必须计算[document-term matrix](http://en.wikipedia.org/wiki/Document-term_matrix)。

您的代码在 2D 空间中对向量 (x,y) 进行聚类。您只需将其扩展为 N 维空间（根据文档术语矩阵中的向量维度）。

另外我建议查看[TF*IDF weighting](http://en.wikipedia.org/wiki/Tf%2aidf)，它可以改善聚类结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:37:48.340

我建议使用 n 维向量作为输入，以便您的实现更通用。

如果你想要一些高效的实现**K-Means**的 Java 源代码，你可以查看我的[数据挖掘软件](http://www.philippe-fournier-viger.com/spmf/)。

它提供了多种算法，包括 K-Means 以及用于启动算法的图形界面。

最好的，

菲利普

# php - 我应该使用什么 where 子句来获取大于创建日期的对象？

> ID：10835649
> 
> 赞同：1
> 
> 时间：2012-05-31T14:31:06.163
> 
> 标签：php, mysql, sql, where

在我的数据库中，对象的创建日期以 dd-month-year hours:seconds 格式保存（示例`2011-12-07 09:59:41`）。我应该使用哪些 sql 命令来获取 2012 年 4 月之后创建的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:34:36.597

```
-- After April 1st, including
SELECT  *
FROM    mytable
WHERE   creationDate >= CAST('2012-04-01' AS DATE)

-- After April 1st, excluding
SELECT  *
FROM    mytable
WHERE   creationDate >= '2012-04-01' + INTERVAL 1 DAY

-- After April
SELECT  *
FROM    mytable
WHERE   creationDate >= '2012-04-01' + INTERVAL 1 MONTH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:33:53.987

```
WHERE DATE_FORMAT(creationDate, '%d/%m/%Y') >= STR_TO_DATE('01/05/2012', '%d/%m/%Y') 
```

（您是在 2012 年 4 月之后询问，即 5 月）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T14:34:18.363

```
SELECT * FROM mytable WHERE CreationDate > '2012-04-00' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T14:34:56.213

试试[这个链接](http://www.roseindia.net/sql/sqldate/sql-date-greater-than.shtml)

你想要底部的位。

例子：

```
SELECT * from table where DATE >='2008-12-03'; 
```

# .net - 如何绑定到 ToolStripMenuItem 的 Enabled 属性

> ID：10835652
> 
> 赞同：3
> 
> 时间：2012-05-31T14:31:16.037
> 
> 标签：.net, vb.net, winforms, binding

我正在尝试做 MVP，我有一个特定于视图的模型，演示者操作并且视图绑定到。演示者和视图之间没有其他连接（视图通过网关类型模式向域模型发出命令）。

您可以猜到，这使得绑定到任何对象的任何属性的能力非常重要。

我无法找到绑定到`Enabled`a 属性的正确方法`ToolStripMenuItem`。大多数控件都有一个`.DataBindings`属性，但这个似乎缺少它。我在网上没有找到太多关于如何做到这一点的信息。甚至可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-10T18:50:57.140

[我在这里](http://social.msdn.microsoft.com/Forums/windows/en-US/0b8cba1e-f7ce-4ab0-a45b-2093dc38afc8/bind-property-in-toolstripmenuitem)找到了答案：创建一个实现 IBindableComponent 的自定义 ToolStripMenuItem。

链接中的示例：

```
Public Class BindableToolStripMenuItem
    Inherits ToolStripMenuItem
    Implements IBindableComponent

    Private m_bindingContext As BindingContext
    Private m_dataBindings As ControlBindingsCollection

    <Browsable(False)> _
    Public Property BindingContext() As BindingContext
        Get
            If m_bindingContext Is Nothing Then
                m_bindingContext = New BindingContext()
            End If
            Return m_bindingContext
        End Get
        Set(value As BindingContext)
            m_bindingContext = value
        End Set
    End Property

    <DesignerSerializationVisibility(DesignerSerializationVisibility.Content)> _
    Public ReadOnly Property DataBindings() As ControlBindingsCollection
        Get
            If m_dataBindings Is Nothing Then
                m_dataBindings = New ControlBindingsCollection(Me)
            End If
            Return m_dataBindings
        End Get
    End Property
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:11:32.913

我很想听听其他用户的意见，特别是关于如何完成`Enabled`对 a ... 属性的绑定，`ToolStripMenuItem`以下是我迄今为止发现的内容：

大多数用户控件继承自`System.Windows.Forms.Control`其中具有`DataBindings`它们继承的属性。但是，`ToolStripMenuItem`不继承`Control`，因此您不能将绑定添加到`DataBindings`集合。不完全是一个令人满意的答案，但至少它解释了为什么这不可能以你会做的典型方式来做。

# android - 无法在 Android 联系人中刷新 ListView

> ID：10835653
> 
> 赞同：1
> 
> 时间：2012-05-31T14:31:17.810
> 
> 标签：android, listview, contacts

我在 Android 4.0.4 联系人源中添加了一个新设置，称为 useCompactView。它的作用是减小联系人照片的大小，因此您可以在列表视图中的屏幕上容纳两倍的联系人。

```
<CheckBoxPreference
        android:key="useCompactView"
        android:defaultValue = "false"
        android:title="@string/display_options_use_compact_view"
        android:summary="@string/display_options_use_compact_view_summary" /> 
```

在 ContactsPreferenceActivity 中，我为我的新复选框添加了一个侦听器，这确实被触发了，我使用 Log.d 消息进行了测试。我试图获取列表视图并在其上调用 invalidateViews() 但这也不起作用。我确信必须有一种方法来获取适配器并强制对其进行刷新。

```
sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);
sharedPreferences.registerOnSharedPreferenceChangeListener(new OnSharedPreferenceChangeListener() {
    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
        if("useCompactView".equals(key)) {
            getListView().invalidateViews();  // This does not work
        }
    }
}); 
```

我想要完成的是；当用户在设置中选择使用紧凑视图时，显示将自动刷新。基本上我需要重绘屏幕。如果我进入设置，请选中使用紧凑，然后更改排序顺序，当我点击后退按钮时，我会得到紧凑视图。因此，更改排序顺序会刷新显示/列表视图。但我不知道如何从我的偏好活动中做到这一点。

如果你需要更多代码，请告诉我，我会放你需要的任何东西。这是一个真正的挠头。

# java - 将 JSON 数组传递给 Java Springs 控制器

> ID：10835656
> 
> 赞同：0
> 
> 时间：2012-05-31T14:31:36.750
> 
> 标签：java, json, spring-mvc

我正在尝试将此 JSON 传递给 Springs 控制器：

```
{"orderList":["IS_cb-A1-3","IS_cb-A1-4","IS_cb-A1-1","IS_cb-A1-2","IS_cb-A1-3"]} 
```

这是方法声明：

```
public @ResponseBody JsonResponse orderCertificates(@ModelAttribute CertificateRequest certificateOrder, BindingResult result ) 
```

这是豆子：

```
public class CertificateRequest {
private String[] orderList = null;
private List<String> mbsResponse = new ArrayList<String>(); 

public String[] getOrderList() {
    return orderList;
}

public void setOrderList(String[] orderList) {
    this.orderList = orderList;
}

public List<String> getMbsResponse() {
    return mbsResponse;
}

public void setMbsResponse(List<String> mbsResponse) {
    this.mbsResponse = mbsResponse;
}
} 
```

我不知道如何构建这个 bean（它不起作用）以便我可以访问这个数组。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:49:23.637

This signature of the Request mapped method(in 3.1 Spring MVC) should work for you:

```
@RequestMapping(value="/cert", consumes="application/json", produces="application/json")
public @ResponseBody CertificateRequest orderCertificates(@RequestBody CertificateRequest certificateOrder){
//
} 
```

I have tagged CertificateRequest with `@RequestBody` and removed `BindingResult`.

Update: Posting code, this is how my method looks -

```
@RequestMapping(value="/cert", consumes="application/json", produces="application/json")
public @ResponseBody CertificateRequest orderCertificates(@RequestBody CertificateRequest certificateOrder){
    System.out.println(certificateOrder);
    return certificateOrder;
} 
```

and in the http request, I have explicitly set the Content-Type to "application/json"

# c++ - C++ 包括 C 文件（未找到 typedef）

> ID：10835660
> 
> 赞同：0
> 
> 时间：2012-05-31T14:31:44.950
> 
> 标签：c++, c

我有这个 cpp 文件，其中包含一堆 C 文件。

**主文件**

```
extern "C" {
#include "types.h"
#include "file1.h"
}
... 
```

**类型.h**

```
#IFNDEF TYPES_H
#DEFINE TYPES_H
typedef unsigned short int char16;
...
#ENDIF // TYPES_H 
```

**文件1.h**

```
#include "file2.h"
... 
```

**文件2.h**

```
...
char16* testCode();
... 
```

由于某种原因，编译器给我一个错误，即未声明 char16。知道为什么包含不会从 CPP 文件继承到 C 文件吗？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:33:58.870

您应该在 file2.h 中包含 types.h。你似乎没有这样做。

顺便说一句，发布的代码在我的机器上编译没有任何错误，而如果我`"#include "types.h"`在 main.cpp 中注释，它会给我一个错误。

# javascript - 以编程方式为移动应用程序获取纬度和经度附近的多个街道名称

> ID：10835661
> 
> 赞同：0
> 
> 时间：2012-05-31T14:31:46.813
> 
> 标签：javascript, google-maps, google-maps-api-3, map, mapping

我正在编写一个移动应用程序 - 我想在其中获取纬度和经度附近的街道列表。我得到了一条街道，但我喜欢得到更多，因为有时街道由于纬度的准确性而不正确，并为用户提供选择正确街道的选项。

我正在使用 Javascript 和在 Phonegap 中开发的应用程序进行编程。

谷歌地图网址 [https://maps.googleapis.com/maps/api/place/search/json?location=42.28684519999999,-83.0525493&radius=10&types=route&sensor=false&key=](https://maps.googleapis.com/maps/api/place/search/json?location=42.28684519999999,-83.0525493&radius=10&types=route&sensor=false&key=) ...

它只返回一条街道 - 圣克莱尔，但我在加利福尼亚街。

谢谢阿迪亚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T14:39:27.677

看看谷歌地图 [反向地理编码API](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

```
http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true_or_false 
```

返回

```
{
  "status": "OK",
  "results": [ {
    "types": street_address,
    "formatted_address": "275-291 Bedford Ave, Brooklyn, NY 11211, USA",
    "address_components": [ {
      "long_name": "275-291",
      "short_name": "275-291",
      "types": street_number
    }, {
      "long_name": "Bedford Ave",
      "short_name": "Bedford Ave",
      "types": route
    }, {
      "long_name": "New York",
      "short_name": "New York",
      "types": [ "locality", "political" ]
    }, {
      "long_name": "Brooklyn",
      "short_name": "Brooklyn",
      "types": [ "administrative_area_level_3", "political" ]
    }, {
      "long_name": "Kings",
      "short_name": "Kings",
      "types": [ "administrative_area_level_2", "political" ]
    }, {
      "long_name": "New York",
      "short_name": "NY",
      "types": [ "administrative_area_level_1", "political" ]
    }, {
      "long_name": "United States",
      "short_name": "US",
      "types": [ "country", "political" ]
    }, {
      "long_name": "11211",
      "short_name": "11211",
      "types": postal_code
    } ],
    "geometry": {
      "location": {
        "lat": 40.7142298,
        "lng": -73.9614669
      },
      "location_type": "RANGE_INTERPOLATED",
      "viewport": {
        "southwest": {
          "lat": 40.7110822,
          "lng": -73.9646145
        },
        "northeast": {
          "lat": 40.7173774,
          "lng": -73.9583193
        }
      }
    }
  },

  ... Additional results[] ... 
```

# c - 用于 Float_64 的内存

> ID：10835665
> 
> 赞同：2
> 
> 时间：2012-05-31T14:32:03.240
> 
> 标签：c, memory

我对使用 C/C++ 比较陌生。我目前正在使用 Visual Studio 2010 并正在分析其他人编写的一些代码。我收到了一个问题，即我的某个函数使用了太多内存。几乎其中的所有指针都是 Float_64，我想知道如果我将它们更改为 Float_32 会有什么样的影响。Float_64 和 Float_32 使用了多少内存，切换是否有数据丢失？如果已经有人问过这个问题，我很抱歉，但我似乎找不到它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:38:24.247

`Float_64`并且`Float_32`不是 C++ 标准中定义的 C++ 类型，因此它们必须特定于您的应用程序或您正在使用的库。

但是，如果名称比较合理，a 的大小`Float_64`将为 64 位（现代架构为 8 字节），a的大小`Float_32`为 32 位。因此，如果你改用 using`Float_32`而不是`Float_64`，你会将浮点数本身的内存压力减少一半。现在，更不用说指向值的指针，它们的大小仍然与原来相同。所以，考虑：

```
Float_64 my64;  
Float_32 my32;

Float_64 * my64_ptr = &my64;
Float_32 * my32_ptr = &my32; 
```

在上面的代码中，分别是64 位和 32 位（8 和 4 字节）`my64`的一半。但是，and是指针，并且指针的大小相同，无论它们*指向*什么。`sizeof()``my32``my64_ptr``my32_ptr`

 *反响是另一个考虑因素。A 的`Float_32`精度大概比 a 低`Float_64`——可能只有一半，甚至更低。如果您需要具有非常高显着性的浮点数，则在转换为较小的类型时可能会降低精度。唯一确定的方法是检查两种类型的规范 wrt precesion，并分析您需要操作的数据。但是，作为一般经验法则，较低的精度很可能足以满足大多数用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:38:29.367

首先，据我所知，它们不是内置类型`Float_32`。`Float_64`这表明他们是`typedef`d，可能是`float`(32) 和`double`(64)。

假设是这种情况，即使不是，您也`Float_32`可能占用 32 位空间，而您的空间`Float_64`是 64 位宽。那只是从名字上来的。既然你说它们是指针，那么大小将取决于平台（32 位系统上的 32 位和 64 上的 64 位），但仍指向相同的大小值（因此*最终*的内存使用将是指针+类型，或在 64 位系统上使用 128 位`Float_64`；我相信您可以完成其余的数学运算）。

通过将所有`Float_64`s替换为`Float_32`s，您将能够将内存使用量减少四分之一到一半，但节省多少取决于正在使用的数字数量。在大多数情况下，它不太可能有帮助，但如果你周围有数百万个浮点数，它会很有帮助。

可能产生的影响更有趣一些。浮点数有一个令人讨厌的精度损失特性，尤其是在它们范围的边缘附近。对于 64 位浮点数（双精度数），这远远超过了数万亿。然而，对于 32 位，在数十亿之后，您开始失去精度，而到了数万亿，数字开始跳动很多。根据您使用的数据类型，这可能会影响您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:41:33.290

> Float_64 和 Float_32 使用了多少内存

分别为 8 字节（64 位）和 4 字节（32 位）。

> 切换是否有任何数据丢失？

吨！`Float_32`是所谓的[单精度](https://en.wikipedia.org/wiki/Single-precision_floating-point_format)（通常`float`），`Float_64`而是[双精度](https://en.wikipedia.org/wiki/Double-precision_floating-point_format)（通常`double`）。

这实际上有点用词不当，因为双精度数的精度是浮点数的两倍多：双精度数可以准确表示小数点后 16 位，而浮点数只能表示小数点后 7 位。也就是说，通过切换，您会丢失 9 个小数位的精度，这很容易破坏一些算法。*

# java - 如何向 Jackson 反序列化器提供类型提示？

> ID：10835668
> 
> 赞同：9
> 
> 时间：2012-05-31T14:32:14.353
> 
> 标签：java, jackson

我使用 Jackson 作为工具来声明一些我无法注释（或根本无法修改）其类的对象。其中一个类具有用于无类型列表的 setter 和 getter。这是一个经过消毒的版本：

```
public class Family {
    private List members;
    public List getMembers() { return members; }
    public void setMembers(List members) { this.members = members; }
    //...many, many other properties
}

public class Member {
    private String name;
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
} 
```

这是我试图反序列化的 JSON：

```
{ "members" : [ { "name" : "Mark" } ] } 
```

我会使用的天真代码是这样的：

```
ObjectMapper mapper = new ObjectMapper();
Family family = mapper.readValue(json, Family.class);
Member member = (Member) family.getMembers().get(0);
System.out.println(member.getName()); 
```

但是当然这失败了，因为杰克逊不知道创建一个列表`Members`而不是它的后备，一个`LinkedHashMap`s 的列表。

**指示杰克逊将其`members`视为的最简单方法是`List<Member>`什么？** 我不认为我想为该类使用完全自定义的反序列化器，因为 Jackson 可以很好地处理许多其他属性。

这是我能想到的最好的，使用 BeanDeserializerModifier：

```
mapper.setDeserializerProvider(new StdDeserializerProvider()
  .withDeserializerModifier(new BeanDeserializerModifier() {
      @Override
      public BeanDeserializerBuilder updateBuilder(DeserializationConfig config, BasicBeanDescription beanDesc, BeanDeserializerBuilder builder) {
          if (beanDesc.getBeanClass() == Family.class) {
            CollectionType type = CollectionType.construct(ArrayList.class, SimpleType.construct(Member.class));
            TypeDeserializer typeDeserializer = type.getTypeHandler();
            SettableBeanProperty.MethodProperty membersProperty = (SettableBeanProperty.MethodProperty) builder.removeProperty("members");
            builder.addProperty(new SettableBeanProperty.MethodProperty(
               "members",
               type,
               typeDeserializer,
               beanDesc.getClassAnnotations(),
               (AnnotatedMethod) membersProperty.getMember()
            ));
          }
          return builder;
      }})); 
```

它有效，但对于我正在尝试做的事情来说似乎真的很低级（而且很冗长！）。我在这里想念什么？

## 编辑

我应该注意，我使用的是 Jackson 1.8.2，但如果有令人信服的理由可以更新。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T21:09:06.877

[混合注释](https://github.com/FasterXML/jackson-docs/wiki/JacksonMixInAnnotations)是我遗漏的难题的关键部分。这是解决此问题的*更清洁的方法：*

```
ObjectMapper mapper = new ObjectMapper();
mapper.getDeserializationConfig().addMixInAnnotations(Family.class, FamilyMixin.class);

Family family = mapper.readValue(json, Family.class);
Member member = (Member) family.getMembers().get(0);

//...

interface FamilyMixin {
    @JsonDeserialize(contentAs = Member.class)
    void setMembers(List members);
} 
```

混合注释让您可以对受您控制的代理进行注释。当将该混合类应用于真实类时，Jackson 的行为就好像这些注释注释了真实类的成员一样。

在我的例子中，我`JsonDeserialize.contentAs()`用来指定容器的内容类型。但我相信大多数注释应该可以使用这种方法。

# javascript - Handlebars.js - 在表达式中连接任意字符串

> ID：10835669
> 
> 赞同：4
> 
> 时间：2012-05-31T14:32:21.913
> 
> 标签：javascript, templates, mustache, handlebars.js

一个例子：

如果我想在用户名上附加一个“@”，使用 handlebars.js，我会这样做：

```
@{{username}} 
```

但是，如果我想使用自定义助手并将其应用于整个文本块（包括“@”）而不仅仅是表达式怎么办？像这样的东西...

```
handlebars.registerHelper('color', function(text) {
    return text.red;
});

{{color "@"username}} 
```

上面的模板无效，但你明白了......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T00:05:19.857

您可以这样做，例如：

```
<script id="template" type="text/x-handlebars-template">
    <ul>
        {{#each links}}
        <li><a href="{{ url }}">{{{color prefix title}}}</a></li>
        {{/each}}
    </ul>
</script>
<script>
Handlebars.registerHelper("color", function(prefix, title) {
    return '<span style="color: blue">' + (prefix ? prefix : "@") + title + '</span>';
}); // "@" is the default prefix

source = document.getElementById("template").innerHTML;
template = Handlebars.compile(source);
document.write(template({
    links: [
        {title: "prologin", prefix: "#", link: "http://prologin.org"},
        {title: "1.2.1", prefix: "§", link: "#paragraph-121"},
        {title: "jjvie", link: "http://twitter.com/jjvie"},
    ]
}));
</script> 
```

`<span class="username"></span>`或者`<hl></hl>`会更好。

# playframework - 如何在 playframework 1.2 下的 javascript 文件中获取 url？

> ID：10835672
> 
> 赞同：0
> 
> 时间：2012-05-31T14:32:30.240
> 
> 标签：playframework, playframework-1.x

我正在使用 play-1.2.4，但我发现 javascript 文件无法生成带有标签的 url：

```
@{Users.login()} 
```

确实我可以使用

```
/Users/login 
```

相反，但是当我导出到war文件并在tomcat中运行它时会导致问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:40:38.303

查看 JSAction 标记。[http://www.playframework.org/documentation/1.2/ajax](http://www.playframework.org/documentation/1.2/ajax)

jsAction 标记的目的是能够生成您需要从路由文件调用的 URL。但是，这些需要在您的视图中定义，因为它们需要由 Play 在服务器端生成，而不是在 js 文件中。

如果您真的希望能够将大部分代码保留在 JS 文件中，那么您可以在 main.html 文件中生成方法名称，并在 javascript 文件中进行引用。

例子

```
<script type="text/javascript">
   var loginAction = #{jsAction @User.login() /}       
</script> 
```

然后您可以使用

```
loginAction; 
```

# wordpress - 父类别和子类别帖子

> ID：10835675
> 
> 赞同：1
> 
> 时间：2012-05-31T14:32:40.150
> 
> 标签：wordpress

我有代码来显示每个类别（包括子类别）的最新 3 个帖子，我想从这些子类别中排除帖子，因为这些帖子已经显示在父类别中。

例如，我将打印机类别作为父类别，将（打印机配件，.....，.....）作为子类别。
所以它显示了每个最新的 3 个帖子，我想排除任何子类别（打印机配件、.....、....）及其帖子的显示。

这是代码：

```
$cat_args = array(
  'orderby' => 'name',
  'order' => 'ASC',
  'child_of' => 0
);

$categories =   get_categories($cat_args); 

foreach($categories as $category) {
    echo '<dl>';
    echo '<dt> <a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all items in %s" ), $category->name ) . '" ' . '>' . $category->name.'</a></dt>';

     $post_args = array(
      'numberposts' => 3,
      'category' => $category->term_id
    );

    $posts = get_posts($post_args);

    foreach($posts as $post) {
    ?>
        <dd>
                    <div class="allincat">

                    <div class="catmeta">                    
                    <span class="authinfo"> 
                    <div class="authimg"></div>
                     <?php the_author(); ?> | <?php the_time('jS F Y') ?> </span>

                    </div>

                    <div class="allincatimg">
                    <?php the_post_thumbnail(array(50,50)); ?> </div>
                    <div class="allincattit">                    
                    <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
                    </div>

                    </div>

                    </dd>
    <?php
    }
    echo '<div class="view-all"> <a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all items in %s" ), $category->name ) . '" ' . '>View all items in ' . $category->name.'</a></div>';
    echo '</dl>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:26:03.303

在构建参数数组后查询帖子。

```
<?php
    $args = array(
        'cat'      => 22, // your parent cat id here 
        'order'    => 'ASC'
        'orderby' => 'name',
        'posts_per_page' => 3
    );

    query_posts( $args ); ?>

          <?php if (have_posts()) : ?>
            <?php while (have_posts()) : the_post(); ?>
              <dd>
                <div class="allincat">
                  <!-- content here -->
                </div>
              </dd>
            <?php endwhile; ?>
          <?php endif; ?> 
```

# mysql - 配置mysql实例时如何启用对远程的root访问？

> ID：10835676
> 
> 赞同：1
> 
> 时间：2012-05-31T14:32:42.117
> 
> 标签：mysql

我创建了一个用于静默安装和配置 mysql 的批处理文件。

下列的：

```
msiexec /i "mysql-5.5.21.msi" /quiet INSTALLDIR="%pro%\MySQL\MySQL Server 5.5"

 MySQLInstanceConfig.exe -i -q "-lC:\mysql_install_log.txt" "-nMySQL Server 5.5" "-p%pro%\MySQL\MySQL Server 5.5" -v5.5.21 "-t%pro%\MySQL\MySQL Server 5.5\my-template.ini" "-c%pro%\MySQL\MySQL Server 5.5\my.ini" ServerType=DEVELOPMENT DatabaseType=MIXED ConnectionUsage=OLTP Port=3306 ServiceName=Mysql Charset=utf8 RootPassword=m117988m 
```

如何在批处理文件中使用 MySQLInstanceConfige.exe 启用对远程的 root 访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:52:30.530

根据 MySQL 文档，没有。

[http://dev.mysql.com/doc/mysql-windows-excerpt/5.1/en/mysql-config-wizard-cmdline.html](http://dev.mysql.com/doc/mysql-windows-excerpt/5.1/en/mysql-config-wizard-cmdline.html)

这是有道理的，因为它只配置不需要运行数据库的设置。

*   创建服务
*   创建/修改 my.ini 文件
*   配置 Windows 防火墙例外
*   将安装目录添加到路径环境变量

然而。在实例启动并运行后，您可以使用 mysql.exe 命令行工具编写脚本：

```
mysql.exe -u root -pm117988 -e "GRANT ALL ON *.* TO 'root'@'%' IDENTIFIED BY 'm117988' WITH GRANT OPTION; FLUSH PRIVILEGES;" 
```

或另一种不添加另一个用户条目但将现有用户条目配置为允许远程连接的方式。

```
mysql.exe -u root -pm117988 -e "UPDATE mysql.user SET host = '%' WHERE host = 'localhost' AND user = 'root'; 
```

您甚至可以在安装后提供一个 sql 文件来设置数据库。该文件可能包含此命令，甚至可以为您创建数据库/表/数据。

```
mysql.exe -u root -pm117988 < post_install_script.sql 
```

# c# - 重构 linq 表达式以删除重复代码

> ID：10835677
> 
> 赞同：0
> 
> 时间：2012-05-31T14:32:42.367
> 
> 标签：c#, entity-framework, linq-to-sql, lambda

我有以下代码，我尝试重构它以删除重复的代码。但是，每次我尝试重构它时，我都会卡住。有没有人可以帮助我解决这个问题。

```
 public static IOrderedQueryable<T> ObjectSort<T>(this IQueryable<T> entities, Expression<Func<T, object>> expression, string order = "asc")
    {
        var sortOrder = order == "asc" ? SortOrder.Ascending : SortOrder.Descending;
        return entities.ObjectSort(expression, sortOrder);
    }

    public static IOrderedQueryable<T> ObjectThenBy<T>(this IOrderedQueryable<T> entities, Expression<Func<T, object>> expression, string order = "asc")
    {
        var sortOrder = order == "asc" ? SortOrder.Ascending : SortOrder.Descending;
        return entities.ObjectThenBy(expression, sortOrder);
    }

    public static IOrderedQueryable<T> ObjectSort<T>(this IQueryable<T> entities, Expression<Func<T, object>> expression, SortOrder order = SortOrder.Ascending)
    {
        var unaryExpression = expression.Body as UnaryExpression;
        if (unaryExpression != null)
        {
            var propertyExpression = (MemberExpression)unaryExpression.Operand;
            var parameters = expression.Parameters;

            if (propertyExpression.Type == typeof(DateTime))
            {
                var newExpression = Expression.Lambda<Func<T, DateTime>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.OrderBy(newExpression) : entities.OrderByDescending(newExpression);
            }

            if (propertyExpression.Type == typeof(DateTime?))
            {
                var newExpression = Expression.Lambda<Func<T, DateTime?>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.OrderBy(newExpression) : entities.OrderByDescending(newExpression);
            }

            if (propertyExpression.Type == typeof(int))
            {
                var newExpression = Expression.Lambda<Func<T, int>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.OrderBy(newExpression) : entities.OrderByDescending(newExpression);
            }

            if (propertyExpression.Type == typeof(int?))
            {
                var newExpression = Expression.Lambda<Func<T, int?>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.OrderBy(newExpression) : entities.OrderByDescending(newExpression);
            }

            if (propertyExpression.Type == typeof(bool))
            {
                var newExpression = Expression.Lambda<Func<T, bool>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.OrderBy(newExpression) : entities.OrderByDescending(newExpression);
            }

            throw new NotSupportedException("Object type resolution not implemented for this type");
        }
        return order == SortOrder.Ascending ? entities.OrderBy(expression) : entities.OrderByDescending(expression);
    }

    public static IOrderedQueryable<T> ObjectThenBy<T>(this IOrderedQueryable<T> entities, Expression<Func<T, object>> expression, SortOrder order = SortOrder.Ascending)
    {
        var unaryExpression = expression.Body as UnaryExpression;
        if (unaryExpression != null)
        {
            var propertyExpression = (MemberExpression)unaryExpression.Operand;
            var parameters = expression.Parameters;

            if (propertyExpression.Type == typeof(DateTime))
            {
                var newExpression = Expression.Lambda<Func<T, DateTime>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.ThenBy(newExpression) : entities.ThenByDescending(newExpression);
            }

            if (propertyExpression.Type == typeof(DateTime?))
            {
                var newExpression = Expression.Lambda<Func<T, DateTime?>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.ThenBy(newExpression) : entities.ThenByDescending(newExpression);
            }

            if (propertyExpression.Type == typeof(int))
            {
                var newExpression = Expression.Lambda<Func<T, int>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.ThenBy(newExpression) : entities.ThenByDescending(newExpression);
            }

            if (propertyExpression.Type == typeof(int?))
            {
                var newExpression = Expression.Lambda<Func<T, int?>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.ThenBy(newExpression) : entities.ThenByDescending(newExpression);
            }

            if (propertyExpression.Type == typeof(bool))
            {
                var newExpression = Expression.Lambda<Func<T, bool>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.ThenBy(newExpression) : entities.ThenByDescending(newExpression);
            }

            throw new NotSupportedException("Object type resolution not implemented for this type");
        }
        return order == SortOrder.Ascending ? entities.ThenBy(expression) : entities.ThenByDescending(expression);
    } 
```

请注意，区别在于 OrderBy 和 ThenBy... 其余部分完全相同。希望有人知道重构它的方法。我试图创建一个 Func 参数来传递 OrderBy 或 ThenBy 方法。但是，我尝试的一切都被卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:49:58.613

OrderBy 和 ThenBy 的区别在于 OrderBy 期望 IQueryable，而 ThenBy 期望 IOrderedqueryAble。

现在要使用 OrderBy 或 ThenBy，您需要确定集合是 IQueryable 还是 IOrderedQueryAble。

之后，如果它是 IQueryable，则调用 OrderBy。如果是 IOrderedQueryable，则调用 ThenBy（在转换为 IOrderedQueryable 之后。

**重构的代码片段变为**

```
 public static IOrderedQueryable<T> ObjectSortRefactored<T>(this IQueryable<T> entities, Expression<Func<T, object>> expression, SortOrder order = SortOrder.Ascending)
    {
        var unaryExpression = expression.Body as UnaryExpression;
        if (unaryExpression != null)
        {
            var propertyExpression = (MemberExpression)unaryExpression.Operand;
            var parameters = expression.Parameters;

            if (propertyExpression.Type == typeof(DateTime))
            {
                var newExpression = Expression.Lambda<Func<T, DateTime>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.OrderBy(newExpression) : entities.OrderByDescending(newExpression);
            }

            if (propertyExpression.Type == typeof(DateTime?))
            {
                var newExpression = Expression.Lambda<Func<T, DateTime?>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.OrderBy(newExpression) : entities.OrderByDescending(newExpression);
            }

            if (propertyExpression.Type == typeof(int))
            {
                var newExpression = Expression.Lambda<Func<T, int>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.OrderBy(newExpression) : entities.OrderByDescending(newExpression);
            }

            if (propertyExpression.Type == typeof(int?))
            {
                var newExpression = Expression.Lambda<Func<T, int?>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.OrderBy(newExpression) : entities.OrderByDescending(newExpression);
            }

            if (propertyExpression.Type == typeof(bool))
            {
                var newExpression = Expression.Lambda<Func<T, bool>>(propertyExpression, parameters);
                return order == SortOrder.Ascending ? entities.OrderBy(newExpression) : entities.OrderByDescending(newExpression);
            }

            throw new NotSupportedException("Object type resolution not implemented for this type");
        }
        if(entities.GetType().IsAssignableFrom(typeof(IOrderedQueryable<T>)))
                return order == SortOrder.Ascending ? (entities as IOrderedQueryable<T>).ThenBy(expression) : (entities as IOrderedQueryable<T>).ThenByDescending(expression);

        return order == SortOrder.Ascending ? entities.OrderBy(expression) : entities.OrderByDescending(expression);
    } 
```

我还没有测试上面的代码片段。

# javascript - 如何获取选定锚文本的标记名及其href

> ID：10835681
> 
> 赞同：1
> 
> 时间：2012-05-31T14:33:26.300
> 
> 标签：javascript, jquery

当我在段落中选择一个链接（没有 id 或类）时，我需要获取所选链接的 href 值。我如何在 jQuery 中做到这一点？我正在为此使用`document.getSelection()`方法。但我没有看到任何`document.getSelection()`返回 href 值的方法。

当我通过拖动鼠标选择链接时，我可以获得如下所示的 href 值。

```
currentLink = document.getSelection().anchorNode.parentElement.href; 
```

但是当我通过双击文本选择链接时，上面的命令将不会返回 href 值。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:22:55.153

在这里，我给你写了一些东西让你开始。它比您的原始代码更具跨浏览器：

```
(function(AnchorSelector, $, undefined) {

    AnchorSelector.getAnchorHrefs = function(e) {
        var container = '';
        if (window.getSelection) {
            var sel = window.getSelection();
            if (sel.rangeCount) {
                var div = $('<div>');
                for (var i = 0, len = sel.rangeCount; i < len; ++i) {
                    div.append(sel.getRangeAt(i).cloneContents());
                }
                container = div;
            }
        } else if (document.selection) {
            container = $('<div>').append(document.selection.createRange().htmlText);
        }
        var arr = $.map(container.find('a'), function(n, i) {
            return ($(n).attr('href'));
        });
        if (arr.length) {
            alert(arr.join(','));
        }
        // Note: you can check e.type to see if it was a 'dblclick' or a 'mouseup' 
        // you may need to employ some type of debouncing to not get two alerts
        // when you double click the text
    }

    $(function() {
        $(document)
            .dblclick(AnchorSelector.getAnchorHrefs)
            .mouseup(AnchorSelector.getAnchorHrefs);
    });

})(window.AnchorSelector = window.AnchorSelector || {}, jQuery); 
```

这是一个[jsFiddle 演示](http://jsfiddle.net/g5fwB/1/)。

# javascript - JavaScript 函数不会在按钮单击时触发

> ID：10835687
> 
> 赞同：2
> 
> 时间：2012-05-31T14:33:59.477
> 
> 标签：javascript, function, onclick

我刚刚开始自学 JavaScript，并且正在做一些基本的练习。现在我正在尝试制作一个函数，它接受三个值并打印出最大的值。但是，该函数拒绝在按钮单击时触发。我尝试制作一个单独的、非常简单的函数来进行调试，它也拒绝触发。我以几乎完全相同的方式编写了其他练习函数（它们有两个参数而不是三个），它们工作正常。任何见解将不胜感激。

```
<!DOCTYPE HTML>
<html>
<head>
<script type = "text/javascript">
<!--

//Define a function Max() that takes three numbers as 
//arguments and returns the largest of them.
function Boo(){
    document.write("boo");
    alert("boo");
}

function Max(p1, p2, p3){
    document.write(p1+p2+p3);
    alert('BOO!')

    document.write(document.getElementById('value1').value);

    var max = Number(p1);
    v2 = Number(p2):
    v3 = Number(p3);    

    if (v2 > max)
        max = v2;
    if (v3 > max)
        max = v3;

    document.write(max);
}
-->
</script>
    </head>
    <body>
<form>
    <input type="text" id="value1" name="value1"/><br />
    <input type="text" id="value2" name="value2"/><br />
    <input type="text" id="value3" name="value3"/><br />
    <input type = "button" 
    onclick="Boo()" 
    value = "Compare!"/>
    <!-- onclick="Max(document.getElementById('value1').value,
                 document.getElementById('value2').value,
                 document.getElementById('value3').value)" -->
</form>
  </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T14:36:58.513

```
 v2 = Number(p2): 
```

应该

```
v2 = Number(p2); 
```

此外，请查看您使用的任何浏览器的开发人员工具，以查找类似这样的简单语法错误。（在大多数浏览器中，您可以按 F12）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:38:31.733

chrome 开发者工具说它有语法错误！

```
v2 = Number(p2): 
```

应该：

```
v2 = Number(p2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T14:36:06.763

您的 javascript 函数被注释掉了`<!-- -->`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T15:06:55.697

这就是你所需要的：

```
 var elements = document.getElementsByName('to_compare');
    var elementsAsArray = [].slice.call(elements);
    var numberValues = elementsAsArray.map(function(x) {
        return Number(x.value)
    });
    return Math.max.apply(this, numberValues); 
```

完整的演示，包括使用`console.log`而不是`document.write`，还包括如何附加到文档而不清除它：http: [//jsfiddle.net/yYhjD/1/](http://jsfiddle.net/yYhjD/1/)

```
<head>
    <script type="text/javascript">

function compare() {
    var elements = [].slice.call(document.getElementsByName('to_compare'));
    var numberValues = elements.map(function(x){return Number(x.value)});
    return Math.max.apply(this, numberValues);
}

    </script>
</head>

<body>
    <input type="text" id="value1" name="to_compare" value="-10"/>
    <input type="text" id="value2" name="to_compare" value="080"/>
    <input type="text" id="value3" name="to_compare" value="79"/>
    <br/>
    <input type="button" onclick="console.log(compare())" value="Compare!"/>
</body> 
```

# jquery - 悬停效果社交网络图标

> ID：10835692
> 
> 赞同：0
> 
> 时间：2012-05-31T14:34:28.037
> 
> 标签：jquery, css, icons, hover, social

我在任何地方都找不到说明如何在社交网络图标上创建像这样的悬停效果的教程。这是一个例子。

[http://demo.dotwired.de/walterwhite_html/](http://demo.dotwired.de/walterwhite_html/)

有人可以指出我正确的方向吗？我很想在我正在开发的网站上做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:46:24.153

我想你会想使用一些像

`.mouseenter()` [http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)

`.mouseleave()` [http://api.jquery.com/mouseleave/](http://api.jquery.com/mouseleave/)

`.slideUp()` [http://api.jquery.com/slideUp/](http://api.jquery.com/slideUp/)

`.slideDown()` [http://api.jquery.com/slideDown/](http://api.jquery.com/slideDown/)

因此，基本上当鼠标进入时，您将新图像向上滑动，而当鼠标离开时，您将旧图像向下滑动。

**编辑：**

查看源代码，这就是他们所做的。

```
$('footer .social li').hover(function() {
        $(this).find('a').clone().addClass('hover').appendTo($(this));
      $(this).find('a:first-child').stop().animate({ marginTop: -25 }, 150);
    }, function() {
      $(this).find('a:first-child').stop().animate({ marginTop: 0, opacity: 0.99 }, 150);
      setTimeout(function() { $(this).find('a.hover').remove(); }, 150);
    }); 
```

# php - 比较 php 框架 - 通过它们的独特功能

> ID：10835701
> 
> 赞同：0
> 
> 时间：2012-05-31T14:35:00.660
> 
> 标签：php, frameworks

我看到了很多与 php 框架的比较，但它们只是相当笼统 - 支持 OOP，支持 MVC ......确实有一些独特的功能可以区分它们。`Symfony`有闪存变量，`Zend`有大量的通用类。

有人知道这种比较的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:37:48.993

选择一个你听说过的，试试看，看看哪个合适。就我个人而言，我已经爱上了 CodeIgniter，只是没有考虑其他任何事情，因为我没有遇到我的目的的限制。

它真的是为工作选择最好的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:45:45.583

我想说看看*danp*在维基百科上发布的那个表格。我建议通过访问一些顶级框架的 Wikipedia 条目并选择一个来进行一些粗略的研究。框架的目标是帮助程序员提高工作效率。如果您总体上对 PHP 和 Web 编程有很好的掌握，那么任何框架都会有所帮助。

如果您来自 Rails 背景，我建议使用 CakePHP 或 Lithium，因为它们与 Rails 有着相似的基调。希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T14:52:07.753

比较独特功能的问题在于，独特功能大多是您不关心的东西，否则它已经在框架中实现了。我建议你去论坛，有人批评它，然后把它举到天空，看看他们的案例是什么，为什么他们的框架适合他们。

不要只看框架做了什么，而是看它做**对**了什么。

# .net - 如何从 vb.net 中的列表中获取重复项

> ID：10835702
> 
> 赞同：3
> 
> 时间：2012-05-31T14:35:05.003
> 
> 标签：.net, vb.net, linq

我有一个列表（字符串）。例如：{“C1”、“C12”、“C10”、“C1”、“C6”、“C22”、“C1”、“C6”}。我正在尝试编写一个函数来给我一个重复列表：列表中的 {"C1", "C6"}。每个重复项只会列出一次。我写的函数确实给了我任何回报。我不知道为什么。任何帮助或替代方法表示赞赏。仅供参考，我在 C# 中看到了一个非常相似的问题，但我不知道如何将该语法转换为 VB.net，因为我还没有跟上 LINQ 的速度。它在这里：[如何使用 LINQ 从列表中获取重复项？](https://stackoverflow.com/questions/3811464/how-to-get-duplicate-items-from-a-list-using-linq)

```
 ''' <summary>
    ''' Given a List(Of String), returns a list of items that are duplicated in the list.
    ''' Each duplicate returned is unique.
    ''' </summary>
    ''' <param name="Set1"></param>
    ''' <returns></returns>
    ''' <remarks></remarks>
    Public Shared Function GetDuplicateItems(ByVal Set1 As List(Of String)) As List(Of String)
        Dim DistinctItems As IEnumerable(Of String)
        'Dim DistinctResults As New List(Of String)
        Dim DuplicateItems As IEnumerable(Of String)
        Dim ItemsToReturn As New List(Of String)

        'Get a set of unique items in the list
        DistinctItems = Set1.Select(Function(x) x).Distinct()
        'Do I need to enumerate the result in order to force the thing to execute?
        'See remarks section of http://msdn.microsoft.com/en-us/library/bb300779.aspx
        'For Each Item As String In DistinctItems
        '    DistinctResults.Add(Item)
        'Next
        'Do a set subtraction (Set1 - UniqueItems)
        DuplicateItems = Set1.Except(DistinctItems)

        For Each Item As String In DuplicateItems
            ItemsToReturn.Add(Item)
        Next

        Return ItemsToReturn
    End Function 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T14:55:01.027

这与延迟执行无关，您的算法是错误的：`Distinct`不返回列表的唯一项目，它只是删除重复项。示例：在您的情况下`{"C1", "C12", "C10", "C1", "C6", "C22", "C1", "C6"}.Distinct()`产生`{"C1", "C12", "C10", "C6", "C22"}`。因此，`Set1.Except(DistinctItems)`总是会导致一个空列表。

* * *

这是您的问题的替代解决方案。它选择列表中计数大于 1 的所有项目：

```
Dim duplicates = list.Where(Function(x) list.Where(Function(y) x = y).Count() > 1).Distinct() 
```

使用示例：

```
Dim list As New List(Of String) From {"a", "a", "b", "c", "c"}
Dim duplicates = list.Where(Function(x) list.Where(Function(y) x = y).Count() > 1).Distinct()
' duplicates now contains {"a", "c"} 
```

编辑：使用 GroupBy 的替代解决方案（受 aquinas 启发）：

```
Dim duplicates = list.GroupBy(Function(x) x).Where(Function(x) x.Count > 1).Select(Function(x) x.Key) 
```

# android - AudioRecord 中的 gainBuffer 超时 - Android

> ID：10835704
> 
> 赞同：2
> 
> 时间：2012-05-31T14:35:05.657
> 
> 标签：android, android-intent, android-emulator, android-widget, android-audiorecord

我正在尝试从设备获取音频输入。在获取音频输入时，我尝试根据音频输入的强度将图标分配给标签。我使用以下代码：

```
public void run() {
        this.rec.startRecording();
        while (!this.done) {
            int nshorts = this.readBlock();
            if (nshorts <= 0)
                break;
        }
        //assignIcons();  
        this.rec.stop();
        this.rec.release();
    }

    int readBlock() {
        short[] buf = new short[this.block_size];

        int nshorts = this.rec.read(buf, 0, buf.length);
        if (nshorts > 0) {
            //Log.d(getClass().getName(), "Posting " + nshorts + " samples to queue");
            this.q.add(buf);
        }

        new Thread(new  Runnable() {
            public void run() {
                assignIcons(); 
            }
        }).start();
        return nshorts;
    }

    public void assignIcons(){
        //Add(Start)
        byte audioBuffer[]   = new  byte[this.minBufferSizeInBytes];//minBufferSizeInBytes = AudioRecord.getMinBufferSize( 8000,
                AudioFormat.CHANNEL_IN_MONO,AudioFormat.ENCODING_PCM_16BIT);
        float totalAbsValue = 0.0f;
        short sample = 0;
        int numberOfReadBytes = 0; 
        float tempFloatBuffer[] = new float[3];
        int tempIndex = 0;
        //Add(End)
      //Add(Start)
        numberOfReadBytes = this.rec.read( audioBuffer, 0, this.minBufferSizeInBytes );
        for( int i=0; i<numberOfReadBytes; i+=2 ) {
            sample = (short)( (audioBuffer[i]) | audioBuffer[i + 1] << 8 );
            if(sample!=0) {
                totalAbsValue += Math.abs( sample ) / (numberOfReadBytes/2);
            }
        }
        tempFloatBuffer[tempIndex%3] = totalAbsValue;
        temp = 0.0f;
        for( int i=0; i<3; ++i )
            temp += tempFloatBuffer[i];
        mCamBase = CameraBaseActivity.getInstance();
        mCamBase.handler.postDelayed(mCamBase.AnimateRunnable, 10);

        //Add(End)

    } 
```

我遇到的问题是，我不断得到以下日志，但没有得到想要的输出。我确信我显示的代码确实有问题，但不确定真正的问题是什么导致给出的日志连续输出。非常感谢解决此问题的任何帮助。

```
 01-03 09:24:40.930: DEBUG/co.nyk.android.audio.RecognizerTask(19152): signalling START
01-03 09:24:40.930: DEBUG/co.nyk.android.audio.RecognizerTask(19152): signalled START
01-03 09:24:40.930: DEBUG/co.nyk.android.audio.RecognizerTask(19152): gotSTART
01-03 09:24:40.930: DEBUG/co.nyk.android.audio.RecognizerTask(19152): START
01-03 09:24:41.836: WARN/AudioRecord(19152): obtainBuffer timed out (is the CPU pegged?) user=00001000, server=00001000
01-03 09:24:42.086: WARN/AudioRecord(19152): obtainBuffer timed out (is the CPU pegged?) user=00001800, server=00001800
01-03 09:24:43.321: WARN/AudioRecord(19152): obtainBuffer timed out (is the CPU pegged?) user=00004000, server=00004000
01-03 09:24:43.571: WARN/AudioRecord(19152): obtainBuffer timed out (is the CPU pegged?) user=00004800, server=00004800
01-03 09:24:43.836: WARN/AudioRecord(19152): obtainBuffer timed out (is the CPU pegged?) user=00005000, server=00005000
01-03 09:24:44.094: WARN/AudioRecord(19152): obtainBuffer timed out (is the CPU pegged?) user=00005800, server=00005800
01-03 09:24:44.391: WARN/AudioRecord(19152): obtainBuffer timed out (is the CPU pegged?) user=00006000, server=00006000
01-03 09:24:44.649: WARN/AudioRecord(19152): obtainBuffer timed out (is the CPU pegged?) user=00006800, server=00006800
01-03 09:24:45.118: WARN/AudioRecord(19152): obtainBuffer timed out (is the CPU pegged?) user=00007800, server=00007800
01-03 09:24:45.368: WARN/AudioRecord(19152): obtainBuffer timed out (is the CPU pegged?) user=00008000, server=00008000 
```

# ruby - 有什么理由使用日期？

> ID：10835705
> 
> 赞同：2
> 
> 时间：2012-05-31T14:35:08.227
> 
> 标签：ruby, datetime, date

至少有三种表示时间的类型：`Time`,`Date`和`DateTime`(from `ActiveSupport`)。

我的问题是，可以`DateTime`完全替代`Date`吗？换句话说，如果我可以使用`DateTime`，是否有任何理由改为使用`Date`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:57:10.223

```
require 'date'
d = Date.today
dt = DateTime.now
p Date.public_methods - DateTime.public_methods
#=>[:today]
p DateTime.public_methods - Date.public_methods
#=>[:now]
p d.public_methods - dt.public_methods
#=>[]
p dt.public_methods - d.public_methods
#=>[:hour, :min, :minute, :sec, :second, :sec_fraction, :second_fraction, :offset, :zone, :new_offset] 
```

DateTime 是 Date 的子类。使用 DateTime，您将失去`today`Class 方法并获得`now`回报。您不会丢失实例方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:57:18.387

如果您只想存储日期，例如生日或某事件发生的某一天，那么仅使用日期会更容易。那么您就没有因不同时区和时区计算而产生的麻烦。如果您使用 DateTime，那么如果您将 -2 小时的偏移量添加到上午 00:00，您将获得前一天的晚上 10:00。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:39:15.000

Date 不存储有关时间的任何信息，也不存储时区。因此，如果在某些时候您需要使用时间数据，您可能会遇到麻烦。

参考[这个链接](http://elabs.se/blog/36-working-with-time-zones-in-ruby-on-rails)，我发现它清楚地知道应该使用哪些类、何时以及如何使用。

# mysql - 如何构建这些关系？

> ID：10835706
> 
> 赞同：0
> 
> 时间：2012-05-31T14:35:09.700
> 
> 标签：mysql, sql

我有一张桌子`tablet`，有一列`period_id`。表和`tablet`表是多对一的关系，`period`表和`period`表是一对多的关系`sub_period`。我需要能够`sub_period`在 或 from 中指定单个条目`tablet`，其选择受`period`条目限制，但由于`sub_period`仅取决于`period`，因此我不能。我应该如何建模？

在我的模型中，每一`tablet`行都应该有一个`period`条目和一个`sub_period`条目。`period`和`sub_period`应该的关系`1:n`（一个时期可能有很多子时期，但每个子时期只能属于一个时期）。`sub-period`我希望能够从中选择的s`tablet`应该受到我选择的限制`period`

编辑：已经意识到我需要`tablet`和之间的 N:1 关系`period`：许多平板电脑可以与同一时期相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:58:17.867

`has_tablet ENUM('1')`在 中创建一个可为空的列`sub_period`并`UNIQUE`在`sub_period (period, has_tablet)`.

`has_tablet`只能接受值`1`，或者`NULL`这意味着您可以将每个时期的一个季节设置为“拥有平板电脑”。由于`period`to`tablet`是一对一的，因此这也唯一标识了 the `tablet`too。

使用此解决方案，可以在一段时间内完全不设置任何平板电脑。如果有问题，请添加`period`并`tablet`参考。`tablet (period, sub_period)``sub_period (period, sub_period)`

这是一种非规范化，但它永远不会导致不一致（因为在两个表中都`period`定义了）。`sub_period`

**更新：**

似乎那个时期对平板电脑是一对多的。在这种情况下，只需添加 make `tablet`reference`sub_period`而不是`period`. `period`关系可以通过简单的连接来传递推断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:48:55.510

Then you have 2 options:

*   database layer: implement consistency contraints through triggers. after insert or update, if sub_pediod is not a sub_period of the tablet's period, raise the appropriate error.
*   applicative layer: implement the proper GUI to provide the right choices only, whenever it is necessary.

The second option is my favorite whenever it is about non sensitive data (keep in mind somebody could always skip the client interface), because it usually gives me more "range of motion" with how I want to deal with the problem. Of course there are always exceptions...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:52:23.047

当你为你建模时，通常你不会创建 1:1 关系，当你规范化时你会注意到关系为 1:1 的表你可以将它们匹配到一个表中，这就是我的看法：如果你有 3 个有关系的表

*   **平板电脑**1:n **sub_period**
*   **平板电脑**1:1**时期**

（图中的键是主键，红色符号是外键）

![在此处输入图像描述](../Images/33a80f04e799a03b1a2ada07cfcb1375.png)

或者您可以在**Tablet**和**Period**表之间进行匹配，模型将如下所示

![在此处输入图像描述](../Images/91f2572d60d048f82fd534d5298a4d85.png)

**平板电脑**吸收了**Period**的所有属性，但这取决于您，您必须根据自己的需要调整模型。

# python - 带有两个/三个字母单词的 Django 预填充字段

> ID：10835710
> 
> 赞同：2
> 
> 时间：2012-05-31T14:35:33.550
> 
> 标签：python, django, django-admin

在我的 admin.py 文件中，我试图使用 Prepopulated_fields 来自动添加标题。然而，短的两个字母单词似乎有问题。当我输入“Is”、“the”或“to”时，它会将其从 slug 中删除。我也试过“之前”，第二次我按下 E 按钮，它也把它屏蔽掉了。这是预填充字段的预期还是我做错了什么？

模型.py

```
title = models.CharField(max_length=255)
entry = models.TextField()    
date_edited = models.DateTimeField(auto_now=True, verbose_name = "Last edited")
date_posted = models.DateTimeField(verbose_name="Post Date")
slug = models.SlugField(max_length=255, unique=True) 
```

管理员.py

```
 prepopulated_fields = {"slug": ("title",)} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:47:11.770

就像@Alasdair 在他的回答中所说，当您使用 prepoulated_fields 时，有些词会被忽略。我没有覆盖处理这些单词的 js 文件，而是将 slug 字段从 save_model 中的标题转到。

```
def save_model(self, request, obj, form, change):        
    if not change:
        obj.slug = slugify(('%s') % obj.title)
    obj.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:49:21.640

您正在`prepopulated_fields`正确使用该选项。如果您查看 django 管理应用程序中包含的[urlify.js](https://github.com/django/django/blob/master/django/contrib/admin/static/admin/js/urlify.js)脚本，您会看到有一个被忽略的单词列表。

除了编辑文件本身之外，我不知道有一种简单的方法来修改行为，这并不理想。

# java - 休眠中是否存在类型化查询？

> ID：10835711
> 
> 赞同：1
> 
> 时间：2012-05-31T14:35:33.593
> 
> 标签：java, hibernate, types

在 JPA 中存在类型化查询：

TypedQuery q;

在hibernate中是否存在类似的？谢谢。

# javascript - 在 jquery 中发送正常请求（不是 ajax）

> ID：10835715
> 
> 赞同：11
> 
> 时间：2012-05-31T14:35:36.380
> 
> 标签：javascript, jquery, asp.net-mvc-3

jquery 中是否有任何方法，如 $.post 、 $.ajax 等，其工作方式类似于普通表单提交。我知道，但它需要一个表单元素，我们可以在 jquery 中`.submit()`发送一个**没有表单元素的普通请求吗？**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-31T14:46:55.057

您可以使用`$.ajax()`. 此外，要使其表现得像普通形式一样，请将`async`属性设置为`false`.

```
$.ajax({
    url:   "/controller/action",
    data:  {'foo':'bar'},
    async: false
}); 
```

这将导致您被发送到：

```
"/controller/action?foo=bar" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-31T14:45:14.277

```
window.location.href = '/controller/action?foo=bar'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T14:50:47.177

你不清楚你想要实现什么。据我了解，我假设您想向服务器发送 GET 或 POST（类似表单提交）请求，并使其看起来像一个真实的请求。

在这种情况下，你会：

*   使用适当的参数创建一个 XMLHTTPRequest。
*   使其同步。
*   使用响应覆盖 DOM。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T14:46:33.867

不完全清楚您的目标是什么，但是您可以使用 jQuery 的序列化 ( [docs](http://api.jquery.com/serialize/) ) 从输入中传递一组值，而不是在表单或任何其他项目中。但是，您仍然需要以某种方式发布数据。

# flash - 为什么 videojs 不能在 IE6/7/8 中播放我的 Flash 视频？

> ID：10835716
> 
> 赞同：5
> 
> 时间：2012-05-31T14:35:40.373
> 
> 标签：flash, internet-explorer-8, html5-video

我已将 .mp4 视频转换为 ogg/webm/flv 格式（使用 ffmpeg）并使用 videojs 创建以下网页：

[http://tanguay.info/examples/testvideo](http://tanguay.info/examples/testvideo)

它在 IE9、Chrome、Safari、Opera 和 Firefox 中运行良好。

但是，在**IE6、IE7 和 IE8**中，它应该“退回到 Flash”，但它**不会显示**视频应该在的任何位置（在 IETester 中测试）：

![在此处输入图像描述](../Images/0bc69b190d2398791a850570078bb090.png)

**如何让这个页面在 IE6/IE7/IE8 中播放？**

* * *

**.htaccess**

```
AddType audio/ogg oga ogg
AddType video/ogg ogv
AddType video/webm webm
AddType video/x-flv flv 
```

**索引.htm**

```
<!DOCTYPE html> 
<html>
    <head>
        <link href="videojs/video-js.css" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <script type="text/javascript">
        $(init);

        function init() {
            $('button#buttonSmallSize').click(function() {
                //$('video#my_video_1').css('width','512px');
                //$('video#my_video_1').css('height','288px');
                $('div#message').html('small size not yet implemented');
            });

            $('button#buttonLargeSize').click(function() {
                //$('video#my_video_1').css('width','768px');
                //$('video#my_video_1').css('height','432px');
                $('div#message').html('large size not yet implemented');
            });

        }

    </script>
    <style type="text/css">
        div#buttonRow {
            margin: 0 0 12px 0;
        }
        .theButton {
            float: left;
            margin: 0 5px 0 0;
            cursor: hand;
            cursor: pointer;
        }   
        .theMessage {
            float: left;
            margin: 0 5px 0 0;
            font-family: arial;
            color:#fff;
            font-size: 14pt;
        }   

    </style>

    </head>
<body style="background-color: #888">
    <div id="videobox" style="border-radius: 5px; width: 513px; padding: 10px; border: 1px solid #fff;background-image:url('images/chrome.jpg');;box-shadow: 10px 10px 5px #555">

    <div id="buttonRow">
    <button id="buttonSmallSize" class="theButton">Small Size</button>
    <button id="buttonLargeSize" class="theButton">Large Size</button>
    <div id="message" class="theMessage"></div>
    <div style="clear:both"></div>
    </div>
    <video id="my_video_1" class="video-js vjs-default-skin" controls preload="auto" width="512" height="288" data-setup="{}">
      <source src="videos/damconnect.mp4" type='video/mp4'>
      <source src="videos/damconnect.webm" type='video/webm'>
      <source src="videos/damconnect.ogg" type='video/ogg'>
      <source src="videos/damconnect.flv" type='video/x-flv'>
    </video>

    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:14:43.053

使用 videojs，您不会像那样调用 flash 视频。它会创建一个嵌入视频的 swf，只需访问[http://videojs.com/docs/setup/](http://videojs.com/docs/setup/)并按照指南进行操作。

# c++ - c++ 抽象类的递归头文件

> ID：10835718
> 
> 赞同：-1
> 
> 时间：2012-05-31T14:35:44.123
> 
> 标签：c++, recursion, abstract, inheritance, inherited

假设我想编译这样的东西：

```
//Prova.h:
//--------------------
#ifndef _PROVA_
#define _PROVA_

#include "Terza.h"

class Prova{
public:
 Prova();

};
#endif 
```

和

```
//Terza.h:
//--------------------
#ifndef _TERZA_
#define _TERZA_

#include "EreProva.h"

class Terza{
public:
  Terza();
};
#endif 
```

和

```
//EreProva.h:
//--------------------
#ifndef _EREPROVA_
#define _EREPROVA_

#include "Prova.h"

class EreProva : public Prova{
  public:
  EreProva();
};
#endif 
```

这不会编译说“'Prova'：未定义的基类”。

避免继承类之间的标头递归的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:41:11.443

如果您需要循环依赖，则说明您的设计有问题，您应该重新审视您的设计，并尝试删除这种复杂且不需要的循环依赖。

克服循环依赖的一种方法是使用**[Forward Declarations](http://en.wikipedia.org/wiki/Forward_declaration)**，但请注意，一旦您转发声明一个类型，该类型就会成为编译器的**不完整类型**，并且您可以使用它执行哪些操作是有限制的。您不能对需要编译器知道类型的内存布局的类型实例执行任何操作。

**好读：**
[我什么时候可以使用前向声明？](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:01:11.277

在这段代码中：

```
//Prova.h:
//--------------------
#ifndef _PROVA_
#define _PROVA_

#include "Terza.h"

class Prova{
public:
 Prova();

}; 
```

由于您不`Tezra`以任何方式使用该类，因此您不需要`#include`. 把它拿出来。此外，您还缺少#endif。关闭此**文件**`#ifndef`中的匹配项。`#endif`

 **而且：

```
//Terza.h:
//--------------------
#ifndef _TERZA_
#define _TERZA_

#include "EreProva.h"

class Terza{
public:
  Terza();
};
#endif

#endif 
```

你也根本不使用`EreProva`这个文件中的类——所以去掉这个`#include`语句。`#endif`文件末尾还有一个额外内容。这里只有一个`#ifndef`，所以应该只有一个`#endif`。把最后一个拿出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:41:01.363

有时您可以通过以下方式解决此类问题：(1) 尝试在文件顶部添加“#pragma once”指令，尽管这可能是特定于编译器的（我前段时间在 VC++ 中开发时使用过它） ) (2) 您可以尝试添加“class Prova”或其他任何类，而不是在类中包含头文件，以指示您稍后将定义但现在想“使用”的类。

虽然正如 Als 所说，最好避免这样的设计。**

# iphone - 应用程序请求在 iPhone 浏览器中不起作用，但在 Facebook 应用程序中起作用

> ID：10835721
> 
> 赞同：5
> 
> 时间：2012-05-31T14:35:49.413
> 
> 标签：iphone, ios, distribution, apprequests, facebook-app-requests

我正在从我的 iPhone 应用程序发送一个应用程序请求，并希望用户在接受请求时被重定向到 App Store 页面。

在应用程序设置中，除了“Native iOS App”之外，我还添加了带有虚假 Canvas URL 的“App on Facebook”项目，以便查看请求（它们不会在没有 Canvas URL 的情况下出现）。在 iPhone/iPad 上的 Facebook 应用程序中一切正常，但在设备上的 Safari 浏览器中无法正常工作。

请求不带appstore而是打开错误页面：

```
Error
Sorry, the application you were using is experiencing a problem. Please try again later. 
```

我见过其他一些运行良好的应用程序：在浏览器中单击请求会带来 appstore。所以猜猜应用程序设置或类似设置中缺少某些东西。有什么线索吗？

![屏幕截图](../Images/74cf09090e743019a3e83ff6ff3e2c17.png) ![屏幕截图](../Images/39804808dce71302dded3245269b8506.png) ![屏幕截图](../Images/cdacdf3f3ceb5690d96bc06abdf6da84.png) ![屏幕截图](../Images/8e7cb944d417c5c1a5291f50a2064ab0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T04:49:30.220

您是否尝试过使用您的应用商店链接作为 URL？

# events - 禁用鼠标事件和进度条

> ID：10835723
> 
> 赞同：0
> 
> 时间：2012-05-31T14:35:51.147
> 
> 标签：events, webgl, xtk

**如何禁用鼠标事件？**

我想在体积的网格和切片上使用非常简单的鼠标事件，并在那里使用一些 ajax 调用，因此不需要集成事件。

**如何禁用进度条？**

我在某处读过...

**有什么*参考资料*可以让我看到可用的命令吗？**

[xtk 库](http://goxtk.com)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:45:17.323

交互器和渲染器都有配置选项

```
var r = X.renderer3D();
// to disable the progress bar
r.config.PROGRESSBAR_ENABLED = false;
r.init(); // the r.init creates the interactor

// to disable the mouse wheel interaction
r.interactor.config.MOUSEWHEEL_ENABLED = false;
// to disable mouse clicks
r.interactor.config.MOUSECLICKS_ENABLED = false;
// init the interactor again
r.interactor.init(); 
```

要获取有关 API 的信息，请访问[http://api.goXTK.com](http://api.goXTK.com)。不幸的是，当前的 API 文档并没有涵盖所有内容（配置选项）。因此，请查看此处记录的来源：[https ://github.com/xtk/X/blob/master/io/interactor.js#L189](https://github.com/xtk/X/blob/master/io/interactor.js#L189)

# php - 使用 EntityReference，我如何创建一个显示哪些节点引用当前节点的 Drupal 块？

> ID：10835727
> 
> 赞同：0
> 
> 时间：2012-05-31T14:36:08.780
> 
> 标签：php, drupal, drupal-7, entityreference

因此，假设我有一个酒店节点和一个餐厅节点。我想要一个使用 EntityReference 明确附加到酒店节点的餐厅节点列表。意思是，餐厅内容类型中有一个字段引用酒店节点。

似乎我应该能够创建一个块视图来查看用户正在查看的节点，并显示相关节点的列表，但我无法让它工作。

我有一个显示所有餐馆的块，并且一直在尝试使上下文过滤器起作用，但是每当我尝试创建上下文过滤器时，我都会收到此错误：“检测到非法选择。请联系站点管理员。” 这似乎应该很简单，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:16:20.807

为此，您将需要上下文过滤器。我在这里回答了一个与此类似的问题：[如何在与任何其他不同类型节点相关的视图中显示这些节点](https://stackoverflow.com/questions/10025713/way-to-display-those-nodes-in-a-view-that-are-related-to-any-other-node-of-a-dif/10033972#10033972)

# sql-server - 将 SQL LIKE 转换为 LINQ 到 SQL

> ID：10835729
> 
> 赞同：2
> 
> 时间：2012-05-31T14:36:16.313
> 
> 标签：sql-server, linq-to-sql

我有以下 SQL 片段，我无法弄清楚如何翻译成 LINQ

```
(p.prioid LIKE '1%' OR p.prioid LIKE '2%' OR p.prioid LIKE '3%') 
```

我试过这个：

```
(p.prioid.Contains(1) || p.prioid.Contains(2) || p.prioid.Contains(3)) 
```

但收到以下错误消息：“无法从 int 转换为字符串”

我检查了表格，并且 1、2 和 3 是 int 数据类型，所以我认为如果通过添加引号将 int 转换为字符串，它将无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:37:57.157

尝试这个：

```
(p.prioid.ToString().StartsWith("1") || p.prioid.ToString().StartsWith("2") || p.prioid.ToString().StartWith("3")) 
```

快-n-脏:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:39:32.580

LIKE 只能使用提供的字符串数据，即使您正在搜索其他数据类型。

如果您注意到，即使在 SQL 中，您也将它们作为字符串提交。

```
p.prioid LIKE '1%' OR p.prioid LIKE '2%' OR p.prioid LIKE '3%' 
```

快速修复将使用`.ToString()`并提交您的查询。

```
(p.prioid.Contains(1.ToString()) || p.prioid.Contains(2.ToString()) || p.prioid.Contains(3.ToString())) 
```

我想这将使用某种变量而不是像示例这样的固定值。

# c# - 将形状动画/移动到特定坐标？

> ID：10835732
> 
> 赞同：0
> 
> 时间：2012-05-31T14:36:26.653
> 
> 标签：c#, animation

我随机生成两个矩形，第一个矩形保持在原位，但我想移动/动画第二个矩形，使其右下角等于第一个矩形左上角占据的位置，atm 我已经基本上得到的是；

```
if(count != 300)
{
    rect2.X = count + (rect1.X - 100);
    rect2.Y = count + (rect1.Y - 100);
    count +=2
} 
```

这是在计时器事件中，但显然不是我想要的，我已经尝试了上述的多种变体，但似乎没有一个可以完成这项工作。

我敢肯定会有一个烦人的简单答案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:13:59.443

假设屏幕的左上角是`{0,0}`，右下角是`{screenWidth, screenHeight}` 我在这里也假设浮点坐标（即 Rect.X 是 a`double`或`float`）。如果不是，您需要在下面的第 2 步中做一些工作，以确保在每个步骤中移动均匀数量的像素。

这是基本算法，伪代码：

1.  计算动画矩形左上角的最终位置：`finalPos = {r1.x + r1.width, r1.y+r1.width}`
2.  决定你想要多少步，并计算矩形每一步应该移动多远。让我们以 100 步为例。`dx = r2.x - finalPos.x / 100`,`dy = r2.y - finalPos.y / 100`
3.  在每个计时器事件中，您只需将`dx`和添加`dy`到动画矩形的位置：

像这样：

```
if (currentStep < 300)
{
    r2.x += dx;
    r2.y += dy;
    currentStep++;
}
else
{
    // We're done
    timer.Stop();
} 
```

当然，如果您使用图形框架来绘制东西，您可能已经可以访问可以为您完成上述工作的动画框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:33:11.807

如果您能够使用 WPF，这非常简单：

在窗口 xaml 中：

```
<Window x:Class="WpfApplication6.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="600" Width="600">
    <Window.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation
                      Storyboard.TargetName="AnimatedRect"
                      Storyboard.TargetProperty="(Canvas.Left)"
                      To="{Binding ElementName=FixedRect, Path=(Canvas.Left)}" Duration="0:0:1"/>
                    <DoubleAnimation
                      Storyboard.TargetName="AnimatedRect"
                      Storyboard.TargetProperty="(Canvas.Top)"
                      To="{Binding ElementName=FixedRect, Path=(Canvas.Top)}" Duration="0:0:1"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Window.Triggers>

    <Canvas>
        <Rectangle Name="FixedRect"
                   StrokeThickness="2"
                   Stroke="Black"
                   Width="{Binding R1.Width}"
                   Height="{Binding R1.Height}"
                   Canvas.Left="{Binding R1.X}"
                   Canvas.Top="{Binding R1.Y}"/>
        <Rectangle Name="AnimatedRect"
                   StrokeThickness="2"
                   Stroke="Black"
                   Width="{Binding R2.Width}"
                   Height="{Binding R2.Height}"
                   Canvas.Left="{Binding R2.X}"
                   Canvas.Top="{Binding R2.Y}"/>
    </Canvas>
</Window> 
```

代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        Random rnd = new Random();

        Rect r1 = new Rect();
        r1.X = rnd.Next(500);
        r1.Y = rnd.Next(500);
        r1.Width = rnd.Next(50,100);
        r1.Height = rnd.Next(50, 100);
        R1 = r1;

        Rect r2 = new Rect();
        r2.X = rnd.Next(500);
        r2.Y = rnd.Next(500);
        r2.Width = rnd.Next(50, 100);
        r2.Height = rnd.Next(50, 100);
        R2 = r2;

        DataContext = this;
    }

    public Rect R1 { get; set; }
    public Rect R2 { get; set; }

} 
```

# algorithm - 在 O(n+logn) 时间内搜索最大和第二大数

> ID：10835733
> 
> 赞同：0
> 
> 时间：2012-05-31T14:36:34.457
> 
> 标签：algorithm

> **可能的重复：**
> [在数组中找到第二个最大的元素，具有最小的比较数](https://stackoverflow.com/questions/3628718/find-the-2nd-largest-element-in-an-array-with-minimum-of-comparisom)

我可以知道如何实现在 O(n+logn) 时间内搜索最大和第二大数字吗？先感谢您。

最好的问候， Pidig

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T14:38:18.177

请注意，`O(n+logn) = O(n)`在列表上迭代两次是`O(n)`.

1.  迭代一次以找到最大值并删除/标记它，
2.  然后第二次迭代找到新的最大值（第二大元素），

因为它在数组上迭代常数次，所以算法是`O(n)`.

对于通用`k`最大元素：您可以使用 min [heap](http://en.wikipedia.org/wiki/Heap_%28data_structure%29) in`O(nlogk)`或[selection algorithm](http://en.wikipedia.org/wiki/Selection_algorithm) in `O(n)`- 如[本答案](https://stackoverflow.com/questions/10751953/store-the-largest-5000-numbers-from-a-stream-of-numbers/10751982#10751982)中所述，但对于 2 个最大元素 - 这些方法过于矫枉过正。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T14:51:15.843

我猜你的意思是 n + log(n) - 2 个比较。

这是你如何做到的。

比较两组中的元素。即制作 n/2 组，每组两个元素。

以这种方式继续使用 n/4、n/8、n/16 等，直到获得第一个（最大）元素。

现在下一个最大的元素必须在此方法中的第一个元素的失败者中。因此 log(n) 对此进行了更多比较。

准确地说，这将需要 n + log(n) - 2 次比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T14:38:51.833

您实际上可以`O(n)`及时做到这一点：[选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)

# java - 在通过调整大小或操作重新绘制之前，JPanel 中的 JButton 无法正确显示

> ID：10835735
> 
> 赞同：1
> 
> 时间：2012-05-31T14:36:49.743
> 
> 标签：java, resize, jpanel, paint, paintcomponent

这个问题我已经有一段时间了，搜索了很多论坛和网站（包括这个），但仍然没有找到我的问题的答案。

这是我的问题：我正在构建一个可视日历。我有一个包含多个面板的父面板。我重新绘制父面板，并使 3 覆盖不透明（假）。直到我调整框架大小（或使用覆盖 3 个按钮之一的按钮，但在此示例中省略了这些按钮，因为它使代码更长）**，父面板的油漆才会显示**

无论如何，这是代码，我将其简化为问题部分：

```
public class Calendar extends JPanel{

  public static void main(String[] args){
    JFrame frame = new JFrame();
    frame.setSize(1600,150);
    frame.add(new Calendar());
    frame.setVisible(true);
  }

  public Calendar(){
    setLayout(new GridBagLayout());
    GridBagConstraints cc = new GridBagConstraints();
    cc.weightx = 1;
    cc.weighty = 1;
    cc.gridx = 0;
    cc.fill = GridBagConstraints.BOTH;

    //Initiate Panels
    JPanel yearpanel = new JPanel();
    JPanel monthpanel = new JPanel();
    JPanel daypanel = new JPanel();

    yearpanel.setLayout(new GridBagLayout());
    monthpanel.setLayout(new GridBagLayout());
    daypanel.setLayout(new GridBagLayout());

    // Set sizes
    int width = (int) this.getPreferredSize().getWidth();
    int height = (int) (this.getPreferredSize().getHeight() / 3);
    yearpanel.setSize(width,height);
    daypanel.setSize(width,height);
    monthpanel.setSize(width,height);

    //make transparent
    yearpanel.setOpaque(false);
    monthpanel.setOpaque(false);
    daypanel.setOpaque(false);
  }        

  @Override
  public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Image image = Toolkit.getDefaultToolkit().getImage("Images/CalendarBackground.jpg");
    g.drawImage(image, 0, 0, this.getWidth(), this.getHeight(), null);
  }
} 
```

我不知道为什么会这样+我在网上找不到答案，只有遇到同样问题的人的问题被放弃了：/

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:54:06.120

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    Image image = Toolkit.getDefaultToolkit().getImage("Images/CalendarBackground.jpg");
    g.drawImage(image, 0, 0, this.getWidth(), this.getHeight(), null);
} 
```

1.  `image`不应该在paint方法中加载。相反，它应该被声明为类属性并预加载。
2.  该`Toolkit`方法是异步的，因此将组件用作`ImageObserver`.

    `g.drawImage(image, 0, 0, this.getWidth(), this.getHeight(), this);`

* * *

这是一个[有效的 SSCCE](https://stackoverflow.com/a/7981390/418556)，就像您似乎正在尝试的那样。

![](../Images/b47db6002dd0fad917d5e08697da077b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:05:56.120

检查的返回值`Graphics.drawImage()`。我敢打赌它会返回 false，这意味着您正在绘制的图像尚未完全加载和缩放。`paintComponent`尝试将图像加载到您的方法以外的其他地方，例如您的`Calendar`构造函数。

# android - 获取互联网请求应用程序android

> ID：10835740
> 
> 赞同：0
> 
> 时间：2012-05-31T14:37:07.550
> 
> 标签：android

嗨，我想制作一个应用程序，在其中监视 android 中的互联网流量。有没有办法可以找到哪个应用程序正在访问互联网并控制它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:38:50.043

您可以使用 监控 Internet 流量`TrafficStats`。是否会有每个应用程序（实际上是每个 UID）的统计信息将因设备而异。

你绝对不能“控制它”。

# jquery - 我可以更改 jqGrid 中新添加行的 ID 吗？

> ID：10835750
> 
> 赞同：3
> 
> 时间：2012-05-31T14:37:52.653
> 
> 标签：jquery, jqgrid

我正在使用 jqGrid，`inlineNav`以便用户可以在本地编辑/添加/删除行，然后在完成后将所有更改提交到服务器。我希望能够在本地向网格中添加多个新行，但由于其他要求，我需要新添加的行具有唯一 ID 而不是默认的`new_row`. 此外，由于外键约束，我不能使用 ajax 调用在添加时立即保留新行。我尝试了以下操作，但 ID 值没有改变：

```
<input type="hidden" id="newRowIndex" />

$("#thisGrid").jqGrid('inlineNav', '#thisGridPager', {
    edit: false,
    addtext: "Add",
    save: false,
    cancel: false,
    addParams: {
        position: 'last',
        addRowParams: {
            keys: true,
            oneditfunc: function (rowid) {
                var newRowIndex = $("#newRowIndex").val();
                if (!newRowIndex)
                    newRowIndex = 1;
                $("#thisGrid").jqGrid('setCell', rowid, 'id', rowid + "_" + newRowIndex, '', '');
                newRowIndex++;
                $("#newRowIndex").val(newRowIndex);
            }
        }
    }
}); 
```

我只想将新添加的行的 ID 设置为`new_row_1`，为每个新添加的行增加索引。这可能吗？如果可以，怎么做？

**解决方案**

除了 Dean 的回答，我发现`oneditfunc`在`addRowParams`. 我发现使用 jqGrid 的[`afterInsertRow`](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)事件有效：

```
afterInsertRow: function (rowid, rowdata, rowelem) {
    if (rowid == 'new_row') {
        var newRowIndex = $("#newRowIndex").val();
        if(!newRowIndex)
            newRowIndex = 1;
        var newRowId = rowid + "_" + newRowIndex;
        $("#new_row").attr('id', newRowId);
        newRowIndex++;
        $("#newRowIndex").val(newRowIndex);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T18:15:05.873

要设置新行的 id，请使用：

```
 $("#new_row").attr('id',newId); 
```

参考这个问题： [我可以在不重新加载的情况下更改 JQGrid 中一行的主 ID 吗？](https://stackoverflow.com/questions/1923209/can-i-change-the-primary-id-of-a-row-in-jqgrid-without-reloading)

# c# - 删除添加到画布的所有图像

> ID：10835755
> 
> 赞同：18
> 
> 时间：2012-05-31T14:38:03.800
> 
> 标签：c#, .net, wpf, image, wpf-controls

有没有可能的方法来删除（删除）添加到`Canvas`C#（在 WFP 中）中的所有图像（子项）？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-31T14:39:32.827

你的意思是你只想删除所有的子元素？

```
canvas.Children.Clear(); 
```

看起来它应该完成这项工作。

编辑：如果您*只想*删除`Image`元素，您可以使用：

```
var images = canvas.Children.OfType<Image>().ToList();
foreach (var image in images)
{
    canvas.Children.Remove(image);
} 
```

这假设所有图像都是*直接*子元素 - 如果您想删除`Image`其他元素下的元素，它变得更加棘手。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T14:58:22.667

由于 Canvas 的子集合是 UIElementCollection 并且有很多其他控件使用这种类型的集合，我们可以通过扩展方法为所有控件添加 remove 方法。

```
public static class CanvasExtensions
{
    /// <summary>
    /// Removes all instances of a type of object from the children collection.
    /// </summary>
    /// <typeparam name="T">The type of object you want to remove.</typeparam>
    /// <param name="targetCollection">A reference to the canvas you want items removed from.</param>
    public static void Remove<T>(this UIElementCollection targetCollection)
    {
        // This will loop to the end of the children collection.
        int index = 0;

        // Loop over every element in the children collection.
        while (index < targetCollection.Count)
        {
            // Remove the item if it's of type T
            if (targetCollection[index] is T)
                targetCollection.RemoveAt(index);
            else
                index++;
        }
    }
} 
```

当此类存在时，您可以简单地使用该行删除所有图像（或任何其他类型的对象）。

```
testCanvas.Children.Remove<Image>(); 
```

# loops - 蚂蚁。如果尚未签名，请在 jars 上签名

> ID：10835756
> 
> 赞同：0
> 
> 时间：2012-05-31T14:38:06.533
> 
> 标签：loops, ant

我有一个包含很多罐子的应用程序。但是，罐子被上传到颠覆，但我需要建立一个蚂蚁，如果没有签署罐子只签署罐子。

这个想法是验证包含在定义文件集中的每个 jar，如果没有签名，则签名，但我不知道如何在指定路径为每个文件执行指令。

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:46:15.613

您可以使用[Apply](http://ant.apache.org/manual/Tasks/apply.html)任务为资源集合（例如文件集）中的每个文件执行系统命令。

您可以通过查看其 META-INF 目录来测试 jar 是否已签名。有关详细信息，请参阅[jarsigner](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/jarsigner.html)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:16:01.637

您可以只`SignJar`使用您的文件集执行任务，默认情况下它不会对已签名的 JAR 文件进行签名。请参阅[文档](http://ant.apache.org/manual/Tasks/signjar.html)进行确认 - 请注意，`force`Ant 1.8 引入的属性默认为`false`，也就是说，在以前的版本中，如果文件未签名，则不会对其进行签名。

（我在这里假设您的意思是“如果我已经签署了文件，则不要再次签署”，而不是“如果其他人签署了文件，请不要像我一样签署文件”。）

# r - R 中 rgl 包的 persp3d 函数如何映射纹理？

> ID：10835771
> 
> 赞同：2
> 
> 时间：2012-05-31T14:39:15.880
> 
> 标签：r

我正在尝试将图像映射到球体上，遵循 persp3d 文档中的这个示例：

```
lat <- matrix(seq(90,-90, len=50)*pi/180, 50, 50, byrow=TRUE)
long <- matrix(seq(-180, 180, len=50)*pi/180, 50, 50)

r <- 6378.1 # radius of Earth in km
x <- r*cos(lat)*cos(long)
y <- r*cos(lat)*sin(long)
z <- r*sin(lat)

open3d()
persp3d(x, y, z, col="white", 
       texture=system.file("textures/worldsmall.png",package="rgl"), 
       specular="black", axes=FALSE, box=FALSE, xlab="", ylab="", zlab="",
       normal_x=x, normal_y=y, normal_z=z) 
```

我最终会想在球体上的特定点上添加对象，因此需要知道图像文件中的哪些像素坐标对应于哪些 x、y、z（或 lat、long）值。换句话说，persp3d 假设 worldsmall.png 的地图投影是什么？（我不指望它能很好地映射到传统的地图投影上，因为 persp3d 显然不限于球体，但必须有*一些*算法将一组坐标转换为另一组坐标。）

# mongodb - 复杂的 Mongo 插入

> ID：10835772
> 
> 赞同：-1
> 
> 时间：2012-05-31T14:39:19.617
> 
> 标签：mongodb

或者......“对我来说很复杂”可能更准确。

无论如何，我打开了 mongod 和 mongo，并在 mongo 终端中输入了以下命令：

```
db.err_details.insert({"error_text" : "Log has found error on inbound", "co
de" : "WM2001_0", "product" : "WM2001", "profile : ["CR" : "11999002", "sol
s" : ["run", "to", "the", "hills"]], "otherinfo" : "Contact Bob Saget"}); 
```

err_details 确实存在，但这并不重要。无论如何，我按回车键，它给了我两次“...”然后就退出而不插入。它以前在查询中出现语法错误时已经这样做了……但是它不会告诉您错误在哪里或出了什么问题，而且，天哪，我这次找不到它。

如果意图不清楚，我希望“配置文件”有一个键值对数组，其中一个（“sols”）只有值，而不是键值对。

鉴于“配置文件”是一个对象，我尝试了以下操作：

```
db.err_details.insert({"error_text" : "Log has found error on inbound", "errco
de" : "WM2001_0", "product" : "WM2001", "profile" : {"CR" : "11999002", "sols" :
["run", "to", "the", "hills"]}, "otherinfo" : "Contact Bob Saget"}); 
```

这是有效的 mongo，但我想要一个对象数组，而不是包含带有数组的元素的对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:43:26.097

有语法错误。您对“profile”属性的值似乎是一个对象，但您使用数组的`[]`. 并且关于配置文件的引用之一也丢失了。

（提示：只需将您的命令复制/粘贴到任何 JS 检查服务，因为这是 Mongo 控制台使用的。具有即时错误突出显示的编辑器会做得非常好）。

我不太了解您的数据库的结构，但是“k/v 对数组”应该是这样的：

```
db.err_details.insert({
    "error_text" : "Log has found error on inbound",
    "code" : "WM2001_0",
    "product" : "WM2001",
    "profile" : [
        {"CR" : "11999002"},
        {"sols" : ["run", "to", "the", "hills"]}
    ],
    "otherinfo" : "Contact Bob Saget"
}); 
```

即 - 每一对都包裹在物体中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:45:36.763

数组，`[]`在 BSON/JSON/JavaScript 中无法键入，您需要使用 object `{}`。您的`Profile`属性有键，但类型为数组。

# java - 如何将Mac地址转换为十六进制并将其传递给java中的字节数组

> ID：10835773
> 
> 赞同：7
> 
> 时间：2012-05-31T14:39:21.113
> 
> 标签：java, android, hex

如何将 MacAddress 转换为十六进制字符串，然后将其解析为 java 中的字节？以及类似的IP地址？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-31T18:41:25.980

MAC 地址已经是十六进制格式，它是 6 对 2 个十六进制数字的形式。

```
String macAddress = "AA:BB:CC:DD:EE:FF";
String[] macAddressParts = macAddress.split(":");

// convert hex string to byte values
Byte[] macAddressBytes = new Byte[6];
for(int i=0; i<6; i++){
    Integer hex = Integer.parseInt(macAddressParts[i], 16);
    macAddressBytes[i] = hex.byteValue();
} 
```

和...

```
String ipAddress = "192.168.1.1";
String[] ipAddressParts = ipAddress.split("\\.");

// convert int string to byte values
Byte[] ipAddressBytes = new Byte[4];
for(int i=0; i<4; i++){
    Integer integer = Integer.parseInt(ipAddressParts[i]);
    ipAddressBytes[i] = integer.byteValue();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-10T19:58:58.057

[开源 IPAddress Java 库](https://seancfoley.github.io/IPAddress/)将解析 MAC 地址和 IP 地址，并以多态方式转换为字节。免责声明：我是那个图书馆的项目经理。

以下代码将满足您的要求：

```
 String ipv4Addr = "1.2.3.4";
    String ipv6Addr = "aaaa:bbbb:cccc:dddd::";
    String macAddr = "a:b:c:d:e:f";
    try {
        HostIdentifierString addressStrings[] = {
            new IPAddressString(ipv4Addr),
            new IPAddressString(ipv6Addr),
            new MACAddressString(macAddr)
        };
        Address addresses[] = new Address[addressStrings.length];
        for(int i = 0; i < addressStrings.length; i++) {
            addresses[i] = addressStrings[i].toAddress();//parse
        }
        for(Address addr : addresses) {
            byte bytes[] = addr.getBytes();
            //convert to a list of positive Integer for printing
            List<Integer> forPrinting = IntStream.range(0, bytes.length).map(idx -> 0xff & bytes[idx]).boxed().collect(Collectors.toList());
            System.out.println("bytes for " + addr + " are " + forPrinting);
        }
    } catch(HostIdentifierException | IOException e) {
        //e.getMessage has validation error
    } 
```

输出：

```
 bytes for 1.2.3.4 are [1, 2, 3, 4]
    bytes for aaaa:bbbb:cccc:dddd:: are [170, 170, 187, 187, 204, 204, 221, 221, 0, 0, 0, 0, 0, 0, 0, 0]
    bytes for 0a:0b:0c:0d:0e:0f are [10, 11, 12, 13, 14, 15] 
```

# c# - Aforge.Video 库的 MJPEGStream 函数示例

> ID：10835779
> 
> 赞同：1
> 
> 时间：2012-05-31T14:39:33.230
> 
> 标签：c#, windows, vb.net, mjpeg, aforge

有人可以给我一个完整的例子，使用这个用 VB.NET 或 C# 编写的库在图片框中显示流的图像

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:46:08.827

这是一个使用 AForge.Video.MJPEGStream 类的非常非常简单的表单。

```
private MJPEGStream VideoStream = new MJPEGStream();

private void frmMain_Load(object sender, System.EventArgs e)
{
    VideoStream.Source = "URL_HERE";
    VideoStream.Login = "USERNAME_HERE";
    VideoStream.Password = "PASSWORD_HERE";

    VideoStream.Start();
}

private void frmMain_FormClosing(object sender, System.Windows.Forms.FormClosingEventArgs e)
{
    VideoStream.Stop();
}

private void VideoStream_NewFrame(object sender, AForge.Video.NewFrameEventArgs eventArgs)
{
    Bitmap FrameData = new Bitmap(eventArgs.Frame);

    pbStream.Image = FrameData;
}

private void VideoStream_VideoSourceError(object sender, AForge.Video.VideoSourceErrorEventArgs eventArgs)
{
    Debug.WriteLine(eventArgs.Description);
}
public frmMain()
{
    InitializeComponent();
    this.FormClosing += new EventHandler(frmMain_FormClosing);
    this.Load += new EventHandler(frmMain_Load);
    VideoStream.NewFrame += new EventHandler(VideoStream_NewFrame);
    VideoStream.VideoSourceError+= new EventHandler(VideoStream_VideoSourceError);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:46:15.323

另一个例子：

```
 Imports AForge.Video

Public Class Form1
    Inherits Form
    Private stopWatch As Stopwatch = Nothing

    Private Sub MainForm_FormClosing(sender As Object, e As FormClosingEventArgs)
        CloseCurrentVideoSource()
    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        ' create video source
        Dim mjpegSource As New MJPEGStream("http://190.6.206.170/video/mjpg.cgi")
        mjpegSource.Login = "admin"
        mjpegSource.Password = ""
        ' open it
        OpenVideoSource(mjpegSource)

    End Sub

    ' Open video source
    Private Sub OpenVideoSource(source As IVideoSource)
        ' set busy cursor
        Me.Cursor = Cursors.WaitCursor

        ' stop current video source
        CloseCurrentVideoSource()

        ' start new video source
        videoSourcePlayer.VideoSource = source
        videoSourcePlayer.Start()

        ' reset stop watch
        stopWatch = Nothing

        ' start timer
        timer.Start()

        Me.Cursor = Cursors.[Default]
    End Sub

    ' Close video source if it is running
    Private Sub CloseCurrentVideoSource()
        If videoSourcePlayer.VideoSource IsNot Nothing Then
            videoSourcePlayer.SignalToStop()

            ' wait ~ 3 seconds
            For i As Integer = 0 To 29
                If Not videoSourcePlayer.IsRunning Then
                    Exit For
                End If
                System.Threading.Thread.Sleep(100)
            Next

            If videoSourcePlayer.IsRunning Then
                videoSourcePlayer.[Stop]()
            End If

            videoSourcePlayer.VideoSource = Nothing
        End If
    End Sub

    ' New frame received by the player
    Private Sub videoSourcePlayer_NewFrame(sender As Object, ByRef image As Bitmap)
        Dim now As DateTime = DateTime.Now
        Dim g As Graphics = Graphics.FromImage(image)

        ' paint current time
        Dim brush As New SolidBrush(Color.Red)
        g.DrawString(now.ToString(), Me.Font, brush, New PointF(5, 5))
        brush.Dispose()

        g.Dispose()
    End Sub

    Private Sub timer_Tick(sender As System.Object, e As System.EventArgs) Handles timer.Tick
        Dim videoSource As IVideoSource = videoSourcePlayer.VideoSource

        If videoSource IsNot Nothing Then
            ' get number of frames since the last timer tick
            Dim framesReceived As Integer = videoSource.FramesReceived

            If stopWatch Is Nothing Then
                stopWatch = New Stopwatch()
                stopWatch.Start()
            Else
                stopWatch.[Stop]()

                Dim fps As Single = 1000.0F * framesReceived / stopWatch.ElapsedMilliseconds
                Me.Text = fps.ToString("F2") & " fps"
                stopWatch.Reset()
                stopWatch.Start()
            End If
        End If
    End Sub
End Class 
```

**所需的控制：**

```
System.Windows.Forms.Timer 'For display fps
Aforge.Controls.VideoSourcePlayer 'For Display the video Img 
```

# python - 底图：用图形和地图创建图形

> ID：10835780
> 
> 赞同：1
> 
> 时间：2012-05-31T14:39:33.430
> 
> 标签：python, matplotlib

我正在使用底图创建地图，并希望将图表放在同一个图中。直到现在我这样做了：

```
m = Basemap(projection='merc',llcrnrlat=-32.5,urcrnrlat=-10,llcrnrlon=-57.5,urcrnrlon=-40,lat_ts=20,resolution='c')
x, y = m(lon, lat) # compute map proj coordinates.
parallels = np.arange(-50.,20,5.)
meridians = np.arange(-90.,0.,5.)
m.drawparallels(parallels,labels=[1,0,0,0],fontsize=10)
m.drawmeridians(meridians,labels=[0,0,0,1],fontsize=10)
m.scatter(x,y,s=abs(100.*np.array(correlacoes[i])),c=correlacoes[i],norm=mc.Normalize(vmin=-1.0,vmax=1.0))
m.drawcoastlines()
m.colorbar()
pyl.title(nomvar + ' cp ' + str(i+1) + '   v.e. %5.2f' % varexp[i])
pyl.savefig(dir_pro+projeto+arquivo + '_cp%3.3i' % (i+1) + '.png')   
pyl.clf()    
pyl.plot(indicesfs,fs[i])
pyl.title(nomvar + ' cp ' + str(i+1) + '   v.e. %5.2f' % varexp[i])
pyl.savefig(dir_pro+projeto+arquivo + '_fs%3.3i' % (i+1) + '.png')   
pyl.clf() 
```

但是这样我有两个图形，我想把两者（图形和地图）放在同一个图形中。有没有办法调整地图和图形位置并获得这个？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:31:02.307

我可能误解了你的问题，但你可以`subplot()`在 matplotlib 中使用在同一个图上生成多个图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:40:23.473

您是否尝试使用 m.plot() 而不是 pyl.plot()？（并且两者之间没有 clf() ）

# actionscript-3 - 在运行时在 SWF 中记录函数调用的方法？

> ID：10835781
> 
> 赞同：3
> 
> 时间：2012-05-31T14:39:41.853
> 
> 标签：actionscript-3

是否有任何方法（工具、库等）在从 Flash Professional 创建的 SWF 中记录运行时的所有 actionscript 函数调用？我经常继承项目，想更容易地分析和理解它们的操作。剖析也很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:16:36.703

记录*所有*调用可能无济于事，因为如果涉及许多“小”项目（即列表中的单元格、树中的节点、粒子引擎中的粒子、游戏中的敌人等），则日志文件会因重复而变得混乱，并很快增长到大量信息将使学习功能成为一项缓慢、乏味和痛苦的任务的规模。

使用分析器来管理依赖关系、内存等更有用，并使用调试器单步执行代码，和/或在有趣的点设置断点并从那里更深入地导航到体系结构。

[FDT](http://fdt.powerflasher.com/)有一个很棒的[分析器](http://fdt.powerflasher.com/docs/Intro_To_Profiling_Applications)和[调试器](http://fdt.powerflasher.com/docs/Using_FDT%27s_Debugger)。而且作为一款免费工具，[Monster Debugger](http://demonsterdebugger.com/)还是相当不错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:33:53.163

您可以在[SWFWire Debugger中尝试](http://www.swfwire.com/debugger)**Show method entry**和**Show method exit**。它还提供了一些分析。您还可以跟踪对象的创建和销毁以及内存使用情况。

![在此处输入图像描述](../Images/4a1badab74b3b40377045d643bb0ef30.png)

*免责声明：我写了这个应用程序*

# r - R 中是否有迭代最近点 (ICP) 的实现？

> ID：10835782
> 
> 赞同：8
> 
> 时间：2012-05-31T14:39:45.470
> 
> 标签：r, curve

有人在 R 中实现了二维 (2D)的[迭代最近点 (ICP)算法吗？](http://en.wikipedia.org/wiki/Iterative_closest_point)

这是c#
[Iterative Closest Point Implementation](https://stackoverflow.com/questions/4423016/iterative-closest-point-implementation)
中的一个尝试 这是一个更一般的问题
[迭代最近点库](https://stackoverflow.com/questions/3554017/iterative-closest-point-library)

[这是通过平移和缩放来匹配两组点。](https://stackoverflow.com/questions/10826625/how-to-align-and-scale-two-curves-using-scaling-and-translation)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T17:53:22.773

Spacedman 的评论可能是最好的。您还可以查看[http://www.mathworks.com/matlabcentral/fileexchange/loadFile.do?objectId=12627&objectType=file](http://www.mathworks.com/matlabcentral/fileexchange/loadFile.do?objectId=12627&objectType=file)以了解 matlab 实现。假设它工作正常，将 Matlab 转换为 R 代码相对容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T20:11:48.417

这在某种程度上是一种不回答形式的回答。

ICP有很多变种。设计选择至少部分由 90 年代后期的博士组织。Pulli 和 Rusinkiewicz & Levoy 的作品。如果您打算将 ICP 用于任何远程重要的事情（翻译：“不仅仅是课堂作业”），您应该了解权衡。

因此，最好采用现有实现之一并将其移植到 R。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:57:20.527

这里有一个独立的（据我所知）ICP的C++[实现](https://github.com/ziyan/default/tree/master/algorithms/icp)。也许您可以围绕此 C++ 代码创建自己的 R 包装器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-01T16:03:05.057

3 年太晚了，但是编写 Rvcg 的同一个人在包 Morpho 中有函数 icpmat。我不知道实现了哪个变体。

链接： [https ://github.com/zarquon42b/Morpho](https://github.com/zarquon42b/Morpho)

# android - Android 地址栏和书签

> ID：10835783
> 
> 赞同：2
> 
> 时间：2012-05-31T14:39:57.090
> 
> 标签：android, browser, bookmarklet, address-bar

我目前正在开发一个小书签，并且在使用 Android 的浏览器（似乎与设备无关）时遇到了一些奇怪的事情（并且令人沮丧）。

众所周知，在查看网页时，只要向下滚动，浏览器中的地址栏就会隐藏。一切都很好。但是，似乎如果您调用书签，栏中的地址将替换为“javascript：”协议地址，并且地址栏**不会**在您滚动时自动隐藏。

没什么大不了的，你会想，但是我的书签注入的内容（它在滚动上重新定位）被地址栏很好地覆盖了！我很感激我可以修改我的代码以稍微不同地重新定位，但在这个阶段我想避免它是有原因的。

以前有没有人遇到过这个特殊问题，有没有办法解决这个问题？

**更新**：如果值得的话，“javascript：”协议注释看起来像一条红鲱鱼。这似乎是因为浏览器认为调用我的书签时页面没有加载（小蓝条只穿过十分之一并停在那里）。所以，我的问题可能是“我如何准确地说服浏览器而不是我的页面已加载或终止加载？”

# mono - 未找到 Mono Sybase dll

> ID：10835785
> 
> 赞同：1
> 
> 时间：2012-05-31T14:40:04.820
> 
> 标签：mono, sap-ase

我刚刚安装了单声道最新版本和单声道开发，这里[http://www.mono-project.com/Sybase](http://www.mono-project.com/Sybase)他们引用了 dll Mono.Data.SybaseClient，但我在任何地方都找不到，请你帮帮我?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:43:22.693

由于缺少用户， [Mono 2.8](http://www.mono-project.com/Release_Notes_Mono_2.8#Removed_Library%3a_Mono.Data.SybaseClient)中删除了 Sybase 客户端库。

# json - 传递给 CFC 时未定义 JSON 中的键

> ID：10835786
> 
> 赞同：0
> 
> 时间：2012-05-31T14:40:05.747
> 
> 标签：json, coldfusion, cfc

我正在向 CFC 传递一个 JSON，并且有一个可能存在也可能不存在的密钥。所以，我正在检查它`isDefined`，但无论出于何种原因，coldfusion 认为它不存在，从我所看到的情况来看，它确实存在。我已经尝试了我能想到的一切，但现在我不知道问题出在哪里。

这是从 Firebug 中提取的 JSON：

```
[{"type":"USEQUIT","date":"01/01/2011"}] //the date, may or may not exist 
```

这是 CFC 功能的唯一重要部分：

```
<cfargument name="attribs">
//debugging code
<cfif isDefined("attribs.date")>
    <cfdump var="date here">
<cfelse>
    <cfdump var="date not here">
</cfif> 
```

我在上面的其他功能中执行此操作，它工作正常，但无论出于何种原因，我无法让它在这里工作。我假设我做错了什么，但我无法弄清楚，所以我问社区。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T15:22:08.257

CF 将您作为纯文本字符串传递的 json 视为您在其上调用 deselializeJSON() 之前：

```
<cfargument name="attribs">
//debugging code
<cfset var ds_attribs = deserializeJSON(arguments.attribs)>
<cfif structKeyExists(ds_attribs[arrayLen(ds_attribs)], "date")>
    <cfdump var="date here">
<cfelse>
    <cfdump var="date not here">
</cfif> 
```

# android - 使用 DatePickerDialog 阻止用户选择过去的日期

> ID：10835788
> 
> 赞同：1
> 
> 时间：2012-05-31T14:40:09.913
> 
> 标签：android, datepickerdialog

[这个问题](https://stackoverflow.com/questions/7157401/android-date-picker-should-not-accept-current-date-and-future-dates)描述了如何使用 DatePicker 小部件来做到这一点，但我没有这样的东西。

我有这些：

```
@Override
protected Dialog onCreateDialog(int id)
{

    switch (id)
    {
    case DATE_DIALOG_ID:
        return new DatePickerDialog(this, mDateSetListener, mYear1, mMonth1, mDay1);
    case DATE_DIALOG_ID_2:
        return new DatePickerDialog(this, mDateSetListener2, mYear2, mMonth2, mDay2);
    case DATE_DIALOG_ID_3:
        return new DatePickerDialog(this, mDateSetListener3, mYear3, mMonth3, mDay3);
    }
    return null;
}

protected void onPrepareDialog(int id, Dialog dialog)
{

    switch (id)
    {
    case DATE_DIALOG_ID:
        ((DatePickerDialog) dialog).updateDate(mYear1, mMonth1, mDay1);
        break;
    case DATE_DIALOG_ID_2:
        ((DatePickerDialog) dialog).updateDate(mYear2, mMonth2, mDay2);
        break;
    case DATE_DIALOG_ID_3:
        ((DatePickerDialog) dialog).updateDate(mYear3, mMonth3, mDay3);
        break;
    }
} 
```

然后是三个*DatePickerDialog.OnDateSetListener()* s

这些 DatePickerDialogs 上没有 setMax() 或 setMin()。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T15:28:38.357

只需实现您自己的 DatePickerDialog，如果用户尝试将其更改为低于最小日期，它将日期更改回允许的日期。

我正在使用的剥离版本是：

```
public class MyDatePickerDialog extends DatePickerDialog{

private Date maxDate;
private Date minDate;

public MyDatePickerDialog(Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) {
    super(context, callBack, year, monthOfYear, dayOfMonth);        
    init(year, monthOfYear, dayOfMonth);
}

public MyDatePickerDialog(Context context, int theme, OnDateSetListener callBack, int year, int monthOfYear,    int dayOfMonth) {
    super(context, theme, callBack, year, monthOfYear, dayOfMonth);
    init(year, monthOfYear, dayOfMonth);
}

private void init(int year, int monthOfYear, int dayOfMonth){
    Calendar cal = Calendar.getInstance();

    cal.set(1970, Calendar.JANUARY, 1);
    minDate = cal.getTime();

    cal.set(3000, Calendar.JANUARY, 1);
    maxDate = cal.getTime();

    cal.set(year, monthOfYear, dayOfMonth);
}

public void onDateChanged (final DatePicker view, int year, int month, int day){
    Calendar cal = Calendar.getInstance();
    cal.set(year, month, day);
    Date currentDate = cal.getTime();

    final Calendar resetCal = cal; 
    if(!minDate.before(currentDate) ){
        cal.setTime(minDate);
        view.updateDate(resetCal.get(Calendar.YEAR), resetCal.get(Calendar.MONTH), resetCal.get(Calendar.DAY_OF_MONTH));

    }else if(maxDate.before(currentDate)){
        cal.setTime(maxDate);
        view.updateDate(resetCal.get(Calendar.YEAR), resetCal.get(Calendar.MONTH), resetCal.get(Calendar.DAY_OF_MONTH));
    }       
}

public void setMaxDate(Date date){
    this.maxDate = date;
}

public void setMinDate(Date date){
    this.minDate = date;
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:18:27.700

my first answer. I hope everything works. I have the same problem with the datepicker embedded in an acitivity. Based on this answer I got this solution but only for Maximum Date.

Works fine in the emulator also for ICS.

```
// Get the Date for INIT
Calendar c = Calendar.getInstance();
int INIT_JAHR = c.get(Calendar.YEAR);
int INIT_MONAT = c.get(Calendar.MONTH);
int INIT_TAG = c.get(Calendar.DAY_OF_MONTH);
this.dp_quellen_datum.init(INIT_JAHR, INIT_MONAT, INIT_TAG,
    new DatePicker.OnDateChangedListener() {

        public void onDateChanged(DatePicker datePicker,
                int year, int monthOfYear, int dayOfMonth) {
            // TODO Auto-generated method sub
            Calendar cal = Calendar.getInstance();
            Calendar maxCal = Calendar.getInstance();
            // Actual date from datepicker
            cal.set(year, monthOfYear, dayOfMonth);
            // maximum Date in my Case today
            maxCal.set(maxCal.get(Calendar.YEAR),
                    maxCal.get(Calendar.MONTH),
                    maxCal.get(Calendar.DAY_OF_MONTH));
            Log.d("MAX -> Aktuell", maxCal.getTime()
                    + "-->"
                    + cal.getTime()
                    + "===>"
                    + maxCal.getTime()
                            .before(cal.getTime()));
            // Set datepicker to today if selected date in the feature
            final Calendar resetCal = cal; // <- Don't tested if this line is needed
            if (maxCal.getTime().before(cal.getTime()) == true) {
                cal.setTime(maxCal.getTime());
                Log.d("Anpassen", "AKTIV");
                datePicker.updateDate(
                        resetCal.get(Calendar.YEAR),
                        resetCal.get(Calendar.MONTH),
                        resetCal.get(Calendar.DAY_OF_MONTH));
            }

        }
    }); 
```

# c# - 协调结构和日期时间的属性

> ID：10835793
> 
> 赞同：2
> 
> 时间：2012-05-31T14:40:34.163
> 
> 标签：c#, struct

我一直在查看 DateTime 结构，我有点困惑。

我对结构的理解是您不能分配字段的“默认值”。如果使用结构的默认构造函数（这不是您可以控制的），那么任何字段都将使用其值类型的默认值进行初始化。

这一切都很好，但是为什么 DateTime 的“Days”属性的默认值等于 1？他们如何做到这一点？

威廉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T14:46:02.740

*您需要了解字段*和*属性*之间的区别。

这些*字段*都初始化为 0，但*属性*可以对这些字段做他们喜欢的事情。样本：

```
public struct Foo
{
    private readonly int value;

    public Foo(int value)
    {
        this.value = value;
    }

    public int ValuePlusOne { get { return value + 1; } }
}

...

Foo foo = new Foo(); // Look ma, no value! (Defaults to 0)
int x = foo.ValuePlusOne; // x is now 1 
```

现在显然`DateTime`比*这*更复杂一点，但它给出了正确的想法:) 想象一下“A`DateTime`字段显式设置为 0”意味着什么......“默认”`DateTime`只是意味着完全相同的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:16:40.200

Jon Skeet 是对的，这完全是关于字段和其他成员之间的差异。真的可以像这样制作“约会时间”：

```
struct MyDateTime
{
  // This is the only instance field of my struct
  // Ticks gives the number of small time units since January 1, 0001, so if Ticks is 0UL, the date will be just that
  readonly ulong Ticks;

  // here goes a lot of instance constructors,
  // get-only instance properties to show (components of) the DateTime in a nice way,
  // static helper methods,
  // and lots of other stuff, but no more instance fields
  ...
} 
```

所以在现实中，`MyDateTime`它只是`ulong`一种解释，还有很多很好的方式来展示和操纵它`ulong`。

# php - 未在 IE 中填充的列表框适用于 FF 和 Chrome

> ID：10835796
> 
> 赞同：0
> 
> 时间：2012-05-31T14:40:42.777
> 
> 标签：php, javascript, ajax

您好，我正在使用 php 和 javascript 并有代码，管理员可以在下拉框中选择一个名称，它会拉出与这些名称相关联的位置，这些是销售人员。好吧，它在 FF 和 Chrome 中运行良好，但在 IE 中，列表框只是空白。希望有人可以帮助我这里的老板使用IE

布伦特

下拉和列表代码

```
<label for="firstname"><?php echo ADD_EDIT_SALESREP;?><span class="required">*</span></label>
<select name="sales_rep" id="sales_rep" onChange="findLocation2(this.value)">
<option value="">Select</option>
<?php
$sqlQry1 = "SELECT * FROM ".TABLE_PREFIX."_employee WHERE status='t' AND is_Deleted='N' ORDER BY employee_Id";
$sql_Show1 = $DBObject->db_query($sqlQry1);
while($catArr = $DBObject->db_fetch_array($sql_Show1)){
?>
<div align="center"><br />
<option value="<?php echo $catArr['employee_Id'] ?>"><?php echo SafeOutput($catArr['first_Name']) ?> <?php echo SafeOutput($catArr['last_Name']) ?></option>
</div>
<?php
}
?>
</div>
</div>
</div>
<br />
<p>
</select>
<div id="salesrloc">
<select name="salesr_loc" id="salesr_loc" title="Sales Rep Loc" size="5" multiple="multiple">
<option value="">Select</option>
</select>
<br /> 
```

Javascript

```
<script language="javascript">
dv = document.createElement('div'); // create dynamically div tag
dv.setAttribute('id',"details");
function findLocation2(category)
{
dv.innerHTML='<div id="salesrloc" style="width:auto; height:200px;"><img src="image/loading.gif"></div> <br>';
var url11 = "salesrep2.php";
var qry11="?sales_rep=" + category ;
var result1='salesr_loc';
var ajaxRequest; // The variable that makes Ajax possible!
try{
ajaxRequest = new XMLHttpRequest();
} catch (e){
try{
ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
} catch (e) {
try{
ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
} catch (e){
alert("Your browser broke!");
return false;
}
}
}
ajaxRequest.onreadystatechange = function(){
if(ajaxRequest.readyState == 4){ //alert(ajaxRequest.responseText);
var a=ajaxRequest.responseText;
try{
document.getElementById('salesr_loc').innerHTML=ajaxRequest.responseText;
}catch(e){
dv.innerHTML=ajaxRequest.responseText;
}
}
}
ajaxRequest.open("POST", url11+qry11, true);
ajaxRequest.send(null);
} </script> 
```

最后填充列表框 php

```
<?php
include("mastersecure.php");
$emp_id = $_GET['sales_rep'];
$qry= "select * FROM ".TABLE_PREFIX."_location ls, ".TABLE_PREFIX."_customer cs WHERE loc_Salesrep = ".$emp_id." AND ls.customer_Id = cs.customer_Id";
$res = $DBObject->db_query($qry);
?>
<body onLoad="document.getElementById('salesr_loc').focus();">
<select name="salesr_loc[]" id="salesr_loc" title="Sales Rep Loc" size="5" multiple="multiple">
<?php
while($row=$DBObject->db_fetch_array())
{
?>
<option value="<?=$row["location_Id"]?>"><?=$row["customer_Name"]?>, <?=$row["location_Name"]?></option>
<?php
}
?>
</select>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:25:44.580

IE 不支持元素的**.innerHTML**`< select>`！

```
<select name="salesr_loc" id="salesr_loc"
...
document.getElementById('salesr_loc').innerHTML=ajaxRequest.responseText; 
```

相反，您必须循环执行：

```
var d = document.getElementById('salesr_loc');
for(...) {
   d.options[x] = new Option(..);
} 
```

# vb.net - 如何停止/取消处理函数的任务或找到更好的方法？

> ID：10835800
> 
> 赞同：2
> 
> 时间：2012-05-31T14:41:00.240
> 
> 标签：vb.net, delegates, task-parallel-library

我有 ...

```
Private Sub TestTask()
    Debug.Write("Running")

    For i As Integer = 0 To 60
        Debug.Write(".")
        System.Threading.Thread.Sleep(1000)
    Next

    Debug.WriteLine("Finished")
End Sub 
```

……

```
Dim cts As New CancellationTokenSource
Dim oToken As CancellationToken = cts.Token

'Create HelperTask to wait for cancellation request
Dim oHelperTask As Task = Task.Factory.StartNew(Function()

        'Create Task to invoke function
        Dim oTask As Task = Task.Factory.StartNew(Function()
            Return outerFunction.Invoke
        End Function, oToken)

        ' wait for cancellation token if Task is not complete
        While oTask.Status = TaskStatus.Running
            Thread.Sleep(200)
            If oToken.IsCancellationRequested Then
                oToken.ThrowIfCancellationRequested()
                Return Nothing
            End If
        End While

        Return oTask.Result

End Function, oToken)

cts.cancel() 
```

但是在我的 Visual sudio 调试窗口中，我的 TestTask() 继续运行.....请任何人赐教。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T07:14:26.833

CancellationToken 的全部意义在于，实际的 worker lambda（或函数）应该检查它是否应该停止。在您的情况下， TestTask 必须有权访问令牌并在每次迭代后检查它。多个帮助任务或任务状态检查或取消请求检查都不是必需的。

[关于任务取消](http://msdn.microsoft.com/en-us/library/dd997396#Y0)的 MSDN 文章显示了 lambda 唯一需要的是如何检查令牌，仅此而已。

在您的情况下，TestTask 可以使用如下简单的代码来响应取消：

```
Sub Main()
    Dim cts As New CancellationTokenSource
    Dim token = cts.Token

    Task.Factory.StartNew(Sub() TestTask(token), token)

    Thread.Sleep(3000)
    cts.Cancel()
    Console.ReadKey()
End Sub

Private Sub TestTask(token As CancellationToken)
    Console.Write("Running")

    For i As Integer = 0 To 60

        token.ThrowIfCancellationRequested()

        Console.Write(".")
        Thread.Sleep(1000)
    Next

    Console.WriteLine("Finished")
End Sub 
```

唯一需要的是将令牌传递给 TestTask 并像这样启动它：

```
 Task.Factory.StartNew(Sub() TestTask(token), token) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T15:06:36.843

您不想要/不需要 2 个任务 - 这是合作取消，因此您希望在调用取消时结束的每个任务都需要包含 ThrowIfCancellationRequested （或者它应该处理取消）。故意没有 Thread.Abort 类型的行为/语义，这都是合作的。

# css - 带有过渡关键帧的悬停CSS3动画

> ID：10835812
> 
> 赞同：0
> 
> 时间：2012-05-31T14:41:31.527
> 
> 标签：css, css-transitions, keyframe

我需要让这个动画更流畅、更吸引人。

演示：http: [//jsfiddle.net/XeELs/210/](http://jsfiddle.net/XeELs/210/)

# sip - 是否有一种与 SIP/VOIP 无关的方法可以知道电话何时离线？

> ID：10835816
> 
> 赞同：0
> 
> 时间：2012-05-31T14:41:56.237
> 
> 标签：sip, voip

处理需要监控电话上的呼叫活动/状态的 SIP 应用程序。我的应用程序 (UA) 已向代理服务器注册，被监控的电话也是如此。我正在使用 SUBSCRIBE/NOTIFY 消息来告诉手机我想了解它的“对话”事件，并且一旦订阅，它就可以正常工作。我遇到了两个问题：

1.  我要求订阅时长为 900 秒，并且始终从手机返回一些荒谬的 4000 多秒。

2.  订阅激活时手机可能会被拔掉（不要问，但是，是的，这是可能的）。发生这种情况时，我没有收到任何关于手机不再可用的通知。因此，我必须等待我的订阅超时，尝试更新它，处理失败，然后创建一个新订阅。

我意识到我可以在订阅到期之前更新我的订阅，但有没有更好的方法呢？例如，我是否能够获取“存在”事件并使用它们来了解电话何时存在？这些事件是否总是保证在手机启动时发生，即便如此，由于中间有一个代理，我什至会收到通知，还是我仍然不知道手机重新启动并且不再识别我的订阅（ s）？这些“存在”更新是我可以从代理请求的吗？

任何见解都会很棒；目前，我将尝试以更短的时间间隔刷新我的订阅，但我很想知道是否有更好的方法来解决它。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T23:02:55.180

除了可能以某种方式 ping 电话之外，我不知道与 SIP 无关的方式，但肯定有一种 SIP 方式来进行状态，并且使用与对话相同的订阅/通知模型，但在这种情况下用于状态。相关标准是[RFC 3856 A Presence Event Package for the Session Initiation Protocol (SIP)](https://www.rfc-editor.org/rfc/rfc3856)。

通常情况下，状态通知将由 SIP 注册器生成，并且由于您说您的电话正在向您的代理注册，因此它还必须具有内置的注册器。当其他电话的注册状态发生变化时（例如第一次发生时），注册器会通知您的 UA上线或重新注册失败。至于电话“消失”和注册服务器检测到它之间的延迟，没有规定的方法可以做到这一点。您可以等待注册期到期并将手机在注册失败时标记为离线，或者服务器可以主动向手机发送数据包甚至 SIP 请求（例如 OPTIONS 请求）并将其标记为离线得到一个失败响应，Asterisk 使用后一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-17T16:27:47.490

当 SIP UAC 客户端向 SIP UAS 注册器注册时，SIP 客户端会提供一个 Expiry Header，它指示 SIP 客户端需要重新注册自己的最长时间。如果 SIP 客户端在这段时间内没有重新注册自己，那么 Sip UAS 代理/注册服务器会将客户端标记为断开连接。

像 FreePBX 和 Asterisk 这样的专有 SIP 包会主动向客户端发送 SIP OPTIONS，连续地，每隔一段时间，客户端会以 OK 响应。这是验证 SIP 客户端是否在线的一种更主动的方式；但是，这种技术是专有的，不是实际 SIP 规范的一部分。

# jquery - JQuery增量选择ID

> ID：10835817
> 
> 赞同：0
> 
> 时间：2012-05-31T14:41:57.127
> 
> 标签：jquery, forms, clone

我正在克隆一个选择选项输入，以便用户可以添加更多服务。我的克隆部分工作正常，但是当我提交表单时，我只会出现第一个原始选择。

我想我需要增加选择 ID，例如 id="serviceId_2"

我已经搜索和搜索，但我找不到如何增加 ID。

jQuery

```
$('#clone').click(function() {
    var original = $('#serviceId:eq(0)');
    var allSelects = $('#serviceId');
    var clone = original.clone();

    $('select', clone).filter(function(i) {             

        allSelects.find('option:selected[value="' + $(this).val() + '"]').length;
        allSelects.attr('id','asda');

    }).remove();

    $('#target').append(clone).append('<br />');
}); 
```

有人有类似的问题吗？

干杯

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:43:25.387

```
var original = $('#serviceId:eq(0)');
var allSelects = $('#serviceId');
var clone = original
                  .clone()
                  .attr('id', 'serviceId_' + $('select[id^=serviceId]').length + 1); 
```

计算现有的长度`select`以`id`开始，`serviceId`然后增加`1`以使其唯一。

或者如果你只想克隆一次它的简单

```
var clone = original.clone().attr('id', 'serviceId_2'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:46:24.543

尝试如下，

```
var clone = original.clone().attr('id', 'serviceId_2'); 
```

你的功能不是很清楚，所以我不打算在这里放出完整的代码。这个想法是`.attr`在克隆之后使用来更改`ID`克隆元素的。

# javascript - 仅验证特定的大写字母

> ID：10835818
> 
> 赞同：0
> 
> 时间：2012-05-31T14:41:58.513
> 
> 标签：javascript, regex, jquery-validate, validation

我有一个表单，我正在使用 jQuery 验证插件进行验证，对于一个性别字段，我只想接受大写 F 或大写 M。我使用的正则表达式是，`(F|M){1}`但它同时传递了小写和大写 F 和 M。有吗我还能做些什么来防止小写字母被验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:43:31.543

那个正则表达式对我来说看起来不错，默认情况下匹配应该区分大小写。

您是否意外地向正则表达式提供了`/i`修饰符，这会使其不区分大小写？

# session - 在 ASP .NET MVC 2 中取消长时间运行的请求

> ID：10835820
> 
> 赞同：1
> 
> 时间：2012-05-31T14:42:11.957
> 
> 标签：session, asp.net-mvc-2, controller, parallel-processing, session-state

在我的 ASP .NET MVC2 应用程序中，有两种控制器方法：

```
public class MyController : Controller{

public ActionResult Optimization(...){
    //long running optimization
    //this method writes to the Session

}

public void StopOptimization(){
   //user wants to stop the optimization
   //no access to Session needed
}
} 
```

因此，为了停止我长时间运行的优化，ASP .NET MVC 应该在“优化”方法运行时让“停止”方法通过。

我知道只有当整个控制器类的 SessionSate 至少设置为“ReadOnly”时，才能并行处理请求。我已经按照[这篇博](http://blog.whiletrue.com/2010/09/asp-net-mvc-sessions-and-concurrent-requests-not-what-youd-expect/)文中的步骤进行了操作。但是，这意味着不能再将数据写入会话，这是优化方法所要求的。

出于这个原因，我决定从这个 Controller 中删除“Stop”-Method 并将其放在一个额外的 Controller 中，为此我将 SessionState 设置为“ReadOnly”：

```
...
using Microsoft.Web.Mvc;
...

[ControllerSessionState(ControllerSessionState.ReadOnly)]
public class StopController: Controller
{
    public void Stop()
    {
         //Stop long running optimization
    }
} 
```

但是，Stop-Request 仍然只有在另一个控制器中的优化完成后才被处理。此外，我尝试实现一个自定义控制器工厂，该工厂允许*分别为每个 ActionMethod*定义会话状态- 这在[此处](http://sapoval.org/per-action-custom-sessionstateattribute)进行了描述。这对我不起作用，因为我不使用 ASP .NET MVC 3，而只使用 ASP .NET MVC 2 和 MVC Futures Library。

有谁知道我如何实现一个允许用户从客户端停止我长时间运行的方法的停止方法？

# asp.net - 使用图像按钮更新 Gridview

> ID：10835821
> 
> 赞同：0
> 
> 时间：2012-05-31T14:42:16.380
> 
> 标签：asp.net, gridview, imagebutton

我有 2 个图像按钮，接受和拒绝。接受按钮将 [status] 更新为 1 拒绝按钮将 [status] 更新为 2

我已成功使用 UpdateCommand 更新接受按钮

```
UpdateCommand="UPDATE [bookingschedule] SET status='1'WHERE [bookingScheduleID] = @bookingScheduleID" 
```

但是，我不知道如何为拒绝按钮设置更新命令，因为我只能声明一次 UpdateCommand。

```
UpdateCommand2="UPDATE [bookingschedule] SET status='2'WHERE [bookingScheduleID] = @bookingScheduleID" (incorrect) 
```

我应该怎么做才能使拒绝按钮功能？我应该把这个第二个更新命令行放在哪里：

```
UpdateCommand="UPDATE [bookingschedule] SET status='2'WHERE [bookingScheduleID] = @bookingScheduleID" 
```

我在客户端完成所有这些编码：

**接受按钮：**

```
<asp:TemplateField HeaderText="Action Approve">
<ItemTemplate>
<asp:ImageButton runat="server" ID="UpdateCommand"
  CommandName="update" ImageUrl="~/images/accept.png"
  OnClientClick="if (!window.confirm('Are you sure you want to approve this booking?')) return false;" />
</ItemTemplate>
</asp:TemplateField> 
```

**拒绝按钮：**

```
<asp:TemplateField HeaderText="Action Reject">
<ItemTemplate>
<asp:ImageButton runat="server" ID="UpdateCommand" CommandName="update" OnClick="reject"
  ImageUrl="~/images/reject.png"
  OnClientClick="if (!window.confirm('Are you sure you want to reject this booking?')) return false;" />
</ItemTemplate>
</asp:TemplateField> 
```

**SQL 数据源：**

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>"
            SelectCommand="SELECT [bookingScheduleID], [eventTitle], [week1], [week2], [week3], [week4], [week5], [week6], [week7], [week8], [exhibitorname], [boothAlias], [category], [status], [dateBook],[custNo] FROM [booking_all]" 
            UpdateCommand="UPDATE [bookingschedule] SET status='1'WHERE [bookingScheduleID] = @bookingScheduleID"
            >
        </asp:SqlDataSource>
        <UpdateParameters>
        <asp:Parameter Name="bookingScheduleID" Type="Int32" />
        </UpdateParameters> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:08:57.887

使用控件根据单击的按钮动态存储/传递状态

```
UpdateCommand="UPDATE [bookingschedule] SET status=@Status WHERE [bookingScheduleID] = @bookingScheduleID" 
```

然后加

```
<asp:ControlParameter Name="Status" ControlID="StatusSelectionControl" PropertyName="Text" Type="Int32" /> 
```

propertyName 应该与使用的控件相关-假设是 TextBox，但您也可以使用隐藏字段

# c - 使用 GDB 在 C 中查找局部变量的地址

> ID：10835822
> 
> 赞同：10
> 
> 时间：2012-05-31T14:42:19.750
> 
> 标签：c, gdb

假设我有一些 C 代码，这些代码类似于：

```
无效乐趣_1（无符号整数*年龄）

```

[...]

```
int main() {

    无符号整数年龄[24]；
}

```

在 GDB 中，如何找到年龄的地址？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T14:52:00.173

查找地址很简单：

```
p &age 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T14:53:09.037

`age`如果您不知道，这两个s 是不一样的。一个是本地的`main`，另一个是本地的`fun_1()`。因此，除非您将`age`in的地址传递`main`给`fun_1()`它们，否则它们将不会具有相同的地址。只需在 main 中设置一个断点，然后查看 age 的地址。

```
(gdb) break main
(gdb) p &age
.....
(gdb) break fun_1
(gdb) p &age
..... 
```

# javascript - 触发事件的 HTML

> ID：10835825
> 
> 赞同：0
> 
> 时间：2012-05-31T14:42:31.917
> 
> 标签：javascript

有人可以帮忙吗？我有一个带有 asp.net 框架的网页——该框架显示了 html 文档的内容。当有人点击 html 文档中的链接时，我需要*在同一页面*的另一个框架中显示一些内容。

所以，问题是，下面的“myTag”应该是什么......

eg //这是我的html文件的内容`

```
<p>to be or not to be, <myTag>that</myTag>  is the question</p> 
```

无论“myTag”是什么（可能是一段 javascript？不知道），它应该能够在服务器上触发一个事件，这样我就可以向页面上的另一个框架发送更多文本

有任何想法吗？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:56:19.830

我要做的第一件事是给另一个框架一个 ID 或某种方式，以便使用 javascript 轻松访问它。然后在您的 iframe 中，您可以执行以下操作：

```
var other_frame_document = window.parent.document.getElementById('other_frame').contentWindow.document;
// example 1: set the HTML of the other frame from a string.
// this is usually a bad idea because of XSS.
other_frame_document.body.innerHTML = '<b>aloha</b>';

// example 2: better way is to manipulate the DOM in the other iframe
var elm = other_frame_document.createElement('b');
elm.appendChild(other_frame_document.createTextNode('aloha'));
other_frame_document.body.appendChild(elm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:55:36.867

这是触发动作的一种方式。

或者您可以在 DOM 加载时使用 jQuery（或其他库）绑定操作，如下所示：

```
jQuery("#myTagId").bind("click", function() { ... }); 
```

这将导致在单击元素时触发事件。

然后，您可以使用 ajax 调用服务器来更新其他框架。

# python - 在python中从另一个函数修改一个函数

> ID：10835829
> 
> 赞同：0
> 
> 时间：2012-05-31T14:42:45.257
> 
> 标签：python, function, boolean

对于 python 的在线课程，我正在用 python 制作一个基于文本的基本冒险游戏。

现在，我有一个基本的库存系统，它通过布尔值来判断用户是否有物品，以及有限物品的整数，例如弹药和诸如此类的东西。这是库存系统的代码

```
def Inventory(self): #The inventory for the game.  I don't know how to program it properly, so this is my testing ground. 
#This will hold the boolean values to if the player has the items or not.  Another will be used to show the user the items

    street_clothes = False
    pistol = False
    ammo = 0
    phone = False 
```

这是我试图修改上面的库存功能的代码

```
#Eric's apartment
 def Eric_Apartment(self):

    print "type in grab your gun"

    action = raw_input("> ")

    if action == "grab":
        self.Inventory(CR97) = True
    #   self.CR97_ammo += 15
    #   print CR97_ammo
    #   print self.CR97_ammo

    exit(1) 
```

尝试运行此程序会收到此错误：

```
python ex43.py
File "ex43.py", line 78
self.Inventory(CR97) = True
SyntaxError: can't assign to function call 
```

还有什么我应该做的吗？我对python很陌生，这是我自己的第一个项目。

这是完整的代码，供参考

```
from sys import exit #allows the program to use the exit(1) code
from random import randint #allows the program to use a random number

class Game(object):

#quotes that pop up if the person dies, and also defines the start and self variables
 def __init__(self, start):
    self.quips = [
        "You lose!"
    ]
    self.start = start

 def Inventory(self): #The inventory for the game.  
#This will hold the boolean values to if the player has the items or not. 

    street_clothes = False
    pistol = False
    ammo = 0
    phone = False

#this function launches the game, and helps with the room transfer
 def play(self):
    next = self.start

    while True:
        print "\n---------"
        room = getattr(self, next)
        next = room( )

#if the user dies, or fails at the game, this is the function that is ran
 def death(self):
    print self.quips[randint(0, len(self.quips)-1)]
    exit(1)

#Welcome screen to the game
 def welcome_screen(self):
    print " place holder"
    return 'intro_screen'

#Intro screen to the game
 def intro_screen(self):

    print "place holder"

    action = raw_input("> Press any key to continue ")

    return 'Eric_Apartment'

#Eric's apartment
 def Eric_Apartment(self):

    print "type in grab your gun"

    action = raw_input("> ")

    if action == "grab":
        self.Inventory(CR97) = True
    #   self.CR97_ammo += 15
    #   print CR97_ammo
    #   print self.CR97_ammo

    exit(1)

a_game = Game("welcome_screen")
a_game.play() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:45:43.263

这是一种非常反常的做法。为什么要使用函数来存储数据？

只需要一个带有库存数组的玩家对象。

我建议也使用对象来建模项目。很好地用于类层次结构。可能有一个基础项目，具有子类 SingleItem 和 StackableItem 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:48:12.540

不要使用函数，而是尝试使用类 -

```
class Player:
    def __init__(self):
        self.street_clothes = False
        self.pistol = False
        self.ammo = 0
        self.phone = False
    def give_street_clothes(self):
        self.street_clothes = True
    # etc 
```

但就个人而言，我不会使用每个项目作为布尔值，而是使用项目列表：

```
class Player:
    def __init__(self):
        self.inventory = []
        # add code for ammo/pistol
    def has_item(self, item):
        return item in self.inventory
    def give_item(self, item):
        self.inventory.add(item)
    def remove_item(self, item):
        self.inventory.remove(item)
    # etc 
```

# http - 如何使所有用户看起来都具有相同的 IP 地址？

> ID：10835833
> 
> 赞同：0
> 
> 时间：2012-05-31T14:43:05.833
> 
> 标签：http, proxy, ip-address, lamp

我在 LAMP 堆栈上开发一个 Web 应用程序。无需过多详细说明，我们网站的用户登录他们的帐户并获得 URL 即可访问。这些 URL 可以在网络上任何地方公开访问。

我们希望用户访问的一些 URL 可能会受到 IP 地址的限制。我可以告诉这些网站的所有者他们应该授予哪些 IP 访问权限。我希望能够让我选择的任何用户能够访问这些 URL，但我不能保证他们的个人 IP 地址是什么。

有没有一种简单的方法，也许使用某种代理服务，我可以让用户看起来都来自同一个 IP？

# java - 当 XML 中有更多字段时，xStream 崩溃

> ID：10835835
> 
> 赞同：3
> 
> 时间：2012-05-31T14:43:12.527
> 
> 标签：java, xml, xml-serialization, xstream

xStream

当我有以下 XML 代码时：

```
<xml>
  <version>1.1</version>
  <url>http://www.google.nl</url>
</xml> 
```

我用我的 Java 代码阅读了这篇文章，一切正常，但是当 XML 更改时，例如：

```
<xml>
  <test>test</test>
  <version>1.1</version>
  <url>http://www.google.nl</url>
</xml> 
```

我收到一个错误，但我希望程序不会停止，并且不要使用现场测试。有没有办法在程序不停止的情况下处理这个异常？

```
Exception in thread "main"         com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$UnknownFieldExce    ption: No such field Version.iets
---- Debugging information ----
field               : iets
class               : Version
required-type       : Version
converter-type      :     com.thoughtworks.xstream.converters.reflection.ReflectionConverter
path                : /Version/iets
line number         : 1
version             : null
------------------------------- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-15T17:27:06.357

XStream 1.4.5 让您轻松处理未知标签。对尚未实现或已被删除并且您正在处理旧 xml 的标签使用 ignoreUnknownElements。

> [http://x-stream.github.io/javadoc/com/thoughtworks/xstream/XStream.html#ignoreUnknownElements%28%29](http://x-stream.github.io/javadoc/com/thoughtworks/xstream/XStream.html#ignoreUnknownElements%28%29)

您还可以指定要忽略的特定标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:08:21.583

感谢 Brian Agnew，我找到了答案，这就是解决方案：

```
XStream xstream = new XStream(new DomDriver()) {
            protected MapperWrapper wrapMapper(MapperWrapper next) {
                return new MapperWrapper(next) {
                    public boolean shouldSerializeMember(Class definedIn, String fieldName) {
                        try {
                            return definedIn != Object.class || realClass(fieldName) != null;
                        } catch(CannotResolveClassException cnrce) {
                            return false;
                        }
                    }
                };
            }
        }; 
```

# css - 浏览器中的字体更改

> ID：10835841
> 
> 赞同：0
> 
> 时间：2012-05-31T14:43:29.303
> 
> 标签：css, fonts

[http://yummylekker.be/test.gif](http://yummylekker.be/test.gif)

正如您在上面链接的图片中看到的那样，我的字体有问题。在某些时候，当我在浏览器中查看它时它会发生变化......似乎无法找出原因或时间。我用 FontFinder 分析了两次，字体和值都是一样的。乔治亚州在这两种情况下都会呈现。它似乎会影响每个浏览器和每种字体。让它变回原来的唯一方法，正确的方法是重新启动我的电脑：s

任何人都知道可能是什么原因？

```
#wrapper #about p, #wrapper #comingsoon p {
font-family: Georgia, "Times New Roman", Times, serif;
font-size: 15px;
line-height: 18px;
color: #414141;} 
```

相同的浏览器，相同的字体，起初显示正确，但在某些时候，当我再次查看它（相同的浏览器等）时，它已经改变了（FontFinder 仍然说它是相同的字体，但显示方式不同）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:35:41.653

**您不能进行动态（非图像）文本渲染并期望一致的间距。**

这是一个原因。

字体内部有“提示”，告诉​​渲染引擎如何最好地以小尺寸显示文本。这些图像中的一个没有使用提示，另一个是。因此，我怀疑您看到的是一个快速的“初始”版本，然后是一个较慢的“精炼”（暗示）版本。

细节：在乔治亚州，“b”应该比“H”高，“a”有一个泪珠（泪珠）终止符。在您的图像 A 中，“b”是正确的高度，但“a”上没有泪珠。在图像 B 中，“b”已被缩短以匹配“H”，但存在泪珠。我相信图像 B 是“精致”的图像。

要对此进行测试，请尝试使用更大的字体大小的相同文本。我相信重新渲染不会发生。您可能会尝试的另一件事是打开和关闭 ClearType。

我意识到这并不能解决您的问题，但那是因为这不是编程问题，而是*设计*问题。同样：**您不能进行动态（非图像）文本渲染并期望一致的间距。**

许多设计师*讨厌*这一点，因为他们陷入了纸上谈兵的思维。（我个人发现这样的人[长篇大论已删除]。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:56:45.677

每个浏览器都有自己的分析和可视化字体的方式。如果您使用标准字体，您将有最好的机会让每个浏览器都正确显示它。

此外，如果您使用 webfonts 或@font-faces，您必须知道并非每种字体都是为 Web 目的而制作的，因此**在不同的浏览器中会以不同的方式显示自己。**

为了进一步解决字体问题，您可以使用不同的服务（如 fontsquirrel）将您的字体制作成网络安全字体。**不同的服务=不同的结果！**

这意味着如果出现问题，您必须同时打开所有 3 或 4 个主要浏览器，并询问自己字体是否适合您。

这是工作中非常困难和耗时的部分。[http://www.google.com/webfonts](http://www.google.com/webfonts)对我来说是最好的解决方案（目前）

# sql - Access 2010：如何关联同一张表中的两个字段？

> ID：10835844
> 
> 赞同：0
> 
> 时间：2012-05-31T14:43:33.127
> 
> 标签：sql, ms-access-2010

我在access 2010中有一个数据库。

A 有一个包含一些字段的表。其中三个是“输入”、“输出”和“日期”。A还有总量查询。

我想对所有具有相同“日期”的“输入”值求和，我还想对所有具有相同“日期”的“输出”值求和。

我希望我的查询找到扣除结果（“输入”-“输出”具有相同的“日期”）。

我的问题是如何关联具有相同“日期”值的不同插入。

请问有什么帮助吗？

编辑：

```
input     output      date
  3         0         2/5/2012
  4         0         8/5/2012
  0         2         2/5/2012
  0         1         8/5/2012 
```

我希望我的查询显示

```
available stock     date
   (3-2=) 1       2/5/2012
   (4-1=) 3       8/5/2012 
```

已编辑 v2：

我的sql代码是

```
 SELECT SUM(warehouse.in_quant)-SUM(warehouse.out_quant) AS SUM, 
 drugs.active_substance, drugs.strength, drugs.strength_type, drugs.dosage_form, 
 warehouse.available_stock, drugs.minimum_quantity, IIf([warehouse]![available_stock]
 [drugs]![minimum_quantity],"YES!","No") AS DiplayText, warehouse.curr_date
 FROM drugs INNER JOIN warehouse ON drugs.ID = warehouse.drug_id; 
```

我收到这条消息：

您尝试执行的查询不包含指定表达式“active_substance”作为聚合函数的一部分。

当我删除 SUM(warehouse.in_quant)-SUM(warehouse.out_quant) AS SUM 时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:48:13.427

Go to the query design window, add the relevant tables, drag the fields that you want to match from one table to the next. Test. If it is not what you want, post the sql back here with sample data and an explanation of the problem.

```
SELECT i.Input-o.Output As Stock, i.Date
FROM (SELECT Input FROM Table
      WHERE Input > 0) i
LEFT JOIN 
     (SELECT Output FROM Table
      WHERE Output > 0) o
ON i.Date = o.Date 
```

You will probably need something more complicated, but this should be a start, hopefully.

Re comments

```
SELECT drugs.active_substance, 
       drugs.strength, 
       drugs.strength_type, 
       drugs.dosage_form, 
       warehouse.available_stock, 
       drugs.minimum_quantity, 
       warehouse.curr_date,
       SUM(warehouse.in_quant)-SUM(warehouse.out_quant) AS SUMQty
FROM drugs 
INNER JOIN warehouse ON drugs.ID = warehouse.drug_id
GROUP BY drugs.active_substance, 
       drugs.strength, 
       drugs.strength_type, 
       drugs.dosage_form, 
       warehouse.available_stock, 
       drugs.minimum_quantity, 
       warehouse.curr_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:48:49.260

I'm not quite sure what your asking but to sum values by a date you should use the group by clause

```
SELECT SUM(input) - SUM(output) as 'Input - Output', date 
FROM myTable 
GROUP BY date 
```

[Here](https://data.stackexchange.com/stackoverflow/query/71450) is an example of it what I think your trying to do.

# android - Android HTTP 请求奇怪的 404 未找到问题

> ID：10835845
> 
> 赞同：1
> 
> 时间：2012-05-31T14:43:54.997
> 
> 标签：android, http, http-status-code-404

在我的应用程序中，我正在尝试使用以下代码访问一个 URL

```
 try {
    url = new URL(serverURL);

    httpURLConnection = (HttpURLConnection) url.openConnection();

    int timeout = 30000;
    httpURLConnection.setConnectTimeout(timeout);
    httpURLConnection.setReadTimeout(timeout);

    httpURLConnection.connect();

    String httpResponseMessage = httpURLConnection.getResponseMessage();
    responseCode = httpURLConnection.getResponseCode();

    Log.i(LOG_TAG,"Response code "+responseCode);

    } catch (Exception e) {
    e.printStackTrace();
    } 
```

通过浏览器（在计算机和手机上）打开（机密）URL 时，可以完美运行并且响应符合预期。但是当我通过上面的代码点击相同的 URL 时，它给了我响应代码 404（未找到）。谁能告诉我可能是什么问题？（抱歉，由于高度机密，不能发布 URL。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:45:23.057

你确定你在你的[android.permission.INTERNET](http://developer.android.com/reference/android/Manifest.permission.html#INTERNET)中声明了`AndroidManifext.xml`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T15:41:20.100

问题解决了 ：）

```
 try {

            url = new URL(serverURL);

            Log.i(LOG_TAG, url+"");
            HttpGet method= new HttpGet(new URI(serverURL));
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            request.setURI(new URI(serverURL));
            HttpResponse response = client.execute(method);
            responseCode = response.getStatusLine().getStatusCode();

            Log.i(LOG_TAG,"Response code response "+response);
            Log.i(LOG_TAG,"Response responseCode "+responseCode);
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T21:21:30.433

不确定这是否重要，但我遇到了确切的问题。

我正在做一些明确的端口 80 的东西，删除这条线使它工作：

```
HttpHost host = new HttpHost(targetHost, 80, "http"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-11T08:41:41.823

实际上，您甚至不需要在代码中遵循两行代码。

```
HttpGet request = new HttpGet();
request.setURI(new URI(serverURL)); 
```

一个 HttpGet 就足够了，您不需要两次。

# jquery - jQuery .change with .each 里面没有正确触发

> ID：10835847
> 
> 赞同：0
> 
> 时间：2012-05-31T14:43:59.640
> 
> 标签：jquery, each

我有一个简单的 .change 函数，它可以访问数据库并获取一些值设置一些值等。

```
$('.linequantity').change(function() {
    ...
    $.getJSON(url, function(data) {
      $('#TT-' + lineItem).text(parseFloat(data['price']) * quantity);
    });
}); 
```

然后我想要的是，在任何行数量发生变化时，我想更新小计。（是的，它是一个目录类型/购物车风格的应用程序）。我的想法是，让我们使用 .each

```
$('.linequantity').each(function(){
     ...
   var url = "jQueryFunctions.php?action=getPrice&quantity=" + quantity + "&customer=" + customerID + "&item=" + lineItem;

    $.getJSON(url, function(data) {
       subtotal = subtotal + (parseFloat(data['price']) * quantity);
     });
   });

   $('#subtotal').text(subtotal); 
```

但是，当我这样做时，如果每个甚至都触发的话，我得到的小计为 0。

我已经厌倦了将 .each 放在一个函数中。当我将 .each 移到它自己的函数中时，它会更加一致地触发，但是在 .change 中工作得很好的 getJSON 被跳过了。

在我要求另一个之前，我是否遇到了第一个 json 请求还没有完成的冲突？

我对方法的改变持开放态度，但上述内容有正确的想法/开始。

有任何想法吗？

**编辑**
数量字段

```
<input type="text" class="linequantity" id="SQ-<?php echo $value['itemNumber']; ?>" name="Quantity" placeholder="#"/> 
```

总跨度

```
<span id="subtotal" class="currencyField">$0.00</span> 
```

11:44 编辑：我认为 .each 在 getJson 完成之前就被击中了。在我不使用 jQuery 之前，如何确保 json 请求已完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:45:24.740

我认为您只是有一个竞争条件，即 ajax 请求完成得太晚了。解决这个问题的唯一方法是让依赖于请求的方法在完成后运行。有很多方法可以做到这一点，例如使用`Deferred` and `$.when`。简单的方法会很好：

```
$.getJSON(...)
   .done(function () {
      // Stuff that depends on JSON goes here
   }); 
```

在`.each`你依赖于多个请求 - 一次可能很多。我会尝试在一个请求中执行此操作（例如，更新您的服务器代码以接受项目列表并计算小计，而不是一次只拥有一个）。否则，您必须不断更新小计，这可能会导致它在视觉上闪烁。服务器的效率也很低。您也许可以执行以下操作：

```
var jqXHRs = []
$.each(...
   jqXHRs.append($.getJSON(...));
);
$.when(jqXHRs).done(...); 
```

...但我不确定是否`$.when`可以使用这样的数组，或者是否有任何方法可以将参数列表扩展到它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T14:50:17.670

[.change()](http://api.jquery.com/change/)只能用于元素、框和元素。

考虑到这一点，您可能需要调用 $().val(); 获取活动用户选择/输入数据。

这样的事情可能会做到：

```
$('.linequantity').change(function() {
    var inputData = $(this).val();
    // other stuff!
}); 
```

# .htaccess - htaccess 获取没有路径的文件名

> ID：10835848
> 
> 赞同：3
> 
> 时间：2012-05-31T14:44:01.073
> 
> 标签：.htaccess, mod-rewrite

我正在尝试获取请求的文件名，而没有使用 htaccess 的 RewriteCond **路径。**`REQUEST_FILENAME`返回完整的绝对路径，但我只需要像*test.php这样的文件名*

我一直在寻找这个很多，但找不到任何帮助我的东西。感谢您提前回复！

**编辑：**

我试图做这样的事情：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond _%{REQUEST_FILENAME}.php -f
RewriteRule ^([^/]*)$ _$1.php [L] 
```

*   在浏览器中输入的 URL 如下所示：[http ://example.org/test](http://example.org/test)
*   RewriteRule 将请求的文件是：[http ://example.org/_test.php](http://example.org/_test.php)
*   我`RewriteCond _%{REQUEST_FILENAME}.php -f`试图先检查文件 **是否存在**

**基本上我想这样做：**

URI: */test/blah*
检查*_test.php*是否存在（带下划线！）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T17:19:10.067

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/_$1.php -f
RewriteRule ^([^/]+)$ _$1.php [L] 
```

我改成`*`这样`+`，例如 example.com/ 的请求不会重定向到`_.php`

# jquery - 如何通过手动调用 html 中的画廊而不是通过 jquery 选项打开fancybox？

> ID：10835849
> 
> 赞同：1
> 
> 时间：2012-05-31T14:44:06.323
> 
> 标签：jquery, fancybox, manual

我现在只是在看fancybox v2。

我试图让一个画廊用fancybox加载，但需要手动调用。我不希望通过 jquery 加载图库图像，最好让它们从 html 页面加载，因为这将被添加到 CMS 的模板中，该模板需要让用户将图像添加到将填充他们上传的每张新图片。

是否像在开始之前在选项中添加调用一样简单，或者在图像的 a 标签的 href 中添加调用？

谢谢，马克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T17:11:21.073

确保所有新加载的图像在链接到它们的锚点内共享相同`class`和属性`rel`

```
<a href="image01.jpg" class="fancybox" rel="gallery" ... 
```

`div`如果您愿意，这些 html 锚点可以隐藏在其中。您可以[查看此帖子](https://stackoverflow.com/a/9487189/1055987)以供参考。

然后，将它们绑定到fancybox

```
$(".fancybox").fancybox(); 
```

您说您将使用 CMS，因此如果`href`您加载的图像的格式类似于 `http://path/to/image/?abc=123`（例如没有图像扩展名），请将`type:"image"`选项添加到您的脚本

```
$(".fancybox").fancybox({
 type:"image"
}); 
```

如果锚点可见，单击其中任何一个都将启动图库。

另一方面，您可以使用任何其他链接“手动”启动图库

```
<a href="javascript:;" id="launcher">open gallery</a> 
```

并添加此脚本：

```
$("#launcher").on("click", function(){
 $(".fancybox").eq(0).trigger("click");
}); 
```

该`.eq()`方法用于从第一个项目（可以是任何项目）开始画廊，否则画廊将从最后一个附加项目开始。此外，该`.on()`方法需要 jQuery v1.7+

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T18:36:29.043

如果您想/必须使用较旧的 jQuery 版本（例如，由于 Drupal 模块），请摆脱`.on()`并使用

```
< a href="javascript:;" id="launcher">LINK TO TOPEN GALLERY< /a> 
```

和

```
jQuery(document).ready(function($) {
    $("#launcher").click(function() {
        $(".imagefield-fancybox").eq(0).trigger("click");
    });
}); 
```

反而。

也适用于较旧的 jQuery 版本。将“.imagefield-fancybox”替换为您正在使用的类。

# ajax - 在 Yii 中使用 AJAX 更新多语言内容

> ID：10835853
> 
> 赞同：0
> 
> 时间：2012-05-31T14:44:19.403
> 
> 标签：ajax, yii

参考我下面的代码，当用户点击`en`按钮时，内容会变成英文，点击`tw`按钮时，内容会变成中文。

但是，每次用户单击`en`或`tw`按钮时，页面都会刷新。请问这种情况下如何实现AJAX内容更新？

结果是当用户单击其中一个`en`或`tw`按钮时，页面不会被刷新以更改内容语言。

谢谢

我在[这里](http://www.yiiframework.com/wiki/49/update-content-in-ajax-with-partialrender/)参考了 Yii 文档，但似乎不适合我的情况

`C:\wamp\www\website\protected\views\site\index.php`

```
<?php
$lang = isset($_GET["lang"]) ? $_GET["lang"] : "en_uk";
$lang = $lang == "en" ? "en_uk" : "zh_tw";

Yii::app()->setLanguage($lang);
?>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="get">
    <input type="submit" value="en" name="lang" />
    <input type="submit" value="tw" name="lang" />
</form>

<div class="main">
    <?php echo Yii::t(Yii::app()->controller->id, "Causeway Bay"); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T06:39:33.430

最佳做法是在这些情况下重新加载页面，因为通常您必须更新太多，以至于不值得。

也就是说，CHtml 的[ajaxSubmitButton](http://www.yiiframework.com/doc/api/1.1/CHtml/#ajaxSubmitButton-detail)是实现这一点的最简洁的方法，因为您可以非常轻松地映射调用的每个事件。它看起来像这样：

```
<?php 
echo CHtml::ajaxSubmitButton('en', CHtml::normalizeUrl(array('site/changeLanguage')),
array(
    'error'=>'js:function(){
        alert("error");
    }',
    //if you add a return false in this, it will not submit. 
    'beforeSend'=>'js:function(){
        alert("beforeSend");                                            
    }',
    'success'=>'js:function(data){
        alert("success, data from server: "+data);
    }',
    'complete'=>'js:function(){
        alert("complete");
    }',
    //'update'=>'#where_to_put_the_response',
)
);
?> 
```

当然，您不必使用每个参数。update 参数可以立即更新 HTML 标签。

[编辑：如果您使用控制器的renderPartial](http://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail)方法，这可以很容易地完成，例如在您的站点控制器中，如果您有负责索引的操作。

```
public function actionIndex(){
   //get variables, etc

   if(Yii::app()->request->isAjaxRequest) {
      $lang = $_POST['nameOfSubmit'];

   }else {
      //...
   }
   //if the 3rd parameter is true, the method returns the generated HTML to a variable
   $page = $this->renderPartial('_page', array(/*parameters*/ ), true); 
   echo $page; 
} 
```

然后，在您的视图文件中，您可以简单地拥有

```
<?php echo CHtml::ajaxSubmitButton('en', CHtml::normalizeUrl(array('site/index')),
array('update'=>'#content_div',));?> 
```

和

```
<?php echo CHtml::ajaxSubmitButton('tw', CHtml::normalizeUrl(array('site/index')),
    array('update'=>'#content_div',));?> 
```

# apache-flex - Flash builder 4.6 - 代码隐藏方法

> ID：10835854
> 
> 赞同：0
> 
> 时间：2012-05-31T14:44:22.280
> 
> 标签：apache-flex, mobile, air, flash-builder, code-behind

我正在尝试为移动应用程序使用 flash builder 找出“代码背后”的正确方法：

1.  我正在创建一个 flex 移动 AIR 项目（基于“选项卡式视图”模板）
2.  在设计模式下设置我的 UI
3.  现在我希望所有逻辑都在一个单独的类中，从而相应地改变 UI 外观

听起来很容易，但是我真的无法获得这样做的方法，感谢您的帮助:)

**更新：**

主应用：

```
<?xml version="1.0" encoding="utf-8"?>
<s:TabbedViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                                  xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="160">
    <s:ViewNavigator label="a" width="100%" height="100%" firstView="views.aView"/>
    <s:ViewNavigator label="b" width="100%" height="100%" firstView="views.bView"/>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
</s:TabbedViewNavigatorApplication> 
```

观点一：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="a">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:Label id="txt" x="280" y="139" text="Label"/>
</s:View> 
```

所以现在我希望 MyClass 根据我的逻辑更改 txt textField ，正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:48:47.650

All you do is make an AS file that has the same base class as whatever your MXML object was initially set up as, for example if it's a VGroup make MyBaseClass extends VGroup, then change the VGroup to MyBaseClass.

Example

[Main.mxml]

```
<main:MainBase 
   xmlns:main="*"
   ...>
</main:MainBase> 
```

[MainBase.as]

```
public class MainBase extends Application 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:13:01.597

将您的代码背后视为基类（或[抽象类](http://www.as3dp.com/2010/12/actionscript-3-0-interface-what-are-they-good-for/)）。在抽象类中，将方法的实际实现或属性背后的“真实对象”留给扩展类来提供是很常见的。

这与在 Flash 中将基类设置为自定义类时所做的完全一样，但实际的成员对象（按钮等）是在其库实例链接到您的剪辑的 MovieClip 的舞台上提供的。

有关背后代码的更多信息，请在[此处查看我的博客文章。](http://www.developria.com/2010/05/code-behind-vs-template-compon.html)如果您想查看此处描述的模板组件的代码，[请查看此处](http://flexdiary.blogspot.com/2009/11/flex-template-component.html)。尽管模板组件在 Spark 世界 (IMO) 中用处不大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T21:59:10.230

一种优雅的方式是实现 IMXMLObject。在实现该接口时，IMXMLObject#initialize 方法将组件（命名为 Object 类型的文档）和可选的 id（类型为 String）作为参数，您可以轻松实现此模式。最大的优点是，您使用组合而不是继承，并且在使用接口时，您可以将其用作某种类型保存混合作为视图行为：

```
 package net.icodeapp.examples.views
    {
      import flash.events.MouseEvent;

      import mx.core.IMXMLObject;
      import mx.events.FlexEvent;

      public class ViewBaseModel implements IMXMLObject
      {
        //-------------------------------------------------------------------------
        //
        //          Properties
        //
        //-------------------------------------------------------------------------

        private var _id:String;

        private var _viewBase:ViewBase;

        protected function set viewBase(value:ViewBase):void
        {
          _viewBase = value;

          if (!_viewBase)
            throw new ArgumentError('View must be instance of ViewBase');

          if (!_viewBase.initialized)
            _viewBase.addEventListener(FlexEvent.CREATION_COMPLETE, viewBase_creationCompleteHandler, false, 0, true);
          else
            viewCreationCompleted();
        }

        //-------------------------------------------------------------------------
        //
        //          Constructor
        //
        //-------------------------------------------------------------------------

        public function ViewBaseModel()
        {
        }

        //-------------------------------------------------------------------------
        //
        //          Methods
        //
        //-------------------------------------------------------------------------

        public function initialized(document:Object, id:String):void
        {
          viewBase = document as ViewBase;
          _id = id;
        }

        private function viewCreationCompleted():void
        {
          _viewBase.addEventListener(MouseEvent.CLICK, viewBase_clickHandler);
        }

        //-------------------------------------------------------------------------
        //
        //          Event Handler
        //
        //-------------------------------------------------------------------------

        private function viewBase_creationCompleteHandler(event:FlexEvent):void
        {
          viewCreationCompleted();
        }

        private function viewBase_clickHandler(event:MouseEvent):void
        {
          // todo: do some action
        }
      }
    } 
```

模型被初始化，引用由框架设置。查看生成的 ActionScript 代码时，您会看到模型实例化后在构造函数中调用的 IMXMLObject#initialize。

```
 <?xml version="1.0"?>
    <s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
                 xmlns:views="net.icodeapp.examples.views.*">
      <fx:Declarations>
        <views:ViewBaseModel/>
      </fx:Declarations>
    </s:Group> 
```

模型将通过视图接收事件，并可以在其上调用方法。

# eclipse - 即使加载了软件，Eclipse 也不会列出可供选择的软件

> ID：10835855
> 
> 赞同：2
> 
> 时间：2012-05-31T14:44:22.610
> 
> 标签：eclipse, debian, eclipse-indigo

`eclipse-SDK-3.7.2-linux-gtk-x86_64.tar.gz`我最近从tar 球（如果我单击“全选”，则表明已选择项目，尽管它们未显示在列表中。

这似乎与[Bug 290395](https://bugs.eclipse.org/bugs/show_bug.cgi?id=290395)相似。但是，我已经尝试了建议的修复（即`export GDK_NATIVE_WINDOWS=true`），但这对解决问题没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:55:45.593

不确定这是如何解决的，但似乎通过删除 Eclipse 目录以及所有已创建的目录和工作区，在重新安装和启动 Eclipse 后问题得到解决。问题可能仍然是由于问题中提到的 GDK，但确切原因尚不清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T00:56:38.763

我遇到了同样的问题，只是删除了 .metadata 文件夹并修复了，也许 version.ini 文件对此有罪...我不知道，只是说...

# java - Servlet 与文件系统的交互：存储文件并为客户端访问生成 URL

> ID：10835857
> 
> 赞同：1
> 
> 时间：2012-05-31T14:44:33.157
> 
> 标签：java, gwt, servlets

**概括**

1.  我需要使用可移植和可预测的路径存储上传的和服务器生成的图像，以便我的服务器代码知道这些图像存在的位置。
2.  我需要为这些可以发送到客户端的图像生成 URL。这些 URL 将用于 HTML 图像元素。

**问题**

我的 Web 应用程序允许用户使用 gwtupload(Apache Commons) 上传图像。此图像存储在服务器上，并将 URL 返回给客户端，以便显示图像。gwtupload 提供了一个客户端方法来获取上传图像的 URL。这适用于部署；以下方面没有：

*   在某些情况下，必须裁剪上传的图像。这会导致 servlet 方法生成一个新图像。我想存储这个裁剪的图像并返回（给客户端）一个访问 URL。
*   然后，这个图像被另一种方法用来生成另一个图像。此方法必须知道先前上传（和/或裁剪）图像在文件系统上的位置。然后必须将新图像的 URL 返回给客户端。

我的实现在 GWT 开发模式下完美运行。但是，正如我所料，在部署到我自己的 Tomcat 服务器后，由于我对文件系统的困惑，远程服务失败了。我不知道将这些图像存储在服务器文件系统上可预测位置的正确方法，也不知道如何生成访问 URL（对于驻留在 WAR 之外的文件，因为这些图像会。）

所有这些图像仅在当前会话中需要，因此位置可以是临时目录。我花了两天时间在网上试验和拖网寻找解决方案，但无济于事。

我将在下面发布精简代码。这是我尝试简单地使用工作目录和相对路径名。使用附加到我的 servlet 容器的 Eclipse 调试器，我可以看到 String dataDir = context.getRealPath("foo") 指示 servlet 中的临时文件夹的结果：但是当我使用资源管理器导航到那里时，没有写入任何文件到磁盘。我很困扰。

```
public String[] generatePreview(String xml) {

    PreviewManager manager = new PreviewManager();
    String url;

    try{       
        preview = manager.generatePreview(xml);
    }
    catch (Exception e){e.printStackTrace();}

    //Create the preview directory
    File folder = new File("previews");
    if (!folder.exists()) folder.mkdir();

    //The file to be written to
    File output = new File(folder, "front.jpg");

    ServletContext context = getServletContext();
    String dataDir = context.getRealPath("previews");

    try {
         ImageIO.write(image, "jpg", output);
    } catch (IOException e) {
         e.printStackTrace();
    }

    url = "previews/" + output.getName();

    return url;
}

@Override
public String cropBackground(int[] coord_pair, String relativePath) {

    File backgroundsFolder = new File("backgrounds");
    if (!backgroundsFolder.exists()) backgroundsFolder.mkdir();

    ServletContext context = getServletContext();
    String dataDir = context.getRealPath("backgrounds");

    File current = new File(relativePath);
    String croppedName = "cropped_" + relativePath.replace("./backgrounds/", "");

    int x = coord_pair[0];
    int y = coord_pair[1];
    int width = coord_pair[2];
    int height = coord_pair[3];
    String croppedPath = null;

    try {
        croppedPath = imageCropper.createCroppedImage(current, "backgrounds",      croppedName, x, y, width, height);
    }
    catch (IOException e){
        e.printStackTrace();
    }

    current.delete();
    return "backgrounds/" + croppedPath; 
```

我知道我当前的“返回”语句在部署中永远不会起作用：我需要正确生成 URL 并作为字符串返回。对于问题的长度，我很抱歉，但我想澄清我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:02:03.310

选择在 Tomcat 之外存储图像的目录。为每个上传或生成的图像分配一个唯一的 ID，并将图像存储在此目录中（例如，以 ID 作为文件名）。

生成图像 servlet 的 URL，该图像 servlet 将通过 ID 读取此目录中的图像，并将图像的字节发送到 servlet 响应的输出流：`image.action?id=theImageId`。

# javascript - jQuery 1.7.1 - 文本输入的“值”未在 Firebug Inspect 元素中更新，但在屏幕上

> ID：10835859
> 
> 赞同：3
> 
> 时间：2012-05-31T14:44:40.590
> 
> 标签：javascript, jquery, firebug

使用 jQuery 1.7.1，我注意到`value`当我在 Firebug 的 Inspect Element 工具中查看文本输入字段时，它的属性/属性不会更新，但会在屏幕上更新，即在实际可见的文本框中。

例如，当使用以下内容（内联使用）更改文本的值时：

```
jQuery(function() {
    jQuery('#event').val("test");
}); 
```

文本框本身会显示`test`，但 Firebug 的 Inspect Element 并不代表更改：

```
<input type="text" value="" placeholder="" id="event" name="event" class="input-text"> 
```

我确信在使用旧 jQuery 之前我已经看到 Firebug 中的值变化，但是在这种情况下没有，我的同事也使用 jQuery 1.7.1。

这是这个特定版本的 jQuery 的怪癖/错误还是我在某个地方错过了一步？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T14:52:37.670

value 属性始终显示`defaultValue`. `value`Firebug 从未在属性中显示当前值。电流`value`始终在屏幕上可见。

这与 Firebug 或 jQuery 无关，它是 HTML 标准。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T14:52:35.927

属性值永远不会改变，只有属性。

[http://jsfiddle.net/cc5Pm/1/](http://jsfiddle.net/cc5Pm/1/)

```
var input = document.getElementsByTagName("input")[0];
setInterval(function(){
    input.value = parseInt(input.value) + 1;
    console.log(input.value, input.getAttribute("value"));
},1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:52:09.620

我也看到了这一点：即输入的 value 属性在 Firebug 中没有改变。上次我注意到这一点是不久前（比如 2 年）。顺便说一句，我也在使用 jQuery，但我真的怀疑 jQuery 与此有关。这就是 Firebug 的工作方式（或至少工作方式）。

当然，您仍然可以使用 Firebug 控制台来明确获取值：

```
console.log( $('input#event').val() ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:51:07.987

有时 Firebug 并不总是反映一些变化，我之前已经注意到这一点。

如果有刷新我还没有找到。您可以关闭并再次打开 Firebug，或者只使用控制台检查值是否已更改

```
console.log($("#event").val()); 
```

# flash - youtube html5 iframe 嵌入在 IE 中失败，但我仍然可以观看 youtube 视频？

> ID：10835860
> 
> 赞同：1
> 
> 时间：2012-05-31T14:44:41.170
> 
> 标签：flash, html, youtube, embedding

我正在努力使 youtube 视频嵌入脚本与未安装 flash 的浏览器兼容。这是发生的事情：

我的 IE 浏览器不支持 FLASH 或 HTML5。因此，当我使用 youtubes iframe API 库加载嵌入式视频时，它失败了（可以理解）。然而，我仍然可以在 Youtube 上观看视频。

这怎么可能？如果用户使用的浏览器既不支持 HTML5 也不支持 FLASH，我该怎么办？

谢谢！

# c# - 在 winforms 中创建日历的最佳方法是什么？

> ID：10835862
> 
> 赞同：3
> 
> 时间：2012-05-31T14:44:53.970
> 
> 标签：c#, wpf, winforms, calendar

我需要在winforms中开发几个日历类型的控件。这些日历本质上都是垂直的。这个概念是日历将有每一天（在月视图中）、小时（在日视图中）或周（在年视图中）的列。我附上了月视图的示例（相当粗略）图像。

![在此处输入图像描述](../Images/3087c023f6b8f98b4522dada954e2d7b.png)

到目前为止，我使用带有许多面板和标签的表格布局面板已经很好地解决了这个问题。这可行，但是它很混乱并且加载速度很慢。它还带来了许多我试图克服的问题。我附上了一张截图，说明它目前的外观。

![在此处输入图像描述](../Images/cabcef97211e024dcfbc3518849f17ef.png)

我遇到了渲染问题（众所周知的口吃问题），我通过在构建网格时隐藏网格，然后在完成时显示它来解决这个问题。此外，我在正确调整表格大小方面遇到了问题（列数根据一个月中的天数而变化），正如您在屏幕截图中看到的那样，底行占用了所有空间。正如你可以想象的那样，这一切都非常令人讨厌，在我看来是相当hacky。

我已经尝试了一下 WPF，看看我是否可以克服这些问题，但似乎虽然它可能会渲染得更好一些，但列和行大小的问题是相同的。我可以采取其他方法来避免这些问题，还是最好硬着头皮切换到 WPF？我觉得这很令人沮丧，因为使用表格在 HTML 中完成这项工作非常容易。

重申我遇到的问题是：

1.  列不会像我期望的那样自动调整大小（最后一列只是填充了一些奇怪的 UI 的空间）
2.  行是相似的，底行占据了所有的空白空间。
3.  渲染缓慢
4.  重新调整控件大小时必须隐藏网格，否则会出现很多卡顿
5.  表格布局面板的 hacky 本质

我感谢用户对我应该如何最好地解决问题的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:59:11.580

我对表格布局面板没有太多经验，但在快速浏览后似乎有固定大小的选项用于固定数量的列/行（您可以在代码中更改）和百分比每列的大小设置。例如，当加载一个有 31 天的月份时，您将创建 31 列，宽度百分比约为 3.2258。你可能会做这样的事情：

```
int numColumns = 31;
tableLayoutPanel1.ColumnCount = numColumns;
tableLayoutPanel1.ColumnStyles.Clear();

for (int i = 0; i < numColumns; i++)
{
    tableLayoutPanel1.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 100f / numColumns));
} 
```

这意味着当您调整窗口大小时，每天都会保持相同的大小，并且它们都会扩展以适应控件的宽度。如果该尺寸对您来说太小，并且您需要将列设置为最小宽度，则可以将 TableLayoutPanel 放在启用了 AutoScroll 的控件中，并设置 TableLayoutPanel 的最小尺寸，如下所示：

```
int minColumnWidth = 20;
tableLayoutPanel1.MinimumSize = new Size(numColumns * minColumnWidth, 0); 
```

WPF 可以做得更好，但如果您没有使用它的经验，它可能需要更长的时间来完成。

在 Windows 窗体中，您始终可以使用自定义控件中的 Graphics 类和 OnPaint 覆盖手动绘制日历。这将避免子控件带来的闪烁和缓慢的问题，并且应该比 WPF 更容易学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T15:56:36.733

已经快一年了，但是自从我遇到你的问题后，我想分享一个我在 CodeProject 上找到的漂亮的 Outlook 风格的[Winforms 日历议程。](http://www.codeproject.com/Articles/38699/A-Professional-Calendar-Agenda-View-That-You-Will)

# wordpress - 为什么我的 Wordpress 网站中的所有页面都不起作用？

> ID：10835868
> 
> 赞同：1
> 
> 时间：2012-05-31T14:45:15.083
> 
> 标签：wordpress, apache

我正在尝试将 Wordpress 站点移动到新服务器。域名也从“olddomain.com”更改为“newdomain.com”。

为此，我将所有文件移至新服务器并在 Apache 中设置了一个虚拟主机。然后，我使用脚本 (http://interconnectit.com/124/search-and-replace-for-wordpress-databases/) 将“olddomain.com”的实例替换为“newdomain.com”。

当我在浏览器中访问我的网站时，它的主页正在工作。但是，我的其他页面（例如“newdomain.com/about/”）都没有工作 - 它们返回 404。

我检查了我的 Apache 错误日志并得到了以下日志。

```
[client 69.184.72.91] File does not exist: /home/david/wordpressSiteFiles/about, referer: http://newdomain.com/ 
```

为什么 Apache 在我的服务器上寻找一个名为“about”的文件？这是我现在拥有的 .htaccess 文件。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:48:57.397

Do you have allowoverride set on the server? [http://codex.wordpress.org/Using_Permalinks](http://codex.wordpress.org/Using_Permalinks)

> allowoverride must be set in your httpd.config or your .htaccess will be completely ignored.
> 
> Your server may not have the AllowOverride directive enabled. If the AllowOverride directive is set to None in your Apache httpd.config file, then .htaccess files are completely ignored. In this case, the server will not even attempt to read .htaccess files in the filesystem.

Source [http://wordpress.org/support/topic/wordpress-cant-find-my-new-pages](http://wordpress.org/support/topic/wordpress-cant-find-my-new-pages)

**I had this same problem a few days ago and this fixed it!**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:46:36.383

听起来您有需要更新的重写规则。寻找一个`.htaccess`文件。

# c# - 如何以更 oop 的方式设计这些代码？

> ID：10835869
> 
> 赞同：0
> 
> 时间：2012-05-31T14:45:16.440
> 
> 标签：c#, oop

我正在使用 agsXMPP 库开发基于 XMPP 的 Microsoft WPF 即时消息应用程序。agsXMPP 中有很多事件，如 OnXmppConnectionStateChanged、OnLogin、OnPresence 等，另一方面，由于 WPF 线程模式，我必须通过 UI 的 Dispatcher.Invoke() 方法处理事件，它看起来像这样：

```
 void handleRosterItem(object sender, agsXMPP.protocol.iq.roster.RosterItem item)
    {
        STP_FriendsHolder.Dispatcher.BeginInvoke(new Action(delegate
        {
            RosterItemControl rosterItem = new RosterItemControl();
            rosterItem.RosterItemName = item.Jid.User;
            rosterItem.Margin = new Thickness(0);
            STP_FriendsHolder.Children.Add(rosterItem);
        }));
    } 
```

我几乎在每个 BeginInvoke/Invoke 方法中都使用匿名方法，因为我不想到处创建太多命名方法（因为我认为这不是那么“干净”）。但恐怕不是以 OOP 方式，而且这些匿名方法很难维护。那么，在这种情况下，我怎样才能以更好的方式编码呢？对不起我的英语不好，我已经尽力说清楚了^_^谢谢！</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:52:34.000

> 因为我不想到处创建太多的命名方法

所以您不想重用任何 BeginInvoke/Invoke 代码？这完全没问题。

尽管我会反对“干净”的评论。

哪个更干净？哪个对您来说更具可读性？这个...

```
 STP_FriendsHolder.Dispatcher.BeginInvoke(new Action(delegate
    {
        RosterItemControl rosterItem = new RosterItemControl();
        rosterItem.RosterItemName = item.Jid.User;
        rosterItem.Margin = new Thickness(0);
        STP_FriendsHolder.Children.Add(rosterItem);
    })); 
```

... 或这个？

```
 STP_FriendsHolder.Dispatcher.BeginInvoke(AddRosterItem);

    void AddRosterItem()
    {
        RosterItemControl rosterItem = new RosterItemControl();
        rosterItem.RosterItemName = item.Jid.User;
        rosterItem.Margin = new Thickness(0);
        STP_FriendsHolder.Children.Add(rosterItem);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:15:49.930

1.  我不会在您的代码隐藏类中处理 XMPP 事件。创建一个只负责处理事件的类。
2.  创建一个接口，该类将使用漂亮的干净方法来转换 XMPP 事件，例如`NewRosterItem(RosterItem item)`
3.  通过调用调度程序调用这些方法（即将 BeginInvoke 封装到处理事件的类中。
4.  让您的视图实现接口并注册事件处理类，然后他们可以创建和更新任何必要的控件。

# excel - 如何对excel中只包含时间的所有单元格求和？

> ID：10835880
> 
> 赞同：0
> 
> 时间：2012-05-31T14:45:45.193
> 
> 标签：excel, excel-2007

一些单元格包含时间，其中一些包含“#VALUE！”、“######”和文本。我想总结所有只包含时间的单元格。

同时我写了`=SUMIF(D13:D43,"<>#VALUE!")`，但只有当单元格包含“#VALUE！”时它才有效

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:22:10.757

假设您的范围来自 D2:D8，请使用以下数组公式。

```
=SUM(IF(ISERROR(D2:D8),"",D2:D8)) 
```

要制作数组公式，请在完成写入时按 CTRL + SHIFT + ENTER，而不仅仅是 ENTER>

# facebook - 如何将有意义的键与 Facebook 页面应用的页面 ID 相关联

> ID：10835886
> 
> 赞同：0
> 
> 时间：2012-05-31T14:46:01.533
> 
> 标签：facebook, facebook-javascript-sdk, facebook-page

我们正在创建一个 Facebook Page Tab 应用程序。我们希望它可以安装在我们客户的业务 Facebook 页面上。他们将通过访问我们的 SaaS 应用程序来安装它，我们为他们提供了一个特定的客户 ID#。从那里他们将有一个“将此应用程序添加到您的 Facebook 页面”按钮，该按钮将使用 JavaScript SDK 的`FB.ui({method:"pagetab"...`调用将其添加到他们的页面。

现在，当他们的一位 Facebook 粉丝点击我们客户的页面，然后点击我们的应用程序时，应用程序页面会收到 signed_request 参数，可以解析该参数以找到他们的页面 ID。

问题是我无法找到将他们的客户 ID# 与他们的 Facebook 页面 ID 相关联的方法。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:01:12.947

你可以这样做

```
 FB.ui(
        {
            method: 'pagetab'
        },
        function(response) {
            if (response != null && response.tabs_added != null) {

                $.each(response.tabs_added, function(pageid) {
                      alert(pageid);
                });
            }
        }
      ); 
```

通过将每个页面 id 与客户 id 相关联来存储页面 id。

当用户访问您的应用时，您将获得页面 ID。然后，您可以轻松地从页面 id 识别客户 id。

# azure - 将 Async 与 MVC4 和 Azure 结合使用

> ID：10835891
> 
> 赞同：0
> 
> 时间：2012-05-31T14:46:19.560
> 
> 标签：azure, asp.net-mvc-4, async-ctp

我正在看这个讲座[http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2287](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2287)并且在 14:08 他说 MVC4 具有异步功能。我安装了 MVC4 beta 的 VS2010，但没有可用的异步。在做了一些搜索之后，我明白要使用 Async 你需要 VS11，更重要的是这里[https://www.windowsazure.com/en-us/develop/vs11/](https://www.windowsazure.com/en-us/develop/vs11/)他们告诉 Azure 还不支持 VS11 项目。这非常令人困惑，因为在视频中他没有告诉我需要 VS11，而且我无法从 UI 判断它是否是 VS11。

所以我的问题是我今天如何在 Azure 上使用 Async + MVC4？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:52:00.093

您可以安装一个[CTP并在 VS2010 中启用此功能。](http://www.microsoft.com/en-us/download/details.aspx?id=9983)它仍然是 CTP。该功能将成为 .NET 4.5 框架的一部分，并在 VS11 中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:47:20.927

如果您需要在 Azure 上使用新的 MVC 4 和 .Net 4.5 功能，请访问 Azure UserVoice 站点并为该功能投票：[http ://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-投票/建议/2598170-iis8-and-asp-net-4-5-support-in-azure-platform](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/2598170-iis8-and-asp-net-4-5-support-in-azure-platform)

# bash - 获取块设备的文件系统十六进制 ID，如“fdisk”所示

> ID：10835892
> 
> 赞同：2
> 
> 时间：2012-05-31T14:46:20.397
> 
> 标签：bash, filesystems, block-device

有没有一种简单的方法来确定给定分区的文件系统的十六进制 ID？比如说，我有一个 /dev/sda1 分区，它属于“Linux”类型，文件系统 ID 为 83（例如 fdisk 所示）。我需要从 bash 脚本中获取这个数字，而不需要解析 fdisk/sfdisk 的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T15:33:45.970

分区 ID 存储在 MBR（或逻辑 ID 的 EMBR）中。因此它们不存储在设备本身中。即 /dev/sda1 不包含它的类型。

fdisk 和类似的命令确实会显示分区类型，并且旨在正确执行此操作。试图避开它们是没有意义的。

此 Linux shell 脚本将显示给定设备的分区 ID：

```
#!/bin/sh
fdisk -l | tr -d '*' | awk -v dev=$1 '$1 == dev { print $5 } ' 
```

.

```
# some_command /dev/sda1
83 
```

# c# - WaitAll 构造中单个线程的性能测量

> ID：10835897
> 
> 赞同：3
> 
> 时间：2012-05-31T14:46:31.047
> 
> 标签：c#, multithreading, performance, soa, stopwatch

假设我正在编写一个模拟用户在系统上执行某些操作的软件。我正在使用秒表测量完成此类操作所需的时间。

大多数情况下，这非常简单：模拟按钮的单击，一些服务调用与此按钮相关联。测量完成此服务调用所需的时间。

现在问题来了，一些操作有多个与之关联的服务调用。由于它们仍然是相同逻辑操作的一部分，因此我使用 C# 提供的信号机制将它们“分组”，如下所示（伪）：

```
var syncResultList = new List<WaitHandle>();

var syncResultOne = service.BeginGetStuff();
var syncResultTwo = service.BeginDoOtherStuff();

syncResultList.Add(syncResultOne.AsyncWaitHandle); 
syncResultList.Add(syncResultTwo.AsyncWaitHandle);

WaitHandle.WaitAll(syncResultList.ToArray());

var retValOne = service.EndGetStuff(syncResultOne);
var retValTwo = service.EndDoOtherStuff(syncResultTwo); 
```

因此，GetStuff 和 DoOtherStuff 构成了该特定操作的一项合乎逻辑的工作。而且，当然，我可以很容易地测量完成这种方法组合所需的时间，只需在它们周围放一个秒表。但是，我需要一种更细粒度的方法来处理我的统计数据。我真的对每个方法完成所需的时间量很感兴趣，而不会丢失 WaitHandle.WaitAll 提供的“分组”语义。

我为克服这个问题所做的是编写一个包装类（或者更确切地说是一个代码生成文件），它使用回调实现一些计时机制，因为我对实际结果不感兴趣（保存异常，这是一部分的统计数据），我只是让它返回一些统计数据。但这以某种方式被证明是一种性能消耗。

所以，基本上，我正在寻找这种方法的替代方案。也许它比我现在想的要简单得多，但我现在似乎无法自己弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:19:25.323

`Tasks`这看起来像是（假设您使用的是 C# 4）的主要候选人

您可以`Tasks`使用 MSDN 从 APM 方法创建[：Task.Factory.FromAsync](http://msdn.microsoft.com/en-us/library/dd321469)

然后，您可以使用所有丰富的 TPL 优点，例如单个延续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:59:16.177

如果您的需求足够简单，一种简单的方法是单独记录每个服务调用，然后根据各个服务调用计算逻辑操作。

IE 如果逻辑操作 A 由并行服务调用 B 和 C 组成，其中 B 需要 2 秒，C 需要 1 秒，那么 A 需要 2 秒。

A = 最大值（B，C）

# java - java webdriver访问受限站点

> ID：10835900
> 
> 赞同：0
> 
> 时间：2012-05-31T14:46:34.163
> 
> 标签：java, selenium, webdriver

我想知道如何使用 WebDriver 登录受限制的站点。当您到达该站点时，它会说：“服务器（服务器名称）需要用户名和密码。服务器说：受限制的文件。” 此消息框不提供检查元素或查看任何来源的选项，因此我无法获取框架名称或任何内容。有没有办法处理这个？这是一个开发站点并受到保护。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:52:21.597

只有一种方法可以做到这一点 - 在 URL 中发送用户名。因此，例如，如果该站点是`http://www.example.com/restricted.html`您必须像这样访问它

```
driver.get("http://username:password@www.example.com/restricted.html"); 
```

上述伪代码适用于 Java 中的 Webdriver，其中`driver`是 WebDriver 的有效实例

# css - CSS margin-top 作为高度的函数

> ID：10835903
> 
> 赞同：1
> 
> 时间：2012-05-31T14:46:44.727
> 
> 标签：css

是否可以在不使用固定高度的元素的情况下将元素的边距顶部设置为其高度的一半？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:52:50.047

**演示：http:** [//jsfiddle.net/6qsvt/](http://jsfiddle.net/6qsvt/)

jQuery

```
 $(function() {
    // vertical align function
    $.fn.vAlign = function() {
        return this.each(function(i){
            var ah = $(this).height();
            var ph = $(this).parent().height();        
            var mh = Math.ceil((ph-ah) / 2); //var mh = (ph - ah) / 2;
            $(this).css('margin-top', mh);
            console.log(mh);
        });
    };

    $('#i').vAlign();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:53:49.753

Calc 可能会对您有所帮助，但它还只是一个草稿。检查以下链接：[计算](http://updates.html5rocks.com/2012/03/CSS-layout-gets-smarter-with-calc)

将它与 attr 结合使用，您可能会做一些花哨的事情，例如：

```
margin-top: calc(50% * (attr(width)) 
```

# php - PHP $_GET 未声明

> ID：10835906
> 
> 赞同：0
> 
> 时间：2012-05-31T14:46:57.090
> 
> 标签：php

在我的工作场所，我们使用了一段存储在远程服务器上的代码来进行 Clickbank 搜索。现在我的老板决定把所有东西都转移到我们的服务器上，并给了幸运（呵呵）我做这件事的工作。

现在，我一直认为 $_GET 变量需要在本地范围内声明： $var = $_GET['var']; 但是在这段代码中，似乎原始程序员刚刚插入了这一行，他在代码中使用了 $var 而没有声明它......这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:50:31.410

听起来注册全局变量已打开。在本地注册全局变量范围内的所有请求变量，因此这是可能的。它也是一个非常不安全的功能，自 5.3 版以来已在 PHP 中弃用。

我强烈建议关闭 register_globals 并手动声明本地范围的变量，以便您可以正确处理传入数据的清理和过滤。

有关 register_globals 的更多信息以及为什么在官方 PHP 文档中这是一个坏主意：http: [//php.net/manual/en/security.globals.php](http://php.net/manual/en/security.globals.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:51:33.050

这可能是因为设置了 php 设置`register_globals`。

这意味着， a在您的代码`$_GET['foo']`中自动可用。`$foo`

在这里查看更多信息：

[http://www.php.net/manual/en/ini.core.php#ini.register-globals](http://www.php.net/manual/en/ini.core.php#ini.register-globals)

基本上这是一个非常大的安全漏洞，应该避免。

此外，它自 5.3 起已弃用，并将在 5.4 中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:56:16.973

您可以在此链接 + 关于 register_globals 的简短定义中找到您的答案。

[PHP 中的 register_globals 是什么？](https://stackoverflow.com/questions/3593210/what-are-register-globals-in-php)

# r - 有没有办法将 mm:ss.00 转换为 seconds.00？

> ID：10835908
> 
> 赞同：22
> 
> 时间：2012-05-31T14:46:58.880
> 
> 标签：r, time

我有一些 mm:ss.00 格式的性能时间数据（即 02:15.45 或 00:34.58）。R 将变量识别为一个因素，但我想将每个性能时间转换为几秒钟（即 02:15.45 到 135.45）。我一直在寻找答案，但似乎找不到让它工作的方法。提前致谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-07-21T21:20:47.030

使用 lubridate 包（tidyverse 的一部分）：

```
library(lubridate)
period_to_seconds(hms("12:12:54")) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-31T15:17:23.730

这是我用了很多年的一个。它也是矢量化的。

```
toSeconds <- function(x){
   if (!is.character(x)) stop("x must be a character string of the form H:M:S")
   if (length(x)<=0)return(x)

   unlist(
      lapply(x,
         function(i){
            i <- as.numeric(strsplit(i,':',fixed=TRUE)[[1]])
            if (length(i) == 3) 
               i[1]*3600 + i[2]*60 + i[3]
            else if (length(i) == 2) 
               i[1]*60 + i[2]
            else if (length(i) == 1) 
               i[1]
         }  
      )  
   )  
} 
```

反之（将小数秒保留为请求的位数：

```
secondsToString <- function(x,digits=2){
   unlist(
      lapply(x,
         function(i){
            # fractional seconds
            fs <- as.integer(round((i - round(i))*(10^digits)))
            fmt <- ''
            if (i >= 3600)
               fmt <- '%H:%M:%S'
            else if (i >= 60)
            fmt <- '%M:%S'
            else
               fmt <- '%OS'

            i <- format(as.POSIXct(strptime("0:0:0","%H:%M:%S")) + i, format=fmt)
            if (fs > 0)
               sub('[0]+$','',paste(i,fs,sep='.'))
            else
               i
         }
      )
   )
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-31T14:56:27.053

查看strptime。具体来说

```
t = "02:15.45"
(as.numeric(as.POSIXct(strptime(t, format = "%M:%OS"))) - 
    as.numeric(as.POSIXct(strptime("0", format = "%S")))) 
```

这会起作用，但可能有点尴尬（这样做主要是因为 POSIXct 烦人的自动单位转换......）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-03-16T07:40:41.730

```
library(lubridate)
df$variable<- hms(df$variable)
df$variable<- as.numeric(df$variable) 
```

使它成为单线也可以。对我来说就像一个魅力。
我希望这有帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-31T15:06:57.570

我不太舒服，所以我不知道是否有任何可用的内置函数，但我已经制定了这段代码。

```
mmss_to_ss <- function  (string)
{
  mmss <- strsplit (string, ":", T)
  mm <- as.numeric (mmss[[1]][1])
  ss <- as.numeric (mmss[[1]][2])
  return (mm * 60 + ss)
} 
```

这将接受 mm:ss 格式的时间字符串并返回秒值。可以轻松修改代码以从 hh:mm:ss 转换为秒。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T16:43:23.310

您可以使用 Lubridate 包轻松完成此操作。如果您使用格式“h:m:s”，您可以将变量转换为 lubridate 对象

```
hms("12:12:54") 
```

然后将其转换为秒

```
seconds(hms("12:12:54")) 
```

这是 JSS 中 lubridate 文章的链接

[http://www.jstatsoft.org/v40/i03/paper](http://www.jstatsoft.org/v40/i03/paper)

# ajax - 如何在加载了另一个版本的 jquery 的 ajax 弹出窗口中关闭 fancybox？

> ID：10835909
> 
> 赞同：0
> 
> 时间：2012-05-31T14:47:00.763
> 
> 标签：ajax, fancybox, jquery

当弹出页面中包含 jquery 时（我使用 AJAX 并在弹出窗口中包含外部 php 页面），我在关闭花式框弹出窗口时遇到问题。花式盒子的设置如下：

```
$(".various3").fancybox({
'type'    : 'ajax',
'titlePosition'     : 'inside',
'transitionIn'      : 'none',
'transitionOut'     : 'none',
'ajax' : {
type        : 'GET'
}
}); 
```

弹出窗口有一个“取消”按钮，允许用户关闭弹出窗口（使用 jQuery.fancybox.close();）。我必须在弹出页面中包含 jquery 以允许其他一些功能工作，这会阻止 jQuery.fancybox.close(); 从工作。如果我从弹出页面中删除 jquery，那么它可以正常工作，但是我无法弄清楚如何在主页上引用 jquery 的实例（我已经尝试过 parent 以防万一，虽然我不认为这应该工作，因为它是div 确实没有）。我试过使用：

```
var localjquery = jQuery.noConflict(true); 
```

在弹出页面中，这允许我使用 jQuery.fancybox.close(); 要成功关闭弹出窗口，但这会阻止使用 $ 来引用我无法编辑的此页面上其他插件所需的 jquery。如果我添加

```
var mainjquery = jQuery.noConflict(); 
```

在主页上的第一个 jquery 实例之后，这显然工作正常，我可以在父级上将其称为 mainjquery，但如果然后尝试

```
mainjquery.fancybox.close(); 
```

在弹出窗口中，它说 mainjquery 未定义。

我怀疑这是一个问题，因为多个 jquery 实例的组合并通过 ajax 将完全独立的页面加载到 div 中（而不是使用 iframe 等，然后我可以使用 parent. 或类似的）。如果有人能阐明我如何从子弹出窗口中引用 mainjquery 引用，或者我可以关闭fancybox 的更好方法，那将不胜感激。

非常感谢！

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:50:18.370

最好的办法是测试它是否是一个 ajax 请求，如果是，请不要包含 jquery（或您已经拥有的任何其他脚本）。

这是我在 php 页面上使用的代码示例，用于执行 ajax 和常规页面请求。

```
define('IS_AJAX', isset($_SERVER['HTTP_X_REQUESTED_WITH']) && 
strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest');
....
if(!IS_AJAX)
{
    //echo your header with scripts
    echo $header;
}
//else just echo the contents of the page body 
```

编辑：

如果您需要向`head`标签中添加内容，您应该使用 iframe 而不是 ajax 类型的 fancybox。

# perl - 我该如何处理“使用未初始化的值”警告？

> ID：10835911
> 
> 赞同：0
> 
> 时间：2012-05-31T14:47:06.943
> 
> 标签：perl

我的代码中有一些错误。此代码在本地工作，但不在我的服务器上。

```
#Vérification de la concordance BD ->  Sons
for (my $k = 0; $k < scalar(@tableau_de_donnees); $k++) {
    my $donnee = $tableau_de_donnees[$k];
    if ($donnee) {
        my @une_donnee = split(/\./, $donnee);    #enlève l'extension
        for (my $l = 0; $l < scalar(@tableau_de_sons); $l++) {
            my $son    = $tableau_de_donnees[$l];
            my @un_son = split(/\./, $son);       #enlève l'extension
            if ($une_donnee[0] eq ($un_son[0])) {
                $trouver_son = "1";
            }
        }
        if ($trouver_son == "0") {
            print "Le fichier "
              . $tableau_de_donnees[$k]
              . " est introuvable. \n";
        }
        $trouver_son = "0";
    } else {
        print "Fin";
    }
} 
```

这是日志：

> 在 verif_db_physio.pl 第 141 行第 2 行的字符串 eq 中使用未初始化的值。
> 
> 在 verif_db_physio.pl 第 139 行第 2 行的拆分中使用未初始化的值 $son。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T15:50:48.350

在我看来是这样的：

```
my $son    = $tableau_de_donnees[$l]; 
```

应该是这样的::

```
my $son    = $tableau_de_sons[$l]; 
```

你可以通过改变完全避免这个问题

```
for (my $l = 0; $l < scalar(@tableau_de_sons); $l++) {
    my $son    = $tableau_de_donnees[$l]; 
```

到

```
for my $son (@tableau_de_sons) { 
```

# jsf - render of a4j commandButton doesnt work; page not rendering

> ID：10835916
> 
> 赞同：1
> 
> 时间：2012-05-31T14:47:23.300
> 
> 标签：jsf, ajax4jsf

when i click the button handler.toggleCreatingTheme() is called, but the outputPanel is not rendering. When i refresh the page(f5) the content of the panel is showed.

```
 <a4j:commandButton styleClass="simple-submit-button"
                    action="#{handler.toggleCreatingTheme()}"
                    rendered="#{!handler.creatingTheme}"
                    value="txt"
                    immediate="true"
                    render="newThemeForm" oncomplete="initEditor()" status="statusWait" />

                <a4j:outputPanel id="newThemeForm" ajaxRendered="true" rendered="#{handler.creatingTheme}"> 
```

this tags are both in a h:form tag, there is just that one h:form.

How do I let the page refreshing on his own, so rendering the panel at the moment when i click the button?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:11:29.590

嵌入`newThemeForm`另一个 a4j:outputPanel 并渲染它而不是 reRendering `newThemeForm`。这是因为`newThemeForm`在尝试渲染它时不会在 DOM 中，因为它的`rendered`属性仍然是`false`. 喜欢：

```
<a4j:outputPanel id="outerPanel>
<a4j:outputPanel id="newThemeForm" rendered="#{bean.booleanvalue}">
</a4j:outputPanel>
</a4j:outputPanel> 
```

渲染`outerPanel`而不是`newThemeForm`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:20:11.760

我已经尝试过 AhamedMustafaM 提到的方式，但它对我不起作用，所以我搜索并尝试了一段时间，所以最后我必须通过一种解决方法让它工作，这就是如何

```
<a4j:commandButton id="clear" value="Clear" action="#{handler.clearData}"  immediate="true"  >
    <!-- dummy call just to make it work -->
    <a4j:actionListener listener="#{ViewerController.test}"/>
    <f:ajax render="dataGroupPanel"/>
</a4j:commandButton> 
```

# java - Java Logging - 记录已完成，我的日志文件在哪里

> ID：10835917
> 
> 赞同：0
> 
> 时间：2012-05-31T14:47:24.980
> 
> 标签：java, logging, netbeans, glassfish, java.util.logging

我正在使用 java.util.logging、NetBeans IDE 和 Glassfish 服务器。

我已经加载了一个自定义日志属性文件。应用程序正在执行日志记录，但缺少日志文件。

```
handlers = java.util.logging.FileHandler
java.util.logging.ConsoleHandler.level = ALL
java.util.logging.FileHandler.pattern = %h/java%u.log
java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter
java.util.logging.FileHandler.level = INFO
java.util.logging.ConsoleHandler.level = ALL 
```

是我的日志文件属性，以下是加载它的代码：

```
Properties props = new Properties();
Logger log = Logger.getLogger(ServiceInvoker.class.getName());
log.setLevel(Level.ALL);
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
URL resource = classLoader.getResource("log.properties");
File file = new File(resource.toURI());
FileInputStream fis = new FileInputStream(file);
props.load(fis);
LogManager.getLogManager().readConfiguration(fis); 
```

我检查了位置 C:\Users\user_name 的日志文件。当我不使用此日志记录时，我可以在 NetBeans 服务器控制台中看到日志消息，当我使用此日志记录时，控制台中没有消息，并且日志文件也丢失了！请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:36:09.077

```
 ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
        InputStream is = classLoader.getResourceAsStream("log.properties");
        LogManager.getLogManager().readConfiguration(is); 
```

是正确的代码。

# iphone - Drawing route partially not getting required output in iPhone MapView

> ID：10835919
> 
> 赞同：0
> 
> 时间：2012-05-31T14:47:27.583
> 
> 标签：iphone, google-maps, mkmapview, google-polyline

I am trying to draw route between two points using polyline . I got somewhat route but not correct and I think it will get confused at the turn . I am using google api for getting points of route .Following is code what i tried please check .

```
 - (IBAction)onclickDrawButton:(id)sender

{
    flag=TRUE;
    NSString *startpoint=[satrtTextfield text];    
    NSString *endpoint=[endTextfield text];

    NSMutableString *urlString=[NSMutableString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%@&destination=%@&sensor=false",startpoint,endpoint];
    NSURL *url = [NSURL URLWithString:urlString];

    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
     NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request 
    delegate:self];
    if(connection)
    {
        NSLog(@"connectin done");
    } 
```

}

```
 -(void)connection:(NSURLConnection*)connection didReceiveResponse: (NSURLResponse*)response
{    
 if(flag)
 {
    recievedRoutes=[[NSMutableData alloc]init];

 } 
```

}

```
 - (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    if(flag){
          NSString *jsonResult = [[NSString alloc] initWithData:recievedRoutes   encoding:NSUTF8StringEncoding];
    NSLog(@"json response %@",jsonResult);

    NSDictionary *partialJsonDict=[jsonResult JSONValue];
    NSArray *items=[partialJsonDict valueForKey:@"routes"];

    //NSLog(@"responsed valued %@",[[items objectAtIndex:0]valueForKey:@"legs"]);

    NSArray *aary=[[items objectAtIndex:0]valueForKey:@"legs"];
    NSLog(@"legs array wuth polyline %@",[[aary objectAtIndex:0]valueForKey:@"steps"]);
    NSArray *steps=[[aary objectAtIndex:0]valueForKey:@"steps"];
    NSLog(@"steps %@",[[steps objectAtIndex:1]objectForKey:@"polyline"]);
    NSMutableString *string=[[NSMutableString alloc]init];
    for(int i=0;i<[steps count];i++)
    {
        //NSLog(@"steps  i value %@",[[[steps objectAtIndex:i]objectForKey:@"polyline"]objectForKey:@"sttpoints"]);

        [string appendString:[[[steps objectAtIndex:i]objectForKey:@"polyline"]objectForKey:@"points"]];
    }
    NSLog(@"final %@",string);

    MKPolyline *polyline=[self polylineWithEncodedString:string];
    [mapView addOverlay:polyline];
    [self zoomToFitMapAnnotations:mapView];

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
 {   
   if(flag){
    [recievedRoutes appendData:data];
   } 
```

}

//to decode polyline and retrives coordintes i have used following method

```
-(MKPolyline *)polylineWithEncodedString:(NSString *)encodedString {

const char *bytes = [encodedString UTF8String];
NSUInteger length = [encodedString lengthOfBytesUsingEncoding:NSUTF8StringEncoding];
NSUInteger idx = 0;

NSUInteger count = length / 4;
CLLocationCoordinate2D *coords = calloc(count, sizeof(CLLocationCoordinate2D));
NSUInteger coordIdx = 0;

float latitude = 0;
float longitude = 0;
while (idx < length) {
    char byte = 0;
    int res = 0;
    char shift = 0;

    do {
        byte = bytes[idx++] - 63;
        res |= (byte & 0x1F) << shift;
        shift += 5;
    } while (byte >= 0x20);

    float deltaLat = ((res & 1) ? ~(res >> 1) : (res >> 1));
    latitude += deltaLat;

    shift = 0;
    res = 0;

    do {
        byte = bytes[idx++] - 0x3F;
        res |= (byte & 0x1F) << shift;
        shift += 5;
    } while (byte >= 0x20);

    float deltaLon = ((res & 1) ? ~(res >> 1) : (res >> 1));
    longitude += deltaLon;

    float finalLat = latitude * 1E-5;
    float finalLon = longitude * 1E-5;

    CLLocationCoordinate2D coord = CLLocationCoordinate2DMake(finalLat, finalLon);
    coords[coordIdx++] = coord;
    NSLog(@"in encoding  %f %f ",latitude,longitude);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
    if (coordIdx == count) {
        NSUInteger newCount = count + 10;
        coords = realloc(coords, newCount * sizeof(CLLocationCoordinate2D));
        count = newCount;
    }
}

MKPolyline *polyline = [MKPolyline polylineWithCoordinates:coords count:coordIdx];
free(coords);

 return polyline;
  } 
```

// to draw actual route

```
 - (MKOverlayView *)mapView:(MKMapView *)mapView
        viewForOverlay:(id<MKOverlay>)overlay {
MKPolylineView *overlayView = [[MKPolylineView alloc] initWithOverlay:overlay];
overlayView.lineWidth = 2;
overlayView.strokeColor = [UIColor purpleColor];
overlayView.fillColor = [[UIColor purpleColor] colorWithAlphaComponent:0.1f];
return overlayView; 
```

}

![enter image description here](../Images/b97374b8ba0037af6931466e945b3f6f.png)

![enter image description here](../Images/acb8cdb0078daae2752825dbd9395356.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:58:03.670

在你的线路之后

```
NSArray *steps=[[aary objectAtIndex:0]valueForKey:@"steps"]; 
```

用这个替换行可能有效

```
NSMutableArray *polyLinesArray = [[NSMutableArray alloc] init];

for (int i = 0; i < [steps count]; i++)
{
    NSString* encodedPoints = [[[steps objectAtIndex:i] objectForKey:@"polyline"] valueForKey:@"points"];
    MKPolyline *route = [self polylineWithEncodedString:encodedPoints];
    [polyLinesArray addObject:route];
}

[self.mapView addOverlays:polyLinesArray];
[polyLinesArray release]; 
```

# paypal - PayPal Payments Standard 自定义 HTML 表单；贝宝如何知道谁在提交？

> ID：10835922
> 
> 赞同：7
> 
> 时间：2012-05-31T14:47:45.930
> 
> 标签：paypal

我正在尝试使用 PayPal Payments Standard 获取此表格以发起捐赠...

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
  <input type="hidden" name="cmd" value="_donations">
  <input type="text" name="amount"></input>
  <input type="hidden" name="item_name" value="OrganizationXYZ Donation">
  <input type="hidden" name="image_url" value="http://www.OrganizationXYZ.org/images/logo.gif">
  <input type="image" name="submit" border="0"  src="https://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif" alt="PayPal - The safer, easier way to pay online">  
</form> 
```

[根据 PayPal 的文档](https://cms.paypal.com/es/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_formbasics)，这似乎应该可以工作，但事实并非如此。相反，我收到此错误：

**“我们无法处理此交易，因为卖家提供的 PayPal 电子邮件地址有问题。请联系卖家解决问题。如果这笔付款是针对 eBay 列表的，您可以通过“询问卖家 a”联系卖家问题”列表页面上的链接。当您拥有正确的电子邮件地址时，可以在 www.paypal.com 进行付款。”**

此错误没有任何意义，因为您没有在这些表单中提供电子邮件地址。然而在我看来，我的表格需要发布*某种*身份证明——否则 PayPal 怎么知道哪个账户正在接收捐款？除非我通过我的 PayPal 帐户设置注册域，但也没有地方可以这样做。

有没有人有设置这个的经验？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T00:14:21.253

是的，正如您所提到的，它需要某种收件人的标识符。
您需要添加的是“业务”参数。就这样。

```
<input type="hidden" name="business" value="your secure merchant account ID / email here"> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T14:56:04.843

您必须有一个商家帐户。

你可以在这里看到一个教程：http:
[//kb.worldsecuresystems.com/833/cpsid_83331.html](http://kb.worldsecuresystems.com/833/cpsid_83331.html)

试试这个代码：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">

    <select name="amount">
    <option value="3.99">6 Months ($3.99)</option>
    <option value="5.99">12 Months ($5.99)</option>

    </select>
    <br>
    <input name="currency_code" type="hidden" value="USD">
    <input name="shipping" type="hidden" value="0.00">
    <input name="tax" type="hidden" value="0.00">
    <input name="return" type="hidden" value="urlOnValidPayment">
    <input name="cancel_return" type="hidden" value="UrlOnCancelPayment">
    <input name="notify_url" type="hidden" value="URLForValidationPayement">
    <input name="cmd" type="hidden" value="_xclick">
    <input name="business" type="hidden" value="your e-mail">
    <input name="item_name" type="hidden" value="name of the object">
    <input name="no_note" type="hidden" value="1">
    <input type="hidden" name="no_shipping" value="1">
    <input name="lc" type="hidden" value="EN">
    <input name="bn" type="hidden" value="PP-BuyNowBF">
    <input name="custom" type="hidden" value="custom data">
    <input type="image" src="https://www.paypalobjects.com/en_US/CH/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.paypalobjects.com/fr_FR/i/scr/pixel.gif" width="1" height="1">
    </form> 
```

对我来说这是工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T15:14:01.080

¿ 您只是自己生成付款按钮吗？

我必须建议您登录到您的 PayPal 帐户，转到菜单的这一部分：

商家服务 -> 主要功能 -> 立即购买按钮

然后选择按钮类型我猜你想要一个捐赠按钮。

然后配置整体按钮设置，我必须建议将按钮保存在贝宝服务器中。

最后选择创建按钮

这将为您提供正确的 HTML 代码。这是一个示例捐赠按钮 HTML。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
  <input type="hidden" name="cmd" value="_donations">
  <input type="hidden" name="business" value="YOUR_BUSINESS_ID">
  <input type="hidden" name="lc" value="US">
  <input type="hidden" name="item_name" value="myorgname">
  <input type="hidden" name="item_number" value="donateid">
  <input type="hidden" name="amount" value="20">
  <input type="hidden" name="currency_code" value="USD">
  <input type="hidden" name="bn" value="PP-DonationsBF:btn_donateCC_LG.gif:NonHosted">
  <input type="hidden" name="custom_variable1" value="val1">
  <input type="hidden" name="custom_variable2" value="val2">
  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-13T08:14:28.810

这是你的问题：

```
<input type="hidden" name="cmd" value="_donations"> 
```

Paypal 在“cmd”的加密支付系统 (WPS - EPS) 中的图像值是“_s-xclick” 所以使用它如下：

```
<input type="hidden" name="cmd" value="_s-xclick"> 
```

# php - How to set $PATH for php exec or shell_exec

> ID：10835923
> 
> 赞同：5
> 
> 时间：2012-05-31T14:47:46.727
> 
> 标签：php, ant, centos, exec, shell-exec

I have set the PATH to run ant and it is working on putty but on php exec it is returning sh ant command not found i have tried to set PATH by export PATH=/usr/ant/bin

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-30T16:29:33.443

在执行之前调用 putenv：

```
putenv('PATH=/usr/ant/bin'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:51:40.547

环境变量是在用户会话的上下文中设置的。如果你想为 PHP 用户设置变量，你应该检查运行 apache 的用户（通常是 apache），并添加

`export PATH=/usr/ant/bin`

至

`/home/apache/.bashrc`

`apache`以便为用户启动的每个会话设置路径。

# css - 没有 JS 的下拉菜单

> ID：10835926
> 
> 赞同：0
> 
> 时间：2012-05-31T14:47:51.820
> 
> 标签：css, menu, submenu

我一直在寻找没有 JS 的下拉菜单 - 但没有任何运气。我正在尝试构建一个类似于[vimeo.com](http://vimeo.com)上的菜单，但是关于制作 dropline 的大多数教程都使用这样的东西：

```
.submenu { display:none; }
li.item:hover > .submenu { display:block; } 
```

Insted 我想使用溢出：隐藏；显示子菜单。像这样的东西：http: [//jsfiddle.net/tuplet/Jv77L/](http://jsfiddle.net/tuplet/Jv77L/)

在这个例子中，当你悬停一个列表项时，我使用 jQuery 来确定 #top 的高度从 40px 到 80px。这实际上是我的主要问题，因为我不知道没有 jQuery 怎么做？悬停 li 时如何更改#top 高度？

我不知道这是否可能（或最好的方法），但如果您有想法，请告诉我:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:19:47.017

删除 javascript，将其添加到您的 css：

```
#top:hover { 
    height:80px;
} 
```

# c++ - C++ - 在文本文件中查找和替换（标准系统库）

> ID：10835929
> 
> 赞同：3
> 
> 时间：2012-05-31T14:48:04.507
> 
> 标签：c++, file, text, replace

我正在寻找一些建议。

**我的情况：**

*   应用程序使用**文本本地文件**。

*   在文件中有这样的标签：

    ```
    正确=“文本”
    ```

    . *不幸的是，正确*的、*=*和*"TEXT"*之间可以有无限的空格。
*   获得的文本正在功能测试中，可能会被替换（更改**必须存储在文件中**）。

    ```
    正确 = "CORRECT_TEXT"
    ```

**我目前的理论方法：**

*   使用**ofstream** -- 逐行读取到字符串。

*   查找标签并更改字符串。

*   将字符串作为行保存到文件中。

* * *

**仅使用标准系统库**（unix）在 C++ 中是否有一些简化方法（使用迭代器？ ）。

谢谢你的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T15:20:08.887

这是一个可能的解决方案，它使用：

*   [`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)
*   [`std::copy()`](http://en.cppreference.com/w/cpp/algorithm/copy)
*   [`istream_iterator`](http://en.cppreference.com/w/cpp/iterator/istream_iterator)
*   [`ostream_iterator`](http://en.cppreference.com/w/cpp/iterator/ostream_iterator)
*   [`vector`](http://en.cppreference.com/w/cpp/container/vector)

例子：

```
#include <iostream>
#include <fstream>
#include <iterator>
#include <algorithm>
#include <string>
#include <vector>

struct modified_line
{
    std::string value;
    operator std::string() const { return value; }
};
std::istream& operator>>(std::istream& a_in, modified_line& a_line)
{
    std::string local_line;
    if (std::getline(a_in, local_line))
    {
        // Modify 'local_line' if necessary
        // and then assign to argument.
        //
        a_line.value = local_line;
    }
    return a_in;
}

int main() 
{
    std::ifstream in("file.txt");

    if (in.is_open())
    {
        // Load into a vector, modifying as they are read.
        //
        std::vector<std::string> modified_lines;
        std::copy(std::istream_iterator<modified_line>(in),
                  std::istream_iterator<modified_line>(),
                  std::back_inserter(modified_lines));
        in.close();

        // Overwrite.
        std::ofstream out("file.txt");
        if (out.is_open())
        {
            std::copy(modified_lines.begin(),
                      modified_lines.end(),
                      std::ostream_iterator<std::string>(out, "\n"));
        }
    }

    return 0;
} 
```

我不确定线条的操作应该是什么，但你可以使用：

*   [`std::string::find()`](http://en.cppreference.com/w/cpp/string/basic_string/find)和[`std::string::substr()`](http://en.cppreference.com/w/cpp/string/basic_string/substr)
*   [`boost::split()`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost/algorithm/split_id820181.html)

编辑：

为了避免一次将每一行存储在内存中，初始`copy()`可以更改为写入替代文件，然后是文件[`rename()`](http://en.cppreference.com/w/cpp/io/c/rename)：

```
std::ifstream in("file.txt");
std::ofstream out("file.txt.tmp");

if (in.is_open() && out.open())
{
    std::copy(std::istream_iterator<modified_line>(in),
              std::istream_iterator<modified_line>(),
              std::ostream_iterator<std::string>(out, "\n"));

    // close for rename.
    in.close();
    out.close();

    // #include <cstdio>
    if (0 != std::rename("file.txt.tmp", "file.txt"))
    {
        // Handle failure.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:31:30.900

您可以将任务分成小块，并弄清楚如何在 C++ 中完成每个任务：

*   打开一个文件作为输入流
*   打开临时文件作为输出流
*   从流中读取一行
*   将一行写入流
*   将一行与给定的模式匹配
*   替换一行中的文本
*   重命名文件

注意：在这种情况下，您一次不需要在内存中存储多于一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T16:10:52.333

它看起来很像“INI 文件”语法。你可以搜索它，你会有大量的例子。但是，其中很少有人会真正使用 C++ 标准库。

这里有一些建议。（注意，我假设您需要替换的每一行都使用以下语法`<parameter> = "<value_text>"`：）

*   使用`std::string::find`方法定位'='字符。
*   使用该`std::string::substr`方法将字符串拆分为不同的块。
*   您需要创建一个修剪算法来删除字符串前面或后面的每个空白字符。（可以用std函数来完成）

有了所有这些，您就可以拆分字符串并隔离各个部分以比较它们进行所需的修改。

玩得开心 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T15:38:44.210

您确定需要在 C++ 中执行此操作吗？由于您在 Unix 上，您可以调用`sed`which 将使用以下命令轻松完成此操作：

```
cat oldfile | sed 's/\(correct *= *\)\"TEXT\"/\1\"CORRECT_TEXT\"/' > newfile 
```

如果必须，您可以在 C++ 中调用 unix 命令（例如使用`system("command")`from `<cstdlib>`.

# linux - How can I preserve quotes in printing a bash script's arguments

> ID：10835933
> 
> 赞同：33
> 
> 时间：2012-05-31T14:48:21.337
> 
> 标签：linux, bash

I am making a bash script that will print and pass complex arguments to another external program.

```
./script -m root@hostname,root@hostname -o -q -- 'uptime ; uname -a' 
```

How do I print the raw arguments as such:

```
-m root@hostname,root@hostname -o -q -- 'uptime ; uname -a' 
```

Using `$@` and `$*` removes the single quotes around `uptime ; uname -a` which could cause undesired results. My script does not need to parse each argument. I just need to print / log the argument string and pass them to another program exactly how they are given.

I know I can escape the quotes with something like `"'uptime ; uname -a'"` but I cannot guarantee the user will do that.

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-31T15:05:29.480

The quotes are removed before the arguments are passed to your script, so it's too late to preserve them. What you can do is preserve their effect when passing the arguments to the inner command, and reconstruct an equivalent quoted/escaped version of the arguments for printing.

For passing the arguments to the inner command `"$@"` -- with the double-quotes, $@ preserves the original word breaks, meaning that the inner command receives exactly the same argument list that your script did.

For printing, you can use the %q format in bash's printf command to reconstruct the quoting. Note that this won't always reconstruct the original quoting, but will construct an *equivalent* quoted/escaped string. For example, if you passed the argument `'uptime ; uname -a'` it might print `uptime\ \;\ uname\ -a` or `"uptime ; uname -a"` or any other equivalent (see @William Pursell's answer for similar examples).

Here's an example of using these:

```
printf "Running command:"
printf " %q" innercmd "$@" # note the space before %q -- this inserts spaces between arguments
printf "\n"
innercmd "$@" 
```

If you have bash version 4.4 or later, you can use the `@Q` modifier on parameter expansions to add quoting. This tends to prefer using single-quotes (as opposed to `printf %q`'s preference for escapes). You can combine this with `$*` to get a reasonable result:

```
echo "Running command: innercmd ${*@Q}"
innercmd "$@" 
```

Note that `$*` mashes all arguments together into a single string with whitespace between them, which is normally not useful, but in this case each argument is individually quoted so the result is actually what you (probably) want. (Well, unless you changed `IFS`, in which case the "whitespace" between arguments will be the first character of `$IFS`, which may *not* be what you want.)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T14:57:31.767

If the user invokes your command as:

```
./script 'foo' 
```

the first argument given to the script is the string `foo` without the quotes. There is no way for your script to differentiate between that and any of the other methods by which it could get `foo` as an argument (eg `./script $(echo foo)` or `./script foo` or `./script "foo"` or `./script \f\o""''""o`).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T16:02:45.590

If you want to print the argument list as close as possible to what the user probably entered:

```
#!/bin/bash
chars='[ !"#$&()*,;<>?\^`{|}]'
for arg
do
    if [[ $arg == *"'"* ]]
    then
        arg=\""$arg"\"
    elif [[ $arg == *$chars* ]]
    then
        arg="'$arg'"
    fi
    allargs+=("$arg")    # ${allargs[@]} is to be used only for printing
done
printf '%s\n' "${allargs[*]}" 
```

It's not perfect. An argument like `''\''"'` is more difficult to accommodate than is justified.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-25T02:24:08.473

Use ${@@Q} for a simple solution. To test put the lines below in a script bigQ.

```
#!/bin/bash
line="${@@Q}"
echo $line

./bigQ 1 a "4 5" b="6 7 8"
'1' 'a' '4 5' 'b=6 7 8' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-24T20:51:13.830

As someone else already mentioned, when you access the arguments inside of your script, it's too late to know which arguments were quote when it was called. However, you can re-quote the arguments that contain spaces or other special characters that would need to be quoted to be passed as parameters.

Here is a Bash implementation based on [Python's `shlex.quote(s)`](https://github.com/python/cpython/blob/3.8/Lib/shlex.py#L321) that does just that:

```
function quote() {
  declare -a params
  for param; do
    if [[ -z "${param}" || "${param}" =~ [^A-Za-z0-9_@%+=:,./-] ]]; then
      params+=("'${param//\'/\'\"\'\"\'}'")
    else
      params+=("${param}")
    fi
  done
  echo "${params[*]}"
} 
```

Your example slightly changed to show empty arguments:

```
$ quote -m root@hostname,root@hostname -o -q -- 'uptime ; uname -a' ''
-m root@hostname,root@hostname -o -q -- 'uptime ; uname -a' '' 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2022-01-06T22:37:28.780

Just separate each argument using **quotes**, and the **nul character**:

```
#! /bin/bash

sender () {
    printf '"%s"\0' "$@"
}

receiver () {
    readarray -d '' args < <(function "$@")
}

receiver "$@" 
```

As commented by [Charles Duffy](https://stackoverflow.com/users/14122/charles-duffy).

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-06-08T22:33:52.597

`eval "./script -m root@hostname,root@hostname -o -q -- 'uptime ; uname -a'"`

[https://ss64.com/bash/eval.html](https://ss64.com/bash/eval.html)

# hadoop - 在 Pig 中删除单列

> ID：10835943
> 
> 赞同：4
> 
> 时间：2012-05-31T14:49:07.040
> 
> 标签：hadoop, mapreduce, apache-pig

我正在通过大约 20 个 ID 的列表过滤表。现在我的代码如下所示：

```
A = LOAD 'ids.txt' USING PigStorage();
B = LOAD 'massive_table' USING PigStorage();
C = JOIN A BY $0, B BY $0;
D = FOREACH C GENERATE $1, $2, $3, $4, ...
STORE D INTO 'foo' USING PigStorage(); 
```

我不喜欢的是 D 行，我必须重新生成一个新表以通过显式声明我想要呈现的每个其他列（有时是很多列）来摆脱连接列。我想知道是否有相当于：

```
FILTER B BY $0 IN (A) 
```

或者：

```
DROP $0 FROM C 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T16:00:33.080

也许类似于这个问题：

*   [如何使用猪拉丁语“更新”列](https://stackoverflow.com/questions/4682912/how-to-update-a-column-using-pig-latin)

这引用了 JIRA 票证：[https](https://issues.apache.org/jira/browse/PIG-1693) ://issues.apache.org/jira/browse/PIG-1693 ，其中举例说明了如何使用 .. 符号来表示所有剩余字段：

```
D = FOREACH C GENERATE $1 .. ; 
```

这假设你有 0.9.0+ PIG

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-22T07:27:10.227

## 按数字删除列

如果你想删除第 5 列，你可以这样做：

```
D = FOREACH C GENERATE .. $4, $6 .. ; 
```

## 按名称删除列

如果要按名称删除列，仅知道要删除的列的名称似乎是不可能的。但是，如果您直接知道该列之前和之后的列名，则有可能。如果你想删除 colBeforeMyCol 和 colAfterMyCol 之间的列，你可以这样做：

```
aliasAfter = FOREACH aliasBefore GENERATE 
             .. colBeforeMyCol, colAfterMyCol ..; 
```

# javascript - Increment Cart Quantity with javascript(rails)

> ID：10835945
> 
> 赞同：0
> 
> 时间：2012-05-31T14:49:10.397
> 
> 标签：javascript, ruby-on-rails-3

I need to be able to have the correct quantity in my cart, but the reason I'm using js is because we have assemblies from vehicles with all the products listed but some are on there twice so it currently is taking the bottom most quantity when both fields are set to a certain number, instead of adding them together. And of course both parts ids are the same adding to the issue as well. Here is what I have so far:

```
$('#add_to_cart').submit(function(){
    arr1 =  jQuery.makeArray($('input[id*="myap_"]'));
    arr2 = jQuery.makeArray($('input[id*="products_"]'));
    fields = arr1.concat(arr2).sort();
    jQuery.each(fields, function(index, domEle){
      if (index > 0 && $(this).attr('id') == fields[index-1].id){
        curr_val = ($.isNumeric(domEle.value)) ? parseInt(domEle.value) : 0
        second_val = ($.isNumeric(fields[index-1].value)) ? parseInt(fields[index-1].value) : 0
        domEle.value = curr_val + second_val;
        fields[index-1].value = 0;
    }
    });
}); 
```

we have to different kinds of products on the same page so that is why there is myap and products. Also, this seems to work sometimes but not always and generally not in ie.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:21:47.433

弄清楚了。它没有正确排序。需要这个：

```
fields = arr1.concat(arr2).sort(function(a,b){return a.id > b.id ? 1 : -1;}); 
```

# android - 如何为 Android 4.0 平板电脑创建一个详细列表视图，就像联系人应用程序一样？

> ID：10835948
> 
> 赞同：1
> 
> 时间：2012-05-31T14:49:24.893
> 
> 标签：android, list, layout, contacts, android-4.0-ice-cream-sandwich

我实际上正在为**Android 4.0开发一个****平板电脑**应用程序，我需要使用显示 2 或 3 个窗格的布局（就像默认的**联系人**应用程序一样）。它将显示产品目录：

 ****1.  第一个窗格是项目列表
2.  第二个窗格是列表中当前选定项目的详细视图
3.  最后一个窗格是可选的，显示愿望清单（可以显示或隐藏）

## 该方法

所以，我目前正在使用一个`ListFragment`列表窗格，一个简单`Fragment`的详细信息窗格。最后一个实际上并没有集成。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment
        android:id="@+id/listFragment"
        android:layout_width="0dip"
        android:layout_weight=".3"
        android:layout_height="match_parent"
        class="com.###.###.ui.fragments.ListFragment" />

    <fragment
        android:id="@+id/detailsFragment"
        android:layout_width="0dip"
        android:layout_weight=".7"
        android:layout_height="match_parent"
        class="com.###.###.ui.fragments.DetailsFragment" />

</LinearLayout> 
```

*   这种设计有更好的方法吗？

## 样式

我还想遵循 Android 4.0 设计指南，并将与默认联系人应用程序相同的设计应用于我的应用程序。我搜索了有关如何应用此*样式*的教程，但找不到任何相关内容。

[这是我需要的确切图片。](http://developer.android.com/design/media/multipane_view_tablet.png)（对不起，我还不允许发布图片......）

*   如何实现默认的 Android 4.0 详细列表样式？

我在指南网页上看到[了这张资源图片。](https://i.stack.imgur.com/MXBo7.png)我确信有一种简单的方法可以在任何应用程序上实现这种风格......所以，如果有人可以帮助我这样做......****

# javascript - 如何自动化包装方法？

> ID：10835951
> 
> 赞同：-1
> 
> 时间：2012-05-31T14:49:35.023
> 
> 标签：javascript

我想用函数自动将所有方法包装在一个对象中。目前，我只知道如何做到这一点：

jsfiddle：http: [//jsfiddle.net/4VuE7/](http://jsfiddle.net/4VuE7/)

代码：

```
<div style=white-space:pre>
<i>foo bar lorem ipsum</i>
<i>foo bar lorem ipsum</i>
<i>foo bar lorem ipsum</i>
<i>foo bar lorem ipsum</i>
<i>foo bar lorem ipsum</i>
<i>foo bar lorem ipsum</i>
</div>​
<script>

//method that only works on elements:
Element.prototype.css = function(a,i,n){for(n in''+a===a||a)this.style[n]=a[n];return i||n?(this.style[a]=i,this):getComputedStyle(this)[a]};

//put a wrapper around it that makes it work with nodelists
NodeList.prototype.css = function(a,i){for(var n in this)this[n].css(a,i)};

//put a wrapper around it so it works with a selector in a string
String.prototype.css = function(a,i){document.querySelectorAll(this).css(a,i)}​;

//use the method:

"div>i".css("color","red")​;​

</script> 
```

我想为对象中的每个方法自动执行此操作。（单个函数自动包装每个方法）

免责声明：除非您真的知道自己在做什么，否则不要乱搞 dom！（您可能不知道！）此示例仅用于演示目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:09:28.013

我找到了怎么做！： http: [//jsfiddle.net/4VuE7/3/](http://jsfiddle.net/4VuE7/3/)

```
Element.prototype.css = function(a,i,n){
for(n in''+a===a||a)this.style[n]=a[n];return i||n?(this.style[a]=i,this):getComputedStyle(this)[a]};

Object.getOwnPropertyNames(Element.prototype).forEach(function(a){

    NodeList.prototype[a]=function(){for(var n in this)this[n][a].apply(this[n],arguments)}

    String.prototype[a]=function(){document.querySelectorAll(this)[a].apply(document.querySelectorAll(this),arguments)}

});

"div>i".css("color","red");​ 
```

# security - 如何在 Play Framework 中编写“用户只能访问自己的个人资料页面”类型的安全检查？

> ID：10835954
> 
> 赞同：0
> 
> 时间：2012-05-31T14:49:42.620
> 
> 标签：security, playframework, playframework-1.x

我有一个 Play 框架应用程序，它有一个这样的模型：A`Company`有一个并且只有一个`User`与之关联。

我有诸如`http://www.example.com/companies/1234`、 `http://www.example.com/companies/1234/departments`之 类的 URL `http://www.example.com/companies/1234/departments/employees`。这些数字是公司 ID，而不是用户 ID。

我希望普通用户（不是管理员）只能访问他们自己的个人资料页面，而不是其他人的个人资料页面。因此，与 ID 为 1234 的公司关联的用户应该无法访问该 URL `http://www.example.com/companies/6789`

我试图通过覆盖`Secure.check()`请求参数“id”并将其与与登录用户关联的公司的 ID 进行比较来完成此操作。但是，如果参数被称为“id”以外的任何东西，这显然会失败。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:55:16.753

您可以有一个简单的@Before 函数，或者如果它仅在您想要应用安全性的视图页面上，那么您可以在开头有一段简单的代码来检查用户的 id（我假设来自会话） ，并检查是否允许他们访问该页面，方法是从会话中的 id 获取用户，并从传入的 id 获取公司，并相互检查。

如果安全失败，则要么返回错误请求而不是渲染，要么调用显示未授权自定义页面的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:55:39.903

您可以创建一个扩展 Controller 的 SecureProfileController 类，具有针对用户 companyId 执行 checkCompanyId-that-is-to-be-viewed 的方法，并让需要该逻辑的控制器扩展 SecureController。

如果方法是 @Before 函数，就像 Codemwnci 说的那样，那么它可以拦截继承类中的所有动作方法。

或者，您可以查看 Deadbolt，您可以在其中为用户设置角色并根据这些角色限制访问：[http ://www.playframework.org/modules/deadbolt-1.0/home](http://www.playframework.org/modules/deadbolt-1.0/home)

希望有帮助:)

# javascript - 在本地工作但不在线

> ID：10835955
> 
> 赞同：0
> 
> 时间：2012-05-31T14:49:50.530
> 
> 标签：javascript, jquery, css, html

我有它，所以当您单击右上角的一个氢等元素时，它会在大中心 div 中播放视频并显示有关氢的信息。我让它在本地工作，但我无法让它在网上工作。请任何帮助都会很棒。

这是我的项目的链接 [http://travismichael.net/periodic_elements/](http://travismichael.net/periodic_elements/)

这是我网站的脚本

```
<script type="text/javascript">
$(document).ready(function() {

$('div.video').hide();

$('.icon').click(function(){
    var id=$(this).data('id'),
        thisDiv=$("div.video[data-id='" + id +"']"),
        thisVideo=$("div.video[data-id='" + id +"']").find('video');

    $('video').each(function() {
        this.pause();
        this.currentTime = 0;
    });

       $('div.video').not(thisDiv).fadeOut('fast');

       thisDiv.fadeIn();      
       thisVideo.get(0).play();   
    });

});
</script>
<script type="text/javascript">
$("#periodictable td").hover(function() {
      $(this).stop().animate({opacity: "1"}, 'fast');
    },
    function() {
      $(this).stop().animate({opacity: ".7"}, 'slow');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:56:41.107

**错误在这里：**

你正在尝试

```
var thisDiv = ("div.video[data-id='" + id +"']");// but it returns jQuery object, 
                                                 // not element

// Thats why below statement will not work
// because it works on element

alert(thisDiv.nodeType); 
```

所以你应该这样尝试：

```
var thisDiv = ("div.video[data-id='" + id +"']")[0]; // returns the element
alert(thisDiv.nodeType); // and then get the nodeType 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:55:27.070

检查时，我收到一条错误消息，指出元素未定义。

你应该超越你的控制台给你的错误，因为它会给你正在寻找的东西提供更多的解释。

它显然抛出了一个异常，无论你的异常是什么都显示错误消息，所以......你在定义文件的本地主机上尝试它。它们是在您的代码中声明的，还是带有指针或要说的内容，请回头看看这里，并在单击按钮时使用它？

看起来您的函数应该包含这些声明，或者您可以将它们设为全局，如果没有更多信息就不确定......

# javascript - 如何添加加载“微调器”

> ID：10835963
> 
> 赞同：3
> 
> 时间：2012-05-31T14:50:05.773
> 
> 标签：javascript, jquery

我有一些非常简单的 js（我还在学习），它基本上读取表单的元素并创建一个传递给成像服务器的 url 字符串，然后再渲染图像。

```
var imgURL = "site.com/path/to/image";
var product = "BirthdayCard_End" + "?&";
var page = 2;
var format;
var data;

function setPage(inputID)
    {
        page = inputID;
        setJPG();
    }

function FormValues()
    {
        var str = '';
        var elem = document.getElementById('form1').elements;
        for(var i = 0; i < elem.length; i++)
        {
            str += "$" + elem[i].id + "=" + elem[i].value + "&";
        }
        data = str;         
    }

function genPDF()
    {
        var format = "fmt=pdf&mediaMargin=48&bleedMargin=48&printerMark=1,1,1,1,1,Illustrator,.25,1";
        fullURL = imgURL + product + data + format;
        window.open(fullURL);       

    }

function setJPG()
    {
        FormValues();
        var format = "imageRes=200&fmt=jpg&wid=550&page=" + page;
        fullURL = imgURL + product + data + format;
        document.getElementById('lblValues').innerHTML = fullURL;
        document.getElementById('image').src = fullURL;
    } 
```

我试图弄清楚如何显示这样的简单加载程序（[http://fgnass.github.com/spin.js/#v1.2.5](http://fgnass.github.com/spin.js/#v1.2.5)）。如何在 setJPG() 函数中添加一些内容，以便它在每次初始化时弹出加载器，然后在加载图像后消失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-23T00:17:12.907

你们让这种方式变得比它需要的更复杂。将您的图像放在一个 div 中，并将 div 的背景设置为动画 gif。

```
<div style="background-image: url('spinner.gif')"><img src='bigImage.jpg'></div> 
```

根本不需要使用任何 JS，图像将简单地加载到背景微调器上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:57:24.730

最简单的方法是在另一个上创建两个 div。一个带有微调器的 div 用内容覆盖 div，然后在页面完成加载时显示带有内容的 div。

在此示例中，我在 window.load 上使用它，因此您可能需要将事件修改为加载图像。其余的应该可以正常工作。

CSS：

```
#preloader {
position:absolute;
top:0;
left:0;
width:100%;
height:100%;
background:white;
opacity:0.3;
z-index:2;
}
#spinner_container {
position:absolute;
width:100%;
top: 50%;
left:0px;
height:1px;
overflow:visible;
opacity: 1;
background: transparent;
}
#spinner {
width: 31px;
height:31px;
margin-left:-15px;
position:absolute;
top:-15px;
left:50%;
display:block;
} 
```

HTML

```
<div id="preloader">
<div id="spinner_container">
<img id="spinner" src="/content/images/spinner_squares_circle.gif" alt="" />
</div>
</div>
<div id="wrapper">
content
</div> 
```

jQuery

```
$(window).load(function(){

    $('#preloader').fadeOut(100, function() {
               $('body').css('overflow','auto');
               $(this).remove();
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T15:04:54.413

**建议的解决方案**

对于图像，使用“加载微调器”是有问题的。见下文。

首先发送图像的低分辨率（也考虑黑白）而不是微调器。[这个 SO question 告诉我们如何。](https://stackoverflow.com/questions/2691649/load-low-resolution-image-and-progressive-load-of-high-resolution)

**用于图像加载的微调器**

在等待显示图像时显示微调器的一个问题是，当图像加载时，浏览器无法可靠地告诉您的 JS。

如果它没有触发，那么你将永远看着旋转器......

请参阅[jQuery 加载事件](http://api.jquery.com/load-event/)的文档——

> > 与图像一起使用时加载事件的注意事项
> > 
> > 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些都是：
> > 
> > *   它不能始终如一地工作，也不能可靠地跨浏览器
> > *   如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发
> > *   它没有正确地冒泡 DOM 树
> > *   可以停止对已经存在于浏览器缓存中的图像进行触发

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-22T12:13:05.193

如果您使用的是[Spectre css](https://picturepan2.github.io/spectre/index.html "幽灵CSS")，则可以添加此 div 以添加微调器：

```
<link href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.3.1/spectre.min.css" rel="stylesheet"/>

<div class="loading"></div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-08T06:38:52.843

[![在此处输入图像描述](../Images/69687e3a7498f653b6f97680916f7950.png)](https://i.stack.imgur.com/3MBYz.png)

我在一个单独的文件中编写了加载器代码，因此它可以重用

文件：**Loader.js**

```
export const elementString = {
    loader:'loader' // class name that I used in renderLoader function
}
export const renderLoader = parent =>{
    const loader = `
    <div class='${elementString.loader}'>
        <svg>
            <use href="img/icons.svg#icon-cw"></use>
        </svg>
    </div>
    `;
    parent.insertAdjacentHTML('afterbegin', loader);
};

export const clearLoader=()=>{
    const loader = document.querySelector(`.${elementString.loader}`);
    if(loader){
        loader.parentElement.removeChild(loader);
    }
} 
```

文件：**style.css**

```
.loader {
  margin: 5rem auto;
  text-align: center; }
  .loader svg {
    height: 5.5rem;
    width: 5.5rem;
    fill: #F59A83;
    transform-origin: 44% 50%;
    animation: rotate 1.5s infinite linear; }

    @keyframes rotate {
  0% {
    transform: rotate(0); }
  100% {
    transform: rotate(360deg); } } 
```

文件：**icons.svg**

```
<svg aria-hidden="true" style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<symbol id="icon-cw" viewBox="0 0 20 20">
<title>cw</title>
<path d="M19.315 10h-2.372v-0.205c-0.108-4.434-3.724-7.996-8.169-7.996-4.515 0-8.174 3.672-8.174 8.201s3.659 8.199 8.174 8.199c1.898 0 3.645-0.65 5.033-1.738l-1.406-1.504c-1.016 0.748-2.27 1.193-3.627 1.193-3.386 0-6.131-2.754-6.131-6.15s2.745-6.15 6.131-6.15c3.317 0 6.018 2.643 6.125 5.945v0.205h-2.672l3.494 3.894 3.594-3.894z"></path>
</symbol>
</defs>
</svg> 
```

文件：**app.js**

```
renderLoader(document.querySelector('.results'));// .results is the parent of my searchlist which I am shoing in the view
await state.search.getResults();
clearLoader(); 
```

文件：app.html

```
<body>
    <div class="container">
        <div class="results">
            <ul class="results__list">
            </ul>
        </div>
    </div>

</body> 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-08-15T19:30:53.830

只需在图表 div 中添加一个旋转 gif，加载时它会自动被谷歌图表替换。像这样， ””

# solr - SOLR 中的精确匹配

> ID：10835967
> 
> 赞同：0
> 
> 时间：2012-05-31T14:50:18.800
> 
> 标签：solr, lucene, n-gram

我正在使用 NGramFilterFactory。我的架构如下所示

```
<fieldType name="c_text" class="solr.TextField">
<analyzer type="index">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.NGramFilterFactory" minGramSize="1" maxGramSize="255"/>
</analyzer>

<analyzer type="query">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
</analyzer>
</fieldType>
<field name="parentId" type="string" indexed="true" stored="true"/>
<field name="data_s" type="c_text" indexed="true" stored="true"/>
<field name="email" type="c_text" indexed="true" stored="true"/>
<field name="receivedDate" type="tdate" indexed="true" stored="true"/> 
```

我想在 data_s 字段上进行 exatc 短语搜索，例如“Hello World”，但无法做到。如果我给
data_s:hello world
它返回所有有 hello 或 world 或两者都有的记录。如果我给
data_s:"hello world"
它什么也不返回。

我怎样才能对此进行精确的短语搜索。我还需要搜索像“ello”这样的部分文本，这就是我使用 NGramFilterFactory 的原因。

所以我的要求是对确切的短语和部分文本进行搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:27:55.477

我的解决方案：-

我为此使用复制字段。

```
<field name="content" type="text_general" indexed="true" stored="false" 
 multiValued="true"/>
<copyField source="data_s" dest="content"/> 
```

每当我需要进行精确搜索时，我都会在“内容”字段上进行搜索。

我使用的是 solr3.5，“text_general”在这个 solr 版本中定义

```
 <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
</fieldType> 
```

# javascript - Socket.io 将两个客户端添加到房间

> ID：10835969
> 
> 赞同：0
> 
> 时间：2012-05-31T14:50:22.640
> 
> 标签：javascript, node.js, chat, express, socket.io

我正在尝试在使用 express 3 和 socket.io 创建的应用程序中实现私人消息传递

当客户端使用客户端用户 ID 连接房间时，会自动创建并加入。这主要用于通知之类的东西。现在我也试图让这也适用于私人聊天。当用户单击发送按钮时，消息与发送者的用户 ID（来自会话用户 ID）和从隐藏字段或属性中获取的所有者的用户 ID 一起发送的元素。发件人使用所有者用户 ID 命名空间加入房间。这样做的问题是，当发件人转到另一个页面或刷新浏览器时，他会与房间断开连接，并且不会收到来自所有者的任何进一步消息。他必须发送一条新消息才能重新加入业主房间。现在我如何感知与主人房间的连接？还是我做错了？有没有更好或标准的方法来实现这一目标？

**服务器：**

```
io.on('connection', function (socket) {
    var sh = socket.handshake;

    socket.join(sh.session.userid);

    socket.on('chat', function (data) {
        if (data.user) {
            socket.join(data.owner);
        }
        io.sockets.in(data.owner).emit('chat',
            {user: sh.session.user, message: data.message});
    });
}); 
```

**客户：**

```
var socket = io.connect('https://localhost/');

$('#send_message').click(function (e) {
    socket.emit('chat',{message: $('.message').val(),
         user:$('#user'), owner:$('#owner')} //Get this from hidden fields in chat form );
    e.preventDefault();
});

socket.on('chat', function (data) {
    $('ol').prepend('<li>' + data.user + '<br />' + data.message + '</li>');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:06:28.880

对。因为当您重新加载页面时，服务器会收到“客户端断开连接”消息并取消订阅套接字。客户需要重新发送“聊天”消息（具有相同的所有者 ID）才能返回私人订阅源。

一种方法是让客户端将所有者 ID 保存在 cookie 中，并在每次页面加载时调用它。或者，您可以让服务器存储并使用会话 cookie (http://www.senchalabs.org/connect/session.html) 调用此信息，这在本质上与第一个选项非常相似。

# perl - perl中的双花括号

> ID：10835973
> 
> 赞同：11
> 
> 时间：2012-05-31T14:50:25.413
> 
> 标签：perl, curly-braces

我在网上查看 perl 代码，遇到了一些我以前没见过的东西，也找不到它在做什么（如果有的话）。

```
if($var) {{
   ...
}} 
```

有谁知道双花括号是什么意思？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-31T15:38:00.727

那里有两种说法。一个“if”语句和一个[裸块](http://perldoc.perl.org/perlsyn.html#Basic-BLOCKs)。裸块是只执行一次的循环。

```
say "a";
{
   say "b";
}
say "c";

# Outputs a b c 
```

但作为循环，它们确实会影响`next`和。`last``redo`

```
my $i = 0;
say "a";
LOOP: {  # Purely descriptive (and thus optional) label.
   ++$i;
   say "b";
   redo if $i == 1;
   say "c";
   last if $i == 2;
   say "d";
}
say "e";

# Outputs a b b c e 
```

（与没有下一个元素`next`的情况相同。）`last`

它们通常用于创建词法范围。

```
my $file;
{
   local $/;
   open(my $fh, '<', $qfn) or die;
   $file = <$fh>;
}
# At this point,
# - $fh is cleared,
# - $fh is no longer visible,
# - the file handle is closed, and
# - $/ is restored. 
```

目前还不清楚为什么在这里使用一个。

* * *

或者，它也可以是哈希构造函数。

```
sub f {
   ...
   if (@errors) {
      { status => 'error', errors => \@errors }
   } else {
      { status => 'ok' }
   }
} 
```

简称

```
sub f {
   ...
   if (@errors) {
      return { status => 'error', errors => \@errors };
   } else {
      return { status => 'ok' };
   }
} 
```

Perl 窥视大括号以猜测它是裸循环还是散列构造函数。由于您没有提供大括号的内容，我们无法判断。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-31T14:59:17.737

这是一个通常与 一起使用的技巧`do`，请参阅中的[*语句修饰符*](http://p3rl.org/syn#Statement-Modifiers)[一](http://p3rl.org/syn#Statement-Modifiers)[章*`perlsyn`*](http://p3rl.org/syn#Statement-Modifiers)*。*

 *可能作者想跳出块与`next`或类似。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T14:58:21.520

在 的情况下`if`，它们可能等同于单括号（但这取决于块内部和外部的内容`if`，参见。

```
perl -E ' say for map { if (1) {{ 1,2,3,4 }} } 1 .. 2' 
```

）。不过，使用双括号是有理由的，使用`next`or `do`，请参阅[perlsyn](http://perldoc.perl.org/perlsyn.html#Statement-Modifiers)。例如，尝试运行几次：

```
perl -E 'if (1) {{ say $c++; redo if int rand 2 }}' 
```

并尝试用单括号替换双括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:58:32.543

如果没有更多代码，很难说出它们的用途。它可能是一个错字，也可能是一个裸块，请参阅[第 10.4 章**学习 Perl**中*的裸块控制结构*](http://oreilly.com/catalog/0636920018452)**。**

 **裸块将词法范围添加到块中的变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T12:57:13.047

{{ 可用于突破“if 块”。我有一些代码包含：

```
if ($entry =~ m{\nuid: ([^\s]+)}) {{ # double brace so "last" will break out of "if"
    my $uid = $1;
    last if exists $special_case{$uid};
    # ....

}}
# last breaks to here 
```***

# javascript - Sencha touch 2 模型关联保存不正确的数据到存储

> ID：10835985
> 
> 赞同：2
> 
> 时间：2012-05-31T14:51:16.603
> 
> 标签：javascript, sencha-touch, extjs, sencha-touch-2

请参考以下小提琴：[http](http://www.senchafiddle.com/#xXQlp) ://www.senchafiddle.com/#xXQlp 确保打开控制台以查看显示错误数据的输出。

在这里你可以看到我正在创建 2 个学生模型，每个模型都有一个 0+ 奖励模型的列表。Dave 获得了 2 个相当不错的奖项 - 不足为奇 :) - 而 Chaz 获得了 2 个不太好的奖项。问题是日志显示事实上 Chaz 最终获得了 4 个奖项（2 个好的，以及 2 个坏的）。

这个小提琴是一个更大的应用程序的严重沸腾，但我已将其隔离为我一直遇到的一个巨大问题的根源 - 我什至找到了一个“修复”它。如果你从小提琴中取消注释第 55 和 56 行并再次运行它（一定要清除你的本地存储！），你会看到 Chaz 只需要他应该获得的 2 个奖项。

出于我希望显而易见的原因，这不是我满意的解决方法。一定是我在协会做错了什么，才能让 Chaz 获得所有 4 个奖项。……肯定吗？

干杯!

更新：接受下面的答案，删除 autoLoad:true 可以解决问题。但是我想要 autoLoad，所以我在 Student 模型的 init 中实现了以下内容：

```
for (var i=0, l=this.associations.all.length; i<l; i++) {
    var assoc = this.associations.all[i];
    if (assoc._type == "hasmany") {
        var assocName = assoc._name;
        var getterName = 'get' + assocName.charAt(0).toUpperCase() + assocName.slice(1);
        this[getterName] = function(assocName) {
            var self = this;
            return function() {
                var store = self[assocName]();
                if (!store.isLoaded()) {
                    store.load();
                }
                return store;
            }
        }.call(this, assocName)
    }
} 
```

这会为学生拥有的每个 hasMany 关联添加一个 getter，并确保在返回之前加载该关联的存储。即我现在可以使用 student1.getAwards() 而不是 student1.awards() 访问 student1 的奖项，并且知道奖项将已加载，这将自动适用于我添加到模型中的任何其他 hasMany 关联。

我希望这对一些读者有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:25:55.063

不自动加载奖项将解决此问题，删除`autoload: true`学生>>奖项有很多关联。我不完全理解为什么自动加载奖项会破坏事情，但这个论坛帖子表明这是一个错误：[http ://www.sencha.com/forum/showthread.php?195371-autloaded-associations-don-t-properly -filter-data-from-a-JSON-proxy](http://www.sencha.com/forum/showthread.php?195371-autloaded-associations-don-t-properly-filter-data-from-a-JSON-proxy)

您的示例工作：[http ://www.senchafiddle.com/#xXQlp#S3Af0](http://www.senchafiddle.com/#xXQlp#S3Af0)

# sql - 子查询问题，SQL Server 2008

> ID：10835986
> 
> 赞同：1
> 
> 时间：2012-05-31T14:51:17.677
> 
> 标签：sql, sql-server, sql-server-2008, subquery

只是在 SQL Server 中玩弄子查询（我知道这个问题不必用子查询来解决，但我想知道我的语法问题在哪里）

```
select count(*) from 
( select id, totalcharges from tblVisits where (totalcharges <10000)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T14:53:12.190

我认为您需要命名您的子查询 - 例如在这里将其别名为“t”：

```
select count(*) from 
( select id, totalcharges from tblVisits where (totalcharges <10000)) t 
```

# android - 是否有任何安卓设备能够同时连接到 AP 和另一台设备？

> ID：10835991
> 
> 赞同：-1
> 
> 时间：2012-05-31T14:51:49.593
> 
> 标签：android, android-wifi, android-4.0-ice-cream-sandwich, wifi-direct

由于我没有 Android 4.0 设备，因此我无法自己进行测试。另外我想知道使用 Wifi direct 将设备 A（智能手机）连接到设备 B（支持 wifi direct 的设备）是否意味着设备 A 会假设设备 B 为它提供了互联网（网络共享？）。我正在尝试为设备 A 制作一个应用程序，该应用程序将与不提供互联网的设备 B 进行通信，因此了解这种情况是否会导致设备 A 在连接期间失去互联网连接会很有趣。根据设备 A 是通过 AP 还是通过 3G/4G 连接互联网，情况会有所不同吗？

也许使用蓝牙是一种解决方案，但在我的情况下，安全性是一个问题，在我看来，Wifi direct 提供了更强的安全性（WPA2）。

任何信息都会有帮助！

/S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T11:15:51.063

在 Android 上，Wi-Fi Direct 不会干扰您与互联网的连接（Wi-Fi 或 3G/4G）。一个问题可能是，一旦您打开 Wi-Fi（启用 Wi-Fi Direct，您的手机将尝试连接到已保存的可用网络之一并禁用您的 3G 连接。这是因为 Android（默认情况下）没有'不支持双连接（通过 Wi-Fi 和 3G/4G），但有一些[应用程序](http://geeknizer.com/combine-3g-4g-mobile-data-wifi-speed/)声称它们可以提供此类功能。